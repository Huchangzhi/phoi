# phoi - 适合OI的在线C++编辑器

## 项目概述

phoi是一个专为信息学竞赛（OI）设计的在线C++编辑器，支持在手机等移动设备上编写和运行C++代码。该项目使用Flask作为后端框架，结合HTML、CSS和JavaScript构建了一个功能丰富的在线代码编辑和调试环境。

项目的主要特点包括：
- 移动友好的代码编辑器，带虚拟键盘
- 代码高亮显示
- 与Rextester API集成，支持在线编译和执行C++代码
- AI辅助调试功能，支持与AI模型交互进行代码调试
- 代码查看框和一键替换功能

## 项目结构

```
/workspace/programming-language-demo/phoi/
├── app.py          # Flask后端应用，使用Rextester API
├── app_local.py    # 本地执行版本（有安全风险）
├── static/         # 静态资源文件
│   ├── script.js   # 前端JavaScript逻辑
│   └── style.css   # 样式文件
├── templates/      # HTML模板
│   └── index.html  # 主页面
├── README.md       # 项目说明
├── LICENSE         # 许可证
└── QWEN.md         # 项目上下文文件
```

## 核心功能

### 1. 代码编辑
- 支持全屏和3行预览两种编辑模式
- 语法高亮显示
- 虚拟键盘支持，适合移动设备使用
- 代码自动缩进和括号配对

### 2. 代码执行
- 通过Rextester API进行C++代码编译和执行
- 支持标准输入
- 结果在输出面板中显示

### 3. AI调试功能
- 集成AI模型进行代码调试
- 支持API配置（Base URL、API Key、模型）
- 题目描述、样例输入输出输入
- AI生成的代码显示在代码查看框中
- 支持一键替换当前代码
- 用户可以直接与AI交流获取代码建议

### 4. 代码查看与替换
- AI生成的最新代码在专门的代码查看框中显示
- 提供"替换当前代码"按钮，可将AI生成的代码直接替换到编辑器中
- 调试过程中自动运行代码直到通过，最多尝试5次
- 如果运行失败，错误信息会反馈给AI进行下一轮调试

## 技术栈

- **后端**: Python Flask
- **前端**: HTML5, CSS3, JavaScript
- **API**: Rextester在线编译服务
- **AI集成**: OpenAI API（或其他兼容的API）

## 构建和运行

### 依赖安装
```bash
pip install flask
```

### 运行方式
对于使用Rextester的版本：
```bash
python app.py
```

对于使用本地执行的版本（有安全风险，建议在容器内部署）：
```bash
python app_local.py
```

应用启动后，默认在 `http://0.0.0.0:5000` 端口监听，支持局域网内设备访问。

## AI调试功能使用说明

1. 点击"AI调试"按钮（⚙）
2. 配置API信息（Base URL、API Key、模型）
3. 输入题目描述、样例输入和样例输出
4. 点击"开始调试"或在调试界面中直接与AI交流
5. AI会分析代码并生成修改建议
6. AI生成的代码会显示在代码查看框中
7. 可以点击"替换当前代码"按钮将AI生成的代码应用到编辑器中

## 开发约定

- 代码风格：遵循JavaScript和Python的通用编码规范
- 提示词格式：使用`--begin`和`--end`标记AI生成的代码
- AI交互：要求AI保持用户原有码风和变量名，做最少修改
- 错误处理：前端和后端都有适当的错误处理和用户提示

## 部署

项目可以部署在任何支持Python Flask的服务器上。对于生产环境，建议：
- 使用反向代理（如Nginx）
- 配置SSL证书
- 设置适当的防火墙规则
- 使用容器化部署（如Docker）以提高安全性