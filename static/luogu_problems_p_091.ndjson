{"pid": "P2848", "type": "P", "difficulty": 4, "samples": [["3 2\n0 0\n1 0\n2 0\n0 3\n1 3", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2016", "USACO"], "title": "[USACO16DEC] Cow Checklist G", "background": "", "description": "Every day, Farmer John walks through his pasture to check on the well-being ofeach of his cows. On his farm he has two breeds of cows, Holsteins and Guernseys. His $H$ Holsteins are conveniently numbered $1 \\ldots H$, and his $G$ Guernseys are conveniently numbered $1 \\ldots G$($1 \\leq H \\leq 1000, 1 \\leq G \\leq 1000$). Each cow is located at a point inthe 2D plane (not necessarily distinct).\n\nFarmer John starts his tour at Holstein 1, and ends at Holstein $H$.  He wantsto visit each cow along the way, and for convenience in maintaining hischecklist of cows visited so far, he wants to visit the Holsteins and Guernseysin the order in which they are numbered. In the sequence of all $H+G$ cows hevisits, the Holsteins numbered $1 \\ldots H$ should appear as a (not necessarilycontiguous) subsequence, and likewise for the Guernseys. Otherwise stated, thesequence of all $H+G$ cows should be formed by  interleaving the list ofHolsteins numbered $1 \\ldots H$ with the list of Guernseys numbered $1 \\ldots G$.\n\nWhen FJ moves from one cow to another cow traveling a distance of $D$, heexpends $D^2$ energy.  Please help him determine the minimum amount of energyrequired to visit all his cows according to a tour as described above.", "inputFormat": "The first line of input contains $H$ and $G$, separated by a space.\n\nThe next $H$ lines contain the $x$ and $y$ coordinates of the $H$ Holsteins, and the next $G$ lines after that contain coordinates of the Guernseys. Each coordinate is an integer in the range $0 \\ldots 1000$.\n", "outputFormat": "Write a single line of output, giving the minimum energy required for FJ's tour of all the cows.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO16DEC] Cow Checklist G", "background": "", "description": "Every day, Farmer John walks through his pasture to check on the well-being ofeach of his cows. On his farm he has two breeds of cows, Holsteins and Guernseys. His $H$ Holsteins are conveniently numbered $1 \\ldots H$, and his $G$ Guernseys are conveniently numbered $1 \\ldots G$($1 \\leq H \\leq 1000, 1 \\leq G \\leq 1000$). Each cow is located at a point inthe 2D plane (not necessarily distinct).\n\nFarmer John starts his tour at Holstein 1, and ends at Holstein $H$.  He wantsto visit each cow along the way, and for convenience in maintaining hischecklist of cows visited so far, he wants to visit the Holsteins and Guernseysin the order in which they are numbered. In the sequence of all $H+G$ cows hevisits, the Holsteins numbered $1 \\ldots H$ should appear as a (not necessarilycontiguous) subsequence, and likewise for the Guernseys. Otherwise stated, thesequence of all $H+G$ cows should be formed by  interleaving the list ofHolsteins numbered $1 \\ldots H$ with the list of Guernseys numbered $1 \\ldots G$.\n\nWhen FJ moves from one cow to another cow traveling a distance of $D$, heexpends $D^2$ energy.  Please help him determine the minimum amount of energyrequired to visit all his cows according to a tour as described above.", "inputFormat": "The first line of input contains $H$ and $G$, separated by a space.\n\nThe next $H$ lines contain the $x$ and $y$ coordinates of the $H$ Holsteins, and the next $G$ lines after that contain coordinates of the Guernseys. Each coordinate is an integer in the range $0 \\ldots 1000$.\n", "outputFormat": "Write a single line of output, giving the minimum energy required for FJ's tour of all the cows.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO16DEC] Cow Checklist G", "background": null, "description": "每天，Farmer John 都会穿过他的牧场，检查每头奶牛的健康状况。他的农场里有两类奶牛：荷斯坦牛和根西牛。他的 $H$ 头荷斯坦牛被方便地编号为 $1 \\ldots H$，而他的 $G$ 头根西牛被方便地编号为 $1 \\ldots G$（$1 \\leq H \\leq 1000, 1 \\leq G \\leq 1000$）。每头奶牛都位于二维平面中的一个点（不一定不同）。\n\nFarmer John 从荷斯坦牛 $1$ 开始他的巡视，并在荷斯坦牛 $H$ 结束。他希望沿途访问每头奶牛，并且为了方便维护他已经访问过的奶牛清单，他希望按照编号顺序访问荷斯坦牛和根西牛。在他访问的所有 $H+G$ 头奶牛的序列中，编号为 $1 \\ldots H$ 的荷斯坦牛应作为一个（不一定连续的）子序列出现，同样地，编号为 $1 \\ldots G$ 的根西牛也应如此。换句话说，所有 $H+G$ 头奶牛的序列应通过将编号为 $1 \\ldots H$ 的荷斯坦牛列表与编号为 $1 \\ldots G$ 的根西牛列表交错排列而成。\n\n当 Farmer John 从一头奶牛移动到另一头奶牛，移动距离为 $D$ 时，他会消耗 $D^2$ 的能量。请帮助他确定按照上述巡视方式访问所有奶牛所需的最小能量。", "inputFormat": "输入的第一行包含用空格分隔的 $H$ 和 $G$。\n\n接下来的 $H$ 行包含 $H$ 头荷斯坦牛的 $x$ 和 $y$ 坐标，随后的 $G$ 行包含根西牛的坐标。每个坐标都是 $0 \\ldots 1000$ 范围内的整数。", "outputFormat": "输出一行，表示 Farmer John 巡视所有奶牛所需的最小能量。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2849", "type": "P", "difficulty": 3, "samples": [["5 2\n0 0\n8 3\n1 1\n10 -5\n2 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "USACO"], "title": "[USACO14DEC] Marathon S", "background": "", "description": "Unhappy with the poor health of his cows, Farmer John enrolls them in an assortment of different physical fitness activities. His prize cow Bessie is enrolled in a running class, where she is eventually expected to run a marathon through the downtown area of the city near Farmer John's farm!\n\n\nThe marathon course consists of N checkpoints (3 <= N <= 500) to be visited in sequence, where checkpoint 1 is the starting location and checkpoint N is the finish. Bessie is supposed to visit all of these checkpoints one by one, but being the lazy cow she is, she decides that she will skip up to K checkpoints (K < N) in order to shorten her total journey. She cannot skip checkpoints 1 or N, however, since that would be too noticeable.\n\n\nPlease help Bessie find the minimum distance that she has to run if she can skip up to K checkpoints.\n\n\nSince the course is set in a downtown area with a grid of streets, the distance between two checkpoints at locations (x1, y1) and (x2, y2) is given by |x1-x2| + |y1-y2|.\n\nBessie 参加城市马拉松比赛，要顺序经过 $N (3 \\leq N \\leq 500)$ 个检查点，其中检查点 $1$ 是起点，检查点 $N$ 是终点。 Bessie尝试略过 $K(K < N)$ 个检查点，以减少总路程，检查点 $1$ 和检查点 $N$ 不能被略过。两个检查点的距离是 $|x_1-x_2| + |y_1-y_2|$。\n\n输入输出格式\n", "inputFormat": "The first line gives the values of N and K.\n\n\nThe next N lines each contain two space-separated integers, x and y,representing a checkpoint (-1000 <= x <= 1000, -1000 <= y <= 1000).\n\n\nThe checkpoints are given in the order that they must be visited.\n\n\nNote that the course might cross over itself several times, with several checkpoints occurring at the same physical location. When Bessie skips such a checkpoint, she only skips one instance of the checkpoint -- she does not skip every checkpoint occurring at the same location.\n", "outputFormat": "Output the minimum distance that Bessie can run by skipping up to K checkpoints. In the sample case shown here, skipping the checkpoints at (8, 3) and (10, -5) leads to the minimum total distance of 4.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO14DEC] Marathon S", "background": "", "description": "Unhappy with the poor health of his cows, Farmer John enrolls them in an assortment of different physical fitness activities. His prize cow Bessie is enrolled in a running class, where she is eventually expected to run a marathon through the downtown area of the city near Farmer John's farm!\n\n\nThe marathon course consists of N checkpoints (3 <= N <= 500) to be visited in sequence, where checkpoint 1 is the starting location and checkpoint N is the finish. Bessie is supposed to visit all of these checkpoints one by one, but being the lazy cow she is, she decides that she will skip up to K checkpoints (K < N) in order to shorten her total journey. She cannot skip checkpoints 1 or N, however, since that would be too noticeable.\n\n\nPlease help Bessie find the minimum distance that she has to run if she can skip up to K checkpoints.\n\n\nSince the course is set in a downtown area with a grid of streets, the distance between two checkpoints at locations (x1, y1) and (x2, y2) is given by |x1-x2| + |y1-y2|.\n\nBessie 参加城市马拉松比赛，要顺序经过 $N (3 \\leq N \\leq 500)$ 个检查点，其中检查点 $1$ 是起点，检查点 $N$ 是终点。 Bessie尝试略过 $K(K < N)$ 个检查点，以减少总路程，检查点 $1$ 和检查点 $N$ 不能被略过。两个检查点的距离是 $|x_1-x_2| + |y_1-y_2|$。\n\n输入输出格式\n", "inputFormat": "The first line gives the values of N and K.\n\n\nThe next N lines each contain two space-separated integers, x and y,representing a checkpoint (-1000 <= x <= 1000, -1000 <= y <= 1000).\n\n\nThe checkpoints are given in the order that they must be visited.\n\n\nNote that the course might cross over itself several times, with several checkpoints occurring at the same physical location. When Bessie skips such a checkpoint, she only skips one instance of the checkpoint -- she does not skip every checkpoint occurring at the same location.\n", "outputFormat": "Output the minimum distance that Bessie can run by skipping up to K checkpoints. In the sample case shown here, skipping the checkpoints at (8, 3) and (10, -5) leads to the minimum total distance of 4.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO14DEC] Marathon S", "background": "", "description": "由于对他的奶牛的健康状况不佳而感到不满，牧场主约翰让它们参加各种各样的体育健身活动。最让他感到自豪的奶牛是 Bessie，她将参加约翰牧场附近城市里的马拉松比赛！\n\n马拉松比赛有 $N$ 个检查点 $(3\\leq N\\leq 500)$ ，需要按顺序访问。检查点 $1$ 是起点，检查点 $N$ 是终点。Bessie 应该按顺序一一访问所有的这些检查点，但由于她是一头懒惰的牛（懒惰竟然还选择跑马拉松！），于是她决定跳过 $K(K<N)$ 个检查点以缩小她的赛程。但她不能跳过第 $1$ 个和第 $N$ 个检查点，因为这样太明显了。\n\n请你帮助 Bessie 计算出跳过中间的 $K$ 个检查点后她最少要跑多少距离。\n\n注意：由于街道是网格状的，我们用坐标来表示点的位置。但是 $(x_1,y_1),(x_2,y_2)$ 两点间的距离应为 $|x_1-x_2|+|y_1-y_2|$，这种测量距离的方法被称为“曼哈顿”距离，这是因为在市中心的网格路中，你可以沿平行于 $x$ 轴或 $y$ 轴的方向走，但不能沿直线到达。", "inputFormat": "第一行：两个正整数 $N$ 和 $K$。\n\n第 $2$ 行到第 $N+1$ 行，每行两个整数$x,y (-1000\\leq x\\leq 1000,-1000\\leq y\\leq 1000)$。\n\n这里给出了检查点的顺序，她必须按顺序访问。注意：可能会有几个检查点出现在同一位置，Bessie 跳过这样的检查点时，相当于只跳过其中的一个检查点。", "outputFormat": "输出跳过某一个检查点后 Bessie 可以跑的最短距离。\n\n感谢@彭骐飞 提供的翻译", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2850", "type": "P", "difficulty": 4, "samples": [["2\n3 3 1\n1 2 2\n1 3 4\n2 3 1\n3 1 3\n3 2 1\n1 2 3\n2 3 4\n3 1 8", "NO\nYES"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2006", "USACO", "深度优先搜索 DFS", "负权环"], "title": "[USACO06DEC] Wormholes G", "background": "[英文题面见此链接](https://www.luogu.com.cn/paste/mxuf6zpl)", "description": "Farmer John 在探索他的农场时发现了许多神奇的虫洞。虫洞的特性非常特殊——它是一个单向通道，能将你传送到它的目的地，而且时间还会回溯到过去！FJ 的每个农场包含 $N (1 \\le N \\le 500)$ 块编号为 $1 \\sim N$ 的田地、$M (1 \\le M \\le 2500)$ 条双向路径和 $W (1 \\le W \\le 200)$ 个虫洞。\n\n作为狂热的时间旅行爱好者，FJ 希望实现：从某块田地出发，经过若干路径和虫洞后，在初始离开时间之前回到起点。这样或许他能遇见自己 :)\n\n为了判断可行性，FJ 将提供 $F (1 \\le F \\le 5)$ 个农场的完整地图。所有路径通行耗时不超过 $10,000$ 秒，虫洞最多能将 FJ 带回 $10,000$ 秒前。", "inputFormat": "第 $1$ 行：一个整数 $F$，表示农场数。后续为 $F$ 个农场的数据。\n\n每个农场：\n\n- 第 $1$ 行：三个空格分隔的整数 $N$（田地数）, $M$（双向路径数）, $W$（虫洞数）。\n\n- 第 $2 \\sim M+1$ 行：每行三个空格分隔的整数 $(S, E, T)$，表示 $S$ 和 $E$ 间有一条耗时 $T$ 秒的双向路径。两块田地间可能存在多条路径。\n\n- 第 $M+2 \\sim M+W+1$ 行：每行三个空格分隔的整数 $(S, E, T)$，表示一条从 $S$ 到 $E$ 的单向虫洞，可将 FJ 带回 $T$ 秒前。", "outputFormat": "输出 $F$ 行：对每个农场，若 FJ 能达成目标输出`YES`，否则输出`NO`。", "hint": "- 农场 $1$：FJ 无法实现时间回溯。\n\n- 农场 $2$：FJ 可通过环 $1 \\to 2 \\to 3 \\to 1$ 回到起点 $1$ 秒前（可从环上任意点出发实现）。\n\n翻译：DeepSeek-R1", "locale": "zh-CN", "translations": {"en": {"title": "[USACO06DEC] Wormholes G", "background": null, "description": "While exploring his many farms, Farmer John has discovered a number of amazing wormholes. A wormhole is very peculiar because it is a one-way path that delivers you to its destination at a time that is **BEFORE** you entered the wormhole! Each of FJ's farms comprises $N (1 \\le N \\le 500)$ fields conveniently numbered $1 \\sim N, M (1 \\le M \\le 2500)$ paths, and $W (1 \\le W \\le 200)$ wormholes.\n\nAs FJ is an avid time-traveling fan, he wants to do the following: start at some field, travel through some paths and wormholes, and return to the starting field a time before his initial departure. Perhaps he will be able to meet himself :) .\n\nTo help FJ find out whether this is possible or not, he will supply you with complete maps to $F (1 \\le F \\le 5)$ of his farms. No paths will take longer than $10,000$ seconds to travel and no wormhole can bring FJ back in time by more than $10,000$ seconds.", "inputFormat": "Line $1$: A single integer, $F$. $F$ farm descriptions follow.\n\nLine $1$ of each farm: Three space-separated integers respectively: $N$, $M$, and $W$.\n\nLines $2 \\sim M+1$ of each farm: Three space-separated numbers $(S, E, T)$ that describe, respectively: a bidirectional path between $S$ and $E$ that requires $T$ seconds to traverse. Two fields might be connected by more than one path.\n\nLines $M+2 \\sim M+W+1$ of each farm: Three space-separated numbers $(S, E, T)$ that describe, respectively: A one way path from $S$ to $E$ that also moves the traveler back $T$ seconds.", "outputFormat": "Lines $1 \\sim F$: For each farm, output `YES` if FJ can achieve his goal, otherwise output `NO`.", "hint": "For farm $1$, FJ cannot travel back in time.\n\nFor farm $2$, FJ could travel back in time by the cycle $1 \\to 2 \\to 3 \\to 1$, arriving back at his starting location $1$ second before he leaves. He could start from anywhere on the cycle to accomplish this.", "locale": "en"}, "zh-CN": {"title": "[USACO06DEC] Wormholes G", "background": "[英文题面见此链接](https://www.luogu.com.cn/paste/mxuf6zpl)", "description": "Farmer John 在探索他的农场时发现了许多神奇的虫洞。虫洞的特性非常特殊——它是一个单向通道，能将你传送到它的目的地，而且时间还会回溯到过去！FJ 的每个农场包含 $N (1 \\le N \\le 500)$ 块编号为 $1 \\sim N$ 的田地、$M (1 \\le M \\le 2500)$ 条双向路径和 $W (1 \\le W \\le 200)$ 个虫洞。\n\n作为狂热的时间旅行爱好者，FJ 希望实现：从某块田地出发，经过若干路径和虫洞后，在初始离开时间之前回到起点。这样或许他能遇见自己 :)\n\n为了判断可行性，FJ 将提供 $F (1 \\le F \\le 5)$ 个农场的完整地图。所有路径通行耗时不超过 $10,000$ 秒，虫洞最多能将 FJ 带回 $10,000$ 秒前。", "inputFormat": "第 $1$ 行：一个整数 $F$，表示农场数。后续为 $F$ 个农场的数据。\n\n每个农场：\n\n- 第 $1$ 行：三个空格分隔的整数 $N$（田地数）, $M$（双向路径数）, $W$（虫洞数）。\n\n- 第 $2 \\sim M+1$ 行：每行三个空格分隔的整数 $(S, E, T)$，表示 $S$ 和 $E$ 间有一条耗时 $T$ 秒的双向路径。两块田地间可能存在多条路径。\n\n- 第 $M+2 \\sim M+W+1$ 行：每行三个空格分隔的整数 $(S, E, T)$，表示一条从 $S$ 到 $E$ 的单向虫洞，可将 FJ 带回 $T$ 秒前。", "outputFormat": "输出 $F$ 行：对每个农场，若 FJ 能达成目标输出`YES`，否则输出`NO`。", "hint": "- 农场 $1$：FJ 无法实现时间回溯。\n\n- 农场 $2$：FJ 可通过环 $1 \\to 2 \\to 3 \\to 1$ 回到起点 $1$ 秒前（可从环上任意点出发实现）。\n\n翻译：DeepSeek-R1", "locale": "zh-CN"}}}
{"pid": "P2851", "type": "P", "difficulty": 5, "samples": [["3 70\n5 25 50\n5 2 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2006", "USACO", "背包 DP", "进制"], "title": "[USACO06DEC] The Fewest Coins G", "background": null, "description": "农夫 John 想到镇上买些补给。为了高效地完成任务，他想使硬币的转手次数最少。即使他交付的硬 币数与找零得到的的硬币数最少。 \n\n\nJohn 想要买价值为 $T(1 \\le T \\le 10,000)$ 的东西。有 $N(1 \\le N \\le 100)$ 种货币参与流通，面值分别为 $V_1,V_2,\\dots,V_N(1 \\le V_i \\le 120)$。John 有 $C_i$ 个面值为 $V_i$ 的硬币（$0 \\le C_i \\le 10 ^ 4$）。\n\n我们假设店主有无限多的硬币， 并总按最优方案找零。**注意**无解输出 `-1`。", "inputFormat": "第一行两个整数 $N,T$。\n\n第二行 $N$ 个整数 $V_1 \\sim V_N$。\n\n第三行 $N$ 个整数 $C_1 \\sim C_N$。", "outputFormat": "一个整数表示答案（无解输出 $-1$）。", "hint": "样例的最优方案：农夫 John 支付面值 $50$ 和 $25$ 的硬币各一枚，店主找回面值为 $5$ 的硬币一枚。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO06DEC] The Fewest Coins G", "background": null, "description": "Farmer John has gone to town to buy some farm supplies. Being a very efficient man, he always pays for his goods in such a way that the smallest number of coins changes hands, i.e., the number of coins he uses to pay plus the number of coins he receives in change is minimized. Help him to determine what this minimum number is.\n\nFJ wants to buy $T (1 \\le T \\le 10,000)$ cents of supplies. The currency system has $N (1 \\le N \\le 100)$ different coins, with values $V1, V2, \\dots, V_N (1 \\le V_i \\le 120)$. Farmer John is carrying $C_1$ coins of value $V_1$, $C_2$ coins of value $V_2$, ...., and $C_N$ coins of value $V_N\\ (0 \\le C_i \\le 10,000)$. The shopkeeper has an unlimited supply of all the coins, and always makes change in the most efficient manner (although Farmer John must be sure to pay in a way that makes it possible to make the correct change).", "inputFormat": "Line $1$: Two space-separated integers: $N$ and $T$.\n\nLine $2$: $N$ space-separated integers, respectively $V_1, V_2, \\dots, V_N$.\n\nLine $3$: $N$ space-separated integers, respectively $C_1, C_2, \\dots C_N$.", "outputFormat": "Line $1$: A line containing a single integer, the minimum number of coins involved in a payment and change-making. If it is impossible for Farmer John to pay and receive exact change, output $-1$.", "hint": "Farmer John pays $75$ cents using a $50$ cents and a $25$ cents coin, and receives a $5$ cents coin in change, for a total of $3$ coins used in the transaction.", "locale": "en"}, "zh-CN": {"title": "[USACO06DEC] The Fewest Coins G", "background": null, "description": "农夫 John 想到镇上买些补给。为了高效地完成任务，他想使硬币的转手次数最少。即使他交付的硬 币数与找零得到的的硬币数最少。 \n\n\nJohn 想要买价值为 $T(1 \\le T \\le 10,000)$ 的东西。有 $N(1 \\le N \\le 100)$ 种货币参与流通，面值分别为 $V_1,V_2,\\dots,V_N(1 \\le V_i \\le 120)$。John 有 $C_i$ 个面值为 $V_i$ 的硬币（$0 \\le C_i \\le 10 ^ 4$）。\n\n我们假设店主有无限多的硬币， 并总按最优方案找零。**注意**无解输出 `-1`。", "inputFormat": "第一行两个整数 $N,T$。\n\n第二行 $N$ 个整数 $V_1 \\sim V_N$。\n\n第三行 $N$ 个整数 $C_1 \\sim C_N$。", "outputFormat": "一个整数表示答案（无解输出 $-1$）。", "hint": "样例的最优方案：农夫 John 支付面值 $50$ 和 $25$ 的硬币各一枚，店主找回面值为 $5$ 的硬币一枚。", "locale": "zh-CN"}}}
{"pid": "P2852", "type": "P", "difficulty": 4, "samples": [["8 2\n1\n2\n3\n2\n3\n2\n3\n1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "二分", "USACO", "哈希 hashing", "后缀数组 SA"], "title": "[USACO06DEC] Milk Patterns G", "background": "", "description": "Farmer John has noticed that the quality of milk given by his cows varies from day to day. On further investigation, he discovered that although he can't predict the quality of milk from one day to the next, there are some regular patterns in the daily milk quality.\n\nTo perform a rigorous study, he has invented a complex classification scheme by which each milk sample is recorded as an integer between 0 and 1,000,000 inclusive, and has recorded data from a single cow over N (1 ≤ N ≤ 20,000) days. He wishes to find the longest pattern of samples which repeats identically at least K (2 ≤ K ≤ N) times. This may include overlapping patterns -- 1 2 3 2 3 2 3 1 repeats 2 3 2 3 twice, for example.\n\nHelp Farmer John by finding the longest repeating subsequence in the sequence of samples. It is guaranteed that at least one subsequence is repeated at least K times.\n", "inputFormat": "Line 1: Two space-separated integers: N and K\n\n\nLines 2..N+1: N integers, one per line, the quality of the milk on day i appears on the ith line.\n", "outputFormat": "Line 1: One integer, the length of the longest pattern which occurs at least K times\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO06DEC] Milk Patterns G", "background": "", "description": "Farmer John has noticed that the quality of milk given by his cows varies from day to day. On further investigation, he discovered that although he can't predict the quality of milk from one day to the next, there are some regular patterns in the daily milk quality.\n\nTo perform a rigorous study, he has invented a complex classification scheme by which each milk sample is recorded as an integer between 0 and 1,000,000 inclusive, and has recorded data from a single cow over N (1 ≤ N ≤ 20,000) days. He wishes to find the longest pattern of samples which repeats identically at least K (2 ≤ K ≤ N) times. This may include overlapping patterns -- 1 2 3 2 3 2 3 1 repeats 2 3 2 3 twice, for example.\n\nHelp Farmer John by finding the longest repeating subsequence in the sequence of samples. It is guaranteed that at least one subsequence is repeated at least K times.\n", "inputFormat": "Line 1: Two space-separated integers: N and K\n\n\nLines 2..N+1: N integers, one per line, the quality of the milk on day i appears on the ith line.\n", "outputFormat": "Line 1: One integer, the length of the longest pattern which occurs at least K times\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO06DEC] Milk Patterns G", "background": null, "description": "农夫约翰注意到他的奶牛所产的牛奶质量每天都在变化。经过进一步调查，他发现虽然无法预测牛奶质量从一天到下一天的变化，但每天的牛奶质量中存在一些规律模式。\n\n为了进行严格的研究，他发明了一种复杂的分类方案，其中每个牛奶样本被记录为一个介于 $0$ 和 $1,000,000$ 之间的整数，并记录了一头奶牛在 $N\\ (1 \\le N \\le 20,000)$ 天内的数据。他希望找到一个最长的样本模式，该模式至少重复 $K\\ (2 \\le K \\le N)$ 次。这可能包括重叠的模式——例如，`1 2 3 2 3 2 3 1` 中的 `2 3 2 3` 重复了两次。\n\n帮助农夫约翰找到样本序列中最长的重复子序列。保证至少有一个子序列重复至少 $K$ 次。", "inputFormat": "第 $1$ 行：两个用空格分隔的整数：$N$ 和 $K$。\n\n第 $2$ 行到第 $N+1$ 行：$N$ 个整数，每行一个，第 $i$ 行表示第 $i$ 天的牛奶质量。", "outputFormat": "第 $1$ 行：一个整数，表示至少出现 $K$ 次的最长模式的长度。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P2853", "type": "P", "difficulty": 3, "samples": [["2 4 4\n2\n3\n1 2\n1 4\n2 3\n3 4", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "贪心", "2006", "USACO", "深度优先搜索 DFS"], "title": "[USACO06DEC] Cow Picnic S", "background": "", "description": "The cows are having a picnic! Each of Farmer John's K (1 ≤ K ≤ 100) cows is grazing in one of N (1 ≤ N ≤ 1,000) pastures, conveniently numbered 1...N. The pastures are connected by M (1 ≤ M ≤ 10,000) one-way paths (no path connects a pasture to itself).\n\nThe cows want to gather in the same pasture for their picnic, but (because of the one-way paths) some cows may only be able to get to some pastures. Help the cows out by figuring out how many pastures are reachable by all cows, and hence are possible picnic locations.", "inputFormat": "Line 1: Three space-separated integers, respectively: K, N, and M\n\nLines 2..K+1: Line i+1 contains a single integer (1..N) which is the number of the pasture in which cow i is grazing.\n\nLines K+2..M+K+1: Each line contains two space-separated integers, respectively A and B (both 1..N and A != B), representing a one-way path from pasture A to pasture B.", "outputFormat": "Line 1: Three space-separated integers, respectively: K, N, and M\n\nLines 2..K+1: Line i+1 contains a single integer (1..N) which is the number of the pasture in which cow i is grazing.\n\nLines K+2..M+K+1: Each line contains two space-separated integers, respectively A and B (both 1..N and A != B), representing a one-way path from pasture A to pasture B.", "hint": "The cows can meet in pastures 3 or 4.", "locale": "en", "translations": {"en": {"title": "[USACO06DEC] Cow Picnic S", "background": "", "description": "The cows are having a picnic! Each of Farmer John's K (1 ≤ K ≤ 100) cows is grazing in one of N (1 ≤ N ≤ 1,000) pastures, conveniently numbered 1...N. The pastures are connected by M (1 ≤ M ≤ 10,000) one-way paths (no path connects a pasture to itself).\n\nThe cows want to gather in the same pasture for their picnic, but (because of the one-way paths) some cows may only be able to get to some pastures. Help the cows out by figuring out how many pastures are reachable by all cows, and hence are possible picnic locations.", "inputFormat": "Line 1: Three space-separated integers, respectively: K, N, and M\n\nLines 2..K+1: Line i+1 contains a single integer (1..N) which is the number of the pasture in which cow i is grazing.\n\nLines K+2..M+K+1: Each line contains two space-separated integers, respectively A and B (both 1..N and A != B), representing a one-way path from pasture A to pasture B.", "outputFormat": "Line 1: Three space-separated integers, respectively: K, N, and M\n\nLines 2..K+1: Line i+1 contains a single integer (1..N) which is the number of the pasture in which cow i is grazing.\n\nLines K+2..M+K+1: Each line contains two space-separated integers, respectively A and B (both 1..N and A != B), representing a one-way path from pasture A to pasture B.", "hint": "The cows can meet in pastures 3 or 4.", "locale": "en"}, "zh-CN": {"title": "[USACO06DEC] Cow Picnic S", "background": null, "description": "$K(1 \\le K \\le 100)$ 只奶牛分散在 $N(1 \\le N \\le 1000)$ 个牧场．现在她们要集中起来进餐。牧场之间有 $M(1 \\le M \\le 10000)$ 条有向路径连接（没有路径将牧场连接到自身）。她们进餐的地点必须是所有奶牛都可到达的地方。那么，有多少这样的牧场可供进食呢？", "inputFormat": "第 $1$ 行：三个以空格分隔的整数，分别为：$K$, $N$, $M$。\n\n第 $2$ 行到第 $K+1$ 行：每行包含一个整数 $C_i$（$1\\le C_i\\le N$），表示第 $i$ 头奶牛所在的牧场编号。  \n\n第 $K+2$ 行到第 $M+K+1$ 行：每行包含两个以空格分隔的整数 $A$ 和 $B$，表示一条从牧场 $A$ 到牧场 $B$ 的单向路径。（$1\\le A,B\\le N, A\\neq B$）", "outputFormat": "第一行：一个整数，即所有奶牛都可以到达的牧场数量。", "hint": "奶牛可以在 $3$ 或 $4$ 号牧场相遇。", "locale": "zh-CN"}}}
{"pid": "P2854", "type": "P", "difficulty": 4, "samples": [["5 6 10\n0 2 20 6\n2 3 5 6\n0 1 2 1\n1 1 1 3\n1 2 5 4\n3 2 10 2", "17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2006", "USACO", "背包 DP"], "title": "[USACO06DEC] Cow Roller Coaster S", "background": "", "description": "The cows are building a roller coaster! They want your help to design as fun a roller coaster as possible, while keeping to the budget.\n\nThe roller coaster will be built on a long linear stretch of land of length L (1 ≤ L ≤ 1,000). The roller coaster comprises a collection of some of the N (1 ≤ N ≤ 10,000) different interchangable components. Each component i has a fixed length Wi (1 ≤ Wi ≤ L). Due to varying terrain, each component i can be only built starting at location Xi (0 ≤ Xi ≤ L - Wi). The cows want to string together various roller coaster components starting at 0 and ending at L so that the end of each component (except the last) is the start of the next component.\n\nEach component i has a \"fun rating\" Fi (1 ≤ Fi ≤ 1,000,000) and a cost Ci (1 ≤ Ci ≤ 1000). The total fun of the roller coster is the sum of the fun from each component used; the total cost is likewise the sum of the costs of each component used. The cows' total budget is B (1 ≤ B ≤ 1000). Help the cows determine the most fun roller coaster that they can build with their budget.", "inputFormat": "Line 1: Three space-separated integers: L, N and B.\n\n\nLines 2..N+1: Line i+1 contains four space-separated integers, respectively: Xi, Wi, Fi, and Ci.\n", "outputFormat": "Line 1: A single integer that is the maximum fun value that a roller-coaster can have while staying within the budget and meeting all the other constraints. If it is not possible to build a roller-coaster within budget, output -1.\n", "hint": "Taking the 3rd, 5th and 6th components gives a connected roller-coaster with fun value 17 and cost 7. Taking the first two components would give a more fun roller-coaster (25) but would be over budget.\n", "locale": "en", "translations": {"en": {"title": "[USACO06DEC] Cow Roller Coaster S", "background": "", "description": "The cows are building a roller coaster! They want your help to design as fun a roller coaster as possible, while keeping to the budget.\n\nThe roller coaster will be built on a long linear stretch of land of length L (1 ≤ L ≤ 1,000). The roller coaster comprises a collection of some of the N (1 ≤ N ≤ 10,000) different interchangable components. Each component i has a fixed length Wi (1 ≤ Wi ≤ L). Due to varying terrain, each component i can be only built starting at location Xi (0 ≤ Xi ≤ L - Wi). The cows want to string together various roller coaster components starting at 0 and ending at L so that the end of each component (except the last) is the start of the next component.\n\nEach component i has a \"fun rating\" Fi (1 ≤ Fi ≤ 1,000,000) and a cost Ci (1 ≤ Ci ≤ 1000). The total fun of the roller coster is the sum of the fun from each component used; the total cost is likewise the sum of the costs of each component used. The cows' total budget is B (1 ≤ B ≤ 1000). Help the cows determine the most fun roller coaster that they can build with their budget.", "inputFormat": "Line 1: Three space-separated integers: L, N and B.\n\n\nLines 2..N+1: Line i+1 contains four space-separated integers, respectively: Xi, Wi, Fi, and Ci.\n", "outputFormat": "Line 1: A single integer that is the maximum fun value that a roller-coaster can have while staying within the budget and meeting all the other constraints. If it is not possible to build a roller-coaster within budget, output -1.\n", "hint": "Taking the 3rd, 5th and 6th components gives a connected roller-coaster with fun value 17 and cost 7. Taking the first two components would give a more fun roller-coaster (25) but would be over budget.\n", "locale": "en"}, "zh-CN": {"title": "[USACO06DEC] Cow Roller Coaster S", "background": null, "description": "有 $n$ 条线段，每条线段只能放在数轴上的一个特定位置，并且第 $i$ 根线段有如下几个属性：$X_i$（该线段放在数轴上的起点），$W_i$（该线段长度），$F_i$（你若使用该线段你能获得的价值），$C_i$（你若使用该线段你所需要的费用）。现在让你从中选出一些线段，使得这些线段能够铺满数轴上的区间 $[0,L]$ 且线段必须首尾相接（也就是不能重叠，也不能空缺），并且所花费用和不超过 $B$，同时要使你收获的价值尽量大，请你找到这个方案。", "inputFormat": "第一行三个整数 $L, n, B$。\n\n接下来 $n$ 行，每行四个整数 $X_i, W_i, F_i, C_i$ 表示第 $i$ 根线段的四个属性。", "outputFormat": "一个整数，表示你能获得的最大价值和。若无法满足上述要求，则输出 $-1$。", "hint": "对于 $100\\%$ 的数据，保证 $1\\le W_i\\le L\\le 1000,1\\le N\\le 10000,1\\le F_i\\le 10^6,1\\le B,C_i\\le 1000,0\\le X_i\\le L-W_i$", "locale": "zh-CN"}}}
{"pid": "P2855", "type": "P", "difficulty": 3, "samples": [["25 5 2\n2\n14\n11\n21\n17", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "二分", "USACO"], "title": "[USACO06DEC] River Hopscotch S", "background": null, "description": "奶牛们每年都会举办一次活动，内容是一种奇特的跳房子游戏，即在河中小心翼翼地从一块石头跳到另一块石头。 比赛在一条笔直的长河上进行，起点有一块石头，终点有另一块石头，距离起点 $L$ 个单位（$1 \\le L\\le 1,000,000,000$）。 在起点和终点岩石之间的河道上，会出现 $N$ 个（$0\\le N\\le 50,000 $ 个）更多的岩石，每个岩石与起点的距离为一个整数 $D_i$（$0<D_i<L$）。\n\n玩游戏时，每头牛依次从起点岩石开始，努力到达终点岩石，只能从一个岩石跳到另一个岩石。 当然，不那么灵活的奶牛永远也到不了终点岩石，最后只能掉进河里。\n\n农场主约翰为自己的奶牛感到骄傲，每年都会观看这项比赛。 但随着时间的推移，他已经厌倦了看着其他农户的胆小的奶牛一瘸一拐地走过石头之间的短距离。 他计划移走几块石头，以增加奶牛跳到终点的最短距离。 他知道自己无法移走起点和终点的石头，但他计算出自己有足够的资源移走最多 $M$ 块石头（$0 \\le M \\le N$）。\n\nFJ 想知道，在开始移走石头之前，他能将最短距离增加多少。 请帮助农场主约翰确定在移走最优的 $M$ 组石块后，奶牛要跳过的最短距离。\n\n形式化中文题意：\n\n对于给定在一维位置的 $N$ 个点，选择 $M$ 个点进行移除，使得每两个点之间的距离最小值最大。", "inputFormat": "第 $1$ 行，三个空格分隔的整数：$L$、$N$ 和 $M$。\n\n\n第 $2\\dots N+1$ 行，每行包含一个整数，表示某块岩石距离起始岩石的距离。 没有两块石头的位置相同。", "outputFormat": "一个整数，即奶牛在移走 $M$ 块石头后所需跳跃的最短距离的最大值。", "hint": "在移除任何石块之前，最短的跳跃是从 $0$（起点）到 $2$ 的 $2$ 级跳；在移除 $2$ 和 $14$ 处的石块之后，所需的最短跳跃是 $4$ 级跳（从 $17$ 到 $21$ 或从 $21$ 到 $25$）。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO06DEC] River Hopscotch S", "background": "", "description": "Every year the cows hold a peculiar hopscotch event, carefully jumping from one rock to another in a river. The competition is on a long straight river with a rock at the start and another rock at the end, which is $L$ units away from the start ($1 \\le L\\le 1,000,000,000$). Between the start and end rocks, there are $N$ additional rocks ($0\\le N\\le 50,000 $), each at an integer distance $D_i$ from the start ($0<D_i<L$).\n\nDuring the game, each cow starts from the start rock and tries to reach the end rock, only allowed to jump from one rock to another. Of course, the less agile cows will never reach the end rock and will eventually fall into the river.\n\nFarmer John is proud of his cows and watches this contest every year. Over time, however, he has grown tired of watching timid cows from other farms hobble across short gaps between rocks. He plans to remove some rocks to increase the minimal distance the cows must jump to reach the end. He knows he cannot remove the start and end rocks, but he has enough resources to remove at most $M$ rocks ($0 \\le M \\le N$).\n\nBefore he starts removing rocks, FJ wants to know how much he can increase the minimal jump distance. Please determine, after optimally removing at most $M$ rocks, the maximum possible minimal distance that any cow must jump.\n\nFormal statement: Given $N$ points on a line, remove at most $M$ points so that the minimum distance between consecutive remaining points (including the start at $0$ and the end at $L$) is maximized.", "inputFormat": "The first line contains three space-separated integers: $L$, $N$, and $M$.\n\nLines $2 \\dots N+1$ each contain one integer, the distance of a rock from the start. No two rocks share the same position.", "outputFormat": "Output a single integer, the maximum possible value of the minimal jump distance after removing at most $M$ rocks.", "hint": "Before removing any rock, the shortest jump is a length-$2$ jump from $0$ (start) to $2$; after removing the rocks at $2$ and $14$, the required shortest jump is $4$ (from $17$ to $21$ or from $21$ to $25$).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO06DEC] River Hopscotch S", "background": null, "description": "奶牛们每年都会举办一次活动，内容是一种奇特的跳房子游戏，即在河中小心翼翼地从一块石头跳到另一块石头。 比赛在一条笔直的长河上进行，起点有一块石头，终点有另一块石头，距离起点 $L$ 个单位（$1 \\le L\\le 1,000,000,000$）。 在起点和终点岩石之间的河道上，会出现 $N$ 个（$0\\le N\\le 50,000 $ 个）更多的岩石，每个岩石与起点的距离为一个整数 $D_i$（$0<D_i<L$）。\n\n玩游戏时，每头牛依次从起点岩石开始，努力到达终点岩石，只能从一个岩石跳到另一个岩石。 当然，不那么灵活的奶牛永远也到不了终点岩石，最后只能掉进河里。\n\n农场主约翰为自己的奶牛感到骄傲，每年都会观看这项比赛。 但随着时间的推移，他已经厌倦了看着其他农户的胆小的奶牛一瘸一拐地走过石头之间的短距离。 他计划移走几块石头，以增加奶牛跳到终点的最短距离。 他知道自己无法移走起点和终点的石头，但他计算出自己有足够的资源移走最多 $M$ 块石头（$0 \\le M \\le N$）。\n\nFJ 想知道，在开始移走石头之前，他能将最短距离增加多少。 请帮助农场主约翰确定在移走最优的 $M$ 组石块后，奶牛要跳过的最短距离。\n\n形式化中文题意：\n\n对于给定在一维位置的 $N$ 个点，选择 $M$ 个点进行移除，使得每两个点之间的距离最小值最大。", "inputFormat": "第 $1$ 行，三个空格分隔的整数：$L$、$N$ 和 $M$。\n\n\n第 $2\\dots N+1$ 行，每行包含一个整数，表示某块岩石距离起始岩石的距离。 没有两块石头的位置相同。", "outputFormat": "一个整数，即奶牛在移走 $M$ 块石头后所需跳跃的最短距离的最大值。", "hint": "在移除任何石块之前，最短的跳跃是从 $0$（起点）到 $2$ 的 $2$ 级跳；在移除 $2$ 和 $14$ 处的石块之后，所需的最短跳跃是 $4$ 级跳（从 $17$ 到 $21$ 或从 $21$ 到 $25$）。", "locale": "zh-CN"}}}
{"pid": "P2856", "type": "P", "difficulty": 4, "samples": [["3 13\n11\nALL\nBALL\nBELL\nCALK\nCALL\nCELL\nDILL\nFILL\nFILM\nILL\nMILK", "7\nAB\nCDEFGHIJK\nLM"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2006", "USACO"], "title": "[USACO06FEB] Cellphones G", "background": null, "description": "$D\\ (1 \\le D \\le 1000)$ 只奶牛的名字都是由英文字母表的前 $L\\ (1 \\le L \\le 26)$ 个大写字母构成的，且长度 $S$ 满足 $1 \\le S \\le 10$。现在想设计一种手机，有 $B\\ (1 \\le B \\le L)$ 个按键。请你把这 $L$ 个字母按顺序分配给 $B$ 个按键，使能够通过按这些键而唯一确定的奶牛数尽量多。", "inputFormat": "第一行两个正整数 $B,L$。\n\n第二行一个正整数 $D$。\n\n下面 $D$ 行，每行一个字符串，表示已知奶牛的名字。", "outputFormat": "第一行一个整数表示通过按这些键而唯一确定的最大奶牛数。\n\n下面 $B$ 行，构造一组方案：对于其中的第 $i$ 行，按字母表顺序依次输出所有属于第 $i$ 个按键的字母。", "hint": "样例解释：除了 `CELL/DILL/FILL/FILM` 的按键顺序都是 $2 - 2 - 3 - 3$ 外，剩下 $7$ 个名字都可以通过按这些键而唯一确定。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO06FEB] Cellphones G", "background": null, "description": "The cows have started using cellphones to cowmunicate with each other, but have found that the button layout doesn't suit their hooves very well. They are designing a special cellphone with fewer but larger buttons.\n\nOne feature they liked on the standard cellphones was predictive text. Each button has a few letters associated with it, and one types a word by pushing the associated buttons. Because there is more than one letter for each button, this can be ambiguous for some words. However, most of the time the ambiguity can be resolved by using a dictionary to determine what word the user wanted.\n\nSince the cows are designing a custom cellphone, they are also going to replace the English alphabet with the Cow alphabet. By an amazing coincidence, the cow alphabet is simply the first $L (1 \\le L \\le 26)$ letters of the English alphabet, in the same order. They want to find out how to assign the letters of the Cow alphabet to the $B$ buttons $(1 \\le B \\le L)$ in such a way that the maximum number of words in their dictionary are unambiguous when entered with predictive text. Like normal cellphones, they want the letters on each button to be a contiguous section (one or more consecutive letters) of the alphabet.", "inputFormat": "Line $1$: Two space-separated integers: $B$ and $L$.\n\nLine $2$: $D$, the number of words in the dictionary $(1 \\le D \\le 1000)$.\n\nLines $3 \\sim D+2$: Each line contains one word from the dictionary in upper case and of length $1 \\sim 10$ characters. The words are presented in alphabetical order and with no duplicates.", "outputFormat": "Line $1$: The number of words in the Cow dictionary that have unique button sequences.\n\nLines $2 \\sim B+1$: The nth line contains the letters that appear on button $n$, in upper case and alphabetical order. The lines must be listed in alphabetical order, and every Cow letter must appear exactly once. If there is more than one optimal solution, use the one that places the most letters on button $1$. Ties are broken by placing the most letters on button $2$, etc.", "hint": "Explanation of the sample:\n\nButton $1$ contains $\\text{AB}$, button two contains $\\text{C} \\sim \\text{K}$, and button $3$ contains $\\text{LM}$. The words $\\text{CELL},\\text{DILL},\\text{FILL}$ and $\\text{FILM}$ are all entered as $2-2-3-3$, while the remaining $7$ words are all entered uniquely.", "locale": "en"}, "zh-CN": {"title": "[USACO06FEB] Cellphones G", "background": null, "description": "$D\\ (1 \\le D \\le 1000)$ 只奶牛的名字都是由英文字母表的前 $L\\ (1 \\le L \\le 26)$ 个大写字母构成的，且长度 $S$ 满足 $1 \\le S \\le 10$。现在想设计一种手机，有 $B\\ (1 \\le B \\le L)$ 个按键。请你把这 $L$ 个字母按顺序分配给 $B$ 个按键，使能够通过按这些键而唯一确定的奶牛数尽量多。", "inputFormat": "第一行两个正整数 $B,L$。\n\n第二行一个正整数 $D$。\n\n下面 $D$ 行，每行一个字符串，表示已知奶牛的名字。", "outputFormat": "第一行一个整数表示通过按这些键而唯一确定的最大奶牛数。\n\n下面 $B$ 行，构造一组方案：对于其中的第 $i$ 行，按字母表顺序依次输出所有属于第 $i$ 个按键的字母。", "hint": "样例解释：除了 `CELL/DILL/FILL/FILM` 的按键顺序都是 $2 - 2 - 3 - 3$ 外，剩下 $7$ 个名字都可以通过按这些键而唯一确定。", "locale": "zh-CN"}}}
{"pid": "P2857", "type": "P", "difficulty": 6, "samples": [["6 4\n1 2 3 4\n2 3 1 4\n4 2 3 1\n3 1 2 4\n1 3 4 2\n1 4 2 3\n2 1 3 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2006", "二分", "USACO", "网络流", "枚举", "双指针 two-pointer"], "title": "[USACO06FEB] Steady Cow Assignment G", "background": "", "description": "Farmer John's N (1 <= N <= 1000) cows each reside in one of B (1 <= B <= 20) barns which, of course, have limited capacity. Some cows really like their current barn, and some are not so happy.\n\nFJ would like to rearrange the cows such that the cows are as equally happy as possible, even if that means all the cows hate their assigned barn.\n\n\nEach cow gives FJ the order in which she prefers the barns.  A cow's happiness with a particular assignment is her ranking of her barn. Your job is to find an assignment of cows to barns such that no barn's capacity is exceeded and the size of the range (i.e., one more than the positive difference between the the highest-ranked barn chosen and that lowest-ranked barn chosen) of barn rankings the cows give their assigned barns is as small as possible.\n", "inputFormat": "Line 1: Two space-separated integers, N and B\n\n\nLines 2..N+1: Each line contains B space-separated integers which are exactly 1..B sorted into some order. The first integer on line i+1 is the number of the cow i's top-choice barn, the second integer on that line is the number of the i'th cow's second-choice barn, and so on.\n\n\nLine N+2: B space-separated integers, respectively the capacity of the first barn, then the capacity of the second, and so on. The sum of these numbers is guaranteed to be at least N.\n", "outputFormat": "Line 1: One integer, the size of the minumum range of barn rankings the cows give their assigned barns, including the endpoints.\n", "hint": "Explanation of the sample:\n\n\n\n\nEach cow can be assigned to her first or second choice: barn 1 gets cows 1 and 5, barn 2 gets cow 2, barn 3 gets cow 4, and barn 4 gets cows 3 and 6.\n", "locale": "en", "translations": {"en": {"title": "[USACO06FEB] Steady Cow Assignment G", "background": "", "description": "Farmer John's N (1 <= N <= 1000) cows each reside in one of B (1 <= B <= 20) barns which, of course, have limited capacity. Some cows really like their current barn, and some are not so happy.\n\nFJ would like to rearrange the cows such that the cows are as equally happy as possible, even if that means all the cows hate their assigned barn.\n\n\nEach cow gives FJ the order in which she prefers the barns.  A cow's happiness with a particular assignment is her ranking of her barn. Your job is to find an assignment of cows to barns such that no barn's capacity is exceeded and the size of the range (i.e., one more than the positive difference between the the highest-ranked barn chosen and that lowest-ranked barn chosen) of barn rankings the cows give their assigned barns is as small as possible.\n", "inputFormat": "Line 1: Two space-separated integers, N and B\n\n\nLines 2..N+1: Each line contains B space-separated integers which are exactly 1..B sorted into some order. The first integer on line i+1 is the number of the cow i's top-choice barn, the second integer on that line is the number of the i'th cow's second-choice barn, and so on.\n\n\nLine N+2: B space-separated integers, respectively the capacity of the first barn, then the capacity of the second, and so on. The sum of these numbers is guaranteed to be at least N.\n", "outputFormat": "Line 1: One integer, the size of the minumum range of barn rankings the cows give their assigned barns, including the endpoints.\n", "hint": "Explanation of the sample:\n\n\n\n\nEach cow can be assigned to her first or second choice: barn 1 gets cows 1 and 5, barn 2 gets cow 2, barn 3 gets cow 4, and barn 4 gets cows 3 and 6.\n", "locale": "en"}, "zh-CN": {"title": "[USACO06FEB] Steady Cow Assignment G", "background": "", "description": "农夫约翰的 $N$ 头牛（$1 \\leq N \\leq 1000$）各自居住在 $B$ 个谷仓中的一个（$1 \\leq B \\leq 20$），当然，谷仓的容量是有限的。有些牛非常喜欢她们当前的谷仓，而有些则不太开心。\n\nFJ 想要重新安排这些牛，使得牛群的快乐程度尽可能均衡，即使这意味着所有的牛都讨厌她们被分配的谷仓。\n\n\n每头牛都会告诉 FJ 她对谷仓的偏好顺序。牛对特定分配的快乐程度是她对该谷仓的排名。你的任务是找到一种将牛分配到谷仓的方法，使得没有谷仓的容量被超出，并且牛给她们被分配的谷仓的排名范围（即最高排名谷仓和最低排名谷仓之间的正差加一）的大小尽可能小。\n", "inputFormat": "第 1 行：两个用空格分隔的整数，$N$ 和 $B$\n\n\n第 2 行到第 $N+1$ 行：每行包含 $B$ 个用空格分隔的整数，正好是 $1..B$ 的某种顺序排列。第 $i+1$ 行的第一个整数是第 $i$ 头牛最喜欢的谷仓的编号，第二个整数是第 $i$ 头牛次喜欢的谷仓的编号，依此类推。\n\n\n第 $N+2$ 行：$B$ 个用空格分隔的整数，分别是第一个谷仓的容量，第二个谷仓的容量，依此类推。这些数字的总和保证至少为 $N$。\n", "outputFormat": "第 1 行：一个整数，牛给她们被分配的谷仓的排名范围的最小值，包括端点。\n", "hint": "样例解释：\n\n\n\n\n每头牛可以被分配到她们的第一或第二选择：谷仓 1 得到牛 1 和 5，谷仓 2 得到牛 2，谷仓 3 得到牛 4，谷仓 4 得到牛 3 和 6。\n（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P2858", "type": "P", "difficulty": 3, "samples": [["5\n1\n3\n1\n5\n2", "43"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2006", "USACO", "区间 DP"], "title": "[USACO06FEB] Treats for the Cows G/S", "background": null, "description": "约翰经常给产奶量高的奶牛发特殊津贴，于是很快奶牛们拥有了大笔不知该怎么花的钱。为此，约翰购置了 $N$（$1 \\leq N \\leq 2000$） 份美味的零食来卖给奶牛们。每天约翰售出一份零食。当然约翰希望这些零食全部售出后能得到最大的收益，这些零食有以下这些有趣的特性：\n+ 零食按照 $1, \\ldots, N$ 编号，它们被排成一列放在一个很长的盒子里。盒子的两端都有开口，约翰每天可以从盒子的任一端取出最外面的一个。\n+ 与美酒与好吃的奶酪相似，这些零食储存得越久就越好吃。当然，这样约翰就可以把它们卖出更高的价钱。\n+ 每份零食的初始价值不一定相同。约翰进货时，第 $i$ 份零食的初始价值为 $V_i$（$1 \\leq V \\leq 1000$）。\n+ 第 $i$ 份零食如果在被买进后的第 $a$ 天出售，则它的售价是 $V_i \\times a$。\n\n$V_i$ 的是从盒子顶端往下的第 $i$ 份零食的初始价值。约翰告诉了你所有零食的初始价值，并希望你能帮他计算一下，在这些零食全被卖出后，他最多能得到多少钱。", "inputFormat": "第一行一个正整数 $N$。\n\n接下来 $2 \\sim N+1$ 行，第 $i+1$ 行为一个正整数 $V_i$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例的最优解是：按 $1 \\to 5 \\to 2 \\to 3 \\to 4$ 的顺序卖零食，得到的钱数是 $1 \\times 1 + 2 \\times 2 + 3 \\times 3 + 4 \\times 1 + 5 \\times 5 = 43$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO06FEB] Treats for the Cows G/S", "background": null, "description": "FJ has purchased $N (1 \\le N \\le 2000)$ yummy treats for the cows who get money for giving vast amounts of milk. FJ sells one treat per day and wants to maximize the money he receives over a given period time.\n\nThe treats are interesting for many reasons:The treats are numbered $1 \\sim N$ and stored sequentially in single file in a long box that is open at both ends. On any day, FJ can retrieve one treat from either end of his stash of treats.Like fine wines and delicious cheeses, the treats improve with age and command greater prices.The treats are not uniform: some are better and have higher intrinsic value. Treat $i$ has value $v_i (1 \\le v_i \\le 1000)$. Cows pay more for treats that have aged longer: a cow will pay $v_i \\times a$ for a treat of age $a$. Given the values $v_i$ of each of the treats lined up in order of the index $i$ in their box, what is the greatest value FJ can receive for them if he orders their sale optimally?\n\nThe first treat is sold on day $1$ and has age $a=1$. Each subsequent day increases the age by $1$.", "inputFormat": "Line $1$: A single integer, $N$.\n\nLines $2 \\sim N+1$: Line $i+1$ contains the value of treat $v_i$.", "outputFormat": "Line $1$: The maximum revenue FJ can achieve by selling the treats.", "hint": "Explanation of the sample:\n\nFive treats. On the first day FJ can sell either treat $\\#1$ (value $1$) or treat $\\#5$ (value $2$).\n\nFJ sells the treats (values $1, 3, 1, 5, 2$) in the following order of indices: $1, 5, 2, 3, 4$, making $1 \\times 1 + 2 \\times 2 + 3 \\times 3 + 4 \\times 1 + 5 \\times 5 = 43$.", "locale": "en"}, "zh-CN": {"title": "[USACO06FEB] Treats for the Cows G/S", "background": null, "description": "约翰经常给产奶量高的奶牛发特殊津贴，于是很快奶牛们拥有了大笔不知该怎么花的钱。为此，约翰购置了 $N$（$1 \\leq N \\leq 2000$） 份美味的零食来卖给奶牛们。每天约翰售出一份零食。当然约翰希望这些零食全部售出后能得到最大的收益，这些零食有以下这些有趣的特性：\n+ 零食按照 $1, \\ldots, N$ 编号，它们被排成一列放在一个很长的盒子里。盒子的两端都有开口，约翰每天可以从盒子的任一端取出最外面的一个。\n+ 与美酒与好吃的奶酪相似，这些零食储存得越久就越好吃。当然，这样约翰就可以把它们卖出更高的价钱。\n+ 每份零食的初始价值不一定相同。约翰进货时，第 $i$ 份零食的初始价值为 $V_i$（$1 \\leq V \\leq 1000$）。\n+ 第 $i$ 份零食如果在被买进后的第 $a$ 天出售，则它的售价是 $V_i \\times a$。\n\n$V_i$ 的是从盒子顶端往下的第 $i$ 份零食的初始价值。约翰告诉了你所有零食的初始价值，并希望你能帮他计算一下，在这些零食全被卖出后，他最多能得到多少钱。", "inputFormat": "第一行一个正整数 $N$。\n\n接下来 $2 \\sim N+1$ 行，第 $i+1$ 行为一个正整数 $V_i$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例的最优解是：按 $1 \\to 5 \\to 2 \\to 3 \\to 4$ 的顺序卖零食，得到的钱数是 $1 \\times 1 + 2 \\times 2 + 3 \\times 3 + 4 \\times 1 + 5 \\times 5 = 43$。", "locale": "zh-CN"}}}
{"pid": "P2859", "type": "P", "difficulty": 4, "samples": [["5\n1 10\n2 4\n3 6\n5 8\n4 7", "4\n1\n2\n3\n2\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2006", "线段树", "USACO", "Special Judge", "前缀和"], "title": "[USACO06FEB] Stall Reservations S", "background": "", "description": "Oh those picky $N$ ($1 \\leq N \\leq 50,000$) cows! They are so picky that each one will only be milked over some precise time interval $[A,B]$ ($1 \\leq A \\leq B \\leq 1,000,000$), which includes both times $A$ and $B$. Obviously, FJ must create a reservation system to determine which stall each cow can be assigned for her milking time. Of course, no cow will share such a private moment with other cows.\n\nHelp FJ by determining: The minimum number of stalls required in the barn so that each cow can have her private milking period. An assignment of cows to these stalls over time. Many answers are correct for each test dataset; a program will grade your answer.", "inputFormat": "Line $1$: A single integer, $N$.\n\nLines $2 \\sim N+1$: Line $i+1$ describes cow $i$'s milking interval with two space-separated integers.", "outputFormat": "Line $1$: The minimum number of stalls the barn must have.\n\nLines $2 \\sim N+1$: Line $i+1$ describes the stall to which cow i will be assigned for her milking period.", "hint": "**Explanation of the sample:**\n\nHere's a graphical schedule for this output:\n\n```plain\nTime     1  2  3  4  5  6  7  8  9 10\n\n\nStall 1 c1>>>>>>>>>>>>>>>>>>>>>>>>>>>\n\n\nStall 2 .. c2>>>>>> c4>>>>>>>>> .. ..\n\n\nStall 3 .. .. c3>>>>>>>>> .. .. .. ..\n\n\nStall 4 .. .. .. c5>>>>>>>>> .. .. ..\n```\n\nOther outputs using the same number of stalls are possible.", "locale": "en", "translations": {"en": {"title": "[USACO06FEB] Stall Reservations S", "background": "", "description": "Oh those picky $N$ ($1 \\leq N \\leq 50,000$) cows! They are so picky that each one will only be milked over some precise time interval $[A,B]$ ($1 \\leq A \\leq B \\leq 1,000,000$), which includes both times $A$ and $B$. Obviously, FJ must create a reservation system to determine which stall each cow can be assigned for her milking time. Of course, no cow will share such a private moment with other cows.\n\nHelp FJ by determining: The minimum number of stalls required in the barn so that each cow can have her private milking period. An assignment of cows to these stalls over time. Many answers are correct for each test dataset; a program will grade your answer.", "inputFormat": "Line $1$: A single integer, $N$.\n\nLines $2 \\sim N+1$: Line $i+1$ describes cow $i$'s milking interval with two space-separated integers.", "outputFormat": "Line $1$: The minimum number of stalls the barn must have.\n\nLines $2 \\sim N+1$: Line $i+1$ describes the stall to which cow i will be assigned for her milking period.", "hint": "**Explanation of the sample:**\n\nHere's a graphical schedule for this output:\n\n```plain\nTime     1  2  3  4  5  6  7  8  9 10\n\n\nStall 1 c1>>>>>>>>>>>>>>>>>>>>>>>>>>>\n\n\nStall 2 .. c2>>>>>> c4>>>>>>>>> .. ..\n\n\nStall 3 .. .. c3>>>>>>>>> .. .. .. ..\n\n\nStall 4 .. .. .. c5>>>>>>>>> .. .. ..\n```\n\nOther outputs using the same number of stalls are possible.", "locale": "en"}, "zh-CN": {"title": "[USACO06FEB] Stall Reservations S", "background": "", "description": "约翰的 $N$（$1\\leq N\\leq 50000$）头奶牛实在是太难伺候了，她们甚至有自己独特的产奶时段。对于某一头奶牛，她每天的产奶时段是固定的时间段 $[A,B]$（即 $A$ 到 $B$，包括 $A$ 和 $B$）($1 \\leq A \\leq B \\leq 10^6$)。这使得约翰必须开发一个调控系统来决定每头奶牛应该被安排到哪个牛棚去挤奶，因为奶牛们并不希望在挤奶时被其它奶牛看见。\n\n请帮约翰计算：如果要满足奶牛们的要求，并且每天每头奶牛都要被挤过奶，至少需要多少牛棚和每头牛应该在哪个牛棚被挤奶。如果有多种答案，输出任意一种均可。", "inputFormat": "第 $1$ 行，一个整数 $N$。\n\n第 $2\\sim (N+1)$ 行，每行两个数字，第 $(i+1)$ 行的数字代表第 $i$ 头奶牛的产奶时段。", "outputFormat": "第 $1$ 行输出一个整数，代表需要牛棚的最少数量。\n\n第 $2\\sim (N+1)$ 行，每行一个数字，第 $(i+1)$ 行的数字代表第 $i$ 头奶牛将会被安排到哪个牛棚挤奶。", "hint": "由 @FlierKing 提供 SPJ。", "locale": "zh-CN"}}}
{"pid": "P2860", "type": "P", "difficulty": 5, "samples": [["7 7\n1 2\n2 3\n3 4\n2 5\n4 5\n5 6\n5 7", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2006", "USACO", "Tarjan", "双连通分量"], "title": "[USACO06JAN] Redundant Paths G", "background": null, "description": "In order to get from one of the $F$ ($1 \\le F \\le 5\\times 10^3$) grazing fields (which are numbered $1$ to $F$) to another field, Bessie and the rest of the herd are forced to cross near the Tree of Rotten Apples.  The cows are now tired of often being forced to take a particular path and want to build some new paths so that they will always have a choice of at least two separate routes between any pair of fields. They currently have at least one route between each pair of fields and want to have at least two. Of course, they can only travel on Official Paths when they move from one field to another.\n\n\nGiven a description of the current set of $R$ ($F-1 \\le R \\le 1\\times 10^4$) paths that each connect exactly two different fields, determine the minimum number of new paths (each of which connects exactly two fields) that must be built so that there are at least two separate routes between any pair of fields. Routes are considered separate if they use none of the same paths, even if they visit the same intermediate field along the way.\n\n\nThere might already be more than one paths between the same pair of fields, and you may also build a new path that connects the same fields as some other path.", "inputFormat": "Line $1$: Two space-separated integers: $F$ and $R$.\n\n\n\n\nLines $2$ to $R+1$: Each line contains two space-separated integers which are the fields at the endpoints of some path.", "outputFormat": "Line $1$: A single integer that is the number of new paths that must be built.", "hint": "Explanation of the sample:\n\n\n\n\nOne visualization of the paths is:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cubnel5k.png)\n\nBuilding new paths from $1$ to $6$ and from $4$ to $7$ satisfies the conditions.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rgguiytp.png)\n\nCheck some of the routes:\n\n- $1$ – $2$:  $1 \\to 2$ and $1 \\to 6 \\to 5 \\to 2$.\n- $1$ – $4$:  $1 \\to 2 \\to 3 \\to 4$ and $1 \\to 6 \\to 5 \\to 4$.\n- $3$ – $7$:  $3 \\to 4 \\to 7$ and $3 \\to 2 \\to 5 \\to 7$.\n\nEvery pair of fields is, in fact, connected by two routes.\n\nIt's possible that adding some other path will also solve the problem (like one from $6$ to $7$). Adding two paths, however, is the minimum.", "locale": "en", "translations": {"en": {"title": "[USACO06JAN] Redundant Paths G", "background": null, "description": "In order to get from one of the $F$ ($1 \\le F \\le 5\\times 10^3$) grazing fields (which are numbered $1$ to $F$) to another field, Bessie and the rest of the herd are forced to cross near the Tree of Rotten Apples.  The cows are now tired of often being forced to take a particular path and want to build some new paths so that they will always have a choice of at least two separate routes between any pair of fields. They currently have at least one route between each pair of fields and want to have at least two. Of course, they can only travel on Official Paths when they move from one field to another.\n\n\nGiven a description of the current set of $R$ ($F-1 \\le R \\le 1\\times 10^4$) paths that each connect exactly two different fields, determine the minimum number of new paths (each of which connects exactly two fields) that must be built so that there are at least two separate routes between any pair of fields. Routes are considered separate if they use none of the same paths, even if they visit the same intermediate field along the way.\n\n\nThere might already be more than one paths between the same pair of fields, and you may also build a new path that connects the same fields as some other path.", "inputFormat": "Line $1$: Two space-separated integers: $F$ and $R$.\n\n\n\n\nLines $2$ to $R+1$: Each line contains two space-separated integers which are the fields at the endpoints of some path.", "outputFormat": "Line $1$: A single integer that is the number of new paths that must be built.", "hint": "Explanation of the sample:\n\n\n\n\nOne visualization of the paths is:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cubnel5k.png)\n\nBuilding new paths from $1$ to $6$ and from $4$ to $7$ satisfies the conditions.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rgguiytp.png)\n\nCheck some of the routes:\n\n- $1$ – $2$:  $1 \\to 2$ and $1 \\to 6 \\to 5 \\to 2$.\n- $1$ – $4$:  $1 \\to 2 \\to 3 \\to 4$ and $1 \\to 6 \\to 5 \\to 4$.\n- $3$ – $7$:  $3 \\to 4 \\to 7$ and $3 \\to 2 \\to 5 \\to 7$.\n\nEvery pair of fields is, in fact, connected by two routes.\n\nIt's possible that adding some other path will also solve the problem (like one from $6$ to $7$). Adding two paths, however, is the minimum.", "locale": "en"}, "zh-CN": {"title": "[USACO06JAN] Redundant Paths G", "background": null, "description": "为了从 $F(1\\le F\\le 5,000)$ 个牧场（编号为 $1$ 到 $F$）中的一个到达另一个牧场，贝西和其他牛群被迫经过腐烂苹果树附近。奶牛们厌倦了经常被迫走特定的路径，想要修建一些新路径，以便在任意一对牧场之间总是有至少两条独立的路线可供选择。目前在每对牧场之间至少有一条路径，他们希望至少有两条。当然，他们只能在官方路径上从一个牧场移动到另一个牧场。\n\n给定当前 $R(F-1\\le R\\le 10,000)$ 条路径的描述，每条路径恰好连接两个不同的牧场，确定必须修建的最少新路径数量（每条新路径也恰好连接两个牧场），以便在任意一对牧场之间至少有两条独立的路线。若两条路线不使用相同的路径，即使它们沿途访问相同的中间牧场，也被视为独立的。\n\n在同一对牧场之间可能已经有多条路径，你也可以修建一条新路径连接与某条现有路径相同的牧场。", "inputFormat": "第 $1$ 行：两个用空格分隔的整数：$F$ 和 $R$。\n\n第 $2$ 行到第 $R+1$ 行：每行包含两个用空格分隔的整数，表示某条路径的两个端点牧场。", "outputFormat": "第 $1$ 行：一个整数，表示必须修建的新路径数量。", "hint": "样例解释：\n\n路径的一个可视化图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cubnel5k.png)\n\n从 $1$ 到 $6$ 和从 $4$ 到 $7$ 修建新路径满足条件。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rgguiytp.png)\n\n检查一些路线：\n\n- $1 \\to 2$：$1 \\to2$ 和 $1 \\to6 \\to5 \\to2$\n- $1 \\to 4$：$1 \\to2 \\to3 \\to4$ 和 $1 \\to6 \\to5 \\to4$\n- $3 \\to 7$：$3 \\to4 \\to7$ 和 $3 \\to2 \\to5 \\to7$\n\n事实上，每对牧场之间都由两条路线连接。\n\n添加其他路径也可能解决问题（例如从 $6$ 到 $7$ 的路径）。然而，添加两条路径是最少的。\n\n（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P2861", "type": "P", "difficulty": 5, "samples": [["5 3 1\n6 10\n10 7\n9 1\n2 0\n0 3\n2 2\n5 6\n8 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "USACO"], "title": "[USACO06JAN] Roping the Field G", "background": null, "description": "约翰真是一个自然派艺术大师，他常常在他的田地上创作一些巨大的艺术杰作。今天，他想在麦田上创作一幅由绳索构成的巨画。他的麦田是一个多边形，由 $N\\ (1 \\le N \\le 150)$ 个篱笆粧和之间的篱笆围成。为了创作他的巨画，他打算用尽量多的数量的绳索，笔直地连接两个不相邻的篱笆粧。但是为了画作的优美，任意两根绳索不得交叉。\n\n约翰有一个难处：一些邪恶的外星人在他的麦田上整出了 $G\\ (0 \\le G \\le 100)$ 个怪圈。这些怪圈都有一定的半径 $R\\ (1\\le R\\le 100000)$。他不敢惹外星人，所以不想有任何绳索通过这些怪圈，即使碰到怪圈的边际也不行。这些怪圈的圆心都在麦田之内，但一些怪圈可能有部分在麦田之外。一些篱笆或者篱笆粧都有可能在某一个怪圈里。\n\n给出篱笆粧和怪圈的坐标，计算最多的绳索数。所有的坐标都是 $[0,10^6]$ 内的整数。", "inputFormat": "第 $1$ 行输入三个整数 $N,G,R$。\n\n接下来 $N$ 行，每行输入两个整数表示篱笆粧的坐标。\n\n接下来 $G$ 行，每行输入两个整数表示一个怪圈的圆心坐标。", "outputFormat": "一行一个正整数表示答案。", "hint": "样例解释：唯一一条绳索连接了 $(10,7)$ 和 $(2,0)$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO06JAN] Roping the Field G", "background": null, "description": "Farmer John is quite the nature artist: he often constructs large works of art on his farm. Today, FJ wants to construct a giant \"field web\". FJ's field is large convex polygon with fences along the boundary and fence posts at each of the $N$ corners $(1 \\le N \\le 150)$. To construct his field web, FJ wants to run as many ropes as possible in straight lines between pairs of non-adjacent fence posts such that no two ropes cross.\n\nThere is one complication: FJ's field is not completely usable. Some evil aliens have created a total of $G (0 \\le G \\le 100)$ grain circles in the field, all of radius $R (1 \\le R \\le 100,000)$. FJ is afraid to upset the aliens, and therefore doesn't want the ropes to pass through, or even touch the very edge of a grain circle. Note that although the centers of all the circles are contained within the field, a wide radius may make it extend outside of the field, and both fences and fence posts may be within a grain circle.\n\nGiven the locations of the fence posts and the centers of the circles, determine the maximum number of ropes that FJ can use to create his field web.\n\nFJ's fence pots and the circle centers all have integer coordinates $X$ and $Y$ each of which is in the range $[0,1,000,000]$.", "inputFormat": "Line $1$: Three space-separated integers: $N$, $G$, and $R$.\n\nLines $2 \\sim N+1$: Each line contains two space-separated integers that are the $X,Y$ position of a fence post on the boundary of FJ's field.\n\nLines $N+2 \\sim N+G+1$: Each line contains two space-separated integers that are the $X,Y$ position of a circle's center inside FJ's field.", "outputFormat": "Line $1$: A single integer that is the largest number of ropes FJ can use for his artistic creation.", "hint": "Explanation of the sample:\n\nA pentagonal field, in which all possible ropes are blocked by three grain circles, except for the rope between fenceposts $2$ and $4$.", "locale": "en"}, "zh-CN": {"title": "[USACO06JAN] Roping the Field G", "background": null, "description": "约翰真是一个自然派艺术大师，他常常在他的田地上创作一些巨大的艺术杰作。今天，他想在麦田上创作一幅由绳索构成的巨画。他的麦田是一个多边形，由 $N\\ (1 \\le N \\le 150)$ 个篱笆粧和之间的篱笆围成。为了创作他的巨画，他打算用尽量多的数量的绳索，笔直地连接两个不相邻的篱笆粧。但是为了画作的优美，任意两根绳索不得交叉。\n\n约翰有一个难处：一些邪恶的外星人在他的麦田上整出了 $G\\ (0 \\le G \\le 100)$ 个怪圈。这些怪圈都有一定的半径 $R\\ (1\\le R\\le 100000)$。他不敢惹外星人，所以不想有任何绳索通过这些怪圈，即使碰到怪圈的边际也不行。这些怪圈的圆心都在麦田之内，但一些怪圈可能有部分在麦田之外。一些篱笆或者篱笆粧都有可能在某一个怪圈里。\n\n给出篱笆粧和怪圈的坐标，计算最多的绳索数。所有的坐标都是 $[0,10^6]$ 内的整数。", "inputFormat": "第 $1$ 行输入三个整数 $N,G,R$。\n\n接下来 $N$ 行，每行输入两个整数表示篱笆粧的坐标。\n\n接下来 $G$ 行，每行输入两个整数表示一个怪圈的圆心坐标。", "outputFormat": "一行一个正整数表示答案。", "hint": "样例解释：唯一一条绳索连接了 $(10,7)$ 和 $(2,0)$。", "locale": "zh-CN"}}}
{"pid": "P2862", "type": "P", "difficulty": 4, "samples": [["3 4\n1 2\n2 1\n4 1\n5 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "线段树", "二分", "USACO"], "title": "[USACO06JAN] Corral the Cows G", "background": null, "description": "Farmer John 希望为他的奶牛们建立一个畜栏。\n\n这些挑剔的奶牛要求畜栏必须是正方形的，而且至少要包含 $C$ 片三叶草，来当做它们的下午茶。\n\n约翰的土地里一共包含 $N$ 片三叶草，每单位三叶草位于一个 $1\\times 1$ 的土地区域内。坐标都为整数，范围在 $1$ 到 $10000$ 以内。\n\n**多片的三叶草可能会位于同一个 $1\\times 1$ 的区域内，所以在输入内，同一个区域坐标可能出现多次。**\n\n请你帮 Farmer John 计算一下，在能包含至少 $C$ 片三叶草的情况下，畜栏的最小边长是多少。\n\n$1\\le C\\le N\\le 500$。", "inputFormat": "第一行两个正整数 $C,N$。\n\n下面 $N$ 行，每行两个整数 $X,Y$，表示某一单位三叶草的位置 $(X,Y)$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例的一个最优解是，将正方形的左下角设为 $(1,1)$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO06JAN] Corral the Cows G", "background": null, "description": "Farmer John wishes to build a corral for his cows. Being finicky beasts, they demand that the corral be square and that the corral contain at least $C (1 \\le C \\le 500)$ clover fields for afternoon treats. The corral's edges must be parallel to the $X,Y$ axes.\n\nFJ's land contains a total of $N (C \\le N \\le 500)$ clover fields, each a block of size $1 \\times 1$ and located at with its lower left corner at integer $X$ and $Y$ coordinates each in the range $1 \\sim 10,000$. Sometimes more than one clover field grows at the same location; such a field would have its location appear twice (or more) in the input. A corral surrounds a clover field if the field is entirely located inside the corral's borders.\n\nHelp FJ by telling him the side length of the smallest square containing $C$ clover fields.", "inputFormat": "Line $1$: Two space-separated integers: $C$ and $N$.\n\nLines $2 \\sim N+1$: Each line contains two space-separated integers that are the $X,Y$ coordinates of a clover field.", "outputFormat": "Line $1$: A single line with a single integer that is length of one edge of the minimum size square that contains at least $C$ clover fields.", "hint": "Explanation of the sample:\n\n```plain\n|*   *\n| * *\n+------\n```\n\nBelow is one $4 \\times 4$ solution (`C`'s show most of the corral's area); many others exist.\n\n```plain\n|CCCC\n|CCCC\n|*CCC*\n|C*C*\n+------\n```", "locale": "en"}, "zh-CN": {"title": "[USACO06JAN] Corral the Cows G", "background": null, "description": "Farmer John 希望为他的奶牛们建立一个畜栏。\n\n这些挑剔的奶牛要求畜栏必须是正方形的，而且至少要包含 $C$ 片三叶草，来当做它们的下午茶。\n\n约翰的土地里一共包含 $N$ 片三叶草，每单位三叶草位于一个 $1\\times 1$ 的土地区域内。坐标都为整数，范围在 $1$ 到 $10000$ 以内。\n\n**多片的三叶草可能会位于同一个 $1\\times 1$ 的区域内，所以在输入内，同一个区域坐标可能出现多次。**\n\n请你帮 Farmer John 计算一下，在能包含至少 $C$ 片三叶草的情况下，畜栏的最小边长是多少。\n\n$1\\le C\\le N\\le 500$。", "inputFormat": "第一行两个正整数 $C,N$。\n\n下面 $N$ 行，每行两个整数 $X,Y$，表示某一单位三叶草的位置 $(X,Y)$。", "outputFormat": "一行一个整数表示答案。", "hint": "样例的一个最优解是，将正方形的左下角设为 $(1,1)$。", "locale": "zh-CN"}}}
{"pid": "P2863", "type": "P", "difficulty": 4, "samples": [["5 4\n2 4\n3 5\n1 2\n4 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2006", "USACO", "强连通分量", "Tarjan"], "title": "[USACO06JAN] The Cow Prom S", "background": "", "description": "有一个 $n$ 个点，$m$ 条边的有向图，请求出这个图点数大于 $1$ 的强连通分量个数。", "inputFormat": "第一行为两个整数 $n$ 和 $m$。\n\n第二行至 $m+1$ 行，每一行有两个整数 $a$ 和 $b$，表示有一条从 $a$ 到 $b$ 的有向边。", "outputFormat": "仅一行，表示点数大于 $1$ 的强连通分量个数。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $2\\le n \\le 10^4$，$2\\le m\\le 5\\times 10^4$，$1 \\leq a, b \\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO06JAN] The Cow Prom S", "background": "", "description": "Given a directed graph with $n$ vertices and $m$ edges, find the number of strongly connected components that contain more than 1 vertex.", "inputFormat": "The first line contains two integers $n$ and $m$.\n\nLines 2 through $m+1$, each line contains two integers $a$ and $b$, indicating a directed edge from $a$ to $b$.", "outputFormat": "Output a single line containing the number of strongly connected components with more than 1 vertex.", "hint": "Constraints\n\nFor all test points, it is guaranteed that $2 \\le n \\le 10^4$, $2 \\le m \\le 5 \\times 10^4$, $1 \\le a, b \\le n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO06JAN] The Cow Prom S", "background": "", "description": "有一个 $n$ 个点，$m$ 条边的有向图，请求出这个图点数大于 $1$ 的强连通分量个数。", "inputFormat": "第一行为两个整数 $n$ 和 $m$。\n\n第二行至 $m+1$ 行，每一行有两个整数 $a$ 和 $b$，表示有一条从 $a$ 到 $b$ 的有向边。", "outputFormat": "仅一行，表示点数大于 $1$ 的强连通分量个数。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $2\\le n \\le 10^4$，$2\\le m\\le 5\\times 10^4$，$1 \\leq a, b \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P2864", "type": "P", "difficulty": 5, "samples": [["6 7\n.......\n...X...\n..XXX..\n...XXX.\n...X...\n...*...", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "USACO", "广度优先搜索 BFS"], "title": "[USACO06JAN] The Grove S", "background": null, "description": "牧场里有树林，林子里没有坑，贝茜很想知道，最少几步能绕树林走一圈，最后回到起点.她能上下左右走，也能走对角线格子.\n\n牧场被分成 $R$ 行 $C$ 列 $(1\\leq R\\leq 50,1\\leq C\\leq 50)$。下面是一张样例的地图，其中 `.` 表示贝茜可以走的空地，`X` 表示树林，`*` 表示起点。而贝茜走的最近的路已经特别地用 `+` 表示出来：\n\n```plain\n...+...\n..+X+..\n.+XXX+.\n..+XXX+\n..+X..+\n...+++*\n```\n\n题目**保证存在最短路径**，且森林形成一个联通块。", "inputFormat": "第一行两个正整数 $R,C$。\n\n下面 $R$ 行，一个 $R \\times C$ 的字符矩阵。", "outputFormat": "一行一个整数表示答案。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[USACO06JAN] The Grove S", "background": null, "description": "The pasture contains a small, contiguous grove of trees that has no 'holes' in the middle of the it.  Bessie wonders: how far is it to walk around that grove and get back to my starting position? She's just sure there is a way to do it by going from her start location to successive locations by walking horizontally, vertically, or diagonally and counting each move as a single step. Just looking at it, she doesn't think you could pass 'through' the grove on a tricky diagonal. Your job is to calculate the minimum number of steps she must take.\n\n\nHappily, Bessie lives on a simple world where the pasture is represented by a grid with $R$ rows and $C$ columns $(1 \\le R \\le 50, 1 \\le C \\le 50)$. Here's a typical example where `.` is pasture (which Bessie may traverse), `X` is the grove of trees, `*` represents Bessie's start and end position, and `+` marks one shortest path she can walk to circumnavigate the grove (i.e., the answer):\n\n```plain\n...+...\n..+X+..\n.+XXX+.\n..+XXX+\n..+X..+\n...+++*\n```\nThe path shown is not the only possible shortest path; Bessie might have taken a diagonal step from her start position and achieved a similar length solution. Bessie is happy that she's starting 'outside' the grove instead of in a sort of 'harbor' that could complicate finding the best path.", "inputFormat": "Line $1$: Two space-separated integers: $R$ and $C$.\n\nLines $2 \\sim R+1$: Line $i+1$ describes row $i$ with $C$ characters (with no spaces between them).", "outputFormat": "Line $1$: The single line contains a single integer which is the smallest number of steps required to circumnavigate the grove.", "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO06JAN] The Grove S", "background": null, "description": "牧场里有树林，林子里没有坑，贝茜很想知道，最少几步能绕树林走一圈，最后回到起点.她能上下左右走，也能走对角线格子.\n\n牧场被分成 $R$ 行 $C$ 列 $(1\\leq R\\leq 50,1\\leq C\\leq 50)$。下面是一张样例的地图，其中 `.` 表示贝茜可以走的空地，`X` 表示树林，`*` 表示起点。而贝茜走的最近的路已经特别地用 `+` 表示出来：\n\n```plain\n...+...\n..+X+..\n.+XXX+.\n..+XXX+\n..+X..+\n...+++*\n```\n\n题目**保证存在最短路径**，且森林形成一个联通块。", "inputFormat": "第一行两个正整数 $R,C$。\n\n下面 $R$ 行，一个 $R \\times C$ 的字符矩阵。", "outputFormat": "一行一个整数表示答案。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2865", "type": "P", "difficulty": 5, "samples": [["4 4\n1 2 100\n2 4 200\n2 3 250\n3 4 100", "450"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2006", "USACO", "最短路"], "title": "[USACO06NOV] Roadblocks G", "background": "", "description": "Bessie has moved to a small farm and sometimes enjoys returning to visit one of her best friends. She does not want to get to her old home too quickly, because she likes the scenery along the way. She has decided to take the second-shortest rather than the shortest path. She knows there must be some second-shortest path.\n\nThe countryside consists of R (1 ≤ R ≤ 100,000) bidirectional roads, each linking two of the N (1 ≤ N ≤ 5000) intersections, conveniently numbered 1..N. Bessie starts at intersection 1, and her friend (the destination) is at intersection N.\n\nThe second-shortest path may share roads with any of the shortest paths, and it may backtrack i.e., use the same road or intersection more than once. The second-shortest path is the shortest path whose length is longer than the shortest path(s) (i.e., if two or more shortest paths exist, the second-shortest path is the one whose length is longer than those but no longer than any other path).\n", "inputFormat": "Line 1: Two space-separated integers: N and R\n\n\nLines 2..R+1: Each line contains three space-separated integers: A, B, and D that describe a road that connects intersections A and B and has length D (1 ≤ D ≤ 5000)\n", "outputFormat": "Line 1: The length of the second shortest path between node 1 and node N\n", "hint": "Two routes: 1 -> 2 -> 4 (length 100+200=300) and 1 -> 2 -> 3 -> 4 (length 100+250+100=450)\n", "locale": "en", "translations": {"en": {"title": "[USACO06NOV] Roadblocks G", "background": "", "description": "Bessie has moved to a small farm and sometimes enjoys returning to visit one of her best friends. She does not want to get to her old home too quickly, because she likes the scenery along the way. She has decided to take the second-shortest rather than the shortest path. She knows there must be some second-shortest path.\n\nThe countryside consists of R (1 ≤ R ≤ 100,000) bidirectional roads, each linking two of the N (1 ≤ N ≤ 5000) intersections, conveniently numbered 1..N. Bessie starts at intersection 1, and her friend (the destination) is at intersection N.\n\nThe second-shortest path may share roads with any of the shortest paths, and it may backtrack i.e., use the same road or intersection more than once. The second-shortest path is the shortest path whose length is longer than the shortest path(s) (i.e., if two or more shortest paths exist, the second-shortest path is the one whose length is longer than those but no longer than any other path).\n", "inputFormat": "Line 1: Two space-separated integers: N and R\n\n\nLines 2..R+1: Each line contains three space-separated integers: A, B, and D that describe a road that connects intersections A and B and has length D (1 ≤ D ≤ 5000)\n", "outputFormat": "Line 1: The length of the second shortest path between node 1 and node N\n", "hint": "Two routes: 1 -> 2 -> 4 (length 100+200=300) and 1 -> 2 -> 3 -> 4 (length 100+250+100=450)\n", "locale": "en"}, "zh-CN": {"title": "[USACO06NOV] Roadblocks G", "background": null, "description": "Bessie 搬到了一个小农场，有时喜欢回去拜访她的一个好朋友。她不想太快到达她的旧家，因为她喜欢沿途的风景。她决定选择第二短的路径而不是最短的路径。她知道一定存在某条第二短路径。\n\n乡村由 $R(1\\le R\\le100,000)$ 条双向道路组成，每条道路连接 $N(1\\le N\\le5000)$ 个交叉路口中的两个，这些交叉路口被方便地编号为 $1$ 到 $N$。Bessie 从交叉路口 $1$ 出发，她的朋友（目的地）在交叉路口 $N$。\n\n第二短路径可以与任何最短路径共享道路，并且可以回溯，即多次使用相同的道路或交叉路口。第二短路径是长度比最短路径长的最短路径（即，如果存在两条或多条最短路径，第二短路径是长度比这些路径长但不比任何其他路径长的路径）。", "inputFormat": "第 $1$ 行：两个用空格分隔的整数：$N$ 和 $R$。\n\n\n第 $2$ 行到第 $R+1$ 行：每行包含三个用空格分隔的整数：$A$、$B$ 和 $D$，描述连接交叉路口 $A$ 和 $B$ 的一条长度为 $D(1\\le D\\le5000)$ 的道路。", "outputFormat": "第 $1$ 行：节点 $1$ 和节点 $N$ 之间第二短路径的长度。", "hint": "两条路径：$1\\to2\\to4$（长度 $100+200=300$）和 $1\\to2\\to3\\to4$（长度 $100+250+100=450$）。\n\n（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P2866", "type": "P", "difficulty": 3, "samples": [["6\n10\n3\n7\n4\n12\n2", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "USACO", "栈", "ST 表", "单调栈"], "title": "[USACO06NOV] Bad Hair Day S", "background": "", "description": "\n农夫约翰有 $N$ 头奶牛正在过乱头发节。\n\n每一头牛都站在同一排面朝右，它们被从左到右依次编号为 $1, 2, \\cdots, N$。编号为 $i$ 的牛身高为 $h_i$。第 $N$ 头牛在最前面，而第 $1$ 头牛在最后面。\n\n对于第 $i$ 头牛**前面**的第 $j$ 头牛，如果 $h_i>h_{i+1}, h_i>h_{i+2}, \\cdots, h_i>h_j$，那么认为第 $i$ 头牛可以看到第 $i+1$ 到第 $j$ 头牛。\n\n定义 $C_i$ 为第 $i$ 头牛所能看到的牛的数量。请帮助农夫约翰求出 $C _ 1 + C _ 2 + \\cdots + C _ N$。\n", "inputFormat": "输入共 $N + 1$ 行。\n\n第一行为一个整数 $N$，代表牛的个数。  \n接下来 $N$ 行，每行一个整数 $a _ i$，分别代表第 $1, 2, \\cdots, N$ 头牛的身高。", "outputFormat": "输出共一行一个整数，代表 $C _ 1 + C _ 2 + \\cdots + C _ N$。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq N \\leq 8 \\times 10 ^ 4$，$1 \\leq h _ i \\leq 10 ^ 9$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO06NOV] Bad Hair Day S", "background": "", "description": "Farmer John has $N$ cows on a Bad Hair Day.\n\nAll cows stand in a single line facing right, and they are numbered from left to right as $1, 2, \\cdots, N$. Cow $N$ is at the front, and cow $1$ is at the back. The height of cow $i$ is $h_i$.\n\nFor the cows in front of cow $i$, if $h_i > h_{i+1}, h_i > h_{i+2}, \\cdots, h_i > h_j$, then cow $i$ is considered able to see cows $i+1$ through $j$.\n\nDefine $C_i$ as the number of cows visible to cow $i$. Please help Farmer John compute $C_1 + C_2 + \\cdots + C_N$.", "inputFormat": "The input contains $N + 1$ lines.\n\nThe first line contains an integer $N$, the number of cows.  \nThe next $N$ lines each contain an integer $h_i$, representing the heights of cows $1, 2, \\cdots, N$.", "outputFormat": "Output a single line with one integer, the value of $C_1 + C_2 + \\cdots + C_N$.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq N \\leq 8 \\times 10^4$, $1 \\leq h_i \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO06NOV] Bad Hair Day S", "background": "", "description": "\n农夫约翰有 $N$ 头奶牛正在过乱头发节。\n\n每一头牛都站在同一排面朝右，它们被从左到右依次编号为 $1, 2, \\cdots, N$。编号为 $i$ 的牛身高为 $h_i$。第 $N$ 头牛在最前面，而第 $1$ 头牛在最后面。\n\n对于第 $i$ 头牛**前面**的第 $j$ 头牛，如果 $h_i>h_{i+1}, h_i>h_{i+2}, \\cdots, h_i>h_j$，那么认为第 $i$ 头牛可以看到第 $i+1$ 到第 $j$ 头牛。\n\n定义 $C_i$ 为第 $i$ 头牛所能看到的牛的数量。请帮助农夫约翰求出 $C _ 1 + C _ 2 + \\cdots + C _ N$。\n", "inputFormat": "输入共 $N + 1$ 行。\n\n第一行为一个整数 $N$，代表牛的个数。  \n接下来 $N$ 行，每行一个整数 $a _ i$，分别代表第 $1, 2, \\cdots, N$ 头牛的身高。", "outputFormat": "输出共一行一个整数，代表 $C _ 1 + C _ 2 + \\cdots + C _ N$。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq N \\leq 8 \\times 10 ^ 4$，$1 \\leq h _ i \\leq 10 ^ 9$。", "locale": "zh-CN"}}}
{"pid": "P2867", "type": "P", "difficulty": 4, "samples": [["6\nJ*J***\n******\nJ***J*\n******\n**B***\n******", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2006", "USACO", "枚举", "深度优先搜索 DFS"], "title": "[USACO06NOV] Big Square S", "background": "[English version](https://www.luogu.com.cn/paste/x781adew)", "description": "农民 John 的牛参加了一次和农民 Bob 的牛的竞赛。\n\n他们在区域中画了一个 $N\\times N$ 的正方形点阵，两个农场的牛各自占据了一些点。当然不能有两头牛处于同一个点。\n\n农场的目标是用自己的牛作为 $4$ 个顶点，形成一个面积最大的正方形（不必须和边界平行）。\n\n除了 Bessie 以外，John 其他的牛都已经放到点阵中去了，要确定 Bessie 放在哪个位置，能使得 John 的农场得到一个最大的正方形（Bessie 不是必须参与作为正方形的四个顶点之一）。", "inputFormat": "第 $1$ 行：一个单独的整数，$N$（$2 \\leq N \\leq 100$）。\n\n第 $2 \\sim (N+1)$ 行：第 $i-1$ 行使用 $N$ 个字符描述区域的第 $i$ 行。其中，`J`代表此点被 John 的牛占据，`B` 代表此点被 Bob 的牛占据，而 `*` 代表一个未被占据的点。输入保证至少有一个未被占据的点。", "outputFormat": "输出一个整数，表示 John 的农场所能达到的最大面积。如果无法形成正方形，则输出 $0$。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[USACO06NOV] Big Square S", "background": "[English version](https://www.luogu.com.cn/paste/x781adew)", "description": "Farmer John’s cows are competing against Farmer Bob’s cows.\n\nThey draw an $N\\times N$ square lattice of points in the field. Each farm’s cows occupy some points, and of course no two cows can be at the same point.\n\nEach farm aims to use its own cows as the $4$ vertices to form a square with the maximum possible area (the square does not need to be axis-aligned).\n\nAll of John’s cows except Bessie have already been placed on the lattice. Determine where to place Bessie so that John’s farm can obtain a square with the maximum possible area (Bessie is not required to be one of the four vertices).", "inputFormat": "Line $1$: A single integer $N$ ($2 \\leq N \\leq 100$).\n\nLines $2$ to $(N+1)$: The $(i-1)$-th of these lines uses $N$ characters to describe row $i$ of the field. `J` denotes a point occupied by John’s cow, `B` denotes a point occupied by Bob’s cow, and `*` denotes an unoccupied point. The input guarantees at least one unoccupied point.", "outputFormat": "Output a single integer, the maximum area that John’s farm can achieve. If no square can be formed, output $0$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO06NOV] Big Square S", "background": "[English version](https://www.luogu.com.cn/paste/x781adew)", "description": "农民 John 的牛参加了一次和农民 Bob 的牛的竞赛。\n\n他们在区域中画了一个 $N\\times N$ 的正方形点阵，两个农场的牛各自占据了一些点。当然不能有两头牛处于同一个点。\n\n农场的目标是用自己的牛作为 $4$ 个顶点，形成一个面积最大的正方形（不必须和边界平行）。\n\n除了 Bessie 以外，John 其他的牛都已经放到点阵中去了，要确定 Bessie 放在哪个位置，能使得 John 的农场得到一个最大的正方形（Bessie 不是必须参与作为正方形的四个顶点之一）。", "inputFormat": "第 $1$ 行：一个单独的整数，$N$（$2 \\leq N \\leq 100$）。\n\n第 $2 \\sim (N+1)$ 行：第 $i-1$ 行使用 $N$ 个字符描述区域的第 $i$ 行。其中，`J`代表此点被 John 的牛占据，`B` 代表此点被 Bob 的牛占据，而 `*` 代表一个未被占据的点。输入保证至少有一个未被占据的点。", "outputFormat": "输出一个整数，表示 John 的农场所能达到的最大面积。如果无法形成正方形，则输出 $0$。", "hint": null, "locale": "zh-CN"}}}
