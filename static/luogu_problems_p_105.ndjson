{"pid": "P3128", "type": "P", "difficulty": 4, "samples": [["5 10\n3 4\n1 5\n4 2\n5 4\n5 4\n5 4\n3 5\n4 3\n4 3\n1 3\n3 5\n5 4\n1 5\n3 4", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2015", "USACO", "最近公共祖先 LCA", "树链剖分", "差分"], "title": "[USACO15DEC] Max Flow P", "background": "", "description": "Farmer John has installed a new system of $N-1$ pipes to transport milk between the $N$ stalls in his barn ($2 \\leq N \\leq 50,000$), conveniently numbered $1 \\ldots N$. Each pipe connects a pair of stalls, and all stalls are connected to each-other via paths of pipes.\n\nFJ is pumping milk between $K$ pairs of stalls ($1 \\leq K \\leq 100,000$). For the $i$th such pair,  you are told two stalls $s_i$ and $t_i$, endpoints of a path along which milk is being pumped at a unit rate. FJ is concerned that some stalls might end up overwhelmed with all the milk being pumped through them, since a stall can serve as a waypoint along many of the $K$ paths along which milk is being pumped. Please help him determine the maximum amount of milk being pumped through any stall. If milk is being pumped along a path from $s_i$ to $t_i$, then it counts as being pumped through the endpoint stalls $s_i$ and $t_i$, as well as through every stall along the path between them.", "inputFormat": "The first line of the input contains $N$ and $K$.\n\nThe next $N-1$ lines each contain two integers $x$ and $y$ ($x \\ne y$) describing a pipe between stalls $x$ and $y$.\n\nThe next $K$ lines each contain two integers $s$ and $t$ describing the endpoint stalls of a path through which milk is being pumped.\n", "outputFormat": "An integer specifying the maximum amount of milk pumped through any stall in the barn.", "hint": "$2 \\le N \\le 5 \\times 10^4,1 \\le K \\le 10^5$", "locale": "en", "translations": {"en": {"title": "[USACO15DEC] Max Flow P", "background": "", "description": "Farmer John has installed a new system of $N-1$ pipes to transport milk between the $N$ stalls in his barn ($2 \\leq N \\leq 50,000$), conveniently numbered $1 \\ldots N$. Each pipe connects a pair of stalls, and all stalls are connected to each-other via paths of pipes.\n\nFJ is pumping milk between $K$ pairs of stalls ($1 \\leq K \\leq 100,000$). For the $i$th such pair,  you are told two stalls $s_i$ and $t_i$, endpoints of a path along which milk is being pumped at a unit rate. FJ is concerned that some stalls might end up overwhelmed with all the milk being pumped through them, since a stall can serve as a waypoint along many of the $K$ paths along which milk is being pumped. Please help him determine the maximum amount of milk being pumped through any stall. If milk is being pumped along a path from $s_i$ to $t_i$, then it counts as being pumped through the endpoint stalls $s_i$ and $t_i$, as well as through every stall along the path between them.", "inputFormat": "The first line of the input contains $N$ and $K$.\n\nThe next $N-1$ lines each contain two integers $x$ and $y$ ($x \\ne y$) describing a pipe between stalls $x$ and $y$.\n\nThe next $K$ lines each contain two integers $s$ and $t$ describing the endpoint stalls of a path through which milk is being pumped.\n", "outputFormat": "An integer specifying the maximum amount of milk pumped through any stall in the barn.", "hint": "$2 \\le N \\le 5 \\times 10^4,1 \\le K \\le 10^5$", "locale": "en"}, "zh-CN": {"title": "[USACO15DEC] Max Flow P", "background": "", "description": "Farmer John 在他的谷仓中安装了 $N-1$ 条管道，用于在 $N$ 个牛棚之间运输牛奶（$2 \\leq N \\leq 50,000$），牛棚方便地编号为 $1 \\ldots N$。每条管道连接一对牛棚，所有牛棚通过这些管道相互连接。\n\nFJ 正在 $K$ 对牛棚之间泵送牛奶（$1 \\leq K \\leq 100,000$）。对于第 $i$ 对牛棚，你被告知两个牛棚 $s_i$ 和 $t_i$，这是牛奶以单位速率泵送的路径的端点。FJ 担心某些牛棚可能会因为过多的牛奶通过它们而不堪重负，因为一个牛棚可能会作为许多泵送路径的中转站。请帮助他确定通过任何一个牛棚的最大牛奶量。如果牛奶沿着从 $s_i$ 到 $t_i$ 的路径泵送，那么它将被计入端点牛棚 $s_i$ 和 $t_i$，以及它们之间路径上的所有牛棚。", "inputFormat": "输入的第一行包含 $N$ 和 $K$。\n\n接下来的 $N-1$ 行每行包含两个整数 $x$ 和 $y$（$x \\ne y$），描述连接牛棚 $x$ 和 $y$ 的管道。\n\n接下来的 $K$ 行每行包含两个整数 $s$ 和 $t$，描述牛奶泵送路径的端点牛棚。", "outputFormat": "输出一个整数，表示通过谷仓中任何一个牛棚的最大牛奶量。", "hint": "$2 \\le N \\le 5 \\times 10^4,1 \\le K \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P3129", "type": "P", "difficulty": 5, "samples": [["4\n1\n8\n4\n3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2015", "线段树", "USACO"], "title": "[USACO15DEC] High Card Low Card P", "background": "", "description": "Bessie the cow is a hu e fan of card games, which is quite surprising, given her lack of opposable thumbs. Unfortunately, none of the other cows in the herd are good opponents. They are so bad, in fact, that they always play in a completely predictable fashion! Nonetheless, it can still be a challenge for Bessie to figure out how to win.\n\nBessie and her friend Elsie are currently playing a simple card game where they take a deck of $2N$ cards, conveniently numbered $1 \\ldots 2N$, and divide them into $N$ cards for Bessie and $N$ cards for Elsie. The two then play $N$ rounds, where in each round Bessie and Elsie both play a single card. Initially, the player who plays the highest card earns a point. However, at one point  during the game, Bessie can decide to switch the rules so that for the rest of the game, the player who plays the lowest card wins a point.  Bessie can choose not to use this option, leaving the entire game in \"high card wins\" mode, or she can even invoke the option right away, making the entire game follow the \"low card wins\" rule.\n\nGiven that Bessie can predict the order in which Elsie will play her cards, please determine the maximum number of points Bessie can win.", "inputFormat": "The first line of input contains the value of N ($2 \\leq N \\leq 50,000$).\n\nThe next N lines contain the cards that Elsie will play in each of the successive rounds of the game.  Note that it is easy to determine Bessie's cards from this information.", "outputFormat": "Output a single line giving the maximum number of points Bessie can score.\n", "hint": "Here, Bessie must have cards 2, 5, and 6, and 7 in her hand, and she can use these to win at most 3 points.  For example, she can defeat the 1 card and then switch the rules to \"low card wins\", after which she can win two more rounds.", "locale": "en", "translations": {"en": {"title": "[USACO15DEC] High Card Low Card P", "background": "", "description": "Bessie the cow is a hu e fan of card games, which is quite surprising, given her lack of opposable thumbs. Unfortunately, none of the other cows in the herd are good opponents. They are so bad, in fact, that they always play in a completely predictable fashion! Nonetheless, it can still be a challenge for Bessie to figure out how to win.\n\nBessie and her friend Elsie are currently playing a simple card game where they take a deck of $2N$ cards, conveniently numbered $1 \\ldots 2N$, and divide them into $N$ cards for Bessie and $N$ cards for Elsie. The two then play $N$ rounds, where in each round Bessie and Elsie both play a single card. Initially, the player who plays the highest card earns a point. However, at one point  during the game, Bessie can decide to switch the rules so that for the rest of the game, the player who plays the lowest card wins a point.  Bessie can choose not to use this option, leaving the entire game in \"high card wins\" mode, or she can even invoke the option right away, making the entire game follow the \"low card wins\" rule.\n\nGiven that Bessie can predict the order in which Elsie will play her cards, please determine the maximum number of points Bessie can win.", "inputFormat": "The first line of input contains the value of N ($2 \\leq N \\leq 50,000$).\n\nThe next N lines contain the cards that Elsie will play in each of the successive rounds of the game.  Note that it is easy to determine Bessie's cards from this information.", "outputFormat": "Output a single line giving the maximum number of points Bessie can score.\n", "hint": "Here, Bessie must have cards 2, 5, and 6, and 7 in her hand, and she can use these to win at most 3 points.  For example, she can defeat the 1 card and then switch the rules to \"low card wins\", after which she can win two more rounds.", "locale": "en"}, "zh-CN": {"title": "[USACO15DEC] High Card Low Card P", "background": "", "description": "奶牛 Bessie 是卡牌游戏的狂热爱好者，这相当令人惊讶，因为她没有灵活的手指。不幸的是，牛群中的其他奶牛都不是好的对手。事实上，她们的表现非常糟糕，总是以完全可预测的方式出牌！尽管如此，对 Bessie 来说，如何获胜仍然是一个挑战。\n\nBessie 和她的朋友 Elsie 正在玩一个简单的卡牌游戏。她们拿一副 $2N$ 张牌，方便地编号为 $1 \\ldots 2N$，并将其分成 $N$ 张牌给 Bessie 和 $N$ 张牌给 Elsie。然后，两人进行 $N$ 轮游戏，每轮 Bessie 和 Elsie 各打出一张牌。最初，打出更高牌的玩家得一分。然而，在游戏中的某个时刻，Bessie 可以决定改变规则，使得在接下来的游戏中，打出更低牌的玩家得一分。Bessie 可以选择不使用这个选项，让整个游戏保持在“高牌获胜”模式，或者她也可以立即启用这个选项，让整个游戏遵循“低牌获胜”的规则。\n\n已知 Bessie 可以预测 Elsie 出牌的顺序，请确定 Bessie 可以获得的最大分数。", "inputFormat": "输入的第一行包含 $N$ 的值（$2 \\leq N \\leq 50,000$）。\n\n接下来的 $N$ 行包含 Elsie 在游戏每轮中将要打出的牌。注意，从这些信息中可以很容易地确定 Bessie 手中的牌。", "outputFormat": "输出一行，表示 Bessie 可以获得的最大分数。", "hint": "在这里，Bessie 手中的牌必须是 2、5、6 和 7，她最多可以利用这些牌赢得 3 分。例如，她可以先击败 1 这张牌，然后将规则切换为“低牌获胜”，之后她可以再赢得两轮。", "locale": "zh-CN"}}}
{"pid": "P3130", "type": "P", "difficulty": 4, "samples": [["4 5\n3 1 2 4\nM 3 4\nS 1 3\nP 2 3 1\nM 3 4\nS 1 3", "2\n6\n3\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2015", "线段树", "USACO"], "title": "[USACO15DEC] Counting Haybale P", "background": "", "description": "Farmer John is trying to hire contractors to help rearrange his farm, but so far all of them have quit when they saw the complicated sequence of instructions FJ wanted them to follow.  Left to complete the project by himself, he realizes that indeed, he has made the project perhaps more  complicated than necessary.  Please help him follow his instructions to  complete the farm upgrade.\n\nFJ's farm consists of $N$ fields in a row, conveniently numbered $1 \\ldots N$. In each field there can be any number of haybales.  Farmer John's instructions contain three types of entries:\n\n1) Given a contiguous interval of fields, add a new haybale to each field.\n\n2) Given a contiguous interval of fields, determine the minimum number of haybales in a field within that interval.\n\n3) Given a contiguous interval of fields, count the total number of haybales  inside that interval.", "inputFormat": "The first line contains two positive integers, $N$ ($1 \\leq N \\leq 200,000$) and $Q$ ($1 \\leq Q \\leq 100,000$).\n\nThe next line contains $N$ nonnegative integers, each at most 100,000, indicating how many haybales are initially in each field.\n\nEach of the next $Q$ lines contains a single uppercase letter, either M, P or S, followed by either two positive integers $A$ and $B$ ($1 \\leq A \\leq B \\leq N$), or three positive integers $A$, $B$, and $C$ ($1 \\leq A \\leq B \\leq N$; $1 \\leq C \\leq 100,000$).  There will be three positive integers if and only if the uppercase letter is P.\n\nIf the letter is M, print the minimum number of haybales in the interval of fields from $A \\ldots B$.\n\nIf the letter is P, put $C$ new haybales in each field in the interval of fields from $A \\ldots B$.\n\nIf the letter is S, print the total number of haybales found within interval of fields from $A \\ldots B$.", "outputFormat": "A line in the output should appear in response to every 'M' or 'S' entry in FJ's instructions.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO15DEC] Counting Haybale P", "background": "", "description": "Farmer John is trying to hire contractors to help rearrange his farm, but so far all of them have quit when they saw the complicated sequence of instructions FJ wanted them to follow.  Left to complete the project by himself, he realizes that indeed, he has made the project perhaps more  complicated than necessary.  Please help him follow his instructions to  complete the farm upgrade.\n\nFJ's farm consists of $N$ fields in a row, conveniently numbered $1 \\ldots N$. In each field there can be any number of haybales.  Farmer John's instructions contain three types of entries:\n\n1) Given a contiguous interval of fields, add a new haybale to each field.\n\n2) Given a contiguous interval of fields, determine the minimum number of haybales in a field within that interval.\n\n3) Given a contiguous interval of fields, count the total number of haybales  inside that interval.", "inputFormat": "The first line contains two positive integers, $N$ ($1 \\leq N \\leq 200,000$) and $Q$ ($1 \\leq Q \\leq 100,000$).\n\nThe next line contains $N$ nonnegative integers, each at most 100,000, indicating how many haybales are initially in each field.\n\nEach of the next $Q$ lines contains a single uppercase letter, either M, P or S, followed by either two positive integers $A$ and $B$ ($1 \\leq A \\leq B \\leq N$), or three positive integers $A$, $B$, and $C$ ($1 \\leq A \\leq B \\leq N$; $1 \\leq C \\leq 100,000$).  There will be three positive integers if and only if the uppercase letter is P.\n\nIf the letter is M, print the minimum number of haybales in the interval of fields from $A \\ldots B$.\n\nIf the letter is P, put $C$ new haybales in each field in the interval of fields from $A \\ldots B$.\n\nIf the letter is S, print the total number of haybales found within interval of fields from $A \\ldots B$.", "outputFormat": "A line in the output should appear in response to every 'M' or 'S' entry in FJ's instructions.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO15DEC] Counting Haybale P", "background": null, "description": "Farmer John 正在尝试雇佣承包商来帮助他重新安排农场，但到目前为止，所有承包商在看到 FJ 希望他们遵循的复杂指令序列后都辞职了。FJ 不得不自己完成这个项目，他意识到自己可能把项目搞得比必要的还要复杂。请帮助他按照指令完成农场的升级。\n\nFJ 的农场由一排 $N$ 个田地组成，编号为 $1 \\ldots N$。每个田地里可以有任意数量的干草堆。Farmer John 的指令包含三种类型的条目：\n\n1) 给定一个连续的田地区间，向每个田地添加 $C$ 个新的干草堆。\n\n2) 给定一个连续的田地区间，确定该区间内田地中干草堆的最小数量。\n\n3) 给定一个连续的田地区间，计算该区间内干草堆的总数。", "inputFormat": "第一行包含两个正整数，$N$（$1 \\leq N \\leq 200,000$）和 $Q$（$1 \\leq Q \\leq 100,000$）。\n\n第二行包含 $N$ 个非负整数，每个整数最多为 $100,000$，表示每个田地中初始的干草堆数量。\n\n接下来的 $Q$ 行每行包含一个大写字母，可能是 M、P 或 S，后跟两个正整数 $A$ 和 $B$（$1 \\leq A \\leq B \\leq N$），或者三个正整数 $A$、$B$ 和 $C$（$1 \\leq A \\leq B \\leq N$；$1 \\leq C \\leq 100,000$）。只有当大写字母是 P 时，才会有三个正整数。\n\n如果字母是 M，输出从 $A \\ldots B$ 的田地区间内干草堆的最小数量。\n\n如果字母是 P，向从 $A \\ldots B$ 的田地区间内的每个田地添加 $C$ 个新的干草堆。\n\n如果字母是 S，输出从 $A \\ldots B$ 的田地区间内干草堆的总数。", "outputFormat": "对于 FJ 指令中的每一个 'M' 或 'S' 条目，输出一行相应的结果。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P3131", "type": "P", "difficulty": 2, "samples": [["7\n3\n5\n1\n6\n2\n14\n10", "5"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "USACO", "前缀和"], "title": "[USACO16JAN] Subsequences Summing to Sevens S", "background": "", "description": "Farmer John's $N$ cows are standing in a row, as they have a tendency to do from time to time.  Each cow is labeled with a distinct integer ID number so FJ can tell them apart. FJ would like to take a photo of a contiguous group of cows but, due to a traumatic  childhood incident involving the numbers $1 \\ldots 6$, he only wants to take a picture of a group of cows if their IDs add up to a multiple of 7.\n\nPlease help FJ determine the size of the largest group he can photograph.", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 50,000$).  The next $N$ lines each contain the $N$ integer IDs of the cows (all are in the range $0 \\ldots 1,000,000$).\n", "outputFormat": "Please output the number of cows in the largest consecutive group whose IDs sum to a multiple of 7. If no such group exists, output 0.", "hint": "In this example, $5+1+6+2+14 = 28$.", "locale": "en", "translations": {"en": {"title": "[USACO16JAN] Subsequences Summing to Sevens S", "background": "", "description": "Farmer John's $N$ cows are standing in a row, as they have a tendency to do from time to time.  Each cow is labeled with a distinct integer ID number so FJ can tell them apart. FJ would like to take a photo of a contiguous group of cows but, due to a traumatic  childhood incident involving the numbers $1 \\ldots 6$, he only wants to take a picture of a group of cows if their IDs add up to a multiple of 7.\n\nPlease help FJ determine the size of the largest group he can photograph.", "inputFormat": "The first line of input contains $N$ ($1 \\leq N \\leq 50,000$).  The next $N$ lines each contain the $N$ integer IDs of the cows (all are in the range $0 \\ldots 1,000,000$).\n", "outputFormat": "Please output the number of cows in the largest consecutive group whose IDs sum to a multiple of 7. If no such group exists, output 0.", "hint": "In this example, $5+1+6+2+14 = 28$.", "locale": "en"}, "zh-CN": {"title": "[USACO16JAN] Subsequences Summing to Sevens S", "background": "", "description": "Farmer John 的 $N$ 头奶牛站成一排，这是它们时不时会做的事情。每头奶牛都有一个独特的整数 ID 编号，以便 Farmer John 能够区分它们。Farmer John 希望为一组连续的奶牛拍照，但由于童年时与数字 $1 \\ldots 6$ 相关的创伤事件，他只希望拍摄一组奶牛，如果它们的 ID 加起来是 7 的倍数。\n\n请帮助 Farmer John 确定他可以拍摄的最大奶牛组的大小。", "inputFormat": "输入的第一行包含 $N$（$1 \\leq N \\leq 50,000$）。接下来的 $N$ 行每行包含一头奶牛的整数 ID（所有 ID 都在 $0 \\ldots 1,000,000$ 范围内）。", "outputFormat": "请输出 ID 之和为 7 的倍数的最大连续奶牛组中的奶牛数量。如果不存在这样的组，则输出 0。", "hint": "在这个例子中，$5+1+6+2+14 = 28$。", "locale": "zh-CN"}}}
{"pid": "P3132", "type": "P", "difficulty": 5, "samples": [["5\n8\n10\n3\n11\n1", "3.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "2016", "二分", "USACO", "单调队列"], "title": "[USACO16JAN] Angry Cows G", "background": "", "description": "Bessie the cow has designed what she thinks will be the next big hit video game: \"Angry Cows\".  The premise,  which she believes is completely original, is that the player shoots a cow with a slingshot  into a one-dimensional scene consisting of a set of hay bales located at various points on a number line; the cow lands with sufficient force to detonate the hay bales in close proximity to her landing site, which in turn might set of a chain reaction that causes additional hay bales to explode.  The goal is to use a single cow to start a chain reaction that detonates all the hay bales.\n\nThere are $N$ hay bales located at distinct integer positions $x_1, x_2, \\ldots, x_N$ on the number line.  If a cow is launched with power $R$ landing at position $x$, this will causes a blast of \"radius $R$\", engulfing all hay bales within the range $x-R \\ldots x+R$.  These hay bales then themselves explode (all simultaneously), each with a blast radius of $R-1$.  Any not-yet-exploded bales caught in these blasts then all explode (all simultaneously) with blast radius $R-2$, and so on.\n\nPlease determine the minimum amount of power $R$ with which a single cow may be launched so that, if it lands at an appropriate location, it will cause subsequent detonation of every single hay bale in the scene.", "inputFormat": "The first line of input contains $N$ ($2 \\leq N \\leq 50,000$).  The remaining\n\n$N$ lines all  contain integers $x_1 \\ldots x_N$ (each in the range $0 \\ldots 1,000,000,000$).\n", "outputFormat": "Please output the minimum power $R$ with which a cow must be launched in order to detonate all the hay bales.  Answers should be rounded and printed to exactly 1 decimal point.\n", "hint": "In this example, a cow launched with power 3 at, say, location 5, will cause immediate detonation of  hay bales at positions 3 and 8. These then explode (simultaneously) each with blast radius 2, engulfing bales at positions 1 and 10, which next explode (simultaneously) with blast radius 1, engulfing the final bale at position 11, which finally explodes with blast radius 0.", "locale": "en", "translations": {"en": {"title": "[USACO16JAN] Angry Cows G", "background": "", "description": "Bessie the cow has designed what she thinks will be the next big hit video game: \"Angry Cows\".  The premise,  which she believes is completely original, is that the player shoots a cow with a slingshot  into a one-dimensional scene consisting of a set of hay bales located at various points on a number line; the cow lands with sufficient force to detonate the hay bales in close proximity to her landing site, which in turn might set of a chain reaction that causes additional hay bales to explode.  The goal is to use a single cow to start a chain reaction that detonates all the hay bales.\n\nThere are $N$ hay bales located at distinct integer positions $x_1, x_2, \\ldots, x_N$ on the number line.  If a cow is launched with power $R$ landing at position $x$, this will causes a blast of \"radius $R$\", engulfing all hay bales within the range $x-R \\ldots x+R$.  These hay bales then themselves explode (all simultaneously), each with a blast radius of $R-1$.  Any not-yet-exploded bales caught in these blasts then all explode (all simultaneously) with blast radius $R-2$, and so on.\n\nPlease determine the minimum amount of power $R$ with which a single cow may be launched so that, if it lands at an appropriate location, it will cause subsequent detonation of every single hay bale in the scene.", "inputFormat": "The first line of input contains $N$ ($2 \\leq N \\leq 50,000$).  The remaining\n\n$N$ lines all  contain integers $x_1 \\ldots x_N$ (each in the range $0 \\ldots 1,000,000,000$).\n", "outputFormat": "Please output the minimum power $R$ with which a cow must be launched in order to detonate all the hay bales.  Answers should be rounded and printed to exactly 1 decimal point.\n", "hint": "In this example, a cow launched with power 3 at, say, location 5, will cause immediate detonation of  hay bales at positions 3 and 8. These then explode (simultaneously) each with blast radius 2, engulfing bales at positions 1 and 10, which next explode (simultaneously) with blast radius 1, engulfing the final bale at position 11, which finally explodes with blast radius 0.", "locale": "en"}, "zh-CN": {"title": "[USACO16JAN] Angry Cows G", "background": "", "description": "奶牛 Bessie 设计了一款她认为将成为下一个热门视频游戏的游戏：“愤怒的奶牛”。她认为这个游戏的设定是完全原创的：玩家用弹弓将一头奶牛射入一个一维场景中，场景由数轴上不同位置的干草堆组成；奶牛以足够的力量落地，引爆她着陆点附近的干草堆，这可能会引发连锁反应，导致更多的干草堆爆炸。目标是用一头奶牛引发连锁反应，引爆所有干草堆。\n\n有 $N$ 个干草堆位于数轴上不同的整数位置 $x_1, x_2, \\ldots, x_N$。如果一头奶牛以威力 $R$ 被发射到位置 $x$，这将引发一个“半径为 $R$”的爆炸，吞噬 $x-R \\ldots x+R$ 范围内的所有干草堆。这些干草堆随后会同时爆炸，每个爆炸的半径为 $R-1$。任何尚未爆炸的干草堆如果被这些爆炸波及，则会同时爆炸，爆炸半径为 $R-2$，依此类推。\n\n请确定发射一头奶牛所需的最小威力 $R$，使得如果它落在适当的位置，将引发所有干草堆的爆炸。", "inputFormat": "输入的第一行包含 $N$（$2 \\leq N \\leq 50,000$）。接下来的 $N$ 行每行包含一个整数 $x_1 \\ldots x_N$（每个整数都在 $0 \\ldots 1,000,000,000$ 范围内）。", "outputFormat": "请输出发射奶牛所需的最小威力 $R$，以便引爆所有干草堆。答案应四舍五入并精确到小数点后一位。", "hint": "在这个例子中，一头奶牛以威力 $3$ 发射到位置 $5$，将立即引爆位置 $3$ 和 $8$ 的干草堆。这些干草堆随后同时爆炸，每个爆炸的半径为 $2$，吞噬位置 $1$ 和 $10$ 的干草堆，这些干草堆接下来同时爆炸，爆炸半径为 $1$，吞噬位置 $11$ 的最后一个干草堆，该干草堆最终以爆炸半径 $0$ 爆炸。", "locale": "zh-CN"}}}
{"pid": "P3133", "type": "P", "difficulty": 3, "samples": [["2 7\n3 0\n5 0\nNN\nNWWWWWN", "28"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2016", "USACO"], "title": "[USACO16JAN] Radio Contact G", "background": "", "description": "Farmer John has lost his favorite cow bell, and Bessie the cow has agreed to help him find it!  They both fan out and search the farm along different paths, but stay in contact via radio so they can keep in touch with each-other. Unfortunately, the batteries in their radios are running low, so they want to plan their movements so as to conserve power, by trying to stay always within a short distance apart.\n\nFarmer John starts at location ($f_x, f_y$) and plans to follow a path consisting of  $N$ steps, each of which is either 'N' (north), 'E' (east), 'S' (south), or 'W' west.  Bessie starts at location ($b_x, b_y$) and follows a similar path consisting of $M$ steps.  Both paths may share points in common.  At each time step, Farmer John can either stay put at his current location, or take one step forward along his path, in whichever direction happens to be next (assuming he has not yet reached the final location in his path). Bessie can make a similar choice.  At each time step (excluding the first step where they start at their initial locations), their radios consume energy equal to the square of the distance between them.\n\nPlease help FJ and Bessie plan a joint movement strategy  that will minimize the total amount of energy consumed up to and including the final step where both of them first reach the final locations on their respective paths.", "inputFormat": "The first line of input contains $N$ and $M$ ($1 \\leq N, M \\leq 1000$). The second line contains integers $f_x$ and $f_y$, and the third line contains $b_x$ and $b_y$ ($0 \\leq f_x, f_y, b_x, b_y \\leq 1000$). The next line contains a string of length $N$ describing FJ's path, and the final line contains a string of length $M$ describing Bessie's path.\n\nIt is guranteed that Farmer John and Bessie's coordinates are always in the range ($0 \\leq x,y \\leq 1000$) throughout their journey. Note that East points in the positive x direction and North points in the positive y direction.", "outputFormat": "Output a single integer specifying the minimum energy FJ and Bessie can use during their travels.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO16JAN] Radio Contact G", "background": "", "description": "Farmer John has lost his favorite cow bell, and Bessie the cow has agreed to help him find it!  They both fan out and search the farm along different paths, but stay in contact via radio so they can keep in touch with each-other. Unfortunately, the batteries in their radios are running low, so they want to plan their movements so as to conserve power, by trying to stay always within a short distance apart.\n\nFarmer John starts at location ($f_x, f_y$) and plans to follow a path consisting of  $N$ steps, each of which is either 'N' (north), 'E' (east), 'S' (south), or 'W' west.  Bessie starts at location ($b_x, b_y$) and follows a similar path consisting of $M$ steps.  Both paths may share points in common.  At each time step, Farmer John can either stay put at his current location, or take one step forward along his path, in whichever direction happens to be next (assuming he has not yet reached the final location in his path). Bessie can make a similar choice.  At each time step (excluding the first step where they start at their initial locations), their radios consume energy equal to the square of the distance between them.\n\nPlease help FJ and Bessie plan a joint movement strategy  that will minimize the total amount of energy consumed up to and including the final step where both of them first reach the final locations on their respective paths.", "inputFormat": "The first line of input contains $N$ and $M$ ($1 \\leq N, M \\leq 1000$). The second line contains integers $f_x$ and $f_y$, and the third line contains $b_x$ and $b_y$ ($0 \\leq f_x, f_y, b_x, b_y \\leq 1000$). The next line contains a string of length $N$ describing FJ's path, and the final line contains a string of length $M$ describing Bessie's path.\n\nIt is guranteed that Farmer John and Bessie's coordinates are always in the range ($0 \\leq x,y \\leq 1000$) throughout their journey. Note that East points in the positive x direction and North points in the positive y direction.", "outputFormat": "Output a single integer specifying the minimum energy FJ and Bessie can use during their travels.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO16JAN] Radio Contact G", "background": "", "description": "FJ 失去了他最喜欢的牛铃，而 Bessie 已经同意帮助他找到它！他们用不同的路径搜索农场，通过无线电保持联系。\n\n不幸的是，无线电中的电池电量不足，所以他们设法尽可能保持两者位置的距离最小，以节省电量。\n\nFJ 从位置$(f_x,f_y)$ 开始，并计划遵循由 $N$ 步组成的路径.Bessie 从位置 $(b_x,b_y)$ 开始，并遵循由 $M$ 步组成的路径。每个步骤都是 `N`（北），`E`（东），`S`（南），或`W`（西）。其中，东方向为 $x$ 轴正方向，北方向为 $y$ 轴正方向。两个路径可以经过相同的点。\n\n在每个时间段，FJ 可以不移动，也可以沿着他的道路前进一步。无论哪个方向恰好在下一个（假设他还没有到达他的路径的最后位置）。Bessie 可以做出类似的选择。\n\n在每个时间点（不包括从初始位置开始的第一步），他们的无线电消耗的能量等于它们之间距离的平方。\n\n请帮助 FJ 和 Bessie 计划行动策略，使双方达到各自终点时，最大限度地减少消耗的能量总量。输出所消耗的最小的能量。", "inputFormat": "第一行两个整数 $N$ 和 $M$ $(1\\le N,M\\le 1000)$。\n\n第二行两个整数 $f_x$ 和 $f_y$。\n\n第三行两个整数 $b_x$ 和 $b_y$ $(0\\le f_x,f_y,b_x,b_y\\le 1000)$。\n\n下一行为一个长度为 $N$ 的字符串，描述 FJ 的路径。\n\n最后一行为一个长度 $M$ 的字符串，描述 Bessie 的路径。", "outputFormat": "共一行一个整数，表示最小能量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3134", "type": "P", "difficulty": 4, "samples": [["4\n0 0\n0 10\n1 10\n1 0", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "USACO", "哈希 hashing"], "title": "[USACO16JAN] Lights Out G", "background": "", "description": "Farmer John has installed a fancy new milking machine in his barn, but it draws so much power that it occasionally causes the power to go out! This happens so often that Bessie has memorized a map of the barn, making it easier for her to find the exit of the barn in the dark. She is curious though about the impact of power loss on her ability to exit the barn quickly. For example, she wonders how much farther she might need to walk find the exit in the dark.\n\n\nThe barn is described by a simple (non self-intersecting) polygon with integer  vertices $(x_1, y_1) \\ldots (x_n, y_n)$ listed in clockwise order.  Its edges alternate between horizontal (parallel to the x-axis) and vertical (parallel to the y-axis); the first edge can be of either type. The exit is located at\n\n$(x_1, y_1)$.  Bessie starts inside the barn located at some vertex  $(x_i, y_i)$ for $i > 1$.  She can walk only around the perimeter of the barn, either clockwise or counterclockwise, Her goal is to travel a minimum distance to reach the exit. This is relatively easy to do with the lights on, of course, since she will travel either  clockwise or counterclockwise from her current location to the  exit -- whichever direction is shorter.\n\n\nOne day, the lights go out, causing Bessie to panic and forget which vertex she is standing at.  Fortunately, she still remembers the exact map of the barn, so she can possibly figure out her position by walking around and using her sense of touch.  Whenever she is standing at a vertex (including at her initial vertex), she can feel the exact interior angle at that vertex, and she can tell if that vertex is the exit.  When she walks along an edge of the barn, she can determine the exact length of the edge after walking along the entire edge.  Bessie decides on the following strategy: she will move clockwise around the perimeter of the barn until she has felt enough angles and edges to deduce the vertex at which she is currently located.  At that point, she can easily figure out how to get to the exit by traveling a minimum amount of remaining distance, either by continuing to move clockwise or by switching direction and moving counter-clockwise.\n\n\nPlease help Bessie determine the largest amount by which her travel distance will increase in the worst case (over all possibilities for her starting vertex) for travel in the dark versus in a lit barn.\n", "inputFormat": "The first line of the input contains $N$ ($4 \\leq N \\leq 200$).  Each of the next $N$ lines contains two integers, describing the points $(x_i, y_i)$ in clockwise order around the barn.  These integers are in the range $-100,000 \\ldots 100,000$.\n", "outputFormat": "Output the largest amount that Bessie's travel distance will increase in the\n\nworst case starting position using the strategy in the problem statement.\n", "hint": "In this example, Bessie can feel that she is initially standing at a 90-degree angle, but she cannot tell if she is initially standing at vertex 2, 3, or 4.\n\nAfter taking a step along one edge in the clockwise direction, Bessie either reaches the exit or can uniquely determine her location based on the length of this edge. The distances she obtains are:\n\nIf starting at vertex 2: she travels 12 units in the dark (1 unit to reach vertex 3, then 11 units to continue to the exit). She only needs to travel 10 units in a lit barn. This is an extra distance of 2 for this vertex.\n\nIf starting at vertex 3: she travels 11 units in both cases.\n\nIf starting at vertex 4: she travels 1 unit in both cases.\n\nThe worst-case difference over all starting points is therefore 12 - 10 = 2.  That is, Bessie can guarantee that using her strategy, no matter where she starts, she will travel at most 2 extra units of distance farther in the dark than in the light.\n", "locale": "en", "translations": {"en": {"title": "[USACO16JAN] Lights Out G", "background": "", "description": "Farmer John has installed a fancy new milking machine in his barn, but it draws so much power that it occasionally causes the power to go out! This happens so often that Bessie has memorized a map of the barn, making it easier for her to find the exit of the barn in the dark. She is curious though about the impact of power loss on her ability to exit the barn quickly. For example, she wonders how much farther she might need to walk find the exit in the dark.\n\n\nThe barn is described by a simple (non self-intersecting) polygon with integer  vertices $(x_1, y_1) \\ldots (x_n, y_n)$ listed in clockwise order.  Its edges alternate between horizontal (parallel to the x-axis) and vertical (parallel to the y-axis); the first edge can be of either type. The exit is located at\n\n$(x_1, y_1)$.  Bessie starts inside the barn located at some vertex  $(x_i, y_i)$ for $i > 1$.  She can walk only around the perimeter of the barn, either clockwise or counterclockwise, Her goal is to travel a minimum distance to reach the exit. This is relatively easy to do with the lights on, of course, since she will travel either  clockwise or counterclockwise from her current location to the  exit -- whichever direction is shorter.\n\n\nOne day, the lights go out, causing Bessie to panic and forget which vertex she is standing at.  Fortunately, she still remembers the exact map of the barn, so she can possibly figure out her position by walking around and using her sense of touch.  Whenever she is standing at a vertex (including at her initial vertex), she can feel the exact interior angle at that vertex, and she can tell if that vertex is the exit.  When she walks along an edge of the barn, she can determine the exact length of the edge after walking along the entire edge.  Bessie decides on the following strategy: she will move clockwise around the perimeter of the barn until she has felt enough angles and edges to deduce the vertex at which she is currently located.  At that point, she can easily figure out how to get to the exit by traveling a minimum amount of remaining distance, either by continuing to move clockwise or by switching direction and moving counter-clockwise.\n\n\nPlease help Bessie determine the largest amount by which her travel distance will increase in the worst case (over all possibilities for her starting vertex) for travel in the dark versus in a lit barn.\n", "inputFormat": "The first line of the input contains $N$ ($4 \\leq N \\leq 200$).  Each of the next $N$ lines contains two integers, describing the points $(x_i, y_i)$ in clockwise order around the barn.  These integers are in the range $-100,000 \\ldots 100,000$.\n", "outputFormat": "Output the largest amount that Bessie's travel distance will increase in the\n\nworst case starting position using the strategy in the problem statement.\n", "hint": "In this example, Bessie can feel that she is initially standing at a 90-degree angle, but she cannot tell if she is initially standing at vertex 2, 3, or 4.\n\nAfter taking a step along one edge in the clockwise direction, Bessie either reaches the exit or can uniquely determine her location based on the length of this edge. The distances she obtains are:\n\nIf starting at vertex 2: she travels 12 units in the dark (1 unit to reach vertex 3, then 11 units to continue to the exit). She only needs to travel 10 units in a lit barn. This is an extra distance of 2 for this vertex.\n\nIf starting at vertex 3: she travels 11 units in both cases.\n\nIf starting at vertex 4: she travels 1 unit in both cases.\n\nThe worst-case difference over all starting points is therefore 12 - 10 = 2.  That is, Bessie can guarantee that using her strategy, no matter where she starts, she will travel at most 2 extra units of distance farther in the dark than in the light.\n", "locale": "en"}, "zh-CN": {"title": "[USACO16JAN] Lights Out G", "background": "", "description": "Farmer John 在他的谷仓里安装了一个非常不错的新挤奶机，但是这台挤奶机耗电太多了，有时候会让谷仓直接停电！这种事发生的太频繁了，以至于 Bessie 直接把谷仓的地图背过了，以便于可以在黑暗中找到谷仓的出口。她对于停电对于她快速离开谷仓的能力的影响非常好奇。比如说，她想知道她在黑暗中需要走多远来找到谷仓的出口。\n\n谷仓里的路可以被描述为是一个简单的用几个顶点来表示的多边形，这些顶点可以按照顺时针被表示为 $(x_1, y_1) \\cdots (x_n, y_n)$（保证这些顶点连成的线没有交叉的情况）。这些点构成的边在水平轴（平行于 $x$ 轴）和竖直轴（平行于 $y$ 轴）之间交替出现。第一条边可以是任意一种类型。谷仓出口在坐标 $(x_1, y_1)$ 。Bessie 从谷仓内任意一个点 $(x_i, y_i)$ 开始走。她只可以沿着这些边走，要不然是顺时针，要不然就是逆时针，她的目标就是以最短距离抵达出口。当然，如果灯亮着的话这个事还算相对简单，因为她要不然顺时针要不然逆时针走，无所谓哪个方向的路程更短一点。\n\n一天，谷仓突然停电了，导致 Bessie 受到惊吓、忘记了她站在哪个顶点。幸亏她还记得谷仓的准确地图，所以她可以四处走走，用她的触觉来弄清楚她的位置。不管什么时候，只要她站在一个顶点，那么她就可以感受到她在这个点的朝向角度，弄清楚这个点是不是出口。当她沿着谷仓的一个边走完的时候，她可以算出精确的边长。Bessie 决定用这么一个策略：她会顺时针沿着谷仓周围的边走，直到她知道了足够的角度和边、可以推断出她目前在的是哪个顶点。在那个顶点，她就可以轻易地弄清楚怎样以最短距离到达出口（要不然继续沿着顺时针走，要不然倒回去沿着逆时针走）。\n\n请帮助 Bessie 算出在起点可以是任何一个顶点情况下，在最坏的情况下，她在黑暗中和亮着灯的时候到达出口的距离的差值（即找到差值的最大值）。", "inputFormat": "第一行包括一个数字 $N (4 \\leqslant N \\leqslant 200)$ ，接下来 $N$ 行，每行包括两个数字，沿着顺时针表示顶点 $(x_i, y_i)$，$x_i, y_i \\in [-10^5, 10^5]$ 。", "outputFormat": "输出 Bessie 在最坏的情况下，她在黑暗中和亮着灯的时候到达出口的距离的差值（即找到差值的最大值）。", "hint": "在这个样例中，Bessie 开始可以感觉到她沿着 $90 \\degree$ 角站着，但是她辨别不出来她是在 $2, 3, 4$ 中的哪一个顶点。\n\n在走了一条边以后，Bessie 要不然到了出口要不然就可以根据她走过的距离推断出她的位置。情况如下：\n\n如果她从 $2$ 号点开始走，她需要在黑暗中走 $12$ 个单位，包括一个单位到达第三个点、十一个单位离开谷仓。同时，如果亮着灯，她可以只走 $10$ 个单位就离开谷仓。差值是 $2$ 。\n\n如果从 $3$ 号点开始，她两种情况都要走 $11$ 个单位。\n\n如果从 $4$ 号点开始，她两种情况都要走 $1$ 个单位。\n\n所以最坏情况差值是 $2$ 。", "locale": "zh-CN"}}}
{"pid": "P3135", "type": "P", "difficulty": 3, "samples": [["5 6\n......\n..X..X\nX..X..\n......\n..X...", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2016", "USACO", "枚举"], "title": "[USACO16JAN] Fort Moo P", "background": "", "description": "Bessie is building a fort with her friend Elsie. Like any good fort, this one needs to start with a sturdy frame. Bessie wants to build a frame in the shape of a one-meter-wide rectangular outline, atop which she will build the fort.\n\nBessie has already chosen a site on which to build the fort -- a piece of land measuring $N$ meters by $M$ meters ($1 \\leq N, M \\leq 200$). Unfortunately, the  site has some swampy areas that cannot be used to support the frame.  Please help Bessie determine the largest area she can cover with her fort (the area of the rectangle supported by the frame), such that the frame avoids sitting on any of the swampy areas.", "inputFormat": "Line 1 contains integers $N$ and $M$.\n\nThe next $N$ lines each contain $M$ characters, forming a grid describing the site.  A character of '.' represents normal grass, while 'X' represents a swampy spot.", "outputFormat": "A single integer representing the maximum area that Bessie can cover with her fort.", "hint": "In the example, the placement of the optimal frame is indicated by 'f's below:\n\n```cpp\n.ffff.\n.fX.fX\nXf.Xf.\n.ffff.\n..X...\n```", "locale": "en", "translations": {"en": {"title": "[USACO16JAN] Fort Moo P", "background": "", "description": "Bessie is building a fort with her friend Elsie. Like any good fort, this one needs to start with a sturdy frame. Bessie wants to build a frame in the shape of a one-meter-wide rectangular outline, atop which she will build the fort.\n\nBessie has already chosen a site on which to build the fort -- a piece of land measuring $N$ meters by $M$ meters ($1 \\leq N, M \\leq 200$). Unfortunately, the  site has some swampy areas that cannot be used to support the frame.  Please help Bessie determine the largest area she can cover with her fort (the area of the rectangle supported by the frame), such that the frame avoids sitting on any of the swampy areas.", "inputFormat": "Line 1 contains integers $N$ and $M$.\n\nThe next $N$ lines each contain $M$ characters, forming a grid describing the site.  A character of '.' represents normal grass, while 'X' represents a swampy spot.", "outputFormat": "A single integer representing the maximum area that Bessie can cover with her fort.", "hint": "In the example, the placement of the optimal frame is indicated by 'f's below:\n\n```cpp\n.ffff.\n.fX.fX\nXf.Xf.\n.ffff.\n..X...\n```", "locale": "en"}, "zh-CN": {"title": "[USACO16JAN] Fort Moo P", "background": "", "description": "Bessie 正在和她的朋友 Elsie 一起建造一个堡垒。像任何好的堡垒一样，这个堡垒需要一个坚固的框架。Bessie 想要建造一个一米宽的矩形轮廓框架，然后在这个框架上建造堡垒。\n\nBessie 已经选择了一个建造堡垒的地点——一块 $N$ 米乘 $M$ 米的土地（$1 \\leq N, M \\leq 200$）。不幸的是，这块地有一些沼泽区域，不能用来支撑框架。请帮助 Bessie 确定她可以用堡垒覆盖的最大面积（由框架支撑的矩形的面积），使得框架不会坐落在任何沼泽区域上。", "inputFormat": "第 1 行包含整数 $N$ 和 $M$。\n\n接下来的 $N$ 行每行包含 $M$ 个字符，形成一个描述地点的网格。字符 '.' 表示普通草地，而 'X' 表示沼泽区域。", "outputFormat": "一个整数，表示 Bessie 可以用堡垒覆盖的最大面积。", "hint": "在示例中，最优框架的位置由下面的 `f` 表示：\n\n```\n.ffff.\n.fX.fX\nXf.Xf.\n.ffff.\n..X...\n```", "locale": "zh-CN"}}}
{"pid": "P3136", "type": "P", "difficulty": 5, "samples": [["7 4\n0 10\n10 10\n10 5\n3 5\n3 12\n6 12\n6 3", "1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "USACO", "cdq 分治"], "title": "[USACO16JAN] Mowing the Field P", "background": "", "description": "Farmer John is quite reliable in all aspects of managing his farm, except one: he is terrible at mowing the grass in a timely fashion.   He only manages to move the mowing machine once per day, in fact. On day 1, he starts at position $(x_1, y_1)$ and on day $d$ he mows along a straight segment to the position $(x_d, y_d)$, moving either horizontally or vertically on the 2D map of his farm; that is, either  $x_d = x_{d-1}$, or $y_d = y_{d-1}$.  FJ alternates between horizontal and vertical moves on successive days.\n\n\nSo slow is FJ's progress that some of the grass he mows might grow back before he is finished with all his mowing. Any section of grass that is cut in day $d$ will reappear on day $d + T$, so if FJ's mowing path crosses a path he cut at least $T$ days earlier, he will end up cutting grass at the same point again.  In an effort to try and reform his poor mowing strategy, FJ would like to count the number of times this happens.\n\nPlease count the number of times FJ's mowing path crosses over an earlier segment on which grass has already grown back.  You should only count \"perpendicular\" crossings, defined as a point in common between a horizontal and a vertical segment that is an endpoint of neither.", "inputFormat": "The first line of input contains $N$ ($2 \\leq N \\leq 100,000$) and $T$ ($1 \\leq T \\leq N$, $T$ even).\n\nThe next $N$ lines describe the position of the mower on days $1 \\ldots N$.  The $i$-th of these lines contains integers $x_i$ and $y_i$ (nonnegative integers each at most 1,000,000,000).\n", "outputFormat": "Please output a count of the number of crossing points described above, where FJ re-cuts a point of grass that had grown back after being cut earlier.\n", "hint": "Here, FJ crosses on day 7 a segment of grass he cut on day 2, which counts. The other intersections do not count.\n\nNote: This problem has expanded limits: 5 seconds per test case (10 for Python and Java), and 512 MB of memory.\n", "locale": "en", "translations": {"en": {"title": "[USACO16JAN] Mowing the Field P", "background": "", "description": "Farmer John is quite reliable in all aspects of managing his farm, except one: he is terrible at mowing the grass in a timely fashion.   He only manages to move the mowing machine once per day, in fact. On day 1, he starts at position $(x_1, y_1)$ and on day $d$ he mows along a straight segment to the position $(x_d, y_d)$, moving either horizontally or vertically on the 2D map of his farm; that is, either  $x_d = x_{d-1}$, or $y_d = y_{d-1}$.  FJ alternates between horizontal and vertical moves on successive days.\n\n\nSo slow is FJ's progress that some of the grass he mows might grow back before he is finished with all his mowing. Any section of grass that is cut in day $d$ will reappear on day $d + T$, so if FJ's mowing path crosses a path he cut at least $T$ days earlier, he will end up cutting grass at the same point again.  In an effort to try and reform his poor mowing strategy, FJ would like to count the number of times this happens.\n\nPlease count the number of times FJ's mowing path crosses over an earlier segment on which grass has already grown back.  You should only count \"perpendicular\" crossings, defined as a point in common between a horizontal and a vertical segment that is an endpoint of neither.", "inputFormat": "The first line of input contains $N$ ($2 \\leq N \\leq 100,000$) and $T$ ($1 \\leq T \\leq N$, $T$ even).\n\nThe next $N$ lines describe the position of the mower on days $1 \\ldots N$.  The $i$-th of these lines contains integers $x_i$ and $y_i$ (nonnegative integers each at most 1,000,000,000).\n", "outputFormat": "Please output a count of the number of crossing points described above, where FJ re-cuts a point of grass that had grown back after being cut earlier.\n", "hint": "Here, FJ crosses on day 7 a segment of grass he cut on day 2, which counts. The other intersections do not count.\n\nNote: This problem has expanded limits: 5 seconds per test case (10 for Python and Java), and 512 MB of memory.\n", "locale": "en"}, "zh-CN": {"title": "[USACO16JAN] Mowing the Field P", "background": null, "description": "Farmer John 在管理农场的各个方面都相当可靠，除了一件事：他非常不擅长及时修剪草地。事实上，他每天只能移动一次割草机。在第 1 天，他从位置 $(x_1, y_1)$ 开始，在第 $d$ 天，他沿着一条直线段移动到位置 $(x_d, y_d)$，在农场的二维地图上，他要么水平移动，要么垂直移动；也就是说，要么 $x_d = x_{d-1}$，要么 $y_d = y_{d-1}$。FJ 在连续的日子里交替进行水平和垂直移动。\n\nFJ 的进展非常缓慢，以至于在他完成所有修剪之前，一些被他修剪过的草可能会重新长出来。任何在第 $d$ 天被修剪的草会在第 $d + T$ 天重新长出来，因此如果 FJ 的修剪路径与至少 $T$ 天前修剪过的路径交叉，他将再次在同一位置修剪草地。为了尝试改进他糟糕的修剪策略，FJ 想要计算这种情况发生的次数。\n\n请计算 FJ 的修剪路径与之前已经重新长草的路径交叉的次数。你只需计算“垂直”交叉，定义为水平线段和垂直线段之间的共同点，且该点不是任何线段的端点。\n\n\n----------------------------\n\n### 形式化题意\n\n现给出 $n$ 个点，其中，第 $i$ 个点和第 $i+1$ 个点相连必定构成一条水平或竖直的线段，记为线段 $i$。显然线段 $i$ 必定与线段 $i+1$ 共用一个端点。\n\n额外保证线段 $i$ 必定与线段 $i+1$ 垂直。\n\n对于某条线段 $d$，你需要统计出线段 $1\\cdots d-T$ 中有多少条与线段 $d$ 相交且垂直，记为 $f_d$。\n\n输出 $ans$，其中 $ans=\\sum_{i=1}^{n-1} f_i$。", "inputFormat": "输入的第一行包含 $N$（$2 \\leq N \\leq 100,000$）和 $T$（$1 \\leq T \\leq N$，$T$ 为偶数）。\n\n接下来的 $N$ 行描述了割草机在第 $1$ 到第 $N$ 天的位置。第 $i$ 行包含整数 $x_i$ 和 $y_i$（每个为非负整数，且不超过 $1,000,000,000$）。", "outputFormat": "请输出上述交叉点的数量，即 FJ 重新修剪已经重新长草的点的次数。", "hint": "在这里，FJ 在第 7 天与他在第 2 天修剪的草地路径交叉，这算作一次。其他交叉点不算。\n\n注意：本题有扩展的限制：每个测试用例 5 秒（Python 和 Java 为 10 秒），内存限制为 512 MB。", "locale": "zh-CN"}}}
{"pid": "P3137", "type": "P", "difficulty": 4, "samples": [["10\n1\n0\n0\n2\n0\n0\n1\n2\n2\n2", "33"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2016", "USACO", "枚举"], "title": "[USACO16FEB] Circular Barn S", "background": "*本题与 [金组同名题目](/problem/P6170) 在题意上一致，唯一的差别是数据范围。*", "description": "作为当代建筑的爱好者，Farmer John 建造了一个圆形新谷仓，谷仓内部 $n$ 个房间排成环形（$3 \\leq n \\leq 1000$），按顺时针顺序编号为 $1\\ldots n$，每个房间都有通往与其相邻的左右房间的门，还有一扇门通往外面。\n\n现在 FJ 有 $n$ 头奶牛，他的目标是让每个房间恰好有一头奶牛。然而不幸的是，现在奶牛们随意呆在某个房间里，第 $i$ 个房间里有 $c_i$ 头奶牛。保证 $\\sum c_i =n$。\n\nFJ 决定采用这样的方法来解决这个问题：让某些奶牛**顺时针**穿过某些房间到达指定的位置。如果一头奶牛穿过了 $d$ 扇门，他消耗的能量为 $d^2$。你需要帮 FJ 算出所有奶牛消耗的能量和最小值是多少。", "inputFormat": "第一行一个整数 $n$，接下来 $n$ 行，第 $i$ 行一个整数 $c_i$。", "outputFormat": "输出所有奶牛最小消耗能量和。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO16FEB] Circular Barn S", "background": "*This problem has the same statement as the [problem with the same name in Gold](/problem/P6170); the only difference is the constraints.*", "description": "As an enthusiast of modern architecture, Farmer John built a new circular barn. Inside the barn, $n$ rooms are arranged in a ring ($3 \\leq n \\leq 1000$), numbered in clockwise order $1\\ldots n$. Each room has doors to its two adjacent rooms, as well as a door to the outside.\n\nFJ has $n$ cows, and his goal is to have exactly one cow in each room. Unfortunately, the cows are currently scattered arbitrarily: room $i$ contains $c_i$ cows. It is guaranteed that $\\sum c_i =n$.\n\nFJ decides to solve this by letting some cows move **clockwise** through rooms to their designated positions. If a cow passes through $d$ doors, it expends $d^2$ energy. You need to compute the minimal possible total energy expended by all cows.", "inputFormat": "The first line contains an integer $n$. The next $n$ lines each contain one integer $c_i$, where the $i$-th line contains $c_i$.", "outputFormat": "Output the minimal total energy expended by all cows.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO16FEB] Circular Barn S", "background": "*本题与 [金组同名题目](/problem/P6170) 在题意上一致，唯一的差别是数据范围。*", "description": "作为当代建筑的爱好者，Farmer John 建造了一个圆形新谷仓，谷仓内部 $n$ 个房间排成环形（$3 \\leq n \\leq 1000$），按顺时针顺序编号为 $1\\ldots n$，每个房间都有通往与其相邻的左右房间的门，还有一扇门通往外面。\n\n现在 FJ 有 $n$ 头奶牛，他的目标是让每个房间恰好有一头奶牛。然而不幸的是，现在奶牛们随意呆在某个房间里，第 $i$ 个房间里有 $c_i$ 头奶牛。保证 $\\sum c_i =n$。\n\nFJ 决定采用这样的方法来解决这个问题：让某些奶牛**顺时针**穿过某些房间到达指定的位置。如果一头奶牛穿过了 $d$ 扇门，他消耗的能量为 $d^2$。你需要帮 FJ 算出所有奶牛消耗的能量和最小值是多少。", "inputFormat": "第一行一个整数 $n$，接下来 $n$ 行，第 $i$ 行一个整数 $c_i$。", "outputFormat": "输出所有奶牛最小消耗能量和。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3138", "type": "P", "difficulty": 3, "samples": [["7\n7 3\n5 5\n7 13\n3 1\n11 7\n5 3\n9 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "线段树", "USACO", "枚举", "前缀和"], "title": "[USACO16FEB] Load Balancing S", "background": "*本题与 [白金组同名题目](/problem/P6172) 在题意上一致，唯一的差别是数据范围。*", "description": "Farmer John 的 $N$ 头奶牛（$1 \\leq N \\leq 1000$）散布在整个农场上。整个农场是一个无限大的二维平面，第 $i$ 头奶牛的坐标是 $(x_i,y_i)$（保证 $x_i,y_i$ 均为正奇数，且 $x_i,y_i \\leq 10^6$），且没有任意两头奶牛在同一位置上。\n\nFJ 希望修建一条竖直方向的栅栏，它的方程是 $x=a$，他还希望修建一条水平方向的栅栏，它的方程是 $y=b$。为了防止栅栏经过奶牛，$a,b$ 均要求是偶数。容易发现，这两个栅栏会在 $(a,b)$ 处相交，将整个农场分割为四个区域。\n\nFJ 希望这四个区域内的奶牛数量较为均衡，尽量避免一个区域奶牛多而另一个区域奶牛少的情况。令 $M$ 为四个区域里奶牛最多区域的奶牛数量，请帮 FJ 求出 $M$ 的最小值。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$，描述第 $i$ 头奶牛的位置。", "outputFormat": "输出 $M$ 的最小值。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO16FEB] Load Balancing S", "background": "*This problem has the same statement as the [problem with the same name in the Platinum division](/problem/P6172); the only difference is in the constraints.*", "description": "Farmer John has $N$ cows ($1 \\leq N \\leq 1000$) scattered across his farm. The farm is an infinite 2D plane, and the $i$-th cow is located at $(x_i, y_i)$ (it is guaranteed that $x_i$ and $y_i$ are positive odd integers, and $x_i, y_i \\leq 10^6$). No two cows are at the same position.\n\nFJ wants to build a vertical fence with equation $x = a$, and a horizontal fence with equation $y = b$. To ensure the fences do not pass through any cow, both $a$ and $b$ must be even. It is easy to see that these two fences intersect at $(a, b)$, partitioning the farm into four regions.\n\nFJ wants the number of cows in the four regions to be as balanced as possible, avoiding the situation where one region has many cows while another has few. Let $M$ be the maximum number of cows among the four regions. Please help FJ find the minimum possible value of $M$.", "inputFormat": "The first line contains an integer $N$.\n\nThe next $N$ lines each contain two integers $x_i, y_i$, describing the position of the $i$-th cow.", "outputFormat": "Output the minimum possible value of $M$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO16FEB] Load Balancing S", "background": "*本题与 [白金组同名题目](/problem/P6172) 在题意上一致，唯一的差别是数据范围。*", "description": "Farmer John 的 $N$ 头奶牛（$1 \\leq N \\leq 1000$）散布在整个农场上。整个农场是一个无限大的二维平面，第 $i$ 头奶牛的坐标是 $(x_i,y_i)$（保证 $x_i,y_i$ 均为正奇数，且 $x_i,y_i \\leq 10^6$），且没有任意两头奶牛在同一位置上。\n\nFJ 希望修建一条竖直方向的栅栏，它的方程是 $x=a$，他还希望修建一条水平方向的栅栏，它的方程是 $y=b$。为了防止栅栏经过奶牛，$a,b$ 均要求是偶数。容易发现，这两个栅栏会在 $(a,b)$ 处相交，将整个农场分割为四个区域。\n\nFJ 希望这四个区域内的奶牛数量较为均衡，尽量避免一个区域奶牛多而另一个区域奶牛少的情况。令 $M$ 为四个区域里奶牛最多区域的奶牛数量，请帮 FJ 求出 $M$ 的最小值。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$，描述第 $i$ 头奶牛的位置。", "outputFormat": "输出 $M$ 的最小值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3139", "type": "P", "difficulty": 3, "samples": [["14 50 2 32", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2016", "USACO", "剪枝", "记忆化搜索"], "title": "[USACO16FEB] Milk Pails S", "background": "", "description": "Farmer John has received an order for exactly $M$ units of milk ($1 \\leq M \\leq 200$) that he needs to fill right away.  Unfortunately, his fancy milking machine has just become broken, and all he has are two milk pails of integer sizes $X$ and $Y$ ($1 \\leq X, Y \\leq 100$) with which he can measure milk.  Both pails are initially empty.  Using these two pails, he can perform up to $K$ of the following types of operations ($1 \\leq K \\leq 100$):\n\n- He can fill either pail completely to the top.\n\n- He can empty either pail.\n\n- He can pour the contents of one pail into the other, stopping when the former becomes empty or the latter becomes full (whichever of these happens first).\n\nAlthough FJ realizes he may not be able to end up with exactly $M$ total units of milk in the two pails, please help him compute the minimum amount of error between $M$ and the total amount of milk in the two pails.  That is, please compute the minimum value of $|M-M'|$ such that FJ can construct $M'$ units of milk collectively between the two pails.", "inputFormat": "The first, and only line of input, contains $X$, $Y$, $K$, and $M$.\n", "outputFormat": "Output the smallest distance from $M$ to an amount of milk FJ can produce.\n", "hint": "In two steps FJ can be left with the following quanities in his pails\n\n\n```cpp\n(0, 0) = 0 units\n(14, 0) = 14 units\n(0, 50) = 50 units\n(0, 14) = 14 units\n(14, 36) = 50 units\n(14, 50) = 64 units\n```\n\nThe closest we can come to 32 units is 14 for a difference of 18.  Note that it would require an extra step to pour out the first pail to end up with (0, 36).\n", "locale": "en", "translations": {"en": {"title": "[USACO16FEB] Milk Pails S", "background": "", "description": "Farmer John has received an order for exactly $M$ units of milk ($1 \\leq M \\leq 200$) that he needs to fill right away.  Unfortunately, his fancy milking machine has just become broken, and all he has are two milk pails of integer sizes $X$ and $Y$ ($1 \\leq X, Y \\leq 100$) with which he can measure milk.  Both pails are initially empty.  Using these two pails, he can perform up to $K$ of the following types of operations ($1 \\leq K \\leq 100$):\n\n- He can fill either pail completely to the top.\n\n- He can empty either pail.\n\n- He can pour the contents of one pail into the other, stopping when the former becomes empty or the latter becomes full (whichever of these happens first).\n\nAlthough FJ realizes he may not be able to end up with exactly $M$ total units of milk in the two pails, please help him compute the minimum amount of error between $M$ and the total amount of milk in the two pails.  That is, please compute the minimum value of $|M-M'|$ such that FJ can construct $M'$ units of milk collectively between the two pails.", "inputFormat": "The first, and only line of input, contains $X$, $Y$, $K$, and $M$.\n", "outputFormat": "Output the smallest distance from $M$ to an amount of milk FJ can produce.\n", "hint": "In two steps FJ can be left with the following quanities in his pails\n\n\n```cpp\n(0, 0) = 0 units\n(14, 0) = 14 units\n(0, 50) = 50 units\n(0, 14) = 14 units\n(14, 36) = 50 units\n(14, 50) = 64 units\n```\n\nThe closest we can come to 32 units is 14 for a difference of 18.  Note that it would require an extra step to pour out the first pail to end up with (0, 36).\n", "locale": "en"}, "zh-CN": {"title": "[USACO16FEB] Milk Pails S", "background": "", "description": "Farmer John 接到了一份需要立即完成的订单，要求他提供恰好 $M$ 单位的牛奶（$1 \\leq M \\leq 200$）。不幸的是，他先进的挤奶机刚刚坏了，现在他只有两个容量为整数 $X$ 和 $Y$（$1 \\leq X, Y \\leq 100$）的牛奶桶可以用来量取牛奶。两个桶最初都是空的。使用这两个桶，他可以执行最多 $K$ 次以下类型的操作（$1 \\leq K \\leq 100$）：\n\n- 他可以将任意一个桶完全装满。\n\n- 他可以将任意一个桶完全倒空。\n\n- 他可以将一个桶中的牛奶倒入另一个桶，直到前者被倒空或后者被装满（以先发生的情况为准）。\n\n尽管 FJ 意识到他可能无法最终在两个桶中得到恰好 $M$ 单位的牛奶，但请帮助他计算 $M$ 与两个桶中牛奶总量之间的最小误差。也就是说，请计算 $|M-M'|$ 的最小值，其中 $M'$ 是 FJ 可以在两个桶中共同构造的牛奶量。", "inputFormat": "输入的第一行也是唯一一行包含 $X$、$Y$、$K$ 和 $M$。", "outputFormat": "输出 $M$ 与 FJ 可以生产的牛奶量之间的最小误差。", "hint": "在两步操作中，FJ 可以在他的桶中留下以下数量的牛奶：\n\n```\n(0, 0) = 0 单位  \n(14, 0) = 14 单位  \n(0, 50) = 50 单位  \n(0, 14) = 14 单位  \n(14, 36) = 50 单位  \n(14, 50) = 64 单位  \n```\n\n最接近 32 单位的是 14 单位，误差为 18。注意，要倒空第一个桶以得到 (0, 36) 需要额外的步骤。", "locale": "zh-CN"}}}
{"pid": "P3140", "type": "P", "difficulty": 4, "samples": [["6 2\n2\n5\n4\n2\n6\n2", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2016", "USACO"], "title": "[USACO16FEB] Circular Barn Revisited G", "background": "", "description": "After the last debacle involving Farmer John's circular barn, one would think he had learned his lesson about non-traditional architecture.  However, he thinks he can still make his circular barn (from the preceding problem) function properly by allowing multiple cows into each room.  To recap, the barn consists of a ring of $n$ rooms,  numbered clockwise from $1 \\ldots n$ around the perimeter of the barn ($3 \\leq n \\leq 100$).  Each room has doors to its two neighboring rooms, and also a door opening to the exterior of the barn.\n\nFarmer John wants exactly $r_i$ cows to end up in room $i$ ($1 \\leq r_i \\leq 1,000,000$). To herd the cows into the barn in an orderly fashion, he plans to unlock $k$ exterior doors ($1 \\leq k \\leq 7$), allowing the cows to enter through only those doors. Each cow then walks clockwise through the rooms until she reaches a suitable destination.  Farmer John wants to unlock the exterior doors that will cause his cows to collectively walk a minimum total amount of distance after entering the barn (they can initially line up however they like outside the $k$ unlocked doors; this does not contribute to the total distance in question).  Please determine the minimum total distance his cows will need to walk, if he chooses the best $k$ such doors to unlock.", "inputFormat": "The first line of input contains $n$ and $k$.  Each of the remaining $n$ lines contain $r_1 \\ldots r_n$.\n", "outputFormat": "Please write out the minimum amount of distance the cows need to travel.\n", "hint": "Farmer John can unlock doors 2 and 5.  11 cows enter at door 2 and walk a total distance of 8 to get to rooms 2, 3, and 4.  10 cows enter at door 5 and walk a total distance of 6 to get to rooms 5, 6 and 1.\n", "locale": "en", "translations": {"en": {"title": "[USACO16FEB] Circular Barn Revisited G", "background": "", "description": "After the last debacle involving Farmer John's circular barn, one would think he had learned his lesson about non-traditional architecture.  However, he thinks he can still make his circular barn (from the preceding problem) function properly by allowing multiple cows into each room.  To recap, the barn consists of a ring of $n$ rooms,  numbered clockwise from $1 \\ldots n$ around the perimeter of the barn ($3 \\leq n \\leq 100$).  Each room has doors to its two neighboring rooms, and also a door opening to the exterior of the barn.\n\nFarmer John wants exactly $r_i$ cows to end up in room $i$ ($1 \\leq r_i \\leq 1,000,000$). To herd the cows into the barn in an orderly fashion, he plans to unlock $k$ exterior doors ($1 \\leq k \\leq 7$), allowing the cows to enter through only those doors. Each cow then walks clockwise through the rooms until she reaches a suitable destination.  Farmer John wants to unlock the exterior doors that will cause his cows to collectively walk a minimum total amount of distance after entering the barn (they can initially line up however they like outside the $k$ unlocked doors; this does not contribute to the total distance in question).  Please determine the minimum total distance his cows will need to walk, if he chooses the best $k$ such doors to unlock.", "inputFormat": "The first line of input contains $n$ and $k$.  Each of the remaining $n$ lines contain $r_1 \\ldots r_n$.\n", "outputFormat": "Please write out the minimum amount of distance the cows need to travel.\n", "hint": "Farmer John can unlock doors 2 and 5.  11 cows enter at door 2 and walk a total distance of 8 to get to rooms 2, 3, and 4.  10 cows enter at door 5 and walk a total distance of 6 to get to rooms 5, 6 and 1.\n", "locale": "en"}, "zh-CN": {"title": "[USACO16FEB] Circular Barn Revisited G", "background": "", "description": "在上一次涉及 Farmer John 的圆形谷仓的惨败之后，人们可能会认为他已经吸取了关于非传统建筑的教训。然而，他认为通过允许每间房间进入多头奶牛，仍然可以让他那个圆形谷仓（来自之前的问题）正常运作。回顾一下，谷仓由 $n$ 个房间组成，这些房间顺时针编号为 $1 \\ldots n$，围绕谷仓的周边排列（$3 \\leq n \\leq 100$）。每个房间都有通往两个相邻房间的门，还有一扇门通向谷仓的外部。\n\nFarmer John 希望最终有恰好 $r_i$ 头奶牛进入房间 $i$（$1 \\leq r_i \\leq 1,000,000$）。为了让奶牛有序地进入谷仓，他计划解锁 $k$ 扇外部门（$1 \\leq k \\leq 7$），只允许奶牛通过这些门进入。每头奶牛随后顺时针穿过房间，直到到达合适的目的地。Farmer John 希望解锁那些能让他的奶牛在进入谷仓后总共行走的距离最小的外部门（它们最初可以在 $k$ 扇解锁的门外任意排列；这不会计入总距离）。请确定如果他选择最佳的 $k$ 扇门解锁，他的奶牛需要行走的最小总距离。", "inputFormat": "输入的第一行包含 $n$ 和 $k$。接下来的 $n$ 行每行包含 $r_1 \\ldots r_n$。", "outputFormat": "请输出奶牛需要行走的最小距离。", "hint": "Farmer John 可以解锁门 2 和门 5。11 头奶牛从门 2 进入，总共行走 8 的距离到达房间 2、3 和 4。10 头奶牛从门 5 进入，总共行走 6 的距离到达房间 5、6 和 1。", "locale": "zh-CN"}}}
{"pid": "P3141", "type": "P", "difficulty": 5, "samples": [["15 15 5 2\n2\n5\n10\n6\n4\n11\n3", "44"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2016", "USACO", "生成树"], "title": "[USACO16FEB] Fenced In P", "background": "*本题和 [金组同名题目](/problem/P6171) 在题意上一致，唯一的不同是数据范围。*", "description": "Farmer John 意识到他的奶牛最近患上了一种恐惧症（害怕过于开阔的空间）。为了减少放牧的恐惧，FJ 决定在牧场中建一些水平和竖直方向的栅栏来将牧场分成若干个小区域。\n\n整个牧场是一个矩形，两个角的坐标分别为 $(0,0)$ 和 $(A,B)$。FJ 在 $a_1,\\ldots ,a_n$ 这 $n$ 个两两不同的位置建造了竖直方向的栅栏，每个栅栏从 $(a_i,0)$ 到 $(a_i,B)$；FJ 在 $b_1,\\ldots ,b_m$ 这 $m$ 个两两不同的位置建造了水平方向的栅栏，每个栅栏从 $(0,b_i)$ 到 $(A,b_i)$。竖直方向的栅栏和水平方向的栅栏两两相交，将整个牧场分割成 $(n+1)(m+1)$ 个区域。\n\n不幸的是，FJ 忘记了在栅栏上开门，奶牛都只能被困在一个个的小区域里！他想通过去掉一些栅栏来解决这个问题。他一次可以选择两个相邻的区域，将隔离这两个区域的栅栏去掉。FJ 的目标是让奶牛能够抵达牧场的任意一个地方。\n\n这是一个例子：\n\n```plain\n+---+--+\n|   |  |\n+---+--+\n|   |  |\n|   |  |\n+---+--+\n```\n\n去掉一些栅栏后的效果是这样的：\n\n```plain\n+---+--+\n|      |\n+---+  +\n|      |\n|      |\n+---+--+\n```\n\n为了降低工程量，FJ 当然希望拆除的栅栏长度最短。", "inputFormat": "第一行四个整数 $A,B,n,m$，保证 $1 \\leq n,m \\leq 2.5 \\times 10^5$，$1 \\leq A,B \\leq 10^9$。\n\n接下来 $n$ 行，第 $i$ 行一个整数 $a_i$，保证 $0 \\lt a_i \\lt A$。\n\n接下来 $m$ 行，第 $i$ 行一个整数 $b_i$，保证 $0 \\lt b_i \\lt B$。", "outputFormat": "输出拆除栅栏的最小长度。**答案需要用 64 位带符号整数存储。**", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO16FEB] Fenced In P", "background": "This problem has the same statement as the problem with the same name in the Gold division (/problem/P6171); the only difference is the Constraints.", "description": "Farmer John has realized that his cows have recently developed a phobia of overly open spaces. To reduce their fear while grazing, FJ decides to build some horizontal and vertical fences in the pasture to divide it into smaller regions.\n\nThe entire pasture is a rectangle with corners at $(0, 0)$ and $(A, B)$. FJ builds vertical fences at $n$ distinct positions $a_1, \\ldots, a_n$, each from $(a_i, 0)$ to $(a_i, B)$; he builds horizontal fences at $m$ distinct positions $b_1, \\ldots, b_m$, each from $(0, b_i)$ to $(A, b_i)$. The vertical and horizontal fences intersect pairwise, dividing the entire pasture into $(n+1)(m+1)$ regions.\n\nUnfortunately, FJ forgot to add gates in the fences, so the cows are trapped in individual small regions. He can fix this by removing some fences. Each time, he can choose two adjacent regions and remove the fence that separates them. FJ’s goal is to allow the cows to reach any location in the pasture.\n\nHere is an example:\n\n```plain\n+---+--+\n|   |  |\n+---+--+\n|   |  |\n|   |  |\n+---+--+\n```\n\nAfter removing some fences:\n\n```plain\n+---+--+\n|      |\n+---+  +\n|      |\n|      |\n+---+--+\n```\n\nTo minimize the work, FJ wants the total length of removed fences to be as small as possible.", "inputFormat": "The first line contains four integers $A, B, n, m$, with $1 \\leq n, m \\leq 2.5 \\times 10^5$ and $1 \\leq A, B \\leq 10^9$.\n\nThe next $n$ lines each contain an integer $a_i$, with $0 \\lt a_i \\lt A$.\n\nThe next $m$ lines each contain an integer $b_i$, with $0 \\lt b_i \\lt B$.", "outputFormat": "Output the minimum total length of fences to remove. The answer needs to be stored in a 64-bit signed integer.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO16FEB] Fenced In P", "background": "*本题和 [金组同名题目](/problem/P6171) 在题意上一致，唯一的不同是数据范围。*", "description": "Farmer John 意识到他的奶牛最近患上了一种恐惧症（害怕过于开阔的空间）。为了减少放牧的恐惧，FJ 决定在牧场中建一些水平和竖直方向的栅栏来将牧场分成若干个小区域。\n\n整个牧场是一个矩形，两个角的坐标分别为 $(0,0)$ 和 $(A,B)$。FJ 在 $a_1,\\ldots ,a_n$ 这 $n$ 个两两不同的位置建造了竖直方向的栅栏，每个栅栏从 $(a_i,0)$ 到 $(a_i,B)$；FJ 在 $b_1,\\ldots ,b_m$ 这 $m$ 个两两不同的位置建造了水平方向的栅栏，每个栅栏从 $(0,b_i)$ 到 $(A,b_i)$。竖直方向的栅栏和水平方向的栅栏两两相交，将整个牧场分割成 $(n+1)(m+1)$ 个区域。\n\n不幸的是，FJ 忘记了在栅栏上开门，奶牛都只能被困在一个个的小区域里！他想通过去掉一些栅栏来解决这个问题。他一次可以选择两个相邻的区域，将隔离这两个区域的栅栏去掉。FJ 的目标是让奶牛能够抵达牧场的任意一个地方。\n\n这是一个例子：\n\n```plain\n+---+--+\n|   |  |\n+---+--+\n|   |  |\n|   |  |\n+---+--+\n```\n\n去掉一些栅栏后的效果是这样的：\n\n```plain\n+---+--+\n|      |\n+---+  +\n|      |\n|      |\n+---+--+\n```\n\n为了降低工程量，FJ 当然希望拆除的栅栏长度最短。", "inputFormat": "第一行四个整数 $A,B,n,m$，保证 $1 \\leq n,m \\leq 2.5 \\times 10^5$，$1 \\leq A,B \\leq 10^9$。\n\n接下来 $n$ 行，第 $i$ 行一个整数 $a_i$，保证 $0 \\lt a_i \\lt A$。\n\n接下来 $m$ 行，第 $i$ 行一个整数 $b_i$，保证 $0 \\lt b_i \\lt B$。", "outputFormat": "输出拆除栅栏的最小长度。**答案需要用 64 位带符号整数存储。**", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3142", "type": "P", "difficulty": 3, "samples": [["6\n1 1\n7 8\n10 9\n8 12\n4 100\n50 7", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "USACO", "枚举", "排序"], "title": "[USACO16OPEN] Field Reduction S", "background": "", "description": "Farmer John's $N$ cows ($5 \\leq N \\leq 50,000$) are all located at distinct positions in his two-dimensional field.  FJ wants to enclose all of the cows with a rectangular fence whose sides are parallel to the x and y axes, and he wants this fence to be as small as possible so that it contains every cow (cows on the boundary are allowed).\n\nFJ is unfortunately on a tight budget due to low milk production last quarter. He would therefore like to build an even smaller fenced enclosure if possible, and he is willing to sell up to three cows from his herd to make this possible.\n\nPlease help FJ compute the smallest possible area he can enclose with his fence after removing up to three cows from his herd (and thereafter building the tightest enclosing fence for the remaining cows).\n\nFor this problem, please treat cows as points and the fence as a collection of four line segments (i.e., don't think of the cows as \"unit squares\").  Note that the answer can be zero, for example if all remaining cows end up standing  in a common vertical or horizontal line.", "inputFormat": "The first line of input contains $N$.  The next $N$ lines each contain two integers specifying the location of a cow.  Cow locations are positive integers in the range $1 \\ldots 40,000$.\n", "outputFormat": "Write a single integer specifying the minimum area FJ can enclose with his fence after removing up to three carefully-chosen cows from his herd.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO16OPEN] Field Reduction S", "background": "", "description": "Farmer John's $N$ cows ($5 \\leq N \\leq 50,000$) are all located at distinct positions in his two-dimensional field.  FJ wants to enclose all of the cows with a rectangular fence whose sides are parallel to the x and y axes, and he wants this fence to be as small as possible so that it contains every cow (cows on the boundary are allowed).\n\nFJ is unfortunately on a tight budget due to low milk production last quarter. He would therefore like to build an even smaller fenced enclosure if possible, and he is willing to sell up to three cows from his herd to make this possible.\n\nPlease help FJ compute the smallest possible area he can enclose with his fence after removing up to three cows from his herd (and thereafter building the tightest enclosing fence for the remaining cows).\n\nFor this problem, please treat cows as points and the fence as a collection of four line segments (i.e., don't think of the cows as \"unit squares\").  Note that the answer can be zero, for example if all remaining cows end up standing  in a common vertical or horizontal line.", "inputFormat": "The first line of input contains $N$.  The next $N$ lines each contain two integers specifying the location of a cow.  Cow locations are positive integers in the range $1 \\ldots 40,000$.\n", "outputFormat": "Write a single integer specifying the minimum area FJ can enclose with his fence after removing up to three carefully-chosen cows from his herd.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO16OPEN] Field Reduction S", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$5 \\leq N \\leq 50,000$）都位于他二维牧场中的不同位置。FJ 希望用一个边平行于 $x$ 轴和 $y$ 轴的矩形围栏围住所有的奶牛，并且他希望这个围栏尽可能小，以便能够包含每头奶牛（允许奶牛位于边界上）。\n\n不幸的是，由于上个季度牛奶产量低，FJ 的预算非常紧张。因此，他希望如果可能的话，建造一个更小的围栏，并且他愿意从他的牛群中出售最多三头奶牛来实现这一目标。\n\n请帮助 FJ 计算在从他的牛群中移除最多三头奶牛后，他可以用围栏围住的最小可能面积（然后为剩余的奶牛建造最紧密的围栏）。\n\n对于这个问题，请将奶牛视为点，将围栏视为四条线段的集合（即不要将奶牛视为“单位正方形”）。请注意，答案可能为零，例如如果所有剩余的奶牛最终站在一条共同的垂直线或水平线上。", "inputFormat": "输入的第一行包含 $N$。接下来的 $N$ 行每行包含两个整数，表示一头奶牛的位置。奶牛的位置是范围在 $1 \\ldots 40,000$ 的正整数。", "outputFormat": "输出一个整数，表示 FJ 在从他的牛群中精心选择移除最多三头奶牛后，可以用围栏围住的最小面积。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3143", "type": "P", "difficulty": 3, "samples": [["7 3\n10\n5\n1\n12\n9\n5\n14", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "2016", "USACO", "枚举", "双指针 two-pointer"], "title": "[USACO16OPEN] Diamond Collector S", "background": "", "description": "Bessie the cow, always a fan of shiny objects, has taken up a hobby of mining diamonds in her spare time!  She has collected $N$ diamonds ($N \\leq 50,000$) of varying sizes, and she wants to arrange some of them in a pair of  display cases in the barn.\n\n\nSince Bessie wants the diamonds in each of the two cases to be relatively similar in  size, she decides that she will not include two diamonds in the same case if their sizes differ by more than $K$ (two diamonds can be displayed together in the same case if their sizes differ by exactly $K$).  Given $K$, please help Bessie determine the maximum number of diamonds she can display in both cases together.", "inputFormat": "The first line of the input file contains $N$ and $K$ ($0 \\leq K \\leq 1,000,000,000$).\n\nThe next $N$ lines each contain an integer giving the size of one of the diamonds.  All sizes will be positive and will not exceed $1,000,000,000$.\n", "outputFormat": "Output a single positive integer, telling the maximum number of diamonds that Bessie can showcase in total in both the cases.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO16OPEN] Diamond Collector S", "background": "", "description": "Bessie the cow, always a fan of shiny objects, has taken up a hobby of mining diamonds in her spare time!  She has collected $N$ diamonds ($N \\leq 50,000$) of varying sizes, and she wants to arrange some of them in a pair of  display cases in the barn.\n\n\nSince Bessie wants the diamonds in each of the two cases to be relatively similar in  size, she decides that she will not include two diamonds in the same case if their sizes differ by more than $K$ (two diamonds can be displayed together in the same case if their sizes differ by exactly $K$).  Given $K$, please help Bessie determine the maximum number of diamonds she can display in both cases together.", "inputFormat": "The first line of the input file contains $N$ and $K$ ($0 \\leq K \\leq 1,000,000,000$).\n\nThe next $N$ lines each contain an integer giving the size of one of the diamonds.  All sizes will be positive and will not exceed $1,000,000,000$.\n", "outputFormat": "Output a single positive integer, telling the maximum number of diamonds that Bessie can showcase in total in both the cases.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO16OPEN] Diamond Collector S", "background": null, "description": "奶牛 Bessie 一直喜欢闪闪发光的物体，她最近在业余时间开始了一项爱好——挖掘钻石！她收集了 $N$ 颗大小各不相同的钻石（$N \\leq 50,000$），并希望将它们中的一部分放在谷仓里的两个展示柜中展示。\n\n由于 Bessie 希望每个展示柜中的钻石大小相对接近，她决定如果两颗钻石的大小相差超过 $K$，就不能将它们放在同一个展示柜中（如果两颗钻石的大小相差恰好为 $K$，则可以将它们一起展示在同一个展示柜中）。给定 $K$，请帮助 Bessie 确定她可以在两个展示柜中一起展示的最大钻石数量。", "inputFormat": "输入文件的第一行包含 $N$ 和 $K$（$0 \\leq K \\leq 10^9$）。\n\n接下来的 $N$ 行每行包含一个整数，表示一颗钻石的大小。所有钻石的大小均为正数且不超过 $10^9$。", "outputFormat": "输出一个正整数，表示 Bessie 可以在两个展示柜中一起展示的最大钻石数量。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P3144", "type": "P", "difficulty": 3, "samples": [["4 3\n1 2\n2 3\n3 4\n3\n4\n1\n2", "YES\nNO\nYES\nYES"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "USACO", "并查集"], "title": "[USACO16OPEN] Closing the Farm S", "background": "*本题和 [金组同名题目](/problem/P6121) 在题意上一致，唯一的不同是数据范围。*", "description": "FJ 和他的奶牛们正在计划离开小镇做一次长的旅行，同时 FJ 想临时地关掉他的农场以节省一些金钱。\n\n这个农场一共有被用 $M$ 条双向道路连接的 $N$ 个谷仓（$1 \\leq N,M \\leq 3000$）。为了关闭整个农场，FJ 计划每一次关闭掉一个谷仓。当一个谷仓被关闭了，所有的连接到这个谷仓的道路都会被关闭，而且再也不能够被使用。\n\nFJ 现在正感兴趣于知道在每一个时间（这里的“时间”指在每一次关闭谷仓之前的时间）时他的农场是否是“全连通的”——也就是说从任意的一个开着的谷仓开始，能够到达另外的一个谷仓。注意自从某一个时间之后，可能整个农场都开始不会是“全连通的”。", "inputFormat": "输入第一行两个整数 $N,M$。\n\n接下来 $M$ 行，每行两个整数 $u,v$（$1 \\leq u,v \\leq N$），描述一条连接 $u,v$ 两个农场的路。\n\n最后 $N$ 行每行一个整数，表示第 $i$ 个被关闭的农场编号。", "outputFormat": "输出 $N$ 行，每行包含 `YES` 或 `NO`，表示某个时刻农场是否是全连通的。\n\n第一行输出最初的状态，第 $i$ 行（$2 \\leq i \\leq N$）输出第 $i-1$ 个农场被关闭后的状态。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[USACO16OPEN] Closing the Farm S", "background": "This problem has the same statement as the problem with the same name in the Gold division, with the only difference being the constraints. See [the problem with the same name in the Gold division](/problem/P6121).", "description": "FJ and his cows are planning to leave town for a long trip, and FJ wants to temporarily shut down his farm to save some money.\n\nThe farm has $N$ barns connected by $M$ bidirectional roads ($1 \\leq N,M \\leq 3000$). To close the entire farm, FJ plans to close one barn at a time. When a barn is closed, all roads incident to that barn are closed and can no longer be used.\n\nFJ is interested in knowing, at each time (here, “time” means the moment just before each barn is closed), whether his farm is “fully connected” — that is, from any open barn, it is possible to reach any other open barn. Note that from some time onward, the entire farm may cease to be fully connected.\n\n# Description", "inputFormat": "The first line contains two integers $N,M$.\n\nThe next $M$ lines each contain two integers $u,v$ ($1 \\leq u,v \\leq N$), describing a road connecting barns $u$ and $v$.\n\nThe last $N$ lines each contain one integer, where the $i$-th line gives the index of the $i$-th barn to be closed.", "outputFormat": "Output $N$ lines, each containing `YES` or `NO`, indicating whether the farm is fully connected at that time.\n\nPrint the initial status on the first line. On line $i$ ($2 \\leq i \\leq N$), print the status after the $(i-1)$-th barn has been closed.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO16OPEN] Closing the Farm S", "background": "*本题和 [金组同名题目](/problem/P6121) 在题意上一致，唯一的不同是数据范围。*", "description": "FJ 和他的奶牛们正在计划离开小镇做一次长的旅行，同时 FJ 想临时地关掉他的农场以节省一些金钱。\n\n这个农场一共有被用 $M$ 条双向道路连接的 $N$ 个谷仓（$1 \\leq N,M \\leq 3000$）。为了关闭整个农场，FJ 计划每一次关闭掉一个谷仓。当一个谷仓被关闭了，所有的连接到这个谷仓的道路都会被关闭，而且再也不能够被使用。\n\nFJ 现在正感兴趣于知道在每一个时间（这里的“时间”指在每一次关闭谷仓之前的时间）时他的农场是否是“全连通的”——也就是说从任意的一个开着的谷仓开始，能够到达另外的一个谷仓。注意自从某一个时间之后，可能整个农场都开始不会是“全连通的”。", "inputFormat": "输入第一行两个整数 $N,M$。\n\n接下来 $M$ 行，每行两个整数 $u,v$（$1 \\leq u,v \\leq N$），描述一条连接 $u,v$ 两个农场的路。\n\n最后 $N$ 行每行一个整数，表示第 $i$ 个被关闭的农场编号。", "outputFormat": "输出 $N$ 行，每行包含 `YES` 或 `NO`，表示某个时刻农场是否是全连通的。\n\n第一行输出最初的状态，第 $i$ 行（$2 \\leq i \\leq N$）输出第 $i-1$ 个农场被关闭后的状态。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3145", "type": "P", "difficulty": 4, "samples": [["6\n4 2\n8 10\n1 1\n9 12\n14 7\n2 3", "107"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "USACO", "枚举", "排序", "ST 表"], "title": "[USACO16OPEN] Splitting the Field G", "background": "", "description": "Farmer John's $N$ cows ($3 \\leq N \\leq 50,000$) are all located at distinct positions in his two-dimensional field.  FJ wants to enclose all of the cows with a rectangular fence whose sides are parallel to the x and y axes, and hewants this fence to be as small as possible so that it contains every cow (cowson the boundary are allowed).\n\nFJ is unfortunately on a tight budget due to low milk production last quarter.He would therefore like to enclose a smaller area to reduce maintenance costs,and the only way he can see to do this is by building two enclosures instead of one.  Please help him compute how much less area he needs to enclose, in total,by using two enclosures instead of one. Like the original enclosure, the two enclosures must collectively contain all the cows (with cows on boundaries allowed), and they must have sides parallel to the x and y axes.  The two enclosures are not allowed to overlap -- not even on their boundaries. Note that enclosures of zero area are legal, for example if an enclosure has zero width and/or zero height.", "inputFormat": "The first line of input contains $N$.  The next $N$ lines each contain two integers specifying the location of a cow. Cow locations are positive integers in the range $1 \\ldots 1,000,000,000$.", "outputFormat": "Write a single integer specifying amount of total area FJ can save by using two enclosures instead of one.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO16OPEN] Splitting the Field G", "background": "", "description": "Farmer John's $N$ cows ($3 \\leq N \\leq 50,000$) are all located at distinct positions in his two-dimensional field.  FJ wants to enclose all of the cows with a rectangular fence whose sides are parallel to the x and y axes, and hewants this fence to be as small as possible so that it contains every cow (cowson the boundary are allowed).\n\nFJ is unfortunately on a tight budget due to low milk production last quarter.He would therefore like to enclose a smaller area to reduce maintenance costs,and the only way he can see to do this is by building two enclosures instead of one.  Please help him compute how much less area he needs to enclose, in total,by using two enclosures instead of one. Like the original enclosure, the two enclosures must collectively contain all the cows (with cows on boundaries allowed), and they must have sides parallel to the x and y axes.  The two enclosures are not allowed to overlap -- not even on their boundaries. Note that enclosures of zero area are legal, for example if an enclosure has zero width and/or zero height.", "inputFormat": "The first line of input contains $N$.  The next $N$ lines each contain two integers specifying the location of a cow. Cow locations are positive integers in the range $1 \\ldots 1,000,000,000$.", "outputFormat": "Write a single integer specifying amount of total area FJ can save by using two enclosures instead of one.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO16OPEN] Splitting the Field G", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$3 \\leq N \\leq 50,000$）位于他二维牧场的不同位置。FJ 想要用一个与 x 轴和 y 轴平行的矩形围栏将所有奶牛围住，并且他希望这个围栏尽可能小，以便它包含每一头奶牛（允许奶牛位于边界上）。\n\n由于上季度牛奶产量低，FJ 的预算紧张。因此，他希望围住更小的区域以减少维护成本，而他唯一能想到的方法就是建造两个围栏而不是一个。请帮助他计算使用两个围栏而不是一个围栏总共可以减少多少面积。与原始围栏一样，这两个围栏必须共同包含所有奶牛（允许奶牛位于边界上），并且它们的边必须与 $x$ 轴和 $y$ 轴平行。这两个围栏不允许重叠——即使在它们的边界上也不行。注意，零面积的围栏是合法的，例如如果一个围栏的宽度和/或高度为零。", "inputFormat": "输入的第一行包含 $N$。接下来的 $N$ 行每行包含两个整数，指定一头奶牛的位置。奶牛的位置是 $1 \\ldots 1,000,000,000$ 范围内的正整数。", "outputFormat": "输出一个整数，表示 FJ 通过使用两个围栏而不是一个围栏总共可以减少的面积。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3146", "type": "P", "difficulty": 4, "samples": [["4\n1\n1\n1\n2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "贪心", "2016", "USACO", "区间 DP"], "title": "[USACO16OPEN] 248 G", "background": "", "description": "Bessie likes downloading games to play on her cell phone, even though she  doesfind the small touch screen rather cumbersome to use with her large hooves.\n\nShe is particularly intrigued by the current game she is playing.The game starts with a sequence of $N$ positive integers ($2 \\leq N\\leq 248$), each in the range $1 \\ldots 40$. In one move, Bessie cantake two adjacent numbers with equal values and replace them a singlenumber of value one greater (e.g., she might replace two adjacent 7s with an 8).  The goal is to maximize the value of the largest numberpresent in the sequence at the end of the game.  Please help Bessiescore as highly as possible!\n", "inputFormat": "The first line of input contains $N$, and the next $N$ lines give the sequence of $N$ numbers at the start of the game.\n", "outputFormat": "Please output the largest integer Bessie can generate.\n", "hint": "In this example shown here, Bessie first merges the second and third 1s to obtain the sequence 1 2 2, and then she merges the 2s into a 3. Note that it is not optimal to join the first two 1s.\n", "locale": "en", "translations": {"en": {"title": "[USACO16OPEN] 248 G", "background": "", "description": "Bessie likes downloading games to play on her cell phone, even though she  doesfind the small touch screen rather cumbersome to use with her large hooves.\n\nShe is particularly intrigued by the current game she is playing.The game starts with a sequence of $N$ positive integers ($2 \\leq N\\leq 248$), each in the range $1 \\ldots 40$. In one move, Bessie cantake two adjacent numbers with equal values and replace them a singlenumber of value one greater (e.g., she might replace two adjacent 7s with an 8).  The goal is to maximize the value of the largest numberpresent in the sequence at the end of the game.  Please help Bessiescore as highly as possible!\n", "inputFormat": "The first line of input contains $N$, and the next $N$ lines give the sequence of $N$ numbers at the start of the game.\n", "outputFormat": "Please output the largest integer Bessie can generate.\n", "hint": "In this example shown here, Bessie first merges the second and third 1s to obtain the sequence 1 2 2, and then she merges the 2s into a 3. Note that it is not optimal to join the first two 1s.\n", "locale": "en"}, "zh-CN": {"title": "[USACO16OPEN] 248 G", "background": null, "description": "贝西喜欢在手机上下载游戏来玩，尽管她确实觉得对于自己巨大的蹄子来说，小小的触摸屏用起来相当笨拙。\n\n她对当前正在玩的这个游戏特别感兴趣。游戏开始时给定一个包含 $N$ 个正整数的序列（$2 \\leq N \\leq 248$），每个数的范围在 $1 \\ldots 40$ 之间。在一次操作中，贝西可以选择两个相邻且相等的数，将它们替换为一个比原数大 $1$ 的数（例如，她可以将两个相邻的 `7` 替换为一个 `8`）。游戏的目标是最大化最终序列中的最大数值。请帮助贝西获得尽可能高的分数！", "inputFormat": "第一行输入包含 $N$，接下来的 $N$ 行给出游戏开始时序列的 $N$ 个数字。", "outputFormat": "请输出贝西能生成的最大整数。", "hint": "在示例中，贝西首先合并第二个和第三个 `1`，得到序列 `1 2 2`，然后将两个 `2` 合并为 `3`。注意，合并前两个 `1` 并不是最优策略。", "locale": "zh-CN"}}}
{"pid": "P3147", "type": "P", "difficulty": 5, "samples": [["4\n1\n1\n1\n2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "2016", "倍增", "USACO"], "title": "[USACO16OPEN] 262144 P", "background": "", "description": "Bessie likes downloading games to play on her cell phone, even though she  doesfind the small touch screen rather cumbersome to use with her large hooves.\n\n\nShe is particularly intrigued by the current game she is playing.The game starts with a sequence of $N$ positive integers ($2 \\leq N\\leq 262,144$), each in the range $1 \\ldots 40$.  In one move, Bessiecan take two adjacent numbers with equal values and replace them asingle number of value one greater (e.g., she might replace twoadjacent 7s with an 8). The goal is to maximize the value of thelargest number present in the sequence at the end of the game.  Pleasehelp Bessie score as highly as possible!", "inputFormat": "The first line of input contains $N$, and the next $N$ lines give the sequence\n\nof $N$ numbers at the start of the game.\n", "outputFormat": "Please output the largest integer Bessie can generate.\n", "hint": "In this example shown here, Bessie first merges the second and third 1s to obtain the sequence 1 2 2, and then she merges the 2s into a 3. Note that it is not optimal to join the first two 1s.", "locale": "en", "translations": {"en": {"title": "[USACO16OPEN] 262144 P", "background": "", "description": "Bessie likes downloading games to play on her cell phone, even though she  doesfind the small touch screen rather cumbersome to use with her large hooves.\n\n\nShe is particularly intrigued by the current game she is playing.The game starts with a sequence of $N$ positive integers ($2 \\leq N\\leq 262,144$), each in the range $1 \\ldots 40$.  In one move, Bessiecan take two adjacent numbers with equal values and replace them asingle number of value one greater (e.g., she might replace twoadjacent 7s with an 8). The goal is to maximize the value of thelargest number present in the sequence at the end of the game.  Pleasehelp Bessie score as highly as possible!", "inputFormat": "The first line of input contains $N$, and the next $N$ lines give the sequence\n\nof $N$ numbers at the start of the game.\n", "outputFormat": "Please output the largest integer Bessie can generate.\n", "hint": "In this example shown here, Bessie first merges the second and third 1s to obtain the sequence 1 2 2, and then she merges the 2s into a 3. Note that it is not optimal to join the first two 1s.", "locale": "en"}, "zh-CN": {"title": "[USACO16OPEN] 262144 P", "background": "", "description": "贝西喜欢在手机上下载游戏来玩，尽管她确实觉得对于自己巨大的蹄子来说，小小的触摸屏用起来相当笨拙。\n\n她对当前正在玩的这个游戏特别感兴趣。游戏开始时给定一个包含 $N$ 个正整数的序列（$2 \\leq N \\leq 262,144$），每个数的范围在 $1 \\ldots 40$ 之间。在一次操作中，贝西可以选择两个相邻且相等的数，将它们替换为一个比原数大 1 的数（例如，她可以将两个相邻的 7 替换为一个 8）。游戏的目标是最大化最终序列中的最大数值。请帮助贝西获得尽可能高的分数！", "inputFormat": "第一行输入包含 $N$，接下来的 $N$ 行给出游戏开始时序列的 $N$ 个数字。", "outputFormat": "请输出贝西能生成的最大整数。", "hint": "在示例中，贝西首先合并第二个和第三个 1，得到序列 1 2 2，然后将两个 2 合并为 3。注意，合并前两个 1 并不是最优策略。", "locale": "zh-CN"}}}
