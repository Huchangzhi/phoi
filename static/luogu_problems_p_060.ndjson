{"pid": "P2207", "type": "P", "difficulty": 3, "samples": [["7 3\n1 3\n2 4\n5 6\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2013", "USACO", "排序"], "title": "[USACO13OPEN] Photo B", "background": null, "description": "Farmer John 打算给他的 $n$ 头奶牛照相。他们排成一条线，并且依次取 $1\\sim n$ 作为编号。\n\n每一张照片可以拍摄到这列奶牛中一个连续的区间中的奶牛。对于每一头奶牛，FJ 都想要让它至少出现在一张照片里。\n\n不幸的是，有 $k$ 对关系不好的奶牛，他们拒绝出现在同一张照片里。已知所有关系不好的奶牛所在的位置，请计算出 FJ 需要的最小需要拍摄的照片数量。", "inputFormat": "第一行：两个整数 $n,k$。\n\n第 $2\\sim k+1$ 行：第 $i+1$ 行有两个整数，记为 $a_i$ 与 $b_i$。它们代表着处在队列中第 $a_i$ 头奶牛与第 $b_i$ 头奶牛是关系不好的。", "outputFormat": "一个整数，代表 FJ 需要的最小需要拍摄的照片数量。", "hint": "### 样例 1 解释\nFJ 可以只拍三张照片：$[1,2],[3,5],[6,7]$。\n\n### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 10^9$，$1\\le k\\le 1000$，$1\\le a_i, b_i\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Photo B", "background": "", "description": "Farmer John plans to photograph his $n$ cows. They stand in a line and are numbered $1\\sim n$ in order.\n\nEach photo can include a contiguous interval of cows in the line. For every cow, FJ wants it to appear in at least one photo.\n\nUnfortunately, there are $k$ pairs of cows that do not get along; they refuse to appear in the same photo. Given the positions of all incompatible pairs, compute the minimum number of photos FJ needs to take.", "inputFormat": "The first line contains two integers $n, k$.\n\nLines $2\\sim k+1$: on line $i+1$, there are two integers $a_i$ and $b_i$, indicating that the cow at position $a_i$ and the cow at position $b_i$ are an incompatible pair.", "outputFormat": "Output a single integer, the minimum number of photos FJ needs.", "hint": "Sample 1 explanation:\nFJ can take only three photos: $[1,2],[3,5],[6,7]$.\n\nConstraints:\nFor $100\\%$ of the testdata, it is guaranteed that $2\\le n\\le 10^9$, $1\\le k\\le 1000$, $1\\le a_i, b_i\\le n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Photo B", "background": null, "description": "Farmer John 打算给他的 $n$ 头奶牛照相。他们排成一条线，并且依次取 $1\\sim n$ 作为编号。\n\n每一张照片可以拍摄到这列奶牛中一个连续的区间中的奶牛。对于每一头奶牛，FJ 都想要让它至少出现在一张照片里。\n\n不幸的是，有 $k$ 对关系不好的奶牛，他们拒绝出现在同一张照片里。已知所有关系不好的奶牛所在的位置，请计算出 FJ 需要的最小需要拍摄的照片数量。", "inputFormat": "第一行：两个整数 $n,k$。\n\n第 $2\\sim k+1$ 行：第 $i+1$ 行有两个整数，记为 $a_i$ 与 $b_i$。它们代表着处在队列中第 $a_i$ 头奶牛与第 $b_i$ 头奶牛是关系不好的。", "outputFormat": "一个整数，代表 FJ 需要的最小需要拍摄的照片数量。", "hint": "### 样例 1 解释\nFJ 可以只拍三张照片：$[1,2],[3,5],[6,7]$。\n\n### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $2\\le n\\le 10^9$，$1\\le k\\le 1000$，$1\\le a_i, b_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P2208", "type": "P", "difficulty": 5, "samples": [["5 5\n#####\n#...#\n#...D\n#C...\n##.##", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "图论", "2013", "USACO", "枚举", "分治", "广度优先搜索 BFS"], "title": "[USACO13OPEN] What's Up With Gravity S", "background": null, "description": "Bovidian 船长正在拯救她的船员，Beefalo 博士。\n\n和所有伟大的冒险故事一样，这个故事也是发生在一个 2D 平面上的。\n\n这个平面是 $M\\times N$（$1\\le N,M \\le500$）的格子组成的网格，代表着船长的世界的一个侧视图。\n\n有些格子是空的，另一些则是实心的，并且不能直接通过。\n\n很不幸的是，船长跳不起来。她必须遵守这个世界的特殊物理法则。\n\n1. 如果船长的正下方没有方块（换句话说，即使她正在网格的边缘），那么她就会掉入宇宙中，同时意味着冒险失败。\n2. 如果船长的正下方的方块是空的，那么她就会掉到这个方块。\n3. 在不满足 1. 与 2. 的情况下，船长可以做以下的事情：\n    1. 如果左边（或右边）的方格是空的，那么她可以走到那个格子。\n    2. 船长可以翻转重力的方向。\n\n当船长改变翻转重力的方向时，我们就改变船长“下方”的定义。\n\n“下方”的定义只能是两种：\n\n1. 比船长位置所在的方格的列编号更大的格子。\n2. 比船长位置所在的方格的列编号更小的格子。\n\n一开始的时候，“下方”的定义是比船长位置所在方格的列编号更大的格子。\n\nBeefalo 博士正迷失在这个世界中的某一处，请帮助船长从起点到达博士的地方。\n\n如果可以到达，请输出最少需要的翻转重力的次数。\n\n\n如果不可以到达，请输出 $-1$。", "inputFormat": "第 $1$ 行输入两个整数 $N,M$。\n\n第 $2$ 行到 $N+1$ 行中，第 $i+1$ 行则是代表船长世界的第 $i$ 行。每行有 $M$ 个字符。\n\n\n其中 `,` 代表着一个空的格子，`#` 代表着一个实心的格子，`C` 代表着船长的位置，`D` 代表着博士的位置。", "outputFormat": "一行，输出一个整数。\n\n如果船长可以到达，请输出最少需要的翻转重力的次数。\n\n如果不可以到达，请输出 $-1$。", "hint": "输出解释：\n\n首先，船长在 $(4,2)$，接着她翻转重力，到达 $(2,2)$。\n\n接着她向右走走到 $(2,4)$，接着她第二次翻转重力，到达 $(4,4)$。\n\n然后她继续向右走到 $(4,5)$，最后在翻转一次重力，到达博士所在的 $(3,5)$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] What's Up With Gravity S", "background": null, "description": "Captain Bovidian is on an adventure to rescue her crew member, Doctor Beefalo. Like all great adventures, this story plays out in a two dimensional N by M grid (1 <= N, M <= 500), representing a side view of the captain's world. Some grid cells are empty while others are blocked and cannot be traversed.\n\nUnfortunately, Captain Bovidian cannot jump. She must obey the following rules of physics while traversing her world.\n\n1. If there is no cell directly underneath Captain Bovidian (that is, if she is at the edge of the grid), then she flies out into space and fails her mission.\n2. If the cell directly underneath Captain Bovidian is empty, then she falls into that cell.\n3. Otherwise:\n    1. Captain Bovidian may move left or right if the corresponding cell exists and is empty.\n    2. Or, Captain Bovidian may flip the direction of gravity.\n\nWhen Captain Bovidian changes the direction of gravity, the cell that's 'underneath' her (as mentioned in rules 1 and 2) toggles between the cell with one higher row index and the cell with one lower row index (the first row in the input has index 1, and the last row has index N). Initially, the cells with one higher row index are underneath Captain Bovidian.\n\nDoctor Beefalo is lost somewhere in this world. Help Captain Bovidian arrive at her cell using the least number of gravity flips as possible. If it is impossible to reach Doctor Beefalo, please output -1.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] What's Up With Gravity S", "background": null, "description": "Bovidian 船长正在拯救她的船员，Beefalo 博士。\n\n和所有伟大的冒险故事一样，这个故事也是发生在一个 2D 平面上的。\n\n这个平面是 $M\\times N$（$1\\le N,M \\le500$）的格子组成的网格，代表着船长的世界的一个侧视图。\n\n有些格子是空的，另一些则是实心的，并且不能直接通过。\n\n很不幸的是，船长跳不起来。她必须遵守这个世界的特殊物理法则。\n\n1. 如果船长的正下方没有方块（换句话说，即使她正在网格的边缘），那么她就会掉入宇宙中，同时意味着冒险失败。\n2. 如果船长的正下方的方块是空的，那么她就会掉到这个方块。\n3. 在不满足 1. 与 2. 的情况下，船长可以做以下的事情：\n    1. 如果左边（或右边）的方格是空的，那么她可以走到那个格子。\n    2. 船长可以翻转重力的方向。\n\n当船长改变翻转重力的方向时，我们就改变船长“下方”的定义。\n\n“下方”的定义只能是两种：\n\n1. 比船长位置所在的方格的列编号更大的格子。\n2. 比船长位置所在的方格的列编号更小的格子。\n\n一开始的时候，“下方”的定义是比船长位置所在方格的列编号更大的格子。\n\nBeefalo 博士正迷失在这个世界中的某一处，请帮助船长从起点到达博士的地方。\n\n如果可以到达，请输出最少需要的翻转重力的次数。\n\n\n如果不可以到达，请输出 $-1$。", "inputFormat": "第 $1$ 行输入两个整数 $N,M$。\n\n第 $2$ 行到 $N+1$ 行中，第 $i+1$ 行则是代表船长世界的第 $i$ 行。每行有 $M$ 个字符。\n\n\n其中 `,` 代表着一个空的格子，`#` 代表着一个实心的格子，`C` 代表着船长的位置，`D` 代表着博士的位置。", "outputFormat": "一行，输出一个整数。\n\n如果船长可以到达，请输出最少需要的翻转重力的次数。\n\n如果不可以到达，请输出 $-1$。", "hint": "输出解释：\n\n首先，船长在 $(4,2)$，接着她翻转重力，到达 $(2,2)$。\n\n接着她向右走走到 $(2,4)$，接着她第二次翻转重力，到达 $(4,4)$。\n\n然后她继续向右走到 $(4,5)$，最后在翻转一次重力，到达博士所在的 $(3,5)$。", "locale": "zh-CN"}}}
{"pid": "P2209", "type": "P", "difficulty": 5, "samples": [["4 10 3 17\n2 40\n9 15\n5 7\n10 12", "174\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "贪心", "2013", "USACO", "优先队列", "反悔贪心"], "title": "[USACO13OPEN] Fuel Economy S", "background": "", "description": "Farmer John 决定去一次跨国旅游度假。为了不让他的奶牛们感到被抛弃，他决定租一辆大卡车来带他的奶牛们一起旅行。\n\n\n这辆卡车有一个很大的油箱，可以装下 $G$ 个单位的油（$1 \\le G \\le {10}^6$），不幸的是，卡车的耗油量也很大，卡车每运动一个单位的距离，就要消耗一个单位的油。Farmer John 要在他的旅程中走 $D$ 个单位的距离（$1 \\le D \\le {10}^9$）。\n\n\n因为 FJ 知道他可能要几次在旅途中停下，给油箱加油，所以他把在旅途沿路上的 $N$（$1\\le n\\le 5\\times 10^4$）个加油站的记录做成了表格。对于第 $i$ 个加油站，他记录了加油站与起点的距离 $X_i$（$0 \\le X_i \\le D$），以及加油站中每单位油的价格 $Y_i$（$1 \\le Y_i \\le {10}^6$）。\n\n已知以上所给的信息，以及 FJ 在路途开始时拥有的燃油的数量 $B$（$0 \\le B \\le D$），请计算出 FJ 到达目的地时花费的油费用的最小值。如果 FJ 无法到达旅途的终点，那么请输出 `-1`。本题的答案可能无法使用 32 位整数储存。", "inputFormat": "第一行： 四个整数：$N, G, B, D$。\n\n接下来 $N$ 行：每一行都有两个整数 $X_i$ 与 $Y_i$，意义如上所述。", "outputFormat": "一个整数，如果 FJ 无法到达旅途的终点，那么输出 `-1`，否则输出 FJ 到达目的地时花费的油费用的最小值。", "hint": "样例解释：FJ 先移动 $2$ 个单位，然后停下购买 $2$ 个单位的油（要花费 $40 \\times 2$）。然后一直前进到距离起点 $5$ 个单位的地方，此时油箱为空。这时向油箱里加满油（要花费 $7 \\times 10$）。再向前走 $5$ 个单位，加 $2$ 个单位的油（花费 $12 \\times 2$）。最后一直走到终点。此时总花费是 $174$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Fuel Economy S", "background": null, "description": "Farmer John has decided to take a cross-country vacation. Not wanting his cows to feel left out, however, he has decided to rent a large truck and to bring the cows with him as well!\n\nThe truck has a large tank that can hold up to G units of fuel (1 <= G <= 1,000,000). Unfortunately, it gets very poor mileage: it consumes one unit of fuel for every unit of distance traveled, and FJ has a total of D units of distance to travel along his route (1 <= D <= 1,000,000,000).\n\nSince FJ knows he will probably need to stop to refill his tank several times along his trip, he makes a list of all the N fuel stations along his route (1 <= N <= 50,000). For each station i, he records its distance X_i from the start of the route (0 <= X_i <= D), as well as the price Y_i per unit of fuel it sells (1 <= Y_i <= 1,000,000).\n\nGiven this information, and the fact that FJ starts his journey with exactly B units of fuel (0 <= B <= D), please determine the minimum amount of money FJ will need to pay for fuel in order to reach his destination. If it is impossible for him to reach the destination, please output -1. Note that the answer to this problem may not fit into a standard 32-bit integer.", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Fuel Economy S", "background": "", "description": "Farmer John 决定去一次跨国旅游度假。为了不让他的奶牛们感到被抛弃，他决定租一辆大卡车来带他的奶牛们一起旅行。\n\n\n这辆卡车有一个很大的油箱，可以装下 $G$ 个单位的油（$1 \\le G \\le {10}^6$），不幸的是，卡车的耗油量也很大，卡车每运动一个单位的距离，就要消耗一个单位的油。Farmer John 要在他的旅程中走 $D$ 个单位的距离（$1 \\le D \\le {10}^9$）。\n\n\n因为 FJ 知道他可能要几次在旅途中停下，给油箱加油，所以他把在旅途沿路上的 $N$（$1\\le n\\le 5\\times 10^4$）个加油站的记录做成了表格。对于第 $i$ 个加油站，他记录了加油站与起点的距离 $X_i$（$0 \\le X_i \\le D$），以及加油站中每单位油的价格 $Y_i$（$1 \\le Y_i \\le {10}^6$）。\n\n已知以上所给的信息，以及 FJ 在路途开始时拥有的燃油的数量 $B$（$0 \\le B \\le D$），请计算出 FJ 到达目的地时花费的油费用的最小值。如果 FJ 无法到达旅途的终点，那么请输出 `-1`。本题的答案可能无法使用 32 位整数储存。", "inputFormat": "第一行： 四个整数：$N, G, B, D$。\n\n接下来 $N$ 行：每一行都有两个整数 $X_i$ 与 $Y_i$，意义如上所述。", "outputFormat": "一个整数，如果 FJ 无法到达旅途的终点，那么输出 `-1`，否则输出 FJ 到达目的地时花费的油费用的最小值。", "hint": "样例解释：FJ 先移动 $2$ 个单位，然后停下购买 $2$ 个单位的油（要花费 $40 \\times 2$）。然后一直前进到距离起点 $5$ 个单位的地方，此时油箱为空。这时向油箱里加满油（要花费 $7 \\times 10$）。再向前走 $5$ 个单位，加 $2$ 个单位的油（花费 $12 \\times 2$）。最后一直走到终点。此时总花费是 $174$。", "locale": "zh-CN"}}}
{"pid": "P2210", "type": "P", "difficulty": 4, "samples": [["6\n6 2 5\n1 3 4\n4 2 6\n5 3 2\n4 6 1\n1 5 3", "17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "2013", "USACO", "模拟退火", "随机化", "状压 DP"], "title": "[USACO13OPEN] Haywire B", "background": null, "description": "Farmer John 有 $N$ 只奶牛（$4 \\leq N \\leq 12$，$N$ 是偶数）。他们建立了一套原生的系统，使得奶牛与他的朋友可以通过由干草保护的线路来进行对话交流。\n\n每一头奶牛在这个牧场中正好有 $3$ 个朋友，并且他们必须把自己安排在一排干草堆中。\n\n一条长 $L$ 的线路要占用刚好 $L$ 堆干草来保护线路。比如说，如果有两头奶牛分别在草堆 $4$ 与草堆 $7$ 中，并且他们是朋友关系，那么我们就需要用 $3$ 堆干草来建造线路，使他们之间能够联系。\n\n假设每一对作为朋友的奶牛都必须用一条单独的线路来连接，并且我们可以随便地改变奶牛的位置，请计算出我们建造线路所需要的最少的干草堆。", "inputFormat": "第 $1$ 行：一个整数 $N$。为了方便，我们给奶牛用 $1\\sim N$ 的数字进行编号。\n\n第 $2, 3, \\dots, N + 1$ 行：每一行都有三个在 $1\\sim N$ 中的整数。第 $i+1$ 行的数字代表着第 $i$ 头奶牛的三个朋友的编号。显然，如果奶牛 $i$ 是奶牛 $j$ 的三个朋友之一，那么奶牛 $j$ 也是奶牛 $i$ 的三个朋友之一。", "outputFormat": "一个整数，代表着建造线路需要的干草堆数量的最小值。", "hint": "样例解释：奶牛最好的排列是 $\\{6, 5, 1, 4, 2, 3\\}$，这个时候我们只需要 $17$ 个单位的干草堆。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Haywire B", "background": "", "description": "Farmer John has $N$ cows ($4 \\leq N \\leq 12$, and $N$ is even). They set up a homemade system that allows cows and their friends to communicate through lines protected by hay bales.\n\nEach cow in the pasture has exactly $3$ friends, and the cows must be arranged in a single row of hay bales.\n\nA line of length $L$ occupies exactly $L$ hay bales to protect it. For example, if two cows are placed at hay bales $4$ and $7$ and they are friends, then we need $3$ hay bales to build the line that connects them.\n\nAssume that every pair of friends must be connected by a separate line, and we may rearrange the cows arbitrarily. Compute the minimum total number of hay bales required to build all the lines.", "inputFormat": "Line $1$: An integer $N$. For convenience, the cows are numbered $1 \\sim N$.\n\nLines $2, 3, \\dots, N + 1$: Each line contains three integers in $1 \\sim N$. The numbers on line $i + 1$ are the indices of cow $i$’s three friends. Obviously, if cow $i$ is one of cow $j$’s three friends, then cow $j$ is also one of cow $i$’s three friends.", "outputFormat": "A single integer representing the minimum number of hay bales required to build the lines.", "hint": "Sample explanation: the best arrangement of the cows is $\\{6, 5, 1, 4, 2, 3\\}$, in which case we need only $17$ hay bales.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Haywire B", "background": null, "description": "Farmer John 有 $N$ 只奶牛（$4 \\leq N \\leq 12$，$N$ 是偶数）。他们建立了一套原生的系统，使得奶牛与他的朋友可以通过由干草保护的线路来进行对话交流。\n\n每一头奶牛在这个牧场中正好有 $3$ 个朋友，并且他们必须把自己安排在一排干草堆中。\n\n一条长 $L$ 的线路要占用刚好 $L$ 堆干草来保护线路。比如说，如果有两头奶牛分别在草堆 $4$ 与草堆 $7$ 中，并且他们是朋友关系，那么我们就需要用 $3$ 堆干草来建造线路，使他们之间能够联系。\n\n假设每一对作为朋友的奶牛都必须用一条单独的线路来连接，并且我们可以随便地改变奶牛的位置，请计算出我们建造线路所需要的最少的干草堆。", "inputFormat": "第 $1$ 行：一个整数 $N$。为了方便，我们给奶牛用 $1\\sim N$ 的数字进行编号。\n\n第 $2, 3, \\dots, N + 1$ 行：每一行都有三个在 $1\\sim N$ 中的整数。第 $i+1$ 行的数字代表着第 $i$ 头奶牛的三个朋友的编号。显然，如果奶牛 $i$ 是奶牛 $j$ 的三个朋友之一，那么奶牛 $j$ 也是奶牛 $i$ 的三个朋友之一。", "outputFormat": "一个整数，代表着建造线路需要的干草堆数量的最小值。", "hint": "样例解释：奶牛最好的排列是 $\\{6, 5, 1, 4, 2, 3\\}$，这个时候我们只需要 $17$ 个单位的干草堆。", "locale": "zh-CN"}}}
{"pid": "P2212", "type": "P", "difficulty": 3, "samples": [["3 11\n0 2\n5 0\n4 3", "46"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "USACO", "生成树"], "title": "[USACO14MAR] Watering the Fields S", "background": null, "description": "给定 $n$ 个点，第 $i$ 个点的坐标为 $(x_i,y_i)$，如果想连通第 $i$ 个点与第 $j$ 个点，需要耗费的代价为两点的距离。第 $i$ 个点与第 $j$ 个点之间的距离使用欧几里得距离的平方进行计算，即：\n$$(x_i-x_j)^2+(y_i-y_j)^2$$\n我们规定耗费代价小于 $c$ 的两点无法连通，求使得每两点都能连通下的最小代价，如果无法连通输出 `-1`。", "inputFormat": "第一行两个整数 $n,c$ 代表点数与想要连通代价不能少于的一个数。   \n接下来 $n$ 行每行两个整数 $x_i,y_i$ 描述第 $i$ 个点。", "outputFormat": "一行一个整数代表使得每两点都能连通下的最小代价，如果无法连通输出 `-1`。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2000$，$0 \\le x_i,y_i \\le 1000$，$1 \\le c \\le 10^6$。\n\n### 说明\n\nTranslated by 一只书虫仔。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14MAR] Watering the Fields S", "background": null, "description": "Due to a lack of rain, Farmer John wants to build an irrigation system to\n\nsend water between his N fields (1 <= N <= 2000).\n\nEach field i is described by a distinct point (xi, yi) in the 2D plane,\n\nwith 0 <= xi, yi <= 1000. The cost of building a water pipe between two\n\nfields i and j is equal to the squared Euclidean distance between them:\n\n(xi - xj)^2 + (yi - yj)^2\n\nFJ would like to build a minimum-cost system of pipes so that all of his\n\nfields are linked together -- so that water in any field can follow a\n\nsequence of pipes to reach any other field.\n\nUnfortunately, the contractor who is helping FJ install his irrigation\n\nsystem refuses to install any pipe unless its cost (squared Euclidean\n\nlength) is at least C (1 <= C <= 1,000,000).\n\nPlease help FJ compute the minimum amount he will need pay to connect all\n\nhis fields with a network of pipes.", "inputFormat": "* Line 1: The integers N and C.\n\n* Lines 2..1+N: Line i+1 contains the integers xi and yi.", "outputFormat": "* Line 1: The minimum cost of a network of pipes connecting the\n\nfields, or -1 if no such network can be built.", "hint": "INPUT DETAILS:\n\nThere are 3 fields, at locations (0,2), (5,0), and (4,3). The contractor\n\nwill only install pipes of cost at least 11.\n\nOUTPUT DETAILS:\n\nFJ cannot build a pipe between the fields at (4,3) and (5,0), since its\n\ncost would be only 10. He therefore builds a pipe between (0,2) and (5,0)\n\nat cost 29, and a pipe between (0,2) and (4,3) at cost 17.\n\nSource: USACO 2014 March Contest, Silver", "locale": "en"}, "zh-CN": {"title": "[USACO14MAR] Watering the Fields S", "background": null, "description": "给定 $n$ 个点，第 $i$ 个点的坐标为 $(x_i,y_i)$，如果想连通第 $i$ 个点与第 $j$ 个点，需要耗费的代价为两点的距离。第 $i$ 个点与第 $j$ 个点之间的距离使用欧几里得距离的平方进行计算，即：\n$$(x_i-x_j)^2+(y_i-y_j)^2$$\n我们规定耗费代价小于 $c$ 的两点无法连通，求使得每两点都能连通下的最小代价，如果无法连通输出 `-1`。", "inputFormat": "第一行两个整数 $n,c$ 代表点数与想要连通代价不能少于的一个数。   \n接下来 $n$ 行每行两个整数 $x_i,y_i$ 描述第 $i$ 个点。", "outputFormat": "一行一个整数代表使得每两点都能连通下的最小代价，如果无法连通输出 `-1`。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2000$，$0 \\le x_i,y_i \\le 1000$，$1 \\le c \\le 10^6$。\n\n### 说明\n\nTranslated by 一只书虫仔。", "locale": "zh-CN"}}}
{"pid": "P2213", "type": "P", "difficulty": 3, "samples": [["5 2\n50 5 25 6 17\n14 3 2 7 21\n99 10 1 2 80\n8 7 5 23 11\n10 0 78 1 9\n", "342"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "2014", "USACO", "前缀和"], "title": "[USACO14MAR] The Lazy Cow S", "background": null, "description": "奶牛贝茜非常懒惰，她希望在她的地盘内找到一点最佳位置居住，以便在有限的步数内可以吃到尽量多的青草。\n\n她的地盘是一个 $N \\times N(1\\le N \\le 400)$ 的矩阵，第 $r$ 行 $c$ 列包含 $G(r,c)$ 单位的青草 $(0 \\le G(r,c) \\le 1000)$。从她的居住点，她最多愿意走 $K$ 步 $(0 \\le K \\le 2 \\times N)$，每一步她可以走到与她相邻的某个格子。", "inputFormat": "第一行两个正整数 $N,K$。\n\n接下来 $N$ 行，第 $i$（$1 \\le i \\le N$）行有 $N$ 个非负整数，表示 $G(i,1),G(i,2),\\dots,G(i,n)$。", "outputFormat": "一行一个整数，表示奶牛贝茜在有限的步数内最多可以吃到多少青草。", "hint": "样例解释：\n\n最优方案是居住在 $(3,3)$，答案为 $342$：\n\n```plain\n50    5     25*   6     17    \n14    3*    2*    7*    21    \n99*   10*   1*(B) 2*    80*    \n8     7*    5*    23*   11   \n10    0     78*   1     9\n```", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14MAR] The Lazy Cow S", "background": null, "description": "It's a hot summer day, and Bessie the cow is feeling quite lazy. She wants to locate herself at a position in her field so that she can reach as much delicious grass as possible within only a short distance.\n\nThe field Bessie inhabits is described by an N by N grid of square cells (1 <= N <= 400). The cell in row r and column c (1 <= r,c <= N) contains G(r,c) units of grass (0 <= G(r,c) <= 1000). From her initial square in the grid, Bessie is only willing to take up to K steps (0 <= K <= 2*N).\n\nEach step she takes moves her to a cell that is directly north, south, east, or west of her current location.\n\nFor example, suppose the grid is as follows, where (B) describes Bessie's initial position (here, in row 3, column 3):\n\n```plain\n50    5     25*   6     17    \n14    3*    2*    7*    21    \n99*   10*   1*(B) 2*    80*    \n8     7*    5*    23*   11   \n10    0     78*   1     9        \n```\n\nIf K=2, then Bessie can only reach the locations marked with *s.\n\nPlease help Bessie determine the maximum amount of grass she can reach, if she chooses the best possible initial location in the grid.", "inputFormat": "* Line 1: The integers N and K.\n\n* Lines 2..1+N: Line r+1 contains N integers describing row r of the grid.", "outputFormat": "* Line 1: The maximum amount of grass Bessie can reach, if she chooses the best possible initial location (the location from which she can reach the most grass).", "hint": "OUTPUT DETAILS:\n\nIn the example above, Bessie can reach 342 total units of grass if she locates herself in the middle of the grid.\n\nSource: USACO 2014 March Contest, Silver", "locale": "en"}, "zh-CN": {"title": "[USACO14MAR] The Lazy Cow S", "background": null, "description": "奶牛贝茜非常懒惰，她希望在她的地盘内找到一点最佳位置居住，以便在有限的步数内可以吃到尽量多的青草。\n\n她的地盘是一个 $N \\times N(1\\le N \\le 400)$ 的矩阵，第 $r$ 行 $c$ 列包含 $G(r,c)$ 单位的青草 $(0 \\le G(r,c) \\le 1000)$。从她的居住点，她最多愿意走 $K$ 步 $(0 \\le K \\le 2 \\times N)$，每一步她可以走到与她相邻的某个格子。", "inputFormat": "第一行两个正整数 $N,K$。\n\n接下来 $N$ 行，第 $i$（$1 \\le i \\le N$）行有 $N$ 个非负整数，表示 $G(i,1),G(i,2),\\dots,G(i,n)$。", "outputFormat": "一行一个整数，表示奶牛贝茜在有限的步数内最多可以吃到多少青草。", "hint": "样例解释：\n\n最优方案是居住在 $(3,3)$，答案为 $342$：\n\n```plain\n50    5     25*   6     17    \n14    3*    2*    7*    21    \n99*   10*   1*(B) 2*    80*    \n8     7*    5*    23*   11   \n10    0     78*   1     9\n```", "locale": "zh-CN"}}}
{"pid": "P2214", "type": "P", "difficulty": 3, "samples": [["5 2\n5\n7\n0\n17\n16\n20\n19", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2014", "USACO", "背包 DP", "栈"], "title": "[USACO14MAR] Mooo Moo S", "background": "农夫约翰完全忘了他有多少头牛了！他不好意思到牧场里去数牛，因为他不想让牛意识到他的健忘。取而代之的是，他决定在奶牛聚集的牧场里安装麦克风，秘密计算出他能从中听到的所有牛叫声的总音量，以便以此确定奶牛的数量。", "description": "FJ 的 $N(1\\le N\\le100)$ 个牧场都是沿着一条笔直的道路分布的。每一个牧场可能有许多种品种的奶牛；FJ 拥有 $B(1\\le B\\le20)$ 个不同品种的奶牛，而第 $i$ 种奶牛的叫声音量为 $V_i(1\\le V_i\\le100)$。此外，有一股强风沿着道路吹来，将牛的叫声从左往右传递，如果某个牧场的总音量是 $x$，那么它将传递 $x-1$ 的音量到右边的下一个牧场。这就意味着，一个牧场里的总音量是处在该牧场的奶牛所发出的音量加上左边前一个牧场的总音量 $-1$。数据保证，每一个牧场内由该牧场所有奶牛所发出的总音量最多为 $10^5$。", "inputFormat": "第 $1$ 行：两个用空格分隔的整数 $N$ 和 $B$。      \n第 $2 \\sim B+1$ 行：第 $i+1$ 行包含整数 $V_i$ 。        \n第 $B+2 \\sim B+N+1$ 行：第 $B+i+1$ 行表示在第 $i$ 个牧场内所能监听到的总音量。", "outputFormat": "共一行，即 FJ 拥有的最小奶牛数量。\n\n如果 FJ 不可能拥有一种牧场配置满足给出的条件，输出 $-1$。", "hint": "#### 输入说明：\nFJ 拥有 $5$ 个牧场，每个牧场总音量从左到右分别为为 $0$、$17$、$16$、$20$、$19$。FJ 有两种不同品种的奶牛；第一种奶牛的叫声音量是 $5$，第二种奶牛的叫声音量是 $7$。\n#### 输出说明：\n$2$ 号牧场场有 $2$ 头 $1$ 号品种的奶牛，$1$ 头 $2$ 号品种奶牛；还有一头牛在 $4$ 号牧场，共 $4$ 头奶牛。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14MAR] Mooo Moo S", "background": null, "description": "Farmer John has completely forgotten how many cows he owns! He is too embarrassed to go to his fields to count the cows, since he doesn't want the cows to realize his mental lapse. Instead, he decides to count his cows secretly by planting microphones in the fields in which his cows tend to gather, figuring that he can determine the number of cows from the total volume of all the mooing he hears.\n\nFJ's $N$ fields $(1 \\le N \\le 100)$ are all arranged in a line along a long straight road. Each field might contain several types of cows; FJ owns cows that come from $B$ different breeds $(1 \\le B \\le 20)$, and a cow of breed $i$ moos at a volume of $V_i (1 \\le V_i \\le 100)$. Moreover, there is a strong wind blowing down the road, which carries the sound of mooing in one direction from left to right: if the volume of mooing in some field is $X$, then in the next field this will contribute $X-1$ to the total mooing volume (and $X-2$ in the field after that, etc.). Otherwise stated, the mooing volume in a field is the sum of the contribution due to cows in that field, plus $X-1$, where $X$ is the total mooing volume in the preceding field.\n\nGiven the volume of mooing that FJ records in each field, please compute the minimum possible number of cows FJ might own.\n\nThe volume FJ records in any field is at most $100,000$.", "inputFormat": "* Line $1$: The integers $N$ and $B$.\n\n* Lines $2 \\dots 1+B$: Line $i+1$ contains the integer $V_i$.\n\n* Lines $2+B \\dots 1+B+N$: Line $1+B+i$ contains the total volume of all mooing in field $i$.", "outputFormat": "* Line $1$: The minimum number of cows owned by FJ, or `-1` if there is no configuration of cows consistent with the input.", "hint": "INPUT DETAILS:\n\nFJ owns $5$ fields, with mooing volumes $0,17,16,20,19$. There are two breeds of cows; the first moos at a volume of $5$, and the other at a volume of $7$.\n\nOUTPUT DETAILS:\n\nThere are $2$ cows of breed $\\#1$ and $1$ cow of breed $\\#2$ in field $2$, and there is another cow of breed $\\#1$ in field $4$.\n\nSource: USACO 2014 March Contest, Silver.", "locale": "en"}, "zh-CN": {"title": "[USACO14MAR] Mooo Moo S", "background": "农夫约翰完全忘了他有多少头牛了！他不好意思到牧场里去数牛，因为他不想让牛意识到他的健忘。取而代之的是，他决定在奶牛聚集的牧场里安装麦克风，秘密计算出他能从中听到的所有牛叫声的总音量，以便以此确定奶牛的数量。", "description": "FJ 的 $N(1\\le N\\le100)$ 个牧场都是沿着一条笔直的道路分布的。每一个牧场可能有许多种品种的奶牛；FJ 拥有 $B(1\\le B\\le20)$ 个不同品种的奶牛，而第 $i$ 种奶牛的叫声音量为 $V_i(1\\le V_i\\le100)$。此外，有一股强风沿着道路吹来，将牛的叫声从左往右传递，如果某个牧场的总音量是 $x$，那么它将传递 $x-1$ 的音量到右边的下一个牧场。这就意味着，一个牧场里的总音量是处在该牧场的奶牛所发出的音量加上左边前一个牧场的总音量 $-1$。数据保证，每一个牧场内由该牧场所有奶牛所发出的总音量最多为 $10^5$。", "inputFormat": "第 $1$ 行：两个用空格分隔的整数 $N$ 和 $B$。      \n第 $2 \\sim B+1$ 行：第 $i+1$ 行包含整数 $V_i$ 。        \n第 $B+2 \\sim B+N+1$ 行：第 $B+i+1$ 行表示在第 $i$ 个牧场内所能监听到的总音量。", "outputFormat": "共一行，即 FJ 拥有的最小奶牛数量。\n\n如果 FJ 不可能拥有一种牧场配置满足给出的条件，输出 $-1$。", "hint": "#### 输入说明：\nFJ 拥有 $5$ 个牧场，每个牧场总音量从左到右分别为为 $0$、$17$、$16$、$20$、$19$。FJ 有两种不同品种的奶牛；第一种奶牛的叫声音量是 $5$，第二种奶牛的叫声音量是 $7$。\n#### 输出说明：\n$2$ 号牧场场有 $2$ 头 $1$ 号品种的奶牛，$1$ 头 $2$ 号品种奶牛；还有一头牛在 $4$ 号牧场，共 $4$ 头奶牛。", "locale": "zh-CN"}}}
{"pid": "P2215", "type": "P", "difficulty": 5, "samples": [["6\n3 4 1 2 3 6\n3\n6\n4\n5\n", "Impossible\n1 2 3 6\nImpossible\n"], ["6\n6 7 1 2 3 4\n1\n2\n", "6 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "递推", "2007", "河南", "各省省选"], "title": "[HAOI2007] 上升序列", "background": "", "description": "对于一个给定的 $S=\\{a_1,a_2,a_3,…,a_n\\}$ , 若有 $P=\\{a_{x_1},a_{x_2},a_{x_3},…,a_{x_m}\\}$ , 满足 $(x_1<x_2<…<x_m)$  且 $(a_{x_1}<a_{x_2}<…<a_{x_m})$ 。那么就称 $P$ 为 $S$ 的一个上升序列。如果有多个 $P$ 满足条件，那么我们想求字典序最小的那个。\n\n任务：\n\n给出 $S$ 序列，给出若干询问。对于第 $i$ 个询问，求出长度为 $L_i$ 的上升序列，如有多个，求出字典序最小的那个（即首先 $x_1$ 最小，如果不唯一，再看 $x_2$ 最小……），如果不存在长度为 $L_i$ 的上升序列，则打印 `Impossible`。\n", "inputFormat": "第一行一个 $N$，表示序列一共有 $N$ 个元素。\n\n第二行 $N$ 个数，为 $a_1, a_2 , \\cdots , a_n$。\n\n第三行一个 $M$，表示询问次数。下面接 $M$ 行每行一个数 $L$，表示要询问长度为 $L$ 的上升序列。\n", "outputFormat": "对于每个询问，如果对应的序列存在，则输出，否则打印 `Impossible`。\n", "hint": "$N \\le 10000$，$M \\le 1000$，保证数据随机。\n", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2007] Increasing Sequence", "background": "", "description": "Given a sequence $S=\\{a_1,a_2,a_3,…,a_n\\}$, if there exists $P=\\{a_{x_1},a_{x_2},a_{x_3},…,a_{x_m}\\}$ such that $(x_1<x_2<…<x_m)$ and $(a_{x_1}<a_{x_2}<…<a_{x_m})$, then $P$ is called an increasing subsequence of $S$. If multiple $P$ satisfy the conditions, we want the lexicographically smallest one.\n\nTask:\n\nGiven the sequence $S$ and several queries. For the $i$-th query, find an increasing subsequence of length $L_i$. If there are multiple, choose the lexicographically smallest one (i.e., first minimize $x_1$; if it is not unique, then minimize $x_2$, and so on). If no increasing subsequence of length $L_i$ exists, print `Impossible`.", "inputFormat": "- The first line contains an integer $N$, the number of elements in the sequence.\n- The second line contains $N$ integers: $a_1, a_2 , \\cdots , a_n$.\n- The third line contains an integer $M$, the number of queries. Each of the next $M$ lines contains one integer $L$, asking for an increasing subsequence of length $L$.", "outputFormat": "For each query:\n- If a valid subsequence exists, output the chosen subsequence’s elements $a_{x_1}, a_{x_2}, \\dots, a_{x_L}$ on one line, separated by single spaces.\n- Otherwise, print `Impossible`.", "hint": "Constraints: $N \\le 10000$, $M \\le 1000$. The testdata are random.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2007] 上升序列", "background": "", "description": "对于一个给定的 $S=\\{a_1,a_2,a_3,…,a_n\\}$ , 若有 $P=\\{a_{x_1},a_{x_2},a_{x_3},…,a_{x_m}\\}$ , 满足 $(x_1<x_2<…<x_m)$  且 $(a_{x_1}<a_{x_2}<…<a_{x_m})$ 。那么就称 $P$ 为 $S$ 的一个上升序列。如果有多个 $P$ 满足条件，那么我们想求字典序最小的那个。\n\n任务：\n\n给出 $S$ 序列，给出若干询问。对于第 $i$ 个询问，求出长度为 $L_i$ 的上升序列，如有多个，求出字典序最小的那个（即首先 $x_1$ 最小，如果不唯一，再看 $x_2$ 最小……），如果不存在长度为 $L_i$ 的上升序列，则打印 `Impossible`。\n", "inputFormat": "第一行一个 $N$，表示序列一共有 $N$ 个元素。\n\n第二行 $N$ 个数，为 $a_1, a_2 , \\cdots , a_n$。\n\n第三行一个 $M$，表示询问次数。下面接 $M$ 行每行一个数 $L$，表示要询问长度为 $L$ 的上升序列。\n", "outputFormat": "对于每个询问，如果对应的序列存在，则输出，否则打印 `Impossible`。\n", "hint": "$N \\le 10000$，$M \\le 1000$，保证数据随机。\n", "locale": "zh-CN"}}}
{"pid": "P2216", "type": "P", "difficulty": 4, "samples": [["5 4 2\n1 2 5 6\n0 17 16 0\n16 17 2 1\n2 10 2 1\n1 2 2 2\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2007", "河南", "各省省选", "单调队列", "队列", "ST 表"], "title": "[HAOI2007] 理想的正方形", "background": "", "description": "有一个 $a \\times b$ 的整数组成的矩阵，现请你从中找出一个 $n \\times n$ 的正方形区域，使得该区域所有数中的最大值和最小值的差最小。", "inputFormat": "第一行为 $3$ 个整数，分别表示 $a,b,n$ 的值。\n\n第二行至第 $a+1$ 行每行为 $b$ 个非负整数，表示矩阵中相应位置上的数。每行相邻两数之间用一空格分隔。", "outputFormat": "仅一个整数，为 $a \\times b$ 矩阵中所有“ $n \\times n$ 正方形区域中的最大整数和最小整数的差值”的最小值。", "hint": "矩阵中的所有数都不超过 $1,000,000,000$。\n\n$20\\%$ 的数据 $2 \\le a,b \\le 100,n \\le a,n \\le b,n \\le 10$。\n\n$100\\%$ 的数据 $2 \\le a,b \\le 1000,n \\le a,n \\le b,n \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2007] Ideal Square", "background": "", "description": "Given an $a \\times b$ matrix of integers, find an $n \\times n$ square region such that the difference between the maximum and minimum numbers in that region is minimized.", "inputFormat": "The first line contains 3 integers, representing the values of $a$, $b$, and $n$.\n\nFrom the second line to the $(a+1)$-th line, each line contains $b$ nonnegative integers, representing the numbers at the corresponding positions in the matrix. Adjacent numbers on the same line are separated by a single space.", "outputFormat": "Output a single integer: the minimal possible difference between the maximum and the minimum among all $n \\times n$ square regions in the $a \\times b$ matrix.", "hint": "All numbers in the matrix do not exceed 1,000,000,000.\n\nConstraints:\n\nFor 20% of the testdata, $2 \\le a, b \\le 100$, $n \\le a$, $n \\le b$, $n \\le 10$.\n\nFor 100% of the testdata, $2 \\le a, b \\le 1000$, $n \\le a$, $n \\le b$, $n \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2007] 理想的正方形", "background": "", "description": "有一个 $a \\times b$ 的整数组成的矩阵，现请你从中找出一个 $n \\times n$ 的正方形区域，使得该区域所有数中的最大值和最小值的差最小。", "inputFormat": "第一行为 $3$ 个整数，分别表示 $a,b,n$ 的值。\n\n第二行至第 $a+1$ 行每行为 $b$ 个非负整数，表示矩阵中相应位置上的数。每行相邻两数之间用一空格分隔。", "outputFormat": "仅一个整数，为 $a \\times b$ 矩阵中所有“ $n \\times n$ 正方形区域中的最大整数和最小整数的差值”的最小值。", "hint": "矩阵中的所有数都不超过 $1,000,000,000$。\n\n$20\\%$ 的数据 $2 \\le a,b \\le 100,n \\le a,n \\le b,n \\le 10$。\n\n$100\\%$ 的数据 $2 \\le a,b \\le 1000,n \\le a,n \\le b,n \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P2217", "type": "P", "difficulty": 5, "samples": [["5 4 4\r\n2 3 4 6\r\n5 7 5 1\r\n10 4 0 5\r\n2 0 2 3\r\n4 1 1 1\r\n", "0.50"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2007", "河南", "各省省选", "记忆化搜索"], "title": "[HAOI2007] 分割矩阵", "background": "", "description": "将一个 $a\\times b$ 的数字矩阵进行如下分割：将原矩阵沿某一条直线分割成两个矩阵，再将生成的两个矩阵继续如此分割（当然也可以只分割其中的一个），这样分割了 $(n-1)$ 次后，原矩阵被分割成了 $n$ 个矩阵。（每次分割都只能沿着数字间的缝隙进行）\n\n原矩阵中每一位置上有一个分值，一个矩阵的总分为其所含各位置上分值之和。现在需要把矩阵按上述规则分割成 $n$ 个矩阵，并使各矩阵总分的均方差最小。\n\n请编程对给出的矩阵及 $n$，求出均方差的最小值。\n", "inputFormat": "第一行为 $3$ 个整数，表示 $a,b,n(1<a,b,n\\le 10)$ 的值。\n\n第二行至第 $a+1$ 行每行为 $b$ 个小于 $100$ 的非负整数，表示矩阵中相应位置上的分值。每行相邻两数之间用一个空格分开。\n", "outputFormat": "仅一个数，为均方差的最小值。（四舍五入精确到小数点后 $2$ 位）\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2007] Splitting the Matrix", "background": "", "description": "Partition an $a \\times b$ numeric matrix as follows: cut the original matrix along a straight line into two matrices, then continue partitioning the resulting matrices in the same way (you may also choose to partition only one of them). After $(n - 1)$ cuts, the original matrix is partitioned into $n$ matrices. Each cut may only be made along the gaps between numbers (i.e., along the grid lines between cells).\n\nEach position in the original matrix has a score. The total score of a matrix is the sum of the scores at all positions it contains. Now, you need to partition the matrix into $n$ matrices according to the above rule, minimizing the mean square deviation of the total scores of the matrices.\n\nGiven the matrix and $n$, write a program to compute the minimal value of the mean square deviation.", "inputFormat": "The first line contains 3 integers, the values of $a, b, n$ $(1 < a, b, n \\le 10)$.\n\nFrom the second line to the $(a + 1)$-th line, each line contains $b$ non-negative integers less than $100$, representing the score at the corresponding position in the matrix. Adjacent numbers in each row are separated by a single space.", "outputFormat": "Output a single number: the minimal mean square deviation, rounded to two decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2007] 分割矩阵", "background": "", "description": "将一个 $a\\times b$ 的数字矩阵进行如下分割：将原矩阵沿某一条直线分割成两个矩阵，再将生成的两个矩阵继续如此分割（当然也可以只分割其中的一个），这样分割了 $(n-1)$ 次后，原矩阵被分割成了 $n$ 个矩阵。（每次分割都只能沿着数字间的缝隙进行）\n\n原矩阵中每一位置上有一个分值，一个矩阵的总分为其所含各位置上分值之和。现在需要把矩阵按上述规则分割成 $n$ 个矩阵，并使各矩阵总分的均方差最小。\n\n请编程对给出的矩阵及 $n$，求出均方差的最小值。\n", "inputFormat": "第一行为 $3$ 个整数，表示 $a,b,n(1<a,b,n\\le 10)$ 的值。\n\n第二行至第 $a+1$ 行每行为 $b$ 个小于 $100$ 的非负整数，表示矩阵中相应位置上的分值。每行相邻两数之间用一个空格分开。\n", "outputFormat": "仅一个数，为均方差的最小值。（四舍五入精确到小数点后 $2$ 位）\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2218", "type": "P", "difficulty": 5, "samples": [["4\r\n0 1\r\n0 -1\r\n1 0\r\n-1 0\r\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2007", "河南", "二分", "各省省选", "深度优先搜索 DFS"], "title": "[HAOI2007] 覆盖问题", "background": "", "description": "某人在山上种了 $N$ 棵小树苗。冬天来了，温度急速下降，小树苗脆弱得不堪一击，于是树主人想用一些塑料薄膜把这些小树遮盖起来，经过一番长久的思考，他决定 用 $3$ 个 $L \\times L$ 的正方形塑料薄膜将小树遮起来。我们不妨将山建立一个平面直角坐标系，设第 $i$ 棵小树的坐标为 $(X_i,Y_i)$ ，$3$ 个 $L \\times L$ 的正方形的边要求平行于坐标轴，一个点如果在正方形的边界上，也算作被覆盖。当然，我们希望塑料薄膜面积越小越好，即求 $L$ 最小值。", "inputFormat": "接下来有 $N$ 行，第 $i+1$ 行有 $2$ 个整数 $X_i,Y_i$，表示第 $i$ 棵树的坐标，保证不会有 $2$ 个树的坐标相同。", "outputFormat": "一行，输出最小的 $L$ 值。\n", "hint": "对于 $100\\%$ 的数据，$-1,000,000,000 \\le X_i,Y_i \\le 1,000,000,000。$\n\n对于 $30\\%$ 的数据，$N \\le 100。$\n\n对于 $50\\%$ 的数据，$N \\le 2000。$\n\n对于 $100\\%$ 的数据，$N \\le 20000。$", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2007] Covering Problem", "background": "", "description": "Someone planted $N$ saplings on a mountain. Winter has come, the temperature dropped sharply, and the saplings are too fragile. The owner wants to cover them with some plastic sheets. After careful consideration, he decides to use $3$ square plastic sheets of size $L \\times L$ to cover the saplings. We set up a 2D Cartesian coordinate system on the mountain; the coordinates of the $i$-th sapling are $(X_i, Y_i)$. The $3$ squares of size $L \\times L$ must be axis-aligned. A point lying on the boundary of a square is also considered covered. Of course, we want the plastic area to be as small as possible; that is, find the minimal $L$.", "inputFormat": "The first line contains an integer $N$.  \nThe next $N$ lines each contain two integers $X_i, Y_i$, giving the coordinates of the $i$-th tree. It is guaranteed that no two trees share the same coordinates.", "outputFormat": "Output one line: the minimal value of $L$.", "hint": "For $100\\%$ of the testdata, $-1,000,000,000 \\le X_i, Y_i \\le 1,000,000,000$.\n\nFor $30\\%$ of the testdata, $N \\le 100$.\n\nFor $50\\%$ of the testdata, $N \\le 2000$.\n\nFor $100\\%$ of the testdata, $N \\le 20000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2007] 覆盖问题", "background": "", "description": "某人在山上种了 $N$ 棵小树苗。冬天来了，温度急速下降，小树苗脆弱得不堪一击，于是树主人想用一些塑料薄膜把这些小树遮盖起来，经过一番长久的思考，他决定 用 $3$ 个 $L \\times L$ 的正方形塑料薄膜将小树遮起来。我们不妨将山建立一个平面直角坐标系，设第 $i$ 棵小树的坐标为 $(X_i,Y_i)$ ，$3$ 个 $L \\times L$ 的正方形的边要求平行于坐标轴，一个点如果在正方形的边界上，也算作被覆盖。当然，我们希望塑料薄膜面积越小越好，即求 $L$ 最小值。", "inputFormat": "接下来有 $N$ 行，第 $i+1$ 行有 $2$ 个整数 $X_i,Y_i$，表示第 $i$ 棵树的坐标，保证不会有 $2$ 个树的坐标相同。", "outputFormat": "一行，输出最小的 $L$ 值。\n", "hint": "对于 $100\\%$ 的数据，$-1,000,000,000 \\le X_i,Y_i \\le 1,000,000,000。$\n\n对于 $30\\%$ 的数据，$N \\le 100。$\n\n对于 $50\\%$ 的数据，$N \\le 2000。$\n\n对于 $100\\%$ 的数据，$N \\le 20000。$", "locale": "zh-CN"}}}
{"pid": "P2219", "type": "P", "difficulty": 5, "samples": [["4 5 4 4 2 2\n20 19 18 17 16\n15 14 13 12 11\n10 9 8 7 6\n5 4 3 2 1\n", "132"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "河南", "各省省选", "单调队列", "队列"], "title": "[HAOI2007] 修筑绿化带", "background": "", "description": "为了增添公园的景致，现在需要在公园中修筑一个花坛，同时在花坛四周修建一片绿化带，让花坛被绿化带围起来。\n\n如果把公园看成一个 $M\\times N$ 的矩形，那么花坛可以看成一个 $C\\times D$ 的矩形，绿化带和花坛一起可以看成一个 $A\\times B$ 的矩形。\n\n如果将花园中的每一块土地的“肥沃度”定义为该块土地上每一个小块肥沃度之和，那么，绿化带的肥沃度为 $A\\times B$ 块的肥沃度减去 $C\\times D$ 块的肥沃度。\n\n为了使得绿化带的生长得旺盛，我们希望绿化带的肥沃度最大。", "inputFormat": "第一行有六个正整数 $M,N,A,B,C,D$。\n\n接下来一个 $M\\times N$ 的数字矩阵，其中矩阵的第 $i$ 行 $j$ 列元素为一个整数 $x_{i,j}$，表示该花园的第 $i$ 行第 $j$ 列的土地 “肥沃度”。", "outputFormat": "一个正整数，表示绿化带的最大肥沃程度。\n", "hint": "对于 $30\\%$ 的数据，$1\\leq M,N\\leq 50$。\n\n对于 $100\\%$ 的数据，$1\\leq M,N\\leq 1000$，$1\\leq A\\leq M$，$1\\leq B\\leq N$，$1\\leq C\\leq A-2$，$1\\leq D\\leq B-2$，$1\\leq x_{i,j}\\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2007] Building the Green Belt", "background": "", "description": "To enhance the park’s scenery, we need to build a flowerbed in the park and, around the flowerbed, construct a green belt so that the flowerbed is enclosed by the green belt.\n\nIf we regard the park as an $M\\times N$ rectangle, then the flowerbed can be regarded as a $C\\times D$ rectangle, and the green belt together with the flowerbed can be regarded as an $A\\times B$ rectangle.\n\nIf we define the fertility of a rectangular land region as the sum of the fertility values of all unit cells within that region, then the fertility of the green belt equals the fertility of the $A\\times B$ block minus the fertility of the $C\\times D$ block.\n\nTo make the green belt grow vigorously, we want the fertility of the green belt to be maximized.", "inputFormat": "The first line contains six positive integers $M,N,A,B,C,D$.\n\nThen follows an $M\\times N$ numeric matrix. The element in row $i$ and column $j$ is an integer $x_{i,j}$, representing the fertility of the land at row $i$ and column $j$ of the park.", "outputFormat": "Output a single positive integer, the maximum fertility of the green belt.", "hint": "For $30\\%$ of the testdata, $1\\leq M,N\\leq 50$.\n\nFor $100\\%$ of the testdata, $1\\leq M,N\\leq 1000$, $1\\leq A\\leq M$, $1\\leq B\\leq N$, $1\\leq C\\leq A-2$, $1\\leq D\\leq B-2$, $1\\leq x_{i,j}\\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2007] 修筑绿化带", "background": "", "description": "为了增添公园的景致，现在需要在公园中修筑一个花坛，同时在花坛四周修建一片绿化带，让花坛被绿化带围起来。\n\n如果把公园看成一个 $M\\times N$ 的矩形，那么花坛可以看成一个 $C\\times D$ 的矩形，绿化带和花坛一起可以看成一个 $A\\times B$ 的矩形。\n\n如果将花园中的每一块土地的“肥沃度”定义为该块土地上每一个小块肥沃度之和，那么，绿化带的肥沃度为 $A\\times B$ 块的肥沃度减去 $C\\times D$ 块的肥沃度。\n\n为了使得绿化带的生长得旺盛，我们希望绿化带的肥沃度最大。", "inputFormat": "第一行有六个正整数 $M,N,A,B,C,D$。\n\n接下来一个 $M\\times N$ 的数字矩阵，其中矩阵的第 $i$ 行 $j$ 列元素为一个整数 $x_{i,j}$，表示该花园的第 $i$ 行第 $j$ 列的土地 “肥沃度”。", "outputFormat": "一个正整数，表示绿化带的最大肥沃程度。\n", "hint": "对于 $30\\%$ 的数据，$1\\leq M,N\\leq 50$。\n\n对于 $100\\%$ 的数据，$1\\leq M,N\\leq 1000$，$1\\leq A\\leq M$，$1\\leq B\\leq N$，$1\\leq C\\leq A-2$，$1\\leq D\\leq B-2$，$1\\leq x_{i,j}\\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P2220", "type": "P", "difficulty": 3, "samples": [["3 4 5\r\n1 1\r\n1 1\r\n2 2\r\n2 3\r\n4 3\r\n", "90"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2012", "河南", "各省省选", "离散化"], "title": "[HAOI2012] 容易题", "background": "", "description": "有一个长度为 $m$ 的正整数数列 $A$，满足 $\\forall i \\in A, i \\in [1, n]$。\n\n现在给定一些限制（$A_x$ 不能为 $y$）。设数列 $A$ 的积为 $\\prod A$，求所有可能数列的积相加起来的和。\n\n换言之，令 $S$ 为所有可能的数列情况 $\\{A, A', \\ldots\\}$，求\n\n$$ \\sum_{T \\in S} \\prod T $$\n\n答案对 $10 ^ 9 + 7$ 取模。", "inputFormat": "第一行三个正整数 $n, m, k$。$n, m$ 如题目所示，$k$ 表示限制的条数。\n\n接下来 $k$ 行，每行两个正整数 $x, y$ 表示限制 $A_x \\neq y$。\n", "outputFormat": "一行一个正整数表示答案。\n\n如果没有任何合法数列，输出 $0$。\n", "hint": "### 样例解释 #1\n\n$A_1$ 不能取 $1$，$A_2$ 不能取 $2, 3$，$A_4$ 不能取 $3$，所以可能的数列有以下 $12$ 种：\n\n| 数列 | 积 |\n| :-: | :-: |\n| $\\{2,   1,   1,   1\\}$           | $2$ |\n| $\\{2,   1,   1,   2\\}$           | $4$ |\n| $\\{2,   1,   2,   1\\}$           | $4$ |\n| $\\{2,   1,   2,   2\\}$           | $8$ |\n| $\\{2,   1,   3,   1\\}$           | $6$ |\n| $\\{2,   1,   3,   2\\}$           | $12$ |\n| $\\{3,   1,   1,   1\\}$           | $3$ |\n| $\\{3,   1,   1,   2\\}$           | $6$ |\n| $\\{3,   1,   2,   1\\}$           | $6$ |\n| $\\{3,   1,   2,   2\\}$           | $12$ |\n| $\\{3,   1,   3,   1\\}$           | $9$ |\n| $\\{3,   1,   3,   2\\}$           | $18$ |\n\n\n### 数据范围\n\n对于 $30\\%$ 的数据，$n \\leq 4$，$m \\leq 10$，$k \\leq 10$。\n\n对于另外 $20\\%$ 的数据，$k = 0$。\n\n对于 $70\\%$ 的数据，$n, m, k \\leq 1000$。\n\n对于 $100\\%$ 的数据，$1\\leq n, m \\leq 10^9$，$0\\leq k \\leq 10^5$，$1 \\leq x \\leq m$，$1 \\leq y \\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2012] Easy Problem", "background": "", "description": "There is a sequence $A$ of length $m$ consisting of positive integers, where every element lies in $[1, n]$.\n\nYou are given some constraints ($A_x$ cannot be $y$). Let the product of the sequence $A$ be $\\prod A$. Compute the sum of the products over all valid sequences.\n\nIn other words, let $S$ be the set of all valid sequences $\\{A, A', \\ldots\\}$, and compute\n$$ \\sum_{T \\in S} \\prod T. $$\n\nThe answer is taken modulo $10^9 + 7$.", "inputFormat": "The first line contains three positive integers $n, m, k$. Here, $n$ and $m$ are as described above, and $k$ is the number of constraints.\n\nEach of the next $k$ lines contains two positive integers $x, y$, representing the constraint $A_x \\ne y$.", "outputFormat": "Output a single integer on one line: the answer.\n\nIf there is no valid sequence, output $0$.", "hint": "### Sample Explanation #1\n\n$A_1$ cannot be $1$, $A_2$ cannot be $2, 3$, and $A_4$ cannot be $3$, so there are the following $12$ possible sequences:\n\n| Sequence | Product |\n| :-: | :-: |\n| $\\{2,   1,   1,   1\\}$           | $2$ |\n| $\\{2,   1,   1,   2\\}$           | $4$ |\n| $\\{2,   1,   2,   1\\}$           | $4$ |\n| $\\{2,   1,   2,   2\\}$           | $8$ |\n| $\\{2,   1,   3,   1\\}$           | $6$ |\n| $\\{2,   1,   3,   2\\}$           | $12$ |\n| $\\{3,   1,   1,   1\\}$           | $3$ |\n| $\\{3,   1,   1,   2\\}$           | $6$ |\n| $\\{3,   1,   2,   1\\}$           | $6$ |\n| $\\{3,   1,   2,   2\\}$           | $12$ |\n| $\\{3,   1,   3,   1\\}$           | $9$ |\n| $\\{3,   1,   3,   2\\}$           | $18$ |\n\n### Constraints\n\n- For $30\\%$ of the testdata, $n \\leq 4$, $m \\leq 10$, $k \\leq 10$.\n- For another $20\\%$ of the testdata, $k = 0$.\n- For $70\\%$ of the testdata, $n, m, k \\leq 1000$.\n- For $100\\%$ of the testdata, $1 \\leq n, m \\leq 10^9$, $0 \\leq k \\leq 10^5$, $1 \\leq x \\leq m$, $1 \\leq y \\leq n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2012] 容易题", "background": "", "description": "有一个长度为 $m$ 的正整数数列 $A$，满足 $\\forall i \\in A, i \\in [1, n]$。\n\n现在给定一些限制（$A_x$ 不能为 $y$）。设数列 $A$ 的积为 $\\prod A$，求所有可能数列的积相加起来的和。\n\n换言之，令 $S$ 为所有可能的数列情况 $\\{A, A', \\ldots\\}$，求\n\n$$ \\sum_{T \\in S} \\prod T $$\n\n答案对 $10 ^ 9 + 7$ 取模。", "inputFormat": "第一行三个正整数 $n, m, k$。$n, m$ 如题目所示，$k$ 表示限制的条数。\n\n接下来 $k$ 行，每行两个正整数 $x, y$ 表示限制 $A_x \\neq y$。\n", "outputFormat": "一行一个正整数表示答案。\n\n如果没有任何合法数列，输出 $0$。\n", "hint": "### 样例解释 #1\n\n$A_1$ 不能取 $1$，$A_2$ 不能取 $2, 3$，$A_4$ 不能取 $3$，所以可能的数列有以下 $12$ 种：\n\n| 数列 | 积 |\n| :-: | :-: |\n| $\\{2,   1,   1,   1\\}$           | $2$ |\n| $\\{2,   1,   1,   2\\}$           | $4$ |\n| $\\{2,   1,   2,   1\\}$           | $4$ |\n| $\\{2,   1,   2,   2\\}$           | $8$ |\n| $\\{2,   1,   3,   1\\}$           | $6$ |\n| $\\{2,   1,   3,   2\\}$           | $12$ |\n| $\\{3,   1,   1,   1\\}$           | $3$ |\n| $\\{3,   1,   1,   2\\}$           | $6$ |\n| $\\{3,   1,   2,   1\\}$           | $6$ |\n| $\\{3,   1,   2,   2\\}$           | $12$ |\n| $\\{3,   1,   3,   1\\}$           | $9$ |\n| $\\{3,   1,   3,   2\\}$           | $18$ |\n\n\n### 数据范围\n\n对于 $30\\%$ 的数据，$n \\leq 4$，$m \\leq 10$，$k \\leq 10$。\n\n对于另外 $20\\%$ 的数据，$k = 0$。\n\n对于 $70\\%$ 的数据，$n, m, k \\leq 1000$。\n\n对于 $100\\%$ 的数据，$1\\leq n, m \\leq 10^9$，$0\\leq k \\leq 10^5$，$1 \\leq x \\leq m$，$1 \\leq y \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P2221", "type": "P", "difficulty": 5, "samples": [["4 5\nC 1 4 2\nC 1 2 -1\nQ 1 2\nQ 2 4\nQ 1 4\n", "1/1\n8/3\n17/6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2012", "河南", "线段树", "各省省选", "O2优化", "最大公约数 gcd", "期望"], "title": "[HAOI2012] 高速公路", "background": "Y901 高速公路是一条重要的交通纽带，政府部门建设初期的投入以及使用期间的养护费用都不低，因此政府在这条高速公路上设立了许多收费站。", "description": "Y901 高速公路是一条由 $n-1$ 段路以及 $n$ 个收费站组成的东西向的链，我们按照由西向东的顺序将收费站依次编号为 $1 \\sim n$，从收费站 $i$ 行驶到 $i+1$（或从 $i+1$ 行驶到 $i$）需要收取 $v_i$ 的费用。高速路刚建成时所有的路段都是免费的，即所有 $v_i = 0$。\n\n政府部门根据实际情况，会不定期地对连续路段的收费标准进行调整，根据政策涨价或降价。\n\n无聊的小 A 同学总喜欢研究一些稀奇古怪的问题，他开车在这条高速路上行驶时想到了这样一个问题：对于给定的 $l,r$，在第 $l$ 个到第 $r$ 个收费站里等概率随机取出两个不同的收费站 $a$ 和 $b$，那么从 $a$ 行驶到 $b$ 将期望花费多少费用呢?\n", "inputFormat": "第一行有两个整数，分别表示收费站个数 $n$，和询问与调整费用的总数 $m$。\n\n接下来 $m$ 行，每行表示一次调整或询问，首先有一个字符 $op$。\n\n- 若 $op$ 为 `C`，则后面有三个整数 $l, r, v$，表示将第 $l$ 个收费站到第 $r$ 个收费站之间所有**道路**的通行费用增加 $v$。\n- 若 $op$ 为 `Q`，则后面有两个整数 $l, r$，对于给定的 $l, r$，请回答小 A 的问题。", "outputFormat": "对于每次询问，输出一行一个既约分数表示答案。\n\n若答案为一个整数 $a$，请输出 `a/1`。", "hint": "#### 数据规模与约定\n\n本题共 $10$ 个测试点，各测试点数据规模如下表所示\n\n\n| 测试点编号 | $n=$ | $m=$ |\n| :------: | :---: | :-: |\n|$1$| $10$ |$10$|\n|$2$|    $100$ |    $100$ |\n|$3$  |  $1000$ |   $1000$|\n|$4$   | $10000$ |   $10000$|\n|$5$    |$50000$  |  $50000$|\n|$6$  |  $60000$   | $60000$|\n|$7$   | $70000$ |   $70000$|\n|$8$   | $80000$  |  $80000$|\n|$9$    |$90000$   | $90000$|\n|$10$   | $100000$  |  $100000$|\n\n对于全部的测试点，保证 $1 \\leq n, m \\leq 10^5$，$op \\in \\{\\texttt C, \\texttt Q\\}$，$1 \\leq l \\leq r \\leq n$，$-10^4 \\leq v \\leq 10^4$，在任何时刻，$0\\leq v_i \\leq 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2012] Highway", "background": "The Y901 Expressway is an important transportation link. Both the initial construction investment and the maintenance costs during operation are high, so the government has set up many toll stations on this expressway.", "description": "The Y901 Expressway is an east–west chain consisting of $n-1$ road segments and $n$ toll stations. From west to east, we number the stations $1$ to $n$. Traveling from station $i$ to $i+1$ (or from $i+1$ to $i$) costs $v_i$. When the expressway was first built, all segments were free, i.e., all $v_i = 0$.\n\nThe authorities will, from time to time, adjust the toll standards for consecutive segments, increasing or decreasing them according to policy.\n\nA bored student, \"Xiao A\" (pinyin: Xiao A), likes to ponder quirky questions. While driving on this expressway, he wondered: for given $l, r$, choose two distinct stations $a$ and $b$ uniformly at random from stations $l$ through $r$. What is the expected cost to travel from $a$ to $b$?", "inputFormat": "The first line contains two integers $n$ and $m$, the number of toll stations and the total number of updates and queries.\n\nEach of the next $m$ lines describes an update or a query and begins with a character $op$.\n\n- If $op$ is `C`, then there follow three integers $l, r, v$, meaning: increase by $v$ the toll on every road segment between the $l$-th and the $r$-th stations (i.e., all segments with indices $i$ where $l \\le i < r$).\n- If $op$ is `Q`, then there follow two integers $l, r$. For the given $l, r$, answer Xiao A’s question.", "outputFormat": "For each query, output a single line containing the answer as a reduced fraction.\n\nIf the answer is an integer $a$, output `a/1`.", "hint": "Constraints\n\nThere are $10$ test points. The scale of each test point is as follows.\n\n| Test Point | $n=$ | $m=$ |\n| :--------: | :--: | :--: |\n| 1 | $10$ | $10$ |\n| 2 | $100$ | $100$ |\n| 3 | $1000$ | $1000$ |\n| 4 | $10000$ | $10000$ |\n| 5 | $50000$ | $50000$ |\n| 6 | $60000$ | $60000$ |\n| 7 | $70000$ | $70000$ |\n| 8 | $80000$ | $80000$ |\n| 9 | $90000$ | $90000$ |\n| 10 | $100000$ | $100000$ |\n\nFor all test points, it is guaranteed that $1 \\le n, m \\le 10^5$, $op \\in \\{\\texttt{C}, \\texttt{Q}\\}$, $1 \\le l \\le r \\le n$, $-10^4 \\le v \\le 10^4$, and at any time $0 \\le v_i \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2012] 高速公路", "background": "Y901 高速公路是一条重要的交通纽带，政府部门建设初期的投入以及使用期间的养护费用都不低，因此政府在这条高速公路上设立了许多收费站。", "description": "Y901 高速公路是一条由 $n-1$ 段路以及 $n$ 个收费站组成的东西向的链，我们按照由西向东的顺序将收费站依次编号为 $1 \\sim n$，从收费站 $i$ 行驶到 $i+1$（或从 $i+1$ 行驶到 $i$）需要收取 $v_i$ 的费用。高速路刚建成时所有的路段都是免费的，即所有 $v_i = 0$。\n\n政府部门根据实际情况，会不定期地对连续路段的收费标准进行调整，根据政策涨价或降价。\n\n无聊的小 A 同学总喜欢研究一些稀奇古怪的问题，他开车在这条高速路上行驶时想到了这样一个问题：对于给定的 $l,r$，在第 $l$ 个到第 $r$ 个收费站里等概率随机取出两个不同的收费站 $a$ 和 $b$，那么从 $a$ 行驶到 $b$ 将期望花费多少费用呢?\n", "inputFormat": "第一行有两个整数，分别表示收费站个数 $n$，和询问与调整费用的总数 $m$。\n\n接下来 $m$ 行，每行表示一次调整或询问，首先有一个字符 $op$。\n\n- 若 $op$ 为 `C`，则后面有三个整数 $l, r, v$，表示将第 $l$ 个收费站到第 $r$ 个收费站之间所有**道路**的通行费用增加 $v$。\n- 若 $op$ 为 `Q`，则后面有两个整数 $l, r$，对于给定的 $l, r$，请回答小 A 的问题。", "outputFormat": "对于每次询问，输出一行一个既约分数表示答案。\n\n若答案为一个整数 $a$，请输出 `a/1`。", "hint": "#### 数据规模与约定\n\n本题共 $10$ 个测试点，各测试点数据规模如下表所示\n\n\n| 测试点编号 | $n=$ | $m=$ |\n| :------: | :---: | :-: |\n|$1$| $10$ |$10$|\n|$2$|    $100$ |    $100$ |\n|$3$  |  $1000$ |   $1000$|\n|$4$   | $10000$ |   $10000$|\n|$5$    |$50000$  |  $50000$|\n|$6$  |  $60000$   | $60000$|\n|$7$   | $70000$ |   $70000$|\n|$8$   | $80000$  |  $80000$|\n|$9$    |$90000$   | $90000$|\n|$10$   | $100000$  |  $100000$|\n\n对于全部的测试点，保证 $1 \\leq n, m \\leq 10^5$，$op \\in \\{\\texttt C, \\texttt Q\\}$，$1 \\leq l \\leq r \\leq n$，$-10^4 \\leq v \\leq 10^4$，在任何时刻，$0\\leq v_i \\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P2222", "type": "P", "difficulty": 4, "samples": [["1 2                       \r\n3 4 2 3\r\n1 1 3\r\n1 4 5\r\n2 2 1\r\n3 1 2\r\n\r\n1 2 2\r\n2 1 1\r\n3 1 2\r\n3 2 4\r\n\r\n1 2 2\r\n1 3 3\r\n2 1 1\r\n2 2 2\r\n", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2001", "各省省选", "湖南"], "title": "[HNOI2001] 矩阵乘积", "background": "", "description": "已知矩阵：\n\n$$A_{m\\times n}=\\begin{bmatrix}a_{1,1} & a_{1,2} & \\cdots & a_{1,n}\\\\ a_{2,1} & a_{2,2} & \\cdots & a_{2,n} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ a_{m,1} & a_{m,2} & \\cdots &a_{m,n} \\end{bmatrix} ,B_{n\\times p}=\\begin{bmatrix}b_{1,1} & b_{1,2} & \\cdots & b_{1,p}\\\\ b_{2,1} & b_{2,2} & \\cdots & b_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ b_{n,1} & b_{n,2} & \\cdots &b_{n,q} \\end{bmatrix}$$\n\n当矩阵 $A$ 的列数与矩阵 $B$ 的行数相同时，则 $A$ 与 $B$ 可以相乘，其乘积为一个 $m\\times p$ 的矩阵 $D$：\n\n$$D_{m\\times p}=\\begin{bmatrix} d_{1,1} & d_{1,2} & \\cdots & d_{1,p}\\\\ d_{2,1} & d_{2,2} & \\cdots & d_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ d_{m,1} & d_{m,2} & \\cdots & d_{m,p}\\end{bmatrix}$$\n\n其中 $d_{i,j}=\\sum^n_{k=1} a_{i,k} \\times b_{k,j}$，简记为 $D=A\\times B$。\n\n现已知三个矩阵 $A,B,C$，这三个矩阵大多数元素为 $0$，我们把这种矩阵称为稀疏矩阵。因此，我们采用三元组 $i,j,a$ 来表示矩阵的第 $i$ 行第 $j$ 列的值为 $a$ 其余未列出的元素均为 $0$；在计算机中，我们仅给出非零元素的三元组，而且使用行优先法给出稀疏矩阵的三元组，首先是第一行按列给出，然后是第二行按列给出……\n\n例如，矩阵：$\\begin{bmatrix}1&0&0&0\\\\0&0&2&-1\\\\0&1&2&3\\\\0&0&0&0\\end{bmatrix}$ 那么，矩阵的三元组表示为：\n\n```plain\n1 1 1\n2 3 2\n2 4 -1\n3 2 1 \n3 3 2\n3 4 3\n```\n\n你的任务就是：计算矩阵 $D=A\\times B\\times C$。", "inputFormat": "第一行为两个正整数 $x,y$，分别表示输出结果所在的行和列。\n\n第二行为四个整数 $m,n,o,p$，表明 $A$ 为$m\\times n$ 的矩阵，$B$ 为 $n\\times o$ 的矩阵，$C$ 为 $o\\times p$ 的矩阵。\n\n第三行以后的每一行有三个整数分别是矩阵的三元组表示法中的一个元素的值，每个矩阵之间有一个空行。表示的顺序是矩阵 $A,B,C$。\n", "outputFormat": "仅一个整数，为 $D$ 的第 $x$ 行第 $y$ 列的元素的值。", "hint": "#### 数据规模与约定\n对于全部的测试点，保证 $1\\le m,n,o,p\\le 6\\times 10^3$，三元数组的总个数不大于 $6\\times 10^3$。数据之间用空格分开。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Matrix Product", "background": "", "description": "Given matrices:\n\n$$A_{m\\times n}=\\begin{bmatrix}a_{1,1} & a_{1,2} & \\cdots & a_{1,n}\\\\ a_{2,1} & a_{2,2} & \\cdots & a_{2,n} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ a_{m,1} & a_{m,2} & \\cdots &a_{m,n} \\end{bmatrix} ,B_{n\\times p}=\\begin{bmatrix}b_{1,1} & b_{1,2} & \\cdots & b_{1,p}\\\\ b_{2,1} & b_{2,2} & \\cdots & b_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ b_{n,1} & b_{n,2} & \\cdots &b_{n,p} \\end{bmatrix}$$\n\nWhen the number of columns of matrix $A$ equals the number of rows of matrix $B$, then $A$ and $B$ can be multiplied. Their product is an $m\\times p$ matrix $D$:\n\n$$D_{m\\times p}=\\begin{bmatrix} d_{1,1} & d_{1,2} & \\cdots & d_{1,p}\\\\ d_{2,1} & d_{2,2} & \\cdots & d_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ d_{m,1} & d_{m,2} & \\cdots & d_{m,p}\\end{bmatrix}$$\n\nwhere $d_{i,j}=\\sum^n_{k=1} a_{i,k} \\times b_{k,j}$, abbreviated as $D=A\\times B$.\n\nNow three matrices $A, B, C$ are given. Most elements of these matrices are $0$; we call such matrices sparse matrices. Therefore, we use a triple $i, j, a$ to indicate that the value at row $i$ and column $j$ is $a$, and all other unspecified elements are $0$. In the computer, we only give triples of nonzero elements, and we use row-major order: first give the first row in increasing column order, then the second row in increasing column order, and so on.\n\nFor example, for the matrix $\\begin{bmatrix}1&0&0&0\\\\0&0&2&-1\\\\0&1&2&3\\\\0&0&0&0\\end{bmatrix}$, its triple representation is:\n\n```plain\n1 1 1\n2 3 2\n2 4 -1\n3 2 1 \n3 3 2\n3 4 3\n```\n\nYour task is to compute $D=A\\times B\\times C$.", "inputFormat": "- The first line contains two positive integers $x, y$, which are the row and column of the result to output.\n- The second line contains four integers $m, n, o, p$, meaning $A$ is an $m\\times n$ matrix, $B$ is an $n\\times o$ matrix, and $C$ is an $o\\times p$ matrix.\n- From the third line onward, each line contains three integers that form one element in the triple representation of a matrix. There is one blank line between matrices. The order is matrices $A$, $B$, $C$.", "outputFormat": "Output a single integer: the value of the element in row $x$, column $y$ of $D$.", "hint": "Constraints\n- For all test points, $1\\le m,n,o,p\\le 6\\times 10^3$, and the total number of triples does not exceed $6\\times 10^3$.\n- Numbers are separated by spaces.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 矩阵乘积", "background": "", "description": "已知矩阵：\n\n$$A_{m\\times n}=\\begin{bmatrix}a_{1,1} & a_{1,2} & \\cdots & a_{1,n}\\\\ a_{2,1} & a_{2,2} & \\cdots & a_{2,n} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ a_{m,1} & a_{m,2} & \\cdots &a_{m,n} \\end{bmatrix} ,B_{n\\times p}=\\begin{bmatrix}b_{1,1} & b_{1,2} & \\cdots & b_{1,p}\\\\ b_{2,1} & b_{2,2} & \\cdots & b_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ b_{n,1} & b_{n,2} & \\cdots &b_{n,q} \\end{bmatrix}$$\n\n当矩阵 $A$ 的列数与矩阵 $B$ 的行数相同时，则 $A$ 与 $B$ 可以相乘，其乘积为一个 $m\\times p$ 的矩阵 $D$：\n\n$$D_{m\\times p}=\\begin{bmatrix} d_{1,1} & d_{1,2} & \\cdots & d_{1,p}\\\\ d_{2,1} & d_{2,2} & \\cdots & d_{2,p} \\\\ \\vdots & \\vdots & \\ddots & \\vdots\\\\ d_{m,1} & d_{m,2} & \\cdots & d_{m,p}\\end{bmatrix}$$\n\n其中 $d_{i,j}=\\sum^n_{k=1} a_{i,k} \\times b_{k,j}$，简记为 $D=A\\times B$。\n\n现已知三个矩阵 $A,B,C$，这三个矩阵大多数元素为 $0$，我们把这种矩阵称为稀疏矩阵。因此，我们采用三元组 $i,j,a$ 来表示矩阵的第 $i$ 行第 $j$ 列的值为 $a$ 其余未列出的元素均为 $0$；在计算机中，我们仅给出非零元素的三元组，而且使用行优先法给出稀疏矩阵的三元组，首先是第一行按列给出，然后是第二行按列给出……\n\n例如，矩阵：$\\begin{bmatrix}1&0&0&0\\\\0&0&2&-1\\\\0&1&2&3\\\\0&0&0&0\\end{bmatrix}$ 那么，矩阵的三元组表示为：\n\n```plain\n1 1 1\n2 3 2\n2 4 -1\n3 2 1 \n3 3 2\n3 4 3\n```\n\n你的任务就是：计算矩阵 $D=A\\times B\\times C$。", "inputFormat": "第一行为两个正整数 $x,y$，分别表示输出结果所在的行和列。\n\n第二行为四个整数 $m,n,o,p$，表明 $A$ 为$m\\times n$ 的矩阵，$B$ 为 $n\\times o$ 的矩阵，$C$ 为 $o\\times p$ 的矩阵。\n\n第三行以后的每一行有三个整数分别是矩阵的三元组表示法中的一个元素的值，每个矩阵之间有一个空行。表示的顺序是矩阵 $A,B,C$。\n", "outputFormat": "仅一个整数，为 $D$ 的第 $x$ 行第 $y$ 列的元素的值。", "hint": "#### 数据规模与约定\n对于全部的测试点，保证 $1\\le m,n,o,p\\le 6\\times 10^3$，三元数组的总个数不大于 $6\\times 10^3$。数据之间用空格分开。", "locale": "zh-CN"}}}
{"pid": "P2223", "type": "P", "difficulty": 6, "samples": [["4  1  2  3  2  1                         \r\n8  2  1  6  \r\n", "38"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2001", "各省省选", "湖南", "费用流"], "title": "[HNOI2001] 软件开发", "background": "", "description": "某软件公司正在规划一项 $n$ 天的软件开发计划，根据开发计划第 $i$ 天需要 $n_i$ 个软件开发人员，为了提高软件开发人员的效率，公司给软件人员提供了很多的服务，其中一项服务就是要为每个开发人员每天提供一块消毒毛巾，这种消毒毛巾使用一天后必须再做消毒处理后才能使用。\n\n消毒方式有两种，$A$ 种方式的消毒需要 $a$ 天时间，$B$ 种方式的消毒需要 $b$ 天，$A$ 种消毒方式的费用为每块毛巾 $f_A$, $B$ 种消毒方式的费用为每块毛巾 $f_B$，而买一块新毛巾的费用为 $f$（新毛巾是已消毒的，当天可以使用）。公司经理正在规划在这 $n$ 天中，每天买多少块新毛巾、每天送多少块毛巾进行 $A$ 种消毒和每天送多少块毛巾进行 $B$ 种消毒。当然，公司经理希望费用最低。\n\n你的任务就是：为该软件公司计划每天买多少块毛巾、每天多少块毛巾进行 $A$ 种消毒和多少毛巾进行 $B$ 种消毒，使公司在这项 $n$ 天的软件开发中，提供毛巾服务的总费用最低。", "inputFormat": "第一行为六个整数 $n,a,b,f,f_A,f_B$。\n\n第二行为 $n$ 个整数 $n_1,n_2,\\ldots,n_n$。\n", "outputFormat": "仅一个整数，为最少的费用。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $b>a$，$f>f_A>f_B$，$1\\le f,f_A,f_B\\le 60$，$1\\le n\\le 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Software Development", "background": "", "description": "A software company is planning a $n$-day software development schedule. According to the plan, on day $i$, $n_i$ software developers are needed. To improve efficiency, the company provides many services for the developers. One of these services is to provide each developer with a disinfected towel every day. After being used for one day, the towel must be disinfected again before it can be used again.\n\nThere are two disinfection methods. Method $A$ takes $a$ days; method $B$ takes $b$ days. The cost of method $A$ is $f_A$ per towel, and the cost of method $B$ is $f_B$ per towel. Buying a new towel costs $f$ (a new towel is already disinfected and can be used on the same day). The manager is planning, for each of these $n$ days, how many new towels to buy, how many towels to send for method $A$ disinfection, and how many towels to send for method $B$ disinfection. Of course, the manager wants to minimize the total cost.\n\nYour task is: determine, for each day, how many towels to buy, how many towels to send for method $A$ disinfection, and how many towels to send for method $B$ disinfection, so that during this $n$-day development period, the total cost of providing towel service is minimized.", "inputFormat": "The first line contains six integers $n,a,b,f,f_A,f_B$.\n\nThe second line contains $n$ integers $n_1,n_2,\\ldots,n_n$.", "outputFormat": "Output a single integer, the minimal total cost.", "hint": "Constraints\nFor $100\\%$ of the testdata, it is guaranteed that $b>a$, $f>f_A>f_B$, $1\\le f,f_A,f_B\\le 60$, $1\\le n\\le 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 软件开发", "background": "", "description": "某软件公司正在规划一项 $n$ 天的软件开发计划，根据开发计划第 $i$ 天需要 $n_i$ 个软件开发人员，为了提高软件开发人员的效率，公司给软件人员提供了很多的服务，其中一项服务就是要为每个开发人员每天提供一块消毒毛巾，这种消毒毛巾使用一天后必须再做消毒处理后才能使用。\n\n消毒方式有两种，$A$ 种方式的消毒需要 $a$ 天时间，$B$ 种方式的消毒需要 $b$ 天，$A$ 种消毒方式的费用为每块毛巾 $f_A$, $B$ 种消毒方式的费用为每块毛巾 $f_B$，而买一块新毛巾的费用为 $f$（新毛巾是已消毒的，当天可以使用）。公司经理正在规划在这 $n$ 天中，每天买多少块新毛巾、每天送多少块毛巾进行 $A$ 种消毒和每天送多少块毛巾进行 $B$ 种消毒。当然，公司经理希望费用最低。\n\n你的任务就是：为该软件公司计划每天买多少块毛巾、每天多少块毛巾进行 $A$ 种消毒和多少毛巾进行 $B$ 种消毒，使公司在这项 $n$ 天的软件开发中，提供毛巾服务的总费用最低。", "inputFormat": "第一行为六个整数 $n,a,b,f,f_A,f_B$。\n\n第二行为 $n$ 个整数 $n_1,n_2,\\ldots,n_n$。\n", "outputFormat": "仅一个整数，为最少的费用。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $b>a$，$f>f_A>f_B$，$1\\le f,f_A,f_B\\le 60$，$1\\le n\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2224", "type": "P", "difficulty": 5, "samples": [["5                            \r\n2 1 0\r\n0 5 0\r\n2 4 1\r\n0 0 3\r\n2 1 1\r\n", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2001", "各省省选", "湖南", "背包 DP"], "title": "[HNOI2001] 产品加工", "background": "", "description": "某加工厂有 A、B 两台机器，来加工的产品可以由其中任何一台机器完成，或者两台机器共同完成。由于受到机器性能和产品特性的限制，不同的机器加工同一产品所需的时间会不同，若同时由两台机器共同进行加工，所完成任务又会不同。\n\n某一天，加工厂接到  $n$ 个产品加工的任务，每个任务的工作量不尽一样。\n\n你的任务就是：已知每个任务在 A 机器上加工所需的时间  $t_1$，B 机器上加工所需的时间  $t_2$ 及由两台机器共同加工所需的时间  $t_3$，请你合理安排任务的调度顺序，使完成所有  $n$ 个任务的总时间最少。", "inputFormat": "第一行为一个整数  $n$。\n\n接下来  $n$ 行，每行三个非负整数  $t_1,t_2,t_3$，分别表示第  $i$ 个任务在 A 机器上加工、B 机器上加工、两台机器共同加工所需要的时间。如果所给的时间  $t_1$ 或  $t_2$ 为  $0$ 表示任务不能在该台机器上加工，如果  $t_3$ 为  $0$ 表示任务不能同时由两台机器加工。", "outputFormat": "仅一行一个整数，表示完成所有  $n$ 个任务的最少总时间。", "hint": "对于所有数据，有  $1\\le n\\le 6\\times 10^3$， $0\\le t_1,t_2,t_3\\le 5$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Product Processing", "background": "", "description": "A factory has two machines, A and B. Any product can be completed by either machine alone, or jointly by both machines. Due to machine performance and product characteristics, the time needed for different machines to process the same product differs; if both machines process a product simultaneously, the completed workload also differs.\n\nOne day, the factory receives $n$ product processing tasks, each with a different workload.\n\nYour task: given the time $t_1$ to process a task on machine A, the time $t_2$ on machine B, and the time $t_3$ when both machines jointly process it, schedule the tasks to minimize the total time to finish all $n$ tasks.", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines each contain three non-negative integers $t_1,t_2,t_3$, representing for the $i$-th task the time required on machine A, on machine B, and when both machines jointly process it, respectively. If the given time $t_1$ or $t_2$ is $0$, it means the task cannot be processed on that machine. If $t_3$ is $0$, it means the task cannot be jointly processed by both machines.", "outputFormat": "Output a single integer on one line, the minimum total time to complete all $n$ tasks.", "hint": "For all testdata, $1\\le n\\le 6\\times 10^3$, $0\\le t_1,t_2,t_3\\le 5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 产品加工", "background": "", "description": "某加工厂有 A、B 两台机器，来加工的产品可以由其中任何一台机器完成，或者两台机器共同完成。由于受到机器性能和产品特性的限制，不同的机器加工同一产品所需的时间会不同，若同时由两台机器共同进行加工，所完成任务又会不同。\n\n某一天，加工厂接到  $n$ 个产品加工的任务，每个任务的工作量不尽一样。\n\n你的任务就是：已知每个任务在 A 机器上加工所需的时间  $t_1$，B 机器上加工所需的时间  $t_2$ 及由两台机器共同加工所需的时间  $t_3$，请你合理安排任务的调度顺序，使完成所有  $n$ 个任务的总时间最少。", "inputFormat": "第一行为一个整数  $n$。\n\n接下来  $n$ 行，每行三个非负整数  $t_1,t_2,t_3$，分别表示第  $i$ 个任务在 A 机器上加工、B 机器上加工、两台机器共同加工所需要的时间。如果所给的时间  $t_1$ 或  $t_2$ 为  $0$ 表示任务不能在该台机器上加工，如果  $t_3$ 为  $0$ 表示任务不能同时由两台机器加工。", "outputFormat": "仅一行一个整数，表示完成所有  $n$ 个任务的最少总时间。", "hint": "对于所有数据，有  $1\\le n\\le 6\\times 10^3$， $0\\le t_1,t_2,t_3\\le 5$。", "locale": "zh-CN"}}}
{"pid": "P2225", "type": "P", "difficulty": 6, "samples": [["4", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2001", "各省省选", "湖南", "费用流"], "title": "[HNOI2001] 棋盘变换", "background": "", "description": "一个 $n\\times n$ 的棋盘，在其中填入 $1$ 和 $-1$。经过一次变换后，方格里的每个数将会变成变换之前与之相邻的四个数的积。例如：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2q4jbad8.png)\n\n但有一些状态，变换前和变换后是一样的，例如全部是 $1$ 的状态。这种状态被称为不变状态。\n\n你的任务是要找到所有本质不同的不变状态（旋转或翻转之后的状态被视为是本质上相同的）。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个正整数表示所有本质不同的方案数。", "hint": "$1\\le n\\le 30$。\n\n题目给出范围内，不变状态总数 $<9\\times 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Board Transformation", "background": "", "description": "On an $n \\times n$ board, fill each cell with $1$ or $-1$. After one transformation, every number in the grid becomes the product of the four numbers that are adjacent to it (up, down, left, and right) before the transformation. For example:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2q4jbad8.png)\n\nHowever, some states remain the same before and after the transformation, such as the state where all entries are $1$. Such a state is called an invariant state.\n\nYour task is to find all essentially different invariant states (states that become identical after rotations or reflections are considered essentially the same).", "inputFormat": "One line containing a single positive integer $n$.", "outputFormat": "One line containing a single positive integer, the number of essentially different invariant states.", "hint": "$1 \\le n \\le 30$.\n\nWithin the given range, the total number of invariant states is $< 9 \\times 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 棋盘变换", "background": "", "description": "一个 $n\\times n$ 的棋盘，在其中填入 $1$ 和 $-1$。经过一次变换后，方格里的每个数将会变成变换之前与之相邻的四个数的积。例如：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2q4jbad8.png)\n\n但有一些状态，变换前和变换后是一样的，例如全部是 $1$ 的状态。这种状态被称为不变状态。\n\n你的任务是要找到所有本质不同的不变状态（旋转或翻转之后的状态被视为是本质上相同的）。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个正整数表示所有本质不同的方案数。", "hint": "$1\\le n\\le 30$。\n\n题目给出范围内，不变状态总数 $<9\\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P2226", "type": "P", "difficulty": 4, "samples": [["10 10                                   \n1 4 10 7                                 \n0 0 0 1 0 0 0 0 0 0\n0 0 0 1 1 1 0 0 0 0\n0 0 0 1 0 1 0 0 0 0\n1 1 1 1 0 1 1 1 1 0\n1 0 0 0 0 0 0 0 1 0\n1 0 1 1 1 0 1 1 1 0\n1 1 1 0 1 1 1 0 1 0\n0 0 1 0 0 0 0 0 1 0\n0 0 1 1 1 1 1 1 1 0\n0 0 0 0 0 0 1 0 0 0\n", "1 16\n2 18\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2001", "各省省选", "湖南"], "title": "[HNOI2001] 遥控赛车比赛", "background": "", "description": "全国遥控赛车大赛近日在星沙举行。竞赛选用一块大小为 $N\\times M$ 的场地作为竞赛场地，要求选手的赛车在最短的时间内从起点移动到终点。虽然赛场地形高低有少许的起伏，但并不存在无法到达的地点。但是在赛场上增加了许多无法穿越的障碍物，若赛车在到达终点前撞上障碍物，就视为任务失败。\n\n在赛车的马力和灵活性等性能相差较小的情况下，要控制速度极快的赛车绕开障碍物移动到终点，关键是提高选手的反应灵敏度，即两次改变赛车运动方向所间隔的最短时间，也可称为选手的反应时间。使自己能够更快地控制赛车改变前进的方向。\n\n当然，由于选手反应灵敏度的不同，可选择的路径就会大不相同。如图 $1$ 和图 $2$ 所示，对于同一个赛场，两位选手的反应时间分别为 $2$ 秒和 $1$ 秒，而其到达终点所需的时间分别为 $18$ 秒和 $16$ 秒（赛车每秒可沿当前方向移动一格，从起点出发时算改变一次方向）。\n\n由图 $1$ 和图 $2$ 可知，赛车的最短路线长度是由选手的反应灵敏度所决定的，当选手的反应很慢时，可能就不会存在可行的路径。你的任务是：在能够完成赛程（即存在从起点到终点的路径）的条件下，求出选手每个可能的反应时间所对应的最短路线长度。\n\n![](https://cdn.luogu.com.cn/upload/pic/1294.png)\n", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，表示赛场的行数和列数。$1≤N, M≤100$。\n\n第二行有四个整数 $x1$、$y1$、$x2$、$y2$，表示赛程的起点和终点的位置分别为 $(x1, y1$ 和 $x2,y2$。\n\n接下来 $N$ 行是一个 $N×M$ 的 0-1 矩阵，矩阵中第 $i$ 行第 $j$ 列元素 $A_{i,j}=1$ 表示赛场中位置 $(i,j)$ 为赛道，$A_{i,j}=0$ 表示赛场中位置 $(i,j)$ 有障碍物。\n", "outputFormat": "输出文件可能有多行，其中每行输出一个可能的选手反应时间及该时间所对应的最短路线长度。输出文件中必须包含所有符合题目要求的选手反应时间。注意：由于选手的反应时间不可能很慢，因而不必考虑选手反应时间大于 $10$ 秒的情况，只需输出 $10$ 以内（包含 $10$）的解。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Remote-Controlled Car Race", "background": "", "description": "The National Remote-Controlled Car Championship was recently held in Xingsha. The competition uses a field of size $N \\times M$ as the course, and the requirement is for the car to move from the start to the finish in the shortest time. Although the terrain has slight undulations, there are no inherently unreachable locations. However, many impassable obstacles have been added to the course. If the car hits an obstacle before reaching the finish, the attempt is considered a failure.\n\nWhen the cars’ horsepower and agility are similar, the key to guiding a high-speed car around obstacles to the finish is improving the driver’s reaction sensitivity, namely the minimum time interval between two direction changes, also called the driver’s reaction time. This determines how quickly the driver can control the car to change its direction of motion.\n\nNaturally, due to different reaction sensitivities, the set of feasible paths varies. As shown in Figures $1$ and $2$, for the same course, two drivers with reaction times of $2$ seconds and $1$ second, respectively, need $18$ seconds and $16$ seconds to reach the finish (the car moves one cell per second along its current direction, and the departure from the start counts as one direction change).\n\nFrom Figures $1$ and $2$, we see that the shortest route length depends on the driver’s reaction sensitivity. When the reaction is slow, a feasible path may not exist. Your task is: under the condition that the course can be completed (i.e., a path from the start to the finish exists), compute the shortest route length corresponding to each possible reaction time.\n\n![](https://cdn.luogu.com.cn/upload/pic/1294.png)", "inputFormat": "The first line contains two integers $N$ and $M$, the numbers of rows and columns of the course, with $1 \\le N, M \\le 100$.\n\nThe second line contains four integers $x1$, $y1$, $x2$, $y2$, indicating that the start and finish are located at $(x1, y1)$ and $(x2, y2)$, respectively.\n\nThe next $N$ lines give a $N \\times M$ 0-1 matrix. In this matrix, the element in row $i$, column $j$ is $A_{i,j} = 1$ if position $(i, j)$ is track (traversable), and $A_{i,j} = 0$ if position $(i, j)$ has an obstacle.", "outputFormat": "The output may contain multiple lines. Each line should output one possible reaction time and the corresponding shortest route length. The output must include all reaction times that meet the problem’s requirement. Note: because excessively slow reactions are not considered, you do not need to handle reaction times greater than $10$ seconds; only output solutions for reaction times up to and including $10$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 遥控赛车比赛", "background": "", "description": "全国遥控赛车大赛近日在星沙举行。竞赛选用一块大小为 $N\\times M$ 的场地作为竞赛场地，要求选手的赛车在最短的时间内从起点移动到终点。虽然赛场地形高低有少许的起伏，但并不存在无法到达的地点。但是在赛场上增加了许多无法穿越的障碍物，若赛车在到达终点前撞上障碍物，就视为任务失败。\n\n在赛车的马力和灵活性等性能相差较小的情况下，要控制速度极快的赛车绕开障碍物移动到终点，关键是提高选手的反应灵敏度，即两次改变赛车运动方向所间隔的最短时间，也可称为选手的反应时间。使自己能够更快地控制赛车改变前进的方向。\n\n当然，由于选手反应灵敏度的不同，可选择的路径就会大不相同。如图 $1$ 和图 $2$ 所示，对于同一个赛场，两位选手的反应时间分别为 $2$ 秒和 $1$ 秒，而其到达终点所需的时间分别为 $18$ 秒和 $16$ 秒（赛车每秒可沿当前方向移动一格，从起点出发时算改变一次方向）。\n\n由图 $1$ 和图 $2$ 可知，赛车的最短路线长度是由选手的反应灵敏度所决定的，当选手的反应很慢时，可能就不会存在可行的路径。你的任务是：在能够完成赛程（即存在从起点到终点的路径）的条件下，求出选手每个可能的反应时间所对应的最短路线长度。\n\n![](https://cdn.luogu.com.cn/upload/pic/1294.png)\n", "inputFormat": "第一行包含两个整数 $N$ 和 $M$，表示赛场的行数和列数。$1≤N, M≤100$。\n\n第二行有四个整数 $x1$、$y1$、$x2$、$y2$，表示赛程的起点和终点的位置分别为 $(x1, y1$ 和 $x2,y2$。\n\n接下来 $N$ 行是一个 $N×M$ 的 0-1 矩阵，矩阵中第 $i$ 行第 $j$ 列元素 $A_{i,j}=1$ 表示赛场中位置 $(i,j)$ 为赛道，$A_{i,j}=0$ 表示赛场中位置 $(i,j)$ 有障碍物。\n", "outputFormat": "输出文件可能有多行，其中每行输出一个可能的选手反应时间及该时间所对应的最短路线长度。输出文件中必须包含所有符合题目要求的选手反应时间。注意：由于选手的反应时间不可能很慢，因而不必考虑选手反应时间大于 $10$ 秒的情况，只需输出 $10$ 以内（包含 $10$）的解。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2227", "type": "P", "difficulty": 5, "samples": [["5 2          \n4 1 5 3 2\n", "2 5 4 1 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2001", "各省省选", "湖南", "图论建模", "置换"], "title": "[HNOI2001] 洗牌机", "background": "", "description": "剀剀和凡凡有 $n$ 张牌（依次标号为 $1,2,\\ldots,n$）和一台洗牌机。假设 $n$ 是奇数。洗牌机的功能是进行如下的操作：对所有位置 $i(1\\le i\\le n)$，如果位置 $i$ 上的牌是 $j$，而且位置 $j$ 上的牌是 $k$，那么通过洗牌机后位置 $i$ 上的牌将是 $k$。\n\n剀剀首先写下数值 $1,2,\\ldots,n$ 的一个随机排列：$a_1,a_2,\\ldots,a_n$。然后他这样来排列牌的顺序：位置 $a_i$ 放置牌 $a_{i+1}$, （对于 $1\\le i\\le n-1$），而 $a_n$ 放置牌 $a_1$。这样排列后，牌的顺序就为 $x_1,x_2,\\ldots ,x_n$。然后，他把这种顺序排列的牌放入洗牌机洗牌 $s$ 次，得到牌的顺序为 $p_1,p_2,\\ldots,p_n$。现在，剀剀把牌的最后顺序和洗牌次数告诉凡凡，要凡凡猜出牌的最初顺序 $x_1,x_2,\\ldots,x_n$。\n", "inputFormat": "第一行为整数 $n$ 和 $s$。\n\n第二行为牌的最终顺序  $p_1,p_2,\\ldots,p_n$。", "outputFormat": "为一行，即牌的最初顺序 $x_1,x_2,\\ldots,x_n$。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $1\\le n,s\\le 10^3$。\n\n数据保证，从 $i=1$ 开始，设第 $i$ 张牌上数是 $j$，则赋值 $i=j$ 后继续此操作，最终会遍历所有牌。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2001] Shuffling Machine", "background": "", "description": "Kaikai and Fanfan have $n$ cards (numbered $1,2,\\ldots,n$ in order) and a shuffling machine. Assume $n$ is odd. The shuffling machine performs the following operation: for every position $i$ ($1\\le i\\le n$), if the card at position $i$ is $j$, and the card at position $j$ is $k$, then after running the machine, the card at position $i$ will be $k$.\n\nKaikai first writes down a random permutation of $1,2,\\ldots,n$: $a_1,a_2,\\ldots,a_n$. He then arranges the deck as follows: put card $a_{i+1}$ at position $a_i$ (for $1\\le i\\le n-1$), and put card $a_1$ at position $a_n$. After this arrangement, the deck order is $x_1,x_2,\\ldots,x_n$. Then he runs the shuffling machine $s$ times to obtain the order $p_1,p_2,\\ldots,p_n$. Now Kaikai tells Fanfan the final order and the number of shuffles, and asks Fanfan to determine the initial order $x_1,x_2,\\ldots,x_n$.", "inputFormat": "The first line contains integers $n$ and $s$.\n\nThe second line contains the final order of the cards $p_1,p_2,\\ldots,p_n$.", "outputFormat": "Output one line: the initial order $x_1,x_2,\\ldots,x_n$.", "hint": "#### Constraints\nFor $100\\%$ of the testdata, it is guaranteed that $1\\le n,s\\le 10^3$.\n\nThe testdata guarantees that, starting from $i=1$, let the number on the $i$-th card be $j$, then assign $i=j$ and continue this process; eventually, all cards will be visited.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2001] 洗牌机", "background": "", "description": "剀剀和凡凡有 $n$ 张牌（依次标号为 $1,2,\\ldots,n$）和一台洗牌机。假设 $n$ 是奇数。洗牌机的功能是进行如下的操作：对所有位置 $i(1\\le i\\le n)$，如果位置 $i$ 上的牌是 $j$，而且位置 $j$ 上的牌是 $k$，那么通过洗牌机后位置 $i$ 上的牌将是 $k$。\n\n剀剀首先写下数值 $1,2,\\ldots,n$ 的一个随机排列：$a_1,a_2,\\ldots,a_n$。然后他这样来排列牌的顺序：位置 $a_i$ 放置牌 $a_{i+1}$, （对于 $1\\le i\\le n-1$），而 $a_n$ 放置牌 $a_1$。这样排列后，牌的顺序就为 $x_1,x_2,\\ldots ,x_n$。然后，他把这种顺序排列的牌放入洗牌机洗牌 $s$ 次，得到牌的顺序为 $p_1,p_2,\\ldots,p_n$。现在，剀剀把牌的最后顺序和洗牌次数告诉凡凡，要凡凡猜出牌的最初顺序 $x_1,x_2,\\ldots,x_n$。\n", "inputFormat": "第一行为整数 $n$ 和 $s$。\n\n第二行为牌的最终顺序  $p_1,p_2,\\ldots,p_n$。", "outputFormat": "为一行，即牌的最初顺序 $x_1,x_2,\\ldots,x_n$。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，保证 $1\\le n,s\\le 10^3$。\n\n数据保证，从 $i=1$ 开始，设第 $i$ 张牌上数是 $j$，则赋值 $i=j$ 后继续此操作，最终会遍历所有牌。", "locale": "zh-CN"}}}
