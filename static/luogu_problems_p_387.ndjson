{"pid": "P8848", "type": "P", "difficulty": 4, "samples": [["4\n1 -1 1 -1", "3"], ["5\n1 1 1 -1 1", "3"], ["10\n1 1 1 1 1 1 1 -1 -1 -1", "40"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2022", "洛谷原创", "洛谷月赛"], "title": "[JRKSJ R5] 1-1 B", "background": "本题是 1-1 的较难版本，较易版本为 [1-1 A](https://www.luogu.com.cn/problem/P8847)。", "description": "给出一个序列 $a$，$\\forall i\\in [1,n],a_i\\in \\{1,-1\\}$。\n\n询问有多少个将 $a$ 重排后的序列使得该序列的最大子段和最小化。\n\n称两个序列不同，当且仅当这两个序列有任意一个位置上的数不同。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数表示 $a$。", "outputFormat": "一个整数表示答案。答案对 $998244353$ 取模。", "hint": "最大子段和的定义：序列中一段区间的和的最大值。即 $\\max_{1\\le l\\le r\\le n} \\sum_{i=l}^r a_i$。\n\n### 数据规模\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n\\le$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $20$ |\n| $2$ | $100$ | $20$ |\n| $3$ | $500$ | $20$ |\n| $4$ | $10^4$ | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^4$，$a_i\\in \\{1,-1\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R5] 1-1 B", "background": "本题是 1-1 的较难版本，较易版本为 [1-1 A](https://www.luogu.com.cn/problem/P8847)。", "description": "给出一个序列 $a$，$\\forall i\\in [1,n],a_i\\in \\{1,-1\\}$。\n\n询问有多少个将 $a$ 重排后的序列使得该序列的最大子段和最小化。\n\n称两个序列不同，当且仅当这两个序列有任意一个位置上的数不同。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数表示 $a$。", "outputFormat": "一个整数表示答案。答案对 $998244353$ 取模。", "hint": "最大子段和的定义：序列中一段区间的和的最大值。即 $\\max_{1\\le l\\le r\\le n} \\sum_{i=l}^r a_i$。\n\n### 数据规模\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n\\le$ | $\\text{Score}$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $20$ |\n| $2$ | $100$ | $20$ |\n| $3$ | $500$ | $20$ |\n| $4$ | $10^4$ | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^4$，$a_i\\in \\{1,-1\\}$。", "locale": "zh-CN"}}}
{"pid": "P8849", "type": "P", "difficulty": 5, "samples": [["1\n5\n\n1\n\n0\n\n", "\n\n? 3 1 2 3\n\n? 2 2 4\n\n! 1 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "交互题", "Special Judge", "洛谷月赛"], "title": "『JROI-7』hibernal", "background": "我也不知为何会想说这个故事，我也确实不太理解小丑和厨师有什么关系，但既然他们此时此刻排列在我的草稿本上【附图】，那我也只能试着说说了。\n\n呃呃，你说的很对，我也确实想不出他们的关系了。\n\n唔，小丑会出现在这里或许多半是因为他的出场总伴着诡异。\n\n但我还是觉得厨师这个角色有趣。\n\n但是，但是，这和【hibernal】有什么关系吗。\n\n啊，还是来说说厨师吧。食材还是让人觉得有趣的。\n\n欸，其实蔬菜能提供比肉类丰富的多的口感，但是似乎大家都不认同我的观点，你呢？\n\n英文字母和汉字之间要加空格，让我检查检查。\n\n【AI绘画】少女，裸背，颈控。\n\n啊，我知道了。这似乎可以是个有趣的故事。唔，写起来可能很花时间，你还是先过了这题再来催我吧 qwq.\n\n最后是不是要说点什么以示礼貌啊。那就祝大家身体健康吧，好耶！", "description": "有 $n$ 个苹果，第 $i$ 个编号为 $i$，其中有恰好 $2$ 个是金苹果。\n\n每次询问可以把 $n$ 个苹果分为两个集合 $S_1,S_2$，要求每个苹果恰好被分到一个集合中。\n\n设 $x$ 为 $S_1$ 中金苹果的个数，$y$ 为 $S_2$ 中金苹果的个数，交互库会返回 $x\\times y$ 的值。\n\n请在不超过 $19$ 次询问内求出两个金苹果的编号。\n\n**交互库自适应，即两个金苹果的编号可能会随着询问而改变，但是始终满足所有已经发生过的询问（见样例）。**", "inputFormat": "本题多测，第一行一个正整数 $T$，表示数据组数，接下来 $T$ 行每行一个正整数 $n$，表示本组数据里数的个数。\n\n本题采用 IO 交互模式。\n\n### 交互格式\n- `? k a1 a2 a3 ... ak` 将这 $k$ 个苹果放入一个集合，其他 $n-k$ 个苹果放入另一个集合，交互库会返回一个整数 $x$ 表示答案。**请务必保证 $0<k<n$。**\n- `! x y` 输出答案。**请务必保证 $x<y$。**\n\n请注意：在每组数据中，请保证第一种操作的次数总和不超过 $19$ 。\n\n需要注意的是，在每一次操作后，需要调用以下函数刷新缓存：\n- 对于 C/C++：`fflush(stdout);`\n- 对于 C++：`std::cout << std::flush;`\n- 对于 Java：`System.out.flush();`\n- 对于 Python：`stdout.flush();`\n- 对于 Pascal：`flush(output);`\n\n对于其他语言，请自行查阅对应语言的帮助文档。", "outputFormat": "见「交互格式」。", "hint": "**样例仅供理解交互过程，可能不符合逻辑。**\n\n【样例解释】\n\n初始的两个金苹果为 $3,5$。\n\n第一次询问，两个集合各有 $1$ 个金苹果，返回 $1$，金苹果的编号不发生改变。\n\n第二次询问，一个集合有 $2$ 个金苹果，另一个集合没有，返回 $0$。接下来两个金苹果从 $3,5$ 变成了 $1,5$，容易发现，虽然金苹果的编号发生了变化，前两个询问的答案仍然是符合的。\n\n回答 $1,5$，答案正确，交互结束。\n\n---\n### 数据范围\n| 分数 | $n=$ | $T=$ |\n| -----------: | -----------: | -----------: |\n| $10$ | $2$ | $200$ |\n| $10$ | $18$ | $200$ |\n| $10$ | $64$ | $200$ |\n| $20$ | $512$ | $200$ |\n| $50$ | $1000$ | $200$ |\n### 计分方式\n对于每组测试数据，取 $200$ 组测试中进行询问次数最大的一组，若超过 $19$ 次，计 $0$ 分，否则计满分。\n\n保证正常情况下交互库用时不超过 0.1s。\n\n如果您的输出不合法，将会出现 TLE/WA 等情况。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-7』hibernal", "background": "我也不知为何会想说这个故事，我也确实不太理解小丑和厨师有什么关系，但既然他们此时此刻排列在我的草稿本上【附图】，那我也只能试着说说了。\n\n呃呃，你说的很对，我也确实想不出他们的关系了。\n\n唔，小丑会出现在这里或许多半是因为他的出场总伴着诡异。\n\n但我还是觉得厨师这个角色有趣。\n\n但是，但是，这和【hibernal】有什么关系吗。\n\n啊，还是来说说厨师吧。食材还是让人觉得有趣的。\n\n欸，其实蔬菜能提供比肉类丰富的多的口感，但是似乎大家都不认同我的观点，你呢？\n\n英文字母和汉字之间要加空格，让我检查检查。\n\n【AI绘画】少女，裸背，颈控。\n\n啊，我知道了。这似乎可以是个有趣的故事。唔，写起来可能很花时间，你还是先过了这题再来催我吧 qwq.\n\n最后是不是要说点什么以示礼貌啊。那就祝大家身体健康吧，好耶！", "description": "有 $n$ 个苹果，第 $i$ 个编号为 $i$，其中有恰好 $2$ 个是金苹果。\n\n每次询问可以把 $n$ 个苹果分为两个集合 $S_1,S_2$，要求每个苹果恰好被分到一个集合中。\n\n设 $x$ 为 $S_1$ 中金苹果的个数，$y$ 为 $S_2$ 中金苹果的个数，交互库会返回 $x\\times y$ 的值。\n\n请在不超过 $19$ 次询问内求出两个金苹果的编号。\n\n**交互库自适应，即两个金苹果的编号可能会随着询问而改变，但是始终满足所有已经发生过的询问（见样例）。**", "inputFormat": "本题多测，第一行一个正整数 $T$，表示数据组数，接下来 $T$ 行每行一个正整数 $n$，表示本组数据里数的个数。\n\n本题采用 IO 交互模式。\n\n### 交互格式\n- `? k a1 a2 a3 ... ak` 将这 $k$ 个苹果放入一个集合，其他 $n-k$ 个苹果放入另一个集合，交互库会返回一个整数 $x$ 表示答案。**请务必保证 $0<k<n$。**\n- `! x y` 输出答案。**请务必保证 $x<y$。**\n\n请注意：在每组数据中，请保证第一种操作的次数总和不超过 $19$ 。\n\n需要注意的是，在每一次操作后，需要调用以下函数刷新缓存：\n- 对于 C/C++：`fflush(stdout);`\n- 对于 C++：`std::cout << std::flush;`\n- 对于 Java：`System.out.flush();`\n- 对于 Python：`stdout.flush();`\n- 对于 Pascal：`flush(output);`\n\n对于其他语言，请自行查阅对应语言的帮助文档。", "outputFormat": "见「交互格式」。", "hint": "**样例仅供理解交互过程，可能不符合逻辑。**\n\n【样例解释】\n\n初始的两个金苹果为 $3,5$。\n\n第一次询问，两个集合各有 $1$ 个金苹果，返回 $1$，金苹果的编号不发生改变。\n\n第二次询问，一个集合有 $2$ 个金苹果，另一个集合没有，返回 $0$。接下来两个金苹果从 $3,5$ 变成了 $1,5$，容易发现，虽然金苹果的编号发生了变化，前两个询问的答案仍然是符合的。\n\n回答 $1,5$，答案正确，交互结束。\n\n---\n### 数据范围\n| 分数 | $n=$ | $T=$ |\n| -----------: | -----------: | -----------: |\n| $10$ | $2$ | $200$ |\n| $10$ | $18$ | $200$ |\n| $10$ | $64$ | $200$ |\n| $20$ | $512$ | $200$ |\n| $50$ | $1000$ | $200$ |\n### 计分方式\n对于每组测试数据，取 $200$ 组测试中进行询问次数最大的一组，若超过 $19$ 次，计 $0$ 分，否则计满分。\n\n保证正常情况下交互库用时不超过 0.1s。\n\n如果您的输出不合法，将会出现 TLE/WA 等情况。", "locale": "zh-CN"}}}
{"pid": "P8850", "type": "P", "difficulty": 5, "samples": [["2\n114514 1919810", "114514"], ["3\n1 1 2", "4"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "递推", "2022", "洛谷原创", "洛谷月赛"], "title": "[JRKSJ R5] Jalapeno and Garlic", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/peaku0fe.png)", "description": "一个 $n$ 个点的环，点有点权 $a$，编号依次从 $1\\sim n$。点 $1$ 与点 $n$ 相邻。\n\n你希望只存在一个 $x\\in[1,n]$ 满足 $a_x\\ne 0$。为此，你需要按下面流程进行操作：\n\n1. 选定一个 $x$，表示最终使得 $a_x\\ne 0$。**此后不能更改 $x$ 的选择。**\n2. 进行若干次修改操作，每次操作你可以选定一个 $y\\in[1,n]$，将 $a_y\\gets a_y-1$。同时在与点 $y$ 相邻的两个点中**等概率选择**一个，其点权将被 $+1$。\n\n你希望期望的修改次数最少，所以求在最优策略下的期望操作次数（操作 1 不计入）。", "inputFormat": "第一行一个整数 $n$。\\\n第二行 $n$ 个整数表示 $a_{1\\dots n}$。", "outputFormat": "一个整数，表示答案。输出时答案对 $1004535809$ 取模。", "hint": "### 样例 $1$ 解释\n\n选定 $x=2$，进行 $114514$ 次操作，每次的 $y=1$。\n\n### 数据规模\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n\\le$ |分值 |\n| :----------: | :----------: |:----------: |\n| $1$ | $2$ | $5$ |\n| $2$ | $10^3$ | $20$ |\n| $3$ | $10^4$ | $20$ |\n| $4$ | $10^5$ | $20$ |\n| $5$ | $10^6$ | $35$ |\n\n对于 $100\\%$ 的数据，$2\\le n\\le 10^6$，$0\\le a_i<1004535809$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R5] Jalapeno and Garlic", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/peaku0fe.png)", "description": "一个 $n$ 个点的环，点有点权 $a$，编号依次从 $1\\sim n$。点 $1$ 与点 $n$ 相邻。\n\n你希望只存在一个 $x\\in[1,n]$ 满足 $a_x\\ne 0$。为此，你需要按下面流程进行操作：\n\n1. 选定一个 $x$，表示最终使得 $a_x\\ne 0$。**此后不能更改 $x$ 的选择。**\n2. 进行若干次修改操作，每次操作你可以选定一个 $y\\in[1,n]$，将 $a_y\\gets a_y-1$。同时在与点 $y$ 相邻的两个点中**等概率选择**一个，其点权将被 $+1$。\n\n你希望期望的修改次数最少，所以求在最优策略下的期望操作次数（操作 1 不计入）。", "inputFormat": "第一行一个整数 $n$。\\\n第二行 $n$ 个整数表示 $a_{1\\dots n}$。", "outputFormat": "一个整数，表示答案。输出时答案对 $1004535809$ 取模。", "hint": "### 样例 $1$ 解释\n\n选定 $x=2$，进行 $114514$ 次操作，每次的 $y=1$。\n\n### 数据规模\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n\\le$ |分值 |\n| :----------: | :----------: |:----------: |\n| $1$ | $2$ | $5$ |\n| $2$ | $10^3$ | $20$ |\n| $3$ | $10^4$ | $20$ |\n| $4$ | $10^5$ | $20$ |\n| $5$ | $10^6$ | $35$ |\n\n对于 $100\\%$ 的数据，$2\\le n\\le 10^6$，$0\\le a_i<1004535809$。", "locale": "zh-CN"}}}
{"pid": "P8851", "type": "P", "difficulty": 6, "samples": [["1 1\n1\n\n2\n\n1\n\n2\n\n1", "\n\n1\n\n2\n\n1\n\n2"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛"], "title": "『JROI-7』T2nz.", "background": "**这是一道交互题。**  ", "description": "小 X 陷入了一个奇怪的梦。在梦境里，她在和小 Q 下一种奇怪的棋。\n\n这是一个 $2^{2n}\\times 2n$ 的棋盘，小 X 执黑先行，小 Q 执白后行。\n\n每次操作，需要**在当前未满的第一行内**，任意选择一格下棋。一格内只能有一个棋子。\n\n下满之后，共有 $2^{2n}$ 行棋子，小 X 的得分为本质不同的行数。\n\n小 X 想最大化她的得分，但小 Q 想最小化小 X 的得分。\n\n你的任务是，扮演小 X 或小 Q，最大化或最小化得分。\n\n**若你是小 X，在满足最大化得分 $ans$ 的同时，你也要最大化前 $ans$ 行中本质不同的行数**。\n\n------------\n\n\n### 交互格式\n\n你要先从标准输入读入一行两个整数 $T,tp$，表示数据组数和你扮演的角色。保证 $tp\\in\\{0,1\\}$。若 $tp=0$，表示你扮演小 Q（后手）；若 $tp=1$，表示你扮演小 X（先手）。\n\n接下来每一组数据，你要先从标准输入读入一行一个正整数 $n$，含义见题目描述。\n\n接下来会进行 $2^{2n}\\times n$ 次交互。\n\n在每次交互中：\n\n- 若 $tp=0$，你要先从标准输入读入一行一个正整数 $x$，表示小 X 下了黑棋在当前未满的第一行的第 $x$ 列，接下来你要向标准输出输出一个正整数 $y$，表示你下了白棋在当前未满的第一行的第 $y$ 列；\n- 若 $tp=1$，你要先向标准输出输出一个正整数 $x$，表示你下了黑棋在当前未满的第一行的第 $x$ 列，接下来你要从标准输入读入一行一个正整数 $y$ 表示小 Q 下了白棋在当前未满的第一行的第 $y$ 列。\n\n你的输出都要**换行并清空缓存区**。\n\n你需要保证你下棋的位置不能已有棋子。同时，交互库也会保证其下棋的位置不会已有棋子。\n", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "**【样例解释】**\n\n读入的 $n=1$，因此棋盘的大小是 $4\\times 2$ 的。两人模拟如[动图](https://i.ibb.co/ChCxHQH/e.gif)所示。最终结果如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u2goi90a.png)\n\n可以观察发现，最终本质不同的行数为 $2$。容易发现，这是小 X 能最大化的得分。同时，前 $2$ 行中本质不同行数为 $2$，显然无法达到更大的值。\n\n------------\n\n**【数据范围与规模】**\n\n| 测试点编号 | $n \\le$ | $tp=$ |\n|:-:|:-:|:-:|\n| $1$ | $3$ | $0$ |\n| $2\\sim 3$ | $7$ | $0$ |\n| $4$ | $3$ | $1$ |\n| $5$ | $4$ | $1$ |\n| $6$ | $5$ | $1$ |\n| $7 \\sim 8$ | $6$ | $1$ |\n| $9 \\sim 10$ | $7$ | $1$ |\n\n对于所有的数据，保证 $1 \\le n \\le 7$，$1 \\le T \\le 3$，$tp\\in\\{0,1\\}$。\n\n------------\n**【提示】**\n\n- 您可以使用如下语句来清空缓冲区：\n\n\t- 对于 C/C++：`fflush(stdout)`；\n\t- 对于 C++：`std::cout << std::flush`；\n\t- 对于 Java：`System.out.flush()`；\n\t- 对于 Python：`stdout.flush()`；\n\t- 对于 Pascal：`flush(output)`；\n\t- 对于其他语言，请自行查阅对应语言的帮助文档。\n\t- 特别的，对于 C++ 语言，在输出换行时使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n    \n- 我们保证交互库耗时在 $1.5\\text{s}$ 内，空间消耗可以忽略不计。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-7』T2nz.", "background": "**这是一道交互题。**  ", "description": "小 X 陷入了一个奇怪的梦。在梦境里，她在和小 Q 下一种奇怪的棋。\n\n这是一个 $2^{2n}\\times 2n$ 的棋盘，小 X 执黑先行，小 Q 执白后行。\n\n每次操作，需要**在当前未满的第一行内**，任意选择一格下棋。一格内只能有一个棋子。\n\n下满之后，共有 $2^{2n}$ 行棋子，小 X 的得分为本质不同的行数。\n\n小 X 想最大化她的得分，但小 Q 想最小化小 X 的得分。\n\n你的任务是，扮演小 X 或小 Q，最大化或最小化得分。\n\n**若你是小 X，在满足最大化得分 $ans$ 的同时，你也要最大化前 $ans$ 行中本质不同的行数**。\n\n------------\n\n\n### 交互格式\n\n你要先从标准输入读入一行两个整数 $T,tp$，表示数据组数和你扮演的角色。保证 $tp\\in\\{0,1\\}$。若 $tp=0$，表示你扮演小 Q（后手）；若 $tp=1$，表示你扮演小 X（先手）。\n\n接下来每一组数据，你要先从标准输入读入一行一个正整数 $n$，含义见题目描述。\n\n接下来会进行 $2^{2n}\\times n$ 次交互。\n\n在每次交互中：\n\n- 若 $tp=0$，你要先从标准输入读入一行一个正整数 $x$，表示小 X 下了黑棋在当前未满的第一行的第 $x$ 列，接下来你要向标准输出输出一个正整数 $y$，表示你下了白棋在当前未满的第一行的第 $y$ 列；\n- 若 $tp=1$，你要先向标准输出输出一个正整数 $x$，表示你下了黑棋在当前未满的第一行的第 $x$ 列，接下来你要从标准输入读入一行一个正整数 $y$ 表示小 Q 下了白棋在当前未满的第一行的第 $y$ 列。\n\n你的输出都要**换行并清空缓存区**。\n\n你需要保证你下棋的位置不能已有棋子。同时，交互库也会保证其下棋的位置不会已有棋子。\n", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "**【样例解释】**\n\n读入的 $n=1$，因此棋盘的大小是 $4\\times 2$ 的。两人模拟如[动图](https://i.ibb.co/ChCxHQH/e.gif)所示。最终结果如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u2goi90a.png)\n\n可以观察发现，最终本质不同的行数为 $2$。容易发现，这是小 X 能最大化的得分。同时，前 $2$ 行中本质不同行数为 $2$，显然无法达到更大的值。\n\n------------\n\n**【数据范围与规模】**\n\n| 测试点编号 | $n \\le$ | $tp=$ |\n|:-:|:-:|:-:|\n| $1$ | $3$ | $0$ |\n| $2\\sim 3$ | $7$ | $0$ |\n| $4$ | $3$ | $1$ |\n| $5$ | $4$ | $1$ |\n| $6$ | $5$ | $1$ |\n| $7 \\sim 8$ | $6$ | $1$ |\n| $9 \\sim 10$ | $7$ | $1$ |\n\n对于所有的数据，保证 $1 \\le n \\le 7$，$1 \\le T \\le 3$，$tp\\in\\{0,1\\}$。\n\n------------\n**【提示】**\n\n- 您可以使用如下语句来清空缓冲区：\n\n\t- 对于 C/C++：`fflush(stdout)`；\n\t- 对于 C++：`std::cout << std::flush`；\n\t- 对于 Java：`System.out.flush()`；\n\t- 对于 Python：`stdout.flush()`；\n\t- 对于 Pascal：`flush(output)`；\n\t- 对于其他语言，请自行查阅对应语言的帮助文档。\n\t- 特别的，对于 C++ 语言，在输出换行时使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n    \n- 我们保证交互库耗时在 $1.5\\text{s}$ 内，空间消耗可以忽略不计。", "locale": "zh-CN"}}}
{"pid": "P8852", "type": "P", "difficulty": 7, "samples": [["5\n2 3 4 5 1\n2 2 3 1 1", "14\n19\n19\n14\n9"], ["5\n3 5 1 4 2\n2 2 3 1 1", "17\n9\n17\n9\n17"], ["5\n1 1 2 2 4\n2 2 3 1 1", "6\n5\n5\n5\n5"], ["5\n3 1 5 3 4\n2 2 1 3 3", "15\n19\n20\n21\n19"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "多项式", "洛谷原创", "O2优化", "树链剖分", "生成函数", "基环树", "洛谷月赛"], "title": "[JRKSJ R5] Concvssion", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/no6azjmn.png?x-oss-process=image)\n\n你很喜欢 Concvssion，但这并不妨碍你来做一道并不困难的有趣题目。\n\n（题目背景图片来自 Phigros 曲绘，如有侵权，请告知出题人。）", "description": "给定长度为 $n$ 的序列 $a,b$，满足 $\\forall i\\in[1,n],a_i,b_i\\in[1,n]$。\n\n定义一次操作为，$\\forall i\\in[1,n],b_i\\gets a_{b_i}$。\n\n你需要依次进行 $n$ 次操作，每次操作后求出 $\\displaystyle\\sum_{i=1}^n b_i$ 对 $998244353$ 取模的答案。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数表示 $a_{1\\sim n}$。\n\n第三行 $n$ 个整数表示 $b_{1\\sim n}$。", "outputFormat": "共 $n$ 行，每行一个整数表示答案，答案对 $998244353$ 取模。", "hint": "Idea：cyffff，Solution：Ntokisq / WhisperingSnowflakes，Code：cyffff / WhisperingSnowflakes，Data：cyffff\n\n**Concvssion - Halv (Insane15.5)**\n### 数据规模\n本题采用捆绑测试。\n\n::cute-table\n| $\\text{Subtask}$ | $n\\le$ | 特殊性质 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^4$ | 无 | $10$ |\n| $2$ | $10^5$ | $\\forall i\\in[1,n],a_i\\le10^3$ | $10$ |\n| $3$ | ^ | $\\forall i\\in[1,n],a_i=i\\bmod n+1$ | $10$ |\n| $4$ | ^ | $a$ 是一个 $[1,n]$ 的排列 | $15$ |\n| $5$ | ^ | $a_1=1,\\forall i\\in[2,n],a_i< i$ | $25$ |\n| $6$ | ^ | 无 | $20$ |\n| $7$ | $3\\times10^5$ | ^ | $10$ |\n\n对于 $100\\%$ 的数据，$1\\le a_i,b_i\\le n\\le 3\\times10^5$。\n### 特殊评分方式\n本题开启子任务依赖，具体如下：\n- 对于子任务 $i\\in\\{1,2,3,5\\}$，您只需答对子任务 $i$ 即可获得子任务 $i$ 的分数。\n- 对于子任务 $i=4$，您需要答对所有 $j\\in[3,4]$ 的子任务 $j$ 才能获得子任务 $i$ 的分数。\n- 对于子任务 $i\\in\\{6,7\\}$，您需要答对所有 $j\\in[1,i]$ 的子任务 $j$ 才能获得子任务 $i$ 的分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R5] Concvssion", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/no6azjmn.png?x-oss-process=image)\n\n你很喜欢 Concvssion，但这并不妨碍你来做一道并不困难的有趣题目。\n\n（题目背景图片来自 Phigros 曲绘，如有侵权，请告知出题人。）", "description": "给定长度为 $n$ 的序列 $a,b$，满足 $\\forall i\\in[1,n],a_i,b_i\\in[1,n]$。\n\n定义一次操作为，$\\forall i\\in[1,n],b_i\\gets a_{b_i}$。\n\n你需要依次进行 $n$ 次操作，每次操作后求出 $\\displaystyle\\sum_{i=1}^n b_i$ 对 $998244353$ 取模的答案。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数表示 $a_{1\\sim n}$。\n\n第三行 $n$ 个整数表示 $b_{1\\sim n}$。", "outputFormat": "共 $n$ 行，每行一个整数表示答案，答案对 $998244353$ 取模。", "hint": "Idea：cyffff，Solution：Ntokisq / WhisperingSnowflakes，Code：cyffff / WhisperingSnowflakes，Data：cyffff\n\n**Concvssion - Halv (Insane15.5)**\n### 数据规模\n本题采用捆绑测试。\n\n::cute-table\n| $\\text{Subtask}$ | $n\\le$ | 特殊性质 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^4$ | 无 | $10$ |\n| $2$ | $10^5$ | $\\forall i\\in[1,n],a_i\\le10^3$ | $10$ |\n| $3$ | ^ | $\\forall i\\in[1,n],a_i=i\\bmod n+1$ | $10$ |\n| $4$ | ^ | $a$ 是一个 $[1,n]$ 的排列 | $15$ |\n| $5$ | ^ | $a_1=1,\\forall i\\in[2,n],a_i< i$ | $25$ |\n| $6$ | ^ | 无 | $20$ |\n| $7$ | $3\\times10^5$ | ^ | $10$ |\n\n对于 $100\\%$ 的数据，$1\\le a_i,b_i\\le n\\le 3\\times10^5$。\n### 特殊评分方式\n本题开启子任务依赖，具体如下：\n- 对于子任务 $i\\in\\{1,2,3,5\\}$，您只需答对子任务 $i$ 即可获得子任务 $i$ 的分数。\n- 对于子任务 $i=4$，您需要答对所有 $j\\in[3,4]$ 的子任务 $j$ 才能获得子任务 $i$ 的分数。\n- 对于子任务 $i\\in\\{6,7\\}$，您需要答对所有 $j\\in[1,i]$ 的子任务 $j$ 才能获得子任务 $i$ 的分数。", "locale": "zh-CN"}}}
{"pid": "P8853", "type": "P", "difficulty": 5, "samples": [["5\nEXCHANGE +\nEXT +\nHARDWARE +\nMOUSE -\nNETWORK -", "2\nE*"], ["5\nEXCHANGE +\nEXTRAS +\nHARDWARE +\nMOUSE -\nNETWORK -\n", "3\n*A*"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "搜索", "1997", "NOI", "Special Judge"], "title": "[NOI1997] 文件匹配", "background": "**本题为上古 NOI 原题，未证明有无靠谱的正解可以通过。**\n\n在计算机的日常操作中，经常需要对当前回录下的所有文件中的一部分文件进行操作。例如，将当前目录下的所有文本文件复制至另一个目录下、将当前目录下所有以 `a` 打头的文件删除，等等。", "description": "很多操作系统都采用正则表达式来实现文件匹配功能。一种简单的正则表达式由英文字母（区分大小写）、数字及通配符 `*` 和 `?` 组成，`?` 代表任意一个字符，`*` 则可以代表零个或任意多个字符。\n\n例如：\n1. `a*b` 可以匹配 `acb`（`*` 代表 `c`）、`aabb`（`*` 代表 `ab`）、`asdsfdfdb`（`*` 代表 `sdsfdfd`）、`ab`（`*` 不代表任何字符）。\n2. `a*b` 不可以匹配 `ac`（缺少最右边的字母 `b`）、`bb`（缺少最左边的字母 `a`）、`abbc`（最右边的字母不是 `b`）。\n3. `a?b` 可以匹配 `acb`（`?` 代表 `c`）。\n4. `a?b` 不可以匹配 `ab`（缺少中间的一个字符）、`accb`（`?` 只能代表一个字符）。\n\n现要对某目录下的部分文件进行操作。写一个程序,寻找一个正则表达式，使其能匹配的待操作文件最多，但不能匹配任何不进行操作的文件。注意你所找到的最优正则表达式的长度应当是**最短**的。\n\n如果有多个长度最短的最优正则表达式，则其中任意一个都是允许的。", "inputFormat": "第一行一个整数 $n$，表示字符串数量。\n\n接下来 $n$ 行，每行一个字符串和一个字符（`+` 或 `-`），表示文件名（由英文字母和数字组成：英文字符区分大小写）和是否操作（`+` 表示要对该行给出的文件进行操作，`-` 表示不进行操作）。", "outputFormat": "第一行一个整数，表示你找到的最优正则表达式所能匹配的文件数目。\n\n第二行一个字符串，表示你找到的最优正则表达式。", "hint": "对于 $5\\%$ 的数据：$n=5$。\\\n对于 $25\\%$ 的数据：$5\\le n\\le 23$。\\\n对于 $55\\%$ 的数据：$5\\le n\\le 54$。\\\n对于 $75\\%$ 的数据：$5\\le n\\le 160$。\\\n对于 $100\\%$ 的数据：$5\\le n\\le 250,\\ |S_i|\\le8$。\n\n为了便于调试和验证 Special Judge 的正确性，公布错误反馈信息和对应的含义：\n\n1. `The number of matching file name(s) is wrong!` 你输出的数量不是最多的。\n2. `The expression is longer than jury's expression!` 你输出的表达式不是最短的。\n3. `The expression matches an invalid file name!` 你输出的表达式匹配了不进行操作的文件。\n4. `The answer is correct.` 你输出的表达式符合题目要求。\n5. `The expression is shorter than jury's expression ???` 你输出的表达式符合题目要求，且比现有最优表达式短。\n6. `The expression is better than jury's expression ???` 你输出的表达式符合题目要求，且匹配的文件数目比现有最优表达式多。\n7. `The number of matching file name(s) is false!` 你输出的表达式匹配的数量比你输出的数量少。\n\n如果你遇到了 5、6 的评测错误情况，请找搬题人或者管理员，我们将修正数据。\n\n感谢 Special Judge 来源：[Sprague_Garundy](https://www.luogu.com.cn/user/764746)。\n\n感谢 hack 数据提供：[oOoOoOOOooOO](https://www.luogu.com.cn/user/42324)，位于单独的Subtask，不计分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI1997] 文件匹配", "background": "**本题为上古 NOI 原题，未证明有无靠谱的正解可以通过。**\n\n在计算机的日常操作中，经常需要对当前回录下的所有文件中的一部分文件进行操作。例如，将当前目录下的所有文本文件复制至另一个目录下、将当前目录下所有以 `a` 打头的文件删除，等等。", "description": "很多操作系统都采用正则表达式来实现文件匹配功能。一种简单的正则表达式由英文字母（区分大小写）、数字及通配符 `*` 和 `?` 组成，`?` 代表任意一个字符，`*` 则可以代表零个或任意多个字符。\n\n例如：\n1. `a*b` 可以匹配 `acb`（`*` 代表 `c`）、`aabb`（`*` 代表 `ab`）、`asdsfdfdb`（`*` 代表 `sdsfdfd`）、`ab`（`*` 不代表任何字符）。\n2. `a*b` 不可以匹配 `ac`（缺少最右边的字母 `b`）、`bb`（缺少最左边的字母 `a`）、`abbc`（最右边的字母不是 `b`）。\n3. `a?b` 可以匹配 `acb`（`?` 代表 `c`）。\n4. `a?b` 不可以匹配 `ab`（缺少中间的一个字符）、`accb`（`?` 只能代表一个字符）。\n\n现要对某目录下的部分文件进行操作。写一个程序,寻找一个正则表达式，使其能匹配的待操作文件最多，但不能匹配任何不进行操作的文件。注意你所找到的最优正则表达式的长度应当是**最短**的。\n\n如果有多个长度最短的最优正则表达式，则其中任意一个都是允许的。", "inputFormat": "第一行一个整数 $n$，表示字符串数量。\n\n接下来 $n$ 行，每行一个字符串和一个字符（`+` 或 `-`），表示文件名（由英文字母和数字组成：英文字符区分大小写）和是否操作（`+` 表示要对该行给出的文件进行操作，`-` 表示不进行操作）。", "outputFormat": "第一行一个整数，表示你找到的最优正则表达式所能匹配的文件数目。\n\n第二行一个字符串，表示你找到的最优正则表达式。", "hint": "对于 $5\\%$ 的数据：$n=5$。\\\n对于 $25\\%$ 的数据：$5\\le n\\le 23$。\\\n对于 $55\\%$ 的数据：$5\\le n\\le 54$。\\\n对于 $75\\%$ 的数据：$5\\le n\\le 160$。\\\n对于 $100\\%$ 的数据：$5\\le n\\le 250,\\ |S_i|\\le8$。\n\n为了便于调试和验证 Special Judge 的正确性，公布错误反馈信息和对应的含义：\n\n1. `The number of matching file name(s) is wrong!` 你输出的数量不是最多的。\n2. `The expression is longer than jury's expression!` 你输出的表达式不是最短的。\n3. `The expression matches an invalid file name!` 你输出的表达式匹配了不进行操作的文件。\n4. `The answer is correct.` 你输出的表达式符合题目要求。\n5. `The expression is shorter than jury's expression ???` 你输出的表达式符合题目要求，且比现有最优表达式短。\n6. `The expression is better than jury's expression ???` 你输出的表达式符合题目要求，且匹配的文件数目比现有最优表达式多。\n7. `The number of matching file name(s) is false!` 你输出的表达式匹配的数量比你输出的数量少。\n\n如果你遇到了 5、6 的评测错误情况，请找搬题人或者管理员，我们将修正数据。\n\n感谢 Special Judge 来源：[Sprague_Garundy](https://www.luogu.com.cn/user/764746)。\n\n感谢 hack 数据提供：[oOoOoOOOooOO](https://www.luogu.com.cn/user/42324)，位于单独的Subtask，不计分。", "locale": "zh-CN"}}}
{"pid": "P8854", "type": "P", "difficulty": 6, "samples": [["2\n3\n1 0\n0 1\n-2 -1\n5\n3 4\n-3 -6\n2 -2\n5 6\n-1 4", "TAK\nNIE"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["计算几何", "2002", "POI（波兰）", "线性代数", "向量", "平面几何"], "title": "[POI 2002] 超级马", "background": "", "description": "在一个大小为无限的棋盘上有一个超级马，它可以完成各种动作。\n\n每一种动作包含两个整数，第一个数说明上下移动的数，第二个数说明左右移动的数，移动马来完成这个动作。（数字均为正数向右，负数向左）\n\n请你对每一个输入的超级马进行确认，看它是否可以到达棋盘上的每一个地方。", "inputFormat": "第一行中存在一个整数 $K$，表示数据组数。\n\n对于每一组数据，第一行一个数 $N$，表示超级马能完成的动作个数。\n\n接下来 $N$ 行，每一个行中包含两个整数 $P$ 和 $Q$，表示这个动作。", "outputFormat": "输出 $K$ 行，判断超级马是否可以到达棋盘所有地方，可以输出 ```TAK```，否则输出 ```NIE```。", "hint": "数据范围：$1 \\le K,N \\le 100,-100 \\le P,Q \\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2002] 超级马", "background": "", "description": "在一个大小为无限的棋盘上有一个超级马，它可以完成各种动作。\n\n每一种动作包含两个整数，第一个数说明上下移动的数，第二个数说明左右移动的数，移动马来完成这个动作。（数字均为正数向右，负数向左）\n\n请你对每一个输入的超级马进行确认，看它是否可以到达棋盘上的每一个地方。", "inputFormat": "第一行中存在一个整数 $K$，表示数据组数。\n\n对于每一组数据，第一行一个数 $N$，表示超级马能完成的动作个数。\n\n接下来 $N$ 行，每一个行中包含两个整数 $P$ 和 $Q$，表示这个动作。", "outputFormat": "输出 $K$ 行，判断超级马是否可以到达棋盘所有地方，可以输出 ```TAK```，否则输出 ```NIE```。", "hint": "数据范围：$1 \\le K,N \\le 100,-100 \\le P,Q \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P8855", "type": "P", "difficulty": 4, "samples": [["5\n1 2\n1 5\n3 5\n4 5\n4\n1\n3\n2\n5", "7"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "POI（波兰）", "最近公共祖先 LCA"], "title": "[POI 2002] 商务旅行", "background": "", "description": "某地首都的商人要经常到其他城镇去做生意，他们会按自己的路线去走。\n\n有 $N$ 个城镇，首都编号为 $1$。商人从首都出发，其他各城镇之间都有道路连接。\n\n任意两个城镇之间如果有直连道路，在他们之间行驶需要花费单位时间。如果从首都出发，能到达任意一个城镇。\n\n请你求出商人最短的旅行时间。", "inputFormat": "第一行有一个整数 $N$，为城镇的数目。\n\n接下来 $N-1$ 行，每行两个整数 $a$ 和 $b$，表示城镇 $a$ 和城镇 $b$ 有公路连接。\n\n接下来一个整数 $M$，然后 $M$ 行，每行有该商人需要顺次经过的各城镇编号。", "outputFormat": "一行，输出商人最短的旅行时间。", "hint": "数据范围：$1 \\le N \\le 30000$。**保证公路网络不会存在环。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2002] 商务旅行", "background": "", "description": "某地首都的商人要经常到其他城镇去做生意，他们会按自己的路线去走。\n\n有 $N$ 个城镇，首都编号为 $1$。商人从首都出发，其他各城镇之间都有道路连接。\n\n任意两个城镇之间如果有直连道路，在他们之间行驶需要花费单位时间。如果从首都出发，能到达任意一个城镇。\n\n请你求出商人最短的旅行时间。", "inputFormat": "第一行有一个整数 $N$，为城镇的数目。\n\n接下来 $N-1$ 行，每行两个整数 $a$ 和 $b$，表示城镇 $a$ 和城镇 $b$ 有公路连接。\n\n接下来一个整数 $M$，然后 $M$ 行，每行有该商人需要顺次经过的各城镇编号。", "outputFormat": "一行，输出商人最短的旅行时间。", "hint": "数据范围：$1 \\le N \\le 30000$。**保证公路网络不会存在环。**", "locale": "zh-CN"}}}
{"pid": "P8856", "type": "P", "difficulty": 4, "samples": [["4 6 4\n1 4 2\n1 3 2\n2 4 3\n1 2 3", "T\nT\nN\nN"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "线段树", "POI（波兰）"], "title": "[POI 2002] 火车线路", "background": "", "description": "某列火车从 $1$ 号城市出发，前往编号为 $C$ 的城市。该火车有 $S$ 个座位，现在有 $R$ 个车票订购需求。\n\n一个订购由 $O,D,N$ 三个整数组成，表示从起点站 $O$ 到目标站 $D$ 需要订购 $N$ 个座位。\n\n如果在该订购范围内有能满足的空座位，就称该订购可以被满足，否则就不可以。\n\n请你按订购给出顺序处理，判断是否可以满足该订购需求。", "inputFormat": "第一行为三个整数 $C,S,R$。\n\n接下来 $R$ 行，每行为三个整数 $O,D,N$，分别表示每一个预定。", "outputFormat": "对第 $i$ 个预定，如果能满足，输出 ```T```，否则输出 ```N```。", "hint": "数据范围：$1 \\le C,S,R \\le 60000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2002] 火车线路", "background": "", "description": "某列火车从 $1$ 号城市出发，前往编号为 $C$ 的城市。该火车有 $S$ 个座位，现在有 $R$ 个车票订购需求。\n\n一个订购由 $O,D,N$ 三个整数组成，表示从起点站 $O$ 到目标站 $D$ 需要订购 $N$ 个座位。\n\n如果在该订购范围内有能满足的空座位，就称该订购可以被满足，否则就不可以。\n\n请你按订购给出顺序处理，判断是否可以满足该订购需求。", "inputFormat": "第一行为三个整数 $C,S,R$。\n\n接下来 $R$ 行，每行为三个整数 $O,D,N$，分别表示每一个预定。", "outputFormat": "对第 $i$ 个预定，如果能满足，输出 ```T```，否则输出 ```N```。", "hint": "数据范围：$1 \\le C,S,R \\le 60000$。", "locale": "zh-CN"}}}
{"pid": "P8857", "type": "P", "difficulty": 6, "samples": [["15\n5 3 5 9 2 4\n1 9\n2 7 5\n2 6 8\n1 7\n1 10\n2 14 11\n2 10 12\n2 13 10\n3 13 15 12\n2 14 15\n1 15\n1 15\n1 15", "8"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "图论", "2002", "POI（波兰）", "Dilworth 定理"], "title": "[POI 2002] 滑雪者", "background": "", "description": "在某山的斜坡上有一些滑雪轨道和一个滑雪电梯，所有的轨道都是从山顶到山底。\n\n每天清晨都有一群工人检查轨道情况，他们一起乘电梯到到达山顶。接着他们沿每个人选择的轨道滑到底端，每个工人只能滑一次。\n\n工人选择的轨道可能有部分相同，每个轨道可由任一个向下滑行的工人检查。向下滑雪从高到底选择一条轨道进行。\n\n滑雪轨道由一个空地网络组成，每个空地有不同的高度。任意两个空地之间最多有一条道相连。", "inputFormat": "第一行一个整数 $n$ 表示空地的数目。\n\n接下来 $n-1$ 行，第 $i+1$ 行的整数表示空地 $i$ 有轨道滑向它们。第一个整数 $k$ 表示空地数目，接着 $k$ 个整数，表示它们的编号（从西往东排列）。特别的，山顶编号为 $1$，山脚编号为 $n$。", "outputFormat": "一行，表示最少需要多少个工人检查所有的滑道。", "hint": "数据范围：$2 \\le n \\le 5000$，给定的图是平面图。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2002] 滑雪者", "background": "", "description": "在某山的斜坡上有一些滑雪轨道和一个滑雪电梯，所有的轨道都是从山顶到山底。\n\n每天清晨都有一群工人检查轨道情况，他们一起乘电梯到到达山顶。接着他们沿每个人选择的轨道滑到底端，每个工人只能滑一次。\n\n工人选择的轨道可能有部分相同，每个轨道可由任一个向下滑行的工人检查。向下滑雪从高到底选择一条轨道进行。\n\n滑雪轨道由一个空地网络组成，每个空地有不同的高度。任意两个空地之间最多有一条道相连。", "inputFormat": "第一行一个整数 $n$ 表示空地的数目。\n\n接下来 $n-1$ 行，第 $i+1$ 行的整数表示空地 $i$ 有轨道滑向它们。第一个整数 $k$ 表示空地数目，接着 $k$ 个整数，表示它们的编号（从西往东排列）。特别的，山顶编号为 $1$，山脚编号为 $n$。", "outputFormat": "一行，表示最少需要多少个工人检查所有的滑道。", "hint": "数据范围：$2 \\le n \\le 5000$，给定的图是平面图。", "locale": "zh-CN"}}}
{"pid": "P8858", "type": "P", "difficulty": 4, "samples": [["3\n4\n1 1\n1 2\n4 1\n4 2\n6\n1 2\n1 3\n2 1\n2 2\n2 3\n3 2\n12\n1 3\n2 2\n2 3\n2 4\n3 1\n3 2\n3 4\n3 5\n4 2\n4 3\n4 4\n5 3\n", "2\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛", "双指针 two-pointer"], "title": "折线", "background": "", "description": "平面直角坐标系的第一象限内有一块左下角为 $(0,0)$ 右上角为 $(10^{100},10^{100})$ 的矩形区域，区域内有**正偶数**个整点，试求出这样一条从 $(0,0)$ 出发，到 $(10^{100},10^{100})$ 的在区域内部的折线：\n\n- 折线的每一部分都平行于 $x$ 轴或 $y$ 轴。\n- 折线不能经过给定的整点。\n- 折线将整块区域分成包含给定整点个数相等的两块。\n- 折线拥有尽可能少的折点。\n\n可以证明一定存在一条满足限制的折线，你只需要输出满足限制的折线的折点数即可。\n\n注意折点的坐标可以不是整数。", "inputFormat": "输入第一行一个正整数 $T$，表示数据组数。\n\n接下来的每组数据中，第一行一个**正偶数** $n$，表示给定的整点个数。\n\n接下来 $n$ 行，第 $i$ 行两个正整数 $x_i,y_i$，表示给定的第 $i$ 个整点的坐标为 $(x_i,y_i)$。", "outputFormat": "输出 $T$ 行，每行一个正整数，表示满足限制的折线的折点数。", "hint": "#### 【样例解释】\n\n对于第一组数据，一条合法的折线为：$(0,0) \\to (2.5,0) \\to (2.5,10^{100}) \\to (10^{100},10^{100})$，它有 $(2.5,0)$ 和 $(2.5,10^{100})$ 两个折点。\n\n#### 【数据范围】\n\n|  测试点编号 | $n \\leq$ |      特殊限制      |\n|:-----------:|:--------:|:------------------:|\n|  $1 \\sim 2$ |    $4$   |         无         |\n|  $3 \\sim 4$ |   $10$   |         无         |\n|  $5 \\sim 6$ |   $50$  |         无         |\n|  $7 \\sim 8$ |  $10^5$  | 保证答案不大于 $3$ |\n| $9 \\sim 10$ | $10^5$   | 无                 |\n\n对于所有数据，$1 \\leq T \\leq 10^4, 1 \\leq \\sum n \\leq 5 \\times 10^5, 1 \\leq x_i,y_i \\leq n$，保证 $n$ 为正偶数，每组数据中不存在两个坐标相同的整点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "折线", "background": "", "description": "平面直角坐标系的第一象限内有一块左下角为 $(0,0)$ 右上角为 $(10^{100},10^{100})$ 的矩形区域，区域内有**正偶数**个整点，试求出这样一条从 $(0,0)$ 出发，到 $(10^{100},10^{100})$ 的在区域内部的折线：\n\n- 折线的每一部分都平行于 $x$ 轴或 $y$ 轴。\n- 折线不能经过给定的整点。\n- 折线将整块区域分成包含给定整点个数相等的两块。\n- 折线拥有尽可能少的折点。\n\n可以证明一定存在一条满足限制的折线，你只需要输出满足限制的折线的折点数即可。\n\n注意折点的坐标可以不是整数。", "inputFormat": "输入第一行一个正整数 $T$，表示数据组数。\n\n接下来的每组数据中，第一行一个**正偶数** $n$，表示给定的整点个数。\n\n接下来 $n$ 行，第 $i$ 行两个正整数 $x_i,y_i$，表示给定的第 $i$ 个整点的坐标为 $(x_i,y_i)$。", "outputFormat": "输出 $T$ 行，每行一个正整数，表示满足限制的折线的折点数。", "hint": "#### 【样例解释】\n\n对于第一组数据，一条合法的折线为：$(0,0) \\to (2.5,0) \\to (2.5,10^{100}) \\to (10^{100},10^{100})$，它有 $(2.5,0)$ 和 $(2.5,10^{100})$ 两个折点。\n\n#### 【数据范围】\n\n|  测试点编号 | $n \\leq$ |      特殊限制      |\n|:-----------:|:--------:|:------------------:|\n|  $1 \\sim 2$ |    $4$   |         无         |\n|  $3 \\sim 4$ |   $10$   |         无         |\n|  $5 \\sim 6$ |   $50$  |         无         |\n|  $7 \\sim 8$ |  $10^5$  | 保证答案不大于 $3$ |\n| $9 \\sim 10$ | $10^5$   | 无                 |\n\n对于所有数据，$1 \\leq T \\leq 10^4, 1 \\leq \\sum n \\leq 5 \\times 10^5, 1 \\leq x_i,y_i \\leq n$，保证 $n$ 为正偶数，每组数据中不存在两个坐标相同的整点。", "locale": "zh-CN"}}}
{"pid": "P8859", "type": "P", "difficulty": 6, "samples": [["4 2 1", "11"], ["5 2 2", "14"], ["50 10 1", "808620624"], ["50 10 2", "578144115"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "洛谷原创", "O2优化", "组合数学", "洛谷月赛"], "title": "冒泡排序", "background": "", "description": "有一个值域下标均为 $1\\sim n$ 的排列或圆排列 $A$，定义 $f(A)$ 为将 $A$ 升序排序所需的最小操作次数。\n\n每次操作中，你可以选择一个元素并向前**冒泡**若干次，一次**冒泡**定义为：若这个元素小于前一个元素，则可以交换它与前一个元素。当某次无法**冒泡**时，这次操作立即停止。否则可以连续**冒泡**任意次。\n\n比如有排列 $[3,5,2,1,4]$，一次操作可以选择元素 $1$ ，得到排列 $[3,5,1,2,4],[3,1,5,2,4]$ 或 $[1,3,5,2,4]$ 。\n\n若有圆排列 $[2,1,4,3]$，选择元素 $1$ 后可以得到圆排列 $[1,2,4,3],[3,2,4,1]$ 或 $[3,2,1,4]$ 。注意到圆排列中第 $1$ 个元素的前一个元素为第 $n$ 个元素。\n\n排列或圆排列被升序排序，当且仅当对于所有 $\\space 2 \\leq i \\leq n$，元素 $i$ 的前一个元素为元素 $i-1$。\n\n给定 $n,k,type$，你需要：\n- 在 $type=1$ 时求有多少长为 $n$ 的排列 $A$ 满足 $f(A)=k$ 。\n- 在 $type=2$ 时求有多少长为 $n$ 的圆排列 $A$ 满足 $f(A)=k$ 。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "输入一行三个正整数 $n,k,type$，具体含义见题目描述。", "outputFormat": "输出一行一个整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "#### 【样例解释 #1】\n\n有如下合法排列：\n\n1. $[1,4,2,3]$\n2. $[1,4,3,2]$\n3. $[2,1,4,3]$\n4. $[2,4,1,3]$\n5. $[2,4,3,1]$\n6. $[3,1,2,4]$\n7. $[3,1,4,2]$\n8. $[3,2,1,4]$\n9. $[3,2,4,1]$\n10. $[3,4,1,2]$\n11. $[3,4,2,1]$\n\n#### 【样例解释 #2】\n\n有如下合法圆排列：\n\n1. $[1,2,5,3,4]$\n2. $[1,2,5,4,3]$\n3. $[1,3,2,5,4]$\n4. $[1,3,5,2,4]$\n5. $[1,3,5,4,2]$\n6. $[1,4,2,3,5]$\n7. $[1,4,2,5,3]$\n8. $[1,4,3,2,5]$\n9. $[1,4,3,5,2]$\n10. $[1,4,5,3,2]$\n11. $[1,5,2,4,3]$\n12. $[1,5,3,2,4]$\n13. $[1,5,3,4,2]$\n14. $[1,5,4,2,3]$\n\n需要注意的是，我们认为 $[1,2,5,3,4]$ 和 $[2,5,3,4,1]$ 等是同一个圆排列。\n\n也就是我们认为两个圆排列不同，当且仅当存在一个 $2 \\leq i \\leq n$，满足两个圆排列中元素 $i$ 的前一个元素不同。\n\n#### 【数据范围】\n\n|   测试点编号 | $n \\leq$ | $k \\leq$ | $type=$ |\n|:------------:|:--------:|:--------:|:-------:|\n|  $1 \\sim 2$  |    $7$   |    $7$   |   $1$   |\n|  $3 \\sim 4$  |    $7$   |    $7$   |   $2$   |\n|  $5 \\sim 6$  |   $15$   |   $15$   |   $1$   |\n|  $7 \\sim 8$  |   $15$   |   $15$   |   $2$   |\n|  $9 \\sim 12$ |   $50$   |   $50$   |   $1$   |\n| $13 \\sim 16$ |   $50$   |   $50$   |   $2$   |\n|     $17$     |   $500$  |    $10$   |   $1$   |\n|     $18$     |   $500$  |    $10$   |   $2$   |\n|     $19$     |   $500$  |   $500$  |   $1$   |\n|     $20$     |   $500$  |   $500$  |   $2$   |\n\n对于所有数据，$1 \\leq k < n \\leq 500$，$1 \\leq type \\leq 2$。  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "冒泡排序", "background": "", "description": "有一个值域下标均为 $1\\sim n$ 的排列或圆排列 $A$，定义 $f(A)$ 为将 $A$ 升序排序所需的最小操作次数。\n\n每次操作中，你可以选择一个元素并向前**冒泡**若干次，一次**冒泡**定义为：若这个元素小于前一个元素，则可以交换它与前一个元素。当某次无法**冒泡**时，这次操作立即停止。否则可以连续**冒泡**任意次。\n\n比如有排列 $[3,5,2,1,4]$，一次操作可以选择元素 $1$ ，得到排列 $[3,5,1,2,4],[3,1,5,2,4]$ 或 $[1,3,5,2,4]$ 。\n\n若有圆排列 $[2,1,4,3]$，选择元素 $1$ 后可以得到圆排列 $[1,2,4,3],[3,2,4,1]$ 或 $[3,2,1,4]$ 。注意到圆排列中第 $1$ 个元素的前一个元素为第 $n$ 个元素。\n\n排列或圆排列被升序排序，当且仅当对于所有 $\\space 2 \\leq i \\leq n$，元素 $i$ 的前一个元素为元素 $i-1$。\n\n给定 $n,k,type$，你需要：\n- 在 $type=1$ 时求有多少长为 $n$ 的排列 $A$ 满足 $f(A)=k$ 。\n- 在 $type=2$ 时求有多少长为 $n$ 的圆排列 $A$ 满足 $f(A)=k$ 。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "输入一行三个正整数 $n,k,type$，具体含义见题目描述。", "outputFormat": "输出一行一个整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "#### 【样例解释 #1】\n\n有如下合法排列：\n\n1. $[1,4,2,3]$\n2. $[1,4,3,2]$\n3. $[2,1,4,3]$\n4. $[2,4,1,3]$\n5. $[2,4,3,1]$\n6. $[3,1,2,4]$\n7. $[3,1,4,2]$\n8. $[3,2,1,4]$\n9. $[3,2,4,1]$\n10. $[3,4,1,2]$\n11. $[3,4,2,1]$\n\n#### 【样例解释 #2】\n\n有如下合法圆排列：\n\n1. $[1,2,5,3,4]$\n2. $[1,2,5,4,3]$\n3. $[1,3,2,5,4]$\n4. $[1,3,5,2,4]$\n5. $[1,3,5,4,2]$\n6. $[1,4,2,3,5]$\n7. $[1,4,2,5,3]$\n8. $[1,4,3,2,5]$\n9. $[1,4,3,5,2]$\n10. $[1,4,5,3,2]$\n11. $[1,5,2,4,3]$\n12. $[1,5,3,2,4]$\n13. $[1,5,3,4,2]$\n14. $[1,5,4,2,3]$\n\n需要注意的是，我们认为 $[1,2,5,3,4]$ 和 $[2,5,3,4,1]$ 等是同一个圆排列。\n\n也就是我们认为两个圆排列不同，当且仅当存在一个 $2 \\leq i \\leq n$，满足两个圆排列中元素 $i$ 的前一个元素不同。\n\n#### 【数据范围】\n\n|   测试点编号 | $n \\leq$ | $k \\leq$ | $type=$ |\n|:------------:|:--------:|:--------:|:-------:|\n|  $1 \\sim 2$  |    $7$   |    $7$   |   $1$   |\n|  $3 \\sim 4$  |    $7$   |    $7$   |   $2$   |\n|  $5 \\sim 6$  |   $15$   |   $15$   |   $1$   |\n|  $7 \\sim 8$  |   $15$   |   $15$   |   $2$   |\n|  $9 \\sim 12$ |   $50$   |   $50$   |   $1$   |\n| $13 \\sim 16$ |   $50$   |   $50$   |   $2$   |\n|     $17$     |   $500$  |    $10$   |   $1$   |\n|     $18$     |   $500$  |    $10$   |   $2$   |\n|     $19$     |   $500$  |   $500$  |   $1$   |\n|     $20$     |   $500$  |   $500$  |   $2$   |\n\n对于所有数据，$1 \\leq k < n \\leq 500$，$1 \\leq type \\leq 2$。  ", "locale": "zh-CN"}}}
{"pid": "P8860", "type": "P", "difficulty": 6, "samples": [["5 6 5\n1 2\n2 3\n3 5\n2 4\n4 5\n5 1\n1\n2\n3\n4\n5", "0\n1\n1\n0\n0\n"], ["10 11 8\n1 2\n2 7\n2 5\n1 4\n4 5\n4 8\n8 9\n9 5\n3 2\n3 6\n5 10\n10\n5\n11\n10\n3\n7\n1\n4\n", "1\n1\n0\n0\n1\n0\n1\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "倍增", "洛谷原创", "O2优化", "最短路", "可持久化线段树", "洛谷月赛"], "title": "动态图连通性", "background": "", "description": "给定一张 $n$ 点 $m$ 边的**有向图**，初始时存在一条从 $1$ 到 $n$ 的路径。  \n\n你需要处理 $q$ 组询问，每组询问给定一个 $[1,m]$ 中的正整数 $x$，如果原图中的第 $x$ 条边仍存在且当前的图中删去原图中的第 $x$ 条边后仍有一条从 $1$ 到 $n$ 的路径，则删除原图中的第 $x$ 条边。  \n\n你需要报告每组询问中是否删去了第 $x$ 条边。 \n\n**请注意：一组询问中删除某条边后，这条边会被永远删除。也就是询问之间会相互影响。**", "inputFormat": "输入第一行三个正整数 $n,m,q$，分别表示有向图的点数，边数以及询问个数。   \n\n接下来 $m$ 行，第 $i$ 行两个正整数 $u_i,v_i$，表示第 $i$ 条边由 $u_i$ 连向 $v_i$。  \n\n接下来 $q$ 行，每行一个正整数 $x$，具体含义同题目描述。", "outputFormat": "输出共 $q$ 行，每行一个正整数 $0$ 或 $1$。 \n\n如果在这组询问中删去了第 $x$ 条边，输出 $1$，否则输出 $0$。", "hint": "#### 【样例解释】\n\n在第一组样例中：\n\n初始时，图中边集为 $\\{ (1,2),(2,3),(3,5),(2,4),(4,5),(5,1) \\}$。\n\n若删去原图中的第 $1$ 条边 $(1,2)$，图中就没有 $1$ 到 $n$ 的路径，所以不能删除第 $1$ 条边。\n\n若删去原图中的第 $2$ 条边 $(2,3)$，图中存在路径 $1 \\to 2 \\to 4 \\to 5$，所以可以删去第 $2$ 条边，图中边集变为 $\\{ (1,2),(3,5),(2,4),(4,5),(5,1) \\}$。\n\n若删去原图中的第 $3$ 条边 $(3,5)$，图中存在路径 $1 \\to 2 \\to 4 \\to 5$，所以可以删去第 $3$ 条边，图中边集变为 $\\{ (1,2),(2,4),(4,5),(5,1) \\}$。\n\n若删去原图中的第 $4$ 条边 $(2,4)$，图中就没有 $1$ 到 $n$ 的路径，所以不能删除第 $4$ 条边。\n\n若删去原图中的第 $5$ 条边 $(4,5)$，图中就没有 $1$ 到 $n$ 的路径，所以不能删除第 $5$ 条边。\n\n#### 【数据范围】\n\n|  测试点编号  |    $n,m \\leq$   |     $q \\leq$    |            特殊限制           |\n|:------------:|:---------------:|:---------------:|:-------------------------------:|\n|  $1 \\sim 2$  |      $1000$     |      $1000$     |                无               |\n|  $3 \\sim 6$  |      $5000$     | $2 \\times 10^5$ |                无               |\n|  $7 \\sim 8$  | $2 \\times 10^5$ | $2 \\times 10^5$ | 保证所有询问中最多有 $1$ 条边没有被删除 |\n| $9 \\sim 12$ | $2 \\times 10^5$ | $2 \\times 10^5$ | 保证所有询问中最多有 $5$ 条边没有被删除 |\n| $13 \\sim 16$ | $2 \\times 10^5$ | $2 \\times 10^5$ |         将有向图视作无向图仍能得到正确答案        |\n| $17 \\sim 20$ | $2 \\times 10^5$ | $2 \\times 10^5$ |                无               |\n\n对于所有数据，$1 \\leq n,m,q \\leq 2 \\times 10^5$，给定的图无重边、自环，且存在一条 $1$ 到 $n$ 的路径。\n\n**给出的两组大样例分别满足测试点 1 和测试点 13 的限制。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "动态图连通性", "background": "", "description": "给定一张 $n$ 点 $m$ 边的**有向图**，初始时存在一条从 $1$ 到 $n$ 的路径。  \n\n你需要处理 $q$ 组询问，每组询问给定一个 $[1,m]$ 中的正整数 $x$，如果原图中的第 $x$ 条边仍存在且当前的图中删去原图中的第 $x$ 条边后仍有一条从 $1$ 到 $n$ 的路径，则删除原图中的第 $x$ 条边。  \n\n你需要报告每组询问中是否删去了第 $x$ 条边。 \n\n**请注意：一组询问中删除某条边后，这条边会被永远删除。也就是询问之间会相互影响。**", "inputFormat": "输入第一行三个正整数 $n,m,q$，分别表示有向图的点数，边数以及询问个数。   \n\n接下来 $m$ 行，第 $i$ 行两个正整数 $u_i,v_i$，表示第 $i$ 条边由 $u_i$ 连向 $v_i$。  \n\n接下来 $q$ 行，每行一个正整数 $x$，具体含义同题目描述。", "outputFormat": "输出共 $q$ 行，每行一个正整数 $0$ 或 $1$。 \n\n如果在这组询问中删去了第 $x$ 条边，输出 $1$，否则输出 $0$。", "hint": "#### 【样例解释】\n\n在第一组样例中：\n\n初始时，图中边集为 $\\{ (1,2),(2,3),(3,5),(2,4),(4,5),(5,1) \\}$。\n\n若删去原图中的第 $1$ 条边 $(1,2)$，图中就没有 $1$ 到 $n$ 的路径，所以不能删除第 $1$ 条边。\n\n若删去原图中的第 $2$ 条边 $(2,3)$，图中存在路径 $1 \\to 2 \\to 4 \\to 5$，所以可以删去第 $2$ 条边，图中边集变为 $\\{ (1,2),(3,5),(2,4),(4,5),(5,1) \\}$。\n\n若删去原图中的第 $3$ 条边 $(3,5)$，图中存在路径 $1 \\to 2 \\to 4 \\to 5$，所以可以删去第 $3$ 条边，图中边集变为 $\\{ (1,2),(2,4),(4,5),(5,1) \\}$。\n\n若删去原图中的第 $4$ 条边 $(2,4)$，图中就没有 $1$ 到 $n$ 的路径，所以不能删除第 $4$ 条边。\n\n若删去原图中的第 $5$ 条边 $(4,5)$，图中就没有 $1$ 到 $n$ 的路径，所以不能删除第 $5$ 条边。\n\n#### 【数据范围】\n\n|  测试点编号  |    $n,m \\leq$   |     $q \\leq$    |            特殊限制           |\n|:------------:|:---------------:|:---------------:|:-------------------------------:|\n|  $1 \\sim 2$  |      $1000$     |      $1000$     |                无               |\n|  $3 \\sim 6$  |      $5000$     | $2 \\times 10^5$ |                无               |\n|  $7 \\sim 8$  | $2 \\times 10^5$ | $2 \\times 10^5$ | 保证所有询问中最多有 $1$ 条边没有被删除 |\n| $9 \\sim 12$ | $2 \\times 10^5$ | $2 \\times 10^5$ | 保证所有询问中最多有 $5$ 条边没有被删除 |\n| $13 \\sim 16$ | $2 \\times 10^5$ | $2 \\times 10^5$ |         将有向图视作无向图仍能得到正确答案        |\n| $17 \\sim 20$ | $2 \\times 10^5$ | $2 \\times 10^5$ |                无               |\n\n对于所有数据，$1 \\leq n,m,q \\leq 2 \\times 10^5$，给定的图无重边、自环，且存在一条 $1$ 到 $n$ 的路径。\n\n**给出的两组大样例分别满足测试点 1 和测试点 13 的限制。**", "locale": "zh-CN"}}}
{"pid": "P8861", "type": "P", "difficulty": 7, "samples": [["9 0\n1 1 5\n1 6 8\n1 2 3\n3 3 8\n2 4 6\n1 5 9\n2 2 7\n3 2 7\n3 3 6\n", "4\n4\n2\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "堆", "洛谷原创", "O2优化", "分治", "洛谷月赛"], "title": "线段", "background": "", "description": "有一个初始为空的线段集，你需要处理 $q$ 组询问，每组询问的格式为如下三种之一：\n\n1. 加入一条新线段 $[l_i,r_i]$。\n2. 将线段集里所有与 $[l_i,r_i]$ 相交的线段修改为其与 $[l_i,r_i]$ 的交。\n3. 求出线段集里所有与 $[l_i,r_i]$ 相交的线段与 $[l_i,r_i]$ 的交的长度和。\n\n两条线段 $[a,b],[c,d]$ 相交，当且仅当 $\\max\\{a,c\\} \\leq \\min\\{b,d\\}$，它们的交为 $[\\max\\{a,c\\},\\min\\{b,d\\}]$。\n\n一条线段 $[a,b]$ 的长度为 $b-a$。\n\n在部分测试点中，你需要**在线地**进行这些操作。\n\n**注意：在本题中，线段可能退化为单点。**", "inputFormat": "第一行两个正整数 $q$ 和 $type$，分别表示操作次数和强制在线参数。\n\n接下来 $q$ 行，每行三个正整数 $opt,l_i',r_i'$，其中 $opt$ 表示操作类型。\n\n我们记 $last$ 表示上一次 $3$ 询问的答案（$last$ 初始为 $0$），则真实的 $l_i = ( l_i' + type \\times last ) \\bmod ( 2 \\times 10^5 + 1 ), r_i = ( r_i' + type \\times last ) \\bmod ( 2 \\times 10^5 + 1 )$。\n\n数据保证 $1 \\leq l_i \\leq r_i \\leq 2 \\times 10^5$。", "outputFormat": "对于每个 $3$ 询问，输出一行表示答案。", "hint": "#### 【样例解释】\n\n每次操作后的线段集：\n\n- 第一次后：$\\{ [1,5] \\}$\n- 第二次后：$\\{ [1,5],[6,8] \\}$\n- 第三次后：$\\{ [1,5],[6,8],[2,3] \\}$\n- 第五次后：$\\{ [4,5],[6,6],[2,3] \\}$\n- 第六次后：$\\{ [4,5],[6,6],[2,3],[5,9] \\}$\n- 第七次后：$\\{ [4,5],[6,6],[2,3],[5,7] \\}$\n\n#### 【数据范围】\n\n记 $k_1,k_2,k_3$ 分别为 $opt=1,2,3$ 的询问个数。\n\n|    测试点编号    |    $k_1 \\leq$    |    $k_2 \\leq$    |    $k_3 \\leq$    | $type=$ |             特殊性质             |\n|:----------------:|:---------------:|:---------------:|:---------------:|:-------:|:--------------------------------:|\n|      $1 \\sim 2$  |      $100$      |      $100$      |      $100$      |   $=0$  |                无                |\n|      $3 \\sim 5$  |      $10^5$     |       $5$       | $3 \\times 10^5$ |   $=0$  |                无                |\n|      $6 \\sim 8$  |      $10^5$     |      $10^5$     |        $1$        |   $=0$  | 所有 $2$ 操作在所有 $1$ 操作之后 |\n|      $9 \\sim 12$ |      $10^5$     |      $10^5$     | $3 \\times 10^5$ |   $=0$  | 所有 $2$ 操作在所有 $1$ 操作之后 |\n|     $13 \\sim 17$ |      $10^5$     |      $10^5$     | $3 \\times 10^5$ |   $=0$  |     $l_i \\leq 10^5 \\leq r_i$     |\n|     $18 \\sim 20$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $3 \\times 10^5$ |   $=0$  |                无                |\n|     $21 \\sim 25$ |      $10^5$     |      $10^5$     | $3 \\times 10^5$ |   $=1$  |                无                |\n\n对于所有数据，$1 \\leq q \\leq 5 \\times 10^5$, $k_3 \\geq 1$, $0 \\leq l_i',r_i' \\leq 2 \\times 10^5$, $1 \\leq l_i \\leq r_i \\leq 2 \\times 10^5$，$0 \\leq type \\leq1$，$1 \\leq opt \\leq 3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "线段", "background": "", "description": "有一个初始为空的线段集，你需要处理 $q$ 组询问，每组询问的格式为如下三种之一：\n\n1. 加入一条新线段 $[l_i,r_i]$。\n2. 将线段集里所有与 $[l_i,r_i]$ 相交的线段修改为其与 $[l_i,r_i]$ 的交。\n3. 求出线段集里所有与 $[l_i,r_i]$ 相交的线段与 $[l_i,r_i]$ 的交的长度和。\n\n两条线段 $[a,b],[c,d]$ 相交，当且仅当 $\\max\\{a,c\\} \\leq \\min\\{b,d\\}$，它们的交为 $[\\max\\{a,c\\},\\min\\{b,d\\}]$。\n\n一条线段 $[a,b]$ 的长度为 $b-a$。\n\n在部分测试点中，你需要**在线地**进行这些操作。\n\n**注意：在本题中，线段可能退化为单点。**", "inputFormat": "第一行两个正整数 $q$ 和 $type$，分别表示操作次数和强制在线参数。\n\n接下来 $q$ 行，每行三个正整数 $opt,l_i',r_i'$，其中 $opt$ 表示操作类型。\n\n我们记 $last$ 表示上一次 $3$ 询问的答案（$last$ 初始为 $0$），则真实的 $l_i = ( l_i' + type \\times last ) \\bmod ( 2 \\times 10^5 + 1 ), r_i = ( r_i' + type \\times last ) \\bmod ( 2 \\times 10^5 + 1 )$。\n\n数据保证 $1 \\leq l_i \\leq r_i \\leq 2 \\times 10^5$。", "outputFormat": "对于每个 $3$ 询问，输出一行表示答案。", "hint": "#### 【样例解释】\n\n每次操作后的线段集：\n\n- 第一次后：$\\{ [1,5] \\}$\n- 第二次后：$\\{ [1,5],[6,8] \\}$\n- 第三次后：$\\{ [1,5],[6,8],[2,3] \\}$\n- 第五次后：$\\{ [4,5],[6,6],[2,3] \\}$\n- 第六次后：$\\{ [4,5],[6,6],[2,3],[5,9] \\}$\n- 第七次后：$\\{ [4,5],[6,6],[2,3],[5,7] \\}$\n\n#### 【数据范围】\n\n记 $k_1,k_2,k_3$ 分别为 $opt=1,2,3$ 的询问个数。\n\n|    测试点编号    |    $k_1 \\leq$    |    $k_2 \\leq$    |    $k_3 \\leq$    | $type=$ |             特殊性质             |\n|:----------------:|:---------------:|:---------------:|:---------------:|:-------:|:--------------------------------:|\n|      $1 \\sim 2$  |      $100$      |      $100$      |      $100$      |   $=0$  |                无                |\n|      $3 \\sim 5$  |      $10^5$     |       $5$       | $3 \\times 10^5$ |   $=0$  |                无                |\n|      $6 \\sim 8$  |      $10^5$     |      $10^5$     |        $1$        |   $=0$  | 所有 $2$ 操作在所有 $1$ 操作之后 |\n|      $9 \\sim 12$ |      $10^5$     |      $10^5$     | $3 \\times 10^5$ |   $=0$  | 所有 $2$ 操作在所有 $1$ 操作之后 |\n|     $13 \\sim 17$ |      $10^5$     |      $10^5$     | $3 \\times 10^5$ |   $=0$  |     $l_i \\leq 10^5 \\leq r_i$     |\n|     $18 \\sim 20$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $3 \\times 10^5$ |   $=0$  |                无                |\n|     $21 \\sim 25$ |      $10^5$     |      $10^5$     | $3 \\times 10^5$ |   $=1$  |                无                |\n\n对于所有数据，$1 \\leq q \\leq 5 \\times 10^5$, $k_3 \\geq 1$, $0 \\leq l_i',r_i' \\leq 2 \\times 10^5$, $1 \\leq l_i \\leq r_i \\leq 2 \\times 10^5$，$0 \\leq type \\leq1$，$1 \\leq opt \\leq 3$。", "locale": "zh-CN"}}}
{"pid": "P8862", "type": "P", "difficulty": 5, "samples": [["1\n5 3\n1 2 3 4 5\n2 3 5\n1 3 4 2\n2 1 1\n20 2 5 6 5\n", "3 20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2022", "洛谷原创", "Special Judge", "O2优化", "构造"], "title": "「KDOI-03」还原数据", "background": "", "description": "小 E 正在做一道经典题：\n\n给定一个长度为 $n$ 的序列 $a$ 和 $q$ 个操作，操作共有 $2$ 种类型：\n\n+ $\\tt{1~l~r~x}$：对于所有 $l\\le i\\le r$，$a_i\\leftarrow a_i+x$。\n+ $\\tt{2~l~r~x}$：对于所有 $l\\le i\\le r$，$a_i\\leftarrow \\max(a_i,x)$。\n\n题目要求输出所有操作结束后的最终序列 $a'$。\n\n小 E 迅速写了一份代码提交，但是发现，由于宇宙射线的影响，输入数据出现了一些小问题。具体地，对于所有 $2$ 操作，操作中给出的 $x$ 均被丢失了，也就是说，输入数据中的 $2$ 操作只剩下了 $\\tt{2~l~r}$。输出数据则没有问题。小 E 现在想要通过剩余的数据恢复原来的输入数据，请你帮助他完成这个任务。\n\n当然，可能会有多种合法的输入数据，你需要找到其中任意一种。数据保证有解。", "inputFormat": "从标准输入读入数据。\n\n**本题有多组测试数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组测试数据，第一行两个非负整数 $n,q$。\n\n第二行 $n$ 个整数，表示初始序列 $a_1,a_2,\\ldots,a_n$。\n\n接下来 $q$ 行，每行一次操作，形如 $\\tt{1~l~r~x}$ 或 $\\tt{2~l~r}$。\n\n接下来一行 $n$ 个整数，表示最终序列 $a_1',a_2',\\ldots,a_n'$。", "outputFormat": "输出到标准输出。\n\n**本题开启自定义校验器（Special Judge）。**\n\n对于每组测试数据，设共有 $q_2$ 个 $2$ 操作，输出一行 $q_2$ 个整数，第 $i$ 个整数表示第 $i$ 次 $2$ 操作中所给出的 $x$ 的值。\n\n你需要保证 $-10^{15}\\le x\\le 10^{15}$。", "hint": "**【样例 1 解释】**\n\n所有合法输出需要满足：第 $1$ 个数 $\\le3$，第 $2$ 个数恰好为 $20$。\n\n**【样例 2】**\n\n见选手文件中的 `restore/restore2.in` 与 `restore/restore2.ans`。\n\n**【样例 3】**\n\n见选手文件中的 `restore/restore3.in` 与 `restore/restore3.ans`。\n\n\n***\n\n**【数据范围】**\n\n记 $q_2$ 为单组数据内 $2$ 操作的个数，$\\sum n$ 为单个测试点内所有 $n$ 的和，$\\sum q$ 为单个测试点内所有 $q$ 的和。\n\n对于 $20\\%$ 的数据，保证 $n,q\\le50$，$\\sum n,\\sum q\\le1~000$。\n\n对于 $40\\%$ 的数据，保证 $n,q\\le1~000$，$\\sum n,\\sum q\\le10^5$。\n\n对于另外 $20\\%$ 的数据，保证 $l=1,r=n$。\n\n对于另外 $20\\%$ 的数据，保证 $q_2\\le100$。\n\n对于 $100\\%$ 的数据，保证 $1\\le T\\le 100$，$1\\le n,q\\le 10^5$，$1\\le\\sum n,\\sum q\\le 3\\times10^5$，$-10^9\\le a_i,x\\le 10^9$，$-10^{15}\\le a_i'\\le10^{15}$， $q_2\\ge1$。\n\n\n***\n\n**【校验器】**\n\n\n本题样例文件较大，无法在附件中下载，请在选手文件中查看。\n\n为了方便测试，在 $\\texttt{restore}$ 目录下我们下发了 $\\texttt{checker.cpp}$ 文件。你可以编译该文件，并使用它校验自己的输出文件。请注意它与最终评测时所用的校验器并不完全一致，你不需要也不应该关心其代码的具体内容。\n\n编译命令为：\n\n```plain\ng++ checker.cpp -o checker -std=c++14\n```\n\n使用方式为：\n\n```\n./checker <inputfile> <outputfile> <answerfile>\n```\n\n校验器可能会返回以下状态中的其中一种：\n\n+ $\\tt{Accepted}$：表示你的输出完全正确。\n+ $\\tt{Wrong~answer~at~testcase~ x}$：表示你的输出在第 $x$ 个测试数据出错。\n\n***\n\n**【提示】**\n\n本题输入输出量较大，推荐使用较快的输入输出方式。\n\nKDOI 出题组温馨提示：**多测不清空，爆零两行泪。**\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「KDOI-03」还原数据", "background": "", "description": "小 E 正在做一道经典题：\n\n给定一个长度为 $n$ 的序列 $a$ 和 $q$ 个操作，操作共有 $2$ 种类型：\n\n+ $\\tt{1~l~r~x}$：对于所有 $l\\le i\\le r$，$a_i\\leftarrow a_i+x$。\n+ $\\tt{2~l~r~x}$：对于所有 $l\\le i\\le r$，$a_i\\leftarrow \\max(a_i,x)$。\n\n题目要求输出所有操作结束后的最终序列 $a'$。\n\n小 E 迅速写了一份代码提交，但是发现，由于宇宙射线的影响，输入数据出现了一些小问题。具体地，对于所有 $2$ 操作，操作中给出的 $x$ 均被丢失了，也就是说，输入数据中的 $2$ 操作只剩下了 $\\tt{2~l~r}$。输出数据则没有问题。小 E 现在想要通过剩余的数据恢复原来的输入数据，请你帮助他完成这个任务。\n\n当然，可能会有多种合法的输入数据，你需要找到其中任意一种。数据保证有解。", "inputFormat": "从标准输入读入数据。\n\n**本题有多组测试数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组测试数据，第一行两个非负整数 $n,q$。\n\n第二行 $n$ 个整数，表示初始序列 $a_1,a_2,\\ldots,a_n$。\n\n接下来 $q$ 行，每行一次操作，形如 $\\tt{1~l~r~x}$ 或 $\\tt{2~l~r}$。\n\n接下来一行 $n$ 个整数，表示最终序列 $a_1',a_2',\\ldots,a_n'$。", "outputFormat": "输出到标准输出。\n\n**本题开启自定义校验器（Special Judge）。**\n\n对于每组测试数据，设共有 $q_2$ 个 $2$ 操作，输出一行 $q_2$ 个整数，第 $i$ 个整数表示第 $i$ 次 $2$ 操作中所给出的 $x$ 的值。\n\n你需要保证 $-10^{15}\\le x\\le 10^{15}$。", "hint": "**【样例 1 解释】**\n\n所有合法输出需要满足：第 $1$ 个数 $\\le3$，第 $2$ 个数恰好为 $20$。\n\n**【样例 2】**\n\n见选手文件中的 `restore/restore2.in` 与 `restore/restore2.ans`。\n\n**【样例 3】**\n\n见选手文件中的 `restore/restore3.in` 与 `restore/restore3.ans`。\n\n\n***\n\n**【数据范围】**\n\n记 $q_2$ 为单组数据内 $2$ 操作的个数，$\\sum n$ 为单个测试点内所有 $n$ 的和，$\\sum q$ 为单个测试点内所有 $q$ 的和。\n\n对于 $20\\%$ 的数据，保证 $n,q\\le50$，$\\sum n,\\sum q\\le1~000$。\n\n对于 $40\\%$ 的数据，保证 $n,q\\le1~000$，$\\sum n,\\sum q\\le10^5$。\n\n对于另外 $20\\%$ 的数据，保证 $l=1,r=n$。\n\n对于另外 $20\\%$ 的数据，保证 $q_2\\le100$。\n\n对于 $100\\%$ 的数据，保证 $1\\le T\\le 100$，$1\\le n,q\\le 10^5$，$1\\le\\sum n,\\sum q\\le 3\\times10^5$，$-10^9\\le a_i,x\\le 10^9$，$-10^{15}\\le a_i'\\le10^{15}$， $q_2\\ge1$。\n\n\n***\n\n**【校验器】**\n\n\n本题样例文件较大，无法在附件中下载，请在选手文件中查看。\n\n为了方便测试，在 $\\texttt{restore}$ 目录下我们下发了 $\\texttt{checker.cpp}$ 文件。你可以编译该文件，并使用它校验自己的输出文件。请注意它与最终评测时所用的校验器并不完全一致，你不需要也不应该关心其代码的具体内容。\n\n编译命令为：\n\n```plain\ng++ checker.cpp -o checker -std=c++14\n```\n\n使用方式为：\n\n```\n./checker <inputfile> <outputfile> <answerfile>\n```\n\n校验器可能会返回以下状态中的其中一种：\n\n+ $\\tt{Accepted}$：表示你的输出完全正确。\n+ $\\tt{Wrong~answer~at~testcase~ x}$：表示你的输出在第 $x$ 个测试数据出错。\n\n***\n\n**【提示】**\n\n本题输入输出量较大，推荐使用较快的输入输出方式。\n\nKDOI 出题组温馨提示：**多测不清空，爆零两行泪。**\n", "locale": "zh-CN"}}}
{"pid": "P8863", "type": "P", "difficulty": 6, "samples": [["4\n2 2 2 2", "90"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2022", "洛谷原创", "O2优化", "动态规划优化", "组合数学"], "title": "「KDOI-03」构造数组", "background": null, "description": "你现在有一个长度为 $n$ 的数组 $a$。一开始，所有 $a_i$ 均为 $0$。给出一个同样长度为 $n$ 的目标数组 $b$。求有多少种方案，使得通过若干次以下操作，可以让 $a$ 数组变成 $b$。\n\n* 选出两个**不同的**下标 $1\\leq i<j\\leq n$，并将 $a_i$ 和 $a_j$ 同时增加 $1$。\n\n两种方案被称之为不同的，当且仅当存在一个 $x$ 使得一种方案中第 $x$ 次操作选择的两个下标 $(i,j)$ 与另一种方案中的不同。\n\n**答案对 $\\bm{998244353}$ 取模。**", "inputFormat": "从标准输入读入数据。\n\n输入数据一共包含两行。\n\n第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数，表示 $b_1,b_2,\\ldots,b_n$。", "outputFormat": "输出到标准输出。\n\n输出一行一个正整数，表示将 $a$ 数组通过若干次操作变成 $b$ 数组的方案数对 $998244353$ 取模后的结果。", "hint": "**【样例 1 解释】**\n\n| 种类编号 | 第一组 | 第二组 | 第三组 | 第四组 | 方案数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | `1<->2` | `1<->2` | `3<->4` | `3<->4` | $\\binom{4}{2}=6$ |\n| $2$ | `1<->3` | `1<->3` | `2<->4` | `2<->4` | $\\binom{4}{2}=6$ |\n| $3$ | `1<->4` | `1<->4` | `2<->3` | `2<->3` | $\\binom{4}{2}=6$ |\n| $4$ | `1<->2` | `1<->4` | `2<->3` | `3<->4` | $4!=24$ |\n| $5$ | `1<->2` | `1<->3` | `2<->4` | `3<->4` | $4!=24$ |\n| $6$ | `1<->3` | `1<->4` | `2<->3` | `2<->4` | $4!=24$ |\n\n总方案数是 $6\\times3+24\\times3=90$。\n\n**【样例 2】**\n\n见选手文件中的 `array/array2.in` 与 `array/array2.ans`。\n\n此样例满足测试点 $6\\sim8$ 的限制。\n\n**【样例 3】**\n\n见选手文件中的 `array/array3.in` 与 `array/array3.ans`。\n\n此样例满足测试点 $12\\sim14$ 的限制。\n\n**【样例 4】**\n\n见选手文件中的 `array/array4.in` 与 `array/array4.ans`。\n\n此样例满足测试点 $15\\sim18$ 的限制。\n\n**【样例 5】**\n\n见选手文件中的 `array/array5.in` 与 `array/array5.ans`。\n\n此样例满足测试点 $19\\sim20$ 的限制。\n\n**【样例 6】**\n\n见选手文件中的 `array/array6.in` 与 `array/array6.ans`。\n\n此样例满足测试点 $21\\sim22$ 的限制。\n\n**【样例 7】**\n\n见选手文件中的 `array/array7.in` 与 `array/array7.ans`。\n\n此样例满足测试点 $23\\sim25$ 的限制。\n\n***\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n\\le5~000$，$1\\leq b_i\\le3 \\times 10^4$，$\\sum b_i\\le3 \\times 10^4$。\n\n| 测试点编号 | $n$ | $\\sum b_i$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $\\leq5~000$ | $\\equiv 1\\pmod 2$ |\n| $2\\sim3$ | $=1$ | $\\leq3 \\times 10^4$ |\n| $4\\sim5$ | $=2$ | $\\leq3 \\times 10^4$ |\n| $6\\sim8$ | $\\leq5$ | $\\leq8$ |\n| $9\\sim11$ | $\\leq20$ | $=n$ |\n| $12\\sim14$ | $\\leq 5~000$ | $=n$ |\n| $15\\sim18$ | $\\leq16$ | $\\leq16$ |\n| $19\\sim20$ | $\\le 700$ | $\\le700$ |\n| $21\\sim22$ | $\\le 5~000$ | $\\le5~000$ |\n| $23\\sim25$ | $\\le5~000$ | $\\le3 \\times 10^4$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「KDOI-03」构造数组", "background": null, "description": "你现在有一个长度为 $n$ 的数组 $a$。一开始，所有 $a_i$ 均为 $0$。给出一个同样长度为 $n$ 的目标数组 $b$。求有多少种方案，使得通过若干次以下操作，可以让 $a$ 数组变成 $b$。\n\n* 选出两个**不同的**下标 $1\\leq i<j\\leq n$，并将 $a_i$ 和 $a_j$ 同时增加 $1$。\n\n两种方案被称之为不同的，当且仅当存在一个 $x$ 使得一种方案中第 $x$ 次操作选择的两个下标 $(i,j)$ 与另一种方案中的不同。\n\n**答案对 $\\bm{998244353}$ 取模。**", "inputFormat": "从标准输入读入数据。\n\n输入数据一共包含两行。\n\n第一行包含一个正整数 $n$。\n\n第二行包含 $n$ 个正整数，表示 $b_1,b_2,\\ldots,b_n$。", "outputFormat": "输出到标准输出。\n\n输出一行一个正整数，表示将 $a$ 数组通过若干次操作变成 $b$ 数组的方案数对 $998244353$ 取模后的结果。", "hint": "**【样例 1 解释】**\n\n| 种类编号 | 第一组 | 第二组 | 第三组 | 第四组 | 方案数 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | `1<->2` | `1<->2` | `3<->4` | `3<->4` | $\\binom{4}{2}=6$ |\n| $2$ | `1<->3` | `1<->3` | `2<->4` | `2<->4` | $\\binom{4}{2}=6$ |\n| $3$ | `1<->4` | `1<->4` | `2<->3` | `2<->3` | $\\binom{4}{2}=6$ |\n| $4$ | `1<->2` | `1<->4` | `2<->3` | `3<->4` | $4!=24$ |\n| $5$ | `1<->2` | `1<->3` | `2<->4` | `3<->4` | $4!=24$ |\n| $6$ | `1<->3` | `1<->4` | `2<->3` | `2<->4` | $4!=24$ |\n\n总方案数是 $6\\times3+24\\times3=90$。\n\n**【样例 2】**\n\n见选手文件中的 `array/array2.in` 与 `array/array2.ans`。\n\n此样例满足测试点 $6\\sim8$ 的限制。\n\n**【样例 3】**\n\n见选手文件中的 `array/array3.in` 与 `array/array3.ans`。\n\n此样例满足测试点 $12\\sim14$ 的限制。\n\n**【样例 4】**\n\n见选手文件中的 `array/array4.in` 与 `array/array4.ans`。\n\n此样例满足测试点 $15\\sim18$ 的限制。\n\n**【样例 5】**\n\n见选手文件中的 `array/array5.in` 与 `array/array5.ans`。\n\n此样例满足测试点 $19\\sim20$ 的限制。\n\n**【样例 6】**\n\n见选手文件中的 `array/array6.in` 与 `array/array6.ans`。\n\n此样例满足测试点 $21\\sim22$ 的限制。\n\n**【样例 7】**\n\n见选手文件中的 `array/array7.in` 与 `array/array7.ans`。\n\n此样例满足测试点 $23\\sim25$ 的限制。\n\n***\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le n\\le5~000$，$1\\leq b_i\\le3 \\times 10^4$，$\\sum b_i\\le3 \\times 10^4$。\n\n| 测试点编号 | $n$ | $\\sum b_i$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $\\leq5~000$ | $\\equiv 1\\pmod 2$ |\n| $2\\sim3$ | $=1$ | $\\leq3 \\times 10^4$ |\n| $4\\sim5$ | $=2$ | $\\leq3 \\times 10^4$ |\n| $6\\sim8$ | $\\leq5$ | $\\leq8$ |\n| $9\\sim11$ | $\\leq20$ | $=n$ |\n| $12\\sim14$ | $\\leq 5~000$ | $=n$ |\n| $15\\sim18$ | $\\leq16$ | $\\leq16$ |\n| $19\\sim20$ | $\\le 700$ | $\\le700$ |\n| $21\\sim22$ | $\\le 5~000$ | $\\le5~000$ |\n| $23\\sim25$ | $\\le5~000$ | $\\le3 \\times 10^4$ |", "locale": "zh-CN"}}}
{"pid": "P8864", "type": "P", "difficulty": 7, "samples": [["5 1 2\n1 1 1 0 1\n2 3\n1 3", "1\n1"], ["20 3 22\n0 0 1 1 1 1 1 0 0 0 0 0 1 0 1 0 0 1 0 1 \n12 15\n1 6\n5 10\n2 5\n9 18\n6 17\n2 13\n4 16\n2 8\n9 19\n10 15\n7 15\n1 3\n14 18\n6 17\n12 14\n7 16\n14 18\n11 12\n3 5\n3 6\n3 15\n", "0\n1\n0\n0\n0\n6\n3\n5\n1\n0\n0\n0\n0\n0\n6\n0\n0\n0\n0\n0\n1\n3\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2022", "洛谷原创", "O2优化", "动态规划优化", "矩阵加速", "四边形不等式"], "title": "「KDOI-03」序列变换", "background": "", "description": "给定一个长度为 $n$ 的 $\\tt01$ 序列 $a$ 和 $q$ 次询问，询问参数 $k$。\n\n每次询问给定 $L,R$，其中 $1\\leq L\\leq R\\leq n$，你可以进行如下操作：\n\n+ 选择一个下标 $L<i\\le R$；\n+ 将 $a_{i-1}$ 赋值为 $a_{i-1}\\oplus a_i$，$a_{i+1}$  赋值为 $a_{i+1}\\oplus a_i$。如果 $i=n$，则不对 $a_{i+1}$ 作出改变。其中 $\\oplus$ 表示按位异或运算。\n\n求使得 $[L,R]$ 区间内**至多**有 $k$ 个 $\\tt1$ 的最小操作次数。询问之间相互独立，也就是说，每次询问后重置为初始序列。", "inputFormat": "从标准输入读入数据。\n\n第一行包含三个正整数 $n,k,q$。\n\n第二行包含 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$。\n\n接下来 $q$ 行，每行包含两个正整数 $L,R$，表示一次询问。", "outputFormat": "输出到标准输出。\n\n输出共 $q$ 行，每行包含一个整数，表示答案。", "hint": "**【样例 1 解释】**\n\n如图，用绿色代表 $\\tt0$，红色代表 $\\tt1$，初始序列如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hxw9knxu.png)\n\n对于第 $1$ 次询问，选择 $i=3$，则序列变为下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zvb2lfi8.png)\n\n对于第 $2$ 次询问，选择 $i=2$，则序列变为下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wubvxvaa.png)\n\n**【样例 2 解释】**\n\n对于第 $1$ 次询问，由于 $a_{12},a_{13},a_{14},a_{15}$ 中只有 $2$ 个 $\\tt1$，所以不需要进行任何操作。\n\n对于第 $6$ 次询问，可以依次选择 $i=\\{7,8,9,10,11,12\\}$。\n\n**【样例 3】**\n\n见选手文件中的 `control/control3.in` 与 `control/control3.ans`。\n\n此样例满足测试点 $7\\sim10$ 的限制。\n\n**【样例 4】**\n\n见选手文件中的 `control/control4.in` 与 `control/control4.ans`。\n\n此样例满足测试点 $15\\sim17$ 的限制。\n\n**【样例 5】**\n\n见选手文件中的 `control/control5.in` 与 `control/control5.ans`。\n\n此样例满足测试点 $18\\sim21$ 的限制。\n\n***\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据， $2\\le n\\le 3~000$，$1\\le k\\le \n\\min(n,1~000)$，$1\\le q\\le 5\\times10^5$，$0\\le a_i\\le 1$。\n\n\n|测试点编号|$n\\le$|$k\\le$|$q\\le$|特殊性质|\n|:--:|:--:|:--:|:--:|:--:|\n|$1\\sim3$|$80$|$50$|$2~000$|无|\n|$4\\sim6$|$400$|$300$|$1$|$k$ 是偶数|\n|$7\\sim10$|$400$|$2$|$10~000$|无|\n|$11\\sim14$|$400$|$300$|$10~000$|无|\n|$15\\sim17$|$3~000$|$10$|$5\\times10^5$|无|\n|$18\\sim21$|$3~000$|$1~000$|$5\\times10^5$|$k$ 是偶数|\n|$22\\sim25$|$3~000$|$1~000$|$5\\times10^5$|无|\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「KDOI-03」序列变换", "background": "", "description": "给定一个长度为 $n$ 的 $\\tt01$ 序列 $a$ 和 $q$ 次询问，询问参数 $k$。\n\n每次询问给定 $L,R$，其中 $1\\leq L\\leq R\\leq n$，你可以进行如下操作：\n\n+ 选择一个下标 $L<i\\le R$；\n+ 将 $a_{i-1}$ 赋值为 $a_{i-1}\\oplus a_i$，$a_{i+1}$  赋值为 $a_{i+1}\\oplus a_i$。如果 $i=n$，则不对 $a_{i+1}$ 作出改变。其中 $\\oplus$ 表示按位异或运算。\n\n求使得 $[L,R]$ 区间内**至多**有 $k$ 个 $\\tt1$ 的最小操作次数。询问之间相互独立，也就是说，每次询问后重置为初始序列。", "inputFormat": "从标准输入读入数据。\n\n第一行包含三个正整数 $n,k,q$。\n\n第二行包含 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$。\n\n接下来 $q$ 行，每行包含两个正整数 $L,R$，表示一次询问。", "outputFormat": "输出到标准输出。\n\n输出共 $q$ 行，每行包含一个整数，表示答案。", "hint": "**【样例 1 解释】**\n\n如图，用绿色代表 $\\tt0$，红色代表 $\\tt1$，初始序列如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hxw9knxu.png)\n\n对于第 $1$ 次询问，选择 $i=3$，则序列变为下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zvb2lfi8.png)\n\n对于第 $2$ 次询问，选择 $i=2$，则序列变为下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wubvxvaa.png)\n\n**【样例 2 解释】**\n\n对于第 $1$ 次询问，由于 $a_{12},a_{13},a_{14},a_{15}$ 中只有 $2$ 个 $\\tt1$，所以不需要进行任何操作。\n\n对于第 $6$ 次询问，可以依次选择 $i=\\{7,8,9,10,11,12\\}$。\n\n**【样例 3】**\n\n见选手文件中的 `control/control3.in` 与 `control/control3.ans`。\n\n此样例满足测试点 $7\\sim10$ 的限制。\n\n**【样例 4】**\n\n见选手文件中的 `control/control4.in` 与 `control/control4.ans`。\n\n此样例满足测试点 $15\\sim17$ 的限制。\n\n**【样例 5】**\n\n见选手文件中的 `control/control5.in` 与 `control/control5.ans`。\n\n此样例满足测试点 $18\\sim21$ 的限制。\n\n***\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据， $2\\le n\\le 3~000$，$1\\le k\\le \n\\min(n,1~000)$，$1\\le q\\le 5\\times10^5$，$0\\le a_i\\le 1$。\n\n\n|测试点编号|$n\\le$|$k\\le$|$q\\le$|特殊性质|\n|:--:|:--:|:--:|:--:|:--:|\n|$1\\sim3$|$80$|$50$|$2~000$|无|\n|$4\\sim6$|$400$|$300$|$1$|$k$ 是偶数|\n|$7\\sim10$|$400$|$2$|$10~000$|无|\n|$11\\sim14$|$400$|$300$|$10~000$|无|\n|$15\\sim17$|$3~000$|$10$|$5\\times10^5$|无|\n|$18\\sim21$|$3~000$|$1~000$|$5\\times10^5$|$k$ 是偶数|\n|$22\\sim25$|$3~000$|$1~000$|$5\\times10^5$|无|\n\n\n", "locale": "zh-CN"}}}
{"pid": "P8865", "type": "P", "difficulty": 4, "samples": [["1 0\n4 3 1 1\n001\n010\n000\n000", "4 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2022", "NOIP 提高组", "O2优化", "枚举", "组合数学", "前缀和"], "title": "[NOIP2022] 种花", "background": "", "description": "小 C 决定在他的花园里种出 $\\texttt{CCF}$ 字样的图案，因此他想知道 $\\texttt C$ 和 $\\texttt F$ 两个字母各自有多少种种花的方案；不幸的是，花园中有一些土坑，这些位置无法种花，因此他希望你能帮助他解决这个问题。\n\n花园可以看作有 $n\\times m$ 个位置的网格图，从上到下分别为第 $1$ 到第 $n$ 行，从左到右分别为第 $1$ 列到第 $m$ 列，其中每个位置有可能是土坑，也有可能不是，可以用 $a_{i,j} = 1$ 表示第 $i$ 行第 $j$ 列这个位置有土坑，否则用 $a_{i,j} = 0$ 表示这个位置没土坑。\n\n一种种花方案被称为 $\\texttt{C-}$ **形**的，如果存在 $x_1, x_2 \\in [1, n]$，以及 $y_0, y_1, y_2 \\in [1, m]$，满足 $x_1 + 1 < x_2$，并且 $y_0 < y_1, y_2 \\leq m$，使得第 $x_1$ **行**的第 $y_0$ 到第 $y_1$ **列**、第 $x_2$ **行**的第 $y_0$ 到第 $y_2$ **列**以及第 $y_0$ **列**的第 $x_1$ 到第 $x_2$ **行**都**不为土坑**，且只在上述这些位置上种花。\n\n一种种花方案被称为 $\\texttt{F-}$ **形**的，如果存在 $x_1, x_2, x_3 \\in [1, n]$，以及 $y_0, y_1, y_2 \\in [1, m]$，满足 $x_1 + 1 < x_2 < x_3$，并且 $y_0 < y_1, y_2 \\leq m$，使得第 $x_1$ **行**的第 $y_0$ 到第 $y_1$ **列**、第 $x_2$ **行**的第 $y_0$ 到第 $y_2$ **列**以及第 $y_0$ **列**的第 $x_1$ 到第 $x_3$ **行**都**不为土坑**，且只在上述这些位置上种花。\n\n样例一解释中给出了 $\\texttt{C-}$ 形和 $\\texttt{F-}$ 形种花方案的图案示例。\n\n现在小 C 想知道，给定 $n, m$ 以及表示每个位置是否为土坑的值 $\\{a_{i,j}\\}$，$\\texttt{C-}$ 形和 $\\texttt{F-}$ 形种花方案分别有多少种可能？由于答案可能非常之大，你只需要输出其对 $998244353$ 取模的结果即可，具体输出结果请看输出格式部分。", "inputFormat": "第一行包含两个整数 $T, id$，分别表示数据组数和测试点编号。如果数据为样例则保证 $id = 0$。\n\n接下来一共 $T$ 组数据，在每组数据中：\n\n第一行包含四个整数 $n, m, c, f$，其中 $n, m$ 分别表示花园的行数、列数，对于 $c, f$ 的含义见输出格式部分。\n\n接下来 $n$ 行，每行包含一个长度为 $m$ 且仅包含 $0$ 和 $1$ 的字符串，其中第 $i$ 个串的第 $j$ 个字符表示 $a_{i,j}$，即花园里的第 $i$ 行第 $j$ 列是不是一个土坑。", "outputFormat": "设花园中 $\\texttt{C-}$ 形和 $\\texttt{F-}$ 形的种花方案分别有 $V_C$ 和 $V_F$ 种，则你需要对每一组数据输出一行用一个空格隔开的两个非负整数，分别表示 $(c \\times V_C) \\bmod 998244353$，$(f \\times V_F ) \\bmod 998244353$ ，其中 $a \\bmod P$ 表示 $a$ 对 $P$ 取模后的结果。", "hint": "**【样例 1 解释】**\n\n四个 $\\texttt{C-}$ 形种花方案为：\n\n```plain\n**1 **1 **1 **1\n*10 *10 *10 *10\n**0 *** *00 *00\n000 000 **0 ***\n```\n\n其中 $\\texttt*$ 表示在这个位置种花。注意 $\\texttt C$ 的两横可以不一样长。\n\n类似的，两个 $\\texttt{F-}$ 形种花方案为：\n\n```plain\n**1 **1\n*10 *10\n**0 ***\n*00 *00\n```\n\n**【样例 2】**\n\n见附件下的 $\\texttt{plant/plant2.in}$ 与 $\\texttt{plant/plant2.ans}$。\n\n**【样例 3】**\n\n见附件下的 $\\texttt{plant/plant3.in}$ 与 $\\texttt{plant/plant3.ans}$。\n\n**【数据范围】**\n\n对于所有数据，保证：$1 \\leq T \\leq 5$，$1 \\leq n, m \\leq 10^3$，$0 \\leq c, f \\leq 1$，$a_{i,j} \\in \\{0, 1\\}$。\n\n| 测试点编号 | $n$ | $m$ | $c=$ | $f=$ | 特殊性质 | 测试点分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leq 1000$ | $\\leq 1000$ | $0$ | $0$ | 无 | $1$ |\n| $2$ | $=3$ | $=2$ | $1$ | $1$ | 无 | $2$ |\n| $3$ | $=4$ | $=2$ | $1$ | $1$ | 无 | $3$ |\n| $4$ | $\\leq 1000$ | $=2$ | $1$ | $1$ | 无 | $4$ |\n| $5$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $1$ | A | $4$ |\n| $6$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $1$ | B | $6$ |\n| $7$ | $\\leq 10$ | $\\leq 10$ | $1$ | $1$ | 无 | $10$ |\n| $8$ | $\\leq 20$ | $\\leq 20$ | $1$ | $1$ | 无 | $6$ |\n| $9$ | $\\leq 30$ | $\\leq 30$ | $1$ | $1$ | 无 | $6$ |\n| $10$ | $\\leq 50$ | $\\leq 50$ | $1$ | $1$ | 无 | $8$ |\n| $11$ | $\\leq 100$ | $\\leq 100$ | $1$ | $1$ | 无 | $10$ |\n| $12$ | $\\leq 200$ | $\\leq 200$ | $1$ | $1$ | 无 | $6$ |\n| $13$ | $\\leq 300$ | $\\leq 300$ | $1$ | $1$ | 无 | $6$ |\n| $14$ | $\\leq 500$ | $\\leq 500$ | $1$ | $1$ | 无 | $8$ |\n| $15$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $0$ | 无 | $6$ |\n| $16$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $1$ | 无 | $14$ |\n\n特殊性质 A：$\\forall 1 \\leq i \\leq n, 1 \\leq j \\leq \\left\\lfloor \\frac{m}{3} \\right\\rfloor$，$a_{i, 3 j} = 1$；\n\n特殊性质 B：$\\forall 1 \\leq i \\leq \\left\\lfloor \\frac{n}{4} \\right\\rfloor, 1 \\leq j \\leq m$，$a_{4 i, j} = 1$；", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP2022] Planting Flowers", "background": "", "description": "Xiao C decides to plant a pattern of the letters $\\texttt{CCF}$ in his garden, so he wants to know how many planting schemes there are for the letters $\\texttt C$ and $\\texttt F$ respectively. Unfortunately, there are some pits in the garden where flowers cannot be planted, so he hopes you can help solve this problem.\n\nThe garden can be viewed as a grid with $n \\times m$ positions, with rows numbered $1$ to $n$ from top to bottom, and columns numbered $1$ to $m$ from left to right. Each position may be a pit or not. Use $a_{i,j} = 1$ to indicate that there is a pit at row $i$, column $j$, and use $a_{i,j} = 0$ otherwise.\n\nA planting scheme is called $\\texttt{C-}$ shaped if there exist $x_1, x_2 \\in [1, n]$ and $y_0, y_1, y_2 \\in [1, m]$, satisfying $x_1 + 1 < x_2$ and $y_0 < y_1, y_2 \\leq m$, such that the segments from columns $y_0$ to $y_1$ on row $x_1$, from columns $y_0$ to $y_2$ on row $x_2$, and from rows $x_1$ to $x_2$ on column $y_0$ are all not pits, and flowers are planted only on these positions.\n\nA planting scheme is called $\\texttt{F-}$ shaped if there exist $x_1, x_2, x_3 \\in [1, n]$ and $y_0, y_1, y_2 \\in [1, m]$, satisfying $x_1 + 1 < x_2 < x_3$ and $y_0 < y_1, y_2 \\leq m$, such that the segments from columns $y_0$ to $y_1$ on row $x_1$, from columns $y_0$ to $y_2$ on row $x_2$, and from rows $x_1$ to $x_3$ on column $y_0$ are all not pits, and flowers are planted only on these positions.\n\nExamples of $\\texttt{C-}$ shaped and $\\texttt{F-}$ shaped planting schemes are shown in the explanation of Sample 1.\n\nNow Xiao C wants to know, given $n$, $m$, and the values $\\{a_{i,j}\\}$ indicating whether each position is a pit, how many possible $\\texttt{C-}$ shaped and $\\texttt{F-}$ shaped planting schemes there are, respectively. Since the answer may be very large, you only need to output the result modulo $998244353$. See the output format section for details.", "inputFormat": "The first line contains two integers $T, id$, denoting the number of test cases and the test point ID, respectively. If the input is a sample, it is guaranteed that $id = 0$.\n\nThen there are $T$ test cases. In each test case:\n\n- The first line contains four integers $n, m, c, f$, where $n$ and $m$ denote the number of rows and columns of the garden, respectively. The meanings of $c$ and $f$ are described in the output format section.\n- The next $n$ lines each contain a string of length $m$ consisting only of $0$ and $1$. The $j$-th character of the $i$-th string denotes $a_{i,j}$, i.e., whether the cell at row $i$, column $j$ in the garden is a pit.", "outputFormat": "Let the numbers of $\\texttt{C-}$ shaped and $\\texttt{F-}$ shaped planting schemes in the garden be $V_C$ and $V_F$, respectively. For each test case, output one line with two non-negative integers separated by a space, representing $(c \\times V_C) \\bmod 998244353$ and $(f \\times V_F ) \\bmod 998244353$, respectively, where $a \\bmod P$ denotes $a$ modulo $P$.", "hint": "【Explanation of Sample 1】\n\nThe four $\\texttt{C-}$ shaped planting schemes are:\n\n```plain\n**1 **1 **1 **1\n*10 *10 *10 *10\n**0 *** *00 *00\n000 000 **0 ***\n```\n\nHere $\\texttt*$ denotes planting a flower at that position. Note that the two horizontal strokes of $\\texttt C$ do not need to have the same length.\n\nSimilarly, the two $\\texttt{F-}$ shaped planting schemes are:\n\n```plain\n**1 **1\n*10 *10\n**0 ***\n*00 *00\n```\n\n【Sample 2】\n\nSee the attachments $\\texttt{plant/plant2.in}$ and $\\texttt{plant/plant2.ans}$.\n\n【Sample 3】\n\nSee the attachments $\\texttt{plant/plant3.in}$ and $\\texttt{plant/plant3.ans}$.\n\n【Constraints】\n\nFor all test cases, it is guaranteed that $1 \\leq T \\leq 5$, $1 \\leq n, m \\leq 10^3$, $0 \\leq c, f \\leq 1$, and $a_{i,j} \\in \\{0, 1\\}$.\n\n| Test point ID | $n$ | $m$ | $c=$ | $f=$ | Special property | Score |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leq 1000$ | $\\leq 1000$ | $0$ | $0$ | None | $1$ |\n| $2$ | $=3$ | $=2$ | $1$ | $1$ | None | $2$ |\n| $3$ | $=4$ | $=2$ | $1$ | $1$ | None | $3$ |\n| $4$ | $\\leq 1000$ | $=2$ | $1$ | $1$ | None | $4$ |\n| $5$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $1$ | A | $4$ |\n| $6$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $1$ | B | $6$ |\n| $7$ | $\\leq 10$ | $\\leq 10$ | $1$ | $1$ | None | $10$ |\n| $8$ | $\\leq 20$ | $\\leq 20$ | $1$ | $1$ | None | $6$ |\n| $9$ | $\\leq 30$ | $\\leq 30$ | $1$ | $1$ | None | $6$ |\n| $10$ | $\\leq 50$ | $\\leq 50$ | $1$ | $1$ | None | $8$ |\n| $11$ | $\\leq 100$ | $\\leq 100$ | $1$ | $1$ | None | $10$ |\n| $12$ | $\\leq 200$ | $\\leq 200$ | $1$ | $1$ | None | $6$ |\n| $13$ | $\\leq 300$ | $\\leq 300$ | $1$ | $1$ | None | $6$ |\n| $14$ | $\\leq 500$ | $\\leq 500$ | $1$ | $1$ | None | $8$ |\n| $15$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $0$ | None | $6$ |\n| $16$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $1$ | None | $14$ |\n\nSpecial property A: $\\forall 1 \\leq i \\leq n, 1 \\leq j \\leq \\left\\lfloor \\frac{m}{3} \\right\\rfloor$, $a_{i, 3 j} = 1$.\n\nSpecial property B: $\\forall 1 \\leq i \\leq \\left\\lfloor \\frac{n}{4} \\right\\rfloor, 1 \\leq j \\leq m$, $a_{4 i, j} = 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP2022] 种花", "background": "", "description": "小 C 决定在他的花园里种出 $\\texttt{CCF}$ 字样的图案，因此他想知道 $\\texttt C$ 和 $\\texttt F$ 两个字母各自有多少种种花的方案；不幸的是，花园中有一些土坑，这些位置无法种花，因此他希望你能帮助他解决这个问题。\n\n花园可以看作有 $n\\times m$ 个位置的网格图，从上到下分别为第 $1$ 到第 $n$ 行，从左到右分别为第 $1$ 列到第 $m$ 列，其中每个位置有可能是土坑，也有可能不是，可以用 $a_{i,j} = 1$ 表示第 $i$ 行第 $j$ 列这个位置有土坑，否则用 $a_{i,j} = 0$ 表示这个位置没土坑。\n\n一种种花方案被称为 $\\texttt{C-}$ **形**的，如果存在 $x_1, x_2 \\in [1, n]$，以及 $y_0, y_1, y_2 \\in [1, m]$，满足 $x_1 + 1 < x_2$，并且 $y_0 < y_1, y_2 \\leq m$，使得第 $x_1$ **行**的第 $y_0$ 到第 $y_1$ **列**、第 $x_2$ **行**的第 $y_0$ 到第 $y_2$ **列**以及第 $y_0$ **列**的第 $x_1$ 到第 $x_2$ **行**都**不为土坑**，且只在上述这些位置上种花。\n\n一种种花方案被称为 $\\texttt{F-}$ **形**的，如果存在 $x_1, x_2, x_3 \\in [1, n]$，以及 $y_0, y_1, y_2 \\in [1, m]$，满足 $x_1 + 1 < x_2 < x_3$，并且 $y_0 < y_1, y_2 \\leq m$，使得第 $x_1$ **行**的第 $y_0$ 到第 $y_1$ **列**、第 $x_2$ **行**的第 $y_0$ 到第 $y_2$ **列**以及第 $y_0$ **列**的第 $x_1$ 到第 $x_3$ **行**都**不为土坑**，且只在上述这些位置上种花。\n\n样例一解释中给出了 $\\texttt{C-}$ 形和 $\\texttt{F-}$ 形种花方案的图案示例。\n\n现在小 C 想知道，给定 $n, m$ 以及表示每个位置是否为土坑的值 $\\{a_{i,j}\\}$，$\\texttt{C-}$ 形和 $\\texttt{F-}$ 形种花方案分别有多少种可能？由于答案可能非常之大，你只需要输出其对 $998244353$ 取模的结果即可，具体输出结果请看输出格式部分。", "inputFormat": "第一行包含两个整数 $T, id$，分别表示数据组数和测试点编号。如果数据为样例则保证 $id = 0$。\n\n接下来一共 $T$ 组数据，在每组数据中：\n\n第一行包含四个整数 $n, m, c, f$，其中 $n, m$ 分别表示花园的行数、列数，对于 $c, f$ 的含义见输出格式部分。\n\n接下来 $n$ 行，每行包含一个长度为 $m$ 且仅包含 $0$ 和 $1$ 的字符串，其中第 $i$ 个串的第 $j$ 个字符表示 $a_{i,j}$，即花园里的第 $i$ 行第 $j$ 列是不是一个土坑。", "outputFormat": "设花园中 $\\texttt{C-}$ 形和 $\\texttt{F-}$ 形的种花方案分别有 $V_C$ 和 $V_F$ 种，则你需要对每一组数据输出一行用一个空格隔开的两个非负整数，分别表示 $(c \\times V_C) \\bmod 998244353$，$(f \\times V_F ) \\bmod 998244353$ ，其中 $a \\bmod P$ 表示 $a$ 对 $P$ 取模后的结果。", "hint": "**【样例 1 解释】**\n\n四个 $\\texttt{C-}$ 形种花方案为：\n\n```plain\n**1 **1 **1 **1\n*10 *10 *10 *10\n**0 *** *00 *00\n000 000 **0 ***\n```\n\n其中 $\\texttt*$ 表示在这个位置种花。注意 $\\texttt C$ 的两横可以不一样长。\n\n类似的，两个 $\\texttt{F-}$ 形种花方案为：\n\n```plain\n**1 **1\n*10 *10\n**0 ***\n*00 *00\n```\n\n**【样例 2】**\n\n见附件下的 $\\texttt{plant/plant2.in}$ 与 $\\texttt{plant/plant2.ans}$。\n\n**【样例 3】**\n\n见附件下的 $\\texttt{plant/plant3.in}$ 与 $\\texttt{plant/plant3.ans}$。\n\n**【数据范围】**\n\n对于所有数据，保证：$1 \\leq T \\leq 5$，$1 \\leq n, m \\leq 10^3$，$0 \\leq c, f \\leq 1$，$a_{i,j} \\in \\{0, 1\\}$。\n\n| 测试点编号 | $n$ | $m$ | $c=$ | $f=$ | 特殊性质 | 测试点分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leq 1000$ | $\\leq 1000$ | $0$ | $0$ | 无 | $1$ |\n| $2$ | $=3$ | $=2$ | $1$ | $1$ | 无 | $2$ |\n| $3$ | $=4$ | $=2$ | $1$ | $1$ | 无 | $3$ |\n| $4$ | $\\leq 1000$ | $=2$ | $1$ | $1$ | 无 | $4$ |\n| $5$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $1$ | A | $4$ |\n| $6$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $1$ | B | $6$ |\n| $7$ | $\\leq 10$ | $\\leq 10$ | $1$ | $1$ | 无 | $10$ |\n| $8$ | $\\leq 20$ | $\\leq 20$ | $1$ | $1$ | 无 | $6$ |\n| $9$ | $\\leq 30$ | $\\leq 30$ | $1$ | $1$ | 无 | $6$ |\n| $10$ | $\\leq 50$ | $\\leq 50$ | $1$ | $1$ | 无 | $8$ |\n| $11$ | $\\leq 100$ | $\\leq 100$ | $1$ | $1$ | 无 | $10$ |\n| $12$ | $\\leq 200$ | $\\leq 200$ | $1$ | $1$ | 无 | $6$ |\n| $13$ | $\\leq 300$ | $\\leq 300$ | $1$ | $1$ | 无 | $6$ |\n| $14$ | $\\leq 500$ | $\\leq 500$ | $1$ | $1$ | 无 | $8$ |\n| $15$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $0$ | 无 | $6$ |\n| $16$ | $\\leq 1000$ | $\\leq 1000$ | $1$ | $1$ | 无 | $14$ |\n\n特殊性质 A：$\\forall 1 \\leq i \\leq n, 1 \\leq j \\leq \\left\\lfloor \\frac{m}{3} \\right\\rfloor$，$a_{i, 3 j} = 1$；\n\n特殊性质 B：$\\forall 1 \\leq i \\leq \\left\\lfloor \\frac{n}{4} \\right\\rfloor, 1 \\leq j \\leq m$，$a_{4 i, j} = 1$；", "locale": "zh-CN"}}}
{"pid": "P8866", "type": "P", "difficulty": 6, "samples": [["1\n2 4 2\n1 2 1 2", "5\n1 1\n1 1\n1 2\n2 1 2\n1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2022", "NOIP 提高组", "Special Judge", "O2优化", "构造", "Ad-hoc"], "title": "[NOIP2022] 喵了个喵", "background": "", "description": "小 E 喜欢上了一款叫做《喵了个喵》的游戏。这个游戏有一个牌堆和 $n$ 个可以从栈底删除元素的栈，任务是要通过游戏规则将所有的卡牌消去。开始时牌堆中有 $m$ 张卡牌，从上到下的图案分别是 $a_1, a_2,\\dots, a_m$。所有的卡牌一共有 $k$ 种图案，从 $1$ 到 $k$ 编号。牌堆中每一种图案的卡牌都有偶数张。开始时所有的栈都是空的。这个游戏有两种操作：\n\n- 选择一个栈，将牌堆顶上的卡牌放入栈的顶部。如果这么操作后，这个栈最上方的两张牌有相同的图案，则会自动将这两张牌消去。\n- 选择两个不同的栈，如果这两个栈栈**底**的卡牌有相同的图案，则可以将这两张牌消去，原来在栈底上方的卡牌会成为新的栈底。如果不同，则什么也不会做。\n\n这个游戏一共有 $T$ 关，小 E 一直无法通关。请你帮小 E 设计一下游戏方案，即对于游戏的每一关，给出相应的操作序列使得小 E 可以把所有的卡牌消去。", "inputFormat": "第一行包含一个正整数 $T$，表示数据组数。\n\n接下来一共 $T$ 组数据，在每组数据中：\n\n第一行包含三个正整数 $n, m, k$，分别表示栈的个数、卡牌的个数、卡牌上图案的种类。\n\n第二行包含 $m$ 个正整数，分别表示 $a_1, a_2,\\dots, a_m$，分别从上到下表示牌堆中卡牌的图案。\n\n输入数据保证有解。", "outputFormat": "对于每一组数据，输出若干行。\n\n其中第一行包含一个正整数 $\\mathrm{op}$，表示操作的次数。你需要保证 $m \\leq \\mathrm{op} \\leq 2\\times m$。\n\n接下来 $\\mathrm{op}$ 行，每行包含两个或三个正整数，整数之间用一个空格隔开。\n\n若为两个整数 $\\texttt{1 s}$，则进行一次第一个操作并选择栈 $s$。\n\n若为三个整数 $\\texttt{2 s1 s2}$，则进行一次第二个操作并选择栈 $s_1$ 和 $s_2$。\n\n你需要保证 $1 \\leq s, s_1, s_2 \\leq n$，且 $s_1 \\neq s_2$。", "hint": "**【样例 1 解释】**\n\n下图是初始状态。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iidvwekz.png)\n\n下图是前两次操作之后的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hrcdl51d.png)\n\n下图是第三次和第四次操作之后的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ju6b9dep.png)\n\n下图是第五次操作之后的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/djpqtzfr.png)\n\n**【样例 2】**\n\n见选手目录下的 $\\texttt{meow/meow2.in}$ 与 $\\texttt{meow/meow2.ans}$。\n\n**【数据范围】**\n\n设 $S$ 为所有 $T$ 组数据中 $m$ 的总和。\n\n对于所有数据，保证 $S \\leq 2 \\times 10^6$，$1 \\leq n  \\leq 300$，$1 \\leq a_i \\leq k$。\n\n::cute-table{tuack}\n\n| 测试点 | $T=$ | $n$ | $k=$ | $m \\leq$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $1001$ | $\\leq 300$ | $2n-2$ | 无限制 |\n| $4\\sim 6$ | $1002$ | $=2$ | $2n-1$ | ^ |\n| $7\\sim 10$ | $3$ | $=3$ | ^ | $14$ |\n| $11\\sim 14$ | $1004$ | ^ | ^ | 无限制 |\n| $15\\sim 20$ | $1005$ | $\\leq 300$ | ^ | ^ |\n\n\n**【评分方式】**\n\n对于每一组数据，若在按顺序进行所有操作后，牌堆为空且所有的栈均为空，则认为你的答案正确。\n\n**【提示】**\n\n你可以通过 $T$ 的个位数来判断这个测试点是属于哪一类数据。\n\n你的输出不需要与样例输出一致，输出任意一个合法解即可得分。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP2022] Meow Meow", "background": "", "description": "Xiao E likes a game called \"Meow Meow.\" The game has a deck and $n$ stacks from which elements can be removed from the bottom. The task is to eliminate all cards according to the game rules. Initially, the deck contains $m$ cards whose patterns from top to bottom are $a_1, a_2, \\dots, a_m$. There are $k$ types of patterns, numbered from $1$ to $k$. Each pattern appears an even number of times in the deck. All stacks are initially empty. The game allows two operations:\n\n- Choose a stack and place the top card of the deck onto the top of that stack. After doing so, if the top two cards of this stack have the same pattern, they will be automatically removed.\n- Choose two different stacks. If the cards at the bottoms of these two stacks have the same pattern, you may remove these two cards, and the cards that were originally just above the bottoms become the new bottoms. If the patterns are different, nothing happens.\n\nThere are $T$ levels in total. Xiao E cannot clear them. Please design a plan for each level: for every level, output an operation sequence that eliminates all the cards.", "inputFormat": "The first line contains a positive integer $T$, the number of test cases.\n\nThen for each of the $T$ test cases:\n\n- The first line contains three positive integers $n, m, k$, denoting the number of stacks, the number of cards, and the number of pattern types on the cards.\n- The second line contains $m$ positive integers $a_1, a_2, \\dots, a_m$, representing the patterns of the cards in the deck from top to bottom.\n\nThe testdata guarantees that there is a solution.", "outputFormat": "For each test case, output several lines.\n\nThe first line contains a positive integer $\\mathrm{op}$, the number of operations. You must ensure $m \\leq \\mathrm{op} \\leq 2 \\times m$.\n\nThen output $\\mathrm{op}$ lines. Each line contains two or three positive integers separated by a single space.\n\n- If the line has two integers $\\texttt{1 s}$, perform the first operation on stack $s$.\n- If the line has three integers $\\texttt{2 s1 s2}$, perform the second operation on stacks $s_1$ and $s_2$.\n\nYou must ensure $1 \\leq s, s_1, s_2 \\leq n$ and $s_1 \\neq s_2$.", "hint": "- Sample 1 Explanation.\n\nThe figure below shows the initial state.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iidvwekz.png)\n\nThe figure below shows the state after the first two operations.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hrcdl51d.png)\n\nThe figure below shows the state after the third and fourth operations.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ju6b9dep.png)\n\nThe figure below shows the state after the fifth operation.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/djpqtzfr.png)\n\n- Sample 2.\n\nSee the files $\\texttt{meow/meow2.in}$ and $\\texttt{meow/meow2.ans}$ in the contestants' directory.\n\n- Constraints.\n\nLet $S$ be the sum of $m$ over all $T$ test cases.\n\nFor all testdata, it is guaranteed that $S \\leq 2 \\times 10^6$, $1 \\leq n \\leq 300$, and $1 \\leq a_i \\leq k$.\n\n::cute-table{tuack}\n| Test Point | $T=$ | $n$ | $k=$ | $m \\leq$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $1001$ | $\\leq 300$ | $2n-2$ | No limit |\n| $4\\sim 6$ | $1002$ | $=2$ | $2n-1$ | ^ |\n| $7\\sim 10$ | $3$ | $=3$ | ^ | $14$ |\n| $11\\sim 14$ | $1004$ | ^ | ^ | No limit |\n| $15\\sim 20$ | $1005$ | $\\leq 300$ | ^ | ^ |\n::cute-table{tuack}\n\n- Scoring.\n\nFor each test case, your answer is considered correct if, after performing all operations in order, the deck is empty and all stacks are empty.\n\n- Additional Hint.\n\nYou can determine which category a test point belongs to by the ones digit of $T$. Your output does not need to match the sample output; any valid solution earns points.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP2022] 喵了个喵", "background": "", "description": "小 E 喜欢上了一款叫做《喵了个喵》的游戏。这个游戏有一个牌堆和 $n$ 个可以从栈底删除元素的栈，任务是要通过游戏规则将所有的卡牌消去。开始时牌堆中有 $m$ 张卡牌，从上到下的图案分别是 $a_1, a_2,\\dots, a_m$。所有的卡牌一共有 $k$ 种图案，从 $1$ 到 $k$ 编号。牌堆中每一种图案的卡牌都有偶数张。开始时所有的栈都是空的。这个游戏有两种操作：\n\n- 选择一个栈，将牌堆顶上的卡牌放入栈的顶部。如果这么操作后，这个栈最上方的两张牌有相同的图案，则会自动将这两张牌消去。\n- 选择两个不同的栈，如果这两个栈栈**底**的卡牌有相同的图案，则可以将这两张牌消去，原来在栈底上方的卡牌会成为新的栈底。如果不同，则什么也不会做。\n\n这个游戏一共有 $T$ 关，小 E 一直无法通关。请你帮小 E 设计一下游戏方案，即对于游戏的每一关，给出相应的操作序列使得小 E 可以把所有的卡牌消去。", "inputFormat": "第一行包含一个正整数 $T$，表示数据组数。\n\n接下来一共 $T$ 组数据，在每组数据中：\n\n第一行包含三个正整数 $n, m, k$，分别表示栈的个数、卡牌的个数、卡牌上图案的种类。\n\n第二行包含 $m$ 个正整数，分别表示 $a_1, a_2,\\dots, a_m$，分别从上到下表示牌堆中卡牌的图案。\n\n输入数据保证有解。", "outputFormat": "对于每一组数据，输出若干行。\n\n其中第一行包含一个正整数 $\\mathrm{op}$，表示操作的次数。你需要保证 $m \\leq \\mathrm{op} \\leq 2\\times m$。\n\n接下来 $\\mathrm{op}$ 行，每行包含两个或三个正整数，整数之间用一个空格隔开。\n\n若为两个整数 $\\texttt{1 s}$，则进行一次第一个操作并选择栈 $s$。\n\n若为三个整数 $\\texttt{2 s1 s2}$，则进行一次第二个操作并选择栈 $s_1$ 和 $s_2$。\n\n你需要保证 $1 \\leq s, s_1, s_2 \\leq n$，且 $s_1 \\neq s_2$。", "hint": "**【样例 1 解释】**\n\n下图是初始状态。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iidvwekz.png)\n\n下图是前两次操作之后的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hrcdl51d.png)\n\n下图是第三次和第四次操作之后的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ju6b9dep.png)\n\n下图是第五次操作之后的结果。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/djpqtzfr.png)\n\n**【样例 2】**\n\n见选手目录下的 $\\texttt{meow/meow2.in}$ 与 $\\texttt{meow/meow2.ans}$。\n\n**【数据范围】**\n\n设 $S$ 为所有 $T$ 组数据中 $m$ 的总和。\n\n对于所有数据，保证 $S \\leq 2 \\times 10^6$，$1 \\leq n  \\leq 300$，$1 \\leq a_i \\leq k$。\n\n::cute-table{tuack}\n\n| 测试点 | $T=$ | $n$ | $k=$ | $m \\leq$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $1001$ | $\\leq 300$ | $2n-2$ | 无限制 |\n| $4\\sim 6$ | $1002$ | $=2$ | $2n-1$ | ^ |\n| $7\\sim 10$ | $3$ | $=3$ | ^ | $14$ |\n| $11\\sim 14$ | $1004$ | ^ | ^ | 无限制 |\n| $15\\sim 20$ | $1005$ | $\\leq 300$ | ^ | ^ |\n\n\n**【评分方式】**\n\n对于每一组数据，若在按顺序进行所有操作后，牌堆为空且所有的栈均为空，则认为你的答案正确。\n\n**【提示】**\n\n你可以通过 $T$ 的个位数来判断这个测试点是属于哪一类数据。\n\n你的输出不需要与样例输出一致，输出任意一个合法解即可得分。", "locale": "zh-CN"}}}
{"pid": "P8867", "type": "P", "difficulty": 6, "samples": [["2 1\n1 2", "5"], ["4 4\n1 2\n2 3\n3 1\n1 4", "184"], ["见附加文件里的 barrack/barrack3.in", "见附加文件里的 barrack/barrack3.ans"], ["见附加文件里的 barrack/barrack4.in", "见附加文件里的 barrack/barrack4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "NOIP 提高组", "O2优化", "树形 DP", "Tarjan", "双连通分量", "容斥原理"], "title": "[NOIP2022] 建造军营", "background": "", "description": "A 国与 B 国正在激烈交战中，A 国打算在自己的国土上建造一些军营。\n\nA 国的国土由 $n$ 座城市组成，$m$ 条双向道路连接这些城市，使得**任意两座城市均可通过道路直接或间接到达**。A 国打算选择一座或多座城市（**至少一座**），并在这些城市上各建造一座军营。\n\n众所周知，军营之间的联络是十分重要的。然而此时 A 国接到情报，B 国将会于不久后袭击 A 国的一条道路，但具体的袭击目标却无从得知。如果 B 国袭击成功，这条道路将被切断，可能会造成 A 国某两个军营无法互相到达，这是 A 国极力避免的。因此 A 国决定派兵看守若干条道路（**可以是一条或多条，也可以一条也不看守**），A 国有信心保证被派兵看守的道路能够抵御 B 国的袭击而不被切断。\n\nA 国希望制定一个建造军营和看守道路的方案，使得 B 国袭击的无论是 A 国的哪条道路，都不会造成某两座军营无法互相到达。现在，请你帮 A 国计算一下可能的建造军营和看守道路的方案数共有多少。由于方案数可能会很多，你只需要输出其对 $1,000,000,007\\left(10^{9}+7\\right)$ 取模的值即可。两个方案被认为是不同的，当且仅当存在至少一座城市在一个方案中建造了军营而在另一个方案中没有，或者存在至少一条道路在一个方案中被派兵看守而在另一个方案中没有。", "inputFormat": "第一行包含两个正整数 $n,m$，分别表示城市的个数和双向道路的数量。\n\n接下来 $m$ 行，每行包含两个正整数 $u_{i},v_{i}$，描述一条连接 $u_{i}$ 和 $v_{i}$ 的双向道路。保证没有重边和自环。", "outputFormat": "输出一行包含一个整数，表示建造军营和看守道路的方案数对 $1,000,000,007\\left(10^{9}+ 7\\right)$ 取模的结果。", "hint": "### 样例 1 解释\n\n样例中，A 国共有两座城市，有 $1$ 条道路连接他们。\n\n所有可能的方案如下：\n\n- 在城市 $1$ 建军营，不看守这条道路；\n- 在城市 $1$ 建军营，看守这条道路；\n- 在城市 $2$ 建军营，不看守这条道路；\n- 在城市 $2$ 建军营，看守这条道路；\n- 在城市 $1,2$ 建军营，看守这条道路。\n\n### 数据规模与约定\n\n对于所有数据，保证 $1 \\leq n \\leq 5 \\times 10^5$，$n - 1 \\leq m \\leq 10^6$，$1 \\leq u_i, v_i \\leq n$，$u_i \\neq v_i$。\n\n::cute-table{tuack}\n\n|测试点编号 | $n \\leq $ | $m \\leq $| 特殊条件 |\n| :-: | :-: | :-: | :-: |\n| $1 \\sim 3$ | $8$ | $10$ | 无 |\n| $4 \\sim 7$ | $16$ | $25$ | ^ |\n| $8 \\sim 9$ | $3000$ | $5000$ | ^ |\n| $10 \\sim 11$ | $5 \\times 10^5$ | $10^6$ | 特殊性质 $\\mathrm{A}$ |\n| $12 \\sim 14$ | ^ | ^ | $m = n - 1$ |\n| $15 \\sim 16$ | ^ | ^ | $m = n$ |\n| $17 \\sim 20$ | ^ | ^ | 无 |\n\n特殊性质 $\\mathrm{A}$：保证 $m=n-1$ 且第 $i$ 条道路连接城市 $i$ 与 $i+1$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP2022] Building Military Camps", "background": "", "description": "Countries A and B are at war, and country A plans to build some military camps on its own territory.\n\nCountry A’s territory consists of $n$ cities, connected by $m$ bidirectional roads, such that any two cities are directly or indirectly reachable through the roads. Country A will choose one or more cities (at least one) and build exactly one military camp in each chosen city.\n\nIt is well known that communication between camps is crucial. However, country A has received intelligence that country B will soon attack one of A’s roads, but the exact target is unknown. If B’s attack succeeds, that road will be cut, which may cause some two camps in A to be unable to reach each other, something A is keen to avoid. Therefore, A decides to station troops to guard some roads (it could be one or more, or possibly none). Country A is confident that any guarded road can withstand B’s attack and will not be cut.\n\nCountry A wants to design a plan for building camps and guarding roads such that, no matter which road in A is attacked by B, it will not cause any two camps to be unable to reach each other. Please help country A calculate how many possible plans there are for building camps and guarding roads. Since the number of plans may be large, output the value modulo $1,000,000,007\\left(10^{9}+7\\right)$. Two plans are considered different if and only if there exists at least one city that has a camp in one plan but not in the other, or there exists at least one road that is guarded in one plan but not in the other.", "inputFormat": "The first line contains two positive integers $n, m$, denoting the number of cities and the number of bidirectional roads, respectively.\n\nThe next $m$ lines each contain two positive integers $u_i, v_i$, describing a bidirectional road connecting $u_i$ and $v_i$. There are no multiple edges or self-loops.", "outputFormat": "Output one line containing an integer, the number of valid plans for building camps and guarding roads, modulo $1,000,000,007\\left(10^{9}+ 7\\right)$.", "hint": "### Sample 1 Explanation\n\nIn the sample, country A has two cities, with $1$ road connecting them.\n\nAll possible plans are as follows:\n- Build a camp in city $1$, do not guard the road.\n- Build a camp in city $1$, guard the road.\n- Build a camp in city $2$, do not guard the road.\n- Build a camp in city $2$, guard the road.\n- Build camps in cities $1, 2$, guard the road.\n\n### Constraints\n\nFor all testdata, it is guaranteed that $1 \\leq n \\leq 5 \\times 10^5$, $n - 1 \\leq m \\leq 10^6$, $1 \\leq u_i, v_i \\leq n$, $u_i \\neq v_i$.\n\n| Test point ID | $n \\leq$ | $m \\leq$ | Special condition |\n| :-: | :-: | :-: | :-: |\n| $1 \\sim 3$ | $8$ | $10$ | None |\n| $4 \\sim 7$ | $16$ | $25$ | ^ |\n| $8 \\sim 9$ | $3000$ | $5000$ | ^ |\n| $10 \\sim 11$ | $5 \\times 10^5$ | $10^6$ | Special property $\\mathrm{A}$ |\n| $12 \\sim 14$ | ^ | ^ | $m = n - 1$ |\n| $15 \\sim 16$ | ^ | ^ | $m = n$ |\n| $17 \\sim 20$ | ^ | ^ | None |\n\nSpecial property $\\mathrm{A}$: guarantee $m = n - 1$ and the $i$-th road connects city $i$ and $i + 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP2022] 建造军营", "background": "", "description": "A 国与 B 国正在激烈交战中，A 国打算在自己的国土上建造一些军营。\n\nA 国的国土由 $n$ 座城市组成，$m$ 条双向道路连接这些城市，使得**任意两座城市均可通过道路直接或间接到达**。A 国打算选择一座或多座城市（**至少一座**），并在这些城市上各建造一座军营。\n\n众所周知，军营之间的联络是十分重要的。然而此时 A 国接到情报，B 国将会于不久后袭击 A 国的一条道路，但具体的袭击目标却无从得知。如果 B 国袭击成功，这条道路将被切断，可能会造成 A 国某两个军营无法互相到达，这是 A 国极力避免的。因此 A 国决定派兵看守若干条道路（**可以是一条或多条，也可以一条也不看守**），A 国有信心保证被派兵看守的道路能够抵御 B 国的袭击而不被切断。\n\nA 国希望制定一个建造军营和看守道路的方案，使得 B 国袭击的无论是 A 国的哪条道路，都不会造成某两座军营无法互相到达。现在，请你帮 A 国计算一下可能的建造军营和看守道路的方案数共有多少。由于方案数可能会很多，你只需要输出其对 $1,000,000,007\\left(10^{9}+7\\right)$ 取模的值即可。两个方案被认为是不同的，当且仅当存在至少一座城市在一个方案中建造了军营而在另一个方案中没有，或者存在至少一条道路在一个方案中被派兵看守而在另一个方案中没有。", "inputFormat": "第一行包含两个正整数 $n,m$，分别表示城市的个数和双向道路的数量。\n\n接下来 $m$ 行，每行包含两个正整数 $u_{i},v_{i}$，描述一条连接 $u_{i}$ 和 $v_{i}$ 的双向道路。保证没有重边和自环。", "outputFormat": "输出一行包含一个整数，表示建造军营和看守道路的方案数对 $1,000,000,007\\left(10^{9}+ 7\\right)$ 取模的结果。", "hint": "### 样例 1 解释\n\n样例中，A 国共有两座城市，有 $1$ 条道路连接他们。\n\n所有可能的方案如下：\n\n- 在城市 $1$ 建军营，不看守这条道路；\n- 在城市 $1$ 建军营，看守这条道路；\n- 在城市 $2$ 建军营，不看守这条道路；\n- 在城市 $2$ 建军营，看守这条道路；\n- 在城市 $1,2$ 建军营，看守这条道路。\n\n### 数据规模与约定\n\n对于所有数据，保证 $1 \\leq n \\leq 5 \\times 10^5$，$n - 1 \\leq m \\leq 10^6$，$1 \\leq u_i, v_i \\leq n$，$u_i \\neq v_i$。\n\n::cute-table{tuack}\n\n|测试点编号 | $n \\leq $ | $m \\leq $| 特殊条件 |\n| :-: | :-: | :-: | :-: |\n| $1 \\sim 3$ | $8$ | $10$ | 无 |\n| $4 \\sim 7$ | $16$ | $25$ | ^ |\n| $8 \\sim 9$ | $3000$ | $5000$ | ^ |\n| $10 \\sim 11$ | $5 \\times 10^5$ | $10^6$ | 特殊性质 $\\mathrm{A}$ |\n| $12 \\sim 14$ | ^ | ^ | $m = n - 1$ |\n| $15 \\sim 16$ | ^ | ^ | $m = n$ |\n| $17 \\sim 20$ | ^ | ^ | 无 |\n\n特殊性质 $\\mathrm{A}$：保证 $m=n-1$ 且第 $i$ 条道路连接城市 $i$ 与 $i+1$。", "locale": "zh-CN"}}}
