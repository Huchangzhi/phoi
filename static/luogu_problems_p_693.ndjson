{"pid": "P15046", "type": "P", "difficulty": 2, "samples": [["1", "0"], ["2", "1"], ["10", "3"], ["10000", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "数学", "2022", "进制", "UOI（乌克兰）"], "title": "[UOI 2022 II Stage] 魔法鞋", "background": "", "description": "哥萨克胡子的朋友们收到了那封秘密信件。原来，里面有一张古代魔法鞋的设计图。这种魔法鞋能让穿上它的人加速到惊人的速度。穿着这双鞋的人初始速度为每秒 $1$ 米。\n\n如果穿着魔法鞋的人当前速度为每秒 $a$ 米，那么她可以施展以下两种咒语之一：\n\n-   将自身速度增加 $a$ 米每秒。\n-   将自身速度增加 $a+1$ 米每秒。\n\n穿着魔法鞋的人需要至少念动多少次咒语，才能将速度精确提升到每秒 $k$ 米？", "inputFormat": "第一行包含一个整数 $k$ ($1 \\leq k \\leq 10^{18}$) —— 需要达到的目标速度。保证可以在有限步数内加速到给定的速度。", "outputFormat": "输出一个数字 —— 为达到给定速度所需的最少咒语念动次数。\n", "hint": "第一个样例中，初始速度已经等于 $1$，因此可以不使用咒语。\n\n第二个样例中，可以使用第一种咒语，这样速度将增加 $1$ 米每秒，正好变为 $2$ 米每秒。\n\n第三个样例中，可以连续使用第一种、第二种、第一种咒语。速度将按如下方式变化：$1 \\rightarrow 2 \\rightarrow 5 \\rightarrow 10$。可以证明，达到此速度所需的咒语次数不能更少。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2022 II Stage] 魔法鞋", "background": "", "description": "哥萨克胡子的朋友们收到了那封秘密信件。原来，里面有一张古代魔法鞋的设计图。这种魔法鞋能让穿上它的人加速到惊人的速度。穿着这双鞋的人初始速度为每秒 $1$ 米。\n\n如果穿着魔法鞋的人当前速度为每秒 $a$ 米，那么她可以施展以下两种咒语之一：\n\n-   将自身速度增加 $a$ 米每秒。\n-   将自身速度增加 $a+1$ 米每秒。\n\n穿着魔法鞋的人需要至少念动多少次咒语，才能将速度精确提升到每秒 $k$ 米？", "inputFormat": "第一行包含一个整数 $k$ ($1 \\leq k \\leq 10^{18}$) —— 需要达到的目标速度。保证可以在有限步数内加速到给定的速度。", "outputFormat": "输出一个数字 —— 为达到给定速度所需的最少咒语念动次数。\n", "hint": "第一个样例中，初始速度已经等于 $1$，因此可以不使用咒语。\n\n第二个样例中，可以使用第一种咒语，这样速度将增加 $1$ 米每秒，正好变为 $2$ 米每秒。\n\n第三个样例中，可以连续使用第一种、第二种、第一种咒语。速度将按如下方式变化：$1 \\rightarrow 2 \\rightarrow 5 \\rightarrow 10$。可以证明，达到此速度所需的咒语次数不能更少。", "locale": "zh-CN"}}}
{"pid": "P15047", "type": "P", "difficulty": 6, "samples": [["5 3 0\n1 2 3 2 1\n", "2 2\n2 1 \n3\n1 2"], ["8 3 0\n1 1 1 1 2 2 2 3", "5 2\n1 2 1 2 1\n3\n2 1"], ["7 3 0\n1 1 1 1 1 2 3", "-1"], ["9 2 0\n1 1 1 1 1 2 2 2 2", "5 3\n1 2 1 2 1 \n2\n1 2 1"], ["6 6 0\n1 2 3 4 5 6", "3 2\n6 2 5 \n1\n4 3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2022", "Special Judge", "构造", "UOI（乌克兰）"], "title": "[UOI 2022 II Stage] 铁路", "background": null, "description": "哥萨克胡子来到铁路上，准备去测试魔法鞋，却发现整条铁路线上都有照明问题。铁路呈一个大“8”字形，火车在其上行驶。两条线路相交的地方称为交叉点。\n\n:::align{center}\n![](https://s2.loli.net/2026/01/29/ytsqnJuPpTAGHeI.png)\n:::\n\n哥萨克胡子想解决照明问题。为此，他购买了 $n$ 盏路灯，每盏灯的颜色为 $1$ 到 $k$ 中的一种。保证至少购买了每种颜色的一盏灯。当满足以下条件时，照明问题将被解决：\n\n-   沿铁路线放置 $n$ 盏路灯。\n-   其中一盏路灯位于交叉点上。\n-   如果两盏路灯相邻（即它们位于同一条支线上，且它们之间没有其他路灯），则它们的颜色必须不同。\n-   在铁路的上支路和下支路上（不包括交叉点）均至少有 $2$ 盏路灯。\n\n请帮助哥萨克胡子找到任意一种解决照明问题的方法，或者指出该方法不存在。", "inputFormat": "第一行包含三个整数 $n$、$k$ 和 $g$ ($5 \\leq n \\leq 2 \\cdot 10^5$, $1 \\leq k \\leq 2 \\cdot 10^5$, $0 \\leq g \\leq 8$) —— 分别表示路灯的数量、颜色的数量以及子任务编号。\n\n下一行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$ ($1 \\leq a_i \\leq k$) —— 路灯的颜色。\n\n保证从 $1$ 到 $k$ 的每个数字都在该数组中至少出现一次。", "outputFormat": "如果无解，则输出 $-1$。\n\n否则，在第一行输出两个数字 $x$ 和 $y$ ($2 \\leq x, y < n$, $1 + x + y = n$) —— 分别表示上支路和下支路上（不包括交叉点）的路灯数量。\n\n在第二行输出 $x$ 个数字 $b_1, b_2, \\dots, b_x$ ($1 \\leq b_i \\leq k$) —— 上支路上路灯的颜色，按顺时针方向从交叉点后的第一个路灯开始排序。\n\n在第三行输出一个数字 $c$ ($1 \\leq c \\leq k$) —— 位于交叉点的路灯颜色。\n\n在第四行输出 $y$ 个数字 $d_1, d_2, \\dots, d_y$ ($1 \\leq d_i \\leq k$) —— 下支路上路灯的颜色，按顺时针方向从交叉点后的第一个路灯开始排序。\n\n如果存在多个答案，可以输出任意一个。", "hint": "### 样例说明\n\n请注意，位于交叉点的路灯同时属于两条支路。\n\n在第一个样例中，我们可以将颜色为 $1$ 和 $2$ 的两盏路灯放在上支路，将颜色为 $1$ 和 $2$ 的两盏路灯放在下支路，并将一盏颜色为 $3$ 的路灯放在交叉点。这样，每两盏相邻的路灯颜色都不同。\n\n第二个样例对应于上图。\n\n在第三个样例中，哥萨克胡子将无法解决照明问题，因为无论怎样放置，总会找到两盏相邻的颜色为 $1$ 的路灯。\n\n### 评分细则\n\n-   （8 分）： $n \\leq 8$。\n-   （20 分）： $n$ 为偶数，有一种颜色恰好出现 $\\frac{n}{2}$ 次，且 $n \\leq 1000$。\n-   （5 分）： $n = k$, $n \\leq 1000$。\n-   （8 分）： $n \\leq 18$; $k = 2$。\n-   （10 分）： $k = 2$, $n \\leq 1000$。\n-   （14 分）： $k \\neq 2$, $n \\leq 1000$。\n-   （20 分）： $n \\leq 1000$。\n-   （15 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2022 II Stage] 铁路", "background": null, "description": "哥萨克胡子来到铁路上，准备去测试魔法鞋，却发现整条铁路线上都有照明问题。铁路呈一个大“8”字形，火车在其上行驶。两条线路相交的地方称为交叉点。\n\n:::align{center}\n![](https://s2.loli.net/2026/01/29/ytsqnJuPpTAGHeI.png)\n:::\n\n哥萨克胡子想解决照明问题。为此，他购买了 $n$ 盏路灯，每盏灯的颜色为 $1$ 到 $k$ 中的一种。保证至少购买了每种颜色的一盏灯。当满足以下条件时，照明问题将被解决：\n\n-   沿铁路线放置 $n$ 盏路灯。\n-   其中一盏路灯位于交叉点上。\n-   如果两盏路灯相邻（即它们位于同一条支线上，且它们之间没有其他路灯），则它们的颜色必须不同。\n-   在铁路的上支路和下支路上（不包括交叉点）均至少有 $2$ 盏路灯。\n\n请帮助哥萨克胡子找到任意一种解决照明问题的方法，或者指出该方法不存在。", "inputFormat": "第一行包含三个整数 $n$、$k$ 和 $g$ ($5 \\leq n \\leq 2 \\cdot 10^5$, $1 \\leq k \\leq 2 \\cdot 10^5$, $0 \\leq g \\leq 8$) —— 分别表示路灯的数量、颜色的数量以及子任务编号。\n\n下一行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$ ($1 \\leq a_i \\leq k$) —— 路灯的颜色。\n\n保证从 $1$ 到 $k$ 的每个数字都在该数组中至少出现一次。", "outputFormat": "如果无解，则输出 $-1$。\n\n否则，在第一行输出两个数字 $x$ 和 $y$ ($2 \\leq x, y < n$, $1 + x + y = n$) —— 分别表示上支路和下支路上（不包括交叉点）的路灯数量。\n\n在第二行输出 $x$ 个数字 $b_1, b_2, \\dots, b_x$ ($1 \\leq b_i \\leq k$) —— 上支路上路灯的颜色，按顺时针方向从交叉点后的第一个路灯开始排序。\n\n在第三行输出一个数字 $c$ ($1 \\leq c \\leq k$) —— 位于交叉点的路灯颜色。\n\n在第四行输出 $y$ 个数字 $d_1, d_2, \\dots, d_y$ ($1 \\leq d_i \\leq k$) —— 下支路上路灯的颜色，按顺时针方向从交叉点后的第一个路灯开始排序。\n\n如果存在多个答案，可以输出任意一个。", "hint": "### 样例说明\n\n请注意，位于交叉点的路灯同时属于两条支路。\n\n在第一个样例中，我们可以将颜色为 $1$ 和 $2$ 的两盏路灯放在上支路，将颜色为 $1$ 和 $2$ 的两盏路灯放在下支路，并将一盏颜色为 $3$ 的路灯放在交叉点。这样，每两盏相邻的路灯颜色都不同。\n\n第二个样例对应于上图。\n\n在第三个样例中，哥萨克胡子将无法解决照明问题，因为无论怎样放置，总会找到两盏相邻的颜色为 $1$ 的路灯。\n\n### 评分细则\n\n-   （8 分）： $n \\leq 8$。\n-   （20 分）： $n$ 为偶数，有一种颜色恰好出现 $\\frac{n}{2}$ 次，且 $n \\leq 1000$。\n-   （5 分）： $n = k$, $n \\leq 1000$。\n-   （8 分）： $n \\leq 18$; $k = 2$。\n-   （10 分）： $k = 2$, $n \\leq 1000$。\n-   （14 分）： $k \\neq 2$, $n \\leq 1000$。\n-   （20 分）： $n \\leq 1000$。\n-   （15 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15048", "type": "P", "difficulty": 5, "samples": [["3 5 0\n1 2 3\n1 3 2\n3 5 1 2 0", "1 0 1 1 1"], ["4 4 0\n1 3 10\n2 1 15\n1 4 50\n75 50 72 19", "0 1 1 1"], ["5 8 0\n1 4 5\n2 1 18\n1 3 9\n3 5 27\n5 15 7 19 20 58 35 27", "2 2 2 2 2 1 1 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "2022", "背包 DP", "树形 DP", "UOI（乌克兰）"], "title": "[UOI 2022 II Stage] 树 2", "background": "", "description": "哥萨克胡子在从铁路回家的路上看到一棵树，并由此想出了一道题。\n\n给定一棵包含 $n$ 个顶点的树，每条边都有一定的权重。初始时，所有顶点都是白色的。我们称一条边为 **亮边**，如果它连接两个白色顶点。请回答 $m$ 个查询：\n\n-   需要将最少多少个顶点重新涂成黑色，才能使所有 **亮边** 的权重之和不超过 $k_i$？\n\n请帮助哥萨克胡子解决这个问题。", "inputFormat": "第一行包含三个整数 $n$、$m$ 和 $g$ ($1 \\leq n \\leq 3\\,000$, $1 \\leq m \\leq 2 \\cdot 10^5$, $0 \\leq g \\leq 6$) —— 分别表示顶点数量、查询数量以及子任务编号。\n\n接下来的 $n-1$ 行，每行包含三个整数 $u_i$、$v_i$、$c_i$ ($1 \\leq v_i, u_i \\leq n$, $1 \\leq c_i \\leq 10^5$) —— 表示边连接的顶点及其权重。\n\n第四行包含 $m$ 个整数 $k_1, k_2, \\dots, k_m$ ($0 \\leq k_i \\leq 10^9$)。", "outputFormat": "输出 $m$ 个整数 $x_1, x_2, \\dots, x_m$，其中 $x_i$ 是对第 $i$ 个查询的答案。\n", "hint": "### 样例说明\n\n在第一个样例中，如果 $k_i \\geq 5$，我们可以保留所有顶点为白色，那么所有边都是 **亮边**，其权重之和为 $5$。对于 $k_i \\leq 4$，我们可以将顶点 $1$ 涂成黑色，那么就没有 **亮边** 了，因此权重之和为 $0$。在这两种情况下，**亮边** 的权重之和都不超过 $k_i$，并且我们重新涂色的顶点数量是最少的。\n\n### 评分细则\n\n-   （5 分）： $m=1$；保证答案不超过 $1$。\n-   （9 分）： $m=1$；保证答案不超过 $2$。\n-   （28 分）： $u_i = v_i - 1$；$n \\leq 200$。\n-   （14 分）： $m=1$；$n \\leq 10$；\n-   （21 分）： $n \\leq 200$；\n-   （23 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2022 II Stage] 树 2", "background": "", "description": "哥萨克胡子在从铁路回家的路上看到一棵树，并由此想出了一道题。\n\n给定一棵包含 $n$ 个顶点的树，每条边都有一定的权重。初始时，所有顶点都是白色的。我们称一条边为 **亮边**，如果它连接两个白色顶点。请回答 $m$ 个查询：\n\n-   需要将最少多少个顶点重新涂成黑色，才能使所有 **亮边** 的权重之和不超过 $k_i$？\n\n请帮助哥萨克胡子解决这个问题。", "inputFormat": "第一行包含三个整数 $n$、$m$ 和 $g$ ($1 \\leq n \\leq 3\\,000$, $1 \\leq m \\leq 2 \\cdot 10^5$, $0 \\leq g \\leq 6$) —— 分别表示顶点数量、查询数量以及子任务编号。\n\n接下来的 $n-1$ 行，每行包含三个整数 $u_i$、$v_i$、$c_i$ ($1 \\leq v_i, u_i \\leq n$, $1 \\leq c_i \\leq 10^5$) —— 表示边连接的顶点及其权重。\n\n第四行包含 $m$ 个整数 $k_1, k_2, \\dots, k_m$ ($0 \\leq k_i \\leq 10^9$)。", "outputFormat": "输出 $m$ 个整数 $x_1, x_2, \\dots, x_m$，其中 $x_i$ 是对第 $i$ 个查询的答案。\n", "hint": "### 样例说明\n\n在第一个样例中，如果 $k_i \\geq 5$，我们可以保留所有顶点为白色，那么所有边都是 **亮边**，其权重之和为 $5$。对于 $k_i \\leq 4$，我们可以将顶点 $1$ 涂成黑色，那么就没有 **亮边** 了，因此权重之和为 $0$。在这两种情况下，**亮边** 的权重之和都不超过 $k_i$，并且我们重新涂色的顶点数量是最少的。\n\n### 评分细则\n\n-   （5 分）： $m=1$；保证答案不超过 $1$。\n-   （9 分）： $m=1$；保证答案不超过 $2$。\n-   （28 分）： $u_i = v_i - 1$；$n \\leq 200$。\n-   （14 分）： $m=1$；$n \\leq 10$；\n-   （21 分）： $n \\leq 200$；\n-   （23 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15049", "type": "P", "difficulty": 6, "samples": [["10 12 0\n1 1 1\n2 1 2\n2 1 6\n2 9 10\n2 3 10\n2 10 6\n1 1 5\n1 1 3\n3 5\n1 1 3\n3 0\n1 1 3", "1\n9\n3\n6\n-1"], ["10 17 0\n2 1 2\n1 2 2\n2 3 4\n1 3 2\n2 6 7\n2 7 8\n1 7 2\n1 7 3\n2 5 6\n1 5 5\n1 5 4\n2 5 4\n2 3 2\n1 1 7\n1 1 4\n1 1 8\n1 1 9", "2\n4\n7\n8\n-1\n8\n7\n4\n8\n-1"], ["6 14 0\n2 1 6\n2 1 3\n1 3 2\n1 3 3\n1 1 1\n1 2 1\n1 2 6\n2 1 2\n2 2 2\n2 2 1\n2 1 5\n2 1 4\n1 6 6\n1 1 5", "3\n6\n1\n2\n-1\n6\n5"], ["5 5 0\n2 1 2\n1 1 2\n3 0\n2 1 3\n1 1 2", "2\n3"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["并查集", "2022", "分块", "UOI（乌克兰）"], "title": "[UOI 2022 II Stage] 图 2", "background": "双倍经验：<https://www.luogu.com.cn/problem/P5064>", "description": "给定一个包含 $n$ 个顶点的图。同时给出 $q$ 个三种类型的查询：\n\n-   在顶点 $v_i$ 所在的连通分量中，需要找到编号第 $k_i$ 小的顶点编号。如果不存在，则返回 $-1$。顶点 $v_i$ 所在的连通分量是指所有可以通过边从顶点 $v_i$ 到达的顶点集合。\n-   向图中添加一条连接顶点 $u_i$ 和 $v_i$ 的边。\n-   返回到执行完第 $x_i$ 次操作后的状态。\n\n请找出所有第一类查询的答案。", "inputFormat": "第一行包含三个整数 $n$、$q$、$g$ ($1 \\leq n, q \\leq 5 \\cdot 10^5$, $0 \\leq g \\leq 9$)。\n\n接下来的每一行描述一个查询：\n\n-   第一类查询：$v_i$、$k_i$ ($1 \\leq v_i, k_i \\leq n$)。\n-   第二类查询：$v_i$、$u_i$ ($1 \\leq v_i, u_i \\leq n$)。\n-   第三类查询：$x_i$ ($0 \\leq x_i < i$)。", "outputFormat": "对于每个第一类查询，输出该查询的答案。", "hint": "### 评分细则\n\n-   （6 分）： $n, q \\leq 100$；没有第二类和第三类操作。\n-   （7 分）： $n, q \\leq 100$；没有第三类操作。\n-   （4 分）： $n, q \\leq 100$。\n-   （9 分）： $n, q \\leq 3 \\cdot 10^5$；保证在第二类操作中 $|v_i - u_i| = 1$；没有第三类查询。\n-   （8 分）： $n, q \\leq 3 \\cdot 10^5$，没有第三类查询。\n-   （10 分）： $n, q \\leq 3 \\cdot 10^5$；保证在第二类操作中 $|v_i - u_i| = 1$。\n-   （19 分）： $n, q \\leq 10^5$。\n-   （17 分）： $n, q \\leq 3 \\cdot 10^5$。\n-   （20 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UOI 2022 II Stage] 图 2", "background": "双倍经验：<https://www.luogu.com.cn/problem/P5064>", "description": "给定一个包含 $n$ 个顶点的图。同时给出 $q$ 个三种类型的查询：\n\n-   在顶点 $v_i$ 所在的连通分量中，需要找到编号第 $k_i$ 小的顶点编号。如果不存在，则返回 $-1$。顶点 $v_i$ 所在的连通分量是指所有可以通过边从顶点 $v_i$ 到达的顶点集合。\n-   向图中添加一条连接顶点 $u_i$ 和 $v_i$ 的边。\n-   返回到执行完第 $x_i$ 次操作后的状态。\n\n请找出所有第一类查询的答案。", "inputFormat": "第一行包含三个整数 $n$、$q$、$g$ ($1 \\leq n, q \\leq 5 \\cdot 10^5$, $0 \\leq g \\leq 9$)。\n\n接下来的每一行描述一个查询：\n\n-   第一类查询：$v_i$、$k_i$ ($1 \\leq v_i, k_i \\leq n$)。\n-   第二类查询：$v_i$、$u_i$ ($1 \\leq v_i, u_i \\leq n$)。\n-   第三类查询：$x_i$ ($0 \\leq x_i < i$)。", "outputFormat": "对于每个第一类查询，输出该查询的答案。", "hint": "### 评分细则\n\n-   （6 分）： $n, q \\leq 100$；没有第二类和第三类操作。\n-   （7 分）： $n, q \\leq 100$；没有第三类操作。\n-   （4 分）： $n, q \\leq 100$。\n-   （9 分）： $n, q \\leq 3 \\cdot 10^5$；保证在第二类操作中 $|v_i - u_i| = 1$；没有第三类查询。\n-   （8 分）： $n, q \\leq 3 \\cdot 10^5$，没有第三类查询。\n-   （10 分）： $n, q \\leq 3 \\cdot 10^5$；保证在第二类操作中 $|v_i - u_i| = 1$。\n-   （19 分）： $n, q \\leq 10^5$。\n-   （17 分）： $n, q \\leq 3 \\cdot 10^5$。\n-   （20 分）： 无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15050", "type": "P", "difficulty": 1, "samples": [["2", "18"], ["3", "26\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2023", "UOI（乌克兰）"], "title": "[UOI 2023 II Stage] Pixel snail", "background": "", "description": "Pixel snail is such a figure that is very easy to draw on a sheet of graph paper and is very similar to the symbol \"@\".\n\nPixel snail of order $k$ is constructed by the following algorithm:\n- A \"frame\" is painted - cells along the perimeter of a square with a side of $k$.\n- A cell is painted whose upper left corner coincides with the lower right corner of the frame. We will call this cell the \"bridge\".\n- All cells outside the frame at a distance of one cell from it are painted. At the same time, cells that touch the bridge (with the exception of the cell whose lower left corner coincides with the upper right corner of the bridge: it is still painted) are not painted.\nThe figure below shows pixel snails of the 1st, 2nd, 3rd and 4th orders.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/gythkodl.png)\n:::\n\nThe cells that are painted in the first, second and third steps of the algorithm are marked with numbers (1, 2, 3), respectively.\n\nWrite a program that will find the number of cells that need to be painted to draw a pixel snail of the $k$-th order.", "inputFormat": "The first line contains a single integer $k$ ($1 \\le k \\le 10^{8}$).", "outputFormat": "Print a single number - the number of cells that need to be painted to draw a pixel snail of the $k$-th order.", "hint": "If your program outputs the correct answer for all $k$ from $1$ to $10$, you will receive $40$ points.", "locale": "en", "translations": {"en": {"title": "[UOI 2023 II Stage] Pixel snail", "background": "", "description": "Pixel snail is such a figure that is very easy to draw on a sheet of graph paper and is very similar to the symbol \"@\".\n\nPixel snail of order $k$ is constructed by the following algorithm:\n- A \"frame\" is painted - cells along the perimeter of a square with a side of $k$.\n- A cell is painted whose upper left corner coincides with the lower right corner of the frame. We will call this cell the \"bridge\".\n- All cells outside the frame at a distance of one cell from it are painted. At the same time, cells that touch the bridge (with the exception of the cell whose lower left corner coincides with the upper right corner of the bridge: it is still painted) are not painted.\nThe figure below shows pixel snails of the 1st, 2nd, 3rd and 4th orders.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/gythkodl.png)\n:::\n\nThe cells that are painted in the first, second and third steps of the algorithm are marked with numbers (1, 2, 3), respectively.\n\nWrite a program that will find the number of cells that need to be painted to draw a pixel snail of the $k$-th order.", "inputFormat": "The first line contains a single integer $k$ ($1 \\le k \\le 10^{8}$).", "outputFormat": "Print a single number - the number of cells that need to be painted to draw a pixel snail of the $k$-th order.", "hint": "If your program outputs the correct answer for all $k$ from $1$ to $10$, you will receive $40$ points.", "locale": "en"}, "zh-CN": {"title": "[UOI 2023 II Stage] Pixel snail", "background": "", "description": "像素蜗牛是一种很容易在方格纸上画出的图形，它与符号 \"@\" 非常相似。\n\n第 $k$ 阶像素蜗牛由以下算法构造：\n- 绘制一个“边框”——沿着边长为 $k$ 的正方形的周边单元格被涂色。\n- 绘制一个单元格，其左上角与边框的右下角重合。我们称这个单元格为“桥接”。\n- 所有在边框外部且距离边框一个单元格的单元格被涂色。与此同时，与桥接单元格相邻的单元格（除了其左下角与桥接单元格的右上角重合的那个单元格：该单元格仍会被涂色）不会被涂色。\n\n下图展示了第 1、2、3 和 4 阶的像素蜗牛。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/gythkodl.png)\n:::\n\n算法中第一、第二和第三步涂色的单元格分别用数字（1、2、3）标出。\n\n编写一个程序，计算绘制第 $k$ 阶像素蜗牛需要涂色的单元格数量。", "inputFormat": "第一行包含一个整数 $k$（$1 \\le k \\le 10^{8}$）。\n", "outputFormat": "输出一个数字——绘制第 $k$ 阶像素蜗牛需要涂色的单元格数量。\n", "hint": "如果你的程序对所有 $1$ 到 $10$ 的 $k$ 都输出正确答案，你将获得 $40$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15051", "type": "P", "difficulty": 2, "samples": [["10 10 10 10 10\n20 20", "They can not do it!"], ["5 5 5 5 5\n25 30", "They both can do it!"], ["5 5 5 5 5\n30 20", "Vasyl can do it!"], ["5 5 5 5 5\n10 25", "Petro can do it!"], ["7 8 9 10 11\n30 30", "They need to work together!\nVasyl: 1 2\nPetro: 3 4 5"], ["7 8 9 10 11\n30 31", "They need to work together!\nVasyl: 1 2\nPetro: 5 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "枚举", "UOI（乌克兰）"], "title": "[UOI 2023 II Stage] Nova Poshta", "background": "", "description": "In the last minutes of the working day, a rush order for delivery of five oversized cargo items was received at the branch of Nova Poshta. There are only two trucks left in the branch: the first one has a load capacity of $M_1$, and the second one has a load capacity of $M_2$. The driver of the first truck is called Vasyl, and the driver of the second truck is called Petro.\n\nDetermine how to distribute the cargo between the trucks to fulfill the order.", "inputFormat": "The first line contains five integers $m_1$, $m_2$, $m_3$, $m_4$, $m_5$ ($1 \\leq m_1, m_2, m_3, m_4, m_5 \\leq 100$) --- the weights of the cargo items in tons.\n\nThe second line contains two integers $M_1$ and $M_2$ ($1 \\leq M_1, M_2 \\leq 100$) --- the load capacities of Vasyl's and Petro's trucks, respectively.", "outputFormat": "If the order cannot be fulfilled, print $\\texttt{They can not do it!}$.\n\nIf both Vasyl and Petro can fulfill the order on their own, print $\\texttt{They both can do it!}$.\n\nIf the order can be fulfilled by one truck only, but only one of the trucks has sufficient load capacity, print who should do it: $\\texttt{Vasyl can do it!}$ or $\\texttt{Petro can do it!}$.\n\nIf the order can be fulfilled but both trucks are needed, print any possible distribution of cargo between the trucks in the following format:\n\n- Print $\\tt{They need to work together!}$ on the first line.\n- On the second line, print the name $\\texttt{Vasyl}$, followed by a colon, space, and the numbers of the cargo items that need to be loaded onto the first truck.\n- On the third line, print the name $\\texttt{Petro}$, followed by a colon, space, and the numbers of the cargo items that need to be loaded onto the second truck.\n\nThe numbers of the cargo items can be printed in any order.", "hint": "", "locale": "en", "translations": {"en": {"title": "[UOI 2023 II Stage] Nova Poshta", "background": "", "description": "In the last minutes of the working day, a rush order for delivery of five oversized cargo items was received at the branch of Nova Poshta. There are only two trucks left in the branch: the first one has a load capacity of $M_1$, and the second one has a load capacity of $M_2$. The driver of the first truck is called Vasyl, and the driver of the second truck is called Petro.\n\nDetermine how to distribute the cargo between the trucks to fulfill the order.", "inputFormat": "The first line contains five integers $m_1$, $m_2$, $m_3$, $m_4$, $m_5$ ($1 \\leq m_1, m_2, m_3, m_4, m_5 \\leq 100$) --- the weights of the cargo items in tons.\n\nThe second line contains two integers $M_1$ and $M_2$ ($1 \\leq M_1, M_2 \\leq 100$) --- the load capacities of Vasyl's and Petro's trucks, respectively.", "outputFormat": "If the order cannot be fulfilled, print $\\texttt{They can not do it!}$.\n\nIf both Vasyl and Petro can fulfill the order on their own, print $\\texttt{They both can do it!}$.\n\nIf the order can be fulfilled by one truck only, but only one of the trucks has sufficient load capacity, print who should do it: $\\texttt{Vasyl can do it!}$ or $\\texttt{Petro can do it!}$.\n\nIf the order can be fulfilled but both trucks are needed, print any possible distribution of cargo between the trucks in the following format:\n\n- Print $\\tt{They need to work together!}$ on the first line.\n- On the second line, print the name $\\texttt{Vasyl}$, followed by a colon, space, and the numbers of the cargo items that need to be loaded onto the first truck.\n- On the third line, print the name $\\texttt{Petro}$, followed by a colon, space, and the numbers of the cargo items that need to be loaded onto the second truck.\n\nThe numbers of the cargo items can be printed in any order.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[UOI 2023 II Stage] Nova Poshta", "background": "", "description": "在工作日的最后几分钟，Nova Poshta 的一家分店收到了一份加急订单，需要配送五件超大货物。该分店只剩下两辆卡车：第一辆的载重量为 $M_1$，第二辆的载重量为 $M_2$。第一辆卡车的司机叫 Vasyl，第二辆卡车的司机叫 Petro。\n\n请确定如何在这两辆卡车之间分配货物以完成订单。", "inputFormat": "-   第一行包含五个整数 $m_1$, $m_2$, $m_3$, $m_4$, $m_5$（$1 \\leq m_1, m_2, m_3, m_4, m_5 \\leq 100$）——表示每件货物的重量（单位：吨）。\n-   第二行包含两个整数 $M_1$ 和 $M_2$（$1 \\leq M_1, M_2 \\leq 100$）——分别表示 Vasyl 和 Petro 卡车的载重量。", "outputFormat": "-   如果无法完成订单，输出 `They can not do it!`。\n-   如果 Vasyl 和 Petro 都能独自完成订单，输出 `They both can do it!`。\n-   如果只有一辆卡车有足够的载重量来完成订单，输出应该由谁来完成：`Vasyl can do it!` 或 `Petro can do it!`。\n-   如果可以完成订单但需要两辆卡车合作，输出任意一种可能的货物分配方案，格式如下：\n    -   第一行输出 `They need to work together!`。\n    -   第二行输出 `Vasyl:`，后跟一个冒号、一个空格，以及需要装载到第一辆卡车上的货物编号。\n    -   第三行输出 `Petro:`，后跟一个冒号、一个空格，以及需要装载到第二辆卡车上的货物编号。\n\n货物编号可以按任意顺序输出。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P15052", "type": "P", "difficulty": 3, "samples": [["6\n1 2 3 4 5 6\n3 6 1 2 4\n2 6 3 4\n3 4 6\n4 3\n3", "2 4 5 \n1 3 6 "], ["5\n1 8 4 2 100\n2 4 100 8\n100 2 8\n2 8\n2", "1 2 100 \n4 8 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2023", "排序", "双指针 two-pointer", "UOI（乌克兰）"], "title": "[UOI 2023 II Stage] Memory training", "background": "", "description": "Vasyl and Petro are training their memories. To do this, they take an array $A[1..n]$ with $n$ elements and perform the following actions:\n\n- First, Vasyl takes any number from the array, and names all other elements of the array at random.\n- Then Petro takes any number from the array named by Vasyl, and names all other elements of that array at random.\n- Then Vasyl performs his turn again.\n- Then Petro performs his turn.\n- And so on.\n\nObviously, after $n$ moves, all elements of the array $A$ will be distributed between Vasyl and Petro.\n\nLet's take a look at an example of how memory training works. Let the initial array be $A = [1\\; 2\\; 3\\; 4\\; 5\\; 6]$. \n\n- Vasyl makes the first move: $[3\\; 6\\; 1\\; 2\\; 4]$. He took number $5$ and named all other elements of the array $A$ at random.\n- Then Petro names this array: $[2\\; 6\\; 3\\; 4]$. He took number $1$ for himself.\n- Vasyl names this array: $[3\\; 4\\; 6]$. He took number $2$ for himself.\n- Petro names this array: $[4\\; 3]$. He took number $6$ for himself.\n- Vasyl names this array: $[3]$. He took number $4$ for himself.\n- Petro takes the last number, $3$ for himself.\n- Thus, Vasyl received the numbers $[2\\;4\\; 5]$, and Petro received the numbers $[1\\; 3\\; 6]$.\n\nWrite a program that, given an input array and the sequence of actions, determines who got which elements.", "inputFormat": "The first line contains a single integer $n$ ($2 \\leq n \\leq 1\\,000$) --- the number of elements in the array.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ ($-10^9 \\leq a_i \\leq 10^9$).\n\nEach of the following $(n-1)$ lines contains an array, which was named by either Vasyl or Petro. It is guaranteed that the arrays are correct, that is, each of them can be obtained from the previous one.", "outputFormat": "In the first line, output the elements that Vasyl took in non-descending order.\n\nIn the second line, output the elements that Petro took in non-descending order.", "hint": "In this problem, each test is evaluated separately. However, further:\n\n- In $22\\%$ of the tests, each integer from $1$ to $n$ occurs exactly once in the initial array $A$.\n- In $35\\%$ of the tests, $n \\leq 10$.", "locale": "en", "translations": {"en": {"title": "[UOI 2023 II Stage] Memory training", "background": "", "description": "Vasyl and Petro are training their memories. To do this, they take an array $A[1..n]$ with $n$ elements and perform the following actions:\n\n- First, Vasyl takes any number from the array, and names all other elements of the array at random.\n- Then Petro takes any number from the array named by Vasyl, and names all other elements of that array at random.\n- Then Vasyl performs his turn again.\n- Then Petro performs his turn.\n- And so on.\n\nObviously, after $n$ moves, all elements of the array $A$ will be distributed between Vasyl and Petro.\n\nLet's take a look at an example of how memory training works. Let the initial array be $A = [1\\; 2\\; 3\\; 4\\; 5\\; 6]$. \n\n- Vasyl makes the first move: $[3\\; 6\\; 1\\; 2\\; 4]$. He took number $5$ and named all other elements of the array $A$ at random.\n- Then Petro names this array: $[2\\; 6\\; 3\\; 4]$. He took number $1$ for himself.\n- Vasyl names this array: $[3\\; 4\\; 6]$. He took number $2$ for himself.\n- Petro names this array: $[4\\; 3]$. He took number $6$ for himself.\n- Vasyl names this array: $[3]$. He took number $4$ for himself.\n- Petro takes the last number, $3$ for himself.\n- Thus, Vasyl received the numbers $[2\\;4\\; 5]$, and Petro received the numbers $[1\\; 3\\; 6]$.\n\nWrite a program that, given an input array and the sequence of actions, determines who got which elements.", "inputFormat": "The first line contains a single integer $n$ ($2 \\leq n \\leq 1\\,000$) --- the number of elements in the array.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ ($-10^9 \\leq a_i \\leq 10^9$).\n\nEach of the following $(n-1)$ lines contains an array, which was named by either Vasyl or Petro. It is guaranteed that the arrays are correct, that is, each of them can be obtained from the previous one.", "outputFormat": "In the first line, output the elements that Vasyl took in non-descending order.\n\nIn the second line, output the elements that Petro took in non-descending order.", "hint": "In this problem, each test is evaluated separately. However, further:\n\n- In $22\\%$ of the tests, each integer from $1$ to $n$ occurs exactly once in the initial array $A$.\n- In $35\\%$ of the tests, $n \\leq 10$.", "locale": "en"}, "zh-CN": {"title": "[UOI 2023 II Stage] Memory training", "background": "", "description": "Vasyl 和 Petro 正在训练他们的记忆力。为此，他们取一个包含 $n$ 个元素的数组 $A[1..n]$，并执行以下操作：\n\n-   首先，Vasyl 从数组中任意取一个数，并以随机顺序报出数组中所有其他元素。\n-   然后 Petro 从 Vasyl 报出的数组中任意取一个数，并以随机顺序报出该数组中所有其他元素。\n-   接着 Vasyl 再次进行他的回合。\n-   然后 Petro 进行他的回合。\n-   依此类推。\n\n显然，经过 $n$ 轮操作后，数组 $A$ 的所有元素将被分配给 Vasyl 和 Petro。\n\n让我们看一个记忆力训练的例子。假设初始数组为 $A = [1\\; 2\\; 3\\; 4\\; 5\\; 6]$。\n\n-   Vasyl 进行第一步操作：$[3\\; 6\\; 1\\; 2\\; 4]$。他取走了数字 $5$，并以随机顺序报出了数组 $A$ 的所有其他元素。\n-   接着 Petro 报出这个数组：$[2\\; 6\\; 3\\; 4]$。他为自己取走了数字 $1$。\n-   Vasyl 报出这个数组：$[3\\; 4\\; 6]$。他为自己取走了数字 $2$。\n-   Petro 报出这个数组：$[4\\; 3]$。他为自己取走了数字 $6$。\n-   Vasyl 报出这个数组：$[3]$。他为自己取走了数字 $4$。\n-   Petro 取走最后一个数字 $3$ 归自己。\n-   因此，Vasyl 得到了数字 $[2\\;4\\; 5]$，而 Petro 得到了数字 $[1\\; 3\\; 6]$。\n\n编写一个程序，根据给定的输入数组和操作序列，确定谁得到了哪些元素。", "inputFormat": "-   第一行包含一个整数 $n$（$2 \\leq n \\leq 1\\,000$）——数组的元素个数。\n-   第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$-10^9 \\leq a_i \\leq 10^9$）。\n-   接下来的 $(n-1)$ 行，每行包含一个由 Vasyl 或 Petro 报出的数组。保证这些数组是正确的，即每个数组都可以由前一个数组得到。", "outputFormat": "-   第一行输出 Vasyl 取走的元素，按非降序排列。\n-   第二行输出 Petro 取走的元素，按非降序排列。", "hint": "本题中，每个测试点是独立评分的。此外：\n\n-   在 $22\\%$ 的测试点中，初始数组 $A$ 中的每个整数 $1$ 到 $n$ 恰好出现一次。\n-   在 $35\\%$ 的测试点中，$n \\leq 10$。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15053", "type": "P", "difficulty": 4, "samples": [["5\n6 1 3 9 5\n3 9 3 6\n2 3", "3 -1"], ["5\n5 2 8 3 5\n2 6 8 9\n5 2", "2 1\n3 2"], ["5\n6 1 3 9 5\n3 9 3 6\n2 4", "1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "数论", "素数判断,质数,筛法", "UOI（乌克兰）"], "title": "[UOI 2023 II Stage] Land plots", "background": "", "description": "Measuring a land plot is an important geodetic procedure. To obtain accurate numerical values, the measurement procedure should be performed by professional surveyors.\n\nLet us consider the following problem. Let us assume that there is a square plot that surveyors have divided into $n^2$ rectangular plots by drawing $(n-1)$ vertical and $(n-1)$ horizontal lines. Let us number the rows and columns of the small plots as shown on the picture (the scale is not respected). That is, the rows are numbered from bottom to top by integer numbers from $1$ to $n$; and the columns are numbered from left to right by integer numbers from $1$ to $n$.\n\nThe plots located at the intersection of the $i$-th column and the $i$-th row $(1 \\le i \\le n)$ will be called the \"main diagonal\". The plots located at the intersection of the $(i+1)$-th column and the $i$-th row $(1 \\le i \\le n-1)$ will be called the \"side diagonal\".\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/uruzzv2y.png)\n:::\n\nYou know the areas of the plots on the main and side diagonals. Calculate the area of the plot at the intersection of the $p$-th column and the $q$-th row.", "inputFormat": "The first line contains an integer $n$ ($2 \\le n \\le 1\\,000$).\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ ($1 \\leq a_i \\leq 10^9$) --- the areas of the plots on the main diagonal.\n\nThe third line contains $n-1$ integers $b_1, b_2, \\dots, b_{n-1}$ ($1 \\leq b_i \\leq 10^9$) --- the areas of the plots on the side diagonal.\n\nThe fourth line contains two integers $p$ and $q$ ($1 \\leq p, q \\leq n$) --- the coordinates of the plot, the area of which should be calculated.", "outputFormat": "Output the area of the plot located at the intersection of the $p$-th column and the $q$-th row.\n\nWe want to know the exact value of the area, so the answer should be given in a factorized form.\nIn other words, the answer should be represented as several lines, each containing two integers $p_i$ and $s_i$:\nthe number $p_i$ is necessarily prime, all $p_i$ are different, and the number $s_i$ is an integer and not equal to zero.\nThe sought area must be equal to:\n$$\n  S = p_1^{s_1} \\cdot p_2^{s_2} \\cdot p_3^{s_3} \\ldots p_k^{s_k},\n$$\nwhere $k$ is the number of lines in the answer. The lines must be sorted in increasing order of prime numbers $p_i$. Recall that a number $X$ is considered prime if it has exactly two positive integer divisors: $1$ and $X$.\n\n\nIf the required area is equal to 1, then output two units: $\\texttt{<<1 1>>}$.", "hint": "The area on the left in the figure corresponds to the first test from the condition. The area of the plot at the intersection of the 2nd column and the 3rd row is equal to:\n$$\n  S = 3^{-1} = \\frac{1}{3}\n$$\n\nThe area on the right in the figure corresponds to the second test from the condition. The area of the plot at the intersection of the 5th column and the 2nd row is equal to:\n$$\n  S = 2^{1} \\cdot 3^2 = 18\n$$\n\n### Scoring\n\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area, the area of which must be calculated, is located on the main or side diagonal. ($p - 1 = q$ or $p = q$)\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area whose area needs to be calculated is located at the intersection of the $i$th column and the $(i+1)$th row. ($p + 1 = q$)\n- ($5$ points): The areas of all known plots do not exceed $10\\,000$. The area, the area of which must be calculated, is located on the main or side diagonal. ($p - 1 = q$ or $p = q$)\n- ($5$ points): General restrictions on the area of all known plots. The area, the area of which must be calculated, is located on the main or side diagonal. ($p - 1 = q$ or $p = q$)\n- ($5$ points): The areas of all known plots do not exceed $10\\,000$. The area whose area needs to be calculated is located at the intersection of the $i$th column and the $(i+1)$th row. ($p + 1 = q$)\n- ($5$ points): General restrictions on the area of all known plots. The area whose area needs to be calculated is located at the intersection of the $i$th column and the $(i+1)$th row. ($p + 1 = q$)\n- ($5$ points): The number of plots is $25$ ($n = 5$). The areas of all known plots do not exceed $100$.\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area whose area needs to be calculated is in the upper left corner. ($p=1$, $q=n$)\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area whose area needs to be calculated is in the lower right corner. ($p=n$, $q=1$)\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area, the area of which must be calculated, is located above the main diagonal. ($p < q$)\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area, the area of which must be calculated, is located under the main diagonal. ($p > q$)\n- ($5$ points): The areas of all known plots do not exceed $100$. The area whose area needs to be calculated is in the upper left corner. ($p=1$, $q=n$)\n- ($5$ points): The areas of all known plots do not exceed $100$. The area whose area needs to be calculated is in the lower right corner. ($p=n$, $q=1$)\n- ($5$ points): The areas of all known plots do not exceed $100$. The area, the area of which must be calculated, is located above the main diagonal. ($p < q$)\n- ($5$ points): The areas of all known plots do not exceed $100$. The area, the area of which must be calculated, is located under the main diagonal. ($p > q$)\n- ($5$ points): General restrictions on the area of all known plots. The area whose area needs to be calculated is in the upper left corner. ($p=1$, $q=n$)\n- ($5$ points): General restrictions on the area of all known plots. The area whose area needs to be calculated is in the lower right corner. ($p=n$, $q=1$)\n- ($8$ points): General restrictions on the area of all known plots. The area, the area of which must be calculated, is located above the main diagonal. ($p < q$)\n- ($7$ points): General restrictions on the area of all known plots. The area, the area of which must be calculated, is located under the main diagonal. ($p > q$)", "locale": "en", "translations": {"en": {"title": "[UOI 2023 II Stage] Land plots", "background": "", "description": "Measuring a land plot is an important geodetic procedure. To obtain accurate numerical values, the measurement procedure should be performed by professional surveyors.\n\nLet us consider the following problem. Let us assume that there is a square plot that surveyors have divided into $n^2$ rectangular plots by drawing $(n-1)$ vertical and $(n-1)$ horizontal lines. Let us number the rows and columns of the small plots as shown on the picture (the scale is not respected). That is, the rows are numbered from bottom to top by integer numbers from $1$ to $n$; and the columns are numbered from left to right by integer numbers from $1$ to $n$.\n\nThe plots located at the intersection of the $i$-th column and the $i$-th row $(1 \\le i \\le n)$ will be called the \"main diagonal\". The plots located at the intersection of the $(i+1)$-th column and the $i$-th row $(1 \\le i \\le n-1)$ will be called the \"side diagonal\".\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/uruzzv2y.png)\n:::\n\nYou know the areas of the plots on the main and side diagonals. Calculate the area of the plot at the intersection of the $p$-th column and the $q$-th row.", "inputFormat": "The first line contains an integer $n$ ($2 \\le n \\le 1\\,000$).\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ ($1 \\leq a_i \\leq 10^9$) --- the areas of the plots on the main diagonal.\n\nThe third line contains $n-1$ integers $b_1, b_2, \\dots, b_{n-1}$ ($1 \\leq b_i \\leq 10^9$) --- the areas of the plots on the side diagonal.\n\nThe fourth line contains two integers $p$ and $q$ ($1 \\leq p, q \\leq n$) --- the coordinates of the plot, the area of which should be calculated.", "outputFormat": "Output the area of the plot located at the intersection of the $p$-th column and the $q$-th row.\n\nWe want to know the exact value of the area, so the answer should be given in a factorized form.\nIn other words, the answer should be represented as several lines, each containing two integers $p_i$ and $s_i$:\nthe number $p_i$ is necessarily prime, all $p_i$ are different, and the number $s_i$ is an integer and not equal to zero.\nThe sought area must be equal to:\n$$\n  S = p_1^{s_1} \\cdot p_2^{s_2} \\cdot p_3^{s_3} \\ldots p_k^{s_k},\n$$\nwhere $k$ is the number of lines in the answer. The lines must be sorted in increasing order of prime numbers $p_i$. Recall that a number $X$ is considered prime if it has exactly two positive integer divisors: $1$ and $X$.\n\n\nIf the required area is equal to 1, then output two units: $\\texttt{<<1 1>>}$.", "hint": "The area on the left in the figure corresponds to the first test from the condition. The area of the plot at the intersection of the 2nd column and the 3rd row is equal to:\n$$\n  S = 3^{-1} = \\frac{1}{3}\n$$\n\nThe area on the right in the figure corresponds to the second test from the condition. The area of the plot at the intersection of the 5th column and the 2nd row is equal to:\n$$\n  S = 2^{1} \\cdot 3^2 = 18\n$$\n\n### Scoring\n\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area, the area of which must be calculated, is located on the main or side diagonal. ($p - 1 = q$ or $p = q$)\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area whose area needs to be calculated is located at the intersection of the $i$th column and the $(i+1)$th row. ($p + 1 = q$)\n- ($5$ points): The areas of all known plots do not exceed $10\\,000$. The area, the area of which must be calculated, is located on the main or side diagonal. ($p - 1 = q$ or $p = q$)\n- ($5$ points): General restrictions on the area of all known plots. The area, the area of which must be calculated, is located on the main or side diagonal. ($p - 1 = q$ or $p = q$)\n- ($5$ points): The areas of all known plots do not exceed $10\\,000$. The area whose area needs to be calculated is located at the intersection of the $i$th column and the $(i+1)$th row. ($p + 1 = q$)\n- ($5$ points): General restrictions on the area of all known plots. The area whose area needs to be calculated is located at the intersection of the $i$th column and the $(i+1)$th row. ($p + 1 = q$)\n- ($5$ points): The number of plots is $25$ ($n = 5$). The areas of all known plots do not exceed $100$.\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area whose area needs to be calculated is in the upper left corner. ($p=1$, $q=n$)\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area whose area needs to be calculated is in the lower right corner. ($p=n$, $q=1$)\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area, the area of which must be calculated, is located above the main diagonal. ($p < q$)\n- ($5$ points): Areas of all known areas --- prime numbers up to $100$ or one. The area, the area of which must be calculated, is located under the main diagonal. ($p > q$)\n- ($5$ points): The areas of all known plots do not exceed $100$. The area whose area needs to be calculated is in the upper left corner. ($p=1$, $q=n$)\n- ($5$ points): The areas of all known plots do not exceed $100$. The area whose area needs to be calculated is in the lower right corner. ($p=n$, $q=1$)\n- ($5$ points): The areas of all known plots do not exceed $100$. The area, the area of which must be calculated, is located above the main diagonal. ($p < q$)\n- ($5$ points): The areas of all known plots do not exceed $100$. The area, the area of which must be calculated, is located under the main diagonal. ($p > q$)\n- ($5$ points): General restrictions on the area of all known plots. The area whose area needs to be calculated is in the upper left corner. ($p=1$, $q=n$)\n- ($5$ points): General restrictions on the area of all known plots. The area whose area needs to be calculated is in the lower right corner. ($p=n$, $q=1$)\n- ($8$ points): General restrictions on the area of all known plots. The area, the area of which must be calculated, is located above the main diagonal. ($p < q$)\n- ($7$ points): General restrictions on the area of all known plots. The area, the area of which must be calculated, is located under the main diagonal. ($p > q$)", "locale": "en"}, "zh-CN": {"title": "[UOI 2023 II Stage] Land plots", "background": "", "description": "土地测量是一项重要的测绘程序。为了获得精确的数值，测量工作应由专业的测量员进行。\n\n让我们考虑以下问题。假设存在一块正方形地块，测量员通过绘制 $(n-1)$ 条垂直线和 $(n-1)$ 条水平线将其划分为 $n^2$ 个矩形地块。让我们按图中所示（未按比例）对小地块的行和列进行编号。即，行从下到上编号为 $1$ 到 $n$；列从左到右编号为 $1$ 到 $n$。\n\n位于第 $i$ 列与第 $i$ 行交汇处的地块（$1 \\le i \\le n$）称为“主对角线”。位于第 $(i+1)$ 列与第 $i$ 行交汇处的地块（$1 \\le i \\le n-1$）称为“副对角线”。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/uruzzv2y.png)\n:::\n\n你已知主对角线和副对角线上地块的面积。请计算位于第 $p$ 列与第 $q$ 行交汇处的地块的面积。", "inputFormat": "-   第一行包含一个整数 $n$（$2 \\le n \\le 1\\,000$）。\n-   第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$1 \\leq a_i \\leq 10^9$）——主对角线上地块的面积。\n-   第三行包含 $n-1$ 个整数 $b_1, b_2, \\dots, b_{n-1}$（$1 \\leq b_i \\leq 10^9$）——副对角线上地块的面积。\n-   第四行包含两个整数 $p$ 和 $q$（$1 \\leq p, q \\leq n$）——待计算面积的地块的坐标。", "outputFormat": "输出位于第 $p$ 列与第 $q$ 行交汇处的地块的面积。\n\n我们想知道面积的精确值，因此答案应以分解形式给出。换句话说，答案应由若干行表示，每行包含两个整数 $p_i$ 和 $s_i$：数 $p_i$ 必须是素数，所有 $p_i$ 互不相同，且数 $s_i$ 是一个非零整数。所求面积必须等于：\n$$\n  S = p_1^{s_1} \\cdot p_2^{s_2} \\cdot p_3^{s_3} \\ldots p_k^{s_k},\n$$\n其中 $k$ 是答案的行数。各行必须按素数 $p_i$ 的递增顺序排序。回忆一下，一个数 $X$ 被认为是素数，当且仅当它恰好有两个正整数因子：$1$ 和 $X$。\n\n如果所求面积等于 1，则输出两个 1：`1 1`。", "hint": "图中左侧的区域对应条件中的第一个测试。位于第 2 列与第 3 行交汇处的地块的面积为：\n$$\n  S = 3^{-1} = \\frac{1}{3}\n$$\n\n图中右侧的区域对应条件中的第二个测试。位于第 5 列与第 2 行交汇处的地块的面积为：\n$$\n  S = 2^{1} \\cdot 3^2 = 18\n$$\n\n### 评分细则\n\n-   （$5$ 分）：所有已知面积均为不超过 $100$ 的素数或 1。待计算面积的地块位于主对角线或副对角线上。（$p - 1 = q$ 或 $p = q$）\n-   （$5$ 分）：所有已知面积均为不超过 $100$ 的素数或 1。待计算面积的地块位于第 $i$ 列与第 $(i+1)$ 行的交汇处。（$p + 1 = q$）\n-   （$5$ 分）：所有已知地块的面积不超过 $10\\,000$。待计算面积的地块位于主对角线或副对角线上。（$p - 1 = q$ 或 $p = q$）\n-   （$5$ 分）：所有已知地块面积的一般限制。待计算面积的地块位于主对角线或副对角线上。（$p - 1 = q$ 或 $p = q$）\n-   （$5$ 分）：所有已知地块的面积不超过 $10\\,000$。待计算面积的地块位于第 $i$ 列与第 $(i+1)$ 行的交汇处。（$p + 1 = q$）\n-   （$5$ 分）：所有已知地块面积的一般限制。待计算面积的地块位于第 $i$ 列与第 $(i+1)$ 行的交汇处。（$p + 1 = q$）\n-   （$5$ 分）：地块数量为 $25$（$n = 5$）。所有已知地块的面积不超过 $100$。\n-   （$5$ 分）：所有已知面积均为不超过 $100$ 的素数或 1。待计算面积的地块位于左上角。（$p=1$，$q=n$）\n-   （$5$ 分）：所有已知面积均为不超过 $100$ 的素数或 1。待计算面积的地块位于右下角。（$p=n$，$q=1$）\n-   （$5$ 分）：所有已知面积均为不超过 $100$ 的素数或 1。待计算面积的地块位于主对角线上方。（$p < q$）\n-   （$5$ 分）：所有已知面积均为不超过 $100$ 的素数或 1。待计算面积的地块位于主对角线下方。（$p > q$）\n-   （$5$ 分）：所有已知地块的面积不超过 $100$。待计算面积的地块位于左上角。（$p=1$，$q=n$）\n-   （$5$ 分）：所有已知地块的面积不超过 $100$。待计算面积的地块位于右下角。（$p=n$，$q=1$）\n-   （$5$ 分）：所有已知地块的面积不超过 $100$。待计算面积的地块位于主对角线上方。（$p < q$）\n-   （$5$ 分）：所有已知地块的面积不超过 $100$。待计算面积的地块位于主对角线下方。（$p > q$）\n-   （$5$ 分）：所有已知地块面积的一般限制。待计算面积的地块位于左上角。（$p=1$，$q=n$）\n-   （$5$ 分）：所有已知地块面积的一般限制。待计算面积的地块位于右下角。（$p=n$，$q=1$）\n-   （$8$ 分）：所有已知地块面积的一般限制。待计算面积的地块位于主对角线上方。（$p < q$）\n-   （$7$ 分）：所有已知地块面积的一般限制。待计算面积的地块位于主对角线下方。（$p > q$）\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15054", "type": "P", "difficulty": 5, "samples": [["inside\ninside\noutside\ninside\noutside\noutside\ninside\noutside\noutside", "? 50 50\n? 75 75\n? 10 10\n? 20 20\n? 19 20\n? 20 19\n? 80 80\n? 81 80\n? 80 81\n! square"], ["10 10 80 80", "32"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "交互题", "Special Judge", "UOI（乌克兰）"], "title": "[UOI 2023 II Stage] Square or rectangle", "background": "", "description": "Eolymp offers you to play an interesting interactive game \"Square or Rectangle\" with the testing system.\n\nEolymp has a square board of size $100 \\times 100$ cells. The lines of the board are numbered by integers from $1$ to $100$ from top to bottom, and the columns are numbered by integers from $1$ to $100$ from left to right. Accordingly, the cell that is located in the upper left corner of the board has coordinates $(1,\\,1)$; the cell that is located in the lower right corner has coordinates $(100,\\,100)$; and the cell that is located at the intersection of the $i$-th row and $j$-th column has coordinates $(i,\\,j)$.\n\nEolymp paints a rectangular area of the board, the upper left corner of which has coordinates $(x_1,\\,y_1)$, and the lower right --- $(x_2,\\,y_2)$. Eolymp keeps these coordinates secret. But it is known that the area of the painted area is at least $4\\%$ of the area of the entire board.\n\nYou can ask Eolymp about any cell (whether it belongs to the painted area) and get an honest answer from the testing system. You need to find out if the painted area is a square.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/1i4ij5y9.png)\n:::\n\n### Interaction\n\nTo find out if a cell belongs to the painted area, you need to ask Eolymp about it. To do this, you need to output the character \"?\", and two integers $x$ and $y$ $(1 \\le x \\le 100, \\; 1 \\le y \\le 100)$ --- the coordinates of the point you want to ask about. After this, you need to output the character new line and perform the operation $\\tt{flush}$. After this, you need to read a line. Eolymp will output either $\\tt{inside}$ if the cell is painted, or $\\tt{outside}$ otherwise.\n\n- $\\tt{fflush(stdout)}$ or $\\tt{cout.flush()}$ in C++;\n- $\\tt{System.out.flush()}$ in Java;\n- $\\tt{flush(output)}$ in Pascal;\n- $\\tt{stdout.flush()}$ in Python;\n- for all other languages you need to look at the documentation yourself.\n\nYou can ask no more than $10\\,000$ questions.\n\nWhen you know the answer, you need to output the character \"!\", a space, and one of the two variants: either $\\tt{square}$ (if the figure painted by Eolimp is a square), or $\\tt{rectangle}$ (if the figure is a rectangle).\n\nIf you do not follow the format of interaction, you can receive any verdict: $\\tt{Wrong\\ Answer}$, $\\tt{Runtime\\ Error}$, $\\tt{Time\\ Limit\\ Exceeded}$, etc.", "inputFormat": "", "outputFormat": "", "hint": "In the example, Eolymp painted an area whose upper left corner is $(20, 20)$, and the lower right corner is $(80, 80)$.\n\nThe condition provides an example of how to interact with Eolymp. Your queries to Eolymp may be different.\n\nYour program will play this game with Eolymp many times. Let $q$ be the maximum number of questions you asked in all the games. Then you will receive such amount of points:\n\n- If you asked more than $10\\,000$ questions in any game, gave a wrong answer, or did not follow the format of interaction, you will receive $0$ points.\n- If $1\\,000 < q \\leq 10\\,000$, you will receive $5$ points.\n- If $100 < q \\leq 1\\,000$, you will receive $19$ points.\n- If $50 < q \\leq 100$, you will receive $20 + \\lfloor\\frac{(100 - q) \\cdot 30}{50}\\rfloor$ points.\n- If $33 < q \\leq 50$, you will receive $50 + \\lfloor\\frac{(50 - q) \\cdot 50}{17}\\rfloor$ points.\n- If $q \\leq 33$, you will receive $100$ points.", "locale": "en", "translations": {"en": {"title": "[UOI 2023 II Stage] Square or rectangle", "background": "", "description": "Eolymp offers you to play an interesting interactive game \"Square or Rectangle\" with the testing system.\n\nEolymp has a square board of size $100 \\times 100$ cells. The lines of the board are numbered by integers from $1$ to $100$ from top to bottom, and the columns are numbered by integers from $1$ to $100$ from left to right. Accordingly, the cell that is located in the upper left corner of the board has coordinates $(1,\\,1)$; the cell that is located in the lower right corner has coordinates $(100,\\,100)$; and the cell that is located at the intersection of the $i$-th row and $j$-th column has coordinates $(i,\\,j)$.\n\nEolymp paints a rectangular area of the board, the upper left corner of which has coordinates $(x_1,\\,y_1)$, and the lower right --- $(x_2,\\,y_2)$. Eolymp keeps these coordinates secret. But it is known that the area of the painted area is at least $4\\%$ of the area of the entire board.\n\nYou can ask Eolymp about any cell (whether it belongs to the painted area) and get an honest answer from the testing system. You need to find out if the painted area is a square.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/1i4ij5y9.png)\n:::\n\n### Interaction\n\nTo find out if a cell belongs to the painted area, you need to ask Eolymp about it. To do this, you need to output the character \"?\", and two integers $x$ and $y$ $(1 \\le x \\le 100, \\; 1 \\le y \\le 100)$ --- the coordinates of the point you want to ask about. After this, you need to output the character new line and perform the operation $\\tt{flush}$. After this, you need to read a line. Eolymp will output either $\\tt{inside}$ if the cell is painted, or $\\tt{outside}$ otherwise.\n\n- $\\tt{fflush(stdout)}$ or $\\tt{cout.flush()}$ in C++;\n- $\\tt{System.out.flush()}$ in Java;\n- $\\tt{flush(output)}$ in Pascal;\n- $\\tt{stdout.flush()}$ in Python;\n- for all other languages you need to look at the documentation yourself.\n\nYou can ask no more than $10\\,000$ questions.\n\nWhen you know the answer, you need to output the character \"!\", a space, and one of the two variants: either $\\tt{square}$ (if the figure painted by Eolimp is a square), or $\\tt{rectangle}$ (if the figure is a rectangle).\n\nIf you do not follow the format of interaction, you can receive any verdict: $\\tt{Wrong\\ Answer}$, $\\tt{Runtime\\ Error}$, $\\tt{Time\\ Limit\\ Exceeded}$, etc.", "inputFormat": "", "outputFormat": "", "hint": "In the example, Eolymp painted an area whose upper left corner is $(20, 20)$, and the lower right corner is $(80, 80)$.\n\nThe condition provides an example of how to interact with Eolymp. Your queries to Eolymp may be different.\n\nYour program will play this game with Eolymp many times. Let $q$ be the maximum number of questions you asked in all the games. Then you will receive such amount of points:\n\n- If you asked more than $10\\,000$ questions in any game, gave a wrong answer, or did not follow the format of interaction, you will receive $0$ points.\n- If $1\\,000 < q \\leq 10\\,000$, you will receive $5$ points.\n- If $100 < q \\leq 1\\,000$, you will receive $19$ points.\n- If $50 < q \\leq 100$, you will receive $20 + \\lfloor\\frac{(100 - q) \\cdot 30}{50}\\rfloor$ points.\n- If $33 < q \\leq 50$, you will receive $50 + \\lfloor\\frac{(50 - q) \\cdot 50}{17}\\rfloor$ points.\n- If $q \\leq 33$, you will receive $100$ points.", "locale": "en"}, "zh-CN": {"title": "[UOI 2023 II Stage] Square or rectangle", "background": "双倍经验：<https://www.luogu.com.cn/problem/P10735>", "description": "Eolymp 邀请你与评测系统玩一个有趣的交互式游戏“正方形还是矩形”。\n\nEolymp 拥有一个大小为 $100 \\times 100$ 单元格的正方形棋盘。棋盘的行从上到下用 $1$ 到 $100$ 的整数编号，列从左到右用 $1$ 到 $100$ 的整数编号。因此，位于棋盘左上角的单元格坐标为 $(1,\\,1)$；位于棋盘右下角的单元格坐标为 $(100,\\,100)$；位于第 $i$ 行与第 $j$ 列交汇处的单元格坐标为 $(i,\\,j)$。\n\nEolymp 在棋盘上涂了一个矩形区域，其左上角坐标为 $(x_1,\\,y_1)$，右下角坐标为 $(x_2,\\,y_2)$。Eolymp 对这些坐标保密。但已知涂色区域的面积至少是整个棋盘面积的 $4\\%$。\n\n你可以向 Eolymp 询问任何单元格（它是否属于涂色区域），并从评测系统得到一个诚实的回答。你需要确定涂色区域是否是一个正方形。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/1i4ij5y9.png)\n:::\n\n### 交互方式\n\n要查询一个单元格是否属于涂色区域，你需要向 Eolymp 询问。为此，你需要输出字符 \"?\" 和两个整数 $x$ 与 $y$（$1 \\le x \\le 100, \\; 1 \\le y \\le 100$）——你想要询问的点的坐标。之后，你需要输出换行符并执行 $\\tt{flush}$ 操作。然后，你需要读取一行。Eolymp 将输出 $\\tt{inside}$（如果单元格被涂色）或 $\\tt{outside}$（否则）。\n\n-   C++ 中使用 $\\tt{fflush(stdout)}$ 或 $\\tt{cout.flush()}$；\n-   Java 中使用 $\\tt{System.out.flush()}$；\n-   Pascal 中使用 $\\tt{flush(output)}$；\n-   Python 中使用 $\\tt{stdout.flush()}$；\n-   其他语言请自行查阅文档。\n\n你最多可以询问 $10\\,000$ 次。\n\n当你得知答案时，你需要输出字符 \"!\"、一个空格，以及两个选项之一：要么是 $\\tt{square}$（如果 Eolymp 涂的图形是正方形），要么是 $\\tt{rectangle}$（如果是矩形）。\n\n如果你不遵守交互格式，可能会收到任何判题结果：$\\tt{Wrong\\ Answer}$、$\\tt{Runtime\\ Error}$、$\\tt{Time\\ Limit\\ Exceeded}$ 等。", "inputFormat": "", "outputFormat": "", "hint": "在示例中，Eolymp 涂色的区域左上角为 $(20, 20)$，右下角为 $(80, 80)$。\n\n题目描述中提供了一个与 Eolymp 交互的示例。你对 Eolymp 的查询可以不同。\n\n你的程序将与 Eolymp 多次进行此游戏。设 $q$ 为你在所有游戏中询问的最大问题数。那么你将获得如下分数：\n\n-   如果你在任何一场游戏中询问超过 $10\\,000$ 次、给出错误答案或不遵守交互格式，你将获得 $0$ 分。\n-   如果 $1\\,000 < q \\leq 10\\,000$，你将获得 $5$ 分。\n-   如果 $100 < q \\leq 1\\,000$，你将获得 $19$ 分。\n-   如果 $50 < q \\leq 100$，你将获得 $20 + \\lfloor\\frac{(100 - q) \\cdot 30}{50}\\rfloor$ 分。\n-   如果 $33 < q \\leq 50$，你将获得 $50 + \\lfloor\\frac{(50 - q) \\cdot 50}{17}\\rfloor$ 分。\n-   如果 $q \\leq 33$，你将获得 $100$ 分。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15055", "type": "P", "difficulty": 1, "samples": [["7 4 3", "11"], ["2 2 6", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "UOI（乌克兰）"], "title": "[UOI 2023 II Stage] Gallery", "background": "", "description": "Cossack Vus works in a gallery, and he was given the task of building the highest tower of vases possible.\n\nHe has three vases with heights $a$, $b$, $c$. However, unfortunately, if three vases are placed on top of each other, the structure will quickly break. Cossack can only choose two vases and place them on top of each other. He wants to get the highest composition of vases.\n\nFind the maximum height he can reach.", "inputFormat": "The first line contains three integers $a$, $b$, $c$ ($1 \\le a,b,c \\le 10^8$).", "outputFormat": "Output the maximum height of the composition that satisfies the condition.", "hint": "In the first example, we can take the first and second vases. The height of the composition will be $7+4=11$.\n\nIn the second example, we can take the second and third vases. The height of the composition will be $2+6=8$. You can also take the first vase instead of the second.", "locale": "en", "translations": {"en": {"title": "[UOI 2023 II Stage] Gallery", "background": "", "description": "Cossack Vus works in a gallery, and he was given the task of building the highest tower of vases possible.\n\nHe has three vases with heights $a$, $b$, $c$. However, unfortunately, if three vases are placed on top of each other, the structure will quickly break. Cossack can only choose two vases and place them on top of each other. He wants to get the highest composition of vases.\n\nFind the maximum height he can reach.", "inputFormat": "The first line contains three integers $a$, $b$, $c$ ($1 \\le a,b,c \\le 10^8$).", "outputFormat": "Output the maximum height of the composition that satisfies the condition.", "hint": "In the first example, we can take the first and second vases. The height of the composition will be $7+4=11$.\n\nIn the second example, we can take the second and third vases. The height of the composition will be $2+6=8$. You can also take the first vase instead of the second.", "locale": "en"}, "zh-CN": {"title": "[UOI 2023 II Stage] Gallery", "background": "", "description": "哥萨克人 Vus 在一家画廊工作，他被赋予了建造尽可能高的花瓶塔的任务。\n\n他拥有三个高度分别为 $a$、$b$、$c$ 的花瓶。然而，不幸的是，如果将三个花瓶叠放在一起，结构很快就会损坏。哥萨克只能选择两个花瓶并将它们叠放起来。他希望获得最高的花瓶组合。\n\n求他能够达到的最大高度。", "inputFormat": "第一行包含三个整数 $a$、$b$、$c$（$1 \\le a,b,c \\le 10^8$）。", "outputFormat": "输出满足条件的组合的最大高度。", "hint": "在第一个例子中，我们可以选择第一个和第二个花瓶。组合的高度将为 $7+4=11$。\n\n在第二个例子中，我们可以选择第二个和第三个花瓶。组合的高度将为 $2+6=8$。你也可以用第一个花瓶替代第二个花瓶。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15056", "type": "P", "difficulty": 2, "samples": [["3 2 1 2 2\n2 1\n3 2\n3 1", "NO\n1"], ["2 1 1 3 0\n2 2\n3 1", "NO\n2"], ["2 2 1 4 1\n3 2\n3 1", "YES"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2023", "UOI（乌克兰）"], "title": "[UOI 2023 II Stage] Unenslaved puppy", "background": "", "description": "A dog was attacked by angry bees. To hide from them, kind smurfs built $n$ domes.\n\nMathematically a dome is a semicircle with center at point $(pos_i,0)$ and radius $r_i$. It is impossible to pass through the wall of the dome. The dog and the beehive can be represented as two points $(x_1,y_1)$ and $(x_2,y_2)$. If a point is inside the dome, we consider it to be inside.\n\nHelp the dog find out whether it is safe. That is, whether the bees can reach the dog without crossing the walls of domes.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/grlzymqi.png)\n:::", "inputFormat": "The first line contains five integers $n$, $x_1$, $y_1$, $x_2$, $y_2$ $(1 \\le n \\le 10^3, 0 \\le x_1,y_1,x_2,y_2 \\le 10^3)$.\n\nEach of the following $n$ lines contains two integers $pos_i$ and $r_i$ $(0 \\le pos_i \\leq 10^3, 1 \\leq r_i \\le 10^3)$.", "outputFormat": "If the bees can reach the dog without crossing the walls of domes, print $\\tt{YES}$.\n\nOtherwise, in the first line print $\\tt{NO}$, and in the second line print the smallest index (starting from one) of the dome that separates the bee and the dog.", "hint": "Explanation for the first test:\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/grlzymqi.png)\n:::\n\nExplanation for the second test:\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/s34mvpck.png)\n:::\n\nExplanation for the third test:\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/c86oo37j.png)\n:::", "locale": "en", "translations": {"en": {"title": "[UOI 2023 II Stage] Unenslaved puppy", "background": "", "description": "A dog was attacked by angry bees. To hide from them, kind smurfs built $n$ domes.\n\nMathematically a dome is a semicircle with center at point $(pos_i,0)$ and radius $r_i$. It is impossible to pass through the wall of the dome. The dog and the beehive can be represented as two points $(x_1,y_1)$ and $(x_2,y_2)$. If a point is inside the dome, we consider it to be inside.\n\nHelp the dog find out whether it is safe. That is, whether the bees can reach the dog without crossing the walls of domes.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/grlzymqi.png)\n:::", "inputFormat": "The first line contains five integers $n$, $x_1$, $y_1$, $x_2$, $y_2$ $(1 \\le n \\le 10^3, 0 \\le x_1,y_1,x_2,y_2 \\le 10^3)$.\n\nEach of the following $n$ lines contains two integers $pos_i$ and $r_i$ $(0 \\le pos_i \\leq 10^3, 1 \\leq r_i \\le 10^3)$.", "outputFormat": "If the bees can reach the dog without crossing the walls of domes, print $\\tt{YES}$.\n\nOtherwise, in the first line print $\\tt{NO}$, and in the second line print the smallest index (starting from one) of the dome that separates the bee and the dog.", "hint": "Explanation for the first test:\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/grlzymqi.png)\n:::\n\nExplanation for the second test:\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/s34mvpck.png)\n:::\n\nExplanation for the third test:\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/c86oo37j.png)\n:::", "locale": "en"}, "zh-CN": {"title": "[UOI 2023 II Stage] Unenslaved puppy", "background": "", "description": "一只狗遭到了愤怒蜜蜂的攻击。为了躲避它们，好心的蓝精灵建造了 $n$ 个防护罩。\n\n从数学上讲，一个防护罩是一个以点 $(pos_i,0)$ 为圆心、半径为 $r_i$ 的半圆。无法穿过防护罩的墙壁。狗和蜂巢可以表示为两个点 $(x_1,y_1)$ 和 $(x_2,y_2)$。如果一个点在防护罩内部，我们认为它在里面。\n\n请帮助狗判断它是否安全。也就是说，判断蜜蜂是否能在不穿过防护罩墙壁的情况下到达狗的位置。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/grlzymqi.png)\n:::", "inputFormat": "-   第一行包含五个整数 $n$、$x_1$、$y_1$、$x_2$、$y_2$（$1 \\le n \\le 10^3, 0 \\le x_1,y_1,x_2,y_2 \\le 10^3$）。\n-   接下来的 $n$ 行，每行包含两个整数 $pos_i$ 和 $r_i$（$0 \\le pos_i \\leq 10^3, 1 \\leq r_i \\le 10^3$）。\n", "outputFormat": "如果蜜蜂能在不穿过防护罩墙壁的情况下到达狗的位置，输出 `YES`。\n\n否则，在第一行输出 `NO`，第二行输出将蜜蜂与狗隔开的防护罩的最小索引（从 1 开始）。", "hint": "第一个测试的解释：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/grlzymqi.png)\n:::\n\n第二个测试的解释：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/s34mvpck.png)\n:::\n\n第三个测试的解释：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/c86oo37j.png)\n:::\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15057", "type": "P", "difficulty": 3, "samples": [["5", "NO\n1 5"], ["4", "YES"], ["7", "NO\n1 7"], ["8", "YES"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "并查集", "2023", "Special Judge", "UOI（乌克兰）"], "title": "[UOI 2023 II Stage] Roads of Potokolandiya", "background": "", "description": "In Potokoland, there are $n$ cities and $n$ two-way roads. The $i$-th road connects cities $i$ and $(i+i)$ (if $i+i>n$, then $i+i-n$).\n\nFor example, if $n=5$, the roads will be $(1, 2)$, $(2, 4)$, $(3, 1)$, $(4, 3)$, and $(5, 5)$.\n\nDetermine if it is possible to travel from any city to any other city using the roads. If not, find a pair of cities that are not connected.", "inputFormat": "The first line contains one integer $n$ ($1 \\leq n \\leq 10^6$).", "outputFormat": "Output $\\tt{YES}$ if it is possible to travel from any city to any other city.\n\nOtherwise, output $\\tt{NO}$ on the first line. On the second line, output any two cities $a$ and $b$ ($1 \\leq a, b \\leq n$; $a \\neq b$) such that it is impossible to travel from $a$ to $b$ using the roads.", "hint": "", "locale": "en", "translations": {"en": {"title": "[UOI 2023 II Stage] Roads of Potokolandiya", "background": "", "description": "In Potokoland, there are $n$ cities and $n$ two-way roads. The $i$-th road connects cities $i$ and $(i+i)$ (if $i+i>n$, then $i+i-n$).\n\nFor example, if $n=5$, the roads will be $(1, 2)$, $(2, 4)$, $(3, 1)$, $(4, 3)$, and $(5, 5)$.\n\nDetermine if it is possible to travel from any city to any other city using the roads. If not, find a pair of cities that are not connected.", "inputFormat": "The first line contains one integer $n$ ($1 \\leq n \\leq 10^6$).", "outputFormat": "Output $\\tt{YES}$ if it is possible to travel from any city to any other city.\n\nOtherwise, output $\\tt{NO}$ on the first line. On the second line, output any two cities $a$ and $b$ ($1 \\leq a, b \\leq n$; $a \\neq b$) such that it is impossible to travel from $a$ to $b$ using the roads.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[UOI 2023 II Stage] Roads of Potokolandiya", "background": "", "description": "在 Potokoland 有 $n$ 座城市和 $n$ 条双向道路。第 $i$ 条道路连接城市 $i$ 和 $(i+i)$（如果 $i+i>n$，则连接城市 $i$ 和 $i+i-n$）。\n\n例如，当 $n=5$ 时，道路为 $(1, 2)$、$(2, 4)$、$(3, 1)$、$(4, 3)$ 和 $(5, 5)$。\n\n请判断是否可以通过这些道路从任意一座城市到达任意另一座城市。如果不能，请找出一对无法相互到达的城市。", "inputFormat": "第一行包含一个整数 $n$（$1 \\leq n \\leq 10^6$）。\n", "outputFormat": "如果可以通过道路从任意一座城市到达任意另一座城市，输出 `YES`。\n\n否则，第一行输出 `NO`。第二行输出任意两个城市 $a$ 和 $b$（$1 \\leq a, b \\leq n$；$a \\neq b$），使得无法通过道路从 $a$ 到达 $b$。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15058", "type": "P", "difficulty": 4, "samples": [["3 4 3\n0 2 1 4\n1 2 3 3\n2 1 3 3", "NO"], ["3 4 3\n0 2 1 4\n1 0 2 1\n2 1 3 3", "YES"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "2023", "UOI（乌克兰）"], "title": "[UOI 2023 II Stage] Rectangles are everywhere", "background": "", "description": "Andriyko drank a lot of compote and now he's very afraid of rectangles. Andriyko's room can be mathematically represented as a rectangle with height $n$ and width $m$. In this room, there are $k$ rectangles, each of which is completely inside the room and does not touch the points $(0,0)$ and $(n,m)$ (where $(0,0)$ is the top-left and $(n,m)$ is the bottom-right point).\n \nAndriyko wants to go from the corner $(0,0)$ to $(n,m)$ without ever touching any of the $k$ rectangles (not even touching them). If he is at coordinate $(x,y)$, then he can move to any of the following coordinates with one step: $(x-0.5,y)$, $(x+0.5,y)$, $(x,y-0.5)$, $(x,y+0.5)$, but only if the next coordinate does not go beyond the boundaries of the rectangle.\n\nDetermine if he can reach from one corner to the other.", "inputFormat": "The first line contains three integers $n$, $m$, $k$ $(1 \\le n,m \\le 10^6, 1 \\le k \\le 5\\,000)$.\n\nEach of the next $k$ lines contains four integers $x_1$, $y_1$, $x_2$, $y_2$ $(0 \\le x_1 \\le x_2 \\le n; 0 \\le y_1 \\le y_2 \\le m)$ --- the coordinates of the top-left and bottom-right corners of rectangle $i$.\n\nIt is guaranteed that no rectangle touches the points $(0,0)$ and $(n,m)$.", "outputFormat": "Print $\\tt{YES}$ if Andriyko can travel between the ends of the room, and $\\tt{NO}$ otherwise. ", "hint": "- ($3$ points): $k = 1$\n- ($4$ points): $k = 2$\n- ($5$ points): $k = 3$\n- ($17$ points): $1 \\le k \\le 50$\n- ($26$ points): $1 \\le k \\le 1000$\n- ($20$ points): $1 \\le n,m \\le 5000$\n- ($25$ points): no additional constraints. ", "locale": "en", "translations": {"en": {"title": "[UOI 2023 II Stage] Rectangles are everywhere", "background": "", "description": "Andriyko drank a lot of compote and now he's very afraid of rectangles. Andriyko's room can be mathematically represented as a rectangle with height $n$ and width $m$. In this room, there are $k$ rectangles, each of which is completely inside the room and does not touch the points $(0,0)$ and $(n,m)$ (where $(0,0)$ is the top-left and $(n,m)$ is the bottom-right point).\n \nAndriyko wants to go from the corner $(0,0)$ to $(n,m)$ without ever touching any of the $k$ rectangles (not even touching them). If he is at coordinate $(x,y)$, then he can move to any of the following coordinates with one step: $(x-0.5,y)$, $(x+0.5,y)$, $(x,y-0.5)$, $(x,y+0.5)$, but only if the next coordinate does not go beyond the boundaries of the rectangle.\n\nDetermine if he can reach from one corner to the other.", "inputFormat": "The first line contains three integers $n$, $m$, $k$ $(1 \\le n,m \\le 10^6, 1 \\le k \\le 5\\,000)$.\n\nEach of the next $k$ lines contains four integers $x_1$, $y_1$, $x_2$, $y_2$ $(0 \\le x_1 \\le x_2 \\le n; 0 \\le y_1 \\le y_2 \\le m)$ --- the coordinates of the top-left and bottom-right corners of rectangle $i$.\n\nIt is guaranteed that no rectangle touches the points $(0,0)$ and $(n,m)$.", "outputFormat": "Print $\\tt{YES}$ if Andriyko can travel between the ends of the room, and $\\tt{NO}$ otherwise. ", "hint": "- ($3$ points): $k = 1$\n- ($4$ points): $k = 2$\n- ($5$ points): $k = 3$\n- ($17$ points): $1 \\le k \\le 50$\n- ($26$ points): $1 \\le k \\le 1000$\n- ($20$ points): $1 \\le n,m \\le 5000$\n- ($25$ points): no additional constraints. ", "locale": "en"}, "zh-CN": {"title": "[UOI 2023 II Stage] Rectangles are everywhere", "background": "", "description": "Andriyko 喝了很多蜜饯水，现在他非常害怕矩形。Andriyko 的房间可以用一个高为 $n$、宽为 $m$ 的矩形来数学表示。在这个房间里有 $k$ 个矩形，每个矩形完全位于房间内部，且不接触点 $(0,0)$ 和 $(n,m)$（其中 $(0,0)$ 是左上角，$(n,m)$ 是右下角）。\n\nAndriyko 想要从角落 $(0,0)$ 走到 $(n,m)$，并且绝不接触任何一个矩形（甚至不能碰到它们）。如果他位于坐标 $(x,y)$，那么他一步可以移动到以下任意一个坐标：$(x-0.5,y)$、$(x+0.5,y)$、$(x,y-0.5)$、$(x,y+0.5)$，但前提是下一个坐标不能超出矩形的边界。\n\n请判断他能否从一个角落到达另一个角落。", "inputFormat": "-   第一行包含三个整数 $n$、$m$、$k$（$1 \\le n,m \\le 10^6, 1 \\le k \\le 5\\,000$）。\n-   接下来的 $k$ 行，每行包含四个整数 $x_1$、$y_1$、$x_2$、$y_2$（$0 \\le x_1 \\le x_2 \\le n; 0 \\le y_1 \\le y_2 \\le m$）——表示第 $i$ 个矩形的左上角和右下角坐标。\n\n保证没有矩形接触点 $(0,0)$ 和 $(n,m)$。", "outputFormat": "如果 Andriyko 可以在房间的两端之间移动，输出 `YES`；否则输出 `NO`。\n", "hint": "-   （$3$ 分）：$k = 1$\n-   （$4$ 分）：$k = 2$\n-   （$5$ 分）：$k = 3$\n-   （$17$ 分）：$1 \\le k \\le 50$\n-   （$26$ 分）：$1 \\le k \\le 1000$\n-   （$20$ 分）：$1 \\le n,m \\le 5000$\n-   （$25$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15059", "type": "P", "difficulty": 5, "samples": [["5\n5 3 1 5 3", "20"], ["7\n1 1 3 5 10 77 5", "174"], ["3\n1 2 3", "10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "2023", "UOI（乌克兰）"], "title": "[UOI 2023 II Stage] Product", "background": "", "description": "Given an array $a$ of length $n$. The cost of a subarray is defined as the product of the length of the subarray and the sum of its two smallest numbers.\n\nA subarray $a[l..r]$ is a part of the array $a$ that includes only the elements located at positions from $l$ to $r$, inclusive.\n\nFor example, let the array be $[5, 3, 1, 5, 3]$. Let us consider the subarray $a[2..4]$, which consists of elements ($a[2..4]$) $[3, 1, 5]$. Its length is $3$, its first minimum is $1$, and its second minimum is $3$. Therefore, its cost is $3 \\cdot (1 + 3) = 12$. Let us consider another subarray, $a[1..2]$, consisting of elements ($a[1..2]$) $[5, 3]$. Its length is $2$, its first minimum is $3$, and its second minimum is $5$. Therefore, its cost is $2 \\cdot (3 + 5) = 16$.\n\nNote that if the minimum number occurs more than once, it is counted several times. For example, if there is a subarray $[3, 1, 1]$, its length is $3$, its first minimum is $1$, and its second minimum is $1$. Therefore, its cost is $3 \\cdot (1 + 1) = 6$.\n\nYour task is to find the maximum cost over all subarrays of length at least two elements. That is, you need to find the maximum cost over all subarrays $a[l..r]$, where $(1 \\leq l < r \\leq n)$.", "inputFormat": "The first line contains a single integer $n$ $(2 \\le n \\le 10^6)$.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ $(1 \\le a_i \\le 10^9)$.", "outputFormat": "Output a single integer -- the answer to the problem.", "hint": "In the first example, the maximum cost is achieved for the subarray $a[1..5]$, its length is $5$, its minimums are $1$ and $3$, and the product of $(1+3) \\cdot 5 = 20$.\n\nIn the second example, the maximum cost is achieved for the subarray $a[5..6]$, its length is $2$, its minimums are $10$ and $77$, and the product of $(10+77) \\cdot 2=174$.\n\nIn the third example, the maximum cost is achieved for the subarray $a[2..3]$, its length is $2$, its minimums are $2$ and $3$, and the product of $(2+3) \\cdot 2=10$.\n\n### Scoring\n\n- ($6$ points): $2 \\le n \\le 800$\n- ($7$ points): $2 \\le n \\le 5\\,000$\n- ($10$ points): $2 \\le n \\le 20\\,000$\n- ($24$ points): All tests are generated randomly in the following way: first, a number $n$ is determined, which does not happen randomly, and then each $a_i$ ($1 \\le i  \\le n$ ) is assigned a value from $1$ to $10^9$ inclusively with equal probability for each value. $2 \\le n \\le 10^5$.\n- ($17$ points): $2 \\le a_i \\le \\sqrt{n}$\n- ($36$ points): No additional constraints.", "locale": "en", "translations": {"en": {"title": "[UOI 2023 II Stage] Product", "background": "", "description": "Given an array $a$ of length $n$. The cost of a subarray is defined as the product of the length of the subarray and the sum of its two smallest numbers.\n\nA subarray $a[l..r]$ is a part of the array $a$ that includes only the elements located at positions from $l$ to $r$, inclusive.\n\nFor example, let the array be $[5, 3, 1, 5, 3]$. Let us consider the subarray $a[2..4]$, which consists of elements ($a[2..4]$) $[3, 1, 5]$. Its length is $3$, its first minimum is $1$, and its second minimum is $3$. Therefore, its cost is $3 \\cdot (1 + 3) = 12$. Let us consider another subarray, $a[1..2]$, consisting of elements ($a[1..2]$) $[5, 3]$. Its length is $2$, its first minimum is $3$, and its second minimum is $5$. Therefore, its cost is $2 \\cdot (3 + 5) = 16$.\n\nNote that if the minimum number occurs more than once, it is counted several times. For example, if there is a subarray $[3, 1, 1]$, its length is $3$, its first minimum is $1$, and its second minimum is $1$. Therefore, its cost is $3 \\cdot (1 + 1) = 6$.\n\nYour task is to find the maximum cost over all subarrays of length at least two elements. That is, you need to find the maximum cost over all subarrays $a[l..r]$, where $(1 \\leq l < r \\leq n)$.", "inputFormat": "The first line contains a single integer $n$ $(2 \\le n \\le 10^6)$.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ $(1 \\le a_i \\le 10^9)$.", "outputFormat": "Output a single integer -- the answer to the problem.", "hint": "In the first example, the maximum cost is achieved for the subarray $a[1..5]$, its length is $5$, its minimums are $1$ and $3$, and the product of $(1+3) \\cdot 5 = 20$.\n\nIn the second example, the maximum cost is achieved for the subarray $a[5..6]$, its length is $2$, its minimums are $10$ and $77$, and the product of $(10+77) \\cdot 2=174$.\n\nIn the third example, the maximum cost is achieved for the subarray $a[2..3]$, its length is $2$, its minimums are $2$ and $3$, and the product of $(2+3) \\cdot 2=10$.\n\n### Scoring\n\n- ($6$ points): $2 \\le n \\le 800$\n- ($7$ points): $2 \\le n \\le 5\\,000$\n- ($10$ points): $2 \\le n \\le 20\\,000$\n- ($24$ points): All tests are generated randomly in the following way: first, a number $n$ is determined, which does not happen randomly, and then each $a_i$ ($1 \\le i  \\le n$ ) is assigned a value from $1$ to $10^9$ inclusively with equal probability for each value. $2 \\le n \\le 10^5$.\n- ($17$ points): $2 \\le a_i \\le \\sqrt{n}$\n- ($36$ points): No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[UOI 2023 II Stage] Product", "background": "", "description": "给定一个长度为 $n$ 的数组 $a$。一个子数组的成本定义为该子数组的长度与其两个最小数之和的乘积。\n\n子数组 $a[l..r]$ 是数组 $a$ 的一部分，仅包含位置从 $l$ 到 $r$（含）的元素。\n\n例如，设数组为 $[5, 3, 1, 5, 3]$。考虑子数组 $a[2..4]$，它由元素 $[3, 1, 5]$ 组成。其长度为 $3$，第一最小值为 $1$，第二最小值为 $3$。因此，其成本为 $3 \\cdot (1 + 3) = 12$。考虑另一个子数组 $a[1..2]$，由元素 $[5, 3]$ 组成。其长度为 $2$，第一最小值为 $3$，第二最小值为 $5$。因此，其成本为 $2 \\cdot (3 + 5) = 16$。\n\n注意，如果最小数出现多次，则会被多次计算。例如，如果有一个子数组 $[3, 1, 1]$，其长度为 $3$，第一最小值为 $1$，第二最小值为 $1$。因此，其成本为 $3 \\cdot (1 + 1) = 6$。\n\n你的任务是找出所有长度至少为两个元素的子数组中的最大成本。也就是说，你需要找出所有子数组 $a[l..r]$（其中 $(1 \\leq l < r \\leq n)$）的最大成本。", "inputFormat": "-   第一行包含一个整数 $n$（$2 \\le n \\le 10^6$）。\n-   第二行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$1 \\le a_i \\le 10^9$）。\n", "outputFormat": "输出一个整数——问题的答案。", "hint": "在第一个示例中，最大成本由子数组 $a[1..5]$ 达到，其长度为 $5$，最小值为 $1$ 和 $3$，乘积 $(1+3) \\cdot 5 = 20$。\n\n在第二个示例中，最大成本由子数组 $a[5..6]$ 达到，其长度为 $2$，最小值为 $10$ 和 $77$，乘积 $(10+77) \\cdot 2=174$。\n\n在第三个示例中，最大成本由子数组 $a[2..3]$ 达到，其长度为 $2$，最小值为 $2$ 和 $3$，乘积 $(2+3) \\cdot 2=10$。\n\n### 评分细则\n\n-   （$6$ 分）：$2 \\le n \\le 800$\n-   （$7$ 分）：$2 \\le n \\le 5\\,000$\n-   （$10$ 分）：$2 \\le n \\le 20\\,000$\n-   （$24$ 分）：所有测试用例按以下方式随机生成：首先确定一个数字 $n$（非随机），然后每个 $a_i$（$1 \\le i \\le n$）被赋予 $1$ 到 $10^9$ 之间的值，每个值等概率出现。$2 \\le n \\le 10^5$。\n-   （$17$ 分）：$2 \\le a_i \\le \\sqrt{n}$\n-   （$36$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15061", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [2000, 2000], "memory": [524288, 524288]}, "tags": ["交互题", "Special Judge", "Ad-hoc"], "title": "琥峪枫", "background": "不要 $\\texttt{\\#include \"tree.h\"}$。\n\n你需要在文件头加入以下内容，并且使用 C++17 或以上的语言规范提交本题：\n\n```c++\nlong long ask(int u, int d);\n```", "description": "**这是一道交互题。**\n\n给定一个正整数 $h$。我们令 $n=2^h-1$。\n\n交互库隐藏了一个 $1 \\sim n$ 的排列 $p$ 和一个长度为 $n$ 且每个元素均为不大于 $10^9$ 的**正整数**的序列 $f$。\n\n现在有一棵深度为 $h$，包含 $n$ 个结点的满二叉树 $G$，根结点为 $1$ 号结点。同时，对于任意一个满足 $2 \\le u \\le n$ 的结点 $u$，都满足其父亲结点为结点 $\\left\\lfloor\\dfrac u 2\\right\\rfloor$。\n\n每次询问，你可以选择两个满足 $1 \\le u \\le n$ 和 $1 \\le d \\le 10^9$ 的整数 $u,d$，交互库会返回所有满足 $\\operatorname{dis}(p_u,v)=d$ 的结点 $v$ 所对应的 $f_v$ 之和。特别的，若没有满足条件的结点 $v$，则交互库会返回 $0$。\n\n其中，$\\operatorname{dis}(u,v)$ 的值等于结点 $u$ 和结点 $v$ 之间的简单路径所包含的边的数量。特别的，$\\operatorname{dis}(u,u)=0$。\n\n你需要在不超过 $2hn$ 次询问内求出 $\\sum\\limits_{i=1}^n f_i$ 的值。选手得分与**单组测试数据询问次数**以及对于任意整数 $u$，**对整数 $\\boldsymbol u$ 进行询问的次数最大值**有关。\n\n**不**保证排列 $p$ 和序列 $f$ 是固定的，即**交互库可能是自适应的**。\n\n### 实现细节\n\n你需要实现以下函数：\n\n```cpp\nlong long solve(int subtask, int h);\n```\n\n- `subtask` 表示测试点编号；\n- $h$ 表示二叉树的高度；\n- 该函数需要返回 $\\sum\\limits_{i=1}^n f_i$ 的值；\n- 对于每个测试点，**该函数可能会被交互库调用多次**。\n\n选手可以通过调用以下函数向交互库发送一次询问：\n\n```cpp\nlong long ask(int u, int d);\n```\n\n- $u$ 表示询问的中心结点，你需要保证 $1 \\leq u \\leq n$；\n- $d$ 表示询问的距离限制，你需要保证 $1 \\leq d \\leq 10^9$；\n- 该函数将返回到点 $p_u$ 正好为 $d$ 的结点的 $f$ 值之和。\n\n题目保证在规定的操作次数限制下，交互库运行所需的时间不超过 $1$ 秒；交互库使用的内存大小固定，且不超过 $32 \\text{ MiB}$。\n\n### 交互示例\n\n假设 $h = 2$，$n = 3$，隐藏排列 $p = [2, 1, 3]$，结点权值 $f = [11, 45, 14]$，下面是一个合法的交互过程：\n\n|      选手程序       |       交互库       |                             说明                             |\n| :-----------------: | :----------------: | :----------------------------------------------------------: |\n|                     | 调用 `tree(1, 2)`  |                           开始测试                           |\n|  调用 `ask(1, 1)`   |     返回 $11$      | 距离 $p_1 = 2$ 正好为 $1$ 的点只有结点 $1$，权值总和为 $11$  |\n|  调用 `ask(2, 1)`   |     返回 $59$      | 距离 $p_1 = 1$ 正好为 $1$ 的点有结点 $2, 3$，权值总和为 $45 + 14 = 59$ |\n|  调用 `ask(3, 1)`   |     返回 $11$      | 距离 $p_1 = 3$ 正好为 $1$ 的点只有结点 $1$，权值总和为 $11$  |\n| 运行结束并返回 $70$ | 向屏幕打印交互结果 |                      交互结束，结果正确                      |", "inputFormat": null, "outputFormat": null, "hint": "### 数据范围\n\n对于所有测试数据保证：$2 \\leq h \\leq 15$，数据组数 $1 \\leq T \\leq 1\\,500$，所有数据中 $n$ 的和 $\\sum n$ 不超过 $10^6$。\n\n本题共 $2$ 个测试点，每个测试点的分值和数据范围见下表。\n\n| 测试点编号 | 分值 |             特殊性质             |\n| :--------: | :--: | :------------------------------: |\n|    $1$     | $10$ | 保证 $h = 2$，数据组数 $T = 100$ |\n|    $2$     | $90$ |            无特殊限制            |\n\n### 评分方式\n\n**本题首先会受到和传统相同的限制**，例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 $0$ 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n在每次 `solve` 函数调用中，程序使用的操作次数 $q$ 需要满足 $q \\leq 2hn$ 的限制，否则将会获得 $0$ 分。\n\n在上述条件基础上：\n\n- 在测试点 $1$ 中，程序得到满分当且仅当 `solve` 函数返回的答案正确；\n\n- 在测试点 $2$ 中，程序得到的分数将按照以下方式计算：\n\n  - 若 `solve` 函数返回的答案不正确，则获得 $0$ 分；\n  - 若 `solve` 函数返回的答案均正确，则对于该测试点的所有测试数据分别计分：设程序使用的操作次数为 $q$，对于任意整数 $u$，对整数 $u$ 进行询问的次数最大值为 $x$，则程序将获得 $f(q) - g(x)$ 分，其中 $f(q)$ 的计算方式为 $q$ 在下表中所有满足的条件中，对应分值的最大值：\n\n  |         条件         | 分值 |\n  | :------------------: | :--: |\n  |   $q \\leq 2n + 3$    | $90$ |\n  |   $q \\leq 2n + 4$    | $82$ |\n  |   $q \\leq 2n + 5$    | $76$ |\n  | $q \\leq 2n + h + 2$  | $72$ |\n  | $q \\leq 2n + h + 4$  | $69$ |\n  | $q \\leq 2n + 2h + 2$ | $66$ |\n  | $q \\leq 2n + 2h + 4$ | $63$ |\n  |   $q \\leq 3n + 3$    | $59$ |\n  |   $q \\leq 3n + 5$    | $56$ |\n  | $q \\leq 3n + h + 4$  | $53$ |\n  | $q \\leq 3n + 2h + 4$ | $50$ |\n  |   $q \\leq 4n + 3$    | $43$ |\n  |   $q \\leq 4n + 5$    | $40$ |\n  | $q \\leq 4n + h + 4$  | $37$ |\n  | $q \\leq 4n + 2h + 4$ | $34$ |\n  |     $q \\leq 2hn$     | $30$ |\n\n  其中 $g(x)$ 的计算方式如下表所示：\n\n  |   $x$    | $g(x)$ |\n  | :------: | :----: |\n  | $\\leq 4$ |  $0$   |\n  |  $= 5$   |  $10$  |\n  |  $= 6$   |  $15$  |\n  |  $> 6$   |  $20$  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "琥峪枫", "background": "不要 $\\texttt{\\#include \"tree.h\"}$。\n\n你需要在文件头加入以下内容，并且使用 C++17 或以上的语言规范提交本题：\n\n```c++\nlong long ask(int u, int d);\n```", "description": "**这是一道交互题。**\n\n给定一个正整数 $h$。我们令 $n=2^h-1$。\n\n交互库隐藏了一个 $1 \\sim n$ 的排列 $p$ 和一个长度为 $n$ 且每个元素均为不大于 $10^9$ 的**正整数**的序列 $f$。\n\n现在有一棵深度为 $h$，包含 $n$ 个结点的满二叉树 $G$，根结点为 $1$ 号结点。同时，对于任意一个满足 $2 \\le u \\le n$ 的结点 $u$，都满足其父亲结点为结点 $\\left\\lfloor\\dfrac u 2\\right\\rfloor$。\n\n每次询问，你可以选择两个满足 $1 \\le u \\le n$ 和 $1 \\le d \\le 10^9$ 的整数 $u,d$，交互库会返回所有满足 $\\operatorname{dis}(p_u,v)=d$ 的结点 $v$ 所对应的 $f_v$ 之和。特别的，若没有满足条件的结点 $v$，则交互库会返回 $0$。\n\n其中，$\\operatorname{dis}(u,v)$ 的值等于结点 $u$ 和结点 $v$ 之间的简单路径所包含的边的数量。特别的，$\\operatorname{dis}(u,u)=0$。\n\n你需要在不超过 $2hn$ 次询问内求出 $\\sum\\limits_{i=1}^n f_i$ 的值。选手得分与**单组测试数据询问次数**以及对于任意整数 $u$，**对整数 $\\boldsymbol u$ 进行询问的次数最大值**有关。\n\n**不**保证排列 $p$ 和序列 $f$ 是固定的，即**交互库可能是自适应的**。\n\n### 实现细节\n\n你需要实现以下函数：\n\n```cpp\nlong long solve(int subtask, int h);\n```\n\n- `subtask` 表示测试点编号；\n- $h$ 表示二叉树的高度；\n- 该函数需要返回 $\\sum\\limits_{i=1}^n f_i$ 的值；\n- 对于每个测试点，**该函数可能会被交互库调用多次**。\n\n选手可以通过调用以下函数向交互库发送一次询问：\n\n```cpp\nlong long ask(int u, int d);\n```\n\n- $u$ 表示询问的中心结点，你需要保证 $1 \\leq u \\leq n$；\n- $d$ 表示询问的距离限制，你需要保证 $1 \\leq d \\leq 10^9$；\n- 该函数将返回到点 $p_u$ 正好为 $d$ 的结点的 $f$ 值之和。\n\n题目保证在规定的操作次数限制下，交互库运行所需的时间不超过 $1$ 秒；交互库使用的内存大小固定，且不超过 $32 \\text{ MiB}$。\n\n### 交互示例\n\n假设 $h = 2$，$n = 3$，隐藏排列 $p = [2, 1, 3]$，结点权值 $f = [11, 45, 14]$，下面是一个合法的交互过程：\n\n|      选手程序       |       交互库       |                             说明                             |\n| :-----------------: | :----------------: | :----------------------------------------------------------: |\n|                     | 调用 `tree(1, 2)`  |                           开始测试                           |\n|  调用 `ask(1, 1)`   |     返回 $11$      | 距离 $p_1 = 2$ 正好为 $1$ 的点只有结点 $1$，权值总和为 $11$  |\n|  调用 `ask(2, 1)`   |     返回 $59$      | 距离 $p_1 = 1$ 正好为 $1$ 的点有结点 $2, 3$，权值总和为 $45 + 14 = 59$ |\n|  调用 `ask(3, 1)`   |     返回 $11$      | 距离 $p_1 = 3$ 正好为 $1$ 的点只有结点 $1$，权值总和为 $11$  |\n| 运行结束并返回 $70$ | 向屏幕打印交互结果 |                      交互结束，结果正确                      |", "inputFormat": null, "outputFormat": null, "hint": "### 数据范围\n\n对于所有测试数据保证：$2 \\leq h \\leq 15$，数据组数 $1 \\leq T \\leq 1\\,500$，所有数据中 $n$ 的和 $\\sum n$ 不超过 $10^6$。\n\n本题共 $2$ 个测试点，每个测试点的分值和数据范围见下表。\n\n| 测试点编号 | 分值 |             特殊性质             |\n| :--------: | :--: | :------------------------------: |\n|    $1$     | $10$ | 保证 $h = 2$，数据组数 $T = 100$ |\n|    $2$     | $90$ |            无特殊限制            |\n\n### 评分方式\n\n**本题首先会受到和传统相同的限制**，例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制都会导致相应测试点得 $0$ 分。选手只能在程序中访问自己定义的和交互库给出的变量或数据，及其相应的内存空间。尝试访问其他位置空间将可能导致编译错误或运行错误。\n\n在每次 `solve` 函数调用中，程序使用的操作次数 $q$ 需要满足 $q \\leq 2hn$ 的限制，否则将会获得 $0$ 分。\n\n在上述条件基础上：\n\n- 在测试点 $1$ 中，程序得到满分当且仅当 `solve` 函数返回的答案正确；\n\n- 在测试点 $2$ 中，程序得到的分数将按照以下方式计算：\n\n  - 若 `solve` 函数返回的答案不正确，则获得 $0$ 分；\n  - 若 `solve` 函数返回的答案均正确，则对于该测试点的所有测试数据分别计分：设程序使用的操作次数为 $q$，对于任意整数 $u$，对整数 $u$ 进行询问的次数最大值为 $x$，则程序将获得 $f(q) - g(x)$ 分，其中 $f(q)$ 的计算方式为 $q$ 在下表中所有满足的条件中，对应分值的最大值：\n\n  |         条件         | 分值 |\n  | :------------------: | :--: |\n  |   $q \\leq 2n + 3$    | $90$ |\n  |   $q \\leq 2n + 4$    | $82$ |\n  |   $q \\leq 2n + 5$    | $76$ |\n  | $q \\leq 2n + h + 2$  | $72$ |\n  | $q \\leq 2n + h + 4$  | $69$ |\n  | $q \\leq 2n + 2h + 2$ | $66$ |\n  | $q \\leq 2n + 2h + 4$ | $63$ |\n  |   $q \\leq 3n + 3$    | $59$ |\n  |   $q \\leq 3n + 5$    | $56$ |\n  | $q \\leq 3n + h + 4$  | $53$ |\n  | $q \\leq 3n + 2h + 4$ | $50$ |\n  |   $q \\leq 4n + 3$    | $43$ |\n  |   $q \\leq 4n + 5$    | $40$ |\n  | $q \\leq 4n + h + 4$  | $37$ |\n  | $q \\leq 4n + 2h + 4$ | $34$ |\n  |     $q \\leq 2hn$     | $30$ |\n\n  其中 $g(x)$ 的计算方式如下表所示：\n\n  |   $x$    | $g(x)$ |\n  | :------: | :----: |\n  | $\\leq 4$ |  $0$   |\n  |  $= 5$   |  $10$  |\n  |  $= 6$   |  $15$  |\n  |  $> 6$   |  $20$  |", "locale": "zh-CN"}}}
{"pid": "P15062", "type": "P", "difficulty": 1, "samples": [["1 2 0", "3"], ["9 6 3", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "UOI（乌克兰）"], "title": "[UOI 2024 II Stage] Shops", "background": "", "description": "Today is Friday. Anton is finally free from school for two days! Anton can go home in two ways:\n- by taking the first path, Anton can visit $a$ shops;\n- by taking the second path, Anton can visit $b$ shops.\n\nAnton also knows that there are $c$ shops that are encountered on both paths (in both places). Anton is curious about how many shops are there in his city in total? Let's assume that there are no more shops in the city except for these shops.\n\nHelp him answer this question.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zk6cmj6e.png)\n\nAbove is one of the possible route options in the second example.\n:::", "inputFormat": "The first line contains three integers $a$, $b$, $c$ ($0 \\le c \\le a, b \\le 100$) --- the number of shops on the first path, the second path, and on both.", "outputFormat": "Print a single integer --- the total number of shops in the city.", "hint": "", "locale": "en", "translations": {"en": {"title": "[UOI 2024 II Stage] Shops", "background": "", "description": "Today is Friday. Anton is finally free from school for two days! Anton can go home in two ways:\n- by taking the first path, Anton can visit $a$ shops;\n- by taking the second path, Anton can visit $b$ shops.\n\nAnton also knows that there are $c$ shops that are encountered on both paths (in both places). Anton is curious about how many shops are there in his city in total? Let's assume that there are no more shops in the city except for these shops.\n\nHelp him answer this question.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zk6cmj6e.png)\n\nAbove is one of the possible route options in the second example.\n:::", "inputFormat": "The first line contains three integers $a$, $b$, $c$ ($0 \\le c \\le a, b \\le 100$) --- the number of shops on the first path, the second path, and on both.", "outputFormat": "Print a single integer --- the total number of shops in the city.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[UOI 2024 II Stage] Shops", "background": "", "description": "今天是星期五。Anton 终于有两天的学校假期了！Anton 回家有两条路可走：\n- 走第一条路，Anton 可以经过 $a$ 家商店；\n- 走第二条路，Anton 可以经过 $b$ 家商店。\n\nAnton 还知道有 $c$ 家商店同时出现在两条路上（两处都有）。Anton 好奇他所在的城市总共有多少家商店？我们假设除了这些商店外，城市里没有其他商店。\n\n请帮助他回答这个问题。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/zk6cmj6e.png)\n\n上图是第二个示例中可能的路线方案之一。\n:::\n", "inputFormat": "第一行包含三个整数 $a$、$b$、$c$（$0 \\le c \\le a, b \\le 100$）——分别表示第一条路上的商店数、第二条路上的商店数以及两条路共有的商店数。", "outputFormat": "输出一个整数——城市中商店的总数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P15063", "type": "P", "difficulty": 2, "samples": [["0 0 0 0 0 2 0 0 0 0", "5 5"], ["1 0 1 1 0 0 0 0 0 0", "3 2 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2024", "Special Judge", "UOI（乌克兰）"], "title": "[UOI 2024 II Stage] Creating an Array", "background": "", "description": "Sofiia gave Anton an array of $\\textbf{digits}$! Although this array was not the first one he had seen, he did not consider it less interesting. After playing with the array, he did not notice how he broke it to a state where he could no longer restore the original.\n\nHe was very upset because there were almost countless ways to compose the initial array. However, he remembers an interesting property of the gift: $ \\sum_{i=1}^n \\sum_{j=i}^n \\operatorname{concat}(a_i, a_j)$, which means the sum of concatenations of all pairs of its elements, is \\textbf{maximum} among all possible arrays made from these digits consisting of the same elements, as the gift.\n\nIn other words, we take all pairs of positions $i$ and $j$ such that $j$ is not to the left of $i$ ($i \\le j$). And add to the sum $\\overline{a_i a_j}$, where $\\overline{ab}$ means the number that will result if we write the numbers $a$ and $b$ in order (or $10 \\cdot a + b$). This is called the concatenation of $a$ and $b$.\n\nFor example, if Anton had an array $[1,0,3]$, then the sum would be equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $11 + 10 + 13 + 00 + 03 + 33 = 70$.\n\nHelp Anton and print an array that has this property. If there are multiple answers, any of them can be output.", "inputFormat": "The first line contains $10$ integers $c_0, c_1, c_2, c_3, c_4, c_5, c_6, c_7, c_8, c_9$ ($0 \\le c_i \\le 50$) --- where $c_i$ corresponds to the number of digits $i$ in the initial array.\n\nIt is guaranteed that the sum of all numbers is greater than zero.", "outputFormat": "Print an array consisting of $c_0 + c_1 + c_2 + c_3 + c_4 + c_5 + c_6 + c_7 + c_8 + c_9$ elements, and has the same properties as the array given by Sophia.", "hint": "In the second example, there are such possible arrays:\n- $[0, 2, 3]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $00 + 02 + 03 + 22 + 23 + 33 = 83$;\n- $[0, 3, 2]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $00 + 03 + 02 + 33 + 32 + 22 = 92$;\n- $[2, 0, 3]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $22 + 20 + 23 + 00 + 03 + 33 = 101$;\n- $[2, 3, 0]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $22 + 23 + 20 + 33 + 30 + 00 = 128$;\n- $[3, 0, 2]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $33 + 30 + 32 + 00 + 02 + 22 = 119$;\n- $[3, 2, 0]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $33 + 32 + 30 + 22 + 20 + 00 = 137$.", "locale": "en", "translations": {"en": {"title": "[UOI 2024 II Stage] Creating an Array", "background": "", "description": "Sofiia gave Anton an array of $\\textbf{digits}$! Although this array was not the first one he had seen, he did not consider it less interesting. After playing with the array, he did not notice how he broke it to a state where he could no longer restore the original.\n\nHe was very upset because there were almost countless ways to compose the initial array. However, he remembers an interesting property of the gift: $ \\sum_{i=1}^n \\sum_{j=i}^n \\operatorname{concat}(a_i, a_j)$, which means the sum of concatenations of all pairs of its elements, is \\textbf{maximum} among all possible arrays made from these digits consisting of the same elements, as the gift.\n\nIn other words, we take all pairs of positions $i$ and $j$ such that $j$ is not to the left of $i$ ($i \\le j$). And add to the sum $\\overline{a_i a_j}$, where $\\overline{ab}$ means the number that will result if we write the numbers $a$ and $b$ in order (or $10 \\cdot a + b$). This is called the concatenation of $a$ and $b$.\n\nFor example, if Anton had an array $[1,0,3]$, then the sum would be equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $11 + 10 + 13 + 00 + 03 + 33 = 70$.\n\nHelp Anton and print an array that has this property. If there are multiple answers, any of them can be output.", "inputFormat": "The first line contains $10$ integers $c_0, c_1, c_2, c_3, c_4, c_5, c_6, c_7, c_8, c_9$ ($0 \\le c_i \\le 50$) --- where $c_i$ corresponds to the number of digits $i$ in the initial array.\n\nIt is guaranteed that the sum of all numbers is greater than zero.", "outputFormat": "Print an array consisting of $c_0 + c_1 + c_2 + c_3 + c_4 + c_5 + c_6 + c_7 + c_8 + c_9$ elements, and has the same properties as the array given by Sophia.", "hint": "In the second example, there are such possible arrays:\n- $[0, 2, 3]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $00 + 02 + 03 + 22 + 23 + 33 = 83$;\n- $[0, 3, 2]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $00 + 03 + 02 + 33 + 32 + 22 = 92$;\n- $[2, 0, 3]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $22 + 20 + 23 + 00 + 03 + 33 = 101$;\n- $[2, 3, 0]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $22 + 23 + 20 + 33 + 30 + 00 = 128$;\n- $[3, 0, 2]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $33 + 30 + 32 + 00 + 02 + 22 = 119$;\n- $[3, 2, 0]$, the sum is equal to $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $33 + 32 + 30 + 22 + 20 + 00 = 137$.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024 II Stage] Creating an Array", "background": "", "description": "Sofiia 给了 Anton 一个由**数字**组成的数组！尽管这个数组不是他见过的第一个，但他并未觉得它无趣。在摆弄这个数组的过程中，他不小心把它弄坏了，以至于无法再恢复原状。\n\n他非常沮丧，因为组成初始数组的方式几乎数不胜数。然而，他记得这份礼物的一个有趣性质：$ \\sum_{i=1}^n \\sum_{j=i}^n \\operatorname{concat}(a_i, a_j)$，即其所有元素对的连接之和，在由这些相同数字组成的所有可能数组中，是**最大**的。\n\n换句话说，我们取所有满足 $j$ 不在 $i$ 左边（$i \\le j$）的位置对 $i$ 和 $j$，并将 $\\overline{a_i a_j}$ 加到和中，其中 $\\overline{ab}$ 表示按顺序写下数字 $a$ 和 $b$ 所得到的数（即 $10 \\cdot a + b$）。这称为 $a$ 和 $b$ 的连接。\n\n例如，如果 Anton 的数组是 $[1,0,3]$，那么和等于 $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $11 + 10 + 13 + 00 + 03 + 33 = 70$。\n\n请帮助 Anton，输出一个具有此性质的数组。如果有多个答案，输出任意一个即可。", "inputFormat": "第一行包含 $10$ 个整数 $c_0, c_1, c_2, c_3, c_4, c_5, c_6, c_7, c_8, c_9$（$0 \\le c_i \\le 50$）——其中 $c_i$ 对应初始数组中数字 $i$ 的数量。\n\n保证所有数字之和大于零。", "outputFormat": "输出一个由 $c_0 + c_1 + c_2 + c_3 + c_4 + c_5 + c_6 + c_7 + c_8 + c_9$ 个元素组成的数组，且具有与 Sofiia 给出的数组相同的性质。", "hint": "在第二个示例中，存在以下可能的数组：\n- $[0, 2, 3]$，和为 $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $00 + 02 + 03 + 22 + 23 + 33 = 83$；\n- $[0, 3, 2]$，和为 $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $00 + 03 + 02 + 33 + 32 + 22 = 92$；\n- $[2, 0, 3]$，和为 $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $22 + 20 + 23 + 00 + 03 + 33 = 101$；\n- $[2, 3, 0]$，和为 $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $22 + 23 + 20 + 33 + 30 + 00 = 128$；\n- $[3, 0, 2]$，和为 $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $33 + 30 + 32 + 00 + 02 + 22 = 119$；\n- $[3, 2, 0]$，和为 $\\overline{a_1 a_1} + \\overline{a_1 a_2} + \\overline{a_1 a_3} + \\overline{a_2 a_2} + \\overline{a_2 a_3} + \\overline{a_3 a_3}$ = $33 + 32 + 30 + 22 + 20 + 00 = 137$。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15064", "type": "P", "difficulty": 3, "samples": [["3 2\n2 1 3", "3 3 6"], ["5 3\n5 3 1 4 2", "10 9 8 12 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "前缀和", "UOI（乌克兰）"], "title": "[UOI 2024 II Stage] Everyone Loves Permutations", "background": "", "description": "A permutation of length $n$ is an array of length $n$ containing all integers from $1$ to $n$, and all its elements are pairwise distinct.\n\nHaving grown up and played with arrays, Anton moved on to studying more interesting arrays --- permutations. While writing his thesis, he faced a very difficult task.\n\nHe has a permutation $p$ of length $n$ and an integer $k$. He decided to construct a two-dimensional array $a$ with sizes $(k+1) \\times n$.\n\n- $a_{0j}=j$ for all $j$ ($1 \\leq j \\leq n$);\n- $a_{ij}=a_{(i-1)p_j}$ for all $i$ ($1 \\leq i \\leq k$) and $j$ ($1 \\leq j \\leq n$).\n\nLet $p=[5, 3, 1, 4, 2]$ and $k=3$, then we have the following array.\n\n$$\n\\begin{array}{|c|c|c|c|c|c|} \n\\hline\na_{ij} & j=1 & j=2 & j=3 & j=4 & j=5 \\\\\n\\hline\\hline\ni=0 & 1 & 2 & 3 & 4 & 5 \\\\ \n\\hline\ni=1 & 5 & 3 & 1 & 4 & 2 \\\\\n\\hline\ni=2 & 2 & 1 & 5 & 4 & 3 \\\\\n\\hline\ni=3 & 3 & 5 & 2 & 4 & 1 \\\\\n\\hline\n\\end{array}\n$$\n\nFor each $x$ ($1 \\leq x \\leq n$), he wants to know the sum of all $j$ such that $a_{ij}=x$, where $1 \\leq i \\leq k$. In other words, he wants to find the sum of $k$ numbers --- the indices of the number $x$ in each $a_i$.\n\nConsider the last example. If $x=1$, the answer will be $3+2+5=10$.\n\nAfter some deliberation and simple ideas, Anton managed to solve this problem quickly. Now he wants to check if you can solve it too.", "inputFormat": "The first line of the input contains two integers $n$, $k$ ($1 \\le n \\le 10^6$, $1 \\le k \\le 10^9$) --- the length of the permutation and the number of repetitions of operations, respectively.\n\nThe second line contains the permutation $p$ ($1 \\le p_i \\le n$).", "outputFormat": "Print $n$ integers, where the $i$-th number is the answer for $x=i$.", "hint": "- ($8$ points): $k = 1$;\n- ($17$ points): $p_i = i$;\n- ($26$ points): $n \\le 2000, k \\le 2000$;\n- ($28$ points): $n \\le 2000$, for any $i$ and $j$, there exists a $k$ such that $p[p[p \\dots p[i] \\dots ]]=j$, where the nesting is taken $k$ times;\n- ($9$ points): for any $i$ and $j$, there exists a $k$ such that $p[p[p \\dots p[i] \\dots ]]=j$, where the nesting is taken $k$ times;\n- ($12$ points): without additional restrictions.", "locale": "en", "translations": {"en": {"title": "[UOI 2024 II Stage] Everyone Loves Permutations", "background": "", "description": "A permutation of length $n$ is an array of length $n$ containing all integers from $1$ to $n$, and all its elements are pairwise distinct.\n\nHaving grown up and played with arrays, Anton moved on to studying more interesting arrays --- permutations. While writing his thesis, he faced a very difficult task.\n\nHe has a permutation $p$ of length $n$ and an integer $k$. He decided to construct a two-dimensional array $a$ with sizes $(k+1) \\times n$.\n\n- $a_{0j}=j$ for all $j$ ($1 \\leq j \\leq n$);\n- $a_{ij}=a_{(i-1)p_j}$ for all $i$ ($1 \\leq i \\leq k$) and $j$ ($1 \\leq j \\leq n$).\n\nLet $p=[5, 3, 1, 4, 2]$ and $k=3$, then we have the following array.\n\n$$\n\\begin{array}{|c|c|c|c|c|c|} \n\\hline\na_{ij} & j=1 & j=2 & j=3 & j=4 & j=5 \\\\\n\\hline\\hline\ni=0 & 1 & 2 & 3 & 4 & 5 \\\\ \n\\hline\ni=1 & 5 & 3 & 1 & 4 & 2 \\\\\n\\hline\ni=2 & 2 & 1 & 5 & 4 & 3 \\\\\n\\hline\ni=3 & 3 & 5 & 2 & 4 & 1 \\\\\n\\hline\n\\end{array}\n$$\n\nFor each $x$ ($1 \\leq x \\leq n$), he wants to know the sum of all $j$ such that $a_{ij}=x$, where $1 \\leq i \\leq k$. In other words, he wants to find the sum of $k$ numbers --- the indices of the number $x$ in each $a_i$.\n\nConsider the last example. If $x=1$, the answer will be $3+2+5=10$.\n\nAfter some deliberation and simple ideas, Anton managed to solve this problem quickly. Now he wants to check if you can solve it too.", "inputFormat": "The first line of the input contains two integers $n$, $k$ ($1 \\le n \\le 10^6$, $1 \\le k \\le 10^9$) --- the length of the permutation and the number of repetitions of operations, respectively.\n\nThe second line contains the permutation $p$ ($1 \\le p_i \\le n$).", "outputFormat": "Print $n$ integers, where the $i$-th number is the answer for $x=i$.", "hint": "- ($8$ points): $k = 1$;\n- ($17$ points): $p_i = i$;\n- ($26$ points): $n \\le 2000, k \\le 2000$;\n- ($28$ points): $n \\le 2000$, for any $i$ and $j$, there exists a $k$ such that $p[p[p \\dots p[i] \\dots ]]=j$, where the nesting is taken $k$ times;\n- ($9$ points): for any $i$ and $j$, there exists a $k$ such that $p[p[p \\dots p[i] \\dots ]]=j$, where the nesting is taken $k$ times;\n- ($12$ points): without additional restrictions.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024 II Stage] Everyone Loves Permutations", "background": "", "description": "一个长度为 $n$ 的排列是一个包含 $1$ 到 $n$ 所有整数的数组，且其所有元素两两不同。\n\nAnton 在成长过程中玩过各种数组后，转向研究更有趣的数组——排列。在撰写论文时，他遇到了一个非常困难的问题。\n\n他有一个长度为 $n$ 的排列 $p$ 和一个整数 $k$。他决定构建一个大小为 $(k+1) \\times n$ 的二维数组 $a$。\n\n-   对所有 $j$（$1 \\leq j \\leq n$），$a_{0j}=j$；\n-   对所有 $i$（$1 \\leq i \\leq k$）和 $j$（$1 \\leq j \\leq n$），$a_{ij}=a_{(i-1)p_j}$。\n\n设 $p=[5, 3, 1, 4, 2]$ 且 $k=3$，则我们得到以下数组。\n\n$$\n\\begin{array}{|c|c|c|c|c|c|} \n\\hline\na_{ij} & j=1 & j=2 & j=3 & j=4 & j=5 \\\\\n\\hline\\hline\ni=0 & 1 & 2 & 3 & 4 & 5 \\\\ \n\\hline\ni=1 & 5 & 3 & 1 & 4 & 2 \\\\\n\\hline\ni=2 & 2 & 1 & 5 & 4 & 3 \\\\\n\\hline\ni=3 & 3 & 5 & 2 & 4 & 1 \\\\\n\\hline\n\\end{array}\n$$\n\n对于每个 $x$（$1 \\leq x \\leq n$），他想知道所有满足 $a_{ij}=x$ 的 $j$ 之和，其中 $1 \\leq i \\leq k$。换句话说，他想求 $k$ 个数的和——即 $x$ 在每个 $a_i$ 中的索引。\n\n考虑上一个例子。如果 $x=1$，答案将是 $3+2+5=10$。\n\n经过一番思考和简单思路，Anton 很快解决了这个问题。现在他想看看你是否也能解决它。", "inputFormat": "输入的第一行包含两个整数 $n$、$k$（$1 \\le n \\le 10^6$，$1 \\le k \\le 10^9$）——分别表示排列的长度和操作重复的次数。\n\n第二行包含排列 $p$（$1 \\le p_i \\le n$）。", "outputFormat": "输出 $n$ 个整数，其中第 $i$ 个数是 $x=i$ 的答案。\n", "hint": "-   （$8$ 分）：$k = 1$；\n-   （$17$ 分）：$p_i = i$；\n-   （$26$ 分）：$n \\le 2000, k \\le 2000$；\n-   （$28$ 分）：$n \\le 2000$，且对任意 $i$ 和 $j$，存在 $k$ 使得 $p[p[p \\dots p[i] \\dots ]]=j$，其中嵌套进行 $k$ 次；\n-   （$9$ 分）：对任意 $i$ 和 $j$，存在 $k$ 使得 $p[p[p \\dots p[i] \\dots ]]=j$，其中嵌套进行 $k$ 次；\n-   （$12$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15065", "type": "P", "difficulty": 3, "samples": [["3 4\nHF.F\n..HF\nFF.F", "2\n2 1\n2 2"], ["4 9\n......FFH\n.F..FHFF.\nHF.......\n.FHF..FFF", "2\n1 6\n3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "广度优先搜索 BFS", "UOI（乌克兰）"], "title": "[UOI 2024 II Stage] Mole", "background": "", "description": "After a difficult research, Anton decided to relax at his country house. He has a beautiful garden with many different flowers. But, oh no, upon arrival he saw a significant number of holes in the ground. It's a mole!\n\nNow, armed with a shovel, Anton will be waiting for the mole. The mole can emerge from any hole. Anton wants to choose a position so that in the worst case, he runs to the mole in the $\\textbf{minimum}$ amount of time.\n\nThe garden can be represented as a matrix $n \\times m$, where $n$ is the number of rows, and $m$ is the number of columns. Rows are numbered from top to bottom, from $1$ to $n$. Columns are numbered from left to right, from $1$ to $m$. Thus, the cell with index $(1;1)$ is located in the upper left corner.\n\nEach cell of the garden $a_{i, j}$ describes the state of this cell:\n- $a_{i, j}$ = $\\tt{.}$ --- this cell does not contain flowers or holes;\n- $a_{i, j}$ = $\\tt{F}$ --- this cell contains flowers;\n- $a_{i, j}$ = $\\tt{H}$ --- this cell contains a hole.\n\nAnton also knows that the number of holes does not exceed $100$.\n\nAs a person who has put a lot of time into these flowers, your heart cannot bear trampling on them. Therefore, you need to find a path in such a way that it does not pass through them.\n\nAt any moment in time, Anton can move from position $(x, y)$ to any of the following positions: $(x-1,y)$, $(x+1,y)$, $(x,y-1)$, $(x,y+1)$, provided that the new position does not contain flowers and is inside the garden.\n\nFind all positions ($x;y$) from which Anton will run to the moles in the worst case in the minimum amount of time.", "inputFormat": "The first line contains two integers $n$, $m$ ($1 \\le n \\cdot m \\le 2 \\cdot 10^5$) --- the length and width of the garden.\n\nThe next $n$ lines contain $m$ characters each --- the description of the garden.\n\nIt is guaranteed that from each cell that does not contain flowers, it is possible to reach any other cell that does not contain flowers by moving through cells that do not contain flowers.\n\nIt is guaranteed that there is at least one hole, and the number of holes in the garden does not exceed $100$.", "outputFormat": "In the first line, print a single integer $x$ ($1 \\leq x \\leq n \\cdot m$) --- the number of optimal positions.\n\nIn each of the next $x$ lines, print the optimal positions ($x;y$) for waiting for the mole ($1 \\le x \\le n$, $1 \\le y \\le m$).\n\nPositions can be printed in any order.", "hint": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/c812hr9c.png)\n:::\n\nLet $k$ be the number of holes in the garden.\n\n- ($6$ points): $n = 1, m = 2$;\n- ($9$ points): $n = 1$;\n- ($15$ points): $k = 1, n \\cdot m \\le 5 \\cdot 10^3$;\n- ($22$ points): $n \\cdot m \\le 5 \\cdot 10^3$;\n- ($17$ points): $k = 1$;\n- ($31$ points): without additional restrictions.", "locale": "en", "translations": {"en": {"title": "[UOI 2024 II Stage] Mole", "background": "", "description": "After a difficult research, Anton decided to relax at his country house. He has a beautiful garden with many different flowers. But, oh no, upon arrival he saw a significant number of holes in the ground. It's a mole!\n\nNow, armed with a shovel, Anton will be waiting for the mole. The mole can emerge from any hole. Anton wants to choose a position so that in the worst case, he runs to the mole in the $\\textbf{minimum}$ amount of time.\n\nThe garden can be represented as a matrix $n \\times m$, where $n$ is the number of rows, and $m$ is the number of columns. Rows are numbered from top to bottom, from $1$ to $n$. Columns are numbered from left to right, from $1$ to $m$. Thus, the cell with index $(1;1)$ is located in the upper left corner.\n\nEach cell of the garden $a_{i, j}$ describes the state of this cell:\n- $a_{i, j}$ = $\\tt{.}$ --- this cell does not contain flowers or holes;\n- $a_{i, j}$ = $\\tt{F}$ --- this cell contains flowers;\n- $a_{i, j}$ = $\\tt{H}$ --- this cell contains a hole.\n\nAnton also knows that the number of holes does not exceed $100$.\n\nAs a person who has put a lot of time into these flowers, your heart cannot bear trampling on them. Therefore, you need to find a path in such a way that it does not pass through them.\n\nAt any moment in time, Anton can move from position $(x, y)$ to any of the following positions: $(x-1,y)$, $(x+1,y)$, $(x,y-1)$, $(x,y+1)$, provided that the new position does not contain flowers and is inside the garden.\n\nFind all positions ($x;y$) from which Anton will run to the moles in the worst case in the minimum amount of time.", "inputFormat": "The first line contains two integers $n$, $m$ ($1 \\le n \\cdot m \\le 2 \\cdot 10^5$) --- the length and width of the garden.\n\nThe next $n$ lines contain $m$ characters each --- the description of the garden.\n\nIt is guaranteed that from each cell that does not contain flowers, it is possible to reach any other cell that does not contain flowers by moving through cells that do not contain flowers.\n\nIt is guaranteed that there is at least one hole, and the number of holes in the garden does not exceed $100$.", "outputFormat": "In the first line, print a single integer $x$ ($1 \\leq x \\leq n \\cdot m$) --- the number of optimal positions.\n\nIn each of the next $x$ lines, print the optimal positions ($x;y$) for waiting for the mole ($1 \\le x \\le n$, $1 \\le y \\le m$).\n\nPositions can be printed in any order.", "hint": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/c812hr9c.png)\n:::\n\nLet $k$ be the number of holes in the garden.\n\n- ($6$ points): $n = 1, m = 2$;\n- ($9$ points): $n = 1$;\n- ($15$ points): $k = 1, n \\cdot m \\le 5 \\cdot 10^3$;\n- ($22$ points): $n \\cdot m \\le 5 \\cdot 10^3$;\n- ($17$ points): $k = 1$;\n- ($31$ points): without additional restrictions.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024 II Stage] Mole", "background": null, "description": "经过一番艰苦的研究，Anton 决定去他的乡间别墅放松一下。他有一个美丽的花园，里面种着许多不同的花。但是，糟糕的是，他一到就发现地上有很多洞。是鼹鼠！\n\n现在，Anton 将手持铁锹等待鼹鼠的出现。鼹鼠可能从任何一个洞里钻出来。Anton 想要选择一个位置，使得在最坏情况下，他跑到鼹鼠那里所需的时间**最短**。\n\n花园可以表示为一个 $n \\times m$ 的矩阵，其中 $n$ 是行数，$m$ 是列数。行从上到下编号为 $1$ 到 $n$。列从左到右编号为 $1$ 到 $m$。因此，索引为 $(1;1)$ 的单元格位于左上角。\n\n花园的每个单元格 $a_{i, j}$ 描述了该单元格的状态：\n- $a_{i, j}$ = $\\tt{.}$ —— 该单元格没有花或洞；\n- $a_{i, j}$ = $\\tt{F}$ —— 该单元格有花；\n- $a_{i, j}$ = $\\tt{H}$ —— 该单元格有洞。\n\nAnton 还知道洞的数量不超过 $100$。\n\n作为一个在这些花上投入了大量时间的人，你不忍心践踏它们。因此，你需要找到一条不经过它们的路径。\n\n在任何时刻，Anton 可以从位置 $(x, y)$ 移动到以下任意一个位置：$(x-1,y)$、$(x+1,y)$、$(x,y-1)$、$(x,y+1)$，前提是新位置不包含花且在花园范围内。\n\n请找出所有位置 ($x,y$)，使得 Anton 在最坏情况下跑到鼹鼠那里所需的时间最短。", "inputFormat": "-   第一行包含两个整数 $n$、$m$（$1 \\le n \\cdot m \\le 2 \\cdot 10^5$）——花园的长度和宽度。\n-   接下来的 $n$ 行，每行包含 $m$ 个字符——花园的描述。\n\n保证从每个不包含花的单元格出发，可以通过不经过花的单元格到达任何其他不包含花的单元格。\n\n保证至少有一个洞，且花园中洞的数量不超过 $100$。", "outputFormat": "-   第一行输出一个整数 $x$（$1 \\leq x \\leq n \\cdot m$）——最优位置的数量。\n-   接下来的 $x$ 行，每行输出一个等待鼹鼠的最优位置 ($x;y$)（$1 \\le x \\le n$，$1 \\le y \\le m$）。\n\n位置可以按任意顺序输出。", "hint": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/c812hr9c.png)\n:::\n\n设 $k$ 为花园中洞的数量。\n\n-   （$6$ 分）：$n = 1, m = 2$；\n-   （$9$ 分）：$n = 1$；\n-   （$15$ 分）：$k = 1, n \\cdot m \\le 5 \\cdot 10^3$；\n-   （$22$ 分）：$n \\cdot m \\le 5 \\cdot 10^3$；\n-   （$17$ 分）：$k = 1$；\n-   （$31$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P15066", "type": "P", "difficulty": 6, "samples": [["3 2\n3 3 2\n1 3\n2 3", "18\n9"], ["8 6\n2 4 8 8 8 2 4 16\n1 8\n2 5\n3 4\n2 4\n7 7\n3 6", "256\n192\n128\n128\n16\n192"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2024", "UOI（乌克兰）"], "title": "[UOI 2024 II Stage] GCD, Sum, Multiply. What?...", "background": "", "description": "The author has used up all the creative skills on previous problems, so Anton won't be tortured in this statement. He will just give you an interesting problem.\n\nYou are given an array $a$ consisting of $n$ integers. You are also given $q$ queries $[l;r]$. For each query, find the maximum value of $\\operatorname{sum}[tl;tr] \\times \\operatorname{gcd}[tl;tr]$ over all pairs ($tl;tr$), where \n\n- $l \\le tl \\le tr \\le r$;\n- $\\operatorname{sum}[tl;tr]$ --- the sum of all numbers in the segment $[tl;tr]$;\n- $\\operatorname{gcd}[tl;tr]$ --- the greatest common divisor of all numbers in the segment $[tl;tr]$.\n\nThe greatest common divisor of two numbers $a$ and $b$ is the largest positive integer $x$ that divides both $a$ and $b$.\n\nThe greatest common divisor of a set of numbers is the largest positive integer $x$ that divides all elements of the set.\n", "inputFormat": "The first line contains two integers $n$, $q$ ($1 \\le n, q \\le 2 \\cdot 10^5$) --- the number of elements in the array and the number of queries, respectively.\n\nThe second line contains $n$ integers $a_i$ ($1 \\le a_i \\le 6 \\cdot 10^6$) --- the description of the array.\n\nEach of the next $q$ lines contains two integers $l$, $r$ ($1 \\le l \\le r \\le n$) --- the description of the queries.", "outputFormat": "Print $q$ integers --- the answers to the queries.", "hint": "In the first example, there are following segments:\n\n- $[1;1]$ --- $\\operatorname{sum}[1;1] \\times \\operatorname{gcd}[1;1]$ = $3 \\times 3$ = $9$;\n- $[1;2]$ --- $\\operatorname{sum}[1;2] \\times \\operatorname{gcd}[1;2]$ = $6 \\times 3$ = $18$;\n- $[1;3]$ --- $\\operatorname{sum}[1;3] \\times \\operatorname{gcd}[1;3]$ = $8 \\times 1$ = $8$;\n- $[2;2]$ --- $\\operatorname{sum}[2;2] \\times \\operatorname{gcd}[2;2]$ = $3 \\times 3$ = $9$;\n- $[2;3]$ --- $\\operatorname{sum}[2;3] \\times \\operatorname{gcd}[2;3]$ = $5 \\times 1$ = $5$;\n- $[3;3]$ --- $\\operatorname{sum}[3;3] \\times \\operatorname{gcd}[3;3]$ = $2 \\times 2$ = $4$.\n\n### Scoring\n\n- ($4$ points): $n \\le 3$;\n- ($8$ points): $n, q \\le 10^3$;\n- ($5$ points): $n \\le 10^3$;\n- ($17$ points): $n, q \\le 10^5$;\n- ($14$ points): $n \\le 10^5$;\n- ($5$ points): $a_i \\le 20$;\n- ($7$ points): $a_i \\le 10^3$;\n- ($16$ points): $l = 1$;\n- ($24$ points): no additional constraints.", "locale": "en", "translations": {"en": {"title": "[UOI 2024 II Stage] GCD, Sum, Multiply. What?...", "background": "", "description": "The author has used up all the creative skills on previous problems, so Anton won't be tortured in this statement. He will just give you an interesting problem.\n\nYou are given an array $a$ consisting of $n$ integers. You are also given $q$ queries $[l;r]$. For each query, find the maximum value of $\\operatorname{sum}[tl;tr] \\times \\operatorname{gcd}[tl;tr]$ over all pairs ($tl;tr$), where \n\n- $l \\le tl \\le tr \\le r$;\n- $\\operatorname{sum}[tl;tr]$ --- the sum of all numbers in the segment $[tl;tr]$;\n- $\\operatorname{gcd}[tl;tr]$ --- the greatest common divisor of all numbers in the segment $[tl;tr]$.\n\nThe greatest common divisor of two numbers $a$ and $b$ is the largest positive integer $x$ that divides both $a$ and $b$.\n\nThe greatest common divisor of a set of numbers is the largest positive integer $x$ that divides all elements of the set.\n", "inputFormat": "The first line contains two integers $n$, $q$ ($1 \\le n, q \\le 2 \\cdot 10^5$) --- the number of elements in the array and the number of queries, respectively.\n\nThe second line contains $n$ integers $a_i$ ($1 \\le a_i \\le 6 \\cdot 10^6$) --- the description of the array.\n\nEach of the next $q$ lines contains two integers $l$, $r$ ($1 \\le l \\le r \\le n$) --- the description of the queries.", "outputFormat": "Print $q$ integers --- the answers to the queries.", "hint": "In the first example, there are following segments:\n\n- $[1;1]$ --- $\\operatorname{sum}[1;1] \\times \\operatorname{gcd}[1;1]$ = $3 \\times 3$ = $9$;\n- $[1;2]$ --- $\\operatorname{sum}[1;2] \\times \\operatorname{gcd}[1;2]$ = $6 \\times 3$ = $18$;\n- $[1;3]$ --- $\\operatorname{sum}[1;3] \\times \\operatorname{gcd}[1;3]$ = $8 \\times 1$ = $8$;\n- $[2;2]$ --- $\\operatorname{sum}[2;2] \\times \\operatorname{gcd}[2;2]$ = $3 \\times 3$ = $9$;\n- $[2;3]$ --- $\\operatorname{sum}[2;3] \\times \\operatorname{gcd}[2;3]$ = $5 \\times 1$ = $5$;\n- $[3;3]$ --- $\\operatorname{sum}[3;3] \\times \\operatorname{gcd}[3;3]$ = $2 \\times 2$ = $4$.\n\n### Scoring\n\n- ($4$ points): $n \\le 3$;\n- ($8$ points): $n, q \\le 10^3$;\n- ($5$ points): $n \\le 10^3$;\n- ($17$ points): $n, q \\le 10^5$;\n- ($14$ points): $n \\le 10^5$;\n- ($5$ points): $a_i \\le 20$;\n- ($7$ points): $a_i \\le 10^3$;\n- ($16$ points): $l = 1$;\n- ($24$ points): no additional constraints.", "locale": "en"}, "zh-CN": {"title": "[UOI 2024 II Stage] GCD, Sum, Multiply. What?...", "background": "", "description": "出题人已将创意全数用于之前的题目，因此本题不会在题面上为难 Anton。他只是给你一个有趣的问题。\n\n给定一个由 $n$ 个整数组成的数组 $a$。同时给出 $q$ 个查询 $[l;r]$。对于每个查询，找出所有对 ($tl;tr$) 中 $\\operatorname{sum}[tl;tr] \\times \\operatorname{gcd}[tl;tr]$ 的最大值，其中\n\n- $l \\le tl \\le tr \\le r$；\n- $\\operatorname{sum}[tl;tr]$ —— 区间 $[tl;tr]$ 内所有数的和；\n- $\\operatorname{gcd}[tl;tr]$ —— 区间 $[tl;tr]$ 内所有数的最大公约数。\n\n两个数 $a$ 和 $b$ 的最大公约数是指能同时整除 $a$ 和 $b$ 的最大正整数 $x$。\n\n一组数的最大公约数是指能整除该组所有元素的最大正整数 $x$。", "inputFormat": "-   第一行包含两个整数 $n$、$q$（$1 \\le n, q \\le 2 \\cdot 10^5$）——分别表示数组的元素个数和查询个数。\n-   第二行包含 $n$ 个整数 $a_i$（$1 \\le a_i \\le 6 \\cdot 10^6$）——数组的描述。\n-   接下来的 $q$ 行，每行包含两个整数 $l$、$r$（$1 \\le l \\le r \\le n$）——查询的描述。\n", "outputFormat": "输出 $q$ 个整数——每个查询的答案。", "hint": "在第一个示例中，存在以下区间：\n\n- $[1;1]$ —— $\\operatorname{sum}[1;1] \\times \\operatorname{gcd}[1;1]$ = $3 \\times 3$ = $9$；\n- $[1;2]$ —— $\\operatorname{sum}[1;2] \\times \\operatorname{gcd}[1;2]$ = $6 \\times 3$ = $18$；\n- $[1;3]$ —— $\\operatorname{sum}[1;3] \\times \\operatorname{gcd}[1;3]$ = $8 \\times 1$ = $8$；\n- $[2;2]$ —— $\\operatorname{sum}[2;2] \\times \\operatorname{gcd}[2;2]$ = $3 \\times 3$ = $9$；\n- $[2;3]$ —— $\\operatorname{sum}[2;3] \\times \\operatorname{gcd}[2;3]$ = $5 \\times 1$ = $5$；\n- $[3;3]$ —— $\\operatorname{sum}[3;3] \\times \\operatorname{gcd}[3;3]$ = $2 \\times 2$ = $4$。\n\n### 评分细则\n\n-   （$4$ 分）：$n \\le 3$；\n-   （$8$ 分）：$n, q \\le 10^3$；\n-   （$5$ 分）：$n \\le 10^3$；\n-   （$17$ 分）：$n, q \\le 10^5$；\n-   （$14$ 分）：$n \\le 10^5$；\n-   （$5$ 分）：$a_i \\le 20$；\n-   （$7$ 分）：$a_i \\le 10^3$；\n-   （$16$ 分）：$l = 1$；\n-   （$24$ 分）：无额外限制。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
