{"pid": "P7870", "type": "P", "difficulty": 3, "samples": [["6\n1 1 14\n2 5\n1 14 19\n1 1 9\n2 8\n2 10", "60\n44\n124\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "洛谷原创", "栈", "洛谷月赛"], "title": "「Wdoi-4」兔已着陆", "background": "铃瑚和清兰是从月之都到达幻想乡的两只月兔。正因为降落到了幻想乡进行调查，因此她们通过开团子屋制作团子出售的方式，在幻想乡生活。\n\n为了应对越发繁荣的市场，她们向河城荷取购置了一台团子机器，可以高效地生产出五颜六色的团子。不同颜色的团子的售价不尽相同。由于每天顾客数量很多，购买的团子数量也不少，所以清兰总是搞不清楚一大堆团子的售价如何。\n\n清兰找到了你，希望你能告诉她每次售出团子时，这些团子的总价格。", "description": "清兰使用河童的机器可以生产出各种各样颜色的团子。她发现，**对于颜色为** $\\bm c$ **的团子，它的售价为** $\\bm c$。同时，团子机器有个特性，那就是生产出来的团子的颜色必然是一段连续的整数。\n\n为了储存已经生产出来的团子，清兰使用了一种类似于「栈」的结构。在一天的开始，这个栈为空栈。现在有 $n$ 次操作，分为两种：\n\n1. $\\colorbox{f0f0f0}{\\verb!1 l r!}$ ：团子机器生产出来了颜色为 $l,l+1,\\cdots r-1,r$ 的团子。清兰将这些团子**依次**入栈。也就是在栈顶依次加入 $l,l+1,l+2,\\cdots r-1,r$ 。\n2. $\\colorbox{f0f0f0}{\\verb!2 k!}$ ：有一位客人想要购买 $k$ 个团子。此时清兰会**依次**从栈顶取出 $k$ 个团子并售出。保证 $k$ 不大于当前栈内的团子个数。\n\n你要做的，就是对于每个操作 $2$ 输出这些团子的总价格。", "inputFormat": "第一行有一个整数 $n$，表示操作的个数。  \n接下来 $n$ 行描述一组询问。第一个整数 $op$ 表示询问的种类，若为 $1$ 则为操作 $1$，为 $2$ 则为操作 $2$。\n\n- 对于操作 $1$，接下来有两个整数 $l,r$，含义如题面所示。\n- 对于操作 $2$，接下来有一个整数 $k$，含义如题面所示。", "outputFormat": "若干行。对于每次操作 $2$，输出这些团子的售价之和。", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{stack2.in}/\\textit{stack2.out}}$。\n\n---\n\n### 数据范围\n\n- 对于前 $30\\%$ 的数据，$n,l,r\\le100$。\n- 对于另外 $20\\%$ 的数据，$l=r$。\n- 对于另外 $20\\%$ 的数据，$k\\le 10$。\n- 对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^5$，$0\\le l\\le r \\le 10^6$，$1\\le k \\le 10^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-4」兔已着陆", "background": "铃瑚和清兰是从月之都到达幻想乡的两只月兔。正因为降落到了幻想乡进行调查，因此她们通过开团子屋制作团子出售的方式，在幻想乡生活。\n\n为了应对越发繁荣的市场，她们向河城荷取购置了一台团子机器，可以高效地生产出五颜六色的团子。不同颜色的团子的售价不尽相同。由于每天顾客数量很多，购买的团子数量也不少，所以清兰总是搞不清楚一大堆团子的售价如何。\n\n清兰找到了你，希望你能告诉她每次售出团子时，这些团子的总价格。", "description": "清兰使用河童的机器可以生产出各种各样颜色的团子。她发现，**对于颜色为** $\\bm c$ **的团子，它的售价为** $\\bm c$。同时，团子机器有个特性，那就是生产出来的团子的颜色必然是一段连续的整数。\n\n为了储存已经生产出来的团子，清兰使用了一种类似于「栈」的结构。在一天的开始，这个栈为空栈。现在有 $n$ 次操作，分为两种：\n\n1. $\\colorbox{f0f0f0}{\\verb!1 l r!}$ ：团子机器生产出来了颜色为 $l,l+1,\\cdots r-1,r$ 的团子。清兰将这些团子**依次**入栈。也就是在栈顶依次加入 $l,l+1,l+2,\\cdots r-1,r$ 。\n2. $\\colorbox{f0f0f0}{\\verb!2 k!}$ ：有一位客人想要购买 $k$ 个团子。此时清兰会**依次**从栈顶取出 $k$ 个团子并售出。保证 $k$ 不大于当前栈内的团子个数。\n\n你要做的，就是对于每个操作 $2$ 输出这些团子的总价格。", "inputFormat": "第一行有一个整数 $n$，表示操作的个数。  \n接下来 $n$ 行描述一组询问。第一个整数 $op$ 表示询问的种类，若为 $1$ 则为操作 $1$，为 $2$ 则为操作 $2$。\n\n- 对于操作 $1$，接下来有两个整数 $l,r$，含义如题面所示。\n- 对于操作 $2$，接下来有一个整数 $k$，含义如题面所示。", "outputFormat": "若干行。对于每次操作 $2$，输出这些团子的售价之和。", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{stack2.in}/\\textit{stack2.out}}$。\n\n---\n\n### 数据范围\n\n- 对于前 $30\\%$ 的数据，$n,l,r\\le100$。\n- 对于另外 $20\\%$ 的数据，$l=r$。\n- 对于另外 $20\\%$ 的数据，$k\\le 10$。\n- 对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^5$，$0\\le l\\le r \\le 10^6$，$1\\le k \\le 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P7871", "type": "P", "difficulty": 4, "samples": [["10 4\n1 2\n3 7\n8 10\n5 6", "1 4 8 3 7 2 6 10 5 9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2021", "洛谷原创", "差分", "洛谷月赛"], "title": "「Wdoi-4」芙兰？姆Q！贤者与谜题", "background": "题目背景不包含解题的关键信息，可以跳过。\n\n---\n\n芙兰朵露·斯卡蕾特是曾居住在红魔馆地下室的吸血鬼。与众不同的是，芙兰朵露有着彩色结晶的特殊翅膀，与其他吸血鬼蝙蝠一般的翅膀不同：颜色各异的结晶按照顺序一字排开。\n\n芙兰朵露翅膀的彩色结晶的颜色从内到外分别是天蓝、蓝、紫、粉、橙、黄、淡绿和天蓝。因此事实上，芙兰朵露的翅膀很可能就是帕秋莉的「贤者之石」组成的。\n\n但是芙兰朵露并不关心这些，她只关心排列成翅膀形状的贤者之石之间发生的能量流动——如果一块贤者之石被赋予了能量，就会处于激发态。处于激发态的贤者之石很不稳定——它大量能量的爆发会波及周围的贤者之石，以造成能量的转移。\n\n芙兰朵露非常感兴趣，并以此出了一个谜题来考考帕秋莉。但是作为贤者的帕秋莉不想思考只想摸鱼，于是任务就交给你啦！![](https://www.luogu.com.cn/paste/tkub6dq3)", "description": "芙兰朵露从帕秋莉那里搞来了 $n$ 块贤者之石，并从左往右排成了一列。帕秋莉可以赋予每块贤者之石一定的能级，这会决定贤者之石之间能量的传递。值得注意的是，**能级必须要是正整数，并且不能有两块贤者之石能级相同**。\n\n如果第 $i$ 块贤者之石被赋予了能量（处于激发态），它就会将能量传递给第 $i-1$ 和第 $i+1$ 块里**能级较小**的那一块。特别地，如果某块贤者之石周围只有一块，那么它只会向这一块发送能量。注意，即使第 $i$ 块的能级低于第 $i-1$ 和第 $i+1$ 块，它**照样可以传输能量**。\n\n现在芙兰有 $q$ 个条件——每个条件给定两个正整数 $s,t$，表示如果芙兰激活了第 $s$ 块贤者之石的能量，那么能量最终会经过第 $t$ 块。\n\n然而由于帕秋莉有哮喘的老毛病，设定贤者之石的能级是很费力的。因此，如果存在一种合法的赋予贤者之石能级的方案，请你找出其中**字典序最小**的那个方案。对于两种方案 $A,B$，我们称 $A$ 的字典序小于 $B$，当且仅当存在一个 $p$，使得 $\\forall i<p$ 有 $A_i=B_i$，且 $A_p<B_p$。 \n\n如果存在合法方案，请你输出字典序最小的方案；否则输出 `QED`。", "inputFormat": "第一行有两个整数 $n,q$，表示贤者之石的块数和芙兰的条件个数。  \n接下来 $q$ 行，每行有两个整数 $s_i,t_i$，描述一组条件。", "outputFormat": "若不存在合法方案，输出 `QED`；否则输出 $n$ 个整数，表示字典序最小的那个方案。", "hint": "输入/输出样例 $2$ 见下发的附件 $\\textbf{\\textit{qed2.in}/\\textit{qed2.out}}$。\n\n输入/输出样例 $3$ 见下发的附件 $\\textbf{\\textit{qed3.in}/\\textit{qed3.out}}$。\n\n---\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，$0\\le q \\le 3\\times 10^5$，$3\\le n \\le 3\\times 10^5$，$1\\le s_i,t_i \\le n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{测试点} & \\bm{n\\le} & \\bm{q\\le} & \\textbf{特殊限制} \\cr \\hline\n1\\sim 3 & 7 & 7 & - \\cr \\hline\n4\\sim6 & 100 & 100 & - \\cr \\hline\n7 & 10^5 & 1 & -\\cr \\hline\n8\\sim 10 & 3\\times 10^5 & 3\\times 10^5 & s_i\\le t_i \\cr \\hline\n11\\sim 12 & 10^5 & 10 & - \\cr \\hline\n13\\sim 20 & 3\\times 10^5 & 3\\times 10^5 & -\\cr \\hline\n\\end{array}$$\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-4」芙兰？姆Q！贤者与谜题", "background": "题目背景不包含解题的关键信息，可以跳过。\n\n---\n\n芙兰朵露·斯卡蕾特是曾居住在红魔馆地下室的吸血鬼。与众不同的是，芙兰朵露有着彩色结晶的特殊翅膀，与其他吸血鬼蝙蝠一般的翅膀不同：颜色各异的结晶按照顺序一字排开。\n\n芙兰朵露翅膀的彩色结晶的颜色从内到外分别是天蓝、蓝、紫、粉、橙、黄、淡绿和天蓝。因此事实上，芙兰朵露的翅膀很可能就是帕秋莉的「贤者之石」组成的。\n\n但是芙兰朵露并不关心这些，她只关心排列成翅膀形状的贤者之石之间发生的能量流动——如果一块贤者之石被赋予了能量，就会处于激发态。处于激发态的贤者之石很不稳定——它大量能量的爆发会波及周围的贤者之石，以造成能量的转移。\n\n芙兰朵露非常感兴趣，并以此出了一个谜题来考考帕秋莉。但是作为贤者的帕秋莉不想思考只想摸鱼，于是任务就交给你啦！![](https://www.luogu.com.cn/paste/tkub6dq3)", "description": "芙兰朵露从帕秋莉那里搞来了 $n$ 块贤者之石，并从左往右排成了一列。帕秋莉可以赋予每块贤者之石一定的能级，这会决定贤者之石之间能量的传递。值得注意的是，**能级必须要是正整数，并且不能有两块贤者之石能级相同**。\n\n如果第 $i$ 块贤者之石被赋予了能量（处于激发态），它就会将能量传递给第 $i-1$ 和第 $i+1$ 块里**能级较小**的那一块。特别地，如果某块贤者之石周围只有一块，那么它只会向这一块发送能量。注意，即使第 $i$ 块的能级低于第 $i-1$ 和第 $i+1$ 块，它**照样可以传输能量**。\n\n现在芙兰有 $q$ 个条件——每个条件给定两个正整数 $s,t$，表示如果芙兰激活了第 $s$ 块贤者之石的能量，那么能量最终会经过第 $t$ 块。\n\n然而由于帕秋莉有哮喘的老毛病，设定贤者之石的能级是很费力的。因此，如果存在一种合法的赋予贤者之石能级的方案，请你找出其中**字典序最小**的那个方案。对于两种方案 $A,B$，我们称 $A$ 的字典序小于 $B$，当且仅当存在一个 $p$，使得 $\\forall i<p$ 有 $A_i=B_i$，且 $A_p<B_p$。 \n\n如果存在合法方案，请你输出字典序最小的方案；否则输出 `QED`。", "inputFormat": "第一行有两个整数 $n,q$，表示贤者之石的块数和芙兰的条件个数。  \n接下来 $q$ 行，每行有两个整数 $s_i,t_i$，描述一组条件。", "outputFormat": "若不存在合法方案，输出 `QED`；否则输出 $n$ 个整数，表示字典序最小的那个方案。", "hint": "输入/输出样例 $2$ 见下发的附件 $\\textbf{\\textit{qed2.in}/\\textit{qed2.out}}$。\n\n输入/输出样例 $3$ 见下发的附件 $\\textbf{\\textit{qed3.in}/\\textit{qed3.out}}$。\n\n---\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，$0\\le q \\le 3\\times 10^5$，$3\\le n \\le 3\\times 10^5$，$1\\le s_i,t_i \\le n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{测试点} & \\bm{n\\le} & \\bm{q\\le} & \\textbf{特殊限制} \\cr \\hline\n1\\sim 3 & 7 & 7 & - \\cr \\hline\n4\\sim6 & 100 & 100 & - \\cr \\hline\n7 & 10^5 & 1 & -\\cr \\hline\n8\\sim 10 & 3\\times 10^5 & 3\\times 10^5 & s_i\\le t_i \\cr \\hline\n11\\sim 12 & 10^5 & 10 & - \\cr \\hline\n13\\sim 20 & 3\\times 10^5 & 3\\times 10^5 & -\\cr \\hline\n\\end{array}$$\n", "locale": "zh-CN"}}}
{"pid": "P7872", "type": "P", "difficulty": 5, "samples": [["4 4\n0 4 5 3\n3 2 -1 2\n-1 3 -3 -1\n0 4 2 4\n3 3 4 4\n", "22\n"], ["8 8\n46 90 58 59 33 64 66 93\n52 25 91 51 96 11 21 6\n11 1 68 25 50 90 86 94\n73 83 48 80 46 46 81 16\n60 61 80 55 83 97 67 47\n78 96 59 96 39 7 94 66\n29 68 15 61 69 43 7 38\n31 29 67 79 71 17 0 97\n5 3 2 5\n", "509\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "2021", "洛谷原创", "洛谷月赛"], "title": "「Wdoi-4」觉姐姐和恋妹妹", "background": "古明地觉和古明地恋是居住在地灵殿的觉妖怪。古明地觉拥有读心程度的能力，但她的妹妹古明地恋却不具备读心能力。\n\n地灵殿是旧地狱上层的极为空旷的大型别墅建筑。正因如此，古明地恋经常在地灵殿里探索新奇好玩的东西。地灵殿可以被划分出好多好多的房间，每个房间里都有一个装饰物。在古明地恋眼里，每个装饰物都有一个新奇程度（特别地，新奇程度可能为负数，代表恋恋觉得这个物件非常枯燥无味）。\n\n喜欢闲逛的古明地恋，有一天想要探索整个地灵殿。作为姐姐的古明地觉，自然不希望恋恋会失望。也就是说，古明地觉可以通过搬运房间内的物件，移动到新的房间里，来提升恋恋整个游览过程的愉悦程度（即恋恋看到的所有物件的新奇程度之和）。\n\n然而，古明地觉向来是不擅长运动的，因此她不会走很长的路。你现在要做的，就是告诉古明地觉，经过她的清理后，恋恋最多可以获得的愉悦程度的最大值。", "description": "地灵殿可以看作有一个有 $n\\times m$ 间房间组成的矩阵，我们用 $(x,y)$ 描述一个房间的位置。其中，位于 $(i,j)$ 的房间里拥有的物件的新奇程度为 $w_{i,j}$，用一个整数表示（可能为负数）。古明地恋的愉悦度被定义为她看到的所有物件的新奇程度之和。\n\n打扫房间的古明地觉，将会从 $(1,1)$ 走到 $(x_s,y_s)$ 。期间，古明地觉**只能走到下侧或者右侧的房间**（假设古明地觉当前在 $(i,j)$，那么她下一步只能走到 $(i+1,j)$ 或者 $(i,j+1)$，并且她不会走出地灵殿）。古明地觉走到一个房间时，可以**捡起房间内的物件**放入背包；她也可以**从背包里取出任意若干件物件**放在该房间（可以既捡起物品又放置物品）。当然，古明地觉不希望带出地灵殿里的物件，因此**结束打扫时，觉的背包里应该没有物件**。初始时，背包为空。\n\n接下来，古明地恋将会从 $(1,1)$ 走到 $(x_k,y_k)$，进行自己的旅行。古明地恋将会看到一个房间里**所有的**物件，并且取得相应的新奇程度。和古明地觉相同，古明地恋**同样**只会向下侧或者右侧的房间行走。\n\n古明地觉想知道，按照这样的规则，恋恋最终得到的愉悦程度最大是多少。", "inputFormat": "第一行有两个正整数 $n,m$，描述地灵殿房间的规模。  \n接下来 $n$ 行，每行有 $m$ 个整数，其中第 $i$ 行第 $j$ 个整数 $w_{i,j}$ 描述房间 $(i,j)$ 内的物件的新奇程度。  \n接下来一行，输入四个正整数，依次为 $x_s,y_s,x_k,y_k$，意义同题目描述，代表觉与恋的终止位置。", "outputFormat": "输出一行，表示该组数据下古明地恋可以取得的最大愉悦程度。", "hint": "样例 $3$ 见下发的附件 $\\textbf{\\textit{koishi3.in}/\\textit{koishi3.out}}$。\n\n---\n\n### 样例解释\n\n#### 样例 1 解释\n\n- 古明地觉的行走路线是 $(1,1)\\to(2,1)\\to(2,2)\\to(2,3)\\to(3,3)$，**遇到**的物件的新奇程度分别是 $0,3,2,-1,-3$。期间，她把在 $(2,1)$ 拿起的价值为 $3$ 的物件放置在了 $(2,2)$。\n- 古明地恋的行走路线是 $(1,1)\\to(1,2)\\to(2,2)\\to(3,2)\\to(4,2)\\to(4,3)\\to(4,4)$，**看到**的物件的新奇程度分别是 $0,4,2+3,3,4,2,4$。加起来得到愉悦程度为 $22$。\n\n可以证明，不存在更优的方案。\n\n---\n\n### 数据范围及约定\n\n- 对于前 $10\\%$ 的数据，满足 $1\\le n,m\\le 3;|w_{i,j}|\\le 10$。\n- 对于前 $30\\%$ 的数据，满足 $1\\le n,m\\le 5;|w_{i,j}|\\le 10^2$。\n- 对于前 $60\\%$ 的数据，满足 $1\\le n,m\\le 70;|w_{i,j}|\\le 10^5$。\n- 另有 $15\\%$ 的数据，保证 $w_{i,j}$ 为**非负整数**。\n- 对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 300;|w_{i,j}|\\le 10^6$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-4」觉姐姐和恋妹妹", "background": "古明地觉和古明地恋是居住在地灵殿的觉妖怪。古明地觉拥有读心程度的能力，但她的妹妹古明地恋却不具备读心能力。\n\n地灵殿是旧地狱上层的极为空旷的大型别墅建筑。正因如此，古明地恋经常在地灵殿里探索新奇好玩的东西。地灵殿可以被划分出好多好多的房间，每个房间里都有一个装饰物。在古明地恋眼里，每个装饰物都有一个新奇程度（特别地，新奇程度可能为负数，代表恋恋觉得这个物件非常枯燥无味）。\n\n喜欢闲逛的古明地恋，有一天想要探索整个地灵殿。作为姐姐的古明地觉，自然不希望恋恋会失望。也就是说，古明地觉可以通过搬运房间内的物件，移动到新的房间里，来提升恋恋整个游览过程的愉悦程度（即恋恋看到的所有物件的新奇程度之和）。\n\n然而，古明地觉向来是不擅长运动的，因此她不会走很长的路。你现在要做的，就是告诉古明地觉，经过她的清理后，恋恋最多可以获得的愉悦程度的最大值。", "description": "地灵殿可以看作有一个有 $n\\times m$ 间房间组成的矩阵，我们用 $(x,y)$ 描述一个房间的位置。其中，位于 $(i,j)$ 的房间里拥有的物件的新奇程度为 $w_{i,j}$，用一个整数表示（可能为负数）。古明地恋的愉悦度被定义为她看到的所有物件的新奇程度之和。\n\n打扫房间的古明地觉，将会从 $(1,1)$ 走到 $(x_s,y_s)$ 。期间，古明地觉**只能走到下侧或者右侧的房间**（假设古明地觉当前在 $(i,j)$，那么她下一步只能走到 $(i+1,j)$ 或者 $(i,j+1)$，并且她不会走出地灵殿）。古明地觉走到一个房间时，可以**捡起房间内的物件**放入背包；她也可以**从背包里取出任意若干件物件**放在该房间（可以既捡起物品又放置物品）。当然，古明地觉不希望带出地灵殿里的物件，因此**结束打扫时，觉的背包里应该没有物件**。初始时，背包为空。\n\n接下来，古明地恋将会从 $(1,1)$ 走到 $(x_k,y_k)$，进行自己的旅行。古明地恋将会看到一个房间里**所有的**物件，并且取得相应的新奇程度。和古明地觉相同，古明地恋**同样**只会向下侧或者右侧的房间行走。\n\n古明地觉想知道，按照这样的规则，恋恋最终得到的愉悦程度最大是多少。", "inputFormat": "第一行有两个正整数 $n,m$，描述地灵殿房间的规模。  \n接下来 $n$ 行，每行有 $m$ 个整数，其中第 $i$ 行第 $j$ 个整数 $w_{i,j}$ 描述房间 $(i,j)$ 内的物件的新奇程度。  \n接下来一行，输入四个正整数，依次为 $x_s,y_s,x_k,y_k$，意义同题目描述，代表觉与恋的终止位置。", "outputFormat": "输出一行，表示该组数据下古明地恋可以取得的最大愉悦程度。", "hint": "样例 $3$ 见下发的附件 $\\textbf{\\textit{koishi3.in}/\\textit{koishi3.out}}$。\n\n---\n\n### 样例解释\n\n#### 样例 1 解释\n\n- 古明地觉的行走路线是 $(1,1)\\to(2,1)\\to(2,2)\\to(2,3)\\to(3,3)$，**遇到**的物件的新奇程度分别是 $0,3,2,-1,-3$。期间，她把在 $(2,1)$ 拿起的价值为 $3$ 的物件放置在了 $(2,2)$。\n- 古明地恋的行走路线是 $(1,1)\\to(1,2)\\to(2,2)\\to(3,2)\\to(4,2)\\to(4,3)\\to(4,4)$，**看到**的物件的新奇程度分别是 $0,4,2+3,3,4,2,4$。加起来得到愉悦程度为 $22$。\n\n可以证明，不存在更优的方案。\n\n---\n\n### 数据范围及约定\n\n- 对于前 $10\\%$ 的数据，满足 $1\\le n,m\\le 3;|w_{i,j}|\\le 10$。\n- 对于前 $30\\%$ 的数据，满足 $1\\le n,m\\le 5;|w_{i,j}|\\le 10^2$。\n- 对于前 $60\\%$ 的数据，满足 $1\\le n,m\\le 70;|w_{i,j}|\\le 10^5$。\n- 另有 $15\\%$ 的数据，保证 $w_{i,j}$ 为**非负整数**。\n- 对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 300;|w_{i,j}|\\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P7873", "type": "P", "difficulty": 2, "samples": [["0\n4\n5 3\n1 10\n17 1\n2 7", "YES\n100 99 97\n98 100 99\n95 97 100\n0 98 100\n99 99 99\nYES\n1 2 3 4 5 6 7 8 9 10\nNO\nYES\n95 99 76 88 87 51 49\n72 100 80 92 100 60 60"]], "limits": {"time": [200, 200, 200, 200, 200, 200], "memory": [16384, 16384, 16384, 16384, 16384, 16384]}, "tags": ["模拟", "2021", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「SWTR-7」Scores（easy version）", "background": "#### 本题是 Scores 的 easy 版本。注意题目限制与 [hard](https://www.luogu.com.cn/problem/P7876) 版本不同。\n\n#### 请注意特殊的时空限制，题目描述下方有简化题意。", "description": "小 A 的班上有 $n$ 个学生。最近他们进行了一场考试，共有 $m$ 个学科。第 $i$ 个学生第 $j$ 门学科的得分为**整数** $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。对于学生 $i$，如果**存在另一个**学生 $j$ 满足：学生 $i$ **每门学科的成绩都不大于**学生 $j$，学生 $i$ 就会感到失落。\n\n中秋节快到了，善良的小 A 不想让任何一个同学感到失落，他决定 hack 学校的管理系统，修改每一位同学的成绩。在做出这样危险的举动之前，小 A 希望知道自己能否达到目标。不过，由于学生和科目实在太多，他想请你帮助他构造出一种合法的方案。\n\n如果存在一张成绩表，满足没有任何一位同学感到失落，请先输出 $\\texttt{YES}$，再**任意**输出一种符合要求的成绩表；否则输出 $\\texttt{NO}$。\n\n---\n\n**「简化题意」**\n\n试构造一个 $n\\times m$ 的矩阵 $s$，满足所有元素为 $[0,100]$ 之间的整数，且对于任意 $i,j\\ (i\\neq j)$ 存在一个 $k$ 使得 $s_{i,k}>s_{j,k}$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，**表示该测试点编号**。  \n第二行一个整数 $T$，**表示数据组数**。\n\n对于每组数据：  \n一行两个整数 $n,m$。", "outputFormat": "对于每组数据：\n\n如果小 A 的要求无法实现，输出一行字符串 $\\texttt{NO}$。  \n否则先输出一行字符串 $\\texttt{YES}$，再输出 $n$ 行，每行 $m$ 个由空格隔开的整数，第 $i+1$ 行第 $j$ 个数表示 $s_{i,j}$。", "hint": "**「Special Judge」**\n\n**本题使用 Special Judge。请认真阅读输出格式，输出格式有误可能导致 UKE。**\n\nSPJ 首先会判断你的第一行输出是否与答案相同。  \n如果相同且答案为 $\\texttt{YES}$，则 SPJ 会判断你的输出是否符合小 A 的要求：\n\n- $0\\leq s_{i,j}\\leq 100$ 且 $s_{i,j}$ 为整数。\n- 每个学生至少有一个科目的成绩比另一个学生高。\n\n如果有解且你输出 $\\texttt{YES}$，但给出方案错误，你将获得该测试点 $50\\%$ 的分数。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（10 points）：$n=1$。\n- Testcase #2（10 points）：$m=1$。\n- Testcase #3（20 points）：$m=2$。\n- Testcase #4（30 points）：$n\\leq m$。\n- Testcase #5（29 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 100$，$T=20$（除 Testcase #0）。  \n对于所有测试点，**时间限制 200ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51774) A1。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」Scores（easy version）", "background": "#### 本题是 Scores 的 easy 版本。注意题目限制与 [hard](https://www.luogu.com.cn/problem/P7876) 版本不同。\n\n#### 请注意特殊的时空限制，题目描述下方有简化题意。", "description": "小 A 的班上有 $n$ 个学生。最近他们进行了一场考试，共有 $m$ 个学科。第 $i$ 个学生第 $j$ 门学科的得分为**整数** $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。对于学生 $i$，如果**存在另一个**学生 $j$ 满足：学生 $i$ **每门学科的成绩都不大于**学生 $j$，学生 $i$ 就会感到失落。\n\n中秋节快到了，善良的小 A 不想让任何一个同学感到失落，他决定 hack 学校的管理系统，修改每一位同学的成绩。在做出这样危险的举动之前，小 A 希望知道自己能否达到目标。不过，由于学生和科目实在太多，他想请你帮助他构造出一种合法的方案。\n\n如果存在一张成绩表，满足没有任何一位同学感到失落，请先输出 $\\texttt{YES}$，再**任意**输出一种符合要求的成绩表；否则输出 $\\texttt{NO}$。\n\n---\n\n**「简化题意」**\n\n试构造一个 $n\\times m$ 的矩阵 $s$，满足所有元素为 $[0,100]$ 之间的整数，且对于任意 $i,j\\ (i\\neq j)$ 存在一个 $k$ 使得 $s_{i,k}>s_{j,k}$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，**表示该测试点编号**。  \n第二行一个整数 $T$，**表示数据组数**。\n\n对于每组数据：  \n一行两个整数 $n,m$。", "outputFormat": "对于每组数据：\n\n如果小 A 的要求无法实现，输出一行字符串 $\\texttt{NO}$。  \n否则先输出一行字符串 $\\texttt{YES}$，再输出 $n$ 行，每行 $m$ 个由空格隔开的整数，第 $i+1$ 行第 $j$ 个数表示 $s_{i,j}$。", "hint": "**「Special Judge」**\n\n**本题使用 Special Judge。请认真阅读输出格式，输出格式有误可能导致 UKE。**\n\nSPJ 首先会判断你的第一行输出是否与答案相同。  \n如果相同且答案为 $\\texttt{YES}$，则 SPJ 会判断你的输出是否符合小 A 的要求：\n\n- $0\\leq s_{i,j}\\leq 100$ 且 $s_{i,j}$ 为整数。\n- 每个学生至少有一个科目的成绩比另一个学生高。\n\n如果有解且你输出 $\\texttt{YES}$，但给出方案错误，你将获得该测试点 $50\\%$ 的分数。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（10 points）：$n=1$。\n- Testcase #2（10 points）：$m=1$。\n- Testcase #3（20 points）：$m=2$。\n- Testcase #4（30 points）：$n\\leq m$。\n- Testcase #5（29 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 100$，$T=20$（除 Testcase #0）。  \n对于所有测试点，**时间限制 200ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51774) A1。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN"}}}
{"pid": "P7874", "type": "P", "difficulty": 3, "samples": [["0\n3\n4 2\n1 1 3 2\n8 3\n1 3 2 8 6 4 7 5\n40 10\n9843011 22841896 42690334 3412396 8420789 100693326 23390709 11537210 145661796 21418321 16914724 146120903 14287416 9157773 259599687 16469809 13371424 221660485 23554750 3004543 19382066 514113557 959488450 162305801 377127750 240963428 597774302 18789772 647693870 517468301 547221960 162988230 309004668 267293109 867629494 476230153 70400563 100943563 140708197 999999999\n", "2\n12\n5684074840"]], "limits": {"time": [200, 200, 200, 200, 200, 200], "memory": [16384, 16384, 16384, 16384, 16384, 16384]}, "tags": ["O2优化", "洛谷月赛"], "title": "「SWTR-7」My rating is -32（easy version）", "background": "#### 本题是 My rating is ... 的 easy 版本。注意题目限制和数据范围与 [hard](https://www.luogu.com.cn/problem/P7878) 版本不同。\n\n#### 请注意特殊的时空限制，题目描述下方有简化题意。\n\n[My rating is -32.](https://codeforces.com/blog/entry/71123)\n\n说明：上方的帖子是机房里某个同学很久很久以前的黑历史，现在成了机房传世经典，不是为了出比赛才发的，请不要误会。", "description": "小 A 想在 Codeforces 上发 $n$ 篇帖子！例如：\n\n> “My rating is 1064.”\n>\n> “I am PolarSea.”\n>\n> “你知道 phi 吗？你知道你的 phi 处是哪里吗？你知道它的 price 吗？1e9 + 7。”\n>\n>“每道题都很简单，全场虐题不用烦。T1 到场先签到，T2 上手随便切，T3 一交就能过，T4 稍想也能 A。DP 转移很容易，数学结论尽皆知。建图方法极明显，数据结构很一般。不卡空间不卡常，码量不大手不酸。没有毒瘤大模拟，只有良多大水题。片刻四题提交过，人人 AK 笑开颜。”\n>\n> “……”\n\n为此，小 A 新注册了 $k$ 个账号。他决定**按照从 $1$ 到 $n$ 的顺序**发出每篇帖子，并**用到所有 $k$ 个账号**。不过刷屏过多会引起 Mike 的注意并被封号，小 A 当然不希望这样：他进行了一些评估，得到了每篇帖子的安全指数 $a_i$，表示他发出第 $i$ 篇帖子后不被封号的概率。\n\n由于第一印象非常重要，小 A 定义一个账号的安全指数为该账号所发出的**第一篇**帖子的安全指数。此外，如果**用同一个账号连续发出两个帖子**，Mike 会立刻封掉这个账号，因此这种情况**是不合法的**。\n\n小 A 希望找到这样一个发帖方案，使得所有账号的安全指数之和最大。你只需要求出安全指数之和的最大值即可。\n\n---\n\n**「简化题意」**\n\n将 $1\\sim n$ **不重不漏**地分进 $k$ 个集合 $S_1,S_2,\\cdots,S_k$ 中，满足**相邻的数不在同一集合** 且 $|S_i|>0$。求 \n\n$$\\sum_{i=1}^k a[{\\min_{j\\in S_i}j}]$$\n\n的最大值，其中 $[]$ 表示**下标**。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，表示该测试点编号。  \n第二行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n,k$。  \n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个帖子的安全指数。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "**「样例 1 说明」**\n\n小 A 只能使用账号 $1$ 发帖子 $1$ 和 $3$，剩下的帖子用账号 $2$ 发。其安全程度为 $a_{\\min(1,3)}+a_{\\min(2,4)}=2$。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 points）：是样例。\n- Testcase #1（10 points）：$k=2$。\n- Testcase #2（30 points）：$n\\leq 10$，$k\\leq 4$。\n- Testcase #3（15 points）：$k=3$。\n- Testcase #4（20 points）：$n\\leq 64$，$k\\leq 7$。\n- Testcase #5（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\leq k \\leq n \\leq 10^4$，$0 \\leq a_i \\leq 10^9$，$T=10$。  \n对于所有测试点，**时间限制 200ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/) B1。  \nidea & solution：[tzc_wk](https://www.luogu.com.cn/user/115194)；data & 验题：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n\n> **My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. ……**\n>\n> **Upvote&emsp;-43&emsp;Downvote&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;PolarSea**  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」My rating is -32（easy version）", "background": "#### 本题是 My rating is ... 的 easy 版本。注意题目限制和数据范围与 [hard](https://www.luogu.com.cn/problem/P7878) 版本不同。\n\n#### 请注意特殊的时空限制，题目描述下方有简化题意。\n\n[My rating is -32.](https://codeforces.com/blog/entry/71123)\n\n说明：上方的帖子是机房里某个同学很久很久以前的黑历史，现在成了机房传世经典，不是为了出比赛才发的，请不要误会。", "description": "小 A 想在 Codeforces 上发 $n$ 篇帖子！例如：\n\n> “My rating is 1064.”\n>\n> “I am PolarSea.”\n>\n> “你知道 phi 吗？你知道你的 phi 处是哪里吗？你知道它的 price 吗？1e9 + 7。”\n>\n>“每道题都很简单，全场虐题不用烦。T1 到场先签到，T2 上手随便切，T3 一交就能过，T4 稍想也能 A。DP 转移很容易，数学结论尽皆知。建图方法极明显，数据结构很一般。不卡空间不卡常，码量不大手不酸。没有毒瘤大模拟，只有良多大水题。片刻四题提交过，人人 AK 笑开颜。”\n>\n> “……”\n\n为此，小 A 新注册了 $k$ 个账号。他决定**按照从 $1$ 到 $n$ 的顺序**发出每篇帖子，并**用到所有 $k$ 个账号**。不过刷屏过多会引起 Mike 的注意并被封号，小 A 当然不希望这样：他进行了一些评估，得到了每篇帖子的安全指数 $a_i$，表示他发出第 $i$ 篇帖子后不被封号的概率。\n\n由于第一印象非常重要，小 A 定义一个账号的安全指数为该账号所发出的**第一篇**帖子的安全指数。此外，如果**用同一个账号连续发出两个帖子**，Mike 会立刻封掉这个账号，因此这种情况**是不合法的**。\n\n小 A 希望找到这样一个发帖方案，使得所有账号的安全指数之和最大。你只需要求出安全指数之和的最大值即可。\n\n---\n\n**「简化题意」**\n\n将 $1\\sim n$ **不重不漏**地分进 $k$ 个集合 $S_1,S_2,\\cdots,S_k$ 中，满足**相邻的数不在同一集合** 且 $|S_i|>0$。求 \n\n$$\\sum_{i=1}^k a[{\\min_{j\\in S_i}j}]$$\n\n的最大值，其中 $[]$ 表示**下标**。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，表示该测试点编号。  \n第二行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n,k$。  \n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个帖子的安全指数。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "**「样例 1 说明」**\n\n小 A 只能使用账号 $1$ 发帖子 $1$ 和 $3$，剩下的帖子用账号 $2$ 发。其安全程度为 $a_{\\min(1,3)}+a_{\\min(2,4)}=2$。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 points）：是样例。\n- Testcase #1（10 points）：$k=2$。\n- Testcase #2（30 points）：$n\\leq 10$，$k\\leq 4$。\n- Testcase #3（15 points）：$k=3$。\n- Testcase #4（20 points）：$n\\leq 64$，$k\\leq 7$。\n- Testcase #5（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\leq k \\leq n \\leq 10^4$，$0 \\leq a_i \\leq 10^9$，$T=10$。  \n对于所有测试点，**时间限制 200ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/) B1。  \nidea & solution：[tzc_wk](https://www.luogu.com.cn/user/115194)；data & 验题：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n\n> **My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. ……**\n>\n> **Upvote&emsp;-43&emsp;Downvote&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;PolarSea**  ", "locale": "zh-CN"}}}
{"pid": "P7875", "type": "P", "difficulty": 4, "samples": [["0\n5 2\n2 3 5 7 8\n1 5 3\n2 4 2\n", "499122189"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "概率论", "期望", "洛谷月赛"], "title": "「SWTR-7」IOI 2077", "background": "#### 友情提醒：本题输入输出量很大，请不要使用 cin 或 scanf。题目最下方附有快读及其使用方法。\n\n#### 赛时提醒：若对于选出的 $m$ 无解，则期望值为 $0$。可以结合样例 2 的解释说明以更好理解。\n\n#### 赛时提醒：你需要求的是能力值之和的期望而不是最大值。\n\n---\n\n小 A 被 FCC 钦定参加 IOI 2077！71 岁老将请求出战！", "description": "IOI 2077 有 $n$ 位**候选**参赛者，他们分别编号为 $1\\sim n$。每位候选参赛者都有一个能力值，且**能力值互不相等**，第 $i$ 位候选参赛者的能力值为 $a_i$。小 A 更喜欢有序的数字，所以他将这 $n$ 位候选参赛者按照能力值**从小到大**排好了序，即**满足 $a_i<a_{i+1}\\ (1\\leq i<n)$。**\n\n正式参赛者将会从这 $n$ 位候选参赛者中产生。具体地，所有参赛者将是候选参赛者的一个子串 $[l,r]$，即编号为 $l,l+1,\\cdots,r$ 的选手将参加 IOI 2077，其中，小 A 的编号为 $k$。因为他知道自己被钦定参加 IOI 2077，所以 $l\\leq k\\leq r$。可能的参赛者一共有 $q$ 种情况，每种情况用三个数 $l_i,r_i,k_i\\ (l_i\\leq k_i\\leq r_i)$ 描述，即参赛者为编号在区间 $[l_i,r_i]$ 中的候选参赛者，而小 A 的编号为 $k_i$。\n\n由于自己太菜，小 A 对即将到来的 IOI 感到力不从心。他决定选择一些参赛者作为队友，并与他们在赛场上相互帮（zuo）助（bi）。具体地，设正式参赛人数为 $s$，那么小 A 会在 $[0,\\lfloor\\frac{s-1}{2}\\rfloor]$ 中**等概率随机**选择一个数 $m$，并从 $s$ 位参赛者中**随机**选出 $2m$ 个作为他的队友。不过，小 A 不希望自己显得太菜，所以**他的能力值 $a_k$ 必须是这 $2m+1$ 个人的能力值的中位数**。\n\n俗话说，人多力量大，小 A 希望他与所有选出的队友的能力值之和尽量地大。**不过在此之前，他想知道这个值的期望值是多少**。请对 $998244353$ 取模，保证答案在该模数下有意义。**对于每一种可能的参赛者情况，你都需计算该情况下的答案。为了避免过大的输出，你只需要计算所有答案的异或和。**", "inputFormat": "第一行一个整数 $t$，**表示该测试点 Subtask 编号。**  \n第二行两个整数 $n,q$，分别表示候选参赛者个数和情况总数。  \n第三行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个候选参赛者的能力值。**保证 $a_i$ 递增。**  \n接下来 $q$ 行，每行三个整数 $l_i,r_i,k_i$ 描述一个可能的参赛者情况。", "outputFormat": "输出一行一个整数，表示所有答案的异或和。", "hint": "**「样例 1 说明」**\n\n- 第 1 个询问：  \n  因为 $s_1=r_1-l_1+1=5$，所以 $m$ 可以为 $0,1$ 或 $2$。  \n  $m=0$ 时：小 A 没有队友，那么期望值就是他自身的能力值 $a_{k_1}=a_3=5$。    \n  $m=1$ 时：小 A 可以选**编号** $(1, 4)$ 或 $(1, 5)$ 或 $(2, 4)$ 或 $(2, 5)$ 的参赛者作为他的队友，能力值之和分别为 $14,15,15,16$，期望值为 $\\frac{14+15+15+16}{4}=15$。    \n  $m=2$ 时：小 A 只能全选，期望值为 $2+3+5+7+8=25$。  \n\t综上，期望值为 $\\frac{5+15+25}{3}=15$。\n\n- 第 2 个询问：  \n  因为 $s_2=r_2-l_2+1=3$，所以 $m$ 可以为 $0$ 或 $1$。  \n  $m=0$ 时，小 A 没有队友，期望值为 $3$。    \n  $m=1$ 时，小 A 无法选择，期望值为 $0$。  \n  综上，期望值为 $\\frac{3+0}{2}=\\frac{3}{2}$，对 $998244353$ 取模后为 $499122178$。\n  \n$15\\oplus499122178=499122189$。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n记 $s_i=r_i-l_i+1$。\n\n- Subtask #0（1 point）：是样例。\n- Subtask #1（10 points）：$s_i\\leq 2$。\n- Subtask #2（20 points）：$s_i\\leq 16$，$q\\leq 40$，$n\\leq 640$。\n- Subtask #3（15 points）：$s_i,q\\leq 500$，$n\\leq 10^5$。\n- Subtask #4（15 points）：$s_i,q\\leq 3\\times 10^3$，$n\\leq 10^5$。\n- Subtask #5（15 points）：$s_i,q\\leq 2\\times 10^5$，$n\\leq 5\\times 10^5$。\n- Subtask #6（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,q\\leq 2\\times 10^6$，$1\\leq l_i\\leq k_i\\leq r_i\\leq n$，$1 \\le a_i \\le 998244352$，$a_i<a_{i+1}\\ (1\\leq i<n)$。\n\n对于所有测试点，时间限制 1s，空间限制 512MB。\n\n**「帮助/提示」**\n\n关于 [有理数取余](https://www.luogu.com.cn/problem/P2613)，[中位数](https://baike.baidu.com/item/%E4%B8%AD%E4%BD%8D%E6%95%B0/3087401?fr=aladdin)。\n\n本题输入输出量**极大**，**请注意 I/O 优化。**  \n本题提供**有符号 32 位整数**快读模板，保证读入用时不超过 250ms：\n\n```cpp\n#define gc getchar()\ninline int read(){\n\tint x=0; bool sgn=0; char s=gc;\n\twhile(!isdigit(s))sgn|=s=='-',s=gc;\n\twhile(isdigit(s))x=(x<<1)+(x<<3)+(s-'0'),s=gc;\n\treturn sgn?-x:x;\n}\n\n// 如果需要读入直接调用 read() 即可。\n// 一个例子（与正解无关，仅供参考）：\n\nint t=read(),n=read(),q=read();\nint a[2000005],l[2000005],r[2000005],k[2000005];\nfor(int i=1;i<=n;i++)a[i]=read();\nfor(int i=1;i<=q;i++)l[i]=read(),r[i]=read(),k[i]=read();\n\n// 这样你就可以在 250ms 内读入全部数据了。\n```\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) C。  \nidea & solution：[SSerWarriors_Cat](https://www.luogu.com.cn/user/147999)；data：[Alex_Wei](https://www.luogu.com.cn/user/123294) ；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n---\n\nIOI 2077 落下帷幕，小 A 凭借出（dui）色（you）的发（bang）挥（zhu）成功 AK 了 IOI，这不禁让他回想起曾经满腔热血的自己，以及和他共同奋斗在 OI 路上的战友们。如今他们虽已天各一方，说起来也有十几年没见过面了，但他们真挚的友谊未曾淡去，也将永远不会褪色。\n\n>*“爷爷，您手机里有段录音，还写着 'ycx txdy!'。”*  \n>*“哦，是嘛？放出来听听。”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you are vegetable chickens.”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you are vegetable chickens.”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you ............”*\n\n2077.7.7", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」IOI 2077", "background": "#### 友情提醒：本题输入输出量很大，请不要使用 cin 或 scanf。题目最下方附有快读及其使用方法。\n\n#### 赛时提醒：若对于选出的 $m$ 无解，则期望值为 $0$。可以结合样例 2 的解释说明以更好理解。\n\n#### 赛时提醒：你需要求的是能力值之和的期望而不是最大值。\n\n---\n\n小 A 被 FCC 钦定参加 IOI 2077！71 岁老将请求出战！", "description": "IOI 2077 有 $n$ 位**候选**参赛者，他们分别编号为 $1\\sim n$。每位候选参赛者都有一个能力值，且**能力值互不相等**，第 $i$ 位候选参赛者的能力值为 $a_i$。小 A 更喜欢有序的数字，所以他将这 $n$ 位候选参赛者按照能力值**从小到大**排好了序，即**满足 $a_i<a_{i+1}\\ (1\\leq i<n)$。**\n\n正式参赛者将会从这 $n$ 位候选参赛者中产生。具体地，所有参赛者将是候选参赛者的一个子串 $[l,r]$，即编号为 $l,l+1,\\cdots,r$ 的选手将参加 IOI 2077，其中，小 A 的编号为 $k$。因为他知道自己被钦定参加 IOI 2077，所以 $l\\leq k\\leq r$。可能的参赛者一共有 $q$ 种情况，每种情况用三个数 $l_i,r_i,k_i\\ (l_i\\leq k_i\\leq r_i)$ 描述，即参赛者为编号在区间 $[l_i,r_i]$ 中的候选参赛者，而小 A 的编号为 $k_i$。\n\n由于自己太菜，小 A 对即将到来的 IOI 感到力不从心。他决定选择一些参赛者作为队友，并与他们在赛场上相互帮（zuo）助（bi）。具体地，设正式参赛人数为 $s$，那么小 A 会在 $[0,\\lfloor\\frac{s-1}{2}\\rfloor]$ 中**等概率随机**选择一个数 $m$，并从 $s$ 位参赛者中**随机**选出 $2m$ 个作为他的队友。不过，小 A 不希望自己显得太菜，所以**他的能力值 $a_k$ 必须是这 $2m+1$ 个人的能力值的中位数**。\n\n俗话说，人多力量大，小 A 希望他与所有选出的队友的能力值之和尽量地大。**不过在此之前，他想知道这个值的期望值是多少**。请对 $998244353$ 取模，保证答案在该模数下有意义。**对于每一种可能的参赛者情况，你都需计算该情况下的答案。为了避免过大的输出，你只需要计算所有答案的异或和。**", "inputFormat": "第一行一个整数 $t$，**表示该测试点 Subtask 编号。**  \n第二行两个整数 $n,q$，分别表示候选参赛者个数和情况总数。  \n第三行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个候选参赛者的能力值。**保证 $a_i$ 递增。**  \n接下来 $q$ 行，每行三个整数 $l_i,r_i,k_i$ 描述一个可能的参赛者情况。", "outputFormat": "输出一行一个整数，表示所有答案的异或和。", "hint": "**「样例 1 说明」**\n\n- 第 1 个询问：  \n  因为 $s_1=r_1-l_1+1=5$，所以 $m$ 可以为 $0,1$ 或 $2$。  \n  $m=0$ 时：小 A 没有队友，那么期望值就是他自身的能力值 $a_{k_1}=a_3=5$。    \n  $m=1$ 时：小 A 可以选**编号** $(1, 4)$ 或 $(1, 5)$ 或 $(2, 4)$ 或 $(2, 5)$ 的参赛者作为他的队友，能力值之和分别为 $14,15,15,16$，期望值为 $\\frac{14+15+15+16}{4}=15$。    \n  $m=2$ 时：小 A 只能全选，期望值为 $2+3+5+7+8=25$。  \n\t综上，期望值为 $\\frac{5+15+25}{3}=15$。\n\n- 第 2 个询问：  \n  因为 $s_2=r_2-l_2+1=3$，所以 $m$ 可以为 $0$ 或 $1$。  \n  $m=0$ 时，小 A 没有队友，期望值为 $3$。    \n  $m=1$ 时，小 A 无法选择，期望值为 $0$。  \n  综上，期望值为 $\\frac{3+0}{2}=\\frac{3}{2}$，对 $998244353$ 取模后为 $499122178$。\n  \n$15\\oplus499122178=499122189$。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n记 $s_i=r_i-l_i+1$。\n\n- Subtask #0（1 point）：是样例。\n- Subtask #1（10 points）：$s_i\\leq 2$。\n- Subtask #2（20 points）：$s_i\\leq 16$，$q\\leq 40$，$n\\leq 640$。\n- Subtask #3（15 points）：$s_i,q\\leq 500$，$n\\leq 10^5$。\n- Subtask #4（15 points）：$s_i,q\\leq 3\\times 10^3$，$n\\leq 10^5$。\n- Subtask #5（15 points）：$s_i,q\\leq 2\\times 10^5$，$n\\leq 5\\times 10^5$。\n- Subtask #6（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,q\\leq 2\\times 10^6$，$1\\leq l_i\\leq k_i\\leq r_i\\leq n$，$1 \\le a_i \\le 998244352$，$a_i<a_{i+1}\\ (1\\leq i<n)$。\n\n对于所有测试点，时间限制 1s，空间限制 512MB。\n\n**「帮助/提示」**\n\n关于 [有理数取余](https://www.luogu.com.cn/problem/P2613)，[中位数](https://baike.baidu.com/item/%E4%B8%AD%E4%BD%8D%E6%95%B0/3087401?fr=aladdin)。\n\n本题输入输出量**极大**，**请注意 I/O 优化。**  \n本题提供**有符号 32 位整数**快读模板，保证读入用时不超过 250ms：\n\n```cpp\n#define gc getchar()\ninline int read(){\n\tint x=0; bool sgn=0; char s=gc;\n\twhile(!isdigit(s))sgn|=s=='-',s=gc;\n\twhile(isdigit(s))x=(x<<1)+(x<<3)+(s-'0'),s=gc;\n\treturn sgn?-x:x;\n}\n\n// 如果需要读入直接调用 read() 即可。\n// 一个例子（与正解无关，仅供参考）：\n\nint t=read(),n=read(),q=read();\nint a[2000005],l[2000005],r[2000005],k[2000005];\nfor(int i=1;i<=n;i++)a[i]=read();\nfor(int i=1;i<=q;i++)l[i]=read(),r[i]=read(),k[i]=read();\n\n// 这样你就可以在 250ms 内读入全部数据了。\n```\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) C。  \nidea & solution：[SSerWarriors_Cat](https://www.luogu.com.cn/user/147999)；data：[Alex_Wei](https://www.luogu.com.cn/user/123294) ；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n---\n\nIOI 2077 落下帷幕，小 A 凭借出（dui）色（you）的发（bang）挥（zhu）成功 AK 了 IOI，这不禁让他回想起曾经满腔热血的自己，以及和他共同奋斗在 OI 路上的战友们。如今他们虽已天各一方，说起来也有十几年没见过面了，但他们真挚的友谊未曾淡去，也将永远不会褪色。\n\n>*“爷爷，您手机里有段录音，还写着 'ycx txdy!'。”*  \n>*“哦，是嘛？放出来听听。”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you are vegetable chickens.”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you are vegetable chickens.”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you ............”*\n\n2077.7.7", "locale": "zh-CN"}}}
{"pid": "P7876", "type": "P", "difficulty": 5, "samples": [["0\n5\n5 3\n0 1 1 1 1\n1 0 1 1 1\n1 1 0 1 1\n1 1 1 0 1\n1 1 1 1 0\n2 7\n0 1\n0 0\n5 4\n0 1 1 0 1\n0 0 0 0 1\n0 1 0 0 1\n1 1 1 0 1\n1 1 1 1 0\n3 1\n0 1 1\n1 0 1\n1 1 0\n3 2\n0 1 0\n0 0 1\n1 0 0", "YES\n100 99 97\n98 100 99\n95 97 100\n0 98 100\n99 99 99\nYES\n98 100 94 98 72 53 53\n97 99 93 97 71 52 52\nYES\n90 80 70 60\n50 40 30 20\n60 50 40 30\n100 90 80 70\n40 60 80 100\nNO\nNO"]], "limits": {"time": [500, 500, 500, 500, 500, 500], "memory": [16384, 16384, 16384, 16384, 16384, 16384]}, "tags": ["模拟", "2021", "Special Judge", "O2优化", "图论建模", "图遍历", "构造", "洛谷月赛"], "title": "「SWTR-7」Scores（hard version）", "background": "#### 本题是 Scores 的 hard 版本。注意题目限制与 [easy](https://www.luogu.com.cn/problem/P7873) 版本不同。\n\n#### 请注意特殊的时空限制。", "description": "小 A 的班上有 $n$ 个学生。最近他们进行了一场考试，共有 $m$ 个学科。第 $i$ 个学生第 $j$ 门学科的得分为**整数** $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。\n\n同学们很重视自己在班上的排名，所以他们经常会比较自己和别的同学的分数。如果一个学生 $i$ **至少有一门学科**的分数比 $j$ **高**，ta 就会觉得自己不比 $j$ 差；相反，如果 ta **每门学科**的分数都比 $j$ **低**，ta 就会觉得自己被 $j$ 吊打了。\n\n实际上，**上述两种情况并不是严格意义上相反的**。但是喜好八卦的小 A 打听到了每两个同学之间的分数情况，他惊讶地发现：**一个同学 $i$ 要么被 $j$ 吊打，要么不比 $j$ 差。** 同时，**如果 $i,j$ 被同一个人吊打，或同时吊打同一个人，则他们之间也有一方被另一方吊打**。我们用一个矩阵 $a_{i,j}\\ (i\\neq j)$ 来描述小 A 知道的同学们之间的分数关系：$a_{i,j}=0$ 表示 $i$ 被 $j$ 吊打；$a_{i,j}=1$ 表示 $i$ 不比 $j$ 差。\n\n小 A 想知道这种情况会不会发生，即是否存在这样一张 $n\\times m$ 的成绩表 $s$ 满足矩阵 $a$ 所描述的分数关系，从而确定有没有撒谎的同学。如果存在 $s$，请先输出 $\\texttt{YES}$，再**任意**输出一种符合要求的成绩表；否则输出 $\\texttt{NO}$。\n\n注意：这里所求的 $s$ 所需满足的条件是 $a$ 的限制，而**不只是**小 A 所发现的性质，因为**他发现的性质已经在给出的 $a$ 中体现**。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，**表示该测试点编号**。  \n第二行一个整数 $T$，**表示数据组数**。\n\n对于每组数据：  \n第一行两个整数 $n,m$。  \n接下来 $n$ 行，每行 $n$ 个由空格隔开的 0 或 1 描述 $a$。第 $i+1$ 行第 $j$ 个数表示 $a_{i,j}$。\n\n特别的，为了方便读入，**规定 $a_{i,i}=0$**。但你需要知道**它没有任何实际意义**。", "outputFormat": "对于每组数据：\n\n如果不存在满足条件的 $s$，输出一行字符串 $\\texttt{NO}$。  \n否则先输出一行字符串 $\\texttt{YES}$，再输出 $n$ 行，每行 $m$ 个由空格隔开的整数，第 $i+1$ 行第 $j$ 个数表示 $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。", "hint": "**「Special Judge」**\n\n**本题使用 Special Judge。请认真阅读输出格式，输出格式有误可能导致 UKE 或 WA。**\n\nSPJ 首先会判断你的第一行输出是否与答案相同。  \n如果相同且答案为 $\\texttt{YES}$，则 SPJ 会判断你的输出是否符合所有限制。  \n如果有解且你输出 $\\texttt{YES}$，但给出方案错误，你将获得该测试点 $50\\%$ 的分数。\n\n你需要满足的限制如下：  \n- $0\\leq s_{i,j}\\leq 100$。\n- 对于任意 $i,j\\ (i\\neq j)$，若 $a_{i,j}=0$，则对于任意 $k\\ (1\\leq k\\leq m)$，有 $s_{i,k}<s_{j,k}$；若 $a_{i,j}=1$，则存在一个 $k\\in [1,m]$，使得 $s_{i,k}>s_{j,k}$。\n\n你需要注意的是，所有输出都应严格符合输出格式。如果你对答案的存在性判断正确，但是输出方案时 $s_{i,j}<0$ 或 $s_{i,j}>100$，SPJ 会判定为 WA，得 $0$ 分，而不是 $50\\%\\ \\times$ 该测试点分数。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（10 points）：$n=1$。\n- Testcase #2（10 points）：$m=1$。\n- Testcase #3（30 points）：$m=2$。\n- Testcase #4（20 points）：$a_{i,j}=1\\ (i\\neq j)$。\n- Testcase #5（29 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 100$，$a_{i,j}\\in\\{0,1\\}$，$T=50$（除 Testcase #0）。  \n对于 $a$ 的限制：若 $a_{i,j}=a_{i,k}=0$，则 $a_{j,k}$ 和 $a_{k,j}$ 中至少有一个为 $0$；若 $a_{i,k}=a_{j,k}=0$，则 $a_{i,j}$ 和 $a_{j,i}$ 中至少有一个为 $0$。  \n对于所有测试点，**时间限制 500ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) A2。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」Scores（hard version）", "background": "#### 本题是 Scores 的 hard 版本。注意题目限制与 [easy](https://www.luogu.com.cn/problem/P7873) 版本不同。\n\n#### 请注意特殊的时空限制。", "description": "小 A 的班上有 $n$ 个学生。最近他们进行了一场考试，共有 $m$ 个学科。第 $i$ 个学生第 $j$ 门学科的得分为**整数** $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。\n\n同学们很重视自己在班上的排名，所以他们经常会比较自己和别的同学的分数。如果一个学生 $i$ **至少有一门学科**的分数比 $j$ **高**，ta 就会觉得自己不比 $j$ 差；相反，如果 ta **每门学科**的分数都比 $j$ **低**，ta 就会觉得自己被 $j$ 吊打了。\n\n实际上，**上述两种情况并不是严格意义上相反的**。但是喜好八卦的小 A 打听到了每两个同学之间的分数情况，他惊讶地发现：**一个同学 $i$ 要么被 $j$ 吊打，要么不比 $j$ 差。** 同时，**如果 $i,j$ 被同一个人吊打，或同时吊打同一个人，则他们之间也有一方被另一方吊打**。我们用一个矩阵 $a_{i,j}\\ (i\\neq j)$ 来描述小 A 知道的同学们之间的分数关系：$a_{i,j}=0$ 表示 $i$ 被 $j$ 吊打；$a_{i,j}=1$ 表示 $i$ 不比 $j$ 差。\n\n小 A 想知道这种情况会不会发生，即是否存在这样一张 $n\\times m$ 的成绩表 $s$ 满足矩阵 $a$ 所描述的分数关系，从而确定有没有撒谎的同学。如果存在 $s$，请先输出 $\\texttt{YES}$，再**任意**输出一种符合要求的成绩表；否则输出 $\\texttt{NO}$。\n\n注意：这里所求的 $s$ 所需满足的条件是 $a$ 的限制，而**不只是**小 A 所发现的性质，因为**他发现的性质已经在给出的 $a$ 中体现**。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，**表示该测试点编号**。  \n第二行一个整数 $T$，**表示数据组数**。\n\n对于每组数据：  \n第一行两个整数 $n,m$。  \n接下来 $n$ 行，每行 $n$ 个由空格隔开的 0 或 1 描述 $a$。第 $i+1$ 行第 $j$ 个数表示 $a_{i,j}$。\n\n特别的，为了方便读入，**规定 $a_{i,i}=0$**。但你需要知道**它没有任何实际意义**。", "outputFormat": "对于每组数据：\n\n如果不存在满足条件的 $s$，输出一行字符串 $\\texttt{NO}$。  \n否则先输出一行字符串 $\\texttt{YES}$，再输出 $n$ 行，每行 $m$ 个由空格隔开的整数，第 $i+1$ 行第 $j$ 个数表示 $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。", "hint": "**「Special Judge」**\n\n**本题使用 Special Judge。请认真阅读输出格式，输出格式有误可能导致 UKE 或 WA。**\n\nSPJ 首先会判断你的第一行输出是否与答案相同。  \n如果相同且答案为 $\\texttt{YES}$，则 SPJ 会判断你的输出是否符合所有限制。  \n如果有解且你输出 $\\texttt{YES}$，但给出方案错误，你将获得该测试点 $50\\%$ 的分数。\n\n你需要满足的限制如下：  \n- $0\\leq s_{i,j}\\leq 100$。\n- 对于任意 $i,j\\ (i\\neq j)$，若 $a_{i,j}=0$，则对于任意 $k\\ (1\\leq k\\leq m)$，有 $s_{i,k}<s_{j,k}$；若 $a_{i,j}=1$，则存在一个 $k\\in [1,m]$，使得 $s_{i,k}>s_{j,k}$。\n\n你需要注意的是，所有输出都应严格符合输出格式。如果你对答案的存在性判断正确，但是输出方案时 $s_{i,j}<0$ 或 $s_{i,j}>100$，SPJ 会判定为 WA，得 $0$ 分，而不是 $50\\%\\ \\times$ 该测试点分数。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（10 points）：$n=1$。\n- Testcase #2（10 points）：$m=1$。\n- Testcase #3（30 points）：$m=2$。\n- Testcase #4（20 points）：$a_{i,j}=1\\ (i\\neq j)$。\n- Testcase #5（29 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 100$，$a_{i,j}\\in\\{0,1\\}$，$T=50$（除 Testcase #0）。  \n对于 $a$ 的限制：若 $a_{i,j}=a_{i,k}=0$，则 $a_{j,k}$ 和 $a_{k,j}$ 中至少有一个为 $0$；若 $a_{i,k}=a_{j,k}=0$，则 $a_{i,j}$ 和 $a_{j,i}$ 中至少有一个为 $0$。  \n对于所有测试点，**时间限制 500ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) A2。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN"}}}
{"pid": "P7877", "type": "P", "difficulty": 6, "samples": [["0\n9 3\n6 9 8 4 3 2 1\n2 7 5\n1 6\n", "YES\n4\n1\n1\n1\n1\n1\n2\n3\n-1\n-1\n"], ["0\n13 4\n4 13 10 1 7\n3 11 4 8\n4 6 5 3 2\n2 12 9\n", "YES\n10\n2\n2\n2\n3\n3\n3\n1\n1\n3\n6\n7\n8\n-1\n"], ["0\n5 1\n5 5 4 3 2 1\n", "YES\n0\n-1\n-1\n-1\n-1\n-1\n"], ["0\n17 10\n2 12 14\n1 3\n3 1 13 15\n0\n2 9 8\n1 5\n3 16 7 6\n2 11 2\n1 4\n2 17 10\n", "YES\n14\n4\n1\n1\n1\n1\n1\n1\n1\n1\n2\n3\n4\n3\n1\n2\n4\n-1"], ["0\n13 4\n4 10 1 13 7\n4 11 12 4 8\n4 6 5 3 2\n1 9\n", "NO\n-1\n2\n2\n3\n3\n3\n1\n1\n-1\n-1\n6\n5\n-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "Special Judge", "O2优化", "图论建模", "拓扑排序", "洛谷月赛"], "title": "「SWTR-7」Spider Solitaire", "background": "#### 题目描述下方有简化题意。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7tdo8cdf.png)\n\n---\n\n小 A 在玩蜘蛛纸牌。  \n为了方便你理解蜘蛛纸牌，小 A 给出了简化后的游戏规则：\n\n- 一副牌有 $n$ 张，从小到大分别为 $1,2,\\cdots,n$。\n- 现有 $m$ 个牌堆，$1$ 副牌。每个牌堆中有 $0$ 张或多张牌。\n- 定义「龙」$a_1,a_2,\\cdots,a_d$ 为满足 $a_i-1=a_{i+1}\\ (1\\leq i<d)$ 的任意多张连续的牌。**一张牌也是一个「龙」。**\n- 一组连续的牌可以移动，当且仅当这组牌形成了一个「龙」，且「龙」在牌堆的**最右边**。\n- 一组连续的牌只能移动到一个**非空**牌堆的最右边，**且必须满足可以与该非空牌堆最右边的「龙」构成一条更大的「龙」**。\n- 游戏胜利，当且仅当所有的 $n$ 张牌形成了一个「龙」。\n\n---\n\n例如当 $m=3$，$n=9$，局面为\n\n```plain\n9 8 4 3 2 1\n7 5\n6\n```\n\n时，第一个牌堆最右边的 `4 3 2 1` 形成了一个「龙」，所以 `4 3 2 1` 可以移动。将 `4 3 2 1` 移动到第二个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7 5 4 3 2 1\n6\n```\n\n接下来将第二个牌堆右边的 `5 4 3 2 1` 移动到第三个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7\n6 5 4 3 2 1\n```\n\n接下来将第三个牌堆的 `6 5 4 3 2 1` 移动到第二个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7 6 5 4 3 2 1\n\\\n```\n\n接下来将第二个牌堆的 `7 6 5 4 3 2 1` 移动到第一个牌堆的最右边，此时牌堆为\n\n```plain\n9 8 7 6 5 4 3 2 1\n\\\n\\\n```\n\n因为所有 $9$ 张牌形成了一个「龙」，所以游戏胜利。", "description": "给定一个蜘蛛纸牌初始局面，小 A 想知道能否获得胜利。若能，请输出 $\\texttt{YES}$ 以及**获胜所需的最小步数**。否则输出 $\\texttt{NO}$。\n\n小 A 还想知道，对于每张牌 $i$，如果要移动 $i$ 至少需要多少步，**包括移动 $i$ 的这一步**。如果无法移动输出 `-1`。\n\n---\n\n#### 「简化题意」\n\n有 $m$ 个**横向**的数堆，数堆里共有 $n$ 个数，每个数堆里有 $0$ 或多个数。所有数堆里的数组成了 $1\\sim n$ 中的所有数。\n\n你可以将一个数堆**最右边递减且公差为 $-1$ 的**连续若干个数 $a_1,a_2,\\cdots,a_c$ **按照原来的顺序移到另外一个非空数堆的最右边**，当且仅当该非空数堆最右边的一个数 $b=a_1+1$。\n\n求将所有的 $n$ 个数都移动到同一个数堆且满足从左往右依次递减的最小步数。如果无解输出 $\\texttt{NO}$。\n\n**此外，你还需要对于每个数 $i$，输出如果要移动 $i$ 至少需要多少步。**", "inputFormat": "第一行一个整数 $T$，表示子任务编号。  \n第二行两个整数 $n,m$，分别表示一副牌的张数和牌堆的个数。  \n接下来 $m$ 行，每行首先一个整数 $c$ 表示该牌堆中牌的个数，接下来 $c$ 个整数 $b_1,b_2,\\cdots,b_c$ **从左到右**描述这个牌堆。", "outputFormat": "如果能够获胜，在第一行输出 $\\texttt{YES}$，**第二行输出最少步数**。否则输出一行 $\\texttt{NO}$。\n\n无论是否能够获胜，你还需输出 $n$ 行，第 $i$ 行一个**介于 $-1$ 与 $n$ 之间的整数**，表示移动 $i$ 至少需要多少步。", "hint": "**「样例 1 说明」**\n\n因为 1,2,3,4,5 可以直接移动，所以至少需要 1 步即可移动。  \n因为需要先将 5 移至 6 右侧，6 才能移动，所以至少需要 2 步即可移动。  \n因为需要先将 5 移至 6 右侧，再将 4,3,2,1 移至 5 右侧，7 才能移动，所以至少需要 3 步即可移动。  \n显然 8,9 无法移动。\n\n**「Special Judge」**\n\n本题使用 Special Judge，请**严格遵守输出格式**：\n\n- 如果你正确输出对能否获胜的判定，且如果能够获胜，你正确输出最小步数，你将获得该测试点**至少** $40\\%$ 的分数。\n- **在上一部分的基础上**，如果你正确输出移动每张牌的最小步数，你将获得该测试点**剩下** $60\\%$ 的分数。也就是说，如果你上一部分输出错误，你在这一部分也不会获得任何分数。\n- **如果你的输出格式错误，你将获得该测试点 $0\\%$ 的分数**，包括但不限于**只输出对能否获胜的判定**。\n- 需要特别注意的是，如果你不能正确求出移动每张牌的最小步数，请**随机输出 $[-1,n]$ 之间的任意整数**，否则你将获得该测试点 $0\\%$ 的分数。\n- 每行结束后你都需要输出换行符，**包括最后一行**。\n\nchecker 将在题目最后给出。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n- Subtask #0（0 points）：是样例。\n- Subtask #1（15 points）：$n\\leq 3\\times 10^3$，$m=2$。\n- Subtask #2（15 points）：$b_i>b_{i+1}\\ (1\\leq i<c)$，$n\\leq 3\\times 10^3$。\n- Subtask #3（25 points）：$n\\leq 14$，$m=3$。\n- Subtask #4（30 points）：$n\\leq 3\\times 10^3$。\n- Subtask #5（15 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 5\\times 10^4$。时间限制 1s，空间限制 512MB。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) D。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n---\n\n以下是 checker，你需要有 testlib.h 才能成功编译。\n\n```cpp\n#include \"testlib.h\"\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define ll long long\n#define pii pair <int,int>\n#define fi first\n#define se second\n#define pb emplace_back\n#define mp make_pair \n#define vint vector <int>\n#define vpii vector <pii>\n#define all(x) x.begin(),x.end()\n#define sor(x) sort(all(x))\n#define rev(x) reverse(all(x))\n#define mem(x,v) memset(x,v,sizeof(x))\n\n#define rint inf.readInt\n#define reof inf.readEof()\n#define reoln inf.readEoln()\n#define rspace inf.readSpace()\n\n// wrong answer : quitf(_wa,\"The answer is wrong\")\n// accepted :  quitf(_ok,\"The answer is correct\")\n// partly correct : quitp(0.5,\"The answer is partly correct\")\n\nint main(int argc,char* argv[]){\n\tregisterTestlibCmd(argc,argv);\n\t\n\tstring jans=ans.readToken();\n\tstring pans=ouf.readToken(jans);\n\tint sub=rint(),n=rint(),diff=0;\n\t\n\tif(jans==\"YES\"){\n\t\tint jstep=ans.readInt();\n\t\tint pstep=ouf.readInt();\n\t\tif(jstep!=pstep)quitf(_wa,\"The answer is wrong\");\n\t}\n\t\n\tfor(int i=1;i<=n;i++){\n\t\tint jans=ans.readInt();\n\t\tint pans=ouf.readInt();\n\t\tif(jans!=pans)diff=1;\n\t}\n\t\n\twhile(!ouf.seekEof())ouf.readToken();\n\twhile(!inf.seekEof())inf.readToken();\n\twhile(!ans.seekEof())ans.readToken();\n\tif(diff)quitp(0.4,\"The answer is partially correct\");\n\telse quitf(_ok,\"OK, you AK IOI\");\n\t\n\treturn 0;\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」Spider Solitaire", "background": "#### 题目描述下方有简化题意。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7tdo8cdf.png)\n\n---\n\n小 A 在玩蜘蛛纸牌。  \n为了方便你理解蜘蛛纸牌，小 A 给出了简化后的游戏规则：\n\n- 一副牌有 $n$ 张，从小到大分别为 $1,2,\\cdots,n$。\n- 现有 $m$ 个牌堆，$1$ 副牌。每个牌堆中有 $0$ 张或多张牌。\n- 定义「龙」$a_1,a_2,\\cdots,a_d$ 为满足 $a_i-1=a_{i+1}\\ (1\\leq i<d)$ 的任意多张连续的牌。**一张牌也是一个「龙」。**\n- 一组连续的牌可以移动，当且仅当这组牌形成了一个「龙」，且「龙」在牌堆的**最右边**。\n- 一组连续的牌只能移动到一个**非空**牌堆的最右边，**且必须满足可以与该非空牌堆最右边的「龙」构成一条更大的「龙」**。\n- 游戏胜利，当且仅当所有的 $n$ 张牌形成了一个「龙」。\n\n---\n\n例如当 $m=3$，$n=9$，局面为\n\n```plain\n9 8 4 3 2 1\n7 5\n6\n```\n\n时，第一个牌堆最右边的 `4 3 2 1` 形成了一个「龙」，所以 `4 3 2 1` 可以移动。将 `4 3 2 1` 移动到第二个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7 5 4 3 2 1\n6\n```\n\n接下来将第二个牌堆右边的 `5 4 3 2 1` 移动到第三个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7\n6 5 4 3 2 1\n```\n\n接下来将第三个牌堆的 `6 5 4 3 2 1` 移动到第二个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7 6 5 4 3 2 1\n\\\n```\n\n接下来将第二个牌堆的 `7 6 5 4 3 2 1` 移动到第一个牌堆的最右边，此时牌堆为\n\n```plain\n9 8 7 6 5 4 3 2 1\n\\\n\\\n```\n\n因为所有 $9$ 张牌形成了一个「龙」，所以游戏胜利。", "description": "给定一个蜘蛛纸牌初始局面，小 A 想知道能否获得胜利。若能，请输出 $\\texttt{YES}$ 以及**获胜所需的最小步数**。否则输出 $\\texttt{NO}$。\n\n小 A 还想知道，对于每张牌 $i$，如果要移动 $i$ 至少需要多少步，**包括移动 $i$ 的这一步**。如果无法移动输出 `-1`。\n\n---\n\n#### 「简化题意」\n\n有 $m$ 个**横向**的数堆，数堆里共有 $n$ 个数，每个数堆里有 $0$ 或多个数。所有数堆里的数组成了 $1\\sim n$ 中的所有数。\n\n你可以将一个数堆**最右边递减且公差为 $-1$ 的**连续若干个数 $a_1,a_2,\\cdots,a_c$ **按照原来的顺序移到另外一个非空数堆的最右边**，当且仅当该非空数堆最右边的一个数 $b=a_1+1$。\n\n求将所有的 $n$ 个数都移动到同一个数堆且满足从左往右依次递减的最小步数。如果无解输出 $\\texttt{NO}$。\n\n**此外，你还需要对于每个数 $i$，输出如果要移动 $i$ 至少需要多少步。**", "inputFormat": "第一行一个整数 $T$，表示子任务编号。  \n第二行两个整数 $n,m$，分别表示一副牌的张数和牌堆的个数。  \n接下来 $m$ 行，每行首先一个整数 $c$ 表示该牌堆中牌的个数，接下来 $c$ 个整数 $b_1,b_2,\\cdots,b_c$ **从左到右**描述这个牌堆。", "outputFormat": "如果能够获胜，在第一行输出 $\\texttt{YES}$，**第二行输出最少步数**。否则输出一行 $\\texttt{NO}$。\n\n无论是否能够获胜，你还需输出 $n$ 行，第 $i$ 行一个**介于 $-1$ 与 $n$ 之间的整数**，表示移动 $i$ 至少需要多少步。", "hint": "**「样例 1 说明」**\n\n因为 1,2,3,4,5 可以直接移动，所以至少需要 1 步即可移动。  \n因为需要先将 5 移至 6 右侧，6 才能移动，所以至少需要 2 步即可移动。  \n因为需要先将 5 移至 6 右侧，再将 4,3,2,1 移至 5 右侧，7 才能移动，所以至少需要 3 步即可移动。  \n显然 8,9 无法移动。\n\n**「Special Judge」**\n\n本题使用 Special Judge，请**严格遵守输出格式**：\n\n- 如果你正确输出对能否获胜的判定，且如果能够获胜，你正确输出最小步数，你将获得该测试点**至少** $40\\%$ 的分数。\n- **在上一部分的基础上**，如果你正确输出移动每张牌的最小步数，你将获得该测试点**剩下** $60\\%$ 的分数。也就是说，如果你上一部分输出错误，你在这一部分也不会获得任何分数。\n- **如果你的输出格式错误，你将获得该测试点 $0\\%$ 的分数**，包括但不限于**只输出对能否获胜的判定**。\n- 需要特别注意的是，如果你不能正确求出移动每张牌的最小步数，请**随机输出 $[-1,n]$ 之间的任意整数**，否则你将获得该测试点 $0\\%$ 的分数。\n- 每行结束后你都需要输出换行符，**包括最后一行**。\n\nchecker 将在题目最后给出。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n- Subtask #0（0 points）：是样例。\n- Subtask #1（15 points）：$n\\leq 3\\times 10^3$，$m=2$。\n- Subtask #2（15 points）：$b_i>b_{i+1}\\ (1\\leq i<c)$，$n\\leq 3\\times 10^3$。\n- Subtask #3（25 points）：$n\\leq 14$，$m=3$。\n- Subtask #4（30 points）：$n\\leq 3\\times 10^3$。\n- Subtask #5（15 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 5\\times 10^4$。时间限制 1s，空间限制 512MB。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) D。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n---\n\n以下是 checker，你需要有 testlib.h 才能成功编译。\n\n```cpp\n#include \"testlib.h\"\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define ll long long\n#define pii pair <int,int>\n#define fi first\n#define se second\n#define pb emplace_back\n#define mp make_pair \n#define vint vector <int>\n#define vpii vector <pii>\n#define all(x) x.begin(),x.end()\n#define sor(x) sort(all(x))\n#define rev(x) reverse(all(x))\n#define mem(x,v) memset(x,v,sizeof(x))\n\n#define rint inf.readInt\n#define reof inf.readEof()\n#define reoln inf.readEoln()\n#define rspace inf.readSpace()\n\n// wrong answer : quitf(_wa,\"The answer is wrong\")\n// accepted :  quitf(_ok,\"The answer is correct\")\n// partly correct : quitp(0.5,\"The answer is partly correct\")\n\nint main(int argc,char* argv[]){\n\tregisterTestlibCmd(argc,argv);\n\t\n\tstring jans=ans.readToken();\n\tstring pans=ouf.readToken(jans);\n\tint sub=rint(),n=rint(),diff=0;\n\t\n\tif(jans==\"YES\"){\n\t\tint jstep=ans.readInt();\n\t\tint pstep=ouf.readInt();\n\t\tif(jstep!=pstep)quitf(_wa,\"The answer is wrong\");\n\t}\n\t\n\tfor(int i=1;i<=n;i++){\n\t\tint jans=ans.readInt();\n\t\tint pans=ouf.readInt();\n\t\tif(jans!=pans)diff=1;\n\t}\n\t\n\twhile(!ouf.seekEof())ouf.readToken();\n\twhile(!inf.seekEof())inf.readToken();\n\twhile(!ans.seekEof())ans.readToken();\n\tif(diff)quitp(0.4,\"The answer is partially correct\");\n\telse quitf(_ok,\"OK, you AK IOI\");\n\t\n\treturn 0;\n}\n```", "locale": "zh-CN"}}}
{"pid": "P7878", "type": "P", "difficulty": 5, "samples": [["0\n3\n4 2\n1 1 3 2\n8 3\n1 3 2 8 6 4 7 5\n40 10\n9843011 22841896 42690334 3412396 8420789 100693326 23390709 11537210 145661796 21418321 16914724 146120903 14287416 9157773 259599687 16469809 13371424 221660485 23554750 3004543 19382066 514113557 959488450 162305801 377127750 240963428 597774302 18789772 647693870 517468301 547221960 162988230 309004668 267293109 867629494 476230153 70400563 100943563 140708197 999999999\n", "3\n13\n5882440256\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "洛谷月赛"], "title": "「SWTR-7」My rating is 1064（hard version）", "background": "#### 本题是 My rating is ... 的 hard 版本。注意题目限制与 [easy](https://www.luogu.com.cn/problem/P7874) 版本不同。\n\n#### 题目描述下方有简化题意。\n\n[My rating is 1064.](https://codeforces.com/blog/entry/74503)（被 2 - Tower 炸掉了，因此现在打不开了）", "description": "小 A 想在 Codeforces 上发 $n$ 篇帖子！例如：\n\n> “My rating is 1064.”\n>\n> “I am PolarSea.”\n>\n> “你知道 phi 吗？你知道你的 phi 处是哪里吗？你知道它的 price 吗？1e9 + 7。”\n>\n>“每道题都很简单，全场虐题不用烦。T1 到场先签到，T2 上手随便切，T3 一交就能过，T4 稍想也能 A。DP 转移很容易，数学结论尽皆知。建图方法极明显，数据结构很一般。不卡空间不卡常，码量不大手不酸。没有毒瘤大模拟，只有良多大水题。片刻四题提交过，人人 AK 笑开颜。”\n>\n> “……”\n\n为此，小 A 新注册了 $k$ 个账号。他决定按照顺序发出每篇帖子，并**用到所有 $k$ 个账号**。不过刷屏过多会引起 Mike 的注意并被封号，小 A 当然不希望这样：他进行了一些评估，得到了每篇帖子的安全指数 $a_i$，表示他发出第 $i$ 篇帖子后不被封号的概率。\n\n由于第一印象非常重要，小 A 定义一个账号的安全指数为该账号所发出的**第一篇**帖子的安全指数。此外，如果**用同一个账号连续发出两个帖子**，该账号的安全指数会减小**这两篇帖子安全指数的较小值**。\n\n小 A 希望找到这样一个发帖方案，使得所有账号的安全指数之和最大。你只需要求出安全指数之和的最大值即可。\n\n---\n\n**「简化题意」**\n\n将 $1\\sim n$ **不重不漏**地分进**恰好** $k$ 个集合 $S_1,S_2,\\cdots,S_k$ 中 且 $|S_i|>0$。记 $i$ 被分入第 $d_i$ 个集合，求 \n\n$$\\left(\\sum_{i=1}^k a[{\\min_{j\\in S_i}j}]\\right)-\\left(\\sum_{i=1}^{n-1}\\min(a_i,a_{i+1})[d_i=d_{i+1}]\\right)$$\n\n的最大值，其中左边的 $[x]$ 表示下标为 $x$，右边的 $[x]$ 表示当 $x$ 成立时取值为 $1$，当 $x$ 不成立时取值为 $0$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，表示该测试点编号。  \n第二行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n,k$。  \n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个帖子的安全指数。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "**「样例 1 说明」**\n\n小 A 可以使用账号 $1$ 发帖子 $1,2$ 和 $4$，用账号 $2$ 发帖子 $3$。其安全程度为 $(a_{\\min(1,2,4)}-\\min(a_1,a_2))+a_3=1-1+3=3$。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（20 points）：$k=2$。\n- Testcase #2（20 points）：$n\\leq 10$，$k\\leq 4$。\n- Testcase #3（15 points）：$k=3$。\n- Testcase #4（20 points）：$n\\leq 10^3$。\n- Testcase #5（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\leq k \\leq n \\leq 10^5$，$0 \\leq a_i \\leq 10^9$，$T=10$（除 Testcase #0）。  \n对于所有测试点，时间限制 1s，空间限制 128MB。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/) B2。  \nidea & solution：[tzc_wk](https://www.luogu.com.cn/user/115194) & [Alex_Wei](https://www.luogu.com.cn/user/123294)（加强）；data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n> **My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. ……**\n>\n> **Upvote&emsp;-77&emsp;Downvote&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;PolarSea**  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」My rating is 1064（hard version）", "background": "#### 本题是 My rating is ... 的 hard 版本。注意题目限制与 [easy](https://www.luogu.com.cn/problem/P7874) 版本不同。\n\n#### 题目描述下方有简化题意。\n\n[My rating is 1064.](https://codeforces.com/blog/entry/74503)（被 2 - Tower 炸掉了，因此现在打不开了）", "description": "小 A 想在 Codeforces 上发 $n$ 篇帖子！例如：\n\n> “My rating is 1064.”\n>\n> “I am PolarSea.”\n>\n> “你知道 phi 吗？你知道你的 phi 处是哪里吗？你知道它的 price 吗？1e9 + 7。”\n>\n>“每道题都很简单，全场虐题不用烦。T1 到场先签到，T2 上手随便切，T3 一交就能过，T4 稍想也能 A。DP 转移很容易，数学结论尽皆知。建图方法极明显，数据结构很一般。不卡空间不卡常，码量不大手不酸。没有毒瘤大模拟，只有良多大水题。片刻四题提交过，人人 AK 笑开颜。”\n>\n> “……”\n\n为此，小 A 新注册了 $k$ 个账号。他决定按照顺序发出每篇帖子，并**用到所有 $k$ 个账号**。不过刷屏过多会引起 Mike 的注意并被封号，小 A 当然不希望这样：他进行了一些评估，得到了每篇帖子的安全指数 $a_i$，表示他发出第 $i$ 篇帖子后不被封号的概率。\n\n由于第一印象非常重要，小 A 定义一个账号的安全指数为该账号所发出的**第一篇**帖子的安全指数。此外，如果**用同一个账号连续发出两个帖子**，该账号的安全指数会减小**这两篇帖子安全指数的较小值**。\n\n小 A 希望找到这样一个发帖方案，使得所有账号的安全指数之和最大。你只需要求出安全指数之和的最大值即可。\n\n---\n\n**「简化题意」**\n\n将 $1\\sim n$ **不重不漏**地分进**恰好** $k$ 个集合 $S_1,S_2,\\cdots,S_k$ 中 且 $|S_i|>0$。记 $i$ 被分入第 $d_i$ 个集合，求 \n\n$$\\left(\\sum_{i=1}^k a[{\\min_{j\\in S_i}j}]\\right)-\\left(\\sum_{i=1}^{n-1}\\min(a_i,a_{i+1})[d_i=d_{i+1}]\\right)$$\n\n的最大值，其中左边的 $[x]$ 表示下标为 $x$，右边的 $[x]$ 表示当 $x$ 成立时取值为 $1$，当 $x$ 不成立时取值为 $0$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，表示该测试点编号。  \n第二行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n,k$。  \n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个帖子的安全指数。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "**「样例 1 说明」**\n\n小 A 可以使用账号 $1$ 发帖子 $1,2$ 和 $4$，用账号 $2$ 发帖子 $3$。其安全程度为 $(a_{\\min(1,2,4)}-\\min(a_1,a_2))+a_3=1-1+3=3$。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（20 points）：$k=2$。\n- Testcase #2（20 points）：$n\\leq 10$，$k\\leq 4$。\n- Testcase #3（15 points）：$k=3$。\n- Testcase #4（20 points）：$n\\leq 10^3$。\n- Testcase #5（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\leq k \\leq n \\leq 10^5$，$0 \\leq a_i \\leq 10^9$，$T=10$（除 Testcase #0）。  \n对于所有测试点，时间限制 1s，空间限制 128MB。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/) B2。  \nidea & solution：[tzc_wk](https://www.luogu.com.cn/user/115194) & [Alex_Wei](https://www.luogu.com.cn/user/123294)（加强）；data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n> **My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. ……**\n>\n> **Upvote&emsp;-77&emsp;Downvote&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;PolarSea**  ", "locale": "zh-CN"}}}
{"pid": "P7879", "type": "P", "difficulty": 7, "samples": [["0\nbbccabcacbcbac\ncbcacbcabbcabca\n3\n17\n2 1 2\n2 1 4\n2 1 6\n2 2 15\n2 6 15\n2 9 15\n1 4 13 babbccabbd\n2 1 11\n2 1 12\n2 1 15\n2 5 11\n1 13 15 cab\n2 3 12\n2 7 10\n2 11 15\n2 10 14\n2 9 14", "No\nNo\nYes\nYes\nYes\nYes\nYes\nNo\nNo\nNo\nNo\nYes\nNo\nNo\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "2021", "后缀自动机 SAM", "O2优化", "矩阵加速", "哈希 hashing", "洛谷月赛"], "title": "「SWTR-7」How to AK NOI?", "background": "#### 一些关于字符串的定义与约定详见「帮助 / 提示」部分。\n\n#### 请不要恶意卡评测。\n\n---\n\n小 A 正在读一篇文章 ——《如何优雅地 AK NOI？》", "description": "不幸的是，这篇文章是用英语写的。小 A 的视力很糟糕，同时词汇量也很小。\n\n具体地，这篇文章可以用一个字符串 $t$ 表示。同时给出另一个字符串 $s$：小 A 所有认识的单词，都是 $s$ 的**长度不小于 $k$ 的**子串。\n\n一段文字 $T$ 被称为「可读懂的」，当且仅当其能被分割成若干个小 A 读得懂的单词。例如当 $k=2$，$s=\\texttt{abcd}$ 时，$\\texttt{abcd/abc}$ 和 $\\texttt{cd/ab/bc/bcd}$ 就是可读懂的，而 $\\texttt{abcc}$ 和 $\\texttt{tzcaknoi}$ 就是不可读懂的。\n\n接下来，小 A 会进行 $q$ 次行动：\n\n- Type 1：擦亮眼睛。具体地，小 A 会选择文章 $t$ 的一个子串 $t[l:r]$，并将其修改为字符串 $x\\ (|x|=r-l+1)$。\n- Type 2：阅读文章。具体地，小 A 会选择文章 $t$ 的一个子串 $t[l:r]$ 并进行阅读。**对于每次 Type 2 的操作，你需要告诉小 A 他能不能看懂这段文字**。能够读懂则输出 `Yes`，否则输出 `No`。", "inputFormat": "第一行一个正整数 $T$，表示该点 Subtask 编号。  \n第二行一个字符串 $s$。  \n第三行一个字符串 $t$。  \n第四行一个正整数 $k$。  \n第五行一个正整数 $q$。\n\n接下来 $q$ 行，每行表示一个询问。首先给出操作参数 $op$：\n- 若 $op=1$，则接下来两个正整数 $l,r$ 与一个字符串 $x$，表示将 $t[l:r]$ 修改为 $x$。\n- 若 $op=2$，则接下来两个正整数 $l,r$，表示一次询问。", "outputFormat": "对于每个询问输出一行字符串：若可以读懂则输出 `Yes`，否则输出 `No`。", "hint": "**「数据范围与约定」**\n\n记 $n=|s|$，$m=|t|$，$L=\\sum |x|$。\n\n| Subtask |    $n\\leq$     | $m\\leq$ | $L\\leq$ | $q\\leq$ | $k\\leq$ |   分值    |\n| :-----: | :------------: | :-----: | :-----: | :-----: | :-----: | :-------: |\n| 0 |  |  |  |  |  | 0 point |\n|    1    |      $70$      |  $70$   |         |  $70$   |         | 10 points |\n|    2    |     $200$      |  $200$  |         |  $200$  |         | 10 points |\n|    3    |     $10^3$     | $10^3$  |         | $10^3$  |         | 10 points |\n|    4    |                |         |         |         |   $1$   | 10 points |\n|    5    | $2\\times 10^5$ | $10^5$ |   $0$   | $2\\times 10^4$  |   $5$   | 15 points |\n|    6    | $2\\times 10^5$ | $10^5$  | $5\\times 10^4$  | $2\\times 10^4$  |   $5$   | 10 points |\n|    7    |  |         |         |         |   $6$   | 15 points |\n|    8    |                |         |         |         |         | 20 points |\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 3\\times 10^6$，$1\\leq L\\leq 3\\times 10^5$，$1\\leq m\\leq 2\\times 10^5$，$1\\leq q\\leq 10^5$，$1\\leq k\\leq 8$。    保证 $|x|=r-l+1$，且字符集为 $[\\texttt{a,i}]$。\n\n---\n\nSubtask 0 是样例及 **Hack 数据**。\n\n- Subtask 0 ~ 3 时间限制 1s。\n- Subtask 4 ~ 6 时间限制 1.5s。\n- Subtask 7 时间限制 3s。\n- Subtask 8 时间限制 4.5s。\n\n**「子任务依赖」**\n\n**本题使用子任务依赖**。\n\n简单地说，如果 Subtask a 依赖于 Subtask b，那么**只有你通过 Subtask b 的全部测试点时，Subtask a 才会计入总分**。\n\n- Subtask 1 依赖于 Subtask 0。\n- Subtask 2 依赖于 Subtask 0,1。\n- Subtask 3 依赖于 Subtask 0,1,2。\n- Subtask 6 依赖于 Subtask 0,5。\n- Subtask 7 依赖于 Subtask 0,5,6。\n- Subtask 8 依赖于 Subtask 0~7。\n\n**保证 Subtask 0 的 Hack 数据符合 Subtask 1,2,3,6,7,8 的所有限制**。\n\n**「帮助 / 提示」**\n\n字符串 $t'$ 是 $t$ 的子串，当且仅当我们能够从 $t$ 的开头和结尾删除若干个字符（可以不删除）并得到 $t'$。  \n定义 $t[l:r]$ 表示 $t_lt_{l+1}\\cdots t_{r-1}t_r$ 所形成的字符串。\n\n读入文件较大，请注意 IO 优化。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) E。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[tzc_wk](https://www.luogu.com.cn/user/115194)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」How to AK NOI?", "background": "#### 一些关于字符串的定义与约定详见「帮助 / 提示」部分。\n\n#### 请不要恶意卡评测。\n\n---\n\n小 A 正在读一篇文章 ——《如何优雅地 AK NOI？》", "description": "不幸的是，这篇文章是用英语写的。小 A 的视力很糟糕，同时词汇量也很小。\n\n具体地，这篇文章可以用一个字符串 $t$ 表示。同时给出另一个字符串 $s$：小 A 所有认识的单词，都是 $s$ 的**长度不小于 $k$ 的**子串。\n\n一段文字 $T$ 被称为「可读懂的」，当且仅当其能被分割成若干个小 A 读得懂的单词。例如当 $k=2$，$s=\\texttt{abcd}$ 时，$\\texttt{abcd/abc}$ 和 $\\texttt{cd/ab/bc/bcd}$ 就是可读懂的，而 $\\texttt{abcc}$ 和 $\\texttt{tzcaknoi}$ 就是不可读懂的。\n\n接下来，小 A 会进行 $q$ 次行动：\n\n- Type 1：擦亮眼睛。具体地，小 A 会选择文章 $t$ 的一个子串 $t[l:r]$，并将其修改为字符串 $x\\ (|x|=r-l+1)$。\n- Type 2：阅读文章。具体地，小 A 会选择文章 $t$ 的一个子串 $t[l:r]$ 并进行阅读。**对于每次 Type 2 的操作，你需要告诉小 A 他能不能看懂这段文字**。能够读懂则输出 `Yes`，否则输出 `No`。", "inputFormat": "第一行一个正整数 $T$，表示该点 Subtask 编号。  \n第二行一个字符串 $s$。  \n第三行一个字符串 $t$。  \n第四行一个正整数 $k$。  \n第五行一个正整数 $q$。\n\n接下来 $q$ 行，每行表示一个询问。首先给出操作参数 $op$：\n- 若 $op=1$，则接下来两个正整数 $l,r$ 与一个字符串 $x$，表示将 $t[l:r]$ 修改为 $x$。\n- 若 $op=2$，则接下来两个正整数 $l,r$，表示一次询问。", "outputFormat": "对于每个询问输出一行字符串：若可以读懂则输出 `Yes`，否则输出 `No`。", "hint": "**「数据范围与约定」**\n\n记 $n=|s|$，$m=|t|$，$L=\\sum |x|$。\n\n| Subtask |    $n\\leq$     | $m\\leq$ | $L\\leq$ | $q\\leq$ | $k\\leq$ |   分值    |\n| :-----: | :------------: | :-----: | :-----: | :-----: | :-----: | :-------: |\n| 0 |  |  |  |  |  | 0 point |\n|    1    |      $70$      |  $70$   |         |  $70$   |         | 10 points |\n|    2    |     $200$      |  $200$  |         |  $200$  |         | 10 points |\n|    3    |     $10^3$     | $10^3$  |         | $10^3$  |         | 10 points |\n|    4    |                |         |         |         |   $1$   | 10 points |\n|    5    | $2\\times 10^5$ | $10^5$ |   $0$   | $2\\times 10^4$  |   $5$   | 15 points |\n|    6    | $2\\times 10^5$ | $10^5$  | $5\\times 10^4$  | $2\\times 10^4$  |   $5$   | 10 points |\n|    7    |  |         |         |         |   $6$   | 15 points |\n|    8    |                |         |         |         |         | 20 points |\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 3\\times 10^6$，$1\\leq L\\leq 3\\times 10^5$，$1\\leq m\\leq 2\\times 10^5$，$1\\leq q\\leq 10^5$，$1\\leq k\\leq 8$。    保证 $|x|=r-l+1$，且字符集为 $[\\texttt{a,i}]$。\n\n---\n\nSubtask 0 是样例及 **Hack 数据**。\n\n- Subtask 0 ~ 3 时间限制 1s。\n- Subtask 4 ~ 6 时间限制 1.5s。\n- Subtask 7 时间限制 3s。\n- Subtask 8 时间限制 4.5s。\n\n**「子任务依赖」**\n\n**本题使用子任务依赖**。\n\n简单地说，如果 Subtask a 依赖于 Subtask b，那么**只有你通过 Subtask b 的全部测试点时，Subtask a 才会计入总分**。\n\n- Subtask 1 依赖于 Subtask 0。\n- Subtask 2 依赖于 Subtask 0,1。\n- Subtask 3 依赖于 Subtask 0,1,2。\n- Subtask 6 依赖于 Subtask 0,5。\n- Subtask 7 依赖于 Subtask 0,5,6。\n- Subtask 8 依赖于 Subtask 0~7。\n\n**保证 Subtask 0 的 Hack 数据符合 Subtask 1,2,3,6,7,8 的所有限制**。\n\n**「帮助 / 提示」**\n\n字符串 $t'$ 是 $t$ 的子串，当且仅当我们能够从 $t$ 的开头和结尾删除若干个字符（可以不删除）并得到 $t'$。  \n定义 $t[l:r]$ 表示 $t_lt_{l+1}\\cdots t_{r-1}t_r$ 所形成的字符串。\n\n读入文件较大，请注意 IO 优化。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) E。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[tzc_wk](https://www.luogu.com.cn/user/115194)。", "locale": "zh-CN"}}}
{"pid": "P7880", "type": "P", "difficulty": 6, "samples": [["10 19\n9 1 -4\n9 8 2\n8 10 5\n9 7 -3\n1 4 2\n10 2 5\n10 5 -1\n7 3 -3\n10 6 5\n8 10\n4 6\n1 7\n7 9\n5 5\n7 8\n8 10\n10 10\n10 10\n9 10\n5 7\n8 8\n6 6\n2 8\n9 10\n4 8\n5 5\n1 6\n1 2\n", "3\n4\n7\n3\n1\n3\n3\n1\n1\n2\n5\n1\n1\n8\n2\n7\n1\n6\n2\n"], ["10 19\n6 1 299830931\n1 4 -565297395\n1 7 -606073228\n4 8 94253706\n8 9 -576603423\n4 3 116780102\n3 5 620388954\n7 10 -950023905\n5 2 813045783\n3 5\n7 7\n8 10\n4 7\n10 10\n9 9\n4 7\n8 10\n6 7\n4 8\n9 10\n2 9\n8 10\n2 8\n4 4\n10 10\n4 9\n1 5\n8 9\n", "3\n1\n4\n5\n1\n1\n5\n4\n3\n6\n3\n9\n4\n8\n1\n1\n7\n5\n2\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2006", "O2优化", "Ynoi"], "title": "[Ynoi2006] rldcot", "background": "", "description": "给定一棵 $n$ 个节点的树，树根为 $1$，每个点有一个编号，每条边有一个边权。\n\n定义 $dep(x)$ 表示一个点到根简单路径上边权的和，$lca(x,y)$ 表示 $x,y$ 节点在树上的最近公共祖先。\n\n共 $m$ 组询问，每次询问给出 $l,r$，求对于所有点编号的二元组 $(i,j)$ 满足 $l \\le i,j \\le r$ ，有多少种不同的 $dep( lca(i,j))$。", "inputFormat": "第一行两个用空格隔开的数 $n,m$。\n\n之后 $n-1$ 行，每行三个用空格隔开的数 $u,v,d$ 表示一条 $u$ 到 $v$ 边权为 $d$ 的边。\n\n之后 $m$ 行，每行两个用空格隔开的数 $l,r$ 表示一次询问。", "outputFormat": "共 $m$ 行，一行一个整数，表示询问的答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：lk，Data：nzhtl1477\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m \\le 100$。\n\n对于另外 $20\\%$ 的数据，满足 $1\\le n,m \\le 5000$。\n\n对于另外 $20\\%$ 的数据，满足 $1\\le n,m \\le 50000$。\n\n对于另外 $20\\%$ 的数据，满足 $d=1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n \\le 10^5$，$1\\le m \\le 5 \\times 10^5$，所有数值为整数，$-10^9 \\le d \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] rldcot", "background": "", "description": "给定一棵 $n$ 个节点的树，树根为 $1$，每个点有一个编号，每条边有一个边权。\n\n定义 $dep(x)$ 表示一个点到根简单路径上边权的和，$lca(x,y)$ 表示 $x,y$ 节点在树上的最近公共祖先。\n\n共 $m$ 组询问，每次询问给出 $l,r$，求对于所有点编号的二元组 $(i,j)$ 满足 $l \\le i,j \\le r$ ，有多少种不同的 $dep( lca(i,j))$。", "inputFormat": "第一行两个用空格隔开的数 $n,m$。\n\n之后 $n-1$ 行，每行三个用空格隔开的数 $u,v,d$ 表示一条 $u$ 到 $v$ 边权为 $d$ 的边。\n\n之后 $m$ 行，每行两个用空格隔开的数 $l,r$ 表示一次询问。", "outputFormat": "共 $m$ 行，一行一个整数，表示询问的答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：lk，Data：nzhtl1477\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m \\le 100$。\n\n对于另外 $20\\%$ 的数据，满足 $1\\le n,m \\le 5000$。\n\n对于另外 $20\\%$ 的数据，满足 $1\\le n,m \\le 50000$。\n\n对于另外 $20\\%$ 的数据，满足 $d=1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n \\le 10^5$，$1\\le m \\le 5 \\times 10^5$，所有数值为整数，$-10^9 \\le d \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7881", "type": "P", "difficulty": 7, "samples": [["10\n2 200842854 123159544\n2 192001936 902183645\n2 996055655 154684468\n2 957446126 232761122\n1 739061119 1 4 6\n1 762263616 1 5 8\n1 669159682 0 10 7\n2 361701640 274578757\n1 392040275 0 2 8\n1 800311125 1 3 2\n", "(0,0,0,0)\n(0,0,0,0)\n(0,0,0,0)\n(0,0,0,0)\n(19,19,329,10)\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2006", "交互题", "Special Judge", "O2优化", "洛谷月赛", "Ynoi"], "title": "[Ynoi2006] rmpq", "background": "", "description": "你需要包含头文件`lib.h`；\n\n在本地编译时，需要和 `lib.cpp` 一起编译；\n\n交互库提供了以下数据类型和函数：\n\n```cpp\nstruct Data{\n\tunsigned short a,b,c,d;\n\tvoid operator*=(const Data &x);\n\tvoid clr();\n};\n```\n\nData 类型是一个含幺半群 $(D,*,e)$，具体地：\n\n$D$ 是类型为 Data 的元素构成的集合；\n\n$*:D\\times D\\to D$\n\n$e\\in D$\n\n$\\forall x,y,z\\in D, x*(y*z)=(x*y)*z$\n\n$\\forall x\\in D, x*e=e*x=x$\n\n使用 `x.clr()` 可以将 $x$ 修改为 $e$；\n\n使用 `x=y` 可以将 $x$ 修改为 $y$；\n\n使用 `x*=y` 可以将 $x$ 修改为 $x*y$，这个操作的调用次数有常数上限 $2\\times 10^7$，不计 $x=e$ 或 $y=e$ 的情况。\n\n初始条件下，平面上每个点 $(x,y)$ 都对应一个权值 $d(x,y)\\in D$；\n\n你需要实现以下函数：\n\n```cpp\nvoid update(int x,int dim,Data d1,Data d2);\n```\n\n对每个 $(x_0,y_0)$ 执行操作：\n\n若 $dim=0$ 且 $x_0<x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d1$；\n\n若 $dim=0$ 且 $x_0\\ge x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d2$；\n\n若 $dim=1$ 且 $y_0<x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d1$；\n\n若 $dim=1$ 且 $y_0\\ge x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d2$；\n\n```cpp\nData query(int x,int y);\n```\n\n查询 $d(x,y)$，返回值为答案。\n\n为了您的方便，这里提供模板。请完善以下代码：\n\n```cpp\n/* BEGIN HEADER: */\nstruct Data{\n\tunsigned short a,b,c,d;\n\tvoid operator*=(const Data &x);\n\tvoid clr();\n};\nvoid update(int x,int dim,Data d1,Data d2);\nData query(int x,int y);\n/* END HEADER. */\n\n#include <bits/stdc++.h>\n\nvoid update(int x,int dim,Data d1,Data d2){\n\t// complete this\n}\nData query(int x,int y){\n\t// complete this\n}\n```\n\n由于洛谷的交互方法比较奇怪，所以提交的时候需要把本地的代码复制过来，放在 update, query 函数这里，和前面的 HEADER 一起提交。提交时不引用 \"lib.h\" 头文件。", "inputFormat": "这是交互题，不需要这种东西。", "outputFormat": "这是交互题，不需要这种东西。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于前 8 组数据，操作个数分别为 $10,1000,10000,20000,40000,60000,80000,10^5$，且 $x,y,dim$ 均匀随机选取；\n\n对于其余数据，操作个数为 $10^5$，且构成子任务。\n\n对于所有数据：\n对于 update 操作，满足 $1\\le x\\le 10^9$，$dim\\in\\{0,1\\}$；\n对于 query 操作，满足 $1\\le x,y\\le 10^9$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] rmpq", "background": "", "description": "你需要包含头文件`lib.h`；\n\n在本地编译时，需要和 `lib.cpp` 一起编译；\n\n交互库提供了以下数据类型和函数：\n\n```cpp\nstruct Data{\n\tunsigned short a,b,c,d;\n\tvoid operator*=(const Data &x);\n\tvoid clr();\n};\n```\n\nData 类型是一个含幺半群 $(D,*,e)$，具体地：\n\n$D$ 是类型为 Data 的元素构成的集合；\n\n$*:D\\times D\\to D$\n\n$e\\in D$\n\n$\\forall x,y,z\\in D, x*(y*z)=(x*y)*z$\n\n$\\forall x\\in D, x*e=e*x=x$\n\n使用 `x.clr()` 可以将 $x$ 修改为 $e$；\n\n使用 `x=y` 可以将 $x$ 修改为 $y$；\n\n使用 `x*=y` 可以将 $x$ 修改为 $x*y$，这个操作的调用次数有常数上限 $2\\times 10^7$，不计 $x=e$ 或 $y=e$ 的情况。\n\n初始条件下，平面上每个点 $(x,y)$ 都对应一个权值 $d(x,y)\\in D$；\n\n你需要实现以下函数：\n\n```cpp\nvoid update(int x,int dim,Data d1,Data d2);\n```\n\n对每个 $(x_0,y_0)$ 执行操作：\n\n若 $dim=0$ 且 $x_0<x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d1$；\n\n若 $dim=0$ 且 $x_0\\ge x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d2$；\n\n若 $dim=1$ 且 $y_0<x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d1$；\n\n若 $dim=1$ 且 $y_0\\ge x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d2$；\n\n```cpp\nData query(int x,int y);\n```\n\n查询 $d(x,y)$，返回值为答案。\n\n为了您的方便，这里提供模板。请完善以下代码：\n\n```cpp\n/* BEGIN HEADER: */\nstruct Data{\n\tunsigned short a,b,c,d;\n\tvoid operator*=(const Data &x);\n\tvoid clr();\n};\nvoid update(int x,int dim,Data d1,Data d2);\nData query(int x,int y);\n/* END HEADER. */\n\n#include <bits/stdc++.h>\n\nvoid update(int x,int dim,Data d1,Data d2){\n\t// complete this\n}\nData query(int x,int y){\n\t// complete this\n}\n```\n\n由于洛谷的交互方法比较奇怪，所以提交的时候需要把本地的代码复制过来，放在 update, query 函数这里，和前面的 HEADER 一起提交。提交时不引用 \"lib.h\" 头文件。", "inputFormat": "这是交互题，不需要这种东西。", "outputFormat": "这是交互题，不需要这种东西。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于前 8 组数据，操作个数分别为 $10,1000,10000,20000,40000,60000,80000,10^5$，且 $x,y,dim$ 均匀随机选取；\n\n对于其余数据，操作个数为 $10^5$，且构成子任务。\n\n对于所有数据：\n对于 update 操作，满足 $1\\le x\\le 10^9$，$dim\\in\\{0,1\\}$；\n对于 query 操作，满足 $1\\le x,y\\le 10^9$。\n\n", "locale": "zh-CN"}}}
{"pid": "P7882", "type": "P", "difficulty": 7, "samples": [["3 2\n1 1 2\n1 3\n2 3", "6\n3"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2006", "O2优化", "Ynoi"], "title": "[Ynoi2006] rsrams", "background": "", "description": "给定一个长度 $n$ 的序列 $a_1,\\dots,a_n$，你需要处理 $m$ 次查询，每次查询给出 $l,r$，对应答案为：\n\n$\\sum\\limits_{L=l}^r \\sum\\limits_{R=L}^r \\sum\\limits_{c=1}^n c\\cdot \\left[R-L+1<2\\sum\\limits_{i=L}^R [a_i=c] \\right]$。\n\n其中 $[\\mathrm{cond}]$ 表示如果括号中的条件表达式为真，则对应 $[\\mathrm{cond}]=1$，否则对应 $[\\mathrm{cond}]=0$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$\n\n接下来 $m$ 行，每行两个整数 $l,r$ 表示一次查询。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次询问的答案。", "hint": "Idea：zjjcth330，Solution：nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$1\\le m\\le 10^6$，$1\\le a_i\\le n$，$1\\le l\\le r\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] rsrams", "background": "", "description": "给定一个长度 $n$ 的序列 $a_1,\\dots,a_n$，你需要处理 $m$ 次查询，每次查询给出 $l,r$，对应答案为：\n\n$\\sum\\limits_{L=l}^r \\sum\\limits_{R=L}^r \\sum\\limits_{c=1}^n c\\cdot \\left[R-L+1<2\\sum\\limits_{i=L}^R [a_i=c] \\right]$。\n\n其中 $[\\mathrm{cond}]$ 表示如果括号中的条件表达式为真，则对应 $[\\mathrm{cond}]=1$，否则对应 $[\\mathrm{cond}]=0$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$\n\n接下来 $m$ 行，每行两个整数 $l,r$ 表示一次查询。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次询问的答案。", "hint": "Idea：zjjcth330，Solution：nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$1\\le m\\le 10^6$，$1\\le a_i\\le n$，$1\\le l\\le r\\le n$。", "locale": "zh-CN"}}}
{"pid": "P7883", "type": "P", "difficulty": 5, "samples": [["2\n-10000000 -10000000\n10000000 10000000", "800000000000000"], ["5\n1 1\n1 9\n9 1\n9 9\n0 10", "2"]], "limits": {"time": [350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "O2优化", "分治"], "title": "平面最近点对（加强加强版）", "background": "[P1429 平面最近点对（加强版）](https://www.luogu.com.cn/problem/P1429)里最高赞题解写道：\n\n> 我们充分发扬人类智慧：  \n> 将所有点全部绕原点旋转同一个角度，然后按 $x$ 坐标排序  \n> 根据数学直觉，在随机旋转后，答案中的两个点在数组中肯定不会离得太远  \n> 所以我们只取每个点向后的 $5$ 个点来计算答案  \n这样速度快得飞起，在 $n=1000000$ 时都可以在 1s 内卡过\n\n当然，这是错的。\n", "description": "给定 $n$ 个二维欧几里得平面上的点 $p_1, p_2, \\dots, p_n$，请输出距离最近的两个点的距离。", "inputFormat": "输入第一行为一个正整数 $n$，表示点数。\n\n接下来 $n$ 行，第 $i$ 行为用空格隔开的整数 $x_i, y_i$，表示 $p_i = (x_i, y_i)$。\n\n输入保证：没有两个坐标完全相同的点。", "outputFormat": "输出一行，包含一个整数 $D^2$，表示距离最近的两个点的距离的**平方**。\n\n由于输入的点为整点，因此这个值一定是整数。", "hint": "对于第二组样例，$(1, 9)$、$(0, 10)$ 两个点最近，距离为 $\\sqrt 2$，因此你需要输出 $2$。\n\n\n\n### 数据范围\n\n对于 $100 \\%$ 的数据，$2 \\leq n \\leq 4 \\times 10^5$，$-10^7 \\leq x_i, y_i \\leq 10^7$。\n\n\n本题目标复杂度是 $O(n \\log ^2 n)$。设置 350ms 时限的原因是：\n1. $O(n \\log ^2 n)$ 参考代码使用 `cin` 不会 TLE。最快的 std 能 $<$ 100ms。\n2. @wlzhouzhuan 的程序能恰好在 350ms 内跑 $1000n$ 次检查。\n3. 150 组测试数据，为了防止卡评测。\n\n2025.2.6 添加了三组 hack 数据（Credit to @[chenbs](https://www.luogu.com.cn/discuss/1056231)）。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "平面最近点对（加强加强版）", "background": "[P1429 平面最近点对（加强版）](https://www.luogu.com.cn/problem/P1429)里最高赞题解写道：\n\n> 我们充分发扬人类智慧：  \n> 将所有点全部绕原点旋转同一个角度，然后按 $x$ 坐标排序  \n> 根据数学直觉，在随机旋转后，答案中的两个点在数组中肯定不会离得太远  \n> 所以我们只取每个点向后的 $5$ 个点来计算答案  \n这样速度快得飞起，在 $n=1000000$ 时都可以在 1s 内卡过\n\n当然，这是错的。\n", "description": "给定 $n$ 个二维欧几里得平面上的点 $p_1, p_2, \\dots, p_n$，请输出距离最近的两个点的距离。", "inputFormat": "输入第一行为一个正整数 $n$，表示点数。\n\n接下来 $n$ 行，第 $i$ 行为用空格隔开的整数 $x_i, y_i$，表示 $p_i = (x_i, y_i)$。\n\n输入保证：没有两个坐标完全相同的点。", "outputFormat": "输出一行，包含一个整数 $D^2$，表示距离最近的两个点的距离的**平方**。\n\n由于输入的点为整点，因此这个值一定是整数。", "hint": "对于第二组样例，$(1, 9)$、$(0, 10)$ 两个点最近，距离为 $\\sqrt 2$，因此你需要输出 $2$。\n\n\n\n### 数据范围\n\n对于 $100 \\%$ 的数据，$2 \\leq n \\leq 4 \\times 10^5$，$-10^7 \\leq x_i, y_i \\leq 10^7$。\n\n\n本题目标复杂度是 $O(n \\log ^2 n)$。设置 350ms 时限的原因是：\n1. $O(n \\log ^2 n)$ 参考代码使用 `cin` 不会 TLE。最快的 std 能 $<$ 100ms。\n2. @wlzhouzhuan 的程序能恰好在 350ms 内跑 $1000n$ 次检查。\n3. 150 组测试数据，为了防止卡评测。\n\n2025.2.6 添加了三组 hack 数据（Credit to @[chenbs](https://www.luogu.com.cn/discuss/1056231)）。\n", "locale": "zh-CN"}}}
{"pid": "P7884", "type": "P", "difficulty": 7, "samples": [["10", "4"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "数论", "洛谷原创", "筛法", "模板题"], "title": "【模板】Meissel-Lehmer", "background": "", "description": "给定整数 $n$，求出 $\\pi(n)$ 的值。\n\n$\\pi(n)$ 表示 $1 \\sim n$ 的整数中质数的个数。", "inputFormat": "一行，一个整数 $n$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^{13}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】Meissel-Lehmer", "background": "", "description": "给定整数 $n$，求出 $\\pi(n)$ 的值。\n\n$\\pi(n)$ 表示 $1 \\sim n$ 的整数中质数的个数。", "inputFormat": "一行，一个整数 $n$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^{13}$。", "locale": "zh-CN"}}}
{"pid": "P7885", "type": "P", "difficulty": 2, "samples": [["3\n-2 0 -2 1\n0 1 3 3\n-1 1 1 1", "1\n5\n4"]], "limits": {"time": [2000, 2000, 2000], "memory": [524288, 524288, 524288]}, "tags": ["2021", "O2优化", "洛谷月赛"], "title": "「MCOI-06」Flight", "background": "", "description": "书虫需要移动他的[盾构机](https://www.luogu.com.cn/problem/P7569)。\n\n书虫将 MC 空间抽象为二维平面。他的盾构机现在在 $(a,b)$，而书虫想把盾构机移动到 $(c,d)$。\n\n书虫每一步可以将盾构机向东南西北任何方向行动。但是这盾构机有一个限制：相邻两步不能向同一个方向走！\n\n给定 $(a,b)$ 和 $(c,d)$，请计算书虫最少需要几步将盾构机移动到终点。\n\n求书虫的最少步数。可以证明，他永远可以到达终点。\n\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示表示数据的组数。\n\n接下来 $T$ 行，每行四个整数 $a,b,c,d$，代表一组数据，其中 $(a,b)$ 为起点，$(c,d)$ 为终点。", "outputFormat": "输出 $T$ 行，第 $i$ 行代表第 $i$ 组数据的答案。", "hint": "#### 样例 1 解释\n\n - 对于第一组，最优策略为 $(-2,0)\\rarr(-2,1)$。\n - 对于第二组，最优策略为 $(0,1)\\rarr(1,1)\\rarr(1,2)\\rarr(2,2)\\rarr(2,3)\\rarr(3,3)$。\n - 对于第三组，最优策略之一为 $(-1,1)\\rarr (0,1)\\rarr(0,0)\\rarr(1,0)\\rarr(1,1)$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（29 pts）：$0\\le a,b,c,d\\le 3$。\n - Subtask 2（29 pts）：$a=c$。\n - Subtask 3（42 pts）：无特殊限制。\n\n对于所有数据，$1\\le T\\le 10^5$，$|a|,|b|,|c|,|d|\\le10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Flight", "background": "", "description": "书虫需要移动他的[盾构机](https://www.luogu.com.cn/problem/P7569)。\n\n书虫将 MC 空间抽象为二维平面。他的盾构机现在在 $(a,b)$，而书虫想把盾构机移动到 $(c,d)$。\n\n书虫每一步可以将盾构机向东南西北任何方向行动。但是这盾构机有一个限制：相邻两步不能向同一个方向走！\n\n给定 $(a,b)$ 和 $(c,d)$，请计算书虫最少需要几步将盾构机移动到终点。\n\n求书虫的最少步数。可以证明，他永远可以到达终点。\n\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示表示数据的组数。\n\n接下来 $T$ 行，每行四个整数 $a,b,c,d$，代表一组数据，其中 $(a,b)$ 为起点，$(c,d)$ 为终点。", "outputFormat": "输出 $T$ 行，第 $i$ 行代表第 $i$ 组数据的答案。", "hint": "#### 样例 1 解释\n\n - 对于第一组，最优策略为 $(-2,0)\\rarr(-2,1)$。\n - 对于第二组，最优策略为 $(0,1)\\rarr(1,1)\\rarr(1,2)\\rarr(2,2)\\rarr(2,3)\\rarr(3,3)$。\n - 对于第三组，最优策略之一为 $(-1,1)\\rarr (0,1)\\rarr(0,0)\\rarr(1,0)\\rarr(1,1)$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（29 pts）：$0\\le a,b,c,d\\le 3$。\n - Subtask 2（29 pts）：$a=c$。\n - Subtask 3（42 pts）：无特殊限制。\n\n对于所有数据，$1\\le T\\le 10^5$，$|a|,|b|,|c|,|d|\\le10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P7886", "type": "P", "difficulty": 2, "samples": [["3\n3 3 3\n3 3 33\n6 6 4", "YES\n1 1 2\n1 2 2\n3 3 3\nNO\nYES\n1 1 2 2 3 3\n1 2 2 4 4 3\n1 5 5 4 6 3\n5 5 7 4 6 6\n8 7 7 7 9 6\n8 8 8 9 9 9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "O2优化", "洛谷月赛"], "title": "「MCOI-06」Gerrymandering", "background": "", "description": "给定正整数 $n,m,k$，能否将一个 $n\\times m$ 表格染色，使得每一个颜色形成恰好一个连通块，并且每一个连通块大小为 $k$？\n\n如果存在，请构造一个合法方案。", "inputFormat": "**本题有多组数据。**  \n\n第一行一个正整数 $T$，表示表示数据的组数。  \n\n接下来 $T$ 行，每行三个正整数 $n,m,k$。", "outputFormat": "输出 $T$ 行，第 $i$ 行含第 $i$ 组数据的答案。如果存在，输出 `YES`，否则，输出 `NO`。  \n\n如果存在，接下来输出 $n$ 行，其中每行 $m$ 个正整数，其中每一个正整数小于等于 $10^9$ 并且形成一个大小恰好为 $k$ 的连通块。", "hint": "#### 样例 1 解释\n\n数据组 3 的合法输出之一：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xxqa4azm.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（20 pts）：$k=1$。\n - Subtask 2（30 pts）：$n=1$。\n - Subtask 3（50 pts）：没有特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,m,k,T,\\sum nm\\le10^{6}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Gerrymandering", "background": "", "description": "给定正整数 $n,m,k$，能否将一个 $n\\times m$ 表格染色，使得每一个颜色形成恰好一个连通块，并且每一个连通块大小为 $k$？\n\n如果存在，请构造一个合法方案。", "inputFormat": "**本题有多组数据。**  \n\n第一行一个正整数 $T$，表示表示数据的组数。  \n\n接下来 $T$ 行，每行三个正整数 $n,m,k$。", "outputFormat": "输出 $T$ 行，第 $i$ 行含第 $i$ 组数据的答案。如果存在，输出 `YES`，否则，输出 `NO`。  \n\n如果存在，接下来输出 $n$ 行，其中每行 $m$ 个正整数，其中每一个正整数小于等于 $10^9$ 并且形成一个大小恰好为 $k$ 的连通块。", "hint": "#### 样例 1 解释\n\n数据组 3 的合法输出之一：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xxqa4azm.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（20 pts）：$k=1$。\n - Subtask 2（30 pts）：$n=1$。\n - Subtask 3（50 pts）：没有特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,m,k,T,\\sum nm\\le10^{6}$。", "locale": "zh-CN"}}}
{"pid": "P7887", "type": "P", "difficulty": 4, "samples": [["2\n3\n3 1 9\n2 2 16\n1 3 15\n6\n3 6 246\n5 7 283\n2 7 179\n4 6 214\n8 7 337\n3 5 151", "1\n1 2 3\n1\n8 8 0 6 7 8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "O2优化", "洛谷月赛"], "title": "「MCOI-06」Existence of Truth", "background": "", "description": "可能存在一个非负整数数序列 $a_1,a_2,\\dots,a_n$ 使得 $0\\le a_i<10^9+7$。\n\n给定 $x_1,x_2,\\dots,x_n$，$y_1,y_2,\\dots,y_n$，$z_1,z_2,\\dots,z_n$，已知对于 $1\\le i\\le n$ 满足：\n\n$$x_i\\left(\\sum_{j=1}^ia_j\\right)+y_i\\left(\\sum_{j=i}^na_j\\right)\\equiv z_i\\pmod{10^9+7}$$\n\n求 $a_1,a_2,\\dots,a_n$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示表示数据的组数。对于每一组数据：\n\n第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行三个正整数 $x_i,y_i,z_i$。", "outputFormat": "对于每一组数据，依次输出：\n\n第一行一个非负整数 $k$，为合法解数量。\n\n如果 $k=1$，第二行输出 $n$ 个非负整数，依次为 $a_1,a_2,\\dots,a_n$。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（10 pts）：$n=1$。\n - Subtask 2（19 pts）：$\\sum n\\le100$。\n - Subtask 3（19 pts）：$x_i=y_i=1$。\n - Subtask 4（22 pts）：保证有**唯一解。**\n - Subtask 5（30 pts）：无特殊限制。\n\n对于所有数据：\n\n - $1\\le n,\\sum n\\le 2\\times10^5$；\n - $1\\le x_i,y_i<10^9+7$；\n - $0\\le z_i<10^9+7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Existence of Truth", "background": "", "description": "可能存在一个非负整数数序列 $a_1,a_2,\\dots,a_n$ 使得 $0\\le a_i<10^9+7$。\n\n给定 $x_1,x_2,\\dots,x_n$，$y_1,y_2,\\dots,y_n$，$z_1,z_2,\\dots,z_n$，已知对于 $1\\le i\\le n$ 满足：\n\n$$x_i\\left(\\sum_{j=1}^ia_j\\right)+y_i\\left(\\sum_{j=i}^na_j\\right)\\equiv z_i\\pmod{10^9+7}$$\n\n求 $a_1,a_2,\\dots,a_n$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示表示数据的组数。对于每一组数据：\n\n第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行三个正整数 $x_i,y_i,z_i$。", "outputFormat": "对于每一组数据，依次输出：\n\n第一行一个非负整数 $k$，为合法解数量。\n\n如果 $k=1$，第二行输出 $n$ 个非负整数，依次为 $a_1,a_2,\\dots,a_n$。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（10 pts）：$n=1$。\n - Subtask 2（19 pts）：$\\sum n\\le100$。\n - Subtask 3（19 pts）：$x_i=y_i=1$。\n - Subtask 4（22 pts）：保证有**唯一解。**\n - Subtask 5（30 pts）：无特殊限制。\n\n对于所有数据：\n\n - $1\\le n,\\sum n\\le 2\\times10^5$；\n - $1\\le x_i,y_i<10^9+7$；\n - $0\\le z_i<10^9+7$。", "locale": "zh-CN"}}}
{"pid": "P7888", "type": "P", "difficulty": 5, "samples": [["ab", "5"], ["sapnap", "593"], ["abcbdabcbabcd", "938773"], ["tobeornottobethatisthequestion", "769276982"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "O2优化", "组合数学", "洛谷月赛"], "title": "「MCOI-06」Distinct Subsequences", "background": "", "description": "给定一个由小写字符构成的字符串 $S$。\n\n令一个字符串的价值为该串的**本质不同**非空子序列个数，其中子序列可以为整体。\n\n求 $S$ **所有**子序列的价值和。答案对 $10^9+7$ 取模。", "inputFormat": "第一行一个由小写字符构成的字符串 $S$。", "outputFormat": "输出一行，为答案。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（5 pts）：$|S|\\le 11$。\n - Subtask 2（10 pts）：$|S|\\le 22$。\n - Subtask 3（20 pts）：$|S|\\le 100$ 并 $S$ 仅由 `a`，`b` 两个字符构成。\n - Subtask 4（30 pts）：$|S|\\le 5000$。\n - Subtask 5（35 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le |S|\\le 10^6$，保证 $S$ 仅由小写字符构成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Distinct Subsequences", "background": "", "description": "给定一个由小写字符构成的字符串 $S$。\n\n令一个字符串的价值为该串的**本质不同**非空子序列个数，其中子序列可以为整体。\n\n求 $S$ **所有**子序列的价值和。答案对 $10^9+7$ 取模。", "inputFormat": "第一行一个由小写字符构成的字符串 $S$。", "outputFormat": "输出一行，为答案。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（5 pts）：$|S|\\le 11$。\n - Subtask 2（10 pts）：$|S|\\le 22$。\n - Subtask 3（20 pts）：$|S|\\le 100$ 并 $S$ 仅由 `a`，`b` 两个字符构成。\n - Subtask 4（30 pts）：$|S|\\le 5000$。\n - Subtask 5（35 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le |S|\\le 10^6$，保证 $S$ 仅由小写字符构成。", "locale": "zh-CN"}}}
{"pid": "P7889", "type": "P", "difficulty": 6, "samples": [["10 6\n1 1 2 2 3 5 5 5 6\n5 2 3 1 -5 -7 1 1 1 2\n1 0\n1 -2\n1 3\n2 1\n5 0\n5 -2", "11\n4\n34\n7\n-2\n-7"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2021", "O2优化", "洛谷月赛"], "title": "「MCOI-06」Eert Tuc Knil", "background": "", "description": "给定一颗 $n$ 个节点有根树，第 $i$ 节点权值为 $a_i$。\n\n在这个树上支持一种询问：\n\n - 给定节点 $u$ 和参数 $x$，**假如** 所有节点点权加 $x$，**在这种情况下，求：** 对于所有完全在 $u$ 子树内并包含 $u$ 的连通点集，权值之和最大可能为多少？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，依次为 $2,3,\\dots,n$ 的父亲节点编号，其中保证 $1\\le f_i<i$。\n\n第三行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，依次为 $1,2,\\dots,n$ 点权。\n\n接下来 $m$ 行，每行一个正整数 $u$ 和一个整数 $x$，代表一组询问，其中保证 $1\\le u\\le n$。", "outputFormat": "输出 $m$ 行，每行一个整数，为对应询问的答案。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（5 pts）：$n,m\\le 1000$。\n - Subtask 2（10 pts）：$n,m\\le 10^5$ 并且 $|a_i|,|x|\\le 50$。\n - Subtask 3（15 pts）：$n\\le 1000$。\n - Subtask 4（47 pts）：$n,m\\le 10^5$。\n - Subtask 5（23 pts）：无特殊限制。\n\n对于所有数据，$1\\le n,m\\le 10^6$，$|a_i|,|x|\\le 10^8$，保证 $1\\le u\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Eert Tuc Knil", "background": "", "description": "给定一颗 $n$ 个节点有根树，第 $i$ 节点权值为 $a_i$。\n\n在这个树上支持一种询问：\n\n - 给定节点 $u$ 和参数 $x$，**假如** 所有节点点权加 $x$，**在这种情况下，求：** 对于所有完全在 $u$ 子树内并包含 $u$ 的连通点集，权值之和最大可能为多少？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，依次为 $2,3,\\dots,n$ 的父亲节点编号，其中保证 $1\\le f_i<i$。\n\n第三行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，依次为 $1,2,\\dots,n$ 点权。\n\n接下来 $m$ 行，每行一个正整数 $u$ 和一个整数 $x$，代表一组询问，其中保证 $1\\le u\\le n$。", "outputFormat": "输出 $m$ 行，每行一个整数，为对应询问的答案。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（5 pts）：$n,m\\le 1000$。\n - Subtask 2（10 pts）：$n,m\\le 10^5$ 并且 $|a_i|,|x|\\le 50$。\n - Subtask 3（15 pts）：$n\\le 1000$。\n - Subtask 4（47 pts）：$n,m\\le 10^5$。\n - Subtask 5（23 pts）：无特殊限制。\n\n对于所有数据，$1\\le n,m\\le 10^6$，$|a_i|,|x|\\le 10^8$，保证 $1\\le u\\le n$。", "locale": "zh-CN"}}}
