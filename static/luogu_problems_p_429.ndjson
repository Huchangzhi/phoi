{"pid": "P9699", "type": "P", "difficulty": 5, "samples": [["6\n1 1 1000 1000\n1 2 1000 1000\n3 11 1000 1000\n157 291 5 6\n157 291 3 6\n10126 114514 789 12345", "YES\n2 2\nNO\nYES\n2 10\nYES\n4 5\nNO\nYES\n779 9478"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "2023", "广东", "Special Judge", "O2优化", "进制", "省赛/邀请赛"], "title": "[GDCPC 2023] X Equals Y", "background": "", "description": "For positive integers $X$ and $b \\geq 2$, define $f(X,b)$ as a sequence which describes the base-$b$ representation of $X$, where the $i$-th element in the sequence is the $i$-th least significant digit in the base-$b$ representation of $X$. For example, $f(6, 2) = \\{0, 1, 1\\}$, while $f(233, 17) = \\{12, 13\\}$.\n\nGiven four positive integers $x$, $y$, $A$ and $B$, please find two positive integers $a$ and $b$ satisfying:\n\n- $2 \\leq a \\leq A$\n- $2 \\leq b \\leq B$\n- $f(x, a) = f(y, b)$", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\leq T \\leq 10^3$) indicating the number of test cases. For each test case:\n\nThe first line contains four integers $x$, $y$, $A$ and $B$ ($1 \\leq x,y \\leq 10^9$, $2 \\leq A,B \\leq 10^9$).\n\nIt's guaranteed that there are at most $50$ test cases satisfying $\\max(x, y) > 10^6$.", "outputFormat": "For each test case, if valid positive integers $a$ and $b$ do not exist, output $\\texttt{NO}$ in one line.\n\nOtherwise, first output $\\texttt{YES}$ in one line. Then in the next line, output two integers $a$ and $b$ separated by a space. If there are multiple valid answers, you can output any of them.", "hint": "", "locale": "en", "translations": {"en": {"title": "[GDCPC 2023] X Equals Y", "background": "", "description": "For positive integers $X$ and $b \\geq 2$, define $f(X,b)$ as a sequence which describes the base-$b$ representation of $X$, where the $i$-th element in the sequence is the $i$-th least significant digit in the base-$b$ representation of $X$. For example, $f(6, 2) = \\{0, 1, 1\\}$, while $f(233, 17) = \\{12, 13\\}$.\n\nGiven four positive integers $x$, $y$, $A$ and $B$, please find two positive integers $a$ and $b$ satisfying:\n\n- $2 \\leq a \\leq A$\n- $2 \\leq b \\leq B$\n- $f(x, a) = f(y, b)$", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\leq T \\leq 10^3$) indicating the number of test cases. For each test case:\n\nThe first line contains four integers $x$, $y$, $A$ and $B$ ($1 \\leq x,y \\leq 10^9$, $2 \\leq A,B \\leq 10^9$).\n\nIt's guaranteed that there are at most $50$ test cases satisfying $\\max(x, y) > 10^6$.", "outputFormat": "For each test case, if valid positive integers $a$ and $b$ do not exist, output $\\texttt{NO}$ in one line.\n\nOtherwise, first output $\\texttt{YES}$ in one line. Then in the next line, output two integers $a$ and $b$ separated by a space. If there are multiple valid answers, you can output any of them.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[GDCPC 2023] X Equals Y", "background": "", "description": "对于正整数 $X$ 与 $b \\geq 2$，定义 $f(X,b)$ 为一个描述了 $X$ 在 $b$ 进制表示下的序列，其中序列的第 $i$ 个元素表示 $X$ 在 $b$ 进制表示下从低到高第 $i$ 位的值。例如，$f(6, 2) = \\{0, 1, 1\\}$，而 $f(233, 17) = \\{12, 13\\}$。\n\n给定的四个正整数 $x$，$y$，$A$ 和 $B$，请找到两个正整数 $a$ 和 $b$，同时满足：\n\n- $2 \\leq a \\leq A$\n- $2 \\leq b \\leq B$\n- $f(x, a) = f(y, b)$", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$（$1 \\leq T \\leq 10^3$）表示测试数据组数。对于每组测试数据：\n\n第一行输入四个整数 $x$，$y$，$A$ 和 $B$（$1 \\leq x,y \\leq 10^9$，$2 \\leq A,B \\leq 10^9$）。\n\n保证至多只有 $50$ 组测试数据满足 $\\max(x, y) > 10^6$。", "outputFormat": "对于每组测试数据，如果不存在合法的正整数 $a$ 和 $b$，则输出一行一个字符串 $\\texttt{NO}$。\n\n否则，首先输出一行一个字符串 $\\texttt{YES}$。下一行输出两个由单个空格分隔的整数 $a$ 和 $b$。如果有多种合法答案，您可以输出任意一种。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9700", "type": "P", "difficulty": 3, "samples": [["3\n3 4 5\n2 2\n1 2\n1 4\n3 4\n1 1\n1 3 3\n1 1\n1 2\n1 3\n2 1 1\n2 1", "2\n3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["搜索", "2023", "广东", "O2优化", "枚举", "省赛/邀请赛"], "title": "[GDCPC 2023] Peg Solitaire", "background": "", "description": "$\\textit{Peg Solitaire}$ is a single-player boardgame on a chessboard with $n$ rows and $m$ columns. Each cell of the chessboard either is empty, or contains a chesspiece. Initially, there are $k$ chesspieces on the chessboard.\n\nDuring the game, the player can choose a chesspiece, jump it over an adjacent chesspiece into an empty cell, and finally remove the chesspiece which is jumped over. More precisely, let $(i, j)$ be the cell on the $i$-th row and the $j$-th column, the player can perform operations of the following four types.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ugauif68.png)\n\nGiven the initial state of the chessboard, the player can perform the operations any number of times (including zero times). Calculate the minimum possible number of chesspieces remaining on the chessboard.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\le T \\le 20$) indicating the number of test cases. For each test case:\n\nThe first line contains three integers $n$, $m$ and $k$ ($1 \\le n, m \\le 6$, $1 \\le k \\le \\min(6, n \\times m)$) indicating the number of rows and columns of the chessboard and the initial number of chesspieces.\n\nFor the following $k$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($1 \\le x_i \\le n$, $1 \\le y_i \\le m$) indicating that there is a chesspiece in the cell on the $x_i$-th row and the $y_i$-th column at the beginning. Except from these $k$ cells, all other cells are empty at the beginning. The positions of these $k$ cells contain no duplicate.", "outputFormat": "For each test case output one line containing one integer indicating the minimum possible number of chesspieces remaining on the chessboard.\n", "hint": "The first sample test case is explained as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aragowha.png)\n\nFor the second sample test case, as the chessboard does not contain empty cell at the beginning, the player cannot perform any operation.\n\nFor the third sample test case, as the chessboard has less than three cells, the player cannot perform any operation.\n", "locale": "en", "translations": {"en": {"title": "[GDCPC 2023] Peg Solitaire", "background": "", "description": "$\\textit{Peg Solitaire}$ is a single-player boardgame on a chessboard with $n$ rows and $m$ columns. Each cell of the chessboard either is empty, or contains a chesspiece. Initially, there are $k$ chesspieces on the chessboard.\n\nDuring the game, the player can choose a chesspiece, jump it over an adjacent chesspiece into an empty cell, and finally remove the chesspiece which is jumped over. More precisely, let $(i, j)$ be the cell on the $i$-th row and the $j$-th column, the player can perform operations of the following four types.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ugauif68.png)\n\nGiven the initial state of the chessboard, the player can perform the operations any number of times (including zero times). Calculate the minimum possible number of chesspieces remaining on the chessboard.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\le T \\le 20$) indicating the number of test cases. For each test case:\n\nThe first line contains three integers $n$, $m$ and $k$ ($1 \\le n, m \\le 6$, $1 \\le k \\le \\min(6, n \\times m)$) indicating the number of rows and columns of the chessboard and the initial number of chesspieces.\n\nFor the following $k$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($1 \\le x_i \\le n$, $1 \\le y_i \\le m$) indicating that there is a chesspiece in the cell on the $x_i$-th row and the $y_i$-th column at the beginning. Except from these $k$ cells, all other cells are empty at the beginning. The positions of these $k$ cells contain no duplicate.", "outputFormat": "For each test case output one line containing one integer indicating the minimum possible number of chesspieces remaining on the chessboard.\n", "hint": "The first sample test case is explained as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aragowha.png)\n\nFor the second sample test case, as the chessboard does not contain empty cell at the beginning, the player cannot perform any operation.\n\nFor the third sample test case, as the chessboard has less than three cells, the player cannot perform any operation.\n", "locale": "en"}, "zh-CN": {"title": "[GDCPC 2023] Peg Solitaire", "background": "", "description": "``独立钻石``是一种单人桌游。游戏在 $n$ 行 $m$ 列的棋盘上进行，棋盘上的每一格要么是空格，要么有一枚棋子。一开始，棋盘上共有 $k$ 枚棋子。\n\n在游戏中，玩家可以选择一枚棋子，将它跳过相邻棋子到空格上，并移除被跳过的棋子。具体来说，令 $(i, j)$ 表示位于第 $i$ 行第 $j$ 列的格子，玩家可以执行以下四种操作。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pgosoztu.png)\n\n给定一个初始的棋盘，求经过任意次操作（包括零次）之后，棋盘上最少能剩余几枚棋子。", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$（$1 \\le T \\le 20$）表示测试数据组数。对于每组测试数据：\n\n第一行输入三个整数 $n$，$m$ 和 $k$（$1 \\le n, m \\le 6$，$1 \\le k \\le \\min(6, n \\times m)$）表示棋盘的行数，列数和初始棋子的数量。\n\n对于接下来 $k$ 行，第 $i$ 行输入两个整数 $x_i$ 和 $y_i$（$1 \\le x_i \\le n$，$1 \\le y_i \\le m$）表示一开始第 $x_i$ 行第 $y_i$ 列的格子里有一枚棋子。除了这 $k$ 个格子之外，其它格子一开始都是空格。这 $k$ 个格子的位置不会重复。", "outputFormat": "每组数据输出一行一个整数，表示经过任意次操作（包括零次）之后，棋盘上最少能剩余几枚棋子。\n\n**【样例解释】**\n\n第一组样例数据解释如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aragowha.png)\n\n对于第二组样例数据，由于初始棋盘不存在空格，因此无法进行任何操作。\n\n对于第三组样例数据，由于棋盘不足三格，因此无法进行任何操作。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9701", "type": "P", "difficulty": 6, "samples": [["3\n5 3\n1 2 5\n2 3 4\n1 5 0\n5 0\n5 4\n1 2 1000000000\n1 3 1000000000\n1 4 1000000000\n1 5 1000000000", "4\n4\n1000000003"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "广东", "O2优化", "生成树", "省赛/邀请赛"], "title": "[GDCPC 2023] Classic Problem", "background": "", "description": "Given an undirected complete graph with $n$ vertices and $m$ triples $P_1, P_2, \\cdots, P_m$ where $P_i = (u_i, v_i, w_i)$, it's guaranteed that $1 \\leq u_i < v_i \\leq n$, and for any two triples $P_i$ and $P_j$ with different indices we have $(u_i, v_i) \\ne (u_j, v_j)$.\n\nFor any two vertices $x$ and $y$ in the graph ($1 \\leq x < y \\leq n$), define the weight of the edge connecting them as follows:\n\n- If there exists a triple $P_i$ satisfying $u_i = x$ and $v_i = y$, the weight of edge will be $w_i$.\n- Otherwise, the weight of edge will be $|x - y|$.\n\nCalculate the total weight of edges in the minimum spanning tree of the graph.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\le T \\le 10^5$) indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\leq n \\leq 10^9$, $0 \\leq m \\leq 10^5$) indicating the number of vertices in the graph and the number of triples.\n\nFor the following $m$ lines, the $i$-th line contains three integers $u_i$, $v_i$ and $w_i$ ($1 \\leq u_i < v_i \\leq n$, $0 \\leq w_i \\leq 10^9$) indicating the $i$-th triple. It's guaranteed that for all $1 \\leq i < j \\leq m$ we have $(u_i, v_i) \\ne (u_j, v_j)$.\n\nIt's guaranteed that the sum of $m$ of all test cases will not exceed $5 \\times 10^5$.", "outputFormat": "For each test case output one line containing one integer indicating the total weight of edges in the minimum spanning tree of the graph.", "hint": "The first sample test case is illustrated as follows. The minimum spanning tree is marked by red segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4gvbji8a.png)\n\nThe second sample test case is illustrated as follows. The minimum spanning tree is marked by red segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5cfsvoie.png)\n\nThe third sample test case is illustrated as follows. The minimum spanning tree is marked by red segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iyzb4xpg.png)", "locale": "en", "translations": {"en": {"title": "[GDCPC 2023] Classic Problem", "background": "", "description": "Given an undirected complete graph with $n$ vertices and $m$ triples $P_1, P_2, \\cdots, P_m$ where $P_i = (u_i, v_i, w_i)$, it's guaranteed that $1 \\leq u_i < v_i \\leq n$, and for any two triples $P_i$ and $P_j$ with different indices we have $(u_i, v_i) \\ne (u_j, v_j)$.\n\nFor any two vertices $x$ and $y$ in the graph ($1 \\leq x < y \\leq n$), define the weight of the edge connecting them as follows:\n\n- If there exists a triple $P_i$ satisfying $u_i = x$ and $v_i = y$, the weight of edge will be $w_i$.\n- Otherwise, the weight of edge will be $|x - y|$.\n\nCalculate the total weight of edges in the minimum spanning tree of the graph.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\le T \\le 10^5$) indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\leq n \\leq 10^9$, $0 \\leq m \\leq 10^5$) indicating the number of vertices in the graph and the number of triples.\n\nFor the following $m$ lines, the $i$-th line contains three integers $u_i$, $v_i$ and $w_i$ ($1 \\leq u_i < v_i \\leq n$, $0 \\leq w_i \\leq 10^9$) indicating the $i$-th triple. It's guaranteed that for all $1 \\leq i < j \\leq m$ we have $(u_i, v_i) \\ne (u_j, v_j)$.\n\nIt's guaranteed that the sum of $m$ of all test cases will not exceed $5 \\times 10^5$.", "outputFormat": "For each test case output one line containing one integer indicating the total weight of edges in the minimum spanning tree of the graph.", "hint": "The first sample test case is illustrated as follows. The minimum spanning tree is marked by red segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4gvbji8a.png)\n\nThe second sample test case is illustrated as follows. The minimum spanning tree is marked by red segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5cfsvoie.png)\n\nThe third sample test case is illustrated as follows. The minimum spanning tree is marked by red segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iyzb4xpg.png)", "locale": "en"}, "zh-CN": {"title": "[GDCPC 2023] Classic Problem", "background": "", "description": "给定一张 $n$ 个点的无向完全图与 $m$ 个三元组 $P_1, P_2, \\cdots, P_m$，其中 $P_i = (u_i, v_i, w_i)$。保证 $1 \\leq u_i < v_i \\leq n$，且对于任意两个编号不同的三元组 $P_i$ 和 $P_j$，有 $(u_i, v_i) \\ne (u_j, v_j)$。\n\n对于图中的任意两个节点 $x$ 与 $y$（$1 \\leq x < y \\leq n$），定义它们之间的无向边的边权如下：\n\n- 如果存在一个三元组 $P_i$ 满足 $u_i = x$ 且 $v_i = y$，那么边权为 $w_i$。\n- 否则，边权为 $|x - y|$。\n\n求这张图的最小生成树的边权之和。", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$（$1 \\le T \\le 10^5$）表示测试数据组数。对于每组测试数据：\n\n第一行输入两个整数 $n$ 和 $m$（$1 \\leq n \\leq 10^9$，$0 \\leq m \\leq 10^5$）表示图的点数与三元组的数量。\n\n对于接下来 $m$ 行，第 $i$ 行输入三个整数 $u_i$，$v_i$ 和 $w_i$（$1 \\leq u_i < v_i \\leq n$，$0 \\leq w_i \\leq 10^9$）表示第 $i$ 个三元组。保证对于所有 $1 \\leq i < j \\leq m$ 都有 $(u_i, v_i) \\ne (u_j, v_j)$。\n\n保证所有数据 $m$ 之和不超过 $5 \\times 10^5$。", "outputFormat": "每组数据输出一行一个整数，表示这张图的最小生成树的边权之和。\n\n**【样例解释】**\n\n第一组样例数据如下图所示，最小生成树用红色线段标出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4gvbji8a.png)\n\n第二组样例数据如下图所示，最小生成树用红色线段标出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5cfsvoie.png)\n\n第三组样例数据如下图所示，最小生成树用红色线段标出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iyzb4xpg.png)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9702", "type": "P", "difficulty": 5, "samples": [["2\n4\n1 0\n2 0\n1 1\n0 0\n6\n10 4\n9 7\n5 7\n4 5\n6 4\n9 3", "4\n44"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["计算几何", "2023", "广东", "O2优化", "凸包", "省赛/邀请赛"], "title": "[GDCPC 2023] Computational Geometry", "background": "", "description": "Given a convex polygon $P$ with $n$ vertices, you need to choose two vertices of $P$, so that the line connecting the two vertices will split $P$ into two smaller polygons $Q$ and $R$, both with positive area.\n\nLet $d(Q)$ be the diameter of polygon $Q$ and $d(R)$ be the diameter of polygon $R$, calculate the minimum value of $(d(Q))^2 + (d(R))^2$.\n\nRecall that the diameter of a polygon is the maximum distance between two points inside or on the border of the polygon.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($4 \\le n \\le 5 \\times 10^3$) indicating the number of vertices of the convex polygon $P$.\n\nFor the following $n$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($0 \\le x_i, y_i \\le 10^9$) indicating the $i$-th vertex of the convex polygon $P$. Vertices are given in counter-clockwise order. It's guaranteed that the area of the convex polygon is positive, and there are no two vertices with the same coordinate. It's possible that three vertices lie on the same line.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $5 \\times 10^3$.", "outputFormat": "For each test case output one line containing one integer indicating the answer.", "hint": "The first sample test case is shown as follows. The diameter of smaller polygons are marked by red dashed segments. In fact, $(1, 0)$ and $(1, 1)$ are the only pair of vertices we can choose in this test case. You can't choose $(0, 0)$ and $(2, 0)$, or $(0, 0)$ and $(1, 1)$, because they can't split $P$ into two smaller polygons both with positive area.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6wue7ioc.png)\n\nThe second sample test case is shown as follows. The diameter of smaller polygons are marked by red dashed segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/en9mocsw.png)", "locale": "en", "translations": {"en": {"title": "[GDCPC 2023] Computational Geometry", "background": "", "description": "Given a convex polygon $P$ with $n$ vertices, you need to choose two vertices of $P$, so that the line connecting the two vertices will split $P$ into two smaller polygons $Q$ and $R$, both with positive area.\n\nLet $d(Q)$ be the diameter of polygon $Q$ and $d(R)$ be the diameter of polygon $R$, calculate the minimum value of $(d(Q))^2 + (d(R))^2$.\n\nRecall that the diameter of a polygon is the maximum distance between two points inside or on the border of the polygon.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($4 \\le n \\le 5 \\times 10^3$) indicating the number of vertices of the convex polygon $P$.\n\nFor the following $n$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($0 \\le x_i, y_i \\le 10^9$) indicating the $i$-th vertex of the convex polygon $P$. Vertices are given in counter-clockwise order. It's guaranteed that the area of the convex polygon is positive, and there are no two vertices with the same coordinate. It's possible that three vertices lie on the same line.\n\nIt's guaranteed that the sum of $n$ of all test cases will not exceed $5 \\times 10^3$.", "outputFormat": "For each test case output one line containing one integer indicating the answer.", "hint": "The first sample test case is shown as follows. The diameter of smaller polygons are marked by red dashed segments. In fact, $(1, 0)$ and $(1, 1)$ are the only pair of vertices we can choose in this test case. You can't choose $(0, 0)$ and $(2, 0)$, or $(0, 0)$ and $(1, 1)$, because they can't split $P$ into two smaller polygons both with positive area.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6wue7ioc.png)\n\nThe second sample test case is shown as follows. The diameter of smaller polygons are marked by red dashed segments.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/en9mocsw.png)", "locale": "en"}, "zh-CN": {"title": "[GDCPC 2023] Computational Geometry", "background": "", "description": "给定一个有 $n$ 个顶点的凸多边形 $P$，您需要选择 $P$ 的两个顶点，并用一条同时穿过这两个顶点的直线，将 $P$ 分成两个面积均为正数的小多边形 $Q$ 和 $R$。\n\n记 $d(Q)$ 表示多边形 $Q$ 的直径，$d(R)$ 表示多边形 $R$ 的直径，求 $(d(Q))^2 + (d(R))^2$ 的最小值。\n\n请回忆：一个多边形的直径，指的是该多边形内部或边界上任意两点之间的距离的最大值。", "inputFormat": "有多组测试数据。第一行输入一个整数 $T$ 表示测试数据组数。对于每组测试数据：\n\n第一行输入一个整数 $n$（$4 \\le n \\le 5 \\times 10^3$）表示凸多边形 $P$ 的顶点数量。\n\n对于接下来 $n$ 行，第 $i$ 行输入两个整数 $x_i$ 和 $y_i$（$0 \\le x_i, y_i \\le 10^9$），表示凸多边形 $P$ 的第 $i$ 个顶点。顶点按逆时针顺序给出。保证该凸多边形面积为正，且没有顶点会重合。可能存在三个顶点位于同一条直线上的情况。\n\n保证所有数据 $n$ 之和不超过 $5 \\times 10^3$。", "outputFormat": "每组数据输出一行一个整数表示答案。\n\n**【样例解释】**\n\n第一组样例数据如下图所示。小多边形的直径用红色虚线标出。事实上，顶点 $(1, 0)$ 和 $(1, 1)$ 是这一组数据中唯一能选择的一对顶点。您不能选择顶点 $(0, 0)$ 和 $(2, 0)$，或顶点 $(0, 0)$ 和 $(1, 1)$，因为它们无法将 $P$ 分成两个面积均为正数的小多边形。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6wue7ioc.png)\n\n第二组样例数据如下图所示。小多边形的直径用红色虚线标出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/en9mocsw.png)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9703", "type": "P", "difficulty": 4, "samples": [["3\n2 1 3\n3 1 4\n5 1 3", "4 3\n5 2\n10 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化", "枚举"], "title": "「TFOI R1」Average Number", "background": "**题目背景与题意无关，可直接阅读题目描述。**\n\n有一种人叫做「别人家的妹妹」，小 A 对此感触颇深。\n\n小 A 的妹妹——小 L——经常把小 A 的藏书偷走看，小 A 对此很是头疼。\n\n这一次，强迫症小 A 正在收拾他的藏书，小 L 趁小 A 不注意偷走了一本。\n\n「还给我。」\n\n『不给。不过。。。如果你能猜出我手上的书的编号，我就还给你。』\n\n小 A 为了方便拿取和整理他的藏书，特意给每本书从一开始编了号。\n\n「开玩笑，我的书这么多，我怎么猜？」\n\n『嗯。这样吧，我告诉你剩下的那堆书的编号平均值。怎么样，这个提示够了吧。』\n\n「。。。」\n\n小 A 的藏书多到他都不知道有多少本，但是作为一个合格的 OIer，小 A 借助计算机成功算出了答案。只不过，他想要以这个问题来考验你一下。", "description": "你知道 $\\dfrac{\\left(\\sum\\limits^{n}_ {i = 1}i \\right) - m}{n - 1}$ 的值，其中 $m \\in [1, n]$，$n$ 和 $m$ 均为正整数，你要求出 $n$ 和 $m$ 的值，保证有解。\n\n如果有多种可行解，那么请输出 $n$ 较小的那一组解。\n\n多组测试数据。", "inputFormat": "第一行，一个正整数 $T$ 表示数据组数。\n\n接下来 $T$ 行，每行三个非负整数 $a, b, c$ ，表示平均值为 $a + \\dfrac{b}{c}$ 。", "outputFormat": "共 $T$ 行，每行两个正整数，分别表示 $n$ 和 $m$。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 1（5 points）：$T \\leqslant 10$，$n \\leqslant 10^3$。\n- Subtask 2（5 points）：$T \\leqslant 10^3$，$n \\leqslant 10^3$。\n- Subtask 3（5 points）：$T \\leqslant 10$，$n \\leqslant 5\\times 10^5$。\n- Subtask 4（40 points）：$T \\leqslant 10^3$，$n \\leqslant 10^{18}$。\n- Subtask 5（45 points）：无特殊限制。\n\n对于所有数据，$1 \\leqslant m \\leqslant n \\leqslant 10 ^ {18}$，$n \\not = 1$，$1 \\leqslant T \\leqslant 2 \\times 10 ^{5}$，$1 \\leqslant a \\leqslant 10 ^{18}$，$0 \\leqslant b < c \\leqslant 10 ^ {18}$ 。\n\n**保证 $\\dfrac{b}{c}$ 是最简真分数。特别的，当 $b=0$ 时，$c=1$。**\n\n---\n\n**题目背景（续）**\n\n『你。。你是怎么猜出来？』\n\n小 L 说话之际，看着小 A 的眼神中的惊讶又多了一份崇拜。\n\n「呵，这种难度的问题怎么可能难得到我？」\n\n『啊。既然是这样子的话，那就再来玩一次吧！』\n\n「。。。」", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TFOI R1」Average Number", "background": "**题目背景与题意无关，可直接阅读题目描述。**\n\n有一种人叫做「别人家的妹妹」，小 A 对此感触颇深。\n\n小 A 的妹妹——小 L——经常把小 A 的藏书偷走看，小 A 对此很是头疼。\n\n这一次，强迫症小 A 正在收拾他的藏书，小 L 趁小 A 不注意偷走了一本。\n\n「还给我。」\n\n『不给。不过。。。如果你能猜出我手上的书的编号，我就还给你。』\n\n小 A 为了方便拿取和整理他的藏书，特意给每本书从一开始编了号。\n\n「开玩笑，我的书这么多，我怎么猜？」\n\n『嗯。这样吧，我告诉你剩下的那堆书的编号平均值。怎么样，这个提示够了吧。』\n\n「。。。」\n\n小 A 的藏书多到他都不知道有多少本，但是作为一个合格的 OIer，小 A 借助计算机成功算出了答案。只不过，他想要以这个问题来考验你一下。", "description": "你知道 $\\dfrac{\\left(\\sum\\limits^{n}_ {i = 1}i \\right) - m}{n - 1}$ 的值，其中 $m \\in [1, n]$，$n$ 和 $m$ 均为正整数，你要求出 $n$ 和 $m$ 的值，保证有解。\n\n如果有多种可行解，那么请输出 $n$ 较小的那一组解。\n\n多组测试数据。", "inputFormat": "第一行，一个正整数 $T$ 表示数据组数。\n\n接下来 $T$ 行，每行三个非负整数 $a, b, c$ ，表示平均值为 $a + \\dfrac{b}{c}$ 。", "outputFormat": "共 $T$ 行，每行两个正整数，分别表示 $n$ 和 $m$。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 1（5 points）：$T \\leqslant 10$，$n \\leqslant 10^3$。\n- Subtask 2（5 points）：$T \\leqslant 10^3$，$n \\leqslant 10^3$。\n- Subtask 3（5 points）：$T \\leqslant 10$，$n \\leqslant 5\\times 10^5$。\n- Subtask 4（40 points）：$T \\leqslant 10^3$，$n \\leqslant 10^{18}$。\n- Subtask 5（45 points）：无特殊限制。\n\n对于所有数据，$1 \\leqslant m \\leqslant n \\leqslant 10 ^ {18}$，$n \\not = 1$，$1 \\leqslant T \\leqslant 2 \\times 10 ^{5}$，$1 \\leqslant a \\leqslant 10 ^{18}$，$0 \\leqslant b < c \\leqslant 10 ^ {18}$ 。\n\n**保证 $\\dfrac{b}{c}$ 是最简真分数。特别的，当 $b=0$ 时，$c=1$。**\n\n---\n\n**题目背景（续）**\n\n『你。。你是怎么猜出来？』\n\n小 L 说话之际，看着小 A 的眼神中的惊讶又多了一份崇拜。\n\n「呵，这种难度的问题怎么可能难得到我？」\n\n『啊。既然是这样子的话，那就再来玩一次吧！』\n\n「。。。」", "locale": "zh-CN"}}}
{"pid": "P9704", "type": "P", "difficulty": 4, "samples": [["7 2\n5 1 7 12 5 9 6\n1 2 5\n3 1 1\n6 2 9\n4 6 14\n7 6 4\n5 2 10\n2 4 5 7\n1 1 3 3", "19211\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "O2优化", "ST 表"], "title": "「TFOI R1」Tree Home", "background": "阳光开朗大男孩天才 Z 今天要向蕉太狼表白力！\n\n众所周知，蕉太狼是一个很可爱的女孩纸。\n从前的天才 Z 总是担心因为自己表白失败而受到别人的嘲笑。但是今天，天才 Z 就要做出自己一生中最重要的一件事，那就是真诚地表白，无论后果如何。\n\n出乎意料，蕉太狼其实也喜欢着天才 Z！\n\n天才 Z 开心得像个 0#。\n\n但是没过多久，天才 Z 就被甩力，原因蕉太狼发现天才 Z 对自己的闺蜜有非分之想。\n\n天才 Z 拿出了自己的树状家谱，问候起了自己的祖宗们。", "description": "有一个由 $n - 1$ 条**带权无向边**连接成的有 $n$ 个节点的树，每个节点都有它对应的**编号**以及**权值** $v_{i}$，整棵树的根节点为编号为 $1$ 的节点。\n\n令 $f(a, b, c) = (a - b) \\times \\left[a^2 + b^2 + a \\times b + 3 \\times c \\times (a + b + c)\\right]$，其中 $a,b,c$ 可以为任意整数。同时用 $d_i$ 表示 $i$ 到根节点的每条边的**边权**之和。\n\n现在天才 Z 要进行 $T$ 次询问，每次询问给定四个正整数 $l_{1},r_{1},l_{2},r_{2}$，你要从**编号**在区间 $[l_{1}, r_{1}]$ 和 $[l_{2}, r_{2}]$ 的点中各选择一个点 $p$ 和 $q$，当然你选择的两个点需要保证 $p \\neq q$。用 $r$ 表示 $p$ 和 $q$ 的最近公共祖先，要使得 $|f(d_{p} - d_{r}, d_{q} - d_{r}, d_{r})| + |v_{p} - v_{q}|$ 的值最大，而你需要对每次询问输出这个最大值。", "inputFormat": "第一行输入两个正整数 $n$ 和 $T$，表示这棵树的节点个数以及询问次数。\n\n第二行输入 $n$ 个整数，第 $i$ 个数表示编号为 $i$ 的节点的权值。\n\n接下来 $n - 1$ 行，每行输入三个整数 $u,v,w$，表示节点 $u$ 到节点 $v$ 之间有一条边权为 $w$ 的无向边。\n\n接下来 $T$ 行，每行输入四个整数 $l_{1},r_{1},l_{2},r_{2}$，表示一次询问（意义如题面所述）。", "outputFormat": "输出 $T$ 行，每行输出一个整数，表示每次询问的答案。", "hint": "#### 样例解释\n\n对于第一次询问，我们在两个区间分别取 $4$ 号点和 $6$ 号点即可得出答案 $19211$。\n\n对于第二次询问，两个区间都只能取一个节点，所以答案为 $3$。\n\n\n#### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 1（5 points）：$1 \\leqslant n, T \\leqslant 10$。\n- Subtask 2（10 points）：$1 \\leqslant n, T \\leqslant 100$。\n- Subtask 3（30 points）：$1 \\leqslant n, T \\leqslant 3000$。\n- Subtask 4（55 points）：无特殊限制。\n\n对于所有数据，$1 \\leqslant n, T \\leqslant 2 \\times 10^5$，$0 \\leqslant |w| \\leqslant 25$，$1 \\leqslant v_{x} \\leqslant 10^9$，$1 \\leqslant l_{1} \\leqslant r_{1} \\leqslant n$，$1 \\leqslant l_{2} \\leqslant r_{2} \\leqslant n$，保证树中最大深度不超过 $100$。\n\n**注意：两个区间 $[l_{1}, r_{1}]$ 和 $[l_{2}, r_{2}]$ 可能有重合部分。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TFOI R1」Tree Home", "background": "阳光开朗大男孩天才 Z 今天要向蕉太狼表白力！\n\n众所周知，蕉太狼是一个很可爱的女孩纸。\n从前的天才 Z 总是担心因为自己表白失败而受到别人的嘲笑。但是今天，天才 Z 就要做出自己一生中最重要的一件事，那就是真诚地表白，无论后果如何。\n\n出乎意料，蕉太狼其实也喜欢着天才 Z！\n\n天才 Z 开心得像个 0#。\n\n但是没过多久，天才 Z 就被甩力，原因蕉太狼发现天才 Z 对自己的闺蜜有非分之想。\n\n天才 Z 拿出了自己的树状家谱，问候起了自己的祖宗们。", "description": "有一个由 $n - 1$ 条**带权无向边**连接成的有 $n$ 个节点的树，每个节点都有它对应的**编号**以及**权值** $v_{i}$，整棵树的根节点为编号为 $1$ 的节点。\n\n令 $f(a, b, c) = (a - b) \\times \\left[a^2 + b^2 + a \\times b + 3 \\times c \\times (a + b + c)\\right]$，其中 $a,b,c$ 可以为任意整数。同时用 $d_i$ 表示 $i$ 到根节点的每条边的**边权**之和。\n\n现在天才 Z 要进行 $T$ 次询问，每次询问给定四个正整数 $l_{1},r_{1},l_{2},r_{2}$，你要从**编号**在区间 $[l_{1}, r_{1}]$ 和 $[l_{2}, r_{2}]$ 的点中各选择一个点 $p$ 和 $q$，当然你选择的两个点需要保证 $p \\neq q$。用 $r$ 表示 $p$ 和 $q$ 的最近公共祖先，要使得 $|f(d_{p} - d_{r}, d_{q} - d_{r}, d_{r})| + |v_{p} - v_{q}|$ 的值最大，而你需要对每次询问输出这个最大值。", "inputFormat": "第一行输入两个正整数 $n$ 和 $T$，表示这棵树的节点个数以及询问次数。\n\n第二行输入 $n$ 个整数，第 $i$ 个数表示编号为 $i$ 的节点的权值。\n\n接下来 $n - 1$ 行，每行输入三个整数 $u,v,w$，表示节点 $u$ 到节点 $v$ 之间有一条边权为 $w$ 的无向边。\n\n接下来 $T$ 行，每行输入四个整数 $l_{1},r_{1},l_{2},r_{2}$，表示一次询问（意义如题面所述）。", "outputFormat": "输出 $T$ 行，每行输出一个整数，表示每次询问的答案。", "hint": "#### 样例解释\n\n对于第一次询问，我们在两个区间分别取 $4$ 号点和 $6$ 号点即可得出答案 $19211$。\n\n对于第二次询问，两个区间都只能取一个节点，所以答案为 $3$。\n\n\n#### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 1（5 points）：$1 \\leqslant n, T \\leqslant 10$。\n- Subtask 2（10 points）：$1 \\leqslant n, T \\leqslant 100$。\n- Subtask 3（30 points）：$1 \\leqslant n, T \\leqslant 3000$。\n- Subtask 4（55 points）：无特殊限制。\n\n对于所有数据，$1 \\leqslant n, T \\leqslant 2 \\times 10^5$，$0 \\leqslant |w| \\leqslant 25$，$1 \\leqslant v_{x} \\leqslant 10^9$，$1 \\leqslant l_{1} \\leqslant r_{1} \\leqslant n$，$1 \\leqslant l_{2} \\leqslant r_{2} \\leqslant n$，保证树中最大深度不超过 $100$。\n\n**注意：两个区间 $[l_{1}, r_{1}]$ 和 $[l_{2}, r_{2}]$ 可能有重合部分。**", "locale": "zh-CN"}}}
{"pid": "P9705", "type": "P", "difficulty": 5, "samples": [["4\n2 3 2 3\n2 3 2 3\n1\n1 3", "10\n1 2\n2 1\n2 3\n3 2\n2 4\n4 2\n4 1\n1 4\n4 3\n3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["网络流", "Special Judge", "O2优化", "图论建模"], "title": "「TFOI R1」Unknown Graph", "background": "小 A 飘到了一个岛屿群里，这些岛屿都有单向桥相连接，没有两座桥连接的起始岛屿和终止岛屿都相同，更不会有桥连接一个岛屿。\n\n但这里全是迷雾，小 A 在一个岛上只能看到这个岛与多少座桥相连。\n\n小 A 想要知道整个岛屿群的形态，但是他并不会，所以找到了你。\n\n如果有多种情况，你只需要告诉小 A 任意一种就行。", "description": "有一张 $n$ 个节点的**无重边无自环的有向图**（可以不连通），每个节点的编号为 $1 \\sim n$，你知道每个节点的入度和出度。\n\n另外还有 $m$ 条限制，每条限制给定两个点 $x_{i}$ 和 $y_{i}$，表示图中不存在有向边 $(x_{i}, y_{i})$，请你求出一种满足要求的图的形态。\n\n若有多种情况，输出任意一种即可，保证有解。", "inputFormat": "第一行一个正整数 $n$ 表示节点数量。\n\n第二行 $n$ 个整数 $a_{i}$，表示编号为 $i$ 的节点的入度为 $a_{i}$。\n\n第三行 $n$ 个整数 $b_{i}$，表示编号为 $i$ 的节点的出度为 $b_{i}$。\n\n第四行一个整数 $m$，表示限制个数。\n\n对于接下来的 $m$ 行，每行两个正整数 $x_{i}, y_{i}$ 表示一组限制。", "outputFormat": "第一行一个正整数 $k$ 表示满足限制的图有多少条边。\n\n接下来 $k$ 行，每行两个正整数 $u_{i}$ 和 $v_{i}$ 表示编号为 $u_{i}$ 的结点和编号为 $v_{i}$ 的结点之间有一条有向边。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 1（10 points）：$n \\leqslant 10$。\n- Subtask 2（10 points）：$n = 10^3$，$a_{i} = b_{i} = 1$，$m = 0$。\n- Subtask 3（20 points）：$n \\leqslant 100$。\n- Subtask 4（60 points）：无特殊限制。\n\n对于所有数据，$2 \\leqslant n \\leqslant 10^{3}$，$0 \\leqslant a_{i}, b_{i} < n$，$1\\leqslant \\sum{a_i} \\leqslant 10^{5}$，$0 \\leqslant m \\leqslant 5 \\times 10^4$，$1 \\leqslant x_i,y_i \\leqslant n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TFOI R1」Unknown Graph", "background": "小 A 飘到了一个岛屿群里，这些岛屿都有单向桥相连接，没有两座桥连接的起始岛屿和终止岛屿都相同，更不会有桥连接一个岛屿。\n\n但这里全是迷雾，小 A 在一个岛上只能看到这个岛与多少座桥相连。\n\n小 A 想要知道整个岛屿群的形态，但是他并不会，所以找到了你。\n\n如果有多种情况，你只需要告诉小 A 任意一种就行。", "description": "有一张 $n$ 个节点的**无重边无自环的有向图**（可以不连通），每个节点的编号为 $1 \\sim n$，你知道每个节点的入度和出度。\n\n另外还有 $m$ 条限制，每条限制给定两个点 $x_{i}$ 和 $y_{i}$，表示图中不存在有向边 $(x_{i}, y_{i})$，请你求出一种满足要求的图的形态。\n\n若有多种情况，输出任意一种即可，保证有解。", "inputFormat": "第一行一个正整数 $n$ 表示节点数量。\n\n第二行 $n$ 个整数 $a_{i}$，表示编号为 $i$ 的节点的入度为 $a_{i}$。\n\n第三行 $n$ 个整数 $b_{i}$，表示编号为 $i$ 的节点的出度为 $b_{i}$。\n\n第四行一个整数 $m$，表示限制个数。\n\n对于接下来的 $m$ 行，每行两个正整数 $x_{i}, y_{i}$ 表示一组限制。", "outputFormat": "第一行一个正整数 $k$ 表示满足限制的图有多少条边。\n\n接下来 $k$ 行，每行两个正整数 $u_{i}$ 和 $v_{i}$ 表示编号为 $u_{i}$ 的结点和编号为 $v_{i}$ 的结点之间有一条有向边。", "hint": "**本题采用捆绑测试**。\n\n- Subtask 1（10 points）：$n \\leqslant 10$。\n- Subtask 2（10 points）：$n = 10^3$，$a_{i} = b_{i} = 1$，$m = 0$。\n- Subtask 3（20 points）：$n \\leqslant 100$。\n- Subtask 4（60 points）：无特殊限制。\n\n对于所有数据，$2 \\leqslant n \\leqslant 10^{3}$，$0 \\leqslant a_{i}, b_{i} < n$，$1\\leqslant \\sum{a_i} \\leqslant 10^{5}$，$0 \\leqslant m \\leqslant 5 \\times 10^4$，$1 \\leqslant x_i,y_i \\leqslant n$。", "locale": "zh-CN"}}}
{"pid": "P9706", "type": "P", "difficulty": 6, "samples": [["7 1\n1 4 3\n2 1 2\n3 1 6\n4 3 4\n5 2 4\n6 4 1\n7 5 2", "3\n5\n105\n160\n9\n176\n11"], ["7 1\n1 2 3\n2 3 2\n3 1 2\n4 1 3\n5 4 2\n6 2 1\n7 6 4", "18\n32\n46\n36\n48\n40\n72"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "O2优化", "前缀和", "基环树", "差分"], "title": "「TFOI R1」Ride the Wind and Waves", "background": "Z 教授是 C 班的老师。\n\nZ 教授最近发现一个神奇的现象，他的学生竟然都有自己暗恋的对象，但是没有一个人勇于表白。\n\nZ 教授作为过来人，当然懂得每一个学生心里最真实纯真的想法，以及自认为的爱意情愫。Z 教授想起了初恋蕉太狼，他不想让自己的学生在青春年华失去色彩，于是 Z 教授冒着被开除的风险，主动帮助学生表达心意。\n\n然后 Z 教授被开除了。", "description": "有一棵 $n$ 个节点的内向基环树（**保证弱连通**），树上每条边都有一个权值。现有一个特定参数 $k$。\n\n由于基环树是内向的，所以一个点 $x$ 可能会有无法直接到达的节点。但是我们可以翻转树上的一些有向边，这样 $x$ 就可以到达树上每一个节点。如果一个节点 $x$ 需要**至少**翻转 $k$ 条边才能到达 $y$，则称 $y$ 是 $x$ 的乘风破浪点。在翻转了**最少的边**使得 $x$ 可以到达 $y$ 之后，在 $x$ 到 $y$ 的最短路径上，定义 $F(x, y)$ 为**未翻转**的边的权值之和，$R(x, y)$ 为**已翻转**的边的权值之和。\n\n如果 $y$ 是 $x$ 的乘风破浪点，那么有一个值 $G(x, y)$ 表示 $x$ 到 $y$ 的浪涛值，定义 $G(x, y) = F(x, y) \\times  R(x,y)$。\n\n请你对于每一个节点 $i$，输出 $\\sum G(i, y)$ 的值，其中 $y$ 是 $i$ 的乘风破浪点。", "inputFormat": "第一行输入两个正整数 $n, k$，表示基环树大小和一个比较的参数。\n\n接下来 $n$ 行，每行输入 $u, v, w$ 三个正整数，表示树上存在一条边 $(u, v, w)$，表示其起点为 $u$，终点为 $v$，权值为 $w$。", "outputFormat": "输出 $n$ 行，每行一个正整数，表示每个节点到它的所有乘风破浪点的浪涛值之和。", "hint": "#### 样例解释 #1\n\n拿 $3$ 节点的答案为例子，基环树的形状如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3ocyi6o.png)\n\n可知 $2,5,6,7$ 为 $3$ 的乘风破浪点，统计答案：\n\n- $G(3, 2) = 6 \\times 2 = 12$。\n\n- $G(3, 5) = 6 \\times 6 = 36$。\n\n- $G(3, 6) = 9 \\times 1 = 9$。\n\n- $G(3, 7) = 6 \\times 8 = 48$。\n\n所以 $\\sum G(3, j) = 12 + 36 + 9 + 48$，答案为 $105$。\n\n#### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 1（5 points）：$1 \\leqslant n \\leqslant 10$，**包含特殊性质**。\n- Subtask 2（10 points）：$1 \\leqslant n \\leqslant 5000$，**包含特殊性质**。\n- Subtask 3（25 points）：$1 \\leqslant n \\leqslant 10^5$，**包含特殊性质**。\n- Subtask 4（60 points）：$1 \\leqslant n \\leqslant 10^6$，无特殊限制。\n\n**特殊性质：保证环上节点的个数在 $10^3$ 以内。**\n\n对于所有数据，$1 \\leqslant n \\leqslant 10^6$，$1 \\leqslant k \\leqslant 10$，保证答案不会超过 $10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TFOI R1」Ride the Wind and Waves", "background": "Z 教授是 C 班的老师。\n\nZ 教授最近发现一个神奇的现象，他的学生竟然都有自己暗恋的对象，但是没有一个人勇于表白。\n\nZ 教授作为过来人，当然懂得每一个学生心里最真实纯真的想法，以及自认为的爱意情愫。Z 教授想起了初恋蕉太狼，他不想让自己的学生在青春年华失去色彩，于是 Z 教授冒着被开除的风险，主动帮助学生表达心意。\n\n然后 Z 教授被开除了。", "description": "有一棵 $n$ 个节点的内向基环树（**保证弱连通**），树上每条边都有一个权值。现有一个特定参数 $k$。\n\n由于基环树是内向的，所以一个点 $x$ 可能会有无法直接到达的节点。但是我们可以翻转树上的一些有向边，这样 $x$ 就可以到达树上每一个节点。如果一个节点 $x$ 需要**至少**翻转 $k$ 条边才能到达 $y$，则称 $y$ 是 $x$ 的乘风破浪点。在翻转了**最少的边**使得 $x$ 可以到达 $y$ 之后，在 $x$ 到 $y$ 的最短路径上，定义 $F(x, y)$ 为**未翻转**的边的权值之和，$R(x, y)$ 为**已翻转**的边的权值之和。\n\n如果 $y$ 是 $x$ 的乘风破浪点，那么有一个值 $G(x, y)$ 表示 $x$ 到 $y$ 的浪涛值，定义 $G(x, y) = F(x, y) \\times  R(x,y)$。\n\n请你对于每一个节点 $i$，输出 $\\sum G(i, y)$ 的值，其中 $y$ 是 $i$ 的乘风破浪点。", "inputFormat": "第一行输入两个正整数 $n, k$，表示基环树大小和一个比较的参数。\n\n接下来 $n$ 行，每行输入 $u, v, w$ 三个正整数，表示树上存在一条边 $(u, v, w)$，表示其起点为 $u$，终点为 $v$，权值为 $w$。", "outputFormat": "输出 $n$ 行，每行一个正整数，表示每个节点到它的所有乘风破浪点的浪涛值之和。", "hint": "#### 样例解释 #1\n\n拿 $3$ 节点的答案为例子，基环树的形状如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3ocyi6o.png)\n\n可知 $2,5,6,7$ 为 $3$ 的乘风破浪点，统计答案：\n\n- $G(3, 2) = 6 \\times 2 = 12$。\n\n- $G(3, 5) = 6 \\times 6 = 36$。\n\n- $G(3, 6) = 9 \\times 1 = 9$。\n\n- $G(3, 7) = 6 \\times 8 = 48$。\n\n所以 $\\sum G(3, j) = 12 + 36 + 9 + 48$，答案为 $105$。\n\n#### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 1（5 points）：$1 \\leqslant n \\leqslant 10$，**包含特殊性质**。\n- Subtask 2（10 points）：$1 \\leqslant n \\leqslant 5000$，**包含特殊性质**。\n- Subtask 3（25 points）：$1 \\leqslant n \\leqslant 10^5$，**包含特殊性质**。\n- Subtask 4（60 points）：$1 \\leqslant n \\leqslant 10^6$，无特殊限制。\n\n**特殊性质：保证环上节点的个数在 $10^3$ 以内。**\n\n对于所有数据，$1 \\leqslant n \\leqslant 10^6$，$1 \\leqslant k \\leqslant 10$，保证答案不会超过 $10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P9707", "type": "P", "difficulty": 1, "samples": [["1 3 4", "2"], ["3 6 10", "6"], ["100 1000 911451407", "911273936"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "[KMOI R1] 音波武器", "background": "在 [对 $Y$ 星的军事行动](/problem/P9709) 中，舰队在攻占城市 $p$ 时遇到了一些困难。", "description": "小袁的舰队采用使用音波武器攻击的方式，但是对方的城墙使用了一种特殊材料——普林，导致音波攻击效果不是很好。\n\n我们定义**削弱系数 $m$** 为：收到强度为 $n$ 的音波时，音波在穿透普林后会被削弱为 $n\\bmod m$ 强度的音波。\n\n现在小袁发射了强度为 $l!,(l+1)!,(l+2)!\\dots (r-1)!,r!$ 的 $r-l+1$ 个音波，对方使用了削弱系数为 $k$ 的普林。现在小袁想知道，经过削弱后强度最大的音波的强度是多少。\n\n符号 $!$ 在这里表示阶乘，$x!=1\\times 2\\times\\dots\\times x$。例如 $4!=1\\times2\\times3\\times4$。特别地， $0!=1$。", "inputFormat": "三个正整数 $l,r,k$，意义如上。", "outputFormat": "一个整数 $ans$，表示最大的强度。", "hint": "## 样例 $1$ 解释\n\n最终强度分别是 $1,2,2$，故输出 $2$。\n\n## 样例 $2$ 解释\n\n最终强度分别是 $6,4,0,0$，故输出 $6$。\n\n## 数据范围\n\n对于 $20\\%$ 的数据：$1\\le l\\le r\\le 20$，$1\\le k\\le 10^2$。\n\n对于 $50\\%$ 的数据：$1\\le l\\le r\\le 2000$，$1\\le k\\le 10^5$。\n\n对于 $100\\%$ 的数据：$1\\le l\\le r\\le 2\\times 10^6$，$1\\le k\\le 10^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KMOI R1] 音波武器", "background": "在 [对 $Y$ 星的军事行动](/problem/P9709) 中，舰队在攻占城市 $p$ 时遇到了一些困难。", "description": "小袁的舰队采用使用音波武器攻击的方式，但是对方的城墙使用了一种特殊材料——普林，导致音波攻击效果不是很好。\n\n我们定义**削弱系数 $m$** 为：收到强度为 $n$ 的音波时，音波在穿透普林后会被削弱为 $n\\bmod m$ 强度的音波。\n\n现在小袁发射了强度为 $l!,(l+1)!,(l+2)!\\dots (r-1)!,r!$ 的 $r-l+1$ 个音波，对方使用了削弱系数为 $k$ 的普林。现在小袁想知道，经过削弱后强度最大的音波的强度是多少。\n\n符号 $!$ 在这里表示阶乘，$x!=1\\times 2\\times\\dots\\times x$。例如 $4!=1\\times2\\times3\\times4$。特别地， $0!=1$。", "inputFormat": "三个正整数 $l,r,k$，意义如上。", "outputFormat": "一个整数 $ans$，表示最大的强度。", "hint": "## 样例 $1$ 解释\n\n最终强度分别是 $1,2,2$，故输出 $2$。\n\n## 样例 $2$ 解释\n\n最终强度分别是 $6,4,0,0$，故输出 $6$。\n\n## 数据范围\n\n对于 $20\\%$ 的数据：$1\\le l\\le r\\le 20$，$1\\le k\\le 10^2$。\n\n对于 $50\\%$ 的数据：$1\\le l\\le r\\le 2000$，$1\\le k\\le 10^5$。\n\n对于 $100\\%$ 的数据：$1\\le l\\le r\\le 2\\times 10^6$，$1\\le k\\le 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P9708", "type": "P", "difficulty": 3, "samples": [["2", "4"], ["1000", "476463243"], ["1919810", "193840227"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化", "构造"], "title": "[KMOI R1] 集合 First", "background": "", "description": "有一个集合 $A=\\{1,2,3\\dots,n\\}$。\n\n定义交替和 $G(B)$ 如下：\n\n- 把集合 $B$ 中的元素从大到小排序，得到 $B=\\{b_1,b_2\\dots,b_{cnt}\\}$（$cnt$ 为集合元素个数）。则 $G(B)=\\sum\\limits_{i=1}^{cnt}\\Big((-1)^{i+1}\\times b_i\\Big)$。\n\n例如 $G(\\{1,2,4,6,9\\})=9-6+4-2+1=6$。\n\n特别地，$G(\\empty)=0$。\n\n现在，给定集合 $A=\\{1,2,3,\\dots,n\\}$，小谢想知道对于 $A$ 的**任意子集 $P$**，求出 $G(P)$ 的总和。\n\n由于小谢太菜了，所以请你帮帮忙，**答案对 $911451407$ 取模。**", "inputFormat": "一个正整数 $n$，表示给定的集合 $A=\\{1,2,3,\\dots,n\\}$。", "outputFormat": "一个正整数 $ans$，表示对于 $A$ 的**任意子集 $P$**，$G(P)$ 的总和。\n\n**答案对 $911451407$ 取模。**", "hint": "## 样例 $1$ 解释\n$G(\\empty)=0$\n\n$G(\\{1\\})=1$\n\n$G(\\{1,2\\})=1$\n\n$G(\\{2\\})=2$\n\n故 $ans=G(\\empty)+G(\\{1\\})+G(\\{1,2\\})+G(\\{2\\})=4$。\n\n## 数据范围\n\n**本题采用 subtask 捆绑测试。**\n\n|子任务编号| 测试点 | $n\\le$ | 分值 |\n|:-:| :----------: | :----------: | :----------: |\n|$1$| $1,2$ | $20$ | $15$ |\n|$2$| $3\\sim5$ | $10^3$ | $10$ |\n|$3$| $6\\sim10$ | $10^{9}$ | $30$ |\n|$4$| $11\\sim17$ | $10^{16}$ | $45$ |\n\n对于 $100\\%$ 的数据：$1\\le n\\le 10^{16}$。\n\n## 后记\n\n$$\\color{orange}{小谢：别打我，我下次再也不研究大小超过\\ 30\\ 的集合了。}$$\n\n$$\\color{purple}{你：我*****}$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KMOI R1] 集合 First", "background": "", "description": "有一个集合 $A=\\{1,2,3\\dots,n\\}$。\n\n定义交替和 $G(B)$ 如下：\n\n- 把集合 $B$ 中的元素从大到小排序，得到 $B=\\{b_1,b_2\\dots,b_{cnt}\\}$（$cnt$ 为集合元素个数）。则 $G(B)=\\sum\\limits_{i=1}^{cnt}\\Big((-1)^{i+1}\\times b_i\\Big)$。\n\n例如 $G(\\{1,2,4,6,9\\})=9-6+4-2+1=6$。\n\n特别地，$G(\\empty)=0$。\n\n现在，给定集合 $A=\\{1,2,3,\\dots,n\\}$，小谢想知道对于 $A$ 的**任意子集 $P$**，求出 $G(P)$ 的总和。\n\n由于小谢太菜了，所以请你帮帮忙，**答案对 $911451407$ 取模。**", "inputFormat": "一个正整数 $n$，表示给定的集合 $A=\\{1,2,3,\\dots,n\\}$。", "outputFormat": "一个正整数 $ans$，表示对于 $A$ 的**任意子集 $P$**，$G(P)$ 的总和。\n\n**答案对 $911451407$ 取模。**", "hint": "## 样例 $1$ 解释\n$G(\\empty)=0$\n\n$G(\\{1\\})=1$\n\n$G(\\{1,2\\})=1$\n\n$G(\\{2\\})=2$\n\n故 $ans=G(\\empty)+G(\\{1\\})+G(\\{1,2\\})+G(\\{2\\})=4$。\n\n## 数据范围\n\n**本题采用 subtask 捆绑测试。**\n\n|子任务编号| 测试点 | $n\\le$ | 分值 |\n|:-:| :----------: | :----------: | :----------: |\n|$1$| $1,2$ | $20$ | $15$ |\n|$2$| $3\\sim5$ | $10^3$ | $10$ |\n|$3$| $6\\sim10$ | $10^{9}$ | $30$ |\n|$4$| $11\\sim17$ | $10^{16}$ | $45$ |\n\n对于 $100\\%$ 的数据：$1\\le n\\le 10^{16}$。\n\n## 后记\n\n$$\\color{orange}{小谢：别打我，我下次再也不研究大小超过\\ 30\\ 的集合了。}$$\n\n$$\\color{purple}{你：我*****}$$", "locale": "zh-CN"}}}
{"pid": "P9709", "type": "P", "difficulty": 4, "samples": [["2 20\n1 1\n1 3", "3"], ["3 150\n1 2\n2 4\n4 3", "4"], ["10 10\n1 4\n2 3\n2 6\n3 6\n10 3\n1 5\n4 2\n5 3\n2 8\n9 2", "23"], ["查看附件的 example4.in", "查看附件的 example4.out"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "广度优先搜索 BFS", "生成树"], "title": "[KMOI R1] 军事行动", "background": "$$\\blue{他们来了。}$$\n\n$$\\purple{集结军队，干掉他们，一个不留。}$$\n\n$$\\blue{是！}$$", "description": "喵星边境局势愈发紧张，导致发生边境冲突。喵星军队总司令小袁立即对 $Y$ 星采取军事行动。\n\n整个宇宙可以看作一个平面直角坐标系，城市 $1,2,\\dots,n$ 的坐标分别为 $(x_1,y_1),(x_2,y_2),\\dots(x_n,y_n)$。\n\n现在小袁率领的**若干支**舰队（可以理解为小袁的军事力量是无限的）驻扎在边境要塞，城市 $1$ 处。他的舰队会进行以下移动：\n\n- 如果舰队的坐标为 $(x,y)$，那么一天之后它可以移动到 $(x-1,y+2)$ 或 $(x+1,y+2)$ 或 $(x+2,y+1)$ 或 $(x-2,y+1)$ 或 $(x-1,y-2)$ 或 $(x+1,y-2)$ 或 $(x+2,y-1)$ 或 $(x-2,y-1)$ 处。\n\n其中环绕在外的还有一条小行星带，当舰队的坐标  $(x,y)$ 且 $x\\le 0$ 或 $y\\le 0$ 或 $m < x$ 或 $m < y$ 时，舰队就会撞到小行星带。这是小袁所不想看到的。\n\n现在小袁要攻打城市 $2,3,\\dots,n$，每一次他都会从一个**已经占领**的城市（城市 $1$ 也算），派出舰队前往城市 $i$ 并攻打它，舰队**到达之后的第二天**城市 $i$ 就被攻占了。\n\n特别的，小袁在一个舰队**前往攻打或攻打一个城市**的时候不会派出另外一支舰队，在**攻占一座城市后当天**可以立即派出另外一支舰队。\n\n小袁想问，最少要花多少时间才能攻占所有的城市。\n\n**攻打顺序可以不按照 $2,3\\dots n$ 的顺序。**", "inputFormat": "第一行一个整数 $n,m$，表示城市个数和小行星带的范围。\n\n接下来 $n$ 行，每一行两个正整数 $(x_i,y_i)$，表示城市 $i$ 的坐标。**保证 $1\\le x_i,y_i \\le m$**。", "outputFormat": "一个整数 $ans$，表示最少要花的时间。", "hint": "## 样例一解释：\n\n舰队在第一天来到了 $(3,2)$ 的位置，第二天到达了城市 $2$ 的位置，第三天占领了城市 $2$。总共花了 $3$ 天。\n\n## 样例二解释：\n\n舰队在第一天到达了城市 $2$ 的位置，第二天占领了城市 $2$。第三天到达了城市 $3$ 的位置，第四天占领了城市 $3$。总共花了 $4$ 天。\n\n## 数据范围\n\n**本题采用 Subtask 捆绑测试。**\n\n|子任务编号|  测试点编号| $n$ | $m$ |特殊性质|分值|\n|:-----:| :----------: | :----------: | :----------: | :----------: |:---:|\n|$1$| $1\\sim2$ | $1\\le n\\le 7$ |$4\\le m\\le 7$|无|$10$|\n|$2$| $3\\sim7$ | $1\\le n\\le 200$ |$4\\le m\\le 70$|无|$25$|\n|$3$| $8\\sim9$ | $1\\le n\\le 150$ |$4\\le m\\le 150$|有|$15$|\n|$4$| $10\\sim20$ | $1\\le n\\le 2000$ |$4\\le m\\le 150$|无|$50$|\n\n特殊性质：对于每一个 $1\\le i\\le n-1$，都有 $x_i = x_{i+1}$。\n\n**数据严格保证不会有不同的城市拥有相同的坐标。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KMOI R1] 军事行动", "background": "$$\\blue{他们来了。}$$\n\n$$\\purple{集结军队，干掉他们，一个不留。}$$\n\n$$\\blue{是！}$$", "description": "喵星边境局势愈发紧张，导致发生边境冲突。喵星军队总司令小袁立即对 $Y$ 星采取军事行动。\n\n整个宇宙可以看作一个平面直角坐标系，城市 $1,2,\\dots,n$ 的坐标分别为 $(x_1,y_1),(x_2,y_2),\\dots(x_n,y_n)$。\n\n现在小袁率领的**若干支**舰队（可以理解为小袁的军事力量是无限的）驻扎在边境要塞，城市 $1$ 处。他的舰队会进行以下移动：\n\n- 如果舰队的坐标为 $(x,y)$，那么一天之后它可以移动到 $(x-1,y+2)$ 或 $(x+1,y+2)$ 或 $(x+2,y+1)$ 或 $(x-2,y+1)$ 或 $(x-1,y-2)$ 或 $(x+1,y-2)$ 或 $(x+2,y-1)$ 或 $(x-2,y-1)$ 处。\n\n其中环绕在外的还有一条小行星带，当舰队的坐标  $(x,y)$ 且 $x\\le 0$ 或 $y\\le 0$ 或 $m < x$ 或 $m < y$ 时，舰队就会撞到小行星带。这是小袁所不想看到的。\n\n现在小袁要攻打城市 $2,3,\\dots,n$，每一次他都会从一个**已经占领**的城市（城市 $1$ 也算），派出舰队前往城市 $i$ 并攻打它，舰队**到达之后的第二天**城市 $i$ 就被攻占了。\n\n特别的，小袁在一个舰队**前往攻打或攻打一个城市**的时候不会派出另外一支舰队，在**攻占一座城市后当天**可以立即派出另外一支舰队。\n\n小袁想问，最少要花多少时间才能攻占所有的城市。\n\n**攻打顺序可以不按照 $2,3\\dots n$ 的顺序。**", "inputFormat": "第一行一个整数 $n,m$，表示城市个数和小行星带的范围。\n\n接下来 $n$ 行，每一行两个正整数 $(x_i,y_i)$，表示城市 $i$ 的坐标。**保证 $1\\le x_i,y_i \\le m$**。", "outputFormat": "一个整数 $ans$，表示最少要花的时间。", "hint": "## 样例一解释：\n\n舰队在第一天来到了 $(3,2)$ 的位置，第二天到达了城市 $2$ 的位置，第三天占领了城市 $2$。总共花了 $3$ 天。\n\n## 样例二解释：\n\n舰队在第一天到达了城市 $2$ 的位置，第二天占领了城市 $2$。第三天到达了城市 $3$ 的位置，第四天占领了城市 $3$。总共花了 $4$ 天。\n\n## 数据范围\n\n**本题采用 Subtask 捆绑测试。**\n\n|子任务编号|  测试点编号| $n$ | $m$ |特殊性质|分值|\n|:-----:| :----------: | :----------: | :----------: | :----------: |:---:|\n|$1$| $1\\sim2$ | $1\\le n\\le 7$ |$4\\le m\\le 7$|无|$10$|\n|$2$| $3\\sim7$ | $1\\le n\\le 200$ |$4\\le m\\le 70$|无|$25$|\n|$3$| $8\\sim9$ | $1\\le n\\le 150$ |$4\\le m\\le 150$|有|$15$|\n|$4$| $10\\sim20$ | $1\\le n\\le 2000$ |$4\\le m\\le 150$|无|$50$|\n\n特殊性质：对于每一个 $1\\le i\\le n-1$，都有 $x_i = x_{i+1}$。\n\n**数据严格保证不会有不同的城市拥有相同的坐标。**", "locale": "zh-CN"}}}
{"pid": "P9710", "type": "P", "difficulty": 2, "samples": [["2\n5 5", "4"], ["4\n1 1 4 5", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["递推", "O2优化"], "title": "[KMOI R1] 五五五五（Easy）", "background": "“迟序之数，非出神怪，有形可检，有数可推。”——祖冲之", "description": "小宋有一个序列 $a_1,a_2\\dots,a_n$，其中对于 $i\\in [1,n]$，满足 $a_i\\in[0,9]$。\n\n对于 $1\\le l\\le r\\le n$，他记 $f(l,r)$ 等于 $\\overline{a_la_{(l+1)}\\dots a_r}$ 的末尾连续 $5$ 的个数。\n\n例如：对于序列 $a=\\{1,1,4,5,1,4\\}$，$f(2,4)=1,f(1,3)=0$。\n\n现在请你求出:\n\n$$\\Big(\\sum\\limits_{l=1}^\n{n}\\sum\\limits_{r=l}^{n} f(l,r)\\Big) \\bmod 10^9+7$$", "inputFormat": "第一行一个正整数 $n$，表示序列的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示序列 $a$。", "outputFormat": "一个正整数 $ans$，表示答案。", "hint": "## 样例 $1$ 解释：\n\n$f(1,1)=1$。\n\n$f(1,2)=2$。\n\n$f(2,2)=1$。\n\n得到答案 $ans=f(1,1)+f(1,2)+f(2,2)=4$，故输出 $4$。\n\n## 数据范围\n\n**本题采用 subtask 捆绑测试。**\n\n令 $m=\\max\\{a_1,a_2,\\dots,a_n\\}$。\n\n| 子任务编号 | 测试点编号 | $n\\le$ | $m\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $100$ | $3$ | 无 | $3$ |\n| $2$ | $2\\sim 4$ | $2\\times 10^5$ | $5$ | $\\mathbf{A}$ | $22$ |\n| $3$ | $5,6$ | $100$ | $5$ | 无 | $10$ |\n| $4$ | $7\\sim 10$ | $2\\times 10^5$ | $5$ | $\\mathbf{B}$ | $25$ |\n| $5$ | $11\\sim 20$ | $2\\times 10^5$ | $9$ | 无 | $40$ |\n\n特殊性质 $\\mathbf{A}:$ 序列平均数为 $5$。\n\n特殊性质 $\\mathbf{B}:$ 序列单调不上升。\n\n对于 $100\\%$ 的数据：$1\\le n\\le 2\\times 10^5$，$0\\le m\\le 9$。\n\n对于 $\\forall i\\in [1,n]$，满足 $a_i\\in[0,9]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KMOI R1] 五五五五（Easy）", "background": "“迟序之数，非出神怪，有形可检，有数可推。”——祖冲之", "description": "小宋有一个序列 $a_1,a_2\\dots,a_n$，其中对于 $i\\in [1,n]$，满足 $a_i\\in[0,9]$。\n\n对于 $1\\le l\\le r\\le n$，他记 $f(l,r)$ 等于 $\\overline{a_la_{(l+1)}\\dots a_r}$ 的末尾连续 $5$ 的个数。\n\n例如：对于序列 $a=\\{1,1,4,5,1,4\\}$，$f(2,4)=1,f(1,3)=0$。\n\n现在请你求出:\n\n$$\\Big(\\sum\\limits_{l=1}^\n{n}\\sum\\limits_{r=l}^{n} f(l,r)\\Big) \\bmod 10^9+7$$", "inputFormat": "第一行一个正整数 $n$，表示序列的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示序列 $a$。", "outputFormat": "一个正整数 $ans$，表示答案。", "hint": "## 样例 $1$ 解释：\n\n$f(1,1)=1$。\n\n$f(1,2)=2$。\n\n$f(2,2)=1$。\n\n得到答案 $ans=f(1,1)+f(1,2)+f(2,2)=4$，故输出 $4$。\n\n## 数据范围\n\n**本题采用 subtask 捆绑测试。**\n\n令 $m=\\max\\{a_1,a_2,\\dots,a_n\\}$。\n\n| 子任务编号 | 测试点编号 | $n\\le$ | $m\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $100$ | $3$ | 无 | $3$ |\n| $2$ | $2\\sim 4$ | $2\\times 10^5$ | $5$ | $\\mathbf{A}$ | $22$ |\n| $3$ | $5,6$ | $100$ | $5$ | 无 | $10$ |\n| $4$ | $7\\sim 10$ | $2\\times 10^5$ | $5$ | $\\mathbf{B}$ | $25$ |\n| $5$ | $11\\sim 20$ | $2\\times 10^5$ | $9$ | 无 | $40$ |\n\n特殊性质 $\\mathbf{A}:$ 序列平均数为 $5$。\n\n特殊性质 $\\mathbf{B}:$ 序列单调不上升。\n\n对于 $100\\%$ 的数据：$1\\le n\\le 2\\times 10^5$，$0\\le m\\le 9$。\n\n对于 $\\forall i\\in [1,n]$，满足 $a_i\\in[0,9]$。", "locale": "zh-CN"}}}
{"pid": "P9711", "type": "P", "difficulty": 5, "samples": [["3 4\n1 5 5\n1 3 3\n3\n1 1 5\n4 1 3", "2\n13"], ["6 5\n1 1 4 5 1 4\n3\n2\n3\n1 1 5\n4 1 4", "4\n3\n15"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "平衡树", "树状数组", "O2优化"], "title": "[KMOI R1] 五五五五（Hard）", "background": "“事类相推，各有攸归，故枝条虽分而同本干知，发其一端而已。又所析理以辞，解体用图，庶亦约而能周，通而不黩，览之者思过半矣。”——刘徽\n", "description": "小宋有一个序列 $A=\\{a_1,a_2\\dots,a_n\\}$，其中 $\\forall i\\in [1,n],a_i\\in[0,9]$。\n\n对于 $1\\le l\\le r\\le n$，他记 $f(l,r)$ 等于 $\\overline{a_la_{(l+1)}\\dots a_r}$ 的末尾连续 $5$ 的个数。\n\n例如：对于序列 $a=\\{1,1,4,5,1,4\\}$，$f(2,4)=1,f(1,3)=0$。\n\n不过小宋会对这个序列不断地操作，具体地，他会做以下操作：\n\n- $(1,x,y)$：将第 $x$ 个数改为 $y$（$x\\in[1,n],y\\in[0,9]$）。\n\n- $2$: 将序列 $a$ 反转，例如 $\\{1,1,4,5\\}$ 反转之后就是 $\\{5,4,1,1\\}$。\n\n- $3$：对序列进行询问。\n\n- $(4,l,r)$：对序列进行询问。\n\n对于每一种操作 $3$，请你输出:\n\n$$\\Big(\\sum\\limits_{l=1}^\n{n}\\sum\\limits_{r=l}^{n} f(l,r)\\Big) \\bmod 10^9+7$$\n\n对于每一个操作 $4$，请你输出：\n\n$$\\Big(\\sum\\limits_{i=l}^{r}a_i\\Big) \\bmod 10^9+7$$", "inputFormat": "第一行两个正整数 $n,q$，表示序列的数个数和询问的个数。\n\n第二行 $n$ 个整数 $a_1, a_2,\\dots a_n$，表示序列 $A$。\n\n接下来 $q$ 行，每行一个或三个正整数，表示一次操作。", "outputFormat": "对于每一次操作 $3$ 和操作 $4$，输出答案。", "hint": "## 样例 $1$ 解释：\n\n| 操作 | 操作后的序列 | 答案 |\n| :----------: | :----------: | :----------: |\n| $(1,3,3)$ | $\\{1,5,3\\}$ | $/$ |\n| $3$ | $/$ | $2$ |\n| $(1,1,5)$ | $\\{5,5,3\\}$ | $/$ |\n| $(4,1,3)$ | $/$ | $13$ |\n\n## 样例 $2$ 解释：\n\n| 操作 | 操作后的序列 | 答案 |\n| :----------: | :----------: | :----------: |\n| $3$ | $/$ | $4$ |\n| $2$ | $\\{4,1,5,4,1,1\\}$ | $/$ |\n| $3$ | $/$ | $3$ |\n| $(1,1,5)$ | $\\{5,1,5,4,1,1\\}$ | $/$ |\n|$(4,1,4)$|$/$|$15$|\n## 数据范围\n| 测试点编号 | $n\\le$ |$q\\le$| 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n|$1$|$100$|$100$|$/$|\n|$2,3$|$10^3$|$10^3$|$\\mathbf{A}$|\n|$4$|$10^3$|$10^3$|$\\mathbf{B}$|\n|$5\\sim10$|$2\\times 10^5$|$2\\times 10^5$|$/$|\n|$11\\sim13$|$2\\times 10^5$|$2\\times 10^5$|$\\mathbf{A}$|\n|$14,15$|$2\\times 10^5$|$2\\times 10^5$|$/$|\n|$16\\sim18$|$5\\times 10^5$|$5\\times 10^5$|$\\mathbf{B}$|\n|$19\\sim25$|$5\\times 10^5$|$5\\times 10^5$|$/$|\n\n特殊性质 $\\mathbf{A}:$ 没有操作 $2$。\n\n特殊性质 $\\mathbf{B}:$ 没有操作 $3$。\n\n对于 $100\\%$ 的数据：$1\\le n\\le 5\\times 10^5$，$1\\le q\\le 5\\times 10^5$。\n\n $\\forall i\\in [1,n]$，满足 $a_i\\in[0,9]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KMOI R1] 五五五五（Hard）", "background": "“事类相推，各有攸归，故枝条虽分而同本干知，发其一端而已。又所析理以辞，解体用图，庶亦约而能周，通而不黩，览之者思过半矣。”——刘徽\n", "description": "小宋有一个序列 $A=\\{a_1,a_2\\dots,a_n\\}$，其中 $\\forall i\\in [1,n],a_i\\in[0,9]$。\n\n对于 $1\\le l\\le r\\le n$，他记 $f(l,r)$ 等于 $\\overline{a_la_{(l+1)}\\dots a_r}$ 的末尾连续 $5$ 的个数。\n\n例如：对于序列 $a=\\{1,1,4,5,1,4\\}$，$f(2,4)=1,f(1,3)=0$。\n\n不过小宋会对这个序列不断地操作，具体地，他会做以下操作：\n\n- $(1,x,y)$：将第 $x$ 个数改为 $y$（$x\\in[1,n],y\\in[0,9]$）。\n\n- $2$: 将序列 $a$ 反转，例如 $\\{1,1,4,5\\}$ 反转之后就是 $\\{5,4,1,1\\}$。\n\n- $3$：对序列进行询问。\n\n- $(4,l,r)$：对序列进行询问。\n\n对于每一种操作 $3$，请你输出:\n\n$$\\Big(\\sum\\limits_{l=1}^\n{n}\\sum\\limits_{r=l}^{n} f(l,r)\\Big) \\bmod 10^9+7$$\n\n对于每一个操作 $4$，请你输出：\n\n$$\\Big(\\sum\\limits_{i=l}^{r}a_i\\Big) \\bmod 10^9+7$$", "inputFormat": "第一行两个正整数 $n,q$，表示序列的数个数和询问的个数。\n\n第二行 $n$ 个整数 $a_1, a_2,\\dots a_n$，表示序列 $A$。\n\n接下来 $q$ 行，每行一个或三个正整数，表示一次操作。", "outputFormat": "对于每一次操作 $3$ 和操作 $4$，输出答案。", "hint": "## 样例 $1$ 解释：\n\n| 操作 | 操作后的序列 | 答案 |\n| :----------: | :----------: | :----------: |\n| $(1,3,3)$ | $\\{1,5,3\\}$ | $/$ |\n| $3$ | $/$ | $2$ |\n| $(1,1,5)$ | $\\{5,5,3\\}$ | $/$ |\n| $(4,1,3)$ | $/$ | $13$ |\n\n## 样例 $2$ 解释：\n\n| 操作 | 操作后的序列 | 答案 |\n| :----------: | :----------: | :----------: |\n| $3$ | $/$ | $4$ |\n| $2$ | $\\{4,1,5,4,1,1\\}$ | $/$ |\n| $3$ | $/$ | $3$ |\n| $(1,1,5)$ | $\\{5,1,5,4,1,1\\}$ | $/$ |\n|$(4,1,4)$|$/$|$15$|\n## 数据范围\n| 测试点编号 | $n\\le$ |$q\\le$| 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n|$1$|$100$|$100$|$/$|\n|$2,3$|$10^3$|$10^3$|$\\mathbf{A}$|\n|$4$|$10^3$|$10^3$|$\\mathbf{B}$|\n|$5\\sim10$|$2\\times 10^5$|$2\\times 10^5$|$/$|\n|$11\\sim13$|$2\\times 10^5$|$2\\times 10^5$|$\\mathbf{A}$|\n|$14,15$|$2\\times 10^5$|$2\\times 10^5$|$/$|\n|$16\\sim18$|$5\\times 10^5$|$5\\times 10^5$|$\\mathbf{B}$|\n|$19\\sim25$|$5\\times 10^5$|$5\\times 10^5$|$/$|\n\n特殊性质 $\\mathbf{A}:$ 没有操作 $2$。\n\n特殊性质 $\\mathbf{B}:$ 没有操作 $3$。\n\n对于 $100\\%$ 的数据：$1\\le n\\le 5\\times 10^5$，$1\\le q\\le 5\\times 10^5$。\n\n $\\forall i\\in [1,n]$，满足 $a_i\\in[0,9]$。", "locale": "zh-CN"}}}
{"pid": "P9712", "type": "P", "difficulty": 1, "samples": [["P9202", "solution-p9202"], ["CF1797F", "solution-cf1797f"], ["AT_abc312_h", "solution-at-abc312-h"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「QFOI R1」贴贴", "background": "", "description": "小 R 是一个可爱的女孩子，她希望通过给洛谷题目写题解的方式跟出题人贴贴。\n\n她发现，如果从题解界面点击“提交题解”按钮，博客中会自动生成 URL 标识符，也就是文章的链接。\n\n其中，标识符的生成规则如下：\n\n- 将题号的所有大写字母转为小写。\n- 将上一步结果的所有下划线转为减号。\n- 在上一步结果前面加上 `solution-`。\n\n她准备给一道题目写题解，已知这道题的题号，你能求出 URL 标识符吗？", "inputFormat": "一行，一个字符串 $s$，表示题号。", "outputFormat": "一行，一个字符串，表示 URL 标识符。", "hint": "**样例 $3$ 解释**\n\n根据生成规则：\n\n- 将题号的所有大写字母转为小写：`at_abc312_h`。\n- 将上一步结果的所有下划线转为减号：`at-abc312-h`。\n- 在上一步结果前面加上 `solution-`：`solution-at-abc312-h`。\n\n---\n\n**数据范围**\n\n本题共 $10$ 个测试点，每个测试点 $10$ 分。\n\n对于全部数据，保证题号仅包含大写字母（ASCII $65\\sim 90$）、小写字母（ASCII $97\\sim 122$）、数字（ASCII $48\\sim 57$）、下划线（ASCII $95$），且长度不超过 $20$。\n\n对于全部数据，答案中应当仅包含小写字母（ASCII $97\\sim 122$）、数字（ASCII $48\\sim 57$）、减号（ASCII $45$）。\n\n- 对于测试点 $1$：保证为主题库题目。\n- 对于测试点 $2$：保证为入门与面试题目。\n- 对于测试点 $3\\sim 4$：保证为 CodeForces 题目。\n- 对于测试点 $5\\sim 6$：保证为 SPOJ 题目。\n- 对于测试点 $7\\sim 8$：保证为 AtCoder 题目。\n- 对于测试点 $9\\sim 10$：保证为 UVA 题目。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QFOI R1」贴贴", "background": "", "description": "小 R 是一个可爱的女孩子，她希望通过给洛谷题目写题解的方式跟出题人贴贴。\n\n她发现，如果从题解界面点击“提交题解”按钮，博客中会自动生成 URL 标识符，也就是文章的链接。\n\n其中，标识符的生成规则如下：\n\n- 将题号的所有大写字母转为小写。\n- 将上一步结果的所有下划线转为减号。\n- 在上一步结果前面加上 `solution-`。\n\n她准备给一道题目写题解，已知这道题的题号，你能求出 URL 标识符吗？", "inputFormat": "一行，一个字符串 $s$，表示题号。", "outputFormat": "一行，一个字符串，表示 URL 标识符。", "hint": "**样例 $3$ 解释**\n\n根据生成规则：\n\n- 将题号的所有大写字母转为小写：`at_abc312_h`。\n- 将上一步结果的所有下划线转为减号：`at-abc312-h`。\n- 在上一步结果前面加上 `solution-`：`solution-at-abc312-h`。\n\n---\n\n**数据范围**\n\n本题共 $10$ 个测试点，每个测试点 $10$ 分。\n\n对于全部数据，保证题号仅包含大写字母（ASCII $65\\sim 90$）、小写字母（ASCII $97\\sim 122$）、数字（ASCII $48\\sim 57$）、下划线（ASCII $95$），且长度不超过 $20$。\n\n对于全部数据，答案中应当仅包含小写字母（ASCII $97\\sim 122$）、数字（ASCII $48\\sim 57$）、减号（ASCII $45$）。\n\n- 对于测试点 $1$：保证为主题库题目。\n- 对于测试点 $2$：保证为入门与面试题目。\n- 对于测试点 $3\\sim 4$：保证为 CodeForces 题目。\n- 对于测试点 $5\\sim 6$：保证为 SPOJ 题目。\n- 对于测试点 $7\\sim 8$：保证为 AtCoder 题目。\n- 对于测试点 $9\\sim 10$：保证为 UVA 题目。", "locale": "zh-CN"}}}
{"pid": "P9713", "type": "P", "difficulty": 2, "samples": [["3 3 3 2\n1 2\n2 1", "9\n6"], ["1000000 1000000 1000000 6\n1 123456\n2 654321\n3 233333\n2 111111\n1 333333\n3 1000000", "876544000000000000\n303002853376000000\n232302288589217792\n232302288589217792\n176680542935560631\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「QFOI R1」抱抱", "background": "", "description": "小 R 是一个可爱的女孩子，她希望跟大家抱抱，顺便给大家分蛋糕吃。\n\n蛋糕是一个大小为 $a\\times b\\times c$ 的长方体，其中每个单位正方体都被赋予了一个坐标 $(x,y,z)$（$1\\le x\\le a,1\\le y\\le b,1\\le z\\le c$）。\n\n共进行 $m$ 次切蛋糕操作，每次按如下三种方式之一切分：\n\n1. 切出 $x\\le k$ 的部分分给大家。\n2. 切出 $y\\le k$ 的部分分给大家。\n3. 切出 $z\\le k$ 的部分分给大家。\n\n由于她自己也想吃蛋糕，她希望知道在每次切蛋糕后，还剩下多少体积没有分给大家。", "inputFormat": "第一行四个整数 $a,b,c,m$，表示蛋糕的大小和切蛋糕次数。\n\n接下来 $m$ 行，每行两个整数 $op,k$，表示进行【题目描述】中的第 $op$ 种操作，参数为 $k$。", "outputFormat": "$m$ 行，每行一个整数，表示剩余部分体积。", "hint": "**样例 $1$ 解释**\n\n第一次切蛋糕，将所有 $x\\le 2$ 的部分切掉，剩余的单位正方体有 $(3,1,1),(3,1,2),(3,1,3),(3,2,1),(3,2,2),(3,2,3),(3,3,1),(3,3,2),(3,3,3)$ 共 $9$ 个。\n\n第二次切蛋糕，将所有 $y\\le 1$ 的部分切掉，剩余的单位正方体有 $(3,2,1),(3,2,2),(3,2,3),(3,3,1),(3,3,2),(3,3,3)$ 共 $6$ 个。\n\n---\n\n**样例 $2$ 解释**\n\n第四次切蛋糕没有任何作用，因为第二次切蛋糕时 $y\\le 654321$ 的部分已经被切掉，此时已经不存在 $y\\le 111111$ 的单位正方体。\n\n注意每次操作中的参数 $k$ 是初始时决定的绝对坐标，不会随着操作的进行而改变。\n\n---\n\n**数据范围**\n\n本题共 $20$ 个测试点，每个测试点 $5$ 分。\n\n对于全部数据，保证 $1\\le a,b,c\\le 10^6$，$1\\le m\\le 2\\times 10^5$，$op\\in\\{1,2,3\\}$，若 $op=1$ 则 $1\\le k\\le a$，若 $op=2$ 则 $1\\le k\\le b$，若 $op=3$ 则 $1\\le k\\le c$。\n\n- 对于测试点 $1\\sim 5$：保证 $a,b,c,m\\le 100$。\n- 对于测试点 $6\\sim 10$：保证 $b=c=1$，$op=1$。\n- 对于测试点 $11\\sim 15$：保证 $c=1$，$op\\in\\{1,2\\}$。\n- 对于测试点 $16\\sim 20$：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QFOI R1」抱抱", "background": "", "description": "小 R 是一个可爱的女孩子，她希望跟大家抱抱，顺便给大家分蛋糕吃。\n\n蛋糕是一个大小为 $a\\times b\\times c$ 的长方体，其中每个单位正方体都被赋予了一个坐标 $(x,y,z)$（$1\\le x\\le a,1\\le y\\le b,1\\le z\\le c$）。\n\n共进行 $m$ 次切蛋糕操作，每次按如下三种方式之一切分：\n\n1. 切出 $x\\le k$ 的部分分给大家。\n2. 切出 $y\\le k$ 的部分分给大家。\n3. 切出 $z\\le k$ 的部分分给大家。\n\n由于她自己也想吃蛋糕，她希望知道在每次切蛋糕后，还剩下多少体积没有分给大家。", "inputFormat": "第一行四个整数 $a,b,c,m$，表示蛋糕的大小和切蛋糕次数。\n\n接下来 $m$ 行，每行两个整数 $op,k$，表示进行【题目描述】中的第 $op$ 种操作，参数为 $k$。", "outputFormat": "$m$ 行，每行一个整数，表示剩余部分体积。", "hint": "**样例 $1$ 解释**\n\n第一次切蛋糕，将所有 $x\\le 2$ 的部分切掉，剩余的单位正方体有 $(3,1,1),(3,1,2),(3,1,3),(3,2,1),(3,2,2),(3,2,3),(3,3,1),(3,3,2),(3,3,3)$ 共 $9$ 个。\n\n第二次切蛋糕，将所有 $y\\le 1$ 的部分切掉，剩余的单位正方体有 $(3,2,1),(3,2,2),(3,2,3),(3,3,1),(3,3,2),(3,3,3)$ 共 $6$ 个。\n\n---\n\n**样例 $2$ 解释**\n\n第四次切蛋糕没有任何作用，因为第二次切蛋糕时 $y\\le 654321$ 的部分已经被切掉，此时已经不存在 $y\\le 111111$ 的单位正方体。\n\n注意每次操作中的参数 $k$ 是初始时决定的绝对坐标，不会随着操作的进行而改变。\n\n---\n\n**数据范围**\n\n本题共 $20$ 个测试点，每个测试点 $5$ 分。\n\n对于全部数据，保证 $1\\le a,b,c\\le 10^6$，$1\\le m\\le 2\\times 10^5$，$op\\in\\{1,2,3\\}$，若 $op=1$ 则 $1\\le k\\le a$，若 $op=2$ 则 $1\\le k\\le b$，若 $op=3$ 则 $1\\le k\\le c$。\n\n- 对于测试点 $1\\sim 5$：保证 $a,b,c,m\\le 100$。\n- 对于测试点 $6\\sim 10$：保证 $b=c=1$，$op=1$。\n- 对于测试点 $11\\sim 15$：保证 $c=1$，$op\\in\\{1,2\\}$。\n- 对于测试点 $16\\sim 20$：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9714", "type": "P", "difficulty": 3, "samples": [["2\n3\n1 2 2\n5 8 7\n3\n1 2 2\n2 4 3", "Yes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「QFOI R1」摸摸", "background": "", "description": "小 R 是一个可爱的女孩子，她喜欢被摸头。\n\n但是摸头之前，必须答对她提出的一个问题。\n\n她有一个长度为 $n$ 的数列 $a$，初始时所有元素均为 $0$。另有两个长度为 $n$ 的数列 $t,b$。\n\n她可以进行两种操作：\n\n1. 将 $t$ 与 $t$ 的倒序对应元素相加，得到新的 $t$。\n    - 例如，$t=[1,4,2]$ 变为 $t'=[1+2,4+4,2+1]=[3,8,3]$。\n2. 将 $a$ 与 $t$ 对应元素相加，得到新的 $a$。\n    - 例如，$a=[1,2,3],t=[1,4,2]$ 变为 $a'=[1+1,2+4,3+2]=[2,6,5]$。\n\n是否可能通过若干次以上操作将 $a$ 变为 $b$？\n\n你希望摸她的头 $T$ 次，因此有 $T$ 组数据。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 第一行一个整数 $n$，表示数列长度。\n- 第二行 $n$ 个整数，第 $i$ 个整数为 $t_i$。\n- 第三行 $n$ 个整数，第 $i$ 个整数为 $b_i$。", "outputFormat": "共 $T$ 行，每行一个为 `Yes` 或 `No` 的字符串，表示每组数据是否可能将 $a$ 变为 $b$。\n\n字符串不区分大小写，如果答案为 `Yes` 的话，`yes`、`YES`、`yEs` 等都将被判为正确。", "hint": "**样例解释**\n\n对于第一组数据：\n\n- 初始时：$a=[0,0,0]$，$t=[1,2,2]$，$b=[5,8,7]$。\n- 执行操作二：$a=[1,2,2]$，$t=[1,2,2]$，$b=[5,8,7]$。\n- 执行操作二：$a=[2,4,4]$，$t=[1,2,2]$，$b=[5,8,7]$。\n- 执行操作一：$a=[2,4,4]$，$t=[3,4,3]$，$b=[5,8,7]$。\n- 执行操作二：$a=[5,8,7]$，$t=[3,4,3]$，$b=[5,8,7]$。\n\n此时 $a=b$，符合要求。\n\n对于第二组数据，可以证明不存在合法方案。\n\n---\n\n**数据范围**\n\n本题共 $20$ 个测试点，每个测试点 $5$ 分。\n\n记 $\\sum n$ 表示每组数据的 $n$ 之和。\n\n对于全部数据，保证 $1\\le\\sum n\\le 2\\times 10^3$，$n\\ge 1$，$1\\le t_i,b_i\\le 2\\times 10^3$。\n\n- 对于测试点 $1\\sim 4$：保证 $n\\le 2$。\n- 对于测试点 $5\\sim 8$：保证所有 $t_i$ 都相等。\n- 对于测试点 $9\\sim 12$：保证 $b_i=b_{n-i+1}$。\n- 对于测试点 $13\\sim 16$：保证 $\\sum n,t_i,b_i\\le 200$。\n- 对于测试点 $17\\sim 20$：无特殊限制。\n\n---\n\n**Hack 数据**\n\n本题在赛后添加了 Hack 数据，从 $21$ 开始编号。\n\n原有测试点依然计 $5$ 分，Hack 数据计 $0$ 分，但只有通过所有数据才会被判为 Accepted。\n\n为区分原有测试点和 Hack 数据，本题添加了子任务，但子任务的计分方式为“加和”，不会影响正常评测。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QFOI R1」摸摸", "background": "", "description": "小 R 是一个可爱的女孩子，她喜欢被摸头。\n\n但是摸头之前，必须答对她提出的一个问题。\n\n她有一个长度为 $n$ 的数列 $a$，初始时所有元素均为 $0$。另有两个长度为 $n$ 的数列 $t,b$。\n\n她可以进行两种操作：\n\n1. 将 $t$ 与 $t$ 的倒序对应元素相加，得到新的 $t$。\n    - 例如，$t=[1,4,2]$ 变为 $t'=[1+2,4+4,2+1]=[3,8,3]$。\n2. 将 $a$ 与 $t$ 对应元素相加，得到新的 $a$。\n    - 例如，$a=[1,2,3],t=[1,4,2]$ 变为 $a'=[1+1,2+4,3+2]=[2,6,5]$。\n\n是否可能通过若干次以上操作将 $a$ 变为 $b$？\n\n你希望摸她的头 $T$ 次，因此有 $T$ 组数据。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 第一行一个整数 $n$，表示数列长度。\n- 第二行 $n$ 个整数，第 $i$ 个整数为 $t_i$。\n- 第三行 $n$ 个整数，第 $i$ 个整数为 $b_i$。", "outputFormat": "共 $T$ 行，每行一个为 `Yes` 或 `No` 的字符串，表示每组数据是否可能将 $a$ 变为 $b$。\n\n字符串不区分大小写，如果答案为 `Yes` 的话，`yes`、`YES`、`yEs` 等都将被判为正确。", "hint": "**样例解释**\n\n对于第一组数据：\n\n- 初始时：$a=[0,0,0]$，$t=[1,2,2]$，$b=[5,8,7]$。\n- 执行操作二：$a=[1,2,2]$，$t=[1,2,2]$，$b=[5,8,7]$。\n- 执行操作二：$a=[2,4,4]$，$t=[1,2,2]$，$b=[5,8,7]$。\n- 执行操作一：$a=[2,4,4]$，$t=[3,4,3]$，$b=[5,8,7]$。\n- 执行操作二：$a=[5,8,7]$，$t=[3,4,3]$，$b=[5,8,7]$。\n\n此时 $a=b$，符合要求。\n\n对于第二组数据，可以证明不存在合法方案。\n\n---\n\n**数据范围**\n\n本题共 $20$ 个测试点，每个测试点 $5$ 分。\n\n记 $\\sum n$ 表示每组数据的 $n$ 之和。\n\n对于全部数据，保证 $1\\le\\sum n\\le 2\\times 10^3$，$n\\ge 1$，$1\\le t_i,b_i\\le 2\\times 10^3$。\n\n- 对于测试点 $1\\sim 4$：保证 $n\\le 2$。\n- 对于测试点 $5\\sim 8$：保证所有 $t_i$ 都相等。\n- 对于测试点 $9\\sim 12$：保证 $b_i=b_{n-i+1}$。\n- 对于测试点 $13\\sim 16$：保证 $\\sum n,t_i,b_i\\le 200$。\n- 对于测试点 $17\\sim 20$：无特殊限制。\n\n---\n\n**Hack 数据**\n\n本题在赛后添加了 Hack 数据，从 $21$ 开始编号。\n\n原有测试点依然计 $5$ 分，Hack 数据计 $0$ 分，但只有通过所有数据才会被判为 Accepted。\n\n为区分原有测试点和 Hack 数据，本题添加了子任务，但子任务的计分方式为“加和”，不会影响正常评测。", "locale": "zh-CN"}}}
{"pid": "P9715", "type": "P", "difficulty": 4, "samples": [["5 5 2 4\n1 2 4 1 0\n2 4 5 1 1\n2 2 4 2 0\n1 1 1 2 1", "17 7"], ["5 5 3 6\n2 1 3 3 1\n2 2 4 1 0\n1 4 4 2 0\n2 1 1 1 0\n1 2 5 2 0\n1 1 5 3 0", "5 4 16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线性数据结构", "洛谷原创", "O2优化", "洛谷月赛", "链表"], "title": "「QFOI R1」头", "background": "可以看看这个讨论：<https://www.luogu.com.cn/discuss/703835>。", "description": "小 R 是一个可爱的女孩子。有一天，她在被摸头时，突然灵光乍现，便随手加强了一道题给你做。\n\n这道题的名字叫涂色游戏。初始时你有一个 $n$ 行 $m$ 列的网格，所有格子上都没有颜色。有 $k$ 种颜色的刷子，颜色编号为 $1\\sim k$。然后给出 $q$ 次操作，每次操作给出 $op,l,r,c,t$ 五个参数：\n\n- 如果 $op=1$，表示将第 $l\\sim r$ 行的所有格子涂成颜色 $c$。\n- 如果 $op=2$，表示将第 $l\\sim r$ 列的所有格子涂成颜色 $c$。\n- 如果 $t=0$，意味着如果涂色时遇到已经被染色的格子，就不再进行染色。\n- 如果 $t=1$，意味着如果涂色时遇到已经被染色的格子，就用新的颜色覆盖它。\n\n在所有涂色操作结束以后，对于每种颜色，求出有多少个格子被染成了这种颜色。", "inputFormat": "第一行四个整数 $n,m,k,q$，表示行数、列数、颜色数和操作数。\n\n接下来 $q$ 行，每行五个整数 $op,l,r,c,t$，表示这次操作的参数。", "outputFormat": "一行 $k$ 个整数，第 $i$ 个整数表示被染成颜色 $i$ 的格子数量。", "hint": "**样例 $1$ 解释**\n\n用浅灰色表示颜色 $1$，灰色表示颜色 $2$。\n\n涂色过程如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gl7dmh5b.png)\n\n共有 $17$ 个区域被染成颜色 $1$，$7$ 个区域被染成颜色 $2$。\n\n---\n\n**数据范围**\n\n本题共 $20$ 个测试点，每个测试点 $5$ 分。\n\n对于全部数据，保证 $1\\le n,m,q\\le 2\\times 10^6$，$1\\le k\\le 5\\times 10^5$，$op\\in\\{1,2\\}$，若 $op=1$ 则 $1\\le l\\le r\\le n$，若 $op=2$ 则 $1\\le l\\le r\\le m$，$1\\le c\\le k$，$t\\in\\{0,1\\}$。\n\n- 对于测试点 $1\\sim 3$：保证 $n,m,k,q\\le 200$。\n- 对于测试点 $4\\sim 6$：保证 $n,m,k,q\\le 2\\times 10^3$。\n- 对于测试点 $7\\sim 9$：保证 $n,m,k,q\\le 10^5$，$op=1$。\n- 对于测试点 $10\\sim 12$：保证 $n,m,k,q\\le 10^5$，$t=1$。\n- 对于测试点 $13\\sim 18$：保证 $n,m,k,q\\le 10^5$。\n- 对于测试点 $19\\sim 20$：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「QFOI R1」头", "background": "可以看看这个讨论：<https://www.luogu.com.cn/discuss/703835>。", "description": "小 R 是一个可爱的女孩子。有一天，她在被摸头时，突然灵光乍现，便随手加强了一道题给你做。\n\n这道题的名字叫涂色游戏。初始时你有一个 $n$ 行 $m$ 列的网格，所有格子上都没有颜色。有 $k$ 种颜色的刷子，颜色编号为 $1\\sim k$。然后给出 $q$ 次操作，每次操作给出 $op,l,r,c,t$ 五个参数：\n\n- 如果 $op=1$，表示将第 $l\\sim r$ 行的所有格子涂成颜色 $c$。\n- 如果 $op=2$，表示将第 $l\\sim r$ 列的所有格子涂成颜色 $c$。\n- 如果 $t=0$，意味着如果涂色时遇到已经被染色的格子，就不再进行染色。\n- 如果 $t=1$，意味着如果涂色时遇到已经被染色的格子，就用新的颜色覆盖它。\n\n在所有涂色操作结束以后，对于每种颜色，求出有多少个格子被染成了这种颜色。", "inputFormat": "第一行四个整数 $n,m,k,q$，表示行数、列数、颜色数和操作数。\n\n接下来 $q$ 行，每行五个整数 $op,l,r,c,t$，表示这次操作的参数。", "outputFormat": "一行 $k$ 个整数，第 $i$ 个整数表示被染成颜色 $i$ 的格子数量。", "hint": "**样例 $1$ 解释**\n\n用浅灰色表示颜色 $1$，灰色表示颜色 $2$。\n\n涂色过程如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gl7dmh5b.png)\n\n共有 $17$ 个区域被染成颜色 $1$，$7$ 个区域被染成颜色 $2$。\n\n---\n\n**数据范围**\n\n本题共 $20$ 个测试点，每个测试点 $5$ 分。\n\n对于全部数据，保证 $1\\le n,m,q\\le 2\\times 10^6$，$1\\le k\\le 5\\times 10^5$，$op\\in\\{1,2\\}$，若 $op=1$ 则 $1\\le l\\le r\\le n$，若 $op=2$ 则 $1\\le l\\le r\\le m$，$1\\le c\\le k$，$t\\in\\{0,1\\}$。\n\n- 对于测试点 $1\\sim 3$：保证 $n,m,k,q\\le 200$。\n- 对于测试点 $4\\sim 6$：保证 $n,m,k,q\\le 2\\times 10^3$。\n- 对于测试点 $7\\sim 9$：保证 $n,m,k,q\\le 10^5$，$op=1$。\n- 对于测试点 $10\\sim 12$：保证 $n,m,k,q\\le 10^5$，$t=1$。\n- 对于测试点 $13\\sim 18$：保证 $n,m,k,q\\le 10^5$。\n- 对于测试点 $19\\sim 20$：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9716", "type": "P", "difficulty": 6, "samples": [["3 1\n-1 -1 2\n1 0 0\n3 1 2", "1"], ["10 8\n36175808 53666444 14885614 -14507677 \n-92588511 52375931 -87106420 -7180697 \n-158326918 98234152\n17550389 45695943 55459378 18577244 \n93218347 64719200 84319188 34410268 \n20911746 49221094\n8 1 2 2 8 8 4 7 8 4", "35343360"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2022", "O2优化", "基环树", "ICPC", "EC Final"], "title": "[EC Final 2022] Coloring", "background": "", "description": "You are given $n$ elements numbered from $1$ to $n$. Element $i$ has value $w_i$ and color $c_i$. Each element also has a pointer $a_i$ to some other element.\n\nInitially, the color of element $s$ is $1$, while the color of all the other elements is $0$. More formally, $c_s=1$ and $c_i=0$ for all $i\\neq s$ $(1 \\le i \\le n)$.\n\nYou can perform the following operation for any number of times:\n\n- Assign $c_i\\leftarrow c_{a_i}$ at a cost of $p_i$.\n\nYour score is equal to the sum of values of all the elements with color $1$ after the operations minus the sum of costs of the operations.\n\nFind the maximum possible score you can obtain.", "inputFormat": "The first line contains two integers $n,s$ ($1 \\leq s\\le n \\leq 5\\times 10^3$) $-$ the number of elements and the element with color $1$ initially.\n\nThe second line contains $n$ integers $w_1,w_2,\\dots,w_n$ ($-10^9\\le w_i\\le 10^9$) $-$ the value of the elements.\n\nThe third line contains $n$ integers $p_1,p_2,\\dots,p_n$ ($0\\le p_i\\le 10^9$) $-$ the cost of changing the color of each element.\n\nThe fourth line contains $n$ integers $a_1,a_2,\\dots,a_n$ ($1\\le a_i\\le n$, $a_i\\neq i$).", "outputFormat": "Output one integer representing the answer in one line.", "hint": "(There won’t be extra line breakers \nin the actual test cases.)\n\nIn the first sample, you can successively perform the following operations:\n\n- Assign $c_2\\leftarrow c_{a_2}$ at a cost of $p_2$, then $c=[1,1,0]$;\n- Assign $c_1\\leftarrow c_{a_1}$ at a cost of $p_1$, then $c=[0,1,0]$;\n- Assign $c_3\\leftarrow c_{a_3}$ at a cost of $p_3$, then $c=[0,1,1]$;\n- Assign $c_2\\leftarrow c_{a_2}$ at a cost of $p_2$, then $c=[0,0,1]$.\n\nAfter the operations, only the color of element $3$ is $1$, so your score is equal to $w_3-(p_2+p_1+p_3+p_2)=1$. It can be shown that it is impossible to obtain a score greater than $1$.", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Coloring", "background": "", "description": "You are given $n$ elements numbered from $1$ to $n$. Element $i$ has value $w_i$ and color $c_i$. Each element also has a pointer $a_i$ to some other element.\n\nInitially, the color of element $s$ is $1$, while the color of all the other elements is $0$. More formally, $c_s=1$ and $c_i=0$ for all $i\\neq s$ $(1 \\le i \\le n)$.\n\nYou can perform the following operation for any number of times:\n\n- Assign $c_i\\leftarrow c_{a_i}$ at a cost of $p_i$.\n\nYour score is equal to the sum of values of all the elements with color $1$ after the operations minus the sum of costs of the operations.\n\nFind the maximum possible score you can obtain.", "inputFormat": "The first line contains two integers $n,s$ ($1 \\leq s\\le n \\leq 5\\times 10^3$) $-$ the number of elements and the element with color $1$ initially.\n\nThe second line contains $n$ integers $w_1,w_2,\\dots,w_n$ ($-10^9\\le w_i\\le 10^9$) $-$ the value of the elements.\n\nThe third line contains $n$ integers $p_1,p_2,\\dots,p_n$ ($0\\le p_i\\le 10^9$) $-$ the cost of changing the color of each element.\n\nThe fourth line contains $n$ integers $a_1,a_2,\\dots,a_n$ ($1\\le a_i\\le n$, $a_i\\neq i$).", "outputFormat": "Output one integer representing the answer in one line.", "hint": "(There won’t be extra line breakers \nin the actual test cases.)\n\nIn the first sample, you can successively perform the following operations:\n\n- Assign $c_2\\leftarrow c_{a_2}$ at a cost of $p_2$, then $c=[1,1,0]$;\n- Assign $c_1\\leftarrow c_{a_1}$ at a cost of $p_1$, then $c=[0,1,0]$;\n- Assign $c_3\\leftarrow c_{a_3}$ at a cost of $p_3$, then $c=[0,1,1]$;\n- Assign $c_2\\leftarrow c_{a_2}$ at a cost of $p_2$, then $c=[0,0,1]$.\n\nAfter the operations, only the color of element $3$ is $1$, so your score is equal to $w_3-(p_2+p_1+p_3+p_2)=1$. It can be shown that it is impossible to obtain a score greater than $1$.", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Coloring", "background": "", "description": "给定 $n$ 个元素，编号从 $1$ 到 $n$。元素 $i$ 的值为 $w_i$，颜色为 $c_i$。每个元素还有一个指针 $a_i$ 指向另一个元素。\n\n最初，元素 $s$ 的颜色为 $1$，而所有其他元素的颜色都为 $0$。更正式地说，对于所有 $i\\neq s$ $(1 \\le i \\le n)$，有 $c_s=1$ 和 $c_i=0$。\n\n你可以任意多次执行以下操作：\n\n- 以代价 $p_i$ 将 $c_i\\leftarrow c_{a_i}$。\n\n你的得分等于所有颜色为 $1$ 的元素值的总和减去操作的总代价。\n\n找出你能够获得的最大可能得分。", "inputFormat": "第一行包含两个整数 $n$ 和 $s$（$1 \\leq s\\le n \\leq 5\\times 10^3$）$-$ 元素数量以及初始颜色为 $1$ 的元素。\n\n第二行包含 $n$ 个整数 $w_1,w_2,\\dots,w_n$（$-10^9\\le w_i\\le 10^9$）$-$ 元素的值。\n\n第三行包含 $n$ 个整数 $p_1,p_2,\\dots,p_n$（$0\\le p_i\\le 10^9$）$-$ 改变每个元素颜色的代价。\n\n第四行包含 $n$ 个整数 $a_1,a_2,\\dots,a_n$（$1\\le a_i\\le n$, $a_i\\neq i$）。", "outputFormat": "输出一行一个整数，表示答案。\n\n**【样例解释】**\n\n在第一个样例中，你可以依次执行以下操作：\n\n- 以代价 $p_2$ 将 $c_2\\leftarrow c_{a_2}$，然后 $c=[1,1,0]$；\n- 以代价 $p_1$ 将 $c_1\\leftarrow c_{a_1}$，然后 $c=[0,1,0]$；\n- 以代价 $p_3$ 将 $c_3\\leftarrow c_{a_3}$，然后 $c=[0,1,1]$；\n- 以代价 $p_2$ 将 $c_2\\leftarrow c_{a_2}$，然后 $c=[0,0,1]$。\n\n操作后，只有元素 $3$ 的颜色为 $1$，因此你的得分等于 $w_3-(p_2+p_1+p_3+p_2)=1$。可以证明无法获得大于 $1$ 的得分。\n\n翻译来自于：[ChatGPT](https://chatgpt.com/)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9717", "type": "P", "difficulty": 6, "samples": [["3\n1\n001001\n0001111", "1\n3\n9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "O2优化", "KMP 算法", "ICPC", "EC Final"], "title": "[EC Final 2022] Binary String", "background": "", "description": "You are given a binary string $a_0a_1a_2\\dots a_{n-1}$ arranged on a cycle. Each second, you will change every $01$ to $10$ simultaneously. In other words, if $a_i = 0$ and $a_{(i+1) \\bmod n} = 1$, you swap $a_i$ and $a_{(i+1)\\bmod n}$. For example, we will change $\\texttt{100101110}$ to $\\texttt{001010111}$.\n\nYou need to answer how many different strings will occur in infinite seconds, modulo $998244353$.\n\nNote: Two strings $a_0a_1\\dots a_{n-1}$ and $b_0b_1\\dots b_{n-1}$ are different if there exists an integer $i\\in \\{0,1,\\ldots, n-1\\}$ such that $a_i\\neq b_i$. Thus, the cyclic shifts of a string may be different from the original string.", "inputFormat": "The first line contains an integer $T$ $(1\\leq T\\leq 10^6)$ $-$ the number of test cases.\n\nFor each test case, the first line contains a binary string $a_0 a_1 \\dots a_{n-1}$ $(a_i \\in \\{0, 1\\})$.\n\nIt is guaranteed that the sum of lengths of strings over all test cases does not exceed $10^7$.", "outputFormat": "For each test case, output one integer representing the answer in one line.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Binary String", "background": "", "description": "You are given a binary string $a_0a_1a_2\\dots a_{n-1}$ arranged on a cycle. Each second, you will change every $01$ to $10$ simultaneously. In other words, if $a_i = 0$ and $a_{(i+1) \\bmod n} = 1$, you swap $a_i$ and $a_{(i+1)\\bmod n}$. For example, we will change $\\texttt{100101110}$ to $\\texttt{001010111}$.\n\nYou need to answer how many different strings will occur in infinite seconds, modulo $998244353$.\n\nNote: Two strings $a_0a_1\\dots a_{n-1}$ and $b_0b_1\\dots b_{n-1}$ are different if there exists an integer $i\\in \\{0,1,\\ldots, n-1\\}$ such that $a_i\\neq b_i$. Thus, the cyclic shifts of a string may be different from the original string.", "inputFormat": "The first line contains an integer $T$ $(1\\leq T\\leq 10^6)$ $-$ the number of test cases.\n\nFor each test case, the first line contains a binary string $a_0 a_1 \\dots a_{n-1}$ $(a_i \\in \\{0, 1\\})$.\n\nIt is guaranteed that the sum of lengths of strings over all test cases does not exceed $10^7$.", "outputFormat": "For each test case, output one integer representing the answer in one line.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Binary String", "background": "", "description": "给定一个排列在环上的二进制字符串 $a_0a_1a_2\\dots a_{n-1}$。每一秒钟，你会同时将每个 $01$ 变为 $10$。换句话说，如果 $a_i = 0$ 且 $a_{(i+1) \\bmod n} = 1$，则交换 $a_i$ 和 $a_{(i+1)\\bmod n}$。例如，我们将 $\\texttt{100101110}$ 变为 $\\texttt{001010111}$。\n\n你需要回答在无限秒内会出现多少种不同的字符串，取模 $998244353$。\n\n注意：如果存在整数 $i\\in \\{0,1,\\ldots, n-1\\}$ 使得 $a_i\\neq b_i$，则两个字符串 $a_0a_1\\dots a_{n-1}$ 和 $b_0b_1\\dots b_{n-1}$ 是不同的。因此，字符串的循环移位可能与原始字符串不同。", "inputFormat": "第一行包含一个整数 $T$ $(1\\leq T\\leq 10^6)$ $-$ 测试用例的数量。\n\n对于每个测试用例，第一行包含一个二进制字符串 $a_0 a_1 \\dots a_{n-1}$ $(a_i \\in \\{0, 1\\})$。\n\n保证所有测试用例中字符串长度的总和不超过 $10^7$。", "outputFormat": "对于每个测试用例，输出一行一个整数，表示答案。\n\n翻译来自于：[ChatGPT](https://chatgpt.com/)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9718", "type": "P", "difficulty": 5, "samples": [["4\n12345678 0\n12345678 5\n12345678 18\n990099 5", "1\n54322\n999999999987654322\n9910"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "O2优化", "数位 DP", "ICPC", "EC Final"], "title": "[EC Final 2022] Best Carry Player 2", "background": "", "description": "Given a positive integer $x$, find the minimum positive integer $y$ such that the number of $\\textbf{carries}^1$ of $x+y$ is exactly $k$.\n\nWe adds numbers $\\textbf{by column addition in base-ten}$, just like what we normally do in primary school. For example, there are two carries in the following addition.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pfnper3r.png)\n\n$^1$ which means ``进位`` in Chinese.", "inputFormat": "The first line contains an integer $T$ $(1\\leq T\\leq 10^5)$ $-$ the number of test cases.\n\nFor each test case, the first line contains two integers $x, k$ $(1\\leq x < 10^{18}, 0\\leq k \\leq 18)$.", "outputFormat": "For each test case, output one integer representing the answer in one line. If there is no solution, output $-1$ instead.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2022] Best Carry Player 2", "background": "", "description": "Given a positive integer $x$, find the minimum positive integer $y$ such that the number of $\\textbf{carries}^1$ of $x+y$ is exactly $k$.\n\nWe adds numbers $\\textbf{by column addition in base-ten}$, just like what we normally do in primary school. For example, there are two carries in the following addition.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pfnper3r.png)\n\n$^1$ which means ``进位`` in Chinese.", "inputFormat": "The first line contains an integer $T$ $(1\\leq T\\leq 10^5)$ $-$ the number of test cases.\n\nFor each test case, the first line contains two integers $x, k$ $(1\\leq x < 10^{18}, 0\\leq k \\leq 18)$.", "outputFormat": "For each test case, output one integer representing the answer in one line. If there is no solution, output $-1$ instead.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2022] Best Carry Player 2", "background": "", "description": "给定一个正整数 $x$，找到最小的正整数 $y$，使得 $x+y$ 的 $\\textbf{进位}$ 数量恰好为 $k$。\n\n我们按照十进制中的列加法进行相加，就像我们在小学时所做的那样。例如，下面的加法中有两次进位。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pfnper3r.png)", "inputFormat": "第一行包含一个整数 $T$ $(1\\leq T\\leq 10^5)$ $-$ 测试用例的数量。\n\n对于每个测试用例，第一行包含两个整数 $x, k$ $(1\\leq x < 10^{18}, 0\\leq k \\leq 18)$。", "outputFormat": "对于每个测试用例，输出一行一个整数，表示答案。如果没有解决方案，则输出 $-1$。\n\n翻译来自于：[ChatGPT](https://chatgpt.com/)。", "hint": "", "locale": "zh-CN"}}}
