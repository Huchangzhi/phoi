:root {
    --bg-color: #1e1e1e;
    --editor-bg: #111;
    --key-bg: #333;
    --key-active: #555;
    --key-shift-active: #005a9e;
    --key-ctrl-active: #007acc;
    --text-color: #d4d4d4;
    --dim-color: #666;
    --accent-color: #007acc;
    --border-color: #111;
}

* { box-sizing: border-box; touch-action: none; }
/* åªå¯¹ç‰¹å®šå…ƒç´ ç¦ç”¨é€‰æ‹©ï¼Œä¿ç•™å…¶ä»–å…ƒç´ å¯é€‰æ‹© */
.key, .tool-btn, .line-number, .line-view, .line-wrapper, .row, .modal-header, .output-header { user-select: none; -webkit-user-select: none; }
body { margin: 0; padding: 0; background-color: var(--bg-color); height: 100vh; width: 100vw; display: flex; flex-direction: column; overflow: hidden; font-family: Consolas, "Courier New", monospace; }

/* VS Code é£æ ¼é¡¶éƒ¨èœå•æ  */
#top-menu-bar {
    height: 36px;
    min-height: 36px;
    background-color: #333333;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid #444444;
    z-index: 50;
    padding: 0 8px;
}

#menu-bar-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

#logo {
    height: 20px;
    margin-right: 12px;
}

.menu-item {
    color: #cccccc;
    font-size: 14px;
    padding: 4px 8px;
    cursor: pointer;
    border-radius: 2px;
    user-select: none;
}

.menu-item:hover {
    background-color: #444444;
}

#menu-bar-right {
    display: flex;
    align-items: center;
    gap: 8px;
}

#menu-bar-center {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 1;
    color: white;
    font-size: 14px;
    margin: 0 10px;
}

.current-file {
    color: white;
    font-size: 14px;
    font-weight: bold;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;
}

.tool-btn {
    background-color: #000;
    color: white;
    border: none;
    border-radius: 4px;
    width: 32px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 14px;
    padding: 0;
}

.tool-btn img {
    width: 16px;
    height: 16px;
    max-width: 100%;
    max-height: 100%;
}

#run-btn {
    background: none;
    border: none;
    padding: 0;
    width: auto;
    height: auto;
}

#run-btn img {
    width: 20px;
    height: 20px;
}

#luogu-btn {
    background: none;
    border: none;
    padding: 0;
    width: auto;
    height: auto;
}

#luogu-btn img {
    width: 20px;
    height: 20px;
}

/* ä¸‹æ‹‰èœå•æ ·å¼ */
.dropdown-menu {
    position: absolute;
    top: 36px;
    left: 0;
    background-color: #333333;
    border: 1px solid #444444;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    min-width: 180px;
    z-index: 100;
}

.dropdown-item {
    padding: 6px 12px;
    color: #cccccc;
    cursor: pointer;
    user-select: none;
    font-size: 14px;
}

.dropdown-item:hover {
    background-color: #444444;
}

.dropdown-divider {
    height: 1px;
    background-color: #444444;
    margin: 4px 0;
}

/* å·¦ä¾§è¾¹æ  */
#left-sidebar {
    position: fixed;
    top: 36px;
    left: 0;
    width: 40px;
    height: calc(100vh - 36px);
    background-color: #252526;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 12px;
    z-index: 40;
    border-right: 1px solid #333333;
}

.sidebar-button {
    width: 32px;
    height: 32px;
    background-color: #333333;
    color: #cccccc;
    border: none;
    border-radius: 4px;
    font-size: 16px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    margin-bottom: 8px;
    user-select: none;
}

.sidebar-button:hover {
    background-color: #444444;
}

/* è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿé¢æ¿ */
.vfs-panel {
    position: fixed;
    top: 36px;
    left: 40px;
    width: 250px;
    height: calc(100vh - 36px);
    background-color: #252526;
    border-right: 1px solid #333333;
    z-index: 30;
    display: none;
    flex-direction: column;
    overflow: hidden;
}

.vfs-header {
    height: 36px;
    background-color: #333333;
    display: flex;
    align-items: center;
    padding: 0 12px;
    border-bottom: 1px solid #444444;
    font-size: 14px;
    color: #cccccc;
}

.vfs-close-btn {
    margin-left: auto;
    background: none;
    border: none;
    color: #cccccc;
    font-size: 16px;
    cursor: pointer;
    width: 20px;
    height: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.vfs-content {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.vfs-root {
    margin-bottom: 8px;
}

.vfs-folder, .vfs-file {
    padding: 4px 8px;
    margin: 2px 0;
    border-radius: 2px;
    cursor: pointer;
    user-select: none;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* ç‰¹åˆ«é’ˆå¯¹æ ¹ç›®å½•æ–‡ä»¶å¤¹è®¾ç½®ç™½è‰²æ–‡å­— */
.vfs-folder[data-path="/"] {
    color: white;
}

.vfs-folder:hover, .vfs-file:hover {
    background-color: #444444;
}

.vfs-folder::before {
    content: "ğŸ“";
    font-size: 14px;
}

.vfs-file::before {
    content: "ğŸ“„";
    font-size: 14px;
}

/* 3è¡Œé¢„è§ˆåŒº (Flexåˆ—å¸ƒå±€ï¼Œå†…éƒ¨åŒ…å«è¡Œå·+æ–‡æœ¬) */
#lines-container {
    height: 80px;
    min-height: 80px;
    background-color: #000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    overflow: hidden;
    padding: 5px 0;
    border-bottom: 2px solid #444;
    margin-left: 40px; /* ä¸ºä¾§è¾¹æ ç•™å‡ºç©ºé—´ */
}

.line-wrapper {
    display: flex;
    flex-direction: row;
    align-items: center;
    height: 22px;
}
.line-wrapper.current {
    height: 26px;
    background-color: #1a1a1a;
}

/* é”®ç›˜æ¨¡å¼ä¸‹çš„è¡Œå· */
.line-number {
    width: 40px; min-width: 40px;
    text-align: right; padding-right: 10px;
    color: #555; font-size: 12px; font-family: Consolas, monospace;
    user-select: none; border-right: 1px solid #333; margin-right: 8px;
    background-color: #1e1e1e; height: 100%; line-height: 22px;
}
.line-wrapper.current .line-number {
    color: #d4d4d4; font-weight: bold; font-size: 14px; line-height: 26px;
}

.line-view {
    flex: 1; white-space: pre; overflow: hidden; font-size: 14px; color: var(--dim-color); line-height: 22px; tab-size: 4;
}
.line-view.current {
    color: #d4d4d4; font-size: 16px; line-height: 26px; font-weight: bold; overflow-x: auto; scrollbar-width: none;
}
.line-view.current::-webkit-scrollbar { display: none; }

.cursor { display: inline-block; width: 2px; height: 18px; background-color: #0f0; animation: blink 1s step-end infinite; vertical-align: text-bottom; margin-bottom: 3px; }
@keyframes blink { 50% { opacity: 0; } }

/* ç¼–è¾‘å™¨åŒºåŸŸ */
#editor-area {
    flex: 1;
    display: flex;
    overflow: hidden;
    position: relative;
    margin-left: 40px; /* ä¸ºä¾§è¾¹æ ç•™å‡ºç©ºé—´ */
}

#editor-container {
    flex: 1;
    height: 100%;
}

/* æ¨¡æ€æ¡† */
#input-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 300; justify-content: center; align-items: center; backdrop-filter: blur(2px); }
.modal-content { background-color: #252526; width: 85%; max-width: 400px; border: 1px solid #444; border-radius: 6px; padding: 15px; display: flex; flex-direction: column; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
.modal-header { color: #ccc; font-weight: bold; margin-bottom: 10px; font-size: 14px; }
#modal-textarea { background-color: #1e1e1e; color: #d4d4d4; border: 1px solid #3c3c3c; border-radius: 4px; padding: 8px; font-family: Consolas, monospace; font-size: 14px; height: 150px; resize: none; outline: none; user-select: text; -webkit-user-select: text; }
.modal-footer { display: flex; justify-content: flex-end; margin-top: 15px; gap: 10px; }
.modal-btn { padding: 8px 16px; border: none; border-radius: 3px; font-size: 14px; cursor: pointer; color: #fff; }
#modal-cancel { background-color: #3e3e42; }
#modal-run { background-color: #0e639c; }

/* è¾“å‡ºé¢æ¿ */
#output-panel {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 30%;
    min-height: 150px;
    background-color: #0d0d0d;
    border-top: 2px solid #007acc;
    z-index: 200;
    display: none;
    flex-direction: column;
    box-shadow: 0 -5px 20px rgba(0,0,0,0.5);
    transition: height 0.1s ease; /* å¹³æ»‘è¿‡æ¸¡æ•ˆæœ */
}
#output-header {
    height: 35px;
    background-color: #1e1e1e;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 10px;
    border-bottom: 1px solid #333;
    color: #eee;
    font-size: 14px;
    cursor: ns-resize;
    user-select: none;
}

/* å…³é—­æŒ‰é’®ä½¿ç”¨é»˜è®¤å…‰æ ‡ */
#close-output {
    cursor: default;
}
#output-content {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
    font-family: Consolas, monospace;
    font-size: 13px;
    white-space: pre-wrap;
    color: #ccc;
    user-select: text;
    -webkit-user-select: text;
    cursor: text; /* æ˜¾ç¤ºæ–‡æœ¬å…‰æ ‡ */
}
/* è¾“å‡ºé¢æ¿è°ƒæ•´å¤§å°æ‰‹æŸ„ */
#output-resizer {
    height: 6px;
    background: #007acc;
    cursor: ns-resize;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    border-bottom: 1px solid #333;
    z-index: 10;
}
.out-section { margin-bottom: 10px; }
.out-title { color: #569cd6; font-weight: bold; margin-bottom: 4px; display: block; }
.out-err { color: #f48771; } .out-warn { color: #cca700; } .out-res { color: #fff; } .out-stat { color: #6a9955; font-size: 12px; font-style: italic; border-top: 1px solid #333; margin-top: 5px; padding-top: 5px;}

/* é«˜äº® */
.hl-kw { color: #569cd6; font-weight: bold; } .hl-str { color: #ce9178; } .hl-com { color: #6a9955; } .hl-dir { color: #c586c0; } .hl-num { color: #b5cea8; }

/* é”®ç›˜ */
#keyboard-container {
    position: fixed;
    bottom: 0;
    left: 40px; /* ä»ä¾§è¾¹æ å³è¾¹å¼€å§‹ */
    right: 0;
    height: 200px;
    display: flex;
    flex-direction: column;
    padding: 2px;
    justify-content: space-between;
    background-color: var(--bg-color);
    border-top: 1px solid #333;
    z-index: 100;
    margin-left: 0; /* é‡ç½®å¯èƒ½çš„å·¦è¾¹è· */
}
.row { display: flex; width: 100%; height: 20%; margin-bottom: 2px; }
.key { background-color: #333; color: #eee; border: 1px solid #111; border-radius: 4px; margin: 0 1px; display: flex; justify-content: center; align-items: center; font-size: 14px; font-weight: bold; flex-grow: 1; position: relative; box-shadow: 0 2px 0 #000; }
.key:active, .key.active { background-color: #555; transform: translateY(2px); box-shadow: none; }
.key.shift-hold { background-color: #005a9e; border-color: #007acc; }
.key.ctrl-hold { background-color: #006000; border-color: #0f0; }
.key-content { display: flex; flex-direction: column; alignItems: center; line-height: 1; pointer-events: none; }
.sup { font-size: 9px; color: #888; margin-bottom: 2px; } .main { font-size: 14px; }
.shifted .sup { color: #fff; font-size: 14px; } .shifted .main { color: #666; font-size: 9px; } .alpha-key .sup { display: none; }
.w-1 { flex: 1; } .w-1-5 { flex: 1.5; } .w-2 { flex: 2; } .w-2-25 { flex: 2.25; } .w-space { flex: 6; }
.spacer { flex: 1; visibility: hidden; } .spacer-1-5 { flex: 1.5; visibility: hidden; } .spacer-sm { flex: 0.2; visibility: hidden; }
.mod { background-color: #2a2a2a; font-size: 11px; } .nav-key { background-color: #252526; } .hide-keyboard { display: none !important; }
/* å›¾æ ‡æŒ‰é’®æ ·å¼ */
.icon-btn {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    max-width: 100%;
    max-height: 100%;
}

/* ä¾§è¾¹æ æŒ‰é’®æ ·å¼ */
.sidebar-button {
    width: 32px;
    height: 32px;
    background-color: #333333;
    color: #cccccc;
    border: none;
    border-radius: 4px;
    font-size: 16px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    margin-bottom: 8px;
    user-select: none;
}

.sidebar-button img {
    width: 20px;
    height: 20px;
    pointer-events: none; /* é˜²æ­¢å›¾ç‰‡å½±å“ç‚¹å‡»äº‹ä»¶ */
    transition: transform 0.2s ease; /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */
}

.sidebar-button.vfs-open img {
    transform: rotate(180deg); /* å½“é¢æ¿æ‰“å¼€æ—¶æ—‹è½¬å›¾æ ‡ */
}

.sidebar-button.plugin-center-open img {
    transform: rotate(180deg); /* å½“æ’ä»¶ä¸­å¿ƒé¢æ¿æ‰“å¼€æ—¶æ—‹è½¬å›¾æ ‡ */
}

/* æ’ä»¶ä¸­å¿ƒæ ·å¼ */
.plugin-item {
    margin-bottom: 15px;
    padding: 10px;
    border: 1px solid #444;
    border-radius: 4px;
    background-color: #2d2d30;
}

.plugin-header {
    font-weight: bold;
    color: #ffffff;
    margin-bottom: 8px;
    font-size: 14px;
}

.plugin-settings {
    padding-left: 10px;
}

.setting-item {
    margin: 8px 0;
    display: flex;
    align-items: center;
    gap: 8px;
}

.setting-item label {
    display: flex;
    align-items: center;
    gap: 4px;
    color: #cccccc;
    font-size: 13px;
}

.setting-item input[type="number"] {
    width: 80px;
    padding: 3px 6px;
    background-color: #1e1e1e;
    color: #d4d4d4;
    border: 1px solid #3c3c3c;
    border-radius: 3px;
    font-size: 12px;
}

@media screen and (orientation: portrait) { .key { font-size: 11px; } .sup { font-size: 8px; } .main { font-size: 11px; } }

/* å…³äºå¼¹çª—æ ·å¼ */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.about-modal {
    width: 80%;
    max-width: 500px;
    background-color: #252526;
    border: 1px solid #444;
    border-radius: 6px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    overflow: hidden;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    border-bottom: 1px solid #444;
    background-color: #333;
}

.modal-header h2 {
    margin: 0;
    color: #ccc;
    font-size: 18px;
}

.close-btn {
    font-size: 24px;
    color: #ccc;
    cursor: pointer;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

.close-btn:hover {
    background-color: #444;
}

.modal-body {
    padding: 20px;
    color: #ccc;
    line-height: 1.6;
}

.modal-body p {
    margin: 10px 0;
}

.modal-body a {
    color: #4daafc;
    text-decoration: none;
}

.modal-body a:hover {
    text-decoration: underline;
}

/* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
#problem-display::-webkit-scrollbar {
    width: 8px;
}

#problem-display::-webkit-scrollbar-track {
    background: #252526;
}

#problem-display::-webkit-scrollbar-thumb {
    background: #444;
    border-radius: 4px;
}

#problem-display::-webkit-scrollbar-thumb:hover {
    background: #666;
}

/* æ¡Œé¢ç«¯æ»šåŠ¨æ¡æ ·å¼ï¼ˆå¦‚æœéœ€è¦æ›´å®½çš„æ»šåŠ¨æ¡ï¼‰ */
@media screen and (min-width: 769px) {
    #problem-display::-webkit-scrollbar {
        width: 10px;
    }

    #problem-display::-webkit-scrollbar-thumb {
        border-radius: 5px;
    }
}

/* ç¡®ä¿ç§»åŠ¨ç«¯å¯ä»¥è§¦æ‘¸æ»šåŠ¨ */
#problem-display {
    -webkit-overflow-scrolling: touch;
    touch-action: pan-y;
}