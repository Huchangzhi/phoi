{"pid": "P7090", "type": "P", "difficulty": 6, "samples": [["6\n0 0 1 1 2 0 3 3 4 4 6 0\n5\n0 0 1 1 2 1 3 4 4 0\n", "21.824074074074074073\n"], ["3\n-1 0 0 1 2 0\n4\n0 0 1 1 2 2 3 0\n", "Invalid plan\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "Special Judge", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Lonely Mountain", "background": "", "description": "\n\n\"This was made by Thror, your grandfather, Thorin\", he said in answer to the dwarves' excited questions. \"It is a plan of the Mountain. \"\n\n---\n\nJ. R. R. Tolkien. The Hobbit, or There and Back Again\n\nThe plan of the Lonely Mountain consists of two parallel projections of the mountain to two projection planes. Both planes are perpendicular to the ground and each other. Each projection has a mountain-like shape.\n\n![](https://www.acmicpc.net/upload/images2/lonely.png)\n\nSince Bilbo Baggins has never seen the mountain, he tries to imagine it. Is it really the Lonely Mountain or some ridges and other mountains surround it? In any case, it must be tremendous to hold the whole dwarves' kingdom!\n\nBilbo decided to estimate the maximum possible volume of the Lonely Mountain and nearby mountains (if any) based on the plan provided by Gandalf.\n\n", "inputFormat": "\n\nThe first line contains single integer number $n_{x}$ -- the number of points in the parallel projection of the mountain to the plane Oxz $(2 \\le n_{x} \\le 100 000)$ . The second line contains $n_{x}$ pairs of integer numbers $x_{i}, z_{i}$ -- the coordinates of the polygonal chain, representing the projection $(−10^{9} \\le x_{1} < x_{2} <$ x3 $< · · · < x_{n_{x}} \\le 10^{9}; 0 \\le z_{i} \\le 10^{9}; z_{1} = z_{n_{x}} = 0)$ .\n\nThe following two lines contain projection to the Oyz plane in the same format.\n\n", "outputFormat": "\n\nThe only line of the output file must contain a single number $V$ -- the maximum possible volume of the Lonely Mountain.\n\nThe absolute or relative precision of you answer should be at least $10^{−6}.$ E.g . if $V′is$ the actual maximum possible volume, the following must hold: $mi_n(|V−V′|,|V−V′|/V′) \\le 10^{−6}.$\n\nIf there are no mountains corresponding to the given projections, output a single line `Invalid plan`.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Lonely Mountain", "background": "", "description": "\n\n\"This was made by Thror, your grandfather, Thorin\", he said in answer to the dwarves' excited questions. \"It is a plan of the Mountain. \"\n\n---\n\nJ. R. R. Tolkien. The Hobbit, or There and Back Again\n\nThe plan of the Lonely Mountain consists of two parallel projections of the mountain to two projection planes. Both planes are perpendicular to the ground and each other. Each projection has a mountain-like shape.\n\n![](https://www.acmicpc.net/upload/images2/lonely.png)\n\nSince Bilbo Baggins has never seen the mountain, he tries to imagine it. Is it really the Lonely Mountain or some ridges and other mountains surround it? In any case, it must be tremendous to hold the whole dwarves' kingdom!\n\nBilbo decided to estimate the maximum possible volume of the Lonely Mountain and nearby mountains (if any) based on the plan provided by Gandalf.\n\n", "inputFormat": "\n\nThe first line contains single integer number $n_{x}$ -- the number of points in the parallel projection of the mountain to the plane Oxz $(2 \\le n_{x} \\le 100 000)$ . The second line contains $n_{x}$ pairs of integer numbers $x_{i}, z_{i}$ -- the coordinates of the polygonal chain, representing the projection $(−10^{9} \\le x_{1} < x_{2} <$ x3 $< · · · < x_{n_{x}} \\le 10^{9}; 0 \\le z_{i} \\le 10^{9}; z_{1} = z_{n_{x}} = 0)$ .\n\nThe following two lines contain projection to the Oyz plane in the same format.\n\n", "outputFormat": "\n\nThe only line of the output file must contain a single number $V$ -- the maximum possible volume of the Lonely Mountain.\n\nThe absolute or relative precision of you answer should be at least $10^{−6}.$ E.g . if $V′is$ the actual maximum possible volume, the following must hold: $mi_n(|V−V′|,|V−V′|/V′) \\le 10^{−6}.$\n\nIf there are no mountains corresponding to the given projections, output a single line `Invalid plan`.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Lonely Mountain", "background": "", "description": "给定一个几何体的正视图和侧视图，求其最大体积。", "inputFormat": "第一行一个整数 $n_x$ 表示正视图中点的数量。\n\n第二行按 $x_i$ 递增的顺序给出 $n_x$ 个点对 $(x_i,z_i)$ 描述其正视图，保证 $z_1=z_{n_x}=0$\n\n第三、四行同理，描述其侧视图。\n\n所有的输入都是整数。", "outputFormat": "若不存在一个合法方案，输出 ```Invalid plan```，否则输出最大体积。\n\n你的答案与正确答案的绝对误差不应超过 $10^{-6}$.", "hint": "", "locale": "zh-CN"}}}
{"pid": "P7091", "type": "P", "difficulty": 4, "samples": [["4 0", "20"], ["12 1\n4", "127"], ["192 1\n2", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "数上的树", "background": "**本题自动开启 O2 优化，时间限制 2s。**", "description": "您需要构造一棵二叉树，根节点权值为 $n$，每个节点都有 $2$ 个或 $0$ 个儿子，且满足如下限制：\n\n若该点有两个儿子，该点权值需等于两个儿子的权值之积。\n\n若该点没有儿子，则该节点权值需为质数。\n\n同时会给出 $m$ 条限制 $a_i$，表示树上的权值不能出现 $a_i$。\n\n您构造的二叉树需要使：令 $k$ 为节点数， $\\sum\\limits_{i=1}^k\\sum\\limits_{j=i}^kval_{lca(i,j)}$ 最小，其中 $val_i$ 表示第 $i$ 个点的权值，$lca(i,j)$ 表示 $i,j$ 的最近公共祖先。", "inputFormat": "第一行两个正整数 $n,m$。\n\n之后一行 $m$ 个数 $a_i$。", "outputFormat": "一行一个数，表示最小的 $\\sum\\limits_{i=1}^k\\sum\\limits_{j=i}^kval_{lca(i,j)}$。\n\n无解输出 `-1`。", "hint": "样例解释：\n\n样例 $1$：最优方案如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2dcec565.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n其中，黑色数字代表权值，红色数字代表标号（您不需要对树标号，这里的标号只是为了更方便解释样例）。\n\n$ans=val_{lca(1,1)}+val_{lca(1,2)}+val_{lca(1,3)}+val_{lca(2,2)}+val_{lca(2,3)}+val_{lca(3,3)}$\n\n$~~~~~~~~=val_1+val_1+val_1+val_2+val_1+val_3$\n\n$~~~~~~~~=4+4+4+2+4+2=20$\n\nSubtask 1（5 分）： $n\\leq 20$。\n\nSubtask 2（12 分）：$n\\leq 10^6$。\n\nSubtask 3（28 分）：$n\\leq 10^{12}$。\n\nSubtask 4（20 分）：$m=0$。\n\nSubtask 5（35 分）：$n\\leq 10^{15}$。\n\n对于所有数据 $2\\leq n\\leq 10^{15}$，$0\\leq m\\leq \\min(n,10^5)$，$2\\leq a_i\\leq n$， 且答案不超过 $4\\times 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "数上的树", "background": "**本题自动开启 O2 优化，时间限制 2s。**", "description": "您需要构造一棵二叉树，根节点权值为 $n$，每个节点都有 $2$ 个或 $0$ 个儿子，且满足如下限制：\n\n若该点有两个儿子，该点权值需等于两个儿子的权值之积。\n\n若该点没有儿子，则该节点权值需为质数。\n\n同时会给出 $m$ 条限制 $a_i$，表示树上的权值不能出现 $a_i$。\n\n您构造的二叉树需要使：令 $k$ 为节点数， $\\sum\\limits_{i=1}^k\\sum\\limits_{j=i}^kval_{lca(i,j)}$ 最小，其中 $val_i$ 表示第 $i$ 个点的权值，$lca(i,j)$ 表示 $i,j$ 的最近公共祖先。", "inputFormat": "第一行两个正整数 $n,m$。\n\n之后一行 $m$ 个数 $a_i$。", "outputFormat": "一行一个数，表示最小的 $\\sum\\limits_{i=1}^k\\sum\\limits_{j=i}^kval_{lca(i,j)}$。\n\n无解输出 `-1`。", "hint": "样例解释：\n\n样例 $1$：最优方案如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2dcec565.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n其中，黑色数字代表权值，红色数字代表标号（您不需要对树标号，这里的标号只是为了更方便解释样例）。\n\n$ans=val_{lca(1,1)}+val_{lca(1,2)}+val_{lca(1,3)}+val_{lca(2,2)}+val_{lca(2,3)}+val_{lca(3,3)}$\n\n$~~~~~~~~=val_1+val_1+val_1+val_2+val_1+val_3$\n\n$~~~~~~~~=4+4+4+2+4+2=20$\n\nSubtask 1（5 分）： $n\\leq 20$。\n\nSubtask 2（12 分）：$n\\leq 10^6$。\n\nSubtask 3（28 分）：$n\\leq 10^{12}$。\n\nSubtask 4（20 分）：$m=0$。\n\nSubtask 5（35 分）：$n\\leq 10^{15}$。\n\n对于所有数据 $2\\leq n\\leq 10^{15}$，$0\\leq m\\leq \\min(n,10^5)$，$2\\leq a_i\\leq n$， 且答案不超过 $4\\times 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P7092", "type": "P", "difficulty": 6, "samples": [["2 2", "998244352"], ["114514 2", "662314206"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "计数题", "background": "", "description": "您有一个无限大的集合，其中有所有小于等于 $n$ 的质数和其中它们的乘积。\n\n如 $n=5$，集合中实际包含的数为 $2,3,5$（质数），$4,6,8,9,10,12.....$（质数之积），假设这个集合为 $T$。\n\n\n求：\n\n$\\sum\\limits_{S\\subset T,S\\neq\\varnothing}\\mu(\\prod\\limits_{i\\in S}i)\\varphi(\\prod\\limits_{i\\in S}i)$\n\n对 $998244353$ 取模。可以证明这个和是存在的。\n\n为了您能更好的获得部分分，我们会给定一个 $k$，表示一些限制，**$k$ 的值可能影响答案！请认真阅读提示说明**。\n\n$n\\leq 10^6$", "inputFormat": "一行两个整数 $n,k$。", "outputFormat": "一行一个整数，表示答案，对 $998244353$ 取模。", "hint": "$k$ 的限制如下：\n\n$k=0:$ 选出的集合 $S$ 中至少含有一个完全平方数。\n\n$k=1:$ 选出的集合 $S$ 中只能含有质数。\n\n$k=2:$ 无任何限制。\n\n| 测试点编号 |$n$  |$k$  |\n| :----------: | :----------: | :----------: |\n| $1\\sim 2$ |$\\leq 5$  |$2$  |\n| $3\\sim 5$ |$\\leq 20$  |$2$  |\n| $6\\sim 11$ |$\\leq 5000$  |$2$  |\n| $12$ |$\\leq 10^6$  |$0$  |\n| $13\\sim 14$ |$\\leq 10^6$  |$1$  |\n| $15\\sim 16$ |$\\leq 10^5$  |$2$  |\n| $17\\sim 20$ |$\\leq 10^6$  |$2$  |\n\n样例 $1$ 解释：\n\n答案为 $\\mu(2)\\varphi(2)=-1\\times 1=-1$，对 $998244353$ 取模为 $998244352$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "计数题", "background": "", "description": "您有一个无限大的集合，其中有所有小于等于 $n$ 的质数和其中它们的乘积。\n\n如 $n=5$，集合中实际包含的数为 $2,3,5$（质数），$4,6,8,9,10,12.....$（质数之积），假设这个集合为 $T$。\n\n\n求：\n\n$\\sum\\limits_{S\\subset T,S\\neq\\varnothing}\\mu(\\prod\\limits_{i\\in S}i)\\varphi(\\prod\\limits_{i\\in S}i)$\n\n对 $998244353$ 取模。可以证明这个和是存在的。\n\n为了您能更好的获得部分分，我们会给定一个 $k$，表示一些限制，**$k$ 的值可能影响答案！请认真阅读提示说明**。\n\n$n\\leq 10^6$", "inputFormat": "一行两个整数 $n,k$。", "outputFormat": "一行一个整数，表示答案，对 $998244353$ 取模。", "hint": "$k$ 的限制如下：\n\n$k=0:$ 选出的集合 $S$ 中至少含有一个完全平方数。\n\n$k=1:$ 选出的集合 $S$ 中只能含有质数。\n\n$k=2:$ 无任何限制。\n\n| 测试点编号 |$n$  |$k$  |\n| :----------: | :----------: | :----------: |\n| $1\\sim 2$ |$\\leq 5$  |$2$  |\n| $3\\sim 5$ |$\\leq 20$  |$2$  |\n| $6\\sim 11$ |$\\leq 5000$  |$2$  |\n| $12$ |$\\leq 10^6$  |$0$  |\n| $13\\sim 14$ |$\\leq 10^6$  |$1$  |\n| $15\\sim 16$ |$\\leq 10^5$  |$2$  |\n| $17\\sim 20$ |$\\leq 10^6$  |$2$  |\n\n样例 $1$ 解释：\n\n答案为 $\\mu(2)\\varphi(2)=-1\\times 1=-1$，对 $998244353$ 取模为 $998244352$。", "locale": "zh-CN"}}}
{"pid": "P7093", "type": "P", "difficulty": 6, "samples": [["3\n9\n2 8 4 1 1 4 4 4 4\n5\n2 16 4 8 2\n3\n2 2 2", "rrrlllrrr\nno\nno"]], "limits": {"time": [1000], "memory": [131072]}, "tags": ["2014", "Special Judge", "ICPC", "CERC"], "title": "[CERC2014] Can't stop playing", "background": "", "description": "Some computer games are extremely fun and this problem may be about one of these.\n\nYou are given a sequence of one dimensional blocks, each of length that is a power of two.\nThe goal of the game is to merge all the blocks into one big block. The blocks are presented\none by one, and for each one you have to decide whether to stick it immediately to the left or\nimmediately to the right of the previous blocks.\n\nEvery time two blocks of the same size are adjacent, they merge into one block that is twice\nas long as each of them. Note that, as long as possible, the resulting blocks immediately merge\nwith adjacent ones. For example, if the current sequence of blocks is $2, 4, 16$, then sticking $2$ on\nthe left side leads to $8, 16$, while sticking it on the right side gives $2, 4, 16, 2$. Note that at any\nmoment there is at most one mergeable pair of blocks.\n\nYou have lost the game (again!) and you are wondering whether there was any way to win at all. Analyze the sequence to find out.", "inputFormat": "The first line of input contains the number of test cases $T$. The descriptions of the test cases follow:\n\nEach test case consists of two lines. The first one contains a positive integer $n \\leq 1 000$ – the\nlength of the sequence. The next line contains a sequence of $n$ block lengths, each a power of two. The sum of all the lengths does not exceed $2^{13}$.", "outputFormat": "For each test case, output one line containing the word $\\texttt{no}$ if winning the game is not possible. Otherwise, output a word consisting of $n$ letters $\\texttt{l}$ and $\\texttt{r}$, denoting whether the corresponding block should be stuck to the left or to the right. Note that for the first block it does not matter.", "hint": "", "locale": "en", "translations": {"en": {"title": "[CERC2014] Can't stop playing", "background": "", "description": "Some computer games are extremely fun and this problem may be about one of these.\n\nYou are given a sequence of one dimensional blocks, each of length that is a power of two.\nThe goal of the game is to merge all the blocks into one big block. The blocks are presented\none by one, and for each one you have to decide whether to stick it immediately to the left or\nimmediately to the right of the previous blocks.\n\nEvery time two blocks of the same size are adjacent, they merge into one block that is twice\nas long as each of them. Note that, as long as possible, the resulting blocks immediately merge\nwith adjacent ones. For example, if the current sequence of blocks is $2, 4, 16$, then sticking $2$ on\nthe left side leads to $8, 16$, while sticking it on the right side gives $2, 4, 16, 2$. Note that at any\nmoment there is at most one mergeable pair of blocks.\n\nYou have lost the game (again!) and you are wondering whether there was any way to win at all. Analyze the sequence to find out.", "inputFormat": "The first line of input contains the number of test cases $T$. The descriptions of the test cases follow:\n\nEach test case consists of two lines. The first one contains a positive integer $n \\leq 1 000$ – the\nlength of the sequence. The next line contains a sequence of $n$ block lengths, each a power of two. The sum of all the lengths does not exceed $2^{13}$.", "outputFormat": "For each test case, output one line containing the word $\\texttt{no}$ if winning the game is not possible. Otherwise, output a word consisting of $n$ letters $\\texttt{l}$ and $\\texttt{r}$, denoting whether the corresponding block should be stuck to the left or to the right. Note that for the first block it does not matter.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[CERC2014] Can't stop playing", "background": null, "description": "有些计算机游戏非常有趣，这个问题可能就是关于其中之一。你得到了一系列一维的方块，每个方块的长度都是 2 的幂。游戏的目标是将所有方块合并成一个大方块。方块一个接一个地呈现，对于每一个方块，你必须决定是立即粘在最左边的方块的左边还是最右边的方块的右边。\n\n每当两个相同大小的方块相邻时，它们会合并成一个长度是它们各自两倍的方块。注意，只要可能，生成的方块会立即与相邻的方块合并。例如，如果当前的方块序列是 $2, 4, 16$，那么将 $2$ 粘在左边会导致 $8, 16$，而粘在右边则会得到 $2, 4, 16, 2$。注意，在任何时刻最多只有一对可合并的方块。\n\n你又一次输了游戏，并且想知道是否有任何方法可以赢。分析序列以找出答案。", "inputFormat": "输入的第一行包含测试用例的数量 $T$。接下来的描述是测试用例的内容：\n\n每个测试用例由两行组成。第一行包含一个正整数 $n \\leq 1 000$ —— 序列的长度。下一行包含 $n$ 个方块长度的序列，每个长度都是 2 的幂。所有长度的总和不超过 $2^{13}$。", "outputFormat": "对于每个测试用例，输出一行，包含单词 $\\texttt{no}$，如果赢得游戏是不可能的。否则，输出一个由 $n$ 个字母 $\\texttt{l}$ 和 $\\texttt{r}$ 组成的单词，表示相应的方块应该粘在左边还是右边。注意，对于第一个方块，这无关紧要。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7094", "type": "P", "difficulty": 3, "samples": [["1\n1 1 3 2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2020", "O2优化", "枚举"], "title": "[yLOI2020] 金陵谣", "background": "> 水几绕，山几重，何处金陵城。   \n> 访名都，寻形胜，龙虎倚江东。   \n> 书留翰墨，曲落潮声。   \n> 草木几度枯荣。\n\n——银临《金陵谣》", "description": "江苏南京，亦称金陵，是一座历史文化名城。有了古城的衬托，江苏省的高考模拟题都显地那么棘手，难以解决。切切在一轮复习过程中便碰到一道江苏省模拟题，在七瑾的帮助下，切切很快秒杀了该题，但切切觉得不够，想用这道题来刁难你。解决本题就能吃到切切和七瑾撒的糖。\n\n给定四个正整数 $a, b, c, d$，求有多少对正整数 $(x, y)$ 满足\n\n$$\\frac a x + \\frac b c = \\frac d y$$", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n第一行是一个整数，表示数据组数 $T$。\n\n接下来 $T$ 行，每行四个整数，依次表示一组数据的 $a, b, c, d$。", "outputFormat": "对于每组数据，输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n求 $\\frac 1 x + \\frac 1 3 = \\frac 2 y$ 的正整数解对数，分别是 $(x = 3, y = 3)$，$(x = 6, y = 4)$，$(x = 15, y = 5)$。\n\n### 数据规模与约定\n\n本题共有 20 个测试点，每个测试点 $5$ 分。\n\n- 对于测试点 $1$，保证 $T = 0$。\n- 对于测试点 $2 \\sim 16$，共 $15$ 个测试点，对于 $a, b, c, d$ 四个数中至少存在一个数为 $1$ 共有 $15$ 种情况，每个测试点对应一种情况。\n- 对于测试点 $17 \\sim 20$，没有特殊约定。\n\n对于全部的测试点，保证 $0 \\leq T \\leq 20$，$1 \\leq a, b, c, d \\leq 10^6$，$d \\times c \\leq 10^6$。\n\n### 提示\n\n+ 众所周知，高考不考数论。\n+ 本题共有两个样例文件，见附加中的 song.zip。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 金陵谣", "background": "> 水几绕，山几重，何处金陵城。   \n> 访名都，寻形胜，龙虎倚江东。   \n> 书留翰墨，曲落潮声。   \n> 草木几度枯荣。\n\n——银临《金陵谣》", "description": "江苏南京，亦称金陵，是一座历史文化名城。有了古城的衬托，江苏省的高考模拟题都显地那么棘手，难以解决。切切在一轮复习过程中便碰到一道江苏省模拟题，在七瑾的帮助下，切切很快秒杀了该题，但切切觉得不够，想用这道题来刁难你。解决本题就能吃到切切和七瑾撒的糖。\n\n给定四个正整数 $a, b, c, d$，求有多少对正整数 $(x, y)$ 满足\n\n$$\\frac a x + \\frac b c = \\frac d y$$", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n第一行是一个整数，表示数据组数 $T$。\n\n接下来 $T$ 行，每行四个整数，依次表示一组数据的 $a, b, c, d$。", "outputFormat": "对于每组数据，输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n求 $\\frac 1 x + \\frac 1 3 = \\frac 2 y$ 的正整数解对数，分别是 $(x = 3, y = 3)$，$(x = 6, y = 4)$，$(x = 15, y = 5)$。\n\n### 数据规模与约定\n\n本题共有 20 个测试点，每个测试点 $5$ 分。\n\n- 对于测试点 $1$，保证 $T = 0$。\n- 对于测试点 $2 \\sim 16$，共 $15$ 个测试点，对于 $a, b, c, d$ 四个数中至少存在一个数为 $1$ 共有 $15$ 种情况，每个测试点对应一种情况。\n- 对于测试点 $17 \\sim 20$，没有特殊约定。\n\n对于全部的测试点，保证 $0 \\leq T \\leq 20$，$1 \\leq a, b, c, d \\leq 10^6$，$d \\times c \\leq 10^6$。\n\n### 提示\n\n+ 众所周知，高考不考数论。\n+ 本题共有两个样例文件，见附加中的 song.zip。", "locale": "zh-CN"}}}
{"pid": "P7095", "type": "P", "difficulty": 4, "samples": [["0\n2\n1 5 0 2\n1 2 3 4", "1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2020", "二分", "堆", "单调队列", "O2优化"], "title": "[yLOI2020] 不离", "background": "> 乱玄黄时序，探风林实虚。  \n> 我要你共我奇谈怪趣。  \n> 任日月斑斓，待春秋兴残。  \n> 我要我们有聚无散。  \n\n——银临《不离》", "description": "这道题目来自 zxy 哔哔，咕咕让哔哔选一首歌作为题目名，但是哔哔说没有想好，于是咕咕就帮他选了这首歌。\n\n哔哔在玩一款叫做《暗黑破坏神》的游戏，某天哔哔灵光乍现，以游戏为背景出了一道神仙题并告诉了咕咕。咕咕并不会做，于是对题目进行了一定的简化。因此，经过简化后，这道题已经和《暗黑破坏神》没什么关系了。\n\n游戏中人物有两个属性，我们分别称之为「力量」和「精神」，同时哔哔有 $n$ 件装备，穿戴第 $i$ 件装备需要人物在穿戴前的力量值不低于 $a_i$，精神值不低于 $b_i$。在穿戴第 $i$ 件装备后，人物的力量值会增加 $c_i$，精神值会增加 $d_i$。\n\n哔哔可以自由选择穿装备的顺序，只要满足力量和精神不低于对应值，就可以穿戴该装备。\n\n现在，咕咕想知道，如果想让哔哔穿戴上所有的装备，那么人物的初始力量值（即没有穿任何装备之前的力量值）最小应该是多少？在初始力量值最小的前提下，初始精神值（即没有穿任何装备之前的精神值）最小应该是多少？\n\n显然，初始力量和初始精神都应该是非负整数。", "inputFormat": "第一行有一个整数，表示该测试点所在的子任务编号 $T$。  \n第二行有一个整数，表示哔哔的装备件数 $n$。  \n第 $3$ 到第 $(n+2)$ 行，每行四个整数，第 $(i+2)$ 行的整数依次表示 $a_i,b_i,c_i,d_i$。", "outputFormat": "输出一行两个用空格隔开的整数，分别表示最小的初始力量值以及在初始力量值最小的前提下最小的初始精神值。", "hint": "### 样例 1 解释\n\n当初始力量值为 $1$，精神值为 $2$ 时，可以穿戴第 $2$ 件装备。在穿戴该装备后，增加 $3$ 点力量和 $4$ 点精神，人物的属性变为 $4$ 点力量和 $6$ 点精神，此时可以穿戴第 $1$ 件装备。\n\n### 数据规模与约定\n\n**本题采用多测试点捆绑测试**。\n\n- 子任务 $1$（$5$ 分）：保证 $n=0$。\n- 子任务 $2$（$5$ 分）：保证 $n=1$。\n- 子任务 $3$（$20$ 分）：保证 $a_i,b_i \\le 100$，$n \\le 6$。\n- 子任务 $4$（$10$ 分）：保证 $a_i,b_i \\le 10^5$，$n \\le 6$。\n- 子任务 $5$（$10$ 分）：保证 $a_i,b_i \\le 10$。\n- 子任务 $6$（$10$ 分）：保证 $a_i,b_i \\le 100$。\n- 子任务 $7$（$10$ 分）：保证 $b_i=0$，$n \\le 6$。\n- 子任务 $8$（$10$ 分）：保证 $b_i=0$。\n- 子任务 $9$（$10$ 分）：保证 $n \\le 6$。\n- 子任务 $10$（$10$ 分）：无特殊约定。\n\n对于全部的测试点，保证 $0 \\le n \\le 10^5$，$0 \\le a_i,b_i,c_i,d_i \\le 10^9$。\n\n### 提示\n有 $4$ 个样例文件，请见附加文件中的 forever.zip。\n\n对于第三个样例，满足 $b_i = 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 不离", "background": "> 乱玄黄时序，探风林实虚。  \n> 我要你共我奇谈怪趣。  \n> 任日月斑斓，待春秋兴残。  \n> 我要我们有聚无散。  \n\n——银临《不离》", "description": "这道题目来自 zxy 哔哔，咕咕让哔哔选一首歌作为题目名，但是哔哔说没有想好，于是咕咕就帮他选了这首歌。\n\n哔哔在玩一款叫做《暗黑破坏神》的游戏，某天哔哔灵光乍现，以游戏为背景出了一道神仙题并告诉了咕咕。咕咕并不会做，于是对题目进行了一定的简化。因此，经过简化后，这道题已经和《暗黑破坏神》没什么关系了。\n\n游戏中人物有两个属性，我们分别称之为「力量」和「精神」，同时哔哔有 $n$ 件装备，穿戴第 $i$ 件装备需要人物在穿戴前的力量值不低于 $a_i$，精神值不低于 $b_i$。在穿戴第 $i$ 件装备后，人物的力量值会增加 $c_i$，精神值会增加 $d_i$。\n\n哔哔可以自由选择穿装备的顺序，只要满足力量和精神不低于对应值，就可以穿戴该装备。\n\n现在，咕咕想知道，如果想让哔哔穿戴上所有的装备，那么人物的初始力量值（即没有穿任何装备之前的力量值）最小应该是多少？在初始力量值最小的前提下，初始精神值（即没有穿任何装备之前的精神值）最小应该是多少？\n\n显然，初始力量和初始精神都应该是非负整数。", "inputFormat": "第一行有一个整数，表示该测试点所在的子任务编号 $T$。  \n第二行有一个整数，表示哔哔的装备件数 $n$。  \n第 $3$ 到第 $(n+2)$ 行，每行四个整数，第 $(i+2)$ 行的整数依次表示 $a_i,b_i,c_i,d_i$。", "outputFormat": "输出一行两个用空格隔开的整数，分别表示最小的初始力量值以及在初始力量值最小的前提下最小的初始精神值。", "hint": "### 样例 1 解释\n\n当初始力量值为 $1$，精神值为 $2$ 时，可以穿戴第 $2$ 件装备。在穿戴该装备后，增加 $3$ 点力量和 $4$ 点精神，人物的属性变为 $4$ 点力量和 $6$ 点精神，此时可以穿戴第 $1$ 件装备。\n\n### 数据规模与约定\n\n**本题采用多测试点捆绑测试**。\n\n- 子任务 $1$（$5$ 分）：保证 $n=0$。\n- 子任务 $2$（$5$ 分）：保证 $n=1$。\n- 子任务 $3$（$20$ 分）：保证 $a_i,b_i \\le 100$，$n \\le 6$。\n- 子任务 $4$（$10$ 分）：保证 $a_i,b_i \\le 10^5$，$n \\le 6$。\n- 子任务 $5$（$10$ 分）：保证 $a_i,b_i \\le 10$。\n- 子任务 $6$（$10$ 分）：保证 $a_i,b_i \\le 100$。\n- 子任务 $7$（$10$ 分）：保证 $b_i=0$，$n \\le 6$。\n- 子任务 $8$（$10$ 分）：保证 $b_i=0$。\n- 子任务 $9$（$10$ 分）：保证 $n \\le 6$。\n- 子任务 $10$（$10$ 分）：无特殊约定。\n\n对于全部的测试点，保证 $0 \\le n \\le 10^5$，$0 \\le a_i,b_i,c_i,d_i \\le 10^9$。\n\n### 提示\n有 $4$ 个样例文件，请见附加文件中的 forever.zip。\n\n对于第三个样例，满足 $b_i = 0$。", "locale": "zh-CN"}}}
{"pid": "P7096", "type": "P", "difficulty": 4, "samples": [["5 3\n1 2 3 4 5\n1 3\n2 3\n3 3", "3\n3\n3\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2020", "O2优化", "位运算"], "title": "[yLOI2020] 泸沽寻梦", "background": "> 我应是泸沽烟水里的过客，  \n> 孑然弹铗，划天地开阖。  \n> 邂逅过的，梦醒之余，  \n> 却忘了该如何洒脱。 \n\n——银临《泸沽寻梦》", "description": "> 南有仙地，名曰摩梭，摩梭有湖，泸沽是也。\n\n茶茶在泸沽湖中寻找自己的梦。氤氲雾气中，茶茶的 $n$ 个梦排成了一个序列。茶茶的所有梦境都是拉瓦的样子。为了区分这些拉瓦，茶茶规定从左到右第 $i$ 个的拉瓦的美颜值是一个非负整数 $a_i$。面对着这些梦，茶茶会进行 $m$ 次操作，每次操作会给定两个数字 $p,x$，然后将 $a_p$ 和 $a_{p+1}$ 都对 $x$ 做按位异或。每次操作完之后，茶茶都想知道，当前的梦序列中，有多少个子区间 $[l,r]$，满足 $l \\le r$ 且区间的异或和为 $0$，请你回答茶茶的问题。\n\n区间 $[l,r]$ 的异或和定义为 $a_l \\otimes a_{l + 1} \\otimes \\dots a_{r - 1} \\otimes a_r$。其中 $\\otimes$ 代表二进制按位异或运算，即 C++ 语言的「^」运算符。两个区间不同当且仅当两区间左端点不同或两区间右端点不同或两区间左右端点均不同。\n\n为了避免输出过大，你只需要输出四个整数，分别表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "inputFormat": "第一行有两个整数，分别表示梦境的数量 $n$ 和操作的次数 $m$。  \n第二行有 $n$ 个用空格隔开的整数，第 $i$ 个整数表示第 $i$ 个拉瓦的美颜值 $a_i$。  \n接下来 $m$ 行，每行两个整数，依次表示一次操作的 $p$ 和 $x$。", "outputFormat": "输出四行，每行一个整数，依次表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "hint": "### 样例 1 解释\n\n- 第一次操作后，序列变为 ${2,1,3,4,5}$，有且仅有区间 $[1,3]$ 的异或和为 $0$，故本次询问的答案为 $1$。\n- 第二次操作后，序列变为 ${2,2,0,4,5}$，区间 $[1,2]$、$[1,3]$、$[3,3]$ 的异或和为 $0$，故本次询问的答案为 $3$。\n- 第三次操作后，序列变为 ${2,2,3,7,5}$，有且仅有区间 $[1,2]$ 的异或和为 $0$，故本次询问的答案为 $1$。所有答案的异或和为 $3$，有 $3$ 次回答的答案为奇数，所有答案中的最大值为 $3$，最小值为 $1$。\n\n### 数据规模与约定\n\n**本题采用多测试点捆绑测试**，共有 5 个子任务。\n\n- 子任务 $1$（$10$ 分）：保证 $n,m \\le 100$。\n- 子任务 $2$（$10$ 分）：保证 $n,m \\le 300$。\n- 子任务 $3$（$20$ 分）：保证 $n,m \\le 3000$。\n- 子任务 $4$（$30$ 分）：保证 $n,m \\le 10^5$。\n- 子任务 $5$（$30$ 分）：无特殊限制。\n\n对于前四个子任务，保证 $a_i,x \\le n$；  \n对于全部的测试点，保证 $1 \\le n,m \\le 10^6$，$0 \\le a_i,x \\le 10^9$，$1 \\le p<n$。\n\n### 提示\n\n- 请注意，$a_i,x \\leq Y$ 不能说明 $a_i \\otimes x \\leq Y$。\n-  请注意大量数据读入对程序效率造成的影响。\n- 本题的特殊输出方式只是为了避免输出过大造成程序超时，与本题解法无关。\n- 请注意常数因子对程序效率造成的影响。\n- 本题共有两个样例文件，请见附加文件中的 dream.zip。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 泸沽寻梦", "background": "> 我应是泸沽烟水里的过客，  \n> 孑然弹铗，划天地开阖。  \n> 邂逅过的，梦醒之余，  \n> 却忘了该如何洒脱。 \n\n——银临《泸沽寻梦》", "description": "> 南有仙地，名曰摩梭，摩梭有湖，泸沽是也。\n\n茶茶在泸沽湖中寻找自己的梦。氤氲雾气中，茶茶的 $n$ 个梦排成了一个序列。茶茶的所有梦境都是拉瓦的样子。为了区分这些拉瓦，茶茶规定从左到右第 $i$ 个的拉瓦的美颜值是一个非负整数 $a_i$。面对着这些梦，茶茶会进行 $m$ 次操作，每次操作会给定两个数字 $p,x$，然后将 $a_p$ 和 $a_{p+1}$ 都对 $x$ 做按位异或。每次操作完之后，茶茶都想知道，当前的梦序列中，有多少个子区间 $[l,r]$，满足 $l \\le r$ 且区间的异或和为 $0$，请你回答茶茶的问题。\n\n区间 $[l,r]$ 的异或和定义为 $a_l \\otimes a_{l + 1} \\otimes \\dots a_{r - 1} \\otimes a_r$。其中 $\\otimes$ 代表二进制按位异或运算，即 C++ 语言的「^」运算符。两个区间不同当且仅当两区间左端点不同或两区间右端点不同或两区间左右端点均不同。\n\n为了避免输出过大，你只需要输出四个整数，分别表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "inputFormat": "第一行有两个整数，分别表示梦境的数量 $n$ 和操作的次数 $m$。  \n第二行有 $n$ 个用空格隔开的整数，第 $i$ 个整数表示第 $i$ 个拉瓦的美颜值 $a_i$。  \n接下来 $m$ 行，每行两个整数，依次表示一次操作的 $p$ 和 $x$。", "outputFormat": "输出四行，每行一个整数，依次表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "hint": "### 样例 1 解释\n\n- 第一次操作后，序列变为 ${2,1,3,4,5}$，有且仅有区间 $[1,3]$ 的异或和为 $0$，故本次询问的答案为 $1$。\n- 第二次操作后，序列变为 ${2,2,0,4,5}$，区间 $[1,2]$、$[1,3]$、$[3,3]$ 的异或和为 $0$，故本次询问的答案为 $3$。\n- 第三次操作后，序列变为 ${2,2,3,7,5}$，有且仅有区间 $[1,2]$ 的异或和为 $0$，故本次询问的答案为 $1$。所有答案的异或和为 $3$，有 $3$ 次回答的答案为奇数，所有答案中的最大值为 $3$，最小值为 $1$。\n\n### 数据规模与约定\n\n**本题采用多测试点捆绑测试**，共有 5 个子任务。\n\n- 子任务 $1$（$10$ 分）：保证 $n,m \\le 100$。\n- 子任务 $2$（$10$ 分）：保证 $n,m \\le 300$。\n- 子任务 $3$（$20$ 分）：保证 $n,m \\le 3000$。\n- 子任务 $4$（$30$ 分）：保证 $n,m \\le 10^5$。\n- 子任务 $5$（$30$ 分）：无特殊限制。\n\n对于前四个子任务，保证 $a_i,x \\le n$；  \n对于全部的测试点，保证 $1 \\le n,m \\le 10^6$，$0 \\le a_i,x \\le 10^9$，$1 \\le p<n$。\n\n### 提示\n\n- 请注意，$a_i,x \\leq Y$ 不能说明 $a_i \\otimes x \\leq Y$。\n-  请注意大量数据读入对程序效率造成的影响。\n- 本题的特殊输出方式只是为了避免输出过大造成程序超时，与本题解法无关。\n- 请注意常数因子对程序效率造成的影响。\n- 本题共有两个样例文件，请见附加文件中的 dream.zip。", "locale": "zh-CN"}}}
{"pid": "P7097", "type": "P", "difficulty": 6, "samples": [["0\n3 2 1\n50 1\n20 100\n100000 200000 2 3", "-52"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "博弈论", "2020", "O2优化", "背包 DP"], "title": "[yLOI2020] 牵丝戏", "background": "> 风雪依稀秋白发尾， 灯火葳蕤，揉皱你眼眉。  \n> 假如你舍一滴泪，假如老去我能陪。  \n> 烟波里成灰，也去得完美。 \n\n——银临 & Aki阿杰《牵丝戏》", "description": "扶苏和扶咕咕最近在玩一款叫做「ddt」的游戏，因为玩「ddt」时一直在循环《牵丝戏》，所以想到牵丝戏就想到了这个游戏。\n\n为了简化问题，我们认为这是一款一对一回合制游戏。双方玩家各有一个属性，被称为 delay 值，简称 $d$ 值。$d$ 值会根据回合中玩家使用的道具类型和数量来进行相应的增加。我们定义玩家 $x$ 的回合为玩家 $x$ 从发动攻击到结束的整个过程。**在玩家 $x$ 的回合中，只有玩家 $x$ 可以使用道具和发动攻击，并且玩家 $x$ 一定会发动攻击**。当一个玩家的回合结束以后，下一回合将是两个玩家中 $d$ 值**较小**的玩家的回合。当两个玩家的 $d$ 值相同时，因为扶苏氪金很多，下一回合一定是**扶苏的回合**。\n\n这款游戏共有 $m$ 种道具，第 $i$ 种道具会将本回合的伤害增加**不计算其他道具的原始伤害**的 $\\frac{k_i}{10^5}$ 倍，同时会增加 $p_i$ 点 $d$ 值。每回合**每种道具只能使用一次，本回合的道具不会对下回合产生伤害增益效果**。同时，每回合结束以后，发动攻击的玩家一定会增加 $w$ 点 $d$ 值。\n\n而使用道具是受到双方 $d$ 值差限制的。具体的，任何回合所使用的道具应该满足本回合结束以后双方 $d$ 值（包括发动攻击的玩家一定增加的 $w$ 点 $d$ 值）之差的绝对值**不超过** $100$。一个显然的事实是，只要保证了 $w \\le 100$，玩家就一定存在一种选择道具的方法（包括不选择），来满足这个限制。\n\n例如，在扶咕咕的回合中，若她的原始伤害 $t=10^5$，初始时 $d$ 值 $d_0=3$，规定 $w=2$，她使用了两个道具，$k_1=114$，$k_2=514$，$p_1=19$，$p_2=81$，那么本回合她造成的伤害为 \n\n$$t + t \\times k_1 + t \\times k_2 = 10^5 + 114 + 514 =  100628$$\n\n她回合结束后的 $d$ 值为\n\n$$d_0 + w + p_1 + p_2 = 3 + 2 + 19 + 81 = 105$$\n\n而假如下回合还是她的回合，并且她没有使用道具，那么她下回合造成的伤害为 \n\n$$t =  100000$$\n\n她下回合结束后的 $d$ 值为 \n\n$$105 + w = 105 + 2 = 107$$\n\n现在扶苏和扶咕咕正在对战。给定游戏的道具列表，和他们的原始伤害、 $d$ 值。游戏一共会进行 $n$ 回合，不妨认为无论造成多大的伤害，双方都不会死亡。请你最大化「扶苏对扶咕咕造成的伤害 - 扶咕咕对扶苏造成的伤害」这个差的值。\n\n当然，扶咕咕也会尽可能最大化「她对扶苏造成伤害 - 扶苏对她造成伤害」的值。不妨认为扶苏是 yLOI 世界中最聪明的男孩子，扶咕咕是 yLOI 世界中最聪明的女孩子，也就是**他们都会选择最优的策略来使用道具而不会出错**，题目所求即为在这种情况下伤害差的最大值。", "inputFormat": "第一行有一个整数，表示该测试点所在的子任务编号 $T$。   \n第二行有三个整数，分别表示游戏的回合数 $n$，游戏的装备数 $m$ 以及每回合固定增加的 $d$ 值 $w$。   \n第三行有 $m$ 个整数，第 $i$ 个整数表示 $k_i$。   \n第四行有 $m$ 个整数，第 $i$ 个整数表示 $p_i$。   \n第五行有四个整数，依次表示扶苏的初始伤害 $x_a$，扶咕咕的初始伤害 $x_b$，扶苏的初始 $d$ 值 $d_a$，扶咕咕的初始 $d$ 值 $d_b$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n- 第一回合开始前，扶苏 $d$ 值为 $2$，扶咕咕 $d$ 值为 $3$，第一回合由扶苏出手。扶苏不使用道具，伤害为 $100000$，$d$ 值增加 $1$，总伤害差为 $100000$。\n- 第一回合结束后，双方 $d$ 值均为 $3$，第二回合由扶苏出手。扶苏使用第一个道具，伤害为 $100050$，$d$ 值增加 $21$，总伤害差为 $200050$。\n- 第二回合结束后，扶苏 $d$ 值为 $24$，扶咕咕 $d$ 值为 $3$，第三回合由扶咕咕出手。扶咕咕使用 $1$ 、 $2$ 两个道具，伤害为 $200102$，$d$ 值增加 $121$，总伤害差为 $-52$。这回合结束后，双方 $d$ 值差恰好为 $100$，符合要求。\n\n### 数据规模与约定\n\n\n**本题采用多测试点捆绑测试**。\n\n- 子任务 $1$（$5$ 分）：保证 $n=0$。\n- 子任务 $2$（$10$ 分）：保证 $m=0$。\n- 子任务 $3$（$15$ 分）：保证 $n,m \\le 5$。\n- 子任务 $4$（$20$ 分）：保证 $n \\le 3$。\n- 子任务 $5$（$20$ 分）：保证 $m \\le 10$。\n- 子任务 $6$（$30$ 分）：无特殊约定。\n\n对于全部的测试点，保证 $0 \\le n \\le 10^3$，$0 \\le m \\le 10^5$，$1 \\le p_i,w \\le 100$，$1 \\le x_a,x_b,k_a,d_a,d_b \\le 10^9$，$x_a$ 与 $x_b$ 是 $10^5$ 的倍数，$1 \\le |d_a-d_b| \\le 100$。\n\n### 提示\n\n共有 4 个样例文件，请见附加文件中的 opera.zip。  \n对于样例 2，满足 $m = 0$。  \n对于样例 3，满足 $n \\leq 3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 牵丝戏", "background": "> 风雪依稀秋白发尾， 灯火葳蕤，揉皱你眼眉。  \n> 假如你舍一滴泪，假如老去我能陪。  \n> 烟波里成灰，也去得完美。 \n\n——银临 & Aki阿杰《牵丝戏》", "description": "扶苏和扶咕咕最近在玩一款叫做「ddt」的游戏，因为玩「ddt」时一直在循环《牵丝戏》，所以想到牵丝戏就想到了这个游戏。\n\n为了简化问题，我们认为这是一款一对一回合制游戏。双方玩家各有一个属性，被称为 delay 值，简称 $d$ 值。$d$ 值会根据回合中玩家使用的道具类型和数量来进行相应的增加。我们定义玩家 $x$ 的回合为玩家 $x$ 从发动攻击到结束的整个过程。**在玩家 $x$ 的回合中，只有玩家 $x$ 可以使用道具和发动攻击，并且玩家 $x$ 一定会发动攻击**。当一个玩家的回合结束以后，下一回合将是两个玩家中 $d$ 值**较小**的玩家的回合。当两个玩家的 $d$ 值相同时，因为扶苏氪金很多，下一回合一定是**扶苏的回合**。\n\n这款游戏共有 $m$ 种道具，第 $i$ 种道具会将本回合的伤害增加**不计算其他道具的原始伤害**的 $\\frac{k_i}{10^5}$ 倍，同时会增加 $p_i$ 点 $d$ 值。每回合**每种道具只能使用一次，本回合的道具不会对下回合产生伤害增益效果**。同时，每回合结束以后，发动攻击的玩家一定会增加 $w$ 点 $d$ 值。\n\n而使用道具是受到双方 $d$ 值差限制的。具体的，任何回合所使用的道具应该满足本回合结束以后双方 $d$ 值（包括发动攻击的玩家一定增加的 $w$ 点 $d$ 值）之差的绝对值**不超过** $100$。一个显然的事实是，只要保证了 $w \\le 100$，玩家就一定存在一种选择道具的方法（包括不选择），来满足这个限制。\n\n例如，在扶咕咕的回合中，若她的原始伤害 $t=10^5$，初始时 $d$ 值 $d_0=3$，规定 $w=2$，她使用了两个道具，$k_1=114$，$k_2=514$，$p_1=19$，$p_2=81$，那么本回合她造成的伤害为 \n\n$$t + t \\times k_1 + t \\times k_2 = 10^5 + 114 + 514 =  100628$$\n\n她回合结束后的 $d$ 值为\n\n$$d_0 + w + p_1 + p_2 = 3 + 2 + 19 + 81 = 105$$\n\n而假如下回合还是她的回合，并且她没有使用道具，那么她下回合造成的伤害为 \n\n$$t =  100000$$\n\n她下回合结束后的 $d$ 值为 \n\n$$105 + w = 105 + 2 = 107$$\n\n现在扶苏和扶咕咕正在对战。给定游戏的道具列表，和他们的原始伤害、 $d$ 值。游戏一共会进行 $n$ 回合，不妨认为无论造成多大的伤害，双方都不会死亡。请你最大化「扶苏对扶咕咕造成的伤害 - 扶咕咕对扶苏造成的伤害」这个差的值。\n\n当然，扶咕咕也会尽可能最大化「她对扶苏造成伤害 - 扶苏对她造成伤害」的值。不妨认为扶苏是 yLOI 世界中最聪明的男孩子，扶咕咕是 yLOI 世界中最聪明的女孩子，也就是**他们都会选择最优的策略来使用道具而不会出错**，题目所求即为在这种情况下伤害差的最大值。", "inputFormat": "第一行有一个整数，表示该测试点所在的子任务编号 $T$。   \n第二行有三个整数，分别表示游戏的回合数 $n$，游戏的装备数 $m$ 以及每回合固定增加的 $d$ 值 $w$。   \n第三行有 $m$ 个整数，第 $i$ 个整数表示 $k_i$。   \n第四行有 $m$ 个整数，第 $i$ 个整数表示 $p_i$。   \n第五行有四个整数，依次表示扶苏的初始伤害 $x_a$，扶咕咕的初始伤害 $x_b$，扶苏的初始 $d$ 值 $d_a$，扶咕咕的初始 $d$ 值 $d_b$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n- 第一回合开始前，扶苏 $d$ 值为 $2$，扶咕咕 $d$ 值为 $3$，第一回合由扶苏出手。扶苏不使用道具，伤害为 $100000$，$d$ 值增加 $1$，总伤害差为 $100000$。\n- 第一回合结束后，双方 $d$ 值均为 $3$，第二回合由扶苏出手。扶苏使用第一个道具，伤害为 $100050$，$d$ 值增加 $21$，总伤害差为 $200050$。\n- 第二回合结束后，扶苏 $d$ 值为 $24$，扶咕咕 $d$ 值为 $3$，第三回合由扶咕咕出手。扶咕咕使用 $1$ 、 $2$ 两个道具，伤害为 $200102$，$d$ 值增加 $121$，总伤害差为 $-52$。这回合结束后，双方 $d$ 值差恰好为 $100$，符合要求。\n\n### 数据规模与约定\n\n\n**本题采用多测试点捆绑测试**。\n\n- 子任务 $1$（$5$ 分）：保证 $n=0$。\n- 子任务 $2$（$10$ 分）：保证 $m=0$。\n- 子任务 $3$（$15$ 分）：保证 $n,m \\le 5$。\n- 子任务 $4$（$20$ 分）：保证 $n \\le 3$。\n- 子任务 $5$（$20$ 分）：保证 $m \\le 10$。\n- 子任务 $6$（$30$ 分）：无特殊约定。\n\n对于全部的测试点，保证 $0 \\le n \\le 10^3$，$0 \\le m \\le 10^5$，$1 \\le p_i,w \\le 100$，$1 \\le x_a,x_b,k_a,d_a,d_b \\le 10^9$，$x_a$ 与 $x_b$ 是 $10^5$ 的倍数，$1 \\le |d_a-d_b| \\le 100$。\n\n### 提示\n\n共有 4 个样例文件，请见附加文件中的 opera.zip。  \n对于样例 2，满足 $m = 0$。  \n对于样例 3，满足 $n \\leq 3$。", "locale": "zh-CN"}}}
{"pid": "P7098", "type": "P", "difficulty": 5, "samples": [["2 3\n4 1 1\n4 1 5\n2 1 2\n2 1 3", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "状压 DP"], "title": "[yLOI2020] 凉凉", "background": "> 凉凉三生三世恍然如梦，须臾的年风干泪痕。  \n> 若是回忆不能再相认，就让情分落九尘。  \n> 凉凉十里何时还会春盛，又见树下一盏风存。  \n> 落花有意流水无情，别让恩怨爱恨凉透那花的纯，吾生愿牵尘。 \n\n——张碧晨&杨宗纬《凉凉》", "description": "这是 yLOI 系列竞赛中第一道以歌曲命名但歌手不是银临的题目。这道题目的歌曲和问题没什么关系，只是我们的主人公叫凉凉，于是扶苏为他选择了这首歌。\n\n凉凉在和「七瑾在成都喝着凉茶看 jk 边咕咕边嘎嘎边哔哔边在瓦片上吭吭哧哧切企鹅」群的部分群友在青岛面基结束后，和扶苏一起乘坐地铁被七瑾送到了青岛北站。在乘坐地铁的途中，他们经过了「做物理站（错埠岭站）」，做完了高考物理的凉凉给一点都不想做物理的扶苏提了一个物理问题，扶苏不会做，所以凉凉决定考你一道经济学问题。\n\n青岛共有 $n$ 条地铁线路和 $m$ 个地铁站点。每条线路的地铁都在地下以某一固定的深度运行，而如果某深度为 $i$ 的地铁经过了地铁站 $j$，那么地铁站 $j$ 就要在深度为 $i$ 的地方挖一个站台作为上下客口，开挖该上下客口的花费为 $a_{i,j}$。我们忽略建设上下客口通向地面的通道的费用，而只考虑在该深度建上下客口的花费。显而易见，对于线路 $u$ 和线路 $v$，如果他们都经过了同一个地铁站，那么他们线路不能处在同一深度，否则两线地铁将会相撞。而如果 $u$ 和 $v$ 不存在任何一个相同的经过站点，那么这两条线既可以处在同一高度，也可以不处在同一高度。\n\n在这个问题中，你可以认为任何两个地铁不会在除了站点以外的行驶途中相遇，也即你无需考虑两个地铁因为行驶线路交叉而在两站点之间相遇的情况。\n\n将站点从 $1$ 至 $m$ 编号，线路从 $1$ 至 $n$ 编号，现在给定你 $n$ 条线路的经过站点列表和在每个站点的每个深度的建站花费，请你求出让所有的地铁正常运行的最小建站花费总和。", "inputFormat": "第一行有两个整数，分别表示地铁线路的数量 $n$ 和站点个数 $m$。  \n第 $2$ 到第 $(n+1)$ 行，每行 $m$ 个整数，第 $(i+1)$ 行的第 $j$ 个整数表示 $a_{i,j}$。  \n第 $(n+2)$ 行到第 $(2n+1)$ 行，每行若干个整数，第 $(n+i+1)$ 行表示地铁 $i$ 号线的运行线路信息：\n\n>每行首先有一个整数 $c$，表示该线经过的站点个数，接下来该行有 $c$ 个互不相同的整数 $u$，依次表示该地铁经过的站点编号。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n$1$ 号线和 $2$ 号线都经过了站点 $1$，因此他们不能处于同一深度。   \n令 $1$ 号线在深度 $2$ 运行，$2$ 号线在深度 $1$ 运行，则需要修建站点 $1$ 的深度 $1$ 、 $2$ 的上下客口（花费为 $4+4=8$），站点 $2$ 的深度为 $2$ 的上下客口（花费为 $1$），站点 $3$ 的深度为 $1$ 的上下客口（花费为 $1$），总花费为 $10$。可以证明，这是最优的方案。\n\n### 数据规模与约定\n\n本题共 $20$ 个测试点，每个测试点 $5$ 分。\n\n- 对于 $5\\%$ 的数据，保证 $n=1$。\n- 对于 $35\\%$ 的数据，保证 $n,m \\le 6$。\n- 对于 $70\\%$ 的数据，保证 $n \\le 10$。\n- 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 14$，$1 \\le m \\le 10^5$，$1 \\le a_{i,j} \\le 10^9$，$1 \\le c,u \\le m$。\n\n### 提示\n\n本题共有两个附加样例文件，见附加文件中的 cold.zip。\n\n(本来有个更大的样例，但是因为附件不让传这么大的，就被删掉了)\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 凉凉", "background": "> 凉凉三生三世恍然如梦，须臾的年风干泪痕。  \n> 若是回忆不能再相认，就让情分落九尘。  \n> 凉凉十里何时还会春盛，又见树下一盏风存。  \n> 落花有意流水无情，别让恩怨爱恨凉透那花的纯，吾生愿牵尘。 \n\n——张碧晨&杨宗纬《凉凉》", "description": "这是 yLOI 系列竞赛中第一道以歌曲命名但歌手不是银临的题目。这道题目的歌曲和问题没什么关系，只是我们的主人公叫凉凉，于是扶苏为他选择了这首歌。\n\n凉凉在和「七瑾在成都喝着凉茶看 jk 边咕咕边嘎嘎边哔哔边在瓦片上吭吭哧哧切企鹅」群的部分群友在青岛面基结束后，和扶苏一起乘坐地铁被七瑾送到了青岛北站。在乘坐地铁的途中，他们经过了「做物理站（错埠岭站）」，做完了高考物理的凉凉给一点都不想做物理的扶苏提了一个物理问题，扶苏不会做，所以凉凉决定考你一道经济学问题。\n\n青岛共有 $n$ 条地铁线路和 $m$ 个地铁站点。每条线路的地铁都在地下以某一固定的深度运行，而如果某深度为 $i$ 的地铁经过了地铁站 $j$，那么地铁站 $j$ 就要在深度为 $i$ 的地方挖一个站台作为上下客口，开挖该上下客口的花费为 $a_{i,j}$。我们忽略建设上下客口通向地面的通道的费用，而只考虑在该深度建上下客口的花费。显而易见，对于线路 $u$ 和线路 $v$，如果他们都经过了同一个地铁站，那么他们线路不能处在同一深度，否则两线地铁将会相撞。而如果 $u$ 和 $v$ 不存在任何一个相同的经过站点，那么这两条线既可以处在同一高度，也可以不处在同一高度。\n\n在这个问题中，你可以认为任何两个地铁不会在除了站点以外的行驶途中相遇，也即你无需考虑两个地铁因为行驶线路交叉而在两站点之间相遇的情况。\n\n将站点从 $1$ 至 $m$ 编号，线路从 $1$ 至 $n$ 编号，现在给定你 $n$ 条线路的经过站点列表和在每个站点的每个深度的建站花费，请你求出让所有的地铁正常运行的最小建站花费总和。", "inputFormat": "第一行有两个整数，分别表示地铁线路的数量 $n$ 和站点个数 $m$。  \n第 $2$ 到第 $(n+1)$ 行，每行 $m$ 个整数，第 $(i+1)$ 行的第 $j$ 个整数表示 $a_{i,j}$。  \n第 $(n+2)$ 行到第 $(2n+1)$ 行，每行若干个整数，第 $(n+i+1)$ 行表示地铁 $i$ 号线的运行线路信息：\n\n>每行首先有一个整数 $c$，表示该线经过的站点个数，接下来该行有 $c$ 个互不相同的整数 $u$，依次表示该地铁经过的站点编号。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n$1$ 号线和 $2$ 号线都经过了站点 $1$，因此他们不能处于同一深度。   \n令 $1$ 号线在深度 $2$ 运行，$2$ 号线在深度 $1$ 运行，则需要修建站点 $1$ 的深度 $1$ 、 $2$ 的上下客口（花费为 $4+4=8$），站点 $2$ 的深度为 $2$ 的上下客口（花费为 $1$），站点 $3$ 的深度为 $1$ 的上下客口（花费为 $1$），总花费为 $10$。可以证明，这是最优的方案。\n\n### 数据规模与约定\n\n本题共 $20$ 个测试点，每个测试点 $5$ 分。\n\n- 对于 $5\\%$ 的数据，保证 $n=1$。\n- 对于 $35\\%$ 的数据，保证 $n,m \\le 6$。\n- 对于 $70\\%$ 的数据，保证 $n \\le 10$。\n- 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 14$，$1 \\le m \\le 10^5$，$1 \\le a_{i,j} \\le 10^9$，$1 \\le c,u \\le m$。\n\n### 提示\n\n本题共有两个附加样例文件，见附加文件中的 cold.zip。\n\n(本来有个更大的样例，但是因为附件不让传这么大的，就被删掉了)\n", "locale": "zh-CN"}}}
{"pid": "P7099", "type": "P", "difficulty": 6, "samples": [["0\n2 3\n1 3\n1\n2\n3\n", "1\n1\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "2020", "O2优化", "期望"], "title": "[yLOI2020] 灼", "background": "> 声嘶力竭，向悲泣的虚空祈祷至最后，  \n> 神为何依然残酷冷漠。  \n> 天国或地狱，也奢求你无垢眼眸，  \n> 就让我，再次被你拯救。\n\n——银临《灼》", "description": "> 这里是 NS05，勒本星球已无生命反应，请求救援！普尔！——你听得到吗？我会一直在这里，等待你的归来。\n\n扶苏被困在了勒本星球，灼闻羽驾驶着一架宇宙飞船正打算穿越虫洞到达勒本星球拯救扶苏。\n\n在一条数轴上有 $n$ 个虫洞，第 $i$ 个虫洞的坐标为 $x_i$。进入这些虫洞的任意一个都可以直接到达勒本星球拯救扶苏。飞船到达数轴所在直线上后，会因为磁场的效应失去操控能力，飞船每秒会**等概率**向左或向右移动一个单位长度。\n\n灼闻羽非常焦急，他给出了 $q$ 个飞船进入数轴所在直线的初始坐标，对于每个坐标，他想知道期望需要多少秒才能到达一个虫洞。\n\n如果你计算出的期望是个分数，你需要求出这个分数对 $998244353$ 取模的答案。有关分数取模的定义你可以参考「提示」中的内容。\n\n为了避免输出过大，你只需要输出四个整数，分别表示你所有回答（对 $998244353$ 取模之后，下同）的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "inputFormat": "第一行是一个整数，表示测试点所对应的编号 $T$。  \n第二行有两个整数，分别表示虫洞的个数 $n$ 和初始坐标的个数 $q$。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个虫洞的坐标 $x_i$。  \n接下来 $q$ 行，每行一个整数，表示一个飞船进入数轴所在直线的初始坐标 $y_j$。\n\n**保证给出的 $y_j$ 以不降序排序**。", "outputFormat": "输出四行，每行一个整数，依次表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。\n", "hint": "### 样例 1 解释\n\n数轴上 $1, 3$ 两点有虫洞。当飞船初始坐标为 $1$ 或 $3$ 时，可以直接进入虫洞，花费 $0s$；当初始坐标为 $2$ 时，有 $\\frac 1 2$ 的概率向左一个单位，花费 $1s$ 进入虫洞，也有 $\\frac 1 2$ 的概率向右一个单位，花费 $1s$ 进入虫洞，期望用时为 $\\frac 1 2 \\times (1 + 1) = 1$。\n\n因此，三次询问的答案分别为 $0, 1, 0$。\n\n### 数据规模与约定\n\n本题共有 $10$ 个测试点，每个测试点 $10$ 分。\n\n- 对于 $10\\%$ 的数据，保证 $n = 1$。\n- 对于 $20\\%$ 的数据，保证对于任意一个虫洞，总存在另一个虫洞，使得他们之间的距离不超过 $2$。例如，样例中两个虫洞的距离为 $2$。\n- 对于 $30\\%$ 的数据，保证对于任意一个虫洞，总存在另一个虫洞，使得他们之间的距离不超过 $3$。\n- 对于 $50\\%$ 的数据，保证 $x_i,q \\leq 100$。\n- 对于 $70\\%$ 的数据，保证 $x_i, q \\leq 10^5$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq q \\leq 5 \\times 10^6$，$1 \\leq x_i, y_j \\leq 10^9$，$y_j$ 不小于 $x_i$ 中的最小值，且 $y_j$ 不大于 $x_i$ 中的最大值，$y_j$ 按照不降序给出。\n\n### 提示\n\n- 如果你不知道什么是分数取模，可以参考如下的内容：\n\n  对于一个形如 $\\frac a b$ 的既约分数，其中 $b \\lt 998244353$，它对 $998244353$ 取模后的值为 $a \\times b^{998244351} \\bmod {998244353}$ 。 \n- 为了方便用脚造数据，数据**并不**保证 $x_i$ 互不相同。\n- 请注意大量数据读入对程序效率造成的影响。\n- 本题的特殊输出方式只是为了避免输出过大造成程序超时，与本题解法无关。\n- 请注意，$T$ **不是**数据组数。\n- 本题共有两个附加文件，见附加文件中的 zhuo.zip。\t", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 灼", "background": "> 声嘶力竭，向悲泣的虚空祈祷至最后，  \n> 神为何依然残酷冷漠。  \n> 天国或地狱，也奢求你无垢眼眸，  \n> 就让我，再次被你拯救。\n\n——银临《灼》", "description": "> 这里是 NS05，勒本星球已无生命反应，请求救援！普尔！——你听得到吗？我会一直在这里，等待你的归来。\n\n扶苏被困在了勒本星球，灼闻羽驾驶着一架宇宙飞船正打算穿越虫洞到达勒本星球拯救扶苏。\n\n在一条数轴上有 $n$ 个虫洞，第 $i$ 个虫洞的坐标为 $x_i$。进入这些虫洞的任意一个都可以直接到达勒本星球拯救扶苏。飞船到达数轴所在直线上后，会因为磁场的效应失去操控能力，飞船每秒会**等概率**向左或向右移动一个单位长度。\n\n灼闻羽非常焦急，他给出了 $q$ 个飞船进入数轴所在直线的初始坐标，对于每个坐标，他想知道期望需要多少秒才能到达一个虫洞。\n\n如果你计算出的期望是个分数，你需要求出这个分数对 $998244353$ 取模的答案。有关分数取模的定义你可以参考「提示」中的内容。\n\n为了避免输出过大，你只需要输出四个整数，分别表示你所有回答（对 $998244353$ 取模之后，下同）的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "inputFormat": "第一行是一个整数，表示测试点所对应的编号 $T$。  \n第二行有两个整数，分别表示虫洞的个数 $n$ 和初始坐标的个数 $q$。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个虫洞的坐标 $x_i$。  \n接下来 $q$ 行，每行一个整数，表示一个飞船进入数轴所在直线的初始坐标 $y_j$。\n\n**保证给出的 $y_j$ 以不降序排序**。", "outputFormat": "输出四行，每行一个整数，依次表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。\n", "hint": "### 样例 1 解释\n\n数轴上 $1, 3$ 两点有虫洞。当飞船初始坐标为 $1$ 或 $3$ 时，可以直接进入虫洞，花费 $0s$；当初始坐标为 $2$ 时，有 $\\frac 1 2$ 的概率向左一个单位，花费 $1s$ 进入虫洞，也有 $\\frac 1 2$ 的概率向右一个单位，花费 $1s$ 进入虫洞，期望用时为 $\\frac 1 2 \\times (1 + 1) = 1$。\n\n因此，三次询问的答案分别为 $0, 1, 0$。\n\n### 数据规模与约定\n\n本题共有 $10$ 个测试点，每个测试点 $10$ 分。\n\n- 对于 $10\\%$ 的数据，保证 $n = 1$。\n- 对于 $20\\%$ 的数据，保证对于任意一个虫洞，总存在另一个虫洞，使得他们之间的距离不超过 $2$。例如，样例中两个虫洞的距离为 $2$。\n- 对于 $30\\%$ 的数据，保证对于任意一个虫洞，总存在另一个虫洞，使得他们之间的距离不超过 $3$。\n- 对于 $50\\%$ 的数据，保证 $x_i,q \\leq 100$。\n- 对于 $70\\%$ 的数据，保证 $x_i, q \\leq 10^5$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq q \\leq 5 \\times 10^6$，$1 \\leq x_i, y_j \\leq 10^9$，$y_j$ 不小于 $x_i$ 中的最小值，且 $y_j$ 不大于 $x_i$ 中的最大值，$y_j$ 按照不降序给出。\n\n### 提示\n\n- 如果你不知道什么是分数取模，可以参考如下的内容：\n\n  对于一个形如 $\\frac a b$ 的既约分数，其中 $b \\lt 998244353$，它对 $998244353$ 取模后的值为 $a \\times b^{998244351} \\bmod {998244353}$ 。 \n- 为了方便用脚造数据，数据**并不**保证 $x_i$ 互不相同。\n- 请注意大量数据读入对程序效率造成的影响。\n- 本题的特殊输出方式只是为了避免输出过大造成程序超时，与本题解法无关。\n- 请注意，$T$ **不是**数据组数。\n- 本题共有两个附加文件，见附加文件中的 zhuo.zip。\t", "locale": "zh-CN"}}}
{"pid": "P7100", "type": "P", "difficulty": 4, "samples": [["5 2\n3\n1 1\n2 1\n5 3\n3\n2 1\n3 2\n4 1", "0 2 5 4 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "最短路", "构造"], "title": "[W1] 团", "background": "", "description": "我有一张 $n$ 个节点的无向边带权图。它的边很多，用这个方法表示：\n\n - 有 $k$ 个集合；第 $i$ 个集合可以表示为 $S_i=\\{(T_1,W_1),(T_2,W_2),\\dots,(T_{|S_i|},W_{|S_i|})\\}$。\n - 对于任何两对 $(T_i,W_i),(T_j,W_j)$ 在同一个集合里面，图中会形成一条连 $T_i$ 和 $T_j$ 的边，边权为 $W_i+W_j$。\n\n请对于所有节点 $i$ 找到 $1$ 到 $i$ 的最短路，即从 $1$ 到 $i$ 的边权和最小的简单路径。", "inputFormat": "第一行两个正整数 $n,k$。  \n接下来描述 $k$ 个集合。  \n第 $i$ 集合的描述的第一行一个正整数 $|S_i|$，表示 $|S_i|$ 的大小。  \n接下来 $S_i$ 行，每行两个正整数 $t,w$，表示 $(t,w)\\in S_i$。", "outputFormat": "一行 $n$ 个正整数；第 $i$ 个正整数表示 $1$ 到 $i$ 的最短路长度。如果不存在一条路径，输出 $\\textsf{0x3f3f3f3f3f3f3f3f}=4557430888798830399$。", "hint": "对于前 $10\\%$ 的数据，$|S_i|=2$；  \n对于前 $20\\%$ 的数据，$|S_i|\\le10$；  \n对于前 $50\\%$ 的数据，$|N|\\le1000,\\sum|S_i|\\le2000$;  \n对于 $100\\%$ 的数据，$1\\le|N|\\le2\\cdot10^5,\\sum|S_i|\\le4\\cdot10^5,0\\le W_i\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[W1] 团", "background": "", "description": "我有一张 $n$ 个节点的无向边带权图。它的边很多，用这个方法表示：\n\n - 有 $k$ 个集合；第 $i$ 个集合可以表示为 $S_i=\\{(T_1,W_1),(T_2,W_2),\\dots,(T_{|S_i|},W_{|S_i|})\\}$。\n - 对于任何两对 $(T_i,W_i),(T_j,W_j)$ 在同一个集合里面，图中会形成一条连 $T_i$ 和 $T_j$ 的边，边权为 $W_i+W_j$。\n\n请对于所有节点 $i$ 找到 $1$ 到 $i$ 的最短路，即从 $1$ 到 $i$ 的边权和最小的简单路径。", "inputFormat": "第一行两个正整数 $n,k$。  \n接下来描述 $k$ 个集合。  \n第 $i$ 集合的描述的第一行一个正整数 $|S_i|$，表示 $|S_i|$ 的大小。  \n接下来 $S_i$ 行，每行两个正整数 $t,w$，表示 $(t,w)\\in S_i$。", "outputFormat": "一行 $n$ 个正整数；第 $i$ 个正整数表示 $1$ 到 $i$ 的最短路长度。如果不存在一条路径，输出 $\\textsf{0x3f3f3f3f3f3f3f3f}=4557430888798830399$。", "hint": "对于前 $10\\%$ 的数据，$|S_i|=2$；  \n对于前 $20\\%$ 的数据，$|S_i|\\le10$；  \n对于前 $50\\%$ 的数据，$|N|\\le1000,\\sum|S_i|\\le2000$;  \n对于 $100\\%$ 的数据，$1\\le|N|\\le2\\cdot10^5,\\sum|S_i|\\le4\\cdot10^5,0\\le W_i\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P7101", "type": "P", "difficulty": 7, "samples": [["7\n1 0 0\n1 0 1\n1 2 0\n2 2 0\n1 4 0\n2 4 0\n1 6 0", "0\n0\n1\n0\n256\n0\n6561"], ["5\n1 0 0\n1 0 1\n1 1 0\n1 1 1\n2 0 1", "0\n0\n994344961\n982646785\n994344961"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["计算几何", "O2优化", "组合数学"], "title": "[W1] 推", "background": "一个”点集“为一个二维平面上的整点组成的**多重**集合。  \n可以从一个点集构造一个三角形当且仅当这个三角形的所有顶点在该点集里面。  \n从一个点集 $S$ 里可以构造恰好 $|S|^3$ 个三角形。（可能一些三角形会退化为一条面积为 0 的线段）", "description": "有一个点集，初始为空集。  \n有 $N$ 个操作，在每一个操作，会从这个点集插入或删除一个点。每一步完成后，询问这个点集可构造的所有三角形面积 *__八次方__* 之和。\n\n所有询问答案都可以表示为 $a/b$，其中 $a$ 和 $b$ 互质。输出 $a\\cdot b^{-1}\\pmod{998244353}$。", "inputFormat": "第一行一个正整数 $N$，表示接下来的步骤个数。  \n接下来 $N$ 行，每一行三个正整数 $t,x,y$。  \n如果 $t=1$，则插入 $(x,y)$ 这个点；如果 $t=2$ 则删除 $(x,y)$ 这个点。", "outputFormat": "一共 $N$ 行，第 $i$ 行一个正整数，表示第 $i$ 个步骤完成之后的询问答案。", "hint": "对于 $10\\%$ 的数据，$N\\le10$；  \n对于 $30\\%$ 的数据，$N\\le10^3$；  \n对于另外 $10\\%$ 的数据，没有删除步骤；  \n对于 $100\\%$ 的数据，$1\\le N\\le10^5,0\\le x,y<998244353$，任何删除的点都保证原来存在。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[W1] 推", "background": "一个”点集“为一个二维平面上的整点组成的**多重**集合。  \n可以从一个点集构造一个三角形当且仅当这个三角形的所有顶点在该点集里面。  \n从一个点集 $S$ 里可以构造恰好 $|S|^3$ 个三角形。（可能一些三角形会退化为一条面积为 0 的线段）", "description": "有一个点集，初始为空集。  \n有 $N$ 个操作，在每一个操作，会从这个点集插入或删除一个点。每一步完成后，询问这个点集可构造的所有三角形面积 *__八次方__* 之和。\n\n所有询问答案都可以表示为 $a/b$，其中 $a$ 和 $b$ 互质。输出 $a\\cdot b^{-1}\\pmod{998244353}$。", "inputFormat": "第一行一个正整数 $N$，表示接下来的步骤个数。  \n接下来 $N$ 行，每一行三个正整数 $t,x,y$。  \n如果 $t=1$，则插入 $(x,y)$ 这个点；如果 $t=2$ 则删除 $(x,y)$ 这个点。", "outputFormat": "一共 $N$ 行，第 $i$ 行一个正整数，表示第 $i$ 个步骤完成之后的询问答案。", "hint": "对于 $10\\%$ 的数据，$N\\le10$；  \n对于 $30\\%$ 的数据，$N\\le10^3$；  \n对于另外 $10\\%$ 的数据，没有删除步骤；  \n对于 $100\\%$ 的数据，$1\\le N\\le10^5,0\\le x,y<998244353$，任何删除的点都保证原来存在。", "locale": "zh-CN"}}}
{"pid": "P7102", "type": "P", "difficulty": 7, "samples": [["8 10 4\n3 1 4 1 5 9 2 6", "35683652\n171899188\n780914481\n858211065"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化", "组合数学", "快速数论变换 NTT"], "title": "[W1] 算", "background": "", "description": "有一个 $m$ 项多项式 $p(x)$ 以及两个参数 $c$ 和 $t$，其中 $p(x)=a_0+a_1x+\\dots+a_{m-1}x^{m-1}$。  \n定义一个新函数 $s(n)$:\n$$s(n)=\\sum_{i=1}^np(i)[\\gcd(i,n)=1]\\bmod 998244353$$\n请计算 $s(c),s(c^2),\\dots,s(c^t)$。", "inputFormat": "第一行三个正整数，分别表示 $m,c,t$。  \n第二行 $m$ 个正整数，表示 $a_0,a_1,\\dots,a_{m-1}$。", "outputFormat": "输出 $t$ 行，第 $i$ 行一个正整数 $s(c^i)$。", "hint": "对于 $10\\%$ 的数据，$t\\le2,c\\le100$;  \n对于 $30\\%$ 的数据，$t\\le1000,m\\le1000$；  \n对于 $50\\%$ 的数据，$t\\le5\\cdot10^4,m\\le5\\cdot10^4,c\\le10^{12}$；  \n对于另外 $10\\%$ 的数据，$c=123456789$；  \n对于所有数据，$1\\le t\\le2\\cdot10^5,1\\le m\\le2\\cdot10^5,1\\le c\\le10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[W1] 算", "background": "", "description": "有一个 $m$ 项多项式 $p(x)$ 以及两个参数 $c$ 和 $t$，其中 $p(x)=a_0+a_1x+\\dots+a_{m-1}x^{m-1}$。  \n定义一个新函数 $s(n)$:\n$$s(n)=\\sum_{i=1}^np(i)[\\gcd(i,n)=1]\\bmod 998244353$$\n请计算 $s(c),s(c^2),\\dots,s(c^t)$。", "inputFormat": "第一行三个正整数，分别表示 $m,c,t$。  \n第二行 $m$ 个正整数，表示 $a_0,a_1,\\dots,a_{m-1}$。", "outputFormat": "输出 $t$ 行，第 $i$ 行一个正整数 $s(c^i)$。", "hint": "对于 $10\\%$ 的数据，$t\\le2,c\\le100$;  \n对于 $30\\%$ 的数据，$t\\le1000,m\\le1000$；  \n对于 $50\\%$ 的数据，$t\\le5\\cdot10^4,m\\le5\\cdot10^4,c\\le10^{12}$；  \n对于另外 $10\\%$ 的数据，$c=123456789$；  \n对于所有数据，$1\\le t\\le2\\cdot10^5,1\\le m\\le2\\cdot10^5,1\\le c\\le10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P7103", "type": "P", "difficulty": 4, "samples": [["8 3\n0 1 1 2 2 3 4 5\n2\n1\n4\n", "1\n1\n2"], ["11 4\n0 1 1 3 3 3 4 5 8 8 10\n3\n4\n5\n6", "3\n3\n8\n11"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216]}, "tags": ["树形数据结构", "O2优化", "树形 DP"], "title": "「C.E.L.U-01」族谱树", "background": "小 Soup 正在翻看他们家的族谱，他们家的族谱构成了一棵树。小 Soup 发现，由于年代久远，他们家族中的一些分支已经绝迹，他对此十分好奇。", "description": "小 Soup 给你他们家的族谱树，想要问你在这棵树中**所有**第 $k$ 层的孩子（树中深度为 $k$ 的点，根节点的深度为 $1$ ,根节点编号为 $1$ ）的 $\\text{最近公共祖先}$ 是谁。", "inputFormat": "第一行两个整数 $n,m$。  \n第二行 $n$ 个整数，其中第 $i$ 个整数为 $f_i$，表示 $i$ 的父亲为 $f_i$，请注意，$1$ 的 $f_i$ 固定为 $0$。  \n接下来 $m$ 行，每行一个整数 $k$，代表小 Soup 的询问。", "outputFormat": "对于每个小 Soup 的询问，输出一个整数，即**所有**深度为 $k$ 的点的 $\\text{最近公共祖先}$。", "hint": "\n样例解释1：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/zgcgu0da.png)\n\n样例解释2：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/l02zvtkv.png)\n\n#### 数据保证存在深度为 $k$ 的点\n\n$\\begin{array}{|c|c|c|}数据编号&n,m&特殊性质\\\\1&\\le10&\\diagdown\\\\2&\\le100&\\diagdown\\\\3\\sim4&\\le10^3&\\diagdown\\\\5&\\le3\\times10^5&树为一条链\\\\6&\\le3\\times10^5&\\diagdown\\\\7\\sim10&\\le3\\times10^6&\\diagdown\\\\11\\sim12&\\le5\\times10^6&\\diagdown\\end{array}$\n\n\n对于 $100\\%$ 的数据，$n\\le5\\times10^6,m\\le n$。\n\n温馨提示：此题较卡常，请注意大常数带来的影响以及时空复杂度。如果你被卡常了，可以试试使用快速读入。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-01」族谱树", "background": "小 Soup 正在翻看他们家的族谱，他们家的族谱构成了一棵树。小 Soup 发现，由于年代久远，他们家族中的一些分支已经绝迹，他对此十分好奇。", "description": "小 Soup 给你他们家的族谱树，想要问你在这棵树中**所有**第 $k$ 层的孩子（树中深度为 $k$ 的点，根节点的深度为 $1$ ,根节点编号为 $1$ ）的 $\\text{最近公共祖先}$ 是谁。", "inputFormat": "第一行两个整数 $n,m$。  \n第二行 $n$ 个整数，其中第 $i$ 个整数为 $f_i$，表示 $i$ 的父亲为 $f_i$，请注意，$1$ 的 $f_i$ 固定为 $0$。  \n接下来 $m$ 行，每行一个整数 $k$，代表小 Soup 的询问。", "outputFormat": "对于每个小 Soup 的询问，输出一个整数，即**所有**深度为 $k$ 的点的 $\\text{最近公共祖先}$。", "hint": "\n样例解释1：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/zgcgu0da.png)\n\n样例解释2：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/l02zvtkv.png)\n\n#### 数据保证存在深度为 $k$ 的点\n\n$\\begin{array}{|c|c|c|}数据编号&n,m&特殊性质\\\\1&\\le10&\\diagdown\\\\2&\\le100&\\diagdown\\\\3\\sim4&\\le10^3&\\diagdown\\\\5&\\le3\\times10^5&树为一条链\\\\6&\\le3\\times10^5&\\diagdown\\\\7\\sim10&\\le3\\times10^6&\\diagdown\\\\11\\sim12&\\le5\\times10^6&\\diagdown\\end{array}$\n\n\n对于 $100\\%$ 的数据，$n\\le5\\times10^6,m\\le n$。\n\n温馨提示：此题较卡常，请注意大常数带来的影响以及时空复杂度。如果你被卡常了，可以试试使用快速读入。", "locale": "zh-CN"}}}
{"pid": "P7104", "type": "P", "difficulty": 5, "samples": [["3 2\n1 1 1 1\n1 2 2 1\n2 1 2 1", "3"], ["5 3\n1 0 0 0 3\n1 1 -1 0 1\n2 0 0 0 2\n1 19 3 5 6\n2 1 0 0 30\n", "64\n1944"], ["10 2\n1 7 5 4 \n1 2 4 2 \n2 2 2 2 \n1 5 5 3 \n1 2 2 0 \n2 5 3 4 \n2 6 0 1 \n1 0 9 0 \n1 4 6 0 \n2 4 0 0", "9\n45\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["其它技巧"], "title": "「C.E.L.U-01」超越维度", "background": "代号为\"S-Q\"科技探索计划的成功实现使得小 Soup 和罗司机进入了一个虚拟的 $k$ 维空间中，它们准备对这个 $k$ 维空间进行一番创造。", "description": "小 Soup 和罗司机给了你 $n$ 个操作。  \n操作$1$：小 Soup 向 $k$ 维空间中加入一个正 $k$ 维超立方体。  \n操作$2$：罗司机给出一个正 $k$ 维超立方体，求当前已存在的超立方体与这个正 $k$ 维超立方体的体积交，然后输出答案 $\\text{mod}\\ 1919810\\ $的值。 ", "inputFormat": "第一行两个数，$n,k$，含义已解释。  \n第$2\\sim n+1$ 行，每行 $k+2$ 个数，第一个数代表操作编号，接下来 $k$ 个数代表这个正 $k$ 维超立方体的中心点在 $k$ 维坐标系中的坐标，最后一个数代表这个中心点与每个 $k-1$ 维超平面的距离（它们都是相等的）。", "outputFormat": "对于每一个操作$2$，输出一个数。", "hint": "\n**样例1解释：**  \n如图，橙色框为两个加入的正方形，绿色框为询问，绿色块为答案。\n![](https://cdn.luogu.com.cn/upload/image_hosting/juqwca7d.png)\n\n**样例3解释：**\n\n如图（红色标出部分为询问2答案）（两个解释不是同一个人造的）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8tngjx7g.png)\n\n**数据范围**\n\n$\\begin{array}{|c|c|c|}数据编号&n&k\\\\1&500&1\\\\2\\sim3&500&2\\\\4\\sim6&500&3\\\\7\\sim10&500&\\le6\\end{array}$  \n输入输出的数在 $\\text{long long}$ 范围内，保证数据随机（正k维超立方体较分散）。  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-01」超越维度", "background": "代号为\"S-Q\"科技探索计划的成功实现使得小 Soup 和罗司机进入了一个虚拟的 $k$ 维空间中，它们准备对这个 $k$ 维空间进行一番创造。", "description": "小 Soup 和罗司机给了你 $n$ 个操作。  \n操作$1$：小 Soup 向 $k$ 维空间中加入一个正 $k$ 维超立方体。  \n操作$2$：罗司机给出一个正 $k$ 维超立方体，求当前已存在的超立方体与这个正 $k$ 维超立方体的体积交，然后输出答案 $\\text{mod}\\ 1919810\\ $的值。 ", "inputFormat": "第一行两个数，$n,k$，含义已解释。  \n第$2\\sim n+1$ 行，每行 $k+2$ 个数，第一个数代表操作编号，接下来 $k$ 个数代表这个正 $k$ 维超立方体的中心点在 $k$ 维坐标系中的坐标，最后一个数代表这个中心点与每个 $k-1$ 维超平面的距离（它们都是相等的）。", "outputFormat": "对于每一个操作$2$，输出一个数。", "hint": "\n**样例1解释：**  \n如图，橙色框为两个加入的正方形，绿色框为询问，绿色块为答案。\n![](https://cdn.luogu.com.cn/upload/image_hosting/juqwca7d.png)\n\n**样例3解释：**\n\n如图（红色标出部分为询问2答案）（两个解释不是同一个人造的）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8tngjx7g.png)\n\n**数据范围**\n\n$\\begin{array}{|c|c|c|}数据编号&n&k\\\\1&500&1\\\\2\\sim3&500&2\\\\4\\sim6&500&3\\\\7\\sim10&500&\\le6\\end{array}$  \n输入输出的数在 $\\text{long long}$ 范围内，保证数据随机（正k维超立方体较分散）。  \n", "locale": "zh-CN"}}}
{"pid": "P7105", "type": "P", "difficulty": 6, "samples": [["3\n0 0.5 0.5\n0.5 0 0.5\n0.5 0.5 0", "1.625000"], ["4\n0 0.129 0.58 0.37\n0.129 0 0.22 0.134\n0.58 0.22 0 0.6\n0.37 0.134 0.6 0", "2.143266"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "期望", "状压 DP"], "title": "「C.E.L.U-01」门禁", "background": "abruce 有一次去机房去得**比较**早，然后……他在外面等了35分钟……于是，他想到这样一个问题：  \n机房的大门锁着，有 $n$ 名学生都需要进来，进来必须要门禁卡。但有些学生会一同前往。一同前往的人中只要有一个人带了门禁卡就会免于被锁在外面的窘境。现在老师终于要发门禁卡了，可是究竟要发多少张呢？", "description": "我们将题目背景中的问题简化。给出 $n$ 个点，以及任意两个点 $i,j$ 之间存在一条无向边的概率 $p_{i,j}$，求图中联通块个数的期望。", "inputFormat": "第一行一个数 $n$。  \n第二行到第 $n+1$ 行，每行 $n$ 个实数，代表 $p_{i,j}$。测试数据保证对任意 $1\\le i \\le n$，$p_{i,i}=0$，对任意 $1\\le i,j \\le n$，$p_{i,j}=p_{j,i}$，$0\\le p_{i,j}\\le1$ ，输入的实数小数点后位数不超过 $3$ 位。", "outputFormat": "仅一行一个实数，表示连通块个数的期望。当你的答案与标准答案的**绝对**误差不超过 $10^{-4}$ 时算作正确。", "hint": "样例解释1：以下八种情况出现概率都是 $\\dfrac{1}{8}$。  \n![](https://cdn.luogu.com.cn/upload/image_hosting/u1fkikj5.png)  \n连通块的个数分别为 $3,2,2,2,1,1,1,1$。  \n所以期望是 $\\dfrac{1}{8}\\times3+\\dfrac{3}{8}\\times2+\\dfrac{4}{8}\\times1=\\dfrac{13}{8}=1.625$\n\n|数据编号|$n$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim3$|$\\le4$|无|\n|$4$|$\\le8$|$p_{i,j}=0$ 或 $p_{i,j}=1$|\n|$5\\sim6$|$\\le8$|$i\\not=j$ 时 $p_{i,j}=0.5$|\n|$7\\sim8$|$\\le8$|无|\n|$9\\sim10$|$\\le11$|无|\n|$11\\sim12$|$\\le14$|无|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-01」门禁", "background": "abruce 有一次去机房去得**比较**早，然后……他在外面等了35分钟……于是，他想到这样一个问题：  \n机房的大门锁着，有 $n$ 名学生都需要进来，进来必须要门禁卡。但有些学生会一同前往。一同前往的人中只要有一个人带了门禁卡就会免于被锁在外面的窘境。现在老师终于要发门禁卡了，可是究竟要发多少张呢？", "description": "我们将题目背景中的问题简化。给出 $n$ 个点，以及任意两个点 $i,j$ 之间存在一条无向边的概率 $p_{i,j}$，求图中联通块个数的期望。", "inputFormat": "第一行一个数 $n$。  \n第二行到第 $n+1$ 行，每行 $n$ 个实数，代表 $p_{i,j}$。测试数据保证对任意 $1\\le i \\le n$，$p_{i,i}=0$，对任意 $1\\le i,j \\le n$，$p_{i,j}=p_{j,i}$，$0\\le p_{i,j}\\le1$ ，输入的实数小数点后位数不超过 $3$ 位。", "outputFormat": "仅一行一个实数，表示连通块个数的期望。当你的答案与标准答案的**绝对**误差不超过 $10^{-4}$ 时算作正确。", "hint": "样例解释1：以下八种情况出现概率都是 $\\dfrac{1}{8}$。  \n![](https://cdn.luogu.com.cn/upload/image_hosting/u1fkikj5.png)  \n连通块的个数分别为 $3,2,2,2,1,1,1,1$。  \n所以期望是 $\\dfrac{1}{8}\\times3+\\dfrac{3}{8}\\times2+\\dfrac{4}{8}\\times1=\\dfrac{13}{8}=1.625$\n\n|数据编号|$n$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim3$|$\\le4$|无|\n|$4$|$\\le8$|$p_{i,j}=0$ 或 $p_{i,j}=1$|\n|$5\\sim6$|$\\le8$|$i\\not=j$ 时 $p_{i,j}=0.5$|\n|$7\\sim8$|$\\le8$|无|\n|$9\\sim10$|$\\le11$|无|\n|$11\\sim12$|$\\le14$|无|", "locale": "zh-CN"}}}
{"pid": "P7106", "type": "P", "difficulty": 1, "samples": [["#FFFFFF", "#000000"], ["#EBA932", "#1456CD"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "字符串", "洛谷原创", "O2优化", "进制", "洛谷月赛"], "title": "双生独白", "background": "我喜欢安静，你热爱喧闹；我忠于温暖，你酷爱凉爽。\n\n如果任何事物都有反面，那拼接这个世界的颜色呢？\n\n只有白与黑吗？", "description": "为了形式化地描述颜色，我们引入 **RGB 颜色值**，用三元组 $(r,g,b)$ 表示一种颜色，其中 $r,g,b$ 分别为该颜色的 **R 值**、**G 值**、**B 值**，满足 $0 \\le r,g,b \\le 255$ 且皆为**十进制整数**。\n\n显然，这套颜色系统一共可以表示 $256 \\times 256 \\times 256 = 16\\,777\\,216$ 种不同的颜色。对于颜色 $(r,g,b)$，定义其**反色**的 RGB 颜色值为 $(255-r,255-g,255-b)$。\n\n然而人们发现，单纯地使用 RGB 颜色值很不方便，复制颜色时要复制三个值。\n\n于是诞生了**十六进制颜色码**，即形如 `#EBA932` 长度为 $7$ 的字符串。具体而言：\n\n- 字符串的第一位是 `#`，为颜色码标识符。\n- 字符串的第二、三位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 R 值。\n- 字符串的第四、五位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 G 值。\n- 字符串的第六、七位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 B 值。\n\n**十六进制数码**从小到大包含 `0`，`1`，`2`，`3`，`4`，`5`，`6`，`7`，`8`，`9`，`A`，`B`，`C`，`D`，`E`，`F`，注意 `A`，`B`，`C`，`D`，`E`，`F` 均为**大写**。\n\n现在你收到了一组十六进制颜色码，请你输出其反色的十六进制颜色码。\n\n*提示：颜色的 RGB 值与十六进制码之间可以相互转换（参考样例解释 #2）*", "inputFormat": "一行，输入长度为 $7$ 的字符串，表示原色的十六进制颜色码。", "outputFormat": "一行，输出长度为 $7$ 的字符串，表示反色的十六进制颜色码。", "hint": "**【样例解释 #1】**\n\n转换后原色的 RGB 值为 $(255,255,255)$，反色的 RGB 值为 $(0,0,0)$，对应十六进制码 `#000000`。\n\n**【样例解释 #2】**\n\n转换后原色的 RGB 值为 $(235,169,50)$，反色的 RGB 值为 $(20,86,205)$，对应十六进制码 `#1456CD`。\n\n为避免理解偏差，此处特别解释 `#EBA932` 转换后 B 值为 $50$ 的原因：提取字符串的第六、七位，拼成的十六进制数为 $(32)_{16}$，则有 $(32)_{16} = 3 \\times 16^1 + 2 \\times 16^0 = 50$。\n\n----\n\n**【数据规模与约定】**\n\n本题共有 10 个测试点，每通过一个测试点可获得 10 points。\n\n对于 $10\\%$ 的数据，为样例 #1。\n\n对于另外 $30\\%$ 的数据，输入与输出字符串均不包含大写字母。\n\n对于所有的数据，保证给定字符串为合法十六进制颜色码。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "双生独白", "background": "我喜欢安静，你热爱喧闹；我忠于温暖，你酷爱凉爽。\n\n如果任何事物都有反面，那拼接这个世界的颜色呢？\n\n只有白与黑吗？", "description": "为了形式化地描述颜色，我们引入 **RGB 颜色值**，用三元组 $(r,g,b)$ 表示一种颜色，其中 $r,g,b$ 分别为该颜色的 **R 值**、**G 值**、**B 值**，满足 $0 \\le r,g,b \\le 255$ 且皆为**十进制整数**。\n\n显然，这套颜色系统一共可以表示 $256 \\times 256 \\times 256 = 16\\,777\\,216$ 种不同的颜色。对于颜色 $(r,g,b)$，定义其**反色**的 RGB 颜色值为 $(255-r,255-g,255-b)$。\n\n然而人们发现，单纯地使用 RGB 颜色值很不方便，复制颜色时要复制三个值。\n\n于是诞生了**十六进制颜色码**，即形如 `#EBA932` 长度为 $7$ 的字符串。具体而言：\n\n- 字符串的第一位是 `#`，为颜色码标识符。\n- 字符串的第二、三位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 R 值。\n- 字符串的第四、五位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 G 值。\n- 字符串的第六、七位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 B 值。\n\n**十六进制数码**从小到大包含 `0`，`1`，`2`，`3`，`4`，`5`，`6`，`7`，`8`，`9`，`A`，`B`，`C`，`D`，`E`，`F`，注意 `A`，`B`，`C`，`D`，`E`，`F` 均为**大写**。\n\n现在你收到了一组十六进制颜色码，请你输出其反色的十六进制颜色码。\n\n*提示：颜色的 RGB 值与十六进制码之间可以相互转换（参考样例解释 #2）*", "inputFormat": "一行，输入长度为 $7$ 的字符串，表示原色的十六进制颜色码。", "outputFormat": "一行，输出长度为 $7$ 的字符串，表示反色的十六进制颜色码。", "hint": "**【样例解释 #1】**\n\n转换后原色的 RGB 值为 $(255,255,255)$，反色的 RGB 值为 $(0,0,0)$，对应十六进制码 `#000000`。\n\n**【样例解释 #2】**\n\n转换后原色的 RGB 值为 $(235,169,50)$，反色的 RGB 值为 $(20,86,205)$，对应十六进制码 `#1456CD`。\n\n为避免理解偏差，此处特别解释 `#EBA932` 转换后 B 值为 $50$ 的原因：提取字符串的第六、七位，拼成的十六进制数为 $(32)_{16}$，则有 $(32)_{16} = 3 \\times 16^1 + 2 \\times 16^0 = 50$。\n\n----\n\n**【数据规模与约定】**\n\n本题共有 10 个测试点，每通过一个测试点可获得 10 points。\n\n对于 $10\\%$ 的数据，为样例 #1。\n\n对于另外 $30\\%$ 的数据，输入与输出字符串均不包含大写字母。\n\n对于所有的数据，保证给定字符串为合法十六进制颜色码。", "locale": "zh-CN"}}}
{"pid": "P7107", "type": "P", "difficulty": 2, "samples": [["3 3 5 2", "YES\n2 1\n2 1\n1 2"], ["3 3 3 2", "NO"], ["3 3 5 3", "NO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "鸽笼原理", "构造", "洛谷月赛"], "title": "天选之人", "background": "暑假期间，学校不提供午餐，Gnar 只好找伙计们一起点外卖。\n\n尴尬的是，外卖很快送到却没人乐意去校门口拿，毕竟户外可是 $35\\degree\\!\\text{C}$ 高温！此时 Gnar 想到了好主意：“我给一人捏了一张纸团，其中一张写有记号，不如我们抓阄决定，谁抽到带记号的谁去拿！”\n\n于是 Gnar 连续拿了六天的外卖。\n\n这可让他不服又委屈：“换个规则！一人准备三张纸团，五张有记号，每人抽三张，记号最多的去拿！”\n\nGnar 紧张地展开手中的纸团，两个记号赫然映在眼前。大伙们刚想放声大笑他的非酋运气，有人缓缓举起三张纸片说道：“我也抽到了两个记号……”", "description": "好奇的 Gnar 想研究一般情况下抽到最多记号的人数。他给参与抓阄的 $n$ 人一人准备了 $m$ 张捏好的纸团，一共 $nm$ 张，其中恰好 $k$ 张提前写了记号。随后每个人在均匀打乱的纸团中各抽 $m$ 张。\n\n一个人抽到最多的记号，当且仅当没有人抽到的记号比他还多。请你帮 Gnar 判断是否可能会**恰好** $\\boldsymbol{p}$ **个人**抽到最多的记号。Gnar 喜欢追根问底，所以如果有可能，你还需构造每个人抽的纸团中分别有多少带记号、有多少不带记号。\n\n形式化地，假设第 $i$ 个人抽到了 $x_i$ 张带记号的纸团和 $y_i$ 张不带记号的纸团，你的构造应满足：\n\n- $x_i, y_i \\ge 0$，$x_i + y_i = m$。\n- $\\displaystyle \\sum_{i = 1}^{n} x_i = k$。\n- **有且仅有** $\\boldsymbol{p}$ **个互不相同**的 $j$ 使 $\\displaystyle x_j = \\max_{i = 1}^{n} \\{x_i\\}$。", "inputFormat": "输入四个整数 $n, m, k, p$，含义详见题目描述。", "outputFormat": "第一行输出 `YES` 或 `NO`（不区分大小写，`yEs` / `No` 均可），表示是否会恰好 $p$ 个人抽到最多的记号。\n\n如果第一行输出 `YES`，接下来 $n$ 行每行输出 $x_i, y_i$，表示每个人抽到带与不带记号的纸团个数。\n\n因答案可能不唯一，本题采用 Special Judge，只要构造符合题面中的要求均视为正确。", "hint": "\n**【样例解释 #1】**\n\n样例给出了一种满足题述条件的构造。\n\n**【样例解释 #2】**\n\n不论如何，记号的分布从高到低只有三种情况：$\\{3,0,0\\}$，$\\{2,1,0\\}$，$\\{1,1,1\\}$，抽到最多记号的人数分别对应 $1$，$1$，$3$。因此无法构造 $p = 2$ 的方案。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (15 points)：$n,m \\le 8$。\n- Subtask #2 (15 points)：$n,m \\le 100$。\n- Subtask #3 (20 points)：$n,m \\le 10^5$。\n- Subtask #4 (10 points)：$p = 1$。\n- Subtask #5 (40 points)：无特殊限制。\n\n对于所有的数据，保证 $1 \\le p \\le n \\le {10}^5$，$1 \\le m \\le {10}^9$，$0 \\le k \\le n m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "天选之人", "background": "暑假期间，学校不提供午餐，Gnar 只好找伙计们一起点外卖。\n\n尴尬的是，外卖很快送到却没人乐意去校门口拿，毕竟户外可是 $35\\degree\\!\\text{C}$ 高温！此时 Gnar 想到了好主意：“我给一人捏了一张纸团，其中一张写有记号，不如我们抓阄决定，谁抽到带记号的谁去拿！”\n\n于是 Gnar 连续拿了六天的外卖。\n\n这可让他不服又委屈：“换个规则！一人准备三张纸团，五张有记号，每人抽三张，记号最多的去拿！”\n\nGnar 紧张地展开手中的纸团，两个记号赫然映在眼前。大伙们刚想放声大笑他的非酋运气，有人缓缓举起三张纸片说道：“我也抽到了两个记号……”", "description": "好奇的 Gnar 想研究一般情况下抽到最多记号的人数。他给参与抓阄的 $n$ 人一人准备了 $m$ 张捏好的纸团，一共 $nm$ 张，其中恰好 $k$ 张提前写了记号。随后每个人在均匀打乱的纸团中各抽 $m$ 张。\n\n一个人抽到最多的记号，当且仅当没有人抽到的记号比他还多。请你帮 Gnar 判断是否可能会**恰好** $\\boldsymbol{p}$ **个人**抽到最多的记号。Gnar 喜欢追根问底，所以如果有可能，你还需构造每个人抽的纸团中分别有多少带记号、有多少不带记号。\n\n形式化地，假设第 $i$ 个人抽到了 $x_i$ 张带记号的纸团和 $y_i$ 张不带记号的纸团，你的构造应满足：\n\n- $x_i, y_i \\ge 0$，$x_i + y_i = m$。\n- $\\displaystyle \\sum_{i = 1}^{n} x_i = k$。\n- **有且仅有** $\\boldsymbol{p}$ **个互不相同**的 $j$ 使 $\\displaystyle x_j = \\max_{i = 1}^{n} \\{x_i\\}$。", "inputFormat": "输入四个整数 $n, m, k, p$，含义详见题目描述。", "outputFormat": "第一行输出 `YES` 或 `NO`（不区分大小写，`yEs` / `No` 均可），表示是否会恰好 $p$ 个人抽到最多的记号。\n\n如果第一行输出 `YES`，接下来 $n$ 行每行输出 $x_i, y_i$，表示每个人抽到带与不带记号的纸团个数。\n\n因答案可能不唯一，本题采用 Special Judge，只要构造符合题面中的要求均视为正确。", "hint": "\n**【样例解释 #1】**\n\n样例给出了一种满足题述条件的构造。\n\n**【样例解释 #2】**\n\n不论如何，记号的分布从高到低只有三种情况：$\\{3,0,0\\}$，$\\{2,1,0\\}$，$\\{1,1,1\\}$，抽到最多记号的人数分别对应 $1$，$1$，$3$。因此无法构造 $p = 2$ 的方案。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (15 points)：$n,m \\le 8$。\n- Subtask #2 (15 points)：$n,m \\le 100$。\n- Subtask #3 (20 points)：$n,m \\le 10^5$。\n- Subtask #4 (10 points)：$p = 1$。\n- Subtask #5 (40 points)：无特殊限制。\n\n对于所有的数据，保证 $1 \\le p \\le n \\le {10}^5$，$1 \\le m \\le {10}^9$，$0 \\le k \\le n m$。", "locale": "zh-CN"}}}
{"pid": "P7108", "type": "P", "difficulty": 4, "samples": [["2\n1 2 1\n3 2 1\n", "2\n7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["数学", "贪心", "洛谷原创", "O2优化", "逆元", "洛谷月赛"], "title": "移花接木", "background": "\n遥远的圣地生长着一棵不为人知的灵树，或有万山之高。\n\n但有一日，藏匿于根系的腐朽力量爆发，灵树已无法支撑往日屹立冲天的高度。", "description": "灵树最初的形态可以看作一棵高度为 ${10}^{{10}^{{10}^{10}}}$ 的满 $a$ 叉树，高度定义为根结点到叶子结点之间的边数。\n\n受腐朽力量影响，灵树只能维持高度**恰好**为 $h$ 的满 $b$ 叉树形态。为了转换至该形态，灵树有两种魔法：\n\n- 移花：选择一条边 $u \\to v$（$u$ 是 $v$ 的父结点），移除这条边以及以 $v$ 为根的**整棵子树**。\n- 接木：选择一条边 $u \\to v$（$u$ 是 $v$ 的父结点）和一个结点 $w$（$w$ 不能是 $v$ 子树中或已移除的结点），将这条边原先 $u$ 一端**改接**到 $w$。**该魔法只能在根结点到** $\\boldsymbol{u}$ **之间的边数** $\\le 10^{10^{10}}$ **时使用。**\n\n灵树累积的魔法力量有限，它不得不用最少次数的魔法完成转换。这是个漫长的过程，即使次数最少也会显得异常大，你只需要求出最少次数对 $10^9 + 7$ 取模的结果。", "inputFormat": "输入首行给定数据组数 $T$。\n\n接下来 $T$ 行，每行包含三个整数 $a,b,h$，表示一组数据。", "outputFormat": "对于每组数据输出一行一个整数，表示该数据的答案对 $10^9 + 7$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n下为 $a=1$，$b=2$，$h=1$ 时的两步转换过程，图中高度极大的冗余子树已用省略号代替。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p32s9v96.png)\n\n可以证明，该数据的答案不可能低于 $2$。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (3 points)：$h = 0$。\n- Subtask #2 (4 points)：$a = b$。\n- Subtask #3 (8 points)：$a = 1$。\n- Subtask #4 (8 points)：$b = 1$。\n- Subtask #5 (17 points)：$h \\le 10$。\n- Subtask #6 (15 points)：$h \\le 10^6$，各测试点存在 $\\overline{a},\\overline{b}$，其数据满足 $a=\\overline{a}$，$b=\\overline{b}$。\n- Subtask #7 (15 points)：$h \\le 10^6$。\n- Subtask #8 (30 points)：无特殊限制。\n\n所有测试点（样例除外）均含有 $10^6$ 组数据，即 $T = 10^6$。请务必采用较快的 IO（输入/输出）方式。\n\n对于所有的数据，保证 $1 \\le a,b \\le 10^9$，$0 \\le h \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "移花接木", "background": "\n遥远的圣地生长着一棵不为人知的灵树，或有万山之高。\n\n但有一日，藏匿于根系的腐朽力量爆发，灵树已无法支撑往日屹立冲天的高度。", "description": "灵树最初的形态可以看作一棵高度为 ${10}^{{10}^{{10}^{10}}}$ 的满 $a$ 叉树，高度定义为根结点到叶子结点之间的边数。\n\n受腐朽力量影响，灵树只能维持高度**恰好**为 $h$ 的满 $b$ 叉树形态。为了转换至该形态，灵树有两种魔法：\n\n- 移花：选择一条边 $u \\to v$（$u$ 是 $v$ 的父结点），移除这条边以及以 $v$ 为根的**整棵子树**。\n- 接木：选择一条边 $u \\to v$（$u$ 是 $v$ 的父结点）和一个结点 $w$（$w$ 不能是 $v$ 子树中或已移除的结点），将这条边原先 $u$ 一端**改接**到 $w$。**该魔法只能在根结点到** $\\boldsymbol{u}$ **之间的边数** $\\le 10^{10^{10}}$ **时使用。**\n\n灵树累积的魔法力量有限，它不得不用最少次数的魔法完成转换。这是个漫长的过程，即使次数最少也会显得异常大，你只需要求出最少次数对 $10^9 + 7$ 取模的结果。", "inputFormat": "输入首行给定数据组数 $T$。\n\n接下来 $T$ 行，每行包含三个整数 $a,b,h$，表示一组数据。", "outputFormat": "对于每组数据输出一行一个整数，表示该数据的答案对 $10^9 + 7$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n下为 $a=1$，$b=2$，$h=1$ 时的两步转换过程，图中高度极大的冗余子树已用省略号代替。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p32s9v96.png)\n\n可以证明，该数据的答案不可能低于 $2$。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (3 points)：$h = 0$。\n- Subtask #2 (4 points)：$a = b$。\n- Subtask #3 (8 points)：$a = 1$。\n- Subtask #4 (8 points)：$b = 1$。\n- Subtask #5 (17 points)：$h \\le 10$。\n- Subtask #6 (15 points)：$h \\le 10^6$，各测试点存在 $\\overline{a},\\overline{b}$，其数据满足 $a=\\overline{a}$，$b=\\overline{b}$。\n- Subtask #7 (15 points)：$h \\le 10^6$。\n- Subtask #8 (30 points)：无特殊限制。\n\n所有测试点（样例除外）均含有 $10^6$ 组数据，即 $T = 10^6$。请务必采用较快的 IO（输入/输出）方式。\n\n对于所有的数据，保证 $1 \\le a,b \\le 10^9$，$0 \\le h \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7109", "type": "P", "difficulty": 5, "samples": [["2\n\n0\n\n1\n\n0\n", "\n? 1 1\n\n? 2 1\n\n? 1 2\n\n! 0 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["二分", "洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛"], "title": "滴水不漏", "background": "这是一道 IO 交互题。", "description": "Gnar 购买了 $n$ 个水缸，其中第 $i$ 个水缸的容积为 $i$ 且因不明原因初始装有 $a_i$（$0 \\le a_i \\le i$）单位的水。\n\n好奇的 Gnar 想知道每个水缸装有的水量，但肉眼观察显然不可行，他希望你能帮他计算解决这个难题。\n\nGnar 唯一能替你执行的操作是，由你先指定 $i, j$（$1 \\le i, j \\le n$），然后：\n\n- 若 $i \\neq j$，滴水不漏地将第 $i$ 个水缸的水往第 $j$ 个水缸倒，直到第 $i$ 个水缸的水被倒完或第 $j$ 个水缸已满。Gnar 会告诉你操作后第 $j$ 个水缸是否是满的。注意倒水的影响会**保留**而不是恢复到操作前。\n- 若 $i = j$，Gnar 做不到让一个水缸的水往自己倒，他会直接告诉你当前第 $j$ 个水缸是否是满的。\n\nGnar 只肯接受**最多** $20000$ 次操作，否则他会认为你在调戏他！\n\n你的任务是利用不超过 $20000$ 次操作 Gnar 告诉的结果，完整求出最初的 $a_1,a_2,\\ldots,a_n$。\n\n当然 Gnar 不会动手脚，你所求的 $a_1,a_2,\\ldots,a_n$ 在操作前已经存在，不随操作动态生成。", "inputFormat": "输入单个正整数水缸个数 $n$ 以开始交互。", "outputFormat": "在你确定答案后，用 `! a1 a2 ... an` 的形式输出一行以结束交互。\n\n### 交互格式\n\n交互过程中，用 `? i j` $(1 \\le i,j \\le n)$ 的形式输出一行以执行一次操作。然后你应输入一个布尔值，即操作的返回值 $x$。若 $x = 0$，表示第 $j$ 个水缸未满；若 $x = 1$，表示第 $j$ 个水缸已满。\n\n上述的所有输入都应从**标准输入**中读入，所有输出都应向**标准输出**中输出。输出一行后必须**清空缓冲区**，否则你的评测将被判为 Time Limit Exceeded。清空缓冲区方式如下：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其他语言请自行查阅文档。\n\n如果你的输出格式错误，或执行超过 $20000$ 次操作，你的评测将被判为 Wrong Answer。\n", "hint": "**【样例解释 #1】**\n\n样例示意了一种可能的交互过程。\n\n初始两个水缸中分别装有 $0,1$ 单位的水。\n\n第一次操作，由于 $i = j$，你直接得知 $x = 0$ 即第一个水缸未满。\n\n第二次操作后两个水缸装有水量分别为 $1,0$，而你得知 $x=1$ 即第一个水缸当前已满。\n\n第三次操作后两个水缸装有水量分别为 $0,1$，而你得知 $x=0$ 即第二个水缸当前未满。\n\n注意过程中确切水量并不传达给你，但是通过返回值 $x$ 你足够唯一确定 $a_1 = 0$，$a_2 = 1$。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (8 points)：$n = 2$。\n- Subtask #2 (17 points)：$n \\le 10$。\n- Subtask #3 (15 points)：$n \\le 100$。\n- Subtask #4 (15 points)：$a_i \\le 1$。\n- Subtask #5 (25 points)：$n \\le 500$。\n- Subtask #6 (20 points)：无特殊限制。\n\n对于所有的数据，保证 $2 \\le n \\le 1000$，$0 \\le a_i \\le i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "滴水不漏", "background": "这是一道 IO 交互题。", "description": "Gnar 购买了 $n$ 个水缸，其中第 $i$ 个水缸的容积为 $i$ 且因不明原因初始装有 $a_i$（$0 \\le a_i \\le i$）单位的水。\n\n好奇的 Gnar 想知道每个水缸装有的水量，但肉眼观察显然不可行，他希望你能帮他计算解决这个难题。\n\nGnar 唯一能替你执行的操作是，由你先指定 $i, j$（$1 \\le i, j \\le n$），然后：\n\n- 若 $i \\neq j$，滴水不漏地将第 $i$ 个水缸的水往第 $j$ 个水缸倒，直到第 $i$ 个水缸的水被倒完或第 $j$ 个水缸已满。Gnar 会告诉你操作后第 $j$ 个水缸是否是满的。注意倒水的影响会**保留**而不是恢复到操作前。\n- 若 $i = j$，Gnar 做不到让一个水缸的水往自己倒，他会直接告诉你当前第 $j$ 个水缸是否是满的。\n\nGnar 只肯接受**最多** $20000$ 次操作，否则他会认为你在调戏他！\n\n你的任务是利用不超过 $20000$ 次操作 Gnar 告诉的结果，完整求出最初的 $a_1,a_2,\\ldots,a_n$。\n\n当然 Gnar 不会动手脚，你所求的 $a_1,a_2,\\ldots,a_n$ 在操作前已经存在，不随操作动态生成。", "inputFormat": "输入单个正整数水缸个数 $n$ 以开始交互。", "outputFormat": "在你确定答案后，用 `! a1 a2 ... an` 的形式输出一行以结束交互。\n\n### 交互格式\n\n交互过程中，用 `? i j` $(1 \\le i,j \\le n)$ 的形式输出一行以执行一次操作。然后你应输入一个布尔值，即操作的返回值 $x$。若 $x = 0$，表示第 $j$ 个水缸未满；若 $x = 1$，表示第 $j$ 个水缸已满。\n\n上述的所有输入都应从**标准输入**中读入，所有输出都应向**标准输出**中输出。输出一行后必须**清空缓冲区**，否则你的评测将被判为 Time Limit Exceeded。清空缓冲区方式如下：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其他语言请自行查阅文档。\n\n如果你的输出格式错误，或执行超过 $20000$ 次操作，你的评测将被判为 Wrong Answer。\n", "hint": "**【样例解释 #1】**\n\n样例示意了一种可能的交互过程。\n\n初始两个水缸中分别装有 $0,1$ 单位的水。\n\n第一次操作，由于 $i = j$，你直接得知 $x = 0$ 即第一个水缸未满。\n\n第二次操作后两个水缸装有水量分别为 $1,0$，而你得知 $x=1$ 即第一个水缸当前已满。\n\n第三次操作后两个水缸装有水量分别为 $0,1$，而你得知 $x=0$ 即第二个水缸当前未满。\n\n注意过程中确切水量并不传达给你，但是通过返回值 $x$ 你足够唯一确定 $a_1 = 0$，$a_2 = 1$。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (8 points)：$n = 2$。\n- Subtask #2 (17 points)：$n \\le 10$。\n- Subtask #3 (15 points)：$n \\le 100$。\n- Subtask #4 (15 points)：$a_i \\le 1$。\n- Subtask #5 (25 points)：$n \\le 500$。\n- Subtask #6 (20 points)：无特殊限制。\n\n对于所有的数据，保证 $2 \\le n \\le 1000$，$0 \\le a_i \\le i$。", "locale": "zh-CN"}}}
