{"pid": "P2292", "type": "P", "difficulty": 6, "samples": [["4 3 \nis\nname\nwhat\nyour\nwhatisyourname\nwhatisyouname\nwhaisyourname\n", "14\n6\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2004", "各省省选", "湖南", "O2优化", "AC 自动机", "状压 DP"], "title": "[HNOI2004] L 语言", "background": "", "description": "标点符号的出现晚于文字的出现，所以以前的语言都是没有标点的。现在你要处理的就是一段没有标点的文章。  \n\n一段文章 $T$ 是由若干小写字母构成。一个单词 $W$ 也是由若干小写字母构成。一个字典 $D$ 是若干个单词的集合。我们称一段文章 $T$ 在某个字典 $D$ 下是可以被理解的，是指如果文章 $T$ 可以被分成若干部分，且每一个部分都是字典 $D$ 中的单词。  \n\n例如字典 $D$ 中包括单词 $\\texttt{is},\\texttt{name},\\texttt{what},\\texttt{your}$，则文章 $\\texttt{whatisyourname}$ 是在字典 $D$ 下可以被理解的，因为它可以分成 $4$ 个单词：$\\texttt{what},\\texttt{is},\\texttt{your},\\texttt{name}$，且每个单词都属于字典 $D$，而文章 $\\texttt{whatisyouname}$ 在字典 $D$ 下不能被理解，但可以在字典 $D'=D\\cup\\{\\texttt{you}\\}$ 下被理解。这段文章的一个前缀 $\\texttt{whatis}$，也可以在字典 $D$ 下被理解，而且是在字典 $D$ 下能够被理解的最长的前缀。  \n\n给定一个字典 $D$，你的程序需要判断若干段文章在字典 $D$ 下是否能够被理解。并给出其在字典 $D$ 下能够被理解的最长前缀的位置。", "inputFormat": "第一行两个整数 $n$ 和 $m$，表示字典 $D$ 中有 $n$ 个单词，且有 $m$ 段文章需要被处理。\n\n接下来 $n$ 行，每行一个字符串 $s$，表示字典 $D$ 中的一个单词。\n\n接下来 $m$ 行，每行一个字符串 $t$，表示一篇文章。", "outputFormat": "对于输入的每一篇文章，你需要输出一行一个整数，表示这段文章在字典 $D$ 可以被理解的最长前缀的位置。", "hint": "#### 样例 1 解释\n\n- 对于第一个询问，整段文章 `whatisyourname` 都能被理解。\n- 对于第二个询问，前缀 `whatis` 能够被理解。\n- 对于第三个询问，没有任何前缀能够被理解。\n\n#### 数据规模与约定\n\n- 对于 $80\\%$ 的数据，保证 $m \\leq 20$，$|t| \\leq 10^6$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 20$，$1 \\leq m \\leq 50$，$1 \\leq |s| \\leq 20$，$1 \\leq |t| \\leq 2 \\times 10^6$，$s$ 与 $t$ 中均只含小写英文字母。\n\n#### 提示\n\n- 请注意数据读入对程序效率造成的影响。\n- 请注意【数据规模与约定】中标注的串长是单串长度，并不是字符串长度和。\n\n#### 说明\n\n本题数据有加强，其中前 $80\\%$ 的数据为原测试数据。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] L Language", "background": "", "description": "Punctuation appeared later than writing, so earlier languages had no punctuation. Now you need to process an article without punctuation.\n\nAn article $T$ consists of lowercase letters. A word $W$ also consists of lowercase letters. A dictionary $D$ is a set of words. We say an article $T$ is understandable under a dictionary $D$ if $T$ can be split into several parts and each part is a word in $D$.\n\nFor example, if the dictionary $D$ includes the words $\\texttt{is}, \\texttt{name}, \\texttt{what}, \\texttt{your}$, then the article `whatisyourname` is understandable under $D$ because it can be split into 4 words: `what`, `is`, `your`, `name`, and each word belongs to $D$. The article `whatisyouname` is not understandable under $D$, but it is understandable under $D' = D \\cup \\{\\texttt{you}\\}$. A prefix `whatis` of this article is also understandable under $D$, and it is the longest prefix that can be understood under $D$.\n\nGiven a dictionary $D$, your program needs to determine whether several articles are understandable under $D$, and output the position of the longest prefix that can be understood under $D$.", "inputFormat": "The first line contains two integers $n$ and $m$, indicating that the dictionary $D$ has $n$ words and there are $m$ articles to process.\n\nThe next $n$ lines each contain a string $s$, representing a word in the dictionary $D$.\n\nThe next $m$ lines each contain a string $t$, representing an article.", "outputFormat": "For each article in the input, output one line with a single integer, the position of the longest prefix that can be understood under the dictionary $D$.", "hint": "Explanation for Sample 1\n- For the first query, the entire article `whatisyourname` can be understood.\n- For the second query, the prefix `whatis` can be understood.\n- For the third query, no prefix can be understood.\n\nConstraints\n- For $80\\%$ of the data, it is guaranteed that $m \\leq 20$, $|t| \\leq 10^6$.\n- For $100\\%$ of the data, it is guaranteed that $1 \\leq n \\leq 20$, $1 \\leq m \\leq 50$, $1 \\leq |s| \\leq 20$, $1 \\leq |t| \\leq 2 \\times 10^6$, and both $s$ and $t$ contain only lowercase English letters.\n\nTips\n- Pay attention to the impact of input reading on program efficiency.\n- Note that the string lengths marked in Constraints are per-string lengths, not the sum of lengths.\n\nNotes\n- The testdata is strengthened; the first $80\\%$ is the original testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] L 语言", "background": "", "description": "标点符号的出现晚于文字的出现，所以以前的语言都是没有标点的。现在你要处理的就是一段没有标点的文章。  \n\n一段文章 $T$ 是由若干小写字母构成。一个单词 $W$ 也是由若干小写字母构成。一个字典 $D$ 是若干个单词的集合。我们称一段文章 $T$ 在某个字典 $D$ 下是可以被理解的，是指如果文章 $T$ 可以被分成若干部分，且每一个部分都是字典 $D$ 中的单词。  \n\n例如字典 $D$ 中包括单词 $\\texttt{is},\\texttt{name},\\texttt{what},\\texttt{your}$，则文章 $\\texttt{whatisyourname}$ 是在字典 $D$ 下可以被理解的，因为它可以分成 $4$ 个单词：$\\texttt{what},\\texttt{is},\\texttt{your},\\texttt{name}$，且每个单词都属于字典 $D$，而文章 $\\texttt{whatisyouname}$ 在字典 $D$ 下不能被理解，但可以在字典 $D'=D\\cup\\{\\texttt{you}\\}$ 下被理解。这段文章的一个前缀 $\\texttt{whatis}$，也可以在字典 $D$ 下被理解，而且是在字典 $D$ 下能够被理解的最长的前缀。  \n\n给定一个字典 $D$，你的程序需要判断若干段文章在字典 $D$ 下是否能够被理解。并给出其在字典 $D$ 下能够被理解的最长前缀的位置。", "inputFormat": "第一行两个整数 $n$ 和 $m$，表示字典 $D$ 中有 $n$ 个单词，且有 $m$ 段文章需要被处理。\n\n接下来 $n$ 行，每行一个字符串 $s$，表示字典 $D$ 中的一个单词。\n\n接下来 $m$ 行，每行一个字符串 $t$，表示一篇文章。", "outputFormat": "对于输入的每一篇文章，你需要输出一行一个整数，表示这段文章在字典 $D$ 可以被理解的最长前缀的位置。", "hint": "#### 样例 1 解释\n\n- 对于第一个询问，整段文章 `whatisyourname` 都能被理解。\n- 对于第二个询问，前缀 `whatis` 能够被理解。\n- 对于第三个询问，没有任何前缀能够被理解。\n\n#### 数据规模与约定\n\n- 对于 $80\\%$ 的数据，保证 $m \\leq 20$，$|t| \\leq 10^6$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 20$，$1 \\leq m \\leq 50$，$1 \\leq |s| \\leq 20$，$1 \\leq |t| \\leq 2 \\times 10^6$，$s$ 与 $t$ 中均只含小写英文字母。\n\n#### 提示\n\n- 请注意数据读入对程序效率造成的影响。\n- 请注意【数据规模与约定】中标注的串长是单串长度，并不是字符串长度和。\n\n#### 说明\n\n本题数据有加强，其中前 $80\\%$ 的数据为原测试数据。", "locale": "zh-CN"}}}
{"pid": "P2293", "type": "P", "difficulty": 6, "samples": [["3\n1000000000\n", "1000"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["高精度", "2004", "各省省选", "湖南", "O2优化"], "title": "[HNOI2004] 高精度开根", "background": null, "description": "晓华所在的工作组正在编写一套高精度科学计算的软件，一些简单的部分如高精度加减法、乘除法早已写完了，现在就剩下晓华所负责的部分：实数的高精度开 $m$ 次根。\n\n因为一个有理数开根之后可能得到一个无理数，所以这项工作是有较大难度的。现在要做的只是这项工作的第一步：只对自然数进行开整数次根，求出它的一个非负根，并且不考虑结果的小数部分，只要求把结果截断取整即可。\n\n程序需要根据给定的输入，包括需要开根的次数，以及被开根的整数；计算出它的非负根取整后的结果。", "inputFormat": "输入共两行，每行都有一个整数，并且输入中没有多余的空格：\n\n第一行有一个正整数 $m$，表示要开的根次；\n\n第二行有一个整数 $n$，表示被开根的数。", "outputFormat": "输出文件共一行，包括一个数，即为开根取整后的结果。", "hint": "**【数据范围】**\n\n对于所有的数据：$0\\le n \\le 10^{10000},1\\le m \\le 50$。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2004] High-Precision m-th Root", "background": "", "description": "Xiaohua's team is developing a high-precision scientific computing software suite. Some simple parts such as high-precision addition/subtraction and multiplication/division have already been completed. The remaining part, assigned to Xiaohua, is computing the high-precision real $m$-th root.\n\nBecause taking the root of a rational number may produce an irrational number, this task is quite challenging. For now, we only implement the first step: take an integer-order root of a natural number, obtain a non-negative root, and ignore the fractional part of the result—just truncate it to an integer.\n\nGiven the input specifying the degree of the root and the integer to be rooted, the program should compute the truncated non-negative root.", "inputFormat": "The input consists of two lines, each containing an integer, with no extra spaces.\n\n- The first line contains a positive integer $m$, the degree of the root.\n- The second line contains an integer $n$, the number to take the root of.", "outputFormat": "Output a single line containing one number: the truncated result of the root.", "hint": "[Constraints]\n\nFor all testdata: $0 \\le n \\le 10^{10000}, 1 \\le m \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2004] 高精度开根", "background": null, "description": "晓华所在的工作组正在编写一套高精度科学计算的软件，一些简单的部分如高精度加减法、乘除法早已写完了，现在就剩下晓华所负责的部分：实数的高精度开 $m$ 次根。\n\n因为一个有理数开根之后可能得到一个无理数，所以这项工作是有较大难度的。现在要做的只是这项工作的第一步：只对自然数进行开整数次根，求出它的一个非负根，并且不考虑结果的小数部分，只要求把结果截断取整即可。\n\n程序需要根据给定的输入，包括需要开根的次数，以及被开根的整数；计算出它的非负根取整后的结果。", "inputFormat": "输入共两行，每行都有一个整数，并且输入中没有多余的空格：\n\n第一行有一个正整数 $m$，表示要开的根次；\n\n第二行有一个整数 $n$，表示被开根的数。", "outputFormat": "输出文件共一行，包括一个数，即为开根取整后的结果。", "hint": "**【数据范围】**\n\n对于所有的数据：$0\\le n \\le 10^{10000},1\\le m \\le 50$。", "locale": "zh-CN"}}}
{"pid": "P2294", "type": "P", "difficulty": 4, "samples": [["2\n3 3\n1 2 10\n1 3 -5\n3 3 -15\n5 3\n1 5 100\n3 5 50\n1 2 51\n", "true\nfalse\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2005", "并查集", "各省省选", "湖南", "差分约束", "前缀和"], "title": "[HNOI2005] 狡猾的商人", "background": "", "description": "刁姹接到一个任务，为税务部门调查一位商人的账本，看看账本是不是伪造的。账本上记录了 $n$ 个月以来的收入情况，其中第 $i$ 个月的收入额为 $a_i$，$i=1,2,\\ldots,n-1,n$。当 $a_i>0$ 时表示这个月盈利 $a_i$ 元，当 $a_i<0$ 时表示这个月亏损 $|a_i|$ 元。所谓一段时间内的总收入，就是这段时间内每个月的收入额的总和。\n\n刁姹的任务是秘密进行的，为了调查商人的账本，她只好跑到商人那里打工。她趁商人不在时去偷看账本，可是她无法将账本偷出来，每次偷看账本时她都只能看某段时间内账本上记录的收入情况，并且她只能记住这段时间内的总收入。\n\n现在，姹总共偷看了 $m$ 次账本，当然也就记住了 $m$ 段时间内的总收入，你的任务是根据记住的这些信息来判断账本是不是假的。\n", "inputFormat": "第一行为一个正整数 $w$，其中 $w<100$，表示有 $w$ 组数据，即 $w$ 个账本，需要你判断。\n\n每组数据的第一行为两个正整数 $n$ 和 $m$，其中 $n<100,m<1000$，分别表示对应的账本记录了多少个月的收入情况以及偷看了多少次账本。\n\n接下来的 $m$ 行表示刁姹偷看 $m$ 次账本后记住的 $m$ 条信息，每条信息占一行，有三个整数 $s,t$ 和 $v$，表示从第 $s$ 个月到第 $t$ 个月（包含第 $t$ 个月）的总收入为 $v$，这里假设 $s$ 总是小于等于 $t$。\n", "outputFormat": "包含 $w$ 行，每行是 `true` 或 `false`，其中第 $i$ 行为 `true` 当且仅当第 $i$ 组数据，即第 $i$ 个账本不是假的；第 $i$ 行为 `false` 当且仅当第 $i$ 组数据，即第 $i$ 个账本是假的。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2005] The Cunning Merchant", "background": "", "description": "Diao Cha receives a task from the tax authority to investigate a merchant’s ledger and determine whether it is forged. The ledger records the income over $n$ months, where the income in month $i$ is $a_i$, $i=1,2,\\ldots,n-1,n$. When $a_i>0$, it means the profit in that month is $a_i$ yuan; when $a_i<0$, it means the loss in that month is $|a_i|$ yuan. The total income over a period is the sum of the monthly incomes within that period.\n\nHer task is carried out in secret. To investigate the ledger, she goes to work for the merchant. When the merchant is away, she peeks at the ledger, but she cannot take it out. Each time she peeks, she can only look at the income recorded for some continuous period, and she can remember only the total income over that period.\n\nNow, she has peeked at the ledger $m$ times and thus remembered the total incomes over $m$ periods. Your task is to determine, based on these remembered totals, whether the ledger is fake.", "inputFormat": "The first line contains a positive integer $w$, where $w<100$, indicating that there are $w$ test cases (that is, $w$ ledgers) to judge.\n\nFor each test case, the first line contains two positive integers $n$ and $m$, where $n<100, m<1000$, indicating how many months of income the ledger records and how many times she peeked at the ledger.\n\nThe next $m$ lines describe the $m$ pieces of information Diao Cha remembered after $m$ peeks. Each line contains three integers $s$, $t$ and $v$, meaning that the total income from month $s$ to month $t$ (including month $t$) is $v$. Here, assume $s$ is always less than or equal to $t$.", "outputFormat": "Output $w$ lines, each containing `true` or `false`. The $i$-th line is `true` if and only if the $i$-th test case, i.e., the $i$-th ledger, is not fake; the $i$-th line is `false` if and only if the $i$-th test case, i.e., the $i$-th ledger, is fake.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2005] 狡猾的商人", "background": "", "description": "刁姹接到一个任务，为税务部门调查一位商人的账本，看看账本是不是伪造的。账本上记录了 $n$ 个月以来的收入情况，其中第 $i$ 个月的收入额为 $a_i$，$i=1,2,\\ldots,n-1,n$。当 $a_i>0$ 时表示这个月盈利 $a_i$ 元，当 $a_i<0$ 时表示这个月亏损 $|a_i|$ 元。所谓一段时间内的总收入，就是这段时间内每个月的收入额的总和。\n\n刁姹的任务是秘密进行的，为了调查商人的账本，她只好跑到商人那里打工。她趁商人不在时去偷看账本，可是她无法将账本偷出来，每次偷看账本时她都只能看某段时间内账本上记录的收入情况，并且她只能记住这段时间内的总收入。\n\n现在，姹总共偷看了 $m$ 次账本，当然也就记住了 $m$ 段时间内的总收入，你的任务是根据记住的这些信息来判断账本是不是假的。\n", "inputFormat": "第一行为一个正整数 $w$，其中 $w<100$，表示有 $w$ 组数据，即 $w$ 个账本，需要你判断。\n\n每组数据的第一行为两个正整数 $n$ 和 $m$，其中 $n<100,m<1000$，分别表示对应的账本记录了多少个月的收入情况以及偷看了多少次账本。\n\n接下来的 $m$ 行表示刁姹偷看 $m$ 次账本后记住的 $m$ 条信息，每条信息占一行，有三个整数 $s,t$ 和 $v$，表示从第 $s$ 个月到第 $t$ 个月（包含第 $t$ 个月）的总收入为 $v$，这里假设 $s$ 总是小于等于 $t$。\n", "outputFormat": "包含 $w$ 行，每行是 `true` 或 `false`，其中第 $i$ 行为 `true` 当且仅当第 $i$ 组数据，即第 $i$ 个账本不是假的；第 $i$ 行为 `false` 当且仅当第 $i$ 组数据，即第 $i$ 个账本是假的。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P2295", "type": "P", "difficulty": 5, "samples": [["3 9\n0 0 1 0 0 0 0 0 1\n1 1 1 1 1 1 0 1 0\n1 0 0 1 0 0 1 0 0\n", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "洛谷原创"], "title": "MICE", "background": "", "description": "S 国的动物园是一个 $N \\times M$ 的网格图，左上角的坐标是 $(1,1)$，右下角的坐标是 $(N,M)$。\n\n小象在动物园的左上角，它想回到右下角的家里去睡觉，但是动物园中有一些老鼠，而小象又很害怕老鼠。动物园里的老鼠是彼此互不相同的。小象的害怕值定义为他回家的路径上可以看见的不同的老鼠的数量。若小象当前的位置为 $(x_1,y_1)$，小象可以看见老鼠，当且仅当老鼠的位置 $(x_2,y_2)$ 满足 $|x_1-x_2| + |y_1-y_2| \\leq 1$。由于小象很困了，所以小象只会走一条最近的路回家，即小象只会向下或者向右走。现在你需要帮小象确定一条回家的路线，使得小象的害怕值最小。\n", "inputFormat": "第一行包含两个用空格隔开的整数，$N$ 和 $M$。\n\n接下来一个 $N \\times M$ 的矩阵表示动物园的地图。其中 $A_{i,j}$ 表示第 $i$ 行第 $j$ 列上老鼠的数量。若 $A_{i,j} = 0$ 则表示当前位置上没有老鼠(小象的家里也可能存在老鼠)。\n", "outputFormat": "输出一个整数，表示路线最小的害怕值是多少。\n", "hint": "对于 $20\\%$ 的数据，$1 \\leq N,M \\leq 5$。\n\n对于 $100\\%$ 的数据，$1 \\leq N,M \\leq 1000,0 \\leq A_{i,j} \\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "MICE", "background": "", "description": "The zoo in country S is an $N \\times M$ grid, with the top-left corner at $(1, 1)$ and the bottom-right corner at $(N, M)$.\n\nA little elephant is at the top-left corner and wants to go home to sleep at the bottom-right corner, but there are some mice in the zoo, and the elephant is afraid of them. The mice in the zoo are all distinct individuals. The elephant’s fear value is defined as the number of distinct mice it can see along its route home. If the elephant is currently at $(x_1, y_1)$, it can see a mouse if and only if the mouse at $(x_2, y_2)$ satisfies $|x_1 - x_2| + |y_1 - y_2| \\leq 1$. Since the elephant is very sleepy, it will only take a shortest path home, i.e., it only moves down or right. Now you need to determine a route home that minimizes the elephant’s fear value.", "inputFormat": "The first line contains two integers, $N$ and $M$.\n\nThen an $N \\times M$ matrix describes the map of the zoo. $A_{i, j}$ denotes the number of mice at row $i$, column $j$. If $A_{i, j} = 0$, it means there are no mice at that position (the elephant’s home may also contain mice).", "outputFormat": "Output a single integer, the minimal possible fear value over all routes.", "hint": "For $20\\%$ of the testdata, $1 \\leq N, M \\leq 5$.\n\nFor $100\\%$ of the testdata, $1 \\leq N, M \\leq 1000, 0 \\leq A_{i, j} \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "MICE", "background": "", "description": "S 国的动物园是一个 $N \\times M$ 的网格图，左上角的坐标是 $(1,1)$，右下角的坐标是 $(N,M)$。\n\n小象在动物园的左上角，它想回到右下角的家里去睡觉，但是动物园中有一些老鼠，而小象又很害怕老鼠。动物园里的老鼠是彼此互不相同的。小象的害怕值定义为他回家的路径上可以看见的不同的老鼠的数量。若小象当前的位置为 $(x_1,y_1)$，小象可以看见老鼠，当且仅当老鼠的位置 $(x_2,y_2)$ 满足 $|x_1-x_2| + |y_1-y_2| \\leq 1$。由于小象很困了，所以小象只会走一条最近的路回家，即小象只会向下或者向右走。现在你需要帮小象确定一条回家的路线，使得小象的害怕值最小。\n", "inputFormat": "第一行包含两个用空格隔开的整数，$N$ 和 $M$。\n\n接下来一个 $N \\times M$ 的矩阵表示动物园的地图。其中 $A_{i,j}$ 表示第 $i$ 行第 $j$ 列上老鼠的数量。若 $A_{i,j} = 0$ 则表示当前位置上没有老鼠(小象的家里也可能存在老鼠)。\n", "outputFormat": "输出一个整数，表示路线最小的害怕值是多少。\n", "hint": "对于 $20\\%$ 的数据，$1 \\leq N,M \\leq 5$。\n\n对于 $100\\%$ 的数据，$1 \\leq N,M \\leq 1000,0 \\leq A_{i,j} \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P2296", "type": "P", "difficulty": 3, "samples": [["3 2\n1 2\n2 1\n1 3", "-1"], ["6 6\n1 2\n1 3\n2 6\n2 5  \n4 5\n3 4\n1 5", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "图论", "2014", "NOIP 提高组"], "title": "[NOIP 2014 提高组] 寻找道路", "background": "NOIP2014 提高组 D2T2", "description": "在有向图 $G$ 中，每条边的长度均为 $1$，现给定起点和终点，请你在图中找一条从起点到终点的路径，该路径满足以下条件：\n\n1. 路径上的所有点的出边所指向的点都直接或间接与终点连通。\n2. 在满足条件 $1$ 的情况下使路径最短。\n\n注意：图 $G$ 中可能存在重边和自环，题目保证终点没有出边。\n\n请你输出符合条件的路径的长度。", "inputFormat": "第一行有两个用一个空格隔开的整数 $n$ 和 $m$，表示图有 $n$ 个点和 $m$ 条边。\n\n接下来的 $m$ 行每行 $2$ 个整数 $x,y$，之间用一个空格隔开，表示有一条边从点 $x$ 指向点 $y$。\n\n最后一行有两个用一个空格隔开的整数 $s,t$，表示起点为 $s$，终点为 $t$。", "outputFormat": "输出只有一行，包含一个整数，表示满足题目描述的最短路径的长度。如果这样的路径不存在，输出 $-1$。", "hint": "**样例 1 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2p3mke49.png) \n\n如上图所示，箭头表示有向道路，圆点表示城市。起点 $1$ 与终点 $3$ 不连通，所以满足题目描述的路径不存在，故输出 $-1$。\n\n**样例 2 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tm2e1lqq.png)\n如上图所示，满足条件的路径为 $1\\to 3\\to 4\\to 5$。注意点 $2$ 不能在答案路径中，因为点 $2$ 连了一条边到点 $6$，而点 $6$ 不与终点 $5$ 连通。\n\n**数据范围及约定**\n\n- 对于 $30\\%$ 的数据，$0<n\\le10$，$0<m\\le 20$。\n- 对于 $60\\%$ 的数据，$0<n\\le100$，$0<m\\le 2000$。\n- 对于 $100\\%$ 的数据，$0<n\\le 10^4$，$0<m\\le 2\\times 10^5$，$0<x,y,s,t\\le n,x,s\\ne t$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Senior] Finding the Road", "background": "NOIP 2014 Senior D2T2.", "description": "In a directed graph $G$ where every edge has length $1$, you are given a start and a terminal. Please find a path from the start to the terminal that satisfies the following conditions:\n\n1. For every vertex on the path, all endpoints of its outgoing edges are directly or indirectly able to reach the terminal.\n2. Among all paths satisfying condition 1, the path should be the shortest.\n\nNote: Graph $G$ may contain multiple edges and self-loops. It is guaranteed that the terminal has no outgoing edges.\n\nPlease output the length of a path that satisfies the conditions.", "inputFormat": "The first line contains two integers $n$ and $m$ separated by a space, denoting that the graph has $n$ vertices and $m$ edges.\n\nEach of the next $m$ lines contains two integers $x, y$ separated by a space, indicating there is a directed edge from vertex $x$ to vertex $y$.\n\nThe last line contains two integers $s, t$ separated by a space, indicating that the start is $s$ and the terminal is $t$.", "outputFormat": "Output a single line containing an integer, the length of the shortest path that satisfies the problem statement. If such a path does not exist, output $-1$.", "hint": "Sample 1 Explanation.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2p3mke49.png)\n\nAs shown in the figure above, arrows represent directed roads and dots represent cities. The start $1$ is not connected to the terminal $3$, so a path satisfying the problem statement does not exist, hence the output is $-1$.\n\nSample 2 Explanation.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tm2e1lqq.png)\nAs shown in the figure above, a path that satisfies the conditions is $1 \\to 3 \\to 4 \\to 5$. Note that vertex $2$ cannot appear in the answer path because vertex $2$ has an edge to vertex $6$, and vertex $6$ cannot reach the terminal $5$.\n\nConstraints.\n\n- For 30% of the testdata, $0 < n \\le 10$, $0 < m \\le 20$.\n- For 60% of the testdata, $0 < n \\le 100$, $0 < m \\le 2000$.\n- For 100% of the testdata, $0 < n \\le 10^4$, $0 < m \\le 2 \\times 10^5$, $0 < x, y, s, t \\le n$, $x, s \\ne t$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 提高组] 寻找道路", "background": "NOIP2014 提高组 D2T2", "description": "在有向图 $G$ 中，每条边的长度均为 $1$，现给定起点和终点，请你在图中找一条从起点到终点的路径，该路径满足以下条件：\n\n1. 路径上的所有点的出边所指向的点都直接或间接与终点连通。\n2. 在满足条件 $1$ 的情况下使路径最短。\n\n注意：图 $G$ 中可能存在重边和自环，题目保证终点没有出边。\n\n请你输出符合条件的路径的长度。", "inputFormat": "第一行有两个用一个空格隔开的整数 $n$ 和 $m$，表示图有 $n$ 个点和 $m$ 条边。\n\n接下来的 $m$ 行每行 $2$ 个整数 $x,y$，之间用一个空格隔开，表示有一条边从点 $x$ 指向点 $y$。\n\n最后一行有两个用一个空格隔开的整数 $s,t$，表示起点为 $s$，终点为 $t$。", "outputFormat": "输出只有一行，包含一个整数，表示满足题目描述的最短路径的长度。如果这样的路径不存在，输出 $-1$。", "hint": "**样例 1 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2p3mke49.png) \n\n如上图所示，箭头表示有向道路，圆点表示城市。起点 $1$ 与终点 $3$ 不连通，所以满足题目描述的路径不存在，故输出 $-1$。\n\n**样例 2 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tm2e1lqq.png)\n如上图所示，满足条件的路径为 $1\\to 3\\to 4\\to 5$。注意点 $2$ 不能在答案路径中，因为点 $2$ 连了一条边到点 $6$，而点 $6$ 不与终点 $5$ 连通。\n\n**数据范围及约定**\n\n- 对于 $30\\%$ 的数据，$0<n\\le10$，$0<m\\le 20$。\n- 对于 $60\\%$ 的数据，$0<n\\le100$，$0<m\\le 2000$。\n- 对于 $100\\%$ 的数据，$0<n\\le 10^4$，$0<m\\le 2\\times 10^5$，$0<x,y,s,t\\le n,x,s\\ne t$。", "locale": "zh-CN"}}}
{"pid": "P2298", "type": "P", "difficulty": 3, "samples": [["5 6\n.#..#.\n....#.\nd.....\n#####.\nm.....\n", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "Mzc和男家丁的游戏", "background": "mzc 与 djn 的第二弹。", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过上一弹的都知道）。他把她们召集在了一起，他们决定玩捉迷藏。现在 mzc 要来寻找他的男家丁，大家一起来帮忙啊！\n\n由于男家丁数目不多，再加上 mzc 大大的找人水平很好，所以一次只需要找一个男家丁。\n", "inputFormat": "第一行有两个数 $n,m$，表示有 $n$ 行 $m$ 列供男家丁躲藏，\n\n之后 $n$ 行 $m$ 列的矩阵，`m` 表示 mzc，`d` 表示男家丁，`#` 表示不能走，`.` 表示空地。\n", "outputFormat": "一行，若有解：一个数 $sum$，表示找到男家丁的最短移动次数。\n\n若无解：输出 `No Way!`。", "hint": "$3 \\leq m,n \\leq 2000$。\n\n由于 mzc 大大十分着急，所以他只能等待 $1s$。", "locale": "zh-CN", "translations": {"en": {"title": "Mzc and the Male Servants' Game", "background": "The second installment of mzc and djn.", "description": "Mzc’s family is very rich (just kidding). He has $n$ male servants (those who did the first installment already know). He gathered them together, and they decided to play hide-and-seek. Now mzc is going to search for his male servants. Let’s help out!\n\nSince there are not many male servants, and mzc is very good at finding people, each time he only needs to find one male servant.", "inputFormat": "The first line contains two integers $n$ and $m$, indicating there are $n$ rows and $m$ columns where the male servants can hide.\n\nThen follow $n$ lines with $m$ columns forming a matrix: `m` denotes mzc, `d` denotes a male servant, `#` denotes an impassable cell, and `.` denotes an empty cell.", "outputFormat": "A single line. If there is a solution: output one integer $sum$, which is the minimal number of moves to find a male servant.\n\nIf there is no solution: output `No Way!`.", "hint": "$3 \\leq m,n \\leq 2000$.\n\nBecause mzc is in a great hurry, he can only wait for 1 s.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Mzc和男家丁的游戏", "background": "mzc 与 djn 的第二弹。", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过上一弹的都知道）。他把她们召集在了一起，他们决定玩捉迷藏。现在 mzc 要来寻找他的男家丁，大家一起来帮忙啊！\n\n由于男家丁数目不多，再加上 mzc 大大的找人水平很好，所以一次只需要找一个男家丁。\n", "inputFormat": "第一行有两个数 $n,m$，表示有 $n$ 行 $m$ 列供男家丁躲藏，\n\n之后 $n$ 行 $m$ 列的矩阵，`m` 表示 mzc，`d` 表示男家丁，`#` 表示不能走，`.` 表示空地。\n", "outputFormat": "一行，若有解：一个数 $sum$，表示找到男家丁的最短移动次数。\n\n若无解：输出 `No Way!`。", "hint": "$3 \\leq m,n \\leq 2000$。\n\n由于 mzc 大大十分着急，所以他只能等待 $1s$。", "locale": "zh-CN"}}}
{"pid": "P2299", "type": "P", "difficulty": 3, "samples": [["5 8\n1 2 3\n2 3 4\n3 4 5\n4 5 6\n1 3 4\n2 4 7\n2 5 8\n1 5 100\n", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "贪心", "最短路"], "title": "Mzc和体委的争夺战", "background": "mzc 与 djn 第四弹。", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过前三弹的都知道）。但如此之多的男家丁吸引来了我们的体委（矮胖小伙），他要来与 mzc 争夺男家丁。\n\nmzc 很生气，决定与其决斗，但 cat 的体力确实有些不稳定，所以他需要你来帮他计算一下最短需要的时间。", "inputFormat": "第一行有两个数 $n,m$。$n$ 表示有 $n$ 个停留站，$m$ 表示共有 $m$ 条路。\n\n之后 $m$ 行，每行三个数 $a_i,b_i,c_i$，表示第 $a_i$ 个停留站到第 $b_i$ 个停留站需要 $c_i$ 的时间。注意，这是双向的。也就是说，从 $b_i$ 个停留站到第 $a_i$ 个停留站也需要 $c_i$ 的时间。", "outputFormat": "一行，输出 $1$ 到 $n$ 最短时间。", "hint": "$1\\le n \\leq 2500$，$1\\le m \\leq 2\\times10^5$，$1\\le c_i\\le 10^6$。\n\n由于 mzc 大大十分着急，所以他只能等待 1s。", "locale": "zh-CN", "translations": {"en": {"title": "Mzc and the PE Monitor's Battle", "background": "The fourth installment of mzc and djn.", "description": "mzc is very rich (just kidding). He has $n$ male servants (those who did the first three installments know this). But such a large number of male servants attracted our PE monitor (a short, chubby fellow), who wants to compete with mzc for them.\n\nmzc is very angry and decides to duel him, but cat's stamina is indeed somewhat unstable, so he needs you to help him calculate the minimum required time.", "inputFormat": "The first line contains two numbers $n, m$. $n$ means there are $n$ stops, and $m$ means there are $m$ roads.\n\nThen follow $m$ lines, each with three numbers $a_i, b_i, c_i$, meaning that it takes $c_i$ time to go from stop $a_i$ to stop $b_i$. Note that the edges are bidirectional. That is, it also takes $c_i$ time to go from stop $b_i$ to stop $a_i$.", "outputFormat": "Output one line: the shortest time from $1$ to $n$.", "hint": "Constraints: $1 \\le n \\le 2500$, $1 \\le m \\le 2 \\times 10^5$, $1 \\le c_i \\le 10^6$.\n\nTime limit: $1$ s.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Mzc和体委的争夺战", "background": "mzc 与 djn 第四弹。", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过前三弹的都知道）。但如此之多的男家丁吸引来了我们的体委（矮胖小伙），他要来与 mzc 争夺男家丁。\n\nmzc 很生气，决定与其决斗，但 cat 的体力确实有些不稳定，所以他需要你来帮他计算一下最短需要的时间。", "inputFormat": "第一行有两个数 $n,m$。$n$ 表示有 $n$ 个停留站，$m$ 表示共有 $m$ 条路。\n\n之后 $m$ 行，每行三个数 $a_i,b_i,c_i$，表示第 $a_i$ 个停留站到第 $b_i$ 个停留站需要 $c_i$ 的时间。注意，这是双向的。也就是说，从 $b_i$ 个停留站到第 $a_i$ 个停留站也需要 $c_i$ 的时间。", "outputFormat": "一行，输出 $1$ 到 $n$ 最短时间。", "hint": "$1\\le n \\leq 2500$，$1\\le m \\leq 2\\times10^5$，$1\\le c_i\\le 10^6$。\n\n由于 mzc 大大十分着急，所以他只能等待 1s。", "locale": "zh-CN"}}}
{"pid": "P2300", "type": "P", "difficulty": 6, "samples": [["8\n1 9 9 4 1 2 2 9", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "二分", "单调队列", "前缀和"], "title": "合并神犇", "background": "loidc 来到了 NOI 的赛场上，他在那里看到了好多神犇。\n", "description": "神犇们现在正排成一排在刷题。每个神犇都有一个能力值 $p_i$。loidc 认为坐在附近的金牌爷能力参差不齐非常难受。于是 loidc 便想方设法对神犇们进行人道主义合并。\n\nloidc 想把神犇的能力值排列成从左到右单调不减。他每次可以选择一个神犇，把他合并到两侧相邻的神犇上。合并后的新神犇能力值是以前两位犇的能力值之和。每次合并完成后，被合并的两个神犇就会消失。合并后的新神犇不能再分开（万一他俩有女朋友咋办）因此每次合并后神犇的总数会减 1。\n\nloidc 想知道，想治好他的强迫症需要合并多少次。\n", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示 $p_i$。\n", "outputFormat": "一行一个整数表示 loidc 需要合并的次数。\n", "hint": "对于 $50\\%$ 的数据，$0\\lt n \\le 5000$。\n\n对于 $100\\%$ 的数据，$0\\lt n \\le2\\times 10^5$，$0\\lt p_i\\le 2147483647$，$p$ 均为随机生成。\n", "locale": "zh-CN", "translations": {"en": {"title": "Merging Shen Niu", "background": "loidc came to the NOI arena, where he saw many shen niu (神犇).", "description": "The shen niu are standing in a line solving problems. Each shen niu has an ability value $p_i$. loidc feels uncomfortable that the abilities of nearby gold medalists vary widely, so he decides to humanely merge the shen niu.\n\nloidc wants the ability values to be nondecreasing from left to right. Each time, he may choose one shen niu and merge him into one of his two adjacent shen niu. The ability of the new shen niu after the merge equals the sum of the two participants’ abilities. After each merge, the two participants disappear and are replaced by the merged shen niu. The merged shen niu cannot be split again. Therefore, after each merge, the total number of shen niu decreases by $1$.\n\nloidc wants to know the minimum number of merges needed to achieve his goal.", "inputFormat": "The first line contains an integer $n$.\n\nThe second line contains $n$ integers, where the $i$-th integer is $p_i$.", "outputFormat": "Output a single integer, the minimum number of merges loidc needs.", "hint": "Constraints:\n\n- For $50\\%$ of the testdata, $0 \\lt n \\le 5000$.\n- For $100\\%$ of the testdata, $0 \\lt n \\le 2 \\times 10^5$, $0 \\lt p_i \\le 2147483647$, and the $p_i$ are randomly generated.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "合并神犇", "background": "loidc 来到了 NOI 的赛场上，他在那里看到了好多神犇。\n", "description": "神犇们现在正排成一排在刷题。每个神犇都有一个能力值 $p_i$。loidc 认为坐在附近的金牌爷能力参差不齐非常难受。于是 loidc 便想方设法对神犇们进行人道主义合并。\n\nloidc 想把神犇的能力值排列成从左到右单调不减。他每次可以选择一个神犇，把他合并到两侧相邻的神犇上。合并后的新神犇能力值是以前两位犇的能力值之和。每次合并完成后，被合并的两个神犇就会消失。合并后的新神犇不能再分开（万一他俩有女朋友咋办）因此每次合并后神犇的总数会减 1。\n\nloidc 想知道，想治好他的强迫症需要合并多少次。\n", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示 $p_i$。\n", "outputFormat": "一行一个整数表示 loidc 需要合并的次数。\n", "hint": "对于 $50\\%$ 的数据，$0\\lt n \\le 5000$。\n\n对于 $100\\%$ 的数据，$0\\lt n \\le2\\times 10^5$，$0\\lt p_i\\le 2147483647$，$p$ 均为随机生成。\n", "locale": "zh-CN"}}}
{"pid": "P2301", "type": "P", "difficulty": 3, "samples": [["5 2\n3\n1\n4\n5\n8\n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "就是干！", "background": "loidc 有着特别的作死技巧，但是有一天他特别的技巧失效了。\n\nMr.Cao 发现了他在与其他哲学家摔跤，于是 Mr.Cao 带着浩浩荡荡的老师大军来讨伐 Loidc。", "description": "眼看着老师大军浩浩荡荡的向机房前进。LOI 的同学们决定动用自己的力量来保卫他们的好朋友 loidc。现在每个人都要挑选自己的武器——两根木棍。一根用做远距离投掷，另一根用做近距离搏斗。每个人都想挑到最好的，但这是不可能的。但是为了让多数人满意，也为了减少大家的矛盾。cony 设计了一个矛盾指数，这个指数就是每个人的不舒服指数和，不舒服指数就 $(L1-L2)^2$，其中 $L1,L2$ 分别是两根木棍的长度。\n\ncony 决定让矛盾指数最少，于是他来向你寻求帮助，希望你能告诉他矛盾指数至少有多少。", "inputFormat": "第一行两个数 $m,n$。\n\n表示有 $n$ 个人，$m$ 个木棍。\n\n接下来 $m$ 个数表示每个木棍（肯定有解）。", "outputFormat": "一个数，最少的矛盾指数。", "hint": "$m \\leq 2000,n \\leq 500$", "locale": "zh-CN", "translations": {"en": {"title": "Just Do It!", "background": "Loidc has some special self-destructive tricks, but one day his special tricks stopped working. Mr. Cao found him wrestling with other philosophers, so Mr. Cao led a mighty army of teachers to fight against Loidc.", "description": "Seeing the massive army of teachers marching toward the computer lab, the LOI students decided to use their own strength to defend their good friend Loidc. Now everyone must choose their weapons—two wooden sticks. One is for long-range throwing, and the other is for close-quarters combat. Everyone wants the best, but that is impossible. To make most people satisfied and reduce conflict, cony designed a “conflict index.” This index is the sum of each person’s discomfort index, and the discomfort index is $(L1-L2)^2$, where $L1, L2$ are the lengths of the two sticks.\n\nCony decides to minimize the conflict index, so he comes to you for help and hopes you can tell him the minimum possible conflict index.", "inputFormat": "The first line contains two integers $m,n$.\n\nIt means there are $n$ people and $m$ sticks.\n\nThen follow $m$ numbers representing each stick (it is guaranteed that a solution exists).", "outputFormat": "A single number: the minimum conflict index.", "hint": "Constraints: $m \\leq 2000, n \\leq 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "就是干！", "background": "loidc 有着特别的作死技巧，但是有一天他特别的技巧失效了。\n\nMr.Cao 发现了他在与其他哲学家摔跤，于是 Mr.Cao 带着浩浩荡荡的老师大军来讨伐 Loidc。", "description": "眼看着老师大军浩浩荡荡的向机房前进。LOI 的同学们决定动用自己的力量来保卫他们的好朋友 loidc。现在每个人都要挑选自己的武器——两根木棍。一根用做远距离投掷，另一根用做近距离搏斗。每个人都想挑到最好的，但这是不可能的。但是为了让多数人满意，也为了减少大家的矛盾。cony 设计了一个矛盾指数，这个指数就是每个人的不舒服指数和，不舒服指数就 $(L1-L2)^2$，其中 $L1,L2$ 分别是两根木棍的长度。\n\ncony 决定让矛盾指数最少，于是他来向你寻求帮助，希望你能告诉他矛盾指数至少有多少。", "inputFormat": "第一行两个数 $m,n$。\n\n表示有 $n$ 个人，$m$ 个木棍。\n\n接下来 $m$ 个数表示每个木棍（肯定有解）。", "outputFormat": "一个数，最少的矛盾指数。", "hint": "$m \\leq 2000,n \\leq 500$", "locale": "zh-CN"}}}
{"pid": "P2302", "type": "P", "difficulty": 5, "samples": [["9 11 9 4\n1 2\n3 2\n1 4\n4 7\n7 5\n5 1\n6 9\n8 5\n9 8\n5 3\n4 8\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["树形数据结构"], "title": "loidc，跑起来", "background": "loidc 在路上诱拐了一个幼女。（他不是哲学家么！？）", "description": "现在他已经被 cony 追杀。loidc 逃到一个迷宫中，cony 也追到了这儿。迷宫由编号由 $1$ 到 $n$ 的方块组成。每两个不同的方块将被得知它们是否与另一个相邻。现在已知 loidc 和 cony 所处迷宫的位置。在迷宫中的人可以选择留在原地不动，还是移到相邻的方格中。\n\n迷宫具有如下性质：\n\n它不包括三角形，也就是没有任意三个不同的方块，它们两两相邻，\n\n每一个人到达都能到达任意一个方块。\n\n一次追杀由许多回合组成。在一个回合内，每一个人移一步。每一个回合由 loidc 开始。如果 loidc 与 cony 在同一个方格中相遇，那么我们就可能永远见不到 loidc 了。\n\nloidc 非常害怕，他请求你告诉他是否会被 cony 抓住，多少回合 cony 赶上他。（假设两个人都足够聪明）", "inputFormat": "第一行有 $4$ 个整数 $n,m,a,b$，它们用单个空格分隔，（$2 \\leq n \\leq 3000, n-1 \\leq m \\leq 15000,1 \\leq a,b \\leq n$）。它们分别表示迷宫中的方块数目，相邻的一对方块（双向）数目，相邻两个方格中有且仅有一条边，loidc、cony 所处的位置。下面 $m$ 行，一行包含两个用一个空格分开的整数，表示每一对相邻的方块编号。", "outputFormat": "一个单词 `NO`，如果 cony 不能赶上 loidc；或者一个整数，如果 cony 能赶上 loidc 的最少游戏轮数。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "loidc, Run", "background": "loidc abducted a young girl on the road. (Isn't he a philosopher!?)", "description": "Now he is being hunted by cony. loidc fled into a maze, and cony has followed him there. The maze consists of cells numbered from $1$ to $n$. Some pairs of distinct cells are adjacent; the set of adjacencies is given. A person in the maze may either stay where they are or move to an adjacent cell.\n\nThe maze has the following properties:\n- It contains no triangles; that is, there do not exist three distinct cells that are pairwise adjacent.\n- From any cell, one can reach any other cell.\n\nThe chase consists of many rounds. In each round, each person makes at most one move. loidc moves first in every round, then cony moves. If loidc and cony occupy the same cell at any time, we may never see loidc again.\n\nloidc is very scared. He asks you to tell him whether he will be caught by cony, and in how many rounds cony will catch him (assuming both are sufficiently clever).", "inputFormat": "The first line contains $4$ integers $n, m, a, b$, separated by single spaces ($2 \\leq n \\leq 3000$, $n - 1 \\leq m \\leq 15000$, $1 \\leq a, b \\leq n$). They denote the number of cells in the maze, the number of adjacent pairs (undirected edges), and the starting positions of loidc and cony, respectively. Each of the following $m$ lines contains two integers separated by a single space, indicating an adjacent pair of cell indices. Between any two adjacent cells, there is exactly one edge.", "outputFormat": "Output the single word `NO` if cony cannot catch loidc; otherwise output an integer, the minimum number of rounds needed for cony to catch loidc.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "loidc，跑起来", "background": "loidc 在路上诱拐了一个幼女。（他不是哲学家么！？）", "description": "现在他已经被 cony 追杀。loidc 逃到一个迷宫中，cony 也追到了这儿。迷宫由编号由 $1$ 到 $n$ 的方块组成。每两个不同的方块将被得知它们是否与另一个相邻。现在已知 loidc 和 cony 所处迷宫的位置。在迷宫中的人可以选择留在原地不动，还是移到相邻的方格中。\n\n迷宫具有如下性质：\n\n它不包括三角形，也就是没有任意三个不同的方块，它们两两相邻，\n\n每一个人到达都能到达任意一个方块。\n\n一次追杀由许多回合组成。在一个回合内，每一个人移一步。每一个回合由 loidc 开始。如果 loidc 与 cony 在同一个方格中相遇，那么我们就可能永远见不到 loidc 了。\n\nloidc 非常害怕，他请求你告诉他是否会被 cony 抓住，多少回合 cony 赶上他。（假设两个人都足够聪明）", "inputFormat": "第一行有 $4$ 个整数 $n,m,a,b$，它们用单个空格分隔，（$2 \\leq n \\leq 3000, n-1 \\leq m \\leq 15000,1 \\leq a,b \\leq n$）。它们分别表示迷宫中的方块数目，相邻的一对方块（双向）数目，相邻两个方格中有且仅有一条边，loidc、cony 所处的位置。下面 $m$ 行，一行包含两个用一个空格分开的整数，表示每一对相邻的方块编号。", "outputFormat": "一个单词 `NO`，如果 cony 不能赶上 loidc；或者一个整数，如果 cony 能赶上 loidc 的最少游戏轮数。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P2303", "type": "P", "difficulty": 5, "samples": [["6\n", "15"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2012", "各省省选", "山东", "O2优化", "欧拉函数"], "title": "[SDOI2012] Longge 的问题", "background": "Longge 的数学成绩非常好，并且他非常乐于挑战高难度的数学问题。", "description": "现在问题来了：给定一个整数 $n$，你需要求出 $\\sum\\limits_{i=1}^n \\gcd(i, n)$，其中 $\\gcd(i, n)$ 表示 $i$ 和 $n$ 的最大公因数。  ", "inputFormat": "输入只有一行一个整数，表示 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $60\\% $ 的数据，保证 $n\\leq 2^{16}$。\n- 对于 $100\\% $ 的数据，保证 $1\\leq n< 2^{32}$。", "locale": "zh-CN", "translations": {"en": {"title": "[SDOI2012] Longge's Problem", "background": "Longge excels at mathematics, and he enjoys tackling challenging math problems.", "description": "Here is the problem: Given an integer $n$, you need to compute $\\sum\\limits_{i=1}^n \\gcd(i, n)$, where $\\gcd(i, n)$ denotes the greatest common divisor of $i$ and $n$.", "inputFormat": "The input consists of a single line containing the integer $n$.", "outputFormat": "Output a single integer on one line representing the answer.", "hint": "#### Constraints\n\n- For $60\\%$ of the testdata, it is guaranteed that $n \\leq 2^{16}$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n < 2^{32}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SDOI2012] Longge 的问题", "background": "Longge 的数学成绩非常好，并且他非常乐于挑战高难度的数学问题。", "description": "现在问题来了：给定一个整数 $n$，你需要求出 $\\sum\\limits_{i=1}^n \\gcd(i, n)$，其中 $\\gcd(i, n)$ 表示 $i$ 和 $n$ 的最大公因数。  ", "inputFormat": "输入只有一行一个整数，表示 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $60\\% $ 的数据，保证 $n\\leq 2^{16}$。\n- 对于 $100\\% $ 的数据，保证 $1\\leq n< 2^{32}$。", "locale": "zh-CN"}}}
{"pid": "P2304", "type": "P", "difficulty": 7, "samples": [["6\n-1 1\n1 1\n-2 2\n0 8\n0 9\n0 10\n", "3\n2 1 3\n3\n"], ["4\n0 1\n-2 1\n2 1\n3 2\n", "4\n1 2 3 4\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2015", "NOI", "网络流", "Special Judge", "图论建模"], "title": "[NOI2015] 小园丁与老司机", "background": "", "description": "小园丁 Mr. S 负责看管一片田野，田野可以看作一个二维平面。田野上有 $n$ 棵 许愿树，编号 $1,2,3,\\dots,n$ ，每棵树可以看作平面上的一个点，其中第 $i$ 棵树 $(1 \\leq i \\leq n)$ 位于坐标 $(x_i, y_i)$ 。任意两棵树的坐标均不相同。\n\n老司机 Mr. P 从原点 $(0,0)$ 驾车出发，进行若干轮行动。每一轮，Mr. P 首先选择任意一个满足以下条件的方向：\n\n1.为左、右、上、左上 $45\\degree$、右上 $45\\degree$ 五个方向之一。\n\n2.沿此方向前进可以到达一棵他尚未许愿过的树。\n\n完成选择后，Mr.P 沿该方向直线前进，必须到达该方向上距离最近的尚未许愿的树，在树下许愿并继续下一轮行动。如果没有满足条件的方向可供选择，则停止行动。他会采取最优策略，在尽可能多的树下许愿。若最优策略不唯一，可以选择任意一种。\n\n不幸的是，小园丁 Mr.S 发现由于田野土质松软，老司机 Mr.P 的小汽车在每轮行进过程中，都会在田野上留下一条车辙印，一条车辙印可看作以两棵树（或原点和一棵树）为端点的一条线段。\n\n在 Mr.P 之后，还有很多许愿者计划驾车来田野许愿，这些许愿者都会像 Mr.P 一样任选一种最优策略行动。Mr.S 认为非左右方向（即上、左上  $45\\degree$、右 上 $45\\degree$ 三个方向）的车辙印很不美观，为了维护田野的形象，他打算租用一些轧路机，在这群许愿者到来之前夯实所有“可能留下非左右方向车辙印”的地面。“可能留下非左右方向车辙印”的地面应当是田野上的若干条线段，其中每条线段都包含在某一种最优策略的行进路线中。每台轧路机都采取满足以下三个条件的工作模式：\n\n1.从原点或任意一棵树出发。\n\n2.只能向上、左上 $45\\degree$、右上 $45\\degree$ 三个方向之一移动，并且只能在树下改变方向或停止。\n\n3.只能经过“可能留下非左右方向车辙印”的地面，但是同一块地面可以 被多台轧路机经过。\n\n现在 Mr. P 和 Mr. S 分别向你提出了一个问题：\n\n1.请给 Mr.P 指出任意一条最优路线。\n\n2.请告诉 Mr.S 最少需要租用多少台轧路机。", "inputFormat": "第 $1$ 行包含 $1$ 个正整数 $n$，表示许愿树的数量。\n\n接下来 $n$ 行，第 $i+1$ 行包含 $2$ 个整数 $x_i,y_i$，中间用单个空格隔开，表示第 $i$ 棵许愿树的坐标。", "outputFormat": "包括 $3$ 行。\n\n第 $1$ 行输出 $1$ 个整数 $m$，表示 Mr. P 最多能在多少棵树下许愿。\n\n输出文件的第 $2$ 行输出 $m$ 个整数，相邻整数之间用单个空格隔开，表示 Mr.P 应该依次在哪些树下许愿。\n\n输出文件的第 $3$ 行输出 $1$ 个整数，表示 Mr. S 最少需要租用多少台轧路机。\n", "hint": "#### 样例 1 解释\n\n最优路线共 $2$ 条，可许愿 $3$ 次：$(0,0) \\rightarrow (1,1) \\rightarrow (-1,1) \\rightarrow (-2,2)$ 或 $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$。\n\n至少 $3$ 台轧路机，路线是 $(0,0) \\rightarrow (1,1)$，$(-1,1) \\rightarrow (-2,2)$ 和 $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$。\n\n#### 样例 2 解释\n\n最优路线唯一：$(0,0) \\rightarrow (0,1) \\rightarrow (-2,1) \\rightarrow (2,1) \\rightarrow (3,2)$，可许愿 $4$ 次。其中在 $(0,1)$ 许愿后，从 $(-2,1)$ 出发沿着向右的方向能够到达的最近的未许愿过的树是 $(2,1)$，所以可以到达 $(2,1)$。\n\n而如果沿着 $(0,0) \\rightarrow (0,1) \\rightarrow (2,1) \\rightarrow (-2,1)$ 的方向前进，此时 $(-2,1)$ 右边所有树都是许愿过的，根据题目条件规定，停止前进。故无法获得最优解。\n\n$(0,0) \\rightarrow (0,1)$ 与 $(2,1) \\rightarrow (3,2)$ 会留下非左右方向车辙印，需 $2$ 台轧路机。\n\n![](https://cdn.luogu.com.cn/upload/pic/1509.png)", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2015] The Little Gardener and the Veteran Driver", "background": "", "description": "The little gardener Mr. S is in charge of a field, which can be regarded as a 2D plane. There are $n$ wishing trees in the field, numbered $1, 2, 3, \\dots, n$. Each tree is considered a point on the plane, where the $i$-th tree $(1 \\leq i \\leq n)$ is located at coordinates $(x_i, y_i)$. No two trees share the same coordinates.\n\nThe veteran driver Mr. P starts driving from the origin $(0,0)$ and takes several rounds of actions. In each round, Mr. P first chooses any direction that satisfies the following conditions:\n\n1. It is one of the five directions: left, right, up, up-left $45\\degree$, or up-right $45\\degree$.\n2. Moving along this direction can reach a tree at which he has not yet made a wish.\n\nAfter making the choice, Mr. P moves straight along that direction and must reach the nearest unvisited tree in that direction, make a wish under the tree, and then proceed to the next round. If there is no direction that satisfies the conditions, he stops. He will adopt an optimal strategy to make wishes under as many trees as possible. If the optimal strategy is not unique, he may choose any one.\n\nUnfortunately, the little gardener Mr. S finds that due to the soft soil of the field, Mr. P’s car leaves a rut during each move. A rut can be regarded as a line segment with endpoints at two trees (or the origin and a tree).\n\nAfter Mr. P, many other wishers plan to drive to the field to make wishes, and they will act using some optimal strategy just like Mr. P. Mr. S believes that ruts in non-left/right directions (that is, up, up-left $45\\degree$, and up-right $45\\degree$) are unsightly. To maintain the appearance of the field, he plans to rent some road rollers to compact all ground that “could possibly have non-left/right-direction ruts” before these wishers arrive. The ground that “could possibly have non-left/right-direction ruts” should be a set of line segments, each contained in the route of some optimal strategy. Each road roller operates under the following three conditions:\n\n1. It starts from the origin or any tree.\n2. It can only move in one of the three directions: up, up-left $45\\degree$, or up-right $45\\degree$, and it may only change direction or stop at trees.\n3. It can only pass through ground that “could possibly have non-left/right-direction ruts”; however, the same ground may be traversed by multiple road rollers.\n\nNow Mr. P and Mr. S each pose a question to you:\n\n1. Please provide Mr. P with any one optimal route.\n2. Please tell Mr. S the minimum number of road rollers needed.", "inputFormat": "The first line contains one positive integer $n$, the number of wishing trees.\n\nThe next $n$ lines, the $(i+1)$-th line contains $2$ integers $x_i, y_i$ separated by a single space, representing the coordinates of the $i$-th wishing tree.", "outputFormat": "Output $3$ lines.\n\nThe first line outputs one integer $m$, the maximum number of trees under which Mr. P can make wishes.\n\nThe second line outputs $m$ integers separated by single spaces, indicating the indices of the trees where Mr. P should make wishes in order.\n\nThe third line outputs one integer, the minimum number of road rollers that Mr. S needs to rent.", "hint": "#### Explanation for Sample 1\n\nThere are $2$ optimal routes, allowing $3$ wishes: $(0,0) \\rightarrow (1,1) \\rightarrow (-1,1) \\rightarrow (-2,2)$ or $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$.\n\nAt least $3$ road rollers are needed, with routes $(0,0) \\rightarrow (1,1)$, $(-1,1) \\rightarrow (-2,2)$, and $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$.\n\n#### Explanation for Sample 2\n\nThe optimal route is unique: $(0,0) \\rightarrow (0,1) \\rightarrow (-2,1) \\rightarrow (2,1) \\rightarrow (3,2)$, allowing $4$ wishes. After making a wish at $(0,1)$, starting from $(-2,1)$ and heading right, the nearest unvisited tree reachable is $(2,1)$, so one can reach $(2,1)$.\n\nIf instead one proceeds as $(0,0) \\rightarrow (0,1) \\rightarrow (2,1) \\rightarrow (-2,1)$, then at this point all trees to the right of $(-2,1)$ have already been visited. According to the rules, one must stop. Hence the optimal solution cannot be achieved.\n\n$(0,0) \\rightarrow (0,1)$ and $(2,1) \\rightarrow (3,2)$ would leave non-left/right-direction ruts, so $2$ road rollers are needed.\n\n![](https://cdn.luogu.com.cn/upload/pic/1509.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2015] 小园丁与老司机", "background": "", "description": "小园丁 Mr. S 负责看管一片田野，田野可以看作一个二维平面。田野上有 $n$ 棵 许愿树，编号 $1,2,3,\\dots,n$ ，每棵树可以看作平面上的一个点，其中第 $i$ 棵树 $(1 \\leq i \\leq n)$ 位于坐标 $(x_i, y_i)$ 。任意两棵树的坐标均不相同。\n\n老司机 Mr. P 从原点 $(0,0)$ 驾车出发，进行若干轮行动。每一轮，Mr. P 首先选择任意一个满足以下条件的方向：\n\n1.为左、右、上、左上 $45\\degree$、右上 $45\\degree$ 五个方向之一。\n\n2.沿此方向前进可以到达一棵他尚未许愿过的树。\n\n完成选择后，Mr.P 沿该方向直线前进，必须到达该方向上距离最近的尚未许愿的树，在树下许愿并继续下一轮行动。如果没有满足条件的方向可供选择，则停止行动。他会采取最优策略，在尽可能多的树下许愿。若最优策略不唯一，可以选择任意一种。\n\n不幸的是，小园丁 Mr.S 发现由于田野土质松软，老司机 Mr.P 的小汽车在每轮行进过程中，都会在田野上留下一条车辙印，一条车辙印可看作以两棵树（或原点和一棵树）为端点的一条线段。\n\n在 Mr.P 之后，还有很多许愿者计划驾车来田野许愿，这些许愿者都会像 Mr.P 一样任选一种最优策略行动。Mr.S 认为非左右方向（即上、左上  $45\\degree$、右 上 $45\\degree$ 三个方向）的车辙印很不美观，为了维护田野的形象，他打算租用一些轧路机，在这群许愿者到来之前夯实所有“可能留下非左右方向车辙印”的地面。“可能留下非左右方向车辙印”的地面应当是田野上的若干条线段，其中每条线段都包含在某一种最优策略的行进路线中。每台轧路机都采取满足以下三个条件的工作模式：\n\n1.从原点或任意一棵树出发。\n\n2.只能向上、左上 $45\\degree$、右上 $45\\degree$ 三个方向之一移动，并且只能在树下改变方向或停止。\n\n3.只能经过“可能留下非左右方向车辙印”的地面，但是同一块地面可以 被多台轧路机经过。\n\n现在 Mr. P 和 Mr. S 分别向你提出了一个问题：\n\n1.请给 Mr.P 指出任意一条最优路线。\n\n2.请告诉 Mr.S 最少需要租用多少台轧路机。", "inputFormat": "第 $1$ 行包含 $1$ 个正整数 $n$，表示许愿树的数量。\n\n接下来 $n$ 行，第 $i+1$ 行包含 $2$ 个整数 $x_i,y_i$，中间用单个空格隔开，表示第 $i$ 棵许愿树的坐标。", "outputFormat": "包括 $3$ 行。\n\n第 $1$ 行输出 $1$ 个整数 $m$，表示 Mr. P 最多能在多少棵树下许愿。\n\n输出文件的第 $2$ 行输出 $m$ 个整数，相邻整数之间用单个空格隔开，表示 Mr.P 应该依次在哪些树下许愿。\n\n输出文件的第 $3$ 行输出 $1$ 个整数，表示 Mr. S 最少需要租用多少台轧路机。\n", "hint": "#### 样例 1 解释\n\n最优路线共 $2$ 条，可许愿 $3$ 次：$(0,0) \\rightarrow (1,1) \\rightarrow (-1,1) \\rightarrow (-2,2)$ 或 $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$。\n\n至少 $3$ 台轧路机，路线是 $(0,0) \\rightarrow (1,1)$，$(-1,1) \\rightarrow (-2,2)$ 和 $(0,0) \\rightarrow (0,8) \\rightarrow (0,9) \\rightarrow (0,10)$。\n\n#### 样例 2 解释\n\n最优路线唯一：$(0,0) \\rightarrow (0,1) \\rightarrow (-2,1) \\rightarrow (2,1) \\rightarrow (3,2)$，可许愿 $4$ 次。其中在 $(0,1)$ 许愿后，从 $(-2,1)$ 出发沿着向右的方向能够到达的最近的未许愿过的树是 $(2,1)$，所以可以到达 $(2,1)$。\n\n而如果沿着 $(0,0) \\rightarrow (0,1) \\rightarrow (2,1) \\rightarrow (-2,1)$ 的方向前进，此时 $(-2,1)$ 右边所有树都是许愿过的，根据题目条件规定，停止前进。故无法获得最优解。\n\n$(0,0) \\rightarrow (0,1)$ 与 $(2,1) \\rightarrow (3,2)$ 会留下非左右方向车辙印，需 $2$ 台轧路机。\n\n![](https://cdn.luogu.com.cn/upload/pic/1509.png)", "locale": "zh-CN"}}}
{"pid": "P2305", "type": "P", "difficulty": 7, "samples": [["7 3 \n1 2 20 0 3 \n1 5 10 100 5 \n2 4 10 10 10 \n2 9 1 100 10 \n3 5 20 100 10 \n4 4 20 0 10 \n", "40 \n150 \n70 \n149 \n300 \n150"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2014", "线段树", "NOI", "分治", "斜率优化"], "title": "[NOI2014] 购票", "background": null, "description": "今年夏天，NOI 在 SZ 市迎来了她三十周岁的生日。来自全国 $n$ 个城市的 OIer 们都会从各地出发，到 SZ 市参加这次盛会。\n\n全国的城市构成了一棵以 SZ 市为根的有根树，每个城市与它的父亲用道路连接。为了方便起见，我们将全国的 $n$ 个城市用 $1\\sim n$ 的整数编号。其中 SZ 市的编号为 $1$。对于除 SZ 市之外的任意一个城市 $v$，我们给出了它在这棵树上的父亲城市 $f_v$  以及到父亲城市道路的长度 $s_v$。\n\n从城市 $v$ 前往 SZ 市的方法为：选择城市 $v$ 的一个祖先 $a$，支付购票的费用，乘坐交通工具到达 $a$。再选择城市 $a$ 的一个祖先 $b$，支付费用并到达 $b$。以此类推，直至到达 SZ 市。\n\n对于任意一个城市 $v$，我们会给出一个交通工具的距离限制 $l_v$。对于城市 $v$ 的祖先 A，只有当它们之间所有道路的总长度不超过 $l_v$  时，从城市 $v$ 才可以通过一次购票到达城市 A，否则不能通过一次购票到达。  \n\n对于每个城市 $v$，我们还会给出两个非负整数 $p_v,q_v$  作为票价参数。若城市 $v$ 到城市 A 所有道路的总长度为 $d$，那么从城市 $v$ 到城市 A 购买的票价为 $dp_v+q_v$。\n\n每个城市的 OIer 都希望自己到达 SZ 市时，用于购票的总资金最少。你的任务就是，告诉每个城市的 OIer 他们所花的最少资金是多少。", "inputFormat": "第一行包含两个非负整数 $n,t$，分别表示城市的个数和数据类型（其意义将在「提示与说明」中提到）。\n\n接下来 $2 \\sim n$ 行，每行描述一个除 SZ 之外的城市。其中第 $v$ 行包含五个非负整数 $f_v,s_v,p_v,q_v,l_v$，分别表示城市 $v$ 的父亲城市，它到父亲城市道路的长度，票价的两个参数和距离限制。\n\n请注意：输入不包含编号为 1 的 SZ 市，第 $2\\sim n$ 行分别描述的是城市 $2$ 到城市 $n$。", "outputFormat": "输出包含 $n-1$ 行，每行包含一个整数。\n\n其中第 $v$ 行表示从城市 $v+1$ 出发，到达 SZ 市最少的购票费用。\n\n同样请注意：输出不包含编号为 1 的 SZ 市。", "hint": "从每个城市出发到达 SZ 的路线如下（其中箭头表示一次直达）：\n\n城市 $2$：只能选择 $2 \\rightarrow 1$，花费为 $2 \\times 20 + 0 = 40$。\n\n城市 $3$：只能选择 $3 \\rightarrow 1$，花费为 $5 \\times 10 + 100 = 150$。\n\n城 市 $4$ ： 由于 $4 + 2 =6 \\leq l_4 = 10$，故可以选择 $4\\rightarrow1$。若选择 $4 \\rightarrow 1$，花费为 $(4 +2) \\times 10 + 10 = 70$ ； 若选择 $4 \\rightarrow 2 \\rightarrow 1$，则花费为 $(4\\times 10 + 10) + (2 \\times  20 + 0) =90$；因此选择 $4 \\rightarrow 1$。\n\n城市 $5$：只能选择 $5\\rightarrow 2\\rightarrow 1$，花费为 $(9 \\times 1 +100) + (2 \\times  20 + 0) = 149$；无法选择 $5 \\rightarrow 1$，因为 $l_5 =10$，而城市 $5$ 到城市 $1$ 总路程为 $9 + 2 = 11 \\gt 5$，城市 $5$ 不能直达城市 $1$。\n\n城市 $6$：若选择 $6 \\rightarrow 1$，花费为 $(5 + 5) \\times 20 + 100 = 300$；若选择 $6 \\rightarrow 3 \\rightarrow 1$，花费为 $(5 \\times 20 + 100) + (5 \\times 10 + 100) = 350$；因此选择 $6 \\rightarrow 1$。\n\n城市 $7$：选择 $7 \\rightarrow 4 \\rightarrow 1$，花费为 $(4 \\times 20 + 0) + ((4 + 2) \\times 10 + 10) = 150$；\n\n其他方案均比该方案差。\n\n ![](https://cdn.luogu.com.cn/upload/pic/2592.png) \n\n### 数据范围\n\n![](https://cdn.luogu.com.cn/upload/pic/2591.png)\n\n对于所有数据，$n\\leq 2 \\times 10^5, 0 \\leq p_v \\leq 10^6,\\ 0 \\leq q_v \\leq 10^{12},\\ 1\\leq f_v<v,\\ 0<s_v\\leq l_v \\leq 2 \\times 10^{11}$，且任意城市到 SZ 市的总路程长度不超过 $2 \\times 10^{11}$。\n\n输入的 $t$ 表示数据类型，$0\\leq t<4$，其中：\n- 当 $t=0$ 或 $2$ 时，对输入的所有城市 $v$，都有 $f_v=v-1$，即所有城市构成一个以 SZ 市为终点的链；\n- 当 $t=0$ 或 $1$ 时，对输入的所有城市 $v$，都有 $l_v=2 \\times 10^{11}$，即没有移动的距离限制，每个城市都能到达它的所有祖先；\n- 当 $t=3$ 时，数据没有特殊性质。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2014] Buying Tickets", "background": "", "description": "This summer, NOI celebrated its 30th anniversary in SZ City. OIers from $n$ cities across the country will depart from their homes to attend the event in SZ City.\n\nAll cities form a rooted tree with SZ City as the root, and each city is connected to its parent by a road. For convenience, we number the $n$ cities with integers from $1$ to $n$, where the number of SZ City is $1$. For any city $v$ other than SZ City, we are given its parent city $f_v$ in this tree and the length $s_v$ of the road to its parent.\n\nTo travel from city $v$ to SZ City, the method is as follows: choose an ancestor $a$ of city $v$, pay for a ticket, and take a vehicle to $a$. Then choose an ancestor $b$ of city $a$, pay, and reach $b$. Repeat this process until you arrive at SZ City.\n\nFor any city $v$, we are given a distance limit $l_v$ for its transportation. For an ancestor $A$ of city $v$, city $v$ can reach $A$ with a single ticket if and only if the total length of all roads along the path between them does not exceed $l_v$; otherwise, it cannot reach $A$ with a single ticket.\n\nFor each city $v$, we are also given two non-negative integers $p_v, q_v$ as fare parameters. If the total length of all roads from city $v$ to city $A$ is $d$, then the price of the ticket from city $v$ to city $A$ is $d p_v + q_v$.\n\nOIers in each city want to minimize the total amount of money spent on tickets when traveling to SZ City. Your task is to tell the OIers in each city their minimum total cost.", "inputFormat": "The first line contains two non-negative integers $n, t$, denoting the number of cities and the testdata type (its meaning is mentioned in “Hint”).\n\nThe next lines $2 \\sim n$ each describe a city other than SZ City. Specifically, line $v$ contains five non-negative integers $f_v, s_v, p_v, q_v, l_v$, denoting the parent city of city $v$, the length of the road to its parent, the two fare parameters, and the distance limit, respectively.\n\nNote: The input does not include SZ City with number $1$. Lines $2 \\sim n$ describe cities $2$ to $n$.", "outputFormat": "The output contains $n - 1$ lines, each with an integer.\n\nThe $v$-th line gives the minimum total ticket cost to reach SZ City starting from city $v + 1$.\n\nLikewise, note that SZ City with number $1$ is not included in the output.", "hint": "The routes from each city to SZ City are as follows (an arrow denotes a single direct trip):\n\nCity $2$: Can only choose $2 \\rightarrow 1$, with cost $2 \\times 20 + 0 = 40$.\n\nCity $3$: Can only choose $3 \\rightarrow 1$, with cost $5 \\times 10 + 100 = 150$.\n\nCity $4$: Since $4 + 2 = 6 \\leq l_4 = 10$, it can choose $4 \\rightarrow 1$. If choosing $4 \\rightarrow 1$, the cost is $(4 + 2) \\times 10 + 10 = 70$; if choosing $4 \\rightarrow 2 \\rightarrow 1$, the cost is $(4 \\times 10 + 10) + (2 \\times 20 + 0) = 90$. Therefore, choose $4 \\rightarrow 1$.\n\nCity $5$: Can only choose $5 \\rightarrow 2 \\rightarrow 1$, with cost $(9 \\times 1 + 100) + (2 \\times 20 + 0) = 149$. It cannot choose $5 \\rightarrow 1$ because $l_5 = 10$, while the total distance from city $5$ to city $1$ is $9 + 2 = 11 \\gt 10$, so city $5$ cannot reach city $1$ directly.\n\nCity $6$: If choosing $6 \\rightarrow 1$, the cost is $(5 + 5) \\times 20 + 100 = 300$; if choosing $6 \\rightarrow 3 \\rightarrow 1$, the cost is $(5 \\times 20 + 100) + (5 \\times 10 + 100) = 350$. Therefore, choose $6 \\rightarrow 1$.\n\nCity $7$: Choose $7 \\rightarrow 4 \\rightarrow 1$, with cost $(4 \\times 20 + 0) + ((4 + 2) \\times 10 + 10) = 150$.\n\nAll other options are worse than this plan.\n\n![](https://cdn.luogu.com.cn/upload/pic/2592.png)\n\nConstraints\n\n![](https://cdn.luogu.com.cn/upload/pic/2591.png)\n\nFor all testdata, $n \\leq 2 \\times 10^5$, $0 \\leq p_v \\leq 10^6$, $0 \\leq q_v \\leq 10^{12}$, $1 \\leq f_v < v$, $0 < s_v \\leq l_v \\leq 2 \\times 10^{11}$, and the total path length from any city to SZ City does not exceed $2 \\times 10^{11}$.\n\nThe input $t$ denotes the testdata type, $0 \\leq t < 4$, where:\n- When $t = 0$ or $2$, for all cities $v$ in the input, $f_v = v - 1$, i.e., all cities form a chain ending at SZ City.\n- When $t = 0$ or $1$, for all cities $v$ in the input, $l_v = 2 \\times 10^{11}$, i.e., there is no distance limit, and every city can reach all of its ancestors.\n- When $t = 3$, the testdata has no special property.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2014] 购票", "background": null, "description": "今年夏天，NOI 在 SZ 市迎来了她三十周岁的生日。来自全国 $n$ 个城市的 OIer 们都会从各地出发，到 SZ 市参加这次盛会。\n\n全国的城市构成了一棵以 SZ 市为根的有根树，每个城市与它的父亲用道路连接。为了方便起见，我们将全国的 $n$ 个城市用 $1\\sim n$ 的整数编号。其中 SZ 市的编号为 $1$。对于除 SZ 市之外的任意一个城市 $v$，我们给出了它在这棵树上的父亲城市 $f_v$  以及到父亲城市道路的长度 $s_v$。\n\n从城市 $v$ 前往 SZ 市的方法为：选择城市 $v$ 的一个祖先 $a$，支付购票的费用，乘坐交通工具到达 $a$。再选择城市 $a$ 的一个祖先 $b$，支付费用并到达 $b$。以此类推，直至到达 SZ 市。\n\n对于任意一个城市 $v$，我们会给出一个交通工具的距离限制 $l_v$。对于城市 $v$ 的祖先 A，只有当它们之间所有道路的总长度不超过 $l_v$  时，从城市 $v$ 才可以通过一次购票到达城市 A，否则不能通过一次购票到达。  \n\n对于每个城市 $v$，我们还会给出两个非负整数 $p_v,q_v$  作为票价参数。若城市 $v$ 到城市 A 所有道路的总长度为 $d$，那么从城市 $v$ 到城市 A 购买的票价为 $dp_v+q_v$。\n\n每个城市的 OIer 都希望自己到达 SZ 市时，用于购票的总资金最少。你的任务就是，告诉每个城市的 OIer 他们所花的最少资金是多少。", "inputFormat": "第一行包含两个非负整数 $n,t$，分别表示城市的个数和数据类型（其意义将在「提示与说明」中提到）。\n\n接下来 $2 \\sim n$ 行，每行描述一个除 SZ 之外的城市。其中第 $v$ 行包含五个非负整数 $f_v,s_v,p_v,q_v,l_v$，分别表示城市 $v$ 的父亲城市，它到父亲城市道路的长度，票价的两个参数和距离限制。\n\n请注意：输入不包含编号为 1 的 SZ 市，第 $2\\sim n$ 行分别描述的是城市 $2$ 到城市 $n$。", "outputFormat": "输出包含 $n-1$ 行，每行包含一个整数。\n\n其中第 $v$ 行表示从城市 $v+1$ 出发，到达 SZ 市最少的购票费用。\n\n同样请注意：输出不包含编号为 1 的 SZ 市。", "hint": "从每个城市出发到达 SZ 的路线如下（其中箭头表示一次直达）：\n\n城市 $2$：只能选择 $2 \\rightarrow 1$，花费为 $2 \\times 20 + 0 = 40$。\n\n城市 $3$：只能选择 $3 \\rightarrow 1$，花费为 $5 \\times 10 + 100 = 150$。\n\n城 市 $4$ ： 由于 $4 + 2 =6 \\leq l_4 = 10$，故可以选择 $4\\rightarrow1$。若选择 $4 \\rightarrow 1$，花费为 $(4 +2) \\times 10 + 10 = 70$ ； 若选择 $4 \\rightarrow 2 \\rightarrow 1$，则花费为 $(4\\times 10 + 10) + (2 \\times  20 + 0) =90$；因此选择 $4 \\rightarrow 1$。\n\n城市 $5$：只能选择 $5\\rightarrow 2\\rightarrow 1$，花费为 $(9 \\times 1 +100) + (2 \\times  20 + 0) = 149$；无法选择 $5 \\rightarrow 1$，因为 $l_5 =10$，而城市 $5$ 到城市 $1$ 总路程为 $9 + 2 = 11 \\gt 5$，城市 $5$ 不能直达城市 $1$。\n\n城市 $6$：若选择 $6 \\rightarrow 1$，花费为 $(5 + 5) \\times 20 + 100 = 300$；若选择 $6 \\rightarrow 3 \\rightarrow 1$，花费为 $(5 \\times 20 + 100) + (5 \\times 10 + 100) = 350$；因此选择 $6 \\rightarrow 1$。\n\n城市 $7$：选择 $7 \\rightarrow 4 \\rightarrow 1$，花费为 $(4 \\times 20 + 0) + ((4 + 2) \\times 10 + 10) = 150$；\n\n其他方案均比该方案差。\n\n ![](https://cdn.luogu.com.cn/upload/pic/2592.png) \n\n### 数据范围\n\n![](https://cdn.luogu.com.cn/upload/pic/2591.png)\n\n对于所有数据，$n\\leq 2 \\times 10^5, 0 \\leq p_v \\leq 10^6,\\ 0 \\leq q_v \\leq 10^{12},\\ 1\\leq f_v<v,\\ 0<s_v\\leq l_v \\leq 2 \\times 10^{11}$，且任意城市到 SZ 市的总路程长度不超过 $2 \\times 10^{11}$。\n\n输入的 $t$ 表示数据类型，$0\\leq t<4$，其中：\n- 当 $t=0$ 或 $2$ 时，对输入的所有城市 $v$，都有 $f_v=v-1$，即所有城市构成一个以 SZ 市为终点的链；\n- 当 $t=0$ 或 $1$ 时，对输入的所有城市 $v$，都有 $l_v=2 \\times 10^{11}$，即没有移动的距离限制，每个城市都能到达它的所有祖先；\n- 当 $t=3$ 时，数据没有特殊性质。", "locale": "zh-CN"}}}
{"pid": "P2306", "type": "P", "difficulty": 4, "samples": [["3 100 100\n7 10\n6 1\n1 2\n", "no\n13\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "被 yyh 虐的 mzc", "background": "mzc 与 djn 第三弹。\n", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过前两弹的都知道）。但这些都不足以挽救他被 yyh 虐的命运。于是他向你们发起了求救。\n\nmzc 要派出男家丁与 yyh 大战，但他只能承载质量为 $m$ 的男家丁，现在他想知道她们（你没有看错）的战斗力之和是否打得过 yyh。", "inputFormat": "第一行有三个数 $n,m,k$，$n$ 表示有 $n$ 个男家丁，$m$ 表示能承载 $m$ 表的质量，$k$ 表表示 yyh 表的战斗力。\n\n之后 $n$ 行，每行两个数 $a_i,b_i$，分别表示第 $i$ 个男家丁的质量和战斗力。", "outputFormat": "两行，若打得过（大于或等于），输出 `yes`；\n\n若打不过，输出 `no`。\n\n第二行输出最高战斗力。", "hint": "对于 $20\\%$ 的数据，$n \\le 1000$。\n\n对于 $100\\%$ 的数据，$n,m \\le 10^5$，$0\\le a_i,b_i \\le 10$。\n\n由于 mzc 大大十分着急，所以他只能等待一秒。", "locale": "zh-CN", "translations": {"en": {"title": "mzc bullied by yyh", "background": "The third installment of mzc and djn.", "description": "mzc is very rich (just kidding). He has $n$ male servants (those who did the previous two installments know this). But none of this can save him from being bullied by yyh, so he is asking you for help.\n\nmzc wants to send male servants to fight yyh, but the total mass he can carry is at most $m$. He wants to know whether their (yes, you read that right) total combat power can defeat yyh. Specifically, select a subset of the $n$ servants so that the total mass does not exceed $m$ and the total combat power is maximized, then determine whether this maximum is at least $k$.", "inputFormat": "The first line contains three integers $n, m, k$, where $n$ is the number of male servants, $m$ is the maximum total mass he can carry, and $k$ is yyh’s combat power.\n\nThen follow $n$ lines. Each line contains two integers $a_i, b_i$, denoting the mass and combat power of the $i$-th male servant.", "outputFormat": "Output two lines. If the maximum total combat power is greater than or equal to $k$, output `yes`; otherwise, output `no`.\n\nOn the second line, output the maximum total combat power.", "hint": "- For $20\\%$ of the testdata, $n \\le 1000$.\n- For $100\\%$ of the testdata, $n, m \\le 10^5$, $0 \\le a_i, b_i \\le 10$.\n- Time limit: 1 second.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "被 yyh 虐的 mzc", "background": "mzc 与 djn 第三弹。\n", "description": "mzc 家很有钱（开玩笑），他家有 $n$ 个男家丁（做过前两弹的都知道）。但这些都不足以挽救他被 yyh 虐的命运。于是他向你们发起了求救。\n\nmzc 要派出男家丁与 yyh 大战，但他只能承载质量为 $m$ 的男家丁，现在他想知道她们（你没有看错）的战斗力之和是否打得过 yyh。", "inputFormat": "第一行有三个数 $n,m,k$，$n$ 表示有 $n$ 个男家丁，$m$ 表示能承载 $m$ 表的质量，$k$ 表表示 yyh 表的战斗力。\n\n之后 $n$ 行，每行两个数 $a_i,b_i$，分别表示第 $i$ 个男家丁的质量和战斗力。", "outputFormat": "两行，若打得过（大于或等于），输出 `yes`；\n\n若打不过，输出 `no`。\n\n第二行输出最高战斗力。", "hint": "对于 $20\\%$ 的数据，$n \\le 1000$。\n\n对于 $100\\%$ 的数据，$n,m \\le 10^5$，$0\\le a_i,b_i \\le 10$。\n\n由于 mzc 大大十分着急，所以他只能等待一秒。", "locale": "zh-CN"}}}
{"pid": "P2307", "type": "P", "difficulty": 4, "samples": [["6 8  5 3  5 2  6 4\n5 6  0 0\n\n8 1  7 3  6 2  8 9  7 5\n7 4  7 8  7 6  0 0\n\n3 8  6 8  6 4\n5 3  5 6  5 2  0 0\n\n-1 -1\n", "1\n1\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论"], "title": "迷宫", "background": "无", "description": "小希非常喜欢玩迷宫游戏，现在她自己设计了一个迷宫游戏。在她设计的迷宫中，首先她认为所有的通道都应该是双向连通的，就是说如果有一个通道连通了房间 A 和 B，那么既可以通过它从房间 A 走到房间 B，也可以通过它从房间 B 走到房间 A，为了提高难度，小希希望任意两个房间有且仅有一条路径可以相通（除非走了回头路）。小希现在把她的设计图给你，让你帮忙判断她的设计图是否符合她的设计思路。比如下面的例子，前两个是符合条件的，但是最后一个却有两种方法从 $5$ 到达 $8$。\n", "inputFormat": "输入包含多组数据，每组数据是一个以 `0 0` 结尾的整数对列表，表示了一条通道连接的两个房间的编号。房间的编号至少为 $1$，且不超过 $100000$。每两组数据之间有一个空行。\n\n整个文件以两个 `-1` 结尾。\n", "outputFormat": "对于输入的每一组数据，输出仅包括一行。如果该迷宫符合小希的思路，那么输出 `1`，否则输出 `0`。", "hint": "无", "locale": "zh-CN", "translations": {"en": {"title": "Maze", "background": "None.", "description": "Xiaoxi loves playing maze games, and now she has designed one herself. In her design, all corridors are bidirectionally connected: if a corridor connects rooms A and B, you can go from room A to room B through it, and also from room B to room A. To increase the difficulty, Xiaoxi wants there to be exactly one path between any two rooms (unless you retrace your steps). She gives you her blueprint and asks you to determine whether it matches her idea. For example, if there are two different ways to go from $5$ to $8$, then it does not satisfy the requirement.", "inputFormat": "The input contains multiple test cases. Each test case is a list of integer pairs ending with `0 0`, where each pair indicates a corridor connecting two rooms. Room IDs are at least $1$ and at most $100000$. There is one blank line between any two test cases.\n\nThe entire input ends with `-1 -1`.", "outputFormat": "For each test case, output exactly one line. If the maze conforms to Xiaoxi’s idea, output `1`; otherwise, output `0`.", "hint": "None.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "迷宫", "background": "无", "description": "小希非常喜欢玩迷宫游戏，现在她自己设计了一个迷宫游戏。在她设计的迷宫中，首先她认为所有的通道都应该是双向连通的，就是说如果有一个通道连通了房间 A 和 B，那么既可以通过它从房间 A 走到房间 B，也可以通过它从房间 B 走到房间 A，为了提高难度，小希希望任意两个房间有且仅有一条路径可以相通（除非走了回头路）。小希现在把她的设计图给你，让你帮忙判断她的设计图是否符合她的设计思路。比如下面的例子，前两个是符合条件的，但是最后一个却有两种方法从 $5$ 到达 $8$。\n", "inputFormat": "输入包含多组数据，每组数据是一个以 `0 0` 结尾的整数对列表，表示了一条通道连接的两个房间的编号。房间的编号至少为 $1$，且不超过 $100000$。每两组数据之间有一个空行。\n\n整个文件以两个 `-1` 结尾。\n", "outputFormat": "对于输入的每一组数据，输出仅包括一行。如果该迷宫符合小希的思路，那么输出 `1`，否则输出 `0`。", "hint": "无", "locale": "zh-CN"}}}
{"pid": "P2308", "type": "P", "difficulty": 4, "samples": [["4\n4 1 2 3", "(4+((1+2)+3))\n19\n3 6 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "Special Judge", "区间 DP"], "title": "添加括号", "background": "给定一个正整数序列 $a_1,a_2,\\cdots,a_n$。\n\n不改变序列中每个元素在序列中的位置，把它们相加，并用括号记每次加法所得的和，称为中间和。\n\n例如:\n\n给出序列是 $4,1,2,3$。\n\n第一种添括号方法:\n\n$$\n((4+1)+(2+3))=((5)+(5))=(10)\n$$\n\n有三个中间和是 $5,5,10$ 它们之和为: $5+5+10=20$\n\n第二种添括号方法\n\n$$\n(4+((1+2)+3))=(4+((3)+3))=(4+(6))=(10)\n$$\n\n中间和是 $3,6,10$，它们之和为 $19$。", "description": "现在要添上 $n-1$ 对括号，加法运算依括号顺序进行，得到 $n-1$ 个中间和，求出使中间和之和最小的添括号方法。", "inputFormat": "共两行。\n\n第一行，为整数 $n$ 。\n\n第二行，为 $a_1,a_2,\\cdots,a_n$ 这 $n$ 个正整数，每个数字不超过 $100$。", "outputFormat": "输出 3 行。\n\n第一行，为添加括号的方法。\n\n第二行，为最终的中间和之和。\n\n第三行，为 $n-1$ 个中间和，按照从左到右的顺序输出。对于相互包含的括号对应的中间和，按照从里到外的顺序输出。", "hint": "**【样例解释 $1$】**\n\n参见题目背景。\n\n**【数据范围】**\n\n对于全部的数据，$1\\le n\\le 20$。", "locale": "zh-CN", "translations": {"en": {"title": "Add Parentheses", "background": "Given a sequence of positive integers $a_1, a_2, \\cdots, a_n$.\n\nWithout changing the position of each element in the sequence, add them together by inserting parentheses. Record the sum obtained at each addition step with parentheses; we call it an intermediate sum.\n\nFor example:\n\nGiven the sequence $4, 1, 2, 3$.\n\nFirst way to add parentheses:\n\n$$\n((4+1)+(2+3))=((5)+(5))=(10)\n$$\n\nThere are three intermediate sums $5, 5, 10$, and their total is: $5+5+10=20$.\n\nSecond way to add parentheses:\n\n$$\n(4+((1+2)+3))=(4+((3)+3))=(4+(6))=(10)\n$$\n\nThe intermediate sums are $3, 6, 10$, and their total is $19$.", "description": "Now we add $n-1$ pairs of parentheses. The additions are performed according to the parentheses order, producing $n-1$ intermediate sums. Find the way to add parentheses that minimizes the total of the intermediate sums.", "inputFormat": "Two lines.\n\nThe first line contains an integer $n$.\n\nThe second line contains $n$ positive integers $a_1, a_2, \\cdots, a_n$, each not exceeding $100$.", "outputFormat": "Output 3 lines.\n\nThe first line is the parenthesization.\n\nThe second line is the final total of the intermediate sums.\n\nThe third line contains the $n-1$ intermediate sums, output from inner to outer and from left to right.", "hint": "**Sample Explanation $1$**\n\nSee the Background.\n\n**Constraints**\n\nFor all testdata, $1 \\le n \\le 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "添加括号", "background": "给定一个正整数序列 $a_1,a_2,\\cdots,a_n$。\n\n不改变序列中每个元素在序列中的位置，把它们相加，并用括号记每次加法所得的和，称为中间和。\n\n例如:\n\n给出序列是 $4,1,2,3$。\n\n第一种添括号方法:\n\n$$\n((4+1)+(2+3))=((5)+(5))=(10)\n$$\n\n有三个中间和是 $5,5,10$ 它们之和为: $5+5+10=20$\n\n第二种添括号方法\n\n$$\n(4+((1+2)+3))=(4+((3)+3))=(4+(6))=(10)\n$$\n\n中间和是 $3,6,10$，它们之和为 $19$。", "description": "现在要添上 $n-1$ 对括号，加法运算依括号顺序进行，得到 $n-1$ 个中间和，求出使中间和之和最小的添括号方法。", "inputFormat": "共两行。\n\n第一行，为整数 $n$ 。\n\n第二行，为 $a_1,a_2,\\cdots,a_n$ 这 $n$ 个正整数，每个数字不超过 $100$。", "outputFormat": "输出 3 行。\n\n第一行，为添加括号的方法。\n\n第二行，为最终的中间和之和。\n\n第三行，为 $n-1$ 个中间和，按照从左到右的顺序输出。对于相互包含的括号对应的中间和，按照从里到外的顺序输出。", "hint": "**【样例解释 $1$】**\n\n参见题目背景。\n\n**【数据范围】**\n\n对于全部的数据，$1\\le n\\le 20$。", "locale": "zh-CN"}}}
{"pid": "P2309", "type": "P", "difficulty": 3, "samples": [["3\n8 -9 2\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "loidc，卖卖萌", "background": "loidc 萌萌哒。\n\n他最近一直在靠卖萌追求他的真爱——vivym，经过几轮攻势后 vivym 酱眼看就要被他所攻略。擅长数据结构的 vivym 决定利用强大的数据结构之力帮助自己逃脱。", "description": "vivym 给了 loidc 一串阿拉伯数字。他将一个数串的每个数字之和定义为该数串的数串和，vivym 要求 loidc 求出数串中有多少个子串的数串和为正数。他想了半天总是解决不好，于是他便将这一棘手的问题交给了编程能力极强的你，他希望你能在 1 s 内解决。不然 vivym 就要闪现过墙幽灵疾步跑掉了。", "inputFormat": "第一行一个数 $n$，表示数串的长度。\n\n第二行一共 $n$ 个数，它就是那串阿拉伯数字。", "outputFormat": "一个数，表示数串中有多少个子串的数串和为正数。", "hint": "- 对于 $30\\%$ 的数据：$n\\leq 10^3$；\n- 对于 $100\\%$ 的数据：$1 \\leq n\\leq 10^5$。\n\n题目读入的其他变量均介于 $-100\\ldots 100$ 之间。", "locale": "zh-CN", "translations": {"en": {"title": "loidc, acting cute", "background": "loidc is super cute.\n\nHe has been trying to win over his true love — vivym — by acting cute. After several rounds of advances, vivym-chan is about to be won over. Skilled at data structures, vivym decides to use the power of data structures to help escape.", "description": "vivym gave loidc a sequence of integers. He defines the sum of a number sequence as the sum of its elements. vivym asks loidc to find how many contiguous subarrays in the sequence have a positive sum. He thought about it for a long time but could not solve it, so he handed this tricky problem to you, who are very good at programming. He hopes you can solve it within 1 s. Otherwise, vivym will “flash over a wall and ghost-step away.”", "inputFormat": "The first line contains an integer $n$, the length of the sequence.\n\nThe second line contains $n$ integers — the sequence.", "outputFormat": "Output a single integer: the number of contiguous subarrays whose sum is positive.", "hint": "- For $30\\%$ of the testdata: $n\\leq 10^3$.\n- For $100\\%$ of the testdata: $1 \\leq n\\leq 10^5$.\n\nEach element of the sequence lies between $-100\\ldots 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "loidc，卖卖萌", "background": "loidc 萌萌哒。\n\n他最近一直在靠卖萌追求他的真爱——vivym，经过几轮攻势后 vivym 酱眼看就要被他所攻略。擅长数据结构的 vivym 决定利用强大的数据结构之力帮助自己逃脱。", "description": "vivym 给了 loidc 一串阿拉伯数字。他将一个数串的每个数字之和定义为该数串的数串和，vivym 要求 loidc 求出数串中有多少个子串的数串和为正数。他想了半天总是解决不好，于是他便将这一棘手的问题交给了编程能力极强的你，他希望你能在 1 s 内解决。不然 vivym 就要闪现过墙幽灵疾步跑掉了。", "inputFormat": "第一行一个数 $n$，表示数串的长度。\n\n第二行一共 $n$ 个数，它就是那串阿拉伯数字。", "outputFormat": "一个数，表示数串中有多少个子串的数串和为正数。", "hint": "- 对于 $30\\%$ 的数据：$n\\leq 10^3$；\n- 对于 $100\\%$ 的数据：$1 \\leq n\\leq 10^5$。\n\n题目读入的其他变量均介于 $-100\\ldots 100$ 之间。", "locale": "zh-CN"}}}
{"pid": "P2310", "type": "P", "difficulty": 3, "samples": [["5\n1 2 3 4 5\n3\n2 4 2\n1 5 1\n3 3 1\n", "3\n1\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "loidc，看看海", "background": "loidc 喜欢大海。在他放假的时候他经常一个人跑到海边独自玩耍。\n\n在浪花的冲击下，他可以忘记打代码的烦躁，真是惬意极了。\n\n虽然今天是周六，但今天可是 $2014$ 年 $11$ 月 $8$ 日，NOIP 2014 复赛 Day 1。在早晨放松之余他可不能忘掉 OI 知识。", "description": "loidc 准备带着 LOI 的队员们考完试后到海边玩耍。所以他想写一个程序让队员们了解在一段时间内海浪的情况。\n\n他的命令是这样输入的：\n\n$$\\texttt{x y k}$$\n\n这是要询问在时间 $[x,y]$ 内海浪高度第 $k$ 小的单位时刻是那个时刻。\n\n但是在他刚准备打开 Dev-pas++ 的时候，loidc 发现他的电脑坏掉了。于是一向喜欢偷懒的他就向你求助。他希望你能在 $1$ 秒内完成程序的运行。\n\n当然 loidc 会提前告诉你所有时段海浪的高度，这点你放心。至于他是如何得到的，这就不得而知了。", "inputFormat": "第一行一个整数 $n$，表示总时间段。\n\n第二行 $n$ 个数 $\\{a_n\\}$，依次表示 $n$ 个单位时刻内海浪的高度。（数据保证各个时刻海浪高度均不相同）\n\n第三行一个整数 $m$，表示有 $m$ 个询问。\n\n接下来 $m$ 行，每行 $3$ 个整数 $x,y,k$，表示一个询问。", "outputFormat": "一共 $m$ 行，是每个询问的回答。", "hint": "对于 $30\\%$ 的数据，$n,m \\le 200$。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 4000$，$1 \\le a_i \\le 10^5$ 且 $a_i$ 两两不等，$1 \\le x \\le y \\le n$，$1 \\le k \\le y-x+1$。", "locale": "zh-CN", "translations": {"en": {"title": "loidc, Look at the Sea", "background": "loidc likes the sea. When he is on vacation, he often goes to the seaside alone to play.\n\nUnder the impact of the surf, he can forget the irritation of coding. How pleasant it is.\n\nAlthough today is Saturday, it is $2014$-$11$-$8$, NOIP 2014 Final Round Day 1. While relaxing in the morning, he must not forget OI knowledge.", "description": "loidc plans to take the LOI team members to the seaside to have fun after the exam. So he wants to write a program to let them understand the wave conditions over a period of time.\n\nHis command is entered like this:\n\n$$\\texttt{x y k}$$\n\nThis asks, within time $[x, y]$, for the unit time index at which the $k$-th smallest wave height occurs.\n\nBut when he was just about to open Dev-pas++, loidc found that his computer was broken. Being lazy as always, he asks you for help. He hopes you can finish the program within $1$ second.\n\nOf course, loidc will tell you the wave height for all time indices in advance, so rest assured. As for how he obtained them, that is unknown.", "inputFormat": "- The first line contains an integer $n$, the total number of time indices.\n- The second line contains $n$ numbers $a_i$, in order, representing the wave height at each of the $n$ unit time indices. It is guaranteed that all time indices have pairwise distinct wave heights.\n- The third line contains an integer $m$, the number of queries.\n- The next $m$ lines each contain $3$ integers $x, y, k$, representing one query.", "outputFormat": "Output $m$ lines, each being the answer to one query.", "hint": "- For $30\\%$ of the testdata, $n, m \\le 200$.\n- Constraints: For $100\\%$ of the testdata, $1 \\le n, m \\le 4000$, $1 \\le a_i \\le 10^5$ and $a_i$ are pairwise distinct, $1 \\le x \\le y \\le n$, $1 \\le k \\le y - x + 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "loidc，看看海", "background": "loidc 喜欢大海。在他放假的时候他经常一个人跑到海边独自玩耍。\n\n在浪花的冲击下，他可以忘记打代码的烦躁，真是惬意极了。\n\n虽然今天是周六，但今天可是 $2014$ 年 $11$ 月 $8$ 日，NOIP 2014 复赛 Day 1。在早晨放松之余他可不能忘掉 OI 知识。", "description": "loidc 准备带着 LOI 的队员们考完试后到海边玩耍。所以他想写一个程序让队员们了解在一段时间内海浪的情况。\n\n他的命令是这样输入的：\n\n$$\\texttt{x y k}$$\n\n这是要询问在时间 $[x,y]$ 内海浪高度第 $k$ 小的单位时刻是那个时刻。\n\n但是在他刚准备打开 Dev-pas++ 的时候，loidc 发现他的电脑坏掉了。于是一向喜欢偷懒的他就向你求助。他希望你能在 $1$ 秒内完成程序的运行。\n\n当然 loidc 会提前告诉你所有时段海浪的高度，这点你放心。至于他是如何得到的，这就不得而知了。", "inputFormat": "第一行一个整数 $n$，表示总时间段。\n\n第二行 $n$ 个数 $\\{a_n\\}$，依次表示 $n$ 个单位时刻内海浪的高度。（数据保证各个时刻海浪高度均不相同）\n\n第三行一个整数 $m$，表示有 $m$ 个询问。\n\n接下来 $m$ 行，每行 $3$ 个整数 $x,y,k$，表示一个询问。", "outputFormat": "一共 $m$ 行，是每个询问的回答。", "hint": "对于 $30\\%$ 的数据，$n,m \\le 200$。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 4000$，$1 \\le a_i \\le 10^5$ 且 $a_i$ 两两不等，$1 \\le x \\le y \\le n$，$1 \\le k \\le y-x+1$。", "locale": "zh-CN"}}}
{"pid": "P2311", "type": "P", "difficulty": 3, "samples": [["5\n2 3 4 5 6\n5\n1 1\n1 2\n2 3\n3 4\n4 5\n", "1\n2\n3\n4\n5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "loidc，想想看", "background": "话说 loidc 现在正在家闲的无聊，这天 loidc 正在观看比赛，他突然很有兴趣想了解一段时间内中国队获得金牌的情况。", "description": "还有一点，loidc 有特殊能力，可以预知未来，他可以准确的猜到中国队在某一个单位时间内获得的金牌数。但是，还有但是！由于工作量太大，再加上猜金牌要费很多的体力，所以他无法准确的计算出一段时间内获得的金牌数最大的单位时间是哪个，就因为这样 loidc 很郁闷。他思索来思索去就想到了你，因为他知道你是个 OIer，所以他对你呵呵一笑就把问题交给你了，loidc 希望你能在 1 s 内得出答案。\n", "inputFormat": "第一行一个 $n$，表示有 $n$ 个时间段。\n\n接下来一行有 $n$ 个数 $a_i$，$a_i$ 表示 loidc 猜到的中国队在第 $i$ 个时间段内获得的金牌数。\n\n然后，第三行有一个数 $m$，表示 loidc 有个问题。\n\n接下来有 $m$ 行，每行有 $2$ 个数分别为 $x_i$，$y_i$，表示要询问在时间段 $[x_i,y_i]$ 内中国队获得金牌数最大的是哪个单位时间。\n\nloidc 有一个习惯，他问问题是有先后的，也就是说后一个问题总是在前一个问题之后提出的。\n\n注意对于第 $i$ 个提问和第 $i+1$ 个提问严格的有 $x_i \\le x_{i+1}$、$y_i \\le y_{i+1}$。", "outputFormat": "一共 $m$ 行，每行一个 $k_i$，表示第 $i$ 个询问的答案。", "hint": "$30\\%$：$n \\le 1000$，$m \\le 1000$。\n\n$100\\%$：$n \\le {10}^5$，$m \\le {10}^5$。\n\n其他有关输入输出均小于 `maxlongint`。\n\n数据保证 $a_i$ 没有相同的。", "locale": "zh-CN", "translations": {"en": {"title": "loidc, Think About It", "background": "It is said that loidc is currently bored at home. One day, while watching a competition, he suddenly became very interested in the number of gold medals the Chinese team wins over a period of time.", "description": "Moreover, loidc has a special ability: he can foresee the future and accurately guess how many gold medals the Chinese team will win in any single unit of time. However, the workload is huge, and predicting gold medals consumes a lot of energy, so he cannot accurately determine which unit time within a given interval attains the maximum number of gold medals. This makes loidc quite upset. After thinking for a while, he thought of you, because he knows you are an OIer. He chuckled and handed the problem over to you. loidc hopes you can produce the answer within 1 s.\n\n# Description", "inputFormat": "The first line contains an $n$, indicating there are $n$ time intervals.\n\nThe next line contains $n$ numbers $a_i$, where $a_i$ denotes the number of gold medals loidc predicts the Chinese team will win in the $i$-th time interval.\n\nThen, the third line contains a number $m$, indicating loidc has $m$ queries.\n\nThe next $m$ lines each contain two numbers $x_i$ and $y_i$, asking which unit time within the interval $[x_i, y_i]$ has the maximum number of gold medals.\n\nloidc has a habit of asking questions in order; that is, each query is asked after the previous one.\n\nNote that for the $i$-th and $(i+1)$-th queries, it strictly holds that $x_i \\le x_{i+1}$ and $y_i \\le y_{i+1}$.", "outputFormat": "Output $m$ lines. Each line contains a single $k_i$, denoting the answer to the $i$-th query.", "hint": "$30\\%$: $n \\le 1000$, $m \\le 1000$.\n\n$100\\%$: $n \\le {10}^5$, $m \\le {10}^5$.\n\nAll other input and output values are less than `maxlongint`.\n\nThe testdata guarantees $a_i$ are all distinct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "loidc，想想看", "background": "话说 loidc 现在正在家闲的无聊，这天 loidc 正在观看比赛，他突然很有兴趣想了解一段时间内中国队获得金牌的情况。", "description": "还有一点，loidc 有特殊能力，可以预知未来，他可以准确的猜到中国队在某一个单位时间内获得的金牌数。但是，还有但是！由于工作量太大，再加上猜金牌要费很多的体力，所以他无法准确的计算出一段时间内获得的金牌数最大的单位时间是哪个，就因为这样 loidc 很郁闷。他思索来思索去就想到了你，因为他知道你是个 OIer，所以他对你呵呵一笑就把问题交给你了，loidc 希望你能在 1 s 内得出答案。\n", "inputFormat": "第一行一个 $n$，表示有 $n$ 个时间段。\n\n接下来一行有 $n$ 个数 $a_i$，$a_i$ 表示 loidc 猜到的中国队在第 $i$ 个时间段内获得的金牌数。\n\n然后，第三行有一个数 $m$，表示 loidc 有个问题。\n\n接下来有 $m$ 行，每行有 $2$ 个数分别为 $x_i$，$y_i$，表示要询问在时间段 $[x_i,y_i]$ 内中国队获得金牌数最大的是哪个单位时间。\n\nloidc 有一个习惯，他问问题是有先后的，也就是说后一个问题总是在前一个问题之后提出的。\n\n注意对于第 $i$ 个提问和第 $i+1$ 个提问严格的有 $x_i \\le x_{i+1}$、$y_i \\le y_{i+1}$。", "outputFormat": "一共 $m$ 行，每行一个 $k_i$，表示第 $i$ 个询问的答案。", "hint": "$30\\%$：$n \\le 1000$，$m \\le 1000$。\n\n$100\\%$：$n \\le {10}^5$，$m \\le {10}^5$。\n\n其他有关输入输出均小于 `maxlongint`。\n\n数据保证 $a_i$ 没有相同的。", "locale": "zh-CN"}}}
{"pid": "P2312", "type": "P", "difficulty": 5, "samples": [["2 10 \n1\n-2\n1", "1\n1"], ["2 10\n2\n-3\n1", "2\n1\n2"], ["2 10\n1\n3\n2", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2014", "NOIP 提高组", "枚举", "哈希 hashing", "素数判断,质数,筛法"], "title": "[NOIP 2014 提高组] 解方程", "background": "NOIP2014 提高组 D2T3", "description": "已知多项式方程：\n\n$$a_0+a_1x+a_2x^2+\\cdots+a_nx^n=0$$ \n\n求这个方程在 $[1,m]$ 内的整数解（$n$ 和 $m$ 均为正整数）。", "inputFormat": "输入共 $n + 2$ 行。  \n\n第一行包含 $2$ 个整数 $n,m$，每两个整数之间用一个空格隔开。  \n\n接下来的 $n+1$ 行每行包含一个整数，依次为 $a_0,a_1,a_2\\ldots a_n$。", "outputFormat": "第一行输出方程在 $[1,m]$ 内的整数解的个数。  \n\n接下来每行一个整数，按照从小到大的顺序依次输出方程在 $[1,m]$ 内的一个整数解。", "hint": "对于 $30\\%$ 的数据：$0<n\\le 2,|a_i|\\le 100,a_n≠0,m<100$。  \n\n对于 $50\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{100},a_n≠0,m<100$。  \n\n对于 $70\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^4$。  \n\n对于 $100\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Senior] Solve the Equation", "background": "NOIP 2014 Senior D2T3.", "description": "Given the polynomial equation:\n\n$$a_0+a_1x+a_2x^2+\\cdots+a_nx^n=0$$\n\nFind all integer solutions of this equation in $[1,m]$ (both $n$ and $m$ are positive integers).", "inputFormat": "The input contains $n + 2$ lines.  \nThe first line contains two integers $n, m$, separated by a single space.  \nEach of the next $n + 1$ lines contains one integer, namely $a_0, a_1, a_2, \\ldots, a_n$ in order.", "outputFormat": "On the first line, output the number of integer solutions in $[1,m]$.  \nThen output each integer solution in $[1,m]$ in increasing order, one per line.", "hint": "For $30\\%$ of the testdata: $0<n\\le 2,|a_i|\\le 100,a_n≠0,m<100$。  \nFor $50\\%$ of the testdata: $0<n\\le 100,|a_i|\\le 10^{100},a_n≠0,m<100$。  \nFor $70\\%$ of the testdata: $0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^4$。  \nFor $100\\%$ of the testdata: $0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^6$。\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 提高组] 解方程", "background": "NOIP2014 提高组 D2T3", "description": "已知多项式方程：\n\n$$a_0+a_1x+a_2x^2+\\cdots+a_nx^n=0$$ \n\n求这个方程在 $[1,m]$ 内的整数解（$n$ 和 $m$ 均为正整数）。", "inputFormat": "输入共 $n + 2$ 行。  \n\n第一行包含 $2$ 个整数 $n,m$，每两个整数之间用一个空格隔开。  \n\n接下来的 $n+1$ 行每行包含一个整数，依次为 $a_0,a_1,a_2\\ldots a_n$。", "outputFormat": "第一行输出方程在 $[1,m]$ 内的整数解的个数。  \n\n接下来每行一个整数，按照从小到大的顺序依次输出方程在 $[1,m]$ 内的一个整数解。", "hint": "对于 $30\\%$ 的数据：$0<n\\le 2,|a_i|\\le 100,a_n≠0,m<100$。  \n\n对于 $50\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{100},a_n≠0,m<100$。  \n\n对于 $70\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^4$。  \n\n对于 $100\\%$ 的数据：$0<n\\le 100,|a_i|\\le 10^{10000},a_n≠0,m<10^6$。", "locale": "zh-CN"}}}
