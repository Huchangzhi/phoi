{"pid": "P6689", "type": "P", "difficulty": 6, "samples": [["2 2", "499122177"], ["4 2 ", "873463811"], ["1919 810", "488346634"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "洛谷原创", "洛谷月赛"], "title": "序列", "background": "", "description": "小 C 想出关于括号序列的一道题，但是他不怎么会造数据，所以他采取了随机的方式。\n\n小 C 钦定了括号序列 $S$ 的长度 $N$。$S$ 初始时全为 `(`。\n\n他初始设定了一个参数 $K$，并按照如下流程随机，直到 $K=0$：\n\n1. 在 $[1,N]$ 的范围内**均匀随机**一个整数，把 $S$ 这一位上的括号取反（左括号变右括号，右括号变左括号）。\n2. 如果本次操作使得 `(` 的数量减少了，使 $K$ 的值减 $1$。\n\n现在数据造好了，题也就出完了。\n\n小 C 想请你求出，在经过上述操作后，$S$ 中**最长合法括号子序列**（不要求连续）在模 $998244353$ 意义下期望有多长。\n", "inputFormat": "输入第一行，为两个正整数 $N,K$，含义题面已给出。", "outputFormat": "输出共一行，一个非负整数，表示你所求得的答案对 $998244353$ 取模的结果。", "hint": "**样例解释1**\n\n最终括号序列只有 $3$ 种，`))`，`()`，`)(`。其对应的概率分别为 $\\frac{1}{2}$，$\\frac{1}{4}$，$\\frac{1}{4}$。\n\n它们对应的最长合法括号子序列长度分别为 $0,2,0$。所以最终答案为 $\\frac{1}{2}$，也即 $499122177$。\n\n**数据规模：**\n\n对于前 $5\\%$ 的数据，$N=1$；  \n另有 $5\\%$ 的数据，$N=2$；  \n另有 $5\\%$ 的数据，$N\\le 7$，$K\\le 5$；  \n另有 $15\\%$ 的数据，$N\\le 15$，$K\\le 500$；  \n另有 $ 15\\%$ 的数据，$N\\le 50$，$K\\le 50$；  \n另有 $ 15\\%$ 的数据，$N\\le 500$，$K\\le 100$；  \n对于全部的数据，保证 $1\\le N,K\\le 5000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "序列", "background": "", "description": "小 C 想出关于括号序列的一道题，但是他不怎么会造数据，所以他采取了随机的方式。\n\n小 C 钦定了括号序列 $S$ 的长度 $N$。$S$ 初始时全为 `(`。\n\n他初始设定了一个参数 $K$，并按照如下流程随机，直到 $K=0$：\n\n1. 在 $[1,N]$ 的范围内**均匀随机**一个整数，把 $S$ 这一位上的括号取反（左括号变右括号，右括号变左括号）。\n2. 如果本次操作使得 `(` 的数量减少了，使 $K$ 的值减 $1$。\n\n现在数据造好了，题也就出完了。\n\n小 C 想请你求出，在经过上述操作后，$S$ 中**最长合法括号子序列**（不要求连续）在模 $998244353$ 意义下期望有多长。\n", "inputFormat": "输入第一行，为两个正整数 $N,K$，含义题面已给出。", "outputFormat": "输出共一行，一个非负整数，表示你所求得的答案对 $998244353$ 取模的结果。", "hint": "**样例解释1**\n\n最终括号序列只有 $3$ 种，`))`，`()`，`)(`。其对应的概率分别为 $\\frac{1}{2}$，$\\frac{1}{4}$，$\\frac{1}{4}$。\n\n它们对应的最长合法括号子序列长度分别为 $0,2,0$。所以最终答案为 $\\frac{1}{2}$，也即 $499122177$。\n\n**数据规模：**\n\n对于前 $5\\%$ 的数据，$N=1$；  \n另有 $5\\%$ 的数据，$N=2$；  \n另有 $5\\%$ 的数据，$N\\le 7$，$K\\le 5$；  \n另有 $15\\%$ 的数据，$N\\le 15$，$K\\le 500$；  \n另有 $ 15\\%$ 的数据，$N\\le 50$，$K\\le 50$；  \n另有 $ 15\\%$ 的数据，$N\\le 500$，$K\\le 100$；  \n对于全部的数据，保证 $1\\le N,K\\le 5000$。", "locale": "zh-CN"}}}
{"pid": "P6690", "type": "P", "difficulty": 7, "samples": [["1 997 603 648\n200 61\n", "1\n1 140787\n"], ["1 953 712 307\n534 750\n", "-1\n"], ["3 7 6 5\n3 4\n5 6\n4 6\n", "2\n2 5\n1 20\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2020", "原根", "洛谷原创", "Special Judge", "O2优化", "扩展欧几里德算法", "构造", "洛谷月赛", "大步小步算法 BSGS"], "title": "一次函数", "background": "", "description": "给定 $n$ 个一次函数 $f_i(x) = a_ix + b_i$，其中 $x$ 为形式幂级数的占位符。\n\n从这 $n$ 个中选出 $k$ 个 $g_i(x)$ （$1\\leq i \\leq k$），定义集合 $H$ 为 $g_i$ 的若干次幂的乘积模 $x^2$ 的值所构成的集合。即：\n\n$$H=\\left\\{\\prod_{i=1}^k g_i(x)^j\\bmod x^2\\middle|0 \\leq a, b < p \\right\\}$$\n\n其中 $j$ 是任意非负整数且对于每个 $i$ 可以有不同的 $j$。\n\n需要注意的是，$0\\cdot x+1$ 始终在集合 $H$ 中（而非 $0 \\cdot x + 0$），即使 $k = 0$ 也是如此。\n\n给定 $A, B$，求出所有满足 $Ax+B\\in H$ 的集合 $H$ 的 $k$ 的最小值。\n\n若不存在 $H$ 使得 $Ax+B\\in H$，输出 `-1`。\n\n所有运算均在模 $p$ 意义下进行。", "inputFormat": "第一行四个整数 $n, p, A, B$。\n\n接下来 $n$ 行，每行两个整数 $a_i, b_i$。", "outputFormat": "第一行一个整数 $k$，表示答案。\n\n若存在方案，接下来 $k$ 行，每行两个整数 $a, b$，需满足\n$$\\left(\\prod f_a(x)^b\\right)\\bmod x^2=Ax + B$$\n\n$a$ 的顺序可任意。", "hint": "**另有两组大样例与 checker，下载地址见附件。**\n\n要测试你某个测试点的答案，你需要在你本题目录下的命令行中执行：\n\n``<checker> <input‐file> <output‐file> <answer‐file> [<report‐file>]``\n\n其中：\n\n* ``<checker>`` 表示校验器可执行文件；\n* ``<input‐file>`` 表示该测试点的输入文件，如 ``func1.in``；\n* ``<output‐file>`` 表示该测试点你的答案，如 ``func1.out``；\n* ``<answer‐file>`` 表示该测试点的答案文件（只需要提供输出的第一行），如 ``func1.ans``；\n* ``<report‐file>`` 为可选参数，如果没有给定该参数，校验器将输出至终端；否则将输出至该文件，如 ``report1.txt``。\n\n对于所有数据，$2\\leq p\\leq 10^9$，保证 $p$ 为质数，$1\\leq n \\leq 5 \\times 10^3$，$0\\leq a_i, A < p$，$1\\leq b_i, B < p$。\n\n详细的数据限制及约定如下（留空表示和上述所有数据的约定相同）：\n\n| 子任务编号 | 分值 | $n$ | $p$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $=1$ | $\\leq 1000$ |  |\n| $2$ | $5$ | $\\leq 3$ | $=7$ |  |\n| $3$ | $15$ | $\\leq 100$ | $=31$ |  |\n| $4$ | $20$ | |  | $A=B=1$ |\n| $5$ | $25$ | $\\leq 20$ |  |  |\n| $6$ | $15$ | $\\leq 500$ |  |  |\n| $7$ | $15$ | |  |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "一次函数", "background": "", "description": "给定 $n$ 个一次函数 $f_i(x) = a_ix + b_i$，其中 $x$ 为形式幂级数的占位符。\n\n从这 $n$ 个中选出 $k$ 个 $g_i(x)$ （$1\\leq i \\leq k$），定义集合 $H$ 为 $g_i$ 的若干次幂的乘积模 $x^2$ 的值所构成的集合。即：\n\n$$H=\\left\\{\\prod_{i=1}^k g_i(x)^j\\bmod x^2\\middle|0 \\leq a, b < p \\right\\}$$\n\n其中 $j$ 是任意非负整数且对于每个 $i$ 可以有不同的 $j$。\n\n需要注意的是，$0\\cdot x+1$ 始终在集合 $H$ 中（而非 $0 \\cdot x + 0$），即使 $k = 0$ 也是如此。\n\n给定 $A, B$，求出所有满足 $Ax+B\\in H$ 的集合 $H$ 的 $k$ 的最小值。\n\n若不存在 $H$ 使得 $Ax+B\\in H$，输出 `-1`。\n\n所有运算均在模 $p$ 意义下进行。", "inputFormat": "第一行四个整数 $n, p, A, B$。\n\n接下来 $n$ 行，每行两个整数 $a_i, b_i$。", "outputFormat": "第一行一个整数 $k$，表示答案。\n\n若存在方案，接下来 $k$ 行，每行两个整数 $a, b$，需满足\n$$\\left(\\prod f_a(x)^b\\right)\\bmod x^2=Ax + B$$\n\n$a$ 的顺序可任意。", "hint": "**另有两组大样例与 checker，下载地址见附件。**\n\n要测试你某个测试点的答案，你需要在你本题目录下的命令行中执行：\n\n``<checker> <input‐file> <output‐file> <answer‐file> [<report‐file>]``\n\n其中：\n\n* ``<checker>`` 表示校验器可执行文件；\n* ``<input‐file>`` 表示该测试点的输入文件，如 ``func1.in``；\n* ``<output‐file>`` 表示该测试点你的答案，如 ``func1.out``；\n* ``<answer‐file>`` 表示该测试点的答案文件（只需要提供输出的第一行），如 ``func1.ans``；\n* ``<report‐file>`` 为可选参数，如果没有给定该参数，校验器将输出至终端；否则将输出至该文件，如 ``report1.txt``。\n\n对于所有数据，$2\\leq p\\leq 10^9$，保证 $p$ 为质数，$1\\leq n \\leq 5 \\times 10^3$，$0\\leq a_i, A < p$，$1\\leq b_i, B < p$。\n\n详细的数据限制及约定如下（留空表示和上述所有数据的约定相同）：\n\n| 子任务编号 | 分值 | $n$ | $p$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $=1$ | $\\leq 1000$ |  |\n| $2$ | $5$ | $\\leq 3$ | $=7$ |  |\n| $3$ | $15$ | $\\leq 100$ | $=31$ |  |\n| $4$ | $20$ | |  | $A=B=1$ |\n| $5$ | $25$ | $\\leq 20$ |  |  |\n| $6$ | $15$ | $\\leq 500$ |  |  |\n| $7$ | $15$ | |  |  |", "locale": "zh-CN"}}}
{"pid": "P6691", "type": "P", "difficulty": 3, "samples": [["4\n2 1\n4 0\n1 1\n2 0", "2\n3\n1"], ["10\n4 1\n7 0\n2 0\n3 1\n7 1\n5 0\n9 1\n10 1\n8 0\n1 1", "No answer"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2020", "并查集", "O2优化", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "选择题", "background": "小 L 喜欢逻辑推理。\n\n一天，他在一本由英国哲士沃·协德编写的《我也不知道为什么要叫这个名字的一本有关逻辑学的书》中翻到了一道奇特的问题，但他并不会做。他知道你善于用程序解决问题，于是决定让你来帮助他完成这些问题。", "description": "这是一道有 $n$ 个选项的选择题，每个选项的内容都很独特。第 $i$ 个选项的内容的形式如下：\n\n+ 第 $a_i$ 个选项是正确/错误的\n\n小 L 认为这种题目的答案不一定是唯一的，所以他想问题这道题有多少种合法的答案（可以全部正确或全部错误）。他还想问你这么多答案中，正确选项最多和最少的答案分别有多少个正确选项。\n\n当然，如果这道题不存在合法的答案，你可以直接回答小 L `No answer`。", "inputFormat": "第一行有一个正整数 $n$，表示选项个数。\n\n接下来 $n$ 行，每行有两个整数 $a_i,opt_i$，描述一个选项。其中当 $opt_i=1$ 时，表示这个选项的内容为 **第 $a_i$ 个选项是正确的**；当 $opt_i=0$ 时，表示这个选项的内容为 **第 $a_i$ 个选项是错误的**。", "outputFormat": "如果没有答案满足这道选择题，输出`No answer`。\n\n否则输出三行，每行一个正整数，分别为合法答案数及正确选项最多和最少的答案分别有多少个正确选项。其中合法答案数要对 $998244353$ 取模。", "hint": "对于样例一，一共有下面 $2$ 种正确答案：\n\n+ 第 $1,2,3$ 个选项是正确的。\n+ 第 $4$ 个选项是正确的。\n\n其中正确选项最多的答案有 $3$ 个选项正确，正确选项最少的答案有 $1$ 个选项正确。\n\n### 数据范围\n对于 $10\\%$ 的数据，$n\\leq 10$。  \n对于 $30\\%$ 的数据，$n\\leq 100$。  \n对于 $60\\%$ 的数据，$n\\leq 10^3$。  \n对于 $100\\%$ 的数据，$n\\leq 10^6,1\\leq a_i\\leq n,i\\neq a_i,opt_i\\in\\{0,1\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "选择题", "background": "小 L 喜欢逻辑推理。\n\n一天，他在一本由英国哲士沃·协德编写的《我也不知道为什么要叫这个名字的一本有关逻辑学的书》中翻到了一道奇特的问题，但他并不会做。他知道你善于用程序解决问题，于是决定让你来帮助他完成这些问题。", "description": "这是一道有 $n$ 个选项的选择题，每个选项的内容都很独特。第 $i$ 个选项的内容的形式如下：\n\n+ 第 $a_i$ 个选项是正确/错误的\n\n小 L 认为这种题目的答案不一定是唯一的，所以他想问题这道题有多少种合法的答案（可以全部正确或全部错误）。他还想问你这么多答案中，正确选项最多和最少的答案分别有多少个正确选项。\n\n当然，如果这道题不存在合法的答案，你可以直接回答小 L `No answer`。", "inputFormat": "第一行有一个正整数 $n$，表示选项个数。\n\n接下来 $n$ 行，每行有两个整数 $a_i,opt_i$，描述一个选项。其中当 $opt_i=1$ 时，表示这个选项的内容为 **第 $a_i$ 个选项是正确的**；当 $opt_i=0$ 时，表示这个选项的内容为 **第 $a_i$ 个选项是错误的**。", "outputFormat": "如果没有答案满足这道选择题，输出`No answer`。\n\n否则输出三行，每行一个正整数，分别为合法答案数及正确选项最多和最少的答案分别有多少个正确选项。其中合法答案数要对 $998244353$ 取模。", "hint": "对于样例一，一共有下面 $2$ 种正确答案：\n\n+ 第 $1,2,3$ 个选项是正确的。\n+ 第 $4$ 个选项是正确的。\n\n其中正确选项最多的答案有 $3$ 个选项正确，正确选项最少的答案有 $1$ 个选项正确。\n\n### 数据范围\n对于 $10\\%$ 的数据，$n\\leq 10$。  \n对于 $30\\%$ 的数据，$n\\leq 100$。  \n对于 $60\\%$ 的数据，$n\\leq 10^3$。  \n对于 $100\\%$ 的数据，$n\\leq 10^6,1\\leq a_i\\leq n,i\\neq a_i,opt_i\\in\\{0,1\\}$。", "locale": "zh-CN"}}}
{"pid": "P6692", "type": "P", "difficulty": 4, "samples": [["3 3 2\n2 1\n3 3\n", "42"], ["9 8 8\n3 2\n4 6\n7 3\n9 5\n3 7\n2 2\n1 6\n6 4\n", "11552"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2020", "O2优化", "容斥原理"], "title": "出生点", "background": "小 L、小 W 和小 H 在一起van♂游戏。\n\n~~由于小 L 太菜了所以导致他一直在看着小 W 和小 H 打游戏。~~", "description": "这款游戏的地图可以抽象成一张有 $n$ 行 $m$ 列的网格图，网格图上有 $k$ 个障碍点，相邻两点间边长为 $1$。游戏开始时~~小 L~~、小 W 和小 H 会**各自**随机出生在一个点。当然，他们**不会出生在障碍点**。\n\n~~经常开局死的~~小 L 看着小 W 和小 H 每次在地图上汇合时经过的路径，很想知道他们每次出生后两个人之间的期望距离。（这里的距离指两点间[曼哈顿距离](https://www.luogu.com.cn/blog/xuxing/Distance-Algorithm)，即 $\\left|x_1-x_2\\right|+\\left|y_1-y_2\\right|$）\n\n由于小 L 可以非常容易算出有多少种出生点安排方案，所以你实际上**只需要告诉他所有情况中他们两人距离之和**。\n\n**注意**：小 W 出生在点 $A$，小 H 出生在点 $B$，跟小 W 出生在点 $B$，小 H 出生在点 $A$，这两种情况**视作同一种情况**。", "inputFormat": "第一行有三个整数 $n,m,k$，分别表示地图行数、列数以及障碍物点数。\n\n接下来有 $k$ 行，第 $i$ 行有两个正整数 $x_i,y_i$，表示第 $i$ 个障碍物的位置。", "outputFormat": "一个整数，表示**所有情况中小 W 和小 H 两人出生点距离之和**。\n\n由于小 L 十分无聊，所以他让你将答案对 $10^9+7$ 取模。", "hint": "对于样例一，地图样式如下（其中蓝点为障碍点，红点为可能的出生点）：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/3bq78rx7.png)\n\n+ 出生点为 $(1,1)$ 和 $(1,1)$，距离为 $0$。\n+ 出生点为 $(1,1)$ 和 $(1,2)$，距离为 $1$。\n+ 出生点为 $(1,1)$ 和 $(1,3)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(2,2)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(2,3)$，距离为 $3$。\n+ 出生点为 $(1,1)$ 和 $(3,1)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(3,2)$，距离为 $3$。\n+ 出生点为 $(1,2)$ 和 $(1,2)$，距离为 $0$。\n+ 出生点为 $(1,2)$ 和 $(1,3)$，距离为 $1$。\n+ 出生点为 $(1,2)$ 和 $(2,2)$，距离为 $1$。\n+ 出生点为 $(1,2)$ 和 $(2,3)$，距离为 $2$。\n+ 出生点为 $(1,2)$ 和 $(3,1)$，距离为 $3$。\n+ 出生点为 $(1,2)$ 和 $(3,2)$，距离为 $2$。\n+ 出生点为 $(1,3)$ 和 $(1,3)$，距离为 $0$。\n+ 出生点为 $(1,3)$ 和 $(2,2)$，距离为 $2$。\n+ 出生点为 $(1,3)$ 和 $(2,3)$，距离为 $1$。\n+ 出生点为 $(1,3)$ 和 $(3,1)$，距离为 $4$。\n+ 出生点为 $(1,3)$ 和 $(3,2)$，距离为 $3$。\n+ 出生点为 $(2,2)$ 和 $(2,2)$，距离为 $0$。\n+ 出生点为 $(2,2)$ 和 $(2,3)$，距离为 $1$。\n+ 出生点为 $(2,2)$ 和 $(3,1)$，距离为 $2$。\n+ 出生点为 $(2,2)$ 和 $(3,2)$，距离为 $1$。\n+ 出生点为 $(2,3)$ 和 $(2,3)$，距离为 $0$。\n+ 出生点为 $(2,3)$ 和 $(3,1)$，距离为 $3$。\n+ 出生点为 $(2,3)$ 和 $(3,2)$，距离为 $2$。\n+ 出生点为 $(3,1)$ 和 $(3,1)$，距离为 $0$。\n+ 出生点为 $(3,1)$ 和 $(3,2)$，距离为 $1$。\n+ 出生点为 $(3,2)$ 和 $(3,2)$，距离为 $0$。\n\n总和为 $42$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n+ Subtask 1( $10\\%$ )：$n,m\\leq 80$。\n+ Subtask 2( $20\\%$ )：$n,m\\leq 5000$。\n+ Subtask 3( $15\\%$ )：$k=0$。\n+ Subtask 4( $15\\%$ )：$m=1$。\n+ Subtask 5( $40\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^9,1\\leq x_i\\leq n,1\\leq y_i\\leq m,0\\leq k\\leq 5\\times 10^5,k<n\\times m$，**保证所有障碍点各不相同**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "出生点", "background": "小 L、小 W 和小 H 在一起van♂游戏。\n\n~~由于小 L 太菜了所以导致他一直在看着小 W 和小 H 打游戏。~~", "description": "这款游戏的地图可以抽象成一张有 $n$ 行 $m$ 列的网格图，网格图上有 $k$ 个障碍点，相邻两点间边长为 $1$。游戏开始时~~小 L~~、小 W 和小 H 会**各自**随机出生在一个点。当然，他们**不会出生在障碍点**。\n\n~~经常开局死的~~小 L 看着小 W 和小 H 每次在地图上汇合时经过的路径，很想知道他们每次出生后两个人之间的期望距离。（这里的距离指两点间[曼哈顿距离](https://www.luogu.com.cn/blog/xuxing/Distance-Algorithm)，即 $\\left|x_1-x_2\\right|+\\left|y_1-y_2\\right|$）\n\n由于小 L 可以非常容易算出有多少种出生点安排方案，所以你实际上**只需要告诉他所有情况中他们两人距离之和**。\n\n**注意**：小 W 出生在点 $A$，小 H 出生在点 $B$，跟小 W 出生在点 $B$，小 H 出生在点 $A$，这两种情况**视作同一种情况**。", "inputFormat": "第一行有三个整数 $n,m,k$，分别表示地图行数、列数以及障碍物点数。\n\n接下来有 $k$ 行，第 $i$ 行有两个正整数 $x_i,y_i$，表示第 $i$ 个障碍物的位置。", "outputFormat": "一个整数，表示**所有情况中小 W 和小 H 两人出生点距离之和**。\n\n由于小 L 十分无聊，所以他让你将答案对 $10^9+7$ 取模。", "hint": "对于样例一，地图样式如下（其中蓝点为障碍点，红点为可能的出生点）：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/3bq78rx7.png)\n\n+ 出生点为 $(1,1)$ 和 $(1,1)$，距离为 $0$。\n+ 出生点为 $(1,1)$ 和 $(1,2)$，距离为 $1$。\n+ 出生点为 $(1,1)$ 和 $(1,3)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(2,2)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(2,3)$，距离为 $3$。\n+ 出生点为 $(1,1)$ 和 $(3,1)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(3,2)$，距离为 $3$。\n+ 出生点为 $(1,2)$ 和 $(1,2)$，距离为 $0$。\n+ 出生点为 $(1,2)$ 和 $(1,3)$，距离为 $1$。\n+ 出生点为 $(1,2)$ 和 $(2,2)$，距离为 $1$。\n+ 出生点为 $(1,2)$ 和 $(2,3)$，距离为 $2$。\n+ 出生点为 $(1,2)$ 和 $(3,1)$，距离为 $3$。\n+ 出生点为 $(1,2)$ 和 $(3,2)$，距离为 $2$。\n+ 出生点为 $(1,3)$ 和 $(1,3)$，距离为 $0$。\n+ 出生点为 $(1,3)$ 和 $(2,2)$，距离为 $2$。\n+ 出生点为 $(1,3)$ 和 $(2,3)$，距离为 $1$。\n+ 出生点为 $(1,3)$ 和 $(3,1)$，距离为 $4$。\n+ 出生点为 $(1,3)$ 和 $(3,2)$，距离为 $3$。\n+ 出生点为 $(2,2)$ 和 $(2,2)$，距离为 $0$。\n+ 出生点为 $(2,2)$ 和 $(2,3)$，距离为 $1$。\n+ 出生点为 $(2,2)$ 和 $(3,1)$，距离为 $2$。\n+ 出生点为 $(2,2)$ 和 $(3,2)$，距离为 $1$。\n+ 出生点为 $(2,3)$ 和 $(2,3)$，距离为 $0$。\n+ 出生点为 $(2,3)$ 和 $(3,1)$，距离为 $3$。\n+ 出生点为 $(2,3)$ 和 $(3,2)$，距离为 $2$。\n+ 出生点为 $(3,1)$ 和 $(3,1)$，距离为 $0$。\n+ 出生点为 $(3,1)$ 和 $(3,2)$，距离为 $1$。\n+ 出生点为 $(3,2)$ 和 $(3,2)$，距离为 $0$。\n\n总和为 $42$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n+ Subtask 1( $10\\%$ )：$n,m\\leq 80$。\n+ Subtask 2( $20\\%$ )：$n,m\\leq 5000$。\n+ Subtask 3( $15\\%$ )：$k=0$。\n+ Subtask 4( $15\\%$ )：$m=1$。\n+ Subtask 5( $40\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^9,1\\leq x_i\\leq n,1\\leq y_i\\leq m,0\\leq k\\leq 5\\times 10^5,k<n\\times m$，**保证所有障碍点各不相同**。", "locale": "zh-CN"}}}
{"pid": "P6693", "type": "P", "difficulty": 5, "samples": [["3 4\nabc\nbacb\n", "74"], ["7 9\nadcbbde\nbdaegbcba\n", "2128"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2020", "O2优化", "前缀和"], "title": "谷歌翻(sheng)译(cao)机", "background": "小 L 最近沉迷用谷歌生草机生草一些奇奇怪怪的东西。\n\n小 L 在生草出了各式各样的作品后便开始考虑这样一个问题。", "description": "**注：为了方便描述，下文所有字符串起始位置都为 $1$，即都从 $1$ 开始标号。**\n\n小 L 将每次生草前的原文和生草后的结果看作两个**仅由小写字母组成**的两个字符串 $A$ 和 $B$。\n\n我们按如下方式定义「分割数列」和「分割串」：\n\n- 对于一个长度为 $n$ 的字符串，定义它的一条「分割数列」为：存在长度为 $k+2$ 的数列 $p$，使得 $0=p_0<p_1<p_2<...<p_k<p_{k+1}=n+1$。对于一条「分割数列」，定义其「分割串」为 $p_i+1$ 到 $p_{i+1}-1$ 之间字符构成的子串（$i \\in[0,k]$，可以为空串）。显然，对于一条长度为 $k+2$ 的分割数列，一共有 $k+1$ 个分割串。\n\n- 对于同一个字符串，两条分割数列（$p$ 和 $q$）不同**当且仅当两条数列长度不同（$k_1\\neq k_2$）**，或**存在 $i$ 使得 $p_i\\neq q_i$**。\n\n不同人对于同样的原文和结果，他们的理解方式都是不同的。我们按如下方式定义一种理解方式：\n\n- 对于字符串 $A$ 和 $B$，我们为这两个字符串各找一条分割数列（$p$ 和 $q$），这两个分割数列满足以下要求：\n1. 两个分割数列长度相等（$k_1=k_2$）。\n1. 对于任意 $i$，有 $A[p_i]=B[q_i]$，即 **$A$ 第 $p_i$ 个位置的字符与 $B$ 第 $q_i$ 个位置的字符相同**。\n\n- 定义这种理解方式的「生草程度」为**此时两个字符串的所有分割串长度的平方和**，即 $\\sum\\limits_{i=0}^{k_1}(p_{i+1}-p_i-1)^2+\\sum\\limits_{i=0}^{k_2}(q_{i+1}-q_i-1)^2$。\n\n- 两种理解方式不同**当且仅当**两种理解方式的 $p$ 不同，或两种理解方式的 $q$ 不同。\n\n小 L 想要知道所有理解方式的生草程度之和的结果。由于他不喜欢 $10^9+7$ 这个数，他不希望你告诉他的结果会是这个数，所以你要将结果对 $10^9+7$ 取模。", "inputFormat": "第一行有两个正整数 $n,m$ 分别为 $A$ 和 $B$ 的长度。\n\n接下来一行有一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n接下来一行有一个长度为 $m$ 的字符串，表示字符串 $B$。", "outputFormat": "一行，一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "对于样例一，一共有以下理解方式：\n+ $p=\\{0,4\\},q=\\{0,5\\}$，生草程度为 $25$。\n+ $p=\\{0,1,4\\},q=\\{0,2,5\\}$，生草程度为 $9$。\n+ $p=\\{0,2,4\\},q=\\{0,1,5\\}$，生草程度为 $11$。\n+ $p=\\{0,2,4\\},q=\\{0,4,5\\}$，生草程度为 $11$。\n+ $p=\\{0,3,4\\},q=\\{0,3,5\\}$，生草程度为 $9$。\n+ $p=\\{0,1,2,4\\},q=\\{0,2,4,5\\}$，生草程度为 $3$。\n+ $p=\\{0,1,3,4\\},q=\\{0,2,3,5\\}$，生草程度为 $3$。\n+ $p=\\{0,2,3,4\\},q=\\{0,1,3,5\\}$，生草程度为 $3$。\n\n总生草程度为 $74$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1( $20\\%$ )：$n,m\\leq 50$。\n- Subtask 2( $30\\%$ )：$n,m\\leq 200$。\n- Subtask 3( $50\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$n,m\\leq 3000$，$A$ 和 $B$ **仅包含小写字母**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "谷歌翻(sheng)译(cao)机", "background": "小 L 最近沉迷用谷歌生草机生草一些奇奇怪怪的东西。\n\n小 L 在生草出了各式各样的作品后便开始考虑这样一个问题。", "description": "**注：为了方便描述，下文所有字符串起始位置都为 $1$，即都从 $1$ 开始标号。**\n\n小 L 将每次生草前的原文和生草后的结果看作两个**仅由小写字母组成**的两个字符串 $A$ 和 $B$。\n\n我们按如下方式定义「分割数列」和「分割串」：\n\n- 对于一个长度为 $n$ 的字符串，定义它的一条「分割数列」为：存在长度为 $k+2$ 的数列 $p$，使得 $0=p_0<p_1<p_2<...<p_k<p_{k+1}=n+1$。对于一条「分割数列」，定义其「分割串」为 $p_i+1$ 到 $p_{i+1}-1$ 之间字符构成的子串（$i \\in[0,k]$，可以为空串）。显然，对于一条长度为 $k+2$ 的分割数列，一共有 $k+1$ 个分割串。\n\n- 对于同一个字符串，两条分割数列（$p$ 和 $q$）不同**当且仅当两条数列长度不同（$k_1\\neq k_2$）**，或**存在 $i$ 使得 $p_i\\neq q_i$**。\n\n不同人对于同样的原文和结果，他们的理解方式都是不同的。我们按如下方式定义一种理解方式：\n\n- 对于字符串 $A$ 和 $B$，我们为这两个字符串各找一条分割数列（$p$ 和 $q$），这两个分割数列满足以下要求：\n1. 两个分割数列长度相等（$k_1=k_2$）。\n1. 对于任意 $i$，有 $A[p_i]=B[q_i]$，即 **$A$ 第 $p_i$ 个位置的字符与 $B$ 第 $q_i$ 个位置的字符相同**。\n\n- 定义这种理解方式的「生草程度」为**此时两个字符串的所有分割串长度的平方和**，即 $\\sum\\limits_{i=0}^{k_1}(p_{i+1}-p_i-1)^2+\\sum\\limits_{i=0}^{k_2}(q_{i+1}-q_i-1)^2$。\n\n- 两种理解方式不同**当且仅当**两种理解方式的 $p$ 不同，或两种理解方式的 $q$ 不同。\n\n小 L 想要知道所有理解方式的生草程度之和的结果。由于他不喜欢 $10^9+7$ 这个数，他不希望你告诉他的结果会是这个数，所以你要将结果对 $10^9+7$ 取模。", "inputFormat": "第一行有两个正整数 $n,m$ 分别为 $A$ 和 $B$ 的长度。\n\n接下来一行有一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n接下来一行有一个长度为 $m$ 的字符串，表示字符串 $B$。", "outputFormat": "一行，一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "对于样例一，一共有以下理解方式：\n+ $p=\\{0,4\\},q=\\{0,5\\}$，生草程度为 $25$。\n+ $p=\\{0,1,4\\},q=\\{0,2,5\\}$，生草程度为 $9$。\n+ $p=\\{0,2,4\\},q=\\{0,1,5\\}$，生草程度为 $11$。\n+ $p=\\{0,2,4\\},q=\\{0,4,5\\}$，生草程度为 $11$。\n+ $p=\\{0,3,4\\},q=\\{0,3,5\\}$，生草程度为 $9$。\n+ $p=\\{0,1,2,4\\},q=\\{0,2,4,5\\}$，生草程度为 $3$。\n+ $p=\\{0,1,3,4\\},q=\\{0,2,3,5\\}$，生草程度为 $3$。\n+ $p=\\{0,2,3,4\\},q=\\{0,1,3,5\\}$，生草程度为 $3$。\n\n总生草程度为 $74$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1( $20\\%$ )：$n,m\\leq 50$。\n- Subtask 2( $30\\%$ )：$n,m\\leq 200$。\n- Subtask 3( $50\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$n,m\\leq 3000$，$A$ 和 $B$ **仅包含小写字母**。", "locale": "zh-CN"}}}
{"pid": "P6694", "type": "P", "difficulty": 6, "samples": [["4\n1 1 1 1", "665496238"], ["13\n1 1 4 5 1 4 1 9 1 9 8 1 0", "748867567"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2020", "O2优化", "生成函数", "快速数论变换 NTT"], "title": "强迫症", "background": "小 L 是一个严重的强迫症患者。\n\n由于他严重的强迫症，所以他画图时总是要把点画在一个圆上。", "description": "一天，他问了小 H 和小 W 这样一个问题：\n\n如果在一个圆上有 $n$ 个不同的点，依次标号为 $1$ 到 $n$，有多少种方案能把它们连成一棵树？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果**连边不能相交**呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果把「树」换成「图」呢呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果给每个点一个权值 $a_i$，连接 $(i,j)$ 的边权值为 $a_i\\times a_j$，求**满足上面**的图的**期望所有边权值之和**呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L 见自己辛苦做了许久都没写出的题目被 dalao 轻松秒杀后十分郁闷。为了安慰他，你需要帮他做出这个问题。\n\n**注意**：\n1. 两条边在端点处**不视作相交**。\n1. **没有边的图（即只有 $n$ 个点，之间没有边相连）也合法**\n1. 点**按顺时针从 $1$ 到 $n$** 编号。\n1. 图中**不能有自环和重边**", "inputFormat": "第一行一个正整数 $n$，意义如上。\n\n接下来一行 $n$ 个非负整数，第 $i$ 个数为 $a_i$，表示第 $i$ 个点的点权。", "outputFormat": "一个正整数，表示结果。答案对 $998244353$ 取模。", "hint": "对于样例一，全部 $64$ 张图如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/zfa8hs0v.png)\n\n其中左侧 $48$ 张图合法，右侧 $16$ 张图不合法，所有边的权值均为 $1$。\n\n期望边权和为 $\\dfrac{8}{3}$，模 $998244353$ 意义下结果为 $665496238$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1( $10\\%$ )：$n\\leq 6$。\n- Subtask 2( $30\\%$ )：$n\\leq 3000$。\n- Subtask 3( $60\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^5,0\\leq a_i\\leq10^6$。\n\nSubtask 1 和 Subtask 2 时限 $1s$，Subtask 3 时限 $2s$。\n\n------------\n如果你不知道如何对一个有理数取模，请自行百度「乘法逆元」", "locale": "zh-CN", "translations": {"zh-CN": {"title": "强迫症", "background": "小 L 是一个严重的强迫症患者。\n\n由于他严重的强迫症，所以他画图时总是要把点画在一个圆上。", "description": "一天，他问了小 H 和小 W 这样一个问题：\n\n如果在一个圆上有 $n$ 个不同的点，依次标号为 $1$ 到 $n$，有多少种方案能把它们连成一棵树？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果**连边不能相交**呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果把「树」换成「图」呢呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果给每个点一个权值 $a_i$，连接 $(i,j)$ 的边权值为 $a_i\\times a_j$，求**满足上面**的图的**期望所有边权值之和**呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L 见自己辛苦做了许久都没写出的题目被 dalao 轻松秒杀后十分郁闷。为了安慰他，你需要帮他做出这个问题。\n\n**注意**：\n1. 两条边在端点处**不视作相交**。\n1. **没有边的图（即只有 $n$ 个点，之间没有边相连）也合法**\n1. 点**按顺时针从 $1$ 到 $n$** 编号。\n1. 图中**不能有自环和重边**", "inputFormat": "第一行一个正整数 $n$，意义如上。\n\n接下来一行 $n$ 个非负整数，第 $i$ 个数为 $a_i$，表示第 $i$ 个点的点权。", "outputFormat": "一个正整数，表示结果。答案对 $998244353$ 取模。", "hint": "对于样例一，全部 $64$ 张图如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/zfa8hs0v.png)\n\n其中左侧 $48$ 张图合法，右侧 $16$ 张图不合法，所有边的权值均为 $1$。\n\n期望边权和为 $\\dfrac{8}{3}$，模 $998244353$ 意义下结果为 $665496238$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1( $10\\%$ )：$n\\leq 6$。\n- Subtask 2( $30\\%$ )：$n\\leq 3000$。\n- Subtask 3( $60\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^5,0\\leq a_i\\leq10^6$。\n\nSubtask 1 和 Subtask 2 时限 $1s$，Subtask 3 时限 $2s$。\n\n------------\n如果你不知道如何对一个有理数取模，请自行百度「乘法逆元」", "locale": "zh-CN"}}}
{"pid": "P6695", "type": "P", "difficulty": 7, "samples": [["3 4 2\nabc\nbacb\n", "74"], ["7 8 5\nccbbacb\nbbbdadba", "337322"], ["3 4 1000000\nabc\nbacb\n", "424285944"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": [], "title": "谷歌翻(sheng)译(cao)机（加强版）", "background": "本题由@[wolfind](https://www.luogu.com.cn/user/104593)提供。\n\n[原题链接](https://www.luogu.com.cn/problem/P6693)（注意原题与加强版**有且仅有**`理解方式`中的**式子不同**、**模数不同**、**数据范围不同**）。", "description": "**注：为了方便描述，下文所有字符串起始位置都为 $1$，即都从 $1$ 开始标号。**\n\n小 L 将每次生草前的原文和生草后的结果看作两个**仅由小写字母组成**的两个字符串 $A$ 和 $B$。\n\n我们按如下方式定义「分割数列」和「分割串」：\n\n- 对于一个长度为 $n$ 的字符串，定义它的一条「分割数列」为：存在长度为 $k+2$ 的数列 $p$，使得 $0=p_0<p_1<p_2<...<p_k<p_{k+1}=n+1$。对于一条「分割数列」，定义其「分割串」为 $p_i+1$ 到 $p_{i+1}-1$ 之间字符构成的子串（$i \\in[0,k]$）（可以为空串）。显然，对于一条长度为 $k+2$ 的分割数列，一共有 $k+1$ 个分割串。\n\n- 对于同一个字符串，两条分割数列（$p$ 和 $q$）不同**当且仅当两条数列长度不同（$k_1\\neq k_2$）**，或**存在 $i$ 使得 $p_i\\neq q_i$**。\n\n不同人对于同样的原文和结果，他们的理解方式都是不同的。我们按如下方式定义一种理解方式：\n\n- 对于字符串 $A$ 和 $B$，我们为这两个字符串各找一条分割数列（$p$ 和 $q$），这两个分割数列满足以下要求：\n1. 两个分割数列长度相等（$k_1=k_2$）。\n1. 对于任意 $i$，有 $A[p_i]=B[q_i]$，即 **$A$ 第 $p_i$ 个位置的字符与 $B$ 第 $q_i$ 个位置的字符相同**。\n\n- 定义这种理解方式的「生草程度」为**此时两个字符串的所有分割串长度的 $t$ 次方和**，即 $\\sum\\limits_{i=0}^{k_1}(p_{i+1}-p_i-1)^t+\\sum\\limits_{i=0}^{k_2}(q_{i+1}-q_i-1)^t$。\n\n- 两种理解方式不同**当且仅当**两种理解方式的 $p$ 不同，或两种理解方式的 $q$ 不同。\n\n小 L 想要知道所有理解方式的生草程度之和的结果。由于他（也）不喜欢 $998244353$ 这个数，他不希望你告诉他的结果会是这个数，所以你要将结果对 $998244353$ 取模。", "inputFormat": "第一行有三个正整数 $n,m,t$。\n\n接下来一行有一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n接下来一行有一个长度为 $m$ 的字符串，表示字符串 $B$。", "outputFormat": "一行，一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "对于样例一，一共有以下理解方式：\n+ $p=\\{0,4\\},q=\\{0,5\\}$，生草程度为 $25$。\n+ $p=\\{0,1,4\\},q=\\{0,2,5\\}$，生草程度为 $9$。\n+ $p=\\{0,2,4\\},q=\\{0,1,5\\}$，生草程度为 $11$。\n+ $p=\\{0,2,4\\},q=\\{0,4,5\\}$，生草程度为 $11$。\n+ $p=\\{0,3,4\\},q=\\{0,3,5\\}$，生草程度为 $9$。\n+ $p=\\{0,1,2,4\\},q=\\{0,2,4,5\\}$，生草程度为 $3$。\n+ $p=\\{0,1,3,4\\},q=\\{0,2,3,5\\}$，生草程度为 $3$。\n+ $p=\\{0,2,3,4\\},q=\\{0,1,3,5\\}$，生草程度为 $3$。\n\n总生草程度为 $74$。\n\n### 数据范围\n\n「本题采用捆绑测试」\n\n- Subtask 1( $20\\%$ )：$n,m\\leq 50,t\\leq 2$。\n- Subtask 2( $30\\%$ )：$n,m\\leq 200,t\\leq 2$。\n- Subtask 3( $20\\%$ )：$t\\leq 10$。\n- Subtask 4( $30\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$n,m\\leq 1000,t\\leq 1000000$，$A$ 和 $B$ **仅包含小写字母**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "谷歌翻(sheng)译(cao)机（加强版）", "background": "本题由@[wolfind](https://www.luogu.com.cn/user/104593)提供。\n\n[原题链接](https://www.luogu.com.cn/problem/P6693)（注意原题与加强版**有且仅有**`理解方式`中的**式子不同**、**模数不同**、**数据范围不同**）。", "description": "**注：为了方便描述，下文所有字符串起始位置都为 $1$，即都从 $1$ 开始标号。**\n\n小 L 将每次生草前的原文和生草后的结果看作两个**仅由小写字母组成**的两个字符串 $A$ 和 $B$。\n\n我们按如下方式定义「分割数列」和「分割串」：\n\n- 对于一个长度为 $n$ 的字符串，定义它的一条「分割数列」为：存在长度为 $k+2$ 的数列 $p$，使得 $0=p_0<p_1<p_2<...<p_k<p_{k+1}=n+1$。对于一条「分割数列」，定义其「分割串」为 $p_i+1$ 到 $p_{i+1}-1$ 之间字符构成的子串（$i \\in[0,k]$）（可以为空串）。显然，对于一条长度为 $k+2$ 的分割数列，一共有 $k+1$ 个分割串。\n\n- 对于同一个字符串，两条分割数列（$p$ 和 $q$）不同**当且仅当两条数列长度不同（$k_1\\neq k_2$）**，或**存在 $i$ 使得 $p_i\\neq q_i$**。\n\n不同人对于同样的原文和结果，他们的理解方式都是不同的。我们按如下方式定义一种理解方式：\n\n- 对于字符串 $A$ 和 $B$，我们为这两个字符串各找一条分割数列（$p$ 和 $q$），这两个分割数列满足以下要求：\n1. 两个分割数列长度相等（$k_1=k_2$）。\n1. 对于任意 $i$，有 $A[p_i]=B[q_i]$，即 **$A$ 第 $p_i$ 个位置的字符与 $B$ 第 $q_i$ 个位置的字符相同**。\n\n- 定义这种理解方式的「生草程度」为**此时两个字符串的所有分割串长度的 $t$ 次方和**，即 $\\sum\\limits_{i=0}^{k_1}(p_{i+1}-p_i-1)^t+\\sum\\limits_{i=0}^{k_2}(q_{i+1}-q_i-1)^t$。\n\n- 两种理解方式不同**当且仅当**两种理解方式的 $p$ 不同，或两种理解方式的 $q$ 不同。\n\n小 L 想要知道所有理解方式的生草程度之和的结果。由于他（也）不喜欢 $998244353$ 这个数，他不希望你告诉他的结果会是这个数，所以你要将结果对 $998244353$ 取模。", "inputFormat": "第一行有三个正整数 $n,m,t$。\n\n接下来一行有一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n接下来一行有一个长度为 $m$ 的字符串，表示字符串 $B$。", "outputFormat": "一行，一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "对于样例一，一共有以下理解方式：\n+ $p=\\{0,4\\},q=\\{0,5\\}$，生草程度为 $25$。\n+ $p=\\{0,1,4\\},q=\\{0,2,5\\}$，生草程度为 $9$。\n+ $p=\\{0,2,4\\},q=\\{0,1,5\\}$，生草程度为 $11$。\n+ $p=\\{0,2,4\\},q=\\{0,4,5\\}$，生草程度为 $11$。\n+ $p=\\{0,3,4\\},q=\\{0,3,5\\}$，生草程度为 $9$。\n+ $p=\\{0,1,2,4\\},q=\\{0,2,4,5\\}$，生草程度为 $3$。\n+ $p=\\{0,1,3,4\\},q=\\{0,2,3,5\\}$，生草程度为 $3$。\n+ $p=\\{0,2,3,4\\},q=\\{0,1,3,5\\}$，生草程度为 $3$。\n\n总生草程度为 $74$。\n\n### 数据范围\n\n「本题采用捆绑测试」\n\n- Subtask 1( $20\\%$ )：$n,m\\leq 50,t\\leq 2$。\n- Subtask 2( $30\\%$ )：$n,m\\leq 200,t\\leq 2$。\n- Subtask 3( $20\\%$ )：$t\\leq 10$。\n- Subtask 4( $30\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$n,m\\leq 1000,t\\leq 1000000$，$A$ 和 $B$ **仅包含小写字母**。", "locale": "zh-CN"}}}
{"pid": "P6696", "type": "P", "difficulty": 4, "samples": [["4 4\n1 2 1\n2 3 2\n1 3 2\n3 4 1", "YES\n0.5 0.5 1.5 -0.5\n"], ["2 1\n1 2 1\n", "YES\n0.3 0.7"], ["3 2\n1 2 2\n2 3 2\n", "YES\n0 2 0"], ["3 4\n1 2 2\n2 2 1\n2 1 1\n1 2 2\n", "NO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2020] 图 (Day2)", "background": "", "description": "你有一个无向图，每条边都有一种颜色：红或者黑。\n\n你要做的就是为每个节点配一个实数点权，使得：\n\n- 对于每条黑色边，两个端点的点权之和为 $1$\n- 对于每条红色边，两个端点的点权之和为 $2$\n- 所有点权的绝对值之和是最小的\n\n求一种点权的分配方案。", "inputFormat": "第一行两个整数 $N,M$ 代表点数和边数。     \n所有点的编号为 $1$ 到 $N$。         \n接下来 $M$ 行每行三个整数 $a,b,c$ 描述一条边端点为 $a$ 和 $b$，如果 $c$ 是 $1$ 那么这条边是黑色边，如果 $c$ 是 $2$ 那么这条边是红色边。", "outputFormat": "如果有解，首先第一行输出 `YES`，然后第二行 $N$ 个整数代表可能的一组点权。       \n多组解输出任意一组即可。        \n如果无解，一行一个字符串 `NO`。", "hint": "#### 评测方式\n\n您的输出被评判为正确，当且仅当：\n\n- 每条边所连两点的点权和与该边要求的点权间的误差不超过 $10^{-6}$。\n- 所有点权的绝对值之和与标准答案误差不超过 $10^{-6}$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N \\le 5$，$M \\le 14$。     \n- Subtask 2（12 pts）：$N \\le 100$。\n- Subtask 3（17 pts）：$N \\le 1000$。\n- Subtask 4（24 pts）：$N \\le 10^4$。\n- Subtask 5（42 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$0 \\le M \\le 2 \\times 10^5$。\n\n**本题使用 Special Judge。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2020] 图 (Day2)", "background": "", "description": "你有一个无向图，每条边都有一种颜色：红或者黑。\n\n你要做的就是为每个节点配一个实数点权，使得：\n\n- 对于每条黑色边，两个端点的点权之和为 $1$\n- 对于每条红色边，两个端点的点权之和为 $2$\n- 所有点权的绝对值之和是最小的\n\n求一种点权的分配方案。", "inputFormat": "第一行两个整数 $N,M$ 代表点数和边数。     \n所有点的编号为 $1$ 到 $N$。         \n接下来 $M$ 行每行三个整数 $a,b,c$ 描述一条边端点为 $a$ 和 $b$，如果 $c$ 是 $1$ 那么这条边是黑色边，如果 $c$ 是 $2$ 那么这条边是红色边。", "outputFormat": "如果有解，首先第一行输出 `YES`，然后第二行 $N$ 个整数代表可能的一组点权。       \n多组解输出任意一组即可。        \n如果无解，一行一个字符串 `NO`。", "hint": "#### 评测方式\n\n您的输出被评判为正确，当且仅当：\n\n- 每条边所连两点的点权和与该边要求的点权间的误差不超过 $10^{-6}$。\n- 所有点权的绝对值之和与标准答案误差不超过 $10^{-6}$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N \\le 5$，$M \\le 14$。     \n- Subtask 2（12 pts）：$N \\le 100$。\n- Subtask 3（17 pts）：$N \\le 1000$。\n- Subtask 4（24 pts）：$N \\le 10^4$。\n- Subtask 5（42 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$0 \\le M \\le 2 \\times 10^5$。\n\n**本题使用 Special Judge。**", "locale": "zh-CN"}}}
{"pid": "P6697", "type": "P", "difficulty": 6, "samples": [["4\n1 2\n2 3\n3 4", "4 8\n2 1 4 3\n4 3 2 1"], ["7\n4 2\n5 7\n3 4\n6 3\n1 3\n4 5", "8 18\n6 4 1 2 7 3 5\n7 3 4 1 2 5 6"]], "limits": {"time": [750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2020] 村庄 (Day2)", "background": "# 请用 C++14/C++17 提交以避免不必要的 CE", "description": "村庄有 $N$ 个房子，之间有 $N-1$ 条道路连接，每条道路长度为 $1$。\n\n在最开始，第 $i$ 个村民就在第 $i$ 号房子里，房子从 $1$ 到 $N$ 编号。\n\n有一天，村民们突然突发奇想，想搬到别的房子中，村民们希望，在搬迁过后，不存在一位村民住在他原来居住的房子中。\n\n求所有村民在新旧房屋之间的最小总距离值和最大总距离值。", "inputFormat": "第一行一个整数 $N$ 代表房子数。     \n接下来 $N-1$ 行每行两个整数 $a,b$ 代表一条道路连接 $a$ 号房子和 $b$ 号房子。", "outputFormat": "第一行两个整数代表所有村民在新旧房屋之间的最小总距离值和最大总距离值。  \n第二行 $N$ 个整数，给出一种达成最小总距离和的方案。其中第 $i$ 个整数 $v_i$ 代表第 $i$ 个村民要从 $i$ 号房子迁移到 $v_i$ 号房子。  \n第三行 $N$ 个整数，给出一种达成最大总距离和的方案。输出方式和上一行相同。  \n要保证 $v_i\\ne i$。     \n如果有多组解，输出任意一组合法方案即可。", "hint": "#### 评分方式\n\n本题分为两个任务：\n\n- 求解最小距离和，并给出一种相应的合法方案；\n- 求解最大距离和，并给出一种相应的合法方案；\n\n每成功完成一个任务，您就可以获得该测试点 $50\\%$ 的分数。\n\n您在一个子任务的得分，等于你在该子任务所有测试点的最低得分。\n\n请注意，即使您不会求解某个子任务，也请按照要求的输出格式进行输出，否则 checker 将无法正确评分。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（12 pts）：$N \\le 10$。\n- Subtask 2（38 pts）：$N \\le 1000$。\n- Subtask 3（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le a,b \\le N$。\n\n**本题使用 Special Judge。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2020] 村庄 (Day2)", "background": "# 请用 C++14/C++17 提交以避免不必要的 CE", "description": "村庄有 $N$ 个房子，之间有 $N-1$ 条道路连接，每条道路长度为 $1$。\n\n在最开始，第 $i$ 个村民就在第 $i$ 号房子里，房子从 $1$ 到 $N$ 编号。\n\n有一天，村民们突然突发奇想，想搬到别的房子中，村民们希望，在搬迁过后，不存在一位村民住在他原来居住的房子中。\n\n求所有村民在新旧房屋之间的最小总距离值和最大总距离值。", "inputFormat": "第一行一个整数 $N$ 代表房子数。     \n接下来 $N-1$ 行每行两个整数 $a,b$ 代表一条道路连接 $a$ 号房子和 $b$ 号房子。", "outputFormat": "第一行两个整数代表所有村民在新旧房屋之间的最小总距离值和最大总距离值。  \n第二行 $N$ 个整数，给出一种达成最小总距离和的方案。其中第 $i$ 个整数 $v_i$ 代表第 $i$ 个村民要从 $i$ 号房子迁移到 $v_i$ 号房子。  \n第三行 $N$ 个整数，给出一种达成最大总距离和的方案。输出方式和上一行相同。  \n要保证 $v_i\\ne i$。     \n如果有多组解，输出任意一组合法方案即可。", "hint": "#### 评分方式\n\n本题分为两个任务：\n\n- 求解最小距离和，并给出一种相应的合法方案；\n- 求解最大距离和，并给出一种相应的合法方案；\n\n每成功完成一个任务，您就可以获得该测试点 $50\\%$ 的分数。\n\n您在一个子任务的得分，等于你在该子任务所有测试点的最低得分。\n\n请注意，即使您不会求解某个子任务，也请按照要求的输出格式进行输出，否则 checker 将无法正确评分。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（12 pts）：$N \\le 10$。\n- Subtask 2（38 pts）：$N \\le 1000$。\n- Subtask 3（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le a,b \\le N$。\n\n**本题使用 Special Judge。**", "locale": "zh-CN"}}}
{"pid": "P6698", "type": "P", "difficulty": 7, "samples": [["6 6 2\n2 2 0 1\n3 3 2 0 0\n3 2 1 3\n4 4 0 3 1 2\n5 2 2 1\n5 1 5\n2 1 1\n5 0 0 1 0 0", "NO 2\nNO 4\nNO 9\nYES"]], "limits": {"time": [750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "BalticOI（波罗的海）"], "title": "[BalticOI 2020] 病毒 (Day2)", "background": "", "description": "给定一种病毒，为了方便，我们用 $0$ 到 $G-1$ 的整数描述他的基因序列。\n\n现在这个病毒可以进行变异，有一些变异规则，每个变异规则可以让基因序列上的某个数变成某个片段，如果用变异规则让基因序列变成了全部为 $0$ 和 $1$ 的序列，那么这个病毒就变异完成了。\n\n病毒可以通过抗体进行检测，比如 $01011$ 就可以检测到 $0101110$，但不能检测到 $110110$。\n\n对于从 $2$ 到 $G-1$ 中的基因，科学家想知道，是否能通过任意一组给定的抗体检测到这个基因变异形成的其他所有基因，不能的话，那么求不能检测到的基因中的最短长度。", "inputFormat": "第一行三个整数 $G,N,M$ 代表基因数，变异规则数和抗体数。        \n接下来 $N$ 行每行首先两个整数 $a,k$，然后接着 $k$ 个整数 $b_i$，代表 $a$ 可以通过这个变异规则变为 $b_1,b_2,\\cdots,b_k$ 这个片段，保证 $2$ 和 $G-1$ 都至少在每个规则中的 $a$ 中出现一次。       \n接下来 $M$ 行每行首先一个整数 $l$ 代表抗体长度，接下来 $l$ 个整数 $c_i$ 描述这个抗体。", "outputFormat": "$G-2$ 行第 $i$ 行代表 $i$ 基因以及其所有变异到的基因是否都可以被任意一组抗体检测到，如果可以，输出一个字符串 `YES`，如果不可以，首先一个字符串 `NO`，接下来一个整数代表不能检测到的基因中的最短长度。保证对于所有数据，该值小于 $2^{63}$。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$M=0$。\n- Subtask 2（14 pts）：$N = G-2$。\n- Subtask 3（25 pts）：$M=1$。\n- Subtask 4（32 pts）：$\\sum l \\le 10$。\n- Subtask 5（18 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$G > 2$，$N \\ge G-2$，$M \\ge 0$。$2 \\le a <G$，$k \\ge 1$，$0 \\le b_i<G$，$\\sum k \\le 100$，$l \\ge 1$，$0 \\le c_i \\le 1$，$\\sum l\\le 50$。\n\n**本题强制 $O2$ 优化。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2020] 病毒 (Day2)", "background": "", "description": "给定一种病毒，为了方便，我们用 $0$ 到 $G-1$ 的整数描述他的基因序列。\n\n现在这个病毒可以进行变异，有一些变异规则，每个变异规则可以让基因序列上的某个数变成某个片段，如果用变异规则让基因序列变成了全部为 $0$ 和 $1$ 的序列，那么这个病毒就变异完成了。\n\n病毒可以通过抗体进行检测，比如 $01011$ 就可以检测到 $0101110$，但不能检测到 $110110$。\n\n对于从 $2$ 到 $G-1$ 中的基因，科学家想知道，是否能通过任意一组给定的抗体检测到这个基因变异形成的其他所有基因，不能的话，那么求不能检测到的基因中的最短长度。", "inputFormat": "第一行三个整数 $G,N,M$ 代表基因数，变异规则数和抗体数。        \n接下来 $N$ 行每行首先两个整数 $a,k$，然后接着 $k$ 个整数 $b_i$，代表 $a$ 可以通过这个变异规则变为 $b_1,b_2,\\cdots,b_k$ 这个片段，保证 $2$ 和 $G-1$ 都至少在每个规则中的 $a$ 中出现一次。       \n接下来 $M$ 行每行首先一个整数 $l$ 代表抗体长度，接下来 $l$ 个整数 $c_i$ 描述这个抗体。", "outputFormat": "$G-2$ 行第 $i$ 行代表 $i$ 基因以及其所有变异到的基因是否都可以被任意一组抗体检测到，如果可以，输出一个字符串 `YES`，如果不可以，首先一个字符串 `NO`，接下来一个整数代表不能检测到的基因中的最短长度。保证对于所有数据，该值小于 $2^{63}$。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$M=0$。\n- Subtask 2（14 pts）：$N = G-2$。\n- Subtask 3（25 pts）：$M=1$。\n- Subtask 4（32 pts）：$\\sum l \\le 10$。\n- Subtask 5（18 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$G > 2$，$N \\ge G-2$，$M \\ge 0$。$2 \\le a <G$，$k \\ge 1$，$0 \\le b_i<G$，$\\sum k \\le 100$，$l \\ge 1$，$0 \\le c_i \\le 1$，$\\sum l\\le 50$。\n\n**本题强制 $O2$ 优化。**", "locale": "zh-CN"}}}
{"pid": "P6699", "type": "P", "difficulty": 7, "samples": [["7 20\n5 7 9\n3 7 4\n3 6 6\n2 5 8\n5 1 9\n1 3 6\n6 5 1\n2 7 4\n2 3 5\n6 4 2\n7 1 5\n5 4 4\n4 1 3\n5 3 9\n7 6 4\n2 1 3\n4 3 9\n6 2 7\n4 2 8\n6 1 10", "28\n6 0 4 3 7 1 5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "模板题"], "title": "【模板】一般图最大权匹配", "background": "模板题，无背景。", "description": "给定一张有 $n$ 个顶点的无向带权图，有 $m$ 条带权边。\n\n求一种匹配的方案，使得最终匹配边的边权之和最大。", "inputFormat": "第一行两个数，$n$ 和 $m$。\n\n接下来 $m$ 行，每行 $3$ 个数：$u$，$v$，$w$，表示点 $u$ 与点 $v$ 之间有一条边权为 $w$ 的边。", "outputFormat": "第一行一个数，最大边权和。\n\n接下来一行 $n$ 个整数，描述一组最优方案。第 $v$ 个整数表示点 $v$ 匹配的点的编号。如果 $v$ 号点没有匹配，请输出 0。", "hint": "$1 \\le n \\le 400$，$1 \\le m \\le 79800$，$1 \\le w \\le 5\\times10^8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】一般图最大权匹配", "background": "模板题，无背景。", "description": "给定一张有 $n$ 个顶点的无向带权图，有 $m$ 条带权边。\n\n求一种匹配的方案，使得最终匹配边的边权之和最大。", "inputFormat": "第一行两个数，$n$ 和 $m$。\n\n接下来 $m$ 行，每行 $3$ 个数：$u$，$v$，$w$，表示点 $u$ 与点 $v$ 之间有一条边权为 $w$ 的边。", "outputFormat": "第一行一个数，最大边权和。\n\n接下来一行 $n$ 个整数，描述一组最优方案。第 $v$ 个整数表示点 $v$ 匹配的点的编号。如果 $v$ 号点没有匹配，请输出 0。", "hint": "$1 \\le n \\le 400$，$1 \\le m \\le 79800$，$1 \\le w \\le 5\\times10^8$。", "locale": "zh-CN"}}}
{"pid": "P6700", "type": "P", "difficulty": 7, "samples": [["5 2\naaabc\nbbbaa", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2015", "图论建模", "基环树", "PA（波兰）", "状压 DP"], "title": "[PA 2015 Final] Edycja", "background": "", "description": "给定两个长度为 $n$ 的等长的小写字母串 A 和 B，你可以做以下两种操作：\n1. 把 A 中某个位置上的字符修改成另一个字符，用时 1 秒。比如：```ababc``` 变成 ```ababa```。\n2. 把 A 中某种字符全部修改成另一个种字符，用时 $c$ 秒。比如：```ababc``` 变成 ```acacc```。\n\n同一时间只能做一个操作，求把 A 变成 B 的最小总耗时。", "inputFormat": "第一行包含两个正整数 $n,c$，分别表示串长和操作 2 的代价。\n\n第二行包含一个长度为 $n$ 的小写字母串 A。\n\n第三行包含一个长度为 $n$ 的小写字母串 B。", "outputFormat": "输出一个整数，即把 A 变成 B 的最小总耗时。", "hint": "#### 样例解释   \n先把所有的 a 都修改成 b，然后再把第 4 个位置的 b 和第 5 个位置的 c 都修改为 a。\n\n#### 数据范围\n对于所有数据，满足 $1\\le c\\le n\\le10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2015 Final] Edycja", "background": "", "description": "给定两个长度为 $n$ 的等长的小写字母串 A 和 B，你可以做以下两种操作：\n1. 把 A 中某个位置上的字符修改成另一个字符，用时 1 秒。比如：```ababc``` 变成 ```ababa```。\n2. 把 A 中某种字符全部修改成另一个种字符，用时 $c$ 秒。比如：```ababc``` 变成 ```acacc```。\n\n同一时间只能做一个操作，求把 A 变成 B 的最小总耗时。", "inputFormat": "第一行包含两个正整数 $n,c$，分别表示串长和操作 2 的代价。\n\n第二行包含一个长度为 $n$ 的小写字母串 A。\n\n第三行包含一个长度为 $n$ 的小写字母串 B。", "outputFormat": "输出一个整数，即把 A 变成 B 的最小总耗时。", "hint": "#### 样例解释   \n先把所有的 a 都修改成 b，然后再把第 4 个位置的 b 和第 5 个位置的 c 都修改为 a。\n\n#### 数据范围\n对于所有数据，满足 $1\\le c\\le n\\le10^6$。", "locale": "zh-CN"}}}
{"pid": "P6701", "type": "P", "difficulty": 5, "samples": [["6\nSAB\nSBC\nSAA\nACA\nBCC\nCBC\n3\nABBCAAABCA\nCCC\nBA", "3\n1\nNIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["1997", "POI（波兰）", "区间 DP"], "title": "[POI 1997] Genotype", "background": "Genotype 是一个独特的基因串。", "description": "我们可以用大写英文字母 `A`-`Z` 来描述 Genotype，每个字母就代表一个基因。\n\n规定一种「分裂」规则，由三个大写字母 $A_1A_2A_3$ 组成，代表 $A_1$ 可以「分裂」为 $A_2A_3$。\n\n现在给定 $n$ 个「分裂」规则和 $k$ 个 Genotype，判断这些 Genotype 是否能从一个特定的 **只包含大写字母 `S` 的** 串通过「分裂」规则得到，如果可以的话输出特定的串的长度的最小值，如果不可以的话输出 `NIE`。", "inputFormat": "第一行一个整数 $n$ 代表「分裂」规则数。     \n接下来 $n$ 行每行三个大写字母 $A_1,A_2,A_3$ 代表一个「分裂」规则。         \n接下来一行一个整数 $k$ 代表给定的 Genotype 数。     \n接下来 $k$ 行每行若干个大写字母表示一个 Genotype。", "outputFormat": "$k$ 行：\n\n- 如果没有特定的串通过「分裂」规则得到这个 Genotype，输出 `NIE`。\n- 如果有特定的串通过「分裂」规则得到这个 Genotype，输出这个特定的串的最小长度。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 2000$，Genotype 的长度最大为 $100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 1997] Genotype", "background": "Genotype 是一个独特的基因串。", "description": "我们可以用大写英文字母 `A`-`Z` 来描述 Genotype，每个字母就代表一个基因。\n\n规定一种「分裂」规则，由三个大写字母 $A_1A_2A_3$ 组成，代表 $A_1$ 可以「分裂」为 $A_2A_3$。\n\n现在给定 $n$ 个「分裂」规则和 $k$ 个 Genotype，判断这些 Genotype 是否能从一个特定的 **只包含大写字母 `S` 的** 串通过「分裂」规则得到，如果可以的话输出特定的串的长度的最小值，如果不可以的话输出 `NIE`。", "inputFormat": "第一行一个整数 $n$ 代表「分裂」规则数。     \n接下来 $n$ 行每行三个大写字母 $A_1,A_2,A_3$ 代表一个「分裂」规则。         \n接下来一行一个整数 $k$ 代表给定的 Genotype 数。     \n接下来 $k$ 行每行若干个大写字母表示一个 Genotype。", "outputFormat": "$k$ 行：\n\n- 如果没有特定的串通过「分裂」规则得到这个 Genotype，输出 `NIE`。\n- 如果有特定的串通过「分裂」规则得到这个 Genotype，输出这个特定的串的最小长度。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 2000$，Genotype 的长度最大为 $100$。", "locale": "zh-CN"}}}
{"pid": "P6702", "type": "P", "difficulty": 2, "samples": [["4\n", "-1"], ["9\n", "3"], ["18\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2010", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7] ŠEĆER", "background": "Mirko 在制糖厂当送货员。", "description": "Mirko 需要向某地的一家糖果店运送 $n$ 颗糖。\n\nMirko 可以使用两种类型的包装盒子：       \n- 一种是可以装 $3$ 颗糖的 $1$ 号包装；           \n- 另一种是可以装 $5$ 颗糖的 $2$ 号包装。 \n\nMirko 想让包装盒尽可能少。例如，他要运送 $18$ 颗糖，则可以使用 $6$ 个 $1$ 号包装。但是，最优策略是 $3$ 个 $2$ 号包装和 $1$ 个 $1$ 号包装。这样总共有 $4$ 个包装。 \n\n请你帮助 Mirko 找到需要包装盒最少的方案。\n\n", "inputFormat": "输入数据共一行。\n\n第一行一个正整数 $n$，表示糖果颗数。", "outputFormat": "输出数据共一行。\n\n第一行，一个正整数表示需要包装盒最少的方案数的包装盒数，如果不可能用这 $2$ 种包装盒运 $n$ 颗糖，输出 `-1`。\n", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$3 \\le  n \\le 5000$。\n\n#### 说明\n\n本题满分 $30$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T1 ŠEĆER", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7] ŠEĆER", "background": "Mirko 在制糖厂当送货员。", "description": "Mirko 需要向某地的一家糖果店运送 $n$ 颗糖。\n\nMirko 可以使用两种类型的包装盒子：       \n- 一种是可以装 $3$ 颗糖的 $1$ 号包装；           \n- 另一种是可以装 $5$ 颗糖的 $2$ 号包装。 \n\nMirko 想让包装盒尽可能少。例如，他要运送 $18$ 颗糖，则可以使用 $6$ 个 $1$ 号包装。但是，最优策略是 $3$ 个 $2$ 号包装和 $1$ 个 $1$ 号包装。这样总共有 $4$ 个包装。 \n\n请你帮助 Mirko 找到需要包装盒最少的方案。\n\n", "inputFormat": "输入数据共一行。\n\n第一行一个正整数 $n$，表示糖果颗数。", "outputFormat": "输出数据共一行。\n\n第一行，一个正整数表示需要包装盒最少的方案数的包装盒数，如果不可能用这 $2$ 种包装盒运 $n$ 颗糖，输出 `-1`。\n", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$3 \\le  n \\le 5000$。\n\n#### 说明\n\n本题满分 $30$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T1 ŠEĆER", "locale": "zh-CN"}}}
{"pid": "P6703", "type": "P", "difficulty": 2, "samples": [["3 3\n1 A\n2 B\n3 C\n", "!"], ["5 6\n1 A\n2 B\n5 B\n1 C\n2 A\n2 B\n", "B?A?C"], ["8 8\n4 V\n3 I\n7 T\n7 A\n6 R\n5 N\n1 O\n9 H\n", "HONITAVR"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7] KOLO", "background": "", "description": "Mirko 最近购买了一个命运之轮。 他在每个扇形上写了一个大写英文字母，像这样（比如样例 $3$）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c6x5106c.png)\n\n\n轮中没有字母重复出现，而且轮沿顺时针方向旋转。 \n\n轮旋转时，有一个指针停留在同一位置（上图中指向 `H`）。 当我们旋转盘时，指针所指向的字母相应地发生变化。\n\nMirko 连续旋转了 $k$ 次，每次都记录了箭头指向的字母改变了多少次，以及旋转结束时所指的字母。\n\nSlavko 找到了那张纸，她想知道 Mirko 在车轮的扇形上写了些什么。另外，扇形的总数是已知的。", "inputFormat": "输入数据共 $k+1$ 行。\n\n第一行，$2$ 个正整数 $n$，表示车轮上的楔子数，以及 $k$，表示旋转数。\n\n接下来 $k$ 行表示 Mirko 为每次旋转记录的顺序描述。 每行包含一个整数 $s$ 和一个大写字母 $c$，表示该旋转期间指向的字母发生更改的次数，$c$ 表示指针停止处的大写字母。", "outputFormat": "如果没有满足上述要求的盘，则输出 $\\texttt !$。\n\n否则，盘上的字母，从最后一次旋转结束时的尖头字母开始，然后顺时针方向输出。如果无法确定某些字母，则在对应的位置输出 $\\texttt ?$。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 25, 1 \\le k \\le 100, 1 \\le s \\le 100$。\n\n#### 说明\n\n本题满分 $50$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T2 KOLO", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7] KOLO", "background": "", "description": "Mirko 最近购买了一个命运之轮。 他在每个扇形上写了一个大写英文字母，像这样（比如样例 $3$）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c6x5106c.png)\n\n\n轮中没有字母重复出现，而且轮沿顺时针方向旋转。 \n\n轮旋转时，有一个指针停留在同一位置（上图中指向 `H`）。 当我们旋转盘时，指针所指向的字母相应地发生变化。\n\nMirko 连续旋转了 $k$ 次，每次都记录了箭头指向的字母改变了多少次，以及旋转结束时所指的字母。\n\nSlavko 找到了那张纸，她想知道 Mirko 在车轮的扇形上写了些什么。另外，扇形的总数是已知的。", "inputFormat": "输入数据共 $k+1$ 行。\n\n第一行，$2$ 个正整数 $n$，表示车轮上的楔子数，以及 $k$，表示旋转数。\n\n接下来 $k$ 行表示 Mirko 为每次旋转记录的顺序描述。 每行包含一个整数 $s$ 和一个大写字母 $c$，表示该旋转期间指向的字母发生更改的次数，$c$ 表示指针停止处的大写字母。", "outputFormat": "如果没有满足上述要求的盘，则输出 $\\texttt !$。\n\n否则，盘上的字母，从最后一次旋转结束时的尖头字母开始，然后顺时针方向输出。如果无法确定某些字母，则在对应的位置输出 $\\texttt ?$。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 25, 1 \\le k \\le 100, 1 \\le s \\le 100$。\n\n#### 说明\n\n本题满分 $50$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T2 KOLO", "locale": "zh-CN"}}}
{"pid": "P6704", "type": "P", "difficulty": 2, "samples": [["5 15\n2 8\n2 10\n2 12\n2 10\n2 5", "7"], ["7 15\n1 5\n2 3\n2 5\n2 7\n2 4\n1 5\n1 3", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2010", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7] GITARA", "background": "Darko 有一个想象的外星朋友，他有十亿根手指。外星人快速拿起吉他，在网上找到一段简单的旋律并开始弹奏。\n\n这个吉他像寻常一样有六根弦，令其用 $1$ 到 $6$ 表示。每根弦被分成 $P$ 段，令其用 $1$ 到 $P$ 表示。\n\n旋律是一串的音调，每一个音调都是由按下特定的一根弦上的一段而产生的（如按第 $4$ 弦第 $8$ 段）。如果在一根弦上同时按在几段上，产生的音调是段数最大的那一段所能产生的音调。\n\n例：对于第 $3$ 根弦，第 $5$ 段已经被按，若你要弹出第 $7$ 段对应音调，只需把按住第 $7$ 段，而不需放开第 $5$ 段，因为只有最后的一段才会影响该弦产生的音调(在这个例子中是第 $7$ 段)。类似，如果现在你要弹出第 $2$ 段对应音调，你必须把第 $5$ 段和第 $7$ 段都释放。\n\n请你编写一个程序，计算外星人在弹出给定的旋律情况下，手指运动的最小次数。", "description": "你有一个 $6 \\times P$ 的矩阵 $A$，初始状态皆为 $0$。\n\n对于所有要求 $(i,j)$，你需要满足要求：\n\n1. 此时 $A_{i,j}$ 状态为 $1$；\n\n2. 对于 $A_{i,j+k}\\ (k>0)$ 状态为 $0$。\n\n你需要求在满足要求的情况下状态转换最小次数。", "inputFormat": "第一行包含两个正整数 $n,P$。它们分别指旋律中音调的数量及每根弦的段数。\n\n接下来 $n$ 行，每行两个正整数 $i,j$，分别表示能弹出对应音调的位置——弦号和段号，其为外星人弹奏的顺序。", "outputFormat": "一个非负整数表示外星人手指运动次数最小值。", "hint": "#### 样例 1 解释\n所有的音调都是由第二根弦产生的。首先按顺序按 $8,10,12$（$count=3$）。然后释放第 $12$ 段（$count=4$）。最后，按下第 $5$ 段，释放第 $8,10$ 段（$count=7$）。\n\n#### 样例 2 解释 \n对于每个操作，分别需要 $1,1,1,1,3,0,2$ 次手指运动。\n\n#### 数据规模及约定\n\n\n按下或释放一段弦各计一次手指运动。弹弦不算手指的移动，而是一个弹吉他的动作。（指你不需要管他怎么弹的，只需要按就是啦，说不定他可以用超能力呀）\n\n对于 $100\\%$ 的数据，$n \\le 5 \\times 10^5$ ，$2 \\le P \\le 3 \\times 10^5$。\n\n#### 说明\n\n本题满分 $70$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T3 GITARA", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7] GITARA", "background": "Darko 有一个想象的外星朋友，他有十亿根手指。外星人快速拿起吉他，在网上找到一段简单的旋律并开始弹奏。\n\n这个吉他像寻常一样有六根弦，令其用 $1$ 到 $6$ 表示。每根弦被分成 $P$ 段，令其用 $1$ 到 $P$ 表示。\n\n旋律是一串的音调，每一个音调都是由按下特定的一根弦上的一段而产生的（如按第 $4$ 弦第 $8$ 段）。如果在一根弦上同时按在几段上，产生的音调是段数最大的那一段所能产生的音调。\n\n例：对于第 $3$ 根弦，第 $5$ 段已经被按，若你要弹出第 $7$ 段对应音调，只需把按住第 $7$ 段，而不需放开第 $5$ 段，因为只有最后的一段才会影响该弦产生的音调(在这个例子中是第 $7$ 段)。类似，如果现在你要弹出第 $2$ 段对应音调，你必须把第 $5$ 段和第 $7$ 段都释放。\n\n请你编写一个程序，计算外星人在弹出给定的旋律情况下，手指运动的最小次数。", "description": "你有一个 $6 \\times P$ 的矩阵 $A$，初始状态皆为 $0$。\n\n对于所有要求 $(i,j)$，你需要满足要求：\n\n1. 此时 $A_{i,j}$ 状态为 $1$；\n\n2. 对于 $A_{i,j+k}\\ (k>0)$ 状态为 $0$。\n\n你需要求在满足要求的情况下状态转换最小次数。", "inputFormat": "第一行包含两个正整数 $n,P$。它们分别指旋律中音调的数量及每根弦的段数。\n\n接下来 $n$ 行，每行两个正整数 $i,j$，分别表示能弹出对应音调的位置——弦号和段号，其为外星人弹奏的顺序。", "outputFormat": "一个非负整数表示外星人手指运动次数最小值。", "hint": "#### 样例 1 解释\n所有的音调都是由第二根弦产生的。首先按顺序按 $8,10,12$（$count=3$）。然后释放第 $12$ 段（$count=4$）。最后，按下第 $5$ 段，释放第 $8,10$ 段（$count=7$）。\n\n#### 样例 2 解释 \n对于每个操作，分别需要 $1,1,1,1,3,0,2$ 次手指运动。\n\n#### 数据规模及约定\n\n\n按下或释放一段弦各计一次手指运动。弹弦不算手指的移动，而是一个弹吉他的动作。（指你不需要管他怎么弹的，只需要按就是啦，说不定他可以用超能力呀）\n\n对于 $100\\%$ 的数据，$n \\le 5 \\times 10^5$ ，$2 \\le P \\le 3 \\times 10^5$。\n\n#### 说明\n\n本题满分 $70$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T3 GITARA", "locale": "zh-CN"}}}
{"pid": "P6705", "type": "P", "difficulty": 3, "samples": [["2\nP.\n.K\n2 1\n3 2", "0"], ["3\nP..\n.KK\n...\n3 2 4\n7 4 2\n2 3 1", "2"], ["3\nK.P\n...\nK.K\n3 3 4\n9 5 9\n8 3 7", "5"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2010", "二分", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7] POŠTAR", "background": "Mirko 在一个山中小镇里得到了一个邮递员的差事。这个小镇可以用一个 $n \\times n$ 的矩阵表示。每个区域有三种状态：用 $\\texttt{K}$ 表示房屋，用 $\\texttt{P}$ 表示邮局或用 $\\texttt{.}$ 表示牧场。此外，每个区域被分配一个高度。\n\n每天早晨，Mirko 都给镇上的每户人家送邮件。他从用 $\\texttt{P}$ 表示的区域开始。Mirko 只能水平、垂直或斜向移动到相邻的区域。他一旦送完最后一封邮件，就必须返回邮局。\n\nMirko 不知道他的工作会有多无聊。令 Mirko 在投递邮件时所到的最高处和最低处的高度之差等于他的疲劳度。帮他找出疲劳度最小的方式，让 Mirko 投递所有的邮件。", "description": "给定一个 $n \\times n$ 的矩阵。\n\n每个位置可能有 $\\texttt{K}$ $\\texttt{P}$ $\\texttt{.}$ 三种可能状态，此外还有一个高度 $h_{i,j}$。\n\n你需要从状态为 $\\texttt{P}$ 的位置开始，水平、垂直或斜向移动，经过所有状态为 $\\texttt{K}$ 的位置，最终回到起点。\n\n在这路程中，你需要让经过的位置的 $max_h-min_h$ 最小化。\n\n请你求出最小化的值。", "inputFormat": "第一行包含一个整数 $n$。\n\n下面的 $n$ 行每行 $n$ 个字符表示矩阵。\n\n下面的 $n$ 行每行 $n$ 个正整数，表示区域高度。", "outputFormat": "一个非负整数表示最小疲劳度。", "hint": "#### 样例 1 解释\n\n从邮局开始，Mirko 可以直接移动到房屋，然后再回到邮局。因为这两个区域高度相同，所以 Mirko的疲劳等于  $0$。\n\n#### 数据规模及约定\n\n\n对于矩阵，其中 $\\texttt{P}$ 将正好出现一次，而 $\\texttt{K}$ 将至少出现一次。\n\n对于 $100\\%$ 的数据 $2 \\le n \\le 50$\n\n#### 说明\n\n本题满分 $100$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T4 POŠTAR\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7] POŠTAR", "background": "Mirko 在一个山中小镇里得到了一个邮递员的差事。这个小镇可以用一个 $n \\times n$ 的矩阵表示。每个区域有三种状态：用 $\\texttt{K}$ 表示房屋，用 $\\texttt{P}$ 表示邮局或用 $\\texttt{.}$ 表示牧场。此外，每个区域被分配一个高度。\n\n每天早晨，Mirko 都给镇上的每户人家送邮件。他从用 $\\texttt{P}$ 表示的区域开始。Mirko 只能水平、垂直或斜向移动到相邻的区域。他一旦送完最后一封邮件，就必须返回邮局。\n\nMirko 不知道他的工作会有多无聊。令 Mirko 在投递邮件时所到的最高处和最低处的高度之差等于他的疲劳度。帮他找出疲劳度最小的方式，让 Mirko 投递所有的邮件。", "description": "给定一个 $n \\times n$ 的矩阵。\n\n每个位置可能有 $\\texttt{K}$ $\\texttt{P}$ $\\texttt{.}$ 三种可能状态，此外还有一个高度 $h_{i,j}$。\n\n你需要从状态为 $\\texttt{P}$ 的位置开始，水平、垂直或斜向移动，经过所有状态为 $\\texttt{K}$ 的位置，最终回到起点。\n\n在这路程中，你需要让经过的位置的 $max_h-min_h$ 最小化。\n\n请你求出最小化的值。", "inputFormat": "第一行包含一个整数 $n$。\n\n下面的 $n$ 行每行 $n$ 个字符表示矩阵。\n\n下面的 $n$ 行每行 $n$ 个正整数，表示区域高度。", "outputFormat": "一个非负整数表示最小疲劳度。", "hint": "#### 样例 1 解释\n\n从邮局开始，Mirko 可以直接移动到房屋，然后再回到邮局。因为这两个区域高度相同，所以 Mirko的疲劳等于  $0$。\n\n#### 数据规模及约定\n\n\n对于矩阵，其中 $\\texttt{P}$ 将正好出现一次，而 $\\texttt{K}$ 将至少出现一次。\n\n对于 $100\\%$ 的数据 $2 \\le n \\le 50$\n\n#### 说明\n\n本题满分 $100$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T4 POŠTAR\n", "locale": "zh-CN"}}}
{"pid": "P6706", "type": "P", "difficulty": 4, "samples": [["3\n2 3 1\n7\n1 1\n1 2\n2 1\n1 2\n1 1\n2 2\n1 2", "CIKLUS\nCIKLUS\n1\n1\n2"], ["5\n0 3 5 3 4\n6\n1 1\n1 2\n2 4\n1 2\n2 3\n1 2", "1\nCIKLUS\n4\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2010", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7]  KUGLICE", "background": "Mirko 和 Slavko 喜欢玩弹珠。 在一个激动人心的星期五，Mirko 发明了一个关于弹珠的游戏，他想向 Slavko 展示。\n\n在游戏中，Mirko 构造了一个有向图，其中每个点出度不超过 $1$。然后他在其中一个点上放了一个弹珠，只要弹珠在某个顶点 $X$ 上，弹珠就会移动到由一条边连接的相邻顶点（没有就算了）。弹珠的运动一直持续到弹珠到达一个没有出度的点为止。弹珠也有可能因没有出度为 $0$ 的点而无限遍历图。为了确保 Slavko 能理解游戏规则，Mirko 会问一系列问题。\n\n询问类型如下:\n\n1. `1 X`：除非弹珠卡在一个循环，求弹珠被放在 $X$ 后最后的终止点序号。\n\n2. `2 X`：删除顶点 $X$ 的出边。（保证存在）\n\n注意：查询有序。", "description": "给定一个有向图，其中每个点出度为 $0$ 或 $1$。\n\n有如下询问：\n\n1. `1 X`：给定弹珠起始点 $X$，求弹珠运动的终止点。\n\n2. `2 X`：删除 $X$ 点出边。（保证存在）\n\n弹珠运动规则：\n\n从初始点沿着出边走直到一点出度为 $0$。", "inputFormat": "第一行一个正整数 $n$，指图中顶点数。\n\n第二行 $n$ 个正整数，其中第 $i$ 个数表示 $i$\n的出边指向点序号，若 $0$ 则指不存在。\n\n下面一行一个正整数 $Q$，指查询数目。\n\n下面 $Q$ 行每行包含一个上述格式的查询。", "outputFormat": "对于每个类型 $1$ 的查询，按照顺序，每行输出弹珠停止点序号。\n\n如果弹珠永不停止，则输出 $\\texttt{CIKLUS}$。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据 $1 \\le n,Q \\le 3 \\times 10^5$。\n\n#### 说明\n\n本题满分 $120$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T5 KUGLICE。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7]  KUGLICE", "background": "Mirko 和 Slavko 喜欢玩弹珠。 在一个激动人心的星期五，Mirko 发明了一个关于弹珠的游戏，他想向 Slavko 展示。\n\n在游戏中，Mirko 构造了一个有向图，其中每个点出度不超过 $1$。然后他在其中一个点上放了一个弹珠，只要弹珠在某个顶点 $X$ 上，弹珠就会移动到由一条边连接的相邻顶点（没有就算了）。弹珠的运动一直持续到弹珠到达一个没有出度的点为止。弹珠也有可能因没有出度为 $0$ 的点而无限遍历图。为了确保 Slavko 能理解游戏规则，Mirko 会问一系列问题。\n\n询问类型如下:\n\n1. `1 X`：除非弹珠卡在一个循环，求弹珠被放在 $X$ 后最后的终止点序号。\n\n2. `2 X`：删除顶点 $X$ 的出边。（保证存在）\n\n注意：查询有序。", "description": "给定一个有向图，其中每个点出度为 $0$ 或 $1$。\n\n有如下询问：\n\n1. `1 X`：给定弹珠起始点 $X$，求弹珠运动的终止点。\n\n2. `2 X`：删除 $X$ 点出边。（保证存在）\n\n弹珠运动规则：\n\n从初始点沿着出边走直到一点出度为 $0$。", "inputFormat": "第一行一个正整数 $n$，指图中顶点数。\n\n第二行 $n$ 个正整数，其中第 $i$ 个数表示 $i$\n的出边指向点序号，若 $0$ 则指不存在。\n\n下面一行一个正整数 $Q$，指查询数目。\n\n下面 $Q$ 行每行包含一个上述格式的查询。", "outputFormat": "对于每个类型 $1$ 的查询，按照顺序，每行输出弹珠停止点序号。\n\n如果弹珠永不停止，则输出 $\\texttt{CIKLUS}$。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据 $1 \\le n,Q \\le 3 \\times 10^5$。\n\n#### 说明\n\n本题满分 $120$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T5 KUGLICE。", "locale": "zh-CN"}}}
{"pid": "P6707", "type": "P", "difficulty": 6, "samples": [["5 5\n1 2 3 4 5\n1 5 5 0\n4 4 5\n4 5 5\n2 1 5 1\n4 1 5", "4\n0\n25"], ["1 7\n100\n3 1 17\n3 2 27\n3 4 37\n4 1 1\n4 2 2\n4 3 3\n4 4 4", "17\n27\n100\n37"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "分块", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7] UPIT", "background": "Mirko 厌倦了为了各种任务去实现各种数据结构。所以，他决定写一个终极数据结构去操纵他最喜欢的数字序列。\n\n快来帮助他吧！\n\nMirko 会给你他的数列，以及一系列你必须执行的操作。每个询问要么询问关于数列的信息，要么修改现有的数列。下面列出了所有可能的操作类型。\n\n查询种类|描述|例子|\n:-:|:-:|:-:\n`1 A B X`|将 $[A,B]$ 中所有元素值更改为 $X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)\\to$ $1$ $3$ $5$ $0$ $\\to$ $(9, 8, 0, 0, 0, 4, 3, 2, 1)$\n`2 A B X`|将 $[A,B]$ 中所有元素增加一数，第 $A+k$ 位增加 $(k+1) \\times X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)\\to$ $2$ $3$ $5$ $2$ $\\to (9, 8, 9, 10, 11, 4, 3, 2, 1)$\n`3 C X`|在原来的第 $C$ 位前插入一个数，数值为 $X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)$ $\\to$ $3$ $4$ $100$ $\\to$ $(9, 8, 7, 100, 6, 5, 4, 3, 2, 1)$\n`4 A B`|查询 $[A,B]$ 的数值和|$(2, 18, 7, 6, 1, 4, 7, 7, 2)$ $\\to$ $4$ $6$ $7$ $\\to$ $result: 11$", "description": "给定一个数列 $f$ ，有以下操作。\n\n设数列当前长度为 $n$。\n\n|查询种类|描述|\n|:-:|:-:|\n`1 A B X`| $f_i=X(A \\le i \\le B)$\n`2 A B X`| $f_i+=(i-A+1) \\times X(A \\le i \\le B)$\n`3 C X`| $f_{i+1}=f_i(C \\le i \\le n)$ $f_C=X$\n`4 A B`| 求$\\sum^B_{i=A}f_i$", "inputFormat": "第一行两个正整数 $n$ , $Q$，分别表示数列初始长度和操作数量。\n\n第二行 $n$ 个非负整数表示初始数列。\n\n接下来 $Q$ 行每行各包含一个如上询问。", "outputFormat": "对于每一个 $4$ 号操作，输出一行答案。", "hint": "#### 数据规模及约定\n\n\n设当前数列长 $t$。\n\n对于 $100\\%$ 的数据 $1 \\le n$ , $Q \\le 1 \\times 10^5$ , $f_i \\le 1 \\times 10^5$ , $1 \\le X \\le 100$ , $1 \\le A \\le B \\le t$ , $1 \\le C \\le t + 1$。\n\n#### 说明\n\n本题满分 $130$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T6 UPIT。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7] UPIT", "background": "Mirko 厌倦了为了各种任务去实现各种数据结构。所以，他决定写一个终极数据结构去操纵他最喜欢的数字序列。\n\n快来帮助他吧！\n\nMirko 会给你他的数列，以及一系列你必须执行的操作。每个询问要么询问关于数列的信息，要么修改现有的数列。下面列出了所有可能的操作类型。\n\n查询种类|描述|例子|\n:-:|:-:|:-:\n`1 A B X`|将 $[A,B]$ 中所有元素值更改为 $X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)\\to$ $1$ $3$ $5$ $0$ $\\to$ $(9, 8, 0, 0, 0, 4, 3, 2, 1)$\n`2 A B X`|将 $[A,B]$ 中所有元素增加一数，第 $A+k$ 位增加 $(k+1) \\times X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)\\to$ $2$ $3$ $5$ $2$ $\\to (9, 8, 9, 10, 11, 4, 3, 2, 1)$\n`3 C X`|在原来的第 $C$ 位前插入一个数，数值为 $X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)$ $\\to$ $3$ $4$ $100$ $\\to$ $(9, 8, 7, 100, 6, 5, 4, 3, 2, 1)$\n`4 A B`|查询 $[A,B]$ 的数值和|$(2, 18, 7, 6, 1, 4, 7, 7, 2)$ $\\to$ $4$ $6$ $7$ $\\to$ $result: 11$", "description": "给定一个数列 $f$ ，有以下操作。\n\n设数列当前长度为 $n$。\n\n|查询种类|描述|\n|:-:|:-:|\n`1 A B X`| $f_i=X(A \\le i \\le B)$\n`2 A B X`| $f_i+=(i-A+1) \\times X(A \\le i \\le B)$\n`3 C X`| $f_{i+1}=f_i(C \\le i \\le n)$ $f_C=X$\n`4 A B`| 求$\\sum^B_{i=A}f_i$", "inputFormat": "第一行两个正整数 $n$ , $Q$，分别表示数列初始长度和操作数量。\n\n第二行 $n$ 个非负整数表示初始数列。\n\n接下来 $Q$ 行每行各包含一个如上询问。", "outputFormat": "对于每一个 $4$ 号操作，输出一行答案。", "hint": "#### 数据规模及约定\n\n\n设当前数列长 $t$。\n\n对于 $100\\%$ 的数据 $1 \\le n$ , $Q \\le 1 \\times 10^5$ , $f_i \\le 1 \\times 10^5$ , $1 \\le X \\le 100$ , $1 \\le A \\le B \\le t$ , $1 \\le C \\le t + 1$。\n\n#### 说明\n\n本题满分 $130$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T6 UPIT。\n", "locale": "zh-CN"}}}
{"pid": "P6708", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n", "0.5"], ["7\n1 2 3 1 1 2 3", "0.57142857"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2020", "Special Judge", "CCC（加拿大）", "期望"], "title": "[CCC 2020] Josh's Double Bacon Deluxe", "background": "Josh 和 $N-1$ 个人去吃汉堡。", "description": "这个汉堡店共有 $M$ 种汉堡。\n\n第 $i$ 个人最喜欢吃的汉堡为第 $b_i$ 种汉堡。\n\n这 $N$ 个人都会选他最喜欢吃的汉堡。\n\n现在，这 $N$ 个人排队去取汉堡，不幸的是，第一个人忘记了他最喜欢的汉堡，于是他随便拿了一个汉堡。\n\n接下来的 $N-2$ 个人会按如下规则拿汉堡：\n- 如果有他最喜欢的汉堡，就直接拿走。\n- 否则，他会随便拿一个。\n\n您需要求出，**排在最后**的 Josh 拿到他最喜欢汉堡的概率。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来 $N$ 行，一行一个整数 $b_i$。", "outputFormat": "一行一个小数，表示**排在最后**的 Josh 拿到他最喜欢汉堡的概率。", "hint": "#### 样例 1 解释\n| 第一个人的选择 | 第二个人的选择 | Josh 的选择 | 概率 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $3$ | $\\frac{1}{3}$ |\n| $2$ | $1$ | $3$ | $\\frac{1}{3}\\times \\frac{1}{2}=\\frac{1}{6}$ |\n| $2$ | $3$ | $1$ | $\\frac{1}{6}$ |\n| $3$ | $2$ | $1$ | $\\frac{1}{3}$ |\n\nJosh 拿到他最喜欢汉堡的概率为 $\\frac{1}{3}+\\frac{1}{6}=\\frac{1}{2}$。\n\n#### SPJ 计分标准\n设正确答案为 $C$，你的答案为 $P$，若 $\\lvert P-C\\rvert <10^{-6}$，则您得该测试点的满分，否则，您得零分。\n\n#### 子任务\n**本题采用捆绑测试，且本题的 Subtask 分数有微调。**\n- Subtask 1（$27$ 分）：保证 $N\\le 10^5$，$M\\le 10^3$。\n- Subtask 2（$33$ 分）：保证 $M\\le 10^3$。\n- Subtask 3（$40$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $3\\le N\\le 10^6$，$1\\le b_i\\le M\\le 5\\times 10^5$。\n\n#### 说明\n本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/seniorEF.pdf) T5 Josh's Double Bacon Deluxe。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Josh's Double Bacon Deluxe", "background": "Josh 和 $N-1$ 个人去吃汉堡。", "description": "这个汉堡店共有 $M$ 种汉堡。\n\n第 $i$ 个人最喜欢吃的汉堡为第 $b_i$ 种汉堡。\n\n这 $N$ 个人都会选他最喜欢吃的汉堡。\n\n现在，这 $N$ 个人排队去取汉堡，不幸的是，第一个人忘记了他最喜欢的汉堡，于是他随便拿了一个汉堡。\n\n接下来的 $N-2$ 个人会按如下规则拿汉堡：\n- 如果有他最喜欢的汉堡，就直接拿走。\n- 否则，他会随便拿一个。\n\n您需要求出，**排在最后**的 Josh 拿到他最喜欢汉堡的概率。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来 $N$ 行，一行一个整数 $b_i$。", "outputFormat": "一行一个小数，表示**排在最后**的 Josh 拿到他最喜欢汉堡的概率。", "hint": "#### 样例 1 解释\n| 第一个人的选择 | 第二个人的选择 | Josh 的选择 | 概率 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $3$ | $\\frac{1}{3}$ |\n| $2$ | $1$ | $3$ | $\\frac{1}{3}\\times \\frac{1}{2}=\\frac{1}{6}$ |\n| $2$ | $3$ | $1$ | $\\frac{1}{6}$ |\n| $3$ | $2$ | $1$ | $\\frac{1}{3}$ |\n\nJosh 拿到他最喜欢汉堡的概率为 $\\frac{1}{3}+\\frac{1}{6}=\\frac{1}{2}$。\n\n#### SPJ 计分标准\n设正确答案为 $C$，你的答案为 $P$，若 $\\lvert P-C\\rvert <10^{-6}$，则您得该测试点的满分，否则，您得零分。\n\n#### 子任务\n**本题采用捆绑测试，且本题的 Subtask 分数有微调。**\n- Subtask 1（$27$ 分）：保证 $N\\le 10^5$，$M\\le 10^3$。\n- Subtask 2（$33$ 分）：保证 $M\\le 10^3$。\n- Subtask 3（$40$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $3\\le N\\le 10^6$，$1\\le b_i\\le M\\le 5\\times 10^5$。\n\n#### 说明\n本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/seniorEF.pdf) T5 Josh's Double Bacon Deluxe。", "locale": "zh-CN"}}}
