{"pid": "P7400", "type": "P", "difficulty": 6, "samples": [["3\n1 3\n3 2 magenta\n2 1 magenta", "Paula"], ["5\n3 5\n1 2 magenta\n1 3 magenta\n2 4 plava\n2 5 crvena", "Marin"], ["5\n1 4\n2 1 plava\n1 3 crvena\n5 2 plava\n4 1 magenta", "Magenta"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #5] Magenta", "background": "", "description": "给定一个包含 $n$ 个结点，$n-1$ 条边的连通图，其中结点编号分别为 $1,2,\\cdots,n$。这 $n-1$ 条边被涂成了不同的颜色，其中包含蓝色、红色和洋红。\n\nPaula 和 Marin 的棋子分别从结点 $a$ 和 $b$ 出发。两人轮流行走，Paula 先走。Paula 的棋子只能沿着蓝色或洋红的边行走，而 Marin 的棋子只能沿着红色或洋红的边行走。然而，任何时候都不能行走都对方棋子所在的位置。如果由一方的棋子无法行走，则另一方获胜。\n\n如果 Paula 和 Marin 每次都使用最优的走法，求最终胜利的一方。如果游戏无法决出胜负，则为平局。", "inputFormat": "第一行输入整数 $n$，表示结点的数量。\n\n第二行输入整数 $a,b$，表示 Paula 和 Marin 棋子的初始位置。\n\n接下来的 $n-1$ 行，每行输入两个整数 $x,y$ 和一个字符串 $\\text{color}$。如果 $\\text{color}$ 为 $\\texttt{plava}$，则表示连接 $x,y$ 的边的颜色为蓝色；如果为 $\\texttt{crvena}$，则表示颜色为红色；如果为 $\\texttt{magenta}$ 则为洋红。", "outputFormat": "如果 Paula 获胜，则输出 $\\texttt{Paula}$。\n\n如果 Marin 获胜，则输出 $\\texttt{Marin}$。\n\n如果游戏平局，则输出 $\\texttt{Magenta}$。", "hint": "#### 样例 1 解释\n\nPaula 的最优走法为前往结点 $2$，此时 Marin 无法行走。\n\n#### 样例 2 解释\n\nPaula 将前往结点 $1$，而 Marin 会前往结点 $2$。Paula 只能前往结点 $3$，此时 Marin 前往结点 $1$。这时 Paula 无法行走，Marin 获胜：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/03flhrlq.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n|Subtask|分值|数据范围及约定|\n| :----------: | :----------: | :----------: |\n|$1$|$30$|$2 \\le n \\le 100$|\n|$2$|$30$|连通图中所有边的颜色都为洋红|\n|$3$|$50$|无|\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5$，$1 \\le a,b \\le n$，$a \\neq b$，$1 \\le x,y \\le n$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #5](https://hsin.hr/coci/contest5_tasks.pdf)  _T3 Magenta_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #5] Magenta", "background": "", "description": "给定一个包含 $n$ 个结点，$n-1$ 条边的连通图，其中结点编号分别为 $1,2,\\cdots,n$。这 $n-1$ 条边被涂成了不同的颜色，其中包含蓝色、红色和洋红。\n\nPaula 和 Marin 的棋子分别从结点 $a$ 和 $b$ 出发。两人轮流行走，Paula 先走。Paula 的棋子只能沿着蓝色或洋红的边行走，而 Marin 的棋子只能沿着红色或洋红的边行走。然而，任何时候都不能行走都对方棋子所在的位置。如果由一方的棋子无法行走，则另一方获胜。\n\n如果 Paula 和 Marin 每次都使用最优的走法，求最终胜利的一方。如果游戏无法决出胜负，则为平局。", "inputFormat": "第一行输入整数 $n$，表示结点的数量。\n\n第二行输入整数 $a,b$，表示 Paula 和 Marin 棋子的初始位置。\n\n接下来的 $n-1$ 行，每行输入两个整数 $x,y$ 和一个字符串 $\\text{color}$。如果 $\\text{color}$ 为 $\\texttt{plava}$，则表示连接 $x,y$ 的边的颜色为蓝色；如果为 $\\texttt{crvena}$，则表示颜色为红色；如果为 $\\texttt{magenta}$ 则为洋红。", "outputFormat": "如果 Paula 获胜，则输出 $\\texttt{Paula}$。\n\n如果 Marin 获胜，则输出 $\\texttt{Marin}$。\n\n如果游戏平局，则输出 $\\texttt{Magenta}$。", "hint": "#### 样例 1 解释\n\nPaula 的最优走法为前往结点 $2$，此时 Marin 无法行走。\n\n#### 样例 2 解释\n\nPaula 将前往结点 $1$，而 Marin 会前往结点 $2$。Paula 只能前往结点 $3$，此时 Marin 前往结点 $1$。这时 Paula 无法行走，Marin 获胜：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/03flhrlq.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n|Subtask|分值|数据范围及约定|\n| :----------: | :----------: | :----------: |\n|$1$|$30$|$2 \\le n \\le 100$|\n|$2$|$30$|连通图中所有边的颜色都为洋红|\n|$3$|$50$|无|\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5$，$1 \\le a,b \\le n$，$a \\neq b$，$1 \\le x,y \\le n$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #5](https://hsin.hr/coci/contest5_tasks.pdf)  _T3 Magenta_。**", "locale": "zh-CN"}}}
{"pid": "P7401", "type": "P", "difficulty": 5, "samples": [["9 6\n0 0\n1 2\n3 0\n6 3\n8 1\n9 2\n11 1\n12 4\n14 0", "1"], ["9 5\n-5 2\n-4 3\n-2 1\n0 4\n2 2\n3 3\n4 1\n5 2\n6 1", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "凸包", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #5] Planine", "background": null, "description": "现有一座上下起伏的山。它可以抽象为一个包含 $n$（$n$ 为奇数）个点 $(x_i,y_i)$ 以及 $(x_1,-\\inf)$ 与 $(x_n,-\\inf)$ 的多边形。\n\n对于所有满足 $i \\neq 1$，$i \\neq n$，$i \\bmod 2=1$ 的整数 $i$，$(x_i,y_i)$ 都是山谷。\n\n现要放置若干个高度为 $h$ 的点光源，使得所有的山谷都被照亮，即点光源与山谷的连线不经过山的内部。\n\n求所需点光源的最少数量。", "inputFormat": "第一行输入整数 $n,h$。\n\n接下来的 $n$ 行，每行输入整数 $x_i,y_i$。\n\n保证 $x_1 \\lt x_2 \\lt \\cdots \\lt x_n$ 且 $y_1 \\lt y_2,y_2 \\gt y_3,y_3 \\lt y_4,\\cdots,y_{n-1} \\gt y_n$。", "outputFormat": "输出所需点光源的最少数量。", "hint": "#### 样例 1 图解\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6u2zqy65.png)\n\n#### 样例 2 图解\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e3mn6dt6.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n|Subtask|分值|数据范围及约定|\n| :----------: | :----------: | :----------: |\n|$1$|$20$|$y_2=y_4=\\cdots=y_{n-1}$|\n|$2$|$30$|$3 \\le n \\lt 2000$|\n|$3$|$60$|无|\n\n对于 $100\\%$ 的数据，$3 \\le n \\lt 10^6$，$n \\bmod 2=1$，$1 \\le h \\le 10^6$，$-10^6 \\le x_i \\le 10^6$，$0 \\le y_i \\lt h$，$x_1 \\lt x_2 \\lt \\cdots \\lt x_n$，$y_1 \\lt y_2,y_2 \\gt y_3,y_3 \\lt y_4,\\cdots,y_{n-1} \\gt y_n$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/archive/2020_2021/) [CONTEST #5](https://hsin.hr/coci/archive/2020_2021/contest5_tasks.pdf)  _T4 Planine_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #5] Planine", "background": null, "description": "现有一座上下起伏的山。它可以抽象为一个包含 $n$（$n$ 为奇数）个点 $(x_i,y_i)$ 以及 $(x_1,-\\inf)$ 与 $(x_n,-\\inf)$ 的多边形。\n\n对于所有满足 $i \\neq 1$，$i \\neq n$，$i \\bmod 2=1$ 的整数 $i$，$(x_i,y_i)$ 都是山谷。\n\n现要放置若干个高度为 $h$ 的点光源，使得所有的山谷都被照亮，即点光源与山谷的连线不经过山的内部。\n\n求所需点光源的最少数量。", "inputFormat": "第一行输入整数 $n,h$。\n\n接下来的 $n$ 行，每行输入整数 $x_i,y_i$。\n\n保证 $x_1 \\lt x_2 \\lt \\cdots \\lt x_n$ 且 $y_1 \\lt y_2,y_2 \\gt y_3,y_3 \\lt y_4,\\cdots,y_{n-1} \\gt y_n$。", "outputFormat": "输出所需点光源的最少数量。", "hint": "#### 样例 1 图解\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6u2zqy65.png)\n\n#### 样例 2 图解\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e3mn6dt6.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n|Subtask|分值|数据范围及约定|\n| :----------: | :----------: | :----------: |\n|$1$|$20$|$y_2=y_4=\\cdots=y_{n-1}$|\n|$2$|$30$|$3 \\le n \\lt 2000$|\n|$3$|$60$|无|\n\n对于 $100\\%$ 的数据，$3 \\le n \\lt 10^6$，$n \\bmod 2=1$，$1 \\le h \\le 10^6$，$-10^6 \\le x_i \\le 10^6$，$0 \\le y_i \\lt h$，$x_1 \\lt x_2 \\lt \\cdots \\lt x_n$，$y_1 \\lt y_2,y_2 \\gt y_3,y_3 \\lt y_4,\\cdots,y_{n-1} \\gt y_n$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/archive/2020_2021/) [CONTEST #5](https://hsin.hr/coci/archive/2020_2021/contest5_tasks.pdf)  _T4 Planine_。**", "locale": "zh-CN"}}}
{"pid": "P7402", "type": "P", "difficulty": 6, "samples": [["4 3\n1 2 3 4\n1 2 1\n1 1 2\n2 3 1", "2\n2\n0"], ["4 3\n2 0 2 1\n4 4 1\n2 2 3\n1 3 2", "2\n1\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2020", "线段树", "差分", "COCI（克罗地亚）", "Ad-hoc", "动态 DP"], "title": "[COCI 2020/2021 #5] Sjeckanje", "background": "", "description": "给定一个包含 $n$ 个整数的数组 $a$。接着进行 $q$ 次修改，每次给定整数 $l,r,x$。表示将 $[l,r]$ 内的所有元素加上 $x$。\n\n规定一个区间的权值为**该区间的最大值减去最小值**。现要将 $a$ 数组分为若干个连续的区间。规定一个已被分为若干个区间的数组的权值为**该数组所有区间的权值之和**。求数组 $a$ 在**每次修改**后的所有分法中，数组权值的最大值。", "inputFormat": "第一行输入整数 $n,q$，分别表示数组的长度和修改的次数。\n\n第二行输入 $n$ 个整数 $a_i$。\n\n接下来的 $q$ 行，每行输入整数 $l,r,x$，表示修改的信息。", "outputFormat": "输出 $q$ 行，其中第 $i$ 行输出数组 $a$ 在第 $i$ 次修改后的所有分法中，数组权值的最大值。", "hint": "#### 样例 1 解释\n\n|修改次数|本次修改后的数组|其中一种最优分法|数组权值|\n| :----------: | :----------: | :----------: | :----------: |\n|$1$|$[2,3,3,4]$|$[2,3,3,4]$|$2$|\n|$2$|$[4,3,3,4]$|$[4,3],[3,4]$|$2$|\n|$3$|$[4,4,4,4]$|$[4,4,4,4]$|$0$|\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n|Subtask|分值|数据范围及约定|\n| :----------: | :----------: | :----------: |\n|$1$|$15$|$1 \\le n,q \\le 200$|\n|$2$|$40$|$1 \\le n,q \\le 3000$|\n|$3$|$55$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n,q \\le 2 \\times 10^5$，$-10^8 \\le a_i,x \\le 10^8$，$1 \\le l \\le r \\le n$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #5](https://hsin.hr/coci/contest5_tasks.pdf)  _T5 Sjeckanje_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #5] Sjeckanje", "background": "", "description": "给定一个包含 $n$ 个整数的数组 $a$。接着进行 $q$ 次修改，每次给定整数 $l,r,x$。表示将 $[l,r]$ 内的所有元素加上 $x$。\n\n规定一个区间的权值为**该区间的最大值减去最小值**。现要将 $a$ 数组分为若干个连续的区间。规定一个已被分为若干个区间的数组的权值为**该数组所有区间的权值之和**。求数组 $a$ 在**每次修改**后的所有分法中，数组权值的最大值。", "inputFormat": "第一行输入整数 $n,q$，分别表示数组的长度和修改的次数。\n\n第二行输入 $n$ 个整数 $a_i$。\n\n接下来的 $q$ 行，每行输入整数 $l,r,x$，表示修改的信息。", "outputFormat": "输出 $q$ 行，其中第 $i$ 行输出数组 $a$ 在第 $i$ 次修改后的所有分法中，数组权值的最大值。", "hint": "#### 样例 1 解释\n\n|修改次数|本次修改后的数组|其中一种最优分法|数组权值|\n| :----------: | :----------: | :----------: | :----------: |\n|$1$|$[2,3,3,4]$|$[2,3,3,4]$|$2$|\n|$2$|$[4,3,3,4]$|$[4,3],[3,4]$|$2$|\n|$3$|$[4,4,4,4]$|$[4,4,4,4]$|$0$|\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n|Subtask|分值|数据范围及约定|\n| :----------: | :----------: | :----------: |\n|$1$|$15$|$1 \\le n,q \\le 200$|\n|$2$|$40$|$1 \\le n,q \\le 3000$|\n|$3$|$55$|无|\n\n对于 $100\\%$ 的数据，$1 \\le n,q \\le 2 \\times 10^5$，$-10^8 \\le a_i,x \\le 10^8$，$1 \\le l \\le r \\le n$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #5](https://hsin.hr/coci/contest5_tasks.pdf)  _T5 Sjeckanje_。**", "locale": "zh-CN"}}}
{"pid": "P7403", "type": "P", "difficulty": 4, "samples": [["3\n1\n2\n1 ", "SOLUTION\n2\n1 3\n2 "], ["3\n2\n2\n1 ", "NO SOLUTION"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2002] Tennis Club (Day1)", "background": "", "description": "有 $N$ 个人想互相交朋友，第 $i$ 个人想和 $G_i$ 个人交朋友。\n\n求一种交朋友的分配方式。", "inputFormat": "第一行一个整数 $N$ 代表人数。       \n接下来 $N$ 行每行一个整数 $G_i$ 代表第 $i$ 个人想和 $G_i$ 个人交朋友。", "outputFormat": "如果无解，一行输出 `NO SOLUTION`。     \n如果有解，首先一行输出 `SOLUTION`。      \n接下来 $N$ 行每行 $G_i$ 个整数代表第 $i$ 个人与哪几个人交朋友。\n\n注意如果有方案第 $i$ 行的 $G_i$ 个整数请升序输出。      \n如果有多种方案，任意输出一种即可。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 1000$，$1 \\le G_i < N$。\n\n**本题使用 Special\nJudge。**\n\n#### 说明\n\n翻译自 [BalticOI 2002 Day1 B Tennis Club](https://boi.cses.fi/files/boi2002_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2002] Tennis Club (Day1)", "background": "", "description": "有 $N$ 个人想互相交朋友，第 $i$ 个人想和 $G_i$ 个人交朋友。\n\n求一种交朋友的分配方式。", "inputFormat": "第一行一个整数 $N$ 代表人数。       \n接下来 $N$ 行每行一个整数 $G_i$ 代表第 $i$ 个人想和 $G_i$ 个人交朋友。", "outputFormat": "如果无解，一行输出 `NO SOLUTION`。     \n如果有解，首先一行输出 `SOLUTION`。      \n接下来 $N$ 行每行 $G_i$ 个整数代表第 $i$ 个人与哪几个人交朋友。\n\n注意如果有方案第 $i$ 行的 $G_i$ 个整数请升序输出。      \n如果有多种方案，任意输出一种即可。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 1000$，$1 \\le G_i < N$。\n\n**本题使用 Special\nJudge。**\n\n#### 说明\n\n翻译自 [BalticOI 2002 Day1 B Tennis Club](https://boi.cses.fi/files/boi2002_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7404", "type": "P", "difficulty": 3, "samples": [["5\n3 2 2 3 1", "3"], ["5\n9 7 5 3 1", "0"], ["2\n2021 2021", "1"], ["8\n12 2 34 85 4 91 29 85", "93"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "O2优化", "差分", "JOI（日本）"], "title": "[JOI 2021 Final] 有趣的家庭菜园 4 / Growing Vegetables is Fun 4", "background": null, "description": "给定一个长为 $N$ 的序列 $A$，你可以进行若干次操作：\n\n- 选定一个区间 $[L,R]$，让这个区间里的数加 $1$。\n\n设经过这若干次操作后的序列为 $B$，那么你需要让 $B$ 满足下面这个要求：\n\n- 存在一个整数 $k \\in [1,N]$，满足对于子序列 $A_1=\\{B_1,B_2,\\cdots,B_k\\}$ 为严格递增序列，对于子序列 $A_2=\\{B_k,B_{k+1},\\cdots,B_N\\}$ 为严格递减序列。\n\n你想知道最少需要多少次操作才能满足上面这个要求。", "inputFormat": "第一行一个整数 $N$ 代表序列长度。\n\n第二行 $N$ 个整数，代表序列 $A$。", "outputFormat": "一行一个整数代表最小操作次数。", "hint": "#### 样例 1 解释\n\n- 对 $[2,5]$ 进行操作，序列变为 $\\{3,3,3,4,2\\}$。\n- 对 $[2,3]$ 进行操作，序列变为 $\\{3,4,4,4,2\\}$。\n- 对 $[3,3]$ 进行操作，序列变为 $\\{3,4,5,4,2\\}$。\n\n#### 样例 2 解释\n\n序列已经满足要求，不需要操作。\n\n#### 样例 3 解释\n\n对区间 $[1,1]$ 或 $[2,2]$ 进行操作都可。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（40 pts）：$N \\le 2000$。\n- Subtask 2（60 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 2 \\times 10^5$，$1 \\le A_i \\le 10^9$。\n\n#### 说明\n\n翻译自 [The 20th Japanese Olympiad in Informatics Final Round A とてもたのしい家庭菜園 4 的英文翻译 Growing Vegetables is Fun 4](https://www.ioi-jp.org/joi/2020/2021-ho/2021-ho-t1-en.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2021 Final] 有趣的家庭菜园 4 / Growing Vegetables is Fun 4", "background": null, "description": "给定一个长为 $N$ 的序列 $A$，你可以进行若干次操作：\n\n- 选定一个区间 $[L,R]$，让这个区间里的数加 $1$。\n\n设经过这若干次操作后的序列为 $B$，那么你需要让 $B$ 满足下面这个要求：\n\n- 存在一个整数 $k \\in [1,N]$，满足对于子序列 $A_1=\\{B_1,B_2,\\cdots,B_k\\}$ 为严格递增序列，对于子序列 $A_2=\\{B_k,B_{k+1},\\cdots,B_N\\}$ 为严格递减序列。\n\n你想知道最少需要多少次操作才能满足上面这个要求。", "inputFormat": "第一行一个整数 $N$ 代表序列长度。\n\n第二行 $N$ 个整数，代表序列 $A$。", "outputFormat": "一行一个整数代表最小操作次数。", "hint": "#### 样例 1 解释\n\n- 对 $[2,5]$ 进行操作，序列变为 $\\{3,3,3,4,2\\}$。\n- 对 $[2,3]$ 进行操作，序列变为 $\\{3,4,4,4,2\\}$。\n- 对 $[3,3]$ 进行操作，序列变为 $\\{3,4,5,4,2\\}$。\n\n#### 样例 2 解释\n\n序列已经满足要求，不需要操作。\n\n#### 样例 3 解释\n\n对区间 $[1,1]$ 或 $[2,2]$ 进行操作都可。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（40 pts）：$N \\le 2000$。\n- Subtask 2（60 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 2 \\times 10^5$，$1 \\le A_i \\le 10^9$。\n\n#### 说明\n\n翻译自 [The 20th Japanese Olympiad in Informatics Final Round A とてもたのしい家庭菜園 4 的英文翻译 Growing Vegetables is Fun 4](https://www.ioi-jp.org/joi/2020/2021-ho/2021-ho-t1-en.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7405", "type": "P", "difficulty": 5, "samples": [["4 3\n-2 3 5 8\n2\n-4\n7", "5\n4\n2\n6"], ["1 4\n1000000000000\n1000000000000\n-1000000000000\n-1000000000000\n-1000000000000", "3000000000000"], ["10 10\n-56 -43 -39 -31 -22 -5 0 12 18 22\n-3\n0\n5\n-4\n-2\n10\n-13\n-1\n9\n6", "14\n8\n7\n9\n11\n10\n9\n8\n5\n10"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "O2优化", "JOI（日本）"], "title": "[JOI 2021 Final] 雪球 / Snowball", "background": "", "description": "在一条无限长的数轴上，有 $N$ 个雪球，这 $N$ 个雪球编号为 $1 \\sim N$，第 $i$ 个雪球在第 $A_i$ 个点上。刚开始，整条数轴覆盖满了雪，接下来 $Q$ 天将会刮起大风，第 $j$ 天的风力强度为 $W_j$，如果 $W_j$ 为正数，所有雪球都朝右移动 $W_j$ 个单位长度，如果 $W_j$ 为负数，所有雪球都朝左移动 $-W_j$ 个单位长度。\n\n当一个区间 $[a,a+1]$ 被雪覆盖时，雪球滚上去雪球的质量会加一，这一个区间里的雪也会被清空。刚开始每一个雪球的质量均为 $0$，而这 $Q$ 天里也没有再下雪。\n\n你想问这 $Q$ 天结束后每个雪球的质量是怎样的。", "inputFormat": "第一行两个整数 $N,Q$ 代表雪球个数和下雪天数。\n\n第二行 $N$ 个整数 $A_i$ 代表这 $N$ 个雪球的初始位置。\n\n接下来 $Q$ 行每行一个整数 $W_j$ 代表每一天的风力强度。", "outputFormat": "$N$ 行每行一个整数代表这 $Q$ 天结束后每一个雪球的质量。", "hint": "#### 样例 1 解释\n\n雪球初始位置为 $-2,3,5,8$，初始质量为 $0,0,0,0$。\n\n- 第一天过后，雪球位置为 $0,5,7,10$，质量为 $2,2,2,2$。\n- 第二天过后，雪球位置为 $-4,1,3,6$，质量为 $4,4,2,3$。\n- 第三天过后，雪球位置为 $3,8,10,13$，质量为 $5,4,2,6$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（33 pts）：$N,Q \\le 2000$。\n- Subtask 2（67 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,Q \\le 2 \\times 10^5$，$|A_i|,|W_j| \\le 10^{12}$，$A_i<A_{i+1}$。\n\n#### 说明\n\n翻译自 [The 20th Japanese Olympiad in Informatics Final Round B 雪玉的英文翻译 Snowball](https://www.ioi-jp.org/joi/2020/2021-ho/2021-ho-t2-en.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2021 Final] 雪球 / Snowball", "background": "", "description": "在一条无限长的数轴上，有 $N$ 个雪球，这 $N$ 个雪球编号为 $1 \\sim N$，第 $i$ 个雪球在第 $A_i$ 个点上。刚开始，整条数轴覆盖满了雪，接下来 $Q$ 天将会刮起大风，第 $j$ 天的风力强度为 $W_j$，如果 $W_j$ 为正数，所有雪球都朝右移动 $W_j$ 个单位长度，如果 $W_j$ 为负数，所有雪球都朝左移动 $-W_j$ 个单位长度。\n\n当一个区间 $[a,a+1]$ 被雪覆盖时，雪球滚上去雪球的质量会加一，这一个区间里的雪也会被清空。刚开始每一个雪球的质量均为 $0$，而这 $Q$ 天里也没有再下雪。\n\n你想问这 $Q$ 天结束后每个雪球的质量是怎样的。", "inputFormat": "第一行两个整数 $N,Q$ 代表雪球个数和下雪天数。\n\n第二行 $N$ 个整数 $A_i$ 代表这 $N$ 个雪球的初始位置。\n\n接下来 $Q$ 行每行一个整数 $W_j$ 代表每一天的风力强度。", "outputFormat": "$N$ 行每行一个整数代表这 $Q$ 天结束后每一个雪球的质量。", "hint": "#### 样例 1 解释\n\n雪球初始位置为 $-2,3,5,8$，初始质量为 $0,0,0,0$。\n\n- 第一天过后，雪球位置为 $0,5,7,10$，质量为 $2,2,2,2$。\n- 第二天过后，雪球位置为 $-4,1,3,6$，质量为 $4,4,2,3$。\n- 第三天过后，雪球位置为 $3,8,10,13$，质量为 $5,4,2,6$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（33 pts）：$N,Q \\le 2000$。\n- Subtask 2（67 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,Q \\le 2 \\times 10^5$，$|A_i|,|W_j| \\le 10^{12}$，$A_i<A_{i+1}$。\n\n#### 说明\n\n翻译自 [The 20th Japanese Olympiad in Informatics Final Round B 雪玉的英文翻译 Snowball](https://www.ioi-jp.org/joi/2020/2021-ho/2021-ho-t2-en.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7406", "type": "P", "difficulty": 5, "samples": [["5\n3 5 2 4 1", "3"], ["5\n3 2 1 5 4", "0"], ["9\n6 1 3 4 9 5 7 8 2", "9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2021", "O2优化", "前缀和", "JOI（日本）"], "title": "[JOI 2021 Final] 集体照 / Group Photo", "background": "", "description": "有 $N$ 个人，这 $N$ 个人编号为 $1 \\sim N$，第 $h$ 个人的身高为 $h$。\n\n有 $N$ 个台阶，这 $N$ 个台阶从低到高编号为 $1 \\sim N$，第 $i$ 级台阶比第 $i+1$ 个台阶低 $2$ 个单位高度。每个台阶上只能站一个人，第 $H_i$ 个人站在第 $i$ 个台阶上。\n\n你可以进行无数次如下操作：\n\n- 选择 $i \\in [1,N-1]$，交换第 $i$ 个台阶上的人和第 $i+1$ 个台阶上的人。\n\n假设第 $i$ 个台阶上站的人的高度为 $a_i$，你要满足：\n\n- 对于任意 $i \\in [1,N-1]$，都有 $a_i <a_{i+1}+2$。\n\n求最少的操作次数。", "inputFormat": "第一行一个整数 $N$ 代表人数。\n\n第二行 $N$ 个整数 $H_i$ 代表第 $H_i$ 个人站在第 $i$ 个台阶上。", "outputFormat": "一行一个整数代表最少的操作次数。", "hint": "#### 样例 1 解释\n\n设 $h_i$ 为第 $i$ 个台阶上站的人的身高：\n\n- 交换第 $2$ 个人和第 $3$ 个人，$h_i=\\{3,2,5,4,1\\}$。\n- 交换第 $4$ 个人和第 $5$ 个人，$h_i=\\{3,2,5,1,4\\}$。\n- 交换第 $3$ 个人和第 $4$ 个人，$h_i=\\{3,2,1,5,4\\}$。\n\n$3$ 步刚好满足要求。\n\n#### 样例 2 解释\n\n已经满足要求，不需要进行任何操作。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N \\le 9$。\n- Subtask 2（7 pts）：$N \\le 20$。\n- Subtask 3（32 pts）：$N \\le 200$。\n- Subtask 4（20 pts）：$N \\le 800$。\n- Subtask 5（36 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$3 \\le N \\le 5000$，$1 \\le H_i \\le N$，$H_i$ 互不相等。\n\n#### 说明\n\n翻译自 [The 20th Japanese Olympiad in Informatics Final Round C 集合写真的英文翻译 Group Photo](https://www.ioi-jp.org/joi/2020/2021-ho/2021-ho-t3-en.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2021 Final] 集体照 / Group Photo", "background": "", "description": "有 $N$ 个人，这 $N$ 个人编号为 $1 \\sim N$，第 $h$ 个人的身高为 $h$。\n\n有 $N$ 个台阶，这 $N$ 个台阶从低到高编号为 $1 \\sim N$，第 $i$ 级台阶比第 $i+1$ 个台阶低 $2$ 个单位高度。每个台阶上只能站一个人，第 $H_i$ 个人站在第 $i$ 个台阶上。\n\n你可以进行无数次如下操作：\n\n- 选择 $i \\in [1,N-1]$，交换第 $i$ 个台阶上的人和第 $i+1$ 个台阶上的人。\n\n假设第 $i$ 个台阶上站的人的高度为 $a_i$，你要满足：\n\n- 对于任意 $i \\in [1,N-1]$，都有 $a_i <a_{i+1}+2$。\n\n求最少的操作次数。", "inputFormat": "第一行一个整数 $N$ 代表人数。\n\n第二行 $N$ 个整数 $H_i$ 代表第 $H_i$ 个人站在第 $i$ 个台阶上。", "outputFormat": "一行一个整数代表最少的操作次数。", "hint": "#### 样例 1 解释\n\n设 $h_i$ 为第 $i$ 个台阶上站的人的身高：\n\n- 交换第 $2$ 个人和第 $3$ 个人，$h_i=\\{3,2,5,4,1\\}$。\n- 交换第 $4$ 个人和第 $5$ 个人，$h_i=\\{3,2,5,1,4\\}$。\n- 交换第 $3$ 个人和第 $4$ 个人，$h_i=\\{3,2,1,5,4\\}$。\n\n$3$ 步刚好满足要求。\n\n#### 样例 2 解释\n\n已经满足要求，不需要进行任何操作。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N \\le 9$。\n- Subtask 2（7 pts）：$N \\le 20$。\n- Subtask 3（32 pts）：$N \\le 200$。\n- Subtask 4（20 pts）：$N \\le 800$。\n- Subtask 5（36 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$3 \\le N \\le 5000$，$1 \\le H_i \\le N$，$H_i$ 互不相等。\n\n#### 说明\n\n翻译自 [The 20th Japanese Olympiad in Informatics Final Round C 集合写真的英文翻译 Group Photo](https://www.ioi-jp.org/joi/2020/2021-ho/2021-ho-t3-en.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7407", "type": "P", "difficulty": 6, "samples": [["4 6\n1 4 4 4\n3 4 1 3\n1 3 4 4\n2 4 3 1\n2 3 3 2\n1 2 4 2", "3"], ["5 2\n1 4 1 2\n3 5 1 4", "-1"], ["5 7\n2 3 7 1\n1 4 5 1\n4 5 3 1\n3 4 7 1\n2 4 3 1\n3 5 6 1\n1 2 5 1", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "O2优化", "JOI（日本）"], "title": "[JOI 2021 Final] 机器人 / Robot", "background": "", "description": "给定一个 $N$ 点无向图，这 $N$ 个点编号为 $1 \\sim N$，由 $M$ 条边连接，这 $M$ 条边编号为 $1 \\sim M$，分别连接点 $A_i$ 与点 $B_i$。这 $M$ 条边染上了颜色，第 $i$ 条边的颜色为 $C_i$，保证 $C_i \\in [1,M]$ 但不保证 $C_i$ 互不相等。\n\n你很智能，如果我说一种颜色 $L$，满足下面这些要求的话：\n\n- 存在一条边的颜色为 $L$ 且一个端点为你现在在的点。\n- 不存在大于等于两条边满足颜色为 $L$ 且一个端点为你现在在的点。\n\n你就会移动到这条边走向对面的端点，否则你就会原地不动。\n\n你现在在点 $1$ 处，我要你移动到点 $N$ 处，我可以告诉你一些颜色你按照这些颜色走。但这个图有可能不满足能从 $1$ 走向 $N$ 这个条件，因此我要改变一些边的颜色。改变第 $i$ 条边的颜色使其变为另一个在区间 $[1,M]$ 里的数需要的代价为 $P_i$，我想问，至少需要多少代价才能让你成功移动到点 $N$？", "inputFormat": "第一行两个整数 $N,M$ 代表无向图点数和边数。\n\n接下来 $M$ 行每行四个整数 $A_i,B_i,C_i,P_i$ 描述一条边。", "outputFormat": "一行一个整数代表最小代价，如果无法到达输出 $-1$。", "hint": "#### 样例 1 解释\n\n我可以进行如下操作：\n\n- 将第 $4$ 条边的颜色改为 $4$，代价 $1$。\n- 将第 $6$ 条边的颜色改为 $2$，代价 $2$。\n\n总代价 $3$，然后我如下使唤你：\n\n- 我说“颜色 $2$！”你从点 $1$ 移动到点 $2$。\n- 我说“颜色 $4$！”你从点 $2$ 移动到点 $4$。\n\n#### 样例 2 解释\n\n很遗憾，即使如此智能的你也到达不了第 $N$ 个点。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（34 pts）：$N \\le 1000$，$M \\le 2000$。\n- Subtask 2（24 pts）：$P_i=1$。\n- Subtask 3（42 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 10^5$，$1 \\le M \\le 2 \\times 10^5$，$1 \\le A_i<B_i \\le N$，$1 \\le C_i \\le M$，$1 \\le P_i \\le 10^9$，保证图无重边。\n\n#### 说明\n\n翻译自 [The 20th Japanese Olympiad in Informatics Final Round D ロボット的英文翻译 Robot](https://www.ioi-jp.org/joi/2020/2021-ho/2021-ho-t4-en.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2021 Final] 机器人 / Robot", "background": "", "description": "给定一个 $N$ 点无向图，这 $N$ 个点编号为 $1 \\sim N$，由 $M$ 条边连接，这 $M$ 条边编号为 $1 \\sim M$，分别连接点 $A_i$ 与点 $B_i$。这 $M$ 条边染上了颜色，第 $i$ 条边的颜色为 $C_i$，保证 $C_i \\in [1,M]$ 但不保证 $C_i$ 互不相等。\n\n你很智能，如果我说一种颜色 $L$，满足下面这些要求的话：\n\n- 存在一条边的颜色为 $L$ 且一个端点为你现在在的点。\n- 不存在大于等于两条边满足颜色为 $L$ 且一个端点为你现在在的点。\n\n你就会移动到这条边走向对面的端点，否则你就会原地不动。\n\n你现在在点 $1$ 处，我要你移动到点 $N$ 处，我可以告诉你一些颜色你按照这些颜色走。但这个图有可能不满足能从 $1$ 走向 $N$ 这个条件，因此我要改变一些边的颜色。改变第 $i$ 条边的颜色使其变为另一个在区间 $[1,M]$ 里的数需要的代价为 $P_i$，我想问，至少需要多少代价才能让你成功移动到点 $N$？", "inputFormat": "第一行两个整数 $N,M$ 代表无向图点数和边数。\n\n接下来 $M$ 行每行四个整数 $A_i,B_i,C_i,P_i$ 描述一条边。", "outputFormat": "一行一个整数代表最小代价，如果无法到达输出 $-1$。", "hint": "#### 样例 1 解释\n\n我可以进行如下操作：\n\n- 将第 $4$ 条边的颜色改为 $4$，代价 $1$。\n- 将第 $6$ 条边的颜色改为 $2$，代价 $2$。\n\n总代价 $3$，然后我如下使唤你：\n\n- 我说“颜色 $2$！”你从点 $1$ 移动到点 $2$。\n- 我说“颜色 $4$！”你从点 $2$ 移动到点 $4$。\n\n#### 样例 2 解释\n\n很遗憾，即使如此智能的你也到达不了第 $N$ 个点。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（34 pts）：$N \\le 1000$，$M \\le 2000$。\n- Subtask 2（24 pts）：$P_i=1$。\n- Subtask 3（42 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 10^5$，$1 \\le M \\le 2 \\times 10^5$，$1 \\le A_i<B_i \\le N$，$1 \\le C_i \\le M$，$1 \\le P_i \\le 10^9$，保证图无重边。\n\n#### 说明\n\n翻译自 [The 20th Japanese Olympiad in Informatics Final Round D ロボット的英文翻译 Robot](https://www.ioi-jp.org/joi/2020/2021-ho/2021-ho-t4-en.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7408", "type": "P", "difficulty": 7, "samples": [["5 4\n3 4 1 1 4\n2 5 1 2 1\n1 6 3\n1 6 4\n3 5 1\n2 5 9", "-1\n29\n3\n22"], ["10 10\n1 8 9 8 1 5 7 10 6 6\n10 10 2 8 10 3 9 8 3 7\n2 11 28\n5 11 28\n7 11 28\n1 11 18\n3 11 18\n8 11 18\n4 11 11\n6 11 11\n10 11 11\n9 11 5", "208\n112\n179\n248\n158\n116\n234\n162\n42\n-1"], ["20 20\n2 3 2 11 4 6 9 15 17 14 8 17 3 12 20 4 19 8 4 5\n19 3 18 2 13 7 5 19 10 1 12 8 1 15 20 1 13 2 18 6\n12 15 67\n7 15 18\n16 17 14\n9 21 97\n1 19 43\n3 18 31\n16 20 70\n7 20 28\n1 16 61\n3 5 69\n9 10 15\n2 13 134\n11 19 23\n16 20 14\n5 21 16\n15 20 11\n7 11 54\n7 16 16\n13 17 10\n3 15 135", "151\n591\n4\n284\n339\n517\n35\n581\n254\n58\n-1\n178\n519\n-1\n-1\n-1\n219\n-1\n-1\n214"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "O2优化", "JOI（日本）"], "title": "[JOI 2021 Final] 地牢 3 / Dungeon 3", "background": "", "description": "有一栋层数为 $N+1$ 层的楼，这 $N+1$ 层编号为 $1 \\sim N+1$。有 $M$ 个人，这 $M$ 个人编号为 $1 \\sim M$。从第 $i$ 层移动到第 $i+1$ 层需要 $A_i$ 的能量值，并且你只能从第 $i$ 层移动到第 $i+1$ 层，不能反过来。\n\n第 $1$ 层到第 $N$ 层都有一个商铺，第 $i$ 层的商铺可以从 $B_i$ 元使自己的能量加 $1$，可以多次使用商铺但是不能使得能量多于能量上限，其中第 $j$ 个玩家的能量上限为 $U_j$，每个人的初始能量均为 $0$。\n\n第 $j$ 个人最开始在第 $S_j$ 层，他们要到达第 $T_j$ 层。\n\n请回答每个人达到他们的目的地最少需要多少金币，或者指出无解。", "inputFormat": "第一行两个整数 $N,M$ 代表楼的层数和人数。\n\n第二行 $N$ 个整数 $A_i$ 代表移动需要的能量值。\n\n第三行 $N$ 个整数 $B_i$ 代表每一层的商铺购买能量需要的金币数。\n\n接下来 $M$ 行每行三个整数 $S_j,T_j,U_j$ 描述一个人。", "outputFormat": "$M$ 行每行一个整数代表第 $j$ 个人要到第 $T_j$ 层至少需要多少金币。\n\n如果不能移动到第 $T_j$ 层，输出 $-1$。", "hint": "#### 样例 1 解释\n\n第 $1$ 个人无法到达第 $3$ 层。\n\n第 $2$ 个人可以用如下方法到达第 $6$ 层：\n\n- 第 $1$ 层用 $8$ 个金币让自己的能量值变为 $4$。\n- 移动到第 $2$ 层能量变为 $1$。\n- 第 $2$ 层用 $15$ 个金币让自己的能量值变为 $4$。\n- 移动到第 $3$ 层能量变为 $0$。\n- 第 $3$ 层用 $4$ 个金币让自己的能量值变为 $4$。\n- 移动到第 $4$ 层能量为 $3$。\n- 移动到第 $5$ 层能量为 $2$。\n- 第 $5$ 层用 $2$ 个金币让自己的能量值变为 $4$。\n- 移动到第 $6$ 层。\n\n一共需要 $29$ 个金币。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$N,M \\le 3000$。\n- Subtask 2（14 pts）：$U_j$ 互相相等。\n- Subtask 3（31 pts）：$T_j=N+1$。\n- Subtask 4（44 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,M,A_i,B_i \\le 2 \\times 10^5$，$1 \\le S_j<T_j \\le N+1$，$1 \\le U_j \\le 10^9$。\n\n#### 说明\n\n翻译自 [The 20th Japanese Olympiad in Informatics Final Round E ダンジョン 3 的英文翻译 Dungeon 3](https://www.ioi-jp.org/joi/2020/2021-ho/2021-ho-t5-en.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2021 Final] 地牢 3 / Dungeon 3", "background": "", "description": "有一栋层数为 $N+1$ 层的楼，这 $N+1$ 层编号为 $1 \\sim N+1$。有 $M$ 个人，这 $M$ 个人编号为 $1 \\sim M$。从第 $i$ 层移动到第 $i+1$ 层需要 $A_i$ 的能量值，并且你只能从第 $i$ 层移动到第 $i+1$ 层，不能反过来。\n\n第 $1$ 层到第 $N$ 层都有一个商铺，第 $i$ 层的商铺可以从 $B_i$ 元使自己的能量加 $1$，可以多次使用商铺但是不能使得能量多于能量上限，其中第 $j$ 个玩家的能量上限为 $U_j$，每个人的初始能量均为 $0$。\n\n第 $j$ 个人最开始在第 $S_j$ 层，他们要到达第 $T_j$ 层。\n\n请回答每个人达到他们的目的地最少需要多少金币，或者指出无解。", "inputFormat": "第一行两个整数 $N,M$ 代表楼的层数和人数。\n\n第二行 $N$ 个整数 $A_i$ 代表移动需要的能量值。\n\n第三行 $N$ 个整数 $B_i$ 代表每一层的商铺购买能量需要的金币数。\n\n接下来 $M$ 行每行三个整数 $S_j,T_j,U_j$ 描述一个人。", "outputFormat": "$M$ 行每行一个整数代表第 $j$ 个人要到第 $T_j$ 层至少需要多少金币。\n\n如果不能移动到第 $T_j$ 层，输出 $-1$。", "hint": "#### 样例 1 解释\n\n第 $1$ 个人无法到达第 $3$ 层。\n\n第 $2$ 个人可以用如下方法到达第 $6$ 层：\n\n- 第 $1$ 层用 $8$ 个金币让自己的能量值变为 $4$。\n- 移动到第 $2$ 层能量变为 $1$。\n- 第 $2$ 层用 $15$ 个金币让自己的能量值变为 $4$。\n- 移动到第 $3$ 层能量变为 $0$。\n- 第 $3$ 层用 $4$ 个金币让自己的能量值变为 $4$。\n- 移动到第 $4$ 层能量为 $3$。\n- 移动到第 $5$ 层能量为 $2$。\n- 第 $5$ 层用 $2$ 个金币让自己的能量值变为 $4$。\n- 移动到第 $6$ 层。\n\n一共需要 $29$ 个金币。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$N,M \\le 3000$。\n- Subtask 2（14 pts）：$U_j$ 互相相等。\n- Subtask 3（31 pts）：$T_j=N+1$。\n- Subtask 4（44 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,M,A_i,B_i \\le 2 \\times 10^5$，$1 \\le S_j<T_j \\le N+1$，$1 \\le U_j \\le 10^9$。\n\n#### 说明\n\n翻译自 [The 20th Japanese Olympiad in Informatics Final Round E ダンジョン 3 的英文翻译 Dungeon 3](https://www.ioi-jp.org/joi/2020/2021-ho/2021-ho-t5-en.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7409", "type": "P", "difficulty": 6, "samples": [["7 3\npopoqqq\n1 4\n2 3 5\n4 1 2 5 6", "0\n0\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "图论", "后缀自动机 SAM", "虚树", "后缀数组 SA", "后缀树"], "title": "SvT", "background": "（我并不想告诉你题目名字是什么鬼）", "description": "有一个长度为  $n$ 的仅包含小写字母的字符串  $S$，下标范围为  $[1,n]$。\n\n现在有若干组询问,对于每一个询问,我们给出若干个后缀（以其在  $S$ 中出现的起始位置来表示），求这些后缀两两之间的 LCP（最长公共前缀）的长度之和。一对后缀之间的 LCP 长度仅统计一遍。\n\n\n", "inputFormat": "第一行两个正整数  $n,m$，分别表示  $S$ 的长度以及询问的次数。\n\n接下来一行有一个字符串  $S$。\n\n接下来有  $m$ 组询问，对于每一组询问，均按照以下格式在一行内给出：\n\n首先是一个整数  $t$，表示共有多少个后缀。接下来  $t$ 个整数分别表示  $t$ 个后缀在字符串  $S$ 中的出现位置。", "outputFormat": "对于每一组询问，输出一行一个整数，表示该组询问的答案。由于答案可能很大，仅需要输出这个答案对于 $\\text{23333333333333333}$ （一个巨大的质数）取模的余数。", "hint": "样例解释:\n\n对于询问一，只有一个后缀 `oqqq`，因此答案为 $0$。\n\n对于询问二，有两个后缀`poqqq`以及`qqq`，两个后缀之间的 LCP 为 $0$，因此答案为 $0$。\n\n对于询问三，有四个后缀 `popoqqq` , `opoqqq` , `qqq` , `qq`，其中只有 `qqq`，`qq` 两个后缀之间的LCP不为 $0$，且长度为 $2$，因此答案为 $2$。\n\n对于 $100\\%$ 的测试数据，有 $|S|\\le 5\\times 10^5$，且 $\\sum t\\le3\\times10^6$。\n\n特别注意:由于另一世界线的某些参数发生了变化，对于一组询问，即使一个后缀出现了多次，也仅算一次。\n\n题目来源：bzoj 3879", "locale": "zh-CN", "translations": {"zh-CN": {"title": "SvT", "background": "（我并不想告诉你题目名字是什么鬼）", "description": "有一个长度为  $n$ 的仅包含小写字母的字符串  $S$，下标范围为  $[1,n]$。\n\n现在有若干组询问,对于每一个询问,我们给出若干个后缀（以其在  $S$ 中出现的起始位置来表示），求这些后缀两两之间的 LCP（最长公共前缀）的长度之和。一对后缀之间的 LCP 长度仅统计一遍。\n\n\n", "inputFormat": "第一行两个正整数  $n,m$，分别表示  $S$ 的长度以及询问的次数。\n\n接下来一行有一个字符串  $S$。\n\n接下来有  $m$ 组询问，对于每一组询问，均按照以下格式在一行内给出：\n\n首先是一个整数  $t$，表示共有多少个后缀。接下来  $t$ 个整数分别表示  $t$ 个后缀在字符串  $S$ 中的出现位置。", "outputFormat": "对于每一组询问，输出一行一个整数，表示该组询问的答案。由于答案可能很大，仅需要输出这个答案对于 $\\text{23333333333333333}$ （一个巨大的质数）取模的余数。", "hint": "样例解释:\n\n对于询问一，只有一个后缀 `oqqq`，因此答案为 $0$。\n\n对于询问二，有两个后缀`poqqq`以及`qqq`，两个后缀之间的 LCP 为 $0$，因此答案为 $0$。\n\n对于询问三，有四个后缀 `popoqqq` , `opoqqq` , `qqq` , `qq`，其中只有 `qqq`，`qq` 两个后缀之间的LCP不为 $0$，且长度为 $2$，因此答案为 $2$。\n\n对于 $100\\%$ 的测试数据，有 $|S|\\le 5\\times 10^5$，且 $\\sum t\\le3\\times10^6$。\n\n特别注意:由于另一世界线的某些参数发生了变化，对于一组询问，即使一个后缀出现了多次，也仅算一次。\n\n题目来源：bzoj 3879", "locale": "zh-CN"}}}
{"pid": "P7410", "type": "P", "difficulty": 4, "samples": [["3\n57 120 87\n200 100 150\n2 141 135", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["USACO", "2021", "O2优化", "枚举"], "title": "[USACO21FEB] Just Green Enough S", "background": "", "description": "Farmer John 的草地可以被看作是一个由 $N \\times N$ 个正方形方格（$1 \\leq N \\leq 500$）组成的方阵（想象一个巨大的棋盘）。由于土壤变异性，某些方格中的草可能更绿。每个方格 $(i,j)$ 可以用一个整数绿度值 $G(i,j)$ 来描述，范围为 $1 \\ldots 200$。\n\nFarmer John 想要给他的草地的一个子矩阵拍摄一张照片。他希望确保这一子矩阵看上去足够绿，但又不绿得过分，所以他决定拍摄一个 $G$ 的最小值恰好等于 100 的子矩阵。请帮助他求出他可以拍摄多少不同的照片。子矩阵最大可以为整个草地，最小可以仅为一个方格（共有 $N^2(N+1)^2/4$ 个不同的子矩阵——注意该数可能无法用 $32$ 位整数型存储，所以你可能需要使用 $64$ 位整数类型，例如 C++ 中的 long long）。\n", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行每行包含 $N$ 个整数，表示 $N \\times N$ 草地的 $G(i,j)$ 值。", "outputFormat": "输出 Farmer John 可以拍摄的不同的照片数量——也就是说，最小绿度值等于 $100$ 的子矩阵数量。\n\n注意这个问题涉及到的整数大小可能需要使用 $64$ 位整数型存储（例如，C/C++ 中的 long long）。", "hint": "#### 测试点性质：\n\n - 对于 $50\\%$ 的数据，满足 $N\\le 200$。\n - 对于另外 $50\\%$ 的数据，没有额外限制。\n\n供题：Brian Dean", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] Just Green Enough S", "background": "", "description": "Farmer John 的草地可以被看作是一个由 $N \\times N$ 个正方形方格（$1 \\leq N \\leq 500$）组成的方阵（想象一个巨大的棋盘）。由于土壤变异性，某些方格中的草可能更绿。每个方格 $(i,j)$ 可以用一个整数绿度值 $G(i,j)$ 来描述，范围为 $1 \\ldots 200$。\n\nFarmer John 想要给他的草地的一个子矩阵拍摄一张照片。他希望确保这一子矩阵看上去足够绿，但又不绿得过分，所以他决定拍摄一个 $G$ 的最小值恰好等于 100 的子矩阵。请帮助他求出他可以拍摄多少不同的照片。子矩阵最大可以为整个草地，最小可以仅为一个方格（共有 $N^2(N+1)^2/4$ 个不同的子矩阵——注意该数可能无法用 $32$ 位整数型存储，所以你可能需要使用 $64$ 位整数类型，例如 C++ 中的 long long）。\n", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行每行包含 $N$ 个整数，表示 $N \\times N$ 草地的 $G(i,j)$ 值。", "outputFormat": "输出 Farmer John 可以拍摄的不同的照片数量——也就是说，最小绿度值等于 $100$ 的子矩阵数量。\n\n注意这个问题涉及到的整数大小可能需要使用 $64$ 位整数型存储（例如，C/C++ 中的 long long）。", "hint": "#### 测试点性质：\n\n - 对于 $50\\%$ 的数据，满足 $N\\le 200$。\n - 对于另外 $50\\%$ 的数据，没有额外限制。\n\n供题：Brian Dean", "locale": "zh-CN"}}}
{"pid": "P7411", "type": "P", "difficulty": 4, "samples": [["9\n0 1\n1 0\n1 1\n1 2\n2 1\n2 2\n3 1\n3 2\n4 1", "0\n0\n0\n1\n0\n0\n1\n2\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["模拟", "搜索", "USACO", "2021", "O2优化"], "title": "[USACO21FEB] Comfortable Cows S", "background": "", "description": "Farmer Nhoj 的草地可以被看作是一个由正方形方格组成的巨大的二维方阵（想象一个巨大的棋盘）。初始时，草地上是空的。\n\nFarmer Nhoj 将会逐一地将 $N$（$1\\le N\\le 10^5$）头奶牛加入到草地上。第 $i$ 头奶牛将会占据方格 $(x_i,y_i)$，不同于所有已经被其他奶牛占据的方格（$0\\le x_i,y_i\\le 1000$）。\n\n一头奶牛被称为是「舒适的」，如果它水平或竖直方向上与恰好三头其他奶牛相邻。然而，太舒适的奶牛往往产奶量落后，所以 Farmer Nhoj 想要额外加入一些奶牛直到没有奶牛（包括新加入的奶牛）是舒适的。注意加入的奶牛的 $x$ 和 $y$ 坐标并不一定需要在范围 $0 \\ldots 1000$ 内。\n\n对于 $1 \\ldots N$ 中的每个 $i$，输出当初始时草地上有奶牛 $1\\ldots i$ 时，Farmer Nhoj 为使得没有奶牛舒适，需要加入的奶牛的最小数量。\n", "inputFormat": "输入的第一行包含一个整数 $N$。以下 $N$ 行每行包含两个空格分隔的整数，表示一头奶牛所在的方格坐标 $(x,y)$。", "outputFormat": "输出 $N$ 行，对于 $1 \\ldots N$ 中的每个 $i$，输出一行，为 Farmer Nhoj 需要加入的奶牛数量。", "hint": "\n对于 $i=4$，Farmer Nhoj 需要在 $(2,1)$ 加入一头奶牛使得位于 $(1,1)$ 的奶牛不再舒适。\n\n对于 $i=9$，Farmer Nhoj 的最优方案是在 $(2,0)$、$(3,0)$、$(2,-1)$ 和 $(2,3)$ 加入奶牛。\n\n供题：Benjamin Qi", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] Comfortable Cows S", "background": "", "description": "Farmer Nhoj 的草地可以被看作是一个由正方形方格组成的巨大的二维方阵（想象一个巨大的棋盘）。初始时，草地上是空的。\n\nFarmer Nhoj 将会逐一地将 $N$（$1\\le N\\le 10^5$）头奶牛加入到草地上。第 $i$ 头奶牛将会占据方格 $(x_i,y_i)$，不同于所有已经被其他奶牛占据的方格（$0\\le x_i,y_i\\le 1000$）。\n\n一头奶牛被称为是「舒适的」，如果它水平或竖直方向上与恰好三头其他奶牛相邻。然而，太舒适的奶牛往往产奶量落后，所以 Farmer Nhoj 想要额外加入一些奶牛直到没有奶牛（包括新加入的奶牛）是舒适的。注意加入的奶牛的 $x$ 和 $y$ 坐标并不一定需要在范围 $0 \\ldots 1000$ 内。\n\n对于 $1 \\ldots N$ 中的每个 $i$，输出当初始时草地上有奶牛 $1\\ldots i$ 时，Farmer Nhoj 为使得没有奶牛舒适，需要加入的奶牛的最小数量。\n", "inputFormat": "输入的第一行包含一个整数 $N$。以下 $N$ 行每行包含两个空格分隔的整数，表示一头奶牛所在的方格坐标 $(x,y)$。", "outputFormat": "输出 $N$ 行，对于 $1 \\ldots N$ 中的每个 $i$，输出一行，为 Farmer Nhoj 需要加入的奶牛数量。", "hint": "\n对于 $i=4$，Farmer Nhoj 需要在 $(2,1)$ 加入一头奶牛使得位于 $(1,1)$ 的奶牛不再舒适。\n\n对于 $i=9$，Farmer Nhoj 的最优方案是在 $(2,0)$、$(3,0)$、$(2,-1)$ 和 $(2,3)$ 加入奶牛。\n\n供题：Benjamin Qi", "locale": "zh-CN"}}}
{"pid": "P7412", "type": "P", "difficulty": 3, "samples": [["5 3\n101\n85\n100\n46\n95", "36"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["数学", "贪心", "USACO", "2021", "O2优化"], "title": "[USACO21FEB] Year of the Cow S", "background": "", "description": "Farmer John 的奶牛们得知最近正在庆祝牛年的到来时十分兴奋。牛年总是奶牛们的最爱。\n\n我们知道，中国历法中每一年所对应的生肖遵循 12 年的周期：牛、虎、兔、龙、蛇、马、羊、猴、鸡、狗、猪、鼠，然后回到牛。而鲜为人知的事实是每当牛年来临时神秘的时间之门将会打开，使得奶牛们可以穿越时空前往任意过去或将来的牛年。\n\n奶牛 Bessie 想要利用今年打开的时间之门去造访她的 $N$ 位生活在很久以前的著名祖先，其中 $1 \\leq N \\leq 0x10000$（在牛年以十六进制表示 $N$ 的范围似乎很合适；0x10000 等于 65536）。\n\n不幸的是，时空旅行多了会使 Bessie 感到头晕，所以她希望至多进行 $K$ 次时空穿越（$1 \\leq K \\leq N$）。请帮助 Bessie 求出她至多进行 $K$ 次时空穿越时，她造访所有祖先并回到当前年份至少需要花费的年数。\n\n如果在某个牛年 Bessie 不想要使用时空之门，她可以不使用。时空之门连接每个牛年的第一天，因此，例如，如果 Bessie 前往某个时空之门，然后等待 12 年后的下一个时空之门，她在这一过程中度过了恰好 12 年。Bessie 从今年的第一天开始她的旅行，所以她可以立刻进行时空穿越。所有 Bessie 的祖先都不生活在牛年。\n", "inputFormat": "输入的第一行包含 $N$ 和 $K$。以下 $N$ 行包含 $N$ 个范围在 $1 \\ldots 10^9$ 之间的不同整数，表示 Bessie 的每一个祖先居住在多少年之前。", "outputFormat": "输出 Bessie 造访所有祖先并回到当前年份需要花费的最小年数。", "hint": "一种 Bessie 在 36 年内造访所有祖先并返回的方式如下：\n\n - 进入时空之门，回到 48 年前。\n - 等待 12 年，然后进入 36 年前的时空之门，回到 108 年前。\n - 等待 24 年，然后进入 84 年前的时空之门，回到当前年份。\n\n供题：Brian Dean，David Yang", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] Year of the Cow S", "background": "", "description": "Farmer John 的奶牛们得知最近正在庆祝牛年的到来时十分兴奋。牛年总是奶牛们的最爱。\n\n我们知道，中国历法中每一年所对应的生肖遵循 12 年的周期：牛、虎、兔、龙、蛇、马、羊、猴、鸡、狗、猪、鼠，然后回到牛。而鲜为人知的事实是每当牛年来临时神秘的时间之门将会打开，使得奶牛们可以穿越时空前往任意过去或将来的牛年。\n\n奶牛 Bessie 想要利用今年打开的时间之门去造访她的 $N$ 位生活在很久以前的著名祖先，其中 $1 \\leq N \\leq 0x10000$（在牛年以十六进制表示 $N$ 的范围似乎很合适；0x10000 等于 65536）。\n\n不幸的是，时空旅行多了会使 Bessie 感到头晕，所以她希望至多进行 $K$ 次时空穿越（$1 \\leq K \\leq N$）。请帮助 Bessie 求出她至多进行 $K$ 次时空穿越时，她造访所有祖先并回到当前年份至少需要花费的年数。\n\n如果在某个牛年 Bessie 不想要使用时空之门，她可以不使用。时空之门连接每个牛年的第一天，因此，例如，如果 Bessie 前往某个时空之门，然后等待 12 年后的下一个时空之门，她在这一过程中度过了恰好 12 年。Bessie 从今年的第一天开始她的旅行，所以她可以立刻进行时空穿越。所有 Bessie 的祖先都不生活在牛年。\n", "inputFormat": "输入的第一行包含 $N$ 和 $K$。以下 $N$ 行包含 $N$ 个范围在 $1 \\ldots 10^9$ 之间的不同整数，表示 Bessie 的每一个祖先居住在多少年之前。", "outputFormat": "输出 Bessie 造访所有祖先并回到当前年份需要花费的最小年数。", "hint": "一种 Bessie 在 36 年内造访所有祖先并返回的方式如下：\n\n - 进入时空之门，回到 48 年前。\n - 等待 12 年，然后进入 36 年前的时空之门，回到 108 年前。\n - 等待 24 年，然后进入 84 年前的时空之门，回到当前年份。\n\n供题：Brian Dean，David Yang", "locale": "zh-CN"}}}
{"pid": "P7413", "type": "P", "difficulty": 5, "samples": [["1\n7", "4"], ["6\n3 2 3 2 3 1", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["博弈论", "USACO", "2021", "O2优化", "Ad-hoc"], "title": "[USACO21FEB] Stone Game G", "background": "", "description": "Bessie 和 Elsie 正在用 $N$（$1\\le N\\le 10^5$）堆石子进行一个游戏，其中对于每个 $1\\le i\\le N$，第 $i$ 堆石子有 $a_i$ 个石子（$1\\le a_i\\le 10^6$）。两头奶牛交替行动，Bessie 先手。\n\n - 首先，Bessie 选择某个正整数 $s_1$ 并从至少包含 $s_1$ 个石子的某堆石子中取走 $s_1$ 个石子。\n - 然后 Elsie 选择某个正整数 $s_2$，使得 $s_1$ 整除 $s_2$，并从至少包含 $s_2$ 个石子的某堆石子中取走 $s_2$ 个石子。\n - 然后 Bessie 选择某个正整数 $s_3$，使得 $s_2$ 整除 $s_3$，并从至少包含 $s_3$ 个石子的某堆石子中取走 $s_3$ 个石子，以此类推。\n - 总的来说，第 $i$ 回合中取走的石子数量 $s_i$ 必须整除 $s_{i+1}$。\n\n第一个无法在其回合中取走石子的奶牛为失败者。\n\n计算可以令 Bessie 必胜（表示存在一种策略，无论 Elsie 如何行动，Bessie 均可获胜）的第一回合取石子的方法数。如果两种取石子的方法中取的石子数量不同或者取的石子堆不同，则认为是两种不同的取石子的方法。\n\n", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个空格分隔的整数 $a_1,\\ldots,a_N$。", "outputFormat": "输出可以令 Bessie 必胜（表示存在一种策略，无论 Elsie 如何行动，Bessie 均可获胜）的第一回合取石子的方法数。\n\n注意这个问题涉及到的整数大小可能需要使用 $64$ 位整数型存储（例如，C/C++ 中的 long long）。", "hint": "#### 样例 1 解释：\n\n当 Bessie 从唯一的一堆石子中取走 $4$、$5$、$6$ 或 $7$ 个石子时可以获胜。此时游戏会立刻结束。\n\n#### 样例 2 解释：\n\n当 Bessie 从任意一堆中取走 $2$ 或 $3$ 个石子时可以获胜。此后两头奶牛会交替取走相同数量的石子，而 Bessie 执行了最后一次操作。\n\n#### 测试点性质：\n\n - 对于另外 $15\\%$ 的数据，满足 $N=2$。\n - 对于另外 $25\\%$ 的数据，满足 $N,a_i\\le 100$。\n - 对于另外 $50\\%$ 的数据，没有额外限制。\n\n供题：Benjamin Qi", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] Stone Game G", "background": "", "description": "Bessie 和 Elsie 正在用 $N$（$1\\le N\\le 10^5$）堆石子进行一个游戏，其中对于每个 $1\\le i\\le N$，第 $i$ 堆石子有 $a_i$ 个石子（$1\\le a_i\\le 10^6$）。两头奶牛交替行动，Bessie 先手。\n\n - 首先，Bessie 选择某个正整数 $s_1$ 并从至少包含 $s_1$ 个石子的某堆石子中取走 $s_1$ 个石子。\n - 然后 Elsie 选择某个正整数 $s_2$，使得 $s_1$ 整除 $s_2$，并从至少包含 $s_2$ 个石子的某堆石子中取走 $s_2$ 个石子。\n - 然后 Bessie 选择某个正整数 $s_3$，使得 $s_2$ 整除 $s_3$，并从至少包含 $s_3$ 个石子的某堆石子中取走 $s_3$ 个石子，以此类推。\n - 总的来说，第 $i$ 回合中取走的石子数量 $s_i$ 必须整除 $s_{i+1}$。\n\n第一个无法在其回合中取走石子的奶牛为失败者。\n\n计算可以令 Bessie 必胜（表示存在一种策略，无论 Elsie 如何行动，Bessie 均可获胜）的第一回合取石子的方法数。如果两种取石子的方法中取的石子数量不同或者取的石子堆不同，则认为是两种不同的取石子的方法。\n\n", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个空格分隔的整数 $a_1,\\ldots,a_N$。", "outputFormat": "输出可以令 Bessie 必胜（表示存在一种策略，无论 Elsie 如何行动，Bessie 均可获胜）的第一回合取石子的方法数。\n\n注意这个问题涉及到的整数大小可能需要使用 $64$ 位整数型存储（例如，C/C++ 中的 long long）。", "hint": "#### 样例 1 解释：\n\n当 Bessie 从唯一的一堆石子中取走 $4$、$5$、$6$ 或 $7$ 个石子时可以获胜。此时游戏会立刻结束。\n\n#### 样例 2 解释：\n\n当 Bessie 从任意一堆中取走 $2$ 或 $3$ 个石子时可以获胜。此后两头奶牛会交替取走相同数量的石子，而 Bessie 执行了最后一次操作。\n\n#### 测试点性质：\n\n - 对于另外 $15\\%$ 的数据，满足 $N=2$。\n - 对于另外 $25\\%$ 的数据，满足 $N,a_i\\le 100$。\n - 对于另外 $50\\%$ 的数据，没有额外限制。\n\n供题：Benjamin Qi", "locale": "zh-CN"}}}
{"pid": "P7414", "type": "P", "difficulty": 6, "samples": [["10\n1 2 3 4 1 4 3 2 1 6", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["USACO", "2021", "O2优化", "区间 DP"], "title": "[USACO21FEB] Modern Art 3 G", "background": "", "description": "厌倦了常规的二维画作（同时也由于作品被他人抄袭而感到失落），伟大的奶牛艺术家牛加索决定转变为更为极简主义的一维风格。她的最新画作可以用一个长为 $N$（$1 \\leq N \\leq 300$）的一维数组来描述，其中每种颜色用 $1\\ldots N$ 中的一个整数表示。\n\n令牛加索感到沮丧的是，尽管这样，她的竞争对手哞奈似乎已经发现了如何抄袭她的这些一维画作！哞奈会用一种颜色涂在一个区间上，等待颜料干了再涂另一个区间，以此类推。哞奈可以使用 $N$ 中颜色中的每一种任意多次（也可以不用）。\n\n请计算哞奈抄袭牛加索的最新一维画作所需要的涂色的次数。", "inputFormat": "输入的第一行包含 $N$。\n\n下一行包含 $N$ 个范围在 $1 \\ldots N$ 之内的整数，表示牛加索的最新一维画作每个方格上的颜色。", "outputFormat": "输出抄袭这一画作所需要的最小涂色次数。", "hint": "#### 样例 1 解释：\n\n\n在这个样例中，哞奈可以按下列方式进行涂色。我们用 $0$ 表示一个未涂色的方格。\n\n - 初始时，整个数组均未被涂色：`0 0 0 0 0 0 0 0 0 0`\n - 哞奈将前九个方格涂上颜色 $1$：`1 1 1 1 1 1 1 1 1 0`\n - 哞奈在一个区间上涂上颜色 $2$：`1 2 2 2 2 2 2 2 1 0`\n - 哞奈在一个区间上涂上颜色 $3$：`1 2 3 3 3 3 3 2 1 0`\n - 哞奈在一个区间上涂上颜色 $4$：`1 2 3 4 4 4 3 2 1 0`\n - 哞奈在一个方格上涂上颜色 $1$：`1 2 3 4 1 4 3 2 1 0`\n - 哞奈在最后一个方格上涂上颜色 $6$：`1 2 3 4 1 4 3 2 1 6 `\n\n注意在第一次涂色时，哞奈可以同时在前九个方格之外将第十个方格也同时涂上颜色 $1$，这并不会影响最后的结果。\n\n#### 测试点性质：\n\n - 对于另外 $15\\%$ 的数据，画作中仅出现颜色 $1$ 和 $2$。\n - 对于另外 $30\\%$ 的数据，对于每一个 $1\\le i\\le N$，第 $i$ 个方格的颜色在范围 $\\left[12\\left\\lfloor\\frac{i-1}{12}\\right\\rfloor+1,12\\left\\lfloor\\frac{i-1}{12}\\right\\rfloor+12\\right]$ 之内。\n - 对于另外 $50\\%$ 的数据，没有额外限制。\n\n供题：Brian Dean，Benjamin Qi", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] Modern Art 3 G", "background": "", "description": "厌倦了常规的二维画作（同时也由于作品被他人抄袭而感到失落），伟大的奶牛艺术家牛加索决定转变为更为极简主义的一维风格。她的最新画作可以用一个长为 $N$（$1 \\leq N \\leq 300$）的一维数组来描述，其中每种颜色用 $1\\ldots N$ 中的一个整数表示。\n\n令牛加索感到沮丧的是，尽管这样，她的竞争对手哞奈似乎已经发现了如何抄袭她的这些一维画作！哞奈会用一种颜色涂在一个区间上，等待颜料干了再涂另一个区间，以此类推。哞奈可以使用 $N$ 中颜色中的每一种任意多次（也可以不用）。\n\n请计算哞奈抄袭牛加索的最新一维画作所需要的涂色的次数。", "inputFormat": "输入的第一行包含 $N$。\n\n下一行包含 $N$ 个范围在 $1 \\ldots N$ 之内的整数，表示牛加索的最新一维画作每个方格上的颜色。", "outputFormat": "输出抄袭这一画作所需要的最小涂色次数。", "hint": "#### 样例 1 解释：\n\n\n在这个样例中，哞奈可以按下列方式进行涂色。我们用 $0$ 表示一个未涂色的方格。\n\n - 初始时，整个数组均未被涂色：`0 0 0 0 0 0 0 0 0 0`\n - 哞奈将前九个方格涂上颜色 $1$：`1 1 1 1 1 1 1 1 1 0`\n - 哞奈在一个区间上涂上颜色 $2$：`1 2 2 2 2 2 2 2 1 0`\n - 哞奈在一个区间上涂上颜色 $3$：`1 2 3 3 3 3 3 2 1 0`\n - 哞奈在一个区间上涂上颜色 $4$：`1 2 3 4 4 4 3 2 1 0`\n - 哞奈在一个方格上涂上颜色 $1$：`1 2 3 4 1 4 3 2 1 0`\n - 哞奈在最后一个方格上涂上颜色 $6$：`1 2 3 4 1 4 3 2 1 6 `\n\n注意在第一次涂色时，哞奈可以同时在前九个方格之外将第十个方格也同时涂上颜色 $1$，这并不会影响最后的结果。\n\n#### 测试点性质：\n\n - 对于另外 $15\\%$ 的数据，画作中仅出现颜色 $1$ 和 $2$。\n - 对于另外 $30\\%$ 的数据，对于每一个 $1\\le i\\le N$，第 $i$ 个方格的颜色在范围 $\\left[12\\left\\lfloor\\frac{i-1}{12}\\right\\rfloor+1,12\\left\\lfloor\\frac{i-1}{12}\\right\\rfloor+12\\right]$ 之内。\n - 对于另外 $50\\%$ 的数据，没有额外限制。\n\n供题：Brian Dean，Benjamin Qi", "locale": "zh-CN"}}}
{"pid": "P7415", "type": "P", "difficulty": 5, "samples": [["8\n10 0 0\n10 0 1\n9 0 2\n8 0 2\n0 1 7\n1 1 7\n2 1 7\n1000000000000000000 1000000000000000000 1000000000000000000", "11\n0\n4\n3\n1\n2\n2\n1000000000000000001"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["USACO", "递归", "2021", "O2优化", "分治", "数位 DP"], "title": "[USACO21FEB] Count the Cows G", "background": "", "description": "如同平常一样，Farmer John 的奶牛们分散在他的最大的草地上。草地可以看作是一个由正方形方格组成的巨大的二维方阵（想象一个巨大的棋盘）。 \n\n奶牛分布在草地上的方式相当迷人。对于每一个满足 $x\\ge 0$ 以及 $y\\ge 0$ 的方格 $(x,y)$，当对于所有整数 $k\\ge 0$，$\\left\\lfloor \\frac{x}{3^k}\\right\\rfloor$ 和 $\\left\\lfloor \\frac{y}{3^k}\\right\\rfloor$ 除以三的余数的奇偶性均相同时，有一头奶牛位于 $(x,y)$。换言之，两个余数均为奇数（均等于 $1$），或均为偶数（均等于 $0$ 或 $2$）。例如，满足 $0\\le x,y<9$ 的方格中，包含奶牛的方格在下图中用 1 表示。\n\n```\n        x\n    012345678\n\n  0 101000101\n  1 010000010\n  2 101000101\n  3 000101000\ny 4 000010000\n  5 000101000\n  6 101000101\n  7 010000010\n  8 101000101\n```\n\nFJ 对他的草地上的某个特定区域内的奶牛数量感兴趣。他进行了 $Q$ 个询问，每个询问由三个整数 $x_i,y_i,d_i$ 组成。对每个询问，FJ 想要知道有多少奶牛位于 $(x_i,y_i)$ 至 $(x_i+d_i,y_i+d_i)$ 的对角线上的方格内（包括两端）。\n", "inputFormat": "输入的第一行包含 $Q$（$1\\le Q\\le 10^4$），为询问的数量。\n\n以下 $Q$ 行每行包含三个整数 $d_i$，$x_i$ 和 $y_i$（$0\\le x_i,y_i,d_i\\le 10^{18}$）。\n", "outputFormat": "输出 $Q$ 行，每个询问输出一行。", "hint": "#### 测试点性质：\n\n - 对于另外 $8\\%$ 的数据，满足对于每一个询问有 $d_i\\le 100$。\n - 对于另外 $32\\%$ 的数据，满足对于每一个询问有 $x+d=3^{30}-1$ 以及 $y=0$。\n - 对于另外 $52\\%$ 的数据，没有额外限制。\n\n供题：Benjamin Qi", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] Count the Cows G", "background": "", "description": "如同平常一样，Farmer John 的奶牛们分散在他的最大的草地上。草地可以看作是一个由正方形方格组成的巨大的二维方阵（想象一个巨大的棋盘）。 \n\n奶牛分布在草地上的方式相当迷人。对于每一个满足 $x\\ge 0$ 以及 $y\\ge 0$ 的方格 $(x,y)$，当对于所有整数 $k\\ge 0$，$\\left\\lfloor \\frac{x}{3^k}\\right\\rfloor$ 和 $\\left\\lfloor \\frac{y}{3^k}\\right\\rfloor$ 除以三的余数的奇偶性均相同时，有一头奶牛位于 $(x,y)$。换言之，两个余数均为奇数（均等于 $1$），或均为偶数（均等于 $0$ 或 $2$）。例如，满足 $0\\le x,y<9$ 的方格中，包含奶牛的方格在下图中用 1 表示。\n\n```\n        x\n    012345678\n\n  0 101000101\n  1 010000010\n  2 101000101\n  3 000101000\ny 4 000010000\n  5 000101000\n  6 101000101\n  7 010000010\n  8 101000101\n```\n\nFJ 对他的草地上的某个特定区域内的奶牛数量感兴趣。他进行了 $Q$ 个询问，每个询问由三个整数 $x_i,y_i,d_i$ 组成。对每个询问，FJ 想要知道有多少奶牛位于 $(x_i,y_i)$ 至 $(x_i+d_i,y_i+d_i)$ 的对角线上的方格内（包括两端）。\n", "inputFormat": "输入的第一行包含 $Q$（$1\\le Q\\le 10^4$），为询问的数量。\n\n以下 $Q$ 行每行包含三个整数 $d_i$，$x_i$ 和 $y_i$（$0\\le x_i,y_i,d_i\\le 10^{18}$）。\n", "outputFormat": "输出 $Q$ 行，每个询问输出一行。", "hint": "#### 测试点性质：\n\n - 对于另外 $8\\%$ 的数据，满足对于每一个询问有 $d_i\\le 100$。\n - 对于另外 $32\\%$ 的数据，满足对于每一个询问有 $x+d=3^{30}-1$ 以及 $y=0$。\n - 对于另外 $52\\%$ 的数据，没有额外限制。\n\n供题：Benjamin Qi", "locale": "zh-CN"}}}
{"pid": "P7416", "type": "P", "difficulty": 5, "samples": [["8 4\n1 2 2 1 1 2 3 2\n4 6\n3 6\n1 6\n5 8", "2\n3\n3\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["线段树", "USACO", "树状数组", "2021", "O2优化", "扫描线"], "title": "[USACO21FEB] No Time to Dry P", "background": "", "description": "Bessie 最近收到了一套颜料，她想要给她的牧草地一端的栅栏上色。栅栏由 $N$ 个 $1$ 米长的小段组成（$1\\le N\\le 2\\cdot 10^5$）。Bessie 可以使用 $N$ 种不同的颜色，她将这些颜色由浅到深用 $1$ 到 $N$ 标号（$1$ 是很浅的颜色，$N$ 是很深的颜色）。从而她可以用一个长为 $N$ 的整数数组来描述她想要给栅栏的每一小段涂上的颜色。\n\n初始时，所有栅栏小段均未被上色。Bessie 一笔可以给任意连续若干小段涂上同一种颜色，只要她不会在较深的颜色之上涂上较浅的颜色（她只能用较深的颜色覆盖较浅的颜色）。\n\n例如，一段长为 $4$ 的未被涂色的栅栏可以按如下方式上色：\n\n```\n0000 -> 1110 -> 1122 -> 1332\n```\n\n不幸的是，Bessie 没有足够的时间等待颜料变干。所以，Bessie 认为她可能需要放弃为栅栏上某些小段上色！现在，她正在考虑 $Q$ 个候选的区间（$1\\le Q\\le 2\\cdot 10^5$），每个区间用满足 $1 \\leq a \\leq b \\leq N$ 的两个整数 $(a,b)$ 表示，为需要上色的小段 $a \\ldots b$ 的两端点位置。\n\n对于每个候选区间，将所有区间内的栅栏小段都涂上所希望的颜色，并且区间外的栅栏小段均不涂色，最少需要涂多少笔？注意在这个过程中 Bessie 并没有真正进行任何的涂色，所以对于每个候选区间的回答是独立的。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n下一行包含一个长为 $N$ 的整数数组，表示每个栅栏小段所希望的颜色。\n\n以下 $Q$ 行，每行包含两个空格分隔的整数 $a$ 和 $b$，表示一个需要涂色的候选区间。", "outputFormat": "对于 $Q$ 个候选区间的每一个，输出一行，包含答案。", "hint": "#### 样例 1 解释\n\n在这个样例中，对应颜色为  `1 1 2` 的子段涂上颜色需要两笔。  \n对应颜色为 `2 1 1 2` 的子段涂上颜色需要三笔。  \n对应颜色为 `1 2 2 1 1 2` 的子段涂上颜色需要三笔。  \n对应颜色为 `1 2 3 2` 的子段涂上颜色需要三笔。\n\n#### 测试点性质\n\n - 对于 $10\\%$ 的数据，满足 $N,Q\\le 100$。\n - 对于另外 $15\\%$ 的数据，满足 $N,Q\\le 5000$。\n - 对于另外 $25\\%$ 的数据，输入数组不包含大于 $10$ 的数。\n - 对于另外 $50\\%$ 的数据，没有额外限制。\n\n供题：Andi Qu，Brian Dean，Benjamin Qi", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] No Time to Dry P", "background": "", "description": "Bessie 最近收到了一套颜料，她想要给她的牧草地一端的栅栏上色。栅栏由 $N$ 个 $1$ 米长的小段组成（$1\\le N\\le 2\\cdot 10^5$）。Bessie 可以使用 $N$ 种不同的颜色，她将这些颜色由浅到深用 $1$ 到 $N$ 标号（$1$ 是很浅的颜色，$N$ 是很深的颜色）。从而她可以用一个长为 $N$ 的整数数组来描述她想要给栅栏的每一小段涂上的颜色。\n\n初始时，所有栅栏小段均未被上色。Bessie 一笔可以给任意连续若干小段涂上同一种颜色，只要她不会在较深的颜色之上涂上较浅的颜色（她只能用较深的颜色覆盖较浅的颜色）。\n\n例如，一段长为 $4$ 的未被涂色的栅栏可以按如下方式上色：\n\n```\n0000 -> 1110 -> 1122 -> 1332\n```\n\n不幸的是，Bessie 没有足够的时间等待颜料变干。所以，Bessie 认为她可能需要放弃为栅栏上某些小段上色！现在，她正在考虑 $Q$ 个候选的区间（$1\\le Q\\le 2\\cdot 10^5$），每个区间用满足 $1 \\leq a \\leq b \\leq N$ 的两个整数 $(a,b)$ 表示，为需要上色的小段 $a \\ldots b$ 的两端点位置。\n\n对于每个候选区间，将所有区间内的栅栏小段都涂上所希望的颜色，并且区间外的栅栏小段均不涂色，最少需要涂多少笔？注意在这个过程中 Bessie 并没有真正进行任何的涂色，所以对于每个候选区间的回答是独立的。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n下一行包含一个长为 $N$ 的整数数组，表示每个栅栏小段所希望的颜色。\n\n以下 $Q$ 行，每行包含两个空格分隔的整数 $a$ 和 $b$，表示一个需要涂色的候选区间。", "outputFormat": "对于 $Q$ 个候选区间的每一个，输出一行，包含答案。", "hint": "#### 样例 1 解释\n\n在这个样例中，对应颜色为  `1 1 2` 的子段涂上颜色需要两笔。  \n对应颜色为 `2 1 1 2` 的子段涂上颜色需要三笔。  \n对应颜色为 `1 2 2 1 1 2` 的子段涂上颜色需要三笔。  \n对应颜色为 `1 2 3 2` 的子段涂上颜色需要三笔。\n\n#### 测试点性质\n\n - 对于 $10\\%$ 的数据，满足 $N,Q\\le 100$。\n - 对于另外 $15\\%$ 的数据，满足 $N,Q\\le 5000$。\n - 对于另外 $25\\%$ 的数据，输入数组不包含大于 $10$ 的数。\n - 对于另外 $50\\%$ 的数据，没有额外限制。\n\n供题：Andi Qu，Brian Dean，Benjamin Qi", "locale": "zh-CN"}}}
{"pid": "P7417", "type": "P", "difficulty": 7, "samples": [["2\n\n5 5\n1 2\n2 3\n2 5\n1 4\n4 5\n\n5 5\n1 2\n2 3\n3 4\n4 5\n1 5", "4\n5"], ["7\n\n8 10\n1 2\n1 3\n1 4\n1 5\n2 6\n3 7\n4 8\n5 8\n6 7\n8 8\n\n10 11\n1 2\n1 5\n1 6\n2 3\n3 4\n4 5\n4 10\n6 7\n7 8\n8 9\n9 9\n\n13 15\n1 2\n1 5\n1 6\n2 3\n3 4\n4 5\n6 7\n7 8\n7 11\n8 9\n9 10\n10 11\n11 12\n11 13\n12 13\n\n16 18\n1 2\n1 7\n1 8\n2 3\n3 4\n4 5\n5 6\n6 7\n8 9\n9 10\n9 15\n9 16\n10 11\n11 12\n12 13\n13 14\n14 15\n14 16\n\n21 22\n1 2\n1 9\n1 12\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n7 11\n8 9\n8 10\n12 13\n13 14\n13 21\n14 15\n15 16\n16 17\n17 18\n18 19\n19 20\n20 21\n\n20 26\n1 2\n1 5\n1 6\n2 3\n3 4\n4 5\n4 7\n6 8\n8 9\n8 11\n8 12\n8 13\n8 14\n8 15\n8 16\n8 17\n9 10\n10 18\n11 18\n12 19\n13 20\n14 20\n15 20\n16 20\n17 20\n19 20\n\n24 31\n1 2\n1 7\n1 8\n2 3\n3 4\n4 5\n5 6\n6 7\n6 9\n8 10\n10 11\n10 16\n10 17\n10 18\n10 19\n10 20\n11 12\n12 13\n13 14\n14 15\n15 16\n15 17\n15 18\n15 19\n15 20\n15 21\n15 22\n15 23\n15 24\n21 22\n23 24", "10\n11\n15\n18\n22\n26\n31"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["图论", "贪心", "USACO", "2021", "O2优化", "最短路", "二分图", "分类讨论"], "title": "[USACO21FEB] Minimizing Edges P", "background": "", "description": "Bessie 有一个连通无向图 $G$。$G$ 有 $N$ 个编号为 $1\\ldots N$ 的结点，以及 $M$ 条边（$2\\le N\\le 10^5, N-1\\le M\\le \\frac{N^2+N}{2}$）。$G$ 有可能包含自环（一个结点连到自身的边），但不包含重边（连接同一对结点的多条边）。\n\n令 $f_G(a,b)$ 为一个布尔函数，对于每一个 $1\\le a\\le N$ 和 $0\\le b$，如果存在一条从结点 $1$ 到结点 $a$ 的路径恰好经过了 $b$ 条边，则函数值为真，否则为假。如果一条边被经过了多次，则这条边会被计算相应的次数。\n\nElsie 想要复制 Bessie。具体地说，她想要构造一个无向图 $G'$，使得对于所有的 $a$ 和 $b$，均有 $f_{G'}(a,b)=f_G(a,b)$。\n\nElsie 想要进行最少数量的工作，所以她想要构造最小可能的图。所以，你的工作是计算 $G'$ 的边数的最小可能值。\n\n每个输入包含 $T$（$1\\le T\\le 5\\cdot 10^4$）组独立的测试用例。保证所有测试用例中的 $N$ 之和不超过 $10^5$，且所有测试用例中的 $M$ 之和不超过 $2\\cdot 10^5$。\n", "inputFormat": "输入的第一行包含 $T$，为测试用例的数量。\n\n每个测试用例的第一行包含两个整数 $N$ 和 $M$。\n\n每个测试用例的以下 $M$ 行每行包含两个整数 $x$ 和 $y$（$1\\le x\\le y\\le N$），表示 $G$ 中存在一条连接 $x$ 与 $y$ 的边。\n\n为提高可读性，相邻的测试用例之间用一个空行隔开。", "outputFormat": "对每个测试用例，输出一行，为 $G'$ 中的边数的最小可能值。", "hint": "#### 样例 1 解释\n\n在第一个测试用例中，Elsie 可以通过从 $G$ 中移除 $(2,5)$ 来构造得到 $G'$。或者，她也可以构造一张包含以下边的图，因为她并未被限制只能从 $G$ 中移除边：\n\n```\n1 2\n1 4\n4 3\n4 5\n```\n\nElsie 显然不能得到比 $N-1$ 更优的解，因为 $G'$ 一定也是连通的。\n\n#### 样例 2 解释\n\n在以上这些测试用例中，Elsie 都不能做得比 Bessie 更优。\n\n#### 测试点性质：\n\n - 对于另外 $5\\%$ 的数据，满足 $N\\le 5$。\n - 对于另外 $10\\%$ 的数据，满足 $M=N$。\n - 对于另外 $20\\%$ 的数据，如果并非对于所有的 $b$ 均有 $f_G(x,b)=f_G(y,b)$，则存在 $b$ 使得 $f_G(x,b)$ 为真且 $f_G(y,b)$ 为假。\n - 对于另外 $30\\%$ 的数据，满足 $N\\le 10^2$。   \n - 对于另外 $25\\%$ 的数据，没有额外限制。\n\n供题：Benjamin Qi", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] Minimizing Edges P", "background": "", "description": "Bessie 有一个连通无向图 $G$。$G$ 有 $N$ 个编号为 $1\\ldots N$ 的结点，以及 $M$ 条边（$2\\le N\\le 10^5, N-1\\le M\\le \\frac{N^2+N}{2}$）。$G$ 有可能包含自环（一个结点连到自身的边），但不包含重边（连接同一对结点的多条边）。\n\n令 $f_G(a,b)$ 为一个布尔函数，对于每一个 $1\\le a\\le N$ 和 $0\\le b$，如果存在一条从结点 $1$ 到结点 $a$ 的路径恰好经过了 $b$ 条边，则函数值为真，否则为假。如果一条边被经过了多次，则这条边会被计算相应的次数。\n\nElsie 想要复制 Bessie。具体地说，她想要构造一个无向图 $G'$，使得对于所有的 $a$ 和 $b$，均有 $f_{G'}(a,b)=f_G(a,b)$。\n\nElsie 想要进行最少数量的工作，所以她想要构造最小可能的图。所以，你的工作是计算 $G'$ 的边数的最小可能值。\n\n每个输入包含 $T$（$1\\le T\\le 5\\cdot 10^4$）组独立的测试用例。保证所有测试用例中的 $N$ 之和不超过 $10^5$，且所有测试用例中的 $M$ 之和不超过 $2\\cdot 10^5$。\n", "inputFormat": "输入的第一行包含 $T$，为测试用例的数量。\n\n每个测试用例的第一行包含两个整数 $N$ 和 $M$。\n\n每个测试用例的以下 $M$ 行每行包含两个整数 $x$ 和 $y$（$1\\le x\\le y\\le N$），表示 $G$ 中存在一条连接 $x$ 与 $y$ 的边。\n\n为提高可读性，相邻的测试用例之间用一个空行隔开。", "outputFormat": "对每个测试用例，输出一行，为 $G'$ 中的边数的最小可能值。", "hint": "#### 样例 1 解释\n\n在第一个测试用例中，Elsie 可以通过从 $G$ 中移除 $(2,5)$ 来构造得到 $G'$。或者，她也可以构造一张包含以下边的图，因为她并未被限制只能从 $G$ 中移除边：\n\n```\n1 2\n1 4\n4 3\n4 5\n```\n\nElsie 显然不能得到比 $N-1$ 更优的解，因为 $G'$ 一定也是连通的。\n\n#### 样例 2 解释\n\n在以上这些测试用例中，Elsie 都不能做得比 Bessie 更优。\n\n#### 测试点性质：\n\n - 对于另外 $5\\%$ 的数据，满足 $N\\le 5$。\n - 对于另外 $10\\%$ 的数据，满足 $M=N$。\n - 对于另外 $20\\%$ 的数据，如果并非对于所有的 $b$ 均有 $f_G(x,b)=f_G(y,b)$，则存在 $b$ 使得 $f_G(x,b)$ 为真且 $f_G(y,b)$ 为假。\n - 对于另外 $30\\%$ 的数据，满足 $N\\le 10^2$。   \n - 对于另外 $25\\%$ 的数据，没有额外限制。\n\n供题：Benjamin Qi", "locale": "zh-CN"}}}
{"pid": "P7418", "type": "P", "difficulty": 7, "samples": [["1\n\n5 4\n1 2\n2 3\n1 4\n3 5", "3"], ["7\n\n4 6\n1 2\n2 3\n3 4\n1 3\n2 4\n1 4\n\n5 5\n1 2\n2 3\n3 4\n4 5\n1 5\n\n5 7\n1 2\n1 3\n1 5\n2 4\n3 3\n3 4\n4 5\n\n6 6\n1 2\n2 3\n3 4\n4 5\n5 6\n6 6\n\n6 7\n1 2\n2 3\n1 3\n1 4\n4 5\n5 6\n1 6\n\n10 10\n1 1\n1 2\n1 3\n1 4\n1 5\n1 6\n1 7\n1 8\n1 9\n1 10\n\n22 28\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n1 7\n1 8\n3 9\n8 10\n10 11\n10 12\n10 13\n10 14\n11 15\n12 16\n13 17\n14 18\n9 15\n9 16\n9 17\n9 18\n15 19\n19 20\n15 20\n16 21\n21 22\n16 22", "45\n35\n11\n1\n15\n371842544\n256838540"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["动态规划 DP", "USACO", "2021", "O2优化", "容斥原理"], "title": "[USACO21FEB] Counting Graphs P", "background": "", "description": "Bessie 有一个连通无向图 $G$。$G$ 有 $N$ 个编号为 $1\\ldots N$ 的结点，以及 $M$ 条边（$1\\le N\\le 10^2, N-1\\le M\\le \\frac{N^2+N}{2}$）。$G$ 有可能包含自环（一个结点连到自身的边），但不包含重边（连接同一对结点的多条边）。\n\n令 $f_G(a,b)$ 为一个布尔函数，对于每一个 $1\\le a\\le N$ 和 $0\\le b$，如果存在一条从结点 $1$ 到结点 $a$ 的路径恰好经过了 $b$ 条边，则函数值为真，否则为假。如果一条边被经过了多次，则这条边会被计算相应的次数。\n\nElsie 想要复制 Bessie。具体地说，她想要构造一个无向图 $G'$，使得对于所有的 $a$ 和 $b$，均有 $f_{G'}(a,b)=f_G(a,b)$。\n\n你的工作是计算 Elsie 可以构造的图 $G'$ 的数量，对 $10^9+7$ 取模。与 $G$ 一样，$G'$ 可以包含自环而不能包含重边（这意味着对于 $N$ 个有标号结点共有 $2^{\\frac{N^2+N}{2}}$ 个不同的图）。\n\n每个输入包含 $T$（$1\\le T\\le \\frac{10^5}{4}$）组独立的测试用例。保证所有测试用例中的 $N^2$ 之和不超过 $10^5$。", "inputFormat": "输入的第一行包含 $T$，为测试用例的数量。\n\n每个测试用例的第一行包含整数 $N$ 和 $M$。\n\n每个测试用例的以下 $M$ 行每行包含两个整数 $x$ 和 $y$（$1\\le x\\le y\\le N$），表示 $G$ 中存在一条连接 $x$ 与 $y$ 的边。\n\n为提高可读性，相邻的测试用例之间用一个空行隔开。", "outputFormat": "对每个测试用例，输出一行，为不同的 $G'$ 的数量，对 $10^9+7$ 取模。", "hint": "#### 样例 1 解释：\n\n在第一个测试用例中，$G'$ 可以等于 $G$，或以下两个图之一：\n\n```\n5 4\n1 2\n1 4\n3 4\n3 5\n```\n\n```\n5 5\n1 2\n2 3\n1 4\n3 4\n3 5\n```\n\n#### 样例 2 解释：\n\n有一些较大的测试用例。确保你的答案对 $10^9+7$ 取模。注意倒数第二个测试用例的答案为 $2^{45}\\pmod{10^9+7}$。\n\n#### 测试点性质：\n\n\n - 对于另外 $5\\%$ 的数据，满足 $N\\le 5$。\n - 对于另外 $10\\%$ 的数据，满足 $M=N-1$。\n - 对于另外 $30\\%$ 的数据，如果并非对于所有的 $b$ 均有 $f_G(x,b)=f_G(y,b)$，则存在 $b$ 使得 $f_G(x,b)$ 为真且 $f_G(y,b)$ 为假。\n - 对于另外 $45\\%$ 的数据，没有额外限制。\n\n供题：Benjamin Qi\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] Counting Graphs P", "background": "", "description": "Bessie 有一个连通无向图 $G$。$G$ 有 $N$ 个编号为 $1\\ldots N$ 的结点，以及 $M$ 条边（$1\\le N\\le 10^2, N-1\\le M\\le \\frac{N^2+N}{2}$）。$G$ 有可能包含自环（一个结点连到自身的边），但不包含重边（连接同一对结点的多条边）。\n\n令 $f_G(a,b)$ 为一个布尔函数，对于每一个 $1\\le a\\le N$ 和 $0\\le b$，如果存在一条从结点 $1$ 到结点 $a$ 的路径恰好经过了 $b$ 条边，则函数值为真，否则为假。如果一条边被经过了多次，则这条边会被计算相应的次数。\n\nElsie 想要复制 Bessie。具体地说，她想要构造一个无向图 $G'$，使得对于所有的 $a$ 和 $b$，均有 $f_{G'}(a,b)=f_G(a,b)$。\n\n你的工作是计算 Elsie 可以构造的图 $G'$ 的数量，对 $10^9+7$ 取模。与 $G$ 一样，$G'$ 可以包含自环而不能包含重边（这意味着对于 $N$ 个有标号结点共有 $2^{\\frac{N^2+N}{2}}$ 个不同的图）。\n\n每个输入包含 $T$（$1\\le T\\le \\frac{10^5}{4}$）组独立的测试用例。保证所有测试用例中的 $N^2$ 之和不超过 $10^5$。", "inputFormat": "输入的第一行包含 $T$，为测试用例的数量。\n\n每个测试用例的第一行包含整数 $N$ 和 $M$。\n\n每个测试用例的以下 $M$ 行每行包含两个整数 $x$ 和 $y$（$1\\le x\\le y\\le N$），表示 $G$ 中存在一条连接 $x$ 与 $y$ 的边。\n\n为提高可读性，相邻的测试用例之间用一个空行隔开。", "outputFormat": "对每个测试用例，输出一行，为不同的 $G'$ 的数量，对 $10^9+7$ 取模。", "hint": "#### 样例 1 解释：\n\n在第一个测试用例中，$G'$ 可以等于 $G$，或以下两个图之一：\n\n```\n5 4\n1 2\n1 4\n3 4\n3 5\n```\n\n```\n5 5\n1 2\n2 3\n1 4\n3 4\n3 5\n```\n\n#### 样例 2 解释：\n\n有一些较大的测试用例。确保你的答案对 $10^9+7$ 取模。注意倒数第二个测试用例的答案为 $2^{45}\\pmod{10^9+7}$。\n\n#### 测试点性质：\n\n\n - 对于另外 $5\\%$ 的数据，满足 $N\\le 5$。\n - 对于另外 $10\\%$ 的数据，满足 $M=N-1$。\n - 对于另外 $30\\%$ 的数据，如果并非对于所有的 $b$ 均有 $f_G(x,b)=f_G(y,b)$，则存在 $b$ 使得 $f_G(x,b)$ 为真且 $f_G(y,b)$ 为假。\n - 对于另外 $45\\%$ 的数据，没有额外限制。\n\n供题：Benjamin Qi\n", "locale": "zh-CN"}}}
{"pid": "P7419", "type": "P", "difficulty": 4, "samples": [["2\n2\n3", "12\n88"]], "limits": {"time": [200, 200, 200, 200, 200, 200, 200], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学"], "title": "「PMOI-2」参天大树", "background": "", "description": "b6e0 有一棵参天大树。这棵二叉有根树有无数多个节点。它的根节点的编号为 $1$，对于每一个 $x(x\\ge1)$，编号为 $x$ 的节点有编号为 $2x$ 和 $2x+1$ 的子节点。\n\n你需要在编号小于等于 $n$ 的节点中，选出两个**可以相同**的节点，求出所有情况中它们的最近公共祖先的编号的和。也就是求（其中 $\\operatorname{LCA}(i,j)$ 表示 $i$ 与 $j$ 的最近公共祖先的编号）：\n$$\\sum_{i=1}^n\\sum_{j=1}^n \\operatorname{LCA}(i,j)$$\n保证存在一个自然数 $k$，满足 $n=2^k-1$。\n\n**答案对 $998244353$ 取模。**", "inputFormat": "**本题有多组询问。**\n\n第一行一个正整数 $t$ 表示询问的次数。\n\n下面 $t$ 行，每行一个自然数 $k$，表示第 $i$ 次询问的 $n=2^k-1$。", "outputFormat": "输出 $t$ 行，第 $i$ 行表示第 $i$ 次询问的答案**对 $998244353$ 取模**的值。", "hint": "【样例解释】\n\n对于第一次询问，$n=2^2-1=3$，答案为 $1+1+1+1+2+1+1+1+3=12$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask1（20pts）：$k\\le8$；\n- Subtask2（20pts）：$t,k\\le300$；\n- Subtask3（20pts）：$k\\le10^4$；\n- Subtask4（40pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le t,k\\le10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-2」参天大树", "background": "", "description": "b6e0 有一棵参天大树。这棵二叉有根树有无数多个节点。它的根节点的编号为 $1$，对于每一个 $x(x\\ge1)$，编号为 $x$ 的节点有编号为 $2x$ 和 $2x+1$ 的子节点。\n\n你需要在编号小于等于 $n$ 的节点中，选出两个**可以相同**的节点，求出所有情况中它们的最近公共祖先的编号的和。也就是求（其中 $\\operatorname{LCA}(i,j)$ 表示 $i$ 与 $j$ 的最近公共祖先的编号）：\n$$\\sum_{i=1}^n\\sum_{j=1}^n \\operatorname{LCA}(i,j)$$\n保证存在一个自然数 $k$，满足 $n=2^k-1$。\n\n**答案对 $998244353$ 取模。**", "inputFormat": "**本题有多组询问。**\n\n第一行一个正整数 $t$ 表示询问的次数。\n\n下面 $t$ 行，每行一个自然数 $k$，表示第 $i$ 次询问的 $n=2^k-1$。", "outputFormat": "输出 $t$ 行，第 $i$ 行表示第 $i$ 次询问的答案**对 $998244353$ 取模**的值。", "hint": "【样例解释】\n\n对于第一次询问，$n=2^2-1=3$，答案为 $1+1+1+1+2+1+1+1+3=12$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\n- Subtask1（20pts）：$k\\le8$；\n- Subtask2（20pts）：$t,k\\le300$；\n- Subtask3（20pts）：$k\\le10^4$；\n- Subtask4（40pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le t,k\\le10^6$。", "locale": "zh-CN"}}}
