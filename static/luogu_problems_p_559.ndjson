{"pid": "P12345", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2025", "数论", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 A 第二场] 双子星的讯息", "background": "", "description": "在夜空下，双子星闪烁，据说它们藏着宇宙的秘密。天文学家小蓝守着古朴的望远镜，翻开一本泛黄的星图。图上标注了两串数字：$20255202$ 和 $10244201$。旁边的笔记写道：若有一正整数 $n$，使 $n + 20255202$ 与 $n + 10244201$ 均为完全平方数，便能解锁双子星的讯息。小蓝点亮油灯，决心追寻答案。\n\n完全平方数指一个整数可以表示为某个整数的平方。例如，$1 = 1^2$、$4 = 2^2$、$9 = 3^2$ 等都是完全平方数。具体地，如果一个整数 $k$ 满足 $k = m^2$（其中 $m$ 是整数），那么 $k$ 就是一个完全平方数。\n\n现在，请你帮小蓝求出符合条件的正整数 $n$ 的个数。", "inputFormat": "", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只需要**编写一个程序输出这个整数**，输出多余的内容将无法得分。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 A 第二场] 双子星的讯息", "background": "", "description": "在夜空下，双子星闪烁，据说它们藏着宇宙的秘密。天文学家小蓝守着古朴的望远镜，翻开一本泛黄的星图。图上标注了两串数字：$20255202$ 和 $10244201$。旁边的笔记写道：若有一正整数 $n$，使 $n + 20255202$ 与 $n + 10244201$ 均为完全平方数，便能解锁双子星的讯息。小蓝点亮油灯，决心追寻答案。\n\n完全平方数指一个整数可以表示为某个整数的平方。例如，$1 = 1^2$、$4 = 2^2$、$9 = 3^2$ 等都是完全平方数。具体地，如果一个整数 $k$ 满足 $k = m^2$（其中 $m$ 是整数），那么 $k$ 就是一个完全平方数。\n\n现在，请你帮小蓝求出符合条件的正整数 $n$ 的个数。", "inputFormat": "", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只需要**编写一个程序输出这个整数**，输出多余的内容将无法得分。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P12346", "type": "P", "difficulty": 3, "samples": [["10011", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2025", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 A 第二场] 基因配对", "background": "", "description": "小蓝发现了一种奇特的生物，它的遗传信息可以表示为一个长度为 $n$ 的 $01$ 串 $s = s_0s_1 \\cdots s_{n-1}$，其中的任意一段子串 $s_{l, r} = s_l s_{l+1} \\cdots s_r$ 则可以构成一个基因。\n\n我们称遗传信息的某两个位置相反，是指这两个位置上的字符不相同（即其中一个为 0，另一个为 1）。\n\n小蓝想知道，有多少对不相交的相同长度的基因正好相反，即有多少对 $[(a, b), (c, d)]$ 满足 $0 \\leq a \\leq b < c \\leq d < n$ 且子串 $s_{a, b}$ 和子串 $s_{c, d}$ 的每个位置恰好相反。", "inputFormat": "输入一行包含一个长度为 $n$ 的 $01$ 串 $s$。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 样例说明\n\n有以下 $8$ 对子串满足条件：$[(0,0),(1,1)]$、$[(0,0),(2,2)]$、$[(1,1),(3,3)]$、$[(1,1),(4,4)]$、$[(2,2),(3,3)]$、$[(2,2),(4,4)]$、$[(0,1),(2,3)]$、$[(1,2),(3,4)]$。\n\n### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$1 \\leq n \\leq 20$；\n- 对于所有评测用例，$1 \\leq n \\leq 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 A 第二场] 基因配对", "background": "", "description": "小蓝发现了一种奇特的生物，它的遗传信息可以表示为一个长度为 $n$ 的 $01$ 串 $s = s_0s_1 \\cdots s_{n-1}$，其中的任意一段子串 $s_{l, r} = s_l s_{l+1} \\cdots s_r$ 则可以构成一个基因。\n\n我们称遗传信息的某两个位置相反，是指这两个位置上的字符不相同（即其中一个为 0，另一个为 1）。\n\n小蓝想知道，有多少对不相交的相同长度的基因正好相反，即有多少对 $[(a, b), (c, d)]$ 满足 $0 \\leq a \\leq b < c \\leq d < n$ 且子串 $s_{a, b}$ 和子串 $s_{c, d}$ 的每个位置恰好相反。", "inputFormat": "输入一行包含一个长度为 $n$ 的 $01$ 串 $s$。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 样例说明\n\n有以下 $8$ 对子串满足条件：$[(0,0),(1,1)]$、$[(0,0),(2,2)]$、$[(1,1),(3,3)]$、$[(1,1),(4,4)]$、$[(2,2),(3,3)]$、$[(2,2),(4,4)]$、$[(0,1),(2,3)]$、$[(1,2),(3,4)]$。\n\n### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$1 \\leq n \\leq 20$；\n- 对于所有评测用例，$1 \\leq n \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P12347", "type": "P", "difficulty": 4, "samples": [["9\n1 65536\n1 65536\n3 2\n3 3\n2\n1 1024\n1 2\n3 2\n3 3", "OVERFLOW\nERROR\n2048\n134217728"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2025", "栈", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 A 第二场] 栈与乘积", "background": "目前测试数据可能较水，我们之后会加强数据。", "description": "给定一个栈，给出若干次如下类型的操作：\n\n1. $1 \\ x$: 将 $x$ 加入栈顶。\n2. $2$: 将栈顶的数弹出（如果栈是空的，则什么都不做）。\n3. $3 \\ y$: 查询栈内的最顶端 $y$ 个数的乘积。如果大于等于 $2^{32}$，输出 `OVERFLOW`。如果栈内不足 $y$ 个数，输出 `ERROR`。", "inputFormat": "输入的第一行包含一个正整数 $Q$，表示操作次数。\n\n接下来 $Q$ 行，每行包含一个或两个正整数表示一个操作，如果一行包含两个整数，两个整数之间用一个空格分隔。", "outputFormat": "对于每个 $3 \\ y$ 形式的操作，输出一行包含一个整数，表示答案。", "hint": "### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$Q \\leq 5000$；\n- 对于所有评测用例，$1 \\leq Q \\leq 10^5$，$0 \\leq x < 2^{30}$，$1 \\leq y < 2^{30}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 A 第二场] 栈与乘积", "background": "目前测试数据可能较水，我们之后会加强数据。", "description": "给定一个栈，给出若干次如下类型的操作：\n\n1. $1 \\ x$: 将 $x$ 加入栈顶。\n2. $2$: 将栈顶的数弹出（如果栈是空的，则什么都不做）。\n3. $3 \\ y$: 查询栈内的最顶端 $y$ 个数的乘积。如果大于等于 $2^{32}$，输出 `OVERFLOW`。如果栈内不足 $y$ 个数，输出 `ERROR`。", "inputFormat": "输入的第一行包含一个正整数 $Q$，表示操作次数。\n\n接下来 $Q$ 行，每行包含一个或两个正整数表示一个操作，如果一行包含两个整数，两个整数之间用一个空格分隔。", "outputFormat": "对于每个 $3 \\ y$ 形式的操作，输出一行包含一个整数，表示答案。", "hint": "### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$Q \\leq 5000$；\n- 对于所有评测用例，$1 \\leq Q \\leq 10^5$，$0 \\leq x < 2^{30}$，$1 \\leq y < 2^{30}$。", "locale": "zh-CN"}}}
{"pid": "P12348", "type": "P", "difficulty": 5, "samples": [["2 4\n1 1 2 2 2\n1 2 3 4 2\n", "4"], ["2 2\n1 1 2 2 1\n2 2 1 1 1", "No Solution"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "差分约束", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 A 第二场] 交互", "background": null, "description": "小蓝正在做一道交互题。有一个未知的下标从 $1$ 到 $m$ 的数组 $a$，小蓝每次可以进行一次询问 $(l, r, p, q)$，然后交互程序会返回 $ans$ 满足 $\\min\\limits_{l \\leq x \\leq r} a[x] - \\max\\limits_{p \\leq y \\leq q} a[y] \\geq ans$。但小蓝很快就发现，因为 $ans$ 并不是精确的值，所以他永远也无法得到实际的数组元素的值。\n\n给定小蓝的几次询问和交互程序的返回值，请你帮他求出 $\\max\\limits_{1 \\leq x \\leq m} a[x] - \\min\\limits_{1 \\leq y \\leq m} a[y]$ 的可能的最小值。", "inputFormat": "输入的第一行包含两个正整数 $n, m$，用一个空格分隔，分别表示小蓝的询问次数和数组长度。\n\n接下来 $n$ 行，每行包含五个正整数 $l_i, r_i, p_i, q_i, ans_i$，相邻整数之间使用一个空格分隔，表示第 $i$ 次小蓝询问及其结果，含义如问题描述所述。", "outputFormat": "输出一行包含一个整数表示答案，即 $\\max\\limits_{1 \\leq x \\leq m} a[x] - \\min\\limits_{1 \\leq y \\leq m} a[y]$ 的可能的最小值，如果无解请输出 `No Solution`。", "hint": "### 样例说明\n\n- 对于样例 $1$，$a_1 - a_2 \\geq 2$，$\\min(a_1, a_2) - \\max(a_3, a_4) \\geq 2$。所以 $a_1 - a_3 \\geq 4$，所以 $a_i$ 之间差值的最大值不会小于 $4$。\n- 对于样例 $2$，$a_1 - a_2 \\geq 1$，$a_2 - a_1 \\geq 1$，这种情况显然是无解的。\n\n### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$m \\leq 300$；\n- 对于所有评测用例，$1 \\leq n \\leq 500$，$1 \\leq m \\leq 10000$，$-100000 \\leq ans_i \\leq 100000$，$1 \\leq l_i, r_i, p_i, q_i \\leq m$，$0 \\leq q_i - p_i < 100$，$0 \\leq r_i - l_i < 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 A 第二场] 交互", "background": null, "description": "小蓝正在做一道交互题。有一个未知的下标从 $1$ 到 $m$ 的数组 $a$，小蓝每次可以进行一次询问 $(l, r, p, q)$，然后交互程序会返回 $ans$ 满足 $\\min\\limits_{l \\leq x \\leq r} a[x] - \\max\\limits_{p \\leq y \\leq q} a[y] \\geq ans$。但小蓝很快就发现，因为 $ans$ 并不是精确的值，所以他永远也无法得到实际的数组元素的值。\n\n给定小蓝的几次询问和交互程序的返回值，请你帮他求出 $\\max\\limits_{1 \\leq x \\leq m} a[x] - \\min\\limits_{1 \\leq y \\leq m} a[y]$ 的可能的最小值。", "inputFormat": "输入的第一行包含两个正整数 $n, m$，用一个空格分隔，分别表示小蓝的询问次数和数组长度。\n\n接下来 $n$ 行，每行包含五个正整数 $l_i, r_i, p_i, q_i, ans_i$，相邻整数之间使用一个空格分隔，表示第 $i$ 次小蓝询问及其结果，含义如问题描述所述。", "outputFormat": "输出一行包含一个整数表示答案，即 $\\max\\limits_{1 \\leq x \\leq m} a[x] - \\min\\limits_{1 \\leq y \\leq m} a[y]$ 的可能的最小值，如果无解请输出 `No Solution`。", "hint": "### 样例说明\n\n- 对于样例 $1$，$a_1 - a_2 \\geq 2$，$\\min(a_1, a_2) - \\max(a_3, a_4) \\geq 2$。所以 $a_1 - a_3 \\geq 4$，所以 $a_i$ 之间差值的最大值不会小于 $4$。\n- 对于样例 $2$，$a_1 - a_2 \\geq 1$，$a_2 - a_1 \\geq 1$，这种情况显然是无解的。\n\n### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$m \\leq 300$；\n- 对于所有评测用例，$1 \\leq n \\leq 500$，$1 \\leq m \\leq 10000$，$-100000 \\leq ans_i \\leq 100000$，$1 \\leq l_i, r_i, p_i, q_i \\leq m$，$0 \\leq q_i - p_i < 100$，$0 \\leq r_i - l_i < 100$。", "locale": "zh-CN"}}}
{"pid": "P12349", "type": "P", "difficulty": 4, "samples": [["4 4\n1010\n1111\n1011\n1100", "68"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2025", "蓝桥杯省赛"], "title": "[蓝桥杯 2025 省 B 第二场] 翻转硬币", "background": null, "description": "给定 $n$ 行 $m$ 列共 $n \\times m$ 个硬币，对于任意一个硬币，我们将其价值视为与其相邻（指上、下、左、右相邻）的硬币中与其正反相同的硬币数的平方。\n\n你可以进行任意次操作，每次可以选择任意一行并将该行的硬币全部翻转。\n\n求所有硬币的价值之和最大可能是多少。", "inputFormat": "输入的第一行包含两个正整数 $n, m$，用一个空格分隔。\n\n接下来 $n$ 行，每行包含 $m$ 个 0 或 1，表示给定的 $n \\times m$ 个硬币。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 样例说明\n\n如图，实线表示正面，虚线表示反面，翻转最后一行可以得到最大价值和：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/207dpqzp.png)\n\n### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$n, m \\leq 20$；\n- 对于所有评测用例，$1 \\leq n, m \\leq 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2025 省 B 第二场] 翻转硬币", "background": null, "description": "给定 $n$ 行 $m$ 列共 $n \\times m$ 个硬币，对于任意一个硬币，我们将其价值视为与其相邻（指上、下、左、右相邻）的硬币中与其正反相同的硬币数的平方。\n\n你可以进行任意次操作，每次可以选择任意一行并将该行的硬币全部翻转。\n\n求所有硬币的价值之和最大可能是多少。", "inputFormat": "输入的第一行包含两个正整数 $n, m$，用一个空格分隔。\n\n接下来 $n$ 行，每行包含 $m$ 个 0 或 1，表示给定的 $n \\times m$ 个硬币。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "### 样例说明\n\n如图，实线表示正面，虚线表示反面，翻转最后一行可以得到最大价值和：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/207dpqzp.png)\n\n### 评测用例规模与约定\n\n- 对于 $30\\%$ 的评测用例，$n, m \\leq 20$；\n- 对于所有评测用例，$1 \\leq n, m \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P12350", "type": "P", "difficulty": 2, "samples": [["8 2\n10100101", "2"], ["16 5\n0100100010100100", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「HCOI-R2」光影", "background": "我心中有一片幽暗的角落，\n\n那是夜的领域，是我的故乡，\n\n我将和许许多多的人一样，\n\n回到那纯洁的地方，\n\n纵使黑暗也无妨。", "description": "给你一个长度为 $n$ 的 01 串，你要删掉其中 $k$ 个 `0`。\n\n称极长的每一位数字都相同的子串为一个“块”。求能使 `1` 连成的最小块数。", "inputFormat": "第一行包含两个整数 $n,k$。\n\n第二行一个长度为 $n$ 的 01串。", "outputFormat": "一个数表示 `1` 连成的最小块数。", "hint": "### 样例解释 1\n删除位置在 $2,7$ 的 `0`。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（30 pts）：$n\\leq10^4$。\n+ Subtask 1（30 pts）：$e\\leq10$。\n+ Subtask 2（40 pts）：无特殊限制。\n\n$e$ 表示 01 串中 `0` 的个数。\n\n对于所有数据，$1\\leq k\\leq e\\leq n\\leq10^7$。", "locale": "zh-CN", "translations": {"en": {"title": "「HCOI-R2」light and shadow", "background": "Within my heart there lies a shadowed nook,\n\nThe realm of night, my birthright and my home.\n\nLike myriad souls who through the twilight roam,\n\nWe'll reach those pristine shores we long mistook—\n\nWhere even darkness holds no fright, but brook.", "description": "You are given a binary string of length $n$.\n\nDefine a *block* as the maximal substring of identical bits. For example, `0011101` has four blocks: `00`, `111`, `0`, and `1`. \n\nYou need to determine the minimum possible number of blocks of consecutive 1's after removing exactly $k$ 0's from the string.", "inputFormat": "The first line contains two integers $n,k$.\n\nThe second line contains a binary string of length $n$.", "outputFormat": "A single integer represents the minimum number of blocks of 1's.", "hint": "### Sample Explanation #1\nRemove the 0's located at $2$ and $7$.\n\n### Constraints\n\n**This problem uses subtasks.**\n+ Subtask 0 (30 pts): $n\\leq10^4$.\n+ Subtask 1 (30 pts): $e\\leq10$.\n+ Subtask 2 (40 pts): no additional constraints.\n\n$e$ denotes the number of 0's in the binary string.\n\nFor all test cases, it is guaranteed that $1\\leq k\\leq e\\leq n\\leq10^7$.", "locale": "en"}, "zh-CN": {"title": "「HCOI-R2」光影", "background": "我心中有一片幽暗的角落，\n\n那是夜的领域，是我的故乡，\n\n我将和许许多多的人一样，\n\n回到那纯洁的地方，\n\n纵使黑暗也无妨。", "description": "给你一个长度为 $n$ 的 01 串，你要删掉其中 $k$ 个 `0`。\n\n称极长的每一位数字都相同的子串为一个“块”。求能使 `1` 连成的最小块数。", "inputFormat": "第一行包含两个整数 $n,k$。\n\n第二行一个长度为 $n$ 的 01串。", "outputFormat": "一个数表示 `1` 连成的最小块数。", "hint": "### 样例解释 1\n删除位置在 $2,7$ 的 `0`。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（30 pts）：$n\\leq10^4$。\n+ Subtask 1（30 pts）：$e\\leq10$。\n+ Subtask 2（40 pts）：无特殊限制。\n\n$e$ 表示 01 串中 `0` 的个数。\n\n对于所有数据，$1\\leq k\\leq e\\leq n\\leq10^7$。", "locale": "zh-CN"}}}
{"pid": "P12351", "type": "P", "difficulty": 2, "samples": [["5\n1 2 5 2\n4 0 4 4\n3 3 7 3\n0 5 3 5\n2 1 2 6", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「HCOI-R2」哀之距", "background": "花纹横平竖直的猫？你遇到了？\n\n喵……喵。\n\n------------\n\n不知道出题人曾经是以什么样的精神状态写下了这样的题目背景，但我希望他能打赢复活赛回来 OI。", "description": "哀遇到的猫可看作一个平面，上面有 $n$ 个矩形。\n\n第 $i$ 个矩形的左下角坐标为 $(x_{i,0},y_{i,0})$，右上角坐标为 $(x_{i,1},y_{i,1})$。\n\n求其中距离最大的两个矩形的距离。\n\n两个矩形的距离定义为各在内部（包括四条边上）任取一点的切比雪夫距离的最小值。\n\n**切比雪夫距离：$(a,b)$ 和 $(c,d)$ 的切比雪夫距离为 $\\max(|a-c|,|b-d|)$。**", "inputFormat": "第一行一个整数 $n$，表示矩形个数。\n\n接下来 $n$ 行，第 $i$ 行四个整数 $x_{i,0}, y_{i,0}, x_{i,1}, y_{i,1}$，表示第 $i$ 个矩形。", "outputFormat": "一行一个整数，表示任意两个矩形的距离的最大值。", "hint": "### 数据规模与约定\n\n**本题采用捆绑测试。**\n+ Subtask 0（15 pts）：$n \\leq 20$，$x_{i,0}, y_{i,0}, x_{i,1}, y_{i,1} \\le 20$。\n+ Subtask 1（20 pts）：$n \\leq 10^3$。\n+ Subtask 2（25 pts）：$x_{i,0} = x_{i,1}, y_{i,0} = y_{i,1}$。\n+ Subtask 3（40 pts）：无特殊限制。\n\n对于所有数据，$2 \\le n \\le 2 \\times 10^5 $，$0 \\le x_{i,0} \\le x_{i,1} \\le 10^{18}$，$0 \\le y_{i,0} \\le y_{i,1} \\le 10^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "「HCOI-R2」Ai's Distance", "background": "A cat with horizontal and vertical patterns? Did you encounter it?\n\nMeow... meow.\n\nI don't know what kind of mental state the problem setter used to write about the background of such a problem, but I hope he can win the redance and return to OI.\n\n**Please note the special time limit of this problem.**", "description": "The cat that Ai encountered can be treated as a plane with $n$ rectangles on it.\n\nThe coordinates of the bottom-left corner of the $i $-th rectangle are $(x_{i, 0},y_{i, 0}) $, and the coordinates of the top-right corner are $(x_{i, 1}, y_{i, 1}) $.\n\nFind the distance between the two rectangles with the largest distance.\n\nThe distance between two rectangles is defined as the minimum Chebyshev distance between any pair of points where one point lies in the first rectangle and the other in the second one (including the boundaries).\n\n**Chebyshev distance: The Chebyshev distance between $(a,b)$ and $(c,d)$ is $\\max(|a-c|,|b-d|)$.**", "inputFormat": "The first line contains an integer $n$, representing the number of rectangles.\n\nIn the next $n$ lines, the $i$-th line consists of four integers $x_{i,0},y_{i,0},x_{i,1},y_{i,1}$, representing the $i$-th rectangle.", "outputFormat": "A single integer which represents the maximum distance between any two rectangles.", "hint": "### Constraints\n\n**This problem uses subtasks.**\n\n+ Subtask 0 (15 pts): $n \\leq 20$, $x_{i,0}, y_{i,0}, x_{i,1}, y_{i,1} \\le 20$.\n+ Subtask 1 (20 pts): $n \\leq 10^3$.\n+ Subtask 2 (25 pts): $x_{i,0} = x_{i,1}, y_{i,0} = y_{i,1}$.\n+ Subtask 3 (40 pts): No additional constraints.\n\nFor all test cases, it is guaranteed that $2 \\le n \\le 2 \\times 10^5 $, $0 \\le x_{i,0} \\le x_{i,1} \\le 10^{18}$, $0 \\le y_{i,0} \\le y_{i,1} \\le 10^{18}$.", "locale": "en"}, "zh-CN": {"title": "「HCOI-R2」哀之距", "background": "花纹横平竖直的猫？你遇到了？\n\n喵……喵。\n\n------------\n\n不知道出题人曾经是以什么样的精神状态写下了这样的题目背景，但我希望他能打赢复活赛回来 OI。", "description": "哀遇到的猫可看作一个平面，上面有 $n$ 个矩形。\n\n第 $i$ 个矩形的左下角坐标为 $(x_{i,0},y_{i,0})$，右上角坐标为 $(x_{i,1},y_{i,1})$。\n\n求其中距离最大的两个矩形的距离。\n\n两个矩形的距离定义为各在内部（包括四条边上）任取一点的切比雪夫距离的最小值。\n\n**切比雪夫距离：$(a,b)$ 和 $(c,d)$ 的切比雪夫距离为 $\\max(|a-c|,|b-d|)$。**", "inputFormat": "第一行一个整数 $n$，表示矩形个数。\n\n接下来 $n$ 行，第 $i$ 行四个整数 $x_{i,0}, y_{i,0}, x_{i,1}, y_{i,1}$，表示第 $i$ 个矩形。", "outputFormat": "一行一个整数，表示任意两个矩形的距离的最大值。", "hint": "### 数据规模与约定\n\n**本题采用捆绑测试。**\n+ Subtask 0（15 pts）：$n \\leq 20$，$x_{i,0}, y_{i,0}, x_{i,1}, y_{i,1} \\le 20$。\n+ Subtask 1（20 pts）：$n \\leq 10^3$。\n+ Subtask 2（25 pts）：$x_{i,0} = x_{i,1}, y_{i,0} = y_{i,1}$。\n+ Subtask 3（40 pts）：无特殊限制。\n\n对于所有数据，$2 \\le n \\le 2 \\times 10^5 $，$0 \\le x_{i,0} \\le x_{i,1} \\le 10^{18}$，$0 \\le y_{i,0} \\le y_{i,1} \\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P12352", "type": "P", "difficulty": 3, "samples": [["1\n6 4", "2\n1 2 5 6\n2 3 4 5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "其它技巧", "构造", "洛谷月赛"], "title": "「HCOI-R2」Rabbit Panic (Easy Ver.)", "background": "**注意在问题的这个版本中，你需要解决和 Hard Ver. 一样的问题，但是不需要最小化步数，而且数据范围不同。**", "description": "你有一个长度为 $n$ 的排列 $\\{p_n\\}$，初始 $p_i = i$。每次你可以选择 $m$ 个**不同**位置的元素，并**同时**将它们改成它们的平均值（不取整）。\n\n最后你需要使所有元素都相等。\n\n请你构造一组操作方案，无解输出 $-1$。\n\n**注意：你无需最小化操作数量。**", "inputFormat": "**本题单测试数据内含有多组输入。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n接下来每组测试数据包含两个正整数 $n,m$，含义如题面所述。", "outputFormat": "对于每组测试数据，你可以：\n\n- 输出一行 $-1$ 报告无解。\n- 输出一行 $P$ 表示你的操作次数，注意这个次数不必最小化。接下来的 $P$ 行，每行 $m$ 个数，表示你的操作，用空格分开。\n\n**注意，如果你的 $\\bm {P> 2n^2}$，则会直接被判定为答案错误，无论你的操作是否正确。**", "hint": "### 样例解释 1\n\n- $[1,2,3,4,5,6]\\to [3.5,3.5,3,4,3.5,3.5]\\to [3.5,3.5,3.5,3.5,3.5,3.5]$。\n- 注意：这不是唯一的答案。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 0 (20 pts)：$1\\leq \\sum n\\leq 10$。\n- Subtask 1 (30 pts)：$m\\bmod 2=0$。\n- Subtask 2 (10 pts)：$n\\bmod 2=0$，且 $m\\bmod 2=1$。\n- Subtask 3 (40 pts)：无特殊限制。\n\n保证 $1 \\leq T \\leq 10^3$，$1 \\leq m \\leq n \\leq 2\\times 10^3$，$1 \\leq \\sum n \\leq 10^4$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Rabbit Panic (Easy Version)", "background": "**Note that in this version of the problem, you don't need to minimize the number of operations, and the constraint of $n$ is different.**\n\n", "description": "You have a sequence $\\{p_n\\}$ where initially $p_i = i(1 \\leq i \\leq n)$.\n\nEach time you can choose $m$ **distinct** numbers $i_1, i_2\\dots i_m$, and **simultaneously** set all of $p_{i_1}, p_{i_2}\\dots p_{i_m}$ into their mean. **Note that the mean may not be an integer.** In this case, it will never be rounded.\n\nYou need to perform at most $2n^2$ operations to make $p_1 = p_2 = \\dots = p_n$. **Note that in this version of the problem, you don't need to minimize the number of operations.**", "inputFormat": "Each test consists of multiple test cases. The first line contains a single integer $T(1\\leq T\\leq 10^4)$ --- the number of sets of test cases. The description of each test case follows.\n\nIn each test case, the only line contains two integers --- $n$($1 \\leq n \\leq 2\\times 10^3$) and $m$($1\\le m\\le n$), representing the length of the sequence and the number $m$.\n\nIt's guaranteed that the sum of $n$ over all testcases does not exceed $10^4$.", "outputFormat": "For each test case, on the first line, output the number of operations you perform, $s$. You need to guarantee that $s\\le 2n^2$.\n\nOn the next $s$ lines, each line contains $m$ distinct integers in the range $[1, n]$ representing an operation.\n\nIf there's no solution, just print $s = -1$.\n\nIf there are multiple solutions, print any. **Note that you don't need to minimize the number of operations.**", "hint": "### Sample #1\n\n- $[1,2,3,4,5,6]\\to [3.5,3.5,3,4,3.5,3.5]\\to [3.5,3.5,3.5,3.5,3.5,3.5]$。\n- There may be different but valid solutions.\n\n### Constraints\n\n**This problem uses subtasks.**\n\n- Subtask 0 (20 pts): $1\\leq \\sum n\\leq 10$.\n- Subtask 1 (30 pts): $m \\bmod2 = 0$.\n- Subtask 2 (10 pts): $n \\bmod 2 = 0$ and $m \\bmod 2=1$. \n- Subtask 3 (40 pts): No additional constraints.\n\nIt is guaranteed that $1 \\leq T \\leq 10^3$, $1 \\leq m \\leq n \\leq 2\\times 10^3$, $1 \\leq \\sum n \\leq 10^4$.", "locale": "en"}, "zh-CN": {"title": "「HCOI-R2」Rabbit Panic (Easy Ver.)", "background": "**注意在问题的这个版本中，你需要解决和 Hard Ver. 一样的问题，但是不需要最小化步数，而且数据范围不同。**", "description": "你有一个长度为 $n$ 的排列 $\\{p_n\\}$，初始 $p_i = i$。每次你可以选择 $m$ 个**不同**位置的元素，并**同时**将它们改成它们的平均值（不取整）。\n\n最后你需要使所有元素都相等。\n\n请你构造一组操作方案，无解输出 $-1$。\n\n**注意：你无需最小化操作数量。**", "inputFormat": "**本题单测试数据内含有多组输入。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n接下来每组测试数据包含两个正整数 $n,m$，含义如题面所述。", "outputFormat": "对于每组测试数据，你可以：\n\n- 输出一行 $-1$ 报告无解。\n- 输出一行 $P$ 表示你的操作次数，注意这个次数不必最小化。接下来的 $P$ 行，每行 $m$ 个数，表示你的操作，用空格分开。\n\n**注意，如果你的 $\\bm {P> 2n^2}$，则会直接被判定为答案错误，无论你的操作是否正确。**", "hint": "### 样例解释 1\n\n- $[1,2,3,4,5,6]\\to [3.5,3.5,3,4,3.5,3.5]\\to [3.5,3.5,3.5,3.5,3.5,3.5]$。\n- 注意：这不是唯一的答案。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 0 (20 pts)：$1\\leq \\sum n\\leq 10$。\n- Subtask 1 (30 pts)：$m\\bmod 2=0$。\n- Subtask 2 (10 pts)：$n\\bmod 2=0$，且 $m\\bmod 2=1$。\n- Subtask 3 (40 pts)：无特殊限制。\n\n保证 $1 \\leq T \\leq 10^3$，$1 \\leq m \\leq n \\leq 2\\times 10^3$，$1 \\leq \\sum n \\leq 10^4$。\n", "locale": "zh-CN"}}}
{"pid": "P12353", "type": "P", "difficulty": 5, "samples": [["1\n4\n10101\n1111", "2"], ["3\n1\n11\n1\n3\n1010\n010\n7\n10110110\n0001111", "1\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「HCOI-R2」DataErr0r", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/7mafbnqx.png?x-oss-process=image/resize,m_lfit,h_340,w_450)\n\n（图片来自 Arcaea 曲绘，如有侵权请联系出题人删除。）\n\n> How do you know you are not a Program?", "description": "小 N 有两个 $\\tt01$ 串 $S$ 和 $T$，其长度分别为 $N$ 和 $N+1$。你可以对 $T$ 进行一些修改。\n\n- 选定 $1\\leq i \\leq |T|$，删除 $T_i$，其余字符下标左移。\n- 选定 $1\\leq l\\leq r\\leq |T|$，对于所有 $l\\leq i\\leq r$ 且 $(l+i)\\equiv 0\\pmod 2$ 的 $i$ 执行 $T_i\\gets T_i\\oplus 1$。\n\n小 N 想使得 $T = S$，但是她非常懒，所以你需要最小化操作次数。\n\n**注意：你只需要输出这个最小化的操作次数即可，而无需给出构造。**", "inputFormat": "**本题单测试数据内含有多组输入。**\n\n第一行一个正整数 $K$ 表示数据组数。\n\n接下来每组测试数据第一行一个正整数 $N$ 含义如题面所述。\n\n第一行为 $\\tt01$ 串 $T$，由 $N+1$ 个字符（$\\tt0$ 或 $\\tt1$）构成，注意字符之间没有空格。\n\n第二行为 $\\tt01$ 串 $S$，由 $N$ 个字符（$\\tt0$ 或 $\\tt1$）构成，注意字符之间没有空格。", "outputFormat": "共 $K$ 行，对于每组测试数据输出一行一个数表示答案。", "hint": "### 样例解释 1 \n- $1\\textbf 01\\textbf 01\\to 1\\textbf11\\textbf11$\n- $1111\\underline{1}\\to 1111$\n\n使用 $2$ 次步骤。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0 (15pts)：$1\\leq \\sum N\\leq 10$。\n- Subtask 1 (35pts)：$1\\leq \\sum N\\leq 10^3$。\n- Subtask 2 (50pts)：无特殊限制。\n\n对于所有数据，$1\\leq K\\leq 1000$，$1\\leq \\sum N\\leq 10^6$，$1\\leq N\\le 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "DataErr0r", "background": "> How do you know you are not a Program?", "description": "For two binary strings $S$, $T$ (consisting of $0$ and $1$) of length $n$ and length $n+1$. You can perform the following types of operations:\n\n1. Remove any bit from $T$.\n\n2. Choose $1\\le l \\le r \\le T$. For every $i$ satisfying $l\\leq i\\leq r$ and $l\\equiv i \\pmod 2$, let $T_i\\gets 1-T_i$.\n\nYou need to find the minimum number of operations  to make $T=S$.\n", "inputFormat": "Each test consists of multiple test cases. The first line contains a single integer $t(1\\leq t\\leq 10^4)$ --- the number of sets of test cases. The description of test cases follows.\n\nThe first line of each test case contains a single integer $n(1\\leq n \\leq 10^5)$ --- the length of $T$.\n\nThe second line contains a single string $S$ with size $n+1$.\n\nThe third line contains a single string $T$ with size $n$.\n\nIt is guaranteed that the sum of $n$ does not exceed $2\\cdot 10^5$.", "outputFormat": "For each test case, output a single number, containing the answer to how many operations are needed at least to make all digits the same for $S$ and $T$.", "hint": "For the first sample, we can do operations below: \n- $1\\textbf 01\\textbf 01\\to 11111$\n- $111\\underline1\\to 111$\n\nSo we need $2$ operations.\n\n### Constraints\n\n**This problem uses subtasks.**\n\n- Subtask 0 (15 pts): $1\\leq \\sum N\\leq 10$.\n- Subtask 1 (35 pts): $1\\leq \\sum N\\leq 10^3$.\n- Subtask 2 (50 pts): No additional constraints.\n\nIt is guaranteed that $1\\leq K\\leq 1000$, $1\\leq \\sum N\\leq 10^6$, $1\\leq N\\le 10^6$.", "locale": "en"}, "zh-CN": {"title": "「HCOI-R2」DataErr0r", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/7mafbnqx.png?x-oss-process=image/resize,m_lfit,h_340,w_450)\n\n（图片来自 Arcaea 曲绘，如有侵权请联系出题人删除。）\n\n> How do you know you are not a Program?", "description": "小 N 有两个 $\\tt01$ 串 $S$ 和 $T$，其长度分别为 $N$ 和 $N+1$。你可以对 $T$ 进行一些修改。\n\n- 选定 $1\\leq i \\leq |T|$，删除 $T_i$，其余字符下标左移。\n- 选定 $1\\leq l\\leq r\\leq |T|$，对于所有 $l\\leq i\\leq r$ 且 $(l+i)\\equiv 0\\pmod 2$ 的 $i$ 执行 $T_i\\gets T_i\\oplus 1$。\n\n小 N 想使得 $T = S$，但是她非常懒，所以你需要最小化操作次数。\n\n**注意：你只需要输出这个最小化的操作次数即可，而无需给出构造。**", "inputFormat": "**本题单测试数据内含有多组输入。**\n\n第一行一个正整数 $K$ 表示数据组数。\n\n接下来每组测试数据第一行一个正整数 $N$ 含义如题面所述。\n\n第一行为 $\\tt01$ 串 $T$，由 $N+1$ 个字符（$\\tt0$ 或 $\\tt1$）构成，注意字符之间没有空格。\n\n第二行为 $\\tt01$ 串 $S$，由 $N$ 个字符（$\\tt0$ 或 $\\tt1$）构成，注意字符之间没有空格。", "outputFormat": "共 $K$ 行，对于每组测试数据输出一行一个数表示答案。", "hint": "### 样例解释 1 \n- $1\\textbf 01\\textbf 01\\to 1\\textbf11\\textbf11$\n- $1111\\underline{1}\\to 1111$\n\n使用 $2$ 次步骤。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0 (15pts)：$1\\leq \\sum N\\leq 10$。\n- Subtask 1 (35pts)：$1\\leq \\sum N\\leq 10^3$。\n- Subtask 2 (50pts)：无特殊限制。\n\n对于所有数据，$1\\leq K\\leq 1000$，$1\\leq \\sum N\\leq 10^6$，$1\\leq N\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P12354", "type": "P", "difficulty": 6, "samples": [["5 2 2\n1 2 -3 -4 5\n1 1\n2 3", "8"], ["5 2 3\n1 2 -3 -4 5\n1 1\n2 3", "10"], ["10 4 5\n2 2 -3 -4 -5 1 2 -10 -9 -5\n2 3\n2 5\n1 2\n6 7", "38"], ["10 4 6\n2 2 -3 -4 -5 1 2 -10 -9 -5\n2 3\n2 5\n1 2\n6 7", "40"], ["10 4 1000\n2 2 -3 -4 -5 1 2 -10 -9 -5\n2 3\n2 5\n1 2\n6 7", "43"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「HCOI-R2」秋殇别恋", "background": "“你能爱我三天吗？”\n\n“哪三天？”\n\n“今天，明天......”\n\n“和每一天。”", "description": "小 $ \\zeta $ 在给学弟出校内模拟赛的签到题时，因为出不出来一道送分的可爱签到题沉沉睡去，他梦到了这么一道题：\n\n> 有长度为 $ n $ 的序列 $ a,b $，对于 $ 1 \\le i \\le n $，$ a_i $ 的值给定，$ b_i $ 初始时均为 $ 0 $。你需要支持以下操作 $ m $ 次：\n> \n> * `l r v` 表示先算出 $ v'=v(1-\\max_{i=l}^r|b_i|) $，对于 $ l \\le i \\le r $，$ b_i \\leftarrow b_i+v' $。\n> \n> $ m $ 次操作后你需要输出 $ \\sum_{i=1}^na_ib_i $。\n\n他感觉这道题很有意思，于是下载了这道题的数据包并查看，但是，因为早六的起床铃声，他忘记了每次操作分别的 $ v $ 值和操作的相对顺序，但是他知道，且每次操作的 $ v $ 值都满足 $ v\\in\\{-1,1\\} $。\n\n他决定找到一种还原这道题数据并加以适当的修改的方法使得最后输出的答案最大。修改是关于这道题目中操作的区间范围的，他允许自己进行**最多** $ k $ 次如下操作：\n\n* 选定 $ 1 \\le i \\le m $，进行 $ l_i \\leftarrow l_i-1 $、$ l_i \\leftarrow l_i+1 $、$ r_i \\leftarrow r_i-1 $、$ r_i \\leftarrow r_i+1 $ 四种操作中的一种。**且始终保证 $ 1 \\le l_i \\le r_i \\le n $**。\n\n请你求出按照以上要求还原并修改这道题数据的方案中，最大的输出答案。\n\n为了方便你完成这个任务，小 $ \\zeta $ 贴心的告诉你了一个很有用的性质：**所有给出的操作区间在还原前互不严格包含**（即不存在 $ 1 \\le i,j \\le m $ 使得 $ l_i<l_j\\le r_j<r_i $），当然你在修改后**可以**破坏掉它。", "inputFormat": "第一行输入三个空格分隔的整数 $ n,m,k $，分别表示序列长度、操作次数和修改次数。\n\n第二行输入 $ n $ 个空格分隔的整数，第 $ i $ 个是 $ a_i $。\n\n接下来 $ m $ 行，其中的第 $ i $ 行输入两个空格分隔的整数 $ l_i,r_i $，表示第 $ i $ 个操作区间。", "outputFormat": "一行一个整数，为最大的输出答案。", "hint": "### 样例解释 1\n\n* 把区间 $ [2,3] $ 移动到 $ [3,4] $，消耗 $ 2 $ 次修改次数；\n* 按照参数组 $ (3,4,-1),(1,1,1) $ 的顺序操作，答案最大值为 $ 8 $。\n\n### 样例解释 3\n\n* 把区间 $ [2,5] $ 移动到 $ [3,5] $，消耗 $ 1 $ 次修改次数。\n* 把区间 $ [6,7] $ 移动到 $ [7,10] $，消耗 $ 4 $ 次修改次数。\n* 按照参数组 $ (3,5,-1),(2,3,1),(1,2,1),(7,10,-1) $ 的顺序操作，答案最大值为 $ 38 $。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $ n \\le $ | $ m \\le $ | $ k \\le  $ | 分值 |\n|:-:|:-:|:-:|:-:|:-:|\n| $ 0 $ | $ 10 $ | $ 5 $ | $ 5 $ | $ 10 $ |\n| $ 1 $ | $ 10^3 $ | $ 100 $ | $ 1 $ | $ 15 $* |\n| $ 2 $ | $ 20 $ | $ 5 $ | $ 20 $ | $ 15 $ |\n| $ 3 $ | $ 100 $ | $ 10 $ | $ 100 $ | $ 30 $ |\n| $ 4 $ | $ 10^3 $ | $ 100 $ | $ 10^3 $ | $ 30 $ |\n\n\\*：子任务 $ 1 $ 测点等分加和，其中存在 $ 5 $ 分的测试点满足 $ k=0 $。\n\n对于所有数据，$ 1 \\le n \\le 1000 $，$ 1 \\le m \\le 100 $，$ 0 \\le k \\le 1000 $，$ 0 \\le |a_i| \\le 10^6 $，对任意 $ 1 \\le i \\le m $ 有 $ 1 \\le l_i \\le r_i \\le n $，**不存在 $\\boldsymbol{ 1 \\le i,j \\le m }$ 使得 $\\boldsymbol{ l_i<l_j\\le r_j<r_i }$。**", "locale": "zh-CN", "translations": {"en": {"title": "「HCOI-R2」Autumn Sorrow, Farewell Love", "background": "“Can you love me for three days？”\n\n“Which three days？”\n\n“Today, tomorrow...”\n\n“And every day.”", "description": "Little $\\zeta$ fell into a deep sleep when he couldn't come up with a Problem A of the school mock competition. He dreamed of this problem:\n\n>There are two sequences $ a,b $ with lengths of $ n $. For every $ 1 \\le i \\le n $, given the value of $a_i$, The initial value of $ b_i $ is $ 0 $. You need to execute the following commands $ m $ times:\n> \n>* `l r v`: let $ v'=v(1-\\max_{i=l}^r|b_i|) $. Then for every $ l \\le i \\le r $, $ b_i \\leftarrow b_i+v' $.\n>\n>After $ m $ executions, you need to output $ \\sum_{i=1}^na_ib_i $.\n\nHe found this problem very interesting, so he downloaded the data package and viewed it. However, due to the wake-up alarm on 6 o'clock, he forgot the value of $ v $ and the relative order of the commands. But he knew that the $ v $ of each command satisfies $ v\\in\\{-1,1\\} $.\n\nHe decided to find a way to restore the data of this problem and make appropriate modifications to maximize the answer. The modification is about the arguments of the commands in the problem. He allows himself to perform **up to** $ k $ operations as follows:\n\n* Select $ 1 \\le i \\le m $ and apply one of the four operations: $ l_i \\leftarrow l_i-1 $, $ l_i \\leftarrow l_i+1 $, $ r_i \\leftarrow r_i-1 $, $r_i \\leftarrow r_i+1 $, where $l_i$ and $r_i$ denotes the parameters $l$ and $r$ in the $i$-th command. **After that, $ 1 \\le l_i \\le r_i \\le n $ must be satisfied**.\n\nFind the maximum possible output of that problem after all the modifications.\n\nFor your convenience in completing this task, little $ \\zeta $ kindly tells you a very useful property: **All given intervals do not strictly contain each other before restoration** (i.e. there is no $ 1 \\le i,j \\le m $ such that $ l_i<l_j \\le r_j<r_i $). You do not need to keep it during the modification.", "inputFormat": "The first line contains three integers $n,m,k$, which denote the sequence length, the number of commands, and the number of modifications respectively.\n\nThe second line contains $ n $ integers, where the $i$-th integer is $ a_i $.\n\nOn the next $ m $ lines, the $ i $-th line contains two integers $ l_i, r_i $, which denotes the parameters of the $ i $-th command.", "outputFormat": "A single integer which denotes the maximum output of that problem.", "hint": "### Sample Description #1\n\n* Move the interval $ [2,3] $ to $ [3,4] $, which costs $ 2 $ modifications;\n* Execute the commands $(3,4, -1),(1,1,1) $, and the maximum output is $ 8 $.\n\n### Sample Description #3\n\n* Move the interval $[2,5] $ to $ [3,5] $, which costs $ 1 $ modifications.\n* Move the interval $ [6,7] $ to $ [7,10] $, which costs $ 4 $ modifications.\n* Execute the commands $ (3,5, -1),(2,3,1),(1,2,1),(7,10,-1) $, and the maximum output is $ 38 $.\n\n### Constraints\n\n**This problem uses subtasks.**\n\n| Subtask | $ n \\le $ | $ m \\le $ | $ k \\le  $ | Score |\n|:-:|:-:|:-:|:-:|:-:|\n| $ 0 $ | $ 10 $ | $ 5 $ | $ 5 $ | $ 10 $ |\n| $ 1 $ | $ 10^3 $ | $ 100 $ | $ 1 $ | $ 15 $* |\n| $ 2 $ | $ 20 $ | $ 5 $ | $ 20 $ | $ 15 $ |\n| $ 3 $ | $ 100 $ | $ 10 $ | $ 100 $ | $ 30 $ |\n| $ 4 $ | $ 10^3 $ | $ 100 $ | $ 10^3 $ | $ 30 $ |\n\n\\*: Subtask $1$: Uses the sum instead of the minimum score. Each test cases is worth $5$ points. $5$ points for $ k=0 $. $10$ points for $k=1$.\n\nFor all test cases, it is guaranteed that $ 1 \\le n \\le 1000 $, $ 1 \\le m \\le 100 $, $ 0 \\le k \\le 1000 $，$ 0 \\le |a_i| \\le 10^6 $.\n\nFor any $ 1 \\le i \\le m $, it is guaranteed that $ 1 \\le l_i \\le r_i \\le n $. **There is no $ 1 \\le i,j \\le m $ such that $ l_i<l_j\\le r_j<r_i $.**", "locale": "en"}, "zh-CN": {"title": "「HCOI-R2」秋殇别恋", "background": "“你能爱我三天吗？”\n\n“哪三天？”\n\n“今天，明天......”\n\n“和每一天。”", "description": "小 $ \\zeta $ 在给学弟出校内模拟赛的签到题时，因为出不出来一道送分的可爱签到题沉沉睡去，他梦到了这么一道题：\n\n> 有长度为 $ n $ 的序列 $ a,b $，对于 $ 1 \\le i \\le n $，$ a_i $ 的值给定，$ b_i $ 初始时均为 $ 0 $。你需要支持以下操作 $ m $ 次：\n> \n> * `l r v` 表示先算出 $ v'=v(1-\\max_{i=l}^r|b_i|) $，对于 $ l \\le i \\le r $，$ b_i \\leftarrow b_i+v' $。\n> \n> $ m $ 次操作后你需要输出 $ \\sum_{i=1}^na_ib_i $。\n\n他感觉这道题很有意思，于是下载了这道题的数据包并查看，但是，因为早六的起床铃声，他忘记了每次操作分别的 $ v $ 值和操作的相对顺序，但是他知道，且每次操作的 $ v $ 值都满足 $ v\\in\\{-1,1\\} $。\n\n他决定找到一种还原这道题数据并加以适当的修改的方法使得最后输出的答案最大。修改是关于这道题目中操作的区间范围的，他允许自己进行**最多** $ k $ 次如下操作：\n\n* 选定 $ 1 \\le i \\le m $，进行 $ l_i \\leftarrow l_i-1 $、$ l_i \\leftarrow l_i+1 $、$ r_i \\leftarrow r_i-1 $、$ r_i \\leftarrow r_i+1 $ 四种操作中的一种。**且始终保证 $ 1 \\le l_i \\le r_i \\le n $**。\n\n请你求出按照以上要求还原并修改这道题数据的方案中，最大的输出答案。\n\n为了方便你完成这个任务，小 $ \\zeta $ 贴心的告诉你了一个很有用的性质：**所有给出的操作区间在还原前互不严格包含**（即不存在 $ 1 \\le i,j \\le m $ 使得 $ l_i<l_j\\le r_j<r_i $），当然你在修改后**可以**破坏掉它。", "inputFormat": "第一行输入三个空格分隔的整数 $ n,m,k $，分别表示序列长度、操作次数和修改次数。\n\n第二行输入 $ n $ 个空格分隔的整数，第 $ i $ 个是 $ a_i $。\n\n接下来 $ m $ 行，其中的第 $ i $ 行输入两个空格分隔的整数 $ l_i,r_i $，表示第 $ i $ 个操作区间。", "outputFormat": "一行一个整数，为最大的输出答案。", "hint": "### 样例解释 1\n\n* 把区间 $ [2,3] $ 移动到 $ [3,4] $，消耗 $ 2 $ 次修改次数；\n* 按照参数组 $ (3,4,-1),(1,1,1) $ 的顺序操作，答案最大值为 $ 8 $。\n\n### 样例解释 3\n\n* 把区间 $ [2,5] $ 移动到 $ [3,5] $，消耗 $ 1 $ 次修改次数。\n* 把区间 $ [6,7] $ 移动到 $ [7,10] $，消耗 $ 4 $ 次修改次数。\n* 按照参数组 $ (3,5,-1),(2,3,1),(1,2,1),(7,10,-1) $ 的顺序操作，答案最大值为 $ 38 $。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $ n \\le $ | $ m \\le $ | $ k \\le  $ | 分值 |\n|:-:|:-:|:-:|:-:|:-:|\n| $ 0 $ | $ 10 $ | $ 5 $ | $ 5 $ | $ 10 $ |\n| $ 1 $ | $ 10^3 $ | $ 100 $ | $ 1 $ | $ 15 $* |\n| $ 2 $ | $ 20 $ | $ 5 $ | $ 20 $ | $ 15 $ |\n| $ 3 $ | $ 100 $ | $ 10 $ | $ 100 $ | $ 30 $ |\n| $ 4 $ | $ 10^3 $ | $ 100 $ | $ 10^3 $ | $ 30 $ |\n\n\\*：子任务 $ 1 $ 测点等分加和，其中存在 $ 5 $ 分的测试点满足 $ k=0 $。\n\n对于所有数据，$ 1 \\le n \\le 1000 $，$ 1 \\le m \\le 100 $，$ 0 \\le k \\le 1000 $，$ 0 \\le |a_i| \\le 10^6 $，对任意 $ 1 \\le i \\le m $ 有 $ 1 \\le l_i \\le r_i \\le n $，**不存在 $\\boldsymbol{ 1 \\le i,j \\le m }$ 使得 $\\boldsymbol{ l_i<l_j\\le r_j<r_i }$。**", "locale": "zh-CN"}}}
{"pid": "P12355", "type": "P", "difficulty": 6, "samples": [["7\n2\n1 2\n1\n3\n1 2 3\n1 2\n4\n1 2 3 4\n1 2 3\n5\n1 3 5 2 4\n1 3 2 1\n6\n6 2 3 4 1 5\n3 2 4 7 4\n7\n1 3 2 4 5 6 7\n12 32 84 27 83 11\n8\n1 7 3 2 8 4 6 5\n11 45 14 19 19 8 10", "2\n10\n42\n182\n1240\n41336\n124348"], ["2\n9\n1 2 3 4 5 6 7 8 9\n18 48 72 49 83 59 74 80\n12\n1 12 2 4 3 6 5 7 8 9 11 10\n120 938 283 920 462 748 932 784 178 904 442", "787978\n522215784"], ["1\n4\n1 2 3 4\n1 0 0", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "组合数学", "Catalan 数", "生成函数", "洛谷月赛", "Prüfer 序列"], "title": "「HCOI-R2」巡回演出", "background": "小 A 是 HCOI 国著名的演唱家，她打算开展一场巡回演出。", "description": "HCOI 国由 $n$ 个城市构成，可以被抽象为一棵 $n$ 个节点的有根树，首都是树的根 $r$。小 A 打算从 $r$ 开始，遍历全国进行演出。\n\n具体地，设 $x$ 是小 A 当前在的位置，记录一个序列 $s$：\n- 初始时，$x=r$，$s=[r]$。\n- 如果 $x$ 存在没有被访问过的儿子，任意选择一个儿子 $y$，在 $s$ 的最后插入 $y$，并前往 $y$。\n- 如果不存在如上的 $y$：若 $x=r$，演出结束；否则前往 $x$ 的父亲。\n\n我们称最后得到的 $s$ 是 $T$ 的一种**遍历方法**，选择不同的儿子可以得到多种遍历方法。可以发现遍历方法实际上是 $T$ 的 DFS 序。\n\n小 A 的助手给出一张收费表 $\\{w_{n-1}\\}$，可以如下计算这次巡回演出的收入 $w(T,s)$：\n- 对于 $i\\in[1,n]$，小 A 经过 $T$ 上 $s_{i}\\to s_{i\\bmod n+1}$ 的简单路径上的点（**不**包含 $s_{i}$，包含 $s_{i\\bmod n+1}$）。\n- 每次到达一个节点时，若当前是第 $i$ 次到达，小 A 收获  $w_i$ 枚金币作为报酬。\n- $w(T,s)$ 为小 A 收到的金币枚数的总和。\n\n小 A 的助手还给出了本次演出的遍历方法 $\\{s_n\\}$，定义一棵树 $T$ 合法当且仅当 $\\{s_n\\}$ 是它的一种**遍历方法**。你需要求出所有不同的合法 $T$ 的 $w(T,s)$ 之和对 $998244353$ 取模后的结果。\n\n两棵有根树 $T$ 和 $T'$ 不相同当且仅当它们的根节点不同或存在一条在 $T$ 中出现而 $T'$ 中未出现的边。", "inputFormat": "**本题包含多组数据。**\n\n第一行一个正整数 $T$ 代表数据组数。对于每组测试数据：\n\n第一行一个正整数 $n$，表示 HCOI 国的城市数。\n\n第二行 $n$ 个正整数 $s_1,s_2,\\cdots,s_n$，表示小 A 本次演出的遍历方法。\n\n第三行 $n-1$ 个非负整数 $w_1,w_2,\\cdots,w_{n-1}$，表示演出的收费表。", "outputFormat": "对于每组测试数据，输出一行一个整数表示所有合法的 $T$ 的 $w(T,s)$ 之和对 $998244353$ 取模后的结果。", "hint": "#### 【样例解释 #1】\n\n下文用 $(r,E)$ 来表示一棵有根树，其中 $E$ 是树的边集，$r$ 是树的根。\n\n对于第一组数据，唯一一种合法的 $T$ 是 $(1,\\{(1,2)\\})$。小 A 经过两条路径 $1\\to 2$ 和 $2\\to 1$，经过了 $1,2$ 各一遍，故答案为 $1+1=2$。\n\n对于第二组数据，合法的 $T$ 有 $(1,\\{(1,2),(2,3)\\}),(1,\\{(1,2),(2,3)\\})$，$w(T,s)$ 都是 $5$，故答案为 $5+5=10$。\n\n对于第三组数据，合法的 $T$ 有 $(1,\\{(1,2),(1,3),(1,4)\\}),(1,\\{(1,2),(1,3),(3,4)\\}),(1,\\{(1,2),$ $(2,3),(1,4)\\}),(1,\\{(1,2),(2,3),(2,4)\\}),(1,\\{(1,2),(2,3),(3,4)\\})$，$w(T,s)$ 分别为 $9,8,8,$ $9,8$，故答案为 $9+8+8+9+8=42$。\n\n对于第四组数据，一种合法的 $T$ 是 $(1,\\{(1,3),(2,4),(3,2),(3,5)\\})$，它的收入 $w(T,s)=13$。\n\n#### 【数据范围与约定】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $\\boldsymbol{n\\le}$ | $\\boldsymbol{\\sum n\\le}$ | 特殊性质 | 得分 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $4$ | $10^6$ | A | $5$ |\n| $2$ | $8$ | $40$ | A | $15$ |\n| $3$ | $12$ | $60$ | 无 | $10$ |\n| $4$ | $50$ | $200$ | 无 | $10$ |\n| $5$ | $100$ | $500$ | 无 | $10$ |\n| $6$ | $10^3$ | $5\\times 10^3$ | B | $10$ |\n| $7$ | $10^3$ | $5\\times 10^3$ | 无 | $5$ |\n| $8$ | $10^5$ | $2\\times 10^5$ | B | $5$ |\n| $9$ | $10^5$ | $2\\times 10^5$ | 无 | $15$ |\n| $10$ | $5\\times10^5$ | $10^6$ | 无 | $15$ |\n\n- 特殊性质 A：$i\\in[1,n]$，$s_i=i$。\n- 特殊性质 B：$w_1=1$，对于 $i\\in[2,n-1]$，$w_i=0$。\n\n对于所有数据，$1\\le T\\le 10^5$，$2\\le n\\le 5\\times10^5$，$\\sum n\\le 10^6$，$0\\le w_i<998244353$，$\\{s_n\\}$ 是一个 $1\\sim n$ 的排列。", "locale": "zh-CN", "translations": {"en": {"title": "「HCOI-R2」Tour", "background": "Little A is a famous singer from the country of HCOI, and she plans to embark on a tour.", "description": "The country of HCOI consists of $n$ cities, which is abstracted as a rooted tree with $n$ nodes, where the capital is the root $r$. Little A plans to start from $r$ and traverse all cities for a performance.  \n\nSpecifically, let $x$ be Little A’s current position, and define a sequence $s$ as follows:  \n- Initially, $x = r$ and $s = [r]$.  \n- If $x$ has unvisited children, arbitrarily choose one child $y$, append $y$ to the end of $s$, and move to $y$.  \n- If no such $y$ exists: If $x = r$, the performance ends. Otherwise, move to $x$'s parent.  \n\nThe final sequence $s$ is called a traversal method of $T$. Different choices of children yield multiple traversal methods. Note that traversal methods are essentially DFS orders of $T$.  \n\nLittle A's assistant provides a fee table $\\{w_{n-1}\\}$. The revenue $w(T, s)$ of the tour is defined as:  \n- For $i \\in [2, n]$, Little A traverses the simple path $s_{i-1} \\to s_i$ on $T$ (excluding $s_{i-1}$, including $s_i$).  \n- Each time a node is visited, if it is the $i$-th time of arrival, Little A receives $w_i$ gold coins as payment.  \n- $w(T, s)$ is the total number of gold coins Little A collects.  \n\nThe assistant also provides the traversal method $\\{s_n\\}$ for this performance. Little A tree $T$ is defined as valid if and only if $\\{s_n\\}$ is one of its traversal methods. You need to compute the sum of $w(T, s)$ over all distinct valid trees $T$, modulo $998244353$.  \n\nTwo trees $T$ and $T'$ are considered distinct if they have different roots or there exists an edge present in one tree but not the other.  ", "inputFormat": "**Each single test case has multiple sets of test data.**\n\nThe first line contains a positive integer $T$ representing the number of test cases. For each test case:  \n\nThe first line contains a positive integer $n$, indicating the number of cities in HCOI.  \n\nThe second line contains $n$ positive integers $s_1, s_2, \\cdots, s_n$, representing the traversal method of A’s performance.  \n\nThe third line contains $n-1$ non-negative integers $w_1, w_2, \\cdots, w_{n-1}$, representing the fee table for the performance.  ", "outputFormat": "For each test case, output a single line of integer representing the sum of all valid $T$'s $w(T)$ modulo $998244353$.", "hint": "### Constraints\n\n**This problem uses subtasks.**\n\n| Subtask | $\\boldsymbol{n\\le}$ | $\\boldsymbol{\\sum n\\le}$ | Special Property | Score |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $4$ | $10^6$ | A | $5$ |\n| $1$ | $8$ | $40$ | A | $15$ |\n| $2$ | $12$ | $60$ | None | $10$ |\n| $3$ | $50$ | $200$ | None | $10$ |\n| $4$ | $100$ | $500$ | None | $10$ |\n| $5$ | $10^3$ | $5\\times 10^3$ | B | $10$ |\n| $6$ | $10^3$ | $5\\times 10^3$ | None | $5$ |\n| $7$ | $10^5$ | $2\\times 10^5$ | B | $5$ |\n| $8$ | $10^5$ | $2\\times 10^5$ | None | $15$ |\n| $9$ | $5\\times10^5$ | $10^6$ | None | $15$ |\n\n- **Special Property A**: For all $i \\in [1, n]$, $s_i = i$.  \n- **Special Property B**: $w_1 = 1$, and for all $i \\in [2, n-1]$, $w_i = 0$.  \n\nFor all test cases, it is guaranteed that $1 \\le T \\le 10^5$, $2 \\le n \\le 5 \\times 10^5$, $\\sum n \\le 10^6$, $0 \\le w_i < 998244353$, $\\{s_n\\}$ is a permutation of $1,2,\\cdots,n$.  ", "locale": "en"}, "zh-CN": {"title": "「HCOI-R2」巡回演出", "background": "小 A 是 HCOI 国著名的演唱家，她打算开展一场巡回演出。", "description": "HCOI 国由 $n$ 个城市构成，可以被抽象为一棵 $n$ 个节点的有根树，首都是树的根 $r$。小 A 打算从 $r$ 开始，遍历全国进行演出。\n\n具体地，设 $x$ 是小 A 当前在的位置，记录一个序列 $s$：\n- 初始时，$x=r$，$s=[r]$。\n- 如果 $x$ 存在没有被访问过的儿子，任意选择一个儿子 $y$，在 $s$ 的最后插入 $y$，并前往 $y$。\n- 如果不存在如上的 $y$：若 $x=r$，演出结束；否则前往 $x$ 的父亲。\n\n我们称最后得到的 $s$ 是 $T$ 的一种**遍历方法**，选择不同的儿子可以得到多种遍历方法。可以发现遍历方法实际上是 $T$ 的 DFS 序。\n\n小 A 的助手给出一张收费表 $\\{w_{n-1}\\}$，可以如下计算这次巡回演出的收入 $w(T,s)$：\n- 对于 $i\\in[1,n]$，小 A 经过 $T$ 上 $s_{i}\\to s_{i\\bmod n+1}$ 的简单路径上的点（**不**包含 $s_{i}$，包含 $s_{i\\bmod n+1}$）。\n- 每次到达一个节点时，若当前是第 $i$ 次到达，小 A 收获  $w_i$ 枚金币作为报酬。\n- $w(T,s)$ 为小 A 收到的金币枚数的总和。\n\n小 A 的助手还给出了本次演出的遍历方法 $\\{s_n\\}$，定义一棵树 $T$ 合法当且仅当 $\\{s_n\\}$ 是它的一种**遍历方法**。你需要求出所有不同的合法 $T$ 的 $w(T,s)$ 之和对 $998244353$ 取模后的结果。\n\n两棵有根树 $T$ 和 $T'$ 不相同当且仅当它们的根节点不同或存在一条在 $T$ 中出现而 $T'$ 中未出现的边。", "inputFormat": "**本题包含多组数据。**\n\n第一行一个正整数 $T$ 代表数据组数。对于每组测试数据：\n\n第一行一个正整数 $n$，表示 HCOI 国的城市数。\n\n第二行 $n$ 个正整数 $s_1,s_2,\\cdots,s_n$，表示小 A 本次演出的遍历方法。\n\n第三行 $n-1$ 个非负整数 $w_1,w_2,\\cdots,w_{n-1}$，表示演出的收费表。", "outputFormat": "对于每组测试数据，输出一行一个整数表示所有合法的 $T$ 的 $w(T,s)$ 之和对 $998244353$ 取模后的结果。", "hint": "#### 【样例解释 #1】\n\n下文用 $(r,E)$ 来表示一棵有根树，其中 $E$ 是树的边集，$r$ 是树的根。\n\n对于第一组数据，唯一一种合法的 $T$ 是 $(1,\\{(1,2)\\})$。小 A 经过两条路径 $1\\to 2$ 和 $2\\to 1$，经过了 $1,2$ 各一遍，故答案为 $1+1=2$。\n\n对于第二组数据，合法的 $T$ 有 $(1,\\{(1,2),(2,3)\\}),(1,\\{(1,2),(2,3)\\})$，$w(T,s)$ 都是 $5$，故答案为 $5+5=10$。\n\n对于第三组数据，合法的 $T$ 有 $(1,\\{(1,2),(1,3),(1,4)\\}),(1,\\{(1,2),(1,3),(3,4)\\}),(1,\\{(1,2),$ $(2,3),(1,4)\\}),(1,\\{(1,2),(2,3),(2,4)\\}),(1,\\{(1,2),(2,3),(3,4)\\})$，$w(T,s)$ 分别为 $9,8,8,$ $9,8$，故答案为 $9+8+8+9+8=42$。\n\n对于第四组数据，一种合法的 $T$ 是 $(1,\\{(1,3),(2,4),(3,2),(3,5)\\})$，它的收入 $w(T,s)=13$。\n\n#### 【数据范围与约定】\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $\\boldsymbol{n\\le}$ | $\\boldsymbol{\\sum n\\le}$ | 特殊性质 | 得分 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $4$ | $10^6$ | A | $5$ |\n| $2$ | $8$ | $40$ | A | $15$ |\n| $3$ | $12$ | $60$ | 无 | $10$ |\n| $4$ | $50$ | $200$ | 无 | $10$ |\n| $5$ | $100$ | $500$ | 无 | $10$ |\n| $6$ | $10^3$ | $5\\times 10^3$ | B | $10$ |\n| $7$ | $10^3$ | $5\\times 10^3$ | 无 | $5$ |\n| $8$ | $10^5$ | $2\\times 10^5$ | B | $5$ |\n| $9$ | $10^5$ | $2\\times 10^5$ | 无 | $15$ |\n| $10$ | $5\\times10^5$ | $10^6$ | 无 | $15$ |\n\n- 特殊性质 A：$i\\in[1,n]$，$s_i=i$。\n- 特殊性质 B：$w_1=1$，对于 $i\\in[2,n-1]$，$w_i=0$。\n\n对于所有数据，$1\\le T\\le 10^5$，$2\\le n\\le 5\\times10^5$，$\\sum n\\le 10^6$，$0\\le w_i<998244353$，$\\{s_n\\}$ 是一个 $1\\sim n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P12356", "type": "P", "difficulty": 7, "samples": [["1\n6 4", "2\n1 2 5 6\n2 3 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "其它技巧", "构造", "洛谷月赛", "Ad-hoc"], "title": "「HCOI-R2」Rabbit Panic (Hard Ver.)", "background": "**注意在问题的这个版本中，你需要解决和 Easy Ver. 一样的问题，但是需要最小化步数。**", "description": "你有一个长度为 $n$ 的排列 $\\{p_n\\}$，初始 $p_i = i$。每次你可以选择 $m$ 个**不同**位置的元素，并**同时**将它们改成它们的平均值（不取整）。\n\n最后你需要使所有元素都相等。\n\n请你构造一组操作方案，并最小化你的操作数量。无解输出 $-1$。", "inputFormat": "**本题单测试数据内含有多组输入。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n接下来每组测试数据包含两个正整数 $n$，$m$，含义如题面所述。", "outputFormat": "对于每组测试数据，你可以：\n\n- 输出一行 $-1$ 报告无解。\n- 输出一行 $P$ 表示你的操作次数，注意这个次数必须最小化。接下来的 $P$ 行，每行 $m$ 个数，表示你的操作，用空格分开。", "hint": "### 样例解释 1\n\n- $[1,2,3,4,5,6]\\to [3.5,3.5,3,4,3.5,3.5]\\to [3.5,3.5,3.5,3.5,3.5,3.5]$。\n- 可以证明不存在更优的方案。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n注意月赛中本题满分为 $50$ 分。你实际获得的分数为显示的子任务分数的一半。\n\n- Subtask 0 (20 pts)：$1\\leq \\sum n\\leq 10$。\n- Subtask 1 (40 pts)：$1\\leq \\sum n\\leq 10^3$。\n- Subtask 2 (40 pts)：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 1.2\\times 10^4$，$1 \\leq m \\leq n \\leq 2\\times 10^5$，$1 \\leq \\sum n \\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "「HCOI-R2」Rabbit Panic (Hard Version)", "background": "**Note that in this version of the problem, you need to minimize the number of operations.**", "description": "You have a sequence $\\{p_n\\}$ where initially $p_i = i(1 \\leq i \\leq n)$.\n\nEach time you can choose $m$ **distinct** numbers $i_1, i_2\\dots i_m$, and **simultaneously** set all of $p_{i_1}, p_{i_2}\\dots p_{i_m}$ into their mean. **Note that the mean may not be an integer.** In this case, it will never be rounded.\n\nYou need to minimize the number of operations to make $p_1 = p_2 = \\dots = p_n$. ", "inputFormat": "Each test consists of multiple test cases. The first line contains a single integer $T(1\\leq T\\leq 1.2\\times 10^4)$ --- the number of sets of test cases. The description of each test case follows.\n\nIn each test case, the only line contains two integers --- $n$($1 \\leq n \\leq 2\\times 10^5$) and $m$($1\\le m\\le n$), representing the length of the sequence and the number $m$.\n\nIt's guaranteed that the sum of $n$ over all testcases does not exceed $10^6$.", "outputFormat": "For each test case, on the first line, output the minimum number of operations, $s$.\n\nOn the next $s$ lines, each line contains $m$ distinct integers in the range $[1, n]$ representing an operation.\n\nIf there's no solution, just print $s = -1$.\n\nIf there are multiple solutions, print any.", "hint": "### Sample #1\n\n- $[1,2,3,4,5,6]\\to [3.5,3.5,3,4,3.5,3.5]\\to [3.5,3.5,3.5,3.5,3.5,3.5]$。\n- There may be different but valid solutions.\n\n### Constraints\n\n**This problem uses subtasks.**\n\nNote that the full score of this problem in this contest is $50$. Your actually score is half of the subtask scores displayed below.\n\n- Subtask 0 (20 pts): $1\\leq \\sum n\\leq 10$.\n- Subtask 1 (40 pts): $1\\leq \\sum n\\leq 10^3$.\n- Subtask 2 (40 pts): No Special Constraints.\n\nIt is guaranteed that $1 \\leq T \\leq 1.2\\times 10^4$, $1 \\leq m \\leq n \\leq 2\\times 10^5$, $1 \\leq \\sum n \\leq 10^6$.", "locale": "en"}, "zh-CN": {"title": "「HCOI-R2」Rabbit Panic (Hard Ver.)", "background": "**注意在问题的这个版本中，你需要解决和 Easy Ver. 一样的问题，但是需要最小化步数。**", "description": "你有一个长度为 $n$ 的排列 $\\{p_n\\}$，初始 $p_i = i$。每次你可以选择 $m$ 个**不同**位置的元素，并**同时**将它们改成它们的平均值（不取整）。\n\n最后你需要使所有元素都相等。\n\n请你构造一组操作方案，并最小化你的操作数量。无解输出 $-1$。", "inputFormat": "**本题单测试数据内含有多组输入。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n接下来每组测试数据包含两个正整数 $n$，$m$，含义如题面所述。", "outputFormat": "对于每组测试数据，你可以：\n\n- 输出一行 $-1$ 报告无解。\n- 输出一行 $P$ 表示你的操作次数，注意这个次数必须最小化。接下来的 $P$ 行，每行 $m$ 个数，表示你的操作，用空格分开。", "hint": "### 样例解释 1\n\n- $[1,2,3,4,5,6]\\to [3.5,3.5,3,4,3.5,3.5]\\to [3.5,3.5,3.5,3.5,3.5,3.5]$。\n- 可以证明不存在更优的方案。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n注意月赛中本题满分为 $50$ 分。你实际获得的分数为显示的子任务分数的一半。\n\n- Subtask 0 (20 pts)：$1\\leq \\sum n\\leq 10$。\n- Subtask 1 (40 pts)：$1\\leq \\sum n\\leq 10^3$。\n- Subtask 2 (40 pts)：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 1.2\\times 10^4$，$1 \\leq m \\leq n \\leq 2\\times 10^5$，$1 \\leq \\sum n \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P12357", "type": "P", "difficulty": 6, "samples": [["6 4\n6 2\n2 5\n3 6\n1 2\n4 6\n2 5 11\n5 6 16\n4 3 18\n2 3 6", "51 51 51 51 51 33\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "eJOI（欧洲）"], "title": "[eJOI 2024] 贸易搭配 / Many Pairs", "background": "", "description": "EJOI 大陆由 $N$ 个城市组成，这些城市用 $1 \\sim N$ 来编号。城市之间有 $N-1$ 条双向道路连接，且保证你可以从任意一个城市到达另外一个城市。换句话说，EJOI 大陆是一个树形结构。\n\n在这个大路上还有 $K$ 个贸易关系，用城市对 $(A,B)$ 和利润 $C$ 来表示。\n\n现在，EJOI 大陆的国王想通过以下方式测试王子的执政能力：\n\n- 首先，国王会选择一个城市 $H$ 作为首都。现在，这棵树以 $H$ 为根。\n\n- 接下来，王子可以选择**至多两个**和 $H$ 相邻的城市。现在，$H$ 城以及以被选中城市为根的子树中的所有城市都在王子的管辖下。\n\n选择完毕后，他的利润就等于他管辖的这些城市中的贸易关系的利润之和。**注意：当且仅当贸易关系双方都在王子管辖下，这个贸易关系的利润才可以归王子。**\n\n现在国王还没有选好令哪个城市作为首都。但是王子很好奇，他想知道，对于每个城市，如果其作为首都，那么他可以获得的最大利润是多少。", "inputFormat": "第一行，两个正整数 $N,K$。\n\n接下来 $N-1$ 行，每行两个整数 $U$ 和 $V$，表示大陆上的双向道路。\n\n接下来 $K$ 行，每行三个整数 $A,B,C$，表示贸易关系。", "outputFormat": "输出一行 $N$ 个整数，第 $i$ 个表示如果让第 $i$ 个城市作为首都，那么王子可以获得的最大利润。", "hint": "**【样例解释】**\n\n以 $6$ 号城市作为首都为例，他可以选择以下城市：\n\n- $2$ 和 $3$\n\n- $2$ 和 $4$\n\n- $3$ 和 $4$\n\n其中，选择 $2$ 和 $3$ 号城市可以得到最大利润 $11+16+6=33$。\n\n**【数据范围】**\n\n**本题采用 $\\text{Subtask}$ 捆绑测试。**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$12$|$N,K\\le50$|\n|$2$|$13$|$N\\le5000,K\\le500$|\n|$3$|$17$|$N\\le5000,K\\le2000$|\n|$4$|$21$|$N,K\\le5000$|\n|$5$|$37$|无|\n\n对于 $100\\%$ 的数据：\n\n- $2 \\le N,K \\le 2 \\times 10^5$\n\n- $1 \\le U,V,A,B \\le N$\n\n- $1 \\le C \\le 10^6$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2024] 贸易搭配 / Many Pairs", "background": "", "description": "EJOI 大陆由 $N$ 个城市组成，这些城市用 $1 \\sim N$ 来编号。城市之间有 $N-1$ 条双向道路连接，且保证你可以从任意一个城市到达另外一个城市。换句话说，EJOI 大陆是一个树形结构。\n\n在这个大路上还有 $K$ 个贸易关系，用城市对 $(A,B)$ 和利润 $C$ 来表示。\n\n现在，EJOI 大陆的国王想通过以下方式测试王子的执政能力：\n\n- 首先，国王会选择一个城市 $H$ 作为首都。现在，这棵树以 $H$ 为根。\n\n- 接下来，王子可以选择**至多两个**和 $H$ 相邻的城市。现在，$H$ 城以及以被选中城市为根的子树中的所有城市都在王子的管辖下。\n\n选择完毕后，他的利润就等于他管辖的这些城市中的贸易关系的利润之和。**注意：当且仅当贸易关系双方都在王子管辖下，这个贸易关系的利润才可以归王子。**\n\n现在国王还没有选好令哪个城市作为首都。但是王子很好奇，他想知道，对于每个城市，如果其作为首都，那么他可以获得的最大利润是多少。", "inputFormat": "第一行，两个正整数 $N,K$。\n\n接下来 $N-1$ 行，每行两个整数 $U$ 和 $V$，表示大陆上的双向道路。\n\n接下来 $K$ 行，每行三个整数 $A,B,C$，表示贸易关系。", "outputFormat": "输出一行 $N$ 个整数，第 $i$ 个表示如果让第 $i$ 个城市作为首都，那么王子可以获得的最大利润。", "hint": "**【样例解释】**\n\n以 $6$ 号城市作为首都为例，他可以选择以下城市：\n\n- $2$ 和 $3$\n\n- $2$ 和 $4$\n\n- $3$ 和 $4$\n\n其中，选择 $2$ 和 $3$ 号城市可以得到最大利润 $11+16+6=33$。\n\n**【数据范围】**\n\n**本题采用 $\\text{Subtask}$ 捆绑测试。**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$12$|$N,K\\le50$|\n|$2$|$13$|$N\\le5000,K\\le500$|\n|$3$|$17$|$N\\le5000,K\\le2000$|\n|$4$|$21$|$N,K\\le5000$|\n|$5$|$37$|无|\n\n对于 $100\\%$ 的数据：\n\n- $2 \\le N,K \\le 2 \\times 10^5$\n\n- $1 \\le U,V,A,B \\le N$\n\n- $1 \\le C \\le 10^6$", "locale": "zh-CN"}}}
{"pid": "P12358", "type": "P", "difficulty": 5, "samples": [["4 10\n1 2 5 -1\n1 2 5 16\n2 3 0 4\n2 1 1 2\n1 3 0 8\n1 3 1 8\n2 3 16 8\n3 2 12 -1\n1 4 2 8\n4 3 1 4", "1\n1\n1\n1\n0\n1\n0\n1\n1\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "eJOI（欧洲）"], "title": "[eJOI 2024] 奶酪交易 / Cheese", "background": "", "description": "最近，一群农夫开始在 EJOI 大陆上售卖他们的奶酪。**每个农夫的奶酪都有固定的价格。**\n\nEJOI 大陆的零钱面额均为 $2$ 的幂，即 $1,2,4,8,\\dots$ 等等。\n\n一天，农夫们将自己的奶酪带到一个集市上售卖。在一次交易中，农夫们需要给出自己的零钱来购买对方的奶酪。例如 Sanda 的奶酪比 Victor 的便宜 $2$ 块钱，则一种可能的交易方式是二人交换奶酪，Sanda 给 Victor 一张 $8$ 块钱，Victor 给 Sanda 一张 $2$ 块和一张 $4$ 块。这样双方得到的就平衡了。\n\n市场的负责人注意到了这些有趣的交易，于是他将其全部记录在本子上，具体而言，他是这么记录的：\n\n对于每次交易，首先记录两位农民，分别是 $i$ 和 $j$，接下来两个数 $A$ 和 $B$，$A$ 表示 $i$ 最开始付的零钱数，而 $B$ 则表示：\n\n- 若 $B=-1$，那么没有找零，即 $j$ 不用给 $i$ 任何钱。\n\n- 否则，$B$ 表示 $j$ 给 $i$ 找零的钱中，面值最小的一张的面值。\n\n由于负责人有些粗心，有些可能记录错了。作为负责人的朋友，你需要帮助他找到哪些记录是与前面记录矛盾的。\n\n**译者注：若你无法理解题面，请参考样例解释。**", "inputFormat": "第一行，两个正整数 $N$ 和 $M$，分别表示农夫数量和交易数量。\n\n接下来 $M$ 行，每行四个整数 $i,j,A,B$，表示记录一次交易。", "outputFormat": "对于每次交易，如果这次交易记录与前面不矛盾，输出 `1`；否则输出 `0`。", "hint": "**【样例解释】**\n\n共有 $10$ 次交易：\n\n- 第一次：`1 2 5 -1`，$1$ 号农夫给了 $2$ 号农夫 $5$ 块，由于 $B=-1$，所以我们可以知道 $1$ 号奶酪比 $2$ 号奶酪便宜 $5$ 块，这显然没有矛盾。\n\n- 第二次：`1 2 5 16`，$1$ 号农夫给了 $2$ 号农夫 $5$ 块，两人在找零过程中使用的最小面值是 $16$。有一种可能的情况是，找零时，$1$ 号给 $2$ 号了 $16$ 块，$2$ 号给 $1$ 号了 $16$ 块（是的，这是可能的！），这样就不与第一条记录矛盾。\n\n- 第三次：`2 3 0 4`，$2$ 号农夫给了 $3$ 号 $0$ 块，他们在找零时使用最小面值是 $4$。因为目前还没有关于 $2$ 和 $3$ 的交易，所以这次显然不矛盾。\n\n- 第四次：`2 1 1 2`，$2$ 号农夫给了 $1$ 号农夫 $1$ 块，他们找零最小面值为 $2$ 块。此时，可能是 $1$ 号给了 $2$ 号三张 $2$ 块，这样他们两个奶酪价格差仍然是 $5$ 块，也不矛盾。\n\n- 第五次：`1 3 0 8`，这次不管如何都不能满足条件，因此矛盾。\n\n剩下 $5$ 次交易，请选手自行模拟。\n\n----\n\n**【数据范围】**\n\n**本题采用 $\\text{Subtask}$ 捆绑测试。**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$7$|$2\\le N,M\\le10$|\n|$2$|$8$|$B=2$|\n|$3$|$11$|$B=-1$|\n|$4$|$19$|$3\\le N\\le10$|\n|$5$|$38$|$B=1,2,4,8,16,32$|\n|$6$|$17$|无|\n\n对于 $100\\%$ 的数据，$2\\le N,M\\le5\\times10^5,1\\le i,j \\le N,i\\not =j,0\\le A\\le2^{15},B=-1$ 或 $B=1,2,4,8,\\dots,2^{14},2^{15}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2024] 奶酪交易 / Cheese", "background": "", "description": "最近，一群农夫开始在 EJOI 大陆上售卖他们的奶酪。**每个农夫的奶酪都有固定的价格。**\n\nEJOI 大陆的零钱面额均为 $2$ 的幂，即 $1,2,4,8,\\dots$ 等等。\n\n一天，农夫们将自己的奶酪带到一个集市上售卖。在一次交易中，农夫们需要给出自己的零钱来购买对方的奶酪。例如 Sanda 的奶酪比 Victor 的便宜 $2$ 块钱，则一种可能的交易方式是二人交换奶酪，Sanda 给 Victor 一张 $8$ 块钱，Victor 给 Sanda 一张 $2$ 块和一张 $4$ 块。这样双方得到的就平衡了。\n\n市场的负责人注意到了这些有趣的交易，于是他将其全部记录在本子上，具体而言，他是这么记录的：\n\n对于每次交易，首先记录两位农民，分别是 $i$ 和 $j$，接下来两个数 $A$ 和 $B$，$A$ 表示 $i$ 最开始付的零钱数，而 $B$ 则表示：\n\n- 若 $B=-1$，那么没有找零，即 $j$ 不用给 $i$ 任何钱。\n\n- 否则，$B$ 表示 $j$ 给 $i$ 找零的钱中，面值最小的一张的面值。\n\n由于负责人有些粗心，有些可能记录错了。作为负责人的朋友，你需要帮助他找到哪些记录是与前面记录矛盾的。\n\n**译者注：若你无法理解题面，请参考样例解释。**", "inputFormat": "第一行，两个正整数 $N$ 和 $M$，分别表示农夫数量和交易数量。\n\n接下来 $M$ 行，每行四个整数 $i,j,A,B$，表示记录一次交易。", "outputFormat": "对于每次交易，如果这次交易记录与前面不矛盾，输出 `1`；否则输出 `0`。", "hint": "**【样例解释】**\n\n共有 $10$ 次交易：\n\n- 第一次：`1 2 5 -1`，$1$ 号农夫给了 $2$ 号农夫 $5$ 块，由于 $B=-1$，所以我们可以知道 $1$ 号奶酪比 $2$ 号奶酪便宜 $5$ 块，这显然没有矛盾。\n\n- 第二次：`1 2 5 16`，$1$ 号农夫给了 $2$ 号农夫 $5$ 块，两人在找零过程中使用的最小面值是 $16$。有一种可能的情况是，找零时，$1$ 号给 $2$ 号了 $16$ 块，$2$ 号给 $1$ 号了 $16$ 块（是的，这是可能的！），这样就不与第一条记录矛盾。\n\n- 第三次：`2 3 0 4`，$2$ 号农夫给了 $3$ 号 $0$ 块，他们在找零时使用最小面值是 $4$。因为目前还没有关于 $2$ 和 $3$ 的交易，所以这次显然不矛盾。\n\n- 第四次：`2 1 1 2`，$2$ 号农夫给了 $1$ 号农夫 $1$ 块，他们找零最小面值为 $2$ 块。此时，可能是 $1$ 号给了 $2$ 号三张 $2$ 块，这样他们两个奶酪价格差仍然是 $5$ 块，也不矛盾。\n\n- 第五次：`1 3 0 8`，这次不管如何都不能满足条件，因此矛盾。\n\n剩下 $5$ 次交易，请选手自行模拟。\n\n----\n\n**【数据范围】**\n\n**本题采用 $\\text{Subtask}$ 捆绑测试。**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$7$|$2\\le N,M\\le10$|\n|$2$|$8$|$B=2$|\n|$3$|$11$|$B=-1$|\n|$4$|$19$|$3\\le N\\le10$|\n|$5$|$38$|$B=1,2,4,8,16,32$|\n|$6$|$17$|无|\n\n对于 $100\\%$ 的数据，$2\\le N,M\\le5\\times10^5,1\\le i,j \\le N,i\\not =j,0\\le A\\le2^{15},B=-1$ 或 $B=1,2,4,8,\\dots,2^{14},2^{15}$。", "locale": "zh-CN"}}}
{"pid": "P12359", "type": "P", "difficulty": 4, "samples": [["5 6\n1 2\n3 2\n4 2\n2 5\n5 1\n4 5\n6\n2 1 4 2 5 3\n3\n1 3 5 2\n1 3 5 2\n1 1 2 3", "1\n1\n2"], ["3 3\n1 2\n2 3\n3 1\n4\n3 1 1 2\n4\n1 1 2 3\n2 2 2\n1 1 2 3\n1 1 4 2", "2\n1\n3"], ["2 3\n1 1\n1 2\n1 2\n4\n1 1 2 3\n3\n1 1 2 1\n2 1 2\n1 1 2 1", "1\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "2024", "eJOI（欧洲）"], "title": "[eJOI 2024] 古迹漫步 / Old Orhei", "background": "", "description": "在摩尔多瓦的鲁特河旁有一个著名古建筑群。这个古建筑群由 $N$ 个古建筑和 $M$ 条**单向**道路组成。每条道路根据输入顺序都有一个编号，从前到后分别编号为 $1 \\sim M$。\n\n最近，科学家发现了一个由 Cucuteni 文化留下的数列！这个数列由 $T$ 个 $1 \\sim M$ 的数组成。为了寻找这个数列的神秘意义，新来的实习生被要求执行以下操作：\n\n最开始，实习生在某个古建筑处。其他科学家则开始将神秘数列的子序列一一念给他。假设当前实习生在第 $X$ 个古建筑，科学家念出的数为 $Z$，那么：\n\n- 如果第 $Z$ 条道路的起点恰好是 $X$，那么实习生沿着这条道路走到相连的古建筑。\n\n- 否则，实习生站在原地不动。\n\n正值第 $8$ 界 EJOI 的举行，当地的科学家希望你能帮助他们解决如下 $Q$ 个问题：\n\n- `1 L R S`：科学家想知道，如果最开始实习生站在第 $S$ 个古建筑处，然后他们将神秘数列中第 $L \\sim R$ 项念给他，那么实习生最终在哪个古建筑停下。\n\n- `2 i K`：科学家们将神秘数列的第 $i$ 项的值修改为 $K$。\n\n你需要对于所有问题 `1`，给出正确的回答！", "inputFormat": "第一行，两个正整数 $N,M$；\n\n接下来 $M$ 行，第 $i$ 行两个整数 $X_i,Y_i$，表示第 $i$ 条道路的起点和终点；\n\n接下来一行一个正整数 $T$；\n\n接下来一行 $T$ 个整数 $A_1,A_2,\\dots,A_T$，表示神秘序列。\n\n接下来一行一个正整数 $Q$；\n\n接下来 $Q$ 行，每行一个问题。格式见题目描述。", "outputFormat": "对于所有问题 `1` 输出答案，每行一个。", "hint": "**【数据范围】**\n\n**本题采用 $\\text{Subtask}$ 捆绑测试。**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$7$|$Q=1$，且唯一一个问题是问题 `1`|\n|$2$|$16$|$N=2$|\n|$3$|$17$|$M=N-1,X_i=i,Y_i=i+1$|\n|$4$|$31$|保证没有问题 `2`，且 $T \\le 3 \\times 10^4$|\n|$5$|$29$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 50,1 \\le M,T,Q\\le 10^5,1\\le X_i,Y_i\\le N,1 \\le A_i \\le M,1 \\le L \\le R \\le T,1 \\le S \\le N,1 \\le i \\le T,1\\le K\\le M$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2024] 古迹漫步 / Old Orhei", "background": "", "description": "在摩尔多瓦的鲁特河旁有一个著名古建筑群。这个古建筑群由 $N$ 个古建筑和 $M$ 条**单向**道路组成。每条道路根据输入顺序都有一个编号，从前到后分别编号为 $1 \\sim M$。\n\n最近，科学家发现了一个由 Cucuteni 文化留下的数列！这个数列由 $T$ 个 $1 \\sim M$ 的数组成。为了寻找这个数列的神秘意义，新来的实习生被要求执行以下操作：\n\n最开始，实习生在某个古建筑处。其他科学家则开始将神秘数列的子序列一一念给他。假设当前实习生在第 $X$ 个古建筑，科学家念出的数为 $Z$，那么：\n\n- 如果第 $Z$ 条道路的起点恰好是 $X$，那么实习生沿着这条道路走到相连的古建筑。\n\n- 否则，实习生站在原地不动。\n\n正值第 $8$ 界 EJOI 的举行，当地的科学家希望你能帮助他们解决如下 $Q$ 个问题：\n\n- `1 L R S`：科学家想知道，如果最开始实习生站在第 $S$ 个古建筑处，然后他们将神秘数列中第 $L \\sim R$ 项念给他，那么实习生最终在哪个古建筑停下。\n\n- `2 i K`：科学家们将神秘数列的第 $i$ 项的值修改为 $K$。\n\n你需要对于所有问题 `1`，给出正确的回答！", "inputFormat": "第一行，两个正整数 $N,M$；\n\n接下来 $M$ 行，第 $i$ 行两个整数 $X_i,Y_i$，表示第 $i$ 条道路的起点和终点；\n\n接下来一行一个正整数 $T$；\n\n接下来一行 $T$ 个整数 $A_1,A_2,\\dots,A_T$，表示神秘序列。\n\n接下来一行一个正整数 $Q$；\n\n接下来 $Q$ 行，每行一个问题。格式见题目描述。", "outputFormat": "对于所有问题 `1` 输出答案，每行一个。", "hint": "**【数据范围】**\n\n**本题采用 $\\text{Subtask}$ 捆绑测试。**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$7$|$Q=1$，且唯一一个问题是问题 `1`|\n|$2$|$16$|$N=2$|\n|$3$|$17$|$M=N-1,X_i=i,Y_i=i+1$|\n|$4$|$31$|保证没有问题 `2`，且 $T \\le 3 \\times 10^4$|\n|$5$|$29$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 50,1 \\le M,T,Q\\le 10^5,1\\le X_i,Y_i\\le N,1 \\le A_i \\le M,1 \\le L \\le R \\le T,1 \\le S \\le N,1 \\le i \\le T,1\\le K\\le M$。", "locale": "zh-CN"}}}
{"pid": "P12360", "type": "P", "difficulty": 5, "samples": [["5\n1 5 4 3 1\n5 9 3 12 8\n1 10 4 2 6", "3"], ["6\n6 1 21 22 23 24\n1 12 6 8 10 11\n2 3 4 5 7 9", "2"], ["3\n1 1 3\n3 4 6\n2 1 7", "0"], ["3\n1 1 3\n3 4 6\n2 1 5", "-1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "贪心", "二分", "2024", "eJOI（欧洲）"], "title": "[eJOI 2024] 足球决斗 / CF Duels", "background": "", "description": "基希讷乌，摩尔多瓦的首都，有两支各由 $N$ 名球员组成的足球队，进行一系列的对决。为了增加趣味，他们按照以下一对一的方式安排比赛：\n\n- 总共有 $N$ 场对决，每场在不同的体育场进行。\n- 每场对决将有两队中的一名球员对决。\n- 每个球员将只参加一场对决。\n- 每个体育场将为各自的对决胜利者提供一定金额的奖金。\n- 技能等级更高的球员赢得对决。保证总有技能等级更高的球员。\n\n在所有比赛结束后，冠军队是获得奖金总额超过对方球队的队伍。如果获得的奖金相同，则没有冠军。\n\n你是第一支球队的经理，你的任务是安排你的 $N$ 名球员参加 $N$ 场对决获得冠军。\n\n作为第一支足球队的经理，你拥有以下信息：\n\n- $N$ 个整数，表示你队伍中球员的技能等级\n- $N$ 个整数，表示对方队伍中球员的技能等级\n\n作为经理，你还派了一名侦查员访问每个体育场。侦查员按从 $1$ 到 $N$ 的顺序访问体育场，首先访问体育场 $1$，然后是体育场 $2$，最后访问体育场 $N$。侦查员访问完体育场 $i$ 后，他会向你报告对方球队在体育场 $i$ 的对决球员的技能等级。\n\n可能在侦查员访问了一些体育场之后，你已经可以预见你的球队将成为冠军。换句话说，有可能在侦查员访问了一些体育场后，你可以确定你能成为冠军。**你可能仍然需要等待侦查员访问剩余的体育场，以便为你的球队建立分配方案。**\n\n你的任务是找出侦查员需要访问的最少体育场数量，以确保你的球队能够夺冠，或者确定不可能成为冠军。", "inputFormat": "第一行，一个正整数 $N$；\n\n第二行 $N$ 个整数 $p_1,p_2,\\dots,p_N$，表示体育馆的奖金数。\n\n第三行 $N$ 个整数 $b_1,b_2,\\dots,b_N$，其中 $b_i$ 表示对方球队在第 $i$ 个体育馆派出球员的足球水平。\n\n第四行 $N$ 个整数 $a_1,a_2,\\dots,a_N$，表示你的队员的足球水平。", "outputFormat": "输出一个整数，表示你需要了解的体育场的最少数量，以确保你的球队能够成为冠军。\n\n此外，如果你立即知道你的球队在任何情况下都会成为冠军，应该输出 $0$；即使在你了解所有 $N$ 个体育场的信息后，仍然无法找到获胜策略，那么输出 $-1$。", "hint": "**【样例 #1 解释】**\n对于第一个样例，在侦查员分享体育场 $1$ 和 $2$ 的信息后，你仍不能保证成为冠军。原因是，如果对手按以下方式安排球员：\n\n| 体育场 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 奖金 | $1$ | $5$ | $4$ | $3$ | $1$ |\n| 对手球员技能等级 | $5$ | $9$ | $8$ | $12$ | $3$ |\n\n你最好的选择是打成平局：\n\n| 体育场 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 你的球员技能等级 | $6$ | $10$ | $1$ | $2$ | $4$ |\n\n你将赢得体育场 $1,2,5$ 的比赛，获得奖金总额 $1+5+1=7$，而对手将赢得体育场 $3,4$ 的比赛，获得奖金总额 $4+3=7$。\n\n在侦查员分享体育场 $1,2,3$ 的信息后，你可以确定你将成为冠军。原因是，如果对手按以下方式安排球员：\n\n| 体育场 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 奖金 | $1$ | $5$ | $4$ | $3$ | $1$ |\n| 对手球员技能等级 | $5$ | $9$ | $3$ | 未知 | 未知 |\n\n对手的两种选择是：\n\n| 体育场 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 奖金 | $1$ | $5$ | $4$ | $3$ | $1$ |\n| 对手球员技能等级 | $5$ | $9$ | $3$ | $12$ | $8$ |\n| 你的球员技能等级 | $6$ | $10$ | $4$ | $1$ | $2$ |\n\n| 体育场 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 奖金 | $1$ | $5$ | $4$ | $3$ | $1$ |\n| 对手球员技能等级 | $5$ | $9$ | $3$ | $8$ | $12$ |\n| 你的球员技能等级 | $6$ | $10$ | $4$ | $1$ | $2$ |\n\n我们可以注意到，在这两种情况下，我们的球队将在体育场 $1,2,3$ 获胜，获得奖金总额 $1+5+4=10$，而对手将获得奖金总额 $3+1=4$。由于 $10>4$，我们可以确定在这两种情况下我们都会获胜，因此最小答案是 $3$。\n\n**【样例 2 解释】** 对于第二个样例，可以证明，在侦查员提供体育场 $1,2$ 的信息后，你将首次确定成为冠军。然而，与第一个样例不同，你不会有一个固定的获胜分配。相反，对于对手在体育场 $3, 4, 5, 6$ 中的不同安排，你需要有不同的应对策略来赢得冠军。\n\n**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$12$|$p_i=1,N\\le10$|\n|$2$|$16$|$p_i=1$|\n|$3$|$14$|答案为 $0$ 或 $1$|\n|$4$|$18$|答案为 $-1$ 或 $N-1$|\n|$5$|$10$|$n\\le5$|\n|$6$|$30$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10^4,1 \\le a_i,b_i \\le 10^6$，且所有 $a_i,b_i$ 两两不同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2024] 足球决斗 / CF Duels", "background": "", "description": "基希讷乌，摩尔多瓦的首都，有两支各由 $N$ 名球员组成的足球队，进行一系列的对决。为了增加趣味，他们按照以下一对一的方式安排比赛：\n\n- 总共有 $N$ 场对决，每场在不同的体育场进行。\n- 每场对决将有两队中的一名球员对决。\n- 每个球员将只参加一场对决。\n- 每个体育场将为各自的对决胜利者提供一定金额的奖金。\n- 技能等级更高的球员赢得对决。保证总有技能等级更高的球员。\n\n在所有比赛结束后，冠军队是获得奖金总额超过对方球队的队伍。如果获得的奖金相同，则没有冠军。\n\n你是第一支球队的经理，你的任务是安排你的 $N$ 名球员参加 $N$ 场对决获得冠军。\n\n作为第一支足球队的经理，你拥有以下信息：\n\n- $N$ 个整数，表示你队伍中球员的技能等级\n- $N$ 个整数，表示对方队伍中球员的技能等级\n\n作为经理，你还派了一名侦查员访问每个体育场。侦查员按从 $1$ 到 $N$ 的顺序访问体育场，首先访问体育场 $1$，然后是体育场 $2$，最后访问体育场 $N$。侦查员访问完体育场 $i$ 后，他会向你报告对方球队在体育场 $i$ 的对决球员的技能等级。\n\n可能在侦查员访问了一些体育场之后，你已经可以预见你的球队将成为冠军。换句话说，有可能在侦查员访问了一些体育场后，你可以确定你能成为冠军。**你可能仍然需要等待侦查员访问剩余的体育场，以便为你的球队建立分配方案。**\n\n你的任务是找出侦查员需要访问的最少体育场数量，以确保你的球队能够夺冠，或者确定不可能成为冠军。", "inputFormat": "第一行，一个正整数 $N$；\n\n第二行 $N$ 个整数 $p_1,p_2,\\dots,p_N$，表示体育馆的奖金数。\n\n第三行 $N$ 个整数 $b_1,b_2,\\dots,b_N$，其中 $b_i$ 表示对方球队在第 $i$ 个体育馆派出球员的足球水平。\n\n第四行 $N$ 个整数 $a_1,a_2,\\dots,a_N$，表示你的队员的足球水平。", "outputFormat": "输出一个整数，表示你需要了解的体育场的最少数量，以确保你的球队能够成为冠军。\n\n此外，如果你立即知道你的球队在任何情况下都会成为冠军，应该输出 $0$；即使在你了解所有 $N$ 个体育场的信息后，仍然无法找到获胜策略，那么输出 $-1$。", "hint": "**【样例 #1 解释】**\n对于第一个样例，在侦查员分享体育场 $1$ 和 $2$ 的信息后，你仍不能保证成为冠军。原因是，如果对手按以下方式安排球员：\n\n| 体育场 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 奖金 | $1$ | $5$ | $4$ | $3$ | $1$ |\n| 对手球员技能等级 | $5$ | $9$ | $8$ | $12$ | $3$ |\n\n你最好的选择是打成平局：\n\n| 体育场 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 你的球员技能等级 | $6$ | $10$ | $1$ | $2$ | $4$ |\n\n你将赢得体育场 $1,2,5$ 的比赛，获得奖金总额 $1+5+1=7$，而对手将赢得体育场 $3,4$ 的比赛，获得奖金总额 $4+3=7$。\n\n在侦查员分享体育场 $1,2,3$ 的信息后，你可以确定你将成为冠军。原因是，如果对手按以下方式安排球员：\n\n| 体育场 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 奖金 | $1$ | $5$ | $4$ | $3$ | $1$ |\n| 对手球员技能等级 | $5$ | $9$ | $3$ | 未知 | 未知 |\n\n对手的两种选择是：\n\n| 体育场 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 奖金 | $1$ | $5$ | $4$ | $3$ | $1$ |\n| 对手球员技能等级 | $5$ | $9$ | $3$ | $12$ | $8$ |\n| 你的球员技能等级 | $6$ | $10$ | $4$ | $1$ | $2$ |\n\n| 体育场 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| 奖金 | $1$ | $5$ | $4$ | $3$ | $1$ |\n| 对手球员技能等级 | $5$ | $9$ | $3$ | $8$ | $12$ |\n| 你的球员技能等级 | $6$ | $10$ | $4$ | $1$ | $2$ |\n\n我们可以注意到，在这两种情况下，我们的球队将在体育场 $1,2,3$ 获胜，获得奖金总额 $1+5+4=10$，而对手将获得奖金总额 $3+1=4$。由于 $10>4$，我们可以确定在这两种情况下我们都会获胜，因此最小答案是 $3$。\n\n**【样例 2 解释】** 对于第二个样例，可以证明，在侦查员提供体育场 $1,2$ 的信息后，你将首次确定成为冠军。然而，与第一个样例不同，你不会有一个固定的获胜分配。相反，对于对手在体育场 $3, 4, 5, 6$ 中的不同安排，你需要有不同的应对策略来赢得冠军。\n\n**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$12$|$p_i=1,N\\le10$|\n|$2$|$16$|$p_i=1$|\n|$3$|$14$|答案为 $0$ 或 $1$|\n|$4$|$18$|答案为 $-1$ 或 $N-1$|\n|$5$|$10$|$n\\le5$|\n|$6$|$30$|无|\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10^4,1 \\le a_i,b_i \\le 10^6$，且所有 $a_i,b_i$ 两两不同。", "locale": "zh-CN"}}}
{"pid": "P12361", "type": "P", "difficulty": 5, "samples": [["12 5\n1 1 3 3 1 6 7 1 9 10 11\n1 2 6 3 5 4 6 5 2 3 4 5\n1 1\n1 1\n3 2\n6 3\n9 6", "1\n2\n2\n3\n5"], ["5 4\n1 2 3 4\n1 2 5 6 7\n1 1\n1 2\n1 1\n1 2\n", "1\n2\n2\n4"], ["5 5\n1 1 1 1\n1 2 3 4 5\n4 4\n2 2\n5 5\n1 1\n3 3", "1\n1\n1\n2\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "2024", "eJOI（欧洲）", "树链剖分"], "title": "[eJOI 2024] 糖果售卖 / Sweets", "background": "Sandu 高中毕业后成为了一名糖果商人！\n\n", "description": "在一座城市中有 $N$ 个市场，还有 $N-1$ 条道路连接他们。这些市场和道路构成了一个树形结构。每一天开始时，Sandu 都会来到 $1$ 号市场，开始售卖糖果。\n\n每个市场都有技能值和困难度。当你来到这个市场时，你的技能值会增加这个市场的技能值；然后，如果你的技能值大于等于这个市场的困难度，你就可以成功售卖糖果。初始时，每座市场的技能值都是 $0$。\n\n由于这座城市十分繁忙，所以在接下来的 $Q$ 天中，每一天都会发生一次事件，用 $u_j$ 和 $x_j$ 来描述，表示第 $u_j$ 座市场的技能值增加了 $x_j$。\n\n在这 $Q$ 天里，每一天 Sandu 都会带着 $0$ 技能值来到市场 $1$，然后选择一个市场 $k$。然后，他会沿着从 $1$ 到 $k$ 的路径访问路径上的每一座市场（包括 $1$ 和 $k$）并尝试售卖糖果。注意：无论 Sandu 是否售卖糖果成功，他都会一直向下访问，直到到达 $k$。\n\n现在 Sandu 想请你求出，对于每一天，他最多可以在多少个市场卖出糖果。", "inputFormat": "第一行，两个整数 $N,Q$；\n\n第二行 $N-1$ 个整数 $p_2,p_3,\\dots,p_N$，其中 $p_i$ 表示 $i$ 号市场的父节点。**特别地，保证 $p_i < i$。**\n\n第三行 $n$ 个整数 $t_1,t_2,\\dots,t_n$，表示每座市场的困难度。\n\n接下来 $Q$ 行，每行两个整数 $u_j,v_j$。", "outputFormat": "输出 $Q$ 行，每行一个整数，表示每一天的答案。", "hint": "**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$7$|对于 $1<i\\le n$，有 $p_i=1$；$N,Q\\le2000$|\n|$2$|$8$|$N,Q\\le2000,p_i=i-1$|\n|$3$|$17$|$p_i=i-1$|\n|$4$|$12$|$N,Q\\le2000$|\n|$5$|$21$|$u_j=1$|\n|$6$|$24$|$N,Q\\le10^5$|\n|$7$|$11$|无|\n\n对于 $100\\%$ 的数据，$1\\le N,Q\\le5\\times10^5,0 \\le t_i\\le10^9,1\\le x_j\\le10^9,1\\le u_j\\le N$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2024] 糖果售卖 / Sweets", "background": "Sandu 高中毕业后成为了一名糖果商人！\n\n", "description": "在一座城市中有 $N$ 个市场，还有 $N-1$ 条道路连接他们。这些市场和道路构成了一个树形结构。每一天开始时，Sandu 都会来到 $1$ 号市场，开始售卖糖果。\n\n每个市场都有技能值和困难度。当你来到这个市场时，你的技能值会增加这个市场的技能值；然后，如果你的技能值大于等于这个市场的困难度，你就可以成功售卖糖果。初始时，每座市场的技能值都是 $0$。\n\n由于这座城市十分繁忙，所以在接下来的 $Q$ 天中，每一天都会发生一次事件，用 $u_j$ 和 $x_j$ 来描述，表示第 $u_j$ 座市场的技能值增加了 $x_j$。\n\n在这 $Q$ 天里，每一天 Sandu 都会带着 $0$ 技能值来到市场 $1$，然后选择一个市场 $k$。然后，他会沿着从 $1$ 到 $k$ 的路径访问路径上的每一座市场（包括 $1$ 和 $k$）并尝试售卖糖果。注意：无论 Sandu 是否售卖糖果成功，他都会一直向下访问，直到到达 $k$。\n\n现在 Sandu 想请你求出，对于每一天，他最多可以在多少个市场卖出糖果。", "inputFormat": "第一行，两个整数 $N,Q$；\n\n第二行 $N-1$ 个整数 $p_2,p_3,\\dots,p_N$，其中 $p_i$ 表示 $i$ 号市场的父节点。**特别地，保证 $p_i < i$。**\n\n第三行 $n$ 个整数 $t_1,t_2,\\dots,t_n$，表示每座市场的困难度。\n\n接下来 $Q$ 行，每行两个整数 $u_j,v_j$。", "outputFormat": "输出 $Q$ 行，每行一个整数，表示每一天的答案。", "hint": "**【数据范围】**\n\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$7$|对于 $1<i\\le n$，有 $p_i=1$；$N,Q\\le2000$|\n|$2$|$8$|$N,Q\\le2000,p_i=i-1$|\n|$3$|$17$|$p_i=i-1$|\n|$4$|$12$|$N,Q\\le2000$|\n|$5$|$21$|$u_j=1$|\n|$6$|$24$|$N,Q\\le10^5$|\n|$7$|$11$|无|\n\n对于 $100\\%$ 的数据，$1\\le N,Q\\le5\\times10^5,0 \\le t_i\\le10^9,1\\le x_j\\le10^9,1\\le u_j\\le N$。", "locale": "zh-CN"}}}
{"pid": "P12362", "type": "P", "difficulty": 0, "samples": [["12 5\n\n6\n\n4\n\n3", "\n? 0 10\n\n? 0 4\n\n? 1 5\n\n! 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "交互题", "Special Judge", "eJOI（欧洲）"], "title": "[eJOI 2024] 霍拉舞 / Hora", "background": "**这是一道交互题！**\n\n**特别提醒：本题为 0-indexed。**\n\n**为了适配洛谷评测机，本题改用 IO 交互。**\n\n", "description": "在第 $8$ 届 eJOI 举行之际，$N$ 位选手正围成一圈跳霍拉舞！这里，$N$ 是一个正偶数，且这 $N$ 名选手中男女人数相同。组织者为每名选手分配了一个编号，从 $0$ 到 $N-1$。编号是顺着分配的，也就是说，$i$ 与 $i-1$ 和 $i+1$ 相邻；特别的，$0$ 与 $1$ 和 $N-1$ 相邻。\n\n你并不知道哪些选手是男生，哪些选手是女生。但是，由于你正在比赛中，所以你只能向评测机问问题！在一次问题中，你可以给两个整数 $L$ 和 $R$，保证 $0 \\le L,R < N$，然后：\n\n- 如果 $L\\le R$，评测机会返回 $[L,R]$ 中男生的数量。\n\n- 否则，评测机会返回 $[L,N-1]$ 和 $[0,R]$ 中总共男生的数量。\n\n给你一个 $K$，现在，你需要通过询问评测机若干个如上问题，来找到这个环中长度为 $K$ 的一段，使得这一段中男生和女生人数差最小。你需要输出在圆上连续的这一段的起点 $S$。如果有多个这样的 $S$，你可以输出任意一个。", "inputFormat": "输入一行两个整数 $N,K$。", "outputFormat": "如果你认为你找到了正确答案 $x$，输出 `! x` 结束交互。\n\n### 交互过程\n\n你需要输出 `? L R` 来进行询问，评测机会将结果返回到输入中，然后你进行读取。\n\n上述的所有输入都应从**标准输入**中读入，所有输出都应向**标准输出**中输出。输出一行后必须**清空缓冲区**，否则你的评测将被判为 Time Limit Exceeded。清空缓冲区方式如下：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其他语言请自行查阅文档。\n\n如果你的输出格式错误，或执行超过 $100000$ 次操作，你的评测将被判为 Wrong Answer。", "hint": "**【样例解释】**\n\n排列如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2358hmql.png)\n\n其中一种正确答案是 $1$，因为 $[1,5]$ 中有 $3$ 男 $2$ 女，差为 $3-2=1$，为最小。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 10^5$，$N$ 为偶数，$1 \\le K \\le N$，交互库不自适应（即，男女生的分布在一开始就已经确定，不会改变）。\n\n|$\\text{Subtask}$|分值|特殊性质|$Q_{full}$|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$N=34$|$34$|\n|$2$|$13$|$N=100000$，所有男孩都相邻|$18$|\n|$3$|$8$|$N=100000$，数据随机|$34$|\n|$4$|$11$|$N=100000,K=50000$|$18$|\n|$5$|$10$|$N=65536,K=128$|$26$|\n|$6$|$10$|$N=100000,K=400$|$26$|\n|$7$|$9$|$N=100000,K=99601$|$26$|\n|$8$|$10$|$N=100000,K=330$|$68$|\n|$9$|$24$|无|$34$|\n\n**【计分方式】**\n\n在每一个 $\\text{Subtask}$ 中都有 $Q_{full}$ 和分值。假设在你一共询问了 $Q$ 次。\n\n- 如果 $Q\\le Q_{full}$ 你就可以得到该测试点的全部分数。\n\n- 如果 $N\\ge Q\\ge Q_{full}$ 那么你可以得到分值 $\\times\\Bigg(1-\\Bigg(\\dfrac{(Q-Q_{full})}{N}\\Bigg)^{0.05}\\Bigg)$ 分。\n\n- 如果 $Q>N$ 那么你不得分。\n\n一个 $\\text{Subtask}$ 的得分是其所有测试点的得分最小值。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2024] 霍拉舞 / Hora", "background": "**这是一道交互题！**\n\n**特别提醒：本题为 0-indexed。**\n\n**为了适配洛谷评测机，本题改用 IO 交互。**\n\n", "description": "在第 $8$ 届 eJOI 举行之际，$N$ 位选手正围成一圈跳霍拉舞！这里，$N$ 是一个正偶数，且这 $N$ 名选手中男女人数相同。组织者为每名选手分配了一个编号，从 $0$ 到 $N-1$。编号是顺着分配的，也就是说，$i$ 与 $i-1$ 和 $i+1$ 相邻；特别的，$0$ 与 $1$ 和 $N-1$ 相邻。\n\n你并不知道哪些选手是男生，哪些选手是女生。但是，由于你正在比赛中，所以你只能向评测机问问题！在一次问题中，你可以给两个整数 $L$ 和 $R$，保证 $0 \\le L,R < N$，然后：\n\n- 如果 $L\\le R$，评测机会返回 $[L,R]$ 中男生的数量。\n\n- 否则，评测机会返回 $[L,N-1]$ 和 $[0,R]$ 中总共男生的数量。\n\n给你一个 $K$，现在，你需要通过询问评测机若干个如上问题，来找到这个环中长度为 $K$ 的一段，使得这一段中男生和女生人数差最小。你需要输出在圆上连续的这一段的起点 $S$。如果有多个这样的 $S$，你可以输出任意一个。", "inputFormat": "输入一行两个整数 $N,K$。", "outputFormat": "如果你认为你找到了正确答案 $x$，输出 `! x` 结束交互。\n\n### 交互过程\n\n你需要输出 `? L R` 来进行询问，评测机会将结果返回到输入中，然后你进行读取。\n\n上述的所有输入都应从**标准输入**中读入，所有输出都应向**标准输出**中输出。输出一行后必须**清空缓冲区**，否则你的评测将被判为 Time Limit Exceeded。清空缓冲区方式如下：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其他语言请自行查阅文档。\n\n如果你的输出格式错误，或执行超过 $100000$ 次操作，你的评测将被判为 Wrong Answer。", "hint": "**【样例解释】**\n\n排列如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2358hmql.png)\n\n其中一种正确答案是 $1$，因为 $[1,5]$ 中有 $3$ 男 $2$ 女，差为 $3-2=1$，为最小。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 10^5$，$N$ 为偶数，$1 \\le K \\le N$，交互库不自适应（即，男女生的分布在一开始就已经确定，不会改变）。\n\n|$\\text{Subtask}$|分值|特殊性质|$Q_{full}$|\n|:-:|:-:|:-:|:-:|\n|$1$|$5$|$N=34$|$34$|\n|$2$|$13$|$N=100000$，所有男孩都相邻|$18$|\n|$3$|$8$|$N=100000$，数据随机|$34$|\n|$4$|$11$|$N=100000,K=50000$|$18$|\n|$5$|$10$|$N=65536,K=128$|$26$|\n|$6$|$10$|$N=100000,K=400$|$26$|\n|$7$|$9$|$N=100000,K=99601$|$26$|\n|$8$|$10$|$N=100000,K=330$|$68$|\n|$9$|$24$|无|$34$|\n\n**【计分方式】**\n\n在每一个 $\\text{Subtask}$ 中都有 $Q_{full}$ 和分值。假设在你一共询问了 $Q$ 次。\n\n- 如果 $Q\\le Q_{full}$ 你就可以得到该测试点的全部分数。\n\n- 如果 $N\\ge Q\\ge Q_{full}$ 那么你可以得到分值 $\\times\\Bigg(1-\\Bigg(\\dfrac{(Q-Q_{full})}{N}\\Bigg)^{0.05}\\Bigg)$ 分。\n\n- 如果 $Q>N$ 那么你不得分。\n\n一个 $\\text{Subtask}$ 的得分是其所有测试点的得分最小值。", "locale": "zh-CN"}}}
{"pid": "P12363", "type": "P", "difficulty": 1, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2022", "排序", "蓝桥杯省赛"], "title": "[蓝桥杯 2022 省 Python B] 排列字母", "background": "", "description": "小蓝要把一个字符串中的字母按其在字母表中的顺序排列。\n\n例如，$\\tt{LANQIAO}$ 排列后为 $\\tt{AAILNOQ}$。\n\n又如，$\\tt{GOODGOODSTUDYDAYDAYUP}$ 排列后为 $\\tt{AADDDDDGGOOOOPSTUUYYY}$。\n\n请问对于以下字符串，排列之后字符串是什么？\n\n$$\\tt{WHERETHEREISAWILLTHEREISAWAY}$$", "inputFormat": "", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个字符串，在提交答案时只需要**编写一个程序输出这个字符串**，输出多余的内容将无法得分。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2022 省 Python B] 排列字母", "background": "", "description": "小蓝要把一个字符串中的字母按其在字母表中的顺序排列。\n\n例如，$\\tt{LANQIAO}$ 排列后为 $\\tt{AAILNOQ}$。\n\n又如，$\\tt{GOODGOODSTUDYDAYDAYUP}$ 排列后为 $\\tt{AADDDDDGGOOOOPSTUUYYY}$。\n\n请问对于以下字符串，排列之后字符串是什么？\n\n$$\\tt{WHERETHEREISAWILLTHEREISAWAY}$$", "inputFormat": "", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个字符串，在提交答案时只需要**编写一个程序输出这个字符串**，输出多余的内容将无法得分。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P12364", "type": "P", "difficulty": 4, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2022", "中国剩余定理 CRT", "蓝桥杯省赛"], "title": "[蓝桥杯 2022 省 Python B] 寻找整数", "background": "", "description": "有一个不超过 $10^{17}$ 的正整数 $n$，知道这个数除以 $2$ 至 $49$ 后的余数如下表所示，求这个正整数最小是多少。\n\n| $a$ | $n \\bmod a$ | $a$ | $n \\bmod a$ | $a$ | $n \\bmod a$ | $a$ | $n \\bmod a$ |\n|:---:|:-----------:|:---:|:-----------:|:---:|:-----------:|:---:|:-----------:|\n| $2$ | $1$         | $14$| $11$        | $26$| $23$        | $38$| $37$        |\n| $3$ | $2$         | $15$| $14$        | $27$| $20$        | $39$| $23$        |\n| $4$ | $1$         | $16$| $9$         | $28$| $25$        | $40$| $9$         |\n| $5$ | $4$         | $17$| $0$         | $29$| $16$        | $41$| $1$         |\n| $6$ | $5$         | $18$| $11$        | $30$| $29$        | $42$| $11$        |\n| $7$ | $4$         | $19$| $18$        | $31$| $27$        | $43$| $11$        |\n| $8$ | $1$         | $20$| $9$         | $32$| $25$        | $44$| $33$        |\n| $9$ | $2$         | $21$| $11$        | $33$| $11$        | $45$| $29$        |\n| $10$| $9$         | $22$| $11$        | $34$| $17$        | $46$| $15$        |\n| $11$| $0$         | $23$| $15$        | $35$| $4$         | $47$| $5$         |\n| $12$| $5$         | $24$| $17$        | $36$| $29$        | $48$| $41$        |\n| $13$| $10$        | $25$| $9$         | $37$| $22$        | $49$| $46$        |\n", "inputFormat": "", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只需要**编写一个程序输出这个整数**，输出多余的内容将无法得分。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2022 省 Python B] 寻找整数", "background": "", "description": "有一个不超过 $10^{17}$ 的正整数 $n$，知道这个数除以 $2$ 至 $49$ 后的余数如下表所示，求这个正整数最小是多少。\n\n| $a$ | $n \\bmod a$ | $a$ | $n \\bmod a$ | $a$ | $n \\bmod a$ | $a$ | $n \\bmod a$ |\n|:---:|:-----------:|:---:|:-----------:|:---:|:-----------:|:---:|:-----------:|\n| $2$ | $1$         | $14$| $11$        | $26$| $23$        | $38$| $37$        |\n| $3$ | $2$         | $15$| $14$        | $27$| $20$        | $39$| $23$        |\n| $4$ | $1$         | $16$| $9$         | $28$| $25$        | $40$| $9$         |\n| $5$ | $4$         | $17$| $0$         | $29$| $16$        | $41$| $1$         |\n| $6$ | $5$         | $18$| $11$        | $30$| $29$        | $42$| $11$        |\n| $7$ | $4$         | $19$| $18$        | $31$| $27$        | $43$| $11$        |\n| $8$ | $1$         | $20$| $9$         | $32$| $25$        | $44$| $33$        |\n| $9$ | $2$         | $21$| $11$        | $33$| $11$        | $45$| $29$        |\n| $10$| $9$         | $22$| $11$        | $34$| $17$        | $46$| $15$        |\n| $11$| $0$         | $23$| $15$        | $35$| $4$         | $47$| $5$         |\n| $12$| $5$         | $24$| $17$        | $36$| $29$        | $48$| $41$        |\n| $13$| $10$        | $25$| $9$         | $37$| $22$        | $49$| $46$        |\n", "inputFormat": "", "outputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只需要**编写一个程序输出这个整数**，输出多余的内容将无法得分。", "hint": "", "locale": "zh-CN"}}}
