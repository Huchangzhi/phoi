{"pid": "P3918", "type": "P", "difficulty": 2, "samples": [["5 2\n2 2", "12\n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "集训队互测", "排序"], "title": "[国家集训队] 特技飞行", "background": "1. wqs 爱好模拟飞行。\n\n2. clj 开了一家神犇航空，由于 clj 还要玩游戏，所以公司的事务由你来打理。\n\n注意：题目中只是用了这样一个背景，并不与真实/模拟飞行相符", "description": "神犇航空开展了一项载客特技飞行业务。每次飞行长 $n$ 个单位时间，每个单位时间可以进行一项特技动作，可选的动作有 $k$ 种，每种动作有一个刺激程度 $c_i$。如果连续进行相同的动作，乘客会感到厌倦，所以定义某次动作的价值为(距上次该动作的时间) $ \\times c_i$，若为第一次进行该动作，价值为 $0$。安排一种方案，使得总价值最大。", "inputFormat": "第一行，两个整数，$n$ 和 $k$，如上所述；\n\n第二行，$k$ 个整数，表示 $k$ 种动作的 $c_i$ 值。", "outputFormat": "仅一行，一个整数，表示最大总价值。\n", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的测试数据，$n \\le 20$，$k \\le 3$。\n- 对于 $100\\%$ 的测试数据，$1 \\le n \\le 10^3$，$1 \\le k \\le 300$，$0 \\le c_i \\le 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[CTT] Stunt Flight", "background": "1. wqs loves flight simulation.\n2. clj founded Shenben Airlines (pinyin). Since clj also wants to play games, you are in charge of managing the company.\n\nNote: This is just a fictional background and does not correspond to real/simulated flying.", "description": "Shenben Airlines (pinyin) has launched a passenger-carrying stunt flying service. Each flight lasts $n$ time units. In each time unit, you can perform one stunt. There are $k$ types of stunts, and each type has an excitement level $c_i$. If the same stunt is performed repeatedly, passengers get bored, so we define the value of performing a stunt as (time since the last time this same stunt was performed) $ \\times c_i$. If it is the first time performing that stunt, the value is $0$. Plan a schedule to maximize the total value.", "inputFormat": "The first line contains two integers, $n$ and $k$, as described above.\nThe second line contains $k$ integers, the $c_i$ values for the $k$ stunt types.", "outputFormat": "Output a single line with one integer, the maximum total value.", "hint": "Constraints\n- For 10% of the testdata, $n \\le 20$, $k \\le 3$.\n- For 100% of the testdata, $1 \\le n \\le 10^3$, $1 \\le k \\le 300$, $0 \\le c_i \\le 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[国家集训队] 特技飞行", "background": "1. wqs 爱好模拟飞行。\n\n2. clj 开了一家神犇航空，由于 clj 还要玩游戏，所以公司的事务由你来打理。\n\n注意：题目中只是用了这样一个背景，并不与真实/模拟飞行相符", "description": "神犇航空开展了一项载客特技飞行业务。每次飞行长 $n$ 个单位时间，每个单位时间可以进行一项特技动作，可选的动作有 $k$ 种，每种动作有一个刺激程度 $c_i$。如果连续进行相同的动作，乘客会感到厌倦，所以定义某次动作的价值为(距上次该动作的时间) $ \\times c_i$，若为第一次进行该动作，价值为 $0$。安排一种方案，使得总价值最大。", "inputFormat": "第一行，两个整数，$n$ 和 $k$，如上所述；\n\n第二行，$k$ 个整数，表示 $k$ 种动作的 $c_i$ 值。", "outputFormat": "仅一行，一个整数，表示最大总价值。\n", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的测试数据，$n \\le 20$，$k \\le 3$。\n- 对于 $100\\%$ 的测试数据，$1 \\le n \\le 10^3$，$1 \\le k \\le 300$，$0 \\le c_i \\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P3919", "type": "P", "difficulty": 5, "samples": [["5 10\n59 46 14 87 41\n0 2 1\n0 1 1 14\n0 1 1 57\n0 1 1 88\n4 2 4\n0 2 5\n0 2 4\n4 2 1\n2 2 2\n1 1 5 91", "59\n87\n41\n87\n88\n46"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "平衡树", "递归", "O2优化", "可持久化线段树", "可持久化", "模板题"], "title": "【模板】可持久化线段树 1（可持久化数组）", "background": "2021.9.18 增添一组 hack 数据 by @panyf。\n\n标题即题意。\n\n有了可持久化数组，便可以实现很多衍生的可持久化功能。（例如：可持久化并查集）", "description": "如题，你需要维护这样的一个长度为 $ N $ 的数组，支持如下两种操作：\n\n\n1. 在某个历史版本上修改某一个位置上的值。\n\n2. 访问某个历史版本上的某一位置的值。\n\n\n此外，每进行一次操作，就会生成一个新的版本。版本编号即为当前操作的编号（从 $1$ 开始编号，版本 $0$ 表示初始状态数组）。\n\n**对于操作 $2$，即为生成一个完全一样的版本，不作任何改动**。即，询问生成的版本是询问所访问的那个版本的复制。", "inputFormat": "输入的第一行包含两个正整数 $ N, M $，分别表示数组的长度和操作的个数。\n\n第二行包含 $ N $ 个整数，依次为初始状态下数组各位的值（依次为 $ a_i $，$ 1 \\leq i \\leq N $）。\n\n接下来 $ M $ 行每行包含 $3$ 或 $4$ 个整数，代表两种操作之一（设当前是第 $i$ 次操作）：\n\n1. 对于操作 $1$，格式为 `v 1 p c`，即为在版本 $ v $ 的基础上，将 $ a_{p} $ 修改为 $c$。\n\n2. 对于操作 $2$，格式为 `v 2 p`，即访问版本 $ v $ 中的 $ a_{p} $ 的值，注意：**生成一样版本的对象应为 $v$**。", "outputFormat": "输出包含若干行，依次为每个操作 $2$ 的结果。", "hint": "### 数据规模\n\n对于 $30\\%$ 的数据，$ 1 \\leq N, M \\leq {10}^3 $。\n\n对于 $50\\%$ 的数据，$ 1 \\leq N, M \\leq {10}^4 $。\n\n对于 $70\\%$ 的数据，$ 1 \\leq N, M \\leq {10}^5 $。\n\n对于 $100\\%$ 的数据：\n\n- $ 1 \\leq N, M \\leq {10}^6$；\n- $1 \\leq p \\leq N$；\n- 设当前是第 $x$ 次操作，$0 \\leq v < x$；\n- $-{10}^9 \\leq a_i,c  \\leq {10}^9$。\n\n### 样例说明\n\n所有操作结束后，总共生成了 $11$ 个版本，编号为 $0 \\sim 10$，依次为：\n\n版本 $0$：`59 46 14 87 41`，\n\n版本 $1$：`59 46 14 87 41`，\n\n版本 $2$：`14 46 14 87 41`，\n\n版本 $3$：`57 46 14 87 41`，\n\n版本 $4$：`88 46 14 87 41`，\n\n版本 $5$：`88 46 14 87 41`，\n\n版本 $6$：`59 46 14 87 41`，\n\n版本 $7$：`59 46 14 87 41`，\n\n版本 $8$：`88 46 14 87 41`，\n\n版本 $9$：`14 46 14 87 41`，\n\n版本 $10$：`59 46 14 87 91`。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Persistent Segment Tree 1 (Persistent Array)", "background": "Added a set of hack testdata on 2021-09-18 by @panyf.\n\nThe title describes the problem.\n\nWith a persistent array, many derived persistent features can be implemented (for example: persistent union-find/DSU).", "description": "As described, you need to maintain an array of length $ N $, supporting the following two operations:\n\n1. Modify the value at some position on a certain historical version.\n2. Access the value at some position on a certain historical version.\n\nIn addition, each time you perform an operation, a new version is created. The version number equals the current operation index (starting from $ 1 $; version $ 0 $ is the initial array).\n\nFor operation $ 2 $, a completely identical version is created without any changes. That is, the version generated by a query is a copy of the version that is being accessed.", "inputFormat": "The first line contains two positive integers $ N, M $, the array length and the number of operations.\n\nThe second line contains $ N $ integers, the initial values of the array (denoted as $ a_i $, $ 1 \\leq i \\leq N $).\n\nEach of the next $ M $ lines contains $ 3 $ or $ 4 $ integers, representing one of the two operations (assume the current operation is the $ i $-th):\n\n1. For operation $ 1 $, the format is `v 1 p c`, meaning: based on version $ v $, set $ a_p $ to $ c $.\n2. For operation $ 2 $, the format is `v 2 p`, meaning: access the value of $ a_p $ in version $ v $. Note: the version that is duplicated must be $ v $.", "outputFormat": "Output several lines, each being the result of an operation $ 2 $, in order.", "hint": "Constraints\n\n- For $ 30\\% $ of the testdata, $ 1 \\leq N, M \\leq 10^3 $.\n- For $ 50\\% $ of the testdata, $ 1 \\leq N, M \\leq 10^4 $.\n- For $ 70\\% $ of the testdata, $ 1 \\leq N, M \\leq 10^5 $.\n- For $ 100\\% $ of the testdata:\n  - $ 1 \\leq N, M \\leq 10^6 $;\n  - $ 1 \\leq p \\leq N $;\n  - Suppose this is the $ x $-th operation, then $ 0 \\leq v < x $;\n  - $ -10^9 \\leq a_i, c \\leq 10^9 $.\n\nSample Explanation\n\nAfter all operations, a total of $ 11 $ versions are generated, numbered $ 0 \\sim 10 $, in order:\n\nVersion $ 0 $: `59 46 14 87 41`.\nVersion $ 1 $: `59 46 14 87 41`.\nVersion $ 2 $: `14 46 14 87 41`.\nVersion $ 3 $: `57 46 14 87 41`.\nVersion $ 4 $: `88 46 14 87 41`.\nVersion $ 5 $: `88 46 14 87 41`.\nVersion $ 6 $: `59 46 14 87 41`.\nVersion $ 7 $: `59 46 14 87 41`.\nVersion $ 8 $: `88 46 14 87 41`.\nVersion $ 9 $: `14 46 14 87 41`.\nVersion $ 10 $: `59 46 14 87 91`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】可持久化线段树 1（可持久化数组）", "background": "2021.9.18 增添一组 hack 数据 by @panyf。\n\n标题即题意。\n\n有了可持久化数组，便可以实现很多衍生的可持久化功能。（例如：可持久化并查集）", "description": "如题，你需要维护这样的一个长度为 $ N $ 的数组，支持如下两种操作：\n\n\n1. 在某个历史版本上修改某一个位置上的值。\n\n2. 访问某个历史版本上的某一位置的值。\n\n\n此外，每进行一次操作，就会生成一个新的版本。版本编号即为当前操作的编号（从 $1$ 开始编号，版本 $0$ 表示初始状态数组）。\n\n**对于操作 $2$，即为生成一个完全一样的版本，不作任何改动**。即，询问生成的版本是询问所访问的那个版本的复制。", "inputFormat": "输入的第一行包含两个正整数 $ N, M $，分别表示数组的长度和操作的个数。\n\n第二行包含 $ N $ 个整数，依次为初始状态下数组各位的值（依次为 $ a_i $，$ 1 \\leq i \\leq N $）。\n\n接下来 $ M $ 行每行包含 $3$ 或 $4$ 个整数，代表两种操作之一（设当前是第 $i$ 次操作）：\n\n1. 对于操作 $1$，格式为 `v 1 p c`，即为在版本 $ v $ 的基础上，将 $ a_{p} $ 修改为 $c$。\n\n2. 对于操作 $2$，格式为 `v 2 p`，即访问版本 $ v $ 中的 $ a_{p} $ 的值，注意：**生成一样版本的对象应为 $v$**。", "outputFormat": "输出包含若干行，依次为每个操作 $2$ 的结果。", "hint": "### 数据规模\n\n对于 $30\\%$ 的数据，$ 1 \\leq N, M \\leq {10}^3 $。\n\n对于 $50\\%$ 的数据，$ 1 \\leq N, M \\leq {10}^4 $。\n\n对于 $70\\%$ 的数据，$ 1 \\leq N, M \\leq {10}^5 $。\n\n对于 $100\\%$ 的数据：\n\n- $ 1 \\leq N, M \\leq {10}^6$；\n- $1 \\leq p \\leq N$；\n- 设当前是第 $x$ 次操作，$0 \\leq v < x$；\n- $-{10}^9 \\leq a_i,c  \\leq {10}^9$。\n\n### 样例说明\n\n所有操作结束后，总共生成了 $11$ 个版本，编号为 $0 \\sim 10$，依次为：\n\n版本 $0$：`59 46 14 87 41`，\n\n版本 $1$：`59 46 14 87 41`，\n\n版本 $2$：`14 46 14 87 41`，\n\n版本 $3$：`57 46 14 87 41`，\n\n版本 $4$：`88 46 14 87 41`，\n\n版本 $5$：`88 46 14 87 41`，\n\n版本 $6$：`59 46 14 87 41`，\n\n版本 $7$：`59 46 14 87 41`，\n\n版本 $8$：`88 46 14 87 41`，\n\n版本 $9$：`14 46 14 87 41`，\n\n版本 $10$：`59 46 14 87 91`。", "locale": "zh-CN"}}}
{"pid": "P3920", "type": "P", "difficulty": 7, "samples": [["0\n5\n0 0 6\n1 2 4\n0 9 4\n0 5 5\n0 2 4\n", "0\n1\n2\n4\n7\n"]], "limits": {"time": [12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2014", "点分治", "平衡树", "分治", "WC"], "title": "[WC2014] 紫荆花之恋", "background": null, "description": "强强和萌萌是一对好朋友。有一天他们在外面闲逛，突然看到前方有一棵紫荆树。这已经是紫荆花飞舞的季节了，无数的花瓣以肉眼可见的速度从紫荆树上长了出来。\n\n仔细看看的话，这个大树实际上是一个带权树。每个时刻它会长出一个新的叶子节点，每个节点上有一个可爱的小精灵，新长出的节点上也会同时出现一个新的小精灵。小精灵是很萌但是也很脆弱的生物，每个小精灵 $i$ 都有一个感受能力值 $r_i$，小精灵 $i,j$ 成为朋友当且仅当在树上 $i$ 和 $j$ 的距离 $\\operatorname{dist}(i,j) \\leq r_i+r_j$，其中 $\\operatorname{dist}(i,j)$ 表示在这个树上从 $i$ 到 $j$ 的唯一路径上所有边的边权和。\n\n强强和萌萌很好奇每次新长出一个叶子节点之后，这个树上总共有几对朋友。\n\n\n我们假定这个树一开始为空，节点按照加入的顺序从 $1$ 开始编号。由于强强非常好奇，你必须在他每次出现新结点后马上给出总共的朋友对数，不能拖延哦。", "inputFormat": "第一行包含一个整数，表示测试点编号。\n\n第二行包含一个正整数 $n$，表示总共要加入的节点数。\n\n我们令加入节点前的总共朋友对数是 $last\\_ans$，在一开始时它的值为 $0$。\n\n接下来 $n$ 行中第 $i$ 行有三个非负整数 $a_i,c_i,r_i$，表示结点 $i$ 的父节点的编号为 $a_i \\oplus (last\\_ans  \\bmod  10^9)$（其中 $\\oplus$ 表示异或，数据保证这样操作后得到的结果介于 $1$ 到 $i−1$ 之间），与父结点之间的边权为 $c_i$，节点 $i$ 上小精灵的感受能力值为 $r_i$。\n\n注意 $a_1=c_1=0$，表示 $1$ 号节点是根结点，对于 $i>1$，父节点的编号至少为 $1$。", "outputFormat": "包含 $n$ 行，每行输出 $1$ 个整数，表示加入第 $i$ 个点之后，树上有几对 friends。", "hint": "所有数据均满足 $1 \\leq c_i \\leq 10^4$，$a_i \\leq 2\\times 10^9$，$r_i \\leq 10^9$。\n\n| 测试点编号       | 约定                                                         |\n| :----------------: | :------------------------------------------------------------: |\n| $1,2$            | $n \\leq 100$                                                 |\n| $3,4$            | $n \\leq 1000$                                                |\n| $5,6,7,8$        | $n \\leq 10^5$，节点 $1$ 最多有两个子节点，其他节点最多有一个子节点 |\n| $9,10$           | $n \\leq 10^5$，$r_i \\leq 10$                                 |\n| $11,12$          | $n \\leq 10^5$，树是随机生成的                                |\n| $13,14,15$       | $n \\leq 7\\times 10^4$                                        |\n| $16,17,18,19,20$ | $n \\leq 10^5$                                                |", "locale": "zh-CN", "translations": {"en": {"title": "[WC2014] Love of the Bauhinia", "background": "", "description": "Qiangqiang and Mengmeng are good friends. One day while strolling outside, they suddenly saw a bauhinia tree ahead. It was the season when bauhinia blossoms flutter, and countless petals were growing from the tree at a speed visible to the naked eye.\n\nLooking closely, this big tree is actually a weighted tree. At each moment it grows a new leaf node. There is a cute little spirit on every node, and a new spirit also appears on each newly grown node. Spirits are adorable but fragile creatures. Each spirit $i$ has a sensitivity value $r_i$. Spirits $i$ and $j$ become friends if and only if their distance on the tree satisfies $\\operatorname{dist}(i,j) \\leq r_i + r_j$, where $\\operatorname{dist}(i,j)$ denotes the sum of edge weights along the unique path from $i$ to $j$ on this tree.\n\nQiangqiang and Mengmeng are curious: after each new leaf node appears, how many pairs of friends are there in total on the tree?\n\nWe assume the tree is initially empty, and nodes are numbered from $1$ in the order they are added. Since Qiangqiang is very curious, you must output the total number of friend pairs immediately after each new node appears, without delay.", "inputFormat": "The first line contains an integer representing the test point ID.\n\nThe second line contains a positive integer $n$, the total number of nodes to be added.\n\nLet $last\\_ans$ be the total number of friend pairs before adding the current node, with initial value $0$.\n\nIn each of the next $n$ lines, the $i$-th line contains three non-negative integers $a_i, c_i, r_i$, meaning that the parent ID of node $i$ is $a_i \\oplus (last\\_ans \\bmod 10^9)$ (where $\\oplus$ denotes XOR; the data guarantees that the result after this operation lies between $1$ and $i-1$ inclusive), the edge weight to its parent is $c_i$, and the sensitivity of the spirit on node $i$ is $r_i$.\n\nNote that $a_1 = c_1 = 0$, meaning node $1$ is the root. For $i > 1$, the parent ID is at least $1$.", "outputFormat": "Output $n$ lines. The $i$-th line contains one integer: the number of pairs of friends in the tree after adding node $i$.", "hint": "All data satisfy $1 \\leq c_i \\leq 10^4$, $a_i \\leq 2 \\times 10^9$, and $r_i \\leq 10^9$.\n\n| Test point ID | Assumption                                                    |\n| :-----------: | :-----------------------------------------------------------: |\n|    $1,2$      | $n \\leq 100$                                                 |\n|    $3,4$      | $n \\leq 1000$                                                |\n|  $5,6,7,8$    | $n \\leq 10^5$, node $1$ has at most two children, other nodes have at most one child |\n|   $9,10$      | $n \\leq 10^5$, $r_i \\leq 10$                                 |\n|  $11,12$      | $n \\leq 10^5$, the tree is generated randomly                |\n| $13,14,15$    | $n \\leq 7 \\times 10^4$                                       |\n| $16,17,18,19,20$ | $n \\leq 10^5$                                             |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[WC2014] 紫荆花之恋", "background": null, "description": "强强和萌萌是一对好朋友。有一天他们在外面闲逛，突然看到前方有一棵紫荆树。这已经是紫荆花飞舞的季节了，无数的花瓣以肉眼可见的速度从紫荆树上长了出来。\n\n仔细看看的话，这个大树实际上是一个带权树。每个时刻它会长出一个新的叶子节点，每个节点上有一个可爱的小精灵，新长出的节点上也会同时出现一个新的小精灵。小精灵是很萌但是也很脆弱的生物，每个小精灵 $i$ 都有一个感受能力值 $r_i$，小精灵 $i,j$ 成为朋友当且仅当在树上 $i$ 和 $j$ 的距离 $\\operatorname{dist}(i,j) \\leq r_i+r_j$，其中 $\\operatorname{dist}(i,j)$ 表示在这个树上从 $i$ 到 $j$ 的唯一路径上所有边的边权和。\n\n强强和萌萌很好奇每次新长出一个叶子节点之后，这个树上总共有几对朋友。\n\n\n我们假定这个树一开始为空，节点按照加入的顺序从 $1$ 开始编号。由于强强非常好奇，你必须在他每次出现新结点后马上给出总共的朋友对数，不能拖延哦。", "inputFormat": "第一行包含一个整数，表示测试点编号。\n\n第二行包含一个正整数 $n$，表示总共要加入的节点数。\n\n我们令加入节点前的总共朋友对数是 $last\\_ans$，在一开始时它的值为 $0$。\n\n接下来 $n$ 行中第 $i$ 行有三个非负整数 $a_i,c_i,r_i$，表示结点 $i$ 的父节点的编号为 $a_i \\oplus (last\\_ans  \\bmod  10^9)$（其中 $\\oplus$ 表示异或，数据保证这样操作后得到的结果介于 $1$ 到 $i−1$ 之间），与父结点之间的边权为 $c_i$，节点 $i$ 上小精灵的感受能力值为 $r_i$。\n\n注意 $a_1=c_1=0$，表示 $1$ 号节点是根结点，对于 $i>1$，父节点的编号至少为 $1$。", "outputFormat": "包含 $n$ 行，每行输出 $1$ 个整数，表示加入第 $i$ 个点之后，树上有几对 friends。", "hint": "所有数据均满足 $1 \\leq c_i \\leq 10^4$，$a_i \\leq 2\\times 10^9$，$r_i \\leq 10^9$。\n\n| 测试点编号       | 约定                                                         |\n| :----------------: | :------------------------------------------------------------: |\n| $1,2$            | $n \\leq 100$                                                 |\n| $3,4$            | $n \\leq 1000$                                                |\n| $5,6,7,8$        | $n \\leq 10^5$，节点 $1$ 最多有两个子节点，其他节点最多有一个子节点 |\n| $9,10$           | $n \\leq 10^5$，$r_i \\leq 10$                                 |\n| $11,12$          | $n \\leq 10^5$，树是随机生成的                                |\n| $13,14,15$       | $n \\leq 7\\times 10^4$                                        |\n| $16,17,18,19,20$ | $n \\leq 10^5$                                                |", "locale": "zh-CN"}}}
{"pid": "P3921", "type": "P", "difficulty": 5, "samples": [["1 0 0 1\n", "1 1\n"], ["5 0 0 2\n", "3 90\n"], ["3 1 0 1\n1 2\n", "-1 0\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "广度优先搜索 BFS"], "title": "小学数学题", "background": "露米娅：我来先考你一道小学数学题吧！\n\n琪露诺：好！小学的题我肯定都会！", "description": "露米娅：有 $ n $ 只妖精要跨过雾之湖，由于湖边大雾弥漫，妖精们看不清湖到底有多大，不想从边上绕过去。\n\n湖上有一~~条船~~个传送器，且这个传送器每次只能载 $ r $ 只妖精跨过湖面（注意传送器可以同时把两侧的妖精分别运到对岸，但每次运送的总妖精数不能超过 $ r $）。\n\n这些妖精还很喜欢搞事，所以在任何时刻，都需要满足一些条件，其中第一种条件有 $ m_1 $ 个，第二种条件有 $ m_2 $ 个。\n\n第一种条件形如 妖精 $ a $ 和妖精 $ b $ 必须要在湖的同一侧；\n\n第二种条件形如 当妖精 $ a $ 在湖的一侧时，妖精 $ b $ 和妖精 $ c $ 不能同时在湖的另一侧。\n\n\n现在给出这些条件，求：\n\n1. 至少需要传送器几次才能让所有妖精到湖的对岸；\n\n2. 在保证次数最少的前提下，求过河方案数。", "inputFormat": "第一行四个整数 $ n , m_1 , m_2 , r $。\n\n接下来 $ m_1 $ 行每行两个整数 $ a , b $，代表第一种条件。\n\n接下来 $ m_2 $ 行每行三个整数 $ a , b , c $， 代表第二种条件。", "outputFormat": "两个整数，分别为最少使用传送器次数和方案数，用空格分隔。\n\n若无法全部过河，输出 `-1 0`。", "hint": "对于 $ 30 \\% $ 的数据， $ n \\leq 10 $；\n\n对于另外 $ 10 \\% $ 的数据， $ m_1 = m_2 = 0 $；\n\n对于 $ 100 \\% $ 的数据， $ a,b,c \\leq n \\leq 15 $， $ m_1 , m_2 \\leq 50 $， $ r \\leq 10^9 $。\n\n\n请不要相信洛谷评测机的速度，如果得了 $80$ 分以上，可以等人少的时候再交一次。但如果得了 $60$ 分以下，说明可能写的不是正解，就不要再虐萌萌哒评测机啦", "locale": "zh-CN", "translations": {"en": {"title": "Primary School Math Problem", "background": "Rumia: Let me test you with a primary school math problem first!\n\nCirno: Sure! I can do all primary school problems!", "description": "Rumia: There are $ n $ fairies who want to cross Mist Lake. Because the lakeside is covered in thick fog, the fairies cannot tell how big the lake is and do not want to walk around the edge.\n\nThere is a ~~boat~~ teleporter on the lake, and each time this teleporter can carry at most $ r $ fairies across the lake (note that the teleporter can simultaneously send fairies from both sides to the opposite side, but the total number moved in one operation must not exceed $ r $).\n\nThese fairies love to make trouble, so at all times the following conditions must be satisfied. There are $ m_1 $ conditions of the first type and $ m_2 $ conditions of the second type.\n\nFirst type: Fairy $ a $ and fairy $ b $ must be on the same side of the lake.\n\nSecond type: When fairy $ a $ is on one side of the lake, fairies $ b $ and $ c $ must not be simultaneously on the other side.\n\nGiven these conditions, find:\n\n1. The minimum number of times the teleporter must be used to move all fairies to the opposite shore.\n2. Under the constraint of using the minimum number of times, the number of valid crossing plans.", "inputFormat": "The first line contains four integers $ n, m_1, m_2, r $.\n\nEach of the next $ m_1 $ lines contains two integers $ a, b $, representing a condition of the first type.\n\nEach of the next $ m_2 $ lines contains three integers $ a, b, c $, representing a condition of the second type.", "outputFormat": "Output two integers: the minimum number of uses of the teleporter and the number of valid plans, separated by a space.\n\nIf it is impossible for all fairies to cross, output `-1 0`.", "hint": "- For $ 30\\% $ of the testdata, $ n \\leq 10 $.\n- For another $ 10\\% $ of the testdata, $ m_1 = m_2 = 0 $.\n- Constraints: For $ 100\\% $ of the testdata, $ a, b, c \\leq n \\leq 15 $, $ m_1, m_2 \\leq 50 $, $ r \\leq 10^9 $.\n\nPlease do not rely on the Luogu judge’s speed. If you score above $ 80 $, you can submit again when there are fewer users. But if you score below $ 60 $, it probably is not the correct solution, so please do not put extra load on the judge.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小学数学题", "background": "露米娅：我来先考你一道小学数学题吧！\n\n琪露诺：好！小学的题我肯定都会！", "description": "露米娅：有 $ n $ 只妖精要跨过雾之湖，由于湖边大雾弥漫，妖精们看不清湖到底有多大，不想从边上绕过去。\n\n湖上有一~~条船~~个传送器，且这个传送器每次只能载 $ r $ 只妖精跨过湖面（注意传送器可以同时把两侧的妖精分别运到对岸，但每次运送的总妖精数不能超过 $ r $）。\n\n这些妖精还很喜欢搞事，所以在任何时刻，都需要满足一些条件，其中第一种条件有 $ m_1 $ 个，第二种条件有 $ m_2 $ 个。\n\n第一种条件形如 妖精 $ a $ 和妖精 $ b $ 必须要在湖的同一侧；\n\n第二种条件形如 当妖精 $ a $ 在湖的一侧时，妖精 $ b $ 和妖精 $ c $ 不能同时在湖的另一侧。\n\n\n现在给出这些条件，求：\n\n1. 至少需要传送器几次才能让所有妖精到湖的对岸；\n\n2. 在保证次数最少的前提下，求过河方案数。", "inputFormat": "第一行四个整数 $ n , m_1 , m_2 , r $。\n\n接下来 $ m_1 $ 行每行两个整数 $ a , b $，代表第一种条件。\n\n接下来 $ m_2 $ 行每行三个整数 $ a , b , c $， 代表第二种条件。", "outputFormat": "两个整数，分别为最少使用传送器次数和方案数，用空格分隔。\n\n若无法全部过河，输出 `-1 0`。", "hint": "对于 $ 30 \\% $ 的数据， $ n \\leq 10 $；\n\n对于另外 $ 10 \\% $ 的数据， $ m_1 = m_2 = 0 $；\n\n对于 $ 100 \\% $ 的数据， $ a,b,c \\leq n \\leq 15 $， $ m_1 , m_2 \\leq 50 $， $ r \\leq 10^9 $。\n\n\n请不要相信洛谷评测机的速度，如果得了 $80$ 分以上，可以等人少的时候再交一次。但如果得了 $60$ 分以下，说明可能写的不是正解，就不要再虐萌萌哒评测机啦", "locale": "zh-CN"}}}
{"pid": "P3922", "type": "P", "difficulty": 7, "samples": [["1 3\n", "1\n"], ["0 1\n", "1\n"], ["1 10\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "高精度", "洛谷原创", "期望"], "title": "中学数学题", "background": "琪露诺：我知道了！答案是 $-1 \\ 0$，因为幻想乡没有传送器！\n\n露米娅：真拿你没办法。。算了，再来一道中学数学题吧\n\n说着，露米娅写下了一个数列\n\n$ 1 , 2 , 4 , 8 , 16 , 32 , 64 , 128 , \\cdots , 2048 , 4096 , 8192 , 16384 , \\cdots $", "description": "露米娅：这个数列的通项公式是 $ x_n = 2^{n-1} $。\n\n那么你来求一下前 $ k+1 $ 项中有多少个第一位为 $4$ 吧（比如 $4096$）。\n\n\n输入经过“加密”，\n\n详细输入方式见【输入格式】。", "inputFormat": "一行两个正整数，$ t $ 和 $ k_0 $。\n\n若 $ t = 1 $ 说明实际的 $ k $ 就是 $ k_0 $。\n\n若 $ t = 0 $ 说明实际的 $ k $ 是 $ 10^{k_0} $。", "outputFormat": "一个整数 $ ans $ ，表示有多少个数第一位为 $4$。", "hint": "对于 $ 30\\%$ 的数据， $ k_0 \\leq 10^7, t = 1 $。\n\n对于 $70\\%$ 的数据， $ k_0 \\leq 10^9, t = 1 $。\n\n对于另外 $30\\%$ 的数据， $ k_0 \\leq 233 , t = 0 $。\n\n对于 $100\\%$ 的数据，$ k_0 \\geq 1 $。", "locale": "zh-CN", "translations": {"en": {"title": "Middle School Math Problem", "background": "Cirno: I got it! The answer is $-1 \\ 0$, because Gensokyo has no teleporter!\n\nRumia: I really can’t with you... Fine, let’s do another middle school math problem.\n\nSaying that, Rumia wrote down a sequence:\n\n$ 1 , 2 , 4 , 8 , 16 , 32 , 64 , 128 , \\cdots , 2048 , 4096 , 8192 , 16384 , \\cdots $.", "description": "Rumia: The general term of this sequence is $ x_n = 2^{n-1} $.\n\nNow, find how many numbers among the first $ k+1 $ terms have the first digit $4$ (for example, $4096$).\n\nThe input is “encrypted”. See [Input Format] for details.", "inputFormat": "One line with two positive integers, $ t $ and $ k_0 $.\n\nIf $ t = 1 $, then the actual $ k $ is $ k_0 $.\n\nIf $ t = 0 $, then the actual $ k $ is $ 10^{k_0} $.", "outputFormat": "A single integer $ ans $, representing how many numbers have the first digit $4$.", "hint": "For $ 30\\% $ of the testdata, $ k_0 \\leq 10^7, \\ t = 1 $.\n\nFor $ 70\\% $ of the testdata, $ k_0 \\leq 10^9, \\ t = 1 $.\n\nFor another $ 30\\% $ of the testdata, $ k_0 \\leq 233, \\ t = 0 $.\n\nFor $ 100\\% $ of the testdata, $ k_0 \\geq 1 $.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "中学数学题", "background": "琪露诺：我知道了！答案是 $-1 \\ 0$，因为幻想乡没有传送器！\n\n露米娅：真拿你没办法。。算了，再来一道中学数学题吧\n\n说着，露米娅写下了一个数列\n\n$ 1 , 2 , 4 , 8 , 16 , 32 , 64 , 128 , \\cdots , 2048 , 4096 , 8192 , 16384 , \\cdots $", "description": "露米娅：这个数列的通项公式是 $ x_n = 2^{n-1} $。\n\n那么你来求一下前 $ k+1 $ 项中有多少个第一位为 $4$ 吧（比如 $4096$）。\n\n\n输入经过“加密”，\n\n详细输入方式见【输入格式】。", "inputFormat": "一行两个正整数，$ t $ 和 $ k_0 $。\n\n若 $ t = 1 $ 说明实际的 $ k $ 就是 $ k_0 $。\n\n若 $ t = 0 $ 说明实际的 $ k $ 是 $ 10^{k_0} $。", "outputFormat": "一个整数 $ ans $ ，表示有多少个数第一位为 $4$。", "hint": "对于 $ 30\\%$ 的数据， $ k_0 \\leq 10^7, t = 1 $。\n\n对于 $70\\%$ 的数据， $ k_0 \\leq 10^9, t = 1 $。\n\n对于另外 $30\\%$ 的数据， $ k_0 \\leq 233 , t = 0 $。\n\n对于 $100\\%$ 的数据，$ k_0 \\geq 1 $。", "locale": "zh-CN"}}}
{"pid": "P3923", "type": "P", "difficulty": 7, "samples": [["2\n", "0\n0 1\n1 0\n0 0\n0 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 3000, 1000, 2000, 2000, 1000, 1000, 2000, 1000, 2000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创", "提交答案", "Special Judge", "素数判断,质数,筛法", "进制", "群论", "期望"], "title": "大学数学题", "background": "琪露诺：我知道了！答案一定是1！\n\n露米娅：什么鬼啊（汗），你还是再想想去吧。。我先把最后一道题给你，这是一道大学数学题哦", "description": "露米娅：大妖精想构造一个 $ n $ 元有限域，元素用 $ 0 \\sim n - 1 $ 的整数表示。\n\n\n有限域需要满足以下条件：\n\n\n1. 有加法单位元 $ o $ ，满足对于任意元素 $ a $ ， $ o + a = a + o = a $；\n\n\n2. 对于任意元素 $ a $ ，存在加法逆元 $ a^{-1} $ ，使得 $ a + a^{-1} = a^{-1} + a = o $；\n\n\n3. 有不同于加法单位元 $ o $ 的乘法单位元 $ i $ ，满足对于任意元素 $ a $ ， $ i \\times a = a \\times i = a $；\n\n\n4. 对于任意非加法单位元元素 $ a $ ，存在乘法逆元 $ a^{-1} $ ，使得 $ a \\times a^{-1} = a^{-1} \\times a = i $；\n\n\n5. 对于任意元素 $ x $ , $ y $ ，有加法交换律，即 $ x + y = y + x  $；\n\n\n6. 对于任意元素 $ x $ , $ y $ ，有乘法交换律，即 $ x \\times y = y \\times x  $；\n\n\n7. 对于任意元素 $ x $ , $ y $ , $ z $ ，有加法结合律，即 $ ( x + y ) + z = x + ( y + z ) $；\n\n\n8. 对于任意元素 $ x $ , $ y $ , $ z $ ，有乘法结合律，即 $ ( x \\times y ) \\times z = x \\times ( y \\times z ) $；\n\n\n9. 对于任意元素 $ x $ , $ y $ , $ z $ ，有乘法分配律，即 $ ( x + y ) \\times z = x \\times z + y \\times z $。\n\n\n大妖精当然会做啦，但是他想考考你。\n\n\n在输出中加法单位元  $ o $ 即为 $ 0 $，乘法单位元  $ i $ 即为 $ 1 $。", "inputFormat": "一个正整数 $ n $（$ 2 \\leq n \\leq 350 $）。", "outputFormat": "第一行输出一个整数 $ k $ ，若存在 $ n $ 元有限域则 $ k = 0 $ ，否则 $ k = -1 $。\n\n若 $ k = 0 $ 则：\n\n1. 接下来 $ n $ 行输出一个 $ n $ 元有限域的加法表，第 $ i + 1 $ 行第 $ j + 1 $ 列上的数代表有限域中 $ i + j $ 的运算结果；\n\n2. 接下来 $ n $ 行输出一个 $ n $ 元有限域的乘法表，第 $ i + 1 $ 行第 $ j + 1 $ 列上的数代表有限域中 $ i \\times j $ 的运算结果。\n\n共输出 $ n \\times 2 + 1 $ 行。\n\nupd1: SPJ 非常严格，请不要在行末输出多余空格（答案文件末尾的换行还是会自动忽略的）\n\nupd2: 正解文件比较大，洛谷可能会一直 judging... 如果遇到这种情况请直接提交源代码", "hint": "| 测试点  |  $ n $ 的范围      | 特殊性质|\n| :-------: | :----------: | :-----------------: |\n|1  | $ n = 3 $    | $ n $ 是质数           |\n|2  | $ n = 4 $     | $ n $ 是 $ 2 $ 的整数次方 |\n|3  | $ n = 6 $     |                无            |\n|4  | $ n = 8 $     | $ n $ 是 $ 2 $ 的整数次方 |\n|5  | $ n = 9 $     |                无            |\n|6  | $ n = 19 $  | $ n $ 是质数           |\n|7  | $ n = 89 $   | $ n $ 是质数           |\n|8  | $ n = 181 $ | $ n $ 是质数           |\n|9  | $ n = 233 $ | $ n $ 是质数           |\n|10| $ n = 25 $  | $ n $ 是质数的平方|\n|11| $ n = 121 $ | $ n $ 是质数的平方|\n|12| $ n = 169 $ | $ n $ 是质数的平方|\n|13| $ n = 27 $   |                无            |\n|14| $ n = 143 $ |                无            |\n|15| $ n = 128 $ | $ n $ 是 $ 2 $ 的整数次方 |\n|16| $ n = 81 $   |                无            |\n|17| $ n = 125 $ |                无            |\n|18| $ n = 243 $ |                无            |\n|19| $ n = 256 $ | $ n $ 是 $ 2 $ 的整数次方 |\n|20| $ n = 343 $ |                无            |", "locale": "zh-CN", "translations": {"en": {"title": "University Mathematics Problem", "background": "Cirno: I got it! The answer must be 1!\n\nRumia: What the heck (sweat). You should think again... I will give you the last problem first. This is a university mathematics problem.", "description": "Rumia: The Great Fairy wants to construct a finite field of order $ n $, where the elements are represented by the integers $ 0 \\sim n - 1 $.\n\nA finite field must satisfy the following conditions:\n\n1. There exists an additive identity $ o $, such that for any element $ a $, $ o + a = a + o = a $.\n2. For any element $ a $, there exists an additive inverse $ a^{-1} $, such that $ a + a^{-1} = a^{-1} + a = o $.\n3. There exists a multiplicative identity $ i $ different from the additive identity $ o $, such that for any element $ a $, $ i \\times a = a \\times i = a $.\n4. For any element $ a $ that is not the additive identity, there exists a multiplicative inverse $ a^{-1} $, such that $ a \\times a^{-1} = a^{-1} \\times a = i $.\n5. For any elements $ x $, $ y $, addition is commutative, i.e., $ x + y = y + x $.\n6. For any elements $ x $, $ y $, multiplication is commutative, i.e., $ x \\times y = y \\times x $.\n7. For any elements $ x $, $ y $, $ z $, addition is associative, i.e., $ ( x + y ) + z = x + ( y + z ) $.\n8. For any elements $ x $, $ y $, $ z $, multiplication is associative, i.e., $ ( x \\times y ) \\times z = x \\times ( y \\times z ) $.\n9. For any elements $ x $, $ y $, $ z $, multiplication distributes over addition, i.e., $ ( x + y ) \\times z = x \\times z + y \\times z $.\n\nThe Great Fairy certainly knows how to do it, but she wants to test you.\n\nIn the output, the additive identity $ o $ is $ 0 $, and the multiplicative identity $ i $ is $ 1 $.\n\n# Description", "inputFormat": "A positive integer $ n $ ($ 2 \\leq n \\leq 350 $).", "outputFormat": "On the first line, output an integer $ k $. If a finite field of order $ n $ exists, then $ k = 0 $; otherwise $ k = -1 $.\n\nIf $ k = 0 $, then:\n\n1. Output an $ n $-by-$ n $ addition table of the finite field in the next $ n $ lines. The number in row $ i + 1 $, column $ j + 1 $ represents the result of $ i + j $ in the field.\n2. Output an $ n $-by-$ n $ multiplication table of the finite field in the following $ n $ lines. The number in row $ i + 1 $, column $ j + 1 $ represents the result of $ i \\times j $ in the field.\n\nIn total, output $ n \\times 2 + 1 $ lines.\n\nupd1: The SPJ is very strict. Do not output extra spaces at the ends of lines (the trailing newline at the end of the file will still be ignored).\n\nupd2: The official correct-answer file is large, so Luogu may keep judging... If this happens, please submit the source code directly.", "hint": "| Test point | Range of $ n $ | Special property |\n| :-------: | :----------: | :-----------------: |\n| 1 | $ n = 3 $ | $ n $ is prime |\n| 2 | $ n = 4 $ | $ n $ is an integer power of $ 2 $ |\n| 3 | $ n = 6 $ | None |\n| 4 | $ n = 8 $ | $ n $ is an integer power of $ 2 $ |\n| 5 | $ n = 9 $ | None |\n| 6 | $ n = 19 $ | $ n $ is prime |\n| 7 | $ n = 89 $ | $ n $ is prime |\n| 8 | $ n = 181 $ | $ n $ is prime |\n| 9 | $ n = 233 $ | $ n $ is prime |\n| 10 | $ n = 25 $ | $ n $ is a square of a prime |\n| 11 | $ n = 121 $ | $ n $ is a square of a prime |\n| 12 | $ n = 169 $ | $ n $ is a square of a prime |\n| 13 | $ n = 27 $ | None |\n| 14 | $ n = 143 $ | None |\n| 15 | $ n = 128 $ | $ n $ is an integer power of $ 2 $ |\n| 16 | $ n = 81 $ | None |\n| 17 | $ n = 125 $ | None |\n| 18 | $ n = 243 $ | None |\n| 19 | $ n = 256 $ | $ n $ is an integer power of $ 2 $ |\n| 20 | $ n = 343 $ | None |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "大学数学题", "background": "琪露诺：我知道了！答案一定是1！\n\n露米娅：什么鬼啊（汗），你还是再想想去吧。。我先把最后一道题给你，这是一道大学数学题哦", "description": "露米娅：大妖精想构造一个 $ n $ 元有限域，元素用 $ 0 \\sim n - 1 $ 的整数表示。\n\n\n有限域需要满足以下条件：\n\n\n1. 有加法单位元 $ o $ ，满足对于任意元素 $ a $ ， $ o + a = a + o = a $；\n\n\n2. 对于任意元素 $ a $ ，存在加法逆元 $ a^{-1} $ ，使得 $ a + a^{-1} = a^{-1} + a = o $；\n\n\n3. 有不同于加法单位元 $ o $ 的乘法单位元 $ i $ ，满足对于任意元素 $ a $ ， $ i \\times a = a \\times i = a $；\n\n\n4. 对于任意非加法单位元元素 $ a $ ，存在乘法逆元 $ a^{-1} $ ，使得 $ a \\times a^{-1} = a^{-1} \\times a = i $；\n\n\n5. 对于任意元素 $ x $ , $ y $ ，有加法交换律，即 $ x + y = y + x  $；\n\n\n6. 对于任意元素 $ x $ , $ y $ ，有乘法交换律，即 $ x \\times y = y \\times x  $；\n\n\n7. 对于任意元素 $ x $ , $ y $ , $ z $ ，有加法结合律，即 $ ( x + y ) + z = x + ( y + z ) $；\n\n\n8. 对于任意元素 $ x $ , $ y $ , $ z $ ，有乘法结合律，即 $ ( x \\times y ) \\times z = x \\times ( y \\times z ) $；\n\n\n9. 对于任意元素 $ x $ , $ y $ , $ z $ ，有乘法分配律，即 $ ( x + y ) \\times z = x \\times z + y \\times z $。\n\n\n大妖精当然会做啦，但是他想考考你。\n\n\n在输出中加法单位元  $ o $ 即为 $ 0 $，乘法单位元  $ i $ 即为 $ 1 $。", "inputFormat": "一个正整数 $ n $（$ 2 \\leq n \\leq 350 $）。", "outputFormat": "第一行输出一个整数 $ k $ ，若存在 $ n $ 元有限域则 $ k = 0 $ ，否则 $ k = -1 $。\n\n若 $ k = 0 $ 则：\n\n1. 接下来 $ n $ 行输出一个 $ n $ 元有限域的加法表，第 $ i + 1 $ 行第 $ j + 1 $ 列上的数代表有限域中 $ i + j $ 的运算结果；\n\n2. 接下来 $ n $ 行输出一个 $ n $ 元有限域的乘法表，第 $ i + 1 $ 行第 $ j + 1 $ 列上的数代表有限域中 $ i \\times j $ 的运算结果。\n\n共输出 $ n \\times 2 + 1 $ 行。\n\nupd1: SPJ 非常严格，请不要在行末输出多余空格（答案文件末尾的换行还是会自动忽略的）\n\nupd2: 正解文件比较大，洛谷可能会一直 judging... 如果遇到这种情况请直接提交源代码", "hint": "| 测试点  |  $ n $ 的范围      | 特殊性质|\n| :-------: | :----------: | :-----------------: |\n|1  | $ n = 3 $    | $ n $ 是质数           |\n|2  | $ n = 4 $     | $ n $ 是 $ 2 $ 的整数次方 |\n|3  | $ n = 6 $     |                无            |\n|4  | $ n = 8 $     | $ n $ 是 $ 2 $ 的整数次方 |\n|5  | $ n = 9 $     |                无            |\n|6  | $ n = 19 $  | $ n $ 是质数           |\n|7  | $ n = 89 $   | $ n $ 是质数           |\n|8  | $ n = 181 $ | $ n $ 是质数           |\n|9  | $ n = 233 $ | $ n $ 是质数           |\n|10| $ n = 25 $  | $ n $ 是质数的平方|\n|11| $ n = 121 $ | $ n $ 是质数的平方|\n|12| $ n = 169 $ | $ n $ 是质数的平方|\n|13| $ n = 27 $   |                无            |\n|14| $ n = 143 $ |                无            |\n|15| $ n = 128 $ | $ n $ 是 $ 2 $ 的整数次方 |\n|16| $ n = 81 $   |                无            |\n|17| $ n = 125 $ |                无            |\n|18| $ n = 243 $ |                无            |\n|19| $ n = 256 $ | $ n $ 是 $ 2 $ 的整数次方 |\n|20| $ n = 343 $ |                无            |", "locale": "zh-CN"}}}
{"pid": "P3924", "type": "P", "difficulty": 5, "samples": [["8 2 1\n1 2 3 4 5 6 7 8\n1 3 4\n1 8 2\n", "90\n120"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "洛谷原创", "O2优化", "前缀和", "期望", "洛谷月赛"], "title": "康娜的线段树", "background": "", "description": "小林是个程序媛，不可避免地康娜对这种人类的“魔法”产生了浓厚的兴趣，于是小林开始教她OI。\n\n ![](https://cdn.luogu.com.cn/upload/pic/8043.png) \n\n今天康娜学习了一种叫做线段树的神奇魔法，这种魔法可以维护一段区间的信息，是非常厉害的东西。康娜试着写了一棵维护区间和的线段树。由于她不会打标记，因此所有的区间加操作她都是暴力修改的。具体的代码如下：\n\n```cpp\nstruct Segment_Tree{\n#define lson (o<<1)\n#define rson (o<<1|1)\n    int sumv[N<<2],minv[N<<2];\n    inline void pushup(int o){sumv[o]=sumv[lson]+sumv[rson];}\n    inline void build(int o,int l,int r){\n        if(l==r){sumv[o]=a[l];return;}\n        int mid=(l+r)>>1;\n        build(lson,l,mid);build(rson,mid+1,r);\n        pushup(o);\n    }\n    inline void change(int o,int l,int r,int q,int v){\n        if(l==r){sumv[o]+=v;return;}\n        int mid=(l+r)>>1;\n        if(q<=mid)change(lson,l,mid,q,v);\n        else change(rson,mid+1,r,q,v);\n        pushup(o);\n    }\n}T; \n```\n\n在修改时，她会这么写：\n\n```cpp\nfor(int i=l;i<=r;i++)T.change(1,1,n,i,addv);\n```\n显然，这棵线段树每个节点有一个值，为该节点管辖区间的区间和。\n\n康娜是个爱思考的孩子，于是她突然想到了一个问题：\n\n如果每次在线段树区间加操作做完后，从根节点开始等概率的选择一个子节点进入，直到进入叶子结点为止，将一路经过的节点权值累加，最后能得到的期望值是多少？\n\n康娜每次会给你一个值 $qwq$ ，保证你求出的概率乘上 $qwq$ 是一个整数。\n\n这个问题太简单了，以至于聪明的康娜一下子就秒了。\n\n现在她想问问你，您会不会做这个题呢？\n", "inputFormat": "第一行整数 $n,m,qwq$ 表示线段树维护的原序列的长度，询问次数，分母。\n\n第二行 $n$ 个数，表示原序列。\n\n接下来 $m$ 行，每行三个数 $l,r,x$ 表示对区间$[l,r]$ 加上 $x$\n", "outputFormat": "共 $m$ 行，表示期望的权值和乘上qwq结果。\n", "hint": "对于30%的数据，保证 $1 \\leq n,m \\leq 100$\n\n对于70%的数据，保证 $1 \\leq n,m, \\leq 10^{5}$\n\n对于100%的数据，保证$1 \\leq n,m \\leq 10^6 $\n\n$-1000 \\leq a_i,x \\leq 1000$\n", "locale": "zh-CN", "translations": {"en": {"title": "Kanna's Segment Tree", "background": "", "description": "Kobayashi is a programmer, and naturally Kanna becomes very interested in this human “magic,” so Kobayashi starts teaching her OI.\n\n![](https://cdn.luogu.com.cn/upload/pic/8043.png)\n\nToday Kanna learned a magical structure called a segment tree, which can maintain information over an interval and is very powerful. Kanna tried to write a segment tree that maintains the sum over intervals. Since she doesn’t know how to use lazy propagation, she performs each range add operation by brute-force point updates. The specific code is as follows:\n\n```cpp\nstruct Segment_Tree{\n#define lson (o<<1)\n#define rson (o<<1|1)\n    int sumv[N<<2],minv[N<<2];\n    inline void pushup(int o){sumv[o]=sumv[lson]+sumv[rson];}\n    inline void build(int o,int l,int r){\n        if(l==r){sumv[o]=a[l];return;}\n        int mid=(l+r)>>1;\n        build(lson,l,mid);build(rson,mid+1,r);\n        pushup(o);\n    }\n    inline void change(int o,int l,int r,int q,int v){\n        if(l==r){sumv[o]+=v;return;}\n        int mid=(l+r)>>1;\n        if(q<=mid)change(lson,l,mid,q,v);\n        else change(rson,mid+1,r,q,v);\n        pushup(o);\n    }\n}T; \n```\n\nWhen modifying, she writes:\n\n```cpp\nfor(int i=l;i<=r;i++)T.change(1,1,n,i,addv);\n```\nObviously, each node of this segment tree stores the sum of the interval it governs.\n\nKanna is thoughtful, and she suddenly came up with a question:\n\nAfter each range add operation on the segment tree is completed, starting from the root, at each internal node choose one child with equal probability and continue until reaching a leaf node. Sum the values of all nodes along the path. What is the expected value of this sum?\n\nEach time, Kanna will give you a value $qwq$, and it is guaranteed that the expected value multiplied by $qwq$ is an integer.\n\nThis problem is so easy that clever Kanna solved it in an instant.\n\nNow she wonders, can you solve it too?", "inputFormat": "The first line contains integers $n, m, qwq$, which denote the length of the original sequence, the number of operations, and the denominator used for output.\n\nThe second line contains $n$ integers, the original sequence.\n\nThe next $m$ lines each contain three integers $l, r, x$, meaning add $x$ to the interval $[l, r]$.", "outputFormat": "Output $m$ lines. Each line is the expected path-sum value multiplied by $qwq$.", "hint": "Constraints:\n- For 30% of the testdata, $1 \\leq n, m \\leq 100$.\n- For 70% of the testdata, $1 \\leq n, m \\leq 10^{5}$.\n- For 100% of the testdata, $1 \\leq n, m \\leq 10^{6}$.\n- $-1000 \\leq a_i, x \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "康娜的线段树", "background": "", "description": "小林是个程序媛，不可避免地康娜对这种人类的“魔法”产生了浓厚的兴趣，于是小林开始教她OI。\n\n ![](https://cdn.luogu.com.cn/upload/pic/8043.png) \n\n今天康娜学习了一种叫做线段树的神奇魔法，这种魔法可以维护一段区间的信息，是非常厉害的东西。康娜试着写了一棵维护区间和的线段树。由于她不会打标记，因此所有的区间加操作她都是暴力修改的。具体的代码如下：\n\n```cpp\nstruct Segment_Tree{\n#define lson (o<<1)\n#define rson (o<<1|1)\n    int sumv[N<<2],minv[N<<2];\n    inline void pushup(int o){sumv[o]=sumv[lson]+sumv[rson];}\n    inline void build(int o,int l,int r){\n        if(l==r){sumv[o]=a[l];return;}\n        int mid=(l+r)>>1;\n        build(lson,l,mid);build(rson,mid+1,r);\n        pushup(o);\n    }\n    inline void change(int o,int l,int r,int q,int v){\n        if(l==r){sumv[o]+=v;return;}\n        int mid=(l+r)>>1;\n        if(q<=mid)change(lson,l,mid,q,v);\n        else change(rson,mid+1,r,q,v);\n        pushup(o);\n    }\n}T; \n```\n\n在修改时，她会这么写：\n\n```cpp\nfor(int i=l;i<=r;i++)T.change(1,1,n,i,addv);\n```\n显然，这棵线段树每个节点有一个值，为该节点管辖区间的区间和。\n\n康娜是个爱思考的孩子，于是她突然想到了一个问题：\n\n如果每次在线段树区间加操作做完后，从根节点开始等概率的选择一个子节点进入，直到进入叶子结点为止，将一路经过的节点权值累加，最后能得到的期望值是多少？\n\n康娜每次会给你一个值 $qwq$ ，保证你求出的概率乘上 $qwq$ 是一个整数。\n\n这个问题太简单了，以至于聪明的康娜一下子就秒了。\n\n现在她想问问你，您会不会做这个题呢？\n", "inputFormat": "第一行整数 $n,m,qwq$ 表示线段树维护的原序列的长度，询问次数，分母。\n\n第二行 $n$ 个数，表示原序列。\n\n接下来 $m$ 行，每行三个数 $l,r,x$ 表示对区间$[l,r]$ 加上 $x$\n", "outputFormat": "共 $m$ 行，表示期望的权值和乘上qwq结果。\n", "hint": "对于30%的数据，保证 $1 \\leq n,m \\leq 100$\n\n对于70%的数据，保证 $1 \\leq n,m, \\leq 10^{5}$\n\n对于100%的数据，保证$1 \\leq n,m \\leq 10^6 $\n\n$-1000 \\leq a_i,x \\leq 1000$\n", "locale": "zh-CN"}}}
{"pid": "P3925", "type": "P", "difficulty": 6, "samples": [["5\n5 3\n1 2\n1 5\n4 5\n3 9 10 4 7 \n", "189\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [128000, 128000, 128000, 128000, 128000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["线段树", "树状数组", "洛谷原创", "O2优化", "树链剖分", "洛谷月赛"], "title": "aaa 被​​​​​​​​​​续", "background": "HansBug 持续无聊 ing……", "description": "由于 aaa 没有完成 HansBug 的任务。所以 HansBug 开始计划着如何续 aaa。\n\n现在 HansBug 手里有 $N$ 个 aaa，每个 aaa 有一个码力值。一共存在 $N - 1$ 条连接两个 aaa 的边，故这 $N$ 个 aaa 构成一棵**有根树**，根为 1 号 aaa。\n\n现在 HansBug 想要续了这 $N$ 个 aaa。HansBug 所采用的策略是，对于第 $i$ 个 aaa，先让他和他的各级子 aaa 们~~乖乖♂站好~~成一队，然后依次续掉。\n\n经过长期对于 aaa 码力值的研究，HansBug 发现，**对于每一队 aaa**，设有 $n$ 个，码力值依次为 $v_i$，则续了队伍里的第 $i$ 个 aaa 所能获得的码力值为 $v_1 + v_2 + \\cdots + v_i$。\n\n然而，aaa 之间的关系树相当的复杂，HansBug 的智商早已不够用，于是这个任务就交给了你。不过 HansBug 知道，任何一个 aaa 都不会有超过 5 个的直接子 aaa。\n\nHansBug 想要知道在每次排♂队方法最优的情况下，续了这些 aaa 最多可以获得的码力值，~~事成之后分给你 100000 % 10 点码力值~~。", "inputFormat": "第一行包含一个正整数 $N$，表示 aaa 的个数。\n\n接下来 $N-1$ 行，每行包含两个正整数 $u, v$，代表第 $u$ 个 aaa 和第 $v$ 个 aaa 之间存在从属关系（最高级别的 aaa 编号为 $1$）。\n\n最后一行包含 $N$ 个非负整数，依次代表第 $i$ 个 aaa 的码力值。", "outputFormat": "输出包含一个整数，代表 HansBug 续掉全部的 aaa 之后最多能获得的码力值。\n\n**由于结果较大，所以请对 $\\bm{1000000007}$（$\\bm{{10} ^ 9 + 7}$）取模。**", "hint": "### 样例解释\n\n ![](https://cdn.luogu.com.cn/upload/pic/7980.png) \n\n故续了 5 个 aaa 所得的最大总码力值为：$118 + 9 + 10 + 4 + 48 = 189$。\n\n**对 $\\bm{1000000007}$ 取模后得到答案 $\\bm{189\n}$。**\n\n\n### 数据范围\n\n对于 $30\\%$ 的数据：$1 \\leq N \\leq 3 \\times {10}^3$；\n\n对于 $50\\%$ 的数据：$1 \\leq N \\leq 2 \\times {10}^4$；\n\n对于 $70\\%$ 的数据：$1 \\leq N \\leq {10}^5$；\n\n对于 $100\\%$ 的数据：$1 \\leq N \\leq 5 \\times {10}^5$。\n\n对于每一个 aaa 的码力值 $a_i$，保证 $0 \\leq a_i \\leq {10}^8$。", "locale": "zh-CN", "translations": {"en": {"title": "aaa Gets \"Xu\"-ed", "background": "HansBug keeps being bored...", "description": "Because aaa did not finish HansBug's task, HansBug starts planning how to \"xu\" aaa.\n\nNow HansBug has $N$ aaa, each with a power value. There are $N - 1$ edges connecting pairs of aaa, so these $N$ aaa form a **rooted tree**, rooted at aaa $1$.\n\nHansBug wants to \"xu\" these $N$ aaa. His strategy is: for the $i$-th aaa, first let him and all of his descendant aaa ~~stand obediently ♂~~ in a queue, then \"xu\" them one by one.\n\nAfter long research on aaa power values, HansBug found that, for each such queue of aaa, suppose there are $n$ of them with power values $v_i$; then the power value gained from \"xu\"-ing the $i$-th aaa in the queue is $v_1 + v_2 + \\cdots + v_i$.\n\nHowever, the relationship tree among aaa is quite complex, and HansBug has run out of IQ, so this task is handed over to you. But HansBug does know that no aaa has more than $5$ direct child aaa.\n\nHansBug wants to know, with the optimal queuing method each time, the maximum total power value obtainable after \"xu\"-ing all these aaa, ~~and then give you $100000 \\% 10$ points of power value as a reward~~.", "inputFormat": "The first line contains a positive integer $N$, the number of aaa.\n\nThe next $N - 1$ lines each contain two positive integers $u, v$, indicating that there is a subordinate relationship between the $u$-th aaa and the $v$-th aaa (the highest-level aaa is numbered $1$).\n\nThe last line contains $N$ non-negative integers, where the $i$-th number is the power value of the $i$-th aaa.", "outputFormat": "Output a single integer, the maximum total power value HansBug can obtain after \"xu\"-ing all aaa.\n\nSince the result can be large, take it modulo $\\bm{1000000007}$ ($\\bm{{10} ^ 9 + 7}$).", "hint": "### Sample Explanation\n\n![](https://cdn.luogu.com.cn/upload/pic/7980.png)\n\nTherefore, the maximum total power value from \"xu\"-ing $5$ aaa is $118 + 9 + 10 + 4 + 48 = 189$.\n\nAfter taking modulo $\\bm{1000000007}$, the answer is $\\bm{189}$.\n\n### Constraints\n\nFor $30\\%$ of the testdata: $1 \\leq N \\leq 3 \\times {10}^3$.\n\nFor $50\\%$ of the testdata: $1 \\leq N \\leq 2 \\times {10}^4$.\n\nFor $70\\%$ of the testdata: $1 \\leq N \\leq {10}^5$.\n\nFor $100\\%$ of the testdata: $1 \\leq N \\leq 5 \\times {10}^5$.\n\nFor each aaa's power value $a_i$, it is guaranteed that $0 \\leq a_i \\leq {10}^8$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "aaa 被​​​​​​​​​​续", "background": "HansBug 持续无聊 ing……", "description": "由于 aaa 没有完成 HansBug 的任务。所以 HansBug 开始计划着如何续 aaa。\n\n现在 HansBug 手里有 $N$ 个 aaa，每个 aaa 有一个码力值。一共存在 $N - 1$ 条连接两个 aaa 的边，故这 $N$ 个 aaa 构成一棵**有根树**，根为 1 号 aaa。\n\n现在 HansBug 想要续了这 $N$ 个 aaa。HansBug 所采用的策略是，对于第 $i$ 个 aaa，先让他和他的各级子 aaa 们~~乖乖♂站好~~成一队，然后依次续掉。\n\n经过长期对于 aaa 码力值的研究，HansBug 发现，**对于每一队 aaa**，设有 $n$ 个，码力值依次为 $v_i$，则续了队伍里的第 $i$ 个 aaa 所能获得的码力值为 $v_1 + v_2 + \\cdots + v_i$。\n\n然而，aaa 之间的关系树相当的复杂，HansBug 的智商早已不够用，于是这个任务就交给了你。不过 HansBug 知道，任何一个 aaa 都不会有超过 5 个的直接子 aaa。\n\nHansBug 想要知道在每次排♂队方法最优的情况下，续了这些 aaa 最多可以获得的码力值，~~事成之后分给你 100000 % 10 点码力值~~。", "inputFormat": "第一行包含一个正整数 $N$，表示 aaa 的个数。\n\n接下来 $N-1$ 行，每行包含两个正整数 $u, v$，代表第 $u$ 个 aaa 和第 $v$ 个 aaa 之间存在从属关系（最高级别的 aaa 编号为 $1$）。\n\n最后一行包含 $N$ 个非负整数，依次代表第 $i$ 个 aaa 的码力值。", "outputFormat": "输出包含一个整数，代表 HansBug 续掉全部的 aaa 之后最多能获得的码力值。\n\n**由于结果较大，所以请对 $\\bm{1000000007}$（$\\bm{{10} ^ 9 + 7}$）取模。**", "hint": "### 样例解释\n\n ![](https://cdn.luogu.com.cn/upload/pic/7980.png) \n\n故续了 5 个 aaa 所得的最大总码力值为：$118 + 9 + 10 + 4 + 48 = 189$。\n\n**对 $\\bm{1000000007}$ 取模后得到答案 $\\bm{189\n}$。**\n\n\n### 数据范围\n\n对于 $30\\%$ 的数据：$1 \\leq N \\leq 3 \\times {10}^3$；\n\n对于 $50\\%$ 的数据：$1 \\leq N \\leq 2 \\times {10}^4$；\n\n对于 $70\\%$ 的数据：$1 \\leq N \\leq {10}^5$；\n\n对于 $100\\%$ 的数据：$1 \\leq N \\leq 5 \\times {10}^5$。\n\n对于每一个 aaa 的码力值 $a_i$，保证 $0 \\leq a_i \\leq {10}^8$。", "locale": "zh-CN"}}}
{"pid": "P3926", "type": "P", "difficulty": 2, "samples": [["-10 0 2 1 3 26\n", "1"], ["-10 0 2 1 3 27", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "洛谷原创", "洛谷月赛"], "title": "SAC E#1 - 一道不可做题 Jelly", "background": "SOL君（炉石主播）和SOL菌（完美信息教室讲师）是好朋友。", "description": "SOL 君很喜欢吃蒟蒻果冻，而 SOL 菌也很喜欢蒟蒻果冻。\n\n有一天，他们在一起搓炉石，而 SOL 菌则要拿出蒟蒻果冻招待他的客人。\n\n蒟蒻果冻一般在 $a$ 度下保存在冰箱里。但是刚拿出来的时候太冰了，需要加热。SOL 菌打算用一种神奇的电炉加热蒟蒻果冻。根据观察，它有一个特点：\n\n1. 蒟蒻果冻小于 $c$ 度的时候，每 $p$ 单位时间加热 $1$ 单位温度；\n\n2. 当蒟蒻果冻等于 $c$ 度的时候，需要 $q$ 单位时间解冻（大家都知道，晶体物态变化温度不变……SOL 菌认为果冻属于晶体）；\n\n3. 当蒟蒻果冻解冻完成之后，每 $r$ 单位时间加热 $1$ 单位温度。\n\n\nSOL 想知道，将果冻加热 $x$ 单位时间后时果冻的温度。\n\n温度向下取整，也就是说，如果加热结束时不足 $p$（或 $q$）单位时间，则认为在这最后一小段时间内果冻温度没有任何变化。", "inputFormat": "输入仅包含一行，$6$ 个整数，依次为 $a,c,p,q,r,x$。", "outputFormat": "输出仅包含一个整数：即为所求温度。", "hint": "对于 $30\\%$ 的数据，$|a|, |c| \\leq 200, x \\leq 100$。\n\n对于 $60\\%$ 的数据，$|a|, |c| \\leq 2 \\times 10^9, x \\leq 100$。\n\n对于 $100\\%$ 的数据，$|a|, |c| \\leq 2 \\times 10^9, 1 \\leq x, p, q, r \\leq 10^9$。\n\n数据中可能有 $a = c$，此时算还未解冻的状态。\n\n\n提示：请使用 `long long` 数据类型。", "locale": "zh-CN", "translations": {"en": {"title": "SAC E#1 - An Impossible Problem Jelly", "background": "SOL 君 (Hearthstone streamer) and SOL 菌 (Perfect Information Classroom lecturer) are good friends.", "description": "SOL 君 likes eating konjac jelly, and SOL 菌 also likes konjac jelly.\n\nOne day, they were playing Hearthstone together, and SOL 菌 was going to serve konjac jelly to his guest.\n\nKonjac jelly is usually stored in a refrigerator at $a$ degrees. However, it is too cold right after being taken out and needs to be heated. SOL 菌 plans to heat the konjac jelly with a magical electric stove. According to observation, it has the following behavior:\n\n1. When the jelly is below $c$ degrees, it heats by $1$ degree every $p$ units of time.\n2. When the jelly is exactly $c$ degrees, it needs $q$ units of time to thaw (everyone knows that during a phase change the temperature does not change... SOL 菌 believes jelly is crystalline).\n3. After thawing is complete, it heats by $1$ degree every $r$ units of time.\n\nSOL wants to know the temperature of the jelly after heating for $x$ units of time.\n\nThe temperature is floored. That is, if the heating ends with less than $p$ (or $q$) units of time, then during this final short period the temperature does not change at all.", "inputFormat": "The input contains a single line with $6$ integers: $a, c, p, q, r, x$.", "outputFormat": "Output a single integer: the required temperature.", "hint": "For $30\\%$ of the testdata, $|a|, |c| \\leq 200$, $x \\leq 100$.\n\nFor $60\\%$ of the testdata, $|a|, |c| \\leq 2 \\times 10^9$, $x \\leq 100$.\n\nFor $100\\%$ of the testdata, $|a|, |c| \\leq 2 \\times 10^9$, $1 \\leq x, p, q, r \\leq 10^9$.\n\nThe testdata may have $a = c$, which should be considered as the not-yet-thawed state.\n\nHint: Please use the long long data type.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "SAC E#1 - 一道不可做题 Jelly", "background": "SOL君（炉石主播）和SOL菌（完美信息教室讲师）是好朋友。", "description": "SOL 君很喜欢吃蒟蒻果冻，而 SOL 菌也很喜欢蒟蒻果冻。\n\n有一天，他们在一起搓炉石，而 SOL 菌则要拿出蒟蒻果冻招待他的客人。\n\n蒟蒻果冻一般在 $a$ 度下保存在冰箱里。但是刚拿出来的时候太冰了，需要加热。SOL 菌打算用一种神奇的电炉加热蒟蒻果冻。根据观察，它有一个特点：\n\n1. 蒟蒻果冻小于 $c$ 度的时候，每 $p$ 单位时间加热 $1$ 单位温度；\n\n2. 当蒟蒻果冻等于 $c$ 度的时候，需要 $q$ 单位时间解冻（大家都知道，晶体物态变化温度不变……SOL 菌认为果冻属于晶体）；\n\n3. 当蒟蒻果冻解冻完成之后，每 $r$ 单位时间加热 $1$ 单位温度。\n\n\nSOL 想知道，将果冻加热 $x$ 单位时间后时果冻的温度。\n\n温度向下取整，也就是说，如果加热结束时不足 $p$（或 $q$）单位时间，则认为在这最后一小段时间内果冻温度没有任何变化。", "inputFormat": "输入仅包含一行，$6$ 个整数，依次为 $a,c,p,q,r,x$。", "outputFormat": "输出仅包含一个整数：即为所求温度。", "hint": "对于 $30\\%$ 的数据，$|a|, |c| \\leq 200, x \\leq 100$。\n\n对于 $60\\%$ 的数据，$|a|, |c| \\leq 2 \\times 10^9, x \\leq 100$。\n\n对于 $100\\%$ 的数据，$|a|, |c| \\leq 2 \\times 10^9, 1 \\leq x, p, q, r \\leq 10^9$。\n\n数据中可能有 $a = c$，此时算还未解冻的状态。\n\n\n提示：请使用 `long long` 数据类型。", "locale": "zh-CN"}}}
{"pid": "P3927", "type": "P", "difficulty": 4, "samples": [["10 40", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["洛谷原创", "O2优化", "素数判断,质数,筛法", "进制", "洛谷月赛"], "title": "SAC E#1 - 一道中档题 Factorial", "background": "SOL 君（炉石主播）和 SOL 菌（完美信息教室讲师）是好朋友。", "description": "SOL 君很喜欢阶乘。而 SOL 菌很喜欢研究进制。\n\n这一天，SOL 君跟 SOL 菌炫技，随口算出了 $n$ 的阶乘。\n\nSOL 菌表示不服，立刻就要算这个数在 $k$ 进制表示下末尾 $0$ 的个数。\n\n但是 SOL 菌太菜了于是请你帮忙。", "inputFormat": "每组输入仅包含一行：两个整数 $n,k$。", "outputFormat": "输出一个整数：$n!$ 在 $k$ 进制下后缀 $0$ 的个数。", "hint": "- 对于 $20\\%$ 的数据，$n \\le 1000000, k = 10$\n- 对于另外 $20\\%$ 的数据，$n \\le 20， k \\le 36$\n- 对于 $100\\%$ 的数据，$n \\le 10^{12}，k \\le 10^{12}$\n\n### update\n\n1. 每个测试点只包含一组数据；\n\n2. k 不会为 $1$；\n\n3. 现在 std 没有爆 `long long`；\n\n4. 对数据有问题联系 icy（建议大家不要面向数据编程）。", "locale": "zh-CN", "translations": {"en": {"title": "SAC E#1 - A Medium-Difficulty Problem: Factorial", "background": "SOL 君 (Hearthstone streamer) and SOL 菌 (Perfect Information Classroom instructor) are good friends.", "description": "SOL 君 likes factorials, while SOL 菌 enjoys studying number bases.\n\nOne day, SOL 君 showed off to SOL 菌 by casually computing the factorial of $n$.\n\nSOL 菌 was unconvinced and immediately wanted to compute the number of trailing zeros of this number in base $k$.\n\nHowever, SOL 菌 is not skilled enough, so he asks you for help.", "inputFormat": "Each input contains a single line with two integers $n,k$.", "outputFormat": "Output a single integer: the number of trailing zeros of $n!$ in base $k$.", "hint": "- For $20\\%$ of the testdata, $n \\le 1000000, k = 10$.\n- For another $20\\%$ of the testdata, $n \\le 20， k \\le 36$.\n- For $100\\%$ of the testdata, $n \\le 10^{12}，k \\le 10^{12}$.\n\n### Update\n\n1. Each test point contains only one test case.\n2. $k$ will not be $1$.\n3. Now the std does not overflow `long long`.\n4. If there is any problem with the testdata, contact icy (it is recommended not to code to the data).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "SAC E#1 - 一道中档题 Factorial", "background": "SOL 君（炉石主播）和 SOL 菌（完美信息教室讲师）是好朋友。", "description": "SOL 君很喜欢阶乘。而 SOL 菌很喜欢研究进制。\n\n这一天，SOL 君跟 SOL 菌炫技，随口算出了 $n$ 的阶乘。\n\nSOL 菌表示不服，立刻就要算这个数在 $k$ 进制表示下末尾 $0$ 的个数。\n\n但是 SOL 菌太菜了于是请你帮忙。", "inputFormat": "每组输入仅包含一行：两个整数 $n,k$。", "outputFormat": "输出一个整数：$n!$ 在 $k$ 进制下后缀 $0$ 的个数。", "hint": "- 对于 $20\\%$ 的数据，$n \\le 1000000, k = 10$\n- 对于另外 $20\\%$ 的数据，$n \\le 20， k \\le 36$\n- 对于 $100\\%$ 的数据，$n \\le 10^{12}，k \\le 10^{12}$\n\n### update\n\n1. 每个测试点只包含一组数据；\n\n2. k 不会为 $1$；\n\n3. 现在 std 没有爆 `long long`；\n\n4. 对数据有问题联系 icy（建议大家不要面向数据编程）。", "locale": "zh-CN"}}}
{"pid": "P3928", "type": "P", "difficulty": 6, "samples": [["6\n1 2 3 6 5 4\n5 4 3 7 8 9\n1 2 3 6 5 4\n", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "树状数组", "离散化", "洛谷原创", "O2优化", "洛谷月赛"], "title": "SAC E#1 - 一道简单题 Sequence2", "background": "小强和阿米巴是好朋友。", "description": "小强喜欢数列。有一天，他心血来潮，写下了三个长度均为 $n$ 的数列。\n\n阿米巴也很喜欢数列。但是他只喜欢其中一种，波动数列。\n\n阿米巴把他的喜好告诉了小强。小强便打算找出这三个数列内的最长波动数列。\n\n也就是说，如果我们将三个数列记做 $a_{n,1},a_{n,2},a_{n,3}$，他必须要构造一个二元组序列：$(p_i,q_i)$，使得对于任何 $i>1$ 有：\n\n- $p_i>p_{i-1}$。\n\n- 若 $q_i=0$，$a_{p_i,q_i} \\ge a_{p_{i-1},q_{i-1}}$。\n\n- 若 $q_i=1$，$a_{p_i,q_i} \\le a_{p_{i-1},q_{i-1}}$。\n\n- 若 $q_i=2$，只要保持段内同向即可（就是对于连续的一段 $q_i=2$，要么都有 $a_{p_i,q_i} \\ge a_{p_{i-1},q_{i-1}}$，要么都有 $a_{p_i,q_i} \\le a_{p_{i-1},q_{i-1}}$。\n\n小强希望这个二元组序列尽可能长。\n\n提示：当 $q_i \\not = q_{i-1}$ 时，数列的增减性由 $q_i$ 而非 $q_{i-1}$ 决定。\n\n**清晰版题目描述**\n\n小强拿到一个 $3 \\times n$ 的数组，要在每一列选一个数（或者不选），满足以下条件：\n\n1. 如果在第一行选，那它必须大于等于上一个数。\n\n2. 如果在第二行选，那么必须小于等于上一个数。\n\n3. 如果在第三行选，对于连续的一段在第三行选的数，必须满足方向相同（都小于等于上一个数或者都大于等于上一个数）。", "inputFormat": "输入包含 $4$ 行。\n\n第一行一个数 $n$，表示数列长度。\n\n第 $2,3,4$ 行，每行 $n$ 个整数，分别表示三个数列。", "outputFormat": "输出仅包含一个整数，即最长波动数列的长度。", "hint": "对于 $20\\%$ 的数据，$n \\le 10$，$m \\le 1000$。\n\n对于 $60\\%$ 的数据，$n \\le 1000$，$m \\le 1000$。\n\n对于 $100\\%$ 的数据，$n \\le 10^5$，$m \\le 10^9$。\n\n其中 $m=\\max\\{|a_i|\\}$。\n\n样例解释：\n\n取第三行 $1,2,3$（增），然后取第一行 $6$（增），然后取第三行 $5,4$（减），长度为 $6$。", "locale": "zh-CN", "translations": {"en": {"title": "SAC E#1 - A Simple Problem Sequence2", "background": "Xiao Qiang and Amiba are good friends.", "description": "Xiao Qiang likes sequences. One day, on a whim, he wrote down three sequences, each of length $n$.\n\nAmiba also likes sequences, but he only likes one type, the wave sequence.\n\nAmiba told Xiao Qiang about his preference. Xiao Qiang plans to find the longest wave sequence within these three sequences.\n\nThat is, if we denote the three sequences as $a_{n,1},a_{n,2},a_{n,3}$, he must construct a sequence of ordered pairs $(p_i,q_i)$ such that for any $i>1$:\n\n- $p_i>p_{i-1}$.\n- If $q_i=0$, then $a_{p_i,q_i} \\ge a_{p_{i-1},q_{i-1}}$.\n- If $q_i=1$, then $a_{p_i,q_i} \\le a_{p_{i-1},q_{i-1}}$.\n- If $q_i=2$, it only needs to keep the same direction within a segment (that is, for a contiguous segment with $q_i=2$, either all satisfy $a_{p_i,q_i} \\ge a_{p_{i-1},q_{i-1}}$, or all satisfy $a_{p_i,q_i} \\le a_{p_{i-1},q_{i-1}}$).\n\nXiao Qiang wants this sequence of ordered pairs to be as long as possible.\n\nHint: When $q_i \\not = q_{i-1}$, the monotonicity is determined by $q_i$, not by $q_{i-1}$.\n\n**Clear version of the problem statement**\n\nXiao Qiang gets a $3 \\times n$ array. In each column, choose one number (or choose none), subject to the following conditions:\n\n1. If you choose from the first row, it must be greater than or equal to the previous number.\n2. If you choose from the second row, it must be less than or equal to the previous number.\n3. If you choose from the third row, then for any contiguous segment of numbers chosen from the third row, the directions must be the same (either all are less than or equal to the previous number, or all are greater than or equal to the previous number).", "inputFormat": "The input contains $4$ lines.\n\nThe first line contains an integer $n$, the length of the sequences.\n\nThe $2$nd, $3$rd, and $4$th lines each contain $n$ integers, representing the three sequences, respectively.", "outputFormat": "Output a single integer, the length of the longest wave sequence.", "hint": "Constraints:\n\n- For $20\\%$ of the testdata, $n \\le 10$, $m \\le 1000$.\n- For $60\\%$ of the testdata, $n \\le 1000$, $m \\le 1000$.\n- For $100\\%$ of the testdata, $n \\le 10^5$, $m \\le 10^9$.\n\nHere $m=\\max\\{|a_i|\\}$.\n\nSample explanation:\n\nTake 1, 2, 3 from the third row (increasing), then take 6 from the first row (increasing), then take 5, 4 from the third row (decreasing), for a length of 6.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "SAC E#1 - 一道简单题 Sequence2", "background": "小强和阿米巴是好朋友。", "description": "小强喜欢数列。有一天，他心血来潮，写下了三个长度均为 $n$ 的数列。\n\n阿米巴也很喜欢数列。但是他只喜欢其中一种，波动数列。\n\n阿米巴把他的喜好告诉了小强。小强便打算找出这三个数列内的最长波动数列。\n\n也就是说，如果我们将三个数列记做 $a_{n,1},a_{n,2},a_{n,3}$，他必须要构造一个二元组序列：$(p_i,q_i)$，使得对于任何 $i>1$ 有：\n\n- $p_i>p_{i-1}$。\n\n- 若 $q_i=0$，$a_{p_i,q_i} \\ge a_{p_{i-1},q_{i-1}}$。\n\n- 若 $q_i=1$，$a_{p_i,q_i} \\le a_{p_{i-1},q_{i-1}}$。\n\n- 若 $q_i=2$，只要保持段内同向即可（就是对于连续的一段 $q_i=2$，要么都有 $a_{p_i,q_i} \\ge a_{p_{i-1},q_{i-1}}$，要么都有 $a_{p_i,q_i} \\le a_{p_{i-1},q_{i-1}}$。\n\n小强希望这个二元组序列尽可能长。\n\n提示：当 $q_i \\not = q_{i-1}$ 时，数列的增减性由 $q_i$ 而非 $q_{i-1}$ 决定。\n\n**清晰版题目描述**\n\n小强拿到一个 $3 \\times n$ 的数组，要在每一列选一个数（或者不选），满足以下条件：\n\n1. 如果在第一行选，那它必须大于等于上一个数。\n\n2. 如果在第二行选，那么必须小于等于上一个数。\n\n3. 如果在第三行选，对于连续的一段在第三行选的数，必须满足方向相同（都小于等于上一个数或者都大于等于上一个数）。", "inputFormat": "输入包含 $4$ 行。\n\n第一行一个数 $n$，表示数列长度。\n\n第 $2,3,4$ 行，每行 $n$ 个整数，分别表示三个数列。", "outputFormat": "输出仅包含一个整数，即最长波动数列的长度。", "hint": "对于 $20\\%$ 的数据，$n \\le 10$，$m \\le 1000$。\n\n对于 $60\\%$ 的数据，$n \\le 1000$，$m \\le 1000$。\n\n对于 $100\\%$ 的数据，$n \\le 10^5$，$m \\le 10^9$。\n\n其中 $m=\\max\\{|a_i|\\}$。\n\n样例解释：\n\n取第三行 $1,2,3$（增），然后取第一行 $6$（增），然后取第三行 $5,4$（减），长度为 $6$。", "locale": "zh-CN"}}}
{"pid": "P3929", "type": "P", "difficulty": 4, "samples": [["5\n1 2 3 2 1\n5\n1 2 3 4 5\n", "Yes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "洛谷原创", "洛谷月赛"], "title": "SAC E#1 - 一道神题 Sequence1", "background": "小强和阿米巴是好朋友。", "description": "小强很喜欢数列。有一天，他心血来潮，写下了一个数列。\n\n阿米巴也很喜欢数列。但是他只喜欢其中一种：波动数列。\n\n一个长度为 $n$ 的波动数列满足对于任何 $i\\ (1 \\le i < n)$，均满足以下两个条件的**同一个**：\n\n- $a_{2i-1} \\le a_{2i}$ 且 $a_{2i} \\ge a_{2i+1}$（若存在）。\n- $a_{2i-1} \\ge a_{2i}$ 且 $a_{2i} \\le a_{2i+1}$（若存在）。\n\n阿米巴把他的喜好告诉了小强。小强便打算稍作修改，以让这个数列成为波动数列。他想知道，能否通过仅修改一个数（或不修改），使得原数列变成波动数列。", "inputFormat": "输入包含多组数据。\n\n每组数据包含两行：\n\n- 第一行一个整数 $n$ 表示数列的长度。\n- 接下来一行，$n$ 个整数，表示一个数列。", "outputFormat": "对于每一组输入，输出一行 `Yes` 或 `No`，含义如题目所示。", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，$1\\le n \\le 10$。\n- 对于另外 $30\\%$ 的数据，$1\\le m \\le 1000$。\n- 对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$m \\le 10^9$。\n\n其中 $m = \\max|a_i|$（数列中绝对值的最大值）", "locale": "zh-CN", "translations": {"en": {"title": "SAC E#1 - A Legendary Problem Sequence1", "background": "Xiaoqiang and Amiba are good friends.", "description": "Xiaoqiang really likes sequences. One day, on a whim, he wrote down a sequence.\n\nAmiba also likes sequences, but he only likes one kind: wave sequences.\n\nA wave sequence of length $n$ satisfies, for any $i\\ (1 \\le i < n)$, exactly one of the following two sets of conditions (the same one):\n\n- $a_{2i-1} \\le a_{2i}$ and $a_{2i} \\ge a_{2i+1}$ (if it exists).\n- $a_{2i-1} \\ge a_{2i}$ and $a_{2i} \\le a_{2i+1}$ (if it exists).\n\nAmiba told Xiaoqiang about his preference. Xiaoqiang decided to make a small change to turn the sequence into a wave sequence. He wants to know whether it is possible to make the original sequence a wave sequence by modifying at most one number (or not modifying it).", "inputFormat": "The input contains multiple test cases.\n\nEach test case consists of two lines:\n- The first line contains an integer $n$ denoting the length of the sequence.\n- The second line contains $n$ integers, representing a sequence.", "outputFormat": "For each test case, output one line `Yes` or `No`, as described.", "hint": "### Constraints and Conventions\n\n- For $30\\%$ of the testdata, $1 \\le n \\le 10$.\n- For another $30\\%$ of the testdata, $1 \\le m \\le 1000$.\n- For $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $m \\le 10^9$.\n\nHere $m = \\max|a_i|$ (the maximum absolute value in the sequence).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "SAC E#1 - 一道神题 Sequence1", "background": "小强和阿米巴是好朋友。", "description": "小强很喜欢数列。有一天，他心血来潮，写下了一个数列。\n\n阿米巴也很喜欢数列。但是他只喜欢其中一种：波动数列。\n\n一个长度为 $n$ 的波动数列满足对于任何 $i\\ (1 \\le i < n)$，均满足以下两个条件的**同一个**：\n\n- $a_{2i-1} \\le a_{2i}$ 且 $a_{2i} \\ge a_{2i+1}$（若存在）。\n- $a_{2i-1} \\ge a_{2i}$ 且 $a_{2i} \\le a_{2i+1}$（若存在）。\n\n阿米巴把他的喜好告诉了小强。小强便打算稍作修改，以让这个数列成为波动数列。他想知道，能否通过仅修改一个数（或不修改），使得原数列变成波动数列。", "inputFormat": "输入包含多组数据。\n\n每组数据包含两行：\n\n- 第一行一个整数 $n$ 表示数列的长度。\n- 接下来一行，$n$ 个整数，表示一个数列。", "outputFormat": "对于每一组输入，输出一行 `Yes` 或 `No`，含义如题目所示。", "hint": "### 数据范围及约定\n\n- 对于 $30\\%$ 的数据，$1\\le n \\le 10$。\n- 对于另外 $30\\%$ 的数据，$1\\le m \\le 1000$。\n- 对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$m \\le 10^9$。\n\n其中 $m = \\max|a_i|$（数列中绝对值的最大值）", "locale": "zh-CN"}}}
{"pid": "P3930", "type": "P", "difficulty": 5, "samples": [["8\n...X....\n........\n........\n........\n........\n........\n........\n......O.", "4"], ["8\n......X.\n........\n.O......\n...P.Q.C\n.....B..\n........\n...K....\n........", "7"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["洛谷原创", "O2优化", "广度优先搜索 BFS", "进制", "洛谷月赛", "状压 DP"], "title": "SAC E#1 - 一道大水题 Knight", "background": "毒奶色和 F91 是好朋友。", "description": "他们经常在一起玩一个游戏，不，不是星际争霸，是国际象棋。\n\n毒奶色觉得 F91 是一只鸡。他在一个 $n \\times n$ 的棋盘上用黑色的城堡（车）、骑士（马）、主教（象）、皇后（副）、国王（帅）、士兵（卒）摆了一个阵。\n\n然而 F91 觉得毒奶色是一只鸡。他发起了挑战：他要操纵一个白色骑士，不经过任何一个棋子的攻击范围（F91 可以连续行动，而毒奶色的棋子不会动，除非白骑士进入了对方的攻击范围），并击杀毒奶色的国王（即进入黑国王所在的位置）。\n\n请告诉 F91 他最少需要多少步骤来完成这一项壮举。\n\n\n### 注意：\n\n1. 当 F91 的白骑士走到毒奶色的棋子所在的格子上的时候，会击杀（吃掉）该棋子。这个棋子也就不再对F91的白骑士有威胁了。\n\n2. 如果白骑士开场就在黑子的攻击范围内，则立刻被击杀、F91立刻失败。\n\n3. 即使白骑士在攻击王的瞬间进入了其他棋子攻击范围（即其他棋子“看护”着王所在的格子），依然算F91获胜。\n\n\n### 攻击范围：\n\n\n城堡：横、竖方向所有位置，直到被一个其他棋子阻拦。\n\n```\n..#..\n..#..\n##C##\n..#..\n..#..\n```\n\n骑士：横 $2$ 竖 $1$ 或者横 $1$ 竖 $2$ 的所有位置（最多 $8$ 个，类似日字）。\n\n```\n.#.#.\n#...#\n..K..\n#...#\n.#.#.\n```\n\n主教：斜向（$45 \\degree$）所有位置，直到被一个其他棋子阻拦。\n\n```\n#...#\n.#.#.\n..B..\n.#.#.\n#...#\n```\n\n皇后：城堡和主教的结合体（既能横 / 竖向攻击，也能 $45 \\degree$ 角斜向攻击，直到被其他棋子阻挡）。\n\n```\n#.#.#\n.###.\n##Q##\n.###.\n#.#.#\n```\n\n国王：身边 $8$ 连通位置的 $8$ 个格子。\n\n```\n.....\n.###.\n.#X#.\n.###.\n.....\n```\n\n士兵：左下方 / 右下方（$45 \\degree$）的格子（最多 $2$ 个）。\n\n```\n.....\n.....\n..P..\n.#.#.\n.....\n```\n\n其中字母表示棋子类型，参考输入格式。\n\n`#` 表示可攻击范围。", "inputFormat": "输入包含多组数据。\n\n每一组数据中，第一行一个整数 $n$ 表示棋盘规模。\n\n接下来 $n$ 行，每行一个长度为 $n$ 的字符串。描述棋盘的格局。\n\n其中：\n\n`.` 表示空\n\n`O` 表示白骑士\n\n`C` 表示黑城堡\n\n`K` 表示黑骑士\n\n`B` 表示黑主教\n\n`Q` 表示黑皇后\n\n`X` 表示黑国王\n\n`P` 表示黑士兵", "outputFormat": "对于每一个测试数据，每行输出一个整数，表示 F91 的最小步数。\n\n如果无论 F91 如何行动也无法击杀黑国王，输出 `-1`。", "hint": "**输入最多包含5组数据。**\n\n- 对于 $20\\%$ 的数据，毒奶色只有国王。$n \\le 8$。\n\n- 对于 $30\\%$ 的数据，毒奶色只有国王、骑士。$n \\le 8$。\n\n对于 $60\\%$ 的数据，毒奶色只有国王、骑士、王后。$n \\le 55$。\n\n对于 $100\\%$ 的数据，毒奶色可以有全套 $16$ 颗棋子（$2$ 城堡，$2$ 骑士，$2$ 主教，$1$ 后，$1$ 王，$8$ 兵）。$n \\le 55$。\n\n\n温馨提示：\n\n时间限制可能比想象之中还要更紧一点，请注意实现细节以保证性能。\n\n\n\n样例 $2$ 解释：\n\n一种可行的做法是：\n\n```\n......X.\n.3..6...\n.O5.....\n4.2P.Q.C\n1....B..\n........\n...K....\n........\n```", "locale": "zh-CN", "translations": {"en": {"title": "SAC E#1 - A Very Easy Problem Knight", "background": "Du nai se and F91 are good friends.", "description": "They often play a game together. No, not StarCraft, but chess.\n\nDu nai se thinks F91 is a chicken. He set up a formation on an $n \\times n$ chessboard using black rooks, knights, bishops, a queen, a king, and pawns.\n\nHowever, F91 thinks Du nai se is a chicken. He issues a challenge: he will control a white knight, move without stepping on any square that is within the attack range of any piece (F91 can move continuously, and Du nai se’s pieces do not move, unless the white knight enters a square in their attack range), and capture Du nai se’s king (i.e., land on the square where the black king is).\n\nPlease tell F91 the minimum number of moves needed to accomplish this.\n\nNote:\n1. When F91’s white knight moves onto a square occupied by one of Du nai se’s pieces, it captures that piece. That piece no longer threatens the white knight.\n2. If the white knight starts in the attack range of a black piece, it is captured immediately and F91 loses at once.\n3. Even if the white knight enters the attack range of other pieces at the exact moment it captures the king (i.e., other pieces “guard” the king’s square), F91 still wins.\n\nAttack ranges:\n\nRook: all squares in the horizontal and vertical directions, until blocked by another piece.\n\n```\n..#..\n..#..\n##C##\n..#..\n..#..\n```\n\nKnight: all positions with a horizontal move of 2 and a vertical move of 1, or a horizontal move of 1 and a vertical move of 2 (at most 8 squares, L-shaped).\n\n```\n.#.#.\n#...#\n..K..\n#...#\n.#.#.\n```\n\nBishop: all squares along diagonals ($45^\\circ$), until blocked by another piece.\n\n```\n#...#\n.#.#.\n..B..\n.#.#.\n#...#\n```\n\nQueen: the combination of rook and bishop (it can attack horizontally/vertically and along $45^\\circ$ diagonals, until blocked by other pieces).\n\n```\n#.#.#\n.###.\n##Q##\n.###.\n#.#.#\n```\n\nKing: the 8 neighboring squares in the 8-connected neighborhood.\n\n```\n.....\n.###.\n.#X#.\n.###.\n.....\n```\n\nPawn: the squares down-left / down-right ($45^\\circ$) (at most 2 squares).\n\n```\n.....\n.....\n..P..\n.#.#.\n.....\n```\n\nThe letters indicate piece types; see the input format. `#` indicates squares in the attack range.", "inputFormat": "The input contains multiple sets of testdata.\n\nFor each set, the first line contains an integer $n$ indicating the board size.\n\nThe next $n$ lines each contain a string of length $n$ describing the board.\n\nWhere:\n- `.` indicates an empty square.\n- `O` indicates the white knight.\n- `C` indicates a black rook.\n- `K` indicates a black knight.\n- `B` indicates a black bishop.\n- `Q` indicates a black queen.\n- `X` indicates a black king.\n- `P` indicates a black pawn.", "outputFormat": "For each set of testdata, output one integer per line, indicating the minimum number of moves F91 needs.\n\nIf it is impossible for F91 to capture the black king no matter how he moves, output `-1`.", "hint": "The input contains at most 5 sets of testdata.\n\n- For 20% of the testdata, Du nai se has only the king. $n \\le 8$.\n- For 30% of the testdata, Du nai se has only the king and knights. $n \\le 8$.\n- For 60% of the testdata, Du nai se has only the king, knights, and the queen. $n \\le 50$.\n- For 100% of the testdata, Du nai se may have the full set of 16 pieces (2 rooks, 2 knights, 2 bishops, 1 queen, 1 king, 8 pawns). $n \\le 50$.\n\nKind reminder: the time limit might be tighter than you think. Please pay attention to implementation details to ensure performance.\n\nExplanation for sample 2:\n\nOne feasible sequence is:\n\n```\n......X.\n.3..6...\n.O5.....\n4.2P.Q.C\n1....B..\n........\n...K....\n........\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "SAC E#1 - 一道大水题 Knight", "background": "毒奶色和 F91 是好朋友。", "description": "他们经常在一起玩一个游戏，不，不是星际争霸，是国际象棋。\n\n毒奶色觉得 F91 是一只鸡。他在一个 $n \\times n$ 的棋盘上用黑色的城堡（车）、骑士（马）、主教（象）、皇后（副）、国王（帅）、士兵（卒）摆了一个阵。\n\n然而 F91 觉得毒奶色是一只鸡。他发起了挑战：他要操纵一个白色骑士，不经过任何一个棋子的攻击范围（F91 可以连续行动，而毒奶色的棋子不会动，除非白骑士进入了对方的攻击范围），并击杀毒奶色的国王（即进入黑国王所在的位置）。\n\n请告诉 F91 他最少需要多少步骤来完成这一项壮举。\n\n\n### 注意：\n\n1. 当 F91 的白骑士走到毒奶色的棋子所在的格子上的时候，会击杀（吃掉）该棋子。这个棋子也就不再对F91的白骑士有威胁了。\n\n2. 如果白骑士开场就在黑子的攻击范围内，则立刻被击杀、F91立刻失败。\n\n3. 即使白骑士在攻击王的瞬间进入了其他棋子攻击范围（即其他棋子“看护”着王所在的格子），依然算F91获胜。\n\n\n### 攻击范围：\n\n\n城堡：横、竖方向所有位置，直到被一个其他棋子阻拦。\n\n```\n..#..\n..#..\n##C##\n..#..\n..#..\n```\n\n骑士：横 $2$ 竖 $1$ 或者横 $1$ 竖 $2$ 的所有位置（最多 $8$ 个，类似日字）。\n\n```\n.#.#.\n#...#\n..K..\n#...#\n.#.#.\n```\n\n主教：斜向（$45 \\degree$）所有位置，直到被一个其他棋子阻拦。\n\n```\n#...#\n.#.#.\n..B..\n.#.#.\n#...#\n```\n\n皇后：城堡和主教的结合体（既能横 / 竖向攻击，也能 $45 \\degree$ 角斜向攻击，直到被其他棋子阻挡）。\n\n```\n#.#.#\n.###.\n##Q##\n.###.\n#.#.#\n```\n\n国王：身边 $8$ 连通位置的 $8$ 个格子。\n\n```\n.....\n.###.\n.#X#.\n.###.\n.....\n```\n\n士兵：左下方 / 右下方（$45 \\degree$）的格子（最多 $2$ 个）。\n\n```\n.....\n.....\n..P..\n.#.#.\n.....\n```\n\n其中字母表示棋子类型，参考输入格式。\n\n`#` 表示可攻击范围。", "inputFormat": "输入包含多组数据。\n\n每一组数据中，第一行一个整数 $n$ 表示棋盘规模。\n\n接下来 $n$ 行，每行一个长度为 $n$ 的字符串。描述棋盘的格局。\n\n其中：\n\n`.` 表示空\n\n`O` 表示白骑士\n\n`C` 表示黑城堡\n\n`K` 表示黑骑士\n\n`B` 表示黑主教\n\n`Q` 表示黑皇后\n\n`X` 表示黑国王\n\n`P` 表示黑士兵", "outputFormat": "对于每一个测试数据，每行输出一个整数，表示 F91 的最小步数。\n\n如果无论 F91 如何行动也无法击杀黑国王，输出 `-1`。", "hint": "**输入最多包含5组数据。**\n\n- 对于 $20\\%$ 的数据，毒奶色只有国王。$n \\le 8$。\n\n- 对于 $30\\%$ 的数据，毒奶色只有国王、骑士。$n \\le 8$。\n\n对于 $60\\%$ 的数据，毒奶色只有国王、骑士、王后。$n \\le 55$。\n\n对于 $100\\%$ 的数据，毒奶色可以有全套 $16$ 颗棋子（$2$ 城堡，$2$ 骑士，$2$ 主教，$1$ 后，$1$ 王，$8$ 兵）。$n \\le 55$。\n\n\n温馨提示：\n\n时间限制可能比想象之中还要更紧一点，请注意实现细节以保证性能。\n\n\n\n样例 $2$ 解释：\n\n一种可行的做法是：\n\n```\n......X.\n.3..6...\n.O5.....\n4.2P.Q.C\n1....B..\n........\n...K....\n........\n```", "locale": "zh-CN"}}}
{"pid": "P3931", "type": "P", "difficulty": 4, "samples": [["4 1\n1 2 1 \n1 3 1\n1 4 1", "3"], ["4 1\n1 2 3\n2 3 1\n3 4 2", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "网络流", "洛谷原创", "树形 DP", "最小割", "洛谷月赛"], "title": "SAC E#1 - 一道难题 Tree", "background": "冴月麟和魏潇承是好朋友。", "description": "冴月麟为了守护幻想乡，而制造了幻想乡的倒影，将真实的幻想乡封印了。任何人都无法进入真实的幻想乡了，但是她给前来救她的魏潇承留了一个线索。\n\n她设置了一棵树（有根）。树的每一条边上具有割掉该边的代价。\n\n魏潇承需要计算出割开这棵树的最小代价，这就是冴月麟和魏潇承约定的小秘密。\n\n帮帮魏潇承吧。\n\n\n注：所谓割开一棵有根树，就是删除若干条边，使得任何叶子节点和根节点不连通。", "inputFormat": "输入第一行两个整数 $n,\\mathrm{root}$ 分别表示树的节点个数和树根。\n\n接下来 $n-1$ 行每行三个整数 $a,b,c$，表示 $a,b$ 之间有一条代价为 $c$ 的边。", "outputFormat": "输出包含一行，一个整数，表示所求最小代价。", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$n\\le 10$；\n- 对于 $50\\%$ 的数据，$n \\le 1000$；\n- 对于 $100\\%$ 的数据，$2\\le n \\le 100000$，且边权是不大于 $10^6$ 的正整数。", "locale": "zh-CN", "translations": {"en": {"title": "SAC E#1 - A Hard Problem Tree", "background": "冴月麟 and 魏潇承 are good friends.", "description": "To protect Gensokyo, 冴月麟 created a reflection of Gensokyo and sealed away the real Gensokyo. No one can enter the real Gensokyo anymore, but she left a clue for 魏潇承 who came to save her.\n\nShe set up a rooted tree. Each edge has a cost to cut it.\n\n魏潇承 needs to compute the minimum cost to cut this tree. This is the little secret agreed upon by 冴月麟 and 魏潇承.\n\nPlease help 魏潇承.\n\nNote: To “cut open” a rooted tree means to delete some edges so that no leaf node is connected to the root.", "inputFormat": "The first line contains two integers $n, \\mathrm{root}$, representing the number of nodes in the tree and the root.\n\nEach of the next $n-1$ lines contains three integers $a, b, c$, indicating there is an edge between $a$ and $b$ with cost $c$.", "outputFormat": "Output one line containing a single integer, the minimum cost.", "hint": "### Constraints and Agreements\n\n- For $20\\%$ of the testdata, $n \\le 10$.\n- For $50\\%$ of the testdata, $n \\le 1000$.\n- For $100\\%$ of the testdata, $2 \\le n \\le 100000$, and edge weights are non-negative integers not exceeding $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "SAC E#1 - 一道难题 Tree", "background": "冴月麟和魏潇承是好朋友。", "description": "冴月麟为了守护幻想乡，而制造了幻想乡的倒影，将真实的幻想乡封印了。任何人都无法进入真实的幻想乡了，但是她给前来救她的魏潇承留了一个线索。\n\n她设置了一棵树（有根）。树的每一条边上具有割掉该边的代价。\n\n魏潇承需要计算出割开这棵树的最小代价，这就是冴月麟和魏潇承约定的小秘密。\n\n帮帮魏潇承吧。\n\n\n注：所谓割开一棵有根树，就是删除若干条边，使得任何叶子节点和根节点不连通。", "inputFormat": "输入第一行两个整数 $n,\\mathrm{root}$ 分别表示树的节点个数和树根。\n\n接下来 $n-1$ 行每行三个整数 $a,b,c$，表示 $a,b$ 之间有一条代价为 $c$ 的边。", "outputFormat": "输出包含一行，一个整数，表示所求最小代价。", "hint": "### 数据范围及约定\n\n- 对于 $20\\%$ 的数据，$n\\le 10$；\n- 对于 $50\\%$ 的数据，$n \\le 1000$；\n- 对于 $100\\%$ 的数据，$2\\le n \\le 100000$，且边权是不大于 $10^6$ 的正整数。", "locale": "zh-CN"}}}
{"pid": "P3932", "type": "P", "difficulty": 5, "samples": [["5 5\n2 3 4 5\n1 2 3 4 5\n1 1 5\n3 1 5\n2 3 3\n3 3 3\n1 5 5\n", "125\n72\n9\n0\n70"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["洛谷原创", "O2优化", "前缀和", "分块", "洛谷月赛"], "title": "浮游大陆的68号岛", "background": "浮游大陆的 $68$ 号岛，位于浮游大陆的边境地带。平时很少有人造访。\n\n岛上被浓厚的森林覆盖。\n\n![](https://cdn.luogu.com.cn/upload/pic/9282.png) \n\n在这座边境地区不起眼的浮游岛上，建立着神秘的”兵器“管理仓库——妖精仓库。\n", "description": "妖精仓库里生活着黄金妖精们，她们过着快乐，却随时准备着迎接死亡的生活。\n\n换用更高尚的说法，是随时准备着为这个无药可救的世界献身。\n\n\n然而孩子们的生活却总是无忧无虑的，幼体的黄金妖精们过着天真烂漫的生活，自然也无暇考虑什么拯救世界之类的重任。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qxdahsft.png)\n\n有一天小妖精们又在做游戏。这个游戏是这样的。\n\n妖精仓库的储物点可以看做在一个数轴上。每一个储物点会有一些东西，同时他们之间存在距离。\n\n每次他们会选出一个小妖精，然后剩下的人找到区间$[l,r]$储物点的所有东西，清点完毕之后问她，把这个区间内所有储物点的东西运到另外一个仓库的代价是多少？\n\n比如储物点$i$有$x$个东西，要运到储物点$j$，代价为\n\n\n$$x \\times \\mathrm{dist}( i , j )$$\n\n\ndist就是仓库间的距离。\n\n当然啦，由于小妖精们不会算很大的数字，因此您的答案需要对19260817取模。\n\n![](https://cdn.luogu.com.cn/upload/pic/9294.png)\n", "inputFormat": "第一行两个数表示$n,m$\n\n第二行$n-1$个数，第$i$个数表示第$i$个储物点与第$i+1$个储物点的距离\n\n第三行$n$个数，表示每个储物点的东西个数\n\n之后$m$行每行三个数`x l r`\n\n表示查询要把区间$[l,r]$储物点的物品全部运到储物点x的花费\n", "outputFormat": "对于每个询问输出一个数表示答案\n", "hint": "对于30%的数据，$n , m \\le 1000$\n\n对于另外20%的数据，所有储物点间的距离都为1\n\n对于另外20%的数据，所有储物点的物品数都为1\n\n对于100%的数据 ,$ n , m \\le 200000 ; a_i , b_i <= 2\\cdot 10^9$\n", "locale": "zh-CN", "translations": {"en": {"title": "No. 68 Island of the Floating Continent", "background": "Island No. $68$ of the Floating Continent is located in the borderlands of the Floating Continent. It is rarely visited.\n\nThe island is covered by dense forest.\n\n![](https://cdn.luogu.com.cn/upload/pic/9282.png)\n\nOn this unremarkable floating island at the border, there is a mysterious “weapon” management depot — the Fairy Warehouse.", "description": "Golden fairies live in the Fairy Warehouse. They live happily, yet are always ready to face death.\n\nPut more nobly, they are always ready to sacrifice themselves for this hopeless world.\n\nHowever, children always live carefree lives. The young golden fairies live innocently and naturally have no time to think about heavy duties like saving the world.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qxdahsft.png)\n\nOne day, the little fairies are playing a game again. The game goes like this.\n\nThe storage points of the Fairy Warehouse can be regarded as lying on a number line. Each storage point has some items, and there are distances between them.\n\nEach time they pick one little fairy, and the others collect all the items at the storage points in the interval $[l, r]$. After counting, they ask her: what is the cost to move all items from storage points in this interval to another storage point?\n\nFor example, if storage point $i$ has $x$ items and you want to move them to storage point $j$, the cost is\n$$x \\times \\mathrm{dist}( i , j ).$$\n\nHere, $\\mathrm{dist}$ is the distance between storage points.\n\nOf course, since the little fairies cannot handle very large numbers, your answer needs to be taken modulo $19260817$.\n\n![](https://cdn.luogu.com.cn/upload/pic/9294.png)", "inputFormat": "The first line contains two integers $n, m$.\n\nThe second line contains $n-1$ integers. The $i$-th number is the distance between storage points $i$ and $i+1$.\n\nThe third line contains $n$ integers, giving the number of items at each storage point.\n\nThen follow $m$ lines, each containing three integers `x l r`.\n\nEach query asks for the cost to move all items from storage points in the interval $[l, r]$ to storage point $x$.", "outputFormat": "For each query, output one integer: the answer.", "hint": "- For $30\\%$ of the testdata, $n, m \\le 1000$.\n- For another $20\\%$ of the testdata, all distances between storage points are $1$.\n- For another $20\\%$ of the testdata, the number of items at every storage point is $1$.\n- For $100\\%$ of the testdata, $n, m \\le 200000$; all distances and item counts are at most $2 \\cdot 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "浮游大陆的68号岛", "background": "浮游大陆的 $68$ 号岛，位于浮游大陆的边境地带。平时很少有人造访。\n\n岛上被浓厚的森林覆盖。\n\n![](https://cdn.luogu.com.cn/upload/pic/9282.png) \n\n在这座边境地区不起眼的浮游岛上，建立着神秘的”兵器“管理仓库——妖精仓库。\n", "description": "妖精仓库里生活着黄金妖精们，她们过着快乐，却随时准备着迎接死亡的生活。\n\n换用更高尚的说法，是随时准备着为这个无药可救的世界献身。\n\n\n然而孩子们的生活却总是无忧无虑的，幼体的黄金妖精们过着天真烂漫的生活，自然也无暇考虑什么拯救世界之类的重任。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qxdahsft.png)\n\n有一天小妖精们又在做游戏。这个游戏是这样的。\n\n妖精仓库的储物点可以看做在一个数轴上。每一个储物点会有一些东西，同时他们之间存在距离。\n\n每次他们会选出一个小妖精，然后剩下的人找到区间$[l,r]$储物点的所有东西，清点完毕之后问她，把这个区间内所有储物点的东西运到另外一个仓库的代价是多少？\n\n比如储物点$i$有$x$个东西，要运到储物点$j$，代价为\n\n\n$$x \\times \\mathrm{dist}( i , j )$$\n\n\ndist就是仓库间的距离。\n\n当然啦，由于小妖精们不会算很大的数字，因此您的答案需要对19260817取模。\n\n![](https://cdn.luogu.com.cn/upload/pic/9294.png)\n", "inputFormat": "第一行两个数表示$n,m$\n\n第二行$n-1$个数，第$i$个数表示第$i$个储物点与第$i+1$个储物点的距离\n\n第三行$n$个数，表示每个储物点的东西个数\n\n之后$m$行每行三个数`x l r`\n\n表示查询要把区间$[l,r]$储物点的物品全部运到储物点x的花费\n", "outputFormat": "对于每个询问输出一个数表示答案\n", "hint": "对于30%的数据，$n , m \\le 1000$\n\n对于另外20%的数据，所有储物点间的距离都为1\n\n对于另外20%的数据，所有储物点的物品数都为1\n\n对于100%的数据 ,$ n , m \\le 200000 ; a_i , b_i <= 2\\cdot 10^9$\n", "locale": "zh-CN"}}}
{"pid": "P3933", "type": "P", "difficulty": 5, "samples": [["4 4\n1 12 6 11\n11 4 2 14\n10 1 9 20\n4 17 13 10", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 2000, 2000, 3000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "二分", "O2优化", "向量", "洛谷月赛"], "title": "Chtholly Nota Seniorious", "background": "经查，本题是原题，非常抱歉。\n\n大样例下发链接: https://pan.baidu.com/s/1nuVpRS1 密码: sfxg\n\n**こんなにも、たくさんの幸せをあの人に分けてもらった**\n\n**だから、きっと**\n\n**今の、私は**\n\n**谁が何と言おうと**\n\n##世界一、幸せな女の子だ\n\n![](https://cdn.luogu.com.cn/upload/pic/9193.png)\n", "description": "——“假如……我是说假如喔。\n\n万一我再过五天就会死，你能不能对我温柔一点？”\n\n巨大的六号兽五天后将袭击浮游大陆。\n\n无数次计算得到的残酷数据表明，只有圣剑瑟尼欧尼斯的适格精灵——珂朵莉·诺塔·瑟尼欧尼斯(Chtholly Nota Seniorious)开启妖精乡之门，才可以以生命为代价守住浮游岛。\n\n ![](https://cdn.luogu.com.cn/upload/pic/9228.png) \n\n“至少，我也希望自己不用消失，也想让别人记住。我也想留下羁绊啊。”\n\n留给妖精少女珂朵莉的时间似乎已经不多了。\n\n ![](https://cdn.luogu.com.cn/upload/pic/9229.png) \n\n年轻的二等技官，妖精仓库的管理员，世界上最后一个人类——威廉·克梅**修**，数百年前曾经是一名准勇者，掌握着成为一名勇者所需要的所有知识。\n\n大战在即，调整圣剑的状态成为了一项重要的任务。\n\n```cpp\n瑟尼欧里斯（セニオリス）\n圣剑的其中之一，在现存的遗迹兵装中，拥有最强大的力量。\n拥有非常特殊的资质，只有极少一部分的人才能使用。\n由四十一个护符组成。能将所有事物包含不死者都回归「死亡」。\n```\n威廉需要调整圣剑的状态，因此他将瑟尼欧尼斯拆分护符，组成了一个$n$行$m$列的矩阵。\n\n每一个护符都有自己的魔力值。现在为了测试圣剑，你需要将这些护符分成 A,B两部分。\n\n要求如下：\n\n1.  圣剑的所有护符，恰好都属于两部分中的一部分。\n\n2.  每个部分内部的方块之间，可以通过上下左右相互到达，而且每个内部的方块之间互相到达，最多允许拐一次弯。\n\n例如\n```cpp\nＡＡＡＡＡ　　ＡＡＡＡＡ　　ＡＡＡＡＡ\nＡＡＢＡＡ　　ＢａＡＡＡ　　ＡＡＡＢＢ\nＡＢＢＢＡ　　ＢＢＡＡＡ　　ＡＡＡＢＢ\nＡＡＢＡＡ　　ＢａＡＡＡ　　ＡＢＢＢＢ\nＡＡＡＡＡ　　ＡＡＡＡＡ　　ＢＢＢＢＢ\n\n　　(1)　　　　　(2)　　　　　(3)　　　　　　\n```\n其中(1)(2)是不允许的分法，(3)是允许的分法。在(2)中，a属于A区域，这两个a元素之间互相到达，没有办法最多只拐一次弯。\n\n现在要问，所有合法的分法中，A区域的极差与B区域的极差 中间较大的一个的 **最小值** 是多少？\n\n好心而可爱的在一旁默默观察奈芙莲悄悄地告诉你，极差就是区域内最大值减去最小值。\n\n ![](https://cdn.luogu.com.cn/upload/pic/9230.png) \n\n夜晚的风吹拂着，68号岛上的景色竟与地上的森林无异。转念又想，黄金妖精本身就是与森林之中出现，成长，消亡的神秘存在啊。\n\n时间不早了，早上训练中落败的珂朵莉即将回来了。您要尽快和威廉一起调整好圣剑，千万不能迟哟。\n", "inputFormat": "第一行两个自然数$n,m$\n\n接下来$n$行，每行$m$个自然数$A_{i,j}$表示权值\n", "outputFormat": "一个整数表示答案。\n", "hint": "样例解释\n\n```cpp\n1  12 6        11\n11 4  2        14\n10 1  9        20\n4        17 13 10\n```\n分法不唯一，如图是一种合法的分法。左边部分极差12-1=11，右边一块极差20-10=10，所以答案取这两个中较大者11。没有别的分法，可以使答案更小。\n\n\n**数据范围与约定**\n\n\n测试点　　|n　　　　|m　　　　\n-|-|-\n#1-2      |$\\le 10$ |$\\le 10$\n#3-4      |1        |$\\le 2000$\n#5-7      |$\\le 200$|$\\le 200$\n#8-10     |$\\le 2000$|$\\le 2000$\n\n对于所有的权值$1\\le A_{i,j} \\le 10^9$\n\n\n《末日时在做什么？有没有空？可以来拯救吗？》\n\n![](https://cdn.luogu.com.cn/upload/pic/9235.png)\n", "locale": "zh-CN", "translations": {"en": {"title": "Chtholly Nota Seniorious", "background": "Upon verification, this problem already exists; we apologize.\n\nLarge sample download link: https://pan.baidu.com/s/1nuVpRS1 Password: sfxg\n\n—I received so much happiness from that person.  \n—Therefore, surely.  \n—The me of now,  \n—No matter what anyone says,  \n—I am the happiest girl in the world.\n\n![](https://cdn.luogu.com.cn/upload/pic/9193.png)", "description": "—“If... I mean, hypothetically.  \nIf I were to die in five days, could you treat me a little more gently?”\n\nThe colossal Beast No. 6 will attack the Floating Continent in five days.\n\nCountless calculations yield cruel data showing that only the qualified spirit of the sacred sword Seniorious — Chtholly Nota Seniorious — by opening the Gate of Fairyland, can defend the floating island at the cost of her life.\n\n![](https://cdn.luogu.com.cn/upload/pic/9228.png)\n\n“At the very least, I also hope I will not disappear, and I want to be remembered by others. I want to leave bonds behind, too.”\n\nIt seems the fairy girl Chtholly has little time left.\n\n![](https://cdn.luogu.com.cn/upload/pic/9229.png)\n\nA young second-class technical officer, administrator of the Fairy Warehouse, and the last human in the world — 威廉·克梅**修** (Willem Kmetsch). Centuries ago, he was a prospective hero and mastered all the knowledge required to become one.\n\nWith a great battle imminent, adjusting the sacred sword’s state has become an important task.\n\n```cpp\n瑟尼欧里斯（セニオリス）\n圣剑的其中之一，在现存的遗迹兵装中，拥有最强大的力量。\n拥有非常特殊的资质，只有极少一部分的人才能使用。\n由四十一个护符组成。能将所有事物包含不死者都回归「死亡」。\n```\nWillem needs to adjust the sword’s state, so he split Seniorious into talismans that form an $n$-by-$m$ matrix.\n\nEach talisman has its own magic value. To test the sword, you need to divide these talismans into two parts, A and B.\n\nRequirements:\n1. Every talisman of the sacred sword belongs to exactly one of the two parts.\n2. Within each part, the cells must be connected via up, down, left, and right; moreover, for any two cells within the same part, there must be a path between them that uses at most one turn.\n\nFor example:\n```cpp\nＡＡＡＡＡ　　ＡＡＡＡＡ　　ＡＡＡＡＡ\nＡＡＢＡＡ　　ＢａＡＡＡ　　ＡＡＡＢＢ\nＡＢＢＢＡ　　ＢＢＡＡＡ　　ＡＡＡＢＢ\nＡＡＢＡＡ　　ＢａＡＡＡ　　ＡＢＢＢＢ\nＡＡＡＡＡ　　ＡＡＡＡＡ　　ＢＢＢＢＢ\n\n　　(1)　　　　　(2)　　　　　(3)　　　　　　\n```\nAmong these, (1) and (2) are not allowed, while (3) is allowed. In (2), the cells marked a belong to region A; there is no way for those two a cells to reach each other using at most one turn.\n\nAmong all valid partitions, what is the minimum possible value of the larger one between the range of region A and the range of region B?\n\nKind and cute Nephren, quietly observing from the side, softly tells you that the range is defined as the maximum value in the region minus the minimum value.\n\n![](https://cdn.luogu.com.cn/upload/pic/9230.png)\n\nThe night wind blows; the scenery on Island No. 68 looks no different from the forests on the ground. Then again, golden fairies themselves are mysterious beings that appear, grow, and fade within the forest.\n\nTime is running late. Chtholly, who lost the morning training, will return soon. You must quickly adjust the sacred sword with Willem. Do not be late.", "inputFormat": "The first line contains two natural numbers $n, m$.\n\nThe next $n$ lines each contain $m$ natural numbers $A_{i,j}$ representing the weights.", "outputFormat": "Output a single integer: the answer.", "hint": "Explanation of the sample:\n\n```cpp\n1  12 6        11\n11 4  2        14\n10 1  9        20\n4        17 13 10\n```\nThe partition is not unique; the figure shows one valid partition. The left part has range $12 - 1 = 11$, and the right part has range $20 - 10 = 10$, so the answer takes the larger of the two, $11$. There is no other partition that can make the answer smaller.\n\nConstraints and Conventions\n\n测试点　　|$n$　　　　|$m$　　　　\n-|-|-\n#1-2      |$\\le 10$ |$\\le 10$\n#3-4      |1        |$\\le 2000$\n#5-7      |$\\le 200$|$\\le 200$\n#8-10     |$\\le 2000$|$\\le 2000$\n\nFor all weights, $1 \\le A_{i,j} \\le 10^9$.\n\n“What Are You Doing at the End of the World? Are You Busy? Will You Save Us?”\n\n![](https://cdn.luogu.com.cn/upload/pic/9235.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Chtholly Nota Seniorious", "background": "经查，本题是原题，非常抱歉。\n\n大样例下发链接: https://pan.baidu.com/s/1nuVpRS1 密码: sfxg\n\n**こんなにも、たくさんの幸せをあの人に分けてもらった**\n\n**だから、きっと**\n\n**今の、私は**\n\n**谁が何と言おうと**\n\n##世界一、幸せな女の子だ\n\n![](https://cdn.luogu.com.cn/upload/pic/9193.png)\n", "description": "——“假如……我是说假如喔。\n\n万一我再过五天就会死，你能不能对我温柔一点？”\n\n巨大的六号兽五天后将袭击浮游大陆。\n\n无数次计算得到的残酷数据表明，只有圣剑瑟尼欧尼斯的适格精灵——珂朵莉·诺塔·瑟尼欧尼斯(Chtholly Nota Seniorious)开启妖精乡之门，才可以以生命为代价守住浮游岛。\n\n ![](https://cdn.luogu.com.cn/upload/pic/9228.png) \n\n“至少，我也希望自己不用消失，也想让别人记住。我也想留下羁绊啊。”\n\n留给妖精少女珂朵莉的时间似乎已经不多了。\n\n ![](https://cdn.luogu.com.cn/upload/pic/9229.png) \n\n年轻的二等技官，妖精仓库的管理员，世界上最后一个人类——威廉·克梅**修**，数百年前曾经是一名准勇者，掌握着成为一名勇者所需要的所有知识。\n\n大战在即，调整圣剑的状态成为了一项重要的任务。\n\n```cpp\n瑟尼欧里斯（セニオリス）\n圣剑的其中之一，在现存的遗迹兵装中，拥有最强大的力量。\n拥有非常特殊的资质，只有极少一部分的人才能使用。\n由四十一个护符组成。能将所有事物包含不死者都回归「死亡」。\n```\n威廉需要调整圣剑的状态，因此他将瑟尼欧尼斯拆分护符，组成了一个$n$行$m$列的矩阵。\n\n每一个护符都有自己的魔力值。现在为了测试圣剑，你需要将这些护符分成 A,B两部分。\n\n要求如下：\n\n1.  圣剑的所有护符，恰好都属于两部分中的一部分。\n\n2.  每个部分内部的方块之间，可以通过上下左右相互到达，而且每个内部的方块之间互相到达，最多允许拐一次弯。\n\n例如\n```cpp\nＡＡＡＡＡ　　ＡＡＡＡＡ　　ＡＡＡＡＡ\nＡＡＢＡＡ　　ＢａＡＡＡ　　ＡＡＡＢＢ\nＡＢＢＢＡ　　ＢＢＡＡＡ　　ＡＡＡＢＢ\nＡＡＢＡＡ　　ＢａＡＡＡ　　ＡＢＢＢＢ\nＡＡＡＡＡ　　ＡＡＡＡＡ　　ＢＢＢＢＢ\n\n　　(1)　　　　　(2)　　　　　(3)　　　　　　\n```\n其中(1)(2)是不允许的分法，(3)是允许的分法。在(2)中，a属于A区域，这两个a元素之间互相到达，没有办法最多只拐一次弯。\n\n现在要问，所有合法的分法中，A区域的极差与B区域的极差 中间较大的一个的 **最小值** 是多少？\n\n好心而可爱的在一旁默默观察奈芙莲悄悄地告诉你，极差就是区域内最大值减去最小值。\n\n ![](https://cdn.luogu.com.cn/upload/pic/9230.png) \n\n夜晚的风吹拂着，68号岛上的景色竟与地上的森林无异。转念又想，黄金妖精本身就是与森林之中出现，成长，消亡的神秘存在啊。\n\n时间不早了，早上训练中落败的珂朵莉即将回来了。您要尽快和威廉一起调整好圣剑，千万不能迟哟。\n", "inputFormat": "第一行两个自然数$n,m$\n\n接下来$n$行，每行$m$个自然数$A_{i,j}$表示权值\n", "outputFormat": "一个整数表示答案。\n", "hint": "样例解释\n\n```cpp\n1  12 6        11\n11 4  2        14\n10 1  9        20\n4        17 13 10\n```\n分法不唯一，如图是一种合法的分法。左边部分极差12-1=11，右边一块极差20-10=10，所以答案取这两个中较大者11。没有别的分法，可以使答案更小。\n\n\n**数据范围与约定**\n\n\n测试点　　|n　　　　|m　　　　\n-|-|-\n#1-2      |$\\le 10$ |$\\le 10$\n#3-4      |1        |$\\le 2000$\n#5-7      |$\\le 200$|$\\le 200$\n#8-10     |$\\le 2000$|$\\le 2000$\n\n对于所有的权值$1\\le A_{i,j} \\le 10^9$\n\n\n《末日时在做什么？有没有空？可以来拯救吗？》\n\n![](https://cdn.luogu.com.cn/upload/pic/9235.png)\n", "locale": "zh-CN"}}}
{"pid": "P3934", "type": "P", "difficulty": 6, "samples": [["6 4\n1 2 3 4 5 6\n2 1 2 10000007\n2 2 3 5\n1 1 4 1\n2 2 4 10\n", "1\n3\n1"], ["5 5\n2 3 3 3 3\n1 1 1 530739835\n2 1 1 8356089\n2 1 4 5496738\n1 1 2 66050181\n1 2 4 138625417\n", "4306230\n697527\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "线段树", "树状数组", "数论", "O2优化", "枚举", "洛谷月赛", "Ynoi", "欧拉降幂"], "title": "[Ynoi Easy Round 2016] 炸脖龙 I", "background": "备餐时光，软泞蜥獾\n\n草地中钻孔，日晷下打转\n\n波若歌鹦苟延残喘，迷途绿龟嚎哮迷茫\n\n“当心炸脖龙，我的孩子！\n\n那锋爪利颚，能挠钩撕咬！\n\n注意秋布秋布鸟，你需回避，\n\n那暴躁冒烟恶怪大毛怪！”\n\n手持宝剑鸣真理之语：寻觅强敌豪壮永不息——于噹噹树下稍事休憩，伫立良久，深陷思绪。\n\n当思绪纷乱杂绪之际，炸脖龙双目如烔炬，从阴暗密林奔跃闯出，一路悲鸣低吟时啭啼！\n\n一，二！一，二！一刺再刺，真理之语将敌斩成糜！\n\n取其首级，置之死地，\n\n伴随胜利，驰马归疾。\n\n“真当是你把怪龙斩于马下？\n\n奋勇吾儿！\n\n来我怀里！奔走相告！衣锦还乡！\n\n父喜不自禁窃鸣得意\n\n波若歌鹦苟延残喘，\n\n迷途绿龟嚎哮迷茫，\n\n备餐时光，软泞蜥獾\n\n草地中钻孔，日晷下打转\n\n波若歌鹦苟延残喘，\n\n迷途绿龟嚎哮迷茫”\n\n——《炸脖龙之诗》\n\n![](https://cdn.luogu.com.cn/upload/pic/21111.png)\n\n我喊了出来...却不成人话\n\n只能，像在水中一边融化一边下沉的方糖一样...\n\n失去自己的轮廓...一直沉向最低处\n\n想要爬上去的子午\n\n维持自己是自己的连续体...\n\n溶解的渐渐七零八落的意识...\n\n失去了用来挣扎的双手\n\n失去了用来挣扎的双臂\n\n向下，\n\n向下，\n\n一直沉下去\n\n向着意识的底层\n\n沉陷下去的自我...\n\n逐渐消失的世界...\n\n我看到了世界\n\n失落的...世界...\n\n![](https://cdn.luogu.com.cn/upload/pic/21112.png)\n\n```plain\n\n   回归天空的话我就可以成为      了\n\n  开什么玩笑，你才不是什么      ！\n\n  吵死了！吵死了！我是      ！而且生来就是！\n\n就是因为这个家伙我才失去      的资格的！\n\n 呜呜呜，由岐姐姐，由岐姐姐！\n\n  ...怎么会...由岐姐...\n\n 卓司！你这家伙！\n\n        吵死了吵死了！像你这样的普通人懂些什么！\n\n   由岐的血慢慢在冰凉的水泥地上扩散开来\n\n   抱在怀里的      在渐渐地流出来        本应成为      而出生\n\n的我的被      妨碍了！\n\n不出生的话我就没法拯救是这个世界！\n\n            所以预言者说能当世界回归天空的此处就是尽头\n\n   只要      回归天空的话！\n\n 我有这么可怕吗？\n\n              因为我是要对一切生物下达审判的存在！\n\n       因为哥哥是凡人呢\n\n    凡人与天才\n\n                            救世主\n\n   世界\n\n                    救世主\n\n                回天之门\n\n  要死的是你！\n\n            我不会死               不会死       诅咒你\n\n       要死的是羽咲\n\n         只要羽咲死了\n\n                  间宫              皆\n\n                                    守           由\n\n                         岐\n\n                                间宫羽咲\n\n                          可能性\n\n                                    和镜\n\n                     终\n\n                   终之空\n\n                     空\n\n```\n\n![](https://cdn.luogu.com.cn/upload/pic/21113.png)\n\n一个婴儿出生了\n\n谁的？\n\n不知道\n\n\n虽然不知道...\n但确实有一个婴儿出生了\n\n嗯...那个婴儿在哭...\n\n呜嘎，呜嘎，地哭着...\n\n听到这个哭声大家都笑了\n\n大家都在为婴儿祝福\n\n母亲也是...\n\n父亲也是...\n\n并且其他人也是...\n\n为那个婴儿的出生...\n\n衷心祝福\n\n世界充满着生命的祝福\n\n但是\n\n但不是这样的\n\n在那里\n\n我\n\n我一个人在那里恐惧着\n\n非常恐惧...\n\n要说为什么的话...\n\n因为那是在对世界进行诅咒\n\n没错...\n\n他在诅咒着那个世界，那个刚出生的婴儿\n\n诅咒着自己的出生\n\n我\n\n我当场全身僵硬\n\n在大家的笑容之中\n\n在祝福之中\n\n独自一人...\n\n我啊...\n\n我摇摇晃晃地...\n\n接近那个婴儿\n\n然后想要让那个婴儿停止哭泣\n\n我想着必须要那样做才行\n\n为什么呢？\n\n我自己也不明白...\n\n那是\n\n那是，自从出生以来\n\n就悲惨地活到今天的我能做到的\n\n我能做到的\n\n唯一的\n\n唯一的赎罪啊。\n\n![](https://cdn.luogu.com.cn/upload/pic/21114.png)\n\n让我在这里了结了你吧…间宫卓司\n\n这里是终之空的下面吧…这不刚好吗\n\n跟我们的终结很相称不是吗…\n\n这里，是只对你而言的，终结的天空…\n\n这里就是终焉之地…\n\n![](https://cdn.luogu.com.cn/upload/pic/21115.png)\n\n“不行！绝对不行！”\n\n…为什么…跟过来了…\n\n![](https://cdn.luogu.com.cn/upload/pic/21116.png)\n\n预定…调和吗…\n\n原来如此…看来不管怎样对于你来说…我都已经毫无任何价值了对吧…\n\n竟然被这家伙打倒了…真是没办法呐…\n\n这也是现实吗…\n\n那就接受吧…\n\n![](https://cdn.luogu.com.cn/upload/pic/21117.png)\n\n不知为何，我好像看到了在夜空中挺立的向日葵…\n\n只有一瞬间…\n\n那株向日葵…\n\n好像在某个地方…\n\n向日葵…\n\n跟羽咲一起…\n\n是啊…\n\n我是哥哥啊…\n\n要是…能再多当当她的哥哥就好了……\n\n![](https://cdn.luogu.com.cn/upload/pic/21119.png)\n\n咦……\n\n刚才的…\n\n那个是…那片风景…\n\n是吗…那片风景…\n\n我也是知道的啊…\n\n在坡道途中的向日葵…\n\n蔚蓝的天空和向日葵。\n\n漂浮着大大的云朵…\n\n羽咲戴着大大的帽子…\n\n然后跟我走在一起…\n\n走着走着…\n\n为了…\n\n两人一起…\n\n爬上那个坡道…\n\n因为…那个坡道的前面有很漂亮的景色…", "description": "您正在打 galgame，然后您觉得这个 gal 不知所云，于是您弃坑了，开始写数据结构题：\n\n给一个长为 $n$ 的序列，$m$ 次操作，每次操作：\n\n1. 区间 $[l,r]$ 加 $x$；\n2. 对于区间 $[l,r]$，查询：\n\n$$a[l]^{a[l+1]^{a[l+2]^{\\dots ^{a[r]}}}} \\mod p$$", "inputFormat": "第一行两个整数 $n,m$ 表示序列长度和操作数。\n\n接下来一行，$n$ 个整数表示这个序列。\n\n接下来 $m$ 行，可能是以下两种操作之一：\n\n- $1\\ l\\ r\\ x$ 表示区间 $[l,r]$ 加上 $x$；\n- $2\\ l\\ r\\ p$ 表示对区间 $[l,r]$ 进行一次查询，模数为 $p$。", "outputFormat": "对于每个询问，输出一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于100%的数据，$n , m \\le 500000$ , 序列中每个数在$[1,2\\cdot 10^9]$内，$p \\le 2 \\cdot 10^7 $, 每次加上的数在$[0,2\\cdot 10^9]$内\n\n共10组数据\n", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi Easy Round 2016] Jabberwock I", "background": "It was supper time, and the slithy skunks\nDid bore through turf and gyre ’neath the gnomon’s mark;\nThe Borogove parrot wheezed in fits, the lost green turtles\nHowled in their blind dark.\n\n“Beware the Jabberwock, my child!\nThe jaws that bite, the claws that catch!\nBeware the Jubjub bird, and shun\nThe frumious Bandersnatch!”\n\nHe took his vorpal sword in hand: long time\nThe manxome foe he sought—\nSo rested he by the Tumtum tree,\nAnd stood awhile in thought.\n\nAnd, as in uffish thought he stood,\nThe Jabberwock, with eyes of flame,\nCame whiffling through the tulgey wood,\nAnd burbled as it came!\n\nOne, two! One, two! And through and through\nThe vorpal blade went snicker-snack!\nHe left it dead, and with its head\nHe went galumphing back.\n\n“And hast thou slain the Jabberwock?\nCome to my arms, my beamish boy!\nO frabjous day! Callooh! Callay!”\nHe chortled in his joy.\n\nIt was supper time, and the slithy skunks\nDid bore through turf and gyre ’neath the gnomon’s mark;\nThe Borogove parrot wheezed in fits, the lost green turtles\nHowled in their blind dark.\n\n— “The Poem of the Jabberwock.”\n\n![](https://cdn.luogu.com.cn/upload/pic/21111.png)\n\nI shouted... but it was not human speech.\nOnly, like a sugar cube that melts as it sinks in water...\nLosing the outline of myself... sinking all the way to the very bottom.\nThe meridian that wants to climb up,\nMaintaining the continuum that I am myself...\nA dissolving, gradually scattered consciousness...\nI lost the hands used to struggle.\nI lost the arms used to struggle.\nDown,\ndown,\nkeep sinking,\ntoward the bottom layer of consciousness.\nThe self that sinks...\nA world that is gradually disappearing...\nI saw the world,\na lost... world.\n\n![](https://cdn.luogu.com.cn/upload/pic/21112.png)\n\n```plain\n\n   回归天空的话我就可以成为      了\n\n  开什么玩笑，你才不是什么      ！\n\n  吵死了！吵死了！我是      ！而且生来就是！\n\n就是因为这个家伙我才失去      的资格的！\n\n 呜呜呜，由岐姐姐，由岐姐姐！\n\n  ...怎么会...由岐姐...\n\n 卓司！你这家伙！\n\n        吵死了吵死了！像你这样的普通人懂些什么！\n\n   由岐的血慢慢在冰凉的水泥地上扩散开来\n\n   抱在怀里的      在渐渐地流出来        本应成为      而出生\n\n的我的被      妨碍了！\n\n不出生的话我就没法拯救是这个世界！\n\n            所以预言者说能当世界回归天空的此处就是尽头\n\n   只要      回归天空的话！\n\n 我有这么可怕吗？\n\n              因为我是要对一切生物下达审判的存在！\n\n       因为哥哥是凡人呢\n\n    凡人与天才\n\n                            救世主\n\n   世界\n\n                    救世主\n\n                回天之门\n\n  要死的是你！\n\n            我不会死               不会死       诅咒你\n\n       要死的是羽咲\n\n         只要羽咲死了\n\n                  间宫              皆\n\n                                    守           由\n\n                         岐\n\n                                间宫羽咲\n\n                          可能性\n\n                                    和镜\n\n                     终\n\n                   终之空\n\n                     空\n\n```\n\n![](https://cdn.luogu.com.cn/upload/pic/21113.png)\n\nA baby was born.\nWhose?\nI don’t know.\n\nAlthough I don’t know...\nA baby was indeed born.\n\nMm... that baby is crying...\nWaa, waa, crying...\n\nHearing that crying, everyone smiled.\nEveryone was blessing the baby.\nThe mother too...\nThe father too...\nAnd the others too...\nFor the baby’s birth...\nBlessing from the heart.\n\nThe world was full of the blessing of life.\n\nBut,\nit was not like that.\nThere,\nI—\nI alone was afraid there.\nVery afraid...\n\nWhy, you ask...\nBecause that was placing a curse upon the world.\n\nThat’s right...\nHe was cursing that world, that newborn baby,\nCursing his own birth.\n\nI—\nMy whole body froze on the spot.\nAmid everyone’s smiles,\nAmid the blessings,\nAll alone...\n\nI...\nI staggered...\nAnd approached that baby,\nThen tried to make that baby stop crying.\n\nI thought I had to do that.\nWhy?\nI myself did not understand...\n\nThat was—\nThat was the one thing,\nFor me, who has lived in misery since birth until today,\nThat I could do.\nWhat I could do—\nThe only,\nThe only atonement.\n\n![](https://cdn.luogu.com.cn/upload/pic/21114.png)\n\nLet me end you here... Mamiya Takuji.\nThis is below the “End Sky”... isn’t that just right.\nIt suits our ending, doesn’t it...\nHere is a sky of ending that exists only for you...\nThis is the land of the end...\n\n![](https://cdn.luogu.com.cn/upload/pic/21115.png)\n\n“No! Absolutely not!”\n...Why... did you follow me...\n\n![](https://cdn.luogu.com.cn/upload/pic/21116.png)\n\nPredestination... harmony, is it...\nI see... it looks like no matter what, to you... I’m already of no value at all, right...\nTo think I was defeated by this guy... how helpless...\nThis too is reality...\nThen I’ll accept it...\n\n![](https://cdn.luogu.com.cn/upload/pic/21117.png)\n\nFor some reason, I seemed to see a sunflower standing in the night sky...\nOnly for a moment...\nThat sunflower...\nAs if somewhere...\nA sunflower...\nTogether with Usaki...\nYeah...\nI am the older brother...\nIf only... I could be her brother a little longer...\n\n![](https://cdn.luogu.com.cn/upload/pic/21119.png)\n\nHuh...\nJust now...\nThat... that landscape...\nIs that so... that landscape...\nI know it too...\nThe sunflower halfway up the slope...\nAn azure sky and sunflowers.\nBig clouds floating...\nUsaki wearing a big hat...\nAnd walking together with me...\nWalking and walking...\nIn order to...\nThe two of us together...\nClimb that slope...\nBecause... there is a very beautiful view beyond that slope...", "description": "You are playing a galgame, but you find this gal confusing and give up. So you start writing a data structure problem instead.\n\nGiven a sequence of length $n$, there are $m$ operations. Each operation is one of the following:\n1. Add $x$ to the range $[l, r]$.\n2. For the range $[l, r]$, query\n$$a[l]^{a[l+1]^{a[l+2]^{\\dots ^{a[r]}}}} \\mod p.$$", "inputFormat": "The first line contains two integers $n, m$, the length of the sequence and the number of operations.\n\nThe second line contains $n$ integers, the sequence.\n\nEach of the next $m$ lines is one of the following two operations.\n- $1\\ l\\ r\\ x$: add $x$ to the range $[l, r]$.\n- $2\\ l\\ r\\ p$: query the range $[l, r]$ with modulus $p$.", "outputFormat": "For each query, output one number as the answer.", "hint": "Idea: nzhtl1477, Solution: nzhtl1477, Code: nzhtl1477, Data: nzhtl1477.\n\nConstraints:\n- For 100% of the testdata, $n, m \\le 500000$, each number in the sequence is in $[1, 2 \\cdot 10^9]$, $p \\le 2 \\cdot 10^7$, and each added $x$ is in $[0, 2 \\cdot 10^9]$.\n\nThere are 10 sets of testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi Easy Round 2016] 炸脖龙 I", "background": "备餐时光，软泞蜥獾\n\n草地中钻孔，日晷下打转\n\n波若歌鹦苟延残喘，迷途绿龟嚎哮迷茫\n\n“当心炸脖龙，我的孩子！\n\n那锋爪利颚，能挠钩撕咬！\n\n注意秋布秋布鸟，你需回避，\n\n那暴躁冒烟恶怪大毛怪！”\n\n手持宝剑鸣真理之语：寻觅强敌豪壮永不息——于噹噹树下稍事休憩，伫立良久，深陷思绪。\n\n当思绪纷乱杂绪之际，炸脖龙双目如烔炬，从阴暗密林奔跃闯出，一路悲鸣低吟时啭啼！\n\n一，二！一，二！一刺再刺，真理之语将敌斩成糜！\n\n取其首级，置之死地，\n\n伴随胜利，驰马归疾。\n\n“真当是你把怪龙斩于马下？\n\n奋勇吾儿！\n\n来我怀里！奔走相告！衣锦还乡！\n\n父喜不自禁窃鸣得意\n\n波若歌鹦苟延残喘，\n\n迷途绿龟嚎哮迷茫，\n\n备餐时光，软泞蜥獾\n\n草地中钻孔，日晷下打转\n\n波若歌鹦苟延残喘，\n\n迷途绿龟嚎哮迷茫”\n\n——《炸脖龙之诗》\n\n![](https://cdn.luogu.com.cn/upload/pic/21111.png)\n\n我喊了出来...却不成人话\n\n只能，像在水中一边融化一边下沉的方糖一样...\n\n失去自己的轮廓...一直沉向最低处\n\n想要爬上去的子午\n\n维持自己是自己的连续体...\n\n溶解的渐渐七零八落的意识...\n\n失去了用来挣扎的双手\n\n失去了用来挣扎的双臂\n\n向下，\n\n向下，\n\n一直沉下去\n\n向着意识的底层\n\n沉陷下去的自我...\n\n逐渐消失的世界...\n\n我看到了世界\n\n失落的...世界...\n\n![](https://cdn.luogu.com.cn/upload/pic/21112.png)\n\n```plain\n\n   回归天空的话我就可以成为      了\n\n  开什么玩笑，你才不是什么      ！\n\n  吵死了！吵死了！我是      ！而且生来就是！\n\n就是因为这个家伙我才失去      的资格的！\n\n 呜呜呜，由岐姐姐，由岐姐姐！\n\n  ...怎么会...由岐姐...\n\n 卓司！你这家伙！\n\n        吵死了吵死了！像你这样的普通人懂些什么！\n\n   由岐的血慢慢在冰凉的水泥地上扩散开来\n\n   抱在怀里的      在渐渐地流出来        本应成为      而出生\n\n的我的被      妨碍了！\n\n不出生的话我就没法拯救是这个世界！\n\n            所以预言者说能当世界回归天空的此处就是尽头\n\n   只要      回归天空的话！\n\n 我有这么可怕吗？\n\n              因为我是要对一切生物下达审判的存在！\n\n       因为哥哥是凡人呢\n\n    凡人与天才\n\n                            救世主\n\n   世界\n\n                    救世主\n\n                回天之门\n\n  要死的是你！\n\n            我不会死               不会死       诅咒你\n\n       要死的是羽咲\n\n         只要羽咲死了\n\n                  间宫              皆\n\n                                    守           由\n\n                         岐\n\n                                间宫羽咲\n\n                          可能性\n\n                                    和镜\n\n                     终\n\n                   终之空\n\n                     空\n\n```\n\n![](https://cdn.luogu.com.cn/upload/pic/21113.png)\n\n一个婴儿出生了\n\n谁的？\n\n不知道\n\n\n虽然不知道...\n但确实有一个婴儿出生了\n\n嗯...那个婴儿在哭...\n\n呜嘎，呜嘎，地哭着...\n\n听到这个哭声大家都笑了\n\n大家都在为婴儿祝福\n\n母亲也是...\n\n父亲也是...\n\n并且其他人也是...\n\n为那个婴儿的出生...\n\n衷心祝福\n\n世界充满着生命的祝福\n\n但是\n\n但不是这样的\n\n在那里\n\n我\n\n我一个人在那里恐惧着\n\n非常恐惧...\n\n要说为什么的话...\n\n因为那是在对世界进行诅咒\n\n没错...\n\n他在诅咒着那个世界，那个刚出生的婴儿\n\n诅咒着自己的出生\n\n我\n\n我当场全身僵硬\n\n在大家的笑容之中\n\n在祝福之中\n\n独自一人...\n\n我啊...\n\n我摇摇晃晃地...\n\n接近那个婴儿\n\n然后想要让那个婴儿停止哭泣\n\n我想着必须要那样做才行\n\n为什么呢？\n\n我自己也不明白...\n\n那是\n\n那是，自从出生以来\n\n就悲惨地活到今天的我能做到的\n\n我能做到的\n\n唯一的\n\n唯一的赎罪啊。\n\n![](https://cdn.luogu.com.cn/upload/pic/21114.png)\n\n让我在这里了结了你吧…间宫卓司\n\n这里是终之空的下面吧…这不刚好吗\n\n跟我们的终结很相称不是吗…\n\n这里，是只对你而言的，终结的天空…\n\n这里就是终焉之地…\n\n![](https://cdn.luogu.com.cn/upload/pic/21115.png)\n\n“不行！绝对不行！”\n\n…为什么…跟过来了…\n\n![](https://cdn.luogu.com.cn/upload/pic/21116.png)\n\n预定…调和吗…\n\n原来如此…看来不管怎样对于你来说…我都已经毫无任何价值了对吧…\n\n竟然被这家伙打倒了…真是没办法呐…\n\n这也是现实吗…\n\n那就接受吧…\n\n![](https://cdn.luogu.com.cn/upload/pic/21117.png)\n\n不知为何，我好像看到了在夜空中挺立的向日葵…\n\n只有一瞬间…\n\n那株向日葵…\n\n好像在某个地方…\n\n向日葵…\n\n跟羽咲一起…\n\n是啊…\n\n我是哥哥啊…\n\n要是…能再多当当她的哥哥就好了……\n\n![](https://cdn.luogu.com.cn/upload/pic/21119.png)\n\n咦……\n\n刚才的…\n\n那个是…那片风景…\n\n是吗…那片风景…\n\n我也是知道的啊…\n\n在坡道途中的向日葵…\n\n蔚蓝的天空和向日葵。\n\n漂浮着大大的云朵…\n\n羽咲戴着大大的帽子…\n\n然后跟我走在一起…\n\n走着走着…\n\n为了…\n\n两人一起…\n\n爬上那个坡道…\n\n因为…那个坡道的前面有很漂亮的景色…", "description": "您正在打 galgame，然后您觉得这个 gal 不知所云，于是您弃坑了，开始写数据结构题：\n\n给一个长为 $n$ 的序列，$m$ 次操作，每次操作：\n\n1. 区间 $[l,r]$ 加 $x$；\n2. 对于区间 $[l,r]$，查询：\n\n$$a[l]^{a[l+1]^{a[l+2]^{\\dots ^{a[r]}}}} \\mod p$$", "inputFormat": "第一行两个整数 $n,m$ 表示序列长度和操作数。\n\n接下来一行，$n$ 个整数表示这个序列。\n\n接下来 $m$ 行，可能是以下两种操作之一：\n\n- $1\\ l\\ r\\ x$ 表示区间 $[l,r]$ 加上 $x$；\n- $2\\ l\\ r\\ p$ 表示对区间 $[l,r]$ 进行一次查询，模数为 $p$。", "outputFormat": "对于每个询问，输出一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于100%的数据，$n , m \\le 500000$ , 序列中每个数在$[1,2\\cdot 10^9]$内，$p \\le 2 \\cdot 10^7 $, 每次加上的数在$[0,2\\cdot 10^9]$内\n\n共10组数据\n", "locale": "zh-CN"}}}
{"pid": "P3935", "type": "P", "difficulty": 5, "samples": [["2 4", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "O2优化", "整除分块"], "title": "Calculating", "background": null, "description": "若 $x$ 分解质因数结果为 $x=p_1^{k_1}p_2^{k_2}\\cdots p_n^{k_n}$，令 $f(x)=(k_1+1)(k_2+1)\\cdots (k_n+1)$，求 $\\sum_{i=l}^rf(i)$ 对 $998\\,244\\,353$ 取模的结果。", "inputFormat": "输入只有一行两个整数，分别表示 $l$ 和 $r$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n| 测试点编号 | $l$ | $r$ | $r-l$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $1\\le l\\le 10$ | $1\\le r\\le 10$ | $r-l=0$ |\n| $4\\sim 7$ | $1\\le l\\le 50$ | $1\\le r\\le 50$ |$r-l=0$ |\n| $8\\sim 10$ | $1\\le l\\le 100$ | $1\\le r\\le 100$ |$r-l<50$ |\n| $11\\sim 16$ | $1\\le l\\le 500$ | $1\\le r\\le 500$ | 无特殊限制 |\n| $17\\sim 25$ | $1\\le l \\le 10^3$ | $1\\le r \\le 10^3$ | 无特殊限制 |\n| $26\\sim 30$ | $1\\le l \\le 5\\times 10^3$ | $1\\le r \\le 5\\times 10^3$ | $r-l<100$ |\n| $31\\sim 40$ | $1\\le l \\le 10^4$ | $1\\le r \\le 10^4$ |无特殊限制  |\n| $41\\sim 60$ | $1\\le l \\le 10^7$ | $1\\le r \\le 10^7$ | 无特殊限制 |\n| $61\\sim 70$ | $1\\le l \\le 10^9$ | $1\\le r \\le 10^9$ | 无特殊限制 |\n| $71\\sim 90$ | $1\\le l \\le 10^{12}$ | $1\\le r \\le 10^{12}$ | 无特殊限制 |\n| $91\\sim 95$ | $1\\le l \\le 10^{13}$ | $1\\le r \\le 10^{13}$ | 无特殊限制 |\n| $96\\sim 97$ | $1\\le l \\le 2\\times 10^{13}$ | $1\\le r \\le 2\\times 10^{13}$ | $r-l<10^{13}$ |\n| $98\\sim 99$ | $1\\le l \\le 10^{13}$ | $1\\le r \\le 10^{14}$ | $r-l>9\\times 10^{13}$ |\n| $100$ | $1\\le l \\le 10^{14}$ | $1\\le r \\le 1.6\\times 10^{14}$ | $r-l>10^{14}$ |", "locale": "zh-CN", "translations": {"en": {"title": "Calculating", "background": "", "description": "If the prime factorization of $x$ is $x=p_1^{k_1}p_2^{k_2}\\cdots p_n^{k_n}$, define $f(x)=(k_1+1)(k_2+1)\\cdots (k_n+1)$. Compute $\\sum_{i=l}^r f(i)$ modulo $998\\,244\\,353$.", "inputFormat": "The input contains a single line with two integers, representing $l$ and $r$.", "outputFormat": "Output a single integer on one line representing the answer.", "hint": "#### Constraints and Conventions\n\n| Test point ID | $l$ | $r$ | $r-l$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $1\\le l\\le 10$ | $1\\le r\\le 10$ | $r-l=0$ |\n| $4\\sim 7$ | $1\\le l\\le 50$ | $1\\le r\\le 50$ | $r-l=0$ |\n| $8\\sim 10$ | $1\\le l\\le 100$ | $1\\le r\\le 100$ | $r-l<50$ |\n| $11\\sim 16$ | $1\\le l\\le 500$ | $1\\le r\\le 500$ | No special restriction |\n| $17\\sim 25$ | $1\\le l \\le 10^3$ | $1\\le r \\le 10^3$ | No special restriction |\n| $26\\sim 30$ | $1\\le l \\le 5\\times 10^3$ | $1\\le r \\le 5\\times 10^3$ | $r-l<100$ |\n| $31\\sim 40$ | $1\\le l \\le 10^4$ | $1\\le r \\le 10^4$ | No special restriction |\n| $41\\sim 60$ | $1\\le l \\le 10^7$ | $1\\le r \\le 10^7$ | No special restriction |\n| $61\\sim 70$ | $1\\le l \\le 10^9$ | $1\\le r \\le 10^9$ | No special restriction |\n| $71\\sim 90$ | $1\\le l \\le 10^{12}$ | $1\\le r \\le 10^{12}$ | No special restriction |\n| $91\\sim 95$ | $1\\le l \\le 10^{13}$ | $1\\le r \\le 10^{13}$ | No special restriction |\n| $96\\sim 97$ | $1\\le l \\le 2\\times 10^{13}$ | $1\\le r \\le 2\\times 10^{13}$ | $r-l<10^{13}$ |\n| $98\\sim 99$ | $1\\le l \\le 10^{13}$ | $1\\le r \\le 10^{14}$ | $r-l>9\\times 10^{13}$ |\n| $100$ | $1\\le l \\le 10^{14}$ | $1\\le r \\le 1.6\\times 10^{14}$ | $r-l>10^{14}$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Calculating", "background": null, "description": "若 $x$ 分解质因数结果为 $x=p_1^{k_1}p_2^{k_2}\\cdots p_n^{k_n}$，令 $f(x)=(k_1+1)(k_2+1)\\cdots (k_n+1)$，求 $\\sum_{i=l}^rf(i)$ 对 $998\\,244\\,353$ 取模的结果。", "inputFormat": "输入只有一行两个整数，分别表示 $l$ 和 $r$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n| 测试点编号 | $l$ | $r$ | $r-l$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $1\\le l\\le 10$ | $1\\le r\\le 10$ | $r-l=0$ |\n| $4\\sim 7$ | $1\\le l\\le 50$ | $1\\le r\\le 50$ |$r-l=0$ |\n| $8\\sim 10$ | $1\\le l\\le 100$ | $1\\le r\\le 100$ |$r-l<50$ |\n| $11\\sim 16$ | $1\\le l\\le 500$ | $1\\le r\\le 500$ | 无特殊限制 |\n| $17\\sim 25$ | $1\\le l \\le 10^3$ | $1\\le r \\le 10^3$ | 无特殊限制 |\n| $26\\sim 30$ | $1\\le l \\le 5\\times 10^3$ | $1\\le r \\le 5\\times 10^3$ | $r-l<100$ |\n| $31\\sim 40$ | $1\\le l \\le 10^4$ | $1\\le r \\le 10^4$ |无特殊限制  |\n| $41\\sim 60$ | $1\\le l \\le 10^7$ | $1\\le r \\le 10^7$ | 无特殊限制 |\n| $61\\sim 70$ | $1\\le l \\le 10^9$ | $1\\le r \\le 10^9$ | 无特殊限制 |\n| $71\\sim 90$ | $1\\le l \\le 10^{12}$ | $1\\le r \\le 10^{12}$ | 无特殊限制 |\n| $91\\sim 95$ | $1\\le l \\le 10^{13}$ | $1\\le r \\le 10^{13}$ | 无特殊限制 |\n| $96\\sim 97$ | $1\\le l \\le 2\\times 10^{13}$ | $1\\le r \\le 2\\times 10^{13}$ | $r-l<10^{13}$ |\n| $98\\sim 99$ | $1\\le l \\le 10^{13}$ | $1\\le r \\le 10^{14}$ | $r-l>9\\times 10^{13}$ |\n| $100$ | $1\\le l \\le 10^{14}$ | $1\\le r \\le 1.6\\times 10^{14}$ | $r-l>10^{14}$ |", "locale": "zh-CN"}}}
{"pid": "P3936", "type": "P", "difficulty": 6, "samples": [["2 3 3\n1 2 3", "2 3 1\n2 3 3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "洛谷原创", "Special Judge", "模拟退火"], "title": "Coloring", "background": null, "description": "$\\text{Snakes}$ 正在玩游戏，他在一张画有 $n\\times m$ 个格子的白纸上给方格染色。然而，杂乱无章的染色并不有趣，所以他想出了一个奇怪的问题：\n\n\n在 $n\\times m$ 的方格中用 $c$ 种不同的颜色尝试将所有方格染色，不同的颜色用 $1...c$ 间的整数表示。染色需要满足以下条件：\n\n\n+ 每个方格只能且必须染一种颜色。\n\n+ 第 $i$ 种颜色最多可以且必须染 $p_i$ 个格子，保证满足 $\\sum_{i=1}^cp_i=n\\times m$。\n\n+ 将每个格子上下左右与其颜色相同的格子视为位于同一个联通块内，并定义不同联通块之间的方格边的条数为 $q$。可参考样例说明。\n\n\n现在，$\\text{Snakes}$ 想知道，如果给出 $n,m,c$ 以及 $p_1...p_c$，你能够构造出的符合条件且 $q$ 尽量小的染色方案。", "inputFormat": "第一行，三个数，$n,m,c$。\n\n\n第二行，$c$ 个数，第 $i$ 个数为 $p_i$。", "outputFormat": "输出共 $n$ 行，每行 $m$ 个数，表示你构造出的 $n\\times m$ 的 $q$ 尽量少的染色方案。", "hint": "```plain\n   |   |   \n 2 | 3 | 1 \n   +   +---\n 2 | 3   3 \n   |       \n```\n\n对于样例，有 $q=4$，其中三条竖边，一条横边。\n\n\n#### 约定\n\n\n本题为 Special Judge。\n\n\n对于每个测试点，将会设置阈值 $w$，并保证存在构造使得 $q\\leq w$。\n\n\n对于程序输出的答案，我们将会以以下方式计算得分：\n\n\n$$\\begin{matrix}q&score&q&score\\\\\\\\ q \\leq w&10&1.75w < q \\leq 2w&5\\\\\\\\ w < q \\leq 1.1w&9&2w < q \\leq 2.3w&4\\\\\\\\ 1.1w < q \\leq 1.25w&8&2.3w < q \\leq 2.6w&3\\\\\\\\ 1.25w < q \\leq 1.5w&7&2.6w < q \\leq 3w&2\\\\\\\\ 1.5w < q \\leq 1.75w&6&3w < q \\leq 3.5w&1\\end{matrix}$$\n\n\n若$q > 3.5w$，将以 `Wrong Answer` 处理。\n\n\n比赛时显示的得分即为最后得分。\n\n\n#### 数据规模\n\n\n对于 $10\\%$ 的数据，有 $1\\leq n,m\\leq 3$，$c\\leq 3$。\n\n\n对于 $30\\%$ 的数据，有 $1\\leq n,m\\leq 8$，$c\\leq 6$。\n\n\n对于 $50\\%$ 的数据，有 $1\\leq n,m\\leq 15$，$c\\leq 25$。\n\n\n对于 $100\\%$ 的数据，有 $1\\leq n,m\\leq 20$，$c\\leq 50$，$p_i\\leq 20$。", "locale": "zh-CN", "translations": {"en": {"title": "Coloring", "background": "", "description": "$\\text{Snakes}$ is playing a game where he colors squares on a white paper with $n\\times m$ grid cells. However, messy coloring is not fun, so he came up with a peculiar problem:\n\nIn an $n\\times m$ grid, use $c$ different colors to try to color all cells. Different colors are represented by integers in $1...c$. The coloring must satisfy the following conditions:\n\n+ Each cell must be colored in exactly one color.\n\n+ Color $i$ must color exactly $p_i$ cells. It is guaranteed that $\\sum_{i=1}^c p_i = n\\times m$.\n\n+ Consider cells that are adjacent up, down, left, or right and have the same color to be in the same connected component, and define $q$ as the number of grid edges between different connected components. See the sample explanation.\n\nNow, $\\text{Snakes}$ wants to know, given $n$, $m$, $c$ and $p_1...p_c$, whether you can construct a valid coloring that makes $q$ as small as possible.", "inputFormat": "The first line contains three numbers, $n,m,c$.\n\nThe second line contains $c$ numbers, where the $i$-th number is $p_i$.", "outputFormat": "Output $n$ lines, each containing $m$ numbers, representing your constructed $n\\times m$ coloring with $q$ as small as possible.", "hint": "```plain\n   |   |   \n 2 | 3 | 1 \n   +   +---\n 2 | 3   3 \n   |       \n```\n\nFor the sample, $q=4$, consisting of three vertical edges and one horizontal edge.\n\n#### Conventions\n\nThis problem is Special Judge.\n\nFor each test point, a threshold $w$ is set, and it is guaranteed that there exists a construction such that $q\\leq w$.\n\nThe score for your output will be computed as follows:\n\n$$\\begin{matrix}q&score&q&score\\\\\\\\ q \\leq w&10&1.75w < q \\leq 2w&5\\\\\\\\ w < q \\leq 1.1w&9&2w < q \\leq 2.3w&4\\\\\\\\ 1.1w < q \\leq 1.25w&8&2.3w < q \\leq 2.6w&3\\\\\\\\ 1.25w < q \\leq 1.5w&7&2.6w < q \\leq 3w&2\\\\\\\\ 1.5w < q \\leq 1.75w&6&3w < q \\leq 3.5w&1\\end{matrix}$$\n\nIf $q > 3.5w$, it will be judged as `Wrong Answer`.\n\nThe score shown during the contest is the final score.\n\n#### Constraints\n\nFor $10\\%$ of the testdata, $1\\leq n,m\\leq 3$, $c\\leq 3$.\n\nFor $30\\%$ of the testdata, $1\\leq n,m\\leq 8$, $c\\leq 6$.\n\nFor $50\\%$ of the testdata, $1\\leq n,m\\leq 15$, $c\\leq 25$.\n\nFor $100\\%$ of the testdata, $1\\leq n,m\\leq 20$, $c\\leq 50$, $p_i\\leq 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Coloring", "background": null, "description": "$\\text{Snakes}$ 正在玩游戏，他在一张画有 $n\\times m$ 个格子的白纸上给方格染色。然而，杂乱无章的染色并不有趣，所以他想出了一个奇怪的问题：\n\n\n在 $n\\times m$ 的方格中用 $c$ 种不同的颜色尝试将所有方格染色，不同的颜色用 $1...c$ 间的整数表示。染色需要满足以下条件：\n\n\n+ 每个方格只能且必须染一种颜色。\n\n+ 第 $i$ 种颜色最多可以且必须染 $p_i$ 个格子，保证满足 $\\sum_{i=1}^cp_i=n\\times m$。\n\n+ 将每个格子上下左右与其颜色相同的格子视为位于同一个联通块内，并定义不同联通块之间的方格边的条数为 $q$。可参考样例说明。\n\n\n现在，$\\text{Snakes}$ 想知道，如果给出 $n,m,c$ 以及 $p_1...p_c$，你能够构造出的符合条件且 $q$ 尽量小的染色方案。", "inputFormat": "第一行，三个数，$n,m,c$。\n\n\n第二行，$c$ 个数，第 $i$ 个数为 $p_i$。", "outputFormat": "输出共 $n$ 行，每行 $m$ 个数，表示你构造出的 $n\\times m$ 的 $q$ 尽量少的染色方案。", "hint": "```plain\n   |   |   \n 2 | 3 | 1 \n   +   +---\n 2 | 3   3 \n   |       \n```\n\n对于样例，有 $q=4$，其中三条竖边，一条横边。\n\n\n#### 约定\n\n\n本题为 Special Judge。\n\n\n对于每个测试点，将会设置阈值 $w$，并保证存在构造使得 $q\\leq w$。\n\n\n对于程序输出的答案，我们将会以以下方式计算得分：\n\n\n$$\\begin{matrix}q&score&q&score\\\\\\\\ q \\leq w&10&1.75w < q \\leq 2w&5\\\\\\\\ w < q \\leq 1.1w&9&2w < q \\leq 2.3w&4\\\\\\\\ 1.1w < q \\leq 1.25w&8&2.3w < q \\leq 2.6w&3\\\\\\\\ 1.25w < q \\leq 1.5w&7&2.6w < q \\leq 3w&2\\\\\\\\ 1.5w < q \\leq 1.75w&6&3w < q \\leq 3.5w&1\\end{matrix}$$\n\n\n若$q > 3.5w$，将以 `Wrong Answer` 处理。\n\n\n比赛时显示的得分即为最后得分。\n\n\n#### 数据规模\n\n\n对于 $10\\%$ 的数据，有 $1\\leq n,m\\leq 3$，$c\\leq 3$。\n\n\n对于 $30\\%$ 的数据，有 $1\\leq n,m\\leq 8$，$c\\leq 6$。\n\n\n对于 $50\\%$ 的数据，有 $1\\leq n,m\\leq 15$，$c\\leq 25$。\n\n\n对于 $100\\%$ 的数据，有 $1\\leq n,m\\leq 20$，$c\\leq 50$，$p_i\\leq 20$。", "locale": "zh-CN"}}}
{"pid": "P3937", "type": "P", "difficulty": 5, "samples": [["4 2 1\n1 0 1 0", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创", "进制", "组合数学"], "title": "Changing", "background": "", "description": "有 $n$ 盏灯环形排列，顺时针依次标号为 $1\\cdots n$。初始时刻为 $0$，初始时刻第 $i$ 盏灯的亮灭 $a_i$ 给定，$0$ 表示灭，$1$ 表示亮。下一时刻每盏灯的亮灭取决于当前时刻这盏灯与顺时针方向下一盏灯的亮灭。若两盏灯状态相同，则下一时刻该灯灭，否则该灯亮。\n\n\n试求时刻 $t$ 第 $k$ 盏灯的状态。\n", "inputFormat": "第一行，三个整数，分别为 $n, t, k$。\n\n\n第二行，共 $n$ 个整数，分别为 $0$ 或 $1$，代表 $a_i$。\n", "outputFormat": "共一行，一个数，$0$ 或 $1$，代表时刻 $t$ 第 $k$ 盏灯的状态。\n", "hint": "- 对于 $25\\%$ 的数据，有$1\\leq t, k\\leq n\\leq 1000$。 \n- 对于 $60\\%$ 的数据，有$1\\leq t, k\\leq n\\leq 10^5$。 \n- 对于 $100\\%$ 的数据，有$1\\leq t, k\\leq n\\leq 3\\times 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Changing", "background": "", "description": "There are $n$ lamps arranged in a circle, labeled clockwise as $1 \\cdots n$. The initial time is $0$. At the initial time, the on/off state $a_i$ of the $i$-th lamp is given, where $0$ means off and $1$ means on. At the next time, each lamp’s state depends on the current state of this lamp and the next lamp in the clockwise direction. If the two lamps have the same state, then at the next time this lamp is off; otherwise, it is on.\n\nFind the state of the $k$-th lamp at time $t$.", "inputFormat": "The first line contains three integers $n$, $t$, $k$.\n\nThe second line contains $n$ integers, each being $0$ or $1$, representing $a_i$.", "outputFormat": "Output one line with a single number, $0$ or $1$, representing the state of the $k$-th lamp at time $t$.", "hint": "- For $25\\%$ of the testdata, $1 \\leq t, k \\leq n \\leq 1000$.\n- For $60\\%$ of the testdata, $1 \\leq t, k \\leq n \\leq 10^5$.\n- For $100\\%$ of the testdata, $1 \\leq t, k \\leq n \\leq 3 \\times 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Changing", "background": "", "description": "有 $n$ 盏灯环形排列，顺时针依次标号为 $1\\cdots n$。初始时刻为 $0$，初始时刻第 $i$ 盏灯的亮灭 $a_i$ 给定，$0$ 表示灭，$1$ 表示亮。下一时刻每盏灯的亮灭取决于当前时刻这盏灯与顺时针方向下一盏灯的亮灭。若两盏灯状态相同，则下一时刻该灯灭，否则该灯亮。\n\n\n试求时刻 $t$ 第 $k$ 盏灯的状态。\n", "inputFormat": "第一行，三个整数，分别为 $n, t, k$。\n\n\n第二行，共 $n$ 个整数，分别为 $0$ 或 $1$，代表 $a_i$。\n", "outputFormat": "共一行，一个数，$0$ 或 $1$，代表时刻 $t$ 第 $k$ 盏灯的状态。\n", "hint": "- 对于 $25\\%$ 的数据，有$1\\leq t, k\\leq n\\leq 1000$。 \n- 对于 $60\\%$ 的数据，有$1\\leq t, k\\leq n\\leq 10^5$。 \n- 对于 $100\\%$ 的数据，有$1\\leq t, k\\leq n\\leq 3\\times 10^6$。\n", "locale": "zh-CN"}}}
