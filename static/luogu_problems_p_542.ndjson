{"pid": "P12002", "type": "P", "difficulty": 5, "samples": [["5 2 1\n3 3\n1 2\n1 3\n2 4\n2 5\n1 2", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "树形 DP", "洛谷月赛"], "title": "吃猫粮的玉桂狗", "background": "", "description": "扶苏养了一只吃猫粮的玉桂狗。\n\n扶苏有一个 $n$ 个点的树。她还买了 $m$ 种猫粮。对于第 $i$ 种猫粮，她买了 $c_i$ 份。**保证 $c_i \\geq \\lfloor\\frac{n}{2}\\rfloor$**。扶苏想在这棵树的每个节点上都放上一份猫粮。\n\n扶苏的玉桂狗会从 $1$ 号节点出发在树上进行移动。每次移动时，它会从与当前节点相邻的节点中，选择一个**还没到达过**的节点，并移动到该节点。如果相邻的节点中没有未到达的节点，则移动停止。在移动过程中，每次到达一个新的节点（包括在节点 $1$），玉桂狗就会吃掉这个节点上的猫粮。\n\n因为猫粮的成分各有不同，有 $t$ 个限制。第 $i$ 个限制是 $(a_i, b_i)$。表示当玉桂狗吃完种类为 $a_i$ 的猫粮后，不能**立刻**吃种类为 $b_i$ 的猫粮（但是可以吃至少一个其他种类的猫粮后再吃该种类的猫粮），否则狗会生病。\n\n扶苏想知道有多少方案，使得她能在这棵树上的每个节点都放上一份猫粮，且无论玉桂狗在树上沿任何路径移动，它都不会生病。\n\n两种方案不同当且仅当存在一个节点 $u$，使得 $u$ 在两种方案里放的猫粮的种类不同。\n\n因为方案数太大，所以扶苏只关心这个数字除以 $353,442,899$ 的余数。", "inputFormat": "第一行有三个整数，依次表示树的节点数 $n$，猫粮种类数 $m$ 和限制数 $t$。  \n第二行有 $m$ 个整数，第 $i$ 个整数表示种类为 $i$ 的猫粮的数量 $c_i$。  \n接下来 $n - 1$ 行，每行两个整数 $u_i, v_i$，表示树上有一条连接 $u_i, v_i$ 的边。  \n接下来 $t$ 行，每行两个整数 $a_i, b_i$，表示一个限制。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n- 对 $30\\%$ 的数据，$n,m \\leq 5$。\n- 对 $60\\%$ 的数据，$n,m \\leq 20$。\n- 对 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 50$，$1 \\leq u_i, v_i \\leq n$，$1 \\leq a_i, b_i \\leq m$，$1 \\leq t \\leq m^2$，$\\lfloor\\frac{n}{2}\\rfloor \\leq c_i \\leq n$，不存在 $i \\neq j$ 使得 $(a_i, b_i) = (a_j, b_j)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "吃猫粮的玉桂狗", "background": "", "description": "扶苏养了一只吃猫粮的玉桂狗。\n\n扶苏有一个 $n$ 个点的树。她还买了 $m$ 种猫粮。对于第 $i$ 种猫粮，她买了 $c_i$ 份。**保证 $c_i \\geq \\lfloor\\frac{n}{2}\\rfloor$**。扶苏想在这棵树的每个节点上都放上一份猫粮。\n\n扶苏的玉桂狗会从 $1$ 号节点出发在树上进行移动。每次移动时，它会从与当前节点相邻的节点中，选择一个**还没到达过**的节点，并移动到该节点。如果相邻的节点中没有未到达的节点，则移动停止。在移动过程中，每次到达一个新的节点（包括在节点 $1$），玉桂狗就会吃掉这个节点上的猫粮。\n\n因为猫粮的成分各有不同，有 $t$ 个限制。第 $i$ 个限制是 $(a_i, b_i)$。表示当玉桂狗吃完种类为 $a_i$ 的猫粮后，不能**立刻**吃种类为 $b_i$ 的猫粮（但是可以吃至少一个其他种类的猫粮后再吃该种类的猫粮），否则狗会生病。\n\n扶苏想知道有多少方案，使得她能在这棵树上的每个节点都放上一份猫粮，且无论玉桂狗在树上沿任何路径移动，它都不会生病。\n\n两种方案不同当且仅当存在一个节点 $u$，使得 $u$ 在两种方案里放的猫粮的种类不同。\n\n因为方案数太大，所以扶苏只关心这个数字除以 $353,442,899$ 的余数。", "inputFormat": "第一行有三个整数，依次表示树的节点数 $n$，猫粮种类数 $m$ 和限制数 $t$。  \n第二行有 $m$ 个整数，第 $i$ 个整数表示种类为 $i$ 的猫粮的数量 $c_i$。  \n接下来 $n - 1$ 行，每行两个整数 $u_i, v_i$，表示树上有一条连接 $u_i, v_i$ 的边。  \n接下来 $t$ 行，每行两个整数 $a_i, b_i$，表示一个限制。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n- 对 $30\\%$ 的数据，$n,m \\leq 5$。\n- 对 $60\\%$ 的数据，$n,m \\leq 20$。\n- 对 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 50$，$1 \\leq u_i, v_i \\leq n$，$1 \\leq a_i, b_i \\leq m$，$1 \\leq t \\leq m^2$，$\\lfloor\\frac{n}{2}\\rfloor \\leq c_i \\leq n$，不存在 $i \\neq j$ 使得 $(a_i, b_i) = (a_j, b_j)$。", "locale": "zh-CN"}}}
{"pid": "P12003", "type": "P", "difficulty": 6, "samples": [["3 1\n7 2 1\n1 2\n1 3\n2 3", "2"], ["10 7\n9 9 8 2 4 4 3 5 3 97\n1 2\n1 3\n3 4\n5 2\n6 4\n7 5\n9 1\n10 2\n3 8\n4 5\n2 3\n4 6\n2 4\n1 2\n4 10\n1 1", "2\n2\n1\n2\n1\n3\n1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["莫队", "洛谷原创", "O2优化", "洛谷月赛", "根号分治"], "title": "在小小的奶龙山里面挖呀挖呀挖（加强版）", "background": "夏天快要到了，去兴绍奶龙山参加 ION5202 的 0p 决定探究奶龙山的性质。", "description": "奶龙山内部存在复杂的奶龙山隧道，但是聪明的 0p 一眼就看出了 $n-1$ 条奶龙山隧道的结构是一颗树。其中任意两个隧道只在 $n$ 个休息点处相交，两两休息点之间都有路径联通，第 $i$ 个休息点有一个权值 $a_i$，对于每一个素数 $p$，若 $p\\mid a_i$ 则说明 $p$ 公司参与了休息点建设。想要经过一个休息点，就必须和所有参与了休息点建设的公司搞好关系。\n\n0p 有 $q$ 条心仪的路线，第 $i$ 条是从休息点 $u$ 走到休息点 $v$，对于每一条路线，0p 想知道，他需要与多少公司搞好关系才可以成功地走完这一条路线。\n\n**请注意算法常数对时间效率的影响**。", "inputFormat": "第一行，两个正整数 $n,q$。\n\n第二行，共 $n$ 个正整数，第 $i$ 个正整数表示 $a_i$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示一条树边。\n\n接下来 $q$ 行，每行两个正整数 $u,v$，表示一条路线。", "outputFormat": "输出共 $q$ 行，对于每一条路线，输出所求的答案。", "hint": "对于 $100\\%$ 的数据，满足 $1\\leq n,q\\leq 3\\times10^5$，$1\\leq a_i\\leq 10^8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "在小小的奶龙山里面挖呀挖呀挖（加强版）", "background": "夏天快要到了，去兴绍奶龙山参加 ION5202 的 0p 决定探究奶龙山的性质。", "description": "奶龙山内部存在复杂的奶龙山隧道，但是聪明的 0p 一眼就看出了 $n-1$ 条奶龙山隧道的结构是一颗树。其中任意两个隧道只在 $n$ 个休息点处相交，两两休息点之间都有路径联通，第 $i$ 个休息点有一个权值 $a_i$，对于每一个素数 $p$，若 $p\\mid a_i$ 则说明 $p$ 公司参与了休息点建设。想要经过一个休息点，就必须和所有参与了休息点建设的公司搞好关系。\n\n0p 有 $q$ 条心仪的路线，第 $i$ 条是从休息点 $u$ 走到休息点 $v$，对于每一条路线，0p 想知道，他需要与多少公司搞好关系才可以成功地走完这一条路线。\n\n**请注意算法常数对时间效率的影响**。", "inputFormat": "第一行，两个正整数 $n,q$。\n\n第二行，共 $n$ 个正整数，第 $i$ 个正整数表示 $a_i$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示一条树边。\n\n接下来 $q$ 行，每行两个正整数 $u,v$，表示一条路线。", "outputFormat": "输出共 $q$ 行，对于每一条路线，输出所求的答案。", "hint": "对于 $100\\%$ 的数据，满足 $1\\leq n,q\\leq 3\\times10^5$，$1\\leq a_i\\leq 10^8$。", "locale": "zh-CN"}}}
{"pid": "P12004", "type": "P", "difficulty": 1, "samples": [["288\n272 232 224 220 220 216 216 206 191 190 186 171 165 163 163 163 160 145 135 132 131 128 115 115 108 95 90 90 90 90 90 90\n", "sidekick\n"], ["228\n272 232 224 220 220 216 216 206 191 190 186 171 165 163 163 163 160 145 135 132 131 128 115 115 108 95 90 90 90 90 90 90\n", "sgnd\n"], ["220\n272 232 224 220 220 216 216 206 191 190 186 171 165 163 163 163 160 145 135 132 131 128 115 115 108 95 90 90 90 90 90 90\n", "cxq\n"], ["35\n272 232 224 220 220 216 216 206 191 190 186 171 165 163 163 163 160 145 135 132 131 128 115 115 108 95 90 90 90 90 90 90\n", "kiku\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["梦熊比赛"], "title": "【MX-X10-T0】[LSOT-4] 嗯欧哎劈", "background": "嗯欧哎劈是欧哎界的知名比赛。本题可以用来检验场切省的选手获得的奖项。\n\n此名称纯属虚构，不影射任何现实中的比赛或机构的名称。如有雷同，纯属巧合。", "description": "一场嗯欧哎劈的分数是 $0$ 到 $400$ 之间的一个整数。嗯欧哎劈一共有三种奖项，分别为一等奖、二等奖和三等奖。现在我们已知有以下信息：\n\n- **按分数从高到低**的一共 $32$ 个参加了嗯欧哎劈的省的一等奖分数线，且场切省的一等奖分数线是最高的。\n- 场切省的二等奖分数线等于一等奖分数线第三高的省份的一等奖分数线 $-1$。\n- 三等奖分数线是全国统一划线，为 $40$ 分。\n- 每个省的一等奖分数线均大于等于 $41$ 分。\n\n给你一个场切省的人的嗯欧哎劈的分数，你需要判断这个人获得了什么奖项。", "inputFormat": "第一行，一个整数，表示这个人的成绩。\n\n第二行，$32$ 个整数，表示**从高到低**排名的所有省的一等奖分数线。", "outputFormat": "如果这个人的分数大于等于一等奖分数线，则获得了一等奖，输出 `sidekick`。\n\n否则，若这个人的分数大于等于二等奖分数线，则获得了二等奖，输出 `sgnd`。**需要注意，若三等奖分数线和二等奖分数线相同，这种情况下应当认为是二等奖。**\n\n否则，若这个人的分数大于等于三等奖分数线，则获得了三等奖，输出 `cxq`。\n\n否则，这个人没有获奖，输出 `kiku`。", "hint": "**【样例解释 #1】**\n\n场切省的一等奖分数线为 $272$，二等奖分数线为 $223$，三等奖分数线为 $40$。\n\n这个人获得了 $288$ 分，大于等于一等奖分数线，故获得了一等奖，输出 `sidekick`。\n\n**【样例解释 #2】**\n\n这个人获得了 $228$ 分，低于一等奖分数线但大于等于二等奖分数线，故获得了二等奖，输出 `sgnd`。\n\n**【样例解释 #3】**\n\n这个人获得了 $220$ 分，低于二等奖分数线但大于等于三等奖分数线，故获得了三等奖，输出 `cxq`。\n\n**【样例解释 #4】**\n\n这个人获得了 $35$ 分，低于三等奖分数线，故没有获奖，输出 `kiku`。\n\n**【数据范围】**\n\n对于全部的数据，保证询问的人的得分大于等于 $0$ 且小于等于 $400$，每个省的一等奖分数线大于等于 $41$ 且小于等于 $400$ 且**从高到低**排序。\n", "locale": "zh-CN", "translations": {"en": {"title": "【MX-X10-T0】[LSOT-4] NOIP", "background": "NOIP is a well-known competition in the OI community. This problem can be used to verify the awards received by participants from Chongqing (CQ) Province who solved problems on-site.\n\nThis name is purely fictional and does not allude to any real-world competition or institution. Any similarity is coincidental.", "description": "A NOIP score is an integer between $0$ and $400$. There are three types of awards in NOIP: first prize, second prize, and third prize. We know the following information:\n\n- The first prize score lines of **32 provinces** that participated in NOIP are given **in descending order**, and the first prize score line of Chongqing Province is the highest.\n- The second prize score line of Chongqing Province equals the first prize score line of the province with the **third-highest** first prize score line minus $1$.\n- The third prize score line is uniformly set nationwide at $40$ points.\n- The first prize score line of each province is at least $41$ points.\n\nGiven the NOIP score of a participant from Chongqing Province, determine which award they received.", "inputFormat": "The first line contains an integer representing the participant's score.\n\nThe second line contains $32$ integers representing the first prize score lines of all provinces, sorted **in descending order**.", "outputFormat": "- If the participant's score is greater than or equal to the first prize score line, output `sidekick`.\n- Otherwise, if the score is greater than or equal to the second prize score line, output `sgnd`. **Note: If the third prize score line equals the second prize score line, it is still considered a second prize.**\n- Otherwise, if the score is greater than or equal to the third prize score line, output `cxq`.\n- Otherwise, output `kiku`.", "hint": "**Sample Explanation #1**\n\nThe first prize score line of Chongqing Province is $272$, the second prize score line is $223$, and the third prize score line is $40$. The participant scored $288$, which meets the first prize requirement. Output: `sidekick`.\n\n**Sample Explanation #2**\n\nThe participant scored $228$, which is below the first prize line but meets the second prize requirement. Output: `sgnd`.\n\n**Sample Explanation #3**\n\nThe participant scored $220$, which is below the second prize line but meets the third prize requirement. Output: `cxq`.\n\n**Sample Explanation #4**\n\nThe participant scored $35$, which is below the third prize line. Output: `kiku`.\n\n**Data Range**\n\nFor all test cases, the participant's score is between $0$ and $400$ (inclusive). Each province's first prize score line is between $41$ and $400$ (inclusive) and sorted in **descending order**.\n\nTranslation by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "【MX-X10-T0】[LSOT-4] 嗯欧哎劈", "background": "嗯欧哎劈是欧哎界的知名比赛。本题可以用来检验场切省的选手获得的奖项。\n\n此名称纯属虚构，不影射任何现实中的比赛或机构的名称。如有雷同，纯属巧合。", "description": "一场嗯欧哎劈的分数是 $0$ 到 $400$ 之间的一个整数。嗯欧哎劈一共有三种奖项，分别为一等奖、二等奖和三等奖。现在我们已知有以下信息：\n\n- **按分数从高到低**的一共 $32$ 个参加了嗯欧哎劈的省的一等奖分数线，且场切省的一等奖分数线是最高的。\n- 场切省的二等奖分数线等于一等奖分数线第三高的省份的一等奖分数线 $-1$。\n- 三等奖分数线是全国统一划线，为 $40$ 分。\n- 每个省的一等奖分数线均大于等于 $41$ 分。\n\n给你一个场切省的人的嗯欧哎劈的分数，你需要判断这个人获得了什么奖项。", "inputFormat": "第一行，一个整数，表示这个人的成绩。\n\n第二行，$32$ 个整数，表示**从高到低**排名的所有省的一等奖分数线。", "outputFormat": "如果这个人的分数大于等于一等奖分数线，则获得了一等奖，输出 `sidekick`。\n\n否则，若这个人的分数大于等于二等奖分数线，则获得了二等奖，输出 `sgnd`。**需要注意，若三等奖分数线和二等奖分数线相同，这种情况下应当认为是二等奖。**\n\n否则，若这个人的分数大于等于三等奖分数线，则获得了三等奖，输出 `cxq`。\n\n否则，这个人没有获奖，输出 `kiku`。", "hint": "**【样例解释 #1】**\n\n场切省的一等奖分数线为 $272$，二等奖分数线为 $223$，三等奖分数线为 $40$。\n\n这个人获得了 $288$ 分，大于等于一等奖分数线，故获得了一等奖，输出 `sidekick`。\n\n**【样例解释 #2】**\n\n这个人获得了 $228$ 分，低于一等奖分数线但大于等于二等奖分数线，故获得了二等奖，输出 `sgnd`。\n\n**【样例解释 #3】**\n\n这个人获得了 $220$ 分，低于二等奖分数线但大于等于三等奖分数线，故获得了三等奖，输出 `cxq`。\n\n**【样例解释 #4】**\n\n这个人获得了 $35$ 分，低于三等奖分数线，故没有获奖，输出 `kiku`。\n\n**【数据范围】**\n\n对于全部的数据，保证询问的人的得分大于等于 $0$ 且小于等于 $400$，每个省的一等奖分数线大于等于 $41$ 且小于等于 $400$ 且**从高到低**排序。\n", "locale": "zh-CN"}}}
{"pid": "P12005", "type": "P", "difficulty": 1, "samples": [["a@1$,_\n", "No\n"], ["a,@_1$,_\n", "Yes\n"], [",__a\n", "No\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["梦熊比赛"], "title": "【MX-X10-T1】[LSOT-4] 如何用中间忘了写一篇排版整齐的题解？", "background": "很遗憾，您的文章不符合推荐标准。原因是：**中文**与**英文、数字或公式**之间以半角空格隔开，但**中文标点符号**与**英文、数字或公式**之间不应有空格。\n\n", "description": "有一个长度为 $n$ 的 Markdown 文章，你需要判断其是否满足：\n\n- **中文**与**英文、数字或公式**之间以半角空格隔开，但**中文标点符号**与**英文、数字或公式**之间不应有空格。\n\n也就是说，不存在相邻的**中文**与**英文、数字或公式**。不存在一对**中文标点符号**与**英文、数字或公式**之间**只有**空格（无论几个）。\n\n如果满足则这篇文章无需打回，输出 ```Yes```。\n\n否则这篇文章需要被打回，输出 ```No```。\n\n为了方便描述，整个文章保证只使用 ```a@1$,_``` 中的字符组成。其中：\n\n- `a` 表示文章中的英文字母。\n- `@` 表示文章中的中文。\n- `1` 表示文章中的数字。\n- `$` 表示文章中的公式。**需要注意，这里与传统的 `$` 的意义并不相同。**\n- `,` 表示文章中的中文标点。\n- `_` 表示文章中的空格。", "inputFormat": "仅一行，一个长度为 $n$ 的仅由 ```a@1$,_``` 组成的字符串，表示该篇 Markdown 文章。", "outputFormat": "仅一行，一个字符串，如果该文章无需打回，输出 ```Yes```，否则输出 ```No```。", "hint": "**【样例解释 #1】**\n\n唯一的中文与英文、数字相邻，不满足要求。故是一篇需要被打回的文章。\n\n**【样例解释 #2】**\n\n有一个中文，均满足**中文**与**英文、数字或公式**之间以半角空格隔开。共有两个中文标点符号，均满足**中文标点符号**与**英文、数字或公式**之间不应有空格。故文章无需打回。\n\n**【样例解释 #3】**\n\n唯一的中文标点符号和英文之间只有空格，不满足要求。故是一篇需要被打回的文章。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$n\\le 3$。\n\n对于另外 $20\\%$ 的数据，不存在公式。\n\n对于另外 $20\\%$ 的数据，不存在中文。\n\n对于全部的数据，保证 $1\\le n\\le 100$，保证字符串仅由 ```a@1$,_``` 组成。", "locale": "zh-CN", "translations": {"en": {"title": "【MX-X10-T1】[LSOT-4] How to Write a Well-Formatted Problem Solution While Forgetting the Middle Part?", "background": "Unfortunately, your article does not meet the recommendation criteria. The reason is: **Chinese characters** should be separated from **English letters, numbers, or formulas** by half-width spaces, but **Chinese punctuation marks** should **not** have spaces between them and **English letters, numbers, or formulas**.", "description": "Given a Markdown article of length $n$, determine whether it satisfies:\n- **Chinese characters** are separated from **English letters, numbers, or formulas** by half-width spaces.\n- **Chinese punctuation marks** should **not** have spaces (regardless of quantity) between them and **English letters, numbers, or formulas**.\n\nIn other words:\n- No adjacent **Chinese characters** and **English letters, numbers, or formulas** exist.\n- No pair of **Chinese punctuation marks** and **English letters, numbers, or formulas** has **only** spaces (any number) between them.\n\nIf the article satisfies the conditions, output `Yes`. Otherwise, output `No`.\n\nFor simplicity, the article is guaranteed to consist **only** of the characters `a@1$,_`, where:\n- `a` represents English letters.\n- `@` represents Chinese characters.\n- `1` represents numbers.\n- `$` represents formulas. **Note: This differs from the traditional meaning of `$`.**\n- `,` represents Chinese punctuation.\n- `_` represents spaces.", "inputFormat": "One line containing a string of length $n$ composed solely of `a@1$,_`, representing the Markdown article.\n", "outputFormat": "One line containing `Yes` if the article meets the criteria, or `No` otherwise.\n", "hint": "**Sample Explanation #1**\n\nThe only Chinese character is adjacent to an English letter/number, violating the requirements. Hence, the article should be rejected.\n\n**Sample Explanation #2**\n\nAll Chinese characters are properly separated from English letters/numbers/formulas by spaces. All Chinese punctuation marks have no spaces between them and English letters/numbers/formulas. The article meets the criteria.\n\n**Sample Explanation #3**\n\nThe only Chinese punctuation mark and an English letter are separated only by spaces, violating the requirements. Hence, the article should be rejected.\n\n**Data Range**\n\n- For $20\\%$ of the data: $n \\le 3$.\n- For another $20\\%$: no formulas exist.\n- For another $20\\%$: no Chinese characters exist.\n- For all data: $1 \\le n \\le 100$, and the string contains only `a@1$,_`.\n\nTranslation by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "【MX-X10-T1】[LSOT-4] 如何用中间忘了写一篇排版整齐的题解？", "background": "很遗憾，您的文章不符合推荐标准。原因是：**中文**与**英文、数字或公式**之间以半角空格隔开，但**中文标点符号**与**英文、数字或公式**之间不应有空格。\n\n", "description": "有一个长度为 $n$ 的 Markdown 文章，你需要判断其是否满足：\n\n- **中文**与**英文、数字或公式**之间以半角空格隔开，但**中文标点符号**与**英文、数字或公式**之间不应有空格。\n\n也就是说，不存在相邻的**中文**与**英文、数字或公式**。不存在一对**中文标点符号**与**英文、数字或公式**之间**只有**空格（无论几个）。\n\n如果满足则这篇文章无需打回，输出 ```Yes```。\n\n否则这篇文章需要被打回，输出 ```No```。\n\n为了方便描述，整个文章保证只使用 ```a@1$,_``` 中的字符组成。其中：\n\n- `a` 表示文章中的英文字母。\n- `@` 表示文章中的中文。\n- `1` 表示文章中的数字。\n- `$` 表示文章中的公式。**需要注意，这里与传统的 `$` 的意义并不相同。**\n- `,` 表示文章中的中文标点。\n- `_` 表示文章中的空格。", "inputFormat": "仅一行，一个长度为 $n$ 的仅由 ```a@1$,_``` 组成的字符串，表示该篇 Markdown 文章。", "outputFormat": "仅一行，一个字符串，如果该文章无需打回，输出 ```Yes```，否则输出 ```No```。", "hint": "**【样例解释 #1】**\n\n唯一的中文与英文、数字相邻，不满足要求。故是一篇需要被打回的文章。\n\n**【样例解释 #2】**\n\n有一个中文，均满足**中文**与**英文、数字或公式**之间以半角空格隔开。共有两个中文标点符号，均满足**中文标点符号**与**英文、数字或公式**之间不应有空格。故文章无需打回。\n\n**【样例解释 #3】**\n\n唯一的中文标点符号和英文之间只有空格，不满足要求。故是一篇需要被打回的文章。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$n\\le 3$。\n\n对于另外 $20\\%$ 的数据，不存在公式。\n\n对于另外 $20\\%$ 的数据，不存在中文。\n\n对于全部的数据，保证 $1\\le n\\le 100$，保证字符串仅由 ```a@1$,_``` 组成。", "locale": "zh-CN"}}}
{"pid": "P12006", "type": "P", "difficulty": 3, "samples": [["5 2\n8 6 7 2\n2 2\n3 2\n", "12\n"], ["5 2\n8 6 7 2\n2 2\n3 10\n", "Impossible\n"], ["20 19\n425 46 176 409 156 35 128 467 534 411 362 760 32 17 403 210 462 10 94\n15 104\n12 193\n6 249\n18 845\n1 72\n15 269\n2 633\n10 858\n14 282\n14 950\n5 98\n11 162\n12 296\n14 846\n15 793\n11 858\n19 942\n1 886\n19 968\n", "283895\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "梦熊比赛"], "title": "【MX-X10-T2】[LSOT-4] 网易云", "background": "别小看我的情报网，我知道你的年度曲风是二次元，你的年度关键词是未来、世界、永远，对不对？", "description": "网易云音乐在 2077 年推出了统计功能，每首歌有一个好听值（可以是任意整数），每连续听的两首歌的组合值是这两首歌的好听值之和。\n\n在 2077 年小 H 一共听了 $n$ 首歌，但是小 H 并不知道每首歌的好听值。现在依次告诉你对于 $1\\le i<n$，第 $i$ 和 $i+1$ 首歌的组合值 $S_i$。现在小 H 要更换听歌方式，新的听歌方式会进行 $m$ 次听歌，第 $i$ 次听歌会听第 $a_i$ 首歌 $b_i$ 次。\n\n小 H 希望你告诉他新的听歌方式听到的每首歌的好听值的总和。**一首歌重复听多次会重复计算好听值**。不过你也有可能无法确定最后的好听值总和，这种情况你需要输出 `Impossible`。", "inputFormat": "第一行，两个整数 $n, m$，表示听歌的数量和听歌次数。\n\n第二行，$n-1$ 个整数 $S_1, S_2, \\ldots, S_{n - 1}$。\n\n接下来 $m$ 行，第 $i$ 行两个整数 $a_i, b_i$，表示第 $i$ 次听歌。", "outputFormat": "仅一行，一个整数，表示新的听歌方式的好听值总和。如果无法确定，则输出一个字符串 `Impossible`。\n", "hint": "**【样例解释 #1】**\n\n第二首和第三首都听了 $2$ 次，已知第二首和第三首的和是 $6$。使用乘法分配律，好听值一共是 $2\\times 6=12$。\n\n**【样例解释 #2】**\n\n通过样例 #1，这个总和等于 $12$ 加上第三首歌的好听值 $\\times 8$。可以证明通过给定的信息无法确定第三首歌的好听值，故无法确定好听值总和，输出 `Impossible`。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$m=1$。\n\n对于另外 $30\\%$ 的数据，$m=2$。\n\n对于全部的数据，$2\\le n\\le 10^5$，$1\\le m\\le 10^5$，$1\\le S_i,b_i\\le 1000$，$1\\le a_i\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "【MX-X10-T2】[LSOT-4] NetEase Cloud Music", "background": "Don't underestimate my intelligence network. I know your annual music genre is anime, and your annual keywords are future, world, forever, right?", "description": "In 2077, NetEase Cloud Music introduced a statistical feature. Each song has a \"quality value\" (any integer), and the \"combined value\" of any two consecutively listened songs is the sum of their quality values.\n\nIn 2077, Little H listened to $n$ songs, but he does not know the quality values of each song. You are given the combined values $S_i$ for $1 \\le i < n$, where $S_i$ corresponds to the $i$-th and $(i+1)$-th songs. Now, Little H wants to change his listening method: he will listen to songs $m$ times, and in the $i$-th listening session, he will listen to the $a_i$-th song $b_i$ times.\n\nLittle H asks you to calculate the total sum of the quality values of all songs listened to in the new method. **A song listened to multiple times contributes its value multiple times**. However, if it is impossible to determine the total sum uniquely, output `Impossible`.", "inputFormat": "- The first line contains two integers $n$ and $m$, representing the number of songs and listening sessions.\n- The second line contains $n-1$ integers $S_1, S_2, \\ldots, S_{n-1}$.\n- The next $m$ lines each contain two integers $a_i$ and $b_i$, describing the $i$-th listening session.", "outputFormat": "Output one line containing an integer—the total sum of quality values. If the sum cannot be uniquely determined, output the string `Impossible`.\n", "hint": "**Sample Explanation #1**\n\nThe second and third songs were each listened to twice. Since their combined value is $6$, the total contribution is $2 \\times 6 = 12$ (using the distributive property).\n\n**Sample Explanation #2**\n\nThe total sum equals $12$ plus the third song's quality value multiplied by $8$. However, the third song's quality value cannot be determined from the given information, so the output is `Impossible`.\n\n**Data Range**\n\n- For $10\\%$ of the data: $m = 1$.\n- For another $30\\%$: $m = 2$.\n- For all data: $2 \\le n \\le 10^5$, $1 \\le m \\le 10^5$, $1 \\le S_i, b_i \\le 1000$, $1 \\le a_i \\le n$.\n\nTranslation by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "【MX-X10-T2】[LSOT-4] 网易云", "background": "别小看我的情报网，我知道你的年度曲风是二次元，你的年度关键词是未来、世界、永远，对不对？", "description": "网易云音乐在 2077 年推出了统计功能，每首歌有一个好听值（可以是任意整数），每连续听的两首歌的组合值是这两首歌的好听值之和。\n\n在 2077 年小 H 一共听了 $n$ 首歌，但是小 H 并不知道每首歌的好听值。现在依次告诉你对于 $1\\le i<n$，第 $i$ 和 $i+1$ 首歌的组合值 $S_i$。现在小 H 要更换听歌方式，新的听歌方式会进行 $m$ 次听歌，第 $i$ 次听歌会听第 $a_i$ 首歌 $b_i$ 次。\n\n小 H 希望你告诉他新的听歌方式听到的每首歌的好听值的总和。**一首歌重复听多次会重复计算好听值**。不过你也有可能无法确定最后的好听值总和，这种情况你需要输出 `Impossible`。", "inputFormat": "第一行，两个整数 $n, m$，表示听歌的数量和听歌次数。\n\n第二行，$n-1$ 个整数 $S_1, S_2, \\ldots, S_{n - 1}$。\n\n接下来 $m$ 行，第 $i$ 行两个整数 $a_i, b_i$，表示第 $i$ 次听歌。", "outputFormat": "仅一行，一个整数，表示新的听歌方式的好听值总和。如果无法确定，则输出一个字符串 `Impossible`。\n", "hint": "**【样例解释 #1】**\n\n第二首和第三首都听了 $2$ 次，已知第二首和第三首的和是 $6$。使用乘法分配律，好听值一共是 $2\\times 6=12$。\n\n**【样例解释 #2】**\n\n通过样例 #1，这个总和等于 $12$ 加上第三首歌的好听值 $\\times 8$。可以证明通过给定的信息无法确定第三首歌的好听值，故无法确定好听值总和，输出 `Impossible`。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$m=1$。\n\n对于另外 $30\\%$ 的数据，$m=2$。\n\n对于全部的数据，$2\\le n\\le 10^5$，$1\\le m\\le 10^5$，$1\\le S_i,b_i\\le 1000$，$1\\le a_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P12007", "type": "P", "difficulty": 4, "samples": [["7 3\n1 2 1\n3 5 3\n3 7 2\n1 2 3\n", "76\n"], ["14 9\n8 9 539682\n14 4 470495\n10 7 265900\n14 5 234094\n1 9 255217\n7 1 559336\n7 6 883781\n7 13 679978\n11 1 598746\n433139 142690 902471 766101\n", "108274449\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "树论", "构造", "树的重心", "梦熊比赛"], "title": "【MX-X10-T3】[LSOT-4] 全国联赛？", "background": "> 你真的以为我们能打进全国联赛吗？", "description": "北宇治的吹奏部一共有 $n$ 个学生，学生的编号为 $1$ 到 $n$。在泷昇到来之前已经建立了 $m$ 对配合关系（$0 \\le m \\le n - 1$），每对配合关系 $u,v,w$ 表示在 $u$ 或 $v$ 演奏后另一人能在 $w$ 单位的时间后立刻演奏完成配合。若两人没有直接的配合关系，也可以通过多次的配合关系来间接完成配合，他们造成的误差时间是中间每次配合花费的时间之和。\n\n现在的吹奏部简直乱的像一盘散沙！为此，泷昇有 $n-m-1$ 种特训方案。第 $i$ 种方案可以让任意两个成员建立配合关系，最终训练的效果能让二人在 $a_i$ 的时间内完成配合。定义不协调度为对于所有的 $1\\le x<y\\le n$，$x,y$ 之间误差时间的最小值的和。如果有两个成员在最后无法配合，则认为不合法。为了打进全国联赛，他希望不协调度尽量的小。\n\n请告诉泷昇这个最优的不协调度。数据保证一定存在至少一种合法的方案。因为结果可能很大，你只需要输出不协调度对 $10^9+7$ 取模的值。", "inputFormat": "第一行，两个整数 $n, m$。\n\n接下来 $m$ 行，每行三个整数 $u,v,w$，表示一对配合关系。\n\n若 $n-m-1>0$，则最后一行 $n-m-1$ 个整数 $a_1, \\ldots, a_{n - m - 1}$。\n", "outputFormat": "仅一行，一个整数，表示最小的不协调度对 $10^9+7$ 取模的值。\n", "hint": "**【样例解释 #1】**\n\n之前的配合关系形如：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t66wfiko.png)\n\n最优秀的训练方式训练之后的配合关系形如：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mxc2d4v2.png)\n\n这样的话，$(1,7)$ 的误差时间的最小值是 $4$，方案是通过 $(1,2)$、$(2,3)$、$(3,7)$ 依次进行配合。\n\n类似的，所有误差时间之和是 $76$。\n\n可以证明不存在更优秀的合法方案。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（13 分）：$n\\le 6$。\n- 子任务 2（22 分）：$n\\le 2000$。\n- 子任务 3（18 分）：在建立新的配合关系前，任意两个可以配合的成员都可以通过不超过一个中间的成员间接配合。\n- 子任务 4（19 分）：$a_i=0,w=1$。\n- 子任务 5（15 分）：$a_i$ 全部相同。\n- 子任务 6（13 分）：无特殊性质。\n\n对于全部的数据，$0\\le m<n\\le 10^6$，$0\\le a_i,w\\le 10^6$，$1\\le u,v\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "【MX-X10-T3】[LSOT-4] National Competition?", "background": "> Do you really think we can make it to the national competition?", "description": "The wind ensemble club at Kitauji High School (Kyoto Municipal Kitauji High School) has $n$ students numbered from $1$ to $n$. Before Taki Noboru's arrival, $m$ partnership relationships ($0 \\le m \\le n - 1$) had been established. Each partnership $u, v, w$ indicates that after $u$ or $v$ performs, the other can complete the coordination within $w$ units of time. If two students have no direct partnership, they can still coordinate indirectly through multiple partnerships, with the total error time being the sum of all intermediate coordination times.\n\nThe current club is as disorganized as a pile of scattered sand! To address this, Taki Noboru has $n - m - 1$ special training plans. The $i$-th plan allows any two members to establish a partnership, achieving coordination in $a_i$ units of time. The **disharmony degree** is defined as the sum of the minimum error times for all pairs $1 \\le x < y \\le n$. If any pair cannot coordinate in the end, the configuration is considered invalid. To reach the national competition, Taki wants to minimize the disharmony degree.\n\nCalculate the optimal disharmony degree for Taki. The data guarantees at least one valid configuration. Since the result might be large, output the disharmony degree modulo $10^9 + 7$.\n", "inputFormat": "- The first line contains two integers $n$ and $m$.\n- The next $m$ lines each contain three integers $u, v, w$, describing a partnership.\n- If $n - m - 1 > 0$, the last line contains $n - m - 1$ integers $a_1, \\ldots, a_{n - m - 1}$.", "outputFormat": "One line containing an integer—the minimal disharmony degree modulo $10^9 + 7$.", "hint": "**Sample Explanation #1**\n\nThe initial partnerships form the structure shown in:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t66wfiko.png)\n\nThe optimal training adds partnerships as shown in:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mxc2d4v2.png)\n\nFor pair $(1,7)$, the minimum error time is $4$, achieved through the path $(1,2) \\rightarrow (2,3) \\rightarrow (3,7)$. The total sum of all minimum error times is $76$. No better valid configuration exists.\n\n**Data Range**\n\n**This problem uses subtasks with bundled testing.**\n\n- Subtask 1 (13 pts): $n \\le 6$.\n- Subtask 2 (22 pts): $n \\le 2000$.\n- Subtask 3 (18 pts): Before adding new partnerships, any pair of coordinating members can connect via at most one intermediate member.\n- Subtask 4 (19 pts): $a_i = 0$, $w = 1$.\n- Subtask 5 (15 pts): All $a_i$ are equal.\n- Subtask 6 (13 pts): No additional constraints.\n\nFor all data: $0 \\le m < n \\le 10^6$, $0 \\le a_i, w \\le 10^6$, $1 \\le u, v \\le n$.\n\nTranslation by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "【MX-X10-T3】[LSOT-4] 全国联赛？", "background": "> 你真的以为我们能打进全国联赛吗？", "description": "北宇治的吹奏部一共有 $n$ 个学生，学生的编号为 $1$ 到 $n$。在泷昇到来之前已经建立了 $m$ 对配合关系（$0 \\le m \\le n - 1$），每对配合关系 $u,v,w$ 表示在 $u$ 或 $v$ 演奏后另一人能在 $w$ 单位的时间后立刻演奏完成配合。若两人没有直接的配合关系，也可以通过多次的配合关系来间接完成配合，他们造成的误差时间是中间每次配合花费的时间之和。\n\n现在的吹奏部简直乱的像一盘散沙！为此，泷昇有 $n-m-1$ 种特训方案。第 $i$ 种方案可以让任意两个成员建立配合关系，最终训练的效果能让二人在 $a_i$ 的时间内完成配合。定义不协调度为对于所有的 $1\\le x<y\\le n$，$x,y$ 之间误差时间的最小值的和。如果有两个成员在最后无法配合，则认为不合法。为了打进全国联赛，他希望不协调度尽量的小。\n\n请告诉泷昇这个最优的不协调度。数据保证一定存在至少一种合法的方案。因为结果可能很大，你只需要输出不协调度对 $10^9+7$ 取模的值。", "inputFormat": "第一行，两个整数 $n, m$。\n\n接下来 $m$ 行，每行三个整数 $u,v,w$，表示一对配合关系。\n\n若 $n-m-1>0$，则最后一行 $n-m-1$ 个整数 $a_1, \\ldots, a_{n - m - 1}$。\n", "outputFormat": "仅一行，一个整数，表示最小的不协调度对 $10^9+7$ 取模的值。\n", "hint": "**【样例解释 #1】**\n\n之前的配合关系形如：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t66wfiko.png)\n\n最优秀的训练方式训练之后的配合关系形如：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mxc2d4v2.png)\n\n这样的话，$(1,7)$ 的误差时间的最小值是 $4$，方案是通过 $(1,2)$、$(2,3)$、$(3,7)$ 依次进行配合。\n\n类似的，所有误差时间之和是 $76$。\n\n可以证明不存在更优秀的合法方案。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（13 分）：$n\\le 6$。\n- 子任务 2（22 分）：$n\\le 2000$。\n- 子任务 3（18 分）：在建立新的配合关系前，任意两个可以配合的成员都可以通过不超过一个中间的成员间接配合。\n- 子任务 4（19 分）：$a_i=0,w=1$。\n- 子任务 5（15 分）：$a_i$ 全部相同。\n- 子任务 6（13 分）：无特殊性质。\n\n对于全部的数据，$0\\le m<n\\le 10^6$，$0\\le a_i,w\\le 10^6$，$1\\le u,v\\le n$。", "locale": "zh-CN"}}}
{"pid": "P12008", "type": "P", "difficulty": 5, "samples": [["9 2 5\n2 1 3 4 5 2 3 2 4", "0 3 2 1 0"], ["30 3 8\n3 4 5 5 1 2 8 4 5 3 6 4 5 7 5 6 6 7 6 8 7 1 8 2 3 2 7 3 7 8", "0 2 1 2 1 2 2 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "双指针 two-pointer", "梦熊比赛"], "title": "【MX-X10-T4】[LSOT-4] Fragment of Memories", "background": "甜与苦的一体两面。", "description": "苏珊在昏迷前度过了 $m$ 天。从第一天起，苏珊会有一个基准记忆 $x$，第 $i$（$1\\le i\\le m$）天的记忆为 $x+i-1$。这 $m$ 天的记忆按顺序依次拼接，得到了一串长为 $m$ 的记忆。\n\n在梦境中，这段记忆被按顺序重复了 $k$ 遍。在这之后，为了唤醒苏珊，露薇娅进入了梦境，记忆被插入了一些不属于苏珊的记忆，最终变为了一个长度为 $n$ 的序列 $a_1, \\ldots, a_n$。\n\n现在给你这个序列和 $k$。露薇娅不知道一开始的基准记忆 $x$ 是多少，所以他想知道对于所有的 $1\\le x\\le V$，$m$ 的值最大可能是多少。若对于一个 $x$ 不存在合法的记忆，输出 $0$。", "inputFormat": "第一行，三个整数 $n,k,V$，意义如题面所示。\n\n第二行，$n$ 个整数 $a_1, \\ldots, a_n$，表示最终的序列。", "outputFormat": "仅一行，$V$ 个整数，第 $i$ 个整数表示当 $x=i$ 时最大的可能的 $m$。", "hint": "**【样例解释 #1】**\n\n当 $x=2$、$m=3$ 时，苏珊的记忆是 `2 3 4`。重复了 $k=2$ 次变成了 `2 3 4 2 3 4`。在位置 $1$ 和位置 $2$ 中间、位置 $3$ 和位置 $4$ 中间、位置 $5$ 和位置 $6$ 中间分别插入了一个数后变成了原序列。\n\n类似地，`2`、`3`、`4`、`2 3`、`3 4` 都是符合要求的记忆。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（13 分）：$n\\le 100$。\n- 子任务 2（21 分）：$n\\le 3000$。\n- 子任务 3（23 分）：$n\\le 3\\times10^4$。\n- 子任务 4（25 分）：$n\\le 5\\times10^5$。\n- 子任务 5（18 分）：无特殊性质。\n\n对于全部的数据，$1\\le k\\le n\\le 2\\times 10^6$，$1\\le a_i\\le V\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "【MX-X10-T4】[LSOT-4] Fragment of Memories", "background": "Two sides of the same coin, sweetness and bitterness.", "description": "Before falling into a coma, Susan experienced $m$ days of memories. Starting from the first day, Susan has a base memory value $x$. The memory for the $i$-th day ($1 \\le i \\le m$) is $x + i - 1$. These $m$ days of memories are concatenated in order to form a sequence of length $m$.\n\nIn her dreams, this memory sequence is repeated $k$ times in order. Afterward, to awaken Susan, Luvia intervenes in the dream, inserting foreign memories not belonging to Susan. The final result is a sequence $a_1, a_2, \\ldots, a_n$ of length $n$.\n\nGiven this sequence and $k$, Luvia wants to determine the maximum possible value of $m$ for every possible base memory $x$ where $1 \\le x \\le V$. If no valid memory sequence exists for a particular $x$, output $0$.", "inputFormat": "- The first line contains three integers $n$, $k$, $V$, as described.\n- The second line contains $n$ integers $a_1, a_2, \\ldots, a_n$, representing the final sequence.", "outputFormat": "Output one line containing $V$ integers, where the $i$-th integer represents the maximum possible $m$ when $x = i$.", "hint": "**Sample Explanation #1**\n\nFor $x = 2$ and $m = 3$, Susan's memory sequence is `2 3 4`. Repeating $k = 2$ times gives `2 3 4 2 3 4`. After inserting values between positions $1$ and $2$, $3$ and $4$, and $5$ and $6$, the sequence matches the original input.\n\nSimilarly, sequences like `2`, `3`, `4`, `2 3`, and `3 4` are all valid.\n\n**Data Range**\n\n**This problem uses subtasks with bundled testing.**\n\n- Subtask 1 (13 pts): $n \\le 100$.\n- Subtask 2 (21 pts): $n \\le 3000$.\n- Subtask 3 (23 pts): $n \\le 3 \\times 10^4$.\n- Subtask 4 (25 pts): $n \\le 5 \\times 10^5$.\n- Subtask 5 (18 pts): No additional constraints.\n\nFor all data: $1 \\le k \\le n \\le 2 \\times 10^6$, $1 \\le a_i \\le V \\le n$.\n\nTranslation by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "【MX-X10-T4】[LSOT-4] Fragment of Memories", "background": "甜与苦的一体两面。", "description": "苏珊在昏迷前度过了 $m$ 天。从第一天起，苏珊会有一个基准记忆 $x$，第 $i$（$1\\le i\\le m$）天的记忆为 $x+i-1$。这 $m$ 天的记忆按顺序依次拼接，得到了一串长为 $m$ 的记忆。\n\n在梦境中，这段记忆被按顺序重复了 $k$ 遍。在这之后，为了唤醒苏珊，露薇娅进入了梦境，记忆被插入了一些不属于苏珊的记忆，最终变为了一个长度为 $n$ 的序列 $a_1, \\ldots, a_n$。\n\n现在给你这个序列和 $k$。露薇娅不知道一开始的基准记忆 $x$ 是多少，所以他想知道对于所有的 $1\\le x\\le V$，$m$ 的值最大可能是多少。若对于一个 $x$ 不存在合法的记忆，输出 $0$。", "inputFormat": "第一行，三个整数 $n,k,V$，意义如题面所示。\n\n第二行，$n$ 个整数 $a_1, \\ldots, a_n$，表示最终的序列。", "outputFormat": "仅一行，$V$ 个整数，第 $i$ 个整数表示当 $x=i$ 时最大的可能的 $m$。", "hint": "**【样例解释 #1】**\n\n当 $x=2$、$m=3$ 时，苏珊的记忆是 `2 3 4`。重复了 $k=2$ 次变成了 `2 3 4 2 3 4`。在位置 $1$ 和位置 $2$ 中间、位置 $3$ 和位置 $4$ 中间、位置 $5$ 和位置 $6$ 中间分别插入了一个数后变成了原序列。\n\n类似地，`2`、`3`、`4`、`2 3`、`3 4` 都是符合要求的记忆。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（13 分）：$n\\le 100$。\n- 子任务 2（21 分）：$n\\le 3000$。\n- 子任务 3（23 分）：$n\\le 3\\times10^4$。\n- 子任务 4（25 分）：$n\\le 5\\times10^5$。\n- 子任务 5（18 分）：无特殊性质。\n\n对于全部的数据，$1\\le k\\le n\\le 2\\times 10^6$，$1\\le a_i\\le V\\le n$。", "locale": "zh-CN"}}}
{"pid": "P12009", "type": "P", "difficulty": 6, "samples": [["2 5 5\n1001111001\n2 1 2\n1 2 3\n2 1 2\n1 3 4\n2 1 2", "Haru\nHaru\nMasuko"], ["10 10 20\n1110001000101011110100110000110111001111111110111101001111011111011101000000000111110100010000100110\n2 2 1\n2 9 6\n2 6 10\n2 1 1\n2 3 2\n1 7 9\n2 10 10\n2 10 4\n1 1 7\n1 8 8\n1 2 3\n1 2 7\n2 1 9\n2 6 1\n1 1 3\n2 10 7\n1 2 4\n2 9 1\n1 3 7\n1 1 5", "Haru\nHaru\nHaru\nMasuko\nHaru\nMasuko\nHaru\nHaru\nHaru\nHaru\nHaru\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["并查集", "哈希 hashing", "梦熊比赛"], "title": "【MX-X10-T5】[LSOT-4] Masuko or Haru？", "background": "Shion 作为社团活动后的作业，给 Yotsuba 出了一道数据结构题。\n\nYotsuba 本来是想用水路查资料的，但是查着查着就去和 Haru 聊天了……\n\n但是还有 1 秒就要到下午 5 点了！Yotsuba 只能去询问 Masuko 这道题怎么做了。\n\nMasuko 当然可以在 1 秒之内解决这道题，她现在想考考你看你能不能 1 秒内解决这道题！", "description": "给你 $n$ 个长度为 $m$ 的 01 串。\n\n区间二元组的定义为满足 $1\\le l\\le r\\le m$ 的二元组 $(l,r)$。\n\n区间集合的定义为区间二元组组成的集合。\n\n定义 01 串 $a$ 关于区间集合 $S$ 的一次变化为任选一个区间二元组 $(l,r)\\in S$，$\\forall i\\in[l,r],a_i\\gets a_i\\oplus 1$（$\\oplus$ 代表二进制按位异或）。\n\n定义 01 串 $a$ 和 $b$ 在区间集合 $S$ 下等价为 $a$ 可以在经过任意次关于 $S$ 的变化后变为 $b$。\n\n刚开始时 $S=\\emptyset$。\n\n一共有 $q$ 次操作，每次操作都为插入操作或询问操作。\n\n插入操作为给定一个区间二元组 $(l,r)$，$S\\gets S\\cup \\{(l,r)\\}$。\n\n询问操作为给定 $x,y$，你需要判断第 $x$ 个 01 串和第 $y$ 个 01 串是否关于区间集合 $S$ 等价。\n\n\n", "inputFormat": "第一行，三个整数 $n,m,q$。\n\n第二行，一个长为 $n\\times m$ 的 01 串，每 $m$ 个字符代表一个给定的 01 串，即第 $(i-1)\\times m+1$ 个字符到第 $i\\times m$ 个字符表示第 $i$ 个 01 串。\n\n接下来 $q$ 行，每行三个正整数，第一个正整数为 $op$。\n\n- 如果 $op=1$ 代表为插入操作，接下来两个正整数为 $l,r$。\n- 如果 $op=2$ 代表为询问操作，接下来两个正整数为 $x,y$。", "outputFormat": "对于每个询问操作，输出一行，一个字符串，如果等价则输出 `Masuko`，否则输出 `Haru`。", "hint": "**【样例解释 #1】**\n\n每个 01 串初始形如：\n\n`10011`，  \n`11001`。\n\n- 第一次询问：此时集合 $S$ 为空。两个 01 串显然不同。\n- 第二次询问：此时集合 $S$ 为 $\\{(2,3)\\}$，则第一个串只能变成 `10011` 或 `11111`，无法变得相同，故不等价。\n- 第三次询问：此时集合 $S$ 为 $\\{(2,3),(3,4)\\}$，依次进行 $(2,3)$ 变换和 $(3,4)$ 变换即可变为第二个串。故等价。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（17 分）：$n,m\\le 10$，$q\\le 20$。\n- 子任务 2（14 分）：$l=r$。\n- 子任务 3（16 分）：$l=r-1$。\n- 子任务 4（13 分）：插入操作不超过 $5000$ 次。\n- 子任务 5（21 分）：所有的插入操作在所有的询问操作之前。\n- 子任务 6（19 分）：无特殊性质。\n\n对于全部的数据，$1\\le q,n,m\\le 5\\times 10^6$，$n\\times m\\le 10^7$，$1\\le l\\le r\\le m$，$1\\le x,y\\le n$，$op\\in\\{1,2\\}$。", "locale": "zh-CN", "translations": {"en": {"title": "【MX-X10-T5】[LSOT-4] Masuko or Haru？", "background": "As a club activity assignment, Shion gave Yotsuba a data structure problem.\n\nYotsuba intended to research the solution online but ended up chatting with Haru instead...\n\nWith only 1 second left until 5 PM, Yotsuba had to ask Masuko for help.\n\nMasuko can solve the problem in 1 second, but now she wants to test if you can do it too!", "description": "You are given $n$ binary strings of length $m$.\n\nAn **interval pair** is defined as a pair $(l, r)$ where $1 \\le l \\le r \\le m$.\n\nAn **interval set** is a collection of interval pairs.\n\nFor a binary string $a$, a **transformation** with respect to an interval set $S$ involves selecting any interval pair $(l, r) \\in S$ $\\forall i \\in [l, r]$, $a_i \\gets a_i \\oplus 1$ , where $\\oplus$ denotes bitwise XOR.\n\nTwo binary strings $a$ and $b$ are **equivalent** under an interval set $S$ if $a$ can be transformed into $b$ after any number of transformations with respect to $S$.\n\nInitially, $S = \\emptyset$.\n\nThere are $q$ operations, each being either an insertion or a query:\n\n- **Insertion**: Add a given interval pair $(l, r)$ to $S$.\n- **Query**: Given $x$ and $y$, determine whether the $x$-th and $y$-th binary strings are equivalent under the current $S$.", "inputFormat": "- The first line contains three integers $n$, $m$, $q$.\n- The second line contains a binary string of length $n \\times m$. The $((i-1) \\times m + 1)$-th to $(i \\times m)$-th characters represent the $i$-th binary string.\n- The next $q$ lines each start with an integer $op$:\n  - If $op = 1$, it is an insertion operation followed by two integers $l, r$.\n  - If $op = 2$, it is a query operation followed by two integers $x, y$.\n", "outputFormat": "For each query, output a single line: `Masuko` if the two strings are equivalent, otherwise `Haru`.", "hint": "**Sample Explanation #1**\n\nInitial binary strings are:\n\n`10011`,  \n`11001`.\n\n- First query: $S$ is empty. The strings are obviously different.\n- Second query: $S = \\{(2, 3)\\}$. The first string can only become `10011` or `11111`, which cannot match the second string.\n- Third query: $S = \\{(2, 3), (3, 4)\\}$. Applying transformations in sequence converts the first string to the second string. Hence equivalent.\n\n**Data Range**\n\n**This problem uses subtasks with bundled testing.**\n\n- Subtask 1 (17 pts): $n, m \\le 10$, $q \\le 20$.\n- Subtask 2 (14 pts): $l = r$.\n- Subtask 3 (16 pts): $l = r - 1$.\n- Subtask 4 (13 pts): Insertions do not exceed 5000.\n- Subtask 5 (21 pts): All insertions occur before queries.\n- Subtask 6 (19 pts): No additional constraints.\n\nFor all data: $1 \\le q, n, m \\le 5 \\times 10^6$, $n \\times m \\le 10^7$, $1 \\le l \\le r \\le m$, $1 \\le x, y \\le n$, $op \\in \\{1, 2\\}$.\n\nTranslation by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "【MX-X10-T5】[LSOT-4] Masuko or Haru？", "background": "Shion 作为社团活动后的作业，给 Yotsuba 出了一道数据结构题。\n\nYotsuba 本来是想用水路查资料的，但是查着查着就去和 Haru 聊天了……\n\n但是还有 1 秒就要到下午 5 点了！Yotsuba 只能去询问 Masuko 这道题怎么做了。\n\nMasuko 当然可以在 1 秒之内解决这道题，她现在想考考你看你能不能 1 秒内解决这道题！", "description": "给你 $n$ 个长度为 $m$ 的 01 串。\n\n区间二元组的定义为满足 $1\\le l\\le r\\le m$ 的二元组 $(l,r)$。\n\n区间集合的定义为区间二元组组成的集合。\n\n定义 01 串 $a$ 关于区间集合 $S$ 的一次变化为任选一个区间二元组 $(l,r)\\in S$，$\\forall i\\in[l,r],a_i\\gets a_i\\oplus 1$（$\\oplus$ 代表二进制按位异或）。\n\n定义 01 串 $a$ 和 $b$ 在区间集合 $S$ 下等价为 $a$ 可以在经过任意次关于 $S$ 的变化后变为 $b$。\n\n刚开始时 $S=\\emptyset$。\n\n一共有 $q$ 次操作，每次操作都为插入操作或询问操作。\n\n插入操作为给定一个区间二元组 $(l,r)$，$S\\gets S\\cup \\{(l,r)\\}$。\n\n询问操作为给定 $x,y$，你需要判断第 $x$ 个 01 串和第 $y$ 个 01 串是否关于区间集合 $S$ 等价。\n\n\n", "inputFormat": "第一行，三个整数 $n,m,q$。\n\n第二行，一个长为 $n\\times m$ 的 01 串，每 $m$ 个字符代表一个给定的 01 串，即第 $(i-1)\\times m+1$ 个字符到第 $i\\times m$ 个字符表示第 $i$ 个 01 串。\n\n接下来 $q$ 行，每行三个正整数，第一个正整数为 $op$。\n\n- 如果 $op=1$ 代表为插入操作，接下来两个正整数为 $l,r$。\n- 如果 $op=2$ 代表为询问操作，接下来两个正整数为 $x,y$。", "outputFormat": "对于每个询问操作，输出一行，一个字符串，如果等价则输出 `Masuko`，否则输出 `Haru`。", "hint": "**【样例解释 #1】**\n\n每个 01 串初始形如：\n\n`10011`，  \n`11001`。\n\n- 第一次询问：此时集合 $S$ 为空。两个 01 串显然不同。\n- 第二次询问：此时集合 $S$ 为 $\\{(2,3)\\}$，则第一个串只能变成 `10011` 或 `11111`，无法变得相同，故不等价。\n- 第三次询问：此时集合 $S$ 为 $\\{(2,3),(3,4)\\}$，依次进行 $(2,3)$ 变换和 $(3,4)$ 变换即可变为第二个串。故等价。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（17 分）：$n,m\\le 10$，$q\\le 20$。\n- 子任务 2（14 分）：$l=r$。\n- 子任务 3（16 分）：$l=r-1$。\n- 子任务 4（13 分）：插入操作不超过 $5000$ 次。\n- 子任务 5（21 分）：所有的插入操作在所有的询问操作之前。\n- 子任务 6（19 分）：无特殊性质。\n\n对于全部的数据，$1\\le q,n,m\\le 5\\times 10^6$，$n\\times m\\le 10^7$，$1\\le l\\le r\\le m$，$1\\le x,y\\le n$，$op\\in\\{1,2\\}$。", "locale": "zh-CN"}}}
{"pid": "P12010", "type": "P", "difficulty": 6, "samples": [["3 1\n", "24\n"], ["3 2\n", "6\n"], ["4 3\n", "2592\n"], ["114514 3\n", "750017326\n"], ["114514 19198\n", "274658403\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "中国剩余定理 CRT", "Lucas 定理", "梦熊比赛"], "title": "【MX-X10-T6】[LSOT-4] 集合", "background": "", "description": "记全集为 $U$。\n\n定义一个操作方案为对每个非空集合 $S \\subseteq U$ 选择 $S$ 中任意一个元素作为 $S$ 的代表元，记为 $r(S)$。\n\n一种操作方案是好的当且仅当对任意非空集合 $S \\subseteq U$，满足对于任意将其划分为 $m$ 个非空子集的方案 $A_1, A_2, \\ldots, A_m$，$\\exists 1 \\le i \\le m, r(A_i) = r(S)$。\n\n求 $U=\\{1, 2, \\ldots, n\\}$ 时的本质不同的好的操作方案数，将答案对 $1000000087$ 取模。\n\n两个操作方案是本质不同的，当且仅当存在某个非空集合 $S \n\\subseteq U$，使得 $r(S)$ 在两个操作方案中不同。\n", "inputFormat": "仅一行，两个正整数 $n, m$。\n", "outputFormat": "仅一行，一个整数，表示方案数对 $1000000087$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n所有方案都是好的，所以答案为 $1^3 \\times 2^3 \\times 3 = 24$。\n\n**【样例解释 #2】**\n\n$6$ 种方案分别为：\n\n$r(\\{1, 2, 3\\}) = 1$，$ r(\\{1, 2\\}) = 1$，$ r(\\{1, 3\\}) = 1$，$ r(\\{2, 3\\}) = 2$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$；\n\n$r(\\{1, 2, 3\\}) = 1$，$ r(\\{1, 2\\}) = 1$，$ r(\\{1, 3\\}) = 1$，$ r(\\{2, 3\\}) = 3$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$；\n\n$r(\\{1, 2, 3\\}) = 2$，$ r(\\{1, 2\\}) = 2$，$ r(\\{1, 3\\}) = 1$，$ r(\\{2, 3\\}) = 2$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$；\n\n$r(\\{1, 2, 3\\}) = 2$，$ r(\\{1, 2\\}) = 2$，$ r(\\{1, 3\\}) = 3$，$ r(\\{2, 3\\}) = 2$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$；\n\n$r(\\{1, 2, 3\\}) = 3$，$ r(\\{1, 2\\}) = 1$，$ r(\\{1, 3\\}) = 3$，$ r(\\{2, 3\\}) = 3$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$；\n\n$r(\\{1, 2, 3\\}) = 3$，$ r(\\{1, 2\\}) = 2$，$ r(\\{1, 3\\}) = 3$，$ r(\\{2, 3\\}) = 3$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（5 分）：$m = 2$。\n- 子任务 2（6 分）：$n \\le 4$。\n- 子任务 3（10 分）：$n \\le 3 \\times 10^3$。\n- 子任务 4（18 分）：$m = 1$。\n- 子任务 5（26 分）：$m \\le 3 \\times 10^3$。\n- 子任务 6（35 分）：无特殊限制。\n\n对于全部的数据，$1 \\le m < n \\le 2 \\times 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "【MX-X10-T6】[LSOT-4] Sets", "background": "", "description": "Let the universal set be $U$.\n\nAn **operation scheme** is defined as assigning to each non-empty subset $S \\subseteq U$ a representative element $r(S)$ chosen from $S$.\n\nAn operation scheme is **good** if and only if for every non-empty subset $S \\subseteq U$, it satisfies the following: for any partition of $S$ into $m$ non-empty subsets $A_1, A_2, \\ldots, A_m$, there exists $1 \\le i \\le m$ such that $r(A_i) = r(S)$.\n\nGiven $U = \\{1, 2, \\ldots, n\\}$, compute the number of **essentially distinct** good operation schemes modulo $1000000087$.\n\nTwo operation schemes are **essentially distinct** if and only if there exists at least one non-empty subset $S \\subseteq U$ where $r(S)$ differs between the two schemes.", "inputFormat": "A single line containing two positive integers $n, m$.", "outputFormat": "A single integer, the number of good operation schemes modulo $1000000087$.", "hint": "**Sample Explanation #1**\n\nAll schemes are good, so the answer is $1^3 \\times 2^3 \\times 3 = 24$.\n\n**Sample Explanation #2**\n\nThe six valid schemes are:\n\n1. $r(\\{1, 2, 3\\}) = 1$, $r(\\{1, 2\\}) = 1$, $r(\\{1, 3\\}) = 1$, $r(\\{2, 3\\}) = 2$, $r(\\{1\\}) = 1$, $r(\\{2\\}) = 2$, $r(\\{3\\}) = 3$;\n2. $r(\\{1, 2, 3\\}) = 1$, $r(\\{1, 2\\}) = 1$, $r(\\{1, 3\\}) = 1$, $r(\\{2, 3\\}) = 3$, $r(\\{1\\}) = 1$, $r(\\{2\\}) = 2$, $r(\\{3\\}) = 3$;\n3. $r(\\{1, 2, 3\\}) = 2$, $r(\\{1, 2\\}) = 2$, $r(\\{1, 3\\}) = 1$, $r(\\{2, 3\\}) = 2$, $r(\\{1\\}) = 1$, $r(\\{2\\}) = 2$, $r(\\{3\\}) = 3$;\n4. $r(\\{1, 2, 3\\}) = 2$, $r(\\{1, 2\\}) = 2$, $r(\\{1, 3\\}) = 3$, $r(\\{2, 3\\}) = 2$, $r(\\{1\\}) = 1$, $r(\\{2\\}) = 2$, $r(\\{3\\}) = 3$;\n5. $r(\\{1, 2, 3\\}) = 3$, $r(\\{1, 2\\}) = 1$, $r(\\{1, 3\\}) = 3$, $r(\\{2, 3\\}) = 3$, $r(\\{1\\}) = 1$, $r(\\{2\\}) = 2$, $r(\\{3\\}) = 3$;\n6. $r(\\{1, 2, 3\\}) = 3$, $r(\\{1, 2\\}) = 2$, $r(\\{1, 3\\}) = 3$, $r(\\{2, 3\\}) = 3$, $r(\\{1\\}) = 1$, $r(\\{2\\}) = 2$, $r(\\{3\\}) = 3$.\n\n**Data Range**\n\n**This problem uses subtasks with bundled testing.**\n\n- Subtask 1 (5 pts): $m = 2$.\n- Subtask 2 (6 pts): $n \\le 4$.\n- Subtask 3 (10 pts): $n \\le 3 \\times 10^3$.\n- Subtask 4 (18 pts): $m = 1$.\n- Subtask 5 (26 pts): $m \\le 3 \\times 10^3$.\n- Subtask 6 (35 pts): No additional constraints.\n\nFor all test cases: $1 \\le m < n \\le 2 \\times 10^5$.\n\nTranslation by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "【MX-X10-T6】[LSOT-4] 集合", "background": "", "description": "记全集为 $U$。\n\n定义一个操作方案为对每个非空集合 $S \\subseteq U$ 选择 $S$ 中任意一个元素作为 $S$ 的代表元，记为 $r(S)$。\n\n一种操作方案是好的当且仅当对任意非空集合 $S \\subseteq U$，满足对于任意将其划分为 $m$ 个非空子集的方案 $A_1, A_2, \\ldots, A_m$，$\\exists 1 \\le i \\le m, r(A_i) = r(S)$。\n\n求 $U=\\{1, 2, \\ldots, n\\}$ 时的本质不同的好的操作方案数，将答案对 $1000000087$ 取模。\n\n两个操作方案是本质不同的，当且仅当存在某个非空集合 $S \n\\subseteq U$，使得 $r(S)$ 在两个操作方案中不同。\n", "inputFormat": "仅一行，两个正整数 $n, m$。\n", "outputFormat": "仅一行，一个整数，表示方案数对 $1000000087$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n所有方案都是好的，所以答案为 $1^3 \\times 2^3 \\times 3 = 24$。\n\n**【样例解释 #2】**\n\n$6$ 种方案分别为：\n\n$r(\\{1, 2, 3\\}) = 1$，$ r(\\{1, 2\\}) = 1$，$ r(\\{1, 3\\}) = 1$，$ r(\\{2, 3\\}) = 2$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$；\n\n$r(\\{1, 2, 3\\}) = 1$，$ r(\\{1, 2\\}) = 1$，$ r(\\{1, 3\\}) = 1$，$ r(\\{2, 3\\}) = 3$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$；\n\n$r(\\{1, 2, 3\\}) = 2$，$ r(\\{1, 2\\}) = 2$，$ r(\\{1, 3\\}) = 1$，$ r(\\{2, 3\\}) = 2$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$；\n\n$r(\\{1, 2, 3\\}) = 2$，$ r(\\{1, 2\\}) = 2$，$ r(\\{1, 3\\}) = 3$，$ r(\\{2, 3\\}) = 2$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$；\n\n$r(\\{1, 2, 3\\}) = 3$，$ r(\\{1, 2\\}) = 1$，$ r(\\{1, 3\\}) = 3$，$ r(\\{2, 3\\}) = 3$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$；\n\n$r(\\{1, 2, 3\\}) = 3$，$ r(\\{1, 2\\}) = 2$，$ r(\\{1, 3\\}) = 3$，$ r(\\{2, 3\\}) = 3$，$ r(\\{1\\}) = 1$，$ r(\\{2\\}) = 2$，$ r(\\{3\\}) = 3$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（5 分）：$m = 2$。\n- 子任务 2（6 分）：$n \\le 4$。\n- 子任务 3（10 分）：$n \\le 3 \\times 10^3$。\n- 子任务 4（18 分）：$m = 1$。\n- 子任务 5（26 分）：$m \\le 3 \\times 10^3$。\n- 子任务 6（35 分）：无特殊限制。\n\n对于全部的数据，$1 \\le m < n \\le 2 \\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P12011", "type": "P", "difficulty": 7, "samples": [["2 5\n3 4\n2 3\n", "6\n"], ["7 3\n2 2\n1 2\n1 0\n2 1\n1 1\n2 1\n2 0\n", "30\n"], ["8 935259307\n761834349 406479726\n404588595 588271872\n835094749 847811683\n52046622 489905911\n530455310 402465343\n616226641 808848730\n891363714 745033395\n207684362 101456684\n", "46008831\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "原根", "数论", "大步小步算法 BSGS", "梦熊比赛"], "title": "【MX-X10-T7】[LSOT-4] 春开，意遥遥。", "background": "> Spring has come true？\n\n冬音在某次轮回时候本来给一季出的是这道题，但是由于作者怕大家看不懂 OI 题就换成将棋题了，因此被删除，已经过了 12 年了，于是在此放出原来的题。", "description": "定义二元组乘法为：$(x,y)\\times(a,b)=(x\\times b+y\\times a,x\\times a+y\\times b)$。\n\n由于该乘法定义满足结合律（可自行验证），可以定义二元组的乘方：对二元组 $a$ 和**正整数** $b$，$a^b$ 为 $b$ 个 $a$ 顺次相乘（由结合律可知不同计算顺序下结果唯一）。\n\n定义两二元组 $(x,y)$ 和 $(a,b)$ 在模 $p$ 意义下相同当且仅当 $a\\times y\\equiv x\\times b \\pmod p$。**（注意此处的相同未必具有传递性。）**\n\n冬音给出了一个长度为 $n$ 的二元组序列 $a$。\n\n她希望一季能求出最多选出多少个长度为 $n$ 的正整数序列 $b$ 使得对于每个 $b$，$\\prod_{i=1}^n a_i^{b_i}$ 在模 $p$ 意义下互不相同。**保证 $\\boldsymbol{p}$ 为质数。**\n\n求对于每一个区间的上面这个问题的答案的和对 $10^9+7$ 取模的结果。", "inputFormat": "第一行，两个整数 $n,p$。**保证 $\\boldsymbol{p}$ 为质数。**\n\n接下来 $n$ 行，第 $i$ 行两个整数 $x_i,y_i$，表示 $a_i=(x_i,y_i)$。", "outputFormat": "仅一行，一个整数，表示答案的和对 $10^9+7$ 取模的结果。\n", "hint": "**【样例解释 #1】**\n\n区间 $[1,1]$ 的答案为 $4$，其中一种选择方案中选择的 $b$ 分别为 $\\{1\\},\\{2\\},\\{3\\},\\{4\\}$。\n\n区间 $[1,2]$ 的答案为 $1$，其中一种选择方案中选择的 $b$ 为 $\\{1,1\\}$。\n\n区间 $[2,2]$ 的答案为 $1$，其中一种选择方案中选择的 $b$ 为 $\\{1\\}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（4 分）：$n\\le2$，$p\\le 5$。\n- 子任务 2（8 分）：$n\\le5$，$p\\le 5$。\n- 子任务 3（5 分）：$x_i=p-y_i$。\n- 子任务 4（3 分）：$x_i=y_i$。\n- 子任务 5（21 分）：$x_i=y_i-1$。\n- 子任务 6（7 分）：$p=2$。\n- 子任务 7（6 分）：$p=5$。\n- 子任务 8（7 分）：$p\\le 5003$。\n- 子任务 9（8 分）：$p\\le 10^9+7$。\n- 子任务 10（14 分）：$p\\le 10^{12}+39$。\n- 子任务 11（17 分）：无特殊性质。\n\n对于全部的数据，$1\\le n\\le 10^5$，$2\\le p\\le 10^{14}+67$，$0\\le x_i,y_i<p$。**保证 $\\boldsymbol{p}$ 为质数。**", "locale": "zh-CN", "translations": {"en": {"title": "【MX-X10-T7】[LSOT-4] Spring, the Distant Wish", "background": "> Spring has come true？\n\nThis problem was originally prepared by Fuyune for Kazuho during a certain cycle of time but was replaced with a shogi problem due to the author's concern about the difficulty of OI problems. After 12 years, the original problem is now released here.", "description": "Define the multiplication of ordered pairs as:  \n$$(x,y) \\times (a,b) = (x \\times b + y \\times a,\\ x \\times a + y \\times b).$$  \n\nSince this multiplication satisfies the associative law (verification is left to the reader), we can define the exponentiation of ordered pairs: for an ordered pair $a$ and a **positive integer** $b$, $a^b$ represents the product of $b$ copies of $a$ (the result is unique due to associativity).  \n\nTwo ordered pairs $(x,y)$ and $(a,b)$ are considered **identical under modulo $p$** if and only if  \n$$a \\times y \\equiv x \\times b \\pmod{p}.$$  \n**Note: This \"identity\" is not necessarily transitive.**  \n\nFuyune provides a sequence of $n$ ordered pairs $a$.  \n\nShe asks Kazuho to determine the maximum number of length-$n$ positive integer sequences $b$ that can be selected such that for each $b$, the products $\\prod_{i=1}^n a_i^{b_i}$ are pairwise distinct under modulo $p$. **It is guaranteed that $p$ is a prime.**  \n\nCompute the sum of the answers for all intervals $[l, r]$ (where $1 \\le l \\le r \\le n$), modulo $10^9+7$.  ", "inputFormat": "- The first line contains two integers $n$ and $p$. **It is guaranteed that $p$ is a prime.**  \n- The next $n$ lines each contain two integers $x_i$ and $y_i$, representing the ordered pair $a_i = (x_i, y_i)$.  ", "outputFormat": "A single integer, the sum of answers for all intervals modulo $10^9+7$.  ", "hint": "**Sample Explanation #1**  \n\n- For interval $[1,1]$, the answer is $4$. One valid selection includes sequences $\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}$.  \n- For interval $[1,2]$, the answer is $1$. One valid selection is $\\{1,1\\}$.  \n- For interval $[2,2]$, the answer is $1$. One valid selection is $\\{1\\}$.  \n\n**Data Range**  \n\n**This problem uses subtasks with bundled testing.**  \n\n- Subtask 1 (4 pts): $n \\le 2$, $p \\le 5$.  \n- Subtask 2 (8 pts): $n \\le 5$, $p \\le 5$.  \n- Subtask 3 (5 pts): $x_i = p - y_i$.  \n- Subtask 4 (3 pts): $x_i = y_i$.  \n- Subtask 5 (21 pts): $x_i = y_i - 1$.  \n- Subtask 6 (7 pts): $p = 2$.  \n- Subtask 7 (6 pts): $p = 5$.  \n- Subtask 8 (7 pts): $p \\le 5003$.  \n- Subtask 9 (8 pts): $p \\le 10^9+7$.  \n- Subtask 10 (14 pts): $p \\le 10^{12}+39$.  \n- Subtask 11 (17 pts): No additional constraints.  \n\nFor all test cases:  \n$1 \\le n \\le 10^5$,  \n$2 \\le p \\le 10^{14}+67$,  \n$0 \\le x_i, y_i < p$.  \n**It is guaranteed that $p$ is a prime.**  \n\nTranslation by DeepSeek R1  ", "locale": "en"}, "zh-CN": {"title": "【MX-X10-T7】[LSOT-4] 春开，意遥遥。", "background": "> Spring has come true？\n\n冬音在某次轮回时候本来给一季出的是这道题，但是由于作者怕大家看不懂 OI 题就换成将棋题了，因此被删除，已经过了 12 年了，于是在此放出原来的题。", "description": "定义二元组乘法为：$(x,y)\\times(a,b)=(x\\times b+y\\times a,x\\times a+y\\times b)$。\n\n由于该乘法定义满足结合律（可自行验证），可以定义二元组的乘方：对二元组 $a$ 和**正整数** $b$，$a^b$ 为 $b$ 个 $a$ 顺次相乘（由结合律可知不同计算顺序下结果唯一）。\n\n定义两二元组 $(x,y)$ 和 $(a,b)$ 在模 $p$ 意义下相同当且仅当 $a\\times y\\equiv x\\times b \\pmod p$。**（注意此处的相同未必具有传递性。）**\n\n冬音给出了一个长度为 $n$ 的二元组序列 $a$。\n\n她希望一季能求出最多选出多少个长度为 $n$ 的正整数序列 $b$ 使得对于每个 $b$，$\\prod_{i=1}^n a_i^{b_i}$ 在模 $p$ 意义下互不相同。**保证 $\\boldsymbol{p}$ 为质数。**\n\n求对于每一个区间的上面这个问题的答案的和对 $10^9+7$ 取模的结果。", "inputFormat": "第一行，两个整数 $n,p$。**保证 $\\boldsymbol{p}$ 为质数。**\n\n接下来 $n$ 行，第 $i$ 行两个整数 $x_i,y_i$，表示 $a_i=(x_i,y_i)$。", "outputFormat": "仅一行，一个整数，表示答案的和对 $10^9+7$ 取模的结果。\n", "hint": "**【样例解释 #1】**\n\n区间 $[1,1]$ 的答案为 $4$，其中一种选择方案中选择的 $b$ 分别为 $\\{1\\},\\{2\\},\\{3\\},\\{4\\}$。\n\n区间 $[1,2]$ 的答案为 $1$，其中一种选择方案中选择的 $b$ 为 $\\{1,1\\}$。\n\n区间 $[2,2]$ 的答案为 $1$，其中一种选择方案中选择的 $b$ 为 $\\{1\\}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- 子任务 1（4 分）：$n\\le2$，$p\\le 5$。\n- 子任务 2（8 分）：$n\\le5$，$p\\le 5$。\n- 子任务 3（5 分）：$x_i=p-y_i$。\n- 子任务 4（3 分）：$x_i=y_i$。\n- 子任务 5（21 分）：$x_i=y_i-1$。\n- 子任务 6（7 分）：$p=2$。\n- 子任务 7（6 分）：$p=5$。\n- 子任务 8（7 分）：$p\\le 5003$。\n- 子任务 9（8 分）：$p\\le 10^9+7$。\n- 子任务 10（14 分）：$p\\le 10^{12}+39$。\n- 子任务 11（17 分）：无特殊性质。\n\n对于全部的数据，$1\\le n\\le 10^5$，$2\\le p\\le 10^{14}+67$，$0\\le x_i,y_i<p$。**保证 $\\boldsymbol{p}$ 为质数。**", "locale": "zh-CN"}}}
{"pid": "P12012", "type": "P", "difficulty": 5, "samples": [["20 20 152\n3 26 133 54 79 81 72 109 66 91 82 100 35 23 104 17 51 114 12 58\n2 1 17\n2 6 12\n1 1 12\n2 3 5\n2 11 11\n2 7 19\n2 6 15\n1 5 12\n1 1 9\n1 10 19\n2 3 19\n2 6 20\n2 1 13\n2 1 15\n2 1 9\n1 1 1\n2 1 7\n2 7 19\n2 6 19\n2 3 6", "Yuno\nYuno\nYuno\nYuno\nYuki"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2025", "O2优化", "Ynoi"], "title": "[Ynoi April Fool's Round 2025] 牢爱", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/vzdicxqw.png)", "description": "星野爱给了你一个长为 $n$ 的序列 $a_1,a_2,\\ldots,a_n$，每个数在 $0$ 到 $v - 1$ 之间，有 $m$ 次操作。\n\n操作 $1$：每次询问一个区间中是否可以选出两个下标的非空集合 $X,Y$，满足：\n\n1. $X$ 和 $Y$ 没有交集。\n2. 设集合 $X$ 中有一个元素是 $i$，则其对集合 $X$ 的贡献是 $a_i + 1$，要求集合 $X$ 的元素的总贡献和集合 $Y$ 的元素的总贡献相等。如果可以选出这两个集合，输出 `Yuno` 否则输出 `Yuki`。\n\n操作 $2$：修改一个区间 $l,r$ 之间的数，使得所有 $l\\leq i\\leq r$，$a_i = a_i^3 \\bmod v$，即区间立方。", "inputFormat": "第一行三个整数 $n , m , v$，意义如题所述。\n\n之后一行 $n$ 个整数，表示序列 $a$。\n\n之后 $m$ 行每行三个数 $opt , l , r$，表示操作类型是 $1$ 还是 $2$，操作的区间是 $[l , r]$。", "outputFormat": "对每个询问输出一行一个字符串 `Yuno` 或者 `Yuki` 表示能否选出这两个集合。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，$1\\leq n , m\\leq 10^5$，$1\\leq v\\leq 1000$，数据没有梯度。", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi April Fool's Round 2025] Ai in Jail.", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/vzdicxqw.png)", "description": "Hoshino Ai gives you a sequence $a_1, a_2, \\ldots, a_n$ of length $n$. Each number is between $0$ and $v - 1$. There are $m$ operations.\n\nOperation $1$: Each time, ask whether it is possible to choose two non-empty sets of indices $X, Y$ in an interval such that:\n\n1. $X$ and $Y$ are disjoint.\n2. For an element $i \\in X$, its contribution to set $X$ is $a_i + 1$. The total contribution of elements in $X$ must be equal to the total contribution of elements in $Y$. If such two sets can be chosen, output `Yuno`; otherwise output `Yuki`.\n\nOperation $2$: Modify the numbers in an interval $[l, r]$ so that for all $l \\leq i \\leq r$, $a_i = a_i^3 \\bmod v$, i.e., take the cube modulo $v$ on the interval.", "inputFormat": "The first line contains three integers $n, m, v$, with meanings as described above.\n\nThe next line contains $n$ integers, representing the sequence $a$.\n\nThen follow $m$ lines, each containing three numbers $opt, l, r$, indicating whether the operation type is $1$ or $2$, and the operated interval is $[l, r]$.", "outputFormat": "For each query, output one line containing a string `Yuno` or `Yuki`, indicating whether such two sets can be chosen.", "hint": "Idea: nzhtl1477, Solution: nzhtl1477, Code: nzhtl1477, Data: nzhtl1477.\n\nConstraints: For $100\\%$ of the testdata, $1 \\leq n, m \\leq 10^5$, $1 \\leq v \\leq 1000$. The testdata has no subtasks or grading by difficulty.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi April Fool's Round 2025] 牢爱", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/vzdicxqw.png)", "description": "星野爱给了你一个长为 $n$ 的序列 $a_1,a_2,\\ldots,a_n$，每个数在 $0$ 到 $v - 1$ 之间，有 $m$ 次操作。\n\n操作 $1$：每次询问一个区间中是否可以选出两个下标的非空集合 $X,Y$，满足：\n\n1. $X$ 和 $Y$ 没有交集。\n2. 设集合 $X$ 中有一个元素是 $i$，则其对集合 $X$ 的贡献是 $a_i + 1$，要求集合 $X$ 的元素的总贡献和集合 $Y$ 的元素的总贡献相等。如果可以选出这两个集合，输出 `Yuno` 否则输出 `Yuki`。\n\n操作 $2$：修改一个区间 $l,r$ 之间的数，使得所有 $l\\leq i\\leq r$，$a_i = a_i^3 \\bmod v$，即区间立方。", "inputFormat": "第一行三个整数 $n , m , v$，意义如题所述。\n\n之后一行 $n$ 个整数，表示序列 $a$。\n\n之后 $m$ 行每行三个数 $opt , l , r$，表示操作类型是 $1$ 还是 $2$，操作的区间是 $[l , r]$。", "outputFormat": "对每个询问输出一行一个字符串 `Yuno` 或者 `Yuki` 表示能否选出这两个集合。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，$1\\leq n , m\\leq 10^5$，$1\\leq v\\leq 1000$，数据没有梯度。", "locale": "zh-CN"}}}
{"pid": "P12013", "type": "P", "difficulty": 5, "samples": [["5 8\n-7 -8 -1 5 8\n1 4 5 -3\n1 2 3 7\n1 5 5 3\n1 1 4 1\n2 4 5\n1 3 4 -1\n1 1 2 7\n2 4 5", "11/2\n5/1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "线段树", "2025", "O2优化", "Ynoi"], "title": "[Ynoi April Fool's Round 2025] 牢夸", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/e2bc555h.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gv7lfgsa.png)", "description": "星野爱久爱海给你一个长度 $n$ 的序列 $a_1,\\dots,a_n$，共 $m$ 次操作，共两种操作类型：\n\n1. 给定 $l,r,x$，将 $a_l,\\dots,a_r$ 加上 $x$。\n2. 给定 $l,r$，查询 $\\mathop{\\max}\\limits_{l\\le L<R\\le r}\\frac{\\sum\\limits_{i=L}^R a_i}{R-L+1}$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行 $1,l,r,x$ 或 $2,l,r$ 表示一个操作。", "outputFormat": "对每个操作2，输出一行，包含一个最简分数（形如 `a/b` 或 `-a/b` 或 `0/1` ； $a,b$ 是互质的正整数）表示答案，例如 $\\frac{5}{3},\\;-\\frac46,\\;-1,\\;0,\\;2$ 分别应输出为 `5/3` ， `-2/3` ，`-1/1` ，`0/1` ，`2/1`。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 100$。\n\n对于 $50\\%$ 的数据，满足 $n,m\\le 8000$。\n\n对于另外 $25\\%$ 的数据，满足没有操作 $1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$|a_i|,|x|\\le 10^3$，所有数值为整数。对于操作 $2$，保证不存在 $l=r$ 的情况。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi April Fool's Round 2025] 牢夸", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/e2bc555h.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gv7lfgsa.png)", "description": "星野爱久爱海给你一个长度 $n$ 的序列 $a_1,\\dots,a_n$，共 $m$ 次操作，共两种操作类型：\n\n1. 给定 $l,r,x$，将 $a_l,\\dots,a_r$ 加上 $x$。\n2. 给定 $l,r$，查询 $\\mathop{\\max}\\limits_{l\\le L<R\\le r}\\frac{\\sum\\limits_{i=L}^R a_i}{R-L+1}$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行 $1,l,r,x$ 或 $2,l,r$ 表示一个操作。", "outputFormat": "对每个操作2，输出一行，包含一个最简分数（形如 `a/b` 或 `-a/b` 或 `0/1` ； $a,b$ 是互质的正整数）表示答案，例如 $\\frac{5}{3},\\;-\\frac46,\\;-1,\\;0,\\;2$ 分别应输出为 `5/3` ， `-2/3` ，`-1/1` ，`0/1` ，`2/1`。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 100$。\n\n对于 $50\\%$ 的数据，满足 $n,m\\le 8000$。\n\n对于另外 $25\\%$ 的数据，满足没有操作 $1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$|a_i|,|x|\\le 10^3$，所有数值为整数。对于操作 $2$，保证不存在 $l=r$ 的情况。", "locale": "zh-CN"}}}
{"pid": "P12014", "type": "P", "difficulty": 6, "samples": [["5 10 3 2\n1 2 3 4 5\n4 2\n1 1 2\n1 3 4\n4 0\n1 2 3\n3 2 5\n4 1\n2 3 4\n1 4 5\n4 2", "7\n1\n3\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2025", "O2优化", "Ynoi"], "title": "[Ynoi April Fool's Round 2025] 牢帽", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/r3tyz3yn.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6eimo1n7.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fmnc0m53.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ipn5yd36.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kidw80rz.png)", "description": "星野加奈给你一个 $n$ 个点的无向图，图初始没有边。他还有整数 $u,v$ 和 $a_1,a_2,\\cdots ,a_n$。现在有 $q$ 次操作，操作有四种：\n\n1. ```1 x y``` ：连接 $x,y$ 之间的边，保证边原先不存在。\n2. ```2 x y``` ：删除 $x,y$ 之间的边，保证边原先存在。\n3. ```3 x y``` ：将 $a_x$ 修改为 $y$ 。\n4. ```4 x``` ：设图分为 $C_1,C_2,\\cdots ,C_k$ 共 $k$ 个连通块，求出 $\\sum_{i=1}^k \\prod_{j\\in C_i}(a_j+x) \\bmod u^v$。", "inputFormat": "第一行四个整数 $n,q,u,v$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots , a_n$。\n\n接下来 $q$ 行，每行表示一次操作。", "outputFormat": "若干行，每行一个整数，表示每次 $4$ 操作的答案。", "hint": "Idea：忘记来源了，请当时的出题人 qq 私信我\n\n### 样例二\n\n见附件中的 `ex_c2.in` 和 `ex_c2.ans`，此样例满足子任务 $1$。\n\n### 样例三\n\n见附件中的 `ex_c3.in` 和 `ex_c3.ans`，此样例满足子任务 $2$。\n\n### 样例四\n\n见附件中的 `ex_c4.in` 和 `ex_c4.ans`，此样例满足子任务 $6$。\n\n\n### 限制与约定\n\n本题采用捆绑测试。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,q\\leq 10^5,1\\leq u\\leq 10,1\\leq v\\leq 4,0\\leq a_i <10^4$，$3$ 操作中 $y$、$4$ 操作中 $x$ 均为小于 $10^4$ 的非负整数。\n\n| 子任务编号 | 分值 | $n\\leq$ | $q\\leq$ | 特殊性质                             |\n| :--------- | ---- | ------- | ------- | ------------------------------------ |\n| $1$        | $20$ | $5000$  | $5000$  | $/$                                  |\n| $2$        | $10$ | $10^5$  | $10^5$  | 对所有 $4$ 操作，$x=0$。             |\n| $3$        | $15$ | $10^5$  | $10^5$  | $v=1$                                |\n| $4$        | $15$ | $10^5$  | $10^5$  | 对所有 $4$ 操作，$x$ 是 $u$ 的倍数。 |\n| $5$        | $15$ | $10^5$  | $10^5$  | 没有 $2,3$ 操作。                    |\n| $6$        | $25$ | $10^5$  | $10^5$  | $/$                                  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi April Fool's Round 2025] 牢帽", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/r3tyz3yn.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6eimo1n7.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fmnc0m53.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ipn5yd36.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kidw80rz.png)", "description": "星野加奈给你一个 $n$ 个点的无向图，图初始没有边。他还有整数 $u,v$ 和 $a_1,a_2,\\cdots ,a_n$。现在有 $q$ 次操作，操作有四种：\n\n1. ```1 x y``` ：连接 $x,y$ 之间的边，保证边原先不存在。\n2. ```2 x y``` ：删除 $x,y$ 之间的边，保证边原先存在。\n3. ```3 x y``` ：将 $a_x$ 修改为 $y$ 。\n4. ```4 x``` ：设图分为 $C_1,C_2,\\cdots ,C_k$ 共 $k$ 个连通块，求出 $\\sum_{i=1}^k \\prod_{j\\in C_i}(a_j+x) \\bmod u^v$。", "inputFormat": "第一行四个整数 $n,q,u,v$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots , a_n$。\n\n接下来 $q$ 行，每行表示一次操作。", "outputFormat": "若干行，每行一个整数，表示每次 $4$ 操作的答案。", "hint": "Idea：忘记来源了，请当时的出题人 qq 私信我\n\n### 样例二\n\n见附件中的 `ex_c2.in` 和 `ex_c2.ans`，此样例满足子任务 $1$。\n\n### 样例三\n\n见附件中的 `ex_c3.in` 和 `ex_c3.ans`，此样例满足子任务 $2$。\n\n### 样例四\n\n见附件中的 `ex_c4.in` 和 `ex_c4.ans`，此样例满足子任务 $6$。\n\n\n### 限制与约定\n\n本题采用捆绑测试。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,q\\leq 10^5,1\\leq u\\leq 10,1\\leq v\\leq 4,0\\leq a_i <10^4$，$3$ 操作中 $y$、$4$ 操作中 $x$ 均为小于 $10^4$ 的非负整数。\n\n| 子任务编号 | 分值 | $n\\leq$ | $q\\leq$ | 特殊性质                             |\n| :--------- | ---- | ------- | ------- | ------------------------------------ |\n| $1$        | $20$ | $5000$  | $5000$  | $/$                                  |\n| $2$        | $10$ | $10^5$  | $10^5$  | 对所有 $4$ 操作，$x=0$。             |\n| $3$        | $15$ | $10^5$  | $10^5$  | $v=1$                                |\n| $4$        | $15$ | $10^5$  | $10^5$  | 对所有 $4$ 操作，$x$ 是 $u$ 的倍数。 |\n| $5$        | $15$ | $10^5$  | $10^5$  | 没有 $2,3$ 操作。                    |\n| $6$        | $25$ | $10^5$  | $10^5$  | $/$                                  |", "locale": "zh-CN"}}}
{"pid": "P12015", "type": "P", "difficulty": 3, "samples": [["3 1\n2 2\n4 5\n5 4\n5", "4"], ["5 2\n7 7\n6 3\n10 4\n4 4\n9 1\n7 10", "7"], ["10 5\n19 10\n5 3\n1 2\n3 6\n17 2\n20 3\n8 2\n12 3\n14 2\n15 1\n40 13 37 14 6", "23"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2025", "NOISG（新加坡）"], "title": "[NOISG 2025 Finals] Monsters", "background": "", "description": "Penguinland is an infinite number line with n monsters. The $i$-th monster is initially at position $a[i]$ on the number line, with health $h[i]$. It is guaranteed that no two monsters share the same initial position.\n\nToday, Brian the penguin wishes to defeat all the monsters! To defeat them, Brian has planted $k$ mines at certain positions. The $j$-th mine is located at position $x[j]$. Detonating a mine **instantly destroys all monsters** standing on that position, and each mine can be detonated any number of times. However, each detonation costs $1$ dollar. It is guaranteed that no two mines are planted at the same position.\n\nIn addition to detonating mines, Brian can also perform two types of operations:\n\n- Move a monster left or right by $1$ unit along the number line.\n- Increase or decrease a monster’s health by $1$.\n\nEach operation costs $1$ dollar to execute.\n\nA monster is considered defeated if its health reaches $0$ or if it is destroyed by a mine. Help Brian find the minimum cost (in dollars) needed to defeat all the monsters.\n", "inputFormat": "Your program must read from standard input.\n\nThe first line of input contains two space-separated integers $n$ and $k$.\n\nThe following $n$ lines each contain two space-separated integers. The $i$-th of these lines contains $a[i]$ and $h[i]$.\n\nThe last line of input contains $k$ space-separated integers $x[1], x[2], \\ldots, x[k]$.\n", "outputFormat": "Your program must print to standard output.\n\nOutput a single integer, the minimum cost (in dollars) needed to defeat all the monsters.\n\nThe output should contain only a single integer. Do not print any additional text such as Enter a number or The answer is.\n", "hint": "### Subtasks\n\nFor all test cases, the input will satisfy the following bounds:\n\n- $1 \\leq n, k \\leq 200\\,000$\n- $1 \\leq a[i], h[i] \\leq 10^9$ for all $1 \\leq i \\leq n$\n- $1 \\leq x[i] \\leq 10^9$ for all $1 \\leq i \\leq k$\n- $a[i] \\neq a[j]$ for all $i \\neq j$\n- $x[i] \\neq x[j]$ for all $i \\neq j$\n\nYour program will be tested on input instances that satisfy the following restrictions:\n\n| Subtask | Marks | Additional constraints |\n| :-: | :-: | :-: |\n| $0$ | $0$ | Sample test cases |\n| $1$ | $14$ | $k = 1$ |\n| $2$ | $6$ | $k = 2$ |\n| $3$ | $10$ | $n, k \\leq 18$ |\n| $4$ | $30$ | $n, k \\leq 3000$ |\n| $5$ | $29$ | $h[i] = 10^9$ |\n| $6$ | $11$ | No additional constraints |\n\n### Sample Test Case 1 Explanation\n\nThere are $n = 3$ monsters and $k = 1$ mine. Brian can:\n\n- Decrease the health of monster $1$ to $0$, costing $2$ dollars.\n- Move monster $2$ to the right by $1$ unit (changing its position from $4$ to $5$), costing $1$ dollar.\n- Detonate the mine at position $5$, defeating both monsters $2$ and $3$, costing $1$ dollar.\n\nThe total cost needed is $2 + 1 + 1 = 4$ dollars.\n\nThis test case is valid for subtasks $1, 3, 4$, and $6$.\n\n### Sample Test Case 2 Explanation\n\nThis test case is valid for subtasks $2, 3, 4$, and $6$.\n\nThere are $n = 5$ monsters and $k = 2$ mines. Brian can:\n\n- Decrease the health of monster $5$ to $0$, costing $1$ dollar.\n- Detonate mine $2$, defeating monster $3$, costing $1$ dollar.\n- Move monster $2$ to the right by $1$ unit (changing its position from $6$ to $7$), costing $1$ dollar.\n- Move monster $4$ to the right by $3$ units (changing its position from $4$ to $7$), costing $3$ dollars.\n- Detonate mine $1$, defeating monsters $1, 2$, and $4$, costing $1$ dollar.\n\nThe total cost needed is $1 + 1 + 1 + 3 + 1 = 7$ dollars.\n\n### Sample Test Case 3 Explanation\n\nThis test case is valid for subtasks $3, 4$, and $6$.\n", "locale": "en", "translations": {"en": {"title": "[NOISG 2025 Finals] Monsters", "background": "", "description": "Penguinland is an infinite number line with n monsters. The $i$-th monster is initially at position $a[i]$ on the number line, with health $h[i]$. It is guaranteed that no two monsters share the same initial position.\n\nToday, Brian the penguin wishes to defeat all the monsters! To defeat them, Brian has planted $k$ mines at certain positions. The $j$-th mine is located at position $x[j]$. Detonating a mine **instantly destroys all monsters** standing on that position, and each mine can be detonated any number of times. However, each detonation costs $1$ dollar. It is guaranteed that no two mines are planted at the same position.\n\nIn addition to detonating mines, Brian can also perform two types of operations:\n\n- Move a monster left or right by $1$ unit along the number line.\n- Increase or decrease a monster’s health by $1$.\n\nEach operation costs $1$ dollar to execute.\n\nA monster is considered defeated if its health reaches $0$ or if it is destroyed by a mine. Help Brian find the minimum cost (in dollars) needed to defeat all the monsters.\n", "inputFormat": "Your program must read from standard input.\n\nThe first line of input contains two space-separated integers $n$ and $k$.\n\nThe following $n$ lines each contain two space-separated integers. The $i$-th of these lines contains $a[i]$ and $h[i]$.\n\nThe last line of input contains $k$ space-separated integers $x[1], x[2], \\ldots, x[k]$.\n", "outputFormat": "Your program must print to standard output.\n\nOutput a single integer, the minimum cost (in dollars) needed to defeat all the monsters.\n\nThe output should contain only a single integer. Do not print any additional text such as Enter a number or The answer is.\n", "hint": "### Subtasks\n\nFor all test cases, the input will satisfy the following bounds:\n\n- $1 \\leq n, k \\leq 200\\,000$\n- $1 \\leq a[i], h[i] \\leq 10^9$ for all $1 \\leq i \\leq n$\n- $1 \\leq x[i] \\leq 10^9$ for all $1 \\leq i \\leq k$\n- $a[i] \\neq a[j]$ for all $i \\neq j$\n- $x[i] \\neq x[j]$ for all $i \\neq j$\n\nYour program will be tested on input instances that satisfy the following restrictions:\n\n| Subtask | Marks | Additional constraints |\n| :-: | :-: | :-: |\n| $0$ | $0$ | Sample test cases |\n| $1$ | $14$ | $k = 1$ |\n| $2$ | $6$ | $k = 2$ |\n| $3$ | $10$ | $n, k \\leq 18$ |\n| $4$ | $30$ | $n, k \\leq 3000$ |\n| $5$ | $29$ | $h[i] = 10^9$ |\n| $6$ | $11$ | No additional constraints |\n\n### Sample Test Case 1 Explanation\n\nThere are $n = 3$ monsters and $k = 1$ mine. Brian can:\n\n- Decrease the health of monster $1$ to $0$, costing $2$ dollars.\n- Move monster $2$ to the right by $1$ unit (changing its position from $4$ to $5$), costing $1$ dollar.\n- Detonate the mine at position $5$, defeating both monsters $2$ and $3$, costing $1$ dollar.\n\nThe total cost needed is $2 + 1 + 1 = 4$ dollars.\n\nThis test case is valid for subtasks $1, 3, 4$, and $6$.\n\n### Sample Test Case 2 Explanation\n\nThis test case is valid for subtasks $2, 3, 4$, and $6$.\n\nThere are $n = 5$ monsters and $k = 2$ mines. Brian can:\n\n- Decrease the health of monster $5$ to $0$, costing $1$ dollar.\n- Detonate mine $2$, defeating monster $3$, costing $1$ dollar.\n- Move monster $2$ to the right by $1$ unit (changing its position from $6$ to $7$), costing $1$ dollar.\n- Move monster $4$ to the right by $3$ units (changing its position from $4$ to $7$), costing $3$ dollars.\n- Detonate mine $1$, defeating monsters $1, 2$, and $4$, costing $1$ dollar.\n\nThe total cost needed is $1 + 1 + 1 + 3 + 1 = 7$ dollars.\n\n### Sample Test Case 3 Explanation\n\nThis test case is valid for subtasks $3, 4$, and $6$.\n", "locale": "en"}, "zh-CN": {"title": "[NOISG 2025 Finals] 怪物", "background": "", "description": "Penguinland 是一条无限的数轴，上面有 $n$ 只怪物。第 $i$ 只怪物最初位于数轴上的位置 $a[i]$，其生命值为 $h[i]$。保证没有两只怪物具有相同的初始位置。\n\n今天，企鹅 Brian 想要打败所有的怪物！为了打败它们，Brian 在某些位置埋下了 $k$ 颗地雷。第 $j$ 颗地雷位于位置 $x[j]$。引爆一颗地雷会**立即摧毁所有**站在该位置的怪物，并且每颗地雷可以被引爆任意次数。然而，每次引爆的代价是 $1$ 美元。保证没有两颗地雷被埋在相同的位置。\n\n除了引爆地雷，Brian 还可以执行两种操作：\n\n- 将一只怪物向左或向右移动 $1$ 个单位距离。\n- 增加或减少一只怪物的生命值 $1$。\n\n每次操作的代价是 $1$ 美元。\n\n如果一只怪物的生命值降至 $0$ 或者它被地雷摧毁，则认为该怪物被打败。请帮助 Brian 找出打败所有怪物所需的最小代价（以美元计）。\n", "inputFormat": "你的程序必须从标准输入读取数据。\n\n输入的第一行包含两个以空格分隔的整数 $n$ 和 $k$。\n\n接下来的 $n$ 行，每行包含两个以空格分隔的整数。第 $i$ 行包含 $a[i]$ 和 $h[i]$。\n\n最后一行包含 $k$ 个以空格分隔的整数 $x[1], x[2], \\ldots, x[k]$。\n", "outputFormat": "你的程序必须将结果打印到标准输出。\n\n输出一个单独的整数，即打败所有怪物所需的最小代价（以美元计）。\n\n输出应仅包含一个整数，不要打印任何额外的文本，例如 “输入一个数字” 或 “答案是”。\n", "hint": "### 子任务\n\n对于所有测试用例，输入将满足以下约束条件：\n\n- $1 \\leq n, k \\leq 200\\,000$\n- 对于所有 $1 \\leq i \\leq n$，有 $1 \\leq a[i], h[i] \\leq 10^9$\n- 对于所有 $1 \\leq i \\leq k$，有 $1 \\leq x[i] \\leq 10^9$\n- 对于所有 $i \\neq j$，有 $a[i] \\neq a[j]$\n- 对于所有 $i \\neq j$，有 $x[i] \\neq x[j]$\n\n你的程序将在满足以下特殊性质的输入数据上进行测试：\n\n| 子任务 | 分数 | 特殊性质 |\n| :-: | :-: | :-: |\n| $0$ | $0$ | 样例 |\n| $1$ | $14$ | $k = 1$ |\n| $2$ | $6$ | $k = 2$ |\n| $3$ | $10$ | $n, k \\leq 18$ |\n| $4$ | $30$ | $n, k \\leq 3000$ |\n| $5$ | $29$ | $h[i] = 10^9$ |\n| $6$ | $11$ | 无 |\n\n### 样例 1 解释\n\n此样例适用于子任务 $1, 3, 4, 6$。\n\n有 $n = 3$ 只怪物和 $k = 1$ 颗地雷。Brian 可以：\n\n- 将怪物 $1$ 的生命值减少至 $0$，花费 $2$ 美元。\n- 将怪物 $2$ 向右移动 $1$ 个单位（位置从 $4$ 变为 $5$），花费 $1$ 美元。\n- 引爆位置 $5$ 处的地雷，击败怪物 $2$ 和怪物 $3$，花费 $1$ 美元。\n\n总花费为 $2 + 1 + 1 = 4$ 美元。\n\n### 样例 2 解释\n\n此样例适用于子任务 $2, 3, 4, 6$。\n\n有 $n = 5$ 只怪物和 $k = 2$ 颗地雷。Brian 可以：\n\n- 将怪物 $5$ 的生命值减少至 $0$，花费 $1$ 美元。\n- 引爆地雷 $2$，击败怪物 $3$，花费 $1$ 美元。\n- 将怪物 $2$ 向右移动 $1$ 个单位（位置从 $6$ 变为 $7$），花费 $1$ 美元。\n- 将怪物 $4$ 向右移动 $3$ 个单位（位置从 $4$ 变为 $7$），花费 $3$ 美元。\n- 引爆地雷 $1$，击败怪物 $1, 2, 4$，花费 $1$ 美元。\n\n总花费为 $1 + 1 + 1 + 3 + 1 = 7$ 美元。\n\n### 样例 3 解释\n\n此样例适用于子任务 $3, 4, 6$。\n", "locale": "zh-CN"}}}
{"pid": "P12016", "type": "P", "difficulty": 4, "samples": [["2 1\n1 1\n2 2\n1", "1 1\n3 3"], ["13 1\n7 7\n3 7\n4 4\n4 10\n5 6\n6 4\n6 8\n8 7\n8 10\n9 3\n9 5\n9 9\n10 6\n1", "7 7\n1 7\n3 3\n3 11\n3 6\n6 2\n5 9\n10 7\n8 12\n9 1\n10 4\n10 10\n12 6"], ["3 2\n1 10\n1 20\n1 30\n1 3", "1 8\n1 20\n1 32"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["树状数组", "2025", "NOISG（新加坡）"], "title": "[NOISG 2025 Finals] Thumper", "background": "", "description": "Bunnyland has large fields where the Bunnyland Dwarf (a native species of rabbit) roams freely. One such field can be modelled as a $10^9 \\times 10^9$ grid of cells. The rows of the grid are numbered $1$ to $10^9$ from north to south, and the columns of the grid are numbered $1$ to $10^9$ from west to east. We refer to the cell located at row $r$ and column $c$ of the grid as cell $(r, c)$.\n\nIn this field, there are $n$ rabbits numbered from $1$ to $n$. The $i$-th rabbit is initially located at cell $(r[i], c[i])$. **No two rabbits are initially located at the same cell**.\n\nRabbits lift their hind legs and kick the ground when annoyed, an action known as thumping. These $n$ rabbits will execute a sequence of $m$ thumps. At the start of the $j$-th second, rabbit $t[j]$ will thump. When a rabbit thumps, all other rabbits will move away from the thumping rabbit.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1auwto2s.png)\n\nTo be precise, when rabbit A thumps, rabbit B will move as follows:\n\n- If the number of rows between A and B is less than the number of columns between A and B, B will move two columns away from A.\n- If the number of rows between A and B is equal to the number of columns between A and B, B will move one column and one row away from A.\n- If the number of rows between A and B is more than the number of columns between A and B, B will move two rows away from A.\n\nIt can be shown that the location of the rabbits will remain distinct after a thump has occurred.\n\nBenson the Rabbit has come to find his brethren after his retirement from investigating toxic bacteria, but all the thumping has caused the rabbits to scatter. Help Benson determine the final locations of the $n$ rabbits after all thumps have occurred!\n\nIt is guaranteed that a rabbit will never leave the grid during the sequence of thumps. You may also assume that rabbits do not move in any other circumstances except thumping.\n", "inputFormat": "Your program must read from standard input.\n\nThe first line of input contains two space-separated integers $n$ and $m$.\n\nThe following $n$ lines of input each contain two space-separated integers. The $i$-th of these lines contains $r[i]$ and $c[i]$.\n\nThe last line of input contains $m$ space-separated integers $t[1], t[2], \\ldots, t[m]$.\n", "outputFormat": "Your program must print to standard output.\n\nThe output should contain $n$ lines. The $i$-th of these lines should contain two space-separated integers, indicating the row and the column of rabbit $i$ after all thumps have occurred.\n", "hint": "### Subtasks\n\nFor all test cases, the input will satisfy the following bounds:\n\n- $1 \\leq n, m \\leq 500\\,000$\n- $1 \\leq r[i], c[i] \\leq 10^9$ for all $1 \\leq i \\leq n$\n- $1 \\leq t[j] \\leq n$ for all $1 \\leq j \\leq m$\n- $(r_i, c_i) \\neq (r_j, c_j)$ for all $i \\neq j$\n- It is guaranteed that a rabbit will never exit the grid during the sequence of thumps.\n\nYour program will be tested on input instances that satisfy the following restrictions:\n\n| Subtask | Marks | Additional constraints |\n| :-: | :-: | :-: |\n| $0$ | $0$ | Sample test cases |\n| $1$ | $18$ | $n, m \\leq 2000$ |\n| $2$ | $21$ | $r[i] = 1$ |\n| $3$ | $32$ | $n \\leq 2000$ |\n| $4$ | $13$ | $n \\leq 100\\,000$ |\n| $5$ | $16$ | No additional constraints |\n\n### Sample Test Case 1 Explanation\n\nThis test case is valid for subtasks $1, 3, 4$, and $5$.\n\nRabbit $1$ is at cell $(1, 1)$ and rabbit $2$ is at cell $(2, 2)$.\n\nSince the number of rows between rabbit $1$ and rabbit $2$ is equal to the number of columns between rabbit $1$ and rabbit $2$, when rabbit $1$ thumps, rabbit $2$ will move one column and one row away from rabbit $1$ in the southeast direction, landing at cell $(3, 3)$. The position of the thumping rabbit $1$ does not change.\n\n### Sample Test Case 2 Explanation\n\nThis test case is valid for subtasks $1, 3, 4$, and $5$.\n\nThe diagram in the statement corresponds to this test case. The blue arrows show how the other rabbits move when rabbit $1$ at cell $(7, 7)$ thumps.\n\n### Sample Test Case 3 Explanation\n\nThis test case is valid for all subtasks.\n", "locale": "en", "translations": {"en": {"title": "[NOISG 2025 Finals] Thumper", "background": "", "description": "Bunnyland has large fields where the Bunnyland Dwarf (a native species of rabbit) roams freely. One such field can be modelled as a $10^9 \\times 10^9$ grid of cells. The rows of the grid are numbered $1$ to $10^9$ from north to south, and the columns of the grid are numbered $1$ to $10^9$ from west to east. We refer to the cell located at row $r$ and column $c$ of the grid as cell $(r, c)$.\n\nIn this field, there are $n$ rabbits numbered from $1$ to $n$. The $i$-th rabbit is initially located at cell $(r[i], c[i])$. **No two rabbits are initially located at the same cell**.\n\nRabbits lift their hind legs and kick the ground when annoyed, an action known as thumping. These $n$ rabbits will execute a sequence of $m$ thumps. At the start of the $j$-th second, rabbit $t[j]$ will thump. When a rabbit thumps, all other rabbits will move away from the thumping rabbit.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1auwto2s.png)\n\nTo be precise, when rabbit A thumps, rabbit B will move as follows:\n\n- If the number of rows between A and B is less than the number of columns between A and B, B will move two columns away from A.\n- If the number of rows between A and B is equal to the number of columns between A and B, B will move one column and one row away from A.\n- If the number of rows between A and B is more than the number of columns between A and B, B will move two rows away from A.\n\nIt can be shown that the location of the rabbits will remain distinct after a thump has occurred.\n\nBenson the Rabbit has come to find his brethren after his retirement from investigating toxic bacteria, but all the thumping has caused the rabbits to scatter. Help Benson determine the final locations of the $n$ rabbits after all thumps have occurred!\n\nIt is guaranteed that a rabbit will never leave the grid during the sequence of thumps. You may also assume that rabbits do not move in any other circumstances except thumping.\n", "inputFormat": "Your program must read from standard input.\n\nThe first line of input contains two space-separated integers $n$ and $m$.\n\nThe following $n$ lines of input each contain two space-separated integers. The $i$-th of these lines contains $r[i]$ and $c[i]$.\n\nThe last line of input contains $m$ space-separated integers $t[1], t[2], \\ldots, t[m]$.\n", "outputFormat": "Your program must print to standard output.\n\nThe output should contain $n$ lines. The $i$-th of these lines should contain two space-separated integers, indicating the row and the column of rabbit $i$ after all thumps have occurred.\n", "hint": "### Subtasks\n\nFor all test cases, the input will satisfy the following bounds:\n\n- $1 \\leq n, m \\leq 500\\,000$\n- $1 \\leq r[i], c[i] \\leq 10^9$ for all $1 \\leq i \\leq n$\n- $1 \\leq t[j] \\leq n$ for all $1 \\leq j \\leq m$\n- $(r_i, c_i) \\neq (r_j, c_j)$ for all $i \\neq j$\n- It is guaranteed that a rabbit will never exit the grid during the sequence of thumps.\n\nYour program will be tested on input instances that satisfy the following restrictions:\n\n| Subtask | Marks | Additional constraints |\n| :-: | :-: | :-: |\n| $0$ | $0$ | Sample test cases |\n| $1$ | $18$ | $n, m \\leq 2000$ |\n| $2$ | $21$ | $r[i] = 1$ |\n| $3$ | $32$ | $n \\leq 2000$ |\n| $4$ | $13$ | $n \\leq 100\\,000$ |\n| $5$ | $16$ | No additional constraints |\n\n### Sample Test Case 1 Explanation\n\nThis test case is valid for subtasks $1, 3, 4$, and $5$.\n\nRabbit $1$ is at cell $(1, 1)$ and rabbit $2$ is at cell $(2, 2)$.\n\nSince the number of rows between rabbit $1$ and rabbit $2$ is equal to the number of columns between rabbit $1$ and rabbit $2$, when rabbit $1$ thumps, rabbit $2$ will move one column and one row away from rabbit $1$ in the southeast direction, landing at cell $(3, 3)$. The position of the thumping rabbit $1$ does not change.\n\n### Sample Test Case 2 Explanation\n\nThis test case is valid for subtasks $1, 3, 4$, and $5$.\n\nThe diagram in the statement corresponds to this test case. The blue arrows show how the other rabbits move when rabbit $1$ at cell $(7, 7)$ thumps.\n\n### Sample Test Case 3 Explanation\n\nThis test case is valid for all subtasks.\n", "locale": "en"}, "zh-CN": {"title": "[NOISG 2025 Finals] 震踏", "background": "", "description": "Bunnyland 有广阔的田野，Bunnyland 矮兔（一种本地兔子物种）在其中自由活动。其中一个田野可以建模为一个 $10^9 \\times 10^9$ 的网格单元。网格的行从北到南编号为 $1$ 到 $10^9$，网格的列从西到东编号为 $1$ 到 $10^9$。我们将网格中位于第 $r$ 行、第 $c$ 列的单元格称为单元格 $(r, c)$。\n\n在这片田野中，有 $n$ 只兔子，编号从 $1$ 到 $n$。第 $i$ 只兔子最初位于单元格 $(r[i], c[i])$。**最初没有两只兔子位于同一个单元格**。\n\n当兔子感到烦躁时，它们会抬起后腿并踢打地面，这一动作被称为震踏。这 $n$ 只兔子将执行一系列 $m$ 次震踏。在第 $j$ 秒开始时，编号为 $t[j]$ 的兔子会进行震踏。当一只兔子震踏时，所有其他兔子都会远离震踏的兔子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1auwto2s.png)\n\n具体来说，当兔子 A 震踏时，兔子 B 将按照以下方式移动：\n\n- 如果 A 和 B 之间的行数小于列数，则 B 将在列方向上远离 A 两列。\n- 如果 A 和 B 之间的行数等于列数，则 B 将在列方向和行方向各远离 A 一格。\n- 如果 A 和 B 之间的行数大于列数，则 B 将在行方向上远离 A 两行。\n\n可以证明，在震踏发生后，兔子的位置仍然是唯一的。\n\n兔子 Benson 在退休后寻找它的同类，但由于震踏的发生，兔子们四散开来。请帮助 Benson 确定在所有震踏发生后 $n$ 只兔子的最终位置！\n\n可以保证，在震踏序列过程中，兔子不会离开网格。你也可以假设，兔子在任何情况下都不会移动，除了震踏。\n", "inputFormat": "你的程序必须从标准输入读取数据。\n\n输入的第一行包含两个由空格分隔的整数 $n$ 和 $m$。\n\n接下来的 $n$ 行输入中，每行包含两个由空格分隔的整数。这些整数分别是 $r[i]$ 和 $c[i]$，表示第 $i$ 只兔子的初始位置。\n\n输入的最后一行包含 $m$ 个由空格分隔的整数 $t[1], t[2], \\ldots, t[m]$。\n", "outputFormat": "你的程序必须向标准输出打印结果。\n\n输出应包含 $n$ 行。第 $i$ 行应包含两个由空格分隔的整数，表示所有震踏发生后，第 $i$ 只兔子所在的行和列。\n", "hint": "### 子任务\n\n对于所有测试用例，输入将满足以下约束条件：\n\n- $1 \\leq n, m \\leq 500\\,000$\n- 对于所有 $1 \\leq i \\leq n$，有 $1 \\leq r[i], c[i] \\leq 10^9$\n- 对于所有 $1 \\leq j \\leq m$，有 $1 \\leq t[j] \\leq n$\n- 对于所有 $i \\neq j$，有 $(r_i, c_i) \\neq (r_j, c_j)$\n- 可以保证，在震踏序列过程中，兔子不会离开网格。\n\n你的程序将在满足以下特殊性质的输入数据上进行测试：\n\n| 子任务 | 分数 | 特殊性质 |\n| :-: | :-: | :-: |\n| $0$ | $0$ | 样例 |\n| $1$ | $18$ | $n, m \\leq 2000$ |\n| $2$ | $21$ | $r[i] = 1$ |\n| $3$ | $32$ | $n \\leq 2000$ |\n| $4$ | $13$ | $n \\leq 100\\,000$ |\n| $5$ | $16$ | 无 |\n\n### 样例 1 解释\n\n此测试用例适用于子任务 $1, 3, 4, 5$。\n\n兔子 $1$ 处于单元格 $(1, 1)$，兔子 $2$ 处于单元格 $(2, 2)$。\n\n由于兔子 $1$ 和兔子 $2$ 之间的行数等于列数，因此当兔子 $1$ 震踏时，兔子 $2$ 会在东南方向各远离一格，最终到达单元格 $(3, 3)$。震踏的兔子 $1$ 位置保持不变。\n\n### 样例 2 解释\n\n此样例适用于子任务 $1, 3, 4, 5$。\n\n题目中的图示对应于此测试用例。蓝色箭头显示了当编号为 $1$ 的兔子（位于单元格 $(7, 7)$）震踏时，其他兔子的移动方式。\n\n### 样例 3 解释\n\n此样例适用于所有子任务。\n", "locale": "zh-CN"}}}
{"pid": "P12017", "type": "P", "difficulty": 5, "samples": [["9\n5 2 3 5 2 3 1 1 1\n1 4\n4 5\n2 5\n3 6\n5 6\n6 9\n7 8\n4 7", "YES"], ["9\n5 2 3 5 2 3 1 1 2\n1 4\n4 5\n2 5\n3 6\n5 6\n6 9\n7 8\n4 7", "NO"], ["7\n3 3 1 3 2 1 2\n3 4\n1 2\n6 2\n7 3\n5 6\n4 2", "YES"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "背包 DP", "树形 DP", "NOISG（新加坡）"], "title": "[NOISG 2025 Finals] Reachability", "background": "", "description": "Sheepland is a country with $n$ cities. There are $n − 1$ roads connecting pairs of cities with each other. Road $j$ directly connects cities $u[j]$ and $v[j]$. Initially, it is possible to travel from any city to any other city using only these roads.\n\nAll $n - 1$ roads in Sheepland are planned to be renovated. Under the renovation plan, each road $j$ will be in one of four states:\n\n1. Two-way: citizens from both cities $u[j]$ and $v[j]$ may cross this road into the other city.\n2. One-way from city $u[j]$ to city $v[j]$: only citizens from city $u[j]$ may cross this road into city $v[j]$.\n3. One-way from city $v[j]$ to city $u[j]$: only citizens from city $v[j]$ may cross this road into city $u[j]$.\n4. Closed: no citizens from cities $u[j]$ or $v[j]$ may cross this road into the other city.\n\nUnfortunately, the renovation plan has gone missing!\n\nTo try to recover it, you ask the mayor of each city how many cities are reachable from their city under the renovation plan. The mayor of the $i$-th city replies with $l[i]$. However, some\nmayors may have provided incorrect values.\n\nA city $v$ is considered reachable from a city u if there exists a sequence $c_1, c_2, c_3, \\ldots, c_k$ where $c_1 = u, c_k = v$ and a crossable road exists from $c_x$ to $c_{x+1}$ for all $1 \\leq x \\leq k - 1$. In particular, a city is reachable from itself.\n\nHelp Sheepland determine whether there exists a renovation plan that is consistent with the number of cities reachable from each city, as reported by all mayors!\n", "inputFormat": "Your program must read from standard input.\n\nThe first line of input contains one integer $n$.\n\nThe second line of input contains $n$ space-separated integers $l[1], l[2], \\ldots, l[n]$.\n\nThe following $n - 1$ lines of input each contain two space-separated integers. The $j$-th of these lines contains $u[j]$ and $v[j]$.\n", "outputFormat": "Your program must print to standard output.\n\nOutput `YES` if a renovation plan that is consistent with the number of cities reachable from each city, as reported by all mayors, exists and `NO` otherwise.\n", "hint": "### Subtasks\n\nFor all test cases, the input will satisfy the following bounds:\n\n- $1 \\leq n \\leq 5000$\n- $1 \\leq l[i] \\leq n$ for all $1 \\leq i \\leq n$\n- $1 \\leq u[j], v[j] \\leq n$ for all $1 \\leq j \\leq n - 1$\n- $u[j] \\neq v[j]$ for all $1 \\leq j \\leq n − 1$\n- Initially, it is possible to travel from any city to any other city using roads only.\n\nYour program will be tested on input instances that satisfy the following restrictions:\n\n| Subtask | Marks | Additional Constraints |\n| :-: | :-: | :-: |\n| $0$ | $0$ | Sample test cases |\n| $1$ | $4$ | $n \\leq 7$ |\n| $2$ | $5$ | $n \\leq 15$ |\n| $3$ | $11$ | $l[1] = l[2] = \\cdots = l[n]$ |\n| $4$ | $10$ | If a plan exists, at least one such plan has no two-way roads |\n| $5$ | $45$ | $n \\leq 400$ |\n| $6$ | $25$ | No additional constraints |\n\n### Sample Test Case 1 Explanation\n\nThis test case is valid for subtasks $2, 5$, and $6$.\n\nRefer to the diagram below. The renovation plan is consistent with the number of cities reachable from each city, as reported by all mayors.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h1yj84mf.png)\n\n### Sample Test Case 2 Explanation\n\nThis test case is valid for subtasks $2, 4, 5$, and $6$.\n\nThere does not exist a renovation plan consistent with the number of cities reachable from each city, as reported by all mayors.\n\n### Sample Test Case 3 Explanation\n\nThis test case is valid for subtasks $1, 2, 5$, and $6$.\n", "locale": "en", "translations": {"en": {"title": "[NOISG 2025 Finals] Reachability", "background": "", "description": "Sheepland is a country with $n$ cities. There are $n − 1$ roads connecting pairs of cities with each other. Road $j$ directly connects cities $u[j]$ and $v[j]$. Initially, it is possible to travel from any city to any other city using only these roads.\n\nAll $n - 1$ roads in Sheepland are planned to be renovated. Under the renovation plan, each road $j$ will be in one of four states:\n\n1. Two-way: citizens from both cities $u[j]$ and $v[j]$ may cross this road into the other city.\n2. One-way from city $u[j]$ to city $v[j]$: only citizens from city $u[j]$ may cross this road into city $v[j]$.\n3. One-way from city $v[j]$ to city $u[j]$: only citizens from city $v[j]$ may cross this road into city $u[j]$.\n4. Closed: no citizens from cities $u[j]$ or $v[j]$ may cross this road into the other city.\n\nUnfortunately, the renovation plan has gone missing!\n\nTo try to recover it, you ask the mayor of each city how many cities are reachable from their city under the renovation plan. The mayor of the $i$-th city replies with $l[i]$. However, some\nmayors may have provided incorrect values.\n\nA city $v$ is considered reachable from a city u if there exists a sequence $c_1, c_2, c_3, \\ldots, c_k$ where $c_1 = u, c_k = v$ and a crossable road exists from $c_x$ to $c_{x+1}$ for all $1 \\leq x \\leq k - 1$. In particular, a city is reachable from itself.\n\nHelp Sheepland determine whether there exists a renovation plan that is consistent with the number of cities reachable from each city, as reported by all mayors!\n", "inputFormat": "Your program must read from standard input.\n\nThe first line of input contains one integer $n$.\n\nThe second line of input contains $n$ space-separated integers $l[1], l[2], \\ldots, l[n]$.\n\nThe following $n - 1$ lines of input each contain two space-separated integers. The $j$-th of these lines contains $u[j]$ and $v[j]$.\n", "outputFormat": "Your program must print to standard output.\n\nOutput `YES` if a renovation plan that is consistent with the number of cities reachable from each city, as reported by all mayors, exists and `NO` otherwise.\n", "hint": "### Subtasks\n\nFor all test cases, the input will satisfy the following bounds:\n\n- $1 \\leq n \\leq 5000$\n- $1 \\leq l[i] \\leq n$ for all $1 \\leq i \\leq n$\n- $1 \\leq u[j], v[j] \\leq n$ for all $1 \\leq j \\leq n - 1$\n- $u[j] \\neq v[j]$ for all $1 \\leq j \\leq n − 1$\n- Initially, it is possible to travel from any city to any other city using roads only.\n\nYour program will be tested on input instances that satisfy the following restrictions:\n\n| Subtask | Marks | Additional Constraints |\n| :-: | :-: | :-: |\n| $0$ | $0$ | Sample test cases |\n| $1$ | $4$ | $n \\leq 7$ |\n| $2$ | $5$ | $n \\leq 15$ |\n| $3$ | $11$ | $l[1] = l[2] = \\cdots = l[n]$ |\n| $4$ | $10$ | If a plan exists, at least one such plan has no two-way roads |\n| $5$ | $45$ | $n \\leq 400$ |\n| $6$ | $25$ | No additional constraints |\n\n### Sample Test Case 1 Explanation\n\nThis test case is valid for subtasks $2, 5$, and $6$.\n\nRefer to the diagram below. The renovation plan is consistent with the number of cities reachable from each city, as reported by all mayors.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h1yj84mf.png)\n\n### Sample Test Case 2 Explanation\n\nThis test case is valid for subtasks $2, 4, 5$, and $6$.\n\nThere does not exist a renovation plan consistent with the number of cities reachable from each city, as reported by all mayors.\n\n### Sample Test Case 3 Explanation\n\nThis test case is valid for subtasks $1, 2, 5$, and $6$.\n", "locale": "en"}, "zh-CN": {"title": "[NOISG 2025 Finals] 可达性", "background": "", "description": "Sheepland 是一个有 $n$ 座城市的国家。有 $n - 1$ 条道路将各对城市连接在一起。第 $j$ 条道路直接连接城市 $u[j]$ 和 $v[j]$。最初，仅使用这些道路，可以从任意一个城市到达任意一个其他城市。\n\nSheepland 的所有 $n - 1$ 条道路都计划进行翻修。根据翻修计划，每条道路 $j$ 将处于以下四种状态之一：\n\n1. 双向：城市 $u[j]$ 和 $v[j]$ 的市民可以通过这条道路前往对方的城市。\n2. 从城市 $u[j]$ 到城市 $v[j]$ 的单向：只有来自城市 $u[j]$ 的市民可以通过这条道路前往城市 $v[j]$。\n3. 从城市 $v[j]$ 到城市 $u[j]$ 的单向：只有来自城市 $v[j]$ 的市民可以通过这条道路前往城市 $u[j]$。\n4. 关闭：城市 $u[j]$ 和 $v[j]$ 的市民都不能通过这条道路前往对方的城市。\n\n不幸的是，翻修计划丢失了！\n\n为了尝试恢复计划，你向每座城市的市长询问在翻修计划下从他们的城市可以到达多少座城市。第 $i$ 座城市的市长回答 $l[i]$。然而，一些市长可能提供了错误的数值。\n\n如果存在一个序列 $c_1, c_2, c_3, \\ldots, c_k$，其中 $c_1 = u$，$c_k = v$，并且对于所有 $1 \\leq x \\leq k - 1$，都存在一条可通行的道路从 $c_x$ 到 $c_{x+1}$，那么城市 $v$ 被认为可以从城市 $u$ 到达。特别地，每座城市都可以到达自身。\n\n请帮助 Sheepland 确定是否存在一个翻修计划，使得每位市长报告的可到达城市数量都是正确的！\n", "inputFormat": "\n你的程序必须从标准输入读取数据。\n\n输入的第一行包含一个整数 $n$。\n\n输入的第二行包含 $n$ 个以空格分隔的整数 $l[1], l[2], \\ldots, l[n]$。\n\n接下来的 $n - 1$ 行输入，每行包含两个以空格分隔的整数。第 $j$ 行包含 $u[j]$ 和 $v[j]$。\n", "outputFormat": "\n你的程序必须向标准输出打印结果。\n\n如果存在一个与所有市长报告的可到达城市数量一致的翻修计划，则输出 `YES`，否则输出 `NO`。\n", "hint": "\n### 子任务\n\n对于所有测试用例，输入将满足以下约束条件：\n\n- $1 \\leq n \\leq 5000$\n- 对于所有 $1 \\leq i \\leq n$，有 $1 \\leq l[i] \\leq n$\n- 对于所有 $1 \\leq j \\leq n - 1$，有 $1 \\leq u[j], v[j] \\leq n$\n- 对于所有 $1 \\leq j \\leq n − 1$，有 $u[j] \\neq v[j]$\n- 最初，仅使用道路，可以从任何城市到达任何其他城市。\n\n你的程序将在满足以下特殊性质的输入数据上进行测试：\n\n| 子任务 | 分数 | 特殊性质 |\n| :-: | :-: | :-: |\n| $0$ | $0$ | 样例 |\n| $1$ | $4$ | $n \\leq 7$ |\n| $2$ | $5$ | $n \\leq 15$ |\n| $3$ | $11$ | $l[1] = l[2] = \\cdots = l[n]$ |\n| $4$ | $10$ | 如果存在一个翻修计划，则存在一个这样的计划没有双向道路 |\n| $5$ | $45$ | $n \\leq 400$ |\n| $6$ | $25$ | 无 |\n\n### 样例 1 解释\n\n此样例适用于子任务 $2, 5, 6$。\n\n请参考下方的图示。该翻修计划与所有市长报告的可到达城市数量一致。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h1yj84mf.png)\n\n### 样例 2 解释\n\n此样例适用于子任务 $2, 4, 5, 6$。\n\n不存在一个与所有市长报告的可到达城市数量一致的翻修计划。\n\n### 样例 3 解释\n\n此样例适用于子任务 $1, 2, 5, 6$。\n", "locale": "zh-CN"}}}
{"pid": "P12018", "type": "P", "difficulty": 5, "samples": [["4 4\n3 2 4 1\n3\n1 4\n1 3\n2 4", "2\n1\n1"], ["15 16\n5 15 3 4 13 8 3 7 14 6 2 10 11 12 9 1\n20\n4 10\n7 15\n5 15\n2 6\n7 15\n5 15\n12 15\n13 14\n5 14\n13 14\n2 11\n3 11\n2 5\n9 11\n3 15\n5 14\n1 13\n3 7\n7 12\n4 8", "2\n2\n3\n2\n2\n3\n1\n1\n3\n1\n3\n2\n1\n1\n3\n3\n4\n1\n2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "NOISG（新加坡）"], "title": "[NOISG 2025 Finals] Robots", "background": "", "description": "Funnyland is modelled as a grid of size $(h + 2) \\times (w + 2)$. The rows of the grid are numbered $0$ to $h + 1$ from top to bottom, and the columns of the grid are numbered $0$ to $w + 1$ from left to right. We refer to the cell located at row r and column c of the grid as cell $(r, c)$.\n\nInitially, all cells in this grid are coloured *white*, except for the rightmost column of cells, which are all coloured *black*.\n\nThe columns $1$ to $w$ each contain exactly one special cell. Each of these special cells are to be coloured *red* or *blue*. The edges of the grid (i.e., the topmost row, the bottommost row, the leftmost column, and the rightmost column) will never contain special cells.\n\nSeveral robots will be placed on cells in the leftmost column and will move according to the colour of their cell:\n\n- If the cell is white, the robot moves right.\n- If the cell is red, the robot moves upward.\n- If the cell is blue, the robot moves downward.\n- If the cell is black, the robot does not move.\n\nRobots do not collide with each other; each robot moves independently of other robots. Multiple robots are allowed to occupy the same cell.\n\nA query consists of two integers $a$ and $b$ ($1 \\leq a < b \\leq h$). For each $a \\leq c \\leq b$, there will be a robot starting at $(c, 0)$. Across all possible configurations of colouring the special cells red or blue, determine the minimum number of distinct final cells the robots can occupy.\n\nNote that different queries may result in different configurations of colouring the cells red and blue.\n", "inputFormat": "Your program must read from standard input.\n\nThe first line of input contains two space-separated integers $h$ and $w$.\n\nThe second line of input contains $w$ space-separated integers $x[1], x[2], \\ldots, x[w]$, indicating that the special cells are $(x[1], 1), (x[2], 2), \\ldots, (x[w], w)$.\n\nThe third line of input contains one integer $q$.\n\nThe following $q$ lines of input each contain two space-separated integers. The $i$-th of these lines contains $a[i]$ and $b[i]$.\n", "outputFormat": "Your program must print to standard output.\n\nThe output should contain $q$ lines. The $i$-th of these lines should contain one integer, the answer to the $i$-th query.\n", "hint": "### Subtasks\n\nFor all test cases, the input will satisfy the following bounds:\n\n- $1 \\leq w, q \\leq 200\\,000$\n- $2 \\leq h \\leq 200\\,000$\n- $1 \\leq x[j] \\leq h$ for all $1 \\leq j \\leq w$\n- $1 \\leq a[i] < b[i] \\leq h$ for all $1 \\leq i \\leq q$\n\nYour program will be tested on input instances that satisfy the following restrictions:\n\n| Subtask | Marks | Additional Constraints |\n| :-: | :-: | :-: |\n| $0$ | $0$ | Sample test cases |\n| $1$ | $10$ | $h, w \\leq 16, q \\leq 20$ |\n| $2$ | $4$ | $a[i] + 1 = b[i]$ |\n| $3$ | $12$ | $x[1] < x[2] < \\cdots < x[w]$ |\n| $4$ | $43$ | $h, w, q \\leq 5000$ |\n| $5$ | $31$ | No additional constraints |\n\n### Sample Test Case 1 Explanation\n\nThis test case is valid for subtasks $1, 4$, and $5$.\n\nThe grid is coloured as foll\nThis test case is valid for subtasks $1, 4$, and $5$.\nows, with the special cells in violet.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnpx3ay1.png)\n\nFor the first query, we can colour the special cells at $(3, 1)$ and $(4, 3)$ blue, $(2, 2)$ and $(1, 4)$ red to achieve the following:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/09mu5rbg.png)\n\n- The robot starting at $(1, 0)$ moves to $(1, 1), (1, 2), (1, 3), (1, 4), (0, 4), (0, 5)$, and ends at $(0, 5)$.\n- The robot starting at $(2, 0)$ moves to $(2, 1), (2, 2), (1, 2), (1, 3), (1, 4), (0, 4), (0, 5)$, and ends at $(0, 5)$.\n- The robot starting at $(3, 0)$ moves to $(3, 1), (4, 1), (4, 2), (4, 3), (5, 3), (5, 4)$, and ends at $(5, 5)$.\n- The robot starting at $(4, 0)$ moves to $(4, 1), (4, 2), (4, 3), (5, 3), (5, 4)$, and ends at $(5, 5)$.\n\nThe robots end at $2$ distinct cells, $(0, 5)$ and $(5, 5)$, hence the correct output is $2$.\n\nFor the second query, we can colour the special cells as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q0umkoee.png)\n\nThe robots starting at $(1, 0), (2, 0)$, and $(3, 0)$ all end at $(0, 5)$.\n\nFor the third query, we can colour the special cells as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1vjztie5.png)\n\nThe robots starting at $(2, 0), (3, 0)$, and $(4, 0)$ all end at $(3, 5)$.\n\n### Sample Test Case 2 Explanation\n\nThis test case is valid for subtasks $1, 4$, and $5$.\n", "locale": "en", "translations": {"en": {"title": "[NOISG 2025 Finals] Robots", "background": "", "description": "Funnyland is modelled as a grid of size $(h + 2) \\times (w + 2)$. The rows of the grid are numbered $0$ to $h + 1$ from top to bottom, and the columns of the grid are numbered $0$ to $w + 1$ from left to right. We refer to the cell located at row r and column c of the grid as cell $(r, c)$.\n\nInitially, all cells in this grid are coloured *white*, except for the rightmost column of cells, which are all coloured *black*.\n\nThe columns $1$ to $w$ each contain exactly one special cell. Each of these special cells are to be coloured *red* or *blue*. The edges of the grid (i.e., the topmost row, the bottommost row, the leftmost column, and the rightmost column) will never contain special cells.\n\nSeveral robots will be placed on cells in the leftmost column and will move according to the colour of their cell:\n\n- If the cell is white, the robot moves right.\n- If the cell is red, the robot moves upward.\n- If the cell is blue, the robot moves downward.\n- If the cell is black, the robot does not move.\n\nRobots do not collide with each other; each robot moves independently of other robots. Multiple robots are allowed to occupy the same cell.\n\nA query consists of two integers $a$ and $b$ ($1 \\leq a < b \\leq h$). For each $a \\leq c \\leq b$, there will be a robot starting at $(c, 0)$. Across all possible configurations of colouring the special cells red or blue, determine the minimum number of distinct final cells the robots can occupy.\n\nNote that different queries may result in different configurations of colouring the cells red and blue.\n", "inputFormat": "Your program must read from standard input.\n\nThe first line of input contains two space-separated integers $h$ and $w$.\n\nThe second line of input contains $w$ space-separated integers $x[1], x[2], \\ldots, x[w]$, indicating that the special cells are $(x[1], 1), (x[2], 2), \\ldots, (x[w], w)$.\n\nThe third line of input contains one integer $q$.\n\nThe following $q$ lines of input each contain two space-separated integers. The $i$-th of these lines contains $a[i]$ and $b[i]$.\n", "outputFormat": "Your program must print to standard output.\n\nThe output should contain $q$ lines. The $i$-th of these lines should contain one integer, the answer to the $i$-th query.\n", "hint": "### Subtasks\n\nFor all test cases, the input will satisfy the following bounds:\n\n- $1 \\leq w, q \\leq 200\\,000$\n- $2 \\leq h \\leq 200\\,000$\n- $1 \\leq x[j] \\leq h$ for all $1 \\leq j \\leq w$\n- $1 \\leq a[i] < b[i] \\leq h$ for all $1 \\leq i \\leq q$\n\nYour program will be tested on input instances that satisfy the following restrictions:\n\n| Subtask | Marks | Additional Constraints |\n| :-: | :-: | :-: |\n| $0$ | $0$ | Sample test cases |\n| $1$ | $10$ | $h, w \\leq 16, q \\leq 20$ |\n| $2$ | $4$ | $a[i] + 1 = b[i]$ |\n| $3$ | $12$ | $x[1] < x[2] < \\cdots < x[w]$ |\n| $4$ | $43$ | $h, w, q \\leq 5000$ |\n| $5$ | $31$ | No additional constraints |\n\n### Sample Test Case 1 Explanation\n\nThis test case is valid for subtasks $1, 4$, and $5$.\n\nThe grid is coloured as foll\nThis test case is valid for subtasks $1, 4$, and $5$.\nows, with the special cells in violet.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnpx3ay1.png)\n\nFor the first query, we can colour the special cells at $(3, 1)$ and $(4, 3)$ blue, $(2, 2)$ and $(1, 4)$ red to achieve the following:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/09mu5rbg.png)\n\n- The robot starting at $(1, 0)$ moves to $(1, 1), (1, 2), (1, 3), (1, 4), (0, 4), (0, 5)$, and ends at $(0, 5)$.\n- The robot starting at $(2, 0)$ moves to $(2, 1), (2, 2), (1, 2), (1, 3), (1, 4), (0, 4), (0, 5)$, and ends at $(0, 5)$.\n- The robot starting at $(3, 0)$ moves to $(3, 1), (4, 1), (4, 2), (4, 3), (5, 3), (5, 4)$, and ends at $(5, 5)$.\n- The robot starting at $(4, 0)$ moves to $(4, 1), (4, 2), (4, 3), (5, 3), (5, 4)$, and ends at $(5, 5)$.\n\nThe robots end at $2$ distinct cells, $(0, 5)$ and $(5, 5)$, hence the correct output is $2$.\n\nFor the second query, we can colour the special cells as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q0umkoee.png)\n\nThe robots starting at $(1, 0), (2, 0)$, and $(3, 0)$ all end at $(0, 5)$.\n\nFor the third query, we can colour the special cells as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1vjztie5.png)\n\nThe robots starting at $(2, 0), (3, 0)$, and $(4, 0)$ all end at $(3, 5)$.\n\n### Sample Test Case 2 Explanation\n\nThis test case is valid for subtasks $1, 4$, and $5$.\n", "locale": "en"}, "zh-CN": {"title": "[NOISG 2025 Finals] 机器人", "background": "", "description": "Funnyland 被建模为一个大小为 $(h + 2) \\times (w + 2)$ 的网格。网格的行编号从 $0$ 到 $h + 1$（从上到下），列编号从 $0$ 到 $w + 1$（从左到右）。我们将位于网格第 $r$ 行、第 $c$ 列的单元格称为单元格 $(r, c)$。\n\n最初，此网格中的所有单元格都被涂成 *白色*，除了最右侧的一列单元格，它们全部被涂成 *黑色*。\n\n第 $1$ 到 $w$ 列中每列恰好包含一个特殊单元格。这些特殊单元格将被涂成 *红色* 或 *蓝色*。网格的边界（即最上方的行、最下方的行、最左侧的列和最右侧的列）永远不会包含特殊单元格。\n\n一些机器人将被放置在最左侧的一列单元格中，并根据它们所在单元格的颜色进行移动：\n\n- 如果单元格是白色的，机器人向右移动。\n- 如果单元格是红色的，机器人向上移动。\n- 如果单元格是蓝色的，机器人向下移动。\n- 如果单元格是黑色的，机器人不会移动。\n\n机器人不会相互碰撞，每个机器人独立移动。多个机器人可以占据同一个单元格。\n\n一次查询由两个整数 $a$ 和 $b$ 组成（$1 \\leq a < b \\leq h$）。对于每个 $a \\leq c \\leq b$，都会有一个机器人从 $(c, 0)$ 位置开始。在所有可能的特殊单元格红色或蓝色涂色方案中，确定机器人最终可能占据的不同单元格的最小数量。\n\n请注意，不同的查询可能会导致不同的特殊单元格涂色方案。\n", "inputFormat": "你的程序必须从标准输入读取数据。\n\n输入的第一行包含两个用空格分隔的整数 $h$ 和 $w$。\n\n输入的第二行包含 $w$ 个用空格分隔的整数 $x[1], x[2], \\ldots, x[w]$，表示特殊单元格位于 $(x[1], 1), (x[2], 2), \\ldots, (x[w], w)$。\n\n输入的第三行包含一个整数 $q$。\n\n接下来的 $q$ 行，每行包含两个用空格分隔的整数。第 $i$ 行包含 $a[i]$ 和 $b[i]$。\n", "outputFormat": "你的程序必须将输出写入标准输出。\n\n输出应包含 $q$ 行。第 $i$ 行应包含一个整数，即第 $i$ 个查询的答案。\n", "hint": "### 子任务\n\n对于所有测试用例，输入满足以下约束条件：\n\n- $1 \\leq w, q \\leq 200\\,000$\n- $2 \\leq h \\leq 200\\,000$\n- 对于所有 $1 \\leq j \\leq w$，有 $1 \\leq x[j] \\leq h$\n- 对于所有 $1 \\leq i \\leq q$，有 $1 \\leq a[i] < b[i] \\leq h$\n\n你的程序将在满足以下特殊性质的输入数据上进行测试：\n\n| 子任务 | 分数 | 特殊性质 |\n| :-: | :-: | :-: |\n| $0$ | $0$ | 样例 |\n| $1$ | $10$ | $h, w \\leq 16, q \\leq 20$ |\n| $2$ | $4$ | $a[i] + 1 = b[i]$ |\n| $3$ | $12$ | $x[1] < x[2] < \\cdots < x[w]$ |\n| $4$ | $43$ | $h, w, q \\leq 5000$ |\n| $5$ | $31$ | 无 |\n\n### 样例 1 解释\n\n此样例适用于子任务 $1, 4, 5$。\n\n网格的颜色如下，特殊单元格用紫色表示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fnpx3ay1.png)\n\n对于第一个查询，我们可以将 $(3, 1)$ 和 $(4, 3)$ 处的特殊单元格涂成蓝色，将 $(2, 2)$ 和 $(1, 4)$ 处的特殊单元格涂成红色，以获得以下效果：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/09mu5rbg.png)\n\n- 从 $(1, 0)$ 开始的机器人移动到 $(1, 1), (1, 2), (1, 3), (1, 4), (0, 4), (0, 5)$，最终停在 $(0, 5)$。\n- 从 $(2, 0)$ 开始的机器人移动到 $(2, 1), (2, 2), (1, 2), (1, 3), (1, 4), (0, 4), (0, 5)$，最终停在 $(0, 5)$。\n- 从 $(3, 0)$ 开始的机器人移动到 $(3, 1), (4, 1), (4, 2), (4, 3), (5, 3), (5, 4)$，最终停在 $(5, 5)$。\n- 从 $(4, 0)$ 开始的机器人移动到 $(4, 1), (4, 2), (4, 3), (5, 3), (5, 4)$，最终停在 $(5, 5)$。\n\n机器人最终停在 $2$ 个不同的单元格 $(0, 5)$ 和 $(5, 5)$，因此正确的输出是 $2$。\n\n对于第二个查询，我们可以按如下方式涂色：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q0umkoee.png)\n\n从 $(1, 0), (2, 0)$ 和 $(3, 0)$ 开始的机器人最终都停在 $(0, 5)$。\n\n对于第三个查询，我们可以按如下方式涂色：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1vjztie5.png)\n\n从 $(2, 0), (3, 0)$ 和 $(4, 0)$ 开始的机器人最终都停在 $(3, 5)$。\n\n### 样例 2 解释\n\n此样例适用于子任务 $1, 4, 5$。\n", "locale": "zh-CN"}}}
{"pid": "P12019", "type": "P", "difficulty": 7, "samples": [["3 3\n000\n011\n010", "46"], ["5 5\n00101\n01011\n11010\n01101\n11000", "182"], ["1 10\n1101011100", "6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "扫描线", "NOISG（新加坡）"], "title": "[NOISG 2025 Finals] Flooding", "background": "", "description": "Pavementland is a rectangle-shaped city, which can be modelled as a $h \\times w$ grid of cells. The rows of the grid are numbered $1$ to $h$ from north to south, and the columns of the grid are numbered $1$ to $w$ from west to east. We refer to the cell located at row $r$ and column $c$ of the grid as cell $(r, c)$.\n\nIn the grid, each cell is either empty or contains a building. At least one cell is empty.\n\nDue to a monsoon surge, flash floods are occurring throughout Pavementland. Initially, one empty cell becomes flooded with water by the rain. Then, the water flows according to the following rules:\n\n- If an empty cell is adjacent to at least one flooded cell, it becomes flooded.\n- If a cell containing a building is adjacent to at least two flooded cells, the building collapses and the cell becomes flooded.\n\nNote that a cell is adjacent to another cell if they share an edge. A cell is adjacent to at most four other cells. Further note that water may not flow outside the grid. Let $f((r, c))$ be the number of cells that would be flooded after the process if the cell $(r, c)$ were initially flooded.\n\nCity officials are seeking to forecast the extent of flash floods in all possible scenarios. Help them determine the sum of $f((r, c))$ over all empty cells $(r, c)$.\n", "inputFormat": "Your program must read from standard input.\n\nThe first line of input contains two space-separated integers $h$ and $w$.\n\nThe next $h$ lines of input each contain a binary string of length $w$. If the $c$-th character of the $r$-th line is $0$, then the cell $(r, c)$ is empty. If the $c$-th character of the $r$-th line is $1$, then the cell $(r, c)$ contains a building.\n", "outputFormat": "Your program must print to standard output.\n\nOutput a single integer, the sum of $f((r, c))$ over all empty cells $(r, c)$.\n", "hint": "### Subtasks\n\nFor all test cases, the input will satisfy the following bounds:\n\n- $1 \\leq h, w \\leq 5000$\n- There is at least one empty cell in the grid.\n\nYour program will be tested on input instances that satisfy the following restrictions:\n\n| Subtask | Marks | Additional Constraints |\n| :-: | :-: | :-: |\n| $0$ | $0$ | Sample test cases |\n| $1$ | $5$ | $h = 1$ |\n| $2$ | $7$ | $h, w \\leq 80$ |\n| $3$ | $16$ | $h, w \\leq 500$ |\n| $4$ | $32$ | $h, w \\leq 2000$ |\n| $5$ | $40$ | No additional constraints |\n\n### Sample Test Case 1 Explanation\n\nThis test case is valid for subtasks $2$ to $5$.\n\nIf cells $(1, 1), (1, 2), (1, 3), (2, 1)$, or $(3, 1)$ were initially flooded, the entire grid would become flooded after the process. If cell $(3, 3)$ were initially flooded, only $1$ cell would become flooded after the process. Hence, the output is $9 + 9 + 9 + 9 + 9 + 1 = 46$.\n\n### Sample Test Case 2 Explanation\n\nThis test case is valid for subtasks $2$ to $5$.\n\n### Sample Test Case 3 Explanation\n\nThis test case is valid for all subtasks.\n", "locale": "en", "translations": {"en": {"title": "[NOISG 2025 Finals] Flooding", "background": "", "description": "Pavementland is a rectangle-shaped city, which can be modelled as a $h \\times w$ grid of cells. The rows of the grid are numbered $1$ to $h$ from north to south, and the columns of the grid are numbered $1$ to $w$ from west to east. We refer to the cell located at row $r$ and column $c$ of the grid as cell $(r, c)$.\n\nIn the grid, each cell is either empty or contains a building. At least one cell is empty.\n\nDue to a monsoon surge, flash floods are occurring throughout Pavementland. Initially, one empty cell becomes flooded with water by the rain. Then, the water flows according to the following rules:\n\n- If an empty cell is adjacent to at least one flooded cell, it becomes flooded.\n- If a cell containing a building is adjacent to at least two flooded cells, the building collapses and the cell becomes flooded.\n\nNote that a cell is adjacent to another cell if they share an edge. A cell is adjacent to at most four other cells. Further note that water may not flow outside the grid. Let $f((r, c))$ be the number of cells that would be flooded after the process if the cell $(r, c)$ were initially flooded.\n\nCity officials are seeking to forecast the extent of flash floods in all possible scenarios. Help them determine the sum of $f((r, c))$ over all empty cells $(r, c)$.\n", "inputFormat": "Your program must read from standard input.\n\nThe first line of input contains two space-separated integers $h$ and $w$.\n\nThe next $h$ lines of input each contain a binary string of length $w$. If the $c$-th character of the $r$-th line is $0$, then the cell $(r, c)$ is empty. If the $c$-th character of the $r$-th line is $1$, then the cell $(r, c)$ contains a building.\n", "outputFormat": "Your program must print to standard output.\n\nOutput a single integer, the sum of $f((r, c))$ over all empty cells $(r, c)$.\n", "hint": "### Subtasks\n\nFor all test cases, the input will satisfy the following bounds:\n\n- $1 \\leq h, w \\leq 5000$\n- There is at least one empty cell in the grid.\n\nYour program will be tested on input instances that satisfy the following restrictions:\n\n| Subtask | Marks | Additional Constraints |\n| :-: | :-: | :-: |\n| $0$ | $0$ | Sample test cases |\n| $1$ | $5$ | $h = 1$ |\n| $2$ | $7$ | $h, w \\leq 80$ |\n| $3$ | $16$ | $h, w \\leq 500$ |\n| $4$ | $32$ | $h, w \\leq 2000$ |\n| $5$ | $40$ | No additional constraints |\n\n### Sample Test Case 1 Explanation\n\nThis test case is valid for subtasks $2$ to $5$.\n\nIf cells $(1, 1), (1, 2), (1, 3), (2, 1)$, or $(3, 1)$ were initially flooded, the entire grid would become flooded after the process. If cell $(3, 3)$ were initially flooded, only $1$ cell would become flooded after the process. Hence, the output is $9 + 9 + 9 + 9 + 9 + 1 = 46$.\n\n### Sample Test Case 2 Explanation\n\nThis test case is valid for subtasks $2$ to $5$.\n\n### Sample Test Case 3 Explanation\n\nThis test case is valid for all subtasks.\n", "locale": "en"}, "zh-CN": {"title": "[NOISG 2025 Finals] 洪水", "background": "", "description": "Pavementland 是一座城市，可以用一个 $h \\times w$ 的矩形网格表示。网格的行从北到南编号为 $1$ 到 $h$，列从西到东编号为 $1$ 到 $w$。我们将位于网格第 $r$ 行、第 $c$ 列的单元格称为单元格 $(r, c)$。\n\n在网格中，每个单元格要么是空的，要么包含一座建筑。至少有一个单元格是空的。\n\n由于季风暴潮，Pavementland 发生了突发洪水。最初，一场降雨导致某个空单元格被水淹没。然后，水按照以下规则流动：\n\n- 如果一个空单元格与至少一个被淹没的单元格相邻，它也会被淹没。\n- 如果一个包含建筑的单元格与至少两个被淹没的单元格相邻，该建筑会倒塌，该单元格变为被淹没状态。\n\n请注意，如果两个单元格共享一条边，则它们是相邻的。一个单元格最多可以与四个其他单元格相邻。进一步说明，水不会流出网格范围。令 $f((r, c))$ 表示如果单元格 $(r, c)$ 最初被淹没，则最终被淹没的单元格总数。\n\n市政官员希望预测所有可能情况下的洪水蔓延范围。请帮助他们计算所有空单元格 $(r, c)$ 的 $f((r, c))$ 之和。\n", "inputFormat": "你的程序必须从标准输入读取数据。\n\n输入的第一行包含两个用空格分隔的整数 $h$ 和 $w$。\n\n接下来的 $h$ 行中，每行包含一个长度为 $w$ 的二进制字符串。如果第 $r$ 行的第 $c$ 个字符是 $0$，则单元格 $(r, c)$ 是空的。如果该字符是 $1$，则单元格 $(r, c)$ 包含一座建筑。\n", "outputFormat": "你的程序必须向标准输出打印结果。\n\n输出一个单一整数，表示所有空单元格 $(r, c)$ 的 $f((r, c))$ 之和。\n", "hint": "### 子任务\n\n对于所有测试用例，输入将满足以下约束条件：\n\n- $1 \\leq h, w \\leq 5000$\n- 网格中至少有一个空单元格。\n\n你的程序将在满足以下特殊性质的输入数据上进行测试：\n\n| 子任务 | 分数 | 特殊性质 |\n| :-: | :-: | :-: |\n| $0$ | $0$ | 样例 |\n| $1$ | $5$ | $h = 1$ |\n| $2$ | $7$ | $h, w \\leq 80$ |\n| $3$ | $16$ | $h, w \\leq 500$ |\n| $4$ | $32$ | $h, w \\leq 2000$ |\n| $5$ | $40$ | 无 |\n\n### 样例 1 解释\n\n此样例适用于子任务 $2$ 至 $5$。\n\n如果单元格 $(1, 1), (1, 2), (1, 3), (2, 1)$ 或 $(3, 1)$ 最初被淹没，则整个网格最终都会被淹没。如果单元格 $(3, 3)$ 最初被淹没，则最终只有 $1$ 个单元格被淹没。因此，输出为 $9 + 9 + 9 + 9 + 9 + 1 = 46$。\n\n### 样例 2 解释\n\n此样例适用于子任务 $2$ 至 $5$。\n\n### 样例 3 解释\n\n此样例适用于所有子任务。\n", "locale": "zh-CN"}}}
{"pid": "P12020", "type": "P", "difficulty": 7, "samples": [["0 3 4 3\n3 3 7 0\nXAo 0\nXAX 5\nXaA 2", "4\n2\n5"], ["0 5 10 5\n9 14 29 16 18 14 20 6 23 16\naxaxa 0\naaOOa 0\nOaOxO 0\nOaOOa 0\naxaaO 0", "2\n0\n0\n1\n0"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["动态规划 DP", "容斥原理", "快速沃尔什变换 FWT", "根号分治"], "title": "CF1033F 加强版", "background": "", "description": "定义一种二元位运算为 $\\odot$ ，运算数均在区间 $[0,2^w)$ 内，他使用数字门进行运算，运算法则由一个长度为 $w$ 的字符串构成，设为 $s$，$s$ 仅包含 $\\texttt{A,O,X,a,o,x}$，分别表示 与，或，异或，与非，或非，同或，表示每一位的运算法则。以下是这些位运算的真值表，$p,q$ 为参与运算的两个数：\n\n$$\\begin{matrix}\\texttt{p\\ q\\ A\\ O\\ X\\ a\\ o\\ x}\\\\\\texttt{0\\ 0\\ 0\\ 0\\ 0\\ 1\\ 1\\ 1}\\\\\\texttt{0\\ 1\\ 0\\ 1\\ 1\\ 1\\ 0\\ 0}\\\\\\texttt{1\\ 0\\ 0\\ 1\\ 1\\ 1\\ 0\\ 0}\\\\\\texttt{1\\ 1\\ 1\\ 1\\ 0\\ 0\\ 0\\ 1}\\end{matrix}$$\n\n具体地，$x\\odot y \\ (s) =z$ 的运算方式如下：\n\n+ $z$ 的二进制的**从高到低**第 $i$ 位的结果是 $x$ 和 $y$ 的第 $i$ 位通过 $s_i$ 对应的运算得到的。\n\n给定 $n$ 个 $[0,2^w)$ 中的数 $a_1,a_2,\\cdots ,a_n$ 和 $q$ 组询问，每次询问给定门运算的运算法则 $s$，询问有多少对**有序对** $(x,y)$ 满足 $a_x \\odot a_y = z$（注意 $x$ 可以等于 $y$）。\n\n", "inputFormat": "第一行四个正整数 $T,w,n,q$，分别表示测试点编号，运算法则长度，$a$ 序列长度和询问数量。\n\n第二行 $n$ 个整数，表示 $a_1,a_2,\\dots,a_n$。\n\n接下来 $q$ 行，每行一个字符串 $s$ 和一个非负整数 $z$。", "outputFormat": "对于每个询问，输出一个非负整数，表示符合要求的有序对 $(x,y)$ 数量。", "hint": "| 测试点编号  | $w\\leq$ | $n\\leq$ | $q\\leq$       | 特殊性质                               |\n| ----------- | ------- | ------- | ------------- | -------------------------------------- |\n| $1\\sim 3$   | $16$    | $100$   | $10$          | 无                                     |\n| $4\\sim 5$   | $8$     | $10^5$  | $10$          | 无                                     |\n| $6\\sim9$    | $10$    | $10^5$  | $10^4$        | 无                                     |\n| $10\\sim 12$ | $11$    | $10^5$  | $3\\times10^4$ | 无                                     |\n| $13\\sim14$  | $12$    | $10^5$  | $5\\times10^4$ | 无                                     |\n| $15\\sim16$  | $13$    | $10^5$  | $7\\times10^4$ | 无                                     |\n| $17\\sim19$  | $14$    | $10^5$  | $10^5$        | 无                                     |\n| $20\\sim21$  | $16$    | $10^5$  | $10^5$        | $s_i$ 仅包含 $\\texttt{O,a,x}$，$z_i=0$ |\n| $22\\sim25$  | $16$    | $10^5$  | $10^5$        | 无                                     |\n\n对于 $100\\%$ 的数据：$1\\leq w\\leq 16$，$1\\leq n\\leq10^5$，$1\\leq q\\leq 10^5$，$0\\leq z_i,a_i<2^w$，$|s_i|=w$ 且 $s_i$ 仅包含 $\\texttt{A,O,X,a,o,x}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "CF1033F 加强版", "background": "", "description": "定义一种二元位运算为 $\\odot$ ，运算数均在区间 $[0,2^w)$ 内，他使用数字门进行运算，运算法则由一个长度为 $w$ 的字符串构成，设为 $s$，$s$ 仅包含 $\\texttt{A,O,X,a,o,x}$，分别表示 与，或，异或，与非，或非，同或，表示每一位的运算法则。以下是这些位运算的真值表，$p,q$ 为参与运算的两个数：\n\n$$\\begin{matrix}\\texttt{p\\ q\\ A\\ O\\ X\\ a\\ o\\ x}\\\\\\texttt{0\\ 0\\ 0\\ 0\\ 0\\ 1\\ 1\\ 1}\\\\\\texttt{0\\ 1\\ 0\\ 1\\ 1\\ 1\\ 0\\ 0}\\\\\\texttt{1\\ 0\\ 0\\ 1\\ 1\\ 1\\ 0\\ 0}\\\\\\texttt{1\\ 1\\ 1\\ 1\\ 0\\ 0\\ 0\\ 1}\\end{matrix}$$\n\n具体地，$x\\odot y \\ (s) =z$ 的运算方式如下：\n\n+ $z$ 的二进制的**从高到低**第 $i$ 位的结果是 $x$ 和 $y$ 的第 $i$ 位通过 $s_i$ 对应的运算得到的。\n\n给定 $n$ 个 $[0,2^w)$ 中的数 $a_1,a_2,\\cdots ,a_n$ 和 $q$ 组询问，每次询问给定门运算的运算法则 $s$，询问有多少对**有序对** $(x,y)$ 满足 $a_x \\odot a_y = z$（注意 $x$ 可以等于 $y$）。\n\n", "inputFormat": "第一行四个正整数 $T,w,n,q$，分别表示测试点编号，运算法则长度，$a$ 序列长度和询问数量。\n\n第二行 $n$ 个整数，表示 $a_1,a_2,\\dots,a_n$。\n\n接下来 $q$ 行，每行一个字符串 $s$ 和一个非负整数 $z$。", "outputFormat": "对于每个询问，输出一个非负整数，表示符合要求的有序对 $(x,y)$ 数量。", "hint": "| 测试点编号  | $w\\leq$ | $n\\leq$ | $q\\leq$       | 特殊性质                               |\n| ----------- | ------- | ------- | ------------- | -------------------------------------- |\n| $1\\sim 3$   | $16$    | $100$   | $10$          | 无                                     |\n| $4\\sim 5$   | $8$     | $10^5$  | $10$          | 无                                     |\n| $6\\sim9$    | $10$    | $10^5$  | $10^4$        | 无                                     |\n| $10\\sim 12$ | $11$    | $10^5$  | $3\\times10^4$ | 无                                     |\n| $13\\sim14$  | $12$    | $10^5$  | $5\\times10^4$ | 无                                     |\n| $15\\sim16$  | $13$    | $10^5$  | $7\\times10^4$ | 无                                     |\n| $17\\sim19$  | $14$    | $10^5$  | $10^5$        | 无                                     |\n| $20\\sim21$  | $16$    | $10^5$  | $10^5$        | $s_i$ 仅包含 $\\texttt{O,a,x}$，$z_i=0$ |\n| $22\\sim25$  | $16$    | $10^5$  | $10^5$        | 无                                     |\n\n对于 $100\\%$ 的数据：$1\\leq w\\leq 16$，$1\\leq n\\leq10^5$，$1\\leq q\\leq 10^5$，$0\\leq z_i,a_i<2^w$，$|s_i|=w$ 且 $s_i$ 仅包含 $\\texttt{A,O,X,a,o,x}$。", "locale": "zh-CN"}}}
{"pid": "P12021", "type": "P", "difficulty": 4, "samples": [["3\n4 2\n2 2\n10 20", "10\n3\n1024"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "Fibonacci 数列", "整除分块"], "title": "面包题", "background": "面包（bread）", "description": "从 $1 \\sim n$ 的自然数中选出若干个数（可以不选），满足以下条件：\n\n- 若选择了 $x$，则不能选择 $kx$。\n\n求总共有多少种选法（不考虑顺序）。\n\n答案需要**对** ${998244353}$ **取模**。", "inputFormat": "第一行一个正整数 $T$ 表示数据组数。\n\n接下来每组数据一行输入两个正整数：$n,k$，含义同题面所示。", "outputFormat": "一共 $T$ 行，每行一个正整数表示对应的答案。", "hint": "### 样例解释\n\n对于第一组数据，满足条件的 $S$ 有 $\\varnothing,\\{1\\},\\{1,3\\},\\{1,4\\},\\{1,3,4\\},\\{2\\},\\{2,3\\},\\{3\\},\\{3,4\\},\\{4\\}$，共 $10$ 种 $S$ 满足上述条件。\n\n对于第二组数据，满足条件的 $S$ 有 $\\varnothing,\\{1\\},\\{2\\}$，共 $3$ 种 $S$ 满足上述条件。\n\n对于第三组数据，任意满足 $S\\subseteq\\{1,2,3,\\dots,10\\}$ 的 $S$ 都符合条件，因此答案为 $2^{10}=1024$。\n\n### 数据范围\n\n对于 $20\\%$ 的数据：$1\\leq T\\leq 10$，$2\\leq n,k \\leq 15$\n\n对于 $40\\%$ 的数据：$1\\leq T\\leq 10^2$，$2\\leq n,k \\leq 10^5$\n\n对于 $100\\%$ 的数据：$1\\leq T\\leq 10^5$，$2\\leq n,k \\leq 10^9$\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "面包题", "background": "面包（bread）", "description": "从 $1 \\sim n$ 的自然数中选出若干个数（可以不选），满足以下条件：\n\n- 若选择了 $x$，则不能选择 $kx$。\n\n求总共有多少种选法（不考虑顺序）。\n\n答案需要**对** ${998244353}$ **取模**。", "inputFormat": "第一行一个正整数 $T$ 表示数据组数。\n\n接下来每组数据一行输入两个正整数：$n,k$，含义同题面所示。", "outputFormat": "一共 $T$ 行，每行一个正整数表示对应的答案。", "hint": "### 样例解释\n\n对于第一组数据，满足条件的 $S$ 有 $\\varnothing,\\{1\\},\\{1,3\\},\\{1,4\\},\\{1,3,4\\},\\{2\\},\\{2,3\\},\\{3\\},\\{3,4\\},\\{4\\}$，共 $10$ 种 $S$ 满足上述条件。\n\n对于第二组数据，满足条件的 $S$ 有 $\\varnothing,\\{1\\},\\{2\\}$，共 $3$ 种 $S$ 满足上述条件。\n\n对于第三组数据，任意满足 $S\\subseteq\\{1,2,3,\\dots,10\\}$ 的 $S$ 都符合条件，因此答案为 $2^{10}=1024$。\n\n### 数据范围\n\n对于 $20\\%$ 的数据：$1\\leq T\\leq 10$，$2\\leq n,k \\leq 15$\n\n对于 $40\\%$ 的数据：$1\\leq T\\leq 10^2$，$2\\leq n,k \\leq 10^5$\n\n对于 $100\\%$ 的数据：$1\\leq T\\leq 10^5$，$2\\leq n,k \\leq 10^9$\n", "locale": "zh-CN"}}}
