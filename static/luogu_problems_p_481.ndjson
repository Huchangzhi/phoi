{"pid": "P10755", "type": "P", "difficulty": 0, "samples": [["2\n0 2\n2 0\n", "2"], ["4\n0 2 3 1\n2 0 4 5\n3 4 0 3\n1 5 3 0", "6"], ["8\n0 2 5 8 5 9 2 6\n2 0 8 4 3 7 5 3\n5 8 0 3 8 4 3 3\n8 4 3 0 2 2 7 7\n5 3 8 2 0 7 3 3\n9 7 4 2 7 0 6 7\n2 5 3 7 3 6 0 4\n6 3 3 7 3 7 4 0", "25"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COI（克罗地亚）"], "title": "[COI 2023] Netrpeljivost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "午夜临近，是时候抓紧了。玛格丽塔成功地迎接了所有客人后，他们便在长桌旁安然落座。我们可以按照他们入座的顺序，将客人用从 1 到 $N$ 的数字进行标记。出于某种未知的原因，撒旦大舞会上的客人数量总是 2 的幂。\n\n然而，玛格丽塔现在遇到了一个难题，因为任意两位客人之间都存在一定程度的 **不和睦** (netrpeljivost)，我们可以用一个非负数来表示。客人 $i$ 和 $j$ 之间的不和睦程度我们记作 $netrp(i, j)$。并且总有 $netrp(i, j) = netrp(j, i)$ 以及 $netrp(i, i) = 0$。\n\n由于客人们已经（不怎么舒服地）坐定了，玛格丽塔不能大幅度地调整他们的顺序。客人们甚至不知道，他们自己其实身处一棵巨大的撒旦完全二叉树的叶子节点上，这棵树俗称 VSPBS，当 $N=4$ 时的情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xl062poz.png)\n\n(a) 图 1：初始的树结构，(b) 图 2：操作后的树结构\n\n玛格丽塔可以选择任意一个节点，并在一次操作中交换该节点的左、右孩子，从而改变对应叶子节点上客人的顺序。上图展示了当玛格丽塔对树的根节点进行一次操作后，树（以及餐桌）的状态。玛格丽塔可以对任意节点执行任意次操作。\n\n餐桌的总 **不和睦** 程度定义为所有相邻就坐的客人之间的不和睦程度之和。请帮助玛格丽塔计算出她能达成的餐桌总不和睦程度的最小值！", "inputFormat": "第一行是一个正整数 $N$，表示客人的数量。\n\n在接下来的 $N$ 行中，第 $i$ 行（对于 $1 \\le i \\le N$）包含 $N$ 个整数，其中第 $j$ 个数代表 $netrp(i, j)$。这些值满足上文提到的性质。", "outputFormat": "请输出题目所求的那个数值。", "hint": "**【样例解释】**\n\n在第二个例子中，一个可能的排列方式可以达到最小不耐受度的是 $2,1,4,3$。\n\n**【数据范围】**\n\n在所有子任务中，都满足 $1 \\leq N \\leq 2048$，且 $N$ 是 $2$ 的幂次，$0 \\leq netrp(i,j) \\leq 10^9$。\n\n- 子任务 1（10 分）：$N\\leq 16$；\n- 子任务 2（17 分）：$N\\leq 128$；\n- 子任务 3（32 分）：$N\\leq 512$；\n- 子任务 4（41 分）：无特殊限制；", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2023] Netrpeljivost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "午夜临近，是时候抓紧了。玛格丽塔成功地迎接了所有客人后，他们便在长桌旁安然落座。我们可以按照他们入座的顺序，将客人用从 1 到 $N$ 的数字进行标记。出于某种未知的原因，撒旦大舞会上的客人数量总是 2 的幂。\n\n然而，玛格丽塔现在遇到了一个难题，因为任意两位客人之间都存在一定程度的 **不和睦** (netrpeljivost)，我们可以用一个非负数来表示。客人 $i$ 和 $j$ 之间的不和睦程度我们记作 $netrp(i, j)$。并且总有 $netrp(i, j) = netrp(j, i)$ 以及 $netrp(i, i) = 0$。\n\n由于客人们已经（不怎么舒服地）坐定了，玛格丽塔不能大幅度地调整他们的顺序。客人们甚至不知道，他们自己其实身处一棵巨大的撒旦完全二叉树的叶子节点上，这棵树俗称 VSPBS，当 $N=4$ 时的情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xl062poz.png)\n\n(a) 图 1：初始的树结构，(b) 图 2：操作后的树结构\n\n玛格丽塔可以选择任意一个节点，并在一次操作中交换该节点的左、右孩子，从而改变对应叶子节点上客人的顺序。上图展示了当玛格丽塔对树的根节点进行一次操作后，树（以及餐桌）的状态。玛格丽塔可以对任意节点执行任意次操作。\n\n餐桌的总 **不和睦** 程度定义为所有相邻就坐的客人之间的不和睦程度之和。请帮助玛格丽塔计算出她能达成的餐桌总不和睦程度的最小值！", "inputFormat": "第一行是一个正整数 $N$，表示客人的数量。\n\n在接下来的 $N$ 行中，第 $i$ 行（对于 $1 \\le i \\le N$）包含 $N$ 个整数，其中第 $j$ 个数代表 $netrp(i, j)$。这些值满足上文提到的性质。", "outputFormat": "请输出题目所求的那个数值。", "hint": "**【样例解释】**\n\n在第二个例子中，一个可能的排列方式可以达到最小不耐受度的是 $2,1,4,3$。\n\n**【数据范围】**\n\n在所有子任务中，都满足 $1 \\leq N \\leq 2048$，且 $N$ 是 $2$ 的幂次，$0 \\leq netrp(i,j) \\leq 10^9$。\n\n- 子任务 1（10 分）：$N\\leq 16$；\n- 子任务 2（17 分）：$N\\leq 128$；\n- 子任务 3（32 分）：$N\\leq 512$；\n- 子任务 4（41 分）：无特殊限制；", "locale": "zh-CN"}}}
{"pid": "P10756", "type": "P", "difficulty": 6, "samples": [["2 1 1\n1 2\n1 2\n1", "1 2\n1 2"], ["4 3 0\n2 4 1 3\n1 2 3 4", "2 4"], ["5 3 3\n1 4 3 2 5\n4 5 1 2 3\n3\n1\n4", "2 5\n2 6\n3 1\n3 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2023", "可持久化线段树", "COI（克罗地亚）"], "title": "[COI 2023] Sličnost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "她手里捧着一束令人作呕、令人不安的黄花。但他却喜欢上了她。\n\n根据一个著名的定理，每个人的个性都可以用一个长度为 $N$ 的排列来表示。因此，我们主人公——大师 (Majstor) 的个性，可以用一个排列 $p$ 来表示。而那位吸引了他目光的女士——玛格丽特 (Margarita) 的个性，则可以用一个排列 $q$ 来表示。\n\n两个排列的 **相似度** (sličnost)，也即婚姻生活的幸福度，可以表示为：从排列 $p$ 中取一个长度为 $K$ 的子区间，再从排列 $q$ 中取一个长度为 $K$ 的子区间，计算这两个子区间所含元素的交集大小，所有可能的取法中，这个交集大小的最大值就是相似度。在此，交集是在集合的意义上考虑的，也就是说，子区间内数字的顺序无关紧要。例如，在 $N = 4, K = 3$ 的情况下，排列 $(2\\ 4\\ 1\\ 3)$ 和 $(1\\ 2\\ 3\\ 4)$ 的相似度是 2，这个值对于任意一对子区间的选择都能达到。\n\n自从见到玛格丽特，大师就对他们俩排列的相似度念念不忘，他的个性也因此变得非常多变。每一天，他排列中的两个相邻元素都会互换位置。需要注意的是，这个变化是永久性的，也就是说，这两个元素在接下来的日子里会保持互换后的状态。现在，他想知道在他刚见到她时，他和她的排列的相似度是多少，以及在接下来的 $Q$ 天里，每天发生变化后的相似度是多少。此外，他还想知道，这个最大的相似度是由多少对子区间达成的。在他爱情的苦恼中，他请求您的帮助！", "inputFormat": "第一行是三个整数 $N, K$ 和 $Q$。\n\n第二行是 $N$ 个数字，构成了排列 $p$。\n\n第三行是 $N$ 个数字，构成了排列 $q$。\n\n接下来的 $Q$ 行是变化的描述。第 $i$ 行包含一个整数 $t_i$ ($1 \\le t_i < N$)，表示在大师的排列 $p$ 中，位置为 $t_i$ 和 $t_i + 1$ 的数字交换了位置。", "outputFormat": "在第一行，需要输出初始排列的相似度，以及达到该相似度的子区间对的数量。\n\n在接下来的 $Q$ 行中，每行输出当天变化发生后，同样的两项信息。", "hint": "**【样例解释】**\n\n第二个样例的解释：在第一个排列中长度为 $3$ 的子区间有 $(2\\ 4\\ 1)$ 和 $(4\\ 1\\ 3)$，在第二个排列中有 $(1\\ 2\\ 3)$ 和 $(2\\ 3\\ 4)$。对于交集，我们有：\n\n- $\\{2,4,1\\} \\cap \\{1,2,3\\} = \\{1,2\\}$；\n- $\\{2,4,1\\} \\cap \\{2,3,4\\} = \\{2,4\\}$；\n- $\\{4,1,3\\} \\cap \\{1,2,3\\} = \\{1,3\\}$；\n- $\\{4,1,3\\} \\cap \\{2,3,4\\} = \\{3,4\\}$；\n\n所以我们可以看到相似度是 $2$，并且这种相似度在四对子区间上得以实现。\n\n**【数据范围】**\n\n在所有子任务中，$2 \\leq N\\leq 10^5$，$1 \\leq K \\leq N$，$0 \\leq Q \\leq 10^5$。\n\n| 子任务  | 分数  | 限制条件     |\n|:--------:|:------:|:-------------:|\n| $1$      | $7$    | $Q = 0, N ≤ 100$  |\n| $2$      | $10$   | $Q = 0, N ≤ 5000$ |\n| $3$      | $7$    | $N = 4$   |\n| $4$      | $20$   | $N, Q ≤ 100$ |\n| $5$      | $23$   | $N, Q ≤ 5000$ |\n| $6$      | $33$   | 无额外限制   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COI 2023] Sličnost", "background": "题目来源：<https://hsin.hr/hio2023/>。", "description": "她手里捧着一束令人作呕、令人不安的黄花。但他却喜欢上了她。\n\n根据一个著名的定理，每个人的个性都可以用一个长度为 $N$ 的排列来表示。因此，我们主人公——大师 (Majstor) 的个性，可以用一个排列 $p$ 来表示。而那位吸引了他目光的女士——玛格丽特 (Margarita) 的个性，则可以用一个排列 $q$ 来表示。\n\n两个排列的 **相似度** (sličnost)，也即婚姻生活的幸福度，可以表示为：从排列 $p$ 中取一个长度为 $K$ 的子区间，再从排列 $q$ 中取一个长度为 $K$ 的子区间，计算这两个子区间所含元素的交集大小，所有可能的取法中，这个交集大小的最大值就是相似度。在此，交集是在集合的意义上考虑的，也就是说，子区间内数字的顺序无关紧要。例如，在 $N = 4, K = 3$ 的情况下，排列 $(2\\ 4\\ 1\\ 3)$ 和 $(1\\ 2\\ 3\\ 4)$ 的相似度是 2，这个值对于任意一对子区间的选择都能达到。\n\n自从见到玛格丽特，大师就对他们俩排列的相似度念念不忘，他的个性也因此变得非常多变。每一天，他排列中的两个相邻元素都会互换位置。需要注意的是，这个变化是永久性的，也就是说，这两个元素在接下来的日子里会保持互换后的状态。现在，他想知道在他刚见到她时，他和她的排列的相似度是多少，以及在接下来的 $Q$ 天里，每天发生变化后的相似度是多少。此外，他还想知道，这个最大的相似度是由多少对子区间达成的。在他爱情的苦恼中，他请求您的帮助！", "inputFormat": "第一行是三个整数 $N, K$ 和 $Q$。\n\n第二行是 $N$ 个数字，构成了排列 $p$。\n\n第三行是 $N$ 个数字，构成了排列 $q$。\n\n接下来的 $Q$ 行是变化的描述。第 $i$ 行包含一个整数 $t_i$ ($1 \\le t_i < N$)，表示在大师的排列 $p$ 中，位置为 $t_i$ 和 $t_i + 1$ 的数字交换了位置。", "outputFormat": "在第一行，需要输出初始排列的相似度，以及达到该相似度的子区间对的数量。\n\n在接下来的 $Q$ 行中，每行输出当天变化发生后，同样的两项信息。", "hint": "**【样例解释】**\n\n第二个样例的解释：在第一个排列中长度为 $3$ 的子区间有 $(2\\ 4\\ 1)$ 和 $(4\\ 1\\ 3)$，在第二个排列中有 $(1\\ 2\\ 3)$ 和 $(2\\ 3\\ 4)$。对于交集，我们有：\n\n- $\\{2,4,1\\} \\cap \\{1,2,3\\} = \\{1,2\\}$；\n- $\\{2,4,1\\} \\cap \\{2,3,4\\} = \\{2,4\\}$；\n- $\\{4,1,3\\} \\cap \\{1,2,3\\} = \\{1,3\\}$；\n- $\\{4,1,3\\} \\cap \\{2,3,4\\} = \\{3,4\\}$；\n\n所以我们可以看到相似度是 $2$，并且这种相似度在四对子区间上得以实现。\n\n**【数据范围】**\n\n在所有子任务中，$2 \\leq N\\leq 10^5$，$1 \\leq K \\leq N$，$0 \\leq Q \\leq 10^5$。\n\n| 子任务  | 分数  | 限制条件     |\n|:--------:|:------:|:-------------:|\n| $1$      | $7$    | $Q = 0, N ≤ 100$  |\n| $2$      | $10$   | $Q = 0, N ≤ 5000$ |\n| $3$      | $7$    | $N = 4$   |\n| $4$      | $20$   | $N, Q ≤ 100$ |\n| $5$      | $23$   | $N, Q ≤ 5000$ |\n| $6$      | $33$   | 无额外限制   |", "locale": "zh-CN"}}}
{"pid": "P10757", "type": "P", "difficulty": 7, "samples": [["3 2 2\n1 2 3\n1 3 5 ", "1\n3 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2011", "提交答案", "Special Judge", "WC"], "title": "[WC2011] 关系挖掘", "background": "", "description": "有人说：“世界上任何两个人最多只需要通过 $6$ 个人就能建立联系”。小 B 对此非常感兴趣，于是着手开展了一些社会网络中关系挖掘的研究工作。\n\n现在小 B 得到了一个包含 $N$ 个人的社会网络数据，该网络中有 $M$ 条关系信息。一条关系信息可以表示为 $(a_i, b_i, w_i)$，表示 $a_i$ 与 $b_i$ 两个人之间存在关系，且紧密度为 $w_i$（$w_i>0$）。现在小 B 希望挑选其中的 $K$（$K\\leq N$）个人作为研究对象，为使研究工作具有较高的可信度，小 B 希望这 $K$ 个人之间的关系紧密度之和尽量大。\n\n该问题可抽象为：给定一个带权无向图 $G=(V, E)$ 和整数 $K$，目标是求出点集 $V$ 的一个子集 $S$，使得 $|S|=K$ 且使下式最大化：\n\n$$\\sum_{(a_i,b_i,w_i)\\in E \\wedge a_i\\in S \\wedge b_i \\in S} w_i$$", "inputFormat": "这是一道提交答案的试题，在你的目录下有 $10$ 个输入文件  `relation*.in`。\n\n输入文件的第一行为三个整数 $N$，$M$ 和 $K$，分别表示给定的社会网络中的点数（人数）、边数（关系数目）以及需要选择的点数（人数）$K$。\n\n接下来 $M$ 行，每行三个正整数 $a_i$，$b_i$，$w_i$，表示一条边（关系）。所有的点（人）按 $1$ 到 $N$ 依次编号。", "outputFormat": "对于每一个输入文件，在目录下给出对应的输出文件  `relation*.out`。\n\n输出文件应包含 $K$ 行，每行一个整数，表示选出的 $K$ 个人的编号。", "hint": "**【评分标准】**\n\n对于每个测试点，如果你没有输出或者输出不合法则得 $0$ 分。\n\n对于每个测试点，我们设有四个评分参数 $m_1$、$m_2$、$m_3$ 和 $m_4$。假设选手选出的 $K$ 个人之间关系紧密度之和为 $c$，\n- 若 $c>m_1$，得 $12$ 分；\n- 若 $c=m_1$，得 $10$ 分；\n- 若 $m_1>c\\geq m_2$，得 $8$ 分；\n- 若 $m_2>c\\geq m_3$，得 $5$ 分；\n- 若 $m_3>c\\geq m_4$，得 $3$ 分；\n- 若 $c>0$，得 $1$ 分；\n- 否则，得 $0$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2011] 关系挖掘", "background": "", "description": "有人说：“世界上任何两个人最多只需要通过 $6$ 个人就能建立联系”。小 B 对此非常感兴趣，于是着手开展了一些社会网络中关系挖掘的研究工作。\n\n现在小 B 得到了一个包含 $N$ 个人的社会网络数据，该网络中有 $M$ 条关系信息。一条关系信息可以表示为 $(a_i, b_i, w_i)$，表示 $a_i$ 与 $b_i$ 两个人之间存在关系，且紧密度为 $w_i$（$w_i>0$）。现在小 B 希望挑选其中的 $K$（$K\\leq N$）个人作为研究对象，为使研究工作具有较高的可信度，小 B 希望这 $K$ 个人之间的关系紧密度之和尽量大。\n\n该问题可抽象为：给定一个带权无向图 $G=(V, E)$ 和整数 $K$，目标是求出点集 $V$ 的一个子集 $S$，使得 $|S|=K$ 且使下式最大化：\n\n$$\\sum_{(a_i,b_i,w_i)\\in E \\wedge a_i\\in S \\wedge b_i \\in S} w_i$$", "inputFormat": "这是一道提交答案的试题，在你的目录下有 $10$ 个输入文件  `relation*.in`。\n\n输入文件的第一行为三个整数 $N$，$M$ 和 $K$，分别表示给定的社会网络中的点数（人数）、边数（关系数目）以及需要选择的点数（人数）$K$。\n\n接下来 $M$ 行，每行三个正整数 $a_i$，$b_i$，$w_i$，表示一条边（关系）。所有的点（人）按 $1$ 到 $N$ 依次编号。", "outputFormat": "对于每一个输入文件，在目录下给出对应的输出文件  `relation*.out`。\n\n输出文件应包含 $K$ 行，每行一个整数，表示选出的 $K$ 个人的编号。", "hint": "**【评分标准】**\n\n对于每个测试点，如果你没有输出或者输出不合法则得 $0$ 分。\n\n对于每个测试点，我们设有四个评分参数 $m_1$、$m_2$、$m_3$ 和 $m_4$。假设选手选出的 $K$ 个人之间关系紧密度之和为 $c$，\n- 若 $c>m_1$，得 $12$ 分；\n- 若 $c=m_1$，得 $10$ 分；\n- 若 $m_1>c\\geq m_2$，得 $8$ 分；\n- 若 $m_2>c\\geq m_3$，得 $5$ 分；\n- 若 $m_3>c\\geq m_4$，得 $3$ 分；\n- 若 $c>0$，得 $1$ 分；\n- 否则，得 $0$ 分。", "locale": "zh-CN"}}}
{"pid": "P10758", "type": "P", "difficulty": 0, "samples": [["3 3 1\n1 3\n1 2 1\n2 3 10\n1 3 5", "1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2011", "提交答案", "Special Judge", "CTSC/CTS"], "title": "[CTSC2011] 道路监控", "background": "", "description": "道路安全部门最近计划部署从 A 市到 B 市的道路监控系统，以提高该部门对于紧急事件的应对能力。A 市到 B 市的道路网可以描述为一个无向图 $G=(V, E)$，其中 $V$ 表示道路网中的节点集合，$E$ 表示连接节点的双向道路集合。所有的节点由 $1\\sim n$ 进行编号，其中 $n$ 为节点个数。A 市所处的节点为 $s$，B 市所处的节点为 $t$。\n\n该部门计划在其中一些道路中安装监控设备，以降低整个道路网的**响应难度**。当紧急事件发生时，部门需要派遣一些人力到一些道路中进行执勤，以使得**任何一条从节点 $s$ 到达节点 $t$ 的路径都经过至少一条监控道路**（安装了监控设备或者有人执勤）。因此**响应难度**定义为需要派遣人力的最少道路数，以使得任何一条从 $s$ 到 $t$ 的路径都经过至少一条监控道路。\n\n由于自然环境不同，在不同的道路安装监控设备的代价也可能不同。具体而言，对于一条边 $e$，其安装设备的代价为 $W(e)$。由于经费有限，他们希望找到一个方案，使得该道路网的响应难度不超过 $k$。请你帮助他们寻找一个尽可能经济的部署方案。", "inputFormat": "这是一道提交答案的试题，在你的目录下有 $10$ 个输入文件 `road*.in`。\n\n输入文件的第一行为三个整数 $n$，$m$ 和 $k$，分别表示道路网中的节点数、道路数以及响应难度的上限值。\n\n输入文件第二行包含两个整数 $s$ 和 $t$，表示 $A$ 市与 $B$ 市的节点编号。\n\n接下来 $m$ 行，每行三个正整数 $a_i$，$b_i$，$w_i$，表示一条连接节点 $a_i$ 和节点 $b_i$ 的道路，其安装监控设备的费用为 $w_i$。", "outputFormat": "对于每一个输入文件，在目录下给出对应的输出文件 `road*.out`。\n\n输出文件第一行包含一个值 $s$，表示选手提供的方案中将在 $s$ 条道路上安装监控设备。接下来 $s$ 行每行包含一个整数 $p_i$，表示在输入文件中的第 $p_i$ 条道路上安装监控设备（边从 $1$ 开始编号）。", "hint": "对于每个测试点，如果你没有输出或者输出不合法则得 $0$ 分。\n\n对于每个测试点，我们设有五个评分参数 $m_1$、$m_2$、$m_3$、$m_4$ 和 $m_5$。假设选手的方案中费用为 $c$，\n\n- 若 $c<m_1$，得 $12$ 分；（备注：赛场上实际为得 $10$ 分）\n- 若 $c=m_1$，得 $10$ 分；\n- 若 $m_1<c\\leq m_2$，得 $8$ 分；\n- 若 $m_2<c\\leq m_3$，得 $5$ 分；\n- 若 $m_3<c\\leq m_4$，得 $3$ 分；\n- 若 $c<m_5$，得 $1$ 分；\n- 否则，得 $0$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTSC2011] 道路监控", "background": "", "description": "道路安全部门最近计划部署从 A 市到 B 市的道路监控系统，以提高该部门对于紧急事件的应对能力。A 市到 B 市的道路网可以描述为一个无向图 $G=(V, E)$，其中 $V$ 表示道路网中的节点集合，$E$ 表示连接节点的双向道路集合。所有的节点由 $1\\sim n$ 进行编号，其中 $n$ 为节点个数。A 市所处的节点为 $s$，B 市所处的节点为 $t$。\n\n该部门计划在其中一些道路中安装监控设备，以降低整个道路网的**响应难度**。当紧急事件发生时，部门需要派遣一些人力到一些道路中进行执勤，以使得**任何一条从节点 $s$ 到达节点 $t$ 的路径都经过至少一条监控道路**（安装了监控设备或者有人执勤）。因此**响应难度**定义为需要派遣人力的最少道路数，以使得任何一条从 $s$ 到 $t$ 的路径都经过至少一条监控道路。\n\n由于自然环境不同，在不同的道路安装监控设备的代价也可能不同。具体而言，对于一条边 $e$，其安装设备的代价为 $W(e)$。由于经费有限，他们希望找到一个方案，使得该道路网的响应难度不超过 $k$。请你帮助他们寻找一个尽可能经济的部署方案。", "inputFormat": "这是一道提交答案的试题，在你的目录下有 $10$ 个输入文件 `road*.in`。\n\n输入文件的第一行为三个整数 $n$，$m$ 和 $k$，分别表示道路网中的节点数、道路数以及响应难度的上限值。\n\n输入文件第二行包含两个整数 $s$ 和 $t$，表示 $A$ 市与 $B$ 市的节点编号。\n\n接下来 $m$ 行，每行三个正整数 $a_i$，$b_i$，$w_i$，表示一条连接节点 $a_i$ 和节点 $b_i$ 的道路，其安装监控设备的费用为 $w_i$。", "outputFormat": "对于每一个输入文件，在目录下给出对应的输出文件 `road*.out`。\n\n输出文件第一行包含一个值 $s$，表示选手提供的方案中将在 $s$ 条道路上安装监控设备。接下来 $s$ 行每行包含一个整数 $p_i$，表示在输入文件中的第 $p_i$ 条道路上安装监控设备（边从 $1$ 开始编号）。", "hint": "对于每个测试点，如果你没有输出或者输出不合法则得 $0$ 分。\n\n对于每个测试点，我们设有五个评分参数 $m_1$、$m_2$、$m_3$、$m_4$ 和 $m_5$。假设选手的方案中费用为 $c$，\n\n- 若 $c<m_1$，得 $12$ 分；（备注：赛场上实际为得 $10$ 分）\n- 若 $c=m_1$，得 $10$ 分；\n- 若 $m_1<c\\leq m_2$，得 $8$ 分；\n- 若 $m_2<c\\leq m_3$，得 $5$ 分；\n- 若 $m_3<c\\leq m_4$，得 $3$ 分；\n- 若 $c<m_5$，得 $1$ 分；\n- 否则，得 $0$ 分。", "locale": "zh-CN"}}}
{"pid": "P10759", "type": "P", "difficulty": 6, "samples": [["6 1\n3 0\n-3 1\n-5 0\n2 1\n6 3\n-4 5", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "2024", "可并堆", "BalticOI（波罗的海）", "启发式合并"], "title": "[BalticOI 2024] Jobs", "background": "翻译自 [BalticOI 2024 Day1 T1](https://boi2024.lmio.lt/tasks/d1-jobs-statement.pdf)。", "description": "目前，你可以选择从 $1$ 到 $N$ 编号的 $N$ 个一次性工作。\n\n完成第 $i$ 个工作将给你带来 $x$ 欧元的利润，当然，利润也可能是负的。\n\n有些工作依赖于另一个工作。也就是说，可能有一个编号为 $p$ 的工作必须在第 $i$ 个工作开始之前完成。因此，一个利润较大的工作如果依赖于一个利润为负的工作，看起来收益可能会比较小。\n\n如果 $p = 0$，则第 $i$ 个工作没有依赖。\n\n你目前有 $s$ 欧元，可以决定做哪些工作以及以什么顺序去做，只要尊重依赖关系。此外，你所拥有的钱数在任何时候都不能变成负数。\n\n请计算通过选择按照某种顺序完成（也可能某些选择不完成）这 $N$ 个工作所能获得的最大利润。", "inputFormat": "第一行包含两个整数 $N$ 和 $s$，分别是工作的数量和你最初拥有的金额。\n\n接下来的 $N$ 行，每行包含两个整数 $x$ 和 $p$，分别是第 $i$ 个工作的利润和它所依赖的前置工作的编号。如果 $p = 0$，则第 $i$ 个工作没有依赖。", "outputFormat": "你的程序应该输出一个整数，即你能够获得的最大利润。", "hint": "分别选择 $1,4,3,5$ 号工作即可，总利润为 $3+2-5+6 = 6$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $s = 10^{18}$ | $11$ |\n| $2$ | $N \\leq 2000$ 且满足性质 A | $14$ |\n| $3$ | 满足性质 A | $15$ |\n| $4$ | $N \\leq 2000$ | $29$ |\n| $5$ | 无特殊性质 | $31$ |\n\n* 性质 A：每个 $p_i$ 要么是 $0$，要么是 $i-1$。\n\n对于所有的数据，$1 \\leq N \\leq 3 \\times 10^5$，$0 \\leq s \\leq 10^{18}$，$-10^9 \\leq x_i \\leq 10^9$，$0 \\leq p_i < i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Jobs", "background": "翻译自 [BalticOI 2024 Day1 T1](https://boi2024.lmio.lt/tasks/d1-jobs-statement.pdf)。", "description": "目前，你可以选择从 $1$ 到 $N$ 编号的 $N$ 个一次性工作。\n\n完成第 $i$ 个工作将给你带来 $x$ 欧元的利润，当然，利润也可能是负的。\n\n有些工作依赖于另一个工作。也就是说，可能有一个编号为 $p$ 的工作必须在第 $i$ 个工作开始之前完成。因此，一个利润较大的工作如果依赖于一个利润为负的工作，看起来收益可能会比较小。\n\n如果 $p = 0$，则第 $i$ 个工作没有依赖。\n\n你目前有 $s$ 欧元，可以决定做哪些工作以及以什么顺序去做，只要尊重依赖关系。此外，你所拥有的钱数在任何时候都不能变成负数。\n\n请计算通过选择按照某种顺序完成（也可能某些选择不完成）这 $N$ 个工作所能获得的最大利润。", "inputFormat": "第一行包含两个整数 $N$ 和 $s$，分别是工作的数量和你最初拥有的金额。\n\n接下来的 $N$ 行，每行包含两个整数 $x$ 和 $p$，分别是第 $i$ 个工作的利润和它所依赖的前置工作的编号。如果 $p = 0$，则第 $i$ 个工作没有依赖。", "outputFormat": "你的程序应该输出一个整数，即你能够获得的最大利润。", "hint": "分别选择 $1,4,3,5$ 号工作即可，总利润为 $3+2-5+6 = 6$。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $s = 10^{18}$ | $11$ |\n| $2$ | $N \\leq 2000$ 且满足性质 A | $14$ |\n| $3$ | 满足性质 A | $15$ |\n| $4$ | $N \\leq 2000$ | $29$ |\n| $5$ | 无特殊性质 | $31$ |\n\n* 性质 A：每个 $p_i$ 要么是 $0$，要么是 $i-1$。\n\n对于所有的数据，$1 \\leq N \\leq 3 \\times 10^5$，$0 \\leq s \\leq 10^{18}$，$-10^9 \\leq x_i \\leq 10^9$，$0 \\leq p_i < i$。", "locale": "zh-CN"}}}
{"pid": "P10760", "type": "P", "difficulty": 6, "samples": [["3\n1 1\n1 3\n3 2", "4"], ["5\n0 0\n1 0\n-1 0\n0 1\n0 -1", "1"], ["1\n1 -1 ", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2024", "BalticOI（波罗的海）"], "title": "[BalticOI 2024] Portal", "background": "翻译自 [BalticOI 2024 Day1 T2](https://boi2024.lmio.lt/tasks/d1-portal-statement.pdf)。", "description": "你在和你的朋友玩一个恶作剧，朋友初始在 $(0,0)$ 位置，每个格子都有颜色，有 $N$ 个传送门，当你的朋友进入某个传送门之内时，会等概率地随机到 $N$ 个传送门其中之一（可能传送到原本的门，如果 $(0,0)$ 有传送门也要传送）。\n\n可惜的是，你的朋友并不知道有传送门的存在，他只会根据他所走的格子确定他所在的格子与其颜色，你需要保证无论他怎么走，他所看到的格子颜色永远与他认为的格子颜色一样。\n\n你可以随意染色，但是请最大化颜色数量，不难发现涂成一个颜色总是最小的解。", "inputFormat": "第一行一个整数 $N$，表示有 $N$ 个传送门。\n\n接下来 $N$ 行，每行两个整数 $(x_i,y_i)$，表示传送门的坐标。", "outputFormat": "输出一个数表示你最大使用颜色的数量，如果可以使用无数种，输出 $-1$。", "hint": "| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $N \\leq 2$ | $1$ |\n| $2$ | $N \\leq 3$ | $10$ |\n| $3$ | 对于所有存在传送门的 $(x_1,y_1)$ 和 $(x_2,y_2)$，保证 $(x_1,y_2)$ 也存在传送门 | $10$ |\n| $4$ | $N \\leq 100$ 且 $-100 \\leq x_i,y_i \\leq 100$ | $29$ |\n| $5$ | $N \\leq 2000$ | $15$ |\n| $6$ | 无特殊性质 | $35$ |\n\n对于全部数据，$1 \\leq N \\leq 10^5$，$-10^6 \\leq x_i,y_i \\leq 10^6$，且保证 $(x_i,y_i)$ 互不相同。\n\n\n对于样例一，传送门被放置在 $(1,1)$、$(1,3)$ 和 $(3,2)$ 位置，如果你的朋友按照以下顺序移动：上、右、下、左。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cjusbzy8.png)\n\n在移动序列结束后，你的朋友会认为他们回到了起始单元格$(0,0)$，但实际上他们也可能最终停在 $(0,2)$ 或 $(2,1)$。他们已经在开始时看到了 $(0,0)$ 单元格的颜色，所以如果现在他们看到不同的颜色，就会意识到必须有传送门的存在。我们不希望发生这种情况，所以我们必须为这三个单元格选择相同的颜色。\n\n没有任何移动序列能让你的朋友认为他们最终停在 $(0,0)$ 单元格，而实际上他们却停在了 $(1,0)$ ，所以这些单元格可以放心地使用不同的颜色。\n\n你可以看到下面例子中使用了 $4$ 种颜色的着色方案。对于这个例子来说，不可能使用超过 $4$ 种颜色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i123jgsw.png)\n\n对于样例二，让我们考虑一个不同的例子，其中在单元格 $(0,0)$、$(0,1)$、$(1,0)$、$(0,-1)$ 和 $(-1,0)$ 处设有传送门。假设你的朋友试图通过先向右移动一次，然后向上移动三次来到达单元格 $(1,3)$。一种可能是，如果他们在一开始和每一步之后都被传送到那里，那么他们最终会到达单元格 $(0,0)$。如果你的朋友现在通过向下移动三次然后向左移动一次来回到他们认为的 $(0,0)$ 单元格，并且在这个过程中没有被从当前单元格传送走，他们最终会到达 $(-1,-3)$。你的朋友会第二次认为自己处于 $(0, 0)$ 单元格，并期望看到相同的颜色。所以你需要用相同的颜色给 $(-1,-3)$ 和 $(0, 0)$ 着色。\n\n请注意，我们选择单元格 $(1,3)$ 作为起点并没有什么特别之处。你同样可以证明其他单元格必须与 $(0,0)$ 共享同一种颜色。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Portal", "background": "翻译自 [BalticOI 2024 Day1 T2](https://boi2024.lmio.lt/tasks/d1-portal-statement.pdf)。", "description": "你在和你的朋友玩一个恶作剧，朋友初始在 $(0,0)$ 位置，每个格子都有颜色，有 $N$ 个传送门，当你的朋友进入某个传送门之内时，会等概率地随机到 $N$ 个传送门其中之一（可能传送到原本的门，如果 $(0,0)$ 有传送门也要传送）。\n\n可惜的是，你的朋友并不知道有传送门的存在，他只会根据他所走的格子确定他所在的格子与其颜色，你需要保证无论他怎么走，他所看到的格子颜色永远与他认为的格子颜色一样。\n\n你可以随意染色，但是请最大化颜色数量，不难发现涂成一个颜色总是最小的解。", "inputFormat": "第一行一个整数 $N$，表示有 $N$ 个传送门。\n\n接下来 $N$ 行，每行两个整数 $(x_i,y_i)$，表示传送门的坐标。", "outputFormat": "输出一个数表示你最大使用颜色的数量，如果可以使用无数种，输出 $-1$。", "hint": "| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $N \\leq 2$ | $1$ |\n| $2$ | $N \\leq 3$ | $10$ |\n| $3$ | 对于所有存在传送门的 $(x_1,y_1)$ 和 $(x_2,y_2)$，保证 $(x_1,y_2)$ 也存在传送门 | $10$ |\n| $4$ | $N \\leq 100$ 且 $-100 \\leq x_i,y_i \\leq 100$ | $29$ |\n| $5$ | $N \\leq 2000$ | $15$ |\n| $6$ | 无特殊性质 | $35$ |\n\n对于全部数据，$1 \\leq N \\leq 10^5$，$-10^6 \\leq x_i,y_i \\leq 10^6$，且保证 $(x_i,y_i)$ 互不相同。\n\n\n对于样例一，传送门被放置在 $(1,1)$、$(1,3)$ 和 $(3,2)$ 位置，如果你的朋友按照以下顺序移动：上、右、下、左。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cjusbzy8.png)\n\n在移动序列结束后，你的朋友会认为他们回到了起始单元格$(0,0)$，但实际上他们也可能最终停在 $(0,2)$ 或 $(2,1)$。他们已经在开始时看到了 $(0,0)$ 单元格的颜色，所以如果现在他们看到不同的颜色，就会意识到必须有传送门的存在。我们不希望发生这种情况，所以我们必须为这三个单元格选择相同的颜色。\n\n没有任何移动序列能让你的朋友认为他们最终停在 $(0,0)$ 单元格，而实际上他们却停在了 $(1,0)$ ，所以这些单元格可以放心地使用不同的颜色。\n\n你可以看到下面例子中使用了 $4$ 种颜色的着色方案。对于这个例子来说，不可能使用超过 $4$ 种颜色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i123jgsw.png)\n\n对于样例二，让我们考虑一个不同的例子，其中在单元格 $(0,0)$、$(0,1)$、$(1,0)$、$(0,-1)$ 和 $(-1,0)$ 处设有传送门。假设你的朋友试图通过先向右移动一次，然后向上移动三次来到达单元格 $(1,3)$。一种可能是，如果他们在一开始和每一步之后都被传送到那里，那么他们最终会到达单元格 $(0,0)$。如果你的朋友现在通过向下移动三次然后向左移动一次来回到他们认为的 $(0,0)$ 单元格，并且在这个过程中没有被从当前单元格传送走，他们最终会到达 $(-1,-3)$。你的朋友会第二次认为自己处于 $(0, 0)$ 单元格，并期望看到相同的颜色。所以你需要用相同的颜色给 $(-1,-3)$ 和 $(0, 0)$ 着色。\n\n请注意，我们选择单元格 $(1,3)$ 作为起点并没有什么特别之处。你同样可以证明其他单元格必须与 $(0,0)$ 共享同一种颜色。", "locale": "zh-CN"}}}
{"pid": "P10761", "type": "P", "difficulty": 5, "samples": [["5\n1 3\n2 1\n1 3\n0 10\n3 5", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "BalticOI（波罗的海）"], "title": "[BalticOI 2024] Trains", "background": "翻译自 [BalticOI 2024 Day1 T3](https://boi2024.lmio.lt/tasks/d1-trains-statement.pdf)。", "description": "你已经抵达维尔纽斯，并希望参观立陶宛的不同城市。立陶宛的城市位于一条直线上，并按顺序从 $1$ 到 $N$ 编号。维尔纽斯是 $1$ 号城市。每个城市都有一个火车站，并且有一条从该站出发的单轨列车运营路线。你只能在该路线起点的城市上车，但可以在其任何一站下车。从第 $i$ 个城市开始的列车每行驶 $d_i$ 个城市就会停靠一站，并且其路线包含 $x_i$ 个停靠站（不包括起始城市）。如果 $d_i = 0$，则从第 $i$ 个城市出发的列车目前处于停运状态，因此你不能乘坐它们。\n\n更具体地说，如果你在第 $i$ 个城市上车，你可以在任何编号为 $i + t \\cdot d_i$ 的城市下车，其中 $1 \\leq t \\leq x_i$。请注意，由于你只希望参观立陶宛的城市，因此即使列车在其路线上有更多的停靠站，你也不会超过第 $N$ 个城市下车。\n\n你打算使用列车前往参观一些城市。在规划你的旅行时，你开始思考从维尔纽斯出发的旅程有多少种不同的选择。如果两次旅行在不同的城市序列中停靠，则它们被视为不同。输出答案对 $10^9 + 7$ 取模的值。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行每行两个整数 $d_i,x_i$。", "outputFormat": "输出路线数对 $10^9 + 7$ 取模的值。", "hint": "对于样例，存在如下七种路线：\n\n- $1$\n- $1 \\rightarrow  2$\n- $1 \\rightarrow  2 \\rightarrow  4$\n- $1 \\rightarrow  3$\n- $1 \\rightarrow 3 \\rightarrow 4$\n- $1 \\rightarrow 3 \\rightarrow 5$\n- $1 \\rightarrow 4$\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n \\leq 15$ | $8$ |\n| $2$ | $n \\leq 10^4$ | $13$ |\n| $3$ | $d_i = 1$ | $16$ |\n| $4$ | $x_i = 10^9$ | $34$ |\n| $5$ | 无特殊性质 | $29$ |\n\n对于所有数据，保证 $1 \\leq N \\leq 10^5$，$0 \\leq d_i,x_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Trains", "background": "翻译自 [BalticOI 2024 Day1 T3](https://boi2024.lmio.lt/tasks/d1-trains-statement.pdf)。", "description": "你已经抵达维尔纽斯，并希望参观立陶宛的不同城市。立陶宛的城市位于一条直线上，并按顺序从 $1$ 到 $N$ 编号。维尔纽斯是 $1$ 号城市。每个城市都有一个火车站，并且有一条从该站出发的单轨列车运营路线。你只能在该路线起点的城市上车，但可以在其任何一站下车。从第 $i$ 个城市开始的列车每行驶 $d_i$ 个城市就会停靠一站，并且其路线包含 $x_i$ 个停靠站（不包括起始城市）。如果 $d_i = 0$，则从第 $i$ 个城市出发的列车目前处于停运状态，因此你不能乘坐它们。\n\n更具体地说，如果你在第 $i$ 个城市上车，你可以在任何编号为 $i + t \\cdot d_i$ 的城市下车，其中 $1 \\leq t \\leq x_i$。请注意，由于你只希望参观立陶宛的城市，因此即使列车在其路线上有更多的停靠站，你也不会超过第 $N$ 个城市下车。\n\n你打算使用列车前往参观一些城市。在规划你的旅行时，你开始思考从维尔纽斯出发的旅程有多少种不同的选择。如果两次旅行在不同的城市序列中停靠，则它们被视为不同。输出答案对 $10^9 + 7$ 取模的值。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行每行两个整数 $d_i,x_i$。", "outputFormat": "输出路线数对 $10^9 + 7$ 取模的值。", "hint": "对于样例，存在如下七种路线：\n\n- $1$\n- $1 \\rightarrow  2$\n- $1 \\rightarrow  2 \\rightarrow  4$\n- $1 \\rightarrow  3$\n- $1 \\rightarrow 3 \\rightarrow 4$\n- $1 \\rightarrow 3 \\rightarrow 5$\n- $1 \\rightarrow 4$\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $n \\leq 15$ | $8$ |\n| $2$ | $n \\leq 10^4$ | $13$ |\n| $3$ | $d_i = 1$ | $16$ |\n| $4$ | $x_i = 10^9$ | $34$ |\n| $5$ | 无特殊性质 | $29$ |\n\n对于所有数据，保证 $1 \\leq N \\leq 10^5$，$0 \\leq d_i,x_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10762", "type": "P", "difficulty": 5, "samples": [["4 100\n10 30\n30 70\n20 40\n60 20", "3"], ["1 100\n30 40", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "BalticOI（波罗的海）"], "title": "[BalticOI 2024] Fire", "background": "翻译自 [BalticOI 2024 Day2 T1](https://boi2024.lmio.lt/tasks/d2-fire-statement.pdf)。", "description": "我们将一天划分为 $M$ 个时间，同时有 $N$ 个人，每个人愿意工作的时间段为 $[s_i,e_i)$，如果 $s_i > e_i$，说明这个人愿意工作到第二天的 $e_i$ 时间，每个人最多连续工作时间不会超过一整天。\n\n你需要安排一些人工作，使得他们工作时间可以覆盖一整天，请求出这个人数。", "inputFormat": "第一行一个整数 $N,M$。\n\n接下来 $N$ 行，每行一对 $(s_i,e_i)$。", "outputFormat": "输出一个数，表示多少要安排的人数，如果无法安排人数使得一天的时间被覆盖，输出 $-1$。", "hint": "对于第一组样例，选择 $1,2,4$。\n\n对于第二组样例，显然无解。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :-----------: |\n| $1$ | $N \\leq 20$ | $14$ |\n| $2$ | $N \\leq 300$ | $17$ |\n| $3$ | $N \\leq 5000$ | $9$ |\n| $4$ | 保证 $s_i < e_i$ 或 $e_i = 0$ | $13$ |\n| $5$ | 保证每个人工作的时间相同 | $21$ |\n| $6$ | 无特殊性质 | $26$ |\n\n对于所有数据，$1 \\leq N \\leq 2 \\times 10^5$，$2 \\leq M \\leq 10^9$，$0 \\leq s_i,e_i < M$，$s_i \\ne e_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Fire", "background": "翻译自 [BalticOI 2024 Day2 T1](https://boi2024.lmio.lt/tasks/d2-fire-statement.pdf)。", "description": "我们将一天划分为 $M$ 个时间，同时有 $N$ 个人，每个人愿意工作的时间段为 $[s_i,e_i)$，如果 $s_i > e_i$，说明这个人愿意工作到第二天的 $e_i$ 时间，每个人最多连续工作时间不会超过一整天。\n\n你需要安排一些人工作，使得他们工作时间可以覆盖一整天，请求出这个人数。", "inputFormat": "第一行一个整数 $N,M$。\n\n接下来 $N$ 行，每行一对 $(s_i,e_i)$。", "outputFormat": "输出一个数，表示多少要安排的人数，如果无法安排人数使得一天的时间被覆盖，输出 $-1$。", "hint": "对于第一组样例，选择 $1,2,4$。\n\n对于第二组样例，显然无解。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :-----------: |\n| $1$ | $N \\leq 20$ | $14$ |\n| $2$ | $N \\leq 300$ | $17$ |\n| $3$ | $N \\leq 5000$ | $9$ |\n| $4$ | 保证 $s_i < e_i$ 或 $e_i = 0$ | $13$ |\n| $5$ | 保证每个人工作的时间相同 | $21$ |\n| $6$ | 无特殊性质 | $26$ |\n\n对于所有数据，$1 \\leq N \\leq 2 \\times 10^5$，$2 \\leq M \\leq 10^9$，$0 \\leq s_i,e_i < M$，$s_i \\ne e_i$。", "locale": "zh-CN"}}}
{"pid": "P10763", "type": "P", "difficulty": 6, "samples": [["14 6\n0 1\n0 3\n2 3\n2 4\n0 4\n0 6\n3 6\n3 7\n4 7\n6 7\n6 5\n3 5\n3 2\n3 1\n", "2"], ["4 3\n0 0\n0 3\n3 3\n3 0", "0"], ["18 9\n0 2\n2 2\n2 1\n4 1\n4 0\n9 0\n9 2\n4 2\n4 4\n7 4\n7 3\n9 3\n9 6\n4 6\n4 5\n2 5\n2 4\n0 4", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["线段树", "平衡树", "2024", "扫描线", "BalticOI（波罗的海）"], "title": "[BalticOI 2024] Tiles", "background": "翻译自 [BalticOI 2024 Day2 T2](https://boi2024.lmio.lt/tasks/d2-tiles-statement.pdf)。", "description": "有一个存在 $N$ 个顶点的大教堂，顶点坐标依次为 $(x_i,y_i)$，对于每个 $1 \\leq i < N$，存在一条 $i$ 与 $i+1$ 之间的边，此外，还存在一条 $N$ 到 $1$ 的边。\n\n大教堂每条边都与 $x$ 轴或 $y$ 轴平行。此外，大教堂是一个简单多边形，即：\n\n- 每个顶点恰好由两条边相交\n- 任何一对边只能在顶点处相交\n\n你有无数块 $2 \\times 2$ 的瓷砖，你希望用这些瓷砖覆盖大教堂的大部分区域，具体来说，你想选择一条垂直线，并覆盖该线左侧的大教堂部分。对于任何整数 $k$，设 $L_k$ 为包含 $x$ 坐标等于 $k$ 的点的垂直线。对 $L_k$ 左侧大教堂部分的覆盖，是指在平面上放置一定数量的瓷砖，使得：\n\n- 多边形内部且 $x$ 坐标小于 $k$ 的每个点都被某块瓷砖覆盖\n- 多边形外部或 $x$ 坐标大于 $k$ 的点都不被任何瓷砖覆盖\n- 瓷砖的内部不重叠\n\n大教堂中任何顶点的最小 $x$ 坐标为 $0$。我们设 $M$ 为大教堂中任何顶点的最大 $x$ 坐标。\n\n请你求出最大的满足条件的 $k\\ (0 \\leq k \\leq M)$，根据定义，一定存在答案为 $0$。", "inputFormat": "第一行两个整数 $N,M$。\n\n接下来 $N$ 行，每行两个整数 $(x_i,y_i)$。这些顶点按照顺时针或逆时针顺序给出。", "outputFormat": "输出一个答案 $k$。", "hint": "| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $N=4$ | $4$ |\n| $2$ | $N \\leq 6$ | $9$ |\n| $3$ | $x_N=0,y_N=0$，对于 $1 \\leq i \\leq N-2$，$x_i \\leq x_{i+1},y_i \\geq y_{i+1}$ | $11$ |\n| $4$ | $M \\leq 1000$ 且 $y_i \\leq 1000$ | $19$ |\n| $5$ | $y_i$ 都为偶数 | $22$ |\n| $6$ | $x_i$ 都为偶数 | $25$ |\n| $7$ | 无特殊性质 | $10$ |\n\n对于所有数据，$4 \\leq N \\leq 2 \\times 10^5$，$1 \\leq M \\leq 10^9$，$0 \\leq y_i \\leq 10^9$，$\\min(\\{x_i\\}) = 0,\\max(\\{x_i\\}) = M$。\n\n对于样例一，下面是对于 $k=2$ 的覆盖。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q9qi2e3b.png)\n\n可以发现这是最大的情况了。\n\n对于样例二，没有正值 $k$，使得 $L_k$ 左侧的教堂部分可以用瓷砖覆盖。\n\n对于样例三，图示如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6kpbkvbn.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Tiles", "background": "翻译自 [BalticOI 2024 Day2 T2](https://boi2024.lmio.lt/tasks/d2-tiles-statement.pdf)。", "description": "有一个存在 $N$ 个顶点的大教堂，顶点坐标依次为 $(x_i,y_i)$，对于每个 $1 \\leq i < N$，存在一条 $i$ 与 $i+1$ 之间的边，此外，还存在一条 $N$ 到 $1$ 的边。\n\n大教堂每条边都与 $x$ 轴或 $y$ 轴平行。此外，大教堂是一个简单多边形，即：\n\n- 每个顶点恰好由两条边相交\n- 任何一对边只能在顶点处相交\n\n你有无数块 $2 \\times 2$ 的瓷砖，你希望用这些瓷砖覆盖大教堂的大部分区域，具体来说，你想选择一条垂直线，并覆盖该线左侧的大教堂部分。对于任何整数 $k$，设 $L_k$ 为包含 $x$ 坐标等于 $k$ 的点的垂直线。对 $L_k$ 左侧大教堂部分的覆盖，是指在平面上放置一定数量的瓷砖，使得：\n\n- 多边形内部且 $x$ 坐标小于 $k$ 的每个点都被某块瓷砖覆盖\n- 多边形外部或 $x$ 坐标大于 $k$ 的点都不被任何瓷砖覆盖\n- 瓷砖的内部不重叠\n\n大教堂中任何顶点的最小 $x$ 坐标为 $0$。我们设 $M$ 为大教堂中任何顶点的最大 $x$ 坐标。\n\n请你求出最大的满足条件的 $k\\ (0 \\leq k \\leq M)$，根据定义，一定存在答案为 $0$。", "inputFormat": "第一行两个整数 $N,M$。\n\n接下来 $N$ 行，每行两个整数 $(x_i,y_i)$。这些顶点按照顺时针或逆时针顺序给出。", "outputFormat": "输出一个答案 $k$。", "hint": "| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $N=4$ | $4$ |\n| $2$ | $N \\leq 6$ | $9$ |\n| $3$ | $x_N=0,y_N=0$，对于 $1 \\leq i \\leq N-2$，$x_i \\leq x_{i+1},y_i \\geq y_{i+1}$ | $11$ |\n| $4$ | $M \\leq 1000$ 且 $y_i \\leq 1000$ | $19$ |\n| $5$ | $y_i$ 都为偶数 | $22$ |\n| $6$ | $x_i$ 都为偶数 | $25$ |\n| $7$ | 无特殊性质 | $10$ |\n\n对于所有数据，$4 \\leq N \\leq 2 \\times 10^5$，$1 \\leq M \\leq 10^9$，$0 \\leq y_i \\leq 10^9$，$\\min(\\{x_i\\}) = 0,\\max(\\{x_i\\}) = M$。\n\n对于样例一，下面是对于 $k=2$ 的覆盖。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q9qi2e3b.png)\n\n可以发现这是最大的情况了。\n\n对于样例二，没有正值 $k$，使得 $L_k$ 左侧的教堂部分可以用瓷砖覆盖。\n\n对于样例三，图示如下。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6kpbkvbn.png)", "locale": "zh-CN"}}}
{"pid": "P10764", "type": "P", "difficulty": 6, "samples": [["4\n1 1 1 1\n2 2 2 2", "6"], ["10\n1 2 3 4 5 6 7 8 9 10\n10 9 8 7 6 5 4 3 2 1\n", "21116"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "2024", "BalticOI（波罗的海）"], "title": "[BalticOI 2024] Wall", "background": "翻译自 [BalticOI 2024 Day2 T3](https://boi2024.lmio.lt/tasks/d2-wall-statement.pdf)。", "description": "你想要修建一个围墙，它是由 $N$ 个墙组成的，每个墙 $i$ 可能的高度是 $a_i$ 或 $b_i$，对于每个可能的围墙序列 $h$，你想要求出它的积水量之和。\n\n例如下图展示了一个 $N = 10$，围墙高度分别为 $4, 2, 1, 8, 6, 2, 7, 1, 2, 3$ 的例子，它的实际积水高度是 $4, 4, 4, 8, 7, 7, 7, 3, 3, 3$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p18f84ua.png)\n\n对于某个 $i$ 雨后应有的水位 $H$，需要满足存在两个数 $l,r\\ (l \\leq i,r\\geq i)$，有 $h_l \\geq H,h_r \\geq H$，且 $H$ 最大，此时 $i$ 的积水量为 $H-h_i$。\n\n输出所有可能情况的积水量之和对 $10^9 +7$ 取模的值。", "inputFormat": "第一行一个整数 $N$。\n\n第二行 $N$ 个整数 $a_i$。\n\n第三行 $N$ 个整数 $b_i$。", "outputFormat": "输出可能的围墙积水量之和对 $10^9 +7$ 取模的值。", "hint": "对于样例一，$(2,1,1,2)$ 的情况存在 $2$ 的积水量，$(1,2,1,2)$，$(2,1,2,1)$，$(2,1,2,2)$，$(2,2,1,2)$ 分别存在 $1$ 的积水量。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :-----------: |\n| $1$ | $N \\leq 20$ | $8$ |\n| $2$ | $N \\leq 100$ 且 $a_i,b_i \\leq 1000$ | $17$ |\n| $3$ | $N \\leq 10000$ 且 $a_i,b_i \\leq 1000$ | $19$ |\n| $4$ | $N \\leq 10000$ | $14$ |\n| $5$ | $a_i,b_i \\leq 2$ | $12$ |\n| $6$ | 无特殊性质 | $30$ |\n\n\n对于所有数据 $1 \\leq N \\leq5 \\times10^5$，$1 \\leq a_i,b_i \\leq 10^9$ 且对于 每个 $1 \\leq i \\leq n$，有 $a_i \\neq b_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2024] Wall", "background": "翻译自 [BalticOI 2024 Day2 T3](https://boi2024.lmio.lt/tasks/d2-wall-statement.pdf)。", "description": "你想要修建一个围墙，它是由 $N$ 个墙组成的，每个墙 $i$ 可能的高度是 $a_i$ 或 $b_i$，对于每个可能的围墙序列 $h$，你想要求出它的积水量之和。\n\n例如下图展示了一个 $N = 10$，围墙高度分别为 $4, 2, 1, 8, 6, 2, 7, 1, 2, 3$ 的例子，它的实际积水高度是 $4, 4, 4, 8, 7, 7, 7, 3, 3, 3$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p18f84ua.png)\n\n对于某个 $i$ 雨后应有的水位 $H$，需要满足存在两个数 $l,r\\ (l \\leq i,r\\geq i)$，有 $h_l \\geq H,h_r \\geq H$，且 $H$ 最大，此时 $i$ 的积水量为 $H-h_i$。\n\n输出所有可能情况的积水量之和对 $10^9 +7$ 取模的值。", "inputFormat": "第一行一个整数 $N$。\n\n第二行 $N$ 个整数 $a_i$。\n\n第三行 $N$ 个整数 $b_i$。", "outputFormat": "输出可能的围墙积水量之和对 $10^9 +7$ 取模的值。", "hint": "对于样例一，$(2,1,1,2)$ 的情况存在 $2$ 的积水量，$(1,2,1,2)$，$(2,1,2,1)$，$(2,1,2,2)$，$(2,2,1,2)$ 分别存在 $1$ 的积水量。\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :-----------: | :----------- | :-----------: |\n| $1$ | $N \\leq 20$ | $8$ |\n| $2$ | $N \\leq 100$ 且 $a_i,b_i \\leq 1000$ | $17$ |\n| $3$ | $N \\leq 10000$ 且 $a_i,b_i \\leq 1000$ | $19$ |\n| $4$ | $N \\leq 10000$ | $14$ |\n| $5$ | $a_i,b_i \\leq 2$ | $12$ |\n| $6$ | 无特殊性质 | $30$ |\n\n\n对于所有数据 $1 \\leq N \\leq5 \\times10^5$，$1 \\leq a_i,b_i \\leq 10^9$ 且对于 每个 $1 \\leq i \\leq n$，有 $a_i \\neq b_i$。", "locale": "zh-CN"}}}
{"pid": "P10765", "type": "P", "difficulty": 2, "samples": [["4\n5 2\n1 1\n8 3\n2 2 2 \n8 3 \n1 1 1\n8 3\n1 2 1", "4\n1\n8\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「CROI · R2」在相思树下 I", "background": ">年年桃树下\n>\n>常看一个变成俩\n>\n>小小心愿常比划\n>\n>快快实现吧\n>\n>却没看到他也在树下\n>\n>相逢二字纵使隔天涯\n>\n>转角总会遇上他\n>\n>缘分缘分啊                                        ", "description": "**本题采用多组数据测试。**\n\n现在欣欣有一个从 $1$ 到 $n$ 的序列，并想对这个序列进行如下两种操作。\n\n操作一：删去所有的奇数项。\n\n操作二：删去所有的偶数项。\n\n欣欣发现她在进行 $k$ 次操作后，最后只剩下一个数，但她不知道这个数是多少，于是欣欣来找你求助，她会给你她所进行的 $k$ 次操作的种类，希望你告诉她最后的那个数是多少。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n$ 和 $k$，含义如题面所示。\n\n第二行 $k$ 个整数，代表欣欣依次进行的操作种类，其中 $1$ 代表操作一，$2$ 代表操作二。", "outputFormat": "共 $T$ 行，每行一个数代表每组数据对应的答案。", "hint": "**【样例解释】**\n\n对于第一组数据，序列的变化如下：\n\n$\\{1,2,3,4,5\\} \\to \\{2,4\\} \\to \\{4\\}$。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据， $n\\le 5\\times10^5$。\n\n对于 $100\\%$ 的数据，$1\\le T \\le 10$，$1\\le n\\le 10^{18}$。\n\n保证对于所有的数据，操作 $k$ 次后均仅剩下一个数。", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」Under the Peach Tree of Longing I", "background": "> Year after year under the peach tree,  \n> Watching one become two.  \n> Little wishes often gestured,  \n> \"Come true soon, please do!\"  \n> Yet unaware of his presence beneath the same tree.  \n> Though \"meeting\" seems separated by the ends of the earth,  \n> Around the corner, fate brings us together—  \n> Oh, destiny, destiny!", "description": "**This problem uses multiple test cases.**\n\nXinxin has a sequence from $1$ to $n$ and wants to perform the following two operations:\n\n**Operation 1**: Delete all elements at odd positions.  \n**Operation 2**: Delete all elements at even positions.\n\nAfter performing $k$ operations, exactly one number remains. Given the sequence of operations, determine the final remaining number.", "inputFormat": "- The first line contains a positive integer $T$, the number of test cases.  \n- For each test case:  \n  - The first line contains two integers $n$ and $k$.  \n  - The second line contains $k$ integers representing the operations (1 for Operation 1, 2 for Operation 2).\n", "outputFormat": "Output $T$ lines, each containing the answer for the corresponding test case.\n", "hint": "### Explanation\n\n**Sample Explanation:**  \nFor the first test case, the sequence evolves as:  \n$\\{1,2,3,4,5\\} \\to \\{2,4\\} \\to \\{4\\}$.\n\n### Constraints\n\n- For $30\\%$ of the data: $n \\leq 5 \\times 10^5$.  \n- For $100\\%$ of the data:  \n  - $1 \\leq T \\leq 10$,  \n  - $1 \\leq n \\leq 10^{18}$.  \n- It is guaranteed that exactly one number remains after $k$ operations for all test cases.", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」在相思树下 I", "background": ">年年桃树下\n>\n>常看一个变成俩\n>\n>小小心愿常比划\n>\n>快快实现吧\n>\n>却没看到他也在树下\n>\n>相逢二字纵使隔天涯\n>\n>转角总会遇上他\n>\n>缘分缘分啊                                        ", "description": "**本题采用多组数据测试。**\n\n现在欣欣有一个从 $1$ 到 $n$ 的序列，并想对这个序列进行如下两种操作。\n\n操作一：删去所有的奇数项。\n\n操作二：删去所有的偶数项。\n\n欣欣发现她在进行 $k$ 次操作后，最后只剩下一个数，但她不知道这个数是多少，于是欣欣来找你求助，她会给你她所进行的 $k$ 次操作的种类，希望你告诉她最后的那个数是多少。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n$ 和 $k$，含义如题面所示。\n\n第二行 $k$ 个整数，代表欣欣依次进行的操作种类，其中 $1$ 代表操作一，$2$ 代表操作二。", "outputFormat": "共 $T$ 行，每行一个数代表每组数据对应的答案。", "hint": "**【样例解释】**\n\n对于第一组数据，序列的变化如下：\n\n$\\{1,2,3,4,5\\} \\to \\{2,4\\} \\to \\{4\\}$。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据， $n\\le 5\\times10^5$。\n\n对于 $100\\%$ 的数据，$1\\le T \\le 10$，$1\\le n\\le 10^{18}$。\n\n保证对于所有的数据，操作 $k$ 次后均仅剩下一个数。", "locale": "zh-CN"}}}
{"pid": "P10766", "type": "P", "difficulty": 5, "samples": [["3\n00000\n11111\n10101\n01010\n11100101\n11110000 ", "1\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "洛谷月赛"], "title": "「CROI · R2」01-string", "background": "", "description": "给定两个长度为 $n$ 的 $01$ 串 $S,T$，你可以对串 $S$ 执行无限次操作，每次都可以从以下操作中任选一个执行：\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r \\ 01$ 反转。\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r $ 全部改为 $0$。\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r $ 全部改为 $1$。\n\n你需要回答最少使用几次操作才能把 $S$ 变成 $T$。", "inputFormat": "**本题采用多组数据测试。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个 $01$ 串，表示串 $S$。\n\n第二行一个 $01$ 串，表示串 $T$。", "outputFormat": "一共 $T$ 行，第 $i$ 行一个整数，表示第 $i$ 组数据的答案。", "hint": "**【样例解释】**\n\n以下提供样例三组数据的合法方案之一：\n\n对于第一组数据，选取 $l=1,r=5$，将 $S_l\\dots S_r$ 全部变成 $1$。\n\n对于第二组数据，选取 $l=1,r=5$，将 $S_l\\dots S_r \\ 01$ 反转。\n\n对于第三组数据，先选取 $l=4,r=8$，将 $S_l\\dots S_r$ $01$ 反转，再选取 $l=5,r=8$，将 $S_l\\dots S_r$ 全部变成 $0$。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Sub 0（10 points）：$n\\le 5$。\n- Sub 1（10 points）：$n\\le 18$。\n- Sub 2（30 points）：$n\\le 2000$。\n- Sub 3（50 points）：无特殊限制。\n\n对于所有的数据，$1\\le T \\le 10$，$1\\le n\\le 5\\times 10^5$。\n", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」01-string", "background": "", "description": "Given two 01-strings $S$ and $T$ of length $n$, you can perform the following operations on string $S$ infinitely many times. In each operation, you may choose one of the following:\n\n- Select two positive integers $l, r$ $(1 \\le l \\le r \\le n)$ and flip the 01 values of $S_l \\dots S_r$ (i.e., change 0 to 1 and 1 to 0).\n\n- Select two positive integers $l, r$ $(1 \\le l \\le r \\le n)$ and set all characters in $S_l \\dots S_r$ to 0.\n\n- Select two positive integers $l, r$ $(1 \\le l \\le r \\le n)$ and set all characters in $S_l \\dots S_r$ to 1.\n\nYour task is to determine the minimum number of operations required to transform $S$ into $T$.", "inputFormat": "**The problem uses multiple test cases.**\n\nThe first line contains a positive integer $T$, indicating the number of test cases.\n\nFor each test case:\n\n- The first line contains a 01-string representing $S$.\n\n- The second line contains a 01-string representing $T$.", "outputFormat": "Output $T$ lines, where the $i$-th line contains an integer representing the answer for the $i$-th test case.\n", "hint": "**【Sample Explanation】**\n\nBelow is one valid solution for each of the three sample test cases:\n\n- For the first test case, select $l=1, r=5$ and set all characters in $S_l \\dots S_r$ to 1.\n\n- For the second test case, select $l=1, r=5$ and flip the 01 values of $S_l \\dots S_r$.\n\n- For the third test case, first select $l=4, r=8$ and flip the 01 values of $S_l \\dots S_r$, then select $l=5, r=8$ and set all characters in $S_l \\dots S_r$ to 0.\n\n**【Data Range】**\n\n**This problem uses bundled tests.**\n\n- Subtask 0 (10 points): $n \\le 5$.\n- Subtask 1 (10 points): $n \\le 18$.\n- Subtask 2 (30 points): $n \\le 2000$.\n- Subtask 3 (50 points): No additional constraints.\n\nFor all test cases, $1 \\le T \\le 10$ and $1 \\le n \\le 5 \\times 10^5$.", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」01-string", "background": "", "description": "给定两个长度为 $n$ 的 $01$ 串 $S,T$，你可以对串 $S$ 执行无限次操作，每次都可以从以下操作中任选一个执行：\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r \\ 01$ 反转。\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r $ 全部改为 $0$。\n\n- 选择两个正整数 $l,r(1\\le l\\le r\\le n)$，将 $S_l\\dots S_r $ 全部改为 $1$。\n\n你需要回答最少使用几次操作才能把 $S$ 变成 $T$。", "inputFormat": "**本题采用多组数据测试。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个 $01$ 串，表示串 $S$。\n\n第二行一个 $01$ 串，表示串 $T$。", "outputFormat": "一共 $T$ 行，第 $i$ 行一个整数，表示第 $i$ 组数据的答案。", "hint": "**【样例解释】**\n\n以下提供样例三组数据的合法方案之一：\n\n对于第一组数据，选取 $l=1,r=5$，将 $S_l\\dots S_r$ 全部变成 $1$。\n\n对于第二组数据，选取 $l=1,r=5$，将 $S_l\\dots S_r \\ 01$ 反转。\n\n对于第三组数据，先选取 $l=4,r=8$，将 $S_l\\dots S_r$ $01$ 反转，再选取 $l=5,r=8$，将 $S_l\\dots S_r$ 全部变成 $0$。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Sub 0（10 points）：$n\\le 5$。\n- Sub 1（10 points）：$n\\le 18$。\n- Sub 2（30 points）：$n\\le 2000$。\n- Sub 3（50 points）：无特殊限制。\n\n对于所有的数据，$1\\le T \\le 10$，$1\\le n\\le 5\\times 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P10767", "type": "P", "difficulty": 5, "samples": [["3 3\n2\n2 1\n2 1 2 1\n6 2\n7 3\n8 4", "Yes\nYes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "树形 DP", "洛谷月赛"], "title": "「CROI · R2」在相思树下 II", "background": "真的要继续吗？\n\n真的不想放弃吗？\n\n真的有用吗？", "description": "狐妖们在涂山上举办了一场淘汰制比赛，现在已知第 $i$ 名参赛者实力为 $i$，每场比赛都会有两名选手决出胜负，胜者进入下一轮，为了尽量让实力较强和较弱的参赛选手均有获胜的可能，涂山雅雅设计了一种特殊的比赛规则。\n\n具体而言，一共有 $2^n$ 位选手报名参加淘汰赛，每场比赛一定按照两种规则之一进行。\n\n- 规则一：参加比赛的两名选手实力较强者胜出。\n- 规则二：参加比赛的两名选手实力较弱者胜出。\n\n现在涂山雅雅会对你进行 $m$ 次询问，对于一个每场比赛规则确定但选手分布未知的签表，每次询问第 $a$ 名选手能否闯入第 $b$ 轮比赛，若能则输出 `Yes`，否则输出 `No`。特殊地，若某位选手夺得了冠军，则我们称其闯入了第 $n+1$ 轮比赛。\n\n下图展示了一张每场比赛规则确定，但选手分布未知的签表示例。其中，每场比赛下标注 $\\max$ 表示该场比赛按照规则一进行，实力较强者胜出；标注 $\\min$ 表示该场比赛按照规则二进行，实力较弱者胜出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e727l3wf.png)", "inputFormat": "第一行两个整数 $n,m$，含义如题面所示。\n\n接下来 $n$ 行描述签表，其中第 $i$ 行有 $2^{i-1}$ 个整数，代表第 $n-i+1$ 轮中从左往右的每场比赛的比赛规则，其中 $1$ 代表该场比赛按照规则一进行，$2$ 代表该场比赛按照规则二进行。\n\n接下来 $m$ 行每行两个整数 $a,b$，代表一次询问。", "outputFormat": "共 $m$ 行，每行一个字符串 `Yes` 或 `No` 代表每次询问的答案。", "hint": "**【样例解释】**\n\n样例中的签表与题目描述中的图示一致。\n\n若要使第六位选手进入第二轮，或使第七位选手进入第三轮，均可按照如下顺序安排选手位置：$\\{1,2,3,4,7,8,5,6\\}$。具体比赛情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v5sgk5ru.png)\n\n显然不存在一种可能的情况使得第八位选手进入第四轮（即夺得冠军）。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask 0（20 points）：$n \\leq 3$，$m \\leq 20$。\n- Subtask 1（10 points）：对于所有询问，$b \\leq 2$。\n- Subtask 2（10 points）：保证每场比赛的规则均为规则一。\n- Subtask 3（20 points）：保证第 $i$ 轮中的所有比赛比赛规则均相同。\n- Subtask 4（40 points）：无特殊限制。\n\n对于所有数据，$1\\leq a\\leq 2^n$，$1\\leq b\\leq n+1$，$1 \\leq 2^n,m \\leq 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」Under the Peach Tree of Longing II", "background": "> Will you truly continue?  \n> Are you truly unwilling to give up?  \n> Is this truly meaningful?  ", "description": "Fox demons organized a single-elimination tournament on Mount Tu. The $i$-th participant has strength $i$. In each match, two contestants compete, and the winner advances to the next round. To allow both stronger and weaker participants a chance to win, YaYa designed a special set of rules.\n\nSpecifically, there are $2^n$ participants in the tournament. Each match follows one of two predetermined rules:\n\n- **Rule 1**: The stronger participant wins.\n- **Rule 2**: The weaker participant wins.\n\nYaYa will ask you $m$ queries. For a bracket with fixed match rules (but unknown initial participant placement), determine whether the $a$-th participant can advance to the $b$-th round. Output `Yes` if possible, otherwise `No`. Notably, if a participant becomes the champion, they are considered to have advanced to the $(n+1)$-th round.\n\nThe figure below shows an example bracket with fixed match rules but unknown participant placement. Matches marked with $\\max$ follow Rule 1 (stronger wins), while those marked with $\\min$ follow Rule 2 (weaker wins).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e727l3wf.png)", "inputFormat": "The first line contains two integers $n$ and $m$, as described.\n\nThe next $n$ lines describe the bracket rules:\n- The $i$-th line contains $2^{i-1}$ integers representing the rules for matches in the $(n-i+1)$-th round (from left to right). Here, `1` denotes Rule 1, and `2` denotes Rule 2.\n\nThe next $m$ lines each contain two integers $a$ and $b$, representing a query.\n", "outputFormat": "Output $m$ lines, each containing `Yes` or `No` as the answer to the corresponding query.\n", "hint": "**【Sample Explanation】**\n\nThe sample bracket matches the figure in the problem description.\n\nTo allow the 6th participant to reach the second round, or the 7th participant to reach the third round, participants can be arranged as $\\{1,2,3,4,7,8,5,6\\}$. The specific match outcomes are shown below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v5sgk5ru.png)\n\nIt is impossible for the 8th participant to reach the 4th round (i.e., become champion).\n\n**【Data Range】**\n\n**This problem uses bundled tests.**\n\n- Subtask 0 (20 points): $n \\leq 3$, $m \\leq 20$.\n- Subtask 1 (10 points): For all queries, $b \\leq 2$.\n- Subtask 2 (10 points): All matches follow Rule 1.\n- Subtask 3 (20 points): All matches in the same round follow the same rule.\n- Subtask 4 (40 points): No additional constraints.\n\nFor all test cases: $1 \\leq a \\leq 2^n$, $1 \\leq b \\leq n+1$, $1 \\leq 2^n, m \\leq 10^6$.", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」在相思树下 II", "background": "真的要继续吗？\n\n真的不想放弃吗？\n\n真的有用吗？", "description": "狐妖们在涂山上举办了一场淘汰制比赛，现在已知第 $i$ 名参赛者实力为 $i$，每场比赛都会有两名选手决出胜负，胜者进入下一轮，为了尽量让实力较强和较弱的参赛选手均有获胜的可能，涂山雅雅设计了一种特殊的比赛规则。\n\n具体而言，一共有 $2^n$ 位选手报名参加淘汰赛，每场比赛一定按照两种规则之一进行。\n\n- 规则一：参加比赛的两名选手实力较强者胜出。\n- 规则二：参加比赛的两名选手实力较弱者胜出。\n\n现在涂山雅雅会对你进行 $m$ 次询问，对于一个每场比赛规则确定但选手分布未知的签表，每次询问第 $a$ 名选手能否闯入第 $b$ 轮比赛，若能则输出 `Yes`，否则输出 `No`。特殊地，若某位选手夺得了冠军，则我们称其闯入了第 $n+1$ 轮比赛。\n\n下图展示了一张每场比赛规则确定，但选手分布未知的签表示例。其中，每场比赛下标注 $\\max$ 表示该场比赛按照规则一进行，实力较强者胜出；标注 $\\min$ 表示该场比赛按照规则二进行，实力较弱者胜出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e727l3wf.png)", "inputFormat": "第一行两个整数 $n,m$，含义如题面所示。\n\n接下来 $n$ 行描述签表，其中第 $i$ 行有 $2^{i-1}$ 个整数，代表第 $n-i+1$ 轮中从左往右的每场比赛的比赛规则，其中 $1$ 代表该场比赛按照规则一进行，$2$ 代表该场比赛按照规则二进行。\n\n接下来 $m$ 行每行两个整数 $a,b$，代表一次询问。", "outputFormat": "共 $m$ 行，每行一个字符串 `Yes` 或 `No` 代表每次询问的答案。", "hint": "**【样例解释】**\n\n样例中的签表与题目描述中的图示一致。\n\n若要使第六位选手进入第二轮，或使第七位选手进入第三轮，均可按照如下顺序安排选手位置：$\\{1,2,3,4,7,8,5,6\\}$。具体比赛情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v5sgk5ru.png)\n\n显然不存在一种可能的情况使得第八位选手进入第四轮（即夺得冠军）。\n\n**【数据范围】**\n\n**本题采用捆绑测试**。\n\n- Subtask 0（20 points）：$n \\leq 3$，$m \\leq 20$。\n- Subtask 1（10 points）：对于所有询问，$b \\leq 2$。\n- Subtask 2（10 points）：保证每场比赛的规则均为规则一。\n- Subtask 3（20 points）：保证第 $i$ 轮中的所有比赛比赛规则均相同。\n- Subtask 4（40 points）：无特殊限制。\n\n对于所有数据，$1\\leq a\\leq 2^n$，$1\\leq b\\leq n+1$，$1 \\leq 2^n,m \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10768", "type": "P", "difficulty": 5, "samples": [["4 5\n1 2 -2 -3", "-13\n1 2\n1 3\n1 4\n2 3\n2 4"], ["6 5\n1 2 4 5 0 -3", "-36\n1 6\n2 6\n3 6\n4 6\n5 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "二分", "堆", "洛谷原创", "Special Judge", "O2优化", "生成树", "构造", "洛谷月赛"], "title": "「CROI · R2」落月摇情", "background": "\n>昨夜闲潭梦落花，\\\n可怜春半不还家。\\\n>江水流春去欲尽，\\\n江潭落月复西斜。\n>\n>斜月沉沉藏海雾，\\\n碣石潇湘无限路。\\\n>不知乘月几人归，\\\n落月摇情满江树。\n", "description": "小烟是住在月亮上的仙女。为了和人间保持联系，小烟在江边种了一棵树。每当月光透过枝叶洒在江面上，形成特定的图案时，小烟就能与那个人产生心灵感应。为了让形成的图案更加美观，小烟用魔法让树的枝条互相交错成他喜欢的样子。你可以认为这棵树是一个**有 $n$ 个节点、$m$ 条边且无重边、无自环的无向连通图**。\n\n某次小烟出差回到月亮上，发现这棵树上所有的枝条都被破坏了。为了快速恢复和人间的联系，小烟需要施加魔法将 $n$ 个节点重新连接起来。施加魔法生成一条边的代价与这条边对月光投影的影响程度有关。由于小烟忘记了原本树的形态，所以她希望花费最小的代价将这棵树恢复到任意一个可能的原先形态。也就是说，她需要这 $n$ 个节点之间形成一张有 $m$ 条边且无重边、无自环的无向连通图。\n\n考虑到你不是仙女，很难计算每条边对投影的影响程度，善良的小烟给出了一个简单的计算方法：给你每个点的影响程度 $a_i$，则用魔法生成一条边 $(u,v)$ 的代价为 $a_u\\times a_v$。请你帮小烟找到一组花费代价最小的施加魔法的方案。\n\n**形式化地**，给出 $n$ 个点，每个点有点权 $a_i$，你需要构造一张有 $m$ 条边，且无重边、无自环的无向图，使得这 $n$ 个点连通。设边 $(u,v)$ 的权值为 $a_u\\times a_v$，你需要最小化图中所有边的权值和。", "inputFormat": "输入共两行。\n\n第一行两个非负整数 $n,m$。\n\n第二行 $n$ 个由空格隔开的整数 $a_i$。", "outputFormat": "输出 $m+1$ 行。\n\n第一行一个整数 $ans$，表示你构造的图中，所有边的权值和。\n\n接下来的 $m$ 行每行两个正整数 $u,v$，表示你构造的图中存在一条边 $u,v$。你需要保证 $u\\neq v$，且不存在两个无序二元组 $(u,v)$ 相同，且所有输出能表示一张 $n$ 个点的连通图。**如有多解，输出任意一组合法解即可**。", "hint": "**【Special Judge】**\n\n本题采用 Special Judge。只要你输出的图满足无重边、无自环且连通，同时其边权和与你输出的答案一致且输出的答案与标准答案一致，你就可以通过对应的测试点。\n\n需要注意的是，请确保你的输出符合输出格式中的要求，否则你得到的结果可能不确定。\n\n本题开启子任务依赖。你可以得到一个子任务对应的分数，当且仅当你通过了当前子任务，同时你也通过了当前子任务依赖的所有子任务。具体的依赖情况见“数据范围”部分的表格。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq n\\leq 10^6$，$n-1\\leq m\\leq \\min(10^6,\\frac{n(n-1)}{2})$，$0\\leq |a_i|\\leq 10^6$。\n\n本题开启捆绑测试、开启子任务依赖。\n\n|  子任务编号  | $n \\le$ | $m \\le$ | 特殊性质 | 分值 |子任务依赖|\n| :----------: | :-----: | :--------------: | :------------: | :-----: | :-----: |\n|$1$ |$7$ | $21$ | 无 |$10$| 无 |\n| $2$ | $16$ |  $120$ | 无 |$15$| $1$ |\n|  $3$  | $1000$ | $3\\times 10^5$| 无 |$15$|$1,2$|\n| $4$ | $2\\times 10^5$ | $3\\times 10^5$ | 保证 $a_i$ 为非负整数 |$15$|无|\n| $5$ | $2\\times 10^5$ | $3\\times 10^5$ | 保证 $m=n-1$ |$10$|无|\n| $6$ | $2\\times 10^5$ | $3\\times 10^5$ |  无  | $15$|$1,2,3$|\n| $7$ | $10^6$ | $10^6$ |  无  | $20$|$1,2,3,6$|\n\n**【样例解释】**\n\n- 对于样例一，构造出的图如下图所示。边权和为 $2+-2+-4+-3+-6=-13$。该样例的构图方式是唯一的。\n\n   ![](https://cdn.luogu.com.cn/upload/image_hosting/nd1clogk.png)\n\n- 对于样例二，构造出的图如下图所示。边权和为 $-3+-6+-12+-15+0=-36$。该样例还存在其它正确的构图方式，比如你可以把边 $(5,6)$ 改为边 $(5,3)$。\n  \n   ![](https://cdn.luogu.com.cn/upload/image_hosting/6fm944rj.png)", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」Moonlit Emotion", "background": "> He dreamed of flowers falling o'er the pool last night;  \n> Alas! Spring has gone, he can’t homeward go.  \n> The water bearing spring will run away in flight;  \n> The moon over the pool will in the west sink low.    \n> In the mist on the sea the slanting moon will hide.  \n> It's a long way from northern hills to southern streams.  \n> How many can go home by moonlight on the tide?  \n> The setting moon sheds o'er riverside trees but dreams riverside trees.  ", "description": "Xiao Yan, a fairy living on the moon, maintains a magical tree by the river to communicate with the human world. Moonlight forms specific patterns through its branches on the river surface. To restore the tree after damage, Xiao Yan needs to reconnect its nodes with minimal cost. The tree is an **undirected connected graph with $n$ nodes and $m$ edges, without multiple edges or self-loops**.\n\nThe cost to generate an edge $(u,v)$ is calculated as $a_u \\times a_v$, where $a_i$ represents the influence factor of node $i$. Your task is to find a connected graph with $m$ edges that minimizes the total edge cost.\n\n**Formally**: Given $n$ nodes with weights $a_i$, construct a connected undirected graph with $m$ edges (no duplicates/self-loops) such that the sum of all edge weights ($a_u \\times a_v$) is minimized.", "inputFormat": "First line: Two non-negative integers $n$, $m$.  \nSecond line: $n$ space-separated integers $a_i$.", "outputFormat": "Output $m+1$ lines:  \n- First line: Total cost $ans$.  \n- Next $m$ lines: Pairs $u$ $v$ representing edges (unordered, no duplicates).  \nAny valid solution is accepted if conditions are met.", "hint": "**【Special Judge】**  \nYour output will be accepted if:  \n- The graph is connected with no duplicate/self-loop edges.  \n- The total cost matches the claimed $ans$ (which must equal the standard answer).\n\n**【Data Range】**  \nConstraints:  \n- $1 \\leq n \\leq 10^6$  \n- $n-1 \\leq m \\leq \\min(10^6, \\frac{n(n-1)}{2})$  \n- $|a_i| \\leq 10^6$\n\n**Subtasks (with dependencies):**  \n| Subtask | $n \\leq$ | $m \\leq$ | Special Conditions | Points | Dependencies |\n|---------|----------|----------|--------------------|--------|--------------|\n| 1       | 7        | 21       | None               | 10     | None         |\n| 2       | 16       | 120      | None               | 15     | 1            |\n| 3       | 1000     | 3e5      | None               | 15     | 1,2          |\n| 4       | 2e5      | 3e5      | $a_i \\geq 0$       | 15     | None         |\n| 5       | 2e5      | 3e5      | $m = n-1$          | 10     | None         |\n| 6       | 2e5      | 3e5      | None               | 15     | 1,2,3        |\n| 7       | 1e6      | 1e6      | None               | 20     | 1,2,3,6      |\n\n**【Sample Explanations】**  \n- **Sample 1**: Unique solution with total cost $-13$.  \n  ![](https://cdn.luogu.com.cn/upload/image_hosting/nd1clogk.png)  \n- **Sample 2**: Multiple valid solutions (e.g., edge $(5,6)$ can be replaced with $(5,3)$).  \n  ![](https://cdn.luogu.com.cn/upload/image_hosting/6fm944rj.png)", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」落月摇情", "background": "\n>昨夜闲潭梦落花，\\\n可怜春半不还家。\\\n>江水流春去欲尽，\\\n江潭落月复西斜。\n>\n>斜月沉沉藏海雾，\\\n碣石潇湘无限路。\\\n>不知乘月几人归，\\\n落月摇情满江树。\n", "description": "小烟是住在月亮上的仙女。为了和人间保持联系，小烟在江边种了一棵树。每当月光透过枝叶洒在江面上，形成特定的图案时，小烟就能与那个人产生心灵感应。为了让形成的图案更加美观，小烟用魔法让树的枝条互相交错成他喜欢的样子。你可以认为这棵树是一个**有 $n$ 个节点、$m$ 条边且无重边、无自环的无向连通图**。\n\n某次小烟出差回到月亮上，发现这棵树上所有的枝条都被破坏了。为了快速恢复和人间的联系，小烟需要施加魔法将 $n$ 个节点重新连接起来。施加魔法生成一条边的代价与这条边对月光投影的影响程度有关。由于小烟忘记了原本树的形态，所以她希望花费最小的代价将这棵树恢复到任意一个可能的原先形态。也就是说，她需要这 $n$ 个节点之间形成一张有 $m$ 条边且无重边、无自环的无向连通图。\n\n考虑到你不是仙女，很难计算每条边对投影的影响程度，善良的小烟给出了一个简单的计算方法：给你每个点的影响程度 $a_i$，则用魔法生成一条边 $(u,v)$ 的代价为 $a_u\\times a_v$。请你帮小烟找到一组花费代价最小的施加魔法的方案。\n\n**形式化地**，给出 $n$ 个点，每个点有点权 $a_i$，你需要构造一张有 $m$ 条边，且无重边、无自环的无向图，使得这 $n$ 个点连通。设边 $(u,v)$ 的权值为 $a_u\\times a_v$，你需要最小化图中所有边的权值和。", "inputFormat": "输入共两行。\n\n第一行两个非负整数 $n,m$。\n\n第二行 $n$ 个由空格隔开的整数 $a_i$。", "outputFormat": "输出 $m+1$ 行。\n\n第一行一个整数 $ans$，表示你构造的图中，所有边的权值和。\n\n接下来的 $m$ 行每行两个正整数 $u,v$，表示你构造的图中存在一条边 $u,v$。你需要保证 $u\\neq v$，且不存在两个无序二元组 $(u,v)$ 相同，且所有输出能表示一张 $n$ 个点的连通图。**如有多解，输出任意一组合法解即可**。", "hint": "**【Special Judge】**\n\n本题采用 Special Judge。只要你输出的图满足无重边、无自环且连通，同时其边权和与你输出的答案一致且输出的答案与标准答案一致，你就可以通过对应的测试点。\n\n需要注意的是，请确保你的输出符合输出格式中的要求，否则你得到的结果可能不确定。\n\n本题开启子任务依赖。你可以得到一个子任务对应的分数，当且仅当你通过了当前子任务，同时你也通过了当前子任务依赖的所有子任务。具体的依赖情况见“数据范围”部分的表格。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq n\\leq 10^6$，$n-1\\leq m\\leq \\min(10^6,\\frac{n(n-1)}{2})$，$0\\leq |a_i|\\leq 10^6$。\n\n本题开启捆绑测试、开启子任务依赖。\n\n|  子任务编号  | $n \\le$ | $m \\le$ | 特殊性质 | 分值 |子任务依赖|\n| :----------: | :-----: | :--------------: | :------------: | :-----: | :-----: |\n|$1$ |$7$ | $21$ | 无 |$10$| 无 |\n| $2$ | $16$ |  $120$ | 无 |$15$| $1$ |\n|  $3$  | $1000$ | $3\\times 10^5$| 无 |$15$|$1,2$|\n| $4$ | $2\\times 10^5$ | $3\\times 10^5$ | 保证 $a_i$ 为非负整数 |$15$|无|\n| $5$ | $2\\times 10^5$ | $3\\times 10^5$ | 保证 $m=n-1$ |$10$|无|\n| $6$ | $2\\times 10^5$ | $3\\times 10^5$ |  无  | $15$|$1,2,3$|\n| $7$ | $10^6$ | $10^6$ |  无  | $20$|$1,2,3,6$|\n\n**【样例解释】**\n\n- 对于样例一，构造出的图如下图所示。边权和为 $2+-2+-4+-3+-6=-13$。该样例的构图方式是唯一的。\n\n   ![](https://cdn.luogu.com.cn/upload/image_hosting/nd1clogk.png)\n\n- 对于样例二，构造出的图如下图所示。边权和为 $-3+-6+-12+-15+0=-36$。该样例还存在其它正确的构图方式，比如你可以把边 $(5,6)$ 改为边 $(5,3)$。\n  \n   ![](https://cdn.luogu.com.cn/upload/image_hosting/6fm944rj.png)", "locale": "zh-CN"}}}
{"pid": "P10769", "type": "P", "difficulty": 7, "samples": [["3\n3 4\n6 2 1\n2\n1 3 7\n2\n1 2\n2 3 5\n3\n1 2 4\n", "12 0\n36 4 0"], ["6\n2 2 2 2 3\n13 12 15 9 3 1\n3\n5 7 9 11 12 13\n4\n1 2 4 8\n3 4 5 7 8 10\n3\n2 4 5\n1000000 1000001 1000002 1000003 1000004 1000005\n2\n1 3\n", "52 6 0 0\n49 3 0\n208 31"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "洛谷原创", "O2优化", "分治", "四边形不等式", "洛谷月赛"], "title": "「CROI · R2」公交接驳", "background": "H 市是一座特大城市，每天来往于城市各个角落的乘客络绎不绝。该市郊区建筑分散，为方便周边群众出行，该市沿平行于主要公路的方向修建了市郊铁路，与公路上的公交系统形成互补格局。同一方向上的铁路站点与公交站点不完全一致，但设有若干个换乘站，铁路列车与公交车均停靠换乘站。现目前，市郊铁路仅在早高峰、晚高峰时各单向发一趟列车。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qipfpx31.png)\n\n上图是沿早高峰方向的市郊铁路和公交车的停靠站点示意图。用蓝色箭头连接的为换乘站，市郊铁路的乘客可以在这些车站换乘公交车。\n\n在下面的问题中，我们忽略非换乘站的存在，仅考虑换乘站在运营过程中的影响。", "description": "由于城市人口增多，H 市市郊铁路通勤压力增大，为了应对短时大客流，公交集团决定于早高峰时期在某条公交线路上安排若干班次的公交车，其运行方向与早高峰时期列车的开行方向相同，均为自西向东运行，便于乘坐火车的乘客换乘公交到达目的地。\n\n给出一条共有 $n$ 个换乘站的街道，由西向东地将每个换乘站编号为 $1\\sim n$。每一个换乘站的调度室对行驶效率的重视程度有所不同，第 $i$ 个换乘站的重视程度为 $v_i$。不同公交车在同一区间内的行驶时间相同，从第 $i$ 个换乘站行驶至第 $i+1$ 个换乘站的**时间**均为 $s_i$，可以忽略车辆停站的时间。市郊铁路列车到达第 $i$ 个换乘站的**时刻**为 $t_i$。保证两个换乘站之间乘坐公交车花费的时间一定不小于乘坐市郊铁路花费的时间。\n\n现在你需要在这条公交线路上安排 $k$ 班公交车。全部的 $n$ 个换乘站都会有乘客从铁路下车。对于每一班车，你都需要安排其发车的时刻和发车的换乘站，且需要保证从任意一个换乘站下车的乘客均能坐上公交车，即最晚到达换乘站 $i$ 的公交车的到达时刻必须不小于 $t_i$。每班公交车发车后，都会以既定速度向东行驶至第 $n$ 个换乘站，并在途中的每个车站停靠并接上所有等候的乘客。你可以任意指定每条公交线路的始发站和发车时刻。\n\n乘客们会登上他们到达车站后，首辆到达该站的公交车。定义换乘站 $i$ 的不满意度为在该站点处，于 $t_i$ 时刻从铁路下车的乘客等待首辆到达该站的公交车所花费的时间与乘客登上的公交车的始发站的重视程度的乘积。如果存在多班公交车同时到站，我们认为乘客登上的是始发站重视程度最小的一班。你需要最小化所有 $n$ 个换乘站的不满意度之和。\n\n铁路时刻表和可供公交公司使用的空闲公交车数量总是在变化，所以你需要处理多组 $t_i$ 和 $k$ 不同的询问。", "inputFormat": "第一行包含一个正整数 $n$，表示换乘站的数量。\n\n第二行包含 $n-1$ 个用空格隔开的非负整数 $s_1,s_2,...,s_{n-1}$。\n\n第三行包含 $n$ 个用空格隔开的非负整数 $v_i$。\n\n第四行包含一个正整数 $p$，表示不同市郊铁路时刻表的数量。\n\n接下来共有 $p$ 组数据，每组数据包含三行。\n\n每组第一行包含 $n$ 个用空格隔开的正整数 $t_1,t_2,\\cdots,t_n$。\n\n每组第二行包含一个正整数 $q_i$ ，表示在当前时刻表下询问的 $k$ 的数量。\n\n每组第三行包含 $q_i$ 个用空格隔开的正整数 $k_1,k_2,\\cdots,k_q$，表示询问的不同的 $k$。", "outputFormat": "输出 $p$ 行，每行 $q_i$ 个用空格隔开的正整数，表示在当前询问的 $k$ 的情况下，所有换乘站不满意度之和的最小值。", "hint": "**【数据范围】**\n\n对于所有测试点，保证 $1\\leq n\\leq 1000$，$1\\leq p\\leq 10$，$s_i\\geq t_{i+1}-t_i\\geq 0$，$1\\leq q_i,k_i\\leq 10^6$，$0\\leq v_i,\\sum s_i\\leq 10^6$，$1\\leq t_i\\leq 2\\times 10^6$。\n\n本题采用捆绑测试。\n\n| 子任务 |  $n≤$  |  $q≤$  | $k_i≤$ | $∑s_i≤$ | 特殊性质 | 分值 |\n| :----: | :----: | :----: | :----: | :-----: | :------: | :--: |\n|  $1$   |  $15$  | $1000$ | $1000$ |  $15$   |    无    | $5$  |\n|  $2$   |  $15$  | $10^6$ | $10^6$ | $10^6$  |    无    | $5$  |\n|  $3$   | $100$  | $10^6$ | $10^6$ | $10^6$  |    无    | $15$ |\n|  $4$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |   $A$    | $5$  |\n|  $5$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |   $B$    | $30$ |\n|  $6$   | $1000$ | $1000$ | $1100$ | $1000$  |    无    | $10$ |\n|  $7$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |    无    | $30$ |\n\n特殊性质 $A$：对于所有输入，保证 $s_i=t_{i+1}-t_i$。\n\n特殊性质 $B$：保证 $v_i=1$。\n\n**【样例解释】**\n\n下面对于样例一的各询问给出一组可行的最优发车方案。注意可以使得答案最优的方案可能是不唯一的。\n\n对于样例一的第一组时刻表：\n- 当 $k=1$ 时，我们于时刻 $1$ 在站点 $1$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $1$    |   $3$    |   $7$    |\n  | 公交班次 $1$ 到站时刻 |   $1$    |   $4$    |   $8$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $1$ | 班次 $1$ |\n  |   乘客等待时间     |   $0$    |   $1$    |   $1$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$。故最终答案为 $6\\times 0+6\\times 1+6\\times 1=12$。\n  \n- 当 $k=2$ 时，我们于时刻 $1$ 在站点 $1$ 发车，于时刻 $3$ 在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $1$    |   $3$    |   $7$    |\n  | 公交班次 $1$ 到站时刻 |   $1$    |   $4$    |   $8$    |\n  | 公交班次 $2$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次    | 班次 $1$ | 班次 $2$ | 班次 $2$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $0$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$；班次 $2$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 0=0$。\n  \n\n对于样例一的第二组时刻表：\n- 当 $k=1$ 时，我们于时刻 $2$ 在站点 $1$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $1$ | 班次 $1$ |\n  |   乘客等待时间    |   $0$    |   $2$    |   $4$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$。故最终答案为 $6\\times 0+6\\times 2+6\\times 4=36$。\n- 当 $k=2$ 时，我们于时刻 $2$ 在站点 $1$ 发车，于时刻 $3$ 在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  | 公交班次 $2$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $2$ | 班次 $2$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $2$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$；班次 $2$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 2=4$。\n  \n- 当 $k=4$ 时，我们分别于时刻 $-2$ 和时刻 $2$ 在站点 $1$ 发车，于时刻 $1$ 和时刻 $3$ 分别在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $-2$   |   $1$    |   $5$    |\n  | 公交班次 $2$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  | 公交班次 $3$ 到站时刻 |    /     |   $1$    |   $5$    |\n  | 公交班次 $4$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次     | 班次 $2$ | 班次 $4$ | 班次 $3$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $0$    |\n  \n  班次 $1$ 和 $2$ 的起点站为车站 $1$，$v_1=6$；班次 $3$ 和 $4$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 0=0$。\n  \n  值得注意的是，对于车站 $3$，班次 $1$ 和班次 $3$ 同时最早到达，但由于班次 $1$ 对应的重视程度 $v_1=6$，班次 $3$ 对应的重视程度为 $v_2=2$，因此乘客登上的是班次 $3$。", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」Bus Shuttle", "background": "City H is a metropolis with heavy passenger traffic. To facilitate suburban travel, the city built a suburban railway parallel to the main highway. There are several transfer stations where both trains and buses stop. Currently, the railway operates one-way trains only during morning and evening rush hours.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qipfpx31.png)\n\nThe figure shows transfer stations (blue arrows) where railway passengers can switch to buses. We focus only on transfer stations in this problem.", "description": "To handle peak-hour crowds, the bus company will deploy $k$ buses along a route with $n$ transfer stations (numbered 1 to $n$ west-to-east). Each transfer station $i$ has a priority value $v_i$. The travel time from station $i$ to $i+1$ is $s_i$ (ignoring stop time). The railway arrives at station $i$ at time $t_i$. Bus travel time between stations is always ≥ railway travel time.\n\nYou must schedule $k$ buses such that:\n1. All passengers arriving at any station $i$ at $t_i$ can board a bus (bus arrival time ≥ $t_i$).\n2. For each station $i$, the **dissatisfaction** is calculated as:  \n   (waiting time for the first bus) × (priority $v_j$ of the bus's origin station).  \n   If multiple buses arrive simultaneously, passengers choose the one with the smallest $v_j$.\n\nMinimize the total dissatisfaction across all stations for multiple queries with different $t_i$ and $k$.", "inputFormat": "First line: Integer $n$ (number of stations).  \nSecond line: $n-1$ integers $s_1,...,s_{n-1}$ (travel times).  \nThird line: $n$ integers $v_1,...,v_n$ (priorities).  \nFourth line: Integer $p$ (number of railway schedules).  \n\nFor each schedule:  \n- Line 1: $n$ integers $t_1,...,t_n$ (railway arrival times).  \n- Line 2: Integer $q_i$ (number of queries).  \n- Line 3: $q_i$ integers $k_1,...,k_{q_i}$ (bus counts to test).", "outputFormat": "For each schedule, output $q_i$ integers—the minimal total dissatisfaction for each $k$.", "hint": "**【Data Range】**  \nConstraints:  \n- $1 \\leq n \\leq 1000$, $1 \\leq p \\leq 10$  \n- $s_i \\geq t_{i+1} - t_i \\geq 0$  \n- $1 \\leq q_i, k_i \\leq 10^6$, $0 \\leq v_i, \\sum s_i \\leq 10^6$, $1 \\leq t_i \\leq 2 \\times 10^6$\n\n**Subtasks:**  \n| Subtask | $n$ | $q$ | $k_i$ | $\\sum s_i$ | Special | Points |\n|---------|-----|-----|-------|------------|---------|--------|\n| 1       | 15  | 1e3 | 1e3   | 15         | None    | 5      |\n| 2       | 15  | 1e6 | 1e6   | 1e6        | None    | 5      |\n| 3       | 100 | 1e6 | 1e6   | 1e6        | None    | 15     |\n| 4       | 1e3 | 1e6 | 1e6   | 1e6        | A       | 5      |\n| 5       | 1e3 | 1e6 | 1e6   | 1e6        | B       | 30     |\n| 6       | 1e3 | 1e3 | 1.1e3 | 1e3        | None    | 10     |\n| 7       | 1e3 | 1e6 | 1e6   | 1e6        | None    | 30     |\n\n- **Special A**: $s_i = t_{i+1} - t_i$  \n- **Special B**: $v_i = 1$\n\n**【Sample Explanation】**  \nBelow are feasible optimal bus scheduling plans for the sample queries. Note that there may be multiple valid optimal solutions.\n\n**For the first schedule in Sample 1:**  \n- **When $ k=1 $:**  \n  A bus departs station 1 at time $ 1 $. Operational details:  \n  |                       | Station 1 | Station 2 | Station 3 |  \n  | :-------------------: | :-------: | :-------: | :-------: |  \n  | Railway Arrival Time   |   $ 1 $ |   $ 3 $ |   $ 7 $ |  \n  | Bus Service 1 Arrival  |   $ 1 $ |   $ 4 $ |   $ 8 $ |  \n  | Boarded Service        | Service 1 | Service 1 | Service 1 |  \n  | Waiting Time           |   $ 0 $ |   $ 1 $ |   $ 1 $ |  \n\n  Service 1 starts at station 1 ($ v_1=6 $). Total dissatisfaction:  \n  $$\n  6 \\times 0 + 6 \\times 1 + 6 \\times 1 = 12\n  $$\n\n- **When $ k=2 $:**  \n  Buses depart station 1 at $ t=1 $ and station 2 at $ t=3 $. Operational details:  \n  |                       | Station 1 | Station 2 | Station 3 |  \n  | :-------------------: | :-------: | :-------: | :-------: |  \n  | Railway Arrival Time   |   $ 1 $ |   $ 3 $ |   $ 7 $ |  \n  | Bus Service 1 Arrival  |   $ 1 $ |   $ 4 $ |   $ 8 $ |  \n  | Bus Service 2 Arrival  |    —      |   $ 3 $ |   $ 7 $ |  \n  | Boarded Service        | Service 1 | Service 2 | Service 2 |  \n  | Waiting Time           |   $ 0 $ |   $ 0 $ |   $ 0 $ |  \n\n  Service 1 starts at station 1 ($ v_1=6 $), Service 2 at station 2 ($ v_2=2 $). Total dissatisfaction:  \n  $$\n  6 \\times 0 + 2 \\times 0 + 2 \\times 0 = 0\n  $$\n\n**For the second schedule in Sample 1:**  \n- **When $ k=1 $:**  \n  A bus departs station 1 at $ t=2 $. Operational details:  \n  |                       | Station 1 | Station 2 | Station 3 |  \n  | :-------------------: | :-------: | :-------: | :-------: |  \n  | Railway Arrival Time   |   $ 2 $ |   $ 3 $ |   $ 5 $ |  \n  | Bus Service 1 Arrival  |   $ 2 $ |   $ 5 $ |   $ 9 $ |  \n  | Boarded Service        | Service 1 | Service 1 | Service 1 |  \n  | Waiting Time           |   $ 0 $ |   $ 2 $ |   $ 4 $ |  \n\n  Total dissatisfaction:  \n  $$\n  6 \\times 0 + 6 \\times 2 + 6 \\times 4 = 36\n  $$\n\n- **When $ k=2 $:**  \n  Buses depart station 1 at $ t=2 $ and station 2 at $ t=3 $. Operational details:  \n  |                       | Station 1 | Station 2 | Station 3 |  \n  | :-------------------: | :-------: | :-------: | :-------: |  \n  | Railway Arrival Time   |   $ 2 $ |   $ 3 $ |   $ 5 $ |  \n  | Bus Service 1 Arrival  |   $ 2 $ |   $ 5 $ |   $ 9 $ |  \n  | Bus Service 2 Arrival  |    —      |   $ 3 $ |   $ 7 $ |  \n  | Boarded Service        | Service 1 | Service 2 | Service 2 |  \n  | Waiting Time           |   $ 0 $ |   $ 0 $ |   $ 2 $ |  \n\n  Total dissatisfaction:  \n  $$\n  6 \\times 0 + 2 \\times 0 + 2 \\times 2 = 4\n  $$\n\n- **When $ k=4 $:**  \n  Buses depart:  \n  - Station 1 at $ t=-2 $ and $ t=2 $.  \n  - Station 2 at $ t=1 $ and $ t=3 $.  \n  Operational details:\n\n  |                       | Station 1 | Station 2 | Station 3 |  \n  | :-------------------: | :-------: | :-------: | :-------: |  \n  | Railway Arrival Time   |   $ 2 $ |   $ 3 $ |   $ 5 $ |  \n  | Bus Service 1 Arrival  |  $-2$   |   $ 1 $ |   $ 5 $ |  \n  | Bus Service 2 Arrival  |   $ 2 $ |   $ 5 $ |   $ 9 $ |  \n  | Bus Service 3 Arrival  |    -      |   $ 1 $ |   $ 5 $ |  \n  | Bus Service 4 Arrival  |    -      |   $ 3 $ |   $ 7 $ |  \n  | Boarded Service        | Service 2 | Service 4 | Service 3 |  \n  | Waiting Time           |   $ 0 $ |   $ 0 $ |   $ 0 $ |  \n\n  Services 1/2 start at station 1 ($ v_1=6 $), Services 3/4 at station 2 ($ v_2=2 $). Total dissatisfaction:  \n  $$\n  6 \\times 0 + 2 \\times 0 + 2 \\times 0 = 0\n  $$  \n  **Note:** At Station 3, Services 1 and 3 arrive simultaneously at $ t=5 $. Passengers choose Service 3 (lower $ v_j=2 $) over Service 1 ($ v_j=6 $).", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」公交接驳", "background": "H 市是一座特大城市，每天来往于城市各个角落的乘客络绎不绝。该市郊区建筑分散，为方便周边群众出行，该市沿平行于主要公路的方向修建了市郊铁路，与公路上的公交系统形成互补格局。同一方向上的铁路站点与公交站点不完全一致，但设有若干个换乘站，铁路列车与公交车均停靠换乘站。现目前，市郊铁路仅在早高峰、晚高峰时各单向发一趟列车。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qipfpx31.png)\n\n上图是沿早高峰方向的市郊铁路和公交车的停靠站点示意图。用蓝色箭头连接的为换乘站，市郊铁路的乘客可以在这些车站换乘公交车。\n\n在下面的问题中，我们忽略非换乘站的存在，仅考虑换乘站在运营过程中的影响。", "description": "由于城市人口增多，H 市市郊铁路通勤压力增大，为了应对短时大客流，公交集团决定于早高峰时期在某条公交线路上安排若干班次的公交车，其运行方向与早高峰时期列车的开行方向相同，均为自西向东运行，便于乘坐火车的乘客换乘公交到达目的地。\n\n给出一条共有 $n$ 个换乘站的街道，由西向东地将每个换乘站编号为 $1\\sim n$。每一个换乘站的调度室对行驶效率的重视程度有所不同，第 $i$ 个换乘站的重视程度为 $v_i$。不同公交车在同一区间内的行驶时间相同，从第 $i$ 个换乘站行驶至第 $i+1$ 个换乘站的**时间**均为 $s_i$，可以忽略车辆停站的时间。市郊铁路列车到达第 $i$ 个换乘站的**时刻**为 $t_i$。保证两个换乘站之间乘坐公交车花费的时间一定不小于乘坐市郊铁路花费的时间。\n\n现在你需要在这条公交线路上安排 $k$ 班公交车。全部的 $n$ 个换乘站都会有乘客从铁路下车。对于每一班车，你都需要安排其发车的时刻和发车的换乘站，且需要保证从任意一个换乘站下车的乘客均能坐上公交车，即最晚到达换乘站 $i$ 的公交车的到达时刻必须不小于 $t_i$。每班公交车发车后，都会以既定速度向东行驶至第 $n$ 个换乘站，并在途中的每个车站停靠并接上所有等候的乘客。你可以任意指定每条公交线路的始发站和发车时刻。\n\n乘客们会登上他们到达车站后，首辆到达该站的公交车。定义换乘站 $i$ 的不满意度为在该站点处，于 $t_i$ 时刻从铁路下车的乘客等待首辆到达该站的公交车所花费的时间与乘客登上的公交车的始发站的重视程度的乘积。如果存在多班公交车同时到站，我们认为乘客登上的是始发站重视程度最小的一班。你需要最小化所有 $n$ 个换乘站的不满意度之和。\n\n铁路时刻表和可供公交公司使用的空闲公交车数量总是在变化，所以你需要处理多组 $t_i$ 和 $k$ 不同的询问。", "inputFormat": "第一行包含一个正整数 $n$，表示换乘站的数量。\n\n第二行包含 $n-1$ 个用空格隔开的非负整数 $s_1,s_2,...,s_{n-1}$。\n\n第三行包含 $n$ 个用空格隔开的非负整数 $v_i$。\n\n第四行包含一个正整数 $p$，表示不同市郊铁路时刻表的数量。\n\n接下来共有 $p$ 组数据，每组数据包含三行。\n\n每组第一行包含 $n$ 个用空格隔开的正整数 $t_1,t_2,\\cdots,t_n$。\n\n每组第二行包含一个正整数 $q_i$ ，表示在当前时刻表下询问的 $k$ 的数量。\n\n每组第三行包含 $q_i$ 个用空格隔开的正整数 $k_1,k_2,\\cdots,k_q$，表示询问的不同的 $k$。", "outputFormat": "输出 $p$ 行，每行 $q_i$ 个用空格隔开的正整数，表示在当前询问的 $k$ 的情况下，所有换乘站不满意度之和的最小值。", "hint": "**【数据范围】**\n\n对于所有测试点，保证 $1\\leq n\\leq 1000$，$1\\leq p\\leq 10$，$s_i\\geq t_{i+1}-t_i\\geq 0$，$1\\leq q_i,k_i\\leq 10^6$，$0\\leq v_i,\\sum s_i\\leq 10^6$，$1\\leq t_i\\leq 2\\times 10^6$。\n\n本题采用捆绑测试。\n\n| 子任务 |  $n≤$  |  $q≤$  | $k_i≤$ | $∑s_i≤$ | 特殊性质 | 分值 |\n| :----: | :----: | :----: | :----: | :-----: | :------: | :--: |\n|  $1$   |  $15$  | $1000$ | $1000$ |  $15$   |    无    | $5$  |\n|  $2$   |  $15$  | $10^6$ | $10^6$ | $10^6$  |    无    | $5$  |\n|  $3$   | $100$  | $10^6$ | $10^6$ | $10^6$  |    无    | $15$ |\n|  $4$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |   $A$    | $5$  |\n|  $5$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |   $B$    | $30$ |\n|  $6$   | $1000$ | $1000$ | $1100$ | $1000$  |    无    | $10$ |\n|  $7$   | $1000$ | $10^6$ | $10^6$ | $10^6$  |    无    | $30$ |\n\n特殊性质 $A$：对于所有输入，保证 $s_i=t_{i+1}-t_i$。\n\n特殊性质 $B$：保证 $v_i=1$。\n\n**【样例解释】**\n\n下面对于样例一的各询问给出一组可行的最优发车方案。注意可以使得答案最优的方案可能是不唯一的。\n\n对于样例一的第一组时刻表：\n- 当 $k=1$ 时，我们于时刻 $1$ 在站点 $1$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $1$    |   $3$    |   $7$    |\n  | 公交班次 $1$ 到站时刻 |   $1$    |   $4$    |   $8$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $1$ | 班次 $1$ |\n  |   乘客等待时间     |   $0$    |   $1$    |   $1$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$。故最终答案为 $6\\times 0+6\\times 1+6\\times 1=12$。\n  \n- 当 $k=2$ 时，我们于时刻 $1$ 在站点 $1$ 发车，于时刻 $3$ 在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $1$    |   $3$    |   $7$    |\n  | 公交班次 $1$ 到站时刻 |   $1$    |   $4$    |   $8$    |\n  | 公交班次 $2$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次    | 班次 $1$ | 班次 $2$ | 班次 $2$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $0$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$；班次 $2$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 0=0$。\n  \n\n对于样例一的第二组时刻表：\n- 当 $k=1$ 时，我们于时刻 $2$ 在站点 $1$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $1$ | 班次 $1$ |\n  |   乘客等待时间    |   $0$    |   $2$    |   $4$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$。故最终答案为 $6\\times 0+6\\times 2+6\\times 4=36$。\n- 当 $k=2$ 时，我们于时刻 $2$ 在站点 $1$ 发车，于时刻 $3$ 在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  | 公交班次 $2$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次     | 班次 $1$ | 班次 $2$ | 班次 $2$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $2$    |\n  \n  班次 $1$ 的起点站为车站 $1$，$v_1=6$；班次 $2$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 2=4$。\n  \n- 当 $k=4$ 时，我们分别于时刻 $-2$ 和时刻 $2$ 在站点 $1$ 发车，于时刻 $1$ 和时刻 $3$ 分别在站点 $2$ 发车，具体运营信息如下表所示。\n  |                       | 车站 $1$ | 车站 $2$ | 车站 $3$ |\n  | :-------------------: | :------: | :------: | :------: |\n  |   市郊铁路到站时刻    |   $2$    |   $3$    |   $5$    |\n  | 公交班次 $1$ 到站时刻 |   $-2$   |   $1$    |   $5$    |\n  | 公交班次 $2$ 到站时刻 |   $2$    |   $5$    |   $9$    |\n  | 公交班次 $3$ 到站时刻 |    /     |   $1$    |   $5$    |\n  | 公交班次 $4$ 到站时刻 |    /     |   $3$    |   $7$    |\n  |    乘客登上的班次     | 班次 $2$ | 班次 $4$ | 班次 $3$ |\n  |   乘客等待时间    |   $0$    |   $0$    |   $0$    |\n  \n  班次 $1$ 和 $2$ 的起点站为车站 $1$，$v_1=6$；班次 $3$ 和 $4$ 的起点站为车站 $2$，$v_2=2$。故最终答案为 $6\\times 0+2\\times 0+2\\times 0=0$。\n  \n  值得注意的是，对于车站 $3$，班次 $1$ 和班次 $3$ 同时最早到达，但由于班次 $1$ 对应的重视程度 $v_1=6$，班次 $3$ 对应的重视程度为 $v_2=2$，因此乘客登上的是班次 $3$。", "locale": "zh-CN"}}}
{"pid": "P10770", "type": "P", "difficulty": 7, "samples": [["0\n5\n10 5 1 8 4 3 7 6 2 9\n1 1 1 3", "10 1 4 9 7 6 5 8 3 2"], ["0\n4\n7 2 4 1 5 6 3 8\n0 0 0\n", "7 1 8 2 4 6 5 3\n"], ["0\n4\n2 7 6 4 5 8 1 3\n0 0 0", "2 4 8 6 7 5 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "博弈论", "线段树", "洛谷原创", "洛谷月赛"], "title": "「CROI · R2」夏风与树", "background": "刺眼的阳光把大地烤得炽热，小 B 走在街上，迎面吹来一阵清风，路旁郁郁葱葱的树叶沙沙地摇晃着。\n\n“夏风扫过树叶的声音就像下雨一样呢。”", "description": "Alice 和 Bob 在种树，同时，他们决定玩一个游戏。\n\nAlice 拥有 $1\\sim n$ 号结点，Bob 拥有 $(n+1)\\sim 2n$ 号结点，这 $2n$ 个结点的权值恰好构成一个**排列** $a$，其中 $a_i$ 为 $i$ 号点上的权值。\n\n首先，他们约定 $1$ 号点为树根。\n\n然后，由 Alice 为 $2\\sim n$ 号点决定父亲，其中 $i$ 号点的父亲只能在 $1\\sim(i-1)$ 中选择。\n\n接下来，由 Bob 为 $(n+1)\\sim 2n$ 号点决定父亲，其中 $i$ 号点的父亲只能在 $0\\sim(i-1)$ 中选择。$0$ 号点不在他们的树上，也就是说，Bob 的结点不一定要与这棵树连通。\n\n最后，Alice 会从 $1$ 号点开始，对这棵树进行深度优先搜索，同时她会维护一个序列，搜索过程中，每遇到一个没访问过的点就将它上面的**权值**加入序列末尾。\n\nAlice 希望最终序列的字典序尽可能小，Bob 希望最终序列的字典序尽可能大，并且他们二人都会采取最优策略。现在 Bob 请求你告诉他，最终序列会是什么样。\n\n以下是关于字典序的定义：\n\n- 对于一个长度为 $n$ 的序列 $a$，若 $i>n$，约定 $a_i=-\\infty$。\n- 对于两个序列 $a, b$，我们定义 $a$ 的字典序小于 $b$ 当且仅当存在 $i\\ge 1$，使得 $\\forall 1 \\leq j < i$，$a_j = b_j$，且 $a_i < b_i$。", "inputFormat": "**在本题的部分测试点中，Bob 会把 Alice 在第一步中决定好的 $2\\sim n$ 号结点的父亲告诉你。**\n\n第一行一个整数 $t$，表示子任务编号。特别地，样例的子任务编号为 $0$。\n\n第二行一个正整数 $n$。\n\n第三行 $2n$ 个正整数，表示排列 $a$。\n\n第四行 $(n-1)$ 个整数，若该子任务拥有特殊性质 A，则表示 $2\\sim n$ 号结点的父亲，否则这 $(n-1)$ 个整数都为 $0$。", "outputFormat": "一行，表示最终序列。", "hint": "样例 #1 中，一种可能的最终树，数字为编号，括号内为权值：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gqt4od8n.png)\n### 数据范围\n\n| 子任务 | 分值 | $n$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------:  |\n| $1$ | $10$ | $\\le 4$ |无 |\n| $2$ | $10$ | $\\le 10^5$ |B|\n| $3$ | $30$ | $\\le 10^5$ |A |\n| $4$ | $20$ | $\\le 3000$ |无 |\n| $5$ | $30$ | $\\le 10^5$ |无 |\n\n特殊性质 A：输入中给定一种 Alice 的最优决策中 $2\\sim n$ 号结点的父亲。\n\n特殊性质 B：$a_{n+1}\\sim a_{2n}$ 构成 $1\\sim n$ 的一个排列。 \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，保证序列 $a$ 是一个 $1\\sim 2n$ 的排列。", "locale": "zh-CN", "translations": {"en": {"title": "「CROI · R2」Summer Wind and Trees", "background": "The glaring sunlight scorched the earth. As Little B walked down the street, a cool breeze blew towards him, rustling the lush green leaves by the roadside.\n\n\"The sound of the summer wind sweeping through the leaves is just like the sound of rain.\"", "description": "Alice and Bob are planting trees while playing a game.\n\nAlice owns nodes $1\\sim n$, and Bob owns nodes $(n+1)\\sim 2n$. The weights of these $2n$ nodes form a **permutation** $a$, where $a_i$ is the weight of node $i$.\n\nFirst, they agree that node $1$ is the root of the tree.\n\nThen, Alice decides the parent for nodes $2\\sim n$, where the parent of node $i$ must be chosen from $1\\sim (i-1)$.\n\nNext, Bob decides the parent for nodes $(n+1)\\sim 2n$, where the parent of node $i$ can be chosen from $0\\sim (i-1)$. Node $0$ is not part of their tree, meaning Bob's nodes do not need to be connected to this tree.\n\nFinally, Alice will perform a depth-first search starting from node $1$. During this process, she maintains a sequence: whenever she encounters an unvisited node, she appends its **weight** to the end of the sequence.\n\nAlice wants the lexicographical order of the final sequence to be as small as possible, while Bob wants it to be as large as possible. Both will adopt optimal strategies. Now Bob asks you to determine what the final sequence will be.\n\nDefinitions related to lexicographical order:\n\n- For a sequence $a$ of length $n$, if $i > n$, we define $a_i = -\\infty$.\n- For two sequences $a$ and $b$, we say $a$ is lexicographically smaller than $b$ if there exists an $i \\ge 1$ such that for all $1 \\leq j < i$, $a_j = b_j$, and $a_i < b_i$.", "inputFormat": "**In some test cases of this problem, Bob will provide you with the parents of nodes $2\\sim n$ determined by Alice in the first step.**\n\nThe first line contains an integer $t$, representing the subtask number. Notably, the sample input has subtask number $0$.\n\nThe second line contains a positive integer $n$.\n\nThe third line contains $2n$ positive integers, representing the permutation $a$.\n\nThe fourth line contains $(n-1)$ integers. If the subtask has Special Property A, these integers represent the parents of nodes $2\\sim n$. Otherwise, all $(n-1)$ integers are $0$.", "outputFormat": "A single line representing the final sequence.", "hint": "In Sample #1, a possible final tree is shown (numbers are node IDs, values in parentheses are weights):\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gqt4od8n.png)\n\n### Data Range\n\n| Subtask | Points | $n$ | Special Properties |\n| :-----: | :----: | :-----: | :----------------: |\n| $1$     | $10$   | $\\le 4$ | None               |\n| $2$     | $10$   | $\\le 10^5$ | B                 |\n| $3$     | $30$   | $\\le 10^5$ | A                 |\n| $4$     | $20$   | $\\le 3000$ | None              |\n| $5$     | $30$   | $\\le 10^5$ | None              |\n\nSpecial Property A: The input provides the parents of nodes $2\\sim n$ under one of Alice's optimal strategies.\n\nSpecial Property B: $a_{n+1}\\sim a_{2n}$ form a permutation of $1\\sim n$.\n\nFor $100\\%$ of the data: $1 \\le n \\le 10^5$, and the sequence $a$ is guaranteed to be a permutation of $1\\sim 2n$.", "locale": "en"}, "zh-CN": {"title": "「CROI · R2」夏风与树", "background": "刺眼的阳光把大地烤得炽热，小 B 走在街上，迎面吹来一阵清风，路旁郁郁葱葱的树叶沙沙地摇晃着。\n\n“夏风扫过树叶的声音就像下雨一样呢。”", "description": "Alice 和 Bob 在种树，同时，他们决定玩一个游戏。\n\nAlice 拥有 $1\\sim n$ 号结点，Bob 拥有 $(n+1)\\sim 2n$ 号结点，这 $2n$ 个结点的权值恰好构成一个**排列** $a$，其中 $a_i$ 为 $i$ 号点上的权值。\n\n首先，他们约定 $1$ 号点为树根。\n\n然后，由 Alice 为 $2\\sim n$ 号点决定父亲，其中 $i$ 号点的父亲只能在 $1\\sim(i-1)$ 中选择。\n\n接下来，由 Bob 为 $(n+1)\\sim 2n$ 号点决定父亲，其中 $i$ 号点的父亲只能在 $0\\sim(i-1)$ 中选择。$0$ 号点不在他们的树上，也就是说，Bob 的结点不一定要与这棵树连通。\n\n最后，Alice 会从 $1$ 号点开始，对这棵树进行深度优先搜索，同时她会维护一个序列，搜索过程中，每遇到一个没访问过的点就将它上面的**权值**加入序列末尾。\n\nAlice 希望最终序列的字典序尽可能小，Bob 希望最终序列的字典序尽可能大，并且他们二人都会采取最优策略。现在 Bob 请求你告诉他，最终序列会是什么样。\n\n以下是关于字典序的定义：\n\n- 对于一个长度为 $n$ 的序列 $a$，若 $i>n$，约定 $a_i=-\\infty$。\n- 对于两个序列 $a, b$，我们定义 $a$ 的字典序小于 $b$ 当且仅当存在 $i\\ge 1$，使得 $\\forall 1 \\leq j < i$，$a_j = b_j$，且 $a_i < b_i$。", "inputFormat": "**在本题的部分测试点中，Bob 会把 Alice 在第一步中决定好的 $2\\sim n$ 号结点的父亲告诉你。**\n\n第一行一个整数 $t$，表示子任务编号。特别地，样例的子任务编号为 $0$。\n\n第二行一个正整数 $n$。\n\n第三行 $2n$ 个正整数，表示排列 $a$。\n\n第四行 $(n-1)$ 个整数，若该子任务拥有特殊性质 A，则表示 $2\\sim n$ 号结点的父亲，否则这 $(n-1)$ 个整数都为 $0$。", "outputFormat": "一行，表示最终序列。", "hint": "样例 #1 中，一种可能的最终树，数字为编号，括号内为权值：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gqt4od8n.png)\n### 数据范围\n\n| 子任务 | 分值 | $n$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------:  |\n| $1$ | $10$ | $\\le 4$ |无 |\n| $2$ | $10$ | $\\le 10^5$ |B|\n| $3$ | $30$ | $\\le 10^5$ |A |\n| $4$ | $20$ | $\\le 3000$ |无 |\n| $5$ | $30$ | $\\le 10^5$ |无 |\n\n特殊性质 A：输入中给定一种 Alice 的最优决策中 $2\\sim n$ 号结点的父亲。\n\n特殊性质 B：$a_{n+1}\\sim a_{2n}$ 构成 $1\\sim n$ 的一个排列。 \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，保证序列 $a$ 是一个 $1\\sim 2n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P10771", "type": "P", "difficulty": 2, "samples": [["3 1 2\n5 3 4\n7 1 4", "14"], ["5 3 2\n5 6 6 5 1\n0 0 0 0 0", "17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2021", "NOISG（新加坡）"], "title": "[NOISG 2021 Qualification] Competition", "background": "", "description": "你是一位老师，有 $n$ 个学生，每个学生都有物理成绩 $A_i$ 和生物成绩 $B_i$，你要从这些学生中选出 $a$ 个人参加物理竞赛，$b$ 个人参加生物竞赛。每个学生必须参加一种且只能参加一种竞赛。\n\n定义你所在的学校的实力值为参加物理竞赛的人的物理成绩和参加生物竞赛的人的生物成绩的和。请你求出实力值最大是多少？", "inputFormat": "第 $1$ 行三个整数 $n, a, b$。\n\n第 $2$ 行 $n$ 个整数 $A_i$。\n\n第 $3$ 行 $n$ 个整数 $B_i$。", "outputFormat": "一行一个整数，最大的实力值。", "hint": "#### 样例 1 解释\n\n第一、三个人参加生物竞赛，第二个人参加物理竞赛。\n\n#### 数据范围\n\n**本题采用捆绑测试。**\n\nSubtask0 是样例。\n\nSubtask1（29 pts）$n \\leq 20$。\n\nSubtask2（22 pts）保证所有 $B_i=0$。\n\nSubtask3（49 pts）无特殊限制。\n\n数据保证 $1 \\leq n \\leq 10^5$，$0 \\leq a,b \\leq n$，$a+b=n$，$0 \\leq A_i,B_i \\leq 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2021 Qualification] Competition", "background": "", "description": "你是一位老师，有 $n$ 个学生，每个学生都有物理成绩 $A_i$ 和生物成绩 $B_i$，你要从这些学生中选出 $a$ 个人参加物理竞赛，$b$ 个人参加生物竞赛。每个学生必须参加一种且只能参加一种竞赛。\n\n定义你所在的学校的实力值为参加物理竞赛的人的物理成绩和参加生物竞赛的人的生物成绩的和。请你求出实力值最大是多少？", "inputFormat": "第 $1$ 行三个整数 $n, a, b$。\n\n第 $2$ 行 $n$ 个整数 $A_i$。\n\n第 $3$ 行 $n$ 个整数 $B_i$。", "outputFormat": "一行一个整数，最大的实力值。", "hint": "#### 样例 1 解释\n\n第一、三个人参加生物竞赛，第二个人参加物理竞赛。\n\n#### 数据范围\n\n**本题采用捆绑测试。**\n\nSubtask0 是样例。\n\nSubtask1（29 pts）$n \\leq 20$。\n\nSubtask2（22 pts）保证所有 $B_i=0$。\n\nSubtask3（49 pts）无特殊限制。\n\n数据保证 $1 \\leq n \\leq 10^5$，$0 \\leq a,b \\leq n$，$a+b=n$，$0 \\leq A_i,B_i \\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10772", "type": "P", "difficulty": 6, "samples": [["5 8\n0 5\n3 11\n1 -8\n4 10\n1 -3\n1 2 5 6 8 -3 -7 11", "1 5\n2 5\n1 1\n4 3\n13 8\n4 9\n8 9\n2 1"], ["3 2\n-1 4\n-2 5\n0 -5\n4 -4", "6 7\n4 5"], ["5 3\n0 2\n2 4\n4 6\n6 8\n8 10\n9 10 10", "9 2\n5 1\n5 1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "NOISG（新加坡）"], "title": "[NOISG 2021 Qualification] Departure", "background": "", "description": "有一个城市，城市里有 $N$ 条路线，每条路线上，在每天午夜会有一辆巴士从起点出发，第二天午夜到达终点。第 $i$ 辆公交车的起点为 $S_i$，终点为 $E_i$。人们可以在巴士路线上的的**任何地方**上车、下车或者换乘。\n\n体育馆是这个城市的中心，坐标为 $0$。在体育馆西边 $x$ 千米的点，坐标为 $-x$，在体育馆东边 $x$ 千米的点，坐标为 $x$。\n\n现在有 $M$ 个人需要从体育馆回家，你需要求出每一个人回家的最短时间。", "inputFormat": "第 $1$ 行两个整数 $N,M$。\n\n第 $2$ 至 $N+1$ 行，每行两个整数 $S_i,E_i$。\n\n第 $N+2$ 行 $M$ 个整数 $P_j$，表示每一个人的家。", "outputFormat": "$M$ 行，每行两个整数 $a,b$（$\\gcd(a,b)=1$），表示这个人最早能在 $\\dfrac{a}{b}$ 天后回家。", "hint": "#### 数据范围\n\n**本题采用捆绑测试。**\n\n以下定义 $\\operatorname{sign}(x) = \\begin{cases}\n1 &\\text{if } x > 0 \\\\\n0 &\\text{if } x = 0 \\\\\n-1 &\\text{if } x < 0 \\\\\n\\end{cases}$。\n\nSubtask0 为样例。\n\nSubtask1（10 pts）$N \\leq 10^4$，$M \\leq 10^3$，$\\operatorname{sign}(S_i)\\neq\\operatorname{sign}(E_i)$。\n\nSubtask2（14 pts）$N \\leq 100$，$M \\leq 10^3$。\n\nSubtask3（12 pts）$N \\leq 10^3$，$M \\leq 10^5$，保证最后答案的值均不大于 $10^3$，保证任意坐标在不超过 $10^2$ 条线路上。\n\nSubtask4（8 pts）$M \\leq 10^3$，保证任意坐标在不超过 $10^4$ 条线路上。\n\nSubtask5（15 pts）$M \\leq 10^4$，保证最后答案的值均不大于 $10^2$。\n\nSubtask6（13 pts）$\\operatorname{sign}(S_i)\\neq\\operatorname{sign}(E_i)$。\n\nSubtask7（28 pts）无特殊限制。\n\n数据保证 $1 \\leq N,M \\leq 10^6$，$-10^6 \\leq S_i,E_i,P_j \\leq 10^6$，$S_i \\neq E_i$，$P_j \\neq 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2021 Qualification] Departure", "background": "", "description": "有一个城市，城市里有 $N$ 条路线，每条路线上，在每天午夜会有一辆巴士从起点出发，第二天午夜到达终点。第 $i$ 辆公交车的起点为 $S_i$，终点为 $E_i$。人们可以在巴士路线上的的**任何地方**上车、下车或者换乘。\n\n体育馆是这个城市的中心，坐标为 $0$。在体育馆西边 $x$ 千米的点，坐标为 $-x$，在体育馆东边 $x$ 千米的点，坐标为 $x$。\n\n现在有 $M$ 个人需要从体育馆回家，你需要求出每一个人回家的最短时间。", "inputFormat": "第 $1$ 行两个整数 $N,M$。\n\n第 $2$ 至 $N+1$ 行，每行两个整数 $S_i,E_i$。\n\n第 $N+2$ 行 $M$ 个整数 $P_j$，表示每一个人的家。", "outputFormat": "$M$ 行，每行两个整数 $a,b$（$\\gcd(a,b)=1$），表示这个人最早能在 $\\dfrac{a}{b}$ 天后回家。", "hint": "#### 数据范围\n\n**本题采用捆绑测试。**\n\n以下定义 $\\operatorname{sign}(x) = \\begin{cases}\n1 &\\text{if } x > 0 \\\\\n0 &\\text{if } x = 0 \\\\\n-1 &\\text{if } x < 0 \\\\\n\\end{cases}$。\n\nSubtask0 为样例。\n\nSubtask1（10 pts）$N \\leq 10^4$，$M \\leq 10^3$，$\\operatorname{sign}(S_i)\\neq\\operatorname{sign}(E_i)$。\n\nSubtask2（14 pts）$N \\leq 100$，$M \\leq 10^3$。\n\nSubtask3（12 pts）$N \\leq 10^3$，$M \\leq 10^5$，保证最后答案的值均不大于 $10^3$，保证任意坐标在不超过 $10^2$ 条线路上。\n\nSubtask4（8 pts）$M \\leq 10^3$，保证任意坐标在不超过 $10^4$ 条线路上。\n\nSubtask5（15 pts）$M \\leq 10^4$，保证最后答案的值均不大于 $10^2$。\n\nSubtask6（13 pts）$\\operatorname{sign}(S_i)\\neq\\operatorname{sign}(E_i)$。\n\nSubtask7（28 pts）无特殊限制。\n\n数据保证 $1 \\leq N,M \\leq 10^6$，$-10^6 \\leq S_i,E_i,P_j \\leq 10^6$，$S_i \\neq E_i$，$P_j \\neq 0$。", "locale": "zh-CN"}}}
{"pid": "P10773", "type": "P", "difficulty": 6, "samples": [["6 2\n1 2 2 1\n2 3 1 2\n2 4 2 3\n4 5 2 2\n4 6 1 4\n3\n1 3 6\n0 4 5 5\n1 2 5\n", "23\n18"], ["4 3\n1 2 3 0\n2 3 1 0\n3 4 4 0\n1\n1 1 4", "24"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "NOISG（新加坡）"], "title": "[NOISG 2021 Qualification] Truck", "background": null, "description": "有一棵树，每条边有两个权值 $D_i$ 和 $T_i$，给定 $Q$ 次操作。操作分为两种：\n\n`0 x y t`：表示把 $x$ 和 $y$ 之间的一条道路的 $T_i$ 值改为 $t$。\n\n`1 x y`：表示查询 $x$ 到 $y$ 的费用。\n\n定义 $x$ 到 $y$ 的费用为：给定参数 $G$（对每组询问都相同），要求 $x$ 运送一些价值到 $y$，每经过一条权值为 $D_i$ 和 $T_i$ 的边，运送的价值会减少 $T_i$，然后会产生运送的价值的 $D_i$ 倍的费用。在运送到 $y$ 节点时，若运送到的价值刚好为 $G$，产生的费用就为 $x$ 到 $y$ 的费用。\n\n你要对每组询问计算费用。由于费用可能比较大，请输出对 $10^9+7$ 取模的值。", "inputFormat": "第 $1$ 行两个整数 $N,G$。\n\n第 $2 \\sim N$ 行，每行四个整数 $A_i,B_i,D_i,T_i$，表示树上 $A_i$ 和 $B_i$ 有一条边，边权为 $D_i$ 和 $T_i$。\n\n第 $N+1$ 行一个整数 $Q$，表示操作个数。\n\n下面 $Q$ 行，每行一个操作，格式见上。", "outputFormat": "若干行，对于每个查询操作，你需要求出费用。每行一个回答。", "hint": "#### 数据范围\n\n**本题采用捆绑测试。**\n\nSubtask0 为样例。\n\nSubtask1（5 pts）只有查询操作，每个节点度不超过 $2$，且 $T_i=0$。\n\nSubtask2（9 pts）只有查询操作，且 $T_i = 0$。\n\nSubtask3（12 pts）只有查询操作，$D_i=1$，且所有 $T_i$ 相等。\n\nSubtask4（17 pts）只有查询操作，且每个节点度不超过 $2$。\n\nSubtask5（20 pts）每个节点度不超过 $2$。\n\nSubtask6（18 pts）$N,Q \\leq 5000$。\n\nSubtask7（19 pts）无特殊限制。\n\n数据保证 $2 \\leq N \\leq 10^5$，$1 \\leq Q \\leq 10^5$，$1 \\leq A_i,B_i \\leq N$，$1 \\leq D_i,G \\leq 10^9$，$0 \\leq T_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2021 Qualification] Truck", "background": null, "description": "有一棵树，每条边有两个权值 $D_i$ 和 $T_i$，给定 $Q$ 次操作。操作分为两种：\n\n`0 x y t`：表示把 $x$ 和 $y$ 之间的一条道路的 $T_i$ 值改为 $t$。\n\n`1 x y`：表示查询 $x$ 到 $y$ 的费用。\n\n定义 $x$ 到 $y$ 的费用为：给定参数 $G$（对每组询问都相同），要求 $x$ 运送一些价值到 $y$，每经过一条权值为 $D_i$ 和 $T_i$ 的边，运送的价值会减少 $T_i$，然后会产生运送的价值的 $D_i$ 倍的费用。在运送到 $y$ 节点时，若运送到的价值刚好为 $G$，产生的费用就为 $x$ 到 $y$ 的费用。\n\n你要对每组询问计算费用。由于费用可能比较大，请输出对 $10^9+7$ 取模的值。", "inputFormat": "第 $1$ 行两个整数 $N,G$。\n\n第 $2 \\sim N$ 行，每行四个整数 $A_i,B_i,D_i,T_i$，表示树上 $A_i$ 和 $B_i$ 有一条边，边权为 $D_i$ 和 $T_i$。\n\n第 $N+1$ 行一个整数 $Q$，表示操作个数。\n\n下面 $Q$ 行，每行一个操作，格式见上。", "outputFormat": "若干行，对于每个查询操作，你需要求出费用。每行一个回答。", "hint": "#### 数据范围\n\n**本题采用捆绑测试。**\n\nSubtask0 为样例。\n\nSubtask1（5 pts）只有查询操作，每个节点度不超过 $2$，且 $T_i=0$。\n\nSubtask2（9 pts）只有查询操作，且 $T_i = 0$。\n\nSubtask3（12 pts）只有查询操作，$D_i=1$，且所有 $T_i$ 相等。\n\nSubtask4（17 pts）只有查询操作，且每个节点度不超过 $2$。\n\nSubtask5（20 pts）每个节点度不超过 $2$。\n\nSubtask6（18 pts）$N,Q \\leq 5000$。\n\nSubtask7（19 pts）无特殊限制。\n\n数据保证 $2 \\leq N \\leq 10^5$，$1 \\leq Q \\leq 10^5$，$1 \\leq A_i,B_i \\leq N$，$1 \\leq D_i,G \\leq 10^9$，$0 \\leq T_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10774", "type": "P", "difficulty": 0, "samples": [["5 10\n2 1\n3 2\n4 2\n5 1\n5 3\n4 1\n4 3\n5 2\n3 1\n5 4\n5\n1 1\n2 7 0 3\n6 0 7 4 6\n1 2 7\n0 5 0 2 13", "Connected\nConnected\nConnected\nConnected\nDisconnected"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线性基"], "title": "BZOJ3563 DZY Loves Chinese", "background": "", "description": "给定无向图 $G = (V, E)$，$q$ 次询问每次给定一个边集，求删除该边集后图是否连通。保证边集大小不超过 $15$。强制在线。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的结点数和边数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，表示第 $i$ 条边。\n\n接下来输入一行 $Q$，表示询问次数。\n\n接下来 $Q$ 行，每行第一个数为 $k$，而后 $k$ 个正整数 $c_1,c_2,\\dots,c_k$ 表示一个大小为 $k$ 的边集，其中 $c_i$ 为边的序号。\n\n为了强制在线，每次的 $k$ 与 $c_1,c_2,\\dots,c_k$ 均需异或之前回答为连通的个数。", "outputFormat": "对于每个询问输出：连通则为 `Connected`，不连通则为 `Disconnected`（不加引号）。", "hint": "数据保证，$1\\leq n\\leq 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$，$1\\leq k\\leq 15$。保证图中没有重边与自环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ3563 DZY Loves Chinese", "background": "", "description": "给定无向图 $G = (V, E)$，$q$ 次询问每次给定一个边集，求删除该边集后图是否连通。保证边集大小不超过 $15$。强制在线。", "inputFormat": "第一行输入两个正整数 $n,m$，表示图的结点数和边数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$，表示第 $i$ 条边。\n\n接下来输入一行 $Q$，表示询问次数。\n\n接下来 $Q$ 行，每行第一个数为 $k$，而后 $k$ 个正整数 $c_1,c_2,\\dots,c_k$ 表示一个大小为 $k$ 的边集，其中 $c_i$ 为边的序号。\n\n为了强制在线，每次的 $k$ 与 $c_1,c_2,\\dots,c_k$ 均需异或之前回答为连通的个数。", "outputFormat": "对于每个询问输出：连通则为 `Connected`，不连通则为 `Disconnected`（不加引号）。", "hint": "数据保证，$1\\leq n\\leq 10^5$，$1\\leq m\\leq 5\\times 10^5$，$1\\leq Q\\leq 5\\times 10^4$，$1\\leq k\\leq 15$。保证图中没有重边与自环。", "locale": "zh-CN"}}}
