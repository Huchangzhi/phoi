{"pid": "P7316", "type": "P", "difficulty": 6, "samples": [["6 6\n3\n4 4 2\n3 3 2\n2 4 1", "68"], ["100 100\n2\n50 50 49\n30 30 29", "9534"], ["33333 44444\n1\n11111 22222 9999", "1167355751"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2018", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #3] NLO", "background": "", "description": "给定一个 $N \\times M$ 的矩形麦田。麦田的每个区域都生长有一定量的草。所有区域的初始草量均为 $1$。\n\n在 $K$ 天内，圆形的 UFO 将降落在麦田上并画圆。在第 $i$ 天早上，一个半径为 $R_i$ 的 UFO 将降落在区域 $(X_i,Y_i)$，并使得以该区域为圆心，$R_i$ 的半径内的所有区域将会受到影响。如果一个区域 $(x,y)$ 受到影响，且 $(X_i-x)^2+(Y_i-y)^2 \\le R_i^2$，则该区域的草量将降为 $0$。在新的一天到来时，每个区域的草量都会增加 $1$。\n\n求在第 $K$ 天晚上，所有区域的草量之和。", "inputFormat": "第一行输入正整数 $N,M$，表示麦地规模。\n\n第二行输入正整数 $K$，表示天数。\n\n接下来的 $K$ 行中的第 $i$ 行，输入正整数 $X_i,Y_i,R_i$，表示降落的区域和 UFO 的半径。", "outputFormat": "输出草的总量。", "hint": "#### 样例 1 解释\n\n第一天晚上的麦田：\n\n|$1$|$1$|$1$|$1$|$1$|$1$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$1$|$1$|$1$|$\\red 0$|$1$|$1$|\n|$1$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|\n|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|\n|$1$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|\n|$1$|$1$|$1$|$\\red 0$|$1$|$1$|\n\n第二天晚上的麦田：\n\n|$2$|$2$|$\\red 0$|$2$|$2$|$2$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$2$|$\\red 0$|$\\red 0$|$\\red 0$|$2$|$2$|\n|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$2$|\n|$2$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|$1$|\n|$2$|$2$|$\\red 0$|$1$|$1$|$2$|\n|$2$|$2$|$2$|$1$|$2$|$2$|\n\n第三天晚上的麦田：\n\n|$3$|$3$|$1$|$\\red 0$|$3$|$3$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$3$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$3$|\n|$1$|$1$|$1$|$\\red 0$|$1$|$3$|\n|$3$|$1$|$1$|$1$|$2$|$2$|\n|$3$|$3$|$1$|$2$|$2$|$3$|\n|$3$|$3$|$3$|$2$|$3$|$3$|\n\n因此总草量为 $68$ 单位。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$N,M \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 10^5$，$1 \\le K \\le 100$，$1 \\lt X_i \\lt N$，$1 \\lt Y_i \\lt M$，$1 \\le R_i \\le \\min(X_i-1,Y_i-1,N-X_i,M-Y_i)$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T4 NLO_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #3] NLO", "background": "", "description": "给定一个 $N \\times M$ 的矩形麦田。麦田的每个区域都生长有一定量的草。所有区域的初始草量均为 $1$。\n\n在 $K$ 天内，圆形的 UFO 将降落在麦田上并画圆。在第 $i$ 天早上，一个半径为 $R_i$ 的 UFO 将降落在区域 $(X_i,Y_i)$，并使得以该区域为圆心，$R_i$ 的半径内的所有区域将会受到影响。如果一个区域 $(x,y)$ 受到影响，且 $(X_i-x)^2+(Y_i-y)^2 \\le R_i^2$，则该区域的草量将降为 $0$。在新的一天到来时，每个区域的草量都会增加 $1$。\n\n求在第 $K$ 天晚上，所有区域的草量之和。", "inputFormat": "第一行输入正整数 $N,M$，表示麦地规模。\n\n第二行输入正整数 $K$，表示天数。\n\n接下来的 $K$ 行中的第 $i$ 行，输入正整数 $X_i,Y_i,R_i$，表示降落的区域和 UFO 的半径。", "outputFormat": "输出草的总量。", "hint": "#### 样例 1 解释\n\n第一天晚上的麦田：\n\n|$1$|$1$|$1$|$1$|$1$|$1$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$1$|$1$|$1$|$\\red 0$|$1$|$1$|\n|$1$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|\n|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|\n|$1$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|\n|$1$|$1$|$1$|$\\red 0$|$1$|$1$|\n\n第二天晚上的麦田：\n\n|$2$|$2$|$\\red 0$|$2$|$2$|$2$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$2$|$\\red 0$|$\\red 0$|$\\red 0$|$2$|$2$|\n|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$2$|\n|$2$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|$1$|\n|$2$|$2$|$\\red 0$|$1$|$1$|$2$|\n|$2$|$2$|$2$|$1$|$2$|$2$|\n\n第三天晚上的麦田：\n\n|$3$|$3$|$1$|$\\red 0$|$3$|$3$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$3$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$3$|\n|$1$|$1$|$1$|$\\red 0$|$1$|$3$|\n|$3$|$1$|$1$|$1$|$2$|$2$|\n|$3$|$3$|$1$|$2$|$2$|$3$|\n|$3$|$3$|$3$|$2$|$3$|$3$|\n\n因此总草量为 $68$ 单位。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$N,M \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 10^5$，$1 \\le K \\le 100$，$1 \\lt X_i \\lt N$，$1 \\lt Y_i \\lt M$，$1 \\le R_i \\le \\min(X_i-1,Y_i-1,N-X_i,M-Y_i)$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T4 NLO_。**", "locale": "zh-CN"}}}
{"pid": "P7317", "type": "P", "difficulty": 6, "samples": [["4 4\n1 2 10\n2 3 9\n3 4 8\n4 1 7", "1\n12 3 1 2 3"], ["2 1\n1 2 3", "0"], ["6 8\n1 2 6\n2 3 1\n3 5 6\n3 1 5\n4 5 0\n3 6 0\n4 2 8\n4 1 1", "2\n2 2 4 6\n15 1 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #3] Praktični", "background": "", "description": "给定一个包含 $N$ 个结点和 $M$ 条边的无向图。每条边有一个小于 $10^9$ 的权值。\n\n当一个环上的所有边的权值的异或和为 $0$，该环被称作好环。\n\n可以对无向图进行若干次操作。每次操作包含下列步骤：\n\n- 选定一个整数 $x$。\n- 选定一个包含若干条边的非空集合。\n- 给该集合中每条边都异或上 $x$。\n\n请在尽可能少的操作次数之下使得无向图中的所有简单回路都是好环。请求出最少操作次数，并输出对应的操作参数。", "inputFormat": "第一行输入正整数 $N,M$，分别表示结点和边的数量。\n\n接下来的 $M$ 行中的第 $i$ 行，输入 $a_i,b_i,p_i$，分别表示第 $i$ 条边连接的结点和边的权值。保证图联通，且无重边。", "outputFormat": "第一行输出 $K$，表示需要操作的最少次数。\n\n接下来的 $K$ 行，每行输出若干个数，用空格分开：\n\n- 第一个数为选定的数 $x$。\n- 第二个数位 $B$，表示选定的边的数量。\n- 接下来输出 $B$ 个数 $E_i$（$1 \\le E_i \\le M$），表示选定的边的序号。这 $B$ 个数必须按照从小到大的顺序输出。\n\n输出的所有数必须小于等于 $2 \\times 10^9$。", "hint": "#### 样例 1 解释\n\n图的初始和结束状态（在初始状态的基础上给前三条边的权值异或上 $12$）分别如下方左图和右图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zh4zuicc.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/lbmx5f8v.png)\n\n#### 样例 2 解释\n\n该无向图无环，因此题意已经满足，不需要进行修改，因此最少操作次数为 $0$。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$K=1$。\n\n对于另外 $40\\%$ 的数据，输入的所有数均小于等于 $10^6$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 10^5$，$1 \\le a_i,b_i \\le N$，$a_i \\neq b_i$，$0 \\le p_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $130$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T5 Praktični_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #3] Praktični", "background": "", "description": "给定一个包含 $N$ 个结点和 $M$ 条边的无向图。每条边有一个小于 $10^9$ 的权值。\n\n当一个环上的所有边的权值的异或和为 $0$，该环被称作好环。\n\n可以对无向图进行若干次操作。每次操作包含下列步骤：\n\n- 选定一个整数 $x$。\n- 选定一个包含若干条边的非空集合。\n- 给该集合中每条边都异或上 $x$。\n\n请在尽可能少的操作次数之下使得无向图中的所有简单回路都是好环。请求出最少操作次数，并输出对应的操作参数。", "inputFormat": "第一行输入正整数 $N,M$，分别表示结点和边的数量。\n\n接下来的 $M$ 行中的第 $i$ 行，输入 $a_i,b_i,p_i$，分别表示第 $i$ 条边连接的结点和边的权值。保证图联通，且无重边。", "outputFormat": "第一行输出 $K$，表示需要操作的最少次数。\n\n接下来的 $K$ 行，每行输出若干个数，用空格分开：\n\n- 第一个数为选定的数 $x$。\n- 第二个数位 $B$，表示选定的边的数量。\n- 接下来输出 $B$ 个数 $E_i$（$1 \\le E_i \\le M$），表示选定的边的序号。这 $B$ 个数必须按照从小到大的顺序输出。\n\n输出的所有数必须小于等于 $2 \\times 10^9$。", "hint": "#### 样例 1 解释\n\n图的初始和结束状态（在初始状态的基础上给前三条边的权值异或上 $12$）分别如下方左图和右图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zh4zuicc.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/lbmx5f8v.png)\n\n#### 样例 2 解释\n\n该无向图无环，因此题意已经满足，不需要进行修改，因此最少操作次数为 $0$。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$K=1$。\n\n对于另外 $40\\%$ 的数据，输入的所有数均小于等于 $10^6$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 10^5$，$1 \\le a_i,b_i \\le N$，$a_i \\neq b_i$，$0 \\le p_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $130$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T5 Praktični_。**", "locale": "zh-CN"}}}
{"pid": "P7318", "type": "P", "difficulty": 3, "samples": [["1 6 10", "6"], ["7 2 7", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "枚举", "矩阵乘法", "洛谷月赛"], "title": "「PMOI-4」人赢", "background": "众所周知，ducati 是人 win。\n\n现在 lhm 也想成为人 win，于是 ducati 扔给了 lhm 下面这道题，并且 ducati 承诺在 lhm 完成此题后教他如何成为人 win。", "description": "现在 lhm 手中有一个无穷长的衔尾数列 $a$，它满足：\n\n- 对于数列中的每一个 $a_i(i>2)$，它总为 $a_{i-2} \\times a_{i-1}$ 的**个位数**。\n\nducati 将给 lhm 衔尾数列的前两位 $a_1=n,a_2=m$ 与位置 $k$，它的任务是算出 $a_k$。\n\n由于 lhm 太菜了并不会这道题，但他仍然想成为人 win，所以他只好请聪明的你来帮他完成这个问题。", "inputFormat": "第一行三个整数 $n,m,k$。", "outputFormat": "一行一个整数，表示数列中位置 $k$ 的数字。", "hint": "【样例解释 $1$】\n\n数列 $1$ 至 $10$ 位依次为：$1,6,6,6,6,6,6,6,6,\\color{red}{6}$。所以答案为 $6$。\n\n【样例解释 $2$】\n\n数列 $1$ 至 $7$ 位依次为：$7,2,4,8,2,6,\\color{red}{2}$。所以答案为 $2$。\n\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（30pts）：$1 \\leq k \\leq 10^6$。\n- Subtask 2（70pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$0 \\leq n,m \\leq 9$，$1 \\leq k \\leq 10^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-4」人赢", "background": "众所周知，ducati 是人 win。\n\n现在 lhm 也想成为人 win，于是 ducati 扔给了 lhm 下面这道题，并且 ducati 承诺在 lhm 完成此题后教他如何成为人 win。", "description": "现在 lhm 手中有一个无穷长的衔尾数列 $a$，它满足：\n\n- 对于数列中的每一个 $a_i(i>2)$，它总为 $a_{i-2} \\times a_{i-1}$ 的**个位数**。\n\nducati 将给 lhm 衔尾数列的前两位 $a_1=n,a_2=m$ 与位置 $k$，它的任务是算出 $a_k$。\n\n由于 lhm 太菜了并不会这道题，但他仍然想成为人 win，所以他只好请聪明的你来帮他完成这个问题。", "inputFormat": "第一行三个整数 $n,m,k$。", "outputFormat": "一行一个整数，表示数列中位置 $k$ 的数字。", "hint": "【样例解释 $1$】\n\n数列 $1$ 至 $10$ 位依次为：$1,6,6,6,6,6,6,6,6,\\color{red}{6}$。所以答案为 $6$。\n\n【样例解释 $2$】\n\n数列 $1$ 至 $7$ 位依次为：$7,2,4,8,2,6,\\color{red}{2}$。所以答案为 $2$。\n\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（30pts）：$1 \\leq k \\leq 10^6$。\n- Subtask 2（70pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$0 \\leq n,m \\leq 9$，$1 \\leq k \\leq 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P7319", "type": "P", "difficulty": 3, "samples": [["7\n1 -1 -2 2 -3 3 4", "66"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2021", "O2优化", "排序", "洛谷月赛"], "title": "「PMOI-4」生成树", "background": "> 题目正解不会很难，反正很难的也必不会做，所以宁愿相信题目都是善良的。\n\n——command_block 《考前小贴士》\n\ndjy 出了一道生成树的题，然后发现做法假了，就把这个题改了一下，作为这场比赛的 B。", "description": "给定 $n$ 个数，第 $i$ 个数的原始权值是 $w_i$，你要按照某种顺序将这些数依次选择。\n\n若当前是第 $i$ 次选数，选择的**原始权值**为 $k$，则其他所有**未被选过**的数的权值均加上 $(-1)^{i+k+1} \\times k$。\n\n你需要求出一种选数方案，使得选出的 $n$ 个数**最终**的**权值**和**最大**。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数 $w_i$，表示第 $i$ 个数的权值。", "outputFormat": "一行一个整数，表示最大权值和。", "hint": "【样例解释】\n\n依次选择**编号**为 $\\{7,6,5,3,4,1,2\\}$ 的数即可。\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20pts）：$n \\le 7$。\n- Subtask 2（30pts）：$n \\le  10^3$。\n- Subtask 3（30pts）：保证所有的 $w_i \\ge 0$ 或所有的 $w_i \\le 0$。\n- Subtask 4（20pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le n \\le 10^5,-10^9 \\le w \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-4」生成树", "background": "> 题目正解不会很难，反正很难的也必不会做，所以宁愿相信题目都是善良的。\n\n——command_block 《考前小贴士》\n\ndjy 出了一道生成树的题，然后发现做法假了，就把这个题改了一下，作为这场比赛的 B。", "description": "给定 $n$ 个数，第 $i$ 个数的原始权值是 $w_i$，你要按照某种顺序将这些数依次选择。\n\n若当前是第 $i$ 次选数，选择的**原始权值**为 $k$，则其他所有**未被选过**的数的权值均加上 $(-1)^{i+k+1} \\times k$。\n\n你需要求出一种选数方案，使得选出的 $n$ 个数**最终**的**权值**和**最大**。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数 $w_i$，表示第 $i$ 个数的权值。", "outputFormat": "一行一个整数，表示最大权值和。", "hint": "【样例解释】\n\n依次选择**编号**为 $\\{7,6,5,3,4,1,2\\}$ 的数即可。\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20pts）：$n \\le 7$。\n- Subtask 2（30pts）：$n \\le  10^3$。\n- Subtask 3（30pts）：保证所有的 $w_i \\ge 0$ 或所有的 $w_i \\le 0$。\n- Subtask 4（20pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le n \\le 10^5,-10^9 \\le w \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7320", "type": "P", "difficulty": 6, "samples": [["6 7\n1 2\n1 3\n2 3\n2 5\n4 5\n5 6\n4 6", "2\n1 4"], ["6 6\n1 2\n2 3\n3 4\n4 5\n5 6\n1 6", "1\n6 1 2 3 4 5 6"]], "limits": {"time": [200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "图论", "树形数据结构", "Special Judge", "O2优化", "深度优先搜索 DFS", "构造", "洛谷月赛"], "title": "「PMOI-4」可怜的团主", "background": "", "description": "lnlhm 被塞给了一张 $n$ 个点 $m$ 条边的**简单无向连通**图。很快，他就被 ducati 和 b6e0 盯上了。\n\nducati 希望能够从中找到**恰好** $\\left \\lceil \\frac n 6 \\right \\rceil$ 条**不同**的路径，使得所有的点都被至少一条路径经过。\n\nb6e0 希望找到一个大小**恰好**为 $\\lfloor \\frac n 3 \\rfloor$ 的节点集合，使得它们之间**两两没有边**。\n\nlnlhm 知道，如果他没有满足某个人的要求，那么他就会被揍。因此，他向你求助：是否存在一种选择边或点的方案，使得**最多被一个人揍**？", "inputFormat": "第一行两个正整数 $n,m$，表示点数以及边数。\n\n下面 $m$ 行，每行两个点 $u,v$，描述一条**无向边**。", "outputFormat": "若想要满足 ducati 的需求，在第一行输出 $1$，并在下面的 $\\left \\lceil \\frac {n} 6 \\right \\rceil$ 行中，每行输出一条路径，你需要保证这些路径两两不同（例如，不能同时输出 $5 \\to 3 \\to 1$ 和 $1 \\to 3 \\to 5$）。输出一条路径的格式如下：\n\n- 先输出一个正整数 $k(1\\le k\\le n)$，表示路径经过的节点数。\n\n- 接下来 $k$ 个正整数，表示路径上的点，点之间用空格隔开。你需要保证，每相邻两个点之间有连边，不存在一个点被**某条**路径经过不少于两次，且每个点均被至少一条路径经过。\n\n若想要满足 b6e0 的需求，在第一行输出 $2$，并在第二行中输出 $\\lfloor \\frac n 3 \\rfloor$ 个点表示选出的独立集，之间用空格隔开。\n\n特别的，若两个人的要求一个也无法满足，那么输出一行 `Poor lnlhm!`。", "hint": "【样例解释】\n\n对于第一组样例，我们只需要为 b6e0 选出节点集合 $\\{1,4\\}$ 即可。注意，$\\{1,5\\}\\{1,6\\}\\{2,4\\}\\{2,6\\}\\{3,4\\}\\{3,5\\}\\{3,6\\}$ 同样合法。\n\n对于第二组样例，我们只需要为 ducati 选出路径 $1 \\to 2 \\to 3 \\to 4 \\to 5 \\to 6$ 即可。\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20pts）：$n,m\\le10$。\n- Subtask 2（20pts）：保证图为一棵树。\n- Subtask 3（60pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$3\\le n\\le10^3$，$3\\le m\\le\\dfrac{n(n-1)}2$，保证给定的图为简单无向连通图。\n\n**温馨提示: 输入量较大，请使用较快的读入方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-4」可怜的团主", "background": "", "description": "lnlhm 被塞给了一张 $n$ 个点 $m$ 条边的**简单无向连通**图。很快，他就被 ducati 和 b6e0 盯上了。\n\nducati 希望能够从中找到**恰好** $\\left \\lceil \\frac n 6 \\right \\rceil$ 条**不同**的路径，使得所有的点都被至少一条路径经过。\n\nb6e0 希望找到一个大小**恰好**为 $\\lfloor \\frac n 3 \\rfloor$ 的节点集合，使得它们之间**两两没有边**。\n\nlnlhm 知道，如果他没有满足某个人的要求，那么他就会被揍。因此，他向你求助：是否存在一种选择边或点的方案，使得**最多被一个人揍**？", "inputFormat": "第一行两个正整数 $n,m$，表示点数以及边数。\n\n下面 $m$ 行，每行两个点 $u,v$，描述一条**无向边**。", "outputFormat": "若想要满足 ducati 的需求，在第一行输出 $1$，并在下面的 $\\left \\lceil \\frac {n} 6 \\right \\rceil$ 行中，每行输出一条路径，你需要保证这些路径两两不同（例如，不能同时输出 $5 \\to 3 \\to 1$ 和 $1 \\to 3 \\to 5$）。输出一条路径的格式如下：\n\n- 先输出一个正整数 $k(1\\le k\\le n)$，表示路径经过的节点数。\n\n- 接下来 $k$ 个正整数，表示路径上的点，点之间用空格隔开。你需要保证，每相邻两个点之间有连边，不存在一个点被**某条**路径经过不少于两次，且每个点均被至少一条路径经过。\n\n若想要满足 b6e0 的需求，在第一行输出 $2$，并在第二行中输出 $\\lfloor \\frac n 3 \\rfloor$ 个点表示选出的独立集，之间用空格隔开。\n\n特别的，若两个人的要求一个也无法满足，那么输出一行 `Poor lnlhm!`。", "hint": "【样例解释】\n\n对于第一组样例，我们只需要为 b6e0 选出节点集合 $\\{1,4\\}$ 即可。注意，$\\{1,5\\}\\{1,6\\}\\{2,4\\}\\{2,6\\}\\{3,4\\}\\{3,5\\}\\{3,6\\}$ 同样合法。\n\n对于第二组样例，我们只需要为 ducati 选出路径 $1 \\to 2 \\to 3 \\to 4 \\to 5 \\to 6$ 即可。\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20pts）：$n,m\\le10$。\n- Subtask 2（20pts）：保证图为一棵树。\n- Subtask 3（60pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$3\\le n\\le10^3$，$3\\le m\\le\\dfrac{n(n-1)}2$，保证给定的图为简单无向连通图。\n\n**温馨提示: 输入量较大，请使用较快的读入方式。**", "locale": "zh-CN"}}}
{"pid": "P7321", "type": "P", "difficulty": 5, "samples": [["3 100 100 100\n\n1 3\n\n1 2", "? 3 1 2 3 3\n\n? 2 1 2 2\n\nA 1 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["交互题", "Special Judge", "O2优化", "洛谷月赛"], "title": "「PMOI-4」猜排列", "background": "**这是一道 IO 交互题。**\n\n**请各位选手确认好再提交，防止评测机爆炸。**", "description": "小 A 有一个长度为 $n$ 的**排列** $a$，他想请你猜一猜这个排列。你仅能给出以下两种询问：\n\n- `! x y`，他将会告诉你 $a_x \\bmod a_y$ 的值，其中你询问的数应当满足 $a_x\\gt a_y$ 且 $x\\ne y$；否则，他会不高兴并直接判定询问不合法，从而导致 `WA`。\n- `? l S p`，你需要给小 A 一个大小为 $l$ 的集合 $S$ 与一个整数 $p$，其中 $S=\\{x_1,x_2,x_3,\\ldots,x_l\\}$，其中对于任意 $1\\le i\\le l$，$1\\le x_i\\le n$，且 $x_i$ 互不相同，还要满足 $1\\le p\\le n$，$1\\le l\\le n$，小 A 将会告诉你这个集合中 $a_{x_k} \\ge p$ 的所有的 $x_k$，返回形式如下：首先会返回一个整数 $L$，接着会返回 $L$ 个整数，表示有 $L$ 个满足条件的 $k$（注意返回的是集合 $S$ 中的元素，而不是下标！）。\n\n你最多只能向小 A 询问 $m_1$ 个问题 $1$，$m_2$ 个问题 $2$，其中问题二中询问的集合大小之和应不超过 $m_3$ 来猜出这个序列。", "inputFormat": "输入排列的长度 $n$ 和 $m_1,m_2,m_3$ 以开始交互。\n\n交互过程中，您可以进行题目描述中的两种询问。无论是第一种询问还是第二种询问，交互库都会返回一个整数。\n\n在您确定答案后，请以 `A a[1] a[2] ... a[n-1] a[n]` 的形式输出一行，停止交互。\n\n在您输出一行后，请清空缓冲区：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其它语言请自行查阅文档。", "outputFormat": "见「交互方式」。", "hint": "【数据范围】\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | 分值 |$n=$ | $m_1=$ | $m_2=$ | $m_3=$ | 特殊限制 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $4$ | $4$ | $1$ | $4$ | 无 | \n| $2$ | $10$ | $5 \\times 10^2$ | $5 \\times 10^2$ | $5 \\times 10^2$ | $2.5\\times 10^5$ | 无 |\n| $3$ | $10$ | $2 \\times 10^4$ | $2 \\times 10^4$ | $2 \\times 10^4$ | $3 \\times 10^5$ | A |\n| $4$ | $20$ | $10^4$ | $10^4$ | $30$ | $3 \\times 10^5$ | 无 |\n| $5$ | $20$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $34$ | $4 \\times 10^5$ | 无 |\n| $6$ | $25$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $17$ |  $1.5\\times 10^5$ | 无 |\n| $7$ | $5$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $15$ | $1.5\\times 10^5$ | 无 |\n\n**A：保证排列 $a$ 随机构造**。\n\n【提示】\n\n1. 询问不合法或交互库输出数超过 $m$ 后继续询问会直接导致 WA。\n\n2. 数据范围的顶栏都是 $=$ 而非 $\\le$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-4」猜排列", "background": "**这是一道 IO 交互题。**\n\n**请各位选手确认好再提交，防止评测机爆炸。**", "description": "小 A 有一个长度为 $n$ 的**排列** $a$，他想请你猜一猜这个排列。你仅能给出以下两种询问：\n\n- `! x y`，他将会告诉你 $a_x \\bmod a_y$ 的值，其中你询问的数应当满足 $a_x\\gt a_y$ 且 $x\\ne y$；否则，他会不高兴并直接判定询问不合法，从而导致 `WA`。\n- `? l S p`，你需要给小 A 一个大小为 $l$ 的集合 $S$ 与一个整数 $p$，其中 $S=\\{x_1,x_2,x_3,\\ldots,x_l\\}$，其中对于任意 $1\\le i\\le l$，$1\\le x_i\\le n$，且 $x_i$ 互不相同，还要满足 $1\\le p\\le n$，$1\\le l\\le n$，小 A 将会告诉你这个集合中 $a_{x_k} \\ge p$ 的所有的 $x_k$，返回形式如下：首先会返回一个整数 $L$，接着会返回 $L$ 个整数，表示有 $L$ 个满足条件的 $k$（注意返回的是集合 $S$ 中的元素，而不是下标！）。\n\n你最多只能向小 A 询问 $m_1$ 个问题 $1$，$m_2$ 个问题 $2$，其中问题二中询问的集合大小之和应不超过 $m_3$ 来猜出这个序列。", "inputFormat": "输入排列的长度 $n$ 和 $m_1,m_2,m_3$ 以开始交互。\n\n交互过程中，您可以进行题目描述中的两种询问。无论是第一种询问还是第二种询问，交互库都会返回一个整数。\n\n在您确定答案后，请以 `A a[1] a[2] ... a[n-1] a[n]` 的形式输出一行，停止交互。\n\n在您输出一行后，请清空缓冲区：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其它语言请自行查阅文档。", "outputFormat": "见「交互方式」。", "hint": "【数据范围】\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | 分值 |$n=$ | $m_1=$ | $m_2=$ | $m_3=$ | 特殊限制 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $4$ | $4$ | $1$ | $4$ | 无 | \n| $2$ | $10$ | $5 \\times 10^2$ | $5 \\times 10^2$ | $5 \\times 10^2$ | $2.5\\times 10^5$ | 无 |\n| $3$ | $10$ | $2 \\times 10^4$ | $2 \\times 10^4$ | $2 \\times 10^4$ | $3 \\times 10^5$ | A |\n| $4$ | $20$ | $10^4$ | $10^4$ | $30$ | $3 \\times 10^5$ | 无 |\n| $5$ | $20$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $34$ | $4 \\times 10^5$ | 无 |\n| $6$ | $25$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $17$ |  $1.5\\times 10^5$ | 无 |\n| $7$ | $5$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $15$ | $1.5\\times 10^5$ | 无 |\n\n**A：保证排列 $a$ 随机构造**。\n\n【提示】\n\n1. 询问不合法或交互库输出数超过 $m$ 后继续询问会直接导致 WA。\n\n2. 数据范围的顶栏都是 $=$ 而非 $\\le$。", "locale": "zh-CN"}}}
{"pid": "P7322", "type": "P", "difficulty": 5, "samples": [["3 2", "10"], ["500000 200000", "840847204"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "O2优化", "组合数学", "洛谷月赛"], "title": "「PMOI-4」排列变换", "background": "", "description": "给定常数 $k$。对于一个长度为 $n$ 的**排列** $a$，定义\n\n$$f(a)=\\{\\max_{1 \\le i \\le k} \\{a_i\\},\\max_{2 \\le i \\le k+1} \\{a_i\\},\\cdots,\\max_{n-k+1 \\le i \\le n} \\{a_i\\}\\}$$\n\n对于一个长度为 $n$ 的**序列** $a$，定义其权值 $w(a)$ 为 $a$ 中不同的数的个数。\n\n现在，$\\text{ducati}$ 想知道，对于所有长度为 $n$ 的排列 $p$，它们的 $w(f(p))$ 之和。", "inputFormat": "一行两个正整数 $n,k$。", "outputFormat": "一行一个整数表示答案。\n\n由于答案可能很大，你需要将它对 $998244353$ 取模。", "hint": "【样例解释】\n\n- $p=\\{1,2,3\\}$，$f(p)=\\{2,3\\}$，则 $w(f(p))=2$。\n- $p=\\{1,3,2\\}$，$f(p)=\\{3,3\\}$，则 $w(f(p))=1$。\n- $p=\\{2,1,3\\}$，$f(p)=\\{2,3\\}$，则 $w(f(p))=2$。\n- $p=\\{2,3,1\\}$，$f(p)=\\{3,3\\}$，则 $w(f(p))=1$。\n- $p=\\{3,1,2\\}$，$f(p)=\\{3,2\\}$，则 $w(f(p))=2$。\n- $p=\\{3,2,1\\}$，$f(p)=\\{3,2\\}$，则 $w(f(p))=2$。\n\n答案为 $2+1+2+1+2+2=10$。 \n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（10pts）：$n \\le 8$。\n- Subtask 2（10pts）：$n \\le 11$。\n- Subtask 3（30pts）：$n \\le 100$。\n- Subtask 4（20pts）：$n \\le 400$。\n- Subtask 5（20pts）：$n \\le 4000$。\n- Subtask 6（10pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le k \\le n \\le  5 \\times 10^5$。\n\n【提示】\n\n1. $p$ 是一个长度为 $n$ 的排列，当且仅当每个在 $[1,n]$ 中的整数都在 $p$ 中**恰好出现了一次**。\n例如，$\\{1,5,3,2,4\\}$ 与 $\\{4,2,1,3\\}$ 分别是长度为 $5,4$ 的排列，而 $\\{1,2,2\\}$ 不是长度为 $3$ 的排列，$\\{5,4,3,2,1\\}$ 不是长度为 $6$ 的排列，$\\{1.5,3,1\\}$ 不是长度为 $3$ 的排列。\n\n2. 本题并不难。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-4」排列变换", "background": "", "description": "给定常数 $k$。对于一个长度为 $n$ 的**排列** $a$，定义\n\n$$f(a)=\\{\\max_{1 \\le i \\le k} \\{a_i\\},\\max_{2 \\le i \\le k+1} \\{a_i\\},\\cdots,\\max_{n-k+1 \\le i \\le n} \\{a_i\\}\\}$$\n\n对于一个长度为 $n$ 的**序列** $a$，定义其权值 $w(a)$ 为 $a$ 中不同的数的个数。\n\n现在，$\\text{ducati}$ 想知道，对于所有长度为 $n$ 的排列 $p$，它们的 $w(f(p))$ 之和。", "inputFormat": "一行两个正整数 $n,k$。", "outputFormat": "一行一个整数表示答案。\n\n由于答案可能很大，你需要将它对 $998244353$ 取模。", "hint": "【样例解释】\n\n- $p=\\{1,2,3\\}$，$f(p)=\\{2,3\\}$，则 $w(f(p))=2$。\n- $p=\\{1,3,2\\}$，$f(p)=\\{3,3\\}$，则 $w(f(p))=1$。\n- $p=\\{2,1,3\\}$，$f(p)=\\{2,3\\}$，则 $w(f(p))=2$。\n- $p=\\{2,3,1\\}$，$f(p)=\\{3,3\\}$，则 $w(f(p))=1$。\n- $p=\\{3,1,2\\}$，$f(p)=\\{3,2\\}$，则 $w(f(p))=2$。\n- $p=\\{3,2,1\\}$，$f(p)=\\{3,2\\}$，则 $w(f(p))=2$。\n\n答案为 $2+1+2+1+2+2=10$。 \n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（10pts）：$n \\le 8$。\n- Subtask 2（10pts）：$n \\le 11$。\n- Subtask 3（30pts）：$n \\le 100$。\n- Subtask 4（20pts）：$n \\le 400$。\n- Subtask 5（20pts）：$n \\le 4000$。\n- Subtask 6（10pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le k \\le n \\le  5 \\times 10^5$。\n\n【提示】\n\n1. $p$ 是一个长度为 $n$ 的排列，当且仅当每个在 $[1,n]$ 中的整数都在 $p$ 中**恰好出现了一次**。\n例如，$\\{1,5,3,2,4\\}$ 与 $\\{4,2,1,3\\}$ 分别是长度为 $5,4$ 的排列，而 $\\{1,2,2\\}$ 不是长度为 $3$ 的排列，$\\{5,4,3,2,1\\}$ 不是长度为 $6$ 的排列，$\\{1.5,3,1\\}$ 不是长度为 $3$ 的排列。\n\n2. 本题并不难。", "locale": "zh-CN"}}}
{"pid": "P7323", "type": "P", "difficulty": 6, "samples": [["4 5 1\n4 3 1\n4 1 1\n4 2 1\n1 3 1\n2 1 1\n", "3\n"], ["6 8 2\n6 1 2\n3 5 1\n1 2 2\n5 1 2\n3 6 2\n4 3 1\n6 2 2\n3 2 1\n", "10\n"], ["见附件中的 bracket/bracket3.in", "见附件中的 bracket/bracket3.ans"], ["见附件中的 bracket/bracket4.in", "见附件中的 bracket/bracket4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "并查集", "2021", "Ad-hoc", "线段树合并", "WC", "启发式合并"], "title": "[WC2021] 括号路径", "background": "", "description": "给定一张 $n$ 个点 $2 m$ 条边的有向图，图中的每条边上都有一个标记，代表一个左括号或者右括号。共有 $k$ 种不同的括号类型，即图中可能有 $2 k$ 种不同的标记。点、边、括号种类均从 $1$ 开始编号。\n\n图中的每条边都会和另一条边成对出现。更具体地，若图中存在一条标有第 $w$ 种括号的左括号的边 $(u, v)$，则图中一定存在一条标有第 $w$ 种括号的右括号的边 $(v, u)$。同样地，图中每条标有右括号的边将对应着一条反方向的标有同类型左括号的边。\n\n现在请你求出，图中共有多少个点对 $(x, y)$（$1 \\le x < y \\le n$）满足：图中存在一条从 $x$ 出发到达 $y$ 的路径，且按经过顺序将路径各条边上的标记拼接得到的字符串是一个合法的括号序列。", "inputFormat": "第一行三个整数 $n, m, k$，分别表示图中的点数，边对数和括号类型数。\n\n接下来 $m$ 行，每行三个整数 $u, v, w$，表示一条从 $u$ 到 $v$ 的有向边，其标记为第 $w$ 种括号的左括号；以及一条从 $v$ 到 $u$ 的有向边，其标记为第 $w$ 种括号的右括号。\n\n输入给出的图中，任意两个不同的顶点间可以有多条有向边相连，但图中不存在连向自身的有向边，即 $u \\ne v$。", "outputFormat": "输出仅一行一个整数，表示满足条件的点对数量。", "hint": "**【样例解释 #1】**\n\n符合条件的点对及其对应的路径为：\n\n$(1, 2)$：$1 \\to 3 \\to 4 \\to 1 \\to 2$。  \n$(1, 4)$：$1 \\to 3 \\to 4$。  \n$(2, 4)$：$2 \\to 1 \\to 4$。\n\n**【数据范围】**\n\n对于所有测试点：$1 \\le n \\le 3 \\times {10}^5$，$1 \\le m \\le 6 \\times {10}^5$，$1 \\le k, u, v \\le n$，$1 \\le w \\le k$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n =$ | $m \\le$ | $k \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $4$ | $5$ | $2$ | 无 |\n| $5 \\sim 8$ | $8$ | $10$ | $2$ | 无 |\n| $9 \\sim 12$ | $3000$ | $6000$ | $1$ | 无 |\n| $13 \\sim 16$ | $3000$ | $n - 1$ | $n$ | 不存在仅由带左括号标记的边构成的环 |\n| $17 \\sim 20$ | $3 \\times {10}^5$ | $n - 1$ | $n$ | 不存在仅由带左括号标记的边构成的环 |\n| $21 \\sim 25$ | $3 \\times {10}^5$ | $6 \\times {10}^5$ | $n$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2021] 括号路径", "background": "", "description": "给定一张 $n$ 个点 $2 m$ 条边的有向图，图中的每条边上都有一个标记，代表一个左括号或者右括号。共有 $k$ 种不同的括号类型，即图中可能有 $2 k$ 种不同的标记。点、边、括号种类均从 $1$ 开始编号。\n\n图中的每条边都会和另一条边成对出现。更具体地，若图中存在一条标有第 $w$ 种括号的左括号的边 $(u, v)$，则图中一定存在一条标有第 $w$ 种括号的右括号的边 $(v, u)$。同样地，图中每条标有右括号的边将对应着一条反方向的标有同类型左括号的边。\n\n现在请你求出，图中共有多少个点对 $(x, y)$（$1 \\le x < y \\le n$）满足：图中存在一条从 $x$ 出发到达 $y$ 的路径，且按经过顺序将路径各条边上的标记拼接得到的字符串是一个合法的括号序列。", "inputFormat": "第一行三个整数 $n, m, k$，分别表示图中的点数，边对数和括号类型数。\n\n接下来 $m$ 行，每行三个整数 $u, v, w$，表示一条从 $u$ 到 $v$ 的有向边，其标记为第 $w$ 种括号的左括号；以及一条从 $v$ 到 $u$ 的有向边，其标记为第 $w$ 种括号的右括号。\n\n输入给出的图中，任意两个不同的顶点间可以有多条有向边相连，但图中不存在连向自身的有向边，即 $u \\ne v$。", "outputFormat": "输出仅一行一个整数，表示满足条件的点对数量。", "hint": "**【样例解释 #1】**\n\n符合条件的点对及其对应的路径为：\n\n$(1, 2)$：$1 \\to 3 \\to 4 \\to 1 \\to 2$。  \n$(1, 4)$：$1 \\to 3 \\to 4$。  \n$(2, 4)$：$2 \\to 1 \\to 4$。\n\n**【数据范围】**\n\n对于所有测试点：$1 \\le n \\le 3 \\times {10}^5$，$1 \\le m \\le 6 \\times {10}^5$，$1 \\le k, u, v \\le n$，$1 \\le w \\le k$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n =$ | $m \\le$ | $k \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $4$ | $5$ | $2$ | 无 |\n| $5 \\sim 8$ | $8$ | $10$ | $2$ | 无 |\n| $9 \\sim 12$ | $3000$ | $6000$ | $1$ | 无 |\n| $13 \\sim 16$ | $3000$ | $n - 1$ | $n$ | 不存在仅由带左括号标记的边构成的环 |\n| $17 \\sim 20$ | $3 \\times {10}^5$ | $n - 1$ | $n$ | 不存在仅由带左括号标记的边构成的环 |\n| $21 \\sim 25$ | $3 \\times {10}^5$ | $6 \\times {10}^5$ | $n$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P7324", "type": "P", "difficulty": 7, "samples": [["2 3\n3 1\n2 2\n2 3\n1>2?0\n", "9\n"], ["3 3\n4 3 2\n2 3 1\n2 3 3\n1?0>2?0\n", "36\n"], ["5 3\n354 321 414 205 257\n458 996 554 635 730\n681 374 903 966 349\n2<0>2<0>(1>2)>(0<0)\n", "4276\n"], ["见附件中的 expr/expr4.in", "见附件中的 expr/expr4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "WC"], "title": "[WC2021] 表达式求值", "background": "", "description": "定义二元操作符 `<`：对于两个长度都为 $n$ 的数组 $A, B$（下标从 $1$ 到 $n$），$A$`<`$B$ 的结果也是一个长度为 $n$ 的数组，记为 $C$。则有 $C[i] = \\min(A[i], B[i])$（$1 \\le i \\le n$）。\n\n定义二元操作符 `>`：对于两个长度都为 $n$ 的数组 $A, B$（下标从 $1$ 到 $n$），$A$`>`$B$ 的结果也是一个长度为 $n$ 的数组，记为 $C$。则有 $C[i] = \\max(A[i], B[i])$（$1 \\le i \\le n$）。\n\n现在有 $m$（$1 \\le m \\le 10$）个长度均为 $n$ 的整数数组 $A_0, A_1, \\ldots , A_{m-1}$。给定一个待计算的表达式 $E$，其满足 $E$ 中出现的每个操作数都是 $A_0, A_1, \\ldots , A_{m-1}$ 其中之一，且 $E$ 中只包含 `<` 和 `>` 两种操作符（`<` 和 `>` 的运算优先级相同），因此该表达式的结果值也将是一个长度为 $n$ 的数组。\n\n特殊地，表达式 $E$ 中还可能出现操作符 `?`，它表示该运算符可能是 `<` 也可能是 `>`。因此若表达式中有 $t$ 个 `?`，则该表达式可生成 $2^t$ 个可求确定值的表达式，从而可以得到 $2^t$ 个结果值，你的任务就是求出这 $2^t$ 个结果值（每个结果都是一个数组）中所有的元素的和。你只需要给出所有元素之和对 ${10}^9 + 7$ 取模后的值。", "inputFormat": "第一行两个整数 $n, m$，分别表示数组长度与数组个数。\n\n第 $2 \\sim m + 1$ 行每行 $n$ 个用空格分隔的整数，第 $i$ 行第 $j$ 个元素代表 $A_{i-2}[j]$（$2 \\le i \\le m + 1$，$1 \\le j \\le n$）。\n\n最后一行一个字符串 $S$，表示表达式 $E$。$S$ 中只包含字符 `0` 到 `9`、`(`、`)`、`<`、`>`、`?`，数字字符表示操作数的下标，例如字符 `2` 表示表达式中的操作数为 $A_2$。", "outputFormat": "仅一行一个整数，表示所有 $2^t$ 个表达式的结果，它们的元素之和模 ${10}^9 + 7$ 的值。", "hint": "**【样例解释 #1】**\n\n表达式 $E$ 生成的算式有：\n\n1. $A_1$`>`$A_2$`<`$A_0$，其结果为 $[2, 1]$。\n2. $A_1$`>`$A_2$`>`$A_0$，其结果为 $[3, 3]$。\n\n答案为 $2 + 1 + 3 + 3 = 9$。\n\n**【数据范围】**\n\n对于所有测试点：$1 \\le n \\le 5 \\times {10}^4$，$1 \\le m \\le 10$，$|S| \\le 5 \\times {10}^4$，$1 \\le A_i[j] \\le {10}^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | $\\vert E \\vert \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $5$ | $10$ | $S$ 中不包含左右括号和问号 |\n| $5 \\sim 7$ | $10$ | $100$ | $S$ 中不包含问号 |\n| $8 \\sim 9$ | $2$ | $5000$ | $S$ 中不包含左右括号 |\n| $10 \\sim 11$ | $2$ | $5000$ | 无 |\n| $12 \\sim 14$ | $5000$ | $5000$ | $S$ 中不包含问号 |\n| $15 \\sim 17$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | $S$ 中不包含问号 |\n| $18 \\sim 20$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2021] 表达式求值", "background": "", "description": "定义二元操作符 `<`：对于两个长度都为 $n$ 的数组 $A, B$（下标从 $1$ 到 $n$），$A$`<`$B$ 的结果也是一个长度为 $n$ 的数组，记为 $C$。则有 $C[i] = \\min(A[i], B[i])$（$1 \\le i \\le n$）。\n\n定义二元操作符 `>`：对于两个长度都为 $n$ 的数组 $A, B$（下标从 $1$ 到 $n$），$A$`>`$B$ 的结果也是一个长度为 $n$ 的数组，记为 $C$。则有 $C[i] = \\max(A[i], B[i])$（$1 \\le i \\le n$）。\n\n现在有 $m$（$1 \\le m \\le 10$）个长度均为 $n$ 的整数数组 $A_0, A_1, \\ldots , A_{m-1}$。给定一个待计算的表达式 $E$，其满足 $E$ 中出现的每个操作数都是 $A_0, A_1, \\ldots , A_{m-1}$ 其中之一，且 $E$ 中只包含 `<` 和 `>` 两种操作符（`<` 和 `>` 的运算优先级相同），因此该表达式的结果值也将是一个长度为 $n$ 的数组。\n\n特殊地，表达式 $E$ 中还可能出现操作符 `?`，它表示该运算符可能是 `<` 也可能是 `>`。因此若表达式中有 $t$ 个 `?`，则该表达式可生成 $2^t$ 个可求确定值的表达式，从而可以得到 $2^t$ 个结果值，你的任务就是求出这 $2^t$ 个结果值（每个结果都是一个数组）中所有的元素的和。你只需要给出所有元素之和对 ${10}^9 + 7$ 取模后的值。", "inputFormat": "第一行两个整数 $n, m$，分别表示数组长度与数组个数。\n\n第 $2 \\sim m + 1$ 行每行 $n$ 个用空格分隔的整数，第 $i$ 行第 $j$ 个元素代表 $A_{i-2}[j]$（$2 \\le i \\le m + 1$，$1 \\le j \\le n$）。\n\n最后一行一个字符串 $S$，表示表达式 $E$。$S$ 中只包含字符 `0` 到 `9`、`(`、`)`、`<`、`>`、`?`，数字字符表示操作数的下标，例如字符 `2` 表示表达式中的操作数为 $A_2$。", "outputFormat": "仅一行一个整数，表示所有 $2^t$ 个表达式的结果，它们的元素之和模 ${10}^9 + 7$ 的值。", "hint": "**【样例解释 #1】**\n\n表达式 $E$ 生成的算式有：\n\n1. $A_1$`>`$A_2$`<`$A_0$，其结果为 $[2, 1]$。\n2. $A_1$`>`$A_2$`>`$A_0$，其结果为 $[3, 3]$。\n\n答案为 $2 + 1 + 3 + 3 = 9$。\n\n**【数据范围】**\n\n对于所有测试点：$1 \\le n \\le 5 \\times {10}^4$，$1 \\le m \\le 10$，$|S| \\le 5 \\times {10}^4$，$1 \\le A_i[j] \\le {10}^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | $\\vert E \\vert \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $5$ | $10$ | $S$ 中不包含左右括号和问号 |\n| $5 \\sim 7$ | $10$ | $100$ | $S$ 中不包含问号 |\n| $8 \\sim 9$ | $2$ | $5000$ | $S$ 中不包含左右括号 |\n| $10 \\sim 11$ | $2$ | $5000$ | 无 |\n| $12 \\sim 14$ | $5000$ | $5000$ | $S$ 中不包含问号 |\n| $15 \\sim 17$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | $S$ 中不包含问号 |\n| $18 \\sim 20$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P7325", "type": "P", "difficulty": 7, "samples": [["4 5\n0 1\n1 2\n2 3\n3 4\n", "0\n3\n2\n-1\n"], ["1 6\n4 4\n", "3\n"], ["见附件中的 fib/fib3.in", "见附件中的 fib/fib3.ans"], ["见附件中的 fib/fib4.in", "见附件中的 fib/fib4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "WC"], "title": "[WC2021] 斐波那契", "background": "", "description": "众所周知，小葱同学擅长计算，尤其擅长计算组合数。但是对组合数有了充分研究的小葱同学对组合数失去了兴趣，而开始研究数列。\n\n我们定义 $F_0 = a$，$F_1 = b$，$F_i = (F_{i-1} + F_{i-2}) \\bmod m$（$i \\ge 2$）。\n\n现在给定 $n$ 组询问，对于每组询问请找到一个最小的整数 $p$，使得 $F_p = 0$。", "inputFormat": "第一行两个整数 $n, m$，代表询问的组数和每组计算中的模数。\n\n接下来 $n$ 行每行两个整数 $a, b$，代表一组询问中 $F_0$ 和 $F_1$ 的值。", "outputFormat": "对于每组询问，输出一行一个整数 $p$ 代表答案。如果这样的 $p$ 不存在，输出 `-1`。", "hint": "**【数据范围】**\n\n对于所有测试点：$1 \\le n, m \\le {10}^5$，$0 \\le a, b < m$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n, m \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $1000$ | 无 |\n| $3 \\sim 4$ | ${10}^5$ | $m$ 是质数 |\n| $5 \\sim 6$ | ${10}^5$ | $m = p_1 p_2 \\cdots p_k$，其中 $p_i$ 是两两不同的质数 |\n| $7 \\sim 10$ | ${10}^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2021] 斐波那契", "background": "", "description": "众所周知，小葱同学擅长计算，尤其擅长计算组合数。但是对组合数有了充分研究的小葱同学对组合数失去了兴趣，而开始研究数列。\n\n我们定义 $F_0 = a$，$F_1 = b$，$F_i = (F_{i-1} + F_{i-2}) \\bmod m$（$i \\ge 2$）。\n\n现在给定 $n$ 组询问，对于每组询问请找到一个最小的整数 $p$，使得 $F_p = 0$。", "inputFormat": "第一行两个整数 $n, m$，代表询问的组数和每组计算中的模数。\n\n接下来 $n$ 行每行两个整数 $a, b$，代表一组询问中 $F_0$ 和 $F_1$ 的值。", "outputFormat": "对于每组询问，输出一行一个整数 $p$ 代表答案。如果这样的 $p$ 不存在，输出 `-1`。", "hint": "**【数据范围】**\n\n对于所有测试点：$1 \\le n, m \\le {10}^5$，$0 \\le a, b < m$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n, m \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $1000$ | 无 |\n| $3 \\sim 4$ | ${10}^5$ | $m$ 是质数 |\n| $5 \\sim 6$ | ${10}^5$ | $m = p_1 p_2 \\cdots p_k$，其中 $p_i$ 是两两不同的质数 |\n| $7 \\sim 10$ | ${10}^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P7326", "type": "P", "difficulty": 5, "samples": [["8\n0 1 ^ 2 3 ! & |\n7\n1 9 1 9 8 1 0", "1111010"], ["23\n0 ! ! 3 0 3 ^ ^ 3 | & 1 ! ^ 2 0 ! 3 ^ ! ^ ! ^\n20\n11 10 4 8 13 7 2 5 11 9 16 15 6 9 7 8 15 0 2 10", "00110011010101011010"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["O2优化", "栈", "位运算", "bitset"], "title": "「MCOI-07」Dream and Evaluation", "background": "", "description": "George 在学位运算。他编了一个位运算表达式，但是他不会高效计算这个表达式的值，于是他找 Dream 帮他计算。  \nGeorge 的表达式有 $64$ 个 01 变量，分别编号为 $0$ 到 $63$。他提供了该表达式的[后缀表示法](https://baike.baidu.com/item/%E5%90%8E%E7%BC%80%E8%A1%A8%E7%A4%BA%E6%B3%95/20835385?fr=aladdin)。  \n后缀表示法里可能含有以下符号：\n\n - $0,1,\\dots,63$，代表对应变量\n - `!&|^`，代表对应位运算\n\n现在 Dream 有 $m$ 个情况。每一个情况固定所有 $64$ 个变量的值。他需要你对每一个情况计算给定表达式的值。  \n为了方便输入，这些情况进行压缩。定义 $a_{i,j}$ 为第 $i$ 情况里的第 $j$ 变量值，其中 $a_{i,j}\\in\\{0,1\\}$；他会给你\n\n$$b_i=\\sum_{j=0}^{63}a_{i,j}2^j$$\n\n可以证明，如果 $0\\le b_i<2^{64}$，则 $b_i$ 唯一对应一组 $a_{i,0},a_{i,1},\\dots,a_{i,63}$。", "inputFormat": "第一行一个正整数 $n$，表示后缀表示法的长度。  \n接下来一行 $n$ 个符号，表示 George 的表达式。  \n接下来一行一个正整数 $m$。  \n接下来一行 $m$ 个整数，依次代表 $b_1,b_2,\\dots,b_m$。", "outputFormat": "输出 $m$ 个 01 字符，其中第 $i$ 输出字符代表第 $i$ 情况时，表达式的值。", "hint": "#### 样例 1 解释\n\n如果 $x=1$，则变量 $0$ 为 $1$，其余变量为 $0$。  \n如果 $x=9$，则仅变量 $0$ 和 $3$ 为 $1$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（7 pts）：$n,m\\le10^3$。  \n - Subtask 2（11 pts）：$b_i\\in[0,2^{8}-1]$。\n - Subtask 3（41 pts）：$n,m\\le5\\times10^4$。\n - Subtask 4（41 pts）：没有额外限制。\n\n对于所有数据，$1\\le n,m\\le10^5$，$0\\le b_i<2^{64}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-07」Dream and Evaluation", "background": "", "description": "George 在学位运算。他编了一个位运算表达式，但是他不会高效计算这个表达式的值，于是他找 Dream 帮他计算。  \nGeorge 的表达式有 $64$ 个 01 变量，分别编号为 $0$ 到 $63$。他提供了该表达式的[后缀表示法](https://baike.baidu.com/item/%E5%90%8E%E7%BC%80%E8%A1%A8%E7%A4%BA%E6%B3%95/20835385?fr=aladdin)。  \n后缀表示法里可能含有以下符号：\n\n - $0,1,\\dots,63$，代表对应变量\n - `!&|^`，代表对应位运算\n\n现在 Dream 有 $m$ 个情况。每一个情况固定所有 $64$ 个变量的值。他需要你对每一个情况计算给定表达式的值。  \n为了方便输入，这些情况进行压缩。定义 $a_{i,j}$ 为第 $i$ 情况里的第 $j$ 变量值，其中 $a_{i,j}\\in\\{0,1\\}$；他会给你\n\n$$b_i=\\sum_{j=0}^{63}a_{i,j}2^j$$\n\n可以证明，如果 $0\\le b_i<2^{64}$，则 $b_i$ 唯一对应一组 $a_{i,0},a_{i,1},\\dots,a_{i,63}$。", "inputFormat": "第一行一个正整数 $n$，表示后缀表示法的长度。  \n接下来一行 $n$ 个符号，表示 George 的表达式。  \n接下来一行一个正整数 $m$。  \n接下来一行 $m$ 个整数，依次代表 $b_1,b_2,\\dots,b_m$。", "outputFormat": "输出 $m$ 个 01 字符，其中第 $i$ 输出字符代表第 $i$ 情况时，表达式的值。", "hint": "#### 样例 1 解释\n\n如果 $x=1$，则变量 $0$ 为 $1$，其余变量为 $0$。  \n如果 $x=9$，则仅变量 $0$ 和 $3$ 为 $1$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（7 pts）：$n,m\\le10^3$。  \n - Subtask 2（11 pts）：$b_i\\in[0,2^{8}-1]$。\n - Subtask 3（41 pts）：$n,m\\le5\\times10^4$。\n - Subtask 4（41 pts）：没有额外限制。\n\n对于所有数据，$1\\le n,m\\le10^5$，$0\\le b_i<2^{64}$。", "locale": "zh-CN"}}}
{"pid": "P7327", "type": "P", "difficulty": 6, "samples": [["2\n1 2", "920000007"], ["3\n1 1 2", "480000004"], ["5\n1 2 1 3 2", "734081639"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["数论", "O2优化", "组合数学", "排列组合", "容斥原理"], "title": "「MCOI-07」Dream and Discs", "background": "**均匀随机** 指对所有可行的结果随机选一个结果，其中所有可行结果等概率被选择。", "description": "Dream 有 $n$ 片音乐盘，编号为 $1$ 到 $n$。所有盘都存恰好一首歌，其中编号为 $i$ 的盘所存储歌由正整数 $a_i$ 表示。$a_i$ 满足 $1\\le a_i\\le n$。  \nDream 打算**均匀随机**选择一个编号区间 $P_1$ 和一个歌曲区间 $S_1$，其中 $P_1\\subseteq [1,n]$，$S_1\\subseteq [1,n]$，并且所有区间端点均为正整数。  \nDream 取完两个区间，他会选择尽量多的盘，使得盘编号在 $P_1$ 里，歌曲在 $S_1$ 里，并且所有歌曲互不相同。他准备把这集音乐盘给 Tommy。  \nDream 构造完集合发现他选了太多音乐盘，决定由以上选区间方法再次**均匀随机**选取两个区间 $P_2$ 和 $S_2$，其中 $P_2\\subseteq P_1$ 并 $S_2\\subseteq S_1$。这次，他构造的音乐盘集需要满足编号在 $P_2$ 里，歌曲在 $S_2$ 里。Dream 仍然会选尽量大，歌曲互不相同的集合。  \n**Dream 永远不会选空区间。**  \n现在 Tommy 感觉 Dream 给他的音乐盘太少了。请帮 Tommy 计算 Dream 第二次选取 **平均** 导致的集合大小减少量。  \n这里，平均对所有合法 $(P_1,S_1,P_2,S_2)$ 选取方案等权重平均。", "inputFormat": "第一行一个正整数 $n$。  \n第二行 $n$ 个正整数，依次表示 $a_1,a_2,\\dots,a_n$。", "outputFormat": "假设答案可以表示为 $p/q$，其中 $p$ 和 $q$ 互质。请输出 $p\\cdot q^{-1}\\pmod{10^9+7}$。", "hint": "#### 样例 1 解释\n\n - $P_1=[1,1],S_1=[1,1]$\n   - $P_2=[1,1],S_2=[1,1],\\Delta=1-1=0$\n - $P_1=[1,1],S_1=[1,2]$\n   - $P_2=[1,1],S_2=[1,1],\\Delta=1-1=0$\n   - $P_2=[1,1],S_2=[1,2],\\Delta=1-1=0$\n   - $P_2=[1,1],S_2=[2,2],\\Delta=1-0=1$\n - $P_1=[1,1],S_1=[2,2]$\n   - $P_2=[1,1],S_2=[2,2],\\Delta=0-0=0$\n - $P_1=[1,2],S_1=[1,1]$\n   - $P_2=[1,1],S_2=[1,1],\\Delta=1-1=0$\n   - $P_2=[1,2],S_2=[1,1],\\Delta=1-1=0$\n   - $P_2=[2,2],S_2=[1,1],\\Delta=1-0=1$\n - $P_1=[1,2],S_1=[1,2]$\n   - $P_2=[1,1],S_2=[1,1],\\Delta=2-1=1$\n   - $P_2=[1,1],S_2=[1,2],\\Delta=2-1=1$\n   - $P_2=[1,1],S_2=[2,2],\\Delta=2-0=2$\n   - $P_2=[1,2],S_2=[1,1],\\Delta=2-1=1$\n   - $P_2=[1,2],S_2=[1,2],\\Delta=2-2=0$\n   - $P_2=[1,2],S_2=[2,2],\\Delta=2-1=1$\n   - $P_2=[2,2],S_2=[1,1],\\Delta=2-0=2$\n   - $P_2=[2,2],S_2=[1,2],\\Delta=2-1=1$\n   - $P_2=[2,2],S_2=[2,2],\\Delta=2-1=1$\n - $P_1=[1,2],S_1=[2,2]$\n   - $P_2=[1,1],S_2=[2,2],\\Delta=1-0=1$\n   - $P_2=[1,2],S_2=[2,2],\\Delta=1-1=0$\n   - $P_2=[2,2],S_2=[2,2],\\Delta=1-1=0$\n - $P_1=[2,2],S_1=[1,1]$\n   - $P_2=[2,2],S_2=[1,1],\\Delta=0-0=0$\n - $P_1=[2,2],S_1=[1,2]$\n   - $P_2=[2,2],S_2=[1,1],\\Delta=1-0=1$\n   - $P_2=[2,2],S_2=[1,2],\\Delta=1-1=0$\n   - $P_2=[2,2],S_2=[2,2],\\Delta=1-1=0$\n - $P_1=[2,2],S_1=[2,2]$\n   - $P_2=[2,2],S_2=[2,2],\\Delta=1-1=0$\n\n总共有 $25$ 方案，所有方案减量之和为 $14$，于是答案等于 $14/25$。\n\n#### 样例 2 解释\n\n答案为 $144/225$。\n\n#### 样例 3 解释\n\n答案为 $5921/4900$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（11 pts）：$n\\le8$。\n - Subtask 2（17 pts）：$n\\le64$。\n - Subtask 3（19 pts）：$n\\le1024$。\n - Subtask 4（7 pts）：$a_i\\le 10$。\n - Subtask 5（23 pts）：$n\\le10^5$。\n - Subtask 6（23 pts）：无特殊限制。  \n\n对于所有数据，$1\\le n\\le5\\cdot10^5,1\\le a_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-07」Dream and Discs", "background": "**均匀随机** 指对所有可行的结果随机选一个结果，其中所有可行结果等概率被选择。", "description": "Dream 有 $n$ 片音乐盘，编号为 $1$ 到 $n$。所有盘都存恰好一首歌，其中编号为 $i$ 的盘所存储歌由正整数 $a_i$ 表示。$a_i$ 满足 $1\\le a_i\\le n$。  \nDream 打算**均匀随机**选择一个编号区间 $P_1$ 和一个歌曲区间 $S_1$，其中 $P_1\\subseteq [1,n]$，$S_1\\subseteq [1,n]$，并且所有区间端点均为正整数。  \nDream 取完两个区间，他会选择尽量多的盘，使得盘编号在 $P_1$ 里，歌曲在 $S_1$ 里，并且所有歌曲互不相同。他准备把这集音乐盘给 Tommy。  \nDream 构造完集合发现他选了太多音乐盘，决定由以上选区间方法再次**均匀随机**选取两个区间 $P_2$ 和 $S_2$，其中 $P_2\\subseteq P_1$ 并 $S_2\\subseteq S_1$。这次，他构造的音乐盘集需要满足编号在 $P_2$ 里，歌曲在 $S_2$ 里。Dream 仍然会选尽量大，歌曲互不相同的集合。  \n**Dream 永远不会选空区间。**  \n现在 Tommy 感觉 Dream 给他的音乐盘太少了。请帮 Tommy 计算 Dream 第二次选取 **平均** 导致的集合大小减少量。  \n这里，平均对所有合法 $(P_1,S_1,P_2,S_2)$ 选取方案等权重平均。", "inputFormat": "第一行一个正整数 $n$。  \n第二行 $n$ 个正整数，依次表示 $a_1,a_2,\\dots,a_n$。", "outputFormat": "假设答案可以表示为 $p/q$，其中 $p$ 和 $q$ 互质。请输出 $p\\cdot q^{-1}\\pmod{10^9+7}$。", "hint": "#### 样例 1 解释\n\n - $P_1=[1,1],S_1=[1,1]$\n   - $P_2=[1,1],S_2=[1,1],\\Delta=1-1=0$\n - $P_1=[1,1],S_1=[1,2]$\n   - $P_2=[1,1],S_2=[1,1],\\Delta=1-1=0$\n   - $P_2=[1,1],S_2=[1,2],\\Delta=1-1=0$\n   - $P_2=[1,1],S_2=[2,2],\\Delta=1-0=1$\n - $P_1=[1,1],S_1=[2,2]$\n   - $P_2=[1,1],S_2=[2,2],\\Delta=0-0=0$\n - $P_1=[1,2],S_1=[1,1]$\n   - $P_2=[1,1],S_2=[1,1],\\Delta=1-1=0$\n   - $P_2=[1,2],S_2=[1,1],\\Delta=1-1=0$\n   - $P_2=[2,2],S_2=[1,1],\\Delta=1-0=1$\n - $P_1=[1,2],S_1=[1,2]$\n   - $P_2=[1,1],S_2=[1,1],\\Delta=2-1=1$\n   - $P_2=[1,1],S_2=[1,2],\\Delta=2-1=1$\n   - $P_2=[1,1],S_2=[2,2],\\Delta=2-0=2$\n   - $P_2=[1,2],S_2=[1,1],\\Delta=2-1=1$\n   - $P_2=[1,2],S_2=[1,2],\\Delta=2-2=0$\n   - $P_2=[1,2],S_2=[2,2],\\Delta=2-1=1$\n   - $P_2=[2,2],S_2=[1,1],\\Delta=2-0=2$\n   - $P_2=[2,2],S_2=[1,2],\\Delta=2-1=1$\n   - $P_2=[2,2],S_2=[2,2],\\Delta=2-1=1$\n - $P_1=[1,2],S_1=[2,2]$\n   - $P_2=[1,1],S_2=[2,2],\\Delta=1-0=1$\n   - $P_2=[1,2],S_2=[2,2],\\Delta=1-1=0$\n   - $P_2=[2,2],S_2=[2,2],\\Delta=1-1=0$\n - $P_1=[2,2],S_1=[1,1]$\n   - $P_2=[2,2],S_2=[1,1],\\Delta=0-0=0$\n - $P_1=[2,2],S_1=[1,2]$\n   - $P_2=[2,2],S_2=[1,1],\\Delta=1-0=1$\n   - $P_2=[2,2],S_2=[1,2],\\Delta=1-1=0$\n   - $P_2=[2,2],S_2=[2,2],\\Delta=1-1=0$\n - $P_1=[2,2],S_1=[2,2]$\n   - $P_2=[2,2],S_2=[2,2],\\Delta=1-1=0$\n\n总共有 $25$ 方案，所有方案减量之和为 $14$，于是答案等于 $14/25$。\n\n#### 样例 2 解释\n\n答案为 $144/225$。\n\n#### 样例 3 解释\n\n答案为 $5921/4900$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（11 pts）：$n\\le8$。\n - Subtask 2（17 pts）：$n\\le64$。\n - Subtask 3（19 pts）：$n\\le1024$。\n - Subtask 4（7 pts）：$a_i\\le 10$。\n - Subtask 5（23 pts）：$n\\le10^5$。\n - Subtask 6（23 pts）：无特殊限制。  \n\n对于所有数据，$1\\le n\\le5\\cdot10^5,1\\le a_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P7328", "type": "P", "difficulty": 6, "samples": [["3 8 3\n108 75\n616 36\n220 16\n37 66\n114 64\n514 24\n1919 65\n810 33\n19260817\n123456789\n23333333\n", "3\n79\n49"], ["请见附件 sample.in", "请见附件 sample.out"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["O2优化"], "title": "「MCOI-07」Dream and Machine Learning", "background": "", "description": "Dream 构造了一个红石计算机来验证 $b^e\\equiv r\\pmod m$ 形式的公式。  \nDream 固定了 $b$ 和 $m$ 并且构造了 $n$ 对满足以上条件的 $(e,r)$ 正整数对。  \n可惜，Dream 忘记了 $m$ 的具体值。现在他给了你 $b$ 和这 $n$ 对数。请替代 Dream 的计算机，回答 $q$ 组 $b^{a_i}\\pmod m$ 形式的询问。", "inputFormat": "第一行三个正整数，分别代表 $b$，$n$，和 $q$。  \n接下来 $n$ 行，每行两个正整数，分别代表一对 $e$ 和 $r$。  \n接下来 $q$ 行，每行一个正整数，代表一个 $a_i$。", "outputFormat": "输出 $q$ 行，对应询问的答案。", "hint": "#### 样例 1 解释\n\n可以唯一确定 $m=97$。  \n样例 1 仅仅说明题意，并不代表任何 subtask 的任何测试点。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（5 pts）：$m\\le10^3$\n - Subtask 2（19 pts）：$m\\le10^9$\n - Subtask 3（19 pts）：$m\\le10^{19}$\n - Subtask 4（19 pts）：$m\\le10^{29}$\n - Subtask 5（19 pts）：$m\\le10^{99}$\n - Subtask 6（19 pts）：$m\\le10^{199}$\n\n对于 $100\\%$ 的数据，$b\\in\\{2,3\\}$，$1\\le q\\le100$，$2\\le e,a_i\\le 10^9$，$n=10^5$。  \n**保证** $m$ 为质数。  \n**保证** 所有 $e$ 互不相同。  \n**保证** 数据随机。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-07」Dream and Machine Learning", "background": "", "description": "Dream 构造了一个红石计算机来验证 $b^e\\equiv r\\pmod m$ 形式的公式。  \nDream 固定了 $b$ 和 $m$ 并且构造了 $n$ 对满足以上条件的 $(e,r)$ 正整数对。  \n可惜，Dream 忘记了 $m$ 的具体值。现在他给了你 $b$ 和这 $n$ 对数。请替代 Dream 的计算机，回答 $q$ 组 $b^{a_i}\\pmod m$ 形式的询问。", "inputFormat": "第一行三个正整数，分别代表 $b$，$n$，和 $q$。  \n接下来 $n$ 行，每行两个正整数，分别代表一对 $e$ 和 $r$。  \n接下来 $q$ 行，每行一个正整数，代表一个 $a_i$。", "outputFormat": "输出 $q$ 行，对应询问的答案。", "hint": "#### 样例 1 解释\n\n可以唯一确定 $m=97$。  \n样例 1 仅仅说明题意，并不代表任何 subtask 的任何测试点。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（5 pts）：$m\\le10^3$\n - Subtask 2（19 pts）：$m\\le10^9$\n - Subtask 3（19 pts）：$m\\le10^{19}$\n - Subtask 4（19 pts）：$m\\le10^{29}$\n - Subtask 5（19 pts）：$m\\le10^{99}$\n - Subtask 6（19 pts）：$m\\le10^{199}$\n\n对于 $100\\%$ 的数据，$b\\in\\{2,3\\}$，$1\\le q\\le100$，$2\\le e,a_i\\le 10^9$，$n=10^5$。  \n**保证** $m$ 为质数。  \n**保证** 所有 $e$ 互不相同。  \n**保证** 数据随机。", "locale": "zh-CN"}}}
{"pid": "P7329", "type": "P", "difficulty": 6, "samples": [["2 2 2 22\n\n222", "\n? 2 2\n\n! 2 2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["交互题", "Special Judge", "O2优化"], "title": "「MCOI-07」Dream and More Discs", "background": "**本题为 IO 交互题。**", "description": "Dream 将 Tommy 的所有音乐盘分为 $n$ 类，其中第 $i$ 类有 $2^m-1$ 片音乐盘。所有盘都有一个唯一的正整数重要度。  \n现在 Dream 已经把所有类之内的音乐盘按照重要度递增排序。Dream 想知道**所有**盘中重要度第 $k$ 小是哪个盘。\n\n由于音乐盘数量实在太多，Dream 不能直接给你所有音乐盘的重要度。在寻找答案时，Dream 允许你访问第 $i$ 类重要度第 $j$ 小的盘重要度值。", "inputFormat": "交互开始时，评测机输入第一行为四个正整数 $n$，$m$，$k$，和 $Th$，其中 $Th$ 为最多应用访问次数。  \n每一次访问，评测机会回复所访问位置的音乐盘重要度。", "outputFormat": "你的程序可以进行两个操作：\n\n 1. `? i j`，表示访问第 $i$ 类型第 $j$ 小音乐盘重要度。评测机会回复这位置重要度。\n 2. `! i j`，表示报告全局第 $k$ 小音乐盘为第 $i$ 类的第 $j$ 小音乐盘。", "hint": "#### 样例 1 解释\n\nDream 的音乐盘重要度为 $[[2222,22222,222222],[22,222,2222222]]$。  \n第 2 类型为 $[22,222]$；第 2 类型的第 2 小重要度为 $222$。  \n全局第 2 小重要度也是这音乐盘。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n|  Subtask | 分值 | $n$ | $m$ | $k$ | $Th$ |\n| ----------- | ----------- | ----------- | ----------- | ----------- | ----------- |\n| 1 | 1 pts | $1$ | $1$| $1$| $15,000$ |\n| 2 | 9 pts | $50$ | $8$ | 无 | $15,000$ |\n| 3 | 19 pts | $20$ | $11$ | 无 | $15,000$ |\n| 4 | 17 pts | $50$ | $11$ | 无 | $6,666$ |\n| 5 | 23 pts | $50$ | $11$ | 无 | $2,333$ |\n| 6 | 31 pts | $50$ | $11$ | 无 | $1,111$ |\n\n对于所有数据，$1\\le k\\le n(2^m-1)$，所有音乐盘的重要度互不相同并且小于等于 $10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-07」Dream and More Discs", "background": "**本题为 IO 交互题。**", "description": "Dream 将 Tommy 的所有音乐盘分为 $n$ 类，其中第 $i$ 类有 $2^m-1$ 片音乐盘。所有盘都有一个唯一的正整数重要度。  \n现在 Dream 已经把所有类之内的音乐盘按照重要度递增排序。Dream 想知道**所有**盘中重要度第 $k$ 小是哪个盘。\n\n由于音乐盘数量实在太多，Dream 不能直接给你所有音乐盘的重要度。在寻找答案时，Dream 允许你访问第 $i$ 类重要度第 $j$ 小的盘重要度值。", "inputFormat": "交互开始时，评测机输入第一行为四个正整数 $n$，$m$，$k$，和 $Th$，其中 $Th$ 为最多应用访问次数。  \n每一次访问，评测机会回复所访问位置的音乐盘重要度。", "outputFormat": "你的程序可以进行两个操作：\n\n 1. `? i j`，表示访问第 $i$ 类型第 $j$ 小音乐盘重要度。评测机会回复这位置重要度。\n 2. `! i j`，表示报告全局第 $k$ 小音乐盘为第 $i$ 类的第 $j$ 小音乐盘。", "hint": "#### 样例 1 解释\n\nDream 的音乐盘重要度为 $[[2222,22222,222222],[22,222,2222222]]$。  \n第 2 类型为 $[22,222]$；第 2 类型的第 2 小重要度为 $222$。  \n全局第 2 小重要度也是这音乐盘。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n|  Subtask | 分值 | $n$ | $m$ | $k$ | $Th$ |\n| ----------- | ----------- | ----------- | ----------- | ----------- | ----------- |\n| 1 | 1 pts | $1$ | $1$| $1$| $15,000$ |\n| 2 | 9 pts | $50$ | $8$ | 无 | $15,000$ |\n| 3 | 19 pts | $20$ | $11$ | 无 | $15,000$ |\n| 4 | 17 pts | $50$ | $11$ | 无 | $6,666$ |\n| 5 | 23 pts | $50$ | $11$ | 无 | $2,333$ |\n| 6 | 31 pts | $50$ | $11$ | 无 | $1,111$ |\n\n对于所有数据，$1\\le k\\le n(2^m-1)$，所有音乐盘的重要度互不相同并且小于等于 $10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P7330", "type": "P", "difficulty": 7, "samples": [["3 3\n2 0\n1 1 108616\n2 114514", "15\n>\n>\n>\n+ 0 1\n+ 3 2\n< 4\nS 108616\nS 716372446\n* 1 6\n* 8 7\n* 7 7\n* 2 10\n+ 0 9\n+ 12 11\n< 13"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["Special Judge", "O2优化"], "title": "「MCOI-07」Dream Fourier Transform", "background": "Dream 的红石计算机升级为 Dream 平台了。  \n一个“Dream 程序”为一个在 Dream 平台下执行的程序。  \nDream 平台的内存由 $5\\times2^{17}$ 个非负整数构成，这些内存位置依次标号为 $0,1,\\dots,5\\times2^{17}-1$。初始所有内存位置均为 $0$。  \nDream 平台有一个特性：第 $x$ 运算的结果在第 $x$ 内存位置存储，其中运算从 $0$ 编号。  \nDream 程序为若干运算的有序序列，运算类型为：\n\n 1. `>`，表示输入一个非负整数，结果为输入值。\n 2. `< x`，表示输出内存位置 `x` 所含的值，结果为这个值。\n 3. `S c`，表示结果为常量非负整数 $c$，其中 $0\\le c<998244353$。\n 4. `+ x y`，表示结果为内存位置 `x` 的值 加 内存位置 `y` 的值。\n 5. `- x y`，表示结果为内存位置 `x` 的值 减 内存位置 `y` 的值。\n 6. `* x y`，表示结果为内存位置 `x` 的值 乘 内存位置 `y` 的值。\n\n其中所有运算在模 $998244353$ 意义下计算。", "description": "Dream 有一个长度为 $n$ 的序列 $a_0,a_1,\\dots,a_{n-1}$。  \n\nDream 要支持两个操作：\n\n 1. `1 i x`，表示将 $a_i$ 乘 $x$。\n 2. `2 k`，表示定 $x=63912897^k$，并且求\n\n$$\\sum_{i=0}^{n-1}a_ix^i\\pmod{998244353}$$\n\n---\n\n由战争及时，Dream 无法提供序列 $a$。他只能预测他会进行的操作。请构造一个“Dream 程序”，读入数组 $a$ 并且输出对应询问答案。  ", "inputFormat": "第一行两个正整数，分别代表 $n$ 和 $q$。  \n接下来 $q$ 行，每行描述一个操作，由 `1 i x` 或 `2 k` 格式表示。", "outputFormat": "第一行一个非负整数 $L$，代表所构造的 Dream 程序长度。  \n接下来 $L$ 行，每行描述一个运算。  \n你需要保证 $L\\le5\\times2^{17}$。", "hint": "#### 温情提示\n\n$$63912897\\equiv3^{\\frac{998244352}{2^{12}}}\\pmod{998244353}$$\n\n#### 样例解释\n\n当 Dream 程序输入为序列 `[1,2,3]`，输出为序列 `[6,347675984]`，符合要求。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（11 pts）：$n,q\\le2^8$\n - Subtask 2（19 pts）：所有询问操作在修改操作后面。\n - Subtask 3（23 pts）：$n,q\\le2^{10}$\n - Subtask 4（47 pts）：没有特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le2^{12}$，$0\\le i<n$，$0\\le x,k<998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-07」Dream Fourier Transform", "background": "Dream 的红石计算机升级为 Dream 平台了。  \n一个“Dream 程序”为一个在 Dream 平台下执行的程序。  \nDream 平台的内存由 $5\\times2^{17}$ 个非负整数构成，这些内存位置依次标号为 $0,1,\\dots,5\\times2^{17}-1$。初始所有内存位置均为 $0$。  \nDream 平台有一个特性：第 $x$ 运算的结果在第 $x$ 内存位置存储，其中运算从 $0$ 编号。  \nDream 程序为若干运算的有序序列，运算类型为：\n\n 1. `>`，表示输入一个非负整数，结果为输入值。\n 2. `< x`，表示输出内存位置 `x` 所含的值，结果为这个值。\n 3. `S c`，表示结果为常量非负整数 $c$，其中 $0\\le c<998244353$。\n 4. `+ x y`，表示结果为内存位置 `x` 的值 加 内存位置 `y` 的值。\n 5. `- x y`，表示结果为内存位置 `x` 的值 减 内存位置 `y` 的值。\n 6. `* x y`，表示结果为内存位置 `x` 的值 乘 内存位置 `y` 的值。\n\n其中所有运算在模 $998244353$ 意义下计算。", "description": "Dream 有一个长度为 $n$ 的序列 $a_0,a_1,\\dots,a_{n-1}$。  \n\nDream 要支持两个操作：\n\n 1. `1 i x`，表示将 $a_i$ 乘 $x$。\n 2. `2 k`，表示定 $x=63912897^k$，并且求\n\n$$\\sum_{i=0}^{n-1}a_ix^i\\pmod{998244353}$$\n\n---\n\n由战争及时，Dream 无法提供序列 $a$。他只能预测他会进行的操作。请构造一个“Dream 程序”，读入数组 $a$ 并且输出对应询问答案。  ", "inputFormat": "第一行两个正整数，分别代表 $n$ 和 $q$。  \n接下来 $q$ 行，每行描述一个操作，由 `1 i x` 或 `2 k` 格式表示。", "outputFormat": "第一行一个非负整数 $L$，代表所构造的 Dream 程序长度。  \n接下来 $L$ 行，每行描述一个运算。  \n你需要保证 $L\\le5\\times2^{17}$。", "hint": "#### 温情提示\n\n$$63912897\\equiv3^{\\frac{998244352}{2^{12}}}\\pmod{998244353}$$\n\n#### 样例解释\n\n当 Dream 程序输入为序列 `[1,2,3]`，输出为序列 `[6,347675984]`，符合要求。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（11 pts）：$n,q\\le2^8$\n - Subtask 2（19 pts）：所有询问操作在修改操作后面。\n - Subtask 3（23 pts）：$n,q\\le2^{10}$\n - Subtask 4（47 pts）：没有特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le2^{12}$，$0\\le i<n$，$0\\le x,k<998244353$。", "locale": "zh-CN"}}}
{"pid": "P7331", "type": "P", "difficulty": 7, "samples": [["8 2\n1 2 5 1 4 3 3\n2 4\n4 7\n3\n4 6\n5 7\n1 8", "2\n2\n18"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048, 386048]}, "tags": ["O2优化"], "title": "Dream and the Multiverse REMATCH", "background": "[Link](https://youtu.be/tylNqtyj0gs?t=2388)\n\n*I have gone over the scenarios in my head,*\n\n*and there are 6.96969 billion outcomes, and only one of them -*\n\n*- do I win.*", "description": "Dream abstracts the fabric of spacetime as a directed rooted tree (arborescence) with $N$ nodes (numbered $1$ through $N$). Node $1$ is the root and for each $i$ ($1 \\le i \\le N-1$), the parent of node $i+1$ is $f_i$. All edges of this tree are directed away from the root.\n\nThen, Dream employs a magical superpower and adds $M$ directed edges to this tree in such a way that the resulting directed graph remains acyclic (a DAG).\n\nLet's call a node of this DAG an *event* and further call a simple path on this DAG an *era*. Dream considers a pair of events $(i,j)$ to be *plausible* if there is an era whose first event is $i$ and last event is $j$. Note that $i \\lt j$ does not have to hold for a plausible pair.\n\nDream now wants you to answer $Q$ queries. In each query, he gives you two positive integers $l$ and $r$, where $l \\leq r$, and he wishes to know the number of plausible pairs of events $(i,j)$ such that $l \\leq i \\lt j \\leq r$.", "inputFormat": "The first line of the input contains two space-separated integers $N$ and $M$.\n\nThe second line contains $N-1$ space-separated integers $f_1, f_2, \\ldots, f_{N-1}$.\n\n$M$ lines follow. Each of these lines contains two space-separated integers $u$ and $v$ describing an additional edge from node $u$ to node $v$.\n\nThe following line contains a single integer $Q$.\n\n$Q$ lines follow. Each of these lines contains two space-separated integers $l$ and $r$ describing a query.", "outputFormat": "For each query, print a single line containing one integer ― the number of plausible pairs $(i,j)$ such that $l \\leq i \\lt j \\leq r$.", "hint": " - $2 \\leq N \\leq 7 \\cdot 10^5$\n - $1 \\leq Q \\leq 7 \\cdot 10^5$\n - $0 \\leq M \\leq 20$\n - $1 \\le f_i \\le N$ for each valid $i$\n - $1 \\le u, v \\le N$\n - the graph described on the input is acyclic\n - $1 \\le l \\le r \\le N$\n\n### Subtasks\n\n**Subtask #1 (17 points):** $N,Q\\le3\\cdot 10^5$\n\n**Subtask #2 (83 points):** original constraints\n", "locale": "en", "translations": {"en": {"title": "Dream and the Multiverse REMATCH", "background": "[Link](https://youtu.be/tylNqtyj0gs?t=2388)\n\n*I have gone over the scenarios in my head,*\n\n*and there are 6.96969 billion outcomes, and only one of them -*\n\n*- do I win.*", "description": "Dream abstracts the fabric of spacetime as a directed rooted tree (arborescence) with $N$ nodes (numbered $1$ through $N$). Node $1$ is the root and for each $i$ ($1 \\le i \\le N-1$), the parent of node $i+1$ is $f_i$. All edges of this tree are directed away from the root.\n\nThen, Dream employs a magical superpower and adds $M$ directed edges to this tree in such a way that the resulting directed graph remains acyclic (a DAG).\n\nLet's call a node of this DAG an *event* and further call a simple path on this DAG an *era*. Dream considers a pair of events $(i,j)$ to be *plausible* if there is an era whose first event is $i$ and last event is $j$. Note that $i \\lt j$ does not have to hold for a plausible pair.\n\nDream now wants you to answer $Q$ queries. In each query, he gives you two positive integers $l$ and $r$, where $l \\leq r$, and he wishes to know the number of plausible pairs of events $(i,j)$ such that $l \\leq i \\lt j \\leq r$.", "inputFormat": "The first line of the input contains two space-separated integers $N$ and $M$.\n\nThe second line contains $N-1$ space-separated integers $f_1, f_2, \\ldots, f_{N-1}$.\n\n$M$ lines follow. Each of these lines contains two space-separated integers $u$ and $v$ describing an additional edge from node $u$ to node $v$.\n\nThe following line contains a single integer $Q$.\n\n$Q$ lines follow. Each of these lines contains two space-separated integers $l$ and $r$ describing a query.", "outputFormat": "For each query, print a single line containing one integer ― the number of plausible pairs $(i,j)$ such that $l \\leq i \\lt j \\leq r$.", "hint": " - $2 \\leq N \\leq 7 \\cdot 10^5$\n - $1 \\leq Q \\leq 7 \\cdot 10^5$\n - $0 \\leq M \\leq 20$\n - $1 \\le f_i \\le N$ for each valid $i$\n - $1 \\le u, v \\le N$\n - the graph described on the input is acyclic\n - $1 \\le l \\le r \\le N$\n\n### Subtasks\n\n**Subtask #1 (17 points):** $N,Q\\le3\\cdot 10^5$\n\n**Subtask #2 (83 points):** original constraints\n", "locale": "en"}, "zh-CN": {"title": "Dream and the Multiverse REMATCH", "background": "", "description": "Dream 将时空的结构抽象为一个有 $N$ 个节点（编号为 $1$ 到 $N$）的有向根树（树形结构）。节点 $1$ 是根节点，对于每个 $i$（$1 \\le i \\le N-1$），节点 $i+1$ 的父节点是 $f_i$。这棵树的所有边都是从根节点指向外部的。\n\n然后，Dream 使用一种神奇的超能力，向这棵树中添加了 $M$ 条有向边，使得结果图仍然是无环的（有向无环图，DAG）。\n\n我们称这个 DAG 的一个节点为一个*事件*，并进一步称这个 DAG 上的一条简单路径为一个*时代*。Dream 认为一对事件 $(i,j)$ 是*可能的*，如果存在一个时代，其第一个事件是 $i$，最后一个事件是 $j$。注意，对于一个可能的对，$i < j$ 并不一定成立。\n\nDream 现在希望你回答 $Q$ 个查询。在每个查询中，他给你两个正整数 $l$ 和 $r$，其中 $l \\leq r$，他希望知道有多少对可能的事件 $(i,j)$ 满足 $l \\leq i < j \\leq r$。", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $M$。\n\n第二行包含 $N-1$ 个空格分隔的整数 $f_1, f_2, \\ldots, f_{N-1}$。\n\n接下来的 $M$ 行中，每行包含两个空格分隔的整数 $u$ 和 $v$，描述了一条从节点 $u$ 到节点 $v$ 的额外边。\n\n接下来的行包含一个整数 $Q$。\n\n接下来的 $Q$ 行中，每行包含两个空格分隔的整数 $l$ 和 $r$，描述了一个查询。", "outputFormat": "对于每个查询，输出一行，包含一个整数——满足 $l \\leq i < j \\leq r$ 的可能事件对 $(i,j)$ 的数量。", "hint": "- $2 \\leq N \\leq 7 \\cdot 10^5$\n- $1 \\leq Q \\leq 7 \\cdot 10^5$\n- $0 \\leq M \\leq 20$\n- 对于每个有效的 $i$，$1 \\le f_i \\le N$\n- $1 \\le u, v \\le N$\n- 输入描述的图是无环的\n- $1 \\le l \\le r \\le N$\n\n### 子任务\n\n**子任务 #1 (17 分):** $N,Q \\le 3 \\cdot 10^5$\n\n**子任务 #2 (83 分):** 原始约束条件。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7333", "type": "P", "difficulty": 4, "samples": [["3\n1 2 3\n3 2 1", "1 1 1"], ["5\n5 4 3 5 6\n7 6 5 4 3", "-1 2 1 1 1"], ["5\n1 1 2 1 1\n2 2 2 2 2", "2 1 -1 1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["二分", "2021", "洛谷原创", "分块", "ST 表"], "title": "[JRKSJ R1] JFCA", "background": "", "description": "给出一个环，上面有 $n$ 个点，每个相邻的点对之间的距离为 $1$。\n\n每个点有两个属性 $a_i$ 和 $b_i$，对于点 $i$，定义 $f_i$ 为它与满足 $i\\ne j$ 且 $a_j\\ge b_i$ 的 $j$ 与 $i$ 在环上的最短距离。特殊地，如果没有满足条件的 $j$，其 $f_i=-1$。", "inputFormat": "输入共 $3$ 行。\\\n第 $1$ 行 $1$ 个整数 $n$ 。\\\n第 $2$ 行 $n$ 个整数，其中第 $i$ 个表示 $a_i$，意义同上。\\\n第 $3$ 行 $n$ 个整数，其中第 $i$ 个表示 $b_i$，意义同上。", "outputFormat": "输出 $1$ 行 $n$ 个整数，其中第 $i$ 个表示 $f_i$，意义同上。", "hint": "### 数据规模与约定\n\n对于 $20\\%$ 的数据，$1\\le n \\le 10^3$；\\\n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1\\le a_i,b_i\\le 10^9$。\n\n我们对于测试点 $4$ 至 $11$ 采用捆绑测试。\n\n### 样例 1 解释\n对于 $i=1$，$a_3=3= b_1=3$, $1$ 和 $3$ 的距离是 $1$，所以 $f_1=1$。\\\n对于 $i=2$，$a_3=3> b_2=2$, $2$ 和 $3$ 的距离是 $1$，所以 $f_2=1$。\\\n对于 $i=3$，$a_2=2> b_3=1$, $2$ 和 $3$ 的距离是 $1$，所以 $f_3=1$。\n\n$\\text{Upd 2021.3.30}$：增加一组 hack 数据。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R1] JFCA", "background": "", "description": "给出一个环，上面有 $n$ 个点，每个相邻的点对之间的距离为 $1$。\n\n每个点有两个属性 $a_i$ 和 $b_i$，对于点 $i$，定义 $f_i$ 为它与满足 $i\\ne j$ 且 $a_j\\ge b_i$ 的 $j$ 与 $i$ 在环上的最短距离。特殊地，如果没有满足条件的 $j$，其 $f_i=-1$。", "inputFormat": "输入共 $3$ 行。\\\n第 $1$ 行 $1$ 个整数 $n$ 。\\\n第 $2$ 行 $n$ 个整数，其中第 $i$ 个表示 $a_i$，意义同上。\\\n第 $3$ 行 $n$ 个整数，其中第 $i$ 个表示 $b_i$，意义同上。", "outputFormat": "输出 $1$ 行 $n$ 个整数，其中第 $i$ 个表示 $f_i$，意义同上。", "hint": "### 数据规模与约定\n\n对于 $20\\%$ 的数据，$1\\le n \\le 10^3$；\\\n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1\\le a_i,b_i\\le 10^9$。\n\n我们对于测试点 $4$ 至 $11$ 采用捆绑测试。\n\n### 样例 1 解释\n对于 $i=1$，$a_3=3= b_1=3$, $1$ 和 $3$ 的距离是 $1$，所以 $f_1=1$。\\\n对于 $i=2$，$a_3=3> b_2=2$, $2$ 和 $3$ 的距离是 $1$，所以 $f_2=1$。\\\n对于 $i=3$，$a_2=2> b_3=1$, $2$ 和 $3$ 的距离是 $1$，所以 $f_3=1$。\n\n$\\text{Upd 2021.3.30}$：增加一组 hack 数据。\n", "locale": "zh-CN"}}}
{"pid": "P7334", "type": "P", "difficulty": 5, "samples": [["1 1\n1\n1 1 1", "1"], ["4 2\n1 2 3 4\n1 2 4\n2 1 4", "7"], ["5 5\n10 8 10 11 12\n2 1 5\n1 1 5\n1 1 4\n2 4 5\n1 1 5", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "2021", "洛谷原创", "O2优化", "分块", "欧拉降幂"], "title": "[JRKSJ R1] 吊打", "background": "", "description": "给出一个长为 $n$ 的正整数序列 $a_{1\\sim n}$。接下来有两种操作共 $m$ 次：\n- `1 l r`，表示将 $a_{l\\sim r}$ 开方并下取整，即令 $\\forall i\\in [l,r],a_i\\gets\\lfloor\\sqrt{a_i}\\rfloor$；\n- `2 l r`，表示将 $a_{l\\sim r}$ 平方，即令 $\\forall i\\in [l,r],a_i\\gets a_i^2$。\n\n在所有操作结束后，请你输出 $\\displaystyle\\sum_{i=1}^na_i$。\n\n由于答案可能很大，你只需要输出其对 $998244353$ 取模的结果即可。", "inputFormat": "输入共 $m+2$ 行。\n\n第一行输入两个正整数 $n,m$。\n\n第二行输入 $n$ 个正整数 $a_{1\\sim n}$。\n\n接下来 $m$ 行，每行 $3$ 个正整数表示一次操作。", "outputFormat": "输出一行一个整数表示答案对 $998244353$ 取模的结果。", "hint": "### 数据规模与约定\n\n| 测试点 | 特殊限制 |\n| :----------: | :----------: |\n| $1$ | $n,m\\le 10$ |\n| $2$ | 保证一次 `1 l r` 操作上一步是 `2 l r` |\n| $3$ | 保证只有 `1` 操作 |\n| $4$ | 保证只有 `2` 操作 |\n| $5$ | 保证所有的 $l=1$，$r=n$ |\n| $6$ | $n,m\\le 10^3$ |\n| $7\\sim 20$ | 无特殊限制 |\n\n\n对于所有数据，保证 $1\\le n,m\\le2\\times10^5$，$1\\le a_i\\le 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R1] 吊打", "background": "", "description": "给出一个长为 $n$ 的正整数序列 $a_{1\\sim n}$。接下来有两种操作共 $m$ 次：\n- `1 l r`，表示将 $a_{l\\sim r}$ 开方并下取整，即令 $\\forall i\\in [l,r],a_i\\gets\\lfloor\\sqrt{a_i}\\rfloor$；\n- `2 l r`，表示将 $a_{l\\sim r}$ 平方，即令 $\\forall i\\in [l,r],a_i\\gets a_i^2$。\n\n在所有操作结束后，请你输出 $\\displaystyle\\sum_{i=1}^na_i$。\n\n由于答案可能很大，你只需要输出其对 $998244353$ 取模的结果即可。", "inputFormat": "输入共 $m+2$ 行。\n\n第一行输入两个正整数 $n,m$。\n\n第二行输入 $n$ 个正整数 $a_{1\\sim n}$。\n\n接下来 $m$ 行，每行 $3$ 个正整数表示一次操作。", "outputFormat": "输出一行一个整数表示答案对 $998244353$ 取模的结果。", "hint": "### 数据规模与约定\n\n| 测试点 | 特殊限制 |\n| :----------: | :----------: |\n| $1$ | $n,m\\le 10$ |\n| $2$ | 保证一次 `1 l r` 操作上一步是 `2 l r` |\n| $3$ | 保证只有 `1` 操作 |\n| $4$ | 保证只有 `2` 操作 |\n| $5$ | 保证所有的 $l=1$，$r=n$ |\n| $6$ | $n,m\\le 10^3$ |\n| $7\\sim 20$ | 无特殊限制 |\n\n\n对于所有数据，保证 $1\\le n,m\\le2\\times10^5$，$1\\le a_i\\le 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P7335", "type": "P", "difficulty": 4, "samples": [["6 3\n2 1 3 4 4 4", "15"], ["7 2\n3 4 5 6 7 8 9", "24"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2021", "洛谷原创", "O2优化", "字典树 Trie", "其它技巧"], "title": "[JRKSJ R1] 异或", "background": "", "description": "给你 $n,k$ 和序列 $a_{1,2\\dots n}$，选出 $k$ 个**不交**区间 $[l_i,r_i]\\subseteq[1,n]$，求出\n$$\\max_{l_i,r_i}\\sum_{i=1}^k\\bigoplus_{j=l_i}^{r_i}a_j$$\n\n式中 $\\oplus$ 表示二进制异或运算。\n\n**保证数据随机。**", "inputFormat": "输入共 $2$ 行。\\\n第 $1$ 行输入两个数 $n,k$。\\\n第 $2$ 行输入 $n$ 个非负整数代表序列 $a$。", "outputFormat": "$1$ 行输出一个非负整数，代表这个式子的最大值。", "hint": "### 样例 1 解释\n序列中选择的三个区间分别为：\n$$2,1,[3,4],[4],[4]$$\n所得的三个区间的异或和之和为 $7+4+4=15$。\n\n### 数据规模与约定\n\n对于所有数据，保证 $1\\le k\\le n\\le 3000$，$0\\le a_i\\le 10^{9}$。**保证数据随机。**\n\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $30$ | $k\\le3$ | $5$ |\n| $2$ | $500$ | $a_i\\le10^7$|  $10$ |\n| $3$ | $1000$ | 无 |  $10$ |\n| $4$ | $1500$ | 无 |  $15$ |\n| $5$ | $2000$ | 无 |  $15$ |\n| $6$ | $2500$ | 无 | $20$ |\n| $7$ | $3000$ |  无|  $25$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R1] 异或", "background": "", "description": "给你 $n,k$ 和序列 $a_{1,2\\dots n}$，选出 $k$ 个**不交**区间 $[l_i,r_i]\\subseteq[1,n]$，求出\n$$\\max_{l_i,r_i}\\sum_{i=1}^k\\bigoplus_{j=l_i}^{r_i}a_j$$\n\n式中 $\\oplus$ 表示二进制异或运算。\n\n**保证数据随机。**", "inputFormat": "输入共 $2$ 行。\\\n第 $1$ 行输入两个数 $n,k$。\\\n第 $2$ 行输入 $n$ 个非负整数代表序列 $a$。", "outputFormat": "$1$ 行输出一个非负整数，代表这个式子的最大值。", "hint": "### 样例 1 解释\n序列中选择的三个区间分别为：\n$$2,1,[3,4],[4],[4]$$\n所得的三个区间的异或和之和为 $7+4+4=15$。\n\n### 数据规模与约定\n\n对于所有数据，保证 $1\\le k\\le n\\le 3000$，$0\\le a_i\\le 10^{9}$。**保证数据随机。**\n\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $30$ | $k\\le3$ | $5$ |\n| $2$ | $500$ | $a_i\\le10^7$|  $10$ |\n| $3$ | $1000$ | 无 |  $10$ |\n| $4$ | $1500$ | 无 |  $15$ |\n| $5$ | $2000$ | 无 |  $15$ |\n| $6$ | $2500$ | 无 | $20$ |\n| $7$ | $3000$ |  无|  $25$ |", "locale": "zh-CN"}}}
{"pid": "P7336", "type": "P", "difficulty": 6, "samples": [["1 1 1 2 0\n1 1\n1 0", "0 0\n0 1\n0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "搜索", "博弈论", "2021", "洛谷原创", "交互题", "Special Judge", "O2优化"], "title": "[JRKSJ R1] 1+1", "background": "", "description": "### 玩法简介\n\n「1+1」 是一款双人对抗游戏。两名玩家各自拥有两个数，每次一名玩家可以用自己的一个数加上对方的一个数，如果大于 $9$ 则取个位。双方轮流执行此步骤。如，下面记录了游戏的几个回合，玩家双方分别为 `a` 和 `b`：\n\n在下面的局面解释中，第一个局面标 `*` 的是先手。\n\n```\na:1 1*（初始局面）\nb:1 2\n\na:1 3（1+2）\nb:1 2\n\na:1 3\nb:1 5（2+3）\n\na:6 3（1+5）\nb:1 5\n```\n---\n\n### 特殊局面\n\n我们把下面的情况称为「攻击」：\n\n```\n3 3\n5 3\n6 1\n9 1\n```\n这些攻击的「攻击度」为 $1$ ，除了 `9 1`。`9 1` 的攻击度为 $2$ 。\n\n下面的情况称为「防御」：\n\n```\n5 1\n5 5\n```\n这些防御的「防御度」为 $1$ ，除了 `5 5`。`5 5`的 防御度为 $2$ 。\n\n当然，所有的攻击或防御不分两个数的顺序，如 `5 1` 和 `1 5` 都视作防御，而\n `9 1` 和 `1 9` 也都视为攻击，而攻击/防御度不变。\n\n如果玩家 `a` 持有防御，而玩家 `b` 在下一步走成了攻击，如下面的情况：\n\n```\na:1 5\nb:1 1*\n\na:1 5\nb:6 1\n```\n那么此时 `a` 持有防御度为 $1$ 的 `1 5`， `b` 持有攻击度为 $1$ 的 `6 1`，此时应该将 `a` 持有的数变成 `1 1` 而 `b` 的此次攻击无效。\n\n也就是说，如果 `a` 的攻击的攻击度与 `b` 的防御的防御度相等，则将 `b` 的两个数变为 `1 1` 而 `a` 的此次攻击视作无效。\n\n我们认为不属于上面的攻击/防御的攻击/防御度为 $0$ （如 `3 4` 等。）\n\n特别的，如果遇到下面这种情况：\n\n```\na:5 5\nb:1 1*\n\na:5 5\nb:1 6\n```\n`a` 的防御度为 $2$ 而 b 的攻击度为 $1$ 。此时应该把 `a` 变成 `5 1` 而 `b` 的此次攻击作废。\n\n\n\n------------\n\n\n### 胜利条件\n\n如果一方走完一步后，他的攻击度严格大于另一方的防御度，则这一方获胜。此时不应该做任何改动，即使要把另一方变成 `1 1` 或 `5 1`。\n\n下面给出了一个例子：\n\n```\na:1 1\nb:6 3*\n\na:1 1\nb:6 4\n\na:1 5\nb:6 4\n\na:1 5\nb:6 9\n\na:1 1\nb:6 9\n\na:1 1\nb:6 0\n\na:1 7\nb:6 0\n\na:1 7\nb:6 1\n\n（ b 胜）\n```\n为了消除歧义，下面再给出一些例子：\n\n```\na:5 5\nb:1 4*\n\na:1 1\nb:1 9\n\na:1 0（ 1+9=10 ，个位为 0 ）\nb:1 9\n\na:1 0\nb:1 9（注意这里， b 用 1 （或 9 ）加了 a 的 0 ，这样也算一次新的攻击）\n\n（ b 胜）\n```\n\n```\na:1 1*\nb:1 4\n\na:1 5\nb:1 4\n\na:1 5（因为是最后一步，无须变成“1 1”）\nb:1 9（这里 b 的“1 9”直接碾压了 a 的“1 5”）\n\n（ b 胜）\n```\n\n现在，你被要求写一个程序，作为先手通过交互的方式和 mcyl35 的程序玩这个游戏。", "inputFormat": "第一行五个整数 $p_0,p_1,c_0,c_1,P$，分别表示你的两个数，mcyl35 的两个数和测试点编号。\n\n下面每行两个整数 $x,y$，表示 mcyl35 的第 $x$ 个数加上了你的第 $y$ 个数。\n\n本题使用 IO 交互，具体可见 [P1733 猜数（IO交互版）](https://www.luogu.com.cn/problem/P1733)。", "outputFormat": "每行两个整数 $x,y$，表示你的第 $x$ 个数加上了 mcyl35 的第 $y$ 个数。", "hint": "#### 数据规模与约定\n\n对于测试点 $1$，保证玩家可以一步获胜。\n\n对于测试点 $2$，保证 mcyl35 的程序随机走步。\n\n对于其他测试点，无特殊约定。\n\n对于 $100\\%$ 的数据，$0\\le p_0,p_1,c_0,c_1\\le 9$。\n\n#### 评分标准\n\n* 有不合法的输出（如输出中含有除了 $0,1$ 之外的数），得 $0$ 分。\n\n* 获胜或走了 $100$ 步及以上本测试点可以获得满分。\n\n* 否则获得 $\\lfloor \\dfrac {st} {20} \\rfloor$ 分，$st$ 表示走的步数，一步表示 mcyl35 走一步。\n\n#### 提示\n\n当交互库没有返回数时，说明结果已经被判定了。\n\n#### 样例解释\n\n```\npl:1 1*\ncp:1 2\n\npl:2 1\ncp:1 2\n\npl:2 1\ncp:1 3\n\npl:5 1\ncp:1 3\n\npl:5 1\ncp:1 8\n\npl:6 1(胜)\ncp:1 8\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R1] 1+1", "background": "", "description": "### 玩法简介\n\n「1+1」 是一款双人对抗游戏。两名玩家各自拥有两个数，每次一名玩家可以用自己的一个数加上对方的一个数，如果大于 $9$ 则取个位。双方轮流执行此步骤。如，下面记录了游戏的几个回合，玩家双方分别为 `a` 和 `b`：\n\n在下面的局面解释中，第一个局面标 `*` 的是先手。\n\n```\na:1 1*（初始局面）\nb:1 2\n\na:1 3（1+2）\nb:1 2\n\na:1 3\nb:1 5（2+3）\n\na:6 3（1+5）\nb:1 5\n```\n---\n\n### 特殊局面\n\n我们把下面的情况称为「攻击」：\n\n```\n3 3\n5 3\n6 1\n9 1\n```\n这些攻击的「攻击度」为 $1$ ，除了 `9 1`。`9 1` 的攻击度为 $2$ 。\n\n下面的情况称为「防御」：\n\n```\n5 1\n5 5\n```\n这些防御的「防御度」为 $1$ ，除了 `5 5`。`5 5`的 防御度为 $2$ 。\n\n当然，所有的攻击或防御不分两个数的顺序，如 `5 1` 和 `1 5` 都视作防御，而\n `9 1` 和 `1 9` 也都视为攻击，而攻击/防御度不变。\n\n如果玩家 `a` 持有防御，而玩家 `b` 在下一步走成了攻击，如下面的情况：\n\n```\na:1 5\nb:1 1*\n\na:1 5\nb:6 1\n```\n那么此时 `a` 持有防御度为 $1$ 的 `1 5`， `b` 持有攻击度为 $1$ 的 `6 1`，此时应该将 `a` 持有的数变成 `1 1` 而 `b` 的此次攻击无效。\n\n也就是说，如果 `a` 的攻击的攻击度与 `b` 的防御的防御度相等，则将 `b` 的两个数变为 `1 1` 而 `a` 的此次攻击视作无效。\n\n我们认为不属于上面的攻击/防御的攻击/防御度为 $0$ （如 `3 4` 等。）\n\n特别的，如果遇到下面这种情况：\n\n```\na:5 5\nb:1 1*\n\na:5 5\nb:1 6\n```\n`a` 的防御度为 $2$ 而 b 的攻击度为 $1$ 。此时应该把 `a` 变成 `5 1` 而 `b` 的此次攻击作废。\n\n\n\n------------\n\n\n### 胜利条件\n\n如果一方走完一步后，他的攻击度严格大于另一方的防御度，则这一方获胜。此时不应该做任何改动，即使要把另一方变成 `1 1` 或 `5 1`。\n\n下面给出了一个例子：\n\n```\na:1 1\nb:6 3*\n\na:1 1\nb:6 4\n\na:1 5\nb:6 4\n\na:1 5\nb:6 9\n\na:1 1\nb:6 9\n\na:1 1\nb:6 0\n\na:1 7\nb:6 0\n\na:1 7\nb:6 1\n\n（ b 胜）\n```\n为了消除歧义，下面再给出一些例子：\n\n```\na:5 5\nb:1 4*\n\na:1 1\nb:1 9\n\na:1 0（ 1+9=10 ，个位为 0 ）\nb:1 9\n\na:1 0\nb:1 9（注意这里， b 用 1 （或 9 ）加了 a 的 0 ，这样也算一次新的攻击）\n\n（ b 胜）\n```\n\n```\na:1 1*\nb:1 4\n\na:1 5\nb:1 4\n\na:1 5（因为是最后一步，无须变成“1 1”）\nb:1 9（这里 b 的“1 9”直接碾压了 a 的“1 5”）\n\n（ b 胜）\n```\n\n现在，你被要求写一个程序，作为先手通过交互的方式和 mcyl35 的程序玩这个游戏。", "inputFormat": "第一行五个整数 $p_0,p_1,c_0,c_1,P$，分别表示你的两个数，mcyl35 的两个数和测试点编号。\n\n下面每行两个整数 $x,y$，表示 mcyl35 的第 $x$ 个数加上了你的第 $y$ 个数。\n\n本题使用 IO 交互，具体可见 [P1733 猜数（IO交互版）](https://www.luogu.com.cn/problem/P1733)。", "outputFormat": "每行两个整数 $x,y$，表示你的第 $x$ 个数加上了 mcyl35 的第 $y$ 个数。", "hint": "#### 数据规模与约定\n\n对于测试点 $1$，保证玩家可以一步获胜。\n\n对于测试点 $2$，保证 mcyl35 的程序随机走步。\n\n对于其他测试点，无特殊约定。\n\n对于 $100\\%$ 的数据，$0\\le p_0,p_1,c_0,c_1\\le 9$。\n\n#### 评分标准\n\n* 有不合法的输出（如输出中含有除了 $0,1$ 之外的数），得 $0$ 分。\n\n* 获胜或走了 $100$ 步及以上本测试点可以获得满分。\n\n* 否则获得 $\\lfloor \\dfrac {st} {20} \\rfloor$ 分，$st$ 表示走的步数，一步表示 mcyl35 走一步。\n\n#### 提示\n\n当交互库没有返回数时，说明结果已经被判定了。\n\n#### 样例解释\n\n```\npl:1 1*\ncp:1 2\n\npl:2 1\ncp:1 2\n\npl:2 1\ncp:1 3\n\npl:5 1\ncp:1 3\n\npl:5 1\ncp:1 8\n\npl:6 1(胜)\ncp:1 8\n```", "locale": "zh-CN"}}}
