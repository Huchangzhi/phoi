{"pid": "P6930", "type": "P", "difficulty": 6, "samples": [["1\nB I P C F\nA G M - - -\n", "AGM\n"], ["2\nA B C D H\nF G M M\nF H M - *\n", "E??\n"], ["3\nA C M S D\nB G S - G\nA H S - - S\nC J S *\n", "???\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "ICPC", "WF"], "title": "[ICPC 2017 WF] Get a Clue!", "background": "", "description": "\n\nDeveloped in the $1940s$ in the United Kingdom, the game of Cluedo is one of the most popular board games in the world. The object of the game is to determine who murdered Mr. Body, which weapon was used to murder him, and where the murder took place. The game uses a set of cards representing six persons (labeled A , $B$ , . . . , $F)$ , six weapons (labeled $G , H$ , . . . , $L)$ and nine rooms (labeled $M , N$ , . . . , $U)$ . At the start of the game, one person card, one weapon card, and one room card are selected at random and removed from the deck so no one can see them $-$ they represent the murderer, the murder weapon, and the murder location. The remaining $18$ cards are shuffled and dealt to the players, starting with player $1$ , then to her right player $2$ , and so on. Some players may end up with one more card than others. For the purposes of this problem there are four players, so the person to the right of player $4$ is player $1$ .\n\nThe rest of the game is spent searching for clues. Players take turns, starting with player $1$ and moving to the right. A turn consists of making a suggestion (consisting of a murder suspect, a weapon, and a room) and asking other players if they have any evidence that refutes the suggestion. For example, you might say to another player `I believe the murderer was person A , using weapon $L$ , in room $T$ . $`$ If the other player is holding exactly one of these cards, that player must show you (and only you) that card. If they have more than one such card, they can show you any one of them.\n\nWhen making a suggestion, you must first ask the person to your right for any evidence. If they have none, you continue with the person on their right, and so on, until someone has evidence, or no one has any of the cards in your suggestion.\n\nMany times you can gain information even if you are not the person making the suggestion. Suppose, in the above example, you are the third player and have cards A and $T$ . If someone else shows evidence to the suggester, you know that it must be weapon card $L$ . Keeping track of suggestions and who gave evidence at each turn is an important strategy when playing the game.\n\nTo win the game, you must make an accusation, where you state your final guess of the murderer, weapon, and room. After stating your accusation, you check the three cards that were set aside at the start of the game $-$ if they match your accusation, you win! Needless to say, you want to be absolutely sure of your accusation before you make it.\n\nHere is your problem. You are player $1$ . Given a set of cards dealt to you and a history of suggestions and evidence, you need to decide how close you are to being able to make an accusation.\n\n", "inputFormat": "\n\nThe input starts with an integer $n (1 \\le n \\le 50)$ , the number of suggestions made during the game. Following this is a line containing the five cards you are dealt, all uppercase letters in the range $‘A'.$ . . $‘U'.$ The remaining $n$ lines contain one suggestion per line. Each of these lines starts with three characters representing the suggestion (in the order person, weapon, room), followed by the responses of up to three players, beginning with the player to the right of the player making the suggestion. If a player presents no evidence, a $‘-'$ (dash) is listed; otherwise an `evidence character` is listed. If the specific evidence card is seen by you (either because you provided it or you were the person receiving the evidence) then the evidence $character identifies$ that card; otherwise the evidence character is $‘ \\times '.$ Note that only the last response can be an evidence character. All characters are separated by single spaces. Only valid $suggestio_n/response$ sequences appear in the input.\n\n", "outputFormat": "\n\nDisplay a three character string identifying the murderer, the murder weapon, and the room. If the murderer can be identified, use the appropriate letter for that person; otherwise use $‘?'.$ Do the same for the murder weapon and the room.\n\n", "hint": "Time limit: 4 s, Memory limit: 512 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2017 WF] Get a Clue!", "background": "", "description": "\n\nDeveloped in the $1940s$ in the United Kingdom, the game of Cluedo is one of the most popular board games in the world. The object of the game is to determine who murdered Mr. Body, which weapon was used to murder him, and where the murder took place. The game uses a set of cards representing six persons (labeled A , $B$ , . . . , $F)$ , six weapons (labeled $G , H$ , . . . , $L)$ and nine rooms (labeled $M , N$ , . . . , $U)$ . At the start of the game, one person card, one weapon card, and one room card are selected at random and removed from the deck so no one can see them $-$ they represent the murderer, the murder weapon, and the murder location. The remaining $18$ cards are shuffled and dealt to the players, starting with player $1$ , then to her right player $2$ , and so on. Some players may end up with one more card than others. For the purposes of this problem there are four players, so the person to the right of player $4$ is player $1$ .\n\nThe rest of the game is spent searching for clues. Players take turns, starting with player $1$ and moving to the right. A turn consists of making a suggestion (consisting of a murder suspect, a weapon, and a room) and asking other players if they have any evidence that refutes the suggestion. For example, you might say to another player `I believe the murderer was person A , using weapon $L$ , in room $T$ . $`$ If the other player is holding exactly one of these cards, that player must show you (and only you) that card. If they have more than one such card, they can show you any one of them.\n\nWhen making a suggestion, you must first ask the person to your right for any evidence. If they have none, you continue with the person on their right, and so on, until someone has evidence, or no one has any of the cards in your suggestion.\n\nMany times you can gain information even if you are not the person making the suggestion. Suppose, in the above example, you are the third player and have cards A and $T$ . If someone else shows evidence to the suggester, you know that it must be weapon card $L$ . Keeping track of suggestions and who gave evidence at each turn is an important strategy when playing the game.\n\nTo win the game, you must make an accusation, where you state your final guess of the murderer, weapon, and room. After stating your accusation, you check the three cards that were set aside at the start of the game $-$ if they match your accusation, you win! Needless to say, you want to be absolutely sure of your accusation before you make it.\n\nHere is your problem. You are player $1$ . Given a set of cards dealt to you and a history of suggestions and evidence, you need to decide how close you are to being able to make an accusation.\n\n", "inputFormat": "\n\nThe input starts with an integer $n (1 \\le n \\le 50)$ , the number of suggestions made during the game. Following this is a line containing the five cards you are dealt, all uppercase letters in the range $‘A'.$ . . $‘U'.$ The remaining $n$ lines contain one suggestion per line. Each of these lines starts with three characters representing the suggestion (in the order person, weapon, room), followed by the responses of up to three players, beginning with the player to the right of the player making the suggestion. If a player presents no evidence, a $‘-'$ (dash) is listed; otherwise an `evidence character` is listed. If the specific evidence card is seen by you (either because you provided it or you were the person receiving the evidence) then the evidence $character identifies$ that card; otherwise the evidence character is $‘ \\times '.$ Note that only the last response can be an evidence character. All characters are separated by single spaces. Only valid $suggestio_n/response$ sequences appear in the input.\n\n", "outputFormat": "\n\nDisplay a three character string identifying the murderer, the murder weapon, and the room. If the murderer can be identified, use the appropriate letter for that person; otherwise use $‘?'.$ Do the same for the murder weapon and the room.\n\n", "hint": "Time limit: 4 s, Memory limit: 512 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2017 WF] Get a Clue!", "background": "", "description": "20 世纪 40 年代在英国开发的 Cluedo 游戏是世界上最受欢迎的棋盘游戏之一。游戏的目标是确定谁谋杀了 Mr. Body，使用了什么武器，以及谋杀发生的地点。游戏使用一套卡牌，代表六个人（标记为 A，B，……，F），六种武器（标记为 G，H，……，L）和九个房间（标记为 M，N，……，U）。在游戏开始时，随机选择一张人物卡、一张武器卡和一张房间卡，并从牌堆中移除，因此没有人可以看到它们——它们代表凶手、谋杀武器和谋杀地点。剩下的 18 张牌被洗牌并发给玩家，从玩家 1 开始，然后是她右边的玩家 2，依此类推。一些玩家可能会比其他玩家多一张牌。对于这个问题，有四名玩家，所以玩家 4 右边的人是玩家 1。\n\n游戏的其余时间用于寻找线索。玩家轮流行动，从玩家 1 开始并向右移动。每轮包括提出一个建议（包括一个谋杀嫌疑人、一种武器和一个房间），并询问其他玩家是否有证据可以反驳该建议。例如，你可能会对另一个玩家说：“我相信凶手是人物 A，使用武器 L，在房间 T。”如果其他玩家正好持有其中一张牌，该玩家必须向你（且仅向你）展示那张牌。如果他们有多于一张这样的牌，他们可以展示其中任意一张。\n\n在提出建议时，你必须首先询问你右边的人是否有任何证据。如果他们没有，你继续询问他们右边的人，依此类推，直到有人有证据，或者没有人持有你建议中的任何牌。\n\n即使你不是提出建议的人，很多时候你也可以获得信息。假设在上述例子中，你是第三个玩家，并持有牌 A 和 T。如果有人向建议者展示了证据，你就知道那一定是武器牌 L。记录每轮建议和谁提供了证据是玩游戏时的重要策略。\n\n要赢得游戏，你必须提出指控，陈述你对凶手、武器和房间的最终猜测。在陈述你的指控后，你检查游戏开始时放置的一组三张牌——如果它们与你的指控匹配，你就赢了！不用说，在提出指控之前，你要绝对确定你的指控。\n\n这是你的问题。你是玩家 1。给定一组发给你的牌和建议及证据的历史记录，你需要决定你距离能够提出指控有多近。", "inputFormat": "输入以一个整数 $n (1 \\le n \\le 50)$ 开始，表示游戏期间提出的建议次数。接下来是一行包含发给你的五张牌，所有大写字母在范围 'A' 到 'U' 之间。剩下的 $n$ 行中每行包含一个建议。每行以三个字符表示建议（按人物、武器、房间的顺序），后跟最多三个玩家的响应，从提出建议的玩家右边的玩家开始。如果玩家没有提供证据，则列出一个 '-'（破折号）；否则列出一个“证据字符”。如果你看到了具体的证据牌（因为你提供了它或者你是接收证据的人），那么证据字符标识那张牌；否则证据字符是 '×'。注意，只有最后一个响应可以是证据字符。所有字符用单个空格分隔。输入中只出现有效的建议/响应序列。", "outputFormat": "显示一个三字符的字符串，标识凶手、谋杀武器和房间。如果可以识别凶手，使用该人物的适当字母；否则使用 '?'。对谋杀武器和房间也做同样处理。", "hint": "时间限制：4 秒，内存限制：512 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6931", "type": "P", "difficulty": 6, "samples": [["5 5\n1 4 0 5 2\n2 1 2 0 1\n0 2 3 4 4\n0 3 0 3 1\n1 2 2 1 1\n", "9\n"], ["2 3\n50 20 3\n20 10 3\n", "30\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "ICPC", "WF"], "title": "[ICPC 2017 WF] Mission Improbable", "background": "", "description": "\n\nIt is a sunny day in spring and you are about to meet Patrick, a close friend and former partner in crime. Patrick lost most of his money betting on programming contests, so he needs to pull off another job. For this he needs your help, even though you have retired from a life of crime. You are reluctant at first, as you have no desire to return to your old criminal ways, but you figure there is no harm in listening to his plan.\n\nThere is a shipment of expensive consumer widgets in a nearby warehouse and Patrick intends to steal as much of it as he can. This entails finding a way into the building, incapacitating security guards, passing through various arrays of laser beams $-$ you know, the usual heist techniques. However, the heart of the warehouse has been equipped with a security system that Patrick cannot disable. This is where he needs your help.\n\nThe shipment is stored in large cubical crates, all of which have the same dimensions. The crates are stacked in neat piles, forming a three-dimensional grid. The security system takes pictures of the piles once per hour using three cameras: a front camera, a side camera and a top camera. The image from the front camera shows the height of the tallest pile in each column, the image from the side camera shows the height of the tallest pile in each row, and the image from the top camera shows whether or not each pile is empty. If the security system detects a change in any of the images, it sounds an alarm.\n\nOnce Patrick is inside, he will determine the heights of the piles and send them to you. Figure C.1 shows a possible layout of the grid and the view from each of the cameras.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14635/1.png)\n\nFigure C.1 : Grid of heights and the corresponding camera views.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14635/2.png)\n\nFigure C.2 : Possible grid of heights after the heist\n\nPatrick wants to steal as many crates as possible. Since he cannot disable the security system, he plans to fool it by arranging the remaining crates into piles so that the next set of camera images are the same. In the above example, it is possible to steal nine crates. Figure C.2 shows one possible post-heist configuration that appears identical to the security system.\n\nPatrick asks you to help him determine the maximum number of crates that can be stolen while leaving a configuration of crates that will fool the security system. Will you help him pull off this final job?\n\n", "inputFormat": "\n\nThe first line of input contains two integers $r (1 \\le r \\le 100)$ and $c (1 \\le c \\le 100)$ , the number of rows and columns in the grid, respectively. Each of the following $r$ lines contains $c$ integers, the heights (in crates) of the piles in the corresponding row. All heights are between $0$ and $10^{9}$ inclusive.\n\n", "outputFormat": "\n\nDisplay the maximum number of crates that can be stolen without being detected.\n\n", "hint": "Time limit: 1 s, Memory limit: 512 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2017 WF] Mission Improbable", "background": "", "description": "\n\nIt is a sunny day in spring and you are about to meet Patrick, a close friend and former partner in crime. Patrick lost most of his money betting on programming contests, so he needs to pull off another job. For this he needs your help, even though you have retired from a life of crime. You are reluctant at first, as you have no desire to return to your old criminal ways, but you figure there is no harm in listening to his plan.\n\nThere is a shipment of expensive consumer widgets in a nearby warehouse and Patrick intends to steal as much of it as he can. This entails finding a way into the building, incapacitating security guards, passing through various arrays of laser beams $-$ you know, the usual heist techniques. However, the heart of the warehouse has been equipped with a security system that Patrick cannot disable. This is where he needs your help.\n\nThe shipment is stored in large cubical crates, all of which have the same dimensions. The crates are stacked in neat piles, forming a three-dimensional grid. The security system takes pictures of the piles once per hour using three cameras: a front camera, a side camera and a top camera. The image from the front camera shows the height of the tallest pile in each column, the image from the side camera shows the height of the tallest pile in each row, and the image from the top camera shows whether or not each pile is empty. If the security system detects a change in any of the images, it sounds an alarm.\n\nOnce Patrick is inside, he will determine the heights of the piles and send them to you. Figure C.1 shows a possible layout of the grid and the view from each of the cameras.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14635/1.png)\n\nFigure C.1 : Grid of heights and the corresponding camera views.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14635/2.png)\n\nFigure C.2 : Possible grid of heights after the heist\n\nPatrick wants to steal as many crates as possible. Since he cannot disable the security system, he plans to fool it by arranging the remaining crates into piles so that the next set of camera images are the same. In the above example, it is possible to steal nine crates. Figure C.2 shows one possible post-heist configuration that appears identical to the security system.\n\nPatrick asks you to help him determine the maximum number of crates that can be stolen while leaving a configuration of crates that will fool the security system. Will you help him pull off this final job?\n\n", "inputFormat": "\n\nThe first line of input contains two integers $r (1 \\le r \\le 100)$ and $c (1 \\le c \\le 100)$ , the number of rows and columns in the grid, respectively. Each of the following $r$ lines contains $c$ integers, the heights (in crates) of the piles in the corresponding row. All heights are between $0$ and $10^{9}$ inclusive.\n\n", "outputFormat": "\n\nDisplay the maximum number of crates that can be stolen without being detected.\n\n", "hint": "Time limit: 1 s, Memory limit: 512 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2017 WF] Mission Improbable", "background": null, "description": "这是一个春天的晴天，你即将见到 Patrick，他是你的密友和前犯罪伙伴。Patrick 因为在编程比赛中赌博而损失了大部分的钱，所以他需要再干一票。为此，他需要你的帮助，尽管你已经从犯罪生活中退休。你起初很不情愿，因为你不想回到过去的犯罪生活，但你觉得听听他的计划也无妨。\n\n附近的一个仓库里有一批昂贵的消费品，Patrick 打算尽可能多地偷走这些物品。这需要找到进入建筑物的方法，制服保安，通过各种激光束——你知道的，通常的抢劫技巧。然而，仓库的核心部分配备了一个 Patrick 无法禁用的安全系统。这就是他需要你帮助的地方。\n\n货物存放在大型立方体箱子中，所有箱子的尺寸相同。箱子整齐地堆叠在一起，形成一个三维网格。安全系统每小时使用三个摄像头拍摄这些堆叠：一个前置摄像头，一个侧面摄像头和一个顶部摄像头。前置摄像头的图像显示每列中最高堆叠的高度，侧面摄像头的图像显示每行中最高堆叠的高度，顶部摄像头的图像显示每个堆叠是否为空。如果安全系统检测到任何图像的变化，它就会发出警报。\n\n一旦 Patrick 进入，他将确定堆叠的高度并发送给你。图 C.1 显示了网格的可能布局和每个摄像头的视图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4lbj63c1.png)\n\n图 C.1：高度网格和相应的摄像头视图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pcswms8b.png)\n\n图 C.2：抢劫后的可能高度网格\n\nPatrick 想要尽可能多地偷走箱子。由于他无法禁用安全系统，他计划通过将剩余的箱子重新排列成堆叠，使得下一组摄像头图像保持不变。在上述示例中，可以偷走九个箱子。图 C.2 显示了一个可能的抢劫后配置，看起来与安全系统相同。\n\nPatrick 请求你帮助他确定在不被检测到的情况下可以偷走的最大箱子数量。你会帮助他完成这最后一票吗？", "inputFormat": "输入的第一行包含两个整数 $r (1 \\le r \\le 100)$ 和 $c (1 \\le c \\le 100)$，分别表示网格的行数和列数。接下来的 $r$ 行中的每一行包含 $c$ 个整数，表示对应行中堆叠的高度（以箱子为单位）。所有高度都在 $0$ 到 $10^{9}$ 之间（含）。", "outputFormat": "输出可以在不被检测到的情况下偷走的最大箱子数量。", "hint": "时间限制：1 秒，内存限制：512 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6932", "type": "P", "difficulty": 6, "samples": [["2 2\n1 3\n2 1\n3 5\n7 2\n", "5\n"], ["1 2\n10 10\n9 11\n11 9\n", "0\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "ICPC", "WF"], "title": "[ICPC 2017 WF] Money for Nothing", "background": "", "description": "\n\nIn this problem you will be solving one of the most profound challenges of humans across the world since the beginning of time $-$ how to make lots of money.\n\nYou are a middleman in the widget market. Your job is to buy widgets from widget producer companies and sell them to widget consumer companies. Each widget consumer company has an open request for one widget per day, until some end date, and a price at which it is willing to buy the widgets. On the other hand, each widget producer company has a start date at which it can start delivering widgets and a price at which it will deliver each widget.\n\nDue to fair competition laws, you can sign a contract with only one producer company and only one consumer company. You will buy widgets from the producer company, one per day, starting on the day it can start delivering, and ending on the date specified by the consumer company. On each of those days you earn the difference between the producer's selling price and the consumer's buying price.\n\nYour goal is to choose the consumer company and the producer company that will maximize your profits.\n\n", "inputFormat": "\n\nThe first line of input contains two integers $m$ and $n (1 \\le m , n \\le 500 000)$ denoting the number of producer and consumer companies in the market, respectively. It is followed by $m$ lines, the $i$ th of which contains two integers $p_{i}$ and $d_{i} (1 \\le p_{i}, d_{i} \\le 10^{9}),$ the price (in dollars) at which the $i$ th producer sells one widget and the day on which the first widget will be available from this company. Then follow $n$ lines, the $j$ th of which contains two integers $q_{j}$ and $e_{j} (1 \\le q_{j}, e_{j} \\le 10^{9}),$ the price (in dollars) at which the $j$ th consumer is willing to buy widgets and the day immediately after the day on which the last widget has to be delivered to this company.\n\n", "outputFormat": "\n\nDisplay the maximum total number of dollars you can earn. If there is no way to sign contracts that gives you any profit, display $0$ .\n\n", "hint": "Time limit: 5 s, Memory limit: 512 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2017 WF] Money for Nothing", "background": "", "description": "\n\nIn this problem you will be solving one of the most profound challenges of humans across the world since the beginning of time $-$ how to make lots of money.\n\nYou are a middleman in the widget market. Your job is to buy widgets from widget producer companies and sell them to widget consumer companies. Each widget consumer company has an open request for one widget per day, until some end date, and a price at which it is willing to buy the widgets. On the other hand, each widget producer company has a start date at which it can start delivering widgets and a price at which it will deliver each widget.\n\nDue to fair competition laws, you can sign a contract with only one producer company and only one consumer company. You will buy widgets from the producer company, one per day, starting on the day it can start delivering, and ending on the date specified by the consumer company. On each of those days you earn the difference between the producer's selling price and the consumer's buying price.\n\nYour goal is to choose the consumer company and the producer company that will maximize your profits.\n\n", "inputFormat": "\n\nThe first line of input contains two integers $m$ and $n (1 \\le m , n \\le 500 000)$ denoting the number of producer and consumer companies in the market, respectively. It is followed by $m$ lines, the $i$ th of which contains two integers $p_{i}$ and $d_{i} (1 \\le p_{i}, d_{i} \\le 10^{9}),$ the price (in dollars) at which the $i$ th producer sells one widget and the day on which the first widget will be available from this company. Then follow $n$ lines, the $j$ th of which contains two integers $q_{j}$ and $e_{j} (1 \\le q_{j}, e_{j} \\le 10^{9}),$ the price (in dollars) at which the $j$ th consumer is willing to buy widgets and the day immediately after the day on which the last widget has to be delivered to this company.\n\n", "outputFormat": "\n\nDisplay the maximum total number of dollars you can earn. If there is no way to sign contracts that gives you any profit, display $0$ .\n\n", "hint": "Time limit: 5 s, Memory limit: 512 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2017 WF] Money for Nothing", "background": null, "description": "在这个问题中，你将解决自古以来人类面临的最深刻的挑战之一——如何赚很多钱。\n\n你是小工具市场中的一个中间商。你的工作是从小工具生产公司购买小工具，然后将其出售给小工具消费公司。每个小工具消费公司每天都有一个开放的请求，直到某个结束日期，并且有一个愿意购买小工具的价格。另一方面，每个小工具生产公司都有一个开始交付小工具的日期和一个交付每个小工具的价格。\n\n由于公平竞争法，你只能与一个生产公司和一个消费公司签订合同。你将从生产公司购买小工具，每天一个，从它可以开始交付的那天开始，到消费公司指定的日期结束。在这些天中，你赚取生产商的售价与消费者的购买价之间的差额。\n\n你的目标是选择能够最大化利润的消费公司和生产公司。", "inputFormat": "输入的第一行包含两个整数 $m$ 和 $n$ $(1 \\le m , n \\le 500 000)$，分别表示市场中的生产公司和消费公司的数量。接下来是 $m$ 行，第 $i$ 行包含两个整数 $p_{i}$ 和 $d_{i}$ $(1 \\le p_{i}, d_{i} \\le 10^{9})$，表示第 $i$ 个生产公司出售一个小工具的价格（美元）和该公司第一个小工具可用的日期。然后是 $n$ 行，第 $j$ 行包含两个整数 $q_{j}$ 和 $e_{j}$ $(1 \\le q_{j}, e_{j} \\le 10^{9})$，表示第 $j$ 个消费公司愿意购买小工具的价格（美元）和该公司最后一个小工具必须交付后的第二天。", "outputFormat": "请输出你能赚取的最大总美元数。如果没有办法签订合同以获得任何利润，则请输出 `0`。", "hint": "时间限制：5 秒，内存限制：512 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6933", "type": "P", "difficulty": 3, "samples": [["3 5\n4 -1\n4 0\n10 3\n", "3.000000000\n"], ["4 10\n5 3\n2 2\n3 6\n3 1\n", "-0.508653377\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2017 WF] Need for Speed", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/c7b5cigq.png)\n\nSheila is a student and she drives at ypical student car: it is old, slow, rusty, and falling apart. Recently,the needle on the speedometer fell off. She glued it back on, but she might have placed it at the wrong angle. Thus, when the speedometer reads $s$,her true speed is $s+c$, where $c$ is an unknown constant(possibly negative).\n\nSheila made a careful record of a recent journey and wants to use this to compute $c$ . The journey consisted of $n$ segments. In the $i^{th}$ segment she traveled a distance of $d_{i}$ and the speedometer read $s_{i}$ for the entire segment. This whole journey took time $t$ . Help Sheila by computing $c$ .\n\nNote that while Sheila's speedometer might have negative readings, her true speed was greater than zero for each segment of the journey.\n\n", "inputFormat": "\n\nThe first line of input contains two integers $n (1 \\le n \\le 1 000)$ , the number of sections in Sheila's journey, and $t (1 \\le t \\le 10^{6}),$ the total time. This is followed by $n$ lines, each describing one segment of Sheila's journey. The $i^{th}$ of these lines contains two integers $d_{i} (1 \\le d_{i} \\le 1 000)$ and $s_{i} (|s_{i}| \\le 1 000)$ , the distance and speedometer reading for the $i^{th}$ segment of the journey. Time is specified in hours, distance in miles, and speed in miles per hour.\n\n", "outputFormat": "\n\nDisplay the constant $c$ in miles per hour. Your answer should have an absolute or relative error of less than $10^{−6}.$\n\n", "hint": "Time limit: 1 s, Memory limit: 512 MB. \n\nspj provider:@[shenyouran](/user/137367).", "locale": "en", "translations": {"en": {"title": "[ICPC 2017 WF] Need for Speed", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/c7b5cigq.png)\n\nSheila is a student and she drives at ypical student car: it is old, slow, rusty, and falling apart. Recently,the needle on the speedometer fell off. She glued it back on, but she might have placed it at the wrong angle. Thus, when the speedometer reads $s$,her true speed is $s+c$, where $c$ is an unknown constant(possibly negative).\n\nSheila made a careful record of a recent journey and wants to use this to compute $c$ . The journey consisted of $n$ segments. In the $i^{th}$ segment she traveled a distance of $d_{i}$ and the speedometer read $s_{i}$ for the entire segment. This whole journey took time $t$ . Help Sheila by computing $c$ .\n\nNote that while Sheila's speedometer might have negative readings, her true speed was greater than zero for each segment of the journey.\n\n", "inputFormat": "\n\nThe first line of input contains two integers $n (1 \\le n \\le 1 000)$ , the number of sections in Sheila's journey, and $t (1 \\le t \\le 10^{6}),$ the total time. This is followed by $n$ lines, each describing one segment of Sheila's journey. The $i^{th}$ of these lines contains two integers $d_{i} (1 \\le d_{i} \\le 1 000)$ and $s_{i} (|s_{i}| \\le 1 000)$ , the distance and speedometer reading for the $i^{th}$ segment of the journey. Time is specified in hours, distance in miles, and speed in miles per hour.\n\n", "outputFormat": "\n\nDisplay the constant $c$ in miles per hour. Your answer should have an absolute or relative error of less than $10^{−6}.$\n\n", "hint": "Time limit: 1 s, Memory limit: 512 MB. \n\nspj provider:@[shenyouran](/user/137367).", "locale": "en"}, "zh-CN": {"title": "[ICPC 2017 WF] Need for Speed", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/c7b5cigq.png)\n\nSheila 是一名学生，她开着一辆典型的学生车：这辆车又旧又慢，生锈并且快要散架了。最近，车速表上的指针掉了下来。她把它粘回去了，但可能放错了角度。因此，当车速表显示速度为 $s$ 时，她的真实速度是 $s+c$，其中 $c$ 是一个未知常数（可能为负）。 \n\nSheila 详细记录了最近的一次旅程，并希望利用这些记录来计算 $c$。这次旅程由 $n$ 段组成。在第 $i$ 段中，她行驶的距离为 $d_{i}$，车速表在整个段落中显示的速度为 $s_{i}$。整个旅程花费的时间为 $t$。请帮助 Sheila 计算 $c$。\n\n注意，虽然 Sheila 的车速表可能显示负数，但她的真实速度在旅程的每一段中都是大于零的。", "inputFormat": "输入的第一行包含两个整数 $n (1 \\le n \\le 1 000)$，表示 Sheila 旅程的段数，以及 $t (1 \\le t \\le 10^{6})$，表示总时间。接下来有 $n$ 行，每行描述 Sheila 旅程的一个段。在这些行中的第 $i$ 行包含两个整数 $d_{i} (1 \\le d_{i} \\le 1 000)$ 和 $s_{i} (|s_{i}| \\le 1 000)$，分别表示旅程第 $i$ 段的距离和车速表读数。时间以小时为单位，距离以英里为单位，速度以英里每小时为单位。", "outputFormat": "输出常数 $c$，单位为英里每小时。你的答案的绝对误差或相对误差应小于 $10^{-6}$。", "hint": "时间限制：1 秒，内存限制：512 MB。\n\nspj 提供者：@[shenyouran](/user/137367)。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6934", "type": "P", "difficulty": 4, "samples": [["2 1\n50 20000\n150 10000\n", "66670000\n"], ["2 2\n50 20000\n150 10000\n", "0\n"], ["4 2\n0 30000\n25 30000\n50 30000\n255 30000\n", "37500000\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "ICPC", "WF"], "title": "[ICPC 2017 WF] Posterize", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/gc3c052t.png)\n\nPixels in a digital picture can be represented with three integers in the range $0$ to $255$ that indicate the intensity of the red, green, and blue colors. To compress an image or to create an artistic effect, many photo-editing tools include a `posterize` operation which works as follows. Each color channel is examined separately; this problem focuses only on the red channel. Rather than allow all integers from $0$ to $255$ for the red channel, a posterized image allows at most $k$ integers from this range. Each pixel's original red intensity is replaced with the nearest of the allowed integers. The photo-editing tool selects a set of $k$ integers that minimizes the sum of the squared errors introduced across all pixels in the original image. If there are $n$ pixels that have original red values $r_{1},$ . . . , $r_{n},$ and $k$ allowed integers $v_{1},$ . . . , $v_{k},$ the sum of squared errors is defined as\n\n$$\\sum\\limits_{i=1}^n \\min\\limits_{1 \\le j \\le k}(r_i-v_j)^2$$\n\nYour task is to compute the minimum achievable sum of squared errors, given parameter $k$ and a description of the red intensities of an image's pixels.\n\n", "inputFormat": "\n\nThe first line of the input contains two integers $d (1 \\le d \\le 256)$ , the number of distinct red values that occur in the original image, and $k (1 \\le k \\le d)$ , the number of distinct red values allowed in the posterized image. The remaining $d$ lines indicate the number of pixels of the image having various red values. Each such line contains two integers $r (0 \\le r \\le 255)$ and $p (1 \\le p \\le 2^{26}),$ where $r$ is a red intensity value and $p$ is the number of pixels having red intensity $r$ . Those $d$ lines are given in increasing order of red value.\n\n", "outputFormat": "\n\nDisplay the sum of the squared errors for an optimally chosen set of $k$ allowed integer values.\n\n", "hint": "Time limit: 2 s, Memory limit: 512 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2017 WF] Posterize", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/gc3c052t.png)\n\nPixels in a digital picture can be represented with three integers in the range $0$ to $255$ that indicate the intensity of the red, green, and blue colors. To compress an image or to create an artistic effect, many photo-editing tools include a `posterize` operation which works as follows. Each color channel is examined separately; this problem focuses only on the red channel. Rather than allow all integers from $0$ to $255$ for the red channel, a posterized image allows at most $k$ integers from this range. Each pixel's original red intensity is replaced with the nearest of the allowed integers. The photo-editing tool selects a set of $k$ integers that minimizes the sum of the squared errors introduced across all pixels in the original image. If there are $n$ pixels that have original red values $r_{1},$ . . . , $r_{n},$ and $k$ allowed integers $v_{1},$ . . . , $v_{k},$ the sum of squared errors is defined as\n\n$$\\sum\\limits_{i=1}^n \\min\\limits_{1 \\le j \\le k}(r_i-v_j)^2$$\n\nYour task is to compute the minimum achievable sum of squared errors, given parameter $k$ and a description of the red intensities of an image's pixels.\n\n", "inputFormat": "\n\nThe first line of the input contains two integers $d (1 \\le d \\le 256)$ , the number of distinct red values that occur in the original image, and $k (1 \\le k \\le d)$ , the number of distinct red values allowed in the posterized image. The remaining $d$ lines indicate the number of pixels of the image having various red values. Each such line contains two integers $r (0 \\le r \\le 255)$ and $p (1 \\le p \\le 2^{26}),$ where $r$ is a red intensity value and $p$ is the number of pixels having red intensity $r$ . Those $d$ lines are given in increasing order of red value.\n\n", "outputFormat": "\n\nDisplay the sum of the squared errors for an optimally chosen set of $k$ allowed integer values.\n\n", "hint": "Time limit: 2 s, Memory limit: 512 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2017 WF] Posterize", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/gc3c052t.png)\n\n数字图像中的像素可以用三个范围在 $0$ 到 $255$ 之间的整数表示，分别表示红、绿、蓝三种颜色的强度。为了压缩图像或创造艺术效果，许多照片编辑工具包括一个 `posterize` 操作，其工作原理如下。每个颜色通道单独检查；这个问题只关注红色通道。对于红色通道，posterized 图像最多允许 $k$ 个整数，而不是允许从 $0$ 到 $255$ 的所有整数。每个像素的原始红色强度被替换为允许整数中最接近的一个。照片编辑工具选择一组 $k$ 个整数，以最小化原始图像中所有像素引入的平方误差之和。如果有 $n$ 个像素的原始红色值为 $r_{1}, \\ldots, r_{n}$，并且有 $k$ 个允许的整数 $v_{1}, \\ldots, v_{k}$，则平方误差之和定义为\n\n$$\\sum\\limits_{i=1}^n \\min\\limits_{1 \\le j \\le k}(r_i-v_j)^2$$\n\n你的任务是计算在给定参数 $k$ 和图像像素红色强度描述的情况下，可以实现的最小平方误差之和。", "inputFormat": "输入的第一行包含两个整数 $d (1 \\le d \\le 256)$，表示原始图像中出现的不同红色值的数量，以及 $k (1 \\le k \\le d)$，表示 posterized 图像中允许的不同红色值的数量。接下来的 $d$ 行表示图像中具有各种红色值的像素数量。每行包含两个整数 $r (0 \\le r \\le 255)$ 和 $p (1 \\le p \\le 2^{26})$，其中 $r$ 是一个红色强度值，$p$ 是具有红色强度 $r$ 的像素数量。这 $d$ 行按红色值递增的顺序给出。", "outputFormat": "显示为优化选择的 $k$ 个允许整数值的平方误差之和。", "hint": "时间限制：2 秒，内存限制：512 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6935", "type": "P", "difficulty": 6, "samples": [["10 10\n.#...#...#\n##..##..##\n##.#.##...\n##.#.##...\n.#...#####\n...##..#.#\n......###.\n##.#.##...\n#..#..#..#\n##..##..##\n", ".#\n##\n"], ["8 8\n##..#.##\n#.####.#\n.#.#.#..\n.##.#.##\n.#.#.#..\n.##.#.##\n#..#.###\n##.#.##.\n", "####\n#..#\n#.##\n###.\n"], ["5 4\n#....\n..###\n..###\n..###\n", "#\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2017 WF] Replicate Replicate Rfplicbte", "background": "", "description": "\n\nThe owner of the Automatic Cellular Manufacturing corporation has just patented a new process for the mass production of identical parts. Her approach uses a two-dimensional lattice of two-state cells, each of which is either `empty` or `filled. ` The exact details are, of course, proprietary.\n\nInitially, a set of cells in the lattice is filled with a copy of the part that is to be reproduced. In a sequence of discrete steps, each cell in the lattice simultaneously updates its state by examining its own state and those of its eight surrounding neighbors. If an odd number of these nine cells are filled, the cell's state in the next time step will be filled, otherwise it will be empty. Figure G.1 shows several steps in the replication process for a simple pattern consisting of three filled cells.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14639/1.png)\n\nFigure G.1 : The replication process.\n\nHowever, a bug has crept into the process. After each update step, one cell in the lattice might spontaneously flip its state. For instance, Figure G.2 shows what might happen if a cell flipped its state after the first time step and another flipped its state after the third time step.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14639/2.png)\n\nFigure G.2 : Errors in the replication process. This figure corresponds to Sample Input $1$ .\n\nUnfortunately, the original patterns were lost, and only the (possibly corrupted) results of the replication remain. Can you write a program to determine a smallest possible nonempty initial pattern that could have resulted in a given final pattern?\n\n", "inputFormat": "\n\nThe first line of input contains two integers $w (1 \\le w \\le 300)$ and $h (1 \\le h \\le 300)$ , where $w$ and $h$ are the width and height of the bounding box of the final pattern. Following that are $h$ lines, each containing $w$ characters, giving the final pattern. Each character is either $‘. '$ (representing an empty cell) or $‘#'$ (representing a filled cell). There is at least one filled cell in the first row, in the last row, in the first column, and in the last column.\n\n", "outputFormat": "\n\nDisplay a minimum-size nonempty pattern that could have resulted in the given pattern, assuming that at each stage of the replication process at most one cell spontaneously changed state. The size of a pattern is the area of its bounding box. If there is more than one possible minimum-size nonempty starting pattern, any one will be accepted. Use the character $‘. '$ for empty cells and $‘#'$ for filled cells. Use the minimum number of rows and columns needed to display the pattern.\n\n", "hint": "Time limit: 3 s, Memory limit: 512 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2017 WF] Replicate Replicate Rfplicbte", "background": "", "description": "\n\nThe owner of the Automatic Cellular Manufacturing corporation has just patented a new process for the mass production of identical parts. Her approach uses a two-dimensional lattice of two-state cells, each of which is either `empty` or `filled. ` The exact details are, of course, proprietary.\n\nInitially, a set of cells in the lattice is filled with a copy of the part that is to be reproduced. In a sequence of discrete steps, each cell in the lattice simultaneously updates its state by examining its own state and those of its eight surrounding neighbors. If an odd number of these nine cells are filled, the cell's state in the next time step will be filled, otherwise it will be empty. Figure G.1 shows several steps in the replication process for a simple pattern consisting of three filled cells.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14639/1.png)\n\nFigure G.1 : The replication process.\n\nHowever, a bug has crept into the process. After each update step, one cell in the lattice might spontaneously flip its state. For instance, Figure G.2 shows what might happen if a cell flipped its state after the first time step and another flipped its state after the third time step.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14639/2.png)\n\nFigure G.2 : Errors in the replication process. This figure corresponds to Sample Input $1$ .\n\nUnfortunately, the original patterns were lost, and only the (possibly corrupted) results of the replication remain. Can you write a program to determine a smallest possible nonempty initial pattern that could have resulted in a given final pattern?\n\n", "inputFormat": "\n\nThe first line of input contains two integers $w (1 \\le w \\le 300)$ and $h (1 \\le h \\le 300)$ , where $w$ and $h$ are the width and height of the bounding box of the final pattern. Following that are $h$ lines, each containing $w$ characters, giving the final pattern. Each character is either $‘. '$ (representing an empty cell) or $‘#'$ (representing a filled cell). There is at least one filled cell in the first row, in the last row, in the first column, and in the last column.\n\n", "outputFormat": "\n\nDisplay a minimum-size nonempty pattern that could have resulted in the given pattern, assuming that at each stage of the replication process at most one cell spontaneously changed state. The size of a pattern is the area of its bounding box. If there is more than one possible minimum-size nonempty starting pattern, any one will be accepted. Use the character $‘. '$ for empty cells and $‘#'$ for filled cells. Use the minimum number of rows and columns needed to display the pattern.\n\n", "hint": "Time limit: 3 s, Memory limit: 512 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2017 WF] Replicate Replicate Rfplicbte", "background": "", "description": "自动化蜂窝制造公司的所有者刚刚为一种生产相同零件的新工艺申请了专利。她的方法使用了一个二维的两态单元格网格，每个单元格要么是“空的”，要么是“填充的”。具体细节当然是专有的。\n\n最初，网格中的一组单元格被填充为要复制的零件的副本。在一系列离散步骤中，网格中的每个单元格通过检查自身状态及其八个周围邻居的状态来同时更新其状态。如果这九个单元格中有奇数个是填充的，则该单元格在下一个时间步的状态将是填充的，否则将是空的。图 G.1 显示了一个由三个填充单元格组成的简单图案的复制过程中的几个步骤。\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14639/1.png)\n\n图 G.1：复制过程。\n\n然而，过程出现了一个错误。在每次更新步骤之后，网格中的一个单元格可能会自发地翻转其状态。例如，图 G.2 显示了如果一个单元格在第一次时间步后翻转其状态，另一个在第三次时间步后翻转其状态可能会发生的情况。\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14639/2.png)\n\n图 G.2：复制过程中的错误。此图对应于样例输入 $1$。\n\n不幸的是，原始图案丢失了，只剩下（可能被破坏的）复制结果。你能编写一个程序来确定可能导致给定最终图案的最小可能非空初始图案吗？", "inputFormat": "输入的第一行包含两个整数 $w (1 \\le w \\le 300)$ 和 $h (1 \\le h \\le 300)$，其中 $w$ 和 $h$ 是最终图案的边界框的宽度和高度。接下来的 $h$ 行，每行包含 $w$ 个字符，给出了最终图案。每个字符要么是 ‘.’（表示空单元格），要么是 ‘#’（表示填充单元格）。在第一行、最后一行、第一列和最后一列中至少有一个填充单元格。", "outputFormat": "显示一个可能导致给定图案的最小尺寸非空图案，假设在复制过程的每个阶段最多有一个单元格自发改变状态。图案的大小是其边界框的面积。如果有多个可能的最小尺寸非空起始图案，任何一个都将被接受。使用字符 ‘.’ 表示空单元格，‘#’ 表示填充单元格。使用显示图案所需的最少行和列。", "hint": "时间限制：3 秒，内存限制：512 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6936", "type": "P", "difficulty": 7, "samples": [["2 10\n0 15\n5 20\n", "yes\n"], ["2 10\n1 15\n0 20\n", "no\n"], ["2 10\n5 30\n10 20\n", "yes\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "ICPC", "WF"], "title": "[ICPC 2017 WF] Scenery", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/jnez9lpt.png)\n\nImages by John Fowler, Carol Highsmith, and Richard Woodland\n\nYou have decided to spend a day of your trip to Rapid City taking photographs of the South Dakota Badlands, which are renowned for their spectacular and unusual land formations. You are an amateur photographer, yet very particular about lighting conditions.\n\nAfter some careful research, you have located a beautiful location in the Badlands, surrounded by picturesque landscapes. You have determined a variety of features that you wish to photograph from this location. For each feature you have identified the earliest and latest time of day at which the position of the sun is ideal. However, it will take quite a bit of time to take each photograph, given the need to reposition the tripod and camera and your general perfectionism. So you are wondering if it will be possible to successfully take photographs of all these features in one day.\n\n", "inputFormat": "\n\nThe first line of the input contains two integers $n (1 \\le n \\le 10^{4})$ and $t (1 \\le t \\le 10^{5}),$ where $n$ is the number of desired photographs and $t$ is the time you spend to take each photograph. Following that are $n$ additional lines, each describing the available time period for one of the photographs. Each such line contains two nonnegative integers a and $b$ , where a is the earliest time that you may begin working on that photograph, and $b$ is the time by which the photograph must be completed, with a $+ t \\le b \\le 10^{9}.$\n\n", "outputFormat": "\n\nDisplay yes if it is possible to take all $n$ photographs, and no otherwise.\n\n", "hint": "Time limit: 6 s, Memory limit: 512 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2017 WF] Scenery", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/jnez9lpt.png)\n\nImages by John Fowler, Carol Highsmith, and Richard Woodland\n\nYou have decided to spend a day of your trip to Rapid City taking photographs of the South Dakota Badlands, which are renowned for their spectacular and unusual land formations. You are an amateur photographer, yet very particular about lighting conditions.\n\nAfter some careful research, you have located a beautiful location in the Badlands, surrounded by picturesque landscapes. You have determined a variety of features that you wish to photograph from this location. For each feature you have identified the earliest and latest time of day at which the position of the sun is ideal. However, it will take quite a bit of time to take each photograph, given the need to reposition the tripod and camera and your general perfectionism. So you are wondering if it will be possible to successfully take photographs of all these features in one day.\n\n", "inputFormat": "\n\nThe first line of the input contains two integers $n (1 \\le n \\le 10^{4})$ and $t (1 \\le t \\le 10^{5}),$ where $n$ is the number of desired photographs and $t$ is the time you spend to take each photograph. Following that are $n$ additional lines, each describing the available time period for one of the photographs. Each such line contains two nonnegative integers a and $b$ , where a is the earliest time that you may begin working on that photograph, and $b$ is the time by which the photograph must be completed, with a $+ t \\le b \\le 10^{9}.$\n\n", "outputFormat": "\n\nDisplay yes if it is possible to take all $n$ photographs, and no otherwise.\n\n", "hint": "Time limit: 6 s, Memory limit: 512 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2017 WF] Scenery", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/jnez9lpt.png)\n\n图片由 John Fowler、Carol Highsmith 和 Richard Woodland 提供。\n\n你决定在前往拉皮德城的旅行中花一天时间拍摄南达科他州的荒地，这里因其壮观而独特的地貌而闻名。你是一位业余摄影师，但对光照条件非常讲究。\n\n经过仔细研究，你找到了一个美丽的拍摄地点，周围是如画的风景。你确定了希望从这个地点拍摄的各种景观特征。对于每个特征，你都确定了太阳位置理想的最早和最晚时间。然而，由于需要重新定位三脚架和相机以及你的完美主义，拍摄每张照片都需要相当长的时间。因此，你想知道是否有可能在一天内成功拍摄所有这些特征。", "inputFormat": "输入的第一行包含两个整数 $n (1 \\le n \\le 10^{4})$ 和 $t (1 \\le t \\le 10^{5})$，其中 $n$ 是希望拍摄的照片数量，$t$ 是拍摄每张照片所需的时间。接下来的 $n$ 行中，每行描述了一张照片的可用时间段。每行包含两个非负整数 $a$ 和 $b$，其中 $a$ 是可以开始拍摄该照片的最早时间，$b$ 是必须完成拍摄的时间，满足 $a + t \\le b \\le 10^{9}$。", "outputFormat": "如果可以拍摄所有 $n$ 张照片，则显示 yes，否则显示 no。", "hint": "时间限制：6 秒，内存限制：512 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6937", "type": "P", "difficulty": 3, "samples": [["9 5\nc t\ni r\nk p\no c\nr o\nt e\nt f\nu h\nw p\nwe we\ncan the\nwork people\nit of\nout the\n", "yes\nno\nno\nyes\nyes\n"], ["3 3\na c\nb a\na b\naaa abc\nabc aaa\nacm bcm\n", "yes\nno\nyes\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "ICPC", "WF"], "title": "[ICPC 2017 WF] Secret Chamber at Mount Rushmore", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/i8ay281j.png)\n\nBy now you have probably heard that there is a spectacular stone sculp-ture featuring four famous U.S. presidents at Mount Rushmore.  How-ever, very few people know that this monument contains a secret cham-ber. This sounds like something out of a plot of a Hollywood movie, butthe chamber really exists.  It can be found behind the head of AbrahamLincoln and was designed to serve as a Hall of Records to store impor-tant historical U.S. documents and artifacts.  Historians claim that theconstruction of the hall was halted in 1939 and the uncompleted cham-ber was left untouched until the late 1990s,  but this is not the wholetruth.\n\nIn $1982$ , the famous archaeologist $S$ . Dakota Jones secretly visited the monument and found that the chamber actually was completed, but it was kept confidential. This seemed suspicious and after some poking around, she found a hidden vault and some documents inside. Unfortunately, these documents did not make any sense and were all gibberish. She suspected that they had been written in a code, but she could not decipher them despite all her efforts.\n\nEarlier this week when she was in the area to follow the ACM-ICPC World Finals, Dr. Jones finally discovered the key to deciphering the documents, in Connolly Hall of $SDSM&T$ . She found a document that contains a list of translations of letters. Some letters may have more than one translation, and others may have no translation. By repeatedly applying some of these translations to individual letters in the gibberish documents, she might be able to decipher them to yield historical U.S . documents such as the Declaration of Independence and the Constitution. She needs your help.\n\nYou are given the possible translations of letters and a list of pairs of original and deciphered words. Your task is to verify whether the words in each pair match. Two words match if they have the same length and if each letter of the first word can be turned into the corresponding letter of the second word by using the available translations zero or more times.\n\n", "inputFormat": "\n\nThe first line of input contains two integers $m (1 \\le m \\le 500)$ and $n (1 \\le n \\le 50)$ , where $m$ is the number of translations of letters and $n$ is the number of word pairs. Each of the next $m$ lines contains two distinct space-separated letters a and $b$ , indicating that the letter a can be translated to the letter $b$ . Each ordered pair of letters $(a , b)$ appears at most once. Following this are $n$ lines, each containing a word pair to check. Translations and words use only lowercase letters $‘a'-‘z',$ and each word contains at least $1$ and at most $50$ letters.\n\n", "outputFormat": "\n\nFor each pair of words, display yes if the two words match, and no otherwise.\n\n", "hint": "Time limit: 1 s, Memory limit: 512 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2017 WF] Secret Chamber at Mount Rushmore", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/i8ay281j.png)\n\nBy now you have probably heard that there is a spectacular stone sculp-ture featuring four famous U.S. presidents at Mount Rushmore.  How-ever, very few people know that this monument contains a secret cham-ber. This sounds like something out of a plot of a Hollywood movie, butthe chamber really exists.  It can be found behind the head of AbrahamLincoln and was designed to serve as a Hall of Records to store impor-tant historical U.S. documents and artifacts.  Historians claim that theconstruction of the hall was halted in 1939 and the uncompleted cham-ber was left untouched until the late 1990s,  but this is not the wholetruth.\n\nIn $1982$ , the famous archaeologist $S$ . Dakota Jones secretly visited the monument and found that the chamber actually was completed, but it was kept confidential. This seemed suspicious and after some poking around, she found a hidden vault and some documents inside. Unfortunately, these documents did not make any sense and were all gibberish. She suspected that they had been written in a code, but she could not decipher them despite all her efforts.\n\nEarlier this week when she was in the area to follow the ACM-ICPC World Finals, Dr. Jones finally discovered the key to deciphering the documents, in Connolly Hall of $SDSM&T$ . She found a document that contains a list of translations of letters. Some letters may have more than one translation, and others may have no translation. By repeatedly applying some of these translations to individual letters in the gibberish documents, she might be able to decipher them to yield historical U.S . documents such as the Declaration of Independence and the Constitution. She needs your help.\n\nYou are given the possible translations of letters and a list of pairs of original and deciphered words. Your task is to verify whether the words in each pair match. Two words match if they have the same length and if each letter of the first word can be turned into the corresponding letter of the second word by using the available translations zero or more times.\n\n", "inputFormat": "\n\nThe first line of input contains two integers $m (1 \\le m \\le 500)$ and $n (1 \\le n \\le 50)$ , where $m$ is the number of translations of letters and $n$ is the number of word pairs. Each of the next $m$ lines contains two distinct space-separated letters a and $b$ , indicating that the letter a can be translated to the letter $b$ . Each ordered pair of letters $(a , b)$ appears at most once. Following this are $n$ lines, each containing a word pair to check. Translations and words use only lowercase letters $‘a'-‘z',$ and each word contains at least $1$ and at most $50$ letters.\n\n", "outputFormat": "\n\nFor each pair of words, display yes if the two words match, and no otherwise.\n\n", "hint": "Time limit: 1 s, Memory limit: 512 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2017 WF] Secret Chamber at Mount Rushmore", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/i8ay281j.png)\n\n到现在你可能已经听说过在拉什莫尔山上有一个壮观的石雕，展示了四位著名的美国总统。然而，很少有人知道这个纪念碑中包含一个秘密的房间。这听起来像是好莱坞电影的情节，但这个房间确实存在。它位于亚伯拉罕·林肯的头部后面，设计用作存放重要历史美国文件和文物的记录大厅。历史学家声称大厅的建设在 1939 年停止，未完成的房间直到 1990 年代末才被触及，但这并不是全部真相。\n\n在 1982 年，著名考古学家 S. Dakota Jones 秘密访问了该纪念碑，发现房间实际上已经完成，但被保密。这似乎很可疑，在一些调查之后，她发现了一个隐藏的保险库和一些文件。不幸的是，这些文件没有任何意义，都是乱码。她怀疑它们是用密码写的，但尽管她付出了所有努力，她也无法解码。\n\n本周早些时候，当她在该地区参加 ACM-ICPC 世界总决赛时，Jones 博士终于在 SDSM&T 的 Connolly Hall 发现了解码文件的关键。她找到了一份包含字母翻译列表的文件。有些字母可能有多个翻译，而其他字母可能没有翻译。通过对乱码文件中的单个字母反复应用这些翻译，她可能能够解码它们以获得历史美国文件，如《独立宣言》和《宪法》。她需要你的帮助。\n\n你被给定了字母的可能翻译和一对原始和解码单词的列表。你的任务是验证每对单词是否匹配。如果两个单词长度相同，并且第一个单词的每个字母都可以通过使用可用的翻译零次或多次转换为第二个单词的对应字母，则两个单词匹配。", "inputFormat": "输入的第一行包含两个整数 $m (1 \\le m \\le 500)$ 和 $n (1 \\le n \\le 50)$，其中 $m$ 是字母的翻译数量，$n$ 是单词对的数量。接下来的 $m$ 行中的每一行包含两个不同的空格分隔的字母 a 和 $b$，表示字母 a 可以翻译为字母 $b$。每个字母对 $(a , b)$ 最多出现一次。接下来是 $n$ 行，每行包含一个要检查的单词对。翻译和单词仅使用小写字母 'a'-'z'，每个单词至少包含 1 个字母，最多包含 50 个字母。", "outputFormat": "对于每对单词，如果两个单词匹配，则显示 yes，否则显示 no。", "hint": "时间限制：1 秒，内存限制：512 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6938", "type": "P", "difficulty": 7, "samples": [["6 6 3.0 0.66\n2 4 8\n4 6 1\n3 6 1\n4 5 5\n1 5 7\n3 5 3\n", "0.000000000 1.360000000\n0.000000000 1.000000000\n0.000000000 -1.000000000\n0.000000000 0.360000000\n0.880000000 0.000000000\n-0.880000000 -0.360000000\n1.02037965897\n"], ["5 5 1.0 0.5\n1 2 10\n2 3 10\n3 4 10\n4 5 10\n3 5 10\n", "5 0\n5 5\n4.2 3.14159\n4.2 3.14159\n-4.2 -3.14159\n5\n"]], "limits": {"time": [4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "网络流", "Special Judge", "导数", "ICPC", "WF"], "title": "[ICPC 2017 WF] Son of Pipe Stream", "background": "", "description": "\n\nTwo years ago, you helped install the nation's very first Flubber pipe network in your hometown, to great success. Polls show that everyone loves having their own Flubber dispenser in their kitchen, and now a few enterprising citizens have discovered a use for it. Apparently Flubber, when mixed with water, can help extinguish fires! This is a very timely discovery, as out-of-control fires have lately been surprisingly common.\n\nYour hometown's city council would like to make use of this property of Flubber by creating the $Flubber/water$ mixture at a centrally located station. This station, which is called the Flubber Department (FD) will also have specialized employees trained to travel to the locations of fires and make use of their processed Flubber to control the blazes.\n\nThe pipes are already in place all around the city. You are given a layout of the pipes, and must determine how to route Flubber from the Flubber factory and water from a local source through the pipes to the FD.\n\nNote that both Flubber and water will be flowing through the same network of pipes, perhaps even the same pipe. All pipes are bidirectional, but Flubber and water cannot move in opposite directions through the same pipe. Furthermore, if both liquids are sent in the same direction through the same pipe, they will inevitably mix. Therefore the nodes in the network have been equipped with special membranes and filters that enable you to separate and reorganize all incoming mixtures as you see fit. The network is a closed system, so the total rate of each fluid going into a node must equal the total rate of that fluid going out, except at the source of that fluid and the destination (the FD).\n\nEach pipe has a certain capacity. Flubber, being somewhat sluggish, has a viscosity value $v$ , so a pipe that can transport $v liters/second$ of water can transport only $1 liter/second$ of Flubber. The pipe's capacity scales linearly for mixtures of the two. To be precise, if $c$ denotes the water capacity of the pipe and $f$ and $w$ are the rates of Flubber and water moving through the pipe (all measured in $liters/second),$ then the capacity constraint is given by the inequality $v · f + w \\le c$ .\n\nYour main concern is balancing the mixture that reaches the FD. You would like as much total liquid as possible, but you also need a sufficient amount of water $-$ because undiluted Flubber is highly flammable $-$ and a sufficient amount of Flubber $-$ because it would not be much of a `Flubber Department` without Flubber! You have come up with a formula to measure the `value` of the final mixture: $F^{a} · W^{1−a},$ where $F$ is the rate of incoming Flubber in $liters/second, W$ is the rate of incoming water in $liters/second,$ and a is a given constant between $0$ and $1$ .\n\nDetermine the maximum value of $F^{a} · W^{1−a}$ that can be achieved and how to route the Flubber and water to achieve it.\n\n", "inputFormat": "\n\nThe input starts with a line containing the number of locations $n (3 \\le n \\le 200)$ , the number of pipes $p (n − 1 \\le p \\le $ n(n $− 1)/2)$ , and the real values $v (1 \\le v \\le 10)$ and a ($0$ . $01 \\le $ a $ \\le 0$ . $99$) . Locations are numbered from $1$ to $n$ ; $1$ is the Flubber factory, $2$ is the water source, and $3$ is the FD. The real values have at most $10$ digits after the decimal point.\n\nThe following $p$ lines each describe one pipe. Each line contains two integers $j$ and $k (1 \\le j < k \\le n)$ , giving the locations connected by the pipe, and an integer $c (1 \\le c \\le 10)$ , giving the water capacity of the pipe in $liters/second.$\n\nNo two pipes connect the same pair of locations. Furthermore, it is guaranteed that the network is connected.\n\n", "outputFormat": "\n\nFirst, for each pipe (in the order given in the input), display two values: the rate of Flubber moving through it, and the rate of water moving through it (negative if the liquid is moving from $k$ to $j)$ , such that $F^{a} ·W^{1−a}$ is maximized. Then display that maximum value accurate to within an absolute error of $10^{−4}.$\n\nIf there are multiple solutions, any one will be accepted. All constraints (not sending Flubber and water in opposite directions along the same pipe, flow conservation, pipe capacities, and consistency between the constructed solution and its claimed value) must be satisfied within an absolute error of $10^{−4}.$\n\n", "hint": "Time limit: 5 s, Memory limit: 512 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2017 WF] Son of Pipe Stream", "background": "", "description": "\n\nTwo years ago, you helped install the nation's very first Flubber pipe network in your hometown, to great success. Polls show that everyone loves having their own Flubber dispenser in their kitchen, and now a few enterprising citizens have discovered a use for it. Apparently Flubber, when mixed with water, can help extinguish fires! This is a very timely discovery, as out-of-control fires have lately been surprisingly common.\n\nYour hometown's city council would like to make use of this property of Flubber by creating the $Flubber/water$ mixture at a centrally located station. This station, which is called the Flubber Department (FD) will also have specialized employees trained to travel to the locations of fires and make use of their processed Flubber to control the blazes.\n\nThe pipes are already in place all around the city. You are given a layout of the pipes, and must determine how to route Flubber from the Flubber factory and water from a local source through the pipes to the FD.\n\nNote that both Flubber and water will be flowing through the same network of pipes, perhaps even the same pipe. All pipes are bidirectional, but Flubber and water cannot move in opposite directions through the same pipe. Furthermore, if both liquids are sent in the same direction through the same pipe, they will inevitably mix. Therefore the nodes in the network have been equipped with special membranes and filters that enable you to separate and reorganize all incoming mixtures as you see fit. The network is a closed system, so the total rate of each fluid going into a node must equal the total rate of that fluid going out, except at the source of that fluid and the destination (the FD).\n\nEach pipe has a certain capacity. Flubber, being somewhat sluggish, has a viscosity value $v$ , so a pipe that can transport $v liters/second$ of water can transport only $1 liter/second$ of Flubber. The pipe's capacity scales linearly for mixtures of the two. To be precise, if $c$ denotes the water capacity of the pipe and $f$ and $w$ are the rates of Flubber and water moving through the pipe (all measured in $liters/second),$ then the capacity constraint is given by the inequality $v · f + w \\le c$ .\n\nYour main concern is balancing the mixture that reaches the FD. You would like as much total liquid as possible, but you also need a sufficient amount of water $-$ because undiluted Flubber is highly flammable $-$ and a sufficient amount of Flubber $-$ because it would not be much of a `Flubber Department` without Flubber! You have come up with a formula to measure the `value` of the final mixture: $F^{a} · W^{1−a},$ where $F$ is the rate of incoming Flubber in $liters/second, W$ is the rate of incoming water in $liters/second,$ and a is a given constant between $0$ and $1$ .\n\nDetermine the maximum value of $F^{a} · W^{1−a}$ that can be achieved and how to route the Flubber and water to achieve it.\n\n", "inputFormat": "\n\nThe input starts with a line containing the number of locations $n (3 \\le n \\le 200)$ , the number of pipes $p (n − 1 \\le p \\le $ n(n $− 1)/2)$ , and the real values $v (1 \\le v \\le 10)$ and a ($0$ . $01 \\le $ a $ \\le 0$ . $99$) . Locations are numbered from $1$ to $n$ ; $1$ is the Flubber factory, $2$ is the water source, and $3$ is the FD. The real values have at most $10$ digits after the decimal point.\n\nThe following $p$ lines each describe one pipe. Each line contains two integers $j$ and $k (1 \\le j < k \\le n)$ , giving the locations connected by the pipe, and an integer $c (1 \\le c \\le 10)$ , giving the water capacity of the pipe in $liters/second.$\n\nNo two pipes connect the same pair of locations. Furthermore, it is guaranteed that the network is connected.\n\n", "outputFormat": "\n\nFirst, for each pipe (in the order given in the input), display two values: the rate of Flubber moving through it, and the rate of water moving through it (negative if the liquid is moving from $k$ to $j)$ , such that $F^{a} ·W^{1−a}$ is maximized. Then display that maximum value accurate to within an absolute error of $10^{−4}.$\n\nIf there are multiple solutions, any one will be accepted. All constraints (not sending Flubber and water in opposite directions along the same pipe, flow conservation, pipe capacities, and consistency between the constructed solution and its claimed value) must be satisfied within an absolute error of $10^{−4}.$\n\n", "hint": "Time limit: 5 s, Memory limit: 512 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2017 WF] Son of Pipe Stream", "background": "", "description": "两年以前，你帮助你的家乡安装了国内的第一个 Flubber 管道网络，获得了巨大成功。投票表明每个人都喜欢在自己家的厨房里装上 Flubber 分配器，而现在一些有进取心的市民发现了一种新的用途——Flubber 和水混合后似乎可以帮助灭火！这是一个很及时的发现，因为最近无法控制的大火出奇地常见。\n\n你家乡的市议会想在一个位于中央的地方制造 Flubber 和水的混合物以利用 Flubber 的这个属性。这个被称为 Flubber 部门的地方拥有专门训练的员工去往着火的地点并且利用经过处理的 Flubber 来控制火势。\n\n管道已经在城市中铺设好。你会得到管道布局，而你需要决定如何将 Flubber 从 Flubber 工厂、将水从一个本地水源通过管道运送至 Flubber 部门。\n\n注意 Flubber 和水会在同一管道网络中，甚至可能在同一条管道中流动。所有管道是双向的，但是 Flubber 和水不能在同一条管道中异向流动。此外，如果两种液体同向流过一条管道，它们会不可避免地混合，因此网络中的所有节点配备了特殊的膜和筛，如你所见，可以分离和重新组织所有流入的混合物。管道网络是个封闭系统，因此在每个节点处每种液体的总流入速率必须等于总流出速率，除了每种液体各自的源头和目的地（Flubber 部门）。\n\n每条管道有某个容量，有些粘稠的 Flubber 有一个粘度值 $v$，所以能运输 $v$ 升每秒的水的管道只能运输 $1$ 升每秒的 Flubber。管道对于混合物的容量是线性变化的。更精确地，假设 $c$ 表示管道对于水的容量，$f$ 和 $w$ 分别表示 Flubber 和水流过管道的速率（单位均为升每秒），则容量的限制用不等式 $v⋅f+w\\le c$ 表示。\n\n你主要关心的是平衡流到 Flubber 部门的混合物。你想要尽可能多的混合液体，但是也需要足够的水——因为未经稀释的 Flubber 是高度易燃的——也需要足够的 Flubber——因为 Flubber 部门可不能没了 Flubber！你想出了一个公式来衡量最终混合物的价值：$F^a⋅W^{1-a}$，其中 $F$ 是以升每秒为单位的 Flubber 的流入速率，$W$ 是以升每秒为单位的水的流入速率，$a$ 是一个给定的介于 0 和 1 之间的常数。\n\n求出 $F^a⋅W^{1−a}$ 能达到的最大值以及如何安排 Flubber 和水的路径来达到它。", "inputFormat": "输入的第一行包含地点的数量 $n (3\\le n\\le 300)$，管道的数量 $p (n-1\\le p\\le \\frac12n(n -1))$，和实数 $v (1\\le v\\le 10)$ 和 $a (0.01\\le a\\le 0.99)$。地点从 1 到 $n$ 标号；1 是 Flubber 工厂，2 是水源，3 是 Flutter 部门。实数的小数点后最多有十位。\n\n接下来的 $p$ 行每行描述了一条管道。每行有两个整数 $j$ 和 $k (1\\le j < k\\le n)$，表示管道连接的地点，和一个整数 $c (1\\le c\\le 10)$，表示这条管道的水容量，以升每秒为单位。\n\n没有两条管道连接相同的两个地点，此外，还保证网络是连通的。", "outputFormat": "首先，对于每条管道（按照输入的顺序），输出两个值：其中 Flubber 流过的速率和其中水流过的速率 （如果从 k 流到 j 则为负数），使得 $F^a⋅W^{1−a}$ 最大化。然后输出其最大值，在 $10^{−4}$ 的绝对误差以内。\n\n如果有多解，输出任意一种均可。所有限制（Flubber 和水没有在同一条管道内异向流动、流量守恒、管道容量以及构造的解和其声称的值的一致性）需要在 $10^{−4}$ 的绝对误差内满足。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P6939", "type": "P", "difficulty": 6, "samples": [["3 4\nPP\nRR\nPS\nSS\n", "PS\nPP\nRR\nSS\n"], ["20 3\nPRSPS\nSSSSS\nPPSPP\n", "PRSPS\nPPSPP\nSSSSS\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2017", "ICPC", "WF"], "title": "[ICPC 2017 WF] Tarot Sham Boast", "background": "", "description": "\n\nCurse your rival! Every year at the annual Rock Paper Scissors tournament, you have made it to the final match. (Your Rock technique is unmatched, and your Paper cuts to the bone! Your Scissors need a little work, though. ) But every year, he defeats you, even though his moves appear entirely random! And he claims to the press that he simply cannot be beaten. What is his secret?\n\nFortunately, you think you have figured it out. This year, just before the tournament, you caught him visiting various shamans around town. Aha! He is using the supernatural against you! You figured two can play at this game. So you went and visited a set of fortune-tellers, who have each used a Tarot deck to predict a sequence that your rival will end up using, sometime during the match.\n\nHowever, your initial excitement has passed, and now you are feeling a little silly. This cannot possibly work, right? In the end it feels like you have paid good money for a fraudulent, random set of predictions. Oh well; you might as well keep an eye out for some of them during the match. But which predictions will you use?\n\nIn the final match, you and your rival will play $n$ rounds of Rock Paper Scissors. In each round, your rival and you will both choose one of the three options (Rock, Paper, or Scissors). Based on your selections, a winner of the round will be determined (exactly how is irrelevant to this problem).\n\nGiven the length of the final match and the various predictions, sort them in order of how likely they are to appear sometime during the match as a contiguous sequence of options chosen by your rival, assuming he is choosing his symbol in each round independently and uniformly at random.\n\n", "inputFormat": "\n\nThe first line of input contains two integers $n (1 \\le n \\le 10^{6}),$ the number of rounds in the final match, and $s (1 \\le s \\le 10)$ , the number of sequences. The remaining $s$ lines each describe a prediction, consisting of a string of characters $‘R', ‘P',$ and $‘S'.$ All predictions have the same length, which is between $1$ and $n$ characters long, inclusive, and no longer than $10^{5}.$\n\n", "outputFormat": "\n\nDisplay all of the predictions, sorted by decreasing likelihood of appearance sometime during the final match. In the case of tied predictions, display them in the same order as in the input.\n\n", "hint": "Time limit: 2 s, Memory limit: 512 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2017 WF] Tarot Sham Boast", "background": "", "description": "\n\nCurse your rival! Every year at the annual Rock Paper Scissors tournament, you have made it to the final match. (Your Rock technique is unmatched, and your Paper cuts to the bone! Your Scissors need a little work, though. ) But every year, he defeats you, even though his moves appear entirely random! And he claims to the press that he simply cannot be beaten. What is his secret?\n\nFortunately, you think you have figured it out. This year, just before the tournament, you caught him visiting various shamans around town. Aha! He is using the supernatural against you! You figured two can play at this game. So you went and visited a set of fortune-tellers, who have each used a Tarot deck to predict a sequence that your rival will end up using, sometime during the match.\n\nHowever, your initial excitement has passed, and now you are feeling a little silly. This cannot possibly work, right? In the end it feels like you have paid good money for a fraudulent, random set of predictions. Oh well; you might as well keep an eye out for some of them during the match. But which predictions will you use?\n\nIn the final match, you and your rival will play $n$ rounds of Rock Paper Scissors. In each round, your rival and you will both choose one of the three options (Rock, Paper, or Scissors). Based on your selections, a winner of the round will be determined (exactly how is irrelevant to this problem).\n\nGiven the length of the final match and the various predictions, sort them in order of how likely they are to appear sometime during the match as a contiguous sequence of options chosen by your rival, assuming he is choosing his symbol in each round independently and uniformly at random.\n\n", "inputFormat": "\n\nThe first line of input contains two integers $n (1 \\le n \\le 10^{6}),$ the number of rounds in the final match, and $s (1 \\le s \\le 10)$ , the number of sequences. The remaining $s$ lines each describe a prediction, consisting of a string of characters $‘R', ‘P',$ and $‘S'.$ All predictions have the same length, which is between $1$ and $n$ characters long, inclusive, and no longer than $10^{5}.$\n\n", "outputFormat": "\n\nDisplay all of the predictions, sorted by decreasing likelihood of appearance sometime during the final match. In the case of tied predictions, display them in the same order as in the input.\n\n", "hint": "Time limit: 2 s, Memory limit: 512 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2017 WF] Tarot Sham Boast", "background": "", "description": "诅咒你的对手！每年在年度石头剪刀布比赛中，你都进入了最后的决赛。（你的石头技巧无与伦比，你的纸张切割如刀！不过你的剪刀还需要一些改进。）但每年，他都击败了你，尽管他的动作看起来完全是随机的！而且他对媒体声称他根本无法被击败。他的秘密是什么？\n\n幸运的是，你认为你已经找到了答案。今年，就在比赛前，你抓到他在城里拜访各种萨满。啊哈！他在用超自然力量对付你！你想到了可以以其人之道还治其人之身。所以你去拜访了一些算命师，他们每个人都用塔罗牌预测了一些你对手将在比赛中某个时候使用的序列。\n\n然而，你最初的兴奋已经过去，现在你觉得有点傻。这不可能奏效，对吧？最后你觉得自己花了不少钱买了一些虚假的、随机的预测。哦，好吧；你不妨在比赛中留意其中的一些。但你会使用哪些预测呢？\n\n在最后的比赛中，你和你的对手将进行 $n$ 轮石头剪刀布。在每一轮中，你的对手和你都将选择三种选项之一（石头、剪刀或布）。根据你们的选择，将决定该轮的胜者（具体如何决定与此问题无关）。\n\n给定最后比赛的长度和各种预测，按它们在比赛中作为你对手选择的连续序列出现的可能性排序，假设他在每一轮中独立且均匀地随机选择他的符号。", "inputFormat": "输入的第一行包含两个整数 $n (1 \\le n \\le 10^{6})$，即最后比赛的轮数，以及 $s (1 \\le s \\le 10)$，即序列的数量。接下来的 $s$ 行每行描述一个预测，由字符 'R'、'P' 和 'S' 组成的字符串。所有预测的长度相同，长度在 $1$ 到 $n$ 个字符之间（包括 $n$），且不超过 $10^{5}$。", "outputFormat": "显示所有预测，按在最后比赛中出现的可能性从高到低排序。如果预测的可能性相同，则按输入中的顺序显示。", "hint": "时间限制：2 秒，内存限制：512 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6940", "type": "P", "difficulty": 5, "samples": [["2\n4 7\n9 8\n14 17\n19 18\n", "2\n1\n"], ["2\n4 7\n14 17\n9 8\n19 18\n", "1\n2\n"], ["2\n4 8\n9 7\n14 18\n19 17\n", "syntax error\n"], ["3\n1 1\n4 8\n8 4\n10 6\n6 10\n10 10\n", "syntax error\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2017", "Special Judge", "扫描线", "ICPC", "WF"], "title": "[ICPC 2017 WF] Visual Python++", "background": "", "description": "\n\nIn the recently proposed Visual Python++ programming language, a block of statements is represented as a rectangle of characters with top-left corner in row $r_{1}$ and column $c_{1},$ and bottom-right corner in row $r_{2}$ and column $c_{2}.$ All characters at locations $(r , c)$ with $r_{1} \\le r \\le r_{2}$ and $c_{1} \\le c \\le c_{2}$ are then considered to belong to that block. Among these locations, the ones with $r = r_{1}$ or $r = r_{2}$ or $c = c_{1}$ or $c = c_{2}$ are called a border.\n\nStatement blocks can be nested (rectangles contained in other rectangles) to an arbitrary level. In a syntactically correct program, every two statement blocks are either nested (one contained in the other) or disjoint (not overlapping). In both cases, their borders may not overlap.\n\nProgrammers are not expected to draw the many rectangles contained in a typical program $-$ this takes too long, and Visual $Pytho_n++$ would not have a chance to become the next ICPC programming language. So a programmer only has to put one character $‘p'$ in the top-left corner of the rectangle and one character $‘y'$ in the bottom-right corner. The parser will automatically match up the appropriate corners to obtain the nesting structure of the program.\n\nYour team has just been awarded a five-hour contract to develop this part of the parser.\n\n", "inputFormat": "\n\nThe first line of the input contains an integer $n (1 \\le n \\le 10^{5}),$ the number of corner pairs. Each of the next $n$ lines contains two integers $r$ and $c (1 \\le r , c \\le 10^{9}),$ specifying that there is a top-left corner in row $r$ and column $c$ of the program you are parsing. Following that are $n$ lines specifying the bottom-right corners in the same way. All corner locations are distinct.\n\n", "outputFormat": "\n\nDisplay $n$ lines, each containing one integer. A number $j$ in line $i$ means that the $i^{th}$ top-left corner and the $j^{th}$ bottom-right corner form one rectangle. Top-left and bottom-right corners are each numbered from $1$ to $n$ in the order they appear in the input. The output must be a permutation of the numbers from $1$ to $n$ such that the matching results in properly nested rectangles. If there is more than one valid matching, any one will be accepted. If no such matching exists, display syntax error.\n\n", "hint": "Time limit: 5 s, Memory limit: 512 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2017 WF] Visual Python++", "background": "", "description": "\n\nIn the recently proposed Visual Python++ programming language, a block of statements is represented as a rectangle of characters with top-left corner in row $r_{1}$ and column $c_{1},$ and bottom-right corner in row $r_{2}$ and column $c_{2}.$ All characters at locations $(r , c)$ with $r_{1} \\le r \\le r_{2}$ and $c_{1} \\le c \\le c_{2}$ are then considered to belong to that block. Among these locations, the ones with $r = r_{1}$ or $r = r_{2}$ or $c = c_{1}$ or $c = c_{2}$ are called a border.\n\nStatement blocks can be nested (rectangles contained in other rectangles) to an arbitrary level. In a syntactically correct program, every two statement blocks are either nested (one contained in the other) or disjoint (not overlapping). In both cases, their borders may not overlap.\n\nProgrammers are not expected to draw the many rectangles contained in a typical program $-$ this takes too long, and Visual $Pytho_n++$ would not have a chance to become the next ICPC programming language. So a programmer only has to put one character $‘p'$ in the top-left corner of the rectangle and one character $‘y'$ in the bottom-right corner. The parser will automatically match up the appropriate corners to obtain the nesting structure of the program.\n\nYour team has just been awarded a five-hour contract to develop this part of the parser.\n\n", "inputFormat": "\n\nThe first line of the input contains an integer $n (1 \\le n \\le 10^{5}),$ the number of corner pairs. Each of the next $n$ lines contains two integers $r$ and $c (1 \\le r , c \\le 10^{9}),$ specifying that there is a top-left corner in row $r$ and column $c$ of the program you are parsing. Following that are $n$ lines specifying the bottom-right corners in the same way. All corner locations are distinct.\n\n", "outputFormat": "\n\nDisplay $n$ lines, each containing one integer. A number $j$ in line $i$ means that the $i^{th}$ top-left corner and the $j^{th}$ bottom-right corner form one rectangle. Top-left and bottom-right corners are each numbered from $1$ to $n$ in the order they appear in the input. The output must be a permutation of the numbers from $1$ to $n$ such that the matching results in properly nested rectangles. If there is more than one valid matching, any one will be accepted. If no such matching exists, display syntax error.\n\n", "hint": "Time limit: 5 s, Memory limit: 512 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2017 WF] Visual Python++", "background": null, "description": "在最近提出的 Visual Python++ 编程语言中，一个语句块被表示为一个字符矩形，其左上角位于第 $r_{1}$ 行第 $c_{1}$ 列，右下角位于第 $r_{2}$ 行第 $c_{2}$ 列。所有满足 $r_{1} \\le r \\le r_{2}$ 且 $c_{1} \\le c \\le c_{2}$ 的位置 $(r , c)$ 的字符都被认为属于该语句块。在这些位置中，满足 $r = r_{1}$ 或 $r = r_{2}$ 或 $c = c_{1}$ 或 $c = c_{2}$ 的位置称为边界。\n\n语句块可以嵌套（一个矩形包含在另一个矩形内）到任意深度。在一个语法正确的程序中，任意两个语句块要么是嵌套的（一个包含另一个），要么是不相交的（不重叠）。在这两种情况下，它们的边界都不能重叠。\n\n程序员不需要画出典型程序中的许多矩形——这太耗时了，而且 Visual Python++ 将没有机会成为下一届 ICPC 编程语言。因此，程序员只需要在矩形的左上角放置一个字符 `「`，在右下角放置一个字符 `」`。语法分析器将自动匹配相应的角以获取程序的嵌套结构。\n\n你的团队刚刚获得了一份五小时的合同，来开发语法分析器的这一部分。", "inputFormat": "输入的第一行包含一个整数 $n (1 \\le n \\le 10^{5})$，表示角对的数量。\n\n接下来的 $n$ 行每行包含两个整数 $r$ 和 $c (1 \\le r , c \\le 10^{9})$，表示在正在解析的程序中，第 $r$ 行第 $c$ 列有一个左上角。\n\n接下来 $n$ 行，以相同的方式指定右下角。所有角的位置都是不同的。", "outputFormat": "输出 $n$ 行，每行包含一个整数。第 $i$ 行的数字 $j$ 表示第 $i$ 个左上角与第 $j$ 个右下角组成一个矩形。左上角和右下角均按照它们在输入中出现的顺序从 $1$ 到 $n$ 编号。输出必须是 $1$ 到 $n$ 的一个排列，使得匹配后的矩形正确嵌套。如果有多个有效的匹配，输出任何一个均可。如果不存在这样的匹配，则输出 `syntax error`。", "hint": "翻译由 DeepSeek R1 完成", "locale": "zh-CN"}}}
{"pid": "P6941", "type": "P", "difficulty": 5, "samples": [["8 4\n1000\n0 1 0 900 0.2\n0 2 100 500 1.0\n2 1 500 700 1.0\n2 1 501 701 0.1\n0 3 200 400 0.5\n3 1 500 800 0.1\n3 0 550 650 0.9\n0 1 700 900 0.1\n", "0.3124\n"], ["4 2\n2\n0 1 0 1 0.5\n0 1 0 1 0.5\n0 1 1 2 0.4\n0 1 1 2 0.2\n", "0.7\n"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2018 WF] Catch the Plane", "background": "", "description": "\n\nYour plane to the ICPC Finals departs in a short time, and the only way to get to the airport is by bus. Unfortunately, some of the bus drivers are considering going on strike, so you do not know whether you can get to the airport on time. Your goal is to plan your journey in such a way as to maximize the probability of catching your plane.\n\nYou have a detailed map of the city, which includes all the bus stations. You are at station $0$ and the airport is at station $1$ . You also have a complete schedule of when each bus leaves its start station and arrives at its destination station. Additionally, for each bus you know the probability that it is actually going to run as scheduled, as opposed to its driver going on strike and taking the bus out of service. Assume all these events are independent. That is, the probability of a given bus running as planned does not change if you know whether any of the other buses run as planned.\n\nIf you arrive before the departure time of a bus, you can transfer to that bus. But if you arrive exactly at the departure time, you will not have enough time to get on the bus. You cannot verify ahead of time whether a given bus will run as planned $-$ you will find out only when you try to get on the bus. So if two or more buses leave a station at the same time, you can try to get on only one of them.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15689/1.png)\n\nFigure A.1 : Bus schedule corresponding to Sample Input $1$ .\n\nConsider the bus schedule shown in Figure A.1 . It lists the start and destination stations of several bus routes along with the departure and arrival times. You have written next to some of these the probability that that route will run. Bus routes with no probability written next to them have a $100\\%$ chance of running. You can try catching the first listed bus. If it runs, it will take you straight to the airport, and you can stop worrying. If it does not, things get more tricky. You could get on the second listed bus to station $2$ . It is certain to leave, but you would be too late to catch the third listed bus which otherwise would have delivered you to the airport on time. The fourth listed bus $-$ which you can catch $-$ has only a $0$ . $1$ probability of actually running. That is a bad bet, so it is better to stay at station $0$ and wait for the fifth listed bus. If you catch it, you can try to get onto the sixth listed bus to the airport; if that does not run, you still have the chance of returning to station $0$ and catching the last listed bus straight to the airport.\n\n", "inputFormat": "\n\nThe first line of input contains two integers $m (1 \\le m \\le 10^{6})$ and $n (2 \\le n \\le 10^{6}),$ denoting the number of buses and the number of stations in the city. The next line contains one integer $k (1 \\le k \\le 10^{18}),$ denoting the time by which you must arrive at the airport.\n\nEach of the next $m$ lines describes one bus. Each line contains integers a and $b (0 \\le $ a , $b < n$ , a $≠ b)$ , denoting the start and destination stations for the bus. Next are integers $s$ and $t (0 \\le s < t \\le k)$ , giving the departure time from station a and the arrival time at station $b$ . The last value on the line is $p (0 \\le p \\le 1$ , with at most $10$ digits after the decimal point), which denotes the probability that the bus will run as planned.\n\n", "outputFormat": "\n\nDisplay the probability that you will catch your plane, assuming you follow an optimal course of action. Your answer must be correct to within an absolute error of $10^{−6}.$\n\n", "hint": "Time limit: 10 s, Memory limit: 1024 MB. \n\nspj provider:@[shenyouran](/user/137367).", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 WF] Catch the Plane", "background": "", "description": "\n\nYour plane to the ICPC Finals departs in a short time, and the only way to get to the airport is by bus. Unfortunately, some of the bus drivers are considering going on strike, so you do not know whether you can get to the airport on time. Your goal is to plan your journey in such a way as to maximize the probability of catching your plane.\n\nYou have a detailed map of the city, which includes all the bus stations. You are at station $0$ and the airport is at station $1$ . You also have a complete schedule of when each bus leaves its start station and arrives at its destination station. Additionally, for each bus you know the probability that it is actually going to run as scheduled, as opposed to its driver going on strike and taking the bus out of service. Assume all these events are independent. That is, the probability of a given bus running as planned does not change if you know whether any of the other buses run as planned.\n\nIf you arrive before the departure time of a bus, you can transfer to that bus. But if you arrive exactly at the departure time, you will not have enough time to get on the bus. You cannot verify ahead of time whether a given bus will run as planned $-$ you will find out only when you try to get on the bus. So if two or more buses leave a station at the same time, you can try to get on only one of them.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15689/1.png)\n\nFigure A.1 : Bus schedule corresponding to Sample Input $1$ .\n\nConsider the bus schedule shown in Figure A.1 . It lists the start and destination stations of several bus routes along with the departure and arrival times. You have written next to some of these the probability that that route will run. Bus routes with no probability written next to them have a $100\\%$ chance of running. You can try catching the first listed bus. If it runs, it will take you straight to the airport, and you can stop worrying. If it does not, things get more tricky. You could get on the second listed bus to station $2$ . It is certain to leave, but you would be too late to catch the third listed bus which otherwise would have delivered you to the airport on time. The fourth listed bus $-$ which you can catch $-$ has only a $0$ . $1$ probability of actually running. That is a bad bet, so it is better to stay at station $0$ and wait for the fifth listed bus. If you catch it, you can try to get onto the sixth listed bus to the airport; if that does not run, you still have the chance of returning to station $0$ and catching the last listed bus straight to the airport.\n\n", "inputFormat": "\n\nThe first line of input contains two integers $m (1 \\le m \\le 10^{6})$ and $n (2 \\le n \\le 10^{6}),$ denoting the number of buses and the number of stations in the city. The next line contains one integer $k (1 \\le k \\le 10^{18}),$ denoting the time by which you must arrive at the airport.\n\nEach of the next $m$ lines describes one bus. Each line contains integers a and $b (0 \\le $ a , $b < n$ , a $≠ b)$ , denoting the start and destination stations for the bus. Next are integers $s$ and $t (0 \\le s < t \\le k)$ , giving the departure time from station a and the arrival time at station $b$ . The last value on the line is $p (0 \\le p \\le 1$ , with at most $10$ digits after the decimal point), which denotes the probability that the bus will run as planned.\n\n", "outputFormat": "\n\nDisplay the probability that you will catch your plane, assuming you follow an optimal course of action. Your answer must be correct to within an absolute error of $10^{−6}.$\n\n", "hint": "Time limit: 10 s, Memory limit: 1024 MB. \n\nspj provider:@[shenyouran](/user/137367).", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 WF] Catch the Plane", "background": "", "description": "你的飞机即将起飞去参加 ICPC 总决赛，而去机场的唯一方式是乘坐公交车。不幸的是，一些公交车司机正在考虑罢工，所以你不知道是否能按时到达机场。你的目标是规划你的行程，以最大化赶上飞机的概率。\n\n你有一张城市的详细地图，包括所有的公交车站。你现在在车站 $0$，机场在车站 $1$。你还有一份完整的公交车时刻表，记录了每辆公交车从起始站出发和到达目的站的时间。此外，对于每辆公交车，你知道它按计划运行的概率，而不是司机罢工导致公交车停运。假设所有这些事件是独立的。也就是说，某辆公交车按计划运行的概率不会因为你知道其他公交车是否按计划运行而改变。\n\n如果你在公交车出发时间之前到达，你可以转乘那辆公交车。但如果你正好在出发时间到达，你将没有足够的时间上车。你无法提前验证某辆公交车是否按计划运行——只有当你尝试上车时才会知道。所以如果两辆或更多公交车在同一时间离开一个车站，你只能尝试上其中一辆。\n\n考虑图 A.1 中显示的公交车时刻表。它列出了几条公交线路的起始站和目的站以及出发和到达时间。你在其中一些旁边写下了该线路运行的概率。没有写概率的公交线路有 $100\\%$ 的运行概率。你可以尝试赶上第一辆列出的公交车。如果它按计划运行，它会直接带你到机场，你就可以不再担心。如果没有，事情就会变得更加棘手。你可以乘坐第二辆列出的公交车到车站 $2$。它肯定会出发，但你会太晚而赶不上第三辆列出的公交车，否则它会按时把你送到机场。第四辆列出的公交车——你可以赶上——实际上只有 $0.1$ 的运行概率。这是一个糟糕的选择，所以最好留在车站 $0$ 等待第五辆列出的公交车。如果你赶上了它，你可以尝试搭乘第六辆列出的公交车去机场；如果那辆车不运行，你仍然有机会返回车站 $0$ 并赶上最后一辆直达机场的公交车。", "inputFormat": "输入的第一行包含两个整数 $m (1 \\le m \\le 10^{6})$ 和 $n (2 \\le n \\le 10^{6})$，表示城市中的公交车数量和车站数量。下一行包含一个整数 $k (1 \\le k \\le 10^{18})$，表示你必须到达机场的时间。\n\n接下来的 $m$ 行描述一辆公交车。每行包含整数 $a$ 和 $b (0 \\le a, b < n, a \neq b)$，表示公交车的起始站和目的站。接下来是整数 $s$ 和 $t (0 \\le s < t \\le k)$，给出从车站 $a$ 出发和到达车站 $b$ 的时间。行的最后一个值是 $p (0 \\le p \\le 1$，小数点后最多有 $10$ 位)，表示公交车按计划运行的概率。", "outputFormat": "显示你赶上飞机的概率，假设你遵循最佳行动方案。你的答案必须在绝对误差 $10^{-6}$ 范围内正确。", "hint": "时间限制：10 秒，内存限制：1024 MB。\n\n特别裁判提供者：@[shenyouran](\\/user\\/137367)。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6942", "type": "P", "difficulty": 3, "samples": [["please sit spot. sit spot, sit. spot here now here.\n", "please, sit spot. sit spot, sit. spot, here now, here.\n"], ["one, two. one tree. four tree. four four. five four. six five.\n", "one, two. one, tree. four, tree. four, four. five, four. six five.\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "ICPC", "WF"], "title": "[ICPC 2018 WF] Comma Sprinkler", "background": "", "description": "As practice will tell you, the English rules for comma placement are complex, frustrating, and often ambiguous. Many people, even the English, will, in practice, ignore them, and, apply custom rules, or, no rules, at all.\n\nDoctor Comma Sprinkler solved this issue by developing a set of rules that sprinkles commas in a sentence with no ambiguity and little simplicity. In this problem you will help Dr. Sprinkler by producing an algorithm to automatically apply her rules.\n\nDr. Sprinkler's rules for adding commas to an existing piece of text are as follows:\n\nIf a word anywhere in the text is preceded by a comma, find all occurrences of that word in the text, and put a comma before each of those occurrences, except in the case where such an occurrence is the first word of a sentence or already preceded by a comma.\n\nIf a word anywhere in the text is succeeded by a comma, find all occurrences of that word in the text, and put a comma after each of those occurrences, except in the case where such an occurrence is the last word of a sentence or already succeeded by a comma.\n\nApply rules $1$ and $2$ repeatedly until no new commas can be added using either of them.\n\nAs an example, consider the text\n\nplease sit spot. sit spot, sit. spot here now here.\n\nBecause there is a comma after spot in the second sentence, a comma should be added after spot in the third sentence as well (but not the first sentence, since it is the last word of that sentence). Also, because there is a comma before the word sit in the second sentence, one should be added before that word in the first sentence (but no comma is added before the word sit beginning the second sentence because it is the first word of that sentence). Finally, notice that once a comma is added after spot in the third sentence, there exists a comma before the first occurrence of the word here. Therefore, a comma is also added before the other occurrence of the word here. There are no more commas to be added so the final result is\n\nplease, sit spot. sit spot, sit. spot, here now, here.\n\n", "inputFormat": "\n\nThe input contains one line of text, containing at least $2$ characters and at most $1 000 000$ characters. Each character is either a lowercase letter, a comma, a period, or a space. We define a word to be a maximal sequence of letters within the text. The text adheres to the following constraints:\n\nThe text begins with a word.\n\nBetween every two words in the text, there is either a single space, a comma followed by a space, or a period followed by a space (denoting the end of a sentence and the beginning of a new one).\n\nThe last word of the text is followed by a period with no trailing space.\n\n", "outputFormat": "\n\nDisplay the result after applying Dr. Sprinkler's algorithm to the original text.\n\n", "hint": "Time limit: 8 s, Memory limit: 1024 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 WF] Comma Sprinkler", "background": "", "description": "As practice will tell you, the English rules for comma placement are complex, frustrating, and often ambiguous. Many people, even the English, will, in practice, ignore them, and, apply custom rules, or, no rules, at all.\n\nDoctor Comma Sprinkler solved this issue by developing a set of rules that sprinkles commas in a sentence with no ambiguity and little simplicity. In this problem you will help Dr. Sprinkler by producing an algorithm to automatically apply her rules.\n\nDr. Sprinkler's rules for adding commas to an existing piece of text are as follows:\n\nIf a word anywhere in the text is preceded by a comma, find all occurrences of that word in the text, and put a comma before each of those occurrences, except in the case where such an occurrence is the first word of a sentence or already preceded by a comma.\n\nIf a word anywhere in the text is succeeded by a comma, find all occurrences of that word in the text, and put a comma after each of those occurrences, except in the case where such an occurrence is the last word of a sentence or already succeeded by a comma.\n\nApply rules $1$ and $2$ repeatedly until no new commas can be added using either of them.\n\nAs an example, consider the text\n\nplease sit spot. sit spot, sit. spot here now here.\n\nBecause there is a comma after spot in the second sentence, a comma should be added after spot in the third sentence as well (but not the first sentence, since it is the last word of that sentence). Also, because there is a comma before the word sit in the second sentence, one should be added before that word in the first sentence (but no comma is added before the word sit beginning the second sentence because it is the first word of that sentence). Finally, notice that once a comma is added after spot in the third sentence, there exists a comma before the first occurrence of the word here. Therefore, a comma is also added before the other occurrence of the word here. There are no more commas to be added so the final result is\n\nplease, sit spot. sit spot, sit. spot, here now, here.\n\n", "inputFormat": "\n\nThe input contains one line of text, containing at least $2$ characters and at most $1 000 000$ characters. Each character is either a lowercase letter, a comma, a period, or a space. We define a word to be a maximal sequence of letters within the text. The text adheres to the following constraints:\n\nThe text begins with a word.\n\nBetween every two words in the text, there is either a single space, a comma followed by a space, or a period followed by a space (denoting the end of a sentence and the beginning of a new one).\n\nThe last word of the text is followed by a period with no trailing space.\n\n", "outputFormat": "\n\nDisplay the result after applying Dr. Sprinkler's algorithm to the original text.\n\n", "hint": "Time limit: 8 s, Memory limit: 1024 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 WF] Comma Sprinkler", "background": null, "description": "正如实践会告诉你的那样，英语中逗号的使用规则复杂、令人沮丧且常常模棱两可。许多人，甚至是英语母语者，在实践中会忽略它们，并应用自定义规则，或者根本不使用规则。\n\n逗号洒水器博士通过制定一套规则解决了这个问题，这些规则在句子中洒上逗号，既不含糊也不简单。在这个问题中，你将帮助洒水器博士编写一个算法来自动应用她的规则。\n\n洒水器博士为现有文本添加逗号的规则如下：\n\n1. 如果文本中的某个单词前面有逗号，则找到该单词在文本中的所有出现位置，并在每个出现位置前加上逗号，除非该出现位置是句子的第一个单词或已经有逗号在前。\n\n2. 如果文本中的某个单词后面有逗号，则找到该单词在文本中的所有出现位置，并在每个出现位置后加上逗号，除非该出现位置是句子的最后一个单词或已经有逗号在后。\n\n3. 重复应用规则 $1$ 和规则 $2$，直到无法再使用它们添加新的逗号为止。\n\n例如，考虑以下文本：\n\n```\nplease sit spot. sit spot, sit. spot here now here.\n```\n\n因为在第二个句子中，spot 后面有逗号，所以在第三个句子中的 spot 后面也应加上逗号（但不是第一个句子，因为它是该句子的最后一个单词）。此外，因为在第二个句子中，sit 前面有逗号，所以在第一个句子中的该单词前也应加上逗号（但不在第二个句子开头的 sit 前加逗号，因为它是该句子的第一个单词）。最后，注意到一旦在第三个句子中的 spot 后加上逗号，here 的第一个出现位置前就有逗号。因此，也在 here 的其他出现位置前加上逗号。没有更多逗号可以添加，所以最终结果是：\n\n```\nplease, sit spot. sit spot, sit. spot, here now, here.\n```", "inputFormat": "输入包含一行文本，至少包含 $2$ 个字符，最多包含 $10^6$ 个字符。每个字符均为小写字母、逗号、句号或空格。我们定义一个单词为文本中最大长度的字母序列。文本遵循以下约束：\n\n* 文本以一个单词开头。\n\n* 文本中的每两个单词之间，要么有一个空格，要么有一个逗号后跟一个空格，要么有一个句号后跟一个空格（表示一个句子的结束和新句子的开始）。\n\n* 文本的最后一个单词后面跟一个句号，没有尾随空格。", "outputFormat": "输出应用洒水器博士算法后的文本结果。", "hint": "时间限制：原题 $8$ 秒，依据评测机性能改为 $6$ 秒。\n\n内存限制：$\\text{1024MB}$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6943", "type": "P", "difficulty": 7, "samples": [["3\n1 2 5\n3 1 5\n2 1\n5 0\n1 3\n", "15\n"], ["6\n1 2 2\n1 3 5\n1 4 1\n2 5 5\n2 6 1\n0 0\n1 0\n2 1\n2 1\n0 1\n0 1\n", "9\n"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "ICPC", "WF"], "title": "[ICPC 2018 WF] Conquer The World", "background": "", "description": "\n\nBwahahahahaha!!! Your nemesis, the dashingly handsome spy Waco Powers, has at last fallen to your secret volcano base's deathtraps (or so you assume, being a little too busy to witness it firsthand). At long last, you are all set to CONQUER THE WORLD!\n\nNothing will stand in your way! Well, nothing except a minor problem of logistics. Your evil armies have announced that they will not continue carving their relentless path of destruction across the puny nations of the world without being paid. And unfortunately you are running low on cash $-$ a volcano lair has many wonderful qualities, but `reasonably affordable` is not one of them. You have had to pull funds from the travel budget to pay your ungrateful underlings. Now you are not sure how you will actually get your armies into position to CONQUER THE WORLD.\n\nYou have a map of the nations of the world and all your available transport routes between them. Each route connects two nations and has a fixed cost per army that uses it. The routes are laid out such that there is exactly one way to travel between any two nations. You know the current position of each of your armies and how many you will need to place permanently in each nation in order to subjugate it. How can you move the armies into place as cheaply as possible so you can CONQUER THE WORLD?\n\n", "inputFormat": "\n\nThe first line of input contains an integer $n (1 \\le n \\le 250 000)$ , the number of nations. This is followed by $n − 1$ lines, each containing three integers $u , v$ , and $c (1 \\le u , v \\le n , 1 \\le c \\le 10^{6}),$ indicating that there is a bidirectional route connecting nations $u$ and $v$ , which costs $c$ per army to use.\n\nFinally, another $n$ lines follow, the $i^{th}$ of which contains two non-negative integers $x_{i}$ and $y_{i},$ indicating that there are currently $x_{i}$ armies in nation $i$ , and you need at least $y_{i}$ armies to end up in that nation in the final configuration. The total number of armies (the sum of the $x_{i}$ values) is at least the sum of the $y_{i}$ values, and no more than $10^{6}.$\n\n", "outputFormat": "\n\nDisplay the minimum cost to move your armies such that there are at least $y_{i}$ armies in nation $i$ for all $i$ .\n\n", "hint": "Time limit: 8 s, Memory limit: 1024 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 WF] Conquer The World", "background": "", "description": "\n\nBwahahahahaha!!! Your nemesis, the dashingly handsome spy Waco Powers, has at last fallen to your secret volcano base's deathtraps (or so you assume, being a little too busy to witness it firsthand). At long last, you are all set to CONQUER THE WORLD!\n\nNothing will stand in your way! Well, nothing except a minor problem of logistics. Your evil armies have announced that they will not continue carving their relentless path of destruction across the puny nations of the world without being paid. And unfortunately you are running low on cash $-$ a volcano lair has many wonderful qualities, but `reasonably affordable` is not one of them. You have had to pull funds from the travel budget to pay your ungrateful underlings. Now you are not sure how you will actually get your armies into position to CONQUER THE WORLD.\n\nYou have a map of the nations of the world and all your available transport routes between them. Each route connects two nations and has a fixed cost per army that uses it. The routes are laid out such that there is exactly one way to travel between any two nations. You know the current position of each of your armies and how many you will need to place permanently in each nation in order to subjugate it. How can you move the armies into place as cheaply as possible so you can CONQUER THE WORLD?\n\n", "inputFormat": "\n\nThe first line of input contains an integer $n (1 \\le n \\le 250 000)$ , the number of nations. This is followed by $n − 1$ lines, each containing three integers $u , v$ , and $c (1 \\le u , v \\le n , 1 \\le c \\le 10^{6}),$ indicating that there is a bidirectional route connecting nations $u$ and $v$ , which costs $c$ per army to use.\n\nFinally, another $n$ lines follow, the $i^{th}$ of which contains two non-negative integers $x_{i}$ and $y_{i},$ indicating that there are currently $x_{i}$ armies in nation $i$ , and you need at least $y_{i}$ armies to end up in that nation in the final configuration. The total number of armies (the sum of the $x_{i}$ values) is at least the sum of the $y_{i}$ values, and no more than $10^{6}.$\n\n", "outputFormat": "\n\nDisplay the minimum cost to move your armies such that there are at least $y_{i}$ armies in nation $i$ for all $i$ .\n\n", "hint": "Time limit: 8 s, Memory limit: 1024 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 WF] Conquer The World", "background": "", "description": "哇哈哈哈哈哈！！！你的宿敌，英俊的间谍 Waco Powers，终于在你的秘密火山基地的死亡陷阱中落败（或者你是这样假设的，因为你太忙了，没能亲眼目睹）。终于，你准备好征服世界了！\n\n没有什么能阻挡你！嗯，除了一个小小的后勤问题。你的邪恶军队宣布，如果不支付报酬，他们将不会继续在世界上那些微不足道的国家中肆意破坏。不幸的是，你的现金快用完了——火山基地有很多优点，但“价格合理”不是其中之一。你不得不从旅行预算中抽出资金来支付你那些忘恩负义的下属。现在你不确定如何才能真正将你的军队部署到位以征服世界。\n\n你有一张世界各国的地图，以及它们之间所有可用的运输路线。每条路线连接两个国家，并且每支军队使用它都有固定的费用。路线的布局使得在任何两个国家之间恰好有一条路径。你知道每支军队的当前位置，以及为了征服每个国家需要永久驻扎在那里的军队数量。你如何才能以最低的成本将军队部署到位，以便征服世界？", "inputFormat": "输入的第一行包含一个整数 $n (1 \\le n \\le 250000)$，表示国家的数量。接下来是 $n - 1$ 行，每行包含三个整数 $u, v$ 和 $c (1 \\le u, v \\le n, 1 \\le c \\le 10^{6})$，表示有一条连接国家 $u$ 和 $v$ 的双向路线，每支军队使用该路线的费用为 $c$。\n\n最后，还有 $n$ 行，第 $i$ 行包含两个非负整数 $x_{i}$ 和 $y_{i}$，表示当前在国家 $i$ 有 $x_{i}$ 支军队，并且在最终配置中需要至少 $y_{i}$ 支军队驻扎在该国家。军队的总数量（所有 $x_{i}$ 值的和）至少是所有 $y_{i}$ 值的和，并且不超过 $10^{6}$。", "outputFormat": "显示移动军队的最低成本，使得对于所有 $i$，国家 $i$ 至少有 $y_{i}$ 支军队。", "hint": "时间限制：8 秒，内存限制：1024 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6944", "type": "P", "difficulty": 6, "samples": [["2 3 1\n", "3.5\n"], ["3 3 2\n", "4.9\n"], ["5 10 3\n", "12.2567433\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2018 WF] Gem Island", "background": "", "description": "\n\nGem Island is a tiny island in the middle of the Pacific Ocean. Until recently, it was known as one of the poorest, but also most peaceful, places on Earth. Today, it is neither poor nor peaceful. What happened?\n\nOne sunny morning, not too long ago, all inhabitants of Gem Island woke up to a surprise. That morning, each of them suddenly held one sparkling gem in their hand. The gems had magically appeared overnight. This was cause for much rejoicing $-$ everybody was suddenly rich, they could finally afford all the things they had ever dreamed of, and the name of their island made so much more sense now.\n\nThe next morning, one of the inhabitants woke up to another surprise $-$ her gem had magically split into two gems! The same thing happened on each of the following nights, when exactly one of the gems (apparently uniformly at random among all the gems on the island) would split into two.\n\nAfter a while, the inhabitants of Gem Island possessed a widely varying number of gems. Some had a lot and many had only a few. How come some inhabitants had more gems than others? Did they cheat, were they just lucky, or was something else at work?\n\nThe island elders have asked for your help. They want you to determine if the uneven distribution of gems is explained by pure chance. If so, that would greatly reduce tensions on the island.\n\nThe island has $n$ inhabitants. You are to determine the gem distribution after $d$ nights of gem splitting. In particular, you are interested in the expected number of gems collectively held by the $r$ people with the largest numbers of gems. More formally, suppose that after $d$ nights the numbers of gems held by the $n$ inhabitants are listed in non-increasing order as $a_{1} \\ge a_{2} \\ge $ . . . $ \\ge a_{n}.$ What is the expected value of $a_{1} + · · · + a_{r}?$\n\n", "inputFormat": "\n\nThe input consists of a single line containing the three integers $n , d$ , and $r (1 \\le n , d \\le 500 , 1 \\le r \\le n)$ , as described in the problem statement above.\n\n", "outputFormat": "\n\nDisplay the expected number of gems that the top $r$ inhabitants hold after $d$ nights, with an absolute or relative error of at most $10^{−6}.$\n\n", "hint": "Time limit: 3 s, Memory limit: 1024 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 WF] Gem Island", "background": "", "description": "\n\nGem Island is a tiny island in the middle of the Pacific Ocean. Until recently, it was known as one of the poorest, but also most peaceful, places on Earth. Today, it is neither poor nor peaceful. What happened?\n\nOne sunny morning, not too long ago, all inhabitants of Gem Island woke up to a surprise. That morning, each of them suddenly held one sparkling gem in their hand. The gems had magically appeared overnight. This was cause for much rejoicing $-$ everybody was suddenly rich, they could finally afford all the things they had ever dreamed of, and the name of their island made so much more sense now.\n\nThe next morning, one of the inhabitants woke up to another surprise $-$ her gem had magically split into two gems! The same thing happened on each of the following nights, when exactly one of the gems (apparently uniformly at random among all the gems on the island) would split into two.\n\nAfter a while, the inhabitants of Gem Island possessed a widely varying number of gems. Some had a lot and many had only a few. How come some inhabitants had more gems than others? Did they cheat, were they just lucky, or was something else at work?\n\nThe island elders have asked for your help. They want you to determine if the uneven distribution of gems is explained by pure chance. If so, that would greatly reduce tensions on the island.\n\nThe island has $n$ inhabitants. You are to determine the gem distribution after $d$ nights of gem splitting. In particular, you are interested in the expected number of gems collectively held by the $r$ people with the largest numbers of gems. More formally, suppose that after $d$ nights the numbers of gems held by the $n$ inhabitants are listed in non-increasing order as $a_{1} \\ge a_{2} \\ge $ . . . $ \\ge a_{n}.$ What is the expected value of $a_{1} + · · · + a_{r}?$\n\n", "inputFormat": "\n\nThe input consists of a single line containing the three integers $n , d$ , and $r (1 \\le n , d \\le 500 , 1 \\le r \\le n)$ , as described in the problem statement above.\n\n", "outputFormat": "\n\nDisplay the expected number of gems that the top $r$ inhabitants hold after $d$ nights, with an absolute or relative error of at most $10^{−6}.$\n\n", "hint": "Time limit: 3 s, Memory limit: 1024 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 WF] Gem Island", "background": "", "description": "宝石岛是位于太平洋中部的一个小岛。直到最近，它还被认为是地球上最贫穷但也是最和平的地方之一。如今，它既不贫穷也不和平。发生了什么？\n\n不久前的一个晴朗的早晨，宝石岛的所有居民都醒来时发现了一个惊喜。那天早上，他们每个人手中突然多了一颗闪闪发光的宝石。这些宝石在一夜之间神奇地出现了。这引起了极大的欢呼——每个人突然变得富有，他们终于可以买到他们梦寐以求的一切，他们岛的名字现在也更有意义了。\n\n第二天早上，其中一位居民醒来时又发现了一个惊喜——她的宝石神奇地分裂成了两颗！接下来的每个晚上，岛上的一颗宝石（显然是从岛上的所有宝石中均匀随机选择的）都会分裂成两颗。\n\n过了一段时间，宝石岛的居民拥有的宝石数量差异很大。有些人有很多，而许多人只有很少。为什么有些居民拥有的宝石比其他人多？他们是作弊了吗？他们只是幸运吗？还是有其他原因？\n\n岛上的长老们请求你的帮助。他们希望你能确定宝石分布的不均衡是否可以用纯粹的偶然性来解释。如果是这样的话，这将大大减少岛上的紧张局势。\n\n岛上有 $n$ 位居民。你需要确定经过 $d$ 个夜晚宝石分裂后的宝石分布。特别地，你感兴趣的是拥有最多宝石的 $r$ 个人所持有的宝石总数的期望值。更正式地说，假设经过 $d$ 个夜晚后，$n$ 位居民持有的宝石数量按非递增顺序排列为 $a_{1} \\ge a_{2} \\ge \\ldots \\ge a_{n}$。那么 $a_{1} + \\cdots + a_{r}$ 的期望值是多少？", "inputFormat": "输入由一行组成，包含三个整数 $n, d$ 和 $r (1 \\le n, d \\le 500, 1 \\le r \\le n)$，如题目描述所述。", "outputFormat": "输出前 $r$ 位居民在 $d$ 个夜晚后持有的宝石数量的期望值，绝对误差或相对误差最多为 $10^{-6}$。", "hint": "时间限制：3 秒，内存限制：1024 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6945", "type": "P", "difficulty": 6, "samples": [["4 1 100 55 1 1\n10 40 60 10\n", "0 1 1 1\n"], ["4 4 100 55 1 1\n0 10 20 30\n10 20 30 40\n20 30 200 50\n30 40 50 60\n", "0 1 1 2\n1 1 1 2\n1 1 X 2\n2 2 2 3\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "ICPC", "WF"], "title": "[ICPC 2018 WF] Getting a Jump on Crime", "background": "", "description": "\n\nYour friend Robin is a superhero. When you first found out about this, you figured `everybody needs a hobby, and this seems more exciting than stamp collecting,` but now you are really thankful that somebody is doing something about the crime in your hometown.\n\nEvery night, Robin patrols the city by jumping from roof to roof and watching what goes on below. Naturally, superheroes need to respond to crises immediately, so Robin asked you for help in figuring out how to get around your hometown quickly.\n\nYour hometown is built on a square grid, where each block is $w \\times w$ meters. Each block is filled by a single building. The buildings may have different heights (see Figure E.1) . To get from one building to another (not necessarily adjacent) building, Robin makes a single jump from the center of the roof of the first building to the center of the roof of the second building. Robin cannot change direction while in the air, but can choose the angle at which to lift off.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15693/1.png)\n\nFigure E.1 : Cross-section of buildings corresponding to the first sample input. Buildings are shown in black, and the jump from the roof at $(1 , 1)$ to the roof at $(4 , 1)$ is shown with a green line.\n\nOf course, Robin only wants to perform jumps without colliding with any buildings. Such collisions do little damage to a superhero, but building owners tend to get irritated when someone crashes through their windows. You explain the physics to Robin: `All your jumps are done with the same initial velocity $v$ , which has a horizontal component $v_{d}$ towards the destination and vertical component $v_{h}$ upwards, so $v_{d}^{2} + v_{h}^{2} = v^{2}$ . As you travel, your horizontal velocity stays constant $(v_{d}(t) = v_{d}),$ but your vertical velocity is affected by gravity $(v_{h}(t) = v_{h} − t · g)$ , where $g = 9$ . $80665 m/s^{2}$ in your hometown. Naturally, your cape allows you to ignore the effects of air resistance. This allows you to determine your flight path and $ \\cdots `$ at which point you notice that Robin has nodded off $-$ less math, more super-heroing!\n\nSo it falls to you: given a layout of the city and the location of Robin's secret hideout, you need to determine which building roofs Robin can reach, and the minimum number of jumps it takes to get to each roof.\n\nNote that if Robin's jump passes over the corner of a building (where four buildings meet), then the jump needs to be higher than all four adjacent buildings.\n\n$ $\n\n", "inputFormat": "\n\nThe input starts with a line containing six integers $d_{x}, d_{y}, w , v , ℓ_{x}, ℓ_{y}.$ These represent the size $d_{x} \\times d_{y}$ of the city grid $(1 \\le d_{x}, d_{y} \\le 20)$ in blocks, the width of each building $(1 \\le w \\le 10^{3})$ in meters, Robin's takeoff velocity $(1 \\le v \\le 10^{3})$ in meters per second, and the coordinates $(ℓ_{x}, ℓ_{y})$ of Robin's secret hideout $(1 \\le ℓ_{x} \\le d_{x}, 1 \\le ℓ_{y} \\le d_{y}).$\n\nThe first line is followed by a description of the heights of the buildings in the city grid. The description consists of $d_{y}$ lines, each containing $d_{x}$ non-negative integers. The $j^{th}$ line contains the heights for buildings $(1 , j),(2 , j)$ , . . . $,(d_{x}, j)$ . All heights are given in meters and are at most $10^{3}.$\n\n", "outputFormat": "\n\nDisplay the minimum number of jumps Robin needs to get from the secret hideout to the roof of each building. If there is no way to reach a building's roof, display $X$ instead of the number of jumps. Display the buildings in the same order as given in the input file, split into $d_{y}$ lines, each containing $d_{x}$ values.\n\nYou may assume that changing the height of any building by up to $10^{−6}$ would not change the answers.\n\n", "hint": "Time limit: 2 s, Memory limit: 1024 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 WF] Getting a Jump on Crime", "background": "", "description": "\n\nYour friend Robin is a superhero. When you first found out about this, you figured `everybody needs a hobby, and this seems more exciting than stamp collecting,` but now you are really thankful that somebody is doing something about the crime in your hometown.\n\nEvery night, Robin patrols the city by jumping from roof to roof and watching what goes on below. Naturally, superheroes need to respond to crises immediately, so Robin asked you for help in figuring out how to get around your hometown quickly.\n\nYour hometown is built on a square grid, where each block is $w \\times w$ meters. Each block is filled by a single building. The buildings may have different heights (see Figure E.1) . To get from one building to another (not necessarily adjacent) building, Robin makes a single jump from the center of the roof of the first building to the center of the roof of the second building. Robin cannot change direction while in the air, but can choose the angle at which to lift off.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15693/1.png)\n\nFigure E.1 : Cross-section of buildings corresponding to the first sample input. Buildings are shown in black, and the jump from the roof at $(1 , 1)$ to the roof at $(4 , 1)$ is shown with a green line.\n\nOf course, Robin only wants to perform jumps without colliding with any buildings. Such collisions do little damage to a superhero, but building owners tend to get irritated when someone crashes through their windows. You explain the physics to Robin: `All your jumps are done with the same initial velocity $v$ , which has a horizontal component $v_{d}$ towards the destination and vertical component $v_{h}$ upwards, so $v_{d}^{2} + v_{h}^{2} = v^{2}$ . As you travel, your horizontal velocity stays constant $(v_{d}(t) = v_{d}),$ but your vertical velocity is affected by gravity $(v_{h}(t) = v_{h} − t · g)$ , where $g = 9$ . $80665 m/s^{2}$ in your hometown. Naturally, your cape allows you to ignore the effects of air resistance. This allows you to determine your flight path and $ \\cdots `$ at which point you notice that Robin has nodded off $-$ less math, more super-heroing!\n\nSo it falls to you: given a layout of the city and the location of Robin's secret hideout, you need to determine which building roofs Robin can reach, and the minimum number of jumps it takes to get to each roof.\n\nNote that if Robin's jump passes over the corner of a building (where four buildings meet), then the jump needs to be higher than all four adjacent buildings.\n\n$ $\n\n", "inputFormat": "\n\nThe input starts with a line containing six integers $d_{x}, d_{y}, w , v , ℓ_{x}, ℓ_{y}.$ These represent the size $d_{x} \\times d_{y}$ of the city grid $(1 \\le d_{x}, d_{y} \\le 20)$ in blocks, the width of each building $(1 \\le w \\le 10^{3})$ in meters, Robin's takeoff velocity $(1 \\le v \\le 10^{3})$ in meters per second, and the coordinates $(ℓ_{x}, ℓ_{y})$ of Robin's secret hideout $(1 \\le ℓ_{x} \\le d_{x}, 1 \\le ℓ_{y} \\le d_{y}).$\n\nThe first line is followed by a description of the heights of the buildings in the city grid. The description consists of $d_{y}$ lines, each containing $d_{x}$ non-negative integers. The $j^{th}$ line contains the heights for buildings $(1 , j),(2 , j)$ , . . . $,(d_{x}, j)$ . All heights are given in meters and are at most $10^{3}.$\n\n", "outputFormat": "\n\nDisplay the minimum number of jumps Robin needs to get from the secret hideout to the roof of each building. If there is no way to reach a building's roof, display $X$ instead of the number of jumps. Display the buildings in the same order as given in the input file, split into $d_{y}$ lines, each containing $d_{x}$ values.\n\nYou may assume that changing the height of any building by up to $10^{−6}$ would not change the answers.\n\n", "hint": "Time limit: 2 s, Memory limit: 1024 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 WF] Getting a Jump on Crime", "background": "", "description": "你的朋友罗宾（Robin）是一位超级英雄。当你第一次发现这个事时，你认为“每个人都需要有爱好，这个看起来比收集邮票有意思多了”，但是现在你十分感谢那些在你的家乡胡作非为的人。\n\n每个晚上， 罗宾（Robin）用在房顶上跳跃的方式巡逻整座城市，并且看下面发生了什么。自然，超级英雄需要立即应对危机，所以罗宾（Robin）寻求你的帮助，帮他找出如何迅速走遍你的家乡。\n\n你的家乡建立在一个方形的格子上，其中每个区块有 $w\\times w$ 米。每个区块是一个独立的建筑，建筑有可能有不同的高度,为了从一个建筑到另一个（不一定相邻的）建筑，罗宾（Robin）从第一个房屋屋顶的中间跳到第二个房屋屋顶的中间。不能在空中改变方向，但可以选择起飞的角度。\n\n当然，罗宾（Robin）不想撞到任何一个建筑。一些碰撞很难对超级英雄造成伤害，但是当有人击穿房屋主人的窗户时，他们容易感到生气。你向罗宾（Robin）解释物理学：“你的每次跳都有一个初速度$v$，可以被分解成一个向前的水平分力$v_d$和一个向上的竖直分力$v_h$，且$v_{d}^{2} + v_{h}^{2} = v^{2}$.当你行动时，你的水平分力保持不变$(v_{dt} = v_{d}),$，但是竖直分力受到重力的影响$(v_{h}(t) = v_{h} − t · g)$，设在你的家乡重力加速度$g=9.80665$。自然，你的斗篷可以让你忽略空气阻力的影响。这可以让你确定你的飞行路线和……”这是你注意到罗宾（Robin）已经睡着了-少一点数学，多一点超级英雄！\n\n所以现在轮到你了：已经给出城市的布局和罗宾（Robin）秘密藏身处的位置，你需要确定罗宾（Robin）能到达哪些屋顶并给出最少跳跃次数。\n\n请注意，如果罗宾（Robin）的跳跃经过一栋建筑的角落（四栋建筑交汇的地方），那么跳跃需要比所有四栋相邻建筑都高。", "inputFormat": "输入的第一行包含六个整数$d_x$,$d_y$,$w$,$v$,$l_x$,$l_x$.这些代表了 $d_x\\times d_y$ 的城市面积（单位：区块）$(1 \\le d_{x}, d_{y} \\le 20)$，每座建筑的宽度$(1 \\le w \\le 10^{3})$，罗宾（Robin）的起跳速度$(1 \\le v \\le 10^{3})$（单位：米每秒），和罗宾（Robin）藏身处的坐标$(1 \\le ℓ_{x} \\le d_{x}, 1 \\le ℓ_{y} \\le d_{y}).$。\n\n第一行后面是对城市网格中建筑高度的描述。描述由$d_y$行组成，每个行包含$d_{x}$个非负整数。第j行包含建筑物$(1 , j),(2 , j)$ , . . . $,(d_{x}, j)$ 的高度（单位：米）。高度最高不超过$10^3$米。", "outputFormat": "输出罗宾从秘密藏身处跳到每栋建筑屋顶所需的最小跳跃次数。如果无法到达建筑物的屋顶，则显示$X$而不是跳跃次数。按输入文件中给定的顺序显示建筑，分为$d_{y}$行，每行包含$d_{x}$个值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P6946", "type": "P", "difficulty": 4, "samples": [["21\nThe Yangtze is the third longest\nriver in Asia and the longest in\nthe world to flow\nentirely in one country\n", "15 5\n"], ["25\nWhen two or more rivers meet at\na confluence other than the sea\nthe resulting merged river takes\nthe name of one of those rivers\n", "21 6\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "ICPC", "WF"], "title": "[ICPC 2018 WF] Go with the Flow", "background": "", "description": "\n\nIn typesetting, a `river` is a string of spaces formed by gaps between words that extends down several lines of text. For instance, Figure F.1 shows several examples of rivers highlighted in red (text is intentionally blurred to make the rivers more visible).\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15694/1.png)\n\nFigure F.1 : Examples of rivers in typeset text.\n\nCelebrated river authority Flo Ng wants her new book on rivers of the world to include the longest typographic rivers possible. She plans to set the text in a mono-spaced font (all letters and spaces have equal width) in a left-aligned column of some fixed width, with exactly one space separating words on each line (the text is not aligned on the right). For Flo, a `river` is defined as a sequence of spaces lying in consecutive lines in which the position of each space in the sequence (except the first) differs by at most $1$ from the position of the space in the line above it. Trailing white space cannot appear in a river. Words must be packed as tightly as possible on lines; no words may be split across lines. The line width used must be at least as long as the longest word in the text. For instance, Figure F.2 shows the same text set with two different line widths.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15694/2.png)\n\nFigure F.2 : Longest rivers $( \\times )$ for two different line widths.\n\nGiven a text, you have been tasked with determining the line width that produces the longest river of spaces for that text.\n\n", "inputFormat": "\n\nThe first line of input contains an integer $n (2 \\le n \\le 2 500)$ specifying the number of words in the text. The following lines of input contain the words of text. Each word consists only of lowercase and uppercase letters, and words on the same line are separated by a single space. No word exceeds $80$ characters.\n\n", "outputFormat": "\n\nDisplay the line width for which the input text contains the longest possible river, followed by the length of the longest river. If more than one line width yields this maximum, display the shortest such line width.\n\n", "hint": "Time limit: 12 s, Memory limit: 1024 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 WF] Go with the Flow", "background": "", "description": "\n\nIn typesetting, a `river` is a string of spaces formed by gaps between words that extends down several lines of text. For instance, Figure F.1 shows several examples of rivers highlighted in red (text is intentionally blurred to make the rivers more visible).\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15694/1.png)\n\nFigure F.1 : Examples of rivers in typeset text.\n\nCelebrated river authority Flo Ng wants her new book on rivers of the world to include the longest typographic rivers possible. She plans to set the text in a mono-spaced font (all letters and spaces have equal width) in a left-aligned column of some fixed width, with exactly one space separating words on each line (the text is not aligned on the right). For Flo, a `river` is defined as a sequence of spaces lying in consecutive lines in which the position of each space in the sequence (except the first) differs by at most $1$ from the position of the space in the line above it. Trailing white space cannot appear in a river. Words must be packed as tightly as possible on lines; no words may be split across lines. The line width used must be at least as long as the longest word in the text. For instance, Figure F.2 shows the same text set with two different line widths.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15694/2.png)\n\nFigure F.2 : Longest rivers $( \\times )$ for two different line widths.\n\nGiven a text, you have been tasked with determining the line width that produces the longest river of spaces for that text.\n\n", "inputFormat": "\n\nThe first line of input contains an integer $n (2 \\le n \\le 2 500)$ specifying the number of words in the text. The following lines of input contain the words of text. Each word consists only of lowercase and uppercase letters, and words on the same line are separated by a single space. No word exceeds $80$ characters.\n\n", "outputFormat": "\n\nDisplay the line width for which the input text contains the longest possible river, followed by the length of the longest river. If more than one line width yields this maximum, display the shortest such line width.\n\n", "hint": "Time limit: 12 s, Memory limit: 1024 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 WF] Go with the Flow", "background": null, "description": "在字体排印学中，“川流”是由单词之间的间隙组成的连续几列的空格。如图所示为几个用红色高亮标出的“川流”（文本被有意模糊处理来凸显川流）：\n\n![img](https://cdn.luogu.com.cn/upload/image_hosting/vd2s7f3r.png)\n\n知名川流机构 Flo Ng 希望他在新的关于世界河流的书上出现尽可能长的川流。他会使用一种单一字宽的字体（每个字母和空格都具有相同的宽度）且左对齐，单词之间恰用一个空格分隔。对 Flo 来说，一条“川流”指的是连续几行里的空格，且相邻空格在行里出现的位置的距离不超过 $1$。川流不能包含末尾的空格。每行的单词都必须尽可能地紧凑，但不能有单词被拆到两行里。行宽至少不能短于文本中最长的一个单词。下图是同一个文本使用不同行宽的一个例子。\n\n![img](https://cdn.luogu.com.cn/upload/image_hosting/jgci4wvf.png)\n\n给定文本，你需要求出一个行宽使得该文本最长的川流尽可能长。", "inputFormat": "第一行有一个整数 $n(2≤n≤2500)$ 表示文本的单词个数。接下来几行为该文本的单词。每个单词都只包含大写和小写字母，且长度不超过 $80$ 个字符。", "outputFormat": "输出两个整数，分别表示使得文本出现最长的川流的行宽以及川流的长度。如果有多个行款达到川流长度的最大值，输出最小的行宽。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P6947", "type": "P", "difficulty": 7, "samples": [["5\n0 0\n170 0\n140 30\n60 30\n0 70\n", "50\n"], ["5\n0 0\n170 0\n140 30\n60 30\n0 100\n", "51.538820320\n"], ["5\n0 0\n1 2\n1 5\n0 2\n0 1\n", "1.581138830\n"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2018 WF] Panda Preserve", "background": "", "description": "\n\nLast month, Sichuan province secured funding to establish the Great Panda National Park, a natural preserve for a population of more than $1 800$ giant pandas. The park will be surrounded by a polygonal fence. In order for researchers to track the pandas, wireless receivers will be placed at each vertex of the enclosing polygon and each animal will be outfitted with a wireless transmitter. Each wireless receiver will cover a circular area centered at the location of the receiver, and all receivers will have the same range. Naturally, receivers with smaller range are cheaper, so your goal is to determine the smallest possible range that suffices to cover the entire park.\n\nAs an example, Figure G.1 shows the park described by the first sample input. Notice that a wireless range of $35$ does not suffice (a) , while the optimal range of $50$ covers the entire park (b) .\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15695/1.png)\n\nFigure G.1 : Illustration of Sample Input $1$ .\n\n", "inputFormat": "\n\nThe first line of the input contains an integer $n (3 \\le n \\le 2 000)$ specifying the number of vertices of the polygon bounding the park. This is followed by $n$ lines, each containing two integers $x$ and $y (|x|, |y| \\le 10^{4})$ that give the coordinates $(x , y)$ of the vertices of the polygon in counter-clockwise order. The polygon is simple; that is, its vertices are distinct and no two edges of the polygon intersect or touch, except that consecutive edges touch at their common vertex.\n\n", "outputFormat": "\n\nDisplay the minimum wireless range that suffices to cover the park, with an absolute or relative error of at most $10^{−6}.$\n\n", "hint": "Time limit: 10 s, Memory limit: 1024 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 WF] Panda Preserve", "background": "", "description": "\n\nLast month, Sichuan province secured funding to establish the Great Panda National Park, a natural preserve for a population of more than $1 800$ giant pandas. The park will be surrounded by a polygonal fence. In order for researchers to track the pandas, wireless receivers will be placed at each vertex of the enclosing polygon and each animal will be outfitted with a wireless transmitter. Each wireless receiver will cover a circular area centered at the location of the receiver, and all receivers will have the same range. Naturally, receivers with smaller range are cheaper, so your goal is to determine the smallest possible range that suffices to cover the entire park.\n\nAs an example, Figure G.1 shows the park described by the first sample input. Notice that a wireless range of $35$ does not suffice (a) , while the optimal range of $50$ covers the entire park (b) .\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15695/1.png)\n\nFigure G.1 : Illustration of Sample Input $1$ .\n\n", "inputFormat": "\n\nThe first line of the input contains an integer $n (3 \\le n \\le 2 000)$ specifying the number of vertices of the polygon bounding the park. This is followed by $n$ lines, each containing two integers $x$ and $y (|x|, |y| \\le 10^{4})$ that give the coordinates $(x , y)$ of the vertices of the polygon in counter-clockwise order. The polygon is simple; that is, its vertices are distinct and no two edges of the polygon intersect or touch, except that consecutive edges touch at their common vertex.\n\n", "outputFormat": "\n\nDisplay the minimum wireless range that suffices to cover the park, with an absolute or relative error of at most $10^{−6}.$\n\n", "hint": "Time limit: 10 s, Memory limit: 1024 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 WF] Panda Preserve", "background": null, "description": "上个月，四川省获得资金建立大熊猫国家公园，这是一处为超过 1800 只大熊猫提供栖息地的自然保护区。公园将被多边形围栏包围。为了让研究人员追踪大熊猫，将在围栏的每个顶点放置无线接收器，每只大熊猫都将配备无线发射器。每个无线接收器将覆盖以接收器位置为中心的圆形区域，并且所有接收器的覆盖范围相同。显然，覆盖范围较小的接收器更便宜，因此你的目标是确定能够覆盖整个公园的最小可能范围。\n\n例如，图 G.1 显示了由第一个样例输入描述的公园。注意，35 的无线范围不足以覆盖整个公园（a），而 50 的最佳范围则可以覆盖整个公园（b）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n9l4fete.png)\n\n图 G.1：样例输入 1 的示意图。", "inputFormat": "输入的第一行包含一个整数 $n (3 \\le n \\le 2000)$，表示公园边界多边形的顶点数。接下来是 $n$ 行，每行包含两个整数 $x$ 和 $y (|x|, |y| \\le 10^{4})$，表示多边形顶点的坐标 $(x, y)$，按逆时针顺序给出。该多边形是简单多边形，即其顶点是不同的，且多边形的任意两条边不相交或接触，除非是相邻边在其公共顶点处接触。", "outputFormat": "输出能够覆盖整个公园的最小无线范围，绝对误差或相对误差不超过 $10^{-6}$。", "hint": "时间限制：10 秒，内存限制：1024 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6948", "type": "P", "difficulty": 5, "samples": [["4 4 6\n0 1 4 4\n0 5 2 0\n0 3 3 6\n2 6 4 2\n", "1\n0 4 4 3\n"], ["5 4 6\n0 2 2 0\n0 3 2 6\n1 6 3 0\n1 0 4 4\n3 6 4 2\n", "2\n0 4 4 4.5\n0 1 4 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "Special Judge", "ICPC", "WF"], "title": "[ICPC 2018 WF] Single Cut of Failure", "background": "", "description": "\n\nThe Intrusion and Crime Prevention Company (ICPC) builds intrusion detection systems for homes and businesses. The International Collegiate Programming Contest (in a strange coincidence also known as ICPC) is considering hiring the company to secure the room that contains the problem set for next year's World Finals.\n\nThe contest staff wants to prevent the intrusion attempts that were made in past years, such as rappelling down the outside of the building to enter through a window, crawling through air ducts, impersonating Bill Poucher, and the creative use of an attack submarine. For that reason, the problems will be stored in a room that has a single door and no other exits.\n\nICPC (the company) proposes to install sensors on the four sides of the door, where pairs of sensors are connected by wires. If somebody opens the door, any connected sensor pair will detect this and cause an alarm to sound.\n\nThe system has one design flaw, however. An intruder might cut the wires before opening the door. To assess the security of the system, you need to determine the minimum number of line segments that cut all wires. Figure H.1 shows two configurations of wires on the door (corresponding to the two sample inputs), and minimum-size cuts that intersect all wires.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15696/1.png)\n\nFigure H.1 : Illustrations of Sample Inputs $1$ and $2$ .\n\n", "inputFormat": "\n\nThe input starts with a line containing three integers $n , w$ , and $h$ , which represent the number of wires installed $(1 \\le n \\le 10^{6})$ and the dimensions of the door $(1 \\le w , h \\le 10^{8}).$ This is followed by $n$ lines, each describing a wire placement. Each of these lines contains four integers $x_{1}, y_{1}, x_{2},$ and $y_{2} (0 \\le x_{1}, x_{2} \\le w , 0 \\le y_{1}, y_{2} \\le h)$ , meaning that a wire goes from $(x_{1}, y_{1})$ to $(x_{2}, y_{2}).$ Each wire connects different sides of the door. No wire is anchored to any of the four corners of the door. All locations in the input are distinct.\n\n", "outputFormat": "\n\nDisplay a minimum-size set of straight line cuts that intersect all wires. First, display the number of cuts needed. Then display the cuts, one per line in the format $x_{1} y_{1} x_{2} y_{2}$ for the cut between $(x_{1}, y_{1})$ and $(x_{2}, y_{2}).$ Each cut has to start and end on different sides of the door. Cuts cannot start or end closer than $10^{−6}$ to any wire anchor location or any corner of the door.\n\nCuts may be displayed in any order. The start and end locations of each cut may be displayed in either order. If there are multiple sets of cuts with the same minimum size, display any of them.\n\n", "hint": "Time limit: 6 s, Memory limit: 1024 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 WF] Single Cut of Failure", "background": "", "description": "\n\nThe Intrusion and Crime Prevention Company (ICPC) builds intrusion detection systems for homes and businesses. The International Collegiate Programming Contest (in a strange coincidence also known as ICPC) is considering hiring the company to secure the room that contains the problem set for next year's World Finals.\n\nThe contest staff wants to prevent the intrusion attempts that were made in past years, such as rappelling down the outside of the building to enter through a window, crawling through air ducts, impersonating Bill Poucher, and the creative use of an attack submarine. For that reason, the problems will be stored in a room that has a single door and no other exits.\n\nICPC (the company) proposes to install sensors on the four sides of the door, where pairs of sensors are connected by wires. If somebody opens the door, any connected sensor pair will detect this and cause an alarm to sound.\n\nThe system has one design flaw, however. An intruder might cut the wires before opening the door. To assess the security of the system, you need to determine the minimum number of line segments that cut all wires. Figure H.1 shows two configurations of wires on the door (corresponding to the two sample inputs), and minimum-size cuts that intersect all wires.\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15696/1.png)\n\nFigure H.1 : Illustrations of Sample Inputs $1$ and $2$ .\n\n", "inputFormat": "\n\nThe input starts with a line containing three integers $n , w$ , and $h$ , which represent the number of wires installed $(1 \\le n \\le 10^{6})$ and the dimensions of the door $(1 \\le w , h \\le 10^{8}).$ This is followed by $n$ lines, each describing a wire placement. Each of these lines contains four integers $x_{1}, y_{1}, x_{2},$ and $y_{2} (0 \\le x_{1}, x_{2} \\le w , 0 \\le y_{1}, y_{2} \\le h)$ , meaning that a wire goes from $(x_{1}, y_{1})$ to $(x_{2}, y_{2}).$ Each wire connects different sides of the door. No wire is anchored to any of the four corners of the door. All locations in the input are distinct.\n\n", "outputFormat": "\n\nDisplay a minimum-size set of straight line cuts that intersect all wires. First, display the number of cuts needed. Then display the cuts, one per line in the format $x_{1} y_{1} x_{2} y_{2}$ for the cut between $(x_{1}, y_{1})$ and $(x_{2}, y_{2}).$ Each cut has to start and end on different sides of the door. Cuts cannot start or end closer than $10^{−6}$ to any wire anchor location or any corner of the door.\n\nCuts may be displayed in any order. The start and end locations of each cut may be displayed in either order. If there are multiple sets of cuts with the same minimum size, display any of them.\n\n", "hint": "Time limit: 6 s, Memory limit: 1024 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 WF] Single Cut of Failure", "background": null, "description": "入侵与犯罪预防公司 (the Intrusion and Crime Prevection Company, 简称 ICPC) 为家庭和商业公司建立了入侵检测系统。国际大学生编程竞赛 (the International Collegiate Programming Contest, 碰巧也简称 ICPC) 正在考虑雇佣该公司来确保下一年 World Finals 的题目文件的储藏房间的安全。\n\n比赛工作人员希望防止过去几年发生的入侵尝试，例如在大楼的外部垂直速降然后从窗户进入，从排气管道爬进来，冒充 Bill Poucher （译者注：某知名计算机科学教授，ACM-ICPC 的执行董事），以及创造性地使用攻击潜艇。正因如此，题目文件将被储藏在仅有一扇门而没有任何其他出入口的房间里。\n\nICPC （指公司）建议在门的四边安装传感器，每对传感器由电线连接。如果有人打开了门，任何连接的一对传感器将检测到这个动作并引起警报声。\n\n然而这个系统存在一个设计缺陷。入侵者可以在开门之前剪断这些电线。为了评估这个系统的安全性，你需要使用最少的线段剪断所有电线。下图展示了两种具有不同电线分布的门（对应于两个样例）以及最少的与所有电线相交的线段。\n\n![图](https://cdn.luogu.com.cn/upload/image_hosting/iat1ibs7.png)", "inputFormat": "第一行三个整数 $n, w, h$ 分别表示电线的数量 ($1 \\le n \\le 10^6$) 以及门的尺寸 ($1 \\le w, h \\le 10^8$) 。接下来 $n$ 行，每行描述一个电线的位置。这些行中每行包含四个整数 $x_1, y_1, x_2, y_2$ ($0 \\le x_1, x_2 \\le w, 0 \\le y_1, y_2 \\le h$) 表示该电线从 $(x_1, y_1)$ 连接到 $(x_2, y_2)$ 。每根电线连接门的不同的两边。没有电线连接到门的四个角落。输入的所有位置都是两两不同的。", "outputFormat": "输出最少的一组线段与所有电线有交。首先第一行输出线段的数量。然后逐行输出线段，每行以 $x_1$ $y_1$ $x_2$ $y_2$ 的格式给出一个从 $(x_1, y_1)$ 到 $(x_2, y_2)$ 的线段。每条线段的两个端点必须在门的不同的两边。线段的端点与任何电线端点及门的四个角落的距离不能小于 $10^{-6}$ 。\n\n线段可以以任意顺序输出。线段的两个端点也可以以任意顺序输出。如果有多种可行的解，输出任意一组解即可。\n\n译者注：线段的端点坐标可以是满足限制的任意**实数**。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P6949", "type": "P", "difficulty": 6, "samples": [["3 3\nx---x\n \\ /\n  x\n / \\\nx   x\n", "1\n"], ["4 10\nx   x---x---x   x\n     \\ /   / \\\n  x   x---x   x   x\n     / \\ / \\   \\\nx   x---x---x---x\n   /   / \\   \\ / \\\n  x---x---x---x---x\n", "12\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "ICPC", "WF"], "title": "[ICPC 2018 WF] Triangles", "background": "", "description": "\n\nFor your trip to Beijing, you have brought plenty of puzzle books, many of them containing challenges like the following: how many triangles can be found in Figure I.1 ?\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15697/1.png)\n\nFigure I.1 : Illustration of Sample Input $2$ .\n\nWhile these puzzles keep your interest for a while, you quickly get bored with them and instead start thinking about how you might solve them algorithmically. Who knows, maybe a problem like that will actually be used in this year's contest. Well, guess what? Today is your lucky day!\n\n", "inputFormat": "\n\nThe first line of input contains two integers $r$ and $c (1 \\le r \\le 3 000 , 1 \\le c \\le 6 000)$ , specifying the picture size, where $r$ is the number of rows of vertices and $c$ is the number of columns. Following this are 2r $− 1$ lines, each of them having at most 2c $− 1$ characters. Odd lines contain grid vertices (represented as lowercase $x$ characters) and zero or more horizontal edges, while even lines contain zero or more diagonal edges. Specifically, picture lines with numbers 4k $+ 1$ have vertices in positions $1 , 5 , 9 , 13$ , . . . while lines with numbers 4k $+ 3$ have vertices in positions $3 , 7 , 11 , 15$ , . . . . All possible vertices are represented in the input (for example, see how Figure I.1 is represented in Sample Input $2$) . Horizontal edges connecting neighboring vertices are represented by three dashes. Diagonal edges are represented by a single forward slash $(‘/')$ or backslash $(‘\\')$ character. The edge characters will be placed exactly between the corresponding vertices. All other characters will be space characters. Note that if any input line could contain trailing whitespace, that whitespace may be omitted.\n\n", "outputFormat": "\n\nDisplay the number of triangles (of any size) formed by grid edges in the input picture.\n\n", "hint": "Time limit: 6 s, Memory limit: 1024 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 WF] Triangles", "background": "", "description": "\n\nFor your trip to Beijing, you have brought plenty of puzzle books, many of them containing challenges like the following: how many triangles can be found in Figure I.1 ?\n\n![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/15697/1.png)\n\nFigure I.1 : Illustration of Sample Input $2$ .\n\nWhile these puzzles keep your interest for a while, you quickly get bored with them and instead start thinking about how you might solve them algorithmically. Who knows, maybe a problem like that will actually be used in this year's contest. Well, guess what? Today is your lucky day!\n\n", "inputFormat": "\n\nThe first line of input contains two integers $r$ and $c (1 \\le r \\le 3 000 , 1 \\le c \\le 6 000)$ , specifying the picture size, where $r$ is the number of rows of vertices and $c$ is the number of columns. Following this are 2r $− 1$ lines, each of them having at most 2c $− 1$ characters. Odd lines contain grid vertices (represented as lowercase $x$ characters) and zero or more horizontal edges, while even lines contain zero or more diagonal edges. Specifically, picture lines with numbers 4k $+ 1$ have vertices in positions $1 , 5 , 9 , 13$ , . . . while lines with numbers 4k $+ 3$ have vertices in positions $3 , 7 , 11 , 15$ , . . . . All possible vertices are represented in the input (for example, see how Figure I.1 is represented in Sample Input $2$) . Horizontal edges connecting neighboring vertices are represented by three dashes. Diagonal edges are represented by a single forward slash $(‘/')$ or backslash $(‘\\')$ character. The edge characters will be placed exactly between the corresponding vertices. All other characters will be space characters. Note that if any input line could contain trailing whitespace, that whitespace may be omitted.\n\n", "outputFormat": "\n\nDisplay the number of triangles (of any size) formed by grid edges in the input picture.\n\n", "hint": "Time limit: 6 s, Memory limit: 1024 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 WF] Triangles", "background": null, "description": "在你去北京的旅行中，你带了很多谜题书，其中很多都包含类似以下的挑战：在图 I.1 中可以找到多少个三角形？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7jipp6ud.png)\n\n图 I.1：样例输入 2 的插图。\n\n虽然这些谜题让你一时感兴趣，但你很快就对它们感到厌倦，转而开始思考如何用算法来解决它们。谁知道呢，也许这样的题目会在今年的比赛中出现。好吧，猜猜看？今天是你的幸运日！", "inputFormat": "输入的第一行包含两个整数 $r$ 和 $c$ $(1 \\le r \\le 3000, 1 \\le c \\le 6000)$，指定图像的大小，其中 $r$ 是顶点的行数，$c$ 是列数。接下来的 $2r - 1$ 行中，每行最多有 $2c - 1$ 个字符。奇数行包含网格顶点（用小写字母 $x$ 表示）和零个或多个水平边，而偶数行包含零个或多个对角边。具体来说，编号为 $4k + 1$ 的行在位置 $1, 5, 9, 13, \\ldots$ 处有顶点，而编号为 $4k + 3$ 的行在位置 $3, 7, 11, 15, \\ldots$ 处有顶点。输入中表示了所有可能的顶点（例如，参见样例输入 2 中图 I.1 的表示方式）。连接相邻顶点的水平边用三个短划线表示。对角边用一个正斜杠（‘/’）或反斜杠（‘\\\\’）字符表示。边字符将精确地放置在相应顶点之间。所有其他字符将是空格字符。注意，如果任何输入行可能包含尾随空格，则这些空格可能会被省略。", "outputFormat": "显示输入图像中由网格边形成的三角形（任意大小）的数量。", "hint": "时间限制：6 秒，内存限制：1024 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
