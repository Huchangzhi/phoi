{"pid": "P3411", "type": "P", "difficulty": 5, "samples": [["5\n6 3 7 8 6\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "单调队列"], "title": "序列变换", "background": "", "description": "给定一个长度为 $n$ 的数列 $A_i$。\n\n你可以对数列进行若干次操作，每次操作可以从数列中任选一个数，把它移动到数列的开头或者结尾。\n\n求最少经过多少次操作，可以把数列变成单调不减的。“单调不减”意味着数列中的任意一个数都不大于排在它后边的数。\n", "inputFormat": "第一行是一个正整数 $n$。\n\n第二行是 $n$ 个正整数 $A_i$。\n", "outputFormat": "输出一个整数，表示最少需要的操作次数。\n", "hint": "对于 $30 \\%$ 的数据，满足 $1 \\le n \\le 10$。\n\n对于 $60 \\%$ 的数据，满足 $1 \\le n \\le 1000$。\n\n对于 $100 \\%$ 的数据，满足 $1 \\le n \\le {10}^6$，$1 \\le A_i \\le {10}^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Sequence Transformation", "background": "", "description": "Given a sequence $A_i$ of length $n$.\n\nYou may perform several operations. In each operation, you can choose any number in the sequence and move it to the beginning or to the end of the sequence.\n\nFind the minimum number of operations needed to make the sequence non-decreasing. \"Non-decreasing\" means that every number in the sequence is not greater than the number that follows it.", "inputFormat": "The first line contains a positive integer $n$.\n\nThe second line contains $n$ positive integers $A_i$.", "outputFormat": "Output a single integer, representing the minimum number of operations required.", "hint": "For $30 \\%$ of the testdata, $1 \\le n \\le 10$.\n\nFor $60 \\%$ of the testdata, $1 \\le n \\le 1000$.\n\nFor $100 \\%$ of the testdata, $1 \\le n \\le {10}^6$, $1 \\le A_i \\le {10}^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "序列变换", "background": "", "description": "给定一个长度为 $n$ 的数列 $A_i$。\n\n你可以对数列进行若干次操作，每次操作可以从数列中任选一个数，把它移动到数列的开头或者结尾。\n\n求最少经过多少次操作，可以把数列变成单调不减的。“单调不减”意味着数列中的任意一个数都不大于排在它后边的数。\n", "inputFormat": "第一行是一个正整数 $n$。\n\n第二行是 $n$ 个正整数 $A_i$。\n", "outputFormat": "输出一个整数，表示最少需要的操作次数。\n", "hint": "对于 $30 \\%$ 的数据，满足 $1 \\le n \\le 10$。\n\n对于 $60 \\%$ 的数据，满足 $1 \\le n \\le 1000$。\n\n对于 $100 \\%$ 的数据，满足 $1 \\le n \\le {10}^6$，$1 \\le A_i \\le {10}^6$。\n", "locale": "zh-CN"}}}
{"pid": "P3412", "type": "P", "difficulty": 6, "samples": [["3\n1 2\n1 3\n", "110916041"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "洛谷原创", "概率论", "期望", "洛谷月赛"], "title": "仓鼠找sugar II", "background": "", "description": "小仓鼠和他的基（mei）友（zi）sugar 住在地下洞穴中，每个节点的编号为 $1\\sim n$ 间的一个整数。地下洞穴是一个树形结构（两个洞穴间距离为 $1$）。这一天小仓鼠打算从从他的卧室 $a$（**是任意的**）走到他的基友卧室 $b$（还**是任意的**）（注意，$a$ 有可能等于 $b$）。然而小仓鼠学 OI 学傻了，不知道怎么怎么样才能用最短的路程走到目的地，于是他只能随便乱走。当他在一个节点时，会等概率走到这个点的母亲或者所有孩子节点（例如这个节点有一个母亲节点和两个子节点，那么下一步走到这 $3$ 个节点的概率都是 $\\dfrac{1}{3}$），一旦走到了他基友的卧室，就会停下。\n\n现在小仓鼠希望知道，他走到目的地时，走的步数的期望。这个期望本来是一个有理数，但是为了避免误差，我们要求输出这个有理数对 $998,244,353$ 取模的结果。\n\n形式化地说，可以证明答案可以被表示为既约分数 $\\dfrac{y}{x}$，其中 $x\\not\\equiv 0\\pmod {998,244,353}$。可以证明存在一个唯一的整数 $z$（$0\\le z\\lt 998,244,353$），使得 $xz=y$，你只需要输出 $z$ 的值。\n\n\n小仓鼠那么弱，还要天天被 JOHNKRAM 大爷虐，请你快来救救他吧！", "inputFormat": "第一行一个正整数 $n$，表示这棵树节点的个数。\n\n接下来 $n-1$ 行，每行两个正整数 $u$ 和 $v$，表示节点 $u$ 到节点 $v$ 之间有一条边。", "outputFormat": "一个整数，表示取模后的答案。", "hint": "样例解释：期望的真实值为 $\\dfrac {16}{9}$。\n\n如果 $a$ 是叶子，$b$ 是根，此时期望 $\\mathbb{E}_1=1$，有 $2$ 种情况。\n\n如果 $a$ 是根，$b$ 是叶子，则 $\\displaystyle \\mathbb{E}_2=\\frac{1}{2}+\\frac{3}{4}+\\frac{5}{8}+\\cdots=3$。有 $2$ 种情况。\n\n如果 $a,b$ 是不同的叶子，则 $\\mathbb{E}_3=\\mathbb{E}_2+1=4$。有 $2$ 种情况。\n\n如果 $a=b$，则 $\\mathbb{E}_4=0$。有 $3$ 种情况。\n\n所以答案为 $\\displaystyle \\frac{2\\times 1+2\\times 3+2\\times 4+3\\times 0}{2+2+2+3}=\\frac{16}{9}$。\n\n由于 $110,916,041\\times 9=998,244,369\\equiv 16\\pmod {998,244,353}$，所以输出 $110,916,041$。\n\n对于 $30\\%$ 的数据，$n\\le 5$；\n\n对于 $50\\%$ 的数据，$n\\le 5000$；\n\n对于所有数据，$n\\le 100000$。\n\n$\\text{Statement fixed by @Starrykiller.}$", "locale": "zh-CN", "translations": {"en": {"title": "Hamster Seeks sugar II", "background": "", "description": "The little hamster and his buddy sugar live in an underground cave system. Each node is an integer between $1 \\sim n$. The cave system is a tree (each edge has length $1$). On this day the hamster plans to go from his bedroom $a$ (arbitrary) to his buddy’s bedroom $b$ (also arbitrary) (note that $a$ may be equal to $b$). However, after studying OI too hard, he has gone silly and does not know how to take the shortest path, so he just walks randomly. When he is at a node, he moves with equal probability to its parent or any of its children (for example, if this node has one parent and two children, then the probability of moving to each of these $3$ neighbors is $\\dfrac{1}{3}$). Once he reaches $b$, he stops.\n\nNow the little hamster wants to know the expected number of steps when he reaches the destination. This expectation is a rational number. To avoid precision errors, we ask you to output this rational number modulo $998,244,353$.\n\nFormally, it can be shown that the answer can be written as an irreducible fraction $\\dfrac{y}{x}$, where $x \\not\\equiv 0 \\pmod{998,244,353}$. It can be shown that there exists a unique integer $z$ ($0 \\le z \\lt 998,244,353$) such that $x z \\equiv y \\pmod{998,244,353}$; you only need to output the value of $z$.\n\nThe little hamster is so weak and always gets beaten by JOHNKRAM. Please help him!", "inputFormat": "The first line contains a positive integer $n$, the number of nodes in the tree.\n\nThe next $n-1$ lines each contain two positive integers $u$ and $v$, indicating that there is an edge between nodes $u$ and $v$.", "outputFormat": "Output a single integer, the answer modulo $998,244,353$.", "hint": "Sample explanation: the true expected value is $\\dfrac {16}{9}$.\n\nIf $a$ is a leaf and $b$ is the root, then the expectation is $\\mathbb{E}_1=1$. There are $2$ cases.\n\nIf $a$ is the root and $b$ is a leaf, then $\\displaystyle \\mathbb{E}_2=\\frac{1}{2}+\\frac{3}{4}+\\frac{5}{8}+\\cdots=3$. There are $2$ cases.\n\nIf $a,b$ are different leaves, then $\\mathbb{E}_3=\\mathbb{E}_2+1=4$. There are $2$ cases.\n\nIf $a=b$, then $\\mathbb{E}_4=0$. There are $3$ cases.\n\nSo the answer is $\\displaystyle \\frac{2\\times 1+2\\times 3+2\\times 4+3\\times 0}{2+2+2+3}=\\frac{16}{9}$.\n\nSince $110,916,041\\times 9=998,244,369\\equiv 16\\pmod {998,244,353}$, output $110,916,041$.\n\nFor $30\\%$ of the testdata, $n\\le 5$.\n\nFor $50\\%$ of the testdata, $n\\le 5,000$.\n\nFor all testdata, $n\\le 100,000$.\n\n$\\text{Statement fixed by @Starrykiller.}$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "仓鼠找sugar II", "background": "", "description": "小仓鼠和他的基（mei）友（zi）sugar 住在地下洞穴中，每个节点的编号为 $1\\sim n$ 间的一个整数。地下洞穴是一个树形结构（两个洞穴间距离为 $1$）。这一天小仓鼠打算从从他的卧室 $a$（**是任意的**）走到他的基友卧室 $b$（还**是任意的**）（注意，$a$ 有可能等于 $b$）。然而小仓鼠学 OI 学傻了，不知道怎么怎么样才能用最短的路程走到目的地，于是他只能随便乱走。当他在一个节点时，会等概率走到这个点的母亲或者所有孩子节点（例如这个节点有一个母亲节点和两个子节点，那么下一步走到这 $3$ 个节点的概率都是 $\\dfrac{1}{3}$），一旦走到了他基友的卧室，就会停下。\n\n现在小仓鼠希望知道，他走到目的地时，走的步数的期望。这个期望本来是一个有理数，但是为了避免误差，我们要求输出这个有理数对 $998,244,353$ 取模的结果。\n\n形式化地说，可以证明答案可以被表示为既约分数 $\\dfrac{y}{x}$，其中 $x\\not\\equiv 0\\pmod {998,244,353}$。可以证明存在一个唯一的整数 $z$（$0\\le z\\lt 998,244,353$），使得 $xz=y$，你只需要输出 $z$ 的值。\n\n\n小仓鼠那么弱，还要天天被 JOHNKRAM 大爷虐，请你快来救救他吧！", "inputFormat": "第一行一个正整数 $n$，表示这棵树节点的个数。\n\n接下来 $n-1$ 行，每行两个正整数 $u$ 和 $v$，表示节点 $u$ 到节点 $v$ 之间有一条边。", "outputFormat": "一个整数，表示取模后的答案。", "hint": "样例解释：期望的真实值为 $\\dfrac {16}{9}$。\n\n如果 $a$ 是叶子，$b$ 是根，此时期望 $\\mathbb{E}_1=1$，有 $2$ 种情况。\n\n如果 $a$ 是根，$b$ 是叶子，则 $\\displaystyle \\mathbb{E}_2=\\frac{1}{2}+\\frac{3}{4}+\\frac{5}{8}+\\cdots=3$。有 $2$ 种情况。\n\n如果 $a,b$ 是不同的叶子，则 $\\mathbb{E}_3=\\mathbb{E}_2+1=4$。有 $2$ 种情况。\n\n如果 $a=b$，则 $\\mathbb{E}_4=0$。有 $3$ 种情况。\n\n所以答案为 $\\displaystyle \\frac{2\\times 1+2\\times 3+2\\times 4+3\\times 0}{2+2+2+3}=\\frac{16}{9}$。\n\n由于 $110,916,041\\times 9=998,244,369\\equiv 16\\pmod {998,244,353}$，所以输出 $110,916,041$。\n\n对于 $30\\%$ 的数据，$n\\le 5$；\n\n对于 $50\\%$ 的数据，$n\\le 5000$；\n\n对于所有数据，$n\\le 100000$。\n\n$\\text{Statement fixed by @Starrykiller.}$", "locale": "zh-CN"}}}
{"pid": "P3413", "type": "P", "difficulty": 6, "samples": [["1 100", "10"], ["100 1000", "253"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2016", "洛谷原创", "数位 DP", "洛谷月赛"], "title": "SAC#1 - 萌数", "background": "本题由世界上最蒟蒻的 SOL 提供。\n\n寂月城网站是完美信息教室的官网。地址：<http://191.101.11.174/mgzd>。\n", "description": "蒟蒻 SOL 居然觉得数很萌！\n\n好在在他眼里，并不是所有数都是萌的。只有满足“存在长度至少为 $2$ 的回文子串”的数是萌的——也就是说，$101$ 是萌的，因为 $101$ 本身就是一个回文数；$110$ 是萌的，因为包含回文子串 $11$；但是 $102$ 不是萌的，$1201$ 也不是萌的。\n\n现在 SOL 想知道从 $l$ 到 $r$ 的所有整数中有多少个萌数。\n\n由于答案可能很大，所以只需要输出答案对 $1000000007$（$10^9+7$）的余数。", "inputFormat": "输入包含仅 $1$ 行，包含两个整数：$l$，$r$。", "outputFormat": "输出仅 $1$ 行，包含一个整数，即为答案。\n", "hint": "记 $n$ 为 $r$ 在 $10$ 进制下的位数。\n\n对于 $10\\%$ 的数据，$n \\le 3$。\n\n对于 $30\\%$ 的数据，$n \\le 6$。\n\n对于 $60\\%$ 的数据，$n \\le 9$。\n\n对于全部的数据，$n \\le 1000$，$l < r$。\n\n\n------------\n\n2024/2/4 添加一组 hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "SAC#1 - Cute Numbers", "background": "This problem is provided by SOL, the world's most \"juruo\" (noob).\nThe Jiyue City website is the official site of the Perfect Information Classroom. Address: <http://191.101.11.174/mgzd>.", "description": "The newbie SOL thinks numbers are cute!\n\nFortunately, not all numbers are cute in his eyes. A number is cute if and only if there exists a palindromic substring of length at least $2$—that is, 101 is cute because 101 itself is a palindrome; 110 is cute because it contains the palindromic substring 11; but 102 is not cute, and 1201 is not cute.\n\nNow SOL wants to know how many cute numbers there are among all integers from $l$ to $r$.\n\nSince the answer may be large, output the answer modulo $1000000007$ ($10^9+7$).", "inputFormat": "The input contains a single line with two integers: $l$ and $r$.", "outputFormat": "Output a single line containing one integer, the answer.", "hint": "Let $n$ be the number of digits of $r$ in base $10$.\n\nFor $10\\%$ of the testdata, $n \\le 3$.\nFor $30\\%$ of the testdata, $n \\le 6$.\nFor $60\\%$ of the testdata, $n \\le 9$.\nFor all the testdata, $n \\le 1000$, $l < r$.\n\n2024/2/4: One set of hack testdata was added.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "SAC#1 - 萌数", "background": "本题由世界上最蒟蒻的 SOL 提供。\n\n寂月城网站是完美信息教室的官网。地址：<http://191.101.11.174/mgzd>。\n", "description": "蒟蒻 SOL 居然觉得数很萌！\n\n好在在他眼里，并不是所有数都是萌的。只有满足“存在长度至少为 $2$ 的回文子串”的数是萌的——也就是说，$101$ 是萌的，因为 $101$ 本身就是一个回文数；$110$ 是萌的，因为包含回文子串 $11$；但是 $102$ 不是萌的，$1201$ 也不是萌的。\n\n现在 SOL 想知道从 $l$ 到 $r$ 的所有整数中有多少个萌数。\n\n由于答案可能很大，所以只需要输出答案对 $1000000007$（$10^9+7$）的余数。", "inputFormat": "输入包含仅 $1$ 行，包含两个整数：$l$，$r$。", "outputFormat": "输出仅 $1$ 行，包含一个整数，即为答案。\n", "hint": "记 $n$ 为 $r$ 在 $10$ 进制下的位数。\n\n对于 $10\\%$ 的数据，$n \\le 3$。\n\n对于 $30\\%$ 的数据，$n \\le 6$。\n\n对于 $60\\%$ 的数据，$n \\le 9$。\n\n对于全部的数据，$n \\le 1000$，$l < r$。\n\n\n------------\n\n2024/2/4 添加一组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P3414", "type": "P", "difficulty": 3, "samples": [["3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2016", "洛谷原创", "组合数学", "洛谷月赛"], "title": "SAC#1 - 组合数", "background": null, "description": "今天小明学习了组合数，现在他很想知道 $\\sum \\rm{C}_{n}^{i}$ 是多少。其中 $\\rm{C}$ 是组合数（即 $\\rm{C}_{n}^{i}$ 表示 $n$ 个物品无顺序选取 $i$ 个的方案数），$i$ 取从 $0$ 到 $n$ 的所有偶数。\n\n由于答案可能很大，请输出答案对 $6662333$ 的余数。", "inputFormat": "输入仅包含一个整数 $n$。", "outputFormat": "输出一个整数，即为答案。", "hint": "对于 $20\\%$ 的数据，$n \\le 20$；\n\n对于 $50\\%$ 的数据，$n \\le 10^{3}$；\n\n对于 $100\\%$ 的数据，$n \\le 10^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "SAC#1 - Binomial Coefficients", "background": "", "description": "Today Xiaoming learned about combinations, and now he wants to know the value of $\\sum \\rm{C}_{n}^{i}$. Here $\\rm{C}$ is the binomial coefficient (i.e., $\\rm{C}_{n}^{i}$ denotes the number of ways to choose $i$ items from $n$ items without order), and $i$ ranges over all even integers from $0$ to $n$.\n\nSince the answer may be large, please output the answer modulo $6662333$.", "inputFormat": "The input contains a single integer $n$.", "outputFormat": "Output a single integer, the answer.", "hint": "For 20% of the testdata, $n \\le 20$.\n\nFor 50% of the testdata, $n \\le 10^{3}$.\n\nFor 100% of the testdata, $n \\le 10^{18}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "SAC#1 - 组合数", "background": null, "description": "今天小明学习了组合数，现在他很想知道 $\\sum \\rm{C}_{n}^{i}$ 是多少。其中 $\\rm{C}$ 是组合数（即 $\\rm{C}_{n}^{i}$ 表示 $n$ 个物品无顺序选取 $i$ 个的方案数），$i$ 取从 $0$ 到 $n$ 的所有偶数。\n\n由于答案可能很大，请输出答案对 $6662333$ 的余数。", "inputFormat": "输入仅包含一个整数 $n$。", "outputFormat": "输出一个整数，即为答案。", "hint": "对于 $20\\%$ 的数据，$n \\le 20$；\n\n对于 $50\\%$ 的数据，$n \\le 10^{3}$；\n\n对于 $100\\%$ 的数据，$n \\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P3415", "type": "P", "difficulty": 6, "samples": [["26\n0 5\n1 1\n1 5\n1 9\n3 5\n3 10\n4 0\n4 1\n4 2\n4 4\n4 6\n4 9\n4 11\n5 0\n5 2\n5 4\n5 8\n5 9\n5 10\n5 11\n6 5\n7 5\n8 5\n9 10\n10 2\n10 5", "3\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树"], "title": "祭坛", "background": "在遥远的Dgeak大陆，生活着一种叫做Dar-dzo-nye的怪物。每当这种怪物降临，人们必须整夜对抗怪物而不能安睡。为了乞求这种怪物不再降临，人们决定建造祭坛。\n", "description": "Dgeak大陆可以看成一个用平面直角坐标系表示的巨大平面。在这个平面上，有 n 个Swaryea水晶柱，每个水晶柱可以用一个点表示。\n\n如果 4 个水晶柱依次相连可以构成一个四边形，满足其两条对角线分别平行于 x 轴和 y 轴，并且对角线的交点位于四边形内部（不包括边界），那么这 4 个水晶柱就可以建立一个结界。其中，对角线的交点称作这个结界的中心。\n\n例如下左图中，水晶柱 ABCD 可以建立一个结界，其中心为 O。\n\n![](https://cdn.luogu.com.cn/upload/pic/3591.png)   ![](https://cdn.luogu.com.cn/upload/pic/3592.png)\n\n为了起到抵御Dar-dzo-nye的最佳效果，人们会把祭坛修建在最多层结界的保护中。其中不同层的结界必须有共同的中心，这些结界的边界不能有任何公共点，并且中心处也不能有水晶柱。这里共同中心的结界数量叫做结界的层数。\n\n为了达成这个目的，人们要先利用现有的水晶柱建立若干个结界，然后在某些结界的中心建立祭坛。\n\n例如上右图中，黑色的点表示水晶柱（注意 P 和 O 点不是水晶柱）。祭坛的一个最佳位置为 O 点，可以建立在 3 层结界中，其结界的具体方案见下左图。当然，建立祭坛的最佳位置不一定是唯一，在上右图中，O 点左侧 1 单位的点 P 也可以建立一个在 3 层结界中的祭坛，见下右图。\n\n![](https://cdn.luogu.com.cn/upload/pic/3593.png)   ![](https://cdn.luogu.com.cn/upload/pic/3594.png)\n\n现在人们想知道：\n\n1. 祭坛最佳选址地点所在的结界层数；\n\n2. 祭坛最佳的选址地点共有多少个。\n", "inputFormat": "输入的第一行包含两个正整数 n,表示水晶柱的个数\n\n接下来 n 行，每行包含两个非负整数 x,y，表示每个水晶柱的坐标。保证相同的坐标不会重复出现。\n", "outputFormat": "第一行一个整数，表示祭坛最多可以位于多少个结界的中心\n\n第二行一个整数，表示结界数最多的方案有多少种。\n", "hint": "对于30%的数据 n <= 1000\n\n另外30%的数据 n <= 10000\n\n剩下的40%数据 n <= 100000\n\n保证 0 <= x, y <= n\n", "locale": "zh-CN", "translations": {"en": {"title": "Altar", "background": "On the distant continent of Dgeak, there lives a monster called Dar-dzo-nye. Whenever this monster descends, people must fight it through the night without sleep. To pray that this monster will no longer appear, people decide to build altars.", "description": "The continent of Dgeak can be regarded as a vast plane represented by a Cartesian coordinate system. On this plane, there are n Swaryea crystal pillars, each represented by a point.\n\nIf 4 crystal pillars, connected in order, form a quadrilateral such that its two diagonals are respectively parallel to the x-axis and the y-axis, and the intersection of the diagonals lies strictly inside the quadrilateral (not on the boundary), then these 4 pillars can form a ward. The intersection of the diagonals is called the center of this ward.\n\nFor example, in the left figure below, pillars A, B, C, D can form a ward, whose center is O.\n\n![](https://cdn.luogu.com.cn/upload/pic/3591.png)   ![](https://cdn.luogu.com.cn/upload/pic/3592.png)\n\nTo best resist Dar-dzo-nye, people will place the altar at a location enclosed by the most layers of wards. These different layers must share the same center, their boundaries must be pairwise disjoint, and there must be no crystal pillar at the center. The number of wards sharing the same center is called the number of layers.\n\nTo achieve this, people will first use the existing crystal pillars to form several wards, and then build altars at the centers of some wards.\n\nFor example, in the top-right figure, black dots are crystal pillars (note that points P and O are not crystal pillars). One optimal location is point O, where an altar can be placed within 3 layers of wards; a specific scheme is shown in the bottom-left figure. Of course, the optimal location is not necessarily unique; in the top-right figure, the point P that is 1 unit to the left of O can also host an altar within 3 layers of wards, as shown in the bottom-right figure.\n\n![](https://cdn.luogu.com.cn/upload/pic/3593.png)   ![](https://cdn.luogu.com.cn/upload/pic/3594.png)\n\nNow people want to know:\n1. The number of layers at the best altar location.\n2. How many optimal locations there are.", "inputFormat": "The first line contains one positive integer n, the number of crystal pillars.\nEach of the next n lines contains two non-negative integers x, y, the coordinates of a crystal pillar. It is guaranteed that there are no duplicate coordinates.", "outputFormat": "The first line contains one integer, the maximum number of layers in which an altar can be located.\nThe second line contains one integer, the number of locations that achieve this maximum.", "hint": "Constraints:\n- For 30% of the testdata, $n \\le 1000$.\n- For another 30% of the testdata, $n \\le 10000$.\n- For the remaining 40% of the testdata, $n \\le 100000$.\n- It is guaranteed that $0 \\le x, y \\le n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "祭坛", "background": "在遥远的Dgeak大陆，生活着一种叫做Dar-dzo-nye的怪物。每当这种怪物降临，人们必须整夜对抗怪物而不能安睡。为了乞求这种怪物不再降临，人们决定建造祭坛。\n", "description": "Dgeak大陆可以看成一个用平面直角坐标系表示的巨大平面。在这个平面上，有 n 个Swaryea水晶柱，每个水晶柱可以用一个点表示。\n\n如果 4 个水晶柱依次相连可以构成一个四边形，满足其两条对角线分别平行于 x 轴和 y 轴，并且对角线的交点位于四边形内部（不包括边界），那么这 4 个水晶柱就可以建立一个结界。其中，对角线的交点称作这个结界的中心。\n\n例如下左图中，水晶柱 ABCD 可以建立一个结界，其中心为 O。\n\n![](https://cdn.luogu.com.cn/upload/pic/3591.png)   ![](https://cdn.luogu.com.cn/upload/pic/3592.png)\n\n为了起到抵御Dar-dzo-nye的最佳效果，人们会把祭坛修建在最多层结界的保护中。其中不同层的结界必须有共同的中心，这些结界的边界不能有任何公共点，并且中心处也不能有水晶柱。这里共同中心的结界数量叫做结界的层数。\n\n为了达成这个目的，人们要先利用现有的水晶柱建立若干个结界，然后在某些结界的中心建立祭坛。\n\n例如上右图中，黑色的点表示水晶柱（注意 P 和 O 点不是水晶柱）。祭坛的一个最佳位置为 O 点，可以建立在 3 层结界中，其结界的具体方案见下左图。当然，建立祭坛的最佳位置不一定是唯一，在上右图中，O 点左侧 1 单位的点 P 也可以建立一个在 3 层结界中的祭坛，见下右图。\n\n![](https://cdn.luogu.com.cn/upload/pic/3593.png)   ![](https://cdn.luogu.com.cn/upload/pic/3594.png)\n\n现在人们想知道：\n\n1. 祭坛最佳选址地点所在的结界层数；\n\n2. 祭坛最佳的选址地点共有多少个。\n", "inputFormat": "输入的第一行包含两个正整数 n,表示水晶柱的个数\n\n接下来 n 行，每行包含两个非负整数 x,y，表示每个水晶柱的坐标。保证相同的坐标不会重复出现。\n", "outputFormat": "第一行一个整数，表示祭坛最多可以位于多少个结界的中心\n\n第二行一个整数，表示结界数最多的方案有多少种。\n", "hint": "对于30%的数据 n <= 1000\n\n另外30%的数据 n <= 10000\n\n剩下的40%数据 n <= 100000\n\n保证 0 <= x, y <= n\n", "locale": "zh-CN"}}}
{"pid": "P3416", "type": "P", "difficulty": 3, "samples": [["4\n1 3 5\n5 4 3\n7 2 1\n6 1 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2016", "USACO", "Floyd 算法"], "title": "[USACO16DEC] Moocast S", "background": "", "description": "Farmer John's $N$ cows ($1 \\leq N \\leq 200$) want to organize an emergency\"moo-cast\" system for broadcasting important messages among themselves.\n\n\nInstead of mooing at each-other over long distances, the cows decide to equip themselves with walkie-talkies, one for each cow.  These walkie-talkies each have a limited transmission radius -- a walkie-talkie of power $P$ can only transmit to other cows up to a distance of $P$ away (note that cow A might be able to transmit to cow B even if cow B cannot transmit back, due to cow A's power being larger than that of cow B).  Fortunately, cows can relay messages to one-another along a path consisting of several hops, so it is not necessary for every cow to be able to transmit directly to every other cow.\n\n\nDue to the asymmetrical nature of the walkie-talkie transmission, broadcasts from some cows may be more effective than from other cows in their ability toreach large numbers of recipients (taking relaying into account).  Please  help the cows determine the maximum number of cows that can be reached by a broadcast originating from a single cow.\n\n\n\n\n\n", "inputFormat": "The first line of input contains $N$.\n\n\nThe next $N$ lines each contain the $x$ and $y$ coordinates of a single cow ( integers in the range $0 \\ldots 25,000$) followed by $p$, the power of the walkie-talkie held by this cow.\n", "outputFormat": "Write a single line of output containing the maximum number of cows a broadcast from a single cow can reach.  The originating cow is included in this number.\n\n\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO16DEC] Moocast S", "background": "", "description": "Farmer John's $N$ cows ($1 \\leq N \\leq 200$) want to organize an emergency\"moo-cast\" system for broadcasting important messages among themselves.\n\n\nInstead of mooing at each-other over long distances, the cows decide to equip themselves with walkie-talkies, one for each cow.  These walkie-talkies each have a limited transmission radius -- a walkie-talkie of power $P$ can only transmit to other cows up to a distance of $P$ away (note that cow A might be able to transmit to cow B even if cow B cannot transmit back, due to cow A's power being larger than that of cow B).  Fortunately, cows can relay messages to one-another along a path consisting of several hops, so it is not necessary for every cow to be able to transmit directly to every other cow.\n\n\nDue to the asymmetrical nature of the walkie-talkie transmission, broadcasts from some cows may be more effective than from other cows in their ability toreach large numbers of recipients (taking relaying into account).  Please  help the cows determine the maximum number of cows that can be reached by a broadcast originating from a single cow.\n\n\n\n\n\n", "inputFormat": "The first line of input contains $N$.\n\n\nThe next $N$ lines each contain the $x$ and $y$ coordinates of a single cow ( integers in the range $0 \\ldots 25,000$) followed by $p$, the power of the walkie-talkie held by this cow.\n", "outputFormat": "Write a single line of output containing the maximum number of cows a broadcast from a single cow can reach.  The originating cow is included in this number.\n\n\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO16DEC] Moocast S", "background": "", "description": "约翰农场主的 $N$ 头奶牛想建立一个紧急情况下的“哞哞广播”系统，这样它们就可以在自己中间广播重要信息。\n\n奶牛们想让每头牛装备上一个对讲机，而不是在长距离中向另一头奶牛“哞哞”乱叫。这些对讲机每台都有各自的有效传输半径——一个拥有 $P$ 能量的对讲机只能向距离在 $P$ 以内的牛发送信息（注意可能出现 $A$ 牛对讲机的能量比 $B$ 牛的大，而 $A$ 牛可以给 $B$ 牛发送信息，但 $B$ 牛不能传回信息）。幸运的是，奶牛们可以通过其他奶牛中继，沿着一条跳跃的路径传递信息，因此每个奶牛不必要直接向每个其他奶牛传播。\n\n由于对讲机的不对称性质，来自一些奶牛的广播可能比其他奶牛的广播能够达到更多的接受者（考虑中继的情况）的能力更有效。请帮助奶牛确定来自单个奶牛的广播可以达到的奶牛的最大数量。", "inputFormat": "第一行，一个整数 $N$。\n\n接下来 $N$ 行，第 $i$ 行包括第 $i$ 只牛的坐标 $(x_i,y_i)$，以及这只牛所持有对讲机的能量 $P_i$。", "outputFormat": "一行，一个整数，表示从来自单个奶牛的广播可以达到的奶牛的最大数量。开始的牛也包括在这个数量中。", "hint": "对于 $100\\%$ 的数据，$N\\le200$，$\\forall i \\in [1,N]$，$0\\le x_i,y_i\\le25000$。", "locale": "zh-CN"}}}
{"pid": "P3417", "type": "P", "difficulty": 5, "samples": [["2\n3 123\n3 234", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2005", "POI（波兰）"], "title": "[POI 2005] BANK-Cash Dispenser", "background": "", "description": "The BBB (short for Byteotian Bit Bank) owns the largest net of cash dispensers in Byteotia. The clients of the BBB can draw their money from the cash dispensers on the basis of a cash card and a 4-digit PIN code. Lately, in order to increase their clients' security, the BBB has had a camera installed by each cash dispenser. The cameras transmit the recorded image to the BBB using radio signals. Unfortunately, the signals are being intercepted by a gang of computer thieves. The thieves attempt to discover the 4-digit PIN codes of the BBB clients, whose cash cards they subsequently steal. Being aware of this fact, the BBB clients try to perform redundant movements over the keyboard while entering the PIN. The camera is not able to pick out the keystrokes, it only records the finger movements. Consequently, it is usually not possible to determine the PIN unambiguously. For instance, the client moving his finger over the key 1 and then over the key 5 could have entered the following PIN codes: 1111, 1115, 1155, 1555, 5555. Desperate thieves glean the camera recordings, counting on being able to determine the PIN of a client or at least limiting the number of possible codes on the basis of multiple recordings of his transactions. Having accumulated sequences entered by a particular wealthy client of the BBB, they made you an \"unnegotiable proposition\".\n\nTaskWrite a programme which:\n\nreads from the standard input a description of the recorded sequences of finger movements, which the client has performed whilst entering his PIN,determines the number of distinct PIN codes, which the client can have (i.e. the number of those 4-digit PIN codes, which could have been entered by performing the given finger movement sequences),writes the outcome to the standard output.\n\nBBB（Byteotian Bit Bank的缩写）拥有Byteotia最大的自动提款机网络。 BBB的客户可以根据现金卡和4位数的PIN码从自动柜员机中提取款项。最近，为了提高客户的安全性，BBB已经给每台自动提款机安装了相机。摄像机使用无线电信号将记录的图像发送到BBB。不幸的是，这些信号正被一群电脑盗贼拦截。盗贼试图发现BBB用户的4位PIN码，他们随后窃取了他们的现金卡。意识到这一事实，BBB用户尝试在输入PIN时执行键盘上的冗余动作。相机只能记录手指的动作。因此，通常不可能明确地确定PIN码。例如，用户将手指移动到键1上，然后移动到键5可以输入以下PIN码：1111,1115,1155,1555,5555。绝望的盗贼们收集相机记录，现在盗贼们给你一个手指移动序列，要求你确定用户可以具有的不同PIN码的数量。\n\n写一个程序：\n\n从标准输入读取记录的手指移动序列的描述，用户在输入PIN码时执行的手指移动序列，确定客户端可以具有的不同PIN码的数量（即，这些4位PIN码的数量，这可以通过执行给定的手指移动顺序进入），将结果写入标准输出。\n", "inputFormat": "The first line of the standard input contains a single integer $n$ denoting the number of recorded scenes depicting the action of entering the PIN by the client, $1\\le n\\le 1\\ 000$. In the following $n$ lines there are descriptions of these scenes, a single one per line. The description of each scene consists of two positive integers separated by a single space. The first of those numbers, $t$, denotes the length of the sequence of movements, $1\\le t\\le 10\\ 000$. The other is a $t$-digit number, whose consecutive digits denote consecutive keys, over which the client has moved his finger. The total length of all sequences does not exceed $1\\ 000\\ 000$.\n\n标准输入的第一行包含一个整数n，表示用户输入PIN的动作数，$1\\le n\\le 1\\ 000$。 在以下n行中，对这些动作进行了描述，每行描述一个动作。每个动作的描述由两个由单个空格分开的正整数组成。 这些数中的第一个数字t表示运动序列的长度，$1\\le t\\le 10\\ 000$。另一个是一个t位的正整数，其连续的数字表示连续的键，表示用户移动他的手指到的目标。保证$\\sum t\\le 1\\ 000\\ 000$。\n", "outputFormat": "The first and only line of the output should contain a single positive integer - the number of possible PIN codes of the client.\n\n输出有一行，应包含一个正整数，用户可能的PIN码的数量。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] BANK-Cash Dispenser", "background": "", "description": "The BBB (short for Byteotian Bit Bank) owns the largest network of cash dispensers in Byteotia. The clients of the BBB can withdraw money from cash dispensers using a cash card and a 4-digit PIN code. Recently, to increase client security, the BBB has installed a camera by each cash dispenser. The cameras transmit the recorded image to the BBB using radio signals. Unfortunately, these signals are being intercepted by a gang of computer thieves. The thieves try to discover the 4-digit PIN codes of BBB clients, whose cash cards they subsequently steal. Aware of this, BBB clients try to make redundant movements over the keyboard while entering the PIN. The camera cannot pick out the actual keystrokes; it only records the finger movements. Consequently, it is usually impossible to determine the PIN unambiguously. For instance, a client moving a finger over key 1 and then over key 5 could have entered the following PIN codes: 1111, 1115, 1155, 1555, 5555. Desperate thieves analyze the camera recordings, hoping to determine the client’s PIN or at least limit the number of possible codes based on multiple recordings of his transactions. Having accumulated sequences entered by a particular wealthy client of the BBB, they made you an \"unnegotiable proposition\".\n\nTask: Write a program that:\n- reads from standard input a description of the recorded sequences of finger movements performed while entering the PIN,\n- determines the number of distinct 4-digit PIN codes the client can have (i.e., the number of 4-digit PIN codes that could have been entered while performing each of the given finger movement sequences),\n- writes the result to standard output.", "inputFormat": "The first line contains a single integer $n$ denoting the number of recorded scenes of entering the PIN by the client, $1\\le n\\le 1\\ 000$. Each of the following $n$ lines describes one scene and consists of two positive integers separated by a single space. The first number, $t$, denotes the length of the movement sequence, $1\\le t\\le 10\\ 000$. The second is a $t$-digit number whose consecutive digits denote consecutive keys over which the client moved a finger. The total length of all sequences does not exceed $1\\ 000\\ 000$.", "outputFormat": "Print a single positive integer: the number of possible PIN codes of the client.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2005] BANK-Cash Dispenser", "background": "", "description": "The BBB (short for Byteotian Bit Bank) owns the largest net of cash dispensers in Byteotia. The clients of the BBB can draw their money from the cash dispensers on the basis of a cash card and a 4-digit PIN code. Lately, in order to increase their clients' security, the BBB has had a camera installed by each cash dispenser. The cameras transmit the recorded image to the BBB using radio signals. Unfortunately, the signals are being intercepted by a gang of computer thieves. The thieves attempt to discover the 4-digit PIN codes of the BBB clients, whose cash cards they subsequently steal. Being aware of this fact, the BBB clients try to perform redundant movements over the keyboard while entering the PIN. The camera is not able to pick out the keystrokes, it only records the finger movements. Consequently, it is usually not possible to determine the PIN unambiguously. For instance, the client moving his finger over the key 1 and then over the key 5 could have entered the following PIN codes: 1111, 1115, 1155, 1555, 5555. Desperate thieves glean the camera recordings, counting on being able to determine the PIN of a client or at least limiting the number of possible codes on the basis of multiple recordings of his transactions. Having accumulated sequences entered by a particular wealthy client of the BBB, they made you an \"unnegotiable proposition\".\n\nTaskWrite a programme which:\n\nreads from the standard input a description of the recorded sequences of finger movements, which the client has performed whilst entering his PIN,determines the number of distinct PIN codes, which the client can have (i.e. the number of those 4-digit PIN codes, which could have been entered by performing the given finger movement sequences),writes the outcome to the standard output.\n\nBBB（Byteotian Bit Bank的缩写）拥有Byteotia最大的自动提款机网络。 BBB的客户可以根据现金卡和4位数的PIN码从自动柜员机中提取款项。最近，为了提高客户的安全性，BBB已经给每台自动提款机安装了相机。摄像机使用无线电信号将记录的图像发送到BBB。不幸的是，这些信号正被一群电脑盗贼拦截。盗贼试图发现BBB用户的4位PIN码，他们随后窃取了他们的现金卡。意识到这一事实，BBB用户尝试在输入PIN时执行键盘上的冗余动作。相机只能记录手指的动作。因此，通常不可能明确地确定PIN码。例如，用户将手指移动到键1上，然后移动到键5可以输入以下PIN码：1111,1115,1155,1555,5555。绝望的盗贼们收集相机记录，现在盗贼们给你一个手指移动序列，要求你确定用户可以具有的不同PIN码的数量。\n\n写一个程序：\n\n从标准输入读取记录的手指移动序列的描述，用户在输入PIN码时执行的手指移动序列，确定客户端可以具有的不同PIN码的数量（即，这些4位PIN码的数量，这可以通过执行给定的手指移动顺序进入），将结果写入标准输出。\n", "inputFormat": "The first line of the standard input contains a single integer $n$ denoting the number of recorded scenes depicting the action of entering the PIN by the client, $1\\le n\\le 1\\ 000$. In the following $n$ lines there are descriptions of these scenes, a single one per line. The description of each scene consists of two positive integers separated by a single space. The first of those numbers, $t$, denotes the length of the sequence of movements, $1\\le t\\le 10\\ 000$. The other is a $t$-digit number, whose consecutive digits denote consecutive keys, over which the client has moved his finger. The total length of all sequences does not exceed $1\\ 000\\ 000$.\n\n标准输入的第一行包含一个整数n，表示用户输入PIN的动作数，$1\\le n\\le 1\\ 000$。 在以下n行中，对这些动作进行了描述，每行描述一个动作。每个动作的描述由两个由单个空格分开的正整数组成。 这些数中的第一个数字t表示运动序列的长度，$1\\le t\\le 10\\ 000$。另一个是一个t位的正整数，其连续的数字表示连续的键，表示用户移动他的手指到的目标。保证$\\sum t\\le 1\\ 000\\ 000$。\n", "outputFormat": "The first and only line of the output should contain a single positive integer - the number of possible PIN codes of the client.\n\n输出有一行，应包含一个正整数，用户可能的PIN码的数量。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3418", "type": "P", "difficulty": 6, "samples": [["3\n0 0\n2 0\n2 1\n2\n3\n4 1\n6 5\n4 5\n3\n4 0\n6 0\n5 -1", "TAK\nNIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "并查集", "POI（波兰）", "最短路"], "title": "[POI 2005] PUN-Points", "background": "", "description": "A set of grid points in a plane (points whose both cartesian coordinates are integers) which we shall refer to as the pattern, as well as a group of other sets of grid points on the plane are given. We would like to know which of the sets are similar to the pattern, i.e. which of them can be transformed by rotations, translations, reflections and dilations so that they are identical to the pattern. For instance: the set of points $\\{(0,0),(2,0),(2,1)\\}$ is similar to the set $\\{(6,1),(6,5),(4,5)\\}$, it is however not similar to the set $\\{(4,0),(6,0),(5,-1)\\}$.\n\nTaskWrite a programme which:\n\nreads from the standard input the description of the pattern and the family of the investigated sets of points,determines which of the investigated sets of points are similar to the pattern,writes the outcome to the standard output.\n\n题目描述：\n\n\n给出一个包含平面上格点的集合（格点的定义是xy坐标均为整数），我们将其称作“模式集合”。\n\n\n接下来给出另外的几个包含平面上点的集合。我们想要考察后面给出的哪些集合和“模式集合”是“相似”的，即：该集合可以通过 旋转，平移，翻转，和缩放 使得该集合和“模式集合”完全相同。\n\n\n例：{(0,0),(2,0),(2,1)}这个集合和{(6,1),(6,5),(4,5)}这个集合是相似的，但和{(4,0),(6,0),(5,-1)}这个集合是不相似的。\n\n\n任务：\n\n\n写一个程序，使得\n\n\n能从标准输入读取“模式集合”和需要考察（是否相似）的集合，判断哪些集合和“模式集合”相似，并将结果输出到标准输出\n\n\n输入格式：\n\n\n标准输入的第一行有一个整数 k (1<=k<=25000)，代表“模式集合”中的点数\n\n\n接下来k行，每行两个数，用一个空格分隔，第i+1行的两个数分别代表“模式集合”中第i个点的x坐标和y坐标(-20000<=x,y<=20000)\n\n\n“模式集合”中的点两两不同。\n\n\n接下来一行一个整数n，代表有n个需要考察的集合\n\n\n接下来有n个对需要考察的集合的描述：\n\n\n每个描述的第一行包含一个整数l，代表该集合中的点数(1<=l<=25000)\n\n\n接下来l行每行包含该集合中一个点的x坐标和y坐标，用一个空格分隔(-20000<=x,y<=20000，为整数)\n\n\n包含在同一集合中的点两两不同。\n\n\n输出格式：\n\n\n你的程序应该向标准输出流输出n行，每行代表对于一个需要考察的集合的结果。\n\n\n如果第i个需要考察的集合与“模式集合”相似，则第i行应包含单词TAK，即波兰语中的yes\n\n\n否则第i行应包含单词NIE，即波兰语中的no\n", "inputFormat": "In the first line of the standard input there is a single integer $k$ ($1\\le k\\le 25\\ 000$) - the number of points the pattern consists of. In the following $k$ lines there are pairs of integers, separated by single spaces. The $(i+1)$'st line contains the coordinates of $i$'th point belonging to the pattern: $x_{i}$ and $y_{i}$ ($-20\\ 000\\le x_{i},y_{i} \\le 20\\ 000$). The points forming the pattern are pairwise different. In the next line there is the number of sets to be investigated: $n$ ($1\\le n\\le 20$). Next, there are $n$ descriptions of these sets. The description of each set begins with a line containing a single integer $l$ - the number of points belonging to that particular set($1\\le l\\le 25\\ 000$).These points are described in the following lines, a single point per line. The description of a point consists of two integers separated by a single space - its coordinates $x$ and $y$ ($-20\\ 000\\le x,y\\le 20\\ 000$).The points which belong to the same set are pairwise different.\n", "outputFormat": "Your programme should write to the standard output $n$ lines - one for each of the investigated sets of points. The $i$'th line should contain the word TAK (i.e. yes in Polish), if the $i$'th of the given sets of points is similar to the pattern, or the word NIE (i.e. no in Polish) if the set does not satisfy this condition.\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] PUN-Points", "background": "# Description\n\nA set of grid points in the plane (points whose Cartesian coordinates are both integers), called the pattern, is given, as well as several other sets of grid points. We want to determine which of these sets are similar to the pattern, i.e., which can be transformed by rotations, translations, reflections, and dilations so that they become identical to the pattern.\n\nFor example, the set of points {(0, 0), (2, 0), (2, 1)} is similar to the set {(6, 1), (6, 5), (4, 5)}, but it is not similar to the set {(4, 0), (6, 0), (5, −1)}.\n\nWrite a program that:\n- reads the description of the pattern and the family of candidate sets of points from standard input,\n- determines which of the candidate sets of points are similar to the pattern,\n- writes the results to standard output.", "description": "A set of grid points in the plane (points whose Cartesian coordinates are both integers), called the pattern, is given, as well as several other sets of grid points. We want to determine which of these sets are similar to the pattern, i.e., which can be transformed by rotations, translations, reflections, and dilations so that they become identical to the pattern.\n\nFor example, the set of points {(0, 0), (2, 0), (2, 1)} is similar to the set {(6, 1), (6, 5), (4, 5)}, but it is not similar to the set {(4, 0), (6, 0), (5, −1)}.\n\nWrite a program that:\n- reads the description of the pattern and the family of candidate sets of points from standard input,\n- determines which of the candidate sets of points are similar to the pattern,\n- writes the results to standard output.\n\n# Description", "inputFormat": "In the first line of the standard input there is a single integer $k$ ($1\\le k\\le 25\\ 000$) — the number of points in the pattern. In the following $k$ lines there are pairs of integers, separated by single spaces. The $(i+1)$-st line contains the coordinates of the $i$-th point belonging to the pattern: $x_{i}$ and $y_{i}$ ($-20\\ 000\\le x_{i},y_{i} \\le 20\\ 000$). The points forming the pattern are pairwise different.\n\nIn the next line there is the number of sets to be investigated: $n$ ($1\\le n\\le 20$).\n\nNext, there are $n$ descriptions of these sets. The description of each set begins with a line containing a single integer $l$ — the number of points belonging to that particular set ($1\\le l\\le 25\\ 000$). These points are described in the following lines, one point per line. The description of a point consists of two integers separated by a single space — its coordinates $x$ and $y$ ($-20\\ 000\\le x,y\\le 20\\ 000$). The points within the same set are pairwise different.", "outputFormat": "Your program should write to the standard output $n$ lines — one for each of the investigated sets of points. The $i$-th line should contain the word TAK (i.e., yes in Polish) if the $i$-th set of points is similar to the pattern, or the word NIE (i.e., no in Polish) if it is not.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2005] PUN-Points", "background": "", "description": "A set of grid points in a plane (points whose both cartesian coordinates are integers) which we shall refer to as the pattern, as well as a group of other sets of grid points on the plane are given. We would like to know which of the sets are similar to the pattern, i.e. which of them can be transformed by rotations, translations, reflections and dilations so that they are identical to the pattern. For instance: the set of points $\\{(0,0),(2,0),(2,1)\\}$ is similar to the set $\\{(6,1),(6,5),(4,5)\\}$, it is however not similar to the set $\\{(4,0),(6,0),(5,-1)\\}$.\n\nTaskWrite a programme which:\n\nreads from the standard input the description of the pattern and the family of the investigated sets of points,determines which of the investigated sets of points are similar to the pattern,writes the outcome to the standard output.\n\n题目描述：\n\n\n给出一个包含平面上格点的集合（格点的定义是xy坐标均为整数），我们将其称作“模式集合”。\n\n\n接下来给出另外的几个包含平面上点的集合。我们想要考察后面给出的哪些集合和“模式集合”是“相似”的，即：该集合可以通过 旋转，平移，翻转，和缩放 使得该集合和“模式集合”完全相同。\n\n\n例：{(0,0),(2,0),(2,1)}这个集合和{(6,1),(6,5),(4,5)}这个集合是相似的，但和{(4,0),(6,0),(5,-1)}这个集合是不相似的。\n\n\n任务：\n\n\n写一个程序，使得\n\n\n能从标准输入读取“模式集合”和需要考察（是否相似）的集合，判断哪些集合和“模式集合”相似，并将结果输出到标准输出\n\n\n输入格式：\n\n\n标准输入的第一行有一个整数 k (1<=k<=25000)，代表“模式集合”中的点数\n\n\n接下来k行，每行两个数，用一个空格分隔，第i+1行的两个数分别代表“模式集合”中第i个点的x坐标和y坐标(-20000<=x,y<=20000)\n\n\n“模式集合”中的点两两不同。\n\n\n接下来一行一个整数n，代表有n个需要考察的集合\n\n\n接下来有n个对需要考察的集合的描述：\n\n\n每个描述的第一行包含一个整数l，代表该集合中的点数(1<=l<=25000)\n\n\n接下来l行每行包含该集合中一个点的x坐标和y坐标，用一个空格分隔(-20000<=x,y<=20000，为整数)\n\n\n包含在同一集合中的点两两不同。\n\n\n输出格式：\n\n\n你的程序应该向标准输出流输出n行，每行代表对于一个需要考察的集合的结果。\n\n\n如果第i个需要考察的集合与“模式集合”相似，则第i行应包含单词TAK，即波兰语中的yes\n\n\n否则第i行应包含单词NIE，即波兰语中的no\n", "inputFormat": "In the first line of the standard input there is a single integer $k$ ($1\\le k\\le 25\\ 000$) - the number of points the pattern consists of. In the following $k$ lines there are pairs of integers, separated by single spaces. The $(i+1)$'st line contains the coordinates of $i$'th point belonging to the pattern: $x_{i}$ and $y_{i}$ ($-20\\ 000\\le x_{i},y_{i} \\le 20\\ 000$). The points forming the pattern are pairwise different. In the next line there is the number of sets to be investigated: $n$ ($1\\le n\\le 20$). Next, there are $n$ descriptions of these sets. The description of each set begins with a line containing a single integer $l$ - the number of points belonging to that particular set($1\\le l\\le 25\\ 000$).These points are described in the following lines, a single point per line. The description of a point consists of two integers separated by a single space - its coordinates $x$ and $y$ ($-20\\ 000\\le x,y\\le 20\\ 000$).The points which belong to the same set are pairwise different.\n", "outputFormat": "Your programme should write to the standard output $n$ lines - one for each of the investigated sets of points. The $i$'th line should contain the word TAK (i.e. yes in Polish), if the $i$'th of the given sets of points is similar to the pattern, or the word NIE (i.e. no in Polish) if the set does not satisfy this condition.\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3419", "type": "P", "difficulty": 5, "samples": [["3 2 7\n1\n2\n3\n1\n3\n1\n2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2005", "POI（波兰）", "优先队列", "队列"], "title": "[POI 2005] SAM-Toy Cars", "background": null, "description": "Jasio 是一个只有三岁的小男孩，他喜欢玩玩具车。他有 $n$ 辆玩具车被保存在书架上。\n\n架子上的玩具车 Jasio 拿不到，但地板上的他可以拿到。Jasio 的母亲会帮 Jasio 拿架子上的玩具车到地板上。\n\n地板最多只能放 $k$ 辆玩具车。\n\n当地板已经放了 $k$ 辆玩具车时，Jasio 的母亲都会从地板上先拿走一个玩具车放回书架，再拿来 Jasio 想要的玩具车。\n\n现在 Jasio 一共想依次玩 $p$ 个玩具车，问 Jasio 的母亲最少需要拿几次玩具车。（只算拿下来的，不算拿上去的）", "inputFormat": "第一行三个整数 $n,k$ 和 $p$。\n\n接下来 $p$ 行，每一行有且仅有一个整数 $a_i$，表示 Jasio 想玩的玩具车编号。", "outputFormat": "输出一行一个整数，表示最少 Jasio 的母亲最少需要拿玩具车的次数。", "hint": "对于 $100\\%$ 的数据：$1\\le k\\le n\\le 10^5$，$1\\le p\\le 5\\times 10^5$，$1\\le a_i\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] SAM-Toy Cars", "background": "", "description": "Jasio is a three-year-old boy who loves to play with toy cars. He has $n$ toy cars stored on a shelf.\n\nJasio cannot reach the toy cars on the shelf, but he can reach the ones on the floor. Jasio’s mother helps by moving toy cars from the shelf to the floor.\n\nThe floor can hold at most $k$ toy cars.\n\nWhen there are already $k$ toy cars on the floor, Jasio’s mother will first take one toy car from the floor back to the shelf, and then bring the toy car that Jasio wants.\n\nNow Jasio wants to play with $p$ toy cars in order. Determine the minimum number of times his mother needs to take a toy car down. (Only count taking down from the shelf; do not count putting back.)", "inputFormat": "The first line contains three integers $n$, $k$ and $p$.\n\nThe next $p$ lines each contain exactly one integer $a_i$, indicating the ID of the toy car Jasio wants.", "outputFormat": "Output a single integer, the minimum number of times Jasio’s mother needs to take a toy car down.", "hint": "Constraints: For $100\\%$ of the testdata: $1 \\le k \\le n \\le 10^5$, $1 \\le p \\le 5 \\times 10^5$, $1 \\le a_i \\le n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2005] SAM-Toy Cars", "background": null, "description": "Jasio 是一个只有三岁的小男孩，他喜欢玩玩具车。他有 $n$ 辆玩具车被保存在书架上。\n\n架子上的玩具车 Jasio 拿不到，但地板上的他可以拿到。Jasio 的母亲会帮 Jasio 拿架子上的玩具车到地板上。\n\n地板最多只能放 $k$ 辆玩具车。\n\n当地板已经放了 $k$ 辆玩具车时，Jasio 的母亲都会从地板上先拿走一个玩具车放回书架，再拿来 Jasio 想要的玩具车。\n\n现在 Jasio 一共想依次玩 $p$ 个玩具车，问 Jasio 的母亲最少需要拿几次玩具车。（只算拿下来的，不算拿上去的）", "inputFormat": "第一行三个整数 $n,k$ 和 $p$。\n\n接下来 $p$ 行，每一行有且仅有一个整数 $a_i$，表示 Jasio 想玩的玩具车编号。", "outputFormat": "输出一行一个整数，表示最少 Jasio 的母亲最少需要拿玩具车的次数。", "hint": "对于 $100\\%$ 的数据：$1\\le k\\le n\\le 10^5$，$1\\le p\\le 5\\times 10^5$，$1\\le a_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P3420", "type": "P", "difficulty": 3, "samples": [["4\n2\n1\n2\n4", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2005", "并查集", "POI（波兰）", "连通块"], "title": "[POI 2005] SKA-Piggy Banks", "background": "", "description": "Byteazar the Dragon 拥有 $N$ 个小猪存钱罐。每一个存钱罐能够用相应的钥匙打开或者被砸开。Byteazar 已经将钥匙放入到一些存钱罐中。现在已知每个钥匙所在的存钱罐，Byteazar 想要买一辆小汽车，而且需要打开所有的存钱罐。然而，他想要破坏尽量少的存钱罐，帮助 Byteazar 去决策最少要破坏多少存钱罐。", "inputFormat": "\n第一行包括一个整数 $N$ ($1\\le N\\le 1000000$)，表示 Byteazar the Dragon 拥有的存钱罐的数量。\n\n存钱罐（包括它们对应的钥匙）从 $1$ 到 $N$ 编号。\n\n接下来有 $N$ 行：第 $i+1$ 行包括一个整数 $x$，表示第 $i$ 个存钱罐对应的钥匙放置在了第 $x$ 个存钱罐中。\n", "outputFormat": "仅一行：包括一个整数，表示能打开所有存钱罐的情况下，需要破坏的存钱罐的最少数量。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] SKA-Piggy Banks", "background": "", "description": "Byteazar the Dragon has $N$ piggy banks. Each piggy bank can be opened with its corresponding key or smashed. Byteazar has placed the keys into some piggy banks. Given, for each key, which piggy bank it is in, Byteazar wants to buy a car and needs to open all piggy banks. However, he wants to destroy as few piggy banks as possible. Help Byteazar decide the minimum number of piggy banks that must be smashed.", "inputFormat": "The first line contains an integer $N$ ($1\\le N\\le 1000000$), representing the number of piggy banks owned by Byteazar the Dragon.\n\nThe piggy banks (including their corresponding keys) are numbered from $1$ to $N$.\n\nThen there are $N$ lines: the $(i+1)$-th line contains an integer $x$, indicating that the key for the $i$-th piggy bank is placed in the $x$-th piggy bank.", "outputFormat": "A single line containing an integer, representing the minimum number of piggy banks that must be smashed in order to be able to open all piggy banks.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2005] SKA-Piggy Banks", "background": "", "description": "Byteazar the Dragon 拥有 $N$ 个小猪存钱罐。每一个存钱罐能够用相应的钥匙打开或者被砸开。Byteazar 已经将钥匙放入到一些存钱罐中。现在已知每个钥匙所在的存钱罐，Byteazar 想要买一辆小汽车，而且需要打开所有的存钱罐。然而，他想要破坏尽量少的存钱罐，帮助 Byteazar 去决策最少要破坏多少存钱罐。", "inputFormat": "\n第一行包括一个整数 $N$ ($1\\le N\\le 1000000$)，表示 Byteazar the Dragon 拥有的存钱罐的数量。\n\n存钱罐（包括它们对应的钥匙）从 $1$ 到 $N$ 编号。\n\n接下来有 $N$ 行：第 $i+1$ 行包括一个整数 $x$，表示第 $i$ 个存钱罐对应的钥匙放置在了第 $x$ 个存钱罐中。\n", "outputFormat": "仅一行：包括一个整数，表示能打开所有存钱罐的情况下，需要破坏的存钱罐的最少数量。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3421", "type": "P", "difficulty": 5, "samples": [["3\n24 28\n15 50\n12 21", "3 0\n0 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "2005", "POI（波兰）", "Special Judge", "最大公约数 gcd"], "title": "[POI 2005] SKO-Knights", "background": null, "description": "一个骑士在一个无限的棋盘上移动。它可以执行的每一个动作都由一对整数 $(a,b)$ 来描述——表示这个骑士可以从 $(x,y)$ 移动到 $(x+a,y+b)$ 或者 $(x-a,y-b)$ 。这个骑士有 $n$ 组这样的移动描述，表示了它可以做出的移动。我们保证骑士从 $(0,0)$ 出发移动到的所有位置并非都共线。\n\n如果两个骑士从 $(0,0)$ 出发到达的位置集合全等，我们就说它们是等价的。(请注意，两个骑士可以分别移动不同的步数)。可以证明，对于每一个骑士，都存在另一个仅由两组 $(a,b)$ 描述的骑士与其全等。\n\n你的任务是写一个程序，读入对骑士移动的表示，然后确定两对表示等价的骑士移动的整数，并输出这两对整数。", "inputFormat": "第一行读入一个整数 $n$，表示骑士的移动方式数（$3\\le n\\le 100$）。接下来 $n$ 行为表示骑士移动的整数对，每一行是一对整数 $a_i$ 和 $b_i$，并由一个空格分隔开，$-100\\le a_i,b_i\\le 100,(a_i,b_i)\\neq (0,0)$。", "outputFormat": "第一行输出两个整数 $a$ 和 $b$，并由一个空格分隔。\n\n第二行输出两个整数 $c$ 和 $d$，并由一个空格分隔。\n\n上述整数应满足以下条件：$-10000\\le a,b,c,d\\le 10000$，且输出的两对整数描述的骑士和输入数据中描述的骑士是等价的。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] SKO-Knights", "background": "", "description": "A knight moves on an infinite chessboard. Each move it can perform is described by a pair of integers $(a,b)$, meaning the knight can move from $(x,y)$ to $(x+a,y+b)$ or to $(x-a,y-b)$. Each knight has a set of such move descriptions, representing the moves it can perform. We assume that all positions reachable by a knight starting from $(0,0)$ are not collinear.\n\nWe say two knights are equivalent if they can reach exactly the same set of coordinates from $(0,0)$. (Note that the same knight may reach those squares using different sequences of moves.) It can be shown that for every knight there exists an equivalent knight whose moves can be described by only two pairs of integers.\n\nYour task is to read a set of move descriptions for a knight, determine two pairs of integers that describe an equivalent knight, and output these two pairs.", "inputFormat": "The first line contains an integer $n$ ($3\\le n\\le 100$), the number of move pairs.  \nEach of the next $n$ lines contains a pair of integers $a_i$ and $b_i$ separated by a space, where $-100\\le a_i,b_i\\le 100$ and $(a_i,b_i)\\neq(0,0)$.", "outputFormat": "Output two lines.  \nThe first line contains two integers $a$ and $b$ separated by a space.  \nThe second line contains two integers $c$ and $d$ separated by a space.\n\nThese integers must satisfy $-10000\\le a,b,c,d\\le 10000$, and the two output pairs must describe a knight equivalent to the knight described in the input.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2005] SKO-Knights", "background": null, "description": "一个骑士在一个无限的棋盘上移动。它可以执行的每一个动作都由一对整数 $(a,b)$ 来描述——表示这个骑士可以从 $(x,y)$ 移动到 $(x+a,y+b)$ 或者 $(x-a,y-b)$ 。这个骑士有 $n$ 组这样的移动描述，表示了它可以做出的移动。我们保证骑士从 $(0,0)$ 出发移动到的所有位置并非都共线。\n\n如果两个骑士从 $(0,0)$ 出发到达的位置集合全等，我们就说它们是等价的。(请注意，两个骑士可以分别移动不同的步数)。可以证明，对于每一个骑士，都存在另一个仅由两组 $(a,b)$ 描述的骑士与其全等。\n\n你的任务是写一个程序，读入对骑士移动的表示，然后确定两对表示等价的骑士移动的整数，并输出这两对整数。", "inputFormat": "第一行读入一个整数 $n$，表示骑士的移动方式数（$3\\le n\\le 100$）。接下来 $n$ 行为表示骑士移动的整数对，每一行是一对整数 $a_i$ 和 $b_i$，并由一个空格分隔开，$-100\\le a_i,b_i\\le 100,(a_i,b_i)\\neq (0,0)$。", "outputFormat": "第一行输出两个整数 $a$ 和 $b$，并由一个空格分隔。\n\n第二行输出两个整数 $c$ 和 $d$，并由一个空格分隔。\n\n上述整数应满足以下条件：$-10000\\le a,b,c,d\\le 10000$，且输出的两对整数描述的骑士和输入数据中描述的骑士是等价的。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P3422", "type": "P", "difficulty": 5, "samples": [["5\n3 1\n1 2\n5 2\n0 1\n5 4\n", "TAK\nNIE\nTAK\nNIE\nTAK"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "单调队列", "POI（波兰）", "前缀和"], "title": "[POI 2005] LOT-A Journey to Mars", "background": "Byteazar 决定去火星参加一个空间站旅行。", "description": "火星的所有空间站都位于一个圆上，Byteazar 在其中一个空间站登陆然后开始绕圈旅行。  \n\n旅行需要耗费油料，一升油料只能跑 $1$ 米，每个空间站可以补给的油料都有所不同。 \n\nByteazar 每到一个空间站便可以把该空间站的油料全部拿走（他的油箱是没有容量限制的）。但是如果走到某个时候突然没油了那么旅行便失败了。\n\nByteazar 需要决定要在哪个地方登陆使得他能顺利访问完所有的空间站后回到他当初登陆的地方，他登陆后可以选择两个方向中的任意一个进行旅行。", "inputFormat": "第一行一个整数 $n$，代表空间站数量，所有空间站由 $1$ 至 $n$ 进行标号。\n\n之后 $n$ 行，每行两个整数 $p_i,d_i$，第 $i + 1$ 行描述了第 $i$ 号空间站的信息，其中 $p_i$ 表示该空间站可以补给的油量，$d_i$ 则指明了它到 $i+1$ 号空间站的距离，对于 $n$ 号空间站，$d_i$ 表示它和 $1$ 号空间站的距离。", "outputFormat": "输出 $n$ 行，每行一个字符串 `TAK` 或 `NIE`。\n\n若你认为在 $i$ 号空间站登陆是可行的，则需要在第 $i$ 行输出 `TAK`，否则输出 `NIE`。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，$3\\le n\\le10^6$，$p_i \\ge 0$，$d_i>0$，$\\sum d_i,\\sum p_i\\le2\\times10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] LOT-A Journey to Mars", "background": "Byteazar decided to travel to Mars to join a space station tour.", "description": "All space stations on Mars lie on a circle. Byteazar lands at one of the stations and then starts traveling around the circle.\n\nTravel consumes fuel: $1$ liter of fuel allows traveling $1$ meter. Each station provides a different amount of fuel.\n\nAt each station, Byteazar may take all the fuel available there (his fuel tank has no capacity limit). However, if at any moment he runs out of fuel while moving, the trip fails.\n\nByteazar needs to decide at which station to land so that he can successfully visit all stations and return to his starting station. After landing, he may choose either direction to travel.", "inputFormat": "The first line contains an integer $n$, the number of stations. The stations are numbered from $1$ to $n$.\n\nThen follow $n$ lines. Each of the next $n$ lines contains two integers $p_i, d_i$. The $(i + 1)$-th line describes station $i$, where $p_i$ is the amount of fuel available at station $i$, and $d_i$ is the distance from station $i$ to station $i + 1$. For station $n$, $d_i$ is the distance from station $n$ to station $1$.", "outputFormat": "Output $n$ lines, each containing the string `TAK` or `NIE`.\n\nIf landing at station $i$ is feasible, print `TAK` on line $i$; otherwise, print `NIE`.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $3 \\le n \\le 10^6$, $p_i \\ge 0$, $d_i > 0$, and $\\sum d_i, \\sum p_i \\le 2 \\times 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2005] LOT-A Journey to Mars", "background": "Byteazar 决定去火星参加一个空间站旅行。", "description": "火星的所有空间站都位于一个圆上，Byteazar 在其中一个空间站登陆然后开始绕圈旅行。  \n\n旅行需要耗费油料，一升油料只能跑 $1$ 米，每个空间站可以补给的油料都有所不同。 \n\nByteazar 每到一个空间站便可以把该空间站的油料全部拿走（他的油箱是没有容量限制的）。但是如果走到某个时候突然没油了那么旅行便失败了。\n\nByteazar 需要决定要在哪个地方登陆使得他能顺利访问完所有的空间站后回到他当初登陆的地方，他登陆后可以选择两个方向中的任意一个进行旅行。", "inputFormat": "第一行一个整数 $n$，代表空间站数量，所有空间站由 $1$ 至 $n$ 进行标号。\n\n之后 $n$ 行，每行两个整数 $p_i,d_i$，第 $i + 1$ 行描述了第 $i$ 号空间站的信息，其中 $p_i$ 表示该空间站可以补给的油量，$d_i$ 则指明了它到 $i+1$ 号空间站的距离，对于 $n$ 号空间站，$d_i$ 表示它和 $1$ 号空间站的距离。", "outputFormat": "输出 $n$ 行，每行一个字符串 `TAK` 或 `NIE`。\n\n若你认为在 $i$ 号空间站登陆是可行的，则需要在第 $i$ 行输出 `TAK`，否则输出 `NIE`。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，$3\\le n\\le10^6$，$p_i \\ge 0$，$d_i>0$，$\\sum d_i,\\sum p_i\\le2\\times10^9$。", "locale": "zh-CN"}}}
{"pid": "P3423", "type": "P", "difficulty": 4, "samples": [["3\n2 3 5\n2 2 1\n10", "3\n1 1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["动态规划 DP", "2005", "POI（波兰）", "Special Judge"], "title": "[POI 2005] BAN-Bank Notes", "background": "", "description": "`Byteotian Bit Bank(BBB)` 拥有一套先进的货币系统，这个系统一共有 $n$ 种面值的硬币，面值分别为 $b_1,b_2,\\cdots,b_n$。但是每种硬币有数量限制，现在我们想要凑出面值 $k$，求最少要用多少个硬币。数据保证 $k$ 可以被凑出。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $b_i$，表示这 $n$ 种硬币的面值。\n\n第三行 $n$ 个整数 $c_i$，表示这 $n$ 种硬币的数量。\n\n第四行一个整数 $k$。", "outputFormat": "第一行一个整数，表示最少需要多少个硬币。\n\n第二行 $n$ 个整数，表示第 $i$ 种硬币需要多少个。\n\n如果有多种方案，输出其中一种即可。", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le 200$，$1 \\le b_1 < b_2 < \\cdots < b_n \\le 2 \\times 10^4$，$1 \\le c_i \\le 2 \\times 10^4$，$1 \\le k \\le 2 \\times 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] BAN-Bank Notes", "background": "", "description": "`Byteotian Bit Bank(BBB)` has an advanced currency system. There are $n$ coin denominations with values $b_1, b_2, \\cdots, b_n$. However, each coin has a limited quantity. Now we want to make a total value of $k$. Find the minimum number of coins needed. It is guaranteed that $k$ can be formed.", "inputFormat": "The first line contains an integer $n$.\n\nThe second line contains $n$ integers $b_i$, the denominations of these $n$ types of coins.\n\nThe third line contains $n$ integers $c_i$, the quantity of each of these $n$ types of coins.\n\nThe fourth line contains an integer $k$.", "outputFormat": "The first line contains an integer, the minimum number of coins required.\n\nThe second line contains $n$ integers, where the $i$-th number is how many coins of type $i$ are used.\n\nIf there are multiple solutions, output any one of them.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 200$, $1 \\le b_1 < b_2 < \\cdots < b_n \\le 2 \\times 10^4$, $1 \\le c_i \\le 2 \\times 10^4$, $1 \\le k \\le 2 \\times 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2005] BAN-Bank Notes", "background": "", "description": "`Byteotian Bit Bank(BBB)` 拥有一套先进的货币系统，这个系统一共有 $n$ 种面值的硬币，面值分别为 $b_1,b_2,\\cdots,b_n$。但是每种硬币有数量限制，现在我们想要凑出面值 $k$，求最少要用多少个硬币。数据保证 $k$ 可以被凑出。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $b_i$，表示这 $n$ 种硬币的面值。\n\n第三行 $n$ 个整数 $c_i$，表示这 $n$ 种硬币的数量。\n\n第四行一个整数 $k$。", "outputFormat": "第一行一个整数，表示最少需要多少个硬币。\n\n第二行 $n$ 个整数，表示第 $i$ 种硬币需要多少个。\n\n如果有多种方案，输出其中一种即可。", "hint": "对于 $100\\%$ 的数据，$1 \\le n \\le 200$，$1 \\le b_1 < b_2 < \\cdots < b_n \\le 2 \\times 10^4$，$1 \\le c_i \\le 2 \\times 10^4$，$1 \\le k \\le 2 \\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P3424", "type": "P", "difficulty": 5, "samples": [["4 0 1 0 1\n5 0 1 0 0 1", "6 1 0 1 0 0 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2005", "POI（波兰）", "Fibonacci 数列"], "title": "[POI 2005] SUM-Fibonacci Sums", "background": "", "description": "Fibonacci numbers are an integer sequence defined in the following way: $Fib_0=1$, $Fib_1=1$, $Fib_i=Fib_{i-1}+Fib_{i-2}$ (for $i\\ge 2$). The first few numbers in this sequence are: ($1,1,2,3,5,8,\\cdots$).\n\nThe great computer scientist Byteazar is constructing an unusual computer, in which numbers are represented in Fibonacci system i.e. a bit string $(b_1,b_2,\\cdots,b_n)$ denotes the number $b_1\\cdot Fib_1+b_2\\cdot Fib_2+\\cdots+b_n\\cdot Fib_n$. (Note that we do not use $Fib_0$.) Unfortunately, such a representation is ambiguous i.e. the same number can have different representations. The number $42$, for instance, can be written as: $(0,0,0,0,1,0,0,1)$, $(0,0,0,0,1,1,1,0)$ or $(1,1,0,1,0,1,1)$. For this very reason, Byteazar has limited himself to only using representations satisfying the following conditions:\n\nif $n>1$, then $b_n=1$, i.e. the representation of a number does not contain leading zeros.\n\nif $b_i=1$, then $b_{i+1}=0$ (for $i=1,\\cdots,n-1$), i.e. the representation of a number does not contain two (or more) consecutive ones.\n\nThe construction of the computer has proved more demanding than Byteazar supposed. He has difficulties implementing addition. Help him!\n\nTaskWrite a programme which:\n\nreads from the standard input the representations of two positive integers,calculates and writes to the standard output the representation of their sum.", "inputFormat": "The input contains the Fibonacci representations (satisfying the aforementioned conditions) of two positive integers $x$ and $y$ - one in the first, the other in the second line. Each of these representations is in the form of a sequence of non-negative integers, separated by single spaces. The first number in the line denotes the length of the representation $n$, $1\\le n\\le 1\\ 000\\ 000$. It is followed by $n$ zeros and/or ones.\n", "outputFormat": "In the first and only line of the output your programme should write the Fibonacci representation (satisfying the aforementioned conditions) of the sum $x+y$. The representation should be in the form of a sequence of non-negative integers, separated by single spaces, as it has been described in the Input section. The first number in the line denotes the length of the representation $n$, $1\\le n\\le 1\\ 000\\ 000$. It is followed by $n$ zeros and/or ones.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[POI 2005] SUM-Fibonacci Sums", "background": "", "description": "Fibonacci numbers are an integer sequence defined in the following way: $Fib_0=1$, $Fib_1=1$, $Fib_i=Fib_{i-1}+Fib_{i-2}$ (for $i\\ge 2$). The first few numbers in this sequence are: ($1,1,2,3,5,8,\\cdots$).\n\nThe great computer scientist Byteazar is constructing an unusual computer, in which numbers are represented in Fibonacci system i.e. a bit string $(b_1,b_2,\\cdots,b_n)$ denotes the number $b_1\\cdot Fib_1+b_2\\cdot Fib_2+\\cdots+b_n\\cdot Fib_n$. (Note that we do not use $Fib_0$.) Unfortunately, such a representation is ambiguous i.e. the same number can have different representations. The number $42$, for instance, can be written as: $(0,0,0,0,1,0,0,1)$, $(0,0,0,0,1,1,1,0)$ or $(1,1,0,1,0,1,1)$. For this very reason, Byteazar has limited himself to only using representations satisfying the following conditions:\n\nif $n>1$, then $b_n=1$, i.e. the representation of a number does not contain leading zeros.\n\nif $b_i=1$, then $b_{i+1}=0$ (for $i=1,\\cdots,n-1$), i.e. the representation of a number does not contain two (or more) consecutive ones.\n\nThe construction of the computer has proved more demanding than Byteazar supposed. He has difficulties implementing addition. Help him!\n\nTaskWrite a programme which:\n\nreads from the standard input the representations of two positive integers,calculates and writes to the standard output the representation of their sum.", "inputFormat": "The input contains the Fibonacci representations (satisfying the aforementioned conditions) of two positive integers $x$ and $y$ - one in the first, the other in the second line. Each of these representations is in the form of a sequence of non-negative integers, separated by single spaces. The first number in the line denotes the length of the representation $n$, $1\\le n\\le 1\\ 000\\ 000$. It is followed by $n$ zeros and/or ones.\n", "outputFormat": "In the first and only line of the output your programme should write the Fibonacci representation (satisfying the aforementioned conditions) of the sum $x+y$. The representation should be in the form of a sequence of non-negative integers, separated by single spaces, as it has been described in the Input section. The first number in the line denotes the length of the representation $n$, $1\\le n\\le 1\\ 000\\ 000$. It is followed by $n$ zeros and/or ones.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[POI 2005] SUM-Fibonacci Sums", "background": null, "description": "斐波那契数是一个这样定义的整数：$F(0)=1$，$F(1)=1$，$F(i)=F(i-1)+F(i-2)$  $(i>=2)$，前几个数是这样的 $1, 1, 2, 3, 5, 8, \\ldots$ \n\n伟大的计算机学家 $\\texttt{Byteazar}$ 正在做一个非凡的计算机，其中的数由斐波那契表示！\n\n如一个数列 $b_1, b_2, \\ldots , b_n$ 表示数字 $F(1) \\times b_1+b_2 \\times F(2)+ \\ldots +b_n \\times F(n)$（不使用 $F(0)$ ）。\n\n不幸的是，这样的表示并不明确，即相同的数字可以有不同的表示。比如 $42$ 可以表示为 $(0,0,0,0,1,0,0,1)$，$(0,0,0,0,1,1,1,0)$ 或 $(1,1,0,1,0,1,1)$，于是  $\\texttt{Byteazar}$ 加了一个限制：\n\n- 如果 $n>1$，那么$b_n=1$，即数字的表示不包含前导零。\n- 如果 $b_i=1$，那么 $b_{i+1}=0$，即数字的表示不包含两个（或多个）连续的数字。\n\n这个计算机的建设比  $\\texttt{Byteazar}$ 所认为的要难，现在请你来帮帮他~。\n\n你需要写一个程序：\n\n读取两个正整数的表示，计算并向标准输出写入其和的表示。", "inputFormat": "输入的第一行先是一个正整数 $n$，为 $x$ 的斐波那契表示的长度，接下来的序列是 $x$ 的斐波那契表示。\n\n第二行的第一个数字是一个正整数 $m$，为 $y$ 的斐波那契表示的长度，接下来的序列是 $y$ 的斐波那契表示。", "outputFormat": "输出只有一行程序，应写入 $x+y$ 的和的斐波纳契表示（满足上述条件），同样是先输出一个正整数 $n$ ，表示 $x+y$ 的和的斐波纳契表示的长度，然后再输出 $x+y$ 的和的斐波那契表示。\n\n$1\\leq n,m \\leq 10^6$。\n\n感谢@codesonic 提供的翻译", "hint": null, "locale": "zh-CN"}}}
{"pid": "P3425", "type": "P", "difficulty": 6, "samples": [["4 4\n1 2\n1 3\n1 4\n1 2", "1\n0\n0\n0\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "二分", "POI（波兰）", "网络流", "Special Judge"], "title": "[POI 2005] KOS-Dicing", "background": null, "description": "掷骰子是一种双人游戏，它的结果是完全随机的。最近它在整个 Byteotia 变得非常流行。在 Byteotia 的首都甚至有一个特别的掷骰子业余爱好者俱乐部。俱乐部的老主顾们花时间互相聊天并每隔一阵子就和一个随机选择的对手玩这他们最喜欢的游戏。一天中赢得最多游戏的人会得到“幸运者”头衔。有时晚上俱乐部很安静，只有很少的比赛。这是哪怕赢一场也能获得“幸运者”头衔的时间。\n\n很久很久以前有一个很不走运的人，叫 Byteasar，赢得了这个光荣的头衔。他被深深地震惊了以至于完全忘了他已经赢了多少场。现在他想知道他有多幸运，以及幸运之神是否最终会向他微笑——也许他的运气会变好？他确切地知道在那个幸运的晚上有多少场游戏以及是谁玩的。然而，他不知道结果。Byteasar 希望查明至少要赢几场才能获得“幸运者”头衔。做个好人，帮他满足他的好奇心吧！\n\n- - -\n\n写一个程序：\n\n对于每场游戏读入这场游戏的一对玩家。\n\n找到最小的数 $k$，使得存在一个游戏结果的集合，其中赢最多的玩家赢了 $k$ 场。\n\n输出数 $k$ 和找到的集合中游戏的结果。\n\n玩家从 $1$ 到 $n$ 编号。", "inputFormat": "第一行有两个整数 $n,m$（$1\\le n,m\\le 10^4$）。$n$ 表示玩家数，$m$ 表示游戏数。由一个空格分开。\n\n接下来的 $m$ 行，第 $i$ 行表示第 $i$ 场游戏的玩家编号 $(a_i,b_i)$，由一个空格分开。\n\n一对玩家可能会在这个序列中多次出现。", "outputFormat": "第一行应该包含一个确定的数 $k$。\n\n对于在输入的第 $i$ 行指定的一对玩家 $(a_i,b_i)$，如果在找到的结果集合中 $a_i$ 胜过 $b_i$，则在输出的第 $i$ 行输出 `1`, 否则输出 `0`。", "hint": "$1\\le n,m\\le 10^4$。\n\n样例：\n\n![](https://szkopul.edu.pl/problemset/problem/8OrJo8TOlY9pynt7Tr9jMzzW/site/images/OI12/koszad-img2.gif)", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] KOS-Dicing", "background": null, "description": "Dicing is a two-player game and its outcome is fully random. Lately its popularity increases all over Byteotia. There is even a special club for dicing amateurs in the capital city of Byteotia. The club patrons take their time talking to each other and playing their favourite game with a randomly chosen opponent every once in a while. Everyone who wins the most games one day gains the title of the lucky chap. Sometimes it happens that the night at the club is a quiet one and only few games are played. It is a time when even one win can make you a lucky chap.\n\nOnce upon a time a most unlucky fellow, Byteasar, won the glorious title. He was so deeply shocked that he completely forgot how many games he had won. Now he is wondering how good his luck was and whether fortune finally smiled upon him - perhaps his luck changed for good? He knows exactly how many games and between whom were played that lucky night. However, he does not know the results. Byteasar desires to find out what is the smallest number of wins that could provide the title of the lucky chap. Be a good fellow and help him satisfy his curiosity!\n\n- - -\n\nWrite a programme that:\n\nFor each game played reads from the standard input the pair of players who competed in it.\n\nFinds the smallest number $k$, such that a set of games' outcomes exists in which each player wins $k$ games at the most,writes the number $k$ and the results of games in the found set to the standard output.", "inputFormat": "In the first line of the standard input there is a pair of integers $n$ and $m$ separated by a single space, $1\\le n\\le 10000$, $0\\le m\\le 10000$; $n$ denotes the number of players, while $m$ is the number of games. The players are numbered from $1$ to $n$. In the following $m$ lines there are pairs of players' numbers depicting the sequence of games, separated by single spaces. One pair may occur many times in the sequence.", "outputFormat": "The first line of the standard output should contain the determined number $k$. For each pair of players' numbers $a$, $b$ specified in the $i$'th line of the input, in the $i$'th line of the output the number $1$ should be written if the player no. $a$ wins against player no. $b$ in the found set of outcomes, or $0$ otherwise.", "hint": "![](https://szkopul.edu.pl/problemset/problem/8OrJo8TOlY9pynt7Tr9jMzzW/site/images/OI12/koszad-img2.gif)", "locale": "en"}, "zh-CN": {"title": "[POI 2005] KOS-Dicing", "background": null, "description": "掷骰子是一种双人游戏，它的结果是完全随机的。最近它在整个 Byteotia 变得非常流行。在 Byteotia 的首都甚至有一个特别的掷骰子业余爱好者俱乐部。俱乐部的老主顾们花时间互相聊天并每隔一阵子就和一个随机选择的对手玩这他们最喜欢的游戏。一天中赢得最多游戏的人会得到“幸运者”头衔。有时晚上俱乐部很安静，只有很少的比赛。这是哪怕赢一场也能获得“幸运者”头衔的时间。\n\n很久很久以前有一个很不走运的人，叫 Byteasar，赢得了这个光荣的头衔。他被深深地震惊了以至于完全忘了他已经赢了多少场。现在他想知道他有多幸运，以及幸运之神是否最终会向他微笑——也许他的运气会变好？他确切地知道在那个幸运的晚上有多少场游戏以及是谁玩的。然而，他不知道结果。Byteasar 希望查明至少要赢几场才能获得“幸运者”头衔。做个好人，帮他满足他的好奇心吧！\n\n- - -\n\n写一个程序：\n\n对于每场游戏读入这场游戏的一对玩家。\n\n找到最小的数 $k$，使得存在一个游戏结果的集合，其中赢最多的玩家赢了 $k$ 场。\n\n输出数 $k$ 和找到的集合中游戏的结果。\n\n玩家从 $1$ 到 $n$ 编号。", "inputFormat": "第一行有两个整数 $n,m$（$1\\le n,m\\le 10^4$）。$n$ 表示玩家数，$m$ 表示游戏数。由一个空格分开。\n\n接下来的 $m$ 行，第 $i$ 行表示第 $i$ 场游戏的玩家编号 $(a_i,b_i)$，由一个空格分开。\n\n一对玩家可能会在这个序列中多次出现。", "outputFormat": "第一行应该包含一个确定的数 $k$。\n\n对于在输入的第 $i$ 行指定的一对玩家 $(a_i,b_i)$，如果在找到的结果集合中 $a_i$ 胜过 $b_i$，则在输出的第 $i$ 行输出 `1`, 否则输出 `0`。", "hint": "$1\\le n,m\\le 10^4$。\n\n样例：\n\n![](https://szkopul.edu.pl/problemset/problem/8OrJo8TOlY9pynt7Tr9jMzzW/site/images/OI12/koszad-img2.gif)", "locale": "zh-CN"}}}
{"pid": "P3426", "type": "P", "difficulty": 6, "samples": [["ababbababbabababbabababbababbaba", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP", "树形数据结构", "2005", "POI（波兰）", "KMP 算法"], "title": "[POI 2005] SZA-Template", "background": "", "description": "你打算在纸上印一串字母。\n\n为了完成这项工作，你决定刻一个印章。印章每使用一次，就会将印章上的**所有**字母印到纸上。\n\n同一个位置的相同字符可以印多次。例如：用 `aba` 这个印章可以完成印制 `ababa` 的工作（中间的 `a` 被印了两次）。但是，因为印上去的东西不能被抹掉，在同一位置上印不同字符是不允许的。例如：用 `aba` 这个印章不可以完成印制 `abcba` 的工作。\n\n因为刻印章是一个不太容易的工作，你希望印章的字符串长度尽可能小。", "inputFormat": "输入一个长度不超过 $5 \\times 10^5$ 的非空字符串（只包含小写字母），代表要在纸上印的字符。", "outputFormat": "输出一个整数，代表印章上字符串长度的最小值。", "hint": "印章为 `ababbaba`。\n\n印制过程如下：\n\n```plain\nababbababbabababbabababbababbaba\nababbaba\n     ababbaba\n            ababbaba\n                   ababbaba\n                        ababbaba\n```", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] SZA-Template", "background": "", "description": "You plan to print a sequence of letters on paper.\n\nTo accomplish this, you decide to carve a stamp. Each use of the stamp prints **all** the letters on the stamp onto the paper.\n\nThe same character at the same position may be printed multiple times. For example: using the stamp `aba` can produce `ababa` (the middle `a` is printed twice). However, since what has been printed cannot be erased, printing different characters at the same position is not allowed. For example: using the stamp `aba` cannot produce `abcba`.\n\nBecause carving a stamp is not easy, you want the length of the stamp string to be as small as possible.", "inputFormat": "A non-empty string of length at most $5 \\times 10^5$ (containing only lowercase letters), representing the string you want to print on the paper.", "outputFormat": "Output a single integer, the minimal possible length of the stamp string.", "hint": "A stamp is `ababbaba`.\n\nThe printing process is as follows:\n```plain\nababbababbabababbabababbababbaba\nababbaba\n     ababbaba\n            ababbaba\n                   ababbaba\n                        ababbaba\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2005] SZA-Template", "background": "", "description": "你打算在纸上印一串字母。\n\n为了完成这项工作，你决定刻一个印章。印章每使用一次，就会将印章上的**所有**字母印到纸上。\n\n同一个位置的相同字符可以印多次。例如：用 `aba` 这个印章可以完成印制 `ababa` 的工作（中间的 `a` 被印了两次）。但是，因为印上去的东西不能被抹掉，在同一位置上印不同字符是不允许的。例如：用 `aba` 这个印章不可以完成印制 `abcba` 的工作。\n\n因为刻印章是一个不太容易的工作，你希望印章的字符串长度尽可能小。", "inputFormat": "输入一个长度不超过 $5 \\times 10^5$ 的非空字符串（只包含小写字母），代表要在纸上印的字符。", "outputFormat": "输出一个整数，代表印章上字符串长度的最小值。", "hint": "印章为 `ababbaba`。\n\n印制过程如下：\n\n```plain\nababbababbabababbabababbababbaba\nababbaba\n     ababbaba\n            ababbaba\n                   ababbaba\n                        ababbaba\n```", "locale": "zh-CN"}}}
{"pid": "P3427", "type": "P", "difficulty": 6, "samples": [["3 2 10\n1 2\n1 3", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2005", "POI（波兰）"], "title": "[POI 2005] DZI-Hollows", "background": "", "description": "在 Byteotia 有两棵非常高的树，而每一棵的树干上都被挖出了许多洞，高度各不相同。现在 $n$ 只可以飞得非常快的鸟决定住在这些洞里，它们中的一些互相认识因此它们想要访问认识的的鸟。鸟们飞得非常快，而且通常沿着一条直线走。为了避免在飞行中撞到别的鸟，它们决定找到某种居住的方式可以满足下面的条件：\n\n- 任何的鸟都可以访问它认识的鸟，而使访问的路线不与其他鸟访问的路线相交（但是可以有同一个终点）.\n\n此外，还要使每只鸟居住的高度尽量低，保证树洞比鸟多。\n\n我们都知道鸟的大脑很小，所以它们请你帮它们算一共有多少个方法可以满足以上条件，将答案模 $k$ 输出。", "inputFormat": "在标准输入流的第一行有三个整数 $n，m$ 和 $k$，分别表示鸟的数量，鸟的关系数取模数（$2\\le n\\le 1000000,1\\le m\\le 10000000,2\\le k\\le 2000000$）。鸟的编号是 $1$ 到 $n$。\n\n接下来 $m$ 行是鸟的认识关系，第 $i+1$ 行是两个数字 $a_i$和 $b_i$，用一个空格隔开。$1\\le a,b\\le n,a_i\\ne b_i$。每一对认识的鸟只给出一次。\n", "outputFormat": "设 $r$ 表示满足给定约束的鸟类的不同方案数。您的程序应该在标准输出的第一行中输出一个整数 $r\\bmod k$。如果没有方案，则正确的结果为 $0$。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] DZI-Hollows", "background": "# Description\n\nThere are two very tall trees in Byteotia, and many hollows have been carved into their trunks at different heights. Now $n$ very fast birds have decided to live in these hollows. Some birds know each other, so they want to visit the birds they know. The birds fly very fast, and they usually fly in straight lines. To avoid colliding in flight, they decide to choose a way to live that satisfies the following condition:\n- Every bird can visit each bird it knows, and the visiting routes do not intersect with the visiting routes of other birds (they may share endpoints).\n\nIn addition, we want each bird to live as low as possible in height, and it is guaranteed that there are more hollows than birds.\n\nWe all know that birds have small brains, so they ask you to count how many ways satisfy the above conditions and output the answer modulo $k$.", "description": "", "inputFormat": "", "outputFormat": "Let $r$ be the number of different arrangements of the birds that satisfy the given constraints. Your program should print a single integer $r \\bmod k$ on the first line of the standard output. If there is no valid arrangement, the correct output is $0$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2005] DZI-Hollows", "background": "", "description": "在 Byteotia 有两棵非常高的树，而每一棵的树干上都被挖出了许多洞，高度各不相同。现在 $n$ 只可以飞得非常快的鸟决定住在这些洞里，它们中的一些互相认识因此它们想要访问认识的的鸟。鸟们飞得非常快，而且通常沿着一条直线走。为了避免在飞行中撞到别的鸟，它们决定找到某种居住的方式可以满足下面的条件：\n\n- 任何的鸟都可以访问它认识的鸟，而使访问的路线不与其他鸟访问的路线相交（但是可以有同一个终点）.\n\n此外，还要使每只鸟居住的高度尽量低，保证树洞比鸟多。\n\n我们都知道鸟的大脑很小，所以它们请你帮它们算一共有多少个方法可以满足以上条件，将答案模 $k$ 输出。", "inputFormat": "在标准输入流的第一行有三个整数 $n，m$ 和 $k$，分别表示鸟的数量，鸟的关系数取模数（$2\\le n\\le 1000000,1\\le m\\le 10000000,2\\le k\\le 2000000$）。鸟的编号是 $1$ 到 $n$。\n\n接下来 $m$ 行是鸟的认识关系，第 $i+1$ 行是两个数字 $a_i$和 $b_i$，用一个空格隔开。$1\\le a,b\\le n,a_i\\ne b_i$。每一对认识的鸟只给出一次。\n", "outputFormat": "设 $r$ 表示满足给定约束的鸟类的不同方案数。您的程序应该在标准输出的第一行中输出一个整数 $r\\bmod k$。如果没有方案，则正确的结果为 $0$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P3428", "type": "P", "difficulty": 6, "samples": [["5\n2 2 4\n7 2 3\n4 3 1\n5 7 1\n8 7 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["计算几何", "2005", "POI（波兰）"], "title": "[POI 2005] AKC-Special Forces Manoeuvres", "background": "", "description": "一个秘密组织正在沙漠中举行一次军事演习。本次演习的目标是拆除隐藏在沙漠中的一个炸弹。\n\n演习的第一部分是空降作战。每个士兵**按照一定的顺序**从悬停在沙漠上空的直升机上跳下。着陆时，每个士兵都会停在他所在的着陆点。\n\n每个空降兵都有一个生存半径。如果炸弹与他的距离小于或等于这个生存半径的话，空降兵便会牺牲自己引爆炸弹。指挥官希望能派出尽可能少的士兵，但他希望在**最坏情况下**至少有一个士兵能够生还。\n\n整个沙漠可以抽象为一个平面，每个士兵的着陆点可以用一个坐标 $(x,y)$ 表示，他的生存半径我们设为 $r$。所有士兵的信息按照他们跳伞时的顺序给出，即第 $i$ 个士兵跳伞时，前 $i-1$ 个士兵都已经着陆。\n\n你的任务是：从标准输入读入所有士兵的信息，输出最少需要派出的士兵数量。", "inputFormat": "第一行一个整数 $n\\,(2\\le n \\le 2000)$。\n\n接下来 $n$ 行，第 $i$ 行包含三个整数 $x_i,y_i,r_i\\,(-1000\\le x_i,y_i\\le 1000,1\\le r\\le 5000)$，代表第 $i$ 个士兵的着陆坐标为 $(x_i,y_i)$，生存半径为 $r_i$。", "outputFormat": "如果无法让至少一个士兵生还的话，输出 `NIE`。\n\n否则输出一个整数，代表至少需要派出的士兵数量。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/8xbga77o.png)\n\n最坏情况下炸弹位于 $(5,3)$，前三个士兵都会被炸死，第四个士兵会生还。", "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] AKC-Special Forces Manoeuvres", "background": "", "description": "A secret organization is conducting a military exercise in the desert. The goal is to defuse a bomb hidden in the desert.\n\nThe first phase is an airdrop operation. Each paratrooper jumps from a helicopter hovering over the desert in a fixed order. Upon landing, each paratrooper stays at his landing point.\n\nEach paratrooper has a survival radius. If the bomb is at a distance less than or equal to this survival radius, the paratrooper will sacrifice himself to trigger the bomb. The commander wants to send as few paratroopers as possible, but he also wants at least one paratrooper to survive in the worst case.\n\nThe entire desert can be modeled as a plane. Each paratrooper’s landing point is a coordinate $(x, y)$, and we denote his survival radius by $r$. All paratroopers’ information is given in the order they jump: when the $i$-th paratrooper jumps, the first $i-1$ paratroopers have already landed.\n\nYour task is to read all paratroopers’ information from standard input and output the minimum number of paratroopers that must be sent.", "inputFormat": "The first line contains an integer $n$ ($2 \\le n \\le 2000$).\n\nThe next $n$ lines: the $i$-th line contains three integers $x_i, y_i, r_i$ ($-1000 \\le x_i, y_i \\le 1000$, $1 \\le r_i \\le 5000$), indicating that the $i$-th paratrooper lands at $(x_i, y_i)$ with survival radius $r_i$.", "outputFormat": "If it is impossible to have at least one paratrooper survive, output `NIE`.\n\nOtherwise, output a single integer: the minimum number of paratroopers that must be sent.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/8xbga77o.png)\n\nIn the worst case, the bomb is at $(5, 3)$. The first three paratroopers die, and the fourth survives.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2005] AKC-Special Forces Manoeuvres", "background": "", "description": "一个秘密组织正在沙漠中举行一次军事演习。本次演习的目标是拆除隐藏在沙漠中的一个炸弹。\n\n演习的第一部分是空降作战。每个士兵**按照一定的顺序**从悬停在沙漠上空的直升机上跳下。着陆时，每个士兵都会停在他所在的着陆点。\n\n每个空降兵都有一个生存半径。如果炸弹与他的距离小于或等于这个生存半径的话，空降兵便会牺牲自己引爆炸弹。指挥官希望能派出尽可能少的士兵，但他希望在**最坏情况下**至少有一个士兵能够生还。\n\n整个沙漠可以抽象为一个平面，每个士兵的着陆点可以用一个坐标 $(x,y)$ 表示，他的生存半径我们设为 $r$。所有士兵的信息按照他们跳伞时的顺序给出，即第 $i$ 个士兵跳伞时，前 $i-1$ 个士兵都已经着陆。\n\n你的任务是：从标准输入读入所有士兵的信息，输出最少需要派出的士兵数量。", "inputFormat": "第一行一个整数 $n\\,(2\\le n \\le 2000)$。\n\n接下来 $n$ 行，第 $i$ 行包含三个整数 $x_i,y_i,r_i\\,(-1000\\le x_i,y_i\\le 1000,1\\le r\\le 5000)$，代表第 $i$ 个士兵的着陆坐标为 $(x_i,y_i)$，生存半径为 $r_i$。", "outputFormat": "如果无法让至少一个士兵生还的话，输出 `NIE`。\n\n否则输出一个整数，代表至少需要派出的士兵数量。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/8xbga77o.png)\n\n最坏情况下炸弹位于 $(5,3)$，前三个士兵都会被炸死，第四个士兵会生还。", "locale": "zh-CN"}}}
{"pid": "P3429", "type": "P", "difficulty": 6, "samples": [["5\n3 2 3 4\n2 1 3\n4 2 1 4 5\n2 1 3\n1 3", "3\n1 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "POI（波兰）", "Special Judge", "高斯消元"], "title": "[POI 2005] DWA-Two Parties", "background": null, "description": "拜占庭国王要举办两个大派对，并且希望邀请更多的居民。\n\n国王从他的丰富经验里知道，如果一个居民在派对上能遇到偶数个的朋友，那他会非常高兴。因此，他要求你邀请国家的居民去两个派对，而使尽可能多的人在他们的聚会上有偶数个的朋友。\n\n认识是一种对称关系，如 $A$ 认识 $B$，那么 $B$ 也认识 $A$。", "inputFormat": "共 $N+1$ 行。\n\n第一行读入一个整数 $N$（$1\\le N\\le 200$），表示居民的数量。\n\n接下来 $N$ 行，第 $i+1$ 行是一个整数 $l_i$，表示第 $i$ 个居民的朋友数量，接着是 $l_i$ 个数，为第 $i$ 个居民的朋友编号。我们假设没有人是自己的朋友。如果 $B$ 出现在了 $A$ 的朋友列表中，那么 $A$ 也会出现在$B$ 的列表中。", "outputFormat": "第一行是一个整数 $M$，是前往第一个派对的人数。第二行 $M$ 个整数，是去第一个派对的居民编号，其余的居民前往第二个派对。\n\n如果有多种答案，你只需要输出一个。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[POI 2005] DWA-Two Parties", "background": "", "description": "The Byzantine king is going to host two large parties and hopes to invite more residents.\n\nFrom his rich experience, the king knows that if a resident meets an even number of friends at the party, they will be very happy. Therefore, he asks you to assign the country's residents to two parties so that as many people as possible have an even number of friends at the party they attend.\n\nAcquaintance is a symmetric relation: if $A$ knows $B$, then $B$ also knows $A$.", "inputFormat": "There are $N+1$ lines in total.\n\nThe first line contains an integer $N$ ($1 \\le N \\le 200$), the number of residents.\n\nIn the next $N$ lines, the $(i+1)$-th line contains an integer $l_i$, the number of friends of the $i$-th resident, followed by $l_i$ integers, which are the indices of the $i$-th resident’s friends. We assume no one is their own friend. If $B$ appears in $A$’s friend list, then $A$ also appears in $B$’s list.", "outputFormat": "The first line contains an integer $M$, the number of people attending the first party. The second line contains $M$ integers, which are the indices of the residents going to the first party; the remaining residents go to the second party.\n\nIf there are multiple valid answers, output any one of them.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[POI 2005] DWA-Two Parties", "background": null, "description": "拜占庭国王要举办两个大派对，并且希望邀请更多的居民。\n\n国王从他的丰富经验里知道，如果一个居民在派对上能遇到偶数个的朋友，那他会非常高兴。因此，他要求你邀请国家的居民去两个派对，而使尽可能多的人在他们的聚会上有偶数个的朋友。\n\n认识是一种对称关系，如 $A$ 认识 $B$，那么 $B$ 也认识 $A$。", "inputFormat": "共 $N+1$ 行。\n\n第一行读入一个整数 $N$（$1\\le N\\le 200$），表示居民的数量。\n\n接下来 $N$ 行，第 $i+1$ 行是一个整数 $l_i$，表示第 $i$ 个居民的朋友数量，接着是 $l_i$ 个数，为第 $i$ 个居民的朋友编号。我们假设没有人是自己的朋友。如果 $B$ 出现在了 $A$ 的朋友列表中，那么 $A$ 也会出现在$B$ 的列表中。", "outputFormat": "第一行是一个整数 $M$，是前往第一个派对的人数。第二行 $M$ 个整数，是去第一个派对的居民编号，其余的居民前往第二个派对。\n\n如果有多种答案，你只需要输出一个。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P3430", "type": "P", "difficulty": 5, "samples": [["9\n2 5 5 2 7 4 7 3 9\n1 6 8 4 6 3 9 1 8", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2005", "POI（波兰）"], "title": "[POI 2005] DWU-Double-row", "background": "", "description": "$2n$ soldiers are standing in a double-row. They have to be rearranged, so that there are no equally tall soldiers in each row - then we shall say, that the soldiers are set up properly.\n\nA single operation consists in swapping two soldiers who occupy the same position (but in different rows). Your task is to determine the minimum number of swaps necessary to set the soldiers up properly.\n\nExample:\n\nThere is a double-row of $18$ soldiers in the figure. Arrows indicate the swaps that rearrange the soldiers in a proper way.\n\nTaskWrite a programme that:\n\nreads from the standard input the number and heights of soldiers, as they stand initially,determines the minimum number of swaps (of soldiers standing on the same position in different rows) necessary to set up soldiers properly,writes the result to the standard output.\n\n\n**一句话题意By Scarlet：$2n$个数站成两排（每个数在$2n$个数中最多出现两遍），一次操作可以交换任意一列中两个数，求使每行数不重复的最少操作数。**\n", "inputFormat": "In the first line of the input there is one integer $n$, $1\\le n\\le 50\\ 000$. In each of the two rows there are $n$ soldiers standing. In each of the following two lines there are $n$ positive integers separated by single spaces. In the second line there are numbers $x_1,x_2,\\cdots,x_n$, $1\\le x_i\\le 100\\ 000$; $x_i$ denotes the height of the $i$'th soldier in the first line. In the third line there are numbers $y_1,y_2,\\cdots,y_n$, $1\\le y_i\\le 100\\ 000$; $y_i$ denotes the height of the $i$'th soldier in the second line.\n\nIt is guaranteed that in the instances from the test data it is possible to set up soldiers properly.\n", "outputFormat": "In the first and only line of the standard output one integer should be written - the minimum number of swaps necessary to set up soldiers properly.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[POI 2005] DWU-Double-row", "background": "", "description": "$2n$ soldiers are standing in a double-row. They have to be rearranged, so that there are no equally tall soldiers in each row - then we shall say, that the soldiers are set up properly.\n\nA single operation consists in swapping two soldiers who occupy the same position (but in different rows). Your task is to determine the minimum number of swaps necessary to set the soldiers up properly.\n\nExample:\n\nThere is a double-row of $18$ soldiers in the figure. Arrows indicate the swaps that rearrange the soldiers in a proper way.\n\nTaskWrite a programme that:\n\nreads from the standard input the number and heights of soldiers, as they stand initially,determines the minimum number of swaps (of soldiers standing on the same position in different rows) necessary to set up soldiers properly,writes the result to the standard output.\n\n\n**一句话题意By Scarlet：$2n$个数站成两排（每个数在$2n$个数中最多出现两遍），一次操作可以交换任意一列中两个数，求使每行数不重复的最少操作数。**\n", "inputFormat": "In the first line of the input there is one integer $n$, $1\\le n\\le 50\\ 000$. In each of the two rows there are $n$ soldiers standing. In each of the following two lines there are $n$ positive integers separated by single spaces. In the second line there are numbers $x_1,x_2,\\cdots,x_n$, $1\\le x_i\\le 100\\ 000$; $x_i$ denotes the height of the $i$'th soldier in the first line. In the third line there are numbers $y_1,y_2,\\cdots,y_n$, $1\\le y_i\\le 100\\ 000$; $y_i$ denotes the height of the $i$'th soldier in the second line.\n\nIt is guaranteed that in the instances from the test data it is possible to set up soldiers properly.\n", "outputFormat": "In the first and only line of the standard output one integer should be written - the minimum number of swaps necessary to set up soldiers properly.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[POI 2005] DWU-Double-row", "background": null, "description": "有 $2n$ 个士兵站成两排，他们需要被重新排列，以保证每一排里没有同样高的士兵——这样我们就说，士兵们被合理地安排了位置。 每次操作可以交换两个在同一位置（但不在同一排）的士兵。你的任务是用最少的操作来确保士兵们被合理地安排了位置。 \n\n例如：有 $18$ 个士兵站成两排，箭头标明了重新安排士兵位置的正确方式。\n![](https://cdn.luogu.org/upload/pic/14829.png)\n\n写一个这样的程序： 读入 $n$ 与士兵的身高，以及他们最初所站的位置，确保以最小的交换（站在同一位置的不同排的士兵）的次数来合理地安排士兵的位置，输出操作数。", "inputFormat": "第一行，一个整数 $n$（$1 \\le n \\le 5 \\times {10}^4$）。\n\n第二行有 $n$ 个正整数 $x_1,x_2,\\ldots,x_n$（$1 \\le x_i \\le {10}^5$），表示第一行中士兵的身高。 \n\n第三行有 $n$ 个正整数 $y_1,y_2,\\ldots,y_n$（$1 \\le y_i \\le {10}^5$），表示第二行中士兵的身高。\n\n数据保证你能够合理地安排士兵的位置（即每个数在 $2n$ 个数中最多出现两次）。", "outputFormat": "输出一行一个正整数，表示最少需要操作的次数。\n\n翻译贡献者UID：57699", "hint": null, "locale": "zh-CN"}}}
