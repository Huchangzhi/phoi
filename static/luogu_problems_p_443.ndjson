{"pid": "P9980", "type": "P", "difficulty": 4, "samples": [["3\n11\n1", "2"], ["5\n1111\n101\n01\n1", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2023", "O2优化"], "title": "[USACO23DEC] Flight Routes G", "background": "", "description": "Bessie 最近发现她最喜欢的摇滚艺术家 Elsie Swift 正在表演她最新的“时代之旅”音乐会！不幸的是，票卖光的太快了，所以 Bessie 考虑飞往另一个城市参加音乐会。“时代之旅”将在编号为 $1\\dots N$ 的 $N$（$2 \\le N \\le 750$）座城市上演，每对满足 $i<j$ 的城市对 $(i,j)$ 都可能存在从 $i$ 到 $j$ 的一条**单向直飞航班**。\n\n从城市 $a$ 到城市 $b$ 的一条**航线**是一个包含 $k\\ge 2$ 座城市的序列 $a=c_1<c_2<\\cdots<c_k=b$，使得对于所有的 $1\\le i< k$，城市 $c_{i}$ 到城市 $c_{i+1}$ 有**单向直飞航班**。对于所有满足 $i<j$ 的城市对 $(i,j)$，你将被告知它们之间航线数目的奇偶性（$0$ 代表偶数，$1$ 代表奇数）。\n\n在计划她的旅行行程时，Bessie 分心了。现在她想知道，有多少对城市间有**单向直飞航班**。可以证明答案是唯一的。", "inputFormat": "第一行包含整数 $N$。\n\n接下来 $N-1$ 行，第 $i$ 行包含 $N-i$ 个整数。第 $i$ 行的第 $j$ 个整数表示从城市 $i$ 到城市 $i+j$ 的航线数目的奇偶性。", "outputFormat": "输出有单向直飞航班的城市对数。", "hint": "### 样例解释 1\n\n有两条单向直飞航班：$1\\rightarrow 2$ 和 $2\\rightarrow 3$。有城市 $1,2$ 之间、$2,3$ 之间，仅包含一条单向直飞航班的航线各一条。还有城市 $1,3$ 之间的航线一条（$1\\rightarrow 2\\rightarrow 3$）。\n\n### 样例解释 2\n\n有六条单向直飞航班：$1\\rightarrow 2$，$1 \\rightarrow 4$，$1\\rightarrow 5$，$2\\rightarrow 3$，$3\\rightarrow 5$，$4\\rightarrow 5$。这导致的航线数如下表所示：\n\n| 出发地\\目的地 | 1 | 2 | 3 | 4 | 5 |\n| :-: | :-: | :-: | :-: | :-:|:-:|\n| 1 | 0 | 1 | 1 | 1 | 3 |\n| 2 | 0 | 0 | 1 | 0 | 1 |\n| 3 | 0 | 0 | 0 | 0 | 1 |\n| 4 | 0 | 0 | 0 | 0 | 1 |\n| 5 | 0 | 0 | 0 | 0 | 0 |\n\n这与输入是相符的。\n\n### 测试点性质\n\n- 测试点 $3-4$ 满足 $N \\le 6$。\n- 测试点 $5-12$ 满足 $N \\le 100$。\n- 测试点 $13-22$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Flight Routes G", "background": "", "description": "Bessie 最近发现她最喜欢的摇滚艺术家 Elsie Swift 正在表演她最新的“时代之旅”音乐会！不幸的是，票卖光的太快了，所以 Bessie 考虑飞往另一个城市参加音乐会。“时代之旅”将在编号为 $1\\dots N$ 的 $N$（$2 \\le N \\le 750$）座城市上演，每对满足 $i<j$ 的城市对 $(i,j)$ 都可能存在从 $i$ 到 $j$ 的一条**单向直飞航班**。\n\n从城市 $a$ 到城市 $b$ 的一条**航线**是一个包含 $k\\ge 2$ 座城市的序列 $a=c_1<c_2<\\cdots<c_k=b$，使得对于所有的 $1\\le i< k$，城市 $c_{i}$ 到城市 $c_{i+1}$ 有**单向直飞航班**。对于所有满足 $i<j$ 的城市对 $(i,j)$，你将被告知它们之间航线数目的奇偶性（$0$ 代表偶数，$1$ 代表奇数）。\n\n在计划她的旅行行程时，Bessie 分心了。现在她想知道，有多少对城市间有**单向直飞航班**。可以证明答案是唯一的。", "inputFormat": "第一行包含整数 $N$。\n\n接下来 $N-1$ 行，第 $i$ 行包含 $N-i$ 个整数。第 $i$ 行的第 $j$ 个整数表示从城市 $i$ 到城市 $i+j$ 的航线数目的奇偶性。", "outputFormat": "输出有单向直飞航班的城市对数。", "hint": "### 样例解释 1\n\n有两条单向直飞航班：$1\\rightarrow 2$ 和 $2\\rightarrow 3$。有城市 $1,2$ 之间、$2,3$ 之间，仅包含一条单向直飞航班的航线各一条。还有城市 $1,3$ 之间的航线一条（$1\\rightarrow 2\\rightarrow 3$）。\n\n### 样例解释 2\n\n有六条单向直飞航班：$1\\rightarrow 2$，$1 \\rightarrow 4$，$1\\rightarrow 5$，$2\\rightarrow 3$，$3\\rightarrow 5$，$4\\rightarrow 5$。这导致的航线数如下表所示：\n\n| 出发地\\目的地 | 1 | 2 | 3 | 4 | 5 |\n| :-: | :-: | :-: | :-: | :-:|:-:|\n| 1 | 0 | 1 | 1 | 1 | 3 |\n| 2 | 0 | 0 | 1 | 0 | 1 |\n| 3 | 0 | 0 | 0 | 0 | 1 |\n| 4 | 0 | 0 | 0 | 0 | 1 |\n| 5 | 0 | 0 | 0 | 0 | 0 |\n\n这与输入是相符的。\n\n### 测试点性质\n\n- 测试点 $3-4$ 满足 $N \\le 6$。\n- 测试点 $5-12$ 满足 $N \\le 100$。\n- 测试点 $13-22$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9981", "type": "P", "difficulty": 5, "samples": [["4 5\n4 3 10\n4 2 10\n3 1 10\n2 1 10\n4 1 10", "0 0\n1 10\n1 10\n2 20"], ["4 5\n4 3 4\n4 2 2\n3 1 5\n2 1 10\n4 1 1", "0 0\n1 10\n1 5\n2 12"], ["4 5\n4 3 2\n4 2 2\n3 1 5\n2 1 10\n4 1 1", "0 0\n1 10\n1 5\n2 7"], ["4 5\n4 3 2\n4 2 2\n3 1 10\n2 1 5\n4 1 1", "0 0\n1 5\n1 10\n2 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "倍增", "USACO", "2023", "O2优化", "拓扑排序", "哈希 hashing"], "title": "[USACO23DEC] Minimum Longest Trip G", "background": null, "description": "Bessie 正在奶牛大陆上旅行。奶牛大陆由从 $1$ 到 $N$ 编号的 $N$（$2 \\le N \\le 2\\cdot 10^5$）座城市和 $M$（$1 \\le M \\le 4\\cdot 10^5$）条单向道路组成。第 $i$ 条路从城市 $a_i$ 通向城市 $b_i$，标签为 $l_i$（$1 \\le l_i \\le 10^9$）。\n\n由城市 $x_0$ 开始的长度为 $k$ 的旅程被定义为一个城市序列 $x_0,x_1,\\ldots,x_k$，对于所有的 $0 \\le i < k$，存在由城市 $x_i$ 到 $x_{i+1}$ 的路。保证在奶牛大陆上不存在长度无限的旅程，不存在两条路连接一对相同的城市。\n\n对于每座城市，Bessie 想知道从它开始的最长旅程。对于一些城市，从它们开始的最长旅程不唯一，Bessie 将选择其中道路标签序列字典序更小的旅程。一个序列比等长的另一个序列字典序更小，当且仅当在它们不同的第一个位置，前者比后者的元素更小。\n\n输出 Bessie 在每座城市选择的旅途的长度和道路标签之和。", "inputFormat": "第一行包含 $N$ 和 $M$。\n\n接下来 $M$ 行，每行三个整数 $a_i,b_i,l_i$，代表一条由 $a_i$ 到 $b_i$，标签为 $l_i$ 的单向道路。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含由空格分隔的两个整数，表示 Bessie 选择的从城市 $i$ 开始的旅程的长度和道路标签之和。", "hint": "### 样例解释 2\n\n在下面的解释中，我们用 $a_i\\xrightarrow{l_i} b_i$ 表示由城市 $a_i$ 通往 $b_i$，标签为 $l_i$ 的单向道路。\n\n从城市 $4$ 出发有多条旅程，包含 $4\\xrightarrow{4} 3\\xrightarrow 5 1$，$4\\xrightarrow 1 1$ 和 $4\\xrightarrow 2 2\\xrightarrow{10} 1$。在这些旅程中，$4\\xrightarrow{4} 3\\xrightarrow 5 1$ 和 $4\\xrightarrow 2 2\\xrightarrow{10} 1$ 是最长的。它们的长度均为 $2$，道路标签序列分别为 $[4,5]$ 和 $[2,10]$。$[2,10]$ 是字典序更小的那一个，它的和为 $12$。\n\n### 测试点性质\n\n- 测试点 $5-6$ 满足所有道路的标签相同。\n- 测试点 $7-8$ 满足所有道路的标签不相同。\n- 测试点 $9-10$ 满足 $N,M \\le 5000$。\n- 测试点 $11-20$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Minimum Longest Trip G", "background": null, "description": "Bessie 正在奶牛大陆上旅行。奶牛大陆由从 $1$ 到 $N$ 编号的 $N$（$2 \\le N \\le 2\\cdot 10^5$）座城市和 $M$（$1 \\le M \\le 4\\cdot 10^5$）条单向道路组成。第 $i$ 条路从城市 $a_i$ 通向城市 $b_i$，标签为 $l_i$（$1 \\le l_i \\le 10^9$）。\n\n由城市 $x_0$ 开始的长度为 $k$ 的旅程被定义为一个城市序列 $x_0,x_1,\\ldots,x_k$，对于所有的 $0 \\le i < k$，存在由城市 $x_i$ 到 $x_{i+1}$ 的路。保证在奶牛大陆上不存在长度无限的旅程，不存在两条路连接一对相同的城市。\n\n对于每座城市，Bessie 想知道从它开始的最长旅程。对于一些城市，从它们开始的最长旅程不唯一，Bessie 将选择其中道路标签序列字典序更小的旅程。一个序列比等长的另一个序列字典序更小，当且仅当在它们不同的第一个位置，前者比后者的元素更小。\n\n输出 Bessie 在每座城市选择的旅途的长度和道路标签之和。", "inputFormat": "第一行包含 $N$ 和 $M$。\n\n接下来 $M$ 行，每行三个整数 $a_i,b_i,l_i$，代表一条由 $a_i$ 到 $b_i$，标签为 $l_i$ 的单向道路。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含由空格分隔的两个整数，表示 Bessie 选择的从城市 $i$ 开始的旅程的长度和道路标签之和。", "hint": "### 样例解释 2\n\n在下面的解释中，我们用 $a_i\\xrightarrow{l_i} b_i$ 表示由城市 $a_i$ 通往 $b_i$，标签为 $l_i$ 的单向道路。\n\n从城市 $4$ 出发有多条旅程，包含 $4\\xrightarrow{4} 3\\xrightarrow 5 1$，$4\\xrightarrow 1 1$ 和 $4\\xrightarrow 2 2\\xrightarrow{10} 1$。在这些旅程中，$4\\xrightarrow{4} 3\\xrightarrow 5 1$ 和 $4\\xrightarrow 2 2\\xrightarrow{10} 1$ 是最长的。它们的长度均为 $2$，道路标签序列分别为 $[4,5]$ 和 $[2,10]$。$[2,10]$ 是字典序更小的那一个，它的和为 $12$。\n\n### 测试点性质\n\n- 测试点 $5-6$ 满足所有道路的标签相同。\n- 测试点 $7-8$ 满足所有道路的标签不相同。\n- 测试点 $9-10$ 满足 $N,M \\le 5000$。\n- 测试点 $11-20$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9982", "type": "P", "difficulty": 4, "samples": [["5\n1 4 2 3 10\n4\n1 1\n2 1\n1 2\n1 4", "11\n13\n18\n30"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "二分", "USACO", "2023", "三分", "O2优化"], "title": "[USACO23DEC] Haybale Distribution G", "background": null, "description": "Farmer John 正在农场上分发干草堆。\n\nFarmer John 的农场上有 $N$（$1 \\le N \\le 2\\cdot 10^5$）座谷仓，分别位于数轴上的整点 $x_1,\\ldots,x_N$（$0 \\le x_i \\le 10^6$）。Farmer John 正计划将 $N$ 车干草堆运输到整点 $y$（$0 \\le y \\le 10^6$），然后为每一座谷仓运输一车干草堆。\n\n不幸的是，Farmer John 的运输系统浪费了很多干草堆。具体来说，给出一些 $a_i,b_i$（$1 \\le a_i,b_i \\le 10^6$），每车干草堆每向左移动一单位距离，$a_i$ 堆干草堆会被浪费；每车干草堆每向右移动一单位距离，$b_i$ 堆干草堆会被浪费。形式化地，一车干草堆从整点 $y$ 运动到位于 $x$ 的谷仓，被浪费的干草堆堆数如下：\n\n$$\\begin{cases}a_i\\cdot (y-x) & \\text{if} \\ y>x \\\\ b_i\\cdot(x-y)&\\text{if}\\ x>y\\end{cases}$$\n\n给出 $Q$（$1 \\le Q \\le 2 \\cdot 10^5$）组相互独立的询问，每组询问给出一组 $(a_i,b_i)$ 的值，帮助 Farmer John 计算当按照最佳方案选择 $y$，最少有多少堆干草堆被浪费。", "inputFormat": "第一行包含 $N$。\n\n接下来一行包含 $x_1\\dots x_N$。\n\n接下来一行包含 $Q$。\n\n接下来 $Q$ 行，每行包含两个整数 $a_i,b_i$。", "outputFormat": "输出 $Q$ 行，第 $i$ 行包含第 $i$ 个询问的答案。", "hint": "### 样例解释 1\n\n样例中第二个询问，最佳方案为选择 $y=2$，被浪费的干草堆数量为 $2(2-1)+2(2-2)+1(3-2)+1(4-2)+1(10-2)=2+0+1+2+8=13$。\n\n### 测试点性质\n\n- 测试点 $2$ 满足 $N,Q \\le 10$。\n- 测试点 $3$ 满足 $N,Q \\le 500$。\n- 测试点 $4-6$ 满足 $N,Q \\le 5000$。\n- 测试点 $7-16$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Haybale Distribution G", "background": null, "description": "Farmer John 正在农场上分发干草堆。\n\nFarmer John 的农场上有 $N$（$1 \\le N \\le 2\\cdot 10^5$）座谷仓，分别位于数轴上的整点 $x_1,\\ldots,x_N$（$0 \\le x_i \\le 10^6$）。Farmer John 正计划将 $N$ 车干草堆运输到整点 $y$（$0 \\le y \\le 10^6$），然后为每一座谷仓运输一车干草堆。\n\n不幸的是，Farmer John 的运输系统浪费了很多干草堆。具体来说，给出一些 $a_i,b_i$（$1 \\le a_i,b_i \\le 10^6$），每车干草堆每向左移动一单位距离，$a_i$ 堆干草堆会被浪费；每车干草堆每向右移动一单位距离，$b_i$ 堆干草堆会被浪费。形式化地，一车干草堆从整点 $y$ 运动到位于 $x$ 的谷仓，被浪费的干草堆堆数如下：\n\n$$\\begin{cases}a_i\\cdot (y-x) & \\text{if} \\ y>x \\\\ b_i\\cdot(x-y)&\\text{if}\\ x>y\\end{cases}$$\n\n给出 $Q$（$1 \\le Q \\le 2 \\cdot 10^5$）组相互独立的询问，每组询问给出一组 $(a_i,b_i)$ 的值，帮助 Farmer John 计算当按照最佳方案选择 $y$，最少有多少堆干草堆被浪费。", "inputFormat": "第一行包含 $N$。\n\n接下来一行包含 $x_1\\dots x_N$。\n\n接下来一行包含 $Q$。\n\n接下来 $Q$ 行，每行包含两个整数 $a_i,b_i$。", "outputFormat": "输出 $Q$ 行，第 $i$ 行包含第 $i$ 个询问的答案。", "hint": "### 样例解释 1\n\n样例中第二个询问，最佳方案为选择 $y=2$，被浪费的干草堆数量为 $2(2-1)+2(2-2)+1(3-2)+1(4-2)+1(10-2)=2+0+1+2+8=13$。\n\n### 测试点性质\n\n- 测试点 $2$ 满足 $N,Q \\le 10$。\n- 测试点 $3$ 满足 $N,Q \\le 500$。\n- 测试点 $4-6$ 满足 $N,Q \\le 5000$。\n- 测试点 $7-16$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9983", "type": "P", "difficulty": 7, "samples": [["5\n11111\n1 2\n2 3\n3 4\n4 5\n6\n5\n4\n3\n2\n1\n0", "1\n1\n1\n1\n2\n5"], ["10\n1111111111\n1 2\n2 3\n2 4\n2 5\n2 6\n6 7\n7 8\n8 9\n9 10\n11\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10", "10\n3\n2\n1\n1\n1\n1\n1\n1\n1\n1"], ["5\n11100\n1 2\n2 3\n3 4\n4 5\n6\n0\n1\n2\n3\n4\n5", "3\n1\n1\n-1\n-1\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "贪心", "USACO", "点分治", "2023", "O2优化", "树形 DP"], "title": "[USACO23DEC] Cowntact Tracing P", "background": "", "description": "Farmer John 有依次编号为 $1\\dots N$ 的 $N$（$2\\le N \\le 10^5$）头奶牛，奶牛间的关系可以用树结构描述。不幸的是，有一种疾病正在传播。\n\n最初，有一些奶牛被感染。每到夜晚，被感染的奶牛会将疾病传播给它的邻居。一旦奶牛被感染，她就会持续处于感染状态。经过一些晚上，Farmer John 意识到这样的情况，因此他对奶牛进行了检测以确定哪些奶牛感染了疾病。\n\n你将得到 $Q$（$1\\le Q \\le 20$）个不同的夜晚数，每个都是 $[0,N]$ 范围内的整数。对于每个夜晚数，请找出最少有多少头奶牛最初可能感染了这种疾病，或者报告夜晚数与给出的信息不符。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行，包含长度为 $N$ 的由 $1$ 和 $0$ 组成的位串。其中 $1$ 表示一头被感染的奶牛，$0$ 表示一头在经过若干晚之后仍未被感染的奶牛。\n\n接下来 $N-1$ 行描述了树的边。\n\n接着输入 $Q$ 和 $Q$ 个夜晚数。", "outputFormat": "输出 $Q$ 行，表示每个夜晚数的答案。若无解，输出 $-1$。", "hint": "### 样例解释 1\n\n对于前四个询问，一种可能是只有 $3$ 号奶牛一开始被感染。对于第五组询问（$1$ 晚），一种可能是 $2,4$ 号奶牛一开始被感染。对于第六组询问（$0$ 晚），一种可能是所有的五只奶牛在一开始都被感染。\n\n### 样例解释 2\n\n对于第一组询问（$0$ 晚），一种可能是所有的十只奶牛一开始都被感染。对于第二组询问（$1$ 晚），一种可能是 $2,7,9$ 号奶牛一开始被感染。对于第三组询问（$2$ 晚），一种可能是 $2,9$ 号奶牛一开始被感染。对于第四至第十一组询问，一种可能是只有 $7$ 号奶牛一开始被感染。\n\n### 样例解释 3\n\n对于第一组询问（$0$ 晚），一种可能是 $1,2,3$ 号奶牛一开始被感染。对于第二组询问（$1$ 晚），一种可能是只有 $2$ 号奶牛一开始被感染。对于第三组询问（$2$ 晚），一种可能是只有 $1$ 号奶牛一开始被感染。对于第四至第六组询问，不可能满足题给条件。\n\n### 测试点性质\n\n- 测试点 $4-5$ 满足 $N \\le 10$。\n- 测试点 $6-8$ 满足所有奶牛都被感染。\n- 测试点 $9-11$ 满足 $N \\le 400$。\n- 测试点 $12-23$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Cowntact Tracing P", "background": "", "description": "Farmer John 有依次编号为 $1\\dots N$ 的 $N$（$2\\le N \\le 10^5$）头奶牛，奶牛间的关系可以用树结构描述。不幸的是，有一种疾病正在传播。\n\n最初，有一些奶牛被感染。每到夜晚，被感染的奶牛会将疾病传播给它的邻居。一旦奶牛被感染，她就会持续处于感染状态。经过一些晚上，Farmer John 意识到这样的情况，因此他对奶牛进行了检测以确定哪些奶牛感染了疾病。\n\n你将得到 $Q$（$1\\le Q \\le 20$）个不同的夜晚数，每个都是 $[0,N]$ 范围内的整数。对于每个夜晚数，请找出最少有多少头奶牛最初可能感染了这种疾病，或者报告夜晚数与给出的信息不符。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行，包含长度为 $N$ 的由 $1$ 和 $0$ 组成的位串。其中 $1$ 表示一头被感染的奶牛，$0$ 表示一头在经过若干晚之后仍未被感染的奶牛。\n\n接下来 $N-1$ 行描述了树的边。\n\n接着输入 $Q$ 和 $Q$ 个夜晚数。", "outputFormat": "输出 $Q$ 行，表示每个夜晚数的答案。若无解，输出 $-1$。", "hint": "### 样例解释 1\n\n对于前四个询问，一种可能是只有 $3$ 号奶牛一开始被感染。对于第五组询问（$1$ 晚），一种可能是 $2,4$ 号奶牛一开始被感染。对于第六组询问（$0$ 晚），一种可能是所有的五只奶牛在一开始都被感染。\n\n### 样例解释 2\n\n对于第一组询问（$0$ 晚），一种可能是所有的十只奶牛一开始都被感染。对于第二组询问（$1$ 晚），一种可能是 $2,7,9$ 号奶牛一开始被感染。对于第三组询问（$2$ 晚），一种可能是 $2,9$ 号奶牛一开始被感染。对于第四至第十一组询问，一种可能是只有 $7$ 号奶牛一开始被感染。\n\n### 样例解释 3\n\n对于第一组询问（$0$ 晚），一种可能是 $1,2,3$ 号奶牛一开始被感染。对于第二组询问（$1$ 晚），一种可能是只有 $2$ 号奶牛一开始被感染。对于第三组询问（$2$ 晚），一种可能是只有 $1$ 号奶牛一开始被感染。对于第四至第六组询问，不可能满足题给条件。\n\n### 测试点性质\n\n- 测试点 $4-5$ 满足 $N \\le 10$。\n- 测试点 $6-8$ 满足所有奶牛都被感染。\n- 测试点 $9-11$ 满足 $N \\le 400$。\n- 测试点 $12-23$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9984", "type": "P", "difficulty": 6, "samples": [["3 2\n1 2\n2 3", "12\n12\n21"], ["5 6\n1 2\n3 4\n2 4\n2 3\n2 5\n1 5", "1325\n1325\n2315\n2315\n5132"], ["15 14\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9\n9 10\n10 11\n11 12\n12 13\n13 14\n14 15", "678925929\n678925929\n678862929\n678787329\n678709839\n678632097\n178554320\n218476543\n321398766\n431520989\n542453212\n653475435\n764507558\n875540761\n986574081"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "USACO", "并查集", "2023", "Kruskal 重构树", "O2优化", "哈希 hashing", "启发式合并"], "title": "[USACO23DEC] A Graph Problem P", "background": "", "description": "为了丰富自己的数学知识，Bessie 选修了一门图论课程，她发现她被下面的问题困住了，请帮帮她！\n\n给出一张连通的无向图，包含编号为 $1\\dots N$ 的节点和编号为 $1\\dots M$（$2 \\le N \\le 2\\cdot 10^5$，$N - 1 \\le M \\le 4 \\cdot 10^5$）的边，下边的操作将被实施：\n\n1. 假设集合 $S=\\{v\\}$，变量 $h=0$。\n2. 当 $|S|<N$，重复执行：\n\t1. 仅有一个顶点在集合 $S$ 中的边中，找到编号最小的那条，编号记为 $e$。\n    2. 将 $e$ 不在 $S$ 中的那个顶点加入集合 $S$。\n    3. 将 $h$ 修改为 $10h+e$。\n3. 返回 $h$ 对 $10^9+7$ 取模的值。\n\n输出这个过程的全部返回值。", "inputFormat": "第一行包含 $N$ 和 $M$。接下来 $M$ 行，每行包含第 $e$ 条边的顶点 $(a_e,b_e)$，保证图连通，没有重边。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含在节点 $i$ 开始过程的返回值。", "hint": "### 样例解释 2\n\n考虑在 $i=3$ 开始执行。首先，选择 $2$ 号边，$S=\\{3,4\\}$，$h=2$。然后，选择 $3$ 号边，$S=\\{2,3,4\\}$，$h=23$。接着，选择 $1$ 号边，$S=\\{1,2,3,4\\}$，$h=231$。最后，选择 $5$ 号边，$S=\\{1,2,3,4,5\\}$，$h=2315$。因此，$i=3$ 的答案是 $2315$。\n\n### 样例解释 3\n\n确保答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $4$ 满足 $N,M \\le 2000$。\n- 测试点 $5-6$ 满足 $N \\le 2000$。\n- 测试点 $7-10$ 满足 $N \\le 10000$。\n- 测试点 $11-14$ 满足对于所有边，有 $a_e+1=b_e$。\n- 测试点 $15-23$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] A Graph Problem P", "background": "", "description": "为了丰富自己的数学知识，Bessie 选修了一门图论课程，她发现她被下面的问题困住了，请帮帮她！\n\n给出一张连通的无向图，包含编号为 $1\\dots N$ 的节点和编号为 $1\\dots M$（$2 \\le N \\le 2\\cdot 10^5$，$N - 1 \\le M \\le 4 \\cdot 10^5$）的边，下边的操作将被实施：\n\n1. 假设集合 $S=\\{v\\}$，变量 $h=0$。\n2. 当 $|S|<N$，重复执行：\n\t1. 仅有一个顶点在集合 $S$ 中的边中，找到编号最小的那条，编号记为 $e$。\n    2. 将 $e$ 不在 $S$ 中的那个顶点加入集合 $S$。\n    3. 将 $h$ 修改为 $10h+e$。\n3. 返回 $h$ 对 $10^9+7$ 取模的值。\n\n输出这个过程的全部返回值。", "inputFormat": "第一行包含 $N$ 和 $M$。接下来 $M$ 行，每行包含第 $e$ 条边的顶点 $(a_e,b_e)$，保证图连通，没有重边。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含在节点 $i$ 开始过程的返回值。", "hint": "### 样例解释 2\n\n考虑在 $i=3$ 开始执行。首先，选择 $2$ 号边，$S=\\{3,4\\}$，$h=2$。然后，选择 $3$ 号边，$S=\\{2,3,4\\}$，$h=23$。接着，选择 $1$ 号边，$S=\\{1,2,3,4\\}$，$h=231$。最后，选择 $5$ 号边，$S=\\{1,2,3,4,5\\}$，$h=2315$。因此，$i=3$ 的答案是 $2315$。\n\n### 样例解释 3\n\n确保答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $4$ 满足 $N,M \\le 2000$。\n- 测试点 $5-6$ 满足 $N \\le 2000$。\n- 测试点 $7-10$ 满足 $N \\le 10000$。\n- 测试点 $11-14$ 满足对于所有边，有 $a_e+1=b_e$。\n- 测试点 $15-23$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9985", "type": "P", "difficulty": 6, "samples": [["1 95\nB 63", "0"], ["4 1\nB 3\nB 2\nA 1\nA 3", "1"], ["4 10\nA 1\nB 2\nA 3\nA 21", "13"], ["8 125000000000\nB 17108575619\nB 57117098303\nA 42515717584\nB 26473500855\nA 108514697534\nB 110763448122\nB 117731666682\nA 29117227954", "548047356974"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "USACO", "2023", "O2优化", "动态规划优化"], "title": "[USACO23DEC] Train Scheduling P", "background": "**Note: The memory limit for this problem is 512MB, twice the default.**", "description": "Bessie 找到了一份行车调度的新工作。现在有两座火车站 $A$ 和 $B$，由于预算限制，只有一条单线铁道连接起车站 $A$ 和 $B$。如果一列列车在 $t$ 时刻离开其中一座火车站，它将在 $t+T$（$1 \\le T \\le 10^{12}$）时刻到达另一座火车站。\n\n现在有 $N$（$1 \\le N \\le 5000$）列火车的出发时间需要安排。第 $i$ 列火车必须在 $t_i$ 时刻后从车站 $s_i$ 出发（$s_i\\in \\{A,B\\}$，$0 \\le t_i \\le 10^{12}$）。在同一时刻不允许铁道上有相反方向的列车，否则它们会相撞。但是，假设火车有可以忽略的尺寸，在同一时刻，铁道上可以有许多相同方向的列车。\n\n帮助 Bessie 安排每辆列车的出发时间，在不会相撞的前提下最小化总延误时间。假设第 $i$ 辆列车被安排在 $a_i$ 时刻出发，总延误为 $\\sum\\limits_{i=1}^n{a_i-t_i}$。", "inputFormat": "第一行包含 $N$ 和 $T$。\n\n接下来 $N$ 行，第 $i$ 行包含用于描述第 $i$ 辆列车的 $s_i,t_i$。", "outputFormat": "输出合法安排中最小总延误时间。", "hint": "### 样例解释 1\n\n唯一的一辆列车准点出发。\n\n### 样例解释 2\n\n有两种最佳方案。第一种是让列车 $2,3,4$ 准点出发，列车 $1$ 延误一分钟后出发。第二种是让列车 $1,2,3$ 准点出发，列车 $4$ 延误一分钟后出发。\n\n### 样例解释 3\n\n最佳方案是让列车 $1,3$ 准点出发，列车 $2$ 在时刻 $13$ 出发，列车 $4$ 在时刻 $23$ 出发。总延误为 $0+11+0+2=13$。\n\n### 测试点性质\n\n- 测试点 $5-6$ 满足 $N \\le 15$。\n- 测试点 $7-10$ 满足 $N \\le 100$。\n- 测试点 $11-14$ 满足 $N \\le 500$。\n- 测试点 $15-18$ 满足 $N \\le 2000$。\n- 测试点 $19-24$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Train Scheduling P", "background": "**Note: The memory limit for this problem is 512MB, twice the default.**", "description": "Bessie 找到了一份行车调度的新工作。现在有两座火车站 $A$ 和 $B$，由于预算限制，只有一条单线铁道连接起车站 $A$ 和 $B$。如果一列列车在 $t$ 时刻离开其中一座火车站，它将在 $t+T$（$1 \\le T \\le 10^{12}$）时刻到达另一座火车站。\n\n现在有 $N$（$1 \\le N \\le 5000$）列火车的出发时间需要安排。第 $i$ 列火车必须在 $t_i$ 时刻后从车站 $s_i$ 出发（$s_i\\in \\{A,B\\}$，$0 \\le t_i \\le 10^{12}$）。在同一时刻不允许铁道上有相反方向的列车，否则它们会相撞。但是，假设火车有可以忽略的尺寸，在同一时刻，铁道上可以有许多相同方向的列车。\n\n帮助 Bessie 安排每辆列车的出发时间，在不会相撞的前提下最小化总延误时间。假设第 $i$ 辆列车被安排在 $a_i$ 时刻出发，总延误为 $\\sum\\limits_{i=1}^n{a_i-t_i}$。", "inputFormat": "第一行包含 $N$ 和 $T$。\n\n接下来 $N$ 行，第 $i$ 行包含用于描述第 $i$ 辆列车的 $s_i,t_i$。", "outputFormat": "输出合法安排中最小总延误时间。", "hint": "### 样例解释 1\n\n唯一的一辆列车准点出发。\n\n### 样例解释 2\n\n有两种最佳方案。第一种是让列车 $2,3,4$ 准点出发，列车 $1$ 延误一分钟后出发。第二种是让列车 $1,2,3$ 准点出发，列车 $4$ 延误一分钟后出发。\n\n### 样例解释 3\n\n最佳方案是让列车 $1,3$ 准点出发，列车 $2$ 在时刻 $13$ 出发，列车 $4$ 在时刻 $23$ 出发。总延误为 $0+11+0+2=13$。\n\n### 测试点性质\n\n- 测试点 $5-6$ 满足 $N \\le 15$。\n- 测试点 $7-10$ 满足 $N \\le 100$。\n- 测试点 $11-14$ 满足 $N \\le 500$。\n- 测试点 $15-18$ 满足 $N \\le 2000$。\n- 测试点 $19-24$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9986", "type": "P", "difficulty": 7, "samples": [["5 2\n2 3 1 2 32\n2 5\n2 5", "4\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "Ynoi", "2079"], "title": "[Ynoi2079] r2pspc", "background": "", "description": "给定序列 $a_1,\\dots,a_n$，共 $m$ 次查询，每次查询问 $\\sum\\limits_{i=l}^r 2^{a_i}$ 的二进制表示中 $1$ 的个数。", "inputFormat": "第一行两个数表示 $n,m$。\n\n第二行 $n$ 个数表示 $a_1,\\dots,a_n$。\n\n接下来 $m$ 行每行 $l,r$ 表示一次查询。", "outputFormat": "共 $m$ 行，依次为每次查询的答案。", "hint": "Idea：rushcheyo，Solution：djq_cpp&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le {10}^5$，$1\\le m\\le {10}^6$，$1\\le a_i\\le 10^9$，$1\\le l\\le r\\le n$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 1000$。\n\n对于另外 $25\\%$ 的数据，满足 $a_i\\le100$。\n\n对于另外 $25\\%$ 的数据，满足 $m\\le 10^5$\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2079] r2pspc", "background": "", "description": "给定序列 $a_1,\\dots,a_n$，共 $m$ 次查询，每次查询问 $\\sum\\limits_{i=l}^r 2^{a_i}$ 的二进制表示中 $1$ 的个数。", "inputFormat": "第一行两个数表示 $n,m$。\n\n第二行 $n$ 个数表示 $a_1,\\dots,a_n$。\n\n接下来 $m$ 行每行 $l,r$ 表示一次查询。", "outputFormat": "共 $m$ 行，依次为每次查询的答案。", "hint": "Idea：rushcheyo，Solution：djq_cpp&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le {10}^5$，$1\\le m\\le {10}^6$，$1\\le a_i\\le 10^9$，$1\\le l\\le r\\le n$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 1000$。\n\n对于另外 $25\\%$ 的数据，满足 $a_i\\le100$。\n\n对于另外 $25\\%$ 的数据，满足 $m\\le 10^5$\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9987", "type": "P", "difficulty": 7, "samples": [["8 10\n5 4 8 7 1 6 3 2\n1 2 5\n2 8\n1 2 8\n1 7 8\n2 4\n2 1\n2 6\n2 4\n1 8 8\n2 4\n", "0\n4\n0\n3\n4\n4\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["O2优化", "Ynoi", "2079"], "title": "[Ynoi2079] riapq", "background": "", "description": "给出排列 $a_1,\\dots,a_n$，你需要维护序列 $b_1,\\dots,b_n$，初值为 $0$。\n\n共 $m$ 次操作：\n\n修改操作：给出 $l,r$，对每个 $(i,j)$ 满足 $l\\le i\\le j\\le r,\\;a_i\\le a_j$，将 $b_j$ 增加 $1$；\n\n查询操作：给出 $x$，查 $b_x$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行 $1,l,r$ 或 $2,x$ 表示修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 \n\n$1\\le n,m\\le 2\\times 10^5$；\n\n$1\\le a_i\\le n$，$a_i$ 互不相同；\n\n$1\\le l\\le r\\le n$；\n\n$1\\le x\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2079] riapq", "background": "", "description": "给出排列 $a_1,\\dots,a_n$，你需要维护序列 $b_1,\\dots,b_n$，初值为 $0$。\n\n共 $m$ 次操作：\n\n修改操作：给出 $l,r$，对每个 $(i,j)$ 满足 $l\\le i\\le j\\le r,\\;a_i\\le a_j$，将 $b_j$ 增加 $1$；\n\n查询操作：给出 $x$，查 $b_x$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行 $1,l,r$ 或 $2,x$ 表示修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 \n\n$1\\le n,m\\le 2\\times 10^5$；\n\n$1\\le a_i\\le n$，$a_i$ 互不相同；\n\n$1\\le l\\le r\\le n$；\n\n$1\\le x\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9988", "type": "P", "difficulty": 7, "samples": [["5 3\n1 1 2 3\n1 1\n2 5\n4 3", "2\n3\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "Ynoi", "2079"], "title": "[Ynoi2079] 2stmo", "background": "", "description": "给定一棵 $n$ 个顶点的有根树，顶点编号为 $1,\\dots,n$ ，$1$ 为根，$f_2,\\dots,f_n$ 依次表示 $2,\\dots,n$ 的父亲。\n\n给定 $m$ 对整数 $a_1,b_1,\\dots,a_m,b_m$ ，你需要构造一个 $1,\\dots,m$ 的排列 $p_1,\\dots,p_m$ ，满足这个排列的代价不超过 $4\\times 10^9$。\n\n排列的代价定义为：\n\n$|S(a_{p_1})|+|S(b_{p_1})|+\\sum\\limits_{i=2}^m |S(a_{p_{i-1}})\\oplus S(a_{p_i})|+|S(b_{p_{i-1}})\\oplus S(b_{p_i})|$\n\n其中 $S(x)$ 是以 $x$ 为根的子树中的顶点构成的集合，$|A|$ 是集合 $A$ 的元素个数，$A\\oplus B$ 是集合 $A,B$ 的对称差（即在 $A,B$ 中恰好出现一次的元素构成的集合）。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n-1$ 个整数 $f_2,\\dots,f_n$ ；\n\n接下来 $m$ 行，每行两个整数表示 $a_i,b_i$ ，$i=1,\\dots,m$ 。", "outputFormat": "输出 $m$ 行，每行一个整数，依次表示 $p_1,\\dots,p_m$ 。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 10^4$。\n\n对于 $50\\%$ 的数据，$n,m\\le 2\\times 10^5$。\n\n对于 $75\\%$ 的数据，$n,m\\le 5\\times 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le f_i\\le i-1$，$1\\le a_i,b_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2079] 2stmo", "background": "", "description": "给定一棵 $n$ 个顶点的有根树，顶点编号为 $1,\\dots,n$ ，$1$ 为根，$f_2,\\dots,f_n$ 依次表示 $2,\\dots,n$ 的父亲。\n\n给定 $m$ 对整数 $a_1,b_1,\\dots,a_m,b_m$ ，你需要构造一个 $1,\\dots,m$ 的排列 $p_1,\\dots,p_m$ ，满足这个排列的代价不超过 $4\\times 10^9$。\n\n排列的代价定义为：\n\n$|S(a_{p_1})|+|S(b_{p_1})|+\\sum\\limits_{i=2}^m |S(a_{p_{i-1}})\\oplus S(a_{p_i})|+|S(b_{p_{i-1}})\\oplus S(b_{p_i})|$\n\n其中 $S(x)$ 是以 $x$ 为根的子树中的顶点构成的集合，$|A|$ 是集合 $A$ 的元素个数，$A\\oplus B$ 是集合 $A,B$ 的对称差（即在 $A,B$ 中恰好出现一次的元素构成的集合）。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n-1$ 个整数 $f_2,\\dots,f_n$ ；\n\n接下来 $m$ 行，每行两个整数表示 $a_i,b_i$ ，$i=1,\\dots,m$ 。", "outputFormat": "输出 $m$ 行，每行一个整数，依次表示 $p_1,\\dots,p_m$ 。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 10^4$。\n\n对于 $50\\%$ 的数据，$n,m\\le 2\\times 10^5$。\n\n对于 $75\\%$ 的数据，$n,m\\le 5\\times 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le f_i\\le i-1$，$1\\le a_i,b_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9989", "type": "P", "difficulty": 6, "samples": [["10 10\n4 1 5 10 1 3 8 2 8 2 \n2 1 7\n2 1 10\n1 7 10 4\n1 5 8 10\n2 1 8\n1 3 5 2\n1 3 4 3\n2 5 8\n2 3 7\n2 6 10", "32\n44\n26\n6\n6\n11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2023] TEST_69", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，有 $m$ 次操作。\n\n每次有两种操作：\n\n``1 l r x``：对于区间 $[l,r]$ 内所有 $i$，将 $a_i$ 变成 $\\gcd(a_i,x)$。\n\n``2 l r``：查询区间 $[l,r]$ 的和，答案对 $2^{32}$ 取模后输出。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个数表示 $a_i$。\n\n之后 $m$ 行，每行三个或四个数，表示一次操作。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示这次查询的答案。", "hint": "Idea：nzhtl1477，Solution：nhtl1477，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $1 \\le n,m,a_i,x \\le 10^3$。\n\n对于 $50\\%$ 的数据，满足  $1 \\le n,m \\le 10^5$，且 $a$ 中的元素与每次操作的 $x$ 均随机生成。\n\n对于另外 $20\\%$ 的数据，满足所有的查询均在修改后发生。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 2\\cdot 10^5,1\\le m\\le 5 \\cdot 10^5$，所有数值为 $[1,10^{18}]$ 内的整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2023] TEST_69", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，有 $m$ 次操作。\n\n每次有两种操作：\n\n``1 l r x``：对于区间 $[l,r]$ 内所有 $i$，将 $a_i$ 变成 $\\gcd(a_i,x)$。\n\n``2 l r``：查询区间 $[l,r]$ 的和，答案对 $2^{32}$ 取模后输出。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个数表示 $a_i$。\n\n之后 $m$ 行，每行三个或四个数，表示一次操作。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示这次查询的答案。", "hint": "Idea：nzhtl1477，Solution：nhtl1477，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $1 \\le n,m,a_i,x \\le 10^3$。\n\n对于 $50\\%$ 的数据，满足  $1 \\le n,m \\le 10^5$，且 $a$ 中的元素与每次操作的 $x$ 均随机生成。\n\n对于另外 $20\\%$ 的数据，满足所有的查询均在修改后发生。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 2\\cdot 10^5,1\\le m\\le 5 \\cdot 10^5$，所有数值为 $[1,10^{18}]$ 内的整数。", "locale": "zh-CN"}}}
{"pid": "P9990", "type": "P", "difficulty": 6, "samples": [["5\n2 3 5 1 5\n5\n2 3\n1 1\n1 3\n2 5\n2 4", "2\n1\n4\n6\n4"], ["10\n2 8 5 1 10 5 9 9 3 5\n10\n6 8\n1 2\n3 5\n5 7\n1 7\n3 9\n4 9\n1 4\n3 7\n2 5", "4\n2\n4\n4\n16\n16\n12\n6\n9\n6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2023] TEST_90", "background": "", "description": "给定一个长度 $n$ 的序列 $a_1,\\dots,a_n$。\n\n共有 $m$ 次询问，每次询问给定 $l,r$，求区间 $[l,r]$ 中有多少 子区间 $[i,j]$ 满足 $l\\le i\\le j\\le r$，且在区间 $[i,j]$ 内出现过的数的个数为奇数。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个整数表示序列 $a_1,\\dots,a_n$\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行两个整数 $l\\;r$ 表示一个询问。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $1\\le n,m\\le 10^2$。\n\n对于 $50\\%$ 的数据，满足 $1\\le n,m\\le 10^4$。\n\n对于另外 $25\\%$ 的数据，满足序列中出现过的数个数不超过 $100$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$1\\le m\\le 10^6$，$1\\le a_i\\le n。$\n\n对每个询问满足 $1\\le l\\le r\\le n$。\n\n以上所有数值为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2023] TEST_90", "background": "", "description": "给定一个长度 $n$ 的序列 $a_1,\\dots,a_n$。\n\n共有 $m$ 次询问，每次询问给定 $l,r$，求区间 $[l,r]$ 中有多少 子区间 $[i,j]$ 满足 $l\\le i\\le j\\le r$，且在区间 $[i,j]$ 内出现过的数的个数为奇数。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个整数表示序列 $a_1,\\dots,a_n$\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行两个整数 $l\\;r$ 表示一个询问。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $1\\le n,m\\le 10^2$。\n\n对于 $50\\%$ 的数据，满足 $1\\le n,m\\le 10^4$。\n\n对于另外 $25\\%$ 的数据，满足序列中出现过的数个数不超过 $100$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$1\\le m\\le 10^6$，$1\\le a_i\\le n。$\n\n对每个询问满足 $1\\le l\\le r\\le n$。\n\n以上所有数值为整数。", "locale": "zh-CN"}}}
{"pid": "P9991", "type": "P", "difficulty": 6, "samples": [["5 4\n1 3 2 3 4\n2 4\n1 3\n2 5\n1 1", "1\n2\n3\n0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "树状数组", "2023", "O2优化", "排序", "扫描线", "Ynoi"], "title": "[Ynoi Easy Round 2023] TEST_107", "background": "", "description": "给一个长为 $n$ 的序列 $a$，下标为 $1$ 到 $n$，有 $m$ 次查询操作，每次给出一个区间 $[l,r]$，求一个子区间 $[l',r']$，满足 $l\\le l'\\le r'\\le r$，$[l',r']$ 中出现过的值个数比 $[l,r]$ 中出现过的值个数少，且其长度即 $r'-l'+1$ 最大。若不存在这样的子区间，则输出 $0$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n之后一行 $n$ 个数依次表示序列 $a$ 中的元素。\n\n之后 $m$ 行，每行两个数 $l,r$ 表示一次查询，只需输出该子区间的长度，即 $r'-l'+1$。", "outputFormat": "对于每次查询，输出一行一个数表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $n,m\\le100$。\n\n对于 $40\\%$ 的数据，满足 $n,m\\le1000$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 10$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,a_i\\le 2\\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2023] TEST_107", "background": "", "description": "给一个长为 $n$ 的序列 $a$，下标为 $1$ 到 $n$，有 $m$ 次查询操作，每次给出一个区间 $[l,r]$，求一个子区间 $[l',r']$，满足 $l\\le l'\\le r'\\le r$，$[l',r']$ 中出现过的值个数比 $[l,r]$ 中出现过的值个数少，且其长度即 $r'-l'+1$ 最大。若不存在这样的子区间，则输出 $0$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n之后一行 $n$ 个数依次表示序列 $a$ 中的元素。\n\n之后 $m$ 行，每行两个数 $l,r$ 表示一次查询，只需输出该子区间的长度，即 $r'-l'+1$。", "outputFormat": "对于每次查询，输出一行一个数表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $n,m\\le100$。\n\n对于 $40\\%$ 的数据，满足 $n,m\\le1000$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 10$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,a_i\\le 2\\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9992", "type": "P", "difficulty": 6, "samples": [["5 4\n1 2 2 3\n3 1\n3 0\n5 0\n1 2", "3\n1\n1\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2024] TEST_130", "background": "", "description": "给定一棵 $n$ 个节点的有根树，定义 $N(w,d)$（$w$ 为树的顶点，$d$ 为非负整数） 为以 $w$ 为根的子树中，到 $w$ 距离不超过 $d$ 的点构成的集合。\n\n共 $m$ 次询问，每次给出 $w,d$ 查询 $\\{N(w',d')\\mid N(w',d')\\subseteq N(w,d)\\}$ 的大小。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n-1$ 个数 $f_2,\\dots,f_n$ ，其中 $f_i$ 表示编号 $i$ 的结点的父亲。\n\n接下来 $m$ 行，每行两个数 $w,d$ 表示一次询问。", "outputFormat": "输出 $m$ 行，依次表示每次查询的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le f_i<i$，$1\\le w\\le n$，$0\\le d\\le n-1$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 100$。\n\n对于另外 $25\\%$ 的数据，满足 $n,m\\le 5000$。\n\n对于另外 $25\\%$ 的数据，满足 $n,m\\le 2\\times 10^5$。\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2024] TEST_130", "background": "", "description": "给定一棵 $n$ 个节点的有根树，定义 $N(w,d)$（$w$ 为树的顶点，$d$ 为非负整数） 为以 $w$ 为根的子树中，到 $w$ 距离不超过 $d$ 的点构成的集合。\n\n共 $m$ 次询问，每次给出 $w,d$ 查询 $\\{N(w',d')\\mid N(w',d')\\subseteq N(w,d)\\}$ 的大小。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n-1$ 个数 $f_2,\\dots,f_n$ ，其中 $f_i$ 表示编号 $i$ 的结点的父亲。\n\n接下来 $m$ 行，每行两个数 $w,d$ 表示一次询问。", "outputFormat": "输出 $m$ 行，依次表示每次查询的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le f_i<i$，$1\\le w\\le n$，$0\\le d\\le n-1$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 100$。\n\n对于另外 $25\\%$ 的数据，满足 $n,m\\le 5000$。\n\n对于另外 $25\\%$ 的数据，满足 $n,m\\le 2\\times 10^5$。\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9993", "type": "P", "difficulty": 6, "samples": [["5 10\n-53 36 41 55 77\n1 1 1 10\n2 4 4 79\n2 3 3 -28\n1 1 5 -29\n1 1 3 27\n2 2 5 88\n2 2 3 24\n1 2 2 10\n1 1 3 -9\n1 2 5 -10", "55\n-inf\n77\n-inf"]], "limits": {"time": [40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2024] TEST_133", "background": "**请不要滥用本题评测，滥用本题评测将被封号。**", "description": "给定序列 $a_1,\\dots,a_n$， $m$ 次操作：\n\n修改操作：给出 $l,r,x$，将 $a_l,a_{l+1},\\dots,a_r$ 的值增加 $x$；\n\n查询操作：给出 $l,r,x$，问满足 $l\\le i\\le r,\\;a_i<x$ 的 $i$ 对应的 $a_i$ 的历史最大值（即初值和每次修改操作后的值中最大的一个）的最大值。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\dots,a_n$；\n\n接下来 $m$ 行每行四个整数 $o,l,r,x$，其中 $o=1$ 表示修改操作，$o=2$ 表示查询操作。", "outputFormat": "对每个查询操作，输出一行，表示答案（特别地，如果不存在满足条件的 $i$，则输出 `-inf`）。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $0\\%$ 的数据，满足 $n,m\\le 5000$。\n\n对于另外 $1/3%$ 的数据，查询操作保证 $l=1,\\;r=n$。\n\n对于另外 $1/3$ 的数据，没有修改操作。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 5\\times 10^5$，$|a_i|\\le 10^9$（仅初始给定的序列保证这个限制），$1\\le l\\le r\\le n$，$|x|\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2024] TEST_133", "background": "**请不要滥用本题评测，滥用本题评测将被封号。**", "description": "给定序列 $a_1,\\dots,a_n$， $m$ 次操作：\n\n修改操作：给出 $l,r,x$，将 $a_l,a_{l+1},\\dots,a_r$ 的值增加 $x$；\n\n查询操作：给出 $l,r,x$，问满足 $l\\le i\\le r,\\;a_i<x$ 的 $i$ 对应的 $a_i$ 的历史最大值（即初值和每次修改操作后的值中最大的一个）的最大值。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\dots,a_n$；\n\n接下来 $m$ 行每行四个整数 $o,l,r,x$，其中 $o=1$ 表示修改操作，$o=2$ 表示查询操作。", "outputFormat": "对每个查询操作，输出一行，表示答案（特别地，如果不存在满足条件的 $i$，则输出 `-inf`）。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $0\\%$ 的数据，满足 $n,m\\le 5000$。\n\n对于另外 $1/3%$ 的数据，查询操作保证 $l=1,\\;r=n$。\n\n对于另外 $1/3$ 的数据，没有修改操作。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 5\\times 10^5$，$|a_i|\\le 10^9$（仅初始给定的序列保证这个限制），$1\\le l\\le r\\le n$，$|x|\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9994", "type": "P", "difficulty": 6, "samples": [["5 10\n1 3 597843412\n1 1 613307236\n1 2 488247075\n1 4 29761102\n1 5 101159431\n1 1\n2 2\n1 1\n2 2\n2 1\n2 2\n1 1\n1 1\n2 3\n1 1", "577359197\n27079329\n482035359\n27079329\n220579797"]], "limits": {"time": [12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2024] TEST_132", "background": "", "description": "给定平面上 $n$ 个互不相同的点 $(x_i,y_i)_{i=1}^n$，每个点有点权，初始为 $v_i$；\n\n共 $m$ 次操作：\n\n修改操作：给定 $X$，将满足 $x_i=X$ 的点的点权 $v_i$ 修改为 $v_i^2$；\n\n查询操作：给定 $Y$，求满足 $y_i=Y$ 的点的点权 $v_i$ 的和；\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来 $n$ 行，每行三个整数 $x_i,y_i,v_i$；\n\n接下来 $m$ 行，每行两个整数，修改操作表示为 $1,X$，查询操作表示为 $2,Y$；", "outputFormat": "对每个查询操作，输出一行，表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 1.2\\times10^6$，$1\\le x_i,y_i\\le n$，$0\\le v_i\\le 10^9+6$，$1\\le X,Y\\le n$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 5000$；\n\n对于另外 $25\\%$ 的数据，没有修改操作；\n\n对于另外 $25\\%$ 的数据，满足 $x_i,y_i,X,Y$ 在 $1,2,\\dots,n$ 中独立地均匀随机选取；\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2024] TEST_132", "background": "", "description": "给定平面上 $n$ 个互不相同的点 $(x_i,y_i)_{i=1}^n$，每个点有点权，初始为 $v_i$；\n\n共 $m$ 次操作：\n\n修改操作：给定 $X$，将满足 $x_i=X$ 的点的点权 $v_i$ 修改为 $v_i^2$；\n\n查询操作：给定 $Y$，求满足 $y_i=Y$ 的点的点权 $v_i$ 的和；\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来 $n$ 行，每行三个整数 $x_i,y_i,v_i$；\n\n接下来 $m$ 行，每行两个整数，修改操作表示为 $1,X$，查询操作表示为 $2,Y$；", "outputFormat": "对每个查询操作，输出一行，表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 1.2\\times10^6$，$1\\le x_i,y_i\\le n$，$0\\le v_i\\le 10^9+6$，$1\\le X,Y\\le n$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 5000$；\n\n对于另外 $25\\%$ 的数据，没有修改操作；\n\n对于另外 $25\\%$ 的数据，满足 $x_i,y_i,X,Y$ 在 $1,2,\\dots,n$ 中独立地均匀随机选取；\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9995", "type": "P", "difficulty": 6, "samples": [["9 7\n2 2 8 8 2 8 2 1 3\n2 2 2\n3 7 6\n6 7 1\n9 6 7\n10 11 10\n7 0 5\n5 1 7", "1\n2\n1\n2\n3\n2\n2"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] rspcn", "background": "", "description": "给定整数序列 $a_1,\\dots,a_n$ ，共 $m$ 次操作；\n\n每次操作给出 $l,r,x$ ，首先进行修改，然后查询 $a_1,\\dots,a_x$ 中有多少种不同的值。\n\n若 $l\\le r$ ，则进行的修改是将 $a_l,\\dots,a_r$ 从小到大排序；否则进行的修改是将 $a_r,\\dots,a_l$ 从大到小排序。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行三个整数 $l\\oplus c,r\\oplus c,x\\oplus c$ ，依次表示每次操作，其中 $\\oplus$ 是按位异或，$c$ 是上次操作的查询的答案（特别地，对于第一次操作，$c=0$）。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $n,m\\le 10^3$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 10$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 100$。\n\n对于另外 $20\\%$ 的数据，满足 $n,m\\le 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le l,r,x\\le n$，$1\\le n,m\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] rspcn", "background": "", "description": "给定整数序列 $a_1,\\dots,a_n$ ，共 $m$ 次操作；\n\n每次操作给出 $l,r,x$ ，首先进行修改，然后查询 $a_1,\\dots,a_x$ 中有多少种不同的值。\n\n若 $l\\le r$ ，则进行的修改是将 $a_l,\\dots,a_r$ 从小到大排序；否则进行的修改是将 $a_r,\\dots,a_l$ 从大到小排序。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行三个整数 $l\\oplus c,r\\oplus c,x\\oplus c$ ，依次表示每次操作，其中 $\\oplus$ 是按位异或，$c$ 是上次操作的查询的答案（特别地，对于第一次操作，$c=0$）。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $n,m\\le 10^3$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 10$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 100$。\n\n对于另外 $20\\%$ 的数据，满足 $n,m\\le 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le l,r,x\\le n$，$1\\le n,m\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9996", "type": "P", "difficulty": 7, "samples": [["5 2\n2003 -553\n-141 1230\n-6854 9658\n9319 -1777\n7773 3306\n1113 -3086 -15864589\n162 550 -21287", "0\n1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] hpi", "background": "", "description": "给定 $n$ 个互不相同的点 $(x_i,y_i)$，共 $m$ 次询问，每次询问给出 $A,B,C$，问满足 $x_i<x_j,\\;y_i<y_j,\\;Ax_i+By_i+C>0,\\;Ax_j+By_j+C>0$ 的二元组 $(i,j)$ 的个数。", "inputFormat": "第一行两个数 $n,m$。\n\n接下来 $n$ 行每行两个数 $x_i,y_i$，$i=1,\\dots,n$。\n\n接下来 $m$ 行每行一个三个数表示一个询问 $A,B,C$。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示这个询问的答案。", "hint": "Idea：nzhtl1477&ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $A^2+B^2>0$，$|A|,|B|,|C|\\le 10^8$，$1\\le n,m\\le 2\\times 10^5$，$|x_i|,|y_i|\\le 10^4$，$x_i,y_i$ 均匀随机选取，但保证没有重复的点。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 10^3$。\n\n对于另外 $25\\%$ 的数据，满足 $A=0$。\n\n对于另外 $25\\%$ 的数据，满足 $C=0$。\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] hpi", "background": "", "description": "给定 $n$ 个互不相同的点 $(x_i,y_i)$，共 $m$ 次询问，每次询问给出 $A,B,C$，问满足 $x_i<x_j,\\;y_i<y_j,\\;Ax_i+By_i+C>0,\\;Ax_j+By_j+C>0$ 的二元组 $(i,j)$ 的个数。", "inputFormat": "第一行两个数 $n,m$。\n\n接下来 $n$ 行每行两个数 $x_i,y_i$，$i=1,\\dots,n$。\n\n接下来 $m$ 行每行一个三个数表示一个询问 $A,B,C$。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示这个询问的答案。", "hint": "Idea：nzhtl1477&ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $A^2+B^2>0$，$|A|,|B|,|C|\\le 10^8$，$1\\le n,m\\le 2\\times 10^5$，$|x_i|,|y_i|\\le 10^4$，$x_i,y_i$ 均匀随机选取，但保证没有重复的点。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 10^3$。\n\n对于另外 $25\\%$ 的数据，满足 $A=0$。\n\n对于另外 $25\\%$ 的数据，满足 $C=0$。\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9997", "type": "P", "difficulty": 7, "samples": [["10 7 2\n1 2 3 2 3 3 3 3 7\n212111121\n2 1 4 21\n1 10 3 21\n1 9 7 22\n2 2 10 12\n2 6 8 11\n1 9 8 12\n2 4 7 11", "1\n1\n1\n0"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] pmpkmp", "background": "", "description": "给定一棵树，树上的每条边上有一个字符。给定一个常数 $X$。\n\n有两种操作，每次操作输入三个整数与一个字符串：\n\n`1 x y S`：对于 $x$ 到 $y$ 的有向简单路径上的边，将路径上的第 $i$ 条边上的字符替换为 $S$ 上的对应字符 $S_i$，保证这条 $x$ 到 $y$ 之间路径的边数为 $X$。\n\n`2 x y S`：查询 $x$ 到 $y$ 构成的有向简单路径所形成的字符串上，$S$ 匹配的次数（这里的匹配即：将 $S$ 当做模式串，在这条路径构成的字符串上逐位置匹配。）例如：$S=121$ ，路径上的字符串为 $1212122$，则匹配了2次，分别在第 $[1,3]$ 处和$[3,5]$ 处。\n\n上述所有字符串 $S$ 的下标从 $1$ 开始，保证每个输入的字符串长度均为 $X$。", "inputFormat": "第一行三个以空格分隔的整数 $n,m,X$。\n\n之后一行包含 $n-1$ 个数，第 $i$ 个数表示第 $i+1$ 个点的父亲 $f_{i+1}$，保证每个点父亲的编号比这个点的编号小。\n\n之后一行包含 $n-1$ 个字符，第 $i$ 个字符表示第 $i+1$ 个点到父亲的边上的字符 $a_{i+1}$。\n\n之后 $m$ 行，每行输入以空格隔开的三个整数 $opt,x,y$ 与一个长为 $X$ 的字符串 $S$，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次 $2$ 操作的答案。", "hint": "Idea：nzhtl1477，Solution：ComeIntoPower&nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m\\le 250$。\n\n对于另外 $10\\%$ 的数据，不存在 1 操作。\n\n对于另外 $10\\%$ 的数据，满足 $X=1$。\n\n对于另外 $10\\%$ 的数据，满足 $X\\le 3$。\n\n对于另外 $10\\%$ 的数据，满足 $X\\ge 20000$。\n\n对于另外 $10\\%$ 的数据，满足 $f_i=i-1$。\n\n对于另外 $10\\%$ 的数据，满足 $a_i\\le 1$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le n,m\\le 2.5\\times 10^4$，$mX\\le 2.5\\times 10^4$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le n,m\\le 2.5\\times 10^5$，$mX\\le 2.5\\times 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,X\\le 5\\times 10^5$，字符集为 $[1,9]$ 以内的整数，$mX\\le 5\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] pmpkmp", "background": "", "description": "给定一棵树，树上的每条边上有一个字符。给定一个常数 $X$。\n\n有两种操作，每次操作输入三个整数与一个字符串：\n\n`1 x y S`：对于 $x$ 到 $y$ 的有向简单路径上的边，将路径上的第 $i$ 条边上的字符替换为 $S$ 上的对应字符 $S_i$，保证这条 $x$ 到 $y$ 之间路径的边数为 $X$。\n\n`2 x y S`：查询 $x$ 到 $y$ 构成的有向简单路径所形成的字符串上，$S$ 匹配的次数（这里的匹配即：将 $S$ 当做模式串，在这条路径构成的字符串上逐位置匹配。）例如：$S=121$ ，路径上的字符串为 $1212122$，则匹配了2次，分别在第 $[1,3]$ 处和$[3,5]$ 处。\n\n上述所有字符串 $S$ 的下标从 $1$ 开始，保证每个输入的字符串长度均为 $X$。", "inputFormat": "第一行三个以空格分隔的整数 $n,m,X$。\n\n之后一行包含 $n-1$ 个数，第 $i$ 个数表示第 $i+1$ 个点的父亲 $f_{i+1}$，保证每个点父亲的编号比这个点的编号小。\n\n之后一行包含 $n-1$ 个字符，第 $i$ 个字符表示第 $i+1$ 个点到父亲的边上的字符 $a_{i+1}$。\n\n之后 $m$ 行，每行输入以空格隔开的三个整数 $opt,x,y$ 与一个长为 $X$ 的字符串 $S$，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次 $2$ 操作的答案。", "hint": "Idea：nzhtl1477，Solution：ComeIntoPower&nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m\\le 250$。\n\n对于另外 $10\\%$ 的数据，不存在 1 操作。\n\n对于另外 $10\\%$ 的数据，满足 $X=1$。\n\n对于另外 $10\\%$ 的数据，满足 $X\\le 3$。\n\n对于另外 $10\\%$ 的数据，满足 $X\\ge 20000$。\n\n对于另外 $10\\%$ 的数据，满足 $f_i=i-1$。\n\n对于另外 $10\\%$ 的数据，满足 $a_i\\le 1$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le n,m\\le 2.5\\times 10^4$，$mX\\le 2.5\\times 10^4$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le n,m\\le 2.5\\times 10^5$，$mX\\le 2.5\\times 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,X\\le 5\\times 10^5$，字符集为 $[1,9]$ 以内的整数，$mX\\le 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9998", "type": "P", "difficulty": 6, "samples": [["10 10\n2 1 2 1 8 3 2 1 2 2\n2 6 9 2\n2 3 10 2\n2 2 10 2\n2 1 3 2\n2 4 10 1\n1 2 4 2\n2 3 10 2\n2 2 7 1\n2 2 7 2\n2 3 6 2", "2\n20\n20\n2\n4\n30\n0\n9\n0"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] rfrqwq", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，每个位置是一个 $[1,n]$ 内的整数。\n\n定义 $f(i,j)$ 表示有多少 $x$ 满足 $i\\le x<j$ 且 $a_x\\neq a_{x+1}$。\n\n有 $m$ 次操作：\n\n`1 l r x`：表示将区间 $[l,r]$ 中所有元素都修改为 $x$。\n\n`2 l r x`：表示查询区间 $[l,r]$ 中，对任意 $l\\le i<j\\le r$，且 $a_i=a_j=x$，$f(i,j)$ 的和。\n", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个用空格隔开的数表示序列 $a$。\n\n之后 $m$ 行，每行四个用空格隔开的数 $opt,l,r,x$ 表示一次操作。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $1\\le n,m\\le 1000$。\n\n对于另外 $20\\%$ 的数据，没有 $1$ 操作。\n\n对于另外 $10\\%$ 的数据，数据中的操作类型在 $[1,2]$ 内， $a_i,x$ 在 $[1,100]$ 内均匀随机生成，区间 $[l,r]$ 两个端点为 $[1,n]$ 中均匀随机生成的整数，如果生成后 $l>r$，则将二者交换。\n\n对于另外 $30\\%$ 的数据，满足 $1\\le n,m\\le 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m \\le 5\\times10^5$，$1\\le l\\le r\\le n$，$1\\le a_i,x\\le n$，所有输入均为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] rfrqwq", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，每个位置是一个 $[1,n]$ 内的整数。\n\n定义 $f(i,j)$ 表示有多少 $x$ 满足 $i\\le x<j$ 且 $a_x\\neq a_{x+1}$。\n\n有 $m$ 次操作：\n\n`1 l r x`：表示将区间 $[l,r]$ 中所有元素都修改为 $x$。\n\n`2 l r x`：表示查询区间 $[l,r]$ 中，对任意 $l\\le i<j\\le r$，且 $a_i=a_j=x$，$f(i,j)$ 的和。\n", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个用空格隔开的数表示序列 $a$。\n\n之后 $m$ 行，每行四个用空格隔开的数 $opt,l,r,x$ 表示一次操作。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $1\\le n,m\\le 1000$。\n\n对于另外 $20\\%$ 的数据，没有 $1$ 操作。\n\n对于另外 $10\\%$ 的数据，数据中的操作类型在 $[1,2]$ 内， $a_i,x$ 在 $[1,100]$ 内均匀随机生成，区间 $[l,r]$ 两个端点为 $[1,n]$ 中均匀随机生成的整数，如果生成后 $l>r$，则将二者交换。\n\n对于另外 $30\\%$ 的数据，满足 $1\\le n,m\\le 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m \\le 5\\times10^5$，$1\\le l\\le r\\le n$，$1\\le a_i,x\\le n$，所有输入均为整数。", "locale": "zh-CN"}}}
{"pid": "P9999", "type": "P", "difficulty": 7, "samples": [["5 4 3\n1 1 3 3\n5 2 2 3\n3 4 5\n1 3 4\n1 2 1", "3\n2\n1"]], "limits": {"time": [12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] tmostnrq2", "background": "", "description": "给定 $n$ 个顶点的树，顶点编号为 $1,\\dots,n$，给定长度 $n_0$ 的序列 $a_1,\\dots,a_{n_0}$，共 $m$ 次查询，每次查询给定 $l,r,x$，问树的顶点 $x$，依次向 $a_l,\\dots,a_r$ 移动一步，到达的顶点。\n\n若 $x=y$，则从顶点 $x$ 向 $y$ 移动一步到达 $x$，否则到达与 $x$ 在树上相邻且距离 $y$ 最近的位置。", "inputFormat": "第一行三个整数 $n,n_0,m$；\n\n接下来一行 $n-1$ 个整数依次表示 $f_2,\\dots,f_n$，其中 $f_i$ 是顶点 $i$ 的父亲，$1$ 为根；\n\n接下来一行 $n_0$ 个整数，依次表示 $a_1,\\dots,a_{n_0}$；\n\n接下来 $m$ 行，每行三个整数 $l,r,x$ 表示一次查询。", "outputFormat": "共 $m$ 行，依次为每次查询的答案。", "hint": "Idea：Ynoi，Solution：zhoukangyang&ccz181078，Code：zhoukangyang，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,n_0,m\\le 10^6$；", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] tmostnrq2", "background": "", "description": "给定 $n$ 个顶点的树，顶点编号为 $1,\\dots,n$，给定长度 $n_0$ 的序列 $a_1,\\dots,a_{n_0}$，共 $m$ 次查询，每次查询给定 $l,r,x$，问树的顶点 $x$，依次向 $a_l,\\dots,a_r$ 移动一步，到达的顶点。\n\n若 $x=y$，则从顶点 $x$ 向 $y$ 移动一步到达 $x$，否则到达与 $x$ 在树上相邻且距离 $y$ 最近的位置。", "inputFormat": "第一行三个整数 $n,n_0,m$；\n\n接下来一行 $n-1$ 个整数依次表示 $f_2,\\dots,f_n$，其中 $f_i$ 是顶点 $i$ 的父亲，$1$ 为根；\n\n接下来一行 $n_0$ 个整数，依次表示 $a_1,\\dots,a_{n_0}$；\n\n接下来 $m$ 行，每行三个整数 $l,r,x$ 表示一次查询。", "outputFormat": "共 $m$ 行，依次为每次查询的答案。", "hint": "Idea：Ynoi，Solution：zhoukangyang&ccz181078，Code：zhoukangyang，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,n_0,m\\le 10^6$；", "locale": "zh-CN"}}}
