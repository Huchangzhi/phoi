{"pid": "P7708", "type": "P", "difficulty": 6, "samples": [["10 10\n2 3 4 8 7 4 8 4 1 2 \n3 5\n2 8 7\n1 3 6\n1 2 10\n2 2 4\n3 6\n2 8 2\n1 8 7\n3 7\n3 10\n10\n5 10\n1 7\n8 10\n1 10\n9 10\n2 9\n5 5\n8 9\n1 9\n2 7\n", "14\n11\n10\n17\n10\n8\n0\n8\n15\n4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["莫队", "O2优化", "分块"], "title": "「Wdsr-2.7」八云蓝自动机 Ⅰ", "background": "**注意：本题题意和 八云蓝自动机Ⅱ 并不一致，请仔细阅读**。\n\n作为八云紫的式神，八云蓝有着不同于其他一般式神的强大的计算能力。也就是说，八云蓝可以用自己的心算能力模拟出一台在现世中的确定性状态自动机。\n\n而这，就是传说中的\n\n$$\\textbf{\\textsf{「八云蓝自动机」}}$$\n\n当然，尽管八云蓝的计算能力可以用于模拟一台计算机的操作，但是由于其中并没有设定任何的程序，于是可以实现的功能只能通过学习得到。而作为幻想乡的闲者，八云紫教会了蓝有关于数组的知识。一个数组由若干个存储单元组成，每个单元都可以存储一个整数。\n\n而为了检测这种「八云蓝自动机」的可靠性，紫准备了一条非常简单的模拟题，用于测试蓝的心算能力。\n\n然而，尽管蓝可以很快（ $<10^{-9961}s$ ）得出结果，但是八云紫实在是懒得去构造标准答案了。因此，你被钦定计算出这条题目的答案。", "description": "八云蓝自动机维护了一个长度为 $n$ 的序列 $A$ ，每个元素都有一个初始值。同时自动机会支持以下三种操作：\n\n- $\\colorbox{f0f0f0}{\\verb!1 x k!}$ ：将 $A_x$ 的值修改为 $k$。\n\n- $\\colorbox{f0f0f0}{\\verb!2 x y!}$ ：交换 $A_x$ 与 $A_y$ 的值。\n\n- $\\colorbox{f0f0f0}{\\verb!3 x!}$ ：查询 $A_x$ 的值。\n\n为了测试八云蓝自动机的效率，紫需要进行非常非常多次的测试。为了生成每个测试的所有操作，紫构造出了一个长度为 $m$ 的**操作序列** $B$ ， $B$ 中的元素就是八云蓝自动机可以执行的一个操作。\n\n紫会向蓝发起一共 $q$ 次测试。每次测试，紫会给出一个二元组 $(l,r)$ ，含义是让八云蓝自动机**依次**执行 $B_l,B_{l+1},\\cdots B_r$ 这一共 $(r-l+1)$ 个操作。当然，紫不希望自动机的输出会太长，于是对于每次测试，你只要告诉她这些操作中所有操作 $3$ 的结果之和即可。注意：任意两次测试并**不会互相干扰**，每次操作结束后数列 $A$ 会回到初始状态。\n\n此外，紫不希望用非常非常大的数字刁难你，于是答案对 $2^{32}$ 取模就行了（即 $\\text{unsigned int}$ 自然溢出）。", "inputFormat": "- 第一行两个整数 $n,m$ ，含义如题面所示。\n\n- 第二行 $n$ 个整数，表示序列 $A$ 的初始值。\n\n- 接下来 $m$ 行，描述操作序列 $B$ 。对于每个操作，首先是一个整数 $op$ 描述操作的种类。\n\n  - 如果 $op = 1$，接下来两个整数 $x,k$ ，描述一个操作 $1$ 。\n\n  - 如果 $op = 2$，接下来两个整数 $x,y$ ，描述一个操作 $2$ 。\n\n  - 如果 $op = 3$，接下来一个整数 $x$ ，描述一个操作 $3$ 。\n\n- 接下来一行，一个整数 $q$，表示八云紫发起的测试总数。\n\n- 接下来 $q$ 行，每行有两个整数 $l,r$，描述一次测试，具体的执行方式如题面所示。", "outputFormat": "- 共 $q$ 行，每行一个整数，表示此次测试的结果。", "hint": "#### 数据范围及约定\n\n$$\\def\\arraystretch {1.5}\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n,m,q} & \\textbf{特殊性质} & \\textbf{分值}\\cr\\hline\n1 & 1\\le n,m,q\\le 10^3 & \\text{无} & 10 \\cr\\hline\n2 & \\text{无特殊限制} & \\text{无操作 1} & 20\\cr\\hline\n3 & \\text{无特殊限制} & \\text{无操作 2} & 20\\cr\\hline\n4 & \\text{无特殊限制} & \\text{操作 3 次数}\\le 10 & 20 \\cr\\hline\n5 & \\text{无特殊限制}& \\text{无}& 30 \\cr\\hline\n\\end{array}$$\n\n- 对于 $100\\%$ 的数据，满足：\n\n  - $1 \\le n,m,q \\le 2 \\times 10 ^ 5$ 。\n  \n  - $1 \\le a_i,k \\le 10^9;1 \\le op \\le 3;1 \\le x,y \\le n;x \\neq y $ 。\n  \n  - $1 \\le l \\le r \\le m$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-2.7」八云蓝自动机 Ⅰ", "background": "**注意：本题题意和 八云蓝自动机Ⅱ 并不一致，请仔细阅读**。\n\n作为八云紫的式神，八云蓝有着不同于其他一般式神的强大的计算能力。也就是说，八云蓝可以用自己的心算能力模拟出一台在现世中的确定性状态自动机。\n\n而这，就是传说中的\n\n$$\\textbf{\\textsf{「八云蓝自动机」}}$$\n\n当然，尽管八云蓝的计算能力可以用于模拟一台计算机的操作，但是由于其中并没有设定任何的程序，于是可以实现的功能只能通过学习得到。而作为幻想乡的闲者，八云紫教会了蓝有关于数组的知识。一个数组由若干个存储单元组成，每个单元都可以存储一个整数。\n\n而为了检测这种「八云蓝自动机」的可靠性，紫准备了一条非常简单的模拟题，用于测试蓝的心算能力。\n\n然而，尽管蓝可以很快（ $<10^{-9961}s$ ）得出结果，但是八云紫实在是懒得去构造标准答案了。因此，你被钦定计算出这条题目的答案。", "description": "八云蓝自动机维护了一个长度为 $n$ 的序列 $A$ ，每个元素都有一个初始值。同时自动机会支持以下三种操作：\n\n- $\\colorbox{f0f0f0}{\\verb!1 x k!}$ ：将 $A_x$ 的值修改为 $k$。\n\n- $\\colorbox{f0f0f0}{\\verb!2 x y!}$ ：交换 $A_x$ 与 $A_y$ 的值。\n\n- $\\colorbox{f0f0f0}{\\verb!3 x!}$ ：查询 $A_x$ 的值。\n\n为了测试八云蓝自动机的效率，紫需要进行非常非常多次的测试。为了生成每个测试的所有操作，紫构造出了一个长度为 $m$ 的**操作序列** $B$ ， $B$ 中的元素就是八云蓝自动机可以执行的一个操作。\n\n紫会向蓝发起一共 $q$ 次测试。每次测试，紫会给出一个二元组 $(l,r)$ ，含义是让八云蓝自动机**依次**执行 $B_l,B_{l+1},\\cdots B_r$ 这一共 $(r-l+1)$ 个操作。当然，紫不希望自动机的输出会太长，于是对于每次测试，你只要告诉她这些操作中所有操作 $3$ 的结果之和即可。注意：任意两次测试并**不会互相干扰**，每次操作结束后数列 $A$ 会回到初始状态。\n\n此外，紫不希望用非常非常大的数字刁难你，于是答案对 $2^{32}$ 取模就行了（即 $\\text{unsigned int}$ 自然溢出）。", "inputFormat": "- 第一行两个整数 $n,m$ ，含义如题面所示。\n\n- 第二行 $n$ 个整数，表示序列 $A$ 的初始值。\n\n- 接下来 $m$ 行，描述操作序列 $B$ 。对于每个操作，首先是一个整数 $op$ 描述操作的种类。\n\n  - 如果 $op = 1$，接下来两个整数 $x,k$ ，描述一个操作 $1$ 。\n\n  - 如果 $op = 2$，接下来两个整数 $x,y$ ，描述一个操作 $2$ 。\n\n  - 如果 $op = 3$，接下来一个整数 $x$ ，描述一个操作 $3$ 。\n\n- 接下来一行，一个整数 $q$，表示八云紫发起的测试总数。\n\n- 接下来 $q$ 行，每行有两个整数 $l,r$，描述一次测试，具体的执行方式如题面所示。", "outputFormat": "- 共 $q$ 行，每行一个整数，表示此次测试的结果。", "hint": "#### 数据范围及约定\n\n$$\\def\\arraystretch {1.5}\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n,m,q} & \\textbf{特殊性质} & \\textbf{分值}\\cr\\hline\n1 & 1\\le n,m,q\\le 10^3 & \\text{无} & 10 \\cr\\hline\n2 & \\text{无特殊限制} & \\text{无操作 1} & 20\\cr\\hline\n3 & \\text{无特殊限制} & \\text{无操作 2} & 20\\cr\\hline\n4 & \\text{无特殊限制} & \\text{操作 3 次数}\\le 10 & 20 \\cr\\hline\n5 & \\text{无特殊限制}& \\text{无}& 30 \\cr\\hline\n\\end{array}$$\n\n- 对于 $100\\%$ 的数据，满足：\n\n  - $1 \\le n,m,q \\le 2 \\times 10 ^ 5$ 。\n  \n  - $1 \\le a_i,k \\le 10^9;1 \\le op \\le 3;1 \\le x,y \\le n;x \\neq y $ 。\n  \n  - $1 \\le l \\le r \\le m$ 。", "locale": "zh-CN"}}}
{"pid": "P7709", "type": "P", "difficulty": 7, "samples": [["10 10\n12 11 6 6 1 18 9 1 13 20 \n2 1 8\n1 7 7 12\n2 4 10\n2 5 10\n2 9 5\n3 7\n1 4 8 7\n1 1 9 13\n3 5\n3 6\n10\n1 4 10\n3 3 3\n2 2 7\n1 4 6\n2 2 9\n1 8 8\n2 6 8\n2 6 8\n2 5 6\n1 4 9\n", "146\n0\n12\n42\n25\n60\n48\n48\n39\n94\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000], "memory": [131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「Wdsr-2.7」八云蓝自动机 Ⅱ", "background": "**注意：本题题意和 八云蓝自动机Ⅰ 并不一致，请仔细阅读**。\n\n作为八云紫的式神，八云蓝有着不同于其他一般式神的强大的计算能力。也就是说，八云蓝可以用自己的心算能力模拟出一台在现世中的确定性状态自动机。通过上一次的练习，八云蓝自动机变得更加强大了。\n\n而这，就是传说中的\n\n$$\\textbf{\\textsf{「八云蓝自动机$^{\\text{plus}}$」}}$$\n\n由于八云蓝自动机通过心算的方式进行运算，因此她还支持一项特异功能，就是一次对一整块数据进行操作。这加强了八云蓝自动机的优越性。\n\n当然，尽管八云蓝的计算能力可以用于模拟一台计算机的操作，但是由于其中并没有设定任何的程序，于是可以实现的功能只能通过学习得到。而作为幻想乡的闲者，八云紫教会了蓝有关于数组的知识。一个数组由若干个存储单元组成，每个单元都可以存储一个整数。\n\n而为了检测这种「八云蓝自动机」的可靠性，紫准备了一条非常简单的模拟题，用于测试蓝的心算能力。\n\n然而，尽管蓝可以很快（ $<10^{-10^{9961}}s$ ）得出结果，但是八云紫实在是懒得去构造标准答案了。因此，你被钦定计算出这条题目的答案。", "description": "八云蓝自动机维护了一个长度为 $n$ 的序列 $A$ ，每个元素都有一个初始值。同时自动机会支持以下三种操作：\n\n- $\\colorbox{f0f0f0}{\\verb!1 l r k!}$ ：将区间 $[l,r]$ 内的所有数字全都变为 $k$ ，即 $A_l\\gets k,A_{l+1}\\gets k,\\cdots ,A_r\\gets k$ 。\n\n- $\\colorbox{f0f0f0}{\\verb!2 x y!}$ ：交换 $A_x$ 与 $A_y$ 的值。\n\n- $\\colorbox{f0f0f0}{\\verb!3 x!}$ ：查询 $A_x$ 的值。\n\n为了测试八云蓝自动机的效率，紫需要进行非常非常多次的测试。为了生成每个测试的所有操作，紫构造出了一个长度为 $m$ 的**操作序列** $B$ ， $B$ 中的元素就是八云蓝自动机可以执行的一个操作。\n\n设 $\\Upsilon(l,r)$ 表示从初始状态开始，依次执行 $B_l,B_{l+1},\\cdots B_r$ 操作后，所有操作 $3$ 的结果之和。特别地，如果这些操作中没有操作 $3$ ，那么 $\\Upsilon(l,r)=0$ 。\n\n紫会向八云蓝自动机发起 $q$ 次询问，每次给出一组 $(l,r,p)$ ，八云蓝自动机需要计算出 \n\n$$\\left(\\sum_{i=l}^r \\Upsilon(i,p)\\right) \\mod 2^{32}$$", "inputFormat": "- 第一行两个整数 $n,m$ ，含义如题面所示。\n\n- 第二行 $n$ 个整数，表示序列 $A$ 的初始值。\n\n- 接下来 $m$ 行，描述操作序列 $B$ 。对于每个操作，首先是一个整数 $op$ 描述操作的种类。\n\n  - 如果 $op = 1$，接下来三个整数 $l,r,k$ ，描述一个操作 $1$ 。\n\n  - 如果 $op = 2$，接下来两个整数 $x,y$ ，描述一个操作 $2$ 。\n\n  - 如果 $op = 3$，接下来一个整数 $x$ ，描述一个操作 $3$ 。\n\n- 接下来一行，一个整数 $q$，表示八云紫发起的询问总数。\n\n- 接下来 $q$ 行，每行有三个整数 $l,r,p$，描述一次询问，具体执行方式如题面所示。\n", "outputFormat": "- 共 $q$ 行，每行一个整数，表示此次询问的结果。", "hint": "- 本题**有且仅有一个** $\\textbf{Subtask}$ 。在本 $\\text{Subtask}$ 中，前几组数据满足 $n,m,q \\le 5 \\times 10^3$，可供检验你的算法的正确性。\n\n- 对于 $100\\%$ 的数据，满足：\n\n  - $1 \\le n,m,q \\le 3 \\times 10 ^ 5$。\n\n  - $1 \\le a_i,k \\le 10^9;1 \\le op \\le 3;1 \\le x,y \\le n;x \\neq y$。\n    \n  - 对于所有操作，$1 \\le l \\le r \\le n$；对于所有查询 $1 \\le l \\le r \\le p \\le m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-2.7」八云蓝自动机 Ⅱ", "background": "**注意：本题题意和 八云蓝自动机Ⅰ 并不一致，请仔细阅读**。\n\n作为八云紫的式神，八云蓝有着不同于其他一般式神的强大的计算能力。也就是说，八云蓝可以用自己的心算能力模拟出一台在现世中的确定性状态自动机。通过上一次的练习，八云蓝自动机变得更加强大了。\n\n而这，就是传说中的\n\n$$\\textbf{\\textsf{「八云蓝自动机$^{\\text{plus}}$」}}$$\n\n由于八云蓝自动机通过心算的方式进行运算，因此她还支持一项特异功能，就是一次对一整块数据进行操作。这加强了八云蓝自动机的优越性。\n\n当然，尽管八云蓝的计算能力可以用于模拟一台计算机的操作，但是由于其中并没有设定任何的程序，于是可以实现的功能只能通过学习得到。而作为幻想乡的闲者，八云紫教会了蓝有关于数组的知识。一个数组由若干个存储单元组成，每个单元都可以存储一个整数。\n\n而为了检测这种「八云蓝自动机」的可靠性，紫准备了一条非常简单的模拟题，用于测试蓝的心算能力。\n\n然而，尽管蓝可以很快（ $<10^{-10^{9961}}s$ ）得出结果，但是八云紫实在是懒得去构造标准答案了。因此，你被钦定计算出这条题目的答案。", "description": "八云蓝自动机维护了一个长度为 $n$ 的序列 $A$ ，每个元素都有一个初始值。同时自动机会支持以下三种操作：\n\n- $\\colorbox{f0f0f0}{\\verb!1 l r k!}$ ：将区间 $[l,r]$ 内的所有数字全都变为 $k$ ，即 $A_l\\gets k,A_{l+1}\\gets k,\\cdots ,A_r\\gets k$ 。\n\n- $\\colorbox{f0f0f0}{\\verb!2 x y!}$ ：交换 $A_x$ 与 $A_y$ 的值。\n\n- $\\colorbox{f0f0f0}{\\verb!3 x!}$ ：查询 $A_x$ 的值。\n\n为了测试八云蓝自动机的效率，紫需要进行非常非常多次的测试。为了生成每个测试的所有操作，紫构造出了一个长度为 $m$ 的**操作序列** $B$ ， $B$ 中的元素就是八云蓝自动机可以执行的一个操作。\n\n设 $\\Upsilon(l,r)$ 表示从初始状态开始，依次执行 $B_l,B_{l+1},\\cdots B_r$ 操作后，所有操作 $3$ 的结果之和。特别地，如果这些操作中没有操作 $3$ ，那么 $\\Upsilon(l,r)=0$ 。\n\n紫会向八云蓝自动机发起 $q$ 次询问，每次给出一组 $(l,r,p)$ ，八云蓝自动机需要计算出 \n\n$$\\left(\\sum_{i=l}^r \\Upsilon(i,p)\\right) \\mod 2^{32}$$", "inputFormat": "- 第一行两个整数 $n,m$ ，含义如题面所示。\n\n- 第二行 $n$ 个整数，表示序列 $A$ 的初始值。\n\n- 接下来 $m$ 行，描述操作序列 $B$ 。对于每个操作，首先是一个整数 $op$ 描述操作的种类。\n\n  - 如果 $op = 1$，接下来三个整数 $l,r,k$ ，描述一个操作 $1$ 。\n\n  - 如果 $op = 2$，接下来两个整数 $x,y$ ，描述一个操作 $2$ 。\n\n  - 如果 $op = 3$，接下来一个整数 $x$ ，描述一个操作 $3$ 。\n\n- 接下来一行，一个整数 $q$，表示八云紫发起的询问总数。\n\n- 接下来 $q$ 行，每行有三个整数 $l,r,p$，描述一次询问，具体执行方式如题面所示。\n", "outputFormat": "- 共 $q$ 行，每行一个整数，表示此次询问的结果。", "hint": "- 本题**有且仅有一个** $\\textbf{Subtask}$ 。在本 $\\text{Subtask}$ 中，前几组数据满足 $n,m,q \\le 5 \\times 10^3$，可供检验你的算法的正确性。\n\n- 对于 $100\\%$ 的数据，满足：\n\n  - $1 \\le n,m,q \\le 3 \\times 10 ^ 5$。\n\n  - $1 \\le a_i,k \\le 10^9;1 \\le op \\le 3;1 \\le x,y \\le n;x \\neq y$。\n    \n  - 对于所有操作，$1 \\le l \\le r \\le n$；对于所有查询 $1 \\le l \\le r \\le p \\le m$。", "locale": "zh-CN"}}}
{"pid": "P7710", "type": "P", "difficulty": 6, "samples": [["5 5\n1 1 2 1\n1 1 5 4 1\n1 1 4 1 5\n1 2 1 0 4\n2 3\n2 1", "5\n0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "2077", "Ynoi"], "title": "[Ynoi2077] stdmxeypz", "background": "", "description": "给你一棵边权为 $1$，且以 $1$ 为根的有根树，每个点有初始为 $0$ 的点权值，定义两个点的距离为其在树上构成的简单路径的长度，需要支持两种操作：\n\n`1 a x y z`：把 $a$ 子树中所有与 $a$ 的距离模 $x$ 等于 $y$ 的节点权值加 $z$。\n\n`2 a`：查询 $a$ 节点的权值。", "inputFormat": "第一行两个整数 $n,m$ 表示树的节点数为 $n$，有 $m$ 次操作。\n\n第二行 $n-1$ 个整数，第 $i$ 个数 $f_i$ 表示树上第 $i+1$ 个节点的父亲节点。\n\n之后 $m$ 行，每行形如 `1 a x y z` 或 `2 a`，表示上述的操作。", "outputFormat": "对于每个 $2$ 操作，输出一行一个整数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\leq n , m\\leq 3\\times 10^5$，$1\\leq f_i\\leq i$，$1\\leq a\\leq n$，$1\\leq x\\leq n$，$0\\leq y < x$，$0 \\leq z < 514$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[Ynoi2077] stdmxeypz", "background": "", "description": "You are given a rooted tree with edge weight $1$ and root at node $1$. Each node has a node value initially equal to $0$. The distance between two nodes is defined as the length of the simple path between them in the tree. You need to support two types of operations:\n\n`1 a x y z`: For all nodes in the subtree of $a$ whose distance to $a$ modulo $x$ equals $y$, add $z$ to their node values.\n\n`2 a`: Query the node value of node $a$.", "inputFormat": "The first line contains two integers $n, m$, meaning the tree has $n$ nodes and there are $m$ operations.\n\nThe second line contains $n - 1$ integers. The $i$-th integer $f_i$ denotes the parent of node $i + 1$ in the tree.\n\nThen follow $m$ lines, each in the form `1 a x y z` or `2 a`, representing the operations above.", "outputFormat": "For each operation of type $2$, output one line with one integer representing the answer.", "hint": "Idea: nzhtl1477, Solution: nzhtl1477, Code: nzhtl1477, Data: nzhtl1477\n\nConstraints: For $100\\%$ of the testdata, $1\\leq n, m\\leq 3\\times 10^5$, $1\\leq f_i\\leq i$, $1\\leq a\\leq n$, $1\\leq x\\leq n$, $0\\leq y < x$, $0 \\leq z < 514$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Ynoi2077] stdmxeypz", "background": "", "description": "给你一棵边权为 $1$，且以 $1$ 为根的有根树，每个点有初始为 $0$ 的点权值，定义两个点的距离为其在树上构成的简单路径的长度，需要支持两种操作：\n\n`1 a x y z`：把 $a$ 子树中所有与 $a$ 的距离模 $x$ 等于 $y$ 的节点权值加 $z$。\n\n`2 a`：查询 $a$ 节点的权值。", "inputFormat": "第一行两个整数 $n,m$ 表示树的节点数为 $n$，有 $m$ 次操作。\n\n第二行 $n-1$ 个整数，第 $i$ 个数 $f_i$ 表示树上第 $i+1$ 个节点的父亲节点。\n\n之后 $m$ 行，每行形如 `1 a x y z` 或 `2 a`，表示上述的操作。", "outputFormat": "对于每个 $2$ 操作，输出一行一个整数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\leq n , m\\leq 3\\times 10^5$，$1\\leq f_i\\leq i$，$1\\leq a\\leq n$，$1\\leq x\\leq n$，$0\\leq y < x$，$0 \\leq z < 514$。\n", "locale": "zh-CN"}}}
{"pid": "P7711", "type": "P", "difficulty": 7, "samples": [["10 10\n5 8 4 10\n6 9 6 1\n1 2 7 4\n7 7 3 4\n9 1 5 5\n3 4 8 10\n8 6 1 3\n2 10 2 3\n4 5 9 2\n10 3 10 4\n9 4 2 9\n10 10 4 0\n3 6 1 0\n2 9 4 0\n4 9 4 0\n7 6 8 3\n4 4 7 0\n3 4 9 0\n7 2 9 8\n7 10 2 0", "0\n0\n0\n0\n0\n0\n12\n42\n12\n0"]], "limits": {"time": [36000], "memory": [524288]}, "tags": ["Special Judge", "O2优化", "2077", "Ynoi"], "title": "[Ynoi2077] 3dmq", "background": "这道题是 2077 年的 Ynoi 题，在 2077 年 77 岁的老爷爷 Ynoi 出题人无药可救，把数据范围开大了 $10^{100}$ 倍卡掉了所有高复杂度的算法。\n\n2076 年，苏联自觉已经无法与盟军势力抗衡，末代领导人夫尔巴乔戈发动了对盟军的战争，他们幻想着像 80 年代的军事演习一样，先核弹开路，再钢铁洪流，在一周内将红旗插遍英吉利海峡，然而苏联的科技进步缓慢，在 2076 年，苏军动员兵还在使用波波沙冲锋枪，引以为傲的天启坦克也不敌盟军新开发出的光棱坦克......\n\n在战败后，夫尔巴乔戈被民众吊在了路灯上继续发光发热，很快于 2077 年红旗落地，曾经庞然大物的苏联解体了。战争的刺激导致盟军开发出了大量的新科技，为了对付苏联人的核弹，盟军一直在秘密研发超时空传送仪，盟军利用超时空传送装置进行了很多随机传送测试，在一场测试中，一位前苏联的间谍突然开枪打死了实验的工程师，牺牲自己，将这道题传送到了 2021 年。这道题的意义极其重大，因为超时空传送本质上就是对高维空间的修改查询，能理解高维空间修改查询就能实现超时空传送！\n\n2021 年的苏联科学家接收到他们在 2077 年战败后苏联解体的消息，他们的心中充满了对无名英雄的敬佩以及对未来世界的恐慌，然而当 2021 年的苏联人解密来自 2077 年的信息后，他们惊恐地发现现有的评测机不能支持如此大规模的评测，所以只能开小数据范围。欢迎大家考虑使用高复杂度的算法来通过此题，来帮助苏联人打败盟军。", "description": "给定一个三维空间上 $n$ 个点，每个点有坐标 $X,Y,Z$，权值 $a,b$，$b$ 初始为 $0$。\n\n有 $m$ 个操作：\n\n`x y z w`：求所有 $X_i\\le x,Y_i\\le y,Z_i\\le z$ 的 $i$ 的 $b_i$ 的和，求和结束后，将所有 $X_i\\le x,Y_i\\le y,Z_i\\le z$ 的点 $i$，其 $b$ 权值加上 $a_i\\times w$。", "inputFormat": "第一行两个数 $n,m$。\n\n之后 $n$ 行，每行四个数 $X,Y,Z,a$ 意义如上述。\n\n之后 $m$ 行，每行四个数 $x,y,z,w$，意义如上述。", "outputFormat": "对每个操作，输出一行一个数表示答案。\n\n由于答案可能很大，所以只需要输出答案对 $2^{64}$ 取模的结果即可。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 5\\times 10^5$，初始点集以及权值为均匀随机生成，$X,Y,Z$ 为 $1$ 到 $n$ 的排列，$0\\le a,w\\le n$，操作为均匀随机生成，每次操作有 $0.8$ 的概率其 $w$ 为 $0$。\n\n本题按照你的程序正确回答的询问个数给分，若你的程序正确回答了前 $x$ 个询问，若 $2x\\le m$，你将得到 $\\lfloor\\frac{100x}{m}\\rfloor\\%$ 的分数，否则你将得到 $\\lfloor50+50\\times(\\frac{2x-m}{m})^2\\rfloor\\%$ 的分数。spj 将会在读取到第一个错误的答案或读取到输出末尾或读取完前 $m$ 行时终止读取，之后的信息将被忽略，请勿在行末添加空格。\n\n**注意：若你的程序 TLE，你将会得到 0 分。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2077] 3dmq", "background": "这道题是 2077 年的 Ynoi 题，在 2077 年 77 岁的老爷爷 Ynoi 出题人无药可救，把数据范围开大了 $10^{100}$ 倍卡掉了所有高复杂度的算法。\n\n2076 年，苏联自觉已经无法与盟军势力抗衡，末代领导人夫尔巴乔戈发动了对盟军的战争，他们幻想着像 80 年代的军事演习一样，先核弹开路，再钢铁洪流，在一周内将红旗插遍英吉利海峡，然而苏联的科技进步缓慢，在 2076 年，苏军动员兵还在使用波波沙冲锋枪，引以为傲的天启坦克也不敌盟军新开发出的光棱坦克......\n\n在战败后，夫尔巴乔戈被民众吊在了路灯上继续发光发热，很快于 2077 年红旗落地，曾经庞然大物的苏联解体了。战争的刺激导致盟军开发出了大量的新科技，为了对付苏联人的核弹，盟军一直在秘密研发超时空传送仪，盟军利用超时空传送装置进行了很多随机传送测试，在一场测试中，一位前苏联的间谍突然开枪打死了实验的工程师，牺牲自己，将这道题传送到了 2021 年。这道题的意义极其重大，因为超时空传送本质上就是对高维空间的修改查询，能理解高维空间修改查询就能实现超时空传送！\n\n2021 年的苏联科学家接收到他们在 2077 年战败后苏联解体的消息，他们的心中充满了对无名英雄的敬佩以及对未来世界的恐慌，然而当 2021 年的苏联人解密来自 2077 年的信息后，他们惊恐地发现现有的评测机不能支持如此大规模的评测，所以只能开小数据范围。欢迎大家考虑使用高复杂度的算法来通过此题，来帮助苏联人打败盟军。", "description": "给定一个三维空间上 $n$ 个点，每个点有坐标 $X,Y,Z$，权值 $a,b$，$b$ 初始为 $0$。\n\n有 $m$ 个操作：\n\n`x y z w`：求所有 $X_i\\le x,Y_i\\le y,Z_i\\le z$ 的 $i$ 的 $b_i$ 的和，求和结束后，将所有 $X_i\\le x,Y_i\\le y,Z_i\\le z$ 的点 $i$，其 $b$ 权值加上 $a_i\\times w$。", "inputFormat": "第一行两个数 $n,m$。\n\n之后 $n$ 行，每行四个数 $X,Y,Z,a$ 意义如上述。\n\n之后 $m$ 行，每行四个数 $x,y,z,w$，意义如上述。", "outputFormat": "对每个操作，输出一行一个数表示答案。\n\n由于答案可能很大，所以只需要输出答案对 $2^{64}$ 取模的结果即可。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 5\\times 10^5$，初始点集以及权值为均匀随机生成，$X,Y,Z$ 为 $1$ 到 $n$ 的排列，$0\\le a,w\\le n$，操作为均匀随机生成，每次操作有 $0.8$ 的概率其 $w$ 为 $0$。\n\n本题按照你的程序正确回答的询问个数给分，若你的程序正确回答了前 $x$ 个询问，若 $2x\\le m$，你将得到 $\\lfloor\\frac{100x}{m}\\rfloor\\%$ 的分数，否则你将得到 $\\lfloor50+50\\times(\\frac{2x-m}{m})^2\\rfloor\\%$ 的分数。spj 将会在读取到第一个错误的答案或读取到输出末尾或读取完前 $m$ 行时终止读取，之后的信息将被忽略，请勿在行末添加空格。\n\n**注意：若你的程序 TLE，你将会得到 0 分。**", "locale": "zh-CN"}}}
{"pid": "P7712", "type": "P", "difficulty": 7, "samples": [["10\n1 4\n2 7\n1 6\n3 7\n2 4\n1 9\n1 3\n9 10\n3 5\n1 7\n1 7\n1 3\n1 3\n3 7\n1 2\n3 5\n1 7\n5 7\n3 9\n9 10", "0100010000\n1001000010"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "2077", "Ynoi"], "title": "[Ynoi2077] hlcpq", "background": "", "description": "平面上，给出 $n$ 条水平线段和 $n$ 条竖直线段，保证不同线段不在同一直线上。\n\n若两线段有交点则它们连通，若 $a, b$ 连通且 $b, c$ 连通则 $a, c$ 连通。\n\n一条线段 $a$ 是关键的，当且仅当存在另外两条线段 $b, c$，使得 $b, c$ 连通，且删去 $a$ 后 $b, c$ 不连通。\n", "inputFormat": "第一行一个整数 $n$ 。\n\n接下来 $n$ 行，第 $i$ 行有两个整数 $l, r$（$1 \\le l < r \\le n$），表示一条水平线段 $l \\le x \\le r$，$y=i$。\n\n接下来 $n$ 行，第 $i$ 行有两个整数 $d, u$（$1 \\le d < u \\le n$），表示一条竖直线段 $x = i$，$d \\le y \\le u$。", "outputFormat": "输出两行，每行是一个长度为 $n$ 的 $01$ 串。\n\n第一行第 $i$ 位为 $1$ 当且仅当第 $i$ 条水平线段是关键的。\n\n第二行第 $i$ 位为 $1$ 当且仅当第 $i$ 条竖直线段是关键的。\n", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078&nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $2 \\le n \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2077] hlcpq", "background": "", "description": "平面上，给出 $n$ 条水平线段和 $n$ 条竖直线段，保证不同线段不在同一直线上。\n\n若两线段有交点则它们连通，若 $a, b$ 连通且 $b, c$ 连通则 $a, c$ 连通。\n\n一条线段 $a$ 是关键的，当且仅当存在另外两条线段 $b, c$，使得 $b, c$ 连通，且删去 $a$ 后 $b, c$ 不连通。\n", "inputFormat": "第一行一个整数 $n$ 。\n\n接下来 $n$ 行，第 $i$ 行有两个整数 $l, r$（$1 \\le l < r \\le n$），表示一条水平线段 $l \\le x \\le r$，$y=i$。\n\n接下来 $n$ 行，第 $i$ 行有两个整数 $d, u$（$1 \\le d < u \\le n$），表示一条竖直线段 $x = i$，$d \\le y \\le u$。", "outputFormat": "输出两行，每行是一个长度为 $n$ 的 $01$ 串。\n\n第一行第 $i$ 位为 $1$ 当且仅当第 $i$ 条水平线段是关键的。\n\n第二行第 $i$ 位为 $1$ 当且仅当第 $i$ 条竖直线段是关键的。\n", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078&nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $2 \\le n \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P7713", "type": "P", "difficulty": 2, "samples": [["3 2\n1 2 3", "3"], ["4 3\n1 2 2 3", "6"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "贪心", "二分"], "title": "「EZEC-10」打分", "background": "**为防止评测机被卡，本题时限为 100 ms。**", "description": "小 A 去参加奥运会。\n\n奥运会中共有 $n$ 名裁判，分别给小 A 打分 $a_1,a_2,\\ldots,a_n$。\n\n小 A 对自己的得分不满意，于是他将某名裁判打出的分数加 $1$，称为一次操作。\n\n但是小 A 不能太贪心，他最多只能进行 $m$ 次操作。\n\n小 A 的最终得分为：所有得分中，去掉一个最高分和一个最低分后的平均值。\n\n小 A 想知道，他的最终得分最高为多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$。", "outputFormat": "为了方便输出，小 A 只需知道**最终得分$\\times (n-2)$** 为多少就可以了。", "hint": "**【样例 1 解释】**\n\n一种可行的方案为：$[1,2,3]\\to [3,2,3]$。\n\n**【样例 2 解释】**\n\n一种可行的方案为：$[1,2,2,3]\\to [2,3,3,3]$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 points）：$m=0$。\n- Subtask 2（10 points）：$n=3$。\n- Subtask 3（15 points）：$n,m\\le 10^3$。\n- Subtask 4（70 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$3\\le n\\le 10^5$，$0\\le m,a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-10」打分", "background": "**为防止评测机被卡，本题时限为 100 ms。**", "description": "小 A 去参加奥运会。\n\n奥运会中共有 $n$ 名裁判，分别给小 A 打分 $a_1,a_2,\\ldots,a_n$。\n\n小 A 对自己的得分不满意，于是他将某名裁判打出的分数加 $1$，称为一次操作。\n\n但是小 A 不能太贪心，他最多只能进行 $m$ 次操作。\n\n小 A 的最终得分为：所有得分中，去掉一个最高分和一个最低分后的平均值。\n\n小 A 想知道，他的最终得分最高为多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$。", "outputFormat": "为了方便输出，小 A 只需知道**最终得分$\\times (n-2)$** 为多少就可以了。", "hint": "**【样例 1 解释】**\n\n一种可行的方案为：$[1,2,3]\\to [3,2,3]$。\n\n**【样例 2 解释】**\n\n一种可行的方案为：$[1,2,2,3]\\to [2,3,3,3]$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 points）：$m=0$。\n- Subtask 2（10 points）：$n=3$。\n- Subtask 3（15 points）：$n,m\\le 10^3$。\n- Subtask 4（70 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$3\\le n\\le 10^5$，$0\\le m,a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7714", "type": "P", "difficulty": 2, "samples": [["2\n3\n1 3 2\n4\n3 2 1 4", "2\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "﻿基础算法", "构造", "差分", "双指针 two-pointer"], "title": "「EZEC-10」排列排序", "background": "", "description": "给你一个长度为 $n$ 的排列 $p_1,p_2, \\cdots ,p_n$。你需要把它排序。\n\n每次可以花区间长度，即 $r-l+1$ 的代价，选择排列中的任意一段区间 $[l,r]$，并将 $[l,r]$ 从小到大排序。\n\n现在你可以让他进行若干次这个操作，直到 $p$ 中元素的值从 $1$ 到 $n$ 按升序排序，即对于 $1$ 到 $n$ 的每一个 $i$，都有 $p_i=i$。\n\n求问花的代价最少为多少？", "inputFormat": "本题有多组询问，第一行有一个数 $T$ 表示询问组数。\n\n对于每组询问：\n\n第一行给出一个整数 $n$。\n\n第二行 $n$ 个整数，由空格隔开，代表排列 $p$ 中元素的值。", "outputFormat": "$T$ 行，每行一个整数表示一组询问的答案。", "hint": "【样例 $1$ 说明】\n\n对于第一组数据，可选择区间 $[2,3]$ 进行排序。\n\n对于第二组数据，可选择区间 $[1,3]$ 进行排序。\n\n【数据规模与约定】\n\n对于 $20\\%$ 的数据，$n\\leq 4$。\n\n对于另 $30\\%$ 的数据，$\\sum n\\leq5000$。\n\n对于另 $10\\%$ 的数据，$p_1=n$。\n\n对于 $100\\%$ 的数据，$1\\le T,\\sum n\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-10」排列排序", "background": "", "description": "给你一个长度为 $n$ 的排列 $p_1,p_2, \\cdots ,p_n$。你需要把它排序。\n\n每次可以花区间长度，即 $r-l+1$ 的代价，选择排列中的任意一段区间 $[l,r]$，并将 $[l,r]$ 从小到大排序。\n\n现在你可以让他进行若干次这个操作，直到 $p$ 中元素的值从 $1$ 到 $n$ 按升序排序，即对于 $1$ 到 $n$ 的每一个 $i$，都有 $p_i=i$。\n\n求问花的代价最少为多少？", "inputFormat": "本题有多组询问，第一行有一个数 $T$ 表示询问组数。\n\n对于每组询问：\n\n第一行给出一个整数 $n$。\n\n第二行 $n$ 个整数，由空格隔开，代表排列 $p$ 中元素的值。", "outputFormat": "$T$ 行，每行一个整数表示一组询问的答案。", "hint": "【样例 $1$ 说明】\n\n对于第一组数据，可选择区间 $[2,3]$ 进行排序。\n\n对于第二组数据，可选择区间 $[1,3]$ 进行排序。\n\n【数据规模与约定】\n\n对于 $20\\%$ 的数据，$n\\leq 4$。\n\n对于另 $30\\%$ 的数据，$\\sum n\\leq5000$。\n\n对于另 $10\\%$ 的数据，$p_1=n$。\n\n对于 $100\\%$ 的数据，$1\\le T,\\sum n\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P7715", "type": "P", "difficulty": 4, "samples": [["3 4\n1 0 0 0\n1 1 0 0\n1 0 0 0", "1"], ["5 3\n0 1 0\n0 1 0\n0 0 0\n0 1 0\n0 1 0", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 500, 500, 500, 500, 500, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["树状数组", "排序"], "title": "「EZEC-10」Shape", "background": "规定 $(x,y)$ 表示第 $x$ 行第 $y$ 列的格子。", "description": "小 A 有一个 $n\\times m$ 的网格，一些为白色格子，剩余为黑色格子。\n\n小 A 选择四个整数 $x_1,x_2,y_1,y_2$，满足如下条件：\n\n1. $1\\le x_1<x_2\\le n$ 且 $1\\le y_1<y_2\\le m$。\n2. $x_1+x_2$ 为偶数。\n\n若 $(x_1,y_1)\\to (x_2,y_1),(x_1,y_2)\\to (x_2,y_2),(\\frac{x_1+x_2}{2},y_1)\\to (\\frac{x_1+x_2}{2},y_2)$ 这三段中的格子均为白色，则称这三段构成的图形为 H 形。\n\n小 A 想知道，这个网格中存在多少不同的 H 形。\n\n**两个 H 形相同，当且仅当两个 H 形的 $x_1,x_2,y_1,y_2$ 均相同。**", "inputFormat": "第一行两个整数 $n,m$。\n\n后 $n$ 行每行 $m$ 个整数表示网格，其中 $0$ 代表白色，$1$ 代表黑色。", "outputFormat": "一个整数，表示不同 H 形的数量。", "hint": "**【样例 1 解释】**\n\n$(x_1,x_2,y_1,y_2)=(1,3,3,4)$ 的 H 形符合。\n\n**【样例 2 解释】**\n\n$(x_1,x_2,y_1,y_2)=(1,5,1,3),(2,4,1,3)$ 的 H 形符合。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（1 point）：$n=2$。\n- Subtask 2（9 points）：$ n,m\\le 50$。\n- Subtask 3（10 points）：$ n,m\\le 100$，**时限为 $500ms$**。\n- Subtask 4（30 points）：$ n,m\\le 500$。\n- Subtask 5（50 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n,m\\le 2\\times 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-10」Shape", "background": "规定 $(x,y)$ 表示第 $x$ 行第 $y$ 列的格子。", "description": "小 A 有一个 $n\\times m$ 的网格，一些为白色格子，剩余为黑色格子。\n\n小 A 选择四个整数 $x_1,x_2,y_1,y_2$，满足如下条件：\n\n1. $1\\le x_1<x_2\\le n$ 且 $1\\le y_1<y_2\\le m$。\n2. $x_1+x_2$ 为偶数。\n\n若 $(x_1,y_1)\\to (x_2,y_1),(x_1,y_2)\\to (x_2,y_2),(\\frac{x_1+x_2}{2},y_1)\\to (\\frac{x_1+x_2}{2},y_2)$ 这三段中的格子均为白色，则称这三段构成的图形为 H 形。\n\n小 A 想知道，这个网格中存在多少不同的 H 形。\n\n**两个 H 形相同，当且仅当两个 H 形的 $x_1,x_2,y_1,y_2$ 均相同。**", "inputFormat": "第一行两个整数 $n,m$。\n\n后 $n$ 行每行 $m$ 个整数表示网格，其中 $0$ 代表白色，$1$ 代表黑色。", "outputFormat": "一个整数，表示不同 H 形的数量。", "hint": "**【样例 1 解释】**\n\n$(x_1,x_2,y_1,y_2)=(1,3,3,4)$ 的 H 形符合。\n\n**【样例 2 解释】**\n\n$(x_1,x_2,y_1,y_2)=(1,5,1,3),(2,4,1,3)$ 的 H 形符合。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（1 point）：$n=2$。\n- Subtask 2（9 points）：$ n,m\\le 50$。\n- Subtask 3（10 points）：$ n,m\\le 100$，**时限为 $500ms$**。\n- Subtask 4（30 points）：$ n,m\\le 500$。\n- Subtask 5（50 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n,m\\le 2\\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P7716", "type": "P", "difficulty": 4, "samples": [["1\n2 2 4 2 4\n1 2\n3 3", "2"], ["2\n2 2 4 2 3\n0 0\n2 2\n2 2 4 2 2\n1 1\n3 3", "1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP"], "title": "「EZEC-10」Covering", "background": "", "description": "给你一个 $n\\times m$ 的棋盘和 $k$ 张 $1\\times 2$ 的纸片，编号 $1$ 到 $k$。\n\n你可以任意选择数量在 $[l,r]$ 内的纸片，并按照编号从小到大的顺序，依次横放或竖放在棋盘上。\n\n**注意：后放的纸片会覆盖在先放的纸片上。**\n\n给定最终棋盘中每个格子上的纸片编号，求满足条件的不同方案数，并对 $10^9+7$ 取模。\n\n**两种方案相同，当且仅当两方案选择的纸片数量、纸片编号及每张纸片的摆放位置均相同。**", "inputFormat": "第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行五个整数 $n,m,k,l,r$。\n- 后 $n$ 行每行 $m$ 个整数，表示最终棋盘中每个格子上的纸片编号，若某格子未被覆盖则编号记为 $0$。\n- **数据保证至少存在一种可行的方案。**", "outputFormat": "对于每组数据：\n\n- 一行一个整数，表示方案数对 $10^9+7$ 取模的结果。", "hint": "**【样例 1 解释】**\n\n不难发现只能取编号为 $1,2,3$ 的纸片，此时共有 $2$ 种方案：\n\n$1:(1,1)\\to (1,2)$，$2:(1,2)\\to (2,2)$，$3:(2,1)\\to (2,2)$；\n\n$1:(1,1)\\to (2,1)$，$2:(1,2)\\to (2,2)$，$3:(2,1)\\to (2,2)$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$r=1$。\n-  Subtask 2（10 points）：$n,m,k\\le 5$。\n-  Subtask 3（15 points）：$l=k$。\n-  Subtask 4（20 points）：$n\\times m\\le 10^3$。\n-  Subtask 5（50 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10$，$2\\le n,m,k\\le 10^3$，$1\\le l\\le r\\le k$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-10」Covering", "background": "", "description": "给你一个 $n\\times m$ 的棋盘和 $k$ 张 $1\\times 2$ 的纸片，编号 $1$ 到 $k$。\n\n你可以任意选择数量在 $[l,r]$ 内的纸片，并按照编号从小到大的顺序，依次横放或竖放在棋盘上。\n\n**注意：后放的纸片会覆盖在先放的纸片上。**\n\n给定最终棋盘中每个格子上的纸片编号，求满足条件的不同方案数，并对 $10^9+7$ 取模。\n\n**两种方案相同，当且仅当两方案选择的纸片数量、纸片编号及每张纸片的摆放位置均相同。**", "inputFormat": "第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行五个整数 $n,m,k,l,r$。\n- 后 $n$ 行每行 $m$ 个整数，表示最终棋盘中每个格子上的纸片编号，若某格子未被覆盖则编号记为 $0$。\n- **数据保证至少存在一种可行的方案。**", "outputFormat": "对于每组数据：\n\n- 一行一个整数，表示方案数对 $10^9+7$ 取模的结果。", "hint": "**【样例 1 解释】**\n\n不难发现只能取编号为 $1,2,3$ 的纸片，此时共有 $2$ 种方案：\n\n$1:(1,1)\\to (1,2)$，$2:(1,2)\\to (2,2)$，$3:(2,1)\\to (2,2)$；\n\n$1:(1,1)\\to (2,1)$，$2:(1,2)\\to (2,2)$，$3:(2,1)\\to (2,2)$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$r=1$。\n-  Subtask 2（10 points）：$n,m,k\\le 5$。\n-  Subtask 3（15 points）：$l=k$。\n-  Subtask 4（20 points）：$n\\times m\\le 10^3$。\n-  Subtask 5（50 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10$，$2\\le n,m,k\\le 10^3$，$1\\le l\\le r\\le k$。", "locale": "zh-CN"}}}
{"pid": "P7717", "type": "P", "difficulty": 5, "samples": [["3 1 2\n1 2 1", "6"], ["5 1 12\n1 2 3\n", "26364"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "O2优化", "深度优先搜索 DFS", "数位 DP", "图论建模", "字典树 Trie", "位运算"], "title": "「EZEC-10」序列", "background": "> 精准的解析刻画，是应该首先尝试的突破口。\n\n——command_block 《考前小贴士》", "description": "请问有多少个不同的序列 $a$，满足：\n1. $a$ 的长度为 $n$。\n2. $a$ 中的元素均为不大于 $k$ 的非负整数。\n3. 满足 $m$ 组形如 $(x_i,y_i,z_i)$ 且 $x_i<y_i$ 的限制，每组限制的意义为 $a_{x_i} \\oplus a_{y_i} = z_i$ （$\\oplus$ 表示按位异或运算）。\n\n两个序列相同，当且仅当它们所有元素均相同。\n\n请输出答案对 $10^9+7$ []($114514\\times(114\\times5\\times14+((1+145)\\times(1+4)+(1\\times14+5-1+4)))+(114\\times514+(11\\times(451+4)+(-1+145+14)))$)取模的结果。", "inputFormat": "输入共 $m+1$ 行：\n- 第一行三个数，$n,m,k$。\n- 接下来 $m$ 行，每行 $3$ 个数，$x_i,y_i,z_i$。", "outputFormat": "输出仅一行，表示答案对 $10^9+7$ 取模的结果。", "hint": "【样例 $1$ 说明】\n\n共有 $6$ 种序列：$\\{0,1,0\\},\\{0,1,1\\},\\{0,1,2\\},\\{1,0,0\\},\\{1,0,1\\},\\{1,0,2\\}$。\n\n【数据规模与约定】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（1 point）：$n=1$。\n- Subtask 2（5 points）：$m=0$。\n- Subtask 3（15 points）：$n,m,k\\le 5$。\n- Subtask 4（10 points）：$z_i=0$。\n- Subtask 5（20 points）：$k\\le 16$。\n- Subtask 6（2 points）：数据随机。\n- Subtask 7（47 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 5 \\times 10^5$，$0 \\le m \\le 5 \\times 10^5$，$0 \\le z_i<2^{30}$，$1 \\leq k< 2^{30}$，$1\\le x_i,y_i\\le n$。\n\n【提示】\n\n如果你不知道什么是异或，请点击[这里](https://baike.baidu.com/item/%E5%BC%82%E6%88%96#:~:text=%E5%BC%82%E6%88%96%E4%B9%9F%E5%8F%AB%E5%8D%8A,%E8%AE%A4%E4%BD%9C%E4%B8%8D%E8%BF%9B%E4%BD%8D%E5%8A%A0%E6%B3%95%E3%80%82&text=%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%9C%89%E4%B8%89%E7%A7%8D%E6%BC%94%E7%AE%97%E5%AD%90%EF%BC%9AXOR%E3%80%81eor%E3%80%81%E2%8A%95%E3%80%82)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-10」序列", "background": "> 精准的解析刻画，是应该首先尝试的突破口。\n\n——command_block 《考前小贴士》", "description": "请问有多少个不同的序列 $a$，满足：\n1. $a$ 的长度为 $n$。\n2. $a$ 中的元素均为不大于 $k$ 的非负整数。\n3. 满足 $m$ 组形如 $(x_i,y_i,z_i)$ 且 $x_i<y_i$ 的限制，每组限制的意义为 $a_{x_i} \\oplus a_{y_i} = z_i$ （$\\oplus$ 表示按位异或运算）。\n\n两个序列相同，当且仅当它们所有元素均相同。\n\n请输出答案对 $10^9+7$ []($114514\\times(114\\times5\\times14+((1+145)\\times(1+4)+(1\\times14+5-1+4)))+(114\\times514+(11\\times(451+4)+(-1+145+14)))$)取模的结果。", "inputFormat": "输入共 $m+1$ 行：\n- 第一行三个数，$n,m,k$。\n- 接下来 $m$ 行，每行 $3$ 个数，$x_i,y_i,z_i$。", "outputFormat": "输出仅一行，表示答案对 $10^9+7$ 取模的结果。", "hint": "【样例 $1$ 说明】\n\n共有 $6$ 种序列：$\\{0,1,0\\},\\{0,1,1\\},\\{0,1,2\\},\\{1,0,0\\},\\{1,0,1\\},\\{1,0,2\\}$。\n\n【数据规模与约定】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（1 point）：$n=1$。\n- Subtask 2（5 points）：$m=0$。\n- Subtask 3（15 points）：$n,m,k\\le 5$。\n- Subtask 4（10 points）：$z_i=0$。\n- Subtask 5（20 points）：$k\\le 16$。\n- Subtask 6（2 points）：数据随机。\n- Subtask 7（47 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 5 \\times 10^5$，$0 \\le m \\le 5 \\times 10^5$，$0 \\le z_i<2^{30}$，$1 \\leq k< 2^{30}$，$1\\le x_i,y_i\\le n$。\n\n【提示】\n\n如果你不知道什么是异或，请点击[这里](https://baike.baidu.com/item/%E5%BC%82%E6%88%96#:~:text=%E5%BC%82%E6%88%96%E4%B9%9F%E5%8F%AB%E5%8D%8A,%E8%AE%A4%E4%BD%9C%E4%B8%8D%E8%BF%9B%E4%BD%8D%E5%8A%A0%E6%B3%95%E3%80%82&text=%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%9C%89%E4%B8%89%E7%A7%8D%E6%BC%94%E7%AE%97%E5%AD%90%EF%BC%9AXOR%E3%80%81eor%E3%80%81%E2%8A%95%E3%80%82)。", "locale": "zh-CN"}}}
{"pid": "P7718", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3", "2\n16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["状压 DP"], "title": "「EZEC-10」Equalization", "background": "", "description": "给你一个长为 $n$ 的数组 $a_1,a_2,\\ldots,a_n$。\n\n你可以任选三个整数 $l,r,x\\ (1\\le l\\le r\\le n$，$x\\in \\mathbb Z)$，并将 $a_l,a_{l+1},\\ldots,a_r$ 均加上 $x$，称为一次操作。\n\n问最少进行几次操作，才能使 $a$ 中所有元素均相等？并求出能使操作次数最少的不同方案数。\n\n由于方案数可能很大，请对 $10^9+7$ 取模。\n\n**两种方案相同，当且仅当两方案每次操作选择的 $(l,r,x)$ 均相同。**\n\n**特别地，不进行任何操作也算一种方案。**", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$。", "outputFormat": "第一行一个整数，表示最少操作次数。\n\n第二行一个整数，表示方案数对 $10^9+7$ 取模的结果。", "hint": "**【样例 1 解释】**\n\n一种可行的方案为：$(l,r,x)=(1,1,1),(3,3,-1)$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（1 point）：$n=2$。\n-  Subtask 2（5 points）：$n=3$。\n-  Subtask 3（14 points）：保证 $a$ 单调不升或单调不降。\n-  Subtask 4（20 points）：$n\\le 10$。\n-  Subtask 5（20 points）：$n\\le 16$。\n-  Subtask 6（40 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 18$，$-10^9\\le a\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-10」Equalization", "background": "", "description": "给你一个长为 $n$ 的数组 $a_1,a_2,\\ldots,a_n$。\n\n你可以任选三个整数 $l,r,x\\ (1\\le l\\le r\\le n$，$x\\in \\mathbb Z)$，并将 $a_l,a_{l+1},\\ldots,a_r$ 均加上 $x$，称为一次操作。\n\n问最少进行几次操作，才能使 $a$ 中所有元素均相等？并求出能使操作次数最少的不同方案数。\n\n由于方案数可能很大，请对 $10^9+7$ 取模。\n\n**两种方案相同，当且仅当两方案每次操作选择的 $(l,r,x)$ 均相同。**\n\n**特别地，不进行任何操作也算一种方案。**", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$。", "outputFormat": "第一行一个整数，表示最少操作次数。\n\n第二行一个整数，表示方案数对 $10^9+7$ 取模的结果。", "hint": "**【样例 1 解释】**\n\n一种可行的方案为：$(l,r,x)=(1,1,1),(3,3,-1)$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（1 point）：$n=2$。\n-  Subtask 2（5 points）：$n=3$。\n-  Subtask 3（14 points）：保证 $a$ 单调不升或单调不降。\n-  Subtask 4（20 points）：$n\\le 10$。\n-  Subtask 5（20 points）：$n\\le 16$。\n-  Subtask 6（40 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 18$，$-10^9\\le a\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7719", "type": "P", "difficulty": 7, "samples": [["0 7 2 1\n1 5 3\n4 7 2\n1 7", "3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树形数据结构", "2021", "洛谷原创", "O2优化"], "title": "「EZEC-10」多彩的线段", "background": "", "description": "```Muxii```有一个 $[1,n]$ 的数轴，$m$ 种颜色的线段。  \n```Muxii```规定，对于第 $i$ 种颜色，仅有 $[l_i,r_i]$ 部分的数轴允许覆盖线段，且每条线段的长度不能超过 $k_i$ $(k_i≤10)$。线段可以有任意多条。  \n现在```Muxii```将会询问你 $q$ 次，每次询问给出两个数字 $a$、$b$，请你回答若要覆盖 $[a,b]$ 部分的数轴最少需要几条线段。  \n数据保证数轴上不存在不能被任何线段覆盖的位置。", "inputFormat": "**本题部分数据点强制在线。**  \n第一行四个数 $o$、$n$、$m$、$q$，其中当 $o=1$ 时，该数据点强制在线，即每次给出的 $a$、$b$ 异或上次询问的答案的结果为真正的 $a$、$b$，当第一次询问时，可认为上一次询问的答案为 $0$；当 $o=0$ 时，该数据点不强制在线。  \n接下来 $m$ 行，每行三个数 $l_i$、$r_i$、$k_i$；  \n再接下来 $q$ 行，每行两个数 $a$、$b$。以上未解释的变量意义皆已在题目描述中给出。", "outputFormat": "共 $q$ 行，每行一个数表示答案。", "hint": "【样例 $1$ 说明】\n\n最少需要 $3$ 条线段。下面给出一种可行的解决方案：  \n第 $1$ 条线段为 $[1,4]$ ，颜色为 $1$；  \n第 $2$ 条线段为 $[4,6]$ ，颜色为 $2$；  \n第 $3$ 条线段为 $[6,7]$ ，颜色为 $2$。\n\n【数据范围与约定】\n\n- Subtask 1（5 points）：$n,m,q≤1000$，不强制在线。\n- Subtask 2（20 points）：$n≤2×10^5$。不强制在线。\n- Subtask 3（20 points）：$n≤10^7$。不强制在线。\n- Subtask 4（10 points）：$m≤1000$。不强制在线。\n- Subtask 5（25 points）：无特殊限制，不强制在线。\n- Subtask 6（20 points）：无特殊限制，**强制在线**。\n\n对于 $100\\%$ 的数据，保证 $1≤n≤10^9$，$1≤m≤2×10^5$，$1≤q≤10^6$，$1≤l_i<r_i≤n$，$1≤k_i≤\\min(10,r_i-l_i)$，$1≤a<b≤n$。以上变量皆为整数。  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-10」多彩的线段", "background": "", "description": "```Muxii```有一个 $[1,n]$ 的数轴，$m$ 种颜色的线段。  \n```Muxii```规定，对于第 $i$ 种颜色，仅有 $[l_i,r_i]$ 部分的数轴允许覆盖线段，且每条线段的长度不能超过 $k_i$ $(k_i≤10)$。线段可以有任意多条。  \n现在```Muxii```将会询问你 $q$ 次，每次询问给出两个数字 $a$、$b$，请你回答若要覆盖 $[a,b]$ 部分的数轴最少需要几条线段。  \n数据保证数轴上不存在不能被任何线段覆盖的位置。", "inputFormat": "**本题部分数据点强制在线。**  \n第一行四个数 $o$、$n$、$m$、$q$，其中当 $o=1$ 时，该数据点强制在线，即每次给出的 $a$、$b$ 异或上次询问的答案的结果为真正的 $a$、$b$，当第一次询问时，可认为上一次询问的答案为 $0$；当 $o=0$ 时，该数据点不强制在线。  \n接下来 $m$ 行，每行三个数 $l_i$、$r_i$、$k_i$；  \n再接下来 $q$ 行，每行两个数 $a$、$b$。以上未解释的变量意义皆已在题目描述中给出。", "outputFormat": "共 $q$ 行，每行一个数表示答案。", "hint": "【样例 $1$ 说明】\n\n最少需要 $3$ 条线段。下面给出一种可行的解决方案：  \n第 $1$ 条线段为 $[1,4]$ ，颜色为 $1$；  \n第 $2$ 条线段为 $[4,6]$ ，颜色为 $2$；  \n第 $3$ 条线段为 $[6,7]$ ，颜色为 $2$。\n\n【数据范围与约定】\n\n- Subtask 1（5 points）：$n,m,q≤1000$，不强制在线。\n- Subtask 2（20 points）：$n≤2×10^5$。不强制在线。\n- Subtask 3（20 points）：$n≤10^7$。不强制在线。\n- Subtask 4（10 points）：$m≤1000$。不强制在线。\n- Subtask 5（25 points）：无特殊限制，不强制在线。\n- Subtask 6（20 points）：无特殊限制，**强制在线**。\n\n对于 $100\\%$ 的数据，保证 $1≤n≤10^9$，$1≤m≤2×10^5$，$1≤q≤10^6$，$1≤l_i<r_i≤n$，$1≤k_i≤\\min(10,r_i-l_i)$，$1≤a<b≤n$。以上变量皆为整数。  ", "locale": "zh-CN"}}}
{"pid": "P7720", "type": "P", "difficulty": 7, "samples": [["3", "0 16 6 0"], ["8", "0 8008 24388 29840 16788 4360 476 16 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 3500, 3500, 3500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「EZEC-10」「Byakkai OI 2021」Estahv", "background": "> chrisl gjeztor Amledza  \n> prof ovelmizer  \n> dos carm ammeidha alzenghar  \n> kawy may noxial gjeztor  \n> Rupieilla vas photreywz idha", "description": "我们有排成一排的无限个格子，它们从左往右以 $1,2,\\dots$ 编号。\n\n你可以在每个格子中填入任意**正整数** $k$，则你会得到 $C_k$ 的权值。  \n其中满足 $C_0=C_1=1$，$C_i = \\sum\\limits_{j=0}^{i-1} C_j C_{i-j-1}$ $(i \\ge 2)$。  \n若干个格子的总权值定义为它们的权值之积。\n\n现在你需要从左往右依次在格子中填入数字，直到填入的数字之和等于 $n$ 或超过 $n$ 为止。  \n如此之后，你还需要为每个填入数字的格子涂上黑色或者白色。需要满足：不存在任意连续的 $2$ 个及以上白色的格子，且第一个格子必须为黑色，最后一个填入数字的格子必须为白色。  \n然后，你需要把所有相邻的均填入了数字的同色格子两两连边，并从中选出一个格子集合 $S$，满足 $S$ 内的格子两两不连通（可以为空）。\n\n一种方案的权值定义为所有格子的总权值。\n\n给定 $n$，请你对于 $s=0,1,\\dots,n$，计算所有完成以上操作，且填入的数字之和**恰好**为 $n$，且黑色的格子数为 $s$ 的所有方案的权值之和。  \n两种方案不同当且仅当填入数字的格子数不同或对应格子填入的数字不同或对应格子颜色不同或 $S$ 集合不同。  \n对 $998244353$ 取模。", "inputFormat": "第一行，一个正整数 $n$。", "outputFormat": "一行，$n+1$ 个非负整数，表示对于 $s=0,1,\\dots,n$ 的答案。", "hint": "【样例 $1$ 说明】\n\n当 $n=3$ 时，可以有 $2$ 或 $3$ 个格子。  \n若有 $2$ 个格子，则填数方案为 $[1,2]$ 或 $[2,1]$，权值共为 $2 \\times C_1 \\times C_2 = 4$；填色方案为 `BW`，必有一个黑色格子；$S$ 集合的选择是 $\\{\\},\\{1\\},\\{2\\},\\{1,2\\}$（以格子的编号表示）。  \n若有 $3$ 个格子，则填数方案为 $[1,1,1]$，权值为 $C_1^3=1$；填色方案为 `BBW`，必有两个黑色格子；$S$ 集合的选择是 $\\{\\},\\{1\\},\\{2\\},\\{3\\},\\{1,3\\},\\{2,3\\}$（以格子的编号表示）。  \n其中 `B` 表示黑色，`W` 表示白色。\n\n【数据规模与约定】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（30 points）：$n\\le10$。\n- Subtask 2（20 points）：$n\\le300$。\n- Subtask 3（20 points）：$n \\le 5000$。\n- Subtask 4（30 points）：无特殊限制，时限为 $3.5s$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$。 \n\n\n### 提示\n\n为了方便各位获得暴力分，这里给出结论：\n$$\nC_k = \\frac1k \\binom{2k}{k-1} = \\binom{2k-1}{k-1}-\\binom{2k-1}{k-2}\n$$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-10」「Byakkai OI 2021」Estahv", "background": "> chrisl gjeztor Amledza  \n> prof ovelmizer  \n> dos carm ammeidha alzenghar  \n> kawy may noxial gjeztor  \n> Rupieilla vas photreywz idha", "description": "我们有排成一排的无限个格子，它们从左往右以 $1,2,\\dots$ 编号。\n\n你可以在每个格子中填入任意**正整数** $k$，则你会得到 $C_k$ 的权值。  \n其中满足 $C_0=C_1=1$，$C_i = \\sum\\limits_{j=0}^{i-1} C_j C_{i-j-1}$ $(i \\ge 2)$。  \n若干个格子的总权值定义为它们的权值之积。\n\n现在你需要从左往右依次在格子中填入数字，直到填入的数字之和等于 $n$ 或超过 $n$ 为止。  \n如此之后，你还需要为每个填入数字的格子涂上黑色或者白色。需要满足：不存在任意连续的 $2$ 个及以上白色的格子，且第一个格子必须为黑色，最后一个填入数字的格子必须为白色。  \n然后，你需要把所有相邻的均填入了数字的同色格子两两连边，并从中选出一个格子集合 $S$，满足 $S$ 内的格子两两不连通（可以为空）。\n\n一种方案的权值定义为所有格子的总权值。\n\n给定 $n$，请你对于 $s=0,1,\\dots,n$，计算所有完成以上操作，且填入的数字之和**恰好**为 $n$，且黑色的格子数为 $s$ 的所有方案的权值之和。  \n两种方案不同当且仅当填入数字的格子数不同或对应格子填入的数字不同或对应格子颜色不同或 $S$ 集合不同。  \n对 $998244353$ 取模。", "inputFormat": "第一行，一个正整数 $n$。", "outputFormat": "一行，$n+1$ 个非负整数，表示对于 $s=0,1,\\dots,n$ 的答案。", "hint": "【样例 $1$ 说明】\n\n当 $n=3$ 时，可以有 $2$ 或 $3$ 个格子。  \n若有 $2$ 个格子，则填数方案为 $[1,2]$ 或 $[2,1]$，权值共为 $2 \\times C_1 \\times C_2 = 4$；填色方案为 `BW`，必有一个黑色格子；$S$ 集合的选择是 $\\{\\},\\{1\\},\\{2\\},\\{1,2\\}$（以格子的编号表示）。  \n若有 $3$ 个格子，则填数方案为 $[1,1,1]$，权值为 $C_1^3=1$；填色方案为 `BBW`，必有两个黑色格子；$S$ 集合的选择是 $\\{\\},\\{1\\},\\{2\\},\\{3\\},\\{1,3\\},\\{2,3\\}$（以格子的编号表示）。  \n其中 `B` 表示黑色，`W` 表示白色。\n\n【数据规模与约定】\n\n**本题采用捆绑测试。**\n\n- Subtask 1（30 points）：$n\\le10$。\n- Subtask 2（20 points）：$n\\le300$。\n- Subtask 3（20 points）：$n \\le 5000$。\n- Subtask 4（30 points）：无特殊限制，时限为 $3.5s$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$。 \n\n\n### 提示\n\n为了方便各位获得暴力分，这里给出结论：\n$$\nC_k = \\frac1k \\binom{2k}{k-1} = \\binom{2k-1}{k-1}-\\binom{2k-1}{k-2}\n$$", "locale": "zh-CN"}}}
{"pid": "P7721", "type": "P", "difficulty": 7, "samples": [["5 33333333333333333 5\n333 33 333 33333 3\n4 5 0 100000\n2 4 0 100000\n1 3 0 100000\n1 5 0 100000\n4 4 0 100000", "99999999999776691\n30000000001494126\n99999999999997821\n332333333323322794\n33333"], ["33 33333 33\n333333333 333333333333 33333333333333 33333333333 33333 333333333333333 33 333 333 333333 3 333333333 3333333 3 333333333 33333333333333 333333333333333 33333333333333 333333 33333333333333 33333333333333 33333333 333333333333333 33333333 33333333 33333 33333333 3333333 33333333 33333333 3333333 33333333 333333333\n1 33 3 333333333333333\n13 15 333333 333333333333333\n15 18 3333333333333 33333333333333\n13 30 3 33333333333\n3 27 33333 3333333333\n25 28 333333 33333333333333\n6 30 333 33333333333333\n4 32 33333333333333 333333333333333\n4 13 33333333 33333333333333\n14 28 3333333 33333333333333\n17 31 3 33333333333333\n21 32 33333 333333333333333\n1 2 333333 3333333333333\n1 10 3333333 333333333\n6 15 33333 333333\n5 13 33333 333333333333\n4 17 3333333333333 33333333333333\n8 28 33333 33333333333333\n14 15 3333 333333333333\n15 26 333333333 333333333333333\n17 25 33333333 333333333333333\n13 25 333333 333333333333\n8 33 333333 33333333333333\n16 17 33333333333 333333333333\n24 26 3333333333 333333333333333\n23 24 3 333\n28 29 333333333 33333333333333\n17 25 33 3333\n6 7 333333 33333333333\n7 12 3333 33333\n17 28 3333333333333 3333333333333\n11 17 333333 333333\n11 17 333333 333333", "5381244831822484\n11111003322222\n33333333333333\n187453349930639529\n209467718277680736\n1111103322222\n38102950517542902\n111033333333320121\n1111100333322222\n271584825962251762\n259223255302742554\n221819973789694611\n11111000333322222\n333333333\n333333\n312336974059655685\n33333333333333\n214323286321378781\n333333333\n74099999892219735\n74099999592219735\n12336407395622288\n70337133069920353\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2007", "O2优化", "Ynoi"], "title": "[Ynoi2007] rvrewsus", "background": "", "description": "给定一个数组 $a_1,a_2,\\dots,a_n$ 以及正整数 $b$，请回答 $q$ 组 $[l,r,L,R]$ 形式的询问。\n\n$\\land$ 符号表示逻辑与。\n\n在这询问里，你需要：\n\n  1. 创建**无重**集合 $S=\\{a_i:l\\le i\\le r\\land L\\le a_i\\le R\\}$；\n  2. 定义函数 $r(k)=\\begin{cases}\\min (x:x\\in S)&k=0\\\\\\min(x:x\\in S\\land r(k-1)<x)&k\\neq0\\end{cases}$；\n\n  3. 求以下表达式值：\n\n$$\\sum_{k=0}^{|S|-1}r(k)b^k$$\n\n所有答案对 $333333333333333397$（一个质数）取模。", "inputFormat": "第一行三个整数 $n,b,q$。  \n\n接下来一行 $n$ 个整数 $a_1,a_2,\\dots,a_N$。  \n\n接下来 $q$ 行每行四个正整数 $l,r,L,R$，表示一组询问。", "outputFormat": "输出 $q$ 行，代表对应询问答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：w33z，Data：w33z\n\n - Subtask 1（2 pts）：$n,q\\le5000$；\n - Subtask 2（3 pts）：$n,q\\le5\\times10^4$；\n - Subtask 3（3 pts）：$R-L\\le 300$；\n - Subtask 4（7 pts）：$b=1$；\n - Subtask 5（7 pts）：所有 $a_i$ 互不相同；\n - Subtask 6（11 pts）：$L=0,R=333333333333333396$；\n - Subtask 7（67 pts）：无额外限制。\n\n对于所有数据，$1\\le n,q\\le2\\times10^5$，$1\\le L\\le R\\le n$，$0\\le b,a_i,L,R<333333333333333397$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2007] rvrewsus", "background": "", "description": "给定一个数组 $a_1,a_2,\\dots,a_n$ 以及正整数 $b$，请回答 $q$ 组 $[l,r,L,R]$ 形式的询问。\n\n$\\land$ 符号表示逻辑与。\n\n在这询问里，你需要：\n\n  1. 创建**无重**集合 $S=\\{a_i:l\\le i\\le r\\land L\\le a_i\\le R\\}$；\n  2. 定义函数 $r(k)=\\begin{cases}\\min (x:x\\in S)&k=0\\\\\\min(x:x\\in S\\land r(k-1)<x)&k\\neq0\\end{cases}$；\n\n  3. 求以下表达式值：\n\n$$\\sum_{k=0}^{|S|-1}r(k)b^k$$\n\n所有答案对 $333333333333333397$（一个质数）取模。", "inputFormat": "第一行三个整数 $n,b,q$。  \n\n接下来一行 $n$ 个整数 $a_1,a_2,\\dots,a_N$。  \n\n接下来 $q$ 行每行四个正整数 $l,r,L,R$，表示一组询问。", "outputFormat": "输出 $q$ 行，代表对应询问答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：w33z，Data：w33z\n\n - Subtask 1（2 pts）：$n,q\\le5000$；\n - Subtask 2（3 pts）：$n,q\\le5\\times10^4$；\n - Subtask 3（3 pts）：$R-L\\le 300$；\n - Subtask 4（7 pts）：$b=1$；\n - Subtask 5（7 pts）：所有 $a_i$ 互不相同；\n - Subtask 6（11 pts）：$L=0,R=333333333333333396$；\n - Subtask 7（67 pts）：无额外限制。\n\n对于所有数据，$1\\le n,q\\le2\\times10^5$，$1\\le L\\le R\\le n$，$0\\le b,a_i,L,R<333333333333333397$。", "locale": "zh-CN"}}}
{"pid": "P7722", "type": "P", "difficulty": 7, "samples": [["5 4\n1 2 3 4 5\n2 3 4 5 1\n5 1 2 3 4\n2 5\n1 2 3\n2 4\n2 5", "3\n0\n2"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2007", "O2优化", "Ynoi"], "title": "[Ynoi2007] tmpq", "background": "", "description": "给定三个长为 $n$ 的数组 $a,b,c$, 满足 $1\\le a_i,b_i,c_i\\le n$ 且为整数。\n\n你需要进行 $m$ 次操作，每次操作为：\n\n`1 k x`：代表将 $a$ 序列的第 $k$ 个位置改为 $x$，即 $a_k := x$。\n\n`2 r`：代表查询有多少个三元组 $(i,j,k)$, 满足 $1\\le i<j<k\\le r$, 且 $b_{a_i}=a_j=c_{a_k}$。\n", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个数，按顺序表示序列 $a$ 中的元素。\n\n第三行 $n$ 个数，按顺序表示序列 $b$ 中的元素。\n\n第四行 $n$ 个数，按顺序表示序列 $c$ 中的元素。\n\n之后 $m$ 行，每行形如 `1 k x` 或 `2 r`，意义如上述。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示答案。", "hint": "Idea：Forever_Pursuit&nzhtl1477&w33z8kqrqk8zzzx33，\n\nSolution：nzhtl1477&w33z8kqrqk8zzzx33，\n\nCode：w33z8kqrqk8zzzx33，\n\nData：w33z8kqrqk8zzzx33&nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 2\\times 10^5$，$1\\le m\\le 5 \\times 10^4$，$1\\le a_i,b_i,c_i,x,k,r\\le n$。\n\n对于第一个操作，满足条件的三元组为：\n\n- $ i=1 $ , $ j=2 $ , $ k=3 $\n- $ i=2 $ , $ j=3 $ , $ k=4 $\n- $ i=3 $ , $ j=4 $ , $ k=5 $\n\n对于第三个操作，没有满足条件的三元组。\n\n对于第四个操作，满足条件的三元组为：\n\n- $ i=2 $ , $ j=4 $ , $ k=5 $\n- $ i=3 $ , $ j=4 $ , $ k=5 $", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2007] tmpq", "background": "", "description": "给定三个长为 $n$ 的数组 $a,b,c$, 满足 $1\\le a_i,b_i,c_i\\le n$ 且为整数。\n\n你需要进行 $m$ 次操作，每次操作为：\n\n`1 k x`：代表将 $a$ 序列的第 $k$ 个位置改为 $x$，即 $a_k := x$。\n\n`2 r`：代表查询有多少个三元组 $(i,j,k)$, 满足 $1\\le i<j<k\\le r$, 且 $b_{a_i}=a_j=c_{a_k}$。\n", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个数，按顺序表示序列 $a$ 中的元素。\n\n第三行 $n$ 个数，按顺序表示序列 $b$ 中的元素。\n\n第四行 $n$ 个数，按顺序表示序列 $c$ 中的元素。\n\n之后 $m$ 行，每行形如 `1 k x` 或 `2 r`，意义如上述。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示答案。", "hint": "Idea：Forever_Pursuit&nzhtl1477&w33z8kqrqk8zzzx33，\n\nSolution：nzhtl1477&w33z8kqrqk8zzzx33，\n\nCode：w33z8kqrqk8zzzx33，\n\nData：w33z8kqrqk8zzzx33&nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 2\\times 10^5$，$1\\le m\\le 5 \\times 10^4$，$1\\le a_i,b_i,c_i,x,k,r\\le n$。\n\n对于第一个操作，满足条件的三元组为：\n\n- $ i=1 $ , $ j=2 $ , $ k=3 $\n- $ i=2 $ , $ j=3 $ , $ k=4 $\n- $ i=3 $ , $ j=4 $ , $ k=5 $\n\n对于第三个操作，没有满足条件的三元组。\n\n对于第四个操作，满足条件的三元组为：\n\n- $ i=2 $ , $ j=4 $ , $ k=5 $\n- $ i=3 $ , $ j=4 $ , $ k=5 $", "locale": "zh-CN"}}}
{"pid": "P7723", "type": "P", "difficulty": 7, "samples": [["4\n1 1 1\n2 10 5\n0 6 9\n3 10 4\n2\n2 3 1 3 10 10 11 11 10 5 7 3 2 3 6 3 2 2 8 2 3 7 2 4 7 11 8 6 9 5 3 7 11 10 10 8 8 5 5 7\n1 2 1 2 2 3 6 11 1 1 5 11 5 2 8 6 1 6 9 2 7 11 3 6 9 10 8 2 9 2 9 8 2 11 3 9 4 11 2 5\n", "0 0\n11 6\n0 0\n\n6 9\n0 0\n0 0\n\n0 0\n0 0\n10 4\n\n\n0 0\n0 0\n15 10\n\n0 0\n0 0\n125 85\n\n30 66\n100 78\n0 0\n\n\n"], ["10\n3 5 8\n1 4 6\n6 8 10\n9 7 5\n7 6 2\n4 9 1\n8 8 5\n0 3 5\n2 6 2\n5 10 3\n10\n4 8 8 9 5 8 3 6 7 7 10 11 10 9 10 3 5 11 3 4 10 3 8 1 3 8 4 11 3 11 5 6 2 5 11 9 6 6 2 1\n4 6 5 6 1 2 1 7 10 7 9 11 11 10 10 5 3 2 2 8 2 1 6 1 9 6 6 5 9 4 6 7 2 7 5 4 3 8 1 6\n1 5 6 9 7 3 9 2 5 3 2 10 6 11 5 10 5 9 8 5 11 3 3 5 5 10 2 6 2 5 8 4 5 6 10 2 10 11 1 7\n3 4 3 9 9 7 1 3 8 4 2 10 5 8 11 3 4 2 1 7 3 9 8 5 4 4 6 6 8 11 11 1 4 7 2 3 2 2 3 10\n6 9 2 7 4 6 1 5 6 7 2 4 2 3 11 10 1 10 1 4 10 6 8 3 3 8 1 1 11 2 8 5 5 9 4 11 5 5 9 8\n5 7 5 8 10 11 9 8 10 4 1 7 7 1 5 2 10 6 4 5 4 2 1 10 1 3 5 11 1 6 2 1 6 1 6 10 11 10 1 8\n3 6 1 6 10 11 9 3 7 3 9 6 1 9 11 6 7 6 3 9 4 11 4 7 2 4 5 5 5 3 4 11 3 4 4 4 6 4 1 9\n6 8 2 6 11 5 7 6 6 5 7 5 9 10 6 11 4 4 2 7 2 11 4 9 3 8 7 9 3 3 5 10 2 9 9 4 7 9 7 11\n2 5 1 4 5 6 7 1 2 1 1 9 6 10 6 6 1 9 5 10 7 1 8 10 1 4 4 3 9 11 11 6 9 6 8 2 8 10 11 7\n6 7 3 6 11 11 11 3 6 6 9 7 6 7 2 5 3 1 8 8 1 9 4 10 9 11 6 4 2 11 10 8 3 6 6 5 11 3 11 8\n", "17 24\n0 0\n7 5\n\n18 8\n8 5\n0 0\n\n16 5\n0 0\n0 0\n\n\n157 111\n0 0\n235 169\n\n40 42\n63 68\n0 0\n\n126 60\n0 0\n147 95\n\n\n215 530\n0 0\n0 0\n\n2324 2024\n2479 1783\n0 0\n\n1578 1592\n837 509\n194 446\n\n\n0 0\n7116 10231\n7239 9388\n\n4607 8460\n0 0\n0 0\n\n6944 6628\n64844 45048\n0 0\n\n\n72300 52348\n265311 254999\n50596 23640\n\n0 0\n279180 126900\n244936 114292\n\n35348 63827\n0 0\n0 0\n\n\n172112 792956\n2447373 1106786\n929486 443832\n\n1119770 935959\n0 0\n0 0\n\n1649144 359228\n0 0\n3553200 2614140\n\n\n0 0\n6950234 5535094\n22444890 7998435\n\n0 0\n10443636 7892656\n71682584 26662760\n\n8776334 5075523\n11841632 7740868\n0 0\n\n\n0 0\n134875573 343366288\n91300520 125610782\n\n59108239 90936089\n21697728 43262120\n0 0\n\n228318480 448464600\n0 0\n128593760 97023136\n\n\n0 0\n0 0\n2054901740 1978497310\n\n0 0\n72853820 66252472\n1991063770 2020209575\n\n600177312 754769101\n3803713784 3298681920\n1004356824 1001672808\n\n\n3063260331 3299980482\n4100473464 1966207784\n3031825976 3091919392\n\n0 0\n325795536 455181888\n0 0\n\n2133373140 3095093880\n3643561634 2339855333\n576229212 1245355280\n\n\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2007", "交互题", "Special Judge", "O2优化", "Ynoi"], "title": "[Ynoi2007] TB5x", "background": null, "description": "这是一道交互题。\n\n二维平面上初始有 $n$ 个点 $(i,p_i)$，每个点有权值 $d_i$，$0\\le i<n$；\n\n共 $m$ 次操作，操作编号为 $0$ 到 $m-1$，按编号升序执行；\n\n编号为 $w$ 的操作给出 $x_1,x_2,y_1,y_2$，满足 $0<x1<x2<n$，$0<y1<y2<n$。\n\n一个点 $(x,y)$ 的网格坐标被定义为 $([x\\ge x1]+[x\\ge x2],[y\\ge y1]+[y\\ge y2])$。\n\n依次进行以下步骤： \n\n1. 查询网格坐标为 $(X,Y)$ 的点的权值之和，记录在 $ans[X][Y]$。\n2. 对每个网格坐标为 $(X,Y)$ 的点，进行修改 $o[X][Y]$。\n3. 所有点的坐标同时发生改变，对于一个网格坐标为 $(X,Y)$ 的点，它的坐标从 $(x,y)$ 变为 $(x+dx[X],y+dy[Y])$；\n    其中\n    $dx[0]=0$，$dx[1]=n-x2$，$dx[2]=x1-x2$。\n    $dy[0]=0$，$dy[1]=n-y2$，$dy[2]=y1-y2$。\n    $x1,x2,y1,y2,o,ans$ 都是数组，下标对应操作的编号。\n\n\n\n其中 $d_i$ 属于抽象的数据类型 $D$，$o[X][Y]$ 属于抽象的数据类型 $O$；\n\n$D$ 上定义了抽象的运算 $+:D\\times D\\to D$；\n\n$D,O$ 上定义了抽象的运算 $\\cdot:O\\times D\\to D$；\n\n$O$ 上定义了抽象的运算 $\\cdot:O\\times O\\to O$；\n\n$\\epsilon_D$ 是 $D$ 中的一个特殊的元素，称为单位元；\n\n$\\epsilon_O$ 是 $O$ 中的一个特殊的元素，称为单位元；\n\n这些操作满足性质：\n\n对任意 $a,b,c\\in D$，有 $a+b=b+a$，$(a+b)+c=a+(b+c)$，$a+\\epsilon_D=\\epsilon_D+a=a$；\n\n对任意 $u,v,w\\in O$，有$(u\\cdot v)\\cdot w=u\\cdot(v\\cdot w)$，$u\\cdot\\epsilon_O=\\epsilon_O\\cdot u=u$；\n\n对任意 $u,v\\in O$，$a,b\\in D$，有$(u\\cdot v)\\cdot a=u\\cdot (v\\cdot a)$，$u\\cdot (a+b)=(u\\cdot a)+(u\\cdot b)$，$\\epsilon_O\\cdot a=a$，$u\\cdot \\epsilon_D=\\epsilon_D$；\n\n执行每次 $+$ 或 $\\cdot$ 运算有一定的代价，具体地，在计算 $a+b$ 或 $a\\cdot b$ 时如果 $a,b$ 都不是 $\\epsilon_D$ 或 $\\epsilon_O$，则代价为 $1$，否则代价为 $0$。你需要保证每个答案正确，且总代价不能超过当前子任务的**代价上限**。\n\n\n### 实现细节\n\n头文件中定义了数据类型 `Data` （$D$）和 `Operation` （$O$），你可以使用以下已定义的成员函数对类型为 `Data` 和 `Operation` 的数据进行操作：\n\n```c++\nvoid Data::add_eq(const Data &a)\n```\n\n`w.add_eq(a)` 计算 $w+a$，并将结果保存在 $w$，每次调用的代价在 $w,a$ 都不是单位元时为 $1$，否则为 $0$；\n\n```c++\nvoid Data::add(const Data &a,const Data &b)\n```\n\n`w.add(a,b)` 计算 $a+b$，并将结果保存在 $w$，每次调用的代价在 $a,b$ 都不是单位元时为 $1$，否则为 $0$；\n\n```c++\nvoid Data::clr()\n```\n\n`w.clr()` 可以将 $\\epsilon_D$ 保存在 $w$，每次调用的代价为 $0$；\n\n```c++\nbool Data::empty()const\n```\n\n`w.empty()` 判断 $w$ 是否为 $\\epsilon_D$，若是则返回 $\\mathrm{true}$，否则返回 $\\mathrm{false}$，每次调用的代价为 $0$；\n\n\n\n```c++\nvoid Operation::apply(Data &a)const\n```\n\n`w.apply(a)` 计算 $w\\cdot a$，并将结果保存在 $a$，每次调用的代价在 $w,a$ 都不是单位元时为 $1$，否则为 $0$；\n\n```c++\nvoid Operation::apply(Operation &u)const\n```\n\n`w.apply(u)` 计算 $w\\cdot u$，并将结果保存在 $u$，每次调用的代价在 $w,u$ 都不是单位元时为 $1$，否则为 $0$；\n\n```c++\nvoid Operation::clr()\n```\n\n`w.clr()` 可以将 $\\epsilon_O$ 存储在 $w$，每次调用的代价为 $0$；\n\n```c++\nbool Operation::empty()const\n```\n\n`w.empty()` 判断 $w$ 是否为 $\\epsilon_O$，若是则返回 $\\mathrm{true}$，否则返回 $\\mathrm{false}$，每次调用的代价为 $0$；\n\n\n\n另外，你还可以使用 `Data` 或 `Operation` 类型的赋值运算符、拷贝构造函数或无参构造函数，以 `Data` 类型为例：\n\n`w=u` 可以将 $u$ 复制一份存储在 $w$，每次调用的代价为 $0$；\n\n`Data w(u);` 或 `Data w=u;` 可以将 $u$ 复制一份存储在新定义的 $w$，每次调用的代价为 $0$；\n\n`Data w;` 可以将 $\\epsilon_D$ 存储在新定义的 $w$，代价为 $0$；\n\n`Operation w;` 可以将 $\\epsilon_O$ 存储在新定义的 $w$，代价为 $0$；\n\n\n\n除了以上描述的对 `Data` 或 `Operation` 的操作外，其余操作根据情况可能被视为攻击评测系统。\n\n`sizeof(Data)` 和 `sizeof(Operation)` 都不超过 $64$，此外交互库还需要不超过 64MB 的空间。时间和空间限制包括交互库使用的时间和空间。仅使用赋值、构造函数、`apply` 和 `add` 就可以写出正确的程序，其它函数可能可以提供便利。\n\n\n\n你需要实现以下函数：\n\n```c++\nvoid solve(\n\tconst int n,\n\tconst int m,\n\tconst int p[],\n\tconst Data d[],\n\tconst int x1[],\n\tconst int x2[],\n\tconst int y1[],\n\tconst int y2[],\n\tconst Operation o[][3][3],\n\tData ans[][3][3])\n```\n\n- $n$：点的个数；\n- $m$：操作的个数；\n- $p$：$(i,p[i])$ 表示每个点的坐标，$0\\le i<n$；\n- $d$：$d[i]$ 表示每个点的初始权值，$0\\le i<n$；\n- $x1,x2,y1,y2,o,ans$：$x1[i],y1[i],x2[i],y2[i],o[i]$ 表示每次操作的输入，你需要将相应的答案存储到 $ans[i]$，$0\\le i<m$。\n\n为了您的方便，这里提供模板。请完善以下代码：\n\n```cpp\n/* BEGIN HEADER: */\nclass Data {\n  friend class Operation;\n  friend int main();\n\nprivate:\n  unsigned int x, sz, T, flag;\n  void read();\n  void print() const;\n\npublic:\n  Data() { clr(); }\n  void add_eq(const Data &a);\n  void add(const Data &a, const Data &b);\n  void clr();\n  bool empty() const;\n};\n\nclass Operation {\n  friend int main();\n\nprivate:\n  unsigned int a, b, L, R, flag;\n  void read();\n\npublic:\n  Operation() { clr(); }\n  void apply(Data &w) const;\n  void apply(Operation &w) const;\n  void clr();\n  bool empty() const;\n};\n\nvoid solve(const int n, const int m, const int p[], const Data d[],\n           const int x1[], const int x2[], const int y1[], const int y2[],\n           const Operation o[][3][3], Data ans[][3][3]);\n/* END HEADER. */\n\n#include <bits/stdc++.h>\n\nvoid solve(const int n, const int m, const int p[], const Data d[],\n           const int x1[], const int x2[], const int y1[], const int y2[],\n           const Operation o[][3][3], Data ans[][3][3]) {\n  // complete this\n}\n```\n\n由于洛谷的交互方法比较奇怪，所以提交的时候需要把本地的代码复制过来，放在这个 solve 函数这里，和前面的 HEADER 一起提交。提交时不引用 \"data.h\" 头文件。\n\n在本地编写程序时应使用 `#include\"data.h\"`，提交的时候再替换成题面中的模板。", "inputFormat": "下发的交互库以如下格式读取输入数据：\n\n- 第一行：$n$\n- 接下来 $n$ 行：$p_i\\;d_i$（$d_i$ 由两个整数表示）\n- 第 $n+2$ 行：$m$\n- 接下来 $m$ 行：$x1_i\\;x2_i\\;y1_i\\;y2_i\\;o_i$（$o_i$ 由 $9 \\times 4$ 个整数表示）\n\n$D$ 中的元素是 $2\\times 1$ 的矩阵，$O$ 中元素是 $2\\times 2$ 的矩阵，矩阵中的元素是对 $2^{32}$ 取模的整数；\n\n$+$ 对应矩阵加法，$\\cdot$ 对应矩阵乘法，具体可以参考下发的交互库的实现；\n\n实际评测环境中输入输出格式以及 $D,O$ 等可能有不同的定义；", "outputFormat": "下发的交互库以如下格式打印你的答案：\n\n- 对每个询问，输出 $13$ 行，其中第 $1 , 2 , 3 , 5 , 6 , 7 , 9 , 10 , 11$ 行有两个整数，依次表示这次询问对应的$ans[0][0],ans[0][1],ans[0][2],ans[1][0],ans[1][1],ans[1][2],ans[2][0],ans[2][1],ans[2][2]$，其余为空行；\n- 向 stderr 打印总代价，以及在总代价超过代价上限时进行提示。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\nSpecial thanks：w33z8kqrqk8zzzx33 修改交互库使得能在洛谷上运行。\n\n对于 $100\\%$ 的数据，满足 $n\\le 10^5,m\\le 2\\times 10^4$。\n\n共 10 组数据，满足 $n=10^5$；\n\n每组数据的 $m$ 分别为 $10,100,1000,2000,5000,10000,12500,15000,17500,20000$；\n\n所有数据的代价上限为 $10^8$。\n\n每组数据对应 $10$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2007] TB5x", "background": null, "description": "这是一道交互题。\n\n二维平面上初始有 $n$ 个点 $(i,p_i)$，每个点有权值 $d_i$，$0\\le i<n$；\n\n共 $m$ 次操作，操作编号为 $0$ 到 $m-1$，按编号升序执行；\n\n编号为 $w$ 的操作给出 $x_1,x_2,y_1,y_2$，满足 $0<x1<x2<n$，$0<y1<y2<n$。\n\n一个点 $(x,y)$ 的网格坐标被定义为 $([x\\ge x1]+[x\\ge x2],[y\\ge y1]+[y\\ge y2])$。\n\n依次进行以下步骤： \n\n1. 查询网格坐标为 $(X,Y)$ 的点的权值之和，记录在 $ans[X][Y]$。\n2. 对每个网格坐标为 $(X,Y)$ 的点，进行修改 $o[X][Y]$。\n3. 所有点的坐标同时发生改变，对于一个网格坐标为 $(X,Y)$ 的点，它的坐标从 $(x,y)$ 变为 $(x+dx[X],y+dy[Y])$；\n    其中\n    $dx[0]=0$，$dx[1]=n-x2$，$dx[2]=x1-x2$。\n    $dy[0]=0$，$dy[1]=n-y2$，$dy[2]=y1-y2$。\n    $x1,x2,y1,y2,o,ans$ 都是数组，下标对应操作的编号。\n\n\n\n其中 $d_i$ 属于抽象的数据类型 $D$，$o[X][Y]$ 属于抽象的数据类型 $O$；\n\n$D$ 上定义了抽象的运算 $+:D\\times D\\to D$；\n\n$D,O$ 上定义了抽象的运算 $\\cdot:O\\times D\\to D$；\n\n$O$ 上定义了抽象的运算 $\\cdot:O\\times O\\to O$；\n\n$\\epsilon_D$ 是 $D$ 中的一个特殊的元素，称为单位元；\n\n$\\epsilon_O$ 是 $O$ 中的一个特殊的元素，称为单位元；\n\n这些操作满足性质：\n\n对任意 $a,b,c\\in D$，有 $a+b=b+a$，$(a+b)+c=a+(b+c)$，$a+\\epsilon_D=\\epsilon_D+a=a$；\n\n对任意 $u,v,w\\in O$，有$(u\\cdot v)\\cdot w=u\\cdot(v\\cdot w)$，$u\\cdot\\epsilon_O=\\epsilon_O\\cdot u=u$；\n\n对任意 $u,v\\in O$，$a,b\\in D$，有$(u\\cdot v)\\cdot a=u\\cdot (v\\cdot a)$，$u\\cdot (a+b)=(u\\cdot a)+(u\\cdot b)$，$\\epsilon_O\\cdot a=a$，$u\\cdot \\epsilon_D=\\epsilon_D$；\n\n执行每次 $+$ 或 $\\cdot$ 运算有一定的代价，具体地，在计算 $a+b$ 或 $a\\cdot b$ 时如果 $a,b$ 都不是 $\\epsilon_D$ 或 $\\epsilon_O$，则代价为 $1$，否则代价为 $0$。你需要保证每个答案正确，且总代价不能超过当前子任务的**代价上限**。\n\n\n### 实现细节\n\n头文件中定义了数据类型 `Data` （$D$）和 `Operation` （$O$），你可以使用以下已定义的成员函数对类型为 `Data` 和 `Operation` 的数据进行操作：\n\n```c++\nvoid Data::add_eq(const Data &a)\n```\n\n`w.add_eq(a)` 计算 $w+a$，并将结果保存在 $w$，每次调用的代价在 $w,a$ 都不是单位元时为 $1$，否则为 $0$；\n\n```c++\nvoid Data::add(const Data &a,const Data &b)\n```\n\n`w.add(a,b)` 计算 $a+b$，并将结果保存在 $w$，每次调用的代价在 $a,b$ 都不是单位元时为 $1$，否则为 $0$；\n\n```c++\nvoid Data::clr()\n```\n\n`w.clr()` 可以将 $\\epsilon_D$ 保存在 $w$，每次调用的代价为 $0$；\n\n```c++\nbool Data::empty()const\n```\n\n`w.empty()` 判断 $w$ 是否为 $\\epsilon_D$，若是则返回 $\\mathrm{true}$，否则返回 $\\mathrm{false}$，每次调用的代价为 $0$；\n\n\n\n```c++\nvoid Operation::apply(Data &a)const\n```\n\n`w.apply(a)` 计算 $w\\cdot a$，并将结果保存在 $a$，每次调用的代价在 $w,a$ 都不是单位元时为 $1$，否则为 $0$；\n\n```c++\nvoid Operation::apply(Operation &u)const\n```\n\n`w.apply(u)` 计算 $w\\cdot u$，并将结果保存在 $u$，每次调用的代价在 $w,u$ 都不是单位元时为 $1$，否则为 $0$；\n\n```c++\nvoid Operation::clr()\n```\n\n`w.clr()` 可以将 $\\epsilon_O$ 存储在 $w$，每次调用的代价为 $0$；\n\n```c++\nbool Operation::empty()const\n```\n\n`w.empty()` 判断 $w$ 是否为 $\\epsilon_O$，若是则返回 $\\mathrm{true}$，否则返回 $\\mathrm{false}$，每次调用的代价为 $0$；\n\n\n\n另外，你还可以使用 `Data` 或 `Operation` 类型的赋值运算符、拷贝构造函数或无参构造函数，以 `Data` 类型为例：\n\n`w=u` 可以将 $u$ 复制一份存储在 $w$，每次调用的代价为 $0$；\n\n`Data w(u);` 或 `Data w=u;` 可以将 $u$ 复制一份存储在新定义的 $w$，每次调用的代价为 $0$；\n\n`Data w;` 可以将 $\\epsilon_D$ 存储在新定义的 $w$，代价为 $0$；\n\n`Operation w;` 可以将 $\\epsilon_O$ 存储在新定义的 $w$，代价为 $0$；\n\n\n\n除了以上描述的对 `Data` 或 `Operation` 的操作外，其余操作根据情况可能被视为攻击评测系统。\n\n`sizeof(Data)` 和 `sizeof(Operation)` 都不超过 $64$，此外交互库还需要不超过 64MB 的空间。时间和空间限制包括交互库使用的时间和空间。仅使用赋值、构造函数、`apply` 和 `add` 就可以写出正确的程序，其它函数可能可以提供便利。\n\n\n\n你需要实现以下函数：\n\n```c++\nvoid solve(\n\tconst int n,\n\tconst int m,\n\tconst int p[],\n\tconst Data d[],\n\tconst int x1[],\n\tconst int x2[],\n\tconst int y1[],\n\tconst int y2[],\n\tconst Operation o[][3][3],\n\tData ans[][3][3])\n```\n\n- $n$：点的个数；\n- $m$：操作的个数；\n- $p$：$(i,p[i])$ 表示每个点的坐标，$0\\le i<n$；\n- $d$：$d[i]$ 表示每个点的初始权值，$0\\le i<n$；\n- $x1,x2,y1,y2,o,ans$：$x1[i],y1[i],x2[i],y2[i],o[i]$ 表示每次操作的输入，你需要将相应的答案存储到 $ans[i]$，$0\\le i<m$。\n\n为了您的方便，这里提供模板。请完善以下代码：\n\n```cpp\n/* BEGIN HEADER: */\nclass Data {\n  friend class Operation;\n  friend int main();\n\nprivate:\n  unsigned int x, sz, T, flag;\n  void read();\n  void print() const;\n\npublic:\n  Data() { clr(); }\n  void add_eq(const Data &a);\n  void add(const Data &a, const Data &b);\n  void clr();\n  bool empty() const;\n};\n\nclass Operation {\n  friend int main();\n\nprivate:\n  unsigned int a, b, L, R, flag;\n  void read();\n\npublic:\n  Operation() { clr(); }\n  void apply(Data &w) const;\n  void apply(Operation &w) const;\n  void clr();\n  bool empty() const;\n};\n\nvoid solve(const int n, const int m, const int p[], const Data d[],\n           const int x1[], const int x2[], const int y1[], const int y2[],\n           const Operation o[][3][3], Data ans[][3][3]);\n/* END HEADER. */\n\n#include <bits/stdc++.h>\n\nvoid solve(const int n, const int m, const int p[], const Data d[],\n           const int x1[], const int x2[], const int y1[], const int y2[],\n           const Operation o[][3][3], Data ans[][3][3]) {\n  // complete this\n}\n```\n\n由于洛谷的交互方法比较奇怪，所以提交的时候需要把本地的代码复制过来，放在这个 solve 函数这里，和前面的 HEADER 一起提交。提交时不引用 \"data.h\" 头文件。\n\n在本地编写程序时应使用 `#include\"data.h\"`，提交的时候再替换成题面中的模板。", "inputFormat": "下发的交互库以如下格式读取输入数据：\n\n- 第一行：$n$\n- 接下来 $n$ 行：$p_i\\;d_i$（$d_i$ 由两个整数表示）\n- 第 $n+2$ 行：$m$\n- 接下来 $m$ 行：$x1_i\\;x2_i\\;y1_i\\;y2_i\\;o_i$（$o_i$ 由 $9 \\times 4$ 个整数表示）\n\n$D$ 中的元素是 $2\\times 1$ 的矩阵，$O$ 中元素是 $2\\times 2$ 的矩阵，矩阵中的元素是对 $2^{32}$ 取模的整数；\n\n$+$ 对应矩阵加法，$\\cdot$ 对应矩阵乘法，具体可以参考下发的交互库的实现；\n\n实际评测环境中输入输出格式以及 $D,O$ 等可能有不同的定义；", "outputFormat": "下发的交互库以如下格式打印你的答案：\n\n- 对每个询问，输出 $13$ 行，其中第 $1 , 2 , 3 , 5 , 6 , 7 , 9 , 10 , 11$ 行有两个整数，依次表示这次询问对应的$ans[0][0],ans[0][1],ans[0][2],ans[1][0],ans[1][1],ans[1][2],ans[2][0],ans[2][1],ans[2][2]$，其余为空行；\n- 向 stderr 打印总代价，以及在总代价超过代价上限时进行提示。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\nSpecial thanks：w33z8kqrqk8zzzx33 修改交互库使得能在洛谷上运行。\n\n对于 $100\\%$ 的数据，满足 $n\\le 10^5,m\\le 2\\times 10^4$。\n\n共 10 组数据，满足 $n=10^5$；\n\n每组数据的 $m$ 分别为 $10,100,1000,2000,5000,10000,12500,15000,17500,20000$；\n\n所有数据的代价上限为 $10^8$。\n\n每组数据对应 $10$ 分。", "locale": "zh-CN"}}}
{"pid": "P7724", "type": "P", "difficulty": 2, "samples": [["2 1\n3 0\n0 2\n3 1\n", "Yes\n"], ["2 1\n4 3\n3 4\n2 1\n", "No\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": [], "title": "远古档案馆（Ancient Archive）", "background": "为了揭开月光能量背后的秘密，你来到了地下的远古档案馆。\n\n远古一族的秘密与遗忘的知识悉数贮藏于这片被尘封的迷宫中，你能成功解谜，获知远古的知识吗？\n", "description": "远古档案馆的中心是一个解谜：\n\n- 有一个 $2\\times 2$ 的网格，每个格子中要么有一个正整数，要么是空的；\n\n- 你可以进行若干次操作：每次操作中，你选择一个**有正整数的格子**和一个**与之相邻的空格子**，将正整数移到那个空格子中；\n\n- 给定网格的初始状态和最终状态，保证初始状态和最终状态中包含的正整数个数相同（设为 $k$ 个），且它们就是前 $k$ 个不同的正整数，问是否可以通过有限次操作从初始状态到达最终状态？\n\n下图展示了一个包含三个正整数的网格经过两次操作的情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y2dnr4ss.png)\n\n只有完成解谜，才能获得遗忘的知识，因此你希望尽快解决这个问题。\n\n**注意：网格中可能没有正整数，也可能没有空格。**", "inputFormat": "输入共包括四行，每行两个整数。\n\n前两行描述了初始状态，后两行描述了最终状态，用 $0$ 表示空格子。", "outputFormat": "如果可以从初始状态到达最终状态，输出 `Yes`，否则输出 `No`。", "hint": "**【样例 1 解释】**\n\n如题目描述中图所示。\n\n---\n\n**【样例 2 解释】**\n\n没有可移动的正整数，所以无法从初始状态到达与之不相等的最终状态。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n所有数据符合题目描述所述。\n\n- Subtask 1（40 points）：不存在空格。\n- Subtask 2（60 points）：无特殊限制。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rz2eg0ca.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "远古档案馆（Ancient Archive）", "background": "为了揭开月光能量背后的秘密，你来到了地下的远古档案馆。\n\n远古一族的秘密与遗忘的知识悉数贮藏于这片被尘封的迷宫中，你能成功解谜，获知远古的知识吗？\n", "description": "远古档案馆的中心是一个解谜：\n\n- 有一个 $2\\times 2$ 的网格，每个格子中要么有一个正整数，要么是空的；\n\n- 你可以进行若干次操作：每次操作中，你选择一个**有正整数的格子**和一个**与之相邻的空格子**，将正整数移到那个空格子中；\n\n- 给定网格的初始状态和最终状态，保证初始状态和最终状态中包含的正整数个数相同（设为 $k$ 个），且它们就是前 $k$ 个不同的正整数，问是否可以通过有限次操作从初始状态到达最终状态？\n\n下图展示了一个包含三个正整数的网格经过两次操作的情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y2dnr4ss.png)\n\n只有完成解谜，才能获得遗忘的知识，因此你希望尽快解决这个问题。\n\n**注意：网格中可能没有正整数，也可能没有空格。**", "inputFormat": "输入共包括四行，每行两个整数。\n\n前两行描述了初始状态，后两行描述了最终状态，用 $0$ 表示空格子。", "outputFormat": "如果可以从初始状态到达最终状态，输出 `Yes`，否则输出 `No`。", "hint": "**【样例 1 解释】**\n\n如题目描述中图所示。\n\n---\n\n**【样例 2 解释】**\n\n没有可移动的正整数，所以无法从初始状态到达与之不相等的最终状态。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n所有数据符合题目描述所述。\n\n- Subtask 1（40 points）：不存在空格。\n- Subtask 2（60 points）：无特殊限制。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rz2eg0ca.png)", "locale": "zh-CN"}}}
{"pid": "P7725", "type": "P", "difficulty": 4, "samples": [["3\n+ -3\n+ 4\n* -4\n", "16\n"], ["3\n+ -3\n+ -4\n* 4\n", "998244346\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": [], "title": "珍珠帝王蟹（Crab King）", "background": "在一次航程中，你偶然发现了被一片礁石环绕的帝王蟹，被月岛能量侵蚀的它又与月光有着怎样的联系呢？似乎只有击败它才能见分晓。\n", "description": "帝王蟹可以通过镶嵌宝石触发战斗，不同的宝石效果不同，但奇特的是，镶嵌宝石的顺序有时也会影响它的强度。\n\n帝王蟹有一个初始为 $0$ 的强度值，每个宝石有属性 $op$ 和 $v$，表示：\n\n- 若 $op$ 为 `+`，则镶嵌后帝王蟹的强度值将会加上 $v$；\n\n- 若 $op$ 为 `*`，则镶嵌后帝王蟹的强度值将会乘上 $v$。\n\n由于宝石的效果十分奇异，所以 $v$ 可能是负数。\n\n作为一个有挑战精神的冒险者，你希望采取某种镶嵌方式，将**每个宝石**都镶嵌**恰好一遍**，且使得帝王蟹的强度值最大。\n\n你只需要输出最大的强度值对 $998244353$ 取模的结果，注意这是一个 $[0, 998244353)$ 中的数。\n\n也就是说，如果答案为 `ans`，按照 C++ 语法，你需要输出 `(ans % P + P) % P`，其中 `P = 998244353`。\n", "inputFormat": "第一行，一个整数 $n$，表示宝石数量。\n\n接下来 $n$ 行，每行有用空格隔开的一个字符 $op$ 和一个整数 $v$，描述一个宝石。", "outputFormat": "输出一行一个整数，表示最大的强度值对 $998244353$ 取模的结果。", "hint": "**【样例 1 解释】**\n\n按照输入顺序以 $1, 2, 3$ 标记每个宝石，所有可能的镶嵌顺序如下：\n\n$1\\to 2\\to 3$：$x = ((0 + {\\color{red}{-3}}) + {\\color{red}{4}}) \\times {\\color{red}{-4}} = -4$；\n\n$1\\to 3\\to 2$：$x = ((0 + {\\color{red}{-3}}) \\times {\\color{red}{-4}}) + {\\color{red}{4}} = 16$；\n\n$2\\to 1\\to 3$：$x = ((0 + {\\color{red}{4}}) + {\\color{red}{-3}}) \\times {\\color{red}{-4}} = -4$；\n\n$2\\to 3\\to 1$：$x = ((0 + {\\color{red}{4}}) \\times {\\color{red}{-4}}) + {\\color{red}{-3}} = -19$；\n\n$3\\to 1\\to 2$：$x = ((0 \\times {\\color{red}{-4}}) + {\\color{red}{-3}}) + {\\color{red}{4}} = 1$；\n\n$3\\to 2\\to 1$：$x = ((0 \\times {\\color{red}{-4}}) + {\\color{red}{4}}) + {\\color{red}{-3}} = 1$。\n\n因此，强度值的最大值为 $16$，对 $998244353$ 取模后为 $16$。\n\n---\n\n**【样例 2 解释】**\n\n按照输入顺序以 $1, 2, 3$ 标记每个宝石，所有可能的镶嵌顺序如下：\n\n$1\\to 2\\to 3$：$x = ((0 + {\\color{red}{-3}}) + {\\color{red}{-4}}) \\times {\\color{red}{4}} = -28$；\n\n$1\\to 3\\to 2$：$x = ((0 + {\\color{red}{-3}}) \\times {\\color{red}{4}}) + {\\color{red}{-4}} = -16$；\n\n$2\\to 1\\to 3$：$x = ((0 + {\\color{red}{-4}}) + {\\color{red}{-3}}) \\times {\\color{red}{4}} = -28$；\n\n$2\\to 3\\to 1$：$x = ((0 + {\\color{red}{-4}}) \\times {\\color{red}{4}}) + {\\color{red}{-3}} = -19$；\n\n$3\\to 1\\to 2$：$x = ((0 \\times {\\color{red}{4}}) + {\\color{red}{-3}}) + {\\color{red}{-4}} = -7$；\n\n$3\\to 2\\to 1$：$x = ((0 \\times {\\color{red}{4}}) + {\\color{red}{-4}}) + {\\color{red}{-3}} = -7$。\n\n因此，强度值的最大值为 $-7$，对 $998244353$ 取模后为 $998244346$。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于全部测试数据：$1 \\le n \\le {10}^5$，$2 \\le |v| \\le {10}^6$。\n\n- Subtask 1（26 points）：$n \\le 9$，$|v| \\le 5$。\n- Subtask 2（22 points）：$v > 0$。\n- Subtask 3（12 points）：保证当 $op$ 为 `*` 时 $v > 0$。\n- Subtask 4（15 points）：保证当 $op$ 为 `+` 时 $v > 0$。\n- Subtask 5（25 points）：无特殊限制。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rwzuwu9z.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "珍珠帝王蟹（Crab King）", "background": "在一次航程中，你偶然发现了被一片礁石环绕的帝王蟹，被月岛能量侵蚀的它又与月光有着怎样的联系呢？似乎只有击败它才能见分晓。\n", "description": "帝王蟹可以通过镶嵌宝石触发战斗，不同的宝石效果不同，但奇特的是，镶嵌宝石的顺序有时也会影响它的强度。\n\n帝王蟹有一个初始为 $0$ 的强度值，每个宝石有属性 $op$ 和 $v$，表示：\n\n- 若 $op$ 为 `+`，则镶嵌后帝王蟹的强度值将会加上 $v$；\n\n- 若 $op$ 为 `*`，则镶嵌后帝王蟹的强度值将会乘上 $v$。\n\n由于宝石的效果十分奇异，所以 $v$ 可能是负数。\n\n作为一个有挑战精神的冒险者，你希望采取某种镶嵌方式，将**每个宝石**都镶嵌**恰好一遍**，且使得帝王蟹的强度值最大。\n\n你只需要输出最大的强度值对 $998244353$ 取模的结果，注意这是一个 $[0, 998244353)$ 中的数。\n\n也就是说，如果答案为 `ans`，按照 C++ 语法，你需要输出 `(ans % P + P) % P`，其中 `P = 998244353`。\n", "inputFormat": "第一行，一个整数 $n$，表示宝石数量。\n\n接下来 $n$ 行，每行有用空格隔开的一个字符 $op$ 和一个整数 $v$，描述一个宝石。", "outputFormat": "输出一行一个整数，表示最大的强度值对 $998244353$ 取模的结果。", "hint": "**【样例 1 解释】**\n\n按照输入顺序以 $1, 2, 3$ 标记每个宝石，所有可能的镶嵌顺序如下：\n\n$1\\to 2\\to 3$：$x = ((0 + {\\color{red}{-3}}) + {\\color{red}{4}}) \\times {\\color{red}{-4}} = -4$；\n\n$1\\to 3\\to 2$：$x = ((0 + {\\color{red}{-3}}) \\times {\\color{red}{-4}}) + {\\color{red}{4}} = 16$；\n\n$2\\to 1\\to 3$：$x = ((0 + {\\color{red}{4}}) + {\\color{red}{-3}}) \\times {\\color{red}{-4}} = -4$；\n\n$2\\to 3\\to 1$：$x = ((0 + {\\color{red}{4}}) \\times {\\color{red}{-4}}) + {\\color{red}{-3}} = -19$；\n\n$3\\to 1\\to 2$：$x = ((0 \\times {\\color{red}{-4}}) + {\\color{red}{-3}}) + {\\color{red}{4}} = 1$；\n\n$3\\to 2\\to 1$：$x = ((0 \\times {\\color{red}{-4}}) + {\\color{red}{4}}) + {\\color{red}{-3}} = 1$。\n\n因此，强度值的最大值为 $16$，对 $998244353$ 取模后为 $16$。\n\n---\n\n**【样例 2 解释】**\n\n按照输入顺序以 $1, 2, 3$ 标记每个宝石，所有可能的镶嵌顺序如下：\n\n$1\\to 2\\to 3$：$x = ((0 + {\\color{red}{-3}}) + {\\color{red}{-4}}) \\times {\\color{red}{4}} = -28$；\n\n$1\\to 3\\to 2$：$x = ((0 + {\\color{red}{-3}}) \\times {\\color{red}{4}}) + {\\color{red}{-4}} = -16$；\n\n$2\\to 1\\to 3$：$x = ((0 + {\\color{red}{-4}}) + {\\color{red}{-3}}) \\times {\\color{red}{4}} = -28$；\n\n$2\\to 3\\to 1$：$x = ((0 + {\\color{red}{-4}}) \\times {\\color{red}{4}}) + {\\color{red}{-3}} = -19$；\n\n$3\\to 1\\to 2$：$x = ((0 \\times {\\color{red}{4}}) + {\\color{red}{-3}}) + {\\color{red}{-4}} = -7$；\n\n$3\\to 2\\to 1$：$x = ((0 \\times {\\color{red}{4}}) + {\\color{red}{-4}}) + {\\color{red}{-3}} = -7$。\n\n因此，强度值的最大值为 $-7$，对 $998244353$ 取模后为 $998244346$。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于全部测试数据：$1 \\le n \\le {10}^5$，$2 \\le |v| \\le {10}^6$。\n\n- Subtask 1（26 points）：$n \\le 9$，$|v| \\le 5$。\n- Subtask 2（22 points）：$v > 0$。\n- Subtask 3（12 points）：保证当 $op$ 为 `*` 时 $v > 0$。\n- Subtask 4（15 points）：保证当 $op$ 为 `+` 时 $v > 0$。\n- Subtask 5（25 points）：无特殊限制。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rwzuwu9z.png)", "locale": "zh-CN"}}}
{"pid": "P7726", "type": "P", "difficulty": 4, "samples": [["4\n4 3 2 1\n1 2 1\n1 1\n1\n", "3 1 2 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["Special Judge"], "title": "天体探测仪（Astral Detector）", "background": "通过远古档案馆的探索，你成功制出了天体探测仪，你需要用它发现潜藏的天体科技。\n", "description": "想要找到天体科技，你需要先得到一串天体密码——它是一个 $1 \\sim n$ 的**排列**。\n\n天体探测仪允许对于给定的长度 $l$，返回密码中一个长度为 $l$ 的**区间的最小值**。\n\n不幸的是，所有长度为 $l$ 的区间最小值混在了一起，你得到的只是 $n$ 个**可重集合** $S_1, \\ldots , S_n$：\n\n- $S_i$ 表示所有长度为 $i$ 的区间最小值构成的可重集合。\n\n你需要根据这些 $S_i$，还原出一种可能的天体密码，保证至少存在一种正确的天体密码。", "inputFormat": "第一行，一个整数 $n$，表示天体密码的长度。\n\n接下来 $n$ 行，其中第 $i$ 行包含 $n - i + 1$ 个整数（长度为 $i$ 的区间共有 $n - i + 1$ 个），表示可重集 $S_i$ 中的每个元素，注意元素的顺序是**任意的**，而不一定是按照区间从左到右的顺序。", "outputFormat": "输出一行 $n$ 个整数 $p_1, p_2, \\ldots , p_n$，表示你还原出的天体密码。\n\n如有多种可行解，可以输出任意一种。", "hint": "**【样例 1 解释】**\n\n样例输出的天体密码为：$p = [3, 1, 2, 4]$。\n\n长度为 $1$ 的区间最小值构成的可重集合：$S_1 = \\{ 3, 1, 2, 4 \\} = \\{ 4, 3, 2, 1 \\}$。\n\n长度为 $2$ 的区间最小值构成的可重集合：$S_2 = \\{ \\min(3, 1), \\min(1, 2), \\min(2, 4) \\} = \\{ 1, 1, 2 \\} = \\{ 1, 2, 1 \\}$。\n\n长度为 $3$ 的区间最小值构成的可重集合：$S_3 = \\{ \\min(3, 1, 2), \\min(1, 2, 4) \\} = \\{ 1, 1 \\}$。\n\n长度为 $4$ 的区间最小值构成的可重集合：$S_4 = \\{ \\min(3, 1, 2, 4) \\} = \\{ 1 \\}$。\n\n每一个 $S_i$ 都与输入对应。\n\n其他可行答案也判为正确，如 $p = [4, 2, 1, 3]$。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据：$2 \\le n \\le 800$。\n\n| 子任务编号 | 分值 | $n \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $26$ | $6$ | 无 |\n| $2$ | $24$ | $16$ | 无 |\n| $3$ | $12$ | $800$ | 对于每个 $i \\in [1, n]$，$S_i$ 中不存在两个相同元素 |\n| $4$ | $38$ | $800$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "天体探测仪（Astral Detector）", "background": "通过远古档案馆的探索，你成功制出了天体探测仪，你需要用它发现潜藏的天体科技。\n", "description": "想要找到天体科技，你需要先得到一串天体密码——它是一个 $1 \\sim n$ 的**排列**。\n\n天体探测仪允许对于给定的长度 $l$，返回密码中一个长度为 $l$ 的**区间的最小值**。\n\n不幸的是，所有长度为 $l$ 的区间最小值混在了一起，你得到的只是 $n$ 个**可重集合** $S_1, \\ldots , S_n$：\n\n- $S_i$ 表示所有长度为 $i$ 的区间最小值构成的可重集合。\n\n你需要根据这些 $S_i$，还原出一种可能的天体密码，保证至少存在一种正确的天体密码。", "inputFormat": "第一行，一个整数 $n$，表示天体密码的长度。\n\n接下来 $n$ 行，其中第 $i$ 行包含 $n - i + 1$ 个整数（长度为 $i$ 的区间共有 $n - i + 1$ 个），表示可重集 $S_i$ 中的每个元素，注意元素的顺序是**任意的**，而不一定是按照区间从左到右的顺序。", "outputFormat": "输出一行 $n$ 个整数 $p_1, p_2, \\ldots , p_n$，表示你还原出的天体密码。\n\n如有多种可行解，可以输出任意一种。", "hint": "**【样例 1 解释】**\n\n样例输出的天体密码为：$p = [3, 1, 2, 4]$。\n\n长度为 $1$ 的区间最小值构成的可重集合：$S_1 = \\{ 3, 1, 2, 4 \\} = \\{ 4, 3, 2, 1 \\}$。\n\n长度为 $2$ 的区间最小值构成的可重集合：$S_2 = \\{ \\min(3, 1), \\min(1, 2), \\min(2, 4) \\} = \\{ 1, 1, 2 \\} = \\{ 1, 2, 1 \\}$。\n\n长度为 $3$ 的区间最小值构成的可重集合：$S_3 = \\{ \\min(3, 1, 2), \\min(1, 2, 4) \\} = \\{ 1, 1 \\}$。\n\n长度为 $4$ 的区间最小值构成的可重集合：$S_4 = \\{ \\min(3, 1, 2, 4) \\} = \\{ 1 \\}$。\n\n每一个 $S_i$ 都与输入对应。\n\n其他可行答案也判为正确，如 $p = [4, 2, 1, 3]$。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据：$2 \\le n \\le 800$。\n\n| 子任务编号 | 分值 | $n \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $26$ | $6$ | 无 |\n| $2$ | $24$ | $16$ | 无 |\n| $3$ | $12$ | $800$ | 对于每个 $i \\in [1, n]$，$S_i$ 中不存在两个相同元素 |\n| $4$ | $38$ | $800$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P7727", "type": "P", "difficulty": 5, "samples": [["2\n0 0\n1 2\n", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": [], "title": "风暴之眼（Eye of the Storm）", "background": "通过月岛，帝王蟹和天体探测仪，你成功拼合了三个天体科技，接下来你要做的，就是来到风暴之眼的中心，准备那个神秘实验的最后一步。\n\n最终的真相近在咫尺，你能否成功通过这场考验呢？", "description": "天体风暴中的气象瞬息万变。\n\n风暴中的道路构成一棵 $n$ 个结点的**无根树**，第 $i$ 个结点有初始权值 $w_i$（$w_i$ 为 $0$ 或 $1$）和类型 $t_i$。\n\n结点的类型分为两种：$\\texttt{AND}$ 型结点和 $\\texttt{OR}$ 型结点。\n\n对于 $\\texttt{AND}$ 型结点，每一秒结束后它的权值将变为**它与它所有邻居上一秒权值的 $\\texttt{AND}$ 和**；\n\n对于 $\\texttt{OR}$ 型结点，每一秒结束后它的权值将变为**它与它所有邻居上一秒权值的 $\\texttt{OR}$ 和**。\n\n现在，已知从某一时刻起，所有结点的权值都不再发生任何变化，将此时点 $i$ 的权值称为 $a_i$。\n\n现不知每个点的初始权值和类型，只知道最终每个点的权值 $a_i$，求出有多少种可能的初始权值和类型的组合，答案对 $998244353$ 取模。", "inputFormat": "第一行，一个整数 $n$，表示树的结点数。\n\n第二行，$n$ 个整数 $a_1, a_2, \\ldots , a_n$，表示每个结点最终的权值。\n\n接下来 $n-1$ 行，每行两个整数 $x,y$，描述无根树中的一条边。", "outputFormat": "输出一行一个整数，表示可能的初始权值和类型的组合数量。", "hint": "**【样例 1 解释】**\n\n有如下六种初始权值和类型的组合：\n\n1. $((w_1, t_1), (w_2, t_2)) = ((0, \\texttt{AND}), (0, \\texttt{AND}))$。\n\n2. $((w_1, t_1), (w_2, t_2)) = ((0, \\texttt{AND}), (0, \\texttt{OR}))$。\n\n3. $((w_1, t_1), (w_2, t_2)) = ((0, \\texttt{OR}), (0, \\texttt{AND}))$。\n\n4. $((w_1, t_1), (w_2, t_2)) = ((0, \\texttt{OR}), (0, \\texttt{OR}))$。\n\n5. $((w_1, t_1), (w_2, t_2)) = ((1, \\texttt{AND}), (0, \\texttt{AND}))$。\n\n6. $((w_1, t_1), (w_2, t_2)) = ((0, \\texttt{AND}), (1, \\texttt{AND}))$。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$2 \\le n \\le 2 \\times {10}^5$，$1 \\le x, y \\le n$，$a_i \\in \\{ 0, 1 \\}$，保证输入构成一棵树。\n\n| 子任务编号 | 分值 | $n\\leq$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $10$ | $10$ | 无 |\n| $2$ | $22$ | $20$ | 无 |\n| $3$ | $22$ | $1000$ | 无 |\n| $4$ | $11$ | ${10}^5$ | $y=x+1$ |\n| $5$ | $15$ | ${10}^5$ | $a_i=0$ |\n| $6$ | $20$ | $2 \\times {10}^5$ | 无 |\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j4citkld.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "风暴之眼（Eye of the Storm）", "background": "通过月岛，帝王蟹和天体探测仪，你成功拼合了三个天体科技，接下来你要做的，就是来到风暴之眼的中心，准备那个神秘实验的最后一步。\n\n最终的真相近在咫尺，你能否成功通过这场考验呢？", "description": "天体风暴中的气象瞬息万变。\n\n风暴中的道路构成一棵 $n$ 个结点的**无根树**，第 $i$ 个结点有初始权值 $w_i$（$w_i$ 为 $0$ 或 $1$）和类型 $t_i$。\n\n结点的类型分为两种：$\\texttt{AND}$ 型结点和 $\\texttt{OR}$ 型结点。\n\n对于 $\\texttt{AND}$ 型结点，每一秒结束后它的权值将变为**它与它所有邻居上一秒权值的 $\\texttt{AND}$ 和**；\n\n对于 $\\texttt{OR}$ 型结点，每一秒结束后它的权值将变为**它与它所有邻居上一秒权值的 $\\texttt{OR}$ 和**。\n\n现在，已知从某一时刻起，所有结点的权值都不再发生任何变化，将此时点 $i$ 的权值称为 $a_i$。\n\n现不知每个点的初始权值和类型，只知道最终每个点的权值 $a_i$，求出有多少种可能的初始权值和类型的组合，答案对 $998244353$ 取模。", "inputFormat": "第一行，一个整数 $n$，表示树的结点数。\n\n第二行，$n$ 个整数 $a_1, a_2, \\ldots , a_n$，表示每个结点最终的权值。\n\n接下来 $n-1$ 行，每行两个整数 $x,y$，描述无根树中的一条边。", "outputFormat": "输出一行一个整数，表示可能的初始权值和类型的组合数量。", "hint": "**【样例 1 解释】**\n\n有如下六种初始权值和类型的组合：\n\n1. $((w_1, t_1), (w_2, t_2)) = ((0, \\texttt{AND}), (0, \\texttt{AND}))$。\n\n2. $((w_1, t_1), (w_2, t_2)) = ((0, \\texttt{AND}), (0, \\texttt{OR}))$。\n\n3. $((w_1, t_1), (w_2, t_2)) = ((0, \\texttt{OR}), (0, \\texttt{AND}))$。\n\n4. $((w_1, t_1), (w_2, t_2)) = ((0, \\texttt{OR}), (0, \\texttt{OR}))$。\n\n5. $((w_1, t_1), (w_2, t_2)) = ((1, \\texttt{AND}), (0, \\texttt{AND}))$。\n\n6. $((w_1, t_1), (w_2, t_2)) = ((0, \\texttt{AND}), (1, \\texttt{AND}))$。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100 \\%$ 的数据，$2 \\le n \\le 2 \\times {10}^5$，$1 \\le x, y \\le n$，$a_i \\in \\{ 0, 1 \\}$，保证输入构成一棵树。\n\n| 子任务编号 | 分值 | $n\\leq$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $10$ | $10$ | 无 |\n| $2$ | $22$ | $20$ | 无 |\n| $3$ | $22$ | $1000$ | 无 |\n| $4$ | $11$ | ${10}^5$ | $y=x+1$ |\n| $5$ | $15$ | ${10}^5$ | $a_i=0$ |\n| $6$ | $20$ | $2 \\times {10}^5$ | 无 |\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j4citkld.png)", "locale": "zh-CN"}}}
