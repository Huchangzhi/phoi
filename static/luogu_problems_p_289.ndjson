{"pid": "P6850", "type": "P", "difficulty": 1, "samples": [["50 50 72 56 100 40 0 1 446", "AFO"], ["50 95 100 64 100 72 30 0 446", "AKIOI"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["洛谷月赛"], "title": "NOI", "background": "小 L 是一个菜鸡。\n\n啥也不会的小 L 上了 NOI 考场。", "description": "由于小 L 不会算数，现在小 L 告诉了你他每题的分数和队线，请你告诉他是否进队。\n\nNOI 分数的计算方式是：\n\n1. 笔试基础有 $50$ 分，每通过一题加 $1$ 分。\n2. 实际得分是每题的分数加上笔试的分数。\n3. 如果是 A 类，总分在此基础上再加 $5$ 分。\n\n\n", "inputFormat": "输入 $9$ 个数 $a,b,c,d,e,f,g,h,i$，分别表示笔试通过题数, D1T1,D1T2,D1T3,D2T1,D2T2,D2T3 得分，是否 A 类（是 $1$，不是 $0$），集训队分数线。\n", "outputFormat": "输出一行一个字符串。\n\n如果进了集训队，则输出 `AKIOI`。\n\n如果没进，输出 `AFO`。", "hint": "#### 「样例解释」\n\n样例第一个是退役菜鸡小 L 的 NOI2020 成绩。\n\n第二个是某位队爷的 NOI2020 成绩。\n\n~~这不是啥都没解释吗~~\n\n---\n\n#### 「数据范围与说明」\n\n**本题采用捆绑测试**。仅有通过某个 Subtask 中所有测试点才能获得该 Subtask 的分数。\n\n- Subtask 1(30 points)：$h = 0$，$a = 50$，$i = 700$；\n- Subtask 2(30 points)：$h = 0$，$a = 50$；\n- Subtask 3(40 points)：无特殊限制。\n\n对于所有数据，$0\\leq a \\leq 50$，$0\\leq b,c,d,e,f,g \\leq 100$，$0 \\leq h \\leq 1$，$205\\leq i \\leq 705$。\n\n此处不考虑第 $50$ 名同分的情况，可以认为如果同分小 L 优先。\n\n不保证测试数据为真实成绩。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "NOI", "background": "小 L 是一个菜鸡。\n\n啥也不会的小 L 上了 NOI 考场。", "description": "由于小 L 不会算数，现在小 L 告诉了你他每题的分数和队线，请你告诉他是否进队。\n\nNOI 分数的计算方式是：\n\n1. 笔试基础有 $50$ 分，每通过一题加 $1$ 分。\n2. 实际得分是每题的分数加上笔试的分数。\n3. 如果是 A 类，总分在此基础上再加 $5$ 分。\n\n\n", "inputFormat": "输入 $9$ 个数 $a,b,c,d,e,f,g,h,i$，分别表示笔试通过题数, D1T1,D1T2,D1T3,D2T1,D2T2,D2T3 得分，是否 A 类（是 $1$，不是 $0$），集训队分数线。\n", "outputFormat": "输出一行一个字符串。\n\n如果进了集训队，则输出 `AKIOI`。\n\n如果没进，输出 `AFO`。", "hint": "#### 「样例解释」\n\n样例第一个是退役菜鸡小 L 的 NOI2020 成绩。\n\n第二个是某位队爷的 NOI2020 成绩。\n\n~~这不是啥都没解释吗~~\n\n---\n\n#### 「数据范围与说明」\n\n**本题采用捆绑测试**。仅有通过某个 Subtask 中所有测试点才能获得该 Subtask 的分数。\n\n- Subtask 1(30 points)：$h = 0$，$a = 50$，$i = 700$；\n- Subtask 2(30 points)：$h = 0$，$a = 50$；\n- Subtask 3(40 points)：无特殊限制。\n\n对于所有数据，$0\\leq a \\leq 50$，$0\\leq b,c,d,e,f,g \\leq 100$，$0 \\leq h \\leq 1$，$205\\leq i \\leq 705$。\n\n此处不考虑第 $50$ 名同分的情况，可以认为如果同分小 L 优先。\n\n不保证测试数据为真实成绩。", "locale": "zh-CN"}}}
{"pid": "P6851", "type": "P", "difficulty": 3, "samples": [["3 3 1 4\n3 5\n1 2\n2 6\n1 6\n3 5\n1 4", "10\n2\n1\n-1"], ["1 2 1 5\n1 5\n1 8\n1 4", "10\n-1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["Special Judge", "O2优化", "洛谷月赛"], "title": "onu", "background": "小 C 和小 D 是好朋友。他们正在尝试一种全新的牌类游戏——onu！", "description": "为了增加一点趣味性，小 C 和小 D 每人买了 $v$ 颗糖用来当作筹码。\n\nonu 的规则是这样的：\n\n游戏共 $m$ 轮，由两人进行，一位先手，一位后手。在这里，我们默认先手的玩家是小 C，而后手的玩家是小 D。\n\n在最开始时，小 C 会得到 $m$ 张牌，每张牌有其对应的花色、点数。而小 D 会得到 $n$ 张牌。\n\n每一轮开始时，小 C 会打出一张牌，放在桌面上展示给小 D 看。\n\n在此之后，小 D 需要跟牌，即打出他手上的一张牌，且该张牌必须满足其花色与小 C 打出的牌相同。若小 D 没有满足条件的牌或者是他**选择弃权（也就是说，可以选择当前回合是否打出牌）**，弃掉小 C 打出的牌后跳过该轮，视为小 D 败。\n\n在小 D 打出满足要求的牌后，进行一次拼点，也即比较小 C 和小 D 打出的牌的点数：如果小 D 出的牌的点数**大于等于**小 C 的牌的点数，则小 D 胜，否则小 D 败。容易知道，这样不会出现平局的情况。\n\n最后，胜的一方会从败的一方拿走 $c$ 颗糖，且双方均需弃掉打出的牌，并会**再从商店买等于自己打出的牌的点数颗糖**。例如小 C 和小 D 打的点数分别是 $3$ 和 $5$，那么小 C 会去购买 $3$ 颗糖，小 D 购买 $5$ 颗。\n\n为了不破坏两人间的友好关系，不出现一方被另一方完全赢光的情况，他们在最开始买糖时，已经约定好了 $v \\ge c \\times m$。\n\n现在，小 D 通过一些神秘手段，知道了小 C 在这 $m$ 轮中打出的所有牌，他希望在 $m$ 轮游戏进行之后，让自己的糖数尽量多。你可以帮他找到最优的方案吗？", "inputFormat": "第一行四个正整数表示 $n, m, c, v$，含义如题目描述所示。\n\n接下来 $n$ 行中，第 $i$ 行每行两个正整数 $a _i, b _i$，表示了小 D 一开始拥有的第 $i$ 张牌的花色、点数。\n\n接下来 $m$ 行中，第 $i$ 行每行两个正整数 $a _i, b _i$，表示小 C 第 $i$ 轮会打出的牌的花色、点数。\n\n注意可能会有花色点数均相同的牌。", "outputFormat": "输出共 $m + 1$ 行。\n\n第一行输出一个正整数，表示在最优方案中，小 D 最多能剩余的糖数。\n\n接下来 $m$ 行中，第 $i$ 行输出一行一个正整数，表示小 D 在第 $i$ 轮打出的牌的编号。如果小 D 跳过了该轮，输出 `-1`。\n\n**本题采用 Special Judge，如果有多种最优方案，输出任意一个即可。**", "hint": "#### 「样例 1 解释」\n\n以 $(a, b)$ 来表示一张花色为 $a$，点数为 $b$ 的牌。\n\n一开始，小 D 有 $4$ 颗糖。小 C 会依次打出 $(1, 6), (3, 5), (1, 4)$ 三张牌。\n\n一种最优的方案是：\n\n第一轮，小 C 打出第一张牌 $(1, 6)$，小 D 打出第二张牌 $(1, 2)$，小 D 负，被拿走 $1$ 颗糖，购买 $2$ 颗糖。此时其有 $5$ 颗糖。\n\n第二轮，小 C 打出 $(3, 5)$，小 D 打出 $(3, 5)$，由于点数**大于等于**小 C 的牌，所以小 D 胜，拿到 $1$ 颗糖，购买 $5$ 颗糖。此时其有 $11$ 颗糖。\n\n第三轮，小 C 打出 $(1, 4)$。由于小 D 在第一轮已经打出过第二张牌 $(1, 2)$ 了，所以没有牌能打，输出 $-1$ 并判小 D 负，被拿走 $1$ 颗糖，此时其有 $10$ 颗糖。\n\n#### 「样例 2 解释」\n\n最开始有 $5$ 颗糖。\n\n第一轮时小 C 打出 $(1, 8)$，小 D 选择弃权，败，于是剩下了 $5 - 1 = 4$ 颗糖；\n\n第二轮时小 C 打出 $(1, 4)$，小 D 打出 $(1, 5)$，胜，得到 $5 + 1$ 颗糖，故最终小 D 有 $10$ 颗糖。\n\n----\n\n#### 「Special Judge 说明」\n\n**请认真阅读输出格式**。\n\n每个测试点仅有 $0$ 分和满分的区别。如果你的输出出现了以下情况，将会被判为 $0$ 分：\n\n- 输出格式不符，如没有正确换行，输出了一些奇奇怪怪的字符等。\n- 输出的最优糖果数与标准答案不同。\n- 打牌的方案不合法，即不能打出已经弃掉的牌，也不能打出花色与小 C 打出的牌不相同的牌。\n- 按照你所输出的方案打完牌后，小 D 的剩余糖果数与你第一行所输出的数字不同。\n\n---\n\n#### 「数据范围」\n\n**本题采用捆绑测试**。\n\n- Subtask 1(10 points)：$n, m \\le 5$；\n- Subtask 2(30 points)：$n, m \\le 1000$；\n- Subtask 3(20 points)：$c = 0$；\n- Subtask 4(20 points)：$a _i = 1$；\n- Subtask 5(20 points)：无特殊限制。\n\n所有数据保证 $1 \\le n, m, a _i, b _i\\le 10 ^5$，$0 \\le c \\le 10 ^5$，$c \\times m \\le v \\le 10 ^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "onu", "background": "小 C 和小 D 是好朋友。他们正在尝试一种全新的牌类游戏——onu！", "description": "为了增加一点趣味性，小 C 和小 D 每人买了 $v$ 颗糖用来当作筹码。\n\nonu 的规则是这样的：\n\n游戏共 $m$ 轮，由两人进行，一位先手，一位后手。在这里，我们默认先手的玩家是小 C，而后手的玩家是小 D。\n\n在最开始时，小 C 会得到 $m$ 张牌，每张牌有其对应的花色、点数。而小 D 会得到 $n$ 张牌。\n\n每一轮开始时，小 C 会打出一张牌，放在桌面上展示给小 D 看。\n\n在此之后，小 D 需要跟牌，即打出他手上的一张牌，且该张牌必须满足其花色与小 C 打出的牌相同。若小 D 没有满足条件的牌或者是他**选择弃权（也就是说，可以选择当前回合是否打出牌）**，弃掉小 C 打出的牌后跳过该轮，视为小 D 败。\n\n在小 D 打出满足要求的牌后，进行一次拼点，也即比较小 C 和小 D 打出的牌的点数：如果小 D 出的牌的点数**大于等于**小 C 的牌的点数，则小 D 胜，否则小 D 败。容易知道，这样不会出现平局的情况。\n\n最后，胜的一方会从败的一方拿走 $c$ 颗糖，且双方均需弃掉打出的牌，并会**再从商店买等于自己打出的牌的点数颗糖**。例如小 C 和小 D 打的点数分别是 $3$ 和 $5$，那么小 C 会去购买 $3$ 颗糖，小 D 购买 $5$ 颗。\n\n为了不破坏两人间的友好关系，不出现一方被另一方完全赢光的情况，他们在最开始买糖时，已经约定好了 $v \\ge c \\times m$。\n\n现在，小 D 通过一些神秘手段，知道了小 C 在这 $m$ 轮中打出的所有牌，他希望在 $m$ 轮游戏进行之后，让自己的糖数尽量多。你可以帮他找到最优的方案吗？", "inputFormat": "第一行四个正整数表示 $n, m, c, v$，含义如题目描述所示。\n\n接下来 $n$ 行中，第 $i$ 行每行两个正整数 $a _i, b _i$，表示了小 D 一开始拥有的第 $i$ 张牌的花色、点数。\n\n接下来 $m$ 行中，第 $i$ 行每行两个正整数 $a _i, b _i$，表示小 C 第 $i$ 轮会打出的牌的花色、点数。\n\n注意可能会有花色点数均相同的牌。", "outputFormat": "输出共 $m + 1$ 行。\n\n第一行输出一个正整数，表示在最优方案中，小 D 最多能剩余的糖数。\n\n接下来 $m$ 行中，第 $i$ 行输出一行一个正整数，表示小 D 在第 $i$ 轮打出的牌的编号。如果小 D 跳过了该轮，输出 `-1`。\n\n**本题采用 Special Judge，如果有多种最优方案，输出任意一个即可。**", "hint": "#### 「样例 1 解释」\n\n以 $(a, b)$ 来表示一张花色为 $a$，点数为 $b$ 的牌。\n\n一开始，小 D 有 $4$ 颗糖。小 C 会依次打出 $(1, 6), (3, 5), (1, 4)$ 三张牌。\n\n一种最优的方案是：\n\n第一轮，小 C 打出第一张牌 $(1, 6)$，小 D 打出第二张牌 $(1, 2)$，小 D 负，被拿走 $1$ 颗糖，购买 $2$ 颗糖。此时其有 $5$ 颗糖。\n\n第二轮，小 C 打出 $(3, 5)$，小 D 打出 $(3, 5)$，由于点数**大于等于**小 C 的牌，所以小 D 胜，拿到 $1$ 颗糖，购买 $5$ 颗糖。此时其有 $11$ 颗糖。\n\n第三轮，小 C 打出 $(1, 4)$。由于小 D 在第一轮已经打出过第二张牌 $(1, 2)$ 了，所以没有牌能打，输出 $-1$ 并判小 D 负，被拿走 $1$ 颗糖，此时其有 $10$ 颗糖。\n\n#### 「样例 2 解释」\n\n最开始有 $5$ 颗糖。\n\n第一轮时小 C 打出 $(1, 8)$，小 D 选择弃权，败，于是剩下了 $5 - 1 = 4$ 颗糖；\n\n第二轮时小 C 打出 $(1, 4)$，小 D 打出 $(1, 5)$，胜，得到 $5 + 1$ 颗糖，故最终小 D 有 $10$ 颗糖。\n\n----\n\n#### 「Special Judge 说明」\n\n**请认真阅读输出格式**。\n\n每个测试点仅有 $0$ 分和满分的区别。如果你的输出出现了以下情况，将会被判为 $0$ 分：\n\n- 输出格式不符，如没有正确换行，输出了一些奇奇怪怪的字符等。\n- 输出的最优糖果数与标准答案不同。\n- 打牌的方案不合法，即不能打出已经弃掉的牌，也不能打出花色与小 C 打出的牌不相同的牌。\n- 按照你所输出的方案打完牌后，小 D 的剩余糖果数与你第一行所输出的数字不同。\n\n---\n\n#### 「数据范围」\n\n**本题采用捆绑测试**。\n\n- Subtask 1(10 points)：$n, m \\le 5$；\n- Subtask 2(30 points)：$n, m \\le 1000$；\n- Subtask 3(20 points)：$c = 0$；\n- Subtask 4(20 points)：$a _i = 1$；\n- Subtask 5(20 points)：无特殊限制。\n\n所有数据保证 $1 \\le n, m, a _i, b _i\\le 10 ^5$，$0 \\le c \\le 10 ^5$，$c \\times m \\le v \\le 10 ^{12}$。", "locale": "zh-CN"}}}
{"pid": "P6852", "type": "P", "difficulty": 5, "samples": [["3 4\n0 0 0\n0 1 1\n0 2 2\n1 3 3", "3 0 1 2"], ["5 7\n0 1 0\n4 5 0\n1 3 1\n0 5 6\n0 5 6\n2 5 3\n2 3 1", "4 3 5 0 1 2 "]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["Special Judge", "洛谷月赛"], "title": "Mex", "background": "忘掉种过的花/重新的出发/放弃理想吧。", "description": "小 G 曾经有一个 $0$ 到 $n$ 的排列（下标从 $0$ 开始），但他忘记了这个排列。\n\n现在他想把这个排列找回来，他努力地回想，只能回想起关于这个排列的 $m$ 条信息，每条信息形如 $(l,r,val)$，表示区间 $[l,r]$ 的 ${\\rm mex}$ 值为 $val$。一个区间的 ${\\rm mex}$ 值是最小的没有在这个区间中出现的自然数。\n\n小 G 把 $n$ 和这 $m$ 条信息告诉了你，希望你能帮他还原出一个排列，或者告诉他他的回忆出现了问题。\n\n", "inputFormat": "第一行两个整数 $n$ 和 $m$，含义见上。\n\n随后 $m$ 行每行三个整数 $l,r,val$ 描述一条信息，表示区间 $[l,r]$ 的 ${\\rm mex}$ 值为 $val$。", "outputFormat": "如果不存在满足所有条件的排列，输出 $-1$。\n\n否则输出一行 $n+1$ 个正整数，表示一个 $0$ 到 $n$ 的排列。\n\n**本题采用 Special Judge**。如果满足条件的排列有多个，你可以输出任意一个。", "hint": "**本题采用捆绑测试**。你只有通过 subtask 中的所有测试点才能获得该 subtask 的分数。\n\n- Subtask 1(15 points)：$n,m\\le 10$；\n- Subtask 2(20 points)：$n,m\\le 20$；\n- Subtask 3(10 points)：$val=0$；\n- Subtask 4(15 points)：数据随机生成；\n- Subtask 5(10 points)：$n\\le 10^5$；\n- Subtask 6(30 points)：无特殊限制。\n\n对于所有的数据满足：$1 \\le n,m\\le 5\\times 10^5$，$ 0\\le l,r\\le n$，$0\\le val\\le n+1$。\n\nSubtask4 的数据生成方式为：随机生成一个排列，再随机 $m$ 个区间求出它们的 ${\\rm mex}$ 值作为条件。\n\n本题输入输出量较大，请注意使用效率较高的 IO 方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Mex", "background": "忘掉种过的花/重新的出发/放弃理想吧。", "description": "小 G 曾经有一个 $0$ 到 $n$ 的排列（下标从 $0$ 开始），但他忘记了这个排列。\n\n现在他想把这个排列找回来，他努力地回想，只能回想起关于这个排列的 $m$ 条信息，每条信息形如 $(l,r,val)$，表示区间 $[l,r]$ 的 ${\\rm mex}$ 值为 $val$。一个区间的 ${\\rm mex}$ 值是最小的没有在这个区间中出现的自然数。\n\n小 G 把 $n$ 和这 $m$ 条信息告诉了你，希望你能帮他还原出一个排列，或者告诉他他的回忆出现了问题。\n\n", "inputFormat": "第一行两个整数 $n$ 和 $m$，含义见上。\n\n随后 $m$ 行每行三个整数 $l,r,val$ 描述一条信息，表示区间 $[l,r]$ 的 ${\\rm mex}$ 值为 $val$。", "outputFormat": "如果不存在满足所有条件的排列，输出 $-1$。\n\n否则输出一行 $n+1$ 个正整数，表示一个 $0$ 到 $n$ 的排列。\n\n**本题采用 Special Judge**。如果满足条件的排列有多个，你可以输出任意一个。", "hint": "**本题采用捆绑测试**。你只有通过 subtask 中的所有测试点才能获得该 subtask 的分数。\n\n- Subtask 1(15 points)：$n,m\\le 10$；\n- Subtask 2(20 points)：$n,m\\le 20$；\n- Subtask 3(10 points)：$val=0$；\n- Subtask 4(15 points)：数据随机生成；\n- Subtask 5(10 points)：$n\\le 10^5$；\n- Subtask 6(30 points)：无特殊限制。\n\n对于所有的数据满足：$1 \\le n,m\\le 5\\times 10^5$，$ 0\\le l,r\\le n$，$0\\le val\\le n+1$。\n\nSubtask4 的数据生成方式为：随机生成一个排列，再随机 $m$ 个区间求出它们的 ${\\rm mex}$ 值作为条件。\n\n本题输入输出量较大，请注意使用效率较高的 IO 方式。", "locale": "zh-CN"}}}
{"pid": "P6853", "type": "P", "difficulty": 5, "samples": [["4", "4\n2 1 2\n2 2 4\n2 2 3\n3 1 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["Special Judge", "O2优化", "洛谷月赛"], "title": "station", "background": "", "description": "你需要规划一个城市的公交路线。\n\n总共有 $n$ 条路线和 $m$ 个车站，编号均从 $1$ 开始。\n\n你的主要任务是，规划每一条路线应该经过哪些车站。换言之，你要任意选择一个车站的子集，让这条路线经过这个子集中的所有车站。\n\n定义两条路线是**关联**的，当且仅当它们经过了同一个车站，也就是它们的经过车站集合有交。\n\n一个路线方案必须满足如下限制：\n\n1. 一条线路不可能只通过一个车站，所以**每条线路至少要经过两个车站**；\n\n2. 一个车站的运载能力是有限的，所以**一个车站最多只能被三条线路经过**。\n\n3. 为了保证交通顺畅，对于任意两条不同线路 $i, j(i \\not = j)$，都存在第三条线路 $k (k \\not = i, k \\not = j)$，使得 $k$ 与 $i, j$ 均**关联**。\n\n现给定 $n$，请求出一个最小的 $m$ 和具体规划方案。", "inputFormat": "一行一个正整数 $n$，含义如题目所示。", "outputFormat": "第一行输出一个正整数 $m$，表示在你的规划方案中所用车站的数量。\n\n接下来 $n$ 行中，第 $i$ 行输出一个正整数 $c$ 和若干个正整数 $a _1, a _2, \\cdots, a _c$，表示在你的方案中第 $i$ 条路线经过的车站数目以及经过车站的编号。", "hint": "#### 「样例 1 解释」\n\n如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/shh1iy56.png)\n\n首先易知其满足题目描述中所给定的一、二条件。下面考虑三条件。\n\n先考虑 $1, 2, 4$ 号线，可以发现这三条线路构成了一个三角形，任意两个线路均有剩下的一条线路与它们**关联**；\n\n再对 $3$ 号线与 $1, 2, 4$ 号线分别考虑，容易验证满足对于任意 $x \\in \\{1, 2, 4\\}$，均有另一条线路 $y \\in \\{1, 2, 4\\}, y \\not = x$ 与 $3, x$ 同时**关联**，满足题目条件。\n\n---\n\n#### 「Special Judge 说明与评分细则」\n\n**请认真阅读输出格式**。\n\n如果你的输出出现了如下情况，将会被判为 $0$ 分：\n\n- 输出格式不符。如没有正确换行，输出了一些奇奇怪怪的字符，未输出车站个数等。\n- 某一条线路经过了相同的车站，或者有某一个车站的编号不在 $[1, m]$ 内。\n- 没有满足题目描述中所给定的三条限制。\n- 输出文件大小过大或者是 $m$ 过大。如果你的 $m$ 大于 $10 ^6$ 将直接判为 $0$ 分。输出文件过大将导致 TLE 或 OLE，建议将输出文件大小控制在 25Mb 以内。\n\n在没有被判为 $0$ 分的基础上，将会根据你输出的 $m$ 的大小进行判分。\n\n每个测试点评测时会有 $10$ 个评测参数 $w _1, w _2, \\cdots, w _{10}$，若你输出的 $m$ 小于等于其中 $k$ 个参数，那么你将得到该测试点 $k \\times 10\\%$ 的分数。\n\n这 $10$ 个参数是对外不可见的，也即你的程序在运行时无法获知这些评测参数。\n\n---\n\n#### 「数据范围」\n\n**本题采用捆绑测试**。你在某个 subtask 的得分为在**该 subtask 的所有测试点中的最小得分**。\n\n- Subtask 1(20 points)：$n \\le 10$。此处我们保证 $10$ 个评分参数均为 $10 ^6$。\n- Subtask 2(40 points)：$n \\le 200$。\n- Subtask 3(40 points)：无特殊限制。\n\n对于所有数据，均满足 $3 \\le n \\le 4 \\times 10 ^3$，且 $ans + 5 \\le w _1 \\le w _2 \\le \\cdots \\le w _{10} = 10 ^6$，其中 $ans$ 表示标准答案。\n\n请注意此处的 $w _{10} = 10^6$ 的条件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "station", "background": "", "description": "你需要规划一个城市的公交路线。\n\n总共有 $n$ 条路线和 $m$ 个车站，编号均从 $1$ 开始。\n\n你的主要任务是，规划每一条路线应该经过哪些车站。换言之，你要任意选择一个车站的子集，让这条路线经过这个子集中的所有车站。\n\n定义两条路线是**关联**的，当且仅当它们经过了同一个车站，也就是它们的经过车站集合有交。\n\n一个路线方案必须满足如下限制：\n\n1. 一条线路不可能只通过一个车站，所以**每条线路至少要经过两个车站**；\n\n2. 一个车站的运载能力是有限的，所以**一个车站最多只能被三条线路经过**。\n\n3. 为了保证交通顺畅，对于任意两条不同线路 $i, j(i \\not = j)$，都存在第三条线路 $k (k \\not = i, k \\not = j)$，使得 $k$ 与 $i, j$ 均**关联**。\n\n现给定 $n$，请求出一个最小的 $m$ 和具体规划方案。", "inputFormat": "一行一个正整数 $n$，含义如题目所示。", "outputFormat": "第一行输出一个正整数 $m$，表示在你的规划方案中所用车站的数量。\n\n接下来 $n$ 行中，第 $i$ 行输出一个正整数 $c$ 和若干个正整数 $a _1, a _2, \\cdots, a _c$，表示在你的方案中第 $i$ 条路线经过的车站数目以及经过车站的编号。", "hint": "#### 「样例 1 解释」\n\n如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/shh1iy56.png)\n\n首先易知其满足题目描述中所给定的一、二条件。下面考虑三条件。\n\n先考虑 $1, 2, 4$ 号线，可以发现这三条线路构成了一个三角形，任意两个线路均有剩下的一条线路与它们**关联**；\n\n再对 $3$ 号线与 $1, 2, 4$ 号线分别考虑，容易验证满足对于任意 $x \\in \\{1, 2, 4\\}$，均有另一条线路 $y \\in \\{1, 2, 4\\}, y \\not = x$ 与 $3, x$ 同时**关联**，满足题目条件。\n\n---\n\n#### 「Special Judge 说明与评分细则」\n\n**请认真阅读输出格式**。\n\n如果你的输出出现了如下情况，将会被判为 $0$ 分：\n\n- 输出格式不符。如没有正确换行，输出了一些奇奇怪怪的字符，未输出车站个数等。\n- 某一条线路经过了相同的车站，或者有某一个车站的编号不在 $[1, m]$ 内。\n- 没有满足题目描述中所给定的三条限制。\n- 输出文件大小过大或者是 $m$ 过大。如果你的 $m$ 大于 $10 ^6$ 将直接判为 $0$ 分。输出文件过大将导致 TLE 或 OLE，建议将输出文件大小控制在 25Mb 以内。\n\n在没有被判为 $0$ 分的基础上，将会根据你输出的 $m$ 的大小进行判分。\n\n每个测试点评测时会有 $10$ 个评测参数 $w _1, w _2, \\cdots, w _{10}$，若你输出的 $m$ 小于等于其中 $k$ 个参数，那么你将得到该测试点 $k \\times 10\\%$ 的分数。\n\n这 $10$ 个参数是对外不可见的，也即你的程序在运行时无法获知这些评测参数。\n\n---\n\n#### 「数据范围」\n\n**本题采用捆绑测试**。你在某个 subtask 的得分为在**该 subtask 的所有测试点中的最小得分**。\n\n- Subtask 1(20 points)：$n \\le 10$。此处我们保证 $10$ 个评分参数均为 $10 ^6$。\n- Subtask 2(40 points)：$n \\le 200$。\n- Subtask 3(40 points)：无特殊限制。\n\n对于所有数据，均满足 $3 \\le n \\le 4 \\times 10 ^3$，且 $ans + 5 \\le w _1 \\le w _2 \\le \\cdots \\le w _{10} = 10 ^6$，其中 $ans$ 表示标准答案。\n\n请注意此处的 $w _{10} = 10^6$ 的条件。", "locale": "zh-CN"}}}
{"pid": "P6854", "type": "P", "difficulty": 6, "samples": [["10\n2 2 1 1 2 2 3 1 3 3 ", "8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["线段树", "洛谷月赛"], "title": "Tram", "background": "电车开了，他的声音在我的脑海中萦绕不散：\n\n「留下来，跟我来。」\n\n我回头去看车站，他不见了。\n\n我在德辅道寻找他的身影。\n\n路人不多，但他却消失了。\n\n我把窗拉下来，微风轻拂我的脸。\n\n他到哪儿去了？\n\n路人、街道、高楼大厦。\n\n在我身边轻轻地流走。\n\n", "description": "你就要出道了！\n\n你的教练和同学为你联系了摄影师，你们来到德辅道边拍宣传照。\n\n街上一共有 $n$ 幢楼房，从左到右排成一列，从 $1$ 到 $n$ 编号，编号为 $i$ 的楼房的高度是 $a_i$。\n\n一张照片可以用二元组 $(l,r)$ 描述，其中 $1\\le l\\le r\\le n$，这张照片中包含了编号在 $[l,r]$ 之间的所有楼房。\n\n摄影师认为，一张照片是美丽的，当且仅当其同时满足下面的两个条件：\n\n- 对于任意的 $i<j<k$，如果高度为 $i$ 和 $k$ 的楼房都在照片中出现过，那么高度为 $j$ 的楼房也在照片中出现过。\n- 对于任意的 $i$，高度为 $i$ 的楼房要么不出现在照片中，要么在照片中出现恰好 $i$ 次。\n\n摄像师问你，一共能拍出多少不同的美丽的照片呢？\n\n两张照片 $(l_1,r_1)$ 和 $(l_2,r_2)$ 不同，当且仅当 $l_1\\ne l_2$ 或 $r_1\\ne r_2$。", "inputFormat": "第一行一个正整数 $n$，表示楼房数量。\n\n随后一行 $n$ 个正整数，第 $i$ 个为编号为 $i$ 的楼房的高度。", "outputFormat": "输出一行一个整数表示能拍出的不同的美丽的照片数量。", "hint": "**本题采用捆绑测试**。你只有通过 subtask 中的所有测试点才能获得该 subtask 的分数。\n\n- Subtask 1(10 points)：$n\\le 200$；\n- Subtask 2(5 points)：$n\\le 1000$；\n- Subtask 3(10 points)：$n\\le 6000$；\n- Subtask 4(20 points)：$n\\le 3\\times 10^4$；\n- Subtask 5(30 points)：$n\\le 10^5$；\n- Subtask 6(25 points)：$n\\le 10^6$。\n\n\n对于所有数据满足：$1\\le n,a_i\\le 10^6$。\n\n注意答案的大小可能超过 $32$ 位有符号整数的范围。\n\n本题输入数据量较大，请使用较快的读入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Tram", "background": "电车开了，他的声音在我的脑海中萦绕不散：\n\n「留下来，跟我来。」\n\n我回头去看车站，他不见了。\n\n我在德辅道寻找他的身影。\n\n路人不多，但他却消失了。\n\n我把窗拉下来，微风轻拂我的脸。\n\n他到哪儿去了？\n\n路人、街道、高楼大厦。\n\n在我身边轻轻地流走。\n\n", "description": "你就要出道了！\n\n你的教练和同学为你联系了摄影师，你们来到德辅道边拍宣传照。\n\n街上一共有 $n$ 幢楼房，从左到右排成一列，从 $1$ 到 $n$ 编号，编号为 $i$ 的楼房的高度是 $a_i$。\n\n一张照片可以用二元组 $(l,r)$ 描述，其中 $1\\le l\\le r\\le n$，这张照片中包含了编号在 $[l,r]$ 之间的所有楼房。\n\n摄影师认为，一张照片是美丽的，当且仅当其同时满足下面的两个条件：\n\n- 对于任意的 $i<j<k$，如果高度为 $i$ 和 $k$ 的楼房都在照片中出现过，那么高度为 $j$ 的楼房也在照片中出现过。\n- 对于任意的 $i$，高度为 $i$ 的楼房要么不出现在照片中，要么在照片中出现恰好 $i$ 次。\n\n摄像师问你，一共能拍出多少不同的美丽的照片呢？\n\n两张照片 $(l_1,r_1)$ 和 $(l_2,r_2)$ 不同，当且仅当 $l_1\\ne l_2$ 或 $r_1\\ne r_2$。", "inputFormat": "第一行一个正整数 $n$，表示楼房数量。\n\n随后一行 $n$ 个正整数，第 $i$ 个为编号为 $i$ 的楼房的高度。", "outputFormat": "输出一行一个整数表示能拍出的不同的美丽的照片数量。", "hint": "**本题采用捆绑测试**。你只有通过 subtask 中的所有测试点才能获得该 subtask 的分数。\n\n- Subtask 1(10 points)：$n\\le 200$；\n- Subtask 2(5 points)：$n\\le 1000$；\n- Subtask 3(10 points)：$n\\le 6000$；\n- Subtask 4(20 points)：$n\\le 3\\times 10^4$；\n- Subtask 5(30 points)：$n\\le 10^5$；\n- Subtask 6(25 points)：$n\\le 10^6$。\n\n\n对于所有数据满足：$1\\le n,a_i\\le 10^6$。\n\n注意答案的大小可能超过 $32$ 位有符号整数的范围。\n\n本题输入数据量较大，请使用较快的读入方式。", "locale": "zh-CN"}}}
{"pid": "P6855", "type": "P", "difficulty": 5, "samples": [["2 2\n3 3 \n6 4", "9"], ["3 3\n1 1 1\n2 1 2\n3 1 1", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP"], "title": "「EZEC-4.5」走方格", "background": "", "description": "有 $n\\times m$ 的方格矩阵，小 A 从 $(1,1)$ 出发到 $(n,m)$ ，只能向下或向右走，获得的分数为他经过方格的权值之和。\n\n已知每个方格 $(i,j) $的权值 $a_{i,j}$，你可以将其中任意一个方格上的权值变为 $0$，求变化后小 A 最多能获得分数的**最小值**。", "inputFormat": "第一行两个整数 $n,m$。\n\n下面 $n$ 行每行 $m$ 个整数 $a_{i,j}$", "outputFormat": "一个整数表示变化后小 A 最多能获得分数的**最小值**。", "hint": "[大样例](https://www.luogu.com.cn/paste/aeqswjyj)\n\n### 本题使用捆绑测试。\n\n### 【样例解释】：\n\n样例1： 将 $(2,2)$ 的权值变为 $0$，路径为 $(1,1) $ -> $(2,1) $ ->$(2,2)$ ，获得分数为 $3+6+0=9$。\n\n样例2： 将 $(2,1)$ 的权值变成 $0$，路径为 $(1,1) $ -> $(2,1) $ ->$(3,1)$  ->$(3,2)$  ->$(3,3)$ ，获得分数为 $1+0+3+1+1=6$。\n\n### 【数据范围】：\n\n$Subtask1(40分):1\\le n,m \\le 100$。\n\n$Subtask2(30分):1\\le n,m \\le 500$。\n\n$Subtask3(30分):1\\le n,m \\le 2 \\times 10^3$。\n\n对于 $100\\%$ 的数据：$1\\le n,m\\le 2\\times 10^3,1\\le a_{i,j} \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-4.5」走方格", "background": "", "description": "有 $n\\times m$ 的方格矩阵，小 A 从 $(1,1)$ 出发到 $(n,m)$ ，只能向下或向右走，获得的分数为他经过方格的权值之和。\n\n已知每个方格 $(i,j) $的权值 $a_{i,j}$，你可以将其中任意一个方格上的权值变为 $0$，求变化后小 A 最多能获得分数的**最小值**。", "inputFormat": "第一行两个整数 $n,m$。\n\n下面 $n$ 行每行 $m$ 个整数 $a_{i,j}$", "outputFormat": "一个整数表示变化后小 A 最多能获得分数的**最小值**。", "hint": "[大样例](https://www.luogu.com.cn/paste/aeqswjyj)\n\n### 本题使用捆绑测试。\n\n### 【样例解释】：\n\n样例1： 将 $(2,2)$ 的权值变为 $0$，路径为 $(1,1) $ -> $(2,1) $ ->$(2,2)$ ，获得分数为 $3+6+0=9$。\n\n样例2： 将 $(2,1)$ 的权值变成 $0$，路径为 $(1,1) $ -> $(2,1) $ ->$(3,1)$  ->$(3,2)$  ->$(3,3)$ ，获得分数为 $1+0+3+1+1=6$。\n\n### 【数据范围】：\n\n$Subtask1(40分):1\\le n,m \\le 100$。\n\n$Subtask2(30分):1\\le n,m \\le 500$。\n\n$Subtask3(30分):1\\le n,m \\le 2 \\times 10^3$。\n\n对于 $100\\%$ 的数据：$1\\le n,m\\le 2\\times 10^3,1\\le a_{i,j} \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P6856", "type": "P", "difficulty": 5, "samples": [["4 1 1000000007\n1 2 3 4", "150"], ["3 2 114\n2 3 4", "65"], ["12 8 10042020\n1 1 4 5 1 4 1 9 1 9 8 10", "2797740"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["递推", "线段树", "分块"], "title": "「EZEC-4.5」子序列", "background": "作为唯一一道有背景的题，此题由出题人基于 @[Ecrade_](https://www.luogu.com.cn/user/322075) 的原创题“子集”拓展而来。\n\n“子集”便是本题中 $k=n-1$ 的情况。", "description": "给定一个有 $n$ 个元素的序列 $a$。\n\n定义一个有 $x$ 个元素的序列 $s$ 的值为：\n$$\\sum \\limits _{i=1} ^ x s_i \\times \\prod \\limits _{i=1} ^ x s_i $$\n\n将序列 $a$ 的一个有 $x$ 个元素的子序列表示为 $s = \\{a_{p_1},a_{p_2},...,a_{p_x}\\}$，其中 $p$ 为严格单调递增的序列，$1 \\le p_1 \\le p_x \\le n$ 。\n\n给定整数 $k$，定义序列 $a$ 的一个有 $x$ 个元素的合法的子序列 $s$ 需满足 $p_x - p_1 \\le k$。\n\n求序列 $a$ 的所有合法子序列的值之和对 $mod$ 取模的值。 ", "inputFormat": "第一行三个整数，$n,k,mod$ 。 \n\n第二行 $n$ 个整数，$a_i$。 ", "outputFormat": "一行一个整数表示答案对 $mod$ 取模的值。 ", "hint": "[大样例](https://www.luogu.com.cn/paste/5sg4ahwn)\n\n### 【样例解释】：\n\n样例1：\n\n- 所有合法的子序列为 $\\{1\\}，\\{2\\}，\\{3\\}，\\{4\\}，\\{1,2\\}，\\{2,3\\}，\\{3,4\\}$ \n\n- 答案为 $1 \\times 1 + 2 \\times 2 + 3 \\times 3 + 4 \\times 4 + (1+2) \\times 1 \\times 2 + (2+3) \\times 2 \\times 3 + (3+4) \\times 3 \\times 4 = 150$\n\n\n样例2：\n\n- 所有合法的子序列为 $\\{2\\},\\{3\\},\\{4\\},\\{2,3\\},\\{3,4\\},\\{2,4\\},\\{2,3,4\\}$， 答案为 $ 407 \\mod 114 = 65 $。  \n\n\n\n### 【数据范围】：\n\n| 数据点编号 | $ n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n|$1\\sim 4$ |$20$  |无 |\n|$5\\sim 11$ |$10^3$  |无|\n|$12$ |$10^6$  |$k=0$  |\n|$13\\sim 14$ |$10^5$  |$a_i=1$|\n|$15\\sim 17$ |$10^5$  |$mod=10^9+7$|\n|$18\\sim 22$ |$10^5$  |无|\n|$23\\sim 25$ |$10^6$  |无 |\n\n- 对于 $100\\%$ 的数据，$0 \\le k < n \\le 10^6 , 1 \\le a_i \\le 10^9 , 1 \\le mod \\le 10^9+7$ ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-4.5」子序列", "background": "作为唯一一道有背景的题，此题由出题人基于 @[Ecrade_](https://www.luogu.com.cn/user/322075) 的原创题“子集”拓展而来。\n\n“子集”便是本题中 $k=n-1$ 的情况。", "description": "给定一个有 $n$ 个元素的序列 $a$。\n\n定义一个有 $x$ 个元素的序列 $s$ 的值为：\n$$\\sum \\limits _{i=1} ^ x s_i \\times \\prod \\limits _{i=1} ^ x s_i $$\n\n将序列 $a$ 的一个有 $x$ 个元素的子序列表示为 $s = \\{a_{p_1},a_{p_2},...,a_{p_x}\\}$，其中 $p$ 为严格单调递增的序列，$1 \\le p_1 \\le p_x \\le n$ 。\n\n给定整数 $k$，定义序列 $a$ 的一个有 $x$ 个元素的合法的子序列 $s$ 需满足 $p_x - p_1 \\le k$。\n\n求序列 $a$ 的所有合法子序列的值之和对 $mod$ 取模的值。 ", "inputFormat": "第一行三个整数，$n,k,mod$ 。 \n\n第二行 $n$ 个整数，$a_i$。 ", "outputFormat": "一行一个整数表示答案对 $mod$ 取模的值。 ", "hint": "[大样例](https://www.luogu.com.cn/paste/5sg4ahwn)\n\n### 【样例解释】：\n\n样例1：\n\n- 所有合法的子序列为 $\\{1\\}，\\{2\\}，\\{3\\}，\\{4\\}，\\{1,2\\}，\\{2,3\\}，\\{3,4\\}$ \n\n- 答案为 $1 \\times 1 + 2 \\times 2 + 3 \\times 3 + 4 \\times 4 + (1+2) \\times 1 \\times 2 + (2+3) \\times 2 \\times 3 + (3+4) \\times 3 \\times 4 = 150$\n\n\n样例2：\n\n- 所有合法的子序列为 $\\{2\\},\\{3\\},\\{4\\},\\{2,3\\},\\{3,4\\},\\{2,4\\},\\{2,3,4\\}$， 答案为 $ 407 \\mod 114 = 65 $。  \n\n\n\n### 【数据范围】：\n\n| 数据点编号 | $ n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n|$1\\sim 4$ |$20$  |无 |\n|$5\\sim 11$ |$10^3$  |无|\n|$12$ |$10^6$  |$k=0$  |\n|$13\\sim 14$ |$10^5$  |$a_i=1$|\n|$15\\sim 17$ |$10^5$  |$mod=10^9+7$|\n|$18\\sim 22$ |$10^5$  |无|\n|$23\\sim 25$ |$10^6$  |无 |\n\n- 对于 $100\\%$ 的数据，$0 \\le k < n \\le 10^6 , 1 \\le a_i \\le 10^9 , 1 \\le mod \\le 10^9+7$ ", "locale": "zh-CN"}}}
{"pid": "P6857", "type": "P", "difficulty": 2, "samples": [["1\n3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷月赛"], "title": "梦中梦与不再有梦", "background": "Amazing John 做了一个梦，梦到他做了很多梦。\n\n记得最好的梦，是不再有梦。", "description": "Amazing John 想要以自己的梦出一道题。\n\nAmazing John 做了 $n$ 个梦。每两个梦之间都有且仅有一条桥梁直接相连，不会有桥梁从一个梦连向自身。\n\n通过桥梁 $e_{u,v}$ 可以从梦 $u$ 到达 梦 $v$ 或从 $v$ 到达 $u$ ，并且获得 $1$ 点休息值。\n\n对于每个桥梁 $e_{u,v}$ ，它只能被经过一次，无论是正向经过还是反向经过。\n\n当到达一个梦且与它相连的所有桥梁都不能经过时， Amazing John 就会结束他的做梦。\n\n现在 Amazing John 很困，他想知道从任意一个梦出发，最多可以获得多少休息值？", "inputFormat": "**本题有多组数据。**\n\n第一行包含一个正整数 $T$ ，表示有 $T$ 组数据。\n\n接下来有 $T$ 行，每行包含一个正整数 $n$ ，表示他做了 $n$ 个梦。", "outputFormat": "输出共 $T$ 行。\n\n对于每组数据，输出一行一个正整数 $ans$ ，表示最多可以获得的休息值。", "hint": "样例解释：\n\n从 $1$ 出发，沿 $e_{1,2}$ 到达 $2$ ，再沿 $e_{2,3}$ 到达 $3$ ，最后沿 $e_{3,1}$ 到达 $1$。\n\n总共获得了 $3$ 点休息值。\n\n|子任务|数据点|数据范围|分数|\n-|-|-|-|\n|$1$|$1\\sim2$|$n≤6,T=3$|$30$|\n|$2$|$3\\sim5$|$n≤10^9,T≤10^5$|$70$|\n\n对于一个子任务，你能获得它的分数当且仅当你通过了其中所有的数据点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "梦中梦与不再有梦", "background": "Amazing John 做了一个梦，梦到他做了很多梦。\n\n记得最好的梦，是不再有梦。", "description": "Amazing John 想要以自己的梦出一道题。\n\nAmazing John 做了 $n$ 个梦。每两个梦之间都有且仅有一条桥梁直接相连，不会有桥梁从一个梦连向自身。\n\n通过桥梁 $e_{u,v}$ 可以从梦 $u$ 到达 梦 $v$ 或从 $v$ 到达 $u$ ，并且获得 $1$ 点休息值。\n\n对于每个桥梁 $e_{u,v}$ ，它只能被经过一次，无论是正向经过还是反向经过。\n\n当到达一个梦且与它相连的所有桥梁都不能经过时， Amazing John 就会结束他的做梦。\n\n现在 Amazing John 很困，他想知道从任意一个梦出发，最多可以获得多少休息值？", "inputFormat": "**本题有多组数据。**\n\n第一行包含一个正整数 $T$ ，表示有 $T$ 组数据。\n\n接下来有 $T$ 行，每行包含一个正整数 $n$ ，表示他做了 $n$ 个梦。", "outputFormat": "输出共 $T$ 行。\n\n对于每组数据，输出一行一个正整数 $ans$ ，表示最多可以获得的休息值。", "hint": "样例解释：\n\n从 $1$ 出发，沿 $e_{1,2}$ 到达 $2$ ，再沿 $e_{2,3}$ 到达 $3$ ，最后沿 $e_{3,1}$ 到达 $1$。\n\n总共获得了 $3$ 点休息值。\n\n|子任务|数据点|数据范围|分数|\n-|-|-|-|\n|$1$|$1\\sim2$|$n≤6,T=3$|$30$|\n|$2$|$3\\sim5$|$n≤10^9,T≤10^5$|$70$|\n\n对于一个子任务，你能获得它的分数当且仅当你通过了其中所有的数据点。", "locale": "zh-CN"}}}
{"pid": "P6858", "type": "P", "difficulty": 5, "samples": [["2 1", "8"], ["10 10", "499122389"], ["10 0", "65"], ["2 0", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷月赛"], "title": "深海少女与胖头鱼", "background": "Amazing John 做了一个梦，梦到他上上辈子是个少女。\n\n她跳入了 OI ~~炉石~~ 的海洋，成为了[深海少女](https://music.163.com/#/song?id=22677451)，维护着海洋的秩序。\n\n某一天，海洋遭到了胖头鱼群的入侵。为了维护深海的安全，Amazing John 带着大佬们与胖头鱼们战斗了 $9$ 天 $9$ 夜，但是鱼的数量并没减少。\n\n![FGNB](https://cdn.luogu.com.cn/upload/image_hosting/7r0sort3.png)\n", "description": "经过漫长的战斗，Amazing John 发现了战胜胖头鱼的方法：\n\n总共有 $n$ 条带 「圣盾」的「胖头鱼」和 $m$ 条不带圣盾的胖头鱼，每次等概率对一条存活的胖头鱼造成「剧毒」伤害。\n\n现在 Amazing John 想知道，期望造成多少次伤害可以杀死全部胖头鱼？\n\n答案对 $998244353$ 取模。\n\n「圣盾」：当拥有圣盾的胖头鱼受到伤害时，免疫这条鱼所受到的本次伤害。免疫伤害后，圣盾被破坏。\n\n「胖头鱼」：在一条胖头鱼的圣盾被破坏后，给予其他所有没有死亡且没有圣盾的胖头鱼圣盾。\n\n「剧毒」：立即杀死没有圣盾的胖头鱼。\n\n", "inputFormat": "输入共一行，包含两个非负整数 $n,m$，表示有 $n$ 条带圣盾的胖头鱼，有 $m$ 条不带圣盾的胖头鱼。", "outputFormat": "输出共一行，一个非负整数 $s$，表示期望造成伤害次数对 $998244353$ 取模的值。\n\n具体的，答案必然可以表示成 $\\frac{p}{q}(p,q\\in \\mathbb{N},q\\neq 0)$ 的形式，而你需要输出 $p×q^{-1}$ 在模 $998244353$ 意义下的值。", "hint": "本题共有 $20$ 个数据点，数据点从 $1$ 到 $20$ 编号。对于一个子任务，只有通过其中所有数据点才能获得该子任务的分数。\n|子任务|数据点|数据范围|分数|\n-|-|-|-|\n|$1$|$1\\sim3$|$n,m \\le 5 \\times 10^3$|$15$|\n|$2$|$4\\sim5$|$n \\le 10^6$，$m=0$|$10$|\n|$3$|$6\\sim10$|$n,m \\le 10^6$|$25$|\n|$4$|$11\\sim14$|$n \\le 10^{14}$，$m=0$|$20$|\n|$5$|$15\\sim20$|$n \\le 10^{14}$，$m\\le 10^6$|$30$|\n\n答案的形式 $\\frac{p}{q}$ 必然满足 $(p,q\\in \\mathbb{N},998244353\\nmid q)$\n\n~~我会暗中支持你的，可别告诉别人——鲍勃。~~\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "深海少女与胖头鱼", "background": "Amazing John 做了一个梦，梦到他上上辈子是个少女。\n\n她跳入了 OI ~~炉石~~ 的海洋，成为了[深海少女](https://music.163.com/#/song?id=22677451)，维护着海洋的秩序。\n\n某一天，海洋遭到了胖头鱼群的入侵。为了维护深海的安全，Amazing John 带着大佬们与胖头鱼们战斗了 $9$ 天 $9$ 夜，但是鱼的数量并没减少。\n\n![FGNB](https://cdn.luogu.com.cn/upload/image_hosting/7r0sort3.png)\n", "description": "经过漫长的战斗，Amazing John 发现了战胜胖头鱼的方法：\n\n总共有 $n$ 条带 「圣盾」的「胖头鱼」和 $m$ 条不带圣盾的胖头鱼，每次等概率对一条存活的胖头鱼造成「剧毒」伤害。\n\n现在 Amazing John 想知道，期望造成多少次伤害可以杀死全部胖头鱼？\n\n答案对 $998244353$ 取模。\n\n「圣盾」：当拥有圣盾的胖头鱼受到伤害时，免疫这条鱼所受到的本次伤害。免疫伤害后，圣盾被破坏。\n\n「胖头鱼」：在一条胖头鱼的圣盾被破坏后，给予其他所有没有死亡且没有圣盾的胖头鱼圣盾。\n\n「剧毒」：立即杀死没有圣盾的胖头鱼。\n\n", "inputFormat": "输入共一行，包含两个非负整数 $n,m$，表示有 $n$ 条带圣盾的胖头鱼，有 $m$ 条不带圣盾的胖头鱼。", "outputFormat": "输出共一行，一个非负整数 $s$，表示期望造成伤害次数对 $998244353$ 取模的值。\n\n具体的，答案必然可以表示成 $\\frac{p}{q}(p,q\\in \\mathbb{N},q\\neq 0)$ 的形式，而你需要输出 $p×q^{-1}$ 在模 $998244353$ 意义下的值。", "hint": "本题共有 $20$ 个数据点，数据点从 $1$ 到 $20$ 编号。对于一个子任务，只有通过其中所有数据点才能获得该子任务的分数。\n|子任务|数据点|数据范围|分数|\n-|-|-|-|\n|$1$|$1\\sim3$|$n,m \\le 5 \\times 10^3$|$15$|\n|$2$|$4\\sim5$|$n \\le 10^6$，$m=0$|$10$|\n|$3$|$6\\sim10$|$n,m \\le 10^6$|$25$|\n|$4$|$11\\sim14$|$n \\le 10^{14}$，$m=0$|$20$|\n|$5$|$15\\sim20$|$n \\le 10^{14}$，$m\\le 10^6$|$30$|\n\n答案的形式 $\\frac{p}{q}$ 必然满足 $(p,q\\in \\mathbb{N},998244353\\nmid q)$\n\n~~我会暗中支持你的，可别告诉别人——鲍勃。~~\n", "locale": "zh-CN"}}}
{"pid": "P6859", "type": "P", "difficulty": 5, "samples": [["5 4\n1 2 2 1 1\nA 5\nC 1 2\nA 5\nA 233", "1 3\n2 4\nnone"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷月赛"], "title": "蝴蝶与花", "background": "Amazing John 做了一个梦，梦到他上辈子是只苍茫蝶。\n\n深壑幽兰，雨落苍茫。\n\n怜其折翅，苦其执魔。\n\n琼片织翼，花露饯行。\n\n伶仃蝶碎，兰枯有情。\n\n君不识妾，妾仍思君。", "description": "Amazing John 很喜欢花。\n\nAmazing John 的花圃里有 $n$ 朵花，他每天都会在花园里散步。\n\n对于每一朵花 Amazing John 会评价它好看或不好看。被评价好看的花的美丽值为 $2$，被评价不好看的花的美丽值为 $1$。\n\n我们可以抽象的把这 $n$ 朵花看做在一条直线上。每次散步时， Amazing John 会从任意一朵花开始，一直往下一朵花走。到任意一朵花结束。在路途中，他会将所有经过的花的美丽值统计下来。（当然包括开始的花和结束的花）\n\n现在 Amazing John 想知道，能否有一种散步方案，使得他从第 $l$ 朵花走到第 $r$ 朵花的美丽值之和正好是 $s$？\n\n为了少走一些路， Amazing John 要你给出在所有方案中 $l$ 最小的方案。\n\n当然，为了避免在花圃中散步过于单调， Amazing John 随时可能会将一朵花的美丽值更改。\n\n每个询问之间互相独立，即统计过的花朵在下次询问时仍可被统计。", "inputFormat": "第一行两个数 $n,m$，分别表示花的个数和 Amazing John 的要求个数。\n\n第二行 $n$ 个数字 $a_i$，表示第 $i$ 朵花的美丽值。\n\n接下来 $m$ 行，每一行表示一个询问操作或一个修改操作。\n\n询问操作格式为 `A s`，表示询问是否有一种散步方案使得美丽值之和为 $s$。\n\n修改操作格式为 `C i val`，表示将第 $i$ 朵花的美丽值改成 $val(val=1$ 或 $2)$。", "outputFormat": "若有 $q$ 个 `A` 操作，输出应有 $q$ 行。\n\n对于每一个询问，若有合法的方案，输出这个方案的左右端点位置（多种方案时输出左端点最小的方案），否则输出 `none`。\n\n您应该保证 $1\\leq l\\leq r\\leq n$。", "hint": "$\\operatorname{Subtask\\ 1}\\ (20pts)$：对于数据点 $1\\sim 5$，满足 $1\\leq n,m\\leq 1000$。\n\n$\\operatorname{Subtask\\ 2}\\ (30pts)$：对于数据点 $6\\sim 10$，满足 $1\\leq n,m\\leq 2.5\\times 10^5$。\n\n$\\operatorname{Subtask\\ 3}\\ (50pts)$：对于数据点 $11\\sim 15$，满足 $1\\leq n,m\\leq 2\\times 10^6$。\n\n对于 $100\\%$ 的数据，有 $1\\leq n,m\\leq 2\\times 10^6,0\\leq s\\leq 2^{31}-1$。每次修改操作时 $i\\in[1,n],val\\in\\{1,2\\}$。\n\n对于所有数据点，时间限制 $2000\\operatorname{ms}$，空间限制 $256\\operatorname{MB}$。", "locale": "zh-CN", "translations": {"en": {"title": "Butterflies and Flowers", "background": "Amazing John had a dream that in his previous life he was a vast, misty butterfly.\n\nDeep ravines and hidden orchids, rain falling into the boundless haze.\n\nPity its broken wings, sorrow for its stubborn obsession.\n\nJade-like flakes weave wings, flower dew sees it off.\n\nA lonely butterfly shatters, the orchid withers yet still has feelings.\n\nYou do not know me, yet I still miss you.", "description": "Amazing John likes flowers very much.\n\nThere are $n$ flowers in Amazing John's garden, and every day he takes a walk in it.\n\nFor each flower, Amazing John will judge it as beautiful or not beautiful. A flower judged as beautiful has beauty value $2$, and a flower judged as not beautiful has beauty value $1$.\n\nWe can abstract these $n$ flowers as being on a straight line. During each walk, Amazing John may start from any flower and keep moving to the next flower, and end at any flower. Along the way, he sums up the beauty values of all flowers he passes (including the starting flower and the ending flower).\n\nNow Amazing John wants to know whether there exists a walking plan such that the sum of beauty values from the $l$-th flower to the $r$-th flower is exactly $s$.\n\nTo walk less, among all valid plans, Amazing John asks you to output the plan with the smallest $l$.\n\nOf course, to avoid the walk being too boring, Amazing John may change the beauty value of a flower at any time.\n\nEach query is independent. That is, flowers counted in one query can still be counted in the next query.", "inputFormat": "The first line contains two numbers $n,m$, representing the number of flowers and the number of requests from Amazing John.\n\nThe second line contains $n$ numbers $a_i$, where $a_i$ is the beauty value of the $i$-th flower.\n\nThe next $m$ lines each describe either a query operation or a modification operation.\n\nThe query operation format is `A s`, asking whether there exists a walking plan such that the sum of beauty values is $s$.\n\nThe modification operation format is `C i val`, meaning to change the beauty value of the $i$-th flower to $val(val=1$ or $2)$.", "outputFormat": "If there are $q$ operations of type `A`, the output should contain $q$ lines.\n\nFor each query, if there is a valid plan, output the left and right endpoint positions of that plan (if there are multiple plans, output the one with the smallest left endpoint). Otherwise, output `none`.\n\nYou should guarantee that $1\\leq l\\leq r\\leq n$.", "hint": "$\\operatorname{Subtask\\ 1}\\ (20pts)$: For testdata points $1\\sim 5$, $1\\leq n,m\\leq 1000$.\n\n$\\operatorname{Subtask\\ 2}\\ (30pts)$: For testdata points $6\\sim 10$, $1\\leq n,m\\leq 2.5\\times 10^5$.\n\n$\\operatorname{Subtask\\ 3}\\ (50pts)$: For testdata points $11\\sim 15$, $1\\leq n,m\\leq 2\\times 10^6$.\n\nFor $100\\%$ of the testdata, $1\\leq n,m\\leq 2\\times 10^6,0\\leq s\\leq 2^{31}-1$. For each modification operation, $i\\in[1,n],val\\in\\{1,2\\}$.\n\nFor all testdata points, the time limit is $2000\\operatorname{ms}$ and the memory limit is $256\\operatorname{MB}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "蝴蝶与花", "background": "Amazing John 做了一个梦，梦到他上辈子是只苍茫蝶。\n\n深壑幽兰，雨落苍茫。\n\n怜其折翅，苦其执魔。\n\n琼片织翼，花露饯行。\n\n伶仃蝶碎，兰枯有情。\n\n君不识妾，妾仍思君。", "description": "Amazing John 很喜欢花。\n\nAmazing John 的花圃里有 $n$ 朵花，他每天都会在花园里散步。\n\n对于每一朵花 Amazing John 会评价它好看或不好看。被评价好看的花的美丽值为 $2$，被评价不好看的花的美丽值为 $1$。\n\n我们可以抽象的把这 $n$ 朵花看做在一条直线上。每次散步时， Amazing John 会从任意一朵花开始，一直往下一朵花走。到任意一朵花结束。在路途中，他会将所有经过的花的美丽值统计下来。（当然包括开始的花和结束的花）\n\n现在 Amazing John 想知道，能否有一种散步方案，使得他从第 $l$ 朵花走到第 $r$ 朵花的美丽值之和正好是 $s$？\n\n为了少走一些路， Amazing John 要你给出在所有方案中 $l$ 最小的方案。\n\n当然，为了避免在花圃中散步过于单调， Amazing John 随时可能会将一朵花的美丽值更改。\n\n每个询问之间互相独立，即统计过的花朵在下次询问时仍可被统计。", "inputFormat": "第一行两个数 $n,m$，分别表示花的个数和 Amazing John 的要求个数。\n\n第二行 $n$ 个数字 $a_i$，表示第 $i$ 朵花的美丽值。\n\n接下来 $m$ 行，每一行表示一个询问操作或一个修改操作。\n\n询问操作格式为 `A s`，表示询问是否有一种散步方案使得美丽值之和为 $s$。\n\n修改操作格式为 `C i val`，表示将第 $i$ 朵花的美丽值改成 $val(val=1$ 或 $2)$。", "outputFormat": "若有 $q$ 个 `A` 操作，输出应有 $q$ 行。\n\n对于每一个询问，若有合法的方案，输出这个方案的左右端点位置（多种方案时输出左端点最小的方案），否则输出 `none`。\n\n您应该保证 $1\\leq l\\leq r\\leq n$。", "hint": "$\\operatorname{Subtask\\ 1}\\ (20pts)$：对于数据点 $1\\sim 5$，满足 $1\\leq n,m\\leq 1000$。\n\n$\\operatorname{Subtask\\ 2}\\ (30pts)$：对于数据点 $6\\sim 10$，满足 $1\\leq n,m\\leq 2.5\\times 10^5$。\n\n$\\operatorname{Subtask\\ 3}\\ (50pts)$：对于数据点 $11\\sim 15$，满足 $1\\leq n,m\\leq 2\\times 10^6$。\n\n对于 $100\\%$ 的数据，有 $1\\leq n,m\\leq 2\\times 10^6,0\\leq s\\leq 2^{31}-1$。每次修改操作时 $i\\in[1,n],val\\in\\{1,2\\}$。\n\n对于所有数据点，时间限制 $2000\\operatorname{ms}$，空间限制 $256\\operatorname{MB}$。", "locale": "zh-CN"}}}
{"pid": "P6860", "type": "P", "difficulty": 6, "samples": [["3\n2\n3\n4", "2\n4\n8"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化", "莫比乌斯反演", "洛谷月赛", "Bézout 定理", "杜教筛"], "title": "象棋与马", "background": "Amazing John 做了一个梦，梦到他下辈子是个象棋大师。\n\n因为人与人之间是不能一概而论的，马与象之间也不能相提并论。\n\nAmazing John 在极度愤怒的情况下创造了一种新的棋：马棋。\n\n“啊这，不会真有人不会下这种棋吧？”\n\n现在他想请你来体验一下这种新棋。", "description": "Amazing John 有一个无限大的棋盘来下马棋。\n\n有一个马最开始在 $(0,0)$，它的每一步可以走一个 $a\\times b$ 的矩形（ 即能够从$(x,y)$到达 $(x\\pm a,y\\pm b)$ 或 $(x\\pm b,y\\pm a)$ ）。\n\n若马通过上述移动方式可以到达棋盘中任意一个点，那么 $p(a,b)=1$，否则 $p(a,b)=0$。\n\n现在 Amazing John 给你 $T$ 组询问，每组询问他会给出一个正整数 $n$，他想知道 \n\n$$\\left ( \\sum_{a=1}^n\\sum_{b=1}^np(a,b) \\right )\\bmod\\ 2^{64}$$\n\n的值。", "inputFormat": "**本题含有多组数据。**\n\n输入的第一行为一个整数，表示数据组数 $T$。\n\n接下来 $T$ 行，每行一个整数 $n$，表示一个询问。", "outputFormat": "输出共 $T$ 行。\n\n对于每组询问，输出一行一个整数，即\n$$\\left ( \\sum_{a=1}^n\\sum_{b=1}^np(a,b) \\right )\\bmod\\ 2^{64}$$\n的值。", "hint": "样例解释：当 $n=3$ 时，值为 $1$ 的有 $p(1,2),p(2,1),p(2,3),p(3,2)$。\n\n**本题开启Subtask**\n|子任务|数据点|数据范围|分数|\n|-|-|-|-\n|$1$|$1$|$n\\leq 10,T\\leq5$|$5$|\n|$2$|$2\\sim 5$|$n\\leq 3000,T\\leq5$|$15$|\n|$3$|$6\\sim 10$|$n\\leq 10^5,T\\leq 5$|$15$|\n|$4$|$11\\sim 15$|$n\\leq 10^7,T\\leq5$|$15$|\n|$5$|$16\\sim 18$|$n\\leq10^9,T\\leq 5$|$15$|\n|$6$|$19\\sim 25$|$n\\times T\\leq 10^{11},T\\leq 5$|$35$|\n\n注 1：对于 $n\\times T\\geq 5*10^{10}$ 的数据点，时限为 **4s** ，其余均为 **2.5s** 。且对于所有数据点，空间限制为 **500MB** 。\n\n注 2：输出答案 $\\bmod\\ 2^{64}$ 即对 **64位无符号整数** 自然溢出。\n\n本题开启 -O2 优化开关。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "象棋与马", "background": "Amazing John 做了一个梦，梦到他下辈子是个象棋大师。\n\n因为人与人之间是不能一概而论的，马与象之间也不能相提并论。\n\nAmazing John 在极度愤怒的情况下创造了一种新的棋：马棋。\n\n“啊这，不会真有人不会下这种棋吧？”\n\n现在他想请你来体验一下这种新棋。", "description": "Amazing John 有一个无限大的棋盘来下马棋。\n\n有一个马最开始在 $(0,0)$，它的每一步可以走一个 $a\\times b$ 的矩形（ 即能够从$(x,y)$到达 $(x\\pm a,y\\pm b)$ 或 $(x\\pm b,y\\pm a)$ ）。\n\n若马通过上述移动方式可以到达棋盘中任意一个点，那么 $p(a,b)=1$，否则 $p(a,b)=0$。\n\n现在 Amazing John 给你 $T$ 组询问，每组询问他会给出一个正整数 $n$，他想知道 \n\n$$\\left ( \\sum_{a=1}^n\\sum_{b=1}^np(a,b) \\right )\\bmod\\ 2^{64}$$\n\n的值。", "inputFormat": "**本题含有多组数据。**\n\n输入的第一行为一个整数，表示数据组数 $T$。\n\n接下来 $T$ 行，每行一个整数 $n$，表示一个询问。", "outputFormat": "输出共 $T$ 行。\n\n对于每组询问，输出一行一个整数，即\n$$\\left ( \\sum_{a=1}^n\\sum_{b=1}^np(a,b) \\right )\\bmod\\ 2^{64}$$\n的值。", "hint": "样例解释：当 $n=3$ 时，值为 $1$ 的有 $p(1,2),p(2,1),p(2,3),p(3,2)$。\n\n**本题开启Subtask**\n|子任务|数据点|数据范围|分数|\n|-|-|-|-\n|$1$|$1$|$n\\leq 10,T\\leq5$|$5$|\n|$2$|$2\\sim 5$|$n\\leq 3000,T\\leq5$|$15$|\n|$3$|$6\\sim 10$|$n\\leq 10^5,T\\leq 5$|$15$|\n|$4$|$11\\sim 15$|$n\\leq 10^7,T\\leq5$|$15$|\n|$5$|$16\\sim 18$|$n\\leq10^9,T\\leq 5$|$15$|\n|$6$|$19\\sim 25$|$n\\times T\\leq 10^{11},T\\leq 5$|$35$|\n\n注 1：对于 $n\\times T\\geq 5*10^{10}$ 的数据点，时限为 **4s** ，其余均为 **2.5s** 。且对于所有数据点，空间限制为 **500MB** 。\n\n注 2：输出答案 $\\bmod\\ 2^{64}$ 即对 **64位无符号整数** 自然溢出。\n\n本题开启 -O2 优化开关。", "locale": "zh-CN"}}}
{"pid": "P6861", "type": "P", "difficulty": 2, "samples": [["5", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "[RC-03] 难题", "background": "", "description": "求两个整数 $a,b$ $(1\\le a,b\\le n)$，使 $(a\\ \\mathrm{or}\\ b)+(a\\ \\mathrm{xor}\\ b)$ 最大。只需输出这个最大值。", "inputFormat": "一个正整数 $n$。", "outputFormat": "一个正整数，为答案。", "hint": "样例说明：$(5\\ \\mathrm{or}\\ 2)+(5\\ \\mathrm{xor}\\ 2)=14$。\n\n对于 $80\\%$ 的数据，$n\\le 1000$。\n\n对于 $100\\%$ 的数据，$2\\le n\\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-03] 难题", "background": "", "description": "求两个整数 $a,b$ $(1\\le a,b\\le n)$，使 $(a\\ \\mathrm{or}\\ b)+(a\\ \\mathrm{xor}\\ b)$ 最大。只需输出这个最大值。", "inputFormat": "一个正整数 $n$。", "outputFormat": "一个正整数，为答案。", "hint": "样例说明：$(5\\ \\mathrm{or}\\ 2)+(5\\ \\mathrm{xor}\\ 2)=14$。\n\n对于 $80\\%$ 的数据，$n\\le 1000$。\n\n对于 $100\\%$ 的数据，$2\\le n\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P6862", "type": "P", "difficulty": 4, "samples": [["3\n3 1\n3 2\n3 3", "3\n3\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "前缀和", "期望", "逆元"], "title": "[RC-03] 随机树生成器", "background": "", "description": "小 R 有一个随机树生成器，其工作原理如下：\n- 输入 $n$，则对于每个 $1<i\\le n$，随机选择一个 $[1,i)$ 中的节点作为其父亲。返回这棵树。\n\n给定 $n,k$，小 R 想知道可能生成的所有 $n$ 个点的树中，$k$ 号点的度数和。\n\n由于答案可能很大，请输出答案模 $10^9+9$ 的值。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数，是数据组数 $T$。\n\n接下来 $T$ 行，每行两个正整数 $n,k$。", "outputFormat": "$T$ 行，每行一个整数，为这组数据的答案模 $10^9+9$ 的值。", "hint": "【样例说明】\n\n- 数据 $1$：一共有两种情况，$1$ 号点的度数分别为 $1,2$。因此答案为 $3$。\n- 数据 $2$：一共有两种情况，$2$ 号点的度数分别为 $1,2$。因此答案为 $3$。\n- 数据 $3$：一共有两种情况，$3$ 号点的度数均为 $1$。因此答案为 $2$。\n\n【数据范围】\n\n本题捆绑测试。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le k\\le n\\le 10^7$。详细数据范围如下。\n\n- Subtask 1（20 分）：$T\\le 50$，$n\\le 8$。\n- Subtask 2（55 分）：$T=1$，$n\\le 10^5$。\n- Subtask 3（20 分）：$T=1$。\n- Subtask 4（5 分）：没有任何附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-03] 随机树生成器", "background": "", "description": "小 R 有一个随机树生成器，其工作原理如下：\n- 输入 $n$，则对于每个 $1<i\\le n$，随机选择一个 $[1,i)$ 中的节点作为其父亲。返回这棵树。\n\n给定 $n,k$，小 R 想知道可能生成的所有 $n$ 个点的树中，$k$ 号点的度数和。\n\n由于答案可能很大，请输出答案模 $10^9+9$ 的值。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数，是数据组数 $T$。\n\n接下来 $T$ 行，每行两个正整数 $n,k$。", "outputFormat": "$T$ 行，每行一个整数，为这组数据的答案模 $10^9+9$ 的值。", "hint": "【样例说明】\n\n- 数据 $1$：一共有两种情况，$1$ 号点的度数分别为 $1,2$。因此答案为 $3$。\n- 数据 $2$：一共有两种情况，$2$ 号点的度数分别为 $1,2$。因此答案为 $3$。\n- 数据 $3$：一共有两种情况，$3$ 号点的度数均为 $1$。因此答案为 $2$。\n\n【数据范围】\n\n本题捆绑测试。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le k\\le n\\le 10^7$。详细数据范围如下。\n\n- Subtask 1（20 分）：$T\\le 50$，$n\\le 8$。\n- Subtask 2（55 分）：$T=1$，$n\\le 10^5$。\n- Subtask 3（20 分）：$T=1$。\n- Subtask 4（5 分）：没有任何附加限制。", "locale": "zh-CN"}}}
{"pid": "P6863", "type": "P", "difficulty": 5, "samples": [["5 16\n2 2 2 2 1\n2 2 2 2", "-4 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "[RC-03] 上下求索", "background": "", "description": "有一个关于 $x_i(i∈\\{1,2,3,...,n\\},x_i∈\\mathbb{R})$ 的 $n$ 元二次方程：\n\n$$\\sum_{i=1}^na_ix_i^2+\\sum_{i=1}^{n-1}b_ix_ix_{i+1}=m$$\n\n请您在这个方程中，求出保证方程有解的 $x_1$ 的取值范围。\n\n保证 $x_1$ 有上下界。", "inputFormat": "输入一共有三行，\n\n第一行有两个整数 $n,m$；\n\n第二行共有 $n$ 个整数 $a_i$，其中 $i∈\\{1,2,3,..,n\\}$；\n\n第三行 $n-1$ 个整数 $b_i$，其中 $i∈\\{1,2,3,..,n-1\\}$。", "outputFormat": "一行两个整数，用空格隔开，表示 $x_1$ 的下界与上界（数据保证输出一定是整数）。", "hint": "【样例 $1$ 说明】\n\n原方程为 $2x_1^2+2x_1x_2+2x_2^2+2x_2x_3+2x_3^2+2x_3x_4+2x_4^2+2x_4x_5+x_5^2=16$。\n\n当 $x_1=-4$ 有 $x_1=-4$；$x_2=4$；$x_3=-4$；$x_4=4$；$x_5=-4$。  \n当 $x_1=4$ 有 $x_1=4$；$x_2=-4$；$x_3=4$；$x_4=-4$；$x_5=4$。  \n当 $x_1>4$ 或 $x_1<-4$ 时原方程左必 $>16$。  \n$∴ -4\\leq x_1\\leq 4$。\n\n---\n  \n【数据范围】\n\n对于 $4\\%$ 的数据，$n=1$。\n\n对于 $16\\%$ 的数据，$n\\le 2$。 \n\n对于另外 $16\\%$ 的数据，$n\\le 8$，$m\\le 30$。 \n\n对于 $60\\%$ 的数据，$n\\le 10^3$。 \n\n对于 $100\\%$ 的数据，$1\\le a_i,b_i,m\\leq 10^9$，$1\\le n\\leq 5\\times 10^5$。  ", "locale": "zh-CN", "translations": {"en": {"title": "[RC-03] Seeking Up and Down", "background": "", "description": "There is an $n$-variable quadratic equation about $x_i(i∈\\{1,2,3,...,n\\},x_i∈\\mathbb{R})$:\n\n$$\\sum_{i=1}^na_ix_i^2+\\sum_{i=1}^{n-1}b_ix_ix_{i+1}=m$$\n\nIn this equation, please find the range of values of $x_1$ that guarantees the equation has at least one solution.\n\nIt is guaranteed that $x_1$ has both a lower bound and an upper bound.", "inputFormat": "The input has three lines.\n\nThe first line contains two integers $n,m$.\n\nThe second line contains $n$ integers $a_i$, where $i∈\\{1,2,3,..,n\\}$.\n\nThe third line contains $n-1$ integers $b_i$, where $i∈\\{1,2,3,..,n-1\\}$.", "outputFormat": "Output one line with two integers separated by a space, representing the lower bound and upper bound of $x_1$ (it is guaranteed that the output is always integers).", "hint": "[Sample $1$ Explanation]\n\nThe original equation is $2x_1^2+2x_1x_2+2x_2^2+2x_2x_3+2x_3^2+2x_3x_4+2x_4^2+2x_4x_5+x_5^2=16$.\n\nWhen $x_1=-4$, we have $x_1=-4$; $x_2=4$; $x_3=-4$; $x_4=4$; $x_5=-4$.  \nWhen $x_1=4$, we have $x_1=4$; $x_2=-4$; $x_3=4$; $x_4=-4$; $x_5=4$.  \nWhen $x_1>4$ or $x_1<-4$, the left-hand side of the original equation must be $>16$.  \nTherefore, $-4\\leq x_1\\leq 4$.\n\n---\n\n[Constraints]\n\nFor $4\\%$ of the testdata, $n=1$.\n\nFor $16\\%$ of the testdata, $n\\le 2$.\n\nFor another $16\\%$ of the testdata, $n\\le 8$, $m\\le 30$.\n\nFor $60\\%$ of the testdata, $n\\le 10^3$.\n\nFor $100\\%$ of the testdata, $1\\le a_i,b_i,m\\leq 10^9$, $1\\le n\\leq 5\\times 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[RC-03] 上下求索", "background": "", "description": "有一个关于 $x_i(i∈\\{1,2,3,...,n\\},x_i∈\\mathbb{R})$ 的 $n$ 元二次方程：\n\n$$\\sum_{i=1}^na_ix_i^2+\\sum_{i=1}^{n-1}b_ix_ix_{i+1}=m$$\n\n请您在这个方程中，求出保证方程有解的 $x_1$ 的取值范围。\n\n保证 $x_1$ 有上下界。", "inputFormat": "输入一共有三行，\n\n第一行有两个整数 $n,m$；\n\n第二行共有 $n$ 个整数 $a_i$，其中 $i∈\\{1,2,3,..,n\\}$；\n\n第三行 $n-1$ 个整数 $b_i$，其中 $i∈\\{1,2,3,..,n-1\\}$。", "outputFormat": "一行两个整数，用空格隔开，表示 $x_1$ 的下界与上界（数据保证输出一定是整数）。", "hint": "【样例 $1$ 说明】\n\n原方程为 $2x_1^2+2x_1x_2+2x_2^2+2x_2x_3+2x_3^2+2x_3x_4+2x_4^2+2x_4x_5+x_5^2=16$。\n\n当 $x_1=-4$ 有 $x_1=-4$；$x_2=4$；$x_3=-4$；$x_4=4$；$x_5=-4$。  \n当 $x_1=4$ 有 $x_1=4$；$x_2=-4$；$x_3=4$；$x_4=-4$；$x_5=4$。  \n当 $x_1>4$ 或 $x_1<-4$ 时原方程左必 $>16$。  \n$∴ -4\\leq x_1\\leq 4$。\n\n---\n  \n【数据范围】\n\n对于 $4\\%$ 的数据，$n=1$。\n\n对于 $16\\%$ 的数据，$n\\le 2$。 \n\n对于另外 $16\\%$ 的数据，$n\\le 8$，$m\\le 30$。 \n\n对于 $60\\%$ 的数据，$n\\le 10^3$。 \n\n对于 $100\\%$ 的数据，$1\\le a_i,b_i,m\\leq 10^9$，$1\\le n\\leq 5\\times 10^5$。  ", "locale": "zh-CN"}}}
{"pid": "P6864", "type": "P", "difficulty": 6, "samples": [["6\n1\n2\n3 1\n1\n3 3\n3 5\n", "3\n4\n2\n4\n6\n4\n"], ["10\n1\n2\n2\n3 2\n1\n3 3\n3 6\n1\n2\n1\n", "3\n4\n5\n4\n6\n6\n6\n9\n10\n12\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["线段树", "二分", "树状数组", "矩阵乘法"], "title": "[RC-03] 记忆", "background": "小 W 想写一个关于记忆的题目背景，但是他忘记了。", "description": "有一个括号串 $S$，一开始 $S$ 中只包含一对括号（即初始的 $S$ 为 `()`），接下来有 $n$ 个操作，操作分为三种：\n\n1. 在当前 $S$ 的末尾加一对括号（即 $S$ 变为 `S()`）；\n\n2. 在当前 $S$ 的最外面加一对括号（即 $S$ 变为 `(S)`）；\n\n3. 取消第 $x$ 个操作，即去除第 $x$ 个操作造成过的**一切影响**（例如，如果第 $x$ 个操作也是取消操作，且取消了第 $y$ 个操作，那么当前操作的实质就是恢复了第 $y$ 个操作的作用效果）。\n\n每次操作后，你需要输出 $S$ 的能够括号匹配的非空子串（子串要求连续）个数。\n\n一个括号串能够括号匹配，当且仅当其左右括号数量相等，且任意一个前缀中左括号数量不少于右括号数量。", "inputFormat": "第一行：一个整数 $n$，表示操作的个数。\n\n接下来 $n$ 行：每行先有一个整数 $op$，表示操作的种类：\n\n若 $op=1$，则表示执行了操作 $1$；\n\n若 $op=2$，则表示执行了操作 $2$；\n\n若 $op=3$，接下来还有一个整数 $x$，表示执行操作 $3$，取消了第 $x$ 个操作（操作按 $1$ 到 $n$ 编号，保证第 $x$ 个操作已发生），注意取消操作**并不影响任何操作的编号**，编号只取决于输入顺序。", "outputFormat": "共 $n$ 行：第 $i$ 行输出一个整数 $ans_i$，表示第 $i$ 次操作结束后整个括号串的括号匹配的非空子串个数。", "hint": "【样例 $1$ 解释】\n\n用 $S[i,j]$ 表示从 $S_i$ 到 $S_j$ 的子串（下标从 $1$ 开始）。\n\n一开始 $S$ 为 `()`，每次操作后：\n\n第 $1$ 次操作后：$S$ 为 `()()`，匹配的子串有 $S[1,2]$，$S[1,4]$ 和 $S[3,4]$，共 $3$ 个。\n\n第 $2$ 次操作后：$S$ 为 `(()())`，匹配的子串有 $S[1,6]$，$S[2,3]$，$S[2,5]$ 和 $S[4,5]$，共 $4$ 个。\n\n第 $3$ 次操作后：$S$ 为 `(())`，匹配的子串有 $S[1,4]$ 和 $S[2,3]$，共 $2$ 个。\n\n第 $4$ 次操作后：$S$ 为 `(())()`，匹配的子串有 $S[1,4]$，$S[1,6]$，$S[2,3]$ 和 $S[5,6]$，共 $4$ 个。\n\n第 $5$ 次操作后：$S$ 为 `(()())()`，匹配的子串有 $S[1,6]$，$S[1,8]$，$S[2,3]$，$S[2,5]$，$S[4,5]$ 和 $S[7,8]$，共 $6$ 个。\n\n第 $6$ 次操作后：$S$ 为 `(())()`，匹配的子串有 $S[1,4]$，$S[1,6]$，$S[2,3]$ 和 $S[5,6]$，共 $4$ 个。\n\n---\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\n对于全部数据：$1\\leq n\\leq 2\\times 10^5$，$op\\in \\{1,2,3\\}$，$1\\leq x\\leq n$，一个操作在形式上最多只会被取消一次（即所有 $x$ 互不相同）。\n\n| 子任务编号 |    $n\\leq$     |   $op\\in$   | 分值 |\n| :--------: | :------------: | :---------: | :--: |\n| Subtask 1  |     $100$      | $\\{1,2,3\\}$ | $10$ |\n| Subtask 2  |     $10^3$     | $\\{1,2,3\\}$ | $10$ |\n| Subtask 3  |     $10^5$     | $\\{1,2,3\\}$ | $30$ |\n| Subtask 4  | $2\\times 10^5$ |  $\\{1,2\\}$  | $20$ |\n| Subtask 5  | $2\\times 10^5$ | $\\{1,2,3\\}$ | $30$ |\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[RC-03] Memory", "background": "Little W wants to write a background story about memory, but he forgot it.", "description": "There is a bracket string $S$. Initially, $S$ contains only one pair of brackets (that is, the initial $S$ is `()`). Then there are $n$ operations of three types:\n\n1. Append one pair of brackets to the end of the current $S$ (that is, $S$ becomes `S()`);\n\n2. Add one pair of brackets around the outside of the current $S$ (that is, $S$ becomes `(S)`);\n\n3. Cancel the $x$-th operation, i.e., remove **all effects** caused by the $x$-th operation (for example, if the $x$-th operation is also a cancel operation and it canceled the $y$-th operation, then the essence of the current operation is to restore the effect of the $y$-th operation).\n\nAfter each operation, you need to output the number of non-empty substrings (substrings must be contiguous) of $S$ that can be matched as brackets.\n\nA bracket string can be matched if and only if the numbers of left and right brackets are equal, and in every prefix, the number of left brackets is not less than the number of right brackets.", "inputFormat": "The first line: an integer $n$, the number of operations.\n\nThe next $n$ lines: each line starts with an integer $op$, indicating the type of the operation:\n\nIf $op=1$, it means operation $1$ is performed.\n\nIf $op=2$, it means operation $2$ is performed.\n\nIf $op=3$, there is also an integer $x$ afterwards, meaning operation $3$ is performed and the $x$-th operation is canceled (operations are numbered from $1$ to $n$, and it is guaranteed that the $x$-th operation has already happened). Note that a cancel operation **does not affect any operation indices**. Indices depend only on the input order.", "outputFormat": "Output $n$ lines in total. On line $i$, output an integer $ans_i$, the number of non-empty substrings of the whole bracket string that can be matched after the $i$-th operation ends.", "hint": "[Sample $1$ Explanation]\n\nUse $S[i,j]$ to denote the substring from $S_i$ to $S_j$ (indices start from $1$).\n\nInitially, $S$ is `()`. After each operation:\n\nAfter the $1$-st operation: $S$ is `()()`. The matched substrings are $S[1,2]$, $S[1,4]$, and $S[3,4]$, for a total of $3$.\n\nAfter the $2$-nd operation: $S$ is `(()())`. The matched substrings are $S[1,6]$, $S[2,3]$, $S[2,5]$, and $S[4,5]$, for a total of $4$.\n\nAfter the $3$-rd operation: $S$ is `(())`. The matched substrings are $S[1,4]$ and $S[2,3]$, for a total of $2$.\n\nAfter the $4$-th operation: $S$ is `(())()`. The matched substrings are $S[1,4]$, $S[1,6]$, $S[2,3]$, and $S[5,6]$, for a total of $4$.\n\nAfter the $5$-th operation: $S$ is `(()())()`. The matched substrings are $S[1,6]$, $S[1,8]$, $S[2,3]$, $S[2,5]$, $S[4,5]$, and $S[7,8]$, for a total of $6$.\n\nAfter the $6$-th operation: $S$ is `(())()`. The matched substrings are $S[1,4]$, $S[1,6]$, $S[2,3]$, and $S[5,6]$, for a total of $4$.\n\n---\n\n[Constraints]\n\n**This problem uses bundled testdata.**\n\nFor all data: $1\\leq n\\leq 2\\times 10^5$, $op\\in \\{1,2,3\\}$, $1\\leq x\\leq n$. Each operation can be canceled at most once in form (i.e., all $x$ are distinct).\n\n| Subtask ID |    $n\\leq$     |   $op\\in$   | Score |\n| :--------: | :------------: | :---------: | :---: |\n| Subtask 1  |     $100$      | $\\{1,2,3\\}$ | $10$  |\n| Subtask 2  |     $10^3$     | $\\{1,2,3\\}$ | $10$  |\n| Subtask 3  |     $10^5$     | $\\{1,2,3\\}$ | $30$  |\n| Subtask 4  | $2\\times 10^5$ |  $\\{1,2\\}$  | $20$  |\n| Subtask 5  | $2\\times 10^5$ | $\\{1,2,3\\}$ | $30$  |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[RC-03] 记忆", "background": "小 W 想写一个关于记忆的题目背景，但是他忘记了。", "description": "有一个括号串 $S$，一开始 $S$ 中只包含一对括号（即初始的 $S$ 为 `()`），接下来有 $n$ 个操作，操作分为三种：\n\n1. 在当前 $S$ 的末尾加一对括号（即 $S$ 变为 `S()`）；\n\n2. 在当前 $S$ 的最外面加一对括号（即 $S$ 变为 `(S)`）；\n\n3. 取消第 $x$ 个操作，即去除第 $x$ 个操作造成过的**一切影响**（例如，如果第 $x$ 个操作也是取消操作，且取消了第 $y$ 个操作，那么当前操作的实质就是恢复了第 $y$ 个操作的作用效果）。\n\n每次操作后，你需要输出 $S$ 的能够括号匹配的非空子串（子串要求连续）个数。\n\n一个括号串能够括号匹配，当且仅当其左右括号数量相等，且任意一个前缀中左括号数量不少于右括号数量。", "inputFormat": "第一行：一个整数 $n$，表示操作的个数。\n\n接下来 $n$ 行：每行先有一个整数 $op$，表示操作的种类：\n\n若 $op=1$，则表示执行了操作 $1$；\n\n若 $op=2$，则表示执行了操作 $2$；\n\n若 $op=3$，接下来还有一个整数 $x$，表示执行操作 $3$，取消了第 $x$ 个操作（操作按 $1$ 到 $n$ 编号，保证第 $x$ 个操作已发生），注意取消操作**并不影响任何操作的编号**，编号只取决于输入顺序。", "outputFormat": "共 $n$ 行：第 $i$ 行输出一个整数 $ans_i$，表示第 $i$ 次操作结束后整个括号串的括号匹配的非空子串个数。", "hint": "【样例 $1$ 解释】\n\n用 $S[i,j]$ 表示从 $S_i$ 到 $S_j$ 的子串（下标从 $1$ 开始）。\n\n一开始 $S$ 为 `()`，每次操作后：\n\n第 $1$ 次操作后：$S$ 为 `()()`，匹配的子串有 $S[1,2]$，$S[1,4]$ 和 $S[3,4]$，共 $3$ 个。\n\n第 $2$ 次操作后：$S$ 为 `(()())`，匹配的子串有 $S[1,6]$，$S[2,3]$，$S[2,5]$ 和 $S[4,5]$，共 $4$ 个。\n\n第 $3$ 次操作后：$S$ 为 `(())`，匹配的子串有 $S[1,4]$ 和 $S[2,3]$，共 $2$ 个。\n\n第 $4$ 次操作后：$S$ 为 `(())()`，匹配的子串有 $S[1,4]$，$S[1,6]$，$S[2,3]$ 和 $S[5,6]$，共 $4$ 个。\n\n第 $5$ 次操作后：$S$ 为 `(()())()`，匹配的子串有 $S[1,6]$，$S[1,8]$，$S[2,3]$，$S[2,5]$，$S[4,5]$ 和 $S[7,8]$，共 $6$ 个。\n\n第 $6$ 次操作后：$S$ 为 `(())()`，匹配的子串有 $S[1,4]$，$S[1,6]$，$S[2,3]$ 和 $S[5,6]$，共 $4$ 个。\n\n---\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\n对于全部数据：$1\\leq n\\leq 2\\times 10^5$，$op\\in \\{1,2,3\\}$，$1\\leq x\\leq n$，一个操作在形式上最多只会被取消一次（即所有 $x$ 互不相同）。\n\n| 子任务编号 |    $n\\leq$     |   $op\\in$   | 分值 |\n| :--------: | :------------: | :---------: | :--: |\n| Subtask 1  |     $100$      | $\\{1,2,3\\}$ | $10$ |\n| Subtask 2  |     $10^3$     | $\\{1,2,3\\}$ | $10$ |\n| Subtask 3  |     $10^5$     | $\\{1,2,3\\}$ | $30$ |\n| Subtask 4  | $2\\times 10^5$ |  $\\{1,2\\}$  | $20$ |\n| Subtask 5  | $2\\times 10^5$ | $\\{1,2,3\\}$ | $30$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P6865", "type": "P", "difficulty": 7, "samples": [["3 3 3\n1 2\n2 3\n3 1", "3\n1 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["提交答案", "Special Judge"], "title": "[RC-03] 染色", "background": "提示：输入文件很大，因此下载可能较慢（约需 3 分钟），请耐心等待。\n\n**本题为提交答案题。** 输入数据请在[这里](http://119.27.163.117/images/files/input.zip)下载。\n\n你提交的答案**最好**依次命名为：\n\n- 01.out\n- 02.out\n- $\\dots$\n- 18.out", "description": "给一个无向图，求尽量小的 $k$，使得能够把节点分为 $k$ 个集合，且同一集合的点间没有边。", "inputFormat": "第一行三个整数：$n,m,k_0$，表示有 $n$ 个点，$m$ 条边，你的 $k$ 只要满足 $k\\le k_0$ 就能得到满分。\n\n接下来 $m$ 行，每行两个数 $x,y$，描述一条边 $(x,y)$。$(1\\le x,y\\le n,x\\ne y)$", "outputFormat": "两行，第一行为一个整数 $k$，为你的答案。$(1\\le k\\le n)$\n\n第二行 $n$ 个整数，第 $i$ 个表示 $i$ 被分到的集合编号 $a_i$。$(1\\le a_i\\le k)$", "hint": "对于每个测试点：\n\n- 若你的输出不合法，你将得到 $0$ 分。\n- 若 $k\\le k_0$，你将得到满分。\n- 否则你将得到（设该测试点满分为 $a$）：$\\lfloor a \\times \\dfrac{k_0}{k}\\rfloor$ 分。\n\n本题共有 $18$ 个测试点，所有测试点均满足 $1\\le n\\le 10^5$，$1\\le m\\le 5\\times 10^5$，且保证存在一种满足 $k\\le k_0$ 的方案。以下是每个测试点的分值：\n\n| 测试点编号 | 分值 |\n| :----------: | :----------: |\n| $1\\sim 4$ | $4$ |\n| $5\\sim 6$ | $5$ |\n| $7\\sim 17$ | $6$ |\n| $18$ | $8$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-03] 染色", "background": "提示：输入文件很大，因此下载可能较慢（约需 3 分钟），请耐心等待。\n\n**本题为提交答案题。** 输入数据请在[这里](http://119.27.163.117/images/files/input.zip)下载。\n\n你提交的答案**最好**依次命名为：\n\n- 01.out\n- 02.out\n- $\\dots$\n- 18.out", "description": "给一个无向图，求尽量小的 $k$，使得能够把节点分为 $k$ 个集合，且同一集合的点间没有边。", "inputFormat": "第一行三个整数：$n,m,k_0$，表示有 $n$ 个点，$m$ 条边，你的 $k$ 只要满足 $k\\le k_0$ 就能得到满分。\n\n接下来 $m$ 行，每行两个数 $x,y$，描述一条边 $(x,y)$。$(1\\le x,y\\le n,x\\ne y)$", "outputFormat": "两行，第一行为一个整数 $k$，为你的答案。$(1\\le k\\le n)$\n\n第二行 $n$ 个整数，第 $i$ 个表示 $i$ 被分到的集合编号 $a_i$。$(1\\le a_i\\le k)$", "hint": "对于每个测试点：\n\n- 若你的输出不合法，你将得到 $0$ 分。\n- 若 $k\\le k_0$，你将得到满分。\n- 否则你将得到（设该测试点满分为 $a$）：$\\lfloor a \\times \\dfrac{k_0}{k}\\rfloor$ 分。\n\n本题共有 $18$ 个测试点，所有测试点均满足 $1\\le n\\le 10^5$，$1\\le m\\le 5\\times 10^5$，且保证存在一种满足 $k\\le k_0$ 的方案。以下是每个测试点的分值：\n\n| 测试点编号 | 分值 |\n| :----------: | :----------: |\n| $1\\sim 4$ | $4$ |\n| $5\\sim 6$ | $5$ |\n| $7\\sim 17$ | $6$ |\n| $18$ | $8$ |", "locale": "zh-CN"}}}
{"pid": "P6866", "type": "P", "difficulty": 1, "samples": [["6 7\n***....\n***..**\n.....**\n.***.**\n.***...\n.***...\n", "3"], ["3 3\n*.*\n...\n*.*\n", "4"], ["1 10\n.*.**.***.\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #5] Emacs", "background": "", "description": "给定一个 $n\\times m$ 的只含有 `.` 和 `*` 的矩阵。\n\n矩阵中 `*` 形成一些不重叠的长方形。它们不在边缘或顶点接触。\n\n求长方形有多少个？", "inputFormat": "第一行：两个正整数 $n$ 和 $m$。\n\n以下 $n$ 行：表示题目描述中的矩阵。矩阵只含有 `.` 和 `*`。", "outputFormat": "一行一个非负整数，你的答案。", "hint": "### 数据范围\n\n- 对于 $10 pts$ 的数据，矩阵中每个长方形只含一个 `*`。\n- 对于另外 $15 pts$ 的数据，保证 $n=1$。\n- 对于所有的数据，$1\\leq n,m\\leq 100$。\n\n### 说明\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #5](https://hsin.hr/coci/archive/2019_2020/contest5_tasks.pdf)  _T1 Emacs_** ，译者 [90693](/user/90693)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #5] Emacs", "background": "", "description": "给定一个 $n\\times m$ 的只含有 `.` 和 `*` 的矩阵。\n\n矩阵中 `*` 形成一些不重叠的长方形。它们不在边缘或顶点接触。\n\n求长方形有多少个？", "inputFormat": "第一行：两个正整数 $n$ 和 $m$。\n\n以下 $n$ 行：表示题目描述中的矩阵。矩阵只含有 `.` 和 `*`。", "outputFormat": "一行一个非负整数，你的答案。", "hint": "### 数据范围\n\n- 对于 $10 pts$ 的数据，矩阵中每个长方形只含一个 `*`。\n- 对于另外 $15 pts$ 的数据，保证 $n=1$。\n- 对于所有的数据，$1\\leq n,m\\leq 100$。\n\n### 说明\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #5](https://hsin.hr/coci/archive/2019_2020/contest5_tasks.pdf)  _T1 Emacs_** ，译者 [90693](/user/90693)。", "locale": "zh-CN"}}}
{"pid": "P6867", "type": "P", "difficulty": 2, "samples": [["2 4\n0 2\n1 0\n", "2"], ["3 7\n0 3 2\n3 0 3\n2 1 0\n", "1"], ["4 7\n0 4 3 2\n4 0 4 1\n2 1 0 1\n3 2 3 0\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #5] Politicari", "background": "", "description": "有 $n$ 个人互相批评。\n\n另提供矩阵 $A$。\n\n规则如下：\n\n- 第一次，第 $1$ 个人批评第 $2$ 个人。\n\n- 如果第 $i-1$ 次为第 $u$ 个人批评第 $v$ 个人，\n\n\t那么第 $i$ 次为第 $v$ 个人批评第 $A_{v,u}$ 个人。\n\n求第 $k$ 次是谁**进行**批评（注意：不是**被**批评）。", "inputFormat": "第一行：两个正整数，$n$ 和 $k$。\n\n以下 $n$ 行：矩阵 $A$。矩阵的主对角线（就是从左上到右下的那条对角线）全是 $0$，其他部分由从 $1$ 到 $n$ 的正整数组成。", "outputFormat": "一行：你的答案。", "hint": "### 数据范围\n\n- 对于 $35 pts$ 的数据，保证 $1\\leq k\\leq 10^5$。\n- 对于所有的数据，$2\\leq n\\leq 500$ 且 $1\\leq k\\leq 10^{18}$。\n\n### 说明\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #5](https://hsin.hr/coci/archive/2019_2020/contest5_tasks.pdf)  _T2 Političari_** ，译者 [90693](/user/90693)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #5] Politicari", "background": "", "description": "有 $n$ 个人互相批评。\n\n另提供矩阵 $A$。\n\n规则如下：\n\n- 第一次，第 $1$ 个人批评第 $2$ 个人。\n\n- 如果第 $i-1$ 次为第 $u$ 个人批评第 $v$ 个人，\n\n\t那么第 $i$ 次为第 $v$ 个人批评第 $A_{v,u}$ 个人。\n\n求第 $k$ 次是谁**进行**批评（注意：不是**被**批评）。", "inputFormat": "第一行：两个正整数，$n$ 和 $k$。\n\n以下 $n$ 行：矩阵 $A$。矩阵的主对角线（就是从左上到右下的那条对角线）全是 $0$，其他部分由从 $1$ 到 $n$ 的正整数组成。", "outputFormat": "一行：你的答案。", "hint": "### 数据范围\n\n- 对于 $35 pts$ 的数据，保证 $1\\leq k\\leq 10^5$。\n- 对于所有的数据，$2\\leq n\\leq 500$ 且 $1\\leq k\\leq 10^{18}$。\n\n### 说明\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #5](https://hsin.hr/coci/archive/2019_2020/contest5_tasks.pdf)  _T2 Političari_** ，译者 [90693](/user/90693)。", "locale": "zh-CN"}}}
{"pid": "P6868", "type": "P", "difficulty": 6, "samples": [["8\n1 1\n1 3\n2 2\n2 4\n3 1\n3 3\n4 2\n4 4\n", "DA\n1 5\n3 7\n2 6\n4 8"], ["6\n1 2\n1 3\n2 1\n2 4\n3 2\n3 3\n", "DA\n1 2\n3 4\n5 6"], ["2\n1 1\n2 2\n", "NE"], ["20\n62488 5330\n62488 5027\n76436 5027\n39827 79374\n95732 59715\n66222 46366\n8346 59715\n49581 53207\n66222 79374\n80123 46366\n76436 5330\n39590 5690\n82990 89723\n95732 89723\n8346 79295\n80123 16069\n39827 16069\n49581 5690\n82990 79295\n39590 53207\n", "DA\n3 11\n1 2\n16 10\n6 9\n4 17\n13 19\n15 7\n5 14\n12 20\n8 18"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #5] Matching", "background": "", "description": "给你二维平面上的 $n$ 个整点。保证 $\\forall a$，有至多两个形如 $(a,x)$ 的点；$\\forall b$，有至多两个形如 $(x,b)$ 的点。\n\n请你用 $n\\over 2$ 条线段连接这 $n$ 个点。要求每个点都是一条线段的端点。要求这些线段都是水平的或竖直的。要求这些线段都不相交。\n\n请你求出这是否可能。如果可能，请你输出任意一种方法。", "inputFormat": "- 第一行有一个偶正整数 $n$。\n\n- 接下来有 $n$ 行。第 $i$ 行有两个正整数 $x_i,y_i$，表示第 $i$ 个点的坐标。", "outputFormat": "如果不可能，请在一行输出 `NE`。\n\n如果可能，请在第一行输出 `DA`。在接下来的 $n\\over 2$ 行中各输出两个整数，表示一条线段（整数是端点的编号，从 $1$ 开始）。", "hint": "### 数据范围\n\n**本题捆绑测试。**\n\n- 对于 $5 pts$ 的数据：$2\\leq n\\leq 20$，且 $\\forall a$ ，有偶数个形如 $(a,x)$ 的点和偶数个形如 $(x,a)$ 的点。\n- 对于另外 $6 pts$ 的数据：$2\\leq n\\leq 20$。\n- 对于另外 $7 pts$ 的数据：$2\\leq n\\leq 40$。\n- 对于另外 $40 pts$ 的数据：$2\\leq n\\leq 2000$。\n- 对于所有的数据：$2\\leq n\\leq 100000$ 且 $1\\leq x_i,y_i\\leq 100000$。对于任何整数 $a$ ，有至多 $2$ 个点 $(a,x)$ 和 至多 $2$ 个点 $(x,a)$。\n\n### 说明\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #5](https://hsin.hr/coci/archive/2019_2020/contest5_tasks.pdf)  _T3 Matching_** ，译者 [90693](/user/90693)。\n\nspj by [90693](/user/90693)，有任何问题请直接私信或@。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #5] Matching", "background": "", "description": "给你二维平面上的 $n$ 个整点。保证 $\\forall a$，有至多两个形如 $(a,x)$ 的点；$\\forall b$，有至多两个形如 $(x,b)$ 的点。\n\n请你用 $n\\over 2$ 条线段连接这 $n$ 个点。要求每个点都是一条线段的端点。要求这些线段都是水平的或竖直的。要求这些线段都不相交。\n\n请你求出这是否可能。如果可能，请你输出任意一种方法。", "inputFormat": "- 第一行有一个偶正整数 $n$。\n\n- 接下来有 $n$ 行。第 $i$ 行有两个正整数 $x_i,y_i$，表示第 $i$ 个点的坐标。", "outputFormat": "如果不可能，请在一行输出 `NE`。\n\n如果可能，请在第一行输出 `DA`。在接下来的 $n\\over 2$ 行中各输出两个整数，表示一条线段（整数是端点的编号，从 $1$ 开始）。", "hint": "### 数据范围\n\n**本题捆绑测试。**\n\n- 对于 $5 pts$ 的数据：$2\\leq n\\leq 20$，且 $\\forall a$ ，有偶数个形如 $(a,x)$ 的点和偶数个形如 $(x,a)$ 的点。\n- 对于另外 $6 pts$ 的数据：$2\\leq n\\leq 20$。\n- 对于另外 $7 pts$ 的数据：$2\\leq n\\leq 40$。\n- 对于另外 $40 pts$ 的数据：$2\\leq n\\leq 2000$。\n- 对于所有的数据：$2\\leq n\\leq 100000$ 且 $1\\leq x_i,y_i\\leq 100000$。对于任何整数 $a$ ，有至多 $2$ 个点 $(a,x)$ 和 至多 $2$ 个点 $(x,a)$。\n\n### 说明\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #5](https://hsin.hr/coci/archive/2019_2020/contest5_tasks.pdf)  _T3 Matching_** ，译者 [90693](/user/90693)。\n\nspj by [90693](/user/90693)，有任何问题请直接私信或@。", "locale": "zh-CN"}}}
{"pid": "P6869", "type": "P", "difficulty": 4, "samples": [["4\n1 2 3 5\n1 3 2 4\n2 4 1 3\n", "10"], ["4\n1 4 5 5\n3 4 4 7\n2 4 2 6\n", "16"], ["5\n1 2 2 3\n1 3 2 3\n1 4 2 3\n1 5 2 3\n", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "最近公共祖先 LCA", "差分", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #5] Putovanje", "background": null, "description": "给你一棵有 $n$ 个点的树，节点编号从 $1$ 到 $n$。\n\n你会按编号从小到大顺序访问每个节点。\n\n经过树上的边需要收费。第 $i$ 条边有单程票（只能用一次）价格 $c_{i1}$ 和多程票（可以用无限次）价格 $c_{i2}$。你在访问途中可能会重复走一条边，所以多程票有时更划算。\n\n请你求出从 $1$ 访问到 $n$ 最少需要多少费用。", "inputFormat": "- 第一行：一个正整数 $n$。\n\n- 接下来的 $n-1$ 行描述 $n-1$ 条边：有 $4$ 个正整数 $a_i,b_i,c_{i1},c_{i2}$，表示有一条连接 $a_i$ 和 $b_i$ 的单程票价格为 $c_{i1}$、多程票价格为 $c_{i2}$ 的边。", "outputFormat": "一行一个正整数：你的答案。", "hint": "### 样例#1 解释\n\n- $1\\to 2$：多程票，费用 $5$。\n- $2\\to 1\\to 3$：$2\\to 1$ 使用买过的多程票，无费用；$1\\to 3$ 单程票，费用 $2$。\n- $3\\to 1\\to 2\\to 4$：$3\\to 1$ 单程票，费用 $2$；$1\\to 2$ 使用买过的多程票，无费用；$2\\to 4$ 单程票，费用 $1$。\n- 费用共 $5+2+2+1=10$。\n\n### 数据范围\n\n**本题捆绑测试。**\n\n- 对于 $20 pts$ 的数据，$2\\leq n\\leq 2000$。\n\n- 对于另外 $25 pts$ 的数据，每个城镇最多与另外两个城镇直接相连。\n\n- 对于所有的数据，$2\\leq n\\leq 2\\times10^5$，$1\\leq a_i,b_i\\leq n$，$1\\leq c_{i1}\\leq c_{i2}\\leq 10^5$。\n\n### 说明\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #5](https://hsin.hr/coci/archive/2019_2020/contest5_tasks.pdf)  _T4 Putovanje_**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #5] Putovanje", "background": null, "description": "给你一棵有 $n$ 个点的树，节点编号从 $1$ 到 $n$。\n\n你会按编号从小到大顺序访问每个节点。\n\n经过树上的边需要收费。第 $i$ 条边有单程票（只能用一次）价格 $c_{i1}$ 和多程票（可以用无限次）价格 $c_{i2}$。你在访问途中可能会重复走一条边，所以多程票有时更划算。\n\n请你求出从 $1$ 访问到 $n$ 最少需要多少费用。", "inputFormat": "- 第一行：一个正整数 $n$。\n\n- 接下来的 $n-1$ 行描述 $n-1$ 条边：有 $4$ 个正整数 $a_i,b_i,c_{i1},c_{i2}$，表示有一条连接 $a_i$ 和 $b_i$ 的单程票价格为 $c_{i1}$、多程票价格为 $c_{i2}$ 的边。", "outputFormat": "一行一个正整数：你的答案。", "hint": "### 样例#1 解释\n\n- $1\\to 2$：多程票，费用 $5$。\n- $2\\to 1\\to 3$：$2\\to 1$ 使用买过的多程票，无费用；$1\\to 3$ 单程票，费用 $2$。\n- $3\\to 1\\to 2\\to 4$：$3\\to 1$ 单程票，费用 $2$；$1\\to 2$ 使用买过的多程票，无费用；$2\\to 4$ 单程票，费用 $1$。\n- 费用共 $5+2+2+1=10$。\n\n### 数据范围\n\n**本题捆绑测试。**\n\n- 对于 $20 pts$ 的数据，$2\\leq n\\leq 2000$。\n\n- 对于另外 $25 pts$ 的数据，每个城镇最多与另外两个城镇直接相连。\n\n- 对于所有的数据，$2\\leq n\\leq 2\\times10^5$，$1\\leq a_i,b_i\\leq n$，$1\\leq c_{i1}\\leq c_{i2}\\leq 10^5$。\n\n### 说明\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #5](https://hsin.hr/coci/archive/2019_2020/contest5_tasks.pdf)  _T4 Putovanje_**。", "locale": "zh-CN"}}}
