{"pid": "P7840", "type": "P", "difficulty": 4, "samples": [["4\n2 3 4 4", "28"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "O2优化", "凸完全单调性（wqs 二分）"], "title": "「C.E.L.U-03」重构", "background": "罗司机最近发现服务器运行速度很慢，于是他准备重构整个服务器的网络以提升效率。", "description": "罗司机有 $n$ 台服务器，每个服务器有一个繁忙度 $v_i$。罗司机将用 $n-1$ 条网络将它们连接在一起，于是每台服务器有一个连接网络数量 $d_i$。这个服务器网络运行的总时间是 $\\sum\\limits_{i=1}^nd_i^2v_i$。请你最小化这个值。", "inputFormat": "第一行一个数，$n$。  \n第二行 $n$ 个数，第 $i$ 个数代表 $v_i$。", "outputFormat": "第一行一个数，答案。  ", "hint": "**样例解释：**  \n连接 $1-2,1-4,2-3$ 三条边，度数分别为 $2,2,1,1$。\n\n|数据编号|$n$|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$\\le5$|无|\n|$2\\sim 3$|$\\le300$|无|\n|$4\\sim 5$|$\\le3\\times10^3$|无|\n|$6$|$\\le3\\times10^4$|所有 $v_i$ 相等|\n|$7\\sim 8$|$\\le3\\times10^4$|无|\n|$9\\sim 10$|$\\le3\\times10^5$|无|  \n\n对于 $100\\%$ 的数据，$1\\leq n\\le3\\times10^5,1\\leq v_i\\le10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-03」重构", "background": "罗司机最近发现服务器运行速度很慢，于是他准备重构整个服务器的网络以提升效率。", "description": "罗司机有 $n$ 台服务器，每个服务器有一个繁忙度 $v_i$。罗司机将用 $n-1$ 条网络将它们连接在一起，于是每台服务器有一个连接网络数量 $d_i$。这个服务器网络运行的总时间是 $\\sum\\limits_{i=1}^nd_i^2v_i$。请你最小化这个值。", "inputFormat": "第一行一个数，$n$。  \n第二行 $n$ 个数，第 $i$ 个数代表 $v_i$。", "outputFormat": "第一行一个数，答案。  ", "hint": "**样例解释：**  \n连接 $1-2,1-4,2-3$ 三条边，度数分别为 $2,2,1,1$。\n\n|数据编号|$n$|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$\\le5$|无|\n|$2\\sim 3$|$\\le300$|无|\n|$4\\sim 5$|$\\le3\\times10^3$|无|\n|$6$|$\\le3\\times10^4$|所有 $v_i$ 相等|\n|$7\\sim 8$|$\\le3\\times10^4$|无|\n|$9\\sim 10$|$\\le3\\times10^5$|无|  \n\n对于 $100\\%$ 的数据，$1\\leq n\\le3\\times10^5,1\\leq v_i\\le10^3$。", "locale": "zh-CN"}}}
{"pid": "P7841", "type": "P", "difficulty": 6, "samples": [["2\n9\n9 5\n2 1\n9 8\n3 2\n5 6\n7 9\n4 3\n5 2\n3\n1 2\n2 3", "Play now\nRestart"], ["附加两组样例详见\nhttps://www.luogu.com.cn/paste/b6mh7ido", "附加两组样例详见\nhttps://www.luogu.com.cn/paste/b6mh7ido"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["博弈论", "O2优化", "树形 DP"], "title": "「C.E.L.U-03」100%不公平的游戏", "background": "今天 ice 出去玩了。原准备与 Alice 玩游戏的 Bob 只能和 Al 玩一场博弈游戏。", "description": "这个游戏是在树上进行的。Bob 先手。Bob 和 Al 轮流进行以下操作，首先无法操作者判负。\n\n- 在树上标记一条未被标记过的边。满足在每一次操作之后，存在一条简单路径遍历所有标记过的边。注意：这条简单路径**可以经过未标记过的边**。\n\n如果给定的树对于 Bob 有必胜方案，输出 `Play now`，否则输出 `Restart`。", "inputFormat": "本题多测，第一行输入一个整数表示数据组数 $T$。\n\n对于每组测试数据，第一行输入一个整数 $n$ 表示树的节点数。\n\n接下来 $n-1$ 行，每行输入两个整数 $u,v$ 表示 $(u,v)$ 是树上的一条边。", "outputFormat": "对于每组测试数据，输出一个字符串，大小写敏感。", "hint": "**样例数据也可见附件** $\\textbf{\\textit{game.in}/\\textit{game.out}}$。\n\n### 样例解释 1\n\n**第一组数据：**\n\n先手选择边 $(2,5)$ 必胜：  \n若后手选择 $(1,2)$，先手选择 $(5,6)$ 可以获胜。  \n若后手选择 $(2,3)$，先手选择 $(5,9)$ 可以获胜。  \n若后手选择 $(3,4)$，先手选择 $(5,9)$ 可以获胜。  \n若后手选择 $(5,6)$，先手选择 $(1,2)$ 可以获胜。  \n若后手选择 $(5,9)$，先手选择 $(3,4)$ 可以获胜。  \n若后手选择 $(7,9)$，先手选择 $(2,3)$ 可以获胜。  \n若后手选择 $(8,9)$，先手选择 $(3,4)$ 可以获胜。  \n综上，无论后手选那一条边，都不会获得胜利。  \n\n**第二组数据：**\n\n先手不存在必胜策略：  \n若先手选择 $(1,2)$，后手选择 $(2,3)$ 获胜。  \n若先手选择 $(2,3)$，后手选择 $(1,2)$ 获胜。\n\n\n### 样例解释 2\n\n各组数据详见下图，其中前两组数据与样例一相同。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/imht95gt.png)\n\n---\n\n### 数据范围\n\n$2\\leq n\\leq5\\times10^5$\n\n$1\\leq T\\leq10^4$\n\n$\\sum n\\leq1.5\\times10^6$\n\n数据保证给定的图是一棵树。\n\n### 子任务  \n1. （8分）$n\\leq6$。\n2. （18分）$n\\leq12,T\\leq10$。\n3. （6分） $n\\leq28,T\\leq10$。\n4. （8分）$n\\leq200,T\\leq10$。\n5. （30分）$n\\leq2000,T\\leq10$。\n6. （6分）最多存在两个节点度数大于 $2$。\n7. （12分）树的形态是一棵完全二叉树。\n8. （12分）无特殊性质。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-03」100%不公平的游戏", "background": "今天 ice 出去玩了。原准备与 Alice 玩游戏的 Bob 只能和 Al 玩一场博弈游戏。", "description": "这个游戏是在树上进行的。Bob 先手。Bob 和 Al 轮流进行以下操作，首先无法操作者判负。\n\n- 在树上标记一条未被标记过的边。满足在每一次操作之后，存在一条简单路径遍历所有标记过的边。注意：这条简单路径**可以经过未标记过的边**。\n\n如果给定的树对于 Bob 有必胜方案，输出 `Play now`，否则输出 `Restart`。", "inputFormat": "本题多测，第一行输入一个整数表示数据组数 $T$。\n\n对于每组测试数据，第一行输入一个整数 $n$ 表示树的节点数。\n\n接下来 $n-1$ 行，每行输入两个整数 $u,v$ 表示 $(u,v)$ 是树上的一条边。", "outputFormat": "对于每组测试数据，输出一个字符串，大小写敏感。", "hint": "**样例数据也可见附件** $\\textbf{\\textit{game.in}/\\textit{game.out}}$。\n\n### 样例解释 1\n\n**第一组数据：**\n\n先手选择边 $(2,5)$ 必胜：  \n若后手选择 $(1,2)$，先手选择 $(5,6)$ 可以获胜。  \n若后手选择 $(2,3)$，先手选择 $(5,9)$ 可以获胜。  \n若后手选择 $(3,4)$，先手选择 $(5,9)$ 可以获胜。  \n若后手选择 $(5,6)$，先手选择 $(1,2)$ 可以获胜。  \n若后手选择 $(5,9)$，先手选择 $(3,4)$ 可以获胜。  \n若后手选择 $(7,9)$，先手选择 $(2,3)$ 可以获胜。  \n若后手选择 $(8,9)$，先手选择 $(3,4)$ 可以获胜。  \n综上，无论后手选那一条边，都不会获得胜利。  \n\n**第二组数据：**\n\n先手不存在必胜策略：  \n若先手选择 $(1,2)$，后手选择 $(2,3)$ 获胜。  \n若先手选择 $(2,3)$，后手选择 $(1,2)$ 获胜。\n\n\n### 样例解释 2\n\n各组数据详见下图，其中前两组数据与样例一相同。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/imht95gt.png)\n\n---\n\n### 数据范围\n\n$2\\leq n\\leq5\\times10^5$\n\n$1\\leq T\\leq10^4$\n\n$\\sum n\\leq1.5\\times10^6$\n\n数据保证给定的图是一棵树。\n\n### 子任务  \n1. （8分）$n\\leq6$。\n2. （18分）$n\\leq12,T\\leq10$。\n3. （6分） $n\\leq28,T\\leq10$。\n4. （8分）$n\\leq200,T\\leq10$。\n5. （30分）$n\\leq2000,T\\leq10$。\n6. （6分）最多存在两个节点度数大于 $2$。\n7. （12分）树的形态是一棵完全二叉树。\n8. （12分）无特殊性质。", "locale": "zh-CN"}}}
{"pid": "P7842", "type": "P", "difficulty": 6, "samples": [["3 3 1\n1 1 2\n2 1 1\n2 2 1 2\n3 2 1 3", "4"], ["4 6 2\n1 1 3 2\n3 3 1 2 3\n2 2 2 3\n3 3 2 3 4\n2 2 1 3\n4 3 1 3 4\n6 4 1 2 3 4", "12"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384]}, "tags": ["cdq 分治", "O2优化", "位运算"], "title": "「C.E.L.U-03」探险者笔记 III", "background": "罗司机在通关小 Soup 所制作的游戏《探险者笔记》后，感到十分的悲伤。为了缓解内心的伤痛，他决定改制《探险者笔记》，使其成为一个快乐的游戏。  \n一段时间之后，罗司机完成了制作，并喊来小 Soup 给他测试。", "description": "改制后的《探险者笔记》由 $n$ 个关卡组成，每个关卡有一个难度 $b_i$，同时有 $m$ 个成就，第 $i$ 个成就需要你恰好完成 $sum_i$ 个关卡，且**刚好**分别是 $a_{i_1},a_{i_2},...,a_{i_{sum_i}}$。完成第 $i$ 个成就可以得到 $v_i$ 的分数。  \n如果长时间推关而没有获得任何成就，小 Soup 会感到疲乏。而且成就的解锁是有一定顺序的。因此上一个获得第 $i$ 个成就接下来再获得第 $j$ 个成就的条件是 $i<j$ 且 $w+\\sum\\limits_{k=1}^{sum_i}b_{a_{i_k}}\\ge\\sum\\limits_{k=1}^{sum_j}b_{a_{j_k}}$，其中 $w$ 是一个给定的常数。  \n第一次获得成就没有任何限制。求最多他能得到多少分数。", "inputFormat": "第一行三个数 $n,m,w$。  \n第二行 $n$ 个数，$b_i$。  \n接下来 $m$ 行，第 $i$ 行一开始有两个数，$v_i,sum_i$，接下来会有 $sum_i$ 个数，$a_{i_1},a_{i_2},...,a_{i_{sum_i}}$。", "outputFormat": "仅一个数，答案。", "hint": "### 样例解释\n\n**样例解释一**    \n依次完成第 $1,2$ 个成就。  \n\n**样例解释二**    \n依次完成第 $4,5,6$ 个成就。注意，成就之间的限制**只在相邻获得的成就之间生效。**\n\n### 数据范围\n|数据编号|$n\\leq$|$m\\leq$|\n|:---:|:---:|:---:|\n|$1$|$9$|$10^3$|\n|$2$|$18$|$10^3$|\n|$3\\sim 6$|$9$|$10^5$|\n|$7\\sim 10$|$18$|$10^5$|\n\n对于 $100\\%$ 的数据 $1\\le n\\le18,1\\le m\\le10^5,1\\le sum_i\\le18,1\\le w,b_i,v_i\\le10^3,1\\le a_i\\le n$。  \n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-03」探险者笔记 III", "background": "罗司机在通关小 Soup 所制作的游戏《探险者笔记》后，感到十分的悲伤。为了缓解内心的伤痛，他决定改制《探险者笔记》，使其成为一个快乐的游戏。  \n一段时间之后，罗司机完成了制作，并喊来小 Soup 给他测试。", "description": "改制后的《探险者笔记》由 $n$ 个关卡组成，每个关卡有一个难度 $b_i$，同时有 $m$ 个成就，第 $i$ 个成就需要你恰好完成 $sum_i$ 个关卡，且**刚好**分别是 $a_{i_1},a_{i_2},...,a_{i_{sum_i}}$。完成第 $i$ 个成就可以得到 $v_i$ 的分数。  \n如果长时间推关而没有获得任何成就，小 Soup 会感到疲乏。而且成就的解锁是有一定顺序的。因此上一个获得第 $i$ 个成就接下来再获得第 $j$ 个成就的条件是 $i<j$ 且 $w+\\sum\\limits_{k=1}^{sum_i}b_{a_{i_k}}\\ge\\sum\\limits_{k=1}^{sum_j}b_{a_{j_k}}$，其中 $w$ 是一个给定的常数。  \n第一次获得成就没有任何限制。求最多他能得到多少分数。", "inputFormat": "第一行三个数 $n,m,w$。  \n第二行 $n$ 个数，$b_i$。  \n接下来 $m$ 行，第 $i$ 行一开始有两个数，$v_i,sum_i$，接下来会有 $sum_i$ 个数，$a_{i_1},a_{i_2},...,a_{i_{sum_i}}$。", "outputFormat": "仅一个数，答案。", "hint": "### 样例解释\n\n**样例解释一**    \n依次完成第 $1,2$ 个成就。  \n\n**样例解释二**    \n依次完成第 $4,5,6$ 个成就。注意，成就之间的限制**只在相邻获得的成就之间生效。**\n\n### 数据范围\n|数据编号|$n\\leq$|$m\\leq$|\n|:---:|:---:|:---:|\n|$1$|$9$|$10^3$|\n|$2$|$18$|$10^3$|\n|$3\\sim 6$|$9$|$10^5$|\n|$7\\sim 10$|$18$|$10^5$|\n\n对于 $100\\%$ 的数据 $1\\le n\\le18,1\\le m\\le10^5,1\\le sum_i\\le18,1\\le w,b_i,v_i\\le10^3,1\\le a_i\\le n$。  \n\n", "locale": "zh-CN"}}}
{"pid": "P7843", "type": "P", "difficulty": 7, "samples": [["3 4 2\n1 0 2 0\n1 1 3 0\n3 0 2 0\n1 1 2 1\n1 3\n3 4", "2\n1"], ["4 5 3\n1 1 2 1\n2 0 3 0\n4 1 1 0\n2 1 4 0\n4 0 3 0\n1 4\n2 5\n3 5", "1\n2\n1"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["倍增", "O2优化", "2-SAT", "动态树 LCT", "整体二分"], "title": "「C.E.L.U-03」布尔", "background": "", "description": "给你 $n$ 个布尔变量和 $m$ 个限制，设 $s_i$ 为 $i$ 的取值。第 $i$ 个限制形如 $s_{u_i}$ 为 $x_i$ 则 $s_{v_i}$ 必须为 $y_i$，同时如果 $s_{v_i}$ 为 $y_i$ 则 $s_{u_i}$ 必须取 $x_i$。  \n一共 $q$ 次询问，每次询问给出一个区间 $l,r$。求最少把 $l,r$ 划分成多少段连续的区间，使得每段里的限制都可以得到一组合法解。如果无论如何都无法得到合法解，输出 `-1`。", "inputFormat": "第一行三个数，$n,m,q$。  \n接下来 $m$ 行每行四个数，代表 $u_i,x_i,v_i,y_i$。  \n接下来 $q$ 行每行两个数，代表 $l_i,r_i$。", "outputFormat": "对于每个询问输出一个数作为答案，如果无法得到答案输出 `-1`。", "hint": "**样例解释一**   \n对于第一个询问，可以分成 $[1,2]$ 和 $3$ 两段。  \n对于第二个询问，分成 $[3,4]$  一段。  \n\n**样例解释二**   \n对于第一个询问，分成 $[1,4]$  一段。  \n对于第二个询问，可以分成 $[2,3]$ 和 $[4,5]$ 两段。  \n对于第三个询问，分成 $[3,5]$  一段。  \n\n| 数据编号| $n\\leq$ | $m\\leq$| $q\\leq$|\n|:---:|:---:|:---:|:---:|\n|$1$|$30$|$100$|$300$|\n|$2\\sim 4$|$300$|$10^3$|$10^3$|\n|$5\\sim 7$|$10^4$|$5\\times10^4$|$10^6$|  \n|$8\\sim 10$|$10^5$|$6\\times10^5$|$10^6$|   \n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5,1\\le m\\le6\\times10^5,1\\le q\\le10^6,1\\le u,v\\le n,1\\le l\\le r\\le m,x,y\\in \\{0,1\\}$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-03」布尔", "background": "", "description": "给你 $n$ 个布尔变量和 $m$ 个限制，设 $s_i$ 为 $i$ 的取值。第 $i$ 个限制形如 $s_{u_i}$ 为 $x_i$ 则 $s_{v_i}$ 必须为 $y_i$，同时如果 $s_{v_i}$ 为 $y_i$ 则 $s_{u_i}$ 必须取 $x_i$。  \n一共 $q$ 次询问，每次询问给出一个区间 $l,r$。求最少把 $l,r$ 划分成多少段连续的区间，使得每段里的限制都可以得到一组合法解。如果无论如何都无法得到合法解，输出 `-1`。", "inputFormat": "第一行三个数，$n,m,q$。  \n接下来 $m$ 行每行四个数，代表 $u_i,x_i,v_i,y_i$。  \n接下来 $q$ 行每行两个数，代表 $l_i,r_i$。", "outputFormat": "对于每个询问输出一个数作为答案，如果无法得到答案输出 `-1`。", "hint": "**样例解释一**   \n对于第一个询问，可以分成 $[1,2]$ 和 $3$ 两段。  \n对于第二个询问，分成 $[3,4]$  一段。  \n\n**样例解释二**   \n对于第一个询问，分成 $[1,4]$  一段。  \n对于第二个询问，可以分成 $[2,3]$ 和 $[4,5]$ 两段。  \n对于第三个询问，分成 $[3,5]$  一段。  \n\n| 数据编号| $n\\leq$ | $m\\leq$| $q\\leq$|\n|:---:|:---:|:---:|:---:|\n|$1$|$30$|$100$|$300$|\n|$2\\sim 4$|$300$|$10^3$|$10^3$|\n|$5\\sim 7$|$10^4$|$5\\times10^4$|$10^6$|  \n|$8\\sim 10$|$10^5$|$6\\times10^5$|$10^6$|   \n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5,1\\le m\\le6\\times10^5,1\\le q\\le10^6,1\\le u,v\\le n,1\\le l\\le r\\le m,x,y\\in \\{0,1\\}$", "locale": "zh-CN"}}}
{"pid": "P7844", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2 3 4 5 6 7 8", "288 831546728 224054051 383438562 998244321 614805727 774190238 166697561"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "「dWoi R2」FFT / 狒狒贴", "background": "狱原权太正在尝试学习 FFT ……", "description": "给定一个长度为 $2^n$ 的非负整数序列 $a_0,a_1,\\cdots,a_{2^n-1}$，请计算序列 $A=\\text{DFT}^k(a)$。\n\n其中 $\\text{DFT}(b)_i$ 定义为：\n\n$$\\text{DFT}(b)_i=\\sum_{j=0}^{2^n-1}b_j\\omega^{ij}\\mod{998244353}$$\n$$\\omega\\equiv3^{\\frac{998244352}{2^n}}\\pmod{998244353}$$", "inputFormat": "第一行两个非负整数 $n,k$。\n\n接下来一行 $2^n$ 个非负整数 $a_0,a_1,\\cdots,a_{2^n-1}$。", "outputFormat": "一行 $2^n$ 个非负整数 $A_0,A_1,\\cdots,A_{2^n-1}$。", "hint": "#### 数据规模与约定\n\n - Subtask 1（10 pts）：$n\\le 11$ 且 $k\\le 10$；\n - Subtask 2（10 pts）：$k\\le 10$；\n - Subtask 3（20 pts）：$n\\le 5$；\n - Subtask 4（30 pts）：$n\\le 11$；\n - Subtask 5（30 pts）：无额外限制。\n\n对于所有数据，$1\\le n\\le 17$，$1\\le k\\le10^{18}$，$0\\le a_i\\le 998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「dWoi R2」FFT / 狒狒贴", "background": "狱原权太正在尝试学习 FFT ……", "description": "给定一个长度为 $2^n$ 的非负整数序列 $a_0,a_1,\\cdots,a_{2^n-1}$，请计算序列 $A=\\text{DFT}^k(a)$。\n\n其中 $\\text{DFT}(b)_i$ 定义为：\n\n$$\\text{DFT}(b)_i=\\sum_{j=0}^{2^n-1}b_j\\omega^{ij}\\mod{998244353}$$\n$$\\omega\\equiv3^{\\frac{998244352}{2^n}}\\pmod{998244353}$$", "inputFormat": "第一行两个非负整数 $n,k$。\n\n接下来一行 $2^n$ 个非负整数 $a_0,a_1,\\cdots,a_{2^n-1}$。", "outputFormat": "一行 $2^n$ 个非负整数 $A_0,A_1,\\cdots,A_{2^n-1}$。", "hint": "#### 数据规模与约定\n\n - Subtask 1（10 pts）：$n\\le 11$ 且 $k\\le 10$；\n - Subtask 2（10 pts）：$k\\le 10$；\n - Subtask 3（20 pts）：$n\\le 5$；\n - Subtask 4（30 pts）：$n\\le 11$；\n - Subtask 5（30 pts）：无额外限制。\n\n对于所有数据，$1\\le n\\le 17$，$1\\le k\\le10^{18}$，$0\\le a_i\\le 998244353$。", "locale": "zh-CN"}}}
{"pid": "P7845", "type": "P", "difficulty": 5, "samples": [["8 8 1 10\n1 2\n1 3\n1 4\n2 5\n3 5\n5 6\n6 7\n6 8", "6"], ["3 2 1 3\n1 2\n1 3", "332748119"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "拓扑排序"], "title": "「dWoi R2」Change / 改造", "background": "入间改造对人类生存繁殖有帮助的工具（~~就是性能工具，具体可以去看看弹丸论破 V3 自由时间与入间美兔的交谈，在这里不方便说吧，毕竟是 青 少 年 编 程 网 站~~）玩腻了，她发现了有一个很 符 合 她 胃 口 的东西，叫做 Galgame，于是她开始打一款叫做 Little Busters 的 Galgame，然后沉迷上了沙耶线最后的场景。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vxy5rh6c.png)\n", "description": "在经过 $99$ 次的 Replay 后，沙耶终于发现迷宫是一个有向无环图。为了保证最后一次 Replay 的趣味性，时风瞬给沙耶和理树安排了一个小游戏。\n\n这张有向无环图 $G$ 有 $n$ 个点，$m$ 条边，每条边的长度为 $1$。设 $l_i$ 为初始点 $s$ 到第 $i$ 条边所指向的点 $u$ 的最短路，定义第 $i$ 条边的边权为 $p-l_i$。游戏步骤是这样的（所有选择都是按如下顺序进行，并且每个人的选择都是公开的）。\n\n1. 理树站在点 $s$ 上。  \n2. 时风瞬会随机选取一个点作为 $t$（$t$ 可以等于 $s$）。\n3. 如果无法从 $s$ 到达 $t$，游戏直接结束。\n3. 沙耶需要选择一条边。\n4. 理树需要找到一条从 $s$ 到 $t$ 的路径。\n5. 若沙耶选择的边在理树所选择的路径上，则理树就会将这条边的边权的钱给沙耶。\n\n理树希望能少输钱，沙耶希望能多拿钱。若两方都采取最优策略，请问沙耶期望能得到多少钱。", "inputFormat": "第一行四个整数 $n,m,s,p$，分别代表有向图点数，边数与理树站在的位置，以及题目中出现的 $p$。\n\n接下来 $m$ 行每行两个整数 $u_i,v_i$ 描述一条边。", "outputFormat": "一行一个整数代表答案。\n\n请对 $998244353$ 取模。", "hint": "#### 样例 1 解释\n\n比如 $t=6$ 时，沙耶应该选择连接 $5,6$ 的那条边；$t=8$ 时，沙耶仍然应该选择连接 $5,6$ 的那条边；$t=4$ 时，应该选择连接 $1,4$ 的那条边；$t=5$ 时，沙耶无论选择什么边都不会得到钱。\n\n设 $res_u$ 表示 $t=u$ 时沙耶能获得的最大收益，我们有 $res=\\{0,9,9,9,0,7,7,7\\}$。\n\n#### 样例 2 解释\n\n设 $res_u$ 表示 $t=u$ 时沙耶能获得的最大收益，我们有 $res=\\{0,2,2\\}$。\n\n---\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$n,m \\le 5$；\n- Subtask 2（20 pts）：$m=n-1$，$u_i<v_i$，$s=1$；\n- Subtask 3（30 pts）：$n,m \\le 10^3$；\n- Subtask 4（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 5 \\times 10^6$，$1 \\le s \\le n$，$1 \\le u_i,v_i \\le n$，$u_i \\ne v_i$，$n\\le p \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「dWoi R2」Change / 改造", "background": "入间改造对人类生存繁殖有帮助的工具（~~就是性能工具，具体可以去看看弹丸论破 V3 自由时间与入间美兔的交谈，在这里不方便说吧，毕竟是 青 少 年 编 程 网 站~~）玩腻了，她发现了有一个很 符 合 她 胃 口 的东西，叫做 Galgame，于是她开始打一款叫做 Little Busters 的 Galgame，然后沉迷上了沙耶线最后的场景。\n\n---\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vxy5rh6c.png)\n", "description": "在经过 $99$ 次的 Replay 后，沙耶终于发现迷宫是一个有向无环图。为了保证最后一次 Replay 的趣味性，时风瞬给沙耶和理树安排了一个小游戏。\n\n这张有向无环图 $G$ 有 $n$ 个点，$m$ 条边，每条边的长度为 $1$。设 $l_i$ 为初始点 $s$ 到第 $i$ 条边所指向的点 $u$ 的最短路，定义第 $i$ 条边的边权为 $p-l_i$。游戏步骤是这样的（所有选择都是按如下顺序进行，并且每个人的选择都是公开的）。\n\n1. 理树站在点 $s$ 上。  \n2. 时风瞬会随机选取一个点作为 $t$（$t$ 可以等于 $s$）。\n3. 如果无法从 $s$ 到达 $t$，游戏直接结束。\n3. 沙耶需要选择一条边。\n4. 理树需要找到一条从 $s$ 到 $t$ 的路径。\n5. 若沙耶选择的边在理树所选择的路径上，则理树就会将这条边的边权的钱给沙耶。\n\n理树希望能少输钱，沙耶希望能多拿钱。若两方都采取最优策略，请问沙耶期望能得到多少钱。", "inputFormat": "第一行四个整数 $n,m,s,p$，分别代表有向图点数，边数与理树站在的位置，以及题目中出现的 $p$。\n\n接下来 $m$ 行每行两个整数 $u_i,v_i$ 描述一条边。", "outputFormat": "一行一个整数代表答案。\n\n请对 $998244353$ 取模。", "hint": "#### 样例 1 解释\n\n比如 $t=6$ 时，沙耶应该选择连接 $5,6$ 的那条边；$t=8$ 时，沙耶仍然应该选择连接 $5,6$ 的那条边；$t=4$ 时，应该选择连接 $1,4$ 的那条边；$t=5$ 时，沙耶无论选择什么边都不会得到钱。\n\n设 $res_u$ 表示 $t=u$ 时沙耶能获得的最大收益，我们有 $res=\\{0,9,9,9,0,7,7,7\\}$。\n\n#### 样例 2 解释\n\n设 $res_u$ 表示 $t=u$ 时沙耶能获得的最大收益，我们有 $res=\\{0,2,2\\}$。\n\n---\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 pts）：$n,m \\le 5$；\n- Subtask 2（20 pts）：$m=n-1$，$u_i<v_i$，$s=1$；\n- Subtask 3（30 pts）：$n,m \\le 10^3$；\n- Subtask 4（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 5 \\times 10^6$，$1 \\le s \\le n$，$1 \\le u_i,v_i \\le n$，$u_i \\ne v_i$，$n\\le p \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7846", "type": "P", "difficulty": 4, "samples": [["3 3\n1 2 0\n1 3 0", "12 4"], ["9 3\n1 2 0\n1 3 1\n1 4 1\n2 5 2\n2 6 1\n6 7 0\n4 8 2\n4 9 0", "648 12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树形 DP"], "title": "「dWoi R2」Arcade hall / 街机厅", "background": "众所周知，才囚学院地下有一个街机厅，~~百田被星龙马打败了 114514 次~~。\n\n百田不服气，于是他打开了一个单人游戏 —— 先辈的城市。\n\n---\n\n114514 年，火星，幺舅幺舅巴以灵国。\n\n因为有小可爱提出题面过于冗长，所以下方有 **简要题面**。", "description": "幺舅幺舅巴以灵国一共有 $n$ 个城市，他们之间用一种神奇的通讯工具 —— 先辈符，第 $i$ 个城市的先辈符上刻有一个正整数 $w_i$。这 $n$ 个城市之前有 $n-1$ 条道路，第 $j$ 条道路连接第 $u_j$ 个城市和第 $v_j$ 个城市，有一个属性 $t_j$，这一条道路就表示为 $(u_j,v_j,t_j)$，其中 $t_j \\in \\{0,1,2\\}$，意为：\n\n- $t_j=0$ 时，第 $u_j$ 个城市与第 $v_j$ 个城市是敌对关系；\n- $t_j=1$ 时，第 $u_j$ 个城市与第 $v_j$ 个城市是平等关系；\n- $t_j=2$ 时，第 $u_j$ 个城市与第 $v_j$ 个城市是友好关系。\n\n每一条道路都是双向的，并且保证任意两个城市 $u,v$ 之间都是可以互相到达的。\n\n最近火星发生了 MARS-514 病毒疫情，先辈符系统的修建要加快脚步。我们规定：\n\n- $w_i \\in [1,R]$，且是一个正整数；\n- 对于一条道路 $(p,q,r)$，有如下要求：\n\t- 当 $r=0$ 时，即第 $p$ 个城市与第 $q$ 个城市处于敌对关系时，需要保证 $w_p \\ne w_q$；\n    - 当 $r=2$ 时，即第 $p$ 个城市与第 $q$ 个城市处于友好关系时，需要保证 $w_p=w_q$；\n    - 当 $r=1$ 时，即第 $p$ 个城市与第 $q$ 个城市处于平等关系时，不需要保证 $w_p$ 与 $w_q$ 的大小关系。\n    \n求这样分配 $w_i$ 后，将 $w_i$ 作为一个序列，会形成多少个本质不同的序列 $w_i$。\n\n额外地，幺舅幺舅巴以灵国的统治者浩二结节在建造先辈符发现 $w_i$ 越大，用墨就会越多，建造起来也会越困难，所以浩二结节想知道 $w_i$ 的和的最小值是多少。\n\n注意，本题的序列 $A_i$ 与 $B_i$ 本质相同当且仅当对于所有 $i$ 都有 $A_i=B_i$。\n\n本质不同即为不满足本质相同的两个序列。\n\n---\n\n**简要题面**：\n\n- 有一棵 $n$ 个点的树，第 $i$ 个点有点权 $w_i$，第 $j$ 条边有边权 $t_j$；\n- 每一条边 $(u_j,v_j,t_j)$ 两边点的点权有如下要求：\n\t- $t_j=0$，$w_{u_j} \\ne w_{v_j}$；\n    - $t_j=1$，没有要求；\n    - $t_j=2$，$w_{u_j}=w_{v_j}$；\n    - 对任意点权都要有 $w_i \\in [1,R]$；\n- 求当 $w_i$ 作为序列时，一共有多少种本质不同的序列 $w_i$ 以及 $w_i$ 的和的最小值。", "inputFormat": "第一行两个整数 $n,R$ 代表城市数与值域。\n\n接下来 $n-1$ 行每行三个整数 $u_j,v_j,t_j$ 描述一条道路。", "outputFormat": "一行两个整数分别代表满足要求的本质不同的序列 $w_i$ 的个数和 $w_i$ 的和的最小值。\n\n如果不存在本质不同的序列（即第一问答案为 $0$），第二问也请输出一个 $0$。\n\n**只有第一问答案对 $10^9+7$ 取模。**", "hint": "#### 样例 1 解释\n\n样例中的道路分布如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vq4dukx8.png)\n\n一共有 $12$ 种赋值方式：\n\n1. $w_i=\\{1,2,2\\}$；\n2. $w_i=\\{1,2,3\\}$；\n3. $w_i=\\{1,3,2\\}$；\n4. $w_i=\\{1,3,3\\}$；\n5. $w_i= \\bf \\{2,1,1\\}$，这是最优情况；\n6. $w_i=\\{2,1,3\\}$；\n7. $w_i=\\{2,3,1\\}$；\n8. $w_i=\\{2,3,3\\}$；\n9. $w_i=\\{3,1,1\\}$；\n10. $w_i=\\{3,1,2\\}$；\n11. $w_i=\\{3,2,1\\}$；\n12. $w_i=\\{3,2,2\\}$。\n\n#### 样例 2 解释\n\n样例中的道路分布如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9f1qjpm4.png)\n\n对于第二问，其中一种最优的赋值方式是：$w_i=\\{2,1,1,1,1,1,2,1,2\\}$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$t_j=1$ 或 $t_j=2$；\n- Subtask 2（5 pts）：$R=1$；\n- Subtask 3（10 pts）：$u_j=j$，$v_j=j+1$；\n- Subtask 4（20 pts）：$t_j=0$；\n- Subtask 5（10 pts）：$n \\le 10$，$R \\le 5$；\n- Subtask 6（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le R \\le 100$。\n\n对于 Subtask 1 ~ 5，$R \\le 40$。\n\n上面描述 Subtask 时 $t_j=P$ 即为对于所有 $j \\in [1,n)$ 都有 $t_j=P$。\n\n其中对于 Subtask 1，“或” 意为 Subtask\n1 的一部分测试点满足 $t_j=1$，另一部分测试点满足 $t_j=2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「dWoi R2」Arcade hall / 街机厅", "background": "众所周知，才囚学院地下有一个街机厅，~~百田被星龙马打败了 114514 次~~。\n\n百田不服气，于是他打开了一个单人游戏 —— 先辈的城市。\n\n---\n\n114514 年，火星，幺舅幺舅巴以灵国。\n\n因为有小可爱提出题面过于冗长，所以下方有 **简要题面**。", "description": "幺舅幺舅巴以灵国一共有 $n$ 个城市，他们之间用一种神奇的通讯工具 —— 先辈符，第 $i$ 个城市的先辈符上刻有一个正整数 $w_i$。这 $n$ 个城市之前有 $n-1$ 条道路，第 $j$ 条道路连接第 $u_j$ 个城市和第 $v_j$ 个城市，有一个属性 $t_j$，这一条道路就表示为 $(u_j,v_j,t_j)$，其中 $t_j \\in \\{0,1,2\\}$，意为：\n\n- $t_j=0$ 时，第 $u_j$ 个城市与第 $v_j$ 个城市是敌对关系；\n- $t_j=1$ 时，第 $u_j$ 个城市与第 $v_j$ 个城市是平等关系；\n- $t_j=2$ 时，第 $u_j$ 个城市与第 $v_j$ 个城市是友好关系。\n\n每一条道路都是双向的，并且保证任意两个城市 $u,v$ 之间都是可以互相到达的。\n\n最近火星发生了 MARS-514 病毒疫情，先辈符系统的修建要加快脚步。我们规定：\n\n- $w_i \\in [1,R]$，且是一个正整数；\n- 对于一条道路 $(p,q,r)$，有如下要求：\n\t- 当 $r=0$ 时，即第 $p$ 个城市与第 $q$ 个城市处于敌对关系时，需要保证 $w_p \\ne w_q$；\n    - 当 $r=2$ 时，即第 $p$ 个城市与第 $q$ 个城市处于友好关系时，需要保证 $w_p=w_q$；\n    - 当 $r=1$ 时，即第 $p$ 个城市与第 $q$ 个城市处于平等关系时，不需要保证 $w_p$ 与 $w_q$ 的大小关系。\n    \n求这样分配 $w_i$ 后，将 $w_i$ 作为一个序列，会形成多少个本质不同的序列 $w_i$。\n\n额外地，幺舅幺舅巴以灵国的统治者浩二结节在建造先辈符发现 $w_i$ 越大，用墨就会越多，建造起来也会越困难，所以浩二结节想知道 $w_i$ 的和的最小值是多少。\n\n注意，本题的序列 $A_i$ 与 $B_i$ 本质相同当且仅当对于所有 $i$ 都有 $A_i=B_i$。\n\n本质不同即为不满足本质相同的两个序列。\n\n---\n\n**简要题面**：\n\n- 有一棵 $n$ 个点的树，第 $i$ 个点有点权 $w_i$，第 $j$ 条边有边权 $t_j$；\n- 每一条边 $(u_j,v_j,t_j)$ 两边点的点权有如下要求：\n\t- $t_j=0$，$w_{u_j} \\ne w_{v_j}$；\n    - $t_j=1$，没有要求；\n    - $t_j=2$，$w_{u_j}=w_{v_j}$；\n    - 对任意点权都要有 $w_i \\in [1,R]$；\n- 求当 $w_i$ 作为序列时，一共有多少种本质不同的序列 $w_i$ 以及 $w_i$ 的和的最小值。", "inputFormat": "第一行两个整数 $n,R$ 代表城市数与值域。\n\n接下来 $n-1$ 行每行三个整数 $u_j,v_j,t_j$ 描述一条道路。", "outputFormat": "一行两个整数分别代表满足要求的本质不同的序列 $w_i$ 的个数和 $w_i$ 的和的最小值。\n\n如果不存在本质不同的序列（即第一问答案为 $0$），第二问也请输出一个 $0$。\n\n**只有第一问答案对 $10^9+7$ 取模。**", "hint": "#### 样例 1 解释\n\n样例中的道路分布如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vq4dukx8.png)\n\n一共有 $12$ 种赋值方式：\n\n1. $w_i=\\{1,2,2\\}$；\n2. $w_i=\\{1,2,3\\}$；\n3. $w_i=\\{1,3,2\\}$；\n4. $w_i=\\{1,3,3\\}$；\n5. $w_i= \\bf \\{2,1,1\\}$，这是最优情况；\n6. $w_i=\\{2,1,3\\}$；\n7. $w_i=\\{2,3,1\\}$；\n8. $w_i=\\{2,3,3\\}$；\n9. $w_i=\\{3,1,1\\}$；\n10. $w_i=\\{3,1,2\\}$；\n11. $w_i=\\{3,2,1\\}$；\n12. $w_i=\\{3,2,2\\}$。\n\n#### 样例 2 解释\n\n样例中的道路分布如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9f1qjpm4.png)\n\n对于第二问，其中一种最优的赋值方式是：$w_i=\\{2,1,1,1,1,1,2,1,2\\}$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$t_j=1$ 或 $t_j=2$；\n- Subtask 2（5 pts）：$R=1$；\n- Subtask 3（10 pts）：$u_j=j$，$v_j=j+1$；\n- Subtask 4（20 pts）：$t_j=0$；\n- Subtask 5（10 pts）：$n \\le 10$，$R \\le 5$；\n- Subtask 6（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le R \\le 100$。\n\n对于 Subtask 1 ~ 5，$R \\le 40$。\n\n上面描述 Subtask 时 $t_j=P$ 即为对于所有 $j \\in [1,n)$ 都有 $t_j=P$。\n\n其中对于 Subtask 1，“或” 意为 Subtask\n1 的一部分测试点满足 $t_j=1$，另一部分测试点满足 $t_j=2$。", "locale": "zh-CN"}}}
{"pid": "P7847", "type": "P", "difficulty": 5, "samples": [["2\n1\n2", "0\n1 2"], ["2\n233\n2020", "479 54056\n5470 8181"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge"], "title": "「dWoi R2」Elevator / 电梯", "background": "zszz，主角总会在学级裁判前乘电梯下去的过程中在内心写小作文。\n\n但万一写不出来怎么办 Zzz ……\n\n于是最原开始想数学题了 ……", "description": "现有正整数 $a,b,c$ 满足 $\\alpha$ 式：$\\dfrac{1}{a}-\\dfrac{1}{b}=\\dfrac{1}{c}$，且 $\\gcd (a,b,c)=1$。\n\n现给定正整数 $N$，请编程求出满足 $c \\leq N$ 的 $\\alpha$ 式的个数以及满足以下条件的一个 $b$：\n\n对所有 $c=N$ 得到的 $\\alpha$ 式中使得 $a$ 最小。", "inputFormat": "第一行一个正整数 $T$，表示询问总数。\n\n接下来 $T$ 行，每行一个正整数，表示给定的 $N$。", "outputFormat": "$T$ 行，每行一个正整数，表示满足条件的 $\\alpha$ 式的个数。若存在解，则空一格后再输出一个满足条件的 $b$。\n\n可以证明，$N>1$ 时一定有这样的 $b$。", "hint": "#### 样例 #2 解释\n\n第一个询问中对应的式子为：$\\dfrac{1}{232} - \\dfrac{1}{54056} = \\dfrac{1}{233}$，故后一个输出为 $54056$。\n\n第二个询问中对应的式子为：$\\dfrac{1}{1620} - \\dfrac{1}{8181} = \\dfrac{1}{2020}$，故后一个输出为 $8181$。\n\n而这两个 $\\alpha$ 式的 $a$ 在所有 $c=N$ 的情况中是最小的。\n- - -\n#### 数据规模与约定\n\n对于 $10\\%$ 的数据，有 $N\\leq 100$，$T\\leq 10$。\n\n对于 $30\\%$ 的数据，有 $N\\leq 10^3$，$T\\leq 100$。\n\n对于 $70\\%$ 的数据，有 $N\\leq 10^5$，$T\\leq 10^4$。\n\n对于 $100\\%$ 的数据，有 $N\\leq 2\\times 10^6$，$T\\leq 10^5$。\n- - -\n#### 关于 Special Judge\n\n**本题采用 Special Judge。**\n\n如果你第一问都答对了而第二问有答错的，那么你将得到 $30\\%$ 的分数，如果你第一问有答错的而第二问都答对了，那么你将得到 $70\\%$ 的分数，但是如果你第一问和第二问都有部分或者全部错误，那么你将被判作 WA；此外，如果你输出残缺或者过多，例如只回答第一问却不输出第二问的答案（$N=1$ 除外）或者 $N=1$ 后多输出了一个数，那么你将同样不会得到分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「dWoi R2」Elevator / 电梯", "background": "zszz，主角总会在学级裁判前乘电梯下去的过程中在内心写小作文。\n\n但万一写不出来怎么办 Zzz ……\n\n于是最原开始想数学题了 ……", "description": "现有正整数 $a,b,c$ 满足 $\\alpha$ 式：$\\dfrac{1}{a}-\\dfrac{1}{b}=\\dfrac{1}{c}$，且 $\\gcd (a,b,c)=1$。\n\n现给定正整数 $N$，请编程求出满足 $c \\leq N$ 的 $\\alpha$ 式的个数以及满足以下条件的一个 $b$：\n\n对所有 $c=N$ 得到的 $\\alpha$ 式中使得 $a$ 最小。", "inputFormat": "第一行一个正整数 $T$，表示询问总数。\n\n接下来 $T$ 行，每行一个正整数，表示给定的 $N$。", "outputFormat": "$T$ 行，每行一个正整数，表示满足条件的 $\\alpha$ 式的个数。若存在解，则空一格后再输出一个满足条件的 $b$。\n\n可以证明，$N>1$ 时一定有这样的 $b$。", "hint": "#### 样例 #2 解释\n\n第一个询问中对应的式子为：$\\dfrac{1}{232} - \\dfrac{1}{54056} = \\dfrac{1}{233}$，故后一个输出为 $54056$。\n\n第二个询问中对应的式子为：$\\dfrac{1}{1620} - \\dfrac{1}{8181} = \\dfrac{1}{2020}$，故后一个输出为 $8181$。\n\n而这两个 $\\alpha$ 式的 $a$ 在所有 $c=N$ 的情况中是最小的。\n- - -\n#### 数据规模与约定\n\n对于 $10\\%$ 的数据，有 $N\\leq 100$，$T\\leq 10$。\n\n对于 $30\\%$ 的数据，有 $N\\leq 10^3$，$T\\leq 100$。\n\n对于 $70\\%$ 的数据，有 $N\\leq 10^5$，$T\\leq 10^4$。\n\n对于 $100\\%$ 的数据，有 $N\\leq 2\\times 10^6$，$T\\leq 10^5$。\n- - -\n#### 关于 Special Judge\n\n**本题采用 Special Judge。**\n\n如果你第一问都答对了而第二问有答错的，那么你将得到 $30\\%$ 的分数，如果你第一问有答错的而第二问都答对了，那么你将得到 $70\\%$ 的分数，但是如果你第一问和第二问都有部分或者全部错误，那么你将被判作 WA；此外，如果你输出残缺或者过多，例如只回答第一问却不输出第二问的答案（$N=1$ 除外）或者 $N=1$ 后多输出了一个数，那么你将同样不会得到分数。", "locale": "zh-CN"}}}
{"pid": "P7848", "type": "P", "difficulty": 6, "samples": [["3\n0 0 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["交互题", "Special Judge"], "title": "「JZOI-2」填问卷", "background": "团员们满脑子都是办周年庆，但小僖只想摸鱼。\n\n于是小僖打开了他心爱的游戏。", "description": "玩了这么久这款游戏了，今天小僖想参加活动，填一下问卷来看看自己对这款游戏的了解程度。\n\n问卷上一共有 $n$ 道判断题，可怜的小僖发现自己一题也不会，他决定问一下他的队友来解决。\n\n他的队友是游戏的一位资深用户，他全部题都会做，所以小僖决定向队友求助。具体的，小僖每次都会以以下格式询问：\n\n`int ask(int m,vector<int> w,vector<bool> ans)`\n\n其中 $m$ 表示这一次询问的题目的总数，$w_i$ 表示询问的第 $i$ 题的题目编号（你需要保证单次询问的 $w_i$ 互不相同，毕竟队友很没有耐心），$ans_i$ 表示小 X 认为的第 $i$ 题的正确答案（$0\\le i<m$）。队友会告诉他这次他有多少题**答对**了。\n\n例如，现在有三道题，如果答案分别是 $\\{0,1,1\\}$，小 $X$ 现在调用 `ask(2,[1,3],[1,1])`，那么返回值为 $1$，因为第一道题答错了，第三道题答对了。\n\n由于题目有点多，小僖需要你写一个程序来帮助他得到所有题的正确答案。\n\n你不需要实现主函数，你现在只需要实现 `vector<bool> work(int n)`，返回值是题目 $1\\sim n$ 的答案，考虑到 `vector<bool>` **下标从 0 开始**，所以你需要将你的答案数组**左移 1 位。**\n\n当然，询问很费劲，所以小僖希望询问次数越少越好，询问次数的评分标准会在提示说明中给出。另外，虽然每一次询问的题目数没有限制，但你还是要注意，如果询问题目数过多，你可能会获得 **TLE**，题目保证每次询问的时间复杂度是 $O(m)$ 的。\n\n为了方便，这里用 $1$ 表示选对，$0$ 表述选错。", "inputFormat": "样例数据属于第一部分，按照以下格式输入：  \n$n\\\\a_{1...n}$  \n其中 $a_i$ 表示第 $i$ 题的正确答案。", "outputFormat": "下面给出`grader.cpp`的错误信息 $\\text{Wrong[x]}$：\n1. 询问中的 $w_i$ 大于 $n$ 或小于 $1$。\n2. 询问中出现了相同的 $w_i$。\n3. 询问中 $m$ 和 $w$ 或 $ans$ 的长度不匹配。\n4. 答案错误或返回数组格式不正确。\n\n之后，`grader.cpp`会返回你的询问次数。", "hint": "### 样例解释\n下面给出一种 $2$ 次的可行的询问方案\n\n`ask(1,[2],0)`，返回值为 $1$，表明第二题的答案是 $0$.  \n`ask(2,[1,3],[0,1])`，返回值为 $2$，~~这也许是因为运气太好，一蒙就对~~，所以可以得出第一题和第三题的答案分别是$0,1$。  \n于是你可以返回 $\\{0,0,1\\}$ 了，这时询问次数为 $2$。\n\n当然，如果第二次询问结果是 $1$，那么你就不能直接得出答案了，所以，蒙题有风险。\n### 数据范围\n对于所有数据，保证 $n\\le2^{17}$。\n\n问卷的出题人为了保证用户们答题的质量，为了防止用户做判断题一蒙全对，他会精心构造每一道题的答案。\n\n当然，这里保证答案在问卷出好后就已经存在，不会根据你的询问来构造。\n\n对于每组数据假设你询问了 $Q$ 次，下面给出评分标准。\n| $Q$ 的取值范围 | 得分 |\n| :----------: | :----------: |\n| $(2^{17},+\\infty)$ | $0$ |\n| $2^{17}$ | $10$ |\n| $(64000,2^{17})$ | $\\min(90,\\lfloor\\frac{2^{17}-Q}{2^{16}}\\times100\\rfloor)$ |\n| $(63000,64000]$ | $95$ |\n| $[0,63000]$ | $100$ |\n\n\n注意，本题有多组测试点，得分取所有数据中测出的得分最少的那组数据。\n\n实现细节：请务必加上 `extern \"C\"`，你可以选择补全 `problem.cpp` 中的函数中的内容，当然也可以自己实现。编译的时候直接编译和运行 `grader.cpp` 即可。\n\n温馨提示：如果你的乱搞做法打得太劣，虽然你的询问次数小于 $2^{17}$，但你的得分可能小于 $10$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「JZOI-2」填问卷", "background": "团员们满脑子都是办周年庆，但小僖只想摸鱼。\n\n于是小僖打开了他心爱的游戏。", "description": "玩了这么久这款游戏了，今天小僖想参加活动，填一下问卷来看看自己对这款游戏的了解程度。\n\n问卷上一共有 $n$ 道判断题，可怜的小僖发现自己一题也不会，他决定问一下他的队友来解决。\n\n他的队友是游戏的一位资深用户，他全部题都会做，所以小僖决定向队友求助。具体的，小僖每次都会以以下格式询问：\n\n`int ask(int m,vector<int> w,vector<bool> ans)`\n\n其中 $m$ 表示这一次询问的题目的总数，$w_i$ 表示询问的第 $i$ 题的题目编号（你需要保证单次询问的 $w_i$ 互不相同，毕竟队友很没有耐心），$ans_i$ 表示小 X 认为的第 $i$ 题的正确答案（$0\\le i<m$）。队友会告诉他这次他有多少题**答对**了。\n\n例如，现在有三道题，如果答案分别是 $\\{0,1,1\\}$，小 $X$ 现在调用 `ask(2,[1,3],[1,1])`，那么返回值为 $1$，因为第一道题答错了，第三道题答对了。\n\n由于题目有点多，小僖需要你写一个程序来帮助他得到所有题的正确答案。\n\n你不需要实现主函数，你现在只需要实现 `vector<bool> work(int n)`，返回值是题目 $1\\sim n$ 的答案，考虑到 `vector<bool>` **下标从 0 开始**，所以你需要将你的答案数组**左移 1 位。**\n\n当然，询问很费劲，所以小僖希望询问次数越少越好，询问次数的评分标准会在提示说明中给出。另外，虽然每一次询问的题目数没有限制，但你还是要注意，如果询问题目数过多，你可能会获得 **TLE**，题目保证每次询问的时间复杂度是 $O(m)$ 的。\n\n为了方便，这里用 $1$ 表示选对，$0$ 表述选错。", "inputFormat": "样例数据属于第一部分，按照以下格式输入：  \n$n\\\\a_{1...n}$  \n其中 $a_i$ 表示第 $i$ 题的正确答案。", "outputFormat": "下面给出`grader.cpp`的错误信息 $\\text{Wrong[x]}$：\n1. 询问中的 $w_i$ 大于 $n$ 或小于 $1$。\n2. 询问中出现了相同的 $w_i$。\n3. 询问中 $m$ 和 $w$ 或 $ans$ 的长度不匹配。\n4. 答案错误或返回数组格式不正确。\n\n之后，`grader.cpp`会返回你的询问次数。", "hint": "### 样例解释\n下面给出一种 $2$ 次的可行的询问方案\n\n`ask(1,[2],0)`，返回值为 $1$，表明第二题的答案是 $0$.  \n`ask(2,[1,3],[0,1])`，返回值为 $2$，~~这也许是因为运气太好，一蒙就对~~，所以可以得出第一题和第三题的答案分别是$0,1$。  \n于是你可以返回 $\\{0,0,1\\}$ 了，这时询问次数为 $2$。\n\n当然，如果第二次询问结果是 $1$，那么你就不能直接得出答案了，所以，蒙题有风险。\n### 数据范围\n对于所有数据，保证 $n\\le2^{17}$。\n\n问卷的出题人为了保证用户们答题的质量，为了防止用户做判断题一蒙全对，他会精心构造每一道题的答案。\n\n当然，这里保证答案在问卷出好后就已经存在，不会根据你的询问来构造。\n\n对于每组数据假设你询问了 $Q$ 次，下面给出评分标准。\n| $Q$ 的取值范围 | 得分 |\n| :----------: | :----------: |\n| $(2^{17},+\\infty)$ | $0$ |\n| $2^{17}$ | $10$ |\n| $(64000,2^{17})$ | $\\min(90,\\lfloor\\frac{2^{17}-Q}{2^{16}}\\times100\\rfloor)$ |\n| $(63000,64000]$ | $95$ |\n| $[0,63000]$ | $100$ |\n\n\n注意，本题有多组测试点，得分取所有数据中测出的得分最少的那组数据。\n\n实现细节：请务必加上 `extern \"C\"`，你可以选择补全 `problem.cpp` 中的函数中的内容，当然也可以自己实现。编译的时候直接编译和运行 `grader.cpp` 即可。\n\n温馨提示：如果你的乱搞做法打得太劣，虽然你的询问次数小于 $2^{17}$，但你的得分可能小于 $10$ 分。", "locale": "zh-CN"}}}
{"pid": "P7849", "type": "P", "difficulty": 3, "samples": [["3 6\n1\n2\n3", "? 1\n? 2\n? 3\n! 1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["交互题", "Special Judge"], "title": "「JZOI-2」猜数列", "background": "团员们满脑子都是办周年庆，但小僖只想摸鱼。\n\n于是小僖拿出了最喜欢的数列来考考你。", "description": "小僖有一个乱序的等差数列 $A$。\n\n你可以发出两种询问：\n\n1. 询问原序列下标为 $x,y$ 的数在等差数列（非模意义下）中的大小关系。\n1. 询问原序列下标为 $x$ 的数在等差数列（模意义下）中的值。\n\n但由于交互库出了点问题，你的询问 $2$ 最多能询问 $q$ 次。\n\n给定等差数列的长度 $n$ 和询问次数 $q$，和固定的模数 $p=10^{9}+7$，求这个等差数列的公差 $d$。\n\n**总询问次数不得超过 $2n$ 次。交互完成后请立刻输出答案。**\n\n**交互方式：**\n\n输入数列的长度 $n$ 和询问次数 $q$ 以开始交互。\n\n交互过程中，您可以进行题目描述中的两种询问。\n\n对于第一种询问，交互库将会返回 $1$ 代表 $>$ 或 $0$ 代表 $<$ 。询问格式为 `> x y`。\n\n对于第二种询问，交互库将会返回一个正整数 $A_i$。询问格式为 `? x`。\n\n在您确定答案后，请以 `! d` 的形式输出一行，停止交互。\n\n在您输出一行后，请清空缓冲区：\n\n在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n\n在 Pascal 中，使用 `flush(output)`。\n\n在 Python 中，使用 `stdout.flush()`。\n\n其它语言请自行查阅文档。\n\n**请遵循题目完成交互，发出不合法询问可能会出现 TLE，WA 等问题。**", "inputFormat": "见交互方式。", "outputFormat": "见交互方式。\n\n数据保证不会有多种可能的 $d$。", "hint": "对于 $50\\%$ 的数据保证 $q=2n$。\n\n另 $50\\%$ 的数据保证 $q=2$。\n\n对于 $100\\%$ 的数据保证 $2\\leq n\\leq 100000$，$0\\leq A_i< p$，$1\\le d < p$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「JZOI-2」猜数列", "background": "团员们满脑子都是办周年庆，但小僖只想摸鱼。\n\n于是小僖拿出了最喜欢的数列来考考你。", "description": "小僖有一个乱序的等差数列 $A$。\n\n你可以发出两种询问：\n\n1. 询问原序列下标为 $x,y$ 的数在等差数列（非模意义下）中的大小关系。\n1. 询问原序列下标为 $x$ 的数在等差数列（模意义下）中的值。\n\n但由于交互库出了点问题，你的询问 $2$ 最多能询问 $q$ 次。\n\n给定等差数列的长度 $n$ 和询问次数 $q$，和固定的模数 $p=10^{9}+7$，求这个等差数列的公差 $d$。\n\n**总询问次数不得超过 $2n$ 次。交互完成后请立刻输出答案。**\n\n**交互方式：**\n\n输入数列的长度 $n$ 和询问次数 $q$ 以开始交互。\n\n交互过程中，您可以进行题目描述中的两种询问。\n\n对于第一种询问，交互库将会返回 $1$ 代表 $>$ 或 $0$ 代表 $<$ 。询问格式为 `> x y`。\n\n对于第二种询问，交互库将会返回一个正整数 $A_i$。询问格式为 `? x`。\n\n在您确定答案后，请以 `! d` 的形式输出一行，停止交互。\n\n在您输出一行后，请清空缓冲区：\n\n在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n\n在 Pascal 中，使用 `flush(output)`。\n\n在 Python 中，使用 `stdout.flush()`。\n\n其它语言请自行查阅文档。\n\n**请遵循题目完成交互，发出不合法询问可能会出现 TLE，WA 等问题。**", "inputFormat": "见交互方式。", "outputFormat": "见交互方式。\n\n数据保证不会有多种可能的 $d$。", "hint": "对于 $50\\%$ 的数据保证 $q=2n$。\n\n另 $50\\%$ 的数据保证 $q=2$。\n\n对于 $100\\%$ 的数据保证 $2\\leq n\\leq 100000$，$0\\leq A_i< p$，$1\\le d < p$", "locale": "zh-CN"}}}
{"pid": "P7850", "type": "P", "difficulty": 0, "samples": [["3\n4 2\n4 3\n5 1\n", "94\n228\n200"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "「JZOI-2」干大事", "background": "团员们满脑子都是办周年庆，但小僖只想摸鱼。\n\n于是小僖决定干一件大事（去摸一条大鱼）。", "description": "小僖由于经常摸鱼，在摸鱼众中享有很高的人气。而今天小僖决定去鱼世界里最颓的树上直播。\n\n这颗树非常颓，没有根，上面有 $n$ 个结点，每个结点从 $1,2,\\dots,n$ 进行标号，还有 $n - 1$ 条边将它们连通。它会变换形态，边会移动、消失或生长。记 $k$ 为树中满足 $|u-v|=1$ 的边 $(u,v)$ 的数量，则该形态的价值为 $k \\times c^k$ 。\n\n小僖想要向咸鱼们介绍树的价值，他只想着摸鱼。所以他找到了你，要求你求出树所有不同形态的权值和，并将其对 $998244353$ 取模后输出。\n\n**多组数据**。", "inputFormat": "第一行，一个正整数 $T$，表示数据组数。  \n以下 $T$ 行，每行一个正整数 $n$ 和一个非负整数 $c$，表示一组数据。", "outputFormat": "$T$ 行，第 $i$ 行一个非负整数，表示第 $i$ 组数据的答案。", "hint": "对于 $10\\%$ 的数据，$T = 1$，$n \\le 10$；  \n对于 $30\\%$ 的数据，$T \\le 10$，$n \\le 300$；  \n对于 $70\\%$ 的数据，$T \\le 10$，$n \\le 10^6$；  \n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$1 \\le n \\le 10^{18}$，$1 \\le c < 998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「JZOI-2」干大事", "background": "团员们满脑子都是办周年庆，但小僖只想摸鱼。\n\n于是小僖决定干一件大事（去摸一条大鱼）。", "description": "小僖由于经常摸鱼，在摸鱼众中享有很高的人气。而今天小僖决定去鱼世界里最颓的树上直播。\n\n这颗树非常颓，没有根，上面有 $n$ 个结点，每个结点从 $1,2,\\dots,n$ 进行标号，还有 $n - 1$ 条边将它们连通。它会变换形态，边会移动、消失或生长。记 $k$ 为树中满足 $|u-v|=1$ 的边 $(u,v)$ 的数量，则该形态的价值为 $k \\times c^k$ 。\n\n小僖想要向咸鱼们介绍树的价值，他只想着摸鱼。所以他找到了你，要求你求出树所有不同形态的权值和，并将其对 $998244353$ 取模后输出。\n\n**多组数据**。", "inputFormat": "第一行，一个正整数 $T$，表示数据组数。  \n以下 $T$ 行，每行一个正整数 $n$ 和一个非负整数 $c$，表示一组数据。", "outputFormat": "$T$ 行，第 $i$ 行一个非负整数，表示第 $i$ 组数据的答案。", "hint": "对于 $10\\%$ 的数据，$T = 1$，$n \\le 10$；  \n对于 $30\\%$ 的数据，$T \\le 10$，$n \\le 300$；  \n对于 $70\\%$ 的数据，$T \\le 10$，$n \\le 10^6$；  \n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$1 \\le n \\le 10^{18}$，$1 \\le c < 998244353$。", "locale": "zh-CN"}}}
{"pid": "P7851", "type": "P", "difficulty": 6, "samples": [["1 1", "1"], ["5 2", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": [], "title": "「JZOI-2」信号塔", "background": "团员们满脑子都是办周年庆，但小僖只想摸鱼。\n\n小僖想看电视，但是发现没信号了，于是他去修理信号塔了。", "description": "在一条有 $10^{999}+1$ 个点的直线上，满足直线上相邻两点间的距离相等，每个点上建立都建立了一个信号塔，从左到右编号为 $0\\sim 10^{999}$，其中 $0$ 号塔是电视节目发送点。\n\n由于小僖只想看电视，所以这里的信号只会从左往右传输。假设一个信号塔的强度为 $x$，那么它的信号最多能往右传输 $\\lfloor\\frac{x-1}{k}\\rfloor$ 的距离。\n\n现在小僖要给每个信号塔设置一个强度，但由于信号塔太多了，他忙不过来，于是他交给了笨笨机器人来做。\n\n笨笨机器人按照以下方式给每个信号塔设置一个强度。\n\n首先先将 $0$ 号塔的强度设为 $10^{30}$，然后从左到右，从 $1$ 号信号塔开始一直做到 $10^{999}$ 号信号塔。对于每个信号塔，在其左边寻找离它最近的一个信号塔 $a$，满足 $a$ 信号塔的信号可以传送到该信号塔，然后将该信号塔的信号强度赋值为这两个信号塔之间的距离。\n\n这里定义 $i$ 号信号塔和 $j$ 号信号塔之间的距离为 $|i-j|$。\n\n例如当 $k=2$ 的时候 $1\\sim5$ 号的信号塔的强度分别为 $1,2,3,1,5$。\n\n但小僖还是不放心笨笨机器人，所以他想知道第 $n$ 个信号塔的强度。", "inputFormat": "一行，两个正整数 $n,k$。\n\n具体意义见题面。", "outputFormat": "一行，一个整数，表示编号为 $n$ 信号塔的强度。", "hint": "对于 $10\\%$ 的数据，$1\\le n,k\\le 2 \\times 10^3$。  \n对于 $30\\%$ 的数据，$1\\le n\\le 1 \\times 10^7$。  \n对于另外 $15\\%$ 的数据，$k=1$。  \n对于另外 $15\\%$ 的数据，$k=2$。  \n对于 $100\\%$ 的数据 $1\\leq n\\leq10^{18},1\\leq k\\leq10^{6}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「JZOI-2」信号塔", "background": "团员们满脑子都是办周年庆，但小僖只想摸鱼。\n\n小僖想看电视，但是发现没信号了，于是他去修理信号塔了。", "description": "在一条有 $10^{999}+1$ 个点的直线上，满足直线上相邻两点间的距离相等，每个点上建立都建立了一个信号塔，从左到右编号为 $0\\sim 10^{999}$，其中 $0$ 号塔是电视节目发送点。\n\n由于小僖只想看电视，所以这里的信号只会从左往右传输。假设一个信号塔的强度为 $x$，那么它的信号最多能往右传输 $\\lfloor\\frac{x-1}{k}\\rfloor$ 的距离。\n\n现在小僖要给每个信号塔设置一个强度，但由于信号塔太多了，他忙不过来，于是他交给了笨笨机器人来做。\n\n笨笨机器人按照以下方式给每个信号塔设置一个强度。\n\n首先先将 $0$ 号塔的强度设为 $10^{30}$，然后从左到右，从 $1$ 号信号塔开始一直做到 $10^{999}$ 号信号塔。对于每个信号塔，在其左边寻找离它最近的一个信号塔 $a$，满足 $a$ 信号塔的信号可以传送到该信号塔，然后将该信号塔的信号强度赋值为这两个信号塔之间的距离。\n\n这里定义 $i$ 号信号塔和 $j$ 号信号塔之间的距离为 $|i-j|$。\n\n例如当 $k=2$ 的时候 $1\\sim5$ 号的信号塔的强度分别为 $1,2,3,1,5$。\n\n但小僖还是不放心笨笨机器人，所以他想知道第 $n$ 个信号塔的强度。", "inputFormat": "一行，两个正整数 $n,k$。\n\n具体意义见题面。", "outputFormat": "一行，一个整数，表示编号为 $n$ 信号塔的强度。", "hint": "对于 $10\\%$ 的数据，$1\\le n,k\\le 2 \\times 10^3$。  \n对于 $30\\%$ 的数据，$1\\le n\\le 1 \\times 10^7$。  \n对于另外 $15\\%$ 的数据，$k=1$。  \n对于另外 $15\\%$ 的数据，$k=2$。  \n对于 $100\\%$ 的数据 $1\\leq n\\leq10^{18},1\\leq k\\leq10^{6}$。", "locale": "zh-CN"}}}
{"pid": "P7852", "type": "P", "difficulty": 2, "samples": [["2\n4 2\n3 3\n", "4 3 1 2\n1 2 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "构造"], "title": "「EZEC-9」Yet Another Easy Problem", "background": "", "description": "给定 $n,m$，你需要输出一个长度为 $n$ 的排列，满足该排列进行不超过 $m$ 次操作可以得到的最小的字典序最大。\n\n定义一次操作为交换排列中的两个数。\n\n若有多个符合要求的排列，输出任意一个均可。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据，一行 $2$ 个整数 $n,m$。", "outputFormat": "对于每组数据：\n\n一行 $n$ 个正整数，表示你构造的排列。", "hint": "【样例 $1$ 说明】\n\n使得字典序最小的操作方案为:\n\n$4\\ 3\\ 1\\ 2\\to1\\ 3\\ 4\\ 2\\to1\\ 2\\ 4\\ 3$。\n\n可以证明无法得到更小的字典序，以及其他初始排列无法得到更大的最小字典序。\n\n【样例 $2$ 说明】\n\n显然可以通过操作得到任何排列，输出任意长度为 $3$ 的排列均可。\n\n【数据规模与约定】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（10 points）：$m=0$。\n- Subtask 2（10 points）：$m\\ge n-1$。\n- Subtask 3（25 points）：$m=1$。\n- Subtask 4（25 points）：$T\\le100$，$n\\le6$。\n- Subtask 5（30 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le n\\le10^5$，$0\\le m\\le n$，$\\sum n\\le10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-9」Yet Another Easy Problem", "background": "", "description": "给定 $n,m$，你需要输出一个长度为 $n$ 的排列，满足该排列进行不超过 $m$ 次操作可以得到的最小的字典序最大。\n\n定义一次操作为交换排列中的两个数。\n\n若有多个符合要求的排列，输出任意一个均可。", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据，一行 $2$ 个整数 $n,m$。", "outputFormat": "对于每组数据：\n\n一行 $n$ 个正整数，表示你构造的排列。", "hint": "【样例 $1$ 说明】\n\n使得字典序最小的操作方案为:\n\n$4\\ 3\\ 1\\ 2\\to1\\ 3\\ 4\\ 2\\to1\\ 2\\ 4\\ 3$。\n\n可以证明无法得到更小的字典序，以及其他初始排列无法得到更大的最小字典序。\n\n【样例 $2$ 说明】\n\n显然可以通过操作得到任何排列，输出任意长度为 $3$ 的排列均可。\n\n【数据规模与约定】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（10 points）：$m=0$。\n- Subtask 2（10 points）：$m\\ge n-1$。\n- Subtask 3（25 points）：$m=1$。\n- Subtask 4（25 points）：$T\\le100$，$n\\le6$。\n- Subtask 5（30 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le n\\le10^5$，$0\\le m\\le n$，$\\sum n\\le10^5$。", "locale": "zh-CN"}}}
{"pid": "P7853", "type": "P", "difficulty": 4, "samples": [["5 6\n10110\n1 0 2 2 2 2\n", "14\n6\n"], ["10 10\n0101010110\n0 1 2 3 4 5 5 4 3 2\n", "21\n9\n"], ["10 3\n1111101111\n5 5 0\n", "13\n11\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "Special Judge", "枚举", "洛谷月赛"], "title": "「EZEC-9」进位", "background": "规定 $\\text{popcount}(x)$ 表示 $x$ 在二进制表示下所含 $1$ 的个数。", "description": "您有一个二进制数 $B$（以一个长为 $n$ 的 $01$ 字符串形式给出）和长为 $m$ 的序列 $a$。\n\n同时，您还需要对 $B$ 进行 $m$ 次操作。\n\n其中，第 $i$ 个操作为 $B \\gets B + 2^{a_i}$，其价值 $v_i$ 为 $B$ 在操作前后变化的位置数量，即 $v_i = \\operatorname{popcount}(B \\mathbin{\\mathrm{xor}} (B + 2^{a_i}))$。\n\n您需要解决两个问题：\n\n- 您可以**任意**安排操作顺序，问在执行**所有**操作后，$\\displaystyle \\sum_{i=1}^mv_i$ 最大为多少？\n\n- 您可以**任意**安排操作顺序，问在执行**所有**操作后，$\\displaystyle \\max_{i=1}^mv_i$ 最大为多少？", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行一个长为 $n$ 的 $01$ 字符串，表示二进制数 $B$，**从低位到高位依次给出**。\n\n第三行 $m$ 个整数 $a_1,a_2,\\dots,a_m$。", "outputFormat": "第一行一个整数，表示第一问的答案。\n\n第二行一个整数，表示第二问的答案。\n\n**本题使用 Special Judge，若您的第一问答案正确，可以获得该测试点 $30\\%$ 的分数，若您的第二问答案正确，可以获得该测试点另外 $70\\%$ 的分数。**\n\n**若您只回答了两问中的一问，请在另一个位置输出一个非负整数。**", "hint": "**【样例解释 #1】**\n\n对于第一问，依次执行第 $1,2,6,5,4,3$ 个操作可得到 $\\displaystyle \\sum\\limits_{i=1}^mv_i=14$。\n\n对于第二问，依次执行第 $6,5,4,3,1,2$ 个操作可得到 $\\displaystyle \\max\\limits_{i=1}^mv_i=6$。\n\n[详细过程](https://www.luogu.com.cn/paste/ycx4xov7)\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$n,m\\leq 10$。\n- Subtask 2（30 points）：$n,m\\leq 1000$。\n- Subtask 3（20 points）：$B$ 中全为 $0$，且 $a_1=0$，$\\forall i>1, a_{i-1}\\leq a_i\\leq a_{i-1}+1$。\n- Subtask 4（20 points）：$n,m\\leq 10^5$。\n- Subtask 5（10 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^6$，$0\\leq a_i< n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-9」进位", "background": "规定 $\\text{popcount}(x)$ 表示 $x$ 在二进制表示下所含 $1$ 的个数。", "description": "您有一个二进制数 $B$（以一个长为 $n$ 的 $01$ 字符串形式给出）和长为 $m$ 的序列 $a$。\n\n同时，您还需要对 $B$ 进行 $m$ 次操作。\n\n其中，第 $i$ 个操作为 $B \\gets B + 2^{a_i}$，其价值 $v_i$ 为 $B$ 在操作前后变化的位置数量，即 $v_i = \\operatorname{popcount}(B \\mathbin{\\mathrm{xor}} (B + 2^{a_i}))$。\n\n您需要解决两个问题：\n\n- 您可以**任意**安排操作顺序，问在执行**所有**操作后，$\\displaystyle \\sum_{i=1}^mv_i$ 最大为多少？\n\n- 您可以**任意**安排操作顺序，问在执行**所有**操作后，$\\displaystyle \\max_{i=1}^mv_i$ 最大为多少？", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行一个长为 $n$ 的 $01$ 字符串，表示二进制数 $B$，**从低位到高位依次给出**。\n\n第三行 $m$ 个整数 $a_1,a_2,\\dots,a_m$。", "outputFormat": "第一行一个整数，表示第一问的答案。\n\n第二行一个整数，表示第二问的答案。\n\n**本题使用 Special Judge，若您的第一问答案正确，可以获得该测试点 $30\\%$ 的分数，若您的第二问答案正确，可以获得该测试点另外 $70\\%$ 的分数。**\n\n**若您只回答了两问中的一问，请在另一个位置输出一个非负整数。**", "hint": "**【样例解释 #1】**\n\n对于第一问，依次执行第 $1,2,6,5,4,3$ 个操作可得到 $\\displaystyle \\sum\\limits_{i=1}^mv_i=14$。\n\n对于第二问，依次执行第 $6,5,4,3,1,2$ 个操作可得到 $\\displaystyle \\max\\limits_{i=1}^mv_i=6$。\n\n[详细过程](https://www.luogu.com.cn/paste/ycx4xov7)\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$n,m\\leq 10$。\n- Subtask 2（30 points）：$n,m\\leq 1000$。\n- Subtask 3（20 points）：$B$ 中全为 $0$，且 $a_1=0$，$\\forall i>1, a_{i-1}\\leq a_i\\leq a_{i-1}+1$。\n- Subtask 4（20 points）：$n,m\\leq 10^5$。\n- Subtask 5（10 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^6$，$0\\leq a_i< n$。", "locale": "zh-CN"}}}
{"pid": "P7854", "type": "P", "difficulty": 5, "samples": [["5\n1 2 3 4 5\n", "0 1 1 2 1\n"], ["5\n1 2 3 4 6\n", "-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "素数判断,质数,筛法", "构造"], "title": "「EZEC-9」GCD Tree", "background": "规定 $\\gcd(x,y)$ 表示 $x,y$ 的最大公约数，$\\operatorname{lca}(x,y)$ 表示 $x$ 号节点和 $y$ 号节点的最近公共祖先。", "description": "给你 $n$ 个点，编号分别为 $1,2,\\ldots,n$，点权分别为 $a_1,a_2,\\ldots,a_n$。\n\n请你用这 $n$ 个点构造一棵树，使得 $\\forall 1 \\le i < j \\le n$，$\\gcd(a_i, a_j) = a_{\\operatorname{lca}(i, j)}$。\n\n若无解，报告之，否则输出树的形态。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $a_1, a_2, \\ldots , a_n$。", "outputFormat": "若无解，输出 `-1`;\n\n否则输出一行 $n$ 个整数，第 $i$ 个数表示 $i$ 号节点的父节点编号。特别地，若 $i$ 号节点为根节点则输出 `0`。\n\n若有多解，输出任意一解即可。", "hint": "**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$n = 2$。\n-  Subtask 2（5 points）：所有 $a_i$ 均相等。\n-  Subtask 3（5 points）：$n \\le 5$。\n-  Subtask 4（10 points）：保证有解。\n-  Subtask 5（15 points）：$n \\le 100$。\n-  Subtask 6（15 points）：$n \\le 10^3$。\n-  Subtask 7（15 points）：$n \\le 3 \\times 10^3$。\n-  Subtask 8（30 points）：无特殊限制。\n\n对于 $100 \\%$ 的数据，$2 \\le n \\le 10^5$，$1 \\le a_i \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-9」GCD Tree", "background": "规定 $\\gcd(x,y)$ 表示 $x,y$ 的最大公约数，$\\operatorname{lca}(x,y)$ 表示 $x$ 号节点和 $y$ 号节点的最近公共祖先。", "description": "给你 $n$ 个点，编号分别为 $1,2,\\ldots,n$，点权分别为 $a_1,a_2,\\ldots,a_n$。\n\n请你用这 $n$ 个点构造一棵树，使得 $\\forall 1 \\le i < j \\le n$，$\\gcd(a_i, a_j) = a_{\\operatorname{lca}(i, j)}$。\n\n若无解，报告之，否则输出树的形态。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $a_1, a_2, \\ldots , a_n$。", "outputFormat": "若无解，输出 `-1`;\n\n否则输出一行 $n$ 个整数，第 $i$ 个数表示 $i$ 号节点的父节点编号。特别地，若 $i$ 号节点为根节点则输出 `0`。\n\n若有多解，输出任意一解即可。", "hint": "**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$n = 2$。\n-  Subtask 2（5 points）：所有 $a_i$ 均相等。\n-  Subtask 3（5 points）：$n \\le 5$。\n-  Subtask 4（10 points）：保证有解。\n-  Subtask 5（15 points）：$n \\le 100$。\n-  Subtask 6（15 points）：$n \\le 10^3$。\n-  Subtask 7（15 points）：$n \\le 3 \\times 10^3$。\n-  Subtask 8（30 points）：无特殊限制。\n\n对于 $100 \\%$ 的数据，$2 \\le n \\le 10^5$，$1 \\le a_i \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P7855", "type": "P", "difficulty": 6, "samples": [["8 3\n1 3 3 2 4 3 4 1", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "O2优化"], "title": "「EZEC-9」暂颓恒卷", "background": "一些人坐成一横排，学习知识。其中有的人卷，有的人颓。", "description": "### 人的行为与定义\n\n一个人要么处于卷态，要么处于颓态。不卷则颓，不颓则卷。\n\n这题中我们认为一共有四种人：\n\n1. 恒卷人。恒卷人无论何时都为卷态。\n\n2. 恒颓人。恒颓人无论何时都为颓态。\n\n3. 暂卷人。若在某一秒暂卷人处于卷态而左右两人都处于颓态，则其下一秒状态更新为颓态。若在某一秒暂卷人处于颓态而左右有一人处于卷态，则其下一秒状态更新为卷态。__简而言之：有卷则卷。__\n\n4. 暂颓人。若在某一秒暂颓人处于颓态而左右两人都处于卷态，则其下一秒状态更新为卷态。若在某一秒暂颓人处于卷态而左右有一人处于颓态，则其下一秒状态更新为颓态。__简而言之：有颓则颓。__\n\n我们称处于卷态的暂卷人为卷态暂卷人，处于颓态的暂卷人为颓态暂卷人，处于卷态的暂颓人为卷态暂颓人，处于颓态的暂颓人为颓态暂颓人。\n\n我们称恒卷人与恒颓人为恒人，暂卷人与暂颓人为暂人。\n\n### 定义后的题目描述\n\n有 $n$ 个人坐成一横排。最左边为第 $1$ 个人，最右边为第 $n$ 个人。\n\n初始时给定第 $i$ 个人为第 $a_i$ 种人。保证 $a_i\\in \\{1,2,3,4\\}$，$a_1,a_n\\in\\{1,2\\}$（这四个编号如上文所示），即第 $1$ 个人和第 $n$ 个人都为恒人。__保证没有两个同类型恒人之间不存在其他恒人，也就是说只看恒人，恒卷人和恒颓人交替出现。__\n\n这排人每人有一种状态，形成一个状态组。一个状态组是稳定的，当且仅当下一秒没有人状态更新。一个状态组的卷数是处于卷态的人数（恒卷人，卷态暂颓人，卷态暂卷人处于卷态）。\n\n这排人的最佳状态组为一个 __稳定__ 的状态组，且卷数是所有稳定的状态组中的最大值（也就是说你可以任意钦定初始状态）。这排人的优秀程度被定义为最佳状态组的卷数。\n\n老师认为他们~~太逊了~~不够优秀。由于恒卷人不必交换，恒颓人无可救药，老师让你交换小于等于 $k$ 对暂人。问交换后优秀程度的最大值。", "inputFormat": "第一行两个数 $n$ 与 $k$ 。\n\n第二行 $n$ 个数，其中第 $i$ 个数表示第 $i$ 个人为第 $a_i$ 种人。", "outputFormat": "输出一行一个数，为交换小于等于 $k$ 对暂人后优秀程度的最大值。", "hint": "\n【样例 $1$ 说明】\n\n交换第 $5$ 个人与第 $6$ 个人，此时优秀程度为 $7$（第 $1,2,3,5,6,7,8$ 个人处于卷态）。\n\n【数据规模与约定】\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（30 points）：$1\\leq k\\leq2$，$n=9$。\n-  Subtask 2（20 points）：只有第 $1$ 个人和第 $n$ 个人是恒人， $k>0$。\n-  Subtask 3（10 points）：$k = 0$。\n-  Subtask 4（40 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$a_i\\in \\{1,2,3,4\\}$，$a_1,a_n\\in\\{1,2\\}$，$4 \\le n \\leq 2\\times10^6$，$0\\le k \\le 2\\times 10^6$。\n\n\n\n### 提示\n\nSubtask 4 的数据经过了多次加强，一共有 $62$ 个测试点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-9」暂颓恒卷", "background": "一些人坐成一横排，学习知识。其中有的人卷，有的人颓。", "description": "### 人的行为与定义\n\n一个人要么处于卷态，要么处于颓态。不卷则颓，不颓则卷。\n\n这题中我们认为一共有四种人：\n\n1. 恒卷人。恒卷人无论何时都为卷态。\n\n2. 恒颓人。恒颓人无论何时都为颓态。\n\n3. 暂卷人。若在某一秒暂卷人处于卷态而左右两人都处于颓态，则其下一秒状态更新为颓态。若在某一秒暂卷人处于颓态而左右有一人处于卷态，则其下一秒状态更新为卷态。__简而言之：有卷则卷。__\n\n4. 暂颓人。若在某一秒暂颓人处于颓态而左右两人都处于卷态，则其下一秒状态更新为卷态。若在某一秒暂颓人处于卷态而左右有一人处于颓态，则其下一秒状态更新为颓态。__简而言之：有颓则颓。__\n\n我们称处于卷态的暂卷人为卷态暂卷人，处于颓态的暂卷人为颓态暂卷人，处于卷态的暂颓人为卷态暂颓人，处于颓态的暂颓人为颓态暂颓人。\n\n我们称恒卷人与恒颓人为恒人，暂卷人与暂颓人为暂人。\n\n### 定义后的题目描述\n\n有 $n$ 个人坐成一横排。最左边为第 $1$ 个人，最右边为第 $n$ 个人。\n\n初始时给定第 $i$ 个人为第 $a_i$ 种人。保证 $a_i\\in \\{1,2,3,4\\}$，$a_1,a_n\\in\\{1,2\\}$（这四个编号如上文所示），即第 $1$ 个人和第 $n$ 个人都为恒人。__保证没有两个同类型恒人之间不存在其他恒人，也就是说只看恒人，恒卷人和恒颓人交替出现。__\n\n这排人每人有一种状态，形成一个状态组。一个状态组是稳定的，当且仅当下一秒没有人状态更新。一个状态组的卷数是处于卷态的人数（恒卷人，卷态暂颓人，卷态暂卷人处于卷态）。\n\n这排人的最佳状态组为一个 __稳定__ 的状态组，且卷数是所有稳定的状态组中的最大值（也就是说你可以任意钦定初始状态）。这排人的优秀程度被定义为最佳状态组的卷数。\n\n老师认为他们~~太逊了~~不够优秀。由于恒卷人不必交换，恒颓人无可救药，老师让你交换小于等于 $k$ 对暂人。问交换后优秀程度的最大值。", "inputFormat": "第一行两个数 $n$ 与 $k$ 。\n\n第二行 $n$ 个数，其中第 $i$ 个数表示第 $i$ 个人为第 $a_i$ 种人。", "outputFormat": "输出一行一个数，为交换小于等于 $k$ 对暂人后优秀程度的最大值。", "hint": "\n【样例 $1$ 说明】\n\n交换第 $5$ 个人与第 $6$ 个人，此时优秀程度为 $7$（第 $1,2,3,5,6,7,8$ 个人处于卷态）。\n\n【数据规模与约定】\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（30 points）：$1\\leq k\\leq2$，$n=9$。\n-  Subtask 2（20 points）：只有第 $1$ 个人和第 $n$ 个人是恒人， $k>0$。\n-  Subtask 3（10 points）：$k = 0$。\n-  Subtask 4（40 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$a_i\\in \\{1,2,3,4\\}$，$a_1,a_n\\in\\{1,2\\}$，$4 \\le n \\leq 2\\times10^6$，$0\\le k \\le 2\\times 10^6$。\n\n\n\n### 提示\n\nSubtask 4 的数据经过了多次加强，一共有 $62$ 个测试点。", "locale": "zh-CN"}}}
{"pid": "P7856", "type": "P", "difficulty": 7, "samples": [["6 2\n1 1 1 3 3 3\n2\n10\n", "3\n13\n"]], "limits": {"time": [1000, 1000, 1000, 2000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「EZEC-9」模糊众数", "background": "", "description": "给你一个长为 $n$ 的序列 $a$。\n\n你可以将序列中的某个数增加 $1$，称为一次操作。\n\n你需要处理 $q$ 次询问。\n\n对于每次询问，求出 $a$ 在至少多少次操作后，可以形成一个序列 $a'$，使得 $x$ 为 $a'$ 的众数。\n\n**注意：一个序列可能有多个众数。**", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$。\n\n后 $q$ 行每行一个整数 $x$。", "outputFormat": "对于每次询问，若无解输出 `-1`，否则输出最少的操作次数。\n\n每个答案之间用换行隔开。", "hint": "**【样例 1 解释】**\n\n- $x=2$ 时，一种可行的方案为 $a'=[1,2,2,3,3,4]$。\n- $x=10$ 时，一种可行的方案为 $a'=[1,2,3,4,5,10]$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$n=3$。\n-  Subtask 2（5 points）：所有 $a_i$ 均相等，**时间限制为 2000 ms**。\n-  Subtask 3（5 points）：$n\\le 10$，$q\\le 10^3$。\n-  Subtask 4（15 points）：$n\\le 100$，$q\\le 10^4$。\n-  Subtask 5（15 points）：$n\\le 10^3$。\n-  Subtask 6（15 points）：$q\\le 10^3$。\n-  Subtask 7（40 points）：**时间限制为 2000 ms**。\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 10^5$，$1\\le a_i,x\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-9」模糊众数", "background": "", "description": "给你一个长为 $n$ 的序列 $a$。\n\n你可以将序列中的某个数增加 $1$，称为一次操作。\n\n你需要处理 $q$ 次询问。\n\n对于每次询问，求出 $a$ 在至少多少次操作后，可以形成一个序列 $a'$，使得 $x$ 为 $a'$ 的众数。\n\n**注意：一个序列可能有多个众数。**", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$。\n\n后 $q$ 行每行一个整数 $x$。", "outputFormat": "对于每次询问，若无解输出 `-1`，否则输出最少的操作次数。\n\n每个答案之间用换行隔开。", "hint": "**【样例 1 解释】**\n\n- $x=2$ 时，一种可行的方案为 $a'=[1,2,2,3,3,4]$。\n- $x=10$ 时，一种可行的方案为 $a'=[1,2,3,4,5,10]$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$n=3$。\n-  Subtask 2（5 points）：所有 $a_i$ 均相等，**时间限制为 2000 ms**。\n-  Subtask 3（5 points）：$n\\le 10$，$q\\le 10^3$。\n-  Subtask 4（15 points）：$n\\le 100$，$q\\le 10^4$。\n-  Subtask 5（15 points）：$n\\le 10^3$。\n-  Subtask 6（15 points）：$q\\le 10^3$。\n-  Subtask 7（40 points）：**时间限制为 2000 ms**。\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le 10^5$，$1\\le a_i,x\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7857", "type": "P", "difficulty": 7, "samples": [["3", "0 9 6 1"], ["4", "4 60 48 12 1"], ["5", "85 560 480 150 20 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「EZEC-9」Meltel", "background": "> 貴方だけは許せない。  \n> 『唯独你不可原谅。』  \n> 貴方だけは私の全てを許してくれた。  \n> 『唯独你宽恕了我的一切。』  \n> 貴方だけは私の全てを奪い尽くし食い尽くし  \n> 『唯独你覆灭了我的世界，』  \n> 焼き尽くして全てを無駄にした。  \n> 『焚烧殆尽，山陷地裂。』", "description": "给定正整数 $n$，请对 $s=0,1, \\dots, n$，计数满足存在恰好 $s$ 棵二叉树的 $n$ 个结点的由有标号有根树组成的有标号森林的个数。  \n对 $998244353$ 取模。\n\n定义二叉树为每个结点只有不超过 $2$ 个儿子的有标号有根树。  \n定义两片森林不同，当且仅当存在两个结点的父亲不同（根结点视为没有父亲）。", "inputFormat": "第一行，一个正整数 $n$。", "outputFormat": "一行，$n+1$ 个非负整数，表示对于 $s=0,1,\\dots,n$ 的答案。", "hint": "【样例 $1$ 说明】\n\n$3$ 个点只可能出现二叉树，因此 $s=0$ 的方案数为 $0$。  \n$3$ 个点的有标号有根二叉树有 $9$ 种，因此 $s=1$ 的方案数为 $9$。  \n$2$ 个点的有标号有根二叉树有 $2$ 种，因此 $s=2$ 的方案数为 $3 \\times 2 = 6$。  \n单个结点也算有标号有根二叉树，因此 $s=3$ 的方案数为 $1$。\n\n【数据规模与约定】\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$n\\le 5$。\n-  Subtask 2（5 points）：$n \\le 10$。\n-  Subtask 3（30 points）：$n\\le 10^3$。\n-  Subtask 4（30 points）：$n\\le 8\\times 10^3$。\n-  Subtask 5（30 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-9」Meltel", "background": "> 貴方だけは許せない。  \n> 『唯独你不可原谅。』  \n> 貴方だけは私の全てを許してくれた。  \n> 『唯独你宽恕了我的一切。』  \n> 貴方だけは私の全てを奪い尽くし食い尽くし  \n> 『唯独你覆灭了我的世界，』  \n> 焼き尽くして全てを無駄にした。  \n> 『焚烧殆尽，山陷地裂。』", "description": "给定正整数 $n$，请对 $s=0,1, \\dots, n$，计数满足存在恰好 $s$ 棵二叉树的 $n$ 个结点的由有标号有根树组成的有标号森林的个数。  \n对 $998244353$ 取模。\n\n定义二叉树为每个结点只有不超过 $2$ 个儿子的有标号有根树。  \n定义两片森林不同，当且仅当存在两个结点的父亲不同（根结点视为没有父亲）。", "inputFormat": "第一行，一个正整数 $n$。", "outputFormat": "一行，$n+1$ 个非负整数，表示对于 $s=0,1,\\dots,n$ 的答案。", "hint": "【样例 $1$ 说明】\n\n$3$ 个点只可能出现二叉树，因此 $s=0$ 的方案数为 $0$。  \n$3$ 个点的有标号有根二叉树有 $9$ 种，因此 $s=1$ 的方案数为 $9$。  \n$2$ 个点的有标号有根二叉树有 $2$ 种，因此 $s=2$ 的方案数为 $3 \\times 2 = 6$。  \n单个结点也算有标号有根二叉树，因此 $s=3$ 的方案数为 $1$。\n\n【数据规模与约定】\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$n\\le 5$。\n-  Subtask 2（5 points）：$n \\le 10$。\n-  Subtask 3（30 points）：$n\\le 10^3$。\n-  Subtask 4（30 points）：$n\\le 8\\times 10^3$。\n-  Subtask 5（30 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5$。\n", "locale": "zh-CN"}}}
{"pid": "P7858", "type": "P", "difficulty": 2, "samples": [["3\ntomo\nmono\ndak\n6666", "1"], ["2\nja\nla\n52", "2"], ["3\ndom\nfon\ntom\n366", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["模拟", "2015", "枚举", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #2] MARKO", "background": "", "description": "老人 Marko 在他的手机上发现了一个新功能——九键输入！他的手机有一个由数字组成的键盘，看起来像这样：\n\n|  |  |  |  |  |\n| -----------: | -----------: | -----------: | -----------: | -----------: |\n|  | &nbsp;1 &nbsp; &nbsp;&nbsp; | 2 abc&nbsp; | 3 def &nbsp; |  |\n|  | 4 ghi&nbsp; | 5 jkl &nbsp; | 6 mno&nbsp; |  |\n|  | 7 pqrs | 8 tuv&nbsp; | 9 wxyz |  |\n|  |  |  |  |  |\n\n为了用这个键盘输入一个单词，Marko 需要按一个键多次来输入所需的字母。更具体地说，如果所需字母是按键上的第一个字母，则需要按一次按键，如果是第二个字母，则需要按两次按键，依此类推。\n\n例如，如果要输入单词 `giht`，Marko 需要先按一次 `4` 来输入 `g`，再按三次 `4` 来输入 `i`，再按两次 `4` 来输入  `h`，最后按一次 `8` 来输入 `t`。\n\nMarko 把手机里的整本字典都背下来了。这本词典由 $N$ 个单词组成，每个单词都由小写英文字母组成，单词的总长度不超过 $10^9$ 个字符。Marko 将给出一个可用按键的集合，并想知道如果使用九键输入，字典中有多少单词可以使用给定的按键集合中的按键输入。", "inputFormat": "第一行一个整数 $N$，表示字典中的单词数。\n\n接下来 $N$ 行，每行一个由小写英文字母组成的单词。\n\n最后一行是一个由数字 `2-9` 组成的字符串 $S$，表示可用按键的集合。", "outputFormat": "一行一个整数，表示如果使用九键输入，字典中有多少单词可以使用给定的按键集合中的按键输入。", "hint": "**【样例 1 解释】**\n\n组成 `mono` 的四个字母都在按键 `6`  上，可以打出 `mono`。\n\n其它单词均无法打出。\n\n**【样例 2 解释】**\n\n`j` 在按键 `5` 上而 `a` 在按键 `2` 上，所以可以打出 `ja`。\n\n`l` 在按键 `5` 上而 `a` 在按键 `2` 上，所以可以打出 `la`。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^3，1 \\le |S| \\le 10^3$。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 50**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T1 MARKO**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #2] MARKO", "background": "", "description": "老人 Marko 在他的手机上发现了一个新功能——九键输入！他的手机有一个由数字组成的键盘，看起来像这样：\n\n|  |  |  |  |  |\n| -----------: | -----------: | -----------: | -----------: | -----------: |\n|  | &nbsp;1 &nbsp; &nbsp;&nbsp; | 2 abc&nbsp; | 3 def &nbsp; |  |\n|  | 4 ghi&nbsp; | 5 jkl &nbsp; | 6 mno&nbsp; |  |\n|  | 7 pqrs | 8 tuv&nbsp; | 9 wxyz |  |\n|  |  |  |  |  |\n\n为了用这个键盘输入一个单词，Marko 需要按一个键多次来输入所需的字母。更具体地说，如果所需字母是按键上的第一个字母，则需要按一次按键，如果是第二个字母，则需要按两次按键，依此类推。\n\n例如，如果要输入单词 `giht`，Marko 需要先按一次 `4` 来输入 `g`，再按三次 `4` 来输入 `i`，再按两次 `4` 来输入  `h`，最后按一次 `8` 来输入 `t`。\n\nMarko 把手机里的整本字典都背下来了。这本词典由 $N$ 个单词组成，每个单词都由小写英文字母组成，单词的总长度不超过 $10^9$ 个字符。Marko 将给出一个可用按键的集合，并想知道如果使用九键输入，字典中有多少单词可以使用给定的按键集合中的按键输入。", "inputFormat": "第一行一个整数 $N$，表示字典中的单词数。\n\n接下来 $N$ 行，每行一个由小写英文字母组成的单词。\n\n最后一行是一个由数字 `2-9` 组成的字符串 $S$，表示可用按键的集合。", "outputFormat": "一行一个整数，表示如果使用九键输入，字典中有多少单词可以使用给定的按键集合中的按键输入。", "hint": "**【样例 1 解释】**\n\n组成 `mono` 的四个字母都在按键 `6`  上，可以打出 `mono`。\n\n其它单词均无法打出。\n\n**【样例 2 解释】**\n\n`j` 在按键 `5` 上而 `a` 在按键 `2` 上，所以可以打出 `ja`。\n\n`l` 在按键 `5` 上而 `a` 在按键 `2` 上，所以可以打出 `la`。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^3，1 \\le |S| \\le 10^3$。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 50**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T1 MARKO**。", "locale": "zh-CN"}}}
{"pid": "P7859", "type": "P", "difficulty": 2, "samples": [["3 2\n1 2\n2 3", "5"], ["3 0", "8"], ["3 3\n1 2\n1 3\n2 3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "COCI（克罗地亚）", "状压 DP"], "title": "[COCI 2015/2016 #2] GEPPETTO", "background": "", "description": "Geppetto 开了一家披萨店，他正在努力做出全市最好的披萨。\n\nGeppetto 用 $N$ 种原材料做比萨，每种原材料只有一个。原材料标号为 $1$ 到 $N$。做披萨很简单，只要把原材料混合好然后放进烤箱里烤一烤就行了。但 Geppetto 发现一共有 $M$ 对原材料是冲突的，如果一对冲突的原材料混合在一份披萨里，这份披萨就会变得十分难吃。这给他带来了额外的麻烦。\n\nGeppetto 想知道他最多能做多少种不同的比萨。如果一份比萨上有编号为 $i$ 的原材料，而另一份比萨上没有，那么这两份比萨就是不同的。", "inputFormat": "第一行两个整数 $N,M$，分别表示原材料总数和冲突总数。\n\n接下来 $M$ 行，每行两个整数 $x_i,y_i$，表示一对冲突中两种原材料的编号。", "outputFormat": "一行一个整数，表示 Geppetto 最多能做多少种披萨。", "hint": "**【样例 1 解释】**\n\nGeppetto 可以做出以下 `4` 种披萨：\n\n`1`\n\n`2`\n\n`3`\n\n`1 3`\n\n不过因为 Geppetto 可以不放原材料，所以最多可以做出 `5` 种披萨。\n\n**【样例 2 解释】**\n\n没有原材料冲突，所以一共可以做出 $2^3=8$ 种披萨。\n\n**【样例 3 解释】**\n\n由于所有原材料都互相冲突，所以 Geppetto 只能放一种原材料或者不放原材料，一共可以做出 $1+3=4$ 种披萨。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le N\\le 20，0\\le M\\le 400，1\\le x_i,y_i\\le N$，**保证 $x_i\\ne y_i$**。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 80**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T2 GEPPETTO**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #2] GEPPETTO", "background": "", "description": "Geppetto 开了一家披萨店，他正在努力做出全市最好的披萨。\n\nGeppetto 用 $N$ 种原材料做比萨，每种原材料只有一个。原材料标号为 $1$ 到 $N$。做披萨很简单，只要把原材料混合好然后放进烤箱里烤一烤就行了。但 Geppetto 发现一共有 $M$ 对原材料是冲突的，如果一对冲突的原材料混合在一份披萨里，这份披萨就会变得十分难吃。这给他带来了额外的麻烦。\n\nGeppetto 想知道他最多能做多少种不同的比萨。如果一份比萨上有编号为 $i$ 的原材料，而另一份比萨上没有，那么这两份比萨就是不同的。", "inputFormat": "第一行两个整数 $N,M$，分别表示原材料总数和冲突总数。\n\n接下来 $M$ 行，每行两个整数 $x_i,y_i$，表示一对冲突中两种原材料的编号。", "outputFormat": "一行一个整数，表示 Geppetto 最多能做多少种披萨。", "hint": "**【样例 1 解释】**\n\nGeppetto 可以做出以下 `4` 种披萨：\n\n`1`\n\n`2`\n\n`3`\n\n`1 3`\n\n不过因为 Geppetto 可以不放原材料，所以最多可以做出 `5` 种披萨。\n\n**【样例 2 解释】**\n\n没有原材料冲突，所以一共可以做出 $2^3=8$ 种披萨。\n\n**【样例 3 解释】**\n\n由于所有原材料都互相冲突，所以 Geppetto 只能放一种原材料或者不放原材料，一共可以做出 $1+3=4$ 种披萨。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le N\\le 20，0\\le M\\le 400，1\\le x_i,y_i\\le N$，**保证 $x_i\\ne y_i$**。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 80**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T2 GEPPETTO**。", "locale": "zh-CN"}}}
{"pid": "P7860", "type": "P", "difficulty": 4, "samples": [["4\n1 3 2 2\n1 1 3 2\n2 4 7 3\n3 3 5 3\n", "2 4 1 3"], ["4\n0 0 1 1\n1 2 0 3\n2 2 3 3\n4 0 3 1\n", "4 3 1 2"], ["3\n4 6 5 5\n2 1 15 1\n3 2 8 7\n", "2 3 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2015", "Special Judge", "拓扑排序", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #2] ARTUR", "background": "", "description": "有 $n$ 根棍子放在桌面上，求一个将棍子向桌子 $x$ 轴边缘移动的顺序，使棍子不发生碰撞（棍子向桌子边缘移动的速度相同）。", "inputFormat": "第一行一个整数 $N$，表示棍子的总数。\n\n接下来 $N$ 行，每行四个整数 $x1_i,y1_i,x2_i,y2_i$，表示一根棍子两端的坐标。", "outputFormat": "一行 $n$ 个整数，表示合法的棍子移动顺序。", "hint": "**【样例 1 解释】**\n\n如图，另一种移动顺序是 `2 1 4 3`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6yeaxhnb.png)\n\n**【数据范围】**\n\n对于 $40\\%$ 的数据，$1\\le N\\le 10$；\n\n对于 $60\\%$ 的数据，$1\\le N\\le 300$；\n\n对于 $100\\%$ 的数据，$1\\le N\\le 5000$，$0\\le x1,y1,x2,y2\\le 10^4$。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 100**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T3 ARTUR**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #2] ARTUR", "background": "", "description": "有 $n$ 根棍子放在桌面上，求一个将棍子向桌子 $x$ 轴边缘移动的顺序，使棍子不发生碰撞（棍子向桌子边缘移动的速度相同）。", "inputFormat": "第一行一个整数 $N$，表示棍子的总数。\n\n接下来 $N$ 行，每行四个整数 $x1_i,y1_i,x2_i,y2_i$，表示一根棍子两端的坐标。", "outputFormat": "一行 $n$ 个整数，表示合法的棍子移动顺序。", "hint": "**【样例 1 解释】**\n\n如图，另一种移动顺序是 `2 1 4 3`。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6yeaxhnb.png)\n\n**【数据范围】**\n\n对于 $40\\%$ 的数据，$1\\le N\\le 10$；\n\n对于 $60\\%$ 的数据，$1\\le N\\le 300$；\n\n对于 $100\\%$ 的数据，$1\\le N\\le 5000$，$0\\le x1,y1,x2,y2\\le 10^4$。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 100**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T3 ARTUR**。", "locale": "zh-CN"}}}
{"pid": "P7861", "type": "P", "difficulty": 3, "samples": [["5\nA\nB\nAA\nBBB\nAAA", "3"], ["5\nA\nABA\nBBB\nABABA\nAAAAAB", "3"], ["6\nA\nB\nA\nB\nA\nB", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["字符串", "2015", "哈希 hashing", "字典树 Trie", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #2] SAVEZ", "background": "", "description": "有一个秘密行星 S4 居住着一种奇特的动物，它们的学名是 Loda。Savez 协会派出了一个由 Henrik 将军领导的小组来研究 Loda。Henrik 发现，Loda 有心灵传输的能力，他想在他的军队里雇佣他们。\n\n一只 Loda 由 $N$ 个字符串组成，其中第 $i$ 个字符串记为 $x_i$。研究表明，Loda 能进行的心灵传输次数取决于组成它的字符串的一个特殊子序列（不一定是连续的）。字符串 $x_i$ 和 $x_j\\ (i<j)$ 都可以在该子序列中，当且仅当字符串 $x_j$ 以 $x_i$ 开头并以 $x_i$ 结尾。一只 Loda 可以进行的心灵传输次数是组成它的字符串的合法的最长子序列的长度，而你就需要确定它可以进行心灵传输的次数。", "inputFormat": "第一行一个整数 $N$，表示组成某一只 Loda 的字符串总数。\n\n接下来 $N$ 行，每行一个仅由大写英文字母构成的字符串 $x_i$，表示构成这一只 Loda 的字符串。", "outputFormat": "一行一个整数，表示这只 Loda 可以进行心灵传输的次数。", "hint": "**【样例 1 解释】**\n\n一个最长的子序列为 `A AA AAA`。\n\n**【样例 3 解释】**\n\n子序列中的字符串允许相等，因此一个最长的子序列为 `A A A` 或 `B B B`。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le N \\le 2\\times 10^6，1\\le |x_i| \\le 2\\times 10^6$，**保证 $\\sum |x_i|\\le 2\\times 10^6$**。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 120**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T4 SAVEZ**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #2] SAVEZ", "background": "", "description": "有一个秘密行星 S4 居住着一种奇特的动物，它们的学名是 Loda。Savez 协会派出了一个由 Henrik 将军领导的小组来研究 Loda。Henrik 发现，Loda 有心灵传输的能力，他想在他的军队里雇佣他们。\n\n一只 Loda 由 $N$ 个字符串组成，其中第 $i$ 个字符串记为 $x_i$。研究表明，Loda 能进行的心灵传输次数取决于组成它的字符串的一个特殊子序列（不一定是连续的）。字符串 $x_i$ 和 $x_j\\ (i<j)$ 都可以在该子序列中，当且仅当字符串 $x_j$ 以 $x_i$ 开头并以 $x_i$ 结尾。一只 Loda 可以进行的心灵传输次数是组成它的字符串的合法的最长子序列的长度，而你就需要确定它可以进行心灵传输的次数。", "inputFormat": "第一行一个整数 $N$，表示组成某一只 Loda 的字符串总数。\n\n接下来 $N$ 行，每行一个仅由大写英文字母构成的字符串 $x_i$，表示构成这一只 Loda 的字符串。", "outputFormat": "一行一个整数，表示这只 Loda 可以进行心灵传输的次数。", "hint": "**【样例 1 解释】**\n\n一个最长的子序列为 `A AA AAA`。\n\n**【样例 3 解释】**\n\n子序列中的字符串允许相等，因此一个最长的子序列为 `A A A` 或 `B B B`。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le N \\le 2\\times 10^6，1\\le |x_i| \\le 2\\times 10^6$，**保证 $\\sum |x_i|\\le 2\\times 10^6$**。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 120**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T4 SAVEZ**。", "locale": "zh-CN"}}}
{"pid": "P7862", "type": "P", "difficulty": 6, "samples": [["3 3\n0 4 4\n1 5 1\n2 6 1\n", "1.414\n"], ["6 11\n0 0 1\n0 1 2\n1 0 3\n1 1 4\n5 5 1\n20 20 10\n", "5.657"], ["6 5\n20 20 9\n0 0 3\n0 1 1\n10 0 1\n10 1 6\n12 0 3\n", "2.000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "二分", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #2] DRŽAVA", "background": "", "description": "一个遥远的国家刚刚举行了选举，新首相当选了。目前，这个国家没有一条公路，所以首相决定用双向公路把国内的城市连接起来，组成县，使国家现代化。\n\n这个国家共有 $N$ 个城市，每个县由一个或多个城市组成，**两个城市将位于同一个县，当且仅当使用新建的道路可以从一个城市到达另一个城市**。这些城市在二维坐标系中用点来表示，两个城市之间的道路表示为连接两个城市所在点的线段。这条路的长度等于以公里为单位的线段的长度。\n\n该国目前正遭受经济衰退，因此首相决定，由于缺乏预算，他们将不修建超过 $D$ 公里的道路。此外，**如果至少有一个县存在一个非空子县（可以包括该县的所有城市），使得子县内的居民总数可以被 $K$ 整除，首相就会高兴**。例如，如果 $K=4$，一个县的城市分别有 `3`、`5`、`7` 个居民，首相就会高兴，因为前两个城市的居民总数等于 `8`。\n\n请你确定最小的 $D$ 来帮助首相降低成本，使得首相感到高兴。", "inputFormat": "第一行包含两个整数 $N,K$。\n\n接下来 $N$ 行，每行三个整数 $x_i,y_i,k_i$，分别表示这个城市的坐标和这个城市的人口。", "outputFormat": "一行一个实数，表示最小的 $D$，**四舍五入保留三位小数**。", "hint": "**【样例 1 解释】**\n\n只有当所有城市都在同一个县里首相才能高兴，所以最小的 $D$ 为 $1.414$。\n\n**【样例 2 解释】**\n\n当前五个城市都在同一个县里首相才能高兴，且此时 $D$ 是最小的，所以最小的 $D$ 为 $5.657$。\n\n**【数据范围】**\n\n对于 $40\\%$ 的数据，$1\\le N\\le10^3$；\n\n对于 $100\\%$ 的数据，$1\\le N\\le5\\times10^4，1\\le K\\le30，0\\le x_i,y_i,k_i\\le10^8$。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 160**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T6 DRŽAVA**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #2] DRŽAVA", "background": "", "description": "一个遥远的国家刚刚举行了选举，新首相当选了。目前，这个国家没有一条公路，所以首相决定用双向公路把国内的城市连接起来，组成县，使国家现代化。\n\n这个国家共有 $N$ 个城市，每个县由一个或多个城市组成，**两个城市将位于同一个县，当且仅当使用新建的道路可以从一个城市到达另一个城市**。这些城市在二维坐标系中用点来表示，两个城市之间的道路表示为连接两个城市所在点的线段。这条路的长度等于以公里为单位的线段的长度。\n\n该国目前正遭受经济衰退，因此首相决定，由于缺乏预算，他们将不修建超过 $D$ 公里的道路。此外，**如果至少有一个县存在一个非空子县（可以包括该县的所有城市），使得子县内的居民总数可以被 $K$ 整除，首相就会高兴**。例如，如果 $K=4$，一个县的城市分别有 `3`、`5`、`7` 个居民，首相就会高兴，因为前两个城市的居民总数等于 `8`。\n\n请你确定最小的 $D$ 来帮助首相降低成本，使得首相感到高兴。", "inputFormat": "第一行包含两个整数 $N,K$。\n\n接下来 $N$ 行，每行三个整数 $x_i,y_i,k_i$，分别表示这个城市的坐标和这个城市的人口。", "outputFormat": "一行一个实数，表示最小的 $D$，**四舍五入保留三位小数**。", "hint": "**【样例 1 解释】**\n\n只有当所有城市都在同一个县里首相才能高兴，所以最小的 $D$ 为 $1.414$。\n\n**【样例 2 解释】**\n\n当前五个城市都在同一个县里首相才能高兴，且此时 $D$ 是最小的，所以最小的 $D$ 为 $5.657$。\n\n**【数据范围】**\n\n对于 $40\\%$ 的数据，$1\\le N\\le10^3$；\n\n对于 $100\\%$ 的数据，$1\\le N\\le5\\times10^4，1\\le K\\le30，0\\le x_i,y_i,k_i\\le10^8$。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 160**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T6 DRŽAVA**。", "locale": "zh-CN"}}}
{"pid": "P7863", "type": "P", "difficulty": 6, "samples": [["3 3 1 1\n1 2 3\n8 9 4\n7 6 5", "1 8"], ["3 3 2 3\n1 2 3\n2 2 4\n1 2 2", "5 4"], ["4 4 2 3\n5 9 6 2\n4 2 3 6\n7 2 5 2\n4 2 3 9", "7 25"], ["10 10 3 3\n9 13 7 7 3 8 6 5 12 8\n1 4 10 11 9 10 13 6 2 18\n3 3 19 6 14 2 19 10 2 16\n3 1 11 14 14 18 8 8 16 14\n13 5 7 4 11 17 3 16 10 20\n10 16 12 19 14 12 11 20 15 10\n10 15 5 1 16 2 7 5 14 5\n3 19 12 19 8 13 17 7 10 13\n2 10 17 6 8 11 8 7 1 4\n3 7 8 1 3 5 4 11 9 17", "36 254"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论建模", "二分图", "费用流"], "title": "「EVOI-RD1」飞鸟和蝉", "background": "你骄傲地飞远，我栖息的叶片。  \n听不见的宣言，重复过很多年。  \n沧海月的想念羽化我昨天，  \n在我成熟的笑脸，  \n你却未看过一眼。", "description": "蝉 Charlie 要去寻找他的好朋友飞鸟了。 \n\n具体来说，Charlie 和他的好朋友生活的地方可以看作一个 $n \\times m$ 的网格，左上角为 $(1,1)$，右下角为 $(n,m)$。每个格子 $(i,j)$ 有一个海拔高度 $h_{i,j}$。Charlie 的目标是从他的家 $(x_0,y_0)$ 出发，不重不漏地经过网格中的每个格子**恰好一次**，**最终回到自己的家** $(x_0,y_0)$。Charlie 有两种移动方式：\n\n1. 跳跃。用这种方式，Charlie 可以到达上下左右 $4$ 个相邻格子中**海拔严格低于当前格子**的一个格子。注意跳跃不消耗体力。  \n2. 飞行。用这种方式，Charlie 可以从当前格子 $(x,y)$ 到达网格中**任意一个**格子 $(x',y')$，并消耗 $h_{x',y'}-h_{x,y}$ 个单位的体力。**注意飞行所消耗的体力值可以是负数**。  \n\nCharlie 希望用尽量少的飞行次数完成目标，**在此前提下**再令消耗的体力最少。由于网格实在太大了，Charlie 希望你能帮助他。", "inputFormat": "第一行四个整数，分别代表 $n,m,x_0,y_0$，含义如上所述。  \n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 个数代表格子 $(i,j)$ 的海拔 $h_{i,j}$。", "outputFormat": "一行两个整数，分别代表“飞行的最少次数”与“飞行次数最少的前提下消耗的最少体力值”。", "hint": "**本题采用捆绑测试**\n\n样例 1 解释：从 $(1,1)$ 飞到 $(2,2)$，再绕一圈即可。\n\n样例 2 解释：一种最佳方案为：$(2,3)-(1,3)-(1,2)-(1,1)=(2,1)-(3,1)=(2,2)=(3,2)=(3,3)=(2,3)$，其中 $=$ 代表飞行。  \n\n- Subtask 1 (10 pts)：满足 $1 \\leq n,m \\leq 3$。\n- Subtask 2 (20 pts)：满足 $1 \\leq n,m \\leq 5$。\n- Subtask 3 (20 pts)：保证至多有两种不同的海拔高度。 \n- Subtask 4 (50 pts)：无特殊限制。\n\n对于 $100\\%$ 的数据：\n- $1 \\leq n,m \\leq 50$。\n\n- $1 \\leq x_0 \\leq n,1 \\leq y_0 \\leq m,1 \\leq h_{i,j} \\leq 10^9$。  \n\n出题人：[冷月葬T魂](https://www.luogu.com.cn/user/340903)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EVOI-RD1」飞鸟和蝉", "background": "你骄傲地飞远，我栖息的叶片。  \n听不见的宣言，重复过很多年。  \n沧海月的想念羽化我昨天，  \n在我成熟的笑脸，  \n你却未看过一眼。", "description": "蝉 Charlie 要去寻找他的好朋友飞鸟了。 \n\n具体来说，Charlie 和他的好朋友生活的地方可以看作一个 $n \\times m$ 的网格，左上角为 $(1,1)$，右下角为 $(n,m)$。每个格子 $(i,j)$ 有一个海拔高度 $h_{i,j}$。Charlie 的目标是从他的家 $(x_0,y_0)$ 出发，不重不漏地经过网格中的每个格子**恰好一次**，**最终回到自己的家** $(x_0,y_0)$。Charlie 有两种移动方式：\n\n1. 跳跃。用这种方式，Charlie 可以到达上下左右 $4$ 个相邻格子中**海拔严格低于当前格子**的一个格子。注意跳跃不消耗体力。  \n2. 飞行。用这种方式，Charlie 可以从当前格子 $(x,y)$ 到达网格中**任意一个**格子 $(x',y')$，并消耗 $h_{x',y'}-h_{x,y}$ 个单位的体力。**注意飞行所消耗的体力值可以是负数**。  \n\nCharlie 希望用尽量少的飞行次数完成目标，**在此前提下**再令消耗的体力最少。由于网格实在太大了，Charlie 希望你能帮助他。", "inputFormat": "第一行四个整数，分别代表 $n,m,x_0,y_0$，含义如上所述。  \n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 个数代表格子 $(i,j)$ 的海拔 $h_{i,j}$。", "outputFormat": "一行两个整数，分别代表“飞行的最少次数”与“飞行次数最少的前提下消耗的最少体力值”。", "hint": "**本题采用捆绑测试**\n\n样例 1 解释：从 $(1,1)$ 飞到 $(2,2)$，再绕一圈即可。\n\n样例 2 解释：一种最佳方案为：$(2,3)-(1,3)-(1,2)-(1,1)=(2,1)-(3,1)=(2,2)=(3,2)=(3,3)=(2,3)$，其中 $=$ 代表飞行。  \n\n- Subtask 1 (10 pts)：满足 $1 \\leq n,m \\leq 3$。\n- Subtask 2 (20 pts)：满足 $1 \\leq n,m \\leq 5$。\n- Subtask 3 (20 pts)：保证至多有两种不同的海拔高度。 \n- Subtask 4 (50 pts)：无特殊限制。\n\n对于 $100\\%$ 的数据：\n- $1 \\leq n,m \\leq 50$。\n\n- $1 \\leq x_0 \\leq n,1 \\leq y_0 \\leq m,1 \\leq h_{i,j} \\leq 10^9$。  \n\n出题人：[冷月葬T魂](https://www.luogu.com.cn/user/340903)", "locale": "zh-CN"}}}
{"pid": "P7864", "type": "P", "difficulty": 5, "samples": [["2\n3\n1 1\n4\n1 2 3\n", "1\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "深度优先搜索 DFS"], "title": "「EVOI-RD1」摘叶子", "background": "", "description": "某日，小 A 和小 B 在一起开心地玩着游戏。\n\n他们找了一棵以 $1$ 节点为根节点的树，很显然，作为一棵树，总有一个或好多个叶子节点。小 A 和小 B 玩的是回合制游戏。\n\n每次小 A 或小 B 可以选择**任意数量**的叶子节点，将其从树中摘下（每次只能摘叶子节点，每次摘的数量不限制，但**不能不摘**，更不能摘的数量超过本来叶子节点的数量）。\n\n很显然，把一些叶子摘下后，他们的父亲节点有可能会成为新的叶子节点，这时，这些新成为叶子节点的原父亲节点也变得可以被摘取了。\n\n现在，小 A 先摘，小 B 再摘，往复循环。把 $1$ 号节点摘下的人获胜。我们知道，小 A 和小 B 总会按最优方式进行游戏，问谁会取得胜利。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个正整数 $T$，表示一共有 $T$ 组数据。\n\n每组数据的第二行一个正整数 $n$，表示这棵树有 $n$ 个节点。\n\n每组数据的第三行，$n-1$ 个整数，代表从 $2$ 号节点到 $n$ 号节点的父亲节点编号。", "outputFormat": "共 $T$ 行，每行一个整数 $1$ 或 $0$。\n\n$1$ 代表小 A 会取得胜利，$0$ 代表小 B 会取得胜利。", "hint": "本题数据随机，只要简单分析一下性质，就很好骗分，因此本题采用**捆绑测试**。\n\n对于 $40\\%$ 的数据：$1 \\leq n \\leq 100$。\n\n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^6$，$1 \\leq T \\leq 10$。\n\n本题时空限制（尤其是空间）均非常宽松，不卡常，不毒瘤，请放心食用。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EVOI-RD1」摘叶子", "background": "", "description": "某日，小 A 和小 B 在一起开心地玩着游戏。\n\n他们找了一棵以 $1$ 节点为根节点的树，很显然，作为一棵树，总有一个或好多个叶子节点。小 A 和小 B 玩的是回合制游戏。\n\n每次小 A 或小 B 可以选择**任意数量**的叶子节点，将其从树中摘下（每次只能摘叶子节点，每次摘的数量不限制，但**不能不摘**，更不能摘的数量超过本来叶子节点的数量）。\n\n很显然，把一些叶子摘下后，他们的父亲节点有可能会成为新的叶子节点，这时，这些新成为叶子节点的原父亲节点也变得可以被摘取了。\n\n现在，小 A 先摘，小 B 再摘，往复循环。把 $1$ 号节点摘下的人获胜。我们知道，小 A 和小 B 总会按最优方式进行游戏，问谁会取得胜利。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个正整数 $T$，表示一共有 $T$ 组数据。\n\n每组数据的第二行一个正整数 $n$，表示这棵树有 $n$ 个节点。\n\n每组数据的第三行，$n-1$ 个整数，代表从 $2$ 号节点到 $n$ 号节点的父亲节点编号。", "outputFormat": "共 $T$ 行，每行一个整数 $1$ 或 $0$。\n\n$1$ 代表小 A 会取得胜利，$0$ 代表小 B 会取得胜利。", "hint": "本题数据随机，只要简单分析一下性质，就很好骗分，因此本题采用**捆绑测试**。\n\n对于 $40\\%$ 的数据：$1 \\leq n \\leq 100$。\n\n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^6$，$1 \\leq T \\leq 10$。\n\n本题时空限制（尤其是空间）均非常宽松，不卡常，不毒瘤，请放心食用。", "locale": "zh-CN"}}}
{"pid": "P7865", "type": "P", "difficulty": 4, "samples": [["9 9 \n3 \n2 1 4 4 \n2 5 4 9 \n5 2 7 6 \n2 \n3 3 6 6 \n5 6 8 8", "Yes \nNo"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树"], "title": "「EVOI-RD1」无人机航拍", "background": "T 市举行活动需要拍摄高空俯瞰图，找来了一个无人机机队负责拍摄工作。 [一E孤行](https://www.luogu.com.cn/user/229919) 是队伍的队长，他根据广场的规模来安排无人机的位置。", "description": "有一个广场，可以看做是一个 $n \\times m$ 的矩形；一E孤行 一共有 $s$ 架无人机，每架无人机的拍摄范围也可以看做是一个矩形，无人机机队的拍摄范围为所有无人机拍摄范围的并。\n\n一E孤行 负责安排无人机的位置，而总负责人 WuuTue 要验收~~她~~他的方案。WuuTue 的验收方法是列举出 $L$ 个重要的区域，每个重要区域也是一个矩形。 一E孤行 方案的优秀程度取决于有多少个重要区域完全在无人机机队的拍摄范围中。\n\n因此，对于每一个重要区域， 一E孤行 想知道它是否完全在无人机机队的拍摄范围中。", "inputFormat": "第一行，用空格隔开的两个整数 $n$ 和 $m$，用来描述广场的大小。\n\n第二行，一个整数 $s$，表示无人机队伍中无人机的总数量。\n\n第三行到第 $s+2$ 行，每行四个用空格隔开的整数，$a_1,b_1,a_2,b_2$，用来描述一架无人机的拍摄范围。其中 $a_1,b_1$ 表示矩形的左下角坐标，$a_2,b_2$ 表示右上角的坐标。\n\n第 $s+3$ 行，一个整数 $L$，表示活动总负责人列出的重要区域的数量 $L$。\n\n最后 $L$ 行，每行四个用空格隔开的整数 $r_1,c_1,r_2,c_2$，用来描述一个重要区域。其中 $r_1,c_1$ 表示矩形区域左下角坐标，$r_2,c_2$ 表示右上角坐标。", "outputFormat": "输出 $L$ 行，对于每个重要区域，如果完全在机队的拍摄范围内就输出 `Yes`，否则出 `No`。每个答案占一行。", "hint": "**样例说明**\n\n如下图所示，区域 $A,B,C$ 分别是某某安排的无人机能够覆盖的范围，区域 $D,E$ 是 WuuTue 要验收时列举的重点区域，区域 $D$ 能够被完全覆盖，区域 $E$ 不能被全部覆盖。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/60pq06qo.png)   \n\n**数据规模与约定**\n\n**本题采用捆绑测试。**\n\n对于 $40\\%$ 的数据：$1 \\le n \\le 1000$，$1 \\le s \\le 100$ 。  \n对于 $100\\%$ 的数据：\n\n- $1 \\le n, m \\le 3 \\times 10^{3}$。 \n- $1 \\le s,L \\le 10^6$。\n- $1 \\le x_1 < x_2 \\le n$。\n- $1 \\le r_1 < r_2 \\le n$。\n- $1 \\le y_1 < y_2 \\le m$。\n- $1 \\le c_1 < c_2 \\le m$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EVOI-RD1」无人机航拍", "background": "T 市举行活动需要拍摄高空俯瞰图，找来了一个无人机机队负责拍摄工作。 [一E孤行](https://www.luogu.com.cn/user/229919) 是队伍的队长，他根据广场的规模来安排无人机的位置。", "description": "有一个广场，可以看做是一个 $n \\times m$ 的矩形；一E孤行 一共有 $s$ 架无人机，每架无人机的拍摄范围也可以看做是一个矩形，无人机机队的拍摄范围为所有无人机拍摄范围的并。\n\n一E孤行 负责安排无人机的位置，而总负责人 WuuTue 要验收~~她~~他的方案。WuuTue 的验收方法是列举出 $L$ 个重要的区域，每个重要区域也是一个矩形。 一E孤行 方案的优秀程度取决于有多少个重要区域完全在无人机机队的拍摄范围中。\n\n因此，对于每一个重要区域， 一E孤行 想知道它是否完全在无人机机队的拍摄范围中。", "inputFormat": "第一行，用空格隔开的两个整数 $n$ 和 $m$，用来描述广场的大小。\n\n第二行，一个整数 $s$，表示无人机队伍中无人机的总数量。\n\n第三行到第 $s+2$ 行，每行四个用空格隔开的整数，$a_1,b_1,a_2,b_2$，用来描述一架无人机的拍摄范围。其中 $a_1,b_1$ 表示矩形的左下角坐标，$a_2,b_2$ 表示右上角的坐标。\n\n第 $s+3$ 行，一个整数 $L$，表示活动总负责人列出的重要区域的数量 $L$。\n\n最后 $L$ 行，每行四个用空格隔开的整数 $r_1,c_1,r_2,c_2$，用来描述一个重要区域。其中 $r_1,c_1$ 表示矩形区域左下角坐标，$r_2,c_2$ 表示右上角坐标。", "outputFormat": "输出 $L$ 行，对于每个重要区域，如果完全在机队的拍摄范围内就输出 `Yes`，否则出 `No`。每个答案占一行。", "hint": "**样例说明**\n\n如下图所示，区域 $A,B,C$ 分别是某某安排的无人机能够覆盖的范围，区域 $D,E$ 是 WuuTue 要验收时列举的重点区域，区域 $D$ 能够被完全覆盖，区域 $E$ 不能被全部覆盖。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/60pq06qo.png)   \n\n**数据规模与约定**\n\n**本题采用捆绑测试。**\n\n对于 $40\\%$ 的数据：$1 \\le n \\le 1000$，$1 \\le s \\le 100$ 。  \n对于 $100\\%$ 的数据：\n\n- $1 \\le n, m \\le 3 \\times 10^{3}$。 \n- $1 \\le s,L \\le 10^6$。\n- $1 \\le x_1 < x_2 \\le n$。\n- $1 \\le r_1 < r_2 \\le n$。\n- $1 \\le y_1 < y_2 \\le m$。\n- $1 \\le c_1 < c_2 \\le m$。\n", "locale": "zh-CN"}}}
{"pid": "P7866", "type": "P", "difficulty": 2, "samples": [["3\nS3\nH3\nS3", "1"], ["7\nST\nST\nHT\nHT\nCT\nCT\nDT", "2"], ["6\nDA\nHA\nD4\nC5\nDA\nD4", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "贪心", "2021", "排序"], "title": "「EVOI-RD1」小昕昕", "background": "一副扑克牌共有 $54$ 张牌，除去大小王后有 $52$ 张。在同一副牌中，一张牌只可能出现一次。\n\n一副扑克牌中一共有四种花色：黑桃($\\texttt{spade}$)、红桃($\\texttt{heart}$)、梅花($\\texttt{club}$)、方块($\\texttt{diamond}$)。每个花色的牌共有 $13$ 张，分别为 $\\texttt{A} \\sim \\texttt{K}$。\n\n在题目中，以上四种花色分别以 $\\texttt{S,H,C,D}$ 表示。\n\n我们约定，任何一张牌，都以 **花色+点数** 表示，并且约定用 $\\texttt{T}$ 表示 $\\texttt{10}$，如 $\\texttt{SA,D5,HT,CQ}$。", "description": "昕昕手上有 **两副无大小王** 的扑克牌，她会从这些扑克牌里取出 $n$ 张牌。\n\n昕昕创造了一个组合为 **“小昕昕”**，它的定义是，任意取出 $3$ 张牌，若这 $3$ 张牌的 **牌点一样** ，且花色有且仅有 **两种** ，则称为一对“小昕昕”。如 $\\texttt{H3,S3,S3}$ 是一对“小昕昕”。\n\n当这三张扑克牌组成 **“小昕昕”** 后，昕昕就会把它们从牌堆内拿出，**不可再次使用**。\n\n现在，昕昕想让你帮她数数，这副牌里最多能组成多少对 **“小昕昕”**。", "inputFormat": "第一行为一个正整数 $n$。\n\n第二至 $n+1$ 行，每行为一张扑克牌。", "outputFormat": "输出这 $n$ 张牌内，最多能组成多少对“小昕昕”。", "hint": "**本题采用捆绑测试。**\n\n+ $\\texttt{Subtask 1 (10 pts)}$ ：$1 \\le n \\le 3$。\n+ $\\texttt{Subtask 2 (20 pts)}$ ：$1 \\le n \\le 5$。\n+ $\\texttt{Subtask 3 (30 pts)}$ ：$1 \\le n \\le 20$。\n+ $\\texttt{Subtask 4 (10 pts)}$ ：$1 \\le n \\le 70$。\n+ $\\texttt{Subtask 5 (30 pts)}$ ：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 104$，保证输入的牌都存在于两副无大小王的扑克牌中。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EVOI-RD1」小昕昕", "background": "一副扑克牌共有 $54$ 张牌，除去大小王后有 $52$ 张。在同一副牌中，一张牌只可能出现一次。\n\n一副扑克牌中一共有四种花色：黑桃($\\texttt{spade}$)、红桃($\\texttt{heart}$)、梅花($\\texttt{club}$)、方块($\\texttt{diamond}$)。每个花色的牌共有 $13$ 张，分别为 $\\texttt{A} \\sim \\texttt{K}$。\n\n在题目中，以上四种花色分别以 $\\texttt{S,H,C,D}$ 表示。\n\n我们约定，任何一张牌，都以 **花色+点数** 表示，并且约定用 $\\texttt{T}$ 表示 $\\texttt{10}$，如 $\\texttt{SA,D5,HT,CQ}$。", "description": "昕昕手上有 **两副无大小王** 的扑克牌，她会从这些扑克牌里取出 $n$ 张牌。\n\n昕昕创造了一个组合为 **“小昕昕”**，它的定义是，任意取出 $3$ 张牌，若这 $3$ 张牌的 **牌点一样** ，且花色有且仅有 **两种** ，则称为一对“小昕昕”。如 $\\texttt{H3,S3,S3}$ 是一对“小昕昕”。\n\n当这三张扑克牌组成 **“小昕昕”** 后，昕昕就会把它们从牌堆内拿出，**不可再次使用**。\n\n现在，昕昕想让你帮她数数，这副牌里最多能组成多少对 **“小昕昕”**。", "inputFormat": "第一行为一个正整数 $n$。\n\n第二至 $n+1$ 行，每行为一张扑克牌。", "outputFormat": "输出这 $n$ 张牌内，最多能组成多少对“小昕昕”。", "hint": "**本题采用捆绑测试。**\n\n+ $\\texttt{Subtask 1 (10 pts)}$ ：$1 \\le n \\le 3$。\n+ $\\texttt{Subtask 2 (20 pts)}$ ：$1 \\le n \\le 5$。\n+ $\\texttt{Subtask 3 (30 pts)}$ ：$1 \\le n \\le 20$。\n+ $\\texttt{Subtask 4 (10 pts)}$ ：$1 \\le n \\le 70$。\n+ $\\texttt{Subtask 5 (30 pts)}$ ：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 104$，保证输入的牌都存在于两副无大小王的扑克牌中。", "locale": "zh-CN"}}}
{"pid": "P7867", "type": "P", "difficulty": 5, "samples": [["7 4\n3\n2\n3\n2\n1\n2\n3\n1 2 5\n2 3 5\n3 5 3\n7 7 5", "4"], ["2 1\n0\n3\n1 2 5", "2"], ["3 1\n10\n10\n10\n1 3 10", "0"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["前缀和"], "title": "「EVOI-RD1」马戏团", "background": "WuuTue拥有一家马戏团，马戏团会在全国巡演，最近WuuTue的马戏团来到了T市。", "description": "T市有一条专门的演出街，演出街是一条东西走向的笔直街道，街道上从西往东有 $n$ 个舞台，舞台的编号为 $1, 2, \\dots, n$。\n\nWuuTue计划在T市的演出街上进行 $M$ 场演出，其中第 $i$ 场演出要占用从 $l_i$ 到 $r_i$ 的连续舞台（包括 $l_i$ 和 $r_i$ ），同时WuuTue知道，第 $i$ 场比赛将会获得 $v_i$ 元的收益。\n\n由于演出街的舞台都是设计给人表演使用的，如果要供动物表演使用的话，需要进行加固，其中加固第 $i$ 个舞台需要花费 $c_i$ 元钱，并且只需要加固一次，可以重复使用。也就是说如果有多个演出都用到了舞台 $i$，那么只需要花费一次加固的费用就可以了。\n\n当然，如果WuuTue发现某场演出可能由于加固费用过高无法盈利，也可能会取消演出。\n\n因为WuuTue太蒻了，所以请帮助WuuTue计算，他最多可以获得多少元钱的收入。", "inputFormat": "第一行：两个空格分隔的整数 $n$ 和 $m$，分别表示舞台和演出的数量。\n\n第二到 $n+1$ 行：每行 $1$ 个整数，其中第 $i+1$ 行的整数表示加固第 $i$ 个舞台需要的花费 $c_i$。\n\n第 $n+2$ 行到第 $n+m+1$ 行：每行 $3$ 个空格分隔的整数，其中第 $n+i+1$ 行的 $3$ 个整数 $l_i$，$r_i$，$v_i$，表示第 $i$ 场演出需要占用第 $l_i$ 到 $r_i$ 的连续舞台，可以获得 $v_i$ 元的收益。", "outputFormat": "一行：一个整数，表示WuuTue可以获得的最大收益。", "hint": "**本题采用捆绑测试**\n\n对于 $20\\%$ 的数据， $1 \\le n , m \\le 100$。\n\n另有 $20\\%$ 的数据， $v_i = c_i = 1$。\n\n另有 $20\\%$ 的数据， $l_i = r_i$。\n\n对于 $100\\%$ 的数据， $1 \\le n , m \\le 10^6 , 0 \\le v_i , c_i \\le 10^9 , 1 \\le l_i \\le r_i \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EVOI-RD1」马戏团", "background": "WuuTue拥有一家马戏团，马戏团会在全国巡演，最近WuuTue的马戏团来到了T市。", "description": "T市有一条专门的演出街，演出街是一条东西走向的笔直街道，街道上从西往东有 $n$ 个舞台，舞台的编号为 $1, 2, \\dots, n$。\n\nWuuTue计划在T市的演出街上进行 $M$ 场演出，其中第 $i$ 场演出要占用从 $l_i$ 到 $r_i$ 的连续舞台（包括 $l_i$ 和 $r_i$ ），同时WuuTue知道，第 $i$ 场比赛将会获得 $v_i$ 元的收益。\n\n由于演出街的舞台都是设计给人表演使用的，如果要供动物表演使用的话，需要进行加固，其中加固第 $i$ 个舞台需要花费 $c_i$ 元钱，并且只需要加固一次，可以重复使用。也就是说如果有多个演出都用到了舞台 $i$，那么只需要花费一次加固的费用就可以了。\n\n当然，如果WuuTue发现某场演出可能由于加固费用过高无法盈利，也可能会取消演出。\n\n因为WuuTue太蒻了，所以请帮助WuuTue计算，他最多可以获得多少元钱的收入。", "inputFormat": "第一行：两个空格分隔的整数 $n$ 和 $m$，分别表示舞台和演出的数量。\n\n第二到 $n+1$ 行：每行 $1$ 个整数，其中第 $i+1$ 行的整数表示加固第 $i$ 个舞台需要的花费 $c_i$。\n\n第 $n+2$ 行到第 $n+m+1$ 行：每行 $3$ 个空格分隔的整数，其中第 $n+i+1$ 行的 $3$ 个整数 $l_i$，$r_i$，$v_i$，表示第 $i$ 场演出需要占用第 $l_i$ 到 $r_i$ 的连续舞台，可以获得 $v_i$ 元的收益。", "outputFormat": "一行：一个整数，表示WuuTue可以获得的最大收益。", "hint": "**本题采用捆绑测试**\n\n对于 $20\\%$ 的数据， $1 \\le n , m \\le 100$。\n\n另有 $20\\%$ 的数据， $v_i = c_i = 1$。\n\n另有 $20\\%$ 的数据， $l_i = r_i$。\n\n对于 $100\\%$ 的数据， $1 \\le n , m \\le 10^6 , 0 \\le v_i , c_i \\le 10^9 , 1 \\le l_i \\le r_i \\le n$。", "locale": "zh-CN"}}}
{"pid": "P7868", "type": "P", "difficulty": 5, "samples": [["3\n1 2 3\n3", "1"], ["3\n1 3 2\n2", "5"], ["3\n1 3 2\n3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #2] VUDU", "background": "", "description": "年轻的 Mirko 最近一直在买 Voodoo 娃娃。因为他对最便宜的东西很感兴趣，所以他每天都在追踪 Voodoo 娃娃的价格。他已经得知了最近 $N$ 天的娃娃价格，第 $i$ 天的娃娃价格记为 $a_i$。\n\nMirko 认为，连续几天的娃娃平均价格与下一天的娃娃价格之间存在某种联系。他想验证自己的观点，却被一个问题难倒了：“对于一个给定的 $P$，在这 $N$ 天内有多少个不同的连续子序列令娃娃的平均价格大于或等于 $P$ ？”\n\n两个连续子序列不同当且仅它们的开始位置或结束位置不同。", "inputFormat": "第一行一个整数 $N$。\n\n接下来一行有 $N$ 个整数，第 $i$ 个整数表示 $a_i$。\n\n最后一行有一个整数 $P$。", "outputFormat": "一行一个整数，表示在这 $N$ 天内有多少个不同的连续子序列令娃娃的平均价格大于或等于 $P$。", "hint": "**【样例 1 解释】**\n\n平均数大于等于 `3` 的子序列只有 `3`。\n\n**【样例 2 解释】**\n\n平均数大于等于 `2` 的子序列有 `5` 个，它们是：\n\n`1 3`\n\n`1 3 2`\n\n`3`\n\n`3 2`\n\n`2`\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，$1\\le N\\le 10^4$；\n\n对于 $100\\%$ 的数据，$1\\le N\\le 10^6，1\\le a_i\\le 10^9，1\\le P\\le 10^9$。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 140**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T5 VUDU**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #2] VUDU", "background": "", "description": "年轻的 Mirko 最近一直在买 Voodoo 娃娃。因为他对最便宜的东西很感兴趣，所以他每天都在追踪 Voodoo 娃娃的价格。他已经得知了最近 $N$ 天的娃娃价格，第 $i$ 天的娃娃价格记为 $a_i$。\n\nMirko 认为，连续几天的娃娃平均价格与下一天的娃娃价格之间存在某种联系。他想验证自己的观点，却被一个问题难倒了：“对于一个给定的 $P$，在这 $N$ 天内有多少个不同的连续子序列令娃娃的平均价格大于或等于 $P$ ？”\n\n两个连续子序列不同当且仅它们的开始位置或结束位置不同。", "inputFormat": "第一行一个整数 $N$。\n\n接下来一行有 $N$ 个整数，第 $i$ 个整数表示 $a_i$。\n\n最后一行有一个整数 $P$。", "outputFormat": "一行一个整数，表示在这 $N$ 天内有多少个不同的连续子序列令娃娃的平均价格大于或等于 $P$。", "hint": "**【样例 1 解释】**\n\n平均数大于等于 `3` 的子序列只有 `3`。\n\n**【样例 2 解释】**\n\n平均数大于等于 `2` 的子序列有 `5` 个，它们是：\n\n`1 3`\n\n`1 3 2`\n\n`3`\n\n`3 2`\n\n`2`\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，$1\\le N\\le 10^4$；\n\n对于 $100\\%$ 的数据，$1\\le N\\le 10^6，1\\le a_i\\le 10^9，1\\le P\\le 10^9$。\n\n**【说明】**\n\n**本题数据点得分依原题，满分 140**。\n\n题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #2](https://hsin.hr/coci/archive/2015_2016/contest2_tasks.pdf) **T5 VUDU**。", "locale": "zh-CN"}}}
{"pid": "P7869", "type": "P", "difficulty": 1, "samples": [["SCP2021RPplusplus\\nchenzheAKIOI\\n1plus1equalto2\\n", "linux"], ["chen_zhe AK IOI\\r\\nchen_zhe AK NOI\\r\\n", "windows"], ["include iostream\\rsigned main return 0\\r", "mac"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "2021", "洛谷原创", "﻿基础算法", "枚举", "洛谷月赛"], "title": "「Wdoi-4」使用三个系统程度的能力", "background": "**勘误**：事实上，自从 $2001$ 年发布的 $\\text{MacOS X}$ 之后换行符都变成了 $\\verb!\\n!$。网上发布的很多文章都存在谬误，当时出题人也没实地考察就信了。为了防止谣言继续传播，就在这里放了这段话。数据仍然以目前的题目描述为准，未做更改。\n\n---\n\n赫卡提亚·拉碧斯拉祖利是拥有三副身体，司掌月球、地球、异界三界地狱的神明。由于与纯狐结盟的缘故，赫卡提亚接触到了幻想乡，以及其他的一些现代科技。\n\n赫卡提亚发现，在人类社会中存在三个非常通用流行的操作系统，也就是 $\\text{Windows}$、$\\text{Linux}$ 和 $\\text{Mac}$。这三者就像是赫卡提亚本人的三个身体般，分别占据了很大的市场。\n\n但是赫卡提亚又发现，尽管这三个系统之间的文件可以通过一些方式进行信息流通，可是毕竟存在一些区别：例如换行方面采用的字符的不同。赫卡提亚对此非常感兴趣。\n\n现在赫卡提亚不知道从哪里搞来了一个系统的文本文件，她想知道这个文件是在哪个系统里编辑而成的。你能写个程序帮帮她吗？", "description": "在 $\\text{Windows}$、$\\text{Linux}$ 和 $\\text{Mac}$ 系统下，分别采用了三种不同的换行符方式。表示为显式转义符，分别是 $\\verb!\\r\\n!$、$\\verb!\\n!$ 和 $\\verb!\\r!$ 。现在有一份已经写好了的非空文本文件（里面仅由大小写英文字母、下划线、阿拉伯数字、空格，以及换行符组成）。这个文本文件是在单一系统中写成的，因此保证换行符只会出现上述三种情况**之一**。\n\n比如，这是一个合法的文本文件：\n\n```plain\nSCP2021 J rp plus plus\nchen zhe AK IOI\n\nWelcome to Hell\n```\n\n现在将其中的换行变为对应的转义符。那么在上述三个系统中，分别会变为以下三种模样：\n\n- $\\text{Windows}$ 系统：  \n\n$$\\colorbox{f5f5f5}{\\verb!SCP2021 J rp plus plus\\r\\nchen zhe AK IOI\\r\\n\\r\\nWelcome to Hell!}$$\n\n- $\\text{Linux}$ 系统：\n\n$$\\colorbox{f5f5f5}{\\verb!SCP2021 J rp plus plus\\nchen zhe AK IOI\\n\\nWelcome to Hell!\\kern{31.5pt}}$$\n\n- $\\text{Mac}$ 系统：\n\n$$\\colorbox{f5f5f5}{\\verb!SCP2021 J rp plus plus\\rchen zhe AK IOI\\r\\rWelcome to Hell!\\kern{31.5pt}}$$ \n\n---\n\n现在你被给定的任务是，根据转换后的文本文件，判断这是哪个系统下编写的文本文件。对于上述三种情况，分别输出 `windows`、`linux` 或 `mac`。", "inputFormat": "输入共一行，为转换后的文本文件。保证文本文件非空，且转换前至少有一个换行符。**输入可能包含空格。**", "outputFormat": "输出一行一个小写单词，输出此文本文件在哪个系统下编写。", "hint": "样例 $4$ 见下发的附件 $\\textbf{\\textit{system4.in}/\\textit{system4.out}}$。\n\n#### 数据范围\n\n- 对于 $40\\%$ 的数据，保证不存在空格。\n- 对于 $100\\%$ 的数据，保证输入字符串的长度 $\\le 10^5$。输入中仅包含大写英文字母、小写英文字母、下划线、数字、空格和转义字符（`\\r`、`\\n`）。\n\n#### 注意\n\n本题中的 `\\n` 及 `\\r` 表示直接写在输入里的一个反斜杠符号跟着一个小写字母 `n` 或 `r`，而不是一个**真正的**转义字符。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-4」使用三个系统程度的能力", "background": "**勘误**：事实上，自从 $2001$ 年发布的 $\\text{MacOS X}$ 之后换行符都变成了 $\\verb!\\n!$。网上发布的很多文章都存在谬误，当时出题人也没实地考察就信了。为了防止谣言继续传播，就在这里放了这段话。数据仍然以目前的题目描述为准，未做更改。\n\n---\n\n赫卡提亚·拉碧斯拉祖利是拥有三副身体，司掌月球、地球、异界三界地狱的神明。由于与纯狐结盟的缘故，赫卡提亚接触到了幻想乡，以及其他的一些现代科技。\n\n赫卡提亚发现，在人类社会中存在三个非常通用流行的操作系统，也就是 $\\text{Windows}$、$\\text{Linux}$ 和 $\\text{Mac}$。这三者就像是赫卡提亚本人的三个身体般，分别占据了很大的市场。\n\n但是赫卡提亚又发现，尽管这三个系统之间的文件可以通过一些方式进行信息流通，可是毕竟存在一些区别：例如换行方面采用的字符的不同。赫卡提亚对此非常感兴趣。\n\n现在赫卡提亚不知道从哪里搞来了一个系统的文本文件，她想知道这个文件是在哪个系统里编辑而成的。你能写个程序帮帮她吗？", "description": "在 $\\text{Windows}$、$\\text{Linux}$ 和 $\\text{Mac}$ 系统下，分别采用了三种不同的换行符方式。表示为显式转义符，分别是 $\\verb!\\r\\n!$、$\\verb!\\n!$ 和 $\\verb!\\r!$ 。现在有一份已经写好了的非空文本文件（里面仅由大小写英文字母、下划线、阿拉伯数字、空格，以及换行符组成）。这个文本文件是在单一系统中写成的，因此保证换行符只会出现上述三种情况**之一**。\n\n比如，这是一个合法的文本文件：\n\n```plain\nSCP2021 J rp plus plus\nchen zhe AK IOI\n\nWelcome to Hell\n```\n\n现在将其中的换行变为对应的转义符。那么在上述三个系统中，分别会变为以下三种模样：\n\n- $\\text{Windows}$ 系统：  \n\n$$\\colorbox{f5f5f5}{\\verb!SCP2021 J rp plus plus\\r\\nchen zhe AK IOI\\r\\n\\r\\nWelcome to Hell!}$$\n\n- $\\text{Linux}$ 系统：\n\n$$\\colorbox{f5f5f5}{\\verb!SCP2021 J rp plus plus\\nchen zhe AK IOI\\n\\nWelcome to Hell!\\kern{31.5pt}}$$\n\n- $\\text{Mac}$ 系统：\n\n$$\\colorbox{f5f5f5}{\\verb!SCP2021 J rp plus plus\\rchen zhe AK IOI\\r\\rWelcome to Hell!\\kern{31.5pt}}$$ \n\n---\n\n现在你被给定的任务是，根据转换后的文本文件，判断这是哪个系统下编写的文本文件。对于上述三种情况，分别输出 `windows`、`linux` 或 `mac`。", "inputFormat": "输入共一行，为转换后的文本文件。保证文本文件非空，且转换前至少有一个换行符。**输入可能包含空格。**", "outputFormat": "输出一行一个小写单词，输出此文本文件在哪个系统下编写。", "hint": "样例 $4$ 见下发的附件 $\\textbf{\\textit{system4.in}/\\textit{system4.out}}$。\n\n#### 数据范围\n\n- 对于 $40\\%$ 的数据，保证不存在空格。\n- 对于 $100\\%$ 的数据，保证输入字符串的长度 $\\le 10^5$。输入中仅包含大写英文字母、小写英文字母、下划线、数字、空格和转义字符（`\\r`、`\\n`）。\n\n#### 注意\n\n本题中的 `\\n` 及 `\\r` 表示直接写在输入里的一个反斜杠符号跟着一个小写字母 `n` 或 `r`，而不是一个**真正的**转义字符。", "locale": "zh-CN"}}}
{"pid": "P7870", "type": "P", "difficulty": 3, "samples": [["6\n1 1 14\n2 5\n1 14 19\n1 1 9\n2 8\n2 10", "60\n44\n124\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "洛谷原创", "栈", "洛谷月赛"], "title": "「Wdoi-4」兔已着陆", "background": "铃瑚和清兰是从月之都到达幻想乡的两只月兔。正因为降落到了幻想乡进行调查，因此她们通过开团子屋制作团子出售的方式，在幻想乡生活。\n\n为了应对越发繁荣的市场，她们向河城荷取购置了一台团子机器，可以高效地生产出五颜六色的团子。不同颜色的团子的售价不尽相同。由于每天顾客数量很多，购买的团子数量也不少，所以清兰总是搞不清楚一大堆团子的售价如何。\n\n清兰找到了你，希望你能告诉她每次售出团子时，这些团子的总价格。", "description": "清兰使用河童的机器可以生产出各种各样颜色的团子。她发现，**对于颜色为** $\\bm c$ **的团子，它的售价为** $\\bm c$。同时，团子机器有个特性，那就是生产出来的团子的颜色必然是一段连续的整数。\n\n为了储存已经生产出来的团子，清兰使用了一种类似于「栈」的结构。在一天的开始，这个栈为空栈。现在有 $n$ 次操作，分为两种：\n\n1. $\\colorbox{f0f0f0}{\\verb!1 l r!}$ ：团子机器生产出来了颜色为 $l,l+1,\\cdots r-1,r$ 的团子。清兰将这些团子**依次**入栈。也就是在栈顶依次加入 $l,l+1,l+2,\\cdots r-1,r$ 。\n2. $\\colorbox{f0f0f0}{\\verb!2 k!}$ ：有一位客人想要购买 $k$ 个团子。此时清兰会**依次**从栈顶取出 $k$ 个团子并售出。保证 $k$ 不大于当前栈内的团子个数。\n\n你要做的，就是对于每个操作 $2$ 输出这些团子的总价格。", "inputFormat": "第一行有一个整数 $n$，表示操作的个数。  \n接下来 $n$ 行描述一组询问。第一个整数 $op$ 表示询问的种类，若为 $1$ 则为操作 $1$，为 $2$ 则为操作 $2$。\n\n- 对于操作 $1$，接下来有两个整数 $l,r$，含义如题面所示。\n- 对于操作 $2$，接下来有一个整数 $k$，含义如题面所示。", "outputFormat": "若干行。对于每次操作 $2$，输出这些团子的售价之和。", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{stack2.in}/\\textit{stack2.out}}$。\n\n---\n\n### 数据范围\n\n- 对于前 $30\\%$ 的数据，$n,l,r\\le100$。\n- 对于另外 $20\\%$ 的数据，$l=r$。\n- 对于另外 $20\\%$ 的数据，$k\\le 10$。\n- 对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^5$，$0\\le l\\le r \\le 10^6$，$1\\le k \\le 10^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-4」兔已着陆", "background": "铃瑚和清兰是从月之都到达幻想乡的两只月兔。正因为降落到了幻想乡进行调查，因此她们通过开团子屋制作团子出售的方式，在幻想乡生活。\n\n为了应对越发繁荣的市场，她们向河城荷取购置了一台团子机器，可以高效地生产出五颜六色的团子。不同颜色的团子的售价不尽相同。由于每天顾客数量很多，购买的团子数量也不少，所以清兰总是搞不清楚一大堆团子的售价如何。\n\n清兰找到了你，希望你能告诉她每次售出团子时，这些团子的总价格。", "description": "清兰使用河童的机器可以生产出各种各样颜色的团子。她发现，**对于颜色为** $\\bm c$ **的团子，它的售价为** $\\bm c$。同时，团子机器有个特性，那就是生产出来的团子的颜色必然是一段连续的整数。\n\n为了储存已经生产出来的团子，清兰使用了一种类似于「栈」的结构。在一天的开始，这个栈为空栈。现在有 $n$ 次操作，分为两种：\n\n1. $\\colorbox{f0f0f0}{\\verb!1 l r!}$ ：团子机器生产出来了颜色为 $l,l+1,\\cdots r-1,r$ 的团子。清兰将这些团子**依次**入栈。也就是在栈顶依次加入 $l,l+1,l+2,\\cdots r-1,r$ 。\n2. $\\colorbox{f0f0f0}{\\verb!2 k!}$ ：有一位客人想要购买 $k$ 个团子。此时清兰会**依次**从栈顶取出 $k$ 个团子并售出。保证 $k$ 不大于当前栈内的团子个数。\n\n你要做的，就是对于每个操作 $2$ 输出这些团子的总价格。", "inputFormat": "第一行有一个整数 $n$，表示操作的个数。  \n接下来 $n$ 行描述一组询问。第一个整数 $op$ 表示询问的种类，若为 $1$ 则为操作 $1$，为 $2$ 则为操作 $2$。\n\n- 对于操作 $1$，接下来有两个整数 $l,r$，含义如题面所示。\n- 对于操作 $2$，接下来有一个整数 $k$，含义如题面所示。", "outputFormat": "若干行。对于每次操作 $2$，输出这些团子的售价之和。", "hint": "样例 $2$ 见下发的附件 $\\textbf{\\textit{stack2.in}/\\textit{stack2.out}}$。\n\n---\n\n### 数据范围\n\n- 对于前 $30\\%$ 的数据，$n,l,r\\le100$。\n- 对于另外 $20\\%$ 的数据，$l=r$。\n- 对于另外 $20\\%$ 的数据，$k\\le 10$。\n- 对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^5$，$0\\le l\\le r \\le 10^6$，$1\\le k \\le 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P7871", "type": "P", "difficulty": 4, "samples": [["10 4\n1 2\n3 7\n8 10\n5 6", "1 4 8 3 7 2 6 10 5 9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2021", "洛谷原创", "差分", "洛谷月赛"], "title": "「Wdoi-4」芙兰？姆Q！贤者与谜题", "background": "题目背景不包含解题的关键信息，可以跳过。\n\n---\n\n芙兰朵露·斯卡蕾特是曾居住在红魔馆地下室的吸血鬼。与众不同的是，芙兰朵露有着彩色结晶的特殊翅膀，与其他吸血鬼蝙蝠一般的翅膀不同：颜色各异的结晶按照顺序一字排开。\n\n芙兰朵露翅膀的彩色结晶的颜色从内到外分别是天蓝、蓝、紫、粉、橙、黄、淡绿和天蓝。因此事实上，芙兰朵露的翅膀很可能就是帕秋莉的「贤者之石」组成的。\n\n但是芙兰朵露并不关心这些，她只关心排列成翅膀形状的贤者之石之间发生的能量流动——如果一块贤者之石被赋予了能量，就会处于激发态。处于激发态的贤者之石很不稳定——它大量能量的爆发会波及周围的贤者之石，以造成能量的转移。\n\n芙兰朵露非常感兴趣，并以此出了一个谜题来考考帕秋莉。但是作为贤者的帕秋莉不想思考只想摸鱼，于是任务就交给你啦！![](https://www.luogu.com.cn/paste/tkub6dq3)", "description": "芙兰朵露从帕秋莉那里搞来了 $n$ 块贤者之石，并从左往右排成了一列。帕秋莉可以赋予每块贤者之石一定的能级，这会决定贤者之石之间能量的传递。值得注意的是，**能级必须要是正整数，并且不能有两块贤者之石能级相同**。\n\n如果第 $i$ 块贤者之石被赋予了能量（处于激发态），它就会将能量传递给第 $i-1$ 和第 $i+1$ 块里**能级较小**的那一块。特别地，如果某块贤者之石周围只有一块，那么它只会向这一块发送能量。注意，即使第 $i$ 块的能级低于第 $i-1$ 和第 $i+1$ 块，它**照样可以传输能量**。\n\n现在芙兰有 $q$ 个条件——每个条件给定两个正整数 $s,t$，表示如果芙兰激活了第 $s$ 块贤者之石的能量，那么能量最终会经过第 $t$ 块。\n\n然而由于帕秋莉有哮喘的老毛病，设定贤者之石的能级是很费力的。因此，如果存在一种合法的赋予贤者之石能级的方案，请你找出其中**字典序最小**的那个方案。对于两种方案 $A,B$，我们称 $A$ 的字典序小于 $B$，当且仅当存在一个 $p$，使得 $\\forall i<p$ 有 $A_i=B_i$，且 $A_p<B_p$。 \n\n如果存在合法方案，请你输出字典序最小的方案；否则输出 `QED`。", "inputFormat": "第一行有两个整数 $n,q$，表示贤者之石的块数和芙兰的条件个数。  \n接下来 $q$ 行，每行有两个整数 $s_i,t_i$，描述一组条件。", "outputFormat": "若不存在合法方案，输出 `QED`；否则输出 $n$ 个整数，表示字典序最小的那个方案。", "hint": "输入/输出样例 $2$ 见下发的附件 $\\textbf{\\textit{qed2.in}/\\textit{qed2.out}}$。\n\n输入/输出样例 $3$ 见下发的附件 $\\textbf{\\textit{qed3.in}/\\textit{qed3.out}}$。\n\n---\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，$0\\le q \\le 3\\times 10^5$，$3\\le n \\le 3\\times 10^5$，$1\\le s_i,t_i \\le n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{测试点} & \\bm{n\\le} & \\bm{q\\le} & \\textbf{特殊限制} \\cr \\hline\n1\\sim 3 & 7 & 7 & - \\cr \\hline\n4\\sim6 & 100 & 100 & - \\cr \\hline\n7 & 10^5 & 1 & -\\cr \\hline\n8\\sim 10 & 3\\times 10^5 & 3\\times 10^5 & s_i\\le t_i \\cr \\hline\n11\\sim 12 & 10^5 & 10 & - \\cr \\hline\n13\\sim 20 & 3\\times 10^5 & 3\\times 10^5 & -\\cr \\hline\n\\end{array}$$\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-4」芙兰？姆Q！贤者与谜题", "background": "题目背景不包含解题的关键信息，可以跳过。\n\n---\n\n芙兰朵露·斯卡蕾特是曾居住在红魔馆地下室的吸血鬼。与众不同的是，芙兰朵露有着彩色结晶的特殊翅膀，与其他吸血鬼蝙蝠一般的翅膀不同：颜色各异的结晶按照顺序一字排开。\n\n芙兰朵露翅膀的彩色结晶的颜色从内到外分别是天蓝、蓝、紫、粉、橙、黄、淡绿和天蓝。因此事实上，芙兰朵露的翅膀很可能就是帕秋莉的「贤者之石」组成的。\n\n但是芙兰朵露并不关心这些，她只关心排列成翅膀形状的贤者之石之间发生的能量流动——如果一块贤者之石被赋予了能量，就会处于激发态。处于激发态的贤者之石很不稳定——它大量能量的爆发会波及周围的贤者之石，以造成能量的转移。\n\n芙兰朵露非常感兴趣，并以此出了一个谜题来考考帕秋莉。但是作为贤者的帕秋莉不想思考只想摸鱼，于是任务就交给你啦！![](https://www.luogu.com.cn/paste/tkub6dq3)", "description": "芙兰朵露从帕秋莉那里搞来了 $n$ 块贤者之石，并从左往右排成了一列。帕秋莉可以赋予每块贤者之石一定的能级，这会决定贤者之石之间能量的传递。值得注意的是，**能级必须要是正整数，并且不能有两块贤者之石能级相同**。\n\n如果第 $i$ 块贤者之石被赋予了能量（处于激发态），它就会将能量传递给第 $i-1$ 和第 $i+1$ 块里**能级较小**的那一块。特别地，如果某块贤者之石周围只有一块，那么它只会向这一块发送能量。注意，即使第 $i$ 块的能级低于第 $i-1$ 和第 $i+1$ 块，它**照样可以传输能量**。\n\n现在芙兰有 $q$ 个条件——每个条件给定两个正整数 $s,t$，表示如果芙兰激活了第 $s$ 块贤者之石的能量，那么能量最终会经过第 $t$ 块。\n\n然而由于帕秋莉有哮喘的老毛病，设定贤者之石的能级是很费力的。因此，如果存在一种合法的赋予贤者之石能级的方案，请你找出其中**字典序最小**的那个方案。对于两种方案 $A,B$，我们称 $A$ 的字典序小于 $B$，当且仅当存在一个 $p$，使得 $\\forall i<p$ 有 $A_i=B_i$，且 $A_p<B_p$。 \n\n如果存在合法方案，请你输出字典序最小的方案；否则输出 `QED`。", "inputFormat": "第一行有两个整数 $n,q$，表示贤者之石的块数和芙兰的条件个数。  \n接下来 $q$ 行，每行有两个整数 $s_i,t_i$，描述一组条件。", "outputFormat": "若不存在合法方案，输出 `QED`；否则输出 $n$ 个整数，表示字典序最小的那个方案。", "hint": "输入/输出样例 $2$ 见下发的附件 $\\textbf{\\textit{qed2.in}/\\textit{qed2.out}}$。\n\n输入/输出样例 $3$ 见下发的附件 $\\textbf{\\textit{qed3.in}/\\textit{qed3.out}}$。\n\n---\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，$0\\le q \\le 3\\times 10^5$，$3\\le n \\le 3\\times 10^5$，$1\\le s_i,t_i \\le n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|} \\hline\n\\textbf{测试点} & \\bm{n\\le} & \\bm{q\\le} & \\textbf{特殊限制} \\cr \\hline\n1\\sim 3 & 7 & 7 & - \\cr \\hline\n4\\sim6 & 100 & 100 & - \\cr \\hline\n7 & 10^5 & 1 & -\\cr \\hline\n8\\sim 10 & 3\\times 10^5 & 3\\times 10^5 & s_i\\le t_i \\cr \\hline\n11\\sim 12 & 10^5 & 10 & - \\cr \\hline\n13\\sim 20 & 3\\times 10^5 & 3\\times 10^5 & -\\cr \\hline\n\\end{array}$$\n", "locale": "zh-CN"}}}
{"pid": "P7872", "type": "P", "difficulty": 5, "samples": [["4 4\n0 4 5 3\n3 2 -1 2\n-1 3 -3 -1\n0 4 2 4\n3 3 4 4\n", "22\n"], ["8 8\n46 90 58 59 33 64 66 93\n52 25 91 51 96 11 21 6\n11 1 68 25 50 90 86 94\n73 83 48 80 46 46 81 16\n60 61 80 55 83 97 67 47\n78 96 59 96 39 7 94 66\n29 68 15 61 69 43 7 38\n31 29 67 79 71 17 0 97\n5 3 2 5\n", "509\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "2021", "洛谷原创", "洛谷月赛"], "title": "「Wdoi-4」觉姐姐和恋妹妹", "background": "古明地觉和古明地恋是居住在地灵殿的觉妖怪。古明地觉拥有读心程度的能力，但她的妹妹古明地恋却不具备读心能力。\n\n地灵殿是旧地狱上层的极为空旷的大型别墅建筑。正因如此，古明地恋经常在地灵殿里探索新奇好玩的东西。地灵殿可以被划分出好多好多的房间，每个房间里都有一个装饰物。在古明地恋眼里，每个装饰物都有一个新奇程度（特别地，新奇程度可能为负数，代表恋恋觉得这个物件非常枯燥无味）。\n\n喜欢闲逛的古明地恋，有一天想要探索整个地灵殿。作为姐姐的古明地觉，自然不希望恋恋会失望。也就是说，古明地觉可以通过搬运房间内的物件，移动到新的房间里，来提升恋恋整个游览过程的愉悦程度（即恋恋看到的所有物件的新奇程度之和）。\n\n然而，古明地觉向来是不擅长运动的，因此她不会走很长的路。你现在要做的，就是告诉古明地觉，经过她的清理后，恋恋最多可以获得的愉悦程度的最大值。", "description": "地灵殿可以看作有一个有 $n\\times m$ 间房间组成的矩阵，我们用 $(x,y)$ 描述一个房间的位置。其中，位于 $(i,j)$ 的房间里拥有的物件的新奇程度为 $w_{i,j}$，用一个整数表示（可能为负数）。古明地恋的愉悦度被定义为她看到的所有物件的新奇程度之和。\n\n打扫房间的古明地觉，将会从 $(1,1)$ 走到 $(x_s,y_s)$ 。期间，古明地觉**只能走到下侧或者右侧的房间**（假设古明地觉当前在 $(i,j)$，那么她下一步只能走到 $(i+1,j)$ 或者 $(i,j+1)$，并且她不会走出地灵殿）。古明地觉走到一个房间时，可以**捡起房间内的物件**放入背包；她也可以**从背包里取出任意若干件物件**放在该房间（可以既捡起物品又放置物品）。当然，古明地觉不希望带出地灵殿里的物件，因此**结束打扫时，觉的背包里应该没有物件**。初始时，背包为空。\n\n接下来，古明地恋将会从 $(1,1)$ 走到 $(x_k,y_k)$，进行自己的旅行。古明地恋将会看到一个房间里**所有的**物件，并且取得相应的新奇程度。和古明地觉相同，古明地恋**同样**只会向下侧或者右侧的房间行走。\n\n古明地觉想知道，按照这样的规则，恋恋最终得到的愉悦程度最大是多少。", "inputFormat": "第一行有两个正整数 $n,m$，描述地灵殿房间的规模。  \n接下来 $n$ 行，每行有 $m$ 个整数，其中第 $i$ 行第 $j$ 个整数 $w_{i,j}$ 描述房间 $(i,j)$ 内的物件的新奇程度。  \n接下来一行，输入四个正整数，依次为 $x_s,y_s,x_k,y_k$，意义同题目描述，代表觉与恋的终止位置。", "outputFormat": "输出一行，表示该组数据下古明地恋可以取得的最大愉悦程度。", "hint": "样例 $3$ 见下发的附件 $\\textbf{\\textit{koishi3.in}/\\textit{koishi3.out}}$。\n\n---\n\n### 样例解释\n\n#### 样例 1 解释\n\n- 古明地觉的行走路线是 $(1,1)\\to(2,1)\\to(2,2)\\to(2,3)\\to(3,3)$，**遇到**的物件的新奇程度分别是 $0,3,2,-1,-3$。期间，她把在 $(2,1)$ 拿起的价值为 $3$ 的物件放置在了 $(2,2)$。\n- 古明地恋的行走路线是 $(1,1)\\to(1,2)\\to(2,2)\\to(3,2)\\to(4,2)\\to(4,3)\\to(4,4)$，**看到**的物件的新奇程度分别是 $0,4,2+3,3,4,2,4$。加起来得到愉悦程度为 $22$。\n\n可以证明，不存在更优的方案。\n\n---\n\n### 数据范围及约定\n\n- 对于前 $10\\%$ 的数据，满足 $1\\le n,m\\le 3;|w_{i,j}|\\le 10$。\n- 对于前 $30\\%$ 的数据，满足 $1\\le n,m\\le 5;|w_{i,j}|\\le 10^2$。\n- 对于前 $60\\%$ 的数据，满足 $1\\le n,m\\le 70;|w_{i,j}|\\le 10^5$。\n- 另有 $15\\%$ 的数据，保证 $w_{i,j}$ 为**非负整数**。\n- 对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 300;|w_{i,j}|\\le 10^6$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-4」觉姐姐和恋妹妹", "background": "古明地觉和古明地恋是居住在地灵殿的觉妖怪。古明地觉拥有读心程度的能力，但她的妹妹古明地恋却不具备读心能力。\n\n地灵殿是旧地狱上层的极为空旷的大型别墅建筑。正因如此，古明地恋经常在地灵殿里探索新奇好玩的东西。地灵殿可以被划分出好多好多的房间，每个房间里都有一个装饰物。在古明地恋眼里，每个装饰物都有一个新奇程度（特别地，新奇程度可能为负数，代表恋恋觉得这个物件非常枯燥无味）。\n\n喜欢闲逛的古明地恋，有一天想要探索整个地灵殿。作为姐姐的古明地觉，自然不希望恋恋会失望。也就是说，古明地觉可以通过搬运房间内的物件，移动到新的房间里，来提升恋恋整个游览过程的愉悦程度（即恋恋看到的所有物件的新奇程度之和）。\n\n然而，古明地觉向来是不擅长运动的，因此她不会走很长的路。你现在要做的，就是告诉古明地觉，经过她的清理后，恋恋最多可以获得的愉悦程度的最大值。", "description": "地灵殿可以看作有一个有 $n\\times m$ 间房间组成的矩阵，我们用 $(x,y)$ 描述一个房间的位置。其中，位于 $(i,j)$ 的房间里拥有的物件的新奇程度为 $w_{i,j}$，用一个整数表示（可能为负数）。古明地恋的愉悦度被定义为她看到的所有物件的新奇程度之和。\n\n打扫房间的古明地觉，将会从 $(1,1)$ 走到 $(x_s,y_s)$ 。期间，古明地觉**只能走到下侧或者右侧的房间**（假设古明地觉当前在 $(i,j)$，那么她下一步只能走到 $(i+1,j)$ 或者 $(i,j+1)$，并且她不会走出地灵殿）。古明地觉走到一个房间时，可以**捡起房间内的物件**放入背包；她也可以**从背包里取出任意若干件物件**放在该房间（可以既捡起物品又放置物品）。当然，古明地觉不希望带出地灵殿里的物件，因此**结束打扫时，觉的背包里应该没有物件**。初始时，背包为空。\n\n接下来，古明地恋将会从 $(1,1)$ 走到 $(x_k,y_k)$，进行自己的旅行。古明地恋将会看到一个房间里**所有的**物件，并且取得相应的新奇程度。和古明地觉相同，古明地恋**同样**只会向下侧或者右侧的房间行走。\n\n古明地觉想知道，按照这样的规则，恋恋最终得到的愉悦程度最大是多少。", "inputFormat": "第一行有两个正整数 $n,m$，描述地灵殿房间的规模。  \n接下来 $n$ 行，每行有 $m$ 个整数，其中第 $i$ 行第 $j$ 个整数 $w_{i,j}$ 描述房间 $(i,j)$ 内的物件的新奇程度。  \n接下来一行，输入四个正整数，依次为 $x_s,y_s,x_k,y_k$，意义同题目描述，代表觉与恋的终止位置。", "outputFormat": "输出一行，表示该组数据下古明地恋可以取得的最大愉悦程度。", "hint": "样例 $3$ 见下发的附件 $\\textbf{\\textit{koishi3.in}/\\textit{koishi3.out}}$。\n\n---\n\n### 样例解释\n\n#### 样例 1 解释\n\n- 古明地觉的行走路线是 $(1,1)\\to(2,1)\\to(2,2)\\to(2,3)\\to(3,3)$，**遇到**的物件的新奇程度分别是 $0,3,2,-1,-3$。期间，她把在 $(2,1)$ 拿起的价值为 $3$ 的物件放置在了 $(2,2)$。\n- 古明地恋的行走路线是 $(1,1)\\to(1,2)\\to(2,2)\\to(3,2)\\to(4,2)\\to(4,3)\\to(4,4)$，**看到**的物件的新奇程度分别是 $0,4,2+3,3,4,2,4$。加起来得到愉悦程度为 $22$。\n\n可以证明，不存在更优的方案。\n\n---\n\n### 数据范围及约定\n\n- 对于前 $10\\%$ 的数据，满足 $1\\le n,m\\le 3;|w_{i,j}|\\le 10$。\n- 对于前 $30\\%$ 的数据，满足 $1\\le n,m\\le 5;|w_{i,j}|\\le 10^2$。\n- 对于前 $60\\%$ 的数据，满足 $1\\le n,m\\le 70;|w_{i,j}|\\le 10^5$。\n- 另有 $15\\%$ 的数据，保证 $w_{i,j}$ 为**非负整数**。\n- 对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 300;|w_{i,j}|\\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P7873", "type": "P", "difficulty": 2, "samples": [["0\n4\n5 3\n1 10\n17 1\n2 7", "YES\n100 99 97\n98 100 99\n95 97 100\n0 98 100\n99 99 99\nYES\n1 2 3 4 5 6 7 8 9 10\nNO\nYES\n95 99 76 88 87 51 49\n72 100 80 92 100 60 60"]], "limits": {"time": [200, 200, 200, 200, 200, 200], "memory": [16384, 16384, 16384, 16384, 16384, 16384]}, "tags": ["模拟", "2021", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「SWTR-7」Scores（easy version）", "background": "#### 本题是 Scores 的 easy 版本。注意题目限制与 [hard](https://www.luogu.com.cn/problem/P7876) 版本不同。\n\n#### 请注意特殊的时空限制，题目描述下方有简化题意。", "description": "小 A 的班上有 $n$ 个学生。最近他们进行了一场考试，共有 $m$ 个学科。第 $i$ 个学生第 $j$ 门学科的得分为**整数** $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。对于学生 $i$，如果**存在另一个**学生 $j$ 满足：学生 $i$ **每门学科的成绩都不大于**学生 $j$，学生 $i$ 就会感到失落。\n\n中秋节快到了，善良的小 A 不想让任何一个同学感到失落，他决定 hack 学校的管理系统，修改每一位同学的成绩。在做出这样危险的举动之前，小 A 希望知道自己能否达到目标。不过，由于学生和科目实在太多，他想请你帮助他构造出一种合法的方案。\n\n如果存在一张成绩表，满足没有任何一位同学感到失落，请先输出 $\\texttt{YES}$，再**任意**输出一种符合要求的成绩表；否则输出 $\\texttt{NO}$。\n\n---\n\n**「简化题意」**\n\n试构造一个 $n\\times m$ 的矩阵 $s$，满足所有元素为 $[0,100]$ 之间的整数，且对于任意 $i,j\\ (i\\neq j)$ 存在一个 $k$ 使得 $s_{i,k}>s_{j,k}$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，**表示该测试点编号**。  \n第二行一个整数 $T$，**表示数据组数**。\n\n对于每组数据：  \n一行两个整数 $n,m$。", "outputFormat": "对于每组数据：\n\n如果小 A 的要求无法实现，输出一行字符串 $\\texttt{NO}$。  \n否则先输出一行字符串 $\\texttt{YES}$，再输出 $n$ 行，每行 $m$ 个由空格隔开的整数，第 $i+1$ 行第 $j$ 个数表示 $s_{i,j}$。", "hint": "**「Special Judge」**\n\n**本题使用 Special Judge。请认真阅读输出格式，输出格式有误可能导致 UKE。**\n\nSPJ 首先会判断你的第一行输出是否与答案相同。  \n如果相同且答案为 $\\texttt{YES}$，则 SPJ 会判断你的输出是否符合小 A 的要求：\n\n- $0\\leq s_{i,j}\\leq 100$ 且 $s_{i,j}$ 为整数。\n- 每个学生至少有一个科目的成绩比另一个学生高。\n\n如果有解且你输出 $\\texttt{YES}$，但给出方案错误，你将获得该测试点 $50\\%$ 的分数。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（10 points）：$n=1$。\n- Testcase #2（10 points）：$m=1$。\n- Testcase #3（20 points）：$m=2$。\n- Testcase #4（30 points）：$n\\leq m$。\n- Testcase #5（29 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 100$，$T=20$（除 Testcase #0）。  \n对于所有测试点，**时间限制 200ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51774) A1。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」Scores（easy version）", "background": "#### 本题是 Scores 的 easy 版本。注意题目限制与 [hard](https://www.luogu.com.cn/problem/P7876) 版本不同。\n\n#### 请注意特殊的时空限制，题目描述下方有简化题意。", "description": "小 A 的班上有 $n$ 个学生。最近他们进行了一场考试，共有 $m$ 个学科。第 $i$ 个学生第 $j$ 门学科的得分为**整数** $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。对于学生 $i$，如果**存在另一个**学生 $j$ 满足：学生 $i$ **每门学科的成绩都不大于**学生 $j$，学生 $i$ 就会感到失落。\n\n中秋节快到了，善良的小 A 不想让任何一个同学感到失落，他决定 hack 学校的管理系统，修改每一位同学的成绩。在做出这样危险的举动之前，小 A 希望知道自己能否达到目标。不过，由于学生和科目实在太多，他想请你帮助他构造出一种合法的方案。\n\n如果存在一张成绩表，满足没有任何一位同学感到失落，请先输出 $\\texttt{YES}$，再**任意**输出一种符合要求的成绩表；否则输出 $\\texttt{NO}$。\n\n---\n\n**「简化题意」**\n\n试构造一个 $n\\times m$ 的矩阵 $s$，满足所有元素为 $[0,100]$ 之间的整数，且对于任意 $i,j\\ (i\\neq j)$ 存在一个 $k$ 使得 $s_{i,k}>s_{j,k}$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，**表示该测试点编号**。  \n第二行一个整数 $T$，**表示数据组数**。\n\n对于每组数据：  \n一行两个整数 $n,m$。", "outputFormat": "对于每组数据：\n\n如果小 A 的要求无法实现，输出一行字符串 $\\texttt{NO}$。  \n否则先输出一行字符串 $\\texttt{YES}$，再输出 $n$ 行，每行 $m$ 个由空格隔开的整数，第 $i+1$ 行第 $j$ 个数表示 $s_{i,j}$。", "hint": "**「Special Judge」**\n\n**本题使用 Special Judge。请认真阅读输出格式，输出格式有误可能导致 UKE。**\n\nSPJ 首先会判断你的第一行输出是否与答案相同。  \n如果相同且答案为 $\\texttt{YES}$，则 SPJ 会判断你的输出是否符合小 A 的要求：\n\n- $0\\leq s_{i,j}\\leq 100$ 且 $s_{i,j}$ 为整数。\n- 每个学生至少有一个科目的成绩比另一个学生高。\n\n如果有解且你输出 $\\texttt{YES}$，但给出方案错误，你将获得该测试点 $50\\%$ 的分数。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（10 points）：$n=1$。\n- Testcase #2（10 points）：$m=1$。\n- Testcase #3（20 points）：$m=2$。\n- Testcase #4（30 points）：$n\\leq m$。\n- Testcase #5（29 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 100$，$T=20$（除 Testcase #0）。  \n对于所有测试点，**时间限制 200ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51774) A1。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN"}}}
{"pid": "P7874", "type": "P", "difficulty": 3, "samples": [["0\n3\n4 2\n1 1 3 2\n8 3\n1 3 2 8 6 4 7 5\n40 10\n9843011 22841896 42690334 3412396 8420789 100693326 23390709 11537210 145661796 21418321 16914724 146120903 14287416 9157773 259599687 16469809 13371424 221660485 23554750 3004543 19382066 514113557 959488450 162305801 377127750 240963428 597774302 18789772 647693870 517468301 547221960 162988230 309004668 267293109 867629494 476230153 70400563 100943563 140708197 999999999\n", "2\n12\n5684074840"]], "limits": {"time": [200, 200, 200, 200, 200, 200], "memory": [16384, 16384, 16384, 16384, 16384, 16384]}, "tags": ["O2优化", "洛谷月赛"], "title": "「SWTR-7」My rating is -32（easy version）", "background": "#### 本题是 My rating is ... 的 easy 版本。注意题目限制和数据范围与 [hard](https://www.luogu.com.cn/problem/P7878) 版本不同。\n\n#### 请注意特殊的时空限制，题目描述下方有简化题意。\n\n[My rating is -32.](https://codeforces.com/blog/entry/71123)\n\n说明：上方的帖子是机房里某个同学很久很久以前的黑历史，现在成了机房传世经典，不是为了出比赛才发的，请不要误会。", "description": "小 A 想在 Codeforces 上发 $n$ 篇帖子！例如：\n\n> “My rating is 1064.”\n>\n> “I am PolarSea.”\n>\n> “你知道 phi 吗？你知道你的 phi 处是哪里吗？你知道它的 price 吗？1e9 + 7。”\n>\n>“每道题都很简单，全场虐题不用烦。T1 到场先签到，T2 上手随便切，T3 一交就能过，T4 稍想也能 A。DP 转移很容易，数学结论尽皆知。建图方法极明显，数据结构很一般。不卡空间不卡常，码量不大手不酸。没有毒瘤大模拟，只有良多大水题。片刻四题提交过，人人 AK 笑开颜。”\n>\n> “……”\n\n为此，小 A 新注册了 $k$ 个账号。他决定**按照从 $1$ 到 $n$ 的顺序**发出每篇帖子，并**用到所有 $k$ 个账号**。不过刷屏过多会引起 Mike 的注意并被封号，小 A 当然不希望这样：他进行了一些评估，得到了每篇帖子的安全指数 $a_i$，表示他发出第 $i$ 篇帖子后不被封号的概率。\n\n由于第一印象非常重要，小 A 定义一个账号的安全指数为该账号所发出的**第一篇**帖子的安全指数。此外，如果**用同一个账号连续发出两个帖子**，Mike 会立刻封掉这个账号，因此这种情况**是不合法的**。\n\n小 A 希望找到这样一个发帖方案，使得所有账号的安全指数之和最大。你只需要求出安全指数之和的最大值即可。\n\n---\n\n**「简化题意」**\n\n将 $1\\sim n$ **不重不漏**地分进 $k$ 个集合 $S_1,S_2,\\cdots,S_k$ 中，满足**相邻的数不在同一集合** 且 $|S_i|>0$。求 \n\n$$\\sum_{i=1}^k a[{\\min_{j\\in S_i}j}]$$\n\n的最大值，其中 $[]$ 表示**下标**。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，表示该测试点编号。  \n第二行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n,k$。  \n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个帖子的安全指数。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "**「样例 1 说明」**\n\n小 A 只能使用账号 $1$ 发帖子 $1$ 和 $3$，剩下的帖子用账号 $2$ 发。其安全程度为 $a_{\\min(1,3)}+a_{\\min(2,4)}=2$。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 points）：是样例。\n- Testcase #1（10 points）：$k=2$。\n- Testcase #2（30 points）：$n\\leq 10$，$k\\leq 4$。\n- Testcase #3（15 points）：$k=3$。\n- Testcase #4（20 points）：$n\\leq 64$，$k\\leq 7$。\n- Testcase #5（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\leq k \\leq n \\leq 10^4$，$0 \\leq a_i \\leq 10^9$，$T=10$。  \n对于所有测试点，**时间限制 200ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/) B1。  \nidea & solution：[tzc_wk](https://www.luogu.com.cn/user/115194)；data & 验题：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n\n> **My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. ……**\n>\n> **Upvote&emsp;-43&emsp;Downvote&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;PolarSea**  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」My rating is -32（easy version）", "background": "#### 本题是 My rating is ... 的 easy 版本。注意题目限制和数据范围与 [hard](https://www.luogu.com.cn/problem/P7878) 版本不同。\n\n#### 请注意特殊的时空限制，题目描述下方有简化题意。\n\n[My rating is -32.](https://codeforces.com/blog/entry/71123)\n\n说明：上方的帖子是机房里某个同学很久很久以前的黑历史，现在成了机房传世经典，不是为了出比赛才发的，请不要误会。", "description": "小 A 想在 Codeforces 上发 $n$ 篇帖子！例如：\n\n> “My rating is 1064.”\n>\n> “I am PolarSea.”\n>\n> “你知道 phi 吗？你知道你的 phi 处是哪里吗？你知道它的 price 吗？1e9 + 7。”\n>\n>“每道题都很简单，全场虐题不用烦。T1 到场先签到，T2 上手随便切，T3 一交就能过，T4 稍想也能 A。DP 转移很容易，数学结论尽皆知。建图方法极明显，数据结构很一般。不卡空间不卡常，码量不大手不酸。没有毒瘤大模拟，只有良多大水题。片刻四题提交过，人人 AK 笑开颜。”\n>\n> “……”\n\n为此，小 A 新注册了 $k$ 个账号。他决定**按照从 $1$ 到 $n$ 的顺序**发出每篇帖子，并**用到所有 $k$ 个账号**。不过刷屏过多会引起 Mike 的注意并被封号，小 A 当然不希望这样：他进行了一些评估，得到了每篇帖子的安全指数 $a_i$，表示他发出第 $i$ 篇帖子后不被封号的概率。\n\n由于第一印象非常重要，小 A 定义一个账号的安全指数为该账号所发出的**第一篇**帖子的安全指数。此外，如果**用同一个账号连续发出两个帖子**，Mike 会立刻封掉这个账号，因此这种情况**是不合法的**。\n\n小 A 希望找到这样一个发帖方案，使得所有账号的安全指数之和最大。你只需要求出安全指数之和的最大值即可。\n\n---\n\n**「简化题意」**\n\n将 $1\\sim n$ **不重不漏**地分进 $k$ 个集合 $S_1,S_2,\\cdots,S_k$ 中，满足**相邻的数不在同一集合** 且 $|S_i|>0$。求 \n\n$$\\sum_{i=1}^k a[{\\min_{j\\in S_i}j}]$$\n\n的最大值，其中 $[]$ 表示**下标**。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，表示该测试点编号。  \n第二行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n,k$。  \n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个帖子的安全指数。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "**「样例 1 说明」**\n\n小 A 只能使用账号 $1$ 发帖子 $1$ 和 $3$，剩下的帖子用账号 $2$ 发。其安全程度为 $a_{\\min(1,3)}+a_{\\min(2,4)}=2$。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 points）：是样例。\n- Testcase #1（10 points）：$k=2$。\n- Testcase #2（30 points）：$n\\leq 10$，$k\\leq 4$。\n- Testcase #3（15 points）：$k=3$。\n- Testcase #4（20 points）：$n\\leq 64$，$k\\leq 7$。\n- Testcase #5（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\leq k \\leq n \\leq 10^4$，$0 \\leq a_i \\leq 10^9$，$T=10$。  \n对于所有测试点，**时间限制 200ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/) B1。  \nidea & solution：[tzc_wk](https://www.luogu.com.cn/user/115194)；data & 验题：[Alex_Wei](https://www.luogu.com.cn/user/123294)。\n\n> **My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. ……**\n>\n> **Upvote&emsp;-43&emsp;Downvote&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;PolarSea**  ", "locale": "zh-CN"}}}
{"pid": "P7875", "type": "P", "difficulty": 4, "samples": [["0\n5 2\n2 3 5 7 8\n1 5 3\n2 4 2\n", "499122189"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "概率论", "期望", "洛谷月赛"], "title": "「SWTR-7」IOI 2077", "background": "#### 友情提醒：本题输入输出量很大，请不要使用 cin 或 scanf。题目最下方附有快读及其使用方法。\n\n#### 赛时提醒：若对于选出的 $m$ 无解，则期望值为 $0$。可以结合样例 2 的解释说明以更好理解。\n\n#### 赛时提醒：你需要求的是能力值之和的期望而不是最大值。\n\n---\n\n小 A 被 FCC 钦定参加 IOI 2077！71 岁老将请求出战！", "description": "IOI 2077 有 $n$ 位**候选**参赛者，他们分别编号为 $1\\sim n$。每位候选参赛者都有一个能力值，且**能力值互不相等**，第 $i$ 位候选参赛者的能力值为 $a_i$。小 A 更喜欢有序的数字，所以他将这 $n$ 位候选参赛者按照能力值**从小到大**排好了序，即**满足 $a_i<a_{i+1}\\ (1\\leq i<n)$。**\n\n正式参赛者将会从这 $n$ 位候选参赛者中产生。具体地，所有参赛者将是候选参赛者的一个子串 $[l,r]$，即编号为 $l,l+1,\\cdots,r$ 的选手将参加 IOI 2077，其中，小 A 的编号为 $k$。因为他知道自己被钦定参加 IOI 2077，所以 $l\\leq k\\leq r$。可能的参赛者一共有 $q$ 种情况，每种情况用三个数 $l_i,r_i,k_i\\ (l_i\\leq k_i\\leq r_i)$ 描述，即参赛者为编号在区间 $[l_i,r_i]$ 中的候选参赛者，而小 A 的编号为 $k_i$。\n\n由于自己太菜，小 A 对即将到来的 IOI 感到力不从心。他决定选择一些参赛者作为队友，并与他们在赛场上相互帮（zuo）助（bi）。具体地，设正式参赛人数为 $s$，那么小 A 会在 $[0,\\lfloor\\frac{s-1}{2}\\rfloor]$ 中**等概率随机**选择一个数 $m$，并从 $s$ 位参赛者中**随机**选出 $2m$ 个作为他的队友。不过，小 A 不希望自己显得太菜，所以**他的能力值 $a_k$ 必须是这 $2m+1$ 个人的能力值的中位数**。\n\n俗话说，人多力量大，小 A 希望他与所有选出的队友的能力值之和尽量地大。**不过在此之前，他想知道这个值的期望值是多少**。请对 $998244353$ 取模，保证答案在该模数下有意义。**对于每一种可能的参赛者情况，你都需计算该情况下的答案。为了避免过大的输出，你只需要计算所有答案的异或和。**", "inputFormat": "第一行一个整数 $t$，**表示该测试点 Subtask 编号。**  \n第二行两个整数 $n,q$，分别表示候选参赛者个数和情况总数。  \n第三行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个候选参赛者的能力值。**保证 $a_i$ 递增。**  \n接下来 $q$ 行，每行三个整数 $l_i,r_i,k_i$ 描述一个可能的参赛者情况。", "outputFormat": "输出一行一个整数，表示所有答案的异或和。", "hint": "**「样例 1 说明」**\n\n- 第 1 个询问：  \n  因为 $s_1=r_1-l_1+1=5$，所以 $m$ 可以为 $0,1$ 或 $2$。  \n  $m=0$ 时：小 A 没有队友，那么期望值就是他自身的能力值 $a_{k_1}=a_3=5$。    \n  $m=1$ 时：小 A 可以选**编号** $(1, 4)$ 或 $(1, 5)$ 或 $(2, 4)$ 或 $(2, 5)$ 的参赛者作为他的队友，能力值之和分别为 $14,15,15,16$，期望值为 $\\frac{14+15+15+16}{4}=15$。    \n  $m=2$ 时：小 A 只能全选，期望值为 $2+3+5+7+8=25$。  \n\t综上，期望值为 $\\frac{5+15+25}{3}=15$。\n\n- 第 2 个询问：  \n  因为 $s_2=r_2-l_2+1=3$，所以 $m$ 可以为 $0$ 或 $1$。  \n  $m=0$ 时，小 A 没有队友，期望值为 $3$。    \n  $m=1$ 时，小 A 无法选择，期望值为 $0$。  \n  综上，期望值为 $\\frac{3+0}{2}=\\frac{3}{2}$，对 $998244353$ 取模后为 $499122178$。\n  \n$15\\oplus499122178=499122189$。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n记 $s_i=r_i-l_i+1$。\n\n- Subtask #0（1 point）：是样例。\n- Subtask #1（10 points）：$s_i\\leq 2$。\n- Subtask #2（20 points）：$s_i\\leq 16$，$q\\leq 40$，$n\\leq 640$。\n- Subtask #3（15 points）：$s_i,q\\leq 500$，$n\\leq 10^5$。\n- Subtask #4（15 points）：$s_i,q\\leq 3\\times 10^3$，$n\\leq 10^5$。\n- Subtask #5（15 points）：$s_i,q\\leq 2\\times 10^5$，$n\\leq 5\\times 10^5$。\n- Subtask #6（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,q\\leq 2\\times 10^6$，$1\\leq l_i\\leq k_i\\leq r_i\\leq n$，$1 \\le a_i \\le 998244352$，$a_i<a_{i+1}\\ (1\\leq i<n)$。\n\n对于所有测试点，时间限制 1s，空间限制 512MB。\n\n**「帮助/提示」**\n\n关于 [有理数取余](https://www.luogu.com.cn/problem/P2613)，[中位数](https://baike.baidu.com/item/%E4%B8%AD%E4%BD%8D%E6%95%B0/3087401?fr=aladdin)。\n\n本题输入输出量**极大**，**请注意 I/O 优化。**  \n本题提供**有符号 32 位整数**快读模板，保证读入用时不超过 250ms：\n\n```cpp\n#define gc getchar()\ninline int read(){\n\tint x=0; bool sgn=0; char s=gc;\n\twhile(!isdigit(s))sgn|=s=='-',s=gc;\n\twhile(isdigit(s))x=(x<<1)+(x<<3)+(s-'0'),s=gc;\n\treturn sgn?-x:x;\n}\n\n// 如果需要读入直接调用 read() 即可。\n// 一个例子（与正解无关，仅供参考）：\n\nint t=read(),n=read(),q=read();\nint a[2000005],l[2000005],r[2000005],k[2000005];\nfor(int i=1;i<=n;i++)a[i]=read();\nfor(int i=1;i<=q;i++)l[i]=read(),r[i]=read(),k[i]=read();\n\n// 这样你就可以在 250ms 内读入全部数据了。\n```\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) C。  \nidea & solution：[SSerWarriors_Cat](https://www.luogu.com.cn/user/147999)；data：[Alex_Wei](https://www.luogu.com.cn/user/123294) ；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n---\n\nIOI 2077 落下帷幕，小 A 凭借出（dui）色（you）的发（bang）挥（zhu）成功 AK 了 IOI，这不禁让他回想起曾经满腔热血的自己，以及和他共同奋斗在 OI 路上的战友们。如今他们虽已天各一方，说起来也有十几年没见过面了，但他们真挚的友谊未曾淡去，也将永远不会褪色。\n\n>*“爷爷，您手机里有段录音，还写着 'ycx txdy!'。”*  \n>*“哦，是嘛？放出来听听。”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you are vegetable chickens.”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you are vegetable chickens.”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you ............”*\n\n2077.7.7", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」IOI 2077", "background": "#### 友情提醒：本题输入输出量很大，请不要使用 cin 或 scanf。题目最下方附有快读及其使用方法。\n\n#### 赛时提醒：若对于选出的 $m$ 无解，则期望值为 $0$。可以结合样例 2 的解释说明以更好理解。\n\n#### 赛时提醒：你需要求的是能力值之和的期望而不是最大值。\n\n---\n\n小 A 被 FCC 钦定参加 IOI 2077！71 岁老将请求出战！", "description": "IOI 2077 有 $n$ 位**候选**参赛者，他们分别编号为 $1\\sim n$。每位候选参赛者都有一个能力值，且**能力值互不相等**，第 $i$ 位候选参赛者的能力值为 $a_i$。小 A 更喜欢有序的数字，所以他将这 $n$ 位候选参赛者按照能力值**从小到大**排好了序，即**满足 $a_i<a_{i+1}\\ (1\\leq i<n)$。**\n\n正式参赛者将会从这 $n$ 位候选参赛者中产生。具体地，所有参赛者将是候选参赛者的一个子串 $[l,r]$，即编号为 $l,l+1,\\cdots,r$ 的选手将参加 IOI 2077，其中，小 A 的编号为 $k$。因为他知道自己被钦定参加 IOI 2077，所以 $l\\leq k\\leq r$。可能的参赛者一共有 $q$ 种情况，每种情况用三个数 $l_i,r_i,k_i\\ (l_i\\leq k_i\\leq r_i)$ 描述，即参赛者为编号在区间 $[l_i,r_i]$ 中的候选参赛者，而小 A 的编号为 $k_i$。\n\n由于自己太菜，小 A 对即将到来的 IOI 感到力不从心。他决定选择一些参赛者作为队友，并与他们在赛场上相互帮（zuo）助（bi）。具体地，设正式参赛人数为 $s$，那么小 A 会在 $[0,\\lfloor\\frac{s-1}{2}\\rfloor]$ 中**等概率随机**选择一个数 $m$，并从 $s$ 位参赛者中**随机**选出 $2m$ 个作为他的队友。不过，小 A 不希望自己显得太菜，所以**他的能力值 $a_k$ 必须是这 $2m+1$ 个人的能力值的中位数**。\n\n俗话说，人多力量大，小 A 希望他与所有选出的队友的能力值之和尽量地大。**不过在此之前，他想知道这个值的期望值是多少**。请对 $998244353$ 取模，保证答案在该模数下有意义。**对于每一种可能的参赛者情况，你都需计算该情况下的答案。为了避免过大的输出，你只需要计算所有答案的异或和。**", "inputFormat": "第一行一个整数 $t$，**表示该测试点 Subtask 编号。**  \n第二行两个整数 $n,q$，分别表示候选参赛者个数和情况总数。  \n第三行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个候选参赛者的能力值。**保证 $a_i$ 递增。**  \n接下来 $q$ 行，每行三个整数 $l_i,r_i,k_i$ 描述一个可能的参赛者情况。", "outputFormat": "输出一行一个整数，表示所有答案的异或和。", "hint": "**「样例 1 说明」**\n\n- 第 1 个询问：  \n  因为 $s_1=r_1-l_1+1=5$，所以 $m$ 可以为 $0,1$ 或 $2$。  \n  $m=0$ 时：小 A 没有队友，那么期望值就是他自身的能力值 $a_{k_1}=a_3=5$。    \n  $m=1$ 时：小 A 可以选**编号** $(1, 4)$ 或 $(1, 5)$ 或 $(2, 4)$ 或 $(2, 5)$ 的参赛者作为他的队友，能力值之和分别为 $14,15,15,16$，期望值为 $\\frac{14+15+15+16}{4}=15$。    \n  $m=2$ 时：小 A 只能全选，期望值为 $2+3+5+7+8=25$。  \n\t综上，期望值为 $\\frac{5+15+25}{3}=15$。\n\n- 第 2 个询问：  \n  因为 $s_2=r_2-l_2+1=3$，所以 $m$ 可以为 $0$ 或 $1$。  \n  $m=0$ 时，小 A 没有队友，期望值为 $3$。    \n  $m=1$ 时，小 A 无法选择，期望值为 $0$。  \n  综上，期望值为 $\\frac{3+0}{2}=\\frac{3}{2}$，对 $998244353$ 取模后为 $499122178$。\n  \n$15\\oplus499122178=499122189$。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n记 $s_i=r_i-l_i+1$。\n\n- Subtask #0（1 point）：是样例。\n- Subtask #1（10 points）：$s_i\\leq 2$。\n- Subtask #2（20 points）：$s_i\\leq 16$，$q\\leq 40$，$n\\leq 640$。\n- Subtask #3（15 points）：$s_i,q\\leq 500$，$n\\leq 10^5$。\n- Subtask #4（15 points）：$s_i,q\\leq 3\\times 10^3$，$n\\leq 10^5$。\n- Subtask #5（15 points）：$s_i,q\\leq 2\\times 10^5$，$n\\leq 5\\times 10^5$。\n- Subtask #6（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,q\\leq 2\\times 10^6$，$1\\leq l_i\\leq k_i\\leq r_i\\leq n$，$1 \\le a_i \\le 998244352$，$a_i<a_{i+1}\\ (1\\leq i<n)$。\n\n对于所有测试点，时间限制 1s，空间限制 512MB。\n\n**「帮助/提示」**\n\n关于 [有理数取余](https://www.luogu.com.cn/problem/P2613)，[中位数](https://baike.baidu.com/item/%E4%B8%AD%E4%BD%8D%E6%95%B0/3087401?fr=aladdin)。\n\n本题输入输出量**极大**，**请注意 I/O 优化。**  \n本题提供**有符号 32 位整数**快读模板，保证读入用时不超过 250ms：\n\n```cpp\n#define gc getchar()\ninline int read(){\n\tint x=0; bool sgn=0; char s=gc;\n\twhile(!isdigit(s))sgn|=s=='-',s=gc;\n\twhile(isdigit(s))x=(x<<1)+(x<<3)+(s-'0'),s=gc;\n\treturn sgn?-x:x;\n}\n\n// 如果需要读入直接调用 read() 即可。\n// 一个例子（与正解无关，仅供参考）：\n\nint t=read(),n=read(),q=read();\nint a[2000005],l[2000005],r[2000005],k[2000005];\nfor(int i=1;i<=n;i++)a[i]=read();\nfor(int i=1;i<=q;i++)l[i]=read(),r[i]=read(),k[i]=read();\n\n// 这样你就可以在 250ms 内读入全部数据了。\n```\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) C。  \nidea & solution：[SSerWarriors_Cat](https://www.luogu.com.cn/user/147999)；data：[Alex_Wei](https://www.luogu.com.cn/user/123294) ；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n---\n\nIOI 2077 落下帷幕，小 A 凭借出（dui）色（you）的发（bang）挥（zhu）成功 AK 了 IOI，这不禁让他回想起曾经满腔热血的自己，以及和他共同奋斗在 OI 路上的战友们。如今他们虽已天各一方，说起来也有十几年没见过面了，但他们真挚的友谊未曾淡去，也将永远不会褪色。\n\n>*“爷爷，您手机里有段录音，还写着 'ycx txdy!'。”*  \n>*“哦，是嘛？放出来听听。”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you are vegetable chickens.”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you are vegetable chickens.”*  \n>>*“I AK IOI. I AK ACM World Final. I AK Universe OI. I think all of you ............”*\n\n2077.7.7", "locale": "zh-CN"}}}
{"pid": "P7876", "type": "P", "difficulty": 5, "samples": [["0\n5\n5 3\n0 1 1 1 1\n1 0 1 1 1\n1 1 0 1 1\n1 1 1 0 1\n1 1 1 1 0\n2 7\n0 1\n0 0\n5 4\n0 1 1 0 1\n0 0 0 0 1\n0 1 0 0 1\n1 1 1 0 1\n1 1 1 1 0\n3 1\n0 1 1\n1 0 1\n1 1 0\n3 2\n0 1 0\n0 0 1\n1 0 0", "YES\n100 99 97\n98 100 99\n95 97 100\n0 98 100\n99 99 99\nYES\n98 100 94 98 72 53 53\n97 99 93 97 71 52 52\nYES\n90 80 70 60\n50 40 30 20\n60 50 40 30\n100 90 80 70\n40 60 80 100\nNO\nNO"]], "limits": {"time": [500, 500, 500, 500, 500, 500], "memory": [16384, 16384, 16384, 16384, 16384, 16384]}, "tags": ["模拟", "2021", "Special Judge", "O2优化", "图论建模", "图遍历", "构造", "洛谷月赛"], "title": "「SWTR-7」Scores（hard version）", "background": "#### 本题是 Scores 的 hard 版本。注意题目限制与 [easy](https://www.luogu.com.cn/problem/P7873) 版本不同。\n\n#### 请注意特殊的时空限制。", "description": "小 A 的班上有 $n$ 个学生。最近他们进行了一场考试，共有 $m$ 个学科。第 $i$ 个学生第 $j$ 门学科的得分为**整数** $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。\n\n同学们很重视自己在班上的排名，所以他们经常会比较自己和别的同学的分数。如果一个学生 $i$ **至少有一门学科**的分数比 $j$ **高**，ta 就会觉得自己不比 $j$ 差；相反，如果 ta **每门学科**的分数都比 $j$ **低**，ta 就会觉得自己被 $j$ 吊打了。\n\n实际上，**上述两种情况并不是严格意义上相反的**。但是喜好八卦的小 A 打听到了每两个同学之间的分数情况，他惊讶地发现：**一个同学 $i$ 要么被 $j$ 吊打，要么不比 $j$ 差。** 同时，**如果 $i,j$ 被同一个人吊打，或同时吊打同一个人，则他们之间也有一方被另一方吊打**。我们用一个矩阵 $a_{i,j}\\ (i\\neq j)$ 来描述小 A 知道的同学们之间的分数关系：$a_{i,j}=0$ 表示 $i$ 被 $j$ 吊打；$a_{i,j}=1$ 表示 $i$ 不比 $j$ 差。\n\n小 A 想知道这种情况会不会发生，即是否存在这样一张 $n\\times m$ 的成绩表 $s$ 满足矩阵 $a$ 所描述的分数关系，从而确定有没有撒谎的同学。如果存在 $s$，请先输出 $\\texttt{YES}$，再**任意**输出一种符合要求的成绩表；否则输出 $\\texttt{NO}$。\n\n注意：这里所求的 $s$ 所需满足的条件是 $a$ 的限制，而**不只是**小 A 所发现的性质，因为**他发现的性质已经在给出的 $a$ 中体现**。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，**表示该测试点编号**。  \n第二行一个整数 $T$，**表示数据组数**。\n\n对于每组数据：  \n第一行两个整数 $n,m$。  \n接下来 $n$ 行，每行 $n$ 个由空格隔开的 0 或 1 描述 $a$。第 $i+1$ 行第 $j$ 个数表示 $a_{i,j}$。\n\n特别的，为了方便读入，**规定 $a_{i,i}=0$**。但你需要知道**它没有任何实际意义**。", "outputFormat": "对于每组数据：\n\n如果不存在满足条件的 $s$，输出一行字符串 $\\texttt{NO}$。  \n否则先输出一行字符串 $\\texttt{YES}$，再输出 $n$ 行，每行 $m$ 个由空格隔开的整数，第 $i+1$ 行第 $j$ 个数表示 $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。", "hint": "**「Special Judge」**\n\n**本题使用 Special Judge。请认真阅读输出格式，输出格式有误可能导致 UKE 或 WA。**\n\nSPJ 首先会判断你的第一行输出是否与答案相同。  \n如果相同且答案为 $\\texttt{YES}$，则 SPJ 会判断你的输出是否符合所有限制。  \n如果有解且你输出 $\\texttt{YES}$，但给出方案错误，你将获得该测试点 $50\\%$ 的分数。\n\n你需要满足的限制如下：  \n- $0\\leq s_{i,j}\\leq 100$。\n- 对于任意 $i,j\\ (i\\neq j)$，若 $a_{i,j}=0$，则对于任意 $k\\ (1\\leq k\\leq m)$，有 $s_{i,k}<s_{j,k}$；若 $a_{i,j}=1$，则存在一个 $k\\in [1,m]$，使得 $s_{i,k}>s_{j,k}$。\n\n你需要注意的是，所有输出都应严格符合输出格式。如果你对答案的存在性判断正确，但是输出方案时 $s_{i,j}<0$ 或 $s_{i,j}>100$，SPJ 会判定为 WA，得 $0$ 分，而不是 $50\\%\\ \\times$ 该测试点分数。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（10 points）：$n=1$。\n- Testcase #2（10 points）：$m=1$。\n- Testcase #3（30 points）：$m=2$。\n- Testcase #4（20 points）：$a_{i,j}=1\\ (i\\neq j)$。\n- Testcase #5（29 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 100$，$a_{i,j}\\in\\{0,1\\}$，$T=50$（除 Testcase #0）。  \n对于 $a$ 的限制：若 $a_{i,j}=a_{i,k}=0$，则 $a_{j,k}$ 和 $a_{k,j}$ 中至少有一个为 $0$；若 $a_{i,k}=a_{j,k}=0$，则 $a_{i,j}$ 和 $a_{j,i}$ 中至少有一个为 $0$。  \n对于所有测试点，**时间限制 500ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) A2。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」Scores（hard version）", "background": "#### 本题是 Scores 的 hard 版本。注意题目限制与 [easy](https://www.luogu.com.cn/problem/P7873) 版本不同。\n\n#### 请注意特殊的时空限制。", "description": "小 A 的班上有 $n$ 个学生。最近他们进行了一场考试，共有 $m$ 个学科。第 $i$ 个学生第 $j$ 门学科的得分为**整数** $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。\n\n同学们很重视自己在班上的排名，所以他们经常会比较自己和别的同学的分数。如果一个学生 $i$ **至少有一门学科**的分数比 $j$ **高**，ta 就会觉得自己不比 $j$ 差；相反，如果 ta **每门学科**的分数都比 $j$ **低**，ta 就会觉得自己被 $j$ 吊打了。\n\n实际上，**上述两种情况并不是严格意义上相反的**。但是喜好八卦的小 A 打听到了每两个同学之间的分数情况，他惊讶地发现：**一个同学 $i$ 要么被 $j$ 吊打，要么不比 $j$ 差。** 同时，**如果 $i,j$ 被同一个人吊打，或同时吊打同一个人，则他们之间也有一方被另一方吊打**。我们用一个矩阵 $a_{i,j}\\ (i\\neq j)$ 来描述小 A 知道的同学们之间的分数关系：$a_{i,j}=0$ 表示 $i$ 被 $j$ 吊打；$a_{i,j}=1$ 表示 $i$ 不比 $j$ 差。\n\n小 A 想知道这种情况会不会发生，即是否存在这样一张 $n\\times m$ 的成绩表 $s$ 满足矩阵 $a$ 所描述的分数关系，从而确定有没有撒谎的同学。如果存在 $s$，请先输出 $\\texttt{YES}$，再**任意**输出一种符合要求的成绩表；否则输出 $\\texttt{NO}$。\n\n注意：这里所求的 $s$ 所需满足的条件是 $a$ 的限制，而**不只是**小 A 所发现的性质，因为**他发现的性质已经在给出的 $a$ 中体现**。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，**表示该测试点编号**。  \n第二行一个整数 $T$，**表示数据组数**。\n\n对于每组数据：  \n第一行两个整数 $n,m$。  \n接下来 $n$ 行，每行 $n$ 个由空格隔开的 0 或 1 描述 $a$。第 $i+1$ 行第 $j$ 个数表示 $a_{i,j}$。\n\n特别的，为了方便读入，**规定 $a_{i,i}=0$**。但你需要知道**它没有任何实际意义**。", "outputFormat": "对于每组数据：\n\n如果不存在满足条件的 $s$，输出一行字符串 $\\texttt{NO}$。  \n否则先输出一行字符串 $\\texttt{YES}$，再输出 $n$ 行，每行 $m$ 个由空格隔开的整数，第 $i+1$ 行第 $j$ 个数表示 $s_{i,j}\\ (0\\leq s_{i,j}\\leq 100)$。", "hint": "**「Special Judge」**\n\n**本题使用 Special Judge。请认真阅读输出格式，输出格式有误可能导致 UKE 或 WA。**\n\nSPJ 首先会判断你的第一行输出是否与答案相同。  \n如果相同且答案为 $\\texttt{YES}$，则 SPJ 会判断你的输出是否符合所有限制。  \n如果有解且你输出 $\\texttt{YES}$，但给出方案错误，你将获得该测试点 $50\\%$ 的分数。\n\n你需要满足的限制如下：  \n- $0\\leq s_{i,j}\\leq 100$。\n- 对于任意 $i,j\\ (i\\neq j)$，若 $a_{i,j}=0$，则对于任意 $k\\ (1\\leq k\\leq m)$，有 $s_{i,k}<s_{j,k}$；若 $a_{i,j}=1$，则存在一个 $k\\in [1,m]$，使得 $s_{i,k}>s_{j,k}$。\n\n你需要注意的是，所有输出都应严格符合输出格式。如果你对答案的存在性判断正确，但是输出方案时 $s_{i,j}<0$ 或 $s_{i,j}>100$，SPJ 会判定为 WA，得 $0$ 分，而不是 $50\\%\\ \\times$ 该测试点分数。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（10 points）：$n=1$。\n- Testcase #2（10 points）：$m=1$。\n- Testcase #3（30 points）：$m=2$。\n- Testcase #4（20 points）：$a_{i,j}=1\\ (i\\neq j)$。\n- Testcase #5（29 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 100$，$a_{i,j}\\in\\{0,1\\}$，$T=50$（除 Testcase #0）。  \n对于 $a$ 的限制：若 $a_{i,j}=a_{i,k}=0$，则 $a_{j,k}$ 和 $a_{k,j}$ 中至少有一个为 $0$；若 $a_{i,k}=a_{j,k}=0$，则 $a_{i,j}$ 和 $a_{j,i}$ 中至少有一个为 $0$。  \n对于所有测试点，**时间限制 500ms，空间限制 16MB。**\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) A2。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。", "locale": "zh-CN"}}}
{"pid": "P7877", "type": "P", "difficulty": 6, "samples": [["0\n9 3\n6 9 8 4 3 2 1\n2 7 5\n1 6\n", "YES\n4\n1\n1\n1\n1\n1\n2\n3\n-1\n-1\n"], ["0\n13 4\n4 13 10 1 7\n3 11 4 8\n4 6 5 3 2\n2 12 9\n", "YES\n10\n2\n2\n2\n3\n3\n3\n1\n1\n3\n6\n7\n8\n-1\n"], ["0\n5 1\n5 5 4 3 2 1\n", "YES\n0\n-1\n-1\n-1\n-1\n-1\n"], ["0\n17 10\n2 12 14\n1 3\n3 1 13 15\n0\n2 9 8\n1 5\n3 16 7 6\n2 11 2\n1 4\n2 17 10\n", "YES\n14\n4\n1\n1\n1\n1\n1\n1\n1\n1\n2\n3\n4\n3\n1\n2\n4\n-1"], ["0\n13 4\n4 10 1 13 7\n4 11 12 4 8\n4 6 5 3 2\n1 9\n", "NO\n-1\n2\n2\n3\n3\n3\n1\n1\n-1\n-1\n6\n5\n-1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "Special Judge", "O2优化", "图论建模", "拓扑排序", "洛谷月赛"], "title": "「SWTR-7」Spider Solitaire", "background": "#### 题目描述下方有简化题意。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7tdo8cdf.png)\n\n---\n\n小 A 在玩蜘蛛纸牌。  \n为了方便你理解蜘蛛纸牌，小 A 给出了简化后的游戏规则：\n\n- 一副牌有 $n$ 张，从小到大分别为 $1,2,\\cdots,n$。\n- 现有 $m$ 个牌堆，$1$ 副牌。每个牌堆中有 $0$ 张或多张牌。\n- 定义「龙」$a_1,a_2,\\cdots,a_d$ 为满足 $a_i-1=a_{i+1}\\ (1\\leq i<d)$ 的任意多张连续的牌。**一张牌也是一个「龙」。**\n- 一组连续的牌可以移动，当且仅当这组牌形成了一个「龙」，且「龙」在牌堆的**最右边**。\n- 一组连续的牌只能移动到一个**非空**牌堆的最右边，**且必须满足可以与该非空牌堆最右边的「龙」构成一条更大的「龙」**。\n- 游戏胜利，当且仅当所有的 $n$ 张牌形成了一个「龙」。\n\n---\n\n例如当 $m=3$，$n=9$，局面为\n\n```plain\n9 8 4 3 2 1\n7 5\n6\n```\n\n时，第一个牌堆最右边的 `4 3 2 1` 形成了一个「龙」，所以 `4 3 2 1` 可以移动。将 `4 3 2 1` 移动到第二个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7 5 4 3 2 1\n6\n```\n\n接下来将第二个牌堆右边的 `5 4 3 2 1` 移动到第三个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7\n6 5 4 3 2 1\n```\n\n接下来将第三个牌堆的 `6 5 4 3 2 1` 移动到第二个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7 6 5 4 3 2 1\n\\\n```\n\n接下来将第二个牌堆的 `7 6 5 4 3 2 1` 移动到第一个牌堆的最右边，此时牌堆为\n\n```plain\n9 8 7 6 5 4 3 2 1\n\\\n\\\n```\n\n因为所有 $9$ 张牌形成了一个「龙」，所以游戏胜利。", "description": "给定一个蜘蛛纸牌初始局面，小 A 想知道能否获得胜利。若能，请输出 $\\texttt{YES}$ 以及**获胜所需的最小步数**。否则输出 $\\texttt{NO}$。\n\n小 A 还想知道，对于每张牌 $i$，如果要移动 $i$ 至少需要多少步，**包括移动 $i$ 的这一步**。如果无法移动输出 `-1`。\n\n---\n\n#### 「简化题意」\n\n有 $m$ 个**横向**的数堆，数堆里共有 $n$ 个数，每个数堆里有 $0$ 或多个数。所有数堆里的数组成了 $1\\sim n$ 中的所有数。\n\n你可以将一个数堆**最右边递减且公差为 $-1$ 的**连续若干个数 $a_1,a_2,\\cdots,a_c$ **按照原来的顺序移到另外一个非空数堆的最右边**，当且仅当该非空数堆最右边的一个数 $b=a_1+1$。\n\n求将所有的 $n$ 个数都移动到同一个数堆且满足从左往右依次递减的最小步数。如果无解输出 $\\texttt{NO}$。\n\n**此外，你还需要对于每个数 $i$，输出如果要移动 $i$ 至少需要多少步。**", "inputFormat": "第一行一个整数 $T$，表示子任务编号。  \n第二行两个整数 $n,m$，分别表示一副牌的张数和牌堆的个数。  \n接下来 $m$ 行，每行首先一个整数 $c$ 表示该牌堆中牌的个数，接下来 $c$ 个整数 $b_1,b_2,\\cdots,b_c$ **从左到右**描述这个牌堆。", "outputFormat": "如果能够获胜，在第一行输出 $\\texttt{YES}$，**第二行输出最少步数**。否则输出一行 $\\texttt{NO}$。\n\n无论是否能够获胜，你还需输出 $n$ 行，第 $i$ 行一个**介于 $-1$ 与 $n$ 之间的整数**，表示移动 $i$ 至少需要多少步。", "hint": "**「样例 1 说明」**\n\n因为 1,2,3,4,5 可以直接移动，所以至少需要 1 步即可移动。  \n因为需要先将 5 移至 6 右侧，6 才能移动，所以至少需要 2 步即可移动。  \n因为需要先将 5 移至 6 右侧，再将 4,3,2,1 移至 5 右侧，7 才能移动，所以至少需要 3 步即可移动。  \n显然 8,9 无法移动。\n\n**「Special Judge」**\n\n本题使用 Special Judge，请**严格遵守输出格式**：\n\n- 如果你正确输出对能否获胜的判定，且如果能够获胜，你正确输出最小步数，你将获得该测试点**至少** $40\\%$ 的分数。\n- **在上一部分的基础上**，如果你正确输出移动每张牌的最小步数，你将获得该测试点**剩下** $60\\%$ 的分数。也就是说，如果你上一部分输出错误，你在这一部分也不会获得任何分数。\n- **如果你的输出格式错误，你将获得该测试点 $0\\%$ 的分数**，包括但不限于**只输出对能否获胜的判定**。\n- 需要特别注意的是，如果你不能正确求出移动每张牌的最小步数，请**随机输出 $[-1,n]$ 之间的任意整数**，否则你将获得该测试点 $0\\%$ 的分数。\n- 每行结束后你都需要输出换行符，**包括最后一行**。\n\nchecker 将在题目最后给出。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n- Subtask #0（0 points）：是样例。\n- Subtask #1（15 points）：$n\\leq 3\\times 10^3$，$m=2$。\n- Subtask #2（15 points）：$b_i>b_{i+1}\\ (1\\leq i<c)$，$n\\leq 3\\times 10^3$。\n- Subtask #3（25 points）：$n\\leq 14$，$m=3$。\n- Subtask #4（30 points）：$n\\leq 3\\times 10^3$。\n- Subtask #5（15 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 5\\times 10^4$。时间限制 1s，空间限制 512MB。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) D。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n---\n\n以下是 checker，你需要有 testlib.h 才能成功编译。\n\n```cpp\n#include \"testlib.h\"\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define ll long long\n#define pii pair <int,int>\n#define fi first\n#define se second\n#define pb emplace_back\n#define mp make_pair \n#define vint vector <int>\n#define vpii vector <pii>\n#define all(x) x.begin(),x.end()\n#define sor(x) sort(all(x))\n#define rev(x) reverse(all(x))\n#define mem(x,v) memset(x,v,sizeof(x))\n\n#define rint inf.readInt\n#define reof inf.readEof()\n#define reoln inf.readEoln()\n#define rspace inf.readSpace()\n\n// wrong answer : quitf(_wa,\"The answer is wrong\")\n// accepted :  quitf(_ok,\"The answer is correct\")\n// partly correct : quitp(0.5,\"The answer is partly correct\")\n\nint main(int argc,char* argv[]){\n\tregisterTestlibCmd(argc,argv);\n\t\n\tstring jans=ans.readToken();\n\tstring pans=ouf.readToken(jans);\n\tint sub=rint(),n=rint(),diff=0;\n\t\n\tif(jans==\"YES\"){\n\t\tint jstep=ans.readInt();\n\t\tint pstep=ouf.readInt();\n\t\tif(jstep!=pstep)quitf(_wa,\"The answer is wrong\");\n\t}\n\t\n\tfor(int i=1;i<=n;i++){\n\t\tint jans=ans.readInt();\n\t\tint pans=ouf.readInt();\n\t\tif(jans!=pans)diff=1;\n\t}\n\t\n\twhile(!ouf.seekEof())ouf.readToken();\n\twhile(!inf.seekEof())inf.readToken();\n\twhile(!ans.seekEof())ans.readToken();\n\tif(diff)quitp(0.4,\"The answer is partially correct\");\n\telse quitf(_ok,\"OK, you AK IOI\");\n\t\n\treturn 0;\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」Spider Solitaire", "background": "#### 题目描述下方有简化题意。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7tdo8cdf.png)\n\n---\n\n小 A 在玩蜘蛛纸牌。  \n为了方便你理解蜘蛛纸牌，小 A 给出了简化后的游戏规则：\n\n- 一副牌有 $n$ 张，从小到大分别为 $1,2,\\cdots,n$。\n- 现有 $m$ 个牌堆，$1$ 副牌。每个牌堆中有 $0$ 张或多张牌。\n- 定义「龙」$a_1,a_2,\\cdots,a_d$ 为满足 $a_i-1=a_{i+1}\\ (1\\leq i<d)$ 的任意多张连续的牌。**一张牌也是一个「龙」。**\n- 一组连续的牌可以移动，当且仅当这组牌形成了一个「龙」，且「龙」在牌堆的**最右边**。\n- 一组连续的牌只能移动到一个**非空**牌堆的最右边，**且必须满足可以与该非空牌堆最右边的「龙」构成一条更大的「龙」**。\n- 游戏胜利，当且仅当所有的 $n$ 张牌形成了一个「龙」。\n\n---\n\n例如当 $m=3$，$n=9$，局面为\n\n```plain\n9 8 4 3 2 1\n7 5\n6\n```\n\n时，第一个牌堆最右边的 `4 3 2 1` 形成了一个「龙」，所以 `4 3 2 1` 可以移动。将 `4 3 2 1` 移动到第二个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7 5 4 3 2 1\n6\n```\n\n接下来将第二个牌堆右边的 `5 4 3 2 1` 移动到第三个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7\n6 5 4 3 2 1\n```\n\n接下来将第三个牌堆的 `6 5 4 3 2 1` 移动到第二个牌堆的最右边，此时局面为\n\n```plain\n9 8\n7 6 5 4 3 2 1\n\\\n```\n\n接下来将第二个牌堆的 `7 6 5 4 3 2 1` 移动到第一个牌堆的最右边，此时牌堆为\n\n```plain\n9 8 7 6 5 4 3 2 1\n\\\n\\\n```\n\n因为所有 $9$ 张牌形成了一个「龙」，所以游戏胜利。", "description": "给定一个蜘蛛纸牌初始局面，小 A 想知道能否获得胜利。若能，请输出 $\\texttt{YES}$ 以及**获胜所需的最小步数**。否则输出 $\\texttt{NO}$。\n\n小 A 还想知道，对于每张牌 $i$，如果要移动 $i$ 至少需要多少步，**包括移动 $i$ 的这一步**。如果无法移动输出 `-1`。\n\n---\n\n#### 「简化题意」\n\n有 $m$ 个**横向**的数堆，数堆里共有 $n$ 个数，每个数堆里有 $0$ 或多个数。所有数堆里的数组成了 $1\\sim n$ 中的所有数。\n\n你可以将一个数堆**最右边递减且公差为 $-1$ 的**连续若干个数 $a_1,a_2,\\cdots,a_c$ **按照原来的顺序移到另外一个非空数堆的最右边**，当且仅当该非空数堆最右边的一个数 $b=a_1+1$。\n\n求将所有的 $n$ 个数都移动到同一个数堆且满足从左往右依次递减的最小步数。如果无解输出 $\\texttt{NO}$。\n\n**此外，你还需要对于每个数 $i$，输出如果要移动 $i$ 至少需要多少步。**", "inputFormat": "第一行一个整数 $T$，表示子任务编号。  \n第二行两个整数 $n,m$，分别表示一副牌的张数和牌堆的个数。  \n接下来 $m$ 行，每行首先一个整数 $c$ 表示该牌堆中牌的个数，接下来 $c$ 个整数 $b_1,b_2,\\cdots,b_c$ **从左到右**描述这个牌堆。", "outputFormat": "如果能够获胜，在第一行输出 $\\texttt{YES}$，**第二行输出最少步数**。否则输出一行 $\\texttt{NO}$。\n\n无论是否能够获胜，你还需输出 $n$ 行，第 $i$ 行一个**介于 $-1$ 与 $n$ 之间的整数**，表示移动 $i$ 至少需要多少步。", "hint": "**「样例 1 说明」**\n\n因为 1,2,3,4,5 可以直接移动，所以至少需要 1 步即可移动。  \n因为需要先将 5 移至 6 右侧，6 才能移动，所以至少需要 2 步即可移动。  \n因为需要先将 5 移至 6 右侧，再将 4,3,2,1 移至 5 右侧，7 才能移动，所以至少需要 3 步即可移动。  \n显然 8,9 无法移动。\n\n**「Special Judge」**\n\n本题使用 Special Judge，请**严格遵守输出格式**：\n\n- 如果你正确输出对能否获胜的判定，且如果能够获胜，你正确输出最小步数，你将获得该测试点**至少** $40\\%$ 的分数。\n- **在上一部分的基础上**，如果你正确输出移动每张牌的最小步数，你将获得该测试点**剩下** $60\\%$ 的分数。也就是说，如果你上一部分输出错误，你在这一部分也不会获得任何分数。\n- **如果你的输出格式错误，你将获得该测试点 $0\\%$ 的分数**，包括但不限于**只输出对能否获胜的判定**。\n- 需要特别注意的是，如果你不能正确求出移动每张牌的最小步数，请**随机输出 $[-1,n]$ 之间的任意整数**，否则你将获得该测试点 $0\\%$ 的分数。\n- 每行结束后你都需要输出换行符，**包括最后一行**。\n\nchecker 将在题目最后给出。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n- Subtask #0（0 points）：是样例。\n- Subtask #1（15 points）：$n\\leq 3\\times 10^3$，$m=2$。\n- Subtask #2（15 points）：$b_i>b_{i+1}\\ (1\\leq i<c)$，$n\\leq 3\\times 10^3$。\n- Subtask #3（25 points）：$n\\leq 14$，$m=3$。\n- Subtask #4（30 points）：$n\\leq 3\\times 10^3$。\n- Subtask #5（15 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 5\\times 10^4$。时间限制 1s，空间限制 512MB。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) D。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n---\n\n以下是 checker，你需要有 testlib.h 才能成功编译。\n\n```cpp\n#include \"testlib.h\"\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define ll long long\n#define pii pair <int,int>\n#define fi first\n#define se second\n#define pb emplace_back\n#define mp make_pair \n#define vint vector <int>\n#define vpii vector <pii>\n#define all(x) x.begin(),x.end()\n#define sor(x) sort(all(x))\n#define rev(x) reverse(all(x))\n#define mem(x,v) memset(x,v,sizeof(x))\n\n#define rint inf.readInt\n#define reof inf.readEof()\n#define reoln inf.readEoln()\n#define rspace inf.readSpace()\n\n// wrong answer : quitf(_wa,\"The answer is wrong\")\n// accepted :  quitf(_ok,\"The answer is correct\")\n// partly correct : quitp(0.5,\"The answer is partly correct\")\n\nint main(int argc,char* argv[]){\n\tregisterTestlibCmd(argc,argv);\n\t\n\tstring jans=ans.readToken();\n\tstring pans=ouf.readToken(jans);\n\tint sub=rint(),n=rint(),diff=0;\n\t\n\tif(jans==\"YES\"){\n\t\tint jstep=ans.readInt();\n\t\tint pstep=ouf.readInt();\n\t\tif(jstep!=pstep)quitf(_wa,\"The answer is wrong\");\n\t}\n\t\n\tfor(int i=1;i<=n;i++){\n\t\tint jans=ans.readInt();\n\t\tint pans=ouf.readInt();\n\t\tif(jans!=pans)diff=1;\n\t}\n\t\n\twhile(!ouf.seekEof())ouf.readToken();\n\twhile(!inf.seekEof())inf.readToken();\n\twhile(!ans.seekEof())ans.readToken();\n\tif(diff)quitp(0.4,\"The answer is partially correct\");\n\telse quitf(_ok,\"OK, you AK IOI\");\n\t\n\treturn 0;\n}\n```", "locale": "zh-CN"}}}
{"pid": "P7878", "type": "P", "difficulty": 5, "samples": [["0\n3\n4 2\n1 1 3 2\n8 3\n1 3 2 8 6 4 7 5\n40 10\n9843011 22841896 42690334 3412396 8420789 100693326 23390709 11537210 145661796 21418321 16914724 146120903 14287416 9157773 259599687 16469809 13371424 221660485 23554750 3004543 19382066 514113557 959488450 162305801 377127750 240963428 597774302 18789772 647693870 517468301 547221960 162988230 309004668 267293109 867629494 476230153 70400563 100943563 140708197 999999999\n", "3\n13\n5882440256\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "洛谷月赛"], "title": "「SWTR-7」My rating is 1064（hard version）", "background": "#### 本题是 My rating is ... 的 hard 版本。注意题目限制与 [easy](https://www.luogu.com.cn/problem/P7874) 版本不同。\n\n#### 题目描述下方有简化题意。\n\n[My rating is 1064.](https://codeforces.com/blog/entry/74503)（被 2 - Tower 炸掉了，因此现在打不开了）", "description": "小 A 想在 Codeforces 上发 $n$ 篇帖子！例如：\n\n> “My rating is 1064.”\n>\n> “I am PolarSea.”\n>\n> “你知道 phi 吗？你知道你的 phi 处是哪里吗？你知道它的 price 吗？1e9 + 7。”\n>\n>“每道题都很简单，全场虐题不用烦。T1 到场先签到，T2 上手随便切，T3 一交就能过，T4 稍想也能 A。DP 转移很容易，数学结论尽皆知。建图方法极明显，数据结构很一般。不卡空间不卡常，码量不大手不酸。没有毒瘤大模拟，只有良多大水题。片刻四题提交过，人人 AK 笑开颜。”\n>\n> “……”\n\n为此，小 A 新注册了 $k$ 个账号。他决定按照顺序发出每篇帖子，并**用到所有 $k$ 个账号**。不过刷屏过多会引起 Mike 的注意并被封号，小 A 当然不希望这样：他进行了一些评估，得到了每篇帖子的安全指数 $a_i$，表示他发出第 $i$ 篇帖子后不被封号的概率。\n\n由于第一印象非常重要，小 A 定义一个账号的安全指数为该账号所发出的**第一篇**帖子的安全指数。此外，如果**用同一个账号连续发出两个帖子**，该账号的安全指数会减小**这两篇帖子安全指数的较小值**。\n\n小 A 希望找到这样一个发帖方案，使得所有账号的安全指数之和最大。你只需要求出安全指数之和的最大值即可。\n\n---\n\n**「简化题意」**\n\n将 $1\\sim n$ **不重不漏**地分进**恰好** $k$ 个集合 $S_1,S_2,\\cdots,S_k$ 中 且 $|S_i|>0$。记 $i$ 被分入第 $d_i$ 个集合，求 \n\n$$\\left(\\sum_{i=1}^k a[{\\min_{j\\in S_i}j}]\\right)-\\left(\\sum_{i=1}^{n-1}\\min(a_i,a_{i+1})[d_i=d_{i+1}]\\right)$$\n\n的最大值，其中左边的 $[x]$ 表示下标为 $x$，右边的 $[x]$ 表示当 $x$ 成立时取值为 $1$，当 $x$ 不成立时取值为 $0$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，表示该测试点编号。  \n第二行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n,k$。  \n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个帖子的安全指数。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "**「样例 1 说明」**\n\n小 A 可以使用账号 $1$ 发帖子 $1,2$ 和 $4$，用账号 $2$ 发帖子 $3$。其安全程度为 $(a_{\\min(1,2,4)}-\\min(a_1,a_2))+a_3=1-1+3=3$。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（20 points）：$k=2$。\n- Testcase #2（20 points）：$n\\leq 10$，$k\\leq 4$。\n- Testcase #3（15 points）：$k=3$。\n- Testcase #4（20 points）：$n\\leq 10^3$。\n- Testcase #5（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\leq k \\leq n \\leq 10^5$，$0 \\leq a_i \\leq 10^9$，$T=10$（除 Testcase #0）。  \n对于所有测试点，时间限制 1s，空间限制 128MB。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/) B2。  \nidea & solution：[tzc_wk](https://www.luogu.com.cn/user/115194) & [Alex_Wei](https://www.luogu.com.cn/user/123294)（加强）；data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n> **My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. ……**\n>\n> **Upvote&emsp;-77&emsp;Downvote&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;PolarSea**  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」My rating is 1064（hard version）", "background": "#### 本题是 My rating is ... 的 hard 版本。注意题目限制与 [easy](https://www.luogu.com.cn/problem/P7874) 版本不同。\n\n#### 题目描述下方有简化题意。\n\n[My rating is 1064.](https://codeforces.com/blog/entry/74503)（被 2 - Tower 炸掉了，因此现在打不开了）", "description": "小 A 想在 Codeforces 上发 $n$ 篇帖子！例如：\n\n> “My rating is 1064.”\n>\n> “I am PolarSea.”\n>\n> “你知道 phi 吗？你知道你的 phi 处是哪里吗？你知道它的 price 吗？1e9 + 7。”\n>\n>“每道题都很简单，全场虐题不用烦。T1 到场先签到，T2 上手随便切，T3 一交就能过，T4 稍想也能 A。DP 转移很容易，数学结论尽皆知。建图方法极明显，数据结构很一般。不卡空间不卡常，码量不大手不酸。没有毒瘤大模拟，只有良多大水题。片刻四题提交过，人人 AK 笑开颜。”\n>\n> “……”\n\n为此，小 A 新注册了 $k$ 个账号。他决定按照顺序发出每篇帖子，并**用到所有 $k$ 个账号**。不过刷屏过多会引起 Mike 的注意并被封号，小 A 当然不希望这样：他进行了一些评估，得到了每篇帖子的安全指数 $a_i$，表示他发出第 $i$ 篇帖子后不被封号的概率。\n\n由于第一印象非常重要，小 A 定义一个账号的安全指数为该账号所发出的**第一篇**帖子的安全指数。此外，如果**用同一个账号连续发出两个帖子**，该账号的安全指数会减小**这两篇帖子安全指数的较小值**。\n\n小 A 希望找到这样一个发帖方案，使得所有账号的安全指数之和最大。你只需要求出安全指数之和的最大值即可。\n\n---\n\n**「简化题意」**\n\n将 $1\\sim n$ **不重不漏**地分进**恰好** $k$ 个集合 $S_1,S_2,\\cdots,S_k$ 中 且 $|S_i|>0$。记 $i$ 被分入第 $d_i$ 个集合，求 \n\n$$\\left(\\sum_{i=1}^k a[{\\min_{j\\in S_i}j}]\\right)-\\left(\\sum_{i=1}^{n-1}\\min(a_i,a_{i+1})[d_i=d_{i+1}]\\right)$$\n\n的最大值，其中左边的 $[x]$ 表示下标为 $x$，右边的 $[x]$ 表示当 $x$ 成立时取值为 $1$，当 $x$ 不成立时取值为 $0$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $t$，表示该测试点编号。  \n第二行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n,k$。  \n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个帖子的安全指数。", "outputFormat": "对于每组数据，一行一个整数表示答案。", "hint": "**「样例 1 说明」**\n\n小 A 可以使用账号 $1$ 发帖子 $1,2$ 和 $4$，用账号 $2$ 发帖子 $3$。其安全程度为 $(a_{\\min(1,2,4)}-\\min(a_1,a_2))+a_3=1-1+3=3$。\n\n**「数据范围与约定」**\n\n本题共有 6 个测试点。\n\n- Testcase #0（1 point）：是样例。\n- Testcase #1（20 points）：$k=2$。\n- Testcase #2（20 points）：$n\\leq 10$，$k\\leq 4$。\n- Testcase #3（15 points）：$k=3$。\n- Testcase #4（20 points）：$n\\leq 10^3$。\n- Testcase #5（24 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\leq k \\leq n \\leq 10^5$，$0 \\leq a_i \\leq 10^9$，$T=10$（除 Testcase #0）。  \n对于所有测试点，时间限制 1s，空间限制 128MB。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/) B2。  \nidea & solution：[tzc_wk](https://www.luogu.com.cn/user/115194) & [Alex_Wei](https://www.luogu.com.cn/user/123294)（加强）；data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。\n\n> **My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. My rating is 1064. ……**\n>\n> **Upvote&emsp;-77&emsp;Downvote&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;PolarSea**  ", "locale": "zh-CN"}}}
{"pid": "P7879", "type": "P", "difficulty": 7, "samples": [["0\nbbccabcacbcbac\ncbcacbcabbcabca\n3\n17\n2 1 2\n2 1 4\n2 1 6\n2 2 15\n2 6 15\n2 9 15\n1 4 13 babbccabbd\n2 1 11\n2 1 12\n2 1 15\n2 5 11\n1 13 15 cab\n2 3 12\n2 7 10\n2 11 15\n2 10 14\n2 9 14", "No\nNo\nYes\nYes\nYes\nYes\nYes\nNo\nNo\nNo\nNo\nYes\nNo\nNo\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 4500, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "2021", "后缀自动机 SAM", "O2优化", "矩阵加速", "哈希 hashing", "洛谷月赛"], "title": "「SWTR-7」How to AK NOI?", "background": "#### 一些关于字符串的定义与约定详见「帮助 / 提示」部分。\n\n#### 请不要恶意卡评测。\n\n---\n\n小 A 正在读一篇文章 ——《如何优雅地 AK NOI？》", "description": "不幸的是，这篇文章是用英语写的。小 A 的视力很糟糕，同时词汇量也很小。\n\n具体地，这篇文章可以用一个字符串 $t$ 表示。同时给出另一个字符串 $s$：小 A 所有认识的单词，都是 $s$ 的**长度不小于 $k$ 的**子串。\n\n一段文字 $T$ 被称为「可读懂的」，当且仅当其能被分割成若干个小 A 读得懂的单词。例如当 $k=2$，$s=\\texttt{abcd}$ 时，$\\texttt{abcd/abc}$ 和 $\\texttt{cd/ab/bc/bcd}$ 就是可读懂的，而 $\\texttt{abcc}$ 和 $\\texttt{tzcaknoi}$ 就是不可读懂的。\n\n接下来，小 A 会进行 $q$ 次行动：\n\n- Type 1：擦亮眼睛。具体地，小 A 会选择文章 $t$ 的一个子串 $t[l:r]$，并将其修改为字符串 $x\\ (|x|=r-l+1)$。\n- Type 2：阅读文章。具体地，小 A 会选择文章 $t$ 的一个子串 $t[l:r]$ 并进行阅读。**对于每次 Type 2 的操作，你需要告诉小 A 他能不能看懂这段文字**。能够读懂则输出 `Yes`，否则输出 `No`。", "inputFormat": "第一行一个正整数 $T$，表示该点 Subtask 编号。  \n第二行一个字符串 $s$。  \n第三行一个字符串 $t$。  \n第四行一个正整数 $k$。  \n第五行一个正整数 $q$。\n\n接下来 $q$ 行，每行表示一个询问。首先给出操作参数 $op$：\n- 若 $op=1$，则接下来两个正整数 $l,r$ 与一个字符串 $x$，表示将 $t[l:r]$ 修改为 $x$。\n- 若 $op=2$，则接下来两个正整数 $l,r$，表示一次询问。", "outputFormat": "对于每个询问输出一行字符串：若可以读懂则输出 `Yes`，否则输出 `No`。", "hint": "**「数据范围与约定」**\n\n记 $n=|s|$，$m=|t|$，$L=\\sum |x|$。\n\n| Subtask |    $n\\leq$     | $m\\leq$ | $L\\leq$ | $q\\leq$ | $k\\leq$ |   分值    |\n| :-----: | :------------: | :-----: | :-----: | :-----: | :-----: | :-------: |\n| 0 |  |  |  |  |  | 0 point |\n|    1    |      $70$      |  $70$   |         |  $70$   |         | 10 points |\n|    2    |     $200$      |  $200$  |         |  $200$  |         | 10 points |\n|    3    |     $10^3$     | $10^3$  |         | $10^3$  |         | 10 points |\n|    4    |                |         |         |         |   $1$   | 10 points |\n|    5    | $2\\times 10^5$ | $10^5$ |   $0$   | $2\\times 10^4$  |   $5$   | 15 points |\n|    6    | $2\\times 10^5$ | $10^5$  | $5\\times 10^4$  | $2\\times 10^4$  |   $5$   | 10 points |\n|    7    |  |         |         |         |   $6$   | 15 points |\n|    8    |                |         |         |         |         | 20 points |\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 3\\times 10^6$，$1\\leq L\\leq 3\\times 10^5$，$1\\leq m\\leq 2\\times 10^5$，$1\\leq q\\leq 10^5$，$1\\leq k\\leq 8$。    保证 $|x|=r-l+1$，且字符集为 $[\\texttt{a,i}]$。\n\n---\n\nSubtask 0 是样例及 **Hack 数据**。\n\n- Subtask 0 ~ 3 时间限制 1s。\n- Subtask 4 ~ 6 时间限制 1.5s。\n- Subtask 7 时间限制 3s。\n- Subtask 8 时间限制 4.5s。\n\n**「子任务依赖」**\n\n**本题使用子任务依赖**。\n\n简单地说，如果 Subtask a 依赖于 Subtask b，那么**只有你通过 Subtask b 的全部测试点时，Subtask a 才会计入总分**。\n\n- Subtask 1 依赖于 Subtask 0。\n- Subtask 2 依赖于 Subtask 0,1。\n- Subtask 3 依赖于 Subtask 0,1,2。\n- Subtask 6 依赖于 Subtask 0,5。\n- Subtask 7 依赖于 Subtask 0,5,6。\n- Subtask 8 依赖于 Subtask 0~7。\n\n**保证 Subtask 0 的 Hack 数据符合 Subtask 1,2,3,6,7,8 的所有限制**。\n\n**「帮助 / 提示」**\n\n字符串 $t'$ 是 $t$ 的子串，当且仅当我们能够从 $t$ 的开头和结尾删除若干个字符（可以不删除）并得到 $t'$。  \n定义 $t[l:r]$ 表示 $t_lt_{l+1}\\cdots t_{r-1}t_r$ 所形成的字符串。\n\n读入文件较大，请注意 IO 优化。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) E。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[tzc_wk](https://www.luogu.com.cn/user/115194)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-7」How to AK NOI?", "background": "#### 一些关于字符串的定义与约定详见「帮助 / 提示」部分。\n\n#### 请不要恶意卡评测。\n\n---\n\n小 A 正在读一篇文章 ——《如何优雅地 AK NOI？》", "description": "不幸的是，这篇文章是用英语写的。小 A 的视力很糟糕，同时词汇量也很小。\n\n具体地，这篇文章可以用一个字符串 $t$ 表示。同时给出另一个字符串 $s$：小 A 所有认识的单词，都是 $s$ 的**长度不小于 $k$ 的**子串。\n\n一段文字 $T$ 被称为「可读懂的」，当且仅当其能被分割成若干个小 A 读得懂的单词。例如当 $k=2$，$s=\\texttt{abcd}$ 时，$\\texttt{abcd/abc}$ 和 $\\texttt{cd/ab/bc/bcd}$ 就是可读懂的，而 $\\texttt{abcc}$ 和 $\\texttt{tzcaknoi}$ 就是不可读懂的。\n\n接下来，小 A 会进行 $q$ 次行动：\n\n- Type 1：擦亮眼睛。具体地，小 A 会选择文章 $t$ 的一个子串 $t[l:r]$，并将其修改为字符串 $x\\ (|x|=r-l+1)$。\n- Type 2：阅读文章。具体地，小 A 会选择文章 $t$ 的一个子串 $t[l:r]$ 并进行阅读。**对于每次 Type 2 的操作，你需要告诉小 A 他能不能看懂这段文字**。能够读懂则输出 `Yes`，否则输出 `No`。", "inputFormat": "第一行一个正整数 $T$，表示该点 Subtask 编号。  \n第二行一个字符串 $s$。  \n第三行一个字符串 $t$。  \n第四行一个正整数 $k$。  \n第五行一个正整数 $q$。\n\n接下来 $q$ 行，每行表示一个询问。首先给出操作参数 $op$：\n- 若 $op=1$，则接下来两个正整数 $l,r$ 与一个字符串 $x$，表示将 $t[l:r]$ 修改为 $x$。\n- 若 $op=2$，则接下来两个正整数 $l,r$，表示一次询问。", "outputFormat": "对于每个询问输出一行字符串：若可以读懂则输出 `Yes`，否则输出 `No`。", "hint": "**「数据范围与约定」**\n\n记 $n=|s|$，$m=|t|$，$L=\\sum |x|$。\n\n| Subtask |    $n\\leq$     | $m\\leq$ | $L\\leq$ | $q\\leq$ | $k\\leq$ |   分值    |\n| :-----: | :------------: | :-----: | :-----: | :-----: | :-----: | :-------: |\n| 0 |  |  |  |  |  | 0 point |\n|    1    |      $70$      |  $70$   |         |  $70$   |         | 10 points |\n|    2    |     $200$      |  $200$  |         |  $200$  |         | 10 points |\n|    3    |     $10^3$     | $10^3$  |         | $10^3$  |         | 10 points |\n|    4    |                |         |         |         |   $1$   | 10 points |\n|    5    | $2\\times 10^5$ | $10^5$ |   $0$   | $2\\times 10^4$  |   $5$   | 15 points |\n|    6    | $2\\times 10^5$ | $10^5$  | $5\\times 10^4$  | $2\\times 10^4$  |   $5$   | 10 points |\n|    7    |  |         |         |         |   $6$   | 15 points |\n|    8    |                |         |         |         |         | 20 points |\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 3\\times 10^6$，$1\\leq L\\leq 3\\times 10^5$，$1\\leq m\\leq 2\\times 10^5$，$1\\leq q\\leq 10^5$，$1\\leq k\\leq 8$。    保证 $|x|=r-l+1$，且字符集为 $[\\texttt{a,i}]$。\n\n---\n\nSubtask 0 是样例及 **Hack 数据**。\n\n- Subtask 0 ~ 3 时间限制 1s。\n- Subtask 4 ~ 6 时间限制 1.5s。\n- Subtask 7 时间限制 3s。\n- Subtask 8 时间限制 4.5s。\n\n**「子任务依赖」**\n\n**本题使用子任务依赖**。\n\n简单地说，如果 Subtask a 依赖于 Subtask b，那么**只有你通过 Subtask b 的全部测试点时，Subtask a 才会计入总分**。\n\n- Subtask 1 依赖于 Subtask 0。\n- Subtask 2 依赖于 Subtask 0,1。\n- Subtask 3 依赖于 Subtask 0,1,2。\n- Subtask 6 依赖于 Subtask 0,5。\n- Subtask 7 依赖于 Subtask 0,5,6。\n- Subtask 8 依赖于 Subtask 0~7。\n\n**保证 Subtask 0 的 Hack 数据符合 Subtask 1,2,3,6,7,8 的所有限制**。\n\n**「帮助 / 提示」**\n\n字符串 $t'$ 是 $t$ 的子串，当且仅当我们能够从 $t$ 的开头和结尾删除若干个字符（可以不删除）并得到 $t'$。  \n定义 $t[l:r]$ 表示 $t_lt_{l+1}\\cdots t_{r-1}t_r$ 所形成的字符串。\n\n读入文件较大，请注意 IO 优化。\n\n**「题目来源」**\n\n[Sweet Round 07](https://www.luogu.com.cn/contest/51773) E。  \nidea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[tzc_wk](https://www.luogu.com.cn/user/115194)。", "locale": "zh-CN"}}}
{"pid": "P7880", "type": "P", "difficulty": 6, "samples": [["10 19\n9 1 -4\n9 8 2\n8 10 5\n9 7 -3\n1 4 2\n10 2 5\n10 5 -1\n7 3 -3\n10 6 5\n8 10\n4 6\n1 7\n7 9\n5 5\n7 8\n8 10\n10 10\n10 10\n9 10\n5 7\n8 8\n6 6\n2 8\n9 10\n4 8\n5 5\n1 6\n1 2\n", "3\n4\n7\n3\n1\n3\n3\n1\n1\n2\n5\n1\n1\n8\n2\n7\n1\n6\n2\n"], ["10 19\n6 1 299830931\n1 4 -565297395\n1 7 -606073228\n4 8 94253706\n8 9 -576603423\n4 3 116780102\n3 5 620388954\n7 10 -950023905\n5 2 813045783\n3 5\n7 7\n8 10\n4 7\n10 10\n9 9\n4 7\n8 10\n6 7\n4 8\n9 10\n2 9\n8 10\n2 8\n4 4\n10 10\n4 9\n1 5\n8 9\n", "3\n1\n4\n5\n1\n1\n5\n4\n3\n6\n3\n9\n4\n8\n1\n1\n7\n5\n2\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2006", "O2优化", "Ynoi"], "title": "[Ynoi2006] rldcot", "background": "", "description": "给定一棵 $n$ 个节点的树，树根为 $1$，每个点有一个编号，每条边有一个边权。\n\n定义 $dep(x)$ 表示一个点到根简单路径上边权的和，$lca(x,y)$ 表示 $x,y$ 节点在树上的最近公共祖先。\n\n共 $m$ 组询问，每次询问给出 $l,r$，求对于所有点编号的二元组 $(i,j)$ 满足 $l \\le i,j \\le r$ ，有多少种不同的 $dep( lca(i,j))$。", "inputFormat": "第一行两个用空格隔开的数 $n,m$。\n\n之后 $n-1$ 行，每行三个用空格隔开的数 $u,v,d$ 表示一条 $u$ 到 $v$ 边权为 $d$ 的边。\n\n之后 $m$ 行，每行两个用空格隔开的数 $l,r$ 表示一次询问。", "outputFormat": "共 $m$ 行，一行一个整数，表示询问的答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：lk，Data：nzhtl1477\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m \\le 100$。\n\n对于另外 $20\\%$ 的数据，满足 $1\\le n,m \\le 5000$。\n\n对于另外 $20\\%$ 的数据，满足 $1\\le n,m \\le 50000$。\n\n对于另外 $20\\%$ 的数据，满足 $d=1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n \\le 10^5$，$1\\le m \\le 5 \\times 10^5$，所有数值为整数，$-10^9 \\le d \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] rldcot", "background": "", "description": "给定一棵 $n$ 个节点的树，树根为 $1$，每个点有一个编号，每条边有一个边权。\n\n定义 $dep(x)$ 表示一个点到根简单路径上边权的和，$lca(x,y)$ 表示 $x,y$ 节点在树上的最近公共祖先。\n\n共 $m$ 组询问，每次询问给出 $l,r$，求对于所有点编号的二元组 $(i,j)$ 满足 $l \\le i,j \\le r$ ，有多少种不同的 $dep( lca(i,j))$。", "inputFormat": "第一行两个用空格隔开的数 $n,m$。\n\n之后 $n-1$ 行，每行三个用空格隔开的数 $u,v,d$ 表示一条 $u$ 到 $v$ 边权为 $d$ 的边。\n\n之后 $m$ 行，每行两个用空格隔开的数 $l,r$ 表示一次询问。", "outputFormat": "共 $m$ 行，一行一个整数，表示询问的答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：lk，Data：nzhtl1477\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m \\le 100$。\n\n对于另外 $20\\%$ 的数据，满足 $1\\le n,m \\le 5000$。\n\n对于另外 $20\\%$ 的数据，满足 $1\\le n,m \\le 50000$。\n\n对于另外 $20\\%$ 的数据，满足 $d=1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n \\le 10^5$，$1\\le m \\le 5 \\times 10^5$，所有数值为整数，$-10^9 \\le d \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7881", "type": "P", "difficulty": 7, "samples": [["10\n2 200842854 123159544\n2 192001936 902183645\n2 996055655 154684468\n2 957446126 232761122\n1 739061119 1 4 6\n1 762263616 1 5 8\n1 669159682 0 10 7\n2 361701640 274578757\n1 392040275 0 2 8\n1 800311125 1 3 2\n", "(0,0,0,0)\n(0,0,0,0)\n(0,0,0,0)\n(0,0,0,0)\n(19,19,329,10)\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2006", "交互题", "Special Judge", "O2优化", "洛谷月赛", "Ynoi"], "title": "[Ynoi2006] rmpq", "background": "", "description": "你需要包含头文件`lib.h`；\n\n在本地编译时，需要和 `lib.cpp` 一起编译；\n\n交互库提供了以下数据类型和函数：\n\n```cpp\nstruct Data{\n\tunsigned short a,b,c,d;\n\tvoid operator*=(const Data &x);\n\tvoid clr();\n};\n```\n\nData 类型是一个含幺半群 $(D,*,e)$，具体地：\n\n$D$ 是类型为 Data 的元素构成的集合；\n\n$*:D\\times D\\to D$\n\n$e\\in D$\n\n$\\forall x,y,z\\in D, x*(y*z)=(x*y)*z$\n\n$\\forall x\\in D, x*e=e*x=x$\n\n使用 `x.clr()` 可以将 $x$ 修改为 $e$；\n\n使用 `x=y` 可以将 $x$ 修改为 $y$；\n\n使用 `x*=y` 可以将 $x$ 修改为 $x*y$，这个操作的调用次数有常数上限 $2\\times 10^7$，不计 $x=e$ 或 $y=e$ 的情况。\n\n初始条件下，平面上每个点 $(x,y)$ 都对应一个权值 $d(x,y)\\in D$；\n\n你需要实现以下函数：\n\n```cpp\nvoid update(int x,int dim,Data d1,Data d2);\n```\n\n对每个 $(x_0,y_0)$ 执行操作：\n\n若 $dim=0$ 且 $x_0<x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d1$；\n\n若 $dim=0$ 且 $x_0\\ge x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d2$；\n\n若 $dim=1$ 且 $y_0<x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d1$；\n\n若 $dim=1$ 且 $y_0\\ge x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d2$；\n\n```cpp\nData query(int x,int y);\n```\n\n查询 $d(x,y)$，返回值为答案。\n\n为了您的方便，这里提供模板。请完善以下代码：\n\n```cpp\n/* BEGIN HEADER: */\nstruct Data{\n\tunsigned short a,b,c,d;\n\tvoid operator*=(const Data &x);\n\tvoid clr();\n};\nvoid update(int x,int dim,Data d1,Data d2);\nData query(int x,int y);\n/* END HEADER. */\n\n#include <bits/stdc++.h>\n\nvoid update(int x,int dim,Data d1,Data d2){\n\t// complete this\n}\nData query(int x,int y){\n\t// complete this\n}\n```\n\n由于洛谷的交互方法比较奇怪，所以提交的时候需要把本地的代码复制过来，放在 update, query 函数这里，和前面的 HEADER 一起提交。提交时不引用 \"lib.h\" 头文件。", "inputFormat": "这是交互题，不需要这种东西。", "outputFormat": "这是交互题，不需要这种东西。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于前 8 组数据，操作个数分别为 $10,1000,10000,20000,40000,60000,80000,10^5$，且 $x,y,dim$ 均匀随机选取；\n\n对于其余数据，操作个数为 $10^5$，且构成子任务。\n\n对于所有数据：\n对于 update 操作，满足 $1\\le x\\le 10^9$，$dim\\in\\{0,1\\}$；\n对于 query 操作，满足 $1\\le x,y\\le 10^9$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] rmpq", "background": "", "description": "你需要包含头文件`lib.h`；\n\n在本地编译时，需要和 `lib.cpp` 一起编译；\n\n交互库提供了以下数据类型和函数：\n\n```cpp\nstruct Data{\n\tunsigned short a,b,c,d;\n\tvoid operator*=(const Data &x);\n\tvoid clr();\n};\n```\n\nData 类型是一个含幺半群 $(D,*,e)$，具体地：\n\n$D$ 是类型为 Data 的元素构成的集合；\n\n$*:D\\times D\\to D$\n\n$e\\in D$\n\n$\\forall x,y,z\\in D, x*(y*z)=(x*y)*z$\n\n$\\forall x\\in D, x*e=e*x=x$\n\n使用 `x.clr()` 可以将 $x$ 修改为 $e$；\n\n使用 `x=y` 可以将 $x$ 修改为 $y$；\n\n使用 `x*=y` 可以将 $x$ 修改为 $x*y$，这个操作的调用次数有常数上限 $2\\times 10^7$，不计 $x=e$ 或 $y=e$ 的情况。\n\n初始条件下，平面上每个点 $(x,y)$ 都对应一个权值 $d(x,y)\\in D$；\n\n你需要实现以下函数：\n\n```cpp\nvoid update(int x,int dim,Data d1,Data d2);\n```\n\n对每个 $(x_0,y_0)$ 执行操作：\n\n若 $dim=0$ 且 $x_0<x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d1$；\n\n若 $dim=0$ 且 $x_0\\ge x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d2$；\n\n若 $dim=1$ 且 $y_0<x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d1$；\n\n若 $dim=1$ 且 $y_0\\ge x$，则将 $d(x_0,y_0)$ 修改为 $d(x_0,y_0)*d2$；\n\n```cpp\nData query(int x,int y);\n```\n\n查询 $d(x,y)$，返回值为答案。\n\n为了您的方便，这里提供模板。请完善以下代码：\n\n```cpp\n/* BEGIN HEADER: */\nstruct Data{\n\tunsigned short a,b,c,d;\n\tvoid operator*=(const Data &x);\n\tvoid clr();\n};\nvoid update(int x,int dim,Data d1,Data d2);\nData query(int x,int y);\n/* END HEADER. */\n\n#include <bits/stdc++.h>\n\nvoid update(int x,int dim,Data d1,Data d2){\n\t// complete this\n}\nData query(int x,int y){\n\t// complete this\n}\n```\n\n由于洛谷的交互方法比较奇怪，所以提交的时候需要把本地的代码复制过来，放在 update, query 函数这里，和前面的 HEADER 一起提交。提交时不引用 \"lib.h\" 头文件。", "inputFormat": "这是交互题，不需要这种东西。", "outputFormat": "这是交互题，不需要这种东西。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于前 8 组数据，操作个数分别为 $10,1000,10000,20000,40000,60000,80000,10^5$，且 $x,y,dim$ 均匀随机选取；\n\n对于其余数据，操作个数为 $10^5$，且构成子任务。\n\n对于所有数据：\n对于 update 操作，满足 $1\\le x\\le 10^9$，$dim\\in\\{0,1\\}$；\n对于 query 操作，满足 $1\\le x,y\\le 10^9$。\n\n", "locale": "zh-CN"}}}
{"pid": "P7882", "type": "P", "difficulty": 7, "samples": [["3 2\n1 1 2\n1 3\n2 3", "6\n3"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2006", "O2优化", "Ynoi"], "title": "[Ynoi2006] rsrams", "background": "", "description": "给定一个长度 $n$ 的序列 $a_1,\\dots,a_n$，你需要处理 $m$ 次查询，每次查询给出 $l,r$，对应答案为：\n\n$\\sum\\limits_{L=l}^r \\sum\\limits_{R=L}^r \\sum\\limits_{c=1}^n c\\cdot \\left[R-L+1<2\\sum\\limits_{i=L}^R [a_i=c] \\right]$。\n\n其中 $[\\mathrm{cond}]$ 表示如果括号中的条件表达式为真，则对应 $[\\mathrm{cond}]=1$，否则对应 $[\\mathrm{cond}]=0$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$\n\n接下来 $m$ 行，每行两个整数 $l,r$ 表示一次查询。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次询问的答案。", "hint": "Idea：zjjcth330，Solution：nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$1\\le m\\le 10^6$，$1\\le a_i\\le n$，$1\\le l\\le r\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] rsrams", "background": "", "description": "给定一个长度 $n$ 的序列 $a_1,\\dots,a_n$，你需要处理 $m$ 次查询，每次查询给出 $l,r$，对应答案为：\n\n$\\sum\\limits_{L=l}^r \\sum\\limits_{R=L}^r \\sum\\limits_{c=1}^n c\\cdot \\left[R-L+1<2\\sum\\limits_{i=L}^R [a_i=c] \\right]$。\n\n其中 $[\\mathrm{cond}]$ 表示如果括号中的条件表达式为真，则对应 $[\\mathrm{cond}]=1$，否则对应 $[\\mathrm{cond}]=0$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$\n\n接下来 $m$ 行，每行两个整数 $l,r$ 表示一次查询。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次询问的答案。", "hint": "Idea：zjjcth330，Solution：nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$1\\le m\\le 10^6$，$1\\le a_i\\le n$，$1\\le l\\le r\\le n$。", "locale": "zh-CN"}}}
{"pid": "P7883", "type": "P", "difficulty": 5, "samples": [["2\n-10000000 -10000000\n10000000 10000000", "800000000000000"], ["5\n1 1\n1 9\n9 1\n9 9\n0 10", "2"]], "limits": {"time": [350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350, 350], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "O2优化", "分治"], "title": "平面最近点对（加强加强版）", "background": "[P1429 平面最近点对（加强版）](https://www.luogu.com.cn/problem/P1429)里最高赞题解写道：\n\n> 我们充分发扬人类智慧：  \n> 将所有点全部绕原点旋转同一个角度，然后按 $x$ 坐标排序  \n> 根据数学直觉，在随机旋转后，答案中的两个点在数组中肯定不会离得太远  \n> 所以我们只取每个点向后的 $5$ 个点来计算答案  \n这样速度快得飞起，在 $n=1000000$ 时都可以在 1s 内卡过\n\n当然，这是错的。\n", "description": "给定 $n$ 个二维欧几里得平面上的点 $p_1, p_2, \\dots, p_n$，请输出距离最近的两个点的距离。", "inputFormat": "输入第一行为一个正整数 $n$，表示点数。\n\n接下来 $n$ 行，第 $i$ 行为用空格隔开的整数 $x_i, y_i$，表示 $p_i = (x_i, y_i)$。\n\n输入保证：没有两个坐标完全相同的点。", "outputFormat": "输出一行，包含一个整数 $D^2$，表示距离最近的两个点的距离的**平方**。\n\n由于输入的点为整点，因此这个值一定是整数。", "hint": "对于第二组样例，$(1, 9)$、$(0, 10)$ 两个点最近，距离为 $\\sqrt 2$，因此你需要输出 $2$。\n\n\n\n### 数据范围\n\n对于 $100 \\%$ 的数据，$2 \\leq n \\leq 4 \\times 10^5$，$-10^7 \\leq x_i, y_i \\leq 10^7$。\n\n\n本题目标复杂度是 $O(n \\log ^2 n)$。设置 350ms 时限的原因是：\n1. $O(n \\log ^2 n)$ 参考代码使用 `cin` 不会 TLE。最快的 std 能 $<$ 100ms。\n2. @wlzhouzhuan 的程序能恰好在 350ms 内跑 $1000n$ 次检查。\n3. 150 组测试数据，为了防止卡评测。\n\n2025.2.6 添加了三组 hack 数据（Credit to @[chenbs](https://www.luogu.com.cn/discuss/1056231)）。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "平面最近点对（加强加强版）", "background": "[P1429 平面最近点对（加强版）](https://www.luogu.com.cn/problem/P1429)里最高赞题解写道：\n\n> 我们充分发扬人类智慧：  \n> 将所有点全部绕原点旋转同一个角度，然后按 $x$ 坐标排序  \n> 根据数学直觉，在随机旋转后，答案中的两个点在数组中肯定不会离得太远  \n> 所以我们只取每个点向后的 $5$ 个点来计算答案  \n这样速度快得飞起，在 $n=1000000$ 时都可以在 1s 内卡过\n\n当然，这是错的。\n", "description": "给定 $n$ 个二维欧几里得平面上的点 $p_1, p_2, \\dots, p_n$，请输出距离最近的两个点的距离。", "inputFormat": "输入第一行为一个正整数 $n$，表示点数。\n\n接下来 $n$ 行，第 $i$ 行为用空格隔开的整数 $x_i, y_i$，表示 $p_i = (x_i, y_i)$。\n\n输入保证：没有两个坐标完全相同的点。", "outputFormat": "输出一行，包含一个整数 $D^2$，表示距离最近的两个点的距离的**平方**。\n\n由于输入的点为整点，因此这个值一定是整数。", "hint": "对于第二组样例，$(1, 9)$、$(0, 10)$ 两个点最近，距离为 $\\sqrt 2$，因此你需要输出 $2$。\n\n\n\n### 数据范围\n\n对于 $100 \\%$ 的数据，$2 \\leq n \\leq 4 \\times 10^5$，$-10^7 \\leq x_i, y_i \\leq 10^7$。\n\n\n本题目标复杂度是 $O(n \\log ^2 n)$。设置 350ms 时限的原因是：\n1. $O(n \\log ^2 n)$ 参考代码使用 `cin` 不会 TLE。最快的 std 能 $<$ 100ms。\n2. @wlzhouzhuan 的程序能恰好在 350ms 内跑 $1000n$ 次检查。\n3. 150 组测试数据，为了防止卡评测。\n\n2025.2.6 添加了三组 hack 数据（Credit to @[chenbs](https://www.luogu.com.cn/discuss/1056231)）。\n", "locale": "zh-CN"}}}
{"pid": "P7884", "type": "P", "difficulty": 7, "samples": [["10", "4"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "数论", "洛谷原创", "筛法", "模板题"], "title": "【模板】Meissel-Lehmer", "background": "", "description": "给定整数 $n$，求出 $\\pi(n)$ 的值。\n\n$\\pi(n)$ 表示 $1 \\sim n$ 的整数中质数的个数。", "inputFormat": "一行，一个整数 $n$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^{13}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】Meissel-Lehmer", "background": "", "description": "给定整数 $n$，求出 $\\pi(n)$ 的值。\n\n$\\pi(n)$ 表示 $1 \\sim n$ 的整数中质数的个数。", "inputFormat": "一行，一个整数 $n$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^{13}$。", "locale": "zh-CN"}}}
{"pid": "P7885", "type": "P", "difficulty": 2, "samples": [["3\n-2 0 -2 1\n0 1 3 3\n-1 1 1 1", "1\n5\n4"]], "limits": {"time": [2000, 2000, 2000], "memory": [524288, 524288, 524288]}, "tags": ["2021", "O2优化", "洛谷月赛"], "title": "「MCOI-06」Flight", "background": "", "description": "书虫需要移动他的[盾构机](https://www.luogu.com.cn/problem/P7569)。\n\n书虫将 MC 空间抽象为二维平面。他的盾构机现在在 $(a,b)$，而书虫想把盾构机移动到 $(c,d)$。\n\n书虫每一步可以将盾构机向东南西北任何方向行动。但是这盾构机有一个限制：相邻两步不能向同一个方向走！\n\n给定 $(a,b)$ 和 $(c,d)$，请计算书虫最少需要几步将盾构机移动到终点。\n\n求书虫的最少步数。可以证明，他永远可以到达终点。\n\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示表示数据的组数。\n\n接下来 $T$ 行，每行四个整数 $a,b,c,d$，代表一组数据，其中 $(a,b)$ 为起点，$(c,d)$ 为终点。", "outputFormat": "输出 $T$ 行，第 $i$ 行代表第 $i$ 组数据的答案。", "hint": "#### 样例 1 解释\n\n - 对于第一组，最优策略为 $(-2,0)\\rarr(-2,1)$。\n - 对于第二组，最优策略为 $(0,1)\\rarr(1,1)\\rarr(1,2)\\rarr(2,2)\\rarr(2,3)\\rarr(3,3)$。\n - 对于第三组，最优策略之一为 $(-1,1)\\rarr (0,1)\\rarr(0,0)\\rarr(1,0)\\rarr(1,1)$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（29 pts）：$0\\le a,b,c,d\\le 3$。\n - Subtask 2（29 pts）：$a=c$。\n - Subtask 3（42 pts）：无特殊限制。\n\n对于所有数据，$1\\le T\\le 10^5$，$|a|,|b|,|c|,|d|\\le10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Flight", "background": "", "description": "书虫需要移动他的[盾构机](https://www.luogu.com.cn/problem/P7569)。\n\n书虫将 MC 空间抽象为二维平面。他的盾构机现在在 $(a,b)$，而书虫想把盾构机移动到 $(c,d)$。\n\n书虫每一步可以将盾构机向东南西北任何方向行动。但是这盾构机有一个限制：相邻两步不能向同一个方向走！\n\n给定 $(a,b)$ 和 $(c,d)$，请计算书虫最少需要几步将盾构机移动到终点。\n\n求书虫的最少步数。可以证明，他永远可以到达终点。\n\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示表示数据的组数。\n\n接下来 $T$ 行，每行四个整数 $a,b,c,d$，代表一组数据，其中 $(a,b)$ 为起点，$(c,d)$ 为终点。", "outputFormat": "输出 $T$ 行，第 $i$ 行代表第 $i$ 组数据的答案。", "hint": "#### 样例 1 解释\n\n - 对于第一组，最优策略为 $(-2,0)\\rarr(-2,1)$。\n - 对于第二组，最优策略为 $(0,1)\\rarr(1,1)\\rarr(1,2)\\rarr(2,2)\\rarr(2,3)\\rarr(3,3)$。\n - 对于第三组，最优策略之一为 $(-1,1)\\rarr (0,1)\\rarr(0,0)\\rarr(1,0)\\rarr(1,1)$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（29 pts）：$0\\le a,b,c,d\\le 3$。\n - Subtask 2（29 pts）：$a=c$。\n - Subtask 3（42 pts）：无特殊限制。\n\n对于所有数据，$1\\le T\\le 10^5$，$|a|,|b|,|c|,|d|\\le10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P7886", "type": "P", "difficulty": 2, "samples": [["3\n3 3 3\n3 3 33\n6 6 4", "YES\n1 1 2\n1 2 2\n3 3 3\nNO\nYES\n1 1 2 2 3 3\n1 2 2 4 4 3\n1 5 5 4 6 3\n5 5 7 4 6 6\n8 7 7 7 9 6\n8 8 8 9 9 9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "O2优化", "洛谷月赛"], "title": "「MCOI-06」Gerrymandering", "background": "", "description": "给定正整数 $n,m,k$，能否将一个 $n\\times m$ 表格染色，使得每一个颜色形成恰好一个连通块，并且每一个连通块大小为 $k$？\n\n如果存在，请构造一个合法方案。", "inputFormat": "**本题有多组数据。**  \n\n第一行一个正整数 $T$，表示表示数据的组数。  \n\n接下来 $T$ 行，每行三个正整数 $n,m,k$。", "outputFormat": "输出 $T$ 行，第 $i$ 行含第 $i$ 组数据的答案。如果存在，输出 `YES`，否则，输出 `NO`。  \n\n如果存在，接下来输出 $n$ 行，其中每行 $m$ 个正整数，其中每一个正整数小于等于 $10^9$ 并且形成一个大小恰好为 $k$ 的连通块。", "hint": "#### 样例 1 解释\n\n数据组 3 的合法输出之一：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xxqa4azm.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（20 pts）：$k=1$。\n - Subtask 2（30 pts）：$n=1$。\n - Subtask 3（50 pts）：没有特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,m,k,T,\\sum nm\\le10^{6}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Gerrymandering", "background": "", "description": "给定正整数 $n,m,k$，能否将一个 $n\\times m$ 表格染色，使得每一个颜色形成恰好一个连通块，并且每一个连通块大小为 $k$？\n\n如果存在，请构造一个合法方案。", "inputFormat": "**本题有多组数据。**  \n\n第一行一个正整数 $T$，表示表示数据的组数。  \n\n接下来 $T$ 行，每行三个正整数 $n,m,k$。", "outputFormat": "输出 $T$ 行，第 $i$ 行含第 $i$ 组数据的答案。如果存在，输出 `YES`，否则，输出 `NO`。  \n\n如果存在，接下来输出 $n$ 行，其中每行 $m$ 个正整数，其中每一个正整数小于等于 $10^9$ 并且形成一个大小恰好为 $k$ 的连通块。", "hint": "#### 样例 1 解释\n\n数据组 3 的合法输出之一：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xxqa4azm.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（20 pts）：$k=1$。\n - Subtask 2（30 pts）：$n=1$。\n - Subtask 3（50 pts）：没有特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n,m,k,T,\\sum nm\\le10^{6}$。", "locale": "zh-CN"}}}
{"pid": "P7887", "type": "P", "difficulty": 4, "samples": [["2\n3\n3 1 9\n2 2 16\n1 3 15\n6\n3 6 246\n5 7 283\n2 7 179\n4 6 214\n8 7 337\n3 5 151", "1\n1 2 3\n1\n8 8 0 6 7 8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "O2优化", "洛谷月赛"], "title": "「MCOI-06」Existence of Truth", "background": "", "description": "可能存在一个非负整数数序列 $a_1,a_2,\\dots,a_n$ 使得 $0\\le a_i<10^9+7$。\n\n给定 $x_1,x_2,\\dots,x_n$，$y_1,y_2,\\dots,y_n$，$z_1,z_2,\\dots,z_n$，已知对于 $1\\le i\\le n$ 满足：\n\n$$x_i\\left(\\sum_{j=1}^ia_j\\right)+y_i\\left(\\sum_{j=i}^na_j\\right)\\equiv z_i\\pmod{10^9+7}$$\n\n求 $a_1,a_2,\\dots,a_n$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示表示数据的组数。对于每一组数据：\n\n第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行三个正整数 $x_i,y_i,z_i$。", "outputFormat": "对于每一组数据，依次输出：\n\n第一行一个非负整数 $k$，为合法解数量。\n\n如果 $k=1$，第二行输出 $n$ 个非负整数，依次为 $a_1,a_2,\\dots,a_n$。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（10 pts）：$n=1$。\n - Subtask 2（19 pts）：$\\sum n\\le100$。\n - Subtask 3（19 pts）：$x_i=y_i=1$。\n - Subtask 4（22 pts）：保证有**唯一解。**\n - Subtask 5（30 pts）：无特殊限制。\n\n对于所有数据：\n\n - $1\\le n,\\sum n\\le 2\\times10^5$；\n - $1\\le x_i,y_i<10^9+7$；\n - $0\\le z_i<10^9+7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Existence of Truth", "background": "", "description": "可能存在一个非负整数数序列 $a_1,a_2,\\dots,a_n$ 使得 $0\\le a_i<10^9+7$。\n\n给定 $x_1,x_2,\\dots,x_n$，$y_1,y_2,\\dots,y_n$，$z_1,z_2,\\dots,z_n$，已知对于 $1\\le i\\le n$ 满足：\n\n$$x_i\\left(\\sum_{j=1}^ia_j\\right)+y_i\\left(\\sum_{j=i}^na_j\\right)\\equiv z_i\\pmod{10^9+7}$$\n\n求 $a_1,a_2,\\dots,a_n$。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示表示数据的组数。对于每一组数据：\n\n第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行三个正整数 $x_i,y_i,z_i$。", "outputFormat": "对于每一组数据，依次输出：\n\n第一行一个非负整数 $k$，为合法解数量。\n\n如果 $k=1$，第二行输出 $n$ 个非负整数，依次为 $a_1,a_2,\\dots,a_n$。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（10 pts）：$n=1$。\n - Subtask 2（19 pts）：$\\sum n\\le100$。\n - Subtask 3（19 pts）：$x_i=y_i=1$。\n - Subtask 4（22 pts）：保证有**唯一解。**\n - Subtask 5（30 pts）：无特殊限制。\n\n对于所有数据：\n\n - $1\\le n,\\sum n\\le 2\\times10^5$；\n - $1\\le x_i,y_i<10^9+7$；\n - $0\\le z_i<10^9+7$。", "locale": "zh-CN"}}}
{"pid": "P7888", "type": "P", "difficulty": 5, "samples": [["ab", "5"], ["sapnap", "593"], ["abcbdabcbabcd", "938773"], ["tobeornottobethatisthequestion", "769276982"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "O2优化", "组合数学", "洛谷月赛"], "title": "「MCOI-06」Distinct Subsequences", "background": "", "description": "给定一个由小写字符构成的字符串 $S$。\n\n令一个字符串的价值为该串的**本质不同**非空子序列个数，其中子序列可以为整体。\n\n求 $S$ **所有**子序列的价值和。答案对 $10^9+7$ 取模。", "inputFormat": "第一行一个由小写字符构成的字符串 $S$。", "outputFormat": "输出一行，为答案。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（5 pts）：$|S|\\le 11$。\n - Subtask 2（10 pts）：$|S|\\le 22$。\n - Subtask 3（20 pts）：$|S|\\le 100$ 并 $S$ 仅由 `a`，`b` 两个字符构成。\n - Subtask 4（30 pts）：$|S|\\le 5000$。\n - Subtask 5（35 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le |S|\\le 10^6$，保证 $S$ 仅由小写字符构成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Distinct Subsequences", "background": "", "description": "给定一个由小写字符构成的字符串 $S$。\n\n令一个字符串的价值为该串的**本质不同**非空子序列个数，其中子序列可以为整体。\n\n求 $S$ **所有**子序列的价值和。答案对 $10^9+7$ 取模。", "inputFormat": "第一行一个由小写字符构成的字符串 $S$。", "outputFormat": "输出一行，为答案。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（5 pts）：$|S|\\le 11$。\n - Subtask 2（10 pts）：$|S|\\le 22$。\n - Subtask 3（20 pts）：$|S|\\le 100$ 并 $S$ 仅由 `a`，`b` 两个字符构成。\n - Subtask 4（30 pts）：$|S|\\le 5000$。\n - Subtask 5（35 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le |S|\\le 10^6$，保证 $S$ 仅由小写字符构成。", "locale": "zh-CN"}}}
{"pid": "P7889", "type": "P", "difficulty": 6, "samples": [["10 6\n1 1 2 2 3 5 5 5 6\n5 2 3 1 -5 -7 1 1 1 2\n1 0\n1 -2\n1 3\n2 1\n5 0\n5 -2", "11\n4\n34\n7\n-2\n-7"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2021", "O2优化", "洛谷月赛"], "title": "「MCOI-06」Eert Tuc Knil", "background": "", "description": "给定一颗 $n$ 个节点有根树，第 $i$ 节点权值为 $a_i$。\n\n在这个树上支持一种询问：\n\n - 给定节点 $u$ 和参数 $x$，**假如** 所有节点点权加 $x$，**在这种情况下，求：** 对于所有完全在 $u$ 子树内并包含 $u$ 的连通点集，权值之和最大可能为多少？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，依次为 $2,3,\\dots,n$ 的父亲节点编号，其中保证 $1\\le f_i<i$。\n\n第三行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，依次为 $1,2,\\dots,n$ 点权。\n\n接下来 $m$ 行，每行一个正整数 $u$ 和一个整数 $x$，代表一组询问，其中保证 $1\\le u\\le n$。", "outputFormat": "输出 $m$ 行，每行一个整数，为对应询问的答案。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（5 pts）：$n,m\\le 1000$。\n - Subtask 2（10 pts）：$n,m\\le 10^5$ 并且 $|a_i|,|x|\\le 50$。\n - Subtask 3（15 pts）：$n\\le 1000$。\n - Subtask 4（47 pts）：$n,m\\le 10^5$。\n - Subtask 5（23 pts）：无特殊限制。\n\n对于所有数据，$1\\le n,m\\le 10^6$，$|a_i|,|x|\\le 10^8$，保证 $1\\le u\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Eert Tuc Knil", "background": "", "description": "给定一颗 $n$ 个节点有根树，第 $i$ 节点权值为 $a_i$。\n\n在这个树上支持一种询问：\n\n - 给定节点 $u$ 和参数 $x$，**假如** 所有节点点权加 $x$，**在这种情况下，求：** 对于所有完全在 $u$ 子树内并包含 $u$ 的连通点集，权值之和最大可能为多少？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，依次为 $2,3,\\dots,n$ 的父亲节点编号，其中保证 $1\\le f_i<i$。\n\n第三行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，依次为 $1,2,\\dots,n$ 点权。\n\n接下来 $m$ 行，每行一个正整数 $u$ 和一个整数 $x$，代表一组询问，其中保证 $1\\le u\\le n$。", "outputFormat": "输出 $m$ 行，每行一个整数，为对应询问的答案。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n - Subtask 1（5 pts）：$n,m\\le 1000$。\n - Subtask 2（10 pts）：$n,m\\le 10^5$ 并且 $|a_i|,|x|\\le 50$。\n - Subtask 3（15 pts）：$n\\le 1000$。\n - Subtask 4（47 pts）：$n,m\\le 10^5$。\n - Subtask 5（23 pts）：无特殊限制。\n\n对于所有数据，$1\\le n,m\\le 10^6$，$|a_i|,|x|\\le 10^8$，保证 $1\\le u\\le n$。", "locale": "zh-CN"}}}
{"pid": "P7890", "type": "P", "difficulty": 7, "samples": [["3 1926195307\n2 3 3\n3 3 3\n5 6 1", "8\n64\n363031200"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2021", "Special Judge", "O2优化", "哈希 hashing", "素数判断,质数,筛法", "最大公约数 gcd", "莫比乌斯反演", "组合数学", "随机化", "洛谷月赛"], "title": "「MCOI-06」Lost Desire", "background": "頰滴る　紅い涙\n\n不安定な視界の中\n\n差し出した手を取れたら\n\nあぁ…そんな世界を夢みた\n\n-------\n\n哭いて…\n\n激しく  燃やした 黒い感情 \n\n届かぬ この手に\n\nCry 闇の中で\n\n最果てから 光へ手を翳して\n\n揺らいだ想いさえも 闇の奥底へ堕ちてく\n\n[网易云本曲试听链接](https://music.163.com/song?id=1809745288&userid=1399272307)", "description": "设正整数 $n, m$ 互质，$k$ 为整数，定义函数 $F(n, m, k)$ 为小于 $\\displaystyle m+n$ 的正整数集合 $\\{1, 2, \\cdots, m + n - 1\\}$ 中，所有满足 $\\displaystyle\\sum_{x \\in S} x \\equiv k \\pmod n$ 的 $m$ 元子集 $S$ 的个数。\n\n现给定正整数 $N, M, K$，求所有 $F(i,j,x)$ 之积，使得 $1\\le i\\le N$，$1\\le j\\le M$，$1\\le x\\le K$，并且 $i$ 与 $j$ 互质。\n\n由于结果很大，所以你只需要求出结果对特定素数 $p$ 取模的值。\n\n**同时请注意实现程序时常数因子带来的影响。**", "inputFormat": "**本题多测。** 每个测试点共有 $T$ 组数据。\n\n第一行两个正整数 $T,p$ 。\n\n接下来 $T$ 行，每行三个正整数 $N, M, K$，由空格分开。", "outputFormat": "对于每组数据：一行，一个整数，表示所求的值（对 $p$ 取模）。\n", "hint": "本题采用捆绑测试，分 $5$ 个 Subtask 。\n\n+ 对于 Subtask 1 ~~(Tutorial)~~：\n  + $T=1$\n  + $1\\leq N,M,K\\leq 6$\n  + $p=10^9+7$。\n+ 对于 Subtask 2 ~~(PST 4.0)~~：\n  + $T=1$\n  + $1\\leq N,M,K\\leq200$\n  + $p=10^9+7$。\n+ 对于 Subtask 3 ~~(PRS 7.5)~~：\n  + $T=100$\n  + $1\\leq N,M,K\\leq 1000$\n  + $p=10^9+7$。\n+ 对于 Subtask 4 ~~(FTR 9.8)~~：\n  + $T=10^3$\n  + $1 \\leq N,M,K\\le 10^5$\n  + $10^9\\le p\\le2\\times10^9$。\n+ 对于 Subtask 5 ~~(BYD 11.0)~~：\n  + $T=9999$\n  + $1 \\leq N,M,K\\le 5\\times10^5$\n  + $10^9\\le p\\le2\\times10^9$。\n\nSubtask $1\\sim5$ 的分值分别为 $5,7,11,17,60$ 。\n\n特别的，假设您在一个测试点中前 $x$ 个询问正确，则您得该测试点的分值的 $\\left\\lfloor100\\times\\sqrt\\dfrac{x}{T}\\right\\rfloor\\%$ 分。您在任何一个 Subtask 的得分则为对应 Subtask 中所有测试点得分的最小值。\n\n特别的，**TLE 一律不得分。**（无需补满未在时间范围内解决的测试点的答案，会导致奇怪的错误。）\n\n**再次提醒注意实现程序时常数因子带来的影响。**\n\n---\n\nIdea: Powerless Std&Data: w33z （Data was corrected on 2021.10.05）\n\nSub4 added by Prean, Sub 5 by w33z.\n\nThis problem was added on 2021.10.01. Thanks for their help.\n\n2021.10.01 - 2021.12.07 : 68 days 1st kill (Leasier).\n\n2021.10.01 - 2022.01.21 : 113 days 2nd kill (wkywkywky).\n\n2021.10.01 - 2022.02.26 : 149 days 3rd kill (NaNH2).", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Lost Desire", "background": "頰滴る　紅い涙\n\n不安定な視界の中\n\n差し出した手を取れたら\n\nあぁ…そんな世界を夢みた\n\n-------\n\n哭いて…\n\n激しく  燃やした 黒い感情 \n\n届かぬ この手に\n\nCry 闇の中で\n\n最果てから 光へ手を翳して\n\n揺らいだ想いさえも 闇の奥底へ堕ちてく\n\n[网易云本曲试听链接](https://music.163.com/song?id=1809745288&userid=1399272307)", "description": "设正整数 $n, m$ 互质，$k$ 为整数，定义函数 $F(n, m, k)$ 为小于 $\\displaystyle m+n$ 的正整数集合 $\\{1, 2, \\cdots, m + n - 1\\}$ 中，所有满足 $\\displaystyle\\sum_{x \\in S} x \\equiv k \\pmod n$ 的 $m$ 元子集 $S$ 的个数。\n\n现给定正整数 $N, M, K$，求所有 $F(i,j,x)$ 之积，使得 $1\\le i\\le N$，$1\\le j\\le M$，$1\\le x\\le K$，并且 $i$ 与 $j$ 互质。\n\n由于结果很大，所以你只需要求出结果对特定素数 $p$ 取模的值。\n\n**同时请注意实现程序时常数因子带来的影响。**", "inputFormat": "**本题多测。** 每个测试点共有 $T$ 组数据。\n\n第一行两个正整数 $T,p$ 。\n\n接下来 $T$ 行，每行三个正整数 $N, M, K$，由空格分开。", "outputFormat": "对于每组数据：一行，一个整数，表示所求的值（对 $p$ 取模）。\n", "hint": "本题采用捆绑测试，分 $5$ 个 Subtask 。\n\n+ 对于 Subtask 1 ~~(Tutorial)~~：\n  + $T=1$\n  + $1\\leq N,M,K\\leq 6$\n  + $p=10^9+7$。\n+ 对于 Subtask 2 ~~(PST 4.0)~~：\n  + $T=1$\n  + $1\\leq N,M,K\\leq200$\n  + $p=10^9+7$。\n+ 对于 Subtask 3 ~~(PRS 7.5)~~：\n  + $T=100$\n  + $1\\leq N,M,K\\leq 1000$\n  + $p=10^9+7$。\n+ 对于 Subtask 4 ~~(FTR 9.8)~~：\n  + $T=10^3$\n  + $1 \\leq N,M,K\\le 10^5$\n  + $10^9\\le p\\le2\\times10^9$。\n+ 对于 Subtask 5 ~~(BYD 11.0)~~：\n  + $T=9999$\n  + $1 \\leq N,M,K\\le 5\\times10^5$\n  + $10^9\\le p\\le2\\times10^9$。\n\nSubtask $1\\sim5$ 的分值分别为 $5,7,11,17,60$ 。\n\n特别的，假设您在一个测试点中前 $x$ 个询问正确，则您得该测试点的分值的 $\\left\\lfloor100\\times\\sqrt\\dfrac{x}{T}\\right\\rfloor\\%$ 分。您在任何一个 Subtask 的得分则为对应 Subtask 中所有测试点得分的最小值。\n\n特别的，**TLE 一律不得分。**（无需补满未在时间范围内解决的测试点的答案，会导致奇怪的错误。）\n\n**再次提醒注意实现程序时常数因子带来的影响。**\n\n---\n\nIdea: Powerless Std&Data: w33z （Data was corrected on 2021.10.05）\n\nSub4 added by Prean, Sub 5 by w33z.\n\nThis problem was added on 2021.10.01. Thanks for their help.\n\n2021.10.01 - 2021.12.07 : 68 days 1st kill (Leasier).\n\n2021.10.01 - 2022.01.21 : 113 days 2nd kill (wkywkywky).\n\n2021.10.01 - 2022.02.26 : 149 days 3rd kill (NaNH2).", "locale": "zh-CN"}}}
{"pid": "P7891", "type": "P", "difficulty": 3, "samples": [["2\n3 2", "2 3"], ["5\n1 2 3 4 5", "9 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "语言月赛"], "title": "[入门赛 #10] Coin Selection G（hard version）", "background": "", "description": "Farmer John 和 Bessie 正在一起玩硬币选择游戏。\n\n初始时桌面上有 $n$ 枚硬币，每枚硬币有一个面额，我们使用 $a _ 1, a _ 2, \\cdots, a _ n$ 分别代表第 $1, 2, \\cdots, n$ 枚硬币的面额。\n\n他们还各有一个属于自己的钱包，初始时，钱包都是空的。\n\n从 **Bessie** 开始，双方轮流操作。每次操作中，当前的操作者会从桌面上剩余的硬币中选择**面值不超过当前自己钱包中硬币的总面额**的硬币中**面额最大的**一枚硬币，把它从桌子上拿走，放到自己的钱包里。如果桌面上剩余的**所有**硬币面值都**超过了自己钱包里已有硬币的总面额**，那么选择剩余的所有硬币中面额**最小**的一个。\n\n当桌面上没有硬币时，游戏结束。\n\n请你分别求出，\t游戏结束后，Farmer John 和 Bessie 钱包里硬币的总面额。", "inputFormat": "第一行为一个整数，代表初始时桌面上的硬币的数量 $n$。  \n第二行为 $n$ 个整数 $a _ 1, a _ 2, \\cdots, a _ n$，分别代表第 $1, 2, \\cdots, n$ 枚硬币的面额。", "outputFormat": "输出一行两个整数，第一个整数表示 Bessie 最终钱包里硬币的总面额，第二个整数表示 Farmer John 最终钱包里的总面额。", "hint": "### 数据规模与约定\n\n- 对 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq a_i \\leq 10^{9}$。\n\nProvider：一扶苏一", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #10] Coin Selection G（hard version）", "background": "", "description": "Farmer John 和 Bessie 正在一起玩硬币选择游戏。\n\n初始时桌面上有 $n$ 枚硬币，每枚硬币有一个面额，我们使用 $a _ 1, a _ 2, \\cdots, a _ n$ 分别代表第 $1, 2, \\cdots, n$ 枚硬币的面额。\n\n他们还各有一个属于自己的钱包，初始时，钱包都是空的。\n\n从 **Bessie** 开始，双方轮流操作。每次操作中，当前的操作者会从桌面上剩余的硬币中选择**面值不超过当前自己钱包中硬币的总面额**的硬币中**面额最大的**一枚硬币，把它从桌子上拿走，放到自己的钱包里。如果桌面上剩余的**所有**硬币面值都**超过了自己钱包里已有硬币的总面额**，那么选择剩余的所有硬币中面额**最小**的一个。\n\n当桌面上没有硬币时，游戏结束。\n\n请你分别求出，\t游戏结束后，Farmer John 和 Bessie 钱包里硬币的总面额。", "inputFormat": "第一行为一个整数，代表初始时桌面上的硬币的数量 $n$。  \n第二行为 $n$ 个整数 $a _ 1, a _ 2, \\cdots, a _ n$，分别代表第 $1, 2, \\cdots, n$ 枚硬币的面额。", "outputFormat": "输出一行两个整数，第一个整数表示 Bessie 最终钱包里硬币的总面额，第二个整数表示 Farmer John 最终钱包里的总面额。", "hint": "### 数据规模与约定\n\n- 对 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq a_i \\leq 10^{9}$。\n\nProvider：一扶苏一", "locale": "zh-CN"}}}
{"pid": "P7892", "type": "P", "difficulty": 2, "samples": [["2\n4 1\n4 20", "Miss\nGood"]], "limits": {"time": [150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化"], "title": "『JROI-3』田径", "background": "你准备玩起 MC。", "description": "你需要用栅栏框住一个长方形区域，假设这个长方形区域大小为 $a \\times b$ 个像素格，则需要长为 $a+1$，宽为 $b+1$ 规模的栅栏框住这个区域。\n\n现在你发现他的羊和牛需要**恰好** $n$ 个像素格才够生存，而你的背包里有 $m$ 个栅栏，你想知道，你用你所拥有的的栅栏是否能框出 $n$ 个像素格？\n\n不需要用光所有栅栏，只要框出区域大小为 $n$ 个像素格的长方形即可。\n\n注意，上面的 $a,b,n,m$ 都应是整数。", "inputFormat": "第一行一个整数 $T$，表示测试组数。\n\n接下来 $T$ 行，一行两个整数 $n,m$，同题意。", "outputFormat": "一行一个字符串，如果可行输出 `Good`，如果不可行输出 `Miss`。", "hint": "#### 样例 1 解释\n\n第一组数据：\n\n实测可证，无法用 $1$ 个栅栏围出 $4$ 个像素格。\n\n第二组数据：\n\n可以考虑围出如下 $4=1 \\times 4$ 的像素格。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bho8z78k.png)\n\n用下方的方式只需要用 $14$ 个栅栏即可。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o8s6bz81.png)\n\n栅栏宽为 $1+1=2$，长为 $4+1=5$，$(2+5) \\times 2=14$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（30 pts）：$1\\le n,m \\le 10^4$，$T \\leq 10^3$；\n- Subtask 2（70 pts）：$1\\le n,m \\le 10^{8}$，$T \\leq 10^3$。\n\n----\n在本题中栅栏是**抽象化**的而非具象化的，即栅栏将会**退化成一个点而非一个方格**，也就是我们可以通过**求周长的方式**求出一个栅栏框所需消耗的栅栏（如果不理解可以看看样例 1 解释）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-3』田径", "background": "你准备玩起 MC。", "description": "你需要用栅栏框住一个长方形区域，假设这个长方形区域大小为 $a \\times b$ 个像素格，则需要长为 $a+1$，宽为 $b+1$ 规模的栅栏框住这个区域。\n\n现在你发现他的羊和牛需要**恰好** $n$ 个像素格才够生存，而你的背包里有 $m$ 个栅栏，你想知道，你用你所拥有的的栅栏是否能框出 $n$ 个像素格？\n\n不需要用光所有栅栏，只要框出区域大小为 $n$ 个像素格的长方形即可。\n\n注意，上面的 $a,b,n,m$ 都应是整数。", "inputFormat": "第一行一个整数 $T$，表示测试组数。\n\n接下来 $T$ 行，一行两个整数 $n,m$，同题意。", "outputFormat": "一行一个字符串，如果可行输出 `Good`，如果不可行输出 `Miss`。", "hint": "#### 样例 1 解释\n\n第一组数据：\n\n实测可证，无法用 $1$ 个栅栏围出 $4$ 个像素格。\n\n第二组数据：\n\n可以考虑围出如下 $4=1 \\times 4$ 的像素格。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bho8z78k.png)\n\n用下方的方式只需要用 $14$ 个栅栏即可。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o8s6bz81.png)\n\n栅栏宽为 $1+1=2$，长为 $4+1=5$，$(2+5) \\times 2=14$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（30 pts）：$1\\le n,m \\le 10^4$，$T \\leq 10^3$；\n- Subtask 2（70 pts）：$1\\le n,m \\le 10^{8}$，$T \\leq 10^3$。\n\n----\n在本题中栅栏是**抽象化**的而非具象化的，即栅栏将会**退化成一个点而非一个方格**，也就是我们可以通过**求周长的方式**求出一个栅栏框所需消耗的栅栏（如果不理解可以看看样例 1 解释）。", "locale": "zh-CN"}}}
{"pid": "P7893", "type": "P", "difficulty": 3, "samples": [["1\n3 2", "2"], ["1\n100 5", "84"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2021", "O2优化", "容斥原理", "洛谷月赛"], "title": "『JROI-3』Reversi", "background": "**赛时提醒：如果您始终是 30pts，且使用了题目给的快速读入，请重新拷贝修改后的快速读入。**\n\n**赛时提醒：本题如果解法正确，快读可能无法起到优化作用。**\n\n\t这个恐怕是将存在乃至于记忆切割成三十二颗的争夺黑白棋。\n\n    双方剩下的棋子数字都很小——也就是重要性很高吧。\n\n\t\t\t\t......\n            \n    ——哥哥为什么会让自己落单呢？她原本对此感到疑惑。\n\n    不过，在得知答案之后，那可以说是理所当然的做法。\n\n    首先，第一个理由极为单纯。\n\n    故意将记忆托付给对方，暂时屈居败势的目的是——\n\n    「……那种事……白……做不到啊……」\n\n    想像了一下，白露出悲伤的笑容，做出这个结论。\n\n    哥哥做的这些事，如果由白执行……白不觉得自己的精神能够保持正常。\n\n    自己仅仅因为哥哥从身旁消失，就甚至一度怀疑哥哥的存在。\n\n    ——被忘掉的话还好。\n\n    ——忘掉哥哥的话——白确信自己的精神会无法保持正常。\n    \n\t\t\t\t......\n                \n    （……这里……哥哥在……这里……）\n\n    即使是空无一物的空间，但是白确信，她感觉得到哥哥的位置。\n\n    白顿时眼眶一热，不过她强行忍住，继续思考。\n\n    （……然后这就是……第二个……同时也是……最大的……理由。）\n\n    白将写着【参】的棋子白色面朝上，用手指夹住。\n\n    哥哥是『白色还是黑色』，这个问题也不需要犹豫。\n\n    因为既然他将最后的棋局托付给『白』——那他当然是持白棋。\n\n    这个现在看不见，甚至无法认知的棋局。\n\n    既没有开始的记忆，也不知道盘面的经过如何。\n\n    不过哥哥故意下输，并且为了让白能获胜所可能下的棋步……\n\n    而对方看到之后，完全中了哥哥的计谋，被诱导而下的棋步……\n\n    然后，为了逆转，哥哥可能选择的所有位置分布。\n\n    将这些全部推测分析——仅用三步棋反败为胜。\n\n\t\t\t\t......\n            \n    然后——原先失去一天半的记忆——逆流了回来——\n", "description": "**白**在和森精种玩黑白棋，但黑白棋的规则有所改变。\n\n有 $n$ 个黑白棋子，第 $i$ 个棋子编号为 $i$。棋子初始全为黑，游戏中，仅由**白**一人操作，**白**希望尽可能多的把棋子变成白色。\n\n**白**要求第 $k$ 个棋子和第 $k \\times p$ 个不能同时变成白色。\n\n**白**共玩了 $T$ 次，每次**白**想知道最多能把多少棋子变成白色。**每次游戏独立。**\n\n为避免混淆，加粗的**白**是人名。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。\n\n下面 $T$ 行每行两个整数 $n,p$，同题意。", "outputFormat": "共 $T$ 行，每行一个正整数，表示**白**最多能把多少枚棋子变为白色。", "hint": "#### 样例 1 解释\n\n可以选择第 $2,3$ 个棋子变色。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$T \\le 5$，$n \\le 2$；\n- Subtask 2（5 pts）：$T \\le 5$，$n \\le 10$；\n- Subtask 3（20 pts）：$T \\le 5$，$n \\le 10^6$；\n- Subtask 4（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le T \\le 10^6$，$0 \\le n \\le 10^{18}$，$1 \\le p \\le 10^{9}$。\n\n```\n//快读模板\n//赛时提醒：快读没有太大必要使用\ninline long long read(){\n   long long s=0,w=1;\n   char ch=getchar();\n   while(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n   while(ch>='0'&&ch<='9')s=s*10+ch-'0',ch=getchar();\n   return s*w;\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-3』Reversi", "background": "**赛时提醒：如果您始终是 30pts，且使用了题目给的快速读入，请重新拷贝修改后的快速读入。**\n\n**赛时提醒：本题如果解法正确，快读可能无法起到优化作用。**\n\n\t这个恐怕是将存在乃至于记忆切割成三十二颗的争夺黑白棋。\n\n    双方剩下的棋子数字都很小——也就是重要性很高吧。\n\n\t\t\t\t......\n            \n    ——哥哥为什么会让自己落单呢？她原本对此感到疑惑。\n\n    不过，在得知答案之后，那可以说是理所当然的做法。\n\n    首先，第一个理由极为单纯。\n\n    故意将记忆托付给对方，暂时屈居败势的目的是——\n\n    「……那种事……白……做不到啊……」\n\n    想像了一下，白露出悲伤的笑容，做出这个结论。\n\n    哥哥做的这些事，如果由白执行……白不觉得自己的精神能够保持正常。\n\n    自己仅仅因为哥哥从身旁消失，就甚至一度怀疑哥哥的存在。\n\n    ——被忘掉的话还好。\n\n    ——忘掉哥哥的话——白确信自己的精神会无法保持正常。\n    \n\t\t\t\t......\n                \n    （……这里……哥哥在……这里……）\n\n    即使是空无一物的空间，但是白确信，她感觉得到哥哥的位置。\n\n    白顿时眼眶一热，不过她强行忍住，继续思考。\n\n    （……然后这就是……第二个……同时也是……最大的……理由。）\n\n    白将写着【参】的棋子白色面朝上，用手指夹住。\n\n    哥哥是『白色还是黑色』，这个问题也不需要犹豫。\n\n    因为既然他将最后的棋局托付给『白』——那他当然是持白棋。\n\n    这个现在看不见，甚至无法认知的棋局。\n\n    既没有开始的记忆，也不知道盘面的经过如何。\n\n    不过哥哥故意下输，并且为了让白能获胜所可能下的棋步……\n\n    而对方看到之后，完全中了哥哥的计谋，被诱导而下的棋步……\n\n    然后，为了逆转，哥哥可能选择的所有位置分布。\n\n    将这些全部推测分析——仅用三步棋反败为胜。\n\n\t\t\t\t......\n            \n    然后——原先失去一天半的记忆——逆流了回来——\n", "description": "**白**在和森精种玩黑白棋，但黑白棋的规则有所改变。\n\n有 $n$ 个黑白棋子，第 $i$ 个棋子编号为 $i$。棋子初始全为黑，游戏中，仅由**白**一人操作，**白**希望尽可能多的把棋子变成白色。\n\n**白**要求第 $k$ 个棋子和第 $k \\times p$ 个不能同时变成白色。\n\n**白**共玩了 $T$ 次，每次**白**想知道最多能把多少棋子变成白色。**每次游戏独立。**\n\n为避免混淆，加粗的**白**是人名。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。\n\n下面 $T$ 行每行两个整数 $n,p$，同题意。", "outputFormat": "共 $T$ 行，每行一个正整数，表示**白**最多能把多少枚棋子变为白色。", "hint": "#### 样例 1 解释\n\n可以选择第 $2,3$ 个棋子变色。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$T \\le 5$，$n \\le 2$；\n- Subtask 2（5 pts）：$T \\le 5$，$n \\le 10$；\n- Subtask 3（20 pts）：$T \\le 5$，$n \\le 10^6$；\n- Subtask 4（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le T \\le 10^6$，$0 \\le n \\le 10^{18}$，$1 \\le p \\le 10^{9}$。\n\n```\n//快读模板\n//赛时提醒：快读没有太大必要使用\ninline long long read(){\n   long long s=0,w=1;\n   char ch=getchar();\n   while(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n   while(ch>='0'&&ch<='9')s=s*10+ch-'0',ch=getchar();\n   return s*w;\n}\n```", "locale": "zh-CN"}}}
{"pid": "P7894", "type": "P", "difficulty": 6, "samples": [["3 3\n3 5 8\n4 6 7", "1\n2\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 600, 600, 600, 600, 600, 600, 600, 600], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "单调队列", "2021", "O2优化", "洛谷月赛"], "title": "『JROI-3』1÷0", "background": "```\n1÷0=梦恋\n```\n```\n   在距离遥远的山丘上，看得见彼方宛如天地崩毁的光景。\n\n    「——『设计体』传来报告——以功率《七二·八％》重现设计成功——开始同步。」\n\n    一机机凯种的女性体这么告知里克，然后举起手。\n\n    「【典开】——Org.0000——『真典·弑星者』——拜托您了。」\n\n    ——出现在虚空中的是，外形有如小型的塔，刺在地上的一把枪。\n\n    方才目睹的，有如让世界终结的暴力漩涡。\n\n```", "description": "空想用跳棋模拟「圣战」中机凯种的移动方式。\n\n一条**无限长**的数轴上有 $n$ 个不能动的跳棋，空会询问把一颗可以动的跳棋放在一个位置可以**最多**进行几次跳跃。空会问很多次，每次询问**互相独立**。\n\n设第 $i$ 颗不能动的棋子的坐标为 $x_i\\left(\\forall i\\in\\left[1,n\\right]\\right)$.\n\n则跳棋移动的规则如下：\n\n- 这颗跳棋必须是允许移动的。\n- 若这颗棋子位于 $a$，目标位置为 $b$，则应**仅有一颗**棋子位于二个位置之间且中间棋子到 $a,b$ 的距离相等。\n\n形式化的讲应有：\n\n$$\\sum_{k=1}^n \\left[x_k\\in\\left[b,a\\right]\\right]=1$$\n\n且 $\\exists k\\ x_k=\\dfrac{a+b}{2}$.\n\n\n- 出题人过于良心（，你只能向左边跳。\n", "inputFormat": "第一行两个整数 $n,q$，同题意。\n\n接下来一行 $n$ 个整数，第 $i$ 个表示 $x_i$。\n\n接下来一行 $q$ 个数 $x_0$，表示放置可以动的棋子的位置。", "outputFormat": "$q$ 行，每行一个整数，第 $i$ 行表示第 $i$ 次询问的结果。", "hint": "#### 样例解释 1\n\n$$\\Huge\\Box\\Box\\blacksquare{\\color{red}{\\Box}}\\blacksquare{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\blacksquare\\Box\\Box$$\n\n从左到右的三个红色方块是询问的位置。\n\n- 对于第一个询问，可以跳 $1$ 步，从 4 跳到 2。\n- 对于第二个询问，可以跳 $2$ 步，从 6 跳到 4 跳到 2。\n- 对于第三个询问，棋子不能向左移动，因为左边同距离位置有一颗不能动的棋子。\n\n对于 $100\\%$ 的数据满足 $1\\le n\\leq 3\\times 10^6$，$1\\le q\\leq3\\times 10^5$，$1\\le x\\le 10^{18}$，$x_i+1\\lt x_{i+1}(\\forall i \\in [1,n-1])$。\n\n| Subtask 编号 | $n\\le$ | $q\\le$ | 时限 | 空间限制 | 特殊限制 |\n| :-----------: | :-----: | :---: | :--: | :------:| :------: |\n| Subtask 0 (10 pts) | $10^3$ | $10^3$ |  $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |  |\n| Subtask 1 (30 pts) |  |  | $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ | $\\rm A$|\n| Subtask 2 (25 pts) |  |  | $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ | $\\rm B$ |\n| Subtask 3 (25 pts) | $3 \\times 10^5$ |  | $600\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |\n| Subtask 4 (10 pts) |  |  | $600\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |\n\n- 限制 $\\text{A}$： $x_n\\le2\\times 10^5$。\n- 限制 $\\text{B}$：有不超过 $50$ 个 $i$ 不满足 $x_i-x_{i-1}\\le 100$ ，其余 $i$ 满足 $\\sum_{i}{x_i-x_{i-1}} \\le 2\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-3』1÷0", "background": "```\n1÷0=梦恋\n```\n```\n   在距离遥远的山丘上，看得见彼方宛如天地崩毁的光景。\n\n    「——『设计体』传来报告——以功率《七二·八％》重现设计成功——开始同步。」\n\n    一机机凯种的女性体这么告知里克，然后举起手。\n\n    「【典开】——Org.0000——『真典·弑星者』——拜托您了。」\n\n    ——出现在虚空中的是，外形有如小型的塔，刺在地上的一把枪。\n\n    方才目睹的，有如让世界终结的暴力漩涡。\n\n```", "description": "空想用跳棋模拟「圣战」中机凯种的移动方式。\n\n一条**无限长**的数轴上有 $n$ 个不能动的跳棋，空会询问把一颗可以动的跳棋放在一个位置可以**最多**进行几次跳跃。空会问很多次，每次询问**互相独立**。\n\n设第 $i$ 颗不能动的棋子的坐标为 $x_i\\left(\\forall i\\in\\left[1,n\\right]\\right)$.\n\n则跳棋移动的规则如下：\n\n- 这颗跳棋必须是允许移动的。\n- 若这颗棋子位于 $a$，目标位置为 $b$，则应**仅有一颗**棋子位于二个位置之间且中间棋子到 $a,b$ 的距离相等。\n\n形式化的讲应有：\n\n$$\\sum_{k=1}^n \\left[x_k\\in\\left[b,a\\right]\\right]=1$$\n\n且 $\\exists k\\ x_k=\\dfrac{a+b}{2}$.\n\n\n- 出题人过于良心（，你只能向左边跳。\n", "inputFormat": "第一行两个整数 $n,q$，同题意。\n\n接下来一行 $n$ 个整数，第 $i$ 个表示 $x_i$。\n\n接下来一行 $q$ 个数 $x_0$，表示放置可以动的棋子的位置。", "outputFormat": "$q$ 行，每行一个整数，第 $i$ 行表示第 $i$ 次询问的结果。", "hint": "#### 样例解释 1\n\n$$\\Huge\\Box\\Box\\blacksquare{\\color{red}{\\Box}}\\blacksquare{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\blacksquare\\Box\\Box$$\n\n从左到右的三个红色方块是询问的位置。\n\n- 对于第一个询问，可以跳 $1$ 步，从 4 跳到 2。\n- 对于第二个询问，可以跳 $2$ 步，从 6 跳到 4 跳到 2。\n- 对于第三个询问，棋子不能向左移动，因为左边同距离位置有一颗不能动的棋子。\n\n对于 $100\\%$ 的数据满足 $1\\le n\\leq 3\\times 10^6$，$1\\le q\\leq3\\times 10^5$，$1\\le x\\le 10^{18}$，$x_i+1\\lt x_{i+1}(\\forall i \\in [1,n-1])$。\n\n| Subtask 编号 | $n\\le$ | $q\\le$ | 时限 | 空间限制 | 特殊限制 |\n| :-----------: | :-----: | :---: | :--: | :------:| :------: |\n| Subtask 0 (10 pts) | $10^3$ | $10^3$ |  $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |  |\n| Subtask 1 (30 pts) |  |  | $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ | $\\rm A$|\n| Subtask 2 (25 pts) |  |  | $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ | $\\rm B$ |\n| Subtask 3 (25 pts) | $3 \\times 10^5$ |  | $600\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |\n| Subtask 4 (10 pts) |  |  | $600\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |\n\n- 限制 $\\text{A}$： $x_n\\le2\\times 10^5$。\n- 限制 $\\text{B}$：有不超过 $50$ 个 $i$ 不满足 $x_i-x_{i-1}\\le 100$ ，其余 $i$ 满足 $\\sum_{i}{x_i-x_{i-1}} \\le 2\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P7895", "type": "P", "difficulty": 5, "samples": [["6\n3 1 2 1 1 2\n\n1\n\n5\n\n", "\n\ndfn 1\n\ndis 6 2\n\n! 17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "交互题", "Special Judge", "O2优化", "分治", "树论", "虚树", "洛谷月赛"], "title": "『JROI-3』删树", "background": "**本题数据已加强，建议场上过了的同学再次提交确定做法正确性。**\n\n> 千万不要看错题！\n\n——command_block 《考前小贴士》\n\n你在 2021 年在洛谷打了一场比赛叫做 EZEC Round\n 6，其中里面有一道[造树题](https://www.luogu.com.cn/problem/P7390)你觉得特别水，随手就切了它。（所以没做过链接里题的人快来做啊！！！）\n \n现在你在打 JROI-3 的月赛，你觉得造树太水了想删掉树，于是良心的出题人给了你一个机会。但是，在删除树之前，djy 想先知道树的边权和。", "description": "**这是一道交互题。**\n\n有一个 $n$ 个节点的带边权的树，编号为 $1-n$。每个点的度数是已知的。djy 想知道树上所有边的权值和，但他太菜了，不会去算如此简单的问题，因此把这个题扔给了您。\n\n由于您很强，所以您可以对这棵树进行一些改变：删除所有度数为 $1$ 的节点，得到剩下点的个数和每个点的度数。\n\n您可以向交互库进行三种类型的提问：\n\n- 对于当前树上存在的一个点，询问它的 dfs 序$^1$。\n- 对于当前树上存在的一对节点，询问它们之间的距离$^2$。\n- 删除当前树上所有度数为 $1$ 的节点，同时删除与这些节点相邻的边，并且将所有未被删除的节点进行重新编号。**保证剩下的节点的编号分别为 $1-k$，其中 $k$ 是剩下的节点个数。**\n\n你需要操作**不超过 142 次（包括提交答案）**，并在树**删空**之前求出**当前**树上所有边的权值和。\n\n---\n注：\n- dfs 序$^1$：dfs 序指从当前的 $1$ 号节点进行 [深度优先搜索](https://baike.baidu.com/item/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/5224976) ，每个节点被第一次访问的顺序。一棵树的 dfs 序不唯一。每次删除操作后 dfs 序会被重置。保证 dfs 序不随着其他操作而改变，即两次询问同一节点的 dfs 序的询问中间如果没有删除操作，保证回答相同的值。\n- 距离$^2$：指在树上两点路径上的边权和。特别地，两个相同节点的距离为 $0$。", "inputFormat": "**「交互模式」**\n\n**本题采用 IO 交互模式。**\n\n在开始交互前，您需要先读入 $n$，表示树中点的个数。\n\n接下来一行 $n$ 个数，表示每个点的度数。\n\n您可以进行三种类型的询问：\n\n- `dfn u`: 询问交互库编号为 $u$ 的节点的 dfs 序。交互库返回一行一个整数，表示 $u$ 的 dfs 序。\n\n- `dis u v`: 询问交互库编号为 $u$ 和 $v$ 的两个节点的距离。交互库返回一行一个整数，表示 $u$ 和 $v$ 的距离。\n\n- `del`: 要求交互库删除度数为 1 的点以及与之相连的边。交互库将对点进行重编号，并重新跑一个 dfs 序，交互库返回第一行一个整数为树的大小 $m$，第二行 $m$ 个整数，第 $i$ 个表示编号为 $i$ 的点的度数。\n\n如果您求出了当前树上所有边的边权和，按照 `! x` 的格式输出答案 $x$，并立刻结束程序。\n\n请保证作为询问参数的节点未被删除且 del 操作后树不为空。\n\n**如果您的操作不合法或次数大于 142 次，交互库会立刻终止程序，并将结果判定为 WA/RE/TLE/MLE。**\n\n在每一次询问之后，请不要忘记输出换行符以及清空缓存区，否则将会出现未知的错误。为了避免这种情况，您可以使用：\n- 对于 C++，使用 ```fflush(stdout)``` 或  ```cout.flush()```。\n- 对于 Java，使用 ```System.out.flush()```。\n- 对于 Python，使用 ```stdout.flush()```。\n- 对于其他语言，请阅读相关文献。", "outputFormat": "见 **「交互模式」**。", "hint": "**样例仅供理解交互过程，可能不符合逻辑。**\n\n【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cpyygh22.png)\n\n树的形态如上。\n\n第一次询问节点 $1$ 的 dfs 序，为 $1$。\n\n第二次询问节点 $2$ 与节点 $6$ 的距离，为 $5$。\n\n当前树上所有边的边权和为 $17$。\n\n-----\n【数据范围】\n\n**「本题采用捆绑测试」**\n- Subtask 1（1pts）：$n \\le 2$。\n- Subtask 2（4pts）：$n \\le 4$。\n- Subtask 3（20pts）：$n\\le 150$。\n- Subtask 4（10pts）：树是一条链。\n- Subtask 5（30pts）：保证度数为 $1$ 的点不超过 $50$ 个。\n- Subtask 6（20pts）：$n\\le 2000$。\n- Subtask 7（15pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5000$，每条边的边权不大于 $10^5$ **且为正整数**。\n\n**如果有假做法过了，请私信联系出题人加强数据。（如果有hack更好了）。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-3』删树", "background": "**本题数据已加强，建议场上过了的同学再次提交确定做法正确性。**\n\n> 千万不要看错题！\n\n——command_block 《考前小贴士》\n\n你在 2021 年在洛谷打了一场比赛叫做 EZEC Round\n 6，其中里面有一道[造树题](https://www.luogu.com.cn/problem/P7390)你觉得特别水，随手就切了它。（所以没做过链接里题的人快来做啊！！！）\n \n现在你在打 JROI-3 的月赛，你觉得造树太水了想删掉树，于是良心的出题人给了你一个机会。但是，在删除树之前，djy 想先知道树的边权和。", "description": "**这是一道交互题。**\n\n有一个 $n$ 个节点的带边权的树，编号为 $1-n$。每个点的度数是已知的。djy 想知道树上所有边的权值和，但他太菜了，不会去算如此简单的问题，因此把这个题扔给了您。\n\n由于您很强，所以您可以对这棵树进行一些改变：删除所有度数为 $1$ 的节点，得到剩下点的个数和每个点的度数。\n\n您可以向交互库进行三种类型的提问：\n\n- 对于当前树上存在的一个点，询问它的 dfs 序$^1$。\n- 对于当前树上存在的一对节点，询问它们之间的距离$^2$。\n- 删除当前树上所有度数为 $1$ 的节点，同时删除与这些节点相邻的边，并且将所有未被删除的节点进行重新编号。**保证剩下的节点的编号分别为 $1-k$，其中 $k$ 是剩下的节点个数。**\n\n你需要操作**不超过 142 次（包括提交答案）**，并在树**删空**之前求出**当前**树上所有边的权值和。\n\n---\n注：\n- dfs 序$^1$：dfs 序指从当前的 $1$ 号节点进行 [深度优先搜索](https://baike.baidu.com/item/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/5224976) ，每个节点被第一次访问的顺序。一棵树的 dfs 序不唯一。每次删除操作后 dfs 序会被重置。保证 dfs 序不随着其他操作而改变，即两次询问同一节点的 dfs 序的询问中间如果没有删除操作，保证回答相同的值。\n- 距离$^2$：指在树上两点路径上的边权和。特别地，两个相同节点的距离为 $0$。", "inputFormat": "**「交互模式」**\n\n**本题采用 IO 交互模式。**\n\n在开始交互前，您需要先读入 $n$，表示树中点的个数。\n\n接下来一行 $n$ 个数，表示每个点的度数。\n\n您可以进行三种类型的询问：\n\n- `dfn u`: 询问交互库编号为 $u$ 的节点的 dfs 序。交互库返回一行一个整数，表示 $u$ 的 dfs 序。\n\n- `dis u v`: 询问交互库编号为 $u$ 和 $v$ 的两个节点的距离。交互库返回一行一个整数，表示 $u$ 和 $v$ 的距离。\n\n- `del`: 要求交互库删除度数为 1 的点以及与之相连的边。交互库将对点进行重编号，并重新跑一个 dfs 序，交互库返回第一行一个整数为树的大小 $m$，第二行 $m$ 个整数，第 $i$ 个表示编号为 $i$ 的点的度数。\n\n如果您求出了当前树上所有边的边权和，按照 `! x` 的格式输出答案 $x$，并立刻结束程序。\n\n请保证作为询问参数的节点未被删除且 del 操作后树不为空。\n\n**如果您的操作不合法或次数大于 142 次，交互库会立刻终止程序，并将结果判定为 WA/RE/TLE/MLE。**\n\n在每一次询问之后，请不要忘记输出换行符以及清空缓存区，否则将会出现未知的错误。为了避免这种情况，您可以使用：\n- 对于 C++，使用 ```fflush(stdout)``` 或  ```cout.flush()```。\n- 对于 Java，使用 ```System.out.flush()```。\n- 对于 Python，使用 ```stdout.flush()```。\n- 对于其他语言，请阅读相关文献。", "outputFormat": "见 **「交互模式」**。", "hint": "**样例仅供理解交互过程，可能不符合逻辑。**\n\n【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cpyygh22.png)\n\n树的形态如上。\n\n第一次询问节点 $1$ 的 dfs 序，为 $1$。\n\n第二次询问节点 $2$ 与节点 $6$ 的距离，为 $5$。\n\n当前树上所有边的边权和为 $17$。\n\n-----\n【数据范围】\n\n**「本题采用捆绑测试」**\n- Subtask 1（1pts）：$n \\le 2$。\n- Subtask 2（4pts）：$n \\le 4$。\n- Subtask 3（20pts）：$n\\le 150$。\n- Subtask 4（10pts）：树是一条链。\n- Subtask 5（30pts）：保证度数为 $1$ 的点不超过 $50$ 个。\n- Subtask 6（20pts）：$n\\le 2000$。\n- Subtask 7（15pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5000$，每条边的边权不大于 $10^5$ **且为正整数**。\n\n**如果有假做法过了，请私信联系出题人加强数据。（如果有hack更好了）。**", "locale": "zh-CN"}}}
{"pid": "P7896", "type": "P", "difficulty": 7, "samples": [["5 3 1\n1 1\n1 1", "6"], ["5 3 1\n1 2\n3 4", "64"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "『JROI-3』Moke 的游戏", "background": "", "description": "Moke 是一个喜欢玩游戏的男孩子。\n\n众所周知，游戏应当有血量。血量**永远是非负整数**，如果在某个时刻血量将要变为负数，那么游戏会崩溃，这就不算作一种游戏局面。这里允许血量是 $0$。  \n一般来说，友好的游戏都会具有一定的初始血量。但是 Moke 是一个喜欢在游戏里受虐的男孩子。所以他把自己的初始血量设成了 $0$。\n\n不过，这个游戏的难度并不高。  \n它一共进行 $n+1$ 个时刻。初始是第 $0$ 个时刻，最终是第 $n$ 个时刻。每个时刻 Moke 会遇到以下三种事件，然后进入下一时刻：\n\n 1. 空地。它使得 Moke 的血量不变。一共有 $a_0$ 种不同的空地。\n 2. 怪兽。它使得 Moke 的血量减一。一共有 $a_{-1}$ 种不同的怪兽。\n 3. 道具。它使得 Moke 的血量增加一个正整数。具体地，一共有 $a_p$ 种使 Moke 血量加 $p$ 的道具，其中 $p \\in \\mathbb Z^+$。\n\n为了不让游戏太复杂，游戏的开发者保证 $\\big|\\{p \\mid p \\in \\mathbb Z^+ \\land a_p > 0\\}\\big|=k$。即，所有道具总共只造成恰好 $k$ 种不同的血量变化量。\n\n当然，Moke 还是给自己进一步增加了难度。他要求结束时自己的血量为 $0$，且给出一个正整数 $m$，表示限制这 $n+1$ 个时刻中，他恰好有 $m$ 次血量为 $0$（包括初始时刻）。\n\n请求出所有不同的，符合 Moke 限制的游戏局面个数。两个局面不同当且仅当每个时刻遇到的事件的种类不同（包括不同的空地、不同的怪兽和不同的道具）。  \n\nMoke 不希望你面对太困难的问题。所以他给出一个质数 $P=10^9+7$ 并只要求你给出取模 $P$ 后的答案。", "inputFormat": "第一行，三个正整数 $n,m,k$。  \n第二行，两个正整数 $a_0,a_{-1}$。  \n以下 $k$ 行，其中第 $i$ 行两个正整数 $p_i,a_{p_i}$。表示存在道具造成的血量变化量为 $p_i$，且这样的道具有 $a_{p_i}$ 种。", "outputFormat": "一行，一个非负整数。表示答案取模 $P$ 的结果。", "hint": "- 对于 $30\\%$ 的数据，$n \\le 15$，$k \\le 1$。  \n- 对于 $50\\%$ 的数据，$n \\le 100$。  \n- 对于 $70\\%$ 的数据，$n \\le 2.5 \\times 10^3$。  \n- 对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times 10^6$，$1 \\le m \\le n + 1$，$1 \\le k \\le 10$，$1 \\le p_i \\le n$，$0 < a_0,a_{-1},a_{p_i} < P$，保证 $p_i$ 从小到大给出且互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-3』Moke 的游戏", "background": "", "description": "Moke 是一个喜欢玩游戏的男孩子。\n\n众所周知，游戏应当有血量。血量**永远是非负整数**，如果在某个时刻血量将要变为负数，那么游戏会崩溃，这就不算作一种游戏局面。这里允许血量是 $0$。  \n一般来说，友好的游戏都会具有一定的初始血量。但是 Moke 是一个喜欢在游戏里受虐的男孩子。所以他把自己的初始血量设成了 $0$。\n\n不过，这个游戏的难度并不高。  \n它一共进行 $n+1$ 个时刻。初始是第 $0$ 个时刻，最终是第 $n$ 个时刻。每个时刻 Moke 会遇到以下三种事件，然后进入下一时刻：\n\n 1. 空地。它使得 Moke 的血量不变。一共有 $a_0$ 种不同的空地。\n 2. 怪兽。它使得 Moke 的血量减一。一共有 $a_{-1}$ 种不同的怪兽。\n 3. 道具。它使得 Moke 的血量增加一个正整数。具体地，一共有 $a_p$ 种使 Moke 血量加 $p$ 的道具，其中 $p \\in \\mathbb Z^+$。\n\n为了不让游戏太复杂，游戏的开发者保证 $\\big|\\{p \\mid p \\in \\mathbb Z^+ \\land a_p > 0\\}\\big|=k$。即，所有道具总共只造成恰好 $k$ 种不同的血量变化量。\n\n当然，Moke 还是给自己进一步增加了难度。他要求结束时自己的血量为 $0$，且给出一个正整数 $m$，表示限制这 $n+1$ 个时刻中，他恰好有 $m$ 次血量为 $0$（包括初始时刻）。\n\n请求出所有不同的，符合 Moke 限制的游戏局面个数。两个局面不同当且仅当每个时刻遇到的事件的种类不同（包括不同的空地、不同的怪兽和不同的道具）。  \n\nMoke 不希望你面对太困难的问题。所以他给出一个质数 $P=10^9+7$ 并只要求你给出取模 $P$ 后的答案。", "inputFormat": "第一行，三个正整数 $n,m,k$。  \n第二行，两个正整数 $a_0,a_{-1}$。  \n以下 $k$ 行，其中第 $i$ 行两个正整数 $p_i,a_{p_i}$。表示存在道具造成的血量变化量为 $p_i$，且这样的道具有 $a_{p_i}$ 种。", "outputFormat": "一行，一个非负整数。表示答案取模 $P$ 的结果。", "hint": "- 对于 $30\\%$ 的数据，$n \\le 15$，$k \\le 1$。  \n- 对于 $50\\%$ 的数据，$n \\le 100$。  \n- 对于 $70\\%$ 的数据，$n \\le 2.5 \\times 10^3$。  \n- 对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times 10^6$，$1 \\le m \\le n + 1$，$1 \\le k \\le 10$，$1 \\le p_i \\le n$，$0 < a_0,a_{-1},a_{p_i} < P$，保证 $p_i$ 从小到大给出且互不相同。", "locale": "zh-CN"}}}
{"pid": "P7897", "type": "P", "difficulty": 6, "samples": [["10 6\n1 1 2 2 3 5 5 5 6\n5 2 3 1 -5 -7 1 1 1 2\n1 0\n1 -2\n1 3\n2 1\n5 0\n5 -2", "11\n4\n34\n7\n-2\n-7"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2006", "O2优化", "Ynoi"], "title": "[Ynoi2006] spxmcq", "background": "", "description": "给定一颗 $n$ 个节点有根树，第 $i$ 节点权值为 $a_i$。\n\n在这个树上支持一种询问：\n\n - 给定节点 $u$ 和参数 $x$，**假如** 所有节点点权加 $x$，**在这种情况下，求：** 对于所有完全在 $u$ 子树内并包含 $u$ 的连通点集，权值之和最大可能为多少？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，依次为 $2,3,\\dots,n$ 的父亲节点编号，其中保证 $1\\le f_i<i$。\n\n第三行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，依次为 $1,2,\\dots,n$ 点权。\n\n接下来 $m$ 行，每行一个正整数 $u$ 和一个整数 $x$，代表一组询问，其中保证 $1\\le u\\le n$。", "outputFormat": "输出 $m$ 行，每行一个整数，为对应询问的答案。", "hint": "Idea：w33z8kqrqk8zzzx33，Solution：w33z8kqrqk8zzzx33&ccz181078，Code：w33z8kqrqk8zzzx33，Data：w33z8kqrqk8zzzx33\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$|a_i|,|x|\\le 10^8$，保证 $1\\le u\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] spxmcq", "background": "", "description": "给定一颗 $n$ 个节点有根树，第 $i$ 节点权值为 $a_i$。\n\n在这个树上支持一种询问：\n\n - 给定节点 $u$ 和参数 $x$，**假如** 所有节点点权加 $x$，**在这种情况下，求：** 对于所有完全在 $u$ 子树内并包含 $u$ 的连通点集，权值之和最大可能为多少？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，依次为 $2,3,\\dots,n$ 的父亲节点编号，其中保证 $1\\le f_i<i$。\n\n第三行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，依次为 $1,2,\\dots,n$ 点权。\n\n接下来 $m$ 行，每行一个正整数 $u$ 和一个整数 $x$，代表一组询问，其中保证 $1\\le u\\le n$。", "outputFormat": "输出 $m$ 行，每行一个整数，为对应询问的答案。", "hint": "Idea：w33z8kqrqk8zzzx33，Solution：w33z8kqrqk8zzzx33&ccz181078，Code：w33z8kqrqk8zzzx33，Data：w33z8kqrqk8zzzx33\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$|a_i|,|x|\\le 10^8$，保证 $1\\le u\\le n$。", "locale": "zh-CN"}}}
{"pid": "P7898", "type": "P", "difficulty": 7, "samples": [["假设交互库调用了3次 `solve` 函数如下：\n\n```cpp\nsolve(1,1,1);\nsolve(1,2,2);\nsolve(2,1,3);\n```", "以下给出了一种符合要求的对 `op1` 和 `op2` 的调用：\n\n```cpp\nop1(1,1);\nop2(1);\n```\n\n此时序列为 $(1)$，编号1的集合为 $\\{1\\}$，第1次 `solve` 函数调用返回；\n\n```cpp\nop2(1);\n```\n\n此时序列为 $(2,1)$，编号1的集合为 $\\{1\\}$，第2次 `solve` 函数调用返回；\n\n```cpp\nop1(1,2);\nop1(2,3);\nop2(2);\nop2(1);\n```\n\n此时序列为 $(2,3,1)$，编号1的集合为 $\\{1,2\\}$，编号2的集合为 $\\{3\\}$，第3次 `solve` 函数调用返回。"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2006", "交互题", "Special Judge", "O2优化", "Ynoi"], "title": "[Ynoi2006] wcirq", "background": "", "description": "**这是一道交互题。**\n\n你需要进行 $n$ 个原始操作，对一个序列进行维护。初始序列为空。\n\n第 $i$ 个原始操作给出整数 $x_i,\\;l_i,\\;r_i$，表示在序列的第 $x_i$ 个位置前插入元素 $i$（若 $x_i=i$ 则表示在序列末尾插入），然后查询序列中第 $l_i,\\;l_i+1,\\;\\dots,\\;r_i$ 个元素构成的集合。\n\n为了回答这些查询，你可以操作若干个集合。这些集合初始为空，编号为 $1$ 到 $2\\times 10^7$ 的整数。\n\n你可以花费 $1$ 个单位的第一类代价进行插入操作：在编号为 $x$ 的集合中插入元素 $y$，在回答第 $i$ 个原始操作的查询前，需要保证 $1\\le y\\le i$。\n\n你可以花费 $k$ 个单位的第二类代价回答查询：选取编号为 $a_1,\\;a_2,\\;\\dots,\\;a_k$ 的集合，要求这些集合互不相交，且并集是查询的答案。\n\n每次原始操作后，插入操作和回答查询的第一类/第二类代价不能超过当前子任务的代价上限 $m_1,\\;m_2$。每次原始操作的代价分别计算。", "inputFormat": "你需要实现函数：\n\n```cpp\nvoid solve(int x,int l,int r);\n```\n\n对于每次原始操作，这个函数被调用一次，参数 `x l r` 对应 $x_i,\\;l_i,\\;r_i$。", "outputFormat": "你可以调用函数：\n\n```cpp\nvoid op1(int x,int y);\nvoid op2(int k);\n```\n\n调用 `op1` 表示执行一次插入操作；\n\n对 $a_1,\\dots,a_k$ 依次调用 `op2` 表示回答查询。\n\n在提交的代码中，你需要声明这两个函数。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078&nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$；$1\\le x_i\\le i$；$1\\le l_i\\le r_i\\le i$；\n\n你输出的插入操作或回答查询中，集合编号在范围 $1$ 到 $2\\times 10^7$ 内，插入操作的 $y$ 必须是序列中已有的元素。\n\n\n\n子任务1（10分）：保证 $1\\le n\\le 10^3$；\n\n子任务2（10分）：保证 $l_i=1,\\;r_i=i$；\n\n子任务3（10分）：保证 $x_i=i$；\n\n子任务4（20分）：保证 $1\\le n\\le 10^4$；\n\n子任务5（10分）：保证 $1\\le n\\le 10^5$；\n\n子任务6（20分）：数据随机生成，其中 $n=10^6$， $(l_i,r_i)$ 和 $x_i$ 分别在所有可能的情况中随机选取。\n\n子任务7（20分）：无特殊限制。\n\n对子任务6，$(m_1,m_2)=(64,64)$；\n\n对其余子任务，$(m_1,m_2)=(64,256)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] wcirq", "background": "", "description": "**这是一道交互题。**\n\n你需要进行 $n$ 个原始操作，对一个序列进行维护。初始序列为空。\n\n第 $i$ 个原始操作给出整数 $x_i,\\;l_i,\\;r_i$，表示在序列的第 $x_i$ 个位置前插入元素 $i$（若 $x_i=i$ 则表示在序列末尾插入），然后查询序列中第 $l_i,\\;l_i+1,\\;\\dots,\\;r_i$ 个元素构成的集合。\n\n为了回答这些查询，你可以操作若干个集合。这些集合初始为空，编号为 $1$ 到 $2\\times 10^7$ 的整数。\n\n你可以花费 $1$ 个单位的第一类代价进行插入操作：在编号为 $x$ 的集合中插入元素 $y$，在回答第 $i$ 个原始操作的查询前，需要保证 $1\\le y\\le i$。\n\n你可以花费 $k$ 个单位的第二类代价回答查询：选取编号为 $a_1,\\;a_2,\\;\\dots,\\;a_k$ 的集合，要求这些集合互不相交，且并集是查询的答案。\n\n每次原始操作后，插入操作和回答查询的第一类/第二类代价不能超过当前子任务的代价上限 $m_1,\\;m_2$。每次原始操作的代价分别计算。", "inputFormat": "你需要实现函数：\n\n```cpp\nvoid solve(int x,int l,int r);\n```\n\n对于每次原始操作，这个函数被调用一次，参数 `x l r` 对应 $x_i,\\;l_i,\\;r_i$。", "outputFormat": "你可以调用函数：\n\n```cpp\nvoid op1(int x,int y);\nvoid op2(int k);\n```\n\n调用 `op1` 表示执行一次插入操作；\n\n对 $a_1,\\dots,a_k$ 依次调用 `op2` 表示回答查询。\n\n在提交的代码中，你需要声明这两个函数。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078&nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$；$1\\le x_i\\le i$；$1\\le l_i\\le r_i\\le i$；\n\n你输出的插入操作或回答查询中，集合编号在范围 $1$ 到 $2\\times 10^7$ 内，插入操作的 $y$ 必须是序列中已有的元素。\n\n\n\n子任务1（10分）：保证 $1\\le n\\le 10^3$；\n\n子任务2（10分）：保证 $l_i=1,\\;r_i=i$；\n\n子任务3（10分）：保证 $x_i=i$；\n\n子任务4（20分）：保证 $1\\le n\\le 10^4$；\n\n子任务5（10分）：保证 $1\\le n\\le 10^5$；\n\n子任务6（20分）：数据随机生成，其中 $n=10^6$， $(l_i,r_i)$ 和 $x_i$ 分别在所有可能的情况中随机选取。\n\n子任务7（20分）：无特殊限制。\n\n对子任务6，$(m_1,m_2)=(64,64)$；\n\n对其余子任务，$(m_1,m_2)=(64,256)$。", "locale": "zh-CN"}}}
{"pid": "P7899", "type": "P", "difficulty": 7, "samples": [["10\n2 8 9 5 4 2\n7 10 3 7 2 10\n10 5 4 2 8 3\n8 8 7 6 8 4\n3 2 5 3 2 9\n3 3 9 10 5 6\n4 8 2 9 3 2\n4 5 5 10 1 1\n9 4 10 2 1 4\n6 9 7 2 4 6\n", "0\n0\n0\n0\n9\n5\n4\n2\n12\n12\n6\n12\n16\n14\n14\n15\n23\n23\n22\n22\n28\n26\n31\n31\n37\n33\n37\n35\n39\n42\n40\n37\n44\n52\n41\n41\n54\n54\n47\n41\n"]], "limits": {"time": [20000], "memory": [131072]}, "tags": ["2006", "O2优化", "Ynoi"], "title": "[Ynoi2006] rprmq2", "background": "", "description": "给定正整数 $m$，你需要维护一个 $m\\times m$ 的矩阵 $a_{i,j},\\;1\\le i,j\\le m$，初值为 $0$。\n\n共 $m$ 次操作，每次操作给出 $x,\\;y,\\;z_{0,0},\\;z_{0,1},\\;z_{1,0},\\;z_{1,1}$，\n\n首先对 $0\\le p,q\\le 1$ 询问矩阵中满足 $[i\\ge x]=p,\\;[j\\ge y]=q$ 的位置的值 $a_{i,j}$ 的最大值，答案记为 $w_{p,q}$，\n\n然后对矩阵每个位置 $(i,j)$，将其值 $a_{i,j}$ 加上 $z_{[i\\ge x],[j\\ge y]}$。\n\n记号 $[c]$ 在条件 $c$ 为真时值为 $1$，否则值为 $0$。", "inputFormat": "第一行一个正整数 $m$ ；\n\n之后 $m$ 行，每行 $6$ 个数 $x,\\;y,\\;z_{0,0},\\;z_{0,1},\\;z_{1,0},\\;z_{1,1}$ 表示一次操作，意义如上述。", "outputFormat": "对每次操作，输出 $4$ 行，依次为 $w_{0,0},\\;w_{0,1},\\;w_{1,0},\\;w_{1,1}$。", "hint": "Idea：？，Solution：？，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，$2 \\le x,y\\le m\\le 2\\times 10^5$ ，$1\\le z_{i,j}\\le 10^9$，所有数值为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] rprmq2", "background": "", "description": "给定正整数 $m$，你需要维护一个 $m\\times m$ 的矩阵 $a_{i,j},\\;1\\le i,j\\le m$，初值为 $0$。\n\n共 $m$ 次操作，每次操作给出 $x,\\;y,\\;z_{0,0},\\;z_{0,1},\\;z_{1,0},\\;z_{1,1}$，\n\n首先对 $0\\le p,q\\le 1$ 询问矩阵中满足 $[i\\ge x]=p,\\;[j\\ge y]=q$ 的位置的值 $a_{i,j}$ 的最大值，答案记为 $w_{p,q}$，\n\n然后对矩阵每个位置 $(i,j)$，将其值 $a_{i,j}$ 加上 $z_{[i\\ge x],[j\\ge y]}$。\n\n记号 $[c]$ 在条件 $c$ 为真时值为 $1$，否则值为 $0$。", "inputFormat": "第一行一个正整数 $m$ ；\n\n之后 $m$ 行，每行 $6$ 个数 $x,\\;y,\\;z_{0,0},\\;z_{0,1},\\;z_{1,0},\\;z_{1,1}$ 表示一次操作，意义如上述。", "outputFormat": "对每次操作，输出 $4$ 行，依次为 $w_{0,0},\\;w_{0,1},\\;w_{1,0},\\;w_{1,1}$。", "hint": "Idea：？，Solution：？，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，$2 \\le x,y\\le m\\le 2\\times 10^5$ ，$1\\le z_{i,j}\\le 10^9$，所有数值为整数。", "locale": "zh-CN"}}}
{"pid": "P7900", "type": "P", "difficulty": 3, "samples": [["3\n", "0"], ["4\n", "1"], ["6\n", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2006", "O2优化", "组合数学", "COCI（克罗地亚）"], "title": "[COCI 2006/2007 #2] SJECIŠTA", "background": "", "description": "考虑一个有 $n$ 个顶点的凸多边形，且这个多边形没有任何三个（或以上）的对角线交于一点。\n\n现在请你求出这样的多边形的对角线交点个数。", "inputFormat": "输入一行一个整数表示 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 3 解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/07pgpeuy.png)\n\n### 数据规模与约定\n\n对于全部的测试点，保证 $3 \\leq n \\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2006/2007 #2] SJECIŠTA", "background": "", "description": "考虑一个有 $n$ 个顶点的凸多边形，且这个多边形没有任何三个（或以上）的对角线交于一点。\n\n现在请你求出这样的多边形的对角线交点个数。", "inputFormat": "输入一行一个整数表示 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 3 解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/07pgpeuy.png)\n\n### 数据规模与约定\n\n对于全部的测试点，保证 $3 \\leq n \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P7901", "type": "P", "difficulty": 2, "samples": [["2 16 1 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "洛谷月赛"], "title": "「PMOI-0」一笔画", "background": "（原 LZOI-1，改名已经 PMOI 成员同意）", "description": "言琢დ 在一个 $2n \\times 2n$ 的矩阵中坐标为 $(x,y)$ 的一个点上。\n\n现在 lhm 需要任意选择矩阵上的一个点作为起点，然后依次经过 $k$ 个点，移动规则如下：\n\n- 每次移动只能选择与目前相邻（上下左右）的点作为本次移动的目标点。不能选择矩阵外的点。\n\n- 每一轮移动必须正好经过矩阵上的所有点，不能重复经过同一个点。每经过所有点后，视为一轮移动结束。\n\n- 注意依次经过 $k$ 个点后，最后一轮移动可能并没有完成。\n\n现在 lhm 想知道，他最少会经过 言琢დ 多少次。", "inputFormat": "第一行输入四个正整数 $n,k,x,y$。", "outputFormat": "第一行输出一个整数，表示答案。", "hint": "### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/37e99o4k.png)\n\n$\\color{red}დ$ 代表 言琢დ 所在位置，红色线表示 lhm 第一轮的路径。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n,k\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $10^4$ |\n| $2$ | $30$ | $10^9$ |\n| $3$ | $40$ | $10^{18}$ |\n\n对于所有数据，保证 $1\\le n,k\\le10^{18}$，$1\\le x,y\\le 2n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-0」一笔画", "background": "（原 LZOI-1，改名已经 PMOI 成员同意）", "description": "言琢დ 在一个 $2n \\times 2n$ 的矩阵中坐标为 $(x,y)$ 的一个点上。\n\n现在 lhm 需要任意选择矩阵上的一个点作为起点，然后依次经过 $k$ 个点，移动规则如下：\n\n- 每次移动只能选择与目前相邻（上下左右）的点作为本次移动的目标点。不能选择矩阵外的点。\n\n- 每一轮移动必须正好经过矩阵上的所有点，不能重复经过同一个点。每经过所有点后，视为一轮移动结束。\n\n- 注意依次经过 $k$ 个点后，最后一轮移动可能并没有完成。\n\n现在 lhm 想知道，他最少会经过 言琢დ 多少次。", "inputFormat": "第一行输入四个正整数 $n,k,x,y$。", "outputFormat": "第一行输出一个整数，表示答案。", "hint": "### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/37e99o4k.png)\n\n$\\color{red}დ$ 代表 言琢დ 所在位置，红色线表示 lhm 第一轮的路径。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n,k\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $10^4$ |\n| $2$ | $30$ | $10^9$ |\n| $3$ | $40$ | $10^{18}$ |\n\n对于所有数据，保证 $1\\le n,k\\le10^{18}$，$1\\le x,y\\le 2n$。", "locale": "zh-CN"}}}
{"pid": "P7902", "type": "P", "difficulty": 2, "samples": [["3 2", "3 1 2 3 2 1"], ["3 6", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "洛谷月赛"], "title": "「PMOI-0」假·儒略日", "background": "（原 LZOI-1，改名已经 PMOI 成员同意）\n\nLanuxhem 听说 言琢დ 在 S-PSC 考场上就切穿了 **儒略の日**，想得到 言琢დ 手中的考场 AC 代码。\n\n但是 言琢დ 不想给他，所以 言琢დ 就扔给了 Lanuxhem 下面这题，并说：“切了这道题就给你。”\n\nlhm-02", "description": "给定一个正整数 $n$ 和另一个正整数 $d$。\n\n要求构造一个长度为 $2n$ 的数列 $\\{a_{2n}\\}$，满足：\n\n1. $1\\sim n$ 之中每个数字均出现 $2$ 次。\n2. 对于数字 $i$，若 $i$ 为奇数，则数字 $i$ 两次出现位置之差 **必须** 超过 $d$。\n3. 对于数字 $i$，若 $i$ 为偶数，则数字 $i$ 两次出现位置之差 **不能** 超过 $d$。\n\n由于 Lanuxhem 想得到 言琢დ 的代码，但他并不会这道题，所以他只能请聪明的你帮他完成这题。", "inputFormat": "第一行输入两个整数 $n$ 和 $d$。", "outputFormat": "如果无解输出 `-1`，否则输出一个长度为 $2n$ 的数列表示你的答案。\n\n**如果有多组解输出任意一组均给分。**", "hint": "#### 样例说明\n\n数字 $1$ 两次分别出现在位置 $2,6$，差为 $4(>2)$；\n\n数字 $3$ 两次分别出现在位置 $1,4$，差为 $3(>2)$；\n\n数字 $2$ 两次分别出现在位置 $3,5$，差为 $2(\\le2)$。\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :-: | :-: | :-: |\n| $1$ | $36$ | $n\\le10$ |\n| $2$ | $24$ | $d=\\left\\lfloor\\dfrac{n}{2}\\right\\rfloor$ |\n| $3$ | $40$ | $\\times$ |\n\n对于 $100\\%$ 的数据：$1\\le\\dfrac{d}{2}\\le n\\le10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-0」假·儒略日", "background": "（原 LZOI-1，改名已经 PMOI 成员同意）\n\nLanuxhem 听说 言琢დ 在 S-PSC 考场上就切穿了 **儒略の日**，想得到 言琢დ 手中的考场 AC 代码。\n\n但是 言琢დ 不想给他，所以 言琢დ 就扔给了 Lanuxhem 下面这题，并说：“切了这道题就给你。”\n\nlhm-02", "description": "给定一个正整数 $n$ 和另一个正整数 $d$。\n\n要求构造一个长度为 $2n$ 的数列 $\\{a_{2n}\\}$，满足：\n\n1. $1\\sim n$ 之中每个数字均出现 $2$ 次。\n2. 对于数字 $i$，若 $i$ 为奇数，则数字 $i$ 两次出现位置之差 **必须** 超过 $d$。\n3. 对于数字 $i$，若 $i$ 为偶数，则数字 $i$ 两次出现位置之差 **不能** 超过 $d$。\n\n由于 Lanuxhem 想得到 言琢დ 的代码，但他并不会这道题，所以他只能请聪明的你帮他完成这题。", "inputFormat": "第一行输入两个整数 $n$ 和 $d$。", "outputFormat": "如果无解输出 `-1`，否则输出一个长度为 $2n$ 的数列表示你的答案。\n\n**如果有多组解输出任意一组均给分。**", "hint": "#### 样例说明\n\n数字 $1$ 两次分别出现在位置 $2,6$，差为 $4(>2)$；\n\n数字 $3$ 两次分别出现在位置 $1,4$，差为 $3(>2)$；\n\n数字 $2$ 两次分别出现在位置 $3,5$，差为 $2(\\le2)$。\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :-: | :-: | :-: |\n| $1$ | $36$ | $n\\le10$ |\n| $2$ | $24$ | $d=\\left\\lfloor\\dfrac{n}{2}\\right\\rfloor$ |\n| $3$ | $40$ | $\\times$ |\n\n对于 $100\\%$ 的数据：$1\\le\\dfrac{d}{2}\\le n\\le10^6$。", "locale": "zh-CN"}}}
{"pid": "P7903", "type": "P", "difficulty": 3, "samples": [["20", "20\n20 18\n1 3\n19 12\n19 4\n16 1\n4 1\n1 7\n16 10\n7 20\n13 8\n10 2\n18 13\n13 17\n14 18\n11 19\n16 5\n2 6\n16 9\n17 15"], ["2", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "Special Judge", "O2优化", "洛谷月赛"], "title": "兜心の顶", "background": "Source：[八仙敬酒](/paste/78f1vlm0)，这是可以点的。\n\n- 吕洞宾——醉酒提壶力千钧；\n- 铁拐李——旋肘膝撞醉还真；\n- **汉钟离——跌步抱坛兜心顶**；\n- 蓝采和——单提敬酒拦腰破；\n- 张果老——醉酒抛杯踢连环；\n- 曹国舅——仙人敬酒锁喉扣；\n- 韩湘子——擒腕击胸醉吹箫；\n- 何仙姑——弹腰献酒醉荡步。", "description": "给定正整数 $n$，要求构造一棵 $n$ 个结点的树，满足树的直径的重心 **不是** 树的重心。\n\n同时这棵树需满足：直径$^1$、重心$^2$、直径的重心$^3$全部唯一。\n\n---\n\n注：\n\n- 树的直径$^1$：[https://oi-wiki.org/graph/tree-diameter/](https://oi-wiki.org/graph/tree-diameter/)\n- 树的重心$^2$：[https://oi-wiki.org/graph/tree-centroid/](https://oi-wiki.org/graph/tree-centroid/)\n- 树的直径的重心$^3$：将树的直径（一条链）视作一棵树，求其中心（一个点）。", "inputFormat": "第一行输入一个正整数 $n$，表示树的结点个数。", "outputFormat": "第一行输出一个正整数 $n$。\n\n接下来 $n-1$ 行，每行输出两个正整数 $u,v$，表示树的一条边。\n\n无解输出 `-1`。\n\n**本题采取 Special Judge，输出任意一组合法解均给分。**", "hint": "#### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kdgu2xd9.png)\n\n样例 #1 中直径的重心是 $7$，树的重心是 $1$，$1\\ne7$。\n\n样例 #2 中 $n=2$，只有两个点时显然重心不可能唯一。\n\n#### 数据范围\n\n**本题采取捆绑测试。**\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $n\\le10$ |\n| $2$ | $30$ | $n$ 是奇数 |\n| $3$ | $30$ | $n$ 是偶数 |\n| $4$ | $10$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\le n\\le10^4$。\n\n**本题提供 Special Judge 源码，参见下方附件。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "兜心の顶", "background": "Source：[八仙敬酒](/paste/78f1vlm0)，这是可以点的。\n\n- 吕洞宾——醉酒提壶力千钧；\n- 铁拐李——旋肘膝撞醉还真；\n- **汉钟离——跌步抱坛兜心顶**；\n- 蓝采和——单提敬酒拦腰破；\n- 张果老——醉酒抛杯踢连环；\n- 曹国舅——仙人敬酒锁喉扣；\n- 韩湘子——擒腕击胸醉吹箫；\n- 何仙姑——弹腰献酒醉荡步。", "description": "给定正整数 $n$，要求构造一棵 $n$ 个结点的树，满足树的直径的重心 **不是** 树的重心。\n\n同时这棵树需满足：直径$^1$、重心$^2$、直径的重心$^3$全部唯一。\n\n---\n\n注：\n\n- 树的直径$^1$：[https://oi-wiki.org/graph/tree-diameter/](https://oi-wiki.org/graph/tree-diameter/)\n- 树的重心$^2$：[https://oi-wiki.org/graph/tree-centroid/](https://oi-wiki.org/graph/tree-centroid/)\n- 树的直径的重心$^3$：将树的直径（一条链）视作一棵树，求其中心（一个点）。", "inputFormat": "第一行输入一个正整数 $n$，表示树的结点个数。", "outputFormat": "第一行输出一个正整数 $n$。\n\n接下来 $n-1$ 行，每行输出两个正整数 $u,v$，表示树的一条边。\n\n无解输出 `-1`。\n\n**本题采取 Special Judge，输出任意一组合法解均给分。**", "hint": "#### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kdgu2xd9.png)\n\n样例 #1 中直径的重心是 $7$，树的重心是 $1$，$1\\ne7$。\n\n样例 #2 中 $n=2$，只有两个点时显然重心不可能唯一。\n\n#### 数据范围\n\n**本题采取捆绑测试。**\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $n\\le10$ |\n| $2$ | $30$ | $n$ 是奇数 |\n| $3$ | $30$ | $n$ 是偶数 |\n| $4$ | $10$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\le n\\le10^4$。\n\n**本题提供 Special Judge 源码，参见下方附件。**", "locale": "zh-CN"}}}
{"pid": "P7904", "type": "P", "difficulty": 5, "samples": [["3 3 6 5 4 3\nS..\n...\n..E", "12\n"], ["3 3 1 2 7 8\nS.E\n\\-/\n...", "5"], ["3 3 1 2 7 8\nSEE\n\\-/\nSSS", "0"], ["1 4 6 5 4 3\nS>#E", "0"], ["2 2 6 5 4 3\n#E\nS^", "3"], ["1 3 1 2 7 8\nS#E", "-1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "O2优化", "洛谷月赛"], "title": "火烧の云", "background": "", "description": "乡间小路可以近似理解成 $n\\times m$ 的矩阵，道路有许多种，这里只列举其中的一小部分：\n\n1. ``#``：水池，无法通行。\n2. ``|``：直行类道路，竖直方向只能直行，水平方向只能左转、右转。\n3. ``-``：直行类道路，水平方向只能直行，竖直方向只能左转、右转。\n4. ``/``：转弯类道路，竖直方向只能右转，水平方向只能左转。\n5. ``\\``：转弯类道路，竖直方向只能左转，水平方向只能右转。\n6. ``.``：四岔路口，可以直行、左转、右转。\n7. ``S``：入口，从乡间之外进入入口不需要时间。\n8. ``E``：出口，从出口到达乡间之外不需要时间。\n\n前进类道路：到此格之后方向必须花费时间转向 `?`，如果来向就是 `?` 方向则不花费时间并必须跳一格。\n\n9. ``<``：`? = 西`。\n10. ``>``：`? = 东`。\n11. ``^``：`? = 北`。\n12. `v`：`? = 南`。\n\n**简单来说，就是和这类道路逆向时不能走，垂直于它的方向时花时间转到它的方向，顺着它的方向时就能够不花时间且必须一次性走两格。**\n\n\n直行类道路、转弯类道路、四岔路口、前进类道路依次花费 $a,b,c,d$ 个单位时间。\n\n由于乡间的构造奇特，可能 **不止一个** 入口和出口。\n\n求任意入口到任意出口的 **最短时间**，出入时的方向不作要求。\n\n---\n\n**题意简述**\n\n给定一张 $n\\times m$ 的地图，求起点 `S` 到终点 `E` 的最短时间，注意起点和终点可能有多个。", "inputFormat": "第一行输入六个用空格隔开的正整数 $n,m,a,b,c,d$。\n\n接下来输入一个 $n$ 行 $m$ 列的字符矩阵，将会包含上述 $12$ 种字符：``#``、``|``、``-``、 ``/``、``\\``、``.``、``<``、``>``、``^``、`v`、``S``、``E``。", "outputFormat": "输出从起点到达终点所需花费的最少时间，若无法到达终点，输出无解信息 `-1`。", "hint": "#### 样例说明\n\n样例 #1：从起点 $(1,1)$ 开始，到终点 $(3,3)$ 的路径为：$(1,1)\\rightarrow(1,2)\\rightarrow(1,3)\\rightarrow(2,3)\\rightarrow(3,3)$。经过了 $3$ 个四岔路口，每个的代价是 $4$，沿途的代价：$4\\times3=12$。\n\n样例 #2：从起点 $(1,1)$ 开始，到终点 $(1,3)$ 的路径为：$(1,1)\\rightarrow(2,1)\\rightarrow(2,2)\\rightarrow(2,3)\\rightarrow(1,3)$。经过 $2$ 个转弯类道路和 $1$ 个直行类道路，沿途的代价：$2\\times2+1\\times1=5$。\n\n样例 #3：选择 $(1,1)$ 的 `S` 和 $(1,2)$ 的 `E`，出入口相邻，代价为 $0$。\n\n样例 #4：通过前进类道路 `>` 可以跳一格直接到达 `E`，跳一格时不花费时间。\n\n样例 #5：前进类道路也可以用于转向，此时的功能与 `/` 相同，转向同样需要时间。\n\n样例 #6：这里 `#` 不能通过，因此不存在 `S` 到 `E` 的道路。\n\n#### 数据范围\n\n| 子任务编号 | 分值 | $n,m\\le$ | 特殊性质 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $\\times$ |\n| $2$ | $15$ | $\\times$ | $a=b=c=d=1$ |\n| $3$ | $20$ | $100$| $\\times$ |\n| $4$ | $25$ | $\\times$ | 字符 `S`、`E` 的数量 $=1$ |\n| $5$ | $30$ | $\\times$ | $\\times$ |\n\n**本题请注意常数因子对程序效率的影响。**\n\n对于 $100\\%$ 的数据：$1\\le n,m\\le2000$，$0\\le a,b,c,d\\le100$。", "locale": "zh-CN", "translations": {"en": {"title": "Burning Clouds", "background": "", "description": "A country road can be approximated as an $n\\times m$ matrix. There are many kinds of road tiles; only a small part of them are listed here:\n\n1. ``#``: Pond, impassable.\n2. ``|``: Straight-type road. In the vertical direction you can only go straight; in the horizontal direction you can only turn left or right.\n3. ``-``: Straight-type road. In the horizontal direction you can only go straight; in the vertical direction you can only turn left or right.\n4. ``/``: Turning-type road. In the vertical direction you can only turn right; in the horizontal direction you can only turn left.\n5. ``\\``: Turning-type road. In the vertical direction you can only turn left; in the horizontal direction you can only turn right.\n6. ``.``: Four-way intersection. You can go straight, turn left, or turn right.\n7. ``S``: Entrance. Entering this tile from outside the countryside takes no time.\n8. ``E``: Exit. Leaving the countryside from this tile takes no time.\n\nForward-type road: After reaching this cell, the direction must spend time to turn to `?`. If the incoming direction is already `?`, then it costs no time and you must jump one cell.\n\n9. ``<``: `? = West`.\n10. ``>``: `? = East`.\n11. ``^``: `? = North`.\n12. `v`: `? = South`.\n\n**In short: you cannot move against the direction of this kind of road; if you move in a direction perpendicular to it, you spend time to turn to its direction; if you move along its direction, then it costs no time and you must move two cells at once.**\n\nStraight-type roads, turning-type roads, four-way intersections, and forward-type roads cost $a,b,c,d$ units of time, respectively.\n\nDue to the strange structure of the countryside, there may be **more than one** entrance and exit.\n\nFind the **shortest time** from any entrance to any exit. The directions when entering and leaving are not restricted.\n\n---\n\n**Brief statement**\n\nGiven an $n\\times m$ map, find the shortest time from `S` to `E`. Note that there may be multiple start points and multiple end points.", "inputFormat": "The first line contains six positive integers $n,m,a,b,c,d$ separated by spaces.\n\nThen follow an $n$-row, $m$-column character matrix, which contains the above $12$ kinds of characters: ``#``、``|``、``-``、 ``/``、``\\``、``.``、``<``、``>``、``^``、`v`、``S``、``E``.", "outputFormat": "Output the minimum time needed to reach the destination from a start point. If the destination cannot be reached, output `-1`.", "hint": "#### Sample Explanation\n\nSample #1: Starting from $(1,1)$ and ending at $(3,3)$, the path is $(1,1)\\rightarrow(1,2)\\rightarrow(1,3)\\rightarrow(2,3)\\rightarrow(3,3)$. It passes through $3$ four-way intersections, each with cost $4$, so the total cost is $4\\times3=12$.\n\nSample #2: Starting from $(1,1)$ and ending at $(1,3)$, the path is $(1,1)\\rightarrow(2,1)\\rightarrow(2,2)\\rightarrow(2,3)\\rightarrow(1,3)$. It passes through $2$ turning-type roads and $1$ straight-type road, so the total cost is $2\\times2+1\\times1=5$.\n\nSample #3: Choose `S` at $(1,1)$ and `E` at $(1,2)$. The entrance and exit are adjacent, so the cost is $0$.\n\nSample #4: Using the forward-type road `>` you can jump one cell directly to `E`. Jumping one cell costs no time.\n\nSample #5: A forward-type road can also be used for turning; in this case its behavior is the same as `/`, and turning also requires time.\n\nSample #6: Here `#` cannot be passed, so there is no path from `S` to `E`.\n\n#### Constraints\n\n| Subtask ID | Score | $n,m\\le$ | Special Property |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $\\times$ |\n| $2$ | $15$ | $\\times$ | $a=b=c=d=1$ |\n| $3$ | $20$ | $100$ | $\\times$ |\n| $4$ | $25$ | $\\times$ | The number of characters `S` and `E` $=1$ |\n| $5$ | $30$ | $\\times$ | $\\times$ |\n\n**Please pay attention to the impact of constant factors on program efficiency in this problem.**\n\nFor $100\\%$ of the testdata: $1\\le n,m\\le2000$, $0\\le a,b,c,d\\le100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "火烧の云", "background": "", "description": "乡间小路可以近似理解成 $n\\times m$ 的矩阵，道路有许多种，这里只列举其中的一小部分：\n\n1. ``#``：水池，无法通行。\n2. ``|``：直行类道路，竖直方向只能直行，水平方向只能左转、右转。\n3. ``-``：直行类道路，水平方向只能直行，竖直方向只能左转、右转。\n4. ``/``：转弯类道路，竖直方向只能右转，水平方向只能左转。\n5. ``\\``：转弯类道路，竖直方向只能左转，水平方向只能右转。\n6. ``.``：四岔路口，可以直行、左转、右转。\n7. ``S``：入口，从乡间之外进入入口不需要时间。\n8. ``E``：出口，从出口到达乡间之外不需要时间。\n\n前进类道路：到此格之后方向必须花费时间转向 `?`，如果来向就是 `?` 方向则不花费时间并必须跳一格。\n\n9. ``<``：`? = 西`。\n10. ``>``：`? = 东`。\n11. ``^``：`? = 北`。\n12. `v`：`? = 南`。\n\n**简单来说，就是和这类道路逆向时不能走，垂直于它的方向时花时间转到它的方向，顺着它的方向时就能够不花时间且必须一次性走两格。**\n\n\n直行类道路、转弯类道路、四岔路口、前进类道路依次花费 $a,b,c,d$ 个单位时间。\n\n由于乡间的构造奇特，可能 **不止一个** 入口和出口。\n\n求任意入口到任意出口的 **最短时间**，出入时的方向不作要求。\n\n---\n\n**题意简述**\n\n给定一张 $n\\times m$ 的地图，求起点 `S` 到终点 `E` 的最短时间，注意起点和终点可能有多个。", "inputFormat": "第一行输入六个用空格隔开的正整数 $n,m,a,b,c,d$。\n\n接下来输入一个 $n$ 行 $m$ 列的字符矩阵，将会包含上述 $12$ 种字符：``#``、``|``、``-``、 ``/``、``\\``、``.``、``<``、``>``、``^``、`v`、``S``、``E``。", "outputFormat": "输出从起点到达终点所需花费的最少时间，若无法到达终点，输出无解信息 `-1`。", "hint": "#### 样例说明\n\n样例 #1：从起点 $(1,1)$ 开始，到终点 $(3,3)$ 的路径为：$(1,1)\\rightarrow(1,2)\\rightarrow(1,3)\\rightarrow(2,3)\\rightarrow(3,3)$。经过了 $3$ 个四岔路口，每个的代价是 $4$，沿途的代价：$4\\times3=12$。\n\n样例 #2：从起点 $(1,1)$ 开始，到终点 $(1,3)$ 的路径为：$(1,1)\\rightarrow(2,1)\\rightarrow(2,2)\\rightarrow(2,3)\\rightarrow(1,3)$。经过 $2$ 个转弯类道路和 $1$ 个直行类道路，沿途的代价：$2\\times2+1\\times1=5$。\n\n样例 #3：选择 $(1,1)$ 的 `S` 和 $(1,2)$ 的 `E`，出入口相邻，代价为 $0$。\n\n样例 #4：通过前进类道路 `>` 可以跳一格直接到达 `E`，跳一格时不花费时间。\n\n样例 #5：前进类道路也可以用于转向，此时的功能与 `/` 相同，转向同样需要时间。\n\n样例 #6：这里 `#` 不能通过，因此不存在 `S` 到 `E` 的道路。\n\n#### 数据范围\n\n| 子任务编号 | 分值 | $n,m\\le$ | 特殊性质 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $\\times$ |\n| $2$ | $15$ | $\\times$ | $a=b=c=d=1$ |\n| $3$ | $20$ | $100$| $\\times$ |\n| $4$ | $25$ | $\\times$ | 字符 `S`、`E` 的数量 $=1$ |\n| $5$ | $30$ | $\\times$ | $\\times$ |\n\n**本题请注意常数因子对程序效率的影响。**\n\n对于 $100\\%$ 的数据：$1\\le n,m\\le2000$，$0\\le a,b,c,d\\le100$。", "locale": "zh-CN"}}}
{"pid": "P7905", "type": "P", "difficulty": 6, "samples": [["3\n1 5 2 3\n2 3 4 1\n4 1 1 5", "4 1\n1 5\n2 3"], ["4\n14 1 10 15\n14 1 10 15\n14 1 10 15\n14 1 10 15", "11 11\n11 12\n11 13\n11 14"], ["1\n1 1 999 999", "-1 -1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 5000, 5000, 5000, 5000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "Special Judge", "O2优化", "洛谷月赛"], "title": "黄牛の争", "background": "Source：天空之城\n\n本题背景中「黄牛」仅代指某游戏中的一种怪物，与一般含义的「[**黄牛**](https://baike.baidu.com/item/黄牛党/285883)」无关。\n\n本题「推荐题目」三灰一黑，但不太能说明本题难度和他们差不多（\n\n相传在很久很久之前梅兰德大陆上空漂浮着一座天空之城，是当时财富、力量、荣誉中心，突然有一天再也不见踪影。\n\n如今已多个世纪不见痕迹的天空之城突然出现，王国的勇士去探索一番，但是飞船船票可不是那么好得到的。\n\n**飞艇码头的船长是梅德龙 · 杜鲁夫，船长为了牟利要求大家必须 *买* *票* *上* *船*，没有票的旅行者无法登船。**\n\nდ琢喵 作为一届黄牛的首领——黄牛党，派出了 $q$ 组黄牛买断了梅德龙 · 杜鲁夫的船票。\n\n她以高价卖出这些船票，并通过差价获取巨额利润。\n\n为维护飞艇码头的治安，梅德龙 · 杜鲁夫规定不允许人类和黄牛打架，当然船长并没有规定黄牛之间不可以打架。", "description": "დ琢喵 的手下有两种黄牛：\n\n1. I 类黄牛「攻击」为 $a$，「血量」为 $A$；\n2. II 类黄牛「攻击」为 $b$，「血量」为 $B$。\n\n黄牛之间的作战，满足以下条件：\n\n1. 任意时刻，某一方「血量」$\\le 0$ 时，其对手胜利；\n2. 每一回合，「攻击」高者先手；\n3. 每回合每方出手一次，造成的伤害即其「攻击」值。\n\n构造的 III 类黄牛应当满足下面条件：\n\n1. 「攻击」数值与 I 类黄牛和 II 类黄牛都不同；\n2. I 类黄牛和 II 类黄牛作战 II 类黄牛胜利；（若输入不满足该条件则应直接输出 `-1 -1`）\n3. II 类黄牛和 III 类黄牛作战 III 类黄牛胜利；\n4. III 类黄牛和 I 类黄牛作战 I 类黄牛胜利。\n\n请给出一种合法的构造。\n\n---\n\n**题意简述**\n\n解方程：（若 $x=\\text{true}$ 则 $[x]=1$ 反之 $=0$）\n\n$$\\begin{aligned}\\left\\lceil\\frac{A}{b}\\right\\rceil&+[b<a]\\le\\left\\lceil\\frac{B}{a}\\right\\rceil\\\\\\left\\lceil\\frac{B}{c}\\right\\rceil&+[c<b]\\le\\left\\lceil\\frac{C}{b}\\right\\rceil\\\\\\left\\lceil\\frac{C}{a}\\right\\rceil&+[a<c]\\le\\left\\lceil\\frac{A}{c}\\right\\rceil\\\\c&\\ne a~\\text{and}~c\\ne b\\end{aligned}$$\n\n已知 $a,A,b,B$，解 $c,C$。", "inputFormat": "**本题多测。**\n\n第一行一个正整数 $q$。\n\n接下来 $q$ 行，每行四个正整数 $a,A,b,B$。\n\n数据满足 $a\\ne b$。", "outputFormat": "一共 $q$ 行，每行两个正整数表示你构造的 III 类黄牛的「攻击」数值和「血量」数值，无解时输出 `-1 -1`。\n\n**本题采用 Special Judge，所有满足要求的解均给分。**", "hint": "### 样例说明\n\n对于样例 #1，可设 A 是 $(1,5)$，B 是 $(2,3)$，C 是 $(4,1)$。\n\n其中二元组 $(x,y)$ 表示一个「攻击」为 $x$，「血量」为 $y$ 的黄牛。\n\n下面的表格展现了 A、B、C 的对战情况，括号中的数字表示每回合开始时它们的「血量」数值。\n\n| A 和 B 单挑 | B 和 C 单挑 | C 和 A 单挑 |\n| :----------: | :----------: | :----------: |\n| $\\begin{aligned}&\\texttt{A(5)~B(3)}\\overset{\\texttt{A-2~B-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{A(3)~B(2)}\\overset{\\texttt{A-2~B-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{A(1)~B(1)}\\overset{\\texttt{A-2}}{\\Rightarrow}\\\\&\\texttt{A}\\le\\texttt{0~\\color{red}B win}\\end{aligned}$ | $\\begin{aligned}&\\texttt{B(3)~C(1)}\\overset{\\texttt{B-4}}{\\Rightarrow}\\\\&\\texttt{B}\\le\\texttt{0~\\color{red}C win}\\end{aligned}$ | $\\begin{aligned}&\\texttt{A(5)~C(1)}\\overset{\\texttt{A-4~C-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{C}\\le\\texttt{0~\\color{red}A win}\\end{aligned}$ |\n\n因此输出剩下一类黄牛即给分。\n\n对于样例 #2：钦定 III 类黄牛攻击力为 $11$，已经足以击倒 II 类黄牛，血量为 $11\\sim14$ 都可以输给 I 类黄牛。\n\n因此任意输出一组均给分。\n\n对于样例 #3：II 类黄牛十分强大，难以再构造又能击败 II 类黄牛又能输给 I 类黄牛的 III 类黄牛品种。\n\n因此输出 `-1 -1` 即给分。\n\n### 数据规模\n\n设 $M=\\max\\left(a,A,b,B\\right)$：\n\n- Subtask1(10pts)：$M\\le10,q=399\\underline0$。\n- Subtask2(20pts)：$M\\le100,q=399\\underline1$，数据随机。\n- Subtask3(10pts)：$M\\le10^5,q=99\\underline2$，数据随机。\n- Subtask4(20pts)：$M\\le10^5,q=99\\underline3$。\n- Subtask5(10pts)：$q=399\\underline4$，数据随机。\n- Subtask6(30pts)：$q=399\\underline5$，无特殊限制。\n- 本题根据数据强度设置了不同梯度的时间限制，如果有合理的满分做法被卡了请联系我。\n\n提示：数据组数 $q$ **结尾** 的数字（$\\underline0,\\underline1,\\underline2,\\underline3,\\underline4,\\underline5$）可能有助于你判断 Subtask 的类型。\n\n对于 $100\\%$ 的数据：$1\\le q<4000,1\\le M\\le10^8$。\n\n### 大样例\n\n本题提供符合 Subtask $2,3,5$ 限制的测试用例。\n\n直接编译并运行下面代码，即可得到 `E01.in` `E02.in` `E03.in` 分别是满足 Subtask $2,3,5$ 限制的测试数据。\n\n```cpp\n#include<ctime>\n#include<cstdio>\n#include<random>\n#include<string>\n#include<cassert>\n#include<cstdlib>\n#include<iostream>\n#define int long long\nvoid print(int x){\n\tif (x < 0) x = -x, putchar('-');\n\tif (x > 9) print(x / 10);\n\tputchar(x % 10 + '0');\n}\nvoid printsp(int x){\n\tprint(x), putchar(' ');\n}\nvoid println(int x){\n\tprint(x), putchar('\\n');\n}\nchar str[] = \"E  .in\";\nconst int Buff = 3989;\nstd::string string;\nnamespace Data_Maker{\n\tstd::mt19937 rnd(time(0));\n\tint rand(int l, int r) {\n\t\tint x = r - l + 1;\n\t\treturn (rnd() % x + x) % x + l;\n\t}\n\tint a, A, b, B;\n\tvoid maker(int subtaskID) {\n\t\tint t = Buff + subtaskID;\n\t\tif (3 <= subtaskID && subtaskID <= 4)\n\t\t\tt -= 3000;\n\t\tprintln(t);\n\t\tif (subtaskID == 2 || subtaskID == 3 || subtaskID == 5) {\n\t\t\tint MOD = 0;\n\t\t\tif (subtaskID == 2) MOD = 100;\n\t\t\tif (subtaskID == 3) MOD = 100000;\n\t\t\tif (subtaskID == 5) MOD = 100000000;\n\t\t\twhile (t--) {\n\t\t\t\ta = rand(1, MOD), A = rand(1, MOD);\n\t\t\t\tb = rand(1, MOD), B = rand(1, MOD);\n\t\t\t\twhile (b == a)\n\t\t\t\t\tb = rand(1, MOD);\n\t\t\t\tprintsp(a), printsp(A), printsp(b), println(B);\n\t\t\t}\n\t\t}\n\t}\n\tvoid File(int Test) {\n\t\tstr[1] = Test / 10 + '0';\n\t\tstr[2] = Test % 10 + '0';\n\t\tfreopen(str, \"w\", stdout);\n\t}\n\tvoid Subtask2() {\n\t\tfor (int Test = 1; Test <= 1; ++Test) {\n\t\t\tFile(Test); maker(2);\n\t\t}\n\t}\n\tvoid Subtask3() {\n\t\tfor (int Test = 2; Test <= 2; ++Test) {\n\t\t\tFile(Test); maker(3);\n\t\t}\n\t}\n\tvoid Subtask5() {\n\t\tfor (int Test = 3; Test <= 3; ++Test) {\n\t\t\tFile(Test); maker(5);\n\t\t}\n\t}\n}\nusing namespace Data_Maker;\nsigned main(){\n\tSubtask2();\n\tSubtask3();\n\tSubtask5();\n}\n```\n\n另外还提供了下面的 Special Judge，可以编译并通过调用 `spj E.in E.out E.ans` 来获取返回信息。\n\n```cpp\n\n#include \"testlib.h\"\n#define int long long\n#define inf inf.readLong()\n#define ouf ouf.readLong()\n#define ans ans.readLong()\nbool win(int a, int A, int b, int B){\n  int x = 0, f = 1;\n  if (a < b)\n    a ^= b ^= a ^= b, A ^= B ^= A ^= B, f *= -1;\n  while (1) {\n    if (B - a <= 0) {\n      x = 1;\n      break;\n    }\n    if (A - b <= 0) {\n      x = -1;\n      break;\n    }\n    B -= a, A -= b;\n  }\n  x *= f;\n  return x < 0;\n}\nsigned main (signed argc, char**argv) {\n  registerTestlibCmd(argc, argv);\n  int q = inf;\n  for (int t = 1; t <= q; ++t) {\n    int a = inf, A = inf, b = inf, B = inf, c = ouf, C = ouf, d = ans, D = ans;\n    if (d == -1 && c == -1 && C == -1)\n      continue;\n    if (c == a)\n      quitf (_wa, \"Test #%lld, a cannot equal to c!\", t);\n    if (c < 1 || C < 1)\n      quitf (_wa, \"Test #%lld, cannot print negative numbers!\", t);\n    if (!win(c, C, a, A))\n      quitf (_wa, \"Test #%lld, A cannot beat C!\", t);\n    if (!win(b, B, c, C))\n      quitf (_wa, \"Test #%lld, C cannot beat B!\", t);\n    if (!win(a, A, b, B))\n      quitf (_wa, \"Test #%lld, B cannot beat A!\", t);\n  }\n  quitf (_ok, \"Good job!\");\n}\n```\n\n题目附件中的是本题实际数据的脚造方式，如有更强有意义的数据欢迎在讨论区中提出并 at 出题人。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "黄牛の争", "background": "Source：天空之城\n\n本题背景中「黄牛」仅代指某游戏中的一种怪物，与一般含义的「[**黄牛**](https://baike.baidu.com/item/黄牛党/285883)」无关。\n\n本题「推荐题目」三灰一黑，但不太能说明本题难度和他们差不多（\n\n相传在很久很久之前梅兰德大陆上空漂浮着一座天空之城，是当时财富、力量、荣誉中心，突然有一天再也不见踪影。\n\n如今已多个世纪不见痕迹的天空之城突然出现，王国的勇士去探索一番，但是飞船船票可不是那么好得到的。\n\n**飞艇码头的船长是梅德龙 · 杜鲁夫，船长为了牟利要求大家必须 *买* *票* *上* *船*，没有票的旅行者无法登船。**\n\nდ琢喵 作为一届黄牛的首领——黄牛党，派出了 $q$ 组黄牛买断了梅德龙 · 杜鲁夫的船票。\n\n她以高价卖出这些船票，并通过差价获取巨额利润。\n\n为维护飞艇码头的治安，梅德龙 · 杜鲁夫规定不允许人类和黄牛打架，当然船长并没有规定黄牛之间不可以打架。", "description": "დ琢喵 的手下有两种黄牛：\n\n1. I 类黄牛「攻击」为 $a$，「血量」为 $A$；\n2. II 类黄牛「攻击」为 $b$，「血量」为 $B$。\n\n黄牛之间的作战，满足以下条件：\n\n1. 任意时刻，某一方「血量」$\\le 0$ 时，其对手胜利；\n2. 每一回合，「攻击」高者先手；\n3. 每回合每方出手一次，造成的伤害即其「攻击」值。\n\n构造的 III 类黄牛应当满足下面条件：\n\n1. 「攻击」数值与 I 类黄牛和 II 类黄牛都不同；\n2. I 类黄牛和 II 类黄牛作战 II 类黄牛胜利；（若输入不满足该条件则应直接输出 `-1 -1`）\n3. II 类黄牛和 III 类黄牛作战 III 类黄牛胜利；\n4. III 类黄牛和 I 类黄牛作战 I 类黄牛胜利。\n\n请给出一种合法的构造。\n\n---\n\n**题意简述**\n\n解方程：（若 $x=\\text{true}$ 则 $[x]=1$ 反之 $=0$）\n\n$$\\begin{aligned}\\left\\lceil\\frac{A}{b}\\right\\rceil&+[b<a]\\le\\left\\lceil\\frac{B}{a}\\right\\rceil\\\\\\left\\lceil\\frac{B}{c}\\right\\rceil&+[c<b]\\le\\left\\lceil\\frac{C}{b}\\right\\rceil\\\\\\left\\lceil\\frac{C}{a}\\right\\rceil&+[a<c]\\le\\left\\lceil\\frac{A}{c}\\right\\rceil\\\\c&\\ne a~\\text{and}~c\\ne b\\end{aligned}$$\n\n已知 $a,A,b,B$，解 $c,C$。", "inputFormat": "**本题多测。**\n\n第一行一个正整数 $q$。\n\n接下来 $q$ 行，每行四个正整数 $a,A,b,B$。\n\n数据满足 $a\\ne b$。", "outputFormat": "一共 $q$ 行，每行两个正整数表示你构造的 III 类黄牛的「攻击」数值和「血量」数值，无解时输出 `-1 -1`。\n\n**本题采用 Special Judge，所有满足要求的解均给分。**", "hint": "### 样例说明\n\n对于样例 #1，可设 A 是 $(1,5)$，B 是 $(2,3)$，C 是 $(4,1)$。\n\n其中二元组 $(x,y)$ 表示一个「攻击」为 $x$，「血量」为 $y$ 的黄牛。\n\n下面的表格展现了 A、B、C 的对战情况，括号中的数字表示每回合开始时它们的「血量」数值。\n\n| A 和 B 单挑 | B 和 C 单挑 | C 和 A 单挑 |\n| :----------: | :----------: | :----------: |\n| $\\begin{aligned}&\\texttt{A(5)~B(3)}\\overset{\\texttt{A-2~B-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{A(3)~B(2)}\\overset{\\texttt{A-2~B-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{A(1)~B(1)}\\overset{\\texttt{A-2}}{\\Rightarrow}\\\\&\\texttt{A}\\le\\texttt{0~\\color{red}B win}\\end{aligned}$ | $\\begin{aligned}&\\texttt{B(3)~C(1)}\\overset{\\texttt{B-4}}{\\Rightarrow}\\\\&\\texttt{B}\\le\\texttt{0~\\color{red}C win}\\end{aligned}$ | $\\begin{aligned}&\\texttt{A(5)~C(1)}\\overset{\\texttt{A-4~C-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{C}\\le\\texttt{0~\\color{red}A win}\\end{aligned}$ |\n\n因此输出剩下一类黄牛即给分。\n\n对于样例 #2：钦定 III 类黄牛攻击力为 $11$，已经足以击倒 II 类黄牛，血量为 $11\\sim14$ 都可以输给 I 类黄牛。\n\n因此任意输出一组均给分。\n\n对于样例 #3：II 类黄牛十分强大，难以再构造又能击败 II 类黄牛又能输给 I 类黄牛的 III 类黄牛品种。\n\n因此输出 `-1 -1` 即给分。\n\n### 数据规模\n\n设 $M=\\max\\left(a,A,b,B\\right)$：\n\n- Subtask1(10pts)：$M\\le10,q=399\\underline0$。\n- Subtask2(20pts)：$M\\le100,q=399\\underline1$，数据随机。\n- Subtask3(10pts)：$M\\le10^5,q=99\\underline2$，数据随机。\n- Subtask4(20pts)：$M\\le10^5,q=99\\underline3$。\n- Subtask5(10pts)：$q=399\\underline4$，数据随机。\n- Subtask6(30pts)：$q=399\\underline5$，无特殊限制。\n- 本题根据数据强度设置了不同梯度的时间限制，如果有合理的满分做法被卡了请联系我。\n\n提示：数据组数 $q$ **结尾** 的数字（$\\underline0,\\underline1,\\underline2,\\underline3,\\underline4,\\underline5$）可能有助于你判断 Subtask 的类型。\n\n对于 $100\\%$ 的数据：$1\\le q<4000,1\\le M\\le10^8$。\n\n### 大样例\n\n本题提供符合 Subtask $2,3,5$ 限制的测试用例。\n\n直接编译并运行下面代码，即可得到 `E01.in` `E02.in` `E03.in` 分别是满足 Subtask $2,3,5$ 限制的测试数据。\n\n```cpp\n#include<ctime>\n#include<cstdio>\n#include<random>\n#include<string>\n#include<cassert>\n#include<cstdlib>\n#include<iostream>\n#define int long long\nvoid print(int x){\n\tif (x < 0) x = -x, putchar('-');\n\tif (x > 9) print(x / 10);\n\tputchar(x % 10 + '0');\n}\nvoid printsp(int x){\n\tprint(x), putchar(' ');\n}\nvoid println(int x){\n\tprint(x), putchar('\\n');\n}\nchar str[] = \"E  .in\";\nconst int Buff = 3989;\nstd::string string;\nnamespace Data_Maker{\n\tstd::mt19937 rnd(time(0));\n\tint rand(int l, int r) {\n\t\tint x = r - l + 1;\n\t\treturn (rnd() % x + x) % x + l;\n\t}\n\tint a, A, b, B;\n\tvoid maker(int subtaskID) {\n\t\tint t = Buff + subtaskID;\n\t\tif (3 <= subtaskID && subtaskID <= 4)\n\t\t\tt -= 3000;\n\t\tprintln(t);\n\t\tif (subtaskID == 2 || subtaskID == 3 || subtaskID == 5) {\n\t\t\tint MOD = 0;\n\t\t\tif (subtaskID == 2) MOD = 100;\n\t\t\tif (subtaskID == 3) MOD = 100000;\n\t\t\tif (subtaskID == 5) MOD = 100000000;\n\t\t\twhile (t--) {\n\t\t\t\ta = rand(1, MOD), A = rand(1, MOD);\n\t\t\t\tb = rand(1, MOD), B = rand(1, MOD);\n\t\t\t\twhile (b == a)\n\t\t\t\t\tb = rand(1, MOD);\n\t\t\t\tprintsp(a), printsp(A), printsp(b), println(B);\n\t\t\t}\n\t\t}\n\t}\n\tvoid File(int Test) {\n\t\tstr[1] = Test / 10 + '0';\n\t\tstr[2] = Test % 10 + '0';\n\t\tfreopen(str, \"w\", stdout);\n\t}\n\tvoid Subtask2() {\n\t\tfor (int Test = 1; Test <= 1; ++Test) {\n\t\t\tFile(Test); maker(2);\n\t\t}\n\t}\n\tvoid Subtask3() {\n\t\tfor (int Test = 2; Test <= 2; ++Test) {\n\t\t\tFile(Test); maker(3);\n\t\t}\n\t}\n\tvoid Subtask5() {\n\t\tfor (int Test = 3; Test <= 3; ++Test) {\n\t\t\tFile(Test); maker(5);\n\t\t}\n\t}\n}\nusing namespace Data_Maker;\nsigned main(){\n\tSubtask2();\n\tSubtask3();\n\tSubtask5();\n}\n```\n\n另外还提供了下面的 Special Judge，可以编译并通过调用 `spj E.in E.out E.ans` 来获取返回信息。\n\n```cpp\n\n#include \"testlib.h\"\n#define int long long\n#define inf inf.readLong()\n#define ouf ouf.readLong()\n#define ans ans.readLong()\nbool win(int a, int A, int b, int B){\n  int x = 0, f = 1;\n  if (a < b)\n    a ^= b ^= a ^= b, A ^= B ^= A ^= B, f *= -1;\n  while (1) {\n    if (B - a <= 0) {\n      x = 1;\n      break;\n    }\n    if (A - b <= 0) {\n      x = -1;\n      break;\n    }\n    B -= a, A -= b;\n  }\n  x *= f;\n  return x < 0;\n}\nsigned main (signed argc, char**argv) {\n  registerTestlibCmd(argc, argv);\n  int q = inf;\n  for (int t = 1; t <= q; ++t) {\n    int a = inf, A = inf, b = inf, B = inf, c = ouf, C = ouf, d = ans, D = ans;\n    if (d == -1 && c == -1 && C == -1)\n      continue;\n    if (c == a)\n      quitf (_wa, \"Test #%lld, a cannot equal to c!\", t);\n    if (c < 1 || C < 1)\n      quitf (_wa, \"Test #%lld, cannot print negative numbers!\", t);\n    if (!win(c, C, a, A))\n      quitf (_wa, \"Test #%lld, A cannot beat C!\", t);\n    if (!win(b, B, c, C))\n      quitf (_wa, \"Test #%lld, C cannot beat B!\", t);\n    if (!win(a, A, b, B))\n      quitf (_wa, \"Test #%lld, B cannot beat A!\", t);\n  }\n  quitf (_ok, \"Good job!\");\n}\n```\n\n题目附件中的是本题实际数据的脚造方式，如有更强有意义的数据欢迎在讨论区中提出并 at 出题人。", "locale": "zh-CN"}}}
{"pid": "P7906", "type": "P", "difficulty": 6, "samples": [["11 4\n11 4 5 1 4 1 9 1 9 8 10\n5\n1 4\n1 9\n1 9\n8 10\n8 10", "2\n12\n12\n1\n1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2005", "O2优化", "Ynoi"], "title": "[Ynoi2005] rpxleqxq", "background": "", "description": "给你一个长度为 $n$ 的正整数序列 $a$，和一个常数 $x$ 。\n\n定义 $x \\oplus y$ 表示 $x$ 异或 $y$。\n\n有 $q$ 次询问，每次询问给出一段区间 $[l, r]$，问你这个区间中有多少二元组 $(i, j)$ 满足 $i < j \\land (a_i \\oplus a_j) \\le x$。", "inputFormat": "第一行两个正整数 $n, x$ ，分别表示序列长度和给定的常数。\n\n后面一行 $n$ 个整数表示序列 $a$ 。\n\n第三行一个正整数 $q$ 表示询问组数。\n\n后面 $q$ 行，每行两个正整数 $l, r$ 表示一次询问。 ", "outputFormat": "输出 $q$ 行，每行一个整数表示答案。", "hint": "Idea：Dpair，Solution：Dpair，Code：Dpair，Data：Dpair&nzhtl1477\n\n对于 $1\\%$ 的数据，为样例。\n\n对于另外 $19\\%$ 的数据，满足 $n,q\\le 100$。\n\n对于另外 $19\\%$ 的数据，满足 $n,q\\le 1000$。\n\n对于另外 $19\\%$ 的数据，满足 $q\\le 100$。\n\n对于另外 $19\\%$ 的数据，满足 $a_i,x\\le 100$。\n\n对于 $100\\%$ 的数据，满足 $1 \\le n, a_i, x\\le 2\\times 10^5, 1 \\le q \\le 10^6$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2005] rpxleqxq", "background": "", "description": "给你一个长度为 $n$ 的正整数序列 $a$，和一个常数 $x$ 。\n\n定义 $x \\oplus y$ 表示 $x$ 异或 $y$。\n\n有 $q$ 次询问，每次询问给出一段区间 $[l, r]$，问你这个区间中有多少二元组 $(i, j)$ 满足 $i < j \\land (a_i \\oplus a_j) \\le x$。", "inputFormat": "第一行两个正整数 $n, x$ ，分别表示序列长度和给定的常数。\n\n后面一行 $n$ 个整数表示序列 $a$ 。\n\n第三行一个正整数 $q$ 表示询问组数。\n\n后面 $q$ 行，每行两个正整数 $l, r$ 表示一次询问。 ", "outputFormat": "输出 $q$ 行，每行一个整数表示答案。", "hint": "Idea：Dpair，Solution：Dpair，Code：Dpair，Data：Dpair&nzhtl1477\n\n对于 $1\\%$ 的数据，为样例。\n\n对于另外 $19\\%$ 的数据，满足 $n,q\\le 100$。\n\n对于另外 $19\\%$ 的数据，满足 $n,q\\le 1000$。\n\n对于另外 $19\\%$ 的数据，满足 $q\\le 100$。\n\n对于另外 $19\\%$ 的数据，满足 $a_i,x\\le 100$。\n\n对于 $100\\%$ 的数据，满足 $1 \\le n, a_i, x\\le 2\\times 10^5, 1 \\le q \\le 10^6$ 。", "locale": "zh-CN"}}}
{"pid": "P7907", "type": "P", "difficulty": 6, "samples": [["5\n1 3 2 3 4\n3\n2 4\n1 3\n2 5", "2\n3\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2005", "线段树", "并查集", "O2优化", "Ynoi"], "title": "[Ynoi2005] rmscne", "background": null, "description": "给定长为 $n$ 的序列，$q$ 次询问区间 $[l,r]$ 的最短子区间 $[l',r']$，满足所有在 $[l,r]$ 中出现的数也在 $[l',r']$ 中出现. 你只需要输出 $[l',r']$ 的长度 $r'-l'+1$。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行有 $n$ 个正整数，表示序列的元素。\n\n接下来一行有一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $l,r$ 表示一个询问。", "outputFormat": "$q$ 行，每行一个正整数表示答案。", "hint": "Idea：qwaszx，Solution：qwaszx，Code：qwaszx，Data：qwaszx\n\n对于 $20\\%$ 的数据，满足 $n,q,a_i\\leq 5\\times 10^3$。\n\n对于 $50\\%$ 的数据，满足 $n,q,a_i\\leq 5\\times 10^4$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,q\\leq 2\\times 10^6$，$1\\leq a_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2005] rmscne", "background": null, "description": "给定长为 $n$ 的序列，$q$ 次询问区间 $[l,r]$ 的最短子区间 $[l',r']$，满足所有在 $[l,r]$ 中出现的数也在 $[l',r']$ 中出现. 你只需要输出 $[l',r']$ 的长度 $r'-l'+1$。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行有 $n$ 个正整数，表示序列的元素。\n\n接下来一行有一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $l,r$ 表示一个询问。", "outputFormat": "$q$ 行，每行一个正整数表示答案。", "hint": "Idea：qwaszx，Solution：qwaszx，Code：qwaszx，Data：qwaszx\n\n对于 $20\\%$ 的数据，满足 $n,q,a_i\\leq 5\\times 10^3$。\n\n对于 $50\\%$ 的数据，满足 $n,q,a_i\\leq 5\\times 10^4$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,q\\leq 2\\times 10^6$，$1\\leq a_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P7908", "type": "P", "difficulty": 7, "samples": [["5 4 1\n1 1 2 1 1\n1 5", "2"], ["10 3 3\n4 8 1 2 9 7 4 1 3 5\n1 10\n3 8\n5 5", "22\n10\n9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2005", "O2优化", "Ynoi"], "title": "[Ynoi2005] qwq", "background": "", "description": "定义初始数列为每个数字都为 $0$ 的数列。\n\n定义一次操作为将数列的一个区间中每一个数的值增加 $1$，规定该区间的长度不能超过 $m$。\n\n给定一个长度为 $n$ 的数列 $a$，第 $i$ 个数为 $a_i$。\n\n你需要回答 $q$ 次询问。每次询问给定 $l,r$，你需要回答将一个长度为 $r-l+1$ 的初始数列变为 $a$ 中的 $[l,r]$（即数列 $a_l$, $a_{l+1}$, $\\cdots$, $a_r$）至少需要多少次操作。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $a_i$。\n\n接下来 $q$ 行，每行两个整数，表示 $l,r$。", "outputFormat": "$q$ 行，每行一个整数，表示至少需要的操作次数。", "hint": "**「样例 1 说明」**\n\n一个长度为 $5$ 的初始数列为 $0$ $0$ $0$ $0$ $0$。\n\n第一次操作为，将区间 $[1,3]$ 中每一个数，即第 $1$、$2$、$3$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $1$ $0$ $0$。\n\n第二次操作为，将区间 $[3,5]$ 中每一个数，即第 $3$、$4$、$5$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $2$ $1$ $1$。\n\n**「数据范围与约定」**\n\n- Subtask 1（1 point）：$m=1$。\n- Subtask 2（4 points）：$m=n$。\n- Subtask 3（10 points）：$n,q\\le300$。\n- Subtask 4（10 points）：$n,q\\le5\\times10^3$。\n- Subtask 5（15 points）：$m\\le5$。\n- Subtask 6（15 points）：$m\\le100$。\n- Subtask 7（20 points）：$n,q\\le5\\times10^4$。\n- Subtask 8（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le10^5$，$1\\le q\\le10^5$，$0\\le a_i\\le10^9$，$1\\le l\\le r\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2005] qwq", "background": "", "description": "定义初始数列为每个数字都为 $0$ 的数列。\n\n定义一次操作为将数列的一个区间中每一个数的值增加 $1$，规定该区间的长度不能超过 $m$。\n\n给定一个长度为 $n$ 的数列 $a$，第 $i$ 个数为 $a_i$。\n\n你需要回答 $q$ 次询问。每次询问给定 $l,r$，你需要回答将一个长度为 $r-l+1$ 的初始数列变为 $a$ 中的 $[l,r]$（即数列 $a_l$, $a_{l+1}$, $\\cdots$, $a_r$）至少需要多少次操作。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $a_i$。\n\n接下来 $q$ 行，每行两个整数，表示 $l,r$。", "outputFormat": "$q$ 行，每行一个整数，表示至少需要的操作次数。", "hint": "**「样例 1 说明」**\n\n一个长度为 $5$ 的初始数列为 $0$ $0$ $0$ $0$ $0$。\n\n第一次操作为，将区间 $[1,3]$ 中每一个数，即第 $1$、$2$、$3$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $1$ $0$ $0$。\n\n第二次操作为，将区间 $[3,5]$ 中每一个数，即第 $3$、$4$、$5$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $2$ $1$ $1$。\n\n**「数据范围与约定」**\n\n- Subtask 1（1 point）：$m=1$。\n- Subtask 2（4 points）：$m=n$。\n- Subtask 3（10 points）：$n,q\\le300$。\n- Subtask 4（10 points）：$n,q\\le5\\times10^3$。\n- Subtask 5（15 points）：$m\\le5$。\n- Subtask 6（15 points）：$m\\le100$。\n- Subtask 7（20 points）：$n,q\\le5\\times10^4$。\n- Subtask 8（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le10^5$，$1\\le q\\le10^5$，$0\\le a_i\\le10^9$，$1\\le l\\le r\\le n$。", "locale": "zh-CN"}}}
{"pid": "P7909", "type": "P", "difficulty": 2, "samples": [["7 16 23\n", "6\n"], ["10 14 18\n", "8\n"], ["见附件中的 candy/candy3.in。", "见附件中的 candy/candy3.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2021", "O2优化", "CSP-J 入门级"], "title": "[CSP-J 2021] 分糖果", "background": "红太阳幼儿园的小朋友们开始分糖果啦！", "description": "红太阳幼儿园有 $n$ 个小朋友，你是其中之一。保证 $n \\ge 2$。\n\n有一天你在幼儿园的后花园里发现无穷多颗糖果，你打算拿一些糖果回去分给幼儿园的小朋友们。\n\n由于你只是个平平无奇的幼儿园小朋友，所以你的体力有限，至多只能拿 $R$ 块糖回去。\n\n但是拿的太少不够分的，所以你至少要拿 $L$ 块糖回去。保证 $n \\le L \\le R$。\n\n也就是说，如果你拿了 $k$ 块糖，那么你需要保证 $L \\le k \\le R$。\n\n如果你拿了 $k$ 块糖，你将把这 $k$ 块糖放到篮子里，并要求大家按照如下方案分糖果：只要篮子里有**不少于** $n$ 块糖果，幼儿园的所有 $n$ 个小朋友（包括你自己）都从篮子中拿走**恰好**一块糖，直到篮子里的糖数量**少于** $n$ 块。此时篮子里剩余的糖果均归你所有——这些糖果是**作为你搬糖果的奖励**。\n\n作为幼儿园高质量小朋友，你希望让**作为你搬糖果的奖励**的糖果数量（**而不是你最后获得的总糖果数量**！）尽可能多；因此你需要写一个程序，依次输入 $n, L, R$，并输出你最多能获得多少**作为你搬糖果的奖励**的糖果数量。", "inputFormat": "输入一行，包含三个正整数 $n, L, R$，分别表示小朋友的个数、糖果数量的下界和上界。", "outputFormat": "输出一行一个整数，表示你最多能获得的**作为你搬糖果的奖励**的糖果数量。", "hint": "**【样例解释 #1】**\n\n拿 $k = 20$ 块糖放入篮子里。\n\n篮子里现在糖果数 $20 \\ge n = 7$，因此所有小朋友获得一块糖；\n\n篮子里现在糖果数变成 $13 \\ge n = 7$，因此所有小朋友获得一块糖；\n\n篮子里现在糖果数变成 $6 < n = 7$，因此这 $6$ 块糖是**作为你搬糖果的奖励**。\n\n容易发现，你获得的**作为你搬糖果的奖励**的糖果数量不可能超过 $6$ 块（不然，篮子里的糖果数量最后仍然不少于 $n$，需要继续每个小朋友拿一块），因此答案是 $6$。\n\n**【样例解释 #2】**\n\n容易发现，当你拿的糖数量 $k$ 满足 $14 = L \\le k \\le R = 18$ 时，所有小朋友获得一块糖后，剩下的 $k - 10$ 块糖总是**作为你搬糖果的奖励**的糖果数量，因此拿 $k = 18$ 块是最优解，答案是 $8$。\n\n**【数据范围】**\n\n| 测试点 | $n \\le$ | $R \\le$ | $R - L \\le$ |\n|:-:|:-:|:-:|:-:|\n| $1$ | $2$ | $5$ | $5$ |\n| $2$ | $5$ | $10$ | $10$ |\n| $3$ | ${10}^3$ | ${10}^3$ | ${10}^3$ |\n| $4$ | ${10}^5$ | ${10}^5$ | ${10}^5$ |\n| $5$ | ${10}^3$ | ${10}^9$ | $0$ |\n| $6$ | ${10}^3$ | ${10}^9$ | ${10}^3$ |\n| $7$ | ${10}^5$ | ${10}^9$ | ${10}^5$ |\n| $8$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n| $9$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n| $10$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n\n对于所有数据，保证 $2 \\le n \\le L \\le R \\le {10}^9$。\n\n【感谢 hack 数据提供】  \n[wangbinfeng](/user/387009)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2021] 分糖果", "background": "红太阳幼儿园的小朋友们开始分糖果啦！", "description": "红太阳幼儿园有 $n$ 个小朋友，你是其中之一。保证 $n \\ge 2$。\n\n有一天你在幼儿园的后花园里发现无穷多颗糖果，你打算拿一些糖果回去分给幼儿园的小朋友们。\n\n由于你只是个平平无奇的幼儿园小朋友，所以你的体力有限，至多只能拿 $R$ 块糖回去。\n\n但是拿的太少不够分的，所以你至少要拿 $L$ 块糖回去。保证 $n \\le L \\le R$。\n\n也就是说，如果你拿了 $k$ 块糖，那么你需要保证 $L \\le k \\le R$。\n\n如果你拿了 $k$ 块糖，你将把这 $k$ 块糖放到篮子里，并要求大家按照如下方案分糖果：只要篮子里有**不少于** $n$ 块糖果，幼儿园的所有 $n$ 个小朋友（包括你自己）都从篮子中拿走**恰好**一块糖，直到篮子里的糖数量**少于** $n$ 块。此时篮子里剩余的糖果均归你所有——这些糖果是**作为你搬糖果的奖励**。\n\n作为幼儿园高质量小朋友，你希望让**作为你搬糖果的奖励**的糖果数量（**而不是你最后获得的总糖果数量**！）尽可能多；因此你需要写一个程序，依次输入 $n, L, R$，并输出你最多能获得多少**作为你搬糖果的奖励**的糖果数量。", "inputFormat": "输入一行，包含三个正整数 $n, L, R$，分别表示小朋友的个数、糖果数量的下界和上界。", "outputFormat": "输出一行一个整数，表示你最多能获得的**作为你搬糖果的奖励**的糖果数量。", "hint": "**【样例解释 #1】**\n\n拿 $k = 20$ 块糖放入篮子里。\n\n篮子里现在糖果数 $20 \\ge n = 7$，因此所有小朋友获得一块糖；\n\n篮子里现在糖果数变成 $13 \\ge n = 7$，因此所有小朋友获得一块糖；\n\n篮子里现在糖果数变成 $6 < n = 7$，因此这 $6$ 块糖是**作为你搬糖果的奖励**。\n\n容易发现，你获得的**作为你搬糖果的奖励**的糖果数量不可能超过 $6$ 块（不然，篮子里的糖果数量最后仍然不少于 $n$，需要继续每个小朋友拿一块），因此答案是 $6$。\n\n**【样例解释 #2】**\n\n容易发现，当你拿的糖数量 $k$ 满足 $14 = L \\le k \\le R = 18$ 时，所有小朋友获得一块糖后，剩下的 $k - 10$ 块糖总是**作为你搬糖果的奖励**的糖果数量，因此拿 $k = 18$ 块是最优解，答案是 $8$。\n\n**【数据范围】**\n\n| 测试点 | $n \\le$ | $R \\le$ | $R - L \\le$ |\n|:-:|:-:|:-:|:-:|\n| $1$ | $2$ | $5$ | $5$ |\n| $2$ | $5$ | $10$ | $10$ |\n| $3$ | ${10}^3$ | ${10}^3$ | ${10}^3$ |\n| $4$ | ${10}^5$ | ${10}^5$ | ${10}^5$ |\n| $5$ | ${10}^3$ | ${10}^9$ | $0$ |\n| $6$ | ${10}^3$ | ${10}^9$ | ${10}^3$ |\n| $7$ | ${10}^5$ | ${10}^9$ | ${10}^5$ |\n| $8$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n| $9$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n| $10$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n\n对于所有数据，保证 $2 \\le n \\le L \\le R \\le {10}^9$。\n\n【感谢 hack 数据提供】  \n[wangbinfeng](/user/387009)", "locale": "zh-CN"}}}
{"pid": "P7910", "type": "P", "difficulty": 3, "samples": [["3 4\n3 2 1\n2 3\n1 3 2\n2 2\n2 3\n", "1\n1\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "O2优化", "枚举", "排序", "CSP-J 入门级"], "title": "[CSP-J 2021] 插入排序", "background": "", "description": "插入排序是一种非常常见且简单的排序算法。小 Z 是一名大一的新生，今天 H 老师刚刚在上课的时候讲了插入排序算法。\n\n假设比较两个元素的时间为 $\\mathcal O(1)$，则插入排序可以以 $\\mathcal O(n^2)$ 的时间复杂度完成长度为 $n$ 的数组的排序。不妨假设这 $n$ 个数字分别存储在 $a_1, a_2, \\ldots, a_n$ 之中，则如下伪代码给出了插入排序算法的一种最简单的实现方式：\n\n这下面是 C/C++ 的示范代码：\n\n```cpp\nfor (int i = 1; i <= n; i++)\n\tfor (int j = i; j >= 2; j--)\n\t\tif (a[j] < a[j-1]) {\n\t\t\tint t = a[j-1];\n\t\t\ta[j-1] = a[j];\n\t\t\ta[j] = t;\n\t\t}\n```\n\n这下面是 Pascal 的示范代码：\n\n```pascal\nfor i:=1 to n do\n\tfor j:=i downto 2 do\n\t\tif a[j]<a[j-1] then\n\t\t\tbegin\n\t\t\t\tt:=a[i];\n\t\t\t\ta[i]:=a[j];\n\t\t\t\ta[j]:=t;\n\t\t\tend;\n```\n\n为了帮助小 Z 更好的理解插入排序，小 Z 的老师 H 老师留下了这么一道家庭作业：\n\nH 老师给了一个长度为 $n$ 的数组 $a$，数组下标从 $1$ 开始，并且数组中的所有元素均为非负整数。小 Z 需要支持在数组 $a$ 上的 $Q$ 次操作，操作共两种，参数分别如下：\n\n$1~x~v$：这是第一种操作，会将 $a$ 的第 $x$ 个元素，也就是 $a_x$ 的值，修改为 $v$。保证 $1 \\le x \\le n$，$1 \\le v \\le 10^9$。**注意这种操作会改变数组的元素，修改得到的数组会被保留，也会影响后续的操作**。\n\n$2~x$：这是第二种操作，假设 H 老师按照**上面的伪代码**对 $a$ 数组进行排序，你需要告诉 H 老师原来 $a$ 的第 $x$ 个元素，也就是 $a_x$，在排序后的新数组所处的位置。保证 $1 \\le x \\le n$。**注意这种操作不会改变数组的元素，排序后的数组不会被保留，也不会影响后续的操作**。\n\nH 老师不喜欢过多的修改，所以他保证类型 $1$ 的操作次数不超过 $5000$。\n\n小 Z 没有学过计算机竞赛，因此小 Z 并不会做这道题。他找到了你来帮助他解决这个问题。", "inputFormat": "第一行，包含两个正整数 $n, Q$，表示数组长度和操作次数。\n\n第二行，包含 $n$ 个空格分隔的非负整数，其中第 $i$ 个非负整数表示 $a_i$。\n\n接下来 $Q$ 行，每行 $2 \\sim 3$ 个正整数，表示一次操作，操作格式见【**题目描述**】。", "outputFormat": "对于每一次类型为 $2$ 的询问，输出一行一个正整数表示答案。", "hint": "**【样例解释 #1】**\n\n在修改操作之前，假设 H 老师进行了一次插入排序，则原序列的三个元素在排序结束后所处的位置分别是 $3, 2, 1$。\n\n在修改操作之后，假设 H 老师进行了一次插入排序，则原序列的三个元素在排序结束后所处的位置分别是 $3, 1, 2$。\n\n注意虽然此时 $a_2 = a_3$，但是我们**不能将其视为相同的元素**。\n\n**【样例 #2】**\n\n见附件中的 `sort/sort2.in` 与 `sort/sort2.ans`。\n\n该测试点数据范围同测试点 $1 \\sim 2$。\n\n**【样例 #3】**\n\n见附件中的 `sort/sort3.in` 与 `sort/sort3.ans`。\n\n该测试点数据范围同测试点 $3 \\sim 7$。\n\n**【样例 #4】**\n\n见附件中的 `sort/sort4.in` 与 `sort/sort4.ans`。\n\n该测试点数据范围同测试点 $12 \\sim 14$。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\le n \\le 8000$，$1 \\le Q \\le 2 \\times {10}^5$，$1 \\le x \\le n$，$1 \\le v,a_i \\le 10^9$。\n\n对于所有测试数据，保证在所有 $Q$ 次操作中，至多有 $5000$ 次操作属于类型一。\n\n各测试点的附加限制及分值如下表所示。\n\n| 测试点 | $n \\le$ | $Q \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $10$ | $10$ | 无 |\n| $5 \\sim 9$ | $300$ | $300$ | 无 |\n| $10 \\sim 13$ | $1500$ | $1500$ | 无 |\n| $14 \\sim 16$ | $8000$ | $8000$| 保证所有输入的 $a_i,v$ 互不相同 |\n| $17 \\sim 19$ | $8000$ | $8000$ | 无 |\n| $20 \\sim 22$ | $8000$ | $2 \\times 10^5$ | 保证所有输入的 $a_i,v$ 互不相同 |\n| $23 \\sim 25$ | $8000$ | $2 \\times 10^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2021] 插入排序", "background": "", "description": "插入排序是一种非常常见且简单的排序算法。小 Z 是一名大一的新生，今天 H 老师刚刚在上课的时候讲了插入排序算法。\n\n假设比较两个元素的时间为 $\\mathcal O(1)$，则插入排序可以以 $\\mathcal O(n^2)$ 的时间复杂度完成长度为 $n$ 的数组的排序。不妨假设这 $n$ 个数字分别存储在 $a_1, a_2, \\ldots, a_n$ 之中，则如下伪代码给出了插入排序算法的一种最简单的实现方式：\n\n这下面是 C/C++ 的示范代码：\n\n```cpp\nfor (int i = 1; i <= n; i++)\n\tfor (int j = i; j >= 2; j--)\n\t\tif (a[j] < a[j-1]) {\n\t\t\tint t = a[j-1];\n\t\t\ta[j-1] = a[j];\n\t\t\ta[j] = t;\n\t\t}\n```\n\n这下面是 Pascal 的示范代码：\n\n```pascal\nfor i:=1 to n do\n\tfor j:=i downto 2 do\n\t\tif a[j]<a[j-1] then\n\t\t\tbegin\n\t\t\t\tt:=a[i];\n\t\t\t\ta[i]:=a[j];\n\t\t\t\ta[j]:=t;\n\t\t\tend;\n```\n\n为了帮助小 Z 更好的理解插入排序，小 Z 的老师 H 老师留下了这么一道家庭作业：\n\nH 老师给了一个长度为 $n$ 的数组 $a$，数组下标从 $1$ 开始，并且数组中的所有元素均为非负整数。小 Z 需要支持在数组 $a$ 上的 $Q$ 次操作，操作共两种，参数分别如下：\n\n$1~x~v$：这是第一种操作，会将 $a$ 的第 $x$ 个元素，也就是 $a_x$ 的值，修改为 $v$。保证 $1 \\le x \\le n$，$1 \\le v \\le 10^9$。**注意这种操作会改变数组的元素，修改得到的数组会被保留，也会影响后续的操作**。\n\n$2~x$：这是第二种操作，假设 H 老师按照**上面的伪代码**对 $a$ 数组进行排序，你需要告诉 H 老师原来 $a$ 的第 $x$ 个元素，也就是 $a_x$，在排序后的新数组所处的位置。保证 $1 \\le x \\le n$。**注意这种操作不会改变数组的元素，排序后的数组不会被保留，也不会影响后续的操作**。\n\nH 老师不喜欢过多的修改，所以他保证类型 $1$ 的操作次数不超过 $5000$。\n\n小 Z 没有学过计算机竞赛，因此小 Z 并不会做这道题。他找到了你来帮助他解决这个问题。", "inputFormat": "第一行，包含两个正整数 $n, Q$，表示数组长度和操作次数。\n\n第二行，包含 $n$ 个空格分隔的非负整数，其中第 $i$ 个非负整数表示 $a_i$。\n\n接下来 $Q$ 行，每行 $2 \\sim 3$ 个正整数，表示一次操作，操作格式见【**题目描述**】。", "outputFormat": "对于每一次类型为 $2$ 的询问，输出一行一个正整数表示答案。", "hint": "**【样例解释 #1】**\n\n在修改操作之前，假设 H 老师进行了一次插入排序，则原序列的三个元素在排序结束后所处的位置分别是 $3, 2, 1$。\n\n在修改操作之后，假设 H 老师进行了一次插入排序，则原序列的三个元素在排序结束后所处的位置分别是 $3, 1, 2$。\n\n注意虽然此时 $a_2 = a_3$，但是我们**不能将其视为相同的元素**。\n\n**【样例 #2】**\n\n见附件中的 `sort/sort2.in` 与 `sort/sort2.ans`。\n\n该测试点数据范围同测试点 $1 \\sim 2$。\n\n**【样例 #3】**\n\n见附件中的 `sort/sort3.in` 与 `sort/sort3.ans`。\n\n该测试点数据范围同测试点 $3 \\sim 7$。\n\n**【样例 #4】**\n\n见附件中的 `sort/sort4.in` 与 `sort/sort4.ans`。\n\n该测试点数据范围同测试点 $12 \\sim 14$。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\le n \\le 8000$，$1 \\le Q \\le 2 \\times {10}^5$，$1 \\le x \\le n$，$1 \\le v,a_i \\le 10^9$。\n\n对于所有测试数据，保证在所有 $Q$ 次操作中，至多有 $5000$ 次操作属于类型一。\n\n各测试点的附加限制及分值如下表所示。\n\n| 测试点 | $n \\le$ | $Q \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $10$ | $10$ | 无 |\n| $5 \\sim 9$ | $300$ | $300$ | 无 |\n| $10 \\sim 13$ | $1500$ | $1500$ | 无 |\n| $14 \\sim 16$ | $8000$ | $8000$| 保证所有输入的 $a_i,v$ 互不相同 |\n| $17 \\sim 19$ | $8000$ | $8000$ | 无 |\n| $20 \\sim 22$ | $8000$ | $2 \\times 10^5$ | 保证所有输入的 $a_i,v$ 互不相同 |\n| $23 \\sim 25$ | $8000$ | $2 \\times 10^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P7911", "type": "P", "difficulty": 3, "samples": [["5\nServer 192.168.1.1:8080\nServer 192.168.1.1:8080\nClient 192.168.1.1:8080\nClient 192.168.1.1:80\nClient 192.168.1.1:99999\n", "OK\nFAIL\n1\nFAIL\nERR\n"], ["10\nServer 192.168.1.1:80\nClient 192.168.1.1:80\nClient 192.168.1.1:8080\nServer 192.168.1.1:80\nServer 192.168.1.1:8080\nServer 192.168.1.999:0\nClient 192.168.1.1.8080\nClient 192.168.1.1:8080\nClient 192.168.1.1:80\nClient 192.168.1.999:0\n", "OK\n1\nFAIL\nFAIL\nOK\nERR\nERR\n5\n1\nERR\n"], ["见附件中的 network/network3.in。", "见附件中的 network/network3.ans。"], ["见附件中的 network/network4.in。", "见附件中的 network/network4.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "2021", "O2优化", "枚举", "CSP-J 入门级"], "title": "[CSP-J 2021] 网络连接", "background": "", "description": "TCP/IP 协议是网络通信领域的一项重要协议。今天你的任务，就是尝试利用这个协议，还原一个简化后的网络连接场景。\n\n在本问题中，计算机分为两大类：服务机（`Server`）和客户机（`Client`）。服务机负责建立连接，客户机负责加入连接。\n\n需要进行网络连接的计算机共有 $n$ 台，编号为 $1 \\sim n$，这些机器将按编号递增的顺序，依次发起一条建立连接或加入连接的操作。\n\n每台机器在尝试建立或加入连接时需要提供一个地址串。服务机提供的地址串表示它尝试建立连接的地址，客户机提供的地址串表示它尝试加入连接的地址。\n\n一个符合规范的地址串应当具有以下特征：\n\n1. 必须形如 `a.b.c.d:e` 的格式，其中 $a, b, c, d, e$ 均为非负整数；\n2. $0 \\le a, b, c, d \\le 255$，$0 \\le e \\le 65535$；\n3. $a, b, c, d, e$ 均不能含有多余的前导 $0$。\n\n相应地，不符合规范的地址串可能具有以下特征：\n\n1. 不是形如 `a.b.c.d:e` 格式的字符串，例如含有多于 $3$ 个字符 `.` 或多于 $1$ 个字符 `:` 等情况；\n2. 整数 $a, b, c, d, e$ 中某一个或多个超出上述范围；\n3. 整数 $a, b, c, d, e$ 中某一个或多个含有多余的前导 $0$。\n\n例如，地址串 `192.168.0.255:80` 是符合规范的，但 `192.168.0.999:80`、`192.168.00.1:10`、`192.168.0.1:088`、`192:168:0:1.233` 均是不符合规范的。\n\n如果服务机或客户机在发起操作时提供的地址串不符合规范，这条操作将被直接忽略。\n\n在本问题中，我们假定凡是符合上述规范的地址串均可参与正常的连接，你无需考虑每个地址串的实际意义。\n\n由于网络阻塞等原因，不允许两台服务机使用相同的地址串，如果此类现象发生，后一台尝试建立连接的服务机将会无法成功建立连接；除此之外，凡是提供符合规范的地址串的服务机均可成功建立连接。\n\n如果某台提供符合规范的地址的客户机在尝试加入连接时，与先前某台已经成功建立连接的服务机提供的地址串相同，这台客户机就可以成功加入连接，并称其连接到这台服务机；如果找不到这样的服务机，则认为这台客户机无法成功加入连接。\n\n请注意，尽管不允许两台不同的服务机使用相同的地址串，但多台客户机使用同样的地址串，以及同一台服务机同时被多台客户机连接的情况是被允许的。\n\n你的任务很简单：在给出每台计算机的类型以及地址串之后，判断这台计算机的连接情况。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个字符串 $\\mathit{op}, \\mathit{ad}$，按照编号从小到大给出每台计算机的类型及地址串。\n\n其中 $\\mathit{op}$ 保证为字符串 `Server` 或 `Client` 之一，$\\mathit{ad}$ 为一个长度不超过 $25$ 的，仅由数字、字符 `.` 和字符 `:` 组成的非空字符串。\n\n每行的两个字符串之间用恰好一个空格分隔开，每行的末尾没有多余的空格。", "outputFormat": "输出共 $n$ 行，每行一个正整数或字符串表示第 $i$ 台计算机的连接状态。其中：\n\n如果第 $i$ 台计算机为服务机，则：\n\n1. 如果其提供符合规范的地址串且成功建立连接，输出字符串 `OK`。\n2. 如果其提供符合规范的地址串，但由于先前有相同地址串的服务机而无法成功建立连接，输出字符串 `FAIL`。\n3. 如果其提供的地址串不是符合规范的地址串，输出字符串 `ERR`。\n\n如果第 $i$ 台计算机为客户机，则：\n\n1. 如果其提供符合规范的地址串且成功加入连接，输出一个正整数表示这台客户机连接到的服务机的编号。\n2. 如果其提供符合规范的地址串，但无法成功加入连接时，输出字符串 `FAIL`。\n3. 如果其提供的地址串不是符合规范的地址串，输出字符串 `ERR`。", "hint": "**【样例解释 #1】**\n\n计算机 $1$ 为服务机，提供符合规范的地址串 `192.168.1.1:8080`，成功建立连接；\n\n计算机 $2$ 为服务机，提供与计算机 $1$ 相同的地址串，未能成功建立连接；\n\n计算机 $3$ 为客户机，提供符合规范的地址串 `192.168.1.1:8080`，成功加入连接，并连接到服务机 $1$；\n\n计算机 $4$ 为客户机，提供符合规范的地址串 `192.168.1.1:80`，找不到服务机与其连接；\n\n计算机 $5$ 为客户机，提供的地址串 `192.168.1.1:99999` 不符合规范。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1$ | $10$ | 性质 1 2 3 |\n| $2 \\sim 3$ | $100$ | 性质 1 2 3 |\n| $4 \\sim 5$ | $1000$ | 性质 1 2 3 |\n| $6 \\sim 8$ | $1000$ | 性质 1 2 |\n| $9 \\sim 11$ | $1000$ | 性质 1 |\n| $12 \\sim 13$ | $1000$ | 性质 2 |\n| $14 \\sim 15$ | $1000$ | 性质 4 |\n| $16 \\sim 17$ | $1000$ | 性质 5 |\n| $18 \\sim 20$ | $1000$ | 无特殊性质 |\n\n“性质 1”为：保证所有的地址串均符合规范；  \n“性质 2”为：保证对于任意两台不同的计算机，如果它们同为服务机或者同为客户机，则它们提供的地址串一定不同；  \n“性质 3”为：保证任意一台服务机的编号都小于所有的客户机；  \n“性质 4”为：保证所有的地址串均形如 `a.b.c.d:e` 的格式，其中 $a, b, c, d, e$ 均为不超过 ${10}^9$ 且不含有多余前导 $0$ 的非负整数；  \n“性质 5”为：保证所有的地址串均形如 `a.b.c.d:e` 的格式，其中 $a, b, c, d, e$ 均为只含有数字的非空字符串。\n\n对于 $100 \\%$ 的数据，保证 $1 \\le n \\le 1000$。\n\n**【提供 hack 数据感谢】**  \n\n- [xyf007](/user/68273)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2021] 网络连接", "background": "", "description": "TCP/IP 协议是网络通信领域的一项重要协议。今天你的任务，就是尝试利用这个协议，还原一个简化后的网络连接场景。\n\n在本问题中，计算机分为两大类：服务机（`Server`）和客户机（`Client`）。服务机负责建立连接，客户机负责加入连接。\n\n需要进行网络连接的计算机共有 $n$ 台，编号为 $1 \\sim n$，这些机器将按编号递增的顺序，依次发起一条建立连接或加入连接的操作。\n\n每台机器在尝试建立或加入连接时需要提供一个地址串。服务机提供的地址串表示它尝试建立连接的地址，客户机提供的地址串表示它尝试加入连接的地址。\n\n一个符合规范的地址串应当具有以下特征：\n\n1. 必须形如 `a.b.c.d:e` 的格式，其中 $a, b, c, d, e$ 均为非负整数；\n2. $0 \\le a, b, c, d \\le 255$，$0 \\le e \\le 65535$；\n3. $a, b, c, d, e$ 均不能含有多余的前导 $0$。\n\n相应地，不符合规范的地址串可能具有以下特征：\n\n1. 不是形如 `a.b.c.d:e` 格式的字符串，例如含有多于 $3$ 个字符 `.` 或多于 $1$ 个字符 `:` 等情况；\n2. 整数 $a, b, c, d, e$ 中某一个或多个超出上述范围；\n3. 整数 $a, b, c, d, e$ 中某一个或多个含有多余的前导 $0$。\n\n例如，地址串 `192.168.0.255:80` 是符合规范的，但 `192.168.0.999:80`、`192.168.00.1:10`、`192.168.0.1:088`、`192:168:0:1.233` 均是不符合规范的。\n\n如果服务机或客户机在发起操作时提供的地址串不符合规范，这条操作将被直接忽略。\n\n在本问题中，我们假定凡是符合上述规范的地址串均可参与正常的连接，你无需考虑每个地址串的实际意义。\n\n由于网络阻塞等原因，不允许两台服务机使用相同的地址串，如果此类现象发生，后一台尝试建立连接的服务机将会无法成功建立连接；除此之外，凡是提供符合规范的地址串的服务机均可成功建立连接。\n\n如果某台提供符合规范的地址的客户机在尝试加入连接时，与先前某台已经成功建立连接的服务机提供的地址串相同，这台客户机就可以成功加入连接，并称其连接到这台服务机；如果找不到这样的服务机，则认为这台客户机无法成功加入连接。\n\n请注意，尽管不允许两台不同的服务机使用相同的地址串，但多台客户机使用同样的地址串，以及同一台服务机同时被多台客户机连接的情况是被允许的。\n\n你的任务很简单：在给出每台计算机的类型以及地址串之后，判断这台计算机的连接情况。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行两个字符串 $\\mathit{op}, \\mathit{ad}$，按照编号从小到大给出每台计算机的类型及地址串。\n\n其中 $\\mathit{op}$ 保证为字符串 `Server` 或 `Client` 之一，$\\mathit{ad}$ 为一个长度不超过 $25$ 的，仅由数字、字符 `.` 和字符 `:` 组成的非空字符串。\n\n每行的两个字符串之间用恰好一个空格分隔开，每行的末尾没有多余的空格。", "outputFormat": "输出共 $n$ 行，每行一个正整数或字符串表示第 $i$ 台计算机的连接状态。其中：\n\n如果第 $i$ 台计算机为服务机，则：\n\n1. 如果其提供符合规范的地址串且成功建立连接，输出字符串 `OK`。\n2. 如果其提供符合规范的地址串，但由于先前有相同地址串的服务机而无法成功建立连接，输出字符串 `FAIL`。\n3. 如果其提供的地址串不是符合规范的地址串，输出字符串 `ERR`。\n\n如果第 $i$ 台计算机为客户机，则：\n\n1. 如果其提供符合规范的地址串且成功加入连接，输出一个正整数表示这台客户机连接到的服务机的编号。\n2. 如果其提供符合规范的地址串，但无法成功加入连接时，输出字符串 `FAIL`。\n3. 如果其提供的地址串不是符合规范的地址串，输出字符串 `ERR`。", "hint": "**【样例解释 #1】**\n\n计算机 $1$ 为服务机，提供符合规范的地址串 `192.168.1.1:8080`，成功建立连接；\n\n计算机 $2$ 为服务机，提供与计算机 $1$ 相同的地址串，未能成功建立连接；\n\n计算机 $3$ 为客户机，提供符合规范的地址串 `192.168.1.1:8080`，成功加入连接，并连接到服务机 $1$；\n\n计算机 $4$ 为客户机，提供符合规范的地址串 `192.168.1.1:80`，找不到服务机与其连接；\n\n计算机 $5$ 为客户机，提供的地址串 `192.168.1.1:99999` 不符合规范。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1$ | $10$ | 性质 1 2 3 |\n| $2 \\sim 3$ | $100$ | 性质 1 2 3 |\n| $4 \\sim 5$ | $1000$ | 性质 1 2 3 |\n| $6 \\sim 8$ | $1000$ | 性质 1 2 |\n| $9 \\sim 11$ | $1000$ | 性质 1 |\n| $12 \\sim 13$ | $1000$ | 性质 2 |\n| $14 \\sim 15$ | $1000$ | 性质 4 |\n| $16 \\sim 17$ | $1000$ | 性质 5 |\n| $18 \\sim 20$ | $1000$ | 无特殊性质 |\n\n“性质 1”为：保证所有的地址串均符合规范；  \n“性质 2”为：保证对于任意两台不同的计算机，如果它们同为服务机或者同为客户机，则它们提供的地址串一定不同；  \n“性质 3”为：保证任意一台服务机的编号都小于所有的客户机；  \n“性质 4”为：保证所有的地址串均形如 `a.b.c.d:e` 的格式，其中 $a, b, c, d, e$ 均为不超过 ${10}^9$ 且不含有多余前导 $0$ 的非负整数；  \n“性质 5”为：保证所有的地址串均形如 `a.b.c.d:e` 的格式，其中 $a, b, c, d, e$ 均为只含有数字的非空字符串。\n\n对于 $100 \\%$ 的数据，保证 $1 \\le n \\le 1000$。\n\n**【提供 hack 数据感谢】**  \n\n- [xyf007](/user/68273)。", "locale": "zh-CN"}}}
{"pid": "P7912", "type": "P", "difficulty": 4, "samples": [["12\n1 1 0 0 1 1 1 0 1 1 0 0\n", "1 3 5 8 9 11\n2 4 6 12\n7\n10\n"], ["20\n1 1 1 1 0 0 0 1 1 1 0 0 1 0 1 1 0 0 0 0\n", "1 5 8 11 13 14 15 17\n2 6 9 12 16 18\n3 7 10 19\n4 20\n"], ["见附件中的 fruit/fruit3.in。", "见附件中的 fruit/fruit3.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2021", "O2优化", "枚举", "CSP-J 入门级", "链表"], "title": "[CSP-J 2021] 小熊的果篮", "background": "", "description": "小熊的水果店里摆放着一排 $n$ 个水果。每个水果只可能是苹果或桔子，从左到右依次用正整数 $1, 2, \\ldots, n$ 编号。连续排在一起的同一种水果称为一个“块”。小熊要把这一排水果挑到若干个果篮里，具体方法是：每次都把每一个“块”中最左边的水果同时挑出，组成一个果篮。重复这一操作，直至水果用完。注意，每次挑完一个果篮后，“块”可能会发生变化。比如两个苹果“块”之间的唯一桔子被挑走后，两个苹果“块”就变成了一个“块”。请帮小熊计算每个果篮里包含的水果。", "inputFormat": "第一行，包含一个正整数 $n$，表示水果的数量。\n\n第二行，包含 $n$ 个空格分隔的整数，其中第 $i$ 个数表示编号为 $i$ 的水果的种类，$1$ 代表苹果，$0$ 代表桔子。", "outputFormat": "输出若干行。\n\n第 $i$ 行表示第 $i$ 次挑出的水果组成的果篮。从小到大排序输出该果篮中所有水果的编号，每两个编号之间用一个空格分隔。", "hint": "**【样例解释 #1】**\n\n这是第一组数据的样例说明。\n\n所有水果一开始的情况是 $[1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0]$，一共有 $6$ 个块。\n\n在第一次挑水果组成果篮的过程中，编号为 $1, 3, 5, 8, 9, 11$ 的水果被挑了出来。\n\n之后剩下的水果是 $[1, 0, 1, 1, 1, 0]$，一共 $4$ 个块。\n\n在第二次挑水果组成果篮的过程中，编号为 $2, 4, 6, 12$ 的水果被挑了出来。\n\n之后剩下的水果是 $[1, 1]$，只有 $1$ 个块。\n\n在第三次挑水果组成果篮的过程中，编号为 $7$ 的水果被挑了出来。\n\n最后剩下的水果是 $[1]$，只有 $1$ 个块。\n\n在第四次挑水果组成果篮的过程中，编号为 $10$ 的水果被挑了出来。\n\n**【数据范围】**\n\n对于 $10 \\%$ 的数据，$n \\le 5$。  \n对于 $30 \\%$ 的数据，$n \\le 1000$。  \n对于 $70 \\%$ 的数据，$n \\le 50000$。  \n对于 $100 \\%$ 的数据，$1 \\le n \\le 2 \\times {10}^5$。\n\n**【提示】**\n\n由于数据规模较大，建议 C/C++ 选手使用 `scanf` 和 `printf` 语句输入、输出。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2021] 小熊的果篮", "background": "", "description": "小熊的水果店里摆放着一排 $n$ 个水果。每个水果只可能是苹果或桔子，从左到右依次用正整数 $1, 2, \\ldots, n$ 编号。连续排在一起的同一种水果称为一个“块”。小熊要把这一排水果挑到若干个果篮里，具体方法是：每次都把每一个“块”中最左边的水果同时挑出，组成一个果篮。重复这一操作，直至水果用完。注意，每次挑完一个果篮后，“块”可能会发生变化。比如两个苹果“块”之间的唯一桔子被挑走后，两个苹果“块”就变成了一个“块”。请帮小熊计算每个果篮里包含的水果。", "inputFormat": "第一行，包含一个正整数 $n$，表示水果的数量。\n\n第二行，包含 $n$ 个空格分隔的整数，其中第 $i$ 个数表示编号为 $i$ 的水果的种类，$1$ 代表苹果，$0$ 代表桔子。", "outputFormat": "输出若干行。\n\n第 $i$ 行表示第 $i$ 次挑出的水果组成的果篮。从小到大排序输出该果篮中所有水果的编号，每两个编号之间用一个空格分隔。", "hint": "**【样例解释 #1】**\n\n这是第一组数据的样例说明。\n\n所有水果一开始的情况是 $[1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0]$，一共有 $6$ 个块。\n\n在第一次挑水果组成果篮的过程中，编号为 $1, 3, 5, 8, 9, 11$ 的水果被挑了出来。\n\n之后剩下的水果是 $[1, 0, 1, 1, 1, 0]$，一共 $4$ 个块。\n\n在第二次挑水果组成果篮的过程中，编号为 $2, 4, 6, 12$ 的水果被挑了出来。\n\n之后剩下的水果是 $[1, 1]$，只有 $1$ 个块。\n\n在第三次挑水果组成果篮的过程中，编号为 $7$ 的水果被挑了出来。\n\n最后剩下的水果是 $[1]$，只有 $1$ 个块。\n\n在第四次挑水果组成果篮的过程中，编号为 $10$ 的水果被挑了出来。\n\n**【数据范围】**\n\n对于 $10 \\%$ 的数据，$n \\le 5$。  \n对于 $30 \\%$ 的数据，$n \\le 1000$。  \n对于 $70 \\%$ 的数据，$n \\le 50000$。  \n对于 $100 \\%$ 的数据，$1 \\le n \\le 2 \\times {10}^5$。\n\n**【提示】**\n\n由于数据规模较大，建议 C/C++ 选手使用 `scanf` 和 `printf` 语句输入、输出。", "locale": "zh-CN"}}}
{"pid": "P7913", "type": "P", "difficulty": 5, "samples": [["3 5 4\n1 5\n3 8\n6 10\n9 14\n13 18\n2 11\n4 15\n7 17\n12 16\n", "7\n"], ["2 4 6\n20 30\n40 50\n21 22\n41 42\n1 19\n2 18\n3 4\n5 6\n7 8\n9 10\n", "4\n"], ["见附件中的 airport/airport3.in", "见附件中的 airport/airport3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "贪心", "2021", "O2优化", "前缀和", "队列", "CSP-S 提高级"], "title": "[CSP-S 2021] 廊桥分配", "background": "", "description": "当一架飞机抵达机场时，可以停靠在航站楼旁的廊桥，也可以停靠在位于机场边缘的远机位。乘客一般更期待停靠在廊桥，因为这样省去了坐摆渡车前往航站楼的周折。然而，因为廊桥的数量有限，所以这样的愿望不总是能实现。\n\n机场分为国内区和国际区，国内航班飞机只能停靠在国内区，国际航班飞机只能停靠在国际区。一部分廊桥属于国内区，其余的廊桥属于国际区。\n\nL 市新建了一座机场，一共有 $n$ 个廊桥。该机场决定，廊桥的使用遵循“先到先得”的原则，即每架飞机抵达后，如果相应的区（国内/国际）还有空闲的廊桥，就停靠在廊桥，否则停靠在远机位（假设远机位的数量充足）。该机场只有一条跑道，因此不存在两架飞机同时抵达的情况。\n\n现给定未来一段时间飞机的抵达、离开时刻，请你负责将 $n$ 个廊桥分配给国内区和国际区，使停靠廊桥的飞机数量最多。", "inputFormat": "输入的第一行，包含三个正整数 $n, m_1, m_2$，分别表示廊桥的个数、国内航班飞机的数量、国际航班飞机的数量。\n\n接下来 $m_1$ 行，是国内航班的信息，第 $i$ 行包含两个正整数 $a_{1, i}, b_{1, i}$，分别表示一架国内航班飞机的抵达、离开时刻。\n\n接下来 $m_2$ 行，是国际航班的信息，第 $i$ 行包含两个正整数 $a_{2, i}, b_{2, i}$，分别表示一架国际航班飞机的抵达、离开时刻。\n\n每行的多个整数由空格分隔。", "outputFormat": "输出一个正整数，表示能够停靠廊桥的飞机数量的最大值。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tdg5pa5a.png)\n\n在图中，我们用抵达、离开时刻的数对来代表一架飞机，如 $(1, 5)$ 表示时刻 $1$ 抵达、时刻 $5$ 离开的飞机；用 $\\surd$ 表示该飞机停靠在廊桥，用 $\\times$ 表示该飞机停靠在远机位。\n\n我们以表格中阴影部分的计算方式为例，说明该表的含义。在这一部分中，国际区有 $2$ 个廊桥，$4$ 架国际航班飞机依如下次序抵达：\n\n1. 首先 $(2, 11)$ 在时刻 $2$ 抵达，停靠在廊桥。\n2. 然后 $(4, 15)$ 在时刻 $4$ 抵达，停靠在另一个廊桥。\n3. 接着 $(7, 17)$ 在时刻 $7$ 抵达，这时前 $2$ 架飞机都还没离开、都还占用着廊桥，而国际区只有 $2$ 个廊桥，所以只能停靠远机位。\n4. 最后 $(12, 16)$ 在时刻 $12$ 抵达，这时 $(2, 11)$ 这架飞机已经离开，所以有 $1$ 个空闲的廊桥，该飞机可以停靠在廊桥。\n\n根据表格中的计算结果，当国内区分配 $2$ 个廊桥、国际区分配 $1$ 个廊桥时，停靠廊桥的飞机数量最多，一共 $7$ 架。\n\n**【样例解释 #2】**\n\n当国内区分配 $2$ 个廊桥、国际区分配 $0$ 个廊桥时，停靠廊桥的飞机数量最多，一共 $4$ 架，即所有的国内航班飞机都能停靠在廊桥。\n\n需要注意的是，本题中廊桥的使用遵循“先到先得”的原则，如果国际区只有 $1$ 个廊桥，那么将被飞机 $(1, 19)$ 占用，而不会被 $(3, 4)$、$(5, 6)$、$(7, 8)$、$(9, 10)$ 这 $4$ 架飞机先后使用。\n\n**【数据范围】**\n\n对于 $20 \\%$ 的数据，$n \\le 100$，$m_1 + m_2 \\le 100$。  \n对于 $40 \\%$ 的数据，$n \\le 5000$，$m_1 + m_2 \\le 5000$。  \n对于 $100 \\%$ 的数据，$1 \\le n \\le {10}^5$，$m_1, m_2 \\ge 1$，$m_1 + m_2 \\le {10}^5$，所有 $a_{1, i}, b_{1, i}, a_{2, i}, b_{2, i}$ 为数值不超过 ${10}^8$ 的互不相同的正整数，且保证对于每个 $i \\in [1, m_1]$，都有 $a_{1, i} < b_{1, i}$，以及对于每个 $i \\in [1, m_2]$，都有 $a_{2, i} < b_{2, i}$。\n\n【感谢 hack 数据提供】\n\n- [xingxuxin](/user/393378)。\n- [cyslngsul](/user/126765)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2021] 廊桥分配", "background": "", "description": "当一架飞机抵达机场时，可以停靠在航站楼旁的廊桥，也可以停靠在位于机场边缘的远机位。乘客一般更期待停靠在廊桥，因为这样省去了坐摆渡车前往航站楼的周折。然而，因为廊桥的数量有限，所以这样的愿望不总是能实现。\n\n机场分为国内区和国际区，国内航班飞机只能停靠在国内区，国际航班飞机只能停靠在国际区。一部分廊桥属于国内区，其余的廊桥属于国际区。\n\nL 市新建了一座机场，一共有 $n$ 个廊桥。该机场决定，廊桥的使用遵循“先到先得”的原则，即每架飞机抵达后，如果相应的区（国内/国际）还有空闲的廊桥，就停靠在廊桥，否则停靠在远机位（假设远机位的数量充足）。该机场只有一条跑道，因此不存在两架飞机同时抵达的情况。\n\n现给定未来一段时间飞机的抵达、离开时刻，请你负责将 $n$ 个廊桥分配给国内区和国际区，使停靠廊桥的飞机数量最多。", "inputFormat": "输入的第一行，包含三个正整数 $n, m_1, m_2$，分别表示廊桥的个数、国内航班飞机的数量、国际航班飞机的数量。\n\n接下来 $m_1$ 行，是国内航班的信息，第 $i$ 行包含两个正整数 $a_{1, i}, b_{1, i}$，分别表示一架国内航班飞机的抵达、离开时刻。\n\n接下来 $m_2$ 行，是国际航班的信息，第 $i$ 行包含两个正整数 $a_{2, i}, b_{2, i}$，分别表示一架国际航班飞机的抵达、离开时刻。\n\n每行的多个整数由空格分隔。", "outputFormat": "输出一个正整数，表示能够停靠廊桥的飞机数量的最大值。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tdg5pa5a.png)\n\n在图中，我们用抵达、离开时刻的数对来代表一架飞机，如 $(1, 5)$ 表示时刻 $1$ 抵达、时刻 $5$ 离开的飞机；用 $\\surd$ 表示该飞机停靠在廊桥，用 $\\times$ 表示该飞机停靠在远机位。\n\n我们以表格中阴影部分的计算方式为例，说明该表的含义。在这一部分中，国际区有 $2$ 个廊桥，$4$ 架国际航班飞机依如下次序抵达：\n\n1. 首先 $(2, 11)$ 在时刻 $2$ 抵达，停靠在廊桥。\n2. 然后 $(4, 15)$ 在时刻 $4$ 抵达，停靠在另一个廊桥。\n3. 接着 $(7, 17)$ 在时刻 $7$ 抵达，这时前 $2$ 架飞机都还没离开、都还占用着廊桥，而国际区只有 $2$ 个廊桥，所以只能停靠远机位。\n4. 最后 $(12, 16)$ 在时刻 $12$ 抵达，这时 $(2, 11)$ 这架飞机已经离开，所以有 $1$ 个空闲的廊桥，该飞机可以停靠在廊桥。\n\n根据表格中的计算结果，当国内区分配 $2$ 个廊桥、国际区分配 $1$ 个廊桥时，停靠廊桥的飞机数量最多，一共 $7$ 架。\n\n**【样例解释 #2】**\n\n当国内区分配 $2$ 个廊桥、国际区分配 $0$ 个廊桥时，停靠廊桥的飞机数量最多，一共 $4$ 架，即所有的国内航班飞机都能停靠在廊桥。\n\n需要注意的是，本题中廊桥的使用遵循“先到先得”的原则，如果国际区只有 $1$ 个廊桥，那么将被飞机 $(1, 19)$ 占用，而不会被 $(3, 4)$、$(5, 6)$、$(7, 8)$、$(9, 10)$ 这 $4$ 架飞机先后使用。\n\n**【数据范围】**\n\n对于 $20 \\%$ 的数据，$n \\le 100$，$m_1 + m_2 \\le 100$。  \n对于 $40 \\%$ 的数据，$n \\le 5000$，$m_1 + m_2 \\le 5000$。  \n对于 $100 \\%$ 的数据，$1 \\le n \\le {10}^5$，$m_1, m_2 \\ge 1$，$m_1 + m_2 \\le {10}^5$，所有 $a_{1, i}, b_{1, i}, a_{2, i}, b_{2, i}$ 为数值不超过 ${10}^8$ 的互不相同的正整数，且保证对于每个 $i \\in [1, m_1]$，都有 $a_{1, i} < b_{1, i}$，以及对于每个 $i \\in [1, m_2]$，都有 $a_{2, i} < b_{2, i}$。\n\n【感谢 hack 数据提供】\n\n- [xingxuxin](/user/393378)。\n- [cyslngsul](/user/126765)。", "locale": "zh-CN"}}}
{"pid": "P7914", "type": "P", "difficulty": 5, "samples": [["7 3\n(*??*??\n", "5\n"], ["10 2\n???(*??(?)\n", "19\n"], ["见附件中的 bracket/bracket3.in", "见附件中的 bracket/bracket3.ans"], ["见附件中的 bracket/bracket4.in", "见附件中的 bracket/bracket4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "O2优化", "区间 DP", "CSP-S 提高级"], "title": "[CSP-S 2021] 括号序列", "background": "", "description": "小 w 在赛场上遇到了这样一个题：一个长度为 $n$ 且符合规范的括号序列，其有些位置已经确定了，有些位置尚未确定，求这样的括号序列一共有多少个。\n\n身经百战的小 w 当然一眼就秒了这题，不仅如此，他还觉得一场正式比赛出这么简单的模板题也太小儿科了，于是他把这题进行了加强之后顺手扔给了小 c。\n\n具体而言，小 w 定义“超级括号序列”是由字符 `(`、`)`、`*` 组成的字符串，并且对于某个给定的常数 $k$，给出了“符合规范的超级括号序列”的定义如下：\n\n1. `()`、`(S)` 均是符合规范的超级括号序列，其中 `S` 表示任意一个仅由**不超过** $\\bm{k}$ **个**字符 `*` 组成的非空字符串（以下两条规则中的 `S` 均为此含义）；\n2. 如果字符串 `A` 和 `B` 均为符合规范的超级括号序列，那么字符串 `AB`、`ASB` 均为符合规范的超级括号序列，其中 `AB` 表示把字符串 `A` 和字符串 `B` 拼接在一起形成的字符串；\n3. 如果字符串 `A` 为符合规范的超级括号序列，那么字符串 `(A)`、`(SA)`、`(AS)` 均为符合规范的超级括号序列。\n4. 所有符合规范的超级括号序列均可通过上述 3 条规则得到。\n\n例如，若 $k = 3$，则字符串 `((**()*(*))*)(***)` 是符合规范的超级括号序列，但字符串 `*()`、`(*()*)`、`((**))*)`、`(****(*))` 均不是。特别地，空字符串也不被视为符合规范的超级括号序列。\n\n现在给出一个长度为 $n$ 的超级括号序列，其中有一些位置的字符已经确定，另外一些位置的字符尚未确定（用 `?` 表示）。小 w 希望能计算出：有多少种将所有尚未确定的字符一一确定的方法，使得得到的字符串是一个符合规范的超级括号序列？\n\n可怜的小 c 并不会做这道题，于是只好请求你来帮忙。", "inputFormat": "第一行，两个正整数 $n, k$。\n\n第二行，一个长度为 $n$ 且仅由 `(`、`)`、`*`、`?` 构成的字符串 $S$。", "outputFormat": "输出一个非负整数表示答案对 ${10}^9 + 7$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n如下几种方案是符合规范的：\n\n```plain\n(**)*()\n(**(*))\n(*(**))\n(*)**()\n(*)(**)\n```\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $15$ | 无 |\n| $4 \\sim 8$ | $40$ | 无 |\n| $9 \\sim 13$ | $100$ | 无 |\n| $14 \\sim 15$ | $500$ | $S$ 串中仅含有字符 `?` |\n| $16 \\sim 20$ | $500$ | 无 |\n\n对于 $100 \\%$ 的数据，$1 \\le k \\le n \\le 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2021] 括号序列", "background": "", "description": "小 w 在赛场上遇到了这样一个题：一个长度为 $n$ 且符合规范的括号序列，其有些位置已经确定了，有些位置尚未确定，求这样的括号序列一共有多少个。\n\n身经百战的小 w 当然一眼就秒了这题，不仅如此，他还觉得一场正式比赛出这么简单的模板题也太小儿科了，于是他把这题进行了加强之后顺手扔给了小 c。\n\n具体而言，小 w 定义“超级括号序列”是由字符 `(`、`)`、`*` 组成的字符串，并且对于某个给定的常数 $k$，给出了“符合规范的超级括号序列”的定义如下：\n\n1. `()`、`(S)` 均是符合规范的超级括号序列，其中 `S` 表示任意一个仅由**不超过** $\\bm{k}$ **个**字符 `*` 组成的非空字符串（以下两条规则中的 `S` 均为此含义）；\n2. 如果字符串 `A` 和 `B` 均为符合规范的超级括号序列，那么字符串 `AB`、`ASB` 均为符合规范的超级括号序列，其中 `AB` 表示把字符串 `A` 和字符串 `B` 拼接在一起形成的字符串；\n3. 如果字符串 `A` 为符合规范的超级括号序列，那么字符串 `(A)`、`(SA)`、`(AS)` 均为符合规范的超级括号序列。\n4. 所有符合规范的超级括号序列均可通过上述 3 条规则得到。\n\n例如，若 $k = 3$，则字符串 `((**()*(*))*)(***)` 是符合规范的超级括号序列，但字符串 `*()`、`(*()*)`、`((**))*)`、`(****(*))` 均不是。特别地，空字符串也不被视为符合规范的超级括号序列。\n\n现在给出一个长度为 $n$ 的超级括号序列，其中有一些位置的字符已经确定，另外一些位置的字符尚未确定（用 `?` 表示）。小 w 希望能计算出：有多少种将所有尚未确定的字符一一确定的方法，使得得到的字符串是一个符合规范的超级括号序列？\n\n可怜的小 c 并不会做这道题，于是只好请求你来帮忙。", "inputFormat": "第一行，两个正整数 $n, k$。\n\n第二行，一个长度为 $n$ 且仅由 `(`、`)`、`*`、`?` 构成的字符串 $S$。", "outputFormat": "输出一个非负整数表示答案对 ${10}^9 + 7$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n如下几种方案是符合规范的：\n\n```plain\n(**)*()\n(**(*))\n(*(**))\n(*)**()\n(*)(**)\n```\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $15$ | 无 |\n| $4 \\sim 8$ | $40$ | 无 |\n| $9 \\sim 13$ | $100$ | 无 |\n| $14 \\sim 15$ | $500$ | $S$ 串中仅含有字符 `?` |\n| $16 \\sim 20$ | $500$ | 无 |\n\n对于 $100 \\%$ 的数据，$1 \\le k \\le n \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P7915", "type": "P", "difficulty": 4, "samples": [["2\n5\n4 1 2 4 5 3 1 2 3 5\n3\n3 2 1 2 1 3\n", "LRRLLRRRRL\n-1\n"], ["见附件中的 palin/palin2.in", "见附件中的 palin/palin2.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "贪心", "2021", "O2优化", "CSP-S 提高级"], "title": "[CSP-S 2021] 回文", "background": null, "description": "给定正整数 $n$ 和整数序列 $a_1, a_2, \\ldots, a_{2 n}$，在这 $2 n$ 个数中，$1, 2, \\ldots, n$ 分别各出现恰好 $2$ 次。现在进行 $2 n$ 次操作，目标是创建一个长度同样为 $2 n$ 的序列 $b_1, b_2, \\ldots, b_{2 n}$，初始时 $b$ 为空序列，每次可以进行以下两种操作之一：\n\n1. 将序列 $a$ 的开头元素加到 $b$ 的末尾，并从 $a$ 中移除。\n2. 将序列 $a$ 的末尾元素加到 $b$ 的末尾，并从 $a$ 中移除。\n\n我们的目的是让 $b$ 成为一个**回文数列**，即令其满足对所有 $1 \\le i \\le n$，有 $b_i = b_{2 n + 1 - i}$。请你判断该目的是否能达成，如果可以，请输出字典序最小的操作方案，具体在【**输出格式**】中说明。", "inputFormat": "每个测试点包含多组测试数据。\n\n输入的第一行，包含一个整数 $T$，表示测试数据的组数。对于每组测试数据：\n\n第一行，包含一个正整数 $n$。  \n第二行，包含 $2 n$ 个用空格隔开的整数 $a_1, a_2, \\ldots, a_{2 n}$。", "outputFormat": "对每组测试数据输出一行答案。\n\n如果无法生成出回文数列，输出一行 `-1`，否则输出一行一个长度为 $2 n$ 的、由字符 `L` 或 `R` 构成的字符串（不含空格），其中 `L` 表示移除开头元素的操作 1，`R` 表示操作 2。\n\n你需要输出所有方案对应的字符串中字典序最小的一个。\n\n字典序的比较规则如下：长度均为 $2 n$ 的字符串 $s_{1 \\sim 2 n}$ 比 $t_{1 \\sim 2 n}$ 字典序小，当且仅当存在下标 $1 \\le k \\le 2 n$ 使得对于每个 $1 \\le i < k$ 有 $s_i = t_i$ 且 $s_k < t_k$。", "hint": "**【样例解释 #1】**\n\n在第一组数据中，生成的的 $b$ 数列是 $[4, 5, 3, 1, 2, 2, 1, 3, 5, 4]$，可以看出这是一个回文数列。\n\n另一种可能的操作方案是 `LRRLLRRRRR`，但比答案方案的字典序要大。\n\n**【数据范围】**\n\n令 $\\sum n$ 表示所有 $T$ 组测试数据中 $n$ 的和。\n\n对所有测试点保证 $1 \\le T \\le 100$，$1 \\le n, \\sum n \\le 5 \\times {10}^5$。\n\n| 测试点编号 | $T \\le$ | $n \\le$ | $\\sum n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 7$ | $10$ | $10$ | $50$ | 无 |\n| $8 \\sim 10$ | $100$ | $20$ | $1000$ | 无 |\n| $11 \\sim 12$ | $100$ | $100$ | $1000$ | 无 |\n| $13 \\sim 15$ | $100$ | $1000$ | $25000$ | 无 |\n| $16 \\sim 17$ | $1$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 无 |\n| $18 \\sim 20$ | $100$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 有 |\n| $21 \\sim 25$ | $100$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 无 |\n\n特殊性质：如果我们每次删除 $a$ 中两个相邻且相等的数，存在一种方式将序列删空（例如 $a = [1, 2, 2, 1]$）。\n\n**【hack 数据提供】**  \n@[潜在了H2O下面](/user/264490)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2021] 回文", "background": null, "description": "给定正整数 $n$ 和整数序列 $a_1, a_2, \\ldots, a_{2 n}$，在这 $2 n$ 个数中，$1, 2, \\ldots, n$ 分别各出现恰好 $2$ 次。现在进行 $2 n$ 次操作，目标是创建一个长度同样为 $2 n$ 的序列 $b_1, b_2, \\ldots, b_{2 n}$，初始时 $b$ 为空序列，每次可以进行以下两种操作之一：\n\n1. 将序列 $a$ 的开头元素加到 $b$ 的末尾，并从 $a$ 中移除。\n2. 将序列 $a$ 的末尾元素加到 $b$ 的末尾，并从 $a$ 中移除。\n\n我们的目的是让 $b$ 成为一个**回文数列**，即令其满足对所有 $1 \\le i \\le n$，有 $b_i = b_{2 n + 1 - i}$。请你判断该目的是否能达成，如果可以，请输出字典序最小的操作方案，具体在【**输出格式**】中说明。", "inputFormat": "每个测试点包含多组测试数据。\n\n输入的第一行，包含一个整数 $T$，表示测试数据的组数。对于每组测试数据：\n\n第一行，包含一个正整数 $n$。  \n第二行，包含 $2 n$ 个用空格隔开的整数 $a_1, a_2, \\ldots, a_{2 n}$。", "outputFormat": "对每组测试数据输出一行答案。\n\n如果无法生成出回文数列，输出一行 `-1`，否则输出一行一个长度为 $2 n$ 的、由字符 `L` 或 `R` 构成的字符串（不含空格），其中 `L` 表示移除开头元素的操作 1，`R` 表示操作 2。\n\n你需要输出所有方案对应的字符串中字典序最小的一个。\n\n字典序的比较规则如下：长度均为 $2 n$ 的字符串 $s_{1 \\sim 2 n}$ 比 $t_{1 \\sim 2 n}$ 字典序小，当且仅当存在下标 $1 \\le k \\le 2 n$ 使得对于每个 $1 \\le i < k$ 有 $s_i = t_i$ 且 $s_k < t_k$。", "hint": "**【样例解释 #1】**\n\n在第一组数据中，生成的的 $b$ 数列是 $[4, 5, 3, 1, 2, 2, 1, 3, 5, 4]$，可以看出这是一个回文数列。\n\n另一种可能的操作方案是 `LRRLLRRRRR`，但比答案方案的字典序要大。\n\n**【数据范围】**\n\n令 $\\sum n$ 表示所有 $T$ 组测试数据中 $n$ 的和。\n\n对所有测试点保证 $1 \\le T \\le 100$，$1 \\le n, \\sum n \\le 5 \\times {10}^5$。\n\n| 测试点编号 | $T \\le$ | $n \\le$ | $\\sum n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 7$ | $10$ | $10$ | $50$ | 无 |\n| $8 \\sim 10$ | $100$ | $20$ | $1000$ | 无 |\n| $11 \\sim 12$ | $100$ | $100$ | $1000$ | 无 |\n| $13 \\sim 15$ | $100$ | $1000$ | $25000$ | 无 |\n| $16 \\sim 17$ | $1$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 无 |\n| $18 \\sim 20$ | $100$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 有 |\n| $21 \\sim 25$ | $100$ | $5 \\times {10}^5$ | $5 \\times {10}^5$ | 无 |\n\n特殊性质：如果我们每次删除 $a$ 中两个相邻且相等的数，存在一种方式将序列删空（例如 $a = [1, 2, 2, 1]$）。\n\n**【hack 数据提供】**  \n@[潜在了H2O下面](/user/264490)。", "locale": "zh-CN"}}}
{"pid": "P7916", "type": "P", "difficulty": 6, "samples": [["2 3 1\n9 4 7\n3 8\n10 5\n2\n19 3 1\n17 9 0\n", "12\n"], ["见附件中的 traffic/traffic2.in", "见附件中的 traffic/traffic2.ans"], ["见附件中的 traffic/traffic3.in", "见附件中的 traffic/traffic3.ans"], ["见附件中的 traffic/traffic4.in", "见附件中的 traffic/traffic4.ans"], ["见附件中的 traffic/traffic5.in", "见附件中的 traffic/traffic5.ans"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "网络流", "O2优化", "最短路", "平面图", "CSP-S 提高级"], "title": "[CSP-S 2021] 交通规划", "background": "", "description": "给定一个平面上 $n$ 条水平直线和 $m$ 条垂直直线，它们相交形成 $n$ 行 $m$ 列的网格，从上到下第 $r$ 条水平直线和从左到右第 $c$ 条垂直直线之间的交点称为格点 $(r, c)$。网格中任意两个水平或垂直相邻的格点之间的线段称为一条边，每条边有一个非负整数边权。\n\n进行 $T$ 次询问，每次询问形式如下：\n\n给出 $k$（$T$ 次询问的 $k$ 可能不同）个附加点，每个附加点位于一条从网格边缘向外出发的射线上。所有从网格边缘向外出发的射线按左上-右上-右下-左下-左上的顺序依次编号为 $1$ 到 $2 n + 2 m$，如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iwajnac8.png)\n\n对于每次询问，不同附加点所在的射线互不相同。每个附加点和最近的格点之间的线段也称为一条边，也有非负整数边权（注意，在角上的格点有可能和两个附加点同时相连）。\n\n给定每个附加点的颜色（黑色或者白色），请你将网格内每个格点的颜色染成黑白二者之一，并使得所有两端颜色不同的边的边权和最小。请输出这个最小的边权和。", "inputFormat": "第一行，三个正整数 $n, m, T$，分别表示水平、垂直直线的数量，以及询问次数。\n\n接下来 $n - 1$ 行，每行 $m$ 个非负整数。其中第 $i$ 行的第 $j$ 个非负整数 ${x 1}_{i, j}$ 表示 $(i, j)$ 和 $(i + 1, j)$ 间的边权。\n\n接下来 $n$ 行，每行 $m - 1$ 个非负整数。其中第 $i$ 行的第 $j$ 个非负整数 ${x 2}_{i, j}$ 表示 $(i, j)$ 和 $(i, j + 1)$ 间的边权。\n\n接下来依次输入 $T$ 组询问。第 $i$ 组询问开头为一行一个正整数 $k_i$ 表示这次询问附加点的总数。接下来 $k_i$ 行每行三个非负整数。其中第 $j$ 行依次为 ${x 3}_{i, j}, p_{i, j}, t_{i, j}$ 表示第 $j$ 个附加点和相邻格点之间的边权、所在的射线编号以及附加点颜色（$0$ 为白色，$1$ 为黑色）。保证同一组询问内 $p_{i, j}$ 互不相同。\n\n每行的多个整数由空格分隔。", "outputFormat": "输出 $T$ 行，第 $i$ 行输出一个非负整数，表示第 $i$ 次询问染色之后两端颜色不同的边权和的最小值。", "hint": "**【样例解释 #1】**\n\n最优方案：$(1, 3), (1, 2), (2, 3)$ 为黑色；$(1, 1), (2, 1), (2, 2)$ 为白色。\n\n**【数据范围】**\n\n| 测试点编号 | $n, m \\le$ | $k_i \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $5$ | $50$ |\n| $3 \\sim 5$ | $18$ | $2$ |\n| $6 \\sim 8$ | $18$ | $50$ |\n| $9 \\sim 10$ | $100$ | $2$ |\n| $11 \\sim 12$ | $100$ | $50$ |\n| $13 \\sim 16$ | $500$ | $2$ |\n| $17 \\sim 20$ | $500$ | $50$ |\n\n对于所有数据，$2 \\le n, m \\le 500$，$1 \\le T \\le 50$，$1 \\le k_i \\le \\min \\{ 2 (n + m), 50 \\}$，$1 \\le \\sum_{i = 1}^{T} k_i \\le 50$，$0 \\le x \\le {10}^6$，$1 \\le p \\le 2 (n + m)$，$t \\in \\{ 0, 1 \\}$。\n\n保证对于每个 $i \\in [1, T]$，$p_{i, j}$ 互不相同。\n\n【感谢 hack 数据提供】  \n@[\\_Enthalpy](/user/42156)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2021] 交通规划", "background": "", "description": "给定一个平面上 $n$ 条水平直线和 $m$ 条垂直直线，它们相交形成 $n$ 行 $m$ 列的网格，从上到下第 $r$ 条水平直线和从左到右第 $c$ 条垂直直线之间的交点称为格点 $(r, c)$。网格中任意两个水平或垂直相邻的格点之间的线段称为一条边，每条边有一个非负整数边权。\n\n进行 $T$ 次询问，每次询问形式如下：\n\n给出 $k$（$T$ 次询问的 $k$ 可能不同）个附加点，每个附加点位于一条从网格边缘向外出发的射线上。所有从网格边缘向外出发的射线按左上-右上-右下-左下-左上的顺序依次编号为 $1$ 到 $2 n + 2 m$，如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iwajnac8.png)\n\n对于每次询问，不同附加点所在的射线互不相同。每个附加点和最近的格点之间的线段也称为一条边，也有非负整数边权（注意，在角上的格点有可能和两个附加点同时相连）。\n\n给定每个附加点的颜色（黑色或者白色），请你将网格内每个格点的颜色染成黑白二者之一，并使得所有两端颜色不同的边的边权和最小。请输出这个最小的边权和。", "inputFormat": "第一行，三个正整数 $n, m, T$，分别表示水平、垂直直线的数量，以及询问次数。\n\n接下来 $n - 1$ 行，每行 $m$ 个非负整数。其中第 $i$ 行的第 $j$ 个非负整数 ${x 1}_{i, j}$ 表示 $(i, j)$ 和 $(i + 1, j)$ 间的边权。\n\n接下来 $n$ 行，每行 $m - 1$ 个非负整数。其中第 $i$ 行的第 $j$ 个非负整数 ${x 2}_{i, j}$ 表示 $(i, j)$ 和 $(i, j + 1)$ 间的边权。\n\n接下来依次输入 $T$ 组询问。第 $i$ 组询问开头为一行一个正整数 $k_i$ 表示这次询问附加点的总数。接下来 $k_i$ 行每行三个非负整数。其中第 $j$ 行依次为 ${x 3}_{i, j}, p_{i, j}, t_{i, j}$ 表示第 $j$ 个附加点和相邻格点之间的边权、所在的射线编号以及附加点颜色（$0$ 为白色，$1$ 为黑色）。保证同一组询问内 $p_{i, j}$ 互不相同。\n\n每行的多个整数由空格分隔。", "outputFormat": "输出 $T$ 行，第 $i$ 行输出一个非负整数，表示第 $i$ 次询问染色之后两端颜色不同的边权和的最小值。", "hint": "**【样例解释 #1】**\n\n最优方案：$(1, 3), (1, 2), (2, 3)$ 为黑色；$(1, 1), (2, 1), (2, 2)$ 为白色。\n\n**【数据范围】**\n\n| 测试点编号 | $n, m \\le$ | $k_i \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $5$ | $50$ |\n| $3 \\sim 5$ | $18$ | $2$ |\n| $6 \\sim 8$ | $18$ | $50$ |\n| $9 \\sim 10$ | $100$ | $2$ |\n| $11 \\sim 12$ | $100$ | $50$ |\n| $13 \\sim 16$ | $500$ | $2$ |\n| $17 \\sim 20$ | $500$ | $50$ |\n\n对于所有数据，$2 \\le n, m \\le 500$，$1 \\le T \\le 50$，$1 \\le k_i \\le \\min \\{ 2 (n + m), 50 \\}$，$1 \\le \\sum_{i = 1}^{T} k_i \\le 50$，$0 \\le x \\le {10}^6$，$1 \\le p \\le 2 (n + m)$，$t \\in \\{ 0, 1 \\}$。\n\n保证对于每个 $i \\in [1, T]$，$p_{i, j}$ 互不相同。\n\n【感谢 hack 数据提供】  \n@[\\_Enthalpy](/user/42156)。", "locale": "zh-CN"}}}
{"pid": "P7917", "type": "P", "difficulty": 2, "samples": [["5\n-1 1 1 -1 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "洛谷月赛"], "title": "[Kubic] Addition", "background": "建议先看 B 题题目背景。", "description": "有一个初始长度为 $n$ 的序列 $a$。你需要进行 $n-1$ 次操作。每一次操作先在当前序列中选出两个相邻的数 $x,y$ 并删除（原序列中 $x$ 在 $y$ 左边），再往原位置插入一个 $x+y$ 或一个 $x-y$。$n-1$ 次操作之后最终只会剩下恰好一个数，求这个剩下的数的最大值。", "inputFormat": "第一行，一个整数 $n$。\n\n第二行，共 $n$ 个整数 $i$ 个表示 $a_i$。", "outputFormat": "共一行，一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^5,|a_i|\\le 10^9$。\n\n||分值|$n$|$\\vert a_i\\vert$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$10$|$\\le 2$|无特殊限制|无|\n|$\\operatorname{Subtask}2$|$20$|$\\le 100$|无特殊限制|无|\n|$\\operatorname{Subtask}3$|$5$|无特殊限制|无特殊限制|$a_i\\ge 0$|\n|$\\operatorname{Subtask}4$|$30$|无特殊限制|$\\le 1$|无|\n|$\\operatorname{Subtask}5$|$35$|无特殊限制|无特殊限制|无|\n\n### 样例解释\n\n一种操作过程如下：\n\n`-1 1 1 -1 1`\n\n`-1 1 1 -2`\n\n`-1 1 3`\n\n`-1 4`\n\n`3`\n\n可以证明没有更优的方案。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Kubic] Addition", "background": "建议先看 B 题题目背景。", "description": "有一个初始长度为 $n$ 的序列 $a$。你需要进行 $n-1$ 次操作。每一次操作先在当前序列中选出两个相邻的数 $x,y$ 并删除（原序列中 $x$ 在 $y$ 左边），再往原位置插入一个 $x+y$ 或一个 $x-y$。$n-1$ 次操作之后最终只会剩下恰好一个数，求这个剩下的数的最大值。", "inputFormat": "第一行，一个整数 $n$。\n\n第二行，共 $n$ 个整数 $i$ 个表示 $a_i$。", "outputFormat": "共一行，一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^5,|a_i|\\le 10^9$。\n\n||分值|$n$|$\\vert a_i\\vert$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$10$|$\\le 2$|无特殊限制|无|\n|$\\operatorname{Subtask}2$|$20$|$\\le 100$|无特殊限制|无|\n|$\\operatorname{Subtask}3$|$5$|无特殊限制|无特殊限制|$a_i\\ge 0$|\n|$\\operatorname{Subtask}4$|$30$|无特殊限制|$\\le 1$|无|\n|$\\operatorname{Subtask}5$|$35$|无特殊限制|无特殊限制|无|\n\n### 样例解释\n\n一种操作过程如下：\n\n`-1 1 1 -1 1`\n\n`-1 1 1 -2`\n\n`-1 1 3`\n\n`-1 4`\n\n`3`\n\n可以证明没有更优的方案。", "locale": "zh-CN"}}}
{"pid": "P7918", "type": "P", "difficulty": 2, "samples": [["3\n1 2 3\n4 5 6\n7 8 10", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "洛谷月赛"], "title": "[Kubic] Lines", "background": "建议先看 C 题题目背景。", "description": "平面直角坐标系中有 $n$ 条直线，**任意三条直线不交于一点且没有两条直线重合**。显然这些直线形成了不超过 $\\dfrac{n(n-1)}{2}$ 个**交点**。你可以从这些直线中选出一部分，一个点被**覆盖**当且仅当有**至少一条**被选中的直线经过了它。求最少选出多少条直线才能**覆盖**所有**交点**。", "inputFormat": "第一行，一个整数 $n$。\n\n接下来 $n$ 行，每行有三个整数 $a,b,c$，表示一条解析式为 $ax+by+c=0$ 的直线。\n\n**注意：输入数据不保证 $\\gcd(a,b)=1$**。", "outputFormat": "共一行，一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^5,|a|,|b|,|c|\\le 10^9,a,b$ 不全为 $0$。\n\n||分值|$n$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$10$|$\\le 20$|无|\n|$\\operatorname{Subtask}2$|$30$|$\\le 100$|无|\n|$\\operatorname{Subtask}3$|$10$|无特殊限制|$ab=0$|\n|$\\operatorname{Subtask}4$|$50$|无特殊限制|无|\n\n### 样例解释\n\n一种方法是选出 $x+2y+3=0$ 和 $4x+5y+6=0$ 两条线。\n\n可以证明没有更优的方案。", "locale": "zh-CN", "translations": {"en": {"title": "[Kubic] Lines", "background": "It is recommended to read the background of Problem C first.", "description": "In a 2D Cartesian coordinate system, there are $n$ lines. **No three lines intersect at one point, and no two lines coincide**. Obviously, these lines form at most $\\dfrac{n(n-1)}{2}$ **intersection points**. You may choose a subset of these lines. A point is considered **covered** if and only if **at least one** of the chosen lines passes through it. Find the minimum number of lines to choose so that all **intersection points** are **covered**.", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines each contain three integers $a, b, c$, describing a line with equation $ax+by+c=0$.\n\n**Note: the input does not guarantee $\\gcd(a,b)=1$.**", "outputFormat": "Output one line with one integer, representing the answer.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $|a|, |b|, |c| \\le 10^9$, and $a, b$ are not both $0$.\n\n||Score|$n$|Special Property|\n|:-:|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$10$|$\\le 20$|None|\n|$\\operatorname{Subtask}2$|$30$|$\\le 100$|None|\n|$\\operatorname{Subtask}3$|$10$|No special limit|$ab=0$|\n|$\\operatorname{Subtask}4$|$50$|No special limit|None|\n\n### Sample Explanation\n\nOne way is to choose the two lines $x+2y+3=0$ and $4x+5y+6=0$.\n\nIt can be proven that there is no better solution.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Kubic] Lines", "background": "建议先看 C 题题目背景。", "description": "平面直角坐标系中有 $n$ 条直线，**任意三条直线不交于一点且没有两条直线重合**。显然这些直线形成了不超过 $\\dfrac{n(n-1)}{2}$ 个**交点**。你可以从这些直线中选出一部分，一个点被**覆盖**当且仅当有**至少一条**被选中的直线经过了它。求最少选出多少条直线才能**覆盖**所有**交点**。", "inputFormat": "第一行，一个整数 $n$。\n\n接下来 $n$ 行，每行有三个整数 $a,b,c$，表示一条解析式为 $ax+by+c=0$ 的直线。\n\n**注意：输入数据不保证 $\\gcd(a,b)=1$**。", "outputFormat": "共一行，一个整数，表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^5,|a|,|b|,|c|\\le 10^9,a,b$ 不全为 $0$。\n\n||分值|$n$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$10$|$\\le 20$|无|\n|$\\operatorname{Subtask}2$|$30$|$\\le 100$|无|\n|$\\operatorname{Subtask}3$|$10$|无特殊限制|$ab=0$|\n|$\\operatorname{Subtask}4$|$50$|无特殊限制|无|\n\n### 样例解释\n\n一种方法是选出 $x+2y+3=0$ 和 $4x+5y+6=0$ 两条线。\n\n可以证明没有更优的方案。", "locale": "zh-CN"}}}
{"pid": "P7919", "type": "P", "difficulty": 4, "samples": [["5\nABBAA", "1\n3 4 BAC"], ["5\nABCBA", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "洛谷月赛"], "title": "[Kubic] ABC", "background": "建议先看 D 题题目背景。", "description": "给定一个长度为 $n$ 的只包含 $\\texttt{A,B,C}$ 的字符串 $S$，你可以进行若干次操作，每次操作为：\n\n- 先选择一个区间 $[l,r]$，你需要保证 $1\\le l\\le r\\le n$。\n\n- 再选择三个字符 $pA,pB,pC\\in\\{\\texttt{A,B,C}\\}$，并将 $S_{l\\dots r}$ 中所有 $\\texttt{A}$ 变为 $pA$，所有 $\\texttt{B}$ 变为 $pB$，所有 $\\texttt{C}$ 变为 $pC$，**$pA,pB,pC$ 可以相等**。\n\n求出**最少**需要进行多少次操作才能使得 $S$ 中**任意相邻两个字符不同**，并**输出构造方案**。", "inputFormat": "第一行，一个整数 $n$。\n\n第二行，一个长度为 $n$ 的字符串 $S$。", "outputFormat": "第一行，一个整数 $m$，表示你所构造的方案的操作次数。\n\n接下来 $m$ 行，每行两个整数 $l,r$ 和三个字符 $pA,pB,pC$。\n\n你需要保证 $1\\le l\\le r\\le n,pA,pB,pC\\in\\{\\texttt{A,B,C}\\}$。\n\n**注意：$pA,pB,pC$ 之间不需要，也不应该加空格（参考样例输出）**。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^3,S_i\\in\\{\\texttt{A,B,C}\\}$。\n\n||分值|$n$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$1$|无特殊限制|$\\forall i\\in[1,n),S_i\\neq S_{i+1}$|\n|$\\operatorname{Subtask}2$|$19$|$\\le 10$|无|\n|$\\operatorname{Subtask}3$|$10$|无特殊限制|$S_i=\\texttt{A}$|\n|$\\operatorname{Subtask}4$|$20$|无特殊限制|$S_i\\in\\{\\texttt{A,B}\\}$|\n|$\\operatorname{Subtask}5$|$20$|$\\le 100$|无|\n|$\\operatorname{Subtask}6$|$30$|无特殊限制|无|\n\n### 评分方法\n\n以下情况将会使你在该测试点获得 $0$ 分：\n\n- 输出格式不满足要求。\n\n- 输出多余信息（包括空格和换行符）\n\n- 构造的方案操作次数与标准答案不同。\n\n- 构造的方案不符合题目要求。\n\n- 时间超限。\n\n如果没有上述情况，你在该测试点获得满分。\n\n**保证 SPJ 占用不超过 $100\\operatorname{ms},10\\operatorname{MB}$**。\n\n### 样例解释 1\n\n一种操作过程如下：\n\n`ABBAA`\n\n`ABABA`\n\n可以证明没有更优的方案。\n\n### 样例解释 2\n\n初始序列已经符合题目要求，直接输出一行 $0$ 即可。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Kubic] ABC", "background": "建议先看 D 题题目背景。", "description": "给定一个长度为 $n$ 的只包含 $\\texttt{A,B,C}$ 的字符串 $S$，你可以进行若干次操作，每次操作为：\n\n- 先选择一个区间 $[l,r]$，你需要保证 $1\\le l\\le r\\le n$。\n\n- 再选择三个字符 $pA,pB,pC\\in\\{\\texttt{A,B,C}\\}$，并将 $S_{l\\dots r}$ 中所有 $\\texttt{A}$ 变为 $pA$，所有 $\\texttt{B}$ 变为 $pB$，所有 $\\texttt{C}$ 变为 $pC$，**$pA,pB,pC$ 可以相等**。\n\n求出**最少**需要进行多少次操作才能使得 $S$ 中**任意相邻两个字符不同**，并**输出构造方案**。", "inputFormat": "第一行，一个整数 $n$。\n\n第二行，一个长度为 $n$ 的字符串 $S$。", "outputFormat": "第一行，一个整数 $m$，表示你所构造的方案的操作次数。\n\n接下来 $m$ 行，每行两个整数 $l,r$ 和三个字符 $pA,pB,pC$。\n\n你需要保证 $1\\le l\\le r\\le n,pA,pB,pC\\in\\{\\texttt{A,B,C}\\}$。\n\n**注意：$pA,pB,pC$ 之间不需要，也不应该加空格（参考样例输出）**。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^3,S_i\\in\\{\\texttt{A,B,C}\\}$。\n\n||分值|$n$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$1$|无特殊限制|$\\forall i\\in[1,n),S_i\\neq S_{i+1}$|\n|$\\operatorname{Subtask}2$|$19$|$\\le 10$|无|\n|$\\operatorname{Subtask}3$|$10$|无特殊限制|$S_i=\\texttt{A}$|\n|$\\operatorname{Subtask}4$|$20$|无特殊限制|$S_i\\in\\{\\texttt{A,B}\\}$|\n|$\\operatorname{Subtask}5$|$20$|$\\le 100$|无|\n|$\\operatorname{Subtask}6$|$30$|无特殊限制|无|\n\n### 评分方法\n\n以下情况将会使你在该测试点获得 $0$ 分：\n\n- 输出格式不满足要求。\n\n- 输出多余信息（包括空格和换行符）\n\n- 构造的方案操作次数与标准答案不同。\n\n- 构造的方案不符合题目要求。\n\n- 时间超限。\n\n如果没有上述情况，你在该测试点获得满分。\n\n**保证 SPJ 占用不超过 $100\\operatorname{ms},10\\operatorname{MB}$**。\n\n### 样例解释 1\n\n一种操作过程如下：\n\n`ABBAA`\n\n`ABABA`\n\n可以证明没有更优的方案。\n\n### 样例解释 2\n\n初始序列已经符合题目要求，直接输出一行 $0$ 即可。", "locale": "zh-CN"}}}
{"pid": "P7920", "type": "P", "difficulty": 6, "samples": [["5\n1 2\n1 3\n2 4\n2 5", "1 5 4 2 3"], ["9\n1 2\n2 3\n1 4\n4 5\n5 6\n1 7\n7 8\n8 9", "1 9 2 6 7 8 3 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "[Kubic] Permutation", "background": "建议先看 E 题题目背景。", "description": "对于一个 $1\\sim n$ 的排列 $p$，定义 $G_p$ 为使用以下方法构造出来的**无向图**：\n- 对于每一个 $i\\in (1,n]$，找到最大的 $j\\in [1,i)$ 满足 $p_i>p_j$，然后连一条 $i,j$ 之间的边，如果不存在这样的 $j$ 则不连。\n\n给定一棵有 $n$ 个节点的树 $T$。\n\n把 $p$ 称为**好排列**当且仅当 $G_p$ 与 $T$ 同构。\n\n如果存在**好排列**，输出其中**字典序最大**的一个。否则输出 $-1$。\n\n无向图 $G_1,G_2$ 同构当且仅当存在一个 $1\\sim n$ 的排列 $q$，满足 $\\forall (u,v)\\in G_1,(q_u,q_v)\\in G_2,\\forall (u,v)\\notin G_1,(q_u,q_v)\\notin G_2$。", "inputFormat": "第一行，一个整数 $n$。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，表示 $u,v$ 之间有一条边。", "outputFormat": "共一行，$n$ 个整数，表示答案；或一个数 $-1$，表示无解。", "hint": "对于 $100\\%$ 的数据，$1\\le u,v\\le n\\le 5\\times 10^3$。\n\n||分值|$n$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$15$|$\\le 8$|无|\n|$\\operatorname{Subtask}2$|$5$|无特殊限制|树退化为一条链|\n|$\\operatorname{Subtask}3$|$15$|无特殊限制|度数 $\\ge 3$ 的节点个数 $\\le 1$|\n|$\\operatorname{Subtask}4$|$20$|$\\le 100$|无|\n|$\\operatorname{Subtask}5$|$20$|$\\le 10^3$|无|\n|$\\operatorname{Subtask}6$|$25$|无特殊限制|无|\n\n**说明：样例解释中的节点编号是 $p$ 中的下标。**\n\n### 样例解释 1\n\n$G_p$ 的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yawh0shj.png)\n\n可以证明没有更优的方案。\n\n### 样例解释 2\n\n$G_p$ 的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o9vgydub.png)\n\n可以证明没有更优的方案。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Kubic] Permutation", "background": "建议先看 E 题题目背景。", "description": "对于一个 $1\\sim n$ 的排列 $p$，定义 $G_p$ 为使用以下方法构造出来的**无向图**：\n- 对于每一个 $i\\in (1,n]$，找到最大的 $j\\in [1,i)$ 满足 $p_i>p_j$，然后连一条 $i,j$ 之间的边，如果不存在这样的 $j$ 则不连。\n\n给定一棵有 $n$ 个节点的树 $T$。\n\n把 $p$ 称为**好排列**当且仅当 $G_p$ 与 $T$ 同构。\n\n如果存在**好排列**，输出其中**字典序最大**的一个。否则输出 $-1$。\n\n无向图 $G_1,G_2$ 同构当且仅当存在一个 $1\\sim n$ 的排列 $q$，满足 $\\forall (u,v)\\in G_1,(q_u,q_v)\\in G_2,\\forall (u,v)\\notin G_1,(q_u,q_v)\\notin G_2$。", "inputFormat": "第一行，一个整数 $n$。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，表示 $u,v$ 之间有一条边。", "outputFormat": "共一行，$n$ 个整数，表示答案；或一个数 $-1$，表示无解。", "hint": "对于 $100\\%$ 的数据，$1\\le u,v\\le n\\le 5\\times 10^3$。\n\n||分值|$n$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$15$|$\\le 8$|无|\n|$\\operatorname{Subtask}2$|$5$|无特殊限制|树退化为一条链|\n|$\\operatorname{Subtask}3$|$15$|无特殊限制|度数 $\\ge 3$ 的节点个数 $\\le 1$|\n|$\\operatorname{Subtask}4$|$20$|$\\le 100$|无|\n|$\\operatorname{Subtask}5$|$20$|$\\le 10^3$|无|\n|$\\operatorname{Subtask}6$|$25$|无特殊限制|无|\n\n**说明：样例解释中的节点编号是 $p$ 中的下标。**\n\n### 样例解释 1\n\n$G_p$ 的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yawh0shj.png)\n\n可以证明没有更优的方案。\n\n### 样例解释 2\n\n$G_p$ 的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o9vgydub.png)\n\n可以证明没有更优的方案。", "locale": "zh-CN"}}}
{"pid": "P7921", "type": "P", "difficulty": 7, "samples": [["8", "2\n8 3\n5 2"], ["30", "5\n30 12\n18 8\n12 6\n10 5\n8 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "洛谷月赛"], "title": "[Kubic] Division", "background": "建议先看 F 题题目背景。", "description": "你有一个**可重集**，初始其中只有一个正整数 $n$。\n\n你每次可以选择当前在集合中的一个正整数 $x$ 并删去，再指定一个正整数 $y$（不要求在集合中）满足 $x>y$，并往集合中加入 $y$ 和 $x-y$。\n\n你需要保证在**任意时刻**，集合中的最大值**严格小于**集合中的最小值的 $2$ 倍。\n\n求出你**最多**能进行多少次操作，并**输出构造方案**。\n\n**输入数据保证最多能进行的操作次数不超过 $10^6$**。", "inputFormat": "共一行，一个整数 $n$。", "outputFormat": "第一行，一个整数 $m$，表示你所构造的方案的操作次数。\n\n接下来 $m$ 行，每行两个整数 $x,y$，表示一次操作（$x,y$ 的意义与题面中一致）。\n\n你需要保证 $x>y$ 且 $x$ 在当前集合中出现过。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^9$。\n\n||分值|$n$|\n|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$10$|$\\le 10$|\n|$\\operatorname{Subtask}2$|$20$|$\\le 100$|\n|$\\operatorname{Subtask}3$|$30$|$\\le 10^6$|\n|$\\operatorname{Subtask}4$|$40$|无特殊限制|\n\n### 评分方法\n\n以下情况将会使你在该测试点获得 $0$ 分：\n\n- 输出格式不满足要求。\n\n- 输出多余信息（包括空格和换行符）\n\n- 构造的方案操作次数与标准答案不同。\n\n- 构造的方案不符合题目要求。\n\n- 时间超限。\n\n如果没有上述情况，你在该测试点获得满分。\n\n**保证 SPJ 占用不超过 $100\\operatorname{ms},10\\operatorname{MB}$**\n\n### 样例解释 1\n\n一种操作过程如下：\n\n`8`\n\n`3 5`\n\n`2 3 3`\n\n可以证明没有更优的方案。\n\n### 样例解释 2\n\n一种操作过程如下：\n\n`30`\n\n`12 18`\n\n`8 10 12`\n\n`6 6 8 10`\n\n`5 5 6 6 8`\n\n`4 4 5 5 6 6`\n\n可以证明没有更优的方案。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Kubic] Division", "background": "建议先看 F 题题目背景。", "description": "你有一个**可重集**，初始其中只有一个正整数 $n$。\n\n你每次可以选择当前在集合中的一个正整数 $x$ 并删去，再指定一个正整数 $y$（不要求在集合中）满足 $x>y$，并往集合中加入 $y$ 和 $x-y$。\n\n你需要保证在**任意时刻**，集合中的最大值**严格小于**集合中的最小值的 $2$ 倍。\n\n求出你**最多**能进行多少次操作，并**输出构造方案**。\n\n**输入数据保证最多能进行的操作次数不超过 $10^6$**。", "inputFormat": "共一行，一个整数 $n$。", "outputFormat": "第一行，一个整数 $m$，表示你所构造的方案的操作次数。\n\n接下来 $m$ 行，每行两个整数 $x,y$，表示一次操作（$x,y$ 的意义与题面中一致）。\n\n你需要保证 $x>y$ 且 $x$ 在当前集合中出现过。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 10^9$。\n\n||分值|$n$|\n|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$10$|$\\le 10$|\n|$\\operatorname{Subtask}2$|$20$|$\\le 100$|\n|$\\operatorname{Subtask}3$|$30$|$\\le 10^6$|\n|$\\operatorname{Subtask}4$|$40$|无特殊限制|\n\n### 评分方法\n\n以下情况将会使你在该测试点获得 $0$ 分：\n\n- 输出格式不满足要求。\n\n- 输出多余信息（包括空格和换行符）\n\n- 构造的方案操作次数与标准答案不同。\n\n- 构造的方案不符合题目要求。\n\n- 时间超限。\n\n如果没有上述情况，你在该测试点获得满分。\n\n**保证 SPJ 占用不超过 $100\\operatorname{ms},10\\operatorname{MB}$**\n\n### 样例解释 1\n\n一种操作过程如下：\n\n`8`\n\n`3 5`\n\n`2 3 3`\n\n可以证明没有更优的方案。\n\n### 样例解释 2\n\n一种操作过程如下：\n\n`30`\n\n`12 18`\n\n`8 10 12`\n\n`6 6 8 10`\n\n`5 5 6 6 8`\n\n`4 4 5 5 6 6`\n\n可以证明没有更优的方案。", "locale": "zh-CN"}}}
{"pid": "P7922", "type": "P", "difficulty": 7, "samples": [["5 2 3\n6 2 4 1 3\n1 1\n1 1 4\n2 2 3\n4 1 1", "6\n3\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 5000, 5000, 5000, 5000, 5000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "[Kubic] Pyramid", "background": "容易发现，F 题出题人不是 lxl。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/icp2j1gj.png)", "description": "给定一个初始长度为 $n$ 的序列 $p$。\n\n设当前 $p$ 的长度为 $L$，有以下两种操作：\n\n- A 操作先构造长度为 $L-1$ 的序列 $p'$ 满足 $p_i'=\\min\\{p_i,p_{i+1}\\},i\\in [1,L)$。然后用 $p'$ 代替 $p$。\n\n- B 操作先构造长度为 $L-1$ 的序列 $p'$ 满足 $p_i'=\\max\\{p_i,p_{i+1}\\},i\\in [1,L)$。然后用 $p'$ 代替 $p$。\n\n再给定一个长度为 $m$ 的序列 $a$，表示一共进行 $m$ 组操作，第 $i$ 组中先进行 $a_i$ 次 A 操作，再进行 $a_i$ 次 B 操作。保证 $2\\sum a_i=n-1$。\n\n最后给定 $q$ 次询问，每次给出参数 $x,l,r$，你需要求出进行前 $x$ 个操作之后 $\\sum\\limits_{i=l}^r p_i$ 的值。\n\n**注意：询问中的 $x$ 指的是前 $x$ 个操作而不是前 $x$ 组操作，即有可能在某一组操作进行一部分时询问。**", "inputFormat": "第一行，三个整数 $n,m,q$。\n\n第二行，$n$ 个整数，第 $i$ 个整数表示 $p_i$。\n\n第三行，$m$ 个整数，第 $i$ 个整数表示 $a_i$。\n\n接下来 $q$ 行，每行三个整数 $x,l,r$，表示一次询问。", "outputFormat": "共 $q$ 行，每行一个整数，第 $i$ 行的整数表示第 $i$ 次询问的答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n,m,q\\le 1.5\\times 10^5,1\\le x<n,1\\le l\\le r\\le n-x,1\\le p_i\\le 10^9,2\\sum a_i=n-1$。\n\n||分值|时限 $(\\operatorname{s})$|$n$|$m$|$q$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$5$|$1$|$\\le 100$|$\\le 100$|$\\le 100$|无|\n|$\\operatorname{Subtask}2$|$10$|$1$|无特殊限制|无特殊限制|无特殊限制|AB|\n|$\\operatorname{Subtask}3$|$15$|$5$|无特殊限制|无特殊限制|无特殊限制|B|\n|$\\operatorname{Subtask}4$|$15$|$1$|无特殊限制|$=1$|无特殊限制|C|\n|$\\operatorname{Subtask}5$|$15$|$1$|无特殊限制|$=1$|无特殊限制|无|\n|$\\operatorname{Subtask}6$|$20$|$4$|无特殊限制|$\\le 50$|无特殊限制|无|\n|$\\operatorname{Subtask}7$|$20$|$5$|无特殊限制|无特殊限制|无特殊限制|无|\n\n特殊性质 A：$\\forall i,a_i=1$\n\n特殊性质 B：$l=r$。\n\n特殊性质 C：$l=1,r=n-x$。\n\n### 样例解释\n\n给定的操作过程如下：\n\n`6 2 4 1 3`\n\n`2 2 1 1`\n\n`2 2 1`\n\n`2 1`\n\n`2`\n\n~~特殊性质单独拉出来写只是为了表格好看一点...~~\n\n感谢 $\\operatorname{A\\color{red}lfalfa\\_w}$ 对本题的贡献！", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Kubic] Pyramid", "background": "容易发现，F 题出题人不是 lxl。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/icp2j1gj.png)", "description": "给定一个初始长度为 $n$ 的序列 $p$。\n\n设当前 $p$ 的长度为 $L$，有以下两种操作：\n\n- A 操作先构造长度为 $L-1$ 的序列 $p'$ 满足 $p_i'=\\min\\{p_i,p_{i+1}\\},i\\in [1,L)$。然后用 $p'$ 代替 $p$。\n\n- B 操作先构造长度为 $L-1$ 的序列 $p'$ 满足 $p_i'=\\max\\{p_i,p_{i+1}\\},i\\in [1,L)$。然后用 $p'$ 代替 $p$。\n\n再给定一个长度为 $m$ 的序列 $a$，表示一共进行 $m$ 组操作，第 $i$ 组中先进行 $a_i$ 次 A 操作，再进行 $a_i$ 次 B 操作。保证 $2\\sum a_i=n-1$。\n\n最后给定 $q$ 次询问，每次给出参数 $x,l,r$，你需要求出进行前 $x$ 个操作之后 $\\sum\\limits_{i=l}^r p_i$ 的值。\n\n**注意：询问中的 $x$ 指的是前 $x$ 个操作而不是前 $x$ 组操作，即有可能在某一组操作进行一部分时询问。**", "inputFormat": "第一行，三个整数 $n,m,q$。\n\n第二行，$n$ 个整数，第 $i$ 个整数表示 $p_i$。\n\n第三行，$m$ 个整数，第 $i$ 个整数表示 $a_i$。\n\n接下来 $q$ 行，每行三个整数 $x,l,r$，表示一次询问。", "outputFormat": "共 $q$ 行，每行一个整数，第 $i$ 行的整数表示第 $i$ 次询问的答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n,m,q\\le 1.5\\times 10^5,1\\le x<n,1\\le l\\le r\\le n-x,1\\le p_i\\le 10^9,2\\sum a_i=n-1$。\n\n||分值|时限 $(\\operatorname{s})$|$n$|$m$|$q$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$\\operatorname{Subtask}1$|$5$|$1$|$\\le 100$|$\\le 100$|$\\le 100$|无|\n|$\\operatorname{Subtask}2$|$10$|$1$|无特殊限制|无特殊限制|无特殊限制|AB|\n|$\\operatorname{Subtask}3$|$15$|$5$|无特殊限制|无特殊限制|无特殊限制|B|\n|$\\operatorname{Subtask}4$|$15$|$1$|无特殊限制|$=1$|无特殊限制|C|\n|$\\operatorname{Subtask}5$|$15$|$1$|无特殊限制|$=1$|无特殊限制|无|\n|$\\operatorname{Subtask}6$|$20$|$4$|无特殊限制|$\\le 50$|无特殊限制|无|\n|$\\operatorname{Subtask}7$|$20$|$5$|无特殊限制|无特殊限制|无特殊限制|无|\n\n特殊性质 A：$\\forall i,a_i=1$\n\n特殊性质 B：$l=r$。\n\n特殊性质 C：$l=1,r=n-x$。\n\n### 样例解释\n\n给定的操作过程如下：\n\n`6 2 4 1 3`\n\n`2 2 1 1`\n\n`2 2 1`\n\n`2 1`\n\n`2`\n\n~~特殊性质单独拉出来写只是为了表格好看一点...~~\n\n感谢 $\\operatorname{A\\color{red}lfalfa\\_w}$ 对本题的贡献！", "locale": "zh-CN"}}}
{"pid": "P7923", "type": "P", "difficulty": 2, "samples": [["2 x\nx>-3\nx<=1", "-3<x<=1"], ["3 y\ny>=5\ny>4\ny>=-2", "y>=5"], ["4 q\nq>=114514\nq>-200810\nq<-1022\nq<=-23333", "No Answer!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2021", "O2优化"], "title": "「EVOI-RD2」昕昕的不等式组", "background": "", "description": "昕昕做到了一道解一元一次不等式组的数学题。\n\n这个一元一次不等式组共有 $n$ 个一元一次不等式。她分别求出了每个不等式的解集，而她需要把它们合并为该不等式组的解集。\n\n每个不等式解集都化简为了最简形式，都形如 $x<t_i$（或 $x>t_i$ 等），其中 $t_i$ 为常数项，$x$ 为未知数。未知数为一个小写英文字母，会在不等号左侧；常数项为一个整数，会在不等号右侧。\n\n所有不等式使用的不等号只有 $<,>,\\le,\\ge$ 四种。在本题的输入输出中，$\\le$ 和 $\\ge$ 则分别用 $<=$ 和 $>=$ 代替。\n\n现在昕昕需要你求出该不等式组的解集。", "inputFormat": "第一行为一个正整数 $n$ 和一个小写英文字母 $x$，分别表示有 $n$ 个已简化的不等式解集，和不等式组中的未知数为 $x$。\n\n接下来 $n$ 行，每行为一个已化简的一元一次不等式，也就是该不等式的解集。\n\n对于每个解集，都由未知数、一个不等号和常数项 $t_i$ 依次排列而成，其中未知数为第一行给出的 $x$。", "outputFormat": "输出一行，即这个不等式组的解集，形如“$a\\ op1\\ x\\ op2\\ b$”或“$x\\ op\\ a$”等，其中 $op1,op2$ 为 $<$ 或 $<=$，$op$ 为 $<,<=,>,>=$ 或 $=$，注意不要有多余的空格。\n\n若该不等式组无解，则输出 `No Answer!`。", "hint": "**【样例 $1$ 说明】**\n\n如图，为数轴上各个不等式解集的公共部分，即为该不等式组的解集，$-3 < x \\le 1$。注意 $\\le$ 在输出中用 $<=$ 替换。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i9de5dub.png)\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。** \n\n+ Subtask 1（5 pts）：$n=1$。\n+ Subtask 2（25 pts）：$n=2$。\n+ Subtask 3（10 pts）：$n \\le 3$，$-4 \\times 10^4 \\le t_i \\le 4 \\times 10^4$。\n+ Subtask 4（20 pts）：$n \\le 10^4$，$-10^5 \\le t_i \\le 10^5$。\n+ Subtask 5（10 pts）：$n \\le 2 \\times 10^4$。\n+ Subtask 6（20 pts）：$n \\le 5 \\times 10^4$。\n+ Subtask 7（10 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 6 \\times 10^4$，$-10^6 \\le t_i \\le 10^6$，每个不等式中的未知数都是一个小写英文字母。\n\n**【提示】**\n\n以下为涉及到题目的一些数学知识。\n\n+ 不等式：用不等号联系的关系式。  \n+ 不等式的解：在含有未知数的不等式中，能使不等式成立的未知数的值。  \n+ 不等式的解集：不等式的解的全体。   \n+ 不等式组的解集：不等式组中所有不等式的解集的公共部分。  \n+ 解不等式组：求不等式组的解集的过程。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EVOI-RD2」昕昕的不等式组", "background": "", "description": "昕昕做到了一道解一元一次不等式组的数学题。\n\n这个一元一次不等式组共有 $n$ 个一元一次不等式。她分别求出了每个不等式的解集，而她需要把它们合并为该不等式组的解集。\n\n每个不等式解集都化简为了最简形式，都形如 $x<t_i$（或 $x>t_i$ 等），其中 $t_i$ 为常数项，$x$ 为未知数。未知数为一个小写英文字母，会在不等号左侧；常数项为一个整数，会在不等号右侧。\n\n所有不等式使用的不等号只有 $<,>,\\le,\\ge$ 四种。在本题的输入输出中，$\\le$ 和 $\\ge$ 则分别用 $<=$ 和 $>=$ 代替。\n\n现在昕昕需要你求出该不等式组的解集。", "inputFormat": "第一行为一个正整数 $n$ 和一个小写英文字母 $x$，分别表示有 $n$ 个已简化的不等式解集，和不等式组中的未知数为 $x$。\n\n接下来 $n$ 行，每行为一个已化简的一元一次不等式，也就是该不等式的解集。\n\n对于每个解集，都由未知数、一个不等号和常数项 $t_i$ 依次排列而成，其中未知数为第一行给出的 $x$。", "outputFormat": "输出一行，即这个不等式组的解集，形如“$a\\ op1\\ x\\ op2\\ b$”或“$x\\ op\\ a$”等，其中 $op1,op2$ 为 $<$ 或 $<=$，$op$ 为 $<,<=,>,>=$ 或 $=$，注意不要有多余的空格。\n\n若该不等式组无解，则输出 `No Answer!`。", "hint": "**【样例 $1$ 说明】**\n\n如图，为数轴上各个不等式解集的公共部分，即为该不等式组的解集，$-3 < x \\le 1$。注意 $\\le$ 在输出中用 $<=$ 替换。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i9de5dub.png)\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。** \n\n+ Subtask 1（5 pts）：$n=1$。\n+ Subtask 2（25 pts）：$n=2$。\n+ Subtask 3（10 pts）：$n \\le 3$，$-4 \\times 10^4 \\le t_i \\le 4 \\times 10^4$。\n+ Subtask 4（20 pts）：$n \\le 10^4$，$-10^5 \\le t_i \\le 10^5$。\n+ Subtask 5（10 pts）：$n \\le 2 \\times 10^4$。\n+ Subtask 6（20 pts）：$n \\le 5 \\times 10^4$。\n+ Subtask 7（10 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 6 \\times 10^4$，$-10^6 \\le t_i \\le 10^6$，每个不等式中的未知数都是一个小写英文字母。\n\n**【提示】**\n\n以下为涉及到题目的一些数学知识。\n\n+ 不等式：用不等号联系的关系式。  \n+ 不等式的解：在含有未知数的不等式中，能使不等式成立的未知数的值。  \n+ 不等式的解集：不等式的解的全体。   \n+ 不等式组的解集：不等式组中所有不等式的解集的公共部分。  \n+ 解不等式组：求不等式组的解集的过程。", "locale": "zh-CN"}}}
{"pid": "P7924", "type": "P", "difficulty": 5, "samples": [["5 5\n1 2 3 4 5\n1 2\n2 3\n1 4\n4 3\n3 5\n3\n1 2\n1 4\n1 3\n", "10"], ["5 6\n1 2 3 4 5\n1 2\n2 3\n1 4\n1 5\n4 3\n3 5\n3\n1 2\n1 4\n1 3\n", "15"]], "limits": {"time": [1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "双连通分量", "最近公共祖先 LCA", "差分"], "title": "「EVOI-RD2」旅行家", "background": null, "description": "小 A 是一个热衷于旅行的旅行家。有一天，他来到了一个城市，这个城市由 $n$ 个景点与 $m$ 条连接这些景点的道路组成。每个景点有一个**美观度** $a_i$。\n\n定义一条**旅游路径**为两个景点之间的一条非严格简单路径，也就是点可以重复经过，而边不可以。\n\n接下来有 $q$ 个旅游季，每个旅游季中，小 A 将指定两个顶点 $x$ 和 $y$，然后他将走遍 $x$ 到 $y$ 的**所有旅游路径**。 \n\n所有旅游季结束后，小 A 会统计他所经过的所有景点的美观度之和（重复经过一个景点只统计一次美观度）。他希望你告诉他这个美观度之和。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行 $n$ 个正整数 $a_i$，代表顶点 $i$ 的权值。\n\n接下来 $m$ 行，每行 $2$ 个正整数，表示一条无向边的两个端点。\n\n然后一个正整数 $q$，代表有 $q$ 个旅游季。\n\n接下来 $q$ 行，每行 $2$ 个整数 $x,y$，表示指定的起点和终点。", "outputFormat": "一行，一个整数表示最终的美观度总和。", "hint": "**【数据规模与范围】**\n\n**本题采用捆绑测试**\n\n+ Subtask 1 (30 pts)：$3 \\leq n \\leq 500,m \\leq 2 \\times 10^5,q\\le200$。\n+ Subtask 2 (30 pts)：$3 \\leq n \\leq 3 \\times 10^5,m \\leq 2 \\times 10^6,q\\le10^6$。\n+ Subtask 3 (40 pts)：$3 \\leq n \\leq 5 \\times 10^5,m \\leq 2 \\times 10^6,q\\le10^6$。\n\n对于 $100\\%$ 的数据，保证 $3 \\leq n \\leq 5 \\times  10^5$，$m \\leq 2 \\times 10^6$，$q\\le10^6$，$1 \\leq a_i \\leq 100$，且该图联通，没有重边和自环。\n\n---\n\n**对于题面的解释：**\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a2oku1vq.png)\n\n上图与样例无关。\n\n如图，为城市的景点分布图，为无向图。  \n假设 $6$ 号顶点为 $x$ 景点，$5$ 号顶点为 $y$ 景点。  \n很显然，路径 $6 \\rightarrow 2 \\rightarrow 4 \\rightarrow 5$ 和路径 $6 \\rightarrow 2 \\rightarrow 1 \\rightarrow 3 \\rightarrow 5$ 都是合法的，这两条路径满足了都是简单路径的条件，并且都是在一次旅游季中行走的。  \n虽然 $6 \\rightarrow 2$ 这条边经过了 $2$ 次，但仍旧是合法的，因为它们不是在一条路径中经过的。\n\n简单来说，一次旅游季会走不定条路径，每条路径必须是简单路径，但是每条简单路径之间可以有重边。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EVOI-RD2」旅行家", "background": null, "description": "小 A 是一个热衷于旅行的旅行家。有一天，他来到了一个城市，这个城市由 $n$ 个景点与 $m$ 条连接这些景点的道路组成。每个景点有一个**美观度** $a_i$。\n\n定义一条**旅游路径**为两个景点之间的一条非严格简单路径，也就是点可以重复经过，而边不可以。\n\n接下来有 $q$ 个旅游季，每个旅游季中，小 A 将指定两个顶点 $x$ 和 $y$，然后他将走遍 $x$ 到 $y$ 的**所有旅游路径**。 \n\n所有旅游季结束后，小 A 会统计他所经过的所有景点的美观度之和（重复经过一个景点只统计一次美观度）。他希望你告诉他这个美观度之和。", "inputFormat": "第一行两个正整数 $n,m$。\n\n第二行 $n$ 个正整数 $a_i$，代表顶点 $i$ 的权值。\n\n接下来 $m$ 行，每行 $2$ 个正整数，表示一条无向边的两个端点。\n\n然后一个正整数 $q$，代表有 $q$ 个旅游季。\n\n接下来 $q$ 行，每行 $2$ 个整数 $x,y$，表示指定的起点和终点。", "outputFormat": "一行，一个整数表示最终的美观度总和。", "hint": "**【数据规模与范围】**\n\n**本题采用捆绑测试**\n\n+ Subtask 1 (30 pts)：$3 \\leq n \\leq 500,m \\leq 2 \\times 10^5,q\\le200$。\n+ Subtask 2 (30 pts)：$3 \\leq n \\leq 3 \\times 10^5,m \\leq 2 \\times 10^6,q\\le10^6$。\n+ Subtask 3 (40 pts)：$3 \\leq n \\leq 5 \\times 10^5,m \\leq 2 \\times 10^6,q\\le10^6$。\n\n对于 $100\\%$ 的数据，保证 $3 \\leq n \\leq 5 \\times  10^5$，$m \\leq 2 \\times 10^6$，$q\\le10^6$，$1 \\leq a_i \\leq 100$，且该图联通，没有重边和自环。\n\n---\n\n**对于题面的解释：**\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a2oku1vq.png)\n\n上图与样例无关。\n\n如图，为城市的景点分布图，为无向图。  \n假设 $6$ 号顶点为 $x$ 景点，$5$ 号顶点为 $y$ 景点。  \n很显然，路径 $6 \\rightarrow 2 \\rightarrow 4 \\rightarrow 5$ 和路径 $6 \\rightarrow 2 \\rightarrow 1 \\rightarrow 3 \\rightarrow 5$ 都是合法的，这两条路径满足了都是简单路径的条件，并且都是在一次旅游季中行走的。  \n虽然 $6 \\rightarrow 2$ 这条边经过了 $2$ 次，但仍旧是合法的，因为它们不是在一条路径中经过的。\n\n简单来说，一次旅游季会走不定条路径，每条路径必须是简单路径，但是每条简单路径之间可以有重边。", "locale": "zh-CN"}}}
{"pid": "P7925", "type": "P", "difficulty": 5, "samples": [["5 0\n1 1 2 2\n1 1 1 1 1", "5"], ["5 0\n1 1 2 2\n1 -3 1 2 2", "2"], ["8 5\n1 1 2 2 3 3 4\n-2 -6 1 -7 8 1 1 6", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["树形数据结构", "2021", "O2优化", "树形 DP"], "title": "「EVOI-RD2」童年", "background": "池塘边的榕树上 知了在声声地叫着夏天  \n操场边的秋千上 只有蝴蝶儿停在上面  \n黑板上老师的粉笔还在拼命叽叽喳喳写个不停  \n等待着下课 等待着放学  \n等待游戏的童年\n\n", "description": "Charlie 童年时代很喜欢爬树。\n\n有一天，Charlie 准备向一棵高大的苹果树发起挑战。这棵苹果树有 $n$ 个结点，其中结点 $1$ 为树根。\n\n每个结点会有若干个苹果或一个鸟巢。若这个结点上是若干个苹果，则 Charlie 会摘下所有的苹果装入自己的口袋中；若这个结点是鸟巢**且 Charlie 是第一次访问它**，则 Charlie 会给这个鸟巢中的每只鸟儿一个苹果~~不要问鸟儿为什么喜欢苹果~~。\n\n特别地，如果 Charlie 当前口袋中的苹果不足以给该结点的每只鸟儿一个，则他就不会走向这个结点。注意 Charlie 重复经过一个结点时，不会重复采摘苹果，也不会重复给出苹果。\n\n一开始，Charlie 口袋中有 $s$ 个苹果。Charlie 将从树根开始爬树，每次经过一条边到达一个结点，并执行对应的操作（摘苹果或给苹果，根结点的操作也要执行）。Charlie 希望最终拥有的苹果数最多。由于 Charlie 还在忙着爬其他的树，他想请你写个程序帮帮他。", "inputFormat": "第一行两个整数 $n,s$，含义如上所示。\n\n接下来一行 $n-1$ 个整数，第 $i$ 个整数代表第 $i+1$ 号结点的父亲 $p_i$。\n\n再接下来一行 $n$ 个整数，第 $i$ 个数为 $a_i$。若 $a_i>0$，则代表这个结点有 $a_i$ 个苹果；若 $a_i<0$，则代表这个结点有一个 $|a_i|$ 只鸟儿的鸟巢；若 $a_i=0$，则说明这个结点什么也没有。", "outputFormat": "一行一个整数，代表 Charlie 最终拥有的最多苹果数。", "hint": "**样例 1 解释：**\n\n可以摘走所有苹果。\n\n**样例 2 解释：**\n\n只能摘走结点 $1,3$ 的苹果，结点 $2$ 因为鸟儿太多无法访问。\n\n**样例 3 解释：**  \n\n![样例3解释](https://cdn.luogu.com.cn/upload/image_hosting/hj7eoes3.png)\n\n结点 $1$ 给掉 $2$ 个苹果，先摘完结点 $3,6,7$ 的苹果，此时口袋中有 $6$ 个苹果。再闯过结点 $2$，然后拿走结点 $5$ 的苹果，结点 $4$ 由于鸟儿太多没必要走。\n\n一种最优的具体路径：$1 \\rightarrow 3 \\rightarrow 6 \\rightarrow 3 \\rightarrow 7  \\rightarrow 3 \\rightarrow 1 \\rightarrow 2 \\rightarrow 5 \\rightarrow 2 \\rightarrow 1$。\n\n**数据规模与约定**\n\n**本题采用捆绑测试。**\n\n+ Subtask 1 (10 pts)：$\\, n \\leq 10$。   \n+ Subtask 2 (20 pts)：$\\, n \\leq 100$ 。  \n+ Subtask 3 (10 pts)：$\\, p_i=1$。  \n+ Subtask 4 (30 pts)：$\\, p_i=i-1$。  \n+ Subtask 5 (30 pts)：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 6000, 1 \\leq p_i \\lt i, |a_i| \\leq 10^9,0 \\leq s \\leq 10^9$。\n\n---\n\n“记得门前，有两株树，一株是苹果树，还有一株……也是苹果树。”", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EVOI-RD2」童年", "background": "池塘边的榕树上 知了在声声地叫着夏天  \n操场边的秋千上 只有蝴蝶儿停在上面  \n黑板上老师的粉笔还在拼命叽叽喳喳写个不停  \n等待着下课 等待着放学  \n等待游戏的童年\n\n", "description": "Charlie 童年时代很喜欢爬树。\n\n有一天，Charlie 准备向一棵高大的苹果树发起挑战。这棵苹果树有 $n$ 个结点，其中结点 $1$ 为树根。\n\n每个结点会有若干个苹果或一个鸟巢。若这个结点上是若干个苹果，则 Charlie 会摘下所有的苹果装入自己的口袋中；若这个结点是鸟巢**且 Charlie 是第一次访问它**，则 Charlie 会给这个鸟巢中的每只鸟儿一个苹果~~不要问鸟儿为什么喜欢苹果~~。\n\n特别地，如果 Charlie 当前口袋中的苹果不足以给该结点的每只鸟儿一个，则他就不会走向这个结点。注意 Charlie 重复经过一个结点时，不会重复采摘苹果，也不会重复给出苹果。\n\n一开始，Charlie 口袋中有 $s$ 个苹果。Charlie 将从树根开始爬树，每次经过一条边到达一个结点，并执行对应的操作（摘苹果或给苹果，根结点的操作也要执行）。Charlie 希望最终拥有的苹果数最多。由于 Charlie 还在忙着爬其他的树，他想请你写个程序帮帮他。", "inputFormat": "第一行两个整数 $n,s$，含义如上所示。\n\n接下来一行 $n-1$ 个整数，第 $i$ 个整数代表第 $i+1$ 号结点的父亲 $p_i$。\n\n再接下来一行 $n$ 个整数，第 $i$ 个数为 $a_i$。若 $a_i>0$，则代表这个结点有 $a_i$ 个苹果；若 $a_i<0$，则代表这个结点有一个 $|a_i|$ 只鸟儿的鸟巢；若 $a_i=0$，则说明这个结点什么也没有。", "outputFormat": "一行一个整数，代表 Charlie 最终拥有的最多苹果数。", "hint": "**样例 1 解释：**\n\n可以摘走所有苹果。\n\n**样例 2 解释：**\n\n只能摘走结点 $1,3$ 的苹果，结点 $2$ 因为鸟儿太多无法访问。\n\n**样例 3 解释：**  \n\n![样例3解释](https://cdn.luogu.com.cn/upload/image_hosting/hj7eoes3.png)\n\n结点 $1$ 给掉 $2$ 个苹果，先摘完结点 $3,6,7$ 的苹果，此时口袋中有 $6$ 个苹果。再闯过结点 $2$，然后拿走结点 $5$ 的苹果，结点 $4$ 由于鸟儿太多没必要走。\n\n一种最优的具体路径：$1 \\rightarrow 3 \\rightarrow 6 \\rightarrow 3 \\rightarrow 7  \\rightarrow 3 \\rightarrow 1 \\rightarrow 2 \\rightarrow 5 \\rightarrow 2 \\rightarrow 1$。\n\n**数据规模与约定**\n\n**本题采用捆绑测试。**\n\n+ Subtask 1 (10 pts)：$\\, n \\leq 10$。   \n+ Subtask 2 (20 pts)：$\\, n \\leq 100$ 。  \n+ Subtask 3 (10 pts)：$\\, p_i=1$。  \n+ Subtask 4 (30 pts)：$\\, p_i=i-1$。  \n+ Subtask 5 (30 pts)：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 6000, 1 \\leq p_i \\lt i, |a_i| \\leq 10^9,0 \\leq s \\leq 10^9$。\n\n---\n\n“记得门前，有两株树，一株是苹果树，还有一株……也是苹果树。”", "locale": "zh-CN"}}}
{"pid": "P7926", "type": "P", "difficulty": 6, "samples": [["5 5\n3 6 2 4 8\n", "4\n5 16\n13 14\n6 14\n15 23"], ["10 7\n4 6 9 1 5 9 5 1 7 1 \n", "9\n9 10\n13 14\n18 19\n14 15\n18 19\n22 23\n19 20\n19 20\n20 21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "O2优化", "斜率优化"], "title": "「EVOI-RD2」大胃王", "background": "", "description": "又到了一日三度的吃饭时间，大胃王开始因为吃什么饭而犯难了。\n\n现有 $n$ 个材料，每个材料有一定的质量。大胃王可以把这 $n$ 个材料分为**连续**的任意段，然后每一段配一段质量为 $L$ 的主食。每一段的不和谐度定义为这段材料的质量和减去该段主食的质量（就是 $L$）的平方。一顿饭的不和谐度为所有段的不和谐度之和。\n\n\n\n不用担心饭的多少的问题，因为某Code 是大胃王，所以做多少他都能吃完。\n\n接下来，某Code 向你发起了挑战，要求你回答前 $i$ 道菜所做出的一顿饭的**最小和第二小**不和谐度。如果你回答正确，你将获得与他共享这顿饭菜的机会。\n\n当两种分配方法得出同样最小的不和谐度时，则输出两个最小的不和谐度。即所输出的并非严格第二小不和谐度。", "inputFormat": "第一行，两个正整数 $n$ 和 $L$，分别表示有 $n$ 个材料和每份主食的质量 $L$。\n\n第二行 $n$ 个整数，第 $i$ 个整数代表第 $i$ 个材料的质量 $a_i$。", "outputFormat": "输出共 $n$ 行。\n\n其中第一行一个整数，为前 $1$ 道菜做出的饭的最小不和谐度。\n\n在第 $i$ 行输出两个整数，为前 $i$ 道菜所做出的一顿饭的**最小和第二小**不和谐度，中间用空格隔开。", "hint": "**样例 1 解释**\n\n第一行：$4=(3-5)^2$  \n第二行：$5=(3-5)^2+(6-5)^2$，$16=(3+6-5)^2$  \n第三行：$13=(3-5)^2+(6+2-5)^2$，$14=(3-5)^2+(6-5)^2+(2-5)^2$  \n第四行：$6=(3-5)^2+(6-5)^2+(2+4-5)^2$，$14=(3-5)^2+(6+2-5)^2+(4-5)^2$  \n第五行：$15=(3-5)^2+(6-5)^2+(2+4-5)^2+(8-5)^2$，$23=(3-5)^2+(6+2-5)^2+(4-5)^2+(8-5)^2$\n\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n+ Subtask 1 (10 pts)：$1 \\le n \\le 10$。\n+ Subtask 2 (20 pts)：$1 \\le n \\le 200$。\n+ Subtask 3 (20 pts)：$1 \\le n \\le 3000$。\n+ Subtask 4 (40 pts)：数据随机生成。\n+ Subtask 5 (10 pts)：无特殊性质。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5$，$1 \\le L,a_i \\le 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EVOI-RD2」大胃王", "background": "", "description": "又到了一日三度的吃饭时间，大胃王开始因为吃什么饭而犯难了。\n\n现有 $n$ 个材料，每个材料有一定的质量。大胃王可以把这 $n$ 个材料分为**连续**的任意段，然后每一段配一段质量为 $L$ 的主食。每一段的不和谐度定义为这段材料的质量和减去该段主食的质量（就是 $L$）的平方。一顿饭的不和谐度为所有段的不和谐度之和。\n\n\n\n不用担心饭的多少的问题，因为某Code 是大胃王，所以做多少他都能吃完。\n\n接下来，某Code 向你发起了挑战，要求你回答前 $i$ 道菜所做出的一顿饭的**最小和第二小**不和谐度。如果你回答正确，你将获得与他共享这顿饭菜的机会。\n\n当两种分配方法得出同样最小的不和谐度时，则输出两个最小的不和谐度。即所输出的并非严格第二小不和谐度。", "inputFormat": "第一行，两个正整数 $n$ 和 $L$，分别表示有 $n$ 个材料和每份主食的质量 $L$。\n\n第二行 $n$ 个整数，第 $i$ 个整数代表第 $i$ 个材料的质量 $a_i$。", "outputFormat": "输出共 $n$ 行。\n\n其中第一行一个整数，为前 $1$ 道菜做出的饭的最小不和谐度。\n\n在第 $i$ 行输出两个整数，为前 $i$ 道菜所做出的一顿饭的**最小和第二小**不和谐度，中间用空格隔开。", "hint": "**样例 1 解释**\n\n第一行：$4=(3-5)^2$  \n第二行：$5=(3-5)^2+(6-5)^2$，$16=(3+6-5)^2$  \n第三行：$13=(3-5)^2+(6+2-5)^2$，$14=(3-5)^2+(6-5)^2+(2-5)^2$  \n第四行：$6=(3-5)^2+(6-5)^2+(2+4-5)^2$，$14=(3-5)^2+(6+2-5)^2+(4-5)^2$  \n第五行：$15=(3-5)^2+(6-5)^2+(2+4-5)^2+(8-5)^2$，$23=(3-5)^2+(6+2-5)^2+(4-5)^2+(8-5)^2$\n\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n+ Subtask 1 (10 pts)：$1 \\le n \\le 10$。\n+ Subtask 2 (20 pts)：$1 \\le n \\le 200$。\n+ Subtask 3 (20 pts)：$1 \\le n \\le 3000$。\n+ Subtask 4 (40 pts)：数据随机生成。\n+ Subtask 5 (10 pts)：无特殊性质。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^5$，$1 \\le L,a_i \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P7927", "type": "P", "difficulty": 1, "samples": [["3\n10 1 6\n20 1 7\n21 8 1\n", "250 100"], ["3\n10 2 5\n15 2 6\n25 2 5", "400 0"], ["2\n10 5 2\n11 6 3", "0 200"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #1] Ljeto", "background": "", "description": "有两支四人队伍，菠萝和蓝莓，在玩水枪。\n\n我们将会给定游戏的具体信息，共 $n$ 条，信息形如在 $t_i$ 秒，玩家 $a_i$ 打到了玩家 $b_i$，对于一个玩家 $i$，如果 $1\\le i\\le 4$，那么他在菠萝队，否则他在蓝莓队，每打到一下加 $100$ 分。\n\n定义一次双喷为，在 $10$ 秒之内，一名队员**连续**打到对面队伍的队员，设这名队员第一次命中是在第 $t_f$ 秒，则第二次命中需要在第 $[t_f+1,t_f+10]$ 秒内，一次双喷可以为队伍增加 $50$ 分，可以连续触发双喷。\n\n试求出两支队伍的得分。", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行，一行三个整数 $t_i,a_i,b_i$。  \n保证所有 $t_i$ 互不相同，并且按升序输入。", "outputFormat": "输出一行两个整数，分别表示两支队伍的得分。", "hint": "#### 数据范围\n对于全部数据，$1\\le n\\le 100$，$0\\le t_i\\le 10^3$，$\\forall 1\\le i< n,t_i<t_{i+1}$，$1\\le a_i,b_i\\le 8$，玩家 $a_i$ 与玩家 $b_i$ 不属于同一支队伍。\n\n| Subtask | 特殊限制 | 分值 |\n| :---------: | :---------: | :----------: |\n| $1$ | $n\\le 3$ | $10$ |\n| $2$ | 不存在双喷 | $15$ | \n| $3$ | 无特殊限制 | $25$ |\n\n#### 说明\n**本题总分 $50$ 分。**\n\n本题译自 [Croatian Open Competition in Informatics 2021/2022](https://hsin.hr/coci/archive/2021_2022) [Contest #1](https://hsin.hr/coci/archive/2021_2022/contest1_tasks.pdf) T1 Ljeto。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #1] Ljeto", "background": "", "description": "有两支四人队伍，菠萝和蓝莓，在玩水枪。\n\n我们将会给定游戏的具体信息，共 $n$ 条，信息形如在 $t_i$ 秒，玩家 $a_i$ 打到了玩家 $b_i$，对于一个玩家 $i$，如果 $1\\le i\\le 4$，那么他在菠萝队，否则他在蓝莓队，每打到一下加 $100$ 分。\n\n定义一次双喷为，在 $10$ 秒之内，一名队员**连续**打到对面队伍的队员，设这名队员第一次命中是在第 $t_f$ 秒，则第二次命中需要在第 $[t_f+1,t_f+10]$ 秒内，一次双喷可以为队伍增加 $50$ 分，可以连续触发双喷。\n\n试求出两支队伍的得分。", "inputFormat": "第一行为一个整数 $n$。\n\n接下来 $n$ 行，一行三个整数 $t_i,a_i,b_i$。  \n保证所有 $t_i$ 互不相同，并且按升序输入。", "outputFormat": "输出一行两个整数，分别表示两支队伍的得分。", "hint": "#### 数据范围\n对于全部数据，$1\\le n\\le 100$，$0\\le t_i\\le 10^3$，$\\forall 1\\le i< n,t_i<t_{i+1}$，$1\\le a_i,b_i\\le 8$，玩家 $a_i$ 与玩家 $b_i$ 不属于同一支队伍。\n\n| Subtask | 特殊限制 | 分值 |\n| :---------: | :---------: | :----------: |\n| $1$ | $n\\le 3$ | $10$ |\n| $2$ | 不存在双喷 | $15$ | \n| $3$ | 无特殊限制 | $25$ |\n\n#### 说明\n**本题总分 $50$ 分。**\n\n本题译自 [Croatian Open Competition in Informatics 2021/2022](https://hsin.hr/coci/archive/2021_2022) [Contest #1](https://hsin.hr/coci/archive/2021_2022/contest1_tasks.pdf) T1 Ljeto。", "locale": "zh-CN"}}}
{"pid": "P7928", "type": "P", "difficulty": 3, "samples": [["4 1\nCCCP", "DA"], ["8 2\nPCPPCCCC\n", "DA"], ["9 1\nPPCPPCPPC", "NE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "2021", "记忆化搜索", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #1] Kamenčići", "background": "", "description": "Alice 和 Bob 又在玩游戏。\n\n在他们面前有 $n$ 块石头排成一行，石头有红和蓝两种颜色。\n\nAlice 先手，每次每人从两端选择一端取出一块石头，谁先取出 $k$ 块红色石头谁输掉。\n\n假设 Alice 和 Bob 都是绝顶聪明的，求出最后谁获胜。", "inputFormat": "第一行为两个整数 $n,k$。\n\n接下来一行一个长度为 $n$ 的字符串，仅由 `C` 和 `P` 组成，`C` 表示红色石头，`P` 表示蓝色石头。", "outputFormat": "如果 Alice 必胜，输出 `DA`，否则输出 `NE`。", "hint": "#### 数据范围\n对于全部数据，$1\\le k<n\\le 350$，红色石头至少出现 $2k-1$ 次。\n\n| Subtask | 特殊限制 | 分值 |\n| :----------: | :--------: | :-------: |\n| $1$ | $n\\le 20$ | $10$ | \n| $2$ | $n\\le 50$ | $20$ |\n| $3$ | 无特殊限制 | $40$ |\n\n#### 说明\n**本题总分 $70$ 分。**\n\n本题译自 [Croatian Open Competition in Informatics 2021/2022](https://hsin.hr/coci/archive/2021_2012) [Contest #1](https://hsin.hr/coci/archive/2021_2022/contest1_tasks.pdf) T2 Kamenčići。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #1] Kamenčići", "background": "", "description": "Alice 和 Bob 又在玩游戏。\n\n在他们面前有 $n$ 块石头排成一行，石头有红和蓝两种颜色。\n\nAlice 先手，每次每人从两端选择一端取出一块石头，谁先取出 $k$ 块红色石头谁输掉。\n\n假设 Alice 和 Bob 都是绝顶聪明的，求出最后谁获胜。", "inputFormat": "第一行为两个整数 $n,k$。\n\n接下来一行一个长度为 $n$ 的字符串，仅由 `C` 和 `P` 组成，`C` 表示红色石头，`P` 表示蓝色石头。", "outputFormat": "如果 Alice 必胜，输出 `DA`，否则输出 `NE`。", "hint": "#### 数据范围\n对于全部数据，$1\\le k<n\\le 350$，红色石头至少出现 $2k-1$ 次。\n\n| Subtask | 特殊限制 | 分值 |\n| :----------: | :--------: | :-------: |\n| $1$ | $n\\le 20$ | $10$ | \n| $2$ | $n\\le 50$ | $20$ |\n| $3$ | 无特殊限制 | $40$ |\n\n#### 说明\n**本题总分 $70$ 分。**\n\n本题译自 [Croatian Open Competition in Informatics 2021/2022](https://hsin.hr/coci/archive/2021_2012) [Contest #1](https://hsin.hr/coci/archive/2021_2022/contest1_tasks.pdf) T2 Kamenčići。", "locale": "zh-CN"}}}
{"pid": "P7929", "type": "P", "difficulty": 6, "samples": [["4\n1 2\n2 3\n3 4\n4 1", "2"], ["3\n1 2\n2 3\n3 1", "-1"], ["7\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n2 4", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "树形 DP", "基环树", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #1] Logičari", "background": "", "description": "给定一个 $n$ 个点的基环树，现在对基环树上的点染色，使得每个点都有且仅有一个与他相连的点（不包括它自身）被染色，求最少的染色点数，或者返回无解。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，一行两个整数 $u_i,v_i$，表示 $u_i$ 与 $v_i$ 间有一条边。", "outputFormat": "输出最小的染色点数，或者返回无解，无解输出 `-1`。", "hint": "#### 样例解释\n#### 样例 1 解释\n可以在 $1,2$ 号点染色。\n\n#### 样例 2 解释\n如果有一个点被染色，则被染色的点不会有被染色的相邻的点。\n\n如果有两个点被染色，则不被染色的点会有两个被染色的相邻的点。\n\n#### 数据范围\n\n对于全部数据，$3\\le n\\le 10^5$，$1\\le u_i,v_i\\le n$。\n\n| Subtask |      特殊限制      | 分数 |\n| :-----: | :----------------: | :--: |\n|   $1$   | 每个点的点度为 $2$ | $10$ |\n|   $2$   |     $n\\le 20$      | $10$ |\n|   $3$   |    $n\\le 10^3$     | $40$ |\n|   $4$   |     无特殊限制     | $50$ |\n\n\n#### 说明\n**本题总分 $110$ 分。**\n\n本题译自 [Croatian Open Competition in Informatics 2021/2022](https://hsin.hr/coci/archive/2021_2012) [Contest #1](https://hsin.hr/coci/archive/2021_2022/contest1_tasks.pdf) T3 Logičari。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #1] Logičari", "background": "", "description": "给定一个 $n$ 个点的基环树，现在对基环树上的点染色，使得每个点都有且仅有一个与他相连的点（不包括它自身）被染色，求最少的染色点数，或者返回无解。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，一行两个整数 $u_i,v_i$，表示 $u_i$ 与 $v_i$ 间有一条边。", "outputFormat": "输出最小的染色点数，或者返回无解，无解输出 `-1`。", "hint": "#### 样例解释\n#### 样例 1 解释\n可以在 $1,2$ 号点染色。\n\n#### 样例 2 解释\n如果有一个点被染色，则被染色的点不会有被染色的相邻的点。\n\n如果有两个点被染色，则不被染色的点会有两个被染色的相邻的点。\n\n#### 数据范围\n\n对于全部数据，$3\\le n\\le 10^5$，$1\\le u_i,v_i\\le n$。\n\n| Subtask |      特殊限制      | 分数 |\n| :-----: | :----------------: | :--: |\n|   $1$   | 每个点的点度为 $2$ | $10$ |\n|   $2$   |     $n\\le 20$      | $10$ |\n|   $3$   |    $n\\le 10^3$     | $40$ |\n|   $4$   |     无特殊限制     | $50$ |\n\n\n#### 说明\n**本题总分 $110$ 分。**\n\n本题译自 [Croatian Open Competition in Informatics 2021/2022](https://hsin.hr/coci/archive/2021_2012) [Contest #1](https://hsin.hr/coci/archive/2021_2022/contest1_tasks.pdf) T3 Logičari。", "locale": "zh-CN"}}}
{"pid": "P7930", "type": "P", "difficulty": 6, "samples": [["3 4\n1123\n1322\n1221\n", "1\n"], ["2 2\n11\n22\n", "0\n"], ["5 3\n111\n222\n333\n123\n132\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #1] Set", "background": "在知名游戏 SET 中，存在着一些数字、形状、颜色等不同的卡片，玩家的目标是确定一个存在的 triplet of cards（即卡片的三元组，也就是三张卡片构成的组合），使其符合特定的要求。Marin 和 Josip 很快就对这个游戏感到无趣，并对其进行了加强。", "description": "在本题中，定义每张卡片代表着一个仅由 $ 1, 2, 3 $ 构成的长度为 $ k $ 的序列，共有 $ n $ 张卡片，卡片之间是无序的，保证卡片**两两不同**。\n\n定义一个 SET 表示，当且仅当一个无序的 triplet of cards 其中的三个序列的每一位均相同或各不相同，用原文中的话就是 same 或 pairwise different，更严谨地表示，我们令这三个序列为 $ S_i, S_j, S_k $，则一定满足如下条件：\n\n* $ i \\lt j \\lt k $\n* $ \\forall x \\in \\left[1, k\\right] $，满足 $ S_i(x) = S_j(x) = S_k(x) $ 或 $ S_i(x) \\neq S_j(x) \\neq S_k(x) $\n\n例如 $ (1123, 1322, 1221) $ 便满足 $ 1, 3 $ 位均相同，$ 2,4 $ 位各不相同。\n\n给你这些序列，求可以组成多少种本质不同的 SET。", "inputFormat": "第一行为两个整数正整数 $ n, k $。\n\n接下来 $ n $ 行中每一行包含一个仅由 $ 1, 2, 3 $ 构成的长度为 $ k $ 的序列，代表着一张卡片。\n\n保证每张卡片上的序列不同。", "outputFormat": "仅一行一个整数，表示可以组成的本质不同的 SET 的数量。", "hint": "**【样例解释 \\#3】**\n\n可以组成的两个 SET 分别为 $ (S_1, S_2, S_3) $ 和  $ (S_1, S_4, S_5) $。\n\n**【数据范围】**\n\n对于全部数据，$1\\le k\\le 12$，$1\\le n\\le 3^k$，$S_i$ 互不相同，$1\\le S_i(x) \\le 3$。\n\n| Subtask |  特殊限制  | 分数 |\n| :-----: | :--------: | :--: |\n|   $1$   |  $k\\le 5$  | $10$ |\n|   $2$   |  $k\\le 7$  | $30$ |\n|   $3$   | 无特殊限制 | $70$ |\n\n#### 说明\n**本题总分 $110$ 分。**\n\n本题译自 [Croatian Open Competition in Informatics 2021/2022](https://hsin.hr/coci/archive/2021_2022) [Contest #1](https://hsin.hr/coci/archive/2021_2022/contest1_tasks.pdf) T4 Set。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #1] Set", "background": "在知名游戏 SET 中，存在着一些数字、形状、颜色等不同的卡片，玩家的目标是确定一个存在的 triplet of cards（即卡片的三元组，也就是三张卡片构成的组合），使其符合特定的要求。Marin 和 Josip 很快就对这个游戏感到无趣，并对其进行了加强。", "description": "在本题中，定义每张卡片代表着一个仅由 $ 1, 2, 3 $ 构成的长度为 $ k $ 的序列，共有 $ n $ 张卡片，卡片之间是无序的，保证卡片**两两不同**。\n\n定义一个 SET 表示，当且仅当一个无序的 triplet of cards 其中的三个序列的每一位均相同或各不相同，用原文中的话就是 same 或 pairwise different，更严谨地表示，我们令这三个序列为 $ S_i, S_j, S_k $，则一定满足如下条件：\n\n* $ i \\lt j \\lt k $\n* $ \\forall x \\in \\left[1, k\\right] $，满足 $ S_i(x) = S_j(x) = S_k(x) $ 或 $ S_i(x) \\neq S_j(x) \\neq S_k(x) $\n\n例如 $ (1123, 1322, 1221) $ 便满足 $ 1, 3 $ 位均相同，$ 2,4 $ 位各不相同。\n\n给你这些序列，求可以组成多少种本质不同的 SET。", "inputFormat": "第一行为两个整数正整数 $ n, k $。\n\n接下来 $ n $ 行中每一行包含一个仅由 $ 1, 2, 3 $ 构成的长度为 $ k $ 的序列，代表着一张卡片。\n\n保证每张卡片上的序列不同。", "outputFormat": "仅一行一个整数，表示可以组成的本质不同的 SET 的数量。", "hint": "**【样例解释 \\#3】**\n\n可以组成的两个 SET 分别为 $ (S_1, S_2, S_3) $ 和  $ (S_1, S_4, S_5) $。\n\n**【数据范围】**\n\n对于全部数据，$1\\le k\\le 12$，$1\\le n\\le 3^k$，$S_i$ 互不相同，$1\\le S_i(x) \\le 3$。\n\n| Subtask |  特殊限制  | 分数 |\n| :-----: | :--------: | :--: |\n|   $1$   |  $k\\le 5$  | $10$ |\n|   $2$   |  $k\\le 7$  | $30$ |\n|   $3$   | 无特殊限制 | $70$ |\n\n#### 说明\n**本题总分 $110$ 分。**\n\n本题译自 [Croatian Open Competition in Informatics 2021/2022](https://hsin.hr/coci/archive/2021_2022) [Contest #1](https://hsin.hr/coci/archive/2021_2022/contest1_tasks.pdf) T4 Set。", "locale": "zh-CN"}}}
{"pid": "P7931", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3", "1 3\n1 2 3"], ["4\n4 3 2 1", "4 1\n1\n2\n3\n4"], ["7\n2 1 6 5 7 3 4", "2 3\n1 3 5\n2 6 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #1] Volontiranje", "background": "", "description": "给定一个 $1\\sim n$ 的排列 $p$，请从这里面取出尽可能多的不交的上升子序列，且他们的长度为原排列的 LIS 的长度，并构造一组方案。", "inputFormat": "第一行为一个整数 $n$。\n\n接下来一行 $n$ 个整数 $p_i$。", "outputFormat": "第一行请输出您选择的上升子序列个数与他们的长度。\n\n接下来若干行，一行若干个整数，表示某个上升子序列的每个元素的下标。\n\n您可以以任意顺序输出您选择的上升子序列。", "hint": "#### 数据范围\n\n对于全部数据，$1\\le n\\le 10^6$，$1\\le p_i\\le n$。\n\n| Subtask |  数据范围   | 分值 |\n| :-----: | :---------: | :--: |\n|   $1$   |  $n\\le 15$  | $10$ |\n|   $2$   | $n\\le 10^3$ | $40$ |\n|   $3$   | 无特殊限制  | $60$ |\n\n#### 说明\n**本题总分 $110$ 分。**\n\n本题译自 [Croatian Open Competition in Informatics 2021/2022](https://hsin.hr/coci/archive/2021_2022) [Contest #1](https://hsin.hr/coci/archive/2021_2022/contest1_tasks.pdf) T5 Volontiranje。\n\n在附加文件中下发了一份 checker.cpp。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #1] Volontiranje", "background": "", "description": "给定一个 $1\\sim n$ 的排列 $p$，请从这里面取出尽可能多的不交的上升子序列，且他们的长度为原排列的 LIS 的长度，并构造一组方案。", "inputFormat": "第一行为一个整数 $n$。\n\n接下来一行 $n$ 个整数 $p_i$。", "outputFormat": "第一行请输出您选择的上升子序列个数与他们的长度。\n\n接下来若干行，一行若干个整数，表示某个上升子序列的每个元素的下标。\n\n您可以以任意顺序输出您选择的上升子序列。", "hint": "#### 数据范围\n\n对于全部数据，$1\\le n\\le 10^6$，$1\\le p_i\\le n$。\n\n| Subtask |  数据范围   | 分值 |\n| :-----: | :---------: | :--: |\n|   $1$   |  $n\\le 15$  | $10$ |\n|   $2$   | $n\\le 10^3$ | $40$ |\n|   $3$   | 无特殊限制  | $60$ |\n\n#### 说明\n**本题总分 $110$ 分。**\n\n本题译自 [Croatian Open Competition in Informatics 2021/2022](https://hsin.hr/coci/archive/2021_2022) [Contest #1](https://hsin.hr/coci/archive/2021_2022/contest1_tasks.pdf) T5 Volontiranje。\n\n在附加文件中下发了一份 checker.cpp。", "locale": "zh-CN"}}}
{"pid": "P7933", "type": "P", "difficulty": 2, "samples": [["1", "0"], ["10", "5"], ["27", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2007", "COCI（克罗地亚）"], "title": "[COCI 2007/2008 #5] PASCAL", "background": "", "description": "小 Frane 已经十年级了，但是在信息课上学习 Pascal 仍然很吃力。老师写下了如下的 Pascal 程序作为家庭作业，他需要根据输入的整数 $N$ 来判断程序的输出。\n\n```pascal\nreadln(N);\ncounter := 0;\nfor i := N-1 downto 1 do begin\n\tcounter := counter + 1;\n\tif N mod i = 0 then break;\nend;\nwriteln(counter); \n```\n\n请您编写一个程序来解决这个问题。", "inputFormat": "一行，一个整数 $N$。", "outputFormat": "一行，表示以上程序的输出结果。", "hint": "对于 $100\\%$ 的数据，$1\\le N\\le10^9$。\n\n本题分值按照原比赛设置，满分 $30$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2007/2008 #5] PASCAL", "background": "", "description": "小 Frane 已经十年级了，但是在信息课上学习 Pascal 仍然很吃力。老师写下了如下的 Pascal 程序作为家庭作业，他需要根据输入的整数 $N$ 来判断程序的输出。\n\n```pascal\nreadln(N);\ncounter := 0;\nfor i := N-1 downto 1 do begin\n\tcounter := counter + 1;\n\tif N mod i = 0 then break;\nend;\nwriteln(counter); \n```\n\n请您编写一个程序来解决这个问题。", "inputFormat": "一行，一个整数 $N$。", "outputFormat": "一行，表示以上程序的输出结果。", "hint": "对于 $100\\%$ 的数据，$1\\le N\\le10^9$。\n\n本题分值按照原比赛设置，满分 $30$ 分。", "locale": "zh-CN"}}}
{"pid": "P7934", "type": "P", "difficulty": 2, "samples": [["1 1\n5 1\n3 3\n4\n3 1\n3 2\n3 3\n3 4 ", "4.0\n3"], ["3 2\n5 4\n1 6\n3\n2 4\n3 5\n4 3 ", "6.0\n3"], ["2 6\n5 1\n7 8\n5\n1 4\n3 5\n6 4\n6 5\n4 7 ", "15.5\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768]}, "tags": ["2007", "COCI（克罗地亚）"], "title": "[COCI 2007/2008 #5] JABUKE", "background": "", "description": "给出一个三角形三个顶点的坐标以及 $N$ 个点的坐标，请您计算出这个三角形的面积和在这 $N$ 个点中，有多少个点在这个三角形内部（包含边界）。", "inputFormat": "前三行，每行两个整数，表示三角形一个顶点的坐标。\n\n接下来一行，一个整数 $N$。\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$，表示第 $i$ 个点的坐标。", "outputFormat": "第一行，一个实数，表示三角形的面积，保留一位小数。\n\n第二行，一个整数，表示在三角形内部和边界上的点数。", "hint": "对于 $100\\%$ 的数据，$1\\le N\\le100$，所有坐标的 $x,y$ 均为小于 $10^3$ 的正整数。\n\n**提示：以坐标 $(x_A,y_A)$，$(x_B,y_B)$ 与 $(x_C,y_C)$ 为顶点的三角形面积公式如下：**\n\n$\\dfrac{|x_A(y_B-y_C)+x_B(y_C-y_A)+x_C(y_A-y_B)|}{2}$\n\n本题分值按照原比赛设置，满分 $30$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2007/2008 #5] JABUKE", "background": "", "description": "给出一个三角形三个顶点的坐标以及 $N$ 个点的坐标，请您计算出这个三角形的面积和在这 $N$ 个点中，有多少个点在这个三角形内部（包含边界）。", "inputFormat": "前三行，每行两个整数，表示三角形一个顶点的坐标。\n\n接下来一行，一个整数 $N$。\n\n接下来 $N$ 行，每行两个整数 $x_i,y_i$，表示第 $i$ 个点的坐标。", "outputFormat": "第一行，一个实数，表示三角形的面积，保留一位小数。\n\n第二行，一个整数，表示在三角形内部和边界上的点数。", "hint": "对于 $100\\%$ 的数据，$1\\le N\\le100$，所有坐标的 $x,y$ 均为小于 $10^3$ 的正整数。\n\n**提示：以坐标 $(x_A,y_A)$，$(x_B,y_B)$ 与 $(x_C,y_C)$ 为顶点的三角形面积公式如下：**\n\n$\\dfrac{|x_A(y_B-y_C)+x_B(y_C-y_A)+x_C(y_A-y_B)|}{2}$\n\n本题分值按照原比赛设置，满分 $30$ 分。", "locale": "zh-CN"}}}
{"pid": "P7935", "type": "P", "difficulty": 3, "samples": [["7\n5 4 3 2 1 6 7\n5 5 1 1 3 4 7\n3 7 1 4 5 6 2 ", "4"], ["9\n1 3 5 9 8 6 2 4 7\n2 1 5 6 4 9 3 4 7\n3 5 1 9 8 6 2 8 7", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["模拟", "2007", "枚举", "队列", "COCI（克罗地亚）"], "title": "[COCI 2007/2008 #5] AVOGADRO", "background": "", "description": "Luka 画了一张 $3$ 行 $N$ 列的表格，然后将整数 $1$ 到 $N$ 写进表格。对于表格第一行，每个整数只出现一次。对于其余两行，每个数字可以出现任意次或者不出现。\n\nLuka 现在可以删去任意一些列。完成后，他对这个表的每一行进行升序排序。\n\n他希望得到一张表，使得表中的三行在升序排序后完全相同。请您求出他至少需要删去多少列。", "inputFormat": "第一行，一个整数 $N$，表示表中数字的列数。\n\n接下来三行，每行包含 $N$ 个整数。这些整数都在 $1$ 到 $N$ 之间，第一行每个数字有且仅出现一次。", "outputFormat": "一行，一个整数，表示 Luka 至少需要删除的列数。", "hint": "对于 $40\\%$ 的测试点，$N\\le 100$。\n\n对于 $70\\%$ 的测试点，$N\\le 10000$。\n\n对于 $100\\%$ 的测试点，$1\\le N\\le 10^5$。\n\n### 样例 1 解释：\n\n对于样例 1，Luka 需要删除第二、第四、第六和第七列。删除并排序后，这三行都只包含 $1,3,5$ 三个整数。\n\n本题分值按照原比赛设置，满分 $60$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2007/2008 #5] AVOGADRO", "background": "", "description": "Luka 画了一张 $3$ 行 $N$ 列的表格，然后将整数 $1$ 到 $N$ 写进表格。对于表格第一行，每个整数只出现一次。对于其余两行，每个数字可以出现任意次或者不出现。\n\nLuka 现在可以删去任意一些列。完成后，他对这个表的每一行进行升序排序。\n\n他希望得到一张表，使得表中的三行在升序排序后完全相同。请您求出他至少需要删去多少列。", "inputFormat": "第一行，一个整数 $N$，表示表中数字的列数。\n\n接下来三行，每行包含 $N$ 个整数。这些整数都在 $1$ 到 $N$ 之间，第一行每个数字有且仅出现一次。", "outputFormat": "一行，一个整数，表示 Luka 至少需要删除的列数。", "hint": "对于 $40\\%$ 的测试点，$N\\le 100$。\n\n对于 $70\\%$ 的测试点，$N\\le 10000$。\n\n对于 $100\\%$ 的测试点，$1\\le N\\le 10^5$。\n\n### 样例 1 解释：\n\n对于样例 1，Luka 需要删除第二、第四、第六和第七列。删除并排序后，这三行都只包含 $1,3,5$ 三个整数。\n\n本题分值按照原比赛设置，满分 $60$ 分。", "locale": "zh-CN"}}}
{"pid": "P7936", "type": "P", "difficulty": 4, "samples": [["6 5\n1 1 5\n2 1 5\n1 2 4\n2 3 5\n3 2 30\n3 3 5 ", "5\n4\n1 1\n2 1\n2 3\n3 3 "], ["8 10\n1 1 15\n2 2 30\n1 2 8\n2 1 7\n3 2 8\n2 3 7\n4 2 100\n3 3 15", "36\n5\n1 1\n1 2\n2 2\n3 2\n3 3"], ["9 5\n5 5 10\n6 5 2\n7 5 1\n5 6 2\n6 6 6\n7 6 2\n5 7 1\n6 7 2\n7 7 1 ", "2\n3\n5 5\n7 5\n7 7 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2007", "COCI（克罗地亚）"], "title": "[COCI 2007/2008 #5] BARICA", "background": "", "description": "Barica 是一只非同寻常的青蛙。她住在一个池塘里，有 $N$ 片漂浮在水面上的荷叶。这些荷叶的编号为 $1$ 到 $N$，位置可以用一对坐标表示。Barica 可以在这些荷叶上跳来跳去，但是她害怕斜着跳和朝负方向跳。\n\n准确的说，她可以从坐标 $(x_1,y_1)$ 跳到另一个坐标 $(x_2,y_2)$ 仅当：\n\n- $x_2>x_1$ 且 $y_2=y_1$ 或者\n\n- $y_2>y_1$ 且 $x_2=x_1$。\n\n对于每一片荷叶，我们知道其附近的苍蝇数量。Barika 可以吃掉所有在她荷叶附近的苍蝇。\n\nBarica 每吃一只苍蝇会获得 $1$ 个单位的能量，每进行一次跳跃消耗 $K$ 个单位的能量。如果 Barica 没有足够的能量，她就不能进行跳跃。\n\nBarica 想通过 $1$ 号植物到达 $N$ 号植物，并获得尽可能多的能量。Barica 开始时没有能量，必须通过吃掉 $1$ 号植物附近的苍蝇来获取能量。\n\n找到使得 Barica 达到目标的一种可行路径。", "inputFormat": "第一行，两个整数 $N$ 和 $K$。\n\n接下来 $N$ 行，每行包含三个整数 $x_i$，$y_i$ 和 $z_i$，表示第 $i$ 号荷叶的坐标为 $(x_i,y_i)$，且其附近有 $z_i$ 只苍蝇。", "outputFormat": "第一行，输出到达终点后能量单位数量。\n\n第二行，输出一个整数 $L$，表示 Barica 需要经过的植物个数。必须包含 $1$ 号和 $N$ 号植物。\n\n接下来 $L$ 行，依次输出 Barica 需要经过的植物坐标。", "hint": "对于 $100\\%$ 的数据，$2\\le N\\le 3\\times 10^5$，$1\\le K\\le 1000$，$0\\le x_i,y_i\\le 10^5$，$0\\le z_i\\le 1000$。\n\n输入数据保证有解，但不保证有唯一解。\n\n本题分值按照原比赛设置，满分 $70$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2007/2008 #5] BARICA", "background": "", "description": "Barica 是一只非同寻常的青蛙。她住在一个池塘里，有 $N$ 片漂浮在水面上的荷叶。这些荷叶的编号为 $1$ 到 $N$，位置可以用一对坐标表示。Barica 可以在这些荷叶上跳来跳去，但是她害怕斜着跳和朝负方向跳。\n\n准确的说，她可以从坐标 $(x_1,y_1)$ 跳到另一个坐标 $(x_2,y_2)$ 仅当：\n\n- $x_2>x_1$ 且 $y_2=y_1$ 或者\n\n- $y_2>y_1$ 且 $x_2=x_1$。\n\n对于每一片荷叶，我们知道其附近的苍蝇数量。Barika 可以吃掉所有在她荷叶附近的苍蝇。\n\nBarica 每吃一只苍蝇会获得 $1$ 个单位的能量，每进行一次跳跃消耗 $K$ 个单位的能量。如果 Barica 没有足够的能量，她就不能进行跳跃。\n\nBarica 想通过 $1$ 号植物到达 $N$ 号植物，并获得尽可能多的能量。Barica 开始时没有能量，必须通过吃掉 $1$ 号植物附近的苍蝇来获取能量。\n\n找到使得 Barica 达到目标的一种可行路径。", "inputFormat": "第一行，两个整数 $N$ 和 $K$。\n\n接下来 $N$ 行，每行包含三个整数 $x_i$，$y_i$ 和 $z_i$，表示第 $i$ 号荷叶的坐标为 $(x_i,y_i)$，且其附近有 $z_i$ 只苍蝇。", "outputFormat": "第一行，输出到达终点后能量单位数量。\n\n第二行，输出一个整数 $L$，表示 Barica 需要经过的植物个数。必须包含 $1$ 号和 $N$ 号植物。\n\n接下来 $L$ 行，依次输出 Barica 需要经过的植物坐标。", "hint": "对于 $100\\%$ 的数据，$2\\le N\\le 3\\times 10^5$，$1\\le K\\le 1000$，$0\\le x_i,y_i\\le 10^5$，$0\\le z_i\\le 1000$。\n\n输入数据保证有解，但不保证有唯一解。\n\n本题分值按照原比赛设置，满分 $70$ 分。", "locale": "zh-CN"}}}
{"pid": "P7937", "type": "P", "difficulty": 5, "samples": [["5\nhobotnica\nrobot\nhobi\nhobit\nrobi\n4\nrobi\nhobi\nhobit\nrakija ", "12\n10\n16\n7 "], ["8\nmajmunica\nmajmun\nmajka\nmalina\nmalinska\nmalo\nmaleni\nmalesnica\n3\nkrampus\nmalnar\nmajmun ", "8\n29\n14"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2007", "COCI（克罗地亚）"], "title": "[COCI 2007/2008 #5] BAZA", "background": "", "description": "定义两个字符串的公共前缀为这两个字符串从开头开始的公共子串。比如，字符串 `identity` 和字符串 `idealistic` 的公共前缀为 `ide`。\n\n有一个数据库包含了 $N$ 个字符串。\n\n在这个数据库中查询字符串 $W$ 使用的算法很原始，它将 $W$ 与数据库中的字符串一一比较。两个字符串的字符也一一比对，直到找到一个不匹配的字符或者其中一个字符串的结尾，然后进行最后一次比较确定两个字符串长度是否相等。当在数据库中找到 $W$ 时，算法结束。\n\n分析这个算法，我们发现，在数据库中找到 $W$ 所用的步骤数等于与 $W$ 进行比较的字符串数量，加上 $W$ 与所有进行比较的字符串的公共前缀之和。\n\n共有 $Q$ 个需查询的字符串。\n\n写出一个程序，计算对于每一个字符串，程序需要多少步才能在数据库中找到这个词。\n\n**请留意本题非同寻常的内存限制。**", "inputFormat": "第一行，一个整数 $N$，表示数据库中字符串的个数。\n\n接下来 $N$ 行，每行一个数据库中的字符串，这些字符串按照算法的查询顺序给出，互不相同。\n\n接下来一行，一个整数 $Q$，表示需查询的字符串数。\n\n接下来 $Q$ 行，每行一个需查询的字符串。", "outputFormat": "对于每个查询字符串，输出一行，一个整数，表示程序在数据库中找到这个词所需的步数。", "hint": "对于 $100\\%$ 的数据，$1\\le N,Q\\le 3\\times 10^4$，所有字符串长度 $<30$，且只包含小写字母。\n\n### 样例 2 解释：\n\n对于样例 2，搜索字符串 `krampus` 所用的步数为 $8$，我们只需要将数据库里每一个字符串的第一个字符与此字符串比较即可。\n\n搜索字符串 `malnar` 时，前三个字符串每个字符串需要比较三次，剩下五个字符串每个字符串则需要比较四次，所以总共需要 $29$ 次比较。\n\n为了找到 `majmun` 字符串，我们总共需要 $14$ 次比较。对于第一个单词，我们进行了六次成功的比较，但最后一次比较确定了字符串 `majmunica` 比 `majmun` 长。对于第二个字符串，我们也进行了六次成功的比较，在最后一次比较中我们发现两个字符串长度相等，算法结束。\n\n本题分值按照原比赛设置，满分 $90$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2007/2008 #5] BAZA", "background": "", "description": "定义两个字符串的公共前缀为这两个字符串从开头开始的公共子串。比如，字符串 `identity` 和字符串 `idealistic` 的公共前缀为 `ide`。\n\n有一个数据库包含了 $N$ 个字符串。\n\n在这个数据库中查询字符串 $W$ 使用的算法很原始，它将 $W$ 与数据库中的字符串一一比较。两个字符串的字符也一一比对，直到找到一个不匹配的字符或者其中一个字符串的结尾，然后进行最后一次比较确定两个字符串长度是否相等。当在数据库中找到 $W$ 时，算法结束。\n\n分析这个算法，我们发现，在数据库中找到 $W$ 所用的步骤数等于与 $W$ 进行比较的字符串数量，加上 $W$ 与所有进行比较的字符串的公共前缀之和。\n\n共有 $Q$ 个需查询的字符串。\n\n写出一个程序，计算对于每一个字符串，程序需要多少步才能在数据库中找到这个词。\n\n**请留意本题非同寻常的内存限制。**", "inputFormat": "第一行，一个整数 $N$，表示数据库中字符串的个数。\n\n接下来 $N$ 行，每行一个数据库中的字符串，这些字符串按照算法的查询顺序给出，互不相同。\n\n接下来一行，一个整数 $Q$，表示需查询的字符串数。\n\n接下来 $Q$ 行，每行一个需查询的字符串。", "outputFormat": "对于每个查询字符串，输出一行，一个整数，表示程序在数据库中找到这个词所需的步数。", "hint": "对于 $100\\%$ 的数据，$1\\le N,Q\\le 3\\times 10^4$，所有字符串长度 $<30$，且只包含小写字母。\n\n### 样例 2 解释：\n\n对于样例 2，搜索字符串 `krampus` 所用的步数为 $8$，我们只需要将数据库里每一个字符串的第一个字符与此字符串比较即可。\n\n搜索字符串 `malnar` 时，前三个字符串每个字符串需要比较三次，剩下五个字符串每个字符串则需要比较四次，所以总共需要 $29$ 次比较。\n\n为了找到 `majmun` 字符串，我们总共需要 $14$ 次比较。对于第一个单词，我们进行了六次成功的比较，但最后一次比较确定了字符串 `majmunica` 比 `majmun` 长。对于第二个字符串，我们也进行了六次成功的比较，在最后一次比较中我们发现两个字符串长度相等，算法结束。\n\n本题分值按照原比赛设置，满分 $90$ 分。", "locale": "zh-CN"}}}
{"pid": "P7938", "type": "P", "difficulty": 2, "samples": [["2\n2 1\n()\n2 99\n()", "1\n0"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「Wdcfr-1」Beautiful Array", "background": "", "description": "In this problem, we define a sequence of `(` and `)` as a \"bracket sequence\".\n\nThe definition of *Regular Bracket Sequence* is as follows:\n\n1. `()` is a Regular Bracket Sequence.\n1. If `A` is a Regular Bracket Sequence, then `(A)` is also a Regular Bracket Sequence.\n1. If `A` and `B` are Regular Bracket Sequences, then `AB` is also a Regular Bracket Sequence.\n\nFor example: `()`, `(())`, and `()()` are all Regular Bracket Sequences, but `)(`, `()(` are not.\n\nIn particular, an empty sequence is **not** a Regular Bracket Sequence sequence in this problem.\n\nNow ~~cute~~ Ran gives you a bracket sequence $s$ of length $n$. She wants you to construct $2\\cdot m$ **strictly increasing** arrays. Let us denote them as\n $p_1,p_2,\\cdots,p_{2 m}$ (you can leave any of them empty). You need to ensure that all integers between $1\\sim n$ appear **exactly once** in these arrays. \n \nAn array $p_i=\\{r_1,r_2,\\cdots,r_k\\}$ is *Beautiful* if    $\\{s_{r_1},s_{r_2},\\cdots,s_{r_k}\\}$ is a Regular Bracket Sequence.\n\nRan wonders whether it is possible to construct these arrays so that at least $m$ of the $2\\cdot m$ arrays are \"beautiful arrays\". ", "inputFormat": "Each test contains multiple test cases.\n\nThe first line contains an integer $T$, the number of test cases.\n\nFor each test case, the first line contains two integers $n$ and $m$, and the second line contains a bracket sequence $s$.", "outputFormat": "For each test case, print one line.\n\nIf it is possible to construct these arrays, print $1$. Otherwise print $0$.", "hint": "### Explanation\n\nFor the first test case, we can construct $p_1=\\{1,2\\}$ and $ p_2=\\{\\}$. So $p_1$ is a \"beautiful array\".\n\nFor the second test case, it is obvious that we cannot use two numbers to construct $99$ beautiful arrays.\n\n### Constraints\n\n$1\\le T,n,m\\le 200$.", "locale": "en", "translations": {"en": {"title": "「Wdcfr-1」Beautiful Array", "background": "", "description": "In this problem, we define a sequence of `(` and `)` as a \"bracket sequence\".\n\nThe definition of *Regular Bracket Sequence* is as follows:\n\n1. `()` is a Regular Bracket Sequence.\n1. If `A` is a Regular Bracket Sequence, then `(A)` is also a Regular Bracket Sequence.\n1. If `A` and `B` are Regular Bracket Sequences, then `AB` is also a Regular Bracket Sequence.\n\nFor example: `()`, `(())`, and `()()` are all Regular Bracket Sequences, but `)(`, `()(` are not.\n\nIn particular, an empty sequence is **not** a Regular Bracket Sequence sequence in this problem.\n\nNow ~~cute~~ Ran gives you a bracket sequence $s$ of length $n$. She wants you to construct $2\\cdot m$ **strictly increasing** arrays. Let us denote them as\n $p_1,p_2,\\cdots,p_{2 m}$ (you can leave any of them empty). You need to ensure that all integers between $1\\sim n$ appear **exactly once** in these arrays. \n \nAn array $p_i=\\{r_1,r_2,\\cdots,r_k\\}$ is *Beautiful* if    $\\{s_{r_1},s_{r_2},\\cdots,s_{r_k}\\}$ is a Regular Bracket Sequence.\n\nRan wonders whether it is possible to construct these arrays so that at least $m$ of the $2\\cdot m$ arrays are \"beautiful arrays\". ", "inputFormat": "Each test contains multiple test cases.\n\nThe first line contains an integer $T$, the number of test cases.\n\nFor each test case, the first line contains two integers $n$ and $m$, and the second line contains a bracket sequence $s$.", "outputFormat": "For each test case, print one line.\n\nIf it is possible to construct these arrays, print $1$. Otherwise print $0$.", "hint": "### Explanation\n\nFor the first test case, we can construct $p_1=\\{1,2\\}$ and $ p_2=\\{\\}$. So $p_1$ is a \"beautiful array\".\n\nFor the second test case, it is obvious that we cannot use two numbers to construct $99$ beautiful arrays.\n\n### Constraints\n\n$1\\le T,n,m\\le 200$.", "locale": "en"}, "zh-CN": {"title": "「Wdcfr-1」Beautiful Array", "background": null, "description": "在这个问题中，我们将由 `(` 和 `)` 组成的序列定义为“括号序列”。\n\n*正规括号序列* 的定义如下：\n\n1. `()` 是一个正规括号序列。\n2. 如果 `A` 是一个正规括号序列，那么 `(A)` 也是一个正规括号序列。\n3. 如果 `A` 和 `B` 是正规括号序列，那么 `AB` 也是一个正规括号序列。\n\n例如：`()`, `(())` 和 `()()` 都是正规括号序列，但 `)(`, `()(` 不是。\n\n特别地，在这个问题中，空序列**不是**一个正规括号序列。\n\n现在，~~可爱的~~ Ran 给你一个长度为 $n$ 的括号序列 $s$。她希望你构造 $2 \\cdot m$ 个**严格递增**的数组。我们将它们记作 $p_1,p_2,\\cdots,p_{2m}$（你可以将其中任何一个留空）。你需要确保所有从 $1\\sim n$ 的整数在这些数组中**恰好出现一次**。\n\n一个数组 $p_i=\\{r_1,r_2,\\cdots,r_k\\}$ 是*美丽的*，如果 $\\{s_{r_1},s_{r_2},\\cdots,s_{r_k}\\}$ 是一个正规括号序列。\n\nRan 想知道是否有可能构造这些数组，使得 $2 \\cdot m$ 个数组中至少 $m$ 个是“美丽数组”。", "inputFormat": "每个测试包含多个测试用例。\n\n第一行包含一个整数 $T$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含两个整数 $n$ 和 $m$，第二行包含一个括号序列 $s$。", "outputFormat": "对于每个测试用例，输出一行。\n\n如果可以构造这些数组，输出 $1$。否则输出 $0$。", "hint": "### 解释\n\n对于第一个测试用例，我们可以构造 $p_1=\\{1,2\\}$ 和 $p_2=\\{\\}$。所以 $p_1$ 是一个“美丽数组”。\n\n对于第二个测试用例，很明显我们不能用两个数字构造 $99$ 个美丽数组。\n\n### 约束\n\n$1\\le T,n,m\\le 200$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7939", "type": "P", "difficulty": 2, "samples": [["2\n1\n1 2\n1 2\n2\n2 3 1 3\n1 2 2 1", "2\n1 1\n2 2\n4\n3 1 1 3\n1 2 2 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化"], "title": "「Wdcfr-1」Alice Wins!  (easy version)", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/zshuq5iq.png)\n", "description": "**The difference between the versions is the limit of operations.**\n\nAlice is a cute girl who has a lot of dolls.\n\nThere are $4\\cdot n$ dolls playing *rock-paper-scissors*. They are divided into two teams: Team A and Team B. Each team contains $2\\cdot n$ dolls.\n\nA total of $2\\cdot n$ rounds of the game will be played. In the $i$-th round, the $i$-th doll in Team A will play against the $i$-th doll in Team B. If the doll in Team A wins, Team A will get $1$ point. If it loses, Team A will lose $1$ point. If it ties, Team A will not get points.\n\nAlice knows all the dolls' choices in this game. To be precise, she uses two arrays $a$ and $b$ to represent the choices of the dolls in the two teams. $a_i$ means the choice of the $i$-th doll in Team A, and $b_i$ means the choice of the $i$-th doll in Team B. In this question, we use $1$ for rock, $2$ for scissors, and $3$ for paper.\n\nNow for **each team**, Alice wants to change the choices of **at most** $n$ dolls to make the score of Team A as high as possible.\n\nFind the maximum score of Team A and its construction method. If there are multiple answers print any of them (you still have to maximize the score of Team A).", "inputFormat": "Each test contains multiple testcases. The first line contains an integer $T$, the number of test cases.\n\nFor each test case, the first line contains one integer $n$.\n\nThen two lines follow, containing an array $a$ of length $2\\cdot n$ and an array $b$ of length $2\\cdot n$, respectively.", "outputFormat": "For each test case, print three lines.\n\nThe first line contains one integer, the maximum score of Team A.\n\nThe second line contains an array $a'$ of length $2\\cdot n$, which represents the $a$ array after Alice's modification. For integers $1$ to $2\\cdot n$, if $a_i \\ne a'_i$, then it means you have modified the choice of one player in Team A.\n\nThe third line contains an array $b'$ of length $2\\cdot n$, which represents the $b$ array after Alice's modification. For integers $1$ to $2\\cdot n$, if $b_i \\ne b'_i$, then it means you have modified the choice of one player in Team B.", "hint": "### Explanation\n\nFor the first test case, we can change $a_2$ to $1$ and $b_1$ to $2$. Then Team A can get $2$ points. It can be proved that this is the maximum score that Team A can get.\n\nFor the second test case, we can change $a_1$ to $3$ and $a_2$ to $1$.\n\n### Constraints\n\n$1\\le T,n \\le 10^5;\\ 1\\le a_i,b_i \\le 3$. The sum of $n$ over all test cases  $\\le 10^5$.", "locale": "en", "translations": {"en": {"title": "「Wdcfr-1」Alice Wins!  (easy version)", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/zshuq5iq.png)\n", "description": "**The difference between the versions is the limit of operations.**\n\nAlice is a cute girl who has a lot of dolls.\n\nThere are $4\\cdot n$ dolls playing *rock-paper-scissors*. They are divided into two teams: Team A and Team B. Each team contains $2\\cdot n$ dolls.\n\nA total of $2\\cdot n$ rounds of the game will be played. In the $i$-th round, the $i$-th doll in Team A will play against the $i$-th doll in Team B. If the doll in Team A wins, Team A will get $1$ point. If it loses, Team A will lose $1$ point. If it ties, Team A will not get points.\n\nAlice knows all the dolls' choices in this game. To be precise, she uses two arrays $a$ and $b$ to represent the choices of the dolls in the two teams. $a_i$ means the choice of the $i$-th doll in Team A, and $b_i$ means the choice of the $i$-th doll in Team B. In this question, we use $1$ for rock, $2$ for scissors, and $3$ for paper.\n\nNow for **each team**, Alice wants to change the choices of **at most** $n$ dolls to make the score of Team A as high as possible.\n\nFind the maximum score of Team A and its construction method. If there are multiple answers print any of them (you still have to maximize the score of Team A).", "inputFormat": "Each test contains multiple testcases. The first line contains an integer $T$, the number of test cases.\n\nFor each test case, the first line contains one integer $n$.\n\nThen two lines follow, containing an array $a$ of length $2\\cdot n$ and an array $b$ of length $2\\cdot n$, respectively.", "outputFormat": "For each test case, print three lines.\n\nThe first line contains one integer, the maximum score of Team A.\n\nThe second line contains an array $a'$ of length $2\\cdot n$, which represents the $a$ array after Alice's modification. For integers $1$ to $2\\cdot n$, if $a_i \\ne a'_i$, then it means you have modified the choice of one player in Team A.\n\nThe third line contains an array $b'$ of length $2\\cdot n$, which represents the $b$ array after Alice's modification. For integers $1$ to $2\\cdot n$, if $b_i \\ne b'_i$, then it means you have modified the choice of one player in Team B.", "hint": "### Explanation\n\nFor the first test case, we can change $a_2$ to $1$ and $b_1$ to $2$. Then Team A can get $2$ points. It can be proved that this is the maximum score that Team A can get.\n\nFor the second test case, we can change $a_1$ to $3$ and $a_2$ to $1$.\n\n### Constraints\n\n$1\\le T,n \\le 10^5;\\ 1\\le a_i,b_i \\le 3$. The sum of $n$ over all test cases  $\\le 10^5$.", "locale": "en"}, "zh-CN": {"title": "「Wdcfr-1」Alice Wins!  (easy version)", "background": null, "description": "**版本之间的区别在于操作的限制。**\n\nAlice 是一个可爱的女孩，她有很多玩偶。\n\n有 $4 \\cdot n$ 个玩偶在玩“石头剪刀布”。他们被分成两个队伍：A 队和 B 队。每个队伍包含 $2 \\cdot n$ 个玩偶。\n\n总共会进行 $2 \\cdot n$ 轮比赛。在第 $i$ 轮中，A 队的第 $i$ 个玩偶将与 B 队的第 $i$ 个玩偶对战。如果 A 队的玩偶赢了，A 队将获得 $1$ 分。如果输了，A 队将失去 $1$ 分。如果打平，A 队将不获得分数。\n\nAlice 知道所有玩偶在这场比赛中的选择。具体来说，她用两个数组 $a$ 和 $b$ 来表示两个队伍中玩偶的选择。$a_i$ 表示 A 队第 $i$ 个玩偶的选择，$b_i$ 表示 B 队第 $i$ 个玩偶的选择。在这个问题中，我们用 $1$ 表示石头，$2$ 表示剪刀，$3$ 表示布。\n\n现在对于**每个队伍**，Alice 想要改变**最多** $n$ 个玩偶的选择，以使 A 队的得分尽可能高。\n\n找出 A 队的最大得分及其构造方法。如果有多个答案，输出任意一个（你仍然需要最大化 A 队的得分）。", "inputFormat": "每个测试包含多个测试用例。第一行包含一个整数 $T$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含一个整数 $n$。\n\n接下来是两行，分别包含长度为 $2 \\cdot n$ 的数组 $a$ 和数组 $b$。", "outputFormat": "对于每个测试用例，输出三行。\n\n第一行包含一个整数，表示 A 队的最大得分。\n\n第二行包含一个长度为 $2 \\cdot n$ 的数组 $a'$，表示 Alice 修改后的 $a$ 数组。对于整数 $1$ 到 $2 \\cdot n$，如果 $a_i \\ne a'_i$，则表示你已经修改了 A 队中一个玩家的选择。\n\n第三行包含一个长度为 $2 \\cdot n$ 的数组 $b'$，表示 Alice 修改后的 $b$ 数组。对于整数 $1$ 到 $2 \\cdot n$，如果 $b_i \\ne b'_i$，则表示你已经修改了 B 队中一个玩家的选择。", "hint": "### 解释\n\n对于第一个测试用例，我们可以将 $a_2$ 改为 $1$，将 $b_1$ 改为 $2$。然后 A 队可以得到 $2$ 分。可以证明这是 A 队可以获得的最大分数。\n\n对于第二个测试用例，我们可以将 $a_1$ 改为 $3$，将 $a_2$ 改为 $1$。\n\n### 约束\n\n$1\\le T,n \\le 10^5; 1\\le a_i,b_i \\le 3$。所有测试用例中 $n$ 的总和 $\\le 10^5$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7940", "type": "P", "difficulty": 3, "samples": [["1\n1\n1 2\n1 2", "2\n1 1\n2 2"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "Special Judge", "O2优化", "构造"], "title": "「Wdcfr-1」Alice Wins! (hard version)", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/zshuq5iq.png)", "description": "**The difference between the versions is the limit of operations.**\n\nAlice is a cute girl who has a lot of dolls.\n\nThere are $4\\cdot n$ dolls playing *rock-paper-scissors*. They are divided into two teams: Team A and Team B. Each team contains $2\\cdot n$ dolls.\n\nA total of $2\\cdot n$ rounds of the game will be played. In the $i$-th round, the $i$-th doll in Team A will play against the $i$-th doll in Team B. If the doll in Team A wins, Team A will get $1$ point. If it loses, Team A will lose $1$ point. If it ties, Team A will not get points.\n\nAlice knows all the dolls' choices in this game. To be precise, she uses two arrays $a$ and $b$ to represent the choices of the dolls in the two teams. $a_i$ means the choice of the $i$-th doll in Team A, and $b_i$ means the choice of the $i$-th doll in Team B. In this question, we use $1$ for rock, $2$ for scissors, and $3$ for paper.\n\nNow for **each team**, Alice wants to change the choices of **exact** $n$ dolls to make the score of Team A as high as possible.\n\nFind the maximum score of Team A and its construction method. If there are multiple answers print any of them (you still have to maximize the score of Team A).", "inputFormat": "Each test contains multiple testcases. The first line contains an integer $T$, the number of test cases.\n\nFor each test case, the first line contains one integer $n$.\n\nThen two lines follow, containing an array $a$ of length $2\\cdot n$ and an array $b$ of length $2\\cdot n$, respectively.", "outputFormat": "For each test case, output three lines.\n\nThe first line contains one integer, which is the maximize the score of Team A.\n\nThe second line contains an array $a'$ of length $2\\cdot n$, which represents the modified $a$ array. For integers $1$ to $2\\cdot n$, if $a_i \\ne a'_i$, then it means you have modified the hand shape of one player in Team A.\n\nThe third line contains an array $b'$ of length $2\\cdot n$, which represents the modified $b$ array. For integers $1$ to $2\\cdot n$, if $b_i \\ne b'_i$, then it means you have modified the hand shape of one player in Team B.", "hint": "### Explanation\n\nFor the first test case, we can change $a_2$ to $1$ and $b_1$ to $2$. Then Team A can get $2$ points. It can be proved that this is the maximum score that Team A can get.\n\n### Constraints\n\n$1\\le T,n \\le 10^5;\\ 1\\le a_i,b_i \\le 3$. The sum of $n$ of all test cases $\\le 10^5$.", "locale": "en", "translations": {"en": {"title": "「Wdcfr-1」Alice Wins! (hard version)", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/zshuq5iq.png)", "description": "**The difference between the versions is the limit of operations.**\n\nAlice is a cute girl who has a lot of dolls.\n\nThere are $4\\cdot n$ dolls playing *rock-paper-scissors*. They are divided into two teams: Team A and Team B. Each team contains $2\\cdot n$ dolls.\n\nA total of $2\\cdot n$ rounds of the game will be played. In the $i$-th round, the $i$-th doll in Team A will play against the $i$-th doll in Team B. If the doll in Team A wins, Team A will get $1$ point. If it loses, Team A will lose $1$ point. If it ties, Team A will not get points.\n\nAlice knows all the dolls' choices in this game. To be precise, she uses two arrays $a$ and $b$ to represent the choices of the dolls in the two teams. $a_i$ means the choice of the $i$-th doll in Team A, and $b_i$ means the choice of the $i$-th doll in Team B. In this question, we use $1$ for rock, $2$ for scissors, and $3$ for paper.\n\nNow for **each team**, Alice wants to change the choices of **exact** $n$ dolls to make the score of Team A as high as possible.\n\nFind the maximum score of Team A and its construction method. If there are multiple answers print any of them (you still have to maximize the score of Team A).", "inputFormat": "Each test contains multiple testcases. The first line contains an integer $T$, the number of test cases.\n\nFor each test case, the first line contains one integer $n$.\n\nThen two lines follow, containing an array $a$ of length $2\\cdot n$ and an array $b$ of length $2\\cdot n$, respectively.", "outputFormat": "For each test case, output three lines.\n\nThe first line contains one integer, which is the maximize the score of Team A.\n\nThe second line contains an array $a'$ of length $2\\cdot n$, which represents the modified $a$ array. For integers $1$ to $2\\cdot n$, if $a_i \\ne a'_i$, then it means you have modified the hand shape of one player in Team A.\n\nThe third line contains an array $b'$ of length $2\\cdot n$, which represents the modified $b$ array. For integers $1$ to $2\\cdot n$, if $b_i \\ne b'_i$, then it means you have modified the hand shape of one player in Team B.", "hint": "### Explanation\n\nFor the first test case, we can change $a_2$ to $1$ and $b_1$ to $2$. Then Team A can get $2$ points. It can be proved that this is the maximum score that Team A can get.\n\n### Constraints\n\n$1\\le T,n \\le 10^5;\\ 1\\le a_i,b_i \\le 3$. The sum of $n$ of all test cases $\\le 10^5$.", "locale": "en"}, "zh-CN": {"title": "「Wdcfr-1」Alice Wins! (hard version)", "background": null, "description": "**版本之间的区别在于操作的限制。**\n\nAlice 是一个可爱的女孩，她有很多玩偶。\n\n有 $4\\cdot n$ 个玩偶在玩“石头剪刀布”。它们被分成两个队伍：A 队和 B 队。每个队伍包含 $2\\cdot n$ 个玩偶。\n\n游戏将进行总共 $2\\cdot n$ 轮。在第 $i$ 轮中，A 队的第 $i$ 个玩偶将与 B 队的第 $i$ 个玩偶对战。如果 A 队的玩偶赢了，A 队将获得 $1$ 分。如果输了，A 队将失去 $1$ 分。如果平局，A 队将不获得分数。\n\nAlice 知道所有玩偶在这场游戏中的选择。具体来说，她使用两个数组 $a$ 和 $b$ 来表示两个队伍中玩偶的选择。$a_i$ 表示 A 队第 $i$ 个玩偶的选择，$b_i$ 表示 B 队第 $i$ 个玩偶的选择。在这个问题中，我们用 $1$ 表示石头，$2$ 表示剪刀，$3$ 表示布。\n\n现在对于**每个队伍**，Alice 想要改变**恰好** $n$ 个玩偶的选择，以使 A 队的得分尽可能高。\n\n找出 A 队的最大得分及其构造方法。如果有多个答案，输出任意一个（你仍然需要最大化 A 队的得分）。", "inputFormat": "每个测试包含多个测试用例。第一行包含一个整数 $T$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含一个整数 $n$。\n\n接下来两行，分别包含长度为 $2\\cdot n$ 的数组 $a$ 和数组 $b$。", "outputFormat": "对于每个测试用例，输出三行。\n\n第一行包含一个整数，表示 A 队的最大得分。\n\n第二行包含长度为 $2\\cdot n$ 的数组 $a'$，表示修改后的 $a$ 数组。对于整数 $1$ 到 $2\\cdot n$，如果 $a_i \\ne a'_i$，则表示你已经修改了 A 队中一个玩家的手势。\n\n第三行包含长度为 $2\\cdot n$ 的数组 $b'$，表示修改后的 $b$ 数组。对于整数 $1$ 到 $2\\cdot n$，如果 $b_i \\ne b'_i$，则表示你已经修改了 B 队中一个玩家的手势。", "hint": "### 解释\n\n对于第一个测试用例，我们可以将 $a_2$ 改为 $1$，将 $b_1$ 改为 $2$。然后 A 队可以得到 $2$ 分。可以证明这是 A 队可以获得的最大分数。\n\n### 约束\n\n$1\\le T,n \\le 10^5; 1\\le a_i,b_i \\le 3$。所有测试用例的 $n$ 之和 $\\le 10^5$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7941", "type": "P", "difficulty": 3, "samples": [["2\n3 01?\n7 01?01?|", "1\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "栈"], "title": "「Wdcfr-1」Magical Expression", "background": "", "description": "Nitori is learning postfix expressions. She has a incomplete postfix expression $E$ of length $n$. Being a Youkai, she wants to find its magical property.\n\nHer postfix expression contains the Bitwise Or operator (denoted as `|`), the Bitwise And operator (denoted as `&`), and numbers `0` and `1`. Being incomplete, some operators have not been decided yet and are denoted as `?`. She promised that $E$ **will become a *vaild* postfix expression** after you complete it.\n\nIn this problem, the term *substring* is defined as a continuous segment of $E$. **Two substrings are considered different as long as their positions or length differ.**  So `1?0`, `01?0` are all substrings of `01?01?|`  , but `0101` is not.\n\nNitori found out that a substring of her expression is *magical* if and only if the following conditions are met:\n\n- It is possible to transform it into a *valid* postfix expression after replacing `?` with either `&` or `|` .\n- Among these transformations, it is possible to find at least one of them that after applying it, the expression yields $0$,  and at least one of them that after applying it, the expression yields $1$.\n\nYour task is to find out the number of *magical* substrings.\n", "inputFormat": "The first line contains an integer $T$, the number of test cases.\n\nFor each test case, input one integer $n$ and an expression $E$ in a single line.", "outputFormat": "For each test case, print one integer which is the answer.", "hint": "### Constraints\n\n$1\\le T,n\\le 2\\times 10^6$. The sum of $n$ of all test cases $\\le 2\\times 10^6$.", "locale": "en", "translations": {"en": {"title": "「Wdcfr-1」Magical Expression", "background": "", "description": "Nitori is learning postfix expressions. She has a incomplete postfix expression $E$ of length $n$. Being a Youkai, she wants to find its magical property.\n\nHer postfix expression contains the Bitwise Or operator (denoted as `|`), the Bitwise And operator (denoted as `&`), and numbers `0` and `1`. Being incomplete, some operators have not been decided yet and are denoted as `?`. She promised that $E$ **will become a *vaild* postfix expression** after you complete it.\n\nIn this problem, the term *substring* is defined as a continuous segment of $E$. **Two substrings are considered different as long as their positions or length differ.**  So `1?0`, `01?0` are all substrings of `01?01?|`  , but `0101` is not.\n\nNitori found out that a substring of her expression is *magical* if and only if the following conditions are met:\n\n- It is possible to transform it into a *valid* postfix expression after replacing `?` with either `&` or `|` .\n- Among these transformations, it is possible to find at least one of them that after applying it, the expression yields $0$,  and at least one of them that after applying it, the expression yields $1$.\n\nYour task is to find out the number of *magical* substrings.\n", "inputFormat": "The first line contains an integer $T$, the number of test cases.\n\nFor each test case, input one integer $n$ and an expression $E$ in a single line.", "outputFormat": "For each test case, print one integer which is the answer.", "hint": "### Constraints\n\n$1\\le T,n\\le 2\\times 10^6$. The sum of $n$ of all test cases $\\le 2\\times 10^6$.", "locale": "en"}, "zh-CN": {"title": "「Wdcfr-1」Magical Expression", "background": "", "description": "妮特莉正在学习后缀表达式。她有一个长度为 $n$ 的不完整后缀表达式 $E$。作为妖怪，她想要找到它的魔法属性。\n\n她的后缀表达式包含按位或运算符（记作 `|`）、按位与运算符（记作 `&`），以及数字 `0` 和 `1`。由于不完整，一些运算符尚未决定，用 `?` 表示。她保证 $E$ **在你完成它之后将成为一个*有效*的后缀表达式**。\n\n在这个问题中，术语*子串*定义为 $E$ 的一个连续片段。**只要位置或长度不同，两个子串就被认为是不同的。**所以 `1?0`，`01?0` 都是 `01?01?|` 的子串，但 `0101` 不是。\n\n妮特莉发现她的表达式的一个子串是*魔法的*，当且仅当满足以下条件：\n\n- 在将 `?` 替换为 `&` 或 `|` 后，可以将其转换为一个*有效*的后缀表达式。\n- 在这些转换中，至少能找到一种转换，使得应用后表达式的结果为 $0$，并且至少能找到一种转换，使得应用后表达式的结果为 $1$。\n\n你的任务是找出*魔法的*子串的数量。", "inputFormat": "第一行包含一个整数 $T$，表示测试用例的数量。\n\n对于每个测试用例，在一行中输入一个整数 $n$ 和一个表达式 $E$。", "outputFormat": "对于每个测试用例，输出一个整数，表示答案。", "hint": "### 约束条件\n\n$1\\le T,n\\le 2\\times 10^6$。所有测试用例的 $n$ 之和 $\\le 2\\times 10^6$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7942", "type": "P", "difficulty": 4, "samples": [["3 3 4\naab\nbaa\nbaa", "4"], ["3 3 2\nxyz\nqaq\naba\n", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "枚举"], "title": "「Wdcfr-1」CONsecutive and CONcat (easy version)", "background": "", "description": "**In easy version, It is guaranteed that any string in array $\\mathbf a$ contains at least two different letters.**\n\nLily White is playing with strings. Being a yousei, she is not capable of complex speech. Thus, she likes strings that only contain one kind of letter, she calls such strings of length $x$ a \"$x$-CON string\". For example, `qqqq` is a \"$4$-CON string\", while `aaab` is not any type of \"CON string\".\n\nLily White composed an array $a$. It contains $n$ strings of length $m$ that she will use to herald spring. For each permutation of $1,2,\\ldots, n$, let us denote current permutation as $p=\\{p_1,p_2,\\cdots,p_n\\}$. Lily White concatenates all the string in array $a$ in the order of $a_{p_1},a_{p_2},\\cdots,a_{p_n}$ into a string $s$ of length $nm$ . \n\nAs she likes $k$-CON strings, she wants to know the sum of the number of \"$k$-CON string\" in all non-empty substrings of $s$ composed by all $n!$ permutations. Since the answer may be enormous, just print the answer taken modulo $998,244,353$ (a large prime).\n", "inputFormat": "The first line contains three integers $n,m,k$.\n\nThen $n$ lines follow, each line contains a string of length $m$. The string in the$(i+1)$-th line represents $a_i$.", "outputFormat": "Print a single integer - the answer taken modulo $998,244,353$.\n", "hint": "### Explanation\n\n#### Sample \\#1\n\n- For permutation $1,2,3$, the formed $s$ is `aabbaabaa`, none on the non-empty substring in this string are \"$4$-CON string\".\n- For permutation $1,3,2$, the formed $s$ is `aabbaabaa`, none on the non-empty substring in this string are \"$4$-CON string\".\n- For permutation $2,1,3$, the formed $s$ is `baaaabbaa`, this string has one substring `aaaa` which is a \"$4$-CON string\".\n- For permutation $2,3,1$, the formed $s$ is `baabaaaab`, this string has one substring `aaaa` which is a \"$4$-CON string\".\n- For permutation $3,1,2$, the formed $s$ is `baaaabbaa`, this string has one substring `aaaa` which is a \"$4$-CON string\".\n- For permutation $3,2,1$, the formed $s$ is `baabaaaab`, this string has one substring `aaaa` which is a \"$4$-CON string\".\n\nIn summary, the answer is $0+0+1+1+1+1=4$.\n\n#### Sample \\#2\n\nIn all of the full permutation of length $3$, there will be six different $s$: `xyzqaqaba`, `xyzabaqaq`, `qaqxyzaba`, `qaqabaxyz`, `abaqaqxyz`, and `abaxyzqaq`. None of these has a non-empty substrings which is a \"$2$-CON string\". So the answer is $0$.\n\n### Constraints\n\n$2\\le k \\le n\\cdot m\\le 10^6;\\ 1\\le m \\le 100$. $a_i$ contains only lowercase English letters.\n\n**In easy version, we ensure that any string in array $\\mathbf a$ contains at least two different letters.**", "locale": "en", "translations": {"en": {"title": "「Wdcfr-1」CONsecutive and CONcat (easy version)", "background": "", "description": "**In easy version, It is guaranteed that any string in array $\\mathbf a$ contains at least two different letters.**\n\nLily White is playing with strings. Being a yousei, she is not capable of complex speech. Thus, she likes strings that only contain one kind of letter, she calls such strings of length $x$ a \"$x$-CON string\". For example, `qqqq` is a \"$4$-CON string\", while `aaab` is not any type of \"CON string\".\n\nLily White composed an array $a$. It contains $n$ strings of length $m$ that she will use to herald spring. For each permutation of $1,2,\\ldots, n$, let us denote current permutation as $p=\\{p_1,p_2,\\cdots,p_n\\}$. Lily White concatenates all the string in array $a$ in the order of $a_{p_1},a_{p_2},\\cdots,a_{p_n}$ into a string $s$ of length $nm$ . \n\nAs she likes $k$-CON strings, she wants to know the sum of the number of \"$k$-CON string\" in all non-empty substrings of $s$ composed by all $n!$ permutations. Since the answer may be enormous, just print the answer taken modulo $998,244,353$ (a large prime).\n", "inputFormat": "The first line contains three integers $n,m,k$.\n\nThen $n$ lines follow, each line contains a string of length $m$. The string in the$(i+1)$-th line represents $a_i$.", "outputFormat": "Print a single integer - the answer taken modulo $998,244,353$.\n", "hint": "### Explanation\n\n#### Sample \\#1\n\n- For permutation $1,2,3$, the formed $s$ is `aabbaabaa`, none on the non-empty substring in this string are \"$4$-CON string\".\n- For permutation $1,3,2$, the formed $s$ is `aabbaabaa`, none on the non-empty substring in this string are \"$4$-CON string\".\n- For permutation $2,1,3$, the formed $s$ is `baaaabbaa`, this string has one substring `aaaa` which is a \"$4$-CON string\".\n- For permutation $2,3,1$, the formed $s$ is `baabaaaab`, this string has one substring `aaaa` which is a \"$4$-CON string\".\n- For permutation $3,1,2$, the formed $s$ is `baaaabbaa`, this string has one substring `aaaa` which is a \"$4$-CON string\".\n- For permutation $3,2,1$, the formed $s$ is `baabaaaab`, this string has one substring `aaaa` which is a \"$4$-CON string\".\n\nIn summary, the answer is $0+0+1+1+1+1=4$.\n\n#### Sample \\#2\n\nIn all of the full permutation of length $3$, there will be six different $s$: `xyzqaqaba`, `xyzabaqaq`, `qaqxyzaba`, `qaqabaxyz`, `abaqaqxyz`, and `abaxyzqaq`. None of these has a non-empty substrings which is a \"$2$-CON string\". So the answer is $0$.\n\n### Constraints\n\n$2\\le k \\le n\\cdot m\\le 10^6;\\ 1\\le m \\le 100$. $a_i$ contains only lowercase English letters.\n\n**In easy version, we ensure that any string in array $\\mathbf a$ contains at least two different letters.**", "locale": "en"}, "zh-CN": {"title": "「Wdcfr-1」CONsecutive and CONcat (easy version)", "background": "", "description": "**在简单版本中，保证数组 $\\mathbf a$ 中的任何字符串至少包含两个不同的字母。**\n\nLily White 正在玩字符串。作为一个妖精，她不擅长复杂的语言。因此，她喜欢只包含一种字母的字符串，她称这样的长度为 $x$ 的字符串为“$x$-CON 字符串”。例如，`qqqq` 是一个“$4$-CON 字符串”，而 `aaab` 不是任何类型的“CON 字符串”。\n\nLily White 组成了一个数组 $a$。它包含 $n$ 个长度为 $m$ 的字符串，她将用来迎接春天。对于 $1,2,\\ldots, n$ 的每一个排列，我们将当前排列记为 $p=\\{p_1,p_2,\\cdots,p_n\\}$。Lily White 按照 $a_{p_1},a_{p_2},\\cdots,a_{p_n}$ 的顺序将数组 $a$ 中的所有字符串连接成一个长度为 $nm$ 的字符串 $s$。\n\n由于她喜欢 $k$-CON 字符串，她想知道由所有 $n!$ 个排列组成的 $s$ 的所有非空子串中“$k$-CON 字符串”的数量之和。由于答案可能非常大，只需输出答案对 $998,244,353$（一个大质数）取模的结果。", "inputFormat": "第一行包含三个整数 $n,m,k$。\n\n接下来有 $n$ 行，每行包含一个长度为 $m$ 的字符串。第 $(i+1)$ 行的字符串表示 $a_i$。", "outputFormat": "输出一个整数，即答案对 $998,244,353$ 取模的结果。", "hint": "### 解释\n\n#### 示例 \\#1\n\n- 对于排列 $1,2,3$，形成的 $s$ 是 `aabbaabaa`，这个字符串中的非空子串没有一个是“$4$-CON 字符串”。\n- 对于排列 $1,3,2$，形成的 $s$ 是 `aabbaabaa`，这个字符串中的非空子串没有一个是“$4$-CON 字符串”。\n- 对于排列 $2,1,3$，形成的 $s$ 是 `baaaabbaa`，这个字符串有一个子串 `aaaa` 是“$4$-CON 字符串”。\n- 对于排列 $2,3,1$，形成的 $s$ 是 `baabaaaab`，这个字符串有一个子串 `aaaa` 是“$4$-CON 字符串”。\n- 对于排列 $3,1,2$，形成的 $s$ 是 `baaaabbaa`，这个字符串有一个子串 `aaaa` 是“$4$-CON 字符串”。\n- 对于排列 $3,2,1$，形成的 $s$ 是 `baabaaaab`，这个字符串有一个子串 `aaaa` 是“$4$-CON 字符串”。\n\n综上所述，答案是 $0+0+1+1+1+1=4$。\n\n#### 示例 \\#2\n\n在所有长度为 $3$ 的全排列中，将有六个不同的 $s$：`xyzqaqaba`，`xyzabaqaq`，`qaqxyzaba`，`qaqabaxyz`，`abaqaqxyz` 和 `abaxyzqaq`。这些中没有一个非空子串是“$2$-CON 字符串”。所以答案是 $0$。\n\n### 约束\n\n$2\\le k \\le n\\cdot m\\le 10^6;\\\\ 1\\le m \\le 100$。$a_i$ 仅包含小写英文字母。\n\n**在简单版本中，我们确保数组 $\\mathbf a$ 中的任何字符串至少包含两个不同的字母。**\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7943", "type": "P", "difficulty": 4, "samples": [["3 3 5\naaa\nbaa\nbaa\n", "4"], ["3 3 2\nxyz\nqaq\naba\n", "0"], ["5 3 2\ncca\ncbb\nacb\nbbb\nacb\n", "600"], ["5 3 5\naba\nbbb\nbbb\naba\nbcb\n", "120"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "枚举"], "title": "「Wdcfr-1」CONsecutive and CONcat (hard version)", "background": "", "description": "Lily White is playing with strings. Being a yousei, she is not capable of complex speech. Thus, she likes strings that only contain one kind of letter, she calls such strings of length $x$ a \"$x$-CON string\". For example, `qqqq` is a \"$4$-CON string\", while `aaab` is not any type of \"CON string\".\n\nLily White composed an array $a$. It contains $n$ strings of length $m$ that she will use to herald spring. For each permutation of $1,2,\\ldots, n$, let us denote current permutation as $p=\\{p_1,p_2,\\cdots,p_n\\}$. Lily White concatenates all the string in array $a$ in the order of $a_{p_1},a_{p_2},\\cdots,a_{p_n}$ into a string $s$ of length $nm$ . \n\nAs she likes $k$-CON strings, she wants to know the sum of the number of \"$k$-CON string\" in all non-empty substrings of $s$ composed by all $n!$ permutations. Since the answer may be enormous, just print the answer taken modulo $998,244,353$ (a large prime).\n", "inputFormat": "The first line contains three integers $n,m,k$.\n\nThen $n$ lines follow, each line contains a string of length $m$. The string in the$(i+1)$-th line represents $a_i$.", "outputFormat": "Print a single integer - the answer taken modulo $998,244,353$.\n", "hint": "### Explanation\n\n#### Sample \\#1\n\n- For permutation $1,2,3$, the formed $s$ is `aaabaabaa`, none on the non-empty substring in this string are \"$5$-CON string\".\n- For permutation $1,3,2$, the formed $s$ is `aaabaabaa`, none on the non-empty substring in this string are \"$5$-CON string\".\n- For permutation $2,1,3$, the formed $s$ is `baaaaabaa`, this string has one substring `aaaaa` which is a \"$5$-CON string\".\n- For permutation $2,3,1$, the formed $s$ is `baabaaaaa`, this string has one substring `aaaaa` which is a \"$5$-CON string\".\n- For permutation $3,1,2$, the formed $s$ is `baaaaabaa`, this string has one substring `aaaaa` which is a \"$5$-CON string\".\n- For permutation $3,2,1$, the formed $s$ is `baabaaaaa`, this string has one substring `aaaaa` which is a \"$5$-CON string\".\n\nIn summary, the answer is $0+0+1+1+1+1=4$.\n\n#### Sample \\#2\n\nIn all of the full permutation of length $3$, there will be six different $s$: `xyzqaqaba`, `xyzabaqaq`, `qaqxyzaba`, `qaqabaxyz`, `abaqaqxyz`, and `abaxyzqaq`. None of these has a non-empty substrings which is a \"$2$-CON string\". So the answer is $0$.\n\n### Constraints\n\n$2\\le k \\le n\\cdot m\\le 10^6;\\ 1\\le m \\le 100$. $a_i$ contains only lowercase English letters.", "locale": "en", "translations": {"en": {"title": "「Wdcfr-1」CONsecutive and CONcat (hard version)", "background": "", "description": "Lily White is playing with strings. Being a yousei, she is not capable of complex speech. Thus, she likes strings that only contain one kind of letter, she calls such strings of length $x$ a \"$x$-CON string\". For example, `qqqq` is a \"$4$-CON string\", while `aaab` is not any type of \"CON string\".\n\nLily White composed an array $a$. It contains $n$ strings of length $m$ that she will use to herald spring. For each permutation of $1,2,\\ldots, n$, let us denote current permutation as $p=\\{p_1,p_2,\\cdots,p_n\\}$. Lily White concatenates all the string in array $a$ in the order of $a_{p_1},a_{p_2},\\cdots,a_{p_n}$ into a string $s$ of length $nm$ . \n\nAs she likes $k$-CON strings, she wants to know the sum of the number of \"$k$-CON string\" in all non-empty substrings of $s$ composed by all $n!$ permutations. Since the answer may be enormous, just print the answer taken modulo $998,244,353$ (a large prime).\n", "inputFormat": "The first line contains three integers $n,m,k$.\n\nThen $n$ lines follow, each line contains a string of length $m$. The string in the$(i+1)$-th line represents $a_i$.", "outputFormat": "Print a single integer - the answer taken modulo $998,244,353$.\n", "hint": "### Explanation\n\n#### Sample \\#1\n\n- For permutation $1,2,3$, the formed $s$ is `aaabaabaa`, none on the non-empty substring in this string are \"$5$-CON string\".\n- For permutation $1,3,2$, the formed $s$ is `aaabaabaa`, none on the non-empty substring in this string are \"$5$-CON string\".\n- For permutation $2,1,3$, the formed $s$ is `baaaaabaa`, this string has one substring `aaaaa` which is a \"$5$-CON string\".\n- For permutation $2,3,1$, the formed $s$ is `baabaaaaa`, this string has one substring `aaaaa` which is a \"$5$-CON string\".\n- For permutation $3,1,2$, the formed $s$ is `baaaaabaa`, this string has one substring `aaaaa` which is a \"$5$-CON string\".\n- For permutation $3,2,1$, the formed $s$ is `baabaaaaa`, this string has one substring `aaaaa` which is a \"$5$-CON string\".\n\nIn summary, the answer is $0+0+1+1+1+1=4$.\n\n#### Sample \\#2\n\nIn all of the full permutation of length $3$, there will be six different $s$: `xyzqaqaba`, `xyzabaqaq`, `qaqxyzaba`, `qaqabaxyz`, `abaqaqxyz`, and `abaxyzqaq`. None of these has a non-empty substrings which is a \"$2$-CON string\". So the answer is $0$.\n\n### Constraints\n\n$2\\le k \\le n\\cdot m\\le 10^6;\\ 1\\le m \\le 100$. $a_i$ contains only lowercase English letters.", "locale": "en"}, "zh-CN": {"title": "「Wdcfr-1」CONsecutive and CONcat (hard version)", "background": "", "description": "Lily White 在玩字符串。作为一个妖精，她不擅长复杂的语言。因此，她喜欢只包含一种字母的字符串，她称这种长度为 $x$ 的字符串为“$x$-CON 字符串”。例如，`qqqq` 是一个“$4$-CON 字符串”，而 `aaab` 不是任何类型的“CON 字符串”。\n\nLily White 组成了一个数组 $a$。它包含 $n$ 个长度为 $m$ 的字符串，她将用来迎接春天。对于 $1,2,\\ldots, n$ 的每一个排列，我们将当前排列记为 $p=\\{p_1,p_2,\\cdots,p_n\\}$。Lily White 按照 $a_{p_1},a_{p_2},\\cdots,a_{p_n}$ 的顺序将数组 $a$ 中的所有字符串连接成一个长度为 $nm$ 的字符串 $s$。\n\n由于她喜欢 $k$-CON 字符串，她想知道由所有 $n!$ 个排列组成的 $s$ 的所有非空子串中“$k$-CON 字符串”的数量之和。由于答案可能非常大，只需输出答案对 $998,244,353$（一个大质数）取模的结果。", "inputFormat": "第一行包含三个整数 $n,m,k$。\n\n接下来有 $n$ 行，每行包含一个长度为 $m$ 的字符串。第 $(i+1)$ 行的字符串表示 $a_i$。", "outputFormat": "输出一个整数，即答案对 $998,244,353$ 取模的结果。", "hint": "### 解释\n\n#### 示例 \\#1\n\n- 对于排列 $1,2,3$，形成的 $s$ 是 `aaabaabaa`，在这个字符串的非空子串中没有“$5$-CON 字符串”。\n- 对于排列 $1,3,2$，形成的 $s$ 是 `aaabaabaa`，在这个字符串的非空子串中没有“$5$-CON 字符串”。\n- 对于排列 $2,1,3$，形成的 $s$ 是 `baaaaabaa`，这个字符串有一个子串 `aaaaa` 是“$5$-CON 字符串”。\n- 对于排列 $2,3,1$，形成的 $s$ 是 `baabaaaaa`，这个字符串有一个子串 `aaaaa` 是“$5$-CON 字符串”。\n- 对于排列 $3,1,2$，形成的 $s$ 是 `baaaaabaa`，这个字符串有一个子串 `aaaaa` 是“$5$-CON 字符串”。\n- 对于排列 $3,2,1$，形成的 $s$ 是 `baabaaaaa`，这个字符串有一个子串 `aaaaa` 是“$5$-CON 字符串”。\n\n综上所述，答案是 $0+0+1+1+1+1=4$。\n\n#### 示例 \\#2\n\n在长度为 $3$ 的所有全排列中，将有六个不同的 $s$：`xyzqaqaba`，`xyzabaqaq`，`qaqxyzaba`，`qaqabaxyz`，`abaqaqxyz` 和 `abaxyzqaq`。这些字符串中没有任何非空子串是“$2$-CON 字符串”。所以答案是 $0$。\n\n### 约束\n\n$2\\le k \\le n\\cdot m\\le 10^6; 1\\le m \\le 100$。$a_i$ 仅包含小写英文字母。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7944", "type": "P", "difficulty": 5, "samples": [["4 4\n1 1\n1 2\n2 2\n3 2\n3 3\n3 4\n4 4\n\n0\n\n1\n\n0\n\n0\n\n1\n\n\n\n\n\n\n\n1\n\n1\n", "\n\n\n\n\n\n\n\n? 2 2\n\n? 2 1\n\n? 3 1\n\n? 3 2\n\n? 4 1\n\n2 1\n2 2\n3 2\n3 1\n4 1\n-1 -1\n? 1 4\n\n? 1 3\n\n1 4\n1 3\n-1 -1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["交互题", "Special Judge", "O2优化"], "title": "「Wdcfr-1」Border of Gensokyo", "background": "", "description": "\n**This is an interactive problem.**\n\n\nRan is helping Yukari to maintain the border of Gensokyo. \n\nThe border of Gensokyo is a $n\\times m$ matrix, where $n$ and $m$ are both even. Unfortunately, due to Moriya Shrine's moving in, there are now $4$ weakened points within the matrix.\n\nTo ease the maintenance work, Ran have already found a path from $(1,1)$ to $(n,m)$, going only down or right. The path separates the four weakened points so that exactly two of them are on either side. She will tell you this path in the input.\n\nNow you need to help Ran maintain the border. You can use the operation `? x y` to ask whether the point $(x,y)$ is weakened. And after the query, Ran will mark the point with blue.\n\nIf, after a query, you have just found out the $k$-th weakened point, and $k$ is even, you will need to construct a simple path from the $(k-1)$-th weakened point to the $k$-th. The path you constructed must pass through and only pass through **all** the points that are marked blue.  Ran will then strengthen these points in the border and recolor them red.\n\nRan does not want to do repetitive work, so you can only ask for points that are white with the `?` query.\n\nNow Ran hopes that you can ask all the \"weakened points\" and finish all the constructions.\n\n### Interaction Protocol\n\nFirst read two integers $n$ and $m$ from standard input.\n\nThen read several points (including start and end points) from standard input, one per line, representing a simple path from $(1,1)$ to $(n,m)$.\n\nThen you can make **unlimited** queries. Print your queries to standard output in the format of `? x y`. You will then receive an integer $p$ from standard input. If $p=1$, it means that the point you asked is indeed weakened; if $p=0$, it means that it is not weakened.\n\nRemember to flush your output, you can use `fflush(stdout);` in C++. Please refer to your programming language's documentation.\n\nOn the $k$-th time ($k$ is even) of receiving the result $p=1$, please output several points (including the two weakened points) in order, one per line, ending with $-1,-1$, so that they represent the simple path from the $(k-1)$-th to the $k$-th weakened point.\n\nYou need to exit your program immediately after finding the fourth weakened point and finishing the construction.\n", "inputFormat": "Refer to \"Interactive Method\".", "outputFormat": "Refer to \"Interactive Method\".", "hint": "### Explanation\n\nThe matrix in the sample is as follows:\n\n```plain\n..XX\nX...\n....\nX...\n```\n\nWhich `X` means a \"weakened point\".\n\n### Constraints\n\n$4\\le n,m\\le100$。", "locale": "en", "translations": {"en": {"title": "「Wdcfr-1」Border of Gensokyo", "background": "", "description": "\n**This is an interactive problem.**\n\n\nRan is helping Yukari to maintain the border of Gensokyo. \n\nThe border of Gensokyo is a $n\\times m$ matrix, where $n$ and $m$ are both even. Unfortunately, due to Moriya Shrine's moving in, there are now $4$ weakened points within the matrix.\n\nTo ease the maintenance work, Ran have already found a path from $(1,1)$ to $(n,m)$, going only down or right. The path separates the four weakened points so that exactly two of them are on either side. She will tell you this path in the input.\n\nNow you need to help Ran maintain the border. You can use the operation `? x y` to ask whether the point $(x,y)$ is weakened. And after the query, Ran will mark the point with blue.\n\nIf, after a query, you have just found out the $k$-th weakened point, and $k$ is even, you will need to construct a simple path from the $(k-1)$-th weakened point to the $k$-th. The path you constructed must pass through and only pass through **all** the points that are marked blue.  Ran will then strengthen these points in the border and recolor them red.\n\nRan does not want to do repetitive work, so you can only ask for points that are white with the `?` query.\n\nNow Ran hopes that you can ask all the \"weakened points\" and finish all the constructions.\n\n### Interaction Protocol\n\nFirst read two integers $n$ and $m$ from standard input.\n\nThen read several points (including start and end points) from standard input, one per line, representing a simple path from $(1,1)$ to $(n,m)$.\n\nThen you can make **unlimited** queries. Print your queries to standard output in the format of `? x y`. You will then receive an integer $p$ from standard input. If $p=1$, it means that the point you asked is indeed weakened; if $p=0$, it means that it is not weakened.\n\nRemember to flush your output, you can use `fflush(stdout);` in C++. Please refer to your programming language's documentation.\n\nOn the $k$-th time ($k$ is even) of receiving the result $p=1$, please output several points (including the two weakened points) in order, one per line, ending with $-1,-1$, so that they represent the simple path from the $(k-1)$-th to the $k$-th weakened point.\n\nYou need to exit your program immediately after finding the fourth weakened point and finishing the construction.\n", "inputFormat": "Refer to \"Interactive Method\".", "outputFormat": "Refer to \"Interactive Method\".", "hint": "### Explanation\n\nThe matrix in the sample is as follows:\n\n```plain\n..XX\nX...\n....\nX...\n```\n\nWhich `X` means a \"weakened point\".\n\n### Constraints\n\n$4\\le n,m\\le100$。", "locale": "en"}, "zh-CN": {"title": "「Wdcfr-1」Border of Gensokyo", "background": "", "description": "**这是一个交互式问题。**\n\nRan 正在帮助 Yukari 维护幻想乡的边界。\n\n幻想乡的边界是一个 $n \\times m$ 的矩阵，其中 $n$ 和 $m$ 都是偶数。不幸的是，由于 Moriya 神社的迁入，矩阵中现在有 4 个薄弱点。\n\n为了简化维护工作，Ran 已经找到了从 $(1,1)$ 到 $(n,m)$ 的一条路径，只能向下或向右走。路径将四个薄弱点分隔开，使得每一侧恰好有两个薄弱点。她将在输入中告诉你这条路径。\n\n现在你需要帮助 Ran 维护边界。你可以使用操作 `? x y` 来询问点 $(x,y)$ 是否是薄弱点。在查询之后，Ran 会将该点标记为蓝色。\n\n如果在一次查询后，你刚刚找到了第 $k$ 个薄弱点，并且 $k$ 是偶数，你需要构造一条从第 $(k-1)$ 个薄弱点到第 $k$ 个薄弱点的简单路径。你构造的路径必须经过且仅经过所有标记为蓝色的点。Ran 然后将这些点在边界上加固并重新着色为红色。\n\nRan 不想做重复的工作，所以你只能用 `?` 查询白色的点。\n\n现在 Ran 希望你能找到所有的“薄弱点”并完成所有的构造。\n\n### 交互协议\n\n首先从标准输入读取两个整数 $n$ 和 $m$。\n\n然后从标准输入读取几个点（包括起点和终点），每行一个，表示从 $(1,1)$ 到 $(n,m)$ 的一条简单路径。\n\n然后你可以进行**无限**次查询。将你的查询以 `? x y` 的格式打印到标准输出。然后你将从标准输入接收一个整数 $p$。如果 $p=1$，表示你询问的点确实是薄弱点；如果 $p=0$，表示它不是薄弱点。\n\n记得刷新你的输出，你可以在 C++ 中使用 `fflush(stdout);`。请参考你的编程语言的文档。\n\n在第 $k$ 次（$k$ 是偶数）接收到结果 $p=1$ 时，请按顺序输出几个点（包括两个薄弱点），每行一个，以 $-1,-1$ 结束，以表示从第 $(k-1)$ 个到第 $k$ 个薄弱点的简单路径。\n\n在找到第四个薄弱点并完成构造后，你需要立即退出程序。", "inputFormat": "参考“交互方法”。", "outputFormat": "参考“交互方法”。", "hint": "### 解释\n\n示例中的矩阵如下：\n\n```plain\n..XX\nX...\n....\nX...\n```\n\n其中 `X` 表示一个“薄弱点”。\n\n### 约束\n\n$4 \\le n,m \\le 100$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7945", "type": "P", "difficulty": 5, "samples": [["3\n0 1 2 3 4 5", "6"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「Wdcfr-1」Yet Another Cirno Game (easy version)", "background": "", "description": "**The only difference between the two versions is whether you have to find a way to get the maximum points.**\n\nCirno drew a graph. This graph contains $4\\cdot n$ nodes, numbered $0$ through $4\\cdot n - 1$. Also:\n\n- For any $0\\le i\\le 3$ and $0 \\le j, k \\lt n$, node $(n\\cdot i + j)$ and node $(n\\cdot i + k)$ are connected.\n- For any $0 \\le i < n$ and $0 \\le j, k \\le 3$, node $(i + n\\cdot j)$ and node $(i + n\\cdot k)$ are connected.\n\nCirno called Daiyousei to come and play with her.\n\nThe rules for this game are as follows:\n\n- Firstly, Cirno chooses $2\\cdot n$ (i.e. half) of the nodes, and she colors them blue. The rest are left red.\n- Then there are $2\\cdot n$ turns: for each turn Cirno first chooses a blue node, and Daiyousei chooses a red node. If those two nodes are connected, Daiyousei gets a point.\n\nTry to maximize the number of points Daiyousei gets.", "inputFormat": "The first line contains an integer $n$. Then one line below, $2\\cdot n$ numbers follow: they are the nodes that Cirno chose.", "outputFormat": "For each test case, output an integer $x$ in a single line, which is the maximum number of points Daiyousei can get.\n\nYou don't have to output anything else in this version.", "hint": "### Explanation\n\nIn the following picture, nodes in matrices are connected to each other. Cirno chose nodes $0,1,2,3,4,5$.\n\nArrows below show a possible way for Daiyousei to get the maximum number of points she can get.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7v3w2cz9.png)\n\n### Constraints\n\n$1\\le n\\le 2\\times 10^6$.", "locale": "en", "translations": {"en": {"title": "「Wdcfr-1」Yet Another Cirno Game (easy version)", "background": "", "description": "**The only difference between the two versions is whether you have to find a way to get the maximum points.**\n\nCirno drew a graph. This graph contains $4\\cdot n$ nodes, numbered $0$ through $4\\cdot n - 1$. Also:\n\n- For any $0\\le i\\le 3$ and $0 \\le j, k \\lt n$, node $(n\\cdot i + j)$ and node $(n\\cdot i + k)$ are connected.\n- For any $0 \\le i < n$ and $0 \\le j, k \\le 3$, node $(i + n\\cdot j)$ and node $(i + n\\cdot k)$ are connected.\n\nCirno called Daiyousei to come and play with her.\n\nThe rules for this game are as follows:\n\n- Firstly, Cirno chooses $2\\cdot n$ (i.e. half) of the nodes, and she colors them blue. The rest are left red.\n- Then there are $2\\cdot n$ turns: for each turn Cirno first chooses a blue node, and Daiyousei chooses a red node. If those two nodes are connected, Daiyousei gets a point.\n\nTry to maximize the number of points Daiyousei gets.", "inputFormat": "The first line contains an integer $n$. Then one line below, $2\\cdot n$ numbers follow: they are the nodes that Cirno chose.", "outputFormat": "For each test case, output an integer $x$ in a single line, which is the maximum number of points Daiyousei can get.\n\nYou don't have to output anything else in this version.", "hint": "### Explanation\n\nIn the following picture, nodes in matrices are connected to each other. Cirno chose nodes $0,1,2,3,4,5$.\n\nArrows below show a possible way for Daiyousei to get the maximum number of points she can get.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7v3w2cz9.png)\n\n### Constraints\n\n$1\\le n\\le 2\\times 10^6$.", "locale": "en"}, "zh-CN": {"title": "「Wdcfr-1」Yet Another Cirno Game (easy version)", "background": "", "description": "**两个版本之间的唯一区别是是否需要找到一种方法来获得最大分数。**\n\n琪露诺画了一张图。这张图包含 $4\\cdot n$ 个节点，编号为 $0$ 到 $4\\cdot n - 1$。此外：\n\n- 对于任何 $0\\le i\\le 3$ 和 $0 \\le j, k < n$，节点 $(n\\cdot i + j)$ 和节点 $(n\\cdot i + k)$ 是连接的。\n- 对于任何 $0 \\le i < n$ 和 $0 \\le j, k \\le 3$，节点 $(i + n\\cdot j)$ 和节点 $(i + n\\cdot k)$ 是连接的。\n\n琪露诺叫来了大妖精和她一起玩。\n\n游戏规则如下：\n\n- 首先，琪露诺选择 $2\\cdot n$（即一半）的节点，并将它们涂成蓝色。其余的节点保持红色。\n- 然后进行 $2\\cdot n$ 回合：每回合中，琪露诺首先选择一个蓝色节点，而大妖精选择一个红色节点。如果这两个节点是连接的，大妖精得一分。\n\n尝试最大化大妖精获得的分数。", "inputFormat": "第一行包含一个整数 $n$。接下来一行有 $2\\cdot n$ 个数字：它们是琪露诺选择的节点。", "outputFormat": "对于每个测试用例，输出一个整数 $x$，表示大妖精可以获得的最大分数。\n\n在这个版本中，你不需要输出其他任何东西。", "hint": "### 解释\n\n在下图中，矩阵中的节点是相互连接的。琪露诺选择了节点 $0,1,2,3,4,5$。\n\n下面的箭头显示了大妖精可以获得的最大分数的一种可能方式。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7v3w2cz9.png)\n\n### 约束\n\n$1\\le n\\le 2\\times 10^6$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7946", "type": "P", "difficulty": 6, "samples": [["3\n0 1 2 3 4 5", "6\n6 7 8 9 10 11"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化"], "title": "「Wdcfr-1」Yet Another Cirno Game (hard version)", "background": "", "description": "**The only difference between the two versions is whether you have to find a way to get the maximum points.**\n\nCirno drew a graph. This graph consists of $4\\cdot n$ nodes, which are numbered $0$ through $4\\cdot n - 1$. Also:\n\n- For $0\\le i\\le 3$ and $0 \\le j, k \\lt n$, node $(n\\cdot i + j)$ and node $(n\\cdot i + k)$ are connected.\n- For $0 \\le i \\le n$ and $0 \\le j, k \\le 3$, node $(i + n\\cdot j)$ and node $(i + n\\cdot k)$ are connected.\n\nCirno called Daiyousei to come and play with her.\n\nThe rules for this game are as follows:\n\n- Firstly, Cirno chooses $2\\cdot n$ (i.e. half) of the nodes, and she colors them blue. The rest are left red.\n- Then there are $2\\cdot n$ turns: for each turn Cirno first chooses a blue node, and Daiyousei chooses a red node. If those two nodes are connected, Daiyousei gets a point.\n\nTry to maximize the number of points Daiyousei gets.", "inputFormat": "In the first line, $n$ is provided.\n\nIn the second line, $n$ numbers follow: they are the nodes that Cirno chose.", "outputFormat": "In the first line output $x$, which is the maximum number of points Daiyousei can get.\n\nThen output $2\\cdot n$ integers. For each node that Cirno chooses, output the corresponding node that Daiyousei responds with. Obviously the order of the chosen nodes doesn't matter. The solution must get the maximum number of points possible.", "hint": "### Explanation\n\nIn the following picture, nodes in matrices are connected to each other. Cirno chose nodes $0,1,2,3,4,5$.\n\nArrows below show a possible way for Daiyousei to get the maximum number of points she can get.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7v3w2cz9.png)\n\n### Constraints\n\n$1\\le n\\le 2\\times 10^6$.", "locale": "en", "translations": {"en": {"title": "「Wdcfr-1」Yet Another Cirno Game (hard version)", "background": "", "description": "**The only difference between the two versions is whether you have to find a way to get the maximum points.**\n\nCirno drew a graph. This graph consists of $4\\cdot n$ nodes, which are numbered $0$ through $4\\cdot n - 1$. Also:\n\n- For $0\\le i\\le 3$ and $0 \\le j, k \\lt n$, node $(n\\cdot i + j)$ and node $(n\\cdot i + k)$ are connected.\n- For $0 \\le i \\le n$ and $0 \\le j, k \\le 3$, node $(i + n\\cdot j)$ and node $(i + n\\cdot k)$ are connected.\n\nCirno called Daiyousei to come and play with her.\n\nThe rules for this game are as follows:\n\n- Firstly, Cirno chooses $2\\cdot n$ (i.e. half) of the nodes, and she colors them blue. The rest are left red.\n- Then there are $2\\cdot n$ turns: for each turn Cirno first chooses a blue node, and Daiyousei chooses a red node. If those two nodes are connected, Daiyousei gets a point.\n\nTry to maximize the number of points Daiyousei gets.", "inputFormat": "In the first line, $n$ is provided.\n\nIn the second line, $n$ numbers follow: they are the nodes that Cirno chose.", "outputFormat": "In the first line output $x$, which is the maximum number of points Daiyousei can get.\n\nThen output $2\\cdot n$ integers. For each node that Cirno chooses, output the corresponding node that Daiyousei responds with. Obviously the order of the chosen nodes doesn't matter. The solution must get the maximum number of points possible.", "hint": "### Explanation\n\nIn the following picture, nodes in matrices are connected to each other. Cirno chose nodes $0,1,2,3,4,5$.\n\nArrows below show a possible way for Daiyousei to get the maximum number of points she can get.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7v3w2cz9.png)\n\n### Constraints\n\n$1\\le n\\le 2\\times 10^6$.", "locale": "en"}, "zh-CN": {"title": "「Wdcfr-1」Yet Another Cirno Game (hard version)", "background": "", "description": "**两个版本之间的唯一区别是你是否需要找到一种方法来获得最大分数。**\n\nCirno 画了一张图。这张图由 $4\\cdot n$ 个节点组成，节点编号为 $0$ 到 $4\\cdot n - 1$。此外：\n\n- 对于 $0\\le i\\le 3$ 和 $0 \\le j, k < n$，节点 $(n\\cdot i + j)$ 和节点 $(n\\cdot i + k)$ 是相连的。\n- 对于 $0 \\le i \\le n$ 和 $0 \\le j, k \\le 3$，节点 $(i + n\\cdot j)$ 和节点 $(i + n\\cdot k)$ 是相连的。\n\nCirno 叫来了 Daiyousei 和她一起玩。\n\n游戏规则如下：\n\n- 首先，Cirno 选择 $2\\cdot n$（即一半）的节点，并将它们涂成蓝色。其余的节点保持红色。\n- 然后有 $2\\cdot n$ 轮：每轮 Cirno 首先选择一个蓝色节点，Daiyousei 选择一个红色节点。如果这两个节点是相连的，Daiyousei 得到一分。\n\n试图最大化 Daiyousei 能得到的分数。", "inputFormat": "第一行给出 $n$。\n\n第二行跟随 $n$ 个数字：它们是 Cirno 选择的节点。", "outputFormat": "第一行输出 $x$，即 Daiyousei 能得到的最大分数。\n\n然后输出 $2\\cdot n$ 个整数。对于 Cirno 选择的每个节点，输出 Daiyousei 对应选择的节点。显然，选择的节点顺序无关紧要。解必须获得可能的最大分数。", "hint": "### 解释\n\n在下图中，矩阵中的节点是相互连接的。Cirno 选择了节点 $0,1,2,3,4,5$。\n\n下面的箭头显示了 Daiyousei 获得她能得到的最大分数的一种可能方式。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7v3w2cz9.png)\n\n### 约束\n\n$1\\le n\\le 2\\times 10^6$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7947", "type": "P", "difficulty": 3, "samples": [["67 68", "2\n1 67"], ["100 1", "-1"], ["80 16", "6\n1 1 4 5 1 4"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化"], "title": "[✗✓OI R1] 铝锤制作", "background": "DPair 打算用米德拉什给大家带来笑容。\n\n因为 Lillia 不知道什么是米德拉什，所以打算阻止 Ta。  \n\n为了阻止 DPair，你需要制作一个小铝锤。\n\n如果你不知道如何制作小铝锤，你可以参考题目下方给出的视频。\n\n或者，你也可以选择做这场月赛的签到题。", "description": "构造一个正整数数列 $a$，使 $a$ 中所有元素之积为 $n$，所有元素之和为 $k$。如果不存在这样的数列，输出 `-1`。", "inputFormat": "一行两个正整数 $n,k$。", "outputFormat": "第一行一个整数 $m$，代表这个数列的长度。  \n接下来一行 $m$ 个正整数 $a_i$，代表这个数列。要求 $1\\leq m \\leq 1000$，$1\\leq a_i \\leq 1000$。  \n特别的，如果没有符合要求的数列，直接输出 `-1`。\n\n**本题采用 Special Judge。如果有多种答案，输出任意一种即可。**", "hint": "**【样例解释】**\n\n对于样例一，显然有 $1\\times67=67,1+67=68$。  \n对于样例二，可以证明没有合法的解。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$1\\leq n,k \\leq 3$；  \n对于 $30\\%$ 的数据，$1\\leq n,k \\leq 10$；  \n另有 $10\\%$ 的数据，$n=k$；  \n对于 $100\\%$ 的数据，$1\\leq n,k \\leq 100$。\n\n![](bilibili:av498389435)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[✗✓OI R1] 铝锤制作", "background": "DPair 打算用米德拉什给大家带来笑容。\n\n因为 Lillia 不知道什么是米德拉什，所以打算阻止 Ta。  \n\n为了阻止 DPair，你需要制作一个小铝锤。\n\n如果你不知道如何制作小铝锤，你可以参考题目下方给出的视频。\n\n或者，你也可以选择做这场月赛的签到题。", "description": "构造一个正整数数列 $a$，使 $a$ 中所有元素之积为 $n$，所有元素之和为 $k$。如果不存在这样的数列，输出 `-1`。", "inputFormat": "一行两个正整数 $n,k$。", "outputFormat": "第一行一个整数 $m$，代表这个数列的长度。  \n接下来一行 $m$ 个正整数 $a_i$，代表这个数列。要求 $1\\leq m \\leq 1000$，$1\\leq a_i \\leq 1000$。  \n特别的，如果没有符合要求的数列，直接输出 `-1`。\n\n**本题采用 Special Judge。如果有多种答案，输出任意一种即可。**", "hint": "**【样例解释】**\n\n对于样例一，显然有 $1\\times67=67,1+67=68$。  \n对于样例二，可以证明没有合法的解。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$1\\leq n,k \\leq 3$；  \n对于 $30\\%$ 的数据，$1\\leq n,k \\leq 10$；  \n另有 $10\\%$ 的数据，$n=k$；  \n对于 $100\\%$ 的数据，$1\\leq n,k \\leq 100$。\n\n![](bilibili:av498389435)", "locale": "zh-CN"}}}
{"pid": "P7948", "type": "P", "difficulty": 3, "samples": [["5\n9 9\n19 99 63 39 72 46 97 38 68 \n0 6 4 0 7 1 0 3 6 \n6 8\n88 62 48 50 8 47 \n0 6 1 5 2 2 6 1 \n6 5\n33 3 54 17 26 64 \n87 89 92 70 59 \n18 19\n71 52 77 38 12 34 82 14 57 39 91 7 56 86 35 68 38 14 \n9 9 1 5 1 3 4 5 6 1 6 0 3 0 2 1 3 5 8 \n10 15\n4 77 78 76 5 19 98 94 77 81 \n17 43 4 86 2 91 85 4 81 74 44 16 21 69 32 \n", "1 2 2 1 2 2 1 2 2\n1 1 1 1 1 1 1 1\n6 6 6 6 6\n4 4 1 3 1 2 2 3 3 1 3 1 2 1 1 1 2 3 4\n7 7 2 10 2 10 10 2 10 10 7 7 7 10 7\n"], ["1\n5 1\n20 0 0 0 0\n5", "5"]], "limits": {"time": [300, 300, 800, 800, 800, 800, 800, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "[✗✓OI R1] 前方之风", "background": ">「不错的恶意。」  \n> 女性呵呵笑道。  \n>「但是，如果向我发出恶意，你可是会死哦？」\n\n你不知道什么动作会被算作发出恶意，所以你决定做一道题来分散自己的注意力。", "description": "给出一个长度为 $n$ 的序列 $a$ 和 $q$ 个询问，第 $i$ 个询问给出 $k_i$。对于每次询问，你需要进行以下操作：\n1. 求出剩下的数的平均数 $\\mathit{avg}$。\n2. 将剩下的数中 $<\\mathit{avg}-k_i$ 的数删去。\n3. 重复以上两个步骤直到所有数都不会被删去。\n4. 输出最后会剩下几个数。\n\n**注意：询问之间是独立的，也就是说，不会真的删去那些数。**", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据的数量。  \n对于每一组数据，第一行两个整数 $n,q$，表示数字个数和询问数量。  \n接下来一行 $n$ 个整数，第 $i$ 个整数表示 $a_i$。  \n接下来一行 $q$ 个整数，第 $i$ 个整数表示 $k_i$。", "outputFormat": "输出共 $T$ 行，每行输出 $q$ 个整数，第 $i$ 个数表示第 $i$ 次询问最终会剩下几个数。", "hint": "**【样例解释】**\n\n对于第一组样例，当 $k=0$ 时，显然只会留下 $99$。  \n当 $k=6$ 时，删除数的步骤如下：\n- 平均数为 $60\\dfrac{1}{9}$，留下 $99,63,72,97,68$。\n- 平均数为 $79.8$，留下 $99,97$。\n- 平均数为 $98$，停止删除。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,q \\le 10^5$，$1\\le T \\le 10$，$0 \\le a_i,k_i \\le 10^9$。\n\n| subtask | 特殊数据范围 | 分数 |  时间限制\n| :----------: | :----------: | :----------: |  :----------: |\n| 1 | $n,q \\le 200$ | 20 |   300ms \n| 2 | $n,q \\le 2000$ | 30  | 300ms\n| 3 |  | 50 | 800ms|\n\n>「不错的恶意。」  \n> 女性呵呵笑道。  \n>「而且你运气很不错，如果放在以前，你早就死了。」\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6icoj36r.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[✗✓OI R1] 前方之风", "background": ">「不错的恶意。」  \n> 女性呵呵笑道。  \n>「但是，如果向我发出恶意，你可是会死哦？」\n\n你不知道什么动作会被算作发出恶意，所以你决定做一道题来分散自己的注意力。", "description": "给出一个长度为 $n$ 的序列 $a$ 和 $q$ 个询问，第 $i$ 个询问给出 $k_i$。对于每次询问，你需要进行以下操作：\n1. 求出剩下的数的平均数 $\\mathit{avg}$。\n2. 将剩下的数中 $<\\mathit{avg}-k_i$ 的数删去。\n3. 重复以上两个步骤直到所有数都不会被删去。\n4. 输出最后会剩下几个数。\n\n**注意：询问之间是独立的，也就是说，不会真的删去那些数。**", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据的数量。  \n对于每一组数据，第一行两个整数 $n,q$，表示数字个数和询问数量。  \n接下来一行 $n$ 个整数，第 $i$ 个整数表示 $a_i$。  \n接下来一行 $q$ 个整数，第 $i$ 个整数表示 $k_i$。", "outputFormat": "输出共 $T$ 行，每行输出 $q$ 个整数，第 $i$ 个数表示第 $i$ 次询问最终会剩下几个数。", "hint": "**【样例解释】**\n\n对于第一组样例，当 $k=0$ 时，显然只会留下 $99$。  \n当 $k=6$ 时，删除数的步骤如下：\n- 平均数为 $60\\dfrac{1}{9}$，留下 $99,63,72,97,68$。\n- 平均数为 $79.8$，留下 $99,97$。\n- 平均数为 $98$，停止删除。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,q \\le 10^5$，$1\\le T \\le 10$，$0 \\le a_i,k_i \\le 10^9$。\n\n| subtask | 特殊数据范围 | 分数 |  时间限制\n| :----------: | :----------: | :----------: |  :----------: |\n| 1 | $n,q \\le 200$ | 20 |   300ms \n| 2 | $n,q \\le 2000$ | 30  | 300ms\n| 3 |  | 50 | 800ms|\n\n>「不错的恶意。」  \n> 女性呵呵笑道。  \n>「而且你运气很不错，如果放在以前，你早就死了。」\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6icoj36r.png)", "locale": "zh-CN"}}}
{"pid": "P7949", "type": "P", "difficulty": 6, "samples": [["4 3", "1\n0 14 3 13 6 8 5 11 12 2 15 1 10 4 9 7"], ["4 2", "0"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化"], "title": "[✗✓OI R1] 左方之地", "background": "\n后记中将会详细描述帅神左方之地为何能成为「魔禁六帅」之首。\n\n如果你很奇怪题目名称里面为什么没有前方之风，那你可能应该去看看 div.2。\n\n但在此之前，你需要做一道构造题。\n", "description": "给你一个自然数 $n$ 和一个自然数参数 $k$，你需要构造一个长度为 $2^n$ 的序列 $a$，满足 $[0,2^n)$ 间的所有整数恰好出现一次，并且 $\\forall i\\in[2,2^n]$，$\\operatorname{popcount}(a_i \\oplus a_{i-1})=k$。  \n其中 $\\operatorname{popcount}(x)$ 表示 $x$ 在二进制下 $1$ 的个数，$\\oplus$ 表示[按位异或](https://oi-wiki.org/math/bit/#_1)运算。\n\n若有解则输出 `1` 并输出这个序列，否则输出 `0`。", "inputFormat": "一行两个整数 $n,k$，意义同题目描述。", "outputFormat": "第一行输出一个整数 `0` 或者 `1`，其中 `0` 代表不存在这样的序列，而 `1` 代表存在这样的序列。  \n如果第一行输出的是 `1`，接下来一行输出 $2^n$ 个整数，表示你构造的序列。如果有多个合法的序列，输出任意一个。", "hint": "**本题采用 Special Judge，子任务评测**。\n\n对于 $100\\%$ 的数据，保证 $1\\le n, k \\le 20$。\n\n| 子任务编号 | $n$     | $k$     | 子任务总分 |依赖子任务|\n| :--------: | :-----: | :-----: | :-------: | :-------: |\n| 0   | $\\le 4$ | $\\le 4$ | 5        ||\n| 1   | $\\le 8$ | $\\le 8$ | 25       |Subtask 0|\n| 2   |         | $=1$    | 10       ||\n| 3   |  | $=n-1$  | 15       ||\n| 4   |         |         | 45       |Subtask 0~3|\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lipqunc4.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[✗✓OI R1] 左方之地", "background": "\n后记中将会详细描述帅神左方之地为何能成为「魔禁六帅」之首。\n\n如果你很奇怪题目名称里面为什么没有前方之风，那你可能应该去看看 div.2。\n\n但在此之前，你需要做一道构造题。\n", "description": "给你一个自然数 $n$ 和一个自然数参数 $k$，你需要构造一个长度为 $2^n$ 的序列 $a$，满足 $[0,2^n)$ 间的所有整数恰好出现一次，并且 $\\forall i\\in[2,2^n]$，$\\operatorname{popcount}(a_i \\oplus a_{i-1})=k$。  \n其中 $\\operatorname{popcount}(x)$ 表示 $x$ 在二进制下 $1$ 的个数，$\\oplus$ 表示[按位异或](https://oi-wiki.org/math/bit/#_1)运算。\n\n若有解则输出 `1` 并输出这个序列，否则输出 `0`。", "inputFormat": "一行两个整数 $n,k$，意义同题目描述。", "outputFormat": "第一行输出一个整数 `0` 或者 `1`，其中 `0` 代表不存在这样的序列，而 `1` 代表存在这样的序列。  \n如果第一行输出的是 `1`，接下来一行输出 $2^n$ 个整数，表示你构造的序列。如果有多个合法的序列，输出任意一个。", "hint": "**本题采用 Special Judge，子任务评测**。\n\n对于 $100\\%$ 的数据，保证 $1\\le n, k \\le 20$。\n\n| 子任务编号 | $n$     | $k$     | 子任务总分 |依赖子任务|\n| :--------: | :-----: | :-----: | :-------: | :-------: |\n| 0   | $\\le 4$ | $\\le 4$ | 5        ||\n| 1   | $\\le 8$ | $\\le 8$ | 25       |Subtask 0|\n| 2   |         | $=1$    | 10       ||\n| 3   |  | $=n-1$  | 15       ||\n| 4   |         |         | 45       |Subtask 0~3|\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lipqunc4.png)", "locale": "zh-CN"}}}
{"pid": "P7950", "type": "P", "difficulty": 5, "samples": [["3\n2 6\n3 5\n4 7", "35\n45\n336"], ["5\n182565 710825096\n429580 541341177\n741770 757408347\n461909 941427258\n114514 1919810\n", "487324711\n256967112\n352532743\n962265551\n926494516\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "组合数学"], "title": "[✗✓OI R1] 后方之水", "background": "这个题目没有背景，因为我是圣人的同时还是神之右席。", "description": "定义一次石子合并的过程如下：有一排 $n$ 堆石子，每一堆有 $a_i(a_i\\ge1)$ 个。每次你可以选择相邻的两堆石子合并，设个数分别为 $x,y$，则你会得到一堆 $(x+y)$ 个石子，同时你要付出 $xy$ 的代价。最后要把所有石子合并成一堆。记 $f(a_1,\\ldots,a_n)$ 为合并这些石子的最小代价。\n\n给出石子总数 $S$，求\n$$ \\sum_{\\sum a_i=S}f(a_1,\\ldots,a_n) $$\n答案对 $998244353$ 取模。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据的数量。  \n接下来 $T$ 行，每行两个整数，分别为 $n,S$。", "outputFormat": "$T$ 行，每行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**【样例解释】**\n\n对第一个样例的第一组数据解释：  \n划分有 $(1,5),(2,4),(3,3),(4,2),(5,1)$，共 $5$ 种。  \n答案为 $1\\times 5 + 2 \\times 4 + 3 \\times 3 + 4 \\times 2 + 5 \\times 1 = 35$。\n\n**【数据范围】**\n\n| 测试点编号 |    $n$    |    $S$    \n| :--------: | :-------: | :-------: | \n| 1,2 |  $\\le15$  |  $\\le15$  |\n| 3,4 |  $\\le40$  |  $\\le40$  |\n| 5,6,7 |  $\\le70$  |  $\\le70$  | \n| 8,9 | $\\le200$  | $\\le200$  | \n| 10,11 | $\\le2000$ | $\\le2000$ | \n| 12,13,14 | $\\le10^6$ | $\\le10^6$ | \n| 15 |   $=2$    | $\\le10^9$ | \n| 16,17,18 | $\\le2000$ | $\\le10^9$ | \n| 19~25 | $\\le10^6$ | $\\le10^9$ |\n\n对于 $100\\%$ 的数据，有 $1\\le T\\le5$，$1\\le n\\le10^6$，$1\\le S\\le10^9$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/am5zu5e6.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[✗✓OI R1] 后方之水", "background": "这个题目没有背景，因为我是圣人的同时还是神之右席。", "description": "定义一次石子合并的过程如下：有一排 $n$ 堆石子，每一堆有 $a_i(a_i\\ge1)$ 个。每次你可以选择相邻的两堆石子合并，设个数分别为 $x,y$，则你会得到一堆 $(x+y)$ 个石子，同时你要付出 $xy$ 的代价。最后要把所有石子合并成一堆。记 $f(a_1,\\ldots,a_n)$ 为合并这些石子的最小代价。\n\n给出石子总数 $S$，求\n$$ \\sum_{\\sum a_i=S}f(a_1,\\ldots,a_n) $$\n答案对 $998244353$ 取模。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据的数量。  \n接下来 $T$ 行，每行两个整数，分别为 $n,S$。", "outputFormat": "$T$ 行，每行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**【样例解释】**\n\n对第一个样例的第一组数据解释：  \n划分有 $(1,5),(2,4),(3,3),(4,2),(5,1)$，共 $5$ 种。  \n答案为 $1\\times 5 + 2 \\times 4 + 3 \\times 3 + 4 \\times 2 + 5 \\times 1 = 35$。\n\n**【数据范围】**\n\n| 测试点编号 |    $n$    |    $S$    \n| :--------: | :-------: | :-------: | \n| 1,2 |  $\\le15$  |  $\\le15$  |\n| 3,4 |  $\\le40$  |  $\\le40$  |\n| 5,6,7 |  $\\le70$  |  $\\le70$  | \n| 8,9 | $\\le200$  | $\\le200$  | \n| 10,11 | $\\le2000$ | $\\le2000$ | \n| 12,13,14 | $\\le10^6$ | $\\le10^6$ | \n| 15 |   $=2$    | $\\le10^9$ | \n| 16,17,18 | $\\le2000$ | $\\le10^9$ | \n| 19~25 | $\\le10^6$ | $\\le10^9$ |\n\n对于 $100\\%$ 的数据，有 $1\\le T\\le5$，$1\\le n\\le10^6$，$1\\le S\\le10^9$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/am5zu5e6.png)", "locale": "zh-CN"}}}
{"pid": "P7951", "type": "P", "difficulty": 7, "samples": [["3\n7 6\n8 6 0 6 1 1 10 \n5 6 2 9 1 2 7 \n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 6\n8 6 0 6 1 0 11 \n5 6 2 9 1 2 7 \n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 6\n8 6 0 6 1 1 10 \n5 6 2 9 1 2 6 \n1 2\n2 3\n3 4\n4 5\n5 6\n6 7", "Yes\n5\n7 6 5 -3\n6 5 4 -5\n5 4 3 -7\n4 3 2 -6\n3 2 1 -3\nNo\nNo\n"], ["2\n6 6\n10 -3 4 21 -2 11 \n4 4 8 8 8 9 \n1 2\n2 3\n3 4\n4 5\n5 6\n6 1\n6 6\n10 -3 4 21 -2 11 \n4 4 8 8 9 8 \n1 2\n2 3\n3 4\n4 5\n5 6\n6 1", "Yes\n6\n6 1 2 6\n1 2 3 1\n2 3 4 3\n3 4 5 9\n4 5 6 2\n5 6 1 5\nNo\n"], ["1\n6 9\n7 5 68 16 2 45\n42 11 42 17 14 17\n1 3\n1 4\n1 6\n1 5\n1 2\n2 5\n2 3\n4 6\n5 6", "Yes\n10\n1 4 6 1\n1 6 4 -6\n2 1 4 -9\n1 3 2 -17\n5 1 4 25\n2 1 6 32\n1 6 5 33\n4 1 3 39\n4 6 5 -46\n3 1 6 -99\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化"], "title": "[✗✓OI R1] 右方之火", "background": "> 「区区二十亿，区区两千年，根本就不够。」  \n> 「本大爷所拥有的力量可比你想象的还多哦。」\n\n你打不过右方之火。    \n但是为了证明你的想象力很丰富，你要做一道构造题。", "description": "你有一个 $n$ 个点 $m$ 条边的无向连通图，每个点有一个初始权值 $a_i$ 以及一个目标权值 $b_i$。现在你可以对这张图进行这样的操作：\n- 选择一个整数 $c$，需要满足 $|c| \\le 10^{18}$；\n- 选一条点数为 $3$，边数为 $2$ 的链；\n- 使得中间点的权值减去 $2c$，另外两个点的权值各加上 $c$。 \n\n问是否可以进行若干次操作使得最后每个点的权值都为 $b_i$。如果可以，你需要输出方案，操作次数不能超过 $4n$。\n\n**注意 $c$ 可以为负数。**", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个正整数 $T$ ，表示测试数据的数量。  \n对于每组数据，第一行两个正整数 $n,m$，分别表示点数和边数。  \n接下来两行，每行各 $n$ 个正整数，表示初始权值 $a_i$ 和目标权值 $b_i$。  \n接下来 $m$ 行，每行两个整数 $u,v$，表示 $u$ 号点和 $v$ 号点之间有一条边，保证图连通，没有自环和重边。", "outputFormat": "对于每组数据，第一行输出一个字符串，若能够从初始权值变为目标权值，输出 `Yes` ，否则输出 `No`。**输出 `Yes` 和 `No` 的这一行不要有其他奇怪的字符，不然可能会被 checker 判成错误。**    \n第二行输出一个整数 $k(k\\le4n)$，表示构造方案共有 $k$ 步。    \n接下来 $k$ 行，每行四个整数 $x,y,z,c$ 满足 $1 \\le x,y,z \\le n$，$|c| \\le 10^{18}$，$(x,y),(y,z)\\in E$，表示 $a_x \\gets a_x+c,a_y \\gets a_y-2c,a_z \\gets a_z+c$。\n\n**本题采用 Special Judge。如果有多种答案，输出任意一种即可。**", "hint": "**本题采用多组测试数据，子任务评测。**\n\n对于 $100\\%$ 的数据，满足 $1\\le T \\leq 5 \\times 10^4$，$3 \\le n \\le 5 \\times 10^5$，$n-1 \\le m \\le 5 \\times 10^5$，$\\sum n,\\sum m \\leq 5\\times 10^5$，$|a_i|,|b_i| \\leq 10^7$。\n\n| subtask | $n,m,T$ | 特殊性质 | 分数\n| :----------: | :----------: | :-----------: | :-----------: |\n| 1 | $n,m\\le 20$，$T \\le 5$ | 无 | 10 |\n| 2 | $m=n-1$ | 保证第 $i$ 条边连接 $i$ 和 $(i+1)$ 号点 | 5 |\n| 3 | $m=n-1$ | 保证第 $i$ 条边连接 $1$ 和 $(i+1)$ 号点 | 5 |\n| 4 | $m=n-1$ | 无 | 10 |\n| 5 | $m=n$ | 保证图是一个环 | 10 |\n| 6 | $n,m\\le 200,T \\le 5$ | 无 | 10 |\n| 7 | $ n,m\\le 2000,T \\le 5$ | 无 | 20 |\n| 8 |  | 无 | 30 |\n\n**温馨提示：对于部分数据点 $T \\le 5$ 因此数据比较难造，看到只 WA 了少数几个点并不代表你的算法没有问题，请仔细思考算法的正确性。**  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bznsetls.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[✗✓OI R1] 右方之火", "background": "> 「区区二十亿，区区两千年，根本就不够。」  \n> 「本大爷所拥有的力量可比你想象的还多哦。」\n\n你打不过右方之火。    \n但是为了证明你的想象力很丰富，你要做一道构造题。", "description": "你有一个 $n$ 个点 $m$ 条边的无向连通图，每个点有一个初始权值 $a_i$ 以及一个目标权值 $b_i$。现在你可以对这张图进行这样的操作：\n- 选择一个整数 $c$，需要满足 $|c| \\le 10^{18}$；\n- 选一条点数为 $3$，边数为 $2$ 的链；\n- 使得中间点的权值减去 $2c$，另外两个点的权值各加上 $c$。 \n\n问是否可以进行若干次操作使得最后每个点的权值都为 $b_i$。如果可以，你需要输出方案，操作次数不能超过 $4n$。\n\n**注意 $c$ 可以为负数。**", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个正整数 $T$ ，表示测试数据的数量。  \n对于每组数据，第一行两个正整数 $n,m$，分别表示点数和边数。  \n接下来两行，每行各 $n$ 个正整数，表示初始权值 $a_i$ 和目标权值 $b_i$。  \n接下来 $m$ 行，每行两个整数 $u,v$，表示 $u$ 号点和 $v$ 号点之间有一条边，保证图连通，没有自环和重边。", "outputFormat": "对于每组数据，第一行输出一个字符串，若能够从初始权值变为目标权值，输出 `Yes` ，否则输出 `No`。**输出 `Yes` 和 `No` 的这一行不要有其他奇怪的字符，不然可能会被 checker 判成错误。**    \n第二行输出一个整数 $k(k\\le4n)$，表示构造方案共有 $k$ 步。    \n接下来 $k$ 行，每行四个整数 $x,y,z,c$ 满足 $1 \\le x,y,z \\le n$，$|c| \\le 10^{18}$，$(x,y),(y,z)\\in E$，表示 $a_x \\gets a_x+c,a_y \\gets a_y-2c,a_z \\gets a_z+c$。\n\n**本题采用 Special Judge。如果有多种答案，输出任意一种即可。**", "hint": "**本题采用多组测试数据，子任务评测。**\n\n对于 $100\\%$ 的数据，满足 $1\\le T \\leq 5 \\times 10^4$，$3 \\le n \\le 5 \\times 10^5$，$n-1 \\le m \\le 5 \\times 10^5$，$\\sum n,\\sum m \\leq 5\\times 10^5$，$|a_i|,|b_i| \\leq 10^7$。\n\n| subtask | $n,m,T$ | 特殊性质 | 分数\n| :----------: | :----------: | :-----------: | :-----------: |\n| 1 | $n,m\\le 20$，$T \\le 5$ | 无 | 10 |\n| 2 | $m=n-1$ | 保证第 $i$ 条边连接 $i$ 和 $(i+1)$ 号点 | 5 |\n| 3 | $m=n-1$ | 保证第 $i$ 条边连接 $1$ 和 $(i+1)$ 号点 | 5 |\n| 4 | $m=n-1$ | 无 | 10 |\n| 5 | $m=n$ | 保证图是一个环 | 10 |\n| 6 | $n,m\\le 200,T \\le 5$ | 无 | 10 |\n| 7 | $ n,m\\le 2000,T \\le 5$ | 无 | 20 |\n| 8 |  | 无 | 30 |\n\n**温馨提示：对于部分数据点 $T \\le 5$ 因此数据比较难造，看到只 WA 了少数几个点并不代表你的算法没有问题，请仔细思考算法的正确性。**  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bznsetls.png)", "locale": "zh-CN"}}}
{"pid": "P7952", "type": "P", "difficulty": 7, "samples": [["6 6\n1 1 4 5 1 4\n1 2 2 4 1\n1 2\n1 1\n2 4\n1 2\n2 2\n1 1", "5\n5\n4\n5"], ["15 12\n512902574 823918122 595349487 580400545 453562767 72015781 850655655 442513356 619194214 644523811 935104539 371670625 477236621 785497862 282980318 \n1 2 2 1 2 6 2 2 4 9 6 4 12 1 \n2 5\n2 1\n2 1\n2 4\n2 15\n1 2\n1 3\n2 2\n2 7\n1 1\n1 2\n1 6", "3279191251\n0\n2309473383\n785497862\n0\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "[✗✓OI R1] 天动万象", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/rxbh6s4b.png)", "description": "帝君给了你一棵以 $1$ 为根的有根树，每个点有一个点权 $a_i$，要求支持以下几种操作：\n\n+ $\\texttt{1 u}$ 表示查询以 $u$ 为根的子树的最大值。\n+ $\\texttt{2 u}$ 表示将 $u$ 为根的子树内每一个节点的权值 **同时变为** 其所有 **儿子** 的权值之和，即对这棵子树执行 $\\forall x \\in \\operatorname{subtree}(u), a_x\\gets \\sum_{y\\in \\operatorname{son}(x)}a_y$。其中 **同时变为** 的意思是「某个点操作时认为其儿子停留在这次操作未进行前的状态」。", "inputFormat": "第一行两个正整数 $n,q$ 表示树的大小和询问组数。   \n第二行 $n$ 个正整数，第 $i$ 个数表示表示第 $i$ 个点的初始点权 $a_i$。  \n第三行 $(n-1)$ 个整数，其中第 $i$ 个整数 $\\mathit{fa}_{i+1}$ 表示第 $(i+1)$ 个节点的父亲编号。  \n接下来 $q$ 行，每行两个整数表示一次操作，具体格式见「题目描述」。", "outputFormat": "对于每次 $\\texttt{1}$ 操作输出一行一个整数表示答案。", "hint": "**【样例解释】**  \n\n修改前每个点的权值分别为 $1,1,4,5,1,4$。  \n第一次修改后变为 $1,1,4,1,0,4$。   \n第二次修改后变为 $1,5,0,0,0,4$。  \n\n[更直观的图片](https://www.luogu.com.cn/paste/blqun4u8)\n\n**【数据范围】**  \n\n**本题数据量较大，请注意常数优化。**\n\n对于 $100\\%$ 的数据，满足 $1\\le n, q \\le 10^6$，$1 \\le u \\le n$，$0 \\le a_i \\le 10^9$，$\\mathit{fa}_i < i$。\n\n以下是子任务（留空则表示无特殊性质），你必须通过一个子任务中的所有测试点以及该子任务依赖的所有测试点，才能获得这个子任务的分数：\n\n| 子任务编号 | $n, q$             | 子任务总分 | 特殊性质 | 依赖子任务 |\n| :--------: | :----------------: | :------: | :------: | :--------: |\n| 0   | $\\le 5\\times 10^3$ | 3        | E        |            |\n| 1   | $\\le 10^5$         | 6        | A, B     |            |\n| 2   |                    | 8        | C        |            |\n| 3   |                    | 4        | D        |            |\n| 4   |                    | 13       | E        | Subtask0   |\n| 5   |                    | 36       | B        | Subtask1   |\n| 6   |                    | 30       |          | Subtask0~5 |\n\n\n特殊性质：  \n\n+ 对于满足特殊性质 A 的测试点，保证每次 $1$ 操作 $u=1$。  \n+ 对于满足特殊性质 B 的测试点，保证每次 $2$ 操作 $u=1$。  \n+ 对于满足特殊性质 C 的测试点，保证对于所有节点 $i$， 满足 $\\mathit{fa}_i=i-1$，换句话说树的形态是一条链。  \n+ 对于满足特殊性质 D 的测试点，保证对于所有节点 $i$， 满足 $\\mathit{fa}_i=1$，换句话说树的形态是一个菊花。  \n+ 对于满足特殊性质 E 的测试点，保证数据随机，这里的数据随机指 $\\texttt{1}$ 操作和 $\\texttt{2}$ 操作等概率出现，$u$ 在 $[1, n]$ 内等概率随机，$\\mathit{fa}_i$ 在 $[1, i - 1]$ 内等概率随机。\n\n**提示：由于出题人很懒而且洛谷传不了很多数据点，因此本题数据可能较弱，而且为了避免赛事评测机压力导致的运行时间增加，本题放宽了时限，因此欢迎大家尝试用奇怪的乱搞通过本题。**\n\n> 只愿荡涤四方，护得浮世一隅。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[✗✓OI R1] 天动万象", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/rxbh6s4b.png)", "description": "帝君给了你一棵以 $1$ 为根的有根树，每个点有一个点权 $a_i$，要求支持以下几种操作：\n\n+ $\\texttt{1 u}$ 表示查询以 $u$ 为根的子树的最大值。\n+ $\\texttt{2 u}$ 表示将 $u$ 为根的子树内每一个节点的权值 **同时变为** 其所有 **儿子** 的权值之和，即对这棵子树执行 $\\forall x \\in \\operatorname{subtree}(u), a_x\\gets \\sum_{y\\in \\operatorname{son}(x)}a_y$。其中 **同时变为** 的意思是「某个点操作时认为其儿子停留在这次操作未进行前的状态」。", "inputFormat": "第一行两个正整数 $n,q$ 表示树的大小和询问组数。   \n第二行 $n$ 个正整数，第 $i$ 个数表示表示第 $i$ 个点的初始点权 $a_i$。  \n第三行 $(n-1)$ 个整数，其中第 $i$ 个整数 $\\mathit{fa}_{i+1}$ 表示第 $(i+1)$ 个节点的父亲编号。  \n接下来 $q$ 行，每行两个整数表示一次操作，具体格式见「题目描述」。", "outputFormat": "对于每次 $\\texttt{1}$ 操作输出一行一个整数表示答案。", "hint": "**【样例解释】**  \n\n修改前每个点的权值分别为 $1,1,4,5,1,4$。  \n第一次修改后变为 $1,1,4,1,0,4$。   \n第二次修改后变为 $1,5,0,0,0,4$。  \n\n[更直观的图片](https://www.luogu.com.cn/paste/blqun4u8)\n\n**【数据范围】**  \n\n**本题数据量较大，请注意常数优化。**\n\n对于 $100\\%$ 的数据，满足 $1\\le n, q \\le 10^6$，$1 \\le u \\le n$，$0 \\le a_i \\le 10^9$，$\\mathit{fa}_i < i$。\n\n以下是子任务（留空则表示无特殊性质），你必须通过一个子任务中的所有测试点以及该子任务依赖的所有测试点，才能获得这个子任务的分数：\n\n| 子任务编号 | $n, q$             | 子任务总分 | 特殊性质 | 依赖子任务 |\n| :--------: | :----------------: | :------: | :------: | :--------: |\n| 0   | $\\le 5\\times 10^3$ | 3        | E        |            |\n| 1   | $\\le 10^5$         | 6        | A, B     |            |\n| 2   |                    | 8        | C        |            |\n| 3   |                    | 4        | D        |            |\n| 4   |                    | 13       | E        | Subtask0   |\n| 5   |                    | 36       | B        | Subtask1   |\n| 6   |                    | 30       |          | Subtask0~5 |\n\n\n特殊性质：  \n\n+ 对于满足特殊性质 A 的测试点，保证每次 $1$ 操作 $u=1$。  \n+ 对于满足特殊性质 B 的测试点，保证每次 $2$ 操作 $u=1$。  \n+ 对于满足特殊性质 C 的测试点，保证对于所有节点 $i$， 满足 $\\mathit{fa}_i=i-1$，换句话说树的形态是一条链。  \n+ 对于满足特殊性质 D 的测试点，保证对于所有节点 $i$， 满足 $\\mathit{fa}_i=1$，换句话说树的形态是一个菊花。  \n+ 对于满足特殊性质 E 的测试点，保证数据随机，这里的数据随机指 $\\texttt{1}$ 操作和 $\\texttt{2}$ 操作等概率出现，$u$ 在 $[1, n]$ 内等概率随机，$\\mathit{fa}_i$ 在 $[1, i - 1]$ 内等概率随机。\n\n**提示：由于出题人很懒而且洛谷传不了很多数据点，因此本题数据可能较弱，而且为了避免赛事评测机压力导致的运行时间增加，本题放宽了时限，因此欢迎大家尝试用奇怪的乱搞通过本题。**\n\n> 只愿荡涤四方，护得浮世一隅。", "locale": "zh-CN"}}}
{"pid": "P7953", "type": "P", "difficulty": 7, "samples": [["3 3 114514 1919810 0 1", "831870297"], ["5 3 998244353 1000000007 1 1", "694472000"], ["21 17 233 234 5 17", "367211664"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "[✗✓OI R1] 逆转比特", "background": "myy 正在广东佛山游玩，所以他出了一道 [**高明**](https://baike.baidu.com/item/%E9%AB%98%E6%98%8E%E5%8C%BA/7747108?fr=aladdin) 的题目。", "description": "一个点在长为 $n$ 的只含有 0/1 的序列上随机游走，点的初始坐标为 $p$，重复进行以下操作：\n1. 当序列全为一种字符时，停止操作；\n2. 记点当前位置 $p$，等概率随机选择一个点 $q$，把点移动到 $q$，将 $q$ 处的字符的取反，总代价加上 $f(|p-q|)$，这里 $f(x)=Ax^2+Bx$，其中 $A,B$ 是两个给定常数；\n3. 回到第一条。\n\n你需要进行 $q$ 次修改，具体而言，每次修改包括\n1. 将序列第 $\\mathit{idx}$ 位的 0/1 翻转；\n2. 查询初始坐标为 $p$ 时，停止操作后的期望代价。\n\n**注意，一旦修改一直有效**。\n\n你需要输出 $q$ 次询问期望代价模 $998244353$ 的结果的异或和。\n\n考虑到输入输出量比较大，数据采用如下随机生成方式\n```cpp\nstruct Random {\n  unsigned long long X;\n  void init(unsigned long long seed) { X = seed; }\n  unsigned long long Rand() {\n    X ^= X << 13;\n    X ^= X >> 7;\n    X ^= X << 17;\n    return X;\n  }\n} R;\n```\n初始 01 串生成，会提供 $\\mathit{seed1}$。\n```cpp\nR.init(seed1);\nfor (int i = 1; i <= n; i++) seq[i] = R.Rand() & 1;\n```\n对于 $q$ 次询问，会提供 $\\mathit{seed2}$。\n```cpp\nR.init(seed2);\nfor (int i = 1; i <= q; i++) {\n  idx = R.Rand() % n + 1, p = R.Rand() % n + 1;\n  ans ^= query(idx, p);\n}\n```", "inputFormat": "一行六个整数 $n,q,\\mathit{seed1},\\mathit{seed2},A,B$，具体含义见「题目描述」。", "outputFormat": "一行一个整数 $\\mathit{ans}$，表示 $q$ 次询问期望代价模 $998244353$ 的结果的异或和。", "hint": "**【样例解释】**\n\n对样例一的解释：  \n三次询问分别为：$110$，$p=3$，答案为 $\\dfrac{11}{4}$；$010$，$p=3$，答案为 $\\dfrac{17}{6}$；$110$，$p=1$，答案为 $\\dfrac{11}{4}$。模 $998244353$ 意义下分别为 $249561091$、$831870297$ 和 $249561091$，异或和为 $831870297$。\n\n**【数据范围】**\n\n**本题采用子任务评测。**\n\n对于 $100\\%$ 的数据，满足 $3 \\leq n \\leq 3\\times10^6$，$1 \\leq q \\leq 3\\times10^6$，$0 \\leq A, B < 998244353$，$\\mathit{seed1}, \\mathit{seed2}\\in [0, 2^{64})$。\n\n| 子任务  |  $n\\le$   |  $q\\le$ | 特殊性质  | 子任务得分  | 依赖子任务 | 时间限制 |\n| :----: | :-----: | :-----: | :------: | :-------: |:----:|:----:|\n|   0    |    $5$    |     $5$   |    A     |      5    || 1s |\n|   1    |    $50$   |     $5$   |    /     |     18    |Subtask 0| 1s |\n|   2    |   $600$   |    $50$   |    /     |     12    |Subtask 0~1| 1s |\n|   3    |   $3000$  |   $3000$  |    A     |     10    |Subtask 0| 1s |\n|   4    |   $3000$  |  $3000$  |    /     |     10    |Subtask 0~3| 1s |\n|   5    | $3\\times10^6$ | $3\\times10^6$ |    /     |     45    |Subtask 0~4| 2s |\n\n特殊性质 A：$A = 0$。\n\n> 按照惯例，这里应该有一个有趣的后记，但是已经阿克月赛的你想必是没有耐心去看的，所以没有。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[✗✓OI R1] 逆转比特", "background": "myy 正在广东佛山游玩，所以他出了一道 [**高明**](https://baike.baidu.com/item/%E9%AB%98%E6%98%8E%E5%8C%BA/7747108?fr=aladdin) 的题目。", "description": "一个点在长为 $n$ 的只含有 0/1 的序列上随机游走，点的初始坐标为 $p$，重复进行以下操作：\n1. 当序列全为一种字符时，停止操作；\n2. 记点当前位置 $p$，等概率随机选择一个点 $q$，把点移动到 $q$，将 $q$ 处的字符的取反，总代价加上 $f(|p-q|)$，这里 $f(x)=Ax^2+Bx$，其中 $A,B$ 是两个给定常数；\n3. 回到第一条。\n\n你需要进行 $q$ 次修改，具体而言，每次修改包括\n1. 将序列第 $\\mathit{idx}$ 位的 0/1 翻转；\n2. 查询初始坐标为 $p$ 时，停止操作后的期望代价。\n\n**注意，一旦修改一直有效**。\n\n你需要输出 $q$ 次询问期望代价模 $998244353$ 的结果的异或和。\n\n考虑到输入输出量比较大，数据采用如下随机生成方式\n```cpp\nstruct Random {\n  unsigned long long X;\n  void init(unsigned long long seed) { X = seed; }\n  unsigned long long Rand() {\n    X ^= X << 13;\n    X ^= X >> 7;\n    X ^= X << 17;\n    return X;\n  }\n} R;\n```\n初始 01 串生成，会提供 $\\mathit{seed1}$。\n```cpp\nR.init(seed1);\nfor (int i = 1; i <= n; i++) seq[i] = R.Rand() & 1;\n```\n对于 $q$ 次询问，会提供 $\\mathit{seed2}$。\n```cpp\nR.init(seed2);\nfor (int i = 1; i <= q; i++) {\n  idx = R.Rand() % n + 1, p = R.Rand() % n + 1;\n  ans ^= query(idx, p);\n}\n```", "inputFormat": "一行六个整数 $n,q,\\mathit{seed1},\\mathit{seed2},A,B$，具体含义见「题目描述」。", "outputFormat": "一行一个整数 $\\mathit{ans}$，表示 $q$ 次询问期望代价模 $998244353$ 的结果的异或和。", "hint": "**【样例解释】**\n\n对样例一的解释：  \n三次询问分别为：$110$，$p=3$，答案为 $\\dfrac{11}{4}$；$010$，$p=3$，答案为 $\\dfrac{17}{6}$；$110$，$p=1$，答案为 $\\dfrac{11}{4}$。模 $998244353$ 意义下分别为 $249561091$、$831870297$ 和 $249561091$，异或和为 $831870297$。\n\n**【数据范围】**\n\n**本题采用子任务评测。**\n\n对于 $100\\%$ 的数据，满足 $3 \\leq n \\leq 3\\times10^6$，$1 \\leq q \\leq 3\\times10^6$，$0 \\leq A, B < 998244353$，$\\mathit{seed1}, \\mathit{seed2}\\in [0, 2^{64})$。\n\n| 子任务  |  $n\\le$   |  $q\\le$ | 特殊性质  | 子任务得分  | 依赖子任务 | 时间限制 |\n| :----: | :-----: | :-----: | :------: | :-------: |:----:|:----:|\n|   0    |    $5$    |     $5$   |    A     |      5    || 1s |\n|   1    |    $50$   |     $5$   |    /     |     18    |Subtask 0| 1s |\n|   2    |   $600$   |    $50$   |    /     |     12    |Subtask 0~1| 1s |\n|   3    |   $3000$  |   $3000$  |    A     |     10    |Subtask 0| 1s |\n|   4    |   $3000$  |  $3000$  |    /     |     10    |Subtask 0~3| 1s |\n|   5    | $3\\times10^6$ | $3\\times10^6$ |    /     |     45    |Subtask 0~4| 2s |\n\n特殊性质 A：$A = 0$。\n\n> 按照惯例，这里应该有一个有趣的后记，但是已经阿克月赛的你想必是没有耐心去看的，所以没有。", "locale": "zh-CN"}}}
{"pid": "P7954", "type": "P", "difficulty": 2, "samples": [["4 5\n2 0\n3 0\n4 0\n5 0", "0"], ["5 5\n3 1\n2 0\n13 1\n2 0\n10 1", "5"], ["6 10\n15 1\n12 1\n8 0\n10 1\n3 0\n1 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2014", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #6] PAPRIKA", "background": "", "description": "厨师 Marin 准备用 $n$ 个辣椒制作菜品。\n\n他决定用所有年龄不超过 $x$ 天的辣椒来制作菜品 A，用其他的所有辣椒制作菜品 B。\n\n每个辣椒都有自己的梦想，它们知道自己想要成为 A 还是 B。\n\n但它们不知道 $x$ 的值。为了最大化实现梦想的辣椒数量，它们会采取如下策略进行交换：\n\n- 第 1 个辣椒与第 2 个辣椒比较年龄，然后第 2 个辣椒与第 3 个辣椒比较年龄，依此类推，直到第 $n-1$ 和第 $n$ 个辣椒比较年龄。\n- 若当前比较二者的编号为 $i,j$，其中**当前年龄**较大的辣椒想成为菜品 A，**当前年龄**较小的辣椒想成为菜品 B，则它们会交换年龄。$^{[1]}$\n\n求出这样操作后实现梦想的辣椒数量。", "inputFormat": "第一行两个整数 $n,x$。\n\n接下来 $n$ 行，每行两个整数 $a_i,b_i$，分别表示第 $i$ 个辣椒的年龄与梦想。\n\n- 若 $b_i=1$，则表示第 $i$ 个辣椒想成为菜品 A。\n- 若 $b_i=0$，则表示第 $i$ 个辣椒想成为菜品 B。\n\n**根据这种定义，「题目描述」中 $^\\textbf{[1]}$ 更加严谨的表述为：**\\\n两个辣椒 $i,j$ 会交换年龄当且仅当 $a_i>a_j$ 且 $b_i=1$ 且 $b_j=0$。", "outputFormat": "仅一行一个整数，即实现梦想的辣椒数量。", "hint": "#### 样例 1 说明\n\n没有辣椒想成为菜品 A。\n\n#### 样例 2 说明\n\n每对辣椒都交换了年龄。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n,x,a_i\\le 10^3$，$b_i\\in\\{0,1\\}$。\n\n#### 说明\n\n按原题配置，满分 50 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task A _**PAPRIKA**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #6] PAPRIKA", "background": "", "description": "厨师 Marin 准备用 $n$ 个辣椒制作菜品。\n\n他决定用所有年龄不超过 $x$ 天的辣椒来制作菜品 A，用其他的所有辣椒制作菜品 B。\n\n每个辣椒都有自己的梦想，它们知道自己想要成为 A 还是 B。\n\n但它们不知道 $x$ 的值。为了最大化实现梦想的辣椒数量，它们会采取如下策略进行交换：\n\n- 第 1 个辣椒与第 2 个辣椒比较年龄，然后第 2 个辣椒与第 3 个辣椒比较年龄，依此类推，直到第 $n-1$ 和第 $n$ 个辣椒比较年龄。\n- 若当前比较二者的编号为 $i,j$，其中**当前年龄**较大的辣椒想成为菜品 A，**当前年龄**较小的辣椒想成为菜品 B，则它们会交换年龄。$^{[1]}$\n\n求出这样操作后实现梦想的辣椒数量。", "inputFormat": "第一行两个整数 $n,x$。\n\n接下来 $n$ 行，每行两个整数 $a_i,b_i$，分别表示第 $i$ 个辣椒的年龄与梦想。\n\n- 若 $b_i=1$，则表示第 $i$ 个辣椒想成为菜品 A。\n- 若 $b_i=0$，则表示第 $i$ 个辣椒想成为菜品 B。\n\n**根据这种定义，「题目描述」中 $^\\textbf{[1]}$ 更加严谨的表述为：**\\\n两个辣椒 $i,j$ 会交换年龄当且仅当 $a_i>a_j$ 且 $b_i=1$ 且 $b_j=0$。", "outputFormat": "仅一行一个整数，即实现梦想的辣椒数量。", "hint": "#### 样例 1 说明\n\n没有辣椒想成为菜品 A。\n\n#### 样例 2 说明\n\n每对辣椒都交换了年龄。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n,x,a_i\\le 10^3$，$b_i\\in\\{0,1\\}$。\n\n#### 说明\n\n按原题配置，满分 50 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task A _**PAPRIKA**_。", "locale": "zh-CN"}}}
{"pid": "P7955", "type": "P", "difficulty": 2, "samples": [["2\n4-4-2\n10-0-0\n10\nO\nO\nO\nO\nO\nO\nO\nO\nON\nNO", "NE\nDA"], ["3\n4-4-2\n3-5-2\n4-3-3\n11\nOV\nOV\nOVN\nOV\nOV\nV\nV\nN\nO\nO\nO", "DA\nDA\nNE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2014", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #6] NIKO", "background": "2018 年，俄罗斯，第 21 届世界杯。", "description": "为了方便，记 $\\tt O$ 表示防守球员，$\\tt V$ 表示中场球员，$\\tt N$ 表示进攻球员。\n\n教练有几个排阵方案 $O-V-N$，其中 $O,V,N$ 分别表示 $\\tt O,V,N$ 的数量。当然一定有 $O+V+N=10$。\n\n现在 $m$ 个球员都能担任 $\\tt O,V,N$ 中的某几个。教练想知道他的每种排阵方案能否实现。", "inputFormat": "第一行一个整数 $n$，表示教练的方案数量。\n\n接下来 $n$ 行，每行三个整数 $O_i,V_i,N_i$，描述每种方案。\n\n接下来一行一个整数 $m$，表示球员数量。\n\n接下来 $m$ 行描述每个球员能担任的角色。", "outputFormat": "共 $n$ 行。\n\n- 如果第 $i$ 个方案能被满足，在第 $i$ 行输出 `DA`。\n- 否则输出 `NE`。", "hint": "#### 样例 1 说明\n\n显然教练只能使用 10-0-0。\n\n#### 样例 2 说明\n\n- 对于 4-4-2，可以派 $1,2,9,10$ 作为 $\\tt O$，派 $4,5,6,7$ 作为 $\\tt V$，派 $3,8$ 作为 $\\tt N$。\n- 对于 3-5-2，可以派 $4,9,10$ 作为 $\\tt O$，派 $1,2,5,6$ 作为 $\\tt V$，派 $3,8$ 作为 $\\tt N$。\n- 对于 4-3-3，不可能，因为只有 $2$ 个球员能作为 $\\tt N$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10$，$10\\le m\\le 22$。\n\n#### 说明\n\n按原题配置，满分 80 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task B _**NIKO**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #6] NIKO", "background": "2018 年，俄罗斯，第 21 届世界杯。", "description": "为了方便，记 $\\tt O$ 表示防守球员，$\\tt V$ 表示中场球员，$\\tt N$ 表示进攻球员。\n\n教练有几个排阵方案 $O-V-N$，其中 $O,V,N$ 分别表示 $\\tt O,V,N$ 的数量。当然一定有 $O+V+N=10$。\n\n现在 $m$ 个球员都能担任 $\\tt O,V,N$ 中的某几个。教练想知道他的每种排阵方案能否实现。", "inputFormat": "第一行一个整数 $n$，表示教练的方案数量。\n\n接下来 $n$ 行，每行三个整数 $O_i,V_i,N_i$，描述每种方案。\n\n接下来一行一个整数 $m$，表示球员数量。\n\n接下来 $m$ 行描述每个球员能担任的角色。", "outputFormat": "共 $n$ 行。\n\n- 如果第 $i$ 个方案能被满足，在第 $i$ 行输出 `DA`。\n- 否则输出 `NE`。", "hint": "#### 样例 1 说明\n\n显然教练只能使用 10-0-0。\n\n#### 样例 2 说明\n\n- 对于 4-4-2，可以派 $1,2,9,10$ 作为 $\\tt O$，派 $4,5,6,7$ 作为 $\\tt V$，派 $3,8$ 作为 $\\tt N$。\n- 对于 3-5-2，可以派 $4,9,10$ 作为 $\\tt O$，派 $1,2,5,6$ 作为 $\\tt V$，派 $3,8$ 作为 $\\tt N$。\n- 对于 4-3-3，不可能，因为只有 $2$ 个球员能作为 $\\tt N$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10$，$10\\le m\\le 22$。\n\n#### 说明\n\n按原题配置，满分 80 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task B _**NIKO**_。", "locale": "zh-CN"}}}
{"pid": "P7956", "type": "P", "difficulty": 2, "samples": [["5 6\n.XXXX.\n...X..\n......\n#..###\n######", "......\n.XXXX.\n...X..\n#..###\n######"], ["9 7\nXXX.XXX\nX.XXX.X\nX..X..X\nX.....X\n.......\n.#...#.\n.##.##.\n.#####.\n#######", ".......\n.......\n.......\n.......\nXXX.XXX\nX#XXX#X\nX##X##X\nX#####X\n#######"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536]}, "tags": ["2014", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #6] METEOR", "background": "", "description": "你需要复原一幅流星坠落后的照片。\n\n流星坠落前的照片可以被看作是一个 $R\\times S$ 的字符矩阵。$\\texttt X$ 表示流星的一部分，$\\texttt \\#$ 表示地面，其他部分是空气，用 $\\texttt .$ 表示。所有 $\\texttt X$ 是联通的。\n\n注意到流星严格位于地面上方，即存在一行 $\\texttt .$ 使得 $\\texttt X$ 都在它上方且 $\\texttt \\#$ 都在它下方。照片最后一行必定都是 $\\texttt \\#$。\n\n请还原出流星落地后的照片，落地后流星与地面性质都未改变。", "inputFormat": "第一行两个整数 $R,S$。\n\n接下来 $R$ 行每行一个长度为 $S$ 的字符串，表示这个流星坠落前的照片。", "outputFormat": "一个 $R\\times S$ 的矩阵，表示你还原的流星坠落后的照片。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $3\\le R,S\\le 3\\times 10^3$，字符矩阵中的字符都是 $\\texttt{X \\# .}$ 中的一种。\n\n#### 说明\n\n按原题配置，满分 100 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task C _**METEOR**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #6] METEOR", "background": "", "description": "你需要复原一幅流星坠落后的照片。\n\n流星坠落前的照片可以被看作是一个 $R\\times S$ 的字符矩阵。$\\texttt X$ 表示流星的一部分，$\\texttt \\#$ 表示地面，其他部分是空气，用 $\\texttt .$ 表示。所有 $\\texttt X$ 是联通的。\n\n注意到流星严格位于地面上方，即存在一行 $\\texttt .$ 使得 $\\texttt X$ 都在它上方且 $\\texttt \\#$ 都在它下方。照片最后一行必定都是 $\\texttt \\#$。\n\n请还原出流星落地后的照片，落地后流星与地面性质都未改变。", "inputFormat": "第一行两个整数 $R,S$。\n\n接下来 $R$ 行每行一个长度为 $S$ 的字符串，表示这个流星坠落前的照片。", "outputFormat": "一个 $R\\times S$ 的矩阵，表示你还原的流星坠落后的照片。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $3\\le R,S\\le 3\\times 10^3$，字符矩阵中的字符都是 $\\texttt{X \\# .}$ 中的一种。\n\n#### 说明\n\n按原题配置，满分 100 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task C _**METEOR**_。", "locale": "zh-CN"}}}
{"pid": "P7957", "type": "P", "difficulty": 3, "samples": [["4 3", "1 4 2 3"], ["5 1", "-1"], ["5 5", "1 2 3 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2014", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #6] KRATKI", "background": "我们都非常熟悉「最长单调子序列」问题：\n\n>给定一个长度为 $n$ 的数列，你需要求出它的 LMS（即最长单调子序列）的长度。\\\n>**请注意**，这里「LMS」是指「递增子序列和递减子序列中**更长的一个**」。\\\n>即需要对 LIS 和 LDS 的长度取最大值。\n\n现在你需要解决一个 LMS 的逆问题。", "description": "给定数列的长度 $n$。\n\n你需要构造出一个 $n$ 的排列，使得它的 LMS 长度为 $k$。", "inputFormat": "仅一行两个整数 $n,k$。", "outputFormat": "如果无解，输出 $\\texttt{-1}$。\n\n否则输出一行 $n$ 个整数，即你构造的数列。\n\n**如果存在多组解，输出任意一种。**", "hint": "#### 样例 1 说明\n\n$\\{1,4,2,3\\}$ 的 **LMS** 为 $\\{1,2,3\\}$，长度为 $3$，符合要求。\n\n#### 数据规模与约定\n\n**本题采用 Special Judge。**\n\n对于 $100\\%$ 的数据，有 $1\\le k\\le n\\le 10^6$。\n\n#### 说明\n\n按原题配置，满分 120 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task D _**KRATKI**_。\n\n由于原数据没有一些特殊的数据，本题添加了数据 #11。如果你没通过它，会得到 120 Unaccept。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #6] KRATKI", "background": "我们都非常熟悉「最长单调子序列」问题：\n\n>给定一个长度为 $n$ 的数列，你需要求出它的 LMS（即最长单调子序列）的长度。\\\n>**请注意**，这里「LMS」是指「递增子序列和递减子序列中**更长的一个**」。\\\n>即需要对 LIS 和 LDS 的长度取最大值。\n\n现在你需要解决一个 LMS 的逆问题。", "description": "给定数列的长度 $n$。\n\n你需要构造出一个 $n$ 的排列，使得它的 LMS 长度为 $k$。", "inputFormat": "仅一行两个整数 $n,k$。", "outputFormat": "如果无解，输出 $\\texttt{-1}$。\n\n否则输出一行 $n$ 个整数，即你构造的数列。\n\n**如果存在多组解，输出任意一种。**", "hint": "#### 样例 1 说明\n\n$\\{1,4,2,3\\}$ 的 **LMS** 为 $\\{1,2,3\\}$，长度为 $3$，符合要求。\n\n#### 数据规模与约定\n\n**本题采用 Special Judge。**\n\n对于 $100\\%$ 的数据，有 $1\\le k\\le n\\le 10^6$。\n\n#### 说明\n\n按原题配置，满分 120 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task D _**KRATKI**_。\n\n由于原数据没有一些特殊的数据，本题添加了数据 #11。如果你没通过它，会得到 120 Unaccept。", "locale": "zh-CN"}}}
{"pid": "P7958", "type": "P", "difficulty": 4, "samples": [["3 3\n1 4 10\n5 2 6\n11 1 3", "9"], ["3 3\n1 3 1\n2 1 2\n1 1 1", "4"], ["5 6\n1 1 4 0 3 3\n4 4 9 7 11 13\n-3 -1 4 2 8 11\n1 5 9 5 9 10\n4 8 10 5 8 8", "15"]], "limits": {"time": [900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2014", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #6] NEO", "background": "", "description": "一个矩阵 $A$ 是「YF 矩阵」当且仅当满足：\n\n- $r,s>1$\n- $A_{1,1}+A_{r,s}\\le A_{1,s}+A_{r,1}$\n\n$r,s$ 分别表示矩阵 $A$ 的行数和列数。\n\n此外，如果一个矩阵的每个大小至少为 $2\\times2$ 的子矩阵都是「YF 矩阵」，我们就说这个矩阵是「Sept 矩阵」。\n\n给定一个矩阵 $A$，你需要求出 $A$ 的含有最多元素的是「Sept 矩阵」的子矩阵所含的元素数量。", "inputFormat": "第一行两个整数 $R,S$，分别表示 $A$ 的行数和列数。\n\n接下来 $R$ 行每行 $S$ 个整数，描述矩阵 $A$。", "outputFormat": "仅一行，即 $A$ 的最大的是「Sept 矩阵」的子矩阵所含的元素数量。\n\n若这样的子矩阵不存在，输出 $0$。", "hint": "#### 样例 3 说明\n\n最大的是「Sept 矩阵」的子矩阵的左上角与右下角坐标分别为 $(3,2),(5,6)$。\n\n#### 数据规模与约定\n\n- 对于 $60\\%$ 的数据，有 $R,S\\le 350$。\n- 对于 $100\\%$ 的数据，有 $2\\le R,S\\le 10^3$，$A_{i,j}\\in[-10^6,10^6]$。\n\n#### 说明\n\n按原题配置，满分 140 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task E _**NEO**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #6] NEO", "background": "", "description": "一个矩阵 $A$ 是「YF 矩阵」当且仅当满足：\n\n- $r,s>1$\n- $A_{1,1}+A_{r,s}\\le A_{1,s}+A_{r,1}$\n\n$r,s$ 分别表示矩阵 $A$ 的行数和列数。\n\n此外，如果一个矩阵的每个大小至少为 $2\\times2$ 的子矩阵都是「YF 矩阵」，我们就说这个矩阵是「Sept 矩阵」。\n\n给定一个矩阵 $A$，你需要求出 $A$ 的含有最多元素的是「Sept 矩阵」的子矩阵所含的元素数量。", "inputFormat": "第一行两个整数 $R,S$，分别表示 $A$ 的行数和列数。\n\n接下来 $R$ 行每行 $S$ 个整数，描述矩阵 $A$。", "outputFormat": "仅一行，即 $A$ 的最大的是「Sept 矩阵」的子矩阵所含的元素数量。\n\n若这样的子矩阵不存在，输出 $0$。", "hint": "#### 样例 3 说明\n\n最大的是「Sept 矩阵」的子矩阵的左上角与右下角坐标分别为 $(3,2),(5,6)$。\n\n#### 数据规模与约定\n\n- 对于 $60\\%$ 的数据，有 $R,S\\le 350$。\n- 对于 $100\\%$ 的数据，有 $2\\le R,S\\le 10^3$，$A_{i,j}\\in[-10^6,10^6]$。\n\n#### 说明\n\n按原题配置，满分 140 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task E _**NEO**_。", "locale": "zh-CN"}}}
{"pid": "P7959", "type": "P", "difficulty": 5, "samples": [["5 3\n1 -1 1 -1 1", "10\n1 1 1 2 2 3"], ["6 5\n2 5 4 1 3 5", "16\n3 2 1 1 5 4 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2014", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #6] WTF", "background": "", "description": "你有一个长度为 $n$ 的数组 $\\textbf A$，一个值域为 $[1,n-1]$ 的长度为 $n+1$ 的数组 $\\textbf{ID}$ 和一个整数 $r$。\n\n我们通过以下伪代码对数组 $\\textbf A$ 进行 Warshall-Turing-Fourier 变换 $^\\textsf{[1]}$：\n\n```cpp\nsum = 0\nfor i = 1 to n\n\tindex = min{ID[i], ID[i+1]}\n\tsum = sum + A[index]\n\tRorate(A, r)\nChange(A)\nfor i = 1 to n\n\tindex = max{ID[i], ID[i+1]}\n\tindex = index + 1\n\tsum = sum + A[index]\n\tRorate(A, r)\n```\n\n其中：\n- $\\texttt{Change}(\\textbf A)$ 表示把数组 $\\textbf A$ 中所有元素分别改成它们的相反数。\n- $\\texttt{Rorate}(\\textbf A,r)$ 表示把数组 $\\textbf A$ 复制两遍得到数组 $\\textbf B$，取 $\\textbf B[n-r+1,2n-r]$ 代替数组 $\\textbf A$。\\\n  即**向右旋转** $R$ 个位置。\n\n你已经知道数组 $\\textbf A$ 和整数 $r$，但你并不知道数组 $\\textbf{ID}$。\n\n你需要求出 WTF 变换后伪代码中 $\\text{sum}$ 可能的最大值。\n\n$\\textsf{[1]}$：实际上并不存在，当然也可以叫做「Sept 变换」。", "inputFormat": "第一行两个整数 $n,r$。\n\n接下来一行 $n$ 个整数，表示数组 $\\textbf A$。", "outputFormat": "第一行一个整数，即伪代码中 $\\text{sum}$ 可能的最大值。\n\n第二行 $n+1$ 个整数，即使得 $\\text{sum}$ 值最大的 $\\textbf{ID}$ 数组。\n\n**如果存在多组解，输出任意一种。**", "hint": "#### 判分方式\n\n如果输出只有第一行正确，可以得到 $50\\%$ 的分数。\n\n**但你必须保证第二行有 $\\bm{n+1}$ 个符合要求的数。**\n\n#### 数据规模与约定\n\n**本题采用 Special Judge。**\n\n- 对于 $20\\%$ 的数据，有 $n\\le 7$。\n- 对于 $60\\%$ 的数据，有 $n\\le 300$。\n- 对于 $100\\%$ 的数据，有 $2\\le n\\le 3\\times 10^3$，$1\\le r\\le n$，$\\textbf A[i]\\in[-10^4,10^4]$。\n\n你需要保证你构造的 $\\textbf{ID}[i]\\in[1,n-1]$。\n\n#### 说明\n\n按原题配置，满分 160 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task F _**WTF**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #6] WTF", "background": "", "description": "你有一个长度为 $n$ 的数组 $\\textbf A$，一个值域为 $[1,n-1]$ 的长度为 $n+1$ 的数组 $\\textbf{ID}$ 和一个整数 $r$。\n\n我们通过以下伪代码对数组 $\\textbf A$ 进行 Warshall-Turing-Fourier 变换 $^\\textsf{[1]}$：\n\n```cpp\nsum = 0\nfor i = 1 to n\n\tindex = min{ID[i], ID[i+1]}\n\tsum = sum + A[index]\n\tRorate(A, r)\nChange(A)\nfor i = 1 to n\n\tindex = max{ID[i], ID[i+1]}\n\tindex = index + 1\n\tsum = sum + A[index]\n\tRorate(A, r)\n```\n\n其中：\n- $\\texttt{Change}(\\textbf A)$ 表示把数组 $\\textbf A$ 中所有元素分别改成它们的相反数。\n- $\\texttt{Rorate}(\\textbf A,r)$ 表示把数组 $\\textbf A$ 复制两遍得到数组 $\\textbf B$，取 $\\textbf B[n-r+1,2n-r]$ 代替数组 $\\textbf A$。\\\n  即**向右旋转** $R$ 个位置。\n\n你已经知道数组 $\\textbf A$ 和整数 $r$，但你并不知道数组 $\\textbf{ID}$。\n\n你需要求出 WTF 变换后伪代码中 $\\text{sum}$ 可能的最大值。\n\n$\\textsf{[1]}$：实际上并不存在，当然也可以叫做「Sept 变换」。", "inputFormat": "第一行两个整数 $n,r$。\n\n接下来一行 $n$ 个整数，表示数组 $\\textbf A$。", "outputFormat": "第一行一个整数，即伪代码中 $\\text{sum}$ 可能的最大值。\n\n第二行 $n+1$ 个整数，即使得 $\\text{sum}$ 值最大的 $\\textbf{ID}$ 数组。\n\n**如果存在多组解，输出任意一种。**", "hint": "#### 判分方式\n\n如果输出只有第一行正确，可以得到 $50\\%$ 的分数。\n\n**但你必须保证第二行有 $\\bm{n+1}$ 个符合要求的数。**\n\n#### 数据规模与约定\n\n**本题采用 Special Judge。**\n\n- 对于 $20\\%$ 的数据，有 $n\\le 7$。\n- 对于 $60\\%$ 的数据，有 $n\\le 300$。\n- 对于 $100\\%$ 的数据，有 $2\\le n\\le 3\\times 10^3$，$1\\le r\\le n$，$\\textbf A[i]\\in[-10^4,10^4]$。\n\n你需要保证你构造的 $\\textbf{ID}[i]\\in[1,n-1]$。\n\n#### 说明\n\n按原题配置，满分 160 分。\n\n译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task F _**WTF**_。", "locale": "zh-CN"}}}
{"pid": "P7960", "type": "P", "difficulty": 3, "samples": [["4\n6\n33\n69\n300\n", "8\n36\n80\n-1\n"], ["5\n90\n99\n106\n114\n169\n", "92\n100\n109\n-1\n180\n"], ["见附件中的 number/number3.in", "见附件中的 number/number3.ans"], ["见附件中的 number/number4.in", "见附件中的 number/number4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "NOIP 提高组", "O2优化", "素数判断,质数,筛法"], "title": "[NOIP2021] 报数", "background": "", "description": "报数游戏是一个广为流传的休闲小游戏。参加游戏的每个人要按一定顺序轮流报数，但如果下一个报的数是 $7$ 的倍数，或十进制表示中含有数字 $7$，就必须跳过这个数，否则就输掉了游戏。\n\n在一个风和日丽的下午，刚刚结束 SPC20nn 比赛的小 r 和小 z 闲得无聊玩起了这个报数游戏。但在只有两个人玩的情况下计算起来还是比较容易的，因此他们玩了很久也没分出胜负。此时小 z 灵光一闪，决定把这个游戏加强：任何一个十进制中含有数字 $7$ 的数，它的所有倍数都不能报出来！\n\n形式化地，设 $p(x)$ 表示 $x$ 的十进制表示中是否含有数字 $7$，若含有则 $p(x) = 1$，否则 $p(x) = 0$。则一个正整数 $x$ 不能被报出，当且仅当存在正整数 $y$ 和 $z$ ，使得 $x = yz$ 且 $p(y) = 1$。\n\n\n例如，如果小 r 报出了 $6$ ，由于 $7$ 不能报，所以小 z 下一个需要报 $8$；如果小 r 报出了 $33$，则由于 $34 = 17 \\times 2$，$35 = 7 \\times 5$ 都不能报，小 z 下一个需要报出 $36$ ；如果小 r 报出了 $69$，由于 $70 \\sim 79$ 的数都含有 $7$，小 z 下一个需要报出 $80$ 才行。\n\n现在小 r 的上一个数报出了 $x$，小 z 想快速算出他下一个数要报多少，不过他很快就发现这个游戏可比原版的游戏难算多了，于是他需要你的帮助。当然，如果小 r 报出的 x 本身是不能报出的，你也要快速反应过来小 r 输了才行。\n\n由于小 r 和小 z 玩了很长时间游戏，你也需要回答小 z 的很多个问题。", "inputFormat": "第一行，一个正整数 $T$ 表示小 z 询问的数量。\n\n接下来 $T$ 行，每行一个正整数 $x$，表示这一次小 r 报出的数。", "outputFormat": "输出共 $T$ 行，每行一个整数，如果小 r 这一次报出的数是不能报出的，输出 $-1$，否则输出小 z 下一次报出的数是多少。", "hint": "**【样例解释 #1】**\n\n这一组样例的前 $3$ 次询问在题目描述中已有解释。\n\n对于第 $4$ 次询问，由于 $300 = 75 \\times 4$，而 $75$ 中含有 $7$ ，所以小 r 直接输掉了游戏。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$T \\leq 10$，$x \\leq 100$。  \n对于 $30\\%$ 的数据，$T \\leq 100$，$x \\leq 1000$。  \n对于 $50\\%$ 的数据，$T \\leq 1000$，$x \\leq 10000$。  \n对于 $70\\%$ 的数据，$T \\leq 10000$，$x \\leq 2 \\times {10}^5$。  \n对于 $100\\%$ 的数据，$1 \\le T \\leq 2 \\times {10}^5$，$1 \\le x \\leq {10}^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOIP2021] 报数", "background": "", "description": "报数游戏是一个广为流传的休闲小游戏。参加游戏的每个人要按一定顺序轮流报数，但如果下一个报的数是 $7$ 的倍数，或十进制表示中含有数字 $7$，就必须跳过这个数，否则就输掉了游戏。\n\n在一个风和日丽的下午，刚刚结束 SPC20nn 比赛的小 r 和小 z 闲得无聊玩起了这个报数游戏。但在只有两个人玩的情况下计算起来还是比较容易的，因此他们玩了很久也没分出胜负。此时小 z 灵光一闪，决定把这个游戏加强：任何一个十进制中含有数字 $7$ 的数，它的所有倍数都不能报出来！\n\n形式化地，设 $p(x)$ 表示 $x$ 的十进制表示中是否含有数字 $7$，若含有则 $p(x) = 1$，否则 $p(x) = 0$。则一个正整数 $x$ 不能被报出，当且仅当存在正整数 $y$ 和 $z$ ，使得 $x = yz$ 且 $p(y) = 1$。\n\n\n例如，如果小 r 报出了 $6$ ，由于 $7$ 不能报，所以小 z 下一个需要报 $8$；如果小 r 报出了 $33$，则由于 $34 = 17 \\times 2$，$35 = 7 \\times 5$ 都不能报，小 z 下一个需要报出 $36$ ；如果小 r 报出了 $69$，由于 $70 \\sim 79$ 的数都含有 $7$，小 z 下一个需要报出 $80$ 才行。\n\n现在小 r 的上一个数报出了 $x$，小 z 想快速算出他下一个数要报多少，不过他很快就发现这个游戏可比原版的游戏难算多了，于是他需要你的帮助。当然，如果小 r 报出的 x 本身是不能报出的，你也要快速反应过来小 r 输了才行。\n\n由于小 r 和小 z 玩了很长时间游戏，你也需要回答小 z 的很多个问题。", "inputFormat": "第一行，一个正整数 $T$ 表示小 z 询问的数量。\n\n接下来 $T$ 行，每行一个正整数 $x$，表示这一次小 r 报出的数。", "outputFormat": "输出共 $T$ 行，每行一个整数，如果小 r 这一次报出的数是不能报出的，输出 $-1$，否则输出小 z 下一次报出的数是多少。", "hint": "**【样例解释 #1】**\n\n这一组样例的前 $3$ 次询问在题目描述中已有解释。\n\n对于第 $4$ 次询问，由于 $300 = 75 \\times 4$，而 $75$ 中含有 $7$ ，所以小 r 直接输掉了游戏。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$T \\leq 10$，$x \\leq 100$。  \n对于 $30\\%$ 的数据，$T \\leq 100$，$x \\leq 1000$。  \n对于 $50\\%$ 的数据，$T \\leq 1000$，$x \\leq 10000$。  \n对于 $70\\%$ 的数据，$T \\leq 10000$，$x \\leq 2 \\times {10}^5$。  \n对于 $100\\%$ 的数据，$1 \\le T \\leq 2 \\times {10}^5$，$1 \\le x \\leq {10}^7$。", "locale": "zh-CN"}}}
{"pid": "P7961", "type": "P", "difficulty": 5, "samples": [["5 1 1\n2 1\n", "40\n"], ["见附件中的 sequence/sequence2.in", "见附件中的 sequence/sequence2.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "NOIP 提高组", "O2优化", "排列组合"], "title": "[NOIP2021] 数列", "background": "", "description": "给定整数 $n, m, k$，和一个长度为 $m + 1$ 的正整数数组 $v_0, v_1, \\ldots, v_m$。\n\n对于一个长度为 $n$，下标从 $1$ 开始且每个元素均不超过 $m$ 的非负整数序列 $\\{a_i\\}$，我们定义它的权值为 $v_{a_1} \\times v_{a_2} \\times \\cdots \\times v_{a_n}$。\n\n当这样的序列 $\\{a_i\\}$ 满足整数 $S = 2^{a_1} + 2^{a_2} + \\cdots + 2^{a_n}$ 的二进制表示中 $1$ 的个数不超过 $k$ 时，我们认为 $\\{a_i\\}$ 是一个合法序列。\n\n计算所有合法序列 $\\{a_i\\}$ 的权值和对 $998244353$ 取模的结果。", "inputFormat": "输入第一行是三个整数 $n, m, k$。\n\n第二行 $m + 1$ 个整数，分别是 $v_0, v_1, \\ldots, v_m$。", "outputFormat": "仅一行一个整数，表示所有合法序列的权值和对 $998244353$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n由于 $k = 1$，而且由 $n \\leq S \\leq n \\times 2^m$ 知道 $5 \\leq S \\leq 10$，合法的 $S$ 只有一种可能：$S = 8$，这要求 $a$ 中必须有 $2$ 个 $0$ 和 $3$ 个 $1$，于是有 $\\binom{5}{2} = 10$ 种可能的序列，每种序列的贡献都是 $v_0^2 v_1^3 = 4$，权值和为 $10 \\times 4 = 40$。\n\n**【数据范围】**\n\n对所有测试点保证 $1 \\leq k \\leq n \\leq 30$，$0 \\leq m \\leq 100$，$1 \\leq v_i < 998244353$。\n\n::cute-table{tuack}\n\n|    测试点    |  $n$  |   $k$    |  $m$   |\n| :----------: | :---: | :------: | :----: |\n|  $1 \\sim 4$  | $=8$  | $\\leq n$ |  $=9$  |\n|  $5 \\sim 7$  | $=30$ | ^ |  $=7$  |\n| $8 \\sim 10$  | ^ | ^ | $=12$  |\n| $11 \\sim 13$ | ^ |   $=1$   | $=100$ |\n| $14 \\sim 15$ | $=5$  | $\\leq n$ | $=50$  |\n|     $16$     | $=15$ | ^ | $=100$ |\n| $17 \\sim 18$ | $=30$ | ^ | $=30$  |\n| $19 \\sim 20$ | ^ | ^ | $=100$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOIP2021] 数列", "background": "", "description": "给定整数 $n, m, k$，和一个长度为 $m + 1$ 的正整数数组 $v_0, v_1, \\ldots, v_m$。\n\n对于一个长度为 $n$，下标从 $1$ 开始且每个元素均不超过 $m$ 的非负整数序列 $\\{a_i\\}$，我们定义它的权值为 $v_{a_1} \\times v_{a_2} \\times \\cdots \\times v_{a_n}$。\n\n当这样的序列 $\\{a_i\\}$ 满足整数 $S = 2^{a_1} + 2^{a_2} + \\cdots + 2^{a_n}$ 的二进制表示中 $1$ 的个数不超过 $k$ 时，我们认为 $\\{a_i\\}$ 是一个合法序列。\n\n计算所有合法序列 $\\{a_i\\}$ 的权值和对 $998244353$ 取模的结果。", "inputFormat": "输入第一行是三个整数 $n, m, k$。\n\n第二行 $m + 1$ 个整数，分别是 $v_0, v_1, \\ldots, v_m$。", "outputFormat": "仅一行一个整数，表示所有合法序列的权值和对 $998244353$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n由于 $k = 1$，而且由 $n \\leq S \\leq n \\times 2^m$ 知道 $5 \\leq S \\leq 10$，合法的 $S$ 只有一种可能：$S = 8$，这要求 $a$ 中必须有 $2$ 个 $0$ 和 $3$ 个 $1$，于是有 $\\binom{5}{2} = 10$ 种可能的序列，每种序列的贡献都是 $v_0^2 v_1^3 = 4$，权值和为 $10 \\times 4 = 40$。\n\n**【数据范围】**\n\n对所有测试点保证 $1 \\leq k \\leq n \\leq 30$，$0 \\leq m \\leq 100$，$1 \\leq v_i < 998244353$。\n\n::cute-table{tuack}\n\n|    测试点    |  $n$  |   $k$    |  $m$   |\n| :----------: | :---: | :------: | :----: |\n|  $1 \\sim 4$  | $=8$  | $\\leq n$ |  $=9$  |\n|  $5 \\sim 7$  | $=30$ | ^ |  $=7$  |\n| $8 \\sim 10$  | ^ | ^ | $=12$  |\n| $11 \\sim 13$ | ^ |   $=1$   | $=100$ |\n| $14 \\sim 15$ | $=5$  | $\\leq n$ | $=50$  |\n|     $16$     | $=15$ | ^ | $=100$ |\n| $17 \\sim 18$ | $=30$ | ^ | $=30$  |\n| $19 \\sim 20$ | ^ | ^ | $=100$ |", "locale": "zh-CN"}}}
{"pid": "P7962", "type": "P", "difficulty": 6, "samples": [["4\n1 2 4 6\n", "52\n"], ["见附件中的 variance/variance2.in", "见附件中的 variance/variance2.ans"], ["见附件中的 variance/variance3.in", "见附件中的 variance/variance3.ans"], ["见附件中的 variance/variance4.in", "见附件中的 variance/variance4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "NOIP 提高组", "O2优化", "模拟退火", "动态规划优化"], "title": "[NOIP2021] 方差", "background": "", "description": "给定长度为 $n$ 的非严格递增正整数数列 $1 \\le a_1 \\le a_2 \\le \\cdots \\le a_n$。每次可以进行的操作是：任意选择一个正整数 $1 < i < n$，将 $a_i$ 变为 $a_{i - 1} + a_{i + 1} - a_i$。求在若干次操作之后，该数列的方差最小值是多少。请输出最小值乘以 $n^2$ 的结果。\n\n其中方差的定义为：数列中每个数与平均值的差的平方的平均值。更形式化地说，方差的定义为 $D = \\frac{1}{n} \\sum_{i = 1}^{n} {(a_i - \\bar a)}^2$，其中 $\\bar a = \\frac{1}{n} \\sum_{i = 1}^{n} a_i$。", "inputFormat": "输入的第一行包含一个正整数 $n$，保证 $n \\le {10}^4$。\n\n输入的第二行有 $n$ 个正整数，其中第 $i$ 个数字表示 $a_i$ 的值。数据保证 $1 \\le a_1 \\le a_2 \\le \\cdots \\le a_n$。", "outputFormat": "输出仅一行，包含一个非负整数，表示你所求的方差的最小值的 $n^2$ 倍。", "hint": "**【样例解释 #1】**\n\n对于 $(a_1, a_2, a_3, a_4) = (1, 2, 4, 6)$，第一次操作得到的数列有 $(1, 3, 4, 6)$，第二次操作得到的新的数列有 $(1, 3, 5, 6)$。之后无法得到新的数列。\n\n对于 $(a_1, a_2, a_3, a_4) = (1, 2, 4, 6)$，平均值为 $\\frac{13}{4}$，方差为 $\\frac{1}{4}({(1 - \\frac{13}{4})}^2 + {(2 - \\frac{13}{4})}^2 + {(4 - \\frac{13}{4})}^2 + {(6 - \\frac{13}{4})}^2) = \\frac{59}{16}$。\n\n对于 $(a_1, a_2, a_3, a_4) = (1, 3, 4, 6)$，平均值为 $\\frac{7}{2}$，方差为 $\\frac{1}{4} ({(1 - \\frac{7}{2})}^2 + {(3 - \\frac{7}{2})}^2 + {(4 - \\frac{7}{2})}^2 + {(6 - \\frac{7}{2})}^2) = \\frac{13}{4}$。\n\n对于 $(a_1, a_2, a_3, a_4) = (1, 3, 5, 6)$，平均值为 $\\frac{15}{4}$，方差为 $\\frac{1}{4} ({(1 - \\frac{15}{4})}^2 + {(3 - \\frac{15}{4})}^2 + {(5 - \\frac{15}{4})}^2 + {(6 - \\frac{15}{4})}^2) = \\frac{59}{16}$。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $a_i \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $4$ | $10$ |\n| $4 \\sim 5$ | $10$ | $40$ |\n| $6 \\sim 8$ | $15$ | $20$ |\n| $9 \\sim 12$ | $20$ | $300$ |\n| $13 \\sim 15$ | $50$ | $70$ |\n| $16 \\sim 18$ | $100$ | $40$ |\n| $19 \\sim 22$ | $400$ | $600$ |\n| $23 \\sim 25$ | ${10}^4$ | $50$ |\n\n对于所有的数据，保证 $1 \\le n \\le {10}^4$，$1 \\le a_i \\le 600$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOIP2021] 方差", "background": "", "description": "给定长度为 $n$ 的非严格递增正整数数列 $1 \\le a_1 \\le a_2 \\le \\cdots \\le a_n$。每次可以进行的操作是：任意选择一个正整数 $1 < i < n$，将 $a_i$ 变为 $a_{i - 1} + a_{i + 1} - a_i$。求在若干次操作之后，该数列的方差最小值是多少。请输出最小值乘以 $n^2$ 的结果。\n\n其中方差的定义为：数列中每个数与平均值的差的平方的平均值。更形式化地说，方差的定义为 $D = \\frac{1}{n} \\sum_{i = 1}^{n} {(a_i - \\bar a)}^2$，其中 $\\bar a = \\frac{1}{n} \\sum_{i = 1}^{n} a_i$。", "inputFormat": "输入的第一行包含一个正整数 $n$，保证 $n \\le {10}^4$。\n\n输入的第二行有 $n$ 个正整数，其中第 $i$ 个数字表示 $a_i$ 的值。数据保证 $1 \\le a_1 \\le a_2 \\le \\cdots \\le a_n$。", "outputFormat": "输出仅一行，包含一个非负整数，表示你所求的方差的最小值的 $n^2$ 倍。", "hint": "**【样例解释 #1】**\n\n对于 $(a_1, a_2, a_3, a_4) = (1, 2, 4, 6)$，第一次操作得到的数列有 $(1, 3, 4, 6)$，第二次操作得到的新的数列有 $(1, 3, 5, 6)$。之后无法得到新的数列。\n\n对于 $(a_1, a_2, a_3, a_4) = (1, 2, 4, 6)$，平均值为 $\\frac{13}{4}$，方差为 $\\frac{1}{4}({(1 - \\frac{13}{4})}^2 + {(2 - \\frac{13}{4})}^2 + {(4 - \\frac{13}{4})}^2 + {(6 - \\frac{13}{4})}^2) = \\frac{59}{16}$。\n\n对于 $(a_1, a_2, a_3, a_4) = (1, 3, 4, 6)$，平均值为 $\\frac{7}{2}$，方差为 $\\frac{1}{4} ({(1 - \\frac{7}{2})}^2 + {(3 - \\frac{7}{2})}^2 + {(4 - \\frac{7}{2})}^2 + {(6 - \\frac{7}{2})}^2) = \\frac{13}{4}$。\n\n对于 $(a_1, a_2, a_3, a_4) = (1, 3, 5, 6)$，平均值为 $\\frac{15}{4}$，方差为 $\\frac{1}{4} ({(1 - \\frac{15}{4})}^2 + {(3 - \\frac{15}{4})}^2 + {(5 - \\frac{15}{4})}^2 + {(6 - \\frac{15}{4})}^2) = \\frac{59}{16}$。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $a_i \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $4$ | $10$ |\n| $4 \\sim 5$ | $10$ | $40$ |\n| $6 \\sim 8$ | $15$ | $20$ |\n| $9 \\sim 12$ | $20$ | $300$ |\n| $13 \\sim 15$ | $50$ | $70$ |\n| $16 \\sim 18$ | $100$ | $40$ |\n| $19 \\sim 22$ | $400$ | $600$ |\n| $23 \\sim 25$ | ${10}^4$ | $50$ |\n\n对于所有的数据，保证 $1 \\le n \\le {10}^4$，$1 \\le a_i \\le 600$。", "locale": "zh-CN"}}}
{"pid": "P7963", "type": "P", "difficulty": 7, "samples": [["1\n3 3 5\n13\n22\n23\n010\n233\n0 1 2 3\n1 2 2 1\n1 3 1 2\n0 2 3 2\n1 3 2 2\n", "4\n3\n3\n3\n2\n"], ["2\n2 3 4\n22\n33\n123\n0 2 1 2\n0 1 2 1\n1 2 1 3\n0 3 2 2\n3 2 3\n3\n1\n3\n32\n32\n0 2 1 2\n1 2 3 2\n0 1 2 2\n", "3\n4\n4\n2\n5\n5\n1\n"], ["见附件中的 chess/chess3.in", "见附件中的 chess/chess3.ans"], ["见附件中的 chess/chess4.in", "见附件中的 chess/chess4.ans"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["并查集", "2021", "NOIP 提高组", "O2优化", "线段树合并"], "title": "[NOIP2021] 棋局", "background": "在输了一晚上的麻将之后，小 z 和小 c 卸掉了手机上的所有牌类游戏。不过这怎么可能阻挡得了他们上课颓废的决心呢？现在他们的目光盯在了棋类游戏上，但他们两个除了天天下飞行棋以外，几乎所有棋类游戏都只懂个大概规则。\n\n“既然我们都会玩但只能玩一点点，不如我们自己搞个缝合怪出来吧！”\n\n于是，在他们的精心脑洞之下，一个融合了围棋、象棋与军棋的奇妙游戏诞生了……", "description": "游戏在一张长 $n$ 行宽 $m$ 列的网格形棋盘上进行，棋子落在网格的交叉点上，我们不妨记左上角的交叉点的坐标为 $(1,1)$，右下角的交叉点坐标为 $(n,m)$。\n\n棋子分为黑白两色，对局双方各执一方棋子。\n\n每个棋子除了颜色以外还有等级，不妨设 $\\mathit{col}_i$ 为棋子 $i$ 的颜色，$\\mathit{lv}_i$ 为棋子 $i$ 的等级。另外，棋盘上的网格线共有 $4$ 种状态，对于第 $i$ 条网格线，设其状态为 $\\mathit{opt}_i$。\n\n轮到每方下棋时，他可以选择棋盘上的一个己方棋子沿网格线进行移动到另一个交叉点，称为走子。形式化定义走子的过程如下：选择一个坐标序列 $(x_0,y_0),(x_1,y_1),\\ldots,(x_k,y_k)$，其中 $k$ 是任意选定的正整数，$(x_0,y_0)$ 是棋子初始的位置，$(x_k,y_k)$ 是棋子最终走到的位置，需要满足：\n\n- 对于任意 $i=0,1,\\ldots,k-1$，坐标 $(x_i,y_i)$ 和 $(x_{i+1},y_{i+1})$ 之间必须有网格线直接相连，也就是说**走子必须沿着网格线走**；\n- 对于任意 $i\\not=j$，必须有 $(x_i,y_i)\\ne(x_j,y_j)$，也就是说走子过程中不能经过重复位置，特别地 $(x_0,y_0)\\ne(x_k,y_k)$，也就是说**不能原地不动（或走回原地）**；\n- 对于任意 $i=1,\\ldots,k-1$，坐标 $(x_i,y_i)$ 上必须没有棋子，也就是说**走子时不能越过已有的棋子**；\n- 若 $(x_k,y_k)$ 上没有棋子，称为普通走子，否则称为吃子。在吃子过程中，设正在走的棋子颜色为 $\\mathit{col}_1$，等级为 $\\mathit{lv}_1$，被吃的棋子颜色为 $\\mathit{col}_2$，等级为 $\\mathit{lv}_2$，则必须满足 $\\mathit{col}_1\\ne\\mathit{col}_2,\\mathit{lv}_1\\geq\\mathit{lv}_2$，换句话说**只能吃与自己颜色不同，且等级不高于自己等级的棋子**。\n\n需要注意的是，由上述定义可以得出，不允许棋子在吃子后继续向前走。\n\n网格线的状态含义如下所述：\n\n- 如果 $\\mathit{opt}_i=0$，代表此路不通，走子时不能经过这条网格线；\n- 如果 $\\mathit{opt}_i=1$，代表这条网格线是一条“普通道路”，每次走子时棋子最多只能经过 $1$ 条普通道路。\n- 如果 $\\mathit{opt}_i=2$，代表这条网格线是一条“直行道路”，每次走子时棋子可以经过任意条直行道路，但只能**一直沿横向或一直沿纵向走，不能转弯**。如沿直行道路从 $(1,1)$ 经过 $(1,2)$ 走到 $(1,3)$ 是可以的，但是从 $(1,1)$ 经过 $(1,2)$ 走到 $(2,2)$ 不行。\n- 如果 $\\mathit{opt}_i=3$，代表这条网格线是一条“互通道路”，每次走子时棋子可以经过任意条互通道路，且中途可任意转弯。\n\n同时规定在一次走子过程中，**棋子经过的网格线的状态必须全部相同**，比如从 $(1,1)$ 经过直行道路走到 $(1,2)$ 再经过互通道路走到 $(1,3)$ 是不允许的。\n\n至于如何判断胜负等其它细节，与本题无关，故略去。\n\n小 z 和小 c 开发出这款棋类游戏后，为了提升水平，想了一个训练的策略：一开始棋盘是空的，然后小 c 会每次往棋盘的某个空交叉点上放一枚棋子，小 z 需要快速计算出：若选择这枚新放上的棋子进行一次走子，棋盘上一共有多少个位置是能被走到的？注意：因为这只是思维训练，他们并不会真的走这枚棋子。\n\n可怜的小 z 发现他的计算力不足以算出这个问题，只好向你求助。", "inputFormat": "每个测试点由多组数据组成。\n\n第一行：一个正整数 $T$ 表示数据组数。\n\n对于每组数据：\n\n第一行：三个正整数 $n, m, q$，分别表示棋盘的行数、列数和游戏的轮数。\n\n接下来 $n$ 行，每行为一个长 $m - 1$ 的字符串，每个字符为 $\\texttt{0}$、$\\texttt{1}$、$\\texttt{2}$、$\\texttt{3}$ 中的一个，第 $i$ 行第 $j$ 个字符表示交叉点 $(i, j)$ 连向交叉点 $(i, j + 1)$ 的网格线状态。 \n\n接下来 $n - 1$ 行，每行为一个长 $m$ 的字符串，每个字符为 $\\texttt{0}$、$\\texttt{1}$、$\\texttt{2}$、$\\texttt{3}$ 中的一个，第 $i$ 行第 $j$ 个字符表示交叉点 $(i, j)$ 连向交叉点 $(i + 1, j)$ 的网格线状态。\n\n接下来 $q$ 行，每行 $4$ 个非负整数 $\\mathit{col}_i , \\mathit{lv}_i , x_i , y_i$，表示在第 $i$ 轮有一枚颜色为 $\\mathit{col}_i$，等级为 $\\mathit{lv}_i$ 的棋子放在了交叉点 $(x_i , y_i)$ 上。其中 $\\mathit{col}_i = 0$ 表示黑子，$\\mathit{col}_i = 1$ 表示白子。保证之前交叉点 $(x_i , y_i)$ 上没有棋子。", "outputFormat": "对于每组数据输出 $q$ 行，每行一个非负整数，表示第 $i$ 枚棋子放置后能走到的交叉点数量。", "hint": "**【样例解释 #1】**\n\n放置棋子 $1$ 后，它能走到的位置为 $(2, 1),(2, 2),(3, 2),(3, 3)$。\n\n放置棋子 $2$ 后，它能走到的位置为 $(2, 2),(2, 3),(3, 1)$。\n\n放置棋子 $3$ 后，它能走到的位置为 $(1, 1),(1, 3),(2, 2)$。\n\n放置棋子 $4$ 后，它能走到的位置为 $(2, 2),(3, 1),(3, 3)$。\n\n放置棋子 $5$ 后，它能走到的位置为 $(2, 3),(3, 2)$。\n\n\n**【数据范围】**\n\n| 测试点编号 | $n \\times m \\le$ | $q \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 2$ | $100$ | $50$ | 无 |\n| $3 \\sim 6$ | $5000$ | $2000$ | 无 |\n| $7 \\sim 8$ | $2 \\times {10}^5$ | ${10}^5$ | 不存在“直行道路”与“互通道路” |\n| $9 \\sim 11$ | $2 \\times {10}^5$ | ${10}^5$ | 不存在“互通道路” |\n| $12 \\sim 14$ | $2 \\times {10}^5$ | ${10}^5$ | 不存在“直行道路” |\n| $15 \\sim 16$ | $2 \\times {10}^5$ | ${10}^5$ | $\\mathit{lv}_i = i$ |\n| $17 \\sim 18$ | $2 \\times {10}^5$ | ${10}^5$ | $\\mathit{lv}_i = q - i + 1$ |\n| $19 \\sim 21$ | $2 \\times {10}^5$ | $2000$ | $n, m \\le 1000$ |\n| $22 \\sim 25$ | $2 \\times {10}^5$ | ${10}^5$ | 无 |\n\n对于 $100 \\%$ 的数据，$1 \\le T \\le 5$，$2 \\le n, m \\le {10}^5$，$4 \\le n \\times m \\le 2 \\times {10}^5$，$1 \\le q \\le \\min \\{ {10}^5, n \\times m \\}$，$1 \\le \\mathit{lv}_i \\le q$，$1 \\le x_i \\le n$，$1 \\le y_i \\le m$，$\\mathit{col}_i \\in \\{ 0, 1 \\}$。\n\n注：由于本题输入输出规模较大，建议使用较为快速的输入输出方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOIP2021] 棋局", "background": "在输了一晚上的麻将之后，小 z 和小 c 卸掉了手机上的所有牌类游戏。不过这怎么可能阻挡得了他们上课颓废的决心呢？现在他们的目光盯在了棋类游戏上，但他们两个除了天天下飞行棋以外，几乎所有棋类游戏都只懂个大概规则。\n\n“既然我们都会玩但只能玩一点点，不如我们自己搞个缝合怪出来吧！”\n\n于是，在他们的精心脑洞之下，一个融合了围棋、象棋与军棋的奇妙游戏诞生了……", "description": "游戏在一张长 $n$ 行宽 $m$ 列的网格形棋盘上进行，棋子落在网格的交叉点上，我们不妨记左上角的交叉点的坐标为 $(1,1)$，右下角的交叉点坐标为 $(n,m)$。\n\n棋子分为黑白两色，对局双方各执一方棋子。\n\n每个棋子除了颜色以外还有等级，不妨设 $\\mathit{col}_i$ 为棋子 $i$ 的颜色，$\\mathit{lv}_i$ 为棋子 $i$ 的等级。另外，棋盘上的网格线共有 $4$ 种状态，对于第 $i$ 条网格线，设其状态为 $\\mathit{opt}_i$。\n\n轮到每方下棋时，他可以选择棋盘上的一个己方棋子沿网格线进行移动到另一个交叉点，称为走子。形式化定义走子的过程如下：选择一个坐标序列 $(x_0,y_0),(x_1,y_1),\\ldots,(x_k,y_k)$，其中 $k$ 是任意选定的正整数，$(x_0,y_0)$ 是棋子初始的位置，$(x_k,y_k)$ 是棋子最终走到的位置，需要满足：\n\n- 对于任意 $i=0,1,\\ldots,k-1$，坐标 $(x_i,y_i)$ 和 $(x_{i+1},y_{i+1})$ 之间必须有网格线直接相连，也就是说**走子必须沿着网格线走**；\n- 对于任意 $i\\not=j$，必须有 $(x_i,y_i)\\ne(x_j,y_j)$，也就是说走子过程中不能经过重复位置，特别地 $(x_0,y_0)\\ne(x_k,y_k)$，也就是说**不能原地不动（或走回原地）**；\n- 对于任意 $i=1,\\ldots,k-1$，坐标 $(x_i,y_i)$ 上必须没有棋子，也就是说**走子时不能越过已有的棋子**；\n- 若 $(x_k,y_k)$ 上没有棋子，称为普通走子，否则称为吃子。在吃子过程中，设正在走的棋子颜色为 $\\mathit{col}_1$，等级为 $\\mathit{lv}_1$，被吃的棋子颜色为 $\\mathit{col}_2$，等级为 $\\mathit{lv}_2$，则必须满足 $\\mathit{col}_1\\ne\\mathit{col}_2,\\mathit{lv}_1\\geq\\mathit{lv}_2$，换句话说**只能吃与自己颜色不同，且等级不高于自己等级的棋子**。\n\n需要注意的是，由上述定义可以得出，不允许棋子在吃子后继续向前走。\n\n网格线的状态含义如下所述：\n\n- 如果 $\\mathit{opt}_i=0$，代表此路不通，走子时不能经过这条网格线；\n- 如果 $\\mathit{opt}_i=1$，代表这条网格线是一条“普通道路”，每次走子时棋子最多只能经过 $1$ 条普通道路。\n- 如果 $\\mathit{opt}_i=2$，代表这条网格线是一条“直行道路”，每次走子时棋子可以经过任意条直行道路，但只能**一直沿横向或一直沿纵向走，不能转弯**。如沿直行道路从 $(1,1)$ 经过 $(1,2)$ 走到 $(1,3)$ 是可以的，但是从 $(1,1)$ 经过 $(1,2)$ 走到 $(2,2)$ 不行。\n- 如果 $\\mathit{opt}_i=3$，代表这条网格线是一条“互通道路”，每次走子时棋子可以经过任意条互通道路，且中途可任意转弯。\n\n同时规定在一次走子过程中，**棋子经过的网格线的状态必须全部相同**，比如从 $(1,1)$ 经过直行道路走到 $(1,2)$ 再经过互通道路走到 $(1,3)$ 是不允许的。\n\n至于如何判断胜负等其它细节，与本题无关，故略去。\n\n小 z 和小 c 开发出这款棋类游戏后，为了提升水平，想了一个训练的策略：一开始棋盘是空的，然后小 c 会每次往棋盘的某个空交叉点上放一枚棋子，小 z 需要快速计算出：若选择这枚新放上的棋子进行一次走子，棋盘上一共有多少个位置是能被走到的？注意：因为这只是思维训练，他们并不会真的走这枚棋子。\n\n可怜的小 z 发现他的计算力不足以算出这个问题，只好向你求助。", "inputFormat": "每个测试点由多组数据组成。\n\n第一行：一个正整数 $T$ 表示数据组数。\n\n对于每组数据：\n\n第一行：三个正整数 $n, m, q$，分别表示棋盘的行数、列数和游戏的轮数。\n\n接下来 $n$ 行，每行为一个长 $m - 1$ 的字符串，每个字符为 $\\texttt{0}$、$\\texttt{1}$、$\\texttt{2}$、$\\texttt{3}$ 中的一个，第 $i$ 行第 $j$ 个字符表示交叉点 $(i, j)$ 连向交叉点 $(i, j + 1)$ 的网格线状态。 \n\n接下来 $n - 1$ 行，每行为一个长 $m$ 的字符串，每个字符为 $\\texttt{0}$、$\\texttt{1}$、$\\texttt{2}$、$\\texttt{3}$ 中的一个，第 $i$ 行第 $j$ 个字符表示交叉点 $(i, j)$ 连向交叉点 $(i + 1, j)$ 的网格线状态。\n\n接下来 $q$ 行，每行 $4$ 个非负整数 $\\mathit{col}_i , \\mathit{lv}_i , x_i , y_i$，表示在第 $i$ 轮有一枚颜色为 $\\mathit{col}_i$，等级为 $\\mathit{lv}_i$ 的棋子放在了交叉点 $(x_i , y_i)$ 上。其中 $\\mathit{col}_i = 0$ 表示黑子，$\\mathit{col}_i = 1$ 表示白子。保证之前交叉点 $(x_i , y_i)$ 上没有棋子。", "outputFormat": "对于每组数据输出 $q$ 行，每行一个非负整数，表示第 $i$ 枚棋子放置后能走到的交叉点数量。", "hint": "**【样例解释 #1】**\n\n放置棋子 $1$ 后，它能走到的位置为 $(2, 1),(2, 2),(3, 2),(3, 3)$。\n\n放置棋子 $2$ 后，它能走到的位置为 $(2, 2),(2, 3),(3, 1)$。\n\n放置棋子 $3$ 后，它能走到的位置为 $(1, 1),(1, 3),(2, 2)$。\n\n放置棋子 $4$ 后，它能走到的位置为 $(2, 2),(3, 1),(3, 3)$。\n\n放置棋子 $5$ 后，它能走到的位置为 $(2, 3),(3, 2)$。\n\n\n**【数据范围】**\n\n| 测试点编号 | $n \\times m \\le$ | $q \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 2$ | $100$ | $50$ | 无 |\n| $3 \\sim 6$ | $5000$ | $2000$ | 无 |\n| $7 \\sim 8$ | $2 \\times {10}^5$ | ${10}^5$ | 不存在“直行道路”与“互通道路” |\n| $9 \\sim 11$ | $2 \\times {10}^5$ | ${10}^5$ | 不存在“互通道路” |\n| $12 \\sim 14$ | $2 \\times {10}^5$ | ${10}^5$ | 不存在“直行道路” |\n| $15 \\sim 16$ | $2 \\times {10}^5$ | ${10}^5$ | $\\mathit{lv}_i = i$ |\n| $17 \\sim 18$ | $2 \\times {10}^5$ | ${10}^5$ | $\\mathit{lv}_i = q - i + 1$ |\n| $19 \\sim 21$ | $2 \\times {10}^5$ | $2000$ | $n, m \\le 1000$ |\n| $22 \\sim 25$ | $2 \\times {10}^5$ | ${10}^5$ | 无 |\n\n对于 $100 \\%$ 的数据，$1 \\le T \\le 5$，$2 \\le n, m \\le {10}^5$，$4 \\le n \\times m \\le 2 \\times {10}^5$，$1 \\le q \\le \\min \\{ {10}^5, n \\times m \\}$，$1 \\le \\mathit{lv}_i \\le q$，$1 \\le x_i \\le n$，$1 \\le y_i \\le m$，$\\mathit{col}_i \\in \\{ 0, 1 \\}$。\n\n注：由于本题输入输出规模较大，建议使用较为快速的输入输出方式。", "locale": "zh-CN"}}}
{"pid": "P7964", "type": "P", "difficulty": 1, "samples": [["3\nsection zivotinje\nsection boje\nsection voce", "1 zivotinje\n2 boje\n3 voce"], ["4\nsection zivotinje\nsubsection macke\nsubsection psi\nsubsubsection mops", "1 zivotinje\n1.1 macke\n1.2 psi\n1.2.1 mops"], ["4\nsection zivotinje\nsubsection psi\nsection voce\nsubsection ananas", "1 zivotinje\n1.1 psi\n2 voce\n2.1 ananas"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #2] Kaučuk", "background": "", "description": "Kaučuk 程序只有下列三种命令：\n\n- $\\texttt{section}$：创建新的一级标题，序号从 $1$ 开始标记。\n- $\\texttt{subsection}$：创建新的二级标题，序号在每个一级标题的基础上从 $1$ 开始标记。\n- $\\texttt{subsubsection}$：创建新的三级标题，序号在每个二级标题的基础上从 $1$ 开始标记。\n\n给定 $n$ 组命令及标题名称，输出所有标题序号及其名称。", "inputFormat": "第一行一个正整数 $n$，表示命令的数量。\n\n接下来的 $n$ 行，每行输入命令名称（$\\texttt{section}$、$\\texttt{subsection}$、$\\texttt{subsubsection}$ 之一）和标题名称。标题名称由不超过 $20$ 个小写英文字母组成。", "outputFormat": "共 $n$ 行，表示所有标题序号及其名称。", "hint": "**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$1 \\le n \\le 3$。\n- Subtask 2（10 pts）：只包含 $\\texttt{section}$ 命令。\n- Subtask 3（10 pts）：只包含 $\\texttt{section}$ 和 $\\texttt{subsection}$ 命令。\n- Subtask 4（20 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$n \\le 100$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #2](https://hsin.hr/coci/contest2_tasks.pdf) _Task 1 Kaučuk_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #2] Kaučuk", "background": "", "description": "Kaučuk 程序只有下列三种命令：\n\n- $\\texttt{section}$：创建新的一级标题，序号从 $1$ 开始标记。\n- $\\texttt{subsection}$：创建新的二级标题，序号在每个一级标题的基础上从 $1$ 开始标记。\n- $\\texttt{subsubsection}$：创建新的三级标题，序号在每个二级标题的基础上从 $1$ 开始标记。\n\n给定 $n$ 组命令及标题名称，输出所有标题序号及其名称。", "inputFormat": "第一行一个正整数 $n$，表示命令的数量。\n\n接下来的 $n$ 行，每行输入命令名称（$\\texttt{section}$、$\\texttt{subsection}$、$\\texttt{subsubsection}$ 之一）和标题名称。标题名称由不超过 $20$ 个小写英文字母组成。", "outputFormat": "共 $n$ 行，表示所有标题序号及其名称。", "hint": "**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$1 \\le n \\le 3$。\n- Subtask 2（10 pts）：只包含 $\\texttt{section}$ 命令。\n- Subtask 3（10 pts）：只包含 $\\texttt{section}$ 和 $\\texttt{subsection}$ 命令。\n- Subtask 4（20 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$n \\le 100$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #2](https://hsin.hr/coci/contest2_tasks.pdf) _Task 1 Kaučuk_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN"}}}
{"pid": "P7965", "type": "P", "difficulty": 3, "samples": [["4 1 3\n1 2 4 3\n1 1\n1 2\n3 4", "DA\nNE\nDA"], ["4 2 4\n2 1 3 4\n1 2 4 3\n2 1\n3 4\n1 4\n2 3", "DA\nDA\nNE\nNE"], ["6 2 2\n2 1 4 5 3 6\n3 2 4 1 5 6\n1 5\n6 3", "DA\nNE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "2021", "广度优先搜索 BFS", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #2] Kutije", "background": "", "description": "Matrin 有 $n$ 个箱子的玩具。箱子分别用序号 $1,2,3,\\cdots,n$ 表示。初始状态下，每个箱子中有一个与箱子编号相同的玩具。\n\nMatrin 邀请了 $m$ 位朋友来家玩玩具。他注意到，每一位朋友在玩完玩具之后，都会将原先位于 $i$ 号箱子内的玩具放入 $p_i$ 号箱内。\n\n给定 $q$ 组询问，每次可随意邀请朋友并自由选择顺序，同时每位朋友可以邀请任意多次。问是否存在一种方案，使得 $a$ 号玩具最终被放入 $b$ 号箱子中。", "inputFormat": "第一行三个正整数 $n,m,q$，分别表示箱子 / 玩具、朋友和询问的数量。\n\n接下来的 $m$ 行，每行 $n$ 个整数 $p_i$。数据保证 $p_i$ 是 $1 \\sim n$ 的一个排列。\n\n接下来的 $q$ 行，每行两个整数 $a,b$。", "outputFormat": "共 $q$ 行，每行输出一个字符串 $\\texttt{DA}$（是）或 $\\texttt{NE}$（否）。", "hint": "**【样例 1 解释】**\n\n- 询问 $1$：初始状态下，$1$ 号玩具已经在 $1$ 号箱子内，故输出 $\\texttt{DA}$。\n- 询问 $2$：第二组询问：无符合题意的方案，输出 $\\texttt{NE}$。\n- 询问 $3$：邀请 $1$ 号朋友前来即可，输出 $\\texttt{DA}$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（15 pts）：$m=1$。\n- Subtask 2（10 pts）：$1 \\le n,m,q \\le 100$；对于每组询问，若答案为 $\\texttt{DA}$，则保证存在一种邀请朋友数量不超过 $2$ 的方案。\n- Subtask 3（10 pts）：$1 \\le n,m,q \\le 100$。\n- Subtask 4（35 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 1000$，$1 \\le q \\le 5 \\times 10^5$，$1 \\le a,b \\le n$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #2](https://hsin.hr/coci/contest2_tasks.pdf) _Task 2 Kutije_。**\n\n**本题分值按 COCI 原题设置，满分 $70$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #2] Kutije", "background": "", "description": "Matrin 有 $n$ 个箱子的玩具。箱子分别用序号 $1,2,3,\\cdots,n$ 表示。初始状态下，每个箱子中有一个与箱子编号相同的玩具。\n\nMatrin 邀请了 $m$ 位朋友来家玩玩具。他注意到，每一位朋友在玩完玩具之后，都会将原先位于 $i$ 号箱子内的玩具放入 $p_i$ 号箱内。\n\n给定 $q$ 组询问，每次可随意邀请朋友并自由选择顺序，同时每位朋友可以邀请任意多次。问是否存在一种方案，使得 $a$ 号玩具最终被放入 $b$ 号箱子中。", "inputFormat": "第一行三个正整数 $n,m,q$，分别表示箱子 / 玩具、朋友和询问的数量。\n\n接下来的 $m$ 行，每行 $n$ 个整数 $p_i$。数据保证 $p_i$ 是 $1 \\sim n$ 的一个排列。\n\n接下来的 $q$ 行，每行两个整数 $a,b$。", "outputFormat": "共 $q$ 行，每行输出一个字符串 $\\texttt{DA}$（是）或 $\\texttt{NE}$（否）。", "hint": "**【样例 1 解释】**\n\n- 询问 $1$：初始状态下，$1$ 号玩具已经在 $1$ 号箱子内，故输出 $\\texttt{DA}$。\n- 询问 $2$：第二组询问：无符合题意的方案，输出 $\\texttt{NE}$。\n- 询问 $3$：邀请 $1$ 号朋友前来即可，输出 $\\texttt{DA}$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（15 pts）：$m=1$。\n- Subtask 2（10 pts）：$1 \\le n,m,q \\le 100$；对于每组询问，若答案为 $\\texttt{DA}$，则保证存在一种邀请朋友数量不超过 $2$ 的方案。\n- Subtask 3（10 pts）：$1 \\le n,m,q \\le 100$。\n- Subtask 4（35 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 1000$，$1 \\le q \\le 5 \\times 10^5$，$1 \\le a,b \\le n$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #2](https://hsin.hr/coci/contest2_tasks.pdf) _Task 2 Kutije_。**\n\n**本题分值按 COCI 原题设置，满分 $70$。**", "locale": "zh-CN"}}}
{"pid": "P7966", "type": "P", "difficulty": 6, "samples": [["1\n0 1", "1\n0 1"], ["2\n0 1\n1 2", "2\n0 1 3\n0 2 3"], ["3\n0 1\n0 2\n0 3", "4\n0 1 2 4\n3 1 2 7\n5 1 4 7\n6 2 4 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "2021", "Special Judge", "广度优先搜索 BFS", "位运算", "构造", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #2] Hiperkocka", "background": "", "description": "给定一个 $n$ 维的超正方体。\n\n将该超正方体抽象为一个含 $2^n$ 个结点的图，结点分别用序号 $0,1,\\cdots,2^n-1$ 表示。两个结点 $x,y$ 联通，当且仅当 $x \\oplus y$ 为 $2$ 的整数幂。\n\n现需将若干棵含有 $n$ 条边的树 $T$ 放置于该超正方体中。结点分别用序号 $0,1,\\cdots,n$ 表示。给定每棵树的 $n$ 条边所连接的点的序号，则每一棵树需满足下列条件：\n\n- 每个树上的结点都与超正方体的其中一个结点一一对应\n- 每个结点互不相同\n- 每一棵树的每一条边所连接的两个结点在超正方体中所对应的两个结点在超正方体中有边相连（即对应的两个结点的异或值为 $2$ 的整数幂）\n- 每两棵树的边集在超正方体中所对应的边集不交，即超正方体中的每条边最多包含于一棵树中\n\n请给定一种放置方案，使得放在超正方体中的每一棵树都符合题意。", "inputFormat": "第一行一个正整数 $n$，表示超正方体的维数。\n\n接下来的 $n$ 行，每行两个整数 $x,y$，表示在每棵树 $T$ 中，有一条连接 $x,y$ 的边。", "outputFormat": "第一行输出放置的树的数目 $k$。\n\n接下来的 $k$ 行，每行输出 $n+1$ 个整数，表示这棵树的对应结点在超正方体中的结点编号。", "hint": "**【样例 3 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/58a0p43i.png)\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 16$，$0 \\le x,y \\le n$，$x \\neq y$。\n\n**【提示与说明】**\n\n如果程序正确地放置了 $k$ 棵树，则每个测试点的得分为 $f(k) \\cdot 110$，其中：\n\n$$f(k)=\\begin{cases}\n\\dfrac{0.7k}{2^{n-1}} & (k \\lt 2^{n-1}) \\cr\n1 & (k=2^{n-1}) \\cr\n\\end{cases}$$\n\n若放置方式错误，则该测试点得分为 $0$。可以证明，总存在一种方式可以放置 $2^{n-1}$ 棵树。\n\n因评分方式特殊，本题启用自行编写的 [Special Judge](https://www.luogu.com.cn/discuss/738608)，欢迎大家 hack。\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #2](https://hsin.hr/coci/contest2_tasks.pdf) _Task 3 Hiperkocka_。**\n\n**本题在 COCI 原题中满分 $110$，但由于为了计算方便，将满分修改为 $26 \\times 5=130$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #2] Hiperkocka", "background": "", "description": "给定一个 $n$ 维的超正方体。\n\n将该超正方体抽象为一个含 $2^n$ 个结点的图，结点分别用序号 $0,1,\\cdots,2^n-1$ 表示。两个结点 $x,y$ 联通，当且仅当 $x \\oplus y$ 为 $2$ 的整数幂。\n\n现需将若干棵含有 $n$ 条边的树 $T$ 放置于该超正方体中。结点分别用序号 $0,1,\\cdots,n$ 表示。给定每棵树的 $n$ 条边所连接的点的序号，则每一棵树需满足下列条件：\n\n- 每个树上的结点都与超正方体的其中一个结点一一对应\n- 每个结点互不相同\n- 每一棵树的每一条边所连接的两个结点在超正方体中所对应的两个结点在超正方体中有边相连（即对应的两个结点的异或值为 $2$ 的整数幂）\n- 每两棵树的边集在超正方体中所对应的边集不交，即超正方体中的每条边最多包含于一棵树中\n\n请给定一种放置方案，使得放在超正方体中的每一棵树都符合题意。", "inputFormat": "第一行一个正整数 $n$，表示超正方体的维数。\n\n接下来的 $n$ 行，每行两个整数 $x,y$，表示在每棵树 $T$ 中，有一条连接 $x,y$ 的边。", "outputFormat": "第一行输出放置的树的数目 $k$。\n\n接下来的 $k$ 行，每行输出 $n+1$ 个整数，表示这棵树的对应结点在超正方体中的结点编号。", "hint": "**【样例 3 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/58a0p43i.png)\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 16$，$0 \\le x,y \\le n$，$x \\neq y$。\n\n**【提示与说明】**\n\n如果程序正确地放置了 $k$ 棵树，则每个测试点的得分为 $f(k) \\cdot 110$，其中：\n\n$$f(k)=\\begin{cases}\n\\dfrac{0.7k}{2^{n-1}} & (k \\lt 2^{n-1}) \\cr\n1 & (k=2^{n-1}) \\cr\n\\end{cases}$$\n\n若放置方式错误，则该测试点得分为 $0$。可以证明，总存在一种方式可以放置 $2^{n-1}$ 棵树。\n\n因评分方式特殊，本题启用自行编写的 [Special Judge](https://www.luogu.com.cn/discuss/738608)，欢迎大家 hack。\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #2](https://hsin.hr/coci/contest2_tasks.pdf) _Task 3 Hiperkocka_。**\n\n**本题在 COCI 原题中满分 $110$，但由于为了计算方便，将满分修改为 $26 \\times 5=130$。**", "locale": "zh-CN"}}}
{"pid": "P7967", "type": "P", "difficulty": 6, "samples": [["1 10\n10", "10"], ["4 4\n1 1 1 1", "24"], ["3 4\n1 2 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #2] Magneti", "background": "", "description": "给定 $n$ 个磁铁和 $l$ 个空位，其中相邻空位之间的距离为 $1$，每个空位可放置一个磁铁。所有 $n$ 个磁铁都必须被放置。每个磁铁可以吸引距离小于 $r_i$ 的其它磁铁。\n\n求所有磁铁互不吸引的方案总数对 $10^9+7$ 取模的结果。", "inputFormat": "第一行两个正整数 $n,l$，分别表示磁铁和空位数量。\n\n第二行 $n$ 个整数 $r_i$。", "outputFormat": "输出方案总数对 $10^9+7$ 取模的结果。", "hint": "**【样例 2 解释】** 四个磁铁的所有排列都符合题意。\n\n**【样例 3 解释】**\n\n用 $\\texttt{1,2,3}$ 表示磁铁，$\\texttt \\_$ 表示空位，则所有方案为：$\\texttt{13\\_2}$、$\\texttt{31\\_2}$、$\\texttt{2\\_13}$ 和 $\\texttt{2\\_31}$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$r_1=r_2=\\cdots=r_n$。\n- Subtask 2（20 pts）：$1 \\le n \\le 10$。\n- Subtask 3（30 pts）：$1 \\le n \\le 30$，$n \\le l \\le 300$。\n- Subtask 4（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 50$，$n \\le l \\le 10000$，$1 \\le r_i \\le l$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #2](https://hsin.hr/coci/contest2_tasks.pdf) _Task 4 Magneti_。**\n\n**本题分值按 COCI 原题设置，满分 $110$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #2] Magneti", "background": "", "description": "给定 $n$ 个磁铁和 $l$ 个空位，其中相邻空位之间的距离为 $1$，每个空位可放置一个磁铁。所有 $n$ 个磁铁都必须被放置。每个磁铁可以吸引距离小于 $r_i$ 的其它磁铁。\n\n求所有磁铁互不吸引的方案总数对 $10^9+7$ 取模的结果。", "inputFormat": "第一行两个正整数 $n,l$，分别表示磁铁和空位数量。\n\n第二行 $n$ 个整数 $r_i$。", "outputFormat": "输出方案总数对 $10^9+7$ 取模的结果。", "hint": "**【样例 2 解释】** 四个磁铁的所有排列都符合题意。\n\n**【样例 3 解释】**\n\n用 $\\texttt{1,2,3}$ 表示磁铁，$\\texttt \\_$ 表示空位，则所有方案为：$\\texttt{13\\_2}$、$\\texttt{31\\_2}$、$\\texttt{2\\_13}$ 和 $\\texttt{2\\_31}$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$r_1=r_2=\\cdots=r_n$。\n- Subtask 2（20 pts）：$1 \\le n \\le 10$。\n- Subtask 3（30 pts）：$1 \\le n \\le 30$，$n \\le l \\le 300$。\n- Subtask 4（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 50$，$n \\le l \\le 10000$，$1 \\le r_i \\le l$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #2](https://hsin.hr/coci/contest2_tasks.pdf) _Task 4 Magneti_。**\n\n**本题分值按 COCI 原题设置，满分 $110$。**", "locale": "zh-CN"}}}
{"pid": "P7968", "type": "P", "difficulty": 6, "samples": [["2\n1 1\n1 1\n3\n1 1\n2 2\n1 2", "1\n1\n2"], ["3\n1 1\n2 2\n3 3\n3\n1 1\n2 3\n1 3", "1\n1\n1"], ["5\n1 3\n3 3\n4 6\n2 3\n1 1\n3\n1 4\n3 5\n1 5", "3\n1\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #2] Osumnjičeni", "background": "", "description": "现有 $n$ 个嫌疑人。由于其身高的不确定性，只知道每个嫌疑人的身高范围 $[l_i,r_i]$。\n\n每次调查可以选取编号范围为 $[a,b]$ 内的所有嫌疑人，要求他们的身高范围没有交集。若嫌疑人在某次调查中出现，则目击者可以立即作出正确的判断。\n\n给定 $q$ 组询问，每次给出 $p_i,q_i$。求在嫌疑人锁定在 $[p_i,q_i]$ 范围内的前提下，最多需要进行多少次调查。", "inputFormat": "第一行一个正整数 $n$，表示嫌疑人的数量。\n\n接下来的 $n$ 行，每行两个正整数 $l_i,r_i$，表示第 $i$ 个嫌疑人的身高范围。\n\n接下来的一行，一个正整数 $q$，表示询问组数。\n\n接下来的 $q$ 行，每行两个正整数 $p_i,q_i$，表示一组询问。", "outputFormat": "共 $q$ 行，表示每组询问的答案。", "hint": "**【样例 3 解释】**\n\n- 询问 $1,3$：在 $[1,1],[2,3],[4,5]$ 范围内进行调查即可，答案为 $3$。\n- 询问 $2$：调查 $[3,5]$ 即可，答案为 $1$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$q=p_1=1$，$q_1=n$。\n- Subtask 2（10 pts）：$1 \\le n,q \\le 5000$。\n- Subtask 3（20 pts）：$1 \\le n \\le 5000$。\n- Subtask 4（20 pts）：$1 \\le q \\le 100$。\n- Subtask 5（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,q \\le 2 \\times 10^5$，$1 \\le a \\le b \\le n$，$1 \\le l_i \\le r_i \\le 10^9$，$1 \\le p_i \\le q_i \\le n$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #2](https://hsin.hr/coci/contest2_tasks.pdf) _Task 5 Osumnjičeni_。**\n\n**本题分值按 COCI 原题设置，满分 $110$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #2] Osumnjičeni", "background": "", "description": "现有 $n$ 个嫌疑人。由于其身高的不确定性，只知道每个嫌疑人的身高范围 $[l_i,r_i]$。\n\n每次调查可以选取编号范围为 $[a,b]$ 内的所有嫌疑人，要求他们的身高范围没有交集。若嫌疑人在某次调查中出现，则目击者可以立即作出正确的判断。\n\n给定 $q$ 组询问，每次给出 $p_i,q_i$。求在嫌疑人锁定在 $[p_i,q_i]$ 范围内的前提下，最多需要进行多少次调查。", "inputFormat": "第一行一个正整数 $n$，表示嫌疑人的数量。\n\n接下来的 $n$ 行，每行两个正整数 $l_i,r_i$，表示第 $i$ 个嫌疑人的身高范围。\n\n接下来的一行，一个正整数 $q$，表示询问组数。\n\n接下来的 $q$ 行，每行两个正整数 $p_i,q_i$，表示一组询问。", "outputFormat": "共 $q$ 行，表示每组询问的答案。", "hint": "**【样例 3 解释】**\n\n- 询问 $1,3$：在 $[1,1],[2,3],[4,5]$ 范围内进行调查即可，答案为 $3$。\n- 询问 $2$：调查 $[3,5]$ 即可，答案为 $1$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$q=p_1=1$，$q_1=n$。\n- Subtask 2（10 pts）：$1 \\le n,q \\le 5000$。\n- Subtask 3（20 pts）：$1 \\le n \\le 5000$。\n- Subtask 4（20 pts）：$1 \\le q \\le 100$。\n- Subtask 5（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,q \\le 2 \\times 10^5$，$1 \\le a \\le b \\le n$，$1 \\le l_i \\le r_i \\le 10^9$，$1 \\le p_i \\le q_i \\le n$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #2](https://hsin.hr/coci/contest2_tasks.pdf) _Task 5 Osumnjičeni_。**\n\n**本题分值按 COCI 原题设置，满分 $110$。**", "locale": "zh-CN"}}}
{"pid": "P7969", "type": "P", "difficulty": 5, "samples": [["5 4 1\n?????", "4"], ["5 2 2\nA????", "6"], ["5 3 4\nAAAAA", "0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "前缀和"], "title": "[KSN2021] Self Defence", "background": "", "description": "定义一个字符串的权值为它长度为 $M$ 且只包含一种字符的子串数量。\n\n例如字符串 ``ABBB``，在 $M=2$ 时的权值为 $2$。\n\n给定一个长度为 $N$ 的字符串，每个字符为 ``?``，``A`` 和 ``B`` 中的一个，你需要求出将每个 ``?`` 替换为 ``A`` 或 ``B`` 后，可以得到多少个权值为 $K$ 的字符串。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行输入三个整数 $N,M,K$。\n\n第二行输入一个长度为 $N$ 的字符串 $S$。", "outputFormat": "输出一个整数代表答案。", "hint": "**【样例解释】**\n\n对于第一组样例，以下为所有合法字符串：\n\n```plain\nAAAAB\nABBBB\nBAAAA\nBBBBA\n```\n\n对于第二组样例，以下为所有合法字符串：\n\n```plain\nAAABA\nAABAA\nAABBA\nABAAA\nABBAA\nABBBA\n```\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n* Subtask 1（5 points）：只存在一组数据，满足 $N=10$，$M=3$，$K=5$，$S=\\texttt{????A???B?}$。\n* Subtask 2（9 points）：$N\\le 20$。\n* Subtask 3（11 points）：$N\\le 200$。\n* Subtask 4（6 points）：$M=2$，$K=0$。\n* Subtask 5（9 points）：$K=0$。\n* Subtask 6（8 points）：$K\\le 1$。\n* Subtask 7（27 points）：$S$ 只包含 ``?``.\n* Subtask 8（25 points）：无特殊限制。\n\n对于所有数据，$1\\leq N\\leq 3000$，$1\\leq M\\leq N$，$0\\leq K\\leq N$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KSN2021] Self Defence", "background": "", "description": "定义一个字符串的权值为它长度为 $M$ 且只包含一种字符的子串数量。\n\n例如字符串 ``ABBB``，在 $M=2$ 时的权值为 $2$。\n\n给定一个长度为 $N$ 的字符串，每个字符为 ``?``，``A`` 和 ``B`` 中的一个，你需要求出将每个 ``?`` 替换为 ``A`` 或 ``B`` 后，可以得到多少个权值为 $K$ 的字符串。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行输入三个整数 $N,M,K$。\n\n第二行输入一个长度为 $N$ 的字符串 $S$。", "outputFormat": "输出一个整数代表答案。", "hint": "**【样例解释】**\n\n对于第一组样例，以下为所有合法字符串：\n\n```plain\nAAAAB\nABBBB\nBAAAA\nBBBBA\n```\n\n对于第二组样例，以下为所有合法字符串：\n\n```plain\nAAABA\nAABAA\nAABBA\nABAAA\nABBAA\nABBBA\n```\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n* Subtask 1（5 points）：只存在一组数据，满足 $N=10$，$M=3$，$K=5$，$S=\\texttt{????A???B?}$。\n* Subtask 2（9 points）：$N\\le 20$。\n* Subtask 3（11 points）：$N\\le 200$。\n* Subtask 4（6 points）：$M=2$，$K=0$。\n* Subtask 5（9 points）：$K=0$。\n* Subtask 6（8 points）：$K\\le 1$。\n* Subtask 7（27 points）：$S$ 只包含 ``?``.\n* Subtask 8（25 points）：无特殊限制。\n\n对于所有数据，$1\\leq N\\leq 3000$，$1\\leq M\\leq N$，$0\\leq K\\leq N$。", "locale": "zh-CN"}}}
{"pid": "P7970", "type": "P", "difficulty": 5, "samples": [["6 5 4\n0 0 3 2\n0 2 1 3\n0 1 2 4\n5 4 5 4", "1\n1\n2\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["递归", "2021", "数位 DP", "位运算"], "title": "[KSN2021] Binary Sea", "background": "", "description": "有一个 $N\\times M$ 的网格，行列从 $0$ 开始，从左上到右下编号。\n\n第 $i$ 行，第 $j$ 列的格子是黑格当且仅当 $i\\text{ and }j=0$。\n\n两个黑格联通当且仅当它们都是黑格且它们可以经过若干个有**邻边**的黑格到达。\n\n给定 $Q$ 个矩形，左上角为 $(x_1,y_1)$，右下角为 $(x_2,y_2)$，你需要对于每个矩形求出所有的黑格形成了多少连通块。", "inputFormat": "第一行输入三个整数 $N,M,Q$，代表网格大小和询问数量。\n\n接下来 $Q$ 行，每行输入四个整数 $x_1,y_1,x_2,y_2$，代表询问矩形。", "outputFormat": "对于每组数据输出一行，包含一个整数，代表答案。", "hint": "**【样例解释】**\n\n以下为样例中四个询问的图示：\n\n![](https://api.tlx.toki.id/api/v2/problems/JIDPROGSepzakraFyFK27n5u3QV/render/sample-q1.png) ![](https://api.tlx.toki.id/api/v2/problems/JIDPROGSepzakraFyFK27n5u3QV/render/sample-q2.png) ![](https://api.tlx.toki.id/api/v2/problems/JIDPROGSepzakraFyFK27n5u3QV/render/sample-q3.png) ![](https://api.tlx.toki.id/api/v2/problems/JIDPROGSepzakraFyFK27n5u3QV/render/sample-q4.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n* Subtask 1（5 points）：只存在一组数据，满足 $N = M=12$，$Q=3$，每次询问的 $(x_1,y_1,x_2,y_2)$ 依次为 $(1,1,9,8)$，$(8,8,11,11)$ 和 $(4,3,5,9)$。\n* Subtask 2（11 points）：$N,M,Q\\le 200$。\n* Subtask 3（10 points）：$N,M,Q\\le 2000$，$x_1=x_2$。\n* Subtask 4（20 points）：$N,M,Q\\le 2000$。\n* Subtask 5（4 points）：$x_1=x_2=0$。\n* Subtask 6（6 points）：保证对于每个询问存在整数 $k$ 使得 $x_1=x_2=2^k$。\n* Subtask 7（29 points）：$x_1=x_2$。\n* Subtask 8（15 points）：无特殊限制。\n\n对于所有数据，$0\\leq x_1\\leq x_2<N\\leq 10^9$，$0\\leq y_1\\leq y_2<M\\leq 10^9$，$1\\leq Q\\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KSN2021] Binary Sea", "background": "", "description": "有一个 $N\\times M$ 的网格，行列从 $0$ 开始，从左上到右下编号。\n\n第 $i$ 行，第 $j$ 列的格子是黑格当且仅当 $i\\text{ and }j=0$。\n\n两个黑格联通当且仅当它们都是黑格且它们可以经过若干个有**邻边**的黑格到达。\n\n给定 $Q$ 个矩形，左上角为 $(x_1,y_1)$，右下角为 $(x_2,y_2)$，你需要对于每个矩形求出所有的黑格形成了多少连通块。", "inputFormat": "第一行输入三个整数 $N,M,Q$，代表网格大小和询问数量。\n\n接下来 $Q$ 行，每行输入四个整数 $x_1,y_1,x_2,y_2$，代表询问矩形。", "outputFormat": "对于每组数据输出一行，包含一个整数，代表答案。", "hint": "**【样例解释】**\n\n以下为样例中四个询问的图示：\n\n![](https://api.tlx.toki.id/api/v2/problems/JIDPROGSepzakraFyFK27n5u3QV/render/sample-q1.png) ![](https://api.tlx.toki.id/api/v2/problems/JIDPROGSepzakraFyFK27n5u3QV/render/sample-q2.png) ![](https://api.tlx.toki.id/api/v2/problems/JIDPROGSepzakraFyFK27n5u3QV/render/sample-q3.png) ![](https://api.tlx.toki.id/api/v2/problems/JIDPROGSepzakraFyFK27n5u3QV/render/sample-q4.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n* Subtask 1（5 points）：只存在一组数据，满足 $N = M=12$，$Q=3$，每次询问的 $(x_1,y_1,x_2,y_2)$ 依次为 $(1,1,9,8)$，$(8,8,11,11)$ 和 $(4,3,5,9)$。\n* Subtask 2（11 points）：$N,M,Q\\le 200$。\n* Subtask 3（10 points）：$N,M,Q\\le 2000$，$x_1=x_2$。\n* Subtask 4（20 points）：$N,M,Q\\le 2000$。\n* Subtask 5（4 points）：$x_1=x_2=0$。\n* Subtask 6（6 points）：保证对于每个询问存在整数 $k$ 使得 $x_1=x_2=2^k$。\n* Subtask 7（29 points）：$x_1=x_2$。\n* Subtask 8（15 points）：无特殊限制。\n\n对于所有数据，$0\\leq x_1\\leq x_2<N\\leq 10^9$，$0\\leq y_1\\leq y_2<M\\leq 10^9$，$1\\leq Q\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P7971", "type": "P", "difficulty": 5, "samples": [["1\n5 10000\n\n2\n\n1\n\n2\n ", " \n\n? 1 5\n\n? 1 3\n\n? 2 4\n\n! 1 1 1 2 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["二分", "2021", "交互题", "Special Judge"], "title": "[KSN2021] Colouring Balls", "background": "", "description": "**这是一道交互题。**\n\n有 $N$ 个小球，从 $1$ 到 $N$ 编号。\n\n你每次可以询问编号在 $[l,r]$ 之间的小球有几种不同的颜色，你需要求出每个小球的颜色。由于你并不知道具体颜色是什么，你只要将同种颜色用同一个数字表示即可。\n\n## 交互格式\n\n第一行输入一个正整数 $T$，**代表 Subtask 编号（而不是测试数据组数）**。\n\n第二行输入两个整数 $N,Q$，代表小球数量和询问次数限制。\n\n接下来你可以提出不超过 $Q$ 个询问并读取交互库返回的答案，每个询问的格式为 ``? l r``，代表你询问 $[l,r]$ 中小球颜色的数量。\n\n当你确认所有小球的颜色后，你需要输出 ``! a1 a2 ... an`` 代表所有小球的颜色。你需要保证：\n\n* $1\\leq a_i\\leq N$ 且 $a_i$ 均为整数。\n* 相同颜色的小球的 $a_i$ 相同。\n* 不同颜色的小球的 $a_i$ 不同。\n\n你的每次输出后都需要刷新缓冲区，你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。", "inputFormat": "见“交互格式”。", "outputFormat": "见“交互格式”。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n* Subtask 1（8 points）：$Q=10000$, 保证每种颜色的球的编号连续。\n* Subtask 2（7 points）：$Q=2000$，保证每种颜色的球的编号连续。\n* Subtask 3（19 points）：$Q=2000$，保证球只有至多 $3$ 种颜色。\n* Subtask 4（14 points）：$Q=2000$，保证球只有至多 $4$ 种颜色。\n* Subtask 5（12 points）：$Q=2000$，保证球有至少 $(N-1)$ 种颜色。\n* Subtask 6（21 points）：$Q=10000$，保证 $N\\le 100$。\n* Subtask 7（19 points）：$Q=10000$。\n\n对于所有数据，保证 $1\\leq T\\leq 7$，$2\\leq N\\leq 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KSN2021] Colouring Balls", "background": "", "description": "**这是一道交互题。**\n\n有 $N$ 个小球，从 $1$ 到 $N$ 编号。\n\n你每次可以询问编号在 $[l,r]$ 之间的小球有几种不同的颜色，你需要求出每个小球的颜色。由于你并不知道具体颜色是什么，你只要将同种颜色用同一个数字表示即可。\n\n## 交互格式\n\n第一行输入一个正整数 $T$，**代表 Subtask 编号（而不是测试数据组数）**。\n\n第二行输入两个整数 $N,Q$，代表小球数量和询问次数限制。\n\n接下来你可以提出不超过 $Q$ 个询问并读取交互库返回的答案，每个询问的格式为 ``? l r``，代表你询问 $[l,r]$ 中小球颜色的数量。\n\n当你确认所有小球的颜色后，你需要输出 ``! a1 a2 ... an`` 代表所有小球的颜色。你需要保证：\n\n* $1\\leq a_i\\leq N$ 且 $a_i$ 均为整数。\n* 相同颜色的小球的 $a_i$ 相同。\n* 不同颜色的小球的 $a_i$ 不同。\n\n你的每次输出后都需要刷新缓冲区，你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。", "inputFormat": "见“交互格式”。", "outputFormat": "见“交互格式”。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n* Subtask 1（8 points）：$Q=10000$, 保证每种颜色的球的编号连续。\n* Subtask 2（7 points）：$Q=2000$，保证每种颜色的球的编号连续。\n* Subtask 3（19 points）：$Q=2000$，保证球只有至多 $3$ 种颜色。\n* Subtask 4（14 points）：$Q=2000$，保证球只有至多 $4$ 种颜色。\n* Subtask 5（12 points）：$Q=2000$，保证球有至少 $(N-1)$ 种颜色。\n* Subtask 6（21 points）：$Q=10000$，保证 $N\\le 100$。\n* Subtask 7（19 points）：$Q=10000$。\n\n对于所有数据，保证 $1\\leq T\\leq 7$，$2\\leq N\\leq 10^3$。", "locale": "zh-CN"}}}
{"pid": "P7972", "type": "P", "difficulty": 4, "samples": [["3\n2 3 1", "3"], ["4\n2 1 4 3", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "树状数组", "2021", "笛卡尔树", "单调栈"], "title": "[KSN2021] Self Permutation", "background": "", "description": "给定一个长度为 $N$ 的排列 $a_i$，你可以执行若干次操作：\n\n* 选择两个相邻的数，删除它们中较大的那个。\n\n问最后可能得到序列的数量，答案对 $10^9+7$ 取模。\n\n注意如果两个数中间所有的数被删除了，它们会变成相邻的。", "inputFormat": "第一行输入一个正整数 $N$。\n\n第二行输入 $N$ 个正整数 $a_i$。", "outputFormat": "输出一个整数代表答案。", "hint": "**【样例解释】**\n\n对于第一组样例，以下为所有可能得到的序列：\n\n- $[2,3,1]$\n- $[\\bold2,\\bold3,1]\\to[2,1]$\n- $[\\bold2,\\bold3,1]→[\\bold2,\\bold1]→[1]$\n\n对于第二组样例，以下为所有可能得到的序列：\n\n- $[2,1,4,3]$\n- $[\\bold2,\\bold1, 4, 3]\\to[1, 4, 3]$\n- $[\\bold2,\\bold1, 4, 3]\\to[1,\\bold4,\\bold3]\\to[1, 3]$\n- $[\\bold2,\\bold1, 4, 3]\\to[1,\\bold4,\\bold3]\\to[\\bold1,\\bold3]\\to[1]$\n- $[2, 1,\\bold4,\\bold3]\\to[2, 1, 3]$\n- $[2, 1,\\bold4,\\bold3]\\to[2,\\bold1,\\bold3]\\to[2, 1]$\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 points）：只存在一组数据，满足 $N=6$，$A=[2,5,1,3,4,6]$。\n- Subtask 2（20 points）：$N\\leq 200$。\n- Subtask 3（13 points）：$N\\leq 2000$，$A_i=i$。\n- Subtask 4（9 points）：$A_i=i$。\n- Subtask 5（23 points）：$N\\leq 2000$。\n- Subtask 6（27 points）：无特殊限制。\n\n对于所有数据，$N\\leq 3\\times 10^5$，保证输入的 $a_i$ 能构成一个排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KSN2021] Self Permutation", "background": "", "description": "给定一个长度为 $N$ 的排列 $a_i$，你可以执行若干次操作：\n\n* 选择两个相邻的数，删除它们中较大的那个。\n\n问最后可能得到序列的数量，答案对 $10^9+7$ 取模。\n\n注意如果两个数中间所有的数被删除了，它们会变成相邻的。", "inputFormat": "第一行输入一个正整数 $N$。\n\n第二行输入 $N$ 个正整数 $a_i$。", "outputFormat": "输出一个整数代表答案。", "hint": "**【样例解释】**\n\n对于第一组样例，以下为所有可能得到的序列：\n\n- $[2,3,1]$\n- $[\\bold2,\\bold3,1]\\to[2,1]$\n- $[\\bold2,\\bold3,1]→[\\bold2,\\bold1]→[1]$\n\n对于第二组样例，以下为所有可能得到的序列：\n\n- $[2,1,4,3]$\n- $[\\bold2,\\bold1, 4, 3]\\to[1, 4, 3]$\n- $[\\bold2,\\bold1, 4, 3]\\to[1,\\bold4,\\bold3]\\to[1, 3]$\n- $[\\bold2,\\bold1, 4, 3]\\to[1,\\bold4,\\bold3]\\to[\\bold1,\\bold3]\\to[1]$\n- $[2, 1,\\bold4,\\bold3]\\to[2, 1, 3]$\n- $[2, 1,\\bold4,\\bold3]\\to[2,\\bold1,\\bold3]\\to[2, 1]$\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 points）：只存在一组数据，满足 $N=6$，$A=[2,5,1,3,4,6]$。\n- Subtask 2（20 points）：$N\\leq 200$。\n- Subtask 3（13 points）：$N\\leq 2000$，$A_i=i$。\n- Subtask 4（9 points）：$A_i=i$。\n- Subtask 5（23 points）：$N\\leq 2000$。\n- Subtask 6（27 points）：无特殊限制。\n\n对于所有数据，$N\\leq 3\\times 10^5$，保证输入的 $a_i$ 能构成一个排列。", "locale": "zh-CN"}}}
{"pid": "P7973", "type": "P", "difficulty": 4, "samples": [["3\n2 1 1\n20 30 10", "60\n60\n60"], ["4\n5 4 4 5\n10 20 30 40", "10\n20\n30\n40"], ["5\n1 2 1 7 11\n20 10 30 100 100", "60\n60\n60\n200\n200"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["并查集", "2021", "位运算"], "title": "[KSN2021] Binary Land", "background": "", "description": "给定一张 $N$ 个点的图，每个点有权值 $A_i$ 和价值 $B_i$。\n\n两个点 $x,y$ 之间存在一条无向边当且仅当 $A_x\\text{ xor }A_y>\\max(A_x,A_y)$。\n\n你需要对于 $i=1,2,\\cdots n$ 依次求出点 $i$ 所在连通块中所有点的价值和。", "inputFormat": "第一行输入一个正整数 $N$。\n\n第二行输入 $N$ 个正整数 $A_i$。\n\n第三行输入 $N$ 个正整数 $B_i$。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含一个整数，代表点 $i$ 所在连通块中所有点的价值和。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 points）：只存在一组数据，满足 $N=8$，$A=[6,39,11,63,3,39,1,43]$，$B=[4,8,3,7,9,1,2,2]$。\n- Subtask 2（13 points）：保证 $N \\leq 200$。\n- Subtask 3（10 points）：保证 $N \\leq 2000$。\n- Subtask 4（4 points）：保证 $A_1=A_2=\\cdots=A_n$。\n- Subtask 5（7 points）：保证存在非负整数 $k$ 使得 $A_i=2^k$。\n- Subtask 6（19 points）：$A_i\\leq 2^{12}-1$。\n- Subtask 7（39 points）：无特殊限制。\n\n对于所有数据，$1 \\leq N \\leq 10^5$，$1 \\leq A_i \\leq 2^{30}-1$，$1 \\leq B_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KSN2021] Binary Land", "background": "", "description": "给定一张 $N$ 个点的图，每个点有权值 $A_i$ 和价值 $B_i$。\n\n两个点 $x,y$ 之间存在一条无向边当且仅当 $A_x\\text{ xor }A_y>\\max(A_x,A_y)$。\n\n你需要对于 $i=1,2,\\cdots n$ 依次求出点 $i$ 所在连通块中所有点的价值和。", "inputFormat": "第一行输入一个正整数 $N$。\n\n第二行输入 $N$ 个正整数 $A_i$。\n\n第三行输入 $N$ 个正整数 $B_i$。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含一个整数，代表点 $i$ 所在连通块中所有点的价值和。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 points）：只存在一组数据，满足 $N=8$，$A=[6,39,11,63,3,39,1,43]$，$B=[4,8,3,7,9,1,2,2]$。\n- Subtask 2（13 points）：保证 $N \\leq 200$。\n- Subtask 3（10 points）：保证 $N \\leq 2000$。\n- Subtask 4（4 points）：保证 $A_1=A_2=\\cdots=A_n$。\n- Subtask 5（7 points）：保证存在非负整数 $k$ 使得 $A_i=2^k$。\n- Subtask 6（19 points）：$A_i\\leq 2^{12}-1$。\n- Subtask 7（39 points）：无特殊限制。\n\n对于所有数据，$1 \\leq N \\leq 10^5$，$1 \\leq A_i \\leq 2^{30}-1$，$1 \\leq B_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7974", "type": "P", "difficulty": 5, "samples": [["4\n9 1 8 2\n2\n1 3\n4 2", "3\n31"], ["9\n1 2 3 2 1 2 3 2 1\n4\n1 9\n4 6\n2 6\n5 2", "18\n4\n9\n9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2021", "ST 表"], "title": "[KSN2021] Delivering Balls", "background": null, "description": "给定一个长度为 $N$ 的序列 $H$ 和 $Q$ 次询问。\n\n第 $i$ 次询问中，你初始在第 $S_i$ 列 $H_{S_i}$ 行，想要到第 $T_i$ 列第 $H_{T_i}$ 行。\n\n你可以进行若干次移动。每次移动你可以选择以下两种参数：\n\n* 列 $-1$，列不变，列 $+1$。\n* 行 $-1$，行不变，行 $+1$。\n\n如果你选择行 $-1$，消耗 $1$ 体力，如果你选择行不变，消耗 $2$ 体力，如果你选择行 $+1$，消耗 $4$ 体力。\n\n你需要保证每次移动后，你的列数 $x$ 在 $[1,N]$ 之间，且你的行数 $y$ 不小于 $H_x$。\n\n对于每个询问，你需要求出你消耗体力的最小值。", "inputFormat": "第一行输入一个正整数 $N$。\n\n第二行输入 $N$ 个正整数 $H_i$。\n\n第三行输入一个正整数 $Q$。\n\n接下来 $Q$ 行，每行输入两个正整数 $S_i,T_i$。", "outputFormat": "对于每个询问，输出一行，包含一个整数，代表消耗体力的最小值。", "hint": "**【样例解释】**\n\n以下为第一个样例中两个询问的图示：\n\n\n![](https://cdn.vjudge.net.cn/5b94c3b10f33f3cee49fc184a4504596)\n![](https://cdn.vjudge.net.cn/acf17c861d64450f7566cdb59ea9f57b)\n\n**【数据范围】**\n\n- Subtask 1（7 points）：只存在一组数据，满足 $N=8$，$Q=4$，$H=[,9,3,3,5,4,8,2]$，$(S_i,T_i)$ 依次为 $(1,8)$，$(3,6)$，$(6,4)$ 和 $(7,2)$。\n- Subtask 2（5 points）：$S_i+1=T_i$。\n- Subtask 3（6 points）：$H_i=i$。\n- Subtask 4（18 points）：$N,Q,H_i\\leq 100$。\n- Subtask 5（24 points）：$N,Q\\leq 1000$。\n- Subtask 6（13 points）：$S_i=1$。\n- Subtask 7（27 points）：无特殊限制。\n\n对于所有数据，$2\\leq N\\leq 2\\times 10^5$，$H_i\\leq 10^9$，$Q\\leq 2\\times 10^5$，$1\\leq S_i,T_i\\leq N$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[KSN2021] Delivering Balls", "background": null, "description": "给定一个长度为 $N$ 的序列 $H$ 和 $Q$ 次询问。\n\n第 $i$ 次询问中，你初始在第 $S_i$ 列 $H_{S_i}$ 行，想要到第 $T_i$ 列第 $H_{T_i}$ 行。\n\n你可以进行若干次移动。每次移动你可以选择以下两种参数：\n\n* 列 $-1$，列不变，列 $+1$。\n* 行 $-1$，行不变，行 $+1$。\n\n如果你选择行 $-1$，消耗 $1$ 体力，如果你选择行不变，消耗 $2$ 体力，如果你选择行 $+1$，消耗 $4$ 体力。\n\n你需要保证每次移动后，你的列数 $x$ 在 $[1,N]$ 之间，且你的行数 $y$ 不小于 $H_x$。\n\n对于每个询问，你需要求出你消耗体力的最小值。", "inputFormat": "第一行输入一个正整数 $N$。\n\n第二行输入 $N$ 个正整数 $H_i$。\n\n第三行输入一个正整数 $Q$。\n\n接下来 $Q$ 行，每行输入两个正整数 $S_i,T_i$。", "outputFormat": "对于每个询问，输出一行，包含一个整数，代表消耗体力的最小值。", "hint": "**【样例解释】**\n\n以下为第一个样例中两个询问的图示：\n\n\n![](https://cdn.vjudge.net.cn/5b94c3b10f33f3cee49fc184a4504596)\n![](https://cdn.vjudge.net.cn/acf17c861d64450f7566cdb59ea9f57b)\n\n**【数据范围】**\n\n- Subtask 1（7 points）：只存在一组数据，满足 $N=8$，$Q=4$，$H=[,9,3,3,5,4,8,2]$，$(S_i,T_i)$ 依次为 $(1,8)$，$(3,6)$，$(6,4)$ 和 $(7,2)$。\n- Subtask 2（5 points）：$S_i+1=T_i$。\n- Subtask 3（6 points）：$H_i=i$。\n- Subtask 4（18 points）：$N,Q,H_i\\leq 100$。\n- Subtask 5（24 points）：$N,Q\\leq 1000$。\n- Subtask 6（13 points）：$S_i=1$。\n- Subtask 7（27 points）：无特殊限制。\n\n对于所有数据，$2\\leq N\\leq 2\\times 10^5$，$H_i\\leq 10^9$，$Q\\leq 2\\times 10^5$，$1\\leq S_i,T_i\\leq N$。", "locale": "zh-CN"}}}
{"pid": "P7975", "type": "P", "difficulty": 3, "samples": [["3 3\n1 1 1\n1 1 1\n1 1 1\n1 1 1 1 1 1 1 1 1\n", "1 2 3\n4 6 7\n5 8 9\n"], ["3 3\n1 2 3\n2 2 1\n3 1 3\n1 3 3 2 1 2 2 3 1\n", "1 4 2\n6 7 5\n3 9 8\n"], ["10 10\n4 9 3 9 3 6 4 8 7 7 \n7 5 3 8 7 10 10 8 7 10 \n10 9 3 10 3 3 3 2 3 8 \n9 6 3 1 10 10 3 4 2 6 \n10 5 9 9 5 7 7 6 2 7 \n1 1 6 3 2 10 10 7 6 7 \n1 7 10 7 3 10 3 9 10 9 \n1 5 1 2 2 4 4 9 10 8 \n6 3 7 1 5 8 10 4 10 7 \n5 4 8 3 3 9 2 6 8 2 \n6 6 6 1 10 8 5 5 4 2 1 5 5 9 4 3 4 6 3 5 9 7 4 8 9 3 5 9 1 7 4 1 1 2 2 6 7 10 6 2 6 6 1 8 4 7 7 10 3 1 9 8 10 9 4 7 9 10 2 3 3 3 2 7 2 9 7 7 3 8 8 9 3 2 10 9 10 7 8 10 8 3 7 7 3 3 7 3 7 3 3 10 3 10 10 10 10 10 10 10 \n", "9 14 16 28 49 1 15 24 37 46\n22 12 26 79 84 94 92 70 56 53\n5 21 61 80 85 93 91 63 62 6\n25 18 60 50 58 95 90 23 34 3\n38 13 51 54 20 87 89 39 59 64\n29 32 36 69 74 97 96 78 42 67\n11 30 48 68 86 98 88 76 77 72\n4 8 33 40 35 31 45 57 99 81\n2 19 47 43 27 71 75 55 100 83\n7 17 52 73 82 66 65 41 44 10\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "O2优化"], "title": "「Stoi2033」分裂", "background": "> 趁时间没发觉 让我带着你离开  \n> 没有了证明 没有了空虚  \n> 基于两种立场我会罩着你  \n> 趁时间没发觉 让我带着你离开  \n> 这不是顽固 这不是逃避  \n> 没人绑着你走才快乐  \n> ——《分裂》", "description": "有一个 $n \\times m \\times 2$ 的棋盒（四周为棋盒壁）与黑、红各 $nm$ 颗棋。棋子有若干种类，红色的一种棋子个数和黑色的该种棋子个数相等。棋子种类用特征值 $v_{i,j}$ 标记。特征值相同的棋子种类相同，特征值不同的棋子种类不同。红色棋子摆放在棋盒的下层，已经摆好。现在 Vinsta 要将黑棋按照规定顺序摆放在棋盒上层。设棋盒内坐标以左上角为 $(1,1)$，右下角为 $(n,m)$，依此第 $i$ 行第 $j$ 列为 $(i,j)$，则每颗摆进去的黑棋必须摆在满足以下要求的位置：\n\n1. 其摆放位置没有黑棋子且下方为与其种类相同的红棋；\n\n2. 在 1. 的要求下，若有多个，令一个位置的 **紧密度** 为其四边有黑棋子相邻或为棋盒壁的个数，则选择 **紧密度** 最大的一个；\n\n3. 在 2. 的要求下，若还有多个，则设此位置的坐标为 $(i,j)$，要求 $i+j$ 最小；\n\n4. 在 3. 的要求下，若还有多个，要求 $i$ 最小。\n\n给出红棋的摆放情况和黑棋放入的顺序，她想请你帮忙求出每个位置的黑棋子被放入的顺序。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行 $m$ 列，第 $i$ 行第 $j$ 列表示 $v_{i,j}$。\n\n接下来一行 $nm$ 个整数，表示按顺序每次放入的棋子的种类。", "outputFormat": "输出 $n$ 行 $m$ 列，每个位置上的数 $k_{i,j}$ 表示 $(i,j)$ 上的棋是第 $k_{i,j}$ 个被放进去的。", "hint": "对于 $30\\%$ 的数据，$1 \\le n,m \\le 70$；\n\n对于另外 $30\\%$ 的数据，$v_{i,j}=1$；\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 10^3, 1 \\le v_{i,j} \\le 10$，保证每种棋子黑色与红色数量相等。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Stoi2033」分裂", "background": "> 趁时间没发觉 让我带着你离开  \n> 没有了证明 没有了空虚  \n> 基于两种立场我会罩着你  \n> 趁时间没发觉 让我带着你离开  \n> 这不是顽固 这不是逃避  \n> 没人绑着你走才快乐  \n> ——《分裂》", "description": "有一个 $n \\times m \\times 2$ 的棋盒（四周为棋盒壁）与黑、红各 $nm$ 颗棋。棋子有若干种类，红色的一种棋子个数和黑色的该种棋子个数相等。棋子种类用特征值 $v_{i,j}$ 标记。特征值相同的棋子种类相同，特征值不同的棋子种类不同。红色棋子摆放在棋盒的下层，已经摆好。现在 Vinsta 要将黑棋按照规定顺序摆放在棋盒上层。设棋盒内坐标以左上角为 $(1,1)$，右下角为 $(n,m)$，依此第 $i$ 行第 $j$ 列为 $(i,j)$，则每颗摆进去的黑棋必须摆在满足以下要求的位置：\n\n1. 其摆放位置没有黑棋子且下方为与其种类相同的红棋；\n\n2. 在 1. 的要求下，若有多个，令一个位置的 **紧密度** 为其四边有黑棋子相邻或为棋盒壁的个数，则选择 **紧密度** 最大的一个；\n\n3. 在 2. 的要求下，若还有多个，则设此位置的坐标为 $(i,j)$，要求 $i+j$ 最小；\n\n4. 在 3. 的要求下，若还有多个，要求 $i$ 最小。\n\n给出红棋的摆放情况和黑棋放入的顺序，她想请你帮忙求出每个位置的黑棋子被放入的顺序。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行 $m$ 列，第 $i$ 行第 $j$ 列表示 $v_{i,j}$。\n\n接下来一行 $nm$ 个整数，表示按顺序每次放入的棋子的种类。", "outputFormat": "输出 $n$ 行 $m$ 列，每个位置上的数 $k_{i,j}$ 表示 $(i,j)$ 上的棋是第 $k_{i,j}$ 个被放进去的。", "hint": "对于 $30\\%$ 的数据，$1 \\le n,m \\le 70$；\n\n对于另外 $30\\%$ 的数据，$v_{i,j}=1$；\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 10^3, 1 \\le v_{i,j} \\le 10$，保证每种棋子黑色与红色数量相等。", "locale": "zh-CN"}}}
{"pid": "P7976", "type": "P", "difficulty": 5, "samples": [["4 173\n1\n5\n20\n34", "3\n12\n52\n94"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化", "数位 DP", "Lucas 定理"], "title": "「Stoi2033」园游会", "background": "> 我顶着大太阳 只想为你撑伞  \n> 你靠在我肩膀 深呼吸怕遗忘  \n> 因为捞鱼的蠢游戏我们开始交谈  \n> 多希望话题不断园游会永不打烊  \n> 气球在我手上 我牵着你瞎逛  \n> 有话想对你讲 你眼睛却装忙  \n> 鸡蛋糕跟你嘴角果酱我都想要尝  \n> 园游会影片在播放 这个世界约好一起逛  \n> ——《园游会》", "description": "设 $F(x)=(x+1)\\bmod 3-1$，给定 $n$，求：\n\n$$\\sum_{l=0}^n \\sum_{r=l}^n F\\left(C_{r}^{l}\\right)$$\n\n对 $1732073999$ 取模。其中 $C_{r}^{l}$ 为组合数，具体地，\n\n$$C_{r}^{l}=\\dfrac{r!}{l!(r-l)!}$$", "inputFormat": "**本题有多组询问。**\n\n第一行两个正整数 $t,maxn$，表示询问组数与询问的最大可能值。\n\n接下来 $t$ 行，每行一个正整数 $n$。", "outputFormat": "共 $t$ 行，第 $i$ 行一个整数，为第 $i$ 次询问的答案对 $1\\ 732\\ 073\\ 999$ 取模的结果。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n| Subtask | 分值 | $1\\le t \\le$ | $1\\le n \\le maxn \\le$ |\n| :-: | :-: | :-: | :-: |\n| $1$ | $16$ | $1$ | $300$ |\n| $2$ | $37$ | $300$ | $7 \\times 10^6$ |\n| $3$ | $47$ | $3 \\times 10^4$ | $2 \\times 10^{16}$ |\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 3 \\times 10^4,1 \\le n \\le maxn \\le 2 \\times 10^{16}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Stoi2033」园游会", "background": "> 我顶着大太阳 只想为你撑伞  \n> 你靠在我肩膀 深呼吸怕遗忘  \n> 因为捞鱼的蠢游戏我们开始交谈  \n> 多希望话题不断园游会永不打烊  \n> 气球在我手上 我牵着你瞎逛  \n> 有话想对你讲 你眼睛却装忙  \n> 鸡蛋糕跟你嘴角果酱我都想要尝  \n> 园游会影片在播放 这个世界约好一起逛  \n> ——《园游会》", "description": "设 $F(x)=(x+1)\\bmod 3-1$，给定 $n$，求：\n\n$$\\sum_{l=0}^n \\sum_{r=l}^n F\\left(C_{r}^{l}\\right)$$\n\n对 $1732073999$ 取模。其中 $C_{r}^{l}$ 为组合数，具体地，\n\n$$C_{r}^{l}=\\dfrac{r!}{l!(r-l)!}$$", "inputFormat": "**本题有多组询问。**\n\n第一行两个正整数 $t,maxn$，表示询问组数与询问的最大可能值。\n\n接下来 $t$ 行，每行一个正整数 $n$。", "outputFormat": "共 $t$ 行，第 $i$ 行一个整数，为第 $i$ 次询问的答案对 $1\\ 732\\ 073\\ 999$ 取模的结果。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n| Subtask | 分值 | $1\\le t \\le$ | $1\\le n \\le maxn \\le$ |\n| :-: | :-: | :-: | :-: |\n| $1$ | $16$ | $1$ | $300$ |\n| $2$ | $37$ | $300$ | $7 \\times 10^6$ |\n| $3$ | $47$ | $3 \\times 10^4$ | $2 \\times 10^{16}$ |\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 3 \\times 10^4,1 \\le n \\le maxn \\le 2 \\times 10^{16}$。", "locale": "zh-CN"}}}
{"pid": "P7977", "type": "P", "difficulty": 5, "samples": [["7 1 13\n2 3 4 5 7 10 11\n", "YES\n"], ["8 1 13\n2 3 4 5 7 10 11 13\n", "NO\n"], ["7 2 100\n19 26 8 17 11 45 14\n", "YES\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["递推", "博弈论", "二分", "O2优化"], "title": "「Stoi2033」世界未末日", "background": "注意：**利用提交反馈以套取数据的行为属于作弊**。\n\n> 就算是世界要崩溃  \n> 亲爱的我也绝不会落泪  \n> 不放弃爱过的那种感觉  \n> 珍惜着有你记忆的一切  \n> 就算是世界要倾斜  \n> 亲爱的我也绝不说离别  \n> 尽管末日威胁再强烈  \n> 有爱就不累  \n> ——《世界未末日》", "description": "Vinsta 和 Stella 有 $n$ 堆石子，第 $i$ 堆有 $s_i$ 个。\n\n她们约定从 Vinsta 开始轮流操作，每次操作可以选择不少于 $1$ 堆且不超过 $k$ 堆的石子。对于第 $i$ 堆石子，可以选取两个实数 $a,b$ 满足：\n\n- $a \\times b=s_i$\n- $a+b=c,c\\in[1,s_i]\\cap\\Z$\n\n并丢掉第 $i$ 堆的 $c$ 个石子，即 $s_i\\leftarrow s_i-c$。不能操作者败，她们想要知道 Vinsta 是否有必胜策略。", "inputFormat": "第一行共三个正整数： $n,k,S$，其中 $S=\\max\\{s_i\\}$。\n\n第二行共 $n$ 个正整数： $s_i$，表示初始时第 $i$ 堆的石子个数。", "outputFormat": "输出共一行。有必胜策略输出 `YES`，否则输出 `NO`。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n| Subtask | $1\\le n \\le$ | $1\\le S \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $300$ | $300$ | $7$ |\n| $2$ | $300$ | $3 \\times 10^7$ | $8$ |\n| $3$ | $300$ | $3\\times 10^{10}$ | $16$ |\n| $4$ | $3\\times 10^6$ | $3$ | $3$ |\n| $5$ | $3\\times 10^6$ | $3 \\times 10^3$ | $3$ |\n| $6$ | $3\\times 10^6$ | $3 \\times 10^7$ | $16$ |\n| $7$ | $3\\times 10^6$ | $3\\times 10^{10}$ | $47$ |\n\n对于 $100\\%$ 的数据， $1 \\le k \\le n \\le 3 \\times 10^6$，$1 \\le S \\le 3 \\times 10^{10}$。", "locale": "zh-CN", "translations": {"en": {"title": "“Stoi2033” The World Has Not Yet Ended.", "background": "Note: **Using submission feedback to extract data is cheating**.\n\n> Even if the world is about to collapse  \n> Darling, I will never shed a tear  \n> I will not give up that feeling of having loved  \n> Cherishing everything that holds memories of you  \n> Even if the world is about to tilt  \n> Darling, I will never say goodbye  \n> Even if the doomsday threat is even stronger  \n> With love, it is not tiring  \n> —— “The World Has Not Yet Ended”", "description": "Vinsta and Stella have $n$ piles of stones. The $i$-th pile has $s_i$ stones.\n\nThey agree to take turns starting from Vinsta. In each move, they may choose at least $1$ pile and at most $k$ piles of stones to operate on. For the $i$-th pile, they may choose two real numbers $a, b$ satisfying:\n\n- $a \\times b = s_i$\n- $a + b = c$, where $c \\in [1, s_i] \\cap \\Z$\n\nThen they discard $c$ stones from the $i$-th pile, i.e. set $s_i \\leftarrow s_i - c$. The player who cannot make a move loses. They want to know whether Vinsta has a winning strategy.", "inputFormat": "The first line contains three positive integers $n, k, S$, where $S = \\max\\{s_i\\}$.\n\nThe second line contains $n$ positive integers $s_i$, which represent the initial number of stones in the $i$-th pile.", "outputFormat": "Output one line. If there is a winning strategy, output `YES`; otherwise output `NO`.", "hint": "### Constraints\n\n**This problem uses bundled testdata.**\n\n| Subtask | $1 \\le n \\le$ | $1 \\le S \\le$ | Score |\n| :-: | :-: | :-: | :-: |\n| $1$ | $300$ | $300$ | $7$ |\n| $2$ | $300$ | $3 \\times 10^7$ | $8$ |\n| $3$ | $300$ | $3\\times 10^{10}$ | $16$ |\n| $4$ | $3\\times 10^6$ | $3$ | $3$ |\n| $5$ | $3\\times 10^6$ | $3 \\times 10^3$ | $3$ |\n| $6$ | $3\\times 10^6$ | $3 \\times 10^7$ | $16$ |\n| $7$ | $3\\times 10^6$ | $3\\times 10^{10}$ | $47$ |\n\nFor $100\\%$ of the data, $1 \\le k \\le n \\le 3 \\times 10^6$, and $1 \\le S \\le 3 \\times 10^{10}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "「Stoi2033」世界未末日", "background": "注意：**利用提交反馈以套取数据的行为属于作弊**。\n\n> 就算是世界要崩溃  \n> 亲爱的我也绝不会落泪  \n> 不放弃爱过的那种感觉  \n> 珍惜着有你记忆的一切  \n> 就算是世界要倾斜  \n> 亲爱的我也绝不说离别  \n> 尽管末日威胁再强烈  \n> 有爱就不累  \n> ——《世界未末日》", "description": "Vinsta 和 Stella 有 $n$ 堆石子，第 $i$ 堆有 $s_i$ 个。\n\n她们约定从 Vinsta 开始轮流操作，每次操作可以选择不少于 $1$ 堆且不超过 $k$ 堆的石子。对于第 $i$ 堆石子，可以选取两个实数 $a,b$ 满足：\n\n- $a \\times b=s_i$\n- $a+b=c,c\\in[1,s_i]\\cap\\Z$\n\n并丢掉第 $i$ 堆的 $c$ 个石子，即 $s_i\\leftarrow s_i-c$。不能操作者败，她们想要知道 Vinsta 是否有必胜策略。", "inputFormat": "第一行共三个正整数： $n,k,S$，其中 $S=\\max\\{s_i\\}$。\n\n第二行共 $n$ 个正整数： $s_i$，表示初始时第 $i$ 堆的石子个数。", "outputFormat": "输出共一行。有必胜策略输出 `YES`，否则输出 `NO`。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n| Subtask | $1\\le n \\le$ | $1\\le S \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $300$ | $300$ | $7$ |\n| $2$ | $300$ | $3 \\times 10^7$ | $8$ |\n| $3$ | $300$ | $3\\times 10^{10}$ | $16$ |\n| $4$ | $3\\times 10^6$ | $3$ | $3$ |\n| $5$ | $3\\times 10^6$ | $3 \\times 10^3$ | $3$ |\n| $6$ | $3\\times 10^6$ | $3 \\times 10^7$ | $16$ |\n| $7$ | $3\\times 10^6$ | $3\\times 10^{10}$ | $47$ |\n\n对于 $100\\%$ 的数据， $1 \\le k \\le n \\le 3 \\times 10^6$，$1 \\le S \\le 3 \\times 10^{10}$。", "locale": "zh-CN"}}}
{"pid": "P7978", "type": "P", "difficulty": 6, "samples": [["2\n", "2\n1 3 2 4\n3 1 4 2\n1 2 1\n3 1 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "Special Judge", "位运算", "构造"], "title": "「Stoi2033」听见下雨的声音", "background": "> 而我听见下雨的声音  \n> 想起你用唇语说爱情  \n> 幸福也可以很安静  \n> 我付出一直很小心  \n> 终于听见下雨的声音  \n> 于是我的世界被吵醒  \n> 就怕情绪红了眼睛  \n> 不舍的泪在彼此的脸上透明  \n> ——《听见下雨的声音》", "description": "SNS 现在要举办一次比赛，总共有 $n$ 个项目，比赛分 $n$ 场举行，每个项目恰比赛一场。\n\n校长希望比赛结果更多样，于是他决定从同学们之中找到 $2^n$ 位实力适当的选手，满足每个项目中每人的实力各不相同。\n\n选定所有选手后，校长再进行适当的场次安排，且在进行每场比赛时对应比赛项目实力较强的一半选手晋级，其余人淘汰，不再参与之后的比赛，直到最后只剩下一位选手成为最终的冠军。\n\n校长希望对于所有不同的比赛场次安排，最终可能夺冠的不同人数尽量多。现在他想要求出这个最大值，并且对于每个可能夺冠的选手找到一种安排每场比赛项目的方式使得 ta 最终夺冠。\n\n因为校长公务繁忙，所以他要求作为学校首位 AKIOIer 的你来帮他完成这个任务。具体地，你需要先对 $i=1,2,\\dots,n$ 给出第 $i$ 项的选手实力从强到弱排名（用选手编号的排列表示），再对每位可能夺冠的选手给出一个 $1,2,\\dots,n$ 的排列表示安排的场次顺序让他最终夺冠。可见 **输出格式**。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "第一行输出一个数 $m$ 表示最多有多少人可能夺冠。\n\n接下来 $n$ 行，第 $i$ 行输出 $2^n$ 个数依次表示第 $i$ 个项目实力从高到低的选手编号。\n\n接下来 $m$ 行，每行先输出一个数 $x$ 表示一个可以夺冠的选手的编号，然后输出一个 $1,2,\\dots,n$ 的排列表示一种场次安排的方式使得 $x$ 最终夺冠。\n\n**请务必保证输出格式正确，否则 Special Judge 可能会出现错误。**", "hint": "#### 样例解释\n\n首先由于至多只有 $2$ 种场次安排方式，所以显然至多只有 $2$ 人可能夺冠。\n\n对于选手 $1$，首先项目 $2$ 会淘汰 $4,2$，剩下选手 $1,3$，然后项目 $1$ 会淘汰 $3$，最终 $1$ 夺冠。\n\n对于选手 $3$，首先项目 $1$ 会淘汰 $2,4$，剩下选手 $1,3$，然后项目 $2$ 会淘汰 $1$，最终 $3$ 夺冠。\n\n#### 数据范围\n\n本题共有 $11$ 个测试点，第 $i$ 个测试点满足 $n=i+2$。\n\n每个测试点分值分别为 $6,7,8,8,8,8,8,11,11,12,13$。\n\n本题提供 [Special Judge 源码](https://www.luogu.com.cn/paste/6q40493c) 和 checker.exe（见 **附件下载**）。以下是 checker.exe 可能的返回结果及其含义：\n\n + `Wrong answer.`：可能夺冠的人数 $m$ 有误。\n \n + `Invalid contestant number.`：出现不合法的选手编号，包括选手编号不为 $[1,2^n]$ 中的整数，或排名不为 $1,2,\\dots,2^n$ 的排列。\n \n + `Invalid item number.`：出现不合法的项目编号，包括项目编号不为 $[1,n]$ 中的整数，或排名不为 $1,2,\\dots,n$ 的排列。\n \n + `Contestant didn't won the first prize.`：某名选手并不能通过你给出的比赛场次安排夺冠。\n \n + `Accepted`：答案正确。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Stoi2033」听见下雨的声音", "background": "> 而我听见下雨的声音  \n> 想起你用唇语说爱情  \n> 幸福也可以很安静  \n> 我付出一直很小心  \n> 终于听见下雨的声音  \n> 于是我的世界被吵醒  \n> 就怕情绪红了眼睛  \n> 不舍的泪在彼此的脸上透明  \n> ——《听见下雨的声音》", "description": "SNS 现在要举办一次比赛，总共有 $n$ 个项目，比赛分 $n$ 场举行，每个项目恰比赛一场。\n\n校长希望比赛结果更多样，于是他决定从同学们之中找到 $2^n$ 位实力适当的选手，满足每个项目中每人的实力各不相同。\n\n选定所有选手后，校长再进行适当的场次安排，且在进行每场比赛时对应比赛项目实力较强的一半选手晋级，其余人淘汰，不再参与之后的比赛，直到最后只剩下一位选手成为最终的冠军。\n\n校长希望对于所有不同的比赛场次安排，最终可能夺冠的不同人数尽量多。现在他想要求出这个最大值，并且对于每个可能夺冠的选手找到一种安排每场比赛项目的方式使得 ta 最终夺冠。\n\n因为校长公务繁忙，所以他要求作为学校首位 AKIOIer 的你来帮他完成这个任务。具体地，你需要先对 $i=1,2,\\dots,n$ 给出第 $i$ 项的选手实力从强到弱排名（用选手编号的排列表示），再对每位可能夺冠的选手给出一个 $1,2,\\dots,n$ 的排列表示安排的场次顺序让他最终夺冠。可见 **输出格式**。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "第一行输出一个数 $m$ 表示最多有多少人可能夺冠。\n\n接下来 $n$ 行，第 $i$ 行输出 $2^n$ 个数依次表示第 $i$ 个项目实力从高到低的选手编号。\n\n接下来 $m$ 行，每行先输出一个数 $x$ 表示一个可以夺冠的选手的编号，然后输出一个 $1,2,\\dots,n$ 的排列表示一种场次安排的方式使得 $x$ 最终夺冠。\n\n**请务必保证输出格式正确，否则 Special Judge 可能会出现错误。**", "hint": "#### 样例解释\n\n首先由于至多只有 $2$ 种场次安排方式，所以显然至多只有 $2$ 人可能夺冠。\n\n对于选手 $1$，首先项目 $2$ 会淘汰 $4,2$，剩下选手 $1,3$，然后项目 $1$ 会淘汰 $3$，最终 $1$ 夺冠。\n\n对于选手 $3$，首先项目 $1$ 会淘汰 $2,4$，剩下选手 $1,3$，然后项目 $2$ 会淘汰 $1$，最终 $3$ 夺冠。\n\n#### 数据范围\n\n本题共有 $11$ 个测试点，第 $i$ 个测试点满足 $n=i+2$。\n\n每个测试点分值分别为 $6,7,8,8,8,8,8,11,11,12,13$。\n\n本题提供 [Special Judge 源码](https://www.luogu.com.cn/paste/6q40493c) 和 checker.exe（见 **附件下载**）。以下是 checker.exe 可能的返回结果及其含义：\n\n + `Wrong answer.`：可能夺冠的人数 $m$ 有误。\n \n + `Invalid contestant number.`：出现不合法的选手编号，包括选手编号不为 $[1,2^n]$ 中的整数，或排名不为 $1,2,\\dots,2^n$ 的排列。\n \n + `Invalid item number.`：出现不合法的项目编号，包括项目编号不为 $[1,n]$ 中的整数，或排名不为 $1,2,\\dots,n$ 的排列。\n \n + `Contestant didn't won the first prize.`：某名选手并不能通过你给出的比赛场次安排夺冠。\n \n + `Accepted`：答案正确。", "locale": "zh-CN"}}}
{"pid": "P7979", "type": "P", "difficulty": 7, "samples": [["2\n7 1 13\n2 3 4 5 7 10 11\n8 1 13\n2 3 4 5 7 10 11 13\n", "YES\nNO\n"], ["1\n7 2 100\n19 26 8 17 11 45 14\n", "YES\n"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072]}, "tags": ["数学", "博弈论", "O2优化"], "title": "「Stoi2033」世界未末日 加强版", "background": "注意：**利用提交反馈以套取数据的行为属于作弊**。\n\n> 就算是世界要崩溃  \n> 亲爱的我也绝不会落泪  \n> 不放弃爱过的那种感觉  \n> 珍惜着有你记忆的一切  \n> 就算是世界要倾斜  \n> 亲爱的我也绝不说离别  \n> 尽管末日威胁再强烈  \n> 有爱就不累  \n> ——《世界未末日》", "description": "Vinsta 和 Stella 有 $n$ 堆石子，第 $i$ 堆有 $s_i$ 个。\n\n她们约定从 Vinsta 开始轮流操作，每次操作可以选择不少于 $1$ 堆且不超过 $k$ 堆的石子。对于第 $i$ 堆石子，可以选取两个实数 $a,b$ 满足：\n\n- $a \\times b=s_i$\n- $a+b=c,c\\in[1,s_i]\\cap\\Z$\n\n并丢掉第 $i$ 堆的 $c$ 个石子，即 $s_i\\leftarrow s_i-c$。不能操作者败，她们想要知道 Vinsta 是否有必胜策略。", "inputFormat": "第一行一个正整数表示数据组数 $T$。\n\n接下来 $T$ 组数据，每组数据第一行共三个正整数： $n,k,S$，其中 $S=\\max\\{s_i\\}$。\n\n第二行共 $n$ 个正整数： $s_i$，表示初始时第 $i$ 堆的石子个数。", "outputFormat": "对于每组数据输出一行。有必胜策略输出 `YES`，否则输出 `NO`。", "hint": "对于 $100\\%$ 的数据， $1 \\le T \\le 10$, $1 \\le k \\le n \\le 3 \\times 10^6$，$1 \\le S \\le 3 \\times 10^{17}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Stoi2033」世界未末日 加强版", "background": "注意：**利用提交反馈以套取数据的行为属于作弊**。\n\n> 就算是世界要崩溃  \n> 亲爱的我也绝不会落泪  \n> 不放弃爱过的那种感觉  \n> 珍惜着有你记忆的一切  \n> 就算是世界要倾斜  \n> 亲爱的我也绝不说离别  \n> 尽管末日威胁再强烈  \n> 有爱就不累  \n> ——《世界未末日》", "description": "Vinsta 和 Stella 有 $n$ 堆石子，第 $i$ 堆有 $s_i$ 个。\n\n她们约定从 Vinsta 开始轮流操作，每次操作可以选择不少于 $1$ 堆且不超过 $k$ 堆的石子。对于第 $i$ 堆石子，可以选取两个实数 $a,b$ 满足：\n\n- $a \\times b=s_i$\n- $a+b=c,c\\in[1,s_i]\\cap\\Z$\n\n并丢掉第 $i$ 堆的 $c$ 个石子，即 $s_i\\leftarrow s_i-c$。不能操作者败，她们想要知道 Vinsta 是否有必胜策略。", "inputFormat": "第一行一个正整数表示数据组数 $T$。\n\n接下来 $T$ 组数据，每组数据第一行共三个正整数： $n,k,S$，其中 $S=\\max\\{s_i\\}$。\n\n第二行共 $n$ 个正整数： $s_i$，表示初始时第 $i$ 堆的石子个数。", "outputFormat": "对于每组数据输出一行。有必胜策略输出 `YES`，否则输出 `NO`。", "hint": "对于 $100\\%$ 的数据， $1 \\le T \\le 10$, $1 \\le k \\le n \\le 3 \\times 10^6$，$1 \\le S \\le 3 \\times 10^{17}$。", "locale": "zh-CN"}}}
{"pid": "P7980", "type": "P", "difficulty": 5, "samples": [["3\n1 2 2\n2 3 3", "5"], ["4\n1 2 4\n2 3 4\n3 4 4", "96"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "洛谷原创", "O2优化"], "title": "[JRKSJ R3] a question", "background": "这是一个问题。", "description": "现在有一棵 $n$ 个结点的树 $\\text{T}$，边带权，结点的编号为 $[1,n]$ 的排列。\n\n设 $\\text{G}$ 为 $\\text{T}$ 的补图。对于 $\\text{G}$ 上的每一条边 $(x,y)$，该边的权值为 $\\text{T}$ 上 $x\\rightarrow y$ 的路径上的边权和。\n\n设 $dis(x,y)$ 为 $\\text{G}$ 上 $x,y$ 两点之间的最短路径的长度。若 $x,y$ 两点不连通，则令 $dis(x,y)=0$。\n\n求 $\\displaystyle\\sum_{i=1}^{n-1} \\sum_{j=i+1}^n dis(i,j)$。", "inputFormat": "输入的所有数都为整数。\n\n第一行一个数 $n$。\\\n接下来 $n-1$ 行每行三个数 $u,v,w$ 表示 $\\text{T}$ 中有一条连接 $u,v$ 且边权为 $w$ 的边。", "outputFormat": "输出一个数表示答案，由于答案很大，请对 $10^9+7$ 取模。", "hint": "$\\text{T}$ 的补图 $\\text{G}$ 的定义为：对于边 $(x,y)(1\\le x,y\\le n,x\\ne y)$，若 $\\text{T}$ 中不存在该边 ，则 $\\text{G}$ 中存在该边；若 $\\text{T}$ 中存在该边 ，则 $\\text{G}$ 中不存在该边。$\\text{G}$ 为无向图。\n\n### 样例解释\n对于样例 $2$，图 $\\text{G}$ 如图所示：\n\n![3](https://cdn.luogu.com.cn/upload/image_hosting/wjblfgx5.png?x-oss-process=image)\n\n我们有：\n| $dis(i,j)$ | $j=1$ | $j=2$ | $j=3$ | $j=4$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $i=1$ |  | $20$ | $8$ | $12$ |\n| $i=2$ |  |  | $28$ | $8$ |\n| $i=3$ |  |  |  | $20$ |\n\n所以答案为 $96$。\n### 数据规模\n\n| $\\text{Subtask}$ | $n\\le$ | 特殊性质 | 分值 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^3$ | 无 | $10$ | 无 |\n| $2$ | $10^4$ | 无 | $20$ | $1$ |\n| $3$ | $2\\times 10^6$ | 树为菊花 | $20$ | 无 |\n| $4$ | $2\\times 10^6$ | 树为链 | $20$ | 无 |\n| $5$ | $2\\times 10^6$ | 无 | $30$ | $1,2,3,4$ |\n\n对于 $100\\%$ 的数据，$2\\le n \\le 2\\times 10^6$，$1\\le x,y\\le n$，$0\\le v\\le 10^9$。\n\n**本题输入文件较大，请使用恰当的读入方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R3] a question", "background": "这是一个问题。", "description": "现在有一棵 $n$ 个结点的树 $\\text{T}$，边带权，结点的编号为 $[1,n]$ 的排列。\n\n设 $\\text{G}$ 为 $\\text{T}$ 的补图。对于 $\\text{G}$ 上的每一条边 $(x,y)$，该边的权值为 $\\text{T}$ 上 $x\\rightarrow y$ 的路径上的边权和。\n\n设 $dis(x,y)$ 为 $\\text{G}$ 上 $x,y$ 两点之间的最短路径的长度。若 $x,y$ 两点不连通，则令 $dis(x,y)=0$。\n\n求 $\\displaystyle\\sum_{i=1}^{n-1} \\sum_{j=i+1}^n dis(i,j)$。", "inputFormat": "输入的所有数都为整数。\n\n第一行一个数 $n$。\\\n接下来 $n-1$ 行每行三个数 $u,v,w$ 表示 $\\text{T}$ 中有一条连接 $u,v$ 且边权为 $w$ 的边。", "outputFormat": "输出一个数表示答案，由于答案很大，请对 $10^9+7$ 取模。", "hint": "$\\text{T}$ 的补图 $\\text{G}$ 的定义为：对于边 $(x,y)(1\\le x,y\\le n,x\\ne y)$，若 $\\text{T}$ 中不存在该边 ，则 $\\text{G}$ 中存在该边；若 $\\text{T}$ 中存在该边 ，则 $\\text{G}$ 中不存在该边。$\\text{G}$ 为无向图。\n\n### 样例解释\n对于样例 $2$，图 $\\text{G}$ 如图所示：\n\n![3](https://cdn.luogu.com.cn/upload/image_hosting/wjblfgx5.png?x-oss-process=image)\n\n我们有：\n| $dis(i,j)$ | $j=1$ | $j=2$ | $j=3$ | $j=4$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $i=1$ |  | $20$ | $8$ | $12$ |\n| $i=2$ |  |  | $28$ | $8$ |\n| $i=3$ |  |  |  | $20$ |\n\n所以答案为 $96$。\n### 数据规模\n\n| $\\text{Subtask}$ | $n\\le$ | 特殊性质 | 分值 | 子任务依赖 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^3$ | 无 | $10$ | 无 |\n| $2$ | $10^4$ | 无 | $20$ | $1$ |\n| $3$ | $2\\times 10^6$ | 树为菊花 | $20$ | 无 |\n| $4$ | $2\\times 10^6$ | 树为链 | $20$ | 无 |\n| $5$ | $2\\times 10^6$ | 无 | $30$ | $1,2,3,4$ |\n\n对于 $100\\%$ 的数据，$2\\le n \\le 2\\times 10^6$，$1\\le x,y\\le n$，$0\\le v\\le 10^9$。\n\n**本题输入文件较大，请使用恰当的读入方式。**", "locale": "zh-CN"}}}
{"pid": "P7981", "type": "P", "difficulty": 5, "samples": [["5 2\n2 5 4 3 1", "2 5 3 4 1"], ["20 233\n1 1 5 6 8 15 10 11 18 14 4 16 16 11 3 5 1 15 4 5", "1 1 4 5 6 8 4 15 5 6 3 11 11 15 11 4 1 8 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["倍增", "2021", "洛谷原创", "基环树"], "title": "[JRKSJ R3] system", "background": "", "description": "定义对序列 $a$ 的一次操作为令 $b_i\\gets a_{a_i}$，再令 $a_i\\gets b_i$，其中 $i\\in[1,n]$。\n\n给你一个长为 $n$ 的序列 $a$，询问对 $a$ 进行 $k$ 次操作后的序列。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数表示序列 $a$。", "outputFormat": "一行共 $n$ 个整数，表示 $k$ 次操作后的序列 $a$。", "hint": "### 样例解释\n\n对于第 $1$ 个样例，$a$ 的变化如下：\n\n$$5,1,3,4,2$$\n$$2,5,3,4,1$$\n\n### 数据规模与约定\n\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^4$ | $\\text A$ | $5$ |\n| $2$ | $10^2$ | 无 | $15$ |\n| $3$ | $10^4$ | $\\text B$ | $10$ |\n| $4$ | $5\\times 10^5$ | $\\text B$ | $20$ |\n| $5$ | $5\\times 10^5$ | $\\text C$ | $20$ |\n| $6$ | $5\\times 10^5$ | 无 | $30$ |\n\n性质 $\\text A$：$0\\le k\\le 10^3$。\\\n性质 $\\text B$：$a_i=i\\bmod n+1$。\\\n性质 $\\text C$：$a$ 是一个 $[1,n]$ 的排列。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^5$，$0\\le k\\le 10^9$，$1\\le a_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R3] system", "background": "", "description": "定义对序列 $a$ 的一次操作为令 $b_i\\gets a_{a_i}$，再令 $a_i\\gets b_i$，其中 $i\\in[1,n]$。\n\n给你一个长为 $n$ 的序列 $a$，询问对 $a$ 进行 $k$ 次操作后的序列。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数表示序列 $a$。", "outputFormat": "一行共 $n$ 个整数，表示 $k$ 次操作后的序列 $a$。", "hint": "### 样例解释\n\n对于第 $1$ 个样例，$a$ 的变化如下：\n\n$$5,1,3,4,2$$\n$$2,5,3,4,1$$\n\n### 数据规模与约定\n\n本题采用捆绑测试。\n\n| $\\text{Subtask}$ | $n\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10^4$ | $\\text A$ | $5$ |\n| $2$ | $10^2$ | 无 | $15$ |\n| $3$ | $10^4$ | $\\text B$ | $10$ |\n| $4$ | $5\\times 10^5$ | $\\text B$ | $20$ |\n| $5$ | $5\\times 10^5$ | $\\text C$ | $20$ |\n| $6$ | $5\\times 10^5$ | 无 | $30$ |\n\n性质 $\\text A$：$0\\le k\\le 10^3$。\\\n性质 $\\text B$：$a_i=i\\bmod n+1$。\\\n性质 $\\text C$：$a$ 是一个 $[1,n]$ 的排列。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^5$，$0\\le k\\le 10^9$，$1\\le a_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P7982", "type": "P", "difficulty": 7, "samples": [["5 5\n01010\n1 4 5 5\n2 1 3 2 5\n1 2 3 3\n2 1 5 1 2\n2 3 4 4 5", "15\n24\n8"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "洛谷原创", "后缀自动机 SAM", "O2优化", "后缀数组 SA"], "title": "[JRKSJ R3] 琴琴的树", "background": "", "description": "琴琴有一棵二叉树，满足：\n\n* 该树有无穷多个结点。\n* 每个结点都有编号和权值。初始所有结点的权值为 $0$。\n* 树根的编号为 $1$。\n* 若一个结点的编号为 $i$，则该结点的左右儿子的编号分别是 $2i,2i+1$。\n\n琴琴要对树进行共 $m$ 次操作，每次操作是二者之一：\n\n1. 将编号为 $x$ 的结点为根的子树中的每个结点的权值都加 $v$。\n2. 求树上编号为 $x$ 的结点到编号为 $y$ 的结点的路径上每个结点的权值和。答案对 $2^{32}$ 取模。\n\n不过琴琴不会直接给出 $x,y$。她再给出一个长度为 $n$ 的 $01$ 序列 $a$，每次给出 $x$ 或 $y$ 时给出一个区间 $[l_x,r_x]$ 或 $[l_y,r_y]$，这个数就是将这个区间视作二进制数的值。", "inputFormat": "第一行两个整数 $n,m$。\\\n第二行一个长度为 $n$ 的字符串表示 $a$。保证字符串中只包含 `0` 和 `1`。\\\n下面 $m$ 行，每行一个操作编号，然后是操作。操作的格式为：\n1. $\\ l_x\\ r_x\\ v$\n2. $\\ l_x\\ r_x\\ l_y\\ r_y$", "outputFormat": "对于每个操作 $2$，每行一个整数表示答案。", "hint": "### 样例解释\n\n该树的前四层如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/394f62g7.png)\n\n第一个操作：将以 $2$ 为根的子树中的结点权值加上 $5$。\\\n第二个操作：求 $2\\rightarrow 10$ 的路径上的点的权值和。\\\n第三个操作：将以 $2$ 为根的子树中的结点权值加上 $3$。\\\n第四个操作：求 $10\\rightarrow 1$ 的路径上的点的权值和。\\\n第五个操作：求 $1\\rightarrow 2$ 的路径上的点的权值和。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n\\le$ | $m\\le $ | 分值 |\n| :----------: | :----------: | :----------: | :----------: | \n| $1$ | $10$ | $10^3$ | $5$ |\n| $2$ | $20$ | $10^5$ | $5$ |\n| $3$ | $10^4$ | $10^4$ | $20$ |\n| $4$ | $4\\times 10^5$ | $4\\times 10^5$ | $70$ |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 4\\times 10^5$，$1\\le v \\le 10^9$，$1\\le l_x\\le r_x\\le n$，$1\\le l_y\\le r_y\\le n$，保证 $x,y\\ne 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R3] 琴琴的树", "background": "", "description": "琴琴有一棵二叉树，满足：\n\n* 该树有无穷多个结点。\n* 每个结点都有编号和权值。初始所有结点的权值为 $0$。\n* 树根的编号为 $1$。\n* 若一个结点的编号为 $i$，则该结点的左右儿子的编号分别是 $2i,2i+1$。\n\n琴琴要对树进行共 $m$ 次操作，每次操作是二者之一：\n\n1. 将编号为 $x$ 的结点为根的子树中的每个结点的权值都加 $v$。\n2. 求树上编号为 $x$ 的结点到编号为 $y$ 的结点的路径上每个结点的权值和。答案对 $2^{32}$ 取模。\n\n不过琴琴不会直接给出 $x,y$。她再给出一个长度为 $n$ 的 $01$ 序列 $a$，每次给出 $x$ 或 $y$ 时给出一个区间 $[l_x,r_x]$ 或 $[l_y,r_y]$，这个数就是将这个区间视作二进制数的值。", "inputFormat": "第一行两个整数 $n,m$。\\\n第二行一个长度为 $n$ 的字符串表示 $a$。保证字符串中只包含 `0` 和 `1`。\\\n下面 $m$ 行，每行一个操作编号，然后是操作。操作的格式为：\n1. $\\ l_x\\ r_x\\ v$\n2. $\\ l_x\\ r_x\\ l_y\\ r_y$", "outputFormat": "对于每个操作 $2$，每行一个整数表示答案。", "hint": "### 样例解释\n\n该树的前四层如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/394f62g7.png)\n\n第一个操作：将以 $2$ 为根的子树中的结点权值加上 $5$。\\\n第二个操作：求 $2\\rightarrow 10$ 的路径上的点的权值和。\\\n第三个操作：将以 $2$ 为根的子树中的结点权值加上 $3$。\\\n第四个操作：求 $10\\rightarrow 1$ 的路径上的点的权值和。\\\n第五个操作：求 $1\\rightarrow 2$ 的路径上的点的权值和。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | $n\\le$ | $m\\le $ | 分值 |\n| :----------: | :----------: | :----------: | :----------: | \n| $1$ | $10$ | $10^3$ | $5$ |\n| $2$ | $20$ | $10^5$ | $5$ |\n| $3$ | $10^4$ | $10^4$ | $20$ |\n| $4$ | $4\\times 10^5$ | $4\\times 10^5$ | $70$ |\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 4\\times 10^5$，$1\\le v \\le 10^9$，$1\\le l_x\\le r_x\\le n$，$1\\le l_y\\le r_y\\le n$，保证 $x,y\\ne 0$。", "locale": "zh-CN"}}}
{"pid": "P7983", "type": "P", "difficulty": 7, "samples": [["4 5\n5 5 4 5\n3 4 4 1\n2 3 3 2\n2 2 3 4\n3 1 4\n1 3 3 2\n3 2 4", "57\n39"], ["5 5\n1 7 5 2 5\n2 1 5 3 2\n1 5 5 3\n1 3 5 2\n3 1 4\n2 1 4 2\n3 1 3", "33\n24"], ["10 10\n27 29 12 16 16 6 20 22 17 1\n2 6 1 10 4 1 3 10 9 6\n2 3 5 6\n3 2 10\n2 5 10 9\n3 5 9\n1 1 5 24\n1 6 10 12\n3 2 3\n1 4 6 14\n1 4 8 14\n3 5 10", "956\n825\n264\n924"]], "limits": {"time": [4000, 5000, 2000, 5000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 4000, 4000, 4000, 4000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 2000, 4000, 7000, 7000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "颜色段均摊（珂朵莉树 ODT）", "洛谷原创", "O2优化", "分块"], "title": "[JRKSJ R3] practiceZ", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/qpcumiv6.png)", "description": "琴琴给了你两个长为 $n$ 的序列 $a,b$，请你支持三种操作共 $m$ 次：\n\n1. `1 l r x`，将 $a$ 序列的区间 $[l,r]$ 中的所有数修改为 $x$。\n2. `2 l r y`，将 $b$ 序列的区间 $[l,r]$ 中的所有数修改为 $y$。\n3. `3 l r`，求 $\\sum_{i=l}^r \\sum_{j=1}^{b_i} a_j$。答案对 $2^{32}$ 取模。", "inputFormat": "输入均为整数。\n\n第 $1$ 行 $2$ 个数 $n,m$。\\\n第 $2$ 行 $n$ 个数表示序列 $a$。\\\n第 $3$ 行 $n$ 个数表示序列 $b$。\\\n接下来 $m$ 行，每行一个操作，格式见题目描述。", "outputFormat": "对于每个操作 $3$，一行一个整数表示答案。", "hint": "**本题采用捆绑测试。**\n\n注：原时间限制为 5s，较为卡常所以被管理改为 7s。\n\n| $\\text{Subtask}$ | $n\\le$ | $m\\le$ | 特殊性质 | 分值 | 子任务依赖 | 时间限制 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $500$ | $10^3$ | 无 | $10$ | 无 | $2\\text{s}$ |\n| $2$ | $10^4$ | $10^4$ | 无 | $10$ | $1$ | $2\\text{s}$ |\n| $3$ | $10^5$ | $10^5$ | 无 | $30$ | $1,2$ | $4\\text{s}$ |\n| $4$ | $5\\times 10^5$ | $3\\times 10^5$ |数据随机 | $20$ | 无 | $5\\text{s}$ |\n| $5$ | $5\\times 10^5$ |  $3\\times 10^5$ | 无 | $30$ | $1,2,3,4$ | $5\\text{s}$ |\n\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^5$，$1\\le m\\le 3\\times 10^5$，$1\\le a_i,x\\le 10^9$，$1\\le b_i,y\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JRKSJ R3] practiceZ", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/qpcumiv6.png)", "description": "琴琴给了你两个长为 $n$ 的序列 $a,b$，请你支持三种操作共 $m$ 次：\n\n1. `1 l r x`，将 $a$ 序列的区间 $[l,r]$ 中的所有数修改为 $x$。\n2. `2 l r y`，将 $b$ 序列的区间 $[l,r]$ 中的所有数修改为 $y$。\n3. `3 l r`，求 $\\sum_{i=l}^r \\sum_{j=1}^{b_i} a_j$。答案对 $2^{32}$ 取模。", "inputFormat": "输入均为整数。\n\n第 $1$ 行 $2$ 个数 $n,m$。\\\n第 $2$ 行 $n$ 个数表示序列 $a$。\\\n第 $3$ 行 $n$ 个数表示序列 $b$。\\\n接下来 $m$ 行，每行一个操作，格式见题目描述。", "outputFormat": "对于每个操作 $3$，一行一个整数表示答案。", "hint": "**本题采用捆绑测试。**\n\n注：原时间限制为 5s，较为卡常所以被管理改为 7s。\n\n| $\\text{Subtask}$ | $n\\le$ | $m\\le$ | 特殊性质 | 分值 | 子任务依赖 | 时间限制 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $500$ | $10^3$ | 无 | $10$ | 无 | $2\\text{s}$ |\n| $2$ | $10^4$ | $10^4$ | 无 | $10$ | $1$ | $2\\text{s}$ |\n| $3$ | $10^5$ | $10^5$ | 无 | $30$ | $1,2$ | $4\\text{s}$ |\n| $4$ | $5\\times 10^5$ | $3\\times 10^5$ |数据随机 | $20$ | 无 | $5\\text{s}$ |\n| $5$ | $5\\times 10^5$ |  $3\\times 10^5$ | 无 | $30$ | $1,2,3,4$ | $5\\text{s}$ |\n\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^5$，$1\\le m\\le 3\\times 10^5$，$1\\le a_i,x\\le 10^9$，$1\\le b_i,y\\le n$。", "locale": "zh-CN"}}}
{"pid": "P7984", "type": "P", "difficulty": 6, "samples": [["7 6\n4 1 2 3\n4 10 5 6\n2 100 7 7\n6 1000 1 1\n5 10000 1 4\n6 100000 5 6", "-1\n-1\n-1\n1111\n10100\n110100\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "线段树", "USACO", "2021", "图论建模", "最短路"], "title": "[USACO21DEC]  Tickets P", "background": "", "description": "Bessie 正在参加远足旅行！她当前正在旅行的路线由编号为 $1\\ldots N$（$1\\le N\\le 10^5$）的 $N$ 个检查点组成。\n\n有 $K$（$1\\le K\\le 10^5$）张票可供购买。第 $i$ 张票可以在检查站 $c_i$（$1\\le c_i\\le N$）以 $p_i$（$1\\le p_i\\le 10^9$）的价格购得，并且可以用其进入所有检查站 $[a_i,b_i]$（$1\\le a_i\\le b_i\\le N$）。在进入任何检查站之前，Bessie 必须已购买一张允许其进入该检查站的票。一旦 Bessie 可以前往某一检查站，她就可以在未来的任何时候回到该检查站。\n\n对于每一个 $i\\in [1,N]$，如果 Bessie 最初只能进入检查点 $i$，输出使得可以进入检查点 $1$ 和 $N$ 所需的最低总价。如果无法这样做，输出 $-1$。\n", "inputFormat": "输入的第一行包含 $N$ 和 $K$。\n\n以下 $K$ 行，对于每一个 $1\\le i\\le K$，第 $i$ 行包含四个整数 $c_i$，$p_i$，$a_i$ 和 $b_i$。", "outputFormat": "输出 $N$ 行，每行输出一个检查点的答案。", "hint": "【样例解释】\n\n如果 Bessie 从检查点 $i=4$ 开始，那么一种购得进入检查点 $1$ 和 $N$ 的方法如下：\n\n在检查点 $4$ 购买第一张票，使 Bessie 可以进入检查点 $2$ 和 $3$。\n\n在检查点 $2$ 购买第三张票，使 Bessie 可以进入检查点 $7$。\n\n回到检查点 $4$ 购买第二张票，使 Bessie 可以进入检查点 $5$ 和 $6$。\n\n在检查点 $6$ 购买第四张票，使 Bessie 可以进入检查点 $1$。\n\n【数据范围】\n\n- 测试点 1-7 满足 $N,K\\le 1000$。\n- 测试点 8-19 没有额外限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC]  Tickets P", "background": "", "description": "Bessie 正在参加远足旅行！她当前正在旅行的路线由编号为 $1\\ldots N$（$1\\le N\\le 10^5$）的 $N$ 个检查点组成。\n\n有 $K$（$1\\le K\\le 10^5$）张票可供购买。第 $i$ 张票可以在检查站 $c_i$（$1\\le c_i\\le N$）以 $p_i$（$1\\le p_i\\le 10^9$）的价格购得，并且可以用其进入所有检查站 $[a_i,b_i]$（$1\\le a_i\\le b_i\\le N$）。在进入任何检查站之前，Bessie 必须已购买一张允许其进入该检查站的票。一旦 Bessie 可以前往某一检查站，她就可以在未来的任何时候回到该检查站。\n\n对于每一个 $i\\in [1,N]$，如果 Bessie 最初只能进入检查点 $i$，输出使得可以进入检查点 $1$ 和 $N$ 所需的最低总价。如果无法这样做，输出 $-1$。\n", "inputFormat": "输入的第一行包含 $N$ 和 $K$。\n\n以下 $K$ 行，对于每一个 $1\\le i\\le K$，第 $i$ 行包含四个整数 $c_i$，$p_i$，$a_i$ 和 $b_i$。", "outputFormat": "输出 $N$ 行，每行输出一个检查点的答案。", "hint": "【样例解释】\n\n如果 Bessie 从检查点 $i=4$ 开始，那么一种购得进入检查点 $1$ 和 $N$ 的方法如下：\n\n在检查点 $4$ 购买第一张票，使 Bessie 可以进入检查点 $2$ 和 $3$。\n\n在检查点 $2$ 购买第三张票，使 Bessie 可以进入检查点 $7$。\n\n回到检查点 $4$ 购买第二张票，使 Bessie 可以进入检查点 $5$ 和 $6$。\n\n在检查点 $6$ 购买第四张票，使 Bessie 可以进入检查点 $1$。\n\n【数据范围】\n\n- 测试点 1-7 满足 $N,K\\le 1000$。\n- 测试点 8-19 没有额外限制。\n", "locale": "zh-CN"}}}
{"pid": "P7985", "type": "P", "difficulty": 6, "samples": [["2 5 4\nG 1 1\nH 3 4\nG 4 2\nH 6 6\nH 8 9", "16"], ["1 5 4\nG 1 1\nH 3 4\nG 4 2\nH 6 6\nH 8 9", "6"], ["2 10 76\nH 1 18\nH 18 465\nH 25 278\nH 30 291\nH 36 202\nG 45 96\nG 60 375\nG 93 941\nG 96 870\nG 98 540", "1893"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "USACO", "2021", "动态规划优化"], "title": "[USACO21DEC] Paired Up P", "background": "", "description": "数轴上总计有 $N$（$1\\le N\\le 5000$）头奶牛，每一头奶牛都是荷斯坦牛（Holstein）或更赛牛（Guernsey）之一。第 $i$ 头奶牛的品种为 $b_i\\in \\{H,G\\}$，第 $i$ 头奶牛的位置为 $x_i$（$0 \\leq x_i \\leq 10^9$），而第 $i$ 头奶牛的重量为 $y_i$（$1 \\leq y_i \\leq 10^5$）。\n\n根据 Farmer John 的信号，某些奶牛会组成对，使得\n\n- 每一对包含位置相差不超过 $K$ 的一头荷斯坦牛 $h$ 和一头更赛牛 $g$（$1\\le K\\le 10^9$）；也就是说，$|x_h-x_g|\\le K$。\n\n- 每一头奶牛要么包含在恰好一对中，要么不属于任何一对。\n- 配对是**极大的**；也就是说，没有两头未配对的奶牛可以组成对。\n\n你需要求出未配对的奶牛的重量之和的可能的范围。具体地说，\n\n- 如果 $T=1$，计算未配对的奶牛的最小重量和。\n\n- 如果 $T=2$，计算未配对的奶牛的最大重量和。", "inputFormat": "输入的第一行包含 $T$，$N$ 和 $K$。\n\n以下 $N$ 行，第 $i$ 行包含 $b_i,x_i,y_i$。输入保证 $0\\le x_1<x_2<\\cdots<x_{N}\\le 10^9$。", "outputFormat": "输出未配对的奶牛的最小或最大重量和。", "hint": "【样例解释1】\n\n奶牛 $2$ 和 $3$ 可以配对，因为她们的距离为 $1$，不超过 $K = 4$。这个配对方案是极大的，因为奶牛 $1$，唯一余下的更赛牛，和奶牛 $4$ 的距离为 $5$，和奶牛 $5$ 的距离为 $7$，均大于 $K = 4$。未配对的奶牛的重量和为 $1 + 6 + 9 = 16$。\n\n【样例解释2】\n\n奶牛 $1$ 和 $2$ 可以配对，因为她们的距离为 $2 \\leq K = 4$，同时奶牛 $3$ 和 $5$ 可以配对，因为她们的距离为 $4 \\leq K = 4$。这个配对方案是极大的，因为只剩下了奶牛 $4$。未配对的奶牛的重量和即为唯一未配对的奶牛的重量，即为 $6$。\n\n【样例解释3】\n\n这个例子的答案为 $18+465+870+540=1893$。\n\n【数据范围】\n\n- 测试点 4-7 满足 $T=1$；\n- 测试点 8-14 满足 $T=2$ 且 $N\\le 300$；\n- 测试点 15-22 满足 $T=2$。\n\n**注意：本题的内存限制为 $\\text{512MB}$，是通常限制的两倍。**\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC] Paired Up P", "background": "", "description": "数轴上总计有 $N$（$1\\le N\\le 5000$）头奶牛，每一头奶牛都是荷斯坦牛（Holstein）或更赛牛（Guernsey）之一。第 $i$ 头奶牛的品种为 $b_i\\in \\{H,G\\}$，第 $i$ 头奶牛的位置为 $x_i$（$0 \\leq x_i \\leq 10^9$），而第 $i$ 头奶牛的重量为 $y_i$（$1 \\leq y_i \\leq 10^5$）。\n\n根据 Farmer John 的信号，某些奶牛会组成对，使得\n\n- 每一对包含位置相差不超过 $K$ 的一头荷斯坦牛 $h$ 和一头更赛牛 $g$（$1\\le K\\le 10^9$）；也就是说，$|x_h-x_g|\\le K$。\n\n- 每一头奶牛要么包含在恰好一对中，要么不属于任何一对。\n- 配对是**极大的**；也就是说，没有两头未配对的奶牛可以组成对。\n\n你需要求出未配对的奶牛的重量之和的可能的范围。具体地说，\n\n- 如果 $T=1$，计算未配对的奶牛的最小重量和。\n\n- 如果 $T=2$，计算未配对的奶牛的最大重量和。", "inputFormat": "输入的第一行包含 $T$，$N$ 和 $K$。\n\n以下 $N$ 行，第 $i$ 行包含 $b_i,x_i,y_i$。输入保证 $0\\le x_1<x_2<\\cdots<x_{N}\\le 10^9$。", "outputFormat": "输出未配对的奶牛的最小或最大重量和。", "hint": "【样例解释1】\n\n奶牛 $2$ 和 $3$ 可以配对，因为她们的距离为 $1$，不超过 $K = 4$。这个配对方案是极大的，因为奶牛 $1$，唯一余下的更赛牛，和奶牛 $4$ 的距离为 $5$，和奶牛 $5$ 的距离为 $7$，均大于 $K = 4$。未配对的奶牛的重量和为 $1 + 6 + 9 = 16$。\n\n【样例解释2】\n\n奶牛 $1$ 和 $2$ 可以配对，因为她们的距离为 $2 \\leq K = 4$，同时奶牛 $3$ 和 $5$ 可以配对，因为她们的距离为 $4 \\leq K = 4$。这个配对方案是极大的，因为只剩下了奶牛 $4$。未配对的奶牛的重量和即为唯一未配对的奶牛的重量，即为 $6$。\n\n【样例解释3】\n\n这个例子的答案为 $18+465+870+540=1893$。\n\n【数据范围】\n\n- 测试点 4-7 满足 $T=1$；\n- 测试点 8-14 满足 $T=2$ 且 $N\\le 300$；\n- 测试点 15-22 满足 $T=2$。\n\n**注意：本题的内存限制为 $\\text{512MB}$，是通常限制的两倍。**\n", "locale": "zh-CN"}}}
{"pid": "P7986", "type": "P", "difficulty": 6, "samples": [["4 2", "17"], ["60 10", "508859913"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "数学", "USACO", "2021", "期望"], "title": "[USACO21DEC] HILO P", "background": "", "description": "Bessie 有一个数 $x+0.5$，其中 $x$ 是某个 $0$ 到 $N$ 之间的整数（$1\\le N\\le 5000$）。\n\nElsie 正试着猜这个数。她可以以如下形式对于某个 $1$ 到 $N$ 之间的整数提问：「$i$ 是大了还是小了？」如果 $i$ 大于 $x+0.5$，Bessie 会回答 \"HI!\"，如果 $i$ 小于 $x+0.5$ 则回答 \"LO!\"。\n\nElsie 想到了以下猜测 Bessie 的数的策略。在进行任何猜测之前，她创建了一个包含 $N$ 个整数的序列，其中从 $1$ 到 $N$ 的每个数均恰好出现一次（换句话说，这个序列是长为 $N$ 的一个排列）。然后她遍历这一列表，按列表中的数的顺序依次猜数。然而，Elsie 会跳过所有不必要的猜测。也就是说，如果 Elsie 将要猜某个数 $i$，而 Elsie 之前已经猜过了某个 $j < i$ 并且 Bessie 回答 \"HI!\"，Elsie 不会再猜 $i$，而是继续猜序列中的下一个数。类似地，如果她将要猜某个数 $i$，而她之前已经猜过了某个 $j > i$ 并且 Bessie 回答 \"LO!\"，Elsie 不会再猜 $i$，而是继续猜序列中的下一个数。可以证明，使用这一策略，对于 Elsie 创建的任意序列，她都可以唯一确定 $x$。\n\n如果我们将所有 Bessie 回答的 \"HI\" 或 \"LO\" 拼接成一个字符串 $S$，那么 Bessie 说 \"HILO\" 的次数为 $S$ 等于 \"HILO\" 的长为 $4$ 的子串数量。\n\nBessie 知道 Elsie 将要使用这一策略，并且已经选定了值 $x$，但她不知道 Elsie 会使用什么排列。你的目标是对于所有 Elsie 可能选用的排列，计算 Bessie 说 \"HILO\" 的次数之和，对 $10^9+7$ 取模。", "inputFormat": "输入一行，包含 $N$ 和 $x$。", "outputFormat": "输出 HILO 的总数，对 $10^9+7$ 取模。", "hint": "【样例解释1】\n\n在这个测试用例中，Bessie 的数是 $2.5$。\n\n例如，如果 Elsie 的排列是 $(4,1,3,2)$，那么 Bessie 会说 \"\"HILOHILO\"，总计两次 \"HILO\"。又例如，如果 Elsie 的排列是 $(3,1,2,4)$，那么 Bessie 会说 \"HILOLO\"，总计一次 \"HILO\"。\n\n【样例解释2】\n\n确保输出总和对 $10^9+7$ 取模的结果。\n\n【数据范围】\n\n- 测试点 3-10 满足 $N\\le 50$；\n- 测试点 11-18 满足 $N\\le 500$；\n- 测试点 19-26 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC] HILO P", "background": "", "description": "Bessie 有一个数 $x+0.5$，其中 $x$ 是某个 $0$ 到 $N$ 之间的整数（$1\\le N\\le 5000$）。\n\nElsie 正试着猜这个数。她可以以如下形式对于某个 $1$ 到 $N$ 之间的整数提问：「$i$ 是大了还是小了？」如果 $i$ 大于 $x+0.5$，Bessie 会回答 \"HI!\"，如果 $i$ 小于 $x+0.5$ 则回答 \"LO!\"。\n\nElsie 想到了以下猜测 Bessie 的数的策略。在进行任何猜测之前，她创建了一个包含 $N$ 个整数的序列，其中从 $1$ 到 $N$ 的每个数均恰好出现一次（换句话说，这个序列是长为 $N$ 的一个排列）。然后她遍历这一列表，按列表中的数的顺序依次猜数。然而，Elsie 会跳过所有不必要的猜测。也就是说，如果 Elsie 将要猜某个数 $i$，而 Elsie 之前已经猜过了某个 $j < i$ 并且 Bessie 回答 \"HI!\"，Elsie 不会再猜 $i$，而是继续猜序列中的下一个数。类似地，如果她将要猜某个数 $i$，而她之前已经猜过了某个 $j > i$ 并且 Bessie 回答 \"LO!\"，Elsie 不会再猜 $i$，而是继续猜序列中的下一个数。可以证明，使用这一策略，对于 Elsie 创建的任意序列，她都可以唯一确定 $x$。\n\n如果我们将所有 Bessie 回答的 \"HI\" 或 \"LO\" 拼接成一个字符串 $S$，那么 Bessie 说 \"HILO\" 的次数为 $S$ 等于 \"HILO\" 的长为 $4$ 的子串数量。\n\nBessie 知道 Elsie 将要使用这一策略，并且已经选定了值 $x$，但她不知道 Elsie 会使用什么排列。你的目标是对于所有 Elsie 可能选用的排列，计算 Bessie 说 \"HILO\" 的次数之和，对 $10^9+7$ 取模。", "inputFormat": "输入一行，包含 $N$ 和 $x$。", "outputFormat": "输出 HILO 的总数，对 $10^9+7$ 取模。", "hint": "【样例解释1】\n\n在这个测试用例中，Bessie 的数是 $2.5$。\n\n例如，如果 Elsie 的排列是 $(4,1,3,2)$，那么 Bessie 会说 \"\"HILOHILO\"，总计两次 \"HILO\"。又例如，如果 Elsie 的排列是 $(3,1,2,4)$，那么 Bessie 会说 \"HILOLO\"，总计一次 \"HILO\"。\n\n【样例解释2】\n\n确保输出总和对 $10^9+7$ 取模的结果。\n\n【数据范围】\n\n- 测试点 3-10 满足 $N\\le 50$；\n- 测试点 11-18 满足 $N\\le 500$；\n- 测试点 19-26 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P7987", "type": "P", "difficulty": 5, "samples": [["2 5 2\n1 2\n3 2\n4 2\n5 1\n7 2", "6"], ["1 5 2\n1 2\n3 2\n4 2\n5 1\n7 2", "2"], ["2 15 7\n3 693\n10 196\n12 182\n14 22\n15 587\n31 773\n38 458\n39 58\n40 583\n41 992\n84 565\n86 897\n92 197\n96 146\n99 785", "2470"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2021"], "title": "[USACO21DEC] Paired Up G", "background": "", "description": "数轴上总计有 $N$（$1\\le N\\le 10^5$）头奶牛。第 $i$ 头奶牛的位置为 $x_i$（$0 \\leq x_i \\leq 10^9$），而第 $i$ 头奶牛的重量为 $y_i$（$1 \\leq y_i \\leq 10^4$）。\n\n根据 Farmer John 的信号，某些奶牛会组成对，使得\n\n- 每一对包含位置相差不超过 $K$ 的两头不同的奶牛 $a$ 和 $b$（$1\\le K\\le 10^9$）；也就是说，$|x_a-x_b|\\le K$。\n\n- 每一头奶牛要么包含在恰好一对中，要么不属于任何一对。\n\n- **配对是极大的**；也就是说，没有两头未配对的奶牛可以组成对。\n\n你需要求出未配对的奶牛的重量之和的可能的范围。具体地说，\n\n- 如果 $T=1$，计算未配对的奶牛的最小重量和。\n\n- 如果 $T=2$，计算未配对的奶牛的最大重量和。", "inputFormat": "输入的第一行包含 $T$，$N$ 和 $K$。\n\n以下 $N$ 行，第 $i$ 行包含 $x_i$ 和 $y_i$。输入保证 $0\\le x_1< x_2<\\cdots<x_{N}\\le 10^9$。", "outputFormat": "输出未配对的奶牛的最小或最大重量和。", "hint": "【样例解释1】\n\n在这个例子中，奶牛 $2$ 和 $4$ 可以配对，因为她们的距离为 $2$，不超过 $K = 2$。这个配对方案是极大的，因为奶牛 $1$ 和 $3$ 的距离为 $3$，奶牛 $3$ 和 $5$ 的距离为 $3$，奶牛 $1$ 和奶牛 $5$ 的距离为 $6$，均大于 $K = 2$。未配对的奶牛的重量和为 $2 + 2 + 2 = 6$。\n\n【样例解释2】\n\n在这里，奶牛 $1$ 和 $2$ 可以配对，因为她们的距离为 $2 \\leq K = 2$，同时奶牛 $4$ 和 $5$ 可以配对，因为她们的距离为 $2 \\leq K = 2$。这个配对方案是极大的，因为只剩下了奶牛 $3$。未配对的奶牛的重量和即为 $2$。\n\n【样例解释3】\n\n这个例子的答案为 $693+992+785=2470$。\n\n【数据范围】\n\n- 测试点 4-8 满足 $T=1$。\n- 测试点 9-14 满足 $T=2$ 且 $N\\le 5000$。\n- 测试点 15-20 满足 $T=2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC] Paired Up G", "background": "", "description": "数轴上总计有 $N$（$1\\le N\\le 10^5$）头奶牛。第 $i$ 头奶牛的位置为 $x_i$（$0 \\leq x_i \\leq 10^9$），而第 $i$ 头奶牛的重量为 $y_i$（$1 \\leq y_i \\leq 10^4$）。\n\n根据 Farmer John 的信号，某些奶牛会组成对，使得\n\n- 每一对包含位置相差不超过 $K$ 的两头不同的奶牛 $a$ 和 $b$（$1\\le K\\le 10^9$）；也就是说，$|x_a-x_b|\\le K$。\n\n- 每一头奶牛要么包含在恰好一对中，要么不属于任何一对。\n\n- **配对是极大的**；也就是说，没有两头未配对的奶牛可以组成对。\n\n你需要求出未配对的奶牛的重量之和的可能的范围。具体地说，\n\n- 如果 $T=1$，计算未配对的奶牛的最小重量和。\n\n- 如果 $T=2$，计算未配对的奶牛的最大重量和。", "inputFormat": "输入的第一行包含 $T$，$N$ 和 $K$。\n\n以下 $N$ 行，第 $i$ 行包含 $x_i$ 和 $y_i$。输入保证 $0\\le x_1< x_2<\\cdots<x_{N}\\le 10^9$。", "outputFormat": "输出未配对的奶牛的最小或最大重量和。", "hint": "【样例解释1】\n\n在这个例子中，奶牛 $2$ 和 $4$ 可以配对，因为她们的距离为 $2$，不超过 $K = 2$。这个配对方案是极大的，因为奶牛 $1$ 和 $3$ 的距离为 $3$，奶牛 $3$ 和 $5$ 的距离为 $3$，奶牛 $1$ 和奶牛 $5$ 的距离为 $6$，均大于 $K = 2$。未配对的奶牛的重量和为 $2 + 2 + 2 = 6$。\n\n【样例解释2】\n\n在这里，奶牛 $1$ 和 $2$ 可以配对，因为她们的距离为 $2 \\leq K = 2$，同时奶牛 $4$ 和 $5$ 可以配对，因为她们的距离为 $2 \\leq K = 2$。这个配对方案是极大的，因为只剩下了奶牛 $3$。未配对的奶牛的重量和即为 $2$。\n\n【样例解释3】\n\n这个例子的答案为 $693+992+785=2470$。\n\n【数据范围】\n\n- 测试点 4-8 满足 $T=1$。\n- 测试点 9-14 满足 $T=2$ 且 $N\\le 5000$。\n- 测试点 15-20 满足 $T=2$。", "locale": "zh-CN"}}}
{"pid": "P7988", "type": "P", "difficulty": 5, "samples": [["5\n5 1 2 4 3", "0\n1\n1\n2\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2021", "笛卡尔树"], "title": "[USACO21DEC] HILO G", "background": "", "description": "Bessie 有一个数 $x+0.5$，其中 $x$ 是某个 $0$ 到 $N$ 之间的整数（$1\\le N\\le 2 \\cdot 10^5$）。  \n\nElsie 正试着猜这个数。她可以以如下形式对于某个 $1$ 到 $N$ 之间的整数提问：「$i$ 是大了还是小了？」如果 $i$ 大于 $x+0.5$，Bessie 会回答 \"HI\"，如果 $i$ 小于 $x+0.5$ 则回答 \"LO\"。\n\nElsie 想到了以下猜测 Bessie 的数的策略。在进行任何猜测之前，她创建了一个包含 $N$ 个整数的序列，其中从 $1$ 到 $N$ 的每个数均恰好出现一次（换句话说，这个序列是长为 $N$ 的一个排列）。然后她遍历这一列表，按列表中的数的顺序依次猜数。\n\n然而，Elsie 会跳过所有不必要的猜测。也就是说，如果 Elsie 将要猜某个数 $i$，而 Elsie 之前已经猜过了某个 $j < i$ 并且 Bessie 回答 \"HI\"，Elsie 不会再猜 $i$，而是继续猜序列中的下一个数。类似地，如果她将要猜某个数 $i$，而她之前已经猜过了某个 $j > i$ 并且 Bessie 回答 \"LO\"，Elsie 不会再猜 $i$，而是继续猜序列中的下一个数。可以证明，使用这一策略，对于 Elsie 创建的任意序列，她都可以唯一确定 $x$。\n\n如果我们将所有 Bessie 回答的 \"HI\" 或 \"LO\" 拼接成一个字符串 $S$，那么 Bessie 说 \"HILO\" 的次数为 $S$ 等于 \"HILO\" 的长为 $4$ 的子串数量。\n\nBessie 知道 Elsie 将要使用这一策略；此外，她还知道 Elsie 将要使用的排列。然而， Bessie 尚未决定选用哪个值 $x$。\n\n帮助 Bessie 对于每个值 $x$ 求出她会说 \"HILO\" 的次数。\n", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 Elsie 的长为 $N$ 的排列。", "outputFormat": "对于从 $0$ 到 $N$ 的每一个 $x$，输出一行，包含 Bessie 会说 HILO 的次数。", "hint": "【样例解释】\n\n对于 $x=0$，Bessie 会说 \"HIHI\"，总计零次 \"HILO\"。\n\n对于 $x=2$，Bessie 会说 \"HILOLOHIHI\"，总计一次 \"HILO\"。\n\n对于 $x=3$，Bessie 会说 \"HILOLOHILO\"，总计两次 \"HILO\"。\n\n【数据范围】\n\n- 测试点 1-4 满足 $N \\leq 5000$。\n- 测试点 5-8 为均匀随机的排列。\n- 测试点 9-20 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC] HILO G", "background": "", "description": "Bessie 有一个数 $x+0.5$，其中 $x$ 是某个 $0$ 到 $N$ 之间的整数（$1\\le N\\le 2 \\cdot 10^5$）。  \n\nElsie 正试着猜这个数。她可以以如下形式对于某个 $1$ 到 $N$ 之间的整数提问：「$i$ 是大了还是小了？」如果 $i$ 大于 $x+0.5$，Bessie 会回答 \"HI\"，如果 $i$ 小于 $x+0.5$ 则回答 \"LO\"。\n\nElsie 想到了以下猜测 Bessie 的数的策略。在进行任何猜测之前，她创建了一个包含 $N$ 个整数的序列，其中从 $1$ 到 $N$ 的每个数均恰好出现一次（换句话说，这个序列是长为 $N$ 的一个排列）。然后她遍历这一列表，按列表中的数的顺序依次猜数。\n\n然而，Elsie 会跳过所有不必要的猜测。也就是说，如果 Elsie 将要猜某个数 $i$，而 Elsie 之前已经猜过了某个 $j < i$ 并且 Bessie 回答 \"HI\"，Elsie 不会再猜 $i$，而是继续猜序列中的下一个数。类似地，如果她将要猜某个数 $i$，而她之前已经猜过了某个 $j > i$ 并且 Bessie 回答 \"LO\"，Elsie 不会再猜 $i$，而是继续猜序列中的下一个数。可以证明，使用这一策略，对于 Elsie 创建的任意序列，她都可以唯一确定 $x$。\n\n如果我们将所有 Bessie 回答的 \"HI\" 或 \"LO\" 拼接成一个字符串 $S$，那么 Bessie 说 \"HILO\" 的次数为 $S$ 等于 \"HILO\" 的长为 $4$ 的子串数量。\n\nBessie 知道 Elsie 将要使用这一策略；此外，她还知道 Elsie 将要使用的排列。然而， Bessie 尚未决定选用哪个值 $x$。\n\n帮助 Bessie 对于每个值 $x$ 求出她会说 \"HILO\" 的次数。\n", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 Elsie 的长为 $N$ 的排列。", "outputFormat": "对于从 $0$ 到 $N$ 的每一个 $x$，输出一行，包含 Bessie 会说 HILO 的次数。", "hint": "【样例解释】\n\n对于 $x=0$，Bessie 会说 \"HIHI\"，总计零次 \"HILO\"。\n\n对于 $x=2$，Bessie 会说 \"HILOLOHIHI\"，总计一次 \"HILO\"。\n\n对于 $x=3$，Bessie 会说 \"HILOLOHILO\"，总计两次 \"HILO\"。\n\n【数据范围】\n\n- 测试点 1-4 满足 $N \\leq 5000$。\n- 测试点 5-8 为均匀随机的排列。\n- 测试点 9-20 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P7989", "type": "P", "difficulty": 4, "samples": [["5\n\n1 2\n2 1 1\n2 1 1\n\n1 3\n2 1 1\n0\n2 1 1\n\n2 1\n4 1 2 1 2\n\n4 2\n6 1 2 2 3 3 1\n6 1 2 4 4 2 1\n\n2 2\n4 1 1 2 2\n4 2 2 1 1", "YES\nNO\nNO\nYES\nNO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2021", "分类讨论"], "title": "[USACO21DEC] Bracelet Crossings G", "background": "", "description": "奶牛 Bessie 喜欢手工艺。在她的空闲时间，她制作了 $N$（$1\\le N\\le 50$）个手链，编号为 $1 \\ldots N$。第 $i$ 个手链涂有颜色 $i$，是 $N$ 种不同的颜色之一。制作完手链后，Bessie 将它们放在桌子上进行展示（我们可以将其视为二维平面）。她精心布置这些手链，以满足以下三个条件：\n\n- 每个手链是一个简单闭合折线——一组顶点（点）依次用线段连接，并且第一个点和最后一个点相同（欢迎查阅维基百科页面了解更多详情：[Polygonal_chain](https://en.wikipedia.org/wiki/Polygonal_chain)，或百度百科：[折线](https://baike.baidu.com/item/%E6%8A%98%E7%BA%BF/486302)），\n\n- 没有手链与自身相交（这对应「简单」折线）；\n\n- 以及没有两条手链相交。\n\n不幸的是，就在 Bessie 如此小心翼翼地布置好手链之后，Farmer John 开着拖拉机经过，桌子晃动起来，导致手链四处移动甚至可能断成了多个（不一定是闭合的或简单的）折线！在那之后，Bessie 还是想检查以上三个条件是否仍然成立。然而，天色已暗，她现在无法看清手链。\n\n幸好 Bessie 有一个手电筒。她选择了 $M$（$1\\le M\\le 50$）条垂直线 $x=1, x=2, \\ldots, x=M$，并且对于每条线，她用手电筒的光沿着那条线从 $y=-\\infty$ 扫至 $y=\\infty$，按照出现的顺序记录她看到的所有手链的颜色。幸运的是，没有光束穿过任何折线的顶点或同时穿过两条线段。此外，对于每一束光，所有出现的颜色都恰好出现了两次。\n\n你能帮助 Bessie 使用此信息来确定手链是否仍然满足上述所有三个条件吗？", "inputFormat": "每个测试用例的输入包含 $T$ 个子测试用例（$1 \\leq T \\leq 50$），所有子测试用例必须全部回答正确才能通过整个测试用例。相邻的子测试用例之间用空行分隔。\n\n输入的第一行包含 $T$。之后是 $T$ 个子测试用例。\n\n每个子测试用例的第一行包含两个整数 $N$ 和 $M$。此后每个子测试用例还包含 $M$ 行。对 $1$ 到 $M$ 的每一个 $i$，第 $i$ 行包含一个整数 $k_i$（$0\\le k_i\\le 2N$，$k_i$ 为偶数），然后是 $k_i$ 个整数 $c_{i1}, c_{i2},\\ldots, c_{ik_i}$（$c_{ij}\\in [1,N]$，每个 $c_{ij}$ 出现零次或两次)。这表示当 Bessie 将手电筒从 $(i,-\\infty)$ 扫至 $(i,\\infty)$ 时，她按顺序 $c_{i1}, c_{i2},\\ldots, c_{ik_i}$ 看到了这些颜色。\n", "outputFormat": "对每个子测试用例，如果有可能使得以上三个条件均满足则输出 YES。否则，输出 NO。", "hint": "【样例解释】\n\n对于第一个子测试用例，一组可行的手链位置为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q3mohld2.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n对于第四个子测试用例，一组可行的手链位置为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8m2hcgbb.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n【数据范围】\n\n- 测试点 2 满足 $N = 1$。\n- 测试点 3-5 满足 $N=2$。\n- 测试点 6-8 满足 $M=1$。\n- 测试点 9-14 满足 $M=2$。\n- 测试点 15-20 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC] Bracelet Crossings G", "background": "", "description": "奶牛 Bessie 喜欢手工艺。在她的空闲时间，她制作了 $N$（$1\\le N\\le 50$）个手链，编号为 $1 \\ldots N$。第 $i$ 个手链涂有颜色 $i$，是 $N$ 种不同的颜色之一。制作完手链后，Bessie 将它们放在桌子上进行展示（我们可以将其视为二维平面）。她精心布置这些手链，以满足以下三个条件：\n\n- 每个手链是一个简单闭合折线——一组顶点（点）依次用线段连接，并且第一个点和最后一个点相同（欢迎查阅维基百科页面了解更多详情：[Polygonal_chain](https://en.wikipedia.org/wiki/Polygonal_chain)，或百度百科：[折线](https://baike.baidu.com/item/%E6%8A%98%E7%BA%BF/486302)），\n\n- 没有手链与自身相交（这对应「简单」折线）；\n\n- 以及没有两条手链相交。\n\n不幸的是，就在 Bessie 如此小心翼翼地布置好手链之后，Farmer John 开着拖拉机经过，桌子晃动起来，导致手链四处移动甚至可能断成了多个（不一定是闭合的或简单的）折线！在那之后，Bessie 还是想检查以上三个条件是否仍然成立。然而，天色已暗，她现在无法看清手链。\n\n幸好 Bessie 有一个手电筒。她选择了 $M$（$1\\le M\\le 50$）条垂直线 $x=1, x=2, \\ldots, x=M$，并且对于每条线，她用手电筒的光沿着那条线从 $y=-\\infty$ 扫至 $y=\\infty$，按照出现的顺序记录她看到的所有手链的颜色。幸运的是，没有光束穿过任何折线的顶点或同时穿过两条线段。此外，对于每一束光，所有出现的颜色都恰好出现了两次。\n\n你能帮助 Bessie 使用此信息来确定手链是否仍然满足上述所有三个条件吗？", "inputFormat": "每个测试用例的输入包含 $T$ 个子测试用例（$1 \\leq T \\leq 50$），所有子测试用例必须全部回答正确才能通过整个测试用例。相邻的子测试用例之间用空行分隔。\n\n输入的第一行包含 $T$。之后是 $T$ 个子测试用例。\n\n每个子测试用例的第一行包含两个整数 $N$ 和 $M$。此后每个子测试用例还包含 $M$ 行。对 $1$ 到 $M$ 的每一个 $i$，第 $i$ 行包含一个整数 $k_i$（$0\\le k_i\\le 2N$，$k_i$ 为偶数），然后是 $k_i$ 个整数 $c_{i1}, c_{i2},\\ldots, c_{ik_i}$（$c_{ij}\\in [1,N]$，每个 $c_{ij}$ 出现零次或两次)。这表示当 Bessie 将手电筒从 $(i,-\\infty)$ 扫至 $(i,\\infty)$ 时，她按顺序 $c_{i1}, c_{i2},\\ldots, c_{ik_i}$ 看到了这些颜色。\n", "outputFormat": "对每个子测试用例，如果有可能使得以上三个条件均满足则输出 YES。否则，输出 NO。", "hint": "【样例解释】\n\n对于第一个子测试用例，一组可行的手链位置为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q3mohld2.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n对于第四个子测试用例，一组可行的手链位置为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8m2hcgbb.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n【数据范围】\n\n- 测试点 2 满足 $N = 1$。\n- 测试点 3-5 满足 $N=2$。\n- 测试点 6-8 满足 $M=1$。\n- 测试点 9-14 满足 $M=2$。\n- 测试点 15-20 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P7990", "type": "P", "difficulty": 5, "samples": [["6 5 2\n0 4\n4 6\n8 10\n10 8\n12 12\n13 14\n2\n3\n5\n7\n11", "36"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2021"], "title": "[USACO21DEC] Closest Cow Wins S", "background": "", "description": "Farmer John 沿着一条高速公路拥有一个很长的农场，可以被看作类似于一维数轴。沿着农场有 $K$ 块草地（$1 \\leq K \\leq 2\\cdot 10^5$）；第 $i$ 块草地位于位置 $p_i$ 并具有美味值 $t_i$（$0\\le t_i\\le 10^9$）。Farmer John 的死对头 Farmer Nhoj 已经将他的 $M$ 头奶牛（$1 \\leq M \\leq 2\\cdot 10^5$）放在了位置 $f_1 \\ldots f_M$ 。所有这些 $K+M$ 个位置均是 $[0,10^9]$ 范围内的不同整数。\n\nFarmer John 需要选择 $N$（$1\\le N\\le 2\\cdot 10^5$）个位置（不一定是整数）放置他的奶牛。这些位置必须与 Farmer Nhoj 的奶牛已经占用的位置不同，但是 Farmer John 可以将他的奶牛放在与草地相同的位置。\n\n拥有最靠近某个草地的奶牛的农夫拥有这一草地。如果来自两方农夫的两头奶牛距这一草地相等，则 Farmer Nhoj 拥有该草地。\n\n给定 Farmer Nhoj 的奶牛的位置以及草地的位置和美味值，求 Farmer John 的奶牛以最优方式放置时可以达到的最大总美味值。", "inputFormat": "输入的第一行包含 $K$、$M$ 和 $N$。\n\n以下 $K$ 行每行包含两个空格分隔的整数 $p_i$ 和 $t_i$。\n\n以下 $M$ 行每行包含一个整数 $f_i$。", "outputFormat": "输出一个整数，表示最大总美味值。注意这个问题的答案可能无法用 32 位整数型存储，你可能需要使用 64 位整数型（例如，C 或 C++ 中的 \"long long\"）。", "hint": "【样例解释】\n\n如果 Farmer John 将奶牛放在位置 $11.5$ 和 $8$ 则他可以得到总美味值 $10+12+14=36$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC] Closest Cow Wins S", "background": "", "description": "Farmer John 沿着一条高速公路拥有一个很长的农场，可以被看作类似于一维数轴。沿着农场有 $K$ 块草地（$1 \\leq K \\leq 2\\cdot 10^5$）；第 $i$ 块草地位于位置 $p_i$ 并具有美味值 $t_i$（$0\\le t_i\\le 10^9$）。Farmer John 的死对头 Farmer Nhoj 已经将他的 $M$ 头奶牛（$1 \\leq M \\leq 2\\cdot 10^5$）放在了位置 $f_1 \\ldots f_M$ 。所有这些 $K+M$ 个位置均是 $[0,10^9]$ 范围内的不同整数。\n\nFarmer John 需要选择 $N$（$1\\le N\\le 2\\cdot 10^5$）个位置（不一定是整数）放置他的奶牛。这些位置必须与 Farmer Nhoj 的奶牛已经占用的位置不同，但是 Farmer John 可以将他的奶牛放在与草地相同的位置。\n\n拥有最靠近某个草地的奶牛的农夫拥有这一草地。如果来自两方农夫的两头奶牛距这一草地相等，则 Farmer Nhoj 拥有该草地。\n\n给定 Farmer Nhoj 的奶牛的位置以及草地的位置和美味值，求 Farmer John 的奶牛以最优方式放置时可以达到的最大总美味值。", "inputFormat": "输入的第一行包含 $K$、$M$ 和 $N$。\n\n以下 $K$ 行每行包含两个空格分隔的整数 $p_i$ 和 $t_i$。\n\n以下 $M$ 行每行包含一个整数 $f_i$。", "outputFormat": "输出一个整数，表示最大总美味值。注意这个问题的答案可能无法用 32 位整数型存储，你可能需要使用 64 位整数型（例如，C 或 C++ 中的 \"long long\"）。", "hint": "【样例解释】\n\n如果 Farmer John 将奶牛放在位置 $11.5$ 和 $8$ 则他可以得到总美味值 $10+12+14=36$。\n", "locale": "zh-CN"}}}
{"pid": "P7991", "type": "P", "difficulty": 4, "samples": [["2\n5 2\n1 2\n4 5\n5 3\n1 2\n2 3\n4 5", "2\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "USACO", "并查集", "2021"], "title": "[USACO21DEC] Connecting Two Barns S", "background": "", "description": "Farmer John 的农场由 $N$ 块田地（$1 \\leq N \\leq 10^5$）组成，编号为 $1 \\ldots N$。在这些田地之间有 $M$ 条双向道路（$0 \\leq M \\leq 10^5$），每条道路连接两块田地。\n\n农场有两个牛棚，一个在田地 1 中，另一个在田地 $N$ 中。Farmer John 希望确保有一种方式可以沿着一组道路在两个牛棚之间行走。 他愿意建造至多两条新道路来实现这一目标。由于田地的位置因素，在田地 $i$ 和 $j$ 之间建造新道路的花费是 $(i-j)^2$。\n\n请帮助 Farmer John 求出使得牛棚 $1$ 和 $N$ 可以相互到达所需要的最小花费。", "inputFormat": "每个测试用例的输入包含 $T$ 个子测试用例（$1\\le T\\le 20$），所有子测试用例必须全部回答正确才能通过整个测试用例。\n\n输入的第一行包含 $T$，之后是 $T$ 个子测试用例。\n\n每个子测试用例的第一行包含两个整数 $N$ 和 $M$。以下 $M$ 行，每行包含两个整数 $i$ 和 $j$，表示一条连接两个不同田地 $i$ 和 $j$ 的道路。输入保证任何两个田地之间至多只有一条道路，并且所有子测试用例的 $N+M$ 之和不超过 $5 \\cdot 10^5$。\n", "outputFormat": "输出 $T$ 行。第 $i$ 行包含一个整数，为第 $i$ 个子测试用例的最小花费。", "hint": "【样例解释】\n\n- 第一个子测试用例中，最优的方式是用一条道路连接田地 2 和 3，用一条道路连接田地 3 和 4。\n- 第二个子测试用例中，最优的方式是用一条道路连接田地 3 和 4。不需要第二条道路。\n\n【数据范围】\n\n- 测试点 2 满足 $N \\le 20$。\n- 测试点 3-5 满足 $N \\le 10^3$。\n- 测试点 6-10 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC] Connecting Two Barns S", "background": "", "description": "Farmer John 的农场由 $N$ 块田地（$1 \\leq N \\leq 10^5$）组成，编号为 $1 \\ldots N$。在这些田地之间有 $M$ 条双向道路（$0 \\leq M \\leq 10^5$），每条道路连接两块田地。\n\n农场有两个牛棚，一个在田地 1 中，另一个在田地 $N$ 中。Farmer John 希望确保有一种方式可以沿着一组道路在两个牛棚之间行走。 他愿意建造至多两条新道路来实现这一目标。由于田地的位置因素，在田地 $i$ 和 $j$ 之间建造新道路的花费是 $(i-j)^2$。\n\n请帮助 Farmer John 求出使得牛棚 $1$ 和 $N$ 可以相互到达所需要的最小花费。", "inputFormat": "每个测试用例的输入包含 $T$ 个子测试用例（$1\\le T\\le 20$），所有子测试用例必须全部回答正确才能通过整个测试用例。\n\n输入的第一行包含 $T$，之后是 $T$ 个子测试用例。\n\n每个子测试用例的第一行包含两个整数 $N$ 和 $M$。以下 $M$ 行，每行包含两个整数 $i$ 和 $j$，表示一条连接两个不同田地 $i$ 和 $j$ 的道路。输入保证任何两个田地之间至多只有一条道路，并且所有子测试用例的 $N+M$ 之和不超过 $5 \\cdot 10^5$。\n", "outputFormat": "输出 $T$ 行。第 $i$ 行包含一个整数，为第 $i$ 个子测试用例的最小花费。", "hint": "【样例解释】\n\n- 第一个子测试用例中，最优的方式是用一条道路连接田地 2 和 3，用一条道路连接田地 3 和 4。\n- 第二个子测试用例中，最优的方式是用一条道路连接田地 3 和 4。不需要第二条道路。\n\n【数据范围】\n\n- 测试点 2 满足 $N \\le 20$。\n- 测试点 3-5 满足 $N \\le 10^3$。\n- 测试点 6-10 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P7992", "type": "P", "difficulty": 3, "samples": [["2 5\n1 3\n2 5", "0\n0\n1\n3\n4\n4\n4\n3\n3\n1\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2021", "前缀和", "差分"], "title": "[USACO21DEC]  Convoluted Intervals S", "background": "", "description": "奶牛们正在努力尝试发明有趣的新游戏来玩。他们目前的工作之一与一组 $N$ 个区间（$1\\le N\\le 2\\cdot 10^5$）有关，其中第 $i$ 个区间从数轴上的 $a_i$ 位置开始，并在位置 $b_i \\geq a_i$ 结束。$a_i$ 和 $b_i$ 均为 $0 \\ldots M$ 范围内的整数，其中 $1 \\leq M \\leq 5000$。\n\n这个游戏的玩法是，Bessie 选择某个区间（假设是第 $i$ 个区间），而她的表妹 Elsie 选择某个区间（假设是第 $j$ 个区间，可能与 Bessie 所选的的区间相同）。给定某个值 $k$，如果 $a_i + a_j \\leq k \\leq b_i + b_j$，则她们获胜。\n\n对范围 $0 \\ldots 2M$ 内的每个值 $k$，请计算使得 Bessie 和 Elsie 可以赢得游戏的有序对 $(i,j)$ 的数量。", "inputFormat": "输入的第一行包含 $N$ 和 $M$。以下 $N$ 行每行以整数 $a_i$ 和 $b_i$ 的形式描述一个区间。", "outputFormat": "输出 $2M+1$ 行，依次包含范围 $0 \\ldots 2M$ 中的每一个 $k$ 的答案。", "hint": "【样例解释】\n\n在这个例子中，对于 $k=3$，有三个有序对可以使得 Bessie 和 Elsie 获胜：$(1, 1)$，$(1, 2)$，和 $(2, 1)$。\n\n【数据范围】\n\n- 测试点 1-2 满足 $N\\le 100, M\\le 100$。\n- 测试点 3-5 满足 $N\\le 5000$。\n- 测试点 6-20 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC]  Convoluted Intervals S", "background": "", "description": "奶牛们正在努力尝试发明有趣的新游戏来玩。他们目前的工作之一与一组 $N$ 个区间（$1\\le N\\le 2\\cdot 10^5$）有关，其中第 $i$ 个区间从数轴上的 $a_i$ 位置开始，并在位置 $b_i \\geq a_i$ 结束。$a_i$ 和 $b_i$ 均为 $0 \\ldots M$ 范围内的整数，其中 $1 \\leq M \\leq 5000$。\n\n这个游戏的玩法是，Bessie 选择某个区间（假设是第 $i$ 个区间），而她的表妹 Elsie 选择某个区间（假设是第 $j$ 个区间，可能与 Bessie 所选的的区间相同）。给定某个值 $k$，如果 $a_i + a_j \\leq k \\leq b_i + b_j$，则她们获胜。\n\n对范围 $0 \\ldots 2M$ 内的每个值 $k$，请计算使得 Bessie 和 Elsie 可以赢得游戏的有序对 $(i,j)$ 的数量。", "inputFormat": "输入的第一行包含 $N$ 和 $M$。以下 $N$ 行每行以整数 $a_i$ 和 $b_i$ 的形式描述一个区间。", "outputFormat": "输出 $2M+1$ 行，依次包含范围 $0 \\ldots 2M$ 中的每一个 $k$ 的答案。", "hint": "【样例解释】\n\n在这个例子中，对于 $k=3$，有三个有序对可以使得 Bessie 和 Elsie 获胜：$(1, 1)$，$(1, 2)$，和 $(2, 1)$。\n\n【数据范围】\n\n- 测试点 1-2 满足 $N\\le 100, M\\le 100$。\n- 测试点 3-5 满足 $N\\le 5000$。\n- 测试点 6-20 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P7993", "type": "P", "difficulty": 2, "samples": [["5\nGHGHG", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2021"], "title": "[USACO21DEC] Lonely Photo B", "background": "", "description": "Farmer John 最近购入了 $N$ 头新的奶牛（$3 \\le N \\le 5 \\times 10^5$），每头奶牛的品种是更赛牛（Guernsey）或荷斯坦牛（Holstein）之一。 \n\n奶牛目前排成一排，Farmer John 想要为每个连续不少于三头奶牛的序列拍摄一张照片。 然而，他不想拍摄这样的照片，其中只有一头牛的品种是更赛牛，或者只有一头牛的品种是荷斯坦牛——他认为这头奇特的牛会感到孤立和不自然。 在为每个连续不少于三头奶牛的序列拍摄了一张照片后，他把所有「孤独的」照片，即其中只有一头更赛牛或荷斯坦奶牛的照片，都扔掉了。\n\n给定奶牛的排列方式，请帮助 Farmer John 求出他会扔掉多少张孤独的照片。如果两张照片以不同的奶牛开始或结束，则认为它们是不同的。\n", "inputFormat": "输入的第一行包含 $N$。\n\n输入的第二行包含一个长为 $N$ 的字符串。如果队伍中的第 $i$ 头奶牛是更赛牛，则字符串的第 $i$ 个字符为 G。否则，第 $i$ 头奶牛是荷斯坦牛，该字符为 H。", "outputFormat": "输出 Farmer John 会扔掉的孤独的照片数量。", "hint": "【样例解释】\n\n这个例子中的每一个长为 3 的子串均恰好包含一头更赛牛或荷斯坦牛——所以这些子串表示孤独的照片，并会被 Farmer John 扔掉。所有更长的子串（GHGH、HGHG 和 GHGHG）都可以被接受。\n\n【数据范围】\n\n- 测试点 2-4 满足 $N \\le 50$。\n- 测试点 5-10 满足 $N \\le 5000$。\n- 测试点 11 没有额外限制。\n\n注意这个测试点的答案可能无法用标准的 32 位整数型存储，你可能需要使用更大的整数类型（例如，C++ 中 64 位的 \"long long int\" 类型）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC] Lonely Photo B", "background": "", "description": "Farmer John 最近购入了 $N$ 头新的奶牛（$3 \\le N \\le 5 \\times 10^5$），每头奶牛的品种是更赛牛（Guernsey）或荷斯坦牛（Holstein）之一。 \n\n奶牛目前排成一排，Farmer John 想要为每个连续不少于三头奶牛的序列拍摄一张照片。 然而，他不想拍摄这样的照片，其中只有一头牛的品种是更赛牛，或者只有一头牛的品种是荷斯坦牛——他认为这头奇特的牛会感到孤立和不自然。 在为每个连续不少于三头奶牛的序列拍摄了一张照片后，他把所有「孤独的」照片，即其中只有一头更赛牛或荷斯坦奶牛的照片，都扔掉了。\n\n给定奶牛的排列方式，请帮助 Farmer John 求出他会扔掉多少张孤独的照片。如果两张照片以不同的奶牛开始或结束，则认为它们是不同的。\n", "inputFormat": "输入的第一行包含 $N$。\n\n输入的第二行包含一个长为 $N$ 的字符串。如果队伍中的第 $i$ 头奶牛是更赛牛，则字符串的第 $i$ 个字符为 G。否则，第 $i$ 头奶牛是荷斯坦牛，该字符为 H。", "outputFormat": "输出 Farmer John 会扔掉的孤独的照片数量。", "hint": "【样例解释】\n\n这个例子中的每一个长为 3 的子串均恰好包含一头更赛牛或荷斯坦牛——所以这些子串表示孤独的照片，并会被 Farmer John 扔掉。所有更长的子串（GHGH、HGHG 和 GHGHG）都可以被接受。\n\n【数据范围】\n\n- 测试点 2-4 满足 $N \\le 50$。\n- 测试点 5-10 满足 $N \\le 5000$。\n- 测试点 11 没有额外限制。\n\n注意这个测试点的答案可能无法用标准的 32 位整数型存储，你可能需要使用更大的整数类型（例如，C++ 中 64 位的 \"long long int\" 类型）。", "locale": "zh-CN"}}}
{"pid": "P7994", "type": "P", "difficulty": 3, "samples": [["5\n1 5 3 3 4\n1 2 2 2 1", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2021"], "title": "[USACO21DEC] Air Cownditioning B", "background": "", "description": "Farmer John 的 $N$ 头奶牛对他们牛棚的室温非常挑剔。有些奶牛喜欢温度低一些，而有些奶牛则喜欢温度高一些。\n\nFarmer John 的牛棚包含一排 $N$ 个牛栏，编号为 $1 \\ldots N$，每个牛栏里有一头牛。 第 $i$ 头奶牛希望她的牛栏中的温度是 $p_i$，而现在她的牛栏中的温度是 $t_i$。为了确保每头奶牛都感到舒适，Farmer John 安装了一个新的空调系统。该系统进行控制的方式非常有趣，他可以向系统发送命令，告诉它将一组连续的牛栏内的温度升高或降低 1 个单位——例如「将牛栏 $5 \\ldots 8$ 的温度升高 1 个单位」。一组连续的牛栏最短可以仅包含一个牛栏。\n\n请帮助 Farmer John 求出他需要向新的空调系统发送的命令的最小数量，使得每头奶牛的牛栏都处于其中的奶牛的理想温度。", "inputFormat": "输入的第一行包含 $N$。下一行包含 $N$ 个非负整数 $p_1 \\ldots p_N$，用空格分隔。最后一行包含 $N$ 个非负整数 $t_1 \\ldots t_N$。", "outputFormat": "输出一个整数，为 Farmer John 需要使用的最小指令数量。", "hint": "【样例解释】\n\n一组最优的 Farmer John 可以使用的指令如下：\n\n```\n初始温度     ：1 2 2 2 1\n升高牛棚 2..5：1 3 3 3 2\n升高牛棚 2..5：1 4 4 4 3\n升高牛棚 2..5：1 5 5 5 4\n降低牛棚 3..4：1 5 4 4 4\n降低牛棚 3..4：1 5 3 3 4\n```\n\n【数据范围】\n\n- 测试点 2-5 满足 $N \\leq 100$。\n- 测试点 6-8 满足 $N \\leq 1000$。\n- 测试点 9-10 满足 $N \\leq 100,000$\n- 测试点 1-6 和 9 中，温度值不超过 $100$\n- 测试点 7-8 和 10 中，温度值不超过 $10,000$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC] Air Cownditioning B", "background": "", "description": "Farmer John 的 $N$ 头奶牛对他们牛棚的室温非常挑剔。有些奶牛喜欢温度低一些，而有些奶牛则喜欢温度高一些。\n\nFarmer John 的牛棚包含一排 $N$ 个牛栏，编号为 $1 \\ldots N$，每个牛栏里有一头牛。 第 $i$ 头奶牛希望她的牛栏中的温度是 $p_i$，而现在她的牛栏中的温度是 $t_i$。为了确保每头奶牛都感到舒适，Farmer John 安装了一个新的空调系统。该系统进行控制的方式非常有趣，他可以向系统发送命令，告诉它将一组连续的牛栏内的温度升高或降低 1 个单位——例如「将牛栏 $5 \\ldots 8$ 的温度升高 1 个单位」。一组连续的牛栏最短可以仅包含一个牛栏。\n\n请帮助 Farmer John 求出他需要向新的空调系统发送的命令的最小数量，使得每头奶牛的牛栏都处于其中的奶牛的理想温度。", "inputFormat": "输入的第一行包含 $N$。下一行包含 $N$ 个非负整数 $p_1 \\ldots p_N$，用空格分隔。最后一行包含 $N$ 个非负整数 $t_1 \\ldots t_N$。", "outputFormat": "输出一个整数，为 Farmer John 需要使用的最小指令数量。", "hint": "【样例解释】\n\n一组最优的 Farmer John 可以使用的指令如下：\n\n```\n初始温度     ：1 2 2 2 1\n升高牛棚 2..5：1 3 3 3 2\n升高牛棚 2..5：1 4 4 4 3\n升高牛棚 2..5：1 5 5 5 4\n降低牛棚 3..4：1 5 4 4 4\n降低牛棚 3..4：1 5 3 3 4\n```\n\n【数据范围】\n\n- 测试点 2-5 满足 $N \\leq 100$。\n- 测试点 6-8 满足 $N \\leq 1000$。\n- 测试点 9-10 满足 $N \\leq 100,000$\n- 测试点 1-6 和 9 中，温度值不超过 $100$\n- 测试点 7-8 和 10 中，温度值不超过 $10,000$。\n", "locale": "zh-CN"}}}
{"pid": "P7995", "type": "P", "difficulty": 3, "samples": [["7\n3 1\n...\n...\n...\n3 2\n...\n...\n...\n3 3\n...\n...\n...\n3 3\n...\n.H.\n...\n3 2\n.HH\nHHH\nHH.\n3 3\n.H.\nH..\n...\n4 3\n...H\n.H..\n....\nH...", "2\n4\n6\n2\n0\n0\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "USACO", "2021", "深度优先搜索 DFS"], "title": "[USACO21DEC] Walking Home B", "background": "", "description": "奶牛 Bessie 正准备从她最喜爱的草地回到她的牛棚。\n\n农场位于一个 $N \\times N$ 的方阵上（$2 \\leq N \\leq 50$），其中她的草地在左上角，牛棚在右下角。Bessie 想要尽快回家，所以她只会向下或向右走。有些地方有草堆（haybale），Bessie 无法穿过；她必须绕过它们。\n\nBessie 今天感到有些疲倦，所以她希望改变她的行走方向至多 $K$ 次（$1 \\leq K \\leq 3$）。\n\nBessie 有多少条不同的从她最爱的草地回到牛棚的路线？如果一条路线中 Bessie 经过了某个方格而另一条路线中没有，则认为这两条路线不同。", "inputFormat": "每个测试用例的输入包含 $T$ 个子测试用例，每个子测试用例描述了一个不同的农场，并且必须全部回答正确才能通过整个测试用例。输入的第一行包含 $T$（$1 \\leq T \\leq 50$）。每一个子测试用例如下。\n\n每个子测试用例的第一行包含 $N$ 和 $K$。\n\n以下 $N$ 行每行包含一个长为 $N$ 的字符串。每个字符为 $\\texttt{.}$，如果这一格是空的，或 $\\texttt{H}$，如果这一格中有草堆。输入保证农场的左上角和右下角没有草堆。", "outputFormat": "输出 $T$ 行，第 $i$ 行包含在第 $i$ 个子测试用例中 Bessie 可以选择的不同的路线数量。", "hint": "【样例解释】\n\n我们将使用一个由字符 D 和 R 组成的字符串来表示 Bessie 的路线，其中 D 和 R 分别表示 Bessie 向下（down）或向右（right）移动。\n\n第一个子测试用例中，Bessie 的两条可能的路线为 DDRR 和 RRDD。\n\n第二个子测试用例中，Bessie 的四条可能的路线为 DDRR，DRRD，RDDR 和 RRDD。\n\n第三个子测试用例中，Bessie 的六条可能的路线为 DDRR，DRDR，DRRD，RDDR，RDRD 和 RRDD。\n\n第四个子测试用例中，Bessie 的两条可能的路线为 DDRR 和 RRDD。\n\n第五和第六个子测试用例中，Bessie 不可能回到牛棚。\n\n第七个子测试用例中，Bessie 的六条可能的路线为 DDRDRR，DDRRDR，DDRRRD，RRDDDR，RRDDRD 和 RRDRDD。\n\n【数据范围】\n\n- 测试点 2 满足 $K = 1$。\n- 测试点 3-5 满足 $K = 2$。\n- 测试点 6-10 满足 $K = 3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21DEC] Walking Home B", "background": "", "description": "奶牛 Bessie 正准备从她最喜爱的草地回到她的牛棚。\n\n农场位于一个 $N \\times N$ 的方阵上（$2 \\leq N \\leq 50$），其中她的草地在左上角，牛棚在右下角。Bessie 想要尽快回家，所以她只会向下或向右走。有些地方有草堆（haybale），Bessie 无法穿过；她必须绕过它们。\n\nBessie 今天感到有些疲倦，所以她希望改变她的行走方向至多 $K$ 次（$1 \\leq K \\leq 3$）。\n\nBessie 有多少条不同的从她最爱的草地回到牛棚的路线？如果一条路线中 Bessie 经过了某个方格而另一条路线中没有，则认为这两条路线不同。", "inputFormat": "每个测试用例的输入包含 $T$ 个子测试用例，每个子测试用例描述了一个不同的农场，并且必须全部回答正确才能通过整个测试用例。输入的第一行包含 $T$（$1 \\leq T \\leq 50$）。每一个子测试用例如下。\n\n每个子测试用例的第一行包含 $N$ 和 $K$。\n\n以下 $N$ 行每行包含一个长为 $N$ 的字符串。每个字符为 $\\texttt{.}$，如果这一格是空的，或 $\\texttt{H}$，如果这一格中有草堆。输入保证农场的左上角和右下角没有草堆。", "outputFormat": "输出 $T$ 行，第 $i$ 行包含在第 $i$ 个子测试用例中 Bessie 可以选择的不同的路线数量。", "hint": "【样例解释】\n\n我们将使用一个由字符 D 和 R 组成的字符串来表示 Bessie 的路线，其中 D 和 R 分别表示 Bessie 向下（down）或向右（right）移动。\n\n第一个子测试用例中，Bessie 的两条可能的路线为 DDRR 和 RRDD。\n\n第二个子测试用例中，Bessie 的四条可能的路线为 DDRR，DRRD，RDDR 和 RRDD。\n\n第三个子测试用例中，Bessie 的六条可能的路线为 DDRR，DRDR，DRRD，RDDR，RDRD 和 RRDD。\n\n第四个子测试用例中，Bessie 的两条可能的路线为 DDRR 和 RRDD。\n\n第五和第六个子测试用例中，Bessie 不可能回到牛棚。\n\n第七个子测试用例中，Bessie 的六条可能的路线为 DDRDRR，DDRRDR，DDRRRD，RRDDDR，RRDDRD 和 RRDRDD。\n\n【数据范围】\n\n- 测试点 2 满足 $K = 1$。\n- 测试点 3-5 满足 $K = 2$。\n- 测试点 6-10 满足 $K = 3$。", "locale": "zh-CN"}}}
{"pid": "P7996", "type": "P", "difficulty": 3, "samples": [["7 47\n7 2 4 6 3 7 10", "3"], ["4 4\n4 4 4 4", "No answer!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "洛谷原创", "O2优化", "洛谷月赛"], "title": "[WFOI - 01] 硬币（coin）", "background": "", "description": "你面前有一排 $n$ **堆**硬币排成一线，**同一堆硬币**的面值相同，记第 $i$ 堆硬币的面值为 $a_i$。而**每堆硬币**的数量都相同，记为 $x$。\n\n现在你知道每第 $i$ 堆硬币的面值 $a_i$，你需要确定一个**正整数** $x$，使得**每堆硬币的总金额的**方差最接近于一个**正整数** $k$。\n\n两数 **“最接近”** 的定义：两数之差的绝对值最小。\n\n方差定义：方差 $s ^ 2 = \\cfrac{(a_1 - \\bar x)^2 + (a_2 - \\bar x) ^ 2 + \\cdots + (a_n - \\bar x) ^ 2}{n}$，其中 $\\bar x$ 代表 $x$ 的平均值。", "inputFormat": "第一行两个数 $n,k$。\n\n第二行 $n$ 个数，第 $i$ 个数表示 $a_i$，表示第 $i$ 堆硬币的面值 $a_i$。", "outputFormat": "一行一个**正整数**，表示符合题意的 $x$ 值。如果有不同的答案，输出最小的一个。如果无论 $x$ 取什么值方差都为 $0$，输出一行 `No answer!`。", "hint": "\n**【样例 $\\#1$ 解释】**\n\n  当 $x=3$ 时，第 $i$ 个堆的硬币金额为 $3\\times a_i$，这些硬币堆的金额分别为 $21,6,12,18,9,21,30$，可以计算得这些硬币金额的方差约为 $58.78$，可以证明当 $x=3$ 时方差最接近 $47$。\n\n**【样例 $\\#2$ 解释】**\n\n  可以发现，无论 $x$ 的取值，方差都会为 $0$，所以输出 `No answer!`。\n\n\n\n\n\n\n\n**【数据规模】**\n\n**本题采用 Subtask 捆绑测试。**\n\nSubtask 编号 | $n,\\forall a_i\\le$ | $k\\le$ | $\\footnotesize\\texttt{测试点数目}$ |\n:-: | :-: | :-: | :-:\n**Subtask #0 $(20\\texttt{pts})$** | $10^3$ | $10^9$| $6$ |\n**Subtask #1 $(25\\texttt{pts})$** | $10^5$ | $10^{12}$| $6$ |\n**Subtask #2 $(25\\texttt{pts})$** | $10^5$ | $10^{18}$| $6$ |\n**Subtask #3 $(30\\texttt{pts})$** | $7\\times10^6$ | $3\\times 10^{18}$| $6$ |\n\n对于 $100\\%$ 的数据，$1\\le n,\\forall a_i\\le7\\times10^6$，$1\\le k\\le3\\times10^{18}$。记原来 $a$ 数组的方差为 $p$，则数据满足 $p=0$ 或 $p\\in[0.25,\\ 2^{63}-1]$ 。\n\n\n\n\n\n**【提示】**\n\n  本题读入量较大，请使用合适的读入方式。此处推荐[快速读入模板](https://www.luogu.com.cn/paste/bcfvgxr7)，对于 $\\texttt{C/C++}$ 语言，你也可以使用 `scanf` 语句完成读入。\n  \n  为避免卡精度，建议 `C/C++` 选手使用 $\\texttt{double}$ 类型，并不建议使用 `eps`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 01] 硬币（coin）", "background": "", "description": "你面前有一排 $n$ **堆**硬币排成一线，**同一堆硬币**的面值相同，记第 $i$ 堆硬币的面值为 $a_i$。而**每堆硬币**的数量都相同，记为 $x$。\n\n现在你知道每第 $i$ 堆硬币的面值 $a_i$，你需要确定一个**正整数** $x$，使得**每堆硬币的总金额的**方差最接近于一个**正整数** $k$。\n\n两数 **“最接近”** 的定义：两数之差的绝对值最小。\n\n方差定义：方差 $s ^ 2 = \\cfrac{(a_1 - \\bar x)^2 + (a_2 - \\bar x) ^ 2 + \\cdots + (a_n - \\bar x) ^ 2}{n}$，其中 $\\bar x$ 代表 $x$ 的平均值。", "inputFormat": "第一行两个数 $n,k$。\n\n第二行 $n$ 个数，第 $i$ 个数表示 $a_i$，表示第 $i$ 堆硬币的面值 $a_i$。", "outputFormat": "一行一个**正整数**，表示符合题意的 $x$ 值。如果有不同的答案，输出最小的一个。如果无论 $x$ 取什么值方差都为 $0$，输出一行 `No answer!`。", "hint": "\n**【样例 $\\#1$ 解释】**\n\n  当 $x=3$ 时，第 $i$ 个堆的硬币金额为 $3\\times a_i$，这些硬币堆的金额分别为 $21,6,12,18,9,21,30$，可以计算得这些硬币金额的方差约为 $58.78$，可以证明当 $x=3$ 时方差最接近 $47$。\n\n**【样例 $\\#2$ 解释】**\n\n  可以发现，无论 $x$ 的取值，方差都会为 $0$，所以输出 `No answer!`。\n\n\n\n\n\n\n\n**【数据规模】**\n\n**本题采用 Subtask 捆绑测试。**\n\nSubtask 编号 | $n,\\forall a_i\\le$ | $k\\le$ | $\\footnotesize\\texttt{测试点数目}$ |\n:-: | :-: | :-: | :-:\n**Subtask #0 $(20\\texttt{pts})$** | $10^3$ | $10^9$| $6$ |\n**Subtask #1 $(25\\texttt{pts})$** | $10^5$ | $10^{12}$| $6$ |\n**Subtask #2 $(25\\texttt{pts})$** | $10^5$ | $10^{18}$| $6$ |\n**Subtask #3 $(30\\texttt{pts})$** | $7\\times10^6$ | $3\\times 10^{18}$| $6$ |\n\n对于 $100\\%$ 的数据，$1\\le n,\\forall a_i\\le7\\times10^6$，$1\\le k\\le3\\times10^{18}$。记原来 $a$ 数组的方差为 $p$，则数据满足 $p=0$ 或 $p\\in[0.25,\\ 2^{63}-1]$ 。\n\n\n\n\n\n**【提示】**\n\n  本题读入量较大，请使用合适的读入方式。此处推荐[快速读入模板](https://www.luogu.com.cn/paste/bcfvgxr7)，对于 $\\texttt{C/C++}$ 语言，你也可以使用 `scanf` 语句完成读入。\n  \n  为避免卡精度，建议 `C/C++` 选手使用 $\\texttt{double}$ 类型，并不建议使用 `eps`。", "locale": "zh-CN"}}}
{"pid": "P7997", "type": "P", "difficulty": 4, "samples": [["5 3\n1 2 3 4 6\n1\n2\n3", "6\n10\n11"], ["1 2\n1\n1\n2", "1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "最短路", "其它技巧", "洛谷月赛"], "title": "[WFOI - 01]  刷题 （problem）", "background": "简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/ievt77rm)。", "description": "你初始能力为 $0$。\n\n现在有 $n$ 个题库，每个题库的题有同一个难度 $a_i$，并且题目数量可以视为无限多。现在你要刷 $m$ 道题，每道题都是所有题中你选择出来的一道。\n\n假设你目前做到的题目难度是 $x$，则：\n\n当你的能力比这个题大或等于此题时，你将花费你的能力以攻破此题（此时你的能力减去 $x$）；否则，你将认真钻研此题，钻研出此题后能力增加 $x$（此时不会导致能力减少）。\n\n现在你想知道你做 $m$ 题后能力最大值。由于你的小伙伴也要刷题，所以**有多次询问**，询问之间相互独立，也就是说每次询问的能力初值为 $0$。", "inputFormat": "第一行输入 $2$ 个数 $n,T$；\n\n第二行输入 $n$ 个数，表示数组 $a$；\n\n接下来 $T$ 行，每行一个整数，表示询问。", "outputFormat": "对于每一个询问，输出相应的结果。", "hint": "- **样例 $1$ 解释：**\n\t\n    当 $m=1$ 时，依次选择 $6$；\n\n\t当 $m=2$ 时，依次选择 $4,6$；\n    \n    当 $m=3$ 时，依次选择 $1,4,6$；\n- **样例 $2$ 解释：** \n\n    当 $m=1$ 时，依次选择 $1$；\n\n\t当 $m=2$ 时，依次选择 $1,1$；\n\n**本题采用 Subtask 捆绑测试。**\n\n  Subtask 编号 | $n\\le$ | $m\\le$ | $T\\le$\n  :-: | :-: | :-: | :-: |\n  **Subtask #0 ($5\\texttt{pts}$)** | $5$ | $5$ | $100$ |\n  **Subtask #1 ($10\\texttt{pts}$)** | $5$ | $5$ | $10^5$ |\n  **Subtask #2 ($10\\texttt{pts}$)** | $200$ | $200$ | $100$ |\n  **Subtask #3 ($15\\texttt{pts}$)** | $200$ | $200$ | $10^5$ |\n  **Subtask #4 ($10\\texttt{pts}$)** | $200$ | $10^{18}$ | $10^5$ |\n  **Subtask #5 ($50\\texttt{pts}$)** | $2000$ | $10^{18}$ | $10^5$ |\n  \n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$1 \\le n\\le 2000$，$1 \\le m \\le 10^{18}$，$\\forall i,0 \\le a_i \\le 2000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 01]  刷题 （problem）", "background": "简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/ievt77rm)。", "description": "你初始能力为 $0$。\n\n现在有 $n$ 个题库，每个题库的题有同一个难度 $a_i$，并且题目数量可以视为无限多。现在你要刷 $m$ 道题，每道题都是所有题中你选择出来的一道。\n\n假设你目前做到的题目难度是 $x$，则：\n\n当你的能力比这个题大或等于此题时，你将花费你的能力以攻破此题（此时你的能力减去 $x$）；否则，你将认真钻研此题，钻研出此题后能力增加 $x$（此时不会导致能力减少）。\n\n现在你想知道你做 $m$ 题后能力最大值。由于你的小伙伴也要刷题，所以**有多次询问**，询问之间相互独立，也就是说每次询问的能力初值为 $0$。", "inputFormat": "第一行输入 $2$ 个数 $n,T$；\n\n第二行输入 $n$ 个数，表示数组 $a$；\n\n接下来 $T$ 行，每行一个整数，表示询问。", "outputFormat": "对于每一个询问，输出相应的结果。", "hint": "- **样例 $1$ 解释：**\n\t\n    当 $m=1$ 时，依次选择 $6$；\n\n\t当 $m=2$ 时，依次选择 $4,6$；\n    \n    当 $m=3$ 时，依次选择 $1,4,6$；\n- **样例 $2$ 解释：** \n\n    当 $m=1$ 时，依次选择 $1$；\n\n\t当 $m=2$ 时，依次选择 $1,1$；\n\n**本题采用 Subtask 捆绑测试。**\n\n  Subtask 编号 | $n\\le$ | $m\\le$ | $T\\le$\n  :-: | :-: | :-: | :-: |\n  **Subtask #0 ($5\\texttt{pts}$)** | $5$ | $5$ | $100$ |\n  **Subtask #1 ($10\\texttt{pts}$)** | $5$ | $5$ | $10^5$ |\n  **Subtask #2 ($10\\texttt{pts}$)** | $200$ | $200$ | $100$ |\n  **Subtask #3 ($15\\texttt{pts}$)** | $200$ | $200$ | $10^5$ |\n  **Subtask #4 ($10\\texttt{pts}$)** | $200$ | $10^{18}$ | $10^5$ |\n  **Subtask #5 ($50\\texttt{pts}$)** | $2000$ | $10^{18}$ | $10^5$ |\n  \n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$1 \\le n\\le 2000$，$1 \\le m \\le 10^{18}$，$\\forall i,0 \\le a_i \\le 2000$。", "locale": "zh-CN"}}}
{"pid": "P7998", "type": "P", "difficulty": 6, "samples": [["2\n\n1 0\n ", "\n? 1 2\n\n! 2"], ["3\n\n1 0\n\n3 2\n ", "\n? 1 3\n\n? 3 3\n\n! 2"]], "limits": {"time": [300, 300, 300, 300, 300, 300, 300, 300, 300, 300], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "交互题", "Special Judge", "其它技巧", "洛谷月赛"], "title": "[WFOI - 01] 猜数（guess）", "background": "**这是一道交互题。交互库自适应。请注意特殊的时间限制。**\n\n**每次输出后请记得清空缓存**\n\n简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/xx7sa8go)。", "description": "你需要猜一个正整数 $q$，保证 $q\\in [1,n]$；\n\n你每次可以用诸如 `? x y` 的询问，交互库会在 $[x,y]$ 中指定选择一个数 $z$；\n\n然后交互库会输出形如 `u v` 的回答，表示指定的数是 $u$，其与 $q$ 的关系为 $v$；\n\n具体地，\n- 当交互库返回的 $v=0$ 时，表示 $u<q$；\n- 当交互库返回的 $v=1$ 时，表示 $u=q$；\n- 当交互库返回的 $v=2$ 时，表示 $u>q$。\n\n而一次询问的代价是 $\\dfrac{1}{y-x+1}$；\n\n你可以通过 `! x` 输出你认为正确的答案。\n\n现在你要求出 $q$。\n\n------------\n\n设你的代价为 $x$，你每个测试点获得的分数和你的总代价有如下关系（每个测试点满分 $10$ 分）：\n\n\n- 若 $x\\le 1.9813035$，则你可以得到 $\\text{10 pts}$；\n- 若 $1.9813035 < x \\le 12$，则你可以得到 $\\lfloor(12-x)\\times0.7 \\div 1.00186965\\rfloor  \\text{ pts}$。\n- 若 $x\\ge12$，则你可以得到 $\\text{0 pts}$。\n\n\n需要注意的是，在每一次操作后，需要调用以下函数刷新缓存：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n### 交互格式\n\n一开始交互库会给你 $n$，\n\n然后你可以按题目描述中的方式进行询问或回答答案；\n\n在回答后请立即退出程序。", "inputFormat": "见交互格式。", "outputFormat": "见交互格式。", "hint": "- **样例 $1$ 解释：**\n\t\n    询问后发现 $1<x\\le2$，所以 $x=2$；\n    \n- **样例 $2$ 解释：** \n\n    第一次询问后发现 $1<x\\le3$；\n    \n    第二次询问后发现 $1<x<3$，所以 $x=2$；\n\n**【数据规模与约定】**\n\n| 测试点编号 | $n \\le$ | 测试点编号 | $n\\le$ |\n| :-: | :-: | :-: | :-: |\n| $\\texttt{1}$ | $1$ | $\\texttt{6}$ | $2\\times 10^3$ |\n| $\\texttt{2}$ | $7$ | $\\texttt{7}$ | $10^4$ |\n| $\\texttt{3}$ | $20$ | $\\texttt{8}$ | $5\\times 10^4$ |\n| $\\texttt{4}$ | $80$ | $\\texttt{9}$ | $10^5$ |\n| $\\texttt{5}$ | $300$ | $\\texttt{10}$ | $10^5$ |\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$1\\le q,\\forall u\\le n$，$\\forall v\\in\\{0,1,2\\}$。\n\n保证每询问一次交互库时间是 $\\mathcal O(1)$ 的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 01] 猜数（guess）", "background": "**这是一道交互题。交互库自适应。请注意特殊的时间限制。**\n\n**每次输出后请记得清空缓存**\n\n简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/xx7sa8go)。", "description": "你需要猜一个正整数 $q$，保证 $q\\in [1,n]$；\n\n你每次可以用诸如 `? x y` 的询问，交互库会在 $[x,y]$ 中指定选择一个数 $z$；\n\n然后交互库会输出形如 `u v` 的回答，表示指定的数是 $u$，其与 $q$ 的关系为 $v$；\n\n具体地，\n- 当交互库返回的 $v=0$ 时，表示 $u<q$；\n- 当交互库返回的 $v=1$ 时，表示 $u=q$；\n- 当交互库返回的 $v=2$ 时，表示 $u>q$。\n\n而一次询问的代价是 $\\dfrac{1}{y-x+1}$；\n\n你可以通过 `! x` 输出你认为正确的答案。\n\n现在你要求出 $q$。\n\n------------\n\n设你的代价为 $x$，你每个测试点获得的分数和你的总代价有如下关系（每个测试点满分 $10$ 分）：\n\n\n- 若 $x\\le 1.9813035$，则你可以得到 $\\text{10 pts}$；\n- 若 $1.9813035 < x \\le 12$，则你可以得到 $\\lfloor(12-x)\\times0.7 \\div 1.00186965\\rfloor  \\text{ pts}$。\n- 若 $x\\ge12$，则你可以得到 $\\text{0 pts}$。\n\n\n需要注意的是，在每一次操作后，需要调用以下函数刷新缓存：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n### 交互格式\n\n一开始交互库会给你 $n$，\n\n然后你可以按题目描述中的方式进行询问或回答答案；\n\n在回答后请立即退出程序。", "inputFormat": "见交互格式。", "outputFormat": "见交互格式。", "hint": "- **样例 $1$ 解释：**\n\t\n    询问后发现 $1<x\\le2$，所以 $x=2$；\n    \n- **样例 $2$ 解释：** \n\n    第一次询问后发现 $1<x\\le3$；\n    \n    第二次询问后发现 $1<x<3$，所以 $x=2$；\n\n**【数据规模与约定】**\n\n| 测试点编号 | $n \\le$ | 测试点编号 | $n\\le$ |\n| :-: | :-: | :-: | :-: |\n| $\\texttt{1}$ | $1$ | $\\texttt{6}$ | $2\\times 10^3$ |\n| $\\texttt{2}$ | $7$ | $\\texttt{7}$ | $10^4$ |\n| $\\texttt{3}$ | $20$ | $\\texttt{8}$ | $5\\times 10^4$ |\n| $\\texttt{4}$ | $80$ | $\\texttt{9}$ | $10^5$ |\n| $\\texttt{5}$ | $300$ | $\\texttt{10}$ | $10^5$ |\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$1\\le q,\\forall u\\le n$，$\\forall v\\in\\{0,1,2\\}$。\n\n保证每询问一次交互库时间是 $\\mathcal O(1)$ 的。", "locale": "zh-CN"}}}
{"pid": "P7999", "type": "P", "difficulty": 7, "samples": [["2\n2 1", "1\n1\n1 2"], ["5\n5 2 3 4 1", "4\n2\n1 5\n2 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "其它技巧", "构造", "洛谷月赛"], "title": "[WFOI - 01] 翻转序列（requese）", "background": "简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/kmmn8pyd)。\n\n为什么做完这题你不去做做[这题](https://www.luogu.com.cn/problem/P8223)呢", "description": "你需要在一台奇怪的电脑上排序一个 $1\\sim n$ 的排列。\n\n你可以选择一个数 $x$，然后你每次可以翻转一段长为 $x+1$ 或一段长为 $x-1$ 的序列。\n\n请在 $20\\times n$ 次内还原成 $1\\sim n$ 的序列。\n\n（出题人注：现在最优可以达到15000次以下，请尝试优化您的算法）", "inputFormat": "输入共 $2$ 行：\n\n第一行一个数 $n$。\n\n第二行 $n$ 个数，表示序列 $a$。", "outputFormat": "输出共 $m + 2$ 行。\n\n前两行每行 $1$ 个数，分别是 $x,m$。$m$ 表示操作次数。\n\n接下来 $m$ 行，每行两个数，表示翻转区间的左、右端点。\n\n本题采用 $\\text{SPJ}$，只要翻转操作正确即可给分。", "hint": "- **样例 $1$ 解释：**\n\t\n    翻转 $(1,2)$ 序列变成 $1,2$；\n    \n- **样例 $2$ 解释：** \n\n    翻转 $(1,5)$ 序列变成 $1,4,3,2,5$；\n\n\t翻转 $(2,4)$ 序列变成 $1,2,3,4,5$；\n    \n**本题采用 Subtask 捆绑测试。**\n\nSubtask 编号 | 数据规模与约定\n:-: | :-:\n**Subtask #0** ($\\texttt{1 pts}$) | $n=1$\n**Subtask #1** ($\\texttt{2 pts}$) | $n=2$\n**Subtask #2** ($\\texttt{3 pts}$) | $n=3$\n**Subtask #3** ($\\texttt{4 pts}$) | $n=4$\n**Subtask #4** ($\\texttt{20 pts}$) | $1\\le n\\le 50$\n**Subtask #5** ($\\texttt{20 pts}$) | $1\\le n\\le 100$\n**Subtask #6** ($\\texttt{50 pts}$) | $1\\le n\\le 10^3$\n\n对于 $100\\%$  的数据，$1\\le n,a_i\\le 10^3$，数据保证 $a$ 是一个 $1\\sim n$ 的排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 01] 翻转序列（requese）", "background": "简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/kmmn8pyd)。\n\n为什么做完这题你不去做做[这题](https://www.luogu.com.cn/problem/P8223)呢", "description": "你需要在一台奇怪的电脑上排序一个 $1\\sim n$ 的排列。\n\n你可以选择一个数 $x$，然后你每次可以翻转一段长为 $x+1$ 或一段长为 $x-1$ 的序列。\n\n请在 $20\\times n$ 次内还原成 $1\\sim n$ 的序列。\n\n（出题人注：现在最优可以达到15000次以下，请尝试优化您的算法）", "inputFormat": "输入共 $2$ 行：\n\n第一行一个数 $n$。\n\n第二行 $n$ 个数，表示序列 $a$。", "outputFormat": "输出共 $m + 2$ 行。\n\n前两行每行 $1$ 个数，分别是 $x,m$。$m$ 表示操作次数。\n\n接下来 $m$ 行，每行两个数，表示翻转区间的左、右端点。\n\n本题采用 $\\text{SPJ}$，只要翻转操作正确即可给分。", "hint": "- **样例 $1$ 解释：**\n\t\n    翻转 $(1,2)$ 序列变成 $1,2$；\n    \n- **样例 $2$ 解释：** \n\n    翻转 $(1,5)$ 序列变成 $1,4,3,2,5$；\n\n\t翻转 $(2,4)$ 序列变成 $1,2,3,4,5$；\n    \n**本题采用 Subtask 捆绑测试。**\n\nSubtask 编号 | 数据规模与约定\n:-: | :-:\n**Subtask #0** ($\\texttt{1 pts}$) | $n=1$\n**Subtask #1** ($\\texttt{2 pts}$) | $n=2$\n**Subtask #2** ($\\texttt{3 pts}$) | $n=3$\n**Subtask #3** ($\\texttt{4 pts}$) | $n=4$\n**Subtask #4** ($\\texttt{20 pts}$) | $1\\le n\\le 50$\n**Subtask #5** ($\\texttt{20 pts}$) | $1\\le n\\le 100$\n**Subtask #6** ($\\texttt{50 pts}$) | $1\\le n\\le 10^3$\n\n对于 $100\\%$  的数据，$1\\le n,a_i\\le 10^3$，数据保证 $a$ 是一个 $1\\sim n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P8000", "type": "P", "difficulty": 6, "samples": [["4\n0 0\n0 1\n1 0\n1 1", "2\n1 3\n0 1\n1"], ["3\n0 0\n0 1\n1 0", "3\n1 2 3\n0 0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "洛谷原创", "Special Judge", "O2优化", "凸包", "旋转卡壳", "洛谷月赛"], "title": "[WFOI - 01] 循环节（circle）", "background": "简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/v7gqdh44)。\n\n出题人注：これは非常に嫌な質問なので、あまり時間をかけたくない場合は、この質問を見る前に他の質問を終えることをお勧めします。", "description": "给你一个坐标系上的点集 $a$，你需要找出一个子点集 $b$ 和一个向量 $x$，使得 $\\exist\\ z\\in N^+,\\{b\\cup b+x\\cup b+2x\\cup\\dots\\cup b+zx=a\\}$。\n\n现在想让你求出任意一对 $b_0,x_0,z_0$，其中 $z_0$ 为所有满足条件的三元组中 $z$ 最大的，$b_0$ 中任意三点不共线，任意四点不构成梯形或平行四边形且 $b_0\\cap b_0+x_0=\\varnothing,b_0\\cap b_0+2x_0=\\varnothing,\\dots,b_0\\cap b+yx_0=\\varnothing|{y\\to+\\infty}$。\n\n其中 $b+x$ 的意思是，$b$ 中的所有点都平移向量 $x$ 后组成的点集。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行 $2$ 个整数，表示一个点。", "outputFormat": "输出共 $4$ 行：\n\n第一行一个整数 $|b|$。\n\n第二行 $|b|$ 个整数 $b_1,b_2,\\dots,b_{|b|}$（对应编号）。\n\n第三行两个整数 $x$。\n\n第四行一个整数 $z$。", "hint": "由于本题有样例解释也只是照着念一遍，并且相信既然您都做到这一题来了应该能读懂题目含义，所以本题不提供样例解释（~~其实是出题人懒~~）。\n\n**本题采用 Subtask 捆绑测试。**\nSubtask 编号 | 数据规模与约定\n:-: | :-:\n**Subtask #0($\\text{20 pts}$)** | $1\\le n\\le10$；$-10\\le x_i,y_i \\le 10$\n**Subtask #1($\\text{20 pts}$)** | $1\\le n\\le10^3$\n**Subtask #2($\\text{30 pts}$)** | $z>1$\n**Subtask #3($\\text{30 pts}$)** | 无特殊限制\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，点的坐标范围 $\\in\\left(-10^9,10^9\\right)$，数据保证有解。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WFOI - 01] 循环节（circle）", "background": "简化题意：[$\\texttt{Link}$](https://www.luogu.com.cn/paste/v7gqdh44)。\n\n出题人注：これは非常に嫌な質問なので、あまり時間をかけたくない場合は、この質問を見る前に他の質問を終えることをお勧めします。", "description": "给你一个坐标系上的点集 $a$，你需要找出一个子点集 $b$ 和一个向量 $x$，使得 $\\exist\\ z\\in N^+,\\{b\\cup b+x\\cup b+2x\\cup\\dots\\cup b+zx=a\\}$。\n\n现在想让你求出任意一对 $b_0,x_0,z_0$，其中 $z_0$ 为所有满足条件的三元组中 $z$ 最大的，$b_0$ 中任意三点不共线，任意四点不构成梯形或平行四边形且 $b_0\\cap b_0+x_0=\\varnothing,b_0\\cap b_0+2x_0=\\varnothing,\\dots,b_0\\cap b+yx_0=\\varnothing|{y\\to+\\infty}$。\n\n其中 $b+x$ 的意思是，$b$ 中的所有点都平移向量 $x$ 后组成的点集。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行 $2$ 个整数，表示一个点。", "outputFormat": "输出共 $4$ 行：\n\n第一行一个整数 $|b|$。\n\n第二行 $|b|$ 个整数 $b_1,b_2,\\dots,b_{|b|}$（对应编号）。\n\n第三行两个整数 $x$。\n\n第四行一个整数 $z$。", "hint": "由于本题有样例解释也只是照着念一遍，并且相信既然您都做到这一题来了应该能读懂题目含义，所以本题不提供样例解释（~~其实是出题人懒~~）。\n\n**本题采用 Subtask 捆绑测试。**\nSubtask 编号 | 数据规模与约定\n:-: | :-:\n**Subtask #0($\\text{20 pts}$)** | $1\\le n\\le10$；$-10\\le x_i,y_i \\le 10$\n**Subtask #1($\\text{20 pts}$)** | $1\\le n\\le10^3$\n**Subtask #2($\\text{30 pts}$)** | $z>1$\n**Subtask #3($\\text{30 pts}$)** | 无特殊限制\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，点的坐标范围 $\\in\\left(-10^9,10^9\\right)$，数据保证有解。", "locale": "zh-CN"}}}
{"pid": "P8001", "type": "P", "difficulty": 2, "samples": [["3\n0011\n0110\n1100", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "Easy Strings Merging", "background": "", "description": "给定 $n$ 个 01 串，每次你可以从某个串开头移除一个字符并把它加入一个新串 $S$ 的末尾。最大化 $S$ 中相邻两个字符相同的对数。", "inputFormat": "第一行一个正整数 $n$ 表示串的个数。\n\n接下来 $n$ 行，每行一个 01 字符串。", "outputFormat": "一行一个整数表示答案。", "hint": "### 样例解释\n\n最优方案下，每次取的串的编号为 $1,1,2,1,2,3,1,2,3,2,3,3$，最终的 $S=000111111000$。\n\n### 数据范围\n\n**本题采用捆绑测试**\n\n设 $s$ 表示输入的 01 串的长度之和。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $5$ | $n=1$ |\n| $1$ | $20$ | $n\\le 2$，$s\\le 10$ |\n| $2$ | $25$ | $n\\le 5$，$s\\le 30$ |\n| $3$ | $25$ | $n\\le 100$，$s\\le 200$ |\n| $4$ | $25$ | 无特殊限制 |\n\n对于所有数据，保证 $1\\le n\\le s\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Easy Strings Merging", "background": "", "description": "给定 $n$ 个 01 串，每次你可以从某个串开头移除一个字符并把它加入一个新串 $S$ 的末尾。最大化 $S$ 中相邻两个字符相同的对数。", "inputFormat": "第一行一个正整数 $n$ 表示串的个数。\n\n接下来 $n$ 行，每行一个 01 字符串。", "outputFormat": "一行一个整数表示答案。", "hint": "### 样例解释\n\n最优方案下，每次取的串的编号为 $1,1,2,1,2,3,1,2,3,2,3,3$，最终的 $S=000111111000$。\n\n### 数据范围\n\n**本题采用捆绑测试**\n\n设 $s$ 表示输入的 01 串的长度之和。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $5$ | $n=1$ |\n| $1$ | $20$ | $n\\le 2$，$s\\le 10$ |\n| $2$ | $25$ | $n\\le 5$，$s\\le 30$ |\n| $3$ | $25$ | $n\\le 100$，$s\\le 200$ |\n| $4$ | $25$ | 无特殊限制 |\n\n对于所有数据，保证 $1\\le n\\le s\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8002", "type": "P", "difficulty": 3, "samples": [["2 2\n1 3\n2 2", "-2"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "Alice and Bob are playing a Normal Game", "background": "", "description": "给定一个长度为 $n$ 的序列，Alice 和 Bob 交替操作一共 $k$ 次，第 $i$ 次当前操作的人必须选一个 $-x_i \\sim x_i$ 的整数把它插在序列开头或结尾，Alice 先手（也就是说 $i$ 为奇数时由 Alice 来插入一个 $-x_i\\sim x_i$ 的整数，$i$ 为偶数时由 Bob 来插入一个 $-x_i\\sim x_i$ 的整数）。\n\n记最终的序列为 $a_1,a_2,\\dots,a_{n+k}$，则得分为 $\\sum_{i=1}^{n+k} (-1)^{i-1}a_i$。Alice 希望得分最大，Bob 希望得分最小。在两人都采取最优策略的情况下，求最终得分。", "inputFormat": "第一行两个正整数 $n,k$ 表示初始序列长度以及操作次数。\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示初始的序列。\n\n接下来一行 $k$ 个非负整数，第 $i$ 个表示 $x_i$。", "outputFormat": "一行一个整数表示答案。", "hint": "**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $25$ | $n,k,x_i\\le 5$ |\n| $1$ | $25$ | $n,k\\le 10$ |\n| $2$ | $25$ | $n,k\\le 100$ |\n| $3$ | $25$ | 无特殊限制 |\n\n对于所有数据，保证 $1\\le n,k\\le 2\\times 10^5$，$0\\le |a_i|,x_i\\le 10^9$。\n\n本题测试点较多，为了保证评测速度，本题时限 500ms，保证时限在 std 所用最大时间的 5 倍以上。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Alice and Bob are playing a Normal Game", "background": "", "description": "给定一个长度为 $n$ 的序列，Alice 和 Bob 交替操作一共 $k$ 次，第 $i$ 次当前操作的人必须选一个 $-x_i \\sim x_i$ 的整数把它插在序列开头或结尾，Alice 先手（也就是说 $i$ 为奇数时由 Alice 来插入一个 $-x_i\\sim x_i$ 的整数，$i$ 为偶数时由 Bob 来插入一个 $-x_i\\sim x_i$ 的整数）。\n\n记最终的序列为 $a_1,a_2,\\dots,a_{n+k}$，则得分为 $\\sum_{i=1}^{n+k} (-1)^{i-1}a_i$。Alice 希望得分最大，Bob 希望得分最小。在两人都采取最优策略的情况下，求最终得分。", "inputFormat": "第一行两个正整数 $n,k$ 表示初始序列长度以及操作次数。\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示初始的序列。\n\n接下来一行 $k$ 个非负整数，第 $i$ 个表示 $x_i$。", "outputFormat": "一行一个整数表示答案。", "hint": "**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $25$ | $n,k,x_i\\le 5$ |\n| $1$ | $25$ | $n,k\\le 10$ |\n| $2$ | $25$ | $n,k\\le 100$ |\n| $3$ | $25$ | 无特殊限制 |\n\n对于所有数据，保证 $1\\le n,k\\le 2\\times 10^5$，$0\\le |a_i|,x_i\\le 10^9$。\n\n本题测试点较多，为了保证评测速度，本题时限 500ms，保证时限在 std 所用最大时间的 5 倍以上。", "locale": "zh-CN"}}}
{"pid": "P8003", "type": "P", "difficulty": 5, "samples": [["2\n4 5\n(())\n2 3\n()", "8\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "Hard Brackets Inserting", "background": "", "description": "小 S 有一个长度为 $n$ 的**合法**括号序列。\n\n现在小 K 看到了，想在其中插入若干括号，使之成为一个长度为 $m$ 的括号序列（不一定合法）。但是她不想完全破坏这个序列，于是她希望对于她这种添加括号的方式，仅存在一种合法的且长度为 $n$ 的括号序可以通过插入若干括号来得到小 K 改后的序列，这样小 S 就可以轻松还原出原来的括号序列了（也就是说在保证删完后的括号序列长度为 $n$ 且合法的情况下，无论小 S 如何删除括号，都只能得到她初始的括号序列）。\n\n求小 K 插入括号的方案数模 $998244353$。两种插入括号的方案不同当且仅当我们将最终的括号序列按照是小 K 所插入的还是原有的两类分别染成红色和黑色，得到的带颜色的括号序列不同。", "inputFormat": "第一行一个整数 $T$ 表示数据组数。\n\n接下来对于每一组数据：\n\n第一行两个整数 $n$ 和 $m$ 表示小 S 的括号序列的长度和小 K 插入括号后的长度。\n\n第二行一个**合法**的括号序列表示小 S 的括号序列。", "outputFormat": "对于每一组数据输出一行一个整数，表示方案数对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n对于第一组样例，我们有如下 $8$ 种插入方式：\n\n$\\textcolor{red}{)}(())$\n\n$((\\textcolor{red}{)}))$\n\n$(()\\textcolor{red}{)})$\n\n$(())\\textcolor{red}{)}$\n\n$\\textcolor{red}{(}(())$\n\n$(\\textcolor{red}{(}())$\n\n$((\\textcolor{red}{(}))$\n\n$(())\\textcolor{red}{(}$\n\n其中红色的括号表示小 K 插入的括号。\n\n如下的方式是不可行的：\n\n$(\\textcolor{red}{)}())$\n\n因为你可以通过删除第二个括号或第四个括号来获得如下两种括号序列：$(()),()()$。\n\n### 数据范围\n\n**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $20$ | $m\\le 10$ |\n| $1$ | $30$ | $m\\le 100$ |\n| $2$ | $20$ | $n=2$ |\n| $3$ | $30$ | $n\\ne 2$ |\n\n对于所有数据，保证 $1\\le n\\le m$ 且 $\\sum m\\le 10^6$，$1\\le T\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Hard Brackets Inserting", "background": "", "description": "小 S 有一个长度为 $n$ 的**合法**括号序列。\n\n现在小 K 看到了，想在其中插入若干括号，使之成为一个长度为 $m$ 的括号序列（不一定合法）。但是她不想完全破坏这个序列，于是她希望对于她这种添加括号的方式，仅存在一种合法的且长度为 $n$ 的括号序可以通过插入若干括号来得到小 K 改后的序列，这样小 S 就可以轻松还原出原来的括号序列了（也就是说在保证删完后的括号序列长度为 $n$ 且合法的情况下，无论小 S 如何删除括号，都只能得到她初始的括号序列）。\n\n求小 K 插入括号的方案数模 $998244353$。两种插入括号的方案不同当且仅当我们将最终的括号序列按照是小 K 所插入的还是原有的两类分别染成红色和黑色，得到的带颜色的括号序列不同。", "inputFormat": "第一行一个整数 $T$ 表示数据组数。\n\n接下来对于每一组数据：\n\n第一行两个整数 $n$ 和 $m$ 表示小 S 的括号序列的长度和小 K 插入括号后的长度。\n\n第二行一个**合法**的括号序列表示小 S 的括号序列。", "outputFormat": "对于每一组数据输出一行一个整数，表示方案数对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n对于第一组样例，我们有如下 $8$ 种插入方式：\n\n$\\textcolor{red}{)}(())$\n\n$((\\textcolor{red}{)}))$\n\n$(()\\textcolor{red}{)})$\n\n$(())\\textcolor{red}{)}$\n\n$\\textcolor{red}{(}(())$\n\n$(\\textcolor{red}{(}())$\n\n$((\\textcolor{red}{(}))$\n\n$(())\\textcolor{red}{(}$\n\n其中红色的括号表示小 K 插入的括号。\n\n如下的方式是不可行的：\n\n$(\\textcolor{red}{)}())$\n\n因为你可以通过删除第二个括号或第四个括号来获得如下两种括号序列：$(()),()()$。\n\n### 数据范围\n\n**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $20$ | $m\\le 10$ |\n| $1$ | $30$ | $m\\le 100$ |\n| $2$ | $20$ | $n=2$ |\n| $3$ | $30$ | $n\\ne 2$ |\n\n对于所有数据，保证 $1\\le n\\le m$ 且 $\\sum m\\le 10^6$，$1\\le T\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P8004", "type": "P", "difficulty": 7, "samples": [["2\n4 3 100\n1 2\n2 3\n3 4\n2 3 4\n5 2 100\n1 2\n2 3\n3 4\n3 5\n4 5", "6\n0\n0\n0\n5\n1 1 0\n3 4 0 3 1 1 1\n1 2 0\n3 2 1 3 0 4 1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "洛谷月赛"], "title": "Welcome to Lunatic City", "background": "", "description": "M 国由 $n$ 个城市，$n-1$ 条双向高速铁路组成。其中的 $n$ 个城市可经过铁路互相抵达。\n\n由于 M 国有着最顶尖的科技，为了加快交通速度，它可以在铁路上放置若干的互相配对的传送门，但总对数不超过 $L$。当一个列车在一条铁轨上运行时，每当它遇到一个传送门，就会进行传送。每个传送门分为正面与反面，列车从正面进入传送门时就会从与这个传送门配对的传送门的正面出来，从反面进入就从反面出来。传送门可以设立在一条铁路中间的任何地方。（如果对这一段描述有问题可以参考样例解释）\n\n同时由于 M 国有着最高速的列车，列车的行驶时间仅消耗在停靠。于是从城市 $i$ 到城市 $j$ 的距离 $dis(i,j)$ 定义为列车所经过的城市数（包含终点但不包含起点）。\n\n现在 M 国设立了 $m$ 个重要城市 $x_1,x_2,\\dots,x_m$，请通过合理放置不超过 $L$ 对传送门使得 M 国的首都 $1$ 号城市到这些城市的距离和最小，即最小化 $\\sum_{i=1}^mdis(1,x_i)$，并构造方案。同时放置的传送门必须保证城市间仍互相可达。\n\n（由于 spj 的某些特性，请不要在一条铁路上放超过 $L$ 个传送门，否则会被判断为 WA）", "inputFormat": "第一行一个数 $T$ 表示数据组数。\n\n接下来对于每一组数据：\n\n第一行三个整数 $n$，$m$ 和 $L$ 表示城市数，$x$ 的长度和最多放置的传送门对数。\n\n接下来 $n-1$ 行，第 $i$ 行两个正整数 $u_i,v_i$ 表示第 $i$ 条铁路连接的两个城市。\n\n接下来一行 $m$ 个整数表示 $x$。", "outputFormat": "对于每组数据：\n\n第一行一个整数表示最小距离和。\n\n接下来 $n-1$ 行，第 $i$ 行开头一个整数 $num$ 表示第 $i$ 条铁路上的传送门数。然后 $num$ 对整数 $x,f$ 描述了从 $u_i$ 到 $v_i$ 传送门依次的编号与朝向，$f=0$ 表示正面朝向城市 $u_i$，$f=1$ 表示正面朝向城市 $v_i$。\n\n传送门编号为 $1\\sim \\frac{\\sum num}{2}$ 且每种编号必须恰好出现两次。\n\n对于每组数据，传送门总对数不得超过 $L$，即 $\\frac{\\sum num}{2}\\le L$。", "hint": "### 样例解释\n\n对于样例的第二组数据，树的形态及传送门的放置方式如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l0r5x9l0.png)\n\n其中红色门编号为 $1$，绿色编号为 $2$，蓝色编号为 $3$，紫色编号为 $4$。箭头表示传送门的正面所朝的方向。加粗的点表示重要城市。\n\n其中 $1$ 号城市到 $5$ 号城市的最短路径如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0bwhu6ct.png)\n\n首先由 $1$ 号城市出发，进入红色传送门的正面到达 $3$ 号城市。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rgq415ni.png)\n\n随后从 $3$ 号城市出发，从绿色传送门的正面进入，到达 $3-5$ 这条路上绿色与蓝色传送门中间的一段铁路上，再从蓝色传送门正面进入，到达 $2-3$ 这条路中蓝色与红色传送门中间的一段铁路上，再由红色传送门的背面进入，最终到达 $2$ 号城市。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xm1qefmr.png)\n\n最后再从紫色传送门的正面进入，最终到达 $5$ 号城市。中途除去 $1$ 号城市分别经过了 $3,2,5$ 号城市，于是在这种传送门的放置方式下 $dis(1,5)=3$。\n\n同时有 $dis(1,4)=2$，可以证明不存在让 $dis(1,4)+dis(1,5)$ 更小的放置方案。\n\n### 数据范围\n\n**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $15$ | $n\\le 9$，$L=100$ |\n| $1$ | $10$ | $m=n-1$，$L=5n$ |\n| $2$ | $20$ | $n\\le 70$ 且 $n>30$ 的数据不超过五组，$L=n^2$ |\n| $3$ | $20$ | $n\\le 1000$ 且 $n>100$ 的数据不超过五组，$L=100n$ |\n| $4$ | $30$ | $L=5n$ |\n| $5$ | $5$ | $L=n$ |\n\n对于所有数据，保证 $1\\le T\\le 100$，$1\\le n\\le 10^5$，$1\\le \\sum n\\le 5\\times 10^5$，$0\\le m<n$，$2\\le x_i\\le n$，$x_i$ 互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Welcome to Lunatic City", "background": "", "description": "M 国由 $n$ 个城市，$n-1$ 条双向高速铁路组成。其中的 $n$ 个城市可经过铁路互相抵达。\n\n由于 M 国有着最顶尖的科技，为了加快交通速度，它可以在铁路上放置若干的互相配对的传送门，但总对数不超过 $L$。当一个列车在一条铁轨上运行时，每当它遇到一个传送门，就会进行传送。每个传送门分为正面与反面，列车从正面进入传送门时就会从与这个传送门配对的传送门的正面出来，从反面进入就从反面出来。传送门可以设立在一条铁路中间的任何地方。（如果对这一段描述有问题可以参考样例解释）\n\n同时由于 M 国有着最高速的列车，列车的行驶时间仅消耗在停靠。于是从城市 $i$ 到城市 $j$ 的距离 $dis(i,j)$ 定义为列车所经过的城市数（包含终点但不包含起点）。\n\n现在 M 国设立了 $m$ 个重要城市 $x_1,x_2,\\dots,x_m$，请通过合理放置不超过 $L$ 对传送门使得 M 国的首都 $1$ 号城市到这些城市的距离和最小，即最小化 $\\sum_{i=1}^mdis(1,x_i)$，并构造方案。同时放置的传送门必须保证城市间仍互相可达。\n\n（由于 spj 的某些特性，请不要在一条铁路上放超过 $L$ 个传送门，否则会被判断为 WA）", "inputFormat": "第一行一个数 $T$ 表示数据组数。\n\n接下来对于每一组数据：\n\n第一行三个整数 $n$，$m$ 和 $L$ 表示城市数，$x$ 的长度和最多放置的传送门对数。\n\n接下来 $n-1$ 行，第 $i$ 行两个正整数 $u_i,v_i$ 表示第 $i$ 条铁路连接的两个城市。\n\n接下来一行 $m$ 个整数表示 $x$。", "outputFormat": "对于每组数据：\n\n第一行一个整数表示最小距离和。\n\n接下来 $n-1$ 行，第 $i$ 行开头一个整数 $num$ 表示第 $i$ 条铁路上的传送门数。然后 $num$ 对整数 $x,f$ 描述了从 $u_i$ 到 $v_i$ 传送门依次的编号与朝向，$f=0$ 表示正面朝向城市 $u_i$，$f=1$ 表示正面朝向城市 $v_i$。\n\n传送门编号为 $1\\sim \\frac{\\sum num}{2}$ 且每种编号必须恰好出现两次。\n\n对于每组数据，传送门总对数不得超过 $L$，即 $\\frac{\\sum num}{2}\\le L$。", "hint": "### 样例解释\n\n对于样例的第二组数据，树的形态及传送门的放置方式如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l0r5x9l0.png)\n\n其中红色门编号为 $1$，绿色编号为 $2$，蓝色编号为 $3$，紫色编号为 $4$。箭头表示传送门的正面所朝的方向。加粗的点表示重要城市。\n\n其中 $1$ 号城市到 $5$ 号城市的最短路径如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0bwhu6ct.png)\n\n首先由 $1$ 号城市出发，进入红色传送门的正面到达 $3$ 号城市。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rgq415ni.png)\n\n随后从 $3$ 号城市出发，从绿色传送门的正面进入，到达 $3-5$ 这条路上绿色与蓝色传送门中间的一段铁路上，再从蓝色传送门正面进入，到达 $2-3$ 这条路中蓝色与红色传送门中间的一段铁路上，再由红色传送门的背面进入，最终到达 $2$ 号城市。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xm1qefmr.png)\n\n最后再从紫色传送门的正面进入，最终到达 $5$ 号城市。中途除去 $1$ 号城市分别经过了 $3,2,5$ 号城市，于是在这种传送门的放置方式下 $dis(1,5)=3$。\n\n同时有 $dis(1,4)=2$，可以证明不存在让 $dis(1,4)+dis(1,5)$ 更小的放置方案。\n\n### 数据范围\n\n**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $15$ | $n\\le 9$，$L=100$ |\n| $1$ | $10$ | $m=n-1$，$L=5n$ |\n| $2$ | $20$ | $n\\le 70$ 且 $n>30$ 的数据不超过五组，$L=n^2$ |\n| $3$ | $20$ | $n\\le 1000$ 且 $n>100$ 的数据不超过五组，$L=100n$ |\n| $4$ | $30$ | $L=5n$ |\n| $5$ | $5$ | $L=n$ |\n\n对于所有数据，保证 $1\\le T\\le 100$，$1\\le n\\le 10^5$，$1\\le \\sum n\\le 5\\times 10^5$，$0\\le m<n$，$2\\le x_i\\le n$，$x_i$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P8005", "type": "P", "difficulty": 7, "samples": [["7\n3 1\n3 2\n3 3\n4 1\n4 2\n4 3\n4 4", "1\n2\n1\n3\n5\n5\n3"], ["5\n5 2\n6 3\n7 4\n8 5\n9 6", "20\n104\n648\n4662\n38040"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "An Extra Requirement", "background": "由于 Codeforces [[1]](https://codeforces.com/contest/1610/problem/I) [[2]](https://codeforces.com/contest/1591/problem/F) 能从 Atcoder [[1]](https://atcoder.jp/contests/agc017/tasks/agc017_d) [[2]](https://atcoder.jp/contests/arc115/tasks/arc115_e) 搬题，于是出（搬）题人也从 Atcoder [[3]](https://atcoder.jp/contests/agc054/tasks/agc054_e) 搬了一道。", "description": "对于一个长度为 $N$ 的排列 $P$，你可以进行若干次如下操作：选三个位置 $x,y,z(x<y<z)$，若 $P_y<\\min\\{P_x,P_z\\}$ 或 $P_y>\\max\\{P_x,P_z\\}$，那么可以删除 $P_y$。\n\n统计存在一种删除方式，使得最后只剩下不超过两个数且 $P_1=A$ 的排列 $P$ 的个数。由于答案可能很大，你只需要输出个数模 $998244353$ 的结果即可。", "inputFormat": "第一行输入一行一个正整数 $T$ 表示数据组数。\n\n接下来 $T$ 行，每行两个正整数 $N,A$，分别表示排列 $P$ 的长度和排列 $P$ 的第一个数。", "outputFormat": "输出 $T$ 行，每行一个整数表示答案，对 $998244353$ 取模。", "hint": "**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $10$ | $T,N\\le 8$ |\n| $1$ | $15$ | $T\\le 5$，$N\\le 100$ |\n| $2$ | $10$ | $T\\le 5$，$N\\le 1000$ |\n| $3$ | $15$ | $A=1$ |\n| $4$ | $15$ | $T\\le 5$，$N\\le 5\\times 10^4$ |\n| $5$ | $15$ | $T\\le 200$ |\n| $6$ | $20$ | 无特殊限制 |\n\n对于所有数据，保证：$1\\le T\\le 10^5$，$1\\le A\\le N\\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "An Extra Requirement", "background": "由于 Codeforces [[1]](https://codeforces.com/contest/1610/problem/I) [[2]](https://codeforces.com/contest/1591/problem/F) 能从 Atcoder [[1]](https://atcoder.jp/contests/agc017/tasks/agc017_d) [[2]](https://atcoder.jp/contests/arc115/tasks/arc115_e) 搬题，于是出（搬）题人也从 Atcoder [[3]](https://atcoder.jp/contests/agc054/tasks/agc054_e) 搬了一道。", "description": "对于一个长度为 $N$ 的排列 $P$，你可以进行若干次如下操作：选三个位置 $x,y,z(x<y<z)$，若 $P_y<\\min\\{P_x,P_z\\}$ 或 $P_y>\\max\\{P_x,P_z\\}$，那么可以删除 $P_y$。\n\n统计存在一种删除方式，使得最后只剩下不超过两个数且 $P_1=A$ 的排列 $P$ 的个数。由于答案可能很大，你只需要输出个数模 $998244353$ 的结果即可。", "inputFormat": "第一行输入一行一个正整数 $T$ 表示数据组数。\n\n接下来 $T$ 行，每行两个正整数 $N,A$，分别表示排列 $P$ 的长度和排列 $P$ 的第一个数。", "outputFormat": "输出 $T$ 行，每行一个整数表示答案，对 $998244353$ 取模。", "hint": "**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $10$ | $T,N\\le 8$ |\n| $1$ | $15$ | $T\\le 5$，$N\\le 100$ |\n| $2$ | $10$ | $T\\le 5$，$N\\le 1000$ |\n| $3$ | $15$ | $A=1$ |\n| $4$ | $15$ | $T\\le 5$，$N\\le 5\\times 10^4$ |\n| $5$ | $15$ | $T\\le 200$ |\n| $6$ | $20$ | 无特殊限制 |\n\n对于所有数据，保证：$1\\le T\\le 10^5$，$1\\le A\\le N\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8006", "type": "P", "difficulty": 7, "samples": [["10 4\naabbaabbaa\n1 6 5 10\n3 6 5 8\n1 3 5 7\n1 10 1 10", "11\n9\n2\n17\n"]], "limits": {"time": [1000, 2000, 3000, 4000, 5000, 1000, 2000, 3000, 4000, 5000, 4000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 4000, 3000, 2000, 1000, 4000, 3000, 2000, 1000, 4000, 4000, 5000, 3000, 2000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "String Rearrangement in Phantom", "background": "", "description": "有一字符串 $S$，每次询问两串 $S[l_1,r_1]$，$S[l_2,r_2]$，问有多少划分方式使得 $S[l_1,r_1]=A+B+C$，$C+B^R+A=S[l_2,r_2]$。其中 $B^R$ 表示 $B$ 串的翻转，$+$ 表示字符串的拼接，$S[l,r]$ 表示提取串 $S$ 的第 $l$ 到第 $r$ 个字符。$A,B,C$ 可以为空。", "inputFormat": "第一行两个正整数 $n$ 和 $m$ 表示 $S$ 的长度和询问数。\n\n第二行一个长度为 $n$ 的小写字母组成的字符串表示 $S$。\n\n接下来 $m$ 行，每行四个正整数 $l_1,r_1,l_2,r_2$ 表示询问区间，保证 $r_1-l_1=r_2-l_2$。", "outputFormat": "$m$ 行，每行一个正整数表示答案。", "hint": "**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------:|\n| $0$ | $10$ | $1\\le n,m\\le 100$ |\n| $1$ | $10$ | $1\\le n,m\\le 500$ |\n| $2$ | $20$ | $1\\le n,m\\le 3000$ |\n| $3$ | $30$ | $1\\le n,m\\le 5\\times 10^4$ |\n| $4$ | $30$ | $1\\le n\\le 2\\times 10^5$，$1\\le m\\le 10^5$ |\n\n对于所有数据，保证 $1\\le n\\le 2\\times 10^5$，$1\\le m\\le 10^5$，$1\\le l_1\\le r_1\\le n$，$1\\le l_2\\le r_2\\le n$，$r_1-l_1=r_2-l_2$。\n\n对于编号为 $i$ 的 Subtask，其时限为 $i+1$ 秒。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "String Rearrangement in Phantom", "background": "", "description": "有一字符串 $S$，每次询问两串 $S[l_1,r_1]$，$S[l_2,r_2]$，问有多少划分方式使得 $S[l_1,r_1]=A+B+C$，$C+B^R+A=S[l_2,r_2]$。其中 $B^R$ 表示 $B$ 串的翻转，$+$ 表示字符串的拼接，$S[l,r]$ 表示提取串 $S$ 的第 $l$ 到第 $r$ 个字符。$A,B,C$ 可以为空。", "inputFormat": "第一行两个正整数 $n$ 和 $m$ 表示 $S$ 的长度和询问数。\n\n第二行一个长度为 $n$ 的小写字母组成的字符串表示 $S$。\n\n接下来 $m$ 行，每行四个正整数 $l_1,r_1,l_2,r_2$ 表示询问区间，保证 $r_1-l_1=r_2-l_2$。", "outputFormat": "$m$ 行，每行一个正整数表示答案。", "hint": "**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------:|\n| $0$ | $10$ | $1\\le n,m\\le 100$ |\n| $1$ | $10$ | $1\\le n,m\\le 500$ |\n| $2$ | $20$ | $1\\le n,m\\le 3000$ |\n| $3$ | $30$ | $1\\le n,m\\le 5\\times 10^4$ |\n| $4$ | $30$ | $1\\le n\\le 2\\times 10^5$，$1\\le m\\le 10^5$ |\n\n对于所有数据，保证 $1\\le n\\le 2\\times 10^5$，$1\\le m\\le 10^5$，$1\\le l_1\\le r_1\\le n$，$1\\le l_2\\le r_2\\le n$，$r_1-l_1=r_2-l_2$。\n\n对于编号为 $i$ 的 Subtask，其时限为 $i+1$ 秒。", "locale": "zh-CN"}}}
{"pid": "P8007", "type": "P", "difficulty": 4, "samples": [["4\n(???\n", "3"], ["8\n(???))??", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["O2优化", "组合数学"], "title": "「Wdsr-3」永远与须臾的走廊", "background": "永远亭是迷途森林里的不可思议的屋子。\n\n为了躲避月之使者的到来，也是为了防御，永远亭内被布下了一条无尽的长廊。困在其中的对手无法触及到真实，陷入到永远与须臾的陷阱里去。\n\n不过，无尽的长廊 $S$ 毕竟只是单一有限走廊 $S_0$ 的无限循环，其本质是永远亭的主人蓬莱山辉夜及八意永琳设下的圈套。正因该长廊是通过辉夜的能力实现的，因此辉夜可以通过修改该「有限长的」走廊 $S_0$，进而作用于「无限长的」长廊 $S$。这意味着有限的修改可以创造出无限的变动。\n\n光秃秃的长廊显得单调，也难以起到掩人耳目的目的。辉夜决定在长廊上绘制象征着月初的「上弦月」和象征着月末的「下弦月」，以达到图案交错重叠的目的。为了方便起见，「上弦月」可以被近似认为是左括号，而「下弦月」可以被近似认为是右括号。作为优雅的月之都的公主，当然会有不少条条框框——轮到你帮助辉夜满足她的要求了。", "description": "辉夜希望创造一个无限长的括号序列 $S$ 作为永远亭长廊的绘制图案，它由一个长度为 $n$ 的括号序列 $S_0$ 不断重复而成。\n\n我们称一个括号序列 $T$ 是合法的，当且仅当它可以由以下方式生成：\n\n- $\\verb!()!$ 是一个合法的括号序列。  \n- 如果 $A$ 是合法括号序列，那么 $\\verb!(!A\\verb!)!$ 同样是一个合法括号序列。  \n- 如果 $A,B$ 都是合法括号序列，那么 $AB$（即 $A,B$ 拼接）同样是一个合法括号序列。\n\n例如，$\\verb!(()())!,\\verb!()()!,\\verb!((()())())!$ 都是合法括号序列；而 $\\verb!)(!,\\verb!(()!,\\verb!())(()!$ 均不是合法括号序列。\n\n现在辉夜已经确定了 $S_0$ 当中一部分的符号。你需要求出，「在剩下来的单元上绘制括号，使得这条无限长的长廊上可以找到**无限长的**合法括号序列」的方案数。两种方案不同仅当两种方案中有至少一个位置的 `?` 被替换成了不同的字符。输出它对 $998,244,353$（一个大质数）取模后的结果。", "inputFormat": "- 第一行有一个正整数 $n$，表示单元总数。  \n- 接下来一行有 $n$ 个字符。若第 $i$ 个字符是 $\\verb!(!$ 或者 $\\verb!)!$，则表示第 $i$ 个单元上绘制的括号已经被辉夜所指定；否则若第 $i$ 个字符是 $\\verb!?!$，则表示该位置尚未被确定。", "outputFormat": "- 共一行一个整数。表示所有方案数对 $998,244,353$ 取模后的结果。", "hint": "#### 样例 1 解释\n\n符合条件的方案共有三种：$\\verb!(())!$、$\\verb!()()!$ 和 $\\verb!())(!$。\n\n- 第一种方案，$\\overbrace{\\text{\\tt\\textcolor{red}{(())}\\textcolor{blue}{(())}\\texttt{...}\\textcolor{red}{(())}\\textcolor{blue}{(())}}}^{\\text{无穷个}}$ 可以找到无限长的合法括号序列。\n- 第二种方案，$\\overbrace{\\text{\\tt\\textcolor{red}{()()}\\textcolor{blue}{()()}\\texttt{...}\\textcolor{red}{()()}\\textcolor{blue}{()()}}}^{\\text{无穷个}}$ 同样可以找到无限长的合法括号序列。\n- 第三种方案，$\\text{\\tt\\textcolor{red}{())}}\\overbrace{\\text{\\tt\\textcolor{red}{(}\\textcolor{blue}{())(}\\texttt{...}\\textcolor{red}{())(}\\textcolor{blue}{())}}}^{\\text{无穷个}}\\text{\\tt\\textcolor{blue}{(}}$ 仍然可以找到无穷长的括号序列。\n\n可以证明，不存在其他方案。\n\n#### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le } & \\textbf{特殊性质} & \\textbf{分值} \\cr\\hline\n1 & 20 & - & 20 \\cr\\hline\n2 & 10^5 & \\text{A} & 10 \\cr\\hline\n3 & 10^5 & \\text{B} & 10 \\cr\\hline\n4 & 10^5 & - & 60 \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证字符串里仅出现 $\\verb!(!$ 和 $\\verb!)!$。  \n**特殊性质** $\\textbf{B}$：保证字符串里仅出现 $\\verb!?!$。\n\n对于全部数据，满足 $1\\le n\\le 10^5$，且字符串里仅出现 $\\verb!(!,\\verb!)!,\\verb!?!$ 三种字符。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-3」永远与须臾的走廊", "background": "永远亭是迷途森林里的不可思议的屋子。\n\n为了躲避月之使者的到来，也是为了防御，永远亭内被布下了一条无尽的长廊。困在其中的对手无法触及到真实，陷入到永远与须臾的陷阱里去。\n\n不过，无尽的长廊 $S$ 毕竟只是单一有限走廊 $S_0$ 的无限循环，其本质是永远亭的主人蓬莱山辉夜及八意永琳设下的圈套。正因该长廊是通过辉夜的能力实现的，因此辉夜可以通过修改该「有限长的」走廊 $S_0$，进而作用于「无限长的」长廊 $S$。这意味着有限的修改可以创造出无限的变动。\n\n光秃秃的长廊显得单调，也难以起到掩人耳目的目的。辉夜决定在长廊上绘制象征着月初的「上弦月」和象征着月末的「下弦月」，以达到图案交错重叠的目的。为了方便起见，「上弦月」可以被近似认为是左括号，而「下弦月」可以被近似认为是右括号。作为优雅的月之都的公主，当然会有不少条条框框——轮到你帮助辉夜满足她的要求了。", "description": "辉夜希望创造一个无限长的括号序列 $S$ 作为永远亭长廊的绘制图案，它由一个长度为 $n$ 的括号序列 $S_0$ 不断重复而成。\n\n我们称一个括号序列 $T$ 是合法的，当且仅当它可以由以下方式生成：\n\n- $\\verb!()!$ 是一个合法的括号序列。  \n- 如果 $A$ 是合法括号序列，那么 $\\verb!(!A\\verb!)!$ 同样是一个合法括号序列。  \n- 如果 $A,B$ 都是合法括号序列，那么 $AB$（即 $A,B$ 拼接）同样是一个合法括号序列。\n\n例如，$\\verb!(()())!,\\verb!()()!,\\verb!((()())())!$ 都是合法括号序列；而 $\\verb!)(!,\\verb!(()!,\\verb!())(()!$ 均不是合法括号序列。\n\n现在辉夜已经确定了 $S_0$ 当中一部分的符号。你需要求出，「在剩下来的单元上绘制括号，使得这条无限长的长廊上可以找到**无限长的**合法括号序列」的方案数。两种方案不同仅当两种方案中有至少一个位置的 `?` 被替换成了不同的字符。输出它对 $998,244,353$（一个大质数）取模后的结果。", "inputFormat": "- 第一行有一个正整数 $n$，表示单元总数。  \n- 接下来一行有 $n$ 个字符。若第 $i$ 个字符是 $\\verb!(!$ 或者 $\\verb!)!$，则表示第 $i$ 个单元上绘制的括号已经被辉夜所指定；否则若第 $i$ 个字符是 $\\verb!?!$，则表示该位置尚未被确定。", "outputFormat": "- 共一行一个整数。表示所有方案数对 $998,244,353$ 取模后的结果。", "hint": "#### 样例 1 解释\n\n符合条件的方案共有三种：$\\verb!(())!$、$\\verb!()()!$ 和 $\\verb!())(!$。\n\n- 第一种方案，$\\overbrace{\\text{\\tt\\textcolor{red}{(())}\\textcolor{blue}{(())}\\texttt{...}\\textcolor{red}{(())}\\textcolor{blue}{(())}}}^{\\text{无穷个}}$ 可以找到无限长的合法括号序列。\n- 第二种方案，$\\overbrace{\\text{\\tt\\textcolor{red}{()()}\\textcolor{blue}{()()}\\texttt{...}\\textcolor{red}{()()}\\textcolor{blue}{()()}}}^{\\text{无穷个}}$ 同样可以找到无限长的合法括号序列。\n- 第三种方案，$\\text{\\tt\\textcolor{red}{())}}\\overbrace{\\text{\\tt\\textcolor{red}{(}\\textcolor{blue}{())(}\\texttt{...}\\textcolor{red}{())(}\\textcolor{blue}{())}}}^{\\text{无穷个}}\\text{\\tt\\textcolor{blue}{(}}$ 仍然可以找到无穷长的括号序列。\n\n可以证明，不存在其他方案。\n\n#### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le } & \\textbf{特殊性质} & \\textbf{分值} \\cr\\hline\n1 & 20 & - & 20 \\cr\\hline\n2 & 10^5 & \\text{A} & 10 \\cr\\hline\n3 & 10^5 & \\text{B} & 10 \\cr\\hline\n4 & 10^5 & - & 60 \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证字符串里仅出现 $\\verb!(!$ 和 $\\verb!)!$。  \n**特殊性质** $\\textbf{B}$：保证字符串里仅出现 $\\verb!?!$。\n\n对于全部数据，满足 $1\\le n\\le 10^5$，且字符串里仅出现 $\\verb!(!,\\verb!)!,\\verb!?!$ 三种字符。", "locale": "zh-CN"}}}
{"pid": "P8008", "type": "P", "difficulty": 4, "samples": [["4\n2.0000 2.0000\n2.0000 -2.0000\n-2.0000 -2.0000\n-2.0000 2.0000\n45.0000 1.0000", "22.6274169980"], ["8\n0.0000 2.5000\n1.0000 1.5000\n2.5000 1.0000\n2.0000 -1.0000\n1.0000 -2.0000\n-2.0000 -2.0000\n-2.5000 1.0000\n-1.0000 2.0000\n60.0000 0.8000", "23.1662217484"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["计算几何", "Special Judge", "O2优化", "线段相交", "差分"], "title": "「Wdsr-3」迷途竹林", "background": "迷途竹林是生长着高耸入云的、无边无际的竹子的竹林。由于特殊地势的缘故，所有竹子都向着一侧倾斜生长。由于竹子顶部的叶片交错在一起，因此即使竹子的下端已经被砍掉，仍然会因为其他竹子的相互作用而无法掉落。\n\n作为白玉楼的亭师，白玉楼的实际管家，魂魄妖梦时常需要收集一些竹子用于维修竹制家具以及竹楼。因为她拥有精湛的剑术，因此可以在瞬间砍伐一大片的竹子作为材料。当然，妖梦并不希望拥有过多的竹子。因此她会选择一个多边形区域进行采集。在那一瞬间，妖梦会用楼观剑顺着多边形的边进行砍伐。\n\n不过，由于掉落下来的竹子数量实在太多，因此妖梦无暇统计砍下来的竹子。你能帮帮她吗？", "description": "妖梦在迷途竹林里选定的竹子，可以看作在同一平面上。竹子可以看作有 $+\\infty$ 根，每相邻两根竹子间距相等，并且每根竹子的倾斜程度相同。竹子的高度可以看作是无限高。\n\n妖梦选定了一块多边形区域进行竹子的砍伐。**只有在多边形内的部分**才会被收集到。多边形共有 $n$ 条边，为了防止出现歧义，保证任意一条边都不和竹子平行；保证多边形是[简单多边形](https://baike.baidu.com/item/%E7%AE%80%E5%8D%95%E5%A4%9A%E8%BE%B9%E5%BD%A2/18891697)。\n\n我们会使用两个实数 $\\theta$ 和 $a$ 来描述这些竹子。这两个字母表示的含义可以参考下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7j0tx5xy.png)\n\n现在妖梦需要知道她砍下来的竹子的总长度，也就是求出这些竹子（图中橙色的这些线段）的长度之和。", "inputFormat": "- 第一行有一个正整数 $n$，表示多边形的边数。  \n- 接下来 $n$ 行，将会**按照顺时针顺序**给出多边形的 $n$ 个顶点的坐标，第 $i$ 个点与第 $i+1$ 个点连接 $(1\\le i<n)$，第 $n$ 个点与第 $1$ 个点连接。\n- 接着给出描述线段的参数 $\\theta$ 和 $a$。", "outputFormat": "- 共一行，一个实数，表示所求得的竹子的总长。你的答案 $\\mathit{ans}$ 被认为是正确的，当且仅当与标准答案 $\\mathit{std}$ 满足 $\\dfrac{|\\mathit{ans}-\\mathit{std}\\ |}{\\max(1.0,\\mathit{std}\\ )}\\le 10^{-6}$。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ajm42r7v.png)\n\n容易发现，竹子总长（即橘红色线段的总长度）为 $16\\sqrt 2$。\n\n#### 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/anqb86a9.png)\n\n我有一个精妙绝伦的方法解释样例 $2$，可惜这里空白太小写不下。\n\n#### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值}\\cr\\hline\n1 & 10 & \\text{A} & 30 \\cr\\hline\n2 & 10^3 & - & 20 \\cr\\hline\n3 & 10^5 & \\text{B} & 20 \\cr\\hline\n4 & 10^5 & - & 30 \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证 $\\theta\\in[80,100);|x_i|,|y_i|\\le 10$。  \n**特殊性质** $\\textbf{B}$：保证 $\\theta=90$。\n\n- 对于 $100\\%$ 的数据，保证 $3\\le n\\le 10^5;|x_i|,|y_i|\\le 10^4;\\theta\\in[1,179);a\\in[0.1,100]$。输入数据当中出现的浮点数均保留四位小数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-3」迷途竹林", "background": "迷途竹林是生长着高耸入云的、无边无际的竹子的竹林。由于特殊地势的缘故，所有竹子都向着一侧倾斜生长。由于竹子顶部的叶片交错在一起，因此即使竹子的下端已经被砍掉，仍然会因为其他竹子的相互作用而无法掉落。\n\n作为白玉楼的亭师，白玉楼的实际管家，魂魄妖梦时常需要收集一些竹子用于维修竹制家具以及竹楼。因为她拥有精湛的剑术，因此可以在瞬间砍伐一大片的竹子作为材料。当然，妖梦并不希望拥有过多的竹子。因此她会选择一个多边形区域进行采集。在那一瞬间，妖梦会用楼观剑顺着多边形的边进行砍伐。\n\n不过，由于掉落下来的竹子数量实在太多，因此妖梦无暇统计砍下来的竹子。你能帮帮她吗？", "description": "妖梦在迷途竹林里选定的竹子，可以看作在同一平面上。竹子可以看作有 $+\\infty$ 根，每相邻两根竹子间距相等，并且每根竹子的倾斜程度相同。竹子的高度可以看作是无限高。\n\n妖梦选定了一块多边形区域进行竹子的砍伐。**只有在多边形内的部分**才会被收集到。多边形共有 $n$ 条边，为了防止出现歧义，保证任意一条边都不和竹子平行；保证多边形是[简单多边形](https://baike.baidu.com/item/%E7%AE%80%E5%8D%95%E5%A4%9A%E8%BE%B9%E5%BD%A2/18891697)。\n\n我们会使用两个实数 $\\theta$ 和 $a$ 来描述这些竹子。这两个字母表示的含义可以参考下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7j0tx5xy.png)\n\n现在妖梦需要知道她砍下来的竹子的总长度，也就是求出这些竹子（图中橙色的这些线段）的长度之和。", "inputFormat": "- 第一行有一个正整数 $n$，表示多边形的边数。  \n- 接下来 $n$ 行，将会**按照顺时针顺序**给出多边形的 $n$ 个顶点的坐标，第 $i$ 个点与第 $i+1$ 个点连接 $(1\\le i<n)$，第 $n$ 个点与第 $1$ 个点连接。\n- 接着给出描述线段的参数 $\\theta$ 和 $a$。", "outputFormat": "- 共一行，一个实数，表示所求得的竹子的总长。你的答案 $\\mathit{ans}$ 被认为是正确的，当且仅当与标准答案 $\\mathit{std}$ 满足 $\\dfrac{|\\mathit{ans}-\\mathit{std}\\ |}{\\max(1.0,\\mathit{std}\\ )}\\le 10^{-6}$。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ajm42r7v.png)\n\n容易发现，竹子总长（即橘红色线段的总长度）为 $16\\sqrt 2$。\n\n#### 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/anqb86a9.png)\n\n我有一个精妙绝伦的方法解释样例 $2$，可惜这里空白太小写不下。\n\n#### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值}\\cr\\hline\n1 & 10 & \\text{A} & 30 \\cr\\hline\n2 & 10^3 & - & 20 \\cr\\hline\n3 & 10^5 & \\text{B} & 20 \\cr\\hline\n4 & 10^5 & - & 30 \\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证 $\\theta\\in[80,100);|x_i|,|y_i|\\le 10$。  \n**特殊性质** $\\textbf{B}$：保证 $\\theta=90$。\n\n- 对于 $100\\%$ 的数据，保证 $3\\le n\\le 10^5;|x_i|,|y_i|\\le 10^4;\\theta\\in[1,179);a\\in[0.1,100]$。输入数据当中出现的浮点数均保留四位小数。", "locale": "zh-CN"}}}
{"pid": "P8009", "type": "P", "difficulty": 5, "samples": [["5\n3 1 2 1 3\n1 2\n1 3\n3 4\n3 5\n", "109\n0\n18\n0\n0"], ["10\n1 1 4 5 1 4 1 9 1 9\n1 2\n1 3\n1 4\n2 5\n2 6\n5 7\n3 8\n3 9\n9 10", "972\n33\n99\n0\n2\n0\n0\n0\n10\n0"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["O2优化", "树形 DP"], "title": "「Wdsr-3」船往低处流", "background": "村纱水密是控制着圣辇船的船长。因为是一生和船相伴的船幽灵，因此对船只非常感兴趣。正因为这样的爱好，村纱有一大堆船模。\n\n由于间歇泉的喷发，间歇泉的周围出现了一个汇聚了多方水流的大水坑。不同的水流交错，形成了大大小小的水道。只需要把船模放在某个位置，它就会顺着水流流动。根据物理原理，船自然会从高处流向低处。由于水坑由四处的水汇集而成，因此水坑的中央地势最低；随着到中央距离的增加，地势不断增加。\n\n村纱发现，当她选定了两个位置放下船模后，它们会在某个水流的交汇处发生碰撞。村纱关心碰撞发生的位置。容易发现，第一个可能会产生碰撞的位置，就是在树形结构上这两个选定的点的最近公共祖先。\n\n当然了，由于间歇泉并不稳定，因此水池中央的位置可能会不断变化，地势也不断变化，但是水道并不会发生任何改变。村纱给每个交汇处标上了一个数值「危险程度」，表示两个船模在此处碰撞可能会发生的危险的大小。村纱放置船模的位置也是随机的。\n\n不过由于水坑实在是太大，水坑中央又不断变化，因此只关心船模的村纱被绕晕了。她迫切地想知道在水坑处玩船模产生的威胁，因此希望你帮她计算。", "description": "这些水道形成了一棵以 $1$ 为根的节点数为 $n$ 的树形结构 $T$。每个节点上有一个点权 $w_i$，表示它的危险程度。现做出如下定义：\n\n- **最近公共祖先**：在一棵以 $r$ 为根的有根树上，两个节点 $u,v$ 的最近公共祖先，就是这两个点的公共祖先里面，离根最远的那个，记作 $\\operatorname{lca}(r,u,v)$。\n- **子树**：树 $T$ 上，删掉节点 $u$ 与父亲相连的边后，该结点所在的子图记为子树 $T_u$。特别地，$T$ 本身可以认为是以 $1$ 为根节点的子树 $T_1$。\n- **危险值**：对于 $T_u$ 而言，它的危险值被定义为：\n\n$$\\mathrm{LCAS}(u)=\\sum_{i\\in T_u}\\sum_{j\\in T_u}\\sum_{k\\in T_u,k<j} w_{\\operatorname{lca}(i,j,k)}$$\n\n现在给出 $T$，希望你对于 $i=1,2,\\cdots n$，求出 $\\mathrm{LCAS}(i)$。", "inputFormat": "- 第一行有一个正整数 $n$，表示节点的个数。  \n- 第二行有 $n$ 个整数 $w_i$，表示每个结点的危险程度。  \n- 接下来 $n-1$ 行，每行有两个正整数 $u,v$，描述 $T$ 中的一条边。", "outputFormat": "- 共 $n$ 行 $n$ 个整数，第 $i$ 个整数表示 $\\mathrm{LCAS}(i)$ 的值对 $998,244,353$（一个大质数）取模后的结果。  ", "hint": "\n\n#### 样例 1 解释\n\n样例一当中的树如下。红色的是节点，蓝色的是点权。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f7gvtsp5.png)\n\n容易发现 $\\mathrm{LCAS}(2)=\\mathrm{LCAS}(4)=\\mathrm{LCAS}(5)=0$。这里说明如何计算 $\\mathrm{LCAS}(1)$ 和 $\\mathrm{LCAS}(3)$。首先说明 $\\mathrm{LCAS}(3)$：\n\n- 以 $3$ 为根，那么有 $\\mathrm{lca}(3,3,4)=\\mathrm{lca}(3,3,5)=\\mathrm{lca}(3,4,5)=3$，这部分的贡献是 $3\\times w_3=6$。  \n- 以 $4$ 为根，那么有 $\\mathrm{lca}(4,3,4)=\\mathrm{lca}(4,4,5)=4,\\mathrm{lca}(4,3,5)=3$，这部分的贡献是 $2\\times w_4+1\\times w_3=4$。  \n- 以 $5$ 为根，那么有 $\\mathrm{lca}(5,3,5)=\\mathrm{lca}(5,4,5)=5,\\mathrm{lca}(5,3,4)=3$，这部分的贡献是 $2\\times w_5+1\\times w_3=8$。\n\n因此，$\\mathrm{LCAS}(3)=6+4+8=18$。下面计算 $\\mathrm{LCAS}(1)$。\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{matrix}\n\\textbf{以 1 为根 }\\bm{\\mathbf{lca}(1,i,j)} & \\textbf{以 2 为根 }\\bm{\\mathbf{lca}(2,i,j)}\\cr\n\\begin{array}{c||c|c|c|c|c}\\hline\n& 1 & 2 & 3 & 4 & 5 \\cr\\hline\\hline\n1 & - & - & - & - &- \\cr\\hline\n2 & 1 & - & - & - &- \\cr\\hline\n3 & 1 & 1 & - & - &- \\cr\\hline\n4 & 1 & 1 & 3 & - &- \\cr\\hline\n5 & 1 & 1 & 3 & 3 &- \\cr\\hline\n\\end{array} &\n\\begin{array}{c||c|c|c|c|c}\\hline\n& 1 & 2 & 3 & 4 & 5 \\cr\\hline\\hline\n1 & - & - & - & - &- \\cr\\hline\n2 & 2 & - & - & - &- \\cr\\hline\n3 & 1 & 2 & - & - &- \\cr\\hline\n4 & 1 & 2 & 3 & - &- \\cr\\hline\n5 & 1 & 2 & 3 & 3 &- \\cr\\hline\n\\end{array} \\cr[50pt]\n\\textbf{以 3 为根 }\\bm{\\mathbf{lca}(3,i,j)} & \\textbf{以 4 为根 }\\bm{\\mathbf{lca}(4,i,j)}\\cr\n\\begin{array}{c||c|c|c|c|c}\\hline\n& 1 & 2 & 3 & 4 & 5 \\cr\\hline\\hline\n1 & - & - & - & - &- \\cr\\hline\n2 & 1 & - & - & - &- \\cr\\hline\n3 & 3 & 3 & - & - &- \\cr\\hline\n4 & 3 & 3 & 3 & - &- \\cr\\hline\n5 & 3 & 3 & 3 & 3 &- \\cr\\hline\n\\end{array} &\n\\begin{array}{c||c|c|c|c|c}\\hline\n& 1 & 2 & 3 & 4 & 5 \\cr\\hline\\hline\n1 & - & - & - & - &- \\cr\\hline\n2 & 1 & - & - & - &- \\cr\\hline\n3 & 3 & 3 & - & - &- \\cr\\hline\n4 & 4 & 4 & 4 & - &- \\cr\\hline\n5 & 3 & 3 & 3 & 4 &- \\cr\\hline\n\\end{array}\n\\end{matrix}\\\\[10pt]\n\\textbf{以 5 为根 }\\bm{\\mathbf{lca}(5,i,j)}\\\\\n\\begin{array}{c||c|c|c|c|c}\\hline\n& 1 & 2 & 3 & 4 & 5 \\cr\\hline\\hline\n1 & - & - & - & - &- \\cr\\hline\n2 & 1 & - & - & - &- \\cr\\hline\n3 & 3 & 3 & - & - &- \\cr\\hline\n4 & 3 & 3 & 3 & - &- \\cr\\hline\n5 & 5 & 5 & 5 & 5 &- \\cr\\hline\n\\end{array}\n$$\n\n容易发现，在上图中，$1$ 出现了 $13$ 次，$2$ 出现了 $4$ 次，$3$ 出现了 $25$ 次，$4$ 出现了 $4$ 次，$5$ 出现了 $4$ 次。因此，$\\mathrm{LCAS}(1)=3\\times 13+1\\times 4+2\\times 25+1\\times 4+3\\times 4=109$。\n\n#### 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uwm8c9bk.png)\n\n我有一个精妙绝伦的方法解释样例 $2$，可惜这里空白太小写不下。\n\n**本题输入量较大。请采用较快的读入方式。**\n\n#### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值}\\cr\\hline\n1 & 100 & - & 20 \\cr\\hline\n2 & 10^3 & - & 25 \\cr\\hline\n3 & 10^5 & \\text{A} & 10\\cr\\hline\n4 & 10^5 & \\text{B} & 10\\cr\\hline\n5 & 10^6 & - & 35\\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证第 $i$ 条边为 $u=i$，$v=i+1$。  \n**特殊性质** $\\textbf{B}$：保证第 $i$ 条边为 $u=1$，$v=i+1$。\n\n对于全部数据，保证 $1\\le n\\le 10^6$，$0\\le w_i<998,244,353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-3」船往低处流", "background": "村纱水密是控制着圣辇船的船长。因为是一生和船相伴的船幽灵，因此对船只非常感兴趣。正因为这样的爱好，村纱有一大堆船模。\n\n由于间歇泉的喷发，间歇泉的周围出现了一个汇聚了多方水流的大水坑。不同的水流交错，形成了大大小小的水道。只需要把船模放在某个位置，它就会顺着水流流动。根据物理原理，船自然会从高处流向低处。由于水坑由四处的水汇集而成，因此水坑的中央地势最低；随着到中央距离的增加，地势不断增加。\n\n村纱发现，当她选定了两个位置放下船模后，它们会在某个水流的交汇处发生碰撞。村纱关心碰撞发生的位置。容易发现，第一个可能会产生碰撞的位置，就是在树形结构上这两个选定的点的最近公共祖先。\n\n当然了，由于间歇泉并不稳定，因此水池中央的位置可能会不断变化，地势也不断变化，但是水道并不会发生任何改变。村纱给每个交汇处标上了一个数值「危险程度」，表示两个船模在此处碰撞可能会发生的危险的大小。村纱放置船模的位置也是随机的。\n\n不过由于水坑实在是太大，水坑中央又不断变化，因此只关心船模的村纱被绕晕了。她迫切地想知道在水坑处玩船模产生的威胁，因此希望你帮她计算。", "description": "这些水道形成了一棵以 $1$ 为根的节点数为 $n$ 的树形结构 $T$。每个节点上有一个点权 $w_i$，表示它的危险程度。现做出如下定义：\n\n- **最近公共祖先**：在一棵以 $r$ 为根的有根树上，两个节点 $u,v$ 的最近公共祖先，就是这两个点的公共祖先里面，离根最远的那个，记作 $\\operatorname{lca}(r,u,v)$。\n- **子树**：树 $T$ 上，删掉节点 $u$ 与父亲相连的边后，该结点所在的子图记为子树 $T_u$。特别地，$T$ 本身可以认为是以 $1$ 为根节点的子树 $T_1$。\n- **危险值**：对于 $T_u$ 而言，它的危险值被定义为：\n\n$$\\mathrm{LCAS}(u)=\\sum_{i\\in T_u}\\sum_{j\\in T_u}\\sum_{k\\in T_u,k<j} w_{\\operatorname{lca}(i,j,k)}$$\n\n现在给出 $T$，希望你对于 $i=1,2,\\cdots n$，求出 $\\mathrm{LCAS}(i)$。", "inputFormat": "- 第一行有一个正整数 $n$，表示节点的个数。  \n- 第二行有 $n$ 个整数 $w_i$，表示每个结点的危险程度。  \n- 接下来 $n-1$ 行，每行有两个正整数 $u,v$，描述 $T$ 中的一条边。", "outputFormat": "- 共 $n$ 行 $n$ 个整数，第 $i$ 个整数表示 $\\mathrm{LCAS}(i)$ 的值对 $998,244,353$（一个大质数）取模后的结果。  ", "hint": "\n\n#### 样例 1 解释\n\n样例一当中的树如下。红色的是节点，蓝色的是点权。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f7gvtsp5.png)\n\n容易发现 $\\mathrm{LCAS}(2)=\\mathrm{LCAS}(4)=\\mathrm{LCAS}(5)=0$。这里说明如何计算 $\\mathrm{LCAS}(1)$ 和 $\\mathrm{LCAS}(3)$。首先说明 $\\mathrm{LCAS}(3)$：\n\n- 以 $3$ 为根，那么有 $\\mathrm{lca}(3,3,4)=\\mathrm{lca}(3,3,5)=\\mathrm{lca}(3,4,5)=3$，这部分的贡献是 $3\\times w_3=6$。  \n- 以 $4$ 为根，那么有 $\\mathrm{lca}(4,3,4)=\\mathrm{lca}(4,4,5)=4,\\mathrm{lca}(4,3,5)=3$，这部分的贡献是 $2\\times w_4+1\\times w_3=4$。  \n- 以 $5$ 为根，那么有 $\\mathrm{lca}(5,3,5)=\\mathrm{lca}(5,4,5)=5,\\mathrm{lca}(5,3,4)=3$，这部分的贡献是 $2\\times w_5+1\\times w_3=8$。\n\n因此，$\\mathrm{LCAS}(3)=6+4+8=18$。下面计算 $\\mathrm{LCAS}(1)$。\n\n$$\n\\def\\arraystretch{1.2}\n\\begin{matrix}\n\\textbf{以 1 为根 }\\bm{\\mathbf{lca}(1,i,j)} & \\textbf{以 2 为根 }\\bm{\\mathbf{lca}(2,i,j)}\\cr\n\\begin{array}{c||c|c|c|c|c}\\hline\n& 1 & 2 & 3 & 4 & 5 \\cr\\hline\\hline\n1 & - & - & - & - &- \\cr\\hline\n2 & 1 & - & - & - &- \\cr\\hline\n3 & 1 & 1 & - & - &- \\cr\\hline\n4 & 1 & 1 & 3 & - &- \\cr\\hline\n5 & 1 & 1 & 3 & 3 &- \\cr\\hline\n\\end{array} &\n\\begin{array}{c||c|c|c|c|c}\\hline\n& 1 & 2 & 3 & 4 & 5 \\cr\\hline\\hline\n1 & - & - & - & - &- \\cr\\hline\n2 & 2 & - & - & - &- \\cr\\hline\n3 & 1 & 2 & - & - &- \\cr\\hline\n4 & 1 & 2 & 3 & - &- \\cr\\hline\n5 & 1 & 2 & 3 & 3 &- \\cr\\hline\n\\end{array} \\cr[50pt]\n\\textbf{以 3 为根 }\\bm{\\mathbf{lca}(3,i,j)} & \\textbf{以 4 为根 }\\bm{\\mathbf{lca}(4,i,j)}\\cr\n\\begin{array}{c||c|c|c|c|c}\\hline\n& 1 & 2 & 3 & 4 & 5 \\cr\\hline\\hline\n1 & - & - & - & - &- \\cr\\hline\n2 & 1 & - & - & - &- \\cr\\hline\n3 & 3 & 3 & - & - &- \\cr\\hline\n4 & 3 & 3 & 3 & - &- \\cr\\hline\n5 & 3 & 3 & 3 & 3 &- \\cr\\hline\n\\end{array} &\n\\begin{array}{c||c|c|c|c|c}\\hline\n& 1 & 2 & 3 & 4 & 5 \\cr\\hline\\hline\n1 & - & - & - & - &- \\cr\\hline\n2 & 1 & - & - & - &- \\cr\\hline\n3 & 3 & 3 & - & - &- \\cr\\hline\n4 & 4 & 4 & 4 & - &- \\cr\\hline\n5 & 3 & 3 & 3 & 4 &- \\cr\\hline\n\\end{array}\n\\end{matrix}\\\\[10pt]\n\\textbf{以 5 为根 }\\bm{\\mathbf{lca}(5,i,j)}\\\\\n\\begin{array}{c||c|c|c|c|c}\\hline\n& 1 & 2 & 3 & 4 & 5 \\cr\\hline\\hline\n1 & - & - & - & - &- \\cr\\hline\n2 & 1 & - & - & - &- \\cr\\hline\n3 & 3 & 3 & - & - &- \\cr\\hline\n4 & 3 & 3 & 3 & - &- \\cr\\hline\n5 & 5 & 5 & 5 & 5 &- \\cr\\hline\n\\end{array}\n$$\n\n容易发现，在上图中，$1$ 出现了 $13$ 次，$2$ 出现了 $4$ 次，$3$ 出现了 $25$ 次，$4$ 出现了 $4$ 次，$5$ 出现了 $4$ 次。因此，$\\mathrm{LCAS}(1)=3\\times 13+1\\times 4+2\\times 25+1\\times 4+3\\times 4=109$。\n\n#### 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uwm8c9bk.png)\n\n我有一个精妙绝伦的方法解释样例 $2$，可惜这里空白太小写不下。\n\n**本题输入量较大。请采用较快的读入方式。**\n\n#### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n\\le} & \\textbf{特殊性质} & \\textbf{分值}\\cr\\hline\n1 & 100 & - & 20 \\cr\\hline\n2 & 10^3 & - & 25 \\cr\\hline\n3 & 10^5 & \\text{A} & 10\\cr\\hline\n4 & 10^5 & \\text{B} & 10\\cr\\hline\n5 & 10^6 & - & 35\\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证第 $i$ 条边为 $u=i$，$v=i+1$。  \n**特殊性质** $\\textbf{B}$：保证第 $i$ 条边为 $u=1$，$v=i+1$。\n\n对于全部数据，保证 $1\\le n\\le 10^6$，$0\\le w_i<998,244,353$。", "locale": "zh-CN"}}}
{"pid": "P8010", "type": "P", "difficulty": 5, "samples": [["6 3\n1 1 4 5 1 4\n2 3 5\n1 2 5\n2 3 5", "0\n1"], ["10 6\n1 3 5 7 8 12 14 15 17 18\n2 5 9\n1 3 10\n2 4 5\n1 1 10\n2 4 6\n2 1 10", "0\n1\n3\n0"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["并查集", "O2优化"], "title": "「Wdsr-3」令人感伤的红雨", "background": "\n\n秋静叶是在秋季掌管落叶的神明。在秋季即将迎来落幕之时，因她的力量使然，山里会变得火红一片。同时，将红叶变为落叶也是她工作的一环。\n\n秋穰子是在秋季掌管丰收的神明。与秋静叶的职责相反，她掌管着秋天果实的成熟、秋粮的收获。\n\n交织着快乐与忧愁的秋天，怎能让人不有感而发呢？", "description": "秋穰子和秋静叶是掌管秋天的神灵，因而控制着田地的收成。具体而言，有 $n$ 块田依次排列，第 $i$ 块田的丰收程度为 $a_i$。秋之姐妹会据此得出一年的年成。\n\n在综合考察了各方面因素后，秋之姐妹得出了收获第 $l$ 块至第 $r$ 块田地可以获得的作物总量 $\\Omega(l,r)$。具体定义如下：\n\n$$\n\\begin{aligned}\n\\Alpha(l,r)&=\\max_{i=l}^r\\{i\\times[a_i=\\max_{j=l}^r\\{a_j\\}]\\}\\cr\n\\Beta(l,r)&=\\max_{i=l}^r\\{\\min_{j=1}^i\\{\\Alpha(j,i)\\}\\}-\\min_{i=l}^r\\{\\max_{j=1}^i\\{\\Alpha(j,i)\\}\\}\\cr\n\\Omega(l,r)&=\\min_{i=l}^r\\{\\min_{j=i}^r\\{|\\Beta(i,j)|\\}\\}\n\\end{aligned}$$\n\n在**提示说明**部分有相关符号的解释。\n\n---\n\n由于相关因素的影响，田地的丰收程度会发生变化。因此秋之姐妹会对 $a$ 进行 $q$ 次操作：\n\n1. 形如 $\\colorbox{f0f0f0}{\\verb!1 x y!}$，表示让 $a_1,a_{2},a_{3},\\cdots ,a_x$ **分别加上** $y$。\n2. 形如 $\\colorbox{f0f0f0}{\\verb!2 l r!}$，表示询问 $\\Omega(l,r)$ 的值。", "inputFormat": "- 第一行有两个正整数 $n,q$，分别表示田地总数、操作次数。  \n- 接下来一行有 $n$ 个整数，表示每块田地的丰收程度。  \n- 接下来 $q$ 行，第一个数字 $op$ 表示该操作的种类。  \n  - 如果 $op=1$，那么接下来会有两个整数 $x,y$，含义如题意所示。  \n  - 如果 $op=2$，那么接下来会有两个正整数 $l,r$，含义如题意所示。", "outputFormat": "- 输出若干行。对于每一个操作 $2$，输出对应的结果。", "hint": "样例 $3$ 见下发的附件 $\\textbf{\\textit{sequence3.in}}/\\textbf{\\textit{sequence3.ans}}$。\n\n#### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n,q\\le} & \\textbf{特殊性质} & \\textbf{分值}\\cr\\hline\n1 & 100 & - & 10\\cr\\hline\n2 & 5\\times 10^3 & - &15\\cr\\hline\n3 & 10^5 & \\text{A} &10\\cr\\hline\n4 & 10^5 & \\text{B} &5\\cr\\hline\n5 & 10^5 & - &30\\cr\\hline\n6 & 6\\times 10^6 & - & 30\\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证对于任意的 $i\\in[1,n-1]$，都有 $a_i<a_{i+1}$。  \n**特殊性质** $\\textbf{B}$：保证没有操作 $1$。\n\n对于全部数据，保证 $1 \\leq n,q \\leq 6\\times10^6$，$a_i,y_i\\in[0,10^9]$，$1\\le x_i\\le n$，$1\\le l_i\\le r_i \\le n$。\n\n#### 符号解释\n\n- $[P]$ 是艾弗森括号，其中 $P$ 是一个条件。如果 $P$ 为真，则该式子的值为 $1$；否则为 $0$。也就是说，  \n$$[P]=\\begin{cases}1 & \\text{$P$ 为真}\\cr 0 & \\text{$P$ 为假}\\end{cases}$$  \n- $\\min\\limits_{i=l}^r\\{P\\}$ 表示当 $i$ 取 $l,l+1,l+2,\\cdots,r$ 时，表达式 $P$ 的取值的最小值；同理定义了 $\\max\\limits_{i=l}^r\\{P\\}$。\n\n#### 提示\n\n本题输入输出量较大，请注意常数因子的影响。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-3」令人感伤的红雨", "background": "\n\n秋静叶是在秋季掌管落叶的神明。在秋季即将迎来落幕之时，因她的力量使然，山里会变得火红一片。同时，将红叶变为落叶也是她工作的一环。\n\n秋穰子是在秋季掌管丰收的神明。与秋静叶的职责相反，她掌管着秋天果实的成熟、秋粮的收获。\n\n交织着快乐与忧愁的秋天，怎能让人不有感而发呢？", "description": "秋穰子和秋静叶是掌管秋天的神灵，因而控制着田地的收成。具体而言，有 $n$ 块田依次排列，第 $i$ 块田的丰收程度为 $a_i$。秋之姐妹会据此得出一年的年成。\n\n在综合考察了各方面因素后，秋之姐妹得出了收获第 $l$ 块至第 $r$ 块田地可以获得的作物总量 $\\Omega(l,r)$。具体定义如下：\n\n$$\n\\begin{aligned}\n\\Alpha(l,r)&=\\max_{i=l}^r\\{i\\times[a_i=\\max_{j=l}^r\\{a_j\\}]\\}\\cr\n\\Beta(l,r)&=\\max_{i=l}^r\\{\\min_{j=1}^i\\{\\Alpha(j,i)\\}\\}-\\min_{i=l}^r\\{\\max_{j=1}^i\\{\\Alpha(j,i)\\}\\}\\cr\n\\Omega(l,r)&=\\min_{i=l}^r\\{\\min_{j=i}^r\\{|\\Beta(i,j)|\\}\\}\n\\end{aligned}$$\n\n在**提示说明**部分有相关符号的解释。\n\n---\n\n由于相关因素的影响，田地的丰收程度会发生变化。因此秋之姐妹会对 $a$ 进行 $q$ 次操作：\n\n1. 形如 $\\colorbox{f0f0f0}{\\verb!1 x y!}$，表示让 $a_1,a_{2},a_{3},\\cdots ,a_x$ **分别加上** $y$。\n2. 形如 $\\colorbox{f0f0f0}{\\verb!2 l r!}$，表示询问 $\\Omega(l,r)$ 的值。", "inputFormat": "- 第一行有两个正整数 $n,q$，分别表示田地总数、操作次数。  \n- 接下来一行有 $n$ 个整数，表示每块田地的丰收程度。  \n- 接下来 $q$ 行，第一个数字 $op$ 表示该操作的种类。  \n  - 如果 $op=1$，那么接下来会有两个整数 $x,y$，含义如题意所示。  \n  - 如果 $op=2$，那么接下来会有两个正整数 $l,r$，含义如题意所示。", "outputFormat": "- 输出若干行。对于每一个操作 $2$，输出对应的结果。", "hint": "样例 $3$ 见下发的附件 $\\textbf{\\textit{sequence3.in}}/\\textbf{\\textit{sequence3.ans}}$。\n\n#### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n,q\\le} & \\textbf{特殊性质} & \\textbf{分值}\\cr\\hline\n1 & 100 & - & 10\\cr\\hline\n2 & 5\\times 10^3 & - &15\\cr\\hline\n3 & 10^5 & \\text{A} &10\\cr\\hline\n4 & 10^5 & \\text{B} &5\\cr\\hline\n5 & 10^5 & - &30\\cr\\hline\n6 & 6\\times 10^6 & - & 30\\cr\\hline\n\\end{array}\n$$\n\n**特殊性质** $\\textbf{A}$：保证对于任意的 $i\\in[1,n-1]$，都有 $a_i<a_{i+1}$。  \n**特殊性质** $\\textbf{B}$：保证没有操作 $1$。\n\n对于全部数据，保证 $1 \\leq n,q \\leq 6\\times10^6$，$a_i,y_i\\in[0,10^9]$，$1\\le x_i\\le n$，$1\\le l_i\\le r_i \\le n$。\n\n#### 符号解释\n\n- $[P]$ 是艾弗森括号，其中 $P$ 是一个条件。如果 $P$ 为真，则该式子的值为 $1$；否则为 $0$。也就是说，  \n$$[P]=\\begin{cases}1 & \\text{$P$ 为真}\\cr 0 & \\text{$P$ 为假}\\end{cases}$$  \n- $\\min\\limits_{i=l}^r\\{P\\}$ 表示当 $i$ 取 $l,l+1,l+2,\\cdots,r$ 时，表达式 $P$ 的取值的最小值；同理定义了 $\\max\\limits_{i=l}^r\\{P\\}$。\n\n#### 提示\n\n本题输入输出量较大，请注意常数因子的影响。", "locale": "zh-CN"}}}
{"pid": "P8011", "type": "P", "difficulty": 7, "samples": [["2 2 2 1\n1 1\n1 1\n2 2 2\n1 1\n1 1", "1\n500000005"], ["5 5 5 1\n1 4 2 3 3\n3 1 1 4\n3 5 1 4\n4 1 4 1 4\n2 5 3\n1 5\n9 9 8 2 4\n4 3 5 3 2\n1 4 7 4 8\n3 6 4 7 1\n1 4 5 1 4", "250000002\n273809526\n931547626\n97163867\n377852186"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "O2优化", "AC 自动机"], "title": "「Wdsr-3」蓬莱药局（gene）", "background": "八意永琳是居住在永远亭的医生。她有着精湛的医术以及大量的医学知识，因而可以制造出各种的药物。\n\n尽管如此，八意永琳常常为新的药物进行试验（包括但不限于对铃仙下手）。不过，八意永琳也开始使用被称为「培养基」一类的东西，培养被称为「细菌」的微小妖怪作为实验材料了。\n\n细菌的分裂能力很强。每一次分裂，细菌的数目都能翻倍。更有意思的是，产生的细菌的子代不一定与亲代相同。换言之，子代细菌会发生变异，从而为永琳的药物实验提供了大量的材料。当然了，细菌太多也是一件苦恼的事情；如果培养基里长满了四处活跃的细菌，那么永琳将不得不采取措施，消灭它们。\n\n在执行一次新的培养之前，永琳希望对细菌上的基因进行一些研究；由于永琳忙着去制药，因此这个任务就交给你了。", "description": "为了更方便地描述题意，我们先给出以下定义：\n\n- **子段**：我们定义数组 $B$ 是数组 $A$ 从 $P$ 位置开始的子段，当且仅当 $|A| + P - 1 \\le |B|$ 且 $B_1=A_P,B_2=A_{P+1},\\dots,B_{|B|}=A_{P+{|B|}-1}$．\n- **作为子段的出现次数**：我们定义数组 $B$ 在数组 $A$ 中作为子段的出现次数为：初始设次数为 $0$．枚举每个不同的 $P$，若数组 $B$ 是数组 $A$ 从 $P$ 位置开始的子段，则将次数加一．最后得到的值即为数组 $B$ 在数组 $A$ 中作为子段的出现次数．\n- **基因数组**：每个细菌都有一个「基因数组」．它是一个值域为 $[1,k]$ 的整数数组．\n- **目标数组**：「目标数组」是一个值域为 $[1,k]$ 的整数数组．在本题中，我们会给定 $m$ 个不同的「目标数组」，第 $i$ 个数组为 $g_i$．\n- **目标细菌**：对于一个细菌，记它的「基因数组」为 $X$．我们统计每个「目标数组」$g_1, g_2, \\dots, g_m$ 分别在 $X$ 中「作为子段的出现次数」，并将它们求和．若得到的和为 **奇数**，则我们称这个细菌为一个「目标细菌」．\n- **基因突变**：「基因突变」是作用于一个细菌的变换．给定一个 $k \\times k$ 的突变概率矩阵 $p$．记这个细菌的「基因数组」为 $X$．对于 $x$ 中的每个元素 $X_i$，$X_i$ 会以 $p_{X_i,j}$ 的概率替换为 $j$（$1 \\le j \\le k$）．根据此定义，显然有 $\\forall i \\in [1,k], \\sum_{i=j}^k p_{i,j}=1$．\n\n一次实验的过程如下：\n\n- 首先在一个空的培养皿中放入一个指定的细菌．\n- 在接下来的每分钟，现有的每个细菌会分裂成两个细菌，每个细菌的「基因数组」与原细菌完全相同．分裂之后，每个基因都会进行一次「基因突变」．\n- $t$ 分钟后，统计培养皿中「目标细菌」的数量，并结束实验．\n\n现在给定一个长度为 $n$ 的「基因数组」$s$．对于 $s$ 的每个前缀数组 $s[1,1],s[1,2],\\dots,s[1,n]$，假设该数组是实验开始时放入的细菌的「基因数组」，请你求出实验结束时得到的「目标细菌」的数量的期望，对 $10^9+7$ 取模．\n", "inputFormat": "- 第一行输入四个整数，$n,m,k,t$．\n- 第二行输入 $n$ 个整数，描述数组 $s$．\n- 接下来输入 $m$ 行．每行第一个整数 $|g_i|$ 表示「目标数组」$g_i$ 的长度．接下来 $|g_i|$ 个整数描述「目标数组」$g_i$．\n- 由于 $p$ 矩阵为实数矩阵，输入不方便，因此我们采用另一种方式输入 $p$ 矩阵．具体而言，接下来输入 $k$ 行，每行包含 $k$ 个整数，描述一个 $k \\times k$ 的矩阵 $p'$．则有\n\n$$\np_{i,j}=\\frac{p'_{i,j}}{\\sum_{l=1}^k p'_{i,l}}.\n$$\n", "outputFormat": "- 输出 $n$ 行，每行一个整数．表示假设以 $s[1,i]$ 为初始细菌的「基因数组」，实验结束后能得到的「目标细菌」的数量的期望，对 $10^9+7$ 取模．", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n- 当前缀长度为 $1$ 时，初始细菌的「基因数组」为 $\\{1\\}$．分裂一次后变为 $\\{1\\}$ 和 $\\{2\\}$ 的概率均为 $\\frac 1 2$．若变为 $\\{1\\}$，则是「目标细菌」；若变为 $\\{2\\}$，则不是「目标细菌」．分裂一次后培养皿中有 $2$ 个细菌，故「目标细菌」总数的期望为 $\\frac 1 2\\times 2=1$．  \n![](https://cdn.luogu.com.cn/upload/image_hosting/ytz7qxkl.png)\n- 当前缀长度为 $2$ 时，初始细菌的「基因数组」为 $\\{1, 1\\}$．分裂一次后的细菌变为 $\\{1, 1\\}, \\{1, 2\\}, \\{2, 1\\}, \\{2, 2\\}$ 的概率都为 $\\frac 1 4$．其中 $\\{2, 2\\},\\{1,2\\},\\{2,1\\}$ 均为「目标细菌」，$\\{1,1\\}$ 不是「目标细菌」（因为出现了两次子串 $\\{1\\}$）．即分裂后的「目标细菌」的总数的期望为 $\\frac 3 4$．分裂一次后培养皿中有 $2$ 个细菌．即最后「目标细菌」数量之和的期望为 $\\frac 3 4\\times 2=\\frac 3 2$．  \n![](https://cdn.luogu.com.cn/upload/image_hosting/cjx85fuk.png)\n\n### 数据范围\n\n**本题采用捆绑测试，且不存在一个 Subtask 包含其他所有 Subtask 的数据范围和限制．**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|c|} \\hline\n\\textbf{Subtask} & \\textbf{分值} &\\bm{n\\le} & \\bm{m\\le} &\\bm{k\\le}&\\bm{t\\le} & \\bm {|g_i|\\le} &  \\textbf{特殊性质} \\cr \\hline\n1 & 1 & 10^5 & 10^5 & 100 & 0 & 10^5 \\cr \\hline\n2 & 14 & 5 & 5 & 5 & 1 & 5 \\cr \\hline\n3 & 15 & 10^3 & 1 & 10^3 & 1 & 100 & \\text{A} \\cr \\hline\n4 & 30 & 5\\times 10^4 & 5 & 10 & 1 & 50 & \\text{B} \\cr \\hline\n5 & 20 & 5\\times 10^4 & 5 & 10 & 10^3 & 50 \\cr \\hline\n6 & 20 & 10^3 & 10^4 & 10 & 10^3 &  10^4 & \\text{C}\\cr \\hline\n\\end{array}\n$$\n\n- **特殊性质** $\\textbf{A}$：对于 $i=1,2,\\dots,m$，保证 $g_{i}$ 中所有整数均为 $1$\n- **特殊性质** $\\textbf{B}$：对于 $i=1,2,\\dots, k$，$j=1,2,\\dots,k$，保证 $p'_{i,j}=1$ \n- **特殊性质** $\\textbf{C}$：保证 $\\sum_{i=1}^m |g_i|\\le 10^4$\n\n对于所有数据，保证 $1\\le n,m,\\sum|g_i| \\le 10^5$．$0\\le t\\le 10^3$，$0\\le p'_{i,j} \\le 10^9$．且 $p'$ 矩阵不会出现某一行的和在模 $10^9+7$ 意义下为 $0$．\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-3」蓬莱药局（gene）", "background": "八意永琳是居住在永远亭的医生。她有着精湛的医术以及大量的医学知识，因而可以制造出各种的药物。\n\n尽管如此，八意永琳常常为新的药物进行试验（包括但不限于对铃仙下手）。不过，八意永琳也开始使用被称为「培养基」一类的东西，培养被称为「细菌」的微小妖怪作为实验材料了。\n\n细菌的分裂能力很强。每一次分裂，细菌的数目都能翻倍。更有意思的是，产生的细菌的子代不一定与亲代相同。换言之，子代细菌会发生变异，从而为永琳的药物实验提供了大量的材料。当然了，细菌太多也是一件苦恼的事情；如果培养基里长满了四处活跃的细菌，那么永琳将不得不采取措施，消灭它们。\n\n在执行一次新的培养之前，永琳希望对细菌上的基因进行一些研究；由于永琳忙着去制药，因此这个任务就交给你了。", "description": "为了更方便地描述题意，我们先给出以下定义：\n\n- **子段**：我们定义数组 $B$ 是数组 $A$ 从 $P$ 位置开始的子段，当且仅当 $|A| + P - 1 \\le |B|$ 且 $B_1=A_P,B_2=A_{P+1},\\dots,B_{|B|}=A_{P+{|B|}-1}$．\n- **作为子段的出现次数**：我们定义数组 $B$ 在数组 $A$ 中作为子段的出现次数为：初始设次数为 $0$．枚举每个不同的 $P$，若数组 $B$ 是数组 $A$ 从 $P$ 位置开始的子段，则将次数加一．最后得到的值即为数组 $B$ 在数组 $A$ 中作为子段的出现次数．\n- **基因数组**：每个细菌都有一个「基因数组」．它是一个值域为 $[1,k]$ 的整数数组．\n- **目标数组**：「目标数组」是一个值域为 $[1,k]$ 的整数数组．在本题中，我们会给定 $m$ 个不同的「目标数组」，第 $i$ 个数组为 $g_i$．\n- **目标细菌**：对于一个细菌，记它的「基因数组」为 $X$．我们统计每个「目标数组」$g_1, g_2, \\dots, g_m$ 分别在 $X$ 中「作为子段的出现次数」，并将它们求和．若得到的和为 **奇数**，则我们称这个细菌为一个「目标细菌」．\n- **基因突变**：「基因突变」是作用于一个细菌的变换．给定一个 $k \\times k$ 的突变概率矩阵 $p$．记这个细菌的「基因数组」为 $X$．对于 $x$ 中的每个元素 $X_i$，$X_i$ 会以 $p_{X_i,j}$ 的概率替换为 $j$（$1 \\le j \\le k$）．根据此定义，显然有 $\\forall i \\in [1,k], \\sum_{i=j}^k p_{i,j}=1$．\n\n一次实验的过程如下：\n\n- 首先在一个空的培养皿中放入一个指定的细菌．\n- 在接下来的每分钟，现有的每个细菌会分裂成两个细菌，每个细菌的「基因数组」与原细菌完全相同．分裂之后，每个基因都会进行一次「基因突变」．\n- $t$ 分钟后，统计培养皿中「目标细菌」的数量，并结束实验．\n\n现在给定一个长度为 $n$ 的「基因数组」$s$．对于 $s$ 的每个前缀数组 $s[1,1],s[1,2],\\dots,s[1,n]$，假设该数组是实验开始时放入的细菌的「基因数组」，请你求出实验结束时得到的「目标细菌」的数量的期望，对 $10^9+7$ 取模．\n", "inputFormat": "- 第一行输入四个整数，$n,m,k,t$．\n- 第二行输入 $n$ 个整数，描述数组 $s$．\n- 接下来输入 $m$ 行．每行第一个整数 $|g_i|$ 表示「目标数组」$g_i$ 的长度．接下来 $|g_i|$ 个整数描述「目标数组」$g_i$．\n- 由于 $p$ 矩阵为实数矩阵，输入不方便，因此我们采用另一种方式输入 $p$ 矩阵．具体而言，接下来输入 $k$ 行，每行包含 $k$ 个整数，描述一个 $k \\times k$ 的矩阵 $p'$．则有\n\n$$\np_{i,j}=\\frac{p'_{i,j}}{\\sum_{l=1}^k p'_{i,l}}.\n$$\n", "outputFormat": "- 输出 $n$ 行，每行一个整数．表示假设以 $s[1,i]$ 为初始细菌的「基因数组」，实验结束后能得到的「目标细菌」的数量的期望，对 $10^9+7$ 取模．", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n- 当前缀长度为 $1$ 时，初始细菌的「基因数组」为 $\\{1\\}$．分裂一次后变为 $\\{1\\}$ 和 $\\{2\\}$ 的概率均为 $\\frac 1 2$．若变为 $\\{1\\}$，则是「目标细菌」；若变为 $\\{2\\}$，则不是「目标细菌」．分裂一次后培养皿中有 $2$ 个细菌，故「目标细菌」总数的期望为 $\\frac 1 2\\times 2=1$．  \n![](https://cdn.luogu.com.cn/upload/image_hosting/ytz7qxkl.png)\n- 当前缀长度为 $2$ 时，初始细菌的「基因数组」为 $\\{1, 1\\}$．分裂一次后的细菌变为 $\\{1, 1\\}, \\{1, 2\\}, \\{2, 1\\}, \\{2, 2\\}$ 的概率都为 $\\frac 1 4$．其中 $\\{2, 2\\},\\{1,2\\},\\{2,1\\}$ 均为「目标细菌」，$\\{1,1\\}$ 不是「目标细菌」（因为出现了两次子串 $\\{1\\}$）．即分裂后的「目标细菌」的总数的期望为 $\\frac 3 4$．分裂一次后培养皿中有 $2$ 个细菌．即最后「目标细菌」数量之和的期望为 $\\frac 3 4\\times 2=\\frac 3 2$．  \n![](https://cdn.luogu.com.cn/upload/image_hosting/cjx85fuk.png)\n\n### 数据范围\n\n**本题采用捆绑测试，且不存在一个 Subtask 包含其他所有 Subtask 的数据范围和限制．**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|c|} \\hline\n\\textbf{Subtask} & \\textbf{分值} &\\bm{n\\le} & \\bm{m\\le} &\\bm{k\\le}&\\bm{t\\le} & \\bm {|g_i|\\le} &  \\textbf{特殊性质} \\cr \\hline\n1 & 1 & 10^5 & 10^5 & 100 & 0 & 10^5 \\cr \\hline\n2 & 14 & 5 & 5 & 5 & 1 & 5 \\cr \\hline\n3 & 15 & 10^3 & 1 & 10^3 & 1 & 100 & \\text{A} \\cr \\hline\n4 & 30 & 5\\times 10^4 & 5 & 10 & 1 & 50 & \\text{B} \\cr \\hline\n5 & 20 & 5\\times 10^4 & 5 & 10 & 10^3 & 50 \\cr \\hline\n6 & 20 & 10^3 & 10^4 & 10 & 10^3 &  10^4 & \\text{C}\\cr \\hline\n\\end{array}\n$$\n\n- **特殊性质** $\\textbf{A}$：对于 $i=1,2,\\dots,m$，保证 $g_{i}$ 中所有整数均为 $1$\n- **特殊性质** $\\textbf{B}$：对于 $i=1,2,\\dots, k$，$j=1,2,\\dots,k$，保证 $p'_{i,j}=1$ \n- **特殊性质** $\\textbf{C}$：保证 $\\sum_{i=1}^m |g_i|\\le 10^4$\n\n对于所有数据，保证 $1\\le n,m,\\sum|g_i| \\le 10^5$．$0\\le t\\le 10^3$，$0\\le p'_{i,j} \\le 10^9$．且 $p'$ 矩阵不会出现某一行的和在模 $10^9+7$ 意义下为 $0$．\n", "locale": "zh-CN"}}}
{"pid": "P8012", "type": "P", "difficulty": 1, "samples": [["2\n5", "9 10"], ["3\n5", "7 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2013", "COCI（克罗地亚）"], "title": "[COCI 2013/2014 #4] NASLJEDSTVO", "background": "", "description": "有若干个金币，一个人将这堆金币尽量 $N$ 等分并拿走了一份，剩下 $O$ 个金币。\n\n所谓『尽量 $N$ 等分』，是指将这堆金币分成 $N$ 堆，每堆所含的金币数是整数，且每两对金币的数量相差不超过 $1$。\n\n我们约定这个人拿走的那一份金币是比较少的一份。\n\n请你分别求出这堆金币原来最少有多少个和最多有多少个。", "inputFormat": "第一行，一个正整数 $N$，表示分成了 $N$ 等份；\n\n第二行，一个正整数 $O$，表示拿走 $N$ 份中的 $1$ 份后剩下 $O$ 个金币。", "outputFormat": "一行，两个正整数，分别表示这堆金币原来最少有多少个和最多有多少个。", "hint": "**【样例解释 #1】**\n\n这堆金币可能原来有 $9$ 个，这个人可能将其分成 $4+5$ 个，自己拿走 $4$ 个；\n\n这堆金币可能原来有 $10$ 个，这个人可能将其分成 $5+5$ 个，自己拿走 $5$ 个。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$2\\le N\\le 15$，$N\\le O\\le 100$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $50$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T1 NASLJEDSTVO**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #4] NASLJEDSTVO", "background": "", "description": "有若干个金币，一个人将这堆金币尽量 $N$ 等分并拿走了一份，剩下 $O$ 个金币。\n\n所谓『尽量 $N$ 等分』，是指将这堆金币分成 $N$ 堆，每堆所含的金币数是整数，且每两对金币的数量相差不超过 $1$。\n\n我们约定这个人拿走的那一份金币是比较少的一份。\n\n请你分别求出这堆金币原来最少有多少个和最多有多少个。", "inputFormat": "第一行，一个正整数 $N$，表示分成了 $N$ 等份；\n\n第二行，一个正整数 $O$，表示拿走 $N$ 份中的 $1$ 份后剩下 $O$ 个金币。", "outputFormat": "一行，两个正整数，分别表示这堆金币原来最少有多少个和最多有多少个。", "hint": "**【样例解释 #1】**\n\n这堆金币可能原来有 $9$ 个，这个人可能将其分成 $4+5$ 个，自己拿走 $4$ 个；\n\n这堆金币可能原来有 $10$ 个，这个人可能将其分成 $5+5$ 个，自己拿走 $5$ 个。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$2\\le N\\le 15$，$N\\le O\\le 100$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $50$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T1 NASLJEDSTVO**_。", "locale": "zh-CN"}}}
{"pid": "P8013", "type": "P", "difficulty": 2, "samples": [["GTA\nCAT\n5 7 1 3 ", "10"], ["TATA\nCACA\n3 0 3 0", "3"], ["TCGCGAG\nTGCAG\n10 10 15 15 ", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2013", "COCI（克罗地亚）"], "title": "[COCI 2013/2014 #4] GMO", "background": "", "description": "给定一个由 `A` `C` `G` `T` 组成的字符串，你需要在这个字符串中插入若干个 `A` `C` `G` `T`，使字符串中包含目标字符串，并使花费的代价最少。\n\n其中插入不同的字符花费的代价也是不同的。", "inputFormat": "第一行，一个字符串 $N$，代表原字符串；\n\n第二行，一个字符串 $M$，代表目标字符串；\n\n第三行，四个正整数 $a,c,g,v$，分别表示插入一个 `A` 花费的代价，插入一个 `C` 花费的代价，插入一个 `G` 花费的代价，插入一个 `T` 花费的代价。", "outputFormat": "一行，一个正整数，表示最小花费。", "hint": "**【样例解释 #1】**\n\n可能的方法中有：`GTCAT`，花费 $10$，可以证明是最小花费。\n\n**【数据范围】**\n\n对于 $80\\%$ 的数据，$1\\le |N|,|M|\\le 2000$；\n\n对于 $100\\%$ 的数据，$1\\le |N|\\le 10000$，$1\\le |M|\\le 5000$，$0\\le a,c,g,v\\le 1000$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $80$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T2 GMO**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #4] GMO", "background": "", "description": "给定一个由 `A` `C` `G` `T` 组成的字符串，你需要在这个字符串中插入若干个 `A` `C` `G` `T`，使字符串中包含目标字符串，并使花费的代价最少。\n\n其中插入不同的字符花费的代价也是不同的。", "inputFormat": "第一行，一个字符串 $N$，代表原字符串；\n\n第二行，一个字符串 $M$，代表目标字符串；\n\n第三行，四个正整数 $a,c,g,v$，分别表示插入一个 `A` 花费的代价，插入一个 `C` 花费的代价，插入一个 `G` 花费的代价，插入一个 `T` 花费的代价。", "outputFormat": "一行，一个正整数，表示最小花费。", "hint": "**【样例解释 #1】**\n\n可能的方法中有：`GTCAT`，花费 $10$，可以证明是最小花费。\n\n**【数据范围】**\n\n对于 $80\\%$ 的数据，$1\\le |N|,|M|\\le 2000$；\n\n对于 $100\\%$ 的数据，$1\\le |N|\\le 10000$，$1\\le |M|\\le 5000$，$0\\le a,c,g,v\\le 1000$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $80$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T2 GMO**_。", "locale": "zh-CN"}}}
{"pid": "P8014", "type": "P", "difficulty": 4, "samples": [["5\n5\n1 2\n2 3\n3 4\n4 5\n5 1", "5"], ["6\n8\n1 2\n3 4\n5 6\n1 3\n1 6\n4 5\n2 4\n2 6\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2013", "COCI（克罗地亚）"], "title": "[COCI 2013/2014 #4] SUMO", "background": "", "description": "有 $N$ 个选手参加 $M$ 场 $1$ 对 $1$ 的比赛，比赛顺序已经定好。\n\n现在让你将这些选手分成 $2$ 队，使选手尽可能晚地碰到同队的选手。\n\n输出最优方案下第一次有选手碰到同队的的选手的比赛序号。", "inputFormat": "第一行，一个正整数 $N$，表示有 $N$ 个选手；\n\n第二行，一个正整数 $M$，表示有 $M$ 场比赛；\n\n接下来 $M$ 行，每行两个正整数 $A_i$ 和 $B_i$，表示序号为 $i$ 的比赛参与的选手是序号为 $A_i$ 和 $B_i$ 的两位选手。", "outputFormat": "一行，一个正整数，表示最优分队方案下第一次有选手碰到同队的的选手的比赛序号。", "hint": "**【样例解释 #1】**\n\n$[1,3,5]$ 一队， $[2,4]$ 一队。\n\n可以证明这是最优方案。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le A_i,B_i\\le N\\le 10^5$，$1\\le M\\le 3\\times 10^5$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $100$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T3 SUMO**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #4] SUMO", "background": "", "description": "有 $N$ 个选手参加 $M$ 场 $1$ 对 $1$ 的比赛，比赛顺序已经定好。\n\n现在让你将这些选手分成 $2$ 队，使选手尽可能晚地碰到同队的选手。\n\n输出最优方案下第一次有选手碰到同队的的选手的比赛序号。", "inputFormat": "第一行，一个正整数 $N$，表示有 $N$ 个选手；\n\n第二行，一个正整数 $M$，表示有 $M$ 场比赛；\n\n接下来 $M$ 行，每行两个正整数 $A_i$ 和 $B_i$，表示序号为 $i$ 的比赛参与的选手是序号为 $A_i$ 和 $B_i$ 的两位选手。", "outputFormat": "一行，一个正整数，表示最优分队方案下第一次有选手碰到同队的的选手的比赛序号。", "hint": "**【样例解释 #1】**\n\n$[1,3,5]$ 一队， $[2,4]$ 一队。\n\n可以证明这是最优方案。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le A_i,B_i\\le N\\le 10^5$，$1\\le M\\le 3\\times 10^5$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $100$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T3 SUMO**_。", "locale": "zh-CN"}}}
{"pid": "P8015", "type": "P", "difficulty": 4, "samples": [["1\n2\n5", "5"], ["2\n3\n7\n14", "15"], ["9\n4\n2\n4\n1\n2\n2\n2\n8\n4\n2 ", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2013", "COCI（克罗地亚）"], "title": "[COCI 2013/2014 #4] GUMA", "background": "", "description": "给出一个 $N+1$ 列的矩形，第 $i$ 列必须通过水平切割 $A_i-1$ 次被等分成 $A_i$ 份，请你求出最少需要几次切割才能按要求分割完。\n\n$Tips:$ 一次切割一次可以在一个或多个不一定连续的列上进行分割。", "inputFormat": "第一行，一个正整数 $N$，表示这个矩形有 $N+1$ 列；\n\n接下来 $N+1$ 行，每行一个正整数 $A_i$，表示第 $i$ 列必须通过水平切割 $A_i-1$ 次被等分成 $A_i$ 份。", "outputFormat": "一行，一个正整数，表示最小分割数。", "hint": "**【样例解释 #3】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v45dq77p.png)\n\n共 $7$ 次切割。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$1\\le N\\le 100$；\n\n对于 $100\\%$ 的数据，$1\\le N,A_i\\le 10^5$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $120$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T4 GUMA**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #4] GUMA", "background": "", "description": "给出一个 $N+1$ 列的矩形，第 $i$ 列必须通过水平切割 $A_i-1$ 次被等分成 $A_i$ 份，请你求出最少需要几次切割才能按要求分割完。\n\n$Tips:$ 一次切割一次可以在一个或多个不一定连续的列上进行分割。", "inputFormat": "第一行，一个正整数 $N$，表示这个矩形有 $N+1$ 列；\n\n接下来 $N+1$ 行，每行一个正整数 $A_i$，表示第 $i$ 列必须通过水平切割 $A_i-1$ 次被等分成 $A_i$ 份。", "outputFormat": "一行，一个正整数，表示最小分割数。", "hint": "**【样例解释 #3】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v45dq77p.png)\n\n共 $7$ 次切割。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，$1\\le N\\le 100$；\n\n对于 $100\\%$ 的数据，$1\\le N,A_i\\le 10^5$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $120$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T4 GUMA**_。", "locale": "zh-CN"}}}
{"pid": "P8016", "type": "P", "difficulty": 5, "samples": [["5\n11 10 9 6 4 ", "1\n2\n3\n6\n12"], ["3\n5 5 5", "-1\n-1\n1"], ["8\n12 16 95 96 138 56 205 84", "1\n5\n14\n49\n96\n97\n139\n206"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2013", "COCI（克罗地亚）", "整除分块"], "title": "[COCI 2013/2014 #4] ČOKOLADE", "background": "", "description": "Mirko 举行了 $N$ 场聚会，每天举行一场，对于第 $i$ 场聚会他会邀请每桌 $i$ 个人。\n\nMirko 准备了 $N$ 张桌子，第 $i$ 张桌子上放了 $V_i$ 颗糖。\n\n当每个被邀请的人入座后，坐在同一桌的人会平分这个桌子上的糖。或者说，对于第 $i$ 天的第 $j$ 个桌子，坐在这个桌子的每个人会得到 $\\lfloor \\dfrac{V_j}{i} \\rfloor$ 颗糖。\n\n糖果数量每天都会更新，不会因为平分而减少。\n\n只有人均得到糖果相同的桌子才会社交。\n\n现在，Mirko 想让你对于 $1$ 到 $N$ 中的每一个正整数 $s$，求出正好有 $s$ 桌社交的最早的一天是第几天。", "inputFormat": "第一行，一个正整数 $N$，表示聚会场数；\n\n第二行，$N$ 个正整数 $V_i$，表示第 $i$ 个桌子上放了 $V_i$ 颗糖。", "outputFormat": "共 $N$ 行，每行一个正整数，第 $i$ 行表示正好有 $i$ 桌社交的最早的一天是第几天，若没有正好 $i$ 桌社交的情况则输出 `-1`。", "hint": "**【样例解释 #1】**\n\n第一天，所有桌都不会跟别的桌交流；\n\n第二天，$1,2$ 号桌每个人都拿到了 $5$ 颗糖，故这两桌的人会交流；\n\n第三天，$1,2,3$ 号桌每个人都拿到了 $3$ 颗糖，故这三桌的人会交流；\n\n第六天，$1,2,3,4$ 号桌每个人都拿到了 $1$ 颗糖，故这四桌的人会交流；\n\n第十二天，$1,2,3,4,5$ 号桌每个人都拿到了 $0$ 颗糖，故这五桌的人会交流；\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le N\\le 100$，$1\\le V_i\\le 10^8$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $140$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T5 ČOKOLADE**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #4] ČOKOLADE", "background": "", "description": "Mirko 举行了 $N$ 场聚会，每天举行一场，对于第 $i$ 场聚会他会邀请每桌 $i$ 个人。\n\nMirko 准备了 $N$ 张桌子，第 $i$ 张桌子上放了 $V_i$ 颗糖。\n\n当每个被邀请的人入座后，坐在同一桌的人会平分这个桌子上的糖。或者说，对于第 $i$ 天的第 $j$ 个桌子，坐在这个桌子的每个人会得到 $\\lfloor \\dfrac{V_j}{i} \\rfloor$ 颗糖。\n\n糖果数量每天都会更新，不会因为平分而减少。\n\n只有人均得到糖果相同的桌子才会社交。\n\n现在，Mirko 想让你对于 $1$ 到 $N$ 中的每一个正整数 $s$，求出正好有 $s$ 桌社交的最早的一天是第几天。", "inputFormat": "第一行，一个正整数 $N$，表示聚会场数；\n\n第二行，$N$ 个正整数 $V_i$，表示第 $i$ 个桌子上放了 $V_i$ 颗糖。", "outputFormat": "共 $N$ 行，每行一个正整数，第 $i$ 行表示正好有 $i$ 桌社交的最早的一天是第几天，若没有正好 $i$ 桌社交的情况则输出 `-1`。", "hint": "**【样例解释 #1】**\n\n第一天，所有桌都不会跟别的桌交流；\n\n第二天，$1,2$ 号桌每个人都拿到了 $5$ 颗糖，故这两桌的人会交流；\n\n第三天，$1,2,3$ 号桌每个人都拿到了 $3$ 颗糖，故这三桌的人会交流；\n\n第六天，$1,2,3,4$ 号桌每个人都拿到了 $1$ 颗糖，故这四桌的人会交流；\n\n第十二天，$1,2,3,4,5$ 号桌每个人都拿到了 $0$ 颗糖，故这五桌的人会交流；\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\le N\\le 100$，$1\\le V_i\\le 10^8$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $140$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T5 ČOKOLADE**_。", "locale": "zh-CN"}}}
{"pid": "P8017", "type": "P", "difficulty": 5, "samples": [["3 4\n1 2 3 0\n2 3 3 0\n3 1 0 100\n2 1 0 4 \n", "2 1"], ["5 7\n1 2 4 1\n2 3 5 1\n3 1 1 6\n1 3 15 5\n2 4 7 5\n4 5 1 4\n5 3 1 0 \n", "5 2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2013", "矩阵加速", "矩阵乘法", "COCI（克罗地亚）"], "title": "[COCI 2013/2014 #4] UTRKA", "background": "", "description": "Mirko 和 Slvako 参加了一次竞速比赛，这次比赛的地图有 $N$ 个村庄和 $M$ 条路。对于第 $i$ 条路有两个参数 $M_i$ 和 $S_i$，分别表示 Mirko 和 Slvako 通过这条路所需的时间。\n\n比赛以同一个村庄为起点和终点。现在请你求出一条路线，使得 Mirko 通过这条路线所需的时间尽可能地优于 Slvako 通过这条路线所需的时间。\n\n换句话说，令 $X$ 为 Mirko 通过路线所需的时间，$Y$ 为 Slvako 通过路线所需的时间，你需要求出一条路线，使这条路线通过的村庄数尽可能少的同时使 $Y-X$ 尽可能大。", "inputFormat": "第一行，两个正整数 $N$ 和 $M$，表示共 $N$ 个村庄和 $M$ 条道路；\n\n接下来 $M$ 行，每行四个正整数 $A_i,B_i,M_i,S_i$，分别表示第 $i$ 条道路连接村庄 $A_i$ 与 $B_i$，Mirko 通过这条路线所需的时间为 $M_i$，Slvako 通过这条路线所需的时间为 $S_i$。", "outputFormat": "一行，两个正整数，分别表示所求道路通过的村庄数以及在这些通过村庄数最小的道路中使 $Y-X$ 最大的那条道路的 $Y-X$ 的值。", "hint": "**【数据范围】**\n\n对于 $100\\%$ 的数据，$2\\le A_i,B_i\\le N\\le 300$，$A_i\\ne B_i$，$2\\le M\\le N\\times (N-1)$，$0\\le M_i,S_i\\le 10^6$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $160$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T6 UTRKA**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2013/2014 #4] UTRKA", "background": "", "description": "Mirko 和 Slvako 参加了一次竞速比赛，这次比赛的地图有 $N$ 个村庄和 $M$ 条路。对于第 $i$ 条路有两个参数 $M_i$ 和 $S_i$，分别表示 Mirko 和 Slvako 通过这条路所需的时间。\n\n比赛以同一个村庄为起点和终点。现在请你求出一条路线，使得 Mirko 通过这条路线所需的时间尽可能地优于 Slvako 通过这条路线所需的时间。\n\n换句话说，令 $X$ 为 Mirko 通过路线所需的时间，$Y$ 为 Slvako 通过路线所需的时间，你需要求出一条路线，使这条路线通过的村庄数尽可能少的同时使 $Y-X$ 尽可能大。", "inputFormat": "第一行，两个正整数 $N$ 和 $M$，表示共 $N$ 个村庄和 $M$ 条道路；\n\n接下来 $M$ 行，每行四个正整数 $A_i,B_i,M_i,S_i$，分别表示第 $i$ 条道路连接村庄 $A_i$ 与 $B_i$，Mirko 通过这条路线所需的时间为 $M_i$，Slvako 通过这条路线所需的时间为 $S_i$。", "outputFormat": "一行，两个正整数，分别表示所求道路通过的村庄数以及在这些通过村庄数最小的道路中使 $Y-X$ 最大的那条道路的 $Y-X$ 的值。", "hint": "**【数据范围】**\n\n对于 $100\\%$ 的数据，$2\\le A_i,B_i\\le N\\le 300$，$A_i\\ne B_i$，$2\\le M\\le N\\times (N-1)$，$0\\le M_i,S_i\\le 10^6$。\n\n**【来源】**\n\n本题分值按 COCI 原题设置，满分 $160$。\n\n题目译自 [COCI2013-2014 CONTEST #4](https://hsin.hr/coci/archive/2013_2014/contest4_tasks.pdf) _**T6 UTRKA**_。", "locale": "zh-CN"}}}
{"pid": "P8018", "type": "P", "difficulty": 6, "samples": [["4 3 1\nDRD\nDUD\nDUD\nRUL", "4 2"], ["3 3 2\nRRR\nRRR\nRRR", "-1"], ["4 4 2\nRRDL\nRRDL\nDLRD\nRRRL", "2 3\n4 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #5] Strelice", "background": null, "description": "Hansel 和 Gretel 正在玩「箭头游戏」。\n\n该游戏在一个 $R$ 行 $S$ 列的棋盘上进行。其中每一个棋格内有一个箭头（$\\leftarrow$、$\\rightarrow$、$\\uparrow$、$\\downarrow$ 之一）。\n\n游戏开始后，Hansel 可以选择任意 $K$ 个**不位于最后一列的**棋格进行填涂。接着，Gretel 可以选择**第一列的**任意一个棋格，作为机器人的初始棋格。机器人在放置到初始棋格后将按照箭头的指示自动行走。机器人一旦走到了最后一列，它将立即停止行走。\n\n判定输赢的方式如下：\n\n- 如果机器人在有限的时间内停在了最后一列，那么：当且仅当机器人恰好经过一个有色棋格时，判定 Hansel 获胜，否则 Gretel 获胜。\n- 如果机器人无法停止行走（即处于无限循环的状态），那么判定 Hansel 获胜。\n\n规定机器人经过的棋格包括初始棋格、终止棋格以及路径上的其它所有棋格。同时，数据保证箭头不会指向棋盘外部。\n\n你的任务是判断 Hansel 是否有必胜的方案（即对于 Gretel 所选择的任意一个合法的初始棋格，Hansel 的填涂方案都可以使自己获胜）。如果有必胜的方案，输出该方案；否则输出 $-1$。", "inputFormat": "第一行，三个整数 $R,S,K$。\n\n接下来的 $R$ 行，每行 $S$ 个字符 $\\texttt L$、$\\texttt R$、$\\texttt U$ 或 $\\texttt D$，分别表示对应棋格内的箭头为 $\\leftarrow$、$\\rightarrow$、$\\uparrow$ 和 $\\downarrow$。", "outputFormat": "如果没有必胜的方案，输出 $-1$。\n\n否则输出 $K$ 行，每行两个整数 $A,B$，表示选择的 $K$ 个将要涂色的棋格。棋格必须互不相同。如果存在多种方案，请输出任意一种。\n\nSpecial Judge 对输出格式要求较严，因此**请勿在每行行尾添加多余空格。**", "hint": "**【样例 1 解释】**\n\n填涂 $(4,2)$ 后，无论初始棋格位于第一列的哪里，机器人都会经过 $(4,2)$。\n\n**【样例 2 解释】**\n\n由于需要填涂 $2$ 个棋格，因此至少有一行没有有色棋格。只要 Gretel 选择没有有色棋格的那一行的第一列放置机器人，Gretel 就会获胜。\n\n**【样例 3 图解】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oy6p59p5.png?x-oss-process=image/resize,m_lfit,h_200)\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$1 \\le R \\times S \\le 10^6$，$1 \\le K \\le 50$，$1 \\le A \\le R$，$1 \\le B \\lt S$。\n\n**【提示与说明】**\n\n欢迎大家通过私信或发帖对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/k9jt7zoy) 进行 hack。\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #5](https://hsin.hr/coci/archive/2016_2017/contest5_tasks.pdf) _T6 Strelice_。**\n\n**本题分值按 COCI 原题设置，满分 $160$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #5] Strelice", "background": null, "description": "Hansel 和 Gretel 正在玩「箭头游戏」。\n\n该游戏在一个 $R$ 行 $S$ 列的棋盘上进行。其中每一个棋格内有一个箭头（$\\leftarrow$、$\\rightarrow$、$\\uparrow$、$\\downarrow$ 之一）。\n\n游戏开始后，Hansel 可以选择任意 $K$ 个**不位于最后一列的**棋格进行填涂。接着，Gretel 可以选择**第一列的**任意一个棋格，作为机器人的初始棋格。机器人在放置到初始棋格后将按照箭头的指示自动行走。机器人一旦走到了最后一列，它将立即停止行走。\n\n判定输赢的方式如下：\n\n- 如果机器人在有限的时间内停在了最后一列，那么：当且仅当机器人恰好经过一个有色棋格时，判定 Hansel 获胜，否则 Gretel 获胜。\n- 如果机器人无法停止行走（即处于无限循环的状态），那么判定 Hansel 获胜。\n\n规定机器人经过的棋格包括初始棋格、终止棋格以及路径上的其它所有棋格。同时，数据保证箭头不会指向棋盘外部。\n\n你的任务是判断 Hansel 是否有必胜的方案（即对于 Gretel 所选择的任意一个合法的初始棋格，Hansel 的填涂方案都可以使自己获胜）。如果有必胜的方案，输出该方案；否则输出 $-1$。", "inputFormat": "第一行，三个整数 $R,S,K$。\n\n接下来的 $R$ 行，每行 $S$ 个字符 $\\texttt L$、$\\texttt R$、$\\texttt U$ 或 $\\texttt D$，分别表示对应棋格内的箭头为 $\\leftarrow$、$\\rightarrow$、$\\uparrow$ 和 $\\downarrow$。", "outputFormat": "如果没有必胜的方案，输出 $-1$。\n\n否则输出 $K$ 行，每行两个整数 $A,B$，表示选择的 $K$ 个将要涂色的棋格。棋格必须互不相同。如果存在多种方案，请输出任意一种。\n\nSpecial Judge 对输出格式要求较严，因此**请勿在每行行尾添加多余空格。**", "hint": "**【样例 1 解释】**\n\n填涂 $(4,2)$ 后，无论初始棋格位于第一列的哪里，机器人都会经过 $(4,2)$。\n\n**【样例 2 解释】**\n\n由于需要填涂 $2$ 个棋格，因此至少有一行没有有色棋格。只要 Gretel 选择没有有色棋格的那一行的第一列放置机器人，Gretel 就会获胜。\n\n**【样例 3 图解】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oy6p59p5.png?x-oss-process=image/resize,m_lfit,h_200)\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$1 \\le R \\times S \\le 10^6$，$1 \\le K \\le 50$，$1 \\le A \\le R$，$1 \\le B \\lt S$。\n\n**【提示与说明】**\n\n欢迎大家通过私信或发帖对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/k9jt7zoy) 进行 hack。\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #5](https://hsin.hr/coci/archive/2016_2017/contest5_tasks.pdf) _T6 Strelice_。**\n\n**本题分值按 COCI 原题设置，满分 $160$。**", "locale": "zh-CN"}}}
{"pid": "P8019", "type": "P", "difficulty": 4, "samples": [["3 2\n1 5 7", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2015", "位运算"], "title": "[ONTAK2015] OR-XOR", "background": "", "description": "给定一个长度为 $n$ 的序列 $a_1, a_2, \\cdots, a_n$，请将它划分为 $m$ 段连续的区间，设第 $i$ 段的费用 $c_i$ 为该段内所有数字的异或和，则总费用为 $c_1 \\operatorname{or} c_2 \\operatorname{or} \\cdots \\operatorname{or} c_m$。请求出总费用的最小值。", "inputFormat": "第一行，两个整数 $n, m$；\n\n第二行，$n$ 个整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 \\leq m \\leq n \\leq 5 \\times 10^5$，$0 \\leq a_i \\leq 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ONTAK2015] OR-XOR", "background": "", "description": "给定一个长度为 $n$ 的序列 $a_1, a_2, \\cdots, a_n$，请将它划分为 $m$ 段连续的区间，设第 $i$ 段的费用 $c_i$ 为该段内所有数字的异或和，则总费用为 $c_1 \\operatorname{or} c_2 \\operatorname{or} \\cdots \\operatorname{or} c_m$。请求出总费用的最小值。", "inputFormat": "第一行，两个整数 $n, m$；\n\n第二行，$n$ 个整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 \\leq m \\leq n \\leq 5 \\times 10^5$，$0 \\leq a_i \\leq 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P8020", "type": "P", "difficulty": 4, "samples": [["7\n1 2 2 3 1 1 2\n6\n1 2 1 3 1 2\n2\n3 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2015"], "title": "[ONTAK2015] Badania naukowe", "background": "", "description": "给定三个数字串 $A, B, C$，请找到一个 $A, B$ 的最长公共子序列，满足 $C$ 是该子序列的子串。", "inputFormat": "第一行，一个整数 $n$，表示 $A$ 的长度；\n\n第二行，$n$ 个整数，表示数字串 $A$；\n\n第三行，一个整数 $m$，表示 $B$ 的长度；\n\n第四行，$m$ 个整数，表示数字串 $B$；\n\n第五行，一个整数 $k$，表示 $C$ 的长度；\n\n第六行，$k$ 个整数，表示数字串 $C$。", "outputFormat": "一行，一个整数，如果无解，输出 $-1$；否则，输出满足条件的最长公共子序列的长度。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 3 \\times 10^3$，$0 \\leq k \\leq 3 \\times 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ONTAK2015] Badania naukowe", "background": "", "description": "给定三个数字串 $A, B, C$，请找到一个 $A, B$ 的最长公共子序列，满足 $C$ 是该子序列的子串。", "inputFormat": "第一行，一个整数 $n$，表示 $A$ 的长度；\n\n第二行，$n$ 个整数，表示数字串 $A$；\n\n第三行，一个整数 $m$，表示 $B$ 的长度；\n\n第四行，$m$ 个整数，表示数字串 $B$；\n\n第五行，一个整数 $k$，表示 $C$ 的长度；\n\n第六行，$k$ 个整数，表示数字串 $C$。", "outputFormat": "一行，一个整数，如果无解，输出 $-1$；否则，输出满足条件的最长公共子序列的长度。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 3 \\times 10^3$，$0 \\leq k \\leq 3 \\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P8021", "type": "P", "difficulty": 6, "samples": [["4\n1 4 40\n2 4 10\n2 3 30\n1 3 20", "90"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2015", "线段树", "图论建模", "费用流"], "title": "[ONTAK2015] Bajtman i Okrągły Robin", "background": "", "description": "有 $n$ 个强盗，其中第 $i$ 个强盗会在 $[a_i, a_i + 1], [a_i + 1, a_i + 2], \\cdots, [b_i - 1, b_i]$ 这么多段长度为 $1$ 的时间中选出一个时间进行抢劫，并计划抢走 $c_i$ 元。作为保安，你在每一段长度为 $1$ 的时间内最多只能制止一个强盗，那么你最多可以挽回多少损失呢？", "inputFormat": "第一行，一个整数 $n$；\n\n接下来 $n$ 行，每行三个整数 $a_i, b_i, c_i$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n \\leq 5 \\times 10^3$，$1 \\leq a_i < b_i \\leq 5 \\times 10^3$，$1 \\leq c_i \\leq 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ONTAK2015] Bajtman i Okrągły Robin", "background": "", "description": "有 $n$ 个强盗，其中第 $i$ 个强盗会在 $[a_i, a_i + 1], [a_i + 1, a_i + 2], \\cdots, [b_i - 1, b_i]$ 这么多段长度为 $1$ 的时间中选出一个时间进行抢劫，并计划抢走 $c_i$ 元。作为保安，你在每一段长度为 $1$ 的时间内最多只能制止一个强盗，那么你最多可以挽回多少损失呢？", "inputFormat": "第一行，一个整数 $n$；\n\n接下来 $n$ 行，每行三个整数 $a_i, b_i, c_i$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n \\leq 5 \\times 10^3$，$1 \\leq a_i < b_i \\leq 5 \\times 10^3$，$1 \\leq c_i \\leq 10^4$。", "locale": "zh-CN"}}}
{"pid": "P8022", "type": "P", "difficulty": 4, "samples": [["19 2017 2027 2029\n2017202741127832029", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2015", "枚举", "前缀和"], "title": "[ONTAK2015] Cięcie", "background": "", "description": "给定一个长度为 $k$ 的数字串 $N$ 以及三个**质数** $p, q, r$，请你将 $N$ 划分为三段非空字符串，使得第一段能被 $p$ 整除，第二段能被 $q$ 整除，第三段能被 $r$ 整除，且每一段都不含前导 $0$。\n\n注：**单独的 $0$ 是允许的**。", "inputFormat": "第一行，四个整数 $k, p, q, r$；\n\n第二行，长度为 $k$ 的数字串 $N$。", "outputFormat": "输出一个整数，即合法的划分方案的总数。", "hint": "对于 $100\\%$ 的数据，$1 \\leq k \\leq 10^6$，$2015 < p, q, r \\leq 10^5$，$p, q, r$ 为**质数**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ONTAK2015] Cięcie", "background": "", "description": "给定一个长度为 $k$ 的数字串 $N$ 以及三个**质数** $p, q, r$，请你将 $N$ 划分为三段非空字符串，使得第一段能被 $p$ 整除，第二段能被 $q$ 整除，第三段能被 $r$ 整除，且每一段都不含前导 $0$。\n\n注：**单独的 $0$ 是允许的**。", "inputFormat": "第一行，四个整数 $k, p, q, r$；\n\n第二行，长度为 $k$ 的数字串 $N$。", "outputFormat": "输出一个整数，即合法的划分方案的总数。", "hint": "对于 $100\\%$ 的数据，$1 \\leq k \\leq 10^6$，$2015 < p, q, r \\leq 10^5$，$p, q, r$ 为**质数**。", "locale": "zh-CN"}}}
{"pid": "P8023", "type": "P", "difficulty": 5, "samples": [["6\n1 2 3 1 2 4\n7\n1 2 2 1 3 4 3", "1 1 2 2 1 2 3 1 2 3 4 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2015", "二分", "哈希 hashing", "后缀数组 SA"], "title": "[ONTAK2015] Tasowanie", "background": "", "description": "给定两个数字串 $A$ 和 $B$，通过将 $A$ 和 $B$ 进行二路归并得到一个新的数字串 $T$，请找到字典序最小的 $T$。", "inputFormat": "第一行，一个整数 $n$，表示 $A$ 的长度；\n\n第二行，$n$ 个整数，表示 $A$；\n\n第三行，一个整数 $m$，表示 $B$ 的长度；\n\n第四行，$m$ 个整数，表示 $B$；", "outputFormat": "一行，$n + m$ 个正整数，表示字典序最小的 $T$。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 2 \\times 10^5$，组成 $A, B$ 的每个数字为不超过 $10^3$ 的正整数。\n\n- 2023.9.10 添加两组 hack 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ONTAK2015] Tasowanie", "background": "", "description": "给定两个数字串 $A$ 和 $B$，通过将 $A$ 和 $B$ 进行二路归并得到一个新的数字串 $T$，请找到字典序最小的 $T$。", "inputFormat": "第一行，一个整数 $n$，表示 $A$ 的长度；\n\n第二行，$n$ 个整数，表示 $A$；\n\n第三行，一个整数 $m$，表示 $B$ 的长度；\n\n第四行，$m$ 个整数，表示 $B$；", "outputFormat": "一行，$n + m$ 个正整数，表示字典序最小的 $T$。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 2 \\times 10^5$，组成 $A, B$ 的每个数字为不超过 $10^3$ 的正整数。\n\n- 2023.9.10 添加两组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P8024", "type": "P", "difficulty": 6, "samples": [["2 5\n3 7\n4 1 2\n1 1 2 1\n4 1 2\n3 1 1 5\n4 1 2", "7\n8\n8"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2015", "线段树", "O2优化"], "title": "[ONTAK2015] Stumilowy sad", "background": "Subtask 0 为原数据，Subtask 1 为 hack 数据。", "description": "在一条笔直的道路上从左到右一共有 $n$ 片区域，每一片区域一开始都种着一棵树，其中第 $i$ 片区域种着高度为 $h_i$ 的树。接下来你需要处理 $q$ 个操作：\n\n- `1 l r c`：将第 $l$ 片区域到第 $r$ 片区域内的所有树的高度拔高 $c$ 个单位。\n- `2 l r h`：将一把刀固定在高度为 $h$ 的空中，对第 $l$ 片区域到第 $r$ 片区域内的所有树进行砍伐。\n- `3 l r h`：往第 $l$ 片区域到第 $r$ 片区域内的每个区域种上一棵高度为 $h$ 的树。\n- `4 l r`：查询第 $l$ 片区域到第 $r$ 片区域内最高的树的高度。\n\n注：本题中的高度为相对于某个水平面的高度，也就是说**可能会有负数的出现**。", "inputFormat": "第一行，两个整数 $n, q$；\n\n第二行，$n$ 个整数 $h_1, h_2, \\cdots, h_n$；\n\n接下来 $q$ 行，每行三或四个整数 $op, l, r, c$、$op, l, r, h$ 或 $op, l, r$。", "outputFormat": "若干行，每行一个整数，表示对应查询的结果。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n, q \\leq 5 \\times 10^5$，$1 \\leq h_i \\leq 10^9$，$1 \\leq l \\leq r \\leq n$，$0 \\leq |c| \\leq 500$，$1 \\leq h \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ONTAK2015] Stumilowy sad", "background": "Subtask 0 为原数据，Subtask 1 为 hack 数据。", "description": "在一条笔直的道路上从左到右一共有 $n$ 片区域，每一片区域一开始都种着一棵树，其中第 $i$ 片区域种着高度为 $h_i$ 的树。接下来你需要处理 $q$ 个操作：\n\n- `1 l r c`：将第 $l$ 片区域到第 $r$ 片区域内的所有树的高度拔高 $c$ 个单位。\n- `2 l r h`：将一把刀固定在高度为 $h$ 的空中，对第 $l$ 片区域到第 $r$ 片区域内的所有树进行砍伐。\n- `3 l r h`：往第 $l$ 片区域到第 $r$ 片区域内的每个区域种上一棵高度为 $h$ 的树。\n- `4 l r`：查询第 $l$ 片区域到第 $r$ 片区域内最高的树的高度。\n\n注：本题中的高度为相对于某个水平面的高度，也就是说**可能会有负数的出现**。", "inputFormat": "第一行，两个整数 $n, q$；\n\n第二行，$n$ 个整数 $h_1, h_2, \\cdots, h_n$；\n\n接下来 $q$ 行，每行三或四个整数 $op, l, r, c$、$op, l, r, h$ 或 $op, l, r$。", "outputFormat": "若干行，每行一个整数，表示对应查询的结果。", "hint": "对于 $100\\%$ 的数据，$1 \\leq n, q \\leq 5 \\times 10^5$，$1 \\leq h_i \\leq 10^9$，$1 \\leq l \\leq r \\leq n$，$0 \\leq |c| \\leq 500$，$1 \\leq h \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8025", "type": "P", "difficulty": 5, "samples": [["3 1 2\n1 2\n2 3\n3 4\n1 1", "3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2015", "最近公共祖先 LCA", "树链剖分"], "title": "[ONTAK2015] Związek Harcerstwa Bajtockiego", "background": "", "description": "给定一棵 $n$ 个点的无根树，相邻的点之间的距离为 $1$，一开始你位于 $m$ 点。之后你将依次收到 $k$ 个指令，每个指令包含两个整数 $d$ 和 $t$，你需要沿着最短路在 $t$ 步之内（包含 $t$ 步）走到 $d$ 点，如果不能走到，则停在最后到达的那个点。请在每个指令之后输出你所在的位置。", "inputFormat": "第一行，三个整数 $n, m, k$；\n\n接下来 $n - 1$ 行，每行两个整数 $x, y$，表示一条树边；\n\n接下来 $k$ 行，每行两个整数 $d, t$，表示一条指令。", "outputFormat": "一行，$k$ 个整数，表示执行对应指令后你所在的位置。", "hint": "对于 $100\\%$ 的数据，$1 \\leq m \\leq n \\leq 10^6$，$1 \\leq k \\leq 10^6$，$1 \\leq x, y, d \\leq n$，$0 \\leq t \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ONTAK2015] Związek Harcerstwa Bajtockiego", "background": "", "description": "给定一棵 $n$ 个点的无根树，相邻的点之间的距离为 $1$，一开始你位于 $m$ 点。之后你将依次收到 $k$ 个指令，每个指令包含两个整数 $d$ 和 $t$，你需要沿着最短路在 $t$ 步之内（包含 $t$ 步）走到 $d$ 点，如果不能走到，则停在最后到达的那个点。请在每个指令之后输出你所在的位置。", "inputFormat": "第一行，三个整数 $n, m, k$；\n\n接下来 $n - 1$ 行，每行两个整数 $x, y$，表示一条树边；\n\n接下来 $k$ 行，每行两个整数 $d, t$，表示一条指令。", "outputFormat": "一行，$k$ 个整数，表示执行对应指令后你所在的位置。", "hint": "对于 $100\\%$ 的数据，$1 \\leq m \\leq n \\leq 10^6$，$1 \\leq k \\leq 10^6$，$1 \\leq x, y, d \\leq n$，$0 \\leq t \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8026", "type": "P", "difficulty": 6, "samples": [["3 4 10\n1 2 1\n2 1 2\n1 2 3\n3 4 1\n1 3 2\n2 3 3\n2 4 2\n3 4 3\n3 4 2\n1 3 1", "4\n4\n6\n6\n6\n6\n6\n8\n8\n16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2015", "并查集", "树上启发式合并", "哈希 hashing"], "title": "[ONTAK2015] Bajtocja", "background": "", "description": "给定 $d$ 张无向图，每张图都有 $n$ 个点。一开始，在任何一张图中都没有任何边。接下来有 $m$ 次操作，每次操作会给出 $a, b, k$，意为在第 $k$ 张图中的点 $a$ 和点 $b$ 之间添加一条无向边。你需要在每次操作之后输出有序数对 $(a, b)$ 的个数，使得 $1 \\leq a, b \\leq n$，且 $a$ 点和 $b$ 点在 $d$ 张图中都连通。", "inputFormat": "第一行，三个整数 $d, n, m$；\n\n接下来 $m$ 行，每行三个整数 $a, b, k$。", "outputFormat": "$m$ 行，每行一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 \\leq d \\leq 200$，$1 \\leq n \\leq5 \\times 10^3$，$1\\leq m \\leq 10^6$，$1 \\leq a, b \\leq n$，$1 \\leq k \\leq d$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ONTAK2015] Bajtocja", "background": "", "description": "给定 $d$ 张无向图，每张图都有 $n$ 个点。一开始，在任何一张图中都没有任何边。接下来有 $m$ 次操作，每次操作会给出 $a, b, k$，意为在第 $k$ 张图中的点 $a$ 和点 $b$ 之间添加一条无向边。你需要在每次操作之后输出有序数对 $(a, b)$ 的个数，使得 $1 \\leq a, b \\leq n$，且 $a$ 点和 $b$ 点在 $d$ 张图中都连通。", "inputFormat": "第一行，三个整数 $d, n, m$；\n\n接下来 $m$ 行，每行三个整数 $a, b, k$。", "outputFormat": "$m$ 行，每行一个整数，表示所求的值。", "hint": "对于 $100\\%$ 的数据，$1 \\leq d \\leq 200$，$1 \\leq n \\leq5 \\times 10^3$，$1\\leq m \\leq 10^6$，$1 \\leq a, b \\leq n$，$1 \\leq k \\leq d$。", "locale": "zh-CN"}}}
{"pid": "P8027", "type": "P", "difficulty": 2, "samples": [["8 6\n10 1 1 1 1 1 1 5", "1\n1"], ["3 2\n1 2 1", "-1"], ["10 2\n1 5 1 5 2 5 6 2 5 6", "2\n1 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #3] Lampice", "background": "", "description": "给定一串包含 $n$ 个有特定颜色 $a_i$ 的圣诞灯和一个整数 $k$。\n\n现要从该串中选取一段连续的圣诞灯，要求这段圣诞灯能够恰好从头到尾均分成 $k$ 小段，使得每一小段的颜色相同。\n\n如果有符合的选取方式，请输出每一小段的颜色情况；否则输出 $-1$。", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个正整数 $a_i$，表示圣诞灯的颜色。", "outputFormat": "如果没有符合的选取方式，输出 $-1$。\n\n否则在第一行输出每一小段的长度，并在接下来一行按顺序输出每一小段的颜色。如果有多种符合的选取方式，请输出任意一种。", "hint": "**【样例 3 解释】**\n\n选取前四个圣诞灯 $1,5;1,5$ 或后六个圣诞灯 $2,5,6;2,5,6$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：保证存在连续 $k$ 个相同颜色的圣诞灯。\n- Subtask 2（15 pts）：$k=2$。\n- Subtask 3（25 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 50$，$1 \\le a_i \\le 1000$。\n\n**【提示与说明】**\n\n为了处理多解问题，本题启用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/xevpldj1)，欢迎大家 hack。\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf) _Task 1 Lampice_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #3] Lampice", "background": "", "description": "给定一串包含 $n$ 个有特定颜色 $a_i$ 的圣诞灯和一个整数 $k$。\n\n现要从该串中选取一段连续的圣诞灯，要求这段圣诞灯能够恰好从头到尾均分成 $k$ 小段，使得每一小段的颜色相同。\n\n如果有符合的选取方式，请输出每一小段的颜色情况；否则输出 $-1$。", "inputFormat": "第一行，两个正整数 $n,k$。\n\n第二行，$n$ 个正整数 $a_i$，表示圣诞灯的颜色。", "outputFormat": "如果没有符合的选取方式，输出 $-1$。\n\n否则在第一行输出每一小段的长度，并在接下来一行按顺序输出每一小段的颜色。如果有多种符合的选取方式，请输出任意一种。", "hint": "**【样例 3 解释】**\n\n选取前四个圣诞灯 $1,5;1,5$ 或后六个圣诞灯 $2,5,6;2,5,6$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：保证存在连续 $k$ 个相同颜色的圣诞灯。\n- Subtask 2（15 pts）：$k=2$。\n- Subtask 3（25 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 50$，$1 \\le a_i \\le 1000$。\n\n**【提示与说明】**\n\n为了处理多解问题，本题启用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/xevpldj1)，欢迎大家 hack。\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf) _Task 1 Lampice_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN"}}}
{"pid": "P8028", "type": "P", "difficulty": 3, "samples": [["100 0", "100"], ["8 6\n1 2\n1 3\n1 4\n5 6\n5 7\n5 8", "6"], ["6 5\n1 2\n2 3\n3 4\n4 6\n4 5", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "树的直径", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #3] Cijanobakterije", "background": "", "description": "一位微生物学家有 $n$ 个蓝藻细菌。这些细菌中有 $m$ 组细菌 $(a_i,b_i)$，表示 $a_i$ 和 $b_i$ 之间有一条生物链。若干条生物链顺次连接之后可组成长链。长链的长度定义为这条长链上的细菌数量。\n\n现可在细菌之间两两添加若干条生物链，使得添加之后的所有生物链均不存在环。\n\n求在进行若干次添加生物链的操作后，最长的长链的长度是多少。", "inputFormat": "第一行，两个整数 $n,m$。\n\n接下来的 $m$ 行，每行两个正整数 $a_i,b_i$，表示 $a_i,b_i$ 两个细菌之间有一条生物链。数据保证 $a_i \\neq b_i$ 且同一条生物链只会出现一次，同时这 $m$ 条生物链不会存在环。", "outputFormat": "输出最长的长链的长度。", "hint": "**【样例 2 解释】**\n\n在 $2$ 和 $6$ 之间添加一条生物链后，最长的长链为 $3-1-2-6-5-7$，长度为 $6$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（15 pts）：$m=n-1$。\n- Subtask 2（6 pts）：$b_i=a_i+1$。\n- Subtask 3（6 pts）：$1 \\le a_i \\le 2$。\n- Subtask 4（15 pts）：$1 \\le n \\le 1000$。\n- Subtask 5（28 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$0 \\le m \\lt n$，$1 \\le a_i,b_i \\le n$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf) _Task 2 Cijanobakterije_。**\n\n**本题分值按 COCI 原题设置，满分 $70$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #3] Cijanobakterije", "background": "", "description": "一位微生物学家有 $n$ 个蓝藻细菌。这些细菌中有 $m$ 组细菌 $(a_i,b_i)$，表示 $a_i$ 和 $b_i$ 之间有一条生物链。若干条生物链顺次连接之后可组成长链。长链的长度定义为这条长链上的细菌数量。\n\n现可在细菌之间两两添加若干条生物链，使得添加之后的所有生物链均不存在环。\n\n求在进行若干次添加生物链的操作后，最长的长链的长度是多少。", "inputFormat": "第一行，两个整数 $n,m$。\n\n接下来的 $m$ 行，每行两个正整数 $a_i,b_i$，表示 $a_i,b_i$ 两个细菌之间有一条生物链。数据保证 $a_i \\neq b_i$ 且同一条生物链只会出现一次，同时这 $m$ 条生物链不会存在环。", "outputFormat": "输出最长的长链的长度。", "hint": "**【样例 2 解释】**\n\n在 $2$ 和 $6$ 之间添加一条生物链后，最长的长链为 $3-1-2-6-5-7$，长度为 $6$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（15 pts）：$m=n-1$。\n- Subtask 2（6 pts）：$b_i=a_i+1$。\n- Subtask 3（6 pts）：$1 \\le a_i \\le 2$。\n- Subtask 4（15 pts）：$1 \\le n \\le 1000$。\n- Subtask 5（28 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$0 \\le m \\lt n$，$1 \\le a_i,b_i \\le n$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf) _Task 2 Cijanobakterije_。**\n\n**本题分值按 COCI 原题设置，满分 $70$。**", "locale": "zh-CN"}}}
{"pid": "P8029", "type": "P", "difficulty": 6, "samples": [["3 1\n1 1\n1 1\n1 3", "2 2"], ["4 3\n1 1\n10 1\n2 3\n10 3", "3 13\n3 22\n2 3"], ["2 4\n1 1\n2 2", "2 3\n1 1\n1 2\n0 0"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #3] Akcija", "background": "", "description": "给定 $n$ 个商品，每个商品有一个价格 $w_i$ 和一个截止期 $d_i$，其中 $d_i$ 表示第 $i$ 个商品必须在第 $d_i$ 分钟之前完成购买。每次购买一个商品均需花费 $1$ 分钟进行下单，在下单之后才视为购买成功。\n\n现可从这 $n$ 个商品中选择若干个（包括 $0$ 个）进行购买（每个商品最多购买一次），视为一种购买方案。\n\n当一种购买方案内的商品数量大于另一种方案时，规定前者更优；当一种购买方案的商品数量与另一种相同且前者的总价格更低时，规定前者更优。求所有符合题意的购买方案中，第 $1 \\sim k$ 优的方案的商品数量和总价格各是多少。", "inputFormat": "第一行，两个正整数 $n,k$。数据保证 $k$ 不大于符合题意的方案总数。\n\n接下来的 $n$ 行，每行两个正整数 $w_i,d_i$。", "outputFormat": "输出共 $k$ 行，其中第 $i$ 行为第 $i$ 优方案的商品数量和总价格。", "hint": "**【样例 2 解释】**\n\n前 $k$ 优的方案为 $\\{1,3,4\\}$、$\\{2,3,4\\}$ 和 $\\{1,3\\}$（用商品编号代替对应商品）。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$k=1$，$w_1=\\cdots=w_n$。\n- Subtask 2（20 pts）：$k=1$。\n- Subtask 3（20 pts）：$k=2$。\n- Subtask 4（10 pts）：$1 \\le n \\le 20$。\n- Subtask 5（30 pts）：$1 \\le n,k \\le 100$。\n- Subtask 6（20 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 2000$，$1 \\le w_i \\le 10^9$，$1 \\le d_i \\le n$。\n\n**【提示与说明】**\n\n官方数据每个子任务有 $13$ 个测试点，所需总时限高达 $6.5$ 分钟。为了减少评测机负担，这里每个子任务只选取前两个测试点进行评测。\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf) _Task 3 Akcija_。**\n\n**本题分值按 COCI 原题设置，满分 $110$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #3] Akcija", "background": "", "description": "给定 $n$ 个商品，每个商品有一个价格 $w_i$ 和一个截止期 $d_i$，其中 $d_i$ 表示第 $i$ 个商品必须在第 $d_i$ 分钟之前完成购买。每次购买一个商品均需花费 $1$ 分钟进行下单，在下单之后才视为购买成功。\n\n现可从这 $n$ 个商品中选择若干个（包括 $0$ 个）进行购买（每个商品最多购买一次），视为一种购买方案。\n\n当一种购买方案内的商品数量大于另一种方案时，规定前者更优；当一种购买方案的商品数量与另一种相同且前者的总价格更低时，规定前者更优。求所有符合题意的购买方案中，第 $1 \\sim k$ 优的方案的商品数量和总价格各是多少。", "inputFormat": "第一行，两个正整数 $n,k$。数据保证 $k$ 不大于符合题意的方案总数。\n\n接下来的 $n$ 行，每行两个正整数 $w_i,d_i$。", "outputFormat": "输出共 $k$ 行，其中第 $i$ 行为第 $i$ 优方案的商品数量和总价格。", "hint": "**【样例 2 解释】**\n\n前 $k$ 优的方案为 $\\{1,3,4\\}$、$\\{2,3,4\\}$ 和 $\\{1,3\\}$（用商品编号代替对应商品）。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：$k=1$，$w_1=\\cdots=w_n$。\n- Subtask 2（20 pts）：$k=1$。\n- Subtask 3（20 pts）：$k=2$。\n- Subtask 4（10 pts）：$1 \\le n \\le 20$。\n- Subtask 5（30 pts）：$1 \\le n,k \\le 100$。\n- Subtask 6（20 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 2000$，$1 \\le w_i \\le 10^9$，$1 \\le d_i \\le n$。\n\n**【提示与说明】**\n\n官方数据每个子任务有 $13$ 个测试点，所需总时限高达 $6.5$ 分钟。为了减少评测机负担，这里每个子任务只选取前两个测试点进行评测。\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf) _Task 3 Akcija_。**\n\n**本题分值按 COCI 原题设置，满分 $110$。**", "locale": "zh-CN"}}}
{"pid": "P8030", "type": "P", "difficulty": 5, "samples": [["3\nkoeeok", "3"], ["3\nkekoeo", "1"], ["4\nsoolnlsn", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #3] Ekoeko", "background": "", "description": "给定一个正整数 $n$ 和一个由 $2n$ 个小写字母组成的字符串。\n\n交换字符串的相邻两个字母视为一次操作。求使得原串的前 $n$ 个小字母和后 $n$ 个完全相同所需的最少操作次数。", "inputFormat": "第一行，一个正整数 $n$。\n\n第二行，一个由 $2n$ 个小写字母组成的字符串。数据保证每个字母均出现偶数次。", "outputFormat": "输出最少操作次数。", "hint": "**【样例 3 解释】**\n\n一种操作次数最少的方案：\n\n$\\texttt{soolnlsn} \\to \\texttt{so\\red{lo}nlsn} \\to \\texttt{sol\\red{no}lsn} \\to \\texttt{\\red{os}lnolsn} \\to \\texttt{o\\red{ls}nolsn}$\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：字符串前 $n$ 个字母均为 $\\texttt a$，后 $n$ 个均为 $\\texttt b$。\n- Subtask 2（20 pts）：每个字母在字符串中至多出现两次。\n- Subtask 3（20 pts）：前 $n$ 个字母和后 $n$ 个字母的组成完全相同，但顺序可能不同。\n- Subtask 4（20 pts）：$1 \\le n \\le 1000$。\n- Subtask 5（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf) _Task 4 Ekoeko_。**\n\n**本题分值按 COCI 原题设置，满分 $110$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #3] Ekoeko", "background": "", "description": "给定一个正整数 $n$ 和一个由 $2n$ 个小写字母组成的字符串。\n\n交换字符串的相邻两个字母视为一次操作。求使得原串的前 $n$ 个小字母和后 $n$ 个完全相同所需的最少操作次数。", "inputFormat": "第一行，一个正整数 $n$。\n\n第二行，一个由 $2n$ 个小写字母组成的字符串。数据保证每个字母均出现偶数次。", "outputFormat": "输出最少操作次数。", "hint": "**【样例 3 解释】**\n\n一种操作次数最少的方案：\n\n$\\texttt{soolnlsn} \\to \\texttt{so\\red{lo}nlsn} \\to \\texttt{sol\\red{no}lsn} \\to \\texttt{\\red{os}lnolsn} \\to \\texttt{o\\red{ls}nolsn}$\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：字符串前 $n$ 个字母均为 $\\texttt a$，后 $n$ 个均为 $\\texttt b$。\n- Subtask 2（20 pts）：每个字母在字符串中至多出现两次。\n- Subtask 3（20 pts）：前 $n$ 个字母和后 $n$ 个字母的组成完全相同，但顺序可能不同。\n- Subtask 4（20 pts）：$1 \\le n \\le 1000$。\n- Subtask 5（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf) _Task 4 Ekoeko_。**\n\n**本题分值按 COCI 原题设置，满分 $110$。**", "locale": "zh-CN"}}}
{"pid": "P8031", "type": "P", "difficulty": 5, "samples": [["1\n5 5", "1"], ["3\n-1 -1\n1 -1\n0 1", "12"], ["5\n0 0\n-1 0\n2 -1\n3 2\n0 3", "83"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #3] Kućice", "background": "", "description": "圣诞集市中有 $n$ 个摊位。每个摊位可以抽象为平面直角坐标系中的一个点，其坐标为 $x_i,y_i$。\n\n现在每个摊位均有 $50\\%$ 的概率违规。所有违规的摊位会被一个栅栏圈住，其中栅栏的形状为所有违规摊位对应的点组成的凸包的边界。当然，一些没有违规的无辜摊位也有可能被圈住。当违规摊位数量小于 $3$ 时，凸包显然会退化为线段、点或空集。\n\n求被圈住摊位的期望数量。可以证明答案可以被表示成 $\\frac{m}{2^n}$，其中 $m$ 为正整数。因此只需要输出 $m$ 对 $10^9+7$ 取模后的值即可。", "inputFormat": "第一行，一个正整数 $n$，表示摊位的数量。\n\n接下来的 $n$ 行，每行两个整数 $x_i,y_i$，表示摊位的坐标。数据保证不存在坐标相同的摊位且任意三个摊位都不共线。", "outputFormat": "输出 $m$ 对 $10^9+7$ 取模后的值。", "hint": "**【样例 1 解释】**\n\n唯一的摊位违规的概率为 $50\\%$，故期望值为 $\\frac{1}{2}$。\n\n**【样例 2 解释】**\n\n违规的情况共有 $8$ 种，而每种情况下被圈住的摊位数分别为 $0,1,1,1,2,2,2,3$。故期望值为 $\\frac{1}{8}(0+1+1+1+2+2+2+3)=\\frac{12}{8}$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：每个点都在由所有点组成的凸包的边界上，同时 $n \\ge 3$。\n- Subtask 2（30 pts）：除了第一个点外，每个点都在由所有点组成的凸包的边界上，同时 $n \\ge 4$，$x_1=y_1=0$。\n- Subtask 3（10 pts）：$1 \\le n \\le 15$。\n- Subtask 4（30 pts）：$1 \\le n \\le 100$。\n- Subtask 5（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$|x_i|,|y_i| \\le 10^6$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf) _Task 5 Kućice_。**\n\n**本题分值按 COCI 原题设置，满分 $110$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #3] Kućice", "background": "", "description": "圣诞集市中有 $n$ 个摊位。每个摊位可以抽象为平面直角坐标系中的一个点，其坐标为 $x_i,y_i$。\n\n现在每个摊位均有 $50\\%$ 的概率违规。所有违规的摊位会被一个栅栏圈住，其中栅栏的形状为所有违规摊位对应的点组成的凸包的边界。当然，一些没有违规的无辜摊位也有可能被圈住。当违规摊位数量小于 $3$ 时，凸包显然会退化为线段、点或空集。\n\n求被圈住摊位的期望数量。可以证明答案可以被表示成 $\\frac{m}{2^n}$，其中 $m$ 为正整数。因此只需要输出 $m$ 对 $10^9+7$ 取模后的值即可。", "inputFormat": "第一行，一个正整数 $n$，表示摊位的数量。\n\n接下来的 $n$ 行，每行两个整数 $x_i,y_i$，表示摊位的坐标。数据保证不存在坐标相同的摊位且任意三个摊位都不共线。", "outputFormat": "输出 $m$ 对 $10^9+7$ 取模后的值。", "hint": "**【样例 1 解释】**\n\n唯一的摊位违规的概率为 $50\\%$，故期望值为 $\\frac{1}{2}$。\n\n**【样例 2 解释】**\n\n违规的情况共有 $8$ 种，而每种情况下被圈住的摊位数分别为 $0,1,1,1,2,2,2,3$。故期望值为 $\\frac{1}{8}(0+1+1+1+2+2+2+3)=\\frac{12}{8}$。\n\n**【数据规模与约定】**\n\n**本题采用子任务捆绑测试。**\n\n- Subtask 1（10 pts）：每个点都在由所有点组成的凸包的边界上，同时 $n \\ge 3$。\n- Subtask 2（30 pts）：除了第一个点外，每个点都在由所有点组成的凸包的边界上，同时 $n \\ge 4$，$x_1=y_1=0$。\n- Subtask 3（10 pts）：$1 \\le n \\le 15$。\n- Subtask 4（30 pts）：$1 \\le n \\le 100$。\n- Subtask 5（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$|x_i|,|y_i| \\le 10^6$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf) _Task 5 Kućice_。**\n\n**本题分值按 COCI 原题设置，满分 $110$。**", "locale": "zh-CN"}}}
{"pid": "P8032", "type": "P", "difficulty": 2, "samples": [["{abc,ono,sto}", "{\n  abc,\n  ono,\n  sto\n}"], ["{}", "{\n}"], ["{znakovi}", "{\n  znakovi\n}"], ["{a,b,{c,d},e,{}}", "{\n  a,\n  b,\n  {\n    c,\n    d\n  },\n  e,\n  {\n  }\n}"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #7] Nizovi", "background": "", "description": "一种编程语言中的数组按如下方式定义：\n\n- 数组的开头和结尾分别用大括号（$\\texttt \\{$ 和 $\\texttt \\}$）表示。\n- 每组大括号内有若干个（可能为 $0$）用逗号分隔开来的**元素**（每个数组的最后一个元素后面没有逗号）。\n- 每个元素可以是一个**单词**（由小写字母组成的字符串）或一个数组。\n- 一些合法的数组：$\\texttt {\\{\\}}, \\texttt{\\{a,b,c\\}}, \\texttt{\\{abc,znj,\\{novi,niz\\},pozz\\}}$。\n\n你需要采用下列码风使得程序更加美观：\n\n- 遇到单词或大括号时另起一行。\n- 逗号应直接放置于一个数组元素的后面。\n- 每遇到一个 $\\texttt{\\{}$，增加 $2$ 个空格的缩进。\n- 每遇到一个 $\\texttt{\\}}$，减少 $2$ 个空格的缩进。\n\n现给定一个数组，输出上述码风下该数组的样式。", "inputFormat": "一个字符串 $S$，表示给定的数组。", "outputFormat": "给定码风下的数组。", "hint": "**【数据规模与约定】**\n\n- 对于 $50\\%$ 的数据，元素只包含单词。\n- 对于 $100\\%$ 的数据，$1 \\le |S| \\le 1500$。\n\n**【提示与说明】**\n\nChecker 选自 [Testlib 库](https://github.com/MikeMirzayanov/testlib/blob/master/checkers/fcmp.cpp)，见附件。\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 1 Nizovi_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #7] Nizovi", "background": "", "description": "一种编程语言中的数组按如下方式定义：\n\n- 数组的开头和结尾分别用大括号（$\\texttt \\{$ 和 $\\texttt \\}$）表示。\n- 每组大括号内有若干个（可能为 $0$）用逗号分隔开来的**元素**（每个数组的最后一个元素后面没有逗号）。\n- 每个元素可以是一个**单词**（由小写字母组成的字符串）或一个数组。\n- 一些合法的数组：$\\texttt {\\{\\}}, \\texttt{\\{a,b,c\\}}, \\texttt{\\{abc,znj,\\{novi,niz\\},pozz\\}}$。\n\n你需要采用下列码风使得程序更加美观：\n\n- 遇到单词或大括号时另起一行。\n- 逗号应直接放置于一个数组元素的后面。\n- 每遇到一个 $\\texttt{\\{}$，增加 $2$ 个空格的缩进。\n- 每遇到一个 $\\texttt{\\}}$，减少 $2$ 个空格的缩进。\n\n现给定一个数组，输出上述码风下该数组的样式。", "inputFormat": "一个字符串 $S$，表示给定的数组。", "outputFormat": "给定码风下的数组。", "hint": "**【数据规模与约定】**\n\n- 对于 $50\\%$ 的数据，元素只包含单词。\n- 对于 $100\\%$ 的数据，$1 \\le |S| \\le 1500$。\n\n**【提示与说明】**\n\nChecker 选自 [Testlib 库](https://github.com/MikeMirzayanov/testlib/blob/master/checkers/fcmp.cpp)，见附件。\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 1 Nizovi_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN"}}}
{"pid": "P8033", "type": "P", "difficulty": 3, "samples": [["3 5 3\n.....\n.*.*.\n.....", "1\n+-+..\n|*|*.\n+-+.."], ["7 6 4\n......\n.*.*.*\n......\n.*.*..\n..*...\n..*...\n*....*", "2\n......\n.*.*.*\n+--+..\n|*.|..\n|.*|..\n+--+..\n*....*"], ["9 9 6\n***......\n......*.*\n.*....*..\n..*...*..\n..*.*....\n..*....*.\n.....*...\n.*...***.\n.........", "6\n***......\n......*.*\n.*....*..\n..*+----+\n..*|*...|\n..*|...*|\n...|.*..|\n.*.|.***|\n...+----+"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2015", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #7] Prozor", "background": "", "description": "一扇规模为 $R \\times S$ 的窗户上有若干只苍蝇。现有一把苍蝇拍，它可以消灭 $K \\times K$ 矩形区域内（不含边界）的所有苍蝇。\n\n请选择一种苍蝇拍的放置位置，使得被消灭的苍蝇数量最多。输出消灭的苍蝇的最大值和该方案。如果有多种符合的方案，请输出任意一种。", "inputFormat": "第一行，三个整数 $R,S,K$。\n\n接下来的 $R$ 行，每行 $S$ 个字符 $\\texttt *$（表示苍蝇）或 $\\texttt .$（表示空白区域）。数据保证至少能消灭一只苍蝇。", "outputFormat": "第一行，输出能消灭苍蝇数量的最大值。当程序只答对该值时，可以获得 $50\\%$ 的分数。\n\n接下来的 $R$ 行，每行 $S$ 个字符。在输入的字符矩阵的基础上，将所选定的 $K \\times K$ 矩形的四个角改为 $\\texttt +$、横向边改为 $\\texttt -$、纵向边改为 $\\texttt |$ 即可。选定的矩形区域必须完全在整个矩阵内部。\n\n**注：如果只想获得 $\\mathbf{50\\%}$ 的部分分，请只输出一个整数，即消灭苍蝇数量的最大值。此时，** $\\red {\\mathbf{请不要输出任何多余的字符（包括但不限于空格和换行符），否则会被判错。}}$", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$3 \\le K \\le R,S \\le 100$。\n\n**【提示与说明】**\n\n欢迎大家通过私信或发帖对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/luaa2ic5) 进行 hack。\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 2 Prozor_。**\n\n**本题分值按 COCI 原题设置，满分 $80$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #7] Prozor", "background": "", "description": "一扇规模为 $R \\times S$ 的窗户上有若干只苍蝇。现有一把苍蝇拍，它可以消灭 $K \\times K$ 矩形区域内（不含边界）的所有苍蝇。\n\n请选择一种苍蝇拍的放置位置，使得被消灭的苍蝇数量最多。输出消灭的苍蝇的最大值和该方案。如果有多种符合的方案，请输出任意一种。", "inputFormat": "第一行，三个整数 $R,S,K$。\n\n接下来的 $R$ 行，每行 $S$ 个字符 $\\texttt *$（表示苍蝇）或 $\\texttt .$（表示空白区域）。数据保证至少能消灭一只苍蝇。", "outputFormat": "第一行，输出能消灭苍蝇数量的最大值。当程序只答对该值时，可以获得 $50\\%$ 的分数。\n\n接下来的 $R$ 行，每行 $S$ 个字符。在输入的字符矩阵的基础上，将所选定的 $K \\times K$ 矩形的四个角改为 $\\texttt +$、横向边改为 $\\texttt -$、纵向边改为 $\\texttt |$ 即可。选定的矩形区域必须完全在整个矩阵内部。\n\n**注：如果只想获得 $\\mathbf{50\\%}$ 的部分分，请只输出一个整数，即消灭苍蝇数量的最大值。此时，** $\\red {\\mathbf{请不要输出任何多余的字符（包括但不限于空格和换行符），否则会被判错。}}$", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$3 \\le K \\le R,S \\le 100$。\n\n**【提示与说明】**\n\n欢迎大家通过私信或发帖对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/luaa2ic5) 进行 hack。\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 2 Prozor_。**\n\n**本题分值按 COCI 原题设置，满分 $80$。**", "locale": "zh-CN"}}}
{"pid": "P8034", "type": "P", "difficulty": 2, "samples": [["4\n1 3 5 7\n3\n2 2\n2 5\n1 5", "3\n1\n0"], ["5\n3 3 4 3 2\n4\n1 2\n1 3\n5 6\n7 9", "0\n4\n7\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #7] Ozljeda", "background": "", "description": "给定一个元素个数为 $K$ 的数列 $\\{a\\}$。现规定一个无穷数列 $\\{x\\}$ 如下：\n\n$$x_n=\\begin{cases}\na_n, & 1 \\le n \\le K, \\cr\n\\bigoplus_{i=n-1}^{n-K} x_i, & n > K\n\\end{cases}$$\n\n给定 $Q$ 组询问 $l_i,r_i$，求 $\\bigoplus_{i=l}^r x_i$ 的值。", "inputFormat": "第一行，一个整数 $K$。\n\n第二行，$K$ 个整数 $a_i$。\n\n第三行，一个整数 $Q$。\n\n接下来的 $Q$ 行，每行两个整数 $l_i,r_i$。", "outputFormat": "输出 $Q$ 行，每行对应一次询问的答案。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le K \\le 10^5$，$0 \\le a_i \\lt 10^{18}$，$1 \\le Q \\le 10^6$，$1 \\le l_i \\le r_i \\le 10^{18}$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 3 Ozljeda_。**\n\n**本题分值按 COCI 原题设置，满分 $100$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #7] Ozljeda", "background": "", "description": "给定一个元素个数为 $K$ 的数列 $\\{a\\}$。现规定一个无穷数列 $\\{x\\}$ 如下：\n\n$$x_n=\\begin{cases}\na_n, & 1 \\le n \\le K, \\cr\n\\bigoplus_{i=n-1}^{n-K} x_i, & n > K\n\\end{cases}$$\n\n给定 $Q$ 组询问 $l_i,r_i$，求 $\\bigoplus_{i=l}^r x_i$ 的值。", "inputFormat": "第一行，一个整数 $K$。\n\n第二行，$K$ 个整数 $a_i$。\n\n第三行，一个整数 $Q$。\n\n接下来的 $Q$ 行，每行两个整数 $l_i,r_i$。", "outputFormat": "输出 $Q$ 行，每行对应一次询问的答案。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le K \\le 10^5$，$0 \\le a_i \\lt 10^{18}$，$1 \\le Q \\le 10^6$，$1 \\le l_i \\le r_i \\le 10^{18}$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 3 Ozljeda_。**\n\n**本题分值按 COCI 原题设置，满分 $100$。**", "locale": "zh-CN"}}}
{"pid": "P8035", "type": "P", "difficulty": 3, "samples": [["3\n2 3 6\n(R1-R2-R3)", "11.00000"], ["3\n2 3 6\n(R1|R2|R3)", "1.00000"], ["5\n5.0 5.0 5.0 5.0 5.0\n((R1-(R2|R3)-(R4|R5))|(R1-(R2|R3)-(R4|R5)))", "5.00000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #7] Otpor", "background": "", "description": "众所周知，电阻的连接包括串联和并联两种。而一条电路的所有电阻可以视为这条电路的等效电阻 $R_{ekv}$。当电阻串联时，可以这样表示：\n\n$$\\text{(R1-R2-R3-...-RK)}$$\n\n同时满足公式：\n\n$$R_{ekv}=\\sum_{i=1}^K R_i$$\n\n并联时可以这样表示：\n\n$$\\text{(R1|R2|R3|...|RK)}$$\n\n同时满足公式：\n\n$$R_{ekv}=\\frac{1}{\\sum_{i=1}^K \\frac{1}{R_i}}$$\n\n现有一个包含 $N$ 种阻值为 $R_i$ 的电阻和足够多的导线。给定这些电阻的连接方式，求整条电路的等效电阻值。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个实数 $R_i$。\n\n第三行，一个字符串 $S$，表示电路。字符串只包含 $\\texttt R$、$\\texttt 1 \\sim \\texttt 9$、$\\texttt ($、$\\texttt )$、$\\texttt -$ 和 $\\texttt |$。数据保证不会有括号不匹配或不合法的现象，同时括号的数量将会最小化。任何一对括号内都不会同时出现 $\\texttt -$ 和 $\\texttt |$。电路只包含给定的 $N$ 种电阻，且可能出现任意（包括 $0$）次。", "outputFormat": "输出整条电路的等效电阻值。输出与标准答案相差不超过 $10^{-5}$ 则视为正确。", "hint": "**【数据规模与约定】**\n\n- 对于 $20\\%$ 的数据，$N=3$ 且电路恰好包含这三种电阻。\n- 对于 $40\\%$ 的数据，$S$ 中只包含一对括号。\n- 对于 $100\\%$ 的数据，$1 \\le N \\le 9$，$0 \\lt R_i \\lt 100$，$1 \\le |S| \\le 10^5$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 4 Otpor_。**\n\n**本题分值按 COCI 原题设置，满分 $120$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #7] Otpor", "background": "", "description": "众所周知，电阻的连接包括串联和并联两种。而一条电路的所有电阻可以视为这条电路的等效电阻 $R_{ekv}$。当电阻串联时，可以这样表示：\n\n$$\\text{(R1-R2-R3-...-RK)}$$\n\n同时满足公式：\n\n$$R_{ekv}=\\sum_{i=1}^K R_i$$\n\n并联时可以这样表示：\n\n$$\\text{(R1|R2|R3|...|RK)}$$\n\n同时满足公式：\n\n$$R_{ekv}=\\frac{1}{\\sum_{i=1}^K \\frac{1}{R_i}}$$\n\n现有一个包含 $N$ 种阻值为 $R_i$ 的电阻和足够多的导线。给定这些电阻的连接方式，求整条电路的等效电阻值。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个实数 $R_i$。\n\n第三行，一个字符串 $S$，表示电路。字符串只包含 $\\texttt R$、$\\texttt 1 \\sim \\texttt 9$、$\\texttt ($、$\\texttt )$、$\\texttt -$ 和 $\\texttt |$。数据保证不会有括号不匹配或不合法的现象，同时括号的数量将会最小化。任何一对括号内都不会同时出现 $\\texttt -$ 和 $\\texttt |$。电路只包含给定的 $N$ 种电阻，且可能出现任意（包括 $0$）次。", "outputFormat": "输出整条电路的等效电阻值。输出与标准答案相差不超过 $10^{-5}$ 则视为正确。", "hint": "**【数据规模与约定】**\n\n- 对于 $20\\%$ 的数据，$N=3$ 且电路恰好包含这三种电阻。\n- 对于 $40\\%$ 的数据，$S$ 中只包含一对括号。\n- 对于 $100\\%$ 的数据，$1 \\le N \\le 9$，$0 \\lt R_i \\lt 100$，$1 \\le |S| \\le 10^5$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 4 Otpor_。**\n\n**本题分值按 COCI 原题设置，满分 $120$。**", "locale": "zh-CN"}}}
{"pid": "P8036", "type": "P", "difficulty": 4, "samples": [["3\n1 1 1\n2 0 2\n3 1 1", "1\n8\n4"], ["3\n4 1 1\n5 2 3\n5 0 3", "6\n4\n24"], ["4\n7 2 5\n6 1 1\n10 4 5\n6 2 2", "6\n20\n5\n4"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #7] Prosti", "background": "", "description": "现有 $Q$ 组询问，每次给出正整数 $K,L,M$。定义全体高兴数的集合为 $\\{x|x \\le M$ 或 $x$ 为质数$\\}$。\n\n对于每次询问，求一个正整数 $i$，使得 $[i,i+K-1]$ 内恰好有 $L$ 个高兴数。如果不大于 $10^7$ 的 $i$ 值不存在，输出 $-1$。", "inputFormat": "第一行，一个整数 $Q$。\n\n接下来的 $Q$ 行，每行三个整数 $K_i,L_i,M_i$。", "outputFormat": "输出 $Q$ 行，每行对应一次询问的答案。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le Q \\le 10^5$，$1 \\le K_i,M_i \\le 150$，$0 \\le L_i \\le K_i$。\n\n**【提示与说明】**\n\n欢迎大家通过私信或发帖对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/rj308p4r) 进行 hack。\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 5 Prosti_。**\n\n**本题分值按 COCI 原题设置，满分 $140$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #7] Prosti", "background": "", "description": "现有 $Q$ 组询问，每次给出正整数 $K,L,M$。定义全体高兴数的集合为 $\\{x|x \\le M$ 或 $x$ 为质数$\\}$。\n\n对于每次询问，求一个正整数 $i$，使得 $[i,i+K-1]$ 内恰好有 $L$ 个高兴数。如果不大于 $10^7$ 的 $i$ 值不存在，输出 $-1$。", "inputFormat": "第一行，一个整数 $Q$。\n\n接下来的 $Q$ 行，每行三个整数 $K_i,L_i,M_i$。", "outputFormat": "输出 $Q$ 行，每行对应一次询问的答案。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le Q \\le 10^5$，$1 \\le K_i,M_i \\le 150$，$0 \\le L_i \\le K_i$。\n\n**【提示与说明】**\n\n欢迎大家通过私信或发帖对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/rj308p4r) 进行 hack。\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 5 Prosti_。**\n\n**本题分值按 COCI 原题设置，满分 $140$。**", "locale": "zh-CN"}}}
{"pid": "P8037", "type": "P", "difficulty": 6, "samples": [["5\n5 4 3 3 2\n3\n1 2\n1 1\n2 4", "2\n1\n3"], ["6\n6 6 5 1 6 2\n3\n4 5\n4 6\n1 4", "2\n2\n4"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2015", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #7] Prokletnik", "background": "", "description": "定义魔法序列为满足所有元素的大小均在第一个元素和最后一个元素之间的序列。\n\n现有一个元素个数为 $N$ 的数组 $a$。给出 $Q$ 次询问 $L,R$，求 $a$ 中下标在 $[L,R]$ 之间的最长的子魔法区间。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个整数 $a_i$。\n\n第三行，一个整数 $Q$。\n\n接下来的 $Q$ 行，每行两个整数 $L,R$。", "outputFormat": "输出 $Q$ 行，每行对应一次询问的答案。", "hint": "**【数据规模与约定】**\n\n- 对于 $50\\%$ 的数据，$N,Q \\le 3 \\times 10^4$。\n- 对于 $100\\%$ 的数据，$1 \\le N,Q \\le 5 \\times 10^5$，$1 \\le a_i \\le 10^9$，$1 \\le L \\le R \\le N$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 6 Prokletnik_。**\n\n**本题分值按 COCI 原题设置，满分 $160$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #7] Prokletnik", "background": "", "description": "定义魔法序列为满足所有元素的大小均在第一个元素和最后一个元素之间的序列。\n\n现有一个元素个数为 $N$ 的数组 $a$。给出 $Q$ 次询问 $L,R$，求 $a$ 中下标在 $[L,R]$ 之间的最长的子魔法区间。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个整数 $a_i$。\n\n第三行，一个整数 $Q$。\n\n接下来的 $Q$ 行，每行两个整数 $L,R$。", "outputFormat": "输出 $Q$ 行，每行对应一次询问的答案。", "hint": "**【数据规模与约定】**\n\n- 对于 $50\\%$ 的数据，$N,Q \\le 3 \\times 10^4$。\n- 对于 $100\\%$ 的数据，$1 \\le N,Q \\le 5 \\times 10^5$，$1 \\le a_i \\le 10^9$，$1 \\le L \\le R \\le N$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 6 Prokletnik_。**\n\n**本题分值按 COCI 原题设置，满分 $160$。**", "locale": "zh-CN"}}}
{"pid": "P8038", "type": "P", "difficulty": 1, "samples": [["4 3\n1 5 2\n2 3 4\n4 3 2\n5 4 6\n3\n-1 -1 2\n-1 3 2\n-1 -1 -1", "2\n1\n4"], ["3 8\n6 5 97 99 82 50 95 1\n85 62 11 64 94 84 88 19\n43 99 11 64 94 84 31 19\n3\n-1 -1 11 64 94 84 -1 19\n-1 -1 -1 99 -1 -1 -1 1\n95 -1 -1 -1 -1 80 -1 -1", "2\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2016", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #7] BAZA", "background": "", "description": "Mirko 在一家大型的 IT 公司获得了暑期实习的机会。这家公司建造了一个大型数据库，包含 $N$ 行 $M$ 列，第 $i$ 行第 $j$ 列上的整数是 $A_{i,j}$。\n\n在他实习的第一天，他收到了 $Q$ 次询问，每一次询问包含 $M$ 个整数 $B_1,B_2,\\dots,B_M$。但不幸的是，有些数在传输的过程中丢失了，数据库将它们替换为 $-1$。Mirko 需要回答数据库中有多少行和询问中的所有数匹配。形式化的说，Mirko 需要回答在范围 $[1,N]$ 内有多少个整数 $i$，满足 $\\forall j\\in[1,M]$，$B_j=-1$ 或 $B_j=A_{i,j}$。例如，如果 $M=3$，某一次询问为 $-1~3~2$，那么 Mirko 需要找到所有满足第一列为任意整数，第二列为 $3$，第三列为 $2$ 的行数。\n\nMirko 毕竟是刚开始实习的新人，因此他希望能够得到你的帮助。现在，请你帮助他回答这些询问！", "inputFormat": "第一行输入两个整数 $N,M$，分别表示数据库的行数和列数。  \n随后 $N$ 行，每行输入 $M$ 个整数，描述这个数据库。  \n随后一行输入一个整数 $Q$，表示询问次数。  \n随后 $Q$ 行，每行输入 $M$ 个整数，描述一次询问。\n", "outputFormat": "对于每次询问，输出一行一个整数，表示满足要求的行数。", "hint": "**【样例 1 解释】**\n\n对于第一次询问，第一行和第三行满足询问中第三列是 $2$ 的要求。  \n对于第二次询问，只有第三行满足询问中第二列是 $3$，第三列是 $2$ 的要求。  \n对于第三次询问，由于并没有对每一列上的数作出要求，因此所有行都满足要求。\n\n**【数据范围】**\n\n对于所有数据，$1\\leqslant N,M\\leqslant 10^3$，$1\\leqslant Q\\leqslant 50$，$1\\leqslant A_{i,j}\\leqslant 10^6$，$B_j=-1$ 或 $1\\leqslant B_j\\leqslant 10^6$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T1 BAZA_**，按照原题数据配置，满分 $50$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #7] BAZA", "background": "", "description": "Mirko 在一家大型的 IT 公司获得了暑期实习的机会。这家公司建造了一个大型数据库，包含 $N$ 行 $M$ 列，第 $i$ 行第 $j$ 列上的整数是 $A_{i,j}$。\n\n在他实习的第一天，他收到了 $Q$ 次询问，每一次询问包含 $M$ 个整数 $B_1,B_2,\\dots,B_M$。但不幸的是，有些数在传输的过程中丢失了，数据库将它们替换为 $-1$。Mirko 需要回答数据库中有多少行和询问中的所有数匹配。形式化的说，Mirko 需要回答在范围 $[1,N]$ 内有多少个整数 $i$，满足 $\\forall j\\in[1,M]$，$B_j=-1$ 或 $B_j=A_{i,j}$。例如，如果 $M=3$，某一次询问为 $-1~3~2$，那么 Mirko 需要找到所有满足第一列为任意整数，第二列为 $3$，第三列为 $2$ 的行数。\n\nMirko 毕竟是刚开始实习的新人，因此他希望能够得到你的帮助。现在，请你帮助他回答这些询问！", "inputFormat": "第一行输入两个整数 $N,M$，分别表示数据库的行数和列数。  \n随后 $N$ 行，每行输入 $M$ 个整数，描述这个数据库。  \n随后一行输入一个整数 $Q$，表示询问次数。  \n随后 $Q$ 行，每行输入 $M$ 个整数，描述一次询问。\n", "outputFormat": "对于每次询问，输出一行一个整数，表示满足要求的行数。", "hint": "**【样例 1 解释】**\n\n对于第一次询问，第一行和第三行满足询问中第三列是 $2$ 的要求。  \n对于第二次询问，只有第三行满足询问中第二列是 $3$，第三列是 $2$ 的要求。  \n对于第三次询问，由于并没有对每一列上的数作出要求，因此所有行都满足要求。\n\n**【数据范围】**\n\n对于所有数据，$1\\leqslant N,M\\leqslant 10^3$，$1\\leqslant Q\\leqslant 50$，$1\\leqslant A_{i,j}\\leqslant 10^6$，$B_j=-1$ 或 $1\\leqslant B_j\\leqslant 10^6$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T1 BAZA_**，按照原题数据配置，满分 $50$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8039", "type": "P", "difficulty": 2, "samples": [["10", "1 4"], ["27", "13 14\n8 10\n2 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2016", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #7] UZASTOPNI", "background": "**本题和 [P1147](https://www.luogu.com.cn/problem/P1147) 的区别仅在于连续自然数和的数据范围和输出格式。**", "description": "求出所有的和为 $N$ 的长度 $\\geqslant 2$ 的连续自然数段。", "inputFormat": "输入仅一行一个整数 $N$，表示连续自然数段的和。", "outputFormat": "输出若干行，每行两个整数，表示满足条件的连续自然数段中的第一个数和最后一个数，**按第一个数的值降序排列**。\n\n对于给定的输入数据，保证至少有一个解。", "hint": "**【样例 1 解释】**\n\n$10=1+2+3+4$，可以发现和为 $10$ 的满足要求的连续自然数段有且仅有一个。\n\n**【数据范围】**\n\n对于所有数据，$3\\leqslant N\\leqslant 10^{10}$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T2 UZASTOPNI_**，按照原题数据配置，满分 $80$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #7] UZASTOPNI", "background": "**本题和 [P1147](https://www.luogu.com.cn/problem/P1147) 的区别仅在于连续自然数和的数据范围和输出格式。**", "description": "求出所有的和为 $N$ 的长度 $\\geqslant 2$ 的连续自然数段。", "inputFormat": "输入仅一行一个整数 $N$，表示连续自然数段的和。", "outputFormat": "输出若干行，每行两个整数，表示满足条件的连续自然数段中的第一个数和最后一个数，**按第一个数的值降序排列**。\n\n对于给定的输入数据，保证至少有一个解。", "hint": "**【样例 1 解释】**\n\n$10=1+2+3+4$，可以发现和为 $10$ 的满足要求的连续自然数段有且仅有一个。\n\n**【数据范围】**\n\n对于所有数据，$3\\leqslant N\\leqslant 10^{10}$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T2 UZASTOPNI_**，按照原题数据配置，满分 $80$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8040", "type": "P", "difficulty": 2, "samples": [["3\nabc\nabc", "bca"], ["4\nbaba\nbaab", "abba"], ["5\naaabc\nabcba", "baaac"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2016", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #7] IGRA", "background": "Mirko 和 Slavko 对他们的滑雪旅行感到十分厌烦，于是他们开始玩一个新游戏。", "description": "首先，Mirko 指定了一个整数 $N$，然后 Slavko 写下了 $N$ 个字母，Mirko 写下了一个长度为 $N$ 的单词。Slavko 需要他写下的 $N$ 个字母组成一个单词，并且他的单词中没有一个位置上的字母与 Mirko 写下的单词中相同位置的字母相同。为了使得这个游戏具有挑战性，Mirko 还要求 Slavko 写下的单词是所有满足要求的单词中字典序最小的。这个单词**必定会存在**。介于 Mirko 和 Slavko 还很年轻，他们只知道 `a`、`b`、`c` 三个字母，因此他们写下的单词也都只会包含这三个字母。\n\n请帮助 Slavko 找到这样的单词。", "inputFormat": "第一行输入一个整数 $N$，表示 Mirko 和 Slavko 写下的单词包含的字母数。  \n第二行输入一个长度为 $N$ 的字符串，表示 Slavko 写下的单词中包含的所有字母。  \n第三行输入一个长度为 $N$ 的字符串，表示 Mirko 写下的单词。", "outputFormat": "输出一行一个长度为 $N$ 的字符串，表示满足要求的字典序最小的字符串。\n\n对于两个长度为 $N$ 的字符串 $a,b$，当且仅当存在一个整数 $p\\in[1,N]$，使得 $\\forall i\\in[1,p)$，$a_i=b_i$，且 $a_p<b_p$ 时，$a$ 的字典序小于 $b$。", "hint": "**【数据范围】**\n\n对于 $40\\%$ 的数据，保证 $1\\leqslant N\\leqslant 20$。  \n对于所有数据，$1\\leqslant N\\leqslant 5000$，所有字符串仅可能包含字母 `a`、`b`、`c`。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T3 IGRA_**，按照原题数据配置，满分 $100$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #7] IGRA", "background": "Mirko 和 Slavko 对他们的滑雪旅行感到十分厌烦，于是他们开始玩一个新游戏。", "description": "首先，Mirko 指定了一个整数 $N$，然后 Slavko 写下了 $N$ 个字母，Mirko 写下了一个长度为 $N$ 的单词。Slavko 需要他写下的 $N$ 个字母组成一个单词，并且他的单词中没有一个位置上的字母与 Mirko 写下的单词中相同位置的字母相同。为了使得这个游戏具有挑战性，Mirko 还要求 Slavko 写下的单词是所有满足要求的单词中字典序最小的。这个单词**必定会存在**。介于 Mirko 和 Slavko 还很年轻，他们只知道 `a`、`b`、`c` 三个字母，因此他们写下的单词也都只会包含这三个字母。\n\n请帮助 Slavko 找到这样的单词。", "inputFormat": "第一行输入一个整数 $N$，表示 Mirko 和 Slavko 写下的单词包含的字母数。  \n第二行输入一个长度为 $N$ 的字符串，表示 Slavko 写下的单词中包含的所有字母。  \n第三行输入一个长度为 $N$ 的字符串，表示 Mirko 写下的单词。", "outputFormat": "输出一行一个长度为 $N$ 的字符串，表示满足要求的字典序最小的字符串。\n\n对于两个长度为 $N$ 的字符串 $a,b$，当且仅当存在一个整数 $p\\in[1,N]$，使得 $\\forall i\\in[1,p)$，$a_i=b_i$，且 $a_p<b_p$ 时，$a$ 的字典序小于 $b$。", "hint": "**【数据范围】**\n\n对于 $40\\%$ 的数据，保证 $1\\leqslant N\\leqslant 20$。  \n对于所有数据，$1\\leqslant N\\leqslant 5000$，所有字符串仅可能包含字母 `a`、`b`、`c`。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T3 IGRA_**，按照原题数据配置，满分 $100$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8041", "type": "P", "difficulty": 3, "samples": [["2\n2 -10\n-4 -3", "10100"], ["4\n2 3\n-9 4\n-2 -13\n-1 -7", "111000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #7] POKLON", "background": "", "description": "今天，Kile 在庆祝他的生日。他最好的朋友 Ivan 决定送给他一个特殊的天平。这种天平的特点是它是递归的，即在每个梁的末端，要么有一个砝码，要么有一个新的天平，要么什么都没有。当然，如果天平左梁上的总质量大于右梁上的总质量，则天平会向左倾斜。类似地，如果右侧梁上的质量较大，则天平向右倾斜。否则，我们说天平是平衡的。注意这里和我们平常所了解的天平的平衡条件是不同的。下图是一个该类天平的例子。 \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vupj9ham.png)\n\nKile 真的很喜欢这份礼物，作为一名真正的计算机科学家，他立即尝试使用总质量尽可能小的新的砝码来平衡这份礼物。新砝码的重量应该是**正实数**。如果某一个天平本身是平衡的，并且它的所有子天平都是平衡的，那么我们说这个天平是平衡的。\n\n成功平衡天平后，Kile 决定在胸前纹上天平上砝码的总质量，以二进制表示，不带前导零。可以证明总质量必然是一个**正整数**。我们想知道 Kile 在胸前纹的的号码是多少，即以质量尽可能小的新的砝码来平衡这个天平之后，天平上所有砝码的总质量的二进制表示。", "inputFormat": "第一行输入一个整数 $N$，表示天平里面包含的子天平数量。根天平的编号为 $1$。  \n随后 $N$ 行，第 $i$ 行两个整数 $a,b$，其中，如果 $a$ 是正数，那么就表示 $i$ 号天平左端是一个天平，否则表示 $i$ 号天平左端是一个质量为 $-a$ 的砝码；如果 $b$ 是正数，那么就表示 $i$ 号天平右端是一个天平，否则表示 $i$ 号天平右端是一个质量为 $-b$ 的砝码。", "outputFormat": "输出仅一行，表示以质量尽可能小的新的砝码来平衡这个天平之后，天平上所有砝码的总质量的二进制表示。**不包含前导零**。", "hint": "**【样例 1 解释】**\n\n天平的初始状态见题目描述中的图片。Kile 将会在 $2$ 号天平的左侧放一个质量为 $1$ 的砝码，右侧放一个质量为 $2$ 的砝码。此时，两个天平都处于平衡状态，可以证明这种方案增加的新的砝码的质量是最小的。此时，天平上所有砝码的总质量是 $5+5+10=20$，其二进制表示为 $10100$。\n\n**【数据范围】**\n\n对于所有数据，$1\\leqslant N\\leqslant 10^6$，$-10^9\\leqslant a,b\\leqslant N$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T4 POKLON_**，按照原题数据配置，满分 $120$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #7] POKLON", "background": "", "description": "今天，Kile 在庆祝他的生日。他最好的朋友 Ivan 决定送给他一个特殊的天平。这种天平的特点是它是递归的，即在每个梁的末端，要么有一个砝码，要么有一个新的天平，要么什么都没有。当然，如果天平左梁上的总质量大于右梁上的总质量，则天平会向左倾斜。类似地，如果右侧梁上的质量较大，则天平向右倾斜。否则，我们说天平是平衡的。注意这里和我们平常所了解的天平的平衡条件是不同的。下图是一个该类天平的例子。 \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vupj9ham.png)\n\nKile 真的很喜欢这份礼物，作为一名真正的计算机科学家，他立即尝试使用总质量尽可能小的新的砝码来平衡这份礼物。新砝码的重量应该是**正实数**。如果某一个天平本身是平衡的，并且它的所有子天平都是平衡的，那么我们说这个天平是平衡的。\n\n成功平衡天平后，Kile 决定在胸前纹上天平上砝码的总质量，以二进制表示，不带前导零。可以证明总质量必然是一个**正整数**。我们想知道 Kile 在胸前纹的的号码是多少，即以质量尽可能小的新的砝码来平衡这个天平之后，天平上所有砝码的总质量的二进制表示。", "inputFormat": "第一行输入一个整数 $N$，表示天平里面包含的子天平数量。根天平的编号为 $1$。  \n随后 $N$ 行，第 $i$ 行两个整数 $a,b$，其中，如果 $a$ 是正数，那么就表示 $i$ 号天平左端是一个天平，否则表示 $i$ 号天平左端是一个质量为 $-a$ 的砝码；如果 $b$ 是正数，那么就表示 $i$ 号天平右端是一个天平，否则表示 $i$ 号天平右端是一个质量为 $-b$ 的砝码。", "outputFormat": "输出仅一行，表示以质量尽可能小的新的砝码来平衡这个天平之后，天平上所有砝码的总质量的二进制表示。**不包含前导零**。", "hint": "**【样例 1 解释】**\n\n天平的初始状态见题目描述中的图片。Kile 将会在 $2$ 号天平的左侧放一个质量为 $1$ 的砝码，右侧放一个质量为 $2$ 的砝码。此时，两个天平都处于平衡状态，可以证明这种方案增加的新的砝码的质量是最小的。此时，天平上所有砝码的总质量是 $5+5+10=20$，其二进制表示为 $10100$。\n\n**【数据范围】**\n\n对于所有数据，$1\\leqslant N\\leqslant 10^6$，$-10^9\\leqslant a,b\\leqslant N$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T4 POKLON_**，按照原题数据配置，满分 $120$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8042", "type": "P", "difficulty": 0, "samples": [["3\n0 0\n4 0\n3 -1", "1\n1 2 3"], ["4\n5 0\n0 5\n-2 -2\n-3 2", "2\n1 2 3\n1 2 4"], ["3\n-1 -1\n-2 -2\n-3 -3", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2016", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #7] PARALELOGRAMI", "background": "", "description": "最近，一个叫 _Parallelograms_ 的游戏迅速在网络上流行。游戏一开始有 $N$ 个点，每个点的坐标**互不相同**。每次操作你可以选择三个**不共线**的点 $A,B,C$，然后，画出点 $D$，使得四边形 $ACBD$ 是以 $AB$ 为对角线的平行四边形，然后把点 $C$ 移动到点 $D$。注意这样的点 $D$ 有且仅有一个。\n\n虽然在一开始所有点的坐标都互不相同，但是，你可以通过若干次操作使得某些点的坐标相同。与此同时，所有点的坐标的绝对值不能超过 $10^9$。\n\n现在，请你通过最多 $2500$ 次操作，使得最终所有点都在第一象限，或者报告不存在操作方案。请注意，**你并不需要求出操作次数最少的操作方案**，你只需要求出操作次数不超过 $2500$ 且满足题目要求的方案即可。", "inputFormat": "第一行输入一个整数 $N$，表示点的个数。  \n随后 $N$ 行，每行两个整数 $X_i,Y_i$，分别表示第 $i$ 个点的横坐标和纵坐标。", "outputFormat": "如果无解，输出一行 `-1`。\n\n否则，第一行输出一个整数 $M$，表示操作次数。  \n随后 $M$ 行，每行三个整数 $A,B,C$，表示一次操作中选择的三个点的编号。点 $C$ 按照题目描述部分所述规则变换，而点 $A,B$ 不做任何变换。", "hint": "**【数据范围】**\n\n对于所有数据，$3\\leqslant N\\leqslant 400$，$-10\\leqslant X_i,Y_i\\leqslant 10$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T5 PARALELOGRAMI_**，按照原题数据配置，满分 $140$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。\n\n感谢 [mutton](https://www.luogu.com.cn/user/137367) 提供本题的 [SPJ](https://www.luogu.com.cn/paste/ck8tv23j)，如有 hack 数据，请直接私信给 mutton。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #7] PARALELOGRAMI", "background": "", "description": "最近，一个叫 _Parallelograms_ 的游戏迅速在网络上流行。游戏一开始有 $N$ 个点，每个点的坐标**互不相同**。每次操作你可以选择三个**不共线**的点 $A,B,C$，然后，画出点 $D$，使得四边形 $ACBD$ 是以 $AB$ 为对角线的平行四边形，然后把点 $C$ 移动到点 $D$。注意这样的点 $D$ 有且仅有一个。\n\n虽然在一开始所有点的坐标都互不相同，但是，你可以通过若干次操作使得某些点的坐标相同。与此同时，所有点的坐标的绝对值不能超过 $10^9$。\n\n现在，请你通过最多 $2500$ 次操作，使得最终所有点都在第一象限，或者报告不存在操作方案。请注意，**你并不需要求出操作次数最少的操作方案**，你只需要求出操作次数不超过 $2500$ 且满足题目要求的方案即可。", "inputFormat": "第一行输入一个整数 $N$，表示点的个数。  \n随后 $N$ 行，每行两个整数 $X_i,Y_i$，分别表示第 $i$ 个点的横坐标和纵坐标。", "outputFormat": "如果无解，输出一行 `-1`。\n\n否则，第一行输出一个整数 $M$，表示操作次数。  \n随后 $M$ 行，每行三个整数 $A,B,C$，表示一次操作中选择的三个点的编号。点 $C$ 按照题目描述部分所述规则变换，而点 $A,B$ 不做任何变换。", "hint": "**【数据范围】**\n\n对于所有数据，$3\\leqslant N\\leqslant 400$，$-10\\leqslant X_i,Y_i\\leqslant 10$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T5 PARALELOGRAMI_**，按照原题数据配置，满分 $140$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。\n\n感谢 [mutton](https://www.luogu.com.cn/user/137367) 提供本题的 [SPJ](https://www.luogu.com.cn/paste/ck8tv23j)，如有 hack 数据，请直接私信给 mutton。", "locale": "zh-CN"}}}
{"pid": "P8043", "type": "P", "difficulty": 7, "samples": [["2\n2\n1 2", "2\n4"], ["2\n2\n1 1", "2\n6"], ["3\n3\n1 2 3", "3\n9\n27"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2016", "期望", "KMP 算法", "COCI（克罗地亚）", "概率生成函数"], "title": "[COCI 2016/2017 #7] KLAVIR", "background": null, "description": "年轻的 Alisa 喜欢只用一根手指弹钢琴。但是，由于 Alisa 从来都没学过弹钢琴，因此她的弹琴过程完全是随机的。更准确地说，她会**等概率**选择钢琴的 $N$ 个音调上的任意一个，并且**独立于之前所有选择的音调**。\n\nAlisa 的好朋友 Mirta 想要听一个连续的包含 $M$ 个音调 $A_1,A_2,\\dots,A_M$ 的曲子，但由于 Alisa 弹琴过程是完全随机的，Mirta 只想知道，对于所有的 $1\\leqslant i\\leqslant M$，Alisa 选择音调使 Mirta 第一次听到连续的音调 $A_1,A_2,\\dots,A_i$ 的**期望次数**。为了防止精度丢失，**答案对 $\\bf 10^9+7$ 取模**。", "inputFormat": "第一行输入一个整数 $N$，表示音调个数。  \n第二行输入一个整数 $M$，表示 Mirta 想要听的曲子包含的音调个数。  \n第三行输入 $M$ 个整数 $A_i$，表示曲子的第 $i$ 个音调。", "outputFormat": "输出 $M$ 行，每行一个正整数，第 $i$ 行表示 Alisa 选择音调使 Mirta 第一次听到连续的音调 $A_1,A_2,\\dots,A_i$ 的期望次数对 $\\bf 10^9+7$ 取模之后的结果。", "hint": "**【数据范围】**\n\n对于 $40\\%$ 的数据，保证 $1\\leqslant M\\leqslant 200$。  \n对于所有数据，$1\\leqslant N\\leqslant 100$，$1\\leqslant M\\leqslant 10^6$，$1\\leqslant A_i\\leqslant N$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T6 KLAVIR_**，按照原题数据配置，满分 $160$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #7] KLAVIR", "background": null, "description": "年轻的 Alisa 喜欢只用一根手指弹钢琴。但是，由于 Alisa 从来都没学过弹钢琴，因此她的弹琴过程完全是随机的。更准确地说，她会**等概率**选择钢琴的 $N$ 个音调上的任意一个，并且**独立于之前所有选择的音调**。\n\nAlisa 的好朋友 Mirta 想要听一个连续的包含 $M$ 个音调 $A_1,A_2,\\dots,A_M$ 的曲子，但由于 Alisa 弹琴过程是完全随机的，Mirta 只想知道，对于所有的 $1\\leqslant i\\leqslant M$，Alisa 选择音调使 Mirta 第一次听到连续的音调 $A_1,A_2,\\dots,A_i$ 的**期望次数**。为了防止精度丢失，**答案对 $\\bf 10^9+7$ 取模**。", "inputFormat": "第一行输入一个整数 $N$，表示音调个数。  \n第二行输入一个整数 $M$，表示 Mirta 想要听的曲子包含的音调个数。  \n第三行输入 $M$ 个整数 $A_i$，表示曲子的第 $i$ 个音调。", "outputFormat": "输出 $M$ 行，每行一个正整数，第 $i$ 行表示 Alisa 选择音调使 Mirta 第一次听到连续的音调 $A_1,A_2,\\dots,A_i$ 的期望次数对 $\\bf 10^9+7$ 取模之后的结果。", "hint": "**【数据范围】**\n\n对于 $40\\%$ 的数据，保证 $1\\leqslant M\\leqslant 200$。  \n对于所有数据，$1\\leqslant N\\leqslant 100$，$1\\leqslant M\\leqslant 10^6$，$1\\leqslant A_i\\leqslant N$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T6 KLAVIR_**，按照原题数据配置，满分 $160$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8044", "type": "P", "difficulty": 1, "samples": [["300\n500", "0\n500"], ["65743\n9651", "673\n95"], ["2341\n6785", "YODA\n6785"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #4] YODA", "background": "很久很久以前，在一个遥远的星系里，一个巨大的整数碰撞正在发生。", "description": "当两个整数碰撞时会发生什么？先将数位较少的数前不断添加前导 $0$ 直到和数位较高的数的数位数量相同为止。然后，从两个数的最低位开始，每次将两个数的对应数位进行比较，并删去较小的那个数位（如果这两个数位相等则**不执行任何操作**），不断向高数位执行上述操作，直到最高位为止。此时，将这两个数中没有删去的数位按顺序依次拼接，可以得到两个新数。\n\n例如，对于 $456328$ 和 $284315$ 这两个数，这两个的碰撞过程如下所示：\n\n| $4$ | $\\sout{~5~}$ | $6$ | $3$ | $2$ | $8$ |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $\\sout{~2~}$ | $8$ | $\\sout{~4~}$ | $3$ | $\\sout{~1~}$ | $\\sout{~5~}$ |\n\n不难看出，碰撞之后得到的两个新数为 $46328$ 和 $83$。\n\n现在给定两个数 $n,m$，请求出这两个数进行碰撞之后分别得到的新数。如果某个数在进行碰撞之后，其数位都已经被删空了，则在输出中输出一行字符串 `YODA`。具体见『输出格式』部分。", "inputFormat": "第一行输入一个整数 $n$，表示要进行碰撞的第一个数。  \n第二行输入一个整数 $m$，表示要进行碰撞的第二个数。", "outputFormat": "输出共两行。\n\n第一行中，如果 $n$ 的数位已经删空，则输出一个字符串 `YODA`，否则输出一个整数，表示 $n$ 进行碰撞后得到的新数。  \n第二行中，如果 $m$ 的数位已经删空，则输出一个字符串 `YODA`，否则输出一个整数，表示 $m$ 进行碰撞后得到的新数。  ", "hint": "**【样例解释 2】**\n\n对于样例 $2$，这两个数碰撞的过程如下所示：\n\n| $6$ | $\\sout{~5~}$ | $7$ | $\\sout{~4~}$ | $3$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $\\sout{~0~}$ | $9$ | $\\sout{~6~}$ | $5$ | $\\sout{~1~}$ |\n\n因此，碰撞之后得到的两个新数分别是 $673$ 和 $95$。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，保证 $n$ 和 $m$ 由三位数字组成。  \n对于所有数据，$1\\leqslant n,m\\leqslant 10^9$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T1 YODA_**，按照原题数据配置，满分 $50$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #4] YODA", "background": "很久很久以前，在一个遥远的星系里，一个巨大的整数碰撞正在发生。", "description": "当两个整数碰撞时会发生什么？先将数位较少的数前不断添加前导 $0$ 直到和数位较高的数的数位数量相同为止。然后，从两个数的最低位开始，每次将两个数的对应数位进行比较，并删去较小的那个数位（如果这两个数位相等则**不执行任何操作**），不断向高数位执行上述操作，直到最高位为止。此时，将这两个数中没有删去的数位按顺序依次拼接，可以得到两个新数。\n\n例如，对于 $456328$ 和 $284315$ 这两个数，这两个的碰撞过程如下所示：\n\n| $4$ | $\\sout{~5~}$ | $6$ | $3$ | $2$ | $8$ |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $\\sout{~2~}$ | $8$ | $\\sout{~4~}$ | $3$ | $\\sout{~1~}$ | $\\sout{~5~}$ |\n\n不难看出，碰撞之后得到的两个新数为 $46328$ 和 $83$。\n\n现在给定两个数 $n,m$，请求出这两个数进行碰撞之后分别得到的新数。如果某个数在进行碰撞之后，其数位都已经被删空了，则在输出中输出一行字符串 `YODA`。具体见『输出格式』部分。", "inputFormat": "第一行输入一个整数 $n$，表示要进行碰撞的第一个数。  \n第二行输入一个整数 $m$，表示要进行碰撞的第二个数。", "outputFormat": "输出共两行。\n\n第一行中，如果 $n$ 的数位已经删空，则输出一个字符串 `YODA`，否则输出一个整数，表示 $n$ 进行碰撞后得到的新数。  \n第二行中，如果 $m$ 的数位已经删空，则输出一个字符串 `YODA`，否则输出一个整数，表示 $m$ 进行碰撞后得到的新数。  ", "hint": "**【样例解释 2】**\n\n对于样例 $2$，这两个数碰撞的过程如下所示：\n\n| $6$ | $\\sout{~5~}$ | $7$ | $\\sout{~4~}$ | $3$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $\\sout{~0~}$ | $9$ | $\\sout{~6~}$ | $5$ | $\\sout{~1~}$ |\n\n因此，碰撞之后得到的两个新数分别是 $673$ 和 $95$。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，保证 $n$ 和 $m$ 由三位数字组成。  \n对于所有数据，$1\\leqslant n,m\\leqslant 10^9$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T1 YODA_**，按照原题数据配置，满分 $50$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8045", "type": "P", "difficulty": 2, "samples": [["5\nUPIT 1 b\nUPIT 3 b\nSMJER 4\nUPIT 7 a\nUPIT 10 z", "0\n1\n2\n1"], ["5\nSMJER 1\nSMJER 2\nSMJER 3\nUPIT 5 a\nUPIT 7 w", "2\n1"], ["4\nUPIT 100 a\nUPIT 200 c\nUPIT 300 a\nUPIT 400 b", "4\n8\n12\n16"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #4] HAN", "background": "Han 不想单独学习，所以他邀请他的朋友 Dominik 过来。他们一起学习了一个晚上之后，Dominik 回家了。令他吃惊的是，一名警察拦住了他，认为他**喝醉了**。众所周知，在这种情况下，通过解决一系列精心设计的任务，测试一个人的认知能力，可以证明他是否清醒。如果我们能相信 Dominik，对话将会是这样的——\n\n> 警察：从简单点的问题开始吧……冒泡排序的复杂度是多少？  \nDominik：太简单了，$\\mathcal O(n^2)$。  \n警察：很好，下一题。请倒着念英文字母表。  \nDominik：太无聊了，$\\texttt{zyxwvutsrqponmlkjihgfedcba}$。  \n警察：你这显然是背的，不算数。再来考你一题吧。想象一下，英文字母表中的从 $\\texttt{a}$ 到 $\\texttt{z}$ 的所有字母以顺时针顺次排列成一个环。初始时，你从字母 $\\texttt{a}$ 开始，顺时针念字母。每念完一个字母，我可以告诉你按照相反方向念字母，或者询问你到目前为止某个字母你念了多少次。准备好了吗？开始！  \nDominik：唔……$\\texttt{a}$、$\\texttt{b}$、$\\texttt{c}$……\n\n警察的最后一个问题显然难倒了 Dominik。现在，请你帮助 Dominik 回答这些问题。", "description": "具体地，警察在接下来将会发出 $q$ 次命令，每次命令为以下两种命令中的一种：\n\n- $\\bf SMJER~n$：在 Dominik 说完第 $n$ 个字母之后，他必须开始按照与当前方向相反的方向念字母。\n- $\\bf UPIT~n~x$：Dominik 需要回答在他念的前 $n$ 个字母中，字母 $x$ 出现了多少次。\n\n你需要对于每次 $\\bf UPIT~n~x$ 命令输出答案。", "inputFormat": "第一行一个整数 $q$，表示警察发出的命令数。  \n随后 $q$ 行，描述 $q$ 次命令。每行先输入一个字符串 $s$ 和一个整数 $n$。如果 $s$ 是 $\\bf UPIT$，则在输入完一个整数 $n$ 之后还需要输入一个字符 $x$。\n\n数据保证对于所有 $q$ 次命令，$n$ 严格递增。形式化地说，$\\forall i\\in [1,q)$，$n_i<n_{i+1}$。", "outputFormat": "对于每次 $\\bf UPIT~n~x$ 命令，输出一行一个整数，表示在 Dominik 说的前 $n$ 个字母中，字符 $x$ 出现的次数。", "hint": "**【样例 1 解释】**\n\nDominik 说的前 $10$ 个字母依次是：$\\texttt{a}$，$\\texttt{b}$，$\\texttt{c}$，$\\texttt{d}$，$\\texttt{c}$，$\\texttt{b}$，$\\texttt{a}$，$\\texttt{z}$，$\\texttt{y}$，$\\texttt{x}$。  \n\n**【样例 2 解释】**\n\nDominik 说的前 $7$ 个字母依次是：$\\texttt{a}$，$\\texttt{z}$，$\\texttt{a}$，$\\texttt{z}$，$\\texttt{y}$，$\\texttt{x}$，$\\texttt{w}$。\n\n**【数据范围】**\n\n对于 $40\\%$ 的数据，保证 $n\\leqslant 1000$。  \n对于 $60\\%$ 的数据，保证 $n\\leqslant 10^5$。  \n对于所有数据，$1\\leqslant q\\leqslant 10^5$，$1\\leqslant n\\leqslant 10^9$，$x$ 仅包含小写字母。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T2 HAN_**，按照原题数据配置，满分 $80$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #4] HAN", "background": "Han 不想单独学习，所以他邀请他的朋友 Dominik 过来。他们一起学习了一个晚上之后，Dominik 回家了。令他吃惊的是，一名警察拦住了他，认为他**喝醉了**。众所周知，在这种情况下，通过解决一系列精心设计的任务，测试一个人的认知能力，可以证明他是否清醒。如果我们能相信 Dominik，对话将会是这样的——\n\n> 警察：从简单点的问题开始吧……冒泡排序的复杂度是多少？  \nDominik：太简单了，$\\mathcal O(n^2)$。  \n警察：很好，下一题。请倒着念英文字母表。  \nDominik：太无聊了，$\\texttt{zyxwvutsrqponmlkjihgfedcba}$。  \n警察：你这显然是背的，不算数。再来考你一题吧。想象一下，英文字母表中的从 $\\texttt{a}$ 到 $\\texttt{z}$ 的所有字母以顺时针顺次排列成一个环。初始时，你从字母 $\\texttt{a}$ 开始，顺时针念字母。每念完一个字母，我可以告诉你按照相反方向念字母，或者询问你到目前为止某个字母你念了多少次。准备好了吗？开始！  \nDominik：唔……$\\texttt{a}$、$\\texttt{b}$、$\\texttt{c}$……\n\n警察的最后一个问题显然难倒了 Dominik。现在，请你帮助 Dominik 回答这些问题。", "description": "具体地，警察在接下来将会发出 $q$ 次命令，每次命令为以下两种命令中的一种：\n\n- $\\bf SMJER~n$：在 Dominik 说完第 $n$ 个字母之后，他必须开始按照与当前方向相反的方向念字母。\n- $\\bf UPIT~n~x$：Dominik 需要回答在他念的前 $n$ 个字母中，字母 $x$ 出现了多少次。\n\n你需要对于每次 $\\bf UPIT~n~x$ 命令输出答案。", "inputFormat": "第一行一个整数 $q$，表示警察发出的命令数。  \n随后 $q$ 行，描述 $q$ 次命令。每行先输入一个字符串 $s$ 和一个整数 $n$。如果 $s$ 是 $\\bf UPIT$，则在输入完一个整数 $n$ 之后还需要输入一个字符 $x$。\n\n数据保证对于所有 $q$ 次命令，$n$ 严格递增。形式化地说，$\\forall i\\in [1,q)$，$n_i<n_{i+1}$。", "outputFormat": "对于每次 $\\bf UPIT~n~x$ 命令，输出一行一个整数，表示在 Dominik 说的前 $n$ 个字母中，字符 $x$ 出现的次数。", "hint": "**【样例 1 解释】**\n\nDominik 说的前 $10$ 个字母依次是：$\\texttt{a}$，$\\texttt{b}$，$\\texttt{c}$，$\\texttt{d}$，$\\texttt{c}$，$\\texttt{b}$，$\\texttt{a}$，$\\texttt{z}$，$\\texttt{y}$，$\\texttt{x}$。  \n\n**【样例 2 解释】**\n\nDominik 说的前 $7$ 个字母依次是：$\\texttt{a}$，$\\texttt{z}$，$\\texttt{a}$，$\\texttt{z}$，$\\texttt{y}$，$\\texttt{x}$，$\\texttt{w}$。\n\n**【数据范围】**\n\n对于 $40\\%$ 的数据，保证 $n\\leqslant 1000$。  \n对于 $60\\%$ 的数据，保证 $n\\leqslant 10^5$。  \n对于所有数据，$1\\leqslant q\\leqslant 10^5$，$1\\leqslant n\\leqslant 10^9$，$x$ 仅包含小写字母。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T2 HAN_**，按照原题数据配置，满分 $80$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8046", "type": "P", "difficulty": 3, "samples": [["7 2 3\n1 2\n2 1\n4 7", "1\n1\n4"], ["9 3 3\n8 9\n5 7\n8 4", "2\n2\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #4] CHEWBACCA", "background": "**本套赛题 T3 为 [P8053](https://www.luogu.com.cn/problem/P8053)。**", "description": "一棵 $n$ 个节点的 $k$ 级树是按照如下方式构造出来的：\n\n- 首先，新建根节点，并将其编号为 $1$。\n- 随后重复如下步骤直至节点总数恰好为 $n$：\n  - 设上一个新增节点的编号为 $x$。\n  - 在上一层中从左往右找到第一个儿子个数 $<k$ 的节点。\n    - 如果该节点上没有儿子，则在该节点下新增一个儿子节点，编号为 $x+1$，并在点 $x+1$ 和我们找到的该父亲节点之间连一条长度为 $1$ 的边。\n    - 否则，在该节点最近添加的儿子节点的右边新增一个儿子节点，编号为 $x+1$，并在点 $x+1$ 和我们找到的该父亲节点之间连一条长度为 $1$ 的边。\n  - 如果在当前层没有找到儿子个数 $<k$ 的节点，则跳到下一层。\n\n例如，下图为按照如上方法构造出来的包含 $9$ 个节点的 $3$ 级树：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ex7c671v.png)\n\n现在，你得到了这棵包含 $n$ 个节点的 $k$ 级树，你需要回答 $q$ 次询问。每次询问给定两个整数 $x,y$，你需要回答在该树中节点 $x$ 到节点 $y$ 的最短路径长度。", "inputFormat": "第一行输入三个整数 $n,k,q$，分别表示树的节点数、级数和询问次数。  \n随后 $q$ 行，每行输入两个整数 $x,y$，表示本次询问的两个节点。", "outputFormat": "输出 $q$ 行，每行一个整数，表示节点 $x$ 到节点 $y$ 的最短路径长度。", "hint": "**【样例 1 解释】**\n\n下图是样例 1 中构造出来的树：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v7semhvp.png)\n\n不难发现，对于第 $1$、$2$ 次询问，由于节点 $2$ 是节点 $1$ 的儿子节点，因此这两个点之间的最短路径长度恰好为 $1$。而对于第 $3$ 次询问，一条最短路径是 $4\\rightarrow 2\\rightarrow 1\\rightarrow 3\\rightarrow 7$。因此其最短路径长度为 $4$。\n\n**【样例 2 解释】**\n\n样例 2 构造出来的树见『题目描述』部分。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，保证 $1\\leqslant n,q\\leqslant 1000$。  \n对于 $50\\%$ 的数据，保证 $1\\leqslant n\\leqslant 10^5$。  \n对于所有数据，$1\\leqslant n\\leqslant 10^{15}$，$1\\leqslant k\\leqslant 1000$，$1\\leqslant q\\leqslant 10^5$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T4 CHEWBACCA_**，按照原题数据配置，满分 $120$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #4] CHEWBACCA", "background": "**本套赛题 T3 为 [P8053](https://www.luogu.com.cn/problem/P8053)。**", "description": "一棵 $n$ 个节点的 $k$ 级树是按照如下方式构造出来的：\n\n- 首先，新建根节点，并将其编号为 $1$。\n- 随后重复如下步骤直至节点总数恰好为 $n$：\n  - 设上一个新增节点的编号为 $x$。\n  - 在上一层中从左往右找到第一个儿子个数 $<k$ 的节点。\n    - 如果该节点上没有儿子，则在该节点下新增一个儿子节点，编号为 $x+1$，并在点 $x+1$ 和我们找到的该父亲节点之间连一条长度为 $1$ 的边。\n    - 否则，在该节点最近添加的儿子节点的右边新增一个儿子节点，编号为 $x+1$，并在点 $x+1$ 和我们找到的该父亲节点之间连一条长度为 $1$ 的边。\n  - 如果在当前层没有找到儿子个数 $<k$ 的节点，则跳到下一层。\n\n例如，下图为按照如上方法构造出来的包含 $9$ 个节点的 $3$ 级树：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ex7c671v.png)\n\n现在，你得到了这棵包含 $n$ 个节点的 $k$ 级树，你需要回答 $q$ 次询问。每次询问给定两个整数 $x,y$，你需要回答在该树中节点 $x$ 到节点 $y$ 的最短路径长度。", "inputFormat": "第一行输入三个整数 $n,k,q$，分别表示树的节点数、级数和询问次数。  \n随后 $q$ 行，每行输入两个整数 $x,y$，表示本次询问的两个节点。", "outputFormat": "输出 $q$ 行，每行一个整数，表示节点 $x$ 到节点 $y$ 的最短路径长度。", "hint": "**【样例 1 解释】**\n\n下图是样例 1 中构造出来的树：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v7semhvp.png)\n\n不难发现，对于第 $1$、$2$ 次询问，由于节点 $2$ 是节点 $1$ 的儿子节点，因此这两个点之间的最短路径长度恰好为 $1$。而对于第 $3$ 次询问，一条最短路径是 $4\\rightarrow 2\\rightarrow 1\\rightarrow 3\\rightarrow 7$。因此其最短路径长度为 $4$。\n\n**【样例 2 解释】**\n\n样例 2 构造出来的树见『题目描述』部分。\n\n**【数据范围】**\n\n对于 $20\\%$ 的数据，保证 $1\\leqslant n,q\\leqslant 1000$。  \n对于 $50\\%$ 的数据，保证 $1\\leqslant n\\leqslant 10^5$。  \n对于所有数据，$1\\leqslant n\\leqslant 10^{15}$，$1\\leqslant k\\leqslant 1000$，$1\\leqslant q\\leqslant 10^5$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T4 CHEWBACCA_**，按照原题数据配置，满分 $120$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8047", "type": "P", "difficulty": 5, "samples": [["2\n1 2 0\n1", "1\n0"], ["3\n1 2 4\n2 3 4\n1 2", "1\n0\n0"], ["4\n1 2 0\n2 3 0\n2 4 0\n3 1 2", "6\n3\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #4] GALAKSIJA", "background": "", "description": "很久以前，在一个很远很远的星系里，有 $n$ 颗行星和 $n−1$ 条连接所有行星的边。换句话说，行星和边形成了一棵树。此外，每条边上都有一个权值。\n\n行星对 $(A,B)$ 是**无聊的**，当且仅当如下条件成立：\n\n- $A\\neq B$。\n- 行星 $A,B$ 可以互相到达。\n- 行星 $A,B$ 之间的路径上的所有边的权值的**异或和**等于 $0$。\n\n现在，由于不可控力，该星系的所有边会**按一定顺序**摧毁。请求出初始时和每次摧毁一条边之后**无聊的**行星对数量。", "inputFormat": "第一行输入一个整数 $n$，表示行星的数量。  \n随后 $n-1$ 行，每行三个整数 $a_i,b_i,z_i$，分别表示第 $i$ 条边连接的两个点的编号和第 $i$ 条边的权值。  \n随后一行输入 $n-1$ 个整数，第 $i$ 个整数 $p_i$ 表示第 $i$ 次摧毁的边的编号。", "outputFormat": "输出 $n$ 行，每行一个整数，其中第 $i$ 个整数表示在按顺序摧毁了 $i-1$ 条边后**无聊的**行星对数量。", "hint": "**【样例 1 解释】**\n\n初始时，只有行星对 $(1,2)$ 是无聊的。在毁坏了唯一的一条边之后，就不再存在无聊的行星对了。\n\n**【样例 2 解释】**\n\n初始时，只有行星对 $(1,3)$ 是无聊的。在破坏了 $1$ 号边之后，由于行星 $1,3$ 之间不能互相到达，因此之后不再存在无聊的行星对了。\n\n**【样例 3 解释】**\n\n初始时，所有的行星对都是无聊的，因为所有行星对中的两个行星之间的路径上的所有边的权值的异或和是 $0$。\n\n**【数据范围】**\n\n对于所有数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant a_i,b_i\\leqslant n$，$0\\leqslant z_i\\leqslant 10^9$。\n\n本题一共 $10$ 个测试点，每个测试点的数据范围如下：\n\n| 测试点 | $n\\leqslant $ | 特殊性质 A |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1000$ | $\\surd$ |\n| $2$ | $1000$ | $\\times$ |\n| $3\\sim 4$ | $10^5$ | $\\surd$ |\n| $5\\sim 10$ | $10^5$ | $\\times$ |\n\n特殊性质 A：每条边的权值为 $0$。换句话说，$\\forall i\\in[1,n)$，$z_i=0$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T5 GALAKSIJA_**，按照原题数据配置，满分 $140$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #4] GALAKSIJA", "background": "", "description": "很久以前，在一个很远很远的星系里，有 $n$ 颗行星和 $n−1$ 条连接所有行星的边。换句话说，行星和边形成了一棵树。此外，每条边上都有一个权值。\n\n行星对 $(A,B)$ 是**无聊的**，当且仅当如下条件成立：\n\n- $A\\neq B$。\n- 行星 $A,B$ 可以互相到达。\n- 行星 $A,B$ 之间的路径上的所有边的权值的**异或和**等于 $0$。\n\n现在，由于不可控力，该星系的所有边会**按一定顺序**摧毁。请求出初始时和每次摧毁一条边之后**无聊的**行星对数量。", "inputFormat": "第一行输入一个整数 $n$，表示行星的数量。  \n随后 $n-1$ 行，每行三个整数 $a_i,b_i,z_i$，分别表示第 $i$ 条边连接的两个点的编号和第 $i$ 条边的权值。  \n随后一行输入 $n-1$ 个整数，第 $i$ 个整数 $p_i$ 表示第 $i$ 次摧毁的边的编号。", "outputFormat": "输出 $n$ 行，每行一个整数，其中第 $i$ 个整数表示在按顺序摧毁了 $i-1$ 条边后**无聊的**行星对数量。", "hint": "**【样例 1 解释】**\n\n初始时，只有行星对 $(1,2)$ 是无聊的。在毁坏了唯一的一条边之后，就不再存在无聊的行星对了。\n\n**【样例 2 解释】**\n\n初始时，只有行星对 $(1,3)$ 是无聊的。在破坏了 $1$ 号边之后，由于行星 $1,3$ 之间不能互相到达，因此之后不再存在无聊的行星对了。\n\n**【样例 3 解释】**\n\n初始时，所有的行星对都是无聊的，因为所有行星对中的两个行星之间的路径上的所有边的权值的异或和是 $0$。\n\n**【数据范围】**\n\n对于所有数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant a_i,b_i\\leqslant n$，$0\\leqslant z_i\\leqslant 10^9$。\n\n本题一共 $10$ 个测试点，每个测试点的数据范围如下：\n\n| 测试点 | $n\\leqslant $ | 特殊性质 A |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1000$ | $\\surd$ |\n| $2$ | $1000$ | $\\times$ |\n| $3\\sim 4$ | $10^5$ | $\\surd$ |\n| $5\\sim 10$ | $10^5$ | $\\times$ |\n\n特殊性质 A：每条边的权值为 $0$。换句话说，$\\forall i\\in[1,n)$，$z_i=0$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T5 GALAKSIJA_**，按照原题数据配置，满分 $140$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8048", "type": "P", "difficulty": 4, "samples": [["2 3 10\n0 0 D\n10 1 L", "10.0\n10.0\n0.0"], ["4 3 7\n1 0 D\n3 0 D\n4 1 L\n6 2 D", "10.0\n4.0\n1.0"], ["4 4 5\n1 1 D\n3 3 L\n4 2 D\n5 0 L", "2.5\n4.0\n2.5\n4.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #4] ENDOR", "background": "", "description": "如果我们相信《吉尼斯世界纪录大全》的话，在布满森林的 Endor 卫星上，有一根全银河系最长的棍子。在那根 $L$ 米长的棍子上有 $n$ 只欢快的变色龙。每只变色龙以 $1$ 米/秒的恒定速度沿着棍子在两个可能的方向（左或右）中的一个方向上移动，并以可能的 $k$ 种颜色之一着色。\n\n众所周知，Endor 卫星上的变色龙崇拜古老的蚂蚁法则，该法则规定变色龙必须沿着棍子行走直到走到棍子的末端，并且当与另一只变色龙发生碰撞时，该变色龙必须转过 $180$ 度，继续朝相反的方向行走。此外，在向左移动着色为 $a$ 的变色龙与向右移动的着色为 $b$ 的变色龙发生碰撞后，碰撞前向左移动的变色龙采用碰撞前向右移动的变色龙的颜色 $b$，而在碰撞前向右移动的变色龙会采用新的颜色 $(a+b)\\bmod k$。\n\n如果给你所有变色龙的初始位置、颜色和运动方向，对于每种颜色，确定采用该种颜色的变色龙在离开棍子之前的总行程。", "inputFormat": "第一行输入三个整数 $n,k,L$，分别表示变色龙的只数，颜色的种数和棍子的长度。  \n随后 $n$ 行，每行两个整数 $d_i,b_i$ 和一个字符 `L` 或 `D`，其中 $d_i,b_i$ 分别表示第 $i$ 只变色龙到棍子**左端**的距离和第 $i$ 只变色龙的颜色，字符如果是 `L`，则表示第 $i$ 只变色龙初始时面朝左边，否则表示第 $i$ 只变色龙初始时面朝右边。保证 $d_i$ 两两不同且按升序给出。", "outputFormat": "输出 $k$ 行，第 $i$ 行输出一个实数，表示采用第 $i-1$ 种颜色的变色龙离开棍子之前的总行程，**保留一位小数**。可以证明，答案要么是整数，要么是形如 $\\texttt{x.5}$ 的一位小数。", "hint": "**【样例 1 解释】**\n\n两只变色龙在行走了 $5$ 米之后发生碰撞。在此之后，$1$ 号变色龙的颜色变为 $0$，$2$ 号变色龙的颜色变为 $1$，然后它们各又继续走了 $5$ 米然后离开棍子。因此，采用第 $0$ 种颜色和第 $1$ 种颜色的变色龙各走了 $10$ 米，在此过程中不存在采用第 $2$ 种颜色的变色龙。\n\n**【数据范围】**\n\n对于 $50\\%$ 的数据，保证 $1\\leqslant n\\leqslant 3000$。  \n对于所有数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant k\\leqslant 40$，$1\\leqslant L\\leqslant 10^6$，$0\\leqslant d_i\\leqslant L$，$0\\leqslant b_i<k$，$d_{i-1}<d_i$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T6 ENDOR_**，按照原题数据配置，满分 $160$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #4] ENDOR", "background": "", "description": "如果我们相信《吉尼斯世界纪录大全》的话，在布满森林的 Endor 卫星上，有一根全银河系最长的棍子。在那根 $L$ 米长的棍子上有 $n$ 只欢快的变色龙。每只变色龙以 $1$ 米/秒的恒定速度沿着棍子在两个可能的方向（左或右）中的一个方向上移动，并以可能的 $k$ 种颜色之一着色。\n\n众所周知，Endor 卫星上的变色龙崇拜古老的蚂蚁法则，该法则规定变色龙必须沿着棍子行走直到走到棍子的末端，并且当与另一只变色龙发生碰撞时，该变色龙必须转过 $180$ 度，继续朝相反的方向行走。此外，在向左移动着色为 $a$ 的变色龙与向右移动的着色为 $b$ 的变色龙发生碰撞后，碰撞前向左移动的变色龙采用碰撞前向右移动的变色龙的颜色 $b$，而在碰撞前向右移动的变色龙会采用新的颜色 $(a+b)\\bmod k$。\n\n如果给你所有变色龙的初始位置、颜色和运动方向，对于每种颜色，确定采用该种颜色的变色龙在离开棍子之前的总行程。", "inputFormat": "第一行输入三个整数 $n,k,L$，分别表示变色龙的只数，颜色的种数和棍子的长度。  \n随后 $n$ 行，每行两个整数 $d_i,b_i$ 和一个字符 `L` 或 `D`，其中 $d_i,b_i$ 分别表示第 $i$ 只变色龙到棍子**左端**的距离和第 $i$ 只变色龙的颜色，字符如果是 `L`，则表示第 $i$ 只变色龙初始时面朝左边，否则表示第 $i$ 只变色龙初始时面朝右边。保证 $d_i$ 两两不同且按升序给出。", "outputFormat": "输出 $k$ 行，第 $i$ 行输出一个实数，表示采用第 $i-1$ 种颜色的变色龙离开棍子之前的总行程，**保留一位小数**。可以证明，答案要么是整数，要么是形如 $\\texttt{x.5}$ 的一位小数。", "hint": "**【样例 1 解释】**\n\n两只变色龙在行走了 $5$ 米之后发生碰撞。在此之后，$1$ 号变色龙的颜色变为 $0$，$2$ 号变色龙的颜色变为 $1$，然后它们各又继续走了 $5$ 米然后离开棍子。因此，采用第 $0$ 种颜色和第 $1$ 种颜色的变色龙各走了 $10$ 米，在此过程中不存在采用第 $2$ 种颜色的变色龙。\n\n**【数据范围】**\n\n对于 $50\\%$ 的数据，保证 $1\\leqslant n\\leqslant 3000$。  \n对于所有数据，$1\\leqslant n\\leqslant 10^5$，$1\\leqslant k\\leqslant 40$，$1\\leqslant L\\leqslant 10^6$，$0\\leqslant d_i\\leqslant L$，$0\\leqslant b_i<k$，$d_{i-1}<d_i$。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T6 ENDOR_**，按照原题数据配置，满分 $160$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8049", "type": "P", "difficulty": 4, "samples": [["5 10000\n1\n1\n1\n1\n1 ", "4\n4\n2\n2\n0 "], ["5 9\n1\n1\n10\n1\n9 ", "2\n0\n0\n2\n0 "], ["8 3\n1\n1\n1\n1\n1\n1\n1\n1 ", "6\n6\n6\n4\n4\n2\n2\n0 "]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2010", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #5] DVONIZ（加强版）", "background": "题面与[原题P7635 [COCI2010-2011#5] DVONIZ](https://www.luogu.com.cn/problem/P7635)无异，仅有数据范围，时空限制与分值不同。", "description": "当前 $K$ 个元素的和或最后 $K$ 个元素的和都不大于 $S$ 时，我们说这个 $2\\times K$ 个元素的序列是有趣的。\n\n给出一个长度为 $N$ 的序列 $A$。对于每个元素，输出从该元素开始的最长的有趣的子段。", "inputFormat": "第一行包含整数 $N$ 和 $S$。\n\n下面的 $N$ 行，每行包含序列 $A$ 中的一个整数 $A_i$。这些整数都是正的且它们的和不超过 $2\\times 10^9$。", "outputFormat": "输出共 $N$ 行。第 $i$ 行包含一个整数，表示从第 $i$ 元素开始的最长的有趣的子段的长度。\n\n如果当前位置上没有有趣的子段，输出 `0`。", "hint": "**【样例解释#1】**\n\n对于样例 $1$ 的第一个位置，一共有 $4$ 个子段，且都满足条件，故取最长的长度为 $4$ 的子段。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，$2\\le N \\le 200$。\n\n对于 $50\\%$ 的数据，$2\\le N \\le 5 \\times 10^3$。\n\n对于 $70\\%$ 的数据，$2 \\le N \\le 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$2\\le N \\le 3 \\times 10^6$，$1\\le S \\le 10^9$，$1\\le A_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #5] DVONIZ（加强版）", "background": "题面与[原题P7635 [COCI2010-2011#5] DVONIZ](https://www.luogu.com.cn/problem/P7635)无异，仅有数据范围，时空限制与分值不同。", "description": "当前 $K$ 个元素的和或最后 $K$ 个元素的和都不大于 $S$ 时，我们说这个 $2\\times K$ 个元素的序列是有趣的。\n\n给出一个长度为 $N$ 的序列 $A$。对于每个元素，输出从该元素开始的最长的有趣的子段。", "inputFormat": "第一行包含整数 $N$ 和 $S$。\n\n下面的 $N$ 行，每行包含序列 $A$ 中的一个整数 $A_i$。这些整数都是正的且它们的和不超过 $2\\times 10^9$。", "outputFormat": "输出共 $N$ 行。第 $i$ 行包含一个整数，表示从第 $i$ 元素开始的最长的有趣的子段的长度。\n\n如果当前位置上没有有趣的子段，输出 `0`。", "hint": "**【样例解释#1】**\n\n对于样例 $1$ 的第一个位置，一共有 $4$ 个子段，且都满足条件，故取最长的长度为 $4$ 的子段。\n\n**【数据范围】**\n\n对于 $30\\%$ 的数据，$2\\le N \\le 200$。\n\n对于 $50\\%$ 的数据，$2\\le N \\le 5 \\times 10^3$。\n\n对于 $70\\%$ 的数据，$2 \\le N \\le 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$2\\le N \\le 3 \\times 10^6$，$1\\le S \\le 10^9$，$1\\le A_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8050", "type": "P", "difficulty": 3, "samples": [["2 2 3 4 0\n0 0\n1 0\n2 1 1 0\n0 1 999999 0\n0 0 0 0", "2"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["模拟", "数学"], "title": "[ZYOI Round1] Chessboard game/棋盘游戏", "background": "子衿有一个游戏棋盘，此时准备拿出来玩玩。", "description": "她的棋盘是 L 字形的，由上面一个 $n_1 \\times m_1$ 的小长方形和下面一个 $n_2 \\times m_2$ 的大长方形组成。棋盘初始状态所有格子上的数都为 $k$。\n\n比如，当 $n_1 = 2$，$m_1 = 2$，$n_2 = 3$，$m_2 = 4$，$k = 0$ 时，棋盘初始是这样的：\n\n```\n0 0\n0 0\n0 0 0 0\n0 0 0 0\n0 0 0 0\n```\n\n现在她要进行若干次操作：将相邻的两个格子中的数同时加 $1$ 或减 $1$。操作完成后她会记住这些格子上的数。\n\n可是她有一次不小心，经过若干次操作后忘掉了其中某一个数是多少了，于是在上面打了一个 $999999$。请你通过编程求出被打上 $999999$ 的数应该是多少。保证有且仅有一个格子被打上了 $999999$。", "inputFormat": "第一行输入五个整数 $n_1,m_1,n_2,m_2,k$，分别表示组成 L 字形棋盘小长方形的行数和列数，大长方形的行数和列数，以及初始格子上的数。\n\n接下来 $n_1$ 行，每行输入 $m_1$ 个整数，表示操作后的棋盘小长方形中每个格子中的数。\n\n接下来 $n_2$ 行，每行输入 $m_2$ 个整数，表示操作后的棋盘大长方形中每个格子中的数。\n\n未知的数以 $999999$ 代替。", "outputFormat": "一行，一个整数，表示被打上 $999999$ 的数原本的值。\n\n数据保证有解。", "hint": "对于 $40\\%$ 的数据，$n_1 = m_1 = 0$。\n\n对于 $100\\%$ 的数据，$m_1 < m_2$，$0 \\le n_1,m_1,k \\le 100$，$1 \\le n_2,m_2 \\le 100$，每个格子中的数 $\\ge -1000$ 且 $\\le 1000$，除前 $40\\%$ 的数据外剩下的 $60\\%$ 的数据保证 $n_1,m_1 > 0$。\n\n**【样例说明】**\n\n一开始棋盘是这样的：\n\n```\n0 0\n0 0\n0 0 0 0\n0 0 0 0\n0 0 0 0\n```\n\n下面给出一种可行的操作方案：\n\n先将第 $2$ 行第 $1$ 个数与第 $3$ 行第 $1$ 个数同时加 $1$：\n\n```\n0 0\n1 0\n1 0 0 0\n0 0 0 0\n0 0 0 0\n```\n\n再将第 $3$ 行第 $1$ 个数与第 $3$ 行第 $2$ 个数同时加 $1$：\n\n```\n0 0\n1 0\n2 1 0 0\n0 0 0 0\n0 0 0 0\n```\n\n再将第 $3$ 行第 $3$ 个数与第 $4$ 行第 $3$ 个数同时加 $1$：\n\n```\n0 0\n1 0\n2 1 1 0\n0 0 1 0\n0 0 0 0\n```\n\n最后将第 $4$ 行第 $2$ 个数与第 $4$ 行第 $3$ 个数同时加 $1$：\n\n```\n0 0\n1 0\n2 1 1 0\n0 1 2 0\n0 0 0 0\n```\n\n可以得出被打上 $999999$ 的数（第 $4$ 行第 $3$ 个数）为 $2$。\n\n操作方案可能不唯一，但可以证明答案是唯一的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZYOI Round1] Chessboard game/棋盘游戏", "background": "子衿有一个游戏棋盘，此时准备拿出来玩玩。", "description": "她的棋盘是 L 字形的，由上面一个 $n_1 \\times m_1$ 的小长方形和下面一个 $n_2 \\times m_2$ 的大长方形组成。棋盘初始状态所有格子上的数都为 $k$。\n\n比如，当 $n_1 = 2$，$m_1 = 2$，$n_2 = 3$，$m_2 = 4$，$k = 0$ 时，棋盘初始是这样的：\n\n```\n0 0\n0 0\n0 0 0 0\n0 0 0 0\n0 0 0 0\n```\n\n现在她要进行若干次操作：将相邻的两个格子中的数同时加 $1$ 或减 $1$。操作完成后她会记住这些格子上的数。\n\n可是她有一次不小心，经过若干次操作后忘掉了其中某一个数是多少了，于是在上面打了一个 $999999$。请你通过编程求出被打上 $999999$ 的数应该是多少。保证有且仅有一个格子被打上了 $999999$。", "inputFormat": "第一行输入五个整数 $n_1,m_1,n_2,m_2,k$，分别表示组成 L 字形棋盘小长方形的行数和列数，大长方形的行数和列数，以及初始格子上的数。\n\n接下来 $n_1$ 行，每行输入 $m_1$ 个整数，表示操作后的棋盘小长方形中每个格子中的数。\n\n接下来 $n_2$ 行，每行输入 $m_2$ 个整数，表示操作后的棋盘大长方形中每个格子中的数。\n\n未知的数以 $999999$ 代替。", "outputFormat": "一行，一个整数，表示被打上 $999999$ 的数原本的值。\n\n数据保证有解。", "hint": "对于 $40\\%$ 的数据，$n_1 = m_1 = 0$。\n\n对于 $100\\%$ 的数据，$m_1 < m_2$，$0 \\le n_1,m_1,k \\le 100$，$1 \\le n_2,m_2 \\le 100$，每个格子中的数 $\\ge -1000$ 且 $\\le 1000$，除前 $40\\%$ 的数据外剩下的 $60\\%$ 的数据保证 $n_1,m_1 > 0$。\n\n**【样例说明】**\n\n一开始棋盘是这样的：\n\n```\n0 0\n0 0\n0 0 0 0\n0 0 0 0\n0 0 0 0\n```\n\n下面给出一种可行的操作方案：\n\n先将第 $2$ 行第 $1$ 个数与第 $3$ 行第 $1$ 个数同时加 $1$：\n\n```\n0 0\n1 0\n1 0 0 0\n0 0 0 0\n0 0 0 0\n```\n\n再将第 $3$ 行第 $1$ 个数与第 $3$ 行第 $2$ 个数同时加 $1$：\n\n```\n0 0\n1 0\n2 1 0 0\n0 0 0 0\n0 0 0 0\n```\n\n再将第 $3$ 行第 $3$ 个数与第 $4$ 行第 $3$ 个数同时加 $1$：\n\n```\n0 0\n1 0\n2 1 1 0\n0 0 1 0\n0 0 0 0\n```\n\n最后将第 $4$ 行第 $2$ 个数与第 $4$ 行第 $3$ 个数同时加 $1$：\n\n```\n0 0\n1 0\n2 1 1 0\n0 1 2 0\n0 0 0 0\n```\n\n可以得出被打上 $999999$ 的数（第 $4$ 行第 $3$ 个数）为 $2$。\n\n操作方案可能不唯一，但可以证明答案是唯一的。", "locale": "zh-CN"}}}
{"pid": "P8051", "type": "P", "difficulty": 5, "samples": [["3 1\n1 5 2\n6", "1"], ["5 2\n1 3 2 7 1\n4 10", "3"]], "limits": {"time": [600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "[ZYOI Round1] Bird/鸟", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/hdzxjtsk.png)\n\n江豚吹浪立，沙鸟得鱼闲。", "description": "有一只鸟在 $n$ 棵树之间飞行，第 $i$ 棵树的高度为 $a_i$，从左到右排列。这只鸟太肥了，不能往高处飞，只能朝左或右两个方向滑翔。\n\n若这只鸟现在站着的树高度为 $a_i$，那么这只鸟可以飞到的树高度必须小于 $a_i$，且飞行时经过的树高度也都需要小于 $a_i$。\n\n这只鸟有 $k$ 张瞬移卡，第 $i$ 张卡的魔力值为 $b_i$。这只鸟可以在任意一棵树上选择使用瞬移卡，瞬移到高度不超过该瞬移卡魔力值的一棵树上（如果鸟当前所在的树高度不超过瞬移卡的魔力值，则它可以瞬移到当前所在的树上）。但是它只能按照给出的顺序使用瞬移卡。数据保证所有瞬移卡都可以使用（即不存在一张瞬移卡，魔力值小于所有树的高度）。\n\n这只鸟初始位置在第一棵树上，请求出它最多可以飞行几次（不包含瞬移）。\n\n注意：鸟可以重复经过同一棵树。", "inputFormat": "第一行，包含两个整数 $n,k$，表示树的棵数和鸟瞬移卡的数量。\n\n接下来一行，$n$ 个整数，表示每棵树的高度。\n\n接下来一行，$k$ 个整数，表示每张瞬移卡的魔力值。按照使用顺序给出。 ", "outputFormat": "一行，一个整数，表示这只鸟最多飞行次数。", "hint": "对于 $10\\%$ 的数据，$1 \\le n,k \\le 10$。\n\n对于 $30\\%$ 的数据，$1 \\le n,k \\le 5 \\times 10^3$。  \n\n对于 $70\\%$ 的数据，$1 \\le n,k \\le 10^5$。  \n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 3 \\times 10^5$，$0 \\le a_i,b_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZYOI Round1] Bird/鸟", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/hdzxjtsk.png)\n\n江豚吹浪立，沙鸟得鱼闲。", "description": "有一只鸟在 $n$ 棵树之间飞行，第 $i$ 棵树的高度为 $a_i$，从左到右排列。这只鸟太肥了，不能往高处飞，只能朝左或右两个方向滑翔。\n\n若这只鸟现在站着的树高度为 $a_i$，那么这只鸟可以飞到的树高度必须小于 $a_i$，且飞行时经过的树高度也都需要小于 $a_i$。\n\n这只鸟有 $k$ 张瞬移卡，第 $i$ 张卡的魔力值为 $b_i$。这只鸟可以在任意一棵树上选择使用瞬移卡，瞬移到高度不超过该瞬移卡魔力值的一棵树上（如果鸟当前所在的树高度不超过瞬移卡的魔力值，则它可以瞬移到当前所在的树上）。但是它只能按照给出的顺序使用瞬移卡。数据保证所有瞬移卡都可以使用（即不存在一张瞬移卡，魔力值小于所有树的高度）。\n\n这只鸟初始位置在第一棵树上，请求出它最多可以飞行几次（不包含瞬移）。\n\n注意：鸟可以重复经过同一棵树。", "inputFormat": "第一行，包含两个整数 $n,k$，表示树的棵数和鸟瞬移卡的数量。\n\n接下来一行，$n$ 个整数，表示每棵树的高度。\n\n接下来一行，$k$ 个整数，表示每张瞬移卡的魔力值。按照使用顺序给出。 ", "outputFormat": "一行，一个整数，表示这只鸟最多飞行次数。", "hint": "对于 $10\\%$ 的数据，$1 \\le n,k \\le 10$。\n\n对于 $30\\%$ 的数据，$1 \\le n,k \\le 5 \\times 10^3$。  \n\n对于 $70\\%$ 的数据，$1 \\le n,k \\le 10^5$。  \n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 3 \\times 10^5$，$0 \\le a_i,b_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8052", "type": "P", "difficulty": 4, "samples": [["5\n\n3\n\n5", "\n1 1 2 3\n\n2 1 5\n\n3 5 2 4 3 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["交互题", "Special Judge", "O2优化"], "title": "[ZYOI Round1] Truth/真心话大冒险", "background": "**注意：请勿恶意提交代码，浪费评测资源。**\n\n一群人参加了聚会，在玩“真心话大冒险”。", "description": "Charlie 现在盯上了一个人 Percy，Ta 打算找出 Percy 对于 $n$ 个异性的好感度的排名。  \n\n具体地，Charlie 可以提出两种要求：  \n\n1. 【真心话】给定 $3$ 个正整数 $x,y,z$，要求 Percy 回答其中他第二喜欢的异性的编号。要求：$1 \\leq x,y,z \\leq n$。\n\n2. 【大冒险】给定 $2$ 个正整数 $x,y$，要求 Percy 拥抱其中他更喜欢的那个异性。要求：$1 \\leq x,y \\leq n$ 且必须保证异性 $x,y$ 之中必有一个是 Percy 最喜欢的。  \n\nCharlie 希望通过至多 $2 \\times 10^6$ 次询问达到他的目的。\n\n**交互格式：**  \n\n一开始读入一个正整数 $n$ 开始交互。\n\n你可以输出 $3$ 种信息：  \n\n1. `1 x y z`，表示“真心话”询问，并读入结果。\n2. `2 x y`，表示“大冒险”询问，并读入结果。\n3. `3 a1 a2 ... an`，表示你已经得出了答案，按顺序输出 Percy 最喜欢、第二喜欢、……的异性的编号。\n", "inputFormat": "（见题目描述）", "outputFormat": "（见题目描述）", "hint": "**以上输入输出只是为了演示交互格式，可能并不符合逻辑**。\n\n对于 $20\\%$ 的数据，$1 \\leq n \\leq 10$。\n\n对于 $40\\%$ 的数据，$1 \\leq n \\leq 100$。 \n\n对于 $60\\%$ 的数据，$1 \\leq n \\leq 10^3$。 \n\n对于 $80\\%$ 的数据，$1 \\leq n \\leq 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 2 \\times 10^4$。  \n\n注意输出不合法可能导致 WA/RE/TLE/MLE 等玄学问题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZYOI Round1] Truth/真心话大冒险", "background": "**注意：请勿恶意提交代码，浪费评测资源。**\n\n一群人参加了聚会，在玩“真心话大冒险”。", "description": "Charlie 现在盯上了一个人 Percy，Ta 打算找出 Percy 对于 $n$ 个异性的好感度的排名。  \n\n具体地，Charlie 可以提出两种要求：  \n\n1. 【真心话】给定 $3$ 个正整数 $x,y,z$，要求 Percy 回答其中他第二喜欢的异性的编号。要求：$1 \\leq x,y,z \\leq n$。\n\n2. 【大冒险】给定 $2$ 个正整数 $x,y$，要求 Percy 拥抱其中他更喜欢的那个异性。要求：$1 \\leq x,y \\leq n$ 且必须保证异性 $x,y$ 之中必有一个是 Percy 最喜欢的。  \n\nCharlie 希望通过至多 $2 \\times 10^6$ 次询问达到他的目的。\n\n**交互格式：**  \n\n一开始读入一个正整数 $n$ 开始交互。\n\n你可以输出 $3$ 种信息：  \n\n1. `1 x y z`，表示“真心话”询问，并读入结果。\n2. `2 x y`，表示“大冒险”询问，并读入结果。\n3. `3 a1 a2 ... an`，表示你已经得出了答案，按顺序输出 Percy 最喜欢、第二喜欢、……的异性的编号。\n", "inputFormat": "（见题目描述）", "outputFormat": "（见题目描述）", "hint": "**以上输入输出只是为了演示交互格式，可能并不符合逻辑**。\n\n对于 $20\\%$ 的数据，$1 \\leq n \\leq 10$。\n\n对于 $40\\%$ 的数据，$1 \\leq n \\leq 100$。 \n\n对于 $60\\%$ 的数据，$1 \\leq n \\leq 10^3$。 \n\n对于 $80\\%$ 的数据，$1 \\leq n \\leq 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 2 \\times 10^4$。  \n\n注意输出不合法可能导致 WA/RE/TLE/MLE 等玄学问题。", "locale": "zh-CN"}}}
{"pid": "P8053", "type": "P", "difficulty": 2, "samples": [["3\n0 1 1\n1 0 1\n1 1 0", "1 1 1"], ["5\n0 0 1 1 1\n0 0 2 0 2\n1 2 0 1 3\n1 0 1 0 1\n1 2 3 1 0", "1 2 3 1 11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "Special Judge", "O2优化", "位运算", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #4] DEATHSTAR", "background": "", "description": "你排除万难，潜入了 Death Star。要想摧毁它，你需要一个长度为 $n$ 的数组 $a$，以启动 Death Star 的自我毁灭指令。虽然你不知道这个数组是什么，但好在，你的老朋友 Darth Vader 事先给了你一个 $n$ 阶方阵 $b$。在这个方阵中，第 $i$ 行第 $j$ 列上的元素 $b_{i,j}=a_i\\operatorname{~and~} a_j$，其中 $\\operatorname{and}$ 表示按位与运算。正当你以为你可以通过这个方阵直接得出数组 $a$ 时，你发现主对角线上的所有元素被激光剑给毁坏了，你无法读出这些元素的值，只能暂时以 $0$ 代替。\n\n现在，请你根据其他没有被毁坏的元素的数值求出**任意一个**满足要求的数组 $a$。", "inputFormat": "第一行输入一个整数 $n$，表示方阵 $b$ 的阶数。  \n随后 $n$ 行，每行输入 $n$ 个整数，描述方阵 $b$。", "outputFormat": "输出一行 $n$ 个整数，表示满足条件的数组 $a$。数组中的每个元素必须是不超过 $10^9$ 的**非负整数**。\n\n数据保证**有解**，但**不保证有唯一解**。", "hint": "**【样例 1 解释】**\n\n不难看出，满足要求的一个数组 $a=[1,1,1]$，但请注意，这并不是唯一可能的答案。\n\n**【数据范围】**\n\n对于所有数据，$1\\leqslant n\\leqslant 1000$，$0\\leqslant b_{i,j}\\leqslant 10^9$。\n\n**本题开启 Special Judge**。如果你有可以 hack [供题人自行编写的 checker ](https://www.luogu.com.cn/paste/fzkkyhqp)的数据或者对 checker 有改进意见，欢迎在本题下方讨论区提出。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T3 DEATHSTAR_**，按照原题数据配置，满分 $100$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #4] DEATHSTAR", "background": "", "description": "你排除万难，潜入了 Death Star。要想摧毁它，你需要一个长度为 $n$ 的数组 $a$，以启动 Death Star 的自我毁灭指令。虽然你不知道这个数组是什么，但好在，你的老朋友 Darth Vader 事先给了你一个 $n$ 阶方阵 $b$。在这个方阵中，第 $i$ 行第 $j$ 列上的元素 $b_{i,j}=a_i\\operatorname{~and~} a_j$，其中 $\\operatorname{and}$ 表示按位与运算。正当你以为你可以通过这个方阵直接得出数组 $a$ 时，你发现主对角线上的所有元素被激光剑给毁坏了，你无法读出这些元素的值，只能暂时以 $0$ 代替。\n\n现在，请你根据其他没有被毁坏的元素的数值求出**任意一个**满足要求的数组 $a$。", "inputFormat": "第一行输入一个整数 $n$，表示方阵 $b$ 的阶数。  \n随后 $n$ 行，每行输入 $n$ 个整数，描述方阵 $b$。", "outputFormat": "输出一行 $n$ 个整数，表示满足条件的数组 $a$。数组中的每个元素必须是不超过 $10^9$ 的**非负整数**。\n\n数据保证**有解**，但**不保证有唯一解**。", "hint": "**【样例 1 解释】**\n\n不难看出，满足要求的一个数组 $a=[1,1,1]$，但请注意，这并不是唯一可能的答案。\n\n**【数据范围】**\n\n对于所有数据，$1\\leqslant n\\leqslant 1000$，$0\\leqslant b_{i,j}\\leqslant 10^9$。\n\n**本题开启 Special Judge**。如果你有可以 hack [供题人自行编写的 checker ](https://www.luogu.com.cn/paste/fzkkyhqp)的数据或者对 checker 有改进意见，欢迎在本题下方讨论区提出。\n\n**【题目来源】**\n\n本题来源自 **_[COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST 4](https://hsin.hr/coci/archive/2015_2016/contest4_tasks.pdf) T3 DEATHSTAR_**，按照原题数据配置，满分 $100$ 分。\n\n由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。", "locale": "zh-CN"}}}
{"pid": "P8054", "type": "P", "difficulty": 2, "samples": [["6\n2\n3\n4\n5\n12\n514", "0\n0\n0\n1\n0\n1"]], "limits": {"time": [500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "A 质因数", "background": "", "description": "定义 $f(x)$ 表示 $x$ 分解质因数后得到的质数个数，例如 $f(6)=2,f(12)=3$。\n\n具体的，令 $x=p_1^{a_1}p_2^{a_2}\\cdots p_k^{a_k}$，其中 $p_1,p_2,\\ldots,p_k$ 是两两不同的质数，则 $f(x)=a_1+a_2+\\cdots + a_k$。\n\n给定一个数 $n$，判断是否存在 $1<m<n$，满足 $f(m)>f(n)$。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "输出 $T$ 行，若对于第 $i$ 组数据给定的 $n$ 存在 $1<m<n,f(m)>f(n)$ 输出一行一个数 $1$，否则输出一行一个数 $0$。", "hint": "**【样例解释 #1】**\n\n$f(2)=1$，不存在 $1<x<2,f(x)>1$。\n\n$f(3)=1$，不存在 $1<x<3,f(x)>1$。\n\n$f(4)=2$，不存在 $1<x<4,f(x)>2$。\n\n$f(5)=1$，存在 $f(4)=2$。\n\n$f(12)=3$，不存在 $1<x<12,f(x)>3$。\n\n$f(514)=2$，存在 $f(114)=3$。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq T\\leq 10^4$，$2\\leq n\\leq 10^{18}$。详细数据范围如下：\n\n- Subtask #1 (25 pts)： $T,n\\le 10$。\n- Subtask #2 (35 pts)： $n\\le 10^5$。\n- Subtask #3 (15 pts)： $T\\le 10$，$n$ 在 $[2,10^{18}]$  内均匀随机生成。\n- Subtask #4 (25 pts)：没有任何附加限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "A 质因数", "background": "", "description": "定义 $f(x)$ 表示 $x$ 分解质因数后得到的质数个数，例如 $f(6)=2,f(12)=3$。\n\n具体的，令 $x=p_1^{a_1}p_2^{a_2}\\cdots p_k^{a_k}$，其中 $p_1,p_2,\\ldots,p_k$ 是两两不同的质数，则 $f(x)=a_1+a_2+\\cdots + a_k$。\n\n给定一个数 $n$，判断是否存在 $1<m<n$，满足 $f(m)>f(n)$。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "输出 $T$ 行，若对于第 $i$ 组数据给定的 $n$ 存在 $1<m<n,f(m)>f(n)$ 输出一行一个数 $1$，否则输出一行一个数 $0$。", "hint": "**【样例解释 #1】**\n\n$f(2)=1$，不存在 $1<x<2,f(x)>1$。\n\n$f(3)=1$，不存在 $1<x<3,f(x)>1$。\n\n$f(4)=2$，不存在 $1<x<4,f(x)>2$。\n\n$f(5)=1$，存在 $f(4)=2$。\n\n$f(12)=3$，不存在 $1<x<12,f(x)>3$。\n\n$f(514)=2$，存在 $f(114)=3$。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq T\\leq 10^4$，$2\\leq n\\leq 10^{18}$。详细数据范围如下：\n\n- Subtask #1 (25 pts)： $T,n\\le 10$。\n- Subtask #2 (35 pts)： $n\\le 10^5$。\n- Subtask #3 (15 pts)： $T\\le 10$，$n$ 在 $[2,10^{18}]$  内均匀随机生成。\n- Subtask #4 (25 pts)：没有任何附加限制。\n", "locale": "zh-CN"}}}
{"pid": "P8055", "type": "P", "difficulty": 5, "samples": [["8 8\n01100001\n1 2 3\n1 4 9\n2 6 9\n3 8 9\n6 8 2\n8 8 3\n5 8 6\n2 8 17", "8\n36\n40\n64\n16\n5\n64\n144"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "B Highbit & lowbit", "background": "", "description": "定义一个正整数的 $\\mathrm{highbit}$ 为该数在二进制表示下的最高二进制位的位值，如 $\\mathrm{highbit}(22_{(10)})=\\mathrm{highbit}(10110_{(2)})=10000_{(2)}=16_{(10)}$。\n\n定义一个正整数的 $\\mathrm{lowbit}$ 为该数在二进制表示下的最低非零二进制位的位值，如 $\\mathrm{lowbit}(22_{(10)})=\\mathrm{lowbit}(10110_{(2)})=10_{(2)}=2_{(10)}$。\n\n再定义两种操作：\n\n- 操作 $1$：将一个正整数 $x$ 变为 $x+\\mathrm{lowbit}(x)$。\n- 操作 $2$：将一个正整数 $x$ 变为 $x+\\mathrm{highbit}(x)$。\n\n现给定一个操作序列和 $q$ 次询问，每次询问包含 $3$ 个正整数 $l,r,x$，表示将 $x$ 从左到右依次执行 $l\\sim r$ 的操作，请输出 $x$ 的值，由于答案可能很大，请输出答案对 $10^9+7$ 取模的值。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来一行一个字符串 $s$，长度为 $n$，其中仅含有 `0`，`1`。\n\n若第 $i$ 个字符为 `0`，则表示一个 $1$ 操作，即 $x=x+\\mathrm{lowbit}(x)$。\n\n若第 $i$ 个字符为 `1`，则表示一个 $2$ 操作，即 $x=x+\\mathrm{highbit}(x)$。\n\n之后 $q$ 行，每行 $3$ 个正整数 $l,r,x$，表示一次询问。", "outputFormat": "对于每一个询问，输出一行一个数表示答案对 $10^9+7$ 取模的结果。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有测试点，满足 $1\\leq n,q\\leq 5\\times 10^5$，$1\\leq x<2^{30}$。详细数据范围如下：\n\n- Subtask #1 (12 pts): $n,q\\le 10$，$x\\le 32767$。\n- Subtask #2 (23 pts): $n,q\\le 10^3$。\n- Subtask #3 (11 pts): $n,q\\leq 10^5$，字符串中仅含有 `1`。\n- Subtask #4 (11 pts): $n,q\\leq 10^5$，字符串中仅含有 `0`。\n- Subtask #5 (6 pts): $n,q\\leq 10^5$，保证每次询问的 $x$ 均可以表示为 $2^a$ 的形式，$a$ 为非负整数。\n- Subtask #6 (15 pts): $n,q\\leq 10^5$，保证每次询问的 $x$ 均可以表示为 $2^a+2^b$ 的形式，$a,b$ 均为非负整数。\n- Subtask #7 (10 pts): $n,q\\le 10^5$。\n- Subtask #8 (12 pts): 没有任何附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "B Highbit & lowbit", "background": "", "description": "定义一个正整数的 $\\mathrm{highbit}$ 为该数在二进制表示下的最高二进制位的位值，如 $\\mathrm{highbit}(22_{(10)})=\\mathrm{highbit}(10110_{(2)})=10000_{(2)}=16_{(10)}$。\n\n定义一个正整数的 $\\mathrm{lowbit}$ 为该数在二进制表示下的最低非零二进制位的位值，如 $\\mathrm{lowbit}(22_{(10)})=\\mathrm{lowbit}(10110_{(2)})=10_{(2)}=2_{(10)}$。\n\n再定义两种操作：\n\n- 操作 $1$：将一个正整数 $x$ 变为 $x+\\mathrm{lowbit}(x)$。\n- 操作 $2$：将一个正整数 $x$ 变为 $x+\\mathrm{highbit}(x)$。\n\n现给定一个操作序列和 $q$ 次询问，每次询问包含 $3$ 个正整数 $l,r,x$，表示将 $x$ 从左到右依次执行 $l\\sim r$ 的操作，请输出 $x$ 的值，由于答案可能很大，请输出答案对 $10^9+7$ 取模的值。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来一行一个字符串 $s$，长度为 $n$，其中仅含有 `0`，`1`。\n\n若第 $i$ 个字符为 `0`，则表示一个 $1$ 操作，即 $x=x+\\mathrm{lowbit}(x)$。\n\n若第 $i$ 个字符为 `1`，则表示一个 $2$ 操作，即 $x=x+\\mathrm{highbit}(x)$。\n\n之后 $q$ 行，每行 $3$ 个正整数 $l,r,x$，表示一次询问。", "outputFormat": "对于每一个询问，输出一行一个数表示答案对 $10^9+7$ 取模的结果。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有测试点，满足 $1\\leq n,q\\leq 5\\times 10^5$，$1\\leq x<2^{30}$。详细数据范围如下：\n\n- Subtask #1 (12 pts): $n,q\\le 10$，$x\\le 32767$。\n- Subtask #2 (23 pts): $n,q\\le 10^3$。\n- Subtask #3 (11 pts): $n,q\\leq 10^5$，字符串中仅含有 `1`。\n- Subtask #4 (11 pts): $n,q\\leq 10^5$，字符串中仅含有 `0`。\n- Subtask #5 (6 pts): $n,q\\leq 10^5$，保证每次询问的 $x$ 均可以表示为 $2^a$ 的形式，$a$ 为非负整数。\n- Subtask #6 (15 pts): $n,q\\leq 10^5$，保证每次询问的 $x$ 均可以表示为 $2^a+2^b$ 的形式，$a,b$ 均为非负整数。\n- Subtask #7 (10 pts): $n,q\\le 10^5$。\n- Subtask #8 (12 pts): 没有任何附加限制。", "locale": "zh-CN"}}}
{"pid": "P8056", "type": "P", "difficulty": 5, "samples": [["6 8\n1 2\n4 5\n6 3\n5 2\n3 4\n5 1\n1 4\n3 5", "44"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "C 图上的数", "background": "", "description": "给定一个 $n$ 个点 $m$ 条边的无向图（**保证无重边无自环但不保证连通**），每条边有一个 $1\\sim m$ 的互不相同的编号。\n\n定义一条边是孤边，当且仅当它的两端点均已经被删除。\n\n您需要给定一个删点顺序，令 $P_i$ 表示第 $i$ 条变成孤边的边的编号，您需要最小化 $P_i$ 的字典序。\n\n若某一时刻存在多条边变为孤边，我们认为，编号小的边先变为孤边。", "inputFormat": "第一行两个正整数 $n,m$，表示图的点数和边数。\n\n第 $2\\sim m+1$ 行，第 $i$ 行两个正整数 $x,y$，表示编号为 $i-1$ 的边的两个端点。", "outputFormat": "为减少输出量，请输出 $\\bigoplus\\limits_{i=1}^{m}i\\times P_i$，其中 $\\bigoplus$ 表示二进制下的按位异或。", "hint": "**【样例解释 #1】**\n\n数组 $P$ 为 $\\{1,3,4,6,8,2,5,7\\}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n所有数据满足 $1\\le n\\le 10^6$，$1\\le m\\le \\min (10^6,\\frac{n(n-1)}{2})$。详细数据范围如下：\n\n- Subtask #1 (12 pts): $n,m\\le 10$。\n- Subtask #2 (17 pts): $n,m\\le 100$。\n- Subtask #3 (11 pts): $n,m\\le 5\\times 10^3$。\n- Subtask #4 (18 pts): $m=n-1$，图连通，所有点度数不超过 $2$。\n- Subtask #5 (16 pts): $m=\\dfrac{n(n-1)}{2}$。\n- Subtask #6 (15 pts): $n,m\\le 10^5$。\n- Subtask #7 (11 pts): 没有任何附加限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "C 图上的数", "background": "", "description": "给定一个 $n$ 个点 $m$ 条边的无向图（**保证无重边无自环但不保证连通**），每条边有一个 $1\\sim m$ 的互不相同的编号。\n\n定义一条边是孤边，当且仅当它的两端点均已经被删除。\n\n您需要给定一个删点顺序，令 $P_i$ 表示第 $i$ 条变成孤边的边的编号，您需要最小化 $P_i$ 的字典序。\n\n若某一时刻存在多条边变为孤边，我们认为，编号小的边先变为孤边。", "inputFormat": "第一行两个正整数 $n,m$，表示图的点数和边数。\n\n第 $2\\sim m+1$ 行，第 $i$ 行两个正整数 $x,y$，表示编号为 $i-1$ 的边的两个端点。", "outputFormat": "为减少输出量，请输出 $\\bigoplus\\limits_{i=1}^{m}i\\times P_i$，其中 $\\bigoplus$ 表示二进制下的按位异或。", "hint": "**【样例解释 #1】**\n\n数组 $P$ 为 $\\{1,3,4,6,8,2,5,7\\}$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n所有数据满足 $1\\le n\\le 10^6$，$1\\le m\\le \\min (10^6,\\frac{n(n-1)}{2})$。详细数据范围如下：\n\n- Subtask #1 (12 pts): $n,m\\le 10$。\n- Subtask #2 (17 pts): $n,m\\le 100$。\n- Subtask #3 (11 pts): $n,m\\le 5\\times 10^3$。\n- Subtask #4 (18 pts): $m=n-1$，图连通，所有点度数不超过 $2$。\n- Subtask #5 (16 pts): $m=\\dfrac{n(n-1)}{2}$。\n- Subtask #6 (15 pts): $n,m\\le 10^5$。\n- Subtask #7 (11 pts): 没有任何附加限制。\n", "locale": "zh-CN"}}}
{"pid": "P8057", "type": "P", "difficulty": 6, "samples": [["2 2 2 2\n1 1", "665496237 665496237"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷月赛"], "title": "D ToPTree", "background": "ToPTree 即 **To**oth**P**aste **Tree**，它的工作方式就如同挤牙膏——挤一下它才动一下。", "description": "你有 $n$ 个数组成的序列 $[a_1\\sim a_n]$，初始时 $a_i=0$。\n\n有 $q$ 次操作组成的操作序列 $A$，第 $i$ 次操作在所有可能的 $nN(n+1)$ 种操作之内均匀随机：\n\n- 在以下两种操作之中以一半的概率随机选择一种操作，作为这次操作。\n- 随机选取满足条件的正整数 $l,r,x\\ (1\\le l\\le r\\le n,1\\le x\\le N)$，把 $[l,r]$ 区间内的数加上 $x$。\n- 随机选取满足条件的正整数 $l,r,x\\ (1\\le l\\le r\\le n,1\\le x\\le N)$，把 $[l,r]$ 区间内的数改为 $x$。\n- 容易发现每次操作共有 $nN(n+1)$ 种可能。\n\n由于这棵树是 ToothPaste Tree，只有在你询问的时候，它才会执行与你这次询问有关且还没执行的操作。具体地，假设你依次询问了 $a_{p_1\\sim p_m}$ 的值，则\n\n- 询问 $a_{p_i}$ 时，把所有 $A$ 中与这个数有关的操作（即这次操作的 $[l,r]$ 包含 $p_i$）按时间顺序（即按 $A$ 中的顺序）执行了，并从 $A$ 中删除它们。然后输出 $a_{p_i}$ 当前的值。\n\n> 比如 $A$ 中目前按顺序有以下四个操作，且 $a$ 中所有元素目前都是 $0$：\n> \n> 1. 给区间 $[2,3]$ 加一。\n> 2. 给区间 $[3,4]$ 加一。\n> 3. 把区间 $[2,4]$ 赋值为一。\n> 4. 给区间 $[2,3]$ 加一。\n> \n> 现在询问了 $a_2$ 的值，那么操作 $1,3,4$ 会被顺序执行，导致 $a_1\\sim a_4$ 分别变为 $[0,2,2,1]$。因此 ToPTree 输出 $2$。操作序列变为：\n> \n> 1. 给区间 $[3,4]$ 加一。\n> \n> 再询问 $a_3$ 的值，操作 $1$ 会被执行，导致操作序列变为空，并且 $a_1\\sim a_4$ 变为 $[0,2,3,2]$，故输出 $3$。注意这个输出结果与按照顺序执行所有操作 $1\\sim 4$ 得到的结果并不一致。\n\n给定 $n,m,q,N$ 以及序列 $p$，ToPTree 一共会按询问顺序输出 $m$ 个值，求这 $m$ 次输出分别的期望，对 $998244353$ 取模。\n\n（第一次询问之前，没有任何操作被执行了。）\n\n", "inputFormat": "第一行四个正整数 $n,m,q,N$。\n\n接下来一行 $m$ 个正整数 $p_1\\sim p_m$。", "outputFormat": "输出一行 $m$ 个非负整数，用空格隔开，为答案，对 $998244353$ 取模。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据：$1\\le n,N,q\\le 9\\times 10^8$，$1\\le m\\le 10^6$，$1\\le p_i\\le n$。详细数据范围如下：\n\n- Subtask #1 (4 pts): $n,m,q,N\\le 3$。\n- Subtask #2 (10 pts): $n,m,q,N\\le 5$。\n- Subtask #3 (3 pts): $n=1$，$m,q\\le 123456$。\n- Subtask #4 (3 pts): $q=1$，$m\\le 123456$。\n- Subtask #5 (12 pts): $m=1$，$q\\le 123456$。\n- Subtask #6 (27 pts): $n,m,q,N\\le 50$。\n- Subtask #7 (9 pts): $m,q\\le 5000$。\n- Subtask #8 (16 pts): $m,q\\le 123456$。\n- Subtask #9 (16 pts): 没有任何附加限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "D ToPTree", "background": "ToPTree 即 **To**oth**P**aste **Tree**，它的工作方式就如同挤牙膏——挤一下它才动一下。", "description": "你有 $n$ 个数组成的序列 $[a_1\\sim a_n]$，初始时 $a_i=0$。\n\n有 $q$ 次操作组成的操作序列 $A$，第 $i$ 次操作在所有可能的 $nN(n+1)$ 种操作之内均匀随机：\n\n- 在以下两种操作之中以一半的概率随机选择一种操作，作为这次操作。\n- 随机选取满足条件的正整数 $l,r,x\\ (1\\le l\\le r\\le n,1\\le x\\le N)$，把 $[l,r]$ 区间内的数加上 $x$。\n- 随机选取满足条件的正整数 $l,r,x\\ (1\\le l\\le r\\le n,1\\le x\\le N)$，把 $[l,r]$ 区间内的数改为 $x$。\n- 容易发现每次操作共有 $nN(n+1)$ 种可能。\n\n由于这棵树是 ToothPaste Tree，只有在你询问的时候，它才会执行与你这次询问有关且还没执行的操作。具体地，假设你依次询问了 $a_{p_1\\sim p_m}$ 的值，则\n\n- 询问 $a_{p_i}$ 时，把所有 $A$ 中与这个数有关的操作（即这次操作的 $[l,r]$ 包含 $p_i$）按时间顺序（即按 $A$ 中的顺序）执行了，并从 $A$ 中删除它们。然后输出 $a_{p_i}$ 当前的值。\n\n> 比如 $A$ 中目前按顺序有以下四个操作，且 $a$ 中所有元素目前都是 $0$：\n> \n> 1. 给区间 $[2,3]$ 加一。\n> 2. 给区间 $[3,4]$ 加一。\n> 3. 把区间 $[2,4]$ 赋值为一。\n> 4. 给区间 $[2,3]$ 加一。\n> \n> 现在询问了 $a_2$ 的值，那么操作 $1,3,4$ 会被顺序执行，导致 $a_1\\sim a_4$ 分别变为 $[0,2,2,1]$。因此 ToPTree 输出 $2$。操作序列变为：\n> \n> 1. 给区间 $[3,4]$ 加一。\n> \n> 再询问 $a_3$ 的值，操作 $1$ 会被执行，导致操作序列变为空，并且 $a_1\\sim a_4$ 变为 $[0,2,3,2]$，故输出 $3$。注意这个输出结果与按照顺序执行所有操作 $1\\sim 4$ 得到的结果并不一致。\n\n给定 $n,m,q,N$ 以及序列 $p$，ToPTree 一共会按询问顺序输出 $m$ 个值，求这 $m$ 次输出分别的期望，对 $998244353$ 取模。\n\n（第一次询问之前，没有任何操作被执行了。）\n\n", "inputFormat": "第一行四个正整数 $n,m,q,N$。\n\n接下来一行 $m$ 个正整数 $p_1\\sim p_m$。", "outputFormat": "输出一行 $m$ 个非负整数，用空格隔开，为答案，对 $998244353$ 取模。", "hint": "**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据：$1\\le n,N,q\\le 9\\times 10^8$，$1\\le m\\le 10^6$，$1\\le p_i\\le n$。详细数据范围如下：\n\n- Subtask #1 (4 pts): $n,m,q,N\\le 3$。\n- Subtask #2 (10 pts): $n,m,q,N\\le 5$。\n- Subtask #3 (3 pts): $n=1$，$m,q\\le 123456$。\n- Subtask #4 (3 pts): $q=1$，$m\\le 123456$。\n- Subtask #5 (12 pts): $m=1$，$q\\le 123456$。\n- Subtask #6 (27 pts): $n,m,q,N\\le 50$。\n- Subtask #7 (9 pts): $m,q\\le 5000$。\n- Subtask #8 (16 pts): $m,q\\le 123456$。\n- Subtask #9 (16 pts): 没有任何附加限制。\n", "locale": "zh-CN"}}}
{"pid": "P8058", "type": "P", "difficulty": 6, "samples": [["5 6", "3 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2003", "二分", "数论", "素数判断,质数,筛法", "最大公约数 gcd", "莫比乌斯反演", "Stern-Brocot 树", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2003] Farey 序列", "background": "", "description": "把所有分子和分母都 $\\leq n$ 的**最简真分数**从小到大排成一行，形成的序列称为 Farey 序列。\n\n求出 $n$ 所对应的 Farey 序列中第 $k$ 小的数。", "inputFormat": "一行，两个整数 $n, k$。", "outputFormat": "一行，两个整数 $p, q$，表示答案 $\\frac{p}{q}$。", "hint": "对于 $100\\%$ 的数据，$2 \\leq n \\leq 4 \\times 10^4$，$1 \\leq k \\leq$ 符合条件的分数的个数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2003] Farey 序列", "background": "", "description": "把所有分子和分母都 $\\leq n$ 的**最简真分数**从小到大排成一行，形成的序列称为 Farey 序列。\n\n求出 $n$ 所对应的 Farey 序列中第 $k$ 小的数。", "inputFormat": "一行，两个整数 $n, k$。", "outputFormat": "一行，两个整数 $p, q$，表示答案 $\\frac{p}{q}$。", "hint": "对于 $100\\%$ 的数据，$2 \\leq n \\leq 4 \\times 10^4$，$1 \\leq k \\leq$ 符合条件的分数的个数。", "locale": "zh-CN"}}}
{"pid": "P8059", "type": "P", "difficulty": 4, "samples": [["3 2\n-1 3\n3 -1\n1 2\n1 2\n3 1", "-1\n1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "2003", "并查集", "POI（波兰）"], "title": "[POI 2003] Monkeys", "background": "", "description": "一棵树上有 $n$ 只猴子。他们从 $1 \\sim n$ 编号。编号为 $1$ 的猴子用它的尾巴盘住了一个树枝，剩下的猴子要么被其他的猴子钩住要么就是自己用手钩住其他的猴子。每只猴子都可以用两只手去钩其他的猴子，每只手最多只能钩一只。\n\n从 $0$ 时刻开始，每一秒都有一只猴子松开它的一只手。这也许会造成一些猴子掉落到地上，我们想要知道它们掉落地上的时间（猴子掉落的速度都非常的快，可以忽略掉落的时间）。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，$n$ 代表猴子总数，$m$ 代表我们观察猴子的总时间。\n\n接下来 $n$ 行描述初始的情形。第 $k$ 行有两个整数，分别代表猴子 $k$ 的左手和右手分别抓住了哪两只猴子，$-1$ 代表它的那只手是空的。\n\n接下来 $m$ 行代表我们观察到的猴子的活动。第 $i$ 行有两个整数，代表在第 $i-1$ 时刻放开手的是哪只猴子和它放开的是哪只手（1 – 左，2 – 右）。", "outputFormat": "输出 $n$ 个整数，每行一个整数，代表每只猴子掉落到地上的时间。如果没有掉落，输出 `-1`。", "hint": "对于所有数据，$1 \\le n \\le 2 \\times 10^5$，$1 \\le m \\le 4 \\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2003] Monkeys", "background": "", "description": "一棵树上有 $n$ 只猴子。他们从 $1 \\sim n$ 编号。编号为 $1$ 的猴子用它的尾巴盘住了一个树枝，剩下的猴子要么被其他的猴子钩住要么就是自己用手钩住其他的猴子。每只猴子都可以用两只手去钩其他的猴子，每只手最多只能钩一只。\n\n从 $0$ 时刻开始，每一秒都有一只猴子松开它的一只手。这也许会造成一些猴子掉落到地上，我们想要知道它们掉落地上的时间（猴子掉落的速度都非常的快，可以忽略掉落的时间）。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$，$n$ 代表猴子总数，$m$ 代表我们观察猴子的总时间。\n\n接下来 $n$ 行描述初始的情形。第 $k$ 行有两个整数，分别代表猴子 $k$ 的左手和右手分别抓住了哪两只猴子，$-1$ 代表它的那只手是空的。\n\n接下来 $m$ 行代表我们观察到的猴子的活动。第 $i$ 行有两个整数，代表在第 $i-1$ 时刻放开手的是哪只猴子和它放开的是哪只手（1 – 左，2 – 右）。", "outputFormat": "输出 $n$ 个整数，每行一个整数，代表每只猴子掉落到地上的时间。如果没有掉落，输出 `-1`。", "hint": "对于所有数据，$1 \\le n \\le 2 \\times 10^5$，$1 \\le m \\le 4 \\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8060", "type": "P", "difficulty": 5, "samples": [["3\n2\n5\n7\n6\n0\n1\n4\n12\n3\n2", "TAK\nNIE\nTAK\nTAK\nNIE\nTAK"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2003", "POI（波兰）", "最短路", "中国剩余定理 CRT"], "title": "[POI 2003] Sums", "background": "", "description": "我们给定一个整数集合 $A$。考虑一个非负整数集合 $A'$，所有属于 $A'$ 的集合的数 $x$ 满足当且仅当能被表示成一些属于 $A$ 的元素的和（数字可重复）。\n\n比如，当 $A = \\{2,5,7\\}$，属于 $A'$ 的数为：$0$（$0$ 个元素的和），$2$，$4$（$2 + 2$）和 $12$（$5 + 7$ or $7 + 5$ or $2 + 2 + 2 + 2 + 2 + 2$）；但是元素 $1$ 和 $3$ 不属于 $A'$。", "inputFormat": "第一行有一个整数 $n$，代表集合 $A$ 的元素个数。接下来每行一个数 $a_i$ 描述一个元素。$A = \\{a_1,a_2,...,a_n\\}$。\n\n接下来一个整数 $k$，然后每行一个整数，分别代表 $b_1,b_2,...,b_k$。", "outputFormat": "输出 $k$ 行。如果 $b_i$ 属于 $A'$，第 $i$ 行打印 `TAK`，否则打印 `NIE`。", "hint": "对于所有数据，$1 \\le n \\le 5 \\times 10^3$，$1 \\le k \\le 10^4$，$1 \\le a_1 < a_2 < ... < a_n \\le 5 \\times 10^4$，$0 \\le b_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2003] Sums", "background": "", "description": "我们给定一个整数集合 $A$。考虑一个非负整数集合 $A'$，所有属于 $A'$ 的集合的数 $x$ 满足当且仅当能被表示成一些属于 $A$ 的元素的和（数字可重复）。\n\n比如，当 $A = \\{2,5,7\\}$，属于 $A'$ 的数为：$0$（$0$ 个元素的和），$2$，$4$（$2 + 2$）和 $12$（$5 + 7$ or $7 + 5$ or $2 + 2 + 2 + 2 + 2 + 2$）；但是元素 $1$ 和 $3$ 不属于 $A'$。", "inputFormat": "第一行有一个整数 $n$，代表集合 $A$ 的元素个数。接下来每行一个数 $a_i$ 描述一个元素。$A = \\{a_1,a_2,...,a_n\\}$。\n\n接下来一个整数 $k$，然后每行一个整数，分别代表 $b_1,b_2,...,b_k$。", "outputFormat": "输出 $k$ 行。如果 $b_i$ 属于 $A'$，第 $i$ 行打印 `TAK`，否则打印 `NIE`。", "hint": "对于所有数据，$1 \\le n \\le 5 \\times 10^3$，$1 \\le k \\le 10^4$，$1 \\le a_1 < a_2 < ... < a_n \\le 5 \\times 10^4$，$0 \\le b_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8061", "type": "P", "difficulty": 7, "samples": [["1 3 3\n0 0 1\n3 3\n-3 3\n3 -3", "1"], ["1 5 3\n0 0 1\n3 3\n-3 3\n3 -3\n3 0\n0 3", "3"], ["4 10 100\n0 0 3\n10 0 3\n10 10 3\n0 10 3\n0 4\n0 5\n0 6\n5 3\n5 -3\n5 5\n6 7\n3 6\n10 4\n8 4", "5"]], "limits": {"time": [1000, 1000, 1000, 100, 100, 100, 100, 2000, 2000, 2000, 500, 3000, 500, 500, 500, 3000, 500, 3000, 500, 3000, 500, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "2016", "各省省选", "江苏", "Special Judge", "扫描线"], "title": "[JSOI2016] 炸弹攻击1 - 数据加强版", "background": "JYY 最近迷上了一款塔防游戏，在游戏里 JYY 除了建设建筑，还可以使用炸弹对屏幕上的敌人进行范围杀伤。", "description": "游戏地图可以简单认为是一个二维平面。JYY 建造了 $N $ 个建筑，每个建筑都是一个圆，其中第 $i$ 个建筑的圆心位于 $(x_i,y_i)$ 且半径为 $r_i$。地图上一共有 $M$ 个敌人，一个敌人可以近似看成一个平面上的点，其中第 $i$ 个敌人位于 $(p_i,q_i)$。JYY 可以使用一枚可以设置半径的炸弹，可以设置一个不超过 $R$ 的范围，然后选择平面上的一个点引爆，范围内的所有敌人全部消灭。\n\n当然，由于炸弹威力巨大，如果爆炸范围接触到 JYY 的建筑，那么 JYY 的建筑也会受到损伤。（注：如果炸弹的爆炸范围仅接触到了 JYY 建筑的边界，则不会对 JYY 的建筑造成损伤；如果敌人出现在了爆炸范围的边界，则该敌人被消灭）JYY 可以自由控制炸弹的爆炸地点和爆炸半径。作为一个保守的玩家，他希望在保证自己建筑毫发无损的情况下，消灭尽量多的敌人。", "inputFormat": "第一行包含三个非负整数，分别为 $N,M,R$；\n\n接下来 $N$ 行，每行三个整数，其中第 $i$ 行 $x_i,y_i,r_i$，表示第 $i$ 个建筑的位置和半径。数据保证所有建筑不相交（但是有可能边界接触）；\n\n接下来 $M$ 行，每行两个整数，其中第 $i$ 行为 $p_i,q_i$，表示第 $i$ 个敌人的位置。任意两个敌人的位置不同，且敌人不会出现在建筑里。", "outputFormat": "输出一行一个整数，表示 JYY 最多可以消灭的敌人数量。", "hint": "对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 10$，$1\\leq M\\leq 2000$，$1\\leq R,r_i\\leq 2\\times 10^4$，$|p_i|,|q_i|,|x_i|,|y_i|\\leq 2\\times 10^4$。\n\n数据来源于 NAIPC 2015 Problem A - Area of Effect，并有部分自造新数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2016] 炸弹攻击1 - 数据加强版", "background": "JYY 最近迷上了一款塔防游戏，在游戏里 JYY 除了建设建筑，还可以使用炸弹对屏幕上的敌人进行范围杀伤。", "description": "游戏地图可以简单认为是一个二维平面。JYY 建造了 $N $ 个建筑，每个建筑都是一个圆，其中第 $i$ 个建筑的圆心位于 $(x_i,y_i)$ 且半径为 $r_i$。地图上一共有 $M$ 个敌人，一个敌人可以近似看成一个平面上的点，其中第 $i$ 个敌人位于 $(p_i,q_i)$。JYY 可以使用一枚可以设置半径的炸弹，可以设置一个不超过 $R$ 的范围，然后选择平面上的一个点引爆，范围内的所有敌人全部消灭。\n\n当然，由于炸弹威力巨大，如果爆炸范围接触到 JYY 的建筑，那么 JYY 的建筑也会受到损伤。（注：如果炸弹的爆炸范围仅接触到了 JYY 建筑的边界，则不会对 JYY 的建筑造成损伤；如果敌人出现在了爆炸范围的边界，则该敌人被消灭）JYY 可以自由控制炸弹的爆炸地点和爆炸半径。作为一个保守的玩家，他希望在保证自己建筑毫发无损的情况下，消灭尽量多的敌人。", "inputFormat": "第一行包含三个非负整数，分别为 $N,M,R$；\n\n接下来 $N$ 行，每行三个整数，其中第 $i$ 行 $x_i,y_i,r_i$，表示第 $i$ 个建筑的位置和半径。数据保证所有建筑不相交（但是有可能边界接触）；\n\n接下来 $M$ 行，每行两个整数，其中第 $i$ 行为 $p_i,q_i$，表示第 $i$ 个敌人的位置。任意两个敌人的位置不同，且敌人不会出现在建筑里。", "outputFormat": "输出一行一个整数，表示 JYY 最多可以消灭的敌人数量。", "hint": "对于 $100\\%$ 的数据，满足 $1\\leq N\\leq 10$，$1\\leq M\\leq 2000$，$1\\leq R,r_i\\leq 2\\times 10^4$，$|p_i|,|q_i|,|x_i|,|y_i|\\leq 2\\times 10^4$。\n\n数据来源于 NAIPC 2015 Problem A - Area of Effect，并有部分自造新数据。", "locale": "zh-CN"}}}
{"pid": "P8062", "type": "P", "difficulty": 6, "samples": [["3\n2 1 3\n2\n22 13\n321", "9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2012", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2012] handsome", "background": "你是 OIer 中最帅的，所以你要做一道跟帅有关的题。", "description": "一个 $N$ 位数是帅气的，当且仅当每一个数位上的数为 $1,2,3$ 中的一个。而且相邻的两个数位上的数字构成的有序数对不是“危险数对”。\n\n- $N$ 位数 $X$ 在排列 $p$ 的意义下字典序小于 $N$ 位数 $Y$，当且仅当存在一个 $k$ 使得 $X_{p_1}=Y_{p_1},X_{p_2}=Y_{p_2},\\dots,X_{p_{k}}<Y_{p_{k}}$。\n\n- $N$ 位数 $X$ 在排列 $p$ 的意义下字典序等于 $N$ 位数 $Y$，当且仅当$X_{p_1}=Y_{p_1},X_{p_2}=Y_{p_2},\\dots,X_{p_{N}}=Y_{p_{N}}$。\n\n\n- $N$ 位数 $X$ 在排列 $p$ 的意义下字典序大于 $N$ 位数 $Y$，当且仅当存在一个 $k$ 使得 $X_{p_1}=Y_{p_1},X_{p_2}=Y_{p_2},\\dots,X_{p_{k}}>Y_{p_{k}}$。\n\n请你输出在排列 $p$ 意义下小于等于 $B$ 的帅气数的个数模 $10^9+7$ 的值。", "inputFormat": "输入的第一行包含一个整数 $N$，表示数字位数。\n\n第二行包含 $N$ 个空格分隔的整数，表示排列 $p$。该行的第 $i$ 个整数表示 $p_i$。\n\n第三行包含一个整数 $M$，表示危险数对个数。\n\n第四行 $M$ 个空格分隔的两位整数，第 $i$ 个两位整数 $\\overline{a_ib_i}$ 表示 $(a_i,b_i)$ 为危险数对。\n\n第五行一个正整数 $B$ 表示给定帅气数。", "outputFormat": "输出一行，表示在排列 $p$ 意义下小于等于 $B$ 的帅气数个数模 $10^9+7$。", "hint": "#### 数据范围：\nSubtask#0 为样例。\n\n$1\\le N\\le4\\times10^5$，$M>0$，$a_i,b_i\\in\\{1,2,3\\}$。\n\n保证 $B$ 为帅气数。\n\n\n#### 样例解释：\n\n$113,122,131,132,133,213,221,222,223,313,322$ 不是帅气数，因为出现了危险数对 $(2,2)$ 或 $(1,3)$。\n\n\n所以，所有 $3$ 位帅气数为：$\n111,112,121,123,\n211,212,231,232,233,\n311,312,321,323,331,332,333$。\n\n在排列 $2,1,3$ 意义下小于等于 $321$ 的帅气数有：$111,112,121,123,211,212,311,312,321$\n\n如 $323$ 在排列 $2,1,3$ 意义下与 $321$ 比较（设 $323$ 为 $X$，$321$ 为 $Y$）：\n\n- 先比较第 $2$ 位：$X_2=Y_2=2$；\n- 再比较第 $1$ 位：$X_1=Y_1=3$；\n- 最后比较第 $3$ 位：$X_3=3>Y_3=1$。\n\n所以 $323$ 在排列 $2,1,3$ 意义下大于 $321$，不是满足条件的帅气数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2012] handsome", "background": "你是 OIer 中最帅的，所以你要做一道跟帅有关的题。", "description": "一个 $N$ 位数是帅气的，当且仅当每一个数位上的数为 $1,2,3$ 中的一个。而且相邻的两个数位上的数字构成的有序数对不是“危险数对”。\n\n- $N$ 位数 $X$ 在排列 $p$ 的意义下字典序小于 $N$ 位数 $Y$，当且仅当存在一个 $k$ 使得 $X_{p_1}=Y_{p_1},X_{p_2}=Y_{p_2},\\dots,X_{p_{k}}<Y_{p_{k}}$。\n\n- $N$ 位数 $X$ 在排列 $p$ 的意义下字典序等于 $N$ 位数 $Y$，当且仅当$X_{p_1}=Y_{p_1},X_{p_2}=Y_{p_2},\\dots,X_{p_{N}}=Y_{p_{N}}$。\n\n\n- $N$ 位数 $X$ 在排列 $p$ 的意义下字典序大于 $N$ 位数 $Y$，当且仅当存在一个 $k$ 使得 $X_{p_1}=Y_{p_1},X_{p_2}=Y_{p_2},\\dots,X_{p_{k}}>Y_{p_{k}}$。\n\n请你输出在排列 $p$ 意义下小于等于 $B$ 的帅气数的个数模 $10^9+7$ 的值。", "inputFormat": "输入的第一行包含一个整数 $N$，表示数字位数。\n\n第二行包含 $N$ 个空格分隔的整数，表示排列 $p$。该行的第 $i$ 个整数表示 $p_i$。\n\n第三行包含一个整数 $M$，表示危险数对个数。\n\n第四行 $M$ 个空格分隔的两位整数，第 $i$ 个两位整数 $\\overline{a_ib_i}$ 表示 $(a_i,b_i)$ 为危险数对。\n\n第五行一个正整数 $B$ 表示给定帅气数。", "outputFormat": "输出一行，表示在排列 $p$ 意义下小于等于 $B$ 的帅气数个数模 $10^9+7$。", "hint": "#### 数据范围：\nSubtask#0 为样例。\n\n$1\\le N\\le4\\times10^5$，$M>0$，$a_i,b_i\\in\\{1,2,3\\}$。\n\n保证 $B$ 为帅气数。\n\n\n#### 样例解释：\n\n$113,122,131,132,133,213,221,222,223,313,322$ 不是帅气数，因为出现了危险数对 $(2,2)$ 或 $(1,3)$。\n\n\n所以，所有 $3$ 位帅气数为：$\n111,112,121,123,\n211,212,231,232,233,\n311,312,321,323,331,332,333$。\n\n在排列 $2,1,3$ 意义下小于等于 $321$ 的帅气数有：$111,112,121,123,211,212,311,312,321$\n\n如 $323$ 在排列 $2,1,3$ 意义下与 $321$ 比较（设 $323$ 为 $X$，$321$ 为 $Y$）：\n\n- 先比较第 $2$ 位：$X_2=Y_2=2$；\n- 再比较第 $1$ 位：$X_1=Y_1=3$；\n- 最后比较第 $3$ 位：$X_3=3>Y_3=1$。\n\n所以 $323$ 在排列 $2,1,3$ 意义下大于 $321$，不是满足条件的帅气数。", "locale": "zh-CN"}}}
{"pid": "P8063", "type": "P", "difficulty": 6, "samples": [["5 6 1 5 \n1 2 1 \n2 3 3 \n2 5 100 \n3 4 3 \n3 5 5 \n4 5 3 \n4 1 2 3 5", "-1 \n101 \n10"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2012", "O2优化", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2012] Shortest paths", "background": "Bit 镇的你要去 Hex 镇找你的 npy。", "description": "你所在的国家有 $n$ 个镇（镇从 $1$ 到 $n$ 编号），$m$ 条双向道路，Bit 镇在 $a$ 点，Hex 镇在 $b$ 点。每条道路有一个长度。你很了解周围的地图，所以找到了两个镇之间的最短路径，而且，决定将这条路径称为幸运路径。\n\n\n\n有一天，政府决定在公路上施工，为了维持交通，决定每次只关闭一条道路（关闭后道路不可通行）。\n\n对于这条幸运路径上的每一条道路，你想知道当这条道路正在关闭时从 Bit 镇到 Hex 镇的最短距离。", "inputFormat": "输入的第一行由 4 个整数组成：$n,m,a,b$，分别表示城镇数量，道路数量，Bit 镇编号，Hex 镇编号。\n\n接下来的 $m$ 行，第 $i$ 行包含三个整数 $u_i,v_i,w_i$ ：城镇 $u_i$ 和城镇 $v_i$ 由长度为 $w_i$ 的道路连接。\n\n输入的最后一行由数字 $k$ 和 $k$ 个数字组成：$(v_1(=a),v_2,\\dots,v_{k}(=b))$ ，表示幸运路径。 $v_i(1\\le i\\le k)$ 表示幸运路径上的第 $i$ 个点的编号。", "outputFormat": "输出共 $k-1$ 行。\n\n对于每个 $t=1\\dots k-1$，输出一行一个整数：道路 $(v_t,v_{t+1})$ 施工时，Bit 镇和 Hex 镇之间的最短路径的长度。如果路径不存在，则输出 `-1`。", "hint": "#### 数据范围：\nSubtask#0 为样例。\n\n$1\\le n\\le 2000$，$1\\le m\\le10^5$，$1\\le u_i,v_i\\le n$，$1\\le w_i\\le10^5$。\n\n对于 $i\\neq j$，满足 $u_i\\neq u_j$ 或 $v_i\\neq v_j$。\n\n#### 样例解释：\n\n![](https://s4.ax1x.com/2021/12/07/ochxxA.jpg)\n\n封闭道路 $(1,2)$ 后从点 $1$ 的 Bit 镇无法到达点 $5$ 的 Hex 镇。\n\n封闭道路 $(2,3)$ 后从点 $1$ 的 Bit 镇到点 $5$ 的 Hex 镇的最短路为 $1\\rightarrow 2\\rightarrow5$，长度 $1+100=101$。\n\n封闭道路 $(3,5)$ 后从点 $1$ 的 Bit 镇到点 $5$ 的 Hex 镇的最短路为 $1\\rightarrow 2\\rightarrow3\\rightarrow4\\rightarrow5$，长度 $1+3+3+3=10$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2012] Shortest paths", "background": "Bit 镇的你要去 Hex 镇找你的 npy。", "description": "你所在的国家有 $n$ 个镇（镇从 $1$ 到 $n$ 编号），$m$ 条双向道路，Bit 镇在 $a$ 点，Hex 镇在 $b$ 点。每条道路有一个长度。你很了解周围的地图，所以找到了两个镇之间的最短路径，而且，决定将这条路径称为幸运路径。\n\n\n\n有一天，政府决定在公路上施工，为了维持交通，决定每次只关闭一条道路（关闭后道路不可通行）。\n\n对于这条幸运路径上的每一条道路，你想知道当这条道路正在关闭时从 Bit 镇到 Hex 镇的最短距离。", "inputFormat": "输入的第一行由 4 个整数组成：$n,m,a,b$，分别表示城镇数量，道路数量，Bit 镇编号，Hex 镇编号。\n\n接下来的 $m$ 行，第 $i$ 行包含三个整数 $u_i,v_i,w_i$ ：城镇 $u_i$ 和城镇 $v_i$ 由长度为 $w_i$ 的道路连接。\n\n输入的最后一行由数字 $k$ 和 $k$ 个数字组成：$(v_1(=a),v_2,\\dots,v_{k}(=b))$ ，表示幸运路径。 $v_i(1\\le i\\le k)$ 表示幸运路径上的第 $i$ 个点的编号。", "outputFormat": "输出共 $k-1$ 行。\n\n对于每个 $t=1\\dots k-1$，输出一行一个整数：道路 $(v_t,v_{t+1})$ 施工时，Bit 镇和 Hex 镇之间的最短路径的长度。如果路径不存在，则输出 `-1`。", "hint": "#### 数据范围：\nSubtask#0 为样例。\n\n$1\\le n\\le 2000$，$1\\le m\\le10^5$，$1\\le u_i,v_i\\le n$，$1\\le w_i\\le10^5$。\n\n对于 $i\\neq j$，满足 $u_i\\neq u_j$ 或 $v_i\\neq v_j$。\n\n#### 样例解释：\n\n![](https://s4.ax1x.com/2021/12/07/ochxxA.jpg)\n\n封闭道路 $(1,2)$ 后从点 $1$ 的 Bit 镇无法到达点 $5$ 的 Hex 镇。\n\n封闭道路 $(2,3)$ 后从点 $1$ 的 Bit 镇到点 $5$ 的 Hex 镇的最短路为 $1\\rightarrow 2\\rightarrow5$，长度 $1+100=101$。\n\n封闭道路 $(3,5)$ 后从点 $1$ 的 Bit 镇到点 $5$ 的 Hex 镇的最短路为 $1\\rightarrow 2\\rightarrow3\\rightarrow4\\rightarrow5$，长度 $1+3+3+3=10$。\n", "locale": "zh-CN"}}}
{"pid": "P8064", "type": "P", "difficulty": 6, "samples": [["6 9\n2 1\n2 4\n4 4\n6 2\n6 3\n5 3\n4 6\n5 1\n2 6", "14"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2012", "O2优化", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2012] Spiral", "background": "你心血来潮，去公园里骑车。", "description": "公园可以看成一个 $N\\times N$ 的网格，第 $i$ 行，第 $j$ 列的格子坐标为 $(i,j)$。每个格子是可以走的道路或不能走的喷泉。\n\n你想骑出一条螺旋路径。\n\n- 螺旋路径的定义为：从一个格子出发，向一个方向走至少 $1$ 格，进行右转，再走至少 $1$ 格，进行右转，再走至少 $1$ 格，进行右转，再走至少 $1$ 格（只右转三次）。\n- 在螺旋路径中不能经过喷泉。\n\n现在你想找出你能骑的最长螺旋路径（路径长度为经过的格子数，含首尾）。\n\n保证存在一条螺旋路径。\n", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $K$，分别是公园的大小和喷泉的数量。\n\n接下来 $K$ 行每行 $2$ 个整数 $x$ 和 $y$，表示在坐标为 $(x,y)$ 的格子上有一个喷泉。", "outputFormat": "一行一个整数，你能骑的最长路线（即最长螺旋路径）。", "hint": "#### 数据范围：\nSubtask#0 为样例。\n\n$2\\le N\\le 1000$，$0\\le K\\le \\min(2000,N^2)$，$1\\le x,y\\le N$。\n\n#### 样例解释：\n公园如图所示，最右边图是最长螺旋路径，路径长度为 $14$，没有更长的路径。\n\n![](https://s4.ax1x.com/2021/12/07/ockbBq.md.jpg)\n\n注：前两幅图均为合法螺旋路径，帮助理解。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2012] Spiral", "background": "你心血来潮，去公园里骑车。", "description": "公园可以看成一个 $N\\times N$ 的网格，第 $i$ 行，第 $j$ 列的格子坐标为 $(i,j)$。每个格子是可以走的道路或不能走的喷泉。\n\n你想骑出一条螺旋路径。\n\n- 螺旋路径的定义为：从一个格子出发，向一个方向走至少 $1$ 格，进行右转，再走至少 $1$ 格，进行右转，再走至少 $1$ 格，进行右转，再走至少 $1$ 格（只右转三次）。\n- 在螺旋路径中不能经过喷泉。\n\n现在你想找出你能骑的最长螺旋路径（路径长度为经过的格子数，含首尾）。\n\n保证存在一条螺旋路径。\n", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $K$，分别是公园的大小和喷泉的数量。\n\n接下来 $K$ 行每行 $2$ 个整数 $x$ 和 $y$，表示在坐标为 $(x,y)$ 的格子上有一个喷泉。", "outputFormat": "一行一个整数，你能骑的最长路线（即最长螺旋路径）。", "hint": "#### 数据范围：\nSubtask#0 为样例。\n\n$2\\le N\\le 1000$，$0\\le K\\le \\min(2000,N^2)$，$1\\le x,y\\le N$。\n\n#### 样例解释：\n公园如图所示，最右边图是最长螺旋路径，路径长度为 $14$，没有更长的路径。\n\n![](https://s4.ax1x.com/2021/12/07/ockbBq.md.jpg)\n\n注：前两幅图均为合法螺旋路径，帮助理解。", "locale": "zh-CN"}}}
{"pid": "P8065", "type": "P", "difficulty": 5, "samples": [["7\n17 21\n24 36\n14 19\n27 20\n21 50\n18 5\n33 7\n4\n20 3\n50 2\n99 5\n10 2", "45\n71\n95\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2012", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2012] The Best Teams", "background": "你是国家队教练，你要选择一支最佳队伍去参加 BOI 世界杯。", "description": "你麾下有 $N$ 名球员，编号为 $1\\dots N$，第 $i$ 名球员有一个年龄 $age_i$，和技能值 $skill_i$。\n\n一个队伍的优秀程度为技能值之和。尽管如此，你认为把两名技能值相似的球员放在团队中是不行的，他们会产生矛盾。\n\n- 我们称两个球员 $x,y$ 技能值相似，当且仅当不存在第三个球员 $z$ 使得 $skill_x<skill_z<skill_y$。\n\n球队要参加 $T$ 场比赛。每场比赛有一个年龄限制 $A$，这意味着对于参加这场比赛的任意一个球员 $x$ 满足 $age_x\\le A$。此外，对于每场比赛还有一个人数限制 $K$，意味着参赛人数 $\\le K$。\n\n一个球员可多次参赛。", "inputFormat": "输入的第一行包含一个整数 $N$，代表球员的数量。\n\n接下来的 $N$ 行中的每一行都包含两个空格分隔的整数 $age_i,skill_i$。\n\n下一行包含一个整数 $T$，表示比赛的数量。\n\n接下来 $T$ 行，每行两个整数 $A,K$，分别表示每场比赛的年龄限制和球员人数限制。", "outputFormat": "对于每场比赛，输出你选择的队伍的优秀程度。", "hint": "#### 数据范围：\nSubtask#0 为样例。\n\n$1\\le N,T\\le 3\\times 10^5$，$1\\le age_i,skill_i\\le10^9$。\n\n对于所有 $i\\neq j$ 满足 $skill_i\\neq skill_j$。\n\n#### 样例解释：\n共有 $6$ 对球员技能值相似，分别为 $(6,7)$ $(7,3)$ $(3,4)$ $(4,1)$ $(1,2)$ $(2,5)$。\n\n第一次比赛派出球员 $1,3,6$。\n\n第二次比赛派出球员 $1,5$。\n\n第三次比赛派出球员 $1,3,5,6$。\n\n第四次比赛无法派出球员，因为没有一个球员年龄 $\\le10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2012] The Best Teams", "background": "你是国家队教练，你要选择一支最佳队伍去参加 BOI 世界杯。", "description": "你麾下有 $N$ 名球员，编号为 $1\\dots N$，第 $i$ 名球员有一个年龄 $age_i$，和技能值 $skill_i$。\n\n一个队伍的优秀程度为技能值之和。尽管如此，你认为把两名技能值相似的球员放在团队中是不行的，他们会产生矛盾。\n\n- 我们称两个球员 $x,y$ 技能值相似，当且仅当不存在第三个球员 $z$ 使得 $skill_x<skill_z<skill_y$。\n\n球队要参加 $T$ 场比赛。每场比赛有一个年龄限制 $A$，这意味着对于参加这场比赛的任意一个球员 $x$ 满足 $age_x\\le A$。此外，对于每场比赛还有一个人数限制 $K$，意味着参赛人数 $\\le K$。\n\n一个球员可多次参赛。", "inputFormat": "输入的第一行包含一个整数 $N$，代表球员的数量。\n\n接下来的 $N$ 行中的每一行都包含两个空格分隔的整数 $age_i,skill_i$。\n\n下一行包含一个整数 $T$，表示比赛的数量。\n\n接下来 $T$ 行，每行两个整数 $A,K$，分别表示每场比赛的年龄限制和球员人数限制。", "outputFormat": "对于每场比赛，输出你选择的队伍的优秀程度。", "hint": "#### 数据范围：\nSubtask#0 为样例。\n\n$1\\le N,T\\le 3\\times 10^5$，$1\\le age_i,skill_i\\le10^9$。\n\n对于所有 $i\\neq j$ 满足 $skill_i\\neq skill_j$。\n\n#### 样例解释：\n共有 $6$ 对球员技能值相似，分别为 $(6,7)$ $(7,3)$ $(3,4)$ $(4,1)$ $(1,2)$ $(2,5)$。\n\n第一次比赛派出球员 $1,3,6$。\n\n第二次比赛派出球员 $1,5$。\n\n第三次比赛派出球员 $1,3,5,6$。\n\n第四次比赛无法派出球员，因为没有一个球员年龄 $\\le10$。", "locale": "zh-CN"}}}
{"pid": "P8066", "type": "P", "difficulty": 6, "samples": [["8 9\n1 4 1\n1 8 1\n2 3 0\n5 6 0\n6 5 0\n7 4 1\n6 4 0\n7 1 1\n4 5 0\n", "8 5 6 2 3 1 7 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2012", "Special Judge", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2012] Fan Groups", "background": "BOI 世界杯即将开始，有球迷们在城市中宣传他们支持的队伍。", "description": "有 $n$ 个城市广场（标记为 $1$ 到 $n$）和其中一些之间的 $m$ 条单向街道，每个广场上初始有一群球迷（每个广场上的球迷支持不同球队）。\n\n这 $n$ 群球迷按照某个特定的顺序进行以下操作：\n\n- 占领他们所在的广场（如在 $1$ 广场的人会先占领 $1$ 广场）。\n- 从他们占领的某个广场 $u$ 出发，走到与其相邻的每个广场 $v$。如果广场 $v$ 已经被人占领，他们会在边 $(u,v)$ 上发生冲突，并不再在这个方向上前进；否则，他们会占领广场 $v$，并重复这一步，直到没有能到达的广场为止。\n- 如果他们所在的广场在此前被别的人群占领，他们不会与那群人发生冲突。在这种情况下，他们什么都不做。\n\n给定该城市，以及发生冲突的边集。求一种球迷的行动顺序，使得发生冲突的边集与输入相符。", "inputFormat": "\n输入的第一行包含两个整数 $N,M$，表示点数和边数。\n\n接下来 $M$ 行，每行三个整数 $A_i,B_i,C_i$，表示有向边 $A_i\\rightarrow B_i$，如果 $C_i=1$，则这条边上发生了冲突。\n", "outputFormat": "一个排列，球迷的行动顺序。\n\n若无合法方案，输出 `-1`。", "hint": "Special Judge 由 [TOBapNw](https://www.luogu.com.cn/user/185864) 提供，若 SPJ 有误，请联系他。\n\n#### 数据范围：\nSubtask#0 为样例。\n\n$3\\le N\\le 2\\times10^4$，$M\\le\\min(\\frac{N\\times(N-1)}{2},2\\times10^5)$，$1\\le A_i,B_i\\le N$，$C_i\\in\\{0,1\\}$。\n\n\n#### 样例解释：\n\n$8$ 号广场的球迷首先行动，占领广场 $8$；\n\n接下来 $5$ 号广场的球迷行动，占领广场 $4,5,6$；\n\n接下来 $6$ 号广场的球迷行动，因为广场 $6$ 已经被占领，他们什么都不做；\n\n接下来 $2$ 号广场的球迷占领广场 $2,3$；\n\n$3$ 号广场的球迷什么都不做；\n\n接下来 $1$ 号广场的球迷行动，占领广场 $1$，并在边 $(1,4),(1,8)$ 上引发冲突；\n\n$7$ 号广场的球迷占领广场 $7$，并在边 $(7,1),(7,4)$ 上引发冲突；\n\n注意合法的顺序可能不止一种，样例中，$(2,3,8,4,1,7,5,6)$ 也是一种合法的方案。\n\n注意 $(8,5,6,3,2,1,7,4)$ 不是合法的方案，因为按照这个方案，$(2,3)$ 上也会发生冲突，与输入不符。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2012] Fan Groups", "background": "BOI 世界杯即将开始，有球迷们在城市中宣传他们支持的队伍。", "description": "有 $n$ 个城市广场（标记为 $1$ 到 $n$）和其中一些之间的 $m$ 条单向街道，每个广场上初始有一群球迷（每个广场上的球迷支持不同球队）。\n\n这 $n$ 群球迷按照某个特定的顺序进行以下操作：\n\n- 占领他们所在的广场（如在 $1$ 广场的人会先占领 $1$ 广场）。\n- 从他们占领的某个广场 $u$ 出发，走到与其相邻的每个广场 $v$。如果广场 $v$ 已经被人占领，他们会在边 $(u,v)$ 上发生冲突，并不再在这个方向上前进；否则，他们会占领广场 $v$，并重复这一步，直到没有能到达的广场为止。\n- 如果他们所在的广场在此前被别的人群占领，他们不会与那群人发生冲突。在这种情况下，他们什么都不做。\n\n给定该城市，以及发生冲突的边集。求一种球迷的行动顺序，使得发生冲突的边集与输入相符。", "inputFormat": "\n输入的第一行包含两个整数 $N,M$，表示点数和边数。\n\n接下来 $M$ 行，每行三个整数 $A_i,B_i,C_i$，表示有向边 $A_i\\rightarrow B_i$，如果 $C_i=1$，则这条边上发生了冲突。\n", "outputFormat": "一个排列，球迷的行动顺序。\n\n若无合法方案，输出 `-1`。", "hint": "Special Judge 由 [TOBapNw](https://www.luogu.com.cn/user/185864) 提供，若 SPJ 有误，请联系他。\n\n#### 数据范围：\nSubtask#0 为样例。\n\n$3\\le N\\le 2\\times10^4$，$M\\le\\min(\\frac{N\\times(N-1)}{2},2\\times10^5)$，$1\\le A_i,B_i\\le N$，$C_i\\in\\{0,1\\}$。\n\n\n#### 样例解释：\n\n$8$ 号广场的球迷首先行动，占领广场 $8$；\n\n接下来 $5$ 号广场的球迷行动，占领广场 $4,5,6$；\n\n接下来 $6$ 号广场的球迷行动，因为广场 $6$ 已经被占领，他们什么都不做；\n\n接下来 $2$ 号广场的球迷占领广场 $2,3$；\n\n$3$ 号广场的球迷什么都不做；\n\n接下来 $1$ 号广场的球迷行动，占领广场 $1$，并在边 $(1,4),(1,8)$ 上引发冲突；\n\n$7$ 号广场的球迷占领广场 $7$，并在边 $(7,1),(7,4)$ 上引发冲突；\n\n注意合法的顺序可能不止一种，样例中，$(2,3,8,4,1,7,5,6)$ 也是一种合法的方案。\n\n注意 $(8,5,6,3,2,1,7,4)$ 不是合法的方案，因为按照这个方案，$(2,3)$ 上也会发生冲突，与输入不符。", "locale": "zh-CN"}}}
{"pid": "P8067", "type": "P", "difficulty": 6, "samples": [["6\n6 10 -7 2 5 -12", "19\n56"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2012", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2012] balls", "background": "你在玩物理画线。", "description": "有 $N$ 个球和 $N$ 个杯子，从左到右编号依次为 $1\\dots N$。开始时第 $i$ 个球对准第 $i$ 个杯子（不受影响的情况下第 $i$ 个球落入第 $i$ 个杯子）。第 $i$ 个杯子有一个分值 $c_i$，一个球落入一个杯子可以获得该杯子的分数（杯子容量视为无限），分数可能为负数。\n\n你可以画两种线，线的两端点必须对准某个杯子，且两个端点不能是同一个杯子：\n1. 从左上到右下，设左上对准的杯子编号为 $i$，右下对准的杯子编号为 $j$，使编号为 $i\\dots j$ 的球全部落入第 $j$ 号杯子。\n\n1. 从右上到左下，设左下对准的杯子编号为 $i$，右上对准的杯子编号为 $j$，使编号为 $i\\dots j$ 的球全部落入第 $i$ 号杯子。\n\n\n现在你想知道你只用**恰好一根**第一种线、**恰好一根**第二种线，分别能获得的最大分数。\n", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n接下来一行 $N$ 个整数，表示 $c_1\\dots c_N$。", "outputFormat": "输出第一行一个整数——只使用第一种的最大分数。\n\n输出第二行一个整数——只使用第二种的最大分数。", "hint": "#### 数据范围：\nSubtask#0 为样例。\n\n$3\\le N\\le3\\times10^5$，$|c_i|\\le10^9$。\n\n\n#### 样例解释：\n\n![](https://s4.ax1x.com/2021/12/08/ogquFI.jpg)\n\n第一幅图为第一种线，分数：$6+10+5+5+5+(-12)=19$，可以证明是最大值。\n\n第二幅图为第二种线，分数：$6+10+10+10+10+10=56$，可以证明是最大值。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2012] balls", "background": "你在玩物理画线。", "description": "有 $N$ 个球和 $N$ 个杯子，从左到右编号依次为 $1\\dots N$。开始时第 $i$ 个球对准第 $i$ 个杯子（不受影响的情况下第 $i$ 个球落入第 $i$ 个杯子）。第 $i$ 个杯子有一个分值 $c_i$，一个球落入一个杯子可以获得该杯子的分数（杯子容量视为无限），分数可能为负数。\n\n你可以画两种线，线的两端点必须对准某个杯子，且两个端点不能是同一个杯子：\n1. 从左上到右下，设左上对准的杯子编号为 $i$，右下对准的杯子编号为 $j$，使编号为 $i\\dots j$ 的球全部落入第 $j$ 号杯子。\n\n1. 从右上到左下，设左下对准的杯子编号为 $i$，右上对准的杯子编号为 $j$，使编号为 $i\\dots j$ 的球全部落入第 $i$ 号杯子。\n\n\n现在你想知道你只用**恰好一根**第一种线、**恰好一根**第二种线，分别能获得的最大分数。\n", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n接下来一行 $N$ 个整数，表示 $c_1\\dots c_N$。", "outputFormat": "输出第一行一个整数——只使用第一种的最大分数。\n\n输出第二行一个整数——只使用第二种的最大分数。", "hint": "#### 数据范围：\nSubtask#0 为样例。\n\n$3\\le N\\le3\\times10^5$，$|c_i|\\le10^9$。\n\n\n#### 样例解释：\n\n![](https://s4.ax1x.com/2021/12/08/ogquFI.jpg)\n\n第一幅图为第一种线，分数：$6+10+5+5+5+(-12)=19$，可以证明是最大值。\n\n第二幅图为第二种线，分数：$6+10+10+10+10+10=56$，可以证明是最大值。", "locale": "zh-CN"}}}
{"pid": "P8068", "type": "P", "difficulty": 5, "samples": [["4 5 1 4 \n2 1 2 1 \n3 4 3 1 \n2 3 1 2 \n3 1 1 4 \n2 4 2 4 ", "2 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "BalticOI（波罗的海）"], "title": "[BalticOI 2002] Bicriterial routing (Day2)", "background": "", "description": "给定一张 $n$ 个点、$m$ 条边的无向图。边 $e$ 的长度为二元组 $(c_e, t_e)$。\n\n一条途径 $w$ 的长度 $(c_w, t_w) = (\\sum_{e \\in w} c_e, \\sum_{e \\in w} t_e)$。\n\n一条途径 $w$ 比另一条途径 $w'$ 短，当且仅当二者长度不同且 $c_w \\le c_{w'}, t_w \\le t_{w'}$。\n\n显然可能有两条途径无法比较长短，进而两点间可能出现多条长度不同的最短路径。\n\n求 $s$ 至 $e$ 的最短路径的长度取值的种类数。", "inputFormat": "第一行四个整数 $n, m, s, e$。\n\n接下来 $m$ 行，每行四个整数 $p, r, c, t$，分别表示一条边的两个端点与长度。", "outputFormat": "一行一个整数，你的答案。", "hint": "#### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2x4o606g.png)\n\n考虑其中四条途径：\n\n0. $1 \\to 2 \\to 4$（长度为 $(4, 5)$）；\n1. $1 \\to 3 \\to 4$（长度为 $(4, 5)$）；\n2. $1 \\to 2 \\to 3 \\to 4$（长度为 $(6, 4)$）；\n3. $1 \\to 3 \\to 2 \\to 4$（长度为 $(4, 10)$）。\n\n途径 0、途径 1 均短于途径 3。最短路长度共有两种：$(4, 5)$（途径 0、途径 1）、$(6, 4)$（途径 2）。\n\n#### 数据范围\n\n$1 \\le s, e, p, r \\le n \\le 100$，$0 \\le m \\le 300$，$s \\ne e$，$0 \\le c, t \\le 100$。\n\n#### 提示\n\n[BalticOI](https://boi.cses.fi/contests.php) 2002 Day2 A.\n\n由于自定义计分脚本参数配置，暂不支持 AC WA TLE MLE 外的评测状态显示。如果你得到了此外任何一种评测状态，你将得到 UKE。\n\nSubtask #0 为样例；Subtask #1 为数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2002] Bicriterial routing (Day2)", "background": "", "description": "给定一张 $n$ 个点、$m$ 条边的无向图。边 $e$ 的长度为二元组 $(c_e, t_e)$。\n\n一条途径 $w$ 的长度 $(c_w, t_w) = (\\sum_{e \\in w} c_e, \\sum_{e \\in w} t_e)$。\n\n一条途径 $w$ 比另一条途径 $w'$ 短，当且仅当二者长度不同且 $c_w \\le c_{w'}, t_w \\le t_{w'}$。\n\n显然可能有两条途径无法比较长短，进而两点间可能出现多条长度不同的最短路径。\n\n求 $s$ 至 $e$ 的最短路径的长度取值的种类数。", "inputFormat": "第一行四个整数 $n, m, s, e$。\n\n接下来 $m$ 行，每行四个整数 $p, r, c, t$，分别表示一条边的两个端点与长度。", "outputFormat": "一行一个整数，你的答案。", "hint": "#### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2x4o606g.png)\n\n考虑其中四条途径：\n\n0. $1 \\to 2 \\to 4$（长度为 $(4, 5)$）；\n1. $1 \\to 3 \\to 4$（长度为 $(4, 5)$）；\n2. $1 \\to 2 \\to 3 \\to 4$（长度为 $(6, 4)$）；\n3. $1 \\to 3 \\to 2 \\to 4$（长度为 $(4, 10)$）。\n\n途径 0、途径 1 均短于途径 3。最短路长度共有两种：$(4, 5)$（途径 0、途径 1）、$(6, 4)$（途径 2）。\n\n#### 数据范围\n\n$1 \\le s, e, p, r \\le n \\le 100$，$0 \\le m \\le 300$，$s \\ne e$，$0 \\le c, t \\le 100$。\n\n#### 提示\n\n[BalticOI](https://boi.cses.fi/contests.php) 2002 Day2 A.\n\n由于自定义计分脚本参数配置，暂不支持 AC WA TLE MLE 外的评测状态显示。如果你得到了此外任何一种评测状态，你将得到 UKE。\n\nSubtask #0 为样例；Subtask #1 为数据。", "locale": "zh-CN"}}}
{"pid": "P8069", "type": "P", "difficulty": 6, "samples": [[".*** \n#*.x \n###. \nx... ", ".*** \nx*#x \n###. \n.... "], ["...x \n###. \n#*** \nx..* ", "No winning move \nDraw "], [".### \nx#*x \n***. \n.... ", "No winning move \nLosing "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2002] L Game © Edward de Bono (Day2)", "background": "", "description": "L 棋是一种双人棋类游戏，在 $4 \\times 4$ 的正方形棋盘上进行。\n\n共有两种棋子：\n- L 形棋：大小为 $4$，双方各有一枚；\n- 中性棋：大小为 $1$，共两枚，中立。\n\n任意时刻，棋盘上任意格子上方应至多有一枚棋子。\n\n双方轮流操作。一次合法的操作是：先移动己方 L 形棋至一个合法的与当前位置不同的位置，再移动至多一枚中性棋。\n\n无法进行合法操作者败。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pmca33zr.png)\n\n记标有网格的 L 形棋操作者为 A，标有斜线者为 B。\n\n若处于上图三种局面之一且 A 先手，则能且仅能将己方 L 形棋移至另外两种局面。此后，A 可以将中性棋之一移至某空格子，或不移动中性棋。故 A 共有 $2 \\times (6 + 6 + 1)$ 种操作方案。\n\n若处于下图局面且 A 先手，则 A 由于无法移动其 L 形棋而败，B 胜。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9j9uia3u.png)\n\n「妙棋」指：先手进行后存在必胜策略的操作。「败局」指：先手无论如何操作，后手都存在必胜策略的局面。「和棋」指：先手不存在妙棋且不为败局的局面。\n\n尽管棋盘很小，但 L 棋存在超过 $18 \\thinspace 000$ 种可能的局面；且在同一时刻先手可能存在多达 $195$ 种操作方案，但其中仅有一种妙棋。\n\n对于给定局面，找到一步妙棋，或判定该局面为败局或和棋。若存在多种妙棋，输出任意一种即可。", "inputFormat": "四行，每行四个字符，表示棋局。\n\n- `#` 表示先手棋子所在位置；\n- `*` 表示后手棋子所在位置；\n- `x` 表示中性棋子所在位置；\n- `.` 表示空格子。", "outputFormat": "- 若存在妙棋，则输出移动后的局面，格式同输入格式。注意 `#` 依然表示操作前的先手，`*` 同理。\n\n- 否则第一行一个字符串 `No winning move`。\n  - 若为和棋，则第二行输出一个字符串 `Draw`；\n  - 若为败局，则第二行输出一个字符串 `Losing`。\n\n注意：虽然 Special Judge 忽略行末回车与文末换行，但请不要输出多于 $64$ 个字符，否则会被判为 Wrong Answer。", "hint": "#### 数据范围\n\n保证给出局面合法。\n\n#### 提示\n\n[BalticOI](https://boi.cses.fi/contests.php) 2002 Day2 B.\n\n你能在不存在妙棋的测试点得分，当且仅当你通过了至少一半存在妙棋的测试点。（注：原题面中为至少一个，但这里取原题解中说法即「一半」。）\n\n由于自定义计分脚本参数配置，暂不支持 AC WA TLE MLE 外的评测状态显示。如果你得到了此外任何一种评测状态，你将得到 UKE。\n\nSubtask #0 为样例；Subtask #1 为数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2002] L Game © Edward de Bono (Day2)", "background": "", "description": "L 棋是一种双人棋类游戏，在 $4 \\times 4$ 的正方形棋盘上进行。\n\n共有两种棋子：\n- L 形棋：大小为 $4$，双方各有一枚；\n- 中性棋：大小为 $1$，共两枚，中立。\n\n任意时刻，棋盘上任意格子上方应至多有一枚棋子。\n\n双方轮流操作。一次合法的操作是：先移动己方 L 形棋至一个合法的与当前位置不同的位置，再移动至多一枚中性棋。\n\n无法进行合法操作者败。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pmca33zr.png)\n\n记标有网格的 L 形棋操作者为 A，标有斜线者为 B。\n\n若处于上图三种局面之一且 A 先手，则能且仅能将己方 L 形棋移至另外两种局面。此后，A 可以将中性棋之一移至某空格子，或不移动中性棋。故 A 共有 $2 \\times (6 + 6 + 1)$ 种操作方案。\n\n若处于下图局面且 A 先手，则 A 由于无法移动其 L 形棋而败，B 胜。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9j9uia3u.png)\n\n「妙棋」指：先手进行后存在必胜策略的操作。「败局」指：先手无论如何操作，后手都存在必胜策略的局面。「和棋」指：先手不存在妙棋且不为败局的局面。\n\n尽管棋盘很小，但 L 棋存在超过 $18 \\thinspace 000$ 种可能的局面；且在同一时刻先手可能存在多达 $195$ 种操作方案，但其中仅有一种妙棋。\n\n对于给定局面，找到一步妙棋，或判定该局面为败局或和棋。若存在多种妙棋，输出任意一种即可。", "inputFormat": "四行，每行四个字符，表示棋局。\n\n- `#` 表示先手棋子所在位置；\n- `*` 表示后手棋子所在位置；\n- `x` 表示中性棋子所在位置；\n- `.` 表示空格子。", "outputFormat": "- 若存在妙棋，则输出移动后的局面，格式同输入格式。注意 `#` 依然表示操作前的先手，`*` 同理。\n\n- 否则第一行一个字符串 `No winning move`。\n  - 若为和棋，则第二行输出一个字符串 `Draw`；\n  - 若为败局，则第二行输出一个字符串 `Losing`。\n\n注意：虽然 Special Judge 忽略行末回车与文末换行，但请不要输出多于 $64$ 个字符，否则会被判为 Wrong Answer。", "hint": "#### 数据范围\n\n保证给出局面合法。\n\n#### 提示\n\n[BalticOI](https://boi.cses.fi/contests.php) 2002 Day2 B.\n\n你能在不存在妙棋的测试点得分，当且仅当你通过了至少一半存在妙棋的测试点。（注：原题面中为至少一个，但这里取原题解中说法即「一半」。）\n\n由于自定义计分脚本参数配置，暂不支持 AC WA TLE MLE 外的评测状态显示。如果你得到了此外任何一种评测状态，你将得到 UKE。\n\nSubtask #0 为样例；Subtask #1 为数据。", "locale": "zh-CN"}}}
{"pid": "P8070", "type": "P", "difficulty": 5, "samples": [["2 \n2 0 270 5 \nS \nT 180 \nS \nS \nS \n1 -1 0 8 \nS \nS \nT 90 \nS \nT 270 \nS \nT 90 \nS \n", "2 \n2 1 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2002] Moving Robots (Day2)", "background": "", "description": "一些机器人在二维平面上根据指令移动。机器人移动互不影响，甚至同一时刻同一点可能有多个机器人。\n\n移动有两种：\n- `S`：向前一步。  \n  记当前位置为 $(x, y)$，当前方向为 $C$：若 $C = 0$ 移至 $(x + 1, y)$；若 $C = 90$ 移至 $(x, y + 1)$；若 $C = 180$ 移至 $(x - 1, y)$；若 $C = 270$ 移至 $(x, y - 1)$。\n  \n- `T D`：方向增加 $D$。  \n  即令当前方向 $C \\gets (C + D) \\bmod 360$。\n\n\n\n给定各机器人预设的指令序列，移除一些指令使所有机器人最终位于同一位置，并最小化移除指令数。", "inputFormat": "第一行一个整数 $R$，表示机器人数。\n\n接下来对于每个机器人：\n\n- 第一行四个整数 $x, y, C, n$，表示初始位置、初始方向、指令序列长度。\n- 接下来 $n$ 行，每行一个指令，格式见题目描述。", "outputFormat": "若能够使所有机器人最终位于同一位置，输出两行：\n- 第一行一个整数，表示最小移除指令数；\n- 第二行两个整数，表示在移除指令数最小的情况下最终位置坐标（若有多种可能答案输出任意一种即可）。\n\n若无法使所有机器人最终位于同一位置，输出一行一个整数 $-1$。\n\n注意：虽然 Special Judge 忽略行末回车与文末换行，但请不要输出多于 $64$ 个字符，否则会被判为 Wrong Answer。", "hint": "#### 样例说明\n\n有两个机器人。第一个初始位于 $(2, 0)$，初始方向 $270$，指令序列长度为 $5$；第二个初始位于 $(1, -1)$，初始方向 $0$，指令序列长度为 $8$。至少需要移除两个指令。例如移除第一个机器人第三个指令与第二个机器人第五个指令，此时最终位置为 $(2, 1)$。\n\n#### 数据范围\n\n$2 \\le R \\le 10$，$1 \\le n \\le 50$，$-50 \\le x, y \\le 50$，$C, D \\in \\lbrace 0, 90, 180, 270 \\rbrace$，保证指令格式如题目描述。\n\n#### 提示\n\n[BalticOI](https://boi.cses.fi/contests.php) 2002 Day2 C.\n\n由于自定义计分脚本参数配置，暂不支持 AC WA TLE MLE 外的评测状态显示。如果你得到了此外任何一种评测状态，你将得到 UKE。\n\nSubtask 设置与题目无关，仅为便于自定义积分脚本运行。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2002] Moving Robots (Day2)", "background": "", "description": "一些机器人在二维平面上根据指令移动。机器人移动互不影响，甚至同一时刻同一点可能有多个机器人。\n\n移动有两种：\n- `S`：向前一步。  \n  记当前位置为 $(x, y)$，当前方向为 $C$：若 $C = 0$ 移至 $(x + 1, y)$；若 $C = 90$ 移至 $(x, y + 1)$；若 $C = 180$ 移至 $(x - 1, y)$；若 $C = 270$ 移至 $(x, y - 1)$。\n  \n- `T D`：方向增加 $D$。  \n  即令当前方向 $C \\gets (C + D) \\bmod 360$。\n\n\n\n给定各机器人预设的指令序列，移除一些指令使所有机器人最终位于同一位置，并最小化移除指令数。", "inputFormat": "第一行一个整数 $R$，表示机器人数。\n\n接下来对于每个机器人：\n\n- 第一行四个整数 $x, y, C, n$，表示初始位置、初始方向、指令序列长度。\n- 接下来 $n$ 行，每行一个指令，格式见题目描述。", "outputFormat": "若能够使所有机器人最终位于同一位置，输出两行：\n- 第一行一个整数，表示最小移除指令数；\n- 第二行两个整数，表示在移除指令数最小的情况下最终位置坐标（若有多种可能答案输出任意一种即可）。\n\n若无法使所有机器人最终位于同一位置，输出一行一个整数 $-1$。\n\n注意：虽然 Special Judge 忽略行末回车与文末换行，但请不要输出多于 $64$ 个字符，否则会被判为 Wrong Answer。", "hint": "#### 样例说明\n\n有两个机器人。第一个初始位于 $(2, 0)$，初始方向 $270$，指令序列长度为 $5$；第二个初始位于 $(1, -1)$，初始方向 $0$，指令序列长度为 $8$。至少需要移除两个指令。例如移除第一个机器人第三个指令与第二个机器人第五个指令，此时最终位置为 $(2, 1)$。\n\n#### 数据范围\n\n$2 \\le R \\le 10$，$1 \\le n \\le 50$，$-50 \\le x, y \\le 50$，$C, D \\in \\lbrace 0, 90, 180, 270 \\rbrace$，保证指令格式如题目描述。\n\n#### 提示\n\n[BalticOI](https://boi.cses.fi/contests.php) 2002 Day2 C.\n\n由于自定义计分脚本参数配置，暂不支持 AC WA TLE MLE 外的评测状态显示。如果你得到了此外任何一种评测状态，你将得到 UKE。\n\nSubtask 设置与题目无关，仅为便于自定义积分脚本运行。", "locale": "zh-CN"}}}
{"pid": "P8071", "type": "P", "difficulty": 1, "samples": [["10 10", "9 25"], ["0 30 ", "23 45"], ["23 40", "22 55"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2009", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #7] SPAVANAC", "background": "", "description": "给定 $24$ 小时制下的时间 $H:M$，输出 $24$ 小时制下比该时间早 $45$ 分钟对应的时刻。", "inputFormat": "第一行，两个正整数 $H,M$。", "outputFormat": "输出两个整数，表示早 $45$ 分钟后的时刻。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$0 \\le H \\le 23$，$0 \\le M \\le 59$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 1 SPAVANAC_。**\n\n**本题分值按 COCI 原题设置，满分 $30$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #7] SPAVANAC", "background": "", "description": "给定 $24$ 小时制下的时间 $H:M$，输出 $24$ 小时制下比该时间早 $45$ 分钟对应的时刻。", "inputFormat": "第一行，两个正整数 $H,M$。", "outputFormat": "输出两个整数，表示早 $45$ 分钟后的时刻。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$0 \\le H \\le 23$，$0 \\le M \\le 59$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 1 SPAVANAC_。**\n\n**本题分值按 COCI 原题设置，满分 $30$。**", "locale": "zh-CN"}}}
{"pid": "P8072", "type": "P", "difficulty": 1, "samples": [["6", "8 2"], ["7", "8 3"], ["5", "8 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2009", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #7] COKOLADA", "background": "", "description": "顾客急需大小为 $K$ 个单位的巧克力，但现在你**只能选择一块**大小为 $2$ 的非负整数幂（即 $1,2,4,8,16,\\cdots$）的巧克力进行购买。\n\n为了满足顾客需求，可以采取切割的方式，将一块大小为 $D$ 个单位的巧克力切成两块大小为 $\\dfrac{D}{2}$ 个单位的巧克力。\n\n为了降低成本，你需要求出所需的巧克力大小的最小值和最小切割次数。", "inputFormat": "第一行，一个正整数 $K$，表示顾客所需的巧克力大小。", "outputFormat": "输出两个整数，分别表示巧克力大小的最小值和所系的最少切割次数。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le K \\le 10^6$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 2 COKOLADA_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #7] COKOLADA", "background": "", "description": "顾客急需大小为 $K$ 个单位的巧克力，但现在你**只能选择一块**大小为 $2$ 的非负整数幂（即 $1,2,4,8,16,\\cdots$）的巧克力进行购买。\n\n为了满足顾客需求，可以采取切割的方式，将一块大小为 $D$ 个单位的巧克力切成两块大小为 $\\dfrac{D}{2}$ 个单位的巧克力。\n\n为了降低成本，你需要求出所需的巧克力大小的最小值和最小切割次数。", "inputFormat": "第一行，一个正整数 $K$，表示顾客所需的巧克力大小。", "outputFormat": "输出两个整数，分别表示巧克力大小的最小值和所系的最少切割次数。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le K \\le 10^6$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 2 COKOLADA_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN"}}}
{"pid": "P8073", "type": "P", "difficulty": 4, "samples": [["4 4\n.LX.\n.X..\n....\n.L..", "1"], ["4 4\n.XLX\n.X..\n...L\n.X..", "2"], ["7 7\n...X.X.\nXL....L\n.......\n...L...\n.....XL\n.......\n...X...", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2009", "最短路", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #7] BAKICE", "background": "", "description": "有轨电车上总会出现诸多问题，其中包括人群抢夺座位的乱象——他们总会以飞快的速度去抢距离自己最近的座位。\n\n当多名乘客同时瞄准同一个座位准备入座时，问题将会产生。如果只有一名乘客离该座位最近（对于此题，两个点的距离定义为**欧几里得距离**，即 $\\sqrt{(x_1-x_2)^2+(y_1-y_2)^2}$），那么他就会入座而其他乘客将会另选最近的座位；如果多名乘客与座位的欧几里得距离都是最近的，那么将会产生「爆炸事件」。「爆炸事件」后，涉及到的乘客和座位都将会「爆炸」（即后续无需继续考虑）。\n\n给定电车中座位、乘客和地板的 $R \\times C$ 地图，用 $\\texttt .$ 、$\\texttt X$ 和 $\\texttt L$ 分别表示地板、乘客和座位。求在所有乘客都落座或「爆炸」和座位被抢光最先发生的一个事件之前，发生了多少次「爆炸事件」。", "inputFormat": "第一行，两个整数 $R,C$。\n\n接下来的 $R$ 行，每行 $C$ 个字符 $\\texttt .$ / $\\texttt X$ / $\\texttt L$。\n\n数据保证，至少存在一个 $\\texttt X$ 和一个 $\\texttt L$。同时，不存在两个 $\\texttt L$ 和某一个 $\\texttt X$ 的距离相等的情况。", "outputFormat": "输出「爆炸事件」的次数。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le R,C \\le 100$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 3 BAKICE_。**\n\n**本题分值按 COCI 原题设置，满分 $70$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #7] BAKICE", "background": "", "description": "有轨电车上总会出现诸多问题，其中包括人群抢夺座位的乱象——他们总会以飞快的速度去抢距离自己最近的座位。\n\n当多名乘客同时瞄准同一个座位准备入座时，问题将会产生。如果只有一名乘客离该座位最近（对于此题，两个点的距离定义为**欧几里得距离**，即 $\\sqrt{(x_1-x_2)^2+(y_1-y_2)^2}$），那么他就会入座而其他乘客将会另选最近的座位；如果多名乘客与座位的欧几里得距离都是最近的，那么将会产生「爆炸事件」。「爆炸事件」后，涉及到的乘客和座位都将会「爆炸」（即后续无需继续考虑）。\n\n给定电车中座位、乘客和地板的 $R \\times C$ 地图，用 $\\texttt .$ 、$\\texttt X$ 和 $\\texttt L$ 分别表示地板、乘客和座位。求在所有乘客都落座或「爆炸」和座位被抢光最先发生的一个事件之前，发生了多少次「爆炸事件」。", "inputFormat": "第一行，两个整数 $R,C$。\n\n接下来的 $R$ 行，每行 $C$ 个字符 $\\texttt .$ / $\\texttt X$ / $\\texttt L$。\n\n数据保证，至少存在一个 $\\texttt X$ 和一个 $\\texttt L$。同时，不存在两个 $\\texttt L$ 和某一个 $\\texttt X$ 的距离相等的情况。", "outputFormat": "输出「爆炸事件」的次数。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le R,C \\le 100$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 3 BAKICE_。**\n\n**本题分值按 COCI 原题设置，满分 $70$。**", "locale": "zh-CN"}}}
{"pid": "P8074", "type": "P", "difficulty": 4, "samples": [["2\n1 5 10\n7 8 2", "3"], ["3\n-1 -1 -1\n5 5 5\n10 10 10", "11"], ["5\n11 -15 -15\n14 -5 -15\n-1 -1 -5\n10 -4 -1\n19 -4 19", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2009", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #7] SVEMIR", "background": "", "description": "太空帝国要通过建造隧道来联通它的 $N$ 个星球。\n\n每个星球用三维坐标 $(x_i,y_i,z_i)$ 来表示，而在两个星球 $A,B$ 之间建造隧道的价格为 $\\min\\{|x_A-x_B|,|y_A-y_B|,|z_A-z_B|\\}$。\n\n现要建造 $N-1$ 条隧道使得所有的星球都能直接或间接相连。求完成该任务所需的最小总价。", "inputFormat": "第一行，一个整数 $N$。\n\n接下来的 $N$ 行，每行三个整数 $x_i,y_i,z_i$，表示第 $i$ 个星球的坐标。\n\n数据保证不存在两个具有相同坐标的星球。", "outputFormat": "输出所需的最小总价。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$-10^9 \\le x_i,y_i,z_i \\le 10^9$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 4 SVEMIR_。**\n\n**本题分值按 COCI 原题设置，满分 $100$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #7] SVEMIR", "background": "", "description": "太空帝国要通过建造隧道来联通它的 $N$ 个星球。\n\n每个星球用三维坐标 $(x_i,y_i,z_i)$ 来表示，而在两个星球 $A,B$ 之间建造隧道的价格为 $\\min\\{|x_A-x_B|,|y_A-y_B|,|z_A-z_B|\\}$。\n\n现要建造 $N-1$ 条隧道使得所有的星球都能直接或间接相连。求完成该任务所需的最小总价。", "inputFormat": "第一行，一个整数 $N$。\n\n接下来的 $N$ 行，每行三个整数 $x_i,y_i,z_i$，表示第 $i$ 个星球的坐标。\n\n数据保证不存在两个具有相同坐标的星球。", "outputFormat": "输出所需的最小总价。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$-10^9 \\le x_i,y_i,z_i \\le 10^9$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 4 SVEMIR_。**\n\n**本题分值按 COCI 原题设置，满分 $100$。**", "locale": "zh-CN"}}}
{"pid": "P8075", "type": "P", "difficulty": 5, "samples": [["2 3\nSMS\nMMS", "3 5"], ["2 3\nS.M\nM..", "2 0"], ["4 5\nM....\n..S.M\nSS..S\n.M...", "10 13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["动态规划 DP", "2009", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #7] KRALJEVI", "background": "", "description": "Mirko 和 Slavko 在一个 $R \\times C$ 的棋盘上游戏。他们各自在棋盘上摆放一定数量的王——王每步可以任选 $8$ 个方向中的一个移动 $1$ 步。现规定：\n\n- 两个王之间的「距离」为其中一个王移动到另一个王所在棋格所需的最少步数。\n- 一个玩家的「扩张度」为该玩家所有的王两两之间距离总和。\n\n分别求出 Mirko 和 Slavko 的「扩张度」。", "inputFormat": "第一行，两个整数 $R,C$。\n\n接下来的 $R$ 行，每行 $C$ 个字符 $\\texttt M$ / $\\texttt S$ / $\\texttt .$，分别表示 Mirko 的王、Slavko 的王和空位。数据保证每一方在棋盘上至少有一个王。", "outputFormat": "输出两个整数，分别表示 Mirko 和 Slavko 的「扩张度」。", "hint": "**【数据规模与约定】**\n\n- 对于 $20\\%$ 的数据，棋盘上王的总数不超过 $5000$。\n- 对于 $60\\%$ 的数据，$R,C \\le 300$。\n- 对于 $100\\%$ 的数据，$1 \\le R,C \\le 1000$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 5 KRALJEVI_。**\n\n**本题分值按 COCI 原题设置，满分 $120$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #7] KRALJEVI", "background": "", "description": "Mirko 和 Slavko 在一个 $R \\times C$ 的棋盘上游戏。他们各自在棋盘上摆放一定数量的王——王每步可以任选 $8$ 个方向中的一个移动 $1$ 步。现规定：\n\n- 两个王之间的「距离」为其中一个王移动到另一个王所在棋格所需的最少步数。\n- 一个玩家的「扩张度」为该玩家所有的王两两之间距离总和。\n\n分别求出 Mirko 和 Slavko 的「扩张度」。", "inputFormat": "第一行，两个整数 $R,C$。\n\n接下来的 $R$ 行，每行 $C$ 个字符 $\\texttt M$ / $\\texttt S$ / $\\texttt .$，分别表示 Mirko 的王、Slavko 的王和空位。数据保证每一方在棋盘上至少有一个王。", "outputFormat": "输出两个整数，分别表示 Mirko 和 Slavko 的「扩张度」。", "hint": "**【数据规模与约定】**\n\n- 对于 $20\\%$ 的数据，棋盘上王的总数不超过 $5000$。\n- 对于 $60\\%$ 的数据，$R,C \\le 300$。\n- 对于 $100\\%$ 的数据，$1 \\le R,C \\le 1000$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 5 KRALJEVI_。**\n\n**本题分值按 COCI 原题设置，满分 $120$。**", "locale": "zh-CN"}}}
{"pid": "P8076", "type": "P", "difficulty": 5, "samples": [["5 6\n1 2\n2 3\n3 1\n3 4\n1 4\n4 5", "1\n2\n1\n2\n2\n1"], ["7 7\n1 2\n2 3\n3 1\n4 5\n5 6\n6 7\n7 4", "0"], ["77777 4\n1 2\n1 3\n1 4\n1 5", "1\n2\n2\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #7] RESTORAN", "background": "", "description": "给定一张含 $N$ 个结点、$E$ 条边的无向图。\n\n现可将这 $E$ 条边染成红色或蓝色。求一种染色方式，使得所有度数不小于 $2$ 的结点都能连接两种颜色的边。若无解，则输出 $0$。", "inputFormat": "第一行，两个整数 $N,E$。\n\n接下来的 $E$ 行，每行两个整数 $A_i,B_i$，表示第 $i$ 条边连接 $A_i,B_i$ 两个结点。数据保证不存在重边。", "outputFormat": "若无解，请输出 $0$。\n\n否则输出 $E$ 行，每行输出一条边所染成的颜色（与输入顺序对应）。红色用 $1$ 表示，蓝色用 $2$ 表示。\n\n如果存在多解，请输出任意一种。", "hint": "**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（78 pts）：$N \\le 1000$，$E \\le 5000$。\n- Subtask 2（52 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,E \\le 10^5$。\n\n**【提示与说明】**\n\n欢迎通过私信或发帖对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/omg15jba) 进行 hack。\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 6 RESTORAN_。**\n\n**本题分值按 COCI 原题设置，满分 $130$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #7] RESTORAN", "background": "", "description": "给定一张含 $N$ 个结点、$E$ 条边的无向图。\n\n现可将这 $E$ 条边染成红色或蓝色。求一种染色方式，使得所有度数不小于 $2$ 的结点都能连接两种颜色的边。若无解，则输出 $0$。", "inputFormat": "第一行，两个整数 $N,E$。\n\n接下来的 $E$ 行，每行两个整数 $A_i,B_i$，表示第 $i$ 条边连接 $A_i,B_i$ 两个结点。数据保证不存在重边。", "outputFormat": "若无解，请输出 $0$。\n\n否则输出 $E$ 行，每行输出一条边所染成的颜色（与输入顺序对应）。红色用 $1$ 表示，蓝色用 $2$ 表示。\n\n如果存在多解，请输出任意一种。", "hint": "**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（78 pts）：$N \\le 1000$，$E \\le 5000$。\n- Subtask 2（52 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N,E \\le 10^5$。\n\n**【提示与说明】**\n\n欢迎通过私信或发帖对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/omg15jba) 进行 hack。\n\n**题目译自 [COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST #7](https://hsin.hr/coci/archive/2009_2010/contest7_tasks.pdf) _Task 6 RESTORAN_。**\n\n**本题分值按 COCI 原题设置，满分 $130$。**", "locale": "zh-CN"}}}
{"pid": "P8078", "type": "P", "difficulty": 6, "samples": [["5 2\n5 4 2 3 1\n3 4\n2 5", "1\n5"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["莫队", "2022", "分治", "扫描线", "WC"], "title": "[WC2022] 秃子酋长", "background": "5s 512M -O2", "description": "传说在明斯克航空航天局中，有一名强大的秃子酋长。\n\n秃子酋长法力无边，他的头上没有头发，而且头特别硬，跑得还不慢。\n\n这一天，豌豆射手来到了明斯克航空航天局。\n\n秃子酋长为了考验这一位新人，给他出了这样一道题：\n\n给一个长为 $n$ 的排列 $a_1,\\dots, a_n$，有 $m$ 次询问，每次询问区间 $[l, r]$ 内，排序后相邻的数在原序列中的位置的差的绝对值之和。", "inputFormat": "第一行两个数表示 $n, m$；\n\n之后一行 $n$ 个数依次表示序列 $a$ 中的元素；\n\n之后 $m$ 行，每行两个数 $l, r$ 表示一次查询。", "outputFormat": "对于每次询问，输出一行一个数表示答案。", "hint": "**【样例解释】**\n\n第一个询问，$2,3$ 排序后为 $2,3$，在原序列中的位置为 $3,4$，相邻元素在原序列中位置差的绝对值之和为 $|3 - 4| = 1$。\n\n第二个询问，$4, 2, 3, 1$ 排序后为 $1, 2, 3, 4$，在原序列中的位置为 $5, 3, 4, 2$，相邻元素在原序列中位置差的绝对值之和为 $|5 - 3| + |3 - 4| + |4 - 2| = 5$。\n\n**【数据范围】**\n\n对 $10\\%$ 的数据，$n, m \\leq 10^3$；  \n对另外 $10\\%$ 的数据，$n, m \\leq 5 \\times 10^4$；  \n对另外 $10\\%$ 的数据，$n, m \\leq 10^5$；  \n对另外 $10\\%$ 的数据，$n, m \\leq 2 \\times 10^5$；  \n对另外 $20\\%$ 的数据，$|a_i - i| \\leq 10$；  \n对另外 $20\\%$ 的数据，$m=\\dfrac{n(n-1)}{2}$；  \n对其余数据，无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n, m \\leq 5\\times 10^5$，$1 \\leq a_i \\leq n$，$a_i$ 互不相同，$1 \\leq l \\leq r \\leq n$，所有数值为整数。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2022] 秃子酋长", "background": "5s 512M -O2", "description": "传说在明斯克航空航天局中，有一名强大的秃子酋长。\n\n秃子酋长法力无边，他的头上没有头发，而且头特别硬，跑得还不慢。\n\n这一天，豌豆射手来到了明斯克航空航天局。\n\n秃子酋长为了考验这一位新人，给他出了这样一道题：\n\n给一个长为 $n$ 的排列 $a_1,\\dots, a_n$，有 $m$ 次询问，每次询问区间 $[l, r]$ 内，排序后相邻的数在原序列中的位置的差的绝对值之和。", "inputFormat": "第一行两个数表示 $n, m$；\n\n之后一行 $n$ 个数依次表示序列 $a$ 中的元素；\n\n之后 $m$ 行，每行两个数 $l, r$ 表示一次查询。", "outputFormat": "对于每次询问，输出一行一个数表示答案。", "hint": "**【样例解释】**\n\n第一个询问，$2,3$ 排序后为 $2,3$，在原序列中的位置为 $3,4$，相邻元素在原序列中位置差的绝对值之和为 $|3 - 4| = 1$。\n\n第二个询问，$4, 2, 3, 1$ 排序后为 $1, 2, 3, 4$，在原序列中的位置为 $5, 3, 4, 2$，相邻元素在原序列中位置差的绝对值之和为 $|5 - 3| + |3 - 4| + |4 - 2| = 5$。\n\n**【数据范围】**\n\n对 $10\\%$ 的数据，$n, m \\leq 10^3$；  \n对另外 $10\\%$ 的数据，$n, m \\leq 5 \\times 10^4$；  \n对另外 $10\\%$ 的数据，$n, m \\leq 10^5$；  \n对另外 $10\\%$ 的数据，$n, m \\leq 2 \\times 10^5$；  \n对另外 $20\\%$ 的数据，$|a_i - i| \\leq 10$；  \n对另外 $20\\%$ 的数据，$m=\\dfrac{n(n-1)}{2}$；  \n对其余数据，无特殊限制。\n\n对于 $100\\%$ 的数据，满足 $1 \\leq n, m \\leq 5\\times 10^5$，$1 \\leq a_i \\leq n$，$a_i$ 互不相同，$1 \\leq l \\leq r \\leq n$，所有数值为整数。\n", "locale": "zh-CN"}}}
{"pid": "P8079", "type": "P", "difficulty": 7, "samples": [["7\np\ngg---\ngg---\nggg--\na\ng----\nssgs-\na\ng---g\ngggg-\na\ng---g\ng---g\ng---g\ng---g\na\na\nc\n-sss-\n", "paper\npaths\npanda\npanic\n\naargh\npaper\napple\n\nafore\napply\napple\n\napple\napple\napple\napple\napple\n\nabcde\n\napple\n\nkraal\ncobra\n"]], "limits": {"time": [60000], "memory": [1048576]}, "tags": ["2022", "交互题", "Special Judge", "信息论", "WC"], "title": "[WC2022] 猜词", "background": "**滥用本题评测将直接封号。**\n\n**由于评测机环境限制，请勿使用 C++14 (GCC 9) 语言提交本题，否则可能导致编译错误。**\n\n使用了 出题人 发送的官方数据，但是由于存在争议先保留民间数据称号。\n\n60 s, 1 GiB, -O2, 交互\n\n在洛谷提交时请注意以下两点：\n\n- **请去除代码中的 `word.h` 头文件。**\n\n- **不要使用 `rand()` 进行随机。** 请更换为 `mt19937` 。注意不要重名了，不然会 CE。具体请查看[此处](https://www.luogu.com.cn/discuss/405355)。\n\n**这是一道交互题。**", "description": "在本题中，你需要和交互库玩一款经典的游戏。在每局游戏中，交互库会从词库中生成一个 $5$ 个字母的单词，并告诉你它的首字母，你需要在 $5$ 次机会内猜中它。\n\n每次猜测都需要猜一个词库中存在的单词。如果猜对了，游戏结束；在每次猜错后，交互库会返回哪些字母的位置是正确的（以金色表示），以及哪些字母在待猜单词中出现了但位置是错误的（以银色表示）。\n\n具体来说，交互库会返回两个布尔类型的数组 $\\texttt{gold}$ 和 $\\texttt{silver}$。`gold[i]`（$0 \\leq i < 5$，下同）表示第 $i$ 个字母是否猜对了（位置和内容均正确）；`silver[i]` 表示如果第 $i$ 个字母没猜对（即不为金色），这个字母是否在本次猜测非金色字母的部分出现过。\n\n例如，待猜单词为 $\\texttt{panic}$，猜测 $\\texttt{paper}$ 后交互库会返回 `gold[0] = true`（$\\texttt{p}$ 正确），`gold[1] = true`（$\\texttt{a}$ 正确），其余均为 `false`（注意 $\\texttt{paper}$ 中的第二个 $\\texttt{p}$ 虽然在 $\\texttt{panic}$ 中出现过，但出现位置为本次猜测中的金色字母部分，因此 `silver[2] = false`）。\n\n又如，待猜单词为 $\\texttt{apple}$，猜测 $\\texttt{paper}$ 后交互库会返回 `gold[2] = true`（$\\texttt{p}$ 正确），`silver[0] = true`（$\\texttt{p}$ 在本次猜测非金色字母的部分出现过），`silver[1] = true`（$\\texttt{a}$ 出现过），`silver[3] = true`（$\\texttt{e}$ 出现过），其余均为 `false`。\n\n**【评分方式】**\n\n由于每局游戏具有较高的随机性，在本题中，你需要连续玩 $T = 1000$ 局游戏。每局游戏的评分标准如下：\n\n- 如果任意一次猜测单词的长度不等于 $5$，或者**猜测的单词不在词库中**，得 $0$ 分；\n- 如果第 $1$ 次猜测猜对，得 $150$ 分；\n- 如果第 $2$ 次猜测猜对，得 $120$ 分；\n- 如果第 $3$ 次猜测猜对，得 $100$ 分；\n- 如果第 $4$ 次猜测猜对，得 $90$ 分；\n- 如果第 $5$ 次猜测猜对，得 $85$ 分；\n- 如果 $5$ 次猜测均错，得 $0$ 分。你在本题中的得分为【$1000$ 局游戏的平均分】和 $100$ 分的较小值。\n\n**【如何使用交互库】**\n\n本题只支持 C++。\n\n你只能提交一个源文件 `word.cpp` 实现下列函数，并且遵循下面的命名和接口。\n\n你需要包含头文件 `word.h`。\n\n你不需要，也不应该实现主函数。\n\n你需要实现的函数有：\n\n```cpp\nconst char *guess(int num_testcase, int remaining_guesses, char initial_letter, bool *gold, bool *silver);\nvoid init(int num_scramble, const char *scramble);\n```\n\n其中，第 $i$ 局游戏的 `num_testcase` 参数为 $i$（$1 \\leq i \\leq T$），每局游戏会调用 $1 \\sim 5$ 次 `guess` 函数，第 $j$ 次调用的 `remaining_guesses` 参数为 $6-j$（$1 \\leq j \\leq 5$）。`initial_letter` 参数为当前局游戏待猜单词的首字母（保证为小写字母）。保证每次调用 `guess` 函数的 `num_testcase` 单调不降；保证 `num_testcase` 相同时 `initial_letter` 不变且 `remaining_guesses` 单调递降。如果某次猜测猜对或非法，则该局游戏结束，下次调用 `guess` 函数为下一局游戏。\n\n`gold` 和 `silver` 为如上所述的两个布尔数组。当 `remaining_guesses` 参数为 $5$ 时，`gold` 和 `silver` 数组不可用（即，可能为空指针），请避免使用它们；当 `remaining_guesses` 参数小于 $5$ 时，`gold` 和 `silver` 为两个大小为 $5$ 的布尔数组，存储着上一次猜测的结果。\n\n`guess` 函数的返回值需要是一个长度为 $5$ 的字符串，表示猜测的单词。该单词需要在词库中。\n\n`init` 函数会在调用所有 `guess` 函数之前调用恰好一次。其中 `num_scramble` 参数是词库大小，`scramble` 是一个长度为 $\\texttt{num\\_scramble} \\times 5$ 的字符串，存储着词库中的所有单词，每个单词长度为 $5$，中间没有任何分隔符。\n\n**【附加文件】**\n\n本题下发的文件有 `word.h, word_sample.cpp, play.cpp, grader.cpp, scramble.txt, scramble.csv, scramble_pure.txt`。\n\n`word_sample.cpp` 是你要实现的 `word.cpp` 的一个样例。\n\n`grader.cpp` 为示例评测程序（编译命令：`g++ ‐o grader grader.cpp word.cpp`）。\n\n`scramble.txt, scramble.csv, scramble_pure.txt` 均为本题所使用的词库文件，其中 `scramble.txt` 以换行符分隔单词，`scramble.csv` 以逗号分隔单词，`scramble_pure.txt` 不分隔单词（即，与 `init` 函数中的 `scramble` 参数内容相同）。\n\n`play.cpp` 是一个可以让你和你的程序玩这个游戏的程序（编译命令：`g++ ‐o play play.cpp word.cpp`）。下面介绍 `play.cpp` 的输入与输出格式。", "inputFormat": "**【样例输入格式】**\n\n输入第一行包含一个正整数 $T$，表示游戏局数。\n\n接下来 $T$ 局游戏，每局游戏第一行输入一个小写字母，表示待猜单词的首字母。\n\n接下来 $0 \\sim 4$ 行，每行一个长度为 $5$ 的由 $\\texttt{g}$、$\\texttt{s}$、$\\texttt{-}$ 组成的字符串，其中第 $i$ 位（$0 \\leq i < 5$，下同）是 $\\texttt{g}$ 表示 `gold[i] = true`，第 $i$ 位是 $\\texttt{s}$ 表示 `silver[i] = true`，第 $i$ 位是 $\\texttt{-}$ 表示 `gold[i] = silver[i] = false`。如果猜对或猜测单词非法，则该局游戏结束，因此输入的行数是可变的。", "outputFormat": "**【样例输出格式】**\n\n对于除了第一行游戏局数以外的每行输入，输出一个长度为 $5$ 的字符串，表示猜测的单词。样例输出加入了额外的空行以便阅读。", "hint": "**【样例解释】**\n\n对于第 $1$ 局游戏，待猜单词为 $\\texttt{panic}$，在第 $4$ 次猜测猜对。\n\n对于第 $2$ 局游戏，待猜单词为 $\\texttt{apple}$，在第 $3$ 次猜测猜对。\n\n对于第 $3$ 局游戏，待猜单词为 $\\texttt{apple}$，在第 $3$ 次猜测猜对。注意即使每个位置都有至少一次猜测为金色，也需要额外一次猜测才算猜对。\n\n对于第 $4$ 局游戏，待猜单词为 $\\texttt{above}$，$5$ 次猜测均错。注意第 $5$ 次猜测的结果并不需要输入，也不会传入 `guess` 函数。\n\n对于第 $5$ 局游戏，待猜单词为 $\\texttt{apple}$，第 $1$ 次猜测非法（不在词库内），该局游戏直接结束。注意样例程序并不会自动识别这种情况。\n\n对于第 $6$ 局游戏，待猜单词为 $\\texttt{apple}$，在第 $1$ 次猜测猜对。\n\n对于第 $7$ 局游戏，待猜单词为 $\\texttt{cobra}$。注意猜测 $\\texttt{kraal}$ 时两个 $\\texttt{a}$ 均为银色。注意由于样例程序并不知道待猜单词是什么，需要手动结束程序。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$T = 1000$，$\\texttt{num\\_scramble} = 8869$。每次待猜的单词均在词库中所有单词这一范围内独立均匀随机生成，这些单词在调用 `guess` 函数之前已经完全确定，不会根据和你的程序的交互过程动态构造。交互库本身使用的时间不超过 $1$ 秒，使用的内存不超过 16 MiB。\n\n由于本题只有 $1$ 组评测数据，运行错误、超时、内存超限等错误都会导致本题总分为 $0$ 分。建议仔细检查避免此类错误。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2022] 猜词", "background": "**滥用本题评测将直接封号。**\n\n**由于评测机环境限制，请勿使用 C++14 (GCC 9) 语言提交本题，否则可能导致编译错误。**\n\n使用了 出题人 发送的官方数据，但是由于存在争议先保留民间数据称号。\n\n60 s, 1 GiB, -O2, 交互\n\n在洛谷提交时请注意以下两点：\n\n- **请去除代码中的 `word.h` 头文件。**\n\n- **不要使用 `rand()` 进行随机。** 请更换为 `mt19937` 。注意不要重名了，不然会 CE。具体请查看[此处](https://www.luogu.com.cn/discuss/405355)。\n\n**这是一道交互题。**", "description": "在本题中，你需要和交互库玩一款经典的游戏。在每局游戏中，交互库会从词库中生成一个 $5$ 个字母的单词，并告诉你它的首字母，你需要在 $5$ 次机会内猜中它。\n\n每次猜测都需要猜一个词库中存在的单词。如果猜对了，游戏结束；在每次猜错后，交互库会返回哪些字母的位置是正确的（以金色表示），以及哪些字母在待猜单词中出现了但位置是错误的（以银色表示）。\n\n具体来说，交互库会返回两个布尔类型的数组 $\\texttt{gold}$ 和 $\\texttt{silver}$。`gold[i]`（$0 \\leq i < 5$，下同）表示第 $i$ 个字母是否猜对了（位置和内容均正确）；`silver[i]` 表示如果第 $i$ 个字母没猜对（即不为金色），这个字母是否在本次猜测非金色字母的部分出现过。\n\n例如，待猜单词为 $\\texttt{panic}$，猜测 $\\texttt{paper}$ 后交互库会返回 `gold[0] = true`（$\\texttt{p}$ 正确），`gold[1] = true`（$\\texttt{a}$ 正确），其余均为 `false`（注意 $\\texttt{paper}$ 中的第二个 $\\texttt{p}$ 虽然在 $\\texttt{panic}$ 中出现过，但出现位置为本次猜测中的金色字母部分，因此 `silver[2] = false`）。\n\n又如，待猜单词为 $\\texttt{apple}$，猜测 $\\texttt{paper}$ 后交互库会返回 `gold[2] = true`（$\\texttt{p}$ 正确），`silver[0] = true`（$\\texttt{p}$ 在本次猜测非金色字母的部分出现过），`silver[1] = true`（$\\texttt{a}$ 出现过），`silver[3] = true`（$\\texttt{e}$ 出现过），其余均为 `false`。\n\n**【评分方式】**\n\n由于每局游戏具有较高的随机性，在本题中，你需要连续玩 $T = 1000$ 局游戏。每局游戏的评分标准如下：\n\n- 如果任意一次猜测单词的长度不等于 $5$，或者**猜测的单词不在词库中**，得 $0$ 分；\n- 如果第 $1$ 次猜测猜对，得 $150$ 分；\n- 如果第 $2$ 次猜测猜对，得 $120$ 分；\n- 如果第 $3$ 次猜测猜对，得 $100$ 分；\n- 如果第 $4$ 次猜测猜对，得 $90$ 分；\n- 如果第 $5$ 次猜测猜对，得 $85$ 分；\n- 如果 $5$ 次猜测均错，得 $0$ 分。你在本题中的得分为【$1000$ 局游戏的平均分】和 $100$ 分的较小值。\n\n**【如何使用交互库】**\n\n本题只支持 C++。\n\n你只能提交一个源文件 `word.cpp` 实现下列函数，并且遵循下面的命名和接口。\n\n你需要包含头文件 `word.h`。\n\n你不需要，也不应该实现主函数。\n\n你需要实现的函数有：\n\n```cpp\nconst char *guess(int num_testcase, int remaining_guesses, char initial_letter, bool *gold, bool *silver);\nvoid init(int num_scramble, const char *scramble);\n```\n\n其中，第 $i$ 局游戏的 `num_testcase` 参数为 $i$（$1 \\leq i \\leq T$），每局游戏会调用 $1 \\sim 5$ 次 `guess` 函数，第 $j$ 次调用的 `remaining_guesses` 参数为 $6-j$（$1 \\leq j \\leq 5$）。`initial_letter` 参数为当前局游戏待猜单词的首字母（保证为小写字母）。保证每次调用 `guess` 函数的 `num_testcase` 单调不降；保证 `num_testcase` 相同时 `initial_letter` 不变且 `remaining_guesses` 单调递降。如果某次猜测猜对或非法，则该局游戏结束，下次调用 `guess` 函数为下一局游戏。\n\n`gold` 和 `silver` 为如上所述的两个布尔数组。当 `remaining_guesses` 参数为 $5$ 时，`gold` 和 `silver` 数组不可用（即，可能为空指针），请避免使用它们；当 `remaining_guesses` 参数小于 $5$ 时，`gold` 和 `silver` 为两个大小为 $5$ 的布尔数组，存储着上一次猜测的结果。\n\n`guess` 函数的返回值需要是一个长度为 $5$ 的字符串，表示猜测的单词。该单词需要在词库中。\n\n`init` 函数会在调用所有 `guess` 函数之前调用恰好一次。其中 `num_scramble` 参数是词库大小，`scramble` 是一个长度为 $\\texttt{num\\_scramble} \\times 5$ 的字符串，存储着词库中的所有单词，每个单词长度为 $5$，中间没有任何分隔符。\n\n**【附加文件】**\n\n本题下发的文件有 `word.h, word_sample.cpp, play.cpp, grader.cpp, scramble.txt, scramble.csv, scramble_pure.txt`。\n\n`word_sample.cpp` 是你要实现的 `word.cpp` 的一个样例。\n\n`grader.cpp` 为示例评测程序（编译命令：`g++ ‐o grader grader.cpp word.cpp`）。\n\n`scramble.txt, scramble.csv, scramble_pure.txt` 均为本题所使用的词库文件，其中 `scramble.txt` 以换行符分隔单词，`scramble.csv` 以逗号分隔单词，`scramble_pure.txt` 不分隔单词（即，与 `init` 函数中的 `scramble` 参数内容相同）。\n\n`play.cpp` 是一个可以让你和你的程序玩这个游戏的程序（编译命令：`g++ ‐o play play.cpp word.cpp`）。下面介绍 `play.cpp` 的输入与输出格式。", "inputFormat": "**【样例输入格式】**\n\n输入第一行包含一个正整数 $T$，表示游戏局数。\n\n接下来 $T$ 局游戏，每局游戏第一行输入一个小写字母，表示待猜单词的首字母。\n\n接下来 $0 \\sim 4$ 行，每行一个长度为 $5$ 的由 $\\texttt{g}$、$\\texttt{s}$、$\\texttt{-}$ 组成的字符串，其中第 $i$ 位（$0 \\leq i < 5$，下同）是 $\\texttt{g}$ 表示 `gold[i] = true`，第 $i$ 位是 $\\texttt{s}$ 表示 `silver[i] = true`，第 $i$ 位是 $\\texttt{-}$ 表示 `gold[i] = silver[i] = false`。如果猜对或猜测单词非法，则该局游戏结束，因此输入的行数是可变的。", "outputFormat": "**【样例输出格式】**\n\n对于除了第一行游戏局数以外的每行输入，输出一个长度为 $5$ 的字符串，表示猜测的单词。样例输出加入了额外的空行以便阅读。", "hint": "**【样例解释】**\n\n对于第 $1$ 局游戏，待猜单词为 $\\texttt{panic}$，在第 $4$ 次猜测猜对。\n\n对于第 $2$ 局游戏，待猜单词为 $\\texttt{apple}$，在第 $3$ 次猜测猜对。\n\n对于第 $3$ 局游戏，待猜单词为 $\\texttt{apple}$，在第 $3$ 次猜测猜对。注意即使每个位置都有至少一次猜测为金色，也需要额外一次猜测才算猜对。\n\n对于第 $4$ 局游戏，待猜单词为 $\\texttt{above}$，$5$ 次猜测均错。注意第 $5$ 次猜测的结果并不需要输入，也不会传入 `guess` 函数。\n\n对于第 $5$ 局游戏，待猜单词为 $\\texttt{apple}$，第 $1$ 次猜测非法（不在词库内），该局游戏直接结束。注意样例程序并不会自动识别这种情况。\n\n对于第 $6$ 局游戏，待猜单词为 $\\texttt{apple}$，在第 $1$ 次猜测猜对。\n\n对于第 $7$ 局游戏，待猜单词为 $\\texttt{cobra}$。注意猜测 $\\texttt{kraal}$ 时两个 $\\texttt{a}$ 均为银色。注意由于样例程序并不知道待猜单词是什么，需要手动结束程序。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$T = 1000$，$\\texttt{num\\_scramble} = 8869$。每次待猜的单词均在词库中所有单词这一范围内独立均匀随机生成，这些单词在调用 `guess` 函数之前已经完全确定，不会根据和你的程序的交互过程动态构造。交互库本身使用的时间不超过 $1$ 秒，使用的内存不超过 16 MiB。\n\n由于本题只有 $1$ 组评测数据，运行错误、超时、内存超限等错误都会导致本题总分为 $0$ 分。建议仔细检查避免此类错误。", "locale": "zh-CN"}}}
{"pid": "P8080", "type": "P", "difficulty": 2, "samples": [["3\nSSS", "3"], ["4\nSLLS", "4"], ["9\nSLLLLSSLL", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2011", "COCI（克罗地亚）"], "title": "[COCI 2011/2012 #4] KINO", "background": "", "description": "电影院的每排有 $N$ 个座位。座位分为普通座位（$\\texttt S$）和爱心座位（$\\texttt L$）。其中，爱心座位总是两两出现。\n\n每排座位的相邻两个座位之间都设有一个杯架（除了两个爱心座位之间外）。特别地，一排座位的两侧也都设有杯架。\n\n现有 $N$ 位顾客坐满这 $N$ 个座位，求最多有多少人能够使用杯座。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个字符 $\\texttt{S/L}$，分别表示普通座位和爱心座位。", "outputFormat": "输出能够使用杯座人数的最大值。", "hint": "**【样例 3 解释】**\n\n若用 $\\texttt *$ 来表示杯座，那么座位情况如下：\n\n$\\texttt{* S * L L * L L * S * S * L L *}$\n\n**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le N \\le 50$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 1 KINO_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2011/2012 #4] KINO", "background": "", "description": "电影院的每排有 $N$ 个座位。座位分为普通座位（$\\texttt S$）和爱心座位（$\\texttt L$）。其中，爱心座位总是两两出现。\n\n每排座位的相邻两个座位之间都设有一个杯架（除了两个爱心座位之间外）。特别地，一排座位的两侧也都设有杯架。\n\n现有 $N$ 位顾客坐满这 $N$ 个座位，求最多有多少人能够使用杯座。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个字符 $\\texttt{S/L}$，分别表示普通座位和爱心座位。", "outputFormat": "输出能够使用杯座人数的最大值。", "hint": "**【样例 3 解释】**\n\n若用 $\\texttt *$ 来表示杯座，那么座位情况如下：\n\n$\\texttt{* S * L L * L L * S * S * L L *}$\n\n**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$1 \\le N \\le 50$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 1 KINO_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN"}}}
{"pid": "P8081", "type": "P", "difficulty": 3, "samples": [["8\n1 -1 4 3 8 -2 3 -3", "6"], ["15\n1 2 -1 2 3 4 5 6 1 4 8 3 -1 -2 1", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2011", "COCI（克罗地亚）"], "title": "[COCI 2011/2012 #4] ZIMA", "background": "", "description": "给定 $N$ 天的气温情况。规定：\n\n- 当一天的温度小于 $0$ 时，则称之为冰冻日。\n- 当连续 $T$ 天都是冰冻日时，则称之为一个持续时间为 $T$ 的冰期。\n\n冰期来临之前的若干天都会被标为警示状态。若一个冰期的持续时间为 $T$ 天，则规定：\n\n- 若一段冰期不是所有冰期中最长的，那么冰期来临之前的 $2T$ 天都被标记为警示状态。\n- 若一段冰期是所有冰期中最长的，那么冰期来临之前的 $3T$ 天都被标记为警示状态。特别地，如果有多个最长的冰期，则只有一个被标记 $3T$ 天，其它的都为 $2T$ 天。\n- 若当前正处于冰期，则不允许对当前冰期进行警示，但若条件允许，可以对未来的冰期进行警示。\n\n你可以任意选择一个最长的冰期使得其来临之前需要被标记 $3T$ 天。求在所有选择的情况中，处于警示状态天数的最大值。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个整数 $T_i$，表示这 $N$ 天的温度。", "outputFormat": "输出处于警示状态天数的最大值。", "hint": "**【样例 1 解释】**\n\n长度最长的冰期有 $3$ 个：$\\texttt{-1; -2; -3}$。\n\n当选择 $\\texttt{-2}$ 作为需要在来临之前标记 $3T$ 天为警示状态的冰期时，处于警示状态的天数最大：\n\n|天数|$1$|$2$|$3$|$4$|$5$|$6$|$7$|$8$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|温度|$1$|$-1$|$4$|$3$|$8$|$-2$|$3$|$-3$|\n|是否为冰期|否|是|否|否|否|是|否|是|\n|是否处于警示状态|是|否|是|是|是|是|是|否|\n\n**【数据规模与约定】**\n\n- 对于 $40\\%$ 的数据，最长的冰期唯一。\n- 对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$|T_i| \\le 100$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 2 ZIMA_。**\n\n**本题分值按 COCI 原题设置，满分 $100$。由于洛谷不支持非整数分数，因此对于除不尽的情况进行了调整。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2011/2012 #4] ZIMA", "background": "", "description": "给定 $N$ 天的气温情况。规定：\n\n- 当一天的温度小于 $0$ 时，则称之为冰冻日。\n- 当连续 $T$ 天都是冰冻日时，则称之为一个持续时间为 $T$ 的冰期。\n\n冰期来临之前的若干天都会被标为警示状态。若一个冰期的持续时间为 $T$ 天，则规定：\n\n- 若一段冰期不是所有冰期中最长的，那么冰期来临之前的 $2T$ 天都被标记为警示状态。\n- 若一段冰期是所有冰期中最长的，那么冰期来临之前的 $3T$ 天都被标记为警示状态。特别地，如果有多个最长的冰期，则只有一个被标记 $3T$ 天，其它的都为 $2T$ 天。\n- 若当前正处于冰期，则不允许对当前冰期进行警示，但若条件允许，可以对未来的冰期进行警示。\n\n你可以任意选择一个最长的冰期使得其来临之前需要被标记 $3T$ 天。求在所有选择的情况中，处于警示状态天数的最大值。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，$N$ 个整数 $T_i$，表示这 $N$ 天的温度。", "outputFormat": "输出处于警示状态天数的最大值。", "hint": "**【样例 1 解释】**\n\n长度最长的冰期有 $3$ 个：$\\texttt{-1; -2; -3}$。\n\n当选择 $\\texttt{-2}$ 作为需要在来临之前标记 $3T$ 天为警示状态的冰期时，处于警示状态的天数最大：\n\n|天数|$1$|$2$|$3$|$4$|$5$|$6$|$7$|$8$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|温度|$1$|$-1$|$4$|$3$|$8$|$-2$|$3$|$-3$|\n|是否为冰期|否|是|否|否|否|是|否|是|\n|是否处于警示状态|是|否|是|是|是|是|是|否|\n\n**【数据规模与约定】**\n\n- 对于 $40\\%$ 的数据，最长的冰期唯一。\n- 对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$|T_i| \\le 100$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 2 ZIMA_。**\n\n**本题分值按 COCI 原题设置，满分 $100$。由于洛谷不支持非整数分数，因此对于除不尽的情况进行了调整。**", "locale": "zh-CN"}}}
{"pid": "P8082", "type": "P", "difficulty": 3, "samples": [["4 2\n1924", "94"], ["7 3\n1231234", "3234"], ["10 4\n4177252841", "775841"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2011", "栈", "COCI（克罗地亚）", "单调栈"], "title": "[COCI 2011/2012 #4] KEKS", "background": "", "description": "给定正整数 $N,K$ 和一个 $N$ 位数，求在 $N$ 位数中删除 $K$ 位后剩下的数的最大值。", "inputFormat": "第一行，两个整数 $N,K$。\n\n第二行，一个 $N$ 位整数。保证没有前导 $0$。", "outputFormat": "输出剩下的数的最大值。", "hint": "**【数据规模与约定】**\n\n- 对于 $50\\%$ 的数据，$N \\le 1000$。\n- 对于 $100\\%$ 的数据，$1 \\le K \\lt N \\le 5 \\times 10^5$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 3 KEKS_。**\n\n**本题分值按 COCI 原题设置，满分 $100$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2011/2012 #4] KEKS", "background": "", "description": "给定正整数 $N,K$ 和一个 $N$ 位数，求在 $N$ 位数中删除 $K$ 位后剩下的数的最大值。", "inputFormat": "第一行，两个整数 $N,K$。\n\n第二行，一个 $N$ 位整数。保证没有前导 $0$。", "outputFormat": "输出剩下的数的最大值。", "hint": "**【数据规模与约定】**\n\n- 对于 $50\\%$ 的数据，$N \\le 1000$。\n- 对于 $100\\%$ 的数据，$1 \\le K \\lt N \\le 5 \\times 10^5$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 3 KEKS_。**\n\n**本题分值按 COCI 原题设置，满分 $100$。**", "locale": "zh-CN"}}}
{"pid": "P8083", "type": "P", "difficulty": 5, "samples": [["4\n5 7 4 9\n1 2 3 4", "7\n2 4 1 3"], ["10\n9 5 1 2 6 7 4 18 20 12\n10 40 20 30 50 70 80 100 1000 500", "3010\n100 80 10 40 50 1000 20 70 500 30"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2011", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2011/2012 #4] OGRADA", "background": "", "description": "给定两个元素个数为 $N$ 的数组 $A,B$。\n\n规定一个数组的权值为该数组中所有相邻元素的大小差的绝对值之和。现可将 $B$ 数组变成其任意的一个排列 $B'$，使得对 $\\forall i \\in [1,N) \\cap \\Z$ 满足：\n\n- 若 $A_i \\lt A_{i+1}$，则 $B'_i \\lt B'_{i+1}$。\n- 若 $A_i \\gt A_{i+1}$，则 $B'_i \\gt B'_{i+1}$。\n\n求在所有方案中权值最大的排列 $B'$ 及最大权值。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个正整数 $A_i$。\n\n第三行，$N$ 个正整数 $B_i$。", "outputFormat": "第一行，一个正整数表示最大权值。\n\n第二行，$N$ 个用空格分开的正整数，表示 $B'$ 中的元素。如果有多种符合题意的 $B'$，请输出任意一种。", "hint": "**【样例 1 解释】**\n\n合法的数组 $B'$ 有：\n\n- $\\{1,3,2,4\\}$，权值为 $2+1+2=5$\n- $\\{1,4,2,3\\}$，权值为 $3+2+1=6$\n- $\\{2,3,1,4\\}$，权值为 $1+2+3=6$\n- $\\bf \\{2,4,1,3\\}$ **，权值为** $\\bf2+3+2=7$\n- $\\{3,4,1,2\\}$，权值为 $1+3+1=5$\n\n**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$2 \\le N \\le 3 \\times 10^5$，$1 \\le A_i,B_i \\lt 10^9$。\n\n**【提示与说明】**\n\n如果只答对第一行而第二行错误或为空，则可以获得对应测试点 $50\\%$ 的分数。\n\n欢迎通过私信或发帖对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/xuyueqnf) 进行 hack。\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 4 OGRADA_。**\n\n**本题分值按 COCI 原题设置，满分 $120$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2011/2012 #4] OGRADA", "background": "", "description": "给定两个元素个数为 $N$ 的数组 $A,B$。\n\n规定一个数组的权值为该数组中所有相邻元素的大小差的绝对值之和。现可将 $B$ 数组变成其任意的一个排列 $B'$，使得对 $\\forall i \\in [1,N) \\cap \\Z$ 满足：\n\n- 若 $A_i \\lt A_{i+1}$，则 $B'_i \\lt B'_{i+1}$。\n- 若 $A_i \\gt A_{i+1}$，则 $B'_i \\gt B'_{i+1}$。\n\n求在所有方案中权值最大的排列 $B'$ 及最大权值。", "inputFormat": "第一行，一个整数 $N$。\n\n第二行，$N$ 个正整数 $A_i$。\n\n第三行，$N$ 个正整数 $B_i$。", "outputFormat": "第一行，一个正整数表示最大权值。\n\n第二行，$N$ 个用空格分开的正整数，表示 $B'$ 中的元素。如果有多种符合题意的 $B'$，请输出任意一种。", "hint": "**【样例 1 解释】**\n\n合法的数组 $B'$ 有：\n\n- $\\{1,3,2,4\\}$，权值为 $2+1+2=5$\n- $\\{1,4,2,3\\}$，权值为 $3+2+1=6$\n- $\\{2,3,1,4\\}$，权值为 $1+2+3=6$\n- $\\bf \\{2,4,1,3\\}$ **，权值为** $\\bf2+3+2=7$\n- $\\{3,4,1,2\\}$，权值为 $1+3+1=5$\n\n**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，$2 \\le N \\le 3 \\times 10^5$，$1 \\le A_i,B_i \\lt 10^9$。\n\n**【提示与说明】**\n\n如果只答对第一行而第二行错误或为空，则可以获得对应测试点 $50\\%$ 的分数。\n\n欢迎通过私信或发帖对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/xuyueqnf) 进行 hack。\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 4 OGRADA_。**\n\n**本题分值按 COCI 原题设置，满分 $120$。**", "locale": "zh-CN"}}}
{"pid": "P8084", "type": "P", "difficulty": 5, "samples": [["1 2", "2"], ["2 3", "9"], ["1000 1000003", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2011", "COCI（克罗地亚）"], "title": "[COCI 2011/2012 #4] BROJ", "background": "", "description": "求最小质因数为 $P$ 的不超过 $10^9$ 的第 $N$ 小正整数。", "inputFormat": "第一行，两个整数 $N,P$。保证 $P$ 为质数。", "outputFormat": "输出所求的不超过 $10^9$ 的第 $N$ 小正整数。如果答案超过 $10^9$，则输出 $0$。", "hint": "**【数据规模与约定】**\n\n- 对于 $30\\%$ 的数据，输出小于 $10^5$（含 $0$）。\n- 对于另外 $30\\%$ 的数据，$P \\gt 1000$。\n- 对于 $100\\%$ 的数据，$1 \\le N,P \\le 10^9$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 5 BROJ_。**\n\n**本题分值按 COCI 原题设置，满分 $140$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2011/2012 #4] BROJ", "background": "", "description": "求最小质因数为 $P$ 的不超过 $10^9$ 的第 $N$ 小正整数。", "inputFormat": "第一行，两个整数 $N,P$。保证 $P$ 为质数。", "outputFormat": "输出所求的不超过 $10^9$ 的第 $N$ 小正整数。如果答案超过 $10^9$，则输出 $0$。", "hint": "**【数据规模与约定】**\n\n- 对于 $30\\%$ 的数据，输出小于 $10^5$（含 $0$）。\n- 对于另外 $30\\%$ 的数据，$P \\gt 1000$。\n- 对于 $100\\%$ 的数据，$1 \\le N,P \\le 10^9$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 5 BROJ_。**\n\n**本题分值按 COCI 原题设置，满分 $140$。**", "locale": "zh-CN"}}}
{"pid": "P8085", "type": "P", "difficulty": 4, "samples": [["a a a b c d a b c $\nx y $", "3"], ["xyz abc abc xyz $\nabc abc $", "2"], ["a b c x c z z a b c $\nprvi dr prvi tr tr x $", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2011", "哈希 hashing", "COCI（克罗地亚）"], "title": "[COCI 2011/2012 #4] KRIPTOGRAM", "background": "", "description": "现有一段明文和一部分密文。明文和密文都由英文单词组成，且密文中的一个单词必然对应着明文中的一个单词。\n\n求给出的密文在明文中可能出现的最早位置。", "inputFormat": "第一行，若干个英文单词和一个 \\$，表示明文。\n\n第二行，若干个英文单词和一个 \\$，表示密文。\n\n每行末尾的 \\$ 用于表示该行结束。数据保证没有多个 \\$ 出现在同一行的情况。", "outputFormat": "输出密文在明文中可能出现的最早位置，即密文的第一个单词在明文中可能出现的最早位置。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，明文和密文所对应字符串的长度不超过 $10^6$，输入的单词均由小写字母组成。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 6 KRIPTOGRAM_。**\n\n**本题分值按 COCI 原题设置，满分 $140$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2011/2012 #4] KRIPTOGRAM", "background": "", "description": "现有一段明文和一部分密文。明文和密文都由英文单词组成，且密文中的一个单词必然对应着明文中的一个单词。\n\n求给出的密文在明文中可能出现的最早位置。", "inputFormat": "第一行，若干个英文单词和一个 \\$，表示明文。\n\n第二行，若干个英文单词和一个 \\$，表示密文。\n\n每行末尾的 \\$ 用于表示该行结束。数据保证没有多个 \\$ 出现在同一行的情况。", "outputFormat": "输出密文在明文中可能出现的最早位置，即密文的第一个单词在明文中可能出现的最早位置。", "hint": "**【数据规模与约定】**\n\n- 对于 $100\\%$ 的数据，明文和密文所对应字符串的长度不超过 $10^6$，输入的单词均由小写字母组成。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 6 KRIPTOGRAM_。**\n\n**本题分值按 COCI 原题设置，满分 $140$。**", "locale": "zh-CN"}}}
{"pid": "P8086", "type": "P", "difficulty": 1, "samples": [["5\n1 114514\n2 1\n2 1919180\n1 10\n3 2", "2033696"], ["见附件", "见附件"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2022", "O2优化", "枚举", "洛谷月赛"], "title": "『JROI-5』Music", "background": "**请注意到并不正常的时间限制**。\n\n**本题读入量较大，建议使用较快的读入方式。**\n\n小 C 每年都要给丁总氪钱。", "description": "\n\n小 C 喜欢在网易云听歌，她希望你能帮助她计算一下她的网易云的听歌时间。\n\n小 C 有 $n$ 条听歌记录，每条形如 `x t`，表示小 C 听了编号为 $x$ 的音乐 $t$ 分钟。听歌时间为所有有效记录的 $t$ 的总和。\n\n首先，如果某条记录的 $t\\leq1$，那么这条记录是无效的。\n\n其次对于某一首歌，只有**第一条有效记录会被计算**，之后重复听这首歌的记录将不会被累计到听歌时间中。\n", "inputFormat": "第一行一个正整数 $n$，同题意。\n\n接下来 $n$ 行每行两个正整数 $x, t$，表示一条听歌记录。\n", "outputFormat": "一行一个整数，表示听歌时间。", "hint": "【样例解释】\n\n第一条记录：`1 114514` ，有效记录，可以累计。\n\n第二条记录：`2 1` ，$t\\leq1$，无效记录。\n\n第三条记录：`2 1919180` ，有效记录，可以累计。\n\n第四条记录：`1 10` ，编号为 $1$ 的音乐在第一条记录已经累计，本条记录有效，但不能累计。\n\n第五条记录：`3 2` ，有效记录，可以累计。\n\n答案即为 $114514+1919180+2=2033696$。\n\n___\n\n对于 $40\\%$ 的数据，保证 $1\\leq x\\leq n\\leq 10^4$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^7,1\\leq x,t_i\\leq 10^7$。\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-5』Music", "background": "**请注意到并不正常的时间限制**。\n\n**本题读入量较大，建议使用较快的读入方式。**\n\n小 C 每年都要给丁总氪钱。", "description": "\n\n小 C 喜欢在网易云听歌，她希望你能帮助她计算一下她的网易云的听歌时间。\n\n小 C 有 $n$ 条听歌记录，每条形如 `x t`，表示小 C 听了编号为 $x$ 的音乐 $t$ 分钟。听歌时间为所有有效记录的 $t$ 的总和。\n\n首先，如果某条记录的 $t\\leq1$，那么这条记录是无效的。\n\n其次对于某一首歌，只有**第一条有效记录会被计算**，之后重复听这首歌的记录将不会被累计到听歌时间中。\n", "inputFormat": "第一行一个正整数 $n$，同题意。\n\n接下来 $n$ 行每行两个正整数 $x, t$，表示一条听歌记录。\n", "outputFormat": "一行一个整数，表示听歌时间。", "hint": "【样例解释】\n\n第一条记录：`1 114514` ，有效记录，可以累计。\n\n第二条记录：`2 1` ，$t\\leq1$，无效记录。\n\n第三条记录：`2 1919180` ，有效记录，可以累计。\n\n第四条记录：`1 10` ，编号为 $1$ 的音乐在第一条记录已经累计，本条记录有效，但不能累计。\n\n第五条记录：`3 2` ，有效记录，可以累计。\n\n答案即为 $114514+1919180+2=2033696$。\n\n___\n\n对于 $40\\%$ 的数据，保证 $1\\leq x\\leq n\\leq 10^4$。\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^7,1\\leq x,t_i\\leq 10^7$。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P8087", "type": "P", "difficulty": 4, "samples": [["5\n2 3 1 5 4\n2 2 3 4 5", "3"], ["5\n2 3 1 5 4\n1 2 2 4 5", "1"], ["5\n1 3 4 2 5\n6 7 8 9 10", "0"], ["见附件", "见附件"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2022", "O2优化", "枚举", "洛谷月赛"], "title": "『JROI-5』Interval", "background": "小 C 喜欢带有区间操作的数据结构，因为这样的题总会有一档好写的 $\\mathcal{O}\\left(n^2\\right)$ 部分分。", "description": "\n**本题读入量较大，建议使用较快的读入方式，可以参考 [赛时公告板](https://www.luogu.com.cn/paste/lueudpd5)**\n\n小 C 有一个长度为 $n$ 的序列 $a$，第 $i$ 项为 $a_i$。\n\n$a$ 是一个 $1\\sim n$ 的排列（即 $1\\sim n$ 在 $a$ 中各出现一次）。\n\n定义 $\\operatorname{Mex}_{l,r}$ 为 $\\{a_l,a_{l+1},\n\\cdots,a_{r-1},a_r\\}$ 中**没有出现过的最小正整数**。\n\n例如，$\\operatorname{Mex}\\{2,3\\}=1,\\operatorname{Mex}\\{1,2,3\\}=4$。\n\n小 C 还有一个长度为 $n$ 的数列 $f$。\n\n定义一个区间 $\\left[l,r\\right]$ 是合法的当且仅当 \n$$f_{r-l+1}< \\operatorname{Mex}_{l,r}$$\n\n小 C 希望你告诉他，最短的合法区间的长度是多少，特别的，如果没有区间合法，则输出 `0`。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$。\n\n第三行 $n$ 个正整数 $f_1,f_2,\\cdots,f_n$。\n\n\n", "outputFormat": "一行一个整数，表示最短的合法区间长度。", "hint": "【样例解释】\n\n对于 #1，容易发现 $\\left[1,3\\right]$ 是最短的合法区间。\n\n对于 #2，容易发现 $\\left[3,3\\right]$ 是最短的合法区间。\n\n对于 #3，容易发现没有合法的区间。\n\n---\n\n对于 $10\\%$ 的数据，满足 $1\\leq n\\leq 100$。\n\n对于 $20\\%$ 的数据，满足 $1\\leq n\\leq 1000$。\n\n对于另外 $10\\%$ 的数据，满足 $f$ 不升，即满足 $f_1\\geq f_2\\geq\\cdots\\geq f_n$，且 $1\\leq n\\leq 10^6$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n\\leq 4\\times 10^6,1\\leq f_i\\leq 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-5』Interval", "background": "小 C 喜欢带有区间操作的数据结构，因为这样的题总会有一档好写的 $\\mathcal{O}\\left(n^2\\right)$ 部分分。", "description": "\n**本题读入量较大，建议使用较快的读入方式，可以参考 [赛时公告板](https://www.luogu.com.cn/paste/lueudpd5)**\n\n小 C 有一个长度为 $n$ 的序列 $a$，第 $i$ 项为 $a_i$。\n\n$a$ 是一个 $1\\sim n$ 的排列（即 $1\\sim n$ 在 $a$ 中各出现一次）。\n\n定义 $\\operatorname{Mex}_{l,r}$ 为 $\\{a_l,a_{l+1},\n\\cdots,a_{r-1},a_r\\}$ 中**没有出现过的最小正整数**。\n\n例如，$\\operatorname{Mex}\\{2,3\\}=1,\\operatorname{Mex}\\{1,2,3\\}=4$。\n\n小 C 还有一个长度为 $n$ 的数列 $f$。\n\n定义一个区间 $\\left[l,r\\right]$ 是合法的当且仅当 \n$$f_{r-l+1}< \\operatorname{Mex}_{l,r}$$\n\n小 C 希望你告诉他，最短的合法区间的长度是多少，特别的，如果没有区间合法，则输出 `0`。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$。\n\n第三行 $n$ 个正整数 $f_1,f_2,\\cdots,f_n$。\n\n\n", "outputFormat": "一行一个整数，表示最短的合法区间长度。", "hint": "【样例解释】\n\n对于 #1，容易发现 $\\left[1,3\\right]$ 是最短的合法区间。\n\n对于 #2，容易发现 $\\left[3,3\\right]$ 是最短的合法区间。\n\n对于 #3，容易发现没有合法的区间。\n\n---\n\n对于 $10\\%$ 的数据，满足 $1\\leq n\\leq 100$。\n\n对于 $20\\%$ 的数据，满足 $1\\leq n\\leq 1000$。\n\n对于另外 $10\\%$ 的数据，满足 $f$ 不升，即满足 $f_1\\geq f_2\\geq\\cdots\\geq f_n$，且 $1\\leq n\\leq 10^6$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n\\leq 4\\times 10^6,1\\leq f_i\\leq 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P8088", "type": "P", "difficulty": 4, "samples": [["5 5\n1 2 3 4 5\n6 7 8 9 10\n1 2 3 4 5\n1 2 3 4 5\n1 2 3 4 5\n2 1", "8"], ["5 5\n1 2 3 4 5\n6 7 8 9 10\n1 2 3 4 5\n1 2 3 4 5\n1 2 3 4 5\n2 2", "7"], ["见附件", "见附件"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "二分", "2022", "O2优化", "排序", "洛谷月赛"], "title": "『JROI-5』Autumn", "background": "感谢 @[王熙文](/user/353688) 提供了一种优于标算的做法。", "description": "**本题读入量较大，建议使用较快的读入方式，可以参考 [赛时公告板](https://www.luogu.com.cn/paste/lueudpd5)**\n\n\n给定 $n$ 个数列，每个数列有 $m$ 个元素，第 $i$ 个数列第 $j$ 个元素为正整数 $a_{i,j}$。\n\n你每次可以选择 $i_1,j_1$ 和 $i_2,j_2$，交换 $a_{i_1,j_1}$ 和 $a_{i_2,j_2}$。你至多可以进行 $x$ 次交换。\n\n定义 $d_i$ 为第 $i$ 个数列中第 $k$ 大的元素。\n\n请最小化 $\\max\\limits_{i=1}^n \\{d_i\\}$。（表示 $d_1,d_2,\\cdots,d_n$ 中的最大值）", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n$ 行每行 $m$ 个正整数，表示数列。\n\n最后一行两个正整数 $k,x$。", "outputFormat": "一行一个数，输出最小化的 $\\max\\limits_{i=1}^n \\{d_i\\}$。", "hint": "对于样例 1，将 $a_{2,5}$ 和 $a_{1,5}$ 交换，可以证明，没有更优策略。\n***\n对于 $30\\%$ 的数据，$x = 10^6,1\\leq k\\leq m$。\n\n对于另外 $10\\%$ 的数据，**所有的数都相等**。\n\n对于另外 $30\\%$ 的数据，$1\\leq n,m\\leq 2\\times 10^3,1\\leq k\\leq m,a_{i,j}\\leq 10^6,0\\leq x\\leq n\\times m$。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 2\\times 10^3,1\\leq k\\leq m,1\\leq a_{i,j}\\leq 10^{18},0\\leq x\\leq n\\times m$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-5』Autumn", "background": "感谢 @[王熙文](/user/353688) 提供了一种优于标算的做法。", "description": "**本题读入量较大，建议使用较快的读入方式，可以参考 [赛时公告板](https://www.luogu.com.cn/paste/lueudpd5)**\n\n\n给定 $n$ 个数列，每个数列有 $m$ 个元素，第 $i$ 个数列第 $j$ 个元素为正整数 $a_{i,j}$。\n\n你每次可以选择 $i_1,j_1$ 和 $i_2,j_2$，交换 $a_{i_1,j_1}$ 和 $a_{i_2,j_2}$。你至多可以进行 $x$ 次交换。\n\n定义 $d_i$ 为第 $i$ 个数列中第 $k$ 大的元素。\n\n请最小化 $\\max\\limits_{i=1}^n \\{d_i\\}$。（表示 $d_1,d_2,\\cdots,d_n$ 中的最大值）", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n$ 行每行 $m$ 个正整数，表示数列。\n\n最后一行两个正整数 $k,x$。", "outputFormat": "一行一个数，输出最小化的 $\\max\\limits_{i=1}^n \\{d_i\\}$。", "hint": "对于样例 1，将 $a_{2,5}$ 和 $a_{1,5}$ 交换，可以证明，没有更优策略。\n***\n对于 $30\\%$ 的数据，$x = 10^6,1\\leq k\\leq m$。\n\n对于另外 $10\\%$ 的数据，**所有的数都相等**。\n\n对于另外 $30\\%$ 的数据，$1\\leq n,m\\leq 2\\times 10^3,1\\leq k\\leq m,a_{i,j}\\leq 10^6,0\\leq x\\leq n\\times m$。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 2\\times 10^3,1\\leq k\\leq m,1\\leq a_{i,j}\\leq 10^{18},0\\leq x\\leq n\\times m$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8089", "type": "P", "difficulty": 5, "samples": [["1\n2\n10", "4"], ["1\n3\n100", "25"], ["1\n3\n010", "10"], ["见附件", "见附件"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2022", "O2优化", "树形 DP", "洛谷月赛"], "title": "『JROI-5』Color", "background": "【被三月删除的图片】\n\n泷泽三月 Orz\n\n---\n被删除图片会偷偷展示给报名讲评的同学（", "description": "**请注意到并不正常的时间限制。**\n\n小 C 有一棵 $dep$ 层 $n$ 个节点的**完全二叉树**，她希望选择其中一个**包含根节点**的**连通块**染色，她想知道有几种不同的染色方案，答案对 $998,244,353$ 取模。", "inputFormat": "多测，第一行一个整数 $T$，表示测试组数。\n\n**对于每组数据**\n\n第一行一个整数 $dep$，同题意。\n\n第二行一个整数 $s$，表示最底层叶子结点数目，特别的，他们将用二进制表示，你将读入一个 $dep$ 位 $\\texttt{01}$ 串，用以表示 $s$，若转换为二进制后不足 $dep$ 位则用前缀 $0$ 补充。\n\n\n**保证数据合法。**", "outputFormat": "对于每组数据，一行一个整数，表示合法的染色方案的个数，需要**换行**。", "hint": "你可以通过学习 [OI-Wiki 树基础](https://oi-wiki.org/graph/tree-basic/) 来了解题面中的名词。\n\n【样例解释】\n\n对于样例 #1，可以画出如下所示二叉树。\n\n![7sc6Yj.png](https://s4.ax1x.com/2022/01/19/7sc6Yj.png)\n\n我们对该二叉树按照**前序遍历标号**（如图），得到点集 $\\left(1,2,3\\right)$。\n\n则仅有 $\\left(1,2,3\\right),\\left(1,2\\right),\\left(1,3\\right),\\left(1\\right)$ 是合法的染色方案。\n****\n对于样例 #3，可以画出如下所示二叉树。\n\n![7sc1eO.png](https://s4.ax1x.com/2022/01/19/7sc1eO.png)\n\n我们对该二叉树按照**前序遍历标号**（如图），得到点集 $\\left(1,2,3,4,5\\right)$。\n\n则仅有 $\\left(1,2,3,4,5\\right),\\left(1,2,3,4\\right),\\left(1,2,3\\right),\\left(1,2,4\\right),\\left(1,2\\right),\\left(1,2,3,5\\right),\\left(1,2,4,5\\right),\\left(1,2,5\\right),\\left(1,5\\right),\\left(1\\right)$ 是合法的染色方案。\n\n显然 $\\left(2,3,4\\right),\\left(1,3,4\\right)$ 不是合法的染色方案，前者没有包含根节点，后者染色的点集不是联通的。\n***\n对于 $30\\%$ 的数据，$1\\leq T\\leq 10, 1\\leq dep \\leq 20$。\n\n对于另外 $20\\%$ 的数据，树是满二叉树（即完美二叉树，perfect binary tree）。\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 10, 1\\leq dep \\leq 10^6$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-5』Color", "background": "【被三月删除的图片】\n\n泷泽三月 Orz\n\n---\n被删除图片会偷偷展示给报名讲评的同学（", "description": "**请注意到并不正常的时间限制。**\n\n小 C 有一棵 $dep$ 层 $n$ 个节点的**完全二叉树**，她希望选择其中一个**包含根节点**的**连通块**染色，她想知道有几种不同的染色方案，答案对 $998,244,353$ 取模。", "inputFormat": "多测，第一行一个整数 $T$，表示测试组数。\n\n**对于每组数据**\n\n第一行一个整数 $dep$，同题意。\n\n第二行一个整数 $s$，表示最底层叶子结点数目，特别的，他们将用二进制表示，你将读入一个 $dep$ 位 $\\texttt{01}$ 串，用以表示 $s$，若转换为二进制后不足 $dep$ 位则用前缀 $0$ 补充。\n\n\n**保证数据合法。**", "outputFormat": "对于每组数据，一行一个整数，表示合法的染色方案的个数，需要**换行**。", "hint": "你可以通过学习 [OI-Wiki 树基础](https://oi-wiki.org/graph/tree-basic/) 来了解题面中的名词。\n\n【样例解释】\n\n对于样例 #1，可以画出如下所示二叉树。\n\n![7sc6Yj.png](https://s4.ax1x.com/2022/01/19/7sc6Yj.png)\n\n我们对该二叉树按照**前序遍历标号**（如图），得到点集 $\\left(1,2,3\\right)$。\n\n则仅有 $\\left(1,2,3\\right),\\left(1,2\\right),\\left(1,3\\right),\\left(1\\right)$ 是合法的染色方案。\n****\n对于样例 #3，可以画出如下所示二叉树。\n\n![7sc1eO.png](https://s4.ax1x.com/2022/01/19/7sc1eO.png)\n\n我们对该二叉树按照**前序遍历标号**（如图），得到点集 $\\left(1,2,3,4,5\\right)$。\n\n则仅有 $\\left(1,2,3,4,5\\right),\\left(1,2,3,4\\right),\\left(1,2,3\\right),\\left(1,2,4\\right),\\left(1,2\\right),\\left(1,2,3,5\\right),\\left(1,2,4,5\\right),\\left(1,2,5\\right),\\left(1,5\\right),\\left(1\\right)$ 是合法的染色方案。\n\n显然 $\\left(2,3,4\\right),\\left(1,3,4\\right)$ 不是合法的染色方案，前者没有包含根节点，后者染色的点集不是联通的。\n***\n对于 $30\\%$ 的数据，$1\\leq T\\leq 10, 1\\leq dep \\leq 20$。\n\n对于另外 $20\\%$ 的数据，树是满二叉树（即完美二叉树，perfect binary tree）。\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 10, 1\\leq dep \\leq 10^6$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8090", "type": "P", "difficulty": 1, "samples": [["COW\nSAY\nMOO\nWIN\nTHE\nIOI", "1\n1\n"], ["AAA\nBBB\nCCC\nAYY\nAAA\nZZZ", "1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2022"], "title": "[USACO22JAN] Herdle B", "background": "", "description": "奶牛们发明了一种名为 Herdle 的新型解谜游戏，在牛界引起了轰动。\n\n每天都会有一个新谜题发布供奶牛解决。游戏采用 $3\\times 3$ 方阵的形式表示农场的一块田地，田地的每个方格都由特定品种的奶牛占据。总共只有 $26$ 种可能的品种，每一种由 $\\text{A}$ 到 $\\text{Z}$ 中的不同大写字母标识。玩家不会被告知田地中的奶牛品种排列方式——游戏目标是通过一系列猜测确定它们。\n\n每次猜测，奶牛们输入一个 $3\\times 3$ 的大写字母方阵，表示该田地可以用奶牛填充的可能方式。猜测的某些方格可能是正确的。这些方格以绿色高亮显示，让奶牛们知道这些是正确的。猜测的另一些方格可能填入了品种正确但位置错误的奶牛。这些以黄色高亮显示。\n\n黄色高亮显示的方格的数量可以帮助指示某个品种的奶牛数量。 例如，假设猜测方阵包含 $4$ 头品种 $\\text{A}$ 的奶牛，而答案方阵包含 $2$ 只品种 $\\text{A}$ 的奶牛，其中没有正确位置上的 $\\text{A}$ （即，它们都不应该是绿色的）。 在这种情况下，猜测方阵中只有两个 $\\text{A}$ 应以黄色高亮显示。 更准确地说，如果猜测方阵中有 $x$ 个特定品种的奶牛，并且 答案方阵中有 $y \\le x$ 头该品种奶牛（不包括位置正确而得到绿色高亮显示的奶牛），那么猜测方阵的 $x$ 头奶牛中只有 $y$ 头奶牛应该以黄色高亮显示。\n\n给定正确答案的方阵和一个表示对该答案的猜测的方阵，请计算绿色和黄色高亮显示的方格的数量。", "inputFormat": "输入的前 3 行给定了正确答案的方阵。以下 3 行表示对该答案的猜测。", "outputFormat": "输出两行。输出的第一行包含应当以绿色高亮显示的方格的数量。输出的第二行包含应当以黄色高亮显示的方格的数量。\n", "hint": "【样例解释 1】\n\n在这个例子中，最后一行中间的 O 是正确的，所以这个方格以绿色高亮显示。字母 W 位于错误的位置，所以它以黄色高亮显示。\n\n【样例解释 2】\n\n在这里，其中一个 A 位于正确的位置，所以它以绿色高亮显示。余下的 A 均不在正确位置上，由于答案方阵中有两个 A，所以有两个 A 应当以黄色高亮显示。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Herdle B", "background": "", "description": "奶牛们发明了一种名为 Herdle 的新型解谜游戏，在牛界引起了轰动。\n\n每天都会有一个新谜题发布供奶牛解决。游戏采用 $3\\times 3$ 方阵的形式表示农场的一块田地，田地的每个方格都由特定品种的奶牛占据。总共只有 $26$ 种可能的品种，每一种由 $\\text{A}$ 到 $\\text{Z}$ 中的不同大写字母标识。玩家不会被告知田地中的奶牛品种排列方式——游戏目标是通过一系列猜测确定它们。\n\n每次猜测，奶牛们输入一个 $3\\times 3$ 的大写字母方阵，表示该田地可以用奶牛填充的可能方式。猜测的某些方格可能是正确的。这些方格以绿色高亮显示，让奶牛们知道这些是正确的。猜测的另一些方格可能填入了品种正确但位置错误的奶牛。这些以黄色高亮显示。\n\n黄色高亮显示的方格的数量可以帮助指示某个品种的奶牛数量。 例如，假设猜测方阵包含 $4$ 头品种 $\\text{A}$ 的奶牛，而答案方阵包含 $2$ 只品种 $\\text{A}$ 的奶牛，其中没有正确位置上的 $\\text{A}$ （即，它们都不应该是绿色的）。 在这种情况下，猜测方阵中只有两个 $\\text{A}$ 应以黄色高亮显示。 更准确地说，如果猜测方阵中有 $x$ 个特定品种的奶牛，并且 答案方阵中有 $y \\le x$ 头该品种奶牛（不包括位置正确而得到绿色高亮显示的奶牛），那么猜测方阵的 $x$ 头奶牛中只有 $y$ 头奶牛应该以黄色高亮显示。\n\n给定正确答案的方阵和一个表示对该答案的猜测的方阵，请计算绿色和黄色高亮显示的方格的数量。", "inputFormat": "输入的前 3 行给定了正确答案的方阵。以下 3 行表示对该答案的猜测。", "outputFormat": "输出两行。输出的第一行包含应当以绿色高亮显示的方格的数量。输出的第二行包含应当以黄色高亮显示的方格的数量。\n", "hint": "【样例解释 1】\n\n在这个例子中，最后一行中间的 O 是正确的，所以这个方格以绿色高亮显示。字母 W 位于错误的位置，所以它以黄色高亮显示。\n\n【样例解释 2】\n\n在这里，其中一个 A 位于正确的位置，所以它以绿色高亮显示。余下的 A 均不在正确位置上，由于答案方阵中有两个 A，所以有两个 A 应当以黄色高亮显示。\n\n", "locale": "zh-CN"}}}
{"pid": "P8091", "type": "P", "difficulty": 2, "samples": [["3\n4 5 6 7 2 4 5 10\n2 2 2 2 1 1 1 1\n1 1 1 1 2 2 2 2", "yes\nno\nno"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2022", "枚举"], "title": "[USACO22JAN] Non-Transitive Dice B", "background": "", "description": "为了消磨牛棚里的时光，奶牛们喜欢玩简单的骰子游戏。其中一种游戏使用两个骰子 X 和 Y 进行。两个骰子均被投掷，获胜的骰子是显示的数字较大的骰子。如果两者显示相同的数字，则重新投掷（只要持续打平，骰子可能会被重新投掷多次）。我们称骰子 X 击败骰子 Y，如果骰子 X 比骰子 Y 更有可能赢得这局游戏。\n\n考虑以下的 $4$ 面骰子：\n\n骰子 A 在各面上有数字 $4$，$5$，$6$ 和 $7$。\n\n骰子 B 在各面上有数字 $2$，$4$，$5$ 和 $10$。\n\n骰子 C 在各面上有数字 $1$，$4$，$8$ 和 $9$。\n\n这些骰子满足一个相当奇妙的性质：A 击败 B，B 击败 C，并且 C 也击败 A。特别地，三个骰子都不是「最佳的」，可以击败其他两个。在这种情况下，当没有两个骰子打平，也没有一个骰子是最佳的，我们称这三个骰子的集合为「非传递的」。在非传递的三个骰子的集合中，每个骰子击败一个其他骰子，并输给另一个其他骰子。\n\n给定两个 $4$ 面骰子 A 和 B 各面上的数字，请帮助奶牛们求出是否有方法为第三个骰子 C 的各面分配数字，使得这个骰子的集合是非传递的。所有骰子面上的数字必须是 $1$ 到 $10$ 的整数。", "inputFormat": "每个测试用例包含多个独立的子测试用例，必须全部回答正确才能通过整个测试用例。输入的第一行包含 $T$（$1\\le T\\le 10$），为你需要求解的子测试用例的数量。\n\n以下 $T$ 行，每行描述了一个子测试用例，包含 $8$ 个整数：骰子 A 的 $4$ 面上的整数，以及骰子 B 的 $4$ 面上的整数。所有的数均在 $1$ 到 $10$ 之间，不一定排序。可能同一个数会出现多次，即使在同一个骰子上也可能出现多个相同的数。\n", "outputFormat": "输出 $T$ 行。如果有可能为骰子 C 分配数字使得第 $k$ 个测试用例成为一个非传递的骰子集合，则第 $k$ 行输出 `yes`，否则输出 `no`。\n", "hint": "**【样例解释】**\n\n第一个子测试用例对应题目中的例子。在第二个子测试用例中，不存在骰子 C 可以使得这个骰子集合是非传递的。同理第三个子测试用例的答案也是 `no`。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO22JAN] Non-Transitive Dice B", "background": "", "description": "为了消磨牛棚里的时光，奶牛们喜欢玩简单的骰子游戏。其中一种游戏使用两个骰子 X 和 Y 进行。两个骰子均被投掷，获胜的骰子是显示的数字较大的骰子。如果两者显示相同的数字，则重新投掷（只要持续打平，骰子可能会被重新投掷多次）。我们称骰子 X 击败骰子 Y，如果骰子 X 比骰子 Y 更有可能赢得这局游戏。\n\n考虑以下的 $4$ 面骰子：\n\n骰子 A 在各面上有数字 $4$，$5$，$6$ 和 $7$。\n\n骰子 B 在各面上有数字 $2$，$4$，$5$ 和 $10$。\n\n骰子 C 在各面上有数字 $1$，$4$，$8$ 和 $9$。\n\n这些骰子满足一个相当奇妙的性质：A 击败 B，B 击败 C，并且 C 也击败 A。特别地，三个骰子都不是「最佳的」，可以击败其他两个。在这种情况下，当没有两个骰子打平，也没有一个骰子是最佳的，我们称这三个骰子的集合为「非传递的」。在非传递的三个骰子的集合中，每个骰子击败一个其他骰子，并输给另一个其他骰子。\n\n给定两个 $4$ 面骰子 A 和 B 各面上的数字，请帮助奶牛们求出是否有方法为第三个骰子 C 的各面分配数字，使得这个骰子的集合是非传递的。所有骰子面上的数字必须是 $1$ 到 $10$ 的整数。", "inputFormat": "每个测试用例包含多个独立的子测试用例，必须全部回答正确才能通过整个测试用例。输入的第一行包含 $T$（$1\\le T\\le 10$），为你需要求解的子测试用例的数量。\n\n以下 $T$ 行，每行描述了一个子测试用例，包含 $8$ 个整数：骰子 A 的 $4$ 面上的整数，以及骰子 B 的 $4$ 面上的整数。所有的数均在 $1$ 到 $10$ 之间，不一定排序。可能同一个数会出现多次，即使在同一个骰子上也可能出现多个相同的数。\n", "outputFormat": "输出 $T$ 行。如果有可能为骰子 C 分配数字使得第 $k$ 个测试用例成为一个非传递的骰子集合，则第 $k$ 行输出 `yes`，否则输出 `no`。\n", "hint": "**【样例解释】**\n\n第一个子测试用例对应题目中的例子。在第二个子测试用例中，不存在骰子 C 可以使得这个骰子集合是非传递的。同理第三个子测试用例的答案也是 `no`。\n\n", "locale": "zh-CN"}}}
