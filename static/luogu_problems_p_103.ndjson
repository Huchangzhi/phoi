{"pid": "P3088", "type": "P", "difficulty": 4, "samples": [["6 4 \n10 3 \n6 2 \n5 3 \n9 7 \n3 6 \n11 2 \n", "2 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "二分", "USACO", "单调队列", "排序", "队列", "ST 表"], "title": "[USACO13NOV] Crowded Cows S", "background": "", "description": "Farmer John's $N$ cows ($1 \\le N \\le 50,000$) are grazing along a one-dimensional fence. Cow $i$ is standing at location $x_i$ and has height $h_i$ ($1 \\le x_i,h_i \\le 1,000,000,000$).\n\nA cow feels \"crowded\" if there is another cow at least twice her height within distance $D$ on her left, and also another cow at least twice her height within distance $D$ on her right ($1 \\le D \\le 1,000,000,000$). Since crowded cows produce less milk, Farmer John would like to count the number of such cows. Please help him.", "inputFormat": "* Line $1$: Two integers, $N$ and $D$.\n\n* Lines $2..1+N$: Line $i+1$ contains the integers $x_i$ and $h_i$. The locations of all $N$ cows are distinct.", "outputFormat": "* Line $1$: The number of crowded cows.", "hint": "There are $6$ cows, with a distance threshold of $4$ for feeling crowded. Cow #1 lives at position $x=10$ and has height $h=3$, and so on.\n\nThe cows at positions $x=5$ and $x=6$ are both crowded.", "locale": "en", "translations": {"en": {"title": "[USACO13NOV] Crowded Cows S", "background": "", "description": "Farmer John's $N$ cows ($1 \\le N \\le 50,000$) are grazing along a one-dimensional fence. Cow $i$ is standing at location $x_i$ and has height $h_i$ ($1 \\le x_i,h_i \\le 1,000,000,000$).\n\nA cow feels \"crowded\" if there is another cow at least twice her height within distance $D$ on her left, and also another cow at least twice her height within distance $D$ on her right ($1 \\le D \\le 1,000,000,000$). Since crowded cows produce less milk, Farmer John would like to count the number of such cows. Please help him.", "inputFormat": "* Line $1$: Two integers, $N$ and $D$.\n\n* Lines $2..1+N$: Line $i+1$ contains the integers $x_i$ and $h_i$. The locations of all $N$ cows are distinct.", "outputFormat": "* Line $1$: The number of crowded cows.", "hint": "There are $6$ cows, with a distance threshold of $4$ for feeling crowded. Cow #1 lives at position $x=10$ and has height $h=3$, and so on.\n\nThe cows at positions $x=5$ and $x=6$ are both crowded.", "locale": "en"}, "zh-CN": {"title": "[USACO13NOV] Crowded Cows S", "background": null, "description": "FJ 有 $N(1\\le N\\le50000)$ 头奶牛沿着一维的栅栏吃草，第 $i$ 头奶牛在目标点 $x_i$ ，它的身高是 $h_i (1 \\le x_i,h_i\\le10^9)$。\n\n当一头奶牛左边 $D(1\\le D\\le10^9)$ 距离内且右边 $D$ 距离内有身高至少是它的两倍的奶牛，它就会觉得拥挤。\n\n请计算觉得拥挤的奶牛的数量。", "inputFormat": "第一行两个整数 $N,D$。\n\n接下来 $N$ 行，每行两个整数 $x_i,h_i$。保证 $x_i$ 互不相同。", "outputFormat": "一行一个整数，表示觉得拥挤的奶牛的数量。", "hint": "共有 $6$ 头奶牛，拥挤感知距离为 $4$。$1$ 号奶牛位于位置 $10$，身高为 $3$，依此类推。\n\n位于位置 $5$ 和位置 $6$ 的两头奶牛处于拥挤状态。", "locale": "zh-CN"}}}
{"pid": "P3089", "type": "P", "difficulty": 5, "samples": [["6 \n5 6 \n1 1 \n10 5 \n7 6 \n4 8 \n8 10 \n", "25 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2013", "USACO", "枚举", "双指针 two-pointer"], "title": "[USACO13NOV] Pogo-Cow S", "background": "", "description": "In an ill-conceived attempt to enhance the mobility of his prize cow Bessie, Farmer John has attached a pogo stick to each of Bessie's legs. Bessie can now hop around quickly throughout the farm, but she has not yet learned how to slow down.\n\nTo help train Bessie to hop with greater control, Farmer John sets up a practice course for her along a straight one-dimensional path across his farm.  At various distinct positions on the path, he places N targets on which Bessie should try to land (1 <= N <= 1000).  Target i is located at position x(i), and is worth p(i) points if Bessie lands on it.  Bessie starts at the location of any target of her choosing and is allowed to move in only one direction, hopping from target to target.  Each hop must cover at least as much distance as the previous hop, and must land on a target.\n\nBessie receives credit for every target she touches (including the initial target on which she starts).  Please compute the maximum number of points she can obtain.\n\nFJ给奶牛贝西的脚安装上了弹簧，使它可以在农场里快速地跳跃，但是它还没有学会如何降低速度。\n\n\nFJ觉得让贝西在一条直线的一维线路上进行练习，他在不同的目标点放置了N (1 <= N <= 1000)个目标点，目标点i在目标点x(i)，该点得分为p(i)。贝西开始时可以选择站在一个目标点上，只允许朝一个方向跳跃，从一目标点跳到另外一个目标点，每次跳跃的距离至少和上一次跳跃的距离相等，并且必须跳到一个目标点。\n\n\n每跳到一个目标点，贝西可以拿到该点的得分，请计算他的最大可能得分。\n", "inputFormat": "\\* Line 1: The integer N.\n\n\\* Lines 2..1+N: Line i+1 contains x(i) and p(i), each an integer in the range 0..1,000,000.\n", "outputFormat": "\\* Line 1: The maximum number of points Bessie can receive.\n", "hint": "There are 6 targets.  The first is at position x=5 and is worth 6 points, and so on.\n\n\nBessie hops from position x=4 (8 points) to position x=5 (6 points) to position x=7 (6 points) to position x=10 (5 points).\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13NOV] Pogo-Cow S", "background": "", "description": "In an ill-conceived attempt to enhance the mobility of his prize cow Bessie, Farmer John has attached a pogo stick to each of Bessie's legs. Bessie can now hop around quickly throughout the farm, but she has not yet learned how to slow down.\n\nTo help train Bessie to hop with greater control, Farmer John sets up a practice course for her along a straight one-dimensional path across his farm. At various distinct positions on the path, he places N targets (1 ≤ N ≤ 1000) on which Bessie should try to land. Target i is located at position x(i), and is worth p(i) points if Bessie lands on it. Bessie starts at the location of any target of her choosing and is allowed to move in only one direction, hopping from target to target. Each hop must cover at least as much distance as the previous hop, and must land on a target.\n\nBessie receives credit for every target she touches (including the initial target on which she starts). Please compute the maximum number of points she can obtain.", "inputFormat": "* Line 1: The integer N.\n* Lines 2..1+N: Line i+1 contains x(i) and p(i), each an integer in the range 0..1,000,000.", "outputFormat": "* Line 1: The maximum number of points Bessie can receive.", "hint": "There are 6 targets. The first is at position x = 5 and is worth 6 points, and so on.\n\nBessie hops from position x = 4 (8 points) to position x = 5 (6 points) to position x = 7 (6 points) to position x = 10 (5 points).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13NOV] Pogo-Cow S", "background": "", "description": "In an ill-conceived attempt to enhance the mobility of his prize cow Bessie, Farmer John has attached a pogo stick to each of Bessie's legs. Bessie can now hop around quickly throughout the farm, but she has not yet learned how to slow down.\n\nTo help train Bessie to hop with greater control, Farmer John sets up a practice course for her along a straight one-dimensional path across his farm.  At various distinct positions on the path, he places N targets on which Bessie should try to land (1 <= N <= 1000).  Target i is located at position x(i), and is worth p(i) points if Bessie lands on it.  Bessie starts at the location of any target of her choosing and is allowed to move in only one direction, hopping from target to target.  Each hop must cover at least as much distance as the previous hop, and must land on a target.\n\nBessie receives credit for every target she touches (including the initial target on which she starts).  Please compute the maximum number of points she can obtain.\n\nFJ给奶牛贝西的脚安装上了弹簧，使它可以在农场里快速地跳跃，但是它还没有学会如何降低速度。\n\n\nFJ觉得让贝西在一条直线的一维线路上进行练习，他在不同的目标点放置了N (1 <= N <= 1000)个目标点，目标点i在目标点x(i)，该点得分为p(i)。贝西开始时可以选择站在一个目标点上，只允许朝一个方向跳跃，从一目标点跳到另外一个目标点，每次跳跃的距离至少和上一次跳跃的距离相等，并且必须跳到一个目标点。\n\n\n每跳到一个目标点，贝西可以拿到该点的得分，请计算他的最大可能得分。\n", "inputFormat": "\\* Line 1: The integer N.\n\n\\* Lines 2..1+N: Line i+1 contains x(i) and p(i), each an integer in the range 0..1,000,000.\n", "outputFormat": "\\* Line 1: The maximum number of points Bessie can receive.\n", "hint": "There are 6 targets.  The first is at position x=5 and is worth 6 points, and so on.\n\n\nBessie hops from position x=4 (8 points) to position x=5 (6 points) to position x=7 (6 points) to position x=10 (5 points).\n", "locale": "zh-CN"}}}
{"pid": "P3090", "type": "P", "difficulty": 3, "samples": [["10 3 \n3 2 2 4 \n2 1 0 1 \n1 1 1 7 \n", "5 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2013", "USACO", "并查集"], "title": "[USACO13NOV] Empty Stalls G", "background": "Farmer John's new barn consists of a huge circle of $N$ stalls ($2 \\le N \\le 3{,}000{,}000$), numbered $0..N-1$, with stall $N-1$ being adjacent to stall $0$.\n\nAt the end of each day, FJ's cows arrive back at the barn one by one, each with a preferred stall they would like to occupy. However, if a cow's preferred stall is already occupied by another cow, she scans forward sequentially from this stall until she finds the first unoccupied stall, which she then claims. If she scans past stall $N-1$, she continues scanning from stall $0$.\n\nGiven the preferred stall of each cow, determine the smallest index of a stall that remains unoccupied after all the cows have returned to the barn. Notice that the answer does not depend on the order in which the cows return.\n\nTo avoid reading huge amounts of input, the input is specified concisely using $K$ lines ($1 \\le K \\le 10{,}000$), each of the form:\nX Y A B\n\nOne such line specifies preferences for $X \\times Y$ cows in total: $X$ cows prefer each of the stalls $f(1), \\dots, f(Y)$, where $f(i) = (A i + B) \\bmod N$. The values of $A$ and $B$ lie in the range $0 \\dots 1{,}000{,}000{,}000$.\n\nNote: The standard memory limit is 64 MB.", "description": "Farmer John's new barn consists of a huge circle of $N$ stalls ($2 \\le N \\le 3{,}000{,}000$), numbered $0..N-1$, with stall $N-1$ being adjacent to stall $0$.\n\nAt the end of each day, FJ's cows arrive back at the barn one by one, each with a preferred stall they would like to occupy. However, if a cow's preferred stall is already occupied by another cow, she scans forward sequentially from this stall until she finds the first unoccupied stall, which she then claims. If she scans past stall $N-1$, she continues scanning from stall $0$.\n\nGiven the preferred stall of each cow, determine the smallest index of a stall that remains unoccupied after all the cows have returned to the barn. Notice that the answer does not depend on the order in which the cows return.\n\nTo avoid reading huge amounts of input, the input is specified concisely using $K$ lines ($1 \\le K \\le 10{,}000$), each of the form:\nX Y A B\n\nOne such line specifies preferences for $X \\times Y$ cows in total: $X$ cows prefer each of the stalls $f(1), \\dots, f(Y)$, where $f(i) = (A i + B) \\bmod N$. The values of $A$ and $B$ lie in the range $0 \\dots 1{,}000{,}000{,}000$.\n\nNote: The standard memory limit is 64 MB.\n\n", "inputFormat": "- Line 1: Two space-separated integers $N$ and $K$.\n- Lines $2..1+K$: Each line contains integers $X$ $Y$ $A$ $B$, interpreted as above. The total number of cows specified by all lines will be at most $N-1$. Multiple lines may add cows preferring the same stall.", "outputFormat": "- Line 1: The minimum index of an unoccupied stall.", "hint": "There are 10 stalls in the barn, numbered $0..9$. The second line of input states that 3 cows prefer stall $(2 \\cdot 1 + 4) \\bmod 10 = 6$, and 3 cows prefer stall $(2 \\cdot 2 + 4) \\bmod 10 = 8$. The third line states that 2 cows prefer stall $(0 \\cdot 1 + 1) \\bmod 10 = 1$. Line four specifies that 1 cow prefers stall $(1 \\cdot 1 + 7) \\bmod 10 = 8$ (so a total of 4 cows prefer this stall).\n\nAll stalls will end up occupied except stall 5.\n\nTranslated by ChatGPT 5", "locale": "en", "translations": {"en": {"title": "[USACO13NOV] Empty Stalls G", "background": "Farmer John's new barn consists of a huge circle of $N$ stalls ($2 \\le N \\le 3{,}000{,}000$), numbered $0..N-1$, with stall $N-1$ being adjacent to stall $0$.\n\nAt the end of each day, FJ's cows arrive back at the barn one by one, each with a preferred stall they would like to occupy. However, if a cow's preferred stall is already occupied by another cow, she scans forward sequentially from this stall until she finds the first unoccupied stall, which she then claims. If she scans past stall $N-1$, she continues scanning from stall $0$.\n\nGiven the preferred stall of each cow, determine the smallest index of a stall that remains unoccupied after all the cows have returned to the barn. Notice that the answer does not depend on the order in which the cows return.\n\nTo avoid reading huge amounts of input, the input is specified concisely using $K$ lines ($1 \\le K \\le 10{,}000$), each of the form:\nX Y A B\n\nOne such line specifies preferences for $X \\times Y$ cows in total: $X$ cows prefer each of the stalls $f(1), \\dots, f(Y)$, where $f(i) = (A i + B) \\bmod N$. The values of $A$ and $B$ lie in the range $0 \\dots 1{,}000{,}000{,}000$.\n\nNote: The standard memory limit is 64 MB.", "description": "Farmer John's new barn consists of a huge circle of $N$ stalls ($2 \\le N \\le 3{,}000{,}000$), numbered $0..N-1$, with stall $N-1$ being adjacent to stall $0$.\n\nAt the end of each day, FJ's cows arrive back at the barn one by one, each with a preferred stall they would like to occupy. However, if a cow's preferred stall is already occupied by another cow, she scans forward sequentially from this stall until she finds the first unoccupied stall, which she then claims. If she scans past stall $N-1$, she continues scanning from stall $0$.\n\nGiven the preferred stall of each cow, determine the smallest index of a stall that remains unoccupied after all the cows have returned to the barn. Notice that the answer does not depend on the order in which the cows return.\n\nTo avoid reading huge amounts of input, the input is specified concisely using $K$ lines ($1 \\le K \\le 10{,}000$), each of the form:\nX Y A B\n\nOne such line specifies preferences for $X \\times Y$ cows in total: $X$ cows prefer each of the stalls $f(1), \\dots, f(Y)$, where $f(i) = (A i + B) \\bmod N$. The values of $A$ and $B$ lie in the range $0 \\dots 1{,}000{,}000{,}000$.\n\nNote: The standard memory limit is 64 MB.\n\n", "inputFormat": "- Line 1: Two space-separated integers $N$ and $K$.\n- Lines $2..1+K$: Each line contains integers $X$ $Y$ $A$ $B$, interpreted as above. The total number of cows specified by all lines will be at most $N-1$. Multiple lines may add cows preferring the same stall.", "outputFormat": "- Line 1: The minimum index of an unoccupied stall.", "hint": "There are 10 stalls in the barn, numbered $0..9$. The second line of input states that 3 cows prefer stall $(2 \\cdot 1 + 4) \\bmod 10 = 6$, and 3 cows prefer stall $(2 \\cdot 2 + 4) \\bmod 10 = 8$. The third line states that 2 cows prefer stall $(0 \\cdot 1 + 1) \\bmod 10 = 1$. Line four specifies that 1 cow prefers stall $(1 \\cdot 1 + 7) \\bmod 10 = 8$ (so a total of 4 cows prefer this stall).\n\nAll stalls will end up occupied except stall 5.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13NOV] Empty Stalls G", "background": null, "description": "约翰的谷仓中有 $N(2 \\le N \\le 3\\times 10^{6})$ 个房间，编号 $0$ 到 $N-1$，这些房间排布成环状,编号 $0$ 的和编号 $N-1$ 的相邻。\n\n每天傍晚，奶牛们一只一只排队回到谷仓，每头奶牛都有一个喜欢的房间，但是，如果它喜欢的房间已被其他奶牛占了，它会向前挨个探索其他房间（如果它探索过了 $N-1$ 号房间，它会继续探索 $0$ 号房间，以此继续下去）直到探到第一个没有被占用的房间，这时它会宣布占用这个房间。\n\n告诉你每头奶牛喜欢的房间，当所有奶牛都找到房间后，剩下的没被占用的房间中，编号最小的是哪个。很明显，问题的答案与奶牛进入谷仓的顺序无关。\n\n为避免输入内容过多。本题的输入数据采用一种简洁的方式：一共 $K(1 \\le K \\le 10^{4})$ 行，每行格式如下：\n\n> $X\\ Y\\ A\\ B$\n\n表示有 $Y$ 批奶牛，每批 $X$ 头，也就是总共 $X\\times Y$ 只奶牛喜欢的房间号。$Y$ 批奶牛编号 $1$ 到 $Y$，第 $i$ 批 $X$ 头奶牛喜欢的房间号为$(A \\times i+B) \\bmod N$。\n\n$A$ 和 $B$ 的取值范围为 $0\\dots 10^{9}$。\n\n注意，只有 64M 的空间。", "inputFormat": "第一行，两个用空格隔开的整数,$N$ 和 $K$。\n\n第二行到第 $K+1$ 行，每行包含四个整数 $X,Y,A,B$，解释看题目描述。牛的总数最多为 $N-1$ ，可以向同一个牛栏中添加牛。", "outputFormat": "一行一个整数，表示最小的移动次数。", "hint": "谷仓里有 $10$ 个牛栏，编号为 $0$ 到 $9$。输入的第二行表示有 $3$ 头牛喜欢牛栏 $(2 \\times 1 + 4) \\bmod 10 = 6$，另有 $3$ 头牛喜欢牛栏 $(2 \\times 2 + 4) \\bmod 10 = 8$。第三行表示有 $2$ 头牛喜欢牛栏 $(0\\times 1 + 1) \\bmod 10 = 1$。第四行表示有 $1$ 头牛喜欢牛栏 $(1 \\times 1 + 7) \\bmod 10 = 8$（所以总共有 $4$ 头牛喜欢这个牛栏）。\n\n除了牛栏 $5$ 之外，其他所有牛栏最后都会被占用。", "locale": "zh-CN"}}}
{"pid": "P3091", "type": "P", "difficulty": 6, "samples": [["4 5 \n0 10 \n0 -10 \n10 0 \n-10 0 \n", "4 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "USACO"], "title": "[USACO13NOV] Line of Sight G", "background": "", "description": "Farmer John's N cows (1 <= N <= 50,000) are located at distinct points in his two-dimensional pasture.  In the middle of the pasture is a large circular grain silo.  Cows on opposite sides of the silo cannot see each-other, since the silo blocks their view.  Please determine the number of pairs of cows that can see each-other via a direct line of sight.\n\nThe grain silo is centered at the origin (0,0) and has radius R.  No cow is located on or inside the circle corresponding to the silo, and no two cows lie on a tangent line to the silo.  The value of R is in the range 1..1,000,000, and each cow lives at a point with integer coordinates in the range -1,000,000..+1,000,000.\n\n给定平面上的 $N$ 个点，求有多少点对能互相看见而不被以原点为圆心，$R$ 为半径的圆挡住。\n\n题目保证不存在圆上或圆内的点，也不存在连接两点的线段为圆的切线。\n\n$1\\le N\\le50000$\n\n$1\\le R\\le10^6$ \n\n$|x|,|y|\\le10^6$", "inputFormat": "\\* Line 1: Two integers: N and R.\n\n\\* Lines 2..1+N: Each line contains two integers specifying the (x,y) coordinates of a cow.\n", "outputFormat": "\\* Line 1: The number of pairs of cows who can see each-other.\n", "hint": "There are 4 cows at positions (0,10), (0,-10), (10,0), and (-10,0).  The silo is centered at (0,0) and has radius 5.\n\n\nAll 6 pairs of cows can see each-other, except for the pairs situated on opposite sides of the silo: the cows at (-10,0) and (10,0) cannot see each-other, and the cows at (0,-10) and (0,10) cannot see each-other.\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13NOV] Line of Sight G", "background": "", "description": "Farmer John's $N$ cows ($1 \\le N \\le 50000$) are located at distinct points in his two-dimensional pasture. In the middle of the pasture is a large circular grain silo. Cows on opposite sides of the silo cannot see each other, since the silo blocks their view. Please determine the number of pairs of cows that can see each other via a direct line of sight.\n\nThe grain silo is centered at the origin $(0, 0)$ and has radius $R$. No cow is located on or inside the circle corresponding to the silo, and no two cows lie on a tangent line to the silo. The value of $R$ is in the range $1..1{,}000{,}000$, and each cow lives at a point with integer coordinates in the range $-1{,}000{,}000..+1{,}000{,}000$.\n\nEquivalent statement: Given $N$ points on the plane, count the number of pairs that can see each other without being blocked by a circle centered at the origin with radius $R$. It is guaranteed that no point lies on or inside the circle, and no segment connecting two points is tangent to the circle.\n\nConstraints:\n$1 \\le N \\le 50000$.\n$1 \\le R \\le 10^6$.\n$|x|, |y| \\le 10^6$.", "inputFormat": "- Line 1: Two integers $N$ and $R$.\n- Lines $2..N+1$: Each line contains two integers specifying the coordinates $(x, y)$ of a cow.", "outputFormat": "- Line 1: The number of pairs of cows that can see each other.", "hint": "There are 4 cows at positions $(0, 10)$, $(0, -10)$, $(10, 0)$, and $(-10, 0)$. The silo is centered at $(0, 0)$ and has radius $5$.\n\nAll 6 pairs of cows can see each other, except for the pairs situated on opposite sides of the silo: the cows at $(-10, 0)$ and $(10, 0)$ cannot see each other, and the cows at $(0, -10)$ and $(0, 10)$ cannot see each other.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13NOV] Line of Sight G", "background": "", "description": "Farmer John's N cows (1 <= N <= 50,000) are located at distinct points in his two-dimensional pasture.  In the middle of the pasture is a large circular grain silo.  Cows on opposite sides of the silo cannot see each-other, since the silo blocks their view.  Please determine the number of pairs of cows that can see each-other via a direct line of sight.\n\nThe grain silo is centered at the origin (0,0) and has radius R.  No cow is located on or inside the circle corresponding to the silo, and no two cows lie on a tangent line to the silo.  The value of R is in the range 1..1,000,000, and each cow lives at a point with integer coordinates in the range -1,000,000..+1,000,000.\n\n给定平面上的 $N$ 个点，求有多少点对能互相看见而不被以原点为圆心，$R$ 为半径的圆挡住。\n\n题目保证不存在圆上或圆内的点，也不存在连接两点的线段为圆的切线。\n\n$1\\le N\\le50000$\n\n$1\\le R\\le10^6$ \n\n$|x|,|y|\\le10^6$", "inputFormat": "\\* Line 1: Two integers: N and R.\n\n\\* Lines 2..1+N: Each line contains two integers specifying the (x,y) coordinates of a cow.\n", "outputFormat": "\\* Line 1: The number of pairs of cows who can see each-other.\n", "hint": "There are 4 cows at positions (0,10), (0,-10), (10,0), and (-10,0).  The silo is centered at (0,0) and has radius 5.\n\n\nAll 6 pairs of cows can see each-other, except for the pairs situated on opposite sides of the silo: the cows at (-10,0) and (10,0) cannot see each-other, and the cows at (0,-10) and (0,10) cannot see each-other.\n", "locale": "zh-CN"}}}
{"pid": "P3092", "type": "P", "difficulty": 5, "samples": [["3 6 \n12 \n15 \n10 \n6 \n3 \n3 \n2 \n3 \n7 \n", "12 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "二分", "USACO", "单调队列", "前缀和", "状压 DP"], "title": "[USACO13NOV] No Change G", "background": "", "description": "Farmer John is at the market to purchase supplies for his farm. He has in his pocket $K$ coins ($1 \\leq K \\leq 16$), each with value in the range $1...100,000,000$. FJ would like to make a sequence of $N$ purchases ($1 \\leq N \\leq 100,000$), where the ith purchase costs $c(i)$ units of money ($1 \\leq c(i) \\leq 10,000$). As he makes this sequence of purchases, he can periodically stop and pay, with a single coin, for all the purchases made since his last payment (of course, the single coin he uses must be large enough to pay for all of these). Unfortunately, the vendors at the market are completely out of change, so whenever FJ uses a coin that is larger than the amount of money he owes, he sadly receives no changes in return!\n\nPlease compute the maximum amount of money FJ can end up with after making his $N$ purchases in sequence. Output $-1$ if it is impossible for FJ to make all of his purchases.", "inputFormat": "Line $1$: Two integers, $K$ and $N$.\n\nLines $2...1+K$: Each line contains the amount of money of one of FJ's coins.\n\nLines $2+K...1+N+K$: These $N$ lines contain the costs of FJ's intended purchases.", "outputFormat": "Line $1$: The maximum amount of money FJ can end up with, or $-1$ if FJ cannot complete all of his purchases.", "hint": "FJ has $3$ coins of values $12$, $15$, and $10$. He must make purchases in sequence of value $6$, $3$, $3$, $2$, $3$, and $7$.\n\nFJ spends his 10-unit coin on the first two purchases, then the 15-unit coin on the remaining purchases. This leaves him with the 12-unit coin.", "locale": "en", "translations": {"en": {"title": "[USACO13NOV] No Change G", "background": "", "description": "Farmer John is at the market to purchase supplies for his farm. He has in his pocket $K$ coins ($1 \\leq K \\leq 16$), each with value in the range $1...100,000,000$. FJ would like to make a sequence of $N$ purchases ($1 \\leq N \\leq 100,000$), where the ith purchase costs $c(i)$ units of money ($1 \\leq c(i) \\leq 10,000$). As he makes this sequence of purchases, he can periodically stop and pay, with a single coin, for all the purchases made since his last payment (of course, the single coin he uses must be large enough to pay for all of these). Unfortunately, the vendors at the market are completely out of change, so whenever FJ uses a coin that is larger than the amount of money he owes, he sadly receives no changes in return!\n\nPlease compute the maximum amount of money FJ can end up with after making his $N$ purchases in sequence. Output $-1$ if it is impossible for FJ to make all of his purchases.", "inputFormat": "Line $1$: Two integers, $K$ and $N$.\n\nLines $2...1+K$: Each line contains the amount of money of one of FJ's coins.\n\nLines $2+K...1+N+K$: These $N$ lines contain the costs of FJ's intended purchases.", "outputFormat": "Line $1$: The maximum amount of money FJ can end up with, or $-1$ if FJ cannot complete all of his purchases.", "hint": "FJ has $3$ coins of values $12$, $15$, and $10$. He must make purchases in sequence of value $6$, $3$, $3$, $2$, $3$, and $7$.\n\nFJ spends his 10-unit coin on the first two purchases, then the 15-unit coin on the remaining purchases. This leaves him with the 12-unit coin.", "locale": "en"}, "zh-CN": {"title": "[USACO13NOV] No Change G", "background": null, "description": "Farmer John 到商场购物，他的钱包里有 $K(1\\le K\\le 16)$ 个硬币，面值的范围是 $[1,10^8]$。\n\nFJ 想按顺序买 $N$ 个物品 $(1\\le N\\le 10^5)$，第 $i$ 个物品需要花费 $c_i$ 块钱，$(1\\le c_i \\le 10^4)$。\n\n在依次进行的购买 $N$ 个物品的过程中，FJ 可以随时停下来付款，每次付款只用一个硬币，支付购买的内容是从上一次支付后开始到现在的这些所有物品（前提是该硬币足以支付这些物品的费用）。不幸的是，商场的收银机坏了，如果FJ支付的硬币面值大于所需的费用，他不会得到任何找零。\n\n请计算出在购买完 $N$ 个物品后，FJ 最多剩下多少钱。如果无法完成购买，输出 $-1$。", "inputFormat": "第 $1$ 行两个整数，$K$ 和 $N$。\n\n第 $2$ 行到第 $K+1$ 行每行包含 FJ 的一个硬币的金额。\n\n第 $K+2$ 行到第 $N+K+1$ 行共 $N$ 行，每行包含 FJ 的准备购买的物品的成本。（注：即 $c_i$。）", "outputFormat": "第 $1$ 行：FJ 最终能剩余的最大金额；若无法完成所有购买，则输出 $-1$。", "hint": "**样例说明**\n\nFJ 拥有三枚面值分别为 $12$、$15$ 和 $10$ 的硬币。他需要按顺序完成价值 $6$、$3$、$3$、$2$、$3$ 和 $7$ 的购买。\n\nFJ 用 $10$ 面值的硬币支付前两次购买（$6+3$），随后用 $15$ 面值的硬币支付剩余购买（$3+2+3+7$），最终剩下 $12$ 面值的硬币。", "locale": "zh-CN"}}}
{"pid": "P3093", "type": "P", "difficulty": 3, "samples": [["4 \n10 3 \n7 5 \n8 1 \n2 1 \n", "25 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "递推", "2013", "USACO", "优先队列", "反悔贪心"], "title": "[USACO13DEC] Milk Scheduling S", "background": null, "description": "FJ 有 $N$（$1 \\le N \\le 10,000$）头牛要挤牛奶，为每头牛挤牛奶需要花费 $1$ 单位时间。\n\n奶牛很厌烦等待，奶牛 $i$ 在它的截止时间 $d_i$（$1 \\le d_i \\le 10,000$）前能挤出 $g_i$（$1 \\le g_i \\le 1000$）加仑的牛奶，否则将不能挤出牛奶。时间 $t$ 开始时为 $0$，即在时间 $t=x$ 之前，最多可以给 $x$ 头奶牛挤牛奶。\n\n\n请计算 FJ 的最大挤奶量。", "inputFormat": "第一行一个整数 $N$。\n\n第 $2$ 至第 $(N+1)$ 行，第 $(i+1)$ 行两个整数 $g_i$ 和 $d_i$。", "outputFormat": "一行一个整数，表示 FJ 最多能得到多少加仑的牛奶。", "hint": "有 $4$ 头奶牛。第一头奶牛如果在时刻 $3$ 之前（不包含时刻 $3$）被挤可以产出 $10$ 加仑牛奶，其它奶牛以此类推。\n\nFJ 在 $0$ 时刻开始给奶牛 $3$ 挤牛奶（放弃在奶牛 $4$ 的时间限制之前给它挤牛奶，因为和奶牛 $3$ 冲突），消耗 $1$ 单位时间并得到 $8$ 加仑的牛奶；在时刻 $1$ 给奶牛 $1$ 挤牛奶，在时刻 $2$ 给奶牛 $2$ 挤牛奶。\n\n一共获得 $8+10+7=25$ 加仑的牛奶。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13DEC] Milk Scheduling S", "background": null, "description": "Farmer John has $N$ cows that need to be milked ($1 \\le N \\le 10,000$), each of which takes only one unit of time to milk.\n\nBeing impatient animals, some cows will refuse to be milked if Farmer John waits too long to milk them. More specifically, cow $i$ produces $g_i$ gallons of milk ($1 \\le g_i \\le 1000$), but only if she is milked before a deadline at time $d_i$ ($1 \\le d_i \\le 10,000$). Time starts at $t=0$, so at most $x$ total cows can be milked prior to a deadline at time $t=x$.\n\nPlease help Farmer John determine the maximum amount of milk that he can obtain if he milks the cows optimally.", "inputFormat": "* Line $1$: The value of $N$.\n\n* Lines $2\\dots 1+N$: Line $i+1$ contains the integers $g_i$ and $d_i$.", "outputFormat": "* Line $1$: The maximum number of gallons of milk Farmer John can obtain.", "hint": "There are $4$ cows. The first produces $10$ gallons of milk if milked by time $3$, and so on.\n\nFarmer John milks cow $3$ first, giving up on cow $4$ since she cannot be milked by her deadline due to the conflict with cow $3$. Farmer John then milks cows $1$ and $2$.", "locale": "en"}, "zh-CN": {"title": "[USACO13DEC] Milk Scheduling S", "background": null, "description": "FJ 有 $N$（$1 \\le N \\le 10,000$）头牛要挤牛奶，为每头牛挤牛奶需要花费 $1$ 单位时间。\n\n奶牛很厌烦等待，奶牛 $i$ 在它的截止时间 $d_i$（$1 \\le d_i \\le 10,000$）前能挤出 $g_i$（$1 \\le g_i \\le 1000$）加仑的牛奶，否则将不能挤出牛奶。时间 $t$ 开始时为 $0$，即在时间 $t=x$ 之前，最多可以给 $x$ 头奶牛挤牛奶。\n\n\n请计算 FJ 的最大挤奶量。", "inputFormat": "第一行一个整数 $N$。\n\n第 $2$ 至第 $(N+1)$ 行，第 $(i+1)$ 行两个整数 $g_i$ 和 $d_i$。", "outputFormat": "一行一个整数，表示 FJ 最多能得到多少加仑的牛奶。", "hint": "有 $4$ 头奶牛。第一头奶牛如果在时刻 $3$ 之前（不包含时刻 $3$）被挤可以产出 $10$ 加仑牛奶，其它奶牛以此类推。\n\nFJ 在 $0$ 时刻开始给奶牛 $3$ 挤牛奶（放弃在奶牛 $4$ 的时间限制之前给它挤牛奶，因为和奶牛 $3$ 冲突），消耗 $1$ 单位时间并得到 $8$ 加仑的牛奶；在时刻 $1$ 给奶牛 $1$ 挤牛奶，在时刻 $2$ 给奶牛 $2$ 挤牛奶。\n\n一共获得 $8+10+7=25$ 加仑的牛奶。", "locale": "zh-CN"}}}
{"pid": "P3094", "type": "P", "difficulty": 3, "samples": [["3 3 1 3 \n3 1 10 \n1 3 10 \n1 2 7 \n3 2 \n2 3 \n1 2 \n", "2 \n24 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "USACO"], "title": "[USACO13DEC] Vacation Planning S", "background": "", "description": "有N(1 <= N <= 200)个农场，用1..N编号。航空公司计划在农场间建立航线。对于任意一条航线，选择农场1..K中的农场作为枢纽(1 <= K <= 100, K <= N)。\n\n\n当前共有M (1 <= M <= 10,000)条单向航线连接这些农场，从农场u\\_i 到农场 v\\_i, 将花费 d\\_i美元。(1 <= d\\_i <= 1,000,000).\n\n\n航空公司最近收到Q (1 <= Q <= 10,000)个单向航行请求。第i个航行请求是从农场a\\_i到农场 b\\_i，航行必须经过至少一个枢纽农场（可以是起点或者终点农场），因此可能会多次经过某些农场。\n\n\n请计算可行航行请求的数量，及完成所有可行请求的总费用。\n", "inputFormat": "\\* Line 1: Four integers: N, M, K, and Q.\n\n\\* Lines 2..1+M: Line i+1 contains u\\_i, v\\_i, and d\\_i for flight i.\n\n\\* Lines 2+M..1+M+Q: Line 1+M+i describes the ith trip in terms of a\\_i and b\\_i\n", "outputFormat": "\\* Line 1: The number of trips (out of Q) for which a valid route is possible.\n\n\\* Line 2: The sum, over all trips for which a valid route is possible, of the minimum possible route cost.\n", "hint": "There are three farms (numbered 1..3); farm 1 is a hub.  There is a $10 flight from farm 3 to farm 1, and so on.  We wish to look for trips from farm 3 to farm 2, from 2->3, and from 1->2.\n\n\nThe trip from 3->2 has only one possible route, of cost 10+7.  The trip from 2->3 has no valid route, since there is no flight leaving farm 2.  The trip from 1->2 has only one valid route again, of cost 7.\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13DEC] Vacation Planning S", "background": "", "description": "There are $N$ farms numbered $1..N$ with $1 \\le N \\le 200$. The airline plans to set up flight routes between the farms. Among these farms, those numbered $1..K$ are designated as hub farms, where $1 \\le K \\le 100$ and $K \\le N$.\n\nThere are currently $M$ directed flights ($1 \\le M \\le 10{,}000$). Each flight goes from farm $u_i$ to farm $v_i$ and costs $d_i$ dollars, with $1 \\le d_i \\le 1{,}000{,}000$.\n\nThe airline has received $Q$ ($1 \\le Q \\le 10{,}000$) directed trip requests. The $i$th request is to travel from farm $a_i$ to farm $b_i$. A valid trip must pass through at least one hub farm (it may be the starting or ending farm). The route may visit the same farm multiple times.\n\nCompute the number of trip requests for which a valid route exists, and the total cost to complete all valid requests, where each valid request is taken with its minimum possible route cost.", "inputFormat": "* Line 1: Four integers: $N$, $M$, $K$, and $Q$.\n* Lines $2..1+M$: Line $i+1$ contains $u_i$, $v_i$, and $d_i$ for flight $i$.\n* Lines $2+M..1+M+Q$: Line $1+M+i$ describes the $i$th trip in terms of $a_i$ and $b_i$.", "outputFormat": "* Line 1: The number of trips (out of $Q$) for which a valid route is possible.\n* Line 2: The sum, over all trips for which a valid route is possible, of the minimum possible route cost.", "hint": "There are three farms (numbered $1..3$); farm $1$ is a hub. There is a 10-dollar flight from farm $3$ to farm $1$, and so on. We wish to look for trips from $3 \\to 2$, from $2 \\to 3$, and from $1 \\to 2$.\n\nThe trip from $3 \\to 2$ has only one possible route, with cost $10+7$. The trip from $2 \\to 3$ has no valid route, since there is no flight leaving farm $2$. The trip from $1 \\to 2$ has only one valid route again, with cost $7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13DEC] Vacation Planning S", "background": "", "description": "有N(1 <= N <= 200)个农场，用1..N编号。航空公司计划在农场间建立航线。对于任意一条航线，选择农场1..K中的农场作为枢纽(1 <= K <= 100, K <= N)。\n\n\n当前共有M (1 <= M <= 10,000)条单向航线连接这些农场，从农场u\\_i 到农场 v\\_i, 将花费 d\\_i美元。(1 <= d\\_i <= 1,000,000).\n\n\n航空公司最近收到Q (1 <= Q <= 10,000)个单向航行请求。第i个航行请求是从农场a\\_i到农场 b\\_i，航行必须经过至少一个枢纽农场（可以是起点或者终点农场），因此可能会多次经过某些农场。\n\n\n请计算可行航行请求的数量，及完成所有可行请求的总费用。\n", "inputFormat": "\\* Line 1: Four integers: N, M, K, and Q.\n\n\\* Lines 2..1+M: Line i+1 contains u\\_i, v\\_i, and d\\_i for flight i.\n\n\\* Lines 2+M..1+M+Q: Line 1+M+i describes the ith trip in terms of a\\_i and b\\_i\n", "outputFormat": "\\* Line 1: The number of trips (out of Q) for which a valid route is possible.\n\n\\* Line 2: The sum, over all trips for which a valid route is possible, of the minimum possible route cost.\n", "hint": "There are three farms (numbered 1..3); farm 1 is a hub.  There is a $10 flight from farm 3 to farm 1, and so on.  We wish to look for trips from farm 3 to farm 2, from 2->3, and from 1->2.\n\n\nThe trip from 3->2 has only one possible route, of cost 10+7.  The trip from 2->3 has no valid route, since there is no flight leaving farm 2.  The trip from 1->2 has only one valid route again, of cost 7.\n", "locale": "zh-CN"}}}
{"pid": "P3095", "type": "P", "difficulty": 5, "samples": [["5 3 5 \n3 \n1 \n2 \n1 \n2 \n3 \n4 \n5 \n", "4 \n5 \n3 \n1 \n2 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "USACO"], "title": "[USACO13DEC] The Bessie Shuffle S", "background": null, "description": "贝西正在练习她的洗牌方法。她已经掌握了一种针对 $m$ 张牌（$2 \\le m \\le 10^5$）的贝西洗牌法——这种洗牌会让原本从上往下第 $i$ 张牌变成从上往下第 $p_i$ 张牌。\n\n现在贝西要在更大的牌堆上练习洗牌。她有一副标号为 $1 \\sim n$ 的 $n$ 张牌（$m \\le n \\le 10^5$）。她的洗牌方式是：每次取出最上面的 $m$ 张牌进行贝西洗牌，然后将洗好的牌放回牌堆顶部。接着她移除最上面的一张牌并面朝下放置。她重复这个过程，将顶部的牌依次叠放，直到牌堆用完。当剩余牌数不足 $m$ 张时，她不再进行贝西洗牌，但仍会将最上面的牌叠放到其他牌上。\n\n已知牌堆初始是按升序排列的（$1$ 在最上面，$n$在最下面）。给定贝西洗牌法的描述，请帮助贝西计算最终牌堆中 $Q$ 个指定位置（$1 \\le Q \\le N$ 且 $Q \\le 5000$）上的牌面数字。", "inputFormat": "第 $1$ 行三个空格分隔的整数 $n,m,Q$。\n\n接下来 $m$ 行分别表示贝西洗牌中第 $i$ 张牌的新位置 $p_i$（从上往下数，$1 \\le p_i \\le m$）。\n\n最后 $Q$ 行，每行包含一个整数 $q_i$，表示查询第 $q_i$ 张牌上最后得到的数字（从上往下数，$1 \\le q_i \\le N$）。", "outputFormat": "输出一共 $Q$ 行，对于每组数据，输出第 $q_i$ 张牌上最后得到的数字。", "hint": "贝西有一副初始顺序为 $[1,2,3,4,5]$ 的 $5$ 张牌。她的洗牌针对 $3$ 张牌，效果是将顶牌移到底部。共有 $5$ 个查询分别询问牌堆的每个位置。\n\n\n洗牌过程如下：\n\n$[1,2,3,4,5] \\to [2,3,1,4,5]$（将 $2$ 面朝下放置）  \n$[3,1,4,5] \\to [1,4,3,5]$（将 $1$ 面朝下放置）  \n$[4,3,5] \\to [3,5,4]$（将 $3$ 面朝下放置）  \n$[5,4]$（将 $5$ 面朝下放置）  \n$[4]$（将 $4$ 面朝下放置）\n\n最终牌堆顺序为 $[4,5,3,1,2]$。\n\nTranslate by @[Moya_Rao](https://www.luogu.com.cn/user/814130)", "locale": "zh-CN", "translations": {"en": {"title": null, "background": null, "description": "Bessie is practicing her card tricks.  She has already mastered the Bessie-shuffle -- a shuffle on $M$ ($2 \\le M \\le 100,000$) cards that reorganizes the cards so the i-th card from the top is now the $p_i$-th card from the top.\n\nNow Bessie is practicing shuffles on larger decks.  She has a deck of $N$ cards ($M \\le N \\le 100,000$) conveniently labeled $1$ to $N$.  She shuffles this deck by taking the first $M$ cards and performing the Bessie-shuffle on them, placing the shuffled cards back on top of the deck.She then removes the top card from the deck and places it face down.  She repeats this process, placing the top cards successively on top of each other, until she is out of cards.  When Bessie has less than $M$ cards left, she no longer performs the Bessie-shuffle, but continues to place the top card on top of the others.\n\nBessie knows that the deck initially started in sorted order, with $1$ on top, $2$ next, and $N$ on the bottom.  Given the description of the Bessie-shuffle, help Bessie compute which cards end up located at $Q$ different specified positions ($1 \\le Q \\le N, Q \\le 5,000$) in the deck.", "inputFormat": "Line $1$: A single line containing $N$, $M$ and $Q$ separated by a space.\n\nLines $2 \\dots 1+M$: Line $i+1$ indicates the position from the top, $p_i$, of the $i$-th card in the Bessie-shuffle ($1 \\le p_i \\le M$).\n\nLines $2+M \\dots 1+M+Q$: Line $i+1+M$ contains a single integer $q_i$.\n\ndescribing the $i$-th query.  \nYou are to compute the label on the card located in position $q_i$ from the top ($1 \\le q_i \\le N$).", "outputFormat": "Lines $1 \\dots Q$: On the $i$-th line, print a single integer indicating the card at position $q_i$ from the top.", "hint": "Bessie has a deck of $5$ cards initially ordered as $[1, 2, 3, 4, 5]$.  Her shuffle is on $3$ cards and has the effect of moving the top card to the bottom.  \nThere are $5$ queries querying each position in the deck.\n\n\nThe shuffle proceeds as:\n\n```cpp\n[1, 2, 3, 4, 5] -> [2, 3, 1, 4, 5] (put 2 face down) \n[3, 1, 4, 5] -> [1, 4, 3, 5] (put 1 face down) \n[4, 3, 5] -> [3, 5, 4] (put 3 face down) \n[5, 4] (put 5 face down) \n[4] (put 4 face down) \n```\nThis produces the final order of $[4, 5, 3, 1, 2]$.", "locale": "en"}, "zh-CN": {"title": "[USACO13DEC] The Bessie Shuffle S", "background": null, "description": "贝西正在练习她的洗牌方法。她已经掌握了一种针对 $m$ 张牌（$2 \\le m \\le 10^5$）的贝西洗牌法——这种洗牌会让原本从上往下第 $i$ 张牌变成从上往下第 $p_i$ 张牌。\n\n现在贝西要在更大的牌堆上练习洗牌。她有一副标号为 $1 \\sim n$ 的 $n$ 张牌（$m \\le n \\le 10^5$）。她的洗牌方式是：每次取出最上面的 $m$ 张牌进行贝西洗牌，然后将洗好的牌放回牌堆顶部。接着她移除最上面的一张牌并面朝下放置。她重复这个过程，将顶部的牌依次叠放，直到牌堆用完。当剩余牌数不足 $m$ 张时，她不再进行贝西洗牌，但仍会将最上面的牌叠放到其他牌上。\n\n已知牌堆初始是按升序排列的（$1$ 在最上面，$n$在最下面）。给定贝西洗牌法的描述，请帮助贝西计算最终牌堆中 $Q$ 个指定位置（$1 \\le Q \\le N$ 且 $Q \\le 5000$）上的牌面数字。", "inputFormat": "第 $1$ 行三个空格分隔的整数 $n,m,Q$。\n\n接下来 $m$ 行分别表示贝西洗牌中第 $i$ 张牌的新位置 $p_i$（从上往下数，$1 \\le p_i \\le m$）。\n\n最后 $Q$ 行，每行包含一个整数 $q_i$，表示查询第 $q_i$ 张牌上最后得到的数字（从上往下数，$1 \\le q_i \\le N$）。", "outputFormat": "输出一共 $Q$ 行，对于每组数据，输出第 $q_i$ 张牌上最后得到的数字。", "hint": "贝西有一副初始顺序为 $[1,2,3,4,5]$ 的 $5$ 张牌。她的洗牌针对 $3$ 张牌，效果是将顶牌移到底部。共有 $5$ 个查询分别询问牌堆的每个位置。\n\n\n洗牌过程如下：\n\n$[1,2,3,4,5] \\to [2,3,1,4,5]$（将 $2$ 面朝下放置）  \n$[3,1,4,5] \\to [1,4,3,5]$（将 $1$ 面朝下放置）  \n$[4,3,5] \\to [3,5,4]$（将 $3$ 面朝下放置）  \n$[5,4]$（将 $5$ 面朝下放置）  \n$[4]$（将 $4$ 面朝下放置）\n\n最终牌堆顺序为 $[4,5,3,1,2]$。\n\nTranslate by @[Moya_Rao](https://www.luogu.com.cn/user/814130)", "locale": "zh-CN"}}}
{"pid": "P3096", "type": "P", "difficulty": 5, "samples": [["3 3 1 2 \n1 2 10 \n2 3 10 \n2 1 5 \n2 \n1 3 \n3 1 \n", "1 \n20 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2013", "USACO"], "title": "[USACO13DEC] Vacation Planning G", "background": "", "description": "Air Bovinia operates flights connecting the N farms that the cows live on (1 <= N <= 20,000). As with any airline, K of these farms have been designated as hubs (1 <= K <= 200, K <= N).\n\nCurrently, Air Bovinia offers M one-way flights (1 <= M <= 20,000), where flight i travels from farm u\\_i to farm v\\_i and costs d\\_i (1 <= d\\_i <= 10,000) dollars.  As with any other sensible airline, for each of these flights, at least one of u\\_i and v\\_i is a hub.  There is at most one direct flight between two farms in any given direction, and no flight starts and ends at the same farm.\n\nBessie is in charge of running the ticketing services for Air Bovinia. Unfortunately, while she was away chewing on delicious hay for a few hours, Q one-way travel requests for the cows' holiday vacations were received (1 <= Q <= 50,000), where the ith request is from farm a\\_i to farm b\\_i.\n\nAs Bessie is overwhelmed with the task of processing these tickets, please help her compute whether each ticket request can be fullfilled, and its minimum cost if it can be done.\n\nTo reduce the output size, you should only output the total number of ticket requests that are possible, and the minimum total cost for them. Note that this number might not fit into a 32-bit integer.\n\n是n个点m条有向边，求两两之间的最短路，要求路径上必须经过编号1~k的至少一个点\n", "inputFormat": "\\* Line 1: The integers N, M, K, and Q.\n\n\\* Lines 2..M + 1: Line i+1 contains u\\_i, v\\_i, and d\\_i. (1 <= u\\_i, v\\_i <= N, u\\_i != v\\_i)\n\n\\* Lines M + 2..M + K + 1: Each of these lines contains the ID of a single hub (in the range 1..N).\n\n\\* Lines M + K + 2..M + K + Q + 1: Two numbers per line, indicating a request for a ticket from farm a\\_i to b\\_i. (1 <= a\\_i, b\\_i <= N, a\\_i != b\\_i)\n", "outputFormat": "\\* Line 1: The number of ticket requests that can be fullfilled.\n\n\\* Line 2: The minimum total cost of fulling the possible ticket requests\n", "hint": "For the first flight, the only feasible route is 1->2->3, costing 20. There are no flights leaving farm 3, so the poor cows are stranded there.\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13DEC] Vacation Planning G", "background": "", "description": "Air Bovinia operates flights connecting the $N$ farms that the cows live on ($1 \\le N \\le 20{,}000$). As with any airline, $K$ of these farms have been designated as hubs ($1 \\le K \\le 200$, $K \\le N$).\n\nCurrently, Air Bovinia offers $M$ one-way flights ($1 \\le M \\le 20{,}000$), where flight $i$ travels from farm $u_i$ to farm $v_i$ and costs $d_i$ dollars ($1 \\le d_i \\le 10{,}000$). As with any other sensible airline, for each of these flights, at least one of $u_i$ and $v_i$ is a hub. There is at most one direct flight between two farms in any given direction, and no flight starts and ends at the same farm.\n\nBessie is in charge of running the ticketing services for Air Bovinia. Unfortunately, while she was away chewing on delicious hay for a few hours, $Q$ one-way travel requests for the cows' holiday vacations were received ($1 \\le Q \\le 50{,}000$), where the $i$th request is from farm $a_i$ to farm $b_i$.\n\nAs Bessie is overwhelmed with the task of processing these tickets, please help her compute whether each ticket request can be fulfilled, and its minimum cost if it can be done.\n\nTo reduce the output size, you should only output the total number of ticket requests that are possible, and the minimum total cost for them. Note that this number might not fit into a $32$-bit integer.\n\nIn other words, given a directed graph with $N$ nodes and $M$ edges, for each query find the shortest path whose route must pass through at least one node with an index in $1..K$.", "inputFormat": "- Line $1$: The integers $N$, $M$, $K$, and $Q$.\n- Lines $2..M+1$: Line $i+1$ contains $u_i$, $v_i$, and $d_i$. ($1 \\le u_i, v_i \\le N$, $u_i \\ne v_i$.)\n- Lines $M+2..M+K+1$: Each of these lines contains the ID of a single hub (in the range $1..N$).\n- Lines $M+K+2..M+K+Q+1$: Two numbers per line, indicating a request for a ticket from farm $a_i$ to $b_i$. ($1 \\le a_i, b_i \\le N$, $a_i \\ne b_i$.)", "outputFormat": "- Line $1$: The number of ticket requests that can be fulfilled.\n- Line $2$: The minimum total cost of fulfilling the possible ticket requests.", "hint": "For the first flight, the only feasible route is $1 \\to 2 \\to 3$, costing $20$. There are no flights leaving farm $3$, so the poor cows are stranded there.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13DEC] Vacation Planning G", "background": "", "description": "Air Bovinia operates flights connecting the N farms that the cows live on (1 <= N <= 20,000). As with any airline, K of these farms have been designated as hubs (1 <= K <= 200, K <= N).\n\nCurrently, Air Bovinia offers M one-way flights (1 <= M <= 20,000), where flight i travels from farm u\\_i to farm v\\_i and costs d\\_i (1 <= d\\_i <= 10,000) dollars.  As with any other sensible airline, for each of these flights, at least one of u\\_i and v\\_i is a hub.  There is at most one direct flight between two farms in any given direction, and no flight starts and ends at the same farm.\n\nBessie is in charge of running the ticketing services for Air Bovinia. Unfortunately, while she was away chewing on delicious hay for a few hours, Q one-way travel requests for the cows' holiday vacations were received (1 <= Q <= 50,000), where the ith request is from farm a\\_i to farm b\\_i.\n\nAs Bessie is overwhelmed with the task of processing these tickets, please help her compute whether each ticket request can be fullfilled, and its minimum cost if it can be done.\n\nTo reduce the output size, you should only output the total number of ticket requests that are possible, and the minimum total cost for them. Note that this number might not fit into a 32-bit integer.\n\n是n个点m条有向边，求两两之间的最短路，要求路径上必须经过编号1~k的至少一个点\n", "inputFormat": "\\* Line 1: The integers N, M, K, and Q.\n\n\\* Lines 2..M + 1: Line i+1 contains u\\_i, v\\_i, and d\\_i. (1 <= u\\_i, v\\_i <= N, u\\_i != v\\_i)\n\n\\* Lines M + 2..M + K + 1: Each of these lines contains the ID of a single hub (in the range 1..N).\n\n\\* Lines M + K + 2..M + K + Q + 1: Two numbers per line, indicating a request for a ticket from farm a\\_i to b\\_i. (1 <= a\\_i, b\\_i <= N, a\\_i != b\\_i)\n", "outputFormat": "\\* Line 1: The number of ticket requests that can be fullfilled.\n\n\\* Line 2: The minimum total cost of fulling the possible ticket requests\n", "hint": "For the first flight, the only feasible route is 1->2->3, costing 20. There are no flights leaving farm 3, so the poor cows are stranded there.\n", "locale": "zh-CN"}}}
{"pid": "P3097", "type": "P", "difficulty": 5, "samples": [["5 3 \n1 \n2 \n3 \n4 \n5 \n5 2 \n2 7 \n1 10 \n", "32 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "线段树", "USACO"], "title": "[USACO13DEC] Optimal Milking G", "background": "", "description": "Farmer John has recently purchased a new barn containing N milking machines (1 <= N <= 40,000), conveniently numbered 1..N and arranged in a row.\n\nMilking machine i is capable of extracting M(i) units of milk per day (1 <= M(i) <= 100,000).  Unfortunately, the machines were installed so close together that if a machine i is in use on a particular day, its two neighboring machines cannot be used that day (endpoint machines have only one neighbor, of course).  Farmer John is free to select different subsets of machines to operate on different days.\n\nFarmer John is interested in computing the maximum amount of milk he can extract over a series of D days (1 <= D <= 50,000).  At the beginning of each day, he has enough time to perform maintenance on one selected milking machine i, thereby changing its daily milk output M(i) from that day forward. Given a list of these daily modifications, please tell Farmer John how much milk he can produce over D days (note that this number might not fit into a 32-bit integer).", "inputFormat": "\\* Line 1: The values of N and D.\n\n\\* Lines 2..1+N: Line i+1 contains the initial value of M(i).\n\n\\* Lines 2+N..1+N+D: Line 1+N+d contains two integers i and m,\n\nindicating that Farmer John updates the value of M(i) to m at the beginning of day d.", "outputFormat": "\\* Line 1: The maximum total amount of milk FJ can produce over D days.", "hint": "There are 5 machines, with initial milk outputs 1,2,3,4,5.  On day 1, machine 5 is updated to output 2 unit of milk, and so on.\n\n\nOn day one, the optimal amount of milk is 2+4 = 6 (also achievable as 1+3+2).  On day two, the optimal amount is 7+4 = 11.  On day three, the optimal amount is 10+3+2=15.", "locale": "en", "translations": {"en": {"title": "[USACO13DEC] Optimal Milking G", "background": "", "description": "Farmer John has recently purchased a new barn containing N milking machines (1 <= N <= 40,000), conveniently numbered 1..N and arranged in a row.\n\nMilking machine i is capable of extracting M(i) units of milk per day (1 <= M(i) <= 100,000).  Unfortunately, the machines were installed so close together that if a machine i is in use on a particular day, its two neighboring machines cannot be used that day (endpoint machines have only one neighbor, of course).  Farmer John is free to select different subsets of machines to operate on different days.\n\nFarmer John is interested in computing the maximum amount of milk he can extract over a series of D days (1 <= D <= 50,000).  At the beginning of each day, he has enough time to perform maintenance on one selected milking machine i, thereby changing its daily milk output M(i) from that day forward. Given a list of these daily modifications, please tell Farmer John how much milk he can produce over D days (note that this number might not fit into a 32-bit integer).", "inputFormat": "\\* Line 1: The values of N and D.\n\n\\* Lines 2..1+N: Line i+1 contains the initial value of M(i).\n\n\\* Lines 2+N..1+N+D: Line 1+N+d contains two integers i and m,\n\nindicating that Farmer John updates the value of M(i) to m at the beginning of day d.", "outputFormat": "\\* Line 1: The maximum total amount of milk FJ can produce over D days.", "hint": "There are 5 machines, with initial milk outputs 1,2,3,4,5.  On day 1, machine 5 is updated to output 2 unit of milk, and so on.\n\n\nOn day one, the optimal amount of milk is 2+4 = 6 (also achievable as 1+3+2).  On day two, the optimal amount is 7+4 = 11.  On day three, the optimal amount is 10+3+2=15.", "locale": "en"}, "zh-CN": {"title": "[USACO13DEC] Optimal Milking G", "background": null, "description": "### 题目描述\n\nFarmer John 最近购买了一个新谷仓，内有 $N(1\\le N \\le 40000)$ 台挤奶机，从左到右编号为 $1 \\sim N$。\n\n第 $i$ 台挤奶机当天可以产出 $M_i$ 单位的牛奶。不幸的是，这些机器安装得过于紧密，导致如果某一天使用了机器 $i$，与其相邻的两台机器当天就无法使用。Farmer John 可以自由安排使用哪些机器。\n\nFarmer John 想知道在 $D(1\\le D \\le 50000)$ 天内能产出的最大牛奶量。在每一天开始时，Farmer John 会对一台挤奶机进行维护，即改变一台机器的 $M_i$ 值。给定维护列表，求这 $D$ 天内最多能生产多少单位的牛奶。注意，$32$ 位整型可能不适合用于储存答案。", "inputFormat": "第一行两个正整数 $N,D$。\n\n第 $2 \\sim N + 1$ 行，每行一个正整数 $M_i$。\n\n对于接下来的第 $d$ 行，每行两个正整数 $i, m$，表示在第 $d$ 天开始时有一次操作 $M_i \\gets m$。", "outputFormat": "一行一个正整数，表示答案。", "hint": "初始状态下有 $5$ 台挤奶机，$M_i$ 分别为 $1, 2, 3, 4, 5$。第 $1$ 天开始时，$M_5$ 被更新为 $2$，以此类推。\n\n- 第 $1$ 天，$M_i$ 分别为 $1, 2, 3, 4, 2$，可以选择机器 $2, 4$ 以获得当天 $2 + 4 = 6$ 单位的牛奶，或选择机器 $1, 3, 5$ 得到相同的答案（$1 + 3 + 2 = 6$）。\n- 第 $2$ 天，$M_i$ 分别为 $1, 7, 3, 4, 2$，选择机器 $2, 4$ 以获得当天 $7 + 4 = 11$ 单位的牛奶。\n- 第 $3$ 天，$M_i$ 分别为 $10, 7, 3, 4, 2$，选择机器 $1, 3, 5$ 以获得当天 $10 + 3 + 2 = 15$ 单位的牛奶。\n\n总产奶量为 $6 + 11 + 15 = 32$ 单位。", "locale": "zh-CN"}}}
{"pid": "P3098", "type": "P", "difficulty": 6, "samples": [["5 3 5 \n3 \n1 \n2 \n1 \n2 \n3 \n4 \n5 \n", "4 \n5 \n3 \n1 \n2 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "倍增", "USACO", "并查集", "广度优先搜索 BFS", "图论建模"], "title": "[USACO13DEC] The Bessie Shuffle G", "background": null, "description": "贝西有一种独门的洗牌方法，称为 A 类洗牌法；\n\nA 类洗牌法的具体过程：将一堆共 $M$（$2 \\le M \\le 10 ^ 5$）张从上到下编号 $1, 2, \\cdots, M$ 的纸牌，从上到下第 $i$ 张牌洗到位置 $p _ i$。\n\n例如，$M=3，p = \\{3, 1, 2\\}$，则执行一次 A 类洗牌法后，从上到下将变为 $2, 3, 1$，即牌 $1$ 放到位置 $3$，牌 $2$ 放到位置 $1$，牌 $3$ 放到位置 $2$。\n\n\n贝西现在要练习另外一种洗牌方法，称为 B 类洗牌法。\n\n\nB 类洗牌法的具体过程： \n\n有一堆 $N$（$M \\le N \\le 10 ^ 9$）张编号为 $1, 2, \\cdots, N$ 的牌，并按从上到下 $1$ 到 $N$ 的顺序堆放。另有一个牌堆用来辅助洗牌，称为临时堆，开始时为空。\n\n1. 将最上面 $M$ 张牌进行一次 A 类洗牌法；\n2. 将最上面的一张牌放到临时堆的最上方；\n3. 重复前两个操作，直到原先的堆没有牌为止。\n\n\n以上过程中，当原先堆的牌不足 $M$ 张的时候，将不进行 A 类洗牌法，而是将最上面的牌依次放到临时堆上。\n\n\n给定 $N, M$ 和排列 $p$。现在有 $Q$（$1 \\le Q \\le \\min(N, 5000)$）个询问，请求出对其做一次 B 类洗牌法后临时堆中 $q_i$ 位置上的牌的编号。\n\n$50\\%$ 的数据中，$N \\le 10 ^ 5$。", "inputFormat": "* 第 $1$ 行：一行包含 $N$、$M$ 和 $Q$，用空格分隔。\n\n* 第 $2$ 行至第 $M+1$ 行：第 $i+1$ 行表示在贝西洗牌中，第 $i$ 张牌距顶部的位置 $P_i(1\\le P_i\\le M)$。\n\n* 第 $M+2$ 行至第 $M+Q+1$ 行：第 $M+i+1$ 行包含一个整数 $q_i$\n\n对于第 $i$ 个查询。你需要计算从顶部起第 $q_i$ 个位置 $(1\\le q_i\\le N)$ 的卡片上的编号。", "outputFormat": "* 第 $1$ 行至第 $Q$ 行：在第 $i$ 行，打印一个整数，表示从顶部开始第 $q_i$ 张牌的编号。", "hint": "贝西的五张牌刚开始顺序为 [1, 2, 3, 4, 5]。她一次洗三张牌，效果是将第一张牌放到底部。以上五个问题询问了每一张牌的位置。\n\n\n洗牌的顺序是:\n\n```plain\n[1, 2, 3, 4, 5] -> [2, 3, 1, 4, 5] (将2正面向下放置)\n[3, 1, 4, 5] -> [1, 4, 3, 5] (将1正面向下放置) \n[4, 3, 5] -> [3, 5, 4] (将3正面向下放置) \n[5, 4] (将5正面向下放置) \n[4] (将4正面向下放置) \n```\n这就形成了最终的顺序：[4, 5, 3, 1, 2]", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13DEC] The Bessie Shuffle G", "background": "", "description": "Bessie has a unique shuffling method, called the A-shuffle (also called the Bessie-shuffle).\n\nA-shuffle: Take a stack of $M$（$2 \\le M \\le 10 ^ 5$） cards labeled from top to bottom $1, 2, \\cdots, M$. Move the $i$-th card from the top to position $p _ i$ from the top.\n\nFor example, $M=3，p = \\{3, 1, 2\\}$, after performing one A-shuffle, from top to bottom it becomes $2, 3, 1$, i.e., card $1$ goes to position $3$, card $2$ goes to position $1$, card $3$ goes to position $2$.\n\nNow Bessie practices another method, called the B-shuffle.\n\nB-shuffle process:\n\nThere is a stack of $N$（$M \\le N \\le 10 ^ 9$） cards labeled $1, 2, \\cdots, N$, initially stacked in order from top to bottom $1$ to $N$. There is also an auxiliary stack used during shuffling, called the temporary pile, which starts empty.\n\n1. Apply one A-shuffle to the top $M$ cards.\n2. Move the top card to the top of the temporary pile, face down.\n3. Repeat the previous two operations until the original pile is empty.\n\nDuring this process, when the original pile has fewer than $M$ cards remaining, do not perform the A-shuffle; instead, keep moving the top card to the temporary pile one by one.\n\nGiven $N$, $M$ and the permutation $p$, there are $Q$（$1 \\le Q \\le \\min(N, 5000)$） queries. After performing one B-shuffle, for each query, find the label of the card at position $q _ i$ in the temporary pile.\n\nConstraints:\n- $2 \\le M \\le 10 ^ 5$.\n- $M \\le N \\le 10 ^ 9$.\n- $1 \\le Q \\le \\min(N, 5000)$.\n- $1 \\le P[i] \\le M$.\n- $1 \\le q _ i \\le N$.\n- $50\\%$ of test cases have $N \\le 10 ^ 5$.", "inputFormat": "* Line 1: A single line containing $N$, $M$ and $Q$ separated by a space.\n* Lines 2..1+M: Line $i+1$ indicates the position from the top, $P[i]$, of the $i$-th card in the Bessie-shuffle ($1 \\le P[i] \\le M$).\n* Lines 2+M..1+M+Q: Line $i+1+M$ contains a single integer $q_i$ describing the $i$-th query. You are to compute the label on the card located in position $q_i$ from the top ($1 \\le q_i \\le N$).", "outputFormat": "* Lines 1..Q: On line $i$, print a single integer indicating the card at position $q_i$ from the top.", "hint": "Bessie has a deck of 5 cards initially ordered as [1, 2, 3, 4, 5]. Her shuffle is on 3 cards and has the effect of moving the top card to the bottom. There are 5 queries, one for each position in the deck.\n\nThe shuffle proceeds as:\n\n```plain\n[1, 2, 3, 4, 5] -> [2, 3, 1, 4, 5] (put 2 face down) \n[3, 1, 4, 5] -> [1, 4, 3, 5] (put 1 face down) \n[4, 3, 5] -> [3, 5, 4] (put 3 face down) \n[5, 4] (put 5 face down) \n[4] (put 4 face down) \n```\nThis produces the final order of [4, 5, 3, 1, 2].\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13DEC] The Bessie Shuffle G", "background": null, "description": "贝西有一种独门的洗牌方法，称为 A 类洗牌法；\n\nA 类洗牌法的具体过程：将一堆共 $M$（$2 \\le M \\le 10 ^ 5$）张从上到下编号 $1, 2, \\cdots, M$ 的纸牌，从上到下第 $i$ 张牌洗到位置 $p _ i$。\n\n例如，$M=3，p = \\{3, 1, 2\\}$，则执行一次 A 类洗牌法后，从上到下将变为 $2, 3, 1$，即牌 $1$ 放到位置 $3$，牌 $2$ 放到位置 $1$，牌 $3$ 放到位置 $2$。\n\n\n贝西现在要练习另外一种洗牌方法，称为 B 类洗牌法。\n\n\nB 类洗牌法的具体过程： \n\n有一堆 $N$（$M \\le N \\le 10 ^ 9$）张编号为 $1, 2, \\cdots, N$ 的牌，并按从上到下 $1$ 到 $N$ 的顺序堆放。另有一个牌堆用来辅助洗牌，称为临时堆，开始时为空。\n\n1. 将最上面 $M$ 张牌进行一次 A 类洗牌法；\n2. 将最上面的一张牌放到临时堆的最上方；\n3. 重复前两个操作，直到原先的堆没有牌为止。\n\n\n以上过程中，当原先堆的牌不足 $M$ 张的时候，将不进行 A 类洗牌法，而是将最上面的牌依次放到临时堆上。\n\n\n给定 $N, M$ 和排列 $p$。现在有 $Q$（$1 \\le Q \\le \\min(N, 5000)$）个询问，请求出对其做一次 B 类洗牌法后临时堆中 $q_i$ 位置上的牌的编号。\n\n$50\\%$ 的数据中，$N \\le 10 ^ 5$。", "inputFormat": "* 第 $1$ 行：一行包含 $N$、$M$ 和 $Q$，用空格分隔。\n\n* 第 $2$ 行至第 $M+1$ 行：第 $i+1$ 行表示在贝西洗牌中，第 $i$ 张牌距顶部的位置 $P_i(1\\le P_i\\le M)$。\n\n* 第 $M+2$ 行至第 $M+Q+1$ 行：第 $M+i+1$ 行包含一个整数 $q_i$\n\n对于第 $i$ 个查询。你需要计算从顶部起第 $q_i$ 个位置 $(1\\le q_i\\le N)$ 的卡片上的编号。", "outputFormat": "* 第 $1$ 行至第 $Q$ 行：在第 $i$ 行，打印一个整数，表示从顶部开始第 $q_i$ 张牌的编号。", "hint": "贝西的五张牌刚开始顺序为 [1, 2, 3, 4, 5]。她一次洗三张牌，效果是将第一张牌放到底部。以上五个问题询问了每一张牌的位置。\n\n\n洗牌的顺序是:\n\n```plain\n[1, 2, 3, 4, 5] -> [2, 3, 1, 4, 5] (将2正面向下放置)\n[3, 1, 4, 5] -> [1, 4, 3, 5] (将1正面向下放置) \n[4, 3, 5] -> [3, 5, 4] (将3正面向下放置) \n[5, 4] (将5正面向下放置) \n[4] (将4正面向下放置) \n```\n这就形成了最终的顺序：[4, 5, 3, 1, 2]", "locale": "zh-CN"}}}
{"pid": "P3099", "type": "P", "difficulty": 5, "samples": [["4 \n0 0 \n0 2 \n2 0 \n2 2 \n1 1 \n1 10 \n-10 3 \n10 3 \n", "1 2 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2014", "USACO", "排序", "凸包"], "title": "[USACO14JAN] Cow Curling G", "background": "", "description": "Cow curling is a popular cold-weather sport played in the Moolympics.\n\nLike regular curling, the sport involves two teams, each of which slides N heavy stones (3 <= N <= 50,000) across a sheet of ice.  At the end of the game, there are 2N stones on the ice, each located at a distinct 2D point.\n\nScoring in the cow version of curling is a bit curious, however.  A stone is said to be \"captured\" if it is contained inside a triangle whose corners are stones owned by the opponent (a stone on the boundary of such a triangle also counts as being captured).  The score for a team is the number of opponent stones that are captured.\n\nPlease help compute the final score of a cow curling match, given the locations of all 2N stones.\n\n\n", "inputFormat": "\\* Line 1: The integer N.\n\n\\* Lines 2..1+N: Each line contains 2 integers specifying the x and y coordinates of a stone for team A (each coordinate lies in the range -40,000 .. +40,000).\n\n\\* Lines 2+N..1+2N: Each line contains 2 integers specifying the x and y coordinates of a stone for team B (each coordinate lies in the range -40,000 .. +40,000).\n\n\n", "outputFormat": "\\* Line 1: Two space-separated integers, giving the scores for teams A and B.\n\n\n", "hint": "Each team owns 4 stones.  Team A has stones at (0,0), (0,2), (2,0), and (2,2), and team B has stones at (1,1), (1,10), (-10,3), and (10,3).\n\n\nTeam A captures their opponent's stone at (1,1).  Team B captures their opponent's stones at (0,2) and (2,2).\n", "locale": "en", "translations": {"en": {"title": "[USACO14JAN] Cow Curling G", "background": "", "description": "Cow curling is a popular cold-weather sport played in the Moolympics.\n\nLike regular curling, the sport involves two teams, each of which slides N heavy stones (3 <= N <= 50,000) across a sheet of ice.  At the end of the game, there are 2N stones on the ice, each located at a distinct 2D point.\n\nScoring in the cow version of curling is a bit curious, however.  A stone is said to be \"captured\" if it is contained inside a triangle whose corners are stones owned by the opponent (a stone on the boundary of such a triangle also counts as being captured).  The score for a team is the number of opponent stones that are captured.\n\nPlease help compute the final score of a cow curling match, given the locations of all 2N stones.\n\n\n", "inputFormat": "\\* Line 1: The integer N.\n\n\\* Lines 2..1+N: Each line contains 2 integers specifying the x and y coordinates of a stone for team A (each coordinate lies in the range -40,000 .. +40,000).\n\n\\* Lines 2+N..1+2N: Each line contains 2 integers specifying the x and y coordinates of a stone for team B (each coordinate lies in the range -40,000 .. +40,000).\n\n\n", "outputFormat": "\\* Line 1: Two space-separated integers, giving the scores for teams A and B.\n\n\n", "hint": "Each team owns 4 stones.  Team A has stones at (0,0), (0,2), (2,0), and (2,2), and team B has stones at (1,1), (1,10), (-10,3), and (10,3).\n\n\nTeam A captures their opponent's stone at (1,1).  Team B captures their opponent's stones at (0,2) and (2,2).\n", "locale": "en"}, "zh-CN": {"title": "[USACO14JAN] Cow Curling G", "background": null, "description": "奶牛冰壶是一项在 Moolympics 中流行的寒冷天气运动。\n\n与常规冰壶类似，这项运动涉及两支队伍，每队向冰面投掷 $N$ 个重石（$3\\leq N\\leq 50,000$）。比赛结束时，冰面上有 $2N$ 个石头，每个石头位于不同的二维坐标点。\n\n然而，奶牛冰壶的计分方式有些特别。如果一个石头被包含在由对手的三个石头构成的三角形内部（在三角形边界上的石头也算被捕获），则该石头被称为“被捕获”。一个队伍的得分是被捕获的对手石头的数量。\n\n请计算一场奶牛冰壶比赛的最终得分，给定所有 $2N$ 个石头的位置。", "inputFormat": "- 第 $1$ 行：整数 $N$。\n\n- 第 $2$ 到 $1+N$ 行：每行包含 $2$ 个整数，指定队伍 $A$ 的石头的 $x$ 和 $y$ 坐标（每个坐标的范围是 $-40,000$ 到 $+40,000$）。\n\n- 第 $2+N$ 到 $1+2N$ 行：每行包含 $2$ 个整数，指定队伍 B 的石头的 $x$ 和 $y$ 坐标（每个坐标的范围是 $-40,000$ 到 $+40,000$）。", "outputFormat": "- 第 $1$ 行：两个空格分隔的整数，分别给出队伍 A 和队伍 B 的得分。", "hint": "每队拥有 $4$ 个石头。队伍 A 的石头在 $(0,0)$、$(0,2)$、$(2,0)$ 和 $(2,2)$，队伍 B 的石头在 $(1,1)$、$(1,10)$、$(-10,3)$ 和 $(10,3)$。\n\n队伍 A 捕获了对手在 $(1,1)$ 的石头。队伍 B 捕获了对手在 $(0,2)$ 和 $(2,2)$ 的石头。\n\n---\n\n翻译来自 DeepSeek", "locale": "zh-CN"}}}
{"pid": "P3100", "type": "P", "difficulty": 5, "samples": [["3 6 \nRSRSSS \nRSRSSS \nRSRSSS \n", "3 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "USACO", "枚举"], "title": "[USACO14JAN] Building a Ski Course G", "background": "", "description": "Farmer John is helping to turn his large field into a ski course for the upcoming winter Moolympics.  The field has dimensions M x N (1 <= M,N <= 100), and its intended final composition is described by an M x N grid of characters like this:\n\nRSRSSS\nRSRSSS\nRSRSSS\nEach character describes how the snow in a unit square of the field should be groomed: either 'R' for 'rough' or 'S' for 'smooth' (the Moolympics organizers think that a course is more interesting if it has a mixture of rough and smooth patches).\n\nTo build the desired course, Farmer John plans to modify his tractor so that it can stamp any B x B patch of the field (B <= M, B <= N) with either entirely smooth snow or entirely rough snow.  Since it takes a long time to reset the tractor between each of these stamps, FJ wants to make B as large as possible.  With B = 1, he can clearly create the desired ski course by stamping each individual square with either R or S, as intended.  However, for larger values of B, it may no longer be possible to create the desired course design.  Every unit square of the course must at some point be stamped by FJ's tractor; it cannot be left in its default state.\n\nPlease help FJ determine the largest possible value of B he can successfully use.\n\n滑雪场的设计图是一个M\\*NM x N (1 <= M,N <= 100)的矩阵，每个格子里用一个字母R（表示粗糙）或者S（表示平整）。\n\n\n比如：\n\n\nRSRSSS\n\nRSRSSS\n\nRSRSSS\n\n农民约翰的拖拉机每次可以将一块B\\*B (B <= M, B <= N)的区域全部标记B\\*B (B <= M, B <= N)的R或者S，他希望B能够尽量地大。一个格子可以被多次标记，下一次标记能够覆盖前一次标记，每个格子可以都至少被标记一次。\n", "inputFormat": "\\* Line 1: Two space-separated integers M and N.\n\n\\* Lines 2..M+1: M lines of exactly N characters (each R or S), describing the desired ski course design.\n", "outputFormat": "\\* Line 1: The maximum value of B Farmer John can use to create the desired course pattern.\n", "hint": "FJ can stamp a rough patch spanning columns 1-3, followed by a smooth patch spanning columns 2-4, then a rough patch spanning columns 3-5, and finally a smooth patch spanning columns 4-6.\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14JAN] Building a Ski Course G", "background": "", "description": "Farmer John is helping to turn his large field into a ski course for the upcoming winter Moolympics. The field has dimensions $M \\times N$ with $1 \\le M, N \\le 100$, and its intended final composition is described by an $M \\times N$ grid of characters like this:\n\nRSRSSS\nRSRSSS\nRSRSSS\n\nEach character describes how the snow in a unit square of the field should be groomed: either 'R' for rough or 'S' for smooth (the Moolympics organizers think that a course is more interesting if it has a mixture of rough and smooth patches).\n\nTo build the desired course, Farmer John plans to modify his tractor so that it can stamp any $B \\times B$ patch of the field (with $B \\le M$, $B \\le N$) with either entirely smooth snow or entirely rough snow. Since it takes a long time to reset the tractor between each of these stamps, FJ wants to make $B$ as large as possible. With $B = 1$, he can clearly create the desired ski course by stamping each individual square with either 'R' or 'S', as intended. However, for larger values of $B$, it may no longer be possible to create the desired course design. Every unit square must be stamped at least once; it cannot be left in its default state. Stamps may overlap, and later stamps overwrite earlier ones.\n\nPlease help FJ determine the largest possible value of $B$ he can successfully use.", "inputFormat": "* Line 1: Two space-separated integers $M$ and $N$.\n* Lines 2..$M+1$: $M$ lines of exactly $N$ characters (each 'R' or 'S'), describing the desired ski course design.", "outputFormat": "* Line 1: The maximum value of $B$ Farmer John can use to create the desired course pattern.", "hint": "FJ can stamp a rough patch spanning columns 1-3, followed by a smooth patch spanning columns 2-4, then a rough patch spanning columns 3-5, and finally a smooth patch spanning columns 4-6.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO14JAN] Building a Ski Course G", "background": "", "description": "Farmer John is helping to turn his large field into a ski course for the upcoming winter Moolympics.  The field has dimensions M x N (1 <= M,N <= 100), and its intended final composition is described by an M x N grid of characters like this:\n\nRSRSSS\nRSRSSS\nRSRSSS\nEach character describes how the snow in a unit square of the field should be groomed: either 'R' for 'rough' or 'S' for 'smooth' (the Moolympics organizers think that a course is more interesting if it has a mixture of rough and smooth patches).\n\nTo build the desired course, Farmer John plans to modify his tractor so that it can stamp any B x B patch of the field (B <= M, B <= N) with either entirely smooth snow or entirely rough snow.  Since it takes a long time to reset the tractor between each of these stamps, FJ wants to make B as large as possible.  With B = 1, he can clearly create the desired ski course by stamping each individual square with either R or S, as intended.  However, for larger values of B, it may no longer be possible to create the desired course design.  Every unit square of the course must at some point be stamped by FJ's tractor; it cannot be left in its default state.\n\nPlease help FJ determine the largest possible value of B he can successfully use.\n\n滑雪场的设计图是一个M\\*NM x N (1 <= M,N <= 100)的矩阵，每个格子里用一个字母R（表示粗糙）或者S（表示平整）。\n\n\n比如：\n\n\nRSRSSS\n\nRSRSSS\n\nRSRSSS\n\n农民约翰的拖拉机每次可以将一块B\\*B (B <= M, B <= N)的区域全部标记B\\*B (B <= M, B <= N)的R或者S，他希望B能够尽量地大。一个格子可以被多次标记，下一次标记能够覆盖前一次标记，每个格子可以都至少被标记一次。\n", "inputFormat": "\\* Line 1: Two space-separated integers M and N.\n\n\\* Lines 2..M+1: M lines of exactly N characters (each R or S), describing the desired ski course design.\n", "outputFormat": "\\* Line 1: The maximum value of B Farmer John can use to create the desired course pattern.\n", "hint": "FJ can stamp a rough patch spanning columns 1-3, followed by a smooth patch spanning columns 2-4, then a rough patch spanning columns 3-5, and finally a smooth patch spanning columns 4-6.\n", "locale": "zh-CN"}}}
{"pid": "P3101", "type": "P", "difficulty": 5, "samples": [["3 5 10 \n20 21 18 99 5 \n19 22 20 16 17 \n18 17 40 60 80 \n1 0 0 0 0 \n0 0 0 0 0 \n0 0 0 0 1 \n", "24 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "二分", "USACO", "并查集", "Kruskal 重构树"], "title": "[USACO14JAN] Ski Course Rating G", "background": null, "description": "冬季 Moolympics 运动会的越野滑雪场地被描述为一个 $M\\times N(1\\le M,N\\le 500)$ 的网格，每个海拔的数值在 $0$ 到 $10^9$ 之间。\n\n网格中的一些格子被标记为该场地的起点。Moolympics 的组织者想要为每个格子设定一个难度评级。一个起点 $P$ 的难度评级是最小的整数 $D$，满足当一头奶牛从 $P$ 出发，在只能到达相邻的格子，且此格子与当前格子的海拔之差的绝对值不超过 $D$ 才能前往的情况下，至少能到达 $T(1\\le T\\le M\\times N)$ 个格子。两个格子相邻当且仅当一个格子向北、向南、向东或向西走能直接到达另一个格子。\n\n请帮助组织者们为每个起点计算难度评级。", "inputFormat": "第一行三个整数 $M,N,T$。\n\n接下来 $M$ 行，每行输入 $N$ 个整数，表示海拔。\n\n接下来 $M$ 行，每行输入 $N$ 个整数，每个整数为 $0$ 或 $1$，为 $1$ 则表示此网格是一个起点。", "outputFormat": "输出一行一个整数，表示所有起点的难度评级的和（注意到每一个难度评级都在 32-bit 整数的范围内，但是难度评级的和可能不在此范围中）。", "hint": "滑雪场地被描述为一个 $3\\times 5$ 的海拔网格，左上角和右下角的格子被标记为起点。对于每一个起点，我们要能够到达至少 $10$ 个格子。\n\n左上角起点的难度评级是 $4$，右下角起点的难度评级是 $20$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14JAN] Ski Course Rating G", "background": null, "description": "The cross-country skiing course at the winter Moolympics is described by an M x N grid of elevations (1 <= M,N <= 500), each elevation being in the range 0 .. 1,000,000,000.\n\nSome of the cells in this grid are designated as starting points for the course. The organizers of the Moolympics want to assign a difficulty rating to each starting point. The difficulty level of a starting point P should be the minimum possible value of D such that a cow can successfully reach at least T total cells of the grid (1 <= T <= MN), if she starts at P and can only move from cell to adjacent cell if the absolute difference in elevation between the cells is at most D. Two cells are adjacent if one is directly north, south, east, or west of the other.\n\nPlease help the organizers compute the difficulty rating for each starting point.", "inputFormat": "\\* Line 1: The integers M, N, and T.\n\n\\* Lines 2..1+M: Each of these M lines contains N integer elevations.\n\n\\* Lines 2+M..1+2M: Each of these M lines contains N values that are either 0 or 1, with 1 indicating a cell that is a starting point.", "outputFormat": "\\* Line 1: The sum of difficulty ratings of all starting points (note that this may not fit into a 32-bit integer, even though individual difficulty ratings will).", "hint": "The ski course is described by a 3 x 5 grid of elevations. The upper-left and lower-right cells are designated as starting points. From each starting point, we must be able to reach at least 10 cells.\n\nThe difficulty rating of the upper-left starting point is 4, and for the lower-right it is 20.", "locale": "en"}, "zh-CN": {"title": "[USACO14JAN] Ski Course Rating G", "background": null, "description": "冬季 Moolympics 运动会的越野滑雪场地被描述为一个 $M\\times N(1\\le M,N\\le 500)$ 的网格，每个海拔的数值在 $0$ 到 $10^9$ 之间。\n\n网格中的一些格子被标记为该场地的起点。Moolympics 的组织者想要为每个格子设定一个难度评级。一个起点 $P$ 的难度评级是最小的整数 $D$，满足当一头奶牛从 $P$ 出发，在只能到达相邻的格子，且此格子与当前格子的海拔之差的绝对值不超过 $D$ 才能前往的情况下，至少能到达 $T(1\\le T\\le M\\times N)$ 个格子。两个格子相邻当且仅当一个格子向北、向南、向东或向西走能直接到达另一个格子。\n\n请帮助组织者们为每个起点计算难度评级。", "inputFormat": "第一行三个整数 $M,N,T$。\n\n接下来 $M$ 行，每行输入 $N$ 个整数，表示海拔。\n\n接下来 $M$ 行，每行输入 $N$ 个整数，每个整数为 $0$ 或 $1$，为 $1$ 则表示此网格是一个起点。", "outputFormat": "输出一行一个整数，表示所有起点的难度评级的和（注意到每一个难度评级都在 32-bit 整数的范围内，但是难度评级的和可能不在此范围中）。", "hint": "滑雪场地被描述为一个 $3\\times 5$ 的海拔网格，左上角和右下角的格子被标记为起点。对于每一个起点，我们要能够到达至少 $10$ 个格子。\n\n左上角起点的难度评级是 $4$，右下角起点的难度评级是 $20$。", "locale": "zh-CN"}}}
{"pid": "P3102", "type": "P", "difficulty": 5, "samples": [["ABABA \n", "8 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "2014", "USACO", "区间 DP"], "title": "[USACO14FEB] Secret Code S", "background": "", "description": "Farmer John has secret message that he wants to hide from his cows; the message is a string of length at least 2 containing only the characters A..Z.\n\nTo encrypt his message, FJ applies a sequence of \"operations\" to it, where an operation applied to a string S first shortens S by removing either some (but not all) of the initial characters or some (but not all) of the final characters from S, after which the original string S is attached either at the beginning or end.  For example, a single operation to the string ABC could result in eight possible strings:\n\nAABC\nABABC\nBCABC\nCABC\nABCA\nABCAB\nABCBC\nABCC\nGiven the final encrypted string, please count the number of possible ways FJ could have produced this string using one or more repeated operations applied to some source string.  Operations are treated as being distinct even if they give the same encryption of FJ's message.  For example, there are four distinct separate ways to obtain AAA from AA.\n\nPrint your answer out modulo 2014.\n\n农民约翰收到一条的消息，记该消息为长度至少为2，只由大写字母组成的字符串S，他通过一系列操作对S进行加密。\n\n\n他的操作为，删除S的前面或者后面的若干个字符（但不删光整个S），并将剩下的部分连接到原字符串S的前面或者后面。如对于S=‘ABC’，共有8总可能的操作结果：\n\n\nAABC\n\nABABC\n\nBCABC\n\nCABC\n\nABCA\n\nABCAB\n\nABCBC\n\nABCC\n\n给出加密后的目标字符串，请计算共有多少种加密的方案。\n\n\n对于同字符的字符串，加密方案不止一种，比如把AA加密成AAA，共有4种加密方案。将你的答案mod 2014后输出。\n", "inputFormat": "\\* Line 1: A single encrypted string of length at most 100.\n", "outputFormat": "\\* Line 1: The number of ways FJ could have produced this string with one or more successive operations applied to some initial string of length at least 2, written out modulo 2014.  If there are no such ways, output zero.\n", "hint": "Here are the different ways FJ could have produced ABABA:\n\n1. Start with ABA -> AB+ABA\n\n2. Start with ABA -> ABA+BA\n\n3. Start with AB -> AB+A -> AB+ABA\n\n4. Start with AB -> AB+A -> ABA+BA\n\n5. Start with BA -> A+BA -> AB+ABA\n\n6. Start with BA -> A+BA -> ABA+BA\n\n7. Start with ABAB -> ABAB+A\n\n8. Start with BABA -> A+BABA\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14FEB] Secret Code S", "background": "", "description": "Farmer John has a secret message he wants to hide from his cows; the message is a string S of length at least 2 containing only the uppercase letters A–Z.\n\nTo encrypt S, FJ applies one or more operations. In a single operation on a string S, he first shortens S by removing some (but not all) of the initial characters or some (but not all) of the final characters of S, after which the original string S is attached either to the beginning or the end. For example, applying a single operation to S = ABC can yield the following eight strings:\n\nAABC\nABABC\nBCABC\nCABC\nABCA\nABCAB\nABCBC\nABCC\n\nGiven the final encrypted string, please count the number of possible ways FJ could have produced this string using one or more operations applied to some source string. Operations are treated as distinct even if they give the same encryption of FJ’s message. For example, there are four distinct ways to obtain AAA from AA. Print your answer modulo 2014.", "inputFormat": "- Line 1: A single encrypted string of length at most 100.", "outputFormat": "- Line 1: The number of ways FJ could have produced this string with one or more successive operations applied to some initial string of length at least 2, written modulo 2014. If there are no such ways, output 0.", "hint": "Here are the different ways FJ could have produced ABABA:\n\n1. Start with ABA -> AB+ABA.\n2. Start with ABA -> ABA+BA.\n3. Start with AB -> AB+A -> AB+ABA.\n4. Start with AB -> AB+A -> ABA+BA.\n5. Start with BA -> A+BA -> AB+ABA.\n6. Start with BA -> A+BA -> ABA+BA.\n7. Start with ABAB -> ABAB+A.\n8. Start with BABA -> A+BABA.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO14FEB] Secret Code S", "background": "", "description": "Farmer John has secret message that he wants to hide from his cows; the message is a string of length at least 2 containing only the characters A..Z.\n\nTo encrypt his message, FJ applies a sequence of \"operations\" to it, where an operation applied to a string S first shortens S by removing either some (but not all) of the initial characters or some (but not all) of the final characters from S, after which the original string S is attached either at the beginning or end.  For example, a single operation to the string ABC could result in eight possible strings:\n\nAABC\nABABC\nBCABC\nCABC\nABCA\nABCAB\nABCBC\nABCC\nGiven the final encrypted string, please count the number of possible ways FJ could have produced this string using one or more repeated operations applied to some source string.  Operations are treated as being distinct even if they give the same encryption of FJ's message.  For example, there are four distinct separate ways to obtain AAA from AA.\n\nPrint your answer out modulo 2014.\n\n农民约翰收到一条的消息，记该消息为长度至少为2，只由大写字母组成的字符串S，他通过一系列操作对S进行加密。\n\n\n他的操作为，删除S的前面或者后面的若干个字符（但不删光整个S），并将剩下的部分连接到原字符串S的前面或者后面。如对于S=‘ABC’，共有8总可能的操作结果：\n\n\nAABC\n\nABABC\n\nBCABC\n\nCABC\n\nABCA\n\nABCAB\n\nABCBC\n\nABCC\n\n给出加密后的目标字符串，请计算共有多少种加密的方案。\n\n\n对于同字符的字符串，加密方案不止一种，比如把AA加密成AAA，共有4种加密方案。将你的答案mod 2014后输出。\n", "inputFormat": "\\* Line 1: A single encrypted string of length at most 100.\n", "outputFormat": "\\* Line 1: The number of ways FJ could have produced this string with one or more successive operations applied to some initial string of length at least 2, written out modulo 2014.  If there are no such ways, output zero.\n", "hint": "Here are the different ways FJ could have produced ABABA:\n\n1. Start with ABA -> AB+ABA\n\n2. Start with ABA -> ABA+BA\n\n3. Start with AB -> AB+A -> AB+ABA\n\n4. Start with AB -> AB+A -> ABA+BA\n\n5. Start with BA -> A+BA -> AB+ABA\n\n6. Start with BA -> A+BA -> ABA+BA\n\n7. Start with ABAB -> ABAB+A\n\n8. Start with BABA -> A+BABA\n", "locale": "zh-CN"}}}
{"pid": "P3103", "type": "P", "difficulty": 6, "samples": [["3 \n2 5 \n3 10 \n1 5 \n", "19 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "USACO", "平衡树"], "title": "[USACO14FEB]Airplane Broading G", "background": "", "description": "FJ's cows have decided to take a vacation, and have miraculously managed to find an airline willing to sell them tickets. When they arrive at the airport and start boarding their plane, they face an interesting problem, however.\n\nThe airplane has $N$ seats, which we model as the points $x=1$ through $x=N$ on the number line. All N cows $(1 \\le N \\le 200,000)$ are standing in line waiting to get to their seats. Cow $N$ is at position $x=0$, Cow $N-1$ is at position $x=-1$, and so on. Cow i has been assigned to Seat $S_i$, where $S_1$,...,$S_N$ is a permutation of $1$,...,$N$.\n\nAt each time step, each cow takes a step to the right if she can. When cow $i$ reaches her seat $S_i$, she will stop to put her baggage in the overhead bin, which takes $T_i$ seconds, and then sit down. For those $T_i$ steps, the cow behind her (if there is one) is blocked from moving forward. If there is a line of cows behind her, the line is effectively blocked as well.\n\nHow long will it take for all the cows to sit down?\n\nThe sum of $T_i$ for all cows will be less than $1,000,000,000$.", "inputFormat": "* Line $1$: A single integer, $N$.\n\n* Lines $2$..$N+1$: Two space-separated integers, $S_i$ and $T_i$.", "outputFormat": "* Line $1$: A single line indicating the amount of time it takes to seat all cows.", "hint": "Initially, the cows are situated like this:\n\ncows -> $123$\n\n$123$ <- seats\n\nwith cow $1$ trying to get to seat $2$, cow $2$ trying to get to seat $3$, and cow $3$ trying to get to seat $1$.\n\nAfter one step, they will all move $1$ to the right and cow $3$ will reach her seat:\n\n```123 123``` Cow $3$ takes $5$ seconds to sit down, at which point she effectively disappears.\n\n```12 123``` It takes $3$ more seconds for cows $1$ and $2$ to reach their desired seats:\n\n```12 123``` It takes $5$ seconds for cow $1$ to sit down and $10$ seconds for cow $2$ to sit down, so that's $10$ seconds total.\n\nIn total this took $1 + 5 + 3 + 10 = 19$ seconds.", "locale": "en", "translations": {"en": {"title": "[USACO14FEB]Airplane Broading G", "background": "", "description": "FJ's cows have decided to take a vacation, and have miraculously managed to find an airline willing to sell them tickets. When they arrive at the airport and start boarding their plane, they face an interesting problem, however.\n\nThe airplane has $N$ seats, which we model as the points $x=1$ through $x=N$ on the number line. All N cows $(1 \\le N \\le 200,000)$ are standing in line waiting to get to their seats. Cow $N$ is at position $x=0$, Cow $N-1$ is at position $x=-1$, and so on. Cow i has been assigned to Seat $S_i$, where $S_1$,...,$S_N$ is a permutation of $1$,...,$N$.\n\nAt each time step, each cow takes a step to the right if she can. When cow $i$ reaches her seat $S_i$, she will stop to put her baggage in the overhead bin, which takes $T_i$ seconds, and then sit down. For those $T_i$ steps, the cow behind her (if there is one) is blocked from moving forward. If there is a line of cows behind her, the line is effectively blocked as well.\n\nHow long will it take for all the cows to sit down?\n\nThe sum of $T_i$ for all cows will be less than $1,000,000,000$.", "inputFormat": "* Line $1$: A single integer, $N$.\n\n* Lines $2$..$N+1$: Two space-separated integers, $S_i$ and $T_i$.", "outputFormat": "* Line $1$: A single line indicating the amount of time it takes to seat all cows.", "hint": "Initially, the cows are situated like this:\n\ncows -> $123$\n\n$123$ <- seats\n\nwith cow $1$ trying to get to seat $2$, cow $2$ trying to get to seat $3$, and cow $3$ trying to get to seat $1$.\n\nAfter one step, they will all move $1$ to the right and cow $3$ will reach her seat:\n\n```123 123``` Cow $3$ takes $5$ seconds to sit down, at which point she effectively disappears.\n\n```12 123``` It takes $3$ more seconds for cows $1$ and $2$ to reach their desired seats:\n\n```12 123``` It takes $5$ seconds for cow $1$ to sit down and $10$ seconds for cow $2$ to sit down, so that's $10$ seconds total.\n\nIn total this took $1 + 5 + 3 + 10 = 19$ seconds.", "locale": "en"}, "zh-CN": {"title": "[USACO14FEB] Airplane Boarding G", "background": null, "description": "想象一下飞机有 $N$ 个座位，$N$ 个座位相当于数轴上的 $1$ 至 $N$ 共 $N$ 个整点，第 $1$ 个座位在整点1处，第 $2$ 个座位在整点2处，……，第 $N$ 个座位在整点 $N$ 处。\n\n\n有 $N$ 个奶牛排好队要登机，第 $N$ 头奶牛在数轴的整点 $0$ 处，第 $N−1$ 头奶牛在数轴的整点 $−1$ 处，……，第 $1$ 头奶牛在数轴的整点 $−N+1$ 处。第 $i$ 头奶牛的座位号是 $S_i$。注意：每头奶牛都有唯一的一个座位，不会出现多头奶牛有相同的座位号。\n\n\n在每一秒钟，奶牛会向右移动一步到达下一个整点，前提是没有奶牛挡住它。当第 $i$ 头奶牛到达它的座位 $S_i$ 时，它需要花费 $T_i$ 秒去把行李放到头顶的行李架上，然后坐到自己的位置上，在此过程中，由于飞机通道很窄，所以在第 $i$ 头奶牛坐到自己座位之前，在它左边的所有奶牛都不能动，要等奶牛 $i$ 放好行李坐好后才能动。\n\n\n现在的问题是，至少要多少秒之后，所有的奶牛都能做到自己的座位上？", "inputFormat": "第一行：一个整数 $N (1 \\le N \\le 2 \\times 10^5)$。\n\n第 $2$ 行到第 $N+1$ 行：每行两个整数 $S_i, T_i$。\n\n保证 $S_1 \\sim S_n$ 是 $1 \\sim n$ 的排列，所有 $T_i$ 之和 $\\le 10^9$。", "outputFormat": "一行一个整数，表示使所有的奶牛都能做到自己的座位上的最短时间。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P3104", "type": "P", "difficulty": 5, "samples": [["4 \n1 \n2 \n2 \n1 \n3 \n", "3 \n1 \n4 \n5 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "图论", "贪心", "2014", "二分", "USACO", "生成树"], "title": "[USACO14MAR] Counting Friends G", "background": null, "description": "FJ 的 $N(2 \\le N \\le 500)$ 头奶牛加入了社交网络“牛书”。\n\n每一头奶牛在牛书上都有一个或多个朋友，于是 FJ 做了一个列表，列出了每头奶牛的朋友数量。但在这一过程中，他错误地将一个额外的数加入了列表（所以最终的列表包含 $N+1$ 个数，而不是预期的 $N$ 个数）。\n\n请帮助 FJ 找出哪一个数可能是错误的那个数。", "inputFormat": "第 $1$ 行：一个整数 $N$。\n\n第 $2$ 至 $N+2$ 行：共 $N+1$ 个数，每一行表示一头奶牛的朋友数量，也有可能是错误的那个数。", "outputFormat": "第 $1$ 行：一个整数 $K$，表示有多少个数可能是错误的（若 $K=0$，表示移出任意一个数都无法产生一个可行的朋友配对）。\n\n第 $2$ 至 $K+1$ 行：每一行包括一个 FJ 列表的编号，对应的数可能是那个错误的数。也就是说，这个数字被移除可使得剩余的 $N$ 个数字成为一组合法的朋友关系。**编号按从小到大顺序输出。**", "hint": "#### 样例解释\n\nFJ 有四头奶牛。其中两头有一个朋友，两头有两个朋友，一头有三个朋友（当然，其中一个数字是错误的，不应出现在列表上）。\n\n移除 FJ 列表上的第一个数字，余下的序列是 $2,2,1,3$，是合法的。如果我们把四头奶牛命名为 $A,B,C,D$，就有 $(A,B),(A,C),(A,D),(B,C)$ 的配对方式符合要求。同样的，移除列表中的第四、第五个数字，也可以形成合法的朋友关系，移除数字 $2$ 则无法形成合法的朋友关系。容易发现，若移除了数字 $2$，剩余的数字为奇数，显然无法形成合法的朋友关系。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO14MAR] Counting Friends G", "background": "", "description": "FJ’s $N(2 \\le N \\le 500)$ cows have joined the social network \"Cowbook\".\n\nEach cow has one or more friends on Cowbook, so FJ made a list of each cow’s number of friends. During this process, however, he mistakenly included one extra number in the list (so the final list contains $N+1$ numbers, instead of the expected $N$).\n\nPlease help FJ determine which numbers could be the erroneous one.", "inputFormat": "Line 1: An integer $N$.\n\nLines 2 to $N+2$: A total of $N+1$ integers, each line giving the number of friends of a cow, possibly including the erroneous one.", "outputFormat": "Line 1: An integer $K$, the number of values that could be erroneous (if $K=0$, it means that removing any single number cannot produce a feasible friendship configuration).\n\nLines 2 to $K+1$: Each line contains an index in FJ’s list whose number could be the erroneous one. That is, removing that number makes the remaining $N$ numbers form a valid set of friendships. Output the indices in increasing order.", "hint": "Sample explanation:\n\nFJ has four cows. Two of them have one friend, two have two friends, and one has three friends (of course, one of these numbers is wrong and should not be on the list).\n\nIf we remove the first number in FJ’s list, the remaining sequence is $2, 2, 1, 3$, which is valid. If we name the four cows $A, B, C, D$, then the pairings $(A,B),(A,C),(A,D),(B,C)$ satisfy the requirements. Similarly, removing the fourth or fifth number also yields a valid friendship configuration. However, removing a $2$ cannot yield a valid configuration. It is easy to see that if a $2$ is removed, the sum of the remaining numbers is odd, which clearly cannot form a valid friendship configuration.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO14MAR] Counting Friends G", "background": null, "description": "FJ 的 $N(2 \\le N \\le 500)$ 头奶牛加入了社交网络“牛书”。\n\n每一头奶牛在牛书上都有一个或多个朋友，于是 FJ 做了一个列表，列出了每头奶牛的朋友数量。但在这一过程中，他错误地将一个额外的数加入了列表（所以最终的列表包含 $N+1$ 个数，而不是预期的 $N$ 个数）。\n\n请帮助 FJ 找出哪一个数可能是错误的那个数。", "inputFormat": "第 $1$ 行：一个整数 $N$。\n\n第 $2$ 至 $N+2$ 行：共 $N+1$ 个数，每一行表示一头奶牛的朋友数量，也有可能是错误的那个数。", "outputFormat": "第 $1$ 行：一个整数 $K$，表示有多少个数可能是错误的（若 $K=0$，表示移出任意一个数都无法产生一个可行的朋友配对）。\n\n第 $2$ 至 $K+1$ 行：每一行包括一个 FJ 列表的编号，对应的数可能是那个错误的数。也就是说，这个数字被移除可使得剩余的 $N$ 个数字成为一组合法的朋友关系。**编号按从小到大顺序输出。**", "hint": "#### 样例解释\n\nFJ 有四头奶牛。其中两头有一个朋友，两头有两个朋友，一头有三个朋友（当然，其中一个数字是错误的，不应出现在列表上）。\n\n移除 FJ 列表上的第一个数字，余下的序列是 $2,2,1,3$，是合法的。如果我们把四头奶牛命名为 $A,B,C,D$，就有 $(A,B),(A,C),(A,D),(B,C)$ 的配对方式符合要求。同样的，移除列表中的第四、第五个数字，也可以形成合法的朋友关系，移除数字 $2$ 则无法形成合法的朋友关系。容易发现，若移除了数字 $2$，剩余的数字为奇数，显然无法形成合法的朋友关系。", "locale": "zh-CN"}}}
{"pid": "P3105", "type": "P", "difficulty": 5, "samples": [["5 \n8 W \n11 S \n3 W \n10 W \n5 S \n", "7 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "USACO", "枚举", "哈希 hashing", "前缀和"], "title": "[USACO14OPEN] Fair Photography S", "background": "", "description": "FJ's N cows (2 <= N <= 100,000) are standing at various positions along a long one-dimensional fence.  The ith cow is standing at position x\\_i (an integer in the range 0...1,000,000,000) and is either a plain white cow or a spotted cow.  No two cows occupy the same position, and there is at least one white cow.\n\n\nFJ wants to take a photo of a contiguous interval of cows for the county fair, but in fairness to his different cows, he wants to ensure there are equal numbers of white and spotted cows in the photo.  FJ wants to determine the maximum size of such a fair photo, where the size of a photo is the difference between the maximum and minimum positions of the cows in the photo.\n\n\nTo give himself an even better chance of taking a larger photo, FJ has with him a bucket of paint that he can use to paint spots on an arbitrary subset of his white cows of his choosing, effectively turning them into spotted cows.  Please determine the largest size of a fair photo FJ can take, given that FJ has the option of painting some of his white cows (of course, he does not need to paint any of the white cows if he decides this is better).\n", "inputFormat": "\\* Line 1: The integer N.\n\n\\* Lines 2..1+N: Line i+1 contains x\\_i and either W (for a white cow) or S (for a spotted cow).\n", "outputFormat": "\\* Line 1: The maximum size of a fair photo FJ can take, after possibly painting some of his white cows to make them spotted.\n", "hint": "There are 5 cows.  One of them is a white cow at position 8, and so on.\n\n\nFJ takes a photo of the cows from positions 3 to positions 10.  There are 4 cows in this range -- 3 white and 1 spotted -- so he needs to paint one of the white cows to make it spotted.\n", "locale": "en", "translations": {"en": {"title": "[USACO14OPEN] Fair Photography S", "background": "", "description": "FJ's N cows (2 <= N <= 100,000) are standing at various positions along a long one-dimensional fence.  The ith cow is standing at position x\\_i (an integer in the range 0...1,000,000,000) and is either a plain white cow or a spotted cow.  No two cows occupy the same position, and there is at least one white cow.\n\n\nFJ wants to take a photo of a contiguous interval of cows for the county fair, but in fairness to his different cows, he wants to ensure there are equal numbers of white and spotted cows in the photo.  FJ wants to determine the maximum size of such a fair photo, where the size of a photo is the difference between the maximum and minimum positions of the cows in the photo.\n\n\nTo give himself an even better chance of taking a larger photo, FJ has with him a bucket of paint that he can use to paint spots on an arbitrary subset of his white cows of his choosing, effectively turning them into spotted cows.  Please determine the largest size of a fair photo FJ can take, given that FJ has the option of painting some of his white cows (of course, he does not need to paint any of the white cows if he decides this is better).\n", "inputFormat": "\\* Line 1: The integer N.\n\n\\* Lines 2..1+N: Line i+1 contains x\\_i and either W (for a white cow) or S (for a spotted cow).\n", "outputFormat": "\\* Line 1: The maximum size of a fair photo FJ can take, after possibly painting some of his white cows to make them spotted.\n", "hint": "There are 5 cows.  One of them is a white cow at position 8, and so on.\n\n\nFJ takes a photo of the cows from positions 3 to positions 10.  There are 4 cows in this range -- 3 white and 1 spotted -- so he needs to paint one of the white cows to make it spotted.\n", "locale": "en"}, "zh-CN": {"title": "[USACO14OPEN] Fair Photography S", "background": null, "description": "FJ 的 $N$ 头奶牛站在一条长长的一维栅栏的不同位置上。第 $i$ 头奶牛站在位置非负整数 $x_i$ 上，并且要么是纯白色奶牛，要么是斑点奶牛。没有两头奶牛占据相同的位置，并且至少有一头白色奶牛。\n\nFJ 想为县集市拍摄一张连续区间内的奶牛照片，但为了公平对待他的不同奶牛，他希望确保照片中白色奶牛和斑点奶牛的数量相等。FJ 想要确定这样一张公平照片的最大尺寸，其中照片的尺寸是照片中奶牛的最大位置和最小位置之间的差。\n\n为了给自己更大的机会拍摄更大的照片，FJ 带了一桶油漆，他可以用来在他选择的任意一部分白色奶牛上画上斑点，有效地将它们变成斑点奶牛。请确定 FJ 可以拍摄的公平照片的最大尺寸，前提是 FJ 可以选择给一些白色奶牛涂上斑点（当然，如果他认为这样更好，他不需要给任何白色奶牛涂上斑点）。", "inputFormat": "第 $1$ 行，表示整数 $N$。\n\n第 $2$ 到 $N+1$ 行，其中第 $i+1$ 行包含 $x_i$ 和 `W`（表示白色奶牛）或 `S`（表示斑点奶牛）。", "outputFormat": "输出 $1$ 行，表示 FJ 在可能给一些白色奶牛涂上斑点后可以拍摄的公平照片的最大尺寸。", "hint": "样例 $1$ 解释：\n\n有 $5$ 头奶牛。其中一头是位于位置 $8$ 的白色奶牛，依此类推。\n\nFJ 拍摄了从位置 $3$ 到位置 $10$ 的奶牛照片。在这个范围内有 $4$ 头奶牛——$3$ 头白色和 $1$ 头斑点——所以他需要将其中一头白色奶牛涂成斑点。\n\n数据约定:\n\n$0 \\le x_i \\le 10^9$\n\n$2 \\le N \\le 100000$\n\n（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P3106", "type": "P", "difficulty": 5, "samples": [["5 7 \n3 4 7 1 \n1 3 2 20 \n1 4 17 18 \n4 5 25 3 \n1 2 10 1 \n3 5 4 14 \n2 4 6 5 \n", "1 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "USACO", "最短路"], "title": "[USACO14OPEN] Dueling GPSs S", "background": "", "description": "Farmer John has recently purchased a new car online, but in his haste he accidentally clicked the \"Submit\" button twice when selecting extra features for the car, and as a result the car ended up equipped with two GPS navigation systems!  Even worse, the two systems often make conflicting decisions about the route that FJ should take.\n\nThe map of the region in which FJ lives consists of N intersections (2 <= N <= 10,000) and M directional roads (1 <= M <= 50,000).  Road i connects intersections A\\_i (1 <= A\\_i <= N) and B\\_i (1 <= B\\_i <= N). Multiple roads could connect the same pair of intersections, and a bi-directional road (one permitting two-way travel) is represented by two separate directional roads in opposite orientations.  FJ's house is located at intersection 1, and his farm is located at intersection N.  It is possible to reach the farm from his house by traveling along a series of directional roads.\n\nBoth GPS units are using the same underlying map as described above; however, they have different notions for the travel time along each road. Road i takes P\\_i units of time to traverse according to the first GPS unit, and Q\\_i units of time to traverse according to the second unit (each travel time is an integer in the range 1..100,000).\n\nFJ wants to travel from his house to the farm.  However, each GPS unit complains loudly any time FJ follows a road (say, from intersection X to intersection Y) that the GPS unit believes not to be part of a shortest route from X to the farm (it is even possible that both GPS units can complain, if FJ takes a road that neither unit likes).\n\nPlease help FJ determine the minimum possible number of total complaints he can receive if he chooses his route appropriately.  If both GPS units complain when FJ follows a road, this counts as +2 towards the total.\n", "inputFormat": "\\* Line 1: The integers N and M.\n\nLine i describes road i with four integers: A\\_i B\\_i P\\_i Q\\_i.\n", "outputFormat": "\\* Line 1: The minimum total number of complaints FJ can receive if he routes himself from his house to the farm optimally.\n", "hint": "There are 5 intersections and 7 directional roads.  The first road connects from intersection 3 to intersection 4; the first GPS thinks this road takes 7 units of time to traverse, and the second GPS thinks it takes 1 unit of time, etc.\n\n\nIf FJ follows the path 1 -> 2 -> 4 -> 5, then the first GPS complains on the 1 -> 2 road (it would prefer the 1 -> 3 road instead).  However, for the rest of the route 2 -> 4 -> 5, both GPSs are happy, since this is a shortest route from 2 to 5 according to each GPS.\n", "locale": "en", "translations": {"en": {"title": "[USACO14OPEN] Dueling GPSs S", "background": "", "description": "Farmer John has recently purchased a new car online, but in his haste he accidentally clicked the \"Submit\" button twice when selecting extra features for the car, and as a result the car ended up equipped with two GPS navigation systems!  Even worse, the two systems often make conflicting decisions about the route that FJ should take.\n\nThe map of the region in which FJ lives consists of N intersections (2 <= N <= 10,000) and M directional roads (1 <= M <= 50,000).  Road i connects intersections A\\_i (1 <= A\\_i <= N) and B\\_i (1 <= B\\_i <= N). Multiple roads could connect the same pair of intersections, and a bi-directional road (one permitting two-way travel) is represented by two separate directional roads in opposite orientations.  FJ's house is located at intersection 1, and his farm is located at intersection N.  It is possible to reach the farm from his house by traveling along a series of directional roads.\n\nBoth GPS units are using the same underlying map as described above; however, they have different notions for the travel time along each road. Road i takes P\\_i units of time to traverse according to the first GPS unit, and Q\\_i units of time to traverse according to the second unit (each travel time is an integer in the range 1..100,000).\n\nFJ wants to travel from his house to the farm.  However, each GPS unit complains loudly any time FJ follows a road (say, from intersection X to intersection Y) that the GPS unit believes not to be part of a shortest route from X to the farm (it is even possible that both GPS units can complain, if FJ takes a road that neither unit likes).\n\nPlease help FJ determine the minimum possible number of total complaints he can receive if he chooses his route appropriately.  If both GPS units complain when FJ follows a road, this counts as +2 towards the total.\n", "inputFormat": "\\* Line 1: The integers N and M.\n\nLine i describes road i with four integers: A\\_i B\\_i P\\_i Q\\_i.\n", "outputFormat": "\\* Line 1: The minimum total number of complaints FJ can receive if he routes himself from his house to the farm optimally.\n", "hint": "There are 5 intersections and 7 directional roads.  The first road connects from intersection 3 to intersection 4; the first GPS thinks this road takes 7 units of time to traverse, and the second GPS thinks it takes 1 unit of time, etc.\n\n\nIf FJ follows the path 1 -> 2 -> 4 -> 5, then the first GPS complains on the 1 -> 2 road (it would prefer the 1 -> 3 road instead).  However, for the rest of the route 2 -> 4 -> 5, both GPSs are happy, since this is a shortest route from 2 to 5 according to each GPS.\n", "locale": "en"}, "zh-CN": {"title": "[USACO14OPEN] Dueling GPSs S", "background": null, "description": "农夫约翰最近在网上购买了一辆新车，但由于匆忙，他在选择汽车的额外功能时不小心点击了两次“提交” 按钮，结果车上配备了两个 GPS 导航系统！更糟糕的是，这两个系统经常对约翰应该走的路线做出相互矛盾的决定。\n\n约翰所在地区的地图由 $N$ 个交叉路口 $(2 \\le N \\le 10,000)$ 和 $M$ 条单向道路 $(1 \\le M \\le 50,000)$ 组成。道路 $i$ 连接交叉路口 $A_i(1 \\le A_i \\le N)$ 和 $B_i(1 \\le B_i \\le N)$。同一对交叉路口之间可能有多条道路连接，双向道路（允许双向通行）由两个相反方向的单向道路表示。约翰的家位于交叉路口 $1$，他的农场位于交叉路口 $N$。可以通过沿着一系列单向道路从他的家到达农场。\n\n两个 GPS 单元使用的是上述相同的基础地图；然而，它们对每条道路的行驶时间有不同的看法。第一个 GPS 单元认为，道路 $i$ 需要 $P_i$ 个时间单位来行驶，而第二个单元认为，道路 $i$ 需要 $Q_i$ 个时间单位来行驶（每个行驶时间是范围在 $1$ 到 $10^5$ 的整数）。\n\n约翰想从家里到农场。然而，每当约翰走一条（比如，从交叉路口 $X$ 到交叉路口 $Y$）GPS 单元认为不是从 $X$ 到农场的最短路线的一部分的道路时， GPS 单元就会大声抱怨（如果约翰走的道路两个 GPS 单元都不喜欢，两个 GPS 单元都会抱怨）。\n\n请帮助约翰确定如果他适当地选择路线，他可以收到的最少总抱怨次数。如果约翰走的道路让两个 GPS 单元都抱怨，这将计为两次抱怨。", "inputFormat": "第 $1$ 行：整数 $N$ 和 $M$。\n\n接下来 $M$ 行，第 $i+1$ 行描述道路 $i$，有四个整数：$A_i,B_i,P_i,Q_i$。", "outputFormat": "共一行，如果约翰从家到农场的路线选择最优，他可以收到的最少总抱怨次数。", "hint": "有 $5$ 个交叉路口和 $7$ 条单向道路。第一条道路从交叉路口 $3$ 连接到交叉路口 $4$；第一个 GPS 认为这条路需要 $7$ 个时间单位来行驶，而第二个 GPS 认为需要 $1$ 个时间单位，等等。\n\n如果约翰走 $1 \\to 2 \\to 4 \\to 5$ 的路径，那么第一个 GPS 会在 $1 \\to 2$ 的道路上抱怨（它更喜欢 $1 \\to 3$ 的道路）。然而，对于路径的其余部分 $2 \\to 4 \\to 5$，两个 GPS 都很满意，因为这对于每个 GPS 来说都是从 $2$ 到 $5$ 的最短路径。", "locale": "zh-CN"}}}
{"pid": "P3107", "type": "P", "difficulty": 6, "samples": [["110 133 \n", "14 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "USACO", "数位 DP"], "title": "[USACO14OPEN] Odometer S", "background": "", "description": "Farmer John's cows are on a road trip!  The odometer on their car displays an integer mileage value, starting at X (100 <= X <= 10^18) miles at the beginning of their trip and ending at Y (X <= Y <= 10^18) miles at the end of their trip.  Whenever the odometer displays an 'interesting' number (including at the start and end of the trip) the cows will moo.  A number is 'interesting' if when you look at all its digits except for leading zeros, at least half of these should be the same.  For example, the numbers 3223 and 110 are interesting, while the numbers 97791 and 123 are not.\n\nHelp FJ count how many times the cows will moo during the trip.", "inputFormat": "\\* Line 1: The first line will contain two integers, X and Y, separated by a space.\n", "outputFormat": "\\* Line 1: A single integer containing how many times the cows will moo during the trip.\n", "hint": "The trip starts with the odometer at 110 and ends at 133. \n\nThe cows moo when the odometer reads 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 121, 122, 131, and 133. \n\n", "locale": "en", "translations": {"en": {"title": "[USACO14OPEN] Odometer S", "background": "", "description": "Farmer John's cows are on a road trip!  The odometer on their car displays an integer mileage value, starting at X (100 <= X <= 10^18) miles at the beginning of their trip and ending at Y (X <= Y <= 10^18) miles at the end of their trip.  Whenever the odometer displays an 'interesting' number (including at the start and end of the trip) the cows will moo.  A number is 'interesting' if when you look at all its digits except for leading zeros, at least half of these should be the same.  For example, the numbers 3223 and 110 are interesting, while the numbers 97791 and 123 are not.\n\nHelp FJ count how many times the cows will moo during the trip.", "inputFormat": "\\* Line 1: The first line will contain two integers, X and Y, separated by a space.\n", "outputFormat": "\\* Line 1: A single integer containing how many times the cows will moo during the trip.\n", "hint": "The trip starts with the odometer at 110 and ends at 133. \n\nThe cows moo when the odometer reads 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 121, 122, 131, and 133. \n\n", "locale": "en"}, "zh-CN": {"title": "[USACO14OPEN] Odometer S", "background": "", "description": "农夫约翰的奶牛们正在进行一次公路旅行！他们的车上的里程表显示一个整数的里程值，旅行开始时为 $X$（$100 \\leq X \\leq 10^{18}$）英里，结束时为 $Y$（$X \\leq Y \\leq 10^{18}$）英里。每当里程表显示一个“有趣”的数字时（包括旅行的开始和结束），奶牛们就会哞叫。如果一个数字在去掉前导零后，其至少一半的数字是相同的，那么这个数字就是“有趣”的。例如，数字 3223 和 110 是有趣的，而数字 97791 和 123 则不是。\n\n帮助农夫约翰计算在旅行中奶牛们会哞叫多少次。", "inputFormat": "* 第 1 行：第一行包含两个整数 $X$ 和 $Y$，用空格分隔。", "outputFormat": "* 第 1 行：一个整数，表示旅行中奶牛们会哞叫的次数。", "hint": "旅行开始时里程表为 110，结束时为 133。\n\n当里程表显示 110、111、112、113、114、115、116、117、118、119、121、122、131 和 133 时，奶牛们会哞叫。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
