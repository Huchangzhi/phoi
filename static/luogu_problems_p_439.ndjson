{"pid": "P9900", "type": "P", "difficulty": 3, "samples": [["4\n0 1\n0 1\n0 1\n0 1", "2"], ["6\n1 0\n1 0\n0 1\n0 1\n1 0\n1 0", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心"], "title": "『PG2』消除萝卜 B", "background": "", "description": "有 $n\\times 2$ 的两列萝卜，萝卜分白萝卜和红萝卜，我们使用 $a_{i,j}=0/1$ 来表示第 $i$ 行第 $j$ 个萝卜是白萝卜还是红萝卜。\n\n你每次可以花 $1$ 的代价，选定一个有萝卜的位置，并将这个萝卜所在的由同种颜色萝卜所构成的四连通极大连通块的萝卜全部拿走，然后一个在第 $i$ 行的萝卜如果其对应的第 $i-1$ 行的位置没有萝卜，就会掉落至第 $i-1$ 行。\n\n同时你也可以花初始为 $0$ 的代价，选定 $k=1/2$ 而将第 $k$ 列的所有萝卜上移（$a_{i,k}\\to a_{i+1,k}$），并将一个红萝卜即 $1$ 放在第一行第 $k$ 个（$1\\to a_{1,k}$），此后这个操作代价 $+1$。 \n\n请问拿走所有萝卜的最小代价是多少。", "inputFormat": "第一行包含一个正整数 $n$ 表示有多少行萝卜。\n\n接下来 $n$ 行，第 $i$ 行两个整数分别为 $a_{i,1},a_{i,2}$。", "outputFormat": "一行一个整数表示你的答案", "hint": "对于所有测试点 $a_{i,j}\\in \\{0,1\\}$，$1\\leq n\\leq 5\\times 10^6$，保证 $a_{i,1}\\neq a_{i,2}$。\n\n**本题使用捆绑测试**  \n$\\sf subtask \\ 1: n\\leq10 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 30pts $   \n$\\sf subtask \\ 2: n\\leq100 \\ \\ \\ \\ \\ \\ \\ \\ \\ 20 pts$   \n$\\sf subtask \\ 3: n\\leq5000 \\ \\ \\ \\ \\ \\ \\ 20 pts$   \n$\\sf subtask \\ 4: n\\leq5000000 \\ 30pts$   \n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『PG2』消除萝卜 B", "background": "", "description": "有 $n\\times 2$ 的两列萝卜，萝卜分白萝卜和红萝卜，我们使用 $a_{i,j}=0/1$ 来表示第 $i$ 行第 $j$ 个萝卜是白萝卜还是红萝卜。\n\n你每次可以花 $1$ 的代价，选定一个有萝卜的位置，并将这个萝卜所在的由同种颜色萝卜所构成的四连通极大连通块的萝卜全部拿走，然后一个在第 $i$ 行的萝卜如果其对应的第 $i-1$ 行的位置没有萝卜，就会掉落至第 $i-1$ 行。\n\n同时你也可以花初始为 $0$ 的代价，选定 $k=1/2$ 而将第 $k$ 列的所有萝卜上移（$a_{i,k}\\to a_{i+1,k}$），并将一个红萝卜即 $1$ 放在第一行第 $k$ 个（$1\\to a_{1,k}$），此后这个操作代价 $+1$。 \n\n请问拿走所有萝卜的最小代价是多少。", "inputFormat": "第一行包含一个正整数 $n$ 表示有多少行萝卜。\n\n接下来 $n$ 行，第 $i$ 行两个整数分别为 $a_{i,1},a_{i,2}$。", "outputFormat": "一行一个整数表示你的答案", "hint": "对于所有测试点 $a_{i,j}\\in \\{0,1\\}$，$1\\leq n\\leq 5\\times 10^6$，保证 $a_{i,1}\\neq a_{i,2}$。\n\n**本题使用捆绑测试**  \n$\\sf subtask \\ 1: n\\leq10 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 30pts $   \n$\\sf subtask \\ 2: n\\leq100 \\ \\ \\ \\ \\ \\ \\ \\ \\ 20 pts$   \n$\\sf subtask \\ 3: n\\leq5000 \\ \\ \\ \\ \\ \\ \\ 20 pts$   \n$\\sf subtask \\ 4: n\\leq5000000 \\ 30pts$   \n\n", "locale": "zh-CN"}}}
{"pid": "P9901", "type": "P", "difficulty": 5, "samples": [["5 7 1 5\n1 2 1\n2 3 1\n3 4 1\n4 5 1\n2 4 1\n1 4 1\n1 5 1", "2"]], "limits": {"time": [550, 550, 550, 550, 550, 550, 550, 550, 550, 550], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "贪心", "网络流", "拓扑排序"], "title": "『PG2』弯曲半平面直线同向图最大流", "background": "", "description": "若能将有向图 $G=(V,E)$ 画在平面上，使得点在一条直线上，任意两条边（可以为弯曲的弧线）仅在重合顶点处相交，且边上的所有点都在直线同侧，且每条边的起点到终点的射线的方向相同，则称 $G$ 是弯曲半平面直线同向图。对于一个弯曲半平面直线同向图给定 $n$ 个点，$m$ 条有向边，给定每条边的容量，求从点 $s$ 到点 $t$ 的最大流。", "inputFormat": "第一行包含四个正整数 $n$、$m$、$s$、$t$，用空格分隔，分别表示点的个数、有向边的个数、源点序号、汇点序号。\n\n接下来 $m$ 行每行包含三个正整数 $u_i$、$v_i$、$c_i$，用空格分隔，表示第 $i$ 条有向边从 $u_i$ 出发，到达 $v_i$，容量为 $c_i$。\n\n", "outputFormat": "一个整数，表示 $s$ 到 $t$ 的最大流。", "hint": "无重边自环。\n\n对于 $30\\%$ 的数据 $n\\leq 10^3$。\n\n对于 $70\\%$ 的数据 $n\\leq 10^5$。\n\n对于 $100\\%$ 的数据 $2\\leq n\\leq 10^6$，$1\\leq m\\leq \\min\\{2\\times 10^9,\\dfrac{n(n-1)}{2}\\}$，$1\\leq c\\leq 10^{12}$，$s\\neq t$。\n\n### 样例解释 1\n![](https://cdn.luogu.com.cn/upload/image_hosting/9qletk0m.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『PG2』弯曲半平面直线同向图最大流", "background": "", "description": "若能将有向图 $G=(V,E)$ 画在平面上，使得点在一条直线上，任意两条边（可以为弯曲的弧线）仅在重合顶点处相交，且边上的所有点都在直线同侧，且每条边的起点到终点的射线的方向相同，则称 $G$ 是弯曲半平面直线同向图。对于一个弯曲半平面直线同向图给定 $n$ 个点，$m$ 条有向边，给定每条边的容量，求从点 $s$ 到点 $t$ 的最大流。", "inputFormat": "第一行包含四个正整数 $n$、$m$、$s$、$t$，用空格分隔，分别表示点的个数、有向边的个数、源点序号、汇点序号。\n\n接下来 $m$ 行每行包含三个正整数 $u_i$、$v_i$、$c_i$，用空格分隔，表示第 $i$ 条有向边从 $u_i$ 出发，到达 $v_i$，容量为 $c_i$。\n\n", "outputFormat": "一个整数，表示 $s$ 到 $t$ 的最大流。", "hint": "无重边自环。\n\n对于 $30\\%$ 的数据 $n\\leq 10^3$。\n\n对于 $70\\%$ 的数据 $n\\leq 10^5$。\n\n对于 $100\\%$ 的数据 $2\\leq n\\leq 10^6$，$1\\leq m\\leq \\min\\{2\\times 10^9,\\dfrac{n(n-1)}{2}\\}$，$1\\leq c\\leq 10^{12}$，$s\\neq t$。\n\n### 样例解释 1\n![](https://cdn.luogu.com.cn/upload/image_hosting/9qletk0m.png)", "locale": "zh-CN"}}}
{"pid": "P9902", "type": "P", "difficulty": 6, "samples": [["9 21 3\n1 2 1\n2 3 1\n3 4 1\n4 5 1\n5 6 1\n6 7 1\n7 8 1\n8 9 1\n1 3 1\n2 4 1\n3 5 1\n4 6 1\n5 7 1\n6 8 1\n7 9 1\n1 4 1\n2 5 1\n3 6 1\n4 7 1\n5 8 1\n6 9 1", "3"], ["5 10 2\n3 5 73\n3 4 33\n3 5 84\n4 5 10\n3 4 15\n1 2 83\n1 3 8\n1 3 24\n5 5 15\n1 2 62", "32"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["状压 DP"], "title": "『PG2』模拟最大流", "background": "", "description": "\n给定 $n$ 个点，$m$ 条有向边，给定每条边的容量，保证每条边 $(u,v,w)$ 满足 $v-u\\in[0,k]$，求从点 $1$ 到点 $n$ 的最大流。", "inputFormat": "第一行包含三个正整数 $n$、$m$、$k$，用空格分隔。\n\n接下来$m$行每行包含三个正整数 $u_i$、$v_i$、$w_i$，用空格分隔，表示第 $i$ 条有向边从 $u_i$ 出发，到达 $v_i$，容量为 $w_i$。", "outputFormat": "一个整数，表示 $1$ 到 $n$ 的最大流。", "hint": "对于 $20\\%$ 的数据满足 $n\\leq 10^2$，$m\\leq 10^4$，$k\\leq 2$。\n\n对于 $40\\%$ 的数据满足 $n\\leq 10^4$，$m\\leq 10^6$，$k\\leq 2$。\n\n对于 $60\\%$ 的数据满足 $n\\leq  8\\times 10^4$，$m\\leq 10^6$，$k\\leq 2$。\n\n对于 $80\\%$ 的数据满足 $n\\leq  8\\times 10^4$，$m\\leq 10^6$，$k\\leq 4$。\n\n对于 $100\\%$ 的数据满足 $2\\leq n\\leq 8\\times 10^4$，$1\\leq m\\leq 10^6$，$2\\leq k\\leq 7$，$1\\leq w\\leq100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『PG2』模拟最大流", "background": "", "description": "\n给定 $n$ 个点，$m$ 条有向边，给定每条边的容量，保证每条边 $(u,v,w)$ 满足 $v-u\\in[0,k]$，求从点 $1$ 到点 $n$ 的最大流。", "inputFormat": "第一行包含三个正整数 $n$、$m$、$k$，用空格分隔。\n\n接下来$m$行每行包含三个正整数 $u_i$、$v_i$、$w_i$，用空格分隔，表示第 $i$ 条有向边从 $u_i$ 出发，到达 $v_i$，容量为 $w_i$。", "outputFormat": "一个整数，表示 $1$ 到 $n$ 的最大流。", "hint": "对于 $20\\%$ 的数据满足 $n\\leq 10^2$，$m\\leq 10^4$，$k\\leq 2$。\n\n对于 $40\\%$ 的数据满足 $n\\leq 10^4$，$m\\leq 10^6$，$k\\leq 2$。\n\n对于 $60\\%$ 的数据满足 $n\\leq  8\\times 10^4$，$m\\leq 10^6$，$k\\leq 2$。\n\n对于 $80\\%$ 的数据满足 $n\\leq  8\\times 10^4$，$m\\leq 10^6$，$k\\leq 4$。\n\n对于 $100\\%$ 的数据满足 $2\\leq n\\leq 8\\times 10^4$，$1\\leq m\\leq 10^6$，$2\\leq k\\leq 7$，$1\\leq w\\leq100$。", "locale": "zh-CN"}}}
{"pid": "P9903", "type": "P", "difficulty": 2, "samples": [["+---+---+---+\n|52.|...|.81|\n|.39|58.|...|\n|.8.|.9.|...|\n+---+---+---+\n|24.|...|1.3|\n|1..|43.|86.|\n|.63|..7|.24|\n+---+---+---+\n|...|1.9|35.|\n|..8|.74|6..|\n|31.|86.|7.9|\n+---+---+---+", "OK"], ["+---+---+---+\n|3..|6..|..4|\n|4.9|8.1|..7|\n|..7|.49|6..|\n+---+---+---+\n|946|157|8.2|\n|.2.|3..|745|\n|.7.|28.|...|\n+---+---+---+\n|...|4..|..5|\n|8.5|.6.|.2.|\n|734|..8|5..|\n+---+---+---+", "GRESKA"], ["+---+---+---+\n|5..|98.|67.|\n|6..|...|.31|\n|.2.|613|.4.|\n+---+---+---+\n|.96|8.2|1.7|\n|.28|..5|.9.|\n|7.3|19.|6..|\n+---+---+---+\n|962|.7.|.1.|\n|1.5|...|76.|\n|.7.|5..|9..|\n+---+---+---+", "GRESKA"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #1] Sudoku", "background": null, "description": "数独是一款逻辑推理类游戏，玩家的任务是用数字 $1\\sim9$ 填满一个 $9\\times9$ 的网格，使其满足以下条件：\n\n- 数字 $1\\sim 9$ 在每一行恰好出现一次。\n- 数字 $1\\sim 9$ 在每一列恰好出现一次。\n- 把网格划分成 $9$ 个 $3\\times3$ 的宫，数字 $1\\sim 9$ 在每一宫恰好出现一次。\n\n现在给你一个未完成的数独网格，请你判断当前是否存在错误。**一个网格是存在错误的，当且仅当存在一行或一列或一宫，其中至少一个数字出现了 $2$ 次及以上。**\n\n如图展示了一个数独网格，它不存在错误。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d54z2mz7.png)", "inputFormat": "输入一个 $13\\times 13$ 的字符矩阵，表示数独网格，其中：\n\n- 字符 `-`、`|`、`+` 表示网格框架，表示将网格划分为 $9$ 个 $3\\times 3$ 的宫。\n- 字符 `.` 表示一个未填数字的单元格。\n- 从 $1\\sim9$ 的数字表示所在单元格已经填了这个数字。\n\n具体请见样例。", "outputFormat": "一行一个字符串，如果这个网格存在错误，输出 `GRESKA`，否则输出 `OK`。", "hint": "### 【样例解释#1】\n\n这个网格没有错误，所有输出 `OK`。\n\n### 【样例解释#2】\n\n第 $9$ 列数字 $5$ 出现了 $2$ 次，且右下角的一个宫中数字 $5$ 出现了 $2$ 次。\n\n### 【样例解释#3】\n\n第 $2$ 列数字 $2$ 出现了 $2$ 次，且第 $7$ 列数字 $6$ 出现了 $2$ 次。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，字符矩阵中只包含数字 $1\\sim9$、字符 `-`、`|`、`+`、`.`，且字符 `-`、`|`、`+` 出现的位置与样例一致。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | 如果存在错误，一定可以只检查行的限制找到 | $11$ |\n| $2$ | 如果存在错误，一定可以只检查列的限制找到 | $12$ |\n| $3$ | 如果存在错误，一定可以只检查宫的限制找到 | $13$ |\n| $4$ | 无特殊性质 | $14$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $50$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T1 Sudoku**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #1] Sudoku", "background": null, "description": "数独是一款逻辑推理类游戏，玩家的任务是用数字 $1\\sim9$ 填满一个 $9\\times9$ 的网格，使其满足以下条件：\n\n- 数字 $1\\sim 9$ 在每一行恰好出现一次。\n- 数字 $1\\sim 9$ 在每一列恰好出现一次。\n- 把网格划分成 $9$ 个 $3\\times3$ 的宫，数字 $1\\sim 9$ 在每一宫恰好出现一次。\n\n现在给你一个未完成的数独网格，请你判断当前是否存在错误。**一个网格是存在错误的，当且仅当存在一行或一列或一宫，其中至少一个数字出现了 $2$ 次及以上。**\n\n如图展示了一个数独网格，它不存在错误。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d54z2mz7.png)", "inputFormat": "输入一个 $13\\times 13$ 的字符矩阵，表示数独网格，其中：\n\n- 字符 `-`、`|`、`+` 表示网格框架，表示将网格划分为 $9$ 个 $3\\times 3$ 的宫。\n- 字符 `.` 表示一个未填数字的单元格。\n- 从 $1\\sim9$ 的数字表示所在单元格已经填了这个数字。\n\n具体请见样例。", "outputFormat": "一行一个字符串，如果这个网格存在错误，输出 `GRESKA`，否则输出 `OK`。", "hint": "### 【样例解释#1】\n\n这个网格没有错误，所有输出 `OK`。\n\n### 【样例解释#2】\n\n第 $9$ 列数字 $5$ 出现了 $2$ 次，且右下角的一个宫中数字 $5$ 出现了 $2$ 次。\n\n### 【样例解释#3】\n\n第 $2$ 列数字 $2$ 出现了 $2$ 次，且第 $7$ 列数字 $6$ 出现了 $2$ 次。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，字符矩阵中只包含数字 $1\\sim9$、字符 `-`、`|`、`+`、`.`，且字符 `-`、`|`、`+` 出现的位置与样例一致。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | 如果存在错误，一定可以只检查行的限制找到 | $11$ |\n| $2$ | 如果存在错误，一定可以只检查列的限制找到 | $12$ |\n| $3$ | 如果存在错误，一定可以只检查宫的限制找到 | $13$ |\n| $4$ | 无特殊性质 | $14$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $50$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T1 Sudoku**_。", "locale": "zh-CN"}}}
{"pid": "P9904", "type": "P", "difficulty": 4, "samples": [["1 8\nCPZNCCP\n4\n1 1 1 8\n1 3 1 5\n1 8 1 4\n1 2 1 3", "4\n2\n3\n1"], ["3 3\nPP\nPP\nPP\nCCC\nCCC\n3\n1 1 3 3\n3 3 2 2\n1 1 1 3", "2\n2\n1"], ["4 4\nCCC\nCPC\nPPP\nCNP\nZZZZ\nPPPP\nCPZC\n4\n3 1 2 3\n1 1 4 4\n2 2 3 3\n1 4 4 1", "1\n2\n1\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #1] Labirint", "background": "Teo 和克罗地亚 EJOI 队伍在一个迷宫里面。", "description": "这个迷宫是一个 $n\\times m$ 的网格，用坐标 $(1,1)$ 表示左上角的单元格，用坐标 $(n,m)$ 表示右下角的单元格。每一对相邻（四连通，即与上、下、左、右相邻）的单元格之间都有一道门，门有四种颜色：蓝、红、绿、橙，分别用字符 `P`、`C`、`Z`、`N` 表示。只能通过门移动到其它单元格。\n\n现在 Teo 给你 $q$ 组询问，每次询问给定 $a,b,c,d$，表示找到一条从 $(a,b)$ 到 $(c,d)$ 的路径，最小化经过的门的颜色数，请你回答最少的颜色数量。", "inputFormat": "第一行两个整数 $n,m$ 表示网格的行数和列数。\n\n接下来一个 $n$ 行 $m-1$ 列的字符矩阵，其中第 $i$ 行第 $j$ 列的字符表示 $(i,j)$ 和 $(i,j+1)$ 之间的门的颜色。\n\n接下来一个 $n-1$ 行 $m$ 列的字符矩阵，其中第 $i$ 行第 $j$ 列的字符表示 $(i,j)$ 和 $(i+1,j)$ 之间的门的颜色。\n\n接下来一行一个整数 $q$，表示询问数量。\n\n接下来 $q$ 行，第 $i$ 行四个整数 $a_i,b_i,c_i,d_i$ 表示询问是 $(a_i,b_i)$ 到 $(c_i,d_i)$ 路径上门的颜色个数的最小值。", "outputFormat": "$q$ 行，每行一个整数表示这组询问的答案。", "hint": "### 【样例说明#3】\n\n如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/292r7hr3.png)\n\n- 第一组询问，只需经过蓝色门；\n- 第二组询问，只需经过蓝色门和绿色门；\n- 第三组询问，只需经过蓝色门；\n- 第四组询问，按图中的路径走，只需经过红色门、蓝色门、绿色门。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n,m,q\\leq100$，$nm>1$，$1\\leq a_i,c_i\\leq n$，$1\\leq b_i,d_i\\leq m$，$(a_i,b_i)\\ne(c_i,d_i)$，字符矩阵只有字符 `P`、`C`、`Z`、`N` 组成。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n=1$ | $11$ |\n| $2$ | 第一个字符矩阵中的字符只包含 `P`,第二个字符矩阵中的字符只包含 `C` | $13$ |\n| $3$ | 所有字符矩阵中的字符只包含 `C` 和 `P` | $24$ |\n| $4$ | 无特殊性质 | $22$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $70$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T2 Labirint**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #1] Labirint", "background": "Teo 和克罗地亚 EJOI 队伍在一个迷宫里面。", "description": "这个迷宫是一个 $n\\times m$ 的网格，用坐标 $(1,1)$ 表示左上角的单元格，用坐标 $(n,m)$ 表示右下角的单元格。每一对相邻（四连通，即与上、下、左、右相邻）的单元格之间都有一道门，门有四种颜色：蓝、红、绿、橙，分别用字符 `P`、`C`、`Z`、`N` 表示。只能通过门移动到其它单元格。\n\n现在 Teo 给你 $q$ 组询问，每次询问给定 $a,b,c,d$，表示找到一条从 $(a,b)$ 到 $(c,d)$ 的路径，最小化经过的门的颜色数，请你回答最少的颜色数量。", "inputFormat": "第一行两个整数 $n,m$ 表示网格的行数和列数。\n\n接下来一个 $n$ 行 $m-1$ 列的字符矩阵，其中第 $i$ 行第 $j$ 列的字符表示 $(i,j)$ 和 $(i,j+1)$ 之间的门的颜色。\n\n接下来一个 $n-1$ 行 $m$ 列的字符矩阵，其中第 $i$ 行第 $j$ 列的字符表示 $(i,j)$ 和 $(i+1,j)$ 之间的门的颜色。\n\n接下来一行一个整数 $q$，表示询问数量。\n\n接下来 $q$ 行，第 $i$ 行四个整数 $a_i,b_i,c_i,d_i$ 表示询问是 $(a_i,b_i)$ 到 $(c_i,d_i)$ 路径上门的颜色个数的最小值。", "outputFormat": "$q$ 行，每行一个整数表示这组询问的答案。", "hint": "### 【样例说明#3】\n\n如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/292r7hr3.png)\n\n- 第一组询问，只需经过蓝色门；\n- 第二组询问，只需经过蓝色门和绿色门；\n- 第三组询问，只需经过蓝色门；\n- 第四组询问，按图中的路径走，只需经过红色门、蓝色门、绿色门。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n,m,q\\leq100$，$nm>1$，$1\\leq a_i,c_i\\leq n$，$1\\leq b_i,d_i\\leq m$，$(a_i,b_i)\\ne(c_i,d_i)$，字符矩阵只有字符 `P`、`C`、`Z`、`N` 组成。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n=1$ | $11$ |\n| $2$ | 第一个字符矩阵中的字符只包含 `P`,第二个字符矩阵中的字符只包含 `C` | $13$ |\n| $3$ | 所有字符矩阵中的字符只包含 `C` 和 `P` | $24$ |\n| $4$ | 无特殊性质 | $22$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $70$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T2 Labirint**_。", "locale": "zh-CN"}}}
{"pid": "P9905", "type": "P", "difficulty": 4, "samples": [["3 3\n1 1 2\n2 3 4\n4 3 2\n3 3", "4"], ["3 3\n1 1 2\n2 3 4\n4 3 2\n2 1", "2 3 4\n4 3 4"], ["5 5\n-1 -3 -4 -2 4\n-8 -7 -9 -10 11\n5 2 -8 -2 1\n13 -3 -2 -6 -9\n11 6 2 7 4\n2 3", "-1 -2 11\n5 2 11\n13 2 1\n13 7 7"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["单调队列", "2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #1] AN2DL", "background": null, "description": "While wandering around Building $21$, you came across a wall completely covered with numbers, arranged in a table of $n$ rows and $m$ columns. Soon you noticed that there was a frame leaning against the wall large to frame $r$ rows and $s$ columns of the table on the wall. And next to the frame you found a pencil and a piece of paper containing an empty table.\n\nYou are sad that the table on the piece of paper is empty, so you decided to play around with the frame to fill it.\n\nYou leaned the frame against the wall so that the number in the $i$-th row and $j$-th column is in the upper left corner, and the borders of the frame are parallel to the edges of the wall. Considering the numbers inside the frame, and since you like large numbers, you have decided to write the largest among them in the $i$-th row and $j$-th column of the table on the piece of paper.\n\nYou repeated the process for every possible position of the frame on the wall (such that the frame is entirely on the wall, and that there are exactly $r \\times s$ numbers inside it), making sure that the edges of the frame are parallel to the edges of the wall.\n\nWhen you were done, the table on the piece of paper was even more beautiful than the one on the wall.What numbers are in the table on the piece of paper?", "inputFormat": "The first line contains two integers $n,m$ representing the height and width of the matrix.\n\nThe next $n$ lines contain $m$ integers each, representing the matrix $A$.\n\nThe last line contains two integers $r,s$.", "outputFormat": "There are $n-r+1$ rows, each row has $m-s+1$ numbers, and the number in the $i$th row and $j$th column represents the maximum value of the $r\\times s$ submatrix element with $(i,j)$ as the upper left corner, that is, $\\max\\limits_{i\\leq x\\leq i+r-1,j\\leq y\\leq j+s-1}A_{x,y}$.", "hint": "[COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) Problem 3. AN2DL", "locale": "en", "translations": {"en": {"title": "[COCI 2023/2024 #1] AN2DL", "background": null, "description": "While wandering around Building $21$, you came across a wall completely covered with numbers, arranged in a table of $n$ rows and $m$ columns. Soon you noticed that there was a frame leaning against the wall large to frame $r$ rows and $s$ columns of the table on the wall. And next to the frame you found a pencil and a piece of paper containing an empty table.\n\nYou are sad that the table on the piece of paper is empty, so you decided to play around with the frame to fill it.\n\nYou leaned the frame against the wall so that the number in the $i$-th row and $j$-th column is in the upper left corner, and the borders of the frame are parallel to the edges of the wall. Considering the numbers inside the frame, and since you like large numbers, you have decided to write the largest among them in the $i$-th row and $j$-th column of the table on the piece of paper.\n\nYou repeated the process for every possible position of the frame on the wall (such that the frame is entirely on the wall, and that there are exactly $r \\times s$ numbers inside it), making sure that the edges of the frame are parallel to the edges of the wall.\n\nWhen you were done, the table on the piece of paper was even more beautiful than the one on the wall.What numbers are in the table on the piece of paper?", "inputFormat": "The first line contains two integers $n,m$ representing the height and width of the matrix.\n\nThe next $n$ lines contain $m$ integers each, representing the matrix $A$.\n\nThe last line contains two integers $r,s$.", "outputFormat": "There are $n-r+1$ rows, each row has $m-s+1$ numbers, and the number in the $i$th row and $j$th column represents the maximum value of the $r\\times s$ submatrix element with $(i,j)$ as the upper left corner, that is, $\\max\\limits_{i\\leq x\\leq i+r-1,j\\leq y\\leq j+s-1}A_{x,y}$.", "hint": "[COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) Problem 3. AN2DL", "locale": "en"}, "zh-CN": {"title": "[COCI 2023/2024 #1] AN2DL", "background": null, "description": "当在 21 号楼下转悠的时候，你遇到了一面完全被数字覆盖的墙，这些数字被排成一个 $n$ 行 $m$ 列的表格。然后你发现了有一个可以框柱 $r$ 行 $s$ 列的框靠在墙边，并且在框的旁边你发现了一支铅笔和一张纸，纸上有一个空白的表格。\n\n你因为纸上的表格是空的而感到难过，所以你决定使用这个框来填充这个表格。\n\n你把框靠在墙上，使第 $i$ 行第 $j$ 列的数字位于左上角，相框的边框与墙的边缘平行。考虑到相框内的数字，而且你喜欢大数，你决定把其中最大的数写在纸上表格的第 $i$ 行第 $j$ 列。\n\n你对框在墙壁上的每一个可能位置（使框完全位于墙壁上，且框内正好有 $r \\times s$ 个数字）重复上述过程，并确保相框边缘与墙壁边缘平行。\n\n在你结束之后，纸上的表格甚至比墙壁还要漂亮。在纸上的表格中的数字是什么呢？", "inputFormat": "第一行包含两个整数 $n$ 和 $m\\ (1\\le n,m\\le 4\\ 000)$，表示墙上表格的行数和列数。\n\n接下来 $n$ 行，每行 $m$ 个整数 $a_{i,j}\\ (|a_{i,j}|\\le 10\\ 000)$，其中 $a_{i,j}$ 表示墙上表格第 $i$ 行第 $j$ 列的数。\n\n最后一行两个整数 $r$ 和 $s\\ (1\\le r\\le n,1\\le s\\le m)$，表示框的大小。", "outputFormat": "输出纸上表格中的所有数字。", "hint": "### 【样例解释#1】\n\n只有一个 $3\\times 3$ 的子矩阵，且是整个矩阵，它的元素最大值是 $4$。\n\n### 【样例解释#2】\n\n矩阵和它的每个 $2\\times 1$ 的子矩阵如下图所示，其中标红的数为最大值：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/89liqsac.png)\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 4000$，$\\lvert A_{i,j}\\rvert\\leq 10000$，$1\\leq r\\leq n$，$1\\leq s\\leq m$。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n,m\\leq 40$，$r=n$，$s=m$ | $12$ |\n| $2$ | $n,m\\leq 40$ | $17$ |\n| $3$ | $n,m\\leq 1000$ | $25$ |\n| $4$ | 无特殊性质 | $56$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $110$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T3 AN2DL**_。", "locale": "zh-CN"}}}
{"pid": "P9906", "type": "P", "difficulty": 5, "samples": [["4 3", "8"], ["3 5", "14"], ["100 200", "410783331"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #1] Kocke", "background": null, "description": "在 Donald 的十三岁生日上，他的父亲给了他一套乐高积木。在这套积木中，有 $n$ 个大小相同的积木，且第 $i$ 个积木的颜色为 $i$ 。他想要用这些积木搭一面墙。\n\nDonald 将在排成一排的乐高积木的底座上建造他的墙，底座上有 $k$ 个可以放积木的地方。他按以下方式放置积木：\n\n- 首先，他将颜色为 $1$ 的积木放在底座的任意一个位置上。\n- 对于每个颜色从 $2$ 到 $n$ 的积木，他都会选择和前一个积木相邻的位置，在对应位置的顶端放上这个积木。\n\n\n他用一个长度为 $k$ 序列表示这面墙：对于第 $i$ 位，如果个位置没有积木，则是 $0$，否则是这个位置最顶端积木的颜色。\n\n问一共有多少种不同的序列，对 $10^9+7$ 取模。", "inputFormat": "一行两个整数 $n,k$ 表示积木数量和位置数量。", "outputFormat": "一个整数表示问题答案对 $10^9+7$ 取模的结果。", "hint": "### 【样例解释#1】\n\n可能的序列有：$(0, 3, 4), (2, 3, 4), (0, 4, 3), (1, 4, 3), (4, 3, 0), (4, 3, 2), (3, 4, 0), (3, 4, 1)$。\n\n### 【样例解释#2】\n\n其中一种可能的序列是 $(0,3,2,0,0)$，它的操作步骤是：\n\n- 在第 $2$ 个位置顶端摆放编号为 $1$ 的积木。\n- 在第 $3$ 个位置顶端摆放编号为 $2$ 的积木。\n- 在第 $2$ 个位置顶端摆放编号为 $3$ 的积木。\n- 在第 $3$ 个位置顶端摆放编号为 $4$ 的积木。\n- 在第 $2$ 个位置顶端摆放编号为 $5$ 的积木。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$2\\leq n,k\\leq 5000$。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n,k\\leq 18$ | $20$ |\n| $2$ | $n,k\\leq 50$ | $30$ |\n| $3$ | $n,k\\leq 500$ | $30$ |\n| $4$ | 无特殊性质 | $30$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $110$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T4 Kocke**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #1] Kocke", "background": null, "description": "在 Donald 的十三岁生日上，他的父亲给了他一套乐高积木。在这套积木中，有 $n$ 个大小相同的积木，且第 $i$ 个积木的颜色为 $i$ 。他想要用这些积木搭一面墙。\n\nDonald 将在排成一排的乐高积木的底座上建造他的墙，底座上有 $k$ 个可以放积木的地方。他按以下方式放置积木：\n\n- 首先，他将颜色为 $1$ 的积木放在底座的任意一个位置上。\n- 对于每个颜色从 $2$ 到 $n$ 的积木，他都会选择和前一个积木相邻的位置，在对应位置的顶端放上这个积木。\n\n\n他用一个长度为 $k$ 序列表示这面墙：对于第 $i$ 位，如果个位置没有积木，则是 $0$，否则是这个位置最顶端积木的颜色。\n\n问一共有多少种不同的序列，对 $10^9+7$ 取模。", "inputFormat": "一行两个整数 $n,k$ 表示积木数量和位置数量。", "outputFormat": "一个整数表示问题答案对 $10^9+7$ 取模的结果。", "hint": "### 【样例解释#1】\n\n可能的序列有：$(0, 3, 4), (2, 3, 4), (0, 4, 3), (1, 4, 3), (4, 3, 0), (4, 3, 2), (3, 4, 0), (3, 4, 1)$。\n\n### 【样例解释#2】\n\n其中一种可能的序列是 $(0,3,2,0,0)$，它的操作步骤是：\n\n- 在第 $2$ 个位置顶端摆放编号为 $1$ 的积木。\n- 在第 $3$ 个位置顶端摆放编号为 $2$ 的积木。\n- 在第 $2$ 个位置顶端摆放编号为 $3$ 的积木。\n- 在第 $3$ 个位置顶端摆放编号为 $4$ 的积木。\n- 在第 $2$ 个位置顶端摆放编号为 $5$ 的积木。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$2\\leq n,k\\leq 5000$。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n,k\\leq 18$ | $20$ |\n| $2$ | $n,k\\leq 50$ | $30$ |\n| $3$ | $n,k\\leq 500$ | $30$ |\n| $4$ | 无特殊性质 | $30$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $110$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T4 Kocke**_。", "locale": "zh-CN"}}}
{"pid": "P9907", "type": "P", "difficulty": 7, "samples": [["4 5\n1 2\n2 3\n3 4\n4 1\n1 3", "1"], ["6 7\n1 2\n2 4\n2 6\n3 5\n6 1\n4 3\n2 5", "4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2023", "深度优先搜索 DFS", "COCI（克罗地亚）", "线段树合并", "启发式合并"], "title": "[COCI 2023/2024 #1] Mostovi", "background": "滥用本题评测将被封号！", "description": "When Leonhard Euler resolved the famous Königsberg bridge problem,he had no clue he had discovered a whole new area of mathematics -graph theory!\n\nUnfortunately, the Königsberg bridge problem is far too easy for the programmers of this era, so Euler came up with another problem - the Zagreb bridge problem!\n\nThe bridges of Zagreb form a graph with $n$ nodes and $m$ edges where the edges represent the bridges and the nodes represent the riverine islands. The graph is connected, in other words, it’s possible to get from any node to any other by traveling across the edges. Now Euler asked, how many edges are there such that after their removal the graph becomes disconnected?\n\nAgain, Euler didn’t know that this problem is also famous today (those damn Codeforces blogs). So the author of this problem decided to give you an even harder one, how many edges are there such that after the removal of the nodes which it connects, the remaining $n − 2$ nodes become disconnected?\n\n### 题目大意\n\n给定一张 $n$ 个点 $m$ 条边的无向连通图，求有多少条边满足删去这条边两端的两个点之后，剩余的 $n-2$ 个点不连通。", "inputFormat": "一行两个正整数 $n,m$ 分别表示点数和边数。\n\n接下来一行每行两个正整数 $a_i,b_i$ 表示有一条边连接 $a_i,b_i$。", "outputFormat": "一行一个整数表示符合条件的边的数量。", "hint": "### 【样例解释#1】\n\n对于边 $(1,3)$，删去它和对应的点 $1,3$ 之后，包含两个连通块，分别包括节点 $2$ 和 $4$，也就是说，图不连通了。容易验证这是唯一满足条件的边。\n\n### 【样例解释#2】\n\n满足条件的边有：$(1, 2), (2, 4), (2, 6) , (2, 5)$。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，$1\\leq m\\leq3\\times10^5$，$1\\leq a_i,b_i\\leq n$，图中无重边、自环。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n\\leq100$，$m\\leq300$ | $13$ |\n| $2$ | $n\\leq1000$，$m\\leq3000$ | $17$ |\n| $3$ | $n\\leq1000$ | $25$ |\n| $4$ | $m-n\\leq20$ | $12$ |\n| $5$ | 无特殊性质 | $43$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $110$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T5 Mostovi**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #1] Mostovi", "background": "滥用本题评测将被封号！", "description": "When Leonhard Euler resolved the famous Königsberg bridge problem,he had no clue he had discovered a whole new area of mathematics -graph theory!\n\nUnfortunately, the Königsberg bridge problem is far too easy for the programmers of this era, so Euler came up with another problem - the Zagreb bridge problem!\n\nThe bridges of Zagreb form a graph with $n$ nodes and $m$ edges where the edges represent the bridges and the nodes represent the riverine islands. The graph is connected, in other words, it’s possible to get from any node to any other by traveling across the edges. Now Euler asked, how many edges are there such that after their removal the graph becomes disconnected?\n\nAgain, Euler didn’t know that this problem is also famous today (those damn Codeforces blogs). So the author of this problem decided to give you an even harder one, how many edges are there such that after the removal of the nodes which it connects, the remaining $n − 2$ nodes become disconnected?\n\n### 题目大意\n\n给定一张 $n$ 个点 $m$ 条边的无向连通图，求有多少条边满足删去这条边两端的两个点之后，剩余的 $n-2$ 个点不连通。", "inputFormat": "一行两个正整数 $n,m$ 分别表示点数和边数。\n\n接下来一行每行两个正整数 $a_i,b_i$ 表示有一条边连接 $a_i,b_i$。", "outputFormat": "一行一个整数表示符合条件的边的数量。", "hint": "### 【样例解释#1】\n\n对于边 $(1,3)$，删去它和对应的点 $1,3$ 之后，包含两个连通块，分别包括节点 $2$ 和 $4$，也就是说，图不连通了。容易验证这是唯一满足条件的边。\n\n### 【样例解释#2】\n\n满足条件的边有：$(1, 2), (2, 4), (2, 6) , (2, 5)$。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，$1\\leq m\\leq3\\times10^5$，$1\\leq a_i,b_i\\leq n$，图中无重边、自环。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n\\leq100$，$m\\leq300$ | $13$ |\n| $2$ | $n\\leq1000$，$m\\leq3000$ | $17$ |\n| $3$ | $n\\leq1000$ | $25$ |\n| $4$ | $m-n\\leq20$ | $12$ |\n| $5$ | 无特殊性质 | $43$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $110$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T5 Mostovi**_。", "locale": "zh-CN"}}}
{"pid": "P9908", "type": "P", "difficulty": 2, "samples": [["5 6\n\\.\\|/.\n---+--\n/./|\\.\n./.|.\\\n/..|..", "1\n"], ["7 7\n\\.|./..\n.\\|/...\n--+--..\n./|\\...\n/.|.\\|/\n....-+-\n..../|\\", "2"], ["7 7\n\\|/|\\|/\n-+-|-+-\n/|\\|/|\\\n---+---\n\\|/|\\|/\n-+-|-+-\n/|\\|/|\\\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "2023", "O2优化", "枚举", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #2] Pahuljice", "background": "", "description": "Lana 喜欢画雪花。如下定义一个大小为 $x$ 的雪花：\n\n+ 雪花的中间是一个 $\\texttt{'+'}$。\n+ 在 $\\texttt{'+'}$ 的上方和下方各有 $x$ 个 $\\texttt{'|'}$。\n+ 在 $\\texttt{'+'}$ 的左方和右方各有 $x$ 个 $\\texttt{'-'}$。\n+ 在 $\\texttt{'+'}$ 的左上方和右下方各有 $x$ 个 $\\texttt{'\\textbackslash'}$。\n+ 在 $\\texttt{'+'}$ 的左下方和右上方各有 $x$ 个 $\\texttt{'/'}$。\n\n雪花之间可以重叠。如下是雪花的几个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2s81nyxm.png)\n\n三张图分别含有一个大小为 $1$ 的雪花，重叠的两个大小分别为 $2$ 和 $1$ 的雪花，一个大小为 $1$ 的雪花（作为大小为 $2$ 的雪花不完整）。\n\n给定一个 $n\\times m$ 的字符矩阵，请找出其中最大的雪花的大小。\n ", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行每行一个长为 $m$ 的字符串，给出一个 $n\\times m$ 的矩阵，保证只包含 $\\texttt{'+'},\\texttt{'-'},\\texttt{'|'},\\texttt{'/'},\\texttt{'\\textbackslash'},\\texttt{'.'}$。", "outputFormat": "输出一行一个整数表示最大的雪花大小。若没有则输出 $0$。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$11$|最大的雪花大小是 $1$，或者没有任何雪花|\n|$2$|$11$|矩阵中至多只有一个 $\\texttt{'+'}$|\n|$3$|$28$|无|\n\n对于所有数据，$1\\le n,m\\le 50$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #2] Pahuljice", "background": "", "description": "Lana 喜欢画雪花。如下定义一个大小为 $x$ 的雪花：\n\n+ 雪花的中间是一个 $\\texttt{'+'}$。\n+ 在 $\\texttt{'+'}$ 的上方和下方各有 $x$ 个 $\\texttt{'|'}$。\n+ 在 $\\texttt{'+'}$ 的左方和右方各有 $x$ 个 $\\texttt{'-'}$。\n+ 在 $\\texttt{'+'}$ 的左上方和右下方各有 $x$ 个 $\\texttt{'\\textbackslash'}$。\n+ 在 $\\texttt{'+'}$ 的左下方和右上方各有 $x$ 个 $\\texttt{'/'}$。\n\n雪花之间可以重叠。如下是雪花的几个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2s81nyxm.png)\n\n三张图分别含有一个大小为 $1$ 的雪花，重叠的两个大小分别为 $2$ 和 $1$ 的雪花，一个大小为 $1$ 的雪花（作为大小为 $2$ 的雪花不完整）。\n\n给定一个 $n\\times m$ 的字符矩阵，请找出其中最大的雪花的大小。\n ", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行每行一个长为 $m$ 的字符串，给出一个 $n\\times m$ 的矩阵，保证只包含 $\\texttt{'+'},\\texttt{'-'},\\texttt{'|'},\\texttt{'/'},\\texttt{'\\textbackslash'},\\texttt{'.'}$。", "outputFormat": "输出一行一个整数表示最大的雪花大小。若没有则输出 $0$。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$11$|最大的雪花大小是 $1$，或者没有任何雪花|\n|$2$|$11$|矩阵中至多只有一个 $\\texttt{'+'}$|\n|$3$|$28$|无|\n\n对于所有数据，$1\\le n,m\\le 50$。", "locale": "zh-CN"}}}
{"pid": "P9909", "type": "P", "difficulty": 2, "samples": [["2\n1 1 1\n1 1 2\n00\n10\n01\n00", "1"], ["3\n2 3 1\n1 1 1\n000\n010\n000\n111\n111\n111\n111\n111\n111", "3"], ["3\n2 1 1\n3 2 2\n000\n010\n110\n010\n001\n001\n101\n110\n000\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "2023", "O2优化", "广度优先搜索 BFS", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #2] Pingvin", "background": "", "description": "给定一个 $n\\times n\\times n$ 的立方体，被分为 $n^3$ 个单位立方体，其中一些单位立方体是障碍不能通行。\n\n给定起点坐标和终点坐标，每一步可以从一个单位立方体移到一个相邻的（有共同面的）非障碍的单位立方体，问从起点到终点最少走多少步。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $3$ 个整数 $x_s,y_s,z_s$ 表示起始位置。\n\n接下来一行 $3$ 个整数 $x_t,y_t,z_t$ 表示终点位置。\n\n接下来给出 $n$ 个 $n\\times n$ 的 $01$ 矩阵，第 $i$ 个立方体的第 $j$ 行第 $k$ 列表示 $(j,k,i)$ 是否是障碍（是 $1$ 表示障碍）。\n\n保证起始和终点位置不是障碍。", "outputFormat": "输出一行一个整数表示最少步数，若无法到达输出 $-1$。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$7$|$n=2$|\n|$2$|$16$|没有障碍|\n|$3$|$22$|所有 $z$ 坐标大于 $1$ 的格子都是障碍|\n|$4$|$25$|无|\n\n对于所有数据，$1\\le n,m\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #2] Pingvin", "background": "", "description": "给定一个 $n\\times n\\times n$ 的立方体，被分为 $n^3$ 个单位立方体，其中一些单位立方体是障碍不能通行。\n\n给定起点坐标和终点坐标，每一步可以从一个单位立方体移到一个相邻的（有共同面的）非障碍的单位立方体，问从起点到终点最少走多少步。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $3$ 个整数 $x_s,y_s,z_s$ 表示起始位置。\n\n接下来一行 $3$ 个整数 $x_t,y_t,z_t$ 表示终点位置。\n\n接下来给出 $n$ 个 $n\\times n$ 的 $01$ 矩阵，第 $i$ 个立方体的第 $j$ 行第 $k$ 列表示 $(j,k,i)$ 是否是障碍（是 $1$ 表示障碍）。\n\n保证起始和终点位置不是障碍。", "outputFormat": "输出一行一个整数表示最少步数，若无法到达输出 $-1$。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$7$|$n=2$|\n|$2$|$16$|没有障碍|\n|$3$|$22$|所有 $z$ 坐标大于 $1$ 的格子都是障碍|\n|$4$|$25$|无|\n\n对于所有数据，$1\\le n,m\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P9910", "type": "P", "difficulty": 6, "samples": [["5 2\n3 4 1 2 5\n3 2", "9 6 4"], ["7 0\n4 5 2 1 6 3 7", "13"], ["3 2\n3 1 2\n1 2\n", "5 2 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #2] Dizalo", "background": "", "description": "$n$ 个人坐电梯，第 $i$ 个人在第 $a_i$ 层下电梯，$a_{1\\sim n}$ 构成一个排列。\n\n电梯是长条形的，所以 $n$ 个人初始时按编号顺序在电梯里列成一列，电梯会从下往上依次经过第 $1\\sim n$ 层。\n\n当一个人要下电梯时，所有在他前面的人也必须暂时下电梯，然后可以以任意顺序返回电梯。在他后面的人不需要也不会下电梯。\n\n如果每次临时下电梯的人总是以最优策略来决定返回电梯的顺序，请你求出所有人下电梯的总次数最少是多少。\n\n给定 $q$ 次操作，每次给定 $x_i$ 表示移除编号为 $x_i$ 的人，你需要在第一次操作前以及每次操作之后求出答案。", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个数 $a_{1\\sim n}$，保证构成一个 $1\\sim n$ 的排列。\n\n第三行 $q$ 个数 $x_{1\\sim q}$，表示 $q$ 次询问。", "outputFormat": "输出一行 $q+1$ 个数，表示第一次操作前的答案以及每次操作后的答案。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$16$|$n,q\\le 100$|\n|$2$|$19$|$n,q\\le 1000$|\n|$3$|$29$|$q=0$|\n|$4$|$46$|无|\n\n对于所有数据，$0\\le q< n\\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #2] Dizalo", "background": "", "description": "$n$ 个人坐电梯，第 $i$ 个人在第 $a_i$ 层下电梯，$a_{1\\sim n}$ 构成一个排列。\n\n电梯是长条形的，所以 $n$ 个人初始时按编号顺序在电梯里列成一列，电梯会从下往上依次经过第 $1\\sim n$ 层。\n\n当一个人要下电梯时，所有在他前面的人也必须暂时下电梯，然后可以以任意顺序返回电梯。在他后面的人不需要也不会下电梯。\n\n如果每次临时下电梯的人总是以最优策略来决定返回电梯的顺序，请你求出所有人下电梯的总次数最少是多少。\n\n给定 $q$ 次操作，每次给定 $x_i$ 表示移除编号为 $x_i$ 的人，你需要在第一次操作前以及每次操作之后求出答案。", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个数 $a_{1\\sim n}$，保证构成一个 $1\\sim n$ 的排列。\n\n第三行 $q$ 个数 $x_{1\\sim q}$，表示 $q$ 次询问。", "outputFormat": "输出一行 $q+1$ 个数，表示第一次操作前的答案以及每次操作后的答案。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$16$|$n,q\\le 100$|\n|$2$|$19$|$n,q\\le 1000$|\n|$3$|$29$|$q=0$|\n|$4$|$46$|无|\n\n对于所有数据，$0\\le q< n\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9911", "type": "P", "difficulty": 4, "samples": [["5\n1 1 2 1 1", "1:1"], ["6\n1 2 3 1 2 3", "2:1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #2] Kuglice", "background": "", "description": "一个双端队列里面有 $n$ 个球，每个球有一个颜色。A 和 B 玩一个游戏：\n\nA 先手，两个人轮流操作，每次从队列的最左端或者最右端拿出一个球，如果这种颜色的球是第一次被拿出，拿出它的人获得 $1$ 分。所有球都拿完后游戏结束。\n\n假设 A 和 B 都以最优策略操作，请求出最终得分是多少。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $a_{1\\sim n}$ 表示从左到右每个球的颜色。", "outputFormat": "输出一行两个以 `:` 隔开的整数（形如 `a:b`），`a` 表示 A 最终的得分，`b` 表示 B 最终的得分。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$17$|$a_i\\le 2$|\n|$2$|$10$|$n\\le 20$|\n|$3$|$26$|$a_i\\le 20$|\n|$4$|$15$|$n\\le 300$|\n|$5$|$42$|无|\n\n对于所有数据，$1\\le n\\le 3000$，$1\\le a_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #2] Kuglice", "background": "", "description": "一个双端队列里面有 $n$ 个球，每个球有一个颜色。A 和 B 玩一个游戏：\n\nA 先手，两个人轮流操作，每次从队列的最左端或者最右端拿出一个球，如果这种颜色的球是第一次被拿出，拿出它的人获得 $1$ 分。所有球都拿完后游戏结束。\n\n假设 A 和 B 都以最优策略操作，请求出最终得分是多少。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $a_{1\\sim n}$ 表示从左到右每个球的颜色。", "outputFormat": "输出一行两个以 `:` 隔开的整数（形如 `a:b`），`a` 表示 A 最终的得分，`b` 表示 B 最终的得分。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$17$|$a_i\\le 2$|\n|$2$|$10$|$n\\le 20$|\n|$3$|$26$|$a_i\\le 20$|\n|$4$|$15$|$n\\le 300$|\n|$5$|$42$|无|\n\n对于所有数据，$1\\le n\\le 3000$，$1\\le a_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9912", "type": "P", "difficulty": 4, "samples": [["6 3\n2 4 2 3 4 1\n2 5 2\n3 5 3\n3 4 4", "2\n1\n0"], ["10 3\n5 0 3 4 2 0 1 6 3 5\n3 9 1\n1 10 3\n1 10 2", "2\n4\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2023", "O2优化", "分块", "COCI（克罗地亚）", "离线处理"], "title": "[COCI 2023/2024 #2] Zatopljenje", "background": "", "description": "Mr. Malnar 有一张地形图，上面画着一个区域内每个位置的海拔高度。具体的，有 $n$ 个位置排成一排，第 $i$ 个位置高出海平面 $h_i$ 米。\n\n海平面可能会上升。给定 $q$ 次询问，对于第 $i$ 次询问你需回答：如果海平面高度上升 $x_i$ 米，那么 $[l_i,r_i]$ 区间中会形成多少个岛？一个岛的定义为一个极长的，每个位置的高度都大于 $x_i$ 的段。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mffg52xn.png)\n\n上图分别表示了样例 1 的第一组询问以及样例 2 的第二组询问。左图 $[2,5]$ 区间中有 $[2,2],[4,5]$ 两个岛，而右图中有 $[1,1],[4,4],[8,8],[10,10]$ 四个岛。", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个整数 $h_{1\\sim n}$ 表示每个位置的初始海拔。\n\n接下来 $q$ 行每行 $3$ 个整数 $l_i,r_i,x_i$ 表示一次询问。", "outputFormat": "输出 $q$ 行，第 $i$ 行一个整数表示第 $i$ 次询问的答案。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$10$|$n,q\\le 2000$|\n|$2$|$20$|$l_i=1,r_i=n$|\n|$3$|$20$|存在 $p\\in [1,n]$ 满足 $h_1\\ge h_2\\ge \\cdots \\ge h_p\\le h_{p+1}\\le \\cdots \\le h_n$|\n|$4$|$60$|无|\n\n对于所有数据，$1\\le n,q\\le 2\\times 10^5$，$0\\le h_i,x_i\\le 10^9$，$1\\le l_i\\le r_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #2] Zatopljenje", "background": "", "description": "Mr. Malnar 有一张地形图，上面画着一个区域内每个位置的海拔高度。具体的，有 $n$ 个位置排成一排，第 $i$ 个位置高出海平面 $h_i$ 米。\n\n海平面可能会上升。给定 $q$ 次询问，对于第 $i$ 次询问你需回答：如果海平面高度上升 $x_i$ 米，那么 $[l_i,r_i]$ 区间中会形成多少个岛？一个岛的定义为一个极长的，每个位置的高度都大于 $x_i$ 的段。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mffg52xn.png)\n\n上图分别表示了样例 1 的第一组询问以及样例 2 的第二组询问。左图 $[2,5]$ 区间中有 $[2,2],[4,5]$ 两个岛，而右图中有 $[1,1],[4,4],[8,8],[10,10]$ 四个岛。", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个整数 $h_{1\\sim n}$ 表示每个位置的初始海拔。\n\n接下来 $q$ 行每行 $3$ 个整数 $l_i,r_i,x_i$ 表示一次询问。", "outputFormat": "输出 $q$ 行，第 $i$ 行一个整数表示第 $i$ 次询问的答案。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$10$|$n,q\\le 2000$|\n|$2$|$20$|$l_i=1,r_i=n$|\n|$3$|$20$|存在 $p\\in [1,n]$ 满足 $h_1\\ge h_2\\ge \\cdots \\ge h_p\\le h_{p+1}\\le \\cdots \\le h_n$|\n|$4$|$60$|无|\n\n对于所有数据，$1\\le n,q\\le 2\\times 10^5$，$0\\le h_i,x_i\\le 10^9$，$1\\le l_i\\le r_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9913", "type": "P", "difficulty": 3, "samples": [["3\n4\n3\n256", "Yes\nNo\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「RiOI-03」water problem", "background": "", "description": "给定一个正整数 $n$，问一个正方形能否被分割为 $n$ 个小正方形（**不要求大小相等**），输出 `Yes` 或 `No`。多组数据。\n\n分割的不严格定义可以理解为切一刀。但是切出的这一刀必须是线段，且其端点必须在正方形的边界上或先前切出的线段上。", "inputFormat": "第一行一个正整数 $T$。\n\n对于每组数据，一行一个正整数 $n$。", "outputFormat": "对于每组数据，分别一行一个字符串，`Yes` 或 `No` 表示方案的存在与否。", "hint": "### 样例解释 1\n\n显然，正方形无法分割为 $3$ 个小正方形；\\\n由于 $4 = 2^2$，$256 = 16^2$，则它们均能被分割成若干个全等的小正方形。\n\n### 数据规模与约定\n\n+ Subtask 0（10 pts）：$n$ 是偶数。\n+ Subtask 1（35 pts）：$n \\leq 8$。\n+ Subtask 2（55 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^5$，$1 \\leq n \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」water problem", "background": "", "description": "给定一个正整数 $n$，问一个正方形能否被分割为 $n$ 个小正方形（**不要求大小相等**），输出 `Yes` 或 `No`。多组数据。\n\n分割的不严格定义可以理解为切一刀。但是切出的这一刀必须是线段，且其端点必须在正方形的边界上或先前切出的线段上。", "inputFormat": "第一行一个正整数 $T$。\n\n对于每组数据，一行一个正整数 $n$。", "outputFormat": "对于每组数据，分别一行一个字符串，`Yes` 或 `No` 表示方案的存在与否。", "hint": "### 样例解释 1\n\n显然，正方形无法分割为 $3$ 个小正方形；\\\n由于 $4 = 2^2$，$256 = 16^2$，则它们均能被分割成若干个全等的小正方形。\n\n### 数据规模与约定\n\n+ Subtask 0（10 pts）：$n$ 是偶数。\n+ Subtask 1（35 pts）：$n \\leq 8$。\n+ Subtask 2（55 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^5$，$1 \\leq n \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9914", "type": "P", "difficulty": 3, "samples": [["3 3\n1 2 3\n3 2 1", "1"], ["3 3\n2 5 1\n83 101 98", "0"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛", "双指针 two-pointer", "哈希表"], "title": "「RiOI-03」匀速相遇", "background": "当大家都在加速时，我与你，在人生中的十字路口，匀速地相遇了。\n\n确是惊动我心的一瞥，却是无法逗留的遗憾，我们再次，朝着自己的方向匀速奔跑。下次再见，又会是什么时候呢……", "description": "平面直角坐标系上有 $n + m$ 个点，其中：\n\n- 有 $n$ 个 $\\rm A$ 类点，它们在初始时依次位于位置 $(1, 0), (2, 0), (3, 0), \\dots, (n, 0)$。\n- 有 $m$ 个 $\\rm B$ 类点，它们在初始时依次位于位置 $(0, 1), (0, 2), (0, 3), \\dots, (0, m)$。\n\n在某一个时刻，$\\rm A, B$ 类点同时开始运动。具体地：\n\n- 对于第 $i$ 个 $\\rm A$ 类点，其以 $a_i$ 个单位长度每秒的速度向上（即 $y$ 轴正方向）匀速运动。特别地，若 $a_i = 0$，则该点始终保持静止。\n- 对于第 $i$ 个 $\\rm B$ 类点，其以 $b_i$ 个单位长度每秒的速度向右（即 $x$ 轴正方向）匀速运动。特别地，若 $b_i = 0$，则该点始终保持静止。\n\n相遇与分离实在是再平凡不过的了。作为匆匆时光里的一名过客，在这个你暂留的驿站里，你能否帮小 T 解决这个简单的问题：求出有多少点对会在某个时刻相遇，即它们在某一刻共点。\n\n由于你无法使时间静止，所以所有点无论相遇与否，都会永无止境地运动下去。祝愿在这道路上奔跑的你，能有一天与理想匀速相遇，永不停息。", "inputFormat": "第一行两个正整数 $n, m$。\n\n第二行 $n$ 个整数 $a_1\\dots a_n$，依次表示第 $1\\dots n$ 个 $\\rm A$ 类点的运动速度。\n\n第三行 $m$ 个整数 $b_1\\dots b_m$，依次表示第 $1\\dots m$ 个 $\\rm B$ 类点的运动速度。", "outputFormat": "一行一个整数，表示有多少点对会在某个时刻相遇。", "hint": "### 样例解释 1\n\n当 $t = 1$ 时，第 $2$ 个 $\\rm A$ 类点和第 $2$ 个 $\\rm B$ 类点同时到达点 $(2, 2)$。这也是在本组样例中的唯一一次相遇，故输出 $1$。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n+ Subtask 0（10 pts）：$n \\leq 10$，$m \\leq 10$。\n+ Subtask 1（20 pts）：$n \\leq 5\\times 10^3$，$m \\leq 5\\times 10^3$。\n+ Subtask 2（30 pts）：保证 $\\forall a_i \\geq 1$，$\\forall b_i \\geq 1$。\n+ Subtask 3（40 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq n, m \\leq 10^6$，$0 \\leq a_i, b_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」匀速相遇", "background": "当大家都在加速时，我与你，在人生中的十字路口，匀速地相遇了。\n\n确是惊动我心的一瞥，却是无法逗留的遗憾，我们再次，朝着自己的方向匀速奔跑。下次再见，又会是什么时候呢……", "description": "平面直角坐标系上有 $n + m$ 个点，其中：\n\n- 有 $n$ 个 $\\rm A$ 类点，它们在初始时依次位于位置 $(1, 0), (2, 0), (3, 0), \\dots, (n, 0)$。\n- 有 $m$ 个 $\\rm B$ 类点，它们在初始时依次位于位置 $(0, 1), (0, 2), (0, 3), \\dots, (0, m)$。\n\n在某一个时刻，$\\rm A, B$ 类点同时开始运动。具体地：\n\n- 对于第 $i$ 个 $\\rm A$ 类点，其以 $a_i$ 个单位长度每秒的速度向上（即 $y$ 轴正方向）匀速运动。特别地，若 $a_i = 0$，则该点始终保持静止。\n- 对于第 $i$ 个 $\\rm B$ 类点，其以 $b_i$ 个单位长度每秒的速度向右（即 $x$ 轴正方向）匀速运动。特别地，若 $b_i = 0$，则该点始终保持静止。\n\n相遇与分离实在是再平凡不过的了。作为匆匆时光里的一名过客，在这个你暂留的驿站里，你能否帮小 T 解决这个简单的问题：求出有多少点对会在某个时刻相遇，即它们在某一刻共点。\n\n由于你无法使时间静止，所以所有点无论相遇与否，都会永无止境地运动下去。祝愿在这道路上奔跑的你，能有一天与理想匀速相遇，永不停息。", "inputFormat": "第一行两个正整数 $n, m$。\n\n第二行 $n$ 个整数 $a_1\\dots a_n$，依次表示第 $1\\dots n$ 个 $\\rm A$ 类点的运动速度。\n\n第三行 $m$ 个整数 $b_1\\dots b_m$，依次表示第 $1\\dots m$ 个 $\\rm B$ 类点的运动速度。", "outputFormat": "一行一个整数，表示有多少点对会在某个时刻相遇。", "hint": "### 样例解释 1\n\n当 $t = 1$ 时，第 $2$ 个 $\\rm A$ 类点和第 $2$ 个 $\\rm B$ 类点同时到达点 $(2, 2)$。这也是在本组样例中的唯一一次相遇，故输出 $1$。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n+ Subtask 0（10 pts）：$n \\leq 10$，$m \\leq 10$。\n+ Subtask 1（20 pts）：$n \\leq 5\\times 10^3$，$m \\leq 5\\times 10^3$。\n+ Subtask 2（30 pts）：保证 $\\forall a_i \\geq 1$，$\\forall b_i \\geq 1$。\n+ Subtask 3（40 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq n, m \\leq 10^6$，$0 \\leq a_i, b_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9915", "type": "P", "difficulty": 4, "samples": [["2 2\n1 1\n2 0", "3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "O2优化", "位运算", "洛谷月赛", "Ad-hoc"], "title": "「RiOI-03」3-2", "background": "> Heart beat to death[.](https://www.luogu.com.cn/problem/P9304)", "description": "给定一个正整数 $n$。将 $[0,2^n)$ 中每个整数的二进制最低 $n$ 位**从低到高**依次写在一个 $2^n\\times n$ 的矩阵上。**矩阵两维的下标都从 $0$ 开始。** 如，当 $n=3$ 时，矩阵是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5f6v9pru.png?x-oss-process=image/resize,m_lfit,h_200,w_265)\n\n给定 $q$ 次询问，每次询问这个矩阵下标为 $(x,y)$ 的格子所在的四连通块大小对 $998244353$ 取模的值。\n", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来 $q$ 行，每行两个非负整数 $x,y$，表示一次询问。", "outputFormat": "输出 $q$ 行，每行一个正整数，表示每次询问答案对 $998244353$ 取模的值。", "hint": "#### 【样例 #1 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4mglp4cn.png?x-oss-process=image/resize,m_lfit,h_200)\n\n图为 $n=2$ 时的矩阵，其中同一个颜色的为一个四连通块。\n\n***\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n| $\\text{SubTask}$ | 分值 | $n\\le$ | $q\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $5$ | $15$ | $15$ |\n| $1$ | $20$ | $15$ | $5\\times 10^5$ |\n| $2$ | $25$ | $5\\times 10^3$ | $5\\times 10^3$ |\n| $3$ | $50$ | $10^{18}$ | $5\\times 10^5$ |\n\n对于 $100\\%$ 的数据，$0\\le y\\lt n\\le 10^{18}$，$0\\le x\\lt \\min(2^n, 10^{18})$，$1\\le q\\le 5\\times 10^5$。\n\n**请选用较快的输入输出方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」3-2", "background": "> Heart beat to death[.](https://www.luogu.com.cn/problem/P9304)", "description": "给定一个正整数 $n$。将 $[0,2^n)$ 中每个整数的二进制最低 $n$ 位**从低到高**依次写在一个 $2^n\\times n$ 的矩阵上。**矩阵两维的下标都从 $0$ 开始。** 如，当 $n=3$ 时，矩阵是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5f6v9pru.png?x-oss-process=image/resize,m_lfit,h_200,w_265)\n\n给定 $q$ 次询问，每次询问这个矩阵下标为 $(x,y)$ 的格子所在的四连通块大小对 $998244353$ 取模的值。\n", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来 $q$ 行，每行两个非负整数 $x,y$，表示一次询问。", "outputFormat": "输出 $q$ 行，每行一个正整数，表示每次询问答案对 $998244353$ 取模的值。", "hint": "#### 【样例 #1 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4mglp4cn.png?x-oss-process=image/resize,m_lfit,h_200)\n\n图为 $n=2$ 时的矩阵，其中同一个颜色的为一个四连通块。\n\n***\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n| $\\text{SubTask}$ | 分值 | $n\\le$ | $q\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $5$ | $15$ | $15$ |\n| $1$ | $20$ | $15$ | $5\\times 10^5$ |\n| $2$ | $25$ | $5\\times 10^3$ | $5\\times 10^3$ |\n| $3$ | $50$ | $10^{18}$ | $5\\times 10^5$ |\n\n对于 $100\\%$ 的数据，$0\\le y\\lt n\\le 10^{18}$，$0\\le x\\lt \\min(2^n, 10^{18})$，$1\\le q\\le 5\\times 10^5$。\n\n**请选用较快的输入输出方式。**", "locale": "zh-CN"}}}
{"pid": "P9916", "type": "P", "difficulty": 6, "samples": [["1\n6 6 6\n\n-\n\n-\n\n-\n\n+\n\n0\n\n\n", "\n\n? 1 1\n\n? 5 1 2 3 4 5\n\n? 3 2 4 6\n\n? 1 4\n\n? 3 1 5 6\n\n! 1"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「RiOI-03」Just a Q. (Easy ver.)", "background": "「Yes, I am Q.」\n\n面前的小 R 莞尔一笑。\n\n+ 保证本题的任何合理的部分分或正解的 std + spj 均可以在当前数据下，$400$ ms 的时间限制、$32$ MB 的空间限制内正确运行并获得 AC 状态。\n+ 本题不添加仅为无意义地卡满 spj 运行时间的 hack 数据。\n\n**请注意，本题只有约束范围与困难版不同，且两个版本的约束范围并不完全重叠。**", "description": "**这是一道交互题。**\n\n小 R 有一个变量 $Q$。$Q$ 初始为 $0$。\n\n小 R 有 $n$ 个隐藏的整数 $q_1 \\dots q_n$，满足 $1 \\leq \\lvert q_i \\rvert \\leq V$，且有且仅有一个 $i$ 满足 $q_i \\lt 0$，而面前的你，需要得出这个满足 $q_i \\lt 0$ 的下标 $i$。\n\n小 R 承诺不会让你以仅仅 $\\frac{1}{n}$ 的几率盲猜，所以她可以允许你进行最多 $k$ 次询问。每次询问，你可以向小 R 给出**可重**正整数集合 $S$ 满足 $0 \\leq \\lvert S \\rvert \\leq S_{\\max}$ 且 $\\forall i \\in S, i \\leq n$，她会计算 $M = \\prod\\limits_{i\\in S}q_i$，然后让 $Q \\leftarrow Q + M$。特殊地，若 $S$ 为空集，则 $M = 1$。\n\n一次询问后，小 R 会向你给出此时的 $\\text{sgn}(Q)$（为 `+`，`-` 或 `0`），表示 $Q$ 的符号。具体地，若 $Q \\gt 0$，小 R 返回 `+`；若 $Q \\lt 0$，小 R 返回 `-`；否则返回 `0`。\n\n请你在不超过 $k$ 次询问后，找到那个满足 $q_i \\lt 0$ 的下标 $i$。\n\n**保证对于所有数据，满足 $q_i \\lt 0$ 的下标 $i$ 是在 $[1, n]$ 内均匀随机选取的。请注意报告下标属于一次询问。**", "inputFormat": "### 交互格式\n\n第一行，输入三个正整数 $n, k, S_{\\max}$。\n\n在此之后，你应当进行若干次询问。\n\n对于你的每组询问，输出 $?\\ m\\ s_1\\ s_2 \\dots s_m$，表示给出一个**可重**正整数集合 $S$，其大小为 $m$，你需要保证 $0 \\leq m \\leq S_{\\max}$。此外，同时应有 $1 \\leq s_i \\leq n$，描述这个集合里的元素编号。\n\n如果你已经得到答案，请输出 $!\\ i$，满足 $1 \\leq i \\leq n$，代表你得到 $q_i \\lt 0$，在这之后你应当立即退出本轮交互。\n\n每次你输出之后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n每次询问并刷新缓冲区后，你将从标准输入中输入一个字符，字符为 `+`，`-` 或 `0`，表示当前 $Q$ 的符号 $\\text{sgn}(Q)$。\n\n### 输入格式\n\n本题有多组数据。\n\n第一行，一个整数 $T$ 表示数据组数。\n\n对于每一组数据，请按照 **【交互格式】** 进行交互。当你报告下标后：\n\n+ 如果你给出的下标正确：\n\t+ 如果这是最后一组数据，交互库退出并返回 Accepted；\n\t+ 如果这不是最后一组数据，你应当接着读入 $n, k, S_{\\max}$ 以进行下一组数据的交互。\n+ 否则，下标错误，交互库会立刻终止，返回 Unaccepted。", "outputFormat": "见 **【输入格式】**。", "hint": "### 样例解释 1\n\n$q = \\{-1, 1, 4, 5, 1, 4\\}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（5 pts）：$q_i \\neq 1$ 且 $q_i \\neq -1$。\n+ Subtask 1（10 pts）：$q_i \\neq -1$，$k = 2n$。\n+ Subtask 2（10 pts）：$q_i \\neq 1$，$k = 2n$。\n+ Subtask 3（9 pts）：$n = 13$，$k = 5000$。\n+ Subtask 4（11 pts）：$n = 13$，$k = 2500$。\n+ Subtask 5（20 pts）：$k = 2n$。\n+ Subtask 6（35 pts）：无特殊限制。\n\n对于每组数据，$1 \\leq n \\leq 200$，$1 \\leq V \\leq 10^6$，$n \\leq k \\leq 5\\times 10^3$，$S_{\\max} = n$。\n\n对于每个测试点，$1 \\leq T \\leq 500$，$\\sum n^2 \\leq 2\\times 10^5$，$\\sum k \\leq 2\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」Just a Q. (Easy ver.)", "background": "「Yes, I am Q.」\n\n面前的小 R 莞尔一笑。\n\n+ 保证本题的任何合理的部分分或正解的 std + spj 均可以在当前数据下，$400$ ms 的时间限制、$32$ MB 的空间限制内正确运行并获得 AC 状态。\n+ 本题不添加仅为无意义地卡满 spj 运行时间的 hack 数据。\n\n**请注意，本题只有约束范围与困难版不同，且两个版本的约束范围并不完全重叠。**", "description": "**这是一道交互题。**\n\n小 R 有一个变量 $Q$。$Q$ 初始为 $0$。\n\n小 R 有 $n$ 个隐藏的整数 $q_1 \\dots q_n$，满足 $1 \\leq \\lvert q_i \\rvert \\leq V$，且有且仅有一个 $i$ 满足 $q_i \\lt 0$，而面前的你，需要得出这个满足 $q_i \\lt 0$ 的下标 $i$。\n\n小 R 承诺不会让你以仅仅 $\\frac{1}{n}$ 的几率盲猜，所以她可以允许你进行最多 $k$ 次询问。每次询问，你可以向小 R 给出**可重**正整数集合 $S$ 满足 $0 \\leq \\lvert S \\rvert \\leq S_{\\max}$ 且 $\\forall i \\in S, i \\leq n$，她会计算 $M = \\prod\\limits_{i\\in S}q_i$，然后让 $Q \\leftarrow Q + M$。特殊地，若 $S$ 为空集，则 $M = 1$。\n\n一次询问后，小 R 会向你给出此时的 $\\text{sgn}(Q)$（为 `+`，`-` 或 `0`），表示 $Q$ 的符号。具体地，若 $Q \\gt 0$，小 R 返回 `+`；若 $Q \\lt 0$，小 R 返回 `-`；否则返回 `0`。\n\n请你在不超过 $k$ 次询问后，找到那个满足 $q_i \\lt 0$ 的下标 $i$。\n\n**保证对于所有数据，满足 $q_i \\lt 0$ 的下标 $i$ 是在 $[1, n]$ 内均匀随机选取的。请注意报告下标属于一次询问。**", "inputFormat": "### 交互格式\n\n第一行，输入三个正整数 $n, k, S_{\\max}$。\n\n在此之后，你应当进行若干次询问。\n\n对于你的每组询问，输出 $?\\ m\\ s_1\\ s_2 \\dots s_m$，表示给出一个**可重**正整数集合 $S$，其大小为 $m$，你需要保证 $0 \\leq m \\leq S_{\\max}$。此外，同时应有 $1 \\leq s_i \\leq n$，描述这个集合里的元素编号。\n\n如果你已经得到答案，请输出 $!\\ i$，满足 $1 \\leq i \\leq n$，代表你得到 $q_i \\lt 0$，在这之后你应当立即退出本轮交互。\n\n每次你输出之后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n每次询问并刷新缓冲区后，你将从标准输入中输入一个字符，字符为 `+`，`-` 或 `0`，表示当前 $Q$ 的符号 $\\text{sgn}(Q)$。\n\n### 输入格式\n\n本题有多组数据。\n\n第一行，一个整数 $T$ 表示数据组数。\n\n对于每一组数据，请按照 **【交互格式】** 进行交互。当你报告下标后：\n\n+ 如果你给出的下标正确：\n\t+ 如果这是最后一组数据，交互库退出并返回 Accepted；\n\t+ 如果这不是最后一组数据，你应当接着读入 $n, k, S_{\\max}$ 以进行下一组数据的交互。\n+ 否则，下标错误，交互库会立刻终止，返回 Unaccepted。", "outputFormat": "见 **【输入格式】**。", "hint": "### 样例解释 1\n\n$q = \\{-1, 1, 4, 5, 1, 4\\}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（5 pts）：$q_i \\neq 1$ 且 $q_i \\neq -1$。\n+ Subtask 1（10 pts）：$q_i \\neq -1$，$k = 2n$。\n+ Subtask 2（10 pts）：$q_i \\neq 1$，$k = 2n$。\n+ Subtask 3（9 pts）：$n = 13$，$k = 5000$。\n+ Subtask 4（11 pts）：$n = 13$，$k = 2500$。\n+ Subtask 5（20 pts）：$k = 2n$。\n+ Subtask 6（35 pts）：无特殊限制。\n\n对于每组数据，$1 \\leq n \\leq 200$，$1 \\leq V \\leq 10^6$，$n \\leq k \\leq 5\\times 10^3$，$S_{\\max} = n$。\n\n对于每个测试点，$1 \\leq T \\leq 500$，$\\sum n^2 \\leq 2\\times 10^5$，$\\sum k \\leq 2\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9917", "type": "P", "difficulty": 6, "samples": [["5\n0 0 3\n0 1 2\n0 1 4\n1 0 2\n1 1 4", "28\n32\n36\n36\n32\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树状数组", "洛谷原创", "O2优化", "洛谷月赛", "分类讨论"], "title": "「RiOI-03」网格", "background": "2022 年某次集训讲课，课件中出现了一道以 MLE 真名首字母严格顺序作为输入变量的题目。MLE 就想在自己的题目里用 [vectorwyx](https://www.luogu.com.cn/user/238408) 的首字母当输入变量，于是就有了这道题。\n\n可惜如今 [vectorwyx](https://www.luogu.com.cn/user/238408) 已经退役了，人生有梦，各自精彩。\n", "description": "**请仔细阅读本题数据范围。**\n\n给定一个 $n\\times n$ 的正方形网格，一共有 $n$ 行，$n$ 列，初始时所有网格均为红色。有 $n$ 组询问，每次询问会把一整行或一整列的颜色全部染成红色或白色，每次询问后输出所有红色网格的周长，而且询问之间不独立。", "inputFormat": "第一行为一个正整数 $n$；\n\n接下来的 $n$ 行，每行三个正整数 $w,y,x$。$w$ 表示颜色，$w=1$ 表示染成红色，$w=0$ 表示染成白色。$y$ 表示行或列，$y=1$ 表示把第 $x$ 行全部染色，$y=0$ 表示把第 $x$ 列全部染色。", "outputFormat": "一共有 $n$ 行，每行一个整数，表示每次修改后的红色部分周长。", "hint": "### 样例解释\n\n[样例图片解释](https://www.luogu.com.cn/paste/rvrhouei)\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$3\\leq n \\leq 10^6 $，$1<x<n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|} \\hline\n\\textbf{\\textsf{\\#}}  & \\bm{{n\\le}} & \\textbf{\\textsf{特殊性质}} & \\textbf{\\textsf{\\#}}  & \\bm{{n\\le}} & \\textbf{\\textsf{特殊性质}}\\cr\\hline\n1  & 5 & - & \n11  & 10^5 & - \\cr\\hline\n2  & 100 & - & \n12  & 10^5 & - \\cr\\hline\n3  & 100 & - & \n13  & 10^5 & - \\cr\\hline\n4  & 2000 & \\textbf{A} & \n14  & 10^5 & - \\cr\\hline\n5  & 2000 & \\textbf{B} & \n15  & 10^6 & - \\cr\\hline\n6  & 2000 & - & \n16  & 10^6 & - \\cr\\hline\n7  & 10^5 & \\textbf{AB} & \n17  & 10^6 & - \\cr\\hline\n8  & 10^5 & \\textbf{B} & \n18  & 10^6 & - \\cr\\hline\n9  & 10^5 & \\textbf{A} & \n19  & 10^6 & - \\cr\\hline\n10  & 10^5 & - & \n20  & 10^6 & - \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：保证 $w=0$。\n- 特殊性质 $\\bf B$：保证 $y=0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」网格", "background": "2022 年某次集训讲课，课件中出现了一道以 MLE 真名首字母严格顺序作为输入变量的题目。MLE 就想在自己的题目里用 [vectorwyx](https://www.luogu.com.cn/user/238408) 的首字母当输入变量，于是就有了这道题。\n\n可惜如今 [vectorwyx](https://www.luogu.com.cn/user/238408) 已经退役了，人生有梦，各自精彩。\n", "description": "**请仔细阅读本题数据范围。**\n\n给定一个 $n\\times n$ 的正方形网格，一共有 $n$ 行，$n$ 列，初始时所有网格均为红色。有 $n$ 组询问，每次询问会把一整行或一整列的颜色全部染成红色或白色，每次询问后输出所有红色网格的周长，而且询问之间不独立。", "inputFormat": "第一行为一个正整数 $n$；\n\n接下来的 $n$ 行，每行三个正整数 $w,y,x$。$w$ 表示颜色，$w=1$ 表示染成红色，$w=0$ 表示染成白色。$y$ 表示行或列，$y=1$ 表示把第 $x$ 行全部染色，$y=0$ 表示把第 $x$ 列全部染色。", "outputFormat": "一共有 $n$ 行，每行一个整数，表示每次修改后的红色部分周长。", "hint": "### 样例解释\n\n[样例图片解释](https://www.luogu.com.cn/paste/rvrhouei)\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$3\\leq n \\leq 10^6 $，$1<x<n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|} \\hline\n\\textbf{\\textsf{\\#}}  & \\bm{{n\\le}} & \\textbf{\\textsf{特殊性质}} & \\textbf{\\textsf{\\#}}  & \\bm{{n\\le}} & \\textbf{\\textsf{特殊性质}}\\cr\\hline\n1  & 5 & - & \n11  & 10^5 & - \\cr\\hline\n2  & 100 & - & \n12  & 10^5 & - \\cr\\hline\n3  & 100 & - & \n13  & 10^5 & - \\cr\\hline\n4  & 2000 & \\textbf{A} & \n14  & 10^5 & - \\cr\\hline\n5  & 2000 & \\textbf{B} & \n15  & 10^6 & - \\cr\\hline\n6  & 2000 & - & \n16  & 10^6 & - \\cr\\hline\n7  & 10^5 & \\textbf{AB} & \n17  & 10^6 & - \\cr\\hline\n8  & 10^5 & \\textbf{B} & \n18  & 10^6 & - \\cr\\hline\n9  & 10^5 & \\textbf{A} & \n19  & 10^6 & - \\cr\\hline\n10  & 10^5 & - & \n20  & 10^6 & - \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：保证 $w=0$。\n- 特殊性质 $\\bf B$：保证 $y=0$。", "locale": "zh-CN"}}}
{"pid": "P9918", "type": "P", "difficulty": 6, "samples": [["1\n6 6 6\n\n-\n\n-\n\n-\n\n+\n\n0\n\n\n", "\n\n? 1 1\n\n? 5 1 2 3 4 5\n\n? 3 2 4 6\n\n? 1 4\n\n? 3 1 5 6\n\n! 1"]], "limits": {"time": [1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「RiOI-03」Just a Q. (Hard ver.)", "background": "「Yes, I am Q.」\n\n面前的小 R 莞尔一笑。\n\n+ 保证本题的任何合理的部分分或正解的 std + spj 均可以在当前数据下，$900$ ms 的时间限制、$32$ MB 的空间限制内正确运行并获得 AC 状态。\n+ 本题不添加仅为无意义地卡满 spj 运行时间的 hack 数据。\n\n**请注意，本题只有约束范围与普通版不同，且两个版本的约束范围并不完全重叠。**", "description": "**这是一道交互题。**\n\n小 R 有一个变量 $Q$。$Q$ 初始为 $0$。\n\n小 R 有 $n$ 个隐藏的整数 $q_1 \\dots q_n$，满足 $1 \\leq \\lvert q_i \\rvert \\leq V$，且有且仅有一个 $i$ 满足 $q_i \\lt 0$，而面前的你，需要得出这个满足 $q_i \\lt 0$ 的下标 $i$。\n\n小 R 承诺不会让你以仅仅 $\\frac{1}{n}$ 的几率盲猜，所以她可以允许你进行最多 $k$ 次询问。每次询问，你可以向小 R 给出**可重**正整数集合 $S$ 满足 $0 \\leq \\lvert S \\rvert \\leq S_{\\max}$ 且 $\\forall i \\in S, i \\leq n$，她会计算 $M = \\prod\\limits_{i\\in S}q_i$，然后让 $Q \\leftarrow Q + M$。特殊地，若 $S$ 为空集，则 $M = 1$。\n\n一次询问后，小 R 会向你给出此时的 $\\text{sgn}(Q)$（为 `+`，`-` 或 `0`），表示 $Q$ 的符号。具体地，若 $Q \\gt 0$，小 R 返回 `+`；若 $Q \\lt 0$，小 R 返回 `-`；否则返回 `0`。\n\n请你在不超过 $k$ 次询问后，找到那个满足 $q_i \\lt 0$ 的下标 $i$。\n\n**保证对于所有数据，满足 $q_i \\lt 0$ 的下标 $i$ 是在 $[1, n]$ 内均匀随机选取的。请注意报告下标属于一次询问。**", "inputFormat": "### 交互格式\n\n第一行，输入三个正整数 $n, k, S_{\\max}$。\n\n在此之后，你应当进行若干次询问。\n\n对于你的每组询问，输出 $?\\ m\\ s_1\\ s_2 \\dots s_m$，表示给出一个**可重**正整数集合 $S$，其大小为 $m$，你需要保证 $0 \\leq m \\leq S_{\\max}$。此外，同时应有 $1 \\leq s_i \\leq n$，描述这个集合里的元素编号。\n\n如果你已经得到答案，请输出 $!\\ i$，满足 $1 \\leq i \\leq n$，代表你得到 $q_i \\lt 0$，在这之后你应当立即退出本轮交互。\n\n每次你输出之后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n每次询问并刷新缓冲区后，你将从标准输入中输入一个字符，字符为 `+`，`-` 或 `0`，表示当前 $Q$ 的符号 $\\text{sgn}(Q)$。\n\n### 输入格式\n\n本题有多组数据。\n\n第一行，一个整数 $T$ 表示数据组数。\n\n对于每一组数据，请按照 **【交互格式】** 进行交互。当你报告下标后：\n\n+ 如果你给出的下标正确：\n\t+ 如果这是最后一组数据，交互库退出并返回 Accepted；\n\t+ 如果这不是最后一组数据，你应当接着读入 $n, k, S_{\\max}$ 以进行下一组数据的交互。\n+ 否则，下标错误，交互库会立刻终止，返回 Unaccepted。", "outputFormat": "见 **【输入格式】**。", "hint": "### 样例解释 1\n\n$q = \\{-1, 1, 4, 5, 1, 4\\}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\leq$ | $T \\leq$ | $k = $ | $S_{\\max} = $ | 分值 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $0$ | $200$ | $500$ | $20$ | $20n + 1$ | $11$ |\n| $1$ | $1000$ | $50$ | $41$ | $8n + 10$ | $25$ |\n| $2$ | $1000$ | $50$ | $50$ | $6n + 10$ | $30$ |\n| $3$ | $10^4$ | $10$ | $39$ | $\\lceil 1.5n\\rceil + 10$ | $34$ |\n\n对于子任务 $0, 1, 3$，若通过所有测试点则获得全部分数，否则获得 $0$ 分。\n\n对于子任务 $2$：\n\n+ 你需要保证你所使用的实际操作次数 $k'$ 满足 $0 \\leq k' \\leq 50$。\n+ 你需要保证你所使用的实际操作次数 $S'$ 满足 $0 \\leq S' \\leq 6n + 10$。\n+ 单个测试点的得分为 $\\left(1 - \\max(\\frac{\\max k' - 35}{20}, \\max(\\frac{S' - 3n - 10}{4n + 1}), 0)\\right)\\times 30$。\n+ Subtask 的得分取所有测试点的得分最小值。\n\n对于所有数据，$1 \\leq V \\leq 10^6$，$1 \\leq n \\leq 10^4$，$1 \\leq T \\leq 500$，**注意由于交互库限制 $\\bm{n, T}$ 不会同时取到最大值**；此外，对每个子任务 $k, S_{\\max}$ 的值已经给出。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」Just a Q. (Hard ver.)", "background": "「Yes, I am Q.」\n\n面前的小 R 莞尔一笑。\n\n+ 保证本题的任何合理的部分分或正解的 std + spj 均可以在当前数据下，$900$ ms 的时间限制、$32$ MB 的空间限制内正确运行并获得 AC 状态。\n+ 本题不添加仅为无意义地卡满 spj 运行时间的 hack 数据。\n\n**请注意，本题只有约束范围与普通版不同，且两个版本的约束范围并不完全重叠。**", "description": "**这是一道交互题。**\n\n小 R 有一个变量 $Q$。$Q$ 初始为 $0$。\n\n小 R 有 $n$ 个隐藏的整数 $q_1 \\dots q_n$，满足 $1 \\leq \\lvert q_i \\rvert \\leq V$，且有且仅有一个 $i$ 满足 $q_i \\lt 0$，而面前的你，需要得出这个满足 $q_i \\lt 0$ 的下标 $i$。\n\n小 R 承诺不会让你以仅仅 $\\frac{1}{n}$ 的几率盲猜，所以她可以允许你进行最多 $k$ 次询问。每次询问，你可以向小 R 给出**可重**正整数集合 $S$ 满足 $0 \\leq \\lvert S \\rvert \\leq S_{\\max}$ 且 $\\forall i \\in S, i \\leq n$，她会计算 $M = \\prod\\limits_{i\\in S}q_i$，然后让 $Q \\leftarrow Q + M$。特殊地，若 $S$ 为空集，则 $M = 1$。\n\n一次询问后，小 R 会向你给出此时的 $\\text{sgn}(Q)$（为 `+`，`-` 或 `0`），表示 $Q$ 的符号。具体地，若 $Q \\gt 0$，小 R 返回 `+`；若 $Q \\lt 0$，小 R 返回 `-`；否则返回 `0`。\n\n请你在不超过 $k$ 次询问后，找到那个满足 $q_i \\lt 0$ 的下标 $i$。\n\n**保证对于所有数据，满足 $q_i \\lt 0$ 的下标 $i$ 是在 $[1, n]$ 内均匀随机选取的。请注意报告下标属于一次询问。**", "inputFormat": "### 交互格式\n\n第一行，输入三个正整数 $n, k, S_{\\max}$。\n\n在此之后，你应当进行若干次询问。\n\n对于你的每组询问，输出 $?\\ m\\ s_1\\ s_2 \\dots s_m$，表示给出一个**可重**正整数集合 $S$，其大小为 $m$，你需要保证 $0 \\leq m \\leq S_{\\max}$。此外，同时应有 $1 \\leq s_i \\leq n$，描述这个集合里的元素编号。\n\n如果你已经得到答案，请输出 $!\\ i$，满足 $1 \\leq i \\leq n$，代表你得到 $q_i \\lt 0$，在这之后你应当立即退出本轮交互。\n\n每次你输出之后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n每次询问并刷新缓冲区后，你将从标准输入中输入一个字符，字符为 `+`，`-` 或 `0`，表示当前 $Q$ 的符号 $\\text{sgn}(Q)$。\n\n### 输入格式\n\n本题有多组数据。\n\n第一行，一个整数 $T$ 表示数据组数。\n\n对于每一组数据，请按照 **【交互格式】** 进行交互。当你报告下标后：\n\n+ 如果你给出的下标正确：\n\t+ 如果这是最后一组数据，交互库退出并返回 Accepted；\n\t+ 如果这不是最后一组数据，你应当接着读入 $n, k, S_{\\max}$ 以进行下一组数据的交互。\n+ 否则，下标错误，交互库会立刻终止，返回 Unaccepted。", "outputFormat": "见 **【输入格式】**。", "hint": "### 样例解释 1\n\n$q = \\{-1, 1, 4, 5, 1, 4\\}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\leq$ | $T \\leq$ | $k = $ | $S_{\\max} = $ | 分值 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $0$ | $200$ | $500$ | $20$ | $20n + 1$ | $11$ |\n| $1$ | $1000$ | $50$ | $41$ | $8n + 10$ | $25$ |\n| $2$ | $1000$ | $50$ | $50$ | $6n + 10$ | $30$ |\n| $3$ | $10^4$ | $10$ | $39$ | $\\lceil 1.5n\\rceil + 10$ | $34$ |\n\n对于子任务 $0, 1, 3$，若通过所有测试点则获得全部分数，否则获得 $0$ 分。\n\n对于子任务 $2$：\n\n+ 你需要保证你所使用的实际操作次数 $k'$ 满足 $0 \\leq k' \\leq 50$。\n+ 你需要保证你所使用的实际操作次数 $S'$ 满足 $0 \\leq S' \\leq 6n + 10$。\n+ 单个测试点的得分为 $\\left(1 - \\max(\\frac{\\max k' - 35}{20}, \\max(\\frac{S' - 3n - 10}{4n + 1}), 0)\\right)\\times 30$。\n+ Subtask 的得分取所有测试点的得分最小值。\n\n对于所有数据，$1 \\leq V \\leq 10^6$，$1 \\leq n \\leq 10^4$，$1 \\leq T \\leq 500$，**注意由于交互库限制 $\\bm{n, T}$ 不会同时取到最大值**；此外，对每个子任务 $k, S_{\\max}$ 的值已经给出。", "locale": "zh-CN"}}}
{"pid": "P9919", "type": "P", "difficulty": 7, "samples": [["2 1\n1 1 1", "15"], ["3 2\n1 1 1 1", "40"], ["12 1\n1 1 4 5 1 4 1 9 1 9 8 1 0", "721168027"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "二分图", "生成函数", "分块", "快速数论变换 NTT", "洛谷月赛"], "title": "「RiOI-03」A Journey to the Moonlight", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/hi1cu7o7.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n[加强版链接](/problem/P10286)\n\nKDOI 的业务发展到月亮上了。但是月亮上网速很慢，他们需要解决网速问题。\n\nKDOI 的工作人员研发了一种新型无线局域网模块 Wife（WIreless Fidelity Extend），每个模块最多连接两个用户，并且可以选择为其中一位客户提供 $1$ 单位带宽。不过，无论有多少个模块同时为一位客户提供带宽，他的总带宽永远是 $1$。\n\n公司的员工都很懒，经常 ppt 一鸽就是一个月。因此，他们也懒得为 Wife 贴上标签，也就是所有模块间不做区分。另外，为了节省电费，不能有两个模块的工作客户范围完全相同。\n\n现在有 $n$ 个用户购买了服务。当 Wife 系统正式启动时，鹿由器发现了一个问题：可能有些用户没有宽带可以使用！快斗现在手里没有 Wife，只能抢来一个，牺牲一个用户的利益，按一定顺序给所有包括有宽带的用户使用。然而，没有宽带的用户们要求很苛刻，只要没有给他们按注册顺序连续地提供宽带，他们就会威胁鹿由器退钱。\n\n快斗已经忘了他们的注册时间了，只能随机选一个 $1\\sim n$ 的排列来决定提供宽带的顺序。为了让尝试的次数尽量小，他会调整 Wife 连接的用户。他想知道，要让这些顾客平息愤怒，需要尝试的最小期望次数是多少。\n\n特别的，Wife 有两种型号。型号 $1$ 可以选择只连接一位，型号 $2$ 则只能连接两个不同客户。你需要分别计算出这两种型号的答案。\n\n快斗自己肯定~~不~~会做，所以他要让你求出所有 $i\\in[0,n]$ 的结果 $ans_i$。考虑到你如果一个一个汇报会累死的，仁慈的鹿由器会给你数组 $a$，让你输出 $\\sum a_i\\times ans_i$。\n\n", "description": "#### 【形式化题意】\n\n对于一个右部点为 $m$ 个的二分图 $G$，定义它的权值 $w(G)$ 如下：\n\n- 选择一种匹配方案，标记第一个已匹配的右部点。如果不存在这样的点，那么标记第一个未匹配的右部点。\n- 每次随机选择一个 $1,2,\\cdots,m$ 的排列，当未匹配的右部点与被标记的点 **按标号顺序作为一个子段出现在排列中时** 停止操作。\n- $w(G)$ 为在所有匹配方案中操作次数期望的 **最小值**。\n\n将这个二分图 $G$ 定义为 **$k$ 合法** 的，当且仅当：\n\n- 所有左部点的度数在 $k\\sim 2$ 之间。\n- 没有任意两个左部点，与其相邻的点组成的集合相同。\n\n定义 $f(k,x)$ 为所有右部点 $x$ 个，左部点不进行区分的 $k$ 合法二分图 $G$ 的 $w(G)$ 之和。\n\n给定 $n,k,a_{0\\sim n}$，求 $\\sum\\limits^n_ia_if(k,i) \\bmod998244353$。", "inputFormat": "一行两个正整数，分别表示 $n$ 与 Wife 的型号 $k$。\n\n第二行 $n+1$ 个非负整数，分别表示 $a_{0\\sim n}$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "约定一个左部点连接了编号为 $x,y$ 的右部点表示为 $(x,y)$。\n\n#### 【样例 1 解释】\n\n对于 $n=0,1$，答案显然为 $1,2$。\n\n对于 $n=2$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1),(2),(1,2)$\n\n$\\{(1),(2)\\},\\{(1,2),(2)\\},\\{(1,2),(1)\\},\\{(1,2),(1),(2)\\}$\n\n期望相同的二分图被分为一组。答案为 $\\dfrac21+\\dfrac21\\times3+\\dfrac22\\times4=12$，输出 $1\\times1+1\\times2+1\\times12=15$。\n\n#### 【样例 2 解释】\n\n对于 $n=0,1,2$，答案为 $1,1,4$。\n\n对于 $n=3$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1,2),(1,3),(2,3)$\n\n$\\{(1,2),(1,3)\\},\\{(1,2),(2,3)\\},\\{(1,3),(2,3)\\}$\n\n$\\{(1,2),(2,3),(1,3)\\}$\n\n答案为 $\\dfrac61+\\dfrac61\\times3+\\dfrac62\\times3+\\dfrac66=34$。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$0\\le n\\le1.5\\times10^4$，$1\\le k\\le2$，$0\\le a_i<998244353$。\n\n**本题开启捆绑测试**\n\n|$\\text{Subtask}$|$\\text{Score}$|$n\\le $|$k\\ge$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$0$|$5$|$5$|$1$||\n|$1$|$10$|$500$|$2$||\n|$2$|$20$|$500$|$1$|$a_i\\equiv\\dfrac1{i!}$|\n|$3$|$20$|$1.5\\times10^4$|$2$|$a_i\\equiv\\dfrac1{i!}$|\n|$4$|$45$|$1.5\\times10^4$|$1$||", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」A Journey to the Moonlight", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/hi1cu7o7.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n[加强版链接](/problem/P10286)\n\nKDOI 的业务发展到月亮上了。但是月亮上网速很慢，他们需要解决网速问题。\n\nKDOI 的工作人员研发了一种新型无线局域网模块 Wife（WIreless Fidelity Extend），每个模块最多连接两个用户，并且可以选择为其中一位客户提供 $1$ 单位带宽。不过，无论有多少个模块同时为一位客户提供带宽，他的总带宽永远是 $1$。\n\n公司的员工都很懒，经常 ppt 一鸽就是一个月。因此，他们也懒得为 Wife 贴上标签，也就是所有模块间不做区分。另外，为了节省电费，不能有两个模块的工作客户范围完全相同。\n\n现在有 $n$ 个用户购买了服务。当 Wife 系统正式启动时，鹿由器发现了一个问题：可能有些用户没有宽带可以使用！快斗现在手里没有 Wife，只能抢来一个，牺牲一个用户的利益，按一定顺序给所有包括有宽带的用户使用。然而，没有宽带的用户们要求很苛刻，只要没有给他们按注册顺序连续地提供宽带，他们就会威胁鹿由器退钱。\n\n快斗已经忘了他们的注册时间了，只能随机选一个 $1\\sim n$ 的排列来决定提供宽带的顺序。为了让尝试的次数尽量小，他会调整 Wife 连接的用户。他想知道，要让这些顾客平息愤怒，需要尝试的最小期望次数是多少。\n\n特别的，Wife 有两种型号。型号 $1$ 可以选择只连接一位，型号 $2$ 则只能连接两个不同客户。你需要分别计算出这两种型号的答案。\n\n快斗自己肯定~~不~~会做，所以他要让你求出所有 $i\\in[0,n]$ 的结果 $ans_i$。考虑到你如果一个一个汇报会累死的，仁慈的鹿由器会给你数组 $a$，让你输出 $\\sum a_i\\times ans_i$。\n\n", "description": "#### 【形式化题意】\n\n对于一个右部点为 $m$ 个的二分图 $G$，定义它的权值 $w(G)$ 如下：\n\n- 选择一种匹配方案，标记第一个已匹配的右部点。如果不存在这样的点，那么标记第一个未匹配的右部点。\n- 每次随机选择一个 $1,2,\\cdots,m$ 的排列，当未匹配的右部点与被标记的点 **按标号顺序作为一个子段出现在排列中时** 停止操作。\n- $w(G)$ 为在所有匹配方案中操作次数期望的 **最小值**。\n\n将这个二分图 $G$ 定义为 **$k$ 合法** 的，当且仅当：\n\n- 所有左部点的度数在 $k\\sim 2$ 之间。\n- 没有任意两个左部点，与其相邻的点组成的集合相同。\n\n定义 $f(k,x)$ 为所有右部点 $x$ 个，左部点不进行区分的 $k$ 合法二分图 $G$ 的 $w(G)$ 之和。\n\n给定 $n,k,a_{0\\sim n}$，求 $\\sum\\limits^n_ia_if(k,i) \\bmod998244353$。", "inputFormat": "一行两个正整数，分别表示 $n$ 与 Wife 的型号 $k$。\n\n第二行 $n+1$ 个非负整数，分别表示 $a_{0\\sim n}$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "约定一个左部点连接了编号为 $x,y$ 的右部点表示为 $(x,y)$。\n\n#### 【样例 1 解释】\n\n对于 $n=0,1$，答案显然为 $1,2$。\n\n对于 $n=2$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1),(2),(1,2)$\n\n$\\{(1),(2)\\},\\{(1,2),(2)\\},\\{(1,2),(1)\\},\\{(1,2),(1),(2)\\}$\n\n期望相同的二分图被分为一组。答案为 $\\dfrac21+\\dfrac21\\times3+\\dfrac22\\times4=12$，输出 $1\\times1+1\\times2+1\\times12=15$。\n\n#### 【样例 2 解释】\n\n对于 $n=0,1,2$，答案为 $1,1,4$。\n\n对于 $n=3$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1,2),(1,3),(2,3)$\n\n$\\{(1,2),(1,3)\\},\\{(1,2),(2,3)\\},\\{(1,3),(2,3)\\}$\n\n$\\{(1,2),(2,3),(1,3)\\}$\n\n答案为 $\\dfrac61+\\dfrac61\\times3+\\dfrac62\\times3+\\dfrac66=34$。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$0\\le n\\le1.5\\times10^4$，$1\\le k\\le2$，$0\\le a_i<998244353$。\n\n**本题开启捆绑测试**\n\n|$\\text{Subtask}$|$\\text{Score}$|$n\\le $|$k\\ge$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$0$|$5$|$5$|$1$||\n|$1$|$10$|$500$|$2$||\n|$2$|$20$|$500$|$1$|$a_i\\equiv\\dfrac1{i!}$|\n|$3$|$20$|$1.5\\times10^4$|$2$|$a_i\\equiv\\dfrac1{i!}$|\n|$4$|$45$|$1.5\\times10^4$|$1$||", "locale": "zh-CN"}}}
