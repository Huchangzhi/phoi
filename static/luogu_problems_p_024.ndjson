{"pid": "P7070", "type": "P", "difficulty": 5, "samples": [["3 1\n4 3\n2 2\n2 1\n", "15\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "ICPC", "NWRRC"], "title": "[NWRRC 2014] Kebab House", "background": "", "description": "\n\nThe young man Vahtang Bumerang makes kebabs at the world-famous fast-food chain Kebab House. Each kebab contains many ingredients.\n\nThis morning Vahtang has received an order to make $n$ kebabs. At first, he should put $q_{1}$ ingredients to the first kebab, then $q_{2}$ ingredients in the second one and so on. Vahtang spends one second to put one ingredient to a kebab, so it takes $q_{i}$ seconds to make the i-th kebab. When he finishes the kebab he immediately proceeds to the next one.\n\nVahtang often dreams about his lovely boomerang while making kebabs. Each dream takes exactly one second and Vahtang forgets to put one ingredient to kebab during this second. Fortunately, he never dreams twice in any consecutive $(t + 1)$ seconds.\n\nDue to dreams about boomerang, some kebabs may have lesser than the desired number of ingredients, but customers are still happy if the $i$-th kebab has at least $x_{i}$ ingredients in it.\n\nVahtang wants to calculate the number of ways to have dream seconds during his work while keeping all customers happy. Can you help him? The real answer may be very huge, so you have to calculate it modulo $10^{9} + 7$ .\n\n", "inputFormat": "\n\nThe first line of the input file contains two integers $n$ and $t$ — the number of kebabs and minimal possible time between dream seconds $(1 \\le n \\le 1000$ ; $0 \\le t \\le 100)$ .\n\nEach of the next $n$ lines contains two integers $q_{i}, x_{i}$ — the number of ingredients in the $i$-th kebab and the minimum number of ingredients to make the $i$-th customer happy $(1 \\le q_{i} \\le 250$ ; $0 \\le x_{i} \\le q_{i}).$\n\n", "outputFormat": "\n\nThe only line of the output file must contain one integer -- the number of ways to distribute dream seconds modulo $10^{9} + 7$ .\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2014] Kebab House", "background": "", "description": "\n\nThe young man Vahtang Bumerang makes kebabs at the world-famous fast-food chain Kebab House. Each kebab contains many ingredients.\n\nThis morning Vahtang has received an order to make $n$ kebabs. At first, he should put $q_{1}$ ingredients to the first kebab, then $q_{2}$ ingredients in the second one and so on. Vahtang spends one second to put one ingredient to a kebab, so it takes $q_{i}$ seconds to make the i-th kebab. When he finishes the kebab he immediately proceeds to the next one.\n\nVahtang often dreams about his lovely boomerang while making kebabs. Each dream takes exactly one second and Vahtang forgets to put one ingredient to kebab during this second. Fortunately, he never dreams twice in any consecutive $(t + 1)$ seconds.\n\nDue to dreams about boomerang, some kebabs may have lesser than the desired number of ingredients, but customers are still happy if the $i$-th kebab has at least $x_{i}$ ingredients in it.\n\nVahtang wants to calculate the number of ways to have dream seconds during his work while keeping all customers happy. Can you help him? The real answer may be very huge, so you have to calculate it modulo $10^{9} + 7$ .\n\n", "inputFormat": "\n\nThe first line of the input file contains two integers $n$ and $t$ — the number of kebabs and minimal possible time between dream seconds $(1 \\le n \\le 1000$ ; $0 \\le t \\le 100)$ .\n\nEach of the next $n$ lines contains two integers $q_{i}, x_{i}$ — the number of ingredients in the $i$-th kebab and the minimum number of ingredients to make the $i$-th customer happy $(1 \\le q_{i} \\le 250$ ; $0 \\le x_{i} \\le q_{i}).$\n\n", "outputFormat": "\n\nThe only line of the output file must contain one integer -- the number of ways to distribute dream seconds modulo $10^{9} + 7$ .\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2014] Kebab House", "background": "", "description": "年轻人 Vahtang Bumerang 在世界著名的快餐连锁店 Kebab House 制作烤肉串。每个烤肉串包含许多配料。\n\n今天早上，Vahtang 收到了制作 $n$ 个烤肉串的订单。首先，他需要在第一个烤肉串中放入 $q_{1}$ 种配料，然后在第二个烤肉串中放入 $q_{2}$ 种配料，依此类推。Vahtang 花费一秒钟将一种配料放入一个烤肉串中，因此制作第 $i$ 个烤肉串需要 $q_{i}$ 秒。当他完成一个烤肉串后，他会立即开始下一个。\n\nVahtang 在制作烤肉串时经常梦到他心爱的回旋镖。每个梦恰好持续一秒钟，并且在这一秒钟内 Vahtang 会忘记放入一种配料。幸运的是，他从未在任何连续的 $(t + 1)$ 秒内做过两次梦。\n\n由于梦到回旋镖，一些烤肉串可能会少于所需的配料数量，但如果第 $i$ 个烤肉串至少有 $x_{i}$ 种配料，顾客仍然会感到满意。\n\nVahtang 想计算在工作期间做梦的秒数有多少种分配方式，同时让所有顾客满意。你能帮他吗？由于真实答案可能非常大，所以你需要计算它对 $10^{9} + 7$ 取模的结果。", "inputFormat": "输入文件的第一行包含两个整数 $n$ 和 $t$ —— 烤肉串的数量和梦之间的最小可能时间 $(1 \\le n \\le 1000$；$0 \\le t \\le 100)$。\n\n接下来的 $n$ 行中的每一行包含两个整数 $q_{i}, x_{i}$ —— 第 $i$ 个烤肉串中的配料数量和使第 $i$ 个顾客满意的最小配料数量 $(1 \\le q_{i} \\le 250$；$0 \\le x_{i} \\le q_{i})$。", "outputFormat": "输出文件的唯一一行必须包含一个整数——分配梦秒数的方式数量，对 $10^{9} + 7$ 取模。", "hint": "时间限制：2 秒，内存限制：256 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7071", "type": "P", "difficulty": 1, "samples": [["6\n", "4 2"], ["7", "-1"], ["126", "64 32 16 8 4 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2020", "进制", "CSP-J 入门级"], "title": "[CSP-J 2020] 优秀的拆分", "background": "", "description": "一般来说，一个正整数可以拆分成若干个正整数的和。\n\n例如，$1=1$，$10=1+2+3+4$ 等。对于正整数 $n$ 的一种特定拆分，我们称它为“优秀的”，当且仅当在这种拆分下，$n$ 被分解为了若干个**不同**的 $2$ 的**正整数**次幂。注意，一个数 $x$ 能被表示成 $2$ 的正整数次幂，当且仅当 $x$ 能通过正整数个 $2$ 相乘在一起得到。\n\n例如，$10=8+2=2^3+2^1$ 是一个优秀的拆分。但是，$7=4+2+1=2^2+2^1+2^0$ 就不是一个优秀的拆分，因为 $1$ 不是 $2$ 的正整数次幂。\n\n现在，给定正整数 $n$，你需要判断这个数的所有拆分中，是否存在优秀的拆分。若存在，请你给出具体的拆分方案。", "inputFormat": "输入只有一行，一个整数 $n$，代表需要判断的数。", "outputFormat": "如果这个数的所有拆分中，存在优秀的拆分。那么，你需要从大到小输出这个拆分中的每一个数，相邻两个数之间用一个空格隔开。可以证明，在规定了拆分数字的顺序后，该拆分方案是唯一的。\n\n若不存在优秀的拆分，输出 `-1`。", "hint": "### 样例 1 解释\n\n$6=4+2=2^2+2^1$ 是一个优秀的拆分。注意，$6=2+2+2$ 不是一个优秀的拆分，因为拆分成的 $3$ 个数不满足每个数互不相同。\n\n---\n\n### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，$n \\le 10$。\n- 对于另外 $20\\%$ 的数据，保证 $n$ 为奇数。\n- 对于另外 $20\\%$ 的数据，保证 $n$ 为 $2$ 的正整数次幂。\n- 对于 $80\\%$ 的数据，$n \\le 1024$。\n- 对于 $100\\%$ 的数据，$1 \\le n \\le {10}^7$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2020] 优秀的拆分", "background": "", "description": "一般来说，一个正整数可以拆分成若干个正整数的和。\n\n例如，$1=1$，$10=1+2+3+4$ 等。对于正整数 $n$ 的一种特定拆分，我们称它为“优秀的”，当且仅当在这种拆分下，$n$ 被分解为了若干个**不同**的 $2$ 的**正整数**次幂。注意，一个数 $x$ 能被表示成 $2$ 的正整数次幂，当且仅当 $x$ 能通过正整数个 $2$ 相乘在一起得到。\n\n例如，$10=8+2=2^3+2^1$ 是一个优秀的拆分。但是，$7=4+2+1=2^2+2^1+2^0$ 就不是一个优秀的拆分，因为 $1$ 不是 $2$ 的正整数次幂。\n\n现在，给定正整数 $n$，你需要判断这个数的所有拆分中，是否存在优秀的拆分。若存在，请你给出具体的拆分方案。", "inputFormat": "输入只有一行，一个整数 $n$，代表需要判断的数。", "outputFormat": "如果这个数的所有拆分中，存在优秀的拆分。那么，你需要从大到小输出这个拆分中的每一个数，相邻两个数之间用一个空格隔开。可以证明，在规定了拆分数字的顺序后，该拆分方案是唯一的。\n\n若不存在优秀的拆分，输出 `-1`。", "hint": "### 样例 1 解释\n\n$6=4+2=2^2+2^1$ 是一个优秀的拆分。注意，$6=2+2+2$ 不是一个优秀的拆分，因为拆分成的 $3$ 个数不满足每个数互不相同。\n\n---\n\n### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，$n \\le 10$。\n- 对于另外 $20\\%$ 的数据，保证 $n$ 为奇数。\n- 对于另外 $20\\%$ 的数据，保证 $n$ 为 $2$ 的正整数次幂。\n- 对于 $80\\%$ 的数据，$n \\le 1024$。\n- 对于 $100\\%$ 的数据，$1 \\le n \\le {10}^7$。\n", "locale": "zh-CN"}}}
{"pid": "P7072", "type": "P", "difficulty": 2, "samples": [["10 60\n200 300 400 500 600 600 0 300 200 100\n", "200 300 400 400 400 500 400 400 300 300"], ["10 30\n100 100 600 100 100 100 100 100 100 100", "100 100 600 600 600 600 100 100 100 100"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2020", "排序", "CSP-J 入门级"], "title": "[CSP-J 2020] 直播获奖", "background": "", "description": "NOI2130 即将举行。为了增加观赏性，CCF 决定逐一评出每个选手的成绩，并直播即时的获奖分数线。本次竞赛的获奖率为 $w\\%$，即当前排名前 $w\\%$ 的选手的最低成绩就是即时的分数线。\n\n更具体地，若当前已评出了 $p$ 个选手的成绩，则当前计划获奖人数为 $\\max(1, \\lfloor p \\times w \\%\\rfloor)$，其中 $w$ 是获奖百分比，$\\lfloor x \\rfloor$ 表示对 $x$ 向下取整，$\\max(x,y)$ 表示 $x$ 和 $y$ 中较大的数。如有选手成绩相同，则所有成绩并列的选手都能获奖，因此实际获奖人数可能比计划中多。\n\n作为评测组的技术人员，请你帮 CCF 写一个直播程序。", "inputFormat": "第一行有两个整数 $n, w$。分别代表选手总数与获奖率。  \n第二行有 $n$ 个整数，依次代表逐一评出的选手成绩。", "outputFormat": "只有一行，包含 $n$ 个非负整数，依次代表选手成绩逐一评出后，即时的获奖分数线。相邻两个整数间用一个空格分隔。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l453vhow.png)\n\n---\n### 数据规模与约定\n\n各测试点的 $n$ 如下表：\n\n| 测试点编号 | $n=$ |\n| :--: | :--: |\n| $1 \\sim 3$ | $10$ |\n| $4 \\sim 6$ | $500$ |\n| $7 \\sim 10$ | $2000$ |\n| $11 \\sim 17$ | $10^4$ |\n| $18 \\sim 20$ | $10^5$ |\n\n\n对于所有测试点，每个选手的成绩均为不超过 $600$ 的非负整数，获奖百分比 $w$ 是一个正整数且 $1 \\le w \\le 99$。\n\n---\n### 提示\n\n在计算计划获奖人数时，如用浮点类型的变量（如 C/C++ 中的 `float` 、 `double`，Pascal 中的 `real` 、 `double` 、 `extended` 等）存储获奖比例 $w\\%$，则计算 $5 \\times 60\\%$ 时的结果可能为 $3.000001$，也可能为 $2.999999$，向下取整后的结果不确定。因此，建议仅使用整型变量，以计算出准确值。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2020] 直播获奖", "background": "", "description": "NOI2130 即将举行。为了增加观赏性，CCF 决定逐一评出每个选手的成绩，并直播即时的获奖分数线。本次竞赛的获奖率为 $w\\%$，即当前排名前 $w\\%$ 的选手的最低成绩就是即时的分数线。\n\n更具体地，若当前已评出了 $p$ 个选手的成绩，则当前计划获奖人数为 $\\max(1, \\lfloor p \\times w \\%\\rfloor)$，其中 $w$ 是获奖百分比，$\\lfloor x \\rfloor$ 表示对 $x$ 向下取整，$\\max(x,y)$ 表示 $x$ 和 $y$ 中较大的数。如有选手成绩相同，则所有成绩并列的选手都能获奖，因此实际获奖人数可能比计划中多。\n\n作为评测组的技术人员，请你帮 CCF 写一个直播程序。", "inputFormat": "第一行有两个整数 $n, w$。分别代表选手总数与获奖率。  \n第二行有 $n$ 个整数，依次代表逐一评出的选手成绩。", "outputFormat": "只有一行，包含 $n$ 个非负整数，依次代表选手成绩逐一评出后，即时的获奖分数线。相邻两个整数间用一个空格分隔。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l453vhow.png)\n\n---\n### 数据规模与约定\n\n各测试点的 $n$ 如下表：\n\n| 测试点编号 | $n=$ |\n| :--: | :--: |\n| $1 \\sim 3$ | $10$ |\n| $4 \\sim 6$ | $500$ |\n| $7 \\sim 10$ | $2000$ |\n| $11 \\sim 17$ | $10^4$ |\n| $18 \\sim 20$ | $10^5$ |\n\n\n对于所有测试点，每个选手的成绩均为不超过 $600$ 的非负整数，获奖百分比 $w$ 是一个正整数且 $1 \\le w \\le 99$。\n\n---\n### 提示\n\n在计算计划获奖人数时，如用浮点类型的变量（如 C/C++ 中的 `float` 、 `double`，Pascal 中的 `real` 、 `double` 、 `extended` 等）存储获奖比例 $w\\%$，则计算 $5 \\times 60\\%$ 时的结果可能为 $3.000001$，也可能为 $2.999999$，向下取整后的结果不确定。因此，建议仅使用整型变量，以计算出准确值。", "locale": "zh-CN"}}}
{"pid": "P7073", "type": "P", "difficulty": 4, "samples": [["x1 x2 & x3 |\n3\n1 0 1\n3\n1\n2\n3\n", "1\n1\n0"], ["x1 ! x2 x4 | x3 x5 ! & & ! &\n5\n0 1 0 1 1\n3\n1\n3\n5\n", "0\n1\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["树形数据结构", "2020", "CSP-J 入门级"], "title": "[CSP-J 2020] 表达式", "background": "", "description": "小 C 热衷于学习数理逻辑。有一天，他发现了一种特别的逻辑表达式。在这种逻辑表达式中，所有操作数都是变量，且它们的取值只能为 $0$ 或 $1$，运算从左往右进行。如果表达式中有括号，则先计算括号内的子表达式的值。特别的，这种表达式有且仅有以下几种运算：\n1. 与运算：`a & b`。当且仅当 $a$ 和 $b$ 的值都为 $1$ 时，该表达式的值为 $1$。其余情况该表达式的值为 $0$。\n2. 或运算：`a | b`。当且仅当 $a$ 和 $b$ 的值都为 $0$ 时，该表达式的值为 $0$。其余情况该表达式的值为 $1$。\n3. 取反运算：`!a`。当且仅当 $a$ 的值为 $0$ 时，该表达式的值为 $1$。其余情况该表达式的值为 $0$。\n\n小 C 想知道，给定一个逻辑表达式和其中每一个操作数的初始取值后，再取反某一个操作数的值时，原表达式的值为多少。\n\n为了化简对表达式的处理，我们有如下约定：\n\n表达式将采用**后缀表达式**的方式输入。\n\n后缀表达式的定义如下：\n1. 如果 $E$ 是一个操作数，则 $E$ 的后缀表达式是它本身。\n2. 如果 $E$ 是 $E_1~\\texttt{op}~E_2$ 形式的表达式，其中 $\\texttt{op}$ 是任何二元操作符，且优先级不高于 $E_1$ 、$E_2$ 中括号外的操作符，则 $E$ 的后缀式为 $E_1' E_2' \\texttt{op}$，其中 $E_1'$ 、$E_2'$ 分别为 $E_1$、$E_2$ 的后缀式。\n3. 如果 $E$ 是 $E_1$ 形式的表达式，则 $E_1$ 的后缀式就是 $E$ 的后缀式。\n\n同时为了方便，输入中：\n\n1. 与运算符（&）、或运算符（|）、取反运算符（!）的左右**均有一个空格**，但**表达式末尾没有空格**。\n2. 操作数由小写字母 $x$ 与一个正整数拼接而成，正整数表示这个变量的下标。例如：`x10`，表示下标为 $10$ 的变量 $x_{10}$。数据保证**每个变量在表达式中出现恰好一次**。", "inputFormat": "第一行包含一个字符串 $s$，表示上文描述的表达式。  \n\n第二行包含一个正整数 $n$，表示表达式中变量的数量。表达式中变量的下标为 $1,2, \\cdots , n$。  \n\n第三行包含 $n$ 个整数，第 $i$ 个整数表示变量 $x_i$ 的初值。  \n\n第四行包含一个正整数 $q$，表示询问的个数。  \n\n接下来 $q$ 行，每行一个正整数，表示需要取反的变量的下标。注意，每一个询问的修改都是**临时的**，即之前询问中的修改不会对后续的询问造成影响。 \n\n数据保证输入的表达式合法。变量的初值为 $0$ 或 $1$。", "outputFormat": "输出一共有 $q$ 行，每行一个 $0$ 或 $1$，表示该询问下表达式的值。", "hint": "### 样例 1 解释\n\n\n该后缀表达式的中缀表达式形式为 $(x_1 \\operatorname{and} x_2) \\operatorname{or} x_3$。\n\n- 对于第一次询问，将 $x_1$ 的值取反。此时，三个操作数对应的赋值依次为 $0$，$0$，$1$。原表达式的值为 $(0\\&0)|1=1$。\n- 对于第二次询问，将 $x_2$ 的值取反。此时，三个操作数对应的赋值依次为 $1$，$1$，$1$。原表达式的值为 $(1\\&1)|1=1$。\n- 对于第三次询问，将 $x_3$ 的值取反。此时，三个操作数对应的赋值依次为 $1$，$0$，$0$。原表达式的值为 $(1\\&0)|0=0$。\n\n### 样例 2 解释\n\n\n该表达式的中缀表达式形式为 $(\\operatorname{not}x_1)\\operatorname{and}(\\operatorname{not}((x_2\\operatorname{or}x_4)\\operatorname{and}(x_3\\operatorname{and}(\\operatorname{not}x_5))))$。\n\n### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，表达式中有且仅有与运算（&）或者或运算（|）。\n- 对于另外 $30\\%$ 的数据，$|s| \\le 1000$，$q \\le 1000$，$n \\le 1000$。\n- 对于另外 $20\\%$ 的数据，变量的初值全为 $0$ 或全为 $1$。\n- 对于 $100\\%$ 的数据，$1 \\le |s| \\le 1 \\times 10^6$，$1 \\le q \\le 1 \\times 10^5$，$2 \\le n \\le 1 \\times 10^5$。\n\n其中，$|s|$ 表示字符串 $s$ 的长度。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2020] 表达式", "background": "", "description": "小 C 热衷于学习数理逻辑。有一天，他发现了一种特别的逻辑表达式。在这种逻辑表达式中，所有操作数都是变量，且它们的取值只能为 $0$ 或 $1$，运算从左往右进行。如果表达式中有括号，则先计算括号内的子表达式的值。特别的，这种表达式有且仅有以下几种运算：\n1. 与运算：`a & b`。当且仅当 $a$ 和 $b$ 的值都为 $1$ 时，该表达式的值为 $1$。其余情况该表达式的值为 $0$。\n2. 或运算：`a | b`。当且仅当 $a$ 和 $b$ 的值都为 $0$ 时，该表达式的值为 $0$。其余情况该表达式的值为 $1$。\n3. 取反运算：`!a`。当且仅当 $a$ 的值为 $0$ 时，该表达式的值为 $1$。其余情况该表达式的值为 $0$。\n\n小 C 想知道，给定一个逻辑表达式和其中每一个操作数的初始取值后，再取反某一个操作数的值时，原表达式的值为多少。\n\n为了化简对表达式的处理，我们有如下约定：\n\n表达式将采用**后缀表达式**的方式输入。\n\n后缀表达式的定义如下：\n1. 如果 $E$ 是一个操作数，则 $E$ 的后缀表达式是它本身。\n2. 如果 $E$ 是 $E_1~\\texttt{op}~E_2$ 形式的表达式，其中 $\\texttt{op}$ 是任何二元操作符，且优先级不高于 $E_1$ 、$E_2$ 中括号外的操作符，则 $E$ 的后缀式为 $E_1' E_2' \\texttt{op}$，其中 $E_1'$ 、$E_2'$ 分别为 $E_1$、$E_2$ 的后缀式。\n3. 如果 $E$ 是 $E_1$ 形式的表达式，则 $E_1$ 的后缀式就是 $E$ 的后缀式。\n\n同时为了方便，输入中：\n\n1. 与运算符（&）、或运算符（|）、取反运算符（!）的左右**均有一个空格**，但**表达式末尾没有空格**。\n2. 操作数由小写字母 $x$ 与一个正整数拼接而成，正整数表示这个变量的下标。例如：`x10`，表示下标为 $10$ 的变量 $x_{10}$。数据保证**每个变量在表达式中出现恰好一次**。", "inputFormat": "第一行包含一个字符串 $s$，表示上文描述的表达式。  \n\n第二行包含一个正整数 $n$，表示表达式中变量的数量。表达式中变量的下标为 $1,2, \\cdots , n$。  \n\n第三行包含 $n$ 个整数，第 $i$ 个整数表示变量 $x_i$ 的初值。  \n\n第四行包含一个正整数 $q$，表示询问的个数。  \n\n接下来 $q$ 行，每行一个正整数，表示需要取反的变量的下标。注意，每一个询问的修改都是**临时的**，即之前询问中的修改不会对后续的询问造成影响。 \n\n数据保证输入的表达式合法。变量的初值为 $0$ 或 $1$。", "outputFormat": "输出一共有 $q$ 行，每行一个 $0$ 或 $1$，表示该询问下表达式的值。", "hint": "### 样例 1 解释\n\n\n该后缀表达式的中缀表达式形式为 $(x_1 \\operatorname{and} x_2) \\operatorname{or} x_3$。\n\n- 对于第一次询问，将 $x_1$ 的值取反。此时，三个操作数对应的赋值依次为 $0$，$0$，$1$。原表达式的值为 $(0\\&0)|1=1$。\n- 对于第二次询问，将 $x_2$ 的值取反。此时，三个操作数对应的赋值依次为 $1$，$1$，$1$。原表达式的值为 $(1\\&1)|1=1$。\n- 对于第三次询问，将 $x_3$ 的值取反。此时，三个操作数对应的赋值依次为 $1$，$0$，$0$。原表达式的值为 $(1\\&0)|0=0$。\n\n### 样例 2 解释\n\n\n该表达式的中缀表达式形式为 $(\\operatorname{not}x_1)\\operatorname{and}(\\operatorname{not}((x_2\\operatorname{or}x_4)\\operatorname{and}(x_3\\operatorname{and}(\\operatorname{not}x_5))))$。\n\n### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，表达式中有且仅有与运算（&）或者或运算（|）。\n- 对于另外 $30\\%$ 的数据，$|s| \\le 1000$，$q \\le 1000$，$n \\le 1000$。\n- 对于另外 $20\\%$ 的数据，变量的初值全为 $0$ 或全为 $1$。\n- 对于 $100\\%$ 的数据，$1 \\le |s| \\le 1 \\times 10^6$，$1 \\le q \\le 1 \\times 10^5$，$2 \\le n \\le 1 \\times 10^5$。\n\n其中，$|s|$ 表示字符串 $s$ 的长度。", "locale": "zh-CN"}}}
{"pid": "P7074", "type": "P", "difficulty": 4, "samples": [["3 4\n1 -1 3 2\n2 -1 4 -1\n-2 2 -3 -1\n", "9"], ["2 5\n-1 -1 -3 -2 -7\n-2 -1 -4 -1 -2\n", "-10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2020", "CSP-J 入门级"], "title": "[CSP-J 2020] 方格取数", "background": "", "description": "设有 $n \\times m$ 的方格图，每个方格中都有一个整数。现有一只小熊，想从图的左上角走到右下角，每一步只能向上、向下或向右走一格，并且不能重复经过已经走过的方格，也不能走出边界。小熊会取走所有经过的方格中的整数，求它能取到的整数之和的最大值。", "inputFormat": "第一行有两个整数 $n, m$。\n\n接下来 $n$ 行每行 $m$ 个整数，依次代表每个方格中的整数。", "outputFormat": "一个整数，表示小熊能取到的整数之和的最大值。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sq4638pa.png)\n---\n\n### 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7tfdyabk.png)\n---\n\n### 数据规模与约定\n- 对于 $20\\%$ 的数据，$n, m \\le 5$。\n- 对于 $40\\%$ 的数据，$n, m \\le 50$。\n- 对于 $70\\%$ 的数据，$n, m \\le 300$。\n- 对于 $100\\%$ 的数据，$1 \\le n,m \\le 10^3$。方格中整数的绝对值不超过 $10^4$。\n\n\n\n------------\n2024/2/4 添加一组 hack 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2020] 方格取数", "background": "", "description": "设有 $n \\times m$ 的方格图，每个方格中都有一个整数。现有一只小熊，想从图的左上角走到右下角，每一步只能向上、向下或向右走一格，并且不能重复经过已经走过的方格，也不能走出边界。小熊会取走所有经过的方格中的整数，求它能取到的整数之和的最大值。", "inputFormat": "第一行有两个整数 $n, m$。\n\n接下来 $n$ 行每行 $m$ 个整数，依次代表每个方格中的整数。", "outputFormat": "一个整数，表示小熊能取到的整数之和的最大值。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sq4638pa.png)\n---\n\n### 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7tfdyabk.png)\n---\n\n### 数据规模与约定\n- 对于 $20\\%$ 的数据，$n, m \\le 5$。\n- 对于 $40\\%$ 的数据，$n, m \\le 50$。\n- 对于 $70\\%$ 的数据，$n, m \\le 300$。\n- 对于 $100\\%$ 的数据，$1 \\le n,m \\le 10^3$。方格中整数的绝对值不超过 $10^4$。\n\n\n\n------------\n2024/2/4 添加一组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P7075", "type": "P", "difficulty": 4, "samples": [["3\n10\n100\n1000", "11 1 4713 BC\n10 4 4713 BC\n27 9 4711 BC"], ["3\n2000000\n3000000\n4000000", "14 9 763\n15 8 3501\n12 7 6239"], ["见附件中的 julian/julian3.in", "见附件中的 julian/julian3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "数学", "2020", "二分", "CSP-S 提高级"], "title": "[CSP-S 2020] 儒略日", "background": "", "description": "为了简便计算，天文学家们使用儒略日（Julian day）来表达时间。所谓儒略日，其定义为从**公元前 4713 年 1 月 1 日正午 12 点到此后某一时刻间所经过的天数**，不满一天者用小数表达。若利用这一天文学历法，则每一个时刻都将被均匀的映射到数轴上，从而得以很方便的计算它们的差值。\n\n现在，给定一个不含小数部分的儒略日，请你帮忙计算出该儒略日（一定是某一天的中午 12 点）所对应的公历日期。\n\n我们现行的公历为格里高利历（Gregorian calendar），它是在公元 1582 年由教皇格里高利十三世在原有的儒略历（Julian calendar）的基础上修改得到的（注：儒略历与儒略日并无直接关系）。具体而言，现行的公历日期按照以下规则计算：\n\n1. 公元 1582 年 10 月 15 日（含）以后：适用格里高利历，每年一月 $31$ 天、 二月 $28$ 天或 $29$ 天、三月 $31$ 天、四月 $30$ 天、五月 $31$ 天、六月 $30$ 天、七月 $31$ 天、八月 $31$ 天、九月 $30$ 天、十月 $31$ 天、十一月 $30$ 天、十二月 $31$ 天。其中，闰年的二月为 $29$ 天，平年为 $28$ 天。当年份是 $400$ 的倍数，或日期年份是 $4$ 的倍数但不是 $100$ 的倍数时，该年为闰年。\n2. 公元 1582 年 10 月 5 日（含）至 10 月 14 日（含）：不存在，这些日期被删除，该年 10 月 4 日之后为 10 月 15 日。\n3. 公元 1582 年 10 月 4 日（含）以前：适用儒略历，每月天数与格里高利历相同，但只要年份是 $4$ 的倍数就是闰年。\n4. 尽管儒略历于公元前 45 年才开始实行，且初期经过若干次调整，但今天人类习惯于按照儒略历最终的规则反推一切 1582 年 10 月 4 日之前的时间。注意，**公元零年并不存在**，即公元前 1 年的下一年是公元 1 年。因此公元前 1 年、前 5 年、前 9 年、前 13 年……以此类推的年份应视为闰年。", "inputFormat": "第一行一个整数 $Q$，表示询问的组数。  \n接下来 $Q$ 行，每行一个非负整数 $r_i$，表示一个儒略日。", "outputFormat": "对于每一个儒略日 $r_i$，输出一行表示日期的字符串 $s_i$。共计 $Q$ 行。 $s_i$ 的格式如下：\n\n1. 若年份为公元后，输出格式为 `Day Month Year`。其中日（Day）、月（Month）、年（Year）均不含前导零，中间用一个空格隔开。例如：公元\n2020 年 11 月 7 日正午 12 点，输出为 `7 11 2020`。\n2. 若年份为公元前，输出格式为 `Day Month Year BC`。其中年（Year）输出该年份的数值，其余与公元后相同。例如：公元前 841 年 2 月 1 日正午 12\n点，输出为 `1 2 841 BC`。", "hint": "**【数据范围】**\n\n| 测试点编号 | $Q =$ | $r_i \\le$ |\n|:-:|:-:|:-:|\n| $1$ | $1000$ | $365$ |\n| $2$ | $1000$ | $10^4$ |\n| $3$ | $1000$ | $10^5$ |\n| $4$ | $10000$ | $3\\times 10^5$ |\n| $5$ | $10000$ | $2.5\\times 10^6$ |\n| $6$ | $10^5$ | $2.5\\times 10^6$ |\n| $7$ | $10^5$ | $5\\times 10^6$ |\n| $8$ | $10^5$ | $10^7$ |\n| $9$ | $10^5$ | $10^9$ |\n| $10$ | $10^5$ | 年份答案不超过 $10^9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2020] 儒略日", "background": "", "description": "为了简便计算，天文学家们使用儒略日（Julian day）来表达时间。所谓儒略日，其定义为从**公元前 4713 年 1 月 1 日正午 12 点到此后某一时刻间所经过的天数**，不满一天者用小数表达。若利用这一天文学历法，则每一个时刻都将被均匀的映射到数轴上，从而得以很方便的计算它们的差值。\n\n现在，给定一个不含小数部分的儒略日，请你帮忙计算出该儒略日（一定是某一天的中午 12 点）所对应的公历日期。\n\n我们现行的公历为格里高利历（Gregorian calendar），它是在公元 1582 年由教皇格里高利十三世在原有的儒略历（Julian calendar）的基础上修改得到的（注：儒略历与儒略日并无直接关系）。具体而言，现行的公历日期按照以下规则计算：\n\n1. 公元 1582 年 10 月 15 日（含）以后：适用格里高利历，每年一月 $31$ 天、 二月 $28$ 天或 $29$ 天、三月 $31$ 天、四月 $30$ 天、五月 $31$ 天、六月 $30$ 天、七月 $31$ 天、八月 $31$ 天、九月 $30$ 天、十月 $31$ 天、十一月 $30$ 天、十二月 $31$ 天。其中，闰年的二月为 $29$ 天，平年为 $28$ 天。当年份是 $400$ 的倍数，或日期年份是 $4$ 的倍数但不是 $100$ 的倍数时，该年为闰年。\n2. 公元 1582 年 10 月 5 日（含）至 10 月 14 日（含）：不存在，这些日期被删除，该年 10 月 4 日之后为 10 月 15 日。\n3. 公元 1582 年 10 月 4 日（含）以前：适用儒略历，每月天数与格里高利历相同，但只要年份是 $4$ 的倍数就是闰年。\n4. 尽管儒略历于公元前 45 年才开始实行，且初期经过若干次调整，但今天人类习惯于按照儒略历最终的规则反推一切 1582 年 10 月 4 日之前的时间。注意，**公元零年并不存在**，即公元前 1 年的下一年是公元 1 年。因此公元前 1 年、前 5 年、前 9 年、前 13 年……以此类推的年份应视为闰年。", "inputFormat": "第一行一个整数 $Q$，表示询问的组数。  \n接下来 $Q$ 行，每行一个非负整数 $r_i$，表示一个儒略日。", "outputFormat": "对于每一个儒略日 $r_i$，输出一行表示日期的字符串 $s_i$。共计 $Q$ 行。 $s_i$ 的格式如下：\n\n1. 若年份为公元后，输出格式为 `Day Month Year`。其中日（Day）、月（Month）、年（Year）均不含前导零，中间用一个空格隔开。例如：公元\n2020 年 11 月 7 日正午 12 点，输出为 `7 11 2020`。\n2. 若年份为公元前，输出格式为 `Day Month Year BC`。其中年（Year）输出该年份的数值，其余与公元后相同。例如：公元前 841 年 2 月 1 日正午 12\n点，输出为 `1 2 841 BC`。", "hint": "**【数据范围】**\n\n| 测试点编号 | $Q =$ | $r_i \\le$ |\n|:-:|:-:|:-:|\n| $1$ | $1000$ | $365$ |\n| $2$ | $1000$ | $10^4$ |\n| $3$ | $1000$ | $10^5$ |\n| $4$ | $10000$ | $3\\times 10^5$ |\n| $5$ | $10000$ | $2.5\\times 10^6$ |\n| $6$ | $10^5$ | $2.5\\times 10^6$ |\n| $7$ | $10^5$ | $5\\times 10^6$ |\n| $8$ | $10^5$ | $10^7$ |\n| $9$ | $10^5$ | $10^9$ |\n| $10$ | $10^5$ | 年份答案不超过 $10^9$ |", "locale": "zh-CN"}}}
{"pid": "P7076", "type": "P", "difficulty": 3, "samples": [["3 3 5 4\n1 4 6\n0 3\n2 4\n2 5", "13"], ["2 2 4 3\n1 2\n1 3\n2 4", "2"], ["见附件中的 zoo/zoo3.in", "见附件中的 zoo/zoo3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "2020", "进制", "位运算", "CSP-S 提高级"], "title": "[CSP-S 2020] 动物园", "background": "", "description": "动物园里饲养了很多动物，饲养员小 A 会根据饲养动物的情况，按照《饲养指南》购买不同种类的饲料，并将购买清单发给采购员小 B。 \n\n具体而言，动物世界里存在 $2^k$ 种不同的动物，它们被编号为 $0 \\sim 2^k - 1$。动物园里饲养了其中的 $n$ 种，其中第 $i$ 种动物的编号为 $a_i$。\n\n《饲养指南》中共有 $m$ 条要求，第 $j$ 条要求形如“如果动物园中饲养着某种动物，满足其编号的二进制表示的第 $p_j$ 位为 $1$，则必须购买第 $q_j$ 种饲料”。其中饲料共有 $c$ 种，它们从 $1 \\sim c$ 编号。本题中我们将动物编号的二进制表示视为一个 $k$ 位 01 串，第 $0$ 位是最低位，第 $k - 1$ 位是最高位。 \n\n根据《饲养指南》，小 A 将会制定饲料清单交给小 B，由小 B 购买饲料。清单形如一个 $c$ 位 $01$ 串，第 $i$ 位为 $1$ 时，表示需要购买第 $i$ 种饲料；第 $i$ 位为 $0$ 时，表示不需要购买第 $i$ 种饲料。 实际上根据购买到的饲料，动物园可能可以饲养更多的动物。更具体地，如果将当前未被饲养的编号为 $x$ 的动物加入动物园饲养后，饲料清单没有变化，那么我们认为动物园当前还能饲养编号为 $x$ 的动物。\n\n现在小 B 想请你帮忙算算，动物园目前还能饲养多少种动物。", "inputFormat": "第一行包含四个以空格分隔的整数 $n, m, c, k$。  \n分别表示动物园中动物数量、《饲养指南》要求数、饲料种数与动物编号的二进制表示位数。   \n第二行 $n$ 个以空格分隔的整数，其中第 $i$ 个整数表示 $a_i$。  \n接下来 $m$ 行，每行两个整数 $p_i, q_i$ 表示一条要求。  \n数据保证所有 $a_i$ 互不相同，所有的 $q_i$ 互不相同。", "outputFormat": "仅一行一个整数表示答案。", "hint": "**【样例 #1 解释】**\n\n动物园里饲养了编号为 $1, 4, 6$ 的三种动物，《饲养指南》上的三条要求为：\n\n1. 若饲养的某种动物的编号的第 $0$ 个二进制位为 $1$，则需购买第 $3$ 种饲料。\n2. 若饲养的某种动物的编号的第 $2$ 个二进制位为 $1$，则需购买第 $4$ 种饲料。\n3. 若饲养的某种动物的编号的第 $2$ 个二进制位为 $1$，则需购买第 $5$ 种饲料。 \n\n饲料购买情况为：\n\n1. 编号为 $1$ 的动物的第 $0$ 个二进制位为 $1$，因此需要购买第 $3$ 种饲料；\n2. 编号为 $4, 6$ 的动物的第 $2$ 个二进制位为 $1$，因此需要购买第 $4, 5$ 种饲料。 \n\n由于在当前动物园中加入一种编号为 $0, 2, 3, 5, 7, 8, \\ldots , 15$ 之一的动物，购物清单都不会改变，因此答案为 $13$。\n\n**【数据范围】**\n\n对于 $20 \\%$ 的数据，$k \\le n \\le 5$，$m \\le 10$，$c \\le 10$，所有的 $p_i$ 互不相同。  \n对于 $40 \\%$ 的数据，$n \\le 15$，$k \\le 20$，$m \\le 20$，$c \\le 20$。  \n对于 $60 \\%$ 的数据，$n \\le 30$，$k \\le 30$，$m \\le 1000$。  \n对于 $100 \\%$ 的数据，$0 \\le n, m \\le 10^6$，$0 \\le k \\le 64$，$1 \\le c \\le 10^8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2020] 动物园", "background": "", "description": "动物园里饲养了很多动物，饲养员小 A 会根据饲养动物的情况，按照《饲养指南》购买不同种类的饲料，并将购买清单发给采购员小 B。 \n\n具体而言，动物世界里存在 $2^k$ 种不同的动物，它们被编号为 $0 \\sim 2^k - 1$。动物园里饲养了其中的 $n$ 种，其中第 $i$ 种动物的编号为 $a_i$。\n\n《饲养指南》中共有 $m$ 条要求，第 $j$ 条要求形如“如果动物园中饲养着某种动物，满足其编号的二进制表示的第 $p_j$ 位为 $1$，则必须购买第 $q_j$ 种饲料”。其中饲料共有 $c$ 种，它们从 $1 \\sim c$ 编号。本题中我们将动物编号的二进制表示视为一个 $k$ 位 01 串，第 $0$ 位是最低位，第 $k - 1$ 位是最高位。 \n\n根据《饲养指南》，小 A 将会制定饲料清单交给小 B，由小 B 购买饲料。清单形如一个 $c$ 位 $01$ 串，第 $i$ 位为 $1$ 时，表示需要购买第 $i$ 种饲料；第 $i$ 位为 $0$ 时，表示不需要购买第 $i$ 种饲料。 实际上根据购买到的饲料，动物园可能可以饲养更多的动物。更具体地，如果将当前未被饲养的编号为 $x$ 的动物加入动物园饲养后，饲料清单没有变化，那么我们认为动物园当前还能饲养编号为 $x$ 的动物。\n\n现在小 B 想请你帮忙算算，动物园目前还能饲养多少种动物。", "inputFormat": "第一行包含四个以空格分隔的整数 $n, m, c, k$。  \n分别表示动物园中动物数量、《饲养指南》要求数、饲料种数与动物编号的二进制表示位数。   \n第二行 $n$ 个以空格分隔的整数，其中第 $i$ 个整数表示 $a_i$。  \n接下来 $m$ 行，每行两个整数 $p_i, q_i$ 表示一条要求。  \n数据保证所有 $a_i$ 互不相同，所有的 $q_i$ 互不相同。", "outputFormat": "仅一行一个整数表示答案。", "hint": "**【样例 #1 解释】**\n\n动物园里饲养了编号为 $1, 4, 6$ 的三种动物，《饲养指南》上的三条要求为：\n\n1. 若饲养的某种动物的编号的第 $0$ 个二进制位为 $1$，则需购买第 $3$ 种饲料。\n2. 若饲养的某种动物的编号的第 $2$ 个二进制位为 $1$，则需购买第 $4$ 种饲料。\n3. 若饲养的某种动物的编号的第 $2$ 个二进制位为 $1$，则需购买第 $5$ 种饲料。 \n\n饲料购买情况为：\n\n1. 编号为 $1$ 的动物的第 $0$ 个二进制位为 $1$，因此需要购买第 $3$ 种饲料；\n2. 编号为 $4, 6$ 的动物的第 $2$ 个二进制位为 $1$，因此需要购买第 $4, 5$ 种饲料。 \n\n由于在当前动物园中加入一种编号为 $0, 2, 3, 5, 7, 8, \\ldots , 15$ 之一的动物，购物清单都不会改变，因此答案为 $13$。\n\n**【数据范围】**\n\n对于 $20 \\%$ 的数据，$k \\le n \\le 5$，$m \\le 10$，$c \\le 10$，所有的 $p_i$ 互不相同。  \n对于 $40 \\%$ 的数据，$n \\le 15$，$k \\le 20$，$m \\le 20$，$c \\le 20$。  \n对于 $60 \\%$ 的数据，$n \\le 30$，$k \\le 30$，$m \\le 1000$。  \n对于 $100 \\%$ 的数据，$0 \\le n, m \\le 10^6$，$0 \\le k \\le 64$，$1 \\le c \\le 10^8$。", "locale": "zh-CN"}}}
{"pid": "P7077", "type": "P", "difficulty": 5, "samples": [["3\n1 2 3\n3\n1 1 1\n2 2\n3 2 1 2\n2\n2 3\n", "6 8 12"], ["10\n1 2 3 4 5 6 7 8 9 10\n8\n3 2 2 3\n3 2 4 5\n3 2 5 8\n2 2\n3 2 6 7\n1 2 5\n1 7 6\n2 3\n3\n1 2 3", "36 282 108 144 180 216 504 288 324 360\n"], ["见附件中的 call/call3.in", "见附件中的 call/call3.ans"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "数学", "2020", "拓扑排序", "CSP-S 提高级"], "title": "[CSP-S 2020] 函数调用", "background": "", "description": "函数是各种编程语言中一项重要的概念，借助函数，我们总可以将复杂的任务分解成一个个相对简单的子任务，直到细化为十分简单的基础操作，从而使代码的组织更加严密、更加有条理。然而，过多的函数调用也会导致额外的开销，影响程序的运行效率。\n\n某数据库应用程序提供了若干函数用以维护数据。已知这些函数的功能可分为三类：\n\n1. 将数据中的指定元素加上一个值；\n2. 将数据中的每一个元素乘以一个相同值；\n3. **依次**执行若干次函数调用，保证不会出现递归（即不会直接或间接地调用本身）。\n\n在使用该数据库应用时，用户可一次性输入要调用的函数序列（一个函数可能被调用多次），在**依次**执行完序列中的函数后，系统中的数据被加以更新。某一天，小 A 在应用该数据库程序处理数据时遇到了困难：由于频繁而低效的函数调用，系统在执行操作时进入了无响应的状态，他只好强制结束了数据库程序。为了计算出正确数据，小 A 查阅了软件的文档，了解到每个函数的具体功能信息，现在他想请你根据这些信息帮他计算出更新后的数据应该是多少。", "inputFormat": "第一行一个正整数 $n$，表示数据的个数。  \n第二行 $n$ 个整数，第 $i$ 个整数表示下标为 $i$ 的数据的初始值为 $a_i$。  \n第三行一个正整数 $m$，表示数据库应用程序提供的函数个数。函数从 $1 \\sim m$ 编号。  \n接下来 $m$ 行中，第 $j$（$1 \\le j \\le m$）行的第一个整数为 $T_j$，表示 $j$ 号函数的类型：\n\n1. 若 $T_j = 1$，接下来两个整数 $P_j, V_j$ 分别表示要执行加法的元素的下标及其增加的值；\n2. 若 $T_j = 2$，接下来一个整数 $V_j$ 表示所有元素所乘的值；\n3. 若 $T_j = 3$，接下来一个正整数 $C_j$ 表示 $j$ 号函数要调用的函数个数，  \n  随后 $C_j$ 个整数 $g^{(j)}_1, g^{(j)}_2, \\ldots , g^{(j)}_{C_j}$ 依次表示其所调用的函数的编号。\n\n第 $m + 4$ 行一个正整数 $Q$，表示输入的函数操作序列长度。  \n第 $m + 5$ 行 $Q$ 个整数 $f_i$，第 $i$ 个整数表示第 $i$ 个执行的函数的编号。", "outputFormat": "一行 $n$ 个用空格隔开的整数，按照下标 $1 \\sim n$ 的顺序，分别输出在执行完输入的函数序列后，数据库中每一个元素的值。**答案对** $\\boldsymbol{998244353}$ **取模。**", "hint": "**【样例 #1 解释】**\n\n$1$ 号函数功能为将 $a_1$ 的值加一。$2$ 号函数功能为所有元素乘 $2$。$3$ 号函数将先调用 $1$ 号函数，再调用 $2$ 号函数。\n\n最终的函数序列先执行 $2$ 号函数，所有元素的值变为 $2, 4, 6$。\n\n再执行 $3$ 号函数时，先调用 $1$ 号函数，所有元素的值变为 $3, 4, 6$。再调用 $2$ 号函数，所有元素的值变为 $6, 8, 12$。\n\n**【数据范围】**\n\n::cute-table{tuack}\n\n| 测试点编号 | $n, m, Q \\le$ | $\\sum C_j$ | 其他特殊限制 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 2$ | $1000$ | $= m - 1$ | 函数调用关系构成一棵树 |\n| $3 \\sim 4$ | $1000$ | $\\le 100$ | 无 |\n| $5 \\sim 6$ | $20000$ | $\\le 40000$ | 不含第 $2$ 类函数或不含第 $1$ 类函数 |\n| $7$ | $20000$ | $= 0$ | 无 |\n| $8 \\sim 9$ | $20000$ | $= m - 1$ | 函数调用关系构成一棵树 |\n| $10 \\sim 11$ | $20000$ | $\\le 2 \\times 10^5$ | 无 |\n| $12 \\sim 13$ | $10^5$ | $\\le 2 \\times 10^5$ | 不含第 $2$ 类函数或不含第 $1$ 类函数 |\n| $14$ | $10^5$ | $= 0$ | 无 |\n| $15 \\sim 16$ | $10^5$ | $= m - 1$ | 函数调用关系构成一棵树 |\n| $17 \\sim 18$ | $10^5$ | $\\le 5 \\times 10^5$ | 无 |\n| $19 \\sim 20$ | $10^5$ | $\\le 10^6$ | 无 |\n\n对于所有数据：$0 \\le a_i \\le 10^4$，$T_j \\in \\{1,2,3\\}$，$1 \\le P_j \\le n$，$0 \\le V_j \\le 10^4$，$1 \\le g^{(j)}_k \\le m$，$1 \\le f_i \\le m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2020] 函数调用", "background": "", "description": "函数是各种编程语言中一项重要的概念，借助函数，我们总可以将复杂的任务分解成一个个相对简单的子任务，直到细化为十分简单的基础操作，从而使代码的组织更加严密、更加有条理。然而，过多的函数调用也会导致额外的开销，影响程序的运行效率。\n\n某数据库应用程序提供了若干函数用以维护数据。已知这些函数的功能可分为三类：\n\n1. 将数据中的指定元素加上一个值；\n2. 将数据中的每一个元素乘以一个相同值；\n3. **依次**执行若干次函数调用，保证不会出现递归（即不会直接或间接地调用本身）。\n\n在使用该数据库应用时，用户可一次性输入要调用的函数序列（一个函数可能被调用多次），在**依次**执行完序列中的函数后，系统中的数据被加以更新。某一天，小 A 在应用该数据库程序处理数据时遇到了困难：由于频繁而低效的函数调用，系统在执行操作时进入了无响应的状态，他只好强制结束了数据库程序。为了计算出正确数据，小 A 查阅了软件的文档，了解到每个函数的具体功能信息，现在他想请你根据这些信息帮他计算出更新后的数据应该是多少。", "inputFormat": "第一行一个正整数 $n$，表示数据的个数。  \n第二行 $n$ 个整数，第 $i$ 个整数表示下标为 $i$ 的数据的初始值为 $a_i$。  \n第三行一个正整数 $m$，表示数据库应用程序提供的函数个数。函数从 $1 \\sim m$ 编号。  \n接下来 $m$ 行中，第 $j$（$1 \\le j \\le m$）行的第一个整数为 $T_j$，表示 $j$ 号函数的类型：\n\n1. 若 $T_j = 1$，接下来两个整数 $P_j, V_j$ 分别表示要执行加法的元素的下标及其增加的值；\n2. 若 $T_j = 2$，接下来一个整数 $V_j$ 表示所有元素所乘的值；\n3. 若 $T_j = 3$，接下来一个正整数 $C_j$ 表示 $j$ 号函数要调用的函数个数，  \n  随后 $C_j$ 个整数 $g^{(j)}_1, g^{(j)}_2, \\ldots , g^{(j)}_{C_j}$ 依次表示其所调用的函数的编号。\n\n第 $m + 4$ 行一个正整数 $Q$，表示输入的函数操作序列长度。  \n第 $m + 5$ 行 $Q$ 个整数 $f_i$，第 $i$ 个整数表示第 $i$ 个执行的函数的编号。", "outputFormat": "一行 $n$ 个用空格隔开的整数，按照下标 $1 \\sim n$ 的顺序，分别输出在执行完输入的函数序列后，数据库中每一个元素的值。**答案对** $\\boldsymbol{998244353}$ **取模。**", "hint": "**【样例 #1 解释】**\n\n$1$ 号函数功能为将 $a_1$ 的值加一。$2$ 号函数功能为所有元素乘 $2$。$3$ 号函数将先调用 $1$ 号函数，再调用 $2$ 号函数。\n\n最终的函数序列先执行 $2$ 号函数，所有元素的值变为 $2, 4, 6$。\n\n再执行 $3$ 号函数时，先调用 $1$ 号函数，所有元素的值变为 $3, 4, 6$。再调用 $2$ 号函数，所有元素的值变为 $6, 8, 12$。\n\n**【数据范围】**\n\n::cute-table{tuack}\n\n| 测试点编号 | $n, m, Q \\le$ | $\\sum C_j$ | 其他特殊限制 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 2$ | $1000$ | $= m - 1$ | 函数调用关系构成一棵树 |\n| $3 \\sim 4$ | $1000$ | $\\le 100$ | 无 |\n| $5 \\sim 6$ | $20000$ | $\\le 40000$ | 不含第 $2$ 类函数或不含第 $1$ 类函数 |\n| $7$ | $20000$ | $= 0$ | 无 |\n| $8 \\sim 9$ | $20000$ | $= m - 1$ | 函数调用关系构成一棵树 |\n| $10 \\sim 11$ | $20000$ | $\\le 2 \\times 10^5$ | 无 |\n| $12 \\sim 13$ | $10^5$ | $\\le 2 \\times 10^5$ | 不含第 $2$ 类函数或不含第 $1$ 类函数 |\n| $14$ | $10^5$ | $= 0$ | 无 |\n| $15 \\sim 16$ | $10^5$ | $= m - 1$ | 函数调用关系构成一棵树 |\n| $17 \\sim 18$ | $10^5$ | $\\le 5 \\times 10^5$ | 无 |\n| $19 \\sim 20$ | $10^5$ | $\\le 10^6$ | 无 |\n\n对于所有数据：$0 \\le a_i \\le 10^4$，$T_j \\in \\{1,2,3\\}$，$1 \\le P_j \\le n$，$0 \\le V_j \\le 10^4$，$1 \\le g^{(j)}_k \\le m$，$1 \\le f_i \\le m$。", "locale": "zh-CN"}}}
{"pid": "P7078", "type": "P", "difficulty": 7, "samples": [["2\n3\n11 14 14\n3\n1 5 2 6 3 25", "3\n1"], ["2\n5\n13 31 33 39 42\n5\n1 7 2 10 3 24 4 48 5 50", "5\n3"], ["见附件中的 snakes/snakes3.in", "见附件中的 snakes/snakes3.ans"], ["见附件中的 snakes/snakes4.in", "见附件中的 snakes/snakes4.ans"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2020", "堆", "队列", "CSP-S 提高级"], "title": "[CSP-S 2020] 贪吃蛇", "background": "", "description": "草原上有 $n$ 条蛇，编号分别为 $1, 2, \\ldots , n$。初始时每条蛇有一个体力值 $a_i$，我们称编号为 $x$ 的蛇实力比编号为 $y$ 的蛇强当且仅当它们当前的体力值满足 $a_x > a_y$，或者 $a_x = a_y$ 且 $x > y$。\n\n接下来这些蛇将进行决斗，决斗将持续若干轮，每一轮实力最强的蛇拥有选择权，可以选择吃或者不吃掉实力最弱的蛇：\n\n1. 如果选择吃，那么实力最强的蛇的体力值将减去实力最弱的蛇的体力值，实力最弱的蛇被吃掉，退出接下来的决斗。之后开始下一轮决斗。\n2. 如果选择不吃，决斗立刻结束。\n\n每条蛇希望在自己不被吃的前提下在决斗中尽可能多吃别的蛇（显然，蛇不会选择吃自己）。\n\n现在假设每条蛇都足够聪明，请你求出决斗结束后会剩几条蛇。\n\n本题有多组数据，对于第一组数据，每条蛇体力会全部由输入给出，之后的每一组数据，会相对于上一组的数据，修改一部分蛇的体力作为新的输入。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。  \n接下来有 $T$ 组数据，对于第一组数据，第一行一个正整数 $n$，第二行 $n$ 个非负整数表示 $a_i$。  \n对于第二组到第 $T$ 组数据，每组数据：  \n第一行第一个非负整数 $k$ 表示体力修改的蛇的个数。  \n第二行 $2k$ 个整数，每两个整数组成一个二元组 $(x,y)$，表示依次将 $a_x$ 的值改为 $y$。一个位置可能被修改多次，以最后一次修改为准。", "outputFormat": "输出 $T$ 行，每行一个整数表示最终存活的蛇的条数。", "hint": "**【样例 #1 解释】**\n\n第一组数据，第一轮中 $3$ 号蛇最强，$1$ 号蛇最弱。若 $3$ 号蛇选择吃，那么它将在第二轮被 $2$ 号蛇吃掉。因此 $3$ 号蛇第一轮选择不吃，$3$ 条蛇都将存活。\n\n对于第二组数据，$3$ 条蛇体力变为 $5, 6, 25$。第一轮中 $3$ 号蛇最强，$1$ 号蛇最弱，若它选择吃，那么 $3$ 号蛇体力值变为 $20$，在第二轮中依然是最强蛇并能吃掉 $2$ 号蛇，因此 $3$ 号蛇会选择两轮都吃，最终只有 $1$ 条蛇存活。\n\n**【数据范围】**\n\n对于 $20 \\%$ 的数据，$n = 3$。  \n对于 $40 \\%$ 的数据，$n \\le 10$。  \n对于 $55 \\%$ 的数据，$n \\le 2000$。  \n对于 $70\\%$ 的数据，$n \\le 5 \\times {10}^4$。  \n对于 $100\\%$ 的数据：$3 \\le n \\le {10}^6$，$1 \\le T \\le 10$，$0 \\le k \\le {10}^5$，$0 \\le a_i, y \\le 10^9$。保证每组数据（包括所有修改完成后的）的 $a_i$ 以不降顺序排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-S 2020] 贪吃蛇", "background": "", "description": "草原上有 $n$ 条蛇，编号分别为 $1, 2, \\ldots , n$。初始时每条蛇有一个体力值 $a_i$，我们称编号为 $x$ 的蛇实力比编号为 $y$ 的蛇强当且仅当它们当前的体力值满足 $a_x > a_y$，或者 $a_x = a_y$ 且 $x > y$。\n\n接下来这些蛇将进行决斗，决斗将持续若干轮，每一轮实力最强的蛇拥有选择权，可以选择吃或者不吃掉实力最弱的蛇：\n\n1. 如果选择吃，那么实力最强的蛇的体力值将减去实力最弱的蛇的体力值，实力最弱的蛇被吃掉，退出接下来的决斗。之后开始下一轮决斗。\n2. 如果选择不吃，决斗立刻结束。\n\n每条蛇希望在自己不被吃的前提下在决斗中尽可能多吃别的蛇（显然，蛇不会选择吃自己）。\n\n现在假设每条蛇都足够聪明，请你求出决斗结束后会剩几条蛇。\n\n本题有多组数据，对于第一组数据，每条蛇体力会全部由输入给出，之后的每一组数据，会相对于上一组的数据，修改一部分蛇的体力作为新的输入。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。  \n接下来有 $T$ 组数据，对于第一组数据，第一行一个正整数 $n$，第二行 $n$ 个非负整数表示 $a_i$。  \n对于第二组到第 $T$ 组数据，每组数据：  \n第一行第一个非负整数 $k$ 表示体力修改的蛇的个数。  \n第二行 $2k$ 个整数，每两个整数组成一个二元组 $(x,y)$，表示依次将 $a_x$ 的值改为 $y$。一个位置可能被修改多次，以最后一次修改为准。", "outputFormat": "输出 $T$ 行，每行一个整数表示最终存活的蛇的条数。", "hint": "**【样例 #1 解释】**\n\n第一组数据，第一轮中 $3$ 号蛇最强，$1$ 号蛇最弱。若 $3$ 号蛇选择吃，那么它将在第二轮被 $2$ 号蛇吃掉。因此 $3$ 号蛇第一轮选择不吃，$3$ 条蛇都将存活。\n\n对于第二组数据，$3$ 条蛇体力变为 $5, 6, 25$。第一轮中 $3$ 号蛇最强，$1$ 号蛇最弱，若它选择吃，那么 $3$ 号蛇体力值变为 $20$，在第二轮中依然是最强蛇并能吃掉 $2$ 号蛇，因此 $3$ 号蛇会选择两轮都吃，最终只有 $1$ 条蛇存活。\n\n**【数据范围】**\n\n对于 $20 \\%$ 的数据，$n = 3$。  \n对于 $40 \\%$ 的数据，$n \\le 10$。  \n对于 $55 \\%$ 的数据，$n \\le 2000$。  \n对于 $70\\%$ 的数据，$n \\le 5 \\times {10}^4$。  \n对于 $100\\%$ 的数据：$3 \\le n \\le {10}^6$，$1 \\le T \\le 10$，$0 \\le k \\le {10}^5$，$0 \\le a_i, y \\le 10^9$。保证每组数据（包括所有修改完成后的）的 $a_i$ 以不降顺序排列。", "locale": "zh-CN"}}}
{"pid": "P7079", "type": "P", "difficulty": 2, "samples": [["12\nArrangement_of_Contest\nBallot_Analyzing_Device\nCorrecting_Curiosity\nDwarf_Tower\nEnergy_Tycoon\nFlight_Boarding_Optimization\nGarage\nHeavy_Chain_Clusterization\nIntellectual_Property\nJ\nKids_in_a_Friendly_Class\nLonely_Mountain\n", "12\n"], ["3\nSnow_White_and_the_7_Dwarfs\nA_Problem\nAnother_Problem\n", "1\n"], ["2\nGood_Problem\nBetter_Problem\n", "0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Arrangement of Contest", "background": "", "description": "\n\nLittle Dmitry and little Petr want to arrange a contest. Their little friends submitted several task proposals and now Dmitry and Petr want to select some of them for the contest. As they are just little boys, they cannot estimate quality of tasks, but they know for sure that in good contest title of the first problem starts with A , the title of the second one -- with $B$ , and so on.\n\nGiven titles of the proposed tasks, help little brothers to determine the maximal number of problems in a good contest they can arrange.\n\n", "inputFormat": "\n\nThe first line contains single integer $n$ -- the number of problem proposals received by the little brothers $(1 \\le n \\le 100)$ .\n\nNext $n$ lines contain titles of proposed problems, one per line. The length of each title does not exceed $30$ characters. Each title starts with an uppercase letter and contains only English letters, digits and underscores.\n\n", "outputFormat": "\n\nOutput a single number -- the maximal number of problems in a good contest. In case there is no good contest that may be arranged, output $0$ .\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Arrangement of Contest", "background": "", "description": "\n\nLittle Dmitry and little Petr want to arrange a contest. Their little friends submitted several task proposals and now Dmitry and Petr want to select some of them for the contest. As they are just little boys, they cannot estimate quality of tasks, but they know for sure that in good contest title of the first problem starts with A , the title of the second one -- with $B$ , and so on.\n\nGiven titles of the proposed tasks, help little brothers to determine the maximal number of problems in a good contest they can arrange.\n\n", "inputFormat": "\n\nThe first line contains single integer $n$ -- the number of problem proposals received by the little brothers $(1 \\le n \\le 100)$ .\n\nNext $n$ lines contain titles of proposed problems, one per line. The length of each title does not exceed $30$ characters. Each title starts with an uppercase letter and contains only English letters, digits and underscores.\n\n", "outputFormat": "\n\nOutput a single number -- the maximal number of problems in a good contest. In case there is no good contest that may be arranged, output $0$ .\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Arrangement of Contest", "background": "", "description": "小D和小P想要举行比赛。\n\n他们收到了许多建议书，现在他们想要从这些报名书中挑选一些好的建议。\n\n他们采纳的建议符合以下标准：第一个建议的开头为A，第二个建议的开头为B，以此类推。\n\n请你帮助他们，确定他们所能采纳的建议的最大数量。", "inputFormat": "第一行，一个正整数 $n$，表示建议数。\n\n第 $2$ 至 $n+1$ 行，一行一个字符串，表示建议名称。", "outputFormat": "一个整数，表示他们所能采纳的建议的最大数量。", "hint": "对于 $100\\%$ 的数据，$1\\leq n \\leq 100$", "locale": "zh-CN"}}}
{"pid": "P7080", "type": "P", "difficulty": 2, "samples": [["4 7\nLoudy\nApples\nDogman\nMiller\n.X..\nX...\n....\n..X.\n..XX\n..X.\n..X.\n", "Dogman 42.86%\nLoudy 14.29%\nApples 14.29%\nMiller 0.00%\nInvalid 28.57%\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Ballot Analyzing Device", "background": "", "description": "\n\nElection committee of Flatland is preparing for presidential elections. To minimize human factor in ballot counting they decided to develop an automated Ballot Analyzing Device $(BAD).$\n\nThere are $n$ candidates running for president. The ballot contains one square field for each candidate. The voter must mark exactly one of the fields. If no field is marked or there are two or more marked fields, the ballot is invalid. Each voter puts $his/her$ ballot to a special scanner in BAD. The scanner analyzes marks on the ballot and creates a special voting string of $n$ characters: $‘X'$ for marked field and $‘. '$ for unmarked one. Now voting strings must be analyzed to get the report. Your task is to develop a report generator for BAD.\n\nGiven voting strings for all ballots, your program must print the voting report. Candidates in the report must be arranged in order of decreasing number of votes. If two candidates have the same number of votes, they must have the same order as in a voting ballot. For each candidate calculate $his/her$ result in percent (if the candidate received $p$ votes, the result in percent is $100p/m)$ . The last line of the report must indicate the percentage of the invalid ballots.\n\n", "inputFormat": "\n\nThe first line contains two integers $n$ and $m$ -- the number of candidates and the number of ballots $(2 \\le n \\le 10$ ; $1 \\le m \\le 1000)$ . The following $n$ lines contain last names of candidates. Each name is a string of at most $100$ English letters. There is no candidate named `Invalid`.\n\nThen $m$ lines follow, each of them contains one voting string.\n\n", "outputFormat": "\n\nPrint n+ $1$ lines. First print results for candidates in percent. For each candidate print $his/her$ last name followed by a space and then $his/her$ result in percent and a percent sign $‘\\%'.$ The last line must specify the percentage of invalid ballots: a word `Invalid` followed by a space, the percentage of invalid ballots and a percent sign.\n\nRound all numbers to exactly two digits after the decimal point. If the number is exactly in the middle of two representable numbers, output the greater one (e.g . output `12 . $35`$ for $12$ . $345$) .\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Ballot Analyzing Device", "background": "", "description": "\n\nElection committee of Flatland is preparing for presidential elections. To minimize human factor in ballot counting they decided to develop an automated Ballot Analyzing Device $(BAD).$\n\nThere are $n$ candidates running for president. The ballot contains one square field for each candidate. The voter must mark exactly one of the fields. If no field is marked or there are two or more marked fields, the ballot is invalid. Each voter puts $his/her$ ballot to a special scanner in BAD. The scanner analyzes marks on the ballot and creates a special voting string of $n$ characters: $‘X'$ for marked field and $‘. '$ for unmarked one. Now voting strings must be analyzed to get the report. Your task is to develop a report generator for BAD.\n\nGiven voting strings for all ballots, your program must print the voting report. Candidates in the report must be arranged in order of decreasing number of votes. If two candidates have the same number of votes, they must have the same order as in a voting ballot. For each candidate calculate $his/her$ result in percent (if the candidate received $p$ votes, the result in percent is $100p/m)$ . The last line of the report must indicate the percentage of the invalid ballots.\n\n", "inputFormat": "\n\nThe first line contains two integers $n$ and $m$ -- the number of candidates and the number of ballots $(2 \\le n \\le 10$ ; $1 \\le m \\le 1000)$ . The following $n$ lines contain last names of candidates. Each name is a string of at most $100$ English letters. There is no candidate named `Invalid`.\n\nThen $m$ lines follow, each of them contains one voting string.\n\n", "outputFormat": "\n\nPrint n+ $1$ lines. First print results for candidates in percent. For each candidate print $his/her$ last name followed by a space and then $his/her$ result in percent and a percent sign $‘\\%'.$ The last line must specify the percentage of invalid ballots: a word `Invalid` followed by a space, the percentage of invalid ballots and a percent sign.\n\nRound all numbers to exactly two digits after the decimal point. If the number is exactly in the middle of two representable numbers, output the greater one (e.g . output `12 . $35`$ for $12$ . $345$) .\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Ballot Analyzing Device", "background": "", "description": "平地的选举委员会正在为总统选举做准备。为了尽量减少人工因素在选票计数中的影响，他们决定开发一个自动化的选票分析设备（BAD）。\n\n有 $n$ 名候选人竞选总统。选票上为每位候选人提供一个方框。选民必须在其中一个方框上做标记。如果没有标记任何方框或标记了两个或更多方框，则选票无效。每位选民将他的选票放入 BAD 的特殊扫描仪中。扫描仪分析选票上的标记并生成一个包含 $n$ 个字符的特殊投票字符串：标记的方框用 'X' 表示，未标记的用 '.' 表示。现在需要分析投票字符串以生成报告。你的任务是为 BAD 开发一个报告生成器。\n\n给定所有选票的投票字符串，你的程序必须打印投票报告。报告中的候选人必须按得票数降序排列。如果两名候选人的得票数相同，他们在投票选票中的顺序也必须相同。对于每位候选人，计算他/她的得票百分比（如果候选人获得 $p$ 票，百分比结果为 $100p/m$）。报告的最后一行必须指明无效选票的百分比。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$ —— 候选人数和选票数（$2 \\le n \\le 10$；$1 \\le m \\le 1000$）。接下来的 $n$ 行包含候选人的姓氏。每个名字是一个最多由 100 个英文字符组成的字符串。没有候选人名为 `Invalid`。\n\n接下来是 $m$ 行，每行包含一个投票字符串。", "outputFormat": "打印 $n+1$ 行。首先打印候选人的百分比结果。对于每位候选人，打印他/她的姓氏，后跟一个空格，然后是他/她的百分比结果和一个百分号 '% '。最后一行必须指定无效选票的百分比：一个单词 `Invalid` 后跟一个空格，无效选票的百分比和一个百分号。\n\n将所有数字四舍五入到小数点后两位。如果数字正好在两个可表示数字的中间，输出较大的一个（例如，对于 $12.345$ 输出 `12.35`）。", "hint": "时间限制：2 秒，内存限制：256 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7081", "type": "P", "difficulty": 6, "samples": [["move left, move right; move up\nmove left, move down, move up\n", "s/right;/down,/g\n"], ["If not found: move x; else move -x\nIf found: move x; else move -x\n", "s/ not//g\n"], ["abababa\ncbc\n", "s/aba/c/g\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "Special Judge", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Correcting Curiosity", "background": "", "description": "\n\nCuriosity is the rover that explores the Gale Crater on Mars. Recently it found an evidence of water in Martian soil, which will make it easier to plan the future manned missions. $ $\n\nCuriosity can communicate with Earth directly at speeds up to $32 Kbit/s$ , but on average $14$ minutes and $6$ seconds will be required for signals to travel between Earth and Mars.\n\n`You have just seen a stone and applied brakes, but you know that the rover is already passing that stone` -- Matt Heverly, the rover's driver, explains. `So we just plan the route, then write down a list of simple textual commands: move one meter ahead, turn left, make a photo and so on`.\n\nSometimes it is necessary to react very fast to some unexpected events. For example, if the cameras have seen something interesting, then you might want to change the route of the rover to make an additional photo. To do that, you send a substitution command of the form $s/〈string〉/〈replacement〉/g$ . This replaces all occurrences of $〈string〉,$ starting with the leftmost one, to $〈replacement〉.$\n\nMore formally, if A is a non-empty string and $B$ is a string, then to apply the substitution command $s/A/B/g$ to a string $S$ , you should do the following:\n\nFind the leftmost occurrence of A in $S$ , such that $S =$ SL $+$ A $+$ SR.\n\nIf there is no such occurrence, stop. Then, $S$ is the answer.\n\nLet $R$ be the result of applying $s/A/B/g$ to SR.\n\nThe answer is SL $+ B + R$ .\n\nThis means that:\n\nIf there are two overlapping occurrences of A in $S$ , only the leftmost one is replaced. For example, applying $`s/aba/c/g`$ to `abababa` yields `cbc`: after replacing the first occurrence of `aba` the string turns to `cbaba`, and only the last occurrence of `aba` can be replaced after that.\n\nNo substitution uses the results of previous substitutions. For example, applying $`s/a/ab/g`$ to `a` yields `ab`, applying $`s/a/ba/g`$ to `a` yields `ba`.\n\nYou know that the longer is the command, the bigger is the time necessary to transmit it. So, you have to write a program that finds shortest command that transforms the initial string to the final string.\n\n", "inputFormat": "\n\nThe first line contains the initial and the final strings. Both strings are non-empty and their lengths do not exceed $2000$ characters. The strings contain only English letters, spaces and punctuation signs (commas, colons, semicolons and hyphens: $‘,', ‘:', ‘;', ‘-').$ The given strings are not equal.\n\n", "outputFormat": "\n\nOutput the substitution command that transforms initial string to final string and has the minimum length. If there are several shortest substitution commands, output any of them.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Correcting Curiosity", "background": "", "description": "\n\nCuriosity is the rover that explores the Gale Crater on Mars. Recently it found an evidence of water in Martian soil, which will make it easier to plan the future manned missions. $ $\n\nCuriosity can communicate with Earth directly at speeds up to $32 Kbit/s$ , but on average $14$ minutes and $6$ seconds will be required for signals to travel between Earth and Mars.\n\n`You have just seen a stone and applied brakes, but you know that the rover is already passing that stone` -- Matt Heverly, the rover's driver, explains. `So we just plan the route, then write down a list of simple textual commands: move one meter ahead, turn left, make a photo and so on`.\n\nSometimes it is necessary to react very fast to some unexpected events. For example, if the cameras have seen something interesting, then you might want to change the route of the rover to make an additional photo. To do that, you send a substitution command of the form $s/〈string〉/〈replacement〉/g$ . This replaces all occurrences of $〈string〉,$ starting with the leftmost one, to $〈replacement〉.$\n\nMore formally, if A is a non-empty string and $B$ is a string, then to apply the substitution command $s/A/B/g$ to a string $S$ , you should do the following:\n\nFind the leftmost occurrence of A in $S$ , such that $S =$ SL $+$ A $+$ SR.\n\nIf there is no such occurrence, stop. Then, $S$ is the answer.\n\nLet $R$ be the result of applying $s/A/B/g$ to SR.\n\nThe answer is SL $+ B + R$ .\n\nThis means that:\n\nIf there are two overlapping occurrences of A in $S$ , only the leftmost one is replaced. For example, applying $`s/aba/c/g`$ to `abababa` yields `cbc`: after replacing the first occurrence of `aba` the string turns to `cbaba`, and only the last occurrence of `aba` can be replaced after that.\n\nNo substitution uses the results of previous substitutions. For example, applying $`s/a/ab/g`$ to `a` yields `ab`, applying $`s/a/ba/g`$ to `a` yields `ba`.\n\nYou know that the longer is the command, the bigger is the time necessary to transmit it. So, you have to write a program that finds shortest command that transforms the initial string to the final string.\n\n", "inputFormat": "\n\nThe first line contains the initial and the final strings. Both strings are non-empty and their lengths do not exceed $2000$ characters. The strings contain only English letters, spaces and punctuation signs (commas, colons, semicolons and hyphens: $‘,', ‘:', ‘;', ‘-').$ The given strings are not equal.\n\n", "outputFormat": "\n\nOutput the substitution command that transforms initial string to final string and has the minimum length. If there are several shortest substitution commands, output any of them.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Correcting Curiosity", "background": "", "description": "# [NWRRC2013] Correcting Curiosity\n\n\n“好奇号”是探索火星上盖尔陨石坑的火星车。最近，它在火星土壤中发现了水存在的证据，这将使未来的火星登陆任务变得更加容易。$ $\n\n“好奇号”可以用高达$32 Kbit/s$的速度与地球直接通信 ，但在地球和火星之间传输信号分别平均需要$14$秒和$6$秒。\n\n`你刚刚看到一块石头并踩下了刹车，但你知道火星车已经经过那块石头了` -- 火星车司机Matt Heverly解释道。`所以我们需要规划路线，然后写下一个简单的命令列表：如向前移动一米，左转，拍照等等`.\n\n有时你有必要对一些突发事件做出非常迅速的反应。例如，当相机看到了一些有趣的东西，那么你可能会想改变火星车的路线来拍摄的照片。为此，您需要发送一个形式为 $s/〈string〉/〈replacement〉/g$ . 这将替换所有出现的 $〈string〉,$ 从最左边的开始, 到 $〈replacement〉.$\n\n更确切地说，如果A是非空字符串，而$B$是字符串, 则要将替换命令$s/A/B/g$应用于字符串$s$，执行以下操作：\n\n在$S$中查找最左边出现的A，这样$S=$SL$+$A$+$SR。\n\n如果没有A，请停止操作。$S$就是答案。\n\n让$R$成为对SR应用$s/A/B/g$的结果。\n\n那么答案是SL$+B+R$。\n\n这就说明:\n\n如果在$S$中有两个重叠的A，那么只替换最左边的一个。例如，将$`s/aba/c/g`$应用于`abababa`会产生`cbc`：在替换第一个`aba `之后，字符串将变为`cbaba `，在此之后只能替换最后一个出现的` aba `。\n\n如果没有替换就使用先前替换的结果。例如，将$`s/a/ab/g`$应用于`a`产生`ab`，将$`s/s/a/ba/g`$应用于`a`产生`ba`。\n\n命令越长，传输它所需的时间就越长。因此，需要你编写一个程序，找到最短的命令，将初始字符串转换为最终字符串。", "inputFormat": "第一行输入包含初始字符串和最终字符串。这两个字符串都不是空的，并且它们的长度不超过$2000$。字符串仅包含英文字母、空格和标点符号（逗号、冒号、分号和连字符：$'，'，'：'，'；'，'-'）。$给定的字符串不相同。", "outputFormat": "输出将初始字符串转换为最终字符串并最短的替换命令。如果有多个最短的替换命令，请输出其中任何一个。\n\n## 样例 #1\n\n### 样例输入 #1\n\n```\nmove left, move right; move up\nmove left, move down, move up\n```\n\n### 样例输出 #1\n\n```\ns/right;/down,/g\n```\n\n## 样例 #2\n\n### 样例输入 #2\n\n```\nIf not found: move x; else move -x\nIf found: move x; else move -x\n```\n\n### 样例输出 #2\n\n```\ns/ not//g\n```\n\n## 样例 #3\n\n### 样例输入 #3\n\n```\nabababa\ncbc\n```\n\n### 样例输出 #3\n\n```\ns/aba/c/g\n```", "hint": "时间限制: 2 s, 内存限制: 256 MB.", "locale": "zh-CN"}}}
{"pid": "P7082", "type": "P", "difficulty": 5, "samples": [["5 3\n5 0 1 2 5\n5 2 3\n4 2 3\n1 4 5\n", "2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Dwarf Tower", "background": "", "description": "Little Vasya is playing a new game named \"Dwarf Tower\". In this game there are $n$ different items, which you can put on your dwarf character. Items are numbered from $1$ to $n$ . Vasya wants to get the item with number $1$ .\n\nThere are two ways to obtain an item:\n\nYou can buy an item. The i-th item costs $c_i$ money.\n\nYou can craft an item. This game supports only $m$ types of crafting. To craft an item, you give two particular different items and get another one as a result.\n\nHelp Vasya to spend the least amount of money to get the item number $1$ .\n", "inputFormat": "The first line contains two integers $n$ and $m (1 \\le n \\le 10000 , 0 \\le m \\le 100000) -$ the number of different items and the number of crafting types.\n\nThe second line contains $n$ integers $c_i -$ values of the items $(0 \\le c_i \\le 10^9)$ .\n\nThe following $m$ lines describe crafting types, each line contains three distinct integers $a_i, x_i, y_i$ -- $a_i$ is the item that can be crafted from items $x_i$ and $y_i (1 \\le  a_i, x_i, y_i \\le n , a_i \\ne x_i, x_i \\ne y_i, y_i \\ne a_i)$.", "outputFormat": "\nPrint a single integer -- the least amount of money to spend. ", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Dwarf Tower", "background": "", "description": "Little Vasya is playing a new game named \"Dwarf Tower\". In this game there are $n$ different items, which you can put on your dwarf character. Items are numbered from $1$ to $n$ . Vasya wants to get the item with number $1$ .\n\nThere are two ways to obtain an item:\n\nYou can buy an item. The i-th item costs $c_i$ money.\n\nYou can craft an item. This game supports only $m$ types of crafting. To craft an item, you give two particular different items and get another one as a result.\n\nHelp Vasya to spend the least amount of money to get the item number $1$ .\n", "inputFormat": "The first line contains two integers $n$ and $m (1 \\le n \\le 10000 , 0 \\le m \\le 100000) -$ the number of different items and the number of crafting types.\n\nThe second line contains $n$ integers $c_i -$ values of the items $(0 \\le c_i \\le 10^9)$ .\n\nThe following $m$ lines describe crafting types, each line contains three distinct integers $a_i, x_i, y_i$ -- $a_i$ is the item that can be crafted from items $x_i$ and $y_i (1 \\le  a_i, x_i, y_i \\le n , a_i \\ne x_i, x_i \\ne y_i, y_i \\ne a_i)$.", "outputFormat": "\nPrint a single integer -- the least amount of money to spend. ", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Dwarf Tower", "background": null, "description": "小 Vasya 在玩一个新游戏叫做 Dwarf Tower。在这个游戏中有 $n$ 个不同的衣物给你的矮人。衣物从 $1$ 到 $n$ 进行编号。Vasya 想要获得编号为 $1$ 的衣物。\n\n现在有两种方法获得一件衣物：\n\n1. 你可以买它，第 $i$ 件物品花费 $c_i$ 元。\n\n1. 你还可以制作它，这个游戏支持 $m$ 种制作方法。要制作一个衣物，你需要花费两个特定的衣物。\n\n算出 Vasya 至少需要多少钱来获得一号衣物。", "inputFormat": "第一行输入两个整数 $n$ , $m$ $(1 \\le n \\le 10000 , 0 \\le m \\le 100000) $ 代表有 $n$ 种衣物和有 $m$ 种制作方法。\n\n第二行输入 $n$ 个整数，第 $i$ 个整数代表 $c_i$ $(0 \\le c_i \\le 10^9)$ 。\n\n接下来 $m$ 行每行有三个整数 $a_i, x_i, y_i$ $(1 \\le a_i, x_i, y_i \\le n , a_i \\ne x_i, x_i \\ne y_i, y_i \\ne a_i)$ ，$a_i$ 代表 $a_i$ 可以被 $x_i$ 和 $y_i$ 制作。", "outputFormat": "一个整数，代表 Vasya 至少需要多少钱来获得一号衣物。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P7083", "type": "P", "difficulty": 2, "samples": [["3\n21121\n", "10\n"], ["2\n12\n", "2\n"], ["2\n211\n", "4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Energy Tycoon", "background": "", "description": "\n\nLittle Vasya is playing a new computer game -- turn-based strategy `Energy Tycoon`.\n\nThe rules of the game are quite simple:\n\nThe board contains $n$ slots arranged in a line.\n\nThere are power plants, one power plant occupies one or two consecutive slots, and produces one unit of energy.\n\nEach turn the game allows you to build one new power plant, you can put it on the board if you wish. If there is no place for the new power plant, you can remove some older power plants.\n\nAfter each turn, the computer counts the amount of energy produced by the power plants on the board and adds it to the total score.\n\n![](/upload/images2/enegrgytycoon.png)\n\nVasya already knows the types of power plant he will be able to build each turn. Now he wants to know, what the maximum possible score he can get is. Can you help him?\n\n", "inputFormat": "\n\nThe first line of the input contains one integer $n (1 \\le n \\le 100 000)$ -- the number of slots on the board. The second line contains the string $s$ . The i-th character of the string is $1$ if you can build one-slot power plant at the i-th turn and the character is $2$ if you can build two-slot power plant at the i-th turn. The number of turns does not exceed $100 000$ .\n\n", "outputFormat": "\n\nThe output should contain a single integer -- the maximal score that can be achieved.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Energy Tycoon", "background": "", "description": "\n\nLittle Vasya is playing a new computer game -- turn-based strategy `Energy Tycoon`.\n\nThe rules of the game are quite simple:\n\nThe board contains $n$ slots arranged in a line.\n\nThere are power plants, one power plant occupies one or two consecutive slots, and produces one unit of energy.\n\nEach turn the game allows you to build one new power plant, you can put it on the board if you wish. If there is no place for the new power plant, you can remove some older power plants.\n\nAfter each turn, the computer counts the amount of energy produced by the power plants on the board and adds it to the total score.\n\n![](/upload/images2/enegrgytycoon.png)\n\nVasya already knows the types of power plant he will be able to build each turn. Now he wants to know, what the maximum possible score he can get is. Can you help him?\n\n", "inputFormat": "\n\nThe first line of the input contains one integer $n (1 \\le n \\le 100 000)$ -- the number of slots on the board. The second line contains the string $s$ . The i-th character of the string is $1$ if you can build one-slot power plant at the i-th turn and the character is $2$ if you can build two-slot power plant at the i-th turn. The number of turns does not exceed $100 000$ .\n\n", "outputFormat": "\n\nThe output should contain a single integer -- the maximal score that can be achieved.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Energy Tycoon", "background": "", "description": "小 Vasya 正在玩一个新的电脑游戏——回合制策略游戏 `Energy Tycoon`。\n\n游戏的规则很简单：\n\n棋盘上有 $n$ 个槽位排成一行。\n\n有发电厂，一个发电厂占据一个或两个连续的槽位，并产生一个单位的能量。\n\n每回合游戏允许你建造一个新的发电厂，如果你愿意可以将其放在棋盘上。如果没有地方放新的发电厂，你可以移除一些旧的发电厂。\n\n每回合结束后，计算机会计算棋盘上发电厂产生的能量总量并将其加到总分中。\n\nVasya 已经知道他每回合可以建造的发电厂类型。现在他想知道，他能获得的最大可能分数是多少。你能帮助他吗？", "inputFormat": "输入的第一行包含一个整数 $n (1 \\le n \\le 100 000)$ —— 棋盘上的槽位数。第二行包含字符串 $s$。字符串的第 $i$ 个字符是 $1$ 表示你可以在第 $i$ 回合建造一个占一个槽位的发电厂，字符是 $2$ 表示你可以在第 $i$ 回合建造一个占两个槽位的发电厂。回合数不超过 $100 000$。", "outputFormat": "输出应包含一个整数 —— 可以达到的最大分数。", "hint": "时间限制：2 秒，内存限制：256 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7084", "type": "P", "difficulty": 3, "samples": [["10 12 2\n6 4 2 5 2 3 1 11 8 5\n", "6\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Flight Boarding Optimization", "background": "", "description": "\n\nPeter is an executive boarding manager in Byteland airport. His job is to optimize the boarding process. The planes in Byteland have $s$ rows, numbered from $1$ to $s$ . Every row has six seats, labeled A to $F$ .\n\n![](/upload/images2/flgithseat.png)\n\nThere are $n$ passengers, they form a queue and board the plane one by one. If the i-th passenger sits in a row $r_{i}$ then the difficulty of boarding for him is equal to the number of passengers boarded before him and sit in rows $1$ . . . $r_{i}−1$ . The total difficulty of the boarding is the sum of difficulties for all passengers. For example, if there are ten passengers, and their seats are $6A, 4B, 2E, 5F, 2A, 3F, 1C, 10E, 8B, 5A,$ in the queue order, then the difficulties of their boarding are $0 , 0 , 0 , 2 , 0 , 2 , 0 , 7 , 7 , 5$ , and the total difficulty is $23$ .\n\nTo optimize the boarding, Peter wants to divide the plane into $k$ zones. Every zone must be a continuous range of rows. Than the boarding process is performed in $k$ phases. On every phase, one zone is selected and passengers whose seats are in this zone are boarding in the order they were in the initial queue. $ $\n\nIn the example above, if we divide the plane into two zones: rows $5-10$ and rows $1-4$ , then during the first phase the passengers will take seats $6A, 5F, 10E, 8B, 5A,$ and during the second phase the passengers will take seats $4B, 2E, 2A, 3F, 1C,$ in this order. The total difficulty of the boarding will be $6$ .\n\nHelp Peter to find the division of the plane into $k$ zones which minimizes the total difficulty of the boarding, given a specific queue of passengers.\n\n", "inputFormat": "\n\nThe first line contains three integers $n (1 \\le n \\le 1000) , s (1 \\le s \\le 1000)$ , and $k (1 \\le k \\le 50$ ; $k \\le s)$ . The next line contains $n$ integers $r_{i} (1 \\le r_{i} \\le s)$ .\n\nEach row is occupied by at most $6$ passengers.\n\n", "outputFormat": "\n\nOutput one number, the minimal possible difficulty of the boarding.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Flight Boarding Optimization", "background": "", "description": "\n\nPeter is an executive boarding manager in Byteland airport. His job is to optimize the boarding process. The planes in Byteland have $s$ rows, numbered from $1$ to $s$ . Every row has six seats, labeled A to $F$ .\n\n![](/upload/images2/flgithseat.png)\n\nThere are $n$ passengers, they form a queue and board the plane one by one. If the i-th passenger sits in a row $r_{i}$ then the difficulty of boarding for him is equal to the number of passengers boarded before him and sit in rows $1$ . . . $r_{i}−1$ . The total difficulty of the boarding is the sum of difficulties for all passengers. For example, if there are ten passengers, and their seats are $6A, 4B, 2E, 5F, 2A, 3F, 1C, 10E, 8B, 5A,$ in the queue order, then the difficulties of their boarding are $0 , 0 , 0 , 2 , 0 , 2 , 0 , 7 , 7 , 5$ , and the total difficulty is $23$ .\n\nTo optimize the boarding, Peter wants to divide the plane into $k$ zones. Every zone must be a continuous range of rows. Than the boarding process is performed in $k$ phases. On every phase, one zone is selected and passengers whose seats are in this zone are boarding in the order they were in the initial queue. $ $\n\nIn the example above, if we divide the plane into two zones: rows $5-10$ and rows $1-4$ , then during the first phase the passengers will take seats $6A, 5F, 10E, 8B, 5A,$ and during the second phase the passengers will take seats $4B, 2E, 2A, 3F, 1C,$ in this order. The total difficulty of the boarding will be $6$ .\n\nHelp Peter to find the division of the plane into $k$ zones which minimizes the total difficulty of the boarding, given a specific queue of passengers.\n\n", "inputFormat": "\n\nThe first line contains three integers $n (1 \\le n \\le 1000) , s (1 \\le s \\le 1000)$ , and $k (1 \\le k \\le 50$ ; $k \\le s)$ . The next line contains $n$ integers $r_{i} (1 \\le r_{i} \\le s)$ .\n\nEach row is occupied by at most $6$ passengers.\n\n", "outputFormat": "\n\nOutput one number, the minimal possible difficulty of the boarding.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Flight Boarding Optimization", "background": "", "description": "Peter是 Byteland 机场的高级登机管理人员。他的工作是优化登机流程。Byteland 中的飞机有$s$行，编号从1到$s$。每排有六个座位，标有$A$到$F$。\n\n有$n$名乘客，他们排成一队，一个接一个地登上飞机。如果第$i$位乘客坐在第$r_i$排，那么，他登机的难度等于在他前面登机的并且坐在第1......$r_i$ $-$1排的乘客人数之和。\n\n\n\n登机的总难度是所有乘客的登机难度之和。例如，如果有十名乘客，他们的座位分别是$6A、4B、2E、5F、2A、3F、1C、10E、8B、5A$，按照排队顺序排列，那么他们登机的难度分别是$0、0、0、2、0、2、0、7、7、5$，总难度是$23$。\n\n为了优化登机，Peter希望将飞机划分成$k$个区域。每个分区都必须是连续的行数。然后分成$k$段执行登机流程。在每个阶段，选择一个区域，座位在该区域的乘客将按照他们在初始队列中的顺序登机。\n\n在上面的示例中，如果我们将平面划分为两个区域：第 $5-10$ 行和第$1-4$ 行，则在第一阶段，乘客将依次就座$6A、5F、10E、8B、5A$。在第二阶段，乘客将依次就座$4B、2E、2A、3F、1C$。登机的总难度为$6$。\n\n帮助Peter找到将飞机划分为$k$个区域的方法，在给定特定乘客队列的情况下，将登机的总难度降至最低。", "inputFormat": "第一行包括三个整数$n(1≤n≤1000)$,$s(1≤s≤1000)$和$k(1≤k≤1000)$\n\n第二行包括$n$个整数$r_i(1≤r_i≤s)$", "outputFormat": "输出一行一个数，最小的登机总难度", "hint": "", "locale": "zh-CN"}}}
{"pid": "P7085", "type": "P", "difficulty": 2, "samples": [["11 4 3 2\n", "2\n"], ["10 8 3 4\n", "2\n"], ["15 7 4 2\n", "4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Garage", "background": "", "description": "\n\nWow! What a lucky day! Your company has just won a social contract for building a garage complex. Almost all formalities are done: contract payment is already transferred to your account.\n\nSo now it is the right time to read the contract. Okay, there is a sandlot in the form of $W \\times H$ rectangle and you have to place some garages there. Garages are $w \\times h$ rectangles and their edges must be parallel to the corresponding edges of the sandlot (you may not rotate garages, even by $90^{◦}).$ The coordinates of garages may be non-integer.\n\nYou know that the economy must be economical, so you decided to place as few garages as possible. Unfortunately, there is an opposite requirement in the contract: placing maximum possible number of garages.\n\nNow let's see how these requirements are checked. . . The plan is accepted if it is impossible to add a new garage without moving the other garages (the new garage must also have edges parallel to corresponding sandlot edges).\n\n![](https://www.acmicpc.net/upload/images2/garage.png)\n\nTime is money, find the minimal number of garages that must be ordered, so that you can place them on the sandlot and there is no place for an extra garage.\n\n", "inputFormat": "\n\nThe only line contains four integers: $W , H , w , h$ -- dimensions of sandlot and garage in meters. You may assume that $1 \\le w \\le W \\le 30 000$ and $1 \\le h \\le H \\le 30 000$ .\n\n", "outputFormat": "\n\nOutput the optimal number of garages.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Garage", "background": "", "description": "\n\nWow! What a lucky day! Your company has just won a social contract for building a garage complex. Almost all formalities are done: contract payment is already transferred to your account.\n\nSo now it is the right time to read the contract. Okay, there is a sandlot in the form of $W \\times H$ rectangle and you have to place some garages there. Garages are $w \\times h$ rectangles and their edges must be parallel to the corresponding edges of the sandlot (you may not rotate garages, even by $90^{◦}).$ The coordinates of garages may be non-integer.\n\nYou know that the economy must be economical, so you decided to place as few garages as possible. Unfortunately, there is an opposite requirement in the contract: placing maximum possible number of garages.\n\nNow let's see how these requirements are checked. . . The plan is accepted if it is impossible to add a new garage without moving the other garages (the new garage must also have edges parallel to corresponding sandlot edges).\n\n![](https://www.acmicpc.net/upload/images2/garage.png)\n\nTime is money, find the minimal number of garages that must be ordered, so that you can place them on the sandlot and there is no place for an extra garage.\n\n", "inputFormat": "\n\nThe only line contains four integers: $W , H , w , h$ -- dimensions of sandlot and garage in meters. You may assume that $1 \\le w \\le W \\le 30 000$ and $1 \\le h \\le H \\le 30 000$ .\n\n", "outputFormat": "\n\nOutput the optimal number of garages.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Garage", "background": "", "description": "哇！多么幸运的一天！你的公司刚刚赢得了一个建造车库综合体的社会合同。几乎所有的手续都已完成：合同款项已经转入你的账户。\n\n所以现在是阅读合同的好时机。好的，有一个 $W \\times H$ 的矩形沙地，你需要在那里放置一些车库。车库是 $w \\times h$ 的矩形，并且它们的边必须与沙地的对应边平行（你不能旋转车库，即使是 $90^{\\circ}$）。车库的坐标可以是非整数。\n\n你知道经济必须是经济的，所以你决定尽可能少地放置车库。不幸的是，合同中有一个相反的要求：放置尽可能多的车库。\n\n现在让我们看看这些要求是如何被检查的……计划被接受的条件是：如果不移动其他车库，就不可能再添加一个新的车库（新车库的边也必须与沙地的对应边平行）。\n\n时间就是金钱，找出必须订购的最少车库数量，以便你可以将它们放置在沙地上，并且没有多余车库的空间。", "inputFormat": "唯一的一行包含四个整数：$W , H , w , h$ —— 沙地和车库的尺寸，单位为米。你可以假设 $1 \\le w \\le W \\le 30 000$ 且 $1 \\le h \\le H \\le 30 000$。", "outputFormat": "输出最优的车库数量。", "hint": "时间限制：2 秒，内存限制：256 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7086", "type": "P", "difficulty": 6, "samples": [["4 1\nAA\nAB\nBB\nBA\n", "2\n2 1 2\n2 3 4\n"], ["3 2\nABA\nBAB\nXY\n", "3\n1 1\n1 2\n1 3\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "Special Judge", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Heavy Chain Clusterization", "background": "", "description": "\n\nA group of biologists is trying to find a cure for a viral disease. They have tried many antibodies of various origins that could potentially fight the viral antigens, and have selected $n$ antibodies that seem to work best during experiments.\n\nEach antibody is identified by its heavy chain -- a sequence of amino acids.\n\nThe set of antibodies form a similarity cluster, if at least one of the following holds:\n\nk-prefixes (first $k$ amino acids) of all their heavy chains are equal;\n\nk-suffixes (last $k$ amino acids) of all their heavy chains are equal.\n\nIn order to simplify the future research, biologists want to group antibodies to similarity clusters.\n\nYou need to split the given antibodies to a minimum number of similarity clusters.\n\n", "inputFormat": "\n\nThe first line contains two integers $n$ and $k$ -- the number of heavy chains and the length of sequence of amino acids to coincide $(1 \\le n \\le 5 000 , 1 \\le k \\le 550)$ .\n\nThe following $n$ lines contain sequences of amino acids that form heavy chains of antibodies. Each amino acid described with an uppercase English letter. Each heavy chain contains at least $k$ and no more than $550$ amino acids.\n\n", "outputFormat": "\n\nThe first line of output must contain a single integer -- the minimum number of similarity clusters. The following lines must contain descriptions of clusters, one per line.\n\nEach description starts with $m_i$ -- the number of antibodies in the cluster and is followed by $m_i$ integers -- numbers of these antibodies. Antibodies are numbered in the order of appearance in the input starting from one.\n\nEach antibody must be present in exactly one cluster.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Heavy Chain Clusterization", "background": "", "description": "\n\nA group of biologists is trying to find a cure for a viral disease. They have tried many antibodies of various origins that could potentially fight the viral antigens, and have selected $n$ antibodies that seem to work best during experiments.\n\nEach antibody is identified by its heavy chain -- a sequence of amino acids.\n\nThe set of antibodies form a similarity cluster, if at least one of the following holds:\n\nk-prefixes (first $k$ amino acids) of all their heavy chains are equal;\n\nk-suffixes (last $k$ amino acids) of all their heavy chains are equal.\n\nIn order to simplify the future research, biologists want to group antibodies to similarity clusters.\n\nYou need to split the given antibodies to a minimum number of similarity clusters.\n\n", "inputFormat": "\n\nThe first line contains two integers $n$ and $k$ -- the number of heavy chains and the length of sequence of amino acids to coincide $(1 \\le n \\le 5 000 , 1 \\le k \\le 550)$ .\n\nThe following $n$ lines contain sequences of amino acids that form heavy chains of antibodies. Each amino acid described with an uppercase English letter. Each heavy chain contains at least $k$ and no more than $550$ amino acids.\n\n", "outputFormat": "\n\nThe first line of output must contain a single integer -- the minimum number of similarity clusters. The following lines must contain descriptions of clusters, one per line.\n\nEach description starts with $m_i$ -- the number of antibodies in the cluster and is followed by $m_i$ integers -- numbers of these antibodies. Antibodies are numbered in the order of appearance in the input starting from one.\n\nEach antibody must be present in exactly one cluster.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Heavy Chain Clusterization", "background": "", "description": "一组生物学家正在寻找一种治疗病毒性疾病的方法。他们尝试了多种可能对抗病毒抗原的抗体，并选出了在实验中效果最好的 $n$ 种抗体。  \n\n每种抗体通过其重链（由氨基酸序列组成）进行识别。  \n\n如果满足以下至少一个条件，则这些抗体形成一个相似簇：  \n\n- 所有重链的 k 前缀（前 $k$ 个氨基酸）相同；  \n- 所有重链的 k 后缀（后 $k$ 个氨基酸）相同。  \n\n为了简化未来的研究，生物学家希望将抗体分组为相似簇。  \n\n你需要将给定的抗体划分为最少数量的相似簇。", "inputFormat": "第一行包含两个整数 $n$ 和 $k$ —— 重链的数量和需要一致的氨基酸序列的长度 $(1 \\le n \\le 5 000 , 1 \\le k \\le 550)$。  \n\n接下来的 $n$ 行包含形成抗体重链的氨基酸序列。每个氨基酸用一个大写的英文字母描述。每个重链至少包含 $k$ 个氨基酸，最多不超过 $550$ 个氨基酸。", "outputFormat": "输出的第一行必须包含一个整数 —— 最小的相似簇数量。接下来的行必须包含簇的描述，每行一个。  \n\n每个描述以 $m_i$ 开头 —— 簇中抗体的数量，接下来是 $m_i$ 个整数 —— 这些抗体的编号。抗体按照输入中出现的顺序编号，从 1 开始。  \n\n每个抗体必须恰好出现在一个簇中。", "hint": "时间限制：2 秒，内存限制：256 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7087", "type": "P", "difficulty": 6, "samples": [["4\n.....1...\n1........\n.2.....8.\n.........\n8....9...\n.........\n....7....\n...2...1.\n2...4....\n\n....2....\n...7.4...\n8.......9\n.8...2..1\n..2......\n.........\n.........\n..1.8....\n.........\n\n1........\n.........\n.........\n.........\n.........\n.........\n.........\n.........\n.........\n\n.....1...\n1........\n.2.....8.\n.........\n8....9...\n.........\n....7....\n...2...1.\n2...4....\n", "Yes\n7\nC 1 2\nD 5 3\nF\nr 7 9\nc 6 5\nC 2 3\nD 1 8\nNo\nYes\n0\nNo\nYes\n8\nR 1 2\nC 2 3\nc 4 5\nF\nr 5 6\nc 7 9\nD 1 8\nD 3 5\nNo\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "Special Judge", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Intellectual Property", "background": "", "description": "\n\nErast Kopi is famous Sudoku puzzle designer. Resounding success of his puzzle compilations caused a number of imitations and plagiarisms. Prior to sending a lawsuit he decided to get more evidence.\n\nSudoku puzzle is a table $9 \\times 9$ , divided into $3 \\times 3$ subtables of $3 \\times 3$ cells each. Each cell may contain a digit from $1$ to $9$ . The task is to fill empty cells with digits in a way that each row, each column and each of the $9$ subtables $3 \\times 3$ contains each digit from $1$ to $9$ exactly once.\n\nKopi has a database of Sudoku puzzles and he wants to check if it contains similar puzzles. The puzzle $P$ is similar to the puzzle $Q$ , if it is possible to transform the puzzle $P$ into the puzzle $Q$ using a sequence of the following operations:\n\nchoose two digits $x$ and $y$ and replace all digits $x$ with $y$ and vice versa;\n\nswap two triples of rows: $(1 , 2 , 3) , (4 , 5 , 6) , (7 , 8 , 9)$ ;\n\nswap two rows in one triple of rows;\n\nswap two triples of columns: $(1 , 2 , 3) , (4 , 5 , 6) , (7 , 8 , 9)$ ;\n\nswap two columns in one triple of columns;\n\nflip along top-left -- bottom-right axis. After this operation columns become rows and vice versa.\n\n![](/upload/images2/ip.png)\n\nHelp Kopi to find similar puzzles in his database.\n\n", "inputFormat": "\n\nThe first line of the input contains single integer $n$ -- the number of puzzles in the database $(1 \\le n \\le 20)$ .\n\nThe rest of the input contains description of $n$ puzzles: $P_1 , P_2$ , . . . , Pn. Each puzzle is described by nine lines that contain nine characters each. Each character is either a digit from $1$ to $9$ , or a dot $(‘. ')$ denoting an empty cell. An empty line separates consecutive puzzles in the database.\n\nThere are no spaces in the input file.\n\nThe puzzles are not guaranteed to be solvable.\n\n", "outputFormat": "\n\nCheck if the puzzle $P_1$ is similar to puzzles $P_2$ , P3 , . . . , $P_n$ (in this order), than check if the puzzle $P_2$ is similar to puzzles P3 , P4 , . . . , $P_n$ (in this order) and so on.\n\nIf the puzzle $P_i$ is similar to the puzzle $Pj (1 \\le i < j \\le n)$ output `Yes`, otherwise output `No`. If the answer is positive, the next line should contain an integer qij -- the number of operations required to transform the puzzle $P_i$ to the puzzle $Pj$ . The number of operations is not required to be minimal, however it must not exceed $1000$ . In the following qij lines write the operations that transform the puzzle $P_i$ to the puzzle $Pj$ , one per line.\n\nOperations are encoded in the following way:\n\n`D $x$ y` for swapping digits $x$ and $y$ ;\n\n`R a b` for swapping triples of rows (3a $− 2$ , 3a $− 1 , 3a)$ and (3b $− 2$ , 3b $− 1 , 3b);$\n\n`r a b` for swapping rows a and $b$ , rows must belong to same triple of rows;\n\n`C a b` for swapping triples of columns (3a $− 2$ , 3a $− 1 , 3a)$ and (3b $− 2$ , 3b $− 1 , 3b);$\n\n`c a b` for swapping columns a and $b$ , columns must belong to same triple of columns;\n\n`F` for flipping along top-left -- bottom-right axis.\n\nThe columns are numbered from left to right and the rows are numbered from top to bottom as they are given in the input file, starting from one.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Intellectual Property", "background": "", "description": "\n\nErast Kopi is famous Sudoku puzzle designer. Resounding success of his puzzle compilations caused a number of imitations and plagiarisms. Prior to sending a lawsuit he decided to get more evidence.\n\nSudoku puzzle is a table $9 \\times 9$ , divided into $3 \\times 3$ subtables of $3 \\times 3$ cells each. Each cell may contain a digit from $1$ to $9$ . The task is to fill empty cells with digits in a way that each row, each column and each of the $9$ subtables $3 \\times 3$ contains each digit from $1$ to $9$ exactly once.\n\nKopi has a database of Sudoku puzzles and he wants to check if it contains similar puzzles. The puzzle $P$ is similar to the puzzle $Q$ , if it is possible to transform the puzzle $P$ into the puzzle $Q$ using a sequence of the following operations:\n\nchoose two digits $x$ and $y$ and replace all digits $x$ with $y$ and vice versa;\n\nswap two triples of rows: $(1 , 2 , 3) , (4 , 5 , 6) , (7 , 8 , 9)$ ;\n\nswap two rows in one triple of rows;\n\nswap two triples of columns: $(1 , 2 , 3) , (4 , 5 , 6) , (7 , 8 , 9)$ ;\n\nswap two columns in one triple of columns;\n\nflip along top-left -- bottom-right axis. After this operation columns become rows and vice versa.\n\n![](/upload/images2/ip.png)\n\nHelp Kopi to find similar puzzles in his database.\n\n", "inputFormat": "\n\nThe first line of the input contains single integer $n$ -- the number of puzzles in the database $(1 \\le n \\le 20)$ .\n\nThe rest of the input contains description of $n$ puzzles: $P_1 , P_2$ , . . . , Pn. Each puzzle is described by nine lines that contain nine characters each. Each character is either a digit from $1$ to $9$ , or a dot $(‘. ')$ denoting an empty cell. An empty line separates consecutive puzzles in the database.\n\nThere are no spaces in the input file.\n\nThe puzzles are not guaranteed to be solvable.\n\n", "outputFormat": "\n\nCheck if the puzzle $P_1$ is similar to puzzles $P_2$ , P3 , . . . , $P_n$ (in this order), than check if the puzzle $P_2$ is similar to puzzles P3 , P4 , . . . , $P_n$ (in this order) and so on.\n\nIf the puzzle $P_i$ is similar to the puzzle $Pj (1 \\le i < j \\le n)$ output `Yes`, otherwise output `No`. If the answer is positive, the next line should contain an integer qij -- the number of operations required to transform the puzzle $P_i$ to the puzzle $Pj$ . The number of operations is not required to be minimal, however it must not exceed $1000$ . In the following qij lines write the operations that transform the puzzle $P_i$ to the puzzle $Pj$ , one per line.\n\nOperations are encoded in the following way:\n\n`D $x$ y` for swapping digits $x$ and $y$ ;\n\n`R a b` for swapping triples of rows (3a $− 2$ , 3a $− 1 , 3a)$ and (3b $− 2$ , 3b $− 1 , 3b);$\n\n`r a b` for swapping rows a and $b$ , rows must belong to same triple of rows;\n\n`C a b` for swapping triples of columns (3a $− 2$ , 3a $− 1 , 3a)$ and (3b $− 2$ , 3b $− 1 , 3b);$\n\n`c a b` for swapping columns a and $b$ , columns must belong to same triple of columns;\n\n`F` for flipping along top-left -- bottom-right axis.\n\nThe columns are numbered from left to right and the rows are numbered from top to bottom as they are given in the input file, starting from one.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Intellectual Property", "background": "", "description": "Erast Kopi 是一位著名的数独谜题设计师。他的谜题合集取得了巨大成功，引发了许多模仿和抄袭。在提出诉讼之前，他决定收集更多证据。\n\n数独谜题是一个 $9 \\times 9$ 的表格，分为 $3 \\times 3$ 的子表格，每个子表格包含 $3 \\times 3$ 的单元格。每个单元格可以包含从 $1$ 到 $9$ 的一个数字。任务是用数字填充空单元格，使得每一行、每一列以及每个 $3 \\times 3$ 的子表格都恰好包含从 $1$ 到 $9$ 的每个数字一次。\n\nKopi 有一个数独谜题数据库，他想检查其中是否包含相似的谜题。谜题 $P$ 与谜题 $Q$ 相似，如果可以通过以下操作序列将谜题 $P$ 转换为谜题 $Q$：\n\n选择两个数字 $x$ 和 $y$，并将所有数字 $x$ 替换为 $y$，反之亦然；\n\n交换两组行：$(1 , 2 , 3) , (4 , 5 , 6) , (7 , 8 , 9)$；\n\n在一组行中交换两行；\n\n交换两组列：$(1 , 2 , 3) , (4 , 5 , 6) , (7 , 8 , 9)$；\n\n在一组列中交换两列；\n\n沿左上到右下轴翻转。此操作后，列变为行，反之亦然。\n\n帮助 Kopi 在他的数据库中找到相似的谜题。", "inputFormat": "输入的第一行包含一个整数 $n$，表示数据库中的谜题数量 $(1 \\le n \\le 20)$。\n\n输入的其余部分包含 $n$ 个谜题的描述：$P_1 , P_2$，……，$P_n$。每个谜题由九行描述，每行包含九个字符。每个字符要么是从 $1$ 到 $9$ 的数字，要么是表示空单元格的点（‘.’）。数据库中连续的谜题之间用空行分隔。\n\n输入文件中没有空格。\n\n这些谜题不保证可解。", "outputFormat": "检查谜题 $P_1$ 是否与谜题 $P_2$，$P_3$，……，$P_n$（按此顺序）相似，然后检查谜题 $P_2$ 是否与谜题 $P_3$，$P_4$，……，$P_n$（按此顺序）相似，依此类推。\n\n如果谜题 $P_i$ 与谜题 $P_j (1 \\le i < j \\le n)$ 相似，输出 `Yes`，否则输出 `No`。如果答案是肯定的，下一行应包含一个整数 $q_{ij}$，表示将谜题 $P_i$ 转换为谜题 $P_j$ 所需的操作数。操作数不要求是最小的，但不能超过 $1000$。在接下来的 $q_{ij}$ 行中，写出将谜题 $P_i$ 转换为谜题 $P_j$ 的操作，每行一个。\n\n操作以以下方式编码：\n\n`D $x$ y` 表示交换数字 $x$ 和 $y$；\n\n`R a b` 表示交换行组 $(3a - 2, 3a - 1, 3a)$ 和 $(3b - 2, 3b - 1, 3b)$；\n\n`r a b` 表示交换行 $a$ 和 $b$，行必须属于同一组行；\n\n`C a b` 表示交换列组 $(3a - 2, 3a - 1, 3a)$ 和 $(3b - 2, 3b - 1, 3b)$；\n\n`c a b` 表示交换列 $a$ 和 $b$，列必须属于同一组列；\n\n`F` 表示沿左上到右下轴翻转。\n\n列从左到右编号，行从上到下编号，编号从一开始。", "hint": "时间限制：2 秒，内存限制：256 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7088", "type": "P", "difficulty": 5, "samples": [["5\n1 2 3 4 5\n+/*:X\n", "55\n"], ["5\n1 2 3 4 5\nN++/X-X+1\n", "0\n"], ["3\n11 56 37\n+/(3-+/*:*:X)-X**:X\n", "964602515\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "ICPC", "NWRRC"], "title": "[NWRRC 2013] J", "background": "", "description": "\n\nThe $J$ programming language, developed in the early $1990s$ by Kenneth $E$ . Iverson and Roger Hui, is a synthesis of APL (also by Iverson) and the FP and FL function-level languages created by John Backus.\n\nWikipedia. $J$ (programming language)\n\nAPL language family is famous for its support of advanced operations on vectors and arrays, and $J$ is not an exception. For example, all unary and binary numeric operations in these languages by default are applicable to vectors and arrays of different dimensions. Plus operation $(‘+')$ can add not only scalars, like in other languages, but also scalars and vectors (the scalar is added to each component of the vector), or vectors and vectors (the vectors are added component-wise).\n\nThe expressive power of $J$ is amazing (as well as its cryptic syntax), but for this problem we need just a small subset of the language. We consider a single expression, where we may use one vector variable $X$ , one scalar variable $N$ -- the length of the vector $X$ , and the following operations:\n\nWe can add $(‘+'),$ subtract $(‘-')$ or multiply $(‘ \\times ')$ two vectors, vector and scalar, or two scalars.\n\nWe can use unary minus $(‘-')$ and unary squaring operations $(‘ \\times :')$ for scalars and vectors $(component-wise).$\n\nWe can fold a vector with plus operation $(‘+/')$ -- that is, compute the sum of a vector (unary operation).\n\nOperations are evaluated right-to-left, natural precedence of operations is ignored in $J$ . The order of evaluation can be altered by parentheses. More precisely the syntax is specified in the following BNF.\n\n$〈expressio_n〉 ::= 〈ter_m〉 | 〈ter_m〉 (‘+' | ‘-' | ‘ \\times ') 〈expressio_n〉 | (‘-' | ‘ \\times :' | ‘+/') 〈expressio_n〉$\n\n$〈ter_m〉 ::= ‘('〈expressio_n〉‘)' | ‘X' | ‘N' | 〈number〉$\n\n$〈number〉 ::= (‘0' | ‘1' |$ . . . $| ‘9')^{+}$\n\nTo correctly impose one more limitation on expression syntax, let us define complexity of an expression:\n\ncomplexity of scalars (numbers, $‘N',$ and result of fold) is zero;\n\ncomplexity of $‘X'$ is one;\n\ncomplexity of addition and subtraction is the maximum of their operands' complexities;\n\ncomplexity of multiplication is the sum of its operands' complexities;\n\ncomplexity of unary squaring is twice the complexity of its operand.\n\nFor example, the complexity of expression $`(3-+/ \\times : \\times :X)-X \\times \\times :X`$ is $3$ , while the complexity of its subexpression $` \\times : \\times :X`$ is $4$ .\n\nYour program is given a scalar-valued expression and a value of the vector $X$ , and it should compute the expression result modulo $10^{9}.$ The complexity of each subexpression in the given expression does not exceed $10$ .\n\n", "inputFormat": "\n\nThe first line contains one integer number $N (1 \\le N \\le 10^{5})$ -- the length of the vector $X$ .\n\nThe second line contains $N$ integers -- components of the vector $X (0 \\le X_{i} < 10^{9}).$\n\nThe third line contains the expression to be computed, a non-empty string of not more than $105$ symbols. Each number in the expression is less than $109$ . The fold is never applied to a scalar.\n\n", "outputFormat": "\n\nOutput a single integer number -- the expression result modulo $10^{9}.$\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] J", "background": "", "description": "\n\nThe $J$ programming language, developed in the early $1990s$ by Kenneth $E$ . Iverson and Roger Hui, is a synthesis of APL (also by Iverson) and the FP and FL function-level languages created by John Backus.\n\nWikipedia. $J$ (programming language)\n\nAPL language family is famous for its support of advanced operations on vectors and arrays, and $J$ is not an exception. For example, all unary and binary numeric operations in these languages by default are applicable to vectors and arrays of different dimensions. Plus operation $(‘+')$ can add not only scalars, like in other languages, but also scalars and vectors (the scalar is added to each component of the vector), or vectors and vectors (the vectors are added component-wise).\n\nThe expressive power of $J$ is amazing (as well as its cryptic syntax), but for this problem we need just a small subset of the language. We consider a single expression, where we may use one vector variable $X$ , one scalar variable $N$ -- the length of the vector $X$ , and the following operations:\n\nWe can add $(‘+'),$ subtract $(‘-')$ or multiply $(‘ \\times ')$ two vectors, vector and scalar, or two scalars.\n\nWe can use unary minus $(‘-')$ and unary squaring operations $(‘ \\times :')$ for scalars and vectors $(component-wise).$\n\nWe can fold a vector with plus operation $(‘+/')$ -- that is, compute the sum of a vector (unary operation).\n\nOperations are evaluated right-to-left, natural precedence of operations is ignored in $J$ . The order of evaluation can be altered by parentheses. More precisely the syntax is specified in the following BNF.\n\n$〈expressio_n〉 ::= 〈ter_m〉 | 〈ter_m〉 (‘+' | ‘-' | ‘ \\times ') 〈expressio_n〉 | (‘-' | ‘ \\times :' | ‘+/') 〈expressio_n〉$\n\n$〈ter_m〉 ::= ‘('〈expressio_n〉‘)' | ‘X' | ‘N' | 〈number〉$\n\n$〈number〉 ::= (‘0' | ‘1' |$ . . . $| ‘9')^{+}$\n\nTo correctly impose one more limitation on expression syntax, let us define complexity of an expression:\n\ncomplexity of scalars (numbers, $‘N',$ and result of fold) is zero;\n\ncomplexity of $‘X'$ is one;\n\ncomplexity of addition and subtraction is the maximum of their operands' complexities;\n\ncomplexity of multiplication is the sum of its operands' complexities;\n\ncomplexity of unary squaring is twice the complexity of its operand.\n\nFor example, the complexity of expression $`(3-+/ \\times : \\times :X)-X \\times \\times :X`$ is $3$ , while the complexity of its subexpression $` \\times : \\times :X`$ is $4$ .\n\nYour program is given a scalar-valued expression and a value of the vector $X$ , and it should compute the expression result modulo $10^{9}.$ The complexity of each subexpression in the given expression does not exceed $10$ .\n\n", "inputFormat": "\n\nThe first line contains one integer number $N (1 \\le N \\le 10^{5})$ -- the length of the vector $X$ .\n\nThe second line contains $N$ integers -- components of the vector $X (0 \\le X_{i} < 10^{9}).$\n\nThe third line contains the expression to be computed, a non-empty string of not more than $105$ symbols. Each number in the expression is less than $109$ . The fold is never applied to a scalar.\n\n", "outputFormat": "\n\nOutput a single integer number -- the expression result modulo $10^{9}.$\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] J", "background": "", "description": "$J$ 编程语言由 Kenneth E. Iverson 和 Roger Hui 在 1990 年代早期开发，是 APL（也是由 Iverson 开发）与 John Backus 创建的 FP 和 FL 函数级语言的综合体。\n\nWikipedia. $J$ (编程语言)\n\nAPL 语言家族以其对向量和数组的高级操作支持而闻名，$J$ 也不例外。例如，这些语言中的所有一元和二元数值运算默认适用于不同维度的向量和数组。加法运算（‘+’）不仅可以像其他语言一样对标量进行加法运算，还可以对标量和向量进行加法运算（标量加到向量的每个分量上），或者对向量和向量进行加法运算（向量按分量相加）。\n\n$J$ 的表达能力令人惊叹（以及它的神秘语法），但对于这个问题，我们只需要语言的一个小子集。我们考虑一个单一表达式，其中可以使用一个向量变量 $X$，一个标量变量 $N$——向量 $X$ 的长度，以及以下操作：\n\n我们可以对两个向量、向量和标量或两个标量进行加法（‘+’）、减法（‘-’）或乘法（‘\\times’）运算。\n\n我们可以对标量和向量（按分量）使用一元负号（‘-’）和一元平方运算（‘\\times:’）。\n\n我们可以使用加法折叠向量（‘+/’）——即计算向量的和（一元运算）。\n\n运算从右到左进行评估，$J$ 中忽略运算的自然优先级。可以通过括号改变评估顺序。更准确地说，语法在以下 BNF 中指定。\n\n$\\langle expression \\rangle ::= \\langle term \\rangle | \\langle term \\rangle (‘+’ | ‘-’ | ‘\\times’) \\langle expression \\rangle | (‘-’ | ‘\\times:’ | ‘+/’) \\langle expression \\rangle$\n\n$\\langle term \\rangle ::= ‘(’\\langle expression \\rangle‘)’ | ‘X’ | ‘N’ | \\langle number \\rangle$\n\n$\\langle number \\rangle ::= (‘0’ | ‘1’ | \\ldots | ‘9’)^{+}$\n\n为了正确施加对表达式语法的一个限制，让我们定义表达式的复杂度：\n\n标量（数字，‘N’，以及折叠的结果）的复杂度为零；\n\n‘X’ 的复杂度为一；\n\n加法和减法的复杂度是其操作数复杂度的最大值；\n\n乘法的复杂度是其操作数复杂度的和；\n\n一元平方的复杂度是其操作数复杂度的两倍。\n\n例如，表达式 `(3-+/ \\times: \\times:X)-X \\times \\times:X` 的复杂度是 3，而其子表达式 `\\times: \\times:X` 的复杂度是 4。\n\n你的程序给定一个标量值的表达式和向量 $X$ 的值，它应该计算表达式结果对 $10^{9}$ 取模。给定表达式中每个子表达式的复杂度不超过 10。", "inputFormat": "第一行包含一个整数 $N (1 \\le N \\le 10^{5})$——向量 $X$ 的长度。\n\n第二行包含 $N$ 个整数——向量 $X$ 的分量 $(0 \\le X_{i} < 10^{9})$。\n\n第三行包含要计算的表达式，一个不超过 105 个符号的非空字符串。表达式中的每个数字都小于 109。折叠从不应用于标量。", "outputFormat": "输出一个整数——表达式结果对 $10^{9}$ 取模。", "hint": "时间限制：2 秒，内存限制：256 MB。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7089", "type": "P", "difficulty": 5, "samples": [["1 2 1 2\n", "2 4\n1 2\n1 3\n1 5\n2 4\n2 6\n3 4\n3 5\n4 6\n5 6\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "Special Judge", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Kids in a Friendly Class", "background": "", "description": "Kevin resembles his class in primary school. There were girls and boys in his class. Some of them were friends, some were not. But if one person considered another person a friend, the opposite was also true.\n\nInterestingly, every girl had exactly a friends among girls and exactly $b$ friends among boys, whereas every boy had exactly $c$ friends among girls and exactly $d$ friends among boys.\n\nKevin does not remember the size of his class. Help him reconstruct the class with minimal possible number of kids, such that the above conditions are satisfied.", "inputFormat": "The only line contains four integers $a , b , c$ , and $d (1 \\le a , b , c , d \\le 50)$ .\n", "outputFormat": "\nOutput an example of a class of minimal possible size satisfying the above conditions.\n\nThe first line should contains two positive integers: $m$ -- the number of girls, and $n$ -- the number of boys.\n\nLet's assign numbers $1$ through $m$ to the girls and $m + 1$ through $m + n$ to the boys.\n\nEach of the next lines should contain a pair of distinct integers describing a pair of friends by their numbers. Each pair of friends should appear exactly once in this list. ", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Kids in a Friendly Class", "background": "", "description": "Kevin resembles his class in primary school. There were girls and boys in his class. Some of them were friends, some were not. But if one person considered another person a friend, the opposite was also true.\n\nInterestingly, every girl had exactly a friends among girls and exactly $b$ friends among boys, whereas every boy had exactly $c$ friends among girls and exactly $d$ friends among boys.\n\nKevin does not remember the size of his class. Help him reconstruct the class with minimal possible number of kids, such that the above conditions are satisfied.", "inputFormat": "The only line contains four integers $a , b , c$ , and $d (1 \\le a , b , c , d \\le 50)$ .\n", "outputFormat": "\nOutput an example of a class of minimal possible size satisfying the above conditions.\n\nThe first line should contains two positive integers: $m$ -- the number of girls, and $n$ -- the number of boys.\n\nLet's assign numbers $1$ through $m$ to the girls and $m + 1$ through $m + n$ to the boys.\n\nEach of the next lines should contain a pair of distinct integers describing a pair of friends by their numbers. Each pair of friends should appear exactly once in this list. ", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Kids in a Friendly Class", "background": "", "description": "凯文的班级里有女生也有男生。他们中有些人是朋友，有些人不是。但是，如果A认为B是他的朋友，那么B也认为A是他的朋友。\n\n有趣的是，每个女生都有 a 个女性朋友和 b 个男性朋友，而每个男生都有 c 个女性朋友和 d 个男性朋友。\n\n凯文不记得自己班级的人数。请算出班级的人数，使得班级人数尽可能少，同时又能满足上面的条件。", "inputFormat": "只有一行，包括4个整数 a , b , c，d (1≤a,b,c,d≤50) .", "outputFormat": "输出一个班级人数，使得其数量尽可能小又满足上述条件。\n\n第一行应该包括两个正整数 m —— 女生人数 n —— 男生人数。\n\n用编号1 到 m 表示女生，编号 m+1 到m+n 表示男生。\n\n接下来的每一行，都应该包含一对不同的整数，来表示一对朋友，而且每对朋友只出现一次。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P7090", "type": "P", "difficulty": 6, "samples": [["6\n0 0 1 1 2 0 3 3 4 4 6 0\n5\n0 0 1 1 2 1 3 4 4 0\n", "21.824074074074074073\n"], ["3\n-1 0 0 1 2 0\n4\n0 0 1 1 2 2 3 0\n", "Invalid plan\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "Special Judge", "ICPC", "NWRRC"], "title": "[NWRRC 2013] Lonely Mountain", "background": "", "description": "\n\n\"This was made by Thror, your grandfather, Thorin\", he said in answer to the dwarves' excited questions. \"It is a plan of the Mountain. \"\n\n---\n\nJ. R. R. Tolkien. The Hobbit, or There and Back Again\n\nThe plan of the Lonely Mountain consists of two parallel projections of the mountain to two projection planes. Both planes are perpendicular to the ground and each other. Each projection has a mountain-like shape.\n\n![](https://www.acmicpc.net/upload/images2/lonely.png)\n\nSince Bilbo Baggins has never seen the mountain, he tries to imagine it. Is it really the Lonely Mountain or some ridges and other mountains surround it? In any case, it must be tremendous to hold the whole dwarves' kingdom!\n\nBilbo decided to estimate the maximum possible volume of the Lonely Mountain and nearby mountains (if any) based on the plan provided by Gandalf.\n\n", "inputFormat": "\n\nThe first line contains single integer number $n_{x}$ -- the number of points in the parallel projection of the mountain to the plane Oxz $(2 \\le n_{x} \\le 100 000)$ . The second line contains $n_{x}$ pairs of integer numbers $x_{i}, z_{i}$ -- the coordinates of the polygonal chain, representing the projection $(−10^{9} \\le x_{1} < x_{2} <$ x3 $< · · · < x_{n_{x}} \\le 10^{9}; 0 \\le z_{i} \\le 10^{9}; z_{1} = z_{n_{x}} = 0)$ .\n\nThe following two lines contain projection to the Oyz plane in the same format.\n\n", "outputFormat": "\n\nThe only line of the output file must contain a single number $V$ -- the maximum possible volume of the Lonely Mountain.\n\nThe absolute or relative precision of you answer should be at least $10^{−6}.$ E.g . if $V′is$ the actual maximum possible volume, the following must hold: $mi_n(|V−V′|,|V−V′|/V′) \\le 10^{−6}.$\n\nIf there are no mountains corresponding to the given projections, output a single line `Invalid plan`.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en", "translations": {"en": {"title": "[NWRRC 2013] Lonely Mountain", "background": "", "description": "\n\n\"This was made by Thror, your grandfather, Thorin\", he said in answer to the dwarves' excited questions. \"It is a plan of the Mountain. \"\n\n---\n\nJ. R. R. Tolkien. The Hobbit, or There and Back Again\n\nThe plan of the Lonely Mountain consists of two parallel projections of the mountain to two projection planes. Both planes are perpendicular to the ground and each other. Each projection has a mountain-like shape.\n\n![](https://www.acmicpc.net/upload/images2/lonely.png)\n\nSince Bilbo Baggins has never seen the mountain, he tries to imagine it. Is it really the Lonely Mountain or some ridges and other mountains surround it? In any case, it must be tremendous to hold the whole dwarves' kingdom!\n\nBilbo decided to estimate the maximum possible volume of the Lonely Mountain and nearby mountains (if any) based on the plan provided by Gandalf.\n\n", "inputFormat": "\n\nThe first line contains single integer number $n_{x}$ -- the number of points in the parallel projection of the mountain to the plane Oxz $(2 \\le n_{x} \\le 100 000)$ . The second line contains $n_{x}$ pairs of integer numbers $x_{i}, z_{i}$ -- the coordinates of the polygonal chain, representing the projection $(−10^{9} \\le x_{1} < x_{2} <$ x3 $< · · · < x_{n_{x}} \\le 10^{9}; 0 \\le z_{i} \\le 10^{9}; z_{1} = z_{n_{x}} = 0)$ .\n\nThe following two lines contain projection to the Oyz plane in the same format.\n\n", "outputFormat": "\n\nThe only line of the output file must contain a single number $V$ -- the maximum possible volume of the Lonely Mountain.\n\nThe absolute or relative precision of you answer should be at least $10^{−6}.$ E.g . if $V′is$ the actual maximum possible volume, the following must hold: $mi_n(|V−V′|,|V−V′|/V′) \\le 10^{−6}.$\n\nIf there are no mountains corresponding to the given projections, output a single line `Invalid plan`.\n\n", "hint": "Time limit: 2 s, Memory limit: 256 MB. \n\n", "locale": "en"}, "zh-CN": {"title": "[NWRRC 2013] Lonely Mountain", "background": "", "description": "给定一个几何体的正视图和侧视图，求其最大体积。", "inputFormat": "第一行一个整数 $n_x$ 表示正视图中点的数量。\n\n第二行按 $x_i$ 递增的顺序给出 $n_x$ 个点对 $(x_i,z_i)$ 描述其正视图，保证 $z_1=z_{n_x}=0$\n\n第三、四行同理，描述其侧视图。\n\n所有的输入都是整数。", "outputFormat": "若不存在一个合法方案，输出 ```Invalid plan```，否则输出最大体积。\n\n你的答案与正确答案的绝对误差不应超过 $10^{-6}$.", "hint": "", "locale": "zh-CN"}}}
{"pid": "P7091", "type": "P", "difficulty": 4, "samples": [["4 0", "20"], ["12 1\n4", "127"], ["192 1\n2", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "数上的树", "background": "**本题自动开启 O2 优化，时间限制 2s。**", "description": "您需要构造一棵二叉树，根节点权值为 $n$，每个节点都有 $2$ 个或 $0$ 个儿子，且满足如下限制：\n\n若该点有两个儿子，该点权值需等于两个儿子的权值之积。\n\n若该点没有儿子，则该节点权值需为质数。\n\n同时会给出 $m$ 条限制 $a_i$，表示树上的权值不能出现 $a_i$。\n\n您构造的二叉树需要使：令 $k$ 为节点数， $\\sum\\limits_{i=1}^k\\sum\\limits_{j=i}^kval_{lca(i,j)}$ 最小，其中 $val_i$ 表示第 $i$ 个点的权值，$lca(i,j)$ 表示 $i,j$ 的最近公共祖先。", "inputFormat": "第一行两个正整数 $n,m$。\n\n之后一行 $m$ 个数 $a_i$。", "outputFormat": "一行一个数，表示最小的 $\\sum\\limits_{i=1}^k\\sum\\limits_{j=i}^kval_{lca(i,j)}$。\n\n无解输出 `-1`。", "hint": "样例解释：\n\n样例 $1$：最优方案如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2dcec565.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n其中，黑色数字代表权值，红色数字代表标号（您不需要对树标号，这里的标号只是为了更方便解释样例）。\n\n$ans=val_{lca(1,1)}+val_{lca(1,2)}+val_{lca(1,3)}+val_{lca(2,2)}+val_{lca(2,3)}+val_{lca(3,3)}$\n\n$~~~~~~~~=val_1+val_1+val_1+val_2+val_1+val_3$\n\n$~~~~~~~~=4+4+4+2+4+2=20$\n\nSubtask 1（5 分）： $n\\leq 20$。\n\nSubtask 2（12 分）：$n\\leq 10^6$。\n\nSubtask 3（28 分）：$n\\leq 10^{12}$。\n\nSubtask 4（20 分）：$m=0$。\n\nSubtask 5（35 分）：$n\\leq 10^{15}$。\n\n对于所有数据 $2\\leq n\\leq 10^{15}$，$0\\leq m\\leq \\min(n,10^5)$，$2\\leq a_i\\leq n$， 且答案不超过 $4\\times 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "数上的树", "background": "**本题自动开启 O2 优化，时间限制 2s。**", "description": "您需要构造一棵二叉树，根节点权值为 $n$，每个节点都有 $2$ 个或 $0$ 个儿子，且满足如下限制：\n\n若该点有两个儿子，该点权值需等于两个儿子的权值之积。\n\n若该点没有儿子，则该节点权值需为质数。\n\n同时会给出 $m$ 条限制 $a_i$，表示树上的权值不能出现 $a_i$。\n\n您构造的二叉树需要使：令 $k$ 为节点数， $\\sum\\limits_{i=1}^k\\sum\\limits_{j=i}^kval_{lca(i,j)}$ 最小，其中 $val_i$ 表示第 $i$ 个点的权值，$lca(i,j)$ 表示 $i,j$ 的最近公共祖先。", "inputFormat": "第一行两个正整数 $n,m$。\n\n之后一行 $m$ 个数 $a_i$。", "outputFormat": "一行一个数，表示最小的 $\\sum\\limits_{i=1}^k\\sum\\limits_{j=i}^kval_{lca(i,j)}$。\n\n无解输出 `-1`。", "hint": "样例解释：\n\n样例 $1$：最优方案如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2dcec565.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n其中，黑色数字代表权值，红色数字代表标号（您不需要对树标号，这里的标号只是为了更方便解释样例）。\n\n$ans=val_{lca(1,1)}+val_{lca(1,2)}+val_{lca(1,3)}+val_{lca(2,2)}+val_{lca(2,3)}+val_{lca(3,3)}$\n\n$~~~~~~~~=val_1+val_1+val_1+val_2+val_1+val_3$\n\n$~~~~~~~~=4+4+4+2+4+2=20$\n\nSubtask 1（5 分）： $n\\leq 20$。\n\nSubtask 2（12 分）：$n\\leq 10^6$。\n\nSubtask 3（28 分）：$n\\leq 10^{12}$。\n\nSubtask 4（20 分）：$m=0$。\n\nSubtask 5（35 分）：$n\\leq 10^{15}$。\n\n对于所有数据 $2\\leq n\\leq 10^{15}$，$0\\leq m\\leq \\min(n,10^5)$，$2\\leq a_i\\leq n$， 且答案不超过 $4\\times 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P7092", "type": "P", "difficulty": 6, "samples": [["2 2", "998244352"], ["114514 2", "662314206"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "计数题", "background": "", "description": "您有一个无限大的集合，其中有所有小于等于 $n$ 的质数和其中它们的乘积。\n\n如 $n=5$，集合中实际包含的数为 $2,3,5$（质数），$4,6,8,9,10,12.....$（质数之积），假设这个集合为 $T$。\n\n\n求：\n\n$\\sum\\limits_{S\\subset T,S\\neq\\varnothing}\\mu(\\prod\\limits_{i\\in S}i)\\varphi(\\prod\\limits_{i\\in S}i)$\n\n对 $998244353$ 取模。可以证明这个和是存在的。\n\n为了您能更好的获得部分分，我们会给定一个 $k$，表示一些限制，**$k$ 的值可能影响答案！请认真阅读提示说明**。\n\n$n\\leq 10^6$", "inputFormat": "一行两个整数 $n,k$。", "outputFormat": "一行一个整数，表示答案，对 $998244353$ 取模。", "hint": "$k$ 的限制如下：\n\n$k=0:$ 选出的集合 $S$ 中至少含有一个完全平方数。\n\n$k=1:$ 选出的集合 $S$ 中只能含有质数。\n\n$k=2:$ 无任何限制。\n\n| 测试点编号 |$n$  |$k$  |\n| :----------: | :----------: | :----------: |\n| $1\\sim 2$ |$\\leq 5$  |$2$  |\n| $3\\sim 5$ |$\\leq 20$  |$2$  |\n| $6\\sim 11$ |$\\leq 5000$  |$2$  |\n| $12$ |$\\leq 10^6$  |$0$  |\n| $13\\sim 14$ |$\\leq 10^6$  |$1$  |\n| $15\\sim 16$ |$\\leq 10^5$  |$2$  |\n| $17\\sim 20$ |$\\leq 10^6$  |$2$  |\n\n样例 $1$ 解释：\n\n答案为 $\\mu(2)\\varphi(2)=-1\\times 1=-1$，对 $998244353$ 取模为 $998244352$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "计数题", "background": "", "description": "您有一个无限大的集合，其中有所有小于等于 $n$ 的质数和其中它们的乘积。\n\n如 $n=5$，集合中实际包含的数为 $2,3,5$（质数），$4,6,8,9,10,12.....$（质数之积），假设这个集合为 $T$。\n\n\n求：\n\n$\\sum\\limits_{S\\subset T,S\\neq\\varnothing}\\mu(\\prod\\limits_{i\\in S}i)\\varphi(\\prod\\limits_{i\\in S}i)$\n\n对 $998244353$ 取模。可以证明这个和是存在的。\n\n为了您能更好的获得部分分，我们会给定一个 $k$，表示一些限制，**$k$ 的值可能影响答案！请认真阅读提示说明**。\n\n$n\\leq 10^6$", "inputFormat": "一行两个整数 $n,k$。", "outputFormat": "一行一个整数，表示答案，对 $998244353$ 取模。", "hint": "$k$ 的限制如下：\n\n$k=0:$ 选出的集合 $S$ 中至少含有一个完全平方数。\n\n$k=1:$ 选出的集合 $S$ 中只能含有质数。\n\n$k=2:$ 无任何限制。\n\n| 测试点编号 |$n$  |$k$  |\n| :----------: | :----------: | :----------: |\n| $1\\sim 2$ |$\\leq 5$  |$2$  |\n| $3\\sim 5$ |$\\leq 20$  |$2$  |\n| $6\\sim 11$ |$\\leq 5000$  |$2$  |\n| $12$ |$\\leq 10^6$  |$0$  |\n| $13\\sim 14$ |$\\leq 10^6$  |$1$  |\n| $15\\sim 16$ |$\\leq 10^5$  |$2$  |\n| $17\\sim 20$ |$\\leq 10^6$  |$2$  |\n\n样例 $1$ 解释：\n\n答案为 $\\mu(2)\\varphi(2)=-1\\times 1=-1$，对 $998244353$ 取模为 $998244352$。", "locale": "zh-CN"}}}
{"pid": "P7093", "type": "P", "difficulty": 6, "samples": [["3\n9\n2 8 4 1 1 4 4 4 4\n5\n2 16 4 8 2\n3\n2 2 2", "rrrlllrrr\nno\nno"]], "limits": {"time": [1000], "memory": [131072]}, "tags": ["2014", "Special Judge", "ICPC", "CERC"], "title": "[CERC2014] Can't stop playing", "background": "", "description": "Some computer games are extremely fun and this problem may be about one of these.\n\nYou are given a sequence of one dimensional blocks, each of length that is a power of two.\nThe goal of the game is to merge all the blocks into one big block. The blocks are presented\none by one, and for each one you have to decide whether to stick it immediately to the left or\nimmediately to the right of the previous blocks.\n\nEvery time two blocks of the same size are adjacent, they merge into one block that is twice\nas long as each of them. Note that, as long as possible, the resulting blocks immediately merge\nwith adjacent ones. For example, if the current sequence of blocks is $2, 4, 16$, then sticking $2$ on\nthe left side leads to $8, 16$, while sticking it on the right side gives $2, 4, 16, 2$. Note that at any\nmoment there is at most one mergeable pair of blocks.\n\nYou have lost the game (again!) and you are wondering whether there was any way to win at all. Analyze the sequence to find out.", "inputFormat": "The first line of input contains the number of test cases $T$. The descriptions of the test cases follow:\n\nEach test case consists of two lines. The first one contains a positive integer $n \\leq 1 000$ – the\nlength of the sequence. The next line contains a sequence of $n$ block lengths, each a power of two. The sum of all the lengths does not exceed $2^{13}$.", "outputFormat": "For each test case, output one line containing the word $\\texttt{no}$ if winning the game is not possible. Otherwise, output a word consisting of $n$ letters $\\texttt{l}$ and $\\texttt{r}$, denoting whether the corresponding block should be stuck to the left or to the right. Note that for the first block it does not matter.", "hint": "", "locale": "en", "translations": {"en": {"title": "[CERC2014] Can't stop playing", "background": "", "description": "Some computer games are extremely fun and this problem may be about one of these.\n\nYou are given a sequence of one dimensional blocks, each of length that is a power of two.\nThe goal of the game is to merge all the blocks into one big block. The blocks are presented\none by one, and for each one you have to decide whether to stick it immediately to the left or\nimmediately to the right of the previous blocks.\n\nEvery time two blocks of the same size are adjacent, they merge into one block that is twice\nas long as each of them. Note that, as long as possible, the resulting blocks immediately merge\nwith adjacent ones. For example, if the current sequence of blocks is $2, 4, 16$, then sticking $2$ on\nthe left side leads to $8, 16$, while sticking it on the right side gives $2, 4, 16, 2$. Note that at any\nmoment there is at most one mergeable pair of blocks.\n\nYou have lost the game (again!) and you are wondering whether there was any way to win at all. Analyze the sequence to find out.", "inputFormat": "The first line of input contains the number of test cases $T$. The descriptions of the test cases follow:\n\nEach test case consists of two lines. The first one contains a positive integer $n \\leq 1 000$ – the\nlength of the sequence. The next line contains a sequence of $n$ block lengths, each a power of two. The sum of all the lengths does not exceed $2^{13}$.", "outputFormat": "For each test case, output one line containing the word $\\texttt{no}$ if winning the game is not possible. Otherwise, output a word consisting of $n$ letters $\\texttt{l}$ and $\\texttt{r}$, denoting whether the corresponding block should be stuck to the left or to the right. Note that for the first block it does not matter.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[CERC2014] Can't stop playing", "background": null, "description": "有些计算机游戏非常有趣，这个问题可能就是关于其中之一。你得到了一系列一维的方块，每个方块的长度都是 2 的幂。游戏的目标是将所有方块合并成一个大方块。方块一个接一个地呈现，对于每一个方块，你必须决定是立即粘在最左边的方块的左边还是最右边的方块的右边。\n\n每当两个相同大小的方块相邻时，它们会合并成一个长度是它们各自两倍的方块。注意，只要可能，生成的方块会立即与相邻的方块合并。例如，如果当前的方块序列是 $2, 4, 16$，那么将 $2$ 粘在左边会导致 $8, 16$，而粘在右边则会得到 $2, 4, 16, 2$。注意，在任何时刻最多只有一对可合并的方块。\n\n你又一次输了游戏，并且想知道是否有任何方法可以赢。分析序列以找出答案。", "inputFormat": "输入的第一行包含测试用例的数量 $T$。接下来的描述是测试用例的内容：\n\n每个测试用例由两行组成。第一行包含一个正整数 $n \\leq 1 000$ —— 序列的长度。下一行包含 $n$ 个方块长度的序列，每个长度都是 2 的幂。所有长度的总和不超过 $2^{13}$。", "outputFormat": "对于每个测试用例，输出一行，包含单词 $\\texttt{no}$，如果赢得游戏是不可能的。否则，输出一个由 $n$ 个字母 $\\texttt{l}$ 和 $\\texttt{r}$ 组成的单词，表示相应的方块应该粘在左边还是右边。注意，对于第一个方块，这无关紧要。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P7094", "type": "P", "difficulty": 3, "samples": [["1\n1 1 3 2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2020", "O2优化", "枚举"], "title": "[yLOI2020] 金陵谣", "background": "> 水几绕，山几重，何处金陵城。   \n> 访名都，寻形胜，龙虎倚江东。   \n> 书留翰墨，曲落潮声。   \n> 草木几度枯荣。\n\n——银临《金陵谣》", "description": "江苏南京，亦称金陵，是一座历史文化名城。有了古城的衬托，江苏省的高考模拟题都显地那么棘手，难以解决。切切在一轮复习过程中便碰到一道江苏省模拟题，在七瑾的帮助下，切切很快秒杀了该题，但切切觉得不够，想用这道题来刁难你。解决本题就能吃到切切和七瑾撒的糖。\n\n给定四个正整数 $a, b, c, d$，求有多少对正整数 $(x, y)$ 满足\n\n$$\\frac a x + \\frac b c = \\frac d y$$", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n第一行是一个整数，表示数据组数 $T$。\n\n接下来 $T$ 行，每行四个整数，依次表示一组数据的 $a, b, c, d$。", "outputFormat": "对于每组数据，输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n求 $\\frac 1 x + \\frac 1 3 = \\frac 2 y$ 的正整数解对数，分别是 $(x = 3, y = 3)$，$(x = 6, y = 4)$，$(x = 15, y = 5)$。\n\n### 数据规模与约定\n\n本题共有 20 个测试点，每个测试点 $5$ 分。\n\n- 对于测试点 $1$，保证 $T = 0$。\n- 对于测试点 $2 \\sim 16$，共 $15$ 个测试点，对于 $a, b, c, d$ 四个数中至少存在一个数为 $1$ 共有 $15$ 种情况，每个测试点对应一种情况。\n- 对于测试点 $17 \\sim 20$，没有特殊约定。\n\n对于全部的测试点，保证 $0 \\leq T \\leq 20$，$1 \\leq a, b, c, d \\leq 10^6$，$d \\times c \\leq 10^6$。\n\n### 提示\n\n+ 众所周知，高考不考数论。\n+ 本题共有两个样例文件，见附加中的 song.zip。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 金陵谣", "background": "> 水几绕，山几重，何处金陵城。   \n> 访名都，寻形胜，龙虎倚江东。   \n> 书留翰墨，曲落潮声。   \n> 草木几度枯荣。\n\n——银临《金陵谣》", "description": "江苏南京，亦称金陵，是一座历史文化名城。有了古城的衬托，江苏省的高考模拟题都显地那么棘手，难以解决。切切在一轮复习过程中便碰到一道江苏省模拟题，在七瑾的帮助下，切切很快秒杀了该题，但切切觉得不够，想用这道题来刁难你。解决本题就能吃到切切和七瑾撒的糖。\n\n给定四个正整数 $a, b, c, d$，求有多少对正整数 $(x, y)$ 满足\n\n$$\\frac a x + \\frac b c = \\frac d y$$", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n第一行是一个整数，表示数据组数 $T$。\n\n接下来 $T$ 行，每行四个整数，依次表示一组数据的 $a, b, c, d$。", "outputFormat": "对于每组数据，输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n求 $\\frac 1 x + \\frac 1 3 = \\frac 2 y$ 的正整数解对数，分别是 $(x = 3, y = 3)$，$(x = 6, y = 4)$，$(x = 15, y = 5)$。\n\n### 数据规模与约定\n\n本题共有 20 个测试点，每个测试点 $5$ 分。\n\n- 对于测试点 $1$，保证 $T = 0$。\n- 对于测试点 $2 \\sim 16$，共 $15$ 个测试点，对于 $a, b, c, d$ 四个数中至少存在一个数为 $1$ 共有 $15$ 种情况，每个测试点对应一种情况。\n- 对于测试点 $17 \\sim 20$，没有特殊约定。\n\n对于全部的测试点，保证 $0 \\leq T \\leq 20$，$1 \\leq a, b, c, d \\leq 10^6$，$d \\times c \\leq 10^6$。\n\n### 提示\n\n+ 众所周知，高考不考数论。\n+ 本题共有两个样例文件，见附加中的 song.zip。", "locale": "zh-CN"}}}
{"pid": "P7095", "type": "P", "difficulty": 4, "samples": [["0\n2\n1 5 0 2\n1 2 3 4", "1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2020", "二分", "堆", "单调队列", "O2优化"], "title": "[yLOI2020] 不离", "background": "> 乱玄黄时序，探风林实虚。  \n> 我要你共我奇谈怪趣。  \n> 任日月斑斓，待春秋兴残。  \n> 我要我们有聚无散。  \n\n——银临《不离》", "description": "这道题目来自 zxy 哔哔，咕咕让哔哔选一首歌作为题目名，但是哔哔说没有想好，于是咕咕就帮他选了这首歌。\n\n哔哔在玩一款叫做《暗黑破坏神》的游戏，某天哔哔灵光乍现，以游戏为背景出了一道神仙题并告诉了咕咕。咕咕并不会做，于是对题目进行了一定的简化。因此，经过简化后，这道题已经和《暗黑破坏神》没什么关系了。\n\n游戏中人物有两个属性，我们分别称之为「力量」和「精神」，同时哔哔有 $n$ 件装备，穿戴第 $i$ 件装备需要人物在穿戴前的力量值不低于 $a_i$，精神值不低于 $b_i$。在穿戴第 $i$ 件装备后，人物的力量值会增加 $c_i$，精神值会增加 $d_i$。\n\n哔哔可以自由选择穿装备的顺序，只要满足力量和精神不低于对应值，就可以穿戴该装备。\n\n现在，咕咕想知道，如果想让哔哔穿戴上所有的装备，那么人物的初始力量值（即没有穿任何装备之前的力量值）最小应该是多少？在初始力量值最小的前提下，初始精神值（即没有穿任何装备之前的精神值）最小应该是多少？\n\n显然，初始力量和初始精神都应该是非负整数。", "inputFormat": "第一行有一个整数，表示该测试点所在的子任务编号 $T$。  \n第二行有一个整数，表示哔哔的装备件数 $n$。  \n第 $3$ 到第 $(n+2)$ 行，每行四个整数，第 $(i+2)$ 行的整数依次表示 $a_i,b_i,c_i,d_i$。", "outputFormat": "输出一行两个用空格隔开的整数，分别表示最小的初始力量值以及在初始力量值最小的前提下最小的初始精神值。", "hint": "### 样例 1 解释\n\n当初始力量值为 $1$，精神值为 $2$ 时，可以穿戴第 $2$ 件装备。在穿戴该装备后，增加 $3$ 点力量和 $4$ 点精神，人物的属性变为 $4$ 点力量和 $6$ 点精神，此时可以穿戴第 $1$ 件装备。\n\n### 数据规模与约定\n\n**本题采用多测试点捆绑测试**。\n\n- 子任务 $1$（$5$ 分）：保证 $n=0$。\n- 子任务 $2$（$5$ 分）：保证 $n=1$。\n- 子任务 $3$（$20$ 分）：保证 $a_i,b_i \\le 100$，$n \\le 6$。\n- 子任务 $4$（$10$ 分）：保证 $a_i,b_i \\le 10^5$，$n \\le 6$。\n- 子任务 $5$（$10$ 分）：保证 $a_i,b_i \\le 10$。\n- 子任务 $6$（$10$ 分）：保证 $a_i,b_i \\le 100$。\n- 子任务 $7$（$10$ 分）：保证 $b_i=0$，$n \\le 6$。\n- 子任务 $8$（$10$ 分）：保证 $b_i=0$。\n- 子任务 $9$（$10$ 分）：保证 $n \\le 6$。\n- 子任务 $10$（$10$ 分）：无特殊约定。\n\n对于全部的测试点，保证 $0 \\le n \\le 10^5$，$0 \\le a_i,b_i,c_i,d_i \\le 10^9$。\n\n### 提示\n有 $4$ 个样例文件，请见附加文件中的 forever.zip。\n\n对于第三个样例，满足 $b_i = 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 不离", "background": "> 乱玄黄时序，探风林实虚。  \n> 我要你共我奇谈怪趣。  \n> 任日月斑斓，待春秋兴残。  \n> 我要我们有聚无散。  \n\n——银临《不离》", "description": "这道题目来自 zxy 哔哔，咕咕让哔哔选一首歌作为题目名，但是哔哔说没有想好，于是咕咕就帮他选了这首歌。\n\n哔哔在玩一款叫做《暗黑破坏神》的游戏，某天哔哔灵光乍现，以游戏为背景出了一道神仙题并告诉了咕咕。咕咕并不会做，于是对题目进行了一定的简化。因此，经过简化后，这道题已经和《暗黑破坏神》没什么关系了。\n\n游戏中人物有两个属性，我们分别称之为「力量」和「精神」，同时哔哔有 $n$ 件装备，穿戴第 $i$ 件装备需要人物在穿戴前的力量值不低于 $a_i$，精神值不低于 $b_i$。在穿戴第 $i$ 件装备后，人物的力量值会增加 $c_i$，精神值会增加 $d_i$。\n\n哔哔可以自由选择穿装备的顺序，只要满足力量和精神不低于对应值，就可以穿戴该装备。\n\n现在，咕咕想知道，如果想让哔哔穿戴上所有的装备，那么人物的初始力量值（即没有穿任何装备之前的力量值）最小应该是多少？在初始力量值最小的前提下，初始精神值（即没有穿任何装备之前的精神值）最小应该是多少？\n\n显然，初始力量和初始精神都应该是非负整数。", "inputFormat": "第一行有一个整数，表示该测试点所在的子任务编号 $T$。  \n第二行有一个整数，表示哔哔的装备件数 $n$。  \n第 $3$ 到第 $(n+2)$ 行，每行四个整数，第 $(i+2)$ 行的整数依次表示 $a_i,b_i,c_i,d_i$。", "outputFormat": "输出一行两个用空格隔开的整数，分别表示最小的初始力量值以及在初始力量值最小的前提下最小的初始精神值。", "hint": "### 样例 1 解释\n\n当初始力量值为 $1$，精神值为 $2$ 时，可以穿戴第 $2$ 件装备。在穿戴该装备后，增加 $3$ 点力量和 $4$ 点精神，人物的属性变为 $4$ 点力量和 $6$ 点精神，此时可以穿戴第 $1$ 件装备。\n\n### 数据规模与约定\n\n**本题采用多测试点捆绑测试**。\n\n- 子任务 $1$（$5$ 分）：保证 $n=0$。\n- 子任务 $2$（$5$ 分）：保证 $n=1$。\n- 子任务 $3$（$20$ 分）：保证 $a_i,b_i \\le 100$，$n \\le 6$。\n- 子任务 $4$（$10$ 分）：保证 $a_i,b_i \\le 10^5$，$n \\le 6$。\n- 子任务 $5$（$10$ 分）：保证 $a_i,b_i \\le 10$。\n- 子任务 $6$（$10$ 分）：保证 $a_i,b_i \\le 100$。\n- 子任务 $7$（$10$ 分）：保证 $b_i=0$，$n \\le 6$。\n- 子任务 $8$（$10$ 分）：保证 $b_i=0$。\n- 子任务 $9$（$10$ 分）：保证 $n \\le 6$。\n- 子任务 $10$（$10$ 分）：无特殊约定。\n\n对于全部的测试点，保证 $0 \\le n \\le 10^5$，$0 \\le a_i,b_i,c_i,d_i \\le 10^9$。\n\n### 提示\n有 $4$ 个样例文件，请见附加文件中的 forever.zip。\n\n对于第三个样例，满足 $b_i = 0$。", "locale": "zh-CN"}}}
{"pid": "P7096", "type": "P", "difficulty": 4, "samples": [["5 3\n1 2 3 4 5\n1 3\n2 3\n3 3", "3\n3\n3\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2020", "O2优化", "位运算"], "title": "[yLOI2020] 泸沽寻梦", "background": "> 我应是泸沽烟水里的过客，  \n> 孑然弹铗，划天地开阖。  \n> 邂逅过的，梦醒之余，  \n> 却忘了该如何洒脱。 \n\n——银临《泸沽寻梦》", "description": "> 南有仙地，名曰摩梭，摩梭有湖，泸沽是也。\n\n茶茶在泸沽湖中寻找自己的梦。氤氲雾气中，茶茶的 $n$ 个梦排成了一个序列。茶茶的所有梦境都是拉瓦的样子。为了区分这些拉瓦，茶茶规定从左到右第 $i$ 个的拉瓦的美颜值是一个非负整数 $a_i$。面对着这些梦，茶茶会进行 $m$ 次操作，每次操作会给定两个数字 $p,x$，然后将 $a_p$ 和 $a_{p+1}$ 都对 $x$ 做按位异或。每次操作完之后，茶茶都想知道，当前的梦序列中，有多少个子区间 $[l,r]$，满足 $l \\le r$ 且区间的异或和为 $0$，请你回答茶茶的问题。\n\n区间 $[l,r]$ 的异或和定义为 $a_l \\otimes a_{l + 1} \\otimes \\dots a_{r - 1} \\otimes a_r$。其中 $\\otimes$ 代表二进制按位异或运算，即 C++ 语言的「^」运算符。两个区间不同当且仅当两区间左端点不同或两区间右端点不同或两区间左右端点均不同。\n\n为了避免输出过大，你只需要输出四个整数，分别表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "inputFormat": "第一行有两个整数，分别表示梦境的数量 $n$ 和操作的次数 $m$。  \n第二行有 $n$ 个用空格隔开的整数，第 $i$ 个整数表示第 $i$ 个拉瓦的美颜值 $a_i$。  \n接下来 $m$ 行，每行两个整数，依次表示一次操作的 $p$ 和 $x$。", "outputFormat": "输出四行，每行一个整数，依次表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "hint": "### 样例 1 解释\n\n- 第一次操作后，序列变为 ${2,1,3,4,5}$，有且仅有区间 $[1,3]$ 的异或和为 $0$，故本次询问的答案为 $1$。\n- 第二次操作后，序列变为 ${2,2,0,4,5}$，区间 $[1,2]$、$[1,3]$、$[3,3]$ 的异或和为 $0$，故本次询问的答案为 $3$。\n- 第三次操作后，序列变为 ${2,2,3,7,5}$，有且仅有区间 $[1,2]$ 的异或和为 $0$，故本次询问的答案为 $1$。所有答案的异或和为 $3$，有 $3$ 次回答的答案为奇数，所有答案中的最大值为 $3$，最小值为 $1$。\n\n### 数据规模与约定\n\n**本题采用多测试点捆绑测试**，共有 5 个子任务。\n\n- 子任务 $1$（$10$ 分）：保证 $n,m \\le 100$。\n- 子任务 $2$（$10$ 分）：保证 $n,m \\le 300$。\n- 子任务 $3$（$20$ 分）：保证 $n,m \\le 3000$。\n- 子任务 $4$（$30$ 分）：保证 $n,m \\le 10^5$。\n- 子任务 $5$（$30$ 分）：无特殊限制。\n\n对于前四个子任务，保证 $a_i,x \\le n$；  \n对于全部的测试点，保证 $1 \\le n,m \\le 10^6$，$0 \\le a_i,x \\le 10^9$，$1 \\le p<n$。\n\n### 提示\n\n- 请注意，$a_i,x \\leq Y$ 不能说明 $a_i \\otimes x \\leq Y$。\n-  请注意大量数据读入对程序效率造成的影响。\n- 本题的特殊输出方式只是为了避免输出过大造成程序超时，与本题解法无关。\n- 请注意常数因子对程序效率造成的影响。\n- 本题共有两个样例文件，请见附加文件中的 dream.zip。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 泸沽寻梦", "background": "> 我应是泸沽烟水里的过客，  \n> 孑然弹铗，划天地开阖。  \n> 邂逅过的，梦醒之余，  \n> 却忘了该如何洒脱。 \n\n——银临《泸沽寻梦》", "description": "> 南有仙地，名曰摩梭，摩梭有湖，泸沽是也。\n\n茶茶在泸沽湖中寻找自己的梦。氤氲雾气中，茶茶的 $n$ 个梦排成了一个序列。茶茶的所有梦境都是拉瓦的样子。为了区分这些拉瓦，茶茶规定从左到右第 $i$ 个的拉瓦的美颜值是一个非负整数 $a_i$。面对着这些梦，茶茶会进行 $m$ 次操作，每次操作会给定两个数字 $p,x$，然后将 $a_p$ 和 $a_{p+1}$ 都对 $x$ 做按位异或。每次操作完之后，茶茶都想知道，当前的梦序列中，有多少个子区间 $[l,r]$，满足 $l \\le r$ 且区间的异或和为 $0$，请你回答茶茶的问题。\n\n区间 $[l,r]$ 的异或和定义为 $a_l \\otimes a_{l + 1} \\otimes \\dots a_{r - 1} \\otimes a_r$。其中 $\\otimes$ 代表二进制按位异或运算，即 C++ 语言的「^」运算符。两个区间不同当且仅当两区间左端点不同或两区间右端点不同或两区间左右端点均不同。\n\n为了避免输出过大，你只需要输出四个整数，分别表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "inputFormat": "第一行有两个整数，分别表示梦境的数量 $n$ 和操作的次数 $m$。  \n第二行有 $n$ 个用空格隔开的整数，第 $i$ 个整数表示第 $i$ 个拉瓦的美颜值 $a_i$。  \n接下来 $m$ 行，每行两个整数，依次表示一次操作的 $p$ 和 $x$。", "outputFormat": "输出四行，每行一个整数，依次表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "hint": "### 样例 1 解释\n\n- 第一次操作后，序列变为 ${2,1,3,4,5}$，有且仅有区间 $[1,3]$ 的异或和为 $0$，故本次询问的答案为 $1$。\n- 第二次操作后，序列变为 ${2,2,0,4,5}$，区间 $[1,2]$、$[1,3]$、$[3,3]$ 的异或和为 $0$，故本次询问的答案为 $3$。\n- 第三次操作后，序列变为 ${2,2,3,7,5}$，有且仅有区间 $[1,2]$ 的异或和为 $0$，故本次询问的答案为 $1$。所有答案的异或和为 $3$，有 $3$ 次回答的答案为奇数，所有答案中的最大值为 $3$，最小值为 $1$。\n\n### 数据规模与约定\n\n**本题采用多测试点捆绑测试**，共有 5 个子任务。\n\n- 子任务 $1$（$10$ 分）：保证 $n,m \\le 100$。\n- 子任务 $2$（$10$ 分）：保证 $n,m \\le 300$。\n- 子任务 $3$（$20$ 分）：保证 $n,m \\le 3000$。\n- 子任务 $4$（$30$ 分）：保证 $n,m \\le 10^5$。\n- 子任务 $5$（$30$ 分）：无特殊限制。\n\n对于前四个子任务，保证 $a_i,x \\le n$；  \n对于全部的测试点，保证 $1 \\le n,m \\le 10^6$，$0 \\le a_i,x \\le 10^9$，$1 \\le p<n$。\n\n### 提示\n\n- 请注意，$a_i,x \\leq Y$ 不能说明 $a_i \\otimes x \\leq Y$。\n-  请注意大量数据读入对程序效率造成的影响。\n- 本题的特殊输出方式只是为了避免输出过大造成程序超时，与本题解法无关。\n- 请注意常数因子对程序效率造成的影响。\n- 本题共有两个样例文件，请见附加文件中的 dream.zip。", "locale": "zh-CN"}}}
{"pid": "P7097", "type": "P", "difficulty": 6, "samples": [["0\n3 2 1\n50 1\n20 100\n100000 200000 2 3", "-52"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "博弈论", "2020", "O2优化", "背包 DP"], "title": "[yLOI2020] 牵丝戏", "background": "> 风雪依稀秋白发尾， 灯火葳蕤，揉皱你眼眉。  \n> 假如你舍一滴泪，假如老去我能陪。  \n> 烟波里成灰，也去得完美。 \n\n——银临 & Aki阿杰《牵丝戏》", "description": "扶苏和扶咕咕最近在玩一款叫做「ddt」的游戏，因为玩「ddt」时一直在循环《牵丝戏》，所以想到牵丝戏就想到了这个游戏。\n\n为了简化问题，我们认为这是一款一对一回合制游戏。双方玩家各有一个属性，被称为 delay 值，简称 $d$ 值。$d$ 值会根据回合中玩家使用的道具类型和数量来进行相应的增加。我们定义玩家 $x$ 的回合为玩家 $x$ 从发动攻击到结束的整个过程。**在玩家 $x$ 的回合中，只有玩家 $x$ 可以使用道具和发动攻击，并且玩家 $x$ 一定会发动攻击**。当一个玩家的回合结束以后，下一回合将是两个玩家中 $d$ 值**较小**的玩家的回合。当两个玩家的 $d$ 值相同时，因为扶苏氪金很多，下一回合一定是**扶苏的回合**。\n\n这款游戏共有 $m$ 种道具，第 $i$ 种道具会将本回合的伤害增加**不计算其他道具的原始伤害**的 $\\frac{k_i}{10^5}$ 倍，同时会增加 $p_i$ 点 $d$ 值。每回合**每种道具只能使用一次，本回合的道具不会对下回合产生伤害增益效果**。同时，每回合结束以后，发动攻击的玩家一定会增加 $w$ 点 $d$ 值。\n\n而使用道具是受到双方 $d$ 值差限制的。具体的，任何回合所使用的道具应该满足本回合结束以后双方 $d$ 值（包括发动攻击的玩家一定增加的 $w$ 点 $d$ 值）之差的绝对值**不超过** $100$。一个显然的事实是，只要保证了 $w \\le 100$，玩家就一定存在一种选择道具的方法（包括不选择），来满足这个限制。\n\n例如，在扶咕咕的回合中，若她的原始伤害 $t=10^5$，初始时 $d$ 值 $d_0=3$，规定 $w=2$，她使用了两个道具，$k_1=114$，$k_2=514$，$p_1=19$，$p_2=81$，那么本回合她造成的伤害为 \n\n$$t + t \\times k_1 + t \\times k_2 = 10^5 + 114 + 514 =  100628$$\n\n她回合结束后的 $d$ 值为\n\n$$d_0 + w + p_1 + p_2 = 3 + 2 + 19 + 81 = 105$$\n\n而假如下回合还是她的回合，并且她没有使用道具，那么她下回合造成的伤害为 \n\n$$t =  100000$$\n\n她下回合结束后的 $d$ 值为 \n\n$$105 + w = 105 + 2 = 107$$\n\n现在扶苏和扶咕咕正在对战。给定游戏的道具列表，和他们的原始伤害、 $d$ 值。游戏一共会进行 $n$ 回合，不妨认为无论造成多大的伤害，双方都不会死亡。请你最大化「扶苏对扶咕咕造成的伤害 - 扶咕咕对扶苏造成的伤害」这个差的值。\n\n当然，扶咕咕也会尽可能最大化「她对扶苏造成伤害 - 扶苏对她造成伤害」的值。不妨认为扶苏是 yLOI 世界中最聪明的男孩子，扶咕咕是 yLOI 世界中最聪明的女孩子，也就是**他们都会选择最优的策略来使用道具而不会出错**，题目所求即为在这种情况下伤害差的最大值。", "inputFormat": "第一行有一个整数，表示该测试点所在的子任务编号 $T$。   \n第二行有三个整数，分别表示游戏的回合数 $n$，游戏的装备数 $m$ 以及每回合固定增加的 $d$ 值 $w$。   \n第三行有 $m$ 个整数，第 $i$ 个整数表示 $k_i$。   \n第四行有 $m$ 个整数，第 $i$ 个整数表示 $p_i$。   \n第五行有四个整数，依次表示扶苏的初始伤害 $x_a$，扶咕咕的初始伤害 $x_b$，扶苏的初始 $d$ 值 $d_a$，扶咕咕的初始 $d$ 值 $d_b$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n- 第一回合开始前，扶苏 $d$ 值为 $2$，扶咕咕 $d$ 值为 $3$，第一回合由扶苏出手。扶苏不使用道具，伤害为 $100000$，$d$ 值增加 $1$，总伤害差为 $100000$。\n- 第一回合结束后，双方 $d$ 值均为 $3$，第二回合由扶苏出手。扶苏使用第一个道具，伤害为 $100050$，$d$ 值增加 $21$，总伤害差为 $200050$。\n- 第二回合结束后，扶苏 $d$ 值为 $24$，扶咕咕 $d$ 值为 $3$，第三回合由扶咕咕出手。扶咕咕使用 $1$ 、 $2$ 两个道具，伤害为 $200102$，$d$ 值增加 $121$，总伤害差为 $-52$。这回合结束后，双方 $d$ 值差恰好为 $100$，符合要求。\n\n### 数据规模与约定\n\n\n**本题采用多测试点捆绑测试**。\n\n- 子任务 $1$（$5$ 分）：保证 $n=0$。\n- 子任务 $2$（$10$ 分）：保证 $m=0$。\n- 子任务 $3$（$15$ 分）：保证 $n,m \\le 5$。\n- 子任务 $4$（$20$ 分）：保证 $n \\le 3$。\n- 子任务 $5$（$20$ 分）：保证 $m \\le 10$。\n- 子任务 $6$（$30$ 分）：无特殊约定。\n\n对于全部的测试点，保证 $0 \\le n \\le 10^3$，$0 \\le m \\le 10^5$，$1 \\le p_i,w \\le 100$，$1 \\le x_a,x_b,k_a,d_a,d_b \\le 10^9$，$x_a$ 与 $x_b$ 是 $10^5$ 的倍数，$1 \\le |d_a-d_b| \\le 100$。\n\n### 提示\n\n共有 4 个样例文件，请见附加文件中的 opera.zip。  \n对于样例 2，满足 $m = 0$。  \n对于样例 3，满足 $n \\leq 3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 牵丝戏", "background": "> 风雪依稀秋白发尾， 灯火葳蕤，揉皱你眼眉。  \n> 假如你舍一滴泪，假如老去我能陪。  \n> 烟波里成灰，也去得完美。 \n\n——银临 & Aki阿杰《牵丝戏》", "description": "扶苏和扶咕咕最近在玩一款叫做「ddt」的游戏，因为玩「ddt」时一直在循环《牵丝戏》，所以想到牵丝戏就想到了这个游戏。\n\n为了简化问题，我们认为这是一款一对一回合制游戏。双方玩家各有一个属性，被称为 delay 值，简称 $d$ 值。$d$ 值会根据回合中玩家使用的道具类型和数量来进行相应的增加。我们定义玩家 $x$ 的回合为玩家 $x$ 从发动攻击到结束的整个过程。**在玩家 $x$ 的回合中，只有玩家 $x$ 可以使用道具和发动攻击，并且玩家 $x$ 一定会发动攻击**。当一个玩家的回合结束以后，下一回合将是两个玩家中 $d$ 值**较小**的玩家的回合。当两个玩家的 $d$ 值相同时，因为扶苏氪金很多，下一回合一定是**扶苏的回合**。\n\n这款游戏共有 $m$ 种道具，第 $i$ 种道具会将本回合的伤害增加**不计算其他道具的原始伤害**的 $\\frac{k_i}{10^5}$ 倍，同时会增加 $p_i$ 点 $d$ 值。每回合**每种道具只能使用一次，本回合的道具不会对下回合产生伤害增益效果**。同时，每回合结束以后，发动攻击的玩家一定会增加 $w$ 点 $d$ 值。\n\n而使用道具是受到双方 $d$ 值差限制的。具体的，任何回合所使用的道具应该满足本回合结束以后双方 $d$ 值（包括发动攻击的玩家一定增加的 $w$ 点 $d$ 值）之差的绝对值**不超过** $100$。一个显然的事实是，只要保证了 $w \\le 100$，玩家就一定存在一种选择道具的方法（包括不选择），来满足这个限制。\n\n例如，在扶咕咕的回合中，若她的原始伤害 $t=10^5$，初始时 $d$ 值 $d_0=3$，规定 $w=2$，她使用了两个道具，$k_1=114$，$k_2=514$，$p_1=19$，$p_2=81$，那么本回合她造成的伤害为 \n\n$$t + t \\times k_1 + t \\times k_2 = 10^5 + 114 + 514 =  100628$$\n\n她回合结束后的 $d$ 值为\n\n$$d_0 + w + p_1 + p_2 = 3 + 2 + 19 + 81 = 105$$\n\n而假如下回合还是她的回合，并且她没有使用道具，那么她下回合造成的伤害为 \n\n$$t =  100000$$\n\n她下回合结束后的 $d$ 值为 \n\n$$105 + w = 105 + 2 = 107$$\n\n现在扶苏和扶咕咕正在对战。给定游戏的道具列表，和他们的原始伤害、 $d$ 值。游戏一共会进行 $n$ 回合，不妨认为无论造成多大的伤害，双方都不会死亡。请你最大化「扶苏对扶咕咕造成的伤害 - 扶咕咕对扶苏造成的伤害」这个差的值。\n\n当然，扶咕咕也会尽可能最大化「她对扶苏造成伤害 - 扶苏对她造成伤害」的值。不妨认为扶苏是 yLOI 世界中最聪明的男孩子，扶咕咕是 yLOI 世界中最聪明的女孩子，也就是**他们都会选择最优的策略来使用道具而不会出错**，题目所求即为在这种情况下伤害差的最大值。", "inputFormat": "第一行有一个整数，表示该测试点所在的子任务编号 $T$。   \n第二行有三个整数，分别表示游戏的回合数 $n$，游戏的装备数 $m$ 以及每回合固定增加的 $d$ 值 $w$。   \n第三行有 $m$ 个整数，第 $i$ 个整数表示 $k_i$。   \n第四行有 $m$ 个整数，第 $i$ 个整数表示 $p_i$。   \n第五行有四个整数，依次表示扶苏的初始伤害 $x_a$，扶咕咕的初始伤害 $x_b$，扶苏的初始 $d$ 值 $d_a$，扶咕咕的初始 $d$ 值 $d_b$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n- 第一回合开始前，扶苏 $d$ 值为 $2$，扶咕咕 $d$ 值为 $3$，第一回合由扶苏出手。扶苏不使用道具，伤害为 $100000$，$d$ 值增加 $1$，总伤害差为 $100000$。\n- 第一回合结束后，双方 $d$ 值均为 $3$，第二回合由扶苏出手。扶苏使用第一个道具，伤害为 $100050$，$d$ 值增加 $21$，总伤害差为 $200050$。\n- 第二回合结束后，扶苏 $d$ 值为 $24$，扶咕咕 $d$ 值为 $3$，第三回合由扶咕咕出手。扶咕咕使用 $1$ 、 $2$ 两个道具，伤害为 $200102$，$d$ 值增加 $121$，总伤害差为 $-52$。这回合结束后，双方 $d$ 值差恰好为 $100$，符合要求。\n\n### 数据规模与约定\n\n\n**本题采用多测试点捆绑测试**。\n\n- 子任务 $1$（$5$ 分）：保证 $n=0$。\n- 子任务 $2$（$10$ 分）：保证 $m=0$。\n- 子任务 $3$（$15$ 分）：保证 $n,m \\le 5$。\n- 子任务 $4$（$20$ 分）：保证 $n \\le 3$。\n- 子任务 $5$（$20$ 分）：保证 $m \\le 10$。\n- 子任务 $6$（$30$ 分）：无特殊约定。\n\n对于全部的测试点，保证 $0 \\le n \\le 10^3$，$0 \\le m \\le 10^5$，$1 \\le p_i,w \\le 100$，$1 \\le x_a,x_b,k_a,d_a,d_b \\le 10^9$，$x_a$ 与 $x_b$ 是 $10^5$ 的倍数，$1 \\le |d_a-d_b| \\le 100$。\n\n### 提示\n\n共有 4 个样例文件，请见附加文件中的 opera.zip。  \n对于样例 2，满足 $m = 0$。  \n对于样例 3，满足 $n \\leq 3$。", "locale": "zh-CN"}}}
{"pid": "P7098", "type": "P", "difficulty": 5, "samples": [["2 3\n4 1 1\n4 1 5\n2 1 2\n2 1 3", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "状压 DP"], "title": "[yLOI2020] 凉凉", "background": "> 凉凉三生三世恍然如梦，须臾的年风干泪痕。  \n> 若是回忆不能再相认，就让情分落九尘。  \n> 凉凉十里何时还会春盛，又见树下一盏风存。  \n> 落花有意流水无情，别让恩怨爱恨凉透那花的纯，吾生愿牵尘。 \n\n——张碧晨&杨宗纬《凉凉》", "description": "这是 yLOI 系列竞赛中第一道以歌曲命名但歌手不是银临的题目。这道题目的歌曲和问题没什么关系，只是我们的主人公叫凉凉，于是扶苏为他选择了这首歌。\n\n凉凉在和「七瑾在成都喝着凉茶看 jk 边咕咕边嘎嘎边哔哔边在瓦片上吭吭哧哧切企鹅」群的部分群友在青岛面基结束后，和扶苏一起乘坐地铁被七瑾送到了青岛北站。在乘坐地铁的途中，他们经过了「做物理站（错埠岭站）」，做完了高考物理的凉凉给一点都不想做物理的扶苏提了一个物理问题，扶苏不会做，所以凉凉决定考你一道经济学问题。\n\n青岛共有 $n$ 条地铁线路和 $m$ 个地铁站点。每条线路的地铁都在地下以某一固定的深度运行，而如果某深度为 $i$ 的地铁经过了地铁站 $j$，那么地铁站 $j$ 就要在深度为 $i$ 的地方挖一个站台作为上下客口，开挖该上下客口的花费为 $a_{i,j}$。我们忽略建设上下客口通向地面的通道的费用，而只考虑在该深度建上下客口的花费。显而易见，对于线路 $u$ 和线路 $v$，如果他们都经过了同一个地铁站，那么他们线路不能处在同一深度，否则两线地铁将会相撞。而如果 $u$ 和 $v$ 不存在任何一个相同的经过站点，那么这两条线既可以处在同一高度，也可以不处在同一高度。\n\n在这个问题中，你可以认为任何两个地铁不会在除了站点以外的行驶途中相遇，也即你无需考虑两个地铁因为行驶线路交叉而在两站点之间相遇的情况。\n\n将站点从 $1$ 至 $m$ 编号，线路从 $1$ 至 $n$ 编号，现在给定你 $n$ 条线路的经过站点列表和在每个站点的每个深度的建站花费，请你求出让所有的地铁正常运行的最小建站花费总和。", "inputFormat": "第一行有两个整数，分别表示地铁线路的数量 $n$ 和站点个数 $m$。  \n第 $2$ 到第 $(n+1)$ 行，每行 $m$ 个整数，第 $(i+1)$ 行的第 $j$ 个整数表示 $a_{i,j}$。  \n第 $(n+2)$ 行到第 $(2n+1)$ 行，每行若干个整数，第 $(n+i+1)$ 行表示地铁 $i$ 号线的运行线路信息：\n\n>每行首先有一个整数 $c$，表示该线经过的站点个数，接下来该行有 $c$ 个互不相同的整数 $u$，依次表示该地铁经过的站点编号。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n$1$ 号线和 $2$ 号线都经过了站点 $1$，因此他们不能处于同一深度。   \n令 $1$ 号线在深度 $2$ 运行，$2$ 号线在深度 $1$ 运行，则需要修建站点 $1$ 的深度 $1$ 、 $2$ 的上下客口（花费为 $4+4=8$），站点 $2$ 的深度为 $2$ 的上下客口（花费为 $1$），站点 $3$ 的深度为 $1$ 的上下客口（花费为 $1$），总花费为 $10$。可以证明，这是最优的方案。\n\n### 数据规模与约定\n\n本题共 $20$ 个测试点，每个测试点 $5$ 分。\n\n- 对于 $5\\%$ 的数据，保证 $n=1$。\n- 对于 $35\\%$ 的数据，保证 $n,m \\le 6$。\n- 对于 $70\\%$ 的数据，保证 $n \\le 10$。\n- 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 14$，$1 \\le m \\le 10^5$，$1 \\le a_{i,j} \\le 10^9$，$1 \\le c,u \\le m$。\n\n### 提示\n\n本题共有两个附加样例文件，见附加文件中的 cold.zip。\n\n(本来有个更大的样例，但是因为附件不让传这么大的，就被删掉了)\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 凉凉", "background": "> 凉凉三生三世恍然如梦，须臾的年风干泪痕。  \n> 若是回忆不能再相认，就让情分落九尘。  \n> 凉凉十里何时还会春盛，又见树下一盏风存。  \n> 落花有意流水无情，别让恩怨爱恨凉透那花的纯，吾生愿牵尘。 \n\n——张碧晨&杨宗纬《凉凉》", "description": "这是 yLOI 系列竞赛中第一道以歌曲命名但歌手不是银临的题目。这道题目的歌曲和问题没什么关系，只是我们的主人公叫凉凉，于是扶苏为他选择了这首歌。\n\n凉凉在和「七瑾在成都喝着凉茶看 jk 边咕咕边嘎嘎边哔哔边在瓦片上吭吭哧哧切企鹅」群的部分群友在青岛面基结束后，和扶苏一起乘坐地铁被七瑾送到了青岛北站。在乘坐地铁的途中，他们经过了「做物理站（错埠岭站）」，做完了高考物理的凉凉给一点都不想做物理的扶苏提了一个物理问题，扶苏不会做，所以凉凉决定考你一道经济学问题。\n\n青岛共有 $n$ 条地铁线路和 $m$ 个地铁站点。每条线路的地铁都在地下以某一固定的深度运行，而如果某深度为 $i$ 的地铁经过了地铁站 $j$，那么地铁站 $j$ 就要在深度为 $i$ 的地方挖一个站台作为上下客口，开挖该上下客口的花费为 $a_{i,j}$。我们忽略建设上下客口通向地面的通道的费用，而只考虑在该深度建上下客口的花费。显而易见，对于线路 $u$ 和线路 $v$，如果他们都经过了同一个地铁站，那么他们线路不能处在同一深度，否则两线地铁将会相撞。而如果 $u$ 和 $v$ 不存在任何一个相同的经过站点，那么这两条线既可以处在同一高度，也可以不处在同一高度。\n\n在这个问题中，你可以认为任何两个地铁不会在除了站点以外的行驶途中相遇，也即你无需考虑两个地铁因为行驶线路交叉而在两站点之间相遇的情况。\n\n将站点从 $1$ 至 $m$ 编号，线路从 $1$ 至 $n$ 编号，现在给定你 $n$ 条线路的经过站点列表和在每个站点的每个深度的建站花费，请你求出让所有的地铁正常运行的最小建站花费总和。", "inputFormat": "第一行有两个整数，分别表示地铁线路的数量 $n$ 和站点个数 $m$。  \n第 $2$ 到第 $(n+1)$ 行，每行 $m$ 个整数，第 $(i+1)$ 行的第 $j$ 个整数表示 $a_{i,j}$。  \n第 $(n+2)$ 行到第 $(2n+1)$ 行，每行若干个整数，第 $(n+i+1)$ 行表示地铁 $i$ 号线的运行线路信息：\n\n>每行首先有一个整数 $c$，表示该线经过的站点个数，接下来该行有 $c$ 个互不相同的整数 $u$，依次表示该地铁经过的站点编号。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n$1$ 号线和 $2$ 号线都经过了站点 $1$，因此他们不能处于同一深度。   \n令 $1$ 号线在深度 $2$ 运行，$2$ 号线在深度 $1$ 运行，则需要修建站点 $1$ 的深度 $1$ 、 $2$ 的上下客口（花费为 $4+4=8$），站点 $2$ 的深度为 $2$ 的上下客口（花费为 $1$），站点 $3$ 的深度为 $1$ 的上下客口（花费为 $1$），总花费为 $10$。可以证明，这是最优的方案。\n\n### 数据规模与约定\n\n本题共 $20$ 个测试点，每个测试点 $5$ 分。\n\n- 对于 $5\\%$ 的数据，保证 $n=1$。\n- 对于 $35\\%$ 的数据，保证 $n,m \\le 6$。\n- 对于 $70\\%$ 的数据，保证 $n \\le 10$。\n- 对于 $100\\%$ 的数据，保证 $1 \\le n \\le 14$，$1 \\le m \\le 10^5$，$1 \\le a_{i,j} \\le 10^9$，$1 \\le c,u \\le m$。\n\n### 提示\n\n本题共有两个附加样例文件，见附加文件中的 cold.zip。\n\n(本来有个更大的样例，但是因为附件不让传这么大的，就被删掉了)\n", "locale": "zh-CN"}}}
{"pid": "P7099", "type": "P", "difficulty": 6, "samples": [["0\n2 3\n1 3\n1\n2\n3\n", "1\n1\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "2020", "O2优化", "期望"], "title": "[yLOI2020] 灼", "background": "> 声嘶力竭，向悲泣的虚空祈祷至最后，  \n> 神为何依然残酷冷漠。  \n> 天国或地狱，也奢求你无垢眼眸，  \n> 就让我，再次被你拯救。\n\n——银临《灼》", "description": "> 这里是 NS05，勒本星球已无生命反应，请求救援！普尔！——你听得到吗？我会一直在这里，等待你的归来。\n\n扶苏被困在了勒本星球，灼闻羽驾驶着一架宇宙飞船正打算穿越虫洞到达勒本星球拯救扶苏。\n\n在一条数轴上有 $n$ 个虫洞，第 $i$ 个虫洞的坐标为 $x_i$。进入这些虫洞的任意一个都可以直接到达勒本星球拯救扶苏。飞船到达数轴所在直线上后，会因为磁场的效应失去操控能力，飞船每秒会**等概率**向左或向右移动一个单位长度。\n\n灼闻羽非常焦急，他给出了 $q$ 个飞船进入数轴所在直线的初始坐标，对于每个坐标，他想知道期望需要多少秒才能到达一个虫洞。\n\n如果你计算出的期望是个分数，你需要求出这个分数对 $998244353$ 取模的答案。有关分数取模的定义你可以参考「提示」中的内容。\n\n为了避免输出过大，你只需要输出四个整数，分别表示你所有回答（对 $998244353$ 取模之后，下同）的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "inputFormat": "第一行是一个整数，表示测试点所对应的编号 $T$。  \n第二行有两个整数，分别表示虫洞的个数 $n$ 和初始坐标的个数 $q$。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个虫洞的坐标 $x_i$。  \n接下来 $q$ 行，每行一个整数，表示一个飞船进入数轴所在直线的初始坐标 $y_j$。\n\n**保证给出的 $y_j$ 以不降序排序**。", "outputFormat": "输出四行，每行一个整数，依次表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。\n", "hint": "### 样例 1 解释\n\n数轴上 $1, 3$ 两点有虫洞。当飞船初始坐标为 $1$ 或 $3$ 时，可以直接进入虫洞，花费 $0s$；当初始坐标为 $2$ 时，有 $\\frac 1 2$ 的概率向左一个单位，花费 $1s$ 进入虫洞，也有 $\\frac 1 2$ 的概率向右一个单位，花费 $1s$ 进入虫洞，期望用时为 $\\frac 1 2 \\times (1 + 1) = 1$。\n\n因此，三次询问的答案分别为 $0, 1, 0$。\n\n### 数据规模与约定\n\n本题共有 $10$ 个测试点，每个测试点 $10$ 分。\n\n- 对于 $10\\%$ 的数据，保证 $n = 1$。\n- 对于 $20\\%$ 的数据，保证对于任意一个虫洞，总存在另一个虫洞，使得他们之间的距离不超过 $2$。例如，样例中两个虫洞的距离为 $2$。\n- 对于 $30\\%$ 的数据，保证对于任意一个虫洞，总存在另一个虫洞，使得他们之间的距离不超过 $3$。\n- 对于 $50\\%$ 的数据，保证 $x_i,q \\leq 100$。\n- 对于 $70\\%$ 的数据，保证 $x_i, q \\leq 10^5$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq q \\leq 5 \\times 10^6$，$1 \\leq x_i, y_j \\leq 10^9$，$y_j$ 不小于 $x_i$ 中的最小值，且 $y_j$ 不大于 $x_i$ 中的最大值，$y_j$ 按照不降序给出。\n\n### 提示\n\n- 如果你不知道什么是分数取模，可以参考如下的内容：\n\n  对于一个形如 $\\frac a b$ 的既约分数，其中 $b \\lt 998244353$，它对 $998244353$ 取模后的值为 $a \\times b^{998244351} \\bmod {998244353}$ 。 \n- 为了方便用脚造数据，数据**并不**保证 $x_i$ 互不相同。\n- 请注意大量数据读入对程序效率造成的影响。\n- 本题的特殊输出方式只是为了避免输出过大造成程序超时，与本题解法无关。\n- 请注意，$T$ **不是**数据组数。\n- 本题共有两个附加文件，见附加文件中的 zhuo.zip。\t", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLOI2020] 灼", "background": "> 声嘶力竭，向悲泣的虚空祈祷至最后，  \n> 神为何依然残酷冷漠。  \n> 天国或地狱，也奢求你无垢眼眸，  \n> 就让我，再次被你拯救。\n\n——银临《灼》", "description": "> 这里是 NS05，勒本星球已无生命反应，请求救援！普尔！——你听得到吗？我会一直在这里，等待你的归来。\n\n扶苏被困在了勒本星球，灼闻羽驾驶着一架宇宙飞船正打算穿越虫洞到达勒本星球拯救扶苏。\n\n在一条数轴上有 $n$ 个虫洞，第 $i$ 个虫洞的坐标为 $x_i$。进入这些虫洞的任意一个都可以直接到达勒本星球拯救扶苏。飞船到达数轴所在直线上后，会因为磁场的效应失去操控能力，飞船每秒会**等概率**向左或向右移动一个单位长度。\n\n灼闻羽非常焦急，他给出了 $q$ 个飞船进入数轴所在直线的初始坐标，对于每个坐标，他想知道期望需要多少秒才能到达一个虫洞。\n\n如果你计算出的期望是个分数，你需要求出这个分数对 $998244353$ 取模的答案。有关分数取模的定义你可以参考「提示」中的内容。\n\n为了避免输出过大，你只需要输出四个整数，分别表示你所有回答（对 $998244353$ 取模之后，下同）的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。", "inputFormat": "第一行是一个整数，表示测试点所对应的编号 $T$。  \n第二行有两个整数，分别表示虫洞的个数 $n$ 和初始坐标的个数 $q$。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个虫洞的坐标 $x_i$。  \n接下来 $q$ 行，每行一个整数，表示一个飞船进入数轴所在直线的初始坐标 $y_j$。\n\n**保证给出的 $y_j$ 以不降序排序**。", "outputFormat": "输出四行，每行一个整数，依次表示你所有回答的按位异或之和、你共有多少次回答的答案是奇数，你的所有答案中的最大值、你的所有答案中的最小值。\n", "hint": "### 样例 1 解释\n\n数轴上 $1, 3$ 两点有虫洞。当飞船初始坐标为 $1$ 或 $3$ 时，可以直接进入虫洞，花费 $0s$；当初始坐标为 $2$ 时，有 $\\frac 1 2$ 的概率向左一个单位，花费 $1s$ 进入虫洞，也有 $\\frac 1 2$ 的概率向右一个单位，花费 $1s$ 进入虫洞，期望用时为 $\\frac 1 2 \\times (1 + 1) = 1$。\n\n因此，三次询问的答案分别为 $0, 1, 0$。\n\n### 数据规模与约定\n\n本题共有 $10$ 个测试点，每个测试点 $10$ 分。\n\n- 对于 $10\\%$ 的数据，保证 $n = 1$。\n- 对于 $20\\%$ 的数据，保证对于任意一个虫洞，总存在另一个虫洞，使得他们之间的距离不超过 $2$。例如，样例中两个虫洞的距离为 $2$。\n- 对于 $30\\%$ 的数据，保证对于任意一个虫洞，总存在另一个虫洞，使得他们之间的距离不超过 $3$。\n- 对于 $50\\%$ 的数据，保证 $x_i,q \\leq 100$。\n- 对于 $70\\%$ 的数据，保证 $x_i, q \\leq 10^5$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq q \\leq 5 \\times 10^6$，$1 \\leq x_i, y_j \\leq 10^9$，$y_j$ 不小于 $x_i$ 中的最小值，且 $y_j$ 不大于 $x_i$ 中的最大值，$y_j$ 按照不降序给出。\n\n### 提示\n\n- 如果你不知道什么是分数取模，可以参考如下的内容：\n\n  对于一个形如 $\\frac a b$ 的既约分数，其中 $b \\lt 998244353$，它对 $998244353$ 取模后的值为 $a \\times b^{998244351} \\bmod {998244353}$ 。 \n- 为了方便用脚造数据，数据**并不**保证 $x_i$ 互不相同。\n- 请注意大量数据读入对程序效率造成的影响。\n- 本题的特殊输出方式只是为了避免输出过大造成程序超时，与本题解法无关。\n- 请注意，$T$ **不是**数据组数。\n- 本题共有两个附加文件，见附加文件中的 zhuo.zip。\t", "locale": "zh-CN"}}}
{"pid": "P7100", "type": "P", "difficulty": 4, "samples": [["5 2\n3\n1 1\n2 1\n5 3\n3\n2 1\n3 2\n4 1", "0 2 5 4 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "最短路", "构造"], "title": "[W1] 团", "background": "", "description": "我有一张 $n$ 个节点的无向边带权图。它的边很多，用这个方法表示：\n\n - 有 $k$ 个集合；第 $i$ 个集合可以表示为 $S_i=\\{(T_1,W_1),(T_2,W_2),\\dots,(T_{|S_i|},W_{|S_i|})\\}$。\n - 对于任何两对 $(T_i,W_i),(T_j,W_j)$ 在同一个集合里面，图中会形成一条连 $T_i$ 和 $T_j$ 的边，边权为 $W_i+W_j$。\n\n请对于所有节点 $i$ 找到 $1$ 到 $i$ 的最短路，即从 $1$ 到 $i$ 的边权和最小的简单路径。", "inputFormat": "第一行两个正整数 $n,k$。  \n接下来描述 $k$ 个集合。  \n第 $i$ 集合的描述的第一行一个正整数 $|S_i|$，表示 $|S_i|$ 的大小。  \n接下来 $S_i$ 行，每行两个正整数 $t,w$，表示 $(t,w)\\in S_i$。", "outputFormat": "一行 $n$ 个正整数；第 $i$ 个正整数表示 $1$ 到 $i$ 的最短路长度。如果不存在一条路径，输出 $\\textsf{0x3f3f3f3f3f3f3f3f}=4557430888798830399$。", "hint": "对于前 $10\\%$ 的数据，$|S_i|=2$；  \n对于前 $20\\%$ 的数据，$|S_i|\\le10$；  \n对于前 $50\\%$ 的数据，$|N|\\le1000,\\sum|S_i|\\le2000$;  \n对于 $100\\%$ 的数据，$1\\le|N|\\le2\\cdot10^5,\\sum|S_i|\\le4\\cdot10^5,0\\le W_i\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[W1] 团", "background": "", "description": "我有一张 $n$ 个节点的无向边带权图。它的边很多，用这个方法表示：\n\n - 有 $k$ 个集合；第 $i$ 个集合可以表示为 $S_i=\\{(T_1,W_1),(T_2,W_2),\\dots,(T_{|S_i|},W_{|S_i|})\\}$。\n - 对于任何两对 $(T_i,W_i),(T_j,W_j)$ 在同一个集合里面，图中会形成一条连 $T_i$ 和 $T_j$ 的边，边权为 $W_i+W_j$。\n\n请对于所有节点 $i$ 找到 $1$ 到 $i$ 的最短路，即从 $1$ 到 $i$ 的边权和最小的简单路径。", "inputFormat": "第一行两个正整数 $n,k$。  \n接下来描述 $k$ 个集合。  \n第 $i$ 集合的描述的第一行一个正整数 $|S_i|$，表示 $|S_i|$ 的大小。  \n接下来 $S_i$ 行，每行两个正整数 $t,w$，表示 $(t,w)\\in S_i$。", "outputFormat": "一行 $n$ 个正整数；第 $i$ 个正整数表示 $1$ 到 $i$ 的最短路长度。如果不存在一条路径，输出 $\\textsf{0x3f3f3f3f3f3f3f3f}=4557430888798830399$。", "hint": "对于前 $10\\%$ 的数据，$|S_i|=2$；  \n对于前 $20\\%$ 的数据，$|S_i|\\le10$；  \n对于前 $50\\%$ 的数据，$|N|\\le1000,\\sum|S_i|\\le2000$;  \n对于 $100\\%$ 的数据，$1\\le|N|\\le2\\cdot10^5,\\sum|S_i|\\le4\\cdot10^5,0\\le W_i\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P7101", "type": "P", "difficulty": 7, "samples": [["7\n1 0 0\n1 0 1\n1 2 0\n2 2 0\n1 4 0\n2 4 0\n1 6 0", "0\n0\n1\n0\n256\n0\n6561"], ["5\n1 0 0\n1 0 1\n1 1 0\n1 1 1\n2 0 1", "0\n0\n994344961\n982646785\n994344961"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["计算几何", "O2优化", "组合数学"], "title": "[W1] 推", "background": "一个”点集“为一个二维平面上的整点组成的**多重**集合。  \n可以从一个点集构造一个三角形当且仅当这个三角形的所有顶点在该点集里面。  \n从一个点集 $S$ 里可以构造恰好 $|S|^3$ 个三角形。（可能一些三角形会退化为一条面积为 0 的线段）", "description": "有一个点集，初始为空集。  \n有 $N$ 个操作，在每一个操作，会从这个点集插入或删除一个点。每一步完成后，询问这个点集可构造的所有三角形面积 *__八次方__* 之和。\n\n所有询问答案都可以表示为 $a/b$，其中 $a$ 和 $b$ 互质。输出 $a\\cdot b^{-1}\\pmod{998244353}$。", "inputFormat": "第一行一个正整数 $N$，表示接下来的步骤个数。  \n接下来 $N$ 行，每一行三个正整数 $t,x,y$。  \n如果 $t=1$，则插入 $(x,y)$ 这个点；如果 $t=2$ 则删除 $(x,y)$ 这个点。", "outputFormat": "一共 $N$ 行，第 $i$ 行一个正整数，表示第 $i$ 个步骤完成之后的询问答案。", "hint": "对于 $10\\%$ 的数据，$N\\le10$；  \n对于 $30\\%$ 的数据，$N\\le10^3$；  \n对于另外 $10\\%$ 的数据，没有删除步骤；  \n对于 $100\\%$ 的数据，$1\\le N\\le10^5,0\\le x,y<998244353$，任何删除的点都保证原来存在。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[W1] 推", "background": "一个”点集“为一个二维平面上的整点组成的**多重**集合。  \n可以从一个点集构造一个三角形当且仅当这个三角形的所有顶点在该点集里面。  \n从一个点集 $S$ 里可以构造恰好 $|S|^3$ 个三角形。（可能一些三角形会退化为一条面积为 0 的线段）", "description": "有一个点集，初始为空集。  \n有 $N$ 个操作，在每一个操作，会从这个点集插入或删除一个点。每一步完成后，询问这个点集可构造的所有三角形面积 *__八次方__* 之和。\n\n所有询问答案都可以表示为 $a/b$，其中 $a$ 和 $b$ 互质。输出 $a\\cdot b^{-1}\\pmod{998244353}$。", "inputFormat": "第一行一个正整数 $N$，表示接下来的步骤个数。  \n接下来 $N$ 行，每一行三个正整数 $t,x,y$。  \n如果 $t=1$，则插入 $(x,y)$ 这个点；如果 $t=2$ 则删除 $(x,y)$ 这个点。", "outputFormat": "一共 $N$ 行，第 $i$ 行一个正整数，表示第 $i$ 个步骤完成之后的询问答案。", "hint": "对于 $10\\%$ 的数据，$N\\le10$；  \n对于 $30\\%$ 的数据，$N\\le10^3$；  \n对于另外 $10\\%$ 的数据，没有删除步骤；  \n对于 $100\\%$ 的数据，$1\\le N\\le10^5,0\\le x,y<998244353$，任何删除的点都保证原来存在。", "locale": "zh-CN"}}}
{"pid": "P7102", "type": "P", "difficulty": 7, "samples": [["8 10 4\n3 1 4 1 5 9 2 6", "35683652\n171899188\n780914481\n858211065"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化", "组合数学", "快速数论变换 NTT"], "title": "[W1] 算", "background": "", "description": "有一个 $m$ 项多项式 $p(x)$ 以及两个参数 $c$ 和 $t$，其中 $p(x)=a_0+a_1x+\\dots+a_{m-1}x^{m-1}$。  \n定义一个新函数 $s(n)$:\n$$s(n)=\\sum_{i=1}^np(i)[\\gcd(i,n)=1]\\bmod 998244353$$\n请计算 $s(c),s(c^2),\\dots,s(c^t)$。", "inputFormat": "第一行三个正整数，分别表示 $m,c,t$。  \n第二行 $m$ 个正整数，表示 $a_0,a_1,\\dots,a_{m-1}$。", "outputFormat": "输出 $t$ 行，第 $i$ 行一个正整数 $s(c^i)$。", "hint": "对于 $10\\%$ 的数据，$t\\le2,c\\le100$;  \n对于 $30\\%$ 的数据，$t\\le1000,m\\le1000$；  \n对于 $50\\%$ 的数据，$t\\le5\\cdot10^4,m\\le5\\cdot10^4,c\\le10^{12}$；  \n对于另外 $10\\%$ 的数据，$c=123456789$；  \n对于所有数据，$1\\le t\\le2\\cdot10^5,1\\le m\\le2\\cdot10^5,1\\le c\\le10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[W1] 算", "background": "", "description": "有一个 $m$ 项多项式 $p(x)$ 以及两个参数 $c$ 和 $t$，其中 $p(x)=a_0+a_1x+\\dots+a_{m-1}x^{m-1}$。  \n定义一个新函数 $s(n)$:\n$$s(n)=\\sum_{i=1}^np(i)[\\gcd(i,n)=1]\\bmod 998244353$$\n请计算 $s(c),s(c^2),\\dots,s(c^t)$。", "inputFormat": "第一行三个正整数，分别表示 $m,c,t$。  \n第二行 $m$ 个正整数，表示 $a_0,a_1,\\dots,a_{m-1}$。", "outputFormat": "输出 $t$ 行，第 $i$ 行一个正整数 $s(c^i)$。", "hint": "对于 $10\\%$ 的数据，$t\\le2,c\\le100$;  \n对于 $30\\%$ 的数据，$t\\le1000,m\\le1000$；  \n对于 $50\\%$ 的数据，$t\\le5\\cdot10^4,m\\le5\\cdot10^4,c\\le10^{12}$；  \n对于另外 $10\\%$ 的数据，$c=123456789$；  \n对于所有数据，$1\\le t\\le2\\cdot10^5,1\\le m\\le2\\cdot10^5,1\\le c\\le10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P7103", "type": "P", "difficulty": 4, "samples": [["8 3\n0 1 1 2 2 3 4 5\n2\n1\n4\n", "1\n1\n2"], ["11 4\n0 1 1 3 3 3 4 5 8 8 10\n3\n4\n5\n6", "3\n3\n8\n11"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216, 393216]}, "tags": ["树形数据结构", "O2优化", "树形 DP"], "title": "「C.E.L.U-01」族谱树", "background": "小 Soup 正在翻看他们家的族谱，他们家的族谱构成了一棵树。小 Soup 发现，由于年代久远，他们家族中的一些分支已经绝迹，他对此十分好奇。", "description": "小 Soup 给你他们家的族谱树，想要问你在这棵树中**所有**第 $k$ 层的孩子（树中深度为 $k$ 的点，根节点的深度为 $1$ ,根节点编号为 $1$ ）的 $\\text{最近公共祖先}$ 是谁。", "inputFormat": "第一行两个整数 $n,m$。  \n第二行 $n$ 个整数，其中第 $i$ 个整数为 $f_i$，表示 $i$ 的父亲为 $f_i$，请注意，$1$ 的 $f_i$ 固定为 $0$。  \n接下来 $m$ 行，每行一个整数 $k$，代表小 Soup 的询问。", "outputFormat": "对于每个小 Soup 的询问，输出一个整数，即**所有**深度为 $k$ 的点的 $\\text{最近公共祖先}$。", "hint": "\n样例解释1：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/zgcgu0da.png)\n\n样例解释2：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/l02zvtkv.png)\n\n#### 数据保证存在深度为 $k$ 的点\n\n$\\begin{array}{|c|c|c|}数据编号&n,m&特殊性质\\\\1&\\le10&\\diagdown\\\\2&\\le100&\\diagdown\\\\3\\sim4&\\le10^3&\\diagdown\\\\5&\\le3\\times10^5&树为一条链\\\\6&\\le3\\times10^5&\\diagdown\\\\7\\sim10&\\le3\\times10^6&\\diagdown\\\\11\\sim12&\\le5\\times10^6&\\diagdown\\end{array}$\n\n\n对于 $100\\%$ 的数据，$n\\le5\\times10^6,m\\le n$。\n\n温馨提示：此题较卡常，请注意大常数带来的影响以及时空复杂度。如果你被卡常了，可以试试使用快速读入。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-01」族谱树", "background": "小 Soup 正在翻看他们家的族谱，他们家的族谱构成了一棵树。小 Soup 发现，由于年代久远，他们家族中的一些分支已经绝迹，他对此十分好奇。", "description": "小 Soup 给你他们家的族谱树，想要问你在这棵树中**所有**第 $k$ 层的孩子（树中深度为 $k$ 的点，根节点的深度为 $1$ ,根节点编号为 $1$ ）的 $\\text{最近公共祖先}$ 是谁。", "inputFormat": "第一行两个整数 $n,m$。  \n第二行 $n$ 个整数，其中第 $i$ 个整数为 $f_i$，表示 $i$ 的父亲为 $f_i$，请注意，$1$ 的 $f_i$ 固定为 $0$。  \n接下来 $m$ 行，每行一个整数 $k$，代表小 Soup 的询问。", "outputFormat": "对于每个小 Soup 的询问，输出一个整数，即**所有**深度为 $k$ 的点的 $\\text{最近公共祖先}$。", "hint": "\n样例解释1：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/zgcgu0da.png)\n\n样例解释2：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/l02zvtkv.png)\n\n#### 数据保证存在深度为 $k$ 的点\n\n$\\begin{array}{|c|c|c|}数据编号&n,m&特殊性质\\\\1&\\le10&\\diagdown\\\\2&\\le100&\\diagdown\\\\3\\sim4&\\le10^3&\\diagdown\\\\5&\\le3\\times10^5&树为一条链\\\\6&\\le3\\times10^5&\\diagdown\\\\7\\sim10&\\le3\\times10^6&\\diagdown\\\\11\\sim12&\\le5\\times10^6&\\diagdown\\end{array}$\n\n\n对于 $100\\%$ 的数据，$n\\le5\\times10^6,m\\le n$。\n\n温馨提示：此题较卡常，请注意大常数带来的影响以及时空复杂度。如果你被卡常了，可以试试使用快速读入。", "locale": "zh-CN"}}}
{"pid": "P7104", "type": "P", "difficulty": 5, "samples": [["3 2\n1 1 1 1\n1 2 2 1\n2 1 2 1", "3"], ["5 3\n1 0 0 0 3\n1 1 -1 0 1\n2 0 0 0 2\n1 19 3 5 6\n2 1 0 0 30\n", "64\n1944"], ["10 2\n1 7 5 4 \n1 2 4 2 \n2 2 2 2 \n1 5 5 3 \n1 2 2 0 \n2 5 3 4 \n2 6 0 1 \n1 0 9 0 \n1 4 6 0 \n2 4 0 0", "9\n45\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["其它技巧"], "title": "「C.E.L.U-01」超越维度", "background": "代号为\"S-Q\"科技探索计划的成功实现使得小 Soup 和罗司机进入了一个虚拟的 $k$ 维空间中，它们准备对这个 $k$ 维空间进行一番创造。", "description": "小 Soup 和罗司机给了你 $n$ 个操作。  \n操作$1$：小 Soup 向 $k$ 维空间中加入一个正 $k$ 维超立方体。  \n操作$2$：罗司机给出一个正 $k$ 维超立方体，求当前已存在的超立方体与这个正 $k$ 维超立方体的体积交，然后输出答案 $\\text{mod}\\ 1919810\\ $的值。 ", "inputFormat": "第一行两个数，$n,k$，含义已解释。  \n第$2\\sim n+1$ 行，每行 $k+2$ 个数，第一个数代表操作编号，接下来 $k$ 个数代表这个正 $k$ 维超立方体的中心点在 $k$ 维坐标系中的坐标，最后一个数代表这个中心点与每个 $k-1$ 维超平面的距离（它们都是相等的）。", "outputFormat": "对于每一个操作$2$，输出一个数。", "hint": "\n**样例1解释：**  \n如图，橙色框为两个加入的正方形，绿色框为询问，绿色块为答案。\n![](https://cdn.luogu.com.cn/upload/image_hosting/juqwca7d.png)\n\n**样例3解释：**\n\n如图（红色标出部分为询问2答案）（两个解释不是同一个人造的）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8tngjx7g.png)\n\n**数据范围**\n\n$\\begin{array}{|c|c|c|}数据编号&n&k\\\\1&500&1\\\\2\\sim3&500&2\\\\4\\sim6&500&3\\\\7\\sim10&500&\\le6\\end{array}$  \n输入输出的数在 $\\text{long long}$ 范围内，保证数据随机（正k维超立方体较分散）。  \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-01」超越维度", "background": "代号为\"S-Q\"科技探索计划的成功实现使得小 Soup 和罗司机进入了一个虚拟的 $k$ 维空间中，它们准备对这个 $k$ 维空间进行一番创造。", "description": "小 Soup 和罗司机给了你 $n$ 个操作。  \n操作$1$：小 Soup 向 $k$ 维空间中加入一个正 $k$ 维超立方体。  \n操作$2$：罗司机给出一个正 $k$ 维超立方体，求当前已存在的超立方体与这个正 $k$ 维超立方体的体积交，然后输出答案 $\\text{mod}\\ 1919810\\ $的值。 ", "inputFormat": "第一行两个数，$n,k$，含义已解释。  \n第$2\\sim n+1$ 行，每行 $k+2$ 个数，第一个数代表操作编号，接下来 $k$ 个数代表这个正 $k$ 维超立方体的中心点在 $k$ 维坐标系中的坐标，最后一个数代表这个中心点与每个 $k-1$ 维超平面的距离（它们都是相等的）。", "outputFormat": "对于每一个操作$2$，输出一个数。", "hint": "\n**样例1解释：**  \n如图，橙色框为两个加入的正方形，绿色框为询问，绿色块为答案。\n![](https://cdn.luogu.com.cn/upload/image_hosting/juqwca7d.png)\n\n**样例3解释：**\n\n如图（红色标出部分为询问2答案）（两个解释不是同一个人造的）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8tngjx7g.png)\n\n**数据范围**\n\n$\\begin{array}{|c|c|c|}数据编号&n&k\\\\1&500&1\\\\2\\sim3&500&2\\\\4\\sim6&500&3\\\\7\\sim10&500&\\le6\\end{array}$  \n输入输出的数在 $\\text{long long}$ 范围内，保证数据随机（正k维超立方体较分散）。  \n", "locale": "zh-CN"}}}
{"pid": "P7105", "type": "P", "difficulty": 6, "samples": [["3\n0 0.5 0.5\n0.5 0 0.5\n0.5 0.5 0", "1.625000"], ["4\n0 0.129 0.58 0.37\n0.129 0 0.22 0.134\n0.58 0.22 0 0.6\n0.37 0.134 0.6 0", "2.143266"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "期望", "状压 DP"], "title": "「C.E.L.U-01」门禁", "background": "abruce 有一次去机房去得**比较**早，然后……他在外面等了35分钟……于是，他想到这样一个问题：  \n机房的大门锁着，有 $n$ 名学生都需要进来，进来必须要门禁卡。但有些学生会一同前往。一同前往的人中只要有一个人带了门禁卡就会免于被锁在外面的窘境。现在老师终于要发门禁卡了，可是究竟要发多少张呢？", "description": "我们将题目背景中的问题简化。给出 $n$ 个点，以及任意两个点 $i,j$ 之间存在一条无向边的概率 $p_{i,j}$，求图中联通块个数的期望。", "inputFormat": "第一行一个数 $n$。  \n第二行到第 $n+1$ 行，每行 $n$ 个实数，代表 $p_{i,j}$。测试数据保证对任意 $1\\le i \\le n$，$p_{i,i}=0$，对任意 $1\\le i,j \\le n$，$p_{i,j}=p_{j,i}$，$0\\le p_{i,j}\\le1$ ，输入的实数小数点后位数不超过 $3$ 位。", "outputFormat": "仅一行一个实数，表示连通块个数的期望。当你的答案与标准答案的**绝对**误差不超过 $10^{-4}$ 时算作正确。", "hint": "样例解释1：以下八种情况出现概率都是 $\\dfrac{1}{8}$。  \n![](https://cdn.luogu.com.cn/upload/image_hosting/u1fkikj5.png)  \n连通块的个数分别为 $3,2,2,2,1,1,1,1$。  \n所以期望是 $\\dfrac{1}{8}\\times3+\\dfrac{3}{8}\\times2+\\dfrac{4}{8}\\times1=\\dfrac{13}{8}=1.625$\n\n|数据编号|$n$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim3$|$\\le4$|无|\n|$4$|$\\le8$|$p_{i,j}=0$ 或 $p_{i,j}=1$|\n|$5\\sim6$|$\\le8$|$i\\not=j$ 时 $p_{i,j}=0.5$|\n|$7\\sim8$|$\\le8$|无|\n|$9\\sim10$|$\\le11$|无|\n|$11\\sim12$|$\\le14$|无|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「C.E.L.U-01」门禁", "background": "abruce 有一次去机房去得**比较**早，然后……他在外面等了35分钟……于是，他想到这样一个问题：  \n机房的大门锁着，有 $n$ 名学生都需要进来，进来必须要门禁卡。但有些学生会一同前往。一同前往的人中只要有一个人带了门禁卡就会免于被锁在外面的窘境。现在老师终于要发门禁卡了，可是究竟要发多少张呢？", "description": "我们将题目背景中的问题简化。给出 $n$ 个点，以及任意两个点 $i,j$ 之间存在一条无向边的概率 $p_{i,j}$，求图中联通块个数的期望。", "inputFormat": "第一行一个数 $n$。  \n第二行到第 $n+1$ 行，每行 $n$ 个实数，代表 $p_{i,j}$。测试数据保证对任意 $1\\le i \\le n$，$p_{i,i}=0$，对任意 $1\\le i,j \\le n$，$p_{i,j}=p_{j,i}$，$0\\le p_{i,j}\\le1$ ，输入的实数小数点后位数不超过 $3$ 位。", "outputFormat": "仅一行一个实数，表示连通块个数的期望。当你的答案与标准答案的**绝对**误差不超过 $10^{-4}$ 时算作正确。", "hint": "样例解释1：以下八种情况出现概率都是 $\\dfrac{1}{8}$。  \n![](https://cdn.luogu.com.cn/upload/image_hosting/u1fkikj5.png)  \n连通块的个数分别为 $3,2,2,2,1,1,1,1$。  \n所以期望是 $\\dfrac{1}{8}\\times3+\\dfrac{3}{8}\\times2+\\dfrac{4}{8}\\times1=\\dfrac{13}{8}=1.625$\n\n|数据编号|$n$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim3$|$\\le4$|无|\n|$4$|$\\le8$|$p_{i,j}=0$ 或 $p_{i,j}=1$|\n|$5\\sim6$|$\\le8$|$i\\not=j$ 时 $p_{i,j}=0.5$|\n|$7\\sim8$|$\\le8$|无|\n|$9\\sim10$|$\\le11$|无|\n|$11\\sim12$|$\\le14$|无|", "locale": "zh-CN"}}}
{"pid": "P7106", "type": "P", "difficulty": 1, "samples": [["#FFFFFF", "#000000"], ["#EBA932", "#1456CD"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "字符串", "洛谷原创", "O2优化", "进制", "洛谷月赛"], "title": "双生独白", "background": "我喜欢安静，你热爱喧闹；我忠于温暖，你酷爱凉爽。\n\n如果任何事物都有反面，那拼接这个世界的颜色呢？\n\n只有白与黑吗？", "description": "为了形式化地描述颜色，我们引入 **RGB 颜色值**，用三元组 $(r,g,b)$ 表示一种颜色，其中 $r,g,b$ 分别为该颜色的 **R 值**、**G 值**、**B 值**，满足 $0 \\le r,g,b \\le 255$ 且皆为**十进制整数**。\n\n显然，这套颜色系统一共可以表示 $256 \\times 256 \\times 256 = 16\\,777\\,216$ 种不同的颜色。对于颜色 $(r,g,b)$，定义其**反色**的 RGB 颜色值为 $(255-r,255-g,255-b)$。\n\n然而人们发现，单纯地使用 RGB 颜色值很不方便，复制颜色时要复制三个值。\n\n于是诞生了**十六进制颜色码**，即形如 `#EBA932` 长度为 $7$ 的字符串。具体而言：\n\n- 字符串的第一位是 `#`，为颜色码标识符。\n- 字符串的第二、三位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 R 值。\n- 字符串的第四、五位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 G 值。\n- 字符串的第六、七位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 B 值。\n\n**十六进制数码**从小到大包含 `0`，`1`，`2`，`3`，`4`，`5`，`6`，`7`，`8`，`9`，`A`，`B`，`C`，`D`，`E`，`F`，注意 `A`，`B`，`C`，`D`，`E`，`F` 均为**大写**。\n\n现在你收到了一组十六进制颜色码，请你输出其反色的十六进制颜色码。\n\n*提示：颜色的 RGB 值与十六进制码之间可以相互转换（参考样例解释 #2）*", "inputFormat": "一行，输入长度为 $7$ 的字符串，表示原色的十六进制颜色码。", "outputFormat": "一行，输出长度为 $7$ 的字符串，表示反色的十六进制颜色码。", "hint": "**【样例解释 #1】**\n\n转换后原色的 RGB 值为 $(255,255,255)$，反色的 RGB 值为 $(0,0,0)$，对应十六进制码 `#000000`。\n\n**【样例解释 #2】**\n\n转换后原色的 RGB 值为 $(235,169,50)$，反色的 RGB 值为 $(20,86,205)$，对应十六进制码 `#1456CD`。\n\n为避免理解偏差，此处特别解释 `#EBA932` 转换后 B 值为 $50$ 的原因：提取字符串的第六、七位，拼成的十六进制数为 $(32)_{16}$，则有 $(32)_{16} = 3 \\times 16^1 + 2 \\times 16^0 = 50$。\n\n----\n\n**【数据规模与约定】**\n\n本题共有 10 个测试点，每通过一个测试点可获得 10 points。\n\n对于 $10\\%$ 的数据，为样例 #1。\n\n对于另外 $30\\%$ 的数据，输入与输出字符串均不包含大写字母。\n\n对于所有的数据，保证给定字符串为合法十六进制颜色码。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "双生独白", "background": "我喜欢安静，你热爱喧闹；我忠于温暖，你酷爱凉爽。\n\n如果任何事物都有反面，那拼接这个世界的颜色呢？\n\n只有白与黑吗？", "description": "为了形式化地描述颜色，我们引入 **RGB 颜色值**，用三元组 $(r,g,b)$ 表示一种颜色，其中 $r,g,b$ 分别为该颜色的 **R 值**、**G 值**、**B 值**，满足 $0 \\le r,g,b \\le 255$ 且皆为**十进制整数**。\n\n显然，这套颜色系统一共可以表示 $256 \\times 256 \\times 256 = 16\\,777\\,216$ 种不同的颜色。对于颜色 $(r,g,b)$，定义其**反色**的 RGB 颜色值为 $(255-r,255-g,255-b)$。\n\n然而人们发现，单纯地使用 RGB 颜色值很不方便，复制颜色时要复制三个值。\n\n于是诞生了**十六进制颜色码**，即形如 `#EBA932` 长度为 $7$ 的字符串。具体而言：\n\n- 字符串的第一位是 `#`，为颜色码标识符。\n- 字符串的第二、三位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 R 值。\n- 字符串的第四、五位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 G 值。\n- 字符串的第六、七位是十六进制数码，拼成的十六进制数等于十进制下所示颜色的 B 值。\n\n**十六进制数码**从小到大包含 `0`，`1`，`2`，`3`，`4`，`5`，`6`，`7`，`8`，`9`，`A`，`B`，`C`，`D`，`E`，`F`，注意 `A`，`B`，`C`，`D`，`E`，`F` 均为**大写**。\n\n现在你收到了一组十六进制颜色码，请你输出其反色的十六进制颜色码。\n\n*提示：颜色的 RGB 值与十六进制码之间可以相互转换（参考样例解释 #2）*", "inputFormat": "一行，输入长度为 $7$ 的字符串，表示原色的十六进制颜色码。", "outputFormat": "一行，输出长度为 $7$ 的字符串，表示反色的十六进制颜色码。", "hint": "**【样例解释 #1】**\n\n转换后原色的 RGB 值为 $(255,255,255)$，反色的 RGB 值为 $(0,0,0)$，对应十六进制码 `#000000`。\n\n**【样例解释 #2】**\n\n转换后原色的 RGB 值为 $(235,169,50)$，反色的 RGB 值为 $(20,86,205)$，对应十六进制码 `#1456CD`。\n\n为避免理解偏差，此处特别解释 `#EBA932` 转换后 B 值为 $50$ 的原因：提取字符串的第六、七位，拼成的十六进制数为 $(32)_{16}$，则有 $(32)_{16} = 3 \\times 16^1 + 2 \\times 16^0 = 50$。\n\n----\n\n**【数据规模与约定】**\n\n本题共有 10 个测试点，每通过一个测试点可获得 10 points。\n\n对于 $10\\%$ 的数据，为样例 #1。\n\n对于另外 $30\\%$ 的数据，输入与输出字符串均不包含大写字母。\n\n对于所有的数据，保证给定字符串为合法十六进制颜色码。", "locale": "zh-CN"}}}
{"pid": "P7107", "type": "P", "difficulty": 2, "samples": [["3 3 5 2", "YES\n2 1\n2 1\n1 2"], ["3 3 3 2", "NO"], ["3 3 5 3", "NO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "鸽笼原理", "构造", "洛谷月赛"], "title": "天选之人", "background": "暑假期间，学校不提供午餐，Gnar 只好找伙计们一起点外卖。\n\n尴尬的是，外卖很快送到却没人乐意去校门口拿，毕竟户外可是 $35\\degree\\!\\text{C}$ 高温！此时 Gnar 想到了好主意：“我给一人捏了一张纸团，其中一张写有记号，不如我们抓阄决定，谁抽到带记号的谁去拿！”\n\n于是 Gnar 连续拿了六天的外卖。\n\n这可让他不服又委屈：“换个规则！一人准备三张纸团，五张有记号，每人抽三张，记号最多的去拿！”\n\nGnar 紧张地展开手中的纸团，两个记号赫然映在眼前。大伙们刚想放声大笑他的非酋运气，有人缓缓举起三张纸片说道：“我也抽到了两个记号……”", "description": "好奇的 Gnar 想研究一般情况下抽到最多记号的人数。他给参与抓阄的 $n$ 人一人准备了 $m$ 张捏好的纸团，一共 $nm$ 张，其中恰好 $k$ 张提前写了记号。随后每个人在均匀打乱的纸团中各抽 $m$ 张。\n\n一个人抽到最多的记号，当且仅当没有人抽到的记号比他还多。请你帮 Gnar 判断是否可能会**恰好** $\\boldsymbol{p}$ **个人**抽到最多的记号。Gnar 喜欢追根问底，所以如果有可能，你还需构造每个人抽的纸团中分别有多少带记号、有多少不带记号。\n\n形式化地，假设第 $i$ 个人抽到了 $x_i$ 张带记号的纸团和 $y_i$ 张不带记号的纸团，你的构造应满足：\n\n- $x_i, y_i \\ge 0$，$x_i + y_i = m$。\n- $\\displaystyle \\sum_{i = 1}^{n} x_i = k$。\n- **有且仅有** $\\boldsymbol{p}$ **个互不相同**的 $j$ 使 $\\displaystyle x_j = \\max_{i = 1}^{n} \\{x_i\\}$。", "inputFormat": "输入四个整数 $n, m, k, p$，含义详见题目描述。", "outputFormat": "第一行输出 `YES` 或 `NO`（不区分大小写，`yEs` / `No` 均可），表示是否会恰好 $p$ 个人抽到最多的记号。\n\n如果第一行输出 `YES`，接下来 $n$ 行每行输出 $x_i, y_i$，表示每个人抽到带与不带记号的纸团个数。\n\n因答案可能不唯一，本题采用 Special Judge，只要构造符合题面中的要求均视为正确。", "hint": "\n**【样例解释 #1】**\n\n样例给出了一种满足题述条件的构造。\n\n**【样例解释 #2】**\n\n不论如何，记号的分布从高到低只有三种情况：$\\{3,0,0\\}$，$\\{2,1,0\\}$，$\\{1,1,1\\}$，抽到最多记号的人数分别对应 $1$，$1$，$3$。因此无法构造 $p = 2$ 的方案。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (15 points)：$n,m \\le 8$。\n- Subtask #2 (15 points)：$n,m \\le 100$。\n- Subtask #3 (20 points)：$n,m \\le 10^5$。\n- Subtask #4 (10 points)：$p = 1$。\n- Subtask #5 (40 points)：无特殊限制。\n\n对于所有的数据，保证 $1 \\le p \\le n \\le {10}^5$，$1 \\le m \\le {10}^9$，$0 \\le k \\le n m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "天选之人", "background": "暑假期间，学校不提供午餐，Gnar 只好找伙计们一起点外卖。\n\n尴尬的是，外卖很快送到却没人乐意去校门口拿，毕竟户外可是 $35\\degree\\!\\text{C}$ 高温！此时 Gnar 想到了好主意：“我给一人捏了一张纸团，其中一张写有记号，不如我们抓阄决定，谁抽到带记号的谁去拿！”\n\n于是 Gnar 连续拿了六天的外卖。\n\n这可让他不服又委屈：“换个规则！一人准备三张纸团，五张有记号，每人抽三张，记号最多的去拿！”\n\nGnar 紧张地展开手中的纸团，两个记号赫然映在眼前。大伙们刚想放声大笑他的非酋运气，有人缓缓举起三张纸片说道：“我也抽到了两个记号……”", "description": "好奇的 Gnar 想研究一般情况下抽到最多记号的人数。他给参与抓阄的 $n$ 人一人准备了 $m$ 张捏好的纸团，一共 $nm$ 张，其中恰好 $k$ 张提前写了记号。随后每个人在均匀打乱的纸团中各抽 $m$ 张。\n\n一个人抽到最多的记号，当且仅当没有人抽到的记号比他还多。请你帮 Gnar 判断是否可能会**恰好** $\\boldsymbol{p}$ **个人**抽到最多的记号。Gnar 喜欢追根问底，所以如果有可能，你还需构造每个人抽的纸团中分别有多少带记号、有多少不带记号。\n\n形式化地，假设第 $i$ 个人抽到了 $x_i$ 张带记号的纸团和 $y_i$ 张不带记号的纸团，你的构造应满足：\n\n- $x_i, y_i \\ge 0$，$x_i + y_i = m$。\n- $\\displaystyle \\sum_{i = 1}^{n} x_i = k$。\n- **有且仅有** $\\boldsymbol{p}$ **个互不相同**的 $j$ 使 $\\displaystyle x_j = \\max_{i = 1}^{n} \\{x_i\\}$。", "inputFormat": "输入四个整数 $n, m, k, p$，含义详见题目描述。", "outputFormat": "第一行输出 `YES` 或 `NO`（不区分大小写，`yEs` / `No` 均可），表示是否会恰好 $p$ 个人抽到最多的记号。\n\n如果第一行输出 `YES`，接下来 $n$ 行每行输出 $x_i, y_i$，表示每个人抽到带与不带记号的纸团个数。\n\n因答案可能不唯一，本题采用 Special Judge，只要构造符合题面中的要求均视为正确。", "hint": "\n**【样例解释 #1】**\n\n样例给出了一种满足题述条件的构造。\n\n**【样例解释 #2】**\n\n不论如何，记号的分布从高到低只有三种情况：$\\{3,0,0\\}$，$\\{2,1,0\\}$，$\\{1,1,1\\}$，抽到最多记号的人数分别对应 $1$，$1$，$3$。因此无法构造 $p = 2$ 的方案。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (15 points)：$n,m \\le 8$。\n- Subtask #2 (15 points)：$n,m \\le 100$。\n- Subtask #3 (20 points)：$n,m \\le 10^5$。\n- Subtask #4 (10 points)：$p = 1$。\n- Subtask #5 (40 points)：无特殊限制。\n\n对于所有的数据，保证 $1 \\le p \\le n \\le {10}^5$，$1 \\le m \\le {10}^9$，$0 \\le k \\le n m$。", "locale": "zh-CN"}}}
{"pid": "P7108", "type": "P", "difficulty": 4, "samples": [["2\n1 2 1\n3 2 1\n", "2\n7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["数学", "贪心", "洛谷原创", "O2优化", "逆元", "洛谷月赛"], "title": "移花接木", "background": "\n遥远的圣地生长着一棵不为人知的灵树，或有万山之高。\n\n但有一日，藏匿于根系的腐朽力量爆发，灵树已无法支撑往日屹立冲天的高度。", "description": "灵树最初的形态可以看作一棵高度为 ${10}^{{10}^{{10}^{10}}}$ 的满 $a$ 叉树，高度定义为根结点到叶子结点之间的边数。\n\n受腐朽力量影响，灵树只能维持高度**恰好**为 $h$ 的满 $b$ 叉树形态。为了转换至该形态，灵树有两种魔法：\n\n- 移花：选择一条边 $u \\to v$（$u$ 是 $v$ 的父结点），移除这条边以及以 $v$ 为根的**整棵子树**。\n- 接木：选择一条边 $u \\to v$（$u$ 是 $v$ 的父结点）和一个结点 $w$（$w$ 不能是 $v$ 子树中或已移除的结点），将这条边原先 $u$ 一端**改接**到 $w$。**该魔法只能在根结点到** $\\boldsymbol{u}$ **之间的边数** $\\le 10^{10^{10}}$ **时使用。**\n\n灵树累积的魔法力量有限，它不得不用最少次数的魔法完成转换。这是个漫长的过程，即使次数最少也会显得异常大，你只需要求出最少次数对 $10^9 + 7$ 取模的结果。", "inputFormat": "输入首行给定数据组数 $T$。\n\n接下来 $T$ 行，每行包含三个整数 $a,b,h$，表示一组数据。", "outputFormat": "对于每组数据输出一行一个整数，表示该数据的答案对 $10^9 + 7$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n下为 $a=1$，$b=2$，$h=1$ 时的两步转换过程，图中高度极大的冗余子树已用省略号代替。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p32s9v96.png)\n\n可以证明，该数据的答案不可能低于 $2$。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (3 points)：$h = 0$。\n- Subtask #2 (4 points)：$a = b$。\n- Subtask #3 (8 points)：$a = 1$。\n- Subtask #4 (8 points)：$b = 1$。\n- Subtask #5 (17 points)：$h \\le 10$。\n- Subtask #6 (15 points)：$h \\le 10^6$，各测试点存在 $\\overline{a},\\overline{b}$，其数据满足 $a=\\overline{a}$，$b=\\overline{b}$。\n- Subtask #7 (15 points)：$h \\le 10^6$。\n- Subtask #8 (30 points)：无特殊限制。\n\n所有测试点（样例除外）均含有 $10^6$ 组数据，即 $T = 10^6$。请务必采用较快的 IO（输入/输出）方式。\n\n对于所有的数据，保证 $1 \\le a,b \\le 10^9$，$0 \\le h \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "移花接木", "background": "\n遥远的圣地生长着一棵不为人知的灵树，或有万山之高。\n\n但有一日，藏匿于根系的腐朽力量爆发，灵树已无法支撑往日屹立冲天的高度。", "description": "灵树最初的形态可以看作一棵高度为 ${10}^{{10}^{{10}^{10}}}$ 的满 $a$ 叉树，高度定义为根结点到叶子结点之间的边数。\n\n受腐朽力量影响，灵树只能维持高度**恰好**为 $h$ 的满 $b$ 叉树形态。为了转换至该形态，灵树有两种魔法：\n\n- 移花：选择一条边 $u \\to v$（$u$ 是 $v$ 的父结点），移除这条边以及以 $v$ 为根的**整棵子树**。\n- 接木：选择一条边 $u \\to v$（$u$ 是 $v$ 的父结点）和一个结点 $w$（$w$ 不能是 $v$ 子树中或已移除的结点），将这条边原先 $u$ 一端**改接**到 $w$。**该魔法只能在根结点到** $\\boldsymbol{u}$ **之间的边数** $\\le 10^{10^{10}}$ **时使用。**\n\n灵树累积的魔法力量有限，它不得不用最少次数的魔法完成转换。这是个漫长的过程，即使次数最少也会显得异常大，你只需要求出最少次数对 $10^9 + 7$ 取模的结果。", "inputFormat": "输入首行给定数据组数 $T$。\n\n接下来 $T$ 行，每行包含三个整数 $a,b,h$，表示一组数据。", "outputFormat": "对于每组数据输出一行一个整数，表示该数据的答案对 $10^9 + 7$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n下为 $a=1$，$b=2$，$h=1$ 时的两步转换过程，图中高度极大的冗余子树已用省略号代替。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p32s9v96.png)\n\n可以证明，该数据的答案不可能低于 $2$。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (3 points)：$h = 0$。\n- Subtask #2 (4 points)：$a = b$。\n- Subtask #3 (8 points)：$a = 1$。\n- Subtask #4 (8 points)：$b = 1$。\n- Subtask #5 (17 points)：$h \\le 10$。\n- Subtask #6 (15 points)：$h \\le 10^6$，各测试点存在 $\\overline{a},\\overline{b}$，其数据满足 $a=\\overline{a}$，$b=\\overline{b}$。\n- Subtask #7 (15 points)：$h \\le 10^6$。\n- Subtask #8 (30 points)：无特殊限制。\n\n所有测试点（样例除外）均含有 $10^6$ 组数据，即 $T = 10^6$。请务必采用较快的 IO（输入/输出）方式。\n\n对于所有的数据，保证 $1 \\le a,b \\le 10^9$，$0 \\le h \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7109", "type": "P", "difficulty": 5, "samples": [["2\n\n0\n\n1\n\n0\n", "\n? 1 1\n\n? 2 1\n\n? 1 2\n\n! 0 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["二分", "洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛"], "title": "滴水不漏", "background": "这是一道 IO 交互题。", "description": "Gnar 购买了 $n$ 个水缸，其中第 $i$ 个水缸的容积为 $i$ 且因不明原因初始装有 $a_i$（$0 \\le a_i \\le i$）单位的水。\n\n好奇的 Gnar 想知道每个水缸装有的水量，但肉眼观察显然不可行，他希望你能帮他计算解决这个难题。\n\nGnar 唯一能替你执行的操作是，由你先指定 $i, j$（$1 \\le i, j \\le n$），然后：\n\n- 若 $i \\neq j$，滴水不漏地将第 $i$ 个水缸的水往第 $j$ 个水缸倒，直到第 $i$ 个水缸的水被倒完或第 $j$ 个水缸已满。Gnar 会告诉你操作后第 $j$ 个水缸是否是满的。注意倒水的影响会**保留**而不是恢复到操作前。\n- 若 $i = j$，Gnar 做不到让一个水缸的水往自己倒，他会直接告诉你当前第 $j$ 个水缸是否是满的。\n\nGnar 只肯接受**最多** $20000$ 次操作，否则他会认为你在调戏他！\n\n你的任务是利用不超过 $20000$ 次操作 Gnar 告诉的结果，完整求出最初的 $a_1,a_2,\\ldots,a_n$。\n\n当然 Gnar 不会动手脚，你所求的 $a_1,a_2,\\ldots,a_n$ 在操作前已经存在，不随操作动态生成。", "inputFormat": "输入单个正整数水缸个数 $n$ 以开始交互。", "outputFormat": "在你确定答案后，用 `! a1 a2 ... an` 的形式输出一行以结束交互。\n\n### 交互格式\n\n交互过程中，用 `? i j` $(1 \\le i,j \\le n)$ 的形式输出一行以执行一次操作。然后你应输入一个布尔值，即操作的返回值 $x$。若 $x = 0$，表示第 $j$ 个水缸未满；若 $x = 1$，表示第 $j$ 个水缸已满。\n\n上述的所有输入都应从**标准输入**中读入，所有输出都应向**标准输出**中输出。输出一行后必须**清空缓冲区**，否则你的评测将被判为 Time Limit Exceeded。清空缓冲区方式如下：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其他语言请自行查阅文档。\n\n如果你的输出格式错误，或执行超过 $20000$ 次操作，你的评测将被判为 Wrong Answer。\n", "hint": "**【样例解释 #1】**\n\n样例示意了一种可能的交互过程。\n\n初始两个水缸中分别装有 $0,1$ 单位的水。\n\n第一次操作，由于 $i = j$，你直接得知 $x = 0$ 即第一个水缸未满。\n\n第二次操作后两个水缸装有水量分别为 $1,0$，而你得知 $x=1$ 即第一个水缸当前已满。\n\n第三次操作后两个水缸装有水量分别为 $0,1$，而你得知 $x=0$ 即第二个水缸当前未满。\n\n注意过程中确切水量并不传达给你，但是通过返回值 $x$ 你足够唯一确定 $a_1 = 0$，$a_2 = 1$。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (8 points)：$n = 2$。\n- Subtask #2 (17 points)：$n \\le 10$。\n- Subtask #3 (15 points)：$n \\le 100$。\n- Subtask #4 (15 points)：$a_i \\le 1$。\n- Subtask #5 (25 points)：$n \\le 500$。\n- Subtask #6 (20 points)：无特殊限制。\n\n对于所有的数据，保证 $2 \\le n \\le 1000$，$0 \\le a_i \\le i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "滴水不漏", "background": "这是一道 IO 交互题。", "description": "Gnar 购买了 $n$ 个水缸，其中第 $i$ 个水缸的容积为 $i$ 且因不明原因初始装有 $a_i$（$0 \\le a_i \\le i$）单位的水。\n\n好奇的 Gnar 想知道每个水缸装有的水量，但肉眼观察显然不可行，他希望你能帮他计算解决这个难题。\n\nGnar 唯一能替你执行的操作是，由你先指定 $i, j$（$1 \\le i, j \\le n$），然后：\n\n- 若 $i \\neq j$，滴水不漏地将第 $i$ 个水缸的水往第 $j$ 个水缸倒，直到第 $i$ 个水缸的水被倒完或第 $j$ 个水缸已满。Gnar 会告诉你操作后第 $j$ 个水缸是否是满的。注意倒水的影响会**保留**而不是恢复到操作前。\n- 若 $i = j$，Gnar 做不到让一个水缸的水往自己倒，他会直接告诉你当前第 $j$ 个水缸是否是满的。\n\nGnar 只肯接受**最多** $20000$ 次操作，否则他会认为你在调戏他！\n\n你的任务是利用不超过 $20000$ 次操作 Gnar 告诉的结果，完整求出最初的 $a_1,a_2,\\ldots,a_n$。\n\n当然 Gnar 不会动手脚，你所求的 $a_1,a_2,\\ldots,a_n$ 在操作前已经存在，不随操作动态生成。", "inputFormat": "输入单个正整数水缸个数 $n$ 以开始交互。", "outputFormat": "在你确定答案后，用 `! a1 a2 ... an` 的形式输出一行以结束交互。\n\n### 交互格式\n\n交互过程中，用 `? i j` $(1 \\le i,j \\le n)$ 的形式输出一行以执行一次操作。然后你应输入一个布尔值，即操作的返回值 $x$。若 $x = 0$，表示第 $j$ 个水缸未满；若 $x = 1$，表示第 $j$ 个水缸已满。\n\n上述的所有输入都应从**标准输入**中读入，所有输出都应向**标准输出**中输出。输出一行后必须**清空缓冲区**，否则你的评测将被判为 Time Limit Exceeded。清空缓冲区方式如下：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其他语言请自行查阅文档。\n\n如果你的输出格式错误，或执行超过 $20000$ 次操作，你的评测将被判为 Wrong Answer。\n", "hint": "**【样例解释 #1】**\n\n样例示意了一种可能的交互过程。\n\n初始两个水缸中分别装有 $0,1$ 单位的水。\n\n第一次操作，由于 $i = j$，你直接得知 $x = 0$ 即第一个水缸未满。\n\n第二次操作后两个水缸装有水量分别为 $1,0$，而你得知 $x=1$ 即第一个水缸当前已满。\n\n第三次操作后两个水缸装有水量分别为 $0,1$，而你得知 $x=0$ 即第二个水缸当前未满。\n\n注意过程中确切水量并不传达给你，但是通过返回值 $x$ 你足够唯一确定 $a_1 = 0$，$a_2 = 1$。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (8 points)：$n = 2$。\n- Subtask #2 (17 points)：$n \\le 10$。\n- Subtask #3 (15 points)：$n \\le 100$。\n- Subtask #4 (15 points)：$a_i \\le 1$。\n- Subtask #5 (25 points)：$n \\le 500$。\n- Subtask #6 (20 points)：无特殊限制。\n\n对于所有的数据，保证 $2 \\le n \\le 1000$，$0 \\le a_i \\le i$。", "locale": "zh-CN"}}}
{"pid": "P7110", "type": "P", "difficulty": 7, "samples": [["3 5\n1 1\n1 3\n3 2\n2 2\n3 2", "0\n1\n"], ["5 6\n1 1\n1 3\n2 2\n2 3\n2 4\n3 5", "1"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["平衡树", "洛谷原创", "O2优化", "洛谷月赛"], "title": "晚秋绝诗", "background": "", "description": "在晚秋时分观赏 L 国举世闻名的佳景——藏雾山，无不是一件惬意之事。\n\n藏雾山共有 $n$ 座山峰，从 $1$ 到 $n$ 编号。起初，$n$ 座山峰的山顶均被秋雾遮盖，因而无法辨别其高度。\n\n同时，称第 $i$ 座山峰为**间峰**，当且仅当其高度恰好是第 $i-1$ 座与第 $i + 1$ 座高度的平均值（特别地，第 $1$ 座与第 $n$ 座**不算**间峰）。藏雾山一带向来会在**部分间峰**的山底悬挂旗帜，起初所有山峰的山底均无旗帜。\n\n现有 $m$ 天，每天会发生以下之一的事件：\n\n- 雾去/雾回：第 $x$ 座山峰山顶的秋雾散去，或重新聚集。\n- 旗升/旗落：第 $x$ 座山峰山底的旗帜挂起，或被人卸下。\n- 来客：一位登山爱好者造访藏雾山欲攀登第 $x$ 座山峰，他希望能当天知晓该山峰的海拔高度。\n\n登山爱好者们将以两种方式知晓：直接观测出**未被秋雾遮盖**山峰的海拔高度，或是利用当天各山底旗帜给出的间峰信息，**尽可能地推算出其余**山峰的高度。除此之外，他们无法使用其他方式，包括但不限于与过往的来客交流分享信息等。\n\n你能求出每位登山爱好者能否知晓目标山峰的高度吗？", "inputFormat": "第一行包含两个正整数 $n$ 和 $m$，分别为藏雾山的山峰个数和事件持续的天数。\n\n接下来 $m$ 行，每行包含两个正整数 $op, x$，其中 $op \\in \\{1,2,3\\}$，具体地：\n\n- 对于 $op=1$，保证 $1 \\le x \\le n$，表示若第 $x$ 座山峰的山顶有雾，则变为无雾状态；若第 $x$ 座山峰的山顶无雾，则变为有雾状态。\n- 对于 $op=2$，保证 $2 \\le x < n$，表示若第 $x$ 座山峰的山底无旗，则变为有旗状态；若第 $x$ 座山峰的山底有旗，则变为无旗状态。\n- 对于 $op=3$，保证 $1 \\le x \\le n$，表示一位欲攀登第 $x$ 座山峰的登山爱好者造访。", "outputFormat": "输出若干行，每行一个布尔值依次表示每位登山爱好者能否知晓高度，$1$ 则能，$0$ 则不能。", "hint": "**【样例解释 #1】**\n\n在没有任何间峰信息的情况下，第一个登山爱好者不可能知晓被秋雾遮盖山峰的高度。\n\n第二个登山爱好者造访时已知山峰 $1$ 的高度、山峰 $3$ 的高度以及山峰 $2$ 为间峰，因此山峰 $2$ 的高度能通过平均值计算得到。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (7 points)：$n \\le 5$，$m \\le 10$。\n- Subtask #2 (13 points)：$n,m \\le 100$。\n- Subtask #3 (15 points)：$n,m \\le 2000$。\n- Subtask #4 (20 points)：$n,m \\le 10^5$。\n- Subtask #5 (20 points)：所有 $op = 1$ 事件在所有 $op = 2$ 事件后。\n- Subtask #6 (25 points)：无特殊限制。\n\n对于所有的数据，保证 $3 \\le n \\le 5 \\cdot 10^5$，$1 \\le m \\le 5 \\cdot 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "晚秋绝诗", "background": "", "description": "在晚秋时分观赏 L 国举世闻名的佳景——藏雾山，无不是一件惬意之事。\n\n藏雾山共有 $n$ 座山峰，从 $1$ 到 $n$ 编号。起初，$n$ 座山峰的山顶均被秋雾遮盖，因而无法辨别其高度。\n\n同时，称第 $i$ 座山峰为**间峰**，当且仅当其高度恰好是第 $i-1$ 座与第 $i + 1$ 座高度的平均值（特别地，第 $1$ 座与第 $n$ 座**不算**间峰）。藏雾山一带向来会在**部分间峰**的山底悬挂旗帜，起初所有山峰的山底均无旗帜。\n\n现有 $m$ 天，每天会发生以下之一的事件：\n\n- 雾去/雾回：第 $x$ 座山峰山顶的秋雾散去，或重新聚集。\n- 旗升/旗落：第 $x$ 座山峰山底的旗帜挂起，或被人卸下。\n- 来客：一位登山爱好者造访藏雾山欲攀登第 $x$ 座山峰，他希望能当天知晓该山峰的海拔高度。\n\n登山爱好者们将以两种方式知晓：直接观测出**未被秋雾遮盖**山峰的海拔高度，或是利用当天各山底旗帜给出的间峰信息，**尽可能地推算出其余**山峰的高度。除此之外，他们无法使用其他方式，包括但不限于与过往的来客交流分享信息等。\n\n你能求出每位登山爱好者能否知晓目标山峰的高度吗？", "inputFormat": "第一行包含两个正整数 $n$ 和 $m$，分别为藏雾山的山峰个数和事件持续的天数。\n\n接下来 $m$ 行，每行包含两个正整数 $op, x$，其中 $op \\in \\{1,2,3\\}$，具体地：\n\n- 对于 $op=1$，保证 $1 \\le x \\le n$，表示若第 $x$ 座山峰的山顶有雾，则变为无雾状态；若第 $x$ 座山峰的山顶无雾，则变为有雾状态。\n- 对于 $op=2$，保证 $2 \\le x < n$，表示若第 $x$ 座山峰的山底无旗，则变为有旗状态；若第 $x$ 座山峰的山底有旗，则变为无旗状态。\n- 对于 $op=3$，保证 $1 \\le x \\le n$，表示一位欲攀登第 $x$ 座山峰的登山爱好者造访。", "outputFormat": "输出若干行，每行一个布尔值依次表示每位登山爱好者能否知晓高度，$1$ 则能，$0$ 则不能。", "hint": "**【样例解释 #1】**\n\n在没有任何间峰信息的情况下，第一个登山爱好者不可能知晓被秋雾遮盖山峰的高度。\n\n第二个登山爱好者造访时已知山峰 $1$ 的高度、山峰 $3$ 的高度以及山峰 $2$ 为间峰，因此山峰 $2$ 的高度能通过平均值计算得到。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (7 points)：$n \\le 5$，$m \\le 10$。\n- Subtask #2 (13 points)：$n,m \\le 100$。\n- Subtask #3 (15 points)：$n,m \\le 2000$。\n- Subtask #4 (20 points)：$n,m \\le 10^5$。\n- Subtask #5 (20 points)：所有 $op = 1$ 事件在所有 $op = 2$ 事件后。\n- Subtask #6 (25 points)：无特殊限制。\n\n对于所有的数据，保证 $3 \\le n \\le 5 \\cdot 10^5$，$1 \\le m \\le 5 \\cdot 10^5$。", "locale": "zh-CN"}}}
{"pid": "P7111", "type": "P", "difficulty": 7, "samples": [["2 2\n1 1\n1 2 2\n2 0 2", "499122177\n0"], ["5 3\n12 16 3 15 9\n1 13 25\n3 10 30\n4 11 17", "743774619\n107297923\n234909256"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["洛谷原创", "O2优化", "生成函数", "分块", "洛谷月赛"], "title": "青春有悔", "background": "岁月奔波，已值青年的 Gnar 踏上了梦想与未来的征途。\n\n他终失败而归。", "description": "那是一次持续 $n$ 天的角逐，每天 Gnar 必须参加一场考试，受诸多因素影响第 $i$ 天 Gnar 理论得分上限为 $a_i$，实际他当天考试的得分为 $[0, a_i]$ 中**等概率随机的整数**（因时间不够、简单题丢分等）。$n$ 天后，官方将结算总分，并划定分数线，总分达到**分数线及以上**者方可入围。\n\n无数个“凭什么”横生于脑海，似乎每天都有发挥的缺陷。“缺陷……要是能改写过往的遗憾……”\n\n深夜，Gnar 开始了 $q$ 次幻想。每次幻想中 Gnar 重返了角逐的第 $p$ 天，以不同的状态参加考试，使当天得分变为 $[0,x]$ 中**等概率随机的整数**，其余 $n-1$ 天依旧在 $[0,a_i]$ 中随机。然而一些微妙的效应导致分数线变为了 $y$，入围的机会真能如所料高于现实吗？\n\n请你求出每次幻想中的入围概率对 $998244353$ 取模的结果。容易证明答案可以表示为最简分数 $\\frac{Q}{P}$，你输出的 $R$ 即满足 $R \\cdot P \\equiv Q \\pmod{998244353}$ 的最小非负整数。\n\n毕竟幻想，重返第 $p$ 天新的得分上限 $x$ 并不会改变现实 $a_p$ 的值，唯一萌生的只有对青春的悔恨。", "inputFormat": "第一行包含两个正整数 $n$ 和 $q$，分别为天数和幻想次数。\n\n第二行包含 $n$ 个整数 $a_1,a_2, \\ldots ,a_n$，表示现实中每天的得分上限。\n\n接下来$q$行，每行包含三个整数 $p,x,y$，分别为该次幻想的重返日期，新的得分上限以及新的分数线。", "outputFormat": "输出 $q$ 行，每行一个整数，对应每次幻想中的入围概率对 $998244353$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n第一次幻想，Gnar 重返了第一天，两天分别的得分情况在 $\\{0,0\\}$，$\\{0,1\\}$，$\\{1,0\\}$，$\\{1,1\\}$，$\\{2,0\\}$，$\\{2,1\\}$ 内等概率产生，其中只有后三种能够入围，故答案为 $\\frac{1}{2}$。\n\n第二次幻想，Gnar 重返了第二天，状态反而变差，即使拿满两天的得分上限也没机会入围。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (10 points)：$n,q,a_i,x,y \\le 100$。\n- Subtask #2 (10 points)：$n,q,a_i,x,y \\le 500$。\n- Subtask #3 (10 points)：$a_i,x \\le 1$。\n- Subtask #4 (20 points)：$\\sum a_i \\le 10^5$。\n- Subtask #5 (25 points)：$q = 1$。\n- Subtask #6 (25 points)：无特殊限制。\n\n对于所有的数据，保证 $1 \\le n,q \\le 10^5$，$1 \\le p \\le n$，$0 \\le a_i,x,y \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "青春有悔", "background": "岁月奔波，已值青年的 Gnar 踏上了梦想与未来的征途。\n\n他终失败而归。", "description": "那是一次持续 $n$ 天的角逐，每天 Gnar 必须参加一场考试，受诸多因素影响第 $i$ 天 Gnar 理论得分上限为 $a_i$，实际他当天考试的得分为 $[0, a_i]$ 中**等概率随机的整数**（因时间不够、简单题丢分等）。$n$ 天后，官方将结算总分，并划定分数线，总分达到**分数线及以上**者方可入围。\n\n无数个“凭什么”横生于脑海，似乎每天都有发挥的缺陷。“缺陷……要是能改写过往的遗憾……”\n\n深夜，Gnar 开始了 $q$ 次幻想。每次幻想中 Gnar 重返了角逐的第 $p$ 天，以不同的状态参加考试，使当天得分变为 $[0,x]$ 中**等概率随机的整数**，其余 $n-1$ 天依旧在 $[0,a_i]$ 中随机。然而一些微妙的效应导致分数线变为了 $y$，入围的机会真能如所料高于现实吗？\n\n请你求出每次幻想中的入围概率对 $998244353$ 取模的结果。容易证明答案可以表示为最简分数 $\\frac{Q}{P}$，你输出的 $R$ 即满足 $R \\cdot P \\equiv Q \\pmod{998244353}$ 的最小非负整数。\n\n毕竟幻想，重返第 $p$ 天新的得分上限 $x$ 并不会改变现实 $a_p$ 的值，唯一萌生的只有对青春的悔恨。", "inputFormat": "第一行包含两个正整数 $n$ 和 $q$，分别为天数和幻想次数。\n\n第二行包含 $n$ 个整数 $a_1,a_2, \\ldots ,a_n$，表示现实中每天的得分上限。\n\n接下来$q$行，每行包含三个整数 $p,x,y$，分别为该次幻想的重返日期，新的得分上限以及新的分数线。", "outputFormat": "输出 $q$ 行，每行一个整数，对应每次幻想中的入围概率对 $998244353$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n第一次幻想，Gnar 重返了第一天，两天分别的得分情况在 $\\{0,0\\}$，$\\{0,1\\}$，$\\{1,0\\}$，$\\{1,1\\}$，$\\{2,0\\}$，$\\{2,1\\}$ 内等概率产生，其中只有后三种能够入围，故答案为 $\\frac{1}{2}$。\n\n第二次幻想，Gnar 重返了第二天，状态反而变差，即使拿满两天的得分上限也没机会入围。\n\n----\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。\n\n- Subtask #1 (10 points)：$n,q,a_i,x,y \\le 100$。\n- Subtask #2 (10 points)：$n,q,a_i,x,y \\le 500$。\n- Subtask #3 (10 points)：$a_i,x \\le 1$。\n- Subtask #4 (20 points)：$\\sum a_i \\le 10^5$。\n- Subtask #5 (25 points)：$q = 1$。\n- Subtask #6 (25 points)：无特殊限制。\n\n对于所有的数据，保证 $1 \\le n,q \\le 10^5$，$1 \\le p \\le n$，$0 \\le a_i,x,y \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P7112", "type": "P", "difficulty": 5, "samples": [["2 998244353\n1 4\n1 5", "1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "线性代数", "高斯消元", "行列式", "模板题"], "title": "【模板】行列式求值", "background": "模板题，无背景。", "description": "给定一个 $n$ 阶行列式 $A$，求 $|A|$。结果对 $p$ 取模。", "inputFormat": "第一行两个正整数 $n$ 和 $p$。\n\n接下来共 $n$ 行，第 $i+1$ 行 $n$ 个正整数，其中第 $j$ 个表示 $A_{i,j}$。", "outputFormat": "输出 $|A|$ 在模 $p$ 意义下的最小自然数值。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 600$，$1\\le a_{i,j}< 10^9+7$，$1\\le p\\le 10^9+7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】行列式求值", "background": "模板题，无背景。", "description": "给定一个 $n$ 阶行列式 $A$，求 $|A|$。结果对 $p$ 取模。", "inputFormat": "第一行两个正整数 $n$ 和 $p$。\n\n接下来共 $n$ 行，第 $i+1$ 行 $n$ 个正整数，其中第 $j$ 个表示 $A_{i,j}$。", "outputFormat": "输出 $|A|$ 在模 $p$ 意义下的最小自然数值。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 600$，$1\\le a_{i,j}< 10^9+7$，$1\\le p\\le 10^9+7$。", "locale": "zh-CN"}}}
{"pid": "P7113", "type": "P", "difficulty": 3, "samples": [["5 1\n3 2 3 5\n2 4 5\n2 5 4\n0\n0\n", "1 3\n2 3\n"], ["见附件中的 water/water2.in", "见附件中的 water/water2.ans"], ["见附件中的 water/water3.in", "见附件中的 water/water3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "高精度", "2020", "NOIP 提高组", "拓扑排序"], "title": "[NOIP2020] 排水系统", "background": "", "description": "对于一个城市来说，排水系统是极其重要的一个部分。\n\n有一天，小 C 拿到了某座城市排水系统的设计图。排水系统由 $n$ 个排水结点（它们从 $1 \\sim n$ 编号）和若干个单向排水管道构成。每一个排水结点有若干个管道用于汇集其他排水结点的污水（简称为该结点的汇集管道），也有若干个管道向其他的排水结点排出污水（简称为该结点的排出管道）。\n\n排水系统的结点中有 $m$ 个污水接收口，它们的编号分别为 $1, 2, \\ldots , m$，污水只能从这些接收口流入排水系统，并且这些结点没有汇集管道。排水系统中还有若干个最终排水口，它们将污水运送到污水处理厂，没有排出管道的结点便可视为一个最终排水口。\n\n现在各个污水接收口分别都接收了 $1$ 吨污水，污水进入每个结点后，会均等地从当前结点的每一个排出管道流向其他排水结点，而最终排水口将把污水排出系统。\n\n现在小 C 想知道，在该城市的排水系统中，每个最终排水口会排出多少污水。该城市的排水系统设计科学，管道不会形成回路，即不会发生污水形成环流的情况。", "inputFormat": "第一个两个用单个空格分隔的整数 $n, m$。分别表示排水结点数与接收口数量。  \n接下来 $n$ 行，第 $i$ 行用于描述结点 $i$ 的所有排出管道。其中每行第一个整数 $d_i$ 表示其排出管道的数量，接下来 $d_i$ 个用单个空格分隔的整数 $a_1, a_2, \\ldots , a_{d_i}$ 依次表示管道的目标排水结点。  \n保证不会出现两条起始结点与目标结点均相同的管道。", "outputFormat": "输出若干行，按照编号从小到大的顺序，给出每个最终排水口排出的污水体积。其中体积使用分数形式进行输出，即每行输出两个用单个空格分隔的整数 $p$，$q$，表示排出的污水体积为 $\\frac{p}{q}$。要求 $p$ 与 $q$ 互素，$q = 1$ 时也需要输出 $q$。", "hint": "**【样例 #1 解释】**\n\n$1$ 号结点是接收口，$4, 5$ 号结点没有排出管道，因此是最终排水口。  \n$1$ 吨污水流入 $1$ 号结点后，均等地流向 $2, 3, 5$ 号结点，三个结点各流入 $\\frac{1}{3}$ 吨污水。  \n$2$ 号结点流入的 $\\frac{1}{3}$ 吨污水将均等地流向 $4, 5$ 号结点，两结点各流入 $\\frac{1}{6}$ 吨污水。  \n$3$ 号结点流入的 $\\frac{1}{3}$ 吨污水将均等地流向 $4, 5$ 号结点，两结点各流入 $\\frac{1}{6}$ 吨污水。  \n最终，$4$ 号结点排出 $\\frac{1}{6} + \\frac{1}{6} = \\frac{1}{3}$ 吨污水，$5$ 号结点排出 $\\frac{1}{3} + \\frac{1}{6} + \\frac{1}{6} = \\frac{2}{3}$ 吨污水。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $m \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $10$ | $1$ |\n| $4 \\sim 6$ | ${10}^3$ | $1$ |\n| $7 \\sim 8$ | ${10}^5$ | $1$ |\n| $9 \\sim 10$ | ${10}^5$ | $10$ |\n\n对于全部的测试点，保证 $1 \\le n \\le {10}^5$，$1 \\le m \\le 10$，$0 \\le d_i \\le 5$。\n\n数据保证，污水在从一个接收口流向一个最终排水口的过程中，不会经过超过 $10$ 个中间排水结点（即接收口和最终排水口不算在内）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOIP2020] 排水系统", "background": "", "description": "对于一个城市来说，排水系统是极其重要的一个部分。\n\n有一天，小 C 拿到了某座城市排水系统的设计图。排水系统由 $n$ 个排水结点（它们从 $1 \\sim n$ 编号）和若干个单向排水管道构成。每一个排水结点有若干个管道用于汇集其他排水结点的污水（简称为该结点的汇集管道），也有若干个管道向其他的排水结点排出污水（简称为该结点的排出管道）。\n\n排水系统的结点中有 $m$ 个污水接收口，它们的编号分别为 $1, 2, \\ldots , m$，污水只能从这些接收口流入排水系统，并且这些结点没有汇集管道。排水系统中还有若干个最终排水口，它们将污水运送到污水处理厂，没有排出管道的结点便可视为一个最终排水口。\n\n现在各个污水接收口分别都接收了 $1$ 吨污水，污水进入每个结点后，会均等地从当前结点的每一个排出管道流向其他排水结点，而最终排水口将把污水排出系统。\n\n现在小 C 想知道，在该城市的排水系统中，每个最终排水口会排出多少污水。该城市的排水系统设计科学，管道不会形成回路，即不会发生污水形成环流的情况。", "inputFormat": "第一个两个用单个空格分隔的整数 $n, m$。分别表示排水结点数与接收口数量。  \n接下来 $n$ 行，第 $i$ 行用于描述结点 $i$ 的所有排出管道。其中每行第一个整数 $d_i$ 表示其排出管道的数量，接下来 $d_i$ 个用单个空格分隔的整数 $a_1, a_2, \\ldots , a_{d_i}$ 依次表示管道的目标排水结点。  \n保证不会出现两条起始结点与目标结点均相同的管道。", "outputFormat": "输出若干行，按照编号从小到大的顺序，给出每个最终排水口排出的污水体积。其中体积使用分数形式进行输出，即每行输出两个用单个空格分隔的整数 $p$，$q$，表示排出的污水体积为 $\\frac{p}{q}$。要求 $p$ 与 $q$ 互素，$q = 1$ 时也需要输出 $q$。", "hint": "**【样例 #1 解释】**\n\n$1$ 号结点是接收口，$4, 5$ 号结点没有排出管道，因此是最终排水口。  \n$1$ 吨污水流入 $1$ 号结点后，均等地流向 $2, 3, 5$ 号结点，三个结点各流入 $\\frac{1}{3}$ 吨污水。  \n$2$ 号结点流入的 $\\frac{1}{3}$ 吨污水将均等地流向 $4, 5$ 号结点，两结点各流入 $\\frac{1}{6}$ 吨污水。  \n$3$ 号结点流入的 $\\frac{1}{3}$ 吨污水将均等地流向 $4, 5$ 号结点，两结点各流入 $\\frac{1}{6}$ 吨污水。  \n最终，$4$ 号结点排出 $\\frac{1}{6} + \\frac{1}{6} = \\frac{1}{3}$ 吨污水，$5$ 号结点排出 $\\frac{1}{3} + \\frac{1}{6} + \\frac{1}{6} = \\frac{2}{3}$ 吨污水。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $m \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $10$ | $1$ |\n| $4 \\sim 6$ | ${10}^3$ | $1$ |\n| $7 \\sim 8$ | ${10}^5$ | $1$ |\n| $9 \\sim 10$ | ${10}^5$ | $10$ |\n\n对于全部的测试点，保证 $1 \\le n \\le {10}^5$，$1 \\le m \\le 10$，$0 \\le d_i \\le 5$。\n\n数据保证，污水在从一个接收口流向一个最终排水口的过程中，不会经过超过 $10$ 个中间排水结点（即接收口和最终排水口不算在内）。", "locale": "zh-CN"}}}
{"pid": "P7114", "type": "P", "difficulty": 5, "samples": [["3\nnnrnnr\nzzzaab\nmmlmmlo\n", "8\n9\n16\n"], ["5\nkkkkkkkkkkkkkkkkkkkk\nlllllllllllllrrlllrr\ncccccccccccccxcxxxcc\nccccccccccccccaababa\nggggggggggggggbaabab\n", "156\n138\n138\n147\n194\n"], ["见附件中的 string/string3.in", "见附件中的 string/string3.ans"], ["见附件中的 string/string4.in", "见附件中的 string/string4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "2020", "倍增", "树状数组", "NOIP 提高组", "哈希 hashing", "调和级数", "Z 函数"], "title": "[NOIP2020] 字符串匹配", "background": "", "description": "小 C 学习完了字符串匹配的相关内容，现在他正在做一道习题。\n\n对于一个字符串 $S$，题目要求他找到 $S$ 的所有具有下列形式的拆分方案数：\n\n$S = ABC$，$S = ABABC$，$S = ABAB \\ldots ABC$，其中 $A$，$B$，$C$ 均是非空字符串，且 $A$ 中出现奇数次的字符数量不超过 $C$ 中出现奇数次的字符数量。\n\n更具体地，我们可以定义 $AB$ 表示两个字符串 $A$，$B$ 相连接，例如 $A = \\texttt{aab}$，$B = \\texttt{ab}$，则 $AB = \\texttt{aabab}$。\n\n并递归地定义 $A^1=A$，$A^n = A^{n - 1} A$（$n \\ge 2$ 且为正整数）。例如 $A = \\texttt{abb}$，则 $A^3=\\texttt{abbabbabb}$。\n\n则小 C 的习题是求 $S = {(AB)}^iC$ 的方案数，其中 $F(A) \\le F(C)$，$F(S)$ 表示字符串 $S$ 中出现奇数次的字符的数量。两种方案不同当且仅当拆分出的 $A$、$B$、$C$ 中有至少一个字符串不同。\n\n小 C 并不会做这道题，只好向你求助，请你帮帮他。", "inputFormat": "本题有多组数据，输入文件第一行一个正整数 $T$ 表示数据组数。\n\n每组数据仅一行一个字符串 $S$，意义见题目描述。$S$ 仅由英文小写字母构成。", "outputFormat": "对于每组数据输出一行一个整数表示答案。", "hint": "**【样例 #1 解释】**\n\n对于第一组数据，所有的方案为\n\n1. $A=\\texttt{n}$，$B=\\texttt{nr}$，$C=\\texttt{nnr}$。\n2. $A=\\texttt{n}$，$B=\\texttt{nrn}$，$C=\\texttt{nr}$。\n3. $A=\\texttt{n}$，$B=\\texttt{nrnn}$，$C=\\texttt{r}$。\n4. $A=\\texttt{nn}$，$B=\\texttt{r}$，$C=\\texttt{nnr}$。\n5. $A=\\texttt{nn}$，$B=\\texttt{rn}$，$C=\\texttt{nr}$。\n6. $A=\\texttt{nn}$，$B=\\texttt{rnn}$，$C=\\texttt{r}$。\n7. $A=\\texttt{nnr}$，$B=\\texttt{n}$，$C=\\texttt{nr}$。\n8. $A=\\texttt{nnr}$，$B=\\texttt{nn}$，$C=\\texttt{r}$。\n\n**【数据范围】**\n\n| 测试点编号 | $\\lvert S \\rvert \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 4$ | $10$ | 无 |\n| $5 \\sim 8$ | $100$ | 无 |\n| $9 \\sim 12$ | $1000$ | 无 |\n| $13 \\sim 14$ | $2^{15}$ | $S$ 中只包含一种字符 |\n| $15 \\sim 17$ | $2^{16}$ | $S$ 中只包含两种字符 |\n| $18 \\sim 21$ | $2^{17}$ | 无 |\n| $22 \\sim 25$ | $2^{20}$ | 无 |\n\n对于所有测试点，保证 $1 \\le T \\le 5$，$1 \\le |S| \\le 2^{20}$。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOIP2020] 字符串匹配", "background": "", "description": "小 C 学习完了字符串匹配的相关内容，现在他正在做一道习题。\n\n对于一个字符串 $S$，题目要求他找到 $S$ 的所有具有下列形式的拆分方案数：\n\n$S = ABC$，$S = ABABC$，$S = ABAB \\ldots ABC$，其中 $A$，$B$，$C$ 均是非空字符串，且 $A$ 中出现奇数次的字符数量不超过 $C$ 中出现奇数次的字符数量。\n\n更具体地，我们可以定义 $AB$ 表示两个字符串 $A$，$B$ 相连接，例如 $A = \\texttt{aab}$，$B = \\texttt{ab}$，则 $AB = \\texttt{aabab}$。\n\n并递归地定义 $A^1=A$，$A^n = A^{n - 1} A$（$n \\ge 2$ 且为正整数）。例如 $A = \\texttt{abb}$，则 $A^3=\\texttt{abbabbabb}$。\n\n则小 C 的习题是求 $S = {(AB)}^iC$ 的方案数，其中 $F(A) \\le F(C)$，$F(S)$ 表示字符串 $S$ 中出现奇数次的字符的数量。两种方案不同当且仅当拆分出的 $A$、$B$、$C$ 中有至少一个字符串不同。\n\n小 C 并不会做这道题，只好向你求助，请你帮帮他。", "inputFormat": "本题有多组数据，输入文件第一行一个正整数 $T$ 表示数据组数。\n\n每组数据仅一行一个字符串 $S$，意义见题目描述。$S$ 仅由英文小写字母构成。", "outputFormat": "对于每组数据输出一行一个整数表示答案。", "hint": "**【样例 #1 解释】**\n\n对于第一组数据，所有的方案为\n\n1. $A=\\texttt{n}$，$B=\\texttt{nr}$，$C=\\texttt{nnr}$。\n2. $A=\\texttt{n}$，$B=\\texttt{nrn}$，$C=\\texttt{nr}$。\n3. $A=\\texttt{n}$，$B=\\texttt{nrnn}$，$C=\\texttt{r}$。\n4. $A=\\texttt{nn}$，$B=\\texttt{r}$，$C=\\texttt{nnr}$。\n5. $A=\\texttt{nn}$，$B=\\texttt{rn}$，$C=\\texttt{nr}$。\n6. $A=\\texttt{nn}$，$B=\\texttt{rnn}$，$C=\\texttt{r}$。\n7. $A=\\texttt{nnr}$，$B=\\texttt{n}$，$C=\\texttt{nr}$。\n8. $A=\\texttt{nnr}$，$B=\\texttt{nn}$，$C=\\texttt{r}$。\n\n**【数据范围】**\n\n| 测试点编号 | $\\lvert S \\rvert \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 4$ | $10$ | 无 |\n| $5 \\sim 8$ | $100$ | 无 |\n| $9 \\sim 12$ | $1000$ | 无 |\n| $13 \\sim 14$ | $2^{15}$ | $S$ 中只包含一种字符 |\n| $15 \\sim 17$ | $2^{16}$ | $S$ 中只包含两种字符 |\n| $18 \\sim 21$ | $2^{17}$ | 无 |\n| $22 \\sim 25$ | $2^{20}$ | 无 |\n\n对于所有测试点，保证 $1 \\le T \\le 5$，$1 \\le |S| \\le 2^{20}$。 ", "locale": "zh-CN"}}}
{"pid": "P7115", "type": "P", "difficulty": 6, "samples": [["2 3\n1 1 2\n2 1 2\n", "6\n1 3\n2 3\n2 3\n3 1\n3 2\n3 2\n"], ["见附件中的 ball/ball2.in", "见附件中的 ball/ball2.ans"], ["见附件中的 ball/ball3.in", "见附件中的 ball/ball3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "NOIP 提高组", "Special Judge", "分治", "构造", "Ad-hoc"], "title": "[NOIP2020] 移球游戏", "background": "", "description": "小 C 正在玩一个移球游戏，他面前有 $n + 1$ 根柱子，柱子从 $1 \\sim n + 1$ 编号，其中 $1$ 号柱子、$2$ 号柱子、……、$n$ 号柱子上各有 $m$ 个球，它们自底向上放置在柱子上，$n + 1$ 号柱子上初始时没有球。这 $n \\times m$ 个球共有 $n$ 种颜色，每种颜色的球各 $m$ 个。\n\n初始时一根柱子上的球可能是五颜六色的，而小 C 的任务是将所有同种颜色的球移到同一根柱子上，这是唯一的目标，而每种颜色的球最后放置在哪根柱子则没有限制。\n\n小 C 可以通过若干次操作完成这个目标，一次操作能将一个球从一根柱子移到另一根柱子上。更具体地，将 $x$ 号柱子上的球移动到 $y$ 号柱子上的要求为：\n\n1. $x$ 号柱子上至少有一个球；\n2. $y$ 号柱子上至多有 $m - 1$ 个球；\n3. 只能将 $x$ 号柱子最上方的球移到 $y$ 号柱子的最上方。\n\n小 C 的目标并不难完成，因此他决定给自己加加难度：在完成目标的基础上，使用的操作次数不能超过 $820000$。换句话说，小 C 需要使用至多 $820000$ 次操作完成目标。\n\n小 C 被难住了，但他相信难不倒你，请你给出一个操作方案完成小 C 的目标。合法的方案可能有多种，你只需要给出任意一种，题目保证一定存在一个合法方案。", "inputFormat": "第一行两个用空格分隔的整数 $n, m$。分别表示球的颜色数、每种颜色球的个数。  \n接下来 $n$ 行每行 $m$ 个用单个空格分隔的整数，第 $i$ 行的整数按自底向上的顺序依次给出了 $i$ 号柱子上的球的颜色。", "outputFormat": "本题采用自定义校验器（special judge）评测。  \n你的输出的第一行应该仅包含单个整数 $k$，表示你的方案的操作次数。你应保证 $0 \\le k \\le 820000$。  \n接下来 $k$ 行每行你应输出两个用单个空格分隔的正整数 $x, y$，表示这次操作将 $x$ 号柱子最上方的球移动到 $y$ 号柱子最上方。你应保证 $1 \\le x, y \\le n + 1$ 且 $x \\ne y$。", "hint": "**【样例 #1 解释】**\n\n柱子中的内容为：按自底向上的顺序依次给出柱子上每个球的颜色。\n\n| 操作 | $1$ 号柱子 | $2$ 号柱子 | $3$ 号柱子 |\n|:-:|:-:|:-:|:-:|\n| 初始 | $1\\ 1\\ 2$ | $2\\ 1\\ 2$ | |\n| $1\\ 3$ | $1\\ 1$ | $2\\ 1\\ 2$ | $2$ |\n| $2\\ 3$ | $1\\ 1$ | $2\\ 1$ | $2\\ 2$ |\n| $2\\ 3$ | $1\\ 1$ | $2$ | $2\\ 2\\ 1$ |\n| $3\\ 1$ | $1\\ 1\\ 1$ | $2$ | $2\\ 2$ |\n| $3\\ 2$ | $1\\ 1\\ 1$ | $2\\ 2$ | $2$ |\n| $3\\ 2$ | $1\\ 1\\ 1$ | $2\\ 2\\ 2$ | |\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $m \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $2$ | $20$ |\n| $3 \\sim 5$ | $10$ | $20$ |\n| $6 \\sim 8$ | $50$ | $85$ |\n| $9 \\sim 14$ | $50$ | $300$ |\n| $15 \\sim 20$ | $50$ | $400$ |\n\n对于所有测试点，保证 $2 \\le n \\le 50$，$2 \\le m \\le 400$。\n\n**【校验器】**\n\n为了方便选手测试，在附件中的 `ball` 目录下我们下发了 `checker.cpp` 文件，选手可以编译该程序，并使用它校验自己的输出文件。但请注意它与最终评测时所使用的校验器并不完全一致。你也不需要关心其代码的具体内容。\n\n编译命令为：`g++ checker.cpp −o checker -std=c++11`。\n\n`checker` 的使用方式为：`checker <inputfile> <outputfile>`，参数依次表示输入文件与你的输出文件。\n\n若你输出的数字大小范围不合法，则校验器会给出相应提示。若你的输出数字大小范围正确，但方案错误，则校验器会给出简要的错误信息：\n\n1. `A x`，表示进行到第 $x$ 个操作时不合法。\n2. `B x`，表示操作执行完毕后第 $x$ 个柱子上的球不合法。\n\n若你的方案正确，校验器会给出 `OK`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOIP2020] 移球游戏", "background": "", "description": "小 C 正在玩一个移球游戏，他面前有 $n + 1$ 根柱子，柱子从 $1 \\sim n + 1$ 编号，其中 $1$ 号柱子、$2$ 号柱子、……、$n$ 号柱子上各有 $m$ 个球，它们自底向上放置在柱子上，$n + 1$ 号柱子上初始时没有球。这 $n \\times m$ 个球共有 $n$ 种颜色，每种颜色的球各 $m$ 个。\n\n初始时一根柱子上的球可能是五颜六色的，而小 C 的任务是将所有同种颜色的球移到同一根柱子上，这是唯一的目标，而每种颜色的球最后放置在哪根柱子则没有限制。\n\n小 C 可以通过若干次操作完成这个目标，一次操作能将一个球从一根柱子移到另一根柱子上。更具体地，将 $x$ 号柱子上的球移动到 $y$ 号柱子上的要求为：\n\n1. $x$ 号柱子上至少有一个球；\n2. $y$ 号柱子上至多有 $m - 1$ 个球；\n3. 只能将 $x$ 号柱子最上方的球移到 $y$ 号柱子的最上方。\n\n小 C 的目标并不难完成，因此他决定给自己加加难度：在完成目标的基础上，使用的操作次数不能超过 $820000$。换句话说，小 C 需要使用至多 $820000$ 次操作完成目标。\n\n小 C 被难住了，但他相信难不倒你，请你给出一个操作方案完成小 C 的目标。合法的方案可能有多种，你只需要给出任意一种，题目保证一定存在一个合法方案。", "inputFormat": "第一行两个用空格分隔的整数 $n, m$。分别表示球的颜色数、每种颜色球的个数。  \n接下来 $n$ 行每行 $m$ 个用单个空格分隔的整数，第 $i$ 行的整数按自底向上的顺序依次给出了 $i$ 号柱子上的球的颜色。", "outputFormat": "本题采用自定义校验器（special judge）评测。  \n你的输出的第一行应该仅包含单个整数 $k$，表示你的方案的操作次数。你应保证 $0 \\le k \\le 820000$。  \n接下来 $k$ 行每行你应输出两个用单个空格分隔的正整数 $x, y$，表示这次操作将 $x$ 号柱子最上方的球移动到 $y$ 号柱子最上方。你应保证 $1 \\le x, y \\le n + 1$ 且 $x \\ne y$。", "hint": "**【样例 #1 解释】**\n\n柱子中的内容为：按自底向上的顺序依次给出柱子上每个球的颜色。\n\n| 操作 | $1$ 号柱子 | $2$ 号柱子 | $3$ 号柱子 |\n|:-:|:-:|:-:|:-:|\n| 初始 | $1\\ 1\\ 2$ | $2\\ 1\\ 2$ | |\n| $1\\ 3$ | $1\\ 1$ | $2\\ 1\\ 2$ | $2$ |\n| $2\\ 3$ | $1\\ 1$ | $2\\ 1$ | $2\\ 2$ |\n| $2\\ 3$ | $1\\ 1$ | $2$ | $2\\ 2\\ 1$ |\n| $3\\ 1$ | $1\\ 1\\ 1$ | $2$ | $2\\ 2$ |\n| $3\\ 2$ | $1\\ 1\\ 1$ | $2\\ 2$ | $2$ |\n| $3\\ 2$ | $1\\ 1\\ 1$ | $2\\ 2\\ 2$ | |\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $m \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $2$ | $20$ |\n| $3 \\sim 5$ | $10$ | $20$ |\n| $6 \\sim 8$ | $50$ | $85$ |\n| $9 \\sim 14$ | $50$ | $300$ |\n| $15 \\sim 20$ | $50$ | $400$ |\n\n对于所有测试点，保证 $2 \\le n \\le 50$，$2 \\le m \\le 400$。\n\n**【校验器】**\n\n为了方便选手测试，在附件中的 `ball` 目录下我们下发了 `checker.cpp` 文件，选手可以编译该程序，并使用它校验自己的输出文件。但请注意它与最终评测时所使用的校验器并不完全一致。你也不需要关心其代码的具体内容。\n\n编译命令为：`g++ checker.cpp −o checker -std=c++11`。\n\n`checker` 的使用方式为：`checker <inputfile> <outputfile>`，参数依次表示输入文件与你的输出文件。\n\n若你输出的数字大小范围不合法，则校验器会给出相应提示。若你的输出数字大小范围正确，但方案错误，则校验器会给出简要的错误信息：\n\n1. `A x`，表示进行到第 $x$ 个操作时不合法。\n2. `B x`，表示操作执行完毕后第 $x$ 个柱子上的球不合法。\n\n若你的方案正确，校验器会给出 `OK`。", "locale": "zh-CN"}}}
{"pid": "P7116", "type": "P", "difficulty": 6, "samples": [["3 2\n3 3\n1 1\n2 -1\n1 1\n", "21\n"], ["5 4\n6 8 6 5\n3 1\n2 1\n1 1\n2 1\n2 -1\n", "10265\n"], ["见附件中的 walk/walk3.in", "见附件中的 walk/walk3.ans"], ["见附件中的 walk/walk4.in", "见附件中的 walk/walk4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2020", "NOIP 提高组", "拉格朗日插值法"], "title": "[NOIP2020] 微信步数", "background": "", "description": "小 C 喜欢跑步，并且非常喜欢在微信步数排行榜上刷榜，为此他制定了一个刷微信步数的计划。\n\n他来到了一处空旷的场地，处于该场地中的人可以用 $k$ 维整数坐标 $(a_1, a_2, \\ldots , a_k)$ 来表示其位置。场地有大小限制，第 $i$ 维的大小为 $w_i$，因此处于场地中的人其坐标应满足 $1 \\le a_i \\le w_i$（$1 \\le i \\le k$）。\n\n小 C 打算在接下来的 $P = w_1 \\times w_2 \\times \\cdots \\times w_k$ 天中，每天从场地中一个新的位置出发，开始他的刷步数计划（换句话说，他将会从场地中每个位置都出发一次进行计划）。\n\n他的计划非常简单，每天按照事先规定好的路线行进，每天的路线由 $n$ 步移动构成，每一步可以用 $c_i$ 与 $d_i$ 表示：若他当前位于 $(a_1, a_2, \\ldots , a_{c_i}, \\ldots, a_k)$，则这一步他将会走到 $(a_1, a_2, \\ldots , a_{c_i} + d_i, \\ldots , a_k)$，其中 $1 \\le c_i \\le k$，$d_i \\in \\{-1, 1\\}$。小 C 将会不断重复这个路线，直到他走出了场地的范围才结束一天的计划。（即走完第 $n$ 步后，若小 C 还在场内，他将回到第 $1$ 步从头再走一遍）。\n\n小 C 对自己的速度非常有自信，所以他并不在意具体耗费的时间，他只想知道 $P$ 天之后，他一共刷出了多少步微信步数。请你帮他算一算。", "inputFormat": "第一行两个用单个空格分隔的整数 $n, k$。分别表示路线步数与场地维数。  \n接下来一行 $k$ 个用单个空格分隔的整数 $w_i$，表示场地大小。  \n接下来 $n$ 行每行两个用单个空格分隔的整数 $c_i, d_i$，依次表示每一步的方向，具体意义见题目描述。", "outputFormat": "仅一行一个整数表示答案。答案可能很大，你只需要输出其对 ${10}^9 + 7$ 取模后的值。  \n若小 C 的计划会使得他在某一天在场地中永远走不出来，则输出一行一个整数 $-1$。", "hint": "**【样例 #1 解释】**\n\n从 $(1, 1)$ 出发将走 $2$ 步，从 $(1, 2)$ 出发将走 $4$ 步，从 $(1, 3)$ 出发将走 $4$ 步。  \n从 $(2, 1)$ 出发将走 $2$ 步，从 $(2, 2)$ 出发将走 $3$ 步，从 $(2, 3)$ 出发将走 $3$ 步。  \n从 $(3, 1)$ 出发将走 $1$ 步，从 $(3, 2)$ 出发将走 $1$ 步，从 $(3, 3)$ 出发将走 $1$ 步。  \n共计 $21$ 步。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $k \\le$ | $w_i \\le$ |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 3$ | $5$ | $5$ | $3$ |\n| $4 \\sim 6$ | $100$ | $3$ | $10$ |\n| $7 \\sim 8$ | ${10}^5$ | $1$ | ${10}^5$ |\n| $9 \\sim 12$ | ${10}^5$ | $2$ | ${10}^6$ |\n| $13 \\sim 16$ | $5 \\times {10}^5$ | $10$ | ${10}^6$ |\n| $17 \\sim 20$ | $5 \\times {10}^5$ | $3$ | ${10}^9$ |\n\n对于所有测试点，保证 $1 \\le n \\le 5 \\times {10}^5$，$1 \\le k \\le 10$，$1 \\le w_i \\le {10}^9$，$d_i \\in \\{-1, 1\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOIP2020] 微信步数", "background": "", "description": "小 C 喜欢跑步，并且非常喜欢在微信步数排行榜上刷榜，为此他制定了一个刷微信步数的计划。\n\n他来到了一处空旷的场地，处于该场地中的人可以用 $k$ 维整数坐标 $(a_1, a_2, \\ldots , a_k)$ 来表示其位置。场地有大小限制，第 $i$ 维的大小为 $w_i$，因此处于场地中的人其坐标应满足 $1 \\le a_i \\le w_i$（$1 \\le i \\le k$）。\n\n小 C 打算在接下来的 $P = w_1 \\times w_2 \\times \\cdots \\times w_k$ 天中，每天从场地中一个新的位置出发，开始他的刷步数计划（换句话说，他将会从场地中每个位置都出发一次进行计划）。\n\n他的计划非常简单，每天按照事先规定好的路线行进，每天的路线由 $n$ 步移动构成，每一步可以用 $c_i$ 与 $d_i$ 表示：若他当前位于 $(a_1, a_2, \\ldots , a_{c_i}, \\ldots, a_k)$，则这一步他将会走到 $(a_1, a_2, \\ldots , a_{c_i} + d_i, \\ldots , a_k)$，其中 $1 \\le c_i \\le k$，$d_i \\in \\{-1, 1\\}$。小 C 将会不断重复这个路线，直到他走出了场地的范围才结束一天的计划。（即走完第 $n$ 步后，若小 C 还在场内，他将回到第 $1$ 步从头再走一遍）。\n\n小 C 对自己的速度非常有自信，所以他并不在意具体耗费的时间，他只想知道 $P$ 天之后，他一共刷出了多少步微信步数。请你帮他算一算。", "inputFormat": "第一行两个用单个空格分隔的整数 $n, k$。分别表示路线步数与场地维数。  \n接下来一行 $k$ 个用单个空格分隔的整数 $w_i$，表示场地大小。  \n接下来 $n$ 行每行两个用单个空格分隔的整数 $c_i, d_i$，依次表示每一步的方向，具体意义见题目描述。", "outputFormat": "仅一行一个整数表示答案。答案可能很大，你只需要输出其对 ${10}^9 + 7$ 取模后的值。  \n若小 C 的计划会使得他在某一天在场地中永远走不出来，则输出一行一个整数 $-1$。", "hint": "**【样例 #1 解释】**\n\n从 $(1, 1)$ 出发将走 $2$ 步，从 $(1, 2)$ 出发将走 $4$ 步，从 $(1, 3)$ 出发将走 $4$ 步。  \n从 $(2, 1)$ 出发将走 $2$ 步，从 $(2, 2)$ 出发将走 $3$ 步，从 $(2, 3)$ 出发将走 $3$ 步。  \n从 $(3, 1)$ 出发将走 $1$ 步，从 $(3, 2)$ 出发将走 $1$ 步，从 $(3, 3)$ 出发将走 $1$ 步。  \n共计 $21$ 步。\n\n**【数据范围】**\n\n| 测试点编号 | $n \\le$ | $k \\le$ | $w_i \\le$ |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 3$ | $5$ | $5$ | $3$ |\n| $4 \\sim 6$ | $100$ | $3$ | $10$ |\n| $7 \\sim 8$ | ${10}^5$ | $1$ | ${10}^5$ |\n| $9 \\sim 12$ | ${10}^5$ | $2$ | ${10}^6$ |\n| $13 \\sim 16$ | $5 \\times {10}^5$ | $10$ | ${10}^6$ |\n| $17 \\sim 20$ | $5 \\times {10}^5$ | $3$ | ${10}^9$ |\n\n对于所有测试点，保证 $1 \\le n \\le 5 \\times {10}^5$，$1 \\le k \\le 10$，$1 \\le w_i \\le {10}^9$，$d_i \\in \\{-1, 1\\}$。", "locale": "zh-CN"}}}
{"pid": "P7117", "type": "P", "difficulty": 4, "samples": [["3\n2 3 3\n", "simple\n2\n2 1\n1 1\n"], ["3\n97 109 101\n", "simple\n2\n54 42\n47 55\n"], ["9\n9 9 8 2 4 4 3 5 3\n", "nice\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2020", "Special Judge", "O2优化", "构造"], "title": "Mivik 卷积", "background": "卷王之王卷穿肠（doge", "description": "从前有一只 Mivik，他喜欢卷积。他定义两个仅与 $x$ 有关的多项式函数 $f\\left(x\\right)$ 和 $g\\left(x\\right)$ 的 Mivik 卷积如下：\n\n$$\nf\\left(x\\right)\\otimes g\\left(x\\right)=\\sum_{k=0}^{\\deg f +\\deg g}\\max_{i\\in [0,\\deg f] \\land j\\in [0,\\deg g]\\land i+j=k}\\left\\{\\left[x^i\\right]f\\left(x\\right)+\\left[x^j\\right]g\\left(x\\right)\\right\\} x^k\n$$\n\n其中 $\\deg f$ 表示 $f$ 的最高项次数，$\\left[x^i\\right]f\\left(x\\right)$ 代表 $f\\left(x\\right)$ 这一函数中 $x^i$ 这一项的系数。\n\n请注意，Mivik 卷积是左结合的，也就是说 $a\\otimes b\\otimes c=(a\\otimes b)\\otimes c$。\n\nMivik 定义 Mivik 函数为能表示为 $f\\left(x\\right)=ax+b$ 形式的函数，其中 $a$、$b$ 均为整数。例如 $f\\left(x\\right)=-3+2x$ 是 Mivik 函数，而 $f\\left(x\\right)=\\frac{1}{x}$ 不是。\n\nMivik 又定义一个函数 $f\\left(x\\right)$ 是 simple 的，当且仅当存在一个 Mivik 函数的序列 $S$（大小为 $\\left|S\\right|$），使得：\n\n$$\nf\\left(x\\right)=S_1\\otimes S_2\\otimes S_3\\otimes\\cdots\\otimes S_{\\left|S\\right|}.\n$$\n\n现在 Mivik 给了你一个多项式函数，问你这个函数是不是 simple 的；如果是，请顺便告诉他任意一种可能的 $S$。", "inputFormat": "第一行一个正整数 $n$，代表这个多项式函数的项数。\n\n第二行 $n$ 个整数，次数从低到高依次代表这个多项式函数的系数 $f_i$。保证最高项系数不为 $0$。", "outputFormat": "如果这个函数不是 simple 的，输出一行 `nice`。\n\n否则，先输出一行 `simple`，然后接下来一行输出你构造的 $S$ 的大小 $\\left|S\\right|$。接下来在 $\\left|S\\right|$ 行给出你构造的 $S$ 序列，每行两个整数 $a$ 和 $b$，描述一个 Mivik 函数 $f\\left(x\\right)=ax+b$。", "hint": "### 样例解释 #1\n\n给定的函数 $f\\left(x\\right)=2+3x+3x^2$ 可以由 $\\left(2x+1\\right)\\otimes\\left(x+1\\right)$ 得到。\n\n### 测试点约束\n\n**本题采用捆绑测试。**\n\n对于全部数据，有 $1\\le n\\le 5\\times 10^5$，$-10^8\\le f_i\\le 10^8$。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | $n\\le$ |\n|:-:|:-:|:-:|\n| 1 | 5 | $1$ |\n| 2 | 5 | $2$ |\n| 3 | 20 | $20$ |\n| 4 | 30 | $5000$ |\n| 5 | 40 | $5\\times 10^5$ |\n\n**本题读入输出量较大，请使用较快的读入输出方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Mivik 卷积", "background": "卷王之王卷穿肠（doge", "description": "从前有一只 Mivik，他喜欢卷积。他定义两个仅与 $x$ 有关的多项式函数 $f\\left(x\\right)$ 和 $g\\left(x\\right)$ 的 Mivik 卷积如下：\n\n$$\nf\\left(x\\right)\\otimes g\\left(x\\right)=\\sum_{k=0}^{\\deg f +\\deg g}\\max_{i\\in [0,\\deg f] \\land j\\in [0,\\deg g]\\land i+j=k}\\left\\{\\left[x^i\\right]f\\left(x\\right)+\\left[x^j\\right]g\\left(x\\right)\\right\\} x^k\n$$\n\n其中 $\\deg f$ 表示 $f$ 的最高项次数，$\\left[x^i\\right]f\\left(x\\right)$ 代表 $f\\left(x\\right)$ 这一函数中 $x^i$ 这一项的系数。\n\n请注意，Mivik 卷积是左结合的，也就是说 $a\\otimes b\\otimes c=(a\\otimes b)\\otimes c$。\n\nMivik 定义 Mivik 函数为能表示为 $f\\left(x\\right)=ax+b$ 形式的函数，其中 $a$、$b$ 均为整数。例如 $f\\left(x\\right)=-3+2x$ 是 Mivik 函数，而 $f\\left(x\\right)=\\frac{1}{x}$ 不是。\n\nMivik 又定义一个函数 $f\\left(x\\right)$ 是 simple 的，当且仅当存在一个 Mivik 函数的序列 $S$（大小为 $\\left|S\\right|$），使得：\n\n$$\nf\\left(x\\right)=S_1\\otimes S_2\\otimes S_3\\otimes\\cdots\\otimes S_{\\left|S\\right|}.\n$$\n\n现在 Mivik 给了你一个多项式函数，问你这个函数是不是 simple 的；如果是，请顺便告诉他任意一种可能的 $S$。", "inputFormat": "第一行一个正整数 $n$，代表这个多项式函数的项数。\n\n第二行 $n$ 个整数，次数从低到高依次代表这个多项式函数的系数 $f_i$。保证最高项系数不为 $0$。", "outputFormat": "如果这个函数不是 simple 的，输出一行 `nice`。\n\n否则，先输出一行 `simple`，然后接下来一行输出你构造的 $S$ 的大小 $\\left|S\\right|$。接下来在 $\\left|S\\right|$ 行给出你构造的 $S$ 序列，每行两个整数 $a$ 和 $b$，描述一个 Mivik 函数 $f\\left(x\\right)=ax+b$。", "hint": "### 样例解释 #1\n\n给定的函数 $f\\left(x\\right)=2+3x+3x^2$ 可以由 $\\left(2x+1\\right)\\otimes\\left(x+1\\right)$ 得到。\n\n### 测试点约束\n\n**本题采用捆绑测试。**\n\n对于全部数据，有 $1\\le n\\le 5\\times 10^5$，$-10^8\\le f_i\\le 10^8$。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | $n\\le$ |\n|:-:|:-:|:-:|\n| 1 | 5 | $1$ |\n| 2 | 5 | $2$ |\n| 3 | 20 | $20$ |\n| 4 | 30 | $5000$ |\n| 5 | 40 | $5\\times 10^5$ |\n\n**本题读入输出量较大，请使用较快的读入输出方式。**", "locale": "zh-CN"}}}
{"pid": "P7118", "type": "P", "difficulty": 5, "samples": [["3\n0 2\n3 0\n0 0\n", "4\n"], ["7\n2 3\n4 5\n6 7\n0 0\n0 0\n0 0\n0 0\n", "410\n"], ["9\n2 3\n4 5\n0 0\n0 0\n6 7\n0 0\n8 9\n0 0\n0 0\n", "5206\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "组合数学", "Catalan 数"], "title": "Galgame", "background": "众所周知，as_lky 喜欢 Galgame。", "description": "as_lky 搞到了很多 Galgame（真的很多！）。一款 Galgame 可以被描述为很多场景（Scene）的结合，它们形成了一棵 **以 1 为根** 的二叉树，每一个结点都是一个场景，一个结点的左儿子和右儿子分别对应在该场景选 A 选项和 B 选项能够到达的场景（可能会到达空场景，即游戏结束），我们称其为 A 场景和 B 场景。\n\nas_lky 如下定义了两个不同的 Galgame 场景哪个更有趣（两款 Galgame 谁更为有趣也就取决于它们的初始场景谁更有趣）：\n\n1. 如果这两个场景能够到达的场景总数（即通过任意选择能够到达的不同场景总数，包括该场景本身）不一样，那么能到达的场景数更多的那个更有趣；\n2. 如果这两个场景的 A 场景不一样有趣，那么 A 场景更有趣的场景更有趣；\n3. 否则这两个场景谁更有趣完全等价于他们 B 场景谁更有趣。\n\n值得注意的是，空场景能到达的场景数被定义为 0。\n\n![示例](https://cdn.luogu.com.cn/upload/image_hosting/4d2208qd.png)\n\n例如，对于上图给出的例子（若无法正常查看请 `右键 -> 查看图像`），我们这样判定 1 和 7 这两个场景谁更有趣：\n\n- 首先，1 和 7 能到达的场景数都是 6，因此我们首先尝试比较其 A 场景：2 和 8。\n- 由于 2 和 8 能到达的场景数不同（分别是 3 和 2），则 2 场景比 8 场景更有趣；继而可以得到 1 场景比 7 场景更有趣。\n\nas_lky 定义两个 Galgame 场景本质相同，当且仅当这两个场景都为空场景，或者它们的 A 场景本质相同且 B 场景本质相同。\n\nas_lky 认为一款 Galgame 的有趣度是所有可能的、本质不同的、不及这款 Galgame 有趣的 Galgame 数量。现在 as_lky 给了你一款 Galgame，请告诉他这款 Galgame 的有趣度是多少。as_lky 觉得这个数字可能有些大，所以他想让你输出这个数字对 $998244353$ 取模的结果。", "inputFormat": "第一行一个正整数 $n$，代表这款 Galgame 中共有多少场景。\n\n接下来 $n$ 行，每行两个非负整数 $a_i$ 和 $b_i$，分别代表该场景的 A 场景和 B 场景，0 代表空场景。保证数据合法。", "outputFormat": "一行一个非负整数，代表有趣度对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n样例一：下图分别给出了 as_lky 给你的 Galgame（左）和所有四种没有该 Galgame 有趣的 Galgame（右）：（若无法正常查看请 `右键 -> 查看图像`）\n\n![示例](https://cdn.luogu.com.cn/upload/image_hosting/oxer1eac.png)\n\n### 测试点约束\n\n**本题采用捆绑测试。**\n\n对于全部数据，有 $1\\le n\\le 10^6$，$0\\le a_i,b_i\\le n$。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | $n\\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| 1 | 10 | $10$ | $\\times$ |\n| 2 | 20 | $5000$ | $\\times$ |\n| 3 | 30 | $10^6$ | $\\surd$ |\n| 4 | 40 | $10^6$ | $\\times$ |\n\n特殊性质：保证数据均匀随机生成，即 $n$ 给定时，若所有场景数为 $n$ 的本质不同 Galgame 共有 $S$ 种，则每种本质不同的 Galgame 出现概率均为 $\\frac{1}{S}$。\n\n**本题读入量较大，请使用较快的读入方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Galgame", "background": "众所周知，as_lky 喜欢 Galgame。", "description": "as_lky 搞到了很多 Galgame（真的很多！）。一款 Galgame 可以被描述为很多场景（Scene）的结合，它们形成了一棵 **以 1 为根** 的二叉树，每一个结点都是一个场景，一个结点的左儿子和右儿子分别对应在该场景选 A 选项和 B 选项能够到达的场景（可能会到达空场景，即游戏结束），我们称其为 A 场景和 B 场景。\n\nas_lky 如下定义了两个不同的 Galgame 场景哪个更有趣（两款 Galgame 谁更为有趣也就取决于它们的初始场景谁更有趣）：\n\n1. 如果这两个场景能够到达的场景总数（即通过任意选择能够到达的不同场景总数，包括该场景本身）不一样，那么能到达的场景数更多的那个更有趣；\n2. 如果这两个场景的 A 场景不一样有趣，那么 A 场景更有趣的场景更有趣；\n3. 否则这两个场景谁更有趣完全等价于他们 B 场景谁更有趣。\n\n值得注意的是，空场景能到达的场景数被定义为 0。\n\n![示例](https://cdn.luogu.com.cn/upload/image_hosting/4d2208qd.png)\n\n例如，对于上图给出的例子（若无法正常查看请 `右键 -> 查看图像`），我们这样判定 1 和 7 这两个场景谁更有趣：\n\n- 首先，1 和 7 能到达的场景数都是 6，因此我们首先尝试比较其 A 场景：2 和 8。\n- 由于 2 和 8 能到达的场景数不同（分别是 3 和 2），则 2 场景比 8 场景更有趣；继而可以得到 1 场景比 7 场景更有趣。\n\nas_lky 定义两个 Galgame 场景本质相同，当且仅当这两个场景都为空场景，或者它们的 A 场景本质相同且 B 场景本质相同。\n\nas_lky 认为一款 Galgame 的有趣度是所有可能的、本质不同的、不及这款 Galgame 有趣的 Galgame 数量。现在 as_lky 给了你一款 Galgame，请告诉他这款 Galgame 的有趣度是多少。as_lky 觉得这个数字可能有些大，所以他想让你输出这个数字对 $998244353$ 取模的结果。", "inputFormat": "第一行一个正整数 $n$，代表这款 Galgame 中共有多少场景。\n\n接下来 $n$ 行，每行两个非负整数 $a_i$ 和 $b_i$，分别代表该场景的 A 场景和 B 场景，0 代表空场景。保证数据合法。", "outputFormat": "一行一个非负整数，代表有趣度对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n样例一：下图分别给出了 as_lky 给你的 Galgame（左）和所有四种没有该 Galgame 有趣的 Galgame（右）：（若无法正常查看请 `右键 -> 查看图像`）\n\n![示例](https://cdn.luogu.com.cn/upload/image_hosting/oxer1eac.png)\n\n### 测试点约束\n\n**本题采用捆绑测试。**\n\n对于全部数据，有 $1\\le n\\le 10^6$，$0\\le a_i,b_i\\le n$。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | $n\\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| 1 | 10 | $10$ | $\\times$ |\n| 2 | 20 | $5000$ | $\\times$ |\n| 3 | 30 | $10^6$ | $\\surd$ |\n| 4 | 40 | $10^6$ | $\\times$ |\n\n特殊性质：保证数据均匀随机生成，即 $n$ 给定时，若所有场景数为 $n$ 的本质不同 Galgame 共有 $S$ 种，则每种本质不同的 Galgame 出现概率均为 $\\frac{1}{S}$。\n\n**本题读入量较大，请使用较快的读入方式。**", "locale": "zh-CN"}}}
{"pid": "P7119", "type": "P", "difficulty": 5, "samples": [["2 2\nTT\n2 2\n1 2\n", "2\n1\n3\n"], ["5 0\nHTHTH\n", "8\n"], ["10 10\nHTHHTHTHHH\n9 9\n5 5\n10 10\n7 7\n6 6\n9 9\n4 4\n9 9\n7 7\n2 2\n", "19\n30\n27\n40\n33\n38\n27\n28\n37\n40\n47\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2020", "线段树", "O2优化"], "title": "Mivik 的游戏", "background": "Mivik 和 W!ʌ!k 在玩游戏！", "description": "Mivik 首先把 $n$ 枚硬币摆成一排，其中有一些正面朝上，其余的都是反面朝上。W!ʌ!k 打算不断执行以下操作直到这 $n$ 枚硬币中没有硬币反面朝上：\n\n- 如果现在这 $n$ 枚硬币中有 $k$ 枚硬币反面朝上，那么翻转从左到右第 $k$ 枚硬币。具体地，如果从左到右第 $k$ 枚硬币正面朝上，则将其变为反面朝上；如果从左到右第 $k$ 枚硬币反面朝上，则将其变为正面朝上。\n\n在 W!ʌ!k 开始玩游戏之前，Mivik 想考考 W!ʌ!k。Mivik 想让 W!ʌ!k 算出他总共会进行多少次这样的操作，或者是 W!ʌ!k 永远无法停止执行操作。\n\nW!ʌ!k 很快解决了这个问题，但是心理比 yky 还变态的 Mivik 显然不会放过他。Mivik 进行了很多次操作，每次他翻转了一个区间的硬币，他要求 W!ʌ!k 算出他总共会进行多少次这样的操作，或者是 W!ʌ!k 永远无法停止执行操作。\n\n**请注意，W!ʌ!k 只是需要计算总共会进行多少次操作，而不会真正进行操作。**", "inputFormat": "输入共 $\\left(m+2\\right)$ 行。\n\n第一行为两个非负整数 $n,m$，其中 $n$ 表示 Mivik 的硬币的个数，$m$ 表示 Mivik 进行的翻转操作的次数。\n\n第二行为一个只包含有 $\\texttt H$ 和 $\\texttt T$ 的字符串。第 $i$ 个字符 $s_i$ 为 $\\texttt H$ 则表示从左到右第 $i$ 枚硬币初始时是正面朝上；$s_i$ 为 $\\texttt T$ 则表示从左到右第 $i$ 枚硬币初始时是反面朝上。\n\n接下来 $m$ 行，每行两个正整数 $l_i,r_i$，表示 Mivik 翻转了从左到右数 $l_i\\sim r_i$（包括 $l_i$ 和 $r_i$）的硬币。", "outputFormat": "输出 $\\left(m+1\\right)$ 行，分别表示在真正执行操作前后共 $\\left(m+1\\right)$ 个时刻开始 W!ʌ!k 总共会进行多少次这样的操作，或者是 W!ʌ!k 永远无法停止执行操作。如果某一时刻 W!ʌ!k 不能停止执行操作，则在对应行输出字符串 $\\texttt{never}$。", "hint": "### 样例解释 #1\n初始时两枚硬币都是反面朝上，因此如果 W!ʌ!k 从此刻开始执行操作， W!ʌ!k 会将编号为 $2$ 的硬币翻转过来。操作后只有一枚硬币反面朝上，因此第 $2$ 次操作会将编号为 $1$ 的硬币翻转过来。在第 $2$ 次操作后没有硬币反面朝上，因此 W!ʌ!k 不会再执行操作，总共会执行 $2$ 次操作。\n\n### 样例解释 #2\n这 $8$ 次操作分别翻转了第 $2,1,2,3,4,3,2,1$ 枚硬币。\n\n### 测试点约束\n**本题采用捆绑测试。**\n\n对于全部数据，有 $1\\le n,m\\le10^6$，$s_i\\in\\left\\{\\texttt H,\\texttt T\\right\\}$，$1\\le l_i\\le r_i\\le n$。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | 特殊限制 |\n|:-:|:-:|:-:|\n| 1 | 10 | $n\\le3$ |\n| 2 | 20 | $n,m\\le100$ |\n| 3 | 30 | $m\\le10$ |\n| 4 | 20 | $l_i=r_i$ |\n| 5 | 20 | 无 |\n\n**本题读入输出量较大，请使用较快的读入输出方式。**", "locale": "zh-CN", "translations": {"en": {"title": "Mivik's Game", "background": "Mivik and W!ʌ!k are playing a game.", "description": "Mivik first places $n$ coins in a row. Some are face up and the rest are face down. W!ʌ!k plans to repeatedly perform the following operation until none of the $n$ coins is face down:\n\n- If there are currently $k$ coins that are face down among the $n$ coins, then flip the $k$-th coin from left to right. Specifically, if the $k$-th coin from left to right is face up, change it to face down; if it is face down, change it to face up.\n\nBefore W!ʌ!k starts playing, Mivik wants to test W!ʌ!k. Mivik wants W!ʌ!k to compute how many such operations he will perform in total, or whether W!ʌ!k will never be able to stop performing operations.\n\nW!ʌ!k solved this problem quickly, but Mivik, whose mindset is even more twisted than yky's, obviously would not let him off. Mivik performs many flips: each time, he flips an interval of coins, and he requires W!ʌ!k to compute how many such operations W!ʌ!k will perform in total, or whether W!ʌ!k will never be able to stop performing operations.\n\n**Note that W!ʌ!k only needs to compute how many operations will be performed in total, and will not actually perform the operations.**", "inputFormat": "The input has $\\left(m+2\\right)$ lines.\n\nThe first line contains two non-negative integers $n,m$, where $n$ is the number of Mivik's coins, and $m$ is the number of interval-flip operations performed by Mivik.\n\nThe second line is a string consisting only of $\\texttt H$ and $\\texttt T$. If the $i$-th character $s_i$ is $\\texttt H$, it means the $i$-th coin from left to right is initially face up; if $s_i$ is $\\texttt T$, it means the $i$-th coin from left to right is initially face down.\n\nThe next $m$ lines each contain two positive integers $l_i,r_i$, meaning Mivik flipped the coins from positions $l_i$ to $r_i$ (inclusive) from left to right.", "outputFormat": "Output $\\left(m+1\\right)$ lines. They represent, at the $\\left(m+1\\right)$ moments (before actually performing any of Mivik's flips, and after each of the $m$ flips), how many such operations W!ʌ!k would perform in total if he starts at that moment, or whether W!ʌ!k will never be able to stop performing operations. If at some moment W!ʌ!k cannot stop performing operations, output the string $\\texttt{never}$ on the corresponding line.", "hint": "### Sample Explanation #1\nInitially, both coins are face down, so if W!ʌ!k starts performing operations from this moment, he will flip coin $2$. After that, only one coin is face down, so the second operation will flip coin $1$. After the second operation, no coin is face down, so W!ʌ!k will not perform any more operations, and he will perform $2$ operations in total.\n\n### Sample Explanation #2\nThese $8$ operations flip coins $2,1,2,3,4,3,2,1$, respectively.\n\n### Test Point Constraints\n**This problem uses bundled tests.**\n\nFor all data, $1\\le n,m\\le10^6$, $s_i\\in\\left\\{\\texttt H,\\texttt T\\right\\}$, $1\\le l_i\\le r_i\\le n$.\n\nThe specific limits for each subtask are shown in the table below:\n\n| Subtask ID | Score | Special Constraints |\n|:-:|:-:|:-:|\n| 1 | 10 | $n\\le3$ |\n| 2 | 20 | $n,m\\le100$ |\n| 3 | 30 | $m\\le10$ |\n| 4 | 20 | $l_i=r_i$ |\n| 5 | 20 | None. |\n\n**The input and output size of this problem is large, so please use fast I/O.**\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Mivik 的游戏", "background": "Mivik 和 W!ʌ!k 在玩游戏！", "description": "Mivik 首先把 $n$ 枚硬币摆成一排，其中有一些正面朝上，其余的都是反面朝上。W!ʌ!k 打算不断执行以下操作直到这 $n$ 枚硬币中没有硬币反面朝上：\n\n- 如果现在这 $n$ 枚硬币中有 $k$ 枚硬币反面朝上，那么翻转从左到右第 $k$ 枚硬币。具体地，如果从左到右第 $k$ 枚硬币正面朝上，则将其变为反面朝上；如果从左到右第 $k$ 枚硬币反面朝上，则将其变为正面朝上。\n\n在 W!ʌ!k 开始玩游戏之前，Mivik 想考考 W!ʌ!k。Mivik 想让 W!ʌ!k 算出他总共会进行多少次这样的操作，或者是 W!ʌ!k 永远无法停止执行操作。\n\nW!ʌ!k 很快解决了这个问题，但是心理比 yky 还变态的 Mivik 显然不会放过他。Mivik 进行了很多次操作，每次他翻转了一个区间的硬币，他要求 W!ʌ!k 算出他总共会进行多少次这样的操作，或者是 W!ʌ!k 永远无法停止执行操作。\n\n**请注意，W!ʌ!k 只是需要计算总共会进行多少次操作，而不会真正进行操作。**", "inputFormat": "输入共 $\\left(m+2\\right)$ 行。\n\n第一行为两个非负整数 $n,m$，其中 $n$ 表示 Mivik 的硬币的个数，$m$ 表示 Mivik 进行的翻转操作的次数。\n\n第二行为一个只包含有 $\\texttt H$ 和 $\\texttt T$ 的字符串。第 $i$ 个字符 $s_i$ 为 $\\texttt H$ 则表示从左到右第 $i$ 枚硬币初始时是正面朝上；$s_i$ 为 $\\texttt T$ 则表示从左到右第 $i$ 枚硬币初始时是反面朝上。\n\n接下来 $m$ 行，每行两个正整数 $l_i,r_i$，表示 Mivik 翻转了从左到右数 $l_i\\sim r_i$（包括 $l_i$ 和 $r_i$）的硬币。", "outputFormat": "输出 $\\left(m+1\\right)$ 行，分别表示在真正执行操作前后共 $\\left(m+1\\right)$ 个时刻开始 W!ʌ!k 总共会进行多少次这样的操作，或者是 W!ʌ!k 永远无法停止执行操作。如果某一时刻 W!ʌ!k 不能停止执行操作，则在对应行输出字符串 $\\texttt{never}$。", "hint": "### 样例解释 #1\n初始时两枚硬币都是反面朝上，因此如果 W!ʌ!k 从此刻开始执行操作， W!ʌ!k 会将编号为 $2$ 的硬币翻转过来。操作后只有一枚硬币反面朝上，因此第 $2$ 次操作会将编号为 $1$ 的硬币翻转过来。在第 $2$ 次操作后没有硬币反面朝上，因此 W!ʌ!k 不会再执行操作，总共会执行 $2$ 次操作。\n\n### 样例解释 #2\n这 $8$ 次操作分别翻转了第 $2,1,2,3,4,3,2,1$ 枚硬币。\n\n### 测试点约束\n**本题采用捆绑测试。**\n\n对于全部数据，有 $1\\le n,m\\le10^6$，$s_i\\in\\left\\{\\texttt H,\\texttt T\\right\\}$，$1\\le l_i\\le r_i\\le n$。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | 特殊限制 |\n|:-:|:-:|:-:|\n| 1 | 10 | $n\\le3$ |\n| 2 | 20 | $n,m\\le100$ |\n| 3 | 30 | $m\\le10$ |\n| 4 | 20 | $l_i=r_i$ |\n| 5 | 20 | 无 |\n\n**本题读入输出量较大，请使用较快的读入输出方式。**", "locale": "zh-CN"}}}
{"pid": "P7120", "type": "P", "difficulty": 6, "samples": [["4 16777259\n", "40\n"], ["10 2147483647\n", "17167120\n"], ["10000000 998244353\n", "3414058\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["递推", "2020", "O2优化", "组合数学"], "title": "Chino 的比赛", "background": "", "description": "Chino 想要用现在手里有的 $n$ 道题出成一套模拟赛。一开始，这 $n$ 道题按照由易到难的顺序排列。\n\n但是因为 Chino 是一个可爱的妹子，所以她会将这些题目的顺序打乱。具体地，她会执行恰好奇数次操作，每次操作她会将其中两道题的位置交换。一套可能的模拟赛就是这些题的一个排列。\n\nChino 为了评估一套模拟赛的可爱程度，她定义 $s$ 表示使得开始时的题目顺序变为这套模拟赛的题目顺序的最少操作次数，定义 $t$ 表示开始时与这套模拟赛中位置相同的题目数量，那么这套模拟赛的可爱程度就是 $s/\\left(t+1\\right)$。\n\n按照套路，你现在应该帮 Chino 计算某一套模拟赛的可爱程度。Chino 觉得这不够可爱，所以她想让你计算所有可能的模拟赛的可爱程度的两倍和。可以发现这一定是一个非负整数。为了避免答案过大，你只需要输出其对质数 $p$ 取模后的结果即可。\n\n形式化地，对于置换 $\\pi$，令 $\\nu\\left(\\pi\\right)$ 表示其不动点个数，设 $\\upsilon\\left(\\pi\\right)$ 为其能够被分解成为的最少个数对换乘积的对换数目。设 $n$ 元对称群为 $S_n$，$n$ 元交错群为 $A_n$，求\n$$\n2\\sum_{\\pi\\in S_n\\land\\pi\\notin A_n}\\frac{\\upsilon\\left(\\pi\\right)}{\\nu\\left(\\pi\\right)+1}.\n$$\n\n这一定是一个非负整数。答案对质数 $p$ 取模后输出。", "inputFormat": "输入一行两个正整数 $n,p$。", "outputFormat": "输出一行一个非负整数，表示所有可能的 $n$ 道题的模拟赛的可爱程度之和对 $p$ 取模后的结果。", "hint": "### 样例解释 #1\n四道题的所有可能的模拟赛题目排列顺序有：\n- $\\left\\{1,2,4,3\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{1,3,2,4\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{1,4,3,2\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{2,1,3,4\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{2,3,4,1\\right\\}$，可爱程度为 $3$；\n- $\\left\\{2,4,1,3\\right\\}$，可爱程度为 $3$；\n- $\\left\\{3,1,4,2\\right\\}$，可爱程度为 $3$；\n- $\\left\\{3,2,1,4\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{3,4,2,1\\right\\}$，可爱程度为 $3$；\n- $\\left\\{4,1,2,3\\right\\}$，可爱程度为 $3$；\n- $\\left\\{4,2,3,1\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{4,3,1,2\\right\\}$，可爱程度为 $3$。\n\n### 测试点约束\n**本题采用捆绑测试。**\n\n对于全部数据，有 $1\\le n\\le2\\times10^7$，$2^{25}<p<2^{31}$，$p$ 为质数。\n\t\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | $n\\le$ | $p=998244353$ |\n|:-:|:-:|:-:|:-:|\n| 1 | 10 | $2\\times10^1$ | $\\times$ |\n| 2 | 10 | $2\\times10^2$ | $\\surd$ |\n| 3 | 10 | $2\\times10^3$ | $\\times$ |\n| 4 | 20 | $2\\times10^4$ | $\\times$ |\n| 5 | 20 | $2\\times10^5$ | $\\surd$ |\n| 6 | 10 | $2\\times10^6$ | $\\surd$ |\n| 7 | 20 | $2\\times10^7$ | $\\times$ |\n\n### 更快的取模\n本题中你可能会执行大量取模操作，因此你可以参考[几种取模优化方法（译自 min-25 的博客）](https://loj.ac/d/327)来提高取模运算的效率。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Chino 的比赛", "background": "", "description": "Chino 想要用现在手里有的 $n$ 道题出成一套模拟赛。一开始，这 $n$ 道题按照由易到难的顺序排列。\n\n但是因为 Chino 是一个可爱的妹子，所以她会将这些题目的顺序打乱。具体地，她会执行恰好奇数次操作，每次操作她会将其中两道题的位置交换。一套可能的模拟赛就是这些题的一个排列。\n\nChino 为了评估一套模拟赛的可爱程度，她定义 $s$ 表示使得开始时的题目顺序变为这套模拟赛的题目顺序的最少操作次数，定义 $t$ 表示开始时与这套模拟赛中位置相同的题目数量，那么这套模拟赛的可爱程度就是 $s/\\left(t+1\\right)$。\n\n按照套路，你现在应该帮 Chino 计算某一套模拟赛的可爱程度。Chino 觉得这不够可爱，所以她想让你计算所有可能的模拟赛的可爱程度的两倍和。可以发现这一定是一个非负整数。为了避免答案过大，你只需要输出其对质数 $p$ 取模后的结果即可。\n\n形式化地，对于置换 $\\pi$，令 $\\nu\\left(\\pi\\right)$ 表示其不动点个数，设 $\\upsilon\\left(\\pi\\right)$ 为其能够被分解成为的最少个数对换乘积的对换数目。设 $n$ 元对称群为 $S_n$，$n$ 元交错群为 $A_n$，求\n$$\n2\\sum_{\\pi\\in S_n\\land\\pi\\notin A_n}\\frac{\\upsilon\\left(\\pi\\right)}{\\nu\\left(\\pi\\right)+1}.\n$$\n\n这一定是一个非负整数。答案对质数 $p$ 取模后输出。", "inputFormat": "输入一行两个正整数 $n,p$。", "outputFormat": "输出一行一个非负整数，表示所有可能的 $n$ 道题的模拟赛的可爱程度之和对 $p$ 取模后的结果。", "hint": "### 样例解释 #1\n四道题的所有可能的模拟赛题目排列顺序有：\n- $\\left\\{1,2,4,3\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{1,3,2,4\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{1,4,3,2\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{2,1,3,4\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{2,3,4,1\\right\\}$，可爱程度为 $3$；\n- $\\left\\{2,4,1,3\\right\\}$，可爱程度为 $3$；\n- $\\left\\{3,1,4,2\\right\\}$，可爱程度为 $3$；\n- $\\left\\{3,2,1,4\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{3,4,2,1\\right\\}$，可爱程度为 $3$；\n- $\\left\\{4,1,2,3\\right\\}$，可爱程度为 $3$；\n- $\\left\\{4,2,3,1\\right\\}$，可爱程度为 $1/3$；\n- $\\left\\{4,3,1,2\\right\\}$，可爱程度为 $3$。\n\n### 测试点约束\n**本题采用捆绑测试。**\n\n对于全部数据，有 $1\\le n\\le2\\times10^7$，$2^{25}<p<2^{31}$，$p$ 为质数。\n\t\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | $n\\le$ | $p=998244353$ |\n|:-:|:-:|:-:|:-:|\n| 1 | 10 | $2\\times10^1$ | $\\times$ |\n| 2 | 10 | $2\\times10^2$ | $\\surd$ |\n| 3 | 10 | $2\\times10^3$ | $\\times$ |\n| 4 | 20 | $2\\times10^4$ | $\\times$ |\n| 5 | 20 | $2\\times10^5$ | $\\surd$ |\n| 6 | 10 | $2\\times10^6$ | $\\surd$ |\n| 7 | 20 | $2\\times10^7$ | $\\times$ |\n\n### 更快的取模\n本题中你可能会执行大量取模操作，因此你可以参考[几种取模优化方法（译自 min-25 的博客）](https://loj.ac/d/327)来提高取模运算的效率。", "locale": "zh-CN"}}}
{"pid": "P7121", "type": "P", "difficulty": 5, "samples": [["见 sample/1.in", "见 sample/1.out"], ["见 sample/2.in", "见 sample/2.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2020", "Special Judge", "O2优化", "逆元"], "title": "Ame 和 Gura 的奇妙探险", "background": "\n#### 鉴于洛谷的 SPJ 编译可能依赖于用户选择的编译器版本，且 SPJ 使用了 C++11，请 C++ 选手使用 C++11 或以上进行提交。\n\n~~Lewdson~~ Watson Amelia 和 Gawr Gura 在玩 Mivicraft。\n\nGura 想将地狱里的交通升级为冰船隧道，但在此之前她先得有一把精准采集的镐子。尝试了一遍又一遍，但终究未能成功的她只好可怜兮兮地找到 Ame。Ame 立刻说道：“So easy! I'll get it in my first try.”\n\n（第一次之后）“Well let's try it again!”\n\n（第二次之后）“Hmmm maybe something's getting wrong today?”\n\n（第三次之后）“I'll give you a ground pound you silly enchanting table!”\n\n（第四次之后）“.. Damn.”\n\n于是 Ame 决定借助一些 技 巧 来拿到精准采集的镐子。她通过查询资料得知 Mivicraft 产生随机数使用了梅森旋转算法（Mersenne Twister，MT19937）。Mivicraft 会通过一个 MT19937 引擎产生一系列的随机数来生成世界的区块。", "description": "Ame 知道，只要她能够找到初始化 MT19937 引擎时使用的种子，她就能够推断出自己如何才能获得一把精准采集的镐子。于是她游历世界，并通过聪明的侦探头脑算出了这个 MT19937 引擎 **刚被初始化后** 生成的 $N$ 个随机数（注：这里的 $N$ 是 MT19937 引擎中的一个参数）。现在她把这 $N$ 个随机数给了你，希望你能够推断出初始化 MT19937 引擎时使用的种子（$0\\le\\text{种子}<2^{32}$）。值得注意的是，Mivicraft 使用的并非标准的 MT19937 引擎，其中的一些参数与论文相比有所改变，Ame 把它们附加到了输入中。请你帮帮 Ame 吧！\n\n好心的 Mivik 为你准备了一份简单易懂的 MT19937 实现，请在附件中查看。", "inputFormat": "第一行 10 个非负整数，分别对应 MT19937 中的 10 个参数：$N$、$M$、$A$、$U$、$S$、$B$、$T$、$C$、$L$ 和 $F$。\n\n接下来 $N$ 行，每行一个非负整数，依次表示 MT19937 引擎刚被初始化后生成的 $N$ 个随机数。", "outputFormat": "一行一个非负整数，代表 MT19937 引擎初始化时使用的种子。数据保证有解，如果有多个解，你只需要输出任意一个即可。", "hint": "### 样例解释 #1\n\n十个参数全部使用标准的 MT19937 参数，种子为 `233333`。也就是说，你可以通过下面的程序产生同样的随机数序列：\n\n```cpp\n#include <iostream>\n#include <random>\n\nstd::mt19937 engine(233333);\nint main() {\n\tfor (int i = 0; i < 624; ++i)\n\t\tstd::cout << engine() << std::endl;\n\treturn 0;\n}\n```\n\n### 测试点约束\n\n**本题采用捆绑测试。**\n\n对于全部数据，有 $10\\le M<N\\le 2\\times 10^5$，$0\\le A,B,C<2^{32}$，$1\\le U,S,T,L\\le 31$，$1\\le F<2^{32}$，保证 $F$ 是奇数。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | 特殊限制 |\n|:-:|:-:|:-:|\n| 1 | 20 | 种子小于等于 $1000$ |\n| 2 | 30 | $U=S=T=L=16$，$A=B=C=0$ |\n| 3 | 50 | 无 |\n\n**注：下发文件使用 UTF-8 编码，请使用可识别该编码的编辑器打开。**\n\n**附件下载备用链接：[百度网盘](https://pan.baidu.com/s/1ZJQfZK93Qw2lYrDHLQJh2Q) 提取码：jf9e**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Ame 和 Gura 的奇妙探险", "background": "\n#### 鉴于洛谷的 SPJ 编译可能依赖于用户选择的编译器版本，且 SPJ 使用了 C++11，请 C++ 选手使用 C++11 或以上进行提交。\n\n~~Lewdson~~ Watson Amelia 和 Gawr Gura 在玩 Mivicraft。\n\nGura 想将地狱里的交通升级为冰船隧道，但在此之前她先得有一把精准采集的镐子。尝试了一遍又一遍，但终究未能成功的她只好可怜兮兮地找到 Ame。Ame 立刻说道：“So easy! I'll get it in my first try.”\n\n（第一次之后）“Well let's try it again!”\n\n（第二次之后）“Hmmm maybe something's getting wrong today?”\n\n（第三次之后）“I'll give you a ground pound you silly enchanting table!”\n\n（第四次之后）“.. Damn.”\n\n于是 Ame 决定借助一些 技 巧 来拿到精准采集的镐子。她通过查询资料得知 Mivicraft 产生随机数使用了梅森旋转算法（Mersenne Twister，MT19937）。Mivicraft 会通过一个 MT19937 引擎产生一系列的随机数来生成世界的区块。", "description": "Ame 知道，只要她能够找到初始化 MT19937 引擎时使用的种子，她就能够推断出自己如何才能获得一把精准采集的镐子。于是她游历世界，并通过聪明的侦探头脑算出了这个 MT19937 引擎 **刚被初始化后** 生成的 $N$ 个随机数（注：这里的 $N$ 是 MT19937 引擎中的一个参数）。现在她把这 $N$ 个随机数给了你，希望你能够推断出初始化 MT19937 引擎时使用的种子（$0\\le\\text{种子}<2^{32}$）。值得注意的是，Mivicraft 使用的并非标准的 MT19937 引擎，其中的一些参数与论文相比有所改变，Ame 把它们附加到了输入中。请你帮帮 Ame 吧！\n\n好心的 Mivik 为你准备了一份简单易懂的 MT19937 实现，请在附件中查看。", "inputFormat": "第一行 10 个非负整数，分别对应 MT19937 中的 10 个参数：$N$、$M$、$A$、$U$、$S$、$B$、$T$、$C$、$L$ 和 $F$。\n\n接下来 $N$ 行，每行一个非负整数，依次表示 MT19937 引擎刚被初始化后生成的 $N$ 个随机数。", "outputFormat": "一行一个非负整数，代表 MT19937 引擎初始化时使用的种子。数据保证有解，如果有多个解，你只需要输出任意一个即可。", "hint": "### 样例解释 #1\n\n十个参数全部使用标准的 MT19937 参数，种子为 `233333`。也就是说，你可以通过下面的程序产生同样的随机数序列：\n\n```cpp\n#include <iostream>\n#include <random>\n\nstd::mt19937 engine(233333);\nint main() {\n\tfor (int i = 0; i < 624; ++i)\n\t\tstd::cout << engine() << std::endl;\n\treturn 0;\n}\n```\n\n### 测试点约束\n\n**本题采用捆绑测试。**\n\n对于全部数据，有 $10\\le M<N\\le 2\\times 10^5$，$0\\le A,B,C<2^{32}$，$1\\le U,S,T,L\\le 31$，$1\\le F<2^{32}$，保证 $F$ 是奇数。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | 特殊限制 |\n|:-:|:-:|:-:|\n| 1 | 20 | 种子小于等于 $1000$ |\n| 2 | 30 | $U=S=T=L=16$，$A=B=C=0$ |\n| 3 | 50 | 无 |\n\n**注：下发文件使用 UTF-8 编码，请使用可识别该编码的编辑器打开。**\n\n**附件下载备用链接：[百度网盘](https://pan.baidu.com/s/1ZJQfZK93Qw2lYrDHLQJh2Q) 提取码：jf9e**", "locale": "zh-CN"}}}
{"pid": "P7122", "type": "P", "difficulty": 6, "samples": [["1\n10\n", "108\n"], ["233333\n666666\n", "588544964910\n"], ["1\n1000000000000000000\n", "1419691012023749904603586777179575510\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["高精度", "2020", "O2优化", "快速傅里叶变换 FFT", "快速数论变换 NTT"], "title": "Chino 与线段树", "background": null, "description": "Chino 刚学习了一种叫做线段树的数据结构。可是她在写线段树时遇到了一个问题：她不知道该使用多大的空间，只知道线段树的叶子结点个数 $n$ 为一个在范围 $[a,b]$ 之内的正整数。\n\nChino 设 $f(n)$ 表示一棵 $n$ 个叶子结点的线段树所占的最大数组下标。她觉得如果她知道了\n\n$$\\sum_{n=a}^{b}f(n)$$\n\n那么她就能够算出她需要多少使用多大的空间。所以她来请教聪明的你来帮帮她。\n\n具体地，Chino 构建线段树的伪代码如下：\n\n$\\begin{aligned}\n&\\underline{\\kern{300pt}}\\\\\n&\\mathbf{Function:}\\ \\text{Build a Segment Tree.}\\\\[-10pt]\n&\\underline{\\kern{300pt}}\\\\[-5pt]\n&\\begin{array}{r|l}\n1&\\ \\mathbf{function}\\ \\text{BuildSegmentTree}(x,l,r):\\\\\n2&\\qquad \\mathbf{if}\\ (l \\ne r)\\ \\mathbf{then}:\\\\\n3&\\qquad\\qquad m \\gets \\left\\lfloor (l+r)/2 \\right\\rfloor\\\\\n4&\\qquad\\qquad \\text{BuildSegmentTree}(2x,l,m)\\\\\n5&\\qquad\\qquad \\text{BuildSegmentTree}(2x+1,m+1,r)\\\\\n6&\\qquad \\mathbf{end\\ if}\\\\\n7&\\ \\mathbf{end\\ function}\\\\\n\\end{array}\\\\[-13pt]\n&\\underline{\\kern{300pt}}\n\\end{aligned}$\n\n线段树所占的最大数组下标即为在 $\\def\\t#1{\\text{#1}}\\t{BuildSegmentTree}\\left(1,1,n\\right)$ 后所有调用的 $\\def\\t#1{\\text{#1}}\\t{BuildSegmentTree}$ 中参数 $x$ 的最大值。", "inputFormat": "输入共二行。\n\n第一行为一个正整数 $a$；第二行为一个正整数 $b$。其意义如题面所述。", "outputFormat": "输出一行一个正整数，表示你的答案。", "hint": "### 样例解释 #1\n$1\\sim 10$ 个叶子结点的线段树的最大下标分别为 $1,3,5,7,9,13,13,15,17,25$，求和得到 $108$。\n\n### 测试点约束\n**本题采用捆绑测试。**\n\n对于全部数据，有 $1\\le a\\le b\\le10^{10^6}$。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | $b\\le$ | $a=b$ |\n|:-:|:-:|:-:|:-:|\n| 1 | 10 | $10^{10^0}$ | $\\times$ |\n| 2 | 10 | $10^{10^1}$ | $\\times$ |\n| 3 | 10 | $10^{10^2}$ | $\\times$ |\n| 4 | 10 | $10^{10^3}$ | $\\surd$ |\n| 5 | 10 | $10^{10^3}$ | $\\times$ |\n| 6 | 10 | $10^{10^4}$ | $\\surd$ |\n| 7 | 10 | $10^{10^4}$ | $\\times$ |\n| 8 | 10 | $10^{10^5}$ | $\\surd$ |\n| 9 | 10 | $10^{10^5}$ | $\\times$ |\n| 10 | 10 | $10^{10^6}$ | $\\times$ |", "locale": "zh-CN", "translations": {"en": {"title": "Chino and Segment Trees", "background": "", "description": "Chino has just learned a data structure called the segment tree. However, she ran into a problem when writing a segment tree: she does not know how much space to allocate. She only knows that the number of leaf nodes $n$ is a positive integer within the range $[a,b]$.\n\nChino defines $f(n)$ as the maximum array index used by a segment tree with $n$ leaf nodes. She believes that if she knows\n\n$$\\sum_{n=a}^{b}f(n)$$\n\nthen she can figure out how much space she needs. So she asks you, the clever one, to help her.\n\nSpecifically, the pseudocode for building the segment tree is as follows:\n\n$\\begin{aligned}\n&\\underline{\\kern{300pt}}\\\\\n&\\mathbf{Function:}\\ \\text{Build a Segment Tree.}\\\\[-10pt]\n&\\underline{\\kern{300pt}}\\\\[-5pt]\n&\\begin{array}{r|l}\n1&\\ \\mathbf{function}\\ \\text{BuildSegmentTree}(x,l,r):\\\\\n2&\\qquad \\mathbf{if}\\ (l \\ne r)\\ \\mathbf{then}:\\\\\n3&\\qquad\\qquad m \\gets \\left\\lfloor (l+r)/2 \\right\\rfloor\\\\\n4&\\qquad\\qquad \\text{BuildSegmentTree}(2x,l,m)\\\\\n5&\\qquad\\qquad \\text{BuildSegmentTree}(2x+1,m+1,r)\\\\\n6&\\qquad \\mathbf{end\\ if}\\\\\n7&\\ \\mathbf{end\\ function}\\\\\n\\end{array}\\\\[-13pt]\n&\\underline{\\kern{300pt}}\n\\end{aligned}$\n\nThe maximum array index used by the segment tree is the maximum value of the parameter $x$ among all calls to $\\def\\t#1{\\text{#1}}\\t{BuildSegmentTree}$ after executing $\\def\\t#1{\\text{#1}}\\t{BuildSegmentTree}\\left(1,1,n\\right)$.", "inputFormat": "The input has two lines.\n\nThe first line contains a positive integer $a$; the second line contains a positive integer $b$. Their meanings are as described in the statement.", "outputFormat": "Output one line containing one positive integer, which is your answer.", "hint": "### Sample Explanation #1\n\nFor segment trees with $1\\sim 10$ leaf nodes, the maximum indices are $1,3,5,7,9,13,13,15,17,25$, respectively. Summing them gives $108$.\n\n### Test Point Constraints\n\n**This problem uses bundled testdata.**\n\nFor all data, $1\\le a\\le b\\le10^{10^6}$.\n\nThe specific limits for each subtask are shown in the table below:\n\n| Subtask ID | Score | $b\\le$ | $a=b$ |\n|:-:|:-:|:-:|:-:|\n| 1 | 10 | $10^{10^0}$ | $\\times$ |\n| 2 | 10 | $10^{10^1}$ | $\\times$ |\n| 3 | 10 | $10^{10^2}$ | $\\times$ |\n| 4 | 10 | $10^{10^3}$ | $\\surd$ |\n| 5 | 10 | $10^{10^3}$ | $\\times$ |\n| 6 | 10 | $10^{10^4}$ | $\\surd$ |\n| 7 | 10 | $10^{10^4}$ | $\\times$ |\n| 8 | 10 | $10^{10^5}$ | $\\surd$ |\n| 9 | 10 | $10^{10^5}$ | $\\times$ |\n| 10 | 10 | $10^{10^6}$ | $\\times$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Chino 与线段树", "background": null, "description": "Chino 刚学习了一种叫做线段树的数据结构。可是她在写线段树时遇到了一个问题：她不知道该使用多大的空间，只知道线段树的叶子结点个数 $n$ 为一个在范围 $[a,b]$ 之内的正整数。\n\nChino 设 $f(n)$ 表示一棵 $n$ 个叶子结点的线段树所占的最大数组下标。她觉得如果她知道了\n\n$$\\sum_{n=a}^{b}f(n)$$\n\n那么她就能够算出她需要多少使用多大的空间。所以她来请教聪明的你来帮帮她。\n\n具体地，Chino 构建线段树的伪代码如下：\n\n$\\begin{aligned}\n&\\underline{\\kern{300pt}}\\\\\n&\\mathbf{Function:}\\ \\text{Build a Segment Tree.}\\\\[-10pt]\n&\\underline{\\kern{300pt}}\\\\[-5pt]\n&\\begin{array}{r|l}\n1&\\ \\mathbf{function}\\ \\text{BuildSegmentTree}(x,l,r):\\\\\n2&\\qquad \\mathbf{if}\\ (l \\ne r)\\ \\mathbf{then}:\\\\\n3&\\qquad\\qquad m \\gets \\left\\lfloor (l+r)/2 \\right\\rfloor\\\\\n4&\\qquad\\qquad \\text{BuildSegmentTree}(2x,l,m)\\\\\n5&\\qquad\\qquad \\text{BuildSegmentTree}(2x+1,m+1,r)\\\\\n6&\\qquad \\mathbf{end\\ if}\\\\\n7&\\ \\mathbf{end\\ function}\\\\\n\\end{array}\\\\[-13pt]\n&\\underline{\\kern{300pt}}\n\\end{aligned}$\n\n线段树所占的最大数组下标即为在 $\\def\\t#1{\\text{#1}}\\t{BuildSegmentTree}\\left(1,1,n\\right)$ 后所有调用的 $\\def\\t#1{\\text{#1}}\\t{BuildSegmentTree}$ 中参数 $x$ 的最大值。", "inputFormat": "输入共二行。\n\n第一行为一个正整数 $a$；第二行为一个正整数 $b$。其意义如题面所述。", "outputFormat": "输出一行一个正整数，表示你的答案。", "hint": "### 样例解释 #1\n$1\\sim 10$ 个叶子结点的线段树的最大下标分别为 $1,3,5,7,9,13,13,15,17,25$，求和得到 $108$。\n\n### 测试点约束\n**本题采用捆绑测试。**\n\n对于全部数据，有 $1\\le a\\le b\\le10^{10^6}$。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | 分值 | $b\\le$ | $a=b$ |\n|:-:|:-:|:-:|:-:|\n| 1 | 10 | $10^{10^0}$ | $\\times$ |\n| 2 | 10 | $10^{10^1}$ | $\\times$ |\n| 3 | 10 | $10^{10^2}$ | $\\times$ |\n| 4 | 10 | $10^{10^3}$ | $\\surd$ |\n| 5 | 10 | $10^{10^3}$ | $\\times$ |\n| 6 | 10 | $10^{10^4}$ | $\\surd$ |\n| 7 | 10 | $10^{10^4}$ | $\\times$ |\n| 8 | 10 | $10^{10^5}$ | $\\surd$ |\n| 9 | 10 | $10^{10^5}$ | $\\times$ |\n| 10 | 10 | $10^{10^6}$ | $\\times$ |", "locale": "zh-CN"}}}
{"pid": "P7123", "type": "P", "difficulty": 7, "samples": [["2\ncenter\nleft\ncenter\nleft\nright\ntreasure\n", "0 left 0\n1 left 1\n1 right 0\n0 left 0\n1 right 0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2016", "交互题", "Special Judge", "ICPC", "NERC/NEERC"], "title": "[NEERC 2016] Indiana Jones and the Uniform Cave", "background": "这是一道 IO 交互题。", "description": "Indiana Jones has stuck in the Uniform Cave. There are many round chambers in the cave, and all of them are indistinguishable from each other. Each chamber has the same number of one-way passages evenly distributed along the chamber’s wall. Passages are indistinguishable from each other, too. The Cave is magical. All passages lead to other chambers or to the same one. However, the last passage, after all passages are visited, leads to the treasure. Even the exact number of chambers is a mystery. It is known that each chamber is reachable from each other chamber using the passages.\n\nDr. Jones noticed that each chamber has a stone in the center. He decided to use these stones to mark chambers and passages. A stone can be placed to the left or to the right of one of the passages. When Indiana Jones enters the chamber all that he can observe is the location of the stone in the chamber. He can move the stone to the desired location and take any passage leading out of the chamber.\n\nYour task is to help Indiana Jones to visit every passage in the Uniform Cave and find the treasure.", "inputFormat": "First, the testing system writes the integer m — the number of passages in each chamber ($2 \\leq m \\le 20$).\n\nDr. Jones enters the chamber and sees, in the next line, where the stone is placed: either in the “center” of the chamber or to the “left”, or to the “right” of some passage. On the first visit to the chamber, the stone is in the center.\n\nYour solution shall output his actions: the number and the side of the passage to place the stone to, and the number of the passage to take. Both numbers are relative to the passage marked by the stone, counting clockwise from 0 to m − 1. If the stone is in the center of the chamber, the origin is random.\n\nFor example, “3 left 1” tells that Dr. Jones moves the stone three passages clockwise and places it to the left of the passage, then he takes the passage to the right of the initial stone position.\n\nAfter each move testing system tells either the location of the stone in the next chamber or “treasure”, if Indiana Jones had found it. The testing system writes “treasure” when all the passages are visited.\n\nIf Dr. Jones does not find the treasure room after 20 000 passages are taken, he starves to death, and your solution receives the “Wrong Answer” outcome. You also receive this outcome if your solution terminates before all passages are taken.\n\nThe total number of chambers in the cave is unknown, but you may assume that it does not exceed 20, and that each chamber is reachable from every other chamber.", "outputFormat": "", "hint": "Dr. Jones enters the example cave and sees that the stone in the first chamber is in the center. He marks the chamber by placing the stone to the left of some passage and takes it. He sees the chamber where the stone is to the left of the passage, so he is in the first chamber again. He moves the stone clockwise and takes the passage marked by it. This passage leads to the second chamber. He marks it by placing the stone to the right of some passage and takes another one. He is in the first chamber again, so he returns to the second chamber and takes the remaining passage. This passage leads to the treasure.", "locale": "en", "translations": {"en": {"title": "[NEERC 2016] Indiana Jones and the Uniform Cave", "background": "这是一道 IO 交互题。", "description": "Indiana Jones has stuck in the Uniform Cave. There are many round chambers in the cave, and all of them are indistinguishable from each other. Each chamber has the same number of one-way passages evenly distributed along the chamber’s wall. Passages are indistinguishable from each other, too. The Cave is magical. All passages lead to other chambers or to the same one. However, the last passage, after all passages are visited, leads to the treasure. Even the exact number of chambers is a mystery. It is known that each chamber is reachable from each other chamber using the passages.\n\nDr. Jones noticed that each chamber has a stone in the center. He decided to use these stones to mark chambers and passages. A stone can be placed to the left or to the right of one of the passages. When Indiana Jones enters the chamber all that he can observe is the location of the stone in the chamber. He can move the stone to the desired location and take any passage leading out of the chamber.\n\nYour task is to help Indiana Jones to visit every passage in the Uniform Cave and find the treasure.", "inputFormat": "First, the testing system writes the integer m — the number of passages in each chamber ($2 \\leq m \\le 20$).\n\nDr. Jones enters the chamber and sees, in the next line, where the stone is placed: either in the “center” of the chamber or to the “left”, or to the “right” of some passage. On the first visit to the chamber, the stone is in the center.\n\nYour solution shall output his actions: the number and the side of the passage to place the stone to, and the number of the passage to take. Both numbers are relative to the passage marked by the stone, counting clockwise from 0 to m − 1. If the stone is in the center of the chamber, the origin is random.\n\nFor example, “3 left 1” tells that Dr. Jones moves the stone three passages clockwise and places it to the left of the passage, then he takes the passage to the right of the initial stone position.\n\nAfter each move testing system tells either the location of the stone in the next chamber or “treasure”, if Indiana Jones had found it. The testing system writes “treasure” when all the passages are visited.\n\nIf Dr. Jones does not find the treasure room after 20 000 passages are taken, he starves to death, and your solution receives the “Wrong Answer” outcome. You also receive this outcome if your solution terminates before all passages are taken.\n\nThe total number of chambers in the cave is unknown, but you may assume that it does not exceed 20, and that each chamber is reachable from every other chamber.", "outputFormat": "", "hint": "Dr. Jones enters the example cave and sees that the stone in the first chamber is in the center. He marks the chamber by placing the stone to the left of some passage and takes it. He sees the chamber where the stone is to the left of the passage, so he is in the first chamber again. He moves the stone clockwise and takes the passage marked by it. This passage leads to the second chamber. He marks it by placing the stone to the right of some passage and takes another one. He is in the first chamber again, so he returns to the second chamber and takes the remaining passage. This passage leads to the treasure.", "locale": "en"}, "zh-CN": {"title": "[NEERC 2016] Indiana Jones and the Uniform Cave", "background": "", "description": "现在在一个洞穴里寻宝。这个洞穴有 $n$ 个房间。房间是不可区分的。每个房间都引出 $m$ 个单向道路，终点可以是自己也可以是其它房间。这些单向道路的入口均匀地分布在房间的墙壁上，且每条单向道路也是不可区分的。保证整个有向图是强连通的。你一开始在某一个房间，如果遍历了所有的边，就能找到宝藏。\n\n每个房间有一个石子，这也是你区分房间和道路的唯一工具。一开始石子是在这个房间的某一个通道的入口前，并且是放在中央的。你每到一个房间，可以选择将石子移动到某个通道前，把它放在通道左边或者右边（不能是中间），然后再从某个通道走出去。你不可以把石子带出房间。你并没有携带过多的食物，所以如果你走了超过 $20000$ 条边，你就会因为食物耗尽而饿死。你要在规定步数之内找到宝藏。", "inputFormat": "共 $m$ 行，每行一个字符串，表示该房间内石头被放置的位置为某个通道的 $\"center\"$，$\"left\"$ 或 $\"right\"$。当第一次到达一个墓室时，石头处在中间(center)。", "outputFormat": "每行一个非负整数 $st$，表示将石头放在原所在位置顺时针方向第 $st$ 个通道入口；一个字符串，表示将它放在该通道入口 $dir$ 的位置（$\"center\"$，$\"left\"$ 或 $\"right\"$）；一个非负整数 $pa$ ，表示从石子的原来位置顺时针方向第 $pa$ 个通道走出。\n\n通道顺时针从 $0$ 到 $m−1$ 编号。如果石头一开始是在中间（$center$），它会位于随机一个通道入口处。\n\n每走一步，评测机会返回该房间的石头的位置或者 $\"treasure\"$ （如果您找到了宝藏且所有的通道都被走过时，就会反馈 $\"treasure\"$ ）。\n\n**举个栗子**：`3 left 1` 表示将石头顺时针移动了 $3$ 个通道，并将其放置在该通道的左侧，然后走向最初石头所在位置的右侧的通道。\n\n你最多可以进行 $20000$ 次操作。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P7124", "type": "P", "difficulty": 6, "samples": [["6\n1 1 2 3 3\n6\n1 1 2 3 3", "=1+1+3+5+6=2+2=4----+4+2=3+3+6=5-+5=6!\n=1+1+3+5+6=2+2=4----+4+2=3+3+6=5-+5=6!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2008", "Special Judge", "O2优化", "Ynoi"], "title": "[Ynoi2008] stcm", "background": "w33z 是良心出题人！\n\n请使用高效输出方式，本题最多需要输出 50MB。", "description": "给定一棵树，你可以维护一个集合，支持三种操作：\n\n1. 当前集合中插入一个节点 $x$\n2. 撤回上一次插入操作\n3. 将当前点集标为第 $i$ 个点的子树补信息\n\n一个点 $x$ 的子树补信息定义为，树的点集除去 $x$ 的子树（包括 $x$）内的点得到的集合；\n需要保证每个点的子树补信息都是正确的。", "inputFormat": "**本题输入含有多组测试数据。**\n\n一组测试数据格式为：\n\n第一行一个正整数 $n$。\n\n之后一行 $n-1$ 个正整数，第 $i$ 个数表示 $i+1$ 节点的父亲节点 $j$，保证 $j<i+1$。\n\n请读入至 EOF。", "outputFormat": "对每一组数据，输出一个字符串，从左往右，每个\"+x\"形式的子串代表进行一次 1 操作，对象为编号 $x$ 的节点，每个\"-\"子串代表进行一次 2 操作，每个\"=x\"形式的子串代表进行一次 3 操作，对象为编号 $x$ 的节点，每个\"!\"子串代表全部操作都已结束，在其后面的任何输入会被忽略，字符串必须以\"!\"表示结束。\n\n输出的字符串中不允许以任何空白字符分隔。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078&nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^5$，$1\\le T\\le 3$。\n\n题目采用 Special Judge 评测。\n\n允许进行的 1 操作次数为 $4.5 \\times 10^6$ 次，不允许插入一个当前集合中存在的元素。\n\n当最后一次未被撤回的插入操作不存在时，不允许进行 2 操作。\n\n对每个点，必须对其进行**恰好一次** 3 操作。\n\n**所有测试数据输出独立检验。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2008] stcm", "background": "w33z 是良心出题人！\n\n请使用高效输出方式，本题最多需要输出 50MB。", "description": "给定一棵树，你可以维护一个集合，支持三种操作：\n\n1. 当前集合中插入一个节点 $x$\n2. 撤回上一次插入操作\n3. 将当前点集标为第 $i$ 个点的子树补信息\n\n一个点 $x$ 的子树补信息定义为，树的点集除去 $x$ 的子树（包括 $x$）内的点得到的集合；\n需要保证每个点的子树补信息都是正确的。", "inputFormat": "**本题输入含有多组测试数据。**\n\n一组测试数据格式为：\n\n第一行一个正整数 $n$。\n\n之后一行 $n-1$ 个正整数，第 $i$ 个数表示 $i+1$ 节点的父亲节点 $j$，保证 $j<i+1$。\n\n请读入至 EOF。", "outputFormat": "对每一组数据，输出一个字符串，从左往右，每个\"+x\"形式的子串代表进行一次 1 操作，对象为编号 $x$ 的节点，每个\"-\"子串代表进行一次 2 操作，每个\"=x\"形式的子串代表进行一次 3 操作，对象为编号 $x$ 的节点，每个\"!\"子串代表全部操作都已结束，在其后面的任何输入会被忽略，字符串必须以\"!\"表示结束。\n\n输出的字符串中不允许以任何空白字符分隔。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078&nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^5$，$1\\le T\\le 3$。\n\n题目采用 Special Judge 评测。\n\n允许进行的 1 操作次数为 $4.5 \\times 10^6$ 次，不允许插入一个当前集合中存在的元素。\n\n当最后一次未被撤回的插入操作不存在时，不允许进行 2 操作。\n\n对每个点，必须对其进行**恰好一次** 3 操作。\n\n**所有测试数据输出独立检验。**", "locale": "zh-CN"}}}
{"pid": "P7125", "type": "P", "difficulty": 7, "samples": [["10 10\n2 2 2 1 2 7 7 9 6 10\n1 4\n4 4\n1 3\n2 6\n6 6\n7 10\n2 6\n4 10\n3 5\n3 7\n", "2\n0\n2\n1\n0\n3\n1\n6\n0\n1\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2008", "O2优化", "Ynoi"], "title": "[Ynoi2008] rsmemq", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，定义 $x$ 为区间 $[l, r]$ 的众数当且仅当不存在 $y$ 使得 $y$ 在区间 $[l, r]$ 中的出现次数**大于** $x$ 在区间 $[l,r]$ 中的出现次数。\n\n有 $m$ 次询问，每次询问给出 $l, r$，求有多少二元组 $(l',r')$ 满足 $l\\le l'\\le r'\\le r$，且 $[l', r']$ 的区间长度为奇数，且 $(l' + r') / 2$**（注意这里是下标而不是下标对应的值）**&#8203;是区间 $[l', r']$ 中的众数。", "inputFormat": "输入的第一行包含两个数 $n$，$m$。\n\n之后一行 $n$ 个数表示这个序列。\n\n之后 $m$ 行，每行两个数 $l$，$r$ 表示一次询问。\n\n", "outputFormat": "输出共 $m$ 行，表示每个询问对应的答案。", "hint": "Idea：yummy&nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477&czr，Data：nzhtl1477(partially uploaded)\n\n对于 $100\\%$ 的数据，其中 $1\\le n,m\\le 5\\times 10^5$，$1\\le l\\le r\\le n$，$1\\le a_i\\le n$，所有数值为整数。\n\n样例解释：\n\n$[1,4]$ 中满足条件的子区间为 $[1,3]$，$[2,2]$。\n\n$[1,3]$ 中满足条件的子区间为 $[1,3]$，$[2,2]$。\n\n$[2,6]$ 中满足条件的子区间为 $[2,2]$。\n\n$[7,10]$ 中满足条件的子区间为 $[7,7]$，$[8,10]$，$[10,10]$。\n\n$[4,10]$ 中满足条件的子区间为 $[7,7]$，$[6,8]$，$[5,9]$，$[4,10]$，$[8,10]$，$[10,10]$。\n\n$[3,7]$ 中满足条件的子区间为 $[7,7]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2008] rsmemq", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，定义 $x$ 为区间 $[l, r]$ 的众数当且仅当不存在 $y$ 使得 $y$ 在区间 $[l, r]$ 中的出现次数**大于** $x$ 在区间 $[l,r]$ 中的出现次数。\n\n有 $m$ 次询问，每次询问给出 $l, r$，求有多少二元组 $(l',r')$ 满足 $l\\le l'\\le r'\\le r$，且 $[l', r']$ 的区间长度为奇数，且 $(l' + r') / 2$**（注意这里是下标而不是下标对应的值）**&#8203;是区间 $[l', r']$ 中的众数。", "inputFormat": "输入的第一行包含两个数 $n$，$m$。\n\n之后一行 $n$ 个数表示这个序列。\n\n之后 $m$ 行，每行两个数 $l$，$r$ 表示一次询问。\n\n", "outputFormat": "输出共 $m$ 行，表示每个询问对应的答案。", "hint": "Idea：yummy&nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477&czr，Data：nzhtl1477(partially uploaded)\n\n对于 $100\\%$ 的数据，其中 $1\\le n,m\\le 5\\times 10^5$，$1\\le l\\le r\\le n$，$1\\le a_i\\le n$，所有数值为整数。\n\n样例解释：\n\n$[1,4]$ 中满足条件的子区间为 $[1,3]$，$[2,2]$。\n\n$[1,3]$ 中满足条件的子区间为 $[1,3]$，$[2,2]$。\n\n$[2,6]$ 中满足条件的子区间为 $[2,2]$。\n\n$[7,10]$ 中满足条件的子区间为 $[7,7]$，$[8,10]$，$[10,10]$。\n\n$[4,10]$ 中满足条件的子区间为 $[7,7]$，$[6,8]$，$[5,9]$，$[4,10]$，$[8,10]$，$[10,10]$。\n\n$[3,7]$ 中满足条件的子区间为 $[7,7]$。", "locale": "zh-CN"}}}
{"pid": "P7126", "type": "P", "difficulty": 7, "samples": [["10 9 2\n1 1 1 2 3 4 1 1 1\n1 3\n2 4\n3 5\n4 6\n5 7\n6 8\n7 9\n8 10\n5 5", "1\n1\n2\n3\n3\n3\n2\n1\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2008", "O2优化", "Ynoi"], "title": "[Ynoi2008] rdCcot", "background": "", "description": "给一棵边权为 $1$ 的树和一个常数 $C$，节点用 $1$ 到 $n$ 的整数表示。\n\n定义 $dist(a,b)$ 为节点 $a,b$ 在树上的距离，即 $a$ 到 $b$ 的简单路径上的边权和，特别地，$dist(a,a) = 0$。  \n\n每次查询的时候给出一个区间 $[l,r]$，查询有多少个 C-块，定义如下：  \n\n对任意两个节点 $a,b$，定义 $a,b$ 是 C-连通的，当且仅当存在一个长为 $t$ 的节点序列 $\\{v_i\\}$，满足：  \n\n1. $v_1=a$  \n2. $v_t=b$  \n3. 对任意 $1\\le i\\le t-1$，$dist(v_i,v_{i+1})\\le C$  \n4. 对任意 $1\\le i\\le t$，$l\\le v_i\\le r$  \n\n定义“C-块”为一个点集 $S$，满足：  \n\n1. 对任意 $a$ 属于 $S$，$b$ 属于 $S$ 的补集，$a,b$ 不 C-连通  \n2. 对任意 $a,b$ 属于 $S$，$a$ 和 $b$ C-连通  \n3. 对任意 $a$ 属于 $S$，有 $l\\le a \\le r$\n", "inputFormat": "第一行三个数 $n$，$m$，$C$ 依次表示树的节点个数，询问次数，还有常数 $C$；\n\n第二行共 $n-1$ 个数 $p_2\\;p_3\\;\\dots\\;p_n$，表示对于 $2 \\le i\\le n$ 的整数 $i$，$i$ 和 $p_i$ 之间有一条无向边；\n\n保证输入的数据构成一棵树；\n\n之后 $m$ 行，每行两个数 $l\\;\\;r$，表示这次询问的区间是 $[l,r]$，保证 $l \\le r$；\n\n保证 $1 \\le n\\le 3\\cdot 10^5,1 \\le m\\le 6\\cdot 10^5$。", "outputFormat": "共 $m$ 行，依次回答各组询问：每行输出一行一个整数表示这组询问的答案。\n\n", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：nzhtl1477&ccz181078，Data：ccz181078\n\n本题有多个子任务，每个子任务可能包含多个测试点，只有通过了一个子任务中的所有测试点才能得到该子任务的分数。\n\n每个子任务的测试点满足一些特殊的限制，具体如下表：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/14tqwasg.png)\n\n其中，性质1、性质2的含义如下：\n\n性质1：存在一个点 $w$ 使得 $dist(1,w)=n-1$；\n\n性质2：$n=m$，且第 $i$ 次询问为 $l=1,\\;r=i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2008] rdCcot", "background": "", "description": "给一棵边权为 $1$ 的树和一个常数 $C$，节点用 $1$ 到 $n$ 的整数表示。\n\n定义 $dist(a,b)$ 为节点 $a,b$ 在树上的距离，即 $a$ 到 $b$ 的简单路径上的边权和，特别地，$dist(a,a) = 0$。  \n\n每次查询的时候给出一个区间 $[l,r]$，查询有多少个 C-块，定义如下：  \n\n对任意两个节点 $a,b$，定义 $a,b$ 是 C-连通的，当且仅当存在一个长为 $t$ 的节点序列 $\\{v_i\\}$，满足：  \n\n1. $v_1=a$  \n2. $v_t=b$  \n3. 对任意 $1\\le i\\le t-1$，$dist(v_i,v_{i+1})\\le C$  \n4. 对任意 $1\\le i\\le t$，$l\\le v_i\\le r$  \n\n定义“C-块”为一个点集 $S$，满足：  \n\n1. 对任意 $a$ 属于 $S$，$b$ 属于 $S$ 的补集，$a,b$ 不 C-连通  \n2. 对任意 $a,b$ 属于 $S$，$a$ 和 $b$ C-连通  \n3. 对任意 $a$ 属于 $S$，有 $l\\le a \\le r$\n", "inputFormat": "第一行三个数 $n$，$m$，$C$ 依次表示树的节点个数，询问次数，还有常数 $C$；\n\n第二行共 $n-1$ 个数 $p_2\\;p_3\\;\\dots\\;p_n$，表示对于 $2 \\le i\\le n$ 的整数 $i$，$i$ 和 $p_i$ 之间有一条无向边；\n\n保证输入的数据构成一棵树；\n\n之后 $m$ 行，每行两个数 $l\\;\\;r$，表示这次询问的区间是 $[l,r]$，保证 $l \\le r$；\n\n保证 $1 \\le n\\le 3\\cdot 10^5,1 \\le m\\le 6\\cdot 10^5$。", "outputFormat": "共 $m$ 行，依次回答各组询问：每行输出一行一个整数表示这组询问的答案。\n\n", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：nzhtl1477&ccz181078，Data：ccz181078\n\n本题有多个子任务，每个子任务可能包含多个测试点，只有通过了一个子任务中的所有测试点才能得到该子任务的分数。\n\n每个子任务的测试点满足一些特殊的限制，具体如下表：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/14tqwasg.png)\n\n其中，性质1、性质2的含义如下：\n\n性质1：存在一个点 $w$ 使得 $dist(1,w)=n-1$；\n\n性质2：$n=m$，且第 $i$ 次询问为 $l=1,\\;r=i$。", "locale": "zh-CN"}}}
{"pid": "P7127", "type": "P", "difficulty": 2, "samples": [["2\n0\n1", "0\n1/4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "计算几何", "2020"], "title": "「RdOI R1」一次函数(function)", "background": "**请使用较快的读入方式。**\n\n众所周知，一次函数的解析式如下：\n\n$$y=kx+b$$\n\n或者，我们可以表示为：\n\n$$f(x)=kx+b$$\n\n这个就是一次函数的解析式，下文中用到的解析式均用 $y=kx+b$ 表示。\n\n- 如果不知道什么是一次函数的[戳我](https://baike.baidu.com/item/%E4%B8%80%E6%AC%A1%E5%87%BD%E6%95%B0)。\n- 如果不知道什么是函数图像的[戳我](https://baike.baidu.com/item/%E5%87%BD%E6%95%B0%E5%9B%BE%E5%83%8F/514135)。", "description": "设 $S_k$ 表示直线 $l_{k1}:y=kx+k-1$，$l_{k2}:y=(k+1)x+k$ 与 $x$ 轴围成的三角形的面积，求：\n\n$$\\sum_{i=1}^nS_i$$\n\n本题中，共有 $t$ 次询问，每次询问给出 $n_i$，求上式在 $n=n_i$ 时的取值。\n\n若 $n<1$，该和式的值视作 $0$。", "inputFormat": "一共 $t+1$ 行。\n\n第一行，一个整数 $t$，表示有 $t$ 组测试数据。\n\n接下来 $t$ 行，每行一个整数 $n_i$，含义如题面所述。", "outputFormat": "一共 $t$ 行。\n\n每一行，每行一个数表示你所求得的答案。\n\n结果可能是分数，请**约分**至最简分数，分数请用 `xxx/xxx` 表示，如 $\\dfrac{1}{2}$ 表示为 `1/2`，$\\dfrac{2}{4}$ 表示为 `1/2`，请注意约分。\n\n注：若答案为 $0$，请输出 `0`。", "hint": "【样例解释】\n\n当 $n=0$ 时，根据题意，输出 $0$。\n\n当 $n=1$ 时，$S_1$ 就是 $y=x$、$y=2x+1$ 与 $x$ 轴所夹面积，为 $\\dfrac{1}{4}$。\n\n---\n\n【数据范围】\n\n- 对于 $5\\%$ 的数据，$t \\le 100,n=0$。\n- 对于另外 $20\\%$ 的数据，$t \\le 100,n \\le 2020$。\n- 对于另外 $20\\%$ 的数据，$t \\le 5 \\times 10^4,n \\le 5 \\times 10^3$。\n- 对于 $100\\%$ 的数据，$1 \\le t \\le 2 \\times 10^6,0 \\le n \\le 2 \\times 10^6$。\n\n---\n\n【说明/提示】\n\n- 建议画图思考。\n- **请注意输出答案的时候约分**。\n- **请使用较快的读入方式**。\n\n---\n\n【文件读入读出】**（模拟，提交代码时不需使用）**\n\n- 文件名：`function.cpp`\n- 读入文件名：`function.in`\n- 读出文件名：`function.out`", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RdOI R1」一次函数(function)", "background": "**请使用较快的读入方式。**\n\n众所周知，一次函数的解析式如下：\n\n$$y=kx+b$$\n\n或者，我们可以表示为：\n\n$$f(x)=kx+b$$\n\n这个就是一次函数的解析式，下文中用到的解析式均用 $y=kx+b$ 表示。\n\n- 如果不知道什么是一次函数的[戳我](https://baike.baidu.com/item/%E4%B8%80%E6%AC%A1%E5%87%BD%E6%95%B0)。\n- 如果不知道什么是函数图像的[戳我](https://baike.baidu.com/item/%E5%87%BD%E6%95%B0%E5%9B%BE%E5%83%8F/514135)。", "description": "设 $S_k$ 表示直线 $l_{k1}:y=kx+k-1$，$l_{k2}:y=(k+1)x+k$ 与 $x$ 轴围成的三角形的面积，求：\n\n$$\\sum_{i=1}^nS_i$$\n\n本题中，共有 $t$ 次询问，每次询问给出 $n_i$，求上式在 $n=n_i$ 时的取值。\n\n若 $n<1$，该和式的值视作 $0$。", "inputFormat": "一共 $t+1$ 行。\n\n第一行，一个整数 $t$，表示有 $t$ 组测试数据。\n\n接下来 $t$ 行，每行一个整数 $n_i$，含义如题面所述。", "outputFormat": "一共 $t$ 行。\n\n每一行，每行一个数表示你所求得的答案。\n\n结果可能是分数，请**约分**至最简分数，分数请用 `xxx/xxx` 表示，如 $\\dfrac{1}{2}$ 表示为 `1/2`，$\\dfrac{2}{4}$ 表示为 `1/2`，请注意约分。\n\n注：若答案为 $0$，请输出 `0`。", "hint": "【样例解释】\n\n当 $n=0$ 时，根据题意，输出 $0$。\n\n当 $n=1$ 时，$S_1$ 就是 $y=x$、$y=2x+1$ 与 $x$ 轴所夹面积，为 $\\dfrac{1}{4}$。\n\n---\n\n【数据范围】\n\n- 对于 $5\\%$ 的数据，$t \\le 100,n=0$。\n- 对于另外 $20\\%$ 的数据，$t \\le 100,n \\le 2020$。\n- 对于另外 $20\\%$ 的数据，$t \\le 5 \\times 10^4,n \\le 5 \\times 10^3$。\n- 对于 $100\\%$ 的数据，$1 \\le t \\le 2 \\times 10^6,0 \\le n \\le 2 \\times 10^6$。\n\n---\n\n【说明/提示】\n\n- 建议画图思考。\n- **请注意输出答案的时候约分**。\n- **请使用较快的读入方式**。\n\n---\n\n【文件读入读出】**（模拟，提交代码时不需使用）**\n\n- 文件名：`function.cpp`\n- 读入文件名：`function.in`\n- 读出文件名：`function.out`", "locale": "zh-CN"}}}
{"pid": "P7128", "type": "P", "difficulty": 3, "samples": [["3\n3 1 2", "1 3\n1 2"], ["7\n1 3 2 7 6 4 5", "2 4\n1 2\n1 3\n3 7\n2 5\n1 2\n1 3\n3 6\n1 2\n2 5\n1 3\n1 2\n2 4\n1 2\n1 3\n1 2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "Special Judge"], "title": "「RdOI R1」序列(sequence)", "background": "", "description": "有一序列 $x$ ，长度为 $q$ ，序列中的每个数只出现一次。\n\n即：序列 $x$ 是 $1$ 到 $q$ 的一个排列。\n\n对于序列 $x$ 的操作只有一种：对于一个数 $x_i$ ，你可以使其与 $x_{2i}$ 或 $x_{2i+1}$ 交换位置(如果它们存在的话)。\n\n现在请你使序列 $x$ 变为一个升序序列，并按顺序输出你进行的操作。", "inputFormat": "输入数据共 $2$ 行。\n\n第 $1$ 行， $1$ 个正整数，$q$。\n\n第 $2$ 行， $q$ 个正整数， $x_{1～q}$。", "outputFormat": "输出数据共 $ans$ 行， $ans$ 表示你的操作次数。\n\n第 $1$ ~ $ans$ 行，每行两个整数，$i$ ，$j$ ，表示交换 $x_i$ 和 $x_j$ 的位置 $(i < j)$。", "hint": "【样例说明】\n\n样例#1说明：\n\n交换 $2$ 和 $3$ ，序列变为：$2,1,3$。\n\n再交换 $2$ 和 $1$ ，序列变为：$1,2,3$。\n\n【数据范围】\n\n对于 $40\\%$ 的数据，$3 \\le q \\le 2^{10}$。\n\n对于 $100\\%$ 的数据，$3 \\le q \\le 2^{17}$，$1 \\le x_i \\le q$。\n\n【提示】\n\n- 使用 Special Judge。\n- $q = 2 ^ p - 1(p \\in \\mathbb{N}^*)$  \n- 最多进行 $2q\\times\\lceil\\log_2 q\\rceil$ 次操作。\n- 样例的输出数据只是众多方案中的一种。\n- 因为是 `special judge` ，因此不提供附加样例。\n\n---\n\n【文件读入读出】**（模拟，提交代码时不需使用）**\n\n- 文件名：`sequence.cpp`\n- 读入文件名：`sequence.in`\n- 读出文件名：`sequence.out`\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RdOI R1」序列(sequence)", "background": "", "description": "有一序列 $x$ ，长度为 $q$ ，序列中的每个数只出现一次。\n\n即：序列 $x$ 是 $1$ 到 $q$ 的一个排列。\n\n对于序列 $x$ 的操作只有一种：对于一个数 $x_i$ ，你可以使其与 $x_{2i}$ 或 $x_{2i+1}$ 交换位置(如果它们存在的话)。\n\n现在请你使序列 $x$ 变为一个升序序列，并按顺序输出你进行的操作。", "inputFormat": "输入数据共 $2$ 行。\n\n第 $1$ 行， $1$ 个正整数，$q$。\n\n第 $2$ 行， $q$ 个正整数， $x_{1～q}$。", "outputFormat": "输出数据共 $ans$ 行， $ans$ 表示你的操作次数。\n\n第 $1$ ~ $ans$ 行，每行两个整数，$i$ ，$j$ ，表示交换 $x_i$ 和 $x_j$ 的位置 $(i < j)$。", "hint": "【样例说明】\n\n样例#1说明：\n\n交换 $2$ 和 $3$ ，序列变为：$2,1,3$。\n\n再交换 $2$ 和 $1$ ，序列变为：$1,2,3$。\n\n【数据范围】\n\n对于 $40\\%$ 的数据，$3 \\le q \\le 2^{10}$。\n\n对于 $100\\%$ 的数据，$3 \\le q \\le 2^{17}$，$1 \\le x_i \\le q$。\n\n【提示】\n\n- 使用 Special Judge。\n- $q = 2 ^ p - 1(p \\in \\mathbb{N}^*)$  \n- 最多进行 $2q\\times\\lceil\\log_2 q\\rceil$ 次操作。\n- 样例的输出数据只是众多方案中的一种。\n- 因为是 `special judge` ，因此不提供附加样例。\n\n---\n\n【文件读入读出】**（模拟，提交代码时不需使用）**\n\n- 文件名：`sequence.cpp`\n- 读入文件名：`sequence.in`\n- 读出文件名：`sequence.out`\n", "locale": "zh-CN"}}}
{"pid": "P7129", "type": "P", "difficulty": 5, "samples": [["2 20\n9 1 4 2\n3 2 4 1\n11 2 4 3\n2 3 2 2", "48"], ["3 20\n9 2 1 1\n10000\n1 4 1 1\n1\n1 4 1 1\n2", "20003"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "O2优化"], "title": "「RdOI R1」冰淇淋游戏(play)", "background": "又有新游戏可玩啦！", "description": "小 T 发现最近市面上出现了一款游戏，这款游戏分为 $n$ 关，第 $i$ 关玩一次需要 $s_i$ 个体力，最多可以玩 $m_i$ 次第 $i$ 关。想玩第 $i$ 关，必须先玩第 $i-1$ 关至少一次，当然，玩第 $1$ 关不需要这个先决条件。\n\n游戏规则是这样的（对于第 $i$ 关）：\n\n一共有 $k_i$ 个冰淇淋排成一排，第 $j$ 个冰淇淋的美味度为 $y_{i,j}$，每次你需要选择一个冰淇淋吃掉，共吃 $k_i$ 次，在第 $j$ 次吃第 $l$ 个冰淇淋可以获得 $j\\times y_{i,l}$ 分。\n\n当然，要想吃冰淇淋可没有那么简单，你需要在第一次吃指定的第 $c_i$ 个冰淇淋，接下来每次只能吃已经吃完的段的两边的冰淇淋，比如第一次吃的是第 $2$ 个冰淇淋，第二次可以吃第 $1$ 个或第 $3$ 个（如果有的话）。\n\n因为小 T 的脑子不太够计算这复杂的分数，所以他想求助你，在使用体力不超过 $t$ 的情况下，最多可以获得多少分数。", "inputFormat": "第一行有两个整数 $n,t$，分别表示关卡数和体力数。\n\n接下来第 $2$ 到第 $2\\times n+1$ 行，第 $2\\times i$ 行和第 $2\\times i+1$ 行描述第 $i$ 关。\n\n第 $2\\times i$ 行四个整数 $s_i,m_i,k_i,c_i$，意义见题面。\n\n第 $2\\times i+1$ 行 $k_i$ 个整数，第 $j$ 个为 $y_{i,j}$，意义见题面。", "outputFormat": "一行一个整数，为使用体力不超过 $t$ 的情况下的获得的分数的最大值。", "hint": "【样例解释】\n\n样例1：\n\n最优解为玩一次第一关再玩一次第二关。\n\n第一关按照第 $2,3,4,1$ 个的顺序吃冰淇淋，可以获得 $2\\times 1+4\\times 2+1\\times 3+3\\times 4=2+8+3+12=25$ 的分数。\n\n第二关按照第 $3,4,2,1$ 个的顺序吃冰淇淋，可以获得 $2\\times 1+2\\times 2+3\\times 3+2\\times 4=2+4+9+8=23$ 的分数。\n\n所以最多可以获得 $25\\times 1+23\\times 1=48$ 的分数。\n\n样例2：\n\n最优解为玩两次第一关，一次第二关，一次第三关。\n\n可以获得 $10000 \\times 2+1 \\times 1+2 \\times 1=20003$ 的分数。\n\n---\n\n【数据范围】\n\n对于 $10\\%$ 的数据，$1 \\le n \\le 10 , 1 \\le k_i,m_i,s_i,y_{i,j} \\le 100 , 1 \\le t \\le 100$。\n\n对于另外 $40\\%$ 的数据，$1 \\le n \\le 100 , 1 \\le k_i,m_i,s_i,y_{i,j} \\le 100 , 1 \\le t \\le 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 200 , 1 \\le k_i,m_i,s_i,y_{i,j} \\le 500,1 \\le t \\le 10^5,1\\le c_i\\le k_i$。\n\n---\n\n【说明/提示】\n\n- 尝试理解样例\n\n---\n\n【文件读入读出】**（模拟，提交代码时不需使用）**\n\n- 文件名：`play.cpp`\n- 读入文件名：`play.in`\n- 读出文件名：`play.out`", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RdOI R1」冰淇淋游戏(play)", "background": "又有新游戏可玩啦！", "description": "小 T 发现最近市面上出现了一款游戏，这款游戏分为 $n$ 关，第 $i$ 关玩一次需要 $s_i$ 个体力，最多可以玩 $m_i$ 次第 $i$ 关。想玩第 $i$ 关，必须先玩第 $i-1$ 关至少一次，当然，玩第 $1$ 关不需要这个先决条件。\n\n游戏规则是这样的（对于第 $i$ 关）：\n\n一共有 $k_i$ 个冰淇淋排成一排，第 $j$ 个冰淇淋的美味度为 $y_{i,j}$，每次你需要选择一个冰淇淋吃掉，共吃 $k_i$ 次，在第 $j$ 次吃第 $l$ 个冰淇淋可以获得 $j\\times y_{i,l}$ 分。\n\n当然，要想吃冰淇淋可没有那么简单，你需要在第一次吃指定的第 $c_i$ 个冰淇淋，接下来每次只能吃已经吃完的段的两边的冰淇淋，比如第一次吃的是第 $2$ 个冰淇淋，第二次可以吃第 $1$ 个或第 $3$ 个（如果有的话）。\n\n因为小 T 的脑子不太够计算这复杂的分数，所以他想求助你，在使用体力不超过 $t$ 的情况下，最多可以获得多少分数。", "inputFormat": "第一行有两个整数 $n,t$，分别表示关卡数和体力数。\n\n接下来第 $2$ 到第 $2\\times n+1$ 行，第 $2\\times i$ 行和第 $2\\times i+1$ 行描述第 $i$ 关。\n\n第 $2\\times i$ 行四个整数 $s_i,m_i,k_i,c_i$，意义见题面。\n\n第 $2\\times i+1$ 行 $k_i$ 个整数，第 $j$ 个为 $y_{i,j}$，意义见题面。", "outputFormat": "一行一个整数，为使用体力不超过 $t$ 的情况下的获得的分数的最大值。", "hint": "【样例解释】\n\n样例1：\n\n最优解为玩一次第一关再玩一次第二关。\n\n第一关按照第 $2,3,4,1$ 个的顺序吃冰淇淋，可以获得 $2\\times 1+4\\times 2+1\\times 3+3\\times 4=2+8+3+12=25$ 的分数。\n\n第二关按照第 $3,4,2,1$ 个的顺序吃冰淇淋，可以获得 $2\\times 1+2\\times 2+3\\times 3+2\\times 4=2+4+9+8=23$ 的分数。\n\n所以最多可以获得 $25\\times 1+23\\times 1=48$ 的分数。\n\n样例2：\n\n最优解为玩两次第一关，一次第二关，一次第三关。\n\n可以获得 $10000 \\times 2+1 \\times 1+2 \\times 1=20003$ 的分数。\n\n---\n\n【数据范围】\n\n对于 $10\\%$ 的数据，$1 \\le n \\le 10 , 1 \\le k_i,m_i,s_i,y_{i,j} \\le 100 , 1 \\le t \\le 100$。\n\n对于另外 $40\\%$ 的数据，$1 \\le n \\le 100 , 1 \\le k_i,m_i,s_i,y_{i,j} \\le 100 , 1 \\le t \\le 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 200 , 1 \\le k_i,m_i,s_i,y_{i,j} \\le 500,1 \\le t \\le 10^5,1\\le c_i\\le k_i$。\n\n---\n\n【说明/提示】\n\n- 尝试理解样例\n\n---\n\n【文件读入读出】**（模拟，提交代码时不需使用）**\n\n- 文件名：`play.cpp`\n- 读入文件名：`play.in`\n- 读出文件名：`play.out`", "locale": "zh-CN"}}}
{"pid": "P7130", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n1 2\n1 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2020"], "title": "「RdOI R1」平衡常数(balance)", "background": "", "description": "给定一棵以 $1$ 为根的点带权有根树 $G=(V,E)$，第 $i$ 个节点的权值记为 \n $w_i$，以 $i$ 为根的子树的点集记为 $V_i$，求一个点集 $V'\\subseteq V$，满足以下条件：\n\n- $\\forall i$，都有 $|V_i \\cap V'| \\le \\lfloor \\frac{|V_i|}{2} \\rfloor$\n\n- 最大化 $\\sum _{i \\in V'} w_i$\n\n输出 $\\sum _{i\\in V'} w_i$ 即可，也就是选取的点的权值和。", "inputFormat": "第一行为一个正整数 $n$。\n\n第二行为 $n$ 个正整数 $w_i$。\n\n接下来 $n-1$ 行每行为两个整数 $u,v$，表示第 $i$ 条边的两个端点。", "outputFormat": "输出只有一行，为你所求得的最大总和。", "hint": "【数据范围】\n\n| 测试点编号 | $n\\leq$ | $w_i\\leq$ | 特殊性质 |\n| - | - | - | - |\n| $1\\sim2$ | $10$ | $10^3$ | |\n| $3\\sim 5$ | $2 \\times 10^3$ | $10^3$ | |\n| $6\\sim12$ | $10^5$ | $10^3$ | |\n| $13\\sim16$ | $5 \\times 10^5$ | $10^9$ | $v=u+1$ |\n| $17\\sim25$ | $5 \\times 10^5$ | $10^9$ | |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 5 \\times 10^5$，$0 < w_i \\leq 10^9$，$1 \\leq u,v \\leq n$。\n\n---\n\n【说明/提示】\n\n- Idea From : LCuter\n\n---\n\n【文件读入读出】**（模拟，提交代码时不需使用）**\n\n- 文件名：`balance.cpp`\n- 读入文件名：`balance.in`\n- 读出文件名：`balance.out`", "locale": "zh-CN", "translations": {"en": {"title": "\"RdOI R1\" Balance Constant (balance).", "background": "", "description": "Given a rooted weighted tree $G=(V,E)$ with root $1$, the weight of node $i$ is denoted by $w_i$. Let the set of nodes in the subtree rooted at $i$ be $V_i$. Find a node set $V'\\subseteq V$ that satisfies the following conditions:\n\n- For all $i$, $|V_i \\cap V'| \\le \\lfloor \\frac{|V_i|}{2} \\rfloor$.\n\n- Maximize $\\sum _{i \\in V'} w_i$.\n\nYou only need to output $\\sum _{i\\in V'} w_i$, i.e., the sum of the weights of the selected nodes.", "inputFormat": "The first line contains a positive integer $n$.\n\nThe second line contains $n$ positive integers $w_i$.\n\nThe next $n-1$ lines each contain two integers $u,v$, representing the two endpoints of an edge.", "outputFormat": "Output a single line containing the maximum total sum you computed.", "hint": "Constraints\n\n| Test Point ID | $n\\leq$ | $w_i\\leq$ | Special Property |\n| - | - | - | - |\n| $1\\sim2$ | $10$ | $10^3$ | |\n| $3\\sim 5$ | $2 \\times 10^3$ | $10^3$ | |\n| $6\\sim12$ | $10^5$ | $10^3$ | |\n| $13\\sim16$ | $5 \\times 10^5$ | $10^9$ | $v=u+1$ |\n| $17\\sim25$ | $5 \\times 10^5$ | $10^9$ | |\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 5 \\times 10^5$, $0 < w_i \\leq 10^9$, $1 \\leq u,v \\leq n$.\n\n---\n\nNotes / Hints\n\n- Idea From: LCuter.\n\n---\n\nFile Input/Output **(simulation, not needed when submitting code)**\n\n- File name: `balance.cpp`.\n- Input file name: `balance.in`.\n- Output file name: `balance.out`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "「RdOI R1」平衡常数(balance)", "background": "", "description": "给定一棵以 $1$ 为根的点带权有根树 $G=(V,E)$，第 $i$ 个节点的权值记为 \n $w_i$，以 $i$ 为根的子树的点集记为 $V_i$，求一个点集 $V'\\subseteq V$，满足以下条件：\n\n- $\\forall i$，都有 $|V_i \\cap V'| \\le \\lfloor \\frac{|V_i|}{2} \\rfloor$\n\n- 最大化 $\\sum _{i \\in V'} w_i$\n\n输出 $\\sum _{i\\in V'} w_i$ 即可，也就是选取的点的权值和。", "inputFormat": "第一行为一个正整数 $n$。\n\n第二行为 $n$ 个正整数 $w_i$。\n\n接下来 $n-1$ 行每行为两个整数 $u,v$，表示第 $i$ 条边的两个端点。", "outputFormat": "输出只有一行，为你所求得的最大总和。", "hint": "【数据范围】\n\n| 测试点编号 | $n\\leq$ | $w_i\\leq$ | 特殊性质 |\n| - | - | - | - |\n| $1\\sim2$ | $10$ | $10^3$ | |\n| $3\\sim 5$ | $2 \\times 10^3$ | $10^3$ | |\n| $6\\sim12$ | $10^5$ | $10^3$ | |\n| $13\\sim16$ | $5 \\times 10^5$ | $10^9$ | $v=u+1$ |\n| $17\\sim25$ | $5 \\times 10^5$ | $10^9$ | |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 5 \\times 10^5$，$0 < w_i \\leq 10^9$，$1 \\leq u,v \\leq n$。\n\n---\n\n【说明/提示】\n\n- Idea From : LCuter\n\n---\n\n【文件读入读出】**（模拟，提交代码时不需使用）**\n\n- 文件名：`balance.cpp`\n- 读入文件名：`balance.in`\n- 读出文件名：`balance.out`", "locale": "zh-CN"}}}
{"pid": "P7131", "type": "P", "difficulty": 6, "samples": [["3 3\n2 1 2\n1 1 1\nq 100 1 3\nm 2 2 0\nq 100 1 3", "27\n13"], ["见附件中的 turn-big-sample1.in", "见附件中的 turn-big-sample1.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020"], "title": "「RdOI R1」变换(turn)", "background": "", "description": "有 $n$ 个变换，其中第 $i$ 个有两个属性值 $p_i$ 和 $q_i$，当这个变换作用到 $x$ 时，$x$ 将会变成 $f_i(x),f_i(x)$ 的定义为：\n\n$$f_i(x)=\\left\\lfloor\\dfrac{x}{p_i}\\right\\rfloor+q_i$$\n\n给定 $m$ 条操作，操作分两种：\n\n**修改**操作可以修改某个变换的属性值；\n\n**查询**操作将会给定 $x$ 以及两个序号 $s$ 和 $t$，你需要计算并输出：\n\n$$f_{t}(f_{t-1}(\\cdots f_{s+1}(f_{s}(x))))$$", "inputFormat": "第一行：两个正整数表示 $n$ 和 $m$。\n\n第二行：$n$ 个整数，表示 $p_1,p_2,\\cdots,p_n$。\n\n第三行：$n$ 个整数，表示 $q_1,q_2,\\cdots,q_n$。\n\n接下来 $m$ 行，每行表示一个操作：\n\n修改 操作以字母 `m` 开头，后接三个参数 $i,p',q'$，表示将第 $i$ 个变换的属性值修改成 $p',q'$。保证任何时候属性都满足 $1\\leq p_i\\leq 1000, 0\\leq q_i\\leq 1000$。\n\n查询 操作以字母 `q` 开头，后接三个参数 $x,s,t$，意义见题面，保证 $s\\leq t, 0\\leq x\\leq 10^6$。", "outputFormat": "对每个询问操作，输出一个整数，表示所求的答案，以换行分隔。", "hint": "【数据范围】\n\n- 对于 $20\\%$ 的数据，$1 \\le n \\le 10^3,1 \\le m \\le 10^4$。\n- 对于另外 $30\\%$ 的数据，$1 \\le n \\le 10^4,1 \\le m \\le 10^5$。\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 10^5,1 \\le m \\le 2 \\times 10^5$。\n\n---\n\n【文件读入读出】**（模拟，提交代码时不需使用）**\n\n- 文件名：`turn.cpp`\n- 读入文件名：`turn.in`\n- 读出文件名：`turn.out`", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RdOI R1」变换(turn)", "background": "", "description": "有 $n$ 个变换，其中第 $i$ 个有两个属性值 $p_i$ 和 $q_i$，当这个变换作用到 $x$ 时，$x$ 将会变成 $f_i(x),f_i(x)$ 的定义为：\n\n$$f_i(x)=\\left\\lfloor\\dfrac{x}{p_i}\\right\\rfloor+q_i$$\n\n给定 $m$ 条操作，操作分两种：\n\n**修改**操作可以修改某个变换的属性值；\n\n**查询**操作将会给定 $x$ 以及两个序号 $s$ 和 $t$，你需要计算并输出：\n\n$$f_{t}(f_{t-1}(\\cdots f_{s+1}(f_{s}(x))))$$", "inputFormat": "第一行：两个正整数表示 $n$ 和 $m$。\n\n第二行：$n$ 个整数，表示 $p_1,p_2,\\cdots,p_n$。\n\n第三行：$n$ 个整数，表示 $q_1,q_2,\\cdots,q_n$。\n\n接下来 $m$ 行，每行表示一个操作：\n\n修改 操作以字母 `m` 开头，后接三个参数 $i,p',q'$，表示将第 $i$ 个变换的属性值修改成 $p',q'$。保证任何时候属性都满足 $1\\leq p_i\\leq 1000, 0\\leq q_i\\leq 1000$。\n\n查询 操作以字母 `q` 开头，后接三个参数 $x,s,t$，意义见题面，保证 $s\\leq t, 0\\leq x\\leq 10^6$。", "outputFormat": "对每个询问操作，输出一个整数，表示所求的答案，以换行分隔。", "hint": "【数据范围】\n\n- 对于 $20\\%$ 的数据，$1 \\le n \\le 10^3,1 \\le m \\le 10^4$。\n- 对于另外 $30\\%$ 的数据，$1 \\le n \\le 10^4,1 \\le m \\le 10^5$。\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 10^5,1 \\le m \\le 2 \\times 10^5$。\n\n---\n\n【文件读入读出】**（模拟，提交代码时不需使用）**\n\n- 文件名：`turn.cpp`\n- 读入文件名：`turn.in`\n- 读出文件名：`turn.out`", "locale": "zh-CN"}}}
{"pid": "P7132", "type": "P", "difficulty": 4, "samples": [["3 3\n3 1 1 ", "59"], ["10 13\n12 13 1 4 5 9 7 0 3 8 ", "851695394"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["O2优化"], "title": "小 L 的零食", "background": "小 L 很喜欢吃零食。", "description": "**提交时自动开启 O2 优化**。\n\n小 L 现在想把一些零食放在一个盒子里。但是零食没放稳就会摔坏，所以小 L 希望求出**有多少种稳定的堆放零食的方法**。\n\n零食都可以抽象成一个 $1\\times1$ 的正方形，而盒子的底部可以看成长度为 $n$ 的一维线段。准确地说，零食被分为 $n$ 堆，从左到右地放在盒子里面，依次记为第 $1,2,\\ldots,n$ 堆。我们认为每一堆的高度 $h_i$ 是这一堆零食的数量，且任意一堆都可以不包含任何零食。\n\n我们定义第 $i$ 堆零食是稳定的，当且仅当：\n\n- $h_i\\le m$，即这一堆零食高度不超过 $m$。\n- 在满足上一条的同时，满足以下两条之一或同时满足：\n  - $i=1$ 或 $i=n$，此时有一侧是盒子内壁所以这一堆不会倒下；\n  - $\\color{red}\\max\\{h_{i-1},h_{i+1}\\}\\ge h_i-d_i$，此时它两侧的两堆零食有一堆足够高可以支撑这一堆不倒下。\n\n我们定义一种稳定的堆放零食的方法，是一个长度为 $n$ 的 $h_i$ 的序列，满足按这个序列堆放出来的零食每一堆都是稳定的。\n\n显然盒子里最多放下 $n\\times m$ 个零食，我们认为小 L 的零食数量不少于 $n\\times m$，并且不必将所有零食全部放进盒子。额外地，我们认为**每一个零食都是完全一样的**。", "inputFormat": "总共包括 $2$ 行。\n\n第一行包含两个正整数 $n,m$。\n\n第二行包含 $n$ 个整数 $d_1,d_2\\ldots,d_n$，意义如【题目描述】中红色部分所示。\n\n每行的两个数字间由单个空格隔开，数据在 Windows 下生成。**行末不保证没有多余空格**。", "outputFormat": "一行一个整数，表示有多少种稳定的堆放零食的方法，**结果对 $998244353$ 取模**。", "hint": "本题采用如下计分策略：    \n**subtask $1$**（#$1\\sim{}$#$8$）：$10\\%$，$n,m\\le5$；  \n**subtask $2$**（#$9\\sim{}$#$12$）：$30\\%$，$n,m\\le5\\times10^2$；  \n**subtask $3$**（#$13\\sim{}$#$16$）：$20\\%$，$n,m\\le3\\times10^3$；  \n**subtask $4$**（#$17\\sim{}$#$24$）：$40\\%$，$n,m\\le7\\times10^3$。  \n对于 $100\\%$ 的数据：$1\\le n,m\\le7\\times10^3$，$0\\le d_i\\le m$。**你必须通过一个 subtask 内所有测试点，才被认为通过该 subtask。**\n\n**本题开启子任务依赖。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小 L 的零食", "background": "小 L 很喜欢吃零食。", "description": "**提交时自动开启 O2 优化**。\n\n小 L 现在想把一些零食放在一个盒子里。但是零食没放稳就会摔坏，所以小 L 希望求出**有多少种稳定的堆放零食的方法**。\n\n零食都可以抽象成一个 $1\\times1$ 的正方形，而盒子的底部可以看成长度为 $n$ 的一维线段。准确地说，零食被分为 $n$ 堆，从左到右地放在盒子里面，依次记为第 $1,2,\\ldots,n$ 堆。我们认为每一堆的高度 $h_i$ 是这一堆零食的数量，且任意一堆都可以不包含任何零食。\n\n我们定义第 $i$ 堆零食是稳定的，当且仅当：\n\n- $h_i\\le m$，即这一堆零食高度不超过 $m$。\n- 在满足上一条的同时，满足以下两条之一或同时满足：\n  - $i=1$ 或 $i=n$，此时有一侧是盒子内壁所以这一堆不会倒下；\n  - $\\color{red}\\max\\{h_{i-1},h_{i+1}\\}\\ge h_i-d_i$，此时它两侧的两堆零食有一堆足够高可以支撑这一堆不倒下。\n\n我们定义一种稳定的堆放零食的方法，是一个长度为 $n$ 的 $h_i$ 的序列，满足按这个序列堆放出来的零食每一堆都是稳定的。\n\n显然盒子里最多放下 $n\\times m$ 个零食，我们认为小 L 的零食数量不少于 $n\\times m$，并且不必将所有零食全部放进盒子。额外地，我们认为**每一个零食都是完全一样的**。", "inputFormat": "总共包括 $2$ 行。\n\n第一行包含两个正整数 $n,m$。\n\n第二行包含 $n$ 个整数 $d_1,d_2\\ldots,d_n$，意义如【题目描述】中红色部分所示。\n\n每行的两个数字间由单个空格隔开，数据在 Windows 下生成。**行末不保证没有多余空格**。", "outputFormat": "一行一个整数，表示有多少种稳定的堆放零食的方法，**结果对 $998244353$ 取模**。", "hint": "本题采用如下计分策略：    \n**subtask $1$**（#$1\\sim{}$#$8$）：$10\\%$，$n,m\\le5$；  \n**subtask $2$**（#$9\\sim{}$#$12$）：$30\\%$，$n,m\\le5\\times10^2$；  \n**subtask $3$**（#$13\\sim{}$#$16$）：$20\\%$，$n,m\\le3\\times10^3$；  \n**subtask $4$**（#$17\\sim{}$#$24$）：$40\\%$，$n,m\\le7\\times10^3$。  \n对于 $100\\%$ 的数据：$1\\le n,m\\le7\\times10^3$，$0\\le d_i\\le m$。**你必须通过一个 subtask 内所有测试点，才被认为通过该 subtask。**\n\n**本题开启子任务依赖。**", "locale": "zh-CN"}}}
{"pid": "P7133", "type": "P", "difficulty": 4, "samples": [["5 2\n1 0\n1 1\n2 2\n-1 2\n-2 -1\n-1 1\n-1 2", "4\n5"], ["见下发文件 ex_star2.in", "见下发文件 ex_star2.out"], ["见下发文件 ex_star3.in", "见下发文件 ex_star3.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "二分", "排序"], "title": "小 P 的星空", "background": "\n\n>星依云渚溅溅，露零玉液涓涓，宝砌哀兰剪剪。碧天如练，光摇北斗阑干。\n>\n>—— 【元】孟昉《天净沙 · 星依云渚溅溅》\n\n小 P 漫步于星空之下。\n\n“摘下星星送给你，你就是我的全世界”。\n\n“今夜，我不关心人类，我只想你”。", "description": "将星空看作一个平面直角坐标系，小 P 所在的位置为 $(0,0)$，即坐标原点。天上共有 $n$ 颗星星，第 $i$ 颗星星的坐标为 $(x_i,y_i)$。\n\n小 P 最初面向点 $(1,0)$，然后小 P 会进行 $m$ 次原地转动，第 $i$ 次转动后会面向点 $(u_i,v_i)$。\n\n他可以选择逆时针转动或顺时针转动，当面向此次旋转最终将要面向的方向时，此次转动立即停止。\n\n他相信，在转动过程中，越多的星星出现在他正前方，他【数据删除】。\n\n小 P 想知道，每一次转动过程中他最多可以让多少星星出现在他正前方（包括转动初始方向和结束方向正前方看到的星星）。", "inputFormat": "总共包括 $n+m+1$ 行。\n\n第一行包含两个正整数 $n,m$，分别表示星星颗数和转动次数。\n\n接下来的 $n$ 行，每行两个整数 $x_i,y_i$。\n\n接下来的 $m$ 行，每行两个整数 $u_i,v_i$，意义如【题目描述】中所述。\n\n每行的两个数字间由单个空格隔开，数据为 Linux 格式，行末保证没有多余空格。", "outputFormat": "$m$ 行，每行一个整数。第 $i$ 行的整数表示第 $i$ 次转动的答案。", "hint": "样例1示意图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h2t5eu1a.png)\n\n橙色点为星星，绿色点小 P 第一次的转动位置。第一次转动，从 $(1,0)$ 转到 $(-1,1)$。若顺时针转动(蓝色区域，包括边界)，$(1,0)$, $(-2,-1)$，共计 $2$ 颗星星；而逆时针转动(绿色区域，包括边界)，$(1,0)$, $(1,1)$,$(2,2)$,$(-1,2)$，共计 $4$ 颗星星。\n\n第二次转动，从 $(-1,1)$ 转到 $(-1,2)$，逆时针转动，$5$ 颗星星都会在转动过程中出现在小 P 正前方。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b22go7at.png)\n\n除测试点 $24$ 和 $25$ 外，其他测试点保证所有坐标的绝对值 $\\le 1000$。\n\n对于前 $12$ 个测试点，保证原点到任意星星形成的射线上没有其他星星。\n\n除 $23,25$ 测试点外，对于所有编号为奇数的测试点，保证小 P 初始面向方向和每次转动目标方向上没有任何星星。\n\n除 $22,24$ 测试点外，对于所有编号为偶数的测试点，保证小 P 初始面向方向和每次转动目标方向上至少有一颗星星。\n\n对于 $100\\%$ 的数据，保证星星的坐标互不相同，保证坐标不会出现 $(0,0)$，保证不会出现转动初始方向等于结束方向。\n\n样例 $3$ 满足偶数测试点的限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小 P 的星空", "background": "\n\n>星依云渚溅溅，露零玉液涓涓，宝砌哀兰剪剪。碧天如练，光摇北斗阑干。\n>\n>—— 【元】孟昉《天净沙 · 星依云渚溅溅》\n\n小 P 漫步于星空之下。\n\n“摘下星星送给你，你就是我的全世界”。\n\n“今夜，我不关心人类，我只想你”。", "description": "将星空看作一个平面直角坐标系，小 P 所在的位置为 $(0,0)$，即坐标原点。天上共有 $n$ 颗星星，第 $i$ 颗星星的坐标为 $(x_i,y_i)$。\n\n小 P 最初面向点 $(1,0)$，然后小 P 会进行 $m$ 次原地转动，第 $i$ 次转动后会面向点 $(u_i,v_i)$。\n\n他可以选择逆时针转动或顺时针转动，当面向此次旋转最终将要面向的方向时，此次转动立即停止。\n\n他相信，在转动过程中，越多的星星出现在他正前方，他【数据删除】。\n\n小 P 想知道，每一次转动过程中他最多可以让多少星星出现在他正前方（包括转动初始方向和结束方向正前方看到的星星）。", "inputFormat": "总共包括 $n+m+1$ 行。\n\n第一行包含两个正整数 $n,m$，分别表示星星颗数和转动次数。\n\n接下来的 $n$ 行，每行两个整数 $x_i,y_i$。\n\n接下来的 $m$ 行，每行两个整数 $u_i,v_i$，意义如【题目描述】中所述。\n\n每行的两个数字间由单个空格隔开，数据为 Linux 格式，行末保证没有多余空格。", "outputFormat": "$m$ 行，每行一个整数。第 $i$ 行的整数表示第 $i$ 次转动的答案。", "hint": "样例1示意图如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h2t5eu1a.png)\n\n橙色点为星星，绿色点小 P 第一次的转动位置。第一次转动，从 $(1,0)$ 转到 $(-1,1)$。若顺时针转动(蓝色区域，包括边界)，$(1,0)$, $(-2,-1)$，共计 $2$ 颗星星；而逆时针转动(绿色区域，包括边界)，$(1,0)$, $(1,1)$,$(2,2)$,$(-1,2)$，共计 $4$ 颗星星。\n\n第二次转动，从 $(-1,1)$ 转到 $(-1,2)$，逆时针转动，$5$ 颗星星都会在转动过程中出现在小 P 正前方。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b22go7at.png)\n\n除测试点 $24$ 和 $25$ 外，其他测试点保证所有坐标的绝对值 $\\le 1000$。\n\n对于前 $12$ 个测试点，保证原点到任意星星形成的射线上没有其他星星。\n\n除 $23,25$ 测试点外，对于所有编号为奇数的测试点，保证小 P 初始面向方向和每次转动目标方向上没有任何星星。\n\n除 $22,24$ 测试点外，对于所有编号为偶数的测试点，保证小 P 初始面向方向和每次转动目标方向上至少有一颗星星。\n\n对于 $100\\%$ 的数据，保证星星的坐标互不相同，保证坐标不会出现 $(0,0)$，保证不会出现转动初始方向等于结束方向。\n\n样例 $3$ 满足偶数测试点的限制。", "locale": "zh-CN"}}}
{"pid": "P7134", "type": "P", "difficulty": 6, "samples": [["10 9\n4 3 2 1 9 6 8 8 1 3 \n0 4 8 3 10 9\n1 1 3 2 973874498\n0 10 10 5 9 6\n1 7 9 3 738164087\n1 1 10 1 694888198\n0 2 2 4 7 7\n0 1 6 1 3 3\n1 1 10 3 868703567\n1 4 9 3 545789338\n", "525"]], "limits": {"time": [1000, 1000, 1000, 1500, 1500, 1500, 1500, 3500, 3500, 12000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "小 H 的序列", "background": "小 H 有一个序列。", "description": "**提交时自动开启 O2 优化。**\n\n小 H 想让你维护一个长为 $n$ 序列 $a_1,a_2,\\ldots,a_n$，要求支持\n\n- 修改操作：将所有满足$i\\in[l,r]$且$u\\le a_i\\le v$的$a_i$的值修改为$w$；\n- 查询操作：求出$\\sum_{i=l}^ra_i^t\\bmod k$。", "inputFormat": "总共包括 $m+2$ 行。\n\n第一行包含两个正整数 $n,m$，分别表示序列长度和操作次数。\n\n第二行包含 $n$ 个正整数 $a_1,a_2\\ldots,a_n$，表示最初的序列。\n\n接下来的 $m$ 行，每行由一个数 $o$ 开头，表示操作类型。\n\n- 如果 $o=0$，表示修改操作，紧接着给出五个正整数 $l,r,u,v,w$；\n- 如果 $o=1$，表示查询操作，紧接着给出四个正整数 $l,r,t,k$，意义如【题目描述】中所述。\n\n每行的两个数字间由单个空格隔开，数据在 Windows 下生成。**行末不保证没有多余空格**。", "outputFormat": "一行一个整数，表示所有查询操作的答案的异或和（如果没有查询操作输出一个数 $0$）。", "hint": "输入的所有数字均为正整数。  \n设存在数据范围 $\\mathrm{randmax}$，满足 $n,m,a_i,w\\le\\mathrm{randmax},1\\le l\\le r\\le n,1\\le u\\le v\\le \\mathrm{randmax},1\\le t,k\\le10^9$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wt8vfeho.png)\n\n保证数据除 $n,m$ 以及测试点 $4,5$ 的 $t$ 外随机，各变量意义如【题目描述】中所述。\n\n由于本题输入量较大及为了省下不必要的评测耗时，请注意输入优化。在此给出以下模板（`c++`语言）：\n\n```cpp\n/* ---- read() & rlong() - begin ---- */\n#define gc() (p0==p1&&(p1=(p0=buf)+fread(buf,1,1048576,stdin),p0==p1)?EOF:*p0++)\nchar buf[1048576],*p0,*p1;\ninline int read() {\n\tint r=0; char c=gc(); while (c<48||c>57) c=gc();\n\twhile (c>47&&c<58) {r=(r<<3)+(r<<1)+(c^48); c=gc();} return r;\n}\n#undef gc\n/* ---- read() & rlong() -- end ----- */\n```\n\n调用`read()`函数会从输入中读入一个`int`型整数，注意该模板不能处理负数，调试时请使用文件输入。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小 H 的序列", "background": "小 H 有一个序列。", "description": "**提交时自动开启 O2 优化。**\n\n小 H 想让你维护一个长为 $n$ 序列 $a_1,a_2,\\ldots,a_n$，要求支持\n\n- 修改操作：将所有满足$i\\in[l,r]$且$u\\le a_i\\le v$的$a_i$的值修改为$w$；\n- 查询操作：求出$\\sum_{i=l}^ra_i^t\\bmod k$。", "inputFormat": "总共包括 $m+2$ 行。\n\n第一行包含两个正整数 $n,m$，分别表示序列长度和操作次数。\n\n第二行包含 $n$ 个正整数 $a_1,a_2\\ldots,a_n$，表示最初的序列。\n\n接下来的 $m$ 行，每行由一个数 $o$ 开头，表示操作类型。\n\n- 如果 $o=0$，表示修改操作，紧接着给出五个正整数 $l,r,u,v,w$；\n- 如果 $o=1$，表示查询操作，紧接着给出四个正整数 $l,r,t,k$，意义如【题目描述】中所述。\n\n每行的两个数字间由单个空格隔开，数据在 Windows 下生成。**行末不保证没有多余空格**。", "outputFormat": "一行一个整数，表示所有查询操作的答案的异或和（如果没有查询操作输出一个数 $0$）。", "hint": "输入的所有数字均为正整数。  \n设存在数据范围 $\\mathrm{randmax}$，满足 $n,m,a_i,w\\le\\mathrm{randmax},1\\le l\\le r\\le n,1\\le u\\le v\\le \\mathrm{randmax},1\\le t,k\\le10^9$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wt8vfeho.png)\n\n保证数据除 $n,m$ 以及测试点 $4,5$ 的 $t$ 外随机，各变量意义如【题目描述】中所述。\n\n由于本题输入量较大及为了省下不必要的评测耗时，请注意输入优化。在此给出以下模板（`c++`语言）：\n\n```cpp\n/* ---- read() & rlong() - begin ---- */\n#define gc() (p0==p1&&(p1=(p0=buf)+fread(buf,1,1048576,stdin),p0==p1)?EOF:*p0++)\nchar buf[1048576],*p0,*p1;\ninline int read() {\n\tint r=0; char c=gc(); while (c<48||c>57) c=gc();\n\twhile (c>47&&c<58) {r=(r<<3)+(r<<1)+(c^48); c=gc();} return r;\n}\n#undef gc\n/* ---- read() & rlong() -- end ----- */\n```\n\n调用`read()`函数会从输入中读入一个`int`型整数，注意该模板不能处理负数，调试时请使用文件输入。", "locale": "zh-CN"}}}
{"pid": "P7135", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [1000], "memory": [262144]}, "tags": ["搜索", "贪心", "交互题", "Special Judge", "博弈树"], "title": "小 B 的面包", "background": "本题是一道**函数式交互题**。\n\n小 B 获得了很多面包，小 Y 很愤怒，他想抢夺面包。\n\n小 Y 提出要和小 B 玩一个有趣的游戏，如果小 B 输了，小 B 就要被抢走所有面包。\n\n小 B 还要到【数据删除】江边散步，所以他把这个任务交给了你。\n\n聪明的你能帮小 B 守卫他宝贵的面包吗？", "description": "**本题建议使用 `c++` 语言编程**。\n\n小 Y 把 $9$ 个面包依次放在了桌子上，第 $i$ 个面包的质量为 $i$。\n\n小 Y 与你轮流选取面包，谁选取的面包中，任意三个面包的总质量先恰好达到 $15$，谁就获胜，另外一方则落败。**每个面包只能取一次，一个人取了某个面包后另一个人就不能再选取了，选取面包后不能再放回**。\n\n如果最后面包全部选取完后双方未均达到，则为平局。\n\n---\n\n本题中，你需要且只需要实现以下三个函数（可以在其中调用或访问你的自写函数或全局变量）：\n\n```cpp\nextern \"C\" int choose(int x);\nextern \"C\" void init();\nextern \"C\" void newgame(bool f);\n/* 注意以上三个函数之前的 extern \"C\" 不可省略 */\n```\n\n评测时，交互库将首先调用一次你所实现的 `init()` 函数。`init()` 函数的作用为方便你最开始初始化，之后不会再次调用，如果你不需要初始化也请加入 `extern \"C\" void init() {}`。\n\n接下来交互库会调用你所实现的 `newgame(bool f)` 函数，交互库调用 `newgame(bool f)` 函数表示开始一场新游戏，传入的 `f` 若等于 $1$ 表示是由交互库先选择，否则由你先选择。\n\n接下来交互库将会不断调用你实现的 `choose(int x)` 函数，传入的 $x$ 表示小 Y 选取了第 $x$ 个面包，此函数运行结束后你需要返回一个整数 $y(1 \\le y \\le 9)$，表示你选取了第 $y$ 个面包，即：\n\n```cpp\nextern \"C\" int choose(int x) { /*x为交互库选取的面包 */\n    /* 你的代码 */\n    return y; /* y为你选取的面包 */\n}\n```\n\n特别地，当传入的 $x=0$ 时，表示是由你先选取面包。如果你 `choose(int x)` 函数返回了不合法的值，该场游戏立即结束，且结果为交互库获胜。\n\n不停调用 `choose(int x)` 函数直到某一方胜利或平局，即该场游戏结束。接着，交互库又会调用 `newgame(bool f)` 函数，开始一场新游戏。交互库一共会调用 $1800$ 次 `newgame(bool f)` 函数，表示进行 $1800$ 场游戏。\n\n详细可查看`template_game.cpp`。\n\n---\n\n在附加文件中，有以下一个文件：\n\n`template_game.cpp`——你将在其中实现上述三个函数，内含详细注释，也包括交互库参考代码，请仔细阅读，**建议在此基础上答题**。\n\n本地可直接在 IDE 中编译。", "inputFormat": "无", "outputFormat": "对于本地交互库，**交互库**最后会输出两行：\n\n第一行两个数 $w,d$ ，分别表示你获胜的场数和平局的场数；\n\n第二行为你的得分。", "hint": "**保证交互库采用完全随机选取策略，即每次均会从未选取的面包中等概率选取一个面包**\n\n$1800$ 场游戏中，有 $600$ 场是由你的程序先选取，有 $1200$ 场是由交互库先选取。\n\n具体来说，对于第 $i$ 场游戏，若 $i \\bmod 3 =0$ ，则由你的程序先选取，否则由交互库先选取。\n\n本题首先会受到和传统题相同的限制，例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 $0$ 分等。\n\n你只能访问自己定义的和交互库给出的变量及其对应的内存空间，尝试访问其他空间将可能导致编译错误或运行错误。\n\n**本题只有一个测试点，你的得分按如下规定判定：**\n\n设你程序获胜了 $x$ 场，平局为 $y$ 场，你最终的得分用计分函数 $f(x,y)$ 表示为：\n\n$$\nf(x,y)=\\lfloor (\\frac{x+y}{6}-200) \\cdot \\min((\\frac{x}{x + y})^2+0.2,1) \\rfloor\n$$\n\n最低得分为 $0$ 分。\n\n**实际评测的交互库与下发的不相同，选手的程序应不依赖于交互库实现**。\n\n详细可查看`template_game.cpp`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小 B 的面包", "background": "本题是一道**函数式交互题**。\n\n小 B 获得了很多面包，小 Y 很愤怒，他想抢夺面包。\n\n小 Y 提出要和小 B 玩一个有趣的游戏，如果小 B 输了，小 B 就要被抢走所有面包。\n\n小 B 还要到【数据删除】江边散步，所以他把这个任务交给了你。\n\n聪明的你能帮小 B 守卫他宝贵的面包吗？", "description": "**本题建议使用 `c++` 语言编程**。\n\n小 Y 把 $9$ 个面包依次放在了桌子上，第 $i$ 个面包的质量为 $i$。\n\n小 Y 与你轮流选取面包，谁选取的面包中，任意三个面包的总质量先恰好达到 $15$，谁就获胜，另外一方则落败。**每个面包只能取一次，一个人取了某个面包后另一个人就不能再选取了，选取面包后不能再放回**。\n\n如果最后面包全部选取完后双方未均达到，则为平局。\n\n---\n\n本题中，你需要且只需要实现以下三个函数（可以在其中调用或访问你的自写函数或全局变量）：\n\n```cpp\nextern \"C\" int choose(int x);\nextern \"C\" void init();\nextern \"C\" void newgame(bool f);\n/* 注意以上三个函数之前的 extern \"C\" 不可省略 */\n```\n\n评测时，交互库将首先调用一次你所实现的 `init()` 函数。`init()` 函数的作用为方便你最开始初始化，之后不会再次调用，如果你不需要初始化也请加入 `extern \"C\" void init() {}`。\n\n接下来交互库会调用你所实现的 `newgame(bool f)` 函数，交互库调用 `newgame(bool f)` 函数表示开始一场新游戏，传入的 `f` 若等于 $1$ 表示是由交互库先选择，否则由你先选择。\n\n接下来交互库将会不断调用你实现的 `choose(int x)` 函数，传入的 $x$ 表示小 Y 选取了第 $x$ 个面包，此函数运行结束后你需要返回一个整数 $y(1 \\le y \\le 9)$，表示你选取了第 $y$ 个面包，即：\n\n```cpp\nextern \"C\" int choose(int x) { /*x为交互库选取的面包 */\n    /* 你的代码 */\n    return y; /* y为你选取的面包 */\n}\n```\n\n特别地，当传入的 $x=0$ 时，表示是由你先选取面包。如果你 `choose(int x)` 函数返回了不合法的值，该场游戏立即结束，且结果为交互库获胜。\n\n不停调用 `choose(int x)` 函数直到某一方胜利或平局，即该场游戏结束。接着，交互库又会调用 `newgame(bool f)` 函数，开始一场新游戏。交互库一共会调用 $1800$ 次 `newgame(bool f)` 函数，表示进行 $1800$ 场游戏。\n\n详细可查看`template_game.cpp`。\n\n---\n\n在附加文件中，有以下一个文件：\n\n`template_game.cpp`——你将在其中实现上述三个函数，内含详细注释，也包括交互库参考代码，请仔细阅读，**建议在此基础上答题**。\n\n本地可直接在 IDE 中编译。", "inputFormat": "无", "outputFormat": "对于本地交互库，**交互库**最后会输出两行：\n\n第一行两个数 $w,d$ ，分别表示你获胜的场数和平局的场数；\n\n第二行为你的得分。", "hint": "**保证交互库采用完全随机选取策略，即每次均会从未选取的面包中等概率选取一个面包**\n\n$1800$ 场游戏中，有 $600$ 场是由你的程序先选取，有 $1200$ 场是由交互库先选取。\n\n具体来说，对于第 $i$ 场游戏，若 $i \\bmod 3 =0$ ，则由你的程序先选取，否则由交互库先选取。\n\n本题首先会受到和传统题相同的限制，例如编译错误会导致整道题目得 $0$ 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 $0$ 分等。\n\n你只能访问自己定义的和交互库给出的变量及其对应的内存空间，尝试访问其他空间将可能导致编译错误或运行错误。\n\n**本题只有一个测试点，你的得分按如下规定判定：**\n\n设你程序获胜了 $x$ 场，平局为 $y$ 场，你最终的得分用计分函数 $f(x,y)$ 表示为：\n\n$$\nf(x,y)=\\lfloor (\\frac{x+y}{6}-200) \\cdot \\min((\\frac{x}{x + y})^2+0.2,1) \\rfloor\n$$\n\n最低得分为 $0$ 分。\n\n**实际评测的交互库与下发的不相同，选手的程序应不依赖于交互库实现**。\n\n详细可查看`template_game.cpp`。", "locale": "zh-CN"}}}
{"pid": "P7136", "type": "P", "difficulty": 6, "samples": [["3 3 1\n2 2 2 2\n", "64\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "THUPC"], "title": "[THUPC 2021 初赛] 方格游戏", "background": "", "description": "小 F 和小 H 在玩游戏。今天，他们在一个 $N\\times M$ 的棋盘上玩游戏。小 H 想考考小 F 的数学能力，但小 F 天生数学就不好，所以想请你帮忙。为了加大难度，小 $H$ 会在棋盘里面加入 $P$ 个矩形障碍物。每个矩形障碍物用 $U$、$D$、$L$、$R$ 来表示，即在第 $U$ 行到第 $D$ 行以及在第 $L$ 列到第 $R$ 列之间的所有格子都变成了障碍物。小 H 保证所有矩形障碍物互不相交，并且所有非障碍物格子之间都能够直接或者间接互达，若两个非障碍物格子有公共边，那么它们直接互达并且它们的距离为 $1$。\n\n现在每一局游戏中，小 F 在棋盘中挑选一个非障碍物格子 $X$，小 H 也挑另外一个非障碍物格子 $Y$，这一局游戏 $(X,Y)$ 的得分就是 $X$ 到 $Y$ 的最短路径。小 F 需要计算出所有可能的游戏中的得分和，答案模 $1,000,000,007$。注意两局游戏中只要挑选的两个格子相同则视为同一局游戏，即 $(X, Y)$ 等同于 $(Y,X)$。", "inputFormat": "第一行三个整数 $N$（$1 \\le N \\le 1,000,000,000$），$M$（$1 \\le M \\le 1,000,000,000$），$P$（$0 \\le P \\le 100,000$）。  \n接下来有 $P$ 行，每行四个正整数，$U_i, D_i$（$1 < U_i \\le D_i < N$），$L_i, R_i$（$1 < L_i \\le R_i < M$），表示第 $i$ 个矩形障碍物。对于任意两个不同的矩形障碍物 $i$ 和 $j$，都满足 $D_i + 1 < U_j$ 或者 $D_j + 1 < U_i$，以及 $R_i + 1 < L_j$ 或者 $R_j + 1 < L_i$。", "outputFormat": "只有一行一个正整数，即所有游戏的得分和模 $1,000,000,007$。", "hint": "**【样例解释 #1】**\n\n距离为 $1$ 的有 $8$ 种。  \n距离为 $2$ 的有 $8$ 种。  \n距离为 $3$ 的有 $8$ 种。  \n距离为 $4$ 的有 $4$ 种。  \n总共得分为 $64$。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2021 初赛] 方格游戏", "background": "", "description": "小 F 和小 H 在玩游戏。今天，他们在一个 $N\\times M$ 的棋盘上玩游戏。小 H 想考考小 F 的数学能力，但小 F 天生数学就不好，所以想请你帮忙。为了加大难度，小 $H$ 会在棋盘里面加入 $P$ 个矩形障碍物。每个矩形障碍物用 $U$、$D$、$L$、$R$ 来表示，即在第 $U$ 行到第 $D$ 行以及在第 $L$ 列到第 $R$ 列之间的所有格子都变成了障碍物。小 H 保证所有矩形障碍物互不相交，并且所有非障碍物格子之间都能够直接或者间接互达，若两个非障碍物格子有公共边，那么它们直接互达并且它们的距离为 $1$。\n\n现在每一局游戏中，小 F 在棋盘中挑选一个非障碍物格子 $X$，小 H 也挑另外一个非障碍物格子 $Y$，这一局游戏 $(X,Y)$ 的得分就是 $X$ 到 $Y$ 的最短路径。小 F 需要计算出所有可能的游戏中的得分和，答案模 $1,000,000,007$。注意两局游戏中只要挑选的两个格子相同则视为同一局游戏，即 $(X, Y)$ 等同于 $(Y,X)$。", "inputFormat": "第一行三个整数 $N$（$1 \\le N \\le 1,000,000,000$），$M$（$1 \\le M \\le 1,000,000,000$），$P$（$0 \\le P \\le 100,000$）。  \n接下来有 $P$ 行，每行四个正整数，$U_i, D_i$（$1 < U_i \\le D_i < N$），$L_i, R_i$（$1 < L_i \\le R_i < M$），表示第 $i$ 个矩形障碍物。对于任意两个不同的矩形障碍物 $i$ 和 $j$，都满足 $D_i + 1 < U_j$ 或者 $D_j + 1 < U_i$，以及 $R_i + 1 < L_j$ 或者 $R_j + 1 < L_i$。", "outputFormat": "只有一行一个正整数，即所有游戏的得分和模 $1,000,000,007$。", "hint": "**【样例解释 #1】**\n\n距离为 $1$ 的有 $8$ 种。  \n距离为 $2$ 的有 $8$ 种。  \n距离为 $3$ 的有 $8$ 种。  \n距离为 $4$ 的有 $4$ 种。  \n总共得分为 $64$。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P7137", "type": "P", "difficulty": 5, "samples": [["4 3\n4 3 2 1\n", "5.250000\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "THUPC"], "title": "[THUPC 2021 初赛] 切切糕", "background": "", "description": "Kiana 喜欢吃甜点，某天她从商店中买回来 $N$ 块切糕与 Tinytree 共同分享，其中第 $i$ 块切糕的大小用一个数 $A_i$ 来表示。\n\n因为每块切糕的风味都不同，所以 Kiana 和 Tinytree 决定将每块切糕都切成两份，两人各选一份品尝。但切切糕是一个自古以来的大难题，经过商议，Kiana 打算执刀来切切糕，而 Tinytree 有 $M$ 次“优先选糕权”，可以获得一些切糕切开后的优先选择权，具体来说，两人按照如下流程进行操作：\n\n步骤一：Kiana 从还没切的切糕中按自己的想法选一块出来，并将其切成两份，其中**每份切糕的大小可以是任意正实数，也可以是 $\\mathbf{0}$，且两份切糕的大小之和与切之前的大小相同**。\n\n步骤二：Tinytree 观察完 Kiana 切出的两份切糕大小后，如果还有“优先选糕权”次数剩余，则可以决定是否消耗 $1$ 次“优先选糕权”来进行优先选择。\n\n步骤三：如果 Tinytree 选择使用“优先选糕权”，则她可以从两份切糕中任选一份，另一份则归 Kiana，如果 Tinytree 选择不使用或者已经用完了 $M$ 次“优先选糕权”，则 Kiana 从两份切糕中任选一份，另一份则归 Tinytree，然后两人回到步骤一，直到所有的切糕都切完。\n\n假设 Kiana 和 Tinytree 都足够聪明，在自己可以操作时总是想办法**让自己最终获得的切糕总大小尽可能大**，且开始切第一块切糕之前 $N$ 块切糕的大小是两人都已知的，“优先选糕权”不要求全部用完。现在 Kiana 想知道，自己能获得的切糕总大小是多少，由于 Kiana 自己不会算，所以希望你能够帮助她。", "inputFormat": "第一行包含两个正整数 $N$ 和 $M$（$1 \\le M \\le N \\le 2500$），分别表示切糕的总数和 Tinytree 初始时“优先选糕权”的次数。  \n第二行包含 $N$ 个正整数，其中第 $i$ 个数 $A_i$（$1 \\le A_i \\le 50000$）表示第 $i$ 块切糕的大小。", "outputFormat": "输出共一行，包含一个实数，表示**Kiana 最终能获得的切糕总大小**，所有输出精确到小数点后六位。", "hint": "**【样例解释 #1】**\n\n在这个样例中总共有 $4$ 块切糕，大小分别为 $4,3,2,1$，Tinytree 的“优先选糕权”一共有三次，两人可以按照如下顺序和方式来分配切糕：\n\n第一块：Kiana 选择大小为 $3$ 的切糕，将其切成大小为 $1.25$ 和 $1.75$ 的两部分，Tinytree 使用一次“优先选糕权”选走 $1.75$ 的部分，Kiana 目前总共获得大小 $1.25$ 的切糕。\n\n第二块：Kiana 选择大小为 $1$ 的切糕，将其切成大小为 $0$ 和 $1$ 的两部分，Tinytree 不使用“优先选糕权”，Kiana 独得此糕，目前总共获得大小 $2.25$ 的切糕。\n\n第三块：Kiana 选择大小为 $2$ 的切糕，将其切成大小为 $1$ 和 $1$ 的两部分，Tinytree 使用一次“优先选糕权”选走 $1$ 的部分，Kiana 目前总共获得大小 $3.25$ 的切糕。\n\n第四块：Kiana 选择大小为 $4$ 的切糕，将其切成大小为 $2$ 和 $2$ 的两部分，Tinytree 使用一次“优先选糕权”选走 $2$ 的部分，Kiana 目前总共获得大小 $5.25$ 的切糕。\n\n综上所述，该样例输出 $5.250000$，且可以证明在这个方案中如果任意一人改变自己的策略，其获得的切糕总大小不可能变得更大。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2021 初赛] 切切糕", "background": "", "description": "Kiana 喜欢吃甜点，某天她从商店中买回来 $N$ 块切糕与 Tinytree 共同分享，其中第 $i$ 块切糕的大小用一个数 $A_i$ 来表示。\n\n因为每块切糕的风味都不同，所以 Kiana 和 Tinytree 决定将每块切糕都切成两份，两人各选一份品尝。但切切糕是一个自古以来的大难题，经过商议，Kiana 打算执刀来切切糕，而 Tinytree 有 $M$ 次“优先选糕权”，可以获得一些切糕切开后的优先选择权，具体来说，两人按照如下流程进行操作：\n\n步骤一：Kiana 从还没切的切糕中按自己的想法选一块出来，并将其切成两份，其中**每份切糕的大小可以是任意正实数，也可以是 $\\mathbf{0}$，且两份切糕的大小之和与切之前的大小相同**。\n\n步骤二：Tinytree 观察完 Kiana 切出的两份切糕大小后，如果还有“优先选糕权”次数剩余，则可以决定是否消耗 $1$ 次“优先选糕权”来进行优先选择。\n\n步骤三：如果 Tinytree 选择使用“优先选糕权”，则她可以从两份切糕中任选一份，另一份则归 Kiana，如果 Tinytree 选择不使用或者已经用完了 $M$ 次“优先选糕权”，则 Kiana 从两份切糕中任选一份，另一份则归 Tinytree，然后两人回到步骤一，直到所有的切糕都切完。\n\n假设 Kiana 和 Tinytree 都足够聪明，在自己可以操作时总是想办法**让自己最终获得的切糕总大小尽可能大**，且开始切第一块切糕之前 $N$ 块切糕的大小是两人都已知的，“优先选糕权”不要求全部用完。现在 Kiana 想知道，自己能获得的切糕总大小是多少，由于 Kiana 自己不会算，所以希望你能够帮助她。", "inputFormat": "第一行包含两个正整数 $N$ 和 $M$（$1 \\le M \\le N \\le 2500$），分别表示切糕的总数和 Tinytree 初始时“优先选糕权”的次数。  \n第二行包含 $N$ 个正整数，其中第 $i$ 个数 $A_i$（$1 \\le A_i \\le 50000$）表示第 $i$ 块切糕的大小。", "outputFormat": "输出共一行，包含一个实数，表示**Kiana 最终能获得的切糕总大小**，所有输出精确到小数点后六位。", "hint": "**【样例解释 #1】**\n\n在这个样例中总共有 $4$ 块切糕，大小分别为 $4,3,2,1$，Tinytree 的“优先选糕权”一共有三次，两人可以按照如下顺序和方式来分配切糕：\n\n第一块：Kiana 选择大小为 $3$ 的切糕，将其切成大小为 $1.25$ 和 $1.75$ 的两部分，Tinytree 使用一次“优先选糕权”选走 $1.75$ 的部分，Kiana 目前总共获得大小 $1.25$ 的切糕。\n\n第二块：Kiana 选择大小为 $1$ 的切糕，将其切成大小为 $0$ 和 $1$ 的两部分，Tinytree 不使用“优先选糕权”，Kiana 独得此糕，目前总共获得大小 $2.25$ 的切糕。\n\n第三块：Kiana 选择大小为 $2$ 的切糕，将其切成大小为 $1$ 和 $1$ 的两部分，Tinytree 使用一次“优先选糕权”选走 $1$ 的部分，Kiana 目前总共获得大小 $3.25$ 的切糕。\n\n第四块：Kiana 选择大小为 $4$ 的切糕，将其切成大小为 $2$ 和 $2$ 的两部分，Tinytree 使用一次“优先选糕权”选走 $2$ 的部分，Kiana 目前总共获得大小 $5.25$ 的切糕。\n\n综上所述，该样例输出 $5.250000$，且可以证明在这个方案中如果任意一人改变自己的策略，其获得的切糕总大小不可能变得更大。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P7138", "type": "P", "difficulty": 7, "samples": [["2 2 4\n3\n2.571 0.514 + 2.571 -0.514 +\n-2.571 0.514 + -2.571 -0.514 +\n0.514 2.571 + -0.514 2.571 +\n0.514 -2.571 + -0.514 -2.571 +\n2.118 -2.118 -\n1.051 1.051 +\n-0.468 1.870 +\n-1.870 -0.468 +\n", "Passer\nSafe\nGoodbye\nSafe\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "THUPC"], "title": "[THUPC 2021 初赛] 非欧几何", "background": "", "description": "ustze 喜欢几何，他认为几何是数学竞赛中最简单的一环，在征服了数学以后，ustze 决定将自己的天赋带到计算几何中，并与传统的欧氏几何展开较量。\n\n作为欧氏几何的捍卫者，Tinytree 在三维空间中建立了一个**球心在原点、半径为** $\\boldsymbol R$ **的球面**，其中坐标为 $(0,0,R)$ 的点称为北极点，显然北极点处于球面上。Tinytree 回忆在欧氏几何中，三点可以唯一确定空间中的一个圆，因此 Tinytree 在球面上确定了 $N$ 个点对，其中每个点对和北极点一起就确定了一个球面上的圆，我们保证这些圆的**半径严格小于** $\\boldsymbol R$，因此每个圆会将球面分成面积不相等的两部分，我们**称球面上面积较小的部分是该圆的内部，面积较大的部分是该圆的外部**，而这 $N$ 个圆的内部受到 Tinytree 的保护，**它们的并构成安全区域**。\n\n作为非欧几何的狂热者，ustze 认为球面上的圆其实是“直线”，他在球面上确定了 $M$ 个点对，其中每个点对和北极点一起也确定了一个球面上的圆，这些圆的**半径也是严格小于** $\\boldsymbol R$ 的，这 $M$ 个圆的内部受到 ustze 的威慑，**它们的并构成危险区域**。\n\n正当 Tinytree 和 ustze 对峙时，球面上一般路过一个 Kiana，她见到这幅景象十分害怕，开始在球面上东躲西藏。现在 Kiana 初步确定了 $T$ 个球面上的点，她想知道这些点是否在安全区域或危险区域中，以便自己跑路，由于 Kiana 自己不会算，所以希望你能够帮助她。", "inputFormat": "第一行包含三个正整数 $N, M$ 和 $T$（$1 \\le N, M \\le 5000$，$1 \\le T \\le 1.5 \\times {10}^5$），分别表示 Tinytree 确定的点对数、ustze 确定的点对数和 Kiana 确定的跑路点数。\n\n第二行包含一个正整数 $R$（$1 \\le R \\le {10}^3$），表示球面的半径大小。\n\n接下来 $N$ 行，第 $i$ 行依次输入 $A_i, B_i, X_i, C_i, D_i, Y_i$（$1 \\le |A_i|, |B_i|, |C_i|, |D_i| \\le R$，$1 \\le A_i^2 + B_i^2, C_i^2 + D_i^2 \\le R^2$），其中 $A_i, B_i$ 表示 Tinytree 确定的第 $i$ 个点对中第一个点的横坐标和纵坐标，而 $X_i$ 为 `+` 表示第一个点的竖坐标大于 $0$，为 `-` 表示第一个点的竖坐标小于 $0$，如果竖坐标等于 $0$ 则 $X_i$ 是在 `+` 和 `-` 中随机选择的，$C_i, D_i$ 表示 Tinytree 确定的第 $i$ 个点对中第二个点的横坐标和纵坐标，$Y_i$ 表示竖坐标的正负，含义与 $X_i$ 相同。\n\n接下来 $M$ 行，第 $j$ 行依次输入 $A_j, B_j, X_j, C_j, D_j, Y_j$（$1 \\le |A_j|, |B_j|, |C_j|, |D_j| \\le R$，$1 \\le A_j^2 + B_j^2, C_j^2 + D_j^2 \\le R^2$），表示 ustze 确定的第 $j$ 个点对坐标，点的表示方式与之前相同。\n\n接下来 $T$ 行，第 $k$ 行包含两个实数 $A_k, B_k$（$1 \\le |A_k|, |B_k| \\le R$，$1 \\le A_k^2 + B_k^2 \\le R^2$）和一个字符 $X_k$，表示 Kiana 确定的第 $k$ 个跑路点，点的表示方式与之前相同。\n\n数据保证合法，且输入中没有两个点是相同的，所有实数保留到小数点后三位，**Kiana 的跑路点和任意一个给定圆周的最小直线距离不小于** $\\boldsymbol{{10}^{-6}}$。", "outputFormat": "输出共 $T$ 行，每行包含一个字符串，若 Kiana 的第 $k$ 个跑路点在安全区域中则在第 $k$ 行输出 `Safe`，如果不在安全区域中但也不在危险区域中则在第 $k$ 行输出 `Passer`，如果不在安全区域中且在危险区域中则在第 $k$ 行输出 `Goodbye`（所有输出不含引号）。", "hint": "在三维空间中，我们可以用一个有序的实数三元组 $(x, y, z)$ 来描述一个点的位置，其中 $x, y, z$ 分别称作这个点的横坐标、纵坐标和竖坐标。\n\n三维空间中一个球心在 $(x_0, y_0, z_0)$、半径为 $R$ 的球面是指空间中所有满足 $(x - x_0)^2 + (y - y_0)^2 + (z - z_0)^2 = R^2$ 的点 $(x, y, z)$ 构成的点集，对于该球面上给定的两个不同点 $(x_1, y_1, z_1), (x_2, y_2, z_2)$，如果它们不是一对对踵点（两个点是对踵点当且仅当它们之间的距离为 $2 R$），则它们和球心不在同一直线上，这三个点唯一确定了一个平面，这个平面与球面的交线被这两个点分成了两个部分，其中较短部分的长度称为这两点在该球面上的距离，如果这两个点是对踵点，则定义它们之间的距离为 $\\pi R$，球面上的一个圆指到球面上某点的球面距离等于一个常数的球面上的点的集合，可以证明球面上的任意三个不同点唯一确定了一个球面上的圆。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2021 初赛] 非欧几何", "background": "", "description": "ustze 喜欢几何，他认为几何是数学竞赛中最简单的一环，在征服了数学以后，ustze 决定将自己的天赋带到计算几何中，并与传统的欧氏几何展开较量。\n\n作为欧氏几何的捍卫者，Tinytree 在三维空间中建立了一个**球心在原点、半径为** $\\boldsymbol R$ **的球面**，其中坐标为 $(0,0,R)$ 的点称为北极点，显然北极点处于球面上。Tinytree 回忆在欧氏几何中，三点可以唯一确定空间中的一个圆，因此 Tinytree 在球面上确定了 $N$ 个点对，其中每个点对和北极点一起就确定了一个球面上的圆，我们保证这些圆的**半径严格小于** $\\boldsymbol R$，因此每个圆会将球面分成面积不相等的两部分，我们**称球面上面积较小的部分是该圆的内部，面积较大的部分是该圆的外部**，而这 $N$ 个圆的内部受到 Tinytree 的保护，**它们的并构成安全区域**。\n\n作为非欧几何的狂热者，ustze 认为球面上的圆其实是“直线”，他在球面上确定了 $M$ 个点对，其中每个点对和北极点一起也确定了一个球面上的圆，这些圆的**半径也是严格小于** $\\boldsymbol R$ 的，这 $M$ 个圆的内部受到 ustze 的威慑，**它们的并构成危险区域**。\n\n正当 Tinytree 和 ustze 对峙时，球面上一般路过一个 Kiana，她见到这幅景象十分害怕，开始在球面上东躲西藏。现在 Kiana 初步确定了 $T$ 个球面上的点，她想知道这些点是否在安全区域或危险区域中，以便自己跑路，由于 Kiana 自己不会算，所以希望你能够帮助她。", "inputFormat": "第一行包含三个正整数 $N, M$ 和 $T$（$1 \\le N, M \\le 5000$，$1 \\le T \\le 1.5 \\times {10}^5$），分别表示 Tinytree 确定的点对数、ustze 确定的点对数和 Kiana 确定的跑路点数。\n\n第二行包含一个正整数 $R$（$1 \\le R \\le {10}^3$），表示球面的半径大小。\n\n接下来 $N$ 行，第 $i$ 行依次输入 $A_i, B_i, X_i, C_i, D_i, Y_i$（$1 \\le |A_i|, |B_i|, |C_i|, |D_i| \\le R$，$1 \\le A_i^2 + B_i^2, C_i^2 + D_i^2 \\le R^2$），其中 $A_i, B_i$ 表示 Tinytree 确定的第 $i$ 个点对中第一个点的横坐标和纵坐标，而 $X_i$ 为 `+` 表示第一个点的竖坐标大于 $0$，为 `-` 表示第一个点的竖坐标小于 $0$，如果竖坐标等于 $0$ 则 $X_i$ 是在 `+` 和 `-` 中随机选择的，$C_i, D_i$ 表示 Tinytree 确定的第 $i$ 个点对中第二个点的横坐标和纵坐标，$Y_i$ 表示竖坐标的正负，含义与 $X_i$ 相同。\n\n接下来 $M$ 行，第 $j$ 行依次输入 $A_j, B_j, X_j, C_j, D_j, Y_j$（$1 \\le |A_j|, |B_j|, |C_j|, |D_j| \\le R$，$1 \\le A_j^2 + B_j^2, C_j^2 + D_j^2 \\le R^2$），表示 ustze 确定的第 $j$ 个点对坐标，点的表示方式与之前相同。\n\n接下来 $T$ 行，第 $k$ 行包含两个实数 $A_k, B_k$（$1 \\le |A_k|, |B_k| \\le R$，$1 \\le A_k^2 + B_k^2 \\le R^2$）和一个字符 $X_k$，表示 Kiana 确定的第 $k$ 个跑路点，点的表示方式与之前相同。\n\n数据保证合法，且输入中没有两个点是相同的，所有实数保留到小数点后三位，**Kiana 的跑路点和任意一个给定圆周的最小直线距离不小于** $\\boldsymbol{{10}^{-6}}$。", "outputFormat": "输出共 $T$ 行，每行包含一个字符串，若 Kiana 的第 $k$ 个跑路点在安全区域中则在第 $k$ 行输出 `Safe`，如果不在安全区域中但也不在危险区域中则在第 $k$ 行输出 `Passer`，如果不在安全区域中且在危险区域中则在第 $k$ 行输出 `Goodbye`（所有输出不含引号）。", "hint": "在三维空间中，我们可以用一个有序的实数三元组 $(x, y, z)$ 来描述一个点的位置，其中 $x, y, z$ 分别称作这个点的横坐标、纵坐标和竖坐标。\n\n三维空间中一个球心在 $(x_0, y_0, z_0)$、半径为 $R$ 的球面是指空间中所有满足 $(x - x_0)^2 + (y - y_0)^2 + (z - z_0)^2 = R^2$ 的点 $(x, y, z)$ 构成的点集，对于该球面上给定的两个不同点 $(x_1, y_1, z_1), (x_2, y_2, z_2)$，如果它们不是一对对踵点（两个点是对踵点当且仅当它们之间的距离为 $2 R$），则它们和球心不在同一直线上，这三个点唯一确定了一个平面，这个平面与球面的交线被这两个点分成了两个部分，其中较短部分的长度称为这两点在该球面上的距离，如果这两个点是对踵点，则定义它们之间的距离为 $\\pi R$，球面上的一个圆指到球面上某点的球面距离等于一个常数的球面上的点的集合，可以证明球面上的任意三个不同点唯一确定了一个球面上的圆。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P7140", "type": "P", "difficulty": 5, "samples": [["5\n2 2 1 2 1\n4\n1 5 4\n2 2 1\n2 1 1\n1 5 5\n", "2\n22\n24\n1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "THUPC"], "title": "[THUPC 2021 初赛] 区间矩阵乘法", "background": "", "description": "给定长度为 $n$ 的序列 $a_1, a_2, \\dots, a_n$；共 $m$ 组询问，每次询问给出 $d,p_1,p_2$，求\n\n$$ \\sum_{i=0}^{d-1} \\sum_{j=0}^{d-1} \\sum_{k=0}^{d-1} a_{p_1+d\\cdot i+j} a_{p_2 + d\\cdot j + k} $$", "inputFormat": "输入的第一行包含一个数 $n$。  \n之后一行 $n$ 个数，表示 $a$ 这个序列。  \n之后一行一个数 $m$。  \n之后 $m$ 行，每行三个数 $d, p_1, p_2$ 表示一次询问。\n\n$1 \\le n, m, a_i \\le 2 \\times {10}^5$，所有数值为 $[1,{10}^9]$ 以内的整数，询问保证 $a$ 的下标在 $[1,n]$ 内。", "outputFormat": "输出共 $m$ 行，表示每个询问对应的答案，答案对 $2^{32}$ 取模。", "hint": "**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2021 初赛] 区间矩阵乘法", "background": "", "description": "给定长度为 $n$ 的序列 $a_1, a_2, \\dots, a_n$；共 $m$ 组询问，每次询问给出 $d,p_1,p_2$，求\n\n$$ \\sum_{i=0}^{d-1} \\sum_{j=0}^{d-1} \\sum_{k=0}^{d-1} a_{p_1+d\\cdot i+j} a_{p_2 + d\\cdot j + k} $$", "inputFormat": "输入的第一行包含一个数 $n$。  \n之后一行 $n$ 个数，表示 $a$ 这个序列。  \n之后一行一个数 $m$。  \n之后 $m$ 行，每行三个数 $d, p_1, p_2$ 表示一次询问。\n\n$1 \\le n, m, a_i \\le 2 \\times {10}^5$，所有数值为 $[1,{10}^9]$ 以内的整数，询问保证 $a$ 的下标在 $[1,n]$ 内。", "outputFormat": "输出共 $m$ 行，表示每个询问对应的答案，答案对 $2^{32}$ 取模。", "hint": "**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P7141", "type": "P", "difficulty": 6, "samples": [["3 4\n2 1 2 1\n", "Yes\n1010\n0101\n1010\n"], ["3 4\n2 3 3 3\n", "No\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "Special Judge", "THUPC"], "title": "[THUPC 2021 初赛] 棋盘", "background": "", "description": "有一个 $n$ 行 $m$ 列的棋盘，共有 $n m$ 个格子。请你在格子内放入棋子（每个格子可以放入至多一个棋子），使得对于所有 $1 \\le i \\le m$，第 $i$ 列里恰好包含 $a_i$ 个棋子。另外，棋盘上的任意两颗棋子都不能边相邻。\n\n请判断是否存在一种合法方案。如果存在，请输出任意一个合法方案。", "inputFormat": "输入的第一行包含两个正整数 $n, m$，保证 $n \\le 300, m \\le 300$。  \n输入的第二行包含 $m$ 个非负整数 $a_1, a_2, \\ldots , a_m$，保证 $0 \\le a_i \\le n$。", "outputFormat": "如果无解，输出一个字符串 `No`。  \n如果有解，第一行输出一个字符串 `Yes`，接下来 $n$ 行每行输出一个长度为 $m$ 的字符串，表示你构造的棋盘方案。其中 `0` 表示空格，`1` 表示放入棋子的格子。", "hint": "**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2021 初赛] 棋盘", "background": "", "description": "有一个 $n$ 行 $m$ 列的棋盘，共有 $n m$ 个格子。请你在格子内放入棋子（每个格子可以放入至多一个棋子），使得对于所有 $1 \\le i \\le m$，第 $i$ 列里恰好包含 $a_i$ 个棋子。另外，棋盘上的任意两颗棋子都不能边相邻。\n\n请判断是否存在一种合法方案。如果存在，请输出任意一个合法方案。", "inputFormat": "输入的第一行包含两个正整数 $n, m$，保证 $n \\le 300, m \\le 300$。  \n输入的第二行包含 $m$ 个非负整数 $a_1, a_2, \\ldots , a_m$，保证 $0 \\le a_i \\le n$。", "outputFormat": "如果无解，输出一个字符串 `No`。  \n如果有解，第一行输出一个字符串 `Yes`，接下来 $n$ 行每行输出一个长度为 $m$ 的字符串，表示你构造的棋盘方案。其中 `0` 表示空格，`1` 表示放入棋子的格子。", "hint": "**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P7142", "type": "P", "difficulty": 6, "samples": [["3 1\n1 2 1 2\n2 1 1 2\n1 3 1 3\n3 1 2 3\n2 3 3 4\n3 2 2 5\n", "166374059\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "THUPC", "状压 DP"], "title": "[THUPC 2021 初赛] 密集子图", "background": "", "description": "有一天，魔法师小 L 看到了一个有向完全图。\n\n图中所有边的长度都是 $1$，且所有边都是白色的。\n\n现在小 L 要对这个图施展魔法，图中每条有向边分别都有一定概率变成黑色。\n\n小 L 认为一个图是“密集的”，当且仅当只经过黑色边时，点 $1$ 到其余所有点的最短路径长度都不超过 $k$（特别地，若两个点不连通则它们之间最短路径的长度视为 $+ \\infty$）。\n\n小 L 想要知道，此时这个有向完全图有多大的概率是“密集的”呢？请你输出此概率对 $998,244,353$ 取模的结果。", "inputFormat": "第一行两个正整数 $n$（$2 \\le n \\le 12)$，$k$（$1 \\le k \\le n - 1$）。  \n接下来 $n \\times (n - 1)$ 行，每行 $4$ 个正整数 $x, y, p, q$，表示点 $x$ 到点 $y$ 的有向边变成黑色的概率为 $\\frac{p}{q}$。保证 $1 \\le x \\le n$，$1 \\le y \\le n$，$x \\ne y$，$0 \\le p \\le q < 998,244,353$，$q > 0$，每组合法的 $(x, y)$ 恰好出现一次。", "outputFormat": "一行一个整数表示答案。", "hint": "**【样例解释 #1】**\n\n这个有向完全图是“密集的”，当且仅当点 $1$ 到点 $2$ 的有向边和点 $1$ 到点 $3$ 的有向边同时变成黑色，这种情况出现的概率 $= \\frac{1}{2} \\times \\frac{1}{3} = \\frac{1}{6}$，$\\frac{1}{6} \\bmod 998,244,353 = 6^{998,244,351} \\bmod 998,244,353 = 166,374,059$。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2021 初赛] 密集子图", "background": "", "description": "有一天，魔法师小 L 看到了一个有向完全图。\n\n图中所有边的长度都是 $1$，且所有边都是白色的。\n\n现在小 L 要对这个图施展魔法，图中每条有向边分别都有一定概率变成黑色。\n\n小 L 认为一个图是“密集的”，当且仅当只经过黑色边时，点 $1$ 到其余所有点的最短路径长度都不超过 $k$（特别地，若两个点不连通则它们之间最短路径的长度视为 $+ \\infty$）。\n\n小 L 想要知道，此时这个有向完全图有多大的概率是“密集的”呢？请你输出此概率对 $998,244,353$ 取模的结果。", "inputFormat": "第一行两个正整数 $n$（$2 \\le n \\le 12)$，$k$（$1 \\le k \\le n - 1$）。  \n接下来 $n \\times (n - 1)$ 行，每行 $4$ 个正整数 $x, y, p, q$，表示点 $x$ 到点 $y$ 的有向边变成黑色的概率为 $\\frac{p}{q}$。保证 $1 \\le x \\le n$，$1 \\le y \\le n$，$x \\ne y$，$0 \\le p \\le q < 998,244,353$，$q > 0$，每组合法的 $(x, y)$ 恰好出现一次。", "outputFormat": "一行一个整数表示答案。", "hint": "**【样例解释 #1】**\n\n这个有向完全图是“密集的”，当且仅当点 $1$ 到点 $2$ 的有向边和点 $1$ 到点 $3$ 的有向边同时变成黑色，这种情况出现的概率 $= \\frac{1}{2} \\times \\frac{1}{3} = \\frac{1}{6}$，$\\frac{1}{6} \\bmod 998,244,353 = 6^{998,244,351} \\bmod 998,244,353 = 166,374,059$。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P7143", "type": "P", "difficulty": 5, "samples": [["1\n3\n", "7\n"]], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2021", "THUPC"], "title": "[THUPC 2021 初赛] 线段树", "background": "", "description": "线段树是小 L 最喜欢的数据结构，它能高效地解决许多实际问题。\n\n给定一个正整数 $n$，小 L 构建出一棵下标属于整数区间 $[1, n]$ 的线段树：\n\n- 初始线段树只有一个结点 $[1, n]$。\n- 对于结点 $[L, R]$，若 $L < R$，则令 $mid = \\left[ \\frac{L + R}{2} \\right]$（$[x]$ 表示不超过 $x$ 的最大整数），小 L 对这个结点建出两个子结点 $[L, mid]$、$[mid + 1, R]$。\n\n小 L 定义了一个函数 $cover(a, b)$（$1 \\le a \\le b \\le n$），表示用若干个线段树结点不重不漏地覆盖区间 $[a, b]$，则使用的线段树结点个数的最小值。\n\n小 L 尝试使用这棵线段树解决某个复杂问题，并想要粗略地评估这棵线段树的性能。\n\n具体来说，区间 $[1, n]$ 有 $\\frac{n (n + 1)}{2}$ 个不同的子区间，如果小 L 从这 $\\frac{n (n + 1)}{2}$ 个子区间中等概率随机地选取一个，将其记为 $[A, B]$，则小 L 认为 $cover(A, B)$ 的期望值可用于评估此线段树的性能。\n\n小 L 想请你帮他计算出 $cover(A, B)$ 的期望值与 $\\frac{n (n + 1)}{2}$ 的乘积对 $1, 000, 000, 007$ 取模的结果，可以发现此结果一定是一个整数。", "inputFormat": "第一行一个正整数 $T$（$1 \\le T \\le 1000$）表示数据组数。  \n接下来 $T$ 行，其中第 $i$（$1 \\le i \\le T$）行一个正整数 $n$（$1 \\le n \\le {10}^{18}$）表示第 $i$ 组数据。", "outputFormat": "$T$ 行，第 $i$（$1 \\le i \\le T$）行一个整数表示第 i 组数据的答案。", "hint": "**【样例解释 #1】**\n\n$cover(1, 1) = 1$，$cover(2, 2) = 1$，$cover(3, 3) = 1$，$cover(1, 2) = 1$，$cover(2, 3) = 2$，$cover(1, 3) = 1$，故 $cover(A, B)$ 的期望 $= \\frac{1 + 1 + 1 + 1 + 2 + 1}{6} = \\frac{7}{6}$。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2021 初赛] 线段树", "background": "", "description": "线段树是小 L 最喜欢的数据结构，它能高效地解决许多实际问题。\n\n给定一个正整数 $n$，小 L 构建出一棵下标属于整数区间 $[1, n]$ 的线段树：\n\n- 初始线段树只有一个结点 $[1, n]$。\n- 对于结点 $[L, R]$，若 $L < R$，则令 $mid = \\left[ \\frac{L + R}{2} \\right]$（$[x]$ 表示不超过 $x$ 的最大整数），小 L 对这个结点建出两个子结点 $[L, mid]$、$[mid + 1, R]$。\n\n小 L 定义了一个函数 $cover(a, b)$（$1 \\le a \\le b \\le n$），表示用若干个线段树结点不重不漏地覆盖区间 $[a, b]$，则使用的线段树结点个数的最小值。\n\n小 L 尝试使用这棵线段树解决某个复杂问题，并想要粗略地评估这棵线段树的性能。\n\n具体来说，区间 $[1, n]$ 有 $\\frac{n (n + 1)}{2}$ 个不同的子区间，如果小 L 从这 $\\frac{n (n + 1)}{2}$ 个子区间中等概率随机地选取一个，将其记为 $[A, B]$，则小 L 认为 $cover(A, B)$ 的期望值可用于评估此线段树的性能。\n\n小 L 想请你帮他计算出 $cover(A, B)$ 的期望值与 $\\frac{n (n + 1)}{2}$ 的乘积对 $1, 000, 000, 007$ 取模的结果，可以发现此结果一定是一个整数。", "inputFormat": "第一行一个正整数 $T$（$1 \\le T \\le 1000$）表示数据组数。  \n接下来 $T$ 行，其中第 $i$（$1 \\le i \\le T$）行一个正整数 $n$（$1 \\le n \\le {10}^{18}$）表示第 $i$ 组数据。", "outputFormat": "$T$ 行，第 $i$（$1 \\le i \\le T$）行一个整数表示第 i 组数据的答案。", "hint": "**【样例解释 #1】**\n\n$cover(1, 1) = 1$，$cover(2, 2) = 1$，$cover(3, 3) = 1$，$cover(1, 2) = 1$，$cover(2, 3) = 2$，$cover(1, 3) = 1$，故 $cover(A, B)$ 的期望 $= \\frac{1 + 1 + 1 + 1 + 2 + 1}{6} = \\frac{7}{6}$。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P7144", "type": "P", "difficulty": 6, "samples": [["1 5\n1 1\n0\n0\n0 1\n", "0.500000000\n"], ["1 4\n5 14\n1 1\n1 1\n1 0\n", "0.041879441\n"]], "limits": {"time": [20000, 20000, 20000, 20000, 20000, 20000], "memory": [2048000, 2048000, 2048000, 2048000, 2048000, 2048000]}, "tags": ["模拟", "2021", "Special Judge", "THUPC"], "title": "[THUPC 2021 初赛] 狗蛋和二五仔", "background": "**那女孩对我说**  \n**代价为十辆铲车**", "description": "小 E 喜欢和老师变换着花样玩牌。最近，他们又发明了一种叫做“狗蛋和二五仔”的玩法。\n\n规则是这样的：\n\n游戏开始时小 E 和老师各有 $30$ 点体力值，手上各有 $2$ 张牌。所有的牌是完全相同的。每个玩家的面前都可以放置牌，开始时双方面前没有任何牌。\n\n双方轮流进行操作。玩家在每个自己的回合开始时先抽一张牌。“抽一张牌”的操作指的是，如果手上的牌的数量小于 $3$ 张，则再抓一张牌放在手上；如果手上恰好有 $3$ 张牌，则不能再抓牌。操作分为 $4$ 种类型。\n\n- 技能。让自己的体力值 $- 2$，然后抽一张牌。\n- 攻击。具体地，玩家可以选择一张放在自己面前的**本回合还未攻击过**的牌，选择对方面前的一张牌同归于尽，或者选择一张放在自己面前的**本回合还未攻击过**的牌，让对方的体力值 $- 3$。如果是后者，则将这张选择的牌标记为已攻击。\n- 打牌。如果你面前的牌的数量小于 $4$ 张，且手上有牌才能进行此操作。先进行下面的过程 $3$ 次：\n  - 随机选择一个角色，让它的体力值 $- 1$。这个角色可以是自己、对方或者某一方面前的一张牌。如果双方场上的牌一共有 $k$ 张，那么选择到任何一个角色的概率为 $\\frac{1}{k + 2}$。如果该角色是一张牌且体力值变为了 $0$，那么将它摧毁；如果该角色是一个玩家且体力值变为了 $0$，那么该玩家直接输掉游戏。\n  \n  在进行完 $3$ 次后将手上的一张牌放在自己面前。牌的体力值为 $2$。这张牌在本回合中被认为已攻击过。\n- 结束回合，接下来轮到对方的回合。\n\n一回合中，玩家可以进行多次操作，但是技能和打牌的操作次数**之和**不能超过 $O$。除了结束回合，这些操作没有顺序限制，比如你可以先打一张牌，然后使用技能，然后再打一张牌。在结束回合之前，玩家需要进行至少一次任意的操作才能结束回合。\n\n在任何时刻如果有玩家的体力值小于或等于 $0$，那么该玩家输掉游戏。\n\n游戏进行了几个回合后，现在轮到了小 E 的回合开始前。小 E 想让你帮他分析，如果双方都采用最优策略，那么现在自己赢的概率是多少。", "inputFormat": "第一行一个正整数 $T, O$，分别表示数据组数和每回合中技能和打牌的操作次数上限。  \n对于每组数据，第一行两个正整数 $E, S$，分别表示小 E 和老师现在的体力值。保证 $1 \\le E, S \\le 20$。  \n第二行一个非负整数 $c$，然后跟着 $c$ 个正整数 $a_1, \\ldots , a_c$，表示老师面前有 $c$ 张牌，它们的体力值分别为 $a_1, \\ldots , a_c$。保证 $0 \\le c \\le 4$，$1 \\le a_i \\le 2$。  \n第三行一个非负整数 $p$，然后跟着 $p$ 个正整数 $e_1, \\ldots , e_p$，表示小 E 面前有 $p$ 张牌，\n它们的体力值分别为 $e_1, \\ldots , e_p$。保证 $0 \\le p \\le 4$，$1 \\le e_i \\le 2$。  \n第四行两个 $[0, 3]$ 之间的非负整数，分别表示老师和小 E 的手牌数。  \n在你到来之前老师可能作了弊，你不需要判断输入的情况是否真的是游戏进行了几个回合后的情况。", "outputFormat": "对于每组数据输出一行一个实数，表示小 E 在双方采用最优决策时获胜的概率。你的输出的和标准答案的绝对误差不超过 ${10}^{-6}$ 时算作正确。", "hint": "**【样例解释 #1】**\n\n回合开始，小 E 抽一张牌。此时小 E 手上有 $2$ 张牌，老师手上没有牌，双方的面前都没有牌。双方的体力值均为 $1$。这时，最优策略下，小 E 不能使用技能，因为使用后会因为自己的体力值小于等于 $0$ 而输掉游戏；小 E 不能攻击，因为自己面前没有牌；小 E 也不能结束回合，因为本回合他还没有进行任何操作。所以小 E 的最优策略是打一张牌，这时会随机选到小 E 或者老师中的一个角色，让他体力值 $- 1$ 然后输掉游戏。所以小 E 的获胜概率为 $0.5$。\n\n**【子任务】**\n\n保证 $1\\le T\\le 351493,3\\le O \\le 5$ 。\n\n**【后记】**\n\n最后小 E 还是战胜了老师。\n\n**“老师你术士玩多了就知道怎么玩了，你打得还不够多。”**\n\n**“吹牛现在都流行这么吹的吗？兄弟你知道我术士多少胜场嘛，啊？我跟你说全世界没有一个人术士比我胜场多的。”**\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2021 初赛] 狗蛋和二五仔", "background": "**那女孩对我说**  \n**代价为十辆铲车**", "description": "小 E 喜欢和老师变换着花样玩牌。最近，他们又发明了一种叫做“狗蛋和二五仔”的玩法。\n\n规则是这样的：\n\n游戏开始时小 E 和老师各有 $30$ 点体力值，手上各有 $2$ 张牌。所有的牌是完全相同的。每个玩家的面前都可以放置牌，开始时双方面前没有任何牌。\n\n双方轮流进行操作。玩家在每个自己的回合开始时先抽一张牌。“抽一张牌”的操作指的是，如果手上的牌的数量小于 $3$ 张，则再抓一张牌放在手上；如果手上恰好有 $3$ 张牌，则不能再抓牌。操作分为 $4$ 种类型。\n\n- 技能。让自己的体力值 $- 2$，然后抽一张牌。\n- 攻击。具体地，玩家可以选择一张放在自己面前的**本回合还未攻击过**的牌，选择对方面前的一张牌同归于尽，或者选择一张放在自己面前的**本回合还未攻击过**的牌，让对方的体力值 $- 3$。如果是后者，则将这张选择的牌标记为已攻击。\n- 打牌。如果你面前的牌的数量小于 $4$ 张，且手上有牌才能进行此操作。先进行下面的过程 $3$ 次：\n  - 随机选择一个角色，让它的体力值 $- 1$。这个角色可以是自己、对方或者某一方面前的一张牌。如果双方场上的牌一共有 $k$ 张，那么选择到任何一个角色的概率为 $\\frac{1}{k + 2}$。如果该角色是一张牌且体力值变为了 $0$，那么将它摧毁；如果该角色是一个玩家且体力值变为了 $0$，那么该玩家直接输掉游戏。\n  \n  在进行完 $3$ 次后将手上的一张牌放在自己面前。牌的体力值为 $2$。这张牌在本回合中被认为已攻击过。\n- 结束回合，接下来轮到对方的回合。\n\n一回合中，玩家可以进行多次操作，但是技能和打牌的操作次数**之和**不能超过 $O$。除了结束回合，这些操作没有顺序限制，比如你可以先打一张牌，然后使用技能，然后再打一张牌。在结束回合之前，玩家需要进行至少一次任意的操作才能结束回合。\n\n在任何时刻如果有玩家的体力值小于或等于 $0$，那么该玩家输掉游戏。\n\n游戏进行了几个回合后，现在轮到了小 E 的回合开始前。小 E 想让你帮他分析，如果双方都采用最优策略，那么现在自己赢的概率是多少。", "inputFormat": "第一行一个正整数 $T, O$，分别表示数据组数和每回合中技能和打牌的操作次数上限。  \n对于每组数据，第一行两个正整数 $E, S$，分别表示小 E 和老师现在的体力值。保证 $1 \\le E, S \\le 20$。  \n第二行一个非负整数 $c$，然后跟着 $c$ 个正整数 $a_1, \\ldots , a_c$，表示老师面前有 $c$ 张牌，它们的体力值分别为 $a_1, \\ldots , a_c$。保证 $0 \\le c \\le 4$，$1 \\le a_i \\le 2$。  \n第三行一个非负整数 $p$，然后跟着 $p$ 个正整数 $e_1, \\ldots , e_p$，表示小 E 面前有 $p$ 张牌，\n它们的体力值分别为 $e_1, \\ldots , e_p$。保证 $0 \\le p \\le 4$，$1 \\le e_i \\le 2$。  \n第四行两个 $[0, 3]$ 之间的非负整数，分别表示老师和小 E 的手牌数。  \n在你到来之前老师可能作了弊，你不需要判断输入的情况是否真的是游戏进行了几个回合后的情况。", "outputFormat": "对于每组数据输出一行一个实数，表示小 E 在双方采用最优决策时获胜的概率。你的输出的和标准答案的绝对误差不超过 ${10}^{-6}$ 时算作正确。", "hint": "**【样例解释 #1】**\n\n回合开始，小 E 抽一张牌。此时小 E 手上有 $2$ 张牌，老师手上没有牌，双方的面前都没有牌。双方的体力值均为 $1$。这时，最优策略下，小 E 不能使用技能，因为使用后会因为自己的体力值小于等于 $0$ 而输掉游戏；小 E 不能攻击，因为自己面前没有牌；小 E 也不能结束回合，因为本回合他还没有进行任何操作。所以小 E 的最优策略是打一张牌，这时会随机选到小 E 或者老师中的一个角色，让他体力值 $- 1$ 然后输掉游戏。所以小 E 的获胜概率为 $0.5$。\n\n**【子任务】**\n\n保证 $1\\le T\\le 351493,3\\le O \\le 5$ 。\n\n**【后记】**\n\n最后小 E 还是战胜了老师。\n\n**“老师你术士玩多了就知道怎么玩了，你打得还不够多。”**\n\n**“吹牛现在都流行这么吹的吗？兄弟你知道我术士多少胜场嘛，啊？我跟你说全世界没有一个人术士比我胜场多的。”**\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P7145", "type": "P", "difficulty": 5, "samples": [["4 2\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "THUPC"], "title": "[THUPC 2021 初赛] 合法序列", "background": "", "description": "对于一个长度为 $n$ 的 $\\text{0-1}$ 序列 $s$，我们将它的位从左到右、从零开始编号，记为 $s_0, s_1, \\ldots , s_{n-1}$。\n\n给定一个正整数 $k$，从 $s$ 中取出某个长度为 $k$ 的子段。将这个子段解释为一个左侧为高位、右侧为低位的 $k$ 位二进制数，记为 $t$，则有 $0 \\le t < 2^k$。\n\n$s$ 有 $n - k + 1$ 个长度为 $k$ 的子段，如果对于其中的每一个子段，如上解释为二进制数 $t$ 后，$s$ 的编号为 $t$ 的位（即 $s_t$）都是 $1$，则说 $s$ 是合法的。保证 $2^k \\le n$，即 $t$ 作为 $s$ 的下标不会越界。\n\n给定 $n, k$，求合法的 $s$ 的数量。由于方案数可能较大，只需给出方案数模 $998, 244, 353$ 的结果作为答案。", "inputFormat": "输入有一行，包含两个用空格隔开的正整数 $n, k$。\n\n保证 $1 \\le k \\le 4$，$2^k \\le n \\le 500$。", "outputFormat": "输出一行，包含一个非负整数，即合法方案数模 $998, 244, 353$ 的结果。", "hint": "**【样例解释 #1】**\n\n有两个满足要求的序列：$0, 1, 1, 1$ 和 $1, 1, 1, 1$。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2021 初赛] 合法序列", "background": "", "description": "对于一个长度为 $n$ 的 $\\text{0-1}$ 序列 $s$，我们将它的位从左到右、从零开始编号，记为 $s_0, s_1, \\ldots , s_{n-1}$。\n\n给定一个正整数 $k$，从 $s$ 中取出某个长度为 $k$ 的子段。将这个子段解释为一个左侧为高位、右侧为低位的 $k$ 位二进制数，记为 $t$，则有 $0 \\le t < 2^k$。\n\n$s$ 有 $n - k + 1$ 个长度为 $k$ 的子段，如果对于其中的每一个子段，如上解释为二进制数 $t$ 后，$s$ 的编号为 $t$ 的位（即 $s_t$）都是 $1$，则说 $s$ 是合法的。保证 $2^k \\le n$，即 $t$ 作为 $s$ 的下标不会越界。\n\n给定 $n, k$，求合法的 $s$ 的数量。由于方案数可能较大，只需给出方案数模 $998, 244, 353$ 的结果作为答案。", "inputFormat": "输入有一行，包含两个用空格隔开的正整数 $n, k$。\n\n保证 $1 \\le k \\le 4$，$2^k \\le n \\le 500$。", "outputFormat": "输出一行，包含一个非负整数，即合法方案数模 $998, 244, 353$ 的结果。", "hint": "**【样例解释 #1】**\n\n有两个满足要求的序列：$0, 1, 1, 1$ 和 $1, 1, 1, 1$。\n\n**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P7146", "type": "P", "difficulty": 6, "samples": [["10 5 1 2 3 4\n", "3909327860\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "THUPC"], "title": "[THUPC 2021 初赛] 独立", "background": "feecle6418 备注：可以认为本题的数据是随机生成的。", "description": "给定一张 $n$ 个点 $m$ 条边的无向图。\n\n对于 $\\{1, 2, \\ldots , n\\}$ 的某个子集 $A$，$A$ 的分数为：\n\n1. 初始分数为 $0$；\n2. 对于所有 $i \\in A$，分数加 $a_i$；\n3. 对于所有边 $(u, v, k)$（代表从 $u$ 到 $v$ 值为 $k$ 的边）满足 $u \\in A$ 并且 $v \\in A$，分数减 $k$；\n\n现在请你计算出所有的 $A$ 中，分数最高是多少。", "inputFormat": "令 $q = 101$，$b = 137$，$p = 1, 000, 000, 007$。\n\n第一行包含六个整数 $n, m, x_0, y_0, a_0, z_0$（$1 \\le n \\le 100000$，$0 \\le m \\le \\frac n2$，$0 \\le x_0, y_0, a_0, z_0 < P$）。\n\n对于 $1 \\le i \\le n$，有 $a_i = (q \\times a_{i - 1} + b) \\bmod p$。\n\n对于 $1 \\le i \\le m$, 有 $x_i = (q \\times x_{i − 1} + b) \\bmod p$，$y_i = (q \\times y_{i − 1} + b) \\bmod p$，$z_i = (q \\times z_{i − 1} + b) \\bmod p$。对于每一组 $(x_i, y_i, z_i)$ 描述了一条连接 $(x_i \\bmod n) + 1, (y_i \\bmod n) + 1$ 的值为 $z_i$ 的边，如果 $x_i = y_i$ 或者之前出现过连接 $x_i$ 和 $y_i$ 的边，则忽视这条边（即这条边不存在）。", "outputFormat": "输出一行一个整数表示最高分数。", "hint": "**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2021 初赛] 独立", "background": "feecle6418 备注：可以认为本题的数据是随机生成的。", "description": "给定一张 $n$ 个点 $m$ 条边的无向图。\n\n对于 $\\{1, 2, \\ldots , n\\}$ 的某个子集 $A$，$A$ 的分数为：\n\n1. 初始分数为 $0$；\n2. 对于所有 $i \\in A$，分数加 $a_i$；\n3. 对于所有边 $(u, v, k)$（代表从 $u$ 到 $v$ 值为 $k$ 的边）满足 $u \\in A$ 并且 $v \\in A$，分数减 $k$；\n\n现在请你计算出所有的 $A$ 中，分数最高是多少。", "inputFormat": "令 $q = 101$，$b = 137$，$p = 1, 000, 000, 007$。\n\n第一行包含六个整数 $n, m, x_0, y_0, a_0, z_0$（$1 \\le n \\le 100000$，$0 \\le m \\le \\frac n2$，$0 \\le x_0, y_0, a_0, z_0 < P$）。\n\n对于 $1 \\le i \\le n$，有 $a_i = (q \\times a_{i - 1} + b) \\bmod p$。\n\n对于 $1 \\le i \\le m$, 有 $x_i = (q \\times x_{i − 1} + b) \\bmod p$，$y_i = (q \\times y_{i − 1} + b) \\bmod p$，$z_i = (q \\times z_{i − 1} + b) \\bmod p$。对于每一组 $(x_i, y_i, z_i)$ 描述了一条连接 $(x_i \\bmod n) + 1, (y_i \\bmod n) + 1$ 的值为 $z_i$ 的边，如果 $x_i = y_i$ 或者之前出现过连接 $x_i$ 和 $y_i$ 的边，则忽视这条边（即这条边不存在）。", "outputFormat": "输出一行一个整数表示最高分数。", "hint": "**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P7147", "type": "P", "difficulty": 6, "samples": [["8M\nZ\nE\n9P\n3P\n9S\n5P\nW\n3M\n8P\nDOUBLE\n5P\nZ\n2P\n3M\n8S\n2S\n5P\n5M\nE\n6M\n9S\n6P\n5S\n7M\n4S\n3S\n6M\n3S\n2M\n9M\n5S\nZ\n7P\n5P\n8M\n3M\nF\n7M\n2S\nN\n4P\n3S\nS\nPASS\n1P\n6S\n3P\n9P\n9S\n4M\n8P\nN\nZ\nN\n5M\nDOUBLE\nREVERSE\nS\n3P\n4M\n4S\n1S\nPASS\n4P\n6S\n7S\n7P\n6S\n9M\nREVERSE\n3P\n7P\nDOUBLE\nB\n9P\n4S\n5S\n7S\n7S\n7P\n6S\n9S\nB\n9M\nS\nF\n2P\n1P\nPASS\n9P\nDOUBLE\n4P\nPASS\n5S\n2M\n2P\n6P\nW\n1M\n8S\nREVERSE\n8M\n6M\n5M\nF\n4M\nF\n8P\n2S\n1M\n2M\n3M\n7M\n3S\nB\n7S\n1S\nREVERSE\n8P\n6M\n4S\n2M\nB\n1M\nS\n6P\n5M\nW\n7M\n2S\n8S\n8M\n1S\n4P\nE\n4M\n9M\n1M\n8S\n1S\n1P\n2P\n1P\nW\n6P\nN\nE\n", "A IN 8M\nB IN Z\nC IN E\nD IN 9P\nA IN 3P\nB IN 9S\nC IN 5P\nD IN W\nA IN 3M\nB IN 8P\nC IN DOUBLE\nD IN 5P\nA IN Z\nB IN 2P\nC IN 3M\nD IN 8S\nA IN 2S\nB IN 5P\nC IN 5M\nD IN E\nA IN 6M\nB IN 9S\nC IN 6P\nD IN 5S\nA IN 7M\nB IN 4S\nC IN 3S\nD IN 6M\nA IN 3S\nB IN 2M\nC IN 9M\nD IN 5S\nA IN Z\nB IN 7P\nC IN 5P\nD IN 8M\nA IN 3M\nB IN F\nC IN 7M\nD IN 2S\nA IN N\nB IN 4P\nC IN 3S\nD IN S\nA IN PASS\nB IN 1P\nC IN 6S\nD IN 3P\nA IN 9P\nB IN 9S\nC IN 4M\nD IN 8P\nA IN N\nA OUT PASS B\nC IN Z\nC OUT DOUBLE\nC IN N\nC OUT Z\nA PONG Z Z Z\nA OUT 9P\nB CHOW 7P 8P 9P\nB OUT Z\nC IN 5M\nC OUT N\nA PONG N N N\nA OUT 3P\nB CHOW 3P 4P 5P\nB OUT F\nC IN DOUBLE\nC OUT DOUBLE\nC IN REVERSE\nC OUT REVERSE\nB IN S\nB OUT S\nA IN 3P\nA OUT 3P\nD IN 4M\nD OUT W\nC IN 4S\nC OUT E\nB IN 1S\nB OUT 4S\nA RON\nA WIN\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2021", "THUPC"], "title": "[THUPC 2021 初赛] 麻将模拟器", "background": "", "description": "麻将是一种休闲的四人博弈游戏。你的任务是写一个模拟器来模拟一局游戏的进程。\n\n接下来将详细介绍游戏规则和每个玩家的决策。注意：为了实现方便和使游戏更加有趣味，这里介绍的规则和主流的几种麻将规则均略有不同。\n\n**基础规则：**\n\n- 一副麻将由 $148$ 张牌组成，其中包含 $37$ 种不同的牌，每种各 $4$ 张。\n- 这 $37$ 种牌分别是：一万到九万（`1M ~ 9M`）、一筒到九筒（`1P ~ 9P`）、一索到九索（`1S ~ 9S`）、东（`E`）、南（`S`）、西（`W`）、北（`N`）、白（`B`）、发（`F`）、中（`Z`），以及 $3$ 种特殊牌：跳过（`PASS`），反向（`REVERSE`），双重回合（`DOUBLE`）。\n- 游戏共有 $4$ 名玩家，不妨称其为 `A`，`B`，`C`，`D`。\n- 游戏开始前，将 $148$ 张牌随机洗乱后摆成一排，称为牌堆。此后玩家摸牌一定是从牌堆中摸取最靠前的一张牌。\n- 从 `A` 开始按照 `ABCDABCD...` 的顺序，每人依次从牌堆中摸一张牌，直到每人都有 $13$ 张牌，这些牌组成每个玩家的手牌。\n- 再从 `A` 开始按照 `ABCDABCD...` 的顺序，依次进入每人的回合：\n- 在一个回合中，玩家先摸一张牌进入自己的手牌，再从自己的手牌中打出一张牌。\n- 依次进行直到有人和牌或者无牌可摸时游戏结束。\n\n**特殊牌：**\n\n- 跳过（`PASS`）：在出牌时打出这张牌，可以指定一名玩家，跳过他的下一个回合。\n- 反向（`REVERSE`）：在出牌时打出这张牌，反转进行回合的顺序，即由 `ABCDABCD...` 变为 `ADCBADCB...` 或由 `ADCBADCB...` 变为 `ABCDABCD...`。出牌后即按照反转后的顺序，从出牌者原先的上家开始进行回合。\n- 双重回合（`DOUBLE`）：在出牌时打出这张牌，该名玩家立即进入一个额外的回合。\n\n**牌型：**&#8203;有如下 $3$ 种牌型：\n\n- 顺子：$3$ 张数字连续的万，或 $3$ 张数字连续的筒，或 $3$ 张数字连续的索，如 `4P 5P 6P`。\n- 刻子：$3$ 张完全一样的非特殊牌，如 `B B B`。\n- 对子：$2$ 张完全一样的非特殊牌，如 `9M 9M`。\n\n**吃、碰：**\n\n- 当一名玩家打出一张非特殊牌时，其他玩家可以进行吃或碰：\n- 吃（`CHOW`）：当打出的这张牌跟自己的手牌中的某两张牌能组成一个顺子时，可以将手牌中能与之组成顺子的其余两张牌取出，与这张牌一起摆在旁边。\n- **注意只有上一名出牌玩家的下家（按当前顺序原本应在下一个进行回合的玩家）才能吃。**\n- 碰（`PONG`）：当打出的这张牌跟自己的手牌中的某两张牌能组成一个刻子时，可以将手牌中能与之组成刻子的其余两张牌取出，与这张牌一起摆在旁边。\n- 碰没有吃的上述限制，任意其他玩家都能碰。\n- 如果既有玩家能吃又有玩家能碰，则碰优先于吃。\n- 吃（或碰）不是强制性的，也就是说玩家满足吃（或碰）的条件时，可以选择不吃（或碰）。\n- 吃和碰统称为副露。为方便起见，不将副露视为手牌的一部分。\n- 在任意一名玩家吃（或碰）后，跳过从上一名出牌的玩家到这名玩家之间的所有玩家的回合，直接从当前玩家开始进行新的回合。但该玩家在这一回合中**跳过摸牌直接出牌**，在下一回合（如果没有吃碰的话）恢复正常。\n- **注意在本规则中不能杠。**\n\n**胡牌规则：**\n\n- 称一名玩家的牌能和，当且仅当满足如下条件：\n  - 牌数为 $14 - 3 n$，其中 $n$ 为该玩家副露（即吃碰）的个数；\n  - 这些牌中无特殊牌；\n  -  这些牌能够被分成 $(5 - n)$ 组，其中 $(4 - n)$ 组均为 $3$ 张且均为顺子或刻子，其余一组为 $2$ 张且为对子。\n- **注意本规则中不支持七对子、十三幺、全不靠等特殊的和牌规则。**\n- 另外，定义一组包含 $13 - 3 n$ 张牌的手牌的和牌距离为最小的 $x$，使得向这些牌中加入特定的 $x$ 张牌，再去掉 $x - 1$ 张手牌后，每种牌仍不超过 $4$ 张且能和。\n- 定义一组包含 $14 - 3 n$ 张牌的手牌的和牌距离为最小的 $x$，使得向这些牌中加入特定的 $x$ 张牌，再去掉 $x$ 张手牌后，每种牌仍不超过 $4$ 张且能和。\n- 特别地，一手能和的牌的和牌距离为 $0$；和牌距离为 $1$ 的牌称为听牌。\n- 注意这里的“**每种牌仍不超过** $\\boldsymbol{4}$ **张**”的限制：如果一手牌是 `1M 1M 1M 1M` 且副露数为 $3$，再向其中加入一张 `1M` 就能和，但是由于有 $5$ 张 `1M` 所以是不被允许的，故不认为其和牌距离为 $1$。\n- 但如果一手牌是 `1M` 且副露数为 $4$，但是曾进行过一次 `1M 1M 1M` 的碰，仍然认为其和牌距离为 $1$（虽然缺的这张 `1M` 永远也等不到）。\n\n**终局：**\n\n- 荣和（`RON`）：当一名玩家出牌后，某名其他玩家的手牌加上这张牌能和，则称这名玩家荣和。荣和优先于吃碰。\n- 如果有多名玩家同时达到荣和的标准，规定只有从上一名出牌玩家开始，沿回合进行顺序的第一名能荣和的玩家才能荣和，其余玩家荣和不了，称这种情况为截和。\n- 自摸（`SELFDRAWN`）：一名玩家摸牌后其手牌能和，称这名玩家自摸。\n- 一旦有一名玩家荣和或自摸，游戏立即结束，该名玩家胜利。\n- 如果某名玩家摸牌时发现牌堆中已经无牌可摸，游戏立即结束，称此种情况为流局。\n\n**出牌策略：**&#8203;每名玩家的出牌策略相同且固定：\n\n- 出牌时，若手里有特殊牌一定会优先出，且如果有多种特殊牌，按照 `PASS`、`REVERSE`、`DOUBLE` 的优先顺序；出的 `PASS` 一定指定下家。\n- 出牌时若手里没有特殊牌，则会对于每一种可能的出牌方法计算出完牌后的和牌距离，选择和牌距离最小的一种方案。如果有并列最小，按照 `Z`，`F`，`B`，`N`，`W`，`S`，`E`，`9S`，`8S`，……，`1S`，`9P`，……，`1P`，`9M`，……，`1M` 的优先顺序出牌。\n- 同一个人能吃且能碰时，优先考虑碰；因为每种牌只有 $4$ 张所以不会有两名玩家同时可以碰的情况；当且仅当吃（或碰）后能使得和牌距离严格减小才会去吃（或碰）；如果有多种吃的方案使得和牌距离严格减小，优先选择数字较大的方案。\n-  能荣和一定荣和（除非被截和），能自摸一定自摸，不会拒和（能和时故意选择不和）。", "inputFormat": "输入共 $148$ 行，按照牌堆从前到后的顺序输入每一张牌。  \n每行输入一个字符串表示这一张牌。  \n用 `1M`，`2M`，……，`9M` 代表万，`1P`，`2P`，……，`9P` 代表筒，`1S`，`2S`，……，`9S` 代表索，`E`，`S`，`W`，`N`，`B`，`F`，`Z` 分别代表东、南、西、北、白、发、中，`PASS` 代表跳过，`REVERSE` 表示反向，`DOUBLE` 表示双重回合。", "outputFormat": "按照如下几条规则进行输出：\n\n- 当任意一名玩家摸牌时（**包括游戏最开始的摸牌**），输出一行：  \n  `x IN y`  \n  其中 `x` 为玩家名称，`y` 为摸到的牌。\n- 当任意一名玩家出牌时，如果出的牌不是 `PASS`，输出一行：  \n  `x OUT y`  \n  其中 `x` 为玩家名称，`y` 为出的牌。  \n  如果出的牌是 `PASS`，应当输出一行：  \n  `x OUT PASS z`  \n  其中 `z` 为 `PASS` 指定的对象。\n- 当任意一名玩家吃时，输出一行：  \n  `x CHOW y1 y2 y3`  \n  其中 `x` 为玩家名称，`y1`，`y2`，`y3` 为吃涉及到的 $3$ 张牌，按数字递增的顺序输出。\n- 当任意一名玩家碰时，输出一行：  \n  `x PONG y1 y2 y3`  \n  其中 `x` 为玩家名称，`y1`，`y2`，`y3` 为碰涉及到的 $3$ 张牌，根据碰的规则，`y1`，`y2`，`y3` 应相同。\n- 当任意一名玩家荣和时，输出一行：  \n  `x RON`  \n  其中 `x` 为玩家名称。\n- 当任意一名玩家自摸时，输出一行：  \n  `x SELFDRAWN`  \n  其中 `x` 为玩家名称。\n- 游戏的最后，如果某名玩家获得胜利，输出一行：  \n  `x WIN`  \n  其中 `x` 为玩家名称。  \n  如果出现流局，输出一行：  \n  `DRAW`\n\n**需要特别注意的是，输入输出中出现的英文字母均为大写。**", "hint": "**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2021 初赛] 麻将模拟器", "background": "", "description": "麻将是一种休闲的四人博弈游戏。你的任务是写一个模拟器来模拟一局游戏的进程。\n\n接下来将详细介绍游戏规则和每个玩家的决策。注意：为了实现方便和使游戏更加有趣味，这里介绍的规则和主流的几种麻将规则均略有不同。\n\n**基础规则：**\n\n- 一副麻将由 $148$ 张牌组成，其中包含 $37$ 种不同的牌，每种各 $4$ 张。\n- 这 $37$ 种牌分别是：一万到九万（`1M ~ 9M`）、一筒到九筒（`1P ~ 9P`）、一索到九索（`1S ~ 9S`）、东（`E`）、南（`S`）、西（`W`）、北（`N`）、白（`B`）、发（`F`）、中（`Z`），以及 $3$ 种特殊牌：跳过（`PASS`），反向（`REVERSE`），双重回合（`DOUBLE`）。\n- 游戏共有 $4$ 名玩家，不妨称其为 `A`，`B`，`C`，`D`。\n- 游戏开始前，将 $148$ 张牌随机洗乱后摆成一排，称为牌堆。此后玩家摸牌一定是从牌堆中摸取最靠前的一张牌。\n- 从 `A` 开始按照 `ABCDABCD...` 的顺序，每人依次从牌堆中摸一张牌，直到每人都有 $13$ 张牌，这些牌组成每个玩家的手牌。\n- 再从 `A` 开始按照 `ABCDABCD...` 的顺序，依次进入每人的回合：\n- 在一个回合中，玩家先摸一张牌进入自己的手牌，再从自己的手牌中打出一张牌。\n- 依次进行直到有人和牌或者无牌可摸时游戏结束。\n\n**特殊牌：**\n\n- 跳过（`PASS`）：在出牌时打出这张牌，可以指定一名玩家，跳过他的下一个回合。\n- 反向（`REVERSE`）：在出牌时打出这张牌，反转进行回合的顺序，即由 `ABCDABCD...` 变为 `ADCBADCB...` 或由 `ADCBADCB...` 变为 `ABCDABCD...`。出牌后即按照反转后的顺序，从出牌者原先的上家开始进行回合。\n- 双重回合（`DOUBLE`）：在出牌时打出这张牌，该名玩家立即进入一个额外的回合。\n\n**牌型：**&#8203;有如下 $3$ 种牌型：\n\n- 顺子：$3$ 张数字连续的万，或 $3$ 张数字连续的筒，或 $3$ 张数字连续的索，如 `4P 5P 6P`。\n- 刻子：$3$ 张完全一样的非特殊牌，如 `B B B`。\n- 对子：$2$ 张完全一样的非特殊牌，如 `9M 9M`。\n\n**吃、碰：**\n\n- 当一名玩家打出一张非特殊牌时，其他玩家可以进行吃或碰：\n- 吃（`CHOW`）：当打出的这张牌跟自己的手牌中的某两张牌能组成一个顺子时，可以将手牌中能与之组成顺子的其余两张牌取出，与这张牌一起摆在旁边。\n- **注意只有上一名出牌玩家的下家（按当前顺序原本应在下一个进行回合的玩家）才能吃。**\n- 碰（`PONG`）：当打出的这张牌跟自己的手牌中的某两张牌能组成一个刻子时，可以将手牌中能与之组成刻子的其余两张牌取出，与这张牌一起摆在旁边。\n- 碰没有吃的上述限制，任意其他玩家都能碰。\n- 如果既有玩家能吃又有玩家能碰，则碰优先于吃。\n- 吃（或碰）不是强制性的，也就是说玩家满足吃（或碰）的条件时，可以选择不吃（或碰）。\n- 吃和碰统称为副露。为方便起见，不将副露视为手牌的一部分。\n- 在任意一名玩家吃（或碰）后，跳过从上一名出牌的玩家到这名玩家之间的所有玩家的回合，直接从当前玩家开始进行新的回合。但该玩家在这一回合中**跳过摸牌直接出牌**，在下一回合（如果没有吃碰的话）恢复正常。\n- **注意在本规则中不能杠。**\n\n**胡牌规则：**\n\n- 称一名玩家的牌能和，当且仅当满足如下条件：\n  - 牌数为 $14 - 3 n$，其中 $n$ 为该玩家副露（即吃碰）的个数；\n  - 这些牌中无特殊牌；\n  -  这些牌能够被分成 $(5 - n)$ 组，其中 $(4 - n)$ 组均为 $3$ 张且均为顺子或刻子，其余一组为 $2$ 张且为对子。\n- **注意本规则中不支持七对子、十三幺、全不靠等特殊的和牌规则。**\n- 另外，定义一组包含 $13 - 3 n$ 张牌的手牌的和牌距离为最小的 $x$，使得向这些牌中加入特定的 $x$ 张牌，再去掉 $x - 1$ 张手牌后，每种牌仍不超过 $4$ 张且能和。\n- 定义一组包含 $14 - 3 n$ 张牌的手牌的和牌距离为最小的 $x$，使得向这些牌中加入特定的 $x$ 张牌，再去掉 $x$ 张手牌后，每种牌仍不超过 $4$ 张且能和。\n- 特别地，一手能和的牌的和牌距离为 $0$；和牌距离为 $1$ 的牌称为听牌。\n- 注意这里的“**每种牌仍不超过** $\\boldsymbol{4}$ **张**”的限制：如果一手牌是 `1M 1M 1M 1M` 且副露数为 $3$，再向其中加入一张 `1M` 就能和，但是由于有 $5$ 张 `1M` 所以是不被允许的，故不认为其和牌距离为 $1$。\n- 但如果一手牌是 `1M` 且副露数为 $4$，但是曾进行过一次 `1M 1M 1M` 的碰，仍然认为其和牌距离为 $1$（虽然缺的这张 `1M` 永远也等不到）。\n\n**终局：**\n\n- 荣和（`RON`）：当一名玩家出牌后，某名其他玩家的手牌加上这张牌能和，则称这名玩家荣和。荣和优先于吃碰。\n- 如果有多名玩家同时达到荣和的标准，规定只有从上一名出牌玩家开始，沿回合进行顺序的第一名能荣和的玩家才能荣和，其余玩家荣和不了，称这种情况为截和。\n- 自摸（`SELFDRAWN`）：一名玩家摸牌后其手牌能和，称这名玩家自摸。\n- 一旦有一名玩家荣和或自摸，游戏立即结束，该名玩家胜利。\n- 如果某名玩家摸牌时发现牌堆中已经无牌可摸，游戏立即结束，称此种情况为流局。\n\n**出牌策略：**&#8203;每名玩家的出牌策略相同且固定：\n\n- 出牌时，若手里有特殊牌一定会优先出，且如果有多种特殊牌，按照 `PASS`、`REVERSE`、`DOUBLE` 的优先顺序；出的 `PASS` 一定指定下家。\n- 出牌时若手里没有特殊牌，则会对于每一种可能的出牌方法计算出完牌后的和牌距离，选择和牌距离最小的一种方案。如果有并列最小，按照 `Z`，`F`，`B`，`N`，`W`，`S`，`E`，`9S`，`8S`，……，`1S`，`9P`，……，`1P`，`9M`，……，`1M` 的优先顺序出牌。\n- 同一个人能吃且能碰时，优先考虑碰；因为每种牌只有 $4$ 张所以不会有两名玩家同时可以碰的情况；当且仅当吃（或碰）后能使得和牌距离严格减小才会去吃（或碰）；如果有多种吃的方案使得和牌距离严格减小，优先选择数字较大的方案。\n-  能荣和一定荣和（除非被截和），能自摸一定自摸，不会拒和（能和时故意选择不和）。", "inputFormat": "输入共 $148$ 行，按照牌堆从前到后的顺序输入每一张牌。  \n每行输入一个字符串表示这一张牌。  \n用 `1M`，`2M`，……，`9M` 代表万，`1P`，`2P`，……，`9P` 代表筒，`1S`，`2S`，……，`9S` 代表索，`E`，`S`，`W`，`N`，`B`，`F`，`Z` 分别代表东、南、西、北、白、发、中，`PASS` 代表跳过，`REVERSE` 表示反向，`DOUBLE` 表示双重回合。", "outputFormat": "按照如下几条规则进行输出：\n\n- 当任意一名玩家摸牌时（**包括游戏最开始的摸牌**），输出一行：  \n  `x IN y`  \n  其中 `x` 为玩家名称，`y` 为摸到的牌。\n- 当任意一名玩家出牌时，如果出的牌不是 `PASS`，输出一行：  \n  `x OUT y`  \n  其中 `x` 为玩家名称，`y` 为出的牌。  \n  如果出的牌是 `PASS`，应当输出一行：  \n  `x OUT PASS z`  \n  其中 `z` 为 `PASS` 指定的对象。\n- 当任意一名玩家吃时，输出一行：  \n  `x CHOW y1 y2 y3`  \n  其中 `x` 为玩家名称，`y1`，`y2`，`y3` 为吃涉及到的 $3$ 张牌，按数字递增的顺序输出。\n- 当任意一名玩家碰时，输出一行：  \n  `x PONG y1 y2 y3`  \n  其中 `x` 为玩家名称，`y1`，`y2`，`y3` 为碰涉及到的 $3$ 张牌，根据碰的规则，`y1`，`y2`，`y3` 应相同。\n- 当任意一名玩家荣和时，输出一行：  \n  `x RON`  \n  其中 `x` 为玩家名称。\n- 当任意一名玩家自摸时，输出一行：  \n  `x SELFDRAWN`  \n  其中 `x` 为玩家名称。\n- 游戏的最后，如果某名玩家获得胜利，输出一行：  \n  `x WIN`  \n  其中 `x` 为玩家名称。  \n  如果出现流局，输出一行：  \n  `DRAW`\n\n**需要特别注意的是，输入输出中出现的英文字母均为大写。**", "hint": "**【题目来源】**\n\n来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2021-pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P7148", "type": "P", "difficulty": 3, "samples": [["4\n1 2\n1 3\n1 4", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "2020", "USACO", "O2优化"], "title": "[USACO20DEC] Cowntagion S", "background": "", "description": "Farmer John 和他的农民团队为了控制牛传染病 COWVID-19 在他们农场间的传播而夜以继日地工作。\n\n他们共同监控着 $N$ 个农场（$1≤N≤10^5$），编号为 $1…N$。农场间由 $N−1$ 条道路连接，使得每个农场都可以从农场 $1$ 出发经过一些道路到达。\n\n很不幸，农场 $1$ 中的一头奶牛的 COWVID-19 检测呈阳性。暂时这个农场的其他奶牛以及其他农场的所有奶牛都还没有染上疾病。然而，根据这个疾病通过接触传播的特性，Farmer John 推测每一天都会有以下不利的事件之一发生：\n\n(1) 在一个农场内，「超级传播者」导致该农场感染 COWVID-19 的奶牛数量翻倍；或者\n\n(2) 一头感染 COWVID-19 的奶牛从一个农场沿道路去往了一个相邻的农场。\n\nFarmer John 担心疫情会很快爆发。请帮助 Farmer John 求出每个农场内均有至少一头奶牛感染疾病所需经过的最小天数。 ", "inputFormat": "输入的第一行包含一个整数 $N$。以下 $N−1$ 行每行包含两个空格分隔的整数 $a$ 和 $b$，表示一条农场 $a$ 与 $b$ 之间的道路。$a$ 和 $b$ 均在 $1…N$ 范围内。 ", "outputFormat": "输出疫情爆发至所有农场所需经过的最小天数。", "hint": "该样例对应的一个可能的事件序列如下：农场 $1$ 内染病的奶牛数量翻倍再翻倍，使得两天后农场 $1$ 内有 $4$ 头染病的奶牛。在此后 $3$ 天，分别有一头染病的奶牛从农场 $1$ 去往农场 $2$、$3$ 和 $4$。$5$ 天过后每个农场均有至少 $1$ 头染病的奶牛。\n\n\n - 测试点 1-4 中，每个农场均直接与农场 $1$ 相连（除农场 $1$ 外）。\n - 测试点 5-7 中，农场 $2…N$ 均至多与两条道路相连。\n - 测试点 8-15 没有额外限制。\n\n供题：Dhruv Rohatgi ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Cowntagion S", "background": "", "description": "Farmer John 和他的农民团队为了控制牛传染病 COWVID-19 在他们农场间的传播而夜以继日地工作。\n\n他们共同监控着 $N$ 个农场（$1≤N≤10^5$），编号为 $1…N$。农场间由 $N−1$ 条道路连接，使得每个农场都可以从农场 $1$ 出发经过一些道路到达。\n\n很不幸，农场 $1$ 中的一头奶牛的 COWVID-19 检测呈阳性。暂时这个农场的其他奶牛以及其他农场的所有奶牛都还没有染上疾病。然而，根据这个疾病通过接触传播的特性，Farmer John 推测每一天都会有以下不利的事件之一发生：\n\n(1) 在一个农场内，「超级传播者」导致该农场感染 COWVID-19 的奶牛数量翻倍；或者\n\n(2) 一头感染 COWVID-19 的奶牛从一个农场沿道路去往了一个相邻的农场。\n\nFarmer John 担心疫情会很快爆发。请帮助 Farmer John 求出每个农场内均有至少一头奶牛感染疾病所需经过的最小天数。 ", "inputFormat": "输入的第一行包含一个整数 $N$。以下 $N−1$ 行每行包含两个空格分隔的整数 $a$ 和 $b$，表示一条农场 $a$ 与 $b$ 之间的道路。$a$ 和 $b$ 均在 $1…N$ 范围内。 ", "outputFormat": "输出疫情爆发至所有农场所需经过的最小天数。", "hint": "该样例对应的一个可能的事件序列如下：农场 $1$ 内染病的奶牛数量翻倍再翻倍，使得两天后农场 $1$ 内有 $4$ 头染病的奶牛。在此后 $3$ 天，分别有一头染病的奶牛从农场 $1$ 去往农场 $2$、$3$ 和 $4$。$5$ 天过后每个农场均有至少 $1$ 头染病的奶牛。\n\n\n - 测试点 1-4 中，每个农场均直接与农场 $1$ 相连（除农场 $1$ 外）。\n - 测试点 5-7 中，农场 $2…N$ 均至多与两条道路相连。\n - 测试点 8-15 没有额外限制。\n\n供题：Dhruv Rohatgi ", "locale": "zh-CN"}}}
{"pid": "P7149", "type": "P", "difficulty": 4, "samples": [["4\n0 2\n1 0\n2 3\n3 5", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "USACO", "离散化", "O2优化", "排序", "前缀和"], "title": "[USACO20DEC] Rectangular Pasture S", "background": "", "description": "Farmer John 最大的牧草地可以被看作是一个由方格组成的巨大的二维方阵（想象一个巨大的棋盘）。现在，有 $N$ 头奶牛正占据某些方格（$1≤N≤2500$）。\n\nFarmer John 想要建造一个可以包围一块矩形区域的栅栏；这个矩形必须四边与 $x$ 轴和 $y$ 轴平行，最少包含一个方格。请帮助他求出他可以包围在这样的区域内的不同的奶牛子集的数量。注意空集应当被计算为答案之一。 ", "inputFormat": "输入的第一行包含一个整数 $N$。以下 $N$ 行每行包含两个空格分隔的整数，表示一头奶牛所在方格的坐标 $(x,y)$。所有 $x$ 坐标各不相同，所有 $y$ 坐标各不相同。所有 $x$ 与 $y$ 的值均在 $0…10^9$ 范围内。 ", "outputFormat": " 输出 FJ 可以包围的奶牛的子集数量。可以证明这个数量可以用 64 位有符号整数型存储（例如 C/C++ 中的long long）。 ", "hint": "共有 $2^4$ 个子集。FJ 不能建造一个栅栏仅包围奶牛 $1$、$2$、$4$，或仅包围奶牛 $2$、$4$，或仅包围奶牛 $1$、$4$，所以答案为 $2^4-3=16-3=13$。 \n\n - 测试点 2-3 满足 $N≤20$。\n - 测试点 4-6 满足 $N≤100$。\n - 测试点 7-12 满足 $N≤500$。\n - 测试点 13-20 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Rectangular Pasture S", "background": "", "description": "Farmer John 最大的牧草地可以被看作是一个由方格组成的巨大的二维方阵（想象一个巨大的棋盘）。现在，有 $N$ 头奶牛正占据某些方格（$1≤N≤2500$）。\n\nFarmer John 想要建造一个可以包围一块矩形区域的栅栏；这个矩形必须四边与 $x$ 轴和 $y$ 轴平行，最少包含一个方格。请帮助他求出他可以包围在这样的区域内的不同的奶牛子集的数量。注意空集应当被计算为答案之一。 ", "inputFormat": "输入的第一行包含一个整数 $N$。以下 $N$ 行每行包含两个空格分隔的整数，表示一头奶牛所在方格的坐标 $(x,y)$。所有 $x$ 坐标各不相同，所有 $y$ 坐标各不相同。所有 $x$ 与 $y$ 的值均在 $0…10^9$ 范围内。 ", "outputFormat": " 输出 FJ 可以包围的奶牛的子集数量。可以证明这个数量可以用 64 位有符号整数型存储（例如 C/C++ 中的long long）。 ", "hint": "共有 $2^4$ 个子集。FJ 不能建造一个栅栏仅包围奶牛 $1$、$2$、$4$，或仅包围奶牛 $2$、$4$，或仅包围奶牛 $1$、$4$，所以答案为 $2^4-3=16-3=13$。 \n\n - 测试点 2-3 满足 $N≤20$。\n - 测试点 4-6 满足 $N≤100$。\n - 测试点 7-12 满足 $N≤500$。\n - 测试点 13-20 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN"}}}
{"pid": "P7150", "type": "P", "difficulty": 4, "samples": [["6\nE 3 5\nN 5 3\nE 4 6\nE 10 4\nN 11 1\nE 9 2", "0\n0\n1\n2\n1\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2020", "USACO", "并查集", "O2优化", "排序"], "title": "[USACO20DEC] Stuck in a Rut S", "background": "", "description": "Farmer John 最近扩大了他的农场，从奶牛们的角度看来这个农场相当于是无限大了！奶牛们将农场上放牧的区域想作是一个由正方形方格组成的无限大二维方阵，每个方格中均有美味的草（将每个方格看作是棋盘上的一个方格）。Farmer John 的 $N$ 头奶牛（$1≤N≤1000$）初始时位于不同的方格中，一部分朝向北面，一部分朝向东面。\n\n每一小时，每头奶牛会执行以下二者之一：\n\n - 如果她当前所在的方格里的草已经被其他奶牛吃掉了，则她会停下（并从这个时刻开始一直保持停止）。\n - 吃完她当前所在的方格中的所有草，并向她朝向的方向移动一个方格。\n\n经过一段时间，每头奶牛的身后会留下一条被啃秃了的轨迹。\n\n如果两头奶牛在一次移动中移动到了同一个有草的方格，她们会分享这个方格中的草，并在下一个小时继续沿她们朝向的方向移动。\n\n当 Farmer John 看到停止吃草的奶牛时会不高兴，他想要知道谁该为他停止吃草的奶牛受到责备。如果奶牛 $b$\n停在了之前奶牛 $a$ 吃过草的一个方格，我们就称奶牛 $a$ 阻碍了奶牛 $b$。进一步地，如果奶牛 $a$ 阻碍了奶牛 $b$ 且奶牛 $b$ 阻碍了奶牛 $c$，我们认为奶牛 $a$ 也阻碍了奶牛 $c$（也就是说，「阻碍」关系具有传递性）。每头奶牛受到责备的程度与这头奶牛阻碍的奶牛数量一致。请计算每头奶牛受到责备的数量——也就是说，每头奶牛阻碍的奶牛数量。 ", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行，每行描述一头奶牛的起始位置，包含一个字符 N（表示朝向北面） 或 E（表示朝向东面），以及两个非负整数 $x$ 和 $y$（$0≤x≤10^9$，$0≤y≤10^9$）表示方格的坐标。所有 $x$ 坐标各不相同，所有 $y$ 坐标各不相同。\n\n为了使方向和坐标尽可能明确，如果一头奶牛位于方格 $(x,y)$ 并向北移动，她会到达方格 $(x,y+1)$。如果她向东移动，她会到达方格 $(x+1,y)$。 ", "outputFormat": "输出 $N$ 行。输出的第 $i$ 行包含输入中的第 $i$ 头奶牛受到的责备的数量。 ", "hint": "在这个样例中，奶牛 3 阻碍了奶牛 2，奶牛 4 阻碍了奶牛 5，奶牛 5 阻碍了奶牛 6。根据传递性，奶牛 4 也阻碍了奶牛 6。 \n\n - 测试点 2-5 中，所有坐标不超过 $2000$。\n - 测试点 6-10 没有额外限制。\n\n供题：Brian Dean ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Stuck in a Rut S", "background": "", "description": "Farmer John 最近扩大了他的农场，从奶牛们的角度看来这个农场相当于是无限大了！奶牛们将农场上放牧的区域想作是一个由正方形方格组成的无限大二维方阵，每个方格中均有美味的草（将每个方格看作是棋盘上的一个方格）。Farmer John 的 $N$ 头奶牛（$1≤N≤1000$）初始时位于不同的方格中，一部分朝向北面，一部分朝向东面。\n\n每一小时，每头奶牛会执行以下二者之一：\n\n - 如果她当前所在的方格里的草已经被其他奶牛吃掉了，则她会停下（并从这个时刻开始一直保持停止）。\n - 吃完她当前所在的方格中的所有草，并向她朝向的方向移动一个方格。\n\n经过一段时间，每头奶牛的身后会留下一条被啃秃了的轨迹。\n\n如果两头奶牛在一次移动中移动到了同一个有草的方格，她们会分享这个方格中的草，并在下一个小时继续沿她们朝向的方向移动。\n\n当 Farmer John 看到停止吃草的奶牛时会不高兴，他想要知道谁该为他停止吃草的奶牛受到责备。如果奶牛 $b$\n停在了之前奶牛 $a$ 吃过草的一个方格，我们就称奶牛 $a$ 阻碍了奶牛 $b$。进一步地，如果奶牛 $a$ 阻碍了奶牛 $b$ 且奶牛 $b$ 阻碍了奶牛 $c$，我们认为奶牛 $a$ 也阻碍了奶牛 $c$（也就是说，「阻碍」关系具有传递性）。每头奶牛受到责备的程度与这头奶牛阻碍的奶牛数量一致。请计算每头奶牛受到责备的数量——也就是说，每头奶牛阻碍的奶牛数量。 ", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行，每行描述一头奶牛的起始位置，包含一个字符 N（表示朝向北面） 或 E（表示朝向东面），以及两个非负整数 $x$ 和 $y$（$0≤x≤10^9$，$0≤y≤10^9$）表示方格的坐标。所有 $x$ 坐标各不相同，所有 $y$ 坐标各不相同。\n\n为了使方向和坐标尽可能明确，如果一头奶牛位于方格 $(x,y)$ 并向北移动，她会到达方格 $(x,y+1)$。如果她向东移动，她会到达方格 $(x+1,y)$。 ", "outputFormat": "输出 $N$ 行。输出的第 $i$ 行包含输入中的第 $i$ 头奶牛受到的责备的数量。 ", "hint": "在这个样例中，奶牛 3 阻碍了奶牛 2，奶牛 4 阻碍了奶牛 5，奶牛 5 阻碍了奶牛 6。根据传递性，奶牛 4 也阻碍了奶牛 6。 \n\n - 测试点 2-5 中，所有坐标不超过 $2000$。\n - 测试点 6-10 没有额外限制。\n\n供题：Brian Dean ", "locale": "zh-CN"}}}
{"pid": "P7151", "type": "P", "difficulty": 5, "samples": [["10 1\n##########\n#........#\n#S.......#\n#........#\n##########\n#S....S..#\n##########\n##########\n##########\n##########", "15"], ["10 2\n##########\n#.#......#\n#.#......#\n#S.......#\n#.#......#\n#.#......#\n##########\n##########\n##########\n##########", "28"], ["10 2\n##########\n#.S#.....#\n#..#.....#\n#S.......#\n#..#.....#\n#..#.....#\n##########\n##########\n##########\n##########", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "2020", "USACO", "堆", "O2优化", "广度优先搜索 BFS"], "title": "[USACO20DEC] Replication G", "background": "", "description": "在网上观看太多机械 DIY 视频的后果就是，Farmer John 偶然在他的农场上制造了一个可以自我复制的机器人！\n\n农场可以用一个 $N×N$ 的方阵表示（$3≤N≤1000$），其中每个方格是空的或有岩石，并且所有边界上的方格均有岩石。某些没有岩石的方格被指定为机器人可能的起始位置。\n\nFarmer John 初始将机器人放置在可能的起始位置之一。在之后的每一个小时，机器人的所有副本会沿着相同的方向移动一格，向北、向南、向东或向西。每 $D$ 个小时（$1≤D≤10^9$）之后，机器人的每个副本会进行自我复制——在方格 $(x,y)$ 进行自我复制的机器人会在方格 $(x+1,y)$、$(x−1,y)$、$(x,y+1)$ 以及 $(x,y−1)$ 产生机器人的新的副本；原本的机器人仍然位于 $(x,y)$。一段时间过后，同一方格内可能会有多个机器人。\n\n如果移动或复制会使得任何一个机器人撞到岩石，那么所有的机器人均立刻停止行动。注意这意味着所有机器人最终必然会停下，由于农场的边界都是岩石。\n\n请帮助奶牛们求出可能在某个时刻含有机器人的空的方格数量。 ", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $D$。以下 $N$ 行每行包含 $N$ 个字符。每个字符均为 '.'、'S' 和 '#' 之一。'.' 和 'S' 均表示空的方格，且 'S' 表示一个可能的机器人起始位置。'#' 表示一块岩石。\n\n所有第一行、最后一行、第一列、最后一列的字符均为 '#'。 ", "outputFormat": " 输出一个整数，表示可能在某个时刻含有机器人的方格数量。 ", "hint": "### 样例 1 解释：\n在以下的图中，x 表示机器人。\n\n可能含有机器人的位置为：\n\n```\n##########\n#xxx.....#\n#xxxx....#\n#xxx.....#\n##########\n#xx..xxx.#\n##########\n##########\n##########\n##########\n```\n以下是一个可能的事件序列：\n\nFJ 将机器人放在了左上的起始位置。\n机器人向右移动一个单位。\n机器人进行自我复制。\n所有机器人向右移动一个单位。\n再一次自我复制会导致存在机器人撞到岩石，所以该过程终止。\n```\n##########    ##########    ##########    ##########\n#........#    #........#    #.x......#    #..x.....#\n#x.......#    #.x......#    #xxx.....#    #.xxx....#\n#........#    #........#    #.x......#    #..x.....#\n########## -> ########## -> ########## -> ##########\n#........#    #........#    #........#    #........#\n##########    ##########    ##########    ##########\n##########    ##########    ##########    ##########\n##########    ##########    ##########    ##########\n##########    ##########    ##########    ##########\n```\n### 样例 2 解释：\n\n可能含有机器人的位置为：\n```\n##########\n#x#.xxx..#\n#x#xxxxx.#\n#xxxxxxxx#\n#x#xxxxx.#\n#x#.xxx..#\n##########\n##########\n##########\n##########\n```\n### 样例 3 解释：\n可能含有机器人的位置为：\n```\n##########\n#xx#.....#\n#xx#.....#\n#xxx.....#\n#xx#.....#\n#x.#.....#\n##########\n##########\n##########\n##########\n```\n### 测试点性质：\n\n - 测试点 4-5 满足 $D=10^9$。\n - 测试点 6-8 满足 $D=1$。\n - 测试点 9-12 满足 $N≤100$。\n - 测试点 13-20 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Replication G", "background": "", "description": "在网上观看太多机械 DIY 视频的后果就是，Farmer John 偶然在他的农场上制造了一个可以自我复制的机器人！\n\n农场可以用一个 $N×N$ 的方阵表示（$3≤N≤1000$），其中每个方格是空的或有岩石，并且所有边界上的方格均有岩石。某些没有岩石的方格被指定为机器人可能的起始位置。\n\nFarmer John 初始将机器人放置在可能的起始位置之一。在之后的每一个小时，机器人的所有副本会沿着相同的方向移动一格，向北、向南、向东或向西。每 $D$ 个小时（$1≤D≤10^9$）之后，机器人的每个副本会进行自我复制——在方格 $(x,y)$ 进行自我复制的机器人会在方格 $(x+1,y)$、$(x−1,y)$、$(x,y+1)$ 以及 $(x,y−1)$ 产生机器人的新的副本；原本的机器人仍然位于 $(x,y)$。一段时间过后，同一方格内可能会有多个机器人。\n\n如果移动或复制会使得任何一个机器人撞到岩石，那么所有的机器人均立刻停止行动。注意这意味着所有机器人最终必然会停下，由于农场的边界都是岩石。\n\n请帮助奶牛们求出可能在某个时刻含有机器人的空的方格数量。 ", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $D$。以下 $N$ 行每行包含 $N$ 个字符。每个字符均为 '.'、'S' 和 '#' 之一。'.' 和 'S' 均表示空的方格，且 'S' 表示一个可能的机器人起始位置。'#' 表示一块岩石。\n\n所有第一行、最后一行、第一列、最后一列的字符均为 '#'。 ", "outputFormat": " 输出一个整数，表示可能在某个时刻含有机器人的方格数量。 ", "hint": "### 样例 1 解释：\n在以下的图中，x 表示机器人。\n\n可能含有机器人的位置为：\n\n```\n##########\n#xxx.....#\n#xxxx....#\n#xxx.....#\n##########\n#xx..xxx.#\n##########\n##########\n##########\n##########\n```\n以下是一个可能的事件序列：\n\nFJ 将机器人放在了左上的起始位置。\n机器人向右移动一个单位。\n机器人进行自我复制。\n所有机器人向右移动一个单位。\n再一次自我复制会导致存在机器人撞到岩石，所以该过程终止。\n```\n##########    ##########    ##########    ##########\n#........#    #........#    #.x......#    #..x.....#\n#x.......#    #.x......#    #xxx.....#    #.xxx....#\n#........#    #........#    #.x......#    #..x.....#\n########## -> ########## -> ########## -> ##########\n#........#    #........#    #........#    #........#\n##########    ##########    ##########    ##########\n##########    ##########    ##########    ##########\n##########    ##########    ##########    ##########\n##########    ##########    ##########    ##########\n```\n### 样例 2 解释：\n\n可能含有机器人的位置为：\n```\n##########\n#x#.xxx..#\n#x#xxxxx.#\n#xxxxxxxx#\n#x#xxxxx.#\n#x#.xxx..#\n##########\n##########\n##########\n##########\n```\n### 样例 3 解释：\n可能含有机器人的位置为：\n```\n##########\n#xx#.....#\n#xx#.....#\n#xxx.....#\n#xx#.....#\n#x.#.....#\n##########\n##########\n##########\n##########\n```\n### 测试点性质：\n\n - 测试点 4-5 满足 $D=10^9$。\n - 测试点 6-8 满足 $D=1$。\n - 测试点 9-12 满足 $N≤100$。\n - 测试点 13-20 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN"}}}
{"pid": "P7152", "type": "P", "difficulty": 6, "samples": [["?", "4"], ["GAT?GTT", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2020", "USACO", "O2优化"], "title": "[USACO20DEC] Bovine Genetics G", "background": "", "description": "Farmer John 在对他的奶牛进行基因组测序之后，他现在要进行基因组编辑了！我们知道，基因组可以用一个由 A、C、G、T 组成的字符串来表示。Farmer John 考虑的基因组的最大长度为 $10^5$。\n\nFarmer John 从一个基因组开始，通过下列步骤对其进行编辑：\n\n 1. 在所有连续相同字符之间的位置将当前基因组切开。\n 2. 反转所有得到的子串。\n 3. 按原先的顺序将反转的子串进行联结。\n\n例如，如果 FJ 从基因组 AGGCTTT 开始，他会执行下列步骤：\n\n 1. 在连续的 G 和 T 之间切开，得到 AG | GCT | T | T。\n 2. 反转每一子串，得到 GA | TCG | T | T。\n 3. 将这些子串联结起来，得到 GATCGTT。\n\n不幸的是，在对基因组进行编辑之后，Farmer John 的计算机崩溃了，他丢失了他开始时的基因组序列。此外，编辑后的基因组的部分位置遭到了破坏，这些位置用问号代替。\n\n给定编辑后的基因组序列，请帮助 FJ 求出可能的开始时的基因组序列的数量，对 $10^9+7$ 取模。 ", "inputFormat": "一个非空字符串，其中每个字符为 A、G、C、T 和 ? 之一。 ", "outputFormat": "输出可能的开始时的基因组序列的数量模 $10^9+7$ 的结果。", "hint": "### 样例 2 解释：\n\n除了在之前说明过的 AGGCTTT 之外，还有两种可能的开始时的基因组。\n\n`AGGATTT -> AG | GAT | T | T -> GA | TAG | T | T -> GATAGTT`\n\n`TAGGTTT -> TAG | GT | T | T -> GAT | TG | T | T -> GATTGTT`\n\n### 测试点性质：\n\n\n - 测试点 1-4 中，基因组的长度不超过 $10$。\n - 测试点 5-11 中，基因组的长度不超过 $10^2$。\n - 测试点 12-20 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Bovine Genetics G", "background": "", "description": "Farmer John 在对他的奶牛进行基因组测序之后，他现在要进行基因组编辑了！我们知道，基因组可以用一个由 A、C、G、T 组成的字符串来表示。Farmer John 考虑的基因组的最大长度为 $10^5$。\n\nFarmer John 从一个基因组开始，通过下列步骤对其进行编辑：\n\n 1. 在所有连续相同字符之间的位置将当前基因组切开。\n 2. 反转所有得到的子串。\n 3. 按原先的顺序将反转的子串进行联结。\n\n例如，如果 FJ 从基因组 AGGCTTT 开始，他会执行下列步骤：\n\n 1. 在连续的 G 和 T 之间切开，得到 AG | GCT | T | T。\n 2. 反转每一子串，得到 GA | TCG | T | T。\n 3. 将这些子串联结起来，得到 GATCGTT。\n\n不幸的是，在对基因组进行编辑之后，Farmer John 的计算机崩溃了，他丢失了他开始时的基因组序列。此外，编辑后的基因组的部分位置遭到了破坏，这些位置用问号代替。\n\n给定编辑后的基因组序列，请帮助 FJ 求出可能的开始时的基因组序列的数量，对 $10^9+7$ 取模。 ", "inputFormat": "一个非空字符串，其中每个字符为 A、G、C、T 和 ? 之一。 ", "outputFormat": "输出可能的开始时的基因组序列的数量模 $10^9+7$ 的结果。", "hint": "### 样例 2 解释：\n\n除了在之前说明过的 AGGCTTT 之外，还有两种可能的开始时的基因组。\n\n`AGGATTT -> AG | GAT | T | T -> GA | TAG | T | T -> GATAGTT`\n\n`TAGGTTT -> TAG | GT | T | T -> GAT | TG | T | T -> GATTGTT`\n\n### 测试点性质：\n\n\n - 测试点 1-4 中，基因组的长度不超过 $10$。\n - 测试点 5-11 中，基因组的长度不超过 $10^2$。\n - 测试点 12-20 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN"}}}
{"pid": "P7153", "type": "P", "difficulty": 6, "samples": [["4\n0 2\n2 3\n3 1\n1 0\n", "14"], ["16\n17 4\n16 13\n0 15\n1 19\n7 11\n3 17\n6 16\n18 9\n15 6\n11 7\n10 8\n2 1\n12 0\n5 18\n14 5\n13 2", "420"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2020", "USACO", "O2优化", "排序", "双指针 two-pointer"], "title": "[USACO20DEC] Square Pasture G", "background": "", "description": "Farmer John 最大的牧草地可以被看作是一个由方格组成的巨大的二维方阵（想象一个巨大的棋盘）。现在，有 $N$ 头奶牛正占据某些方格（$1≤N≤200$）。\n\nFarmer John 想要建造一个可以包围一块正方形区域的栅栏；这个正方形必须四边与 $x$ 轴和 $y$ 轴平行，最少包含一个方格。请帮助他求出他可以包围在这样的区域内的不同的奶牛子集的数量。注意空集应当被计算为答案之一。 ", "inputFormat": "输入的第一行包含一个整数 $N$。以下 $N$ 行每行包含两个空格分隔的整数，表示一头奶牛所在方格的坐标 $(x,y)$。所有 $x$ 坐标各不相同，所有 $y$ 坐标各不相同。所有 $x$ 与 $y$ 的值均在 $0…10^9$ 范围内。\n\n注意尽管所有奶牛所在的方格坐标均非负，但围成的正方形区域可以包含坐标为负的方格。", "outputFormat": "输出 FJ 可以包围的奶牛的子集数量。可以证明这个数量可以用 32 位有符号整数型存储。 ", "hint": " - 测试点 1-5 中，所有奶牛所在的方格的坐标均小于 20 。\n - 测试点 6-10 中，$N≤20$。\n - 测试点 11-20 没有额外限制。\n\n供题：Benjamin Qi \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Square Pasture G", "background": "", "description": "Farmer John 最大的牧草地可以被看作是一个由方格组成的巨大的二维方阵（想象一个巨大的棋盘）。现在，有 $N$ 头奶牛正占据某些方格（$1≤N≤200$）。\n\nFarmer John 想要建造一个可以包围一块正方形区域的栅栏；这个正方形必须四边与 $x$ 轴和 $y$ 轴平行，最少包含一个方格。请帮助他求出他可以包围在这样的区域内的不同的奶牛子集的数量。注意空集应当被计算为答案之一。 ", "inputFormat": "输入的第一行包含一个整数 $N$。以下 $N$ 行每行包含两个空格分隔的整数，表示一头奶牛所在方格的坐标 $(x,y)$。所有 $x$ 坐标各不相同，所有 $y$ 坐标各不相同。所有 $x$ 与 $y$ 的值均在 $0…10^9$ 范围内。\n\n注意尽管所有奶牛所在的方格坐标均非负，但围成的正方形区域可以包含坐标为负的方格。", "outputFormat": "输出 FJ 可以包围的奶牛的子集数量。可以证明这个数量可以用 32 位有符号整数型存储。 ", "hint": " - 测试点 1-5 中，所有奶牛所在的方格的坐标均小于 20 。\n - 测试点 6-10 中，$N≤20$。\n - 测试点 11-20 没有额外限制。\n\n供题：Benjamin Qi \n", "locale": "zh-CN"}}}
{"pid": "P7154", "type": "P", "difficulty": 6, "samples": [["4\n1 2 3 4\n1 2 2 3", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2020", "USACO", "O2优化", "组合数学"], "title": "[USACO20DEC] Sleeping Cows P", "background": "", "description": "\nFarmer John 有 $N$（$1≤N≤3000$）头各种大小的奶牛。他原本为每头奶牛量身定制了牛棚，但现在某些奶牛长大了，使得原先的牛棚大小不够用。具体地说，FJ 原来建造了 $N$ 个牛棚的大小为 $t_1,t_2,…,t_N$，现在奶牛的大小为 $s_1,s_2,…,s_N$（$1≤s_i,t_i≤10^9$）。\n\n每天晚上，奶牛们都会按照某种方式寻找睡觉的牛棚。奶牛 $i$ 可以睡在牛棚 $j$ 中当且仅当她的大小可以进入牛棚（$s_i≤t_j$）。每个牛棚中至多可以睡一头奶牛。\n\n我们称奶牛与牛棚的一个匹配是极大的，当且仅当每头奶牛可以进入分配给她的牛棚，且对于每头未被分配牛棚的奶牛无法进入任何未分配的空牛棚。\n\n计算极大的匹配的数量模 $10^9+7$ 的结果。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个空格分隔的整数 $s_1,s_2,…,s_N$。\n\n第三行包含 $N$ 个空格分隔的整数 $t_1,t_2,…,t_N$。 ", "outputFormat": "输出极大的匹配的数量模 $10^9+7$ 的结果。 ", "hint": "以下是全部九种极大的匹配。有序对 $(i,j)$ 表示奶牛 $i$ 被分配到了牛棚 $j$。\n\n```\n(1, 1), (2, 2), (3, 4)\n(1, 1), (2, 3), (3, 4)\n(1, 1), (2, 4)\n(1, 2), (2, 3), (3, 4)\n(1, 2), (2, 4)\n(1, 3), (2, 2), (3, 4)\n(1, 3), (2, 4)\n(1, 4), (2, 2)\n(1, 4), (2, 3)\n```\n\n - 测试点 2-3 中，$N≤8$。\n - 测试点 4-12 中，$N≤50$。\n - 测试点 13-20 没有额外限制。\n\n供题：Nick Wu ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Sleeping Cows P", "background": "", "description": "\nFarmer John 有 $N$（$1≤N≤3000$）头各种大小的奶牛。他原本为每头奶牛量身定制了牛棚，但现在某些奶牛长大了，使得原先的牛棚大小不够用。具体地说，FJ 原来建造了 $N$ 个牛棚的大小为 $t_1,t_2,…,t_N$，现在奶牛的大小为 $s_1,s_2,…,s_N$（$1≤s_i,t_i≤10^9$）。\n\n每天晚上，奶牛们都会按照某种方式寻找睡觉的牛棚。奶牛 $i$ 可以睡在牛棚 $j$ 中当且仅当她的大小可以进入牛棚（$s_i≤t_j$）。每个牛棚中至多可以睡一头奶牛。\n\n我们称奶牛与牛棚的一个匹配是极大的，当且仅当每头奶牛可以进入分配给她的牛棚，且对于每头未被分配牛棚的奶牛无法进入任何未分配的空牛棚。\n\n计算极大的匹配的数量模 $10^9+7$ 的结果。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个空格分隔的整数 $s_1,s_2,…,s_N$。\n\n第三行包含 $N$ 个空格分隔的整数 $t_1,t_2,…,t_N$。 ", "outputFormat": "输出极大的匹配的数量模 $10^9+7$ 的结果。 ", "hint": "以下是全部九种极大的匹配。有序对 $(i,j)$ 表示奶牛 $i$ 被分配到了牛棚 $j$。\n\n```\n(1, 1), (2, 2), (3, 4)\n(1, 1), (2, 3), (3, 4)\n(1, 1), (2, 4)\n(1, 2), (2, 3), (3, 4)\n(1, 2), (2, 4)\n(1, 3), (2, 2), (3, 4)\n(1, 3), (2, 4)\n(1, 4), (2, 2)\n(1, 4), (2, 3)\n```\n\n - 测试点 2-3 中，$N≤8$。\n - 测试点 4-12 中，$N≤50$。\n - 测试点 13-20 没有额外限制。\n\n供题：Nick Wu ", "locale": "zh-CN"}}}
{"pid": "P7155", "type": "P", "difficulty": 7, "samples": [["6 3 8\n010000\n001000\n000100\n000010\n000000\n000001\n1 1 1 1\n3 3 1 1\n1 1 3 3\n1 1 1 5\n2 1 1 5\n1 1 2 5\n3 1 3 5\n2 6 2 6\n", "1\n0\n1\n3\n2\n2\n0\n5"], ["6 4 6\n001100\n001110\n101101\n010111\n110111\n000111\n3 2 4 3\n3 1 4 4\n3 4 4 1\n3 3 4 3\n3 6 4 3\n3 1 4 2", "26\n49\n29\n27\n18\n22"], ["6 10 5\n110101\n011001\n001111\n101111\n111010\n000001\n2 5 2 5\n6 1 5 2\n3 4 8 3\n9 3 3 5\n5 1 3 4", "713313311\n716721076\n782223918\n335511486\n539247783"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2020", "USACO", "O2优化", "组合数学"], "title": "[USACO20DEC] Spaceship P", "background": "", "description": "奶牛 Bessie 外星人绑架了，现在被关在了一艘外星人的飞船里！飞船有 $N$（$1≤N≤60$）间房间，编号为 $1…N$，其中某些房间之间由单向通过的门所连接（由于使用了奇怪的外星技术，一扇门甚至可能从一间房间通回这间房间本身！）。然而，没有两扇门具有完全相同的出发和到达房间。此外，Bessie 有一个遥控器，上有编号为 $1…K$ （$1≤K≤60$）的按钮。\n\n如果 Bessie 能够完成一个怪异的任务，外星人就会释放她。首先，他们会选择两间房间 $s$ 和 $t$（$1≤s,t≤N$），以及两个整数 $b_s$ 和 $b_t$（$1≤b_s,b_t≤K$）。他们会将 Bessie 放在房间 $s$ 内，并令她立刻按下按钮 $b_s$。然后 Bessie 需要继续在飞船内穿梭，同时按下按钮。有一些 Bessie 的行动需要遵守的规则：\n\n - 在每间房间内，在按下恰好一个按钮后，她必须选择从某扇门离开去往另一间房间（可能会回到同一间房间）或停止行动。\n - 一旦 Bessie 按下某个按钮，她再次按下这个按钮即为非法，除非在此之间她按下过编号更大的按钮。换句话说，按下编号为 x 的按钮会使得这个按钮变为非法，同时所有编号 $<x$ 的按钮会被重置为合法。\n - 如果 Bessie 按下非法的按钮，任务即失败，外星人就会把她关起来。 \n\n仅当 Bessie 停止行动时位于房间 $t$，她最后按下的按钮是 $b_t$，并且没有按下过非法按钮时，Bessie 才会被释放。\n\nBessie 担心她可能无法完成这一任务。对于 $Q$\n（$1≤Q≤60$）个询问，每个询问包含一组 Bessie 认为可能的 $s,t,b_s$ 以及 $b_t$，Bessie 想要知道可以使她得到释放的通过房间与按键序列的数量。由于答案可能非常大，输出对 $10^9+7$ 取模的结果。 ", "inputFormat": "输入的第一行包含 $N,K,Q$。\n\n以下 $N$ 行每行包含 $N$ 个二进制位（$0$ 或 $1$）。如果从房间 $i$ 到房间 $j$ 存在一扇门，则第 $i$ 行的第 $j$ 位为 1，如果没有这样的门则为 0。\n\n以下 $Q$ 行，每行包含四个整数 $b_s$、$s$、$b_t$、$t$，分别表示起始按钮、起始房间、结束按钮、结束房间。 ", "outputFormat": "对 $Q$ 个询问的每一个，在一行内输出操作序列的数量模 $10^9+7$ 的结果。 ", "hint": "门连接了房间 $1→2$、$2→3$、$3→4$、$4→5$ 以及 $6→6$。\n\n对于第一个询问，Bessie 必须在按下第一个按钮后立刻停止行动。\n\n对于第二个询问，答案显然为零，因为无法从房间 3 前往房间 1。\n\n对于第三个询问，Bessie 的唯一选择是从房间 1 移动到房间 2 到房间 3，同时按下按钮 1、2 和 3。\n\n对于第四个询问，Bessie 的移动方式是唯一的，她有三种可能的按键序列：\n\n - (1,2,3,2,1)\n - (1,2,1,3,1)\n - (1,3,1,2,1)\n\n对于最后一个询问，Bessie 有五种可能的按键序列：\n\n - (2)\n - (2,3,2)\n - (2,3,1,2)\n - (2,1,3,2)\n - (2,1,3,1,2)\n\n### 测试点性质：\n\n - 测试点 4-7 中，$K≤5$ 且 $(b_s,s)$ 在所有询问中均相同。\n - 测试点 8-11 中，对所有询问有 $b_s=K−1$ 以及 $b_t=K$。\n - 测试点 12-15 中，$N,K,Q≤20$。\n - 测试点 16-23 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Spaceship P", "background": "", "description": "奶牛 Bessie 外星人绑架了，现在被关在了一艘外星人的飞船里！飞船有 $N$（$1≤N≤60$）间房间，编号为 $1…N$，其中某些房间之间由单向通过的门所连接（由于使用了奇怪的外星技术，一扇门甚至可能从一间房间通回这间房间本身！）。然而，没有两扇门具有完全相同的出发和到达房间。此外，Bessie 有一个遥控器，上有编号为 $1…K$ （$1≤K≤60$）的按钮。\n\n如果 Bessie 能够完成一个怪异的任务，外星人就会释放她。首先，他们会选择两间房间 $s$ 和 $t$（$1≤s,t≤N$），以及两个整数 $b_s$ 和 $b_t$（$1≤b_s,b_t≤K$）。他们会将 Bessie 放在房间 $s$ 内，并令她立刻按下按钮 $b_s$。然后 Bessie 需要继续在飞船内穿梭，同时按下按钮。有一些 Bessie 的行动需要遵守的规则：\n\n - 在每间房间内，在按下恰好一个按钮后，她必须选择从某扇门离开去往另一间房间（可能会回到同一间房间）或停止行动。\n - 一旦 Bessie 按下某个按钮，她再次按下这个按钮即为非法，除非在此之间她按下过编号更大的按钮。换句话说，按下编号为 x 的按钮会使得这个按钮变为非法，同时所有编号 $<x$ 的按钮会被重置为合法。\n - 如果 Bessie 按下非法的按钮，任务即失败，外星人就会把她关起来。 \n\n仅当 Bessie 停止行动时位于房间 $t$，她最后按下的按钮是 $b_t$，并且没有按下过非法按钮时，Bessie 才会被释放。\n\nBessie 担心她可能无法完成这一任务。对于 $Q$\n（$1≤Q≤60$）个询问，每个询问包含一组 Bessie 认为可能的 $s,t,b_s$ 以及 $b_t$，Bessie 想要知道可以使她得到释放的通过房间与按键序列的数量。由于答案可能非常大，输出对 $10^9+7$ 取模的结果。 ", "inputFormat": "输入的第一行包含 $N,K,Q$。\n\n以下 $N$ 行每行包含 $N$ 个二进制位（$0$ 或 $1$）。如果从房间 $i$ 到房间 $j$ 存在一扇门，则第 $i$ 行的第 $j$ 位为 1，如果没有这样的门则为 0。\n\n以下 $Q$ 行，每行包含四个整数 $b_s$、$s$、$b_t$、$t$，分别表示起始按钮、起始房间、结束按钮、结束房间。 ", "outputFormat": "对 $Q$ 个询问的每一个，在一行内输出操作序列的数量模 $10^9+7$ 的结果。 ", "hint": "门连接了房间 $1→2$、$2→3$、$3→4$、$4→5$ 以及 $6→6$。\n\n对于第一个询问，Bessie 必须在按下第一个按钮后立刻停止行动。\n\n对于第二个询问，答案显然为零，因为无法从房间 3 前往房间 1。\n\n对于第三个询问，Bessie 的唯一选择是从房间 1 移动到房间 2 到房间 3，同时按下按钮 1、2 和 3。\n\n对于第四个询问，Bessie 的移动方式是唯一的，她有三种可能的按键序列：\n\n - (1,2,3,2,1)\n - (1,2,1,3,1)\n - (1,3,1,2,1)\n\n对于最后一个询问，Bessie 有五种可能的按键序列：\n\n - (2)\n - (2,3,2)\n - (2,3,1,2)\n - (2,1,3,2)\n - (2,1,3,1,2)\n\n### 测试点性质：\n\n - 测试点 4-7 中，$K≤5$ 且 $(b_s,s)$ 在所有询问中均相同。\n - 测试点 8-11 中，对所有询问有 $b_s=K−1$ 以及 $b_t=K$。\n - 测试点 12-15 中，$N,K,Q≤20$。\n - 测试点 16-23 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN"}}}
{"pid": "P7156", "type": "P", "difficulty": 7, "samples": [["1 13\n0 199", "4280"], ["6 147\n1 35\n48 103\n125 127\n154 190\n195 235\n240 250", "267188"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2020", "USACO", "O2优化", "数位 DP", "组合数学", "字典树 Trie"], "title": "[USACO20DEC] Cowmistry P", "background": "", "description": "Bessie 的化学作业已经拖了很久，现在需要你的帮助！她需要用三种不同的化学品制造一种混合物。所有聪明的奶牛都知道，某些化学品之间不能进行混合，否则会产生爆炸。具体地说，两种标号为 $a$ 和 $b$ 的化学品当 $a⊕b≤K$ （$1≤K≤10^9$） 时可以出现在同一种混合物中。\n\n注：这里，$a⊕b$ 表示非负整数 $a$ 与 $b$ 的「异或」。这一运算等价于在二进制下将每一对应位相加并且舍弃进位。例如， \n$$0⊕0=1⊕1=0$$\n，\n$$1⊕0=0⊕1=1$$\n，\n$$5⊕7=101_2⊕111_2=010_2=2$$\n。\n\nBessie 有 $N$ 盒化学品，第 $i$ 个盒子内有标号从 $l_i$ 到 $r_i$ 的化学品（$0≤l_i≤r_i≤10^9$）。没有两个盒子中含有同一种化学品。她想要知道她可以得到多少种由三种不同的化学品混合而成的混合物。如果至少一种化学品出现在一种混合物中而没有出现在另一种中，则认为这两种混合物是不同的。由于答案可能非常大，输出对 $10^9+7$ 取模的结果。 ", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $K$。\n\n以下 $N$ 行，每行包含两个空格分隔的整数 $l_i$ 和 $r_i$。保证所有化学品盒子按其中内容的升序给出；也就是说，对所有 $1≤i<N$ 有 $r_i<l_{i+1}$。 ", "outputFormat": "输出 Bessie 可以由三种不同化学品制造的混合物的数量，对 $10^9+7$ 取模。 ", "hint": "我们可以将所有化学品分为不能交叉混合的 $13$ 组：$(0 \\ldots 15)$，$(16 \\ldots 31)$，… $(192 \\ldots 199)$。前 $12$ 组每组贡献了 $352$ 种混合物，最后一组贡献了 $56$ 种（因为所有 $\\binom{8}{3}$ 种 $(192 \\ldots 199)$ 中三种不同化学品的组合均可行），总共为 $352 \\cdot 12 + 56 = 4280$。 \n\n - 测试点 3-4 满足 $\\max(K, r_N) \\le {10}^4$。\n - 测试点 5-6 对某个 $k \\ge 1$ 满足 $K = 2^k - 1$。\n - 测试点 7-11 满足 $\\max(K, r_N) \\le {10}^6$。\n - 测试点 12-16 满足 $N \\le 20$。\n - 测试点 17-21 没有额外限制。\n\n对于所有测试点，满足 $1 \\le N \\le 2 \\times {10}^4$。\n\n供题：Benjamin Qi ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Cowmistry P", "background": "", "description": "Bessie 的化学作业已经拖了很久，现在需要你的帮助！她需要用三种不同的化学品制造一种混合物。所有聪明的奶牛都知道，某些化学品之间不能进行混合，否则会产生爆炸。具体地说，两种标号为 $a$ 和 $b$ 的化学品当 $a⊕b≤K$ （$1≤K≤10^9$） 时可以出现在同一种混合物中。\n\n注：这里，$a⊕b$ 表示非负整数 $a$ 与 $b$ 的「异或」。这一运算等价于在二进制下将每一对应位相加并且舍弃进位。例如， \n$$0⊕0=1⊕1=0$$\n，\n$$1⊕0=0⊕1=1$$\n，\n$$5⊕7=101_2⊕111_2=010_2=2$$\n。\n\nBessie 有 $N$ 盒化学品，第 $i$ 个盒子内有标号从 $l_i$ 到 $r_i$ 的化学品（$0≤l_i≤r_i≤10^9$）。没有两个盒子中含有同一种化学品。她想要知道她可以得到多少种由三种不同的化学品混合而成的混合物。如果至少一种化学品出现在一种混合物中而没有出现在另一种中，则认为这两种混合物是不同的。由于答案可能非常大，输出对 $10^9+7$ 取模的结果。 ", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $K$。\n\n以下 $N$ 行，每行包含两个空格分隔的整数 $l_i$ 和 $r_i$。保证所有化学品盒子按其中内容的升序给出；也就是说，对所有 $1≤i<N$ 有 $r_i<l_{i+1}$。 ", "outputFormat": "输出 Bessie 可以由三种不同化学品制造的混合物的数量，对 $10^9+7$ 取模。 ", "hint": "我们可以将所有化学品分为不能交叉混合的 $13$ 组：$(0 \\ldots 15)$，$(16 \\ldots 31)$，… $(192 \\ldots 199)$。前 $12$ 组每组贡献了 $352$ 种混合物，最后一组贡献了 $56$ 种（因为所有 $\\binom{8}{3}$ 种 $(192 \\ldots 199)$ 中三种不同化学品的组合均可行），总共为 $352 \\cdot 12 + 56 = 4280$。 \n\n - 测试点 3-4 满足 $\\max(K, r_N) \\le {10}^4$。\n - 测试点 5-6 对某个 $k \\ge 1$ 满足 $K = 2^k - 1$。\n - 测试点 7-11 满足 $\\max(K, r_N) \\le {10}^6$。\n - 测试点 12-16 满足 $N \\le 20$。\n - 测试点 17-21 没有额外限制。\n\n对于所有测试点，满足 $1 \\le N \\le 2 \\times {10}^4$。\n\n供题：Benjamin Qi ", "locale": "zh-CN"}}}
{"pid": "P7157", "type": "P", "difficulty": 2, "samples": [["3 2\n1 2\n2 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["组合数学"], "title": "「dWoi R1」Physics Problem", "background": "面对白板上的物理题，王马陷入了沉思 ……", "description": "有 $n$ 个状态，编号为 $1$ 到 $n$。这 $n$ 个状态之间有 $k$ 种转换关系，第 $i$ 个转换关系描述为：第 $u_i$ 个状态和第 $v_i$ 个状态可以进行转换。当两个状态之间没有直接的转换关系但有间接的转换关系时，那么这两个状态之间有升降华关系。\n\n求有多少个升降华关系。\n\n**王马不会做很难的物理题，所以保证一个状态一定可以通过直接或间接的转换为另一个任意状态。**", "inputFormat": "第一行两个整数 $n,k$ 代表状态数和转换关系数。       \n接下来 $k$ 行每行两个整数 $u_i,v_i$ 代表这两个状态之间有转换关系。", "outputFormat": "一行一个整数代表有多少个升降华关系。", "hint": "#### 样例 1 解释\n\n一共有 $3$ 个状态，编号为 $1,2,3$，第 $1$ 个状态和第 $2$ 个状态之间有转换关系，第 $2$ 个状态和第 $3$ 个状态之间有转换关系，第 $1$ 个状态和第 $3$ 个状态之间没有直接的转换关系，但可以用第 $2$ 个状态做桥梁进行转换，所以第 $1$ 个状态和第 $3$ 个状态之间有升降华关系。只有这一个升降华关系，输出 $1$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n \\le 2$。\n- Subtask 2（10 pts）：$k=n-1$，$u_i+1=v_i$。\n- Subtask 3（10 pts）：$k=n-1$，$u_i=1$。\n- Subtask 4（25 pts）：$n,k \\le 1000$。\n- Subtask 5（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 10^7$，$1 \\le u_i,v_i \\le n$。\n\n保证 $u_i \\ne v_i$ 且不存在 $i \\ne j ∧(u_i =u_j∧v_i=v_j)$ 和 $i \\ne j∧(u_i=v_j∧u_j=v_i)$。\n\n这句话也可以理解为无重边无自环。\n\n#### 提示\n\n注意，对于下面这种情况（`a - b` 代表 $a$ 能与 $b$ 互相转换）：\n\n```cpp\n1 - 2\n2 - 3\n1 - 3\n```\n\n第 $1$ 个状态和第 $3$ 个状态算有直接转换关系，即转换关系取“最短路”。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「dWoi R1」Physics Problem", "background": "面对白板上的物理题，王马陷入了沉思 ……", "description": "有 $n$ 个状态，编号为 $1$ 到 $n$。这 $n$ 个状态之间有 $k$ 种转换关系，第 $i$ 个转换关系描述为：第 $u_i$ 个状态和第 $v_i$ 个状态可以进行转换。当两个状态之间没有直接的转换关系但有间接的转换关系时，那么这两个状态之间有升降华关系。\n\n求有多少个升降华关系。\n\n**王马不会做很难的物理题，所以保证一个状态一定可以通过直接或间接的转换为另一个任意状态。**", "inputFormat": "第一行两个整数 $n,k$ 代表状态数和转换关系数。       \n接下来 $k$ 行每行两个整数 $u_i,v_i$ 代表这两个状态之间有转换关系。", "outputFormat": "一行一个整数代表有多少个升降华关系。", "hint": "#### 样例 1 解释\n\n一共有 $3$ 个状态，编号为 $1,2,3$，第 $1$ 个状态和第 $2$ 个状态之间有转换关系，第 $2$ 个状态和第 $3$ 个状态之间有转换关系，第 $1$ 个状态和第 $3$ 个状态之间没有直接的转换关系，但可以用第 $2$ 个状态做桥梁进行转换，所以第 $1$ 个状态和第 $3$ 个状态之间有升降华关系。只有这一个升降华关系，输出 $1$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n \\le 2$。\n- Subtask 2（10 pts）：$k=n-1$，$u_i+1=v_i$。\n- Subtask 3（10 pts）：$k=n-1$，$u_i=1$。\n- Subtask 4（25 pts）：$n,k \\le 1000$。\n- Subtask 5（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 10^7$，$1 \\le u_i,v_i \\le n$。\n\n保证 $u_i \\ne v_i$ 且不存在 $i \\ne j ∧(u_i =u_j∧v_i=v_j)$ 和 $i \\ne j∧(u_i=v_j∧u_j=v_i)$。\n\n这句话也可以理解为无重边无自环。\n\n#### 提示\n\n注意，对于下面这种情况（`a - b` 代表 $a$ 能与 $b$ 互相转换）：\n\n```cpp\n1 - 2\n2 - 3\n1 - 3\n```\n\n第 $1$ 个状态和第 $3$ 个状态算有直接转换关系，即转换关系取“最短路”。", "locale": "zh-CN"}}}
{"pid": "P7158", "type": "P", "difficulty": 2, "samples": [["2\n2 3\n11 4", "73\n842367440"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数学"], "title": "「dWoi R1」Password of Shady", "background": "天海兰太郎被杀后，最原看到图书架后面刷卡器里的尘土并没有消散，陷入了沉思 ……\n\n最原在想，黑幕是如何做到刷卡器的尘土没有消散但是还成功进入了黑幕的房间呢？然后他再次确认了刷卡器，发现了一个密码盘，密码盘下写着一行文字「真正的秘密总是被谎言欺骗，但黑幕不至于欺骗自己」，然后还有一道题，于是最原要用 1min 的时间解出这道题。", "description": "这道题要求最原构造一个 $n$ 位数，并且满足以下两个要求：\n\n- 「强者从不说废话」，代表着这个数没有前导零，$0$ 没有前导零且是一位数。\n- 「强者善于成 $k$ 对合作」，代表着这个数的所有数位中有偶数个 $k$，$0$ 是偶数。\n\n最原很快就让入间制作了一个造数器，但是造数器还需要输入有多少个满足要求的数，于是他就求助于了你，因为做造数器已经用了 59.5s，所以他想让你 0.5s 求出有多少个符合要求的数。\n\n答案对 $998\\ 244\\ 353$ 取模。", "inputFormat": "**本题多测**，测试组数为 $t$。     \n对于每组数据，一行两个整数 $n,k$。", "outputFormat": "对于每组数据，一行一个整数代表答案。", "hint": "#### 样例 1 解释\n\n第一组数据，满足要求的数为：\n\n- $0$ 个 $3$，$10\\sim 12$，$14 \\sim 22$，$24 \\sim 29$，$40 \\sim 42$，$44 \\sim 52$，$54 \\sim 62$，$64 \\sim 72$，$74 \\sim 82$，$84 \\sim 92$，$94\\sim 99$。\n- $2$ 个 $3$，$33$。\n\n第二组数据的样例解释写了 114514 行，但赛前 0.1s 不小心被黑白熊偷走了，书虫来不及补了。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n=1$。\n- Subtask 2（25 pts）：$n \\le 6$。\n- Subtask 3（25 pts）：$t \\le 100$。\n- Subtask 4（45 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le k \\le 9$，$1 \\le t \\le 10^6$。\n\n---\n\n后续：你用 0.5s 求出了答案，并且答案正确，但是最原将构造出的数输入密码盘发现错误了，所以这件事是一个谎言，最原还要去搜集言弹打学级裁判（", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「dWoi R1」Password of Shady", "background": "天海兰太郎被杀后，最原看到图书架后面刷卡器里的尘土并没有消散，陷入了沉思 ……\n\n最原在想，黑幕是如何做到刷卡器的尘土没有消散但是还成功进入了黑幕的房间呢？然后他再次确认了刷卡器，发现了一个密码盘，密码盘下写着一行文字「真正的秘密总是被谎言欺骗，但黑幕不至于欺骗自己」，然后还有一道题，于是最原要用 1min 的时间解出这道题。", "description": "这道题要求最原构造一个 $n$ 位数，并且满足以下两个要求：\n\n- 「强者从不说废话」，代表着这个数没有前导零，$0$ 没有前导零且是一位数。\n- 「强者善于成 $k$ 对合作」，代表着这个数的所有数位中有偶数个 $k$，$0$ 是偶数。\n\n最原很快就让入间制作了一个造数器，但是造数器还需要输入有多少个满足要求的数，于是他就求助于了你，因为做造数器已经用了 59.5s，所以他想让你 0.5s 求出有多少个符合要求的数。\n\n答案对 $998\\ 244\\ 353$ 取模。", "inputFormat": "**本题多测**，测试组数为 $t$。     \n对于每组数据，一行两个整数 $n,k$。", "outputFormat": "对于每组数据，一行一个整数代表答案。", "hint": "#### 样例 1 解释\n\n第一组数据，满足要求的数为：\n\n- $0$ 个 $3$，$10\\sim 12$，$14 \\sim 22$，$24 \\sim 29$，$40 \\sim 42$，$44 \\sim 52$，$54 \\sim 62$，$64 \\sim 72$，$74 \\sim 82$，$84 \\sim 92$，$94\\sim 99$。\n- $2$ 个 $3$，$33$。\n\n第二组数据的样例解释写了 114514 行，但赛前 0.1s 不小心被黑白熊偷走了，书虫来不及补了。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n=1$。\n- Subtask 2（25 pts）：$n \\le 6$。\n- Subtask 3（25 pts）：$t \\le 100$。\n- Subtask 4（45 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le k \\le 9$，$1 \\le t \\le 10^6$。\n\n---\n\n后续：你用 0.5s 求出了答案，并且答案正确，但是最原将构造出的数输入密码盘发现错误了，所以这件事是一个谎言，最原还要去搜集言弹打学级裁判（", "locale": "zh-CN"}}}
{"pid": "P7159", "type": "P", "difficulty": 3, "samples": [["3\n1 1 2\n1 2\n2 3", "36"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "「dWoi R1」Sweet Fruit Chocolate", "background": "[事情来源 ……](https://www.bilibili.com/video/BV19Z4y1K7dH)\n\n我们的东条妈妈在残害了梦野之后，还想继续她的事业，残害可怜的最原。她发现最原很喜欢吃甜甜的巧克力，另外还有一种东西叫做西西弗水果，他富含营养但没那么好吃，因此，她想把这些巧克力淋在西西弗水果上。", "description": "东条把想淋的巧克力做成了一个巧克力喷泉树。巧克力喷泉树是一棵 $n$ 个节点的树。每个节点都有一个西西弗水果。对于每一个节点 $u$，你有两种选择：你可以在节点 $u$ 放置 $a_u$ 个水果，也可以一个水果都不放。然后，东条会在根节点往下淋巧克力汁。节点 $u$ 给最原带来的营养值是 $u$ 及其子树中所放置的西西弗水果的数量。东条想要知道，对于所有 $2^n$ 个放水果方案，最原所获得的营养值之和的总和是多少。答案对 $998244353$ 取余。\n\n树的根节点为 $1$。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_i$。\n\n后面 $n-1$ 行每行两个正整数 $u,v$ $(1\\le u,v\\le n)$，代表有树中一条边 $(u,v)$。", "outputFormat": "一行，一个整数代表答案。", "hint": "#### 样例 1 解释\n\n用 $S$ 表示选中状态\n\n- $S=000$ 贡献 $0$\n- $S=001$ 贡献 $1$\n- $S=010$ 贡献 $2$\n- $S=011$ 贡献 $3$\n- $S=100$ 贡献 $6$\n- $S=101$ 贡献 $7$\n- $S=110$ 贡献 $8$\n- $S=111$ 贡献 $9$\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，满足 $n\\le 20$。\n\n对于另外 $30\\%$ 的数据，满足 $u=v-1$。\n\n对于 $100\\%$ 的数据，满足 $2\\le n\\le 10^6$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「dWoi R1」Sweet Fruit Chocolate", "background": "[事情来源 ……](https://www.bilibili.com/video/BV19Z4y1K7dH)\n\n我们的东条妈妈在残害了梦野之后，还想继续她的事业，残害可怜的最原。她发现最原很喜欢吃甜甜的巧克力，另外还有一种东西叫做西西弗水果，他富含营养但没那么好吃，因此，她想把这些巧克力淋在西西弗水果上。", "description": "东条把想淋的巧克力做成了一个巧克力喷泉树。巧克力喷泉树是一棵 $n$ 个节点的树。每个节点都有一个西西弗水果。对于每一个节点 $u$，你有两种选择：你可以在节点 $u$ 放置 $a_u$ 个水果，也可以一个水果都不放。然后，东条会在根节点往下淋巧克力汁。节点 $u$ 给最原带来的营养值是 $u$ 及其子树中所放置的西西弗水果的数量。东条想要知道，对于所有 $2^n$ 个放水果方案，最原所获得的营养值之和的总和是多少。答案对 $998244353$ 取余。\n\n树的根节点为 $1$。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_i$。\n\n后面 $n-1$ 行每行两个正整数 $u,v$ $(1\\le u,v\\le n)$，代表有树中一条边 $(u,v)$。", "outputFormat": "一行，一个整数代表答案。", "hint": "#### 样例 1 解释\n\n用 $S$ 表示选中状态\n\n- $S=000$ 贡献 $0$\n- $S=001$ 贡献 $1$\n- $S=010$ 贡献 $2$\n- $S=011$ 贡献 $3$\n- $S=100$ 贡献 $6$\n- $S=101$ 贡献 $7$\n- $S=110$ 贡献 $8$\n- $S=111$ 贡献 $9$\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，满足 $n\\le 20$。\n\n对于另外 $30\\%$ 的数据，满足 $u=v-1$。\n\n对于 $100\\%$ 的数据，满足 $2\\le n\\le 10^6$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7160", "type": "P", "difficulty": 3, "samples": [["4 4\n3 -4 2 -2\n-5 3 -4 2\n-1 3 -4 0\n3 -3 3 4", "8"], ["1 2\n11 45", "-1"], ["7 7\n10 10 10 -100 11   11 11\n10 10 10 -100 11 -100 11\n10 10 10 -100 11 -100 11\n10 10 10 -100 11 -100 11\n10 10 10 -100 11 -100 11\n10 10 10 -100 11 -100 11\n10 10 10 -100 11   11 11", "176"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP"], "title": "「dWoi R1」Sixth Monokuma's Son", "background": "题目首先定义矩阵环为，给定一个矩阵 $A$，初始全为白色，在其中选定一个子矩阵 $A_1$ 标黑，再在 $A_1$ 内选定一个子矩阵 $A_2$ 标白，就会形成一个矩阵环。注意，矩阵环至少上下左右都有被选定的部分，且整个矩阵环不是一个长方形的矩阵。\n\n假设 `+` 为黑，`-` 为白，下面这个就是矩阵环：\n\n```\n---+++++--\n---++--+--\n---+++++--\n---+++++--\n----------\n```\n\n下面就不是矩阵环：\n\n```\n------- ------\n---+++- --+++-\n---+-+- --+++-\n------- --+++-\n```\n\n因此，矩阵环会出现上，下，左，右四条边，每个方向有多少个涂黑的部分，就是那个方向的厚度。比如对于第一张符合要求的图，上方，右方的厚度为 $1$，左方，下方的厚度为 $2$。\n\n**注意，一个完整的矩阵不是一个矩阵环。**\n\n---\n\n接下来是正经的题目背景：\n\n最原得到了“狱原发现一些小昆虫”这个线索后，立刻采取了行动。首先，他利用入间的 ~~遗物~~，那个类似喷火器的东西，吸进了一些空气，然后，他打算利用机望的机械眼进行查看。", "description": "机望的机械眼能扫到一片 $n \\times m$ 的区域，第 $i$ 行第 $j$ 列发现了 $a_{i,j}$ 的不对劲值。\n\n因为机望被外部力量折磨的厉害，所以机望只能锁定一个矩阵环进行查看。机望想求助于你，他想让你锁定一个矩阵环，使得这个矩阵环中的所有位置的不对劲值的和最大，**上方，下方的厚度为 $1$ 且上方的那一行在整个区域的第一行，下方的那一行在整个区域的最后一行**。至于左右的厚度，机望不限制更多要求。", "inputFormat": "第一行两个整数 $n,m$ 代表整片区域的大小。          \n接下来 $n$ 行每行 $m$ 个整数 $a_{i,j}$ 代表每一个位置的不对劲值。", "outputFormat": "一行一个整数代表答案。           \n如果不能选出一个符合要求的矩阵环，输出 $-1$。", "hint": "#### 样例说明\n\n关于样例 1 的解释：\n\n可以选择如下形式的矩阵环（但其实两个解是一样的，因为第一列所有数之和为 $0$）：\n\n```\n++++  -+++\n++-+  -+-+\n++-+  -+-+\n++++  -+++\n```\n\n其中 + 为选定的，- 为未选定的。\n\n关于样例 3，提供者 @[cmll02](https://www.luogu.com.cn/user/171487)，感谢他的贡献。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n \\le 2$ 或 $m \\le 2$。\n- Subtask 2（5 pts）：$a_{i,j}>0$。\n- Subtask 3（40 pts）：$m \\le 1000$。\n- Subtask 4（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10$，$1 \\le m \\le 10^5$，$|a_{i,j}| \\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「dWoi R1」Sixth Monokuma's Son", "background": "题目首先定义矩阵环为，给定一个矩阵 $A$，初始全为白色，在其中选定一个子矩阵 $A_1$ 标黑，再在 $A_1$ 内选定一个子矩阵 $A_2$ 标白，就会形成一个矩阵环。注意，矩阵环至少上下左右都有被选定的部分，且整个矩阵环不是一个长方形的矩阵。\n\n假设 `+` 为黑，`-` 为白，下面这个就是矩阵环：\n\n```\n---+++++--\n---++--+--\n---+++++--\n---+++++--\n----------\n```\n\n下面就不是矩阵环：\n\n```\n------- ------\n---+++- --+++-\n---+-+- --+++-\n------- --+++-\n```\n\n因此，矩阵环会出现上，下，左，右四条边，每个方向有多少个涂黑的部分，就是那个方向的厚度。比如对于第一张符合要求的图，上方，右方的厚度为 $1$，左方，下方的厚度为 $2$。\n\n**注意，一个完整的矩阵不是一个矩阵环。**\n\n---\n\n接下来是正经的题目背景：\n\n最原得到了“狱原发现一些小昆虫”这个线索后，立刻采取了行动。首先，他利用入间的 ~~遗物~~，那个类似喷火器的东西，吸进了一些空气，然后，他打算利用机望的机械眼进行查看。", "description": "机望的机械眼能扫到一片 $n \\times m$ 的区域，第 $i$ 行第 $j$ 列发现了 $a_{i,j}$ 的不对劲值。\n\n因为机望被外部力量折磨的厉害，所以机望只能锁定一个矩阵环进行查看。机望想求助于你，他想让你锁定一个矩阵环，使得这个矩阵环中的所有位置的不对劲值的和最大，**上方，下方的厚度为 $1$ 且上方的那一行在整个区域的第一行，下方的那一行在整个区域的最后一行**。至于左右的厚度，机望不限制更多要求。", "inputFormat": "第一行两个整数 $n,m$ 代表整片区域的大小。          \n接下来 $n$ 行每行 $m$ 个整数 $a_{i,j}$ 代表每一个位置的不对劲值。", "outputFormat": "一行一个整数代表答案。           \n如果不能选出一个符合要求的矩阵环，输出 $-1$。", "hint": "#### 样例说明\n\n关于样例 1 的解释：\n\n可以选择如下形式的矩阵环（但其实两个解是一样的，因为第一列所有数之和为 $0$）：\n\n```\n++++  -+++\n++-+  -+-+\n++-+  -+-+\n++++  -+++\n```\n\n其中 + 为选定的，- 为未选定的。\n\n关于样例 3，提供者 @[cmll02](https://www.luogu.com.cn/user/171487)，感谢他的贡献。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n \\le 2$ 或 $m \\le 2$。\n- Subtask 2（5 pts）：$a_{i,j}>0$。\n- Subtask 3（40 pts）：$m \\le 1000$。\n- Subtask 4（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10$，$1 \\le m \\le 10^5$，$|a_{i,j}| \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P7161", "type": "P", "difficulty": 5, "samples": [["1\n1 4", "99 23"], ["2\n3 2\n5 5", "9 39\n5 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "Special Judge", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #2] Euklid", "background": "", "description": "对于正整数 $a, b$，定义 $R(a, b)$ 为：  \n\n $\\begin{cases}R(b,a)&a<b\\\\R\\left(\\left\\lfloor\\dfrac{a}{b}\\right\\rfloor,b\\right)&1<b\\leq a\\\\a&1=b\\leq a\\end{cases}$\n \n给定正整数 $g, h$，求正整数 $a, b$ 使得 $\\gcd(a,b)=g$，$R(a,b)=h$。", "inputFormat": "第一行一个整数 $t\\ (1\\leq t\\leq40)$，代表数据组数。  \n接下来 $t$ 行每行两个正整数 $g_i, h_i$。", "outputFormat": "输出 $T$ 行，每行两个满足题意的正整数 $a_i, b_i$。  \n要求 $a, b$ 均不超过 $10^{18}$。  \n可以证明一定有满足题意的 $a, b$，若有多组解输出任意一组即可。", "hint": "**【样例解释 #1】**\n\n$\\gcd(99,23)=1$，$R(99,23)=4$\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\leq g \\leq 200,000$，$2 \\leq h \\leq 200,000$。\n\nSubtask #1（$4$ pts）：$g=h$。  \nSubtask #2（$7$ pts）：$h=2$。  \nSubtask #3（$7$ pts）：$g=h^2$。  \nSubtask #4（$14$ pts）：$g,h \\leq 20$。  \nSubtask #5（$36$ pts）：$g,h \\leq 2000$。  \nSubtask #6（$32$ pts）：无附加约束。\n\n**【说明】**\n\n译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 2 C Euklid](https://hsin.hr/coci/archive/2020_2021/contest2_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #2] Euklid", "background": "", "description": "对于正整数 $a, b$，定义 $R(a, b)$ 为：  \n\n $\\begin{cases}R(b,a)&a<b\\\\R\\left(\\left\\lfloor\\dfrac{a}{b}\\right\\rfloor,b\\right)&1<b\\leq a\\\\a&1=b\\leq a\\end{cases}$\n \n给定正整数 $g, h$，求正整数 $a, b$ 使得 $\\gcd(a,b)=g$，$R(a,b)=h$。", "inputFormat": "第一行一个整数 $t\\ (1\\leq t\\leq40)$，代表数据组数。  \n接下来 $t$ 行每行两个正整数 $g_i, h_i$。", "outputFormat": "输出 $T$ 行，每行两个满足题意的正整数 $a_i, b_i$。  \n要求 $a, b$ 均不超过 $10^{18}$。  \n可以证明一定有满足题意的 $a, b$，若有多组解输出任意一组即可。", "hint": "**【样例解释 #1】**\n\n$\\gcd(99,23)=1$，$R(99,23)=4$\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\leq g \\leq 200,000$，$2 \\leq h \\leq 200,000$。\n\nSubtask #1（$4$ pts）：$g=h$。  \nSubtask #2（$7$ pts）：$h=2$。  \nSubtask #3（$7$ pts）：$g=h^2$。  \nSubtask #4（$14$ pts）：$g,h \\leq 20$。  \nSubtask #5（$36$ pts）：$g,h \\leq 2000$。  \nSubtask #6（$32$ pts）：无附加约束。\n\n**【说明】**\n\n译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 2 C Euklid](https://hsin.hr/coci/archive/2020_2021/contest2_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7162", "type": "P", "difficulty": 4, "samples": [["3\n1 2 3\n1 2\n2 3", "8"], ["4\n2 2 3 2\n1 3\n3 2\n4 3", "15"], ["5\n5 2 3 1 4\n2 1\n3 1\n2 4\n2 5", "26"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #2] Sjekira", "background": "", "description": "有一棵 $n$ 个结点的树，每个结点有一个权值，删除一条边的费用为该边连接子树中结点权值最大值之和。问以任意顺序删除树中所有边的最小花费。", "inputFormat": "第一行一个整数 $n$，表示结点数。  \n第二行 $n$ 个整数 $t_1, t_2, \\ldots , t_n$，其中第 $i$ 个数表示结点 $i$ 的权值。  \n接下来 $n-1$ 行，每行两个整数 $x, y$，表示 $x$ 和 $y$ 之间有一条边。", "outputFormat": "输出一个数，代表最小花费。", "hint": "**【样例解释 #1】**\n\n先删 $(2,3)$，再删 $(1,2)$，花费为 $5+3=8$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 100,000$，$1 \\leq t_i \\leq 10^9$。\n\nSubtask #1（$10$ pts）：$n \\leq 10$。  \nSubtask #2（$10$ pts）：$i$ 与 $i-1$ 有边直接相连。  \nSubtask #3（$30$ pts）：$n \\leq 1000$。  \nSubtask #4（$50$ pts）：无附加限制。\n\n**【说明】**\n\n译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 2 D Sjekira](https://hsin.hr/coci/contest2_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #2] Sjekira", "background": "", "description": "有一棵 $n$ 个结点的树，每个结点有一个权值，删除一条边的费用为该边连接子树中结点权值最大值之和。问以任意顺序删除树中所有边的最小花费。", "inputFormat": "第一行一个整数 $n$，表示结点数。  \n第二行 $n$ 个整数 $t_1, t_2, \\ldots , t_n$，其中第 $i$ 个数表示结点 $i$ 的权值。  \n接下来 $n-1$ 行，每行两个整数 $x, y$，表示 $x$ 和 $y$ 之间有一条边。", "outputFormat": "输出一个数，代表最小花费。", "hint": "**【样例解释 #1】**\n\n先删 $(2,3)$，再删 $(1,2)$，花费为 $5+3=8$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 100,000$，$1 \\leq t_i \\leq 10^9$。\n\nSubtask #1（$10$ pts）：$n \\leq 10$。  \nSubtask #2（$10$ pts）：$i$ 与 $i-1$ 有边直接相连。  \nSubtask #3（$30$ pts）：$n \\leq 1000$。  \nSubtask #4（$50$ pts）：无附加限制。\n\n**【说明】**\n\n译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 2 D Sjekira](https://hsin.hr/coci/contest2_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7163", "type": "P", "difficulty": 6, "samples": [["3\n010\n1 2\n2 3", "4"], ["5\n00000\n1 2\n2 3\n2 4\n3 5", "7"], ["5\n00100\n1 2\n2 3\n2 4\n3 5", "8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #2] Svjetlo", "background": null, "description": "有一个呈树状结构的吊灯，由 $n$ 个灯泡组成，这些灯泡之间有 $n-1$ 根电线连接。每个灯泡有一个按钮，能使灯泡的状态发生改变，即把打开的灯泡关闭，关闭的灯泡打开。你需要把所有的灯泡打开。\n\n你可以选择一个序列，序列中两两相邻位置的灯泡相邻，灯泡可以在序列中出现多次。你可以依次改变序列中的灯泡的状态。\n\n你需要计算出最短的符合题目要求的灯泡序列。保证至少有一个灯泡在开始时处于关闭状态。", "inputFormat": "第一行一个整数 $n$，表示灯泡的数量。  \n第二行一个长为 $n$ 的 01 序列，表示灯泡的状态，其中“0”代表关闭，“1”代表打开。  \n接下来 $n - 1$ 行每行两个整数 $x, y$，表示 $x$ 与 $y$ 之间有边。", "outputFormat": "输出序列的最小长度。可以证明这样的序列一定存在。", "hint": "**【样例解释 #1】**\n\n序列可以为 $1, 2, 3, 2$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 500,000$。\n\nSubtask #1（$19$ pts）：$n \\leq 100$。  \nSubtask #2（$27$ pts）：每个灯泡最多与两个灯泡相连。  \nSubtask #3（$27$ pts）：一开始所有灯泡均处于关闭状态。  \nSubtask #4（$27$ pts）：无附加限制。\n\n#### 说明\n\n译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 2 E Svjetlo](https://hsin.hr/coci/archive/2020_2021/contest2_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #2] Svjetlo", "background": null, "description": "有一个呈树状结构的吊灯，由 $n$ 个灯泡组成，这些灯泡之间有 $n-1$ 根电线连接。每个灯泡有一个按钮，能使灯泡的状态发生改变，即把打开的灯泡关闭，关闭的灯泡打开。你需要把所有的灯泡打开。\n\n你可以选择一个序列，序列中两两相邻位置的灯泡相邻，灯泡可以在序列中出现多次。你可以依次改变序列中的灯泡的状态。\n\n你需要计算出最短的符合题目要求的灯泡序列。保证至少有一个灯泡在开始时处于关闭状态。", "inputFormat": "第一行一个整数 $n$，表示灯泡的数量。  \n第二行一个长为 $n$ 的 01 序列，表示灯泡的状态，其中“0”代表关闭，“1”代表打开。  \n接下来 $n - 1$ 行每行两个整数 $x, y$，表示 $x$ 与 $y$ 之间有边。", "outputFormat": "输出序列的最小长度。可以证明这样的序列一定存在。", "hint": "**【样例解释 #1】**\n\n序列可以为 $1, 2, 3, 2$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 500,000$。\n\nSubtask #1（$19$ pts）：$n \\leq 100$。  \nSubtask #2（$27$ pts）：每个灯泡最多与两个灯泡相连。  \nSubtask #3（$27$ pts）：一开始所有灯泡均处于关闭状态。  \nSubtask #4（$27$ pts）：无附加限制。\n\n#### 说明\n\n译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 2 E Svjetlo](https://hsin.hr/coci/archive/2020_2021/contest2_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7164", "type": "P", "difficulty": 6, "samples": [["5\n5 3\n4 4\n2 1\n3 2\n1 5", "24"], ["6\n3 1\n2 1\n2 2\n2 3\n1 1\n2 2", "8"], ["5\n15 19\n5 6\n1 13\n3 7\n1 2\n", "285"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "线段树", "分治", "凸包", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #1] 3D Histogram", "background": "~~原题目背景其实是一个出毒瘤题的套路，有兴趣的同学可以去看看，这里懒得翻译了~~", "description": "在一个三维直方图中，放入 $n$ 个三维块，这些三维块的宽度均为 $1$，且能使得在正面看是一个从左到右分别高度为 $a_i$ 的二维直方图，在上面看是一个从左到右分别高度为 $b_i$ 的二维直方图。\n\n求在直方图中能放入的最大体积长方体的体积是多少，长方体的所有边均要与三维块的长宽高平行。", "inputFormat": "第一行一个整数 $n$ 代表三维块数量。       \n接下来 $n$ 行每行两个整数 $a_i,b_i$，如题目描述。", "outputFormat": "一行一个整数代表能放入的最大长方体体积。", "hint": "#### 样例 1 解释\n\n描述的直方图如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z2txhsvt.png)\n\n能放入的最大长方体体积为 $2 \\times 4 \\times 3=24$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1 \\le n \\le 2000$。\n- Subtask 2（90 pts）：$1 \\le n \\le 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le a_i,b_i \\le 10^6$。\n\n**本题满分 $110$ 分。**\n\n#### 说明\n\n翻译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 1 C 3D Histogram](https://hsin.hr/coci/archive/2020_2021/contest1_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #1] 3D Histogram", "background": "~~原题目背景其实是一个出毒瘤题的套路，有兴趣的同学可以去看看，这里懒得翻译了~~", "description": "在一个三维直方图中，放入 $n$ 个三维块，这些三维块的宽度均为 $1$，且能使得在正面看是一个从左到右分别高度为 $a_i$ 的二维直方图，在上面看是一个从左到右分别高度为 $b_i$ 的二维直方图。\n\n求在直方图中能放入的最大体积长方体的体积是多少，长方体的所有边均要与三维块的长宽高平行。", "inputFormat": "第一行一个整数 $n$ 代表三维块数量。       \n接下来 $n$ 行每行两个整数 $a_i,b_i$，如题目描述。", "outputFormat": "一行一个整数代表能放入的最大长方体体积。", "hint": "#### 样例 1 解释\n\n描述的直方图如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z2txhsvt.png)\n\n能放入的最大长方体体积为 $2 \\times 4 \\times 3=24$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1 \\le n \\le 2000$。\n- Subtask 2（90 pts）：$1 \\le n \\le 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le a_i,b_i \\le 10^6$。\n\n**本题满分 $110$ 分。**\n\n#### 说明\n\n翻译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 1 C 3D Histogram](https://hsin.hr/coci/archive/2020_2021/contest1_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7165", "type": "P", "difficulty": 5, "samples": [["4\n1 2\n2 3\n3 4\n", "1"], ["6\n1 2\n1 3\n3 4\n3 5\n5 6", "0"], ["9\n1 3\n2 3\n3 4\n3 5\n5 6\n5 7\n7 8\n7 9", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["树形数据结构", "2020", "递归", "枚举", "COCI（克罗地亚）", "分类讨论", "启发式合并"], "title": "[COCI 2020/2021 #1] Papričice", "background": "", "description": "给定一个 $n$ 个点的树，这 $n$ 个点编号为 $1$ 到 $n$。\n\n现在要选择断掉两条边，会形成三个连通块，假设这三个连通块内的点数分别为 $a,b,c$，那么您要做的就是最小化 $\\max\\{a,b,c\\}-\\min\\{a,b,c\\}$ 的大小，求这个最小值。", "inputFormat": "第一行一个整数 $n$ 代表树的点数。        \n接下来 $n-1$ 行每行两个整数 $x,y$ 代表树的一条边。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 样例 1 解释\n\n能构造的最优解三个连通块的点数都为 $1,1,2$，所以输出 $2-1=1$。\n\n#### 样例 2 解释\n\n断掉点 $1$ 到点 $3$ 的边，点 $3$ 到点 $5$ 的边，形成的三个连通块点数相同。\n\n#### 样例 3 解释\n\n如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nybys0n6.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（15 pts）：$3 \\le n \\le 200$。\n- Subtask 2（35 pts）：$3 \\le n \\le 2000$。\n- Subtask 3（60 pts）：$3 \\le n \\le 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le x,y \\le n$。\n\n**本题满分 $110$ 分。**\n\n#### 说明\n\n翻译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 1 D Papričice\n](https://hsin.hr/coci/contest1_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #1] Papričice", "background": "", "description": "给定一个 $n$ 个点的树，这 $n$ 个点编号为 $1$ 到 $n$。\n\n现在要选择断掉两条边，会形成三个连通块，假设这三个连通块内的点数分别为 $a,b,c$，那么您要做的就是最小化 $\\max\\{a,b,c\\}-\\min\\{a,b,c\\}$ 的大小，求这个最小值。", "inputFormat": "第一行一个整数 $n$ 代表树的点数。        \n接下来 $n-1$ 行每行两个整数 $x,y$ 代表树的一条边。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 样例 1 解释\n\n能构造的最优解三个连通块的点数都为 $1,1,2$，所以输出 $2-1=1$。\n\n#### 样例 2 解释\n\n断掉点 $1$ 到点 $3$ 的边，点 $3$ 到点 $5$ 的边，形成的三个连通块点数相同。\n\n#### 样例 3 解释\n\n如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nybys0n6.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（15 pts）：$3 \\le n \\le 200$。\n- Subtask 2（35 pts）：$3 \\le n \\le 2000$。\n- Subtask 3（60 pts）：$3 \\le n \\le 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\le x,y \\le n$。\n\n**本题满分 $110$ 分。**\n\n#### 说明\n\n翻译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 1 D Papričice\n](https://hsin.hr/coci/contest1_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7166", "type": "P", "difficulty": 5, "samples": [["3\n3 2 1\n1 3 2\n3 2 1\n", "1 2 0\n2 0 1\n"], ["4\n4 3 2 1\n3 1 2 4\n1 2 3 4", "3 2 1\n1 0 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #1] Tenis", "background": "", "description": "你是网球比赛的组织者，一场有 $n$ 个选手的比赛就要举办了，选手编号为 $1$ 到 $n$。在赛前你测试了他们在三种场地（A 场地，B 场地，C 场地）分别的初始排名，在这场比赛中，两个人之间比赛的场数恰好为一次，也就是说总共有 $\\dfrac{n \\times (n-1)}{2}$ 场比赛。\n\n比赛不会出现平局，会选择这次比赛所在的场地类型中初始排名靠前的选手获胜。你办的比赛也有一些黑幕，你就希望让你办的比赛中的获胜者能在他所更擅长的场地类型上比赛（即在他初试排名靠前的场地类型上比赛），如果有多个场地满足要求，那么选择输的那一方排名较靠前的。如果还有多个场地满足要求，选择编号小的（A $<$ B $<$ C）。\n\n你想知道，每个场地上举行了多少场比赛，且每个人赢的场数。", "inputFormat": "第一行一个整数 $n$ 代表选手个数。        \n第二行 $n$ 个整数代表选手们在 A 场地的初始排名，由强到弱依次给出。  \n第三行 $n$ 个整数代表选手们在 B 场地的初始排名，由强到弱依次给出。    \n第四行 $n$ 个整数代表选手们在 C 场地的初始排名，由强到弱依次给出。", "outputFormat": "第一行三个整数分别代表在 A 场地，B 场地，C 场地举办了多少场比赛。        \n第二行 $n$ 个整数代表每个选手获胜了几场。", "hint": "#### 样例 1 解释\n\n对于选手1和2之间的比赛，应该在2号场地进行，因为胜者（选手1）在该场地排名最好（第一位）。对于选手1和3之间的比赛，获胜者在三个场地上的排名相同，但输家在2号场地的排名更高。对于选手2和3之间的比赛，1号场地和3号场地的排名相同，因此选择索引较小的1号场地。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（35 pts）：$1 \\le n \\le 300$。\n- Subtask 2（15 pts）：$1 \\le n \\le 3000$。\n- Subtask 3（60 pts）：$1 \\le n \\le 10^5$。\n\n**满分 $110$ 分。**\n\n#### 说明\n\n翻译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 1 E Tenis\n](https://hsin.hr/coci/archive/2020_2021/contest1_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #1] Tenis", "background": "", "description": "你是网球比赛的组织者，一场有 $n$ 个选手的比赛就要举办了，选手编号为 $1$ 到 $n$。在赛前你测试了他们在三种场地（A 场地，B 场地，C 场地）分别的初始排名，在这场比赛中，两个人之间比赛的场数恰好为一次，也就是说总共有 $\\dfrac{n \\times (n-1)}{2}$ 场比赛。\n\n比赛不会出现平局，会选择这次比赛所在的场地类型中初始排名靠前的选手获胜。你办的比赛也有一些黑幕，你就希望让你办的比赛中的获胜者能在他所更擅长的场地类型上比赛（即在他初试排名靠前的场地类型上比赛），如果有多个场地满足要求，那么选择输的那一方排名较靠前的。如果还有多个场地满足要求，选择编号小的（A $<$ B $<$ C）。\n\n你想知道，每个场地上举行了多少场比赛，且每个人赢的场数。", "inputFormat": "第一行一个整数 $n$ 代表选手个数。        \n第二行 $n$ 个整数代表选手们在 A 场地的初始排名，由强到弱依次给出。  \n第三行 $n$ 个整数代表选手们在 B 场地的初始排名，由强到弱依次给出。    \n第四行 $n$ 个整数代表选手们在 C 场地的初始排名，由强到弱依次给出。", "outputFormat": "第一行三个整数分别代表在 A 场地，B 场地，C 场地举办了多少场比赛。        \n第二行 $n$ 个整数代表每个选手获胜了几场。", "hint": "#### 样例 1 解释\n\n对于选手1和2之间的比赛，应该在2号场地进行，因为胜者（选手1）在该场地排名最好（第一位）。对于选手1和3之间的比赛，获胜者在三个场地上的排名相同，但输家在2号场地的排名更高。对于选手2和3之间的比赛，1号场地和3号场地的排名相同，因此选择索引较小的1号场地。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（35 pts）：$1 \\le n \\le 300$。\n- Subtask 2（15 pts）：$1 \\le n \\le 3000$。\n- Subtask 3（60 pts）：$1 \\le n \\le 10^5$。\n\n**满分 $110$ 分。**\n\n#### 说明\n\n翻译自 [Croatian Open Competition in Informatics 2020 ~ 2021 Round 1 E Tenis\n](https://hsin.hr/coci/archive/2020_2021/contest1_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7167", "type": "P", "difficulty": 4, "samples": [["6 5\n4 10\n6 8\n3 5\n4 14\n10 9\n4 20\n1 25\n6 30\n5 8\n3 13\n2 8", "5\n0\n5\n4\n2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "倍增", "eJOI（欧洲）", "ST 表", "单调栈"], "title": "[eJOI 2020] Fountain (Day1)", "background": null, "description": "大家都知道喷泉吧？现在有一个喷泉由 $N$ 个圆盘组成，从上到下以此编号为 $1 \\sim N$，第 $i$ 个圆盘的直径为 $D_i$，容量为 $C_i$，当一个圆盘里的水大于了这个圆盘的容量，那么水就会溢出往下流，直到流入半径大于这个圆盘的圆盘里。如果下面没有满足要求的圆盘，水就会流到喷泉下的水池里。\n\n现在给定 $Q$ 组询问，每一组询问这么描述：\n\n- 向第 $R_i$ 个圆盘里倒入 $V_i$ 的水，求水最后会流到哪一个圆盘停止。\n\n如果最终流入了水池里，那么输出 $0$。\n\n**注意，每个询问互不影响。**", "inputFormat": "第一行两个整数 $N,Q$ 代表圆盘数和询问数。      \n接下来 $N$ 行每行两个整数 $D_i,C_i$ 代表一个圆盘。       \n接下来 $Q$ 行每行两个整数 $R_i,V_i$ 代表一个询问。", "outputFormat": "$Q$ 行每行一个整数代表询问的答案。", "hint": "#### 样例 1 解释\n\n前两个询问的解释如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/64e7acuq.png)\n\n因为每个询问互不影响，对于第三个询问，第 $5$ 个圆盘里的水不会溢出。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（30 pts）：$N \\le 1000$，$Q \\le 2000$。\n- Subtask 2（30 pts）：$D_i$ 为严格单调递增序列。\n- Subtask 3（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据：\n\n- $2 \\le N \\le 10^5$。\n- $1 \\le Q \\le 2 \\times 10^5$。\n- $1 \\le C_i \\le 1000$。\n- $1 \\le D_i,V_i \\le 10^9$。\n- $ 1\\le R_i \\le N$。\n\n#### 说明\n\n翻译自 [eJOI 2020 Day1 A Fountain](https://ejoi2020.ge/static/assets/Day1/Problems/Fountain.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2020] Fountain (Day1)", "background": null, "description": "大家都知道喷泉吧？现在有一个喷泉由 $N$ 个圆盘组成，从上到下以此编号为 $1 \\sim N$，第 $i$ 个圆盘的直径为 $D_i$，容量为 $C_i$，当一个圆盘里的水大于了这个圆盘的容量，那么水就会溢出往下流，直到流入半径大于这个圆盘的圆盘里。如果下面没有满足要求的圆盘，水就会流到喷泉下的水池里。\n\n现在给定 $Q$ 组询问，每一组询问这么描述：\n\n- 向第 $R_i$ 个圆盘里倒入 $V_i$ 的水，求水最后会流到哪一个圆盘停止。\n\n如果最终流入了水池里，那么输出 $0$。\n\n**注意，每个询问互不影响。**", "inputFormat": "第一行两个整数 $N,Q$ 代表圆盘数和询问数。      \n接下来 $N$ 行每行两个整数 $D_i,C_i$ 代表一个圆盘。       \n接下来 $Q$ 行每行两个整数 $R_i,V_i$ 代表一个询问。", "outputFormat": "$Q$ 行每行一个整数代表询问的答案。", "hint": "#### 样例 1 解释\n\n前两个询问的解释如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/64e7acuq.png)\n\n因为每个询问互不影响，对于第三个询问，第 $5$ 个圆盘里的水不会溢出。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（30 pts）：$N \\le 1000$，$Q \\le 2000$。\n- Subtask 2（30 pts）：$D_i$ 为严格单调递增序列。\n- Subtask 3（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据：\n\n- $2 \\le N \\le 10^5$。\n- $1 \\le Q \\le 2 \\times 10^5$。\n- $1 \\le C_i \\le 1000$。\n- $1 \\le D_i,V_i \\le 10^9$。\n- $ 1\\le R_i \\le N$。\n\n#### 说明\n\n翻译自 [eJOI 2020 Day1 A Fountain](https://ejoi2020.ge/static/assets/Day1/Problems/Fountain.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7168", "type": "P", "difficulty": 5, "samples": [["7", ""]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2020", "交互题", "Special Judge", "eJOI（欧洲）"], "title": "[eJOI 2020] Triangulation (Day1)", "background": "[使用说明](https://www.luogu.com.cn/paste/1nsbzh41)\n\n---\n\n题目中的 $(A,B)$ 代表一条从 $A$ 连到 $B$ 的对角线。\n\n定义正多边形的顶点 $A$ 到顶点 $B$ 的 eJ 距离为点 $A$ 顺时针走到点 $B$ 需要的边数和点 $A$ 逆时针走到点 $B$ 需要的边数的最大值。根据这个定义，也可以拓展出正多边形的顶点 $A$ 到一条正多边形的对角线 $B$ 的 eJ 距离的定义，即点 $A$ 顺时针走到对角线 $B$ 的一个端点（离的最近的端点）需要的边数和逆时针走需要的边数的最大值。\n\n比如点 $0$ 到对角线 $(0,5)$ 的 eJ 距离为 $5$，顺时针走需要经过 $5$ 条边，逆时针要经过 $2$ 条，答案为 $\\max\\{5,2\\}=5$。", "description": "给定一个 $N$ 边形，点顺时针编号为 $0 \\sim N-1$，现在小 A 画了 $n-3$ 条对角线，保证这 $n-3$ 条对角线除了顶点外没有额外交点。\n\n现在小 A 想让小 J 猜猜哪条对角线离点 $0$ 的 eJ 距离最近，并回答这个距离。\n\n小 J 并不能通过读心术知道答案，所以他只能找小 A 索要一些线索。小 A 给了小 J $n$ 的值，并且答应小 J 可以找小 A 询问一对顶点之间是否有对角线，但小 J 的询问次数有限制。\n\n小 J 还要 AK eJOI，所以这个问题就交给了你。\n\n#### 交互规则\n\n你需要调用 `triangulation.h` 头文件。\n\n```cpp\nint solve(int n)\n```\n\n- 这个函数只能被调用一次。\n- $n$：多边形顶点个数。\n- 假设答案对角线为 $(a,b)$，这个函数应该返回 $a \\times n+b$。\n- 如果有多条对角线离点 $0$ 最近，可以只返回其中一条。\n\nsolve 函数可以调用若干次下面这个函数：\n\n```cpp\nint query(int x, int y)\n```\n\n- $x,y$：代表一组询问。\n- $0 \\le x,y \\le n-1$。\n- 如果 $(x,y)$ 存在，返回 $1$，否则返回 $0$。\n\n", "inputFormat": "", "outputFormat": "", "hint": "#### 样例 1\n\n样例输入格式仅包含一个整数 $n$。\n\n|调用函数|返回值|\n|:-:|:-:|\n|`solve(7)`||\n|`query(0,3)`|$0$|\n|`query(0,5)`|$1$|\n|`query(1,5)`|$1$|\n||solve 函数返回 $1 \\times7+5=12$|\n||正确|\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$5 \\le n \\le 100$。\n\n假设 $q$ 为你单组数据的询问次数，令 $w=\\dfrac{n \\times (n-3)}{2}$，你单组数据的分数为：\n\n- 询问不合法，答案错误或 $w<q$，你会得到 $0\\%$ 的分数。\n- $n<q \\le w$，你会得到 $10+60 \\times \\dfrac{w-q}{w-n}\\%$ 的分数。\n- $q \\le n$，你会得到 $100\\%$ 的分数。\n\n感谢 @[FZzzz](https://www.luogu.com.cn/user/174045) 提供的 checker & grader。\n\n#### 说明\n\n翻译自 [eJOI 2020 Day1 B Triangulation](https://ejoi2020.ge/static/assets/Day1/Problems/Triangulation.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2020] Triangulation (Day1)", "background": "[使用说明](https://www.luogu.com.cn/paste/1nsbzh41)\n\n---\n\n题目中的 $(A,B)$ 代表一条从 $A$ 连到 $B$ 的对角线。\n\n定义正多边形的顶点 $A$ 到顶点 $B$ 的 eJ 距离为点 $A$ 顺时针走到点 $B$ 需要的边数和点 $A$ 逆时针走到点 $B$ 需要的边数的最大值。根据这个定义，也可以拓展出正多边形的顶点 $A$ 到一条正多边形的对角线 $B$ 的 eJ 距离的定义，即点 $A$ 顺时针走到对角线 $B$ 的一个端点（离的最近的端点）需要的边数和逆时针走需要的边数的最大值。\n\n比如点 $0$ 到对角线 $(0,5)$ 的 eJ 距离为 $5$，顺时针走需要经过 $5$ 条边，逆时针要经过 $2$ 条，答案为 $\\max\\{5,2\\}=5$。", "description": "给定一个 $N$ 边形，点顺时针编号为 $0 \\sim N-1$，现在小 A 画了 $n-3$ 条对角线，保证这 $n-3$ 条对角线除了顶点外没有额外交点。\n\n现在小 A 想让小 J 猜猜哪条对角线离点 $0$ 的 eJ 距离最近，并回答这个距离。\n\n小 J 并不能通过读心术知道答案，所以他只能找小 A 索要一些线索。小 A 给了小 J $n$ 的值，并且答应小 J 可以找小 A 询问一对顶点之间是否有对角线，但小 J 的询问次数有限制。\n\n小 J 还要 AK eJOI，所以这个问题就交给了你。\n\n#### 交互规则\n\n你需要调用 `triangulation.h` 头文件。\n\n```cpp\nint solve(int n)\n```\n\n- 这个函数只能被调用一次。\n- $n$：多边形顶点个数。\n- 假设答案对角线为 $(a,b)$，这个函数应该返回 $a \\times n+b$。\n- 如果有多条对角线离点 $0$ 最近，可以只返回其中一条。\n\nsolve 函数可以调用若干次下面这个函数：\n\n```cpp\nint query(int x, int y)\n```\n\n- $x,y$：代表一组询问。\n- $0 \\le x,y \\le n-1$。\n- 如果 $(x,y)$ 存在，返回 $1$，否则返回 $0$。\n\n", "inputFormat": "", "outputFormat": "", "hint": "#### 样例 1\n\n样例输入格式仅包含一个整数 $n$。\n\n|调用函数|返回值|\n|:-:|:-:|\n|`solve(7)`||\n|`query(0,3)`|$0$|\n|`query(0,5)`|$1$|\n|`query(1,5)`|$1$|\n||solve 函数返回 $1 \\times7+5=12$|\n||正确|\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$5 \\le n \\le 100$。\n\n假设 $q$ 为你单组数据的询问次数，令 $w=\\dfrac{n \\times (n-3)}{2}$，你单组数据的分数为：\n\n- 询问不合法，答案错误或 $w<q$，你会得到 $0\\%$ 的分数。\n- $n<q \\le w$，你会得到 $10+60 \\times \\dfrac{w-q}{w-n}\\%$ 的分数。\n- $q \\le n$，你会得到 $100\\%$ 的分数。\n\n感谢 @[FZzzz](https://www.luogu.com.cn/user/174045) 提供的 checker & grader。\n\n#### 说明\n\n翻译自 [eJOI 2020 Day1 B Triangulation](https://ejoi2020.ge/static/assets/Day1/Problems/Triangulation.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7169", "type": "P", "difficulty": 5, "samples": [["3\n1 2 3\n2 2 2", "2"], ["4\n10 1 9 1\n10 9 10 9", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2020", "树状数组", "eJOI（欧洲）"], "title": "[eJOI 2020] Exam (Day1)", "background": "", "description": "给定一个长度为 $N$ 的序列 $A_i$，你可以进行无数次下面这个操作：\n\n- 选定一个大小不小于 $2$ 的区间，使得这个区间里的数等于这个区间里的最大值。\n\n你需要用这些操作使得 $A_i=B_i$，求最多能使得多少数满足要求。", "inputFormat": "第一行一个整数 $N$ 代表序列长度。          \n第二行 $N$ 个整数代表序列 $A_i$。      \n第三行 $N$ 个整数代表序列 $B_i$。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 样例 1 解释\n\n可以选择对区间 $[1,2]$ 进行操作，最多能有 $2$ 个数满足要求。\n\n#### 样例 2 解释\n\n$A_2$ 或 $A_3$ 能满足要求，但他们不能同时满足要求。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（14 pts）：$N \\le 10$。\n- Subtask 2（12 pts）：$N \\le 10^5$，所有 $B_i$ 都相等。\n- Subtask 3（13 pts）：$N \\le 5000$，$A_i$ 为严格单调递增序列。\n- Subtask 4（23 pts）：$N \\le 10^5$，$A_i$ 两两不同。\n- Subtask 5（16 pts）：$N \\le 200$。\n- Subtask 6（22 pts）：$N \\le 5000$。\n\n对于 $100\\%$ 的数据：\n\n- $2 \\le N$。\n- $1 \\le A_i \\le 10^9$。\n- $1 \\le B_i \\le 10^9$。\n\n#### 说明\n\n翻译自 [eJOI 2020 Day1 C Exam](https://ejoi2020.ge/static/assets/Day1/Problems/Exam.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[eJOI 2020] Exam (Day1)", "background": "", "description": "给定一个长度为 $N$ 的序列 $A_i$，你可以进行无数次下面这个操作：\n\n- 选定一个大小不小于 $2$ 的区间，使得这个区间里的数等于这个区间里的最大值。\n\n你需要用这些操作使得 $A_i=B_i$，求最多能使得多少数满足要求。", "inputFormat": "第一行一个整数 $N$ 代表序列长度。          \n第二行 $N$ 个整数代表序列 $A_i$。      \n第三行 $N$ 个整数代表序列 $B_i$。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 样例 1 解释\n\n可以选择对区间 $[1,2]$ 进行操作，最多能有 $2$ 个数满足要求。\n\n#### 样例 2 解释\n\n$A_2$ 或 $A_3$ 能满足要求，但他们不能同时满足要求。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（14 pts）：$N \\le 10$。\n- Subtask 2（12 pts）：$N \\le 10^5$，所有 $B_i$ 都相等。\n- Subtask 3（13 pts）：$N \\le 5000$，$A_i$ 为严格单调递增序列。\n- Subtask 4（23 pts）：$N \\le 10^5$，$A_i$ 两两不同。\n- Subtask 5（16 pts）：$N \\le 200$。\n- Subtask 6（22 pts）：$N \\le 5000$。\n\n对于 $100\\%$ 的数据：\n\n- $2 \\le N$。\n- $1 \\le A_i \\le 10^9$。\n- $1 \\le B_i \\le 10^9$。\n\n#### 说明\n\n翻译自 [eJOI 2020 Day1 C Exam](https://ejoi2020.ge/static/assets/Day1/Problems/Exam.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7170", "type": "P", "difficulty": 4, "samples": [["3 3\n.**\n*..\n.*.", "**.\n..*\n*.."], ["3 4\n....\n..*.\n....", "*...\n....\n...."], ["3 5\n.**..\n.***.\n..**.", "***..\n.**..\n**..."]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #3] Sateliti", "background": "为了得到进一步的探索进展，阿雷西博望远镜将拍下土星的卫星。研究团队必须区分卫星图像并将它们按卫星分组，但由于卫星从不同角度拍摄，因此并不容易。", "description": "捕捉到的图像可以以一个 $n \\times m$ 的矩阵呈现，其中 `*` 表示火山，而 `.` 表示平地。我们认为两个图像属于同一颗卫星，当且它们能**环形地互相通过向上下或左右平移得到**。\n\n科研工作者想要找到**字典序最小**的与给定图像属于同一颗卫星的图像。我们把图像的所有行依次连接组成字符串，再判断字符串的字典序即可。", "inputFormat": "第一行包含两个整数 $n,m$，表示图像的规模。\n\n接下来的 $n$ 行，每行输入 $m$ 个字符，表示图像所对应的矩阵。", "outputFormat": "输出共 $n$ 行，每行有 $m$ 个字符，表示满足要求的字典序最小的图像。", "hint": "**【样例解释 #1】**\n\n所有可能的情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ftrlc0tx.png)\n\n**【数据范围】**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $1 \\le n,m \\le 50$ |\n| $2$ | $40$ | $1 \\le n,m \\le 300$ |\n| $3$ | $60$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 1000$。\n\n**【说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf)  _T3 Sateliti_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #3] Sateliti", "background": "为了得到进一步的探索进展，阿雷西博望远镜将拍下土星的卫星。研究团队必须区分卫星图像并将它们按卫星分组，但由于卫星从不同角度拍摄，因此并不容易。", "description": "捕捉到的图像可以以一个 $n \\times m$ 的矩阵呈现，其中 `*` 表示火山，而 `.` 表示平地。我们认为两个图像属于同一颗卫星，当且它们能**环形地互相通过向上下或左右平移得到**。\n\n科研工作者想要找到**字典序最小**的与给定图像属于同一颗卫星的图像。我们把图像的所有行依次连接组成字符串，再判断字符串的字典序即可。", "inputFormat": "第一行包含两个整数 $n,m$，表示图像的规模。\n\n接下来的 $n$ 行，每行输入 $m$ 个字符，表示图像所对应的矩阵。", "outputFormat": "输出共 $n$ 行，每行有 $m$ 个字符，表示满足要求的字典序最小的图像。", "hint": "**【样例解释 #1】**\n\n所有可能的情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ftrlc0tx.png)\n\n**【数据范围】**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $1 \\le n,m \\le 50$ |\n| $2$ | $40$ | $1 \\le n,m \\le 300$ |\n| $3$ | $60$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 1000$。\n\n**【说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf)  _T3 Sateliti_。**", "locale": "zh-CN"}}}
{"pid": "P7171", "type": "P", "difficulty": 5, "samples": [["2 3\n#.#\n###", "3"], ["4 3\n.#.\n###\n.##\n.#.", "3"], ["4 4\n####\n#.#.\n#.##\n####", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "COCI（克罗地亚）", "状压 DP"], "title": "[COCI 2020/2021 #3] Selotejp", "background": "在 Mirko 看来，没有比找到一卷新的胶带纸要更令人快乐，而今天他格外开心，因为他找到 Slavko 的基督日历。", "description": "基督日历可以被一个 $n$ 行 $m$ 列的表格所表示。每个方格包含一个小窗口，而每个小窗口后有一块巧克力。Slavko 已经打开了部分窗口，而其他的处于关闭状态。\n\nMirko 决定用他的胶带把所有关闭的窗户都粘住。胶带纸长度无限大，并且宽度与一个窗口吻合。Mirko 可以撕下一部分胶带纸来将**一横排或一纵列连续的关闭的窗口**粘上。他不想在某个窗户上贴超过一条胶带，因为他仍旧想做 Slavko 的朋友。\n\n他想知道将**所有**关闭的窗口粘上所需的**最少**胶带纸的数量。", "inputFormat": "第一行输入两个整数 $n,m$，表示基督日历的规模。\n\n接下来的 $n$ 行，每行包含 $m$ 个字符，表示基督日历的各个方格。`.` 表示打开的窗口，`#` 表示关闭的窗口。", "outputFormat": "输出封住所有关闭的窗户所需的最少胶带数量。", "hint": "**【样例解释 #1】**\n\n一种符合题意的方案：分别在第一列整列、第三列整列和第二行第二列处使用胶带。\n\n**【数据范围】**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $35$ | 每个窗口与至多两个已关闭的窗口相邻 |\n| $2$ | $35$ | $1 \\le n \\le 10$ |\n| $3$ | $40$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le m \\le 10$。\n\n**【说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf)  _T4 Selotejp_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #3] Selotejp", "background": "在 Mirko 看来，没有比找到一卷新的胶带纸要更令人快乐，而今天他格外开心，因为他找到 Slavko 的基督日历。", "description": "基督日历可以被一个 $n$ 行 $m$ 列的表格所表示。每个方格包含一个小窗口，而每个小窗口后有一块巧克力。Slavko 已经打开了部分窗口，而其他的处于关闭状态。\n\nMirko 决定用他的胶带把所有关闭的窗户都粘住。胶带纸长度无限大，并且宽度与一个窗口吻合。Mirko 可以撕下一部分胶带纸来将**一横排或一纵列连续的关闭的窗口**粘上。他不想在某个窗户上贴超过一条胶带，因为他仍旧想做 Slavko 的朋友。\n\n他想知道将**所有**关闭的窗口粘上所需的**最少**胶带纸的数量。", "inputFormat": "第一行输入两个整数 $n,m$，表示基督日历的规模。\n\n接下来的 $n$ 行，每行包含 $m$ 个字符，表示基督日历的各个方格。`.` 表示打开的窗口，`#` 表示关闭的窗口。", "outputFormat": "输出封住所有关闭的窗户所需的最少胶带数量。", "hint": "**【样例解释 #1】**\n\n一种符合题意的方案：分别在第一列整列、第三列整列和第二行第二列处使用胶带。\n\n**【数据范围】**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $35$ | 每个窗口与至多两个已关闭的窗口相邻 |\n| $2$ | $35$ | $1 \\le n \\le 10$ |\n| $3$ | $40$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le m \\le 10$。\n\n**【说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf)  _T4 Selotejp_。**", "locale": "zh-CN"}}}
{"pid": "P7172", "type": "P", "difficulty": 6, "samples": [["3 5 0\n1 2 6\n7 10\n8 5\n6 2\n9 10\n2 3", "1\n5\n1\n6\n1"], ["3 5 1\n1 2 6\n7 10\n8 5\n6 2\n9 10\n2 3", "1\n6\n2\n1\n1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "最近公共祖先 LCA", "可持久化线段树", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #3] Specijacija", "background": null, "description": "给定一个正整数 $n$ 和一个满足 $\\frac{i(i-1)}{2} \\lt a_i \\le \\frac{i(i+1)}{2}$ 的正整数序列 $a_1, a_2, \\cdots, a_n$。\n\n该序列参数化了一棵包含 $\\frac{(n+1)(n+2)}{2}$ 个节点的树。该树包括 $n+1$ 层，每层分别包含 $1, 2, \\cdots, n+1$ 个节点，如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bvug13ny.png)\n\n它由 $a=(1,2,6)$ 参数化而来。\n\n第 $i$ 层包含节点 $\\frac{i(i-1)}{2}+1, \\cdots, \\frac{i(i+1)}{2}$。节点 $a_i$ 有两个孩子，而其他同层的节点都只有一个孩子。在每层中，按编号从小到大的顺序为每个点分配孩子，优先选择当前编号最小且未被分配的下层节点。\n\n请回答 $q$ 个询问，求 $x,y$ 的最大公共祖先，即既是 $x$ 的祖先，又是 $y$ 的祖先且编号最大的节点。", "inputFormat": "第一行包含三个整数 $n,q,t$，分别表示参数的数量、询问次数和用来决定节点编号的参数。\n\n第二行输入一个长度为 $n$ 的序列 $a$（其中对于每一个数 $a_i$ 有 $\\frac{i(i-1)}{2} \\lt a_i \\le \\frac{i(i+1)}{2}$）。\n\n接下来的 $q$ 行中的第 $i$ 行包含两个整数 $\\tilde x_i$ 和 $\\tilde y_i$（$1 \\le \\tilde x_i, \\tilde y_i \\le \\frac{(n+1)(n+2)}{2}$），用来决定第 $i$ 个询问涉及节点的编号。\n\n设 $z_i$ 为第 $i$ 次询问的结果，规定 $z_0=0$。第 $i$ 次询问涉及节点的编号为：\n\n$$x_i=[(\\tilde x_i-1+t \\times z_{i-1}) \\bmod \\frac{(n+1)(n+2)}{2}]+1$$\n\n$$y_i=[(\\tilde y_i-1+t \\times z_{i-1}) \\bmod \\frac{(n+1)(n+2)}{2}]+1$$\n\n注：当参数 $t=0$ 时，满足 $x_i=\\tilde x_i$，$y_i=\\tilde y_i$。当 $t=1$ 时，询问涉及节点的编号应通过先前的答案来决定。", "outputFormat": "输出共 $q$ 行，其中第 $i$ 行，输出 $x_i$ 和 $y_i$ 的最大公共祖先。", "hint": "**【样例解释 #1 / #2】**\n\n两个样例所表示的树的形状在题目描述的图中已经呈现。\n\n第二个样例中各个询问涉及的节点的编号：\n\n$x_1=7$，$y_1=10$；  \n$x_2=9$，$y_2=6$；  \n$x_3=2$，$y_3=8$；  \n$x_4=1$，$y_4=2$；  \n$x_5=3$，$y_5=4$。\n\n**【数据范围】**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $q=1, t=0$ |\n| $2$ | $10$ | $n \\le 1000, t=0$ |\n| $3$ | $30$ | $t=0$ |\n| $4$ | $60$ | $t=1$ |\n\n对于 $100\\%$ 的数据，$1 \\le n,q \\le 2 \\times 10^5$，$t \\in \\{0,1\\}$。\n\n**【说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/archive/2020_2021/contest3_tasks.pdf)  _T5 Specijacija_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #3] Specijacija", "background": null, "description": "给定一个正整数 $n$ 和一个满足 $\\frac{i(i-1)}{2} \\lt a_i \\le \\frac{i(i+1)}{2}$ 的正整数序列 $a_1, a_2, \\cdots, a_n$。\n\n该序列参数化了一棵包含 $\\frac{(n+1)(n+2)}{2}$ 个节点的树。该树包括 $n+1$ 层，每层分别包含 $1, 2, \\cdots, n+1$ 个节点，如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bvug13ny.png)\n\n它由 $a=(1,2,6)$ 参数化而来。\n\n第 $i$ 层包含节点 $\\frac{i(i-1)}{2}+1, \\cdots, \\frac{i(i+1)}{2}$。节点 $a_i$ 有两个孩子，而其他同层的节点都只有一个孩子。在每层中，按编号从小到大的顺序为每个点分配孩子，优先选择当前编号最小且未被分配的下层节点。\n\n请回答 $q$ 个询问，求 $x,y$ 的最大公共祖先，即既是 $x$ 的祖先，又是 $y$ 的祖先且编号最大的节点。", "inputFormat": "第一行包含三个整数 $n,q,t$，分别表示参数的数量、询问次数和用来决定节点编号的参数。\n\n第二行输入一个长度为 $n$ 的序列 $a$（其中对于每一个数 $a_i$ 有 $\\frac{i(i-1)}{2} \\lt a_i \\le \\frac{i(i+1)}{2}$）。\n\n接下来的 $q$ 行中的第 $i$ 行包含两个整数 $\\tilde x_i$ 和 $\\tilde y_i$（$1 \\le \\tilde x_i, \\tilde y_i \\le \\frac{(n+1)(n+2)}{2}$），用来决定第 $i$ 个询问涉及节点的编号。\n\n设 $z_i$ 为第 $i$ 次询问的结果，规定 $z_0=0$。第 $i$ 次询问涉及节点的编号为：\n\n$$x_i=[(\\tilde x_i-1+t \\times z_{i-1}) \\bmod \\frac{(n+1)(n+2)}{2}]+1$$\n\n$$y_i=[(\\tilde y_i-1+t \\times z_{i-1}) \\bmod \\frac{(n+1)(n+2)}{2}]+1$$\n\n注：当参数 $t=0$ 时，满足 $x_i=\\tilde x_i$，$y_i=\\tilde y_i$。当 $t=1$ 时，询问涉及节点的编号应通过先前的答案来决定。", "outputFormat": "输出共 $q$ 行，其中第 $i$ 行，输出 $x_i$ 和 $y_i$ 的最大公共祖先。", "hint": "**【样例解释 #1 / #2】**\n\n两个样例所表示的树的形状在题目描述的图中已经呈现。\n\n第二个样例中各个询问涉及的节点的编号：\n\n$x_1=7$，$y_1=10$；  \n$x_2=9$，$y_2=6$；  \n$x_3=2$，$y_3=8$；  \n$x_4=1$，$y_4=2$；  \n$x_5=3$，$y_5=4$。\n\n**【数据范围】**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $q=1, t=0$ |\n| $2$ | $10$ | $n \\le 1000, t=0$ |\n| $3$ | $30$ | $t=0$ |\n| $4$ | $60$ | $t=1$ |\n\n对于 $100\\%$ 的数据，$1 \\le n,q \\le 2 \\times 10^5$，$t \\in \\{0,1\\}$。\n\n**【说明】**\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/archive/2020_2021/contest3_tasks.pdf)  _T5 Specijacija_。**", "locale": "zh-CN"}}}
{"pid": "P7173", "type": "P", "difficulty": 6, "samples": [["4 5 4 3\n4 2 30 2\n4 3 20 3\n2 3 20 1\n2 1 30 9\n1 3 40 5\n", "50 280\n"], ["5 7 1 5\n1 3 2 4\n1 2 2 3\n3 5 2 2\n3 2 1 -1\n2 4 2 -2\n4 3 1 -1\n4 5 1 3\n", "3 12\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["网络流", "费用流", "模板题"], "title": "【模板】有负圈的费用流", "background": "", "description": "给定一张 $n$ 个点 $m$ 条边的费用网络，源为 $s$ 且汇为 $t$ ，求其最小费用最大流。\n\n注意存在费用为负的边和总费用为负的环。\n\n注意，本题中允许一个不经过 $s,t$ 的环整体加上一个流量。事实上，若不允许这种情况的出现，则哈密顿路可以归约为这个问题。", "inputFormat": "输入第一行包括四个正整数 $n,m,s,t$。\n\n第 $2$ 到 $m+1$ 行，每行四个整数 $x_i,y_i,f_i,v_i$，表示存在一条 $x_i$ 到 $y_i$ 的边，流量为 $f_i$，费用为 $v_i$。", "outputFormat": "输出包括一行两个整数，分别表示最大流与最小费用。", "hint": "对于 $100\\%$ 的数据：$1\\leq n\\leq 200$，$1\\leq m\\leq {10}^{4}$，$0\\leq f_i,|v_i|\\leq 100$。\n\n注：不知道消圈算法能不能过，由于数据分档，即使不能过应该也能拿到一定的分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】有负圈的费用流", "background": "", "description": "给定一张 $n$ 个点 $m$ 条边的费用网络，源为 $s$ 且汇为 $t$ ，求其最小费用最大流。\n\n注意存在费用为负的边和总费用为负的环。\n\n注意，本题中允许一个不经过 $s,t$ 的环整体加上一个流量。事实上，若不允许这种情况的出现，则哈密顿路可以归约为这个问题。", "inputFormat": "输入第一行包括四个正整数 $n,m,s,t$。\n\n第 $2$ 到 $m+1$ 行，每行四个整数 $x_i,y_i,f_i,v_i$，表示存在一条 $x_i$ 到 $y_i$ 的边，流量为 $f_i$，费用为 $v_i$。", "outputFormat": "输出包括一行两个整数，分别表示最大流与最小费用。", "hint": "对于 $100\\%$ 的数据：$1\\leq n\\leq 200$，$1\\leq m\\leq {10}^{4}$，$0\\leq f_i,|v_i|\\leq 100$。\n\n注：不知道消圈算法能不能过，由于数据分档，即使不能过应该也能拿到一定的分数。", "locale": "zh-CN"}}}
{"pid": "P7174", "type": "P", "difficulty": 1, "samples": [["30", "30"], ["102", "210"], ["2931", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2014", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #4] CESTA", "background": "", "description": "Mirko 发现了一个正整数 $n$，由于 Mirko 喜欢数字 $30$，他想知道用 $n$ 的每位数字所组成的数中 $30$ 的最大倍数。\n\n写一个计算这个数字的程序（如果不存在，则输出 `-1`）。", "inputFormat": "一个数 $n$。", "outputFormat": "仅一行，即题中所求。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$n$ 的位数不超过 $10^5$。\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T1 CESTA_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #4] CESTA", "background": "", "description": "Mirko 发现了一个正整数 $n$，由于 Mirko 喜欢数字 $30$，他想知道用 $n$ 的每位数字所组成的数中 $30$ 的最大倍数。\n\n写一个计算这个数字的程序（如果不存在，则输出 `-1`）。", "inputFormat": "一个数 $n$。", "outputFormat": "仅一行，即题中所求。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$n$ 的位数不超过 $10^5$。\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T1 CESTA_。**", "locale": "zh-CN"}}}
{"pid": "P7175", "type": "P", "difficulty": 3, "samples": [["3\n3 3 3", "Slavko\n3 3\n"], ["4\n3 1 2 1\n", "Slavko\n1 2"], ["7\n2 1 3 3 5 4 1 ", "Slavko\n2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2014", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #4] PŠENICA", "background": null, "description": "Mirko 和 Slavko 每年在 Saint Lucy’s Day 种植圣诞小麦。小麦的茎秆生长速度不同，经过一段时间后，小麦变得相当凌乱。他们决心通过玩下面的游戏来解决这个问题，游戏将轮流进行如下环节：\n\n- Mirko 选择一根高度最小的麦秆使其高度变成次小值。\n- Slavko 选择一根高度最大的麦秆使其高度变成次大值。\n- 如果剩下的不同高度的数量不小于 $3$，游戏继续进行，否则结束，结束时需要操作者为输家了。\n\n给定小麦秸秆的高度，Mirko 先手。请确定游戏的赢家以及结束后高度的最小值与最大值。", "inputFormat": "第一行输入包含整数 $n$，即小麦秸秆的数量。\n\n第二行输入包含 $n$ 个空格分隔的整数 $h_i$，表示单个小麦秸秆的高度。", "outputFormat": "第一行输出输出赢家的姓名（`Mirko`或 `Slavko`）。\n\n第二行输出游戏结束时最短和最长的麦秆的高度。", "hint": "#### 样例 1 说明\n\n初始时 Mirko 便不能操作，因此，Slavko 是赢家。\n\n#### 数据规模与约定\n\n- 对于 $50\\%$ 的数据，有 $1\\le n\\le 500$。\n- 对于 $80\\%$ 的数据，有 $1\\le n\\le 3\\times 10^3$。\n- 对于 $100\\%$ 的数据，有 $1\\le n\\le 10^5$。\n\n对于所有合法的 $h_i$，都有 $1\\le h_i\\le 10^5$。\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T2 PŠENICA_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #4] PŠENICA", "background": null, "description": "Mirko 和 Slavko 每年在 Saint Lucy’s Day 种植圣诞小麦。小麦的茎秆生长速度不同，经过一段时间后，小麦变得相当凌乱。他们决心通过玩下面的游戏来解决这个问题，游戏将轮流进行如下环节：\n\n- Mirko 选择一根高度最小的麦秆使其高度变成次小值。\n- Slavko 选择一根高度最大的麦秆使其高度变成次大值。\n- 如果剩下的不同高度的数量不小于 $3$，游戏继续进行，否则结束，结束时需要操作者为输家了。\n\n给定小麦秸秆的高度，Mirko 先手。请确定游戏的赢家以及结束后高度的最小值与最大值。", "inputFormat": "第一行输入包含整数 $n$，即小麦秸秆的数量。\n\n第二行输入包含 $n$ 个空格分隔的整数 $h_i$，表示单个小麦秸秆的高度。", "outputFormat": "第一行输出输出赢家的姓名（`Mirko`或 `Slavko`）。\n\n第二行输出游戏结束时最短和最长的麦秆的高度。", "hint": "#### 样例 1 说明\n\n初始时 Mirko 便不能操作，因此，Slavko 是赢家。\n\n#### 数据规模与约定\n\n- 对于 $50\\%$ 的数据，有 $1\\le n\\le 500$。\n- 对于 $80\\%$ 的数据，有 $1\\le n\\le 3\\times 10^3$。\n- 对于 $100\\%$ 的数据，有 $1\\le n\\le 10^5$。\n\n对于所有合法的 $h_i$，都有 $1\\le h_i\\le 10^5$。\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T2 PŠENICA_。**", "locale": "zh-CN"}}}
{"pid": "P7176", "type": "P", "difficulty": 3, "samples": [["3\n2 2 2", "6"], ["3\n4 1 2", "8"], ["4\n1 3 2 1", "7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2014", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #4] PRIPREME", "background": "", "description": "Ante 和 Goran 正在准备 $n$ 个团队。他们每个人各有一个算法需要向所有团队讲解。\n\n当然，他们不能两人同时对同一个团队讲解，也不能同时对多个团队讲解。\n\n给定对每个团队讲解所需的时间，你需要确定讲解所需的最少时间。", "inputFormat": "第一行输入包含整数 $n$，即团队数量。\n\n下一行包含 $n$ 个空格分隔的整数 $a_i$，表示对第 $i$ 个团队讲解所需的时间。", "outputFormat": "仅一行，即讲解所需的最少时间。", "hint": "#### 样例 1 说明\n\n每个团队都需要 $2$ 个单位时间来理解和实现一个算法，以下是一种可行的授课方法。\n\n| Ante | Goran | 用时 |\n| :----------: | :----------: | :----------: |\n| 团队 1 | 团队 2 | $2$ |\n| 团队 2 | 团队 3 | $2$ |\n| 团队 3 | 团队 1 | $2$ |\n| 全部完成 | 全部完成 | $6$ |\n\n#### 样例 2 说明\n\n其中一种最佳的时间安排是 Ante 依次给团队 $2,3, {\\color{red}x},1$ 讲解，但是在 $\\color{red}x$ 中有一个 $1$ 个单位时间的暂停。Goran 将依次给团队 $1,3,2$ 讲课。\n\n#### 数据规模与约定\n\n- 对于 $40\\%$ 的数据，有 $1\\le n\\le 7$。\n- 对于 $100\\%$ 的数据，有 $1\\le n\\le 3\\times 10^5$。\n\n对于所有合法的 $a_i$，都有 $a_i\\in [1,3\\times 10^5]$。\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T3 PRIPREME_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #4] PRIPREME", "background": "", "description": "Ante 和 Goran 正在准备 $n$ 个团队。他们每个人各有一个算法需要向所有团队讲解。\n\n当然，他们不能两人同时对同一个团队讲解，也不能同时对多个团队讲解。\n\n给定对每个团队讲解所需的时间，你需要确定讲解所需的最少时间。", "inputFormat": "第一行输入包含整数 $n$，即团队数量。\n\n下一行包含 $n$ 个空格分隔的整数 $a_i$，表示对第 $i$ 个团队讲解所需的时间。", "outputFormat": "仅一行，即讲解所需的最少时间。", "hint": "#### 样例 1 说明\n\n每个团队都需要 $2$ 个单位时间来理解和实现一个算法，以下是一种可行的授课方法。\n\n| Ante | Goran | 用时 |\n| :----------: | :----------: | :----------: |\n| 团队 1 | 团队 2 | $2$ |\n| 团队 2 | 团队 3 | $2$ |\n| 团队 3 | 团队 1 | $2$ |\n| 全部完成 | 全部完成 | $6$ |\n\n#### 样例 2 说明\n\n其中一种最佳的时间安排是 Ante 依次给团队 $2,3, {\\color{red}x},1$ 讲解，但是在 $\\color{red}x$ 中有一个 $1$ 个单位时间的暂停。Goran 将依次给团队 $1,3,2$ 讲课。\n\n#### 数据规模与约定\n\n- 对于 $40\\%$ 的数据，有 $1\\le n\\le 7$。\n- 对于 $100\\%$ 的数据，有 $1\\le n\\le 3\\times 10^5$。\n\n对于所有合法的 $a_i$，都有 $a_i\\in [1,3\\times 10^5]$。\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T3 PRIPREME_。**", "locale": "zh-CN"}}}
{"pid": "P7177", "type": "P", "difficulty": 3, "samples": [["5\n1 2 50 0\n1 3 50 0\n2 4 25 0\n2 5 75 1\n-1 -1 4 1 9", "8.00"], ["3\n1 2 20 1\n1 3 80 1\n-1 4 8", "10.0000"], ["6\n1 2 100 1\n2 3 20 0\n2 4 20 0\n2 5 60 0\n4 6 100 1\n-1 -1 1 -1 1 2", "2.659"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2014", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #4] MRAVI", "background": "", "description": "Bobi 每天早上起床喂他最喜欢的宠物：蚂蚁。他把它们放在一个有管道系统的玻璃瓶中，管道系统可以表示为一棵有 $n$ 个节点的树。管道用树的边缘表示。树的根位于用 $1$ 表示的节点上。在管道系统内部，由于重力的作用，液体从节点流向其子节点。我们知道每个管道的流量 $x_i$：从父节点到子节点的流量百分比。让我们观察以下示例：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oi3ubdfd.png)\n\n图片中的节点 $1$ 有 $12$ 升液体，之后有两个管道。一个的流量是 $x_i=30$，另一个是 $x_i=70$。节点 $2$ 将得到 $3.6$ 升，节点 $3$ 得到 $8.4$ 升。在输入数据中，来自同一节点的管道流量之和始终等于 $100$。Bobi 的一些管子不只是普通的管子，它们有点奇怪。它们是超级管道，有超能力将流经它们的液体流量平方。在前面的例子中，如果第一个管道有超能力，节点 $2$ 得到 $12.96$ 升，节点 $3$ 仍然只有 $8.4$ 升。现在请注意，一个节点的流出液体比进入的液体多。这正是这些管道是超级管道的原因！\n\n所有的超级管道都可以由波比开启或关闭。蚂蚁只生活在树的叶子里（没有孩子的节点）。对于每一片叶子，我们知道需要多少液体来喂养生活在叶子里的蚂蚁。Bobi 想把 $L$ 升液体倒进树根里喂蚂蚁。他没有多少钱，所以他想知道他需要购买的最低液体量，以保证所有蚂蚁的饲料。", "inputFormat": "第一行输入包含整数 $n$。\n\n以下 $n-1$ 行中的每一行包含四个整数 $a_i,b_i,x_i,t_i$，其中 $a_i$ 和 $b_i$ 是管道的末端（管道连接的节点的编号），$x_i$ 是液体通过管道的流量，$t_i$ 表示管道是否具有超能力。如果 $t_i$ 为 $1$，则该管道具有超能力，否则它不具有超能力。\n\n下一行包含 $n$ 个整数 $k_i$，用于描述第 $i$ 个节点中蚂蚁所需的液体量。如果第 $i$ 个节点不是叶，$k_i$ 将是 $-1$。", "outputFormat": "仅一行，即 $L$。\n\n**注意：本题采用 SPJ，与正确解的误差不超过 $10^{-3}$ 即视为正确。**", "hint": "#### 样例 1 说明\n\n如果 Bobi 向根节点中注入 $8$ 升液体，节点 $3$ 得到 $4$ 升，节点 $4$ 得到 $1$ 升，节点 $5$ 得到 $9$ 升。这些节点是叶子（其中有蚂蚁）中蚂蚁需要得到的最小数量。所以，$8$ 升是满足“蚂蚁”条件的最低液体量。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，都有 $1\\le n\\le 10^3$，$1\\le a_i,b_i\\le n$，$1\\le x_i\\le 100$，$t_i\\in\\{0,1\\}$，$k_i\\in[1,10]$。\n\n**数据保证 $L$ 的值不超过 $2\\times 10^9$。**\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T4 MRAVI_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #4] MRAVI", "background": "", "description": "Bobi 每天早上起床喂他最喜欢的宠物：蚂蚁。他把它们放在一个有管道系统的玻璃瓶中，管道系统可以表示为一棵有 $n$ 个节点的树。管道用树的边缘表示。树的根位于用 $1$ 表示的节点上。在管道系统内部，由于重力的作用，液体从节点流向其子节点。我们知道每个管道的流量 $x_i$：从父节点到子节点的流量百分比。让我们观察以下示例：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oi3ubdfd.png)\n\n图片中的节点 $1$ 有 $12$ 升液体，之后有两个管道。一个的流量是 $x_i=30$，另一个是 $x_i=70$。节点 $2$ 将得到 $3.6$ 升，节点 $3$ 得到 $8.4$ 升。在输入数据中，来自同一节点的管道流量之和始终等于 $100$。Bobi 的一些管子不只是普通的管子，它们有点奇怪。它们是超级管道，有超能力将流经它们的液体流量平方。在前面的例子中，如果第一个管道有超能力，节点 $2$ 得到 $12.96$ 升，节点 $3$ 仍然只有 $8.4$ 升。现在请注意，一个节点的流出液体比进入的液体多。这正是这些管道是超级管道的原因！\n\n所有的超级管道都可以由波比开启或关闭。蚂蚁只生活在树的叶子里（没有孩子的节点）。对于每一片叶子，我们知道需要多少液体来喂养生活在叶子里的蚂蚁。Bobi 想把 $L$ 升液体倒进树根里喂蚂蚁。他没有多少钱，所以他想知道他需要购买的最低液体量，以保证所有蚂蚁的饲料。", "inputFormat": "第一行输入包含整数 $n$。\n\n以下 $n-1$ 行中的每一行包含四个整数 $a_i,b_i,x_i,t_i$，其中 $a_i$ 和 $b_i$ 是管道的末端（管道连接的节点的编号），$x_i$ 是液体通过管道的流量，$t_i$ 表示管道是否具有超能力。如果 $t_i$ 为 $1$，则该管道具有超能力，否则它不具有超能力。\n\n下一行包含 $n$ 个整数 $k_i$，用于描述第 $i$ 个节点中蚂蚁所需的液体量。如果第 $i$ 个节点不是叶，$k_i$ 将是 $-1$。", "outputFormat": "仅一行，即 $L$。\n\n**注意：本题采用 SPJ，与正确解的误差不超过 $10^{-3}$ 即视为正确。**", "hint": "#### 样例 1 说明\n\n如果 Bobi 向根节点中注入 $8$ 升液体，节点 $3$ 得到 $4$ 升，节点 $4$ 得到 $1$ 升，节点 $5$ 得到 $9$ 升。这些节点是叶子（其中有蚂蚁）中蚂蚁需要得到的最小数量。所以，$8$ 升是满足“蚂蚁”条件的最低液体量。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，都有 $1\\le n\\le 10^3$，$1\\le a_i,b_i\\le n$，$1\\le x_i\\le 100$，$t_i\\in\\{0,1\\}$，$k_i\\in[1,10]$。\n\n**数据保证 $L$ 的值不超过 $2\\times 10^9$。**\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T4 MRAVI_。**", "locale": "zh-CN"}}}
{"pid": "P7178", "type": "P", "difficulty": 5, "samples": [["7\n2  1 2  7 3\n2  1 3  7 4\n2  1 4  7 5\n2  1 5  7 6\n2  1 6  7 2", "ABBBBBA"], ["10\n3  1 2  7 3  9 4\n3  1 3  7 4  9 5\n3  1 4  7 5  9 6\n3  1 5  7 6  9 8\n3  1 6  7 8  9 10", "ABBBBBAAAA"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["图论", "2014", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #4] SABOR", "background": "", "description": "一片遥远的土地上有 $n$ 名议员。他们就新全民公决法修正案进行了激烈的辩论。从周一到周五，所有议员都兴高采烈地来上班，整天争论不休。一位勤奋的新闻记者每周每个工作日都会在激烈的争论中拍摄议员们在工作场所的照片。她在照片上捕捉到的是一对相互怒视的议员。五张照片已转发给你作全面分析。事实上，每个议员都属于两个政党中的一个。让我们用字母 `A` 和 `B` 来表示两个政党。你的任务是估计每个议员属于哪个政党。你需要确保每个议员最多与**两位不同的**本政党中的议员争吵。", "inputFormat": "第一行输入包含整数 $n$，即议员的数量。议员从 $1$ 到 $n$ 编号。\n\n以下五行描述了从周一到周五拍摄的照片。五行中的每一行都包含了当天在照片上争论的两名议员的名单（相互怒视）。每一行的第一个数是 $p$，表示有 $p$ 议员在争吵，然后有 $p$ 对 `k l` 形式的数字，表示 $k$ 号议员和 $l$ 号议员在争吵。在每一对数字之前都有一个**双空格**。", "outputFormat": "仅一行，即一个长度为 $n$ 的仅由字符 `A` 和 `B` 组成的字符串，第 $i$ 个字符表示满足给定条件的分区中第 $i$ 个议员是哪个政党。因为答案不会是唯一的，所以输出**任何一种**。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，有 $1\\le n\\le 15$。\n- 对于 $100\\%$ 的数据，有 $1\\le n\\le 2\\times 10^5$。\n\n对于所有合法的 $p$，都有 $1\\le p\\le\\dfrac{n}{2}$。\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T5 SABOR_。**\n\n感谢 @[shenyouran](https://www.luogu.com.cn/user/137367) 提供的 SPJ。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #4] SABOR", "background": "", "description": "一片遥远的土地上有 $n$ 名议员。他们就新全民公决法修正案进行了激烈的辩论。从周一到周五，所有议员都兴高采烈地来上班，整天争论不休。一位勤奋的新闻记者每周每个工作日都会在激烈的争论中拍摄议员们在工作场所的照片。她在照片上捕捉到的是一对相互怒视的议员。五张照片已转发给你作全面分析。事实上，每个议员都属于两个政党中的一个。让我们用字母 `A` 和 `B` 来表示两个政党。你的任务是估计每个议员属于哪个政党。你需要确保每个议员最多与**两位不同的**本政党中的议员争吵。", "inputFormat": "第一行输入包含整数 $n$，即议员的数量。议员从 $1$ 到 $n$ 编号。\n\n以下五行描述了从周一到周五拍摄的照片。五行中的每一行都包含了当天在照片上争论的两名议员的名单（相互怒视）。每一行的第一个数是 $p$，表示有 $p$ 议员在争吵，然后有 $p$ 对 `k l` 形式的数字，表示 $k$ 号议员和 $l$ 号议员在争吵。在每一对数字之前都有一个**双空格**。", "outputFormat": "仅一行，即一个长度为 $n$ 的仅由字符 `A` 和 `B` 组成的字符串，第 $i$ 个字符表示满足给定条件的分区中第 $i$ 个议员是哪个政党。因为答案不会是唯一的，所以输出**任何一种**。", "hint": "#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，有 $1\\le n\\le 15$。\n- 对于 $100\\%$ 的数据，有 $1\\le n\\le 2\\times 10^5$。\n\n对于所有合法的 $p$，都有 $1\\le p\\le\\dfrac{n}{2}$。\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T5 SABOR_。**\n\n感谢 @[shenyouran](https://www.luogu.com.cn/user/137367) 提供的 SPJ。", "locale": "zh-CN"}}}
{"pid": "P7179", "type": "P", "difficulty": 5, "samples": [["3 3 2", "1"], ["2 2 2", "0"], ["2 3 4", "2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2014", "COCI（克罗地亚）"], "title": "[COCI 2014/2015 #4] STANOVI", "background": "", "description": "Stanko 在一家建筑公司做建筑师。他目前的任务是为萨格勒布的一栋住宅楼制定一个平面图。他必须确定一种方法，用墙将楼层建筑分割成矩形的公寓。每面墙必须与建筑物的侧面平行。更准确地说，楼层在平面图中表示为一个尺寸为 $n\\times m$ 的大矩形，其中每个公寓都是一个较小的矩形，尺寸为 $a\\times b$，位于较大的矩形的内部。数字 $a$ 和 $b$ 必须是整数。\n\n此外，楼层必须完全覆盖公寓——楼层中的每个点都必须位于公寓内。公寓不能交叉，但它们可以接触。为了防止室内黑暗，公寓必须有窗户。因此，每套公寓必须有一条在代表楼层的矩形边缘上的边，这样就可以放置一个窗户。\n\n此外，所有公寓的面积 $k$ 必须近似相等。尺寸为 $a\\times b$ 的公寓的面积偏差定义为 $(a\\times b-k)^2$。平面图的偏差是公寓所有偏差的总和。\n\nStanko 想建造他能建造的最好的建筑，一座偏差最小的建筑。帮助他并编写一个程序，以确定满足任务条件的平面图的最小可能偏差。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nmhy72yb.png)", "inputFormat": "仅一行三个整数 $n,m,k$。", "outputFormat": "一行，即公寓布局的最小可能偏差。", "hint": "#### 样例 1 说明\n\n该样例对应于题目描述的左图。请注意，不可能实现 $0$ 的偏差值。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n,m\\le 300$，$1\\le k\\le 10^4$。\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T6 STANOVI_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2014/2015 #4] STANOVI", "background": "", "description": "Stanko 在一家建筑公司做建筑师。他目前的任务是为萨格勒布的一栋住宅楼制定一个平面图。他必须确定一种方法，用墙将楼层建筑分割成矩形的公寓。每面墙必须与建筑物的侧面平行。更准确地说，楼层在平面图中表示为一个尺寸为 $n\\times m$ 的大矩形，其中每个公寓都是一个较小的矩形，尺寸为 $a\\times b$，位于较大的矩形的内部。数字 $a$ 和 $b$ 必须是整数。\n\n此外，楼层必须完全覆盖公寓——楼层中的每个点都必须位于公寓内。公寓不能交叉，但它们可以接触。为了防止室内黑暗，公寓必须有窗户。因此，每套公寓必须有一条在代表楼层的矩形边缘上的边，这样就可以放置一个窗户。\n\n此外，所有公寓的面积 $k$ 必须近似相等。尺寸为 $a\\times b$ 的公寓的面积偏差定义为 $(a\\times b-k)^2$。平面图的偏差是公寓所有偏差的总和。\n\nStanko 想建造他能建造的最好的建筑，一座偏差最小的建筑。帮助他并编写一个程序，以确定满足任务条件的平面图的最小可能偏差。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nmhy72yb.png)", "inputFormat": "仅一行三个整数 $n,m,k$。", "outputFormat": "一行，即公寓布局的最小可能偏差。", "hint": "#### 样例 1 说明\n\n该样例对应于题目描述的左图。请注意，不可能实现 $0$ 的偏差值。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n,m\\le 300$，$1\\le k\\le 10^4$。\n\n#### 说明\n\n**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T6 STANOVI_。**", "locale": "zh-CN"}}}
{"pid": "P7180", "type": "P", "difficulty": 6, "samples": [["17\nb\na\nb\nb\na\nb\na\na\nb\na\na\nb\na\na\nb\na\nb ", "4\n3\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2004", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2004] Repeats (Day2)", "background": null, "description": "如果字符串 $s$ 满足：\n\n- 对于一个数对 $(k,l)~(k\\ge 1,l\\ge 1)$。\n- $s$ 是由 $k$ 个长度为 $l$ 的字符串 $t$ 拼接成的。\n\n那么 $s$ 就被称作是一个 $(k,l)\\text{ - repeat}$ 串。\n\n如 $s=\\tt abaabaabaaba$ 就是一个 $t=\\tt aba$ 的 $(4,3)\\text{ - repeat}$ 串。\n\n对于一个字符串 $u$（仅含字符 $\\texttt a$ 和 $\\texttt b$），你需要找出其中的一段是 $(k,l)\\text{ - repeat}$ 串的**连续的**字符串，使 $k$ 尽可能大。\n\n例如 $u=\\tt babb\\underline{abaabaabaaba}b$，其中划线部分就是一个 $(4,3)\\text{ - repeat}$ 串，这时 $k$ 的值最大。", "inputFormat": "第一行一个整数 $n$，代表 $u$ 的长度。\n\n接下来 $n$ 行，每行一个字符（$\\texttt a$ 或 $\\texttt b$），表示这个字符串。", "outputFormat": "第一行一个数 $k$。\n\n第二行一个数 $l$。\n\n第三行一个数 $p$，表示这个 $(k,l)\\text{ - repeat}$ 串的开始位置（位置从 $1$ 开始）。\n\n**如果有多种情况，输出任意一种。**", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 5\\times 10^{4}$，$u_i\\in\\{\\tt a,b\\}$。\n\n#### 说明\n\n译自 [BalticOI 2004 Day2 A Repeats](https://boi.cses.fi/files/boi2004_day2.pdf)。\n\n特别感谢 @[Sprague_Garundy](https://www.luogu.com.cn/user/764746) 提供的 SPJ！", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2004] Repeats (Day2)", "background": null, "description": "如果字符串 $s$ 满足：\n\n- 对于一个数对 $(k,l)~(k\\ge 1,l\\ge 1)$。\n- $s$ 是由 $k$ 个长度为 $l$ 的字符串 $t$ 拼接成的。\n\n那么 $s$ 就被称作是一个 $(k,l)\\text{ - repeat}$ 串。\n\n如 $s=\\tt abaabaabaaba$ 就是一个 $t=\\tt aba$ 的 $(4,3)\\text{ - repeat}$ 串。\n\n对于一个字符串 $u$（仅含字符 $\\texttt a$ 和 $\\texttt b$），你需要找出其中的一段是 $(k,l)\\text{ - repeat}$ 串的**连续的**字符串，使 $k$ 尽可能大。\n\n例如 $u=\\tt babb\\underline{abaabaabaaba}b$，其中划线部分就是一个 $(4,3)\\text{ - repeat}$ 串，这时 $k$ 的值最大。", "inputFormat": "第一行一个整数 $n$，代表 $u$ 的长度。\n\n接下来 $n$ 行，每行一个字符（$\\texttt a$ 或 $\\texttt b$），表示这个字符串。", "outputFormat": "第一行一个数 $k$。\n\n第二行一个数 $l$。\n\n第三行一个数 $p$，表示这个 $(k,l)\\text{ - repeat}$ 串的开始位置（位置从 $1$ 开始）。\n\n**如果有多种情况，输出任意一种。**", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 5\\times 10^{4}$，$u_i\\in\\{\\tt a,b\\}$。\n\n#### 说明\n\n译自 [BalticOI 2004 Day2 A Repeats](https://boi.cses.fi/files/boi2004_day2.pdf)。\n\n特别感谢 @[Sprague_Garundy](https://www.luogu.com.cn/user/764746) 提供的 SPJ！", "locale": "zh-CN"}}}
{"pid": "P7181", "type": "P", "difficulty": 4, "samples": [["22 14 8\n1 8 7 11\n18 10 20 12\n17 1 19 7\n12 2 16 3\n16 7 19 9\n8 4 12 11\n7 4 9 6\n10 5 11 6", "5 22 12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2004", "离散化", "Special Judge", "差分", "BalticOI（波罗的海）"], "title": "[BalticOI 2004] Rectangles (Day2)", "background": null, "description": "平面上有 $n$ 个矩形。矩形边平行于坐标轴。这些长方形可以重叠、重合或相互分离。它们的顶点坐标 $(x,y)$ 中，$x,y$ 都是非负整数，横坐标不超过 $x_{\\max}$，纵坐标不超过 $y_{\\max}$。\n\n$A$ 点位于 $(0,0)$，若 $C(x_{\\max},0),D(0,y_{\\max}),E(x_{\\max},y_{\\max})$，则 $B$ 点位于线段 $CE$ 或 $DE$ 上。\n\n线段 $AB$ 可能与矩形相交（即使只与一个矩形**顶点**相交，也视为相交）。\n\n你需要找到一个 $B$ 点，使与线段 $AB$ 相交的矩形尽可能**多**。", "inputFormat": "第一行三个整数 $x_{\\max},y_{\\max},n$。\n\n接下来 $n$ 行，每行四个整数，分别表示第 $i$ 个矩形的左下角坐标与右上角坐标。", "outputFormat": "一行三个整数，分别为：\n- 最多的相交矩形数；\n- 此时 $B$ 点坐标。\n\n如果有多种方案，输出**任意一种**。", "hint": "#### 样例 1 说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n987wmyr.png)\n\n输出也可以为 `5 22 11`。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^4$，$0\\le x_{\\max},y_{\\max}\\le 10^9$。\n\n#### 说明\n\n译自 [BalticOI 2004 Day2 B Rectangles](https://boi.cses.fi/files/boi2004_day2.pdf)。\n\n#### 特别感谢\n\n感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的 SPJ！", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2004] Rectangles (Day2)", "background": null, "description": "平面上有 $n$ 个矩形。矩形边平行于坐标轴。这些长方形可以重叠、重合或相互分离。它们的顶点坐标 $(x,y)$ 中，$x,y$ 都是非负整数，横坐标不超过 $x_{\\max}$，纵坐标不超过 $y_{\\max}$。\n\n$A$ 点位于 $(0,0)$，若 $C(x_{\\max},0),D(0,y_{\\max}),E(x_{\\max},y_{\\max})$，则 $B$ 点位于线段 $CE$ 或 $DE$ 上。\n\n线段 $AB$ 可能与矩形相交（即使只与一个矩形**顶点**相交，也视为相交）。\n\n你需要找到一个 $B$ 点，使与线段 $AB$ 相交的矩形尽可能**多**。", "inputFormat": "第一行三个整数 $x_{\\max},y_{\\max},n$。\n\n接下来 $n$ 行，每行四个整数，分别表示第 $i$ 个矩形的左下角坐标与右上角坐标。", "outputFormat": "一行三个整数，分别为：\n- 最多的相交矩形数；\n- 此时 $B$ 点坐标。\n\n如果有多种方案，输出**任意一种**。", "hint": "#### 样例 1 说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n987wmyr.png)\n\n输出也可以为 `5 22 11`。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^4$，$0\\le x_{\\max},y_{\\max}\\le 10^9$。\n\n#### 说明\n\n译自 [BalticOI 2004 Day2 B Rectangles](https://boi.cses.fi/files/boi2004_day2.pdf)。\n\n#### 特别感谢\n\n感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的 SPJ！", "locale": "zh-CN"}}}
{"pid": "P7182", "type": "P", "difficulty": 0, "samples": [["8\n2 1 2 3\n2 1 1 1\n2 0 1 5\n2 1 5 5\n3 0 6 1\n3 0 1 2\n3 0 4 2\n3 1 3 6", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2004", "BalticOI（波罗的海）"], "title": "[BalticOI 2004] Car Park (Day2)", "background": null, "description": "举办 BOI2004 的青年旅社有一个停车场，由 $6\\times 6$ 的方格组成。行从 $1$ 到 $6$ 从上到下连续编号；列从左到右，编号方法相同。\n\n只有停车场第三排第六列有一个出口。\n\n在那个停车场上，有 $n$ 辆停着的车。你的车在这些车中，但不幸的是，由于你的车被另一辆车挡住了，你的汽车不能直接出去。你与你的朋友可以移动汽车。但是无论是你自己的车还是其他车都不能转向或转弯。\n\n你需要确定使你的 $2\\times 1$ 方格车（编号为 $1$）离开停车场所需的最小步数。一步意味着把一辆车移动一个方格。其他车辆不得驶离停车场。\n\n只有两种车，$2\\times 1$ 方格车和 $3\\times 1$ 方格车。汽车只能沿它长的一条边所在的轴移动。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行四个整数 $l,opt,x,y$，分别表示汽车长度、停放的方向（纵向为 `0`，横向为 `1`）、汽车左上角坐标。", "outputFormat": "仅一行一个整数，表示使车离开停车场所需的最小步数。\n\n如果不能使车离开，输出 `-1`。", "hint": "#### 样例 1 说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m0jylu1y.png)\n\n步骤（编号 $+$ 移动步骤）：\n- $4\\gets\\gets\\gets$；\n- $2\\to$；\n- $6\\uparrow$；\n- $3\\uparrow$；\n- $8\\gets\\gets$；\n- $5\\downarrow\\downarrow\\downarrow$；\n- $7\\downarrow\\downarrow$；\n- $1\\to\\to\\to\\to\\to$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 16$，$opt\\in\\{0,1\\}$，$l\\in\\{2,3\\}$，$1\\le x,y\\le 6$。\n\n#### 说明\n\n译自 [BalticOI 2004 Day2 C Car Park](https://boi.cses.fi/files/boi2004_day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2004] Car Park (Day2)", "background": null, "description": "举办 BOI2004 的青年旅社有一个停车场，由 $6\\times 6$ 的方格组成。行从 $1$ 到 $6$ 从上到下连续编号；列从左到右，编号方法相同。\n\n只有停车场第三排第六列有一个出口。\n\n在那个停车场上，有 $n$ 辆停着的车。你的车在这些车中，但不幸的是，由于你的车被另一辆车挡住了，你的汽车不能直接出去。你与你的朋友可以移动汽车。但是无论是你自己的车还是其他车都不能转向或转弯。\n\n你需要确定使你的 $2\\times 1$ 方格车（编号为 $1$）离开停车场所需的最小步数。一步意味着把一辆车移动一个方格。其他车辆不得驶离停车场。\n\n只有两种车，$2\\times 1$ 方格车和 $3\\times 1$ 方格车。汽车只能沿它长的一条边所在的轴移动。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行四个整数 $l,opt,x,y$，分别表示汽车长度、停放的方向（纵向为 `0`，横向为 `1`）、汽车左上角坐标。", "outputFormat": "仅一行一个整数，表示使车离开停车场所需的最小步数。\n\n如果不能使车离开，输出 `-1`。", "hint": "#### 样例 1 说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m0jylu1y.png)\n\n步骤（编号 $+$ 移动步骤）：\n- $4\\gets\\gets\\gets$；\n- $2\\to$；\n- $6\\uparrow$；\n- $3\\uparrow$；\n- $8\\gets\\gets$；\n- $5\\downarrow\\downarrow\\downarrow$；\n- $7\\downarrow\\downarrow$；\n- $1\\to\\to\\to\\to\\to$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 16$，$opt\\in\\{0,1\\}$，$l\\in\\{2,3\\}$，$1\\le x,y\\le 6$。\n\n#### 说明\n\n译自 [BalticOI 2004 Day2 C Car Park](https://boi.cses.fi/files/boi2004_day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7183", "type": "P", "difficulty": 2, "samples": [["Abcd \n", "0"], ["EaEbFabG \n", "5"], ["AbcbBccCDefgh \n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["模拟", "2009", "枚举", "COCI（克罗地亚）"], "title": "[CRCI2008-2009] NOP", "background": "", "description": "Mirko 购买了新的微处理器。\n\n不幸的是，他发现为旧处理器编写的许多程序在新处理器上无法运行。\n\n在深入了解这两种处理器说明书后，他发现了原因。 \n\n为了更快地工作，新处理器对程序的机器代码施加了某些约束，而这些约束在以前的模型中是不存在的。\n\n处理器的机器代码由顺序执行的指令组成。 每个指令使用一个字节的存储器。 \n\n同样，指令可以具有 $0$ 个或多个参数，每个参数都使用一个额外的内存字节。在机器代码中，参数紧随指令之后。\n\n当设置为文本格式时，机器代码指令为大写字母，而参数为小写字母。 例如：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1581jsvp.png)\n\n该程序由四个指令组成：第 $1$ 个使用三个参数，第 $2$ 个使用两个参数，第 $3$ 个不使用，第四个使用四个参数。 该程序使用 $13$ 个字节的内存。\n\n新的处理器模型以四字节的块为单位获取内存，因此每条指令必须从可被四整除的内存地址开始（内存中的第一个字节为地址 $0$）。 \n\n我们可以将 `NOP`（No Operation，即无操作）指令插入旧程序中，这些指令不执行任何操作。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a1y7fo0r.png)\n\n\n指令 $A$，$B$，$C$ 和 $D$ 现在位于内存位置 $0$、$4$、$8$ 和 $12$，这满足了处理器的约束。\n\n请你编程求出最少需要插入的 `NOP` 数量。", "inputFormat": "一行一个字符串 $s$，表示旧处理器模型编写的程序的机器代码。 \n\n该程序将始终以 $1$ 条指令开始，即机器码中的第一个大写字母。 如果一条指令在机器代码中多次出现，则它将始终使用相同数量的参数。", "outputFormat": "一行一个正整数 $ans$，表示最少需要插入的 `NOP` 数量。", "hint": "#### 数据规模及约定\n\n令 $|s|$ 为字符串 $s$ 的字符数，对于 $100\\%$ 的数据，$1\\le |s| \\le 200$。 \n\n#### 说明\n- 本题满分 $30$ 分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) NOP，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CRCI2008-2009] NOP", "background": "", "description": "Mirko 购买了新的微处理器。\n\n不幸的是，他发现为旧处理器编写的许多程序在新处理器上无法运行。\n\n在深入了解这两种处理器说明书后，他发现了原因。 \n\n为了更快地工作，新处理器对程序的机器代码施加了某些约束，而这些约束在以前的模型中是不存在的。\n\n处理器的机器代码由顺序执行的指令组成。 每个指令使用一个字节的存储器。 \n\n同样，指令可以具有 $0$ 个或多个参数，每个参数都使用一个额外的内存字节。在机器代码中，参数紧随指令之后。\n\n当设置为文本格式时，机器代码指令为大写字母，而参数为小写字母。 例如：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1581jsvp.png)\n\n该程序由四个指令组成：第 $1$ 个使用三个参数，第 $2$ 个使用两个参数，第 $3$ 个不使用，第四个使用四个参数。 该程序使用 $13$ 个字节的内存。\n\n新的处理器模型以四字节的块为单位获取内存，因此每条指令必须从可被四整除的内存地址开始（内存中的第一个字节为地址 $0$）。 \n\n我们可以将 `NOP`（No Operation，即无操作）指令插入旧程序中，这些指令不执行任何操作。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a1y7fo0r.png)\n\n\n指令 $A$，$B$，$C$ 和 $D$ 现在位于内存位置 $0$、$4$、$8$ 和 $12$，这满足了处理器的约束。\n\n请你编程求出最少需要插入的 `NOP` 数量。", "inputFormat": "一行一个字符串 $s$，表示旧处理器模型编写的程序的机器代码。 \n\n该程序将始终以 $1$ 条指令开始，即机器码中的第一个大写字母。 如果一条指令在机器代码中多次出现，则它将始终使用相同数量的参数。", "outputFormat": "一行一个正整数 $ans$，表示最少需要插入的 `NOP` 数量。", "hint": "#### 数据规模及约定\n\n令 $|s|$ 为字符串 $s$ 的字符数，对于 $100\\%$ 的数据，$1\\le |s| \\le 200$。 \n\n#### 说明\n- 本题满分 $30$ 分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) NOP，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN"}}}
{"pid": "P7184", "type": "P", "difficulty": 2, "samples": [["5\nSSPPR\n1\nSSPPR \n", "5\n10"], ["5\nSSPPR\n2\nPPRRS\nRRSSP \n", "10\n15"], ["4\nSPRS\n4\nRPRP\nSRRR\nSSPR\nPSPS \n", "12\n21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["模拟", "2009", "COCI（克罗地亚）"], "title": "[CRCI2008-2009] MAJSTOR", "background": "剪刀石头布是一种流行的两人游戏。", "description": "在游戏中，两人都用自己的手出示三个手势之一：石头，布或剪刀。 \n\n如果两个玩家出示相同的手势，则该游戏为平局。否则，剪刀胜布，布胜石头，而石头胜剪刀。\n\nSven 多年来一直在研究游戏的心理错综复杂性，并已成为游戏的真正大师，他的朋友们在一对一的游戏中没有与他抗衡的机会。\n\n随着世界锦标赛的临近，Sven 正在与 $n$ 个朋友同时玩游戏，以练习他的技能。 \n\n游戏有 $r$ 轮，在每一轮中，Sven 和他的每个朋友出三种手势之一。\n\n计分规则：\n\n- Sven 获胜，得 $2$ 分。\n- 平局，得 $1$ 分。\n- 对手获胜，得 $0$ 分。\n\n编写一个程序来计算 Sven 的总得分，如果他事先知道他的朋友会出的所有手势，那么他最大得分也是可能的。", "inputFormat": "第一行，一个正整数 $r$，表示比赛轮数。\n\n第二行，$r$ 个字符，第 $i$ 个字符表示 Sven 在第 $i$ 局出的手势，只可能是 `S`（剪刀），`P`（布），`R`（石头）。\n\n第三行，一个正整数 $n$，表示他的朋友数。\n\n接下来 $n$ 行，每行都有 $r$ 个字符，第 $j$ 个字符表示 Sven 的第 $i$ 个朋友在第 $j$ 局出的手势，只可能是 `S`（剪刀），`P`（布），`R`（石头）。", "outputFormat": "第一行，输出 Sven 的实际分数。\n\n假设他的朋友没有改变他们的手势，则在第二行输出他最大的得分。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le n, r \\le 50$。\n#### 说明\n- 本题满分 $50$ 分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) MAJSTOR，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CRCI2008-2009] MAJSTOR", "background": "剪刀石头布是一种流行的两人游戏。", "description": "在游戏中，两人都用自己的手出示三个手势之一：石头，布或剪刀。 \n\n如果两个玩家出示相同的手势，则该游戏为平局。否则，剪刀胜布，布胜石头，而石头胜剪刀。\n\nSven 多年来一直在研究游戏的心理错综复杂性，并已成为游戏的真正大师，他的朋友们在一对一的游戏中没有与他抗衡的机会。\n\n随着世界锦标赛的临近，Sven 正在与 $n$ 个朋友同时玩游戏，以练习他的技能。 \n\n游戏有 $r$ 轮，在每一轮中，Sven 和他的每个朋友出三种手势之一。\n\n计分规则：\n\n- Sven 获胜，得 $2$ 分。\n- 平局，得 $1$ 分。\n- 对手获胜，得 $0$ 分。\n\n编写一个程序来计算 Sven 的总得分，如果他事先知道他的朋友会出的所有手势，那么他最大得分也是可能的。", "inputFormat": "第一行，一个正整数 $r$，表示比赛轮数。\n\n第二行，$r$ 个字符，第 $i$ 个字符表示 Sven 在第 $i$ 局出的手势，只可能是 `S`（剪刀），`P`（布），`R`（石头）。\n\n第三行，一个正整数 $n$，表示他的朋友数。\n\n接下来 $n$ 行，每行都有 $r$ 个字符，第 $j$ 个字符表示 Sven 的第 $i$ 个朋友在第 $j$ 局出的手势，只可能是 `S`（剪刀），`P`（布），`R`（石头）。", "outputFormat": "第一行，输出 Sven 的实际分数。\n\n假设他的朋友没有改变他们的手势，则在第二行输出他最大的得分。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le n, r \\le 50$。\n#### 说明\n- 本题满分 $50$ 分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) MAJSTOR，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN"}}}
{"pid": "P7185", "type": "P", "difficulty": 4, "samples": [["3 7\n.......\n.M-.-Z.\n....... \n", "2 4 - \n"], ["3 5\n..1-M\n1-+..\nZ.23. \n", "2 4 4\n"], ["6 10\nZ.1----4..\n|.|....|..\n|..14..M..\n2-+++4....\n..2323....\n.......... \n", "3 3 |"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2009", "COCI（克罗地亚）"], "title": "[CRCI2008-2009] CIJEVI", "background": "", "description": "为了帮助设计天然气管道，克罗地亚和莫斯科正在使用电脑游戏「管道狂热」。\n\n在游戏中，欧洲分为 $R$ 行和 $C$ 列。每个单元格可以为空，也可以包含七个基本管道构建块之一：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r3k1hpsp.png)\n气体可以通过构建块沿任一方向流动。 构建块 `+` 的特殊之处在于气体必须沿两个方向（一个垂直方向，一个水平方向）流动，如以下示例所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/te8dolym.png)\n\n当黑客从计划中删除了一个构建块时，但新管道已经开始投入使用。\n\n编写一个程序，确定被删除构建块的位置和它的类型。", "inputFormat": "第一行，两个整数 $R$ 和 $C$，表示欧洲的面积。\n\n接下来，$R$ 行，表示该计划，字符有：\n\n- `.`， 表示空单元格\n- `|`，`-`，`+`，`1`，`2`，`3`，`4`，表示构件类型（见图 $1$）；\n- `M`，表示莫斯科。\n- `Z`，表示克罗地亚。\n\n**数据保证 `M` 和 `Z` 仅出现一次。**\n\n\n莫斯科和克罗地亚的每一个都将恰好有一个构建块。 此外，该计划将没有冗余构建块，即在添加丢失的块之后必须使用计划中的所有块。\n\n输入将保证解决方案存在并且是唯一的。", "outputFormat": "输出被擦除块的行和列，以及块的类型（输入中的 $7$ 个字符 `|`，`-`，`+`，`1`，`2`，`3`，`4` 之一）。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le R, C \\le 25$。\n#### 说明\n- 本题满分 $70$ 分。\n- Subtask 1 为 hack 数据，不计分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) CIJEVI，译者 @[tearing](https://www.luogu.com.cn/user/219791)。\n- 2023.11.17 添加一组 hack 数据。\n- 2024.02.16 再添加一组 hack 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CRCI2008-2009] CIJEVI", "background": "", "description": "为了帮助设计天然气管道，克罗地亚和莫斯科正在使用电脑游戏「管道狂热」。\n\n在游戏中，欧洲分为 $R$ 行和 $C$ 列。每个单元格可以为空，也可以包含七个基本管道构建块之一：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r3k1hpsp.png)\n气体可以通过构建块沿任一方向流动。 构建块 `+` 的特殊之处在于气体必须沿两个方向（一个垂直方向，一个水平方向）流动，如以下示例所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/te8dolym.png)\n\n当黑客从计划中删除了一个构建块时，但新管道已经开始投入使用。\n\n编写一个程序，确定被删除构建块的位置和它的类型。", "inputFormat": "第一行，两个整数 $R$ 和 $C$，表示欧洲的面积。\n\n接下来，$R$ 行，表示该计划，字符有：\n\n- `.`， 表示空单元格\n- `|`，`-`，`+`，`1`，`2`，`3`，`4`，表示构件类型（见图 $1$）；\n- `M`，表示莫斯科。\n- `Z`，表示克罗地亚。\n\n**数据保证 `M` 和 `Z` 仅出现一次。**\n\n\n莫斯科和克罗地亚的每一个都将恰好有一个构建块。 此外，该计划将没有冗余构建块，即在添加丢失的块之后必须使用计划中的所有块。\n\n输入将保证解决方案存在并且是唯一的。", "outputFormat": "输出被擦除块的行和列，以及块的类型（输入中的 $7$ 个字符 `|`，`-`，`+`，`1`，`2`，`3`，`4` 之一）。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le R, C \\le 25$。\n#### 说明\n- 本题满分 $70$ 分。\n- Subtask 1 为 hack 数据，不计分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) CIJEVI，译者 @[tearing](https://www.luogu.com.cn/user/219791)。\n- 2023.11.17 添加一组 hack 数据。\n- 2024.02.16 再添加一组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P7186", "type": "P", "difficulty": 3, "samples": [["4 1\n6 3 4\n", "3"], ["4 2\n6 3 4\n6 2 2 \n", "3\n5"], ["5 3\n1 2 2\n2 2 2\n12 5 5\n", "2\n5\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["模拟", "2009", "COCI（克罗地亚）"], "title": "[CRCI2008-2009] TABLICA", "background": "", "description": "小 Q 有一张 $N \\times N$ 的表格。若 $N = 4$，那么他将 $1$ 填入第一列第一行，$2$ 填入第二列第一行，$\\cdots$，$5$ 填入第一列第二行，$\\cdots$，$15$ 填入第三列第四行，$16$ 填入第四列第四行。\n\n现在，小 Q 对该表格作如下操作：\n1. 移动行：向右移动一行中的所有单元格，以使最后一列中的数字移到第一列。\n\n2. 移动列：向下移动一列中的所有单元格，以使最后一行中的数字移到第一行。\n\n小 Q 想把一个数字 $X$ 移到单元格 $(R,C)$，于是进行如下操作：\n\n- 当 $X$ 不在第 $C$ 列时，移动它所在的行。\n- 当 $X$ 不在第 $R$ 行时，移动它所在的列。\n\n下面是一个如何将数字 $6$ 移动到单元格 $(3, 4)$ 的例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6pu31i7e.png)\n\n小 Q 想移动 $K$ 个数字，问至少要进行多少次操作。", "inputFormat": "第一行，两个正整数 $N$ 和 $K$，分别表示表格大小和移动次数。\n\n接下来，$K$ 行，对于每一行：\n\n- 三个整数 $X, R, C$，含义见题目描述。", "outputFormat": "共 $K$ 行，对于每一行：\n\n- 对每个询问，输出至少移动的次数。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据：$2 \\le N \\le 10^4$，$1 \\le K \\le 10^3$，$1 \\le X \\le N^2$，$1\\le R,C \\le N$。\n\n#### 说明\n- 本题满分 $100$ 分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) TABLICA，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CRCI2008-2009] TABLICA", "background": "", "description": "小 Q 有一张 $N \\times N$ 的表格。若 $N = 4$，那么他将 $1$ 填入第一列第一行，$2$ 填入第二列第一行，$\\cdots$，$5$ 填入第一列第二行，$\\cdots$，$15$ 填入第三列第四行，$16$ 填入第四列第四行。\n\n现在，小 Q 对该表格作如下操作：\n1. 移动行：向右移动一行中的所有单元格，以使最后一列中的数字移到第一列。\n\n2. 移动列：向下移动一列中的所有单元格，以使最后一行中的数字移到第一行。\n\n小 Q 想把一个数字 $X$ 移到单元格 $(R,C)$，于是进行如下操作：\n\n- 当 $X$ 不在第 $C$ 列时，移动它所在的行。\n- 当 $X$ 不在第 $R$ 行时，移动它所在的列。\n\n下面是一个如何将数字 $6$ 移动到单元格 $(3, 4)$ 的例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6pu31i7e.png)\n\n小 Q 想移动 $K$ 个数字，问至少要进行多少次操作。", "inputFormat": "第一行，两个正整数 $N$ 和 $K$，分别表示表格大小和移动次数。\n\n接下来，$K$ 行，对于每一行：\n\n- 三个整数 $X, R, C$，含义见题目描述。", "outputFormat": "共 $K$ 行，对于每一行：\n\n- 对每个询问，输出至少移动的次数。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据：$2 \\le N \\le 10^4$，$1 \\le K \\le 10^3$，$1 \\le X \\le N^2$，$1\\le R,C \\le N$。\n\n#### 说明\n- 本题满分 $100$ 分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) TABLICA，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN"}}}
{"pid": "P7187", "type": "P", "difficulty": 4, "samples": [["5 6\n......\n..xx..\n..x...\n..xx..\n.xxxx.\n1\n3 \n", "......\n......\n..xx..\n..xx..\n.xxxx. "], ["8 8\n........\n........\n...x.xx.\n...xxx..\n..xxx...\n..x.xxx.\n..x...x.\n.xxx..x.\n5\n6 6 4 3 1 \n", "........\n........\n........\n........\n.....x..\n..xxxx..\n..xxx.x.\n..xxxxx. "], ["7 6\n......\n......\nxx....\n.xx...\n..xx..\n...xx.\n....x.\n2\n6 4 \n", "......\n......\n......\n......\n..xx..\nxx.xx.\n.x..x. "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768]}, "tags": ["模拟", "2009", "COCI（克罗地亚）"], "title": "[CRCI2008-2009] RELJEF", "background": "", "description": "两组穴居人发生了土地纠纷，决定用老办法解决——互相扔棍子。争斗是在一个山洞里发生的，这个山洞很高，所以不用担心棍子飞得太高，但是地面上的矿藏却会妨碍棍子的飞行。\n\n洞可以划分为 $r$ 行和 $c$ 列，所以整个洞口由 $r \\times c$ 个单元格组成（可当作一个竖直的平面）。\n\n洞穴中的每一个单元格要么是空的，要么含有一块矿物块。如果两块矿物块在四个主要方向（上、下、左、右）中的一个方向上相邻，则判定它们属于同一矿群。\n\n争斗开始时，一组穴居人在山洞的左侧，另一组穴居人则在右侧。这两组人轮流向另一组人投掷棍子，先由一组人选择棍子飞行的高度，然后（必要时爬到别人的肩膀上）投掷，棍子将在选定的高度上水平飞过洞穴。\n\n如果棍子在路上撞到了一块矿物块，该单元格处的矿物块将被击碎（即不复存在），棍子也将同时掉落至地面而停止飞行。\n\n当一个矿物块被击碎后，与其相连的矿物块群可能因不再有矿物块与其相连作为支撑物而因重力向地面坠落。在下落的过程中，矿物块群不会改变形状，即其中所有的矿物块将会一起下落。如果下落时某个矿物块落在地面上，整个矿物块群就会停止下落并成为一个新产生的矿物块。特别地，如果一个矿物块落在另一个矿物块上，它们就会合并成为一个矿物块。\n\n现在已知洞穴中矿物块的布局和扔棍子的高度，请确定这场争斗结束后，洞内的矿物布局。", "inputFormat": "第一行，两个整数 $r$, $c$，含义见题目描述。\n\n接下来是一个字符表，共有 $r$ 行 $c$ 列。其中，`.` 代表一个空单元格，`x` 代表一个含有矿物块的单元格。\n\n接下来一行，一个正整数 $n$，表示木棍数。\n\n最后一行，$n$ 个整数，表示棍棒的投掷高度。高度 $1$ 为矩阵的底部，高度 $r$ 为顶部。 第一根棍将从左向右飞行，第二根则从右向左飞行，以此类推。", "outputFormat": "共 $r$ 行，每行 $c$ 个字符，表示洞穴的最终布局。", "hint": "#### 样例 #2 解释\n第一根木棍将第 $4$ 列高度为 $6$ 的矿物块击碎，未使任何矿物块失去支撑而下落；\n\n第二根木棍将第 $7$ 列高度为 $6$ 的矿物块击碎，未使任何矿物块失去支撑而下落；\n\n第三根木棍将第 $3$ 列高度为 $4$ 的矿物块击碎，使第 $4$ 列高度为 $4$ 和 $5$ 的两个矿物块下落直至与该列高度为 $1$ 的矿物块合并；\n\n第四根木棍将第 $7$ 列高度为 $3$ 的矿物块击碎，使第 $6$ 列高度为 $3$ 的矿物块连带着第 $5$ 列高度为 $3$，$4$，$5$ 的矿物块以及第 $6$ 列高度为 $6$ 的矿物块一起下落直至落至地面；\n\n第五根木棍将第 $2$ 列高度为 $1$ 的矿物块击碎，未使任何矿物块失去支撑而下落。\n\n#### 数据规模及约定\n- 对于 $100\\%$ 的数据，$1\\le r,c,n \\le 100$。\n- 对于 $100\\%$ 的数据，保证初始状态下不会有任何一个碎块群漂浮在空中，且在任何时间点都不会有两个或两个以上的碎块群同时落下。\n#### 说明\n- 本题满分 $120$ 分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) RELJEF，@[tearing](https://www.luogu.com.cn/user/219791) 作了主要的翻译工作，@[mnesia](https://www.luogu.com.cn/user/115711) 进行了润色以及对样例 #2 的解释进行了翻译。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CRCI2008-2009] RELJEF", "background": "", "description": "两组穴居人发生了土地纠纷，决定用老办法解决——互相扔棍子。争斗是在一个山洞里发生的，这个山洞很高，所以不用担心棍子飞得太高，但是地面上的矿藏却会妨碍棍子的飞行。\n\n洞可以划分为 $r$ 行和 $c$ 列，所以整个洞口由 $r \\times c$ 个单元格组成（可当作一个竖直的平面）。\n\n洞穴中的每一个单元格要么是空的，要么含有一块矿物块。如果两块矿物块在四个主要方向（上、下、左、右）中的一个方向上相邻，则判定它们属于同一矿群。\n\n争斗开始时，一组穴居人在山洞的左侧，另一组穴居人则在右侧。这两组人轮流向另一组人投掷棍子，先由一组人选择棍子飞行的高度，然后（必要时爬到别人的肩膀上）投掷，棍子将在选定的高度上水平飞过洞穴。\n\n如果棍子在路上撞到了一块矿物块，该单元格处的矿物块将被击碎（即不复存在），棍子也将同时掉落至地面而停止飞行。\n\n当一个矿物块被击碎后，与其相连的矿物块群可能因不再有矿物块与其相连作为支撑物而因重力向地面坠落。在下落的过程中，矿物块群不会改变形状，即其中所有的矿物块将会一起下落。如果下落时某个矿物块落在地面上，整个矿物块群就会停止下落并成为一个新产生的矿物块。特别地，如果一个矿物块落在另一个矿物块上，它们就会合并成为一个矿物块。\n\n现在已知洞穴中矿物块的布局和扔棍子的高度，请确定这场争斗结束后，洞内的矿物布局。", "inputFormat": "第一行，两个整数 $r$, $c$，含义见题目描述。\n\n接下来是一个字符表，共有 $r$ 行 $c$ 列。其中，`.` 代表一个空单元格，`x` 代表一个含有矿物块的单元格。\n\n接下来一行，一个正整数 $n$，表示木棍数。\n\n最后一行，$n$ 个整数，表示棍棒的投掷高度。高度 $1$ 为矩阵的底部，高度 $r$ 为顶部。 第一根棍将从左向右飞行，第二根则从右向左飞行，以此类推。", "outputFormat": "共 $r$ 行，每行 $c$ 个字符，表示洞穴的最终布局。", "hint": "#### 样例 #2 解释\n第一根木棍将第 $4$ 列高度为 $6$ 的矿物块击碎，未使任何矿物块失去支撑而下落；\n\n第二根木棍将第 $7$ 列高度为 $6$ 的矿物块击碎，未使任何矿物块失去支撑而下落；\n\n第三根木棍将第 $3$ 列高度为 $4$ 的矿物块击碎，使第 $4$ 列高度为 $4$ 和 $5$ 的两个矿物块下落直至与该列高度为 $1$ 的矿物块合并；\n\n第四根木棍将第 $7$ 列高度为 $3$ 的矿物块击碎，使第 $6$ 列高度为 $3$ 的矿物块连带着第 $5$ 列高度为 $3$，$4$，$5$ 的矿物块以及第 $6$ 列高度为 $6$ 的矿物块一起下落直至落至地面；\n\n第五根木棍将第 $2$ 列高度为 $1$ 的矿物块击碎，未使任何矿物块失去支撑而下落。\n\n#### 数据规模及约定\n- 对于 $100\\%$ 的数据，$1\\le r,c,n \\le 100$。\n- 对于 $100\\%$ 的数据，保证初始状态下不会有任何一个碎块群漂浮在空中，且在任何时间点都不会有两个或两个以上的碎块群同时落下。\n#### 说明\n- 本题满分 $120$ 分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) RELJEF，@[tearing](https://www.luogu.com.cn/user/219791) 作了主要的翻译工作，@[mnesia](https://www.luogu.com.cn/user/115711) 进行了润色以及对样例 #2 的解释进行了翻译。", "locale": "zh-CN"}}}
{"pid": "P7188", "type": "P", "difficulty": 4, "samples": [["4\n1 4\n3 7\n1 6\n2 6 \n", "0\n1\n1\n2 \n"], ["5\n1 3\n3 5\n3 9\n2 4\n3 8 \n", "0\n0\n0\n3\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2009", "线段树", "树状数组", "COCI（克罗地亚）"], "title": "[CRCI2008-2009] CVJETICI", "background": "", "description": "在一个遥远的星球上，发现了一种有两根茎的奇怪植物。\n\n行星上的每个植物都可以用 $3$ 个数进行描述：茎 $L$， $R$ 的 $x$ 坐标，以及茎连接的高度 $H$。 以下给出的图像描绘了 $L = 2$， $R = 5$， $H = 4$ 时的植物：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/minsz1os.png)\n\n每天，这个星球上都有新植物生长起来。在第 $1$ 天生长的植物，其高度为 $1$，之后每一天长出来的每株植物高度都比前一天长出来的植物高。\n\n当一株植物的茎与另一株植物连接两根茎的的水平线相交时，交点处就会长出一朵小花（该处有小花时除外）。**有一种情况例外**：如果交点处成 ``T`` 字构形，即一株植物的茎与另一株植物的茎重合时，交点处将不会长出小花。下面是一些示例：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8u3bniul.png)\n\n在给出所有植物坐标的情况下，请求出每天长出的小花的数量。", "inputFormat": "第一行，一个正整数 $n$，表示天数。\n\n接下来，$n$ 行中，每行两个整数 $L_i$ 和 $R_i$，表示某一天长出的植物的两根茎的坐标。", "outputFormat": "共 $n$ 行，每行一个正整数，依次表示第 $n$ 天时长出的小花数量。\n", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le L_i < R_i \\le 10^5$。\n#### 说明\n- 本题满分 $130$ 分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) CVJETICI，@[tearing](https://www.luogu.com.cn/user/219791) 作了主要的翻译工作，@[mnesia](https://www.luogu.com.cn/user/115711) 进行了润色。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CRCI2008-2009] CVJETICI", "background": "", "description": "在一个遥远的星球上，发现了一种有两根茎的奇怪植物。\n\n行星上的每个植物都可以用 $3$ 个数进行描述：茎 $L$， $R$ 的 $x$ 坐标，以及茎连接的高度 $H$。 以下给出的图像描绘了 $L = 2$， $R = 5$， $H = 4$ 时的植物：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/minsz1os.png)\n\n每天，这个星球上都有新植物生长起来。在第 $1$ 天生长的植物，其高度为 $1$，之后每一天长出来的每株植物高度都比前一天长出来的植物高。\n\n当一株植物的茎与另一株植物连接两根茎的的水平线相交时，交点处就会长出一朵小花（该处有小花时除外）。**有一种情况例外**：如果交点处成 ``T`` 字构形，即一株植物的茎与另一株植物的茎重合时，交点处将不会长出小花。下面是一些示例：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8u3bniul.png)\n\n在给出所有植物坐标的情况下，请求出每天长出的小花的数量。", "inputFormat": "第一行，一个正整数 $n$，表示天数。\n\n接下来，$n$ 行中，每行两个整数 $L_i$ 和 $R_i$，表示某一天长出的植物的两根茎的坐标。", "outputFormat": "共 $n$ 行，每行一个正整数，依次表示第 $n$ 天时长出的小花数量。\n", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le L_i < R_i \\le 10^5$。\n#### 说明\n- 本题满分 $130$ 分。\n- 本题译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) CVJETICI，@[tearing](https://www.luogu.com.cn/user/219791) 作了主要的翻译工作，@[mnesia](https://www.luogu.com.cn/user/115711) 进行了润色。", "locale": "zh-CN"}}}
{"pid": "P7189", "type": "P", "difficulty": 1, "samples": [["5 3 1\n1 6\n3 5\n2 8 \n", "33"], ["10 8 6\n15 30\n25 50\n70 80 \n", "480"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2007", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2007/2008 #6] PARKING", "background": "", "description": "Luka 毕业了，他找到了驾驶卡车的工作。 \n\n一天晚上，他将 $3$ 辆卡车停在一个停车场，收费方式如下：\n\n- 停放一辆卡车时，司机每分钟给每辆车支付 $a$ 元。 \n- 停放两辆卡车时，司机每分钟给每辆车支付 $b$ 元。 \n- 停放三辆卡车时，司机每分钟给每辆车支付 $c$ 元。\n\n给定 $a, b, c$，以及 Luka 的三辆卡车的停车时间，请确定 Luka 要交多少钱。", "inputFormat": "第一行，$a, b, c$，含义见题目描述。\n\n接下来三行，每行 $2$ 个数，表示第 $i$ 辆车的停车开始时间 $begin_i$ 和结束时间 $end_i$，第 $end_i$ 分钟不收费。", "outputFormat": "第一行，一个正整数，表示 Luka 要交的钱。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，$1 \\le c \\le b \\le a \\le 100$，$1\\le begin_i\\le end_i\\le 100$。\n#### 说明\n- 本题满分 $20$ 分。\n- 本题自动开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T1 PARKING，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2007/2008 #6] PARKING", "background": "", "description": "Luka 毕业了，他找到了驾驶卡车的工作。 \n\n一天晚上，他将 $3$ 辆卡车停在一个停车场，收费方式如下：\n\n- 停放一辆卡车时，司机每分钟给每辆车支付 $a$ 元。 \n- 停放两辆卡车时，司机每分钟给每辆车支付 $b$ 元。 \n- 停放三辆卡车时，司机每分钟给每辆车支付 $c$ 元。\n\n给定 $a, b, c$，以及 Luka 的三辆卡车的停车时间，请确定 Luka 要交多少钱。", "inputFormat": "第一行，$a, b, c$，含义见题目描述。\n\n接下来三行，每行 $2$ 个数，表示第 $i$ 辆车的停车开始时间 $begin_i$ 和结束时间 $end_i$，第 $end_i$ 分钟不收费。", "outputFormat": "第一行，一个正整数，表示 Luka 要交的钱。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，$1 \\le c \\le b \\le a \\le 100$，$1\\le begin_i\\le end_i\\le 100$。\n#### 说明\n- 本题满分 $20$ 分。\n- 本题自动开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T1 PARKING，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN"}}}
{"pid": "P7190", "type": "P", "difficulty": 2, "samples": [["2 10\n3 5 5\n5 2 2 \n", "12"], ["4 30\n7 13 5\n14 4 4\n15 3 10\n25 1 1 \n", "36"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768]}, "tags": ["2007", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2007/2008 #6] SEMAFORI", "background": "", "description": "Luka 在开卡车，路上有 $n$ 个信号灯。 \n\n对于每个信号灯，他都知道红灯和绿灯亮的时间（循环不断重复）。\n\nLuka 开始开车时，所有交通信号灯都呈红色，并且开始循环。 \n\nLuka 每秒移动 $1$ 个距离单位。当交通信号灯为红色时，他要停车，直到它变成绿色。\n\n编写一个程序，确定 Luka 需要多少时间才能到达路的尽头。 \n\n道路的起点在 $0$ 处，终点在 $l$ 处。", "inputFormat": "第一行两个数 $n, l$，分别表示信号灯的个数和道路的长度。\n\n接下来，$n$ 行中的每行三个整数 $d, r, g$。 $d$ 表示信号灯到道路起点的距离， $r$ 和 $g$ 分别表示红色和绿色信号灯亮的时间。\n\n信号灯将按 $d$ 升序排列。\n\n没有两个交通信号灯将在同一位置。", "outputFormat": "第一行，一个正整数，表示 Luka 到达路的尽头的时间。 ", "hint": "#### 样例 #1 解释\n在第一个示例中，Luka 在第一个信号灯处等待 $2$ 秒。 接着，他将到达第二个交通信号灯，该信号灯为绿色，可以立即通过。\n#### 数据规模及规定\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，$1 \\le l \\le 10^3$，$1 \\le d < l$，$1 \\le r \\le 100$，$1 \\le g \\le 100$。\n#### 说明\n- 本题满分 $30$ 分。\n- 本题默认开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T2 SEMAFORI，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2007/2008 #6] SEMAFORI", "background": "", "description": "Luka 在开卡车，路上有 $n$ 个信号灯。 \n\n对于每个信号灯，他都知道红灯和绿灯亮的时间（循环不断重复）。\n\nLuka 开始开车时，所有交通信号灯都呈红色，并且开始循环。 \n\nLuka 每秒移动 $1$ 个距离单位。当交通信号灯为红色时，他要停车，直到它变成绿色。\n\n编写一个程序，确定 Luka 需要多少时间才能到达路的尽头。 \n\n道路的起点在 $0$ 处，终点在 $l$ 处。", "inputFormat": "第一行两个数 $n, l$，分别表示信号灯的个数和道路的长度。\n\n接下来，$n$ 行中的每行三个整数 $d, r, g$。 $d$ 表示信号灯到道路起点的距离， $r$ 和 $g$ 分别表示红色和绿色信号灯亮的时间。\n\n信号灯将按 $d$ 升序排列。\n\n没有两个交通信号灯将在同一位置。", "outputFormat": "第一行，一个正整数，表示 Luka 到达路的尽头的时间。 ", "hint": "#### 样例 #1 解释\n在第一个示例中，Luka 在第一个信号灯处等待 $2$ 秒。 接着，他将到达第二个交通信号灯，该信号灯为绿色，可以立即通过。\n#### 数据规模及规定\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，$1 \\le l \\le 10^3$，$1 \\le d < l$，$1 \\le r \\le 100$，$1 \\le g \\le 100$。\n#### 说明\n- 本题满分 $30$ 分。\n- 本题默认开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T2 SEMAFORI，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN"}}}
{"pid": "P7191", "type": "P", "difficulty": 3, "samples": [["3\n6\n34\n38 \n", "2 4\n"], ["5\n5\n17\n23\n14\n83 \n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2007", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2007/2008 #6] GRANICA", "background": "", "description": "Luka 首先从 $n$ 个车牌上的数字写在一张纸上。然后，他尝试找到整数 $m$，以使纸上的所有数除以 $m$ 都得到相同的余数。\n\nLuka 想找到尽可能多的不同的 $m$。\n\n编写一个程序，给定 Luka 的 $n$ 个整数，确定所有 $m$。\n\n注意，你需要保证 $m$ 是正整数，即，$m> 1$。", "inputFormat": "第一行，一个正整数 $n$，表示数的个数。\n\n接下来，$n$ 行，每行一个数 $a_i$，表示纸上的数，保证互不相同。\n\n数据保证有一个 $m$ 符合要求。", "outputFormat": "第一行，任意序输出所有符合要求的 $m$。", "hint": "#### 样例 #1 解释\n所有整数除以 $2$ 时都为 $0$，除以 $4$ 时为 $2$。\n\n#### 数据规模及约定\n- 对于 $60\\%$ 的数据，$2 \\le n \\le 100$，$1 \\le a_i \\le 10^4$。\n- 对于 $100\\%$ 的数据，$2 \\le n \\le 100$，$1 \\le a_i \\le 10^9$。\n\n#### 说明\n- 本题满分 $50$ 分。\n- 本题默认开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T3 GRANICA，译者 @[tearing](https://www.luogu.com.cn/user/219791)。\n- 感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的 checker，您可以在附件处下载。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2007/2008 #6] GRANICA", "background": "", "description": "Luka 首先从 $n$ 个车牌上的数字写在一张纸上。然后，他尝试找到整数 $m$，以使纸上的所有数除以 $m$ 都得到相同的余数。\n\nLuka 想找到尽可能多的不同的 $m$。\n\n编写一个程序，给定 Luka 的 $n$ 个整数，确定所有 $m$。\n\n注意，你需要保证 $m$ 是正整数，即，$m> 1$。", "inputFormat": "第一行，一个正整数 $n$，表示数的个数。\n\n接下来，$n$ 行，每行一个数 $a_i$，表示纸上的数，保证互不相同。\n\n数据保证有一个 $m$ 符合要求。", "outputFormat": "第一行，任意序输出所有符合要求的 $m$。", "hint": "#### 样例 #1 解释\n所有整数除以 $2$ 时都为 $0$，除以 $4$ 时为 $2$。\n\n#### 数据规模及约定\n- 对于 $60\\%$ 的数据，$2 \\le n \\le 100$，$1 \\le a_i \\le 10^4$。\n- 对于 $100\\%$ 的数据，$2 \\le n \\le 100$，$1 \\le a_i \\le 10^9$。\n\n#### 说明\n- 本题满分 $50$ 分。\n- 本题默认开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T3 GRANICA，译者 @[tearing](https://www.luogu.com.cn/user/219791)。\n- 感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的 checker，您可以在附件处下载。", "locale": "zh-CN"}}}
{"pid": "P7192", "type": "P", "difficulty": 4, "samples": [["6 5\n1 6 20 4\n5 3 2 4\n1 2 2\n2 3 8\n2 4 3\n3 6 10\n3 5 15 \n", "21"], ["8 9\n1 5 5 5\n1 2 3 4 5\n1 2 8\n2 7 4\n2 3 10\n6 7 40\n3 6 5\n6 8 3\n4 8 4\n4 5 5\n3 4 23 \n", "40"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2007", "COCI（克罗地亚）"], "title": "[COCI 2007/2008 #6] GEORGE", "background": "T 先生来 Luka 所在的小镇玩，因为 T 先生是一个大人物，警察会对他将走过的路实行交通管制。\n\nLuka 在镇上是一名送货的卡车司机。但是由于一些路正在进行交通管制，他无法及时交货，还因此差点丢掉了他的工作。", "description": "Luka 知道 T 先生游玩的路线，并且他想要知道最短的交货时间。\n\n该城市由若干十字路口和连接它们的道路连接，并且 Luka 知道他需要在某条路段上开多长时间（T 先生需要同样的时间以开过该路段）。\n\n例如，如果 T 先生在第 $10$ 分钟进入一条路，并且需要 $5$ 分钟离开这条路，那么该街道将在第 $10 \\sim 14$ 分钟时被封锁。Luka可以在第 $9$ 分钟或更早的时候，也可以在第 $15$ 分钟及以后进入该道路。\n\n编写一个程序，计算 Luka 在 T 先生到达城市后 $k$ 分钟开始开车的最短时间。", "inputFormat": "第一行两个正整数 $n, m$，分别表示十字路口数和街道数。 十字路口编号为 $1$ 到 $n$。\n\n第二行四个正整数 $a, b, k, g$，分别表示：\n- $a$：Luka 起点的路口。\n- $b$：Luka 必须到达的十字路口。\n- $k$：T 先生和 Luka 之间的出发时间差。\n- $g$：T 先生路上的十字路口数。\n\n第三行 $g$ 个整数，表示 T 先生路上依次经过的十字路口。保证存在对应的街道，每条街道只能走一次。\n\n接下来 $m$ 行，每行三个整数 $a, b, l$，表示在坐标 $(a, b)$ 处有一条街道，开过去的时间为 $l$。", "outputFormat": "一行，输出 Luka 送货需要的最短时间（单位：分）。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^3$，$2 \\le m \\le 10^4$，$1 \\le a, b \\le n$，$0 \\le k \\le 10^3$，$ 0 \\le g \\le 10^3$。\n\n#### 说明\n- 本题满分 $60$ 分。\n- 本题默认开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T4 GEORGE，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2007/2008 #6] GEORGE", "background": "T 先生来 Luka 所在的小镇玩，因为 T 先生是一个大人物，警察会对他将走过的路实行交通管制。\n\nLuka 在镇上是一名送货的卡车司机。但是由于一些路正在进行交通管制，他无法及时交货，还因此差点丢掉了他的工作。", "description": "Luka 知道 T 先生游玩的路线，并且他想要知道最短的交货时间。\n\n该城市由若干十字路口和连接它们的道路连接，并且 Luka 知道他需要在某条路段上开多长时间（T 先生需要同样的时间以开过该路段）。\n\n例如，如果 T 先生在第 $10$ 分钟进入一条路，并且需要 $5$ 分钟离开这条路，那么该街道将在第 $10 \\sim 14$ 分钟时被封锁。Luka可以在第 $9$ 分钟或更早的时候，也可以在第 $15$ 分钟及以后进入该道路。\n\n编写一个程序，计算 Luka 在 T 先生到达城市后 $k$ 分钟开始开车的最短时间。", "inputFormat": "第一行两个正整数 $n, m$，分别表示十字路口数和街道数。 十字路口编号为 $1$ 到 $n$。\n\n第二行四个正整数 $a, b, k, g$，分别表示：\n- $a$：Luka 起点的路口。\n- $b$：Luka 必须到达的十字路口。\n- $k$：T 先生和 Luka 之间的出发时间差。\n- $g$：T 先生路上的十字路口数。\n\n第三行 $g$ 个整数，表示 T 先生路上依次经过的十字路口。保证存在对应的街道，每条街道只能走一次。\n\n接下来 $m$ 行，每行三个整数 $a, b, l$，表示在坐标 $(a, b)$ 处有一条街道，开过去的时间为 $l$。", "outputFormat": "一行，输出 Luka 送货需要的最短时间（单位：分）。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^3$，$2 \\le m \\le 10^4$，$1 \\le a, b \\le n$，$0 \\le k \\le 10^3$，$ 0 \\le g \\le 10^3$。\n\n#### 说明\n- 本题满分 $60$ 分。\n- 本题默认开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T4 GEORGE，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN"}}}
{"pid": "P7193", "type": "P", "difficulty": 4, "samples": [["7 5\nACDBB\n5 6\n8 9\n4 13\n1 10\n7 4\n10 9\n3 7\n", "7 4"], ["6 12\nAAAAAABCCCDD\n1 1\n2 2\n3 3\n4 4\n5 3\n6 2 \n", "5 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["模拟", "图论", "2007", "O2优化", "排序", "COCI（克罗地亚）"], "title": "[COCI 2007/2008 #6] PRINCEZA", "background": "对于 C 语言和 C++ 语言，请使用 `cin`，`scanf` 进行读入，否则可能会出现 $\\color{purple}\\mathsf{RE}$ & $\\color{red}\\mathsf{WA}$。", "description": "\n\nLuka 把卡车停在湖边。 \n\nBarica 在湖中居住，Barica 跳过漂浮在湖面上的 $n$ 种植物。 \n\nLuka 知道许多民间故事，知道如果他亲吻 Barica，她会变成一个可爱的女孩子。但是，他需要先抓住她！\n\n可以用一对坐标定义植物在湖面上的位置。 Barica 可以从 $(x, y)$ 植物中跳跃，$p$ 为任意正整数。\n\n- 方向 A：$(x + p, y + p)$。\n- 方向 B：$(x + p, y - p)$。\n- 方向 C：$(x - p, y + p)$。\n- 方向 D：$(x - p, y - p)$。\n\nBarica 选择四个方向之一，然后沿所选方向跳到第一个植物上。 \n\n如果在选定的方向上没有植物，Barica 将留在原处。\n\nBarica 跳下后，她从水槽上跳下的植物消失了。\n\n知道植物的位置和 Barica 选择的方向顺序后，Luka 希望确定 Barica 最终将位于植物的坐标。 Luka 将在她的位置等她，亲吻她。\n\n编写一个解决 Luka 问题的程序，并帮助他将 Barica 变成美丽的公主。", "inputFormat": "第一行，两个正整数 $n, k$，分别表示植物数和跳跃次数。\n\n第二行，$k$ 个字母，`A`，`B`，`C` 或 `D`，表示她跳的方向。\n\n接下来，$n$ 行的每行都包含两个整数 $x, y$，表示一棵植物的坐标。 Barica 最初位于第一颗植物。", "outputFormat": "第一行，Barica 的最终坐标。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，$1 \\le n, k \\le 10 ^ 5$，$0 \\le x, y \\le 10 ^ 9$。\n#### 说明\n- 本题满分 $60$ 分。\n- 本题默认开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T5 PRINCEZA，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2007/2008 #6] PRINCEZA", "background": "对于 C 语言和 C++ 语言，请使用 `cin`，`scanf` 进行读入，否则可能会出现 $\\color{purple}\\mathsf{RE}$ & $\\color{red}\\mathsf{WA}$。", "description": "\n\nLuka 把卡车停在湖边。 \n\nBarica 在湖中居住，Barica 跳过漂浮在湖面上的 $n$ 种植物。 \n\nLuka 知道许多民间故事，知道如果他亲吻 Barica，她会变成一个可爱的女孩子。但是，他需要先抓住她！\n\n可以用一对坐标定义植物在湖面上的位置。 Barica 可以从 $(x, y)$ 植物中跳跃，$p$ 为任意正整数。\n\n- 方向 A：$(x + p, y + p)$。\n- 方向 B：$(x + p, y - p)$。\n- 方向 C：$(x - p, y + p)$。\n- 方向 D：$(x - p, y - p)$。\n\nBarica 选择四个方向之一，然后沿所选方向跳到第一个植物上。 \n\n如果在选定的方向上没有植物，Barica 将留在原处。\n\nBarica 跳下后，她从水槽上跳下的植物消失了。\n\n知道植物的位置和 Barica 选择的方向顺序后，Luka 希望确定 Barica 最终将位于植物的坐标。 Luka 将在她的位置等她，亲吻她。\n\n编写一个解决 Luka 问题的程序，并帮助他将 Barica 变成美丽的公主。", "inputFormat": "第一行，两个正整数 $n, k$，分别表示植物数和跳跃次数。\n\n第二行，$k$ 个字母，`A`，`B`，`C` 或 `D`，表示她跳的方向。\n\n接下来，$n$ 行的每行都包含两个整数 $x, y$，表示一棵植物的坐标。 Barica 最初位于第一颗植物。", "outputFormat": "第一行，Barica 的最终坐标。", "hint": "#### 数据规模与约定\n对于 $100\\%$ 的数据，$1 \\le n, k \\le 10 ^ 5$，$0 \\le x, y \\le 10 ^ 9$。\n#### 说明\n- 本题满分 $60$ 分。\n- 本题默认开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T5 PRINCEZA，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN"}}}
{"pid": "P7194", "type": "P", "difficulty": 5, "samples": [["3\n3 65\n45 10\n60 25 \n", "32"], ["3\n5 5\n6 7\n8 8 \n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["动态规划 DP", "2007", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2007/2008 #6] CESTARINE", "background": "", "description": "Luka 的 $n$ 辆卡车行驶在一辆高速路上。高速路上有许多出入口。我们认为相同编号的出入口在同一位置。\n\n开进高速路后，司机会收到一张写着他入口号的单子。驶出时，驾驶员支付的通行费等于出入口号的绝对差。\n\nLuka 是一个爱贪小便宜的人。他发现，即使他们的路线不重叠，司机们可以在高速路上交换他们的单子。\n\n但是，不能再同一位置的出入口进行上高速与下高速。\n\n请你编程求出最少的通行费。", "inputFormat": "第一行，一个正整数 $n$，表示卡车的个数。\n\n接下来，$n$ 行，每行两个正整数，$x_i, y_i$， 表示入口和出口的编号。", "outputFormat": "第一行，一个正整数 $ans$，表示最少的通行费。\n", "hint": "#### 样例 #1 解释\n\n最少的通行费为 $ |65−60| + |10−3| + |25−45| = 32$。\n\n#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le x, y \\le 10^6$，$x \\not= y$。 \n\n#### 提示\n请使用 $64$ 位整数类型（在 C / C++ 语言中为 `long long`，在 Pascal 语言中为 `int64`），否则可能会导致答案错误（即 Wrong Answer）。 \n\n#### 说明\n- 本题满分 $80$ 分。\n- 本题默认开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T6 CESTARINE，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2007/2008 #6] CESTARINE", "background": "", "description": "Luka 的 $n$ 辆卡车行驶在一辆高速路上。高速路上有许多出入口。我们认为相同编号的出入口在同一位置。\n\n开进高速路后，司机会收到一张写着他入口号的单子。驶出时，驾驶员支付的通行费等于出入口号的绝对差。\n\nLuka 是一个爱贪小便宜的人。他发现，即使他们的路线不重叠，司机们可以在高速路上交换他们的单子。\n\n但是，不能再同一位置的出入口进行上高速与下高速。\n\n请你编程求出最少的通行费。", "inputFormat": "第一行，一个正整数 $n$，表示卡车的个数。\n\n接下来，$n$ 行，每行两个正整数，$x_i, y_i$， 表示入口和出口的编号。", "outputFormat": "第一行，一个正整数 $ans$，表示最少的通行费。\n", "hint": "#### 样例 #1 解释\n\n最少的通行费为 $ |65−60| + |10−3| + |25−45| = 32$。\n\n#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le x, y \\le 10^6$，$x \\not= y$。 \n\n#### 提示\n请使用 $64$ 位整数类型（在 C / C++ 语言中为 `long long`，在 Pascal 语言中为 `int64`），否则可能会导致答案错误（即 Wrong Answer）。 \n\n#### 说明\n- 本题满分 $80$ 分。\n- 本题默认开启 O2 优化开关。\n- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T6 CESTARINE，译者 @[tearing](https://www.luogu.com.cn/user/219791)。", "locale": "zh-CN"}}}
{"pid": "P7195", "type": "P", "difficulty": 7, "samples": [["4\n2 1 \n3 3\n4 4\n5 2", "6\n2 0\n2 3\n5 3\n5 2\n4 2\n4 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "IOI", "提交答案", "Special Judge"], "title": "[IOI 2019] 折线", "background": "您可以在此处下载[输入文件](https://cowtransfer.com/s/9b9c30ef6dc74d)。", "description": "阿塞拜疆因地毯而闻名。作为一位地毯设计大师，你在做新设计时想画一条**折线**。一条折线是二维平面上包含 $t$ 条线段的线段序列，而这些线段由包含 $t+1$ 个点 $p_0,\\ldots,p_t$ 的点序列按照下述规则定义给出：对所有的 $0\\le j\\le t- 1$，都有一条线段连接点 $p_j$ 和 $p_{j+1}$。\n\n为完成这个新设计，你已经标出了二维平面中的 $n$ 个**小圆点**。小圆点 $i$（$1 < i < n$）的坐标为 $(x_i,y_i)$。**不存在 $x$ 坐标或 $y$ 坐标相同的两个小圆点**。\n\n现在你想要找到一个点序列 $(sx_0,sy_0),(sx_1, sy_1)\\ldots (sx_k, sy_k)$，由该点序列定义给出的折线需满足：\n- 该折线从 $(0,0)$ 开始（即 $sx_0=0$ 且 $sy_0=0$），\n- 该折线经过所有的小圆点（它们不必是线段的端点），以及\n- 该折线仅包括水平线段和竖直线段（对于定义该折线的连续两个点，其 $x$ 坐标或 $y$ 坐标相等）。\n\n折线可以以任意的方式自相交或自重叠。正式地来说，平面上的每个点可以属于折线中任意数量的线段。\n\n本题是一个有部分分的提交答案型题目。将会给你 $10$ 个输入文件， 这些文件给出了小圆点的位置。对每个输入文件，你需要提交一个答案文件，描述满足要求的折线。对每个给出合法折线的输出文件，你的得分将依赖于折线中的**线段数量**（参见下面的计分方式一节）。\n\n你不需要为本题提交任何源代码。", "inputFormat": "每个输入文件的格式如下：\n- 第 $1$ 行：$n$。\n- 第 $1+i$ 行（这里 $1<i\\le n$）：$x_i\\ y_i$。", "outputFormat": "每个输出文件必须按照如下格式：\n- 第 $1$ 行： $k$。\n- 第 $1+j$ 行（这里 $1\\le j\\le k$）： $sx_j\\ sy_j$。\n\n注意，第二行应包含 $sx_1$ 和 $sy_1$ （也就是说，输出**不应当**包含 $sx_0$ 和 $sy_0$）。所有的 $sx_j$ 和 $sy_j$ 均应为整数。", "hint": "\n#### 样例解释\n这个样例并不是任何一个数据，仅仅只是为了帮助您理解题意。\n\n输出也仅仅是一个可能的输出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6deg8n18.png)\n\n#### 限制条件\n- $1\\le n\\le 10^5$。\n- $1\\le x_i,y_i\\le 10^9$。\n- 所有 $x_i$ 和 $y_i$ 的值都是整数。\n- 不存在 $x$ 坐标或 $y$ 坐标相同的两个小圆点，也就是说，对于所有的 $i_1\\not=i_2$，都有 $x_{i_1}\\not=x_{i_2}$ 且 $y_{i_1}\\not=y_{i_2}$。\n- $-2\\times 10^9\\le sx_i,sy_j\\le 2\\times 10^9$。\n- 提交的每个文件（无论是输出文件还是压缩文件）的大小均不能超过 $\\text{15MB}$。\n\n#### 计分方式\n对每个测试点，你最多能够得到 $10$ 分，如果给出一条非法的折线，你将得到 $0$ 分。否则，得分将根据一个递减序列 $c_1, \\cdots, c_{10}$ 来计算。\n\n假设你的解答是一条包含 $k$ 条线段的合法折线。那么，你将得到\n- $i$ 分，如果 $k=c_i$（$1 \\le i \\le 10$）\n- $i+\\dfrac{c_i-k}{c_i-c_{i+1}}$ 分，如果 $c_{i+1} < k < c_i$（$1 \\le i \\le 9$）\n- $0$ 分，如果 $k > c_1$\n- $10$ 分，如果 $k < c_{10}$。\n\n可以这样理解：在 $k \\in (c_{i+1}, c_i)$ 这个区间上，你的得分是随着 $k$ 减小线性增大的。一旦得分，得分一定在 $[1, 10]$ 区间内。\n\n以下是每个测试点 $n$ 与 $c_i$ 的信息：\n\n|测试点|$n$|$c_1$|$c_2$|$c_3$|$c_4$|$c_5$|$c_6$|$c_7$|$c_8$|$c_9$|$c_{10}$|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$20$|$50$|$45$|$40$|$37$|$35$|$33$|$28$|$26$|$25$|$23$|\n|$2$|$600$|$1\\ 200$|$937$|$674$|$651$|$640$|$628$|$616$|$610$|$607$|$603$|\n|$3$|$5\\ 000$|$10\\ 000$|$7\\ 607$|$5\\ 213$|$5\\ 125$|$5\\ 081$|$5\\ 037$|$5\\ 020$|$5\\ 012$|$5\\ 008$|$5\\ 003$|\n|$4$|$50\\ 000$|$100 \\ 000$|$75\\ 336$|$50\\ 671$|$50\\ 359$|$50\\ 203$|$50\\ 047$|$50\\ 025$|$50\\ 014$|$50\\ 009$|$50\\ 003$|\n|$5$|$72\\ 018$|$144\\ 036$|$108\\ 430$|$72\\ 824$|$72\\ 446$|$72\\ 257$|$72\\ 067$|$72\\ 044$|$72\\ 033$|$72\\ 027$|$72\\ 021$|\n|$6$|$91\\ 891$|$183\\ 782$|$138\\ 292$|$92\\ 801$|$92\\ 371$|$92\\ 156$|$91\\ 941$|$91\\ 918$|$91\\ 906$|$91\\ 900$|$91\\ 894$|\n|$7$|$100\\ 000$|$200\\ 000$|$150\\ 475$|$100\\ 949$|$100\\ 500$|$100\\ 275$|$100\\ 050$|$100\\ 027$|$100\\ 015$|$100\\ 009$|$100\\ 003$|\n\n#### 可视化工具\n在本题的附加文件中有一个脚本，能让你对输入文件和输出文件进行可视化。\n\n在对输入文件做可视化时，使用如下命令：\n```plain\npython vis.py [input file]\n```\n\n对于某个输入数据，你还可以使用下面的命令对你的解答进行可视化，由于技术方面的限制，所提供的可视化工具仅显示输出文件中的**前 $1000$ 条线段**。\n```plain\npython vis.py [input file] --solution [output file]\n```\n\n例如：\n```plain\npython vis.py examples/00.in --solution examples/00.out\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2019] 折线", "background": "您可以在此处下载[输入文件](https://cowtransfer.com/s/9b9c30ef6dc74d)。", "description": "阿塞拜疆因地毯而闻名。作为一位地毯设计大师，你在做新设计时想画一条**折线**。一条折线是二维平面上包含 $t$ 条线段的线段序列，而这些线段由包含 $t+1$ 个点 $p_0,\\ldots,p_t$ 的点序列按照下述规则定义给出：对所有的 $0\\le j\\le t- 1$，都有一条线段连接点 $p_j$ 和 $p_{j+1}$。\n\n为完成这个新设计，你已经标出了二维平面中的 $n$ 个**小圆点**。小圆点 $i$（$1 < i < n$）的坐标为 $(x_i,y_i)$。**不存在 $x$ 坐标或 $y$ 坐标相同的两个小圆点**。\n\n现在你想要找到一个点序列 $(sx_0,sy_0),(sx_1, sy_1)\\ldots (sx_k, sy_k)$，由该点序列定义给出的折线需满足：\n- 该折线从 $(0,0)$ 开始（即 $sx_0=0$ 且 $sy_0=0$），\n- 该折线经过所有的小圆点（它们不必是线段的端点），以及\n- 该折线仅包括水平线段和竖直线段（对于定义该折线的连续两个点，其 $x$ 坐标或 $y$ 坐标相等）。\n\n折线可以以任意的方式自相交或自重叠。正式地来说，平面上的每个点可以属于折线中任意数量的线段。\n\n本题是一个有部分分的提交答案型题目。将会给你 $10$ 个输入文件， 这些文件给出了小圆点的位置。对每个输入文件，你需要提交一个答案文件，描述满足要求的折线。对每个给出合法折线的输出文件，你的得分将依赖于折线中的**线段数量**（参见下面的计分方式一节）。\n\n你不需要为本题提交任何源代码。", "inputFormat": "每个输入文件的格式如下：\n- 第 $1$ 行：$n$。\n- 第 $1+i$ 行（这里 $1<i\\le n$）：$x_i\\ y_i$。", "outputFormat": "每个输出文件必须按照如下格式：\n- 第 $1$ 行： $k$。\n- 第 $1+j$ 行（这里 $1\\le j\\le k$）： $sx_j\\ sy_j$。\n\n注意，第二行应包含 $sx_1$ 和 $sy_1$ （也就是说，输出**不应当**包含 $sx_0$ 和 $sy_0$）。所有的 $sx_j$ 和 $sy_j$ 均应为整数。", "hint": "\n#### 样例解释\n这个样例并不是任何一个数据，仅仅只是为了帮助您理解题意。\n\n输出也仅仅是一个可能的输出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6deg8n18.png)\n\n#### 限制条件\n- $1\\le n\\le 10^5$。\n- $1\\le x_i,y_i\\le 10^9$。\n- 所有 $x_i$ 和 $y_i$ 的值都是整数。\n- 不存在 $x$ 坐标或 $y$ 坐标相同的两个小圆点，也就是说，对于所有的 $i_1\\not=i_2$，都有 $x_{i_1}\\not=x_{i_2}$ 且 $y_{i_1}\\not=y_{i_2}$。\n- $-2\\times 10^9\\le sx_i,sy_j\\le 2\\times 10^9$。\n- 提交的每个文件（无论是输出文件还是压缩文件）的大小均不能超过 $\\text{15MB}$。\n\n#### 计分方式\n对每个测试点，你最多能够得到 $10$ 分，如果给出一条非法的折线，你将得到 $0$ 分。否则，得分将根据一个递减序列 $c_1, \\cdots, c_{10}$ 来计算。\n\n假设你的解答是一条包含 $k$ 条线段的合法折线。那么，你将得到\n- $i$ 分，如果 $k=c_i$（$1 \\le i \\le 10$）\n- $i+\\dfrac{c_i-k}{c_i-c_{i+1}}$ 分，如果 $c_{i+1} < k < c_i$（$1 \\le i \\le 9$）\n- $0$ 分，如果 $k > c_1$\n- $10$ 分，如果 $k < c_{10}$。\n\n可以这样理解：在 $k \\in (c_{i+1}, c_i)$ 这个区间上，你的得分是随着 $k$ 减小线性增大的。一旦得分，得分一定在 $[1, 10]$ 区间内。\n\n以下是每个测试点 $n$ 与 $c_i$ 的信息：\n\n|测试点|$n$|$c_1$|$c_2$|$c_3$|$c_4$|$c_5$|$c_6$|$c_7$|$c_8$|$c_9$|$c_{10}$|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$20$|$50$|$45$|$40$|$37$|$35$|$33$|$28$|$26$|$25$|$23$|\n|$2$|$600$|$1\\ 200$|$937$|$674$|$651$|$640$|$628$|$616$|$610$|$607$|$603$|\n|$3$|$5\\ 000$|$10\\ 000$|$7\\ 607$|$5\\ 213$|$5\\ 125$|$5\\ 081$|$5\\ 037$|$5\\ 020$|$5\\ 012$|$5\\ 008$|$5\\ 003$|\n|$4$|$50\\ 000$|$100 \\ 000$|$75\\ 336$|$50\\ 671$|$50\\ 359$|$50\\ 203$|$50\\ 047$|$50\\ 025$|$50\\ 014$|$50\\ 009$|$50\\ 003$|\n|$5$|$72\\ 018$|$144\\ 036$|$108\\ 430$|$72\\ 824$|$72\\ 446$|$72\\ 257$|$72\\ 067$|$72\\ 044$|$72\\ 033$|$72\\ 027$|$72\\ 021$|\n|$6$|$91\\ 891$|$183\\ 782$|$138\\ 292$|$92\\ 801$|$92\\ 371$|$92\\ 156$|$91\\ 941$|$91\\ 918$|$91\\ 906$|$91\\ 900$|$91\\ 894$|\n|$7$|$100\\ 000$|$200\\ 000$|$150\\ 475$|$100\\ 949$|$100\\ 500$|$100\\ 275$|$100\\ 050$|$100\\ 027$|$100\\ 015$|$100\\ 009$|$100\\ 003$|\n\n#### 可视化工具\n在本题的附加文件中有一个脚本，能让你对输入文件和输出文件进行可视化。\n\n在对输入文件做可视化时，使用如下命令：\n```plain\npython vis.py [input file]\n```\n\n对于某个输入数据，你还可以使用下面的命令对你的解答进行可视化，由于技术方面的限制，所提供的可视化工具仅显示输出文件中的**前 $1000$ 条线段**。\n```plain\npython vis.py [input file] --solution [output file]\n```\n\n例如：\n```plain\npython vis.py examples/00.in --solution examples/00.out\n```", "locale": "zh-CN"}}}
{"pid": "P7196", "type": "P", "difficulty": 6, "samples": [["1 1 3 3\n6 14 12\n7 15 13\n3 11 9\n3\n1 3 W X\n1 2 W X\n3 3 S X\n3 100\n1 1 2 2\n3 1 3 1\n2 2 3 2\n10", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2002", "CTSC/CTS"], "title": "[CTSC2002] 灭鼠行动", "background": "", "description": "最近，有一些繁殖力很强的老鼠在下水道非常猖獗，灭鼠特工队正在计划消灭这些老鼠。下水道只有东西方向和南北方向的管道，如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k86ntxbk.png)\n\n灭鼠特工队的队员拥有强大的武器。他们将在某些时刻 $t$ 在某些位置 $(x,y)$ 放置武器。他们所使用的武器包括：\n\n1. 强力炸弹：它的攻击范围限定在管道内部，是沿竖直和水平方向，离 $(x,y)$ 的距离不超过 $L$ 的区域，但是不能穿透下水道壁。它将在放置之后立刻爆炸，且攻击范围内的老鼠将被全部炸死。\n\n2. 神秘射线：它的攻击范围是以 $(x,y)$ 为圆心，半径为 $R$ 的圆，而且可以穿透下水道壁。射线在时刻 $t$ 施放后，将使攻击范围内的所有老鼠立刻陷入昏迷状态，失去知觉，停止一切生理活动，待到第 $t+3$ 时刻才能恢复（保持失去知觉前的朝向）。如果在昏迷状态中再次受到射线攻击，那么它将再推迟 $3$ 个时刻恢复。例如，若老鼠在时刻 $t$ 和时刻 $t+1$ 个受到一次射线的攻击，则它要昏迷到第 $t+3+3$ 时刻才能恢复知觉。恢复知觉以后，老鼠将继续以前的生理活动。\n\n3. 定时炸弹：它的攻击范围仅包括 $(x,y)$。它在时刻 $t$放置后，将在第 $t+3$ 时刻爆炸，爆炸时处在 $(x,y)$ 点的老鼠将全部被炸死。\n\n4. 生物炸弹：它的攻击范围仅包括 $(x,y)$。它将在放置之后立刻爆炸，使处在 $(x,y)$ 点的所有老鼠的性别改变（无论大小，雌变成雄，雄变成雌），但不影响老鼠的正常生理活动。\n\n虽然特工队的实力很强，但是老鼠的实力也不容忽视。\n\n我们定义，相邻两个时刻之间是一个时间单位。从 $t=0$ 时刻开始，每只老鼠就从初始位置向某一初始方向运动。只要前方有管道，如上图中沿方向 $\\texttt{N}$ 到达点 $\\texttt{A}$，老鼠就会一直向前走，运动速度为 $1$。否则，如果只有左边或者只有右边有管道，如上图中沿方向 $\\texttt{E}$ 到达点 $\\texttt{B}$ 时，再不能沿原方向继续前进，它就会花费一个时间单位朝该方向原地转动 $90$ 度，即它将改变方向朝向 $\\texttt{S}$。如果它左边和右边都有管道，如上图中沿方向 $\\texttt{W}$ 到达点 $\\texttt{C}$，老鼠会回忆这是第几次处于这种情况。如果是第奇数次遇到，它会向左转，第偶数次就向右转。如果它处于一条死路的尽头，如上图中沿方向 $\\texttt{W}$ 到达点 $\\texttt{D}$，那么它会花费两个时间单位连续向右转两次，即它将改变方向朝向E。\n\n   如果在 $t$ 时刻某点恰好只有两只老鼠，一只为成年雄老鼠，一只为成年雌老鼠，则它们将会因为进行繁殖而在该点停留两个单位时间，$t+2$ 时刻会在该点对每个有管道的方向生出一只朝着该方向的小老鼠，南北方向为雄小老鼠，东西方向为雌小老鼠。如上图中的 $\\texttt{C}$ 点，$t$ 时刻恰好只有两只老鼠，它们都已成年且性别相异，那么在第 $t+2$ 时刻就会在该点生出三只小老鼠，它们分别朝向 $\\texttt{N}$、$\\texttt{S}$、$\\texttt{E}$，性别分别是雄性、雄性、雌性。小老鼠一出生就立刻开始移动，而成年老鼠需要再休息一个时间单位，即在 $t+3$ 时刻继续活动（两只老鼠都保持生育前的朝向）。小老鼠需要成长 $5$ 个时间单位才会长成为成年老鼠。\n\n   特工队现在制定了一套灭鼠计划，其中包括在下水管道放置武器的位置、时间和类型。你需要帮他们计算灭鼠行动的效果，如果在该计划实施的过程中，老鼠的数量超过了某个限定值，就会爆发鼠疫。", "inputFormat": "第一行为 $4$ 个整数 $L, R, m, n(0\\le L,R\\le 10,1\\le m,n\\le 50)$，其中 $L$ 代表强力炸弹的有效攻击距离，$R$ 代表神秘射线的作用半径，$m$ 和 $n$ 代表下水道平面图的规模。$x$ 坐标的范围为 $[1,m]$, $y$ 坐标的范围为 $[1,n]$。\n\n从第 $2$ 行到第 $m+1$ 行为下水道结构图。我们用方向数 $1$ 代表 $\\texttt{N}$ (北)，用方向数 $2$ 代表$\\texttt{E}$ (东)，用方向数 $4$ 代表 $\\texttt{S}$ (南)，用方向数 $8$ 代表 $\\texttt{W}$ (西)。第 $i+1$ 行的第 $j$ 个数字 $c_{i,j}$ 代表点 $(i,j)$ 处有管道连接的所有方向数之和，如上图中的点 $\\texttt{B}$ 的方向数之和为 $12$。\n\n第 $m+2$ 行为一个整数 $K（1\\le K\\le 50）$，代表时刻 $0$ 时老鼠的个数（此时老鼠都是成年的）。\n\n第 $m+3$ 行到第 $m+K+2$ 行每行描述一只老鼠，包括该老鼠的初始坐标 $(x,y), (1\\le x\\le m, 1\\le y\\le n)$，朝向（’$\\texttt{E}$’,’$\\texttt{S}$’,’$\\texttt{W}$’,’$\\texttt{N}$’）以及性别（’$\\texttt{X}$’=雄，’$\\texttt{Y}$’=雌）。输入保证每个老鼠都在水管内。\n\n第 $m+K+3$ 行为两个整数 $P，Limit(1\\le P, Limit\\le 100)$，分别表示特工队准备使用的武器个数以及控制鼠疫发生的老鼠数量的极限。\n\n第 $m+K+4$ 行到第 $m+K+P+3$ 行每行描述一个武器，包括该武器的类型($1$-强力炸弹，$2$-神秘射线，$3$-定时炸弹，$4$-生物炸弹)，放置的时刻 $t(t\\ge 1)$，放置的坐标 $(x,y) (1\\le x\\le m, 1\\le y\\le n)$，输入保证武器放置在管道内。武器按照放置的时间不降序排列。\n\n最后一行包含一个整数 $Time(1\\le Time\\le 1000)$，表示模拟的结束时刻。$Time$ 保证比所有武器的放置时刻大。", "outputFormat": "包含一个整数。如果爆发了鼠疫，该整数为 $-1$，否则该整数为时刻 $Time$ 的老鼠数目。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lwexoo5d.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTSC2002] 灭鼠行动", "background": "", "description": "最近，有一些繁殖力很强的老鼠在下水道非常猖獗，灭鼠特工队正在计划消灭这些老鼠。下水道只有东西方向和南北方向的管道，如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k86ntxbk.png)\n\n灭鼠特工队的队员拥有强大的武器。他们将在某些时刻 $t$ 在某些位置 $(x,y)$ 放置武器。他们所使用的武器包括：\n\n1. 强力炸弹：它的攻击范围限定在管道内部，是沿竖直和水平方向，离 $(x,y)$ 的距离不超过 $L$ 的区域，但是不能穿透下水道壁。它将在放置之后立刻爆炸，且攻击范围内的老鼠将被全部炸死。\n\n2. 神秘射线：它的攻击范围是以 $(x,y)$ 为圆心，半径为 $R$ 的圆，而且可以穿透下水道壁。射线在时刻 $t$ 施放后，将使攻击范围内的所有老鼠立刻陷入昏迷状态，失去知觉，停止一切生理活动，待到第 $t+3$ 时刻才能恢复（保持失去知觉前的朝向）。如果在昏迷状态中再次受到射线攻击，那么它将再推迟 $3$ 个时刻恢复。例如，若老鼠在时刻 $t$ 和时刻 $t+1$ 个受到一次射线的攻击，则它要昏迷到第 $t+3+3$ 时刻才能恢复知觉。恢复知觉以后，老鼠将继续以前的生理活动。\n\n3. 定时炸弹：它的攻击范围仅包括 $(x,y)$。它在时刻 $t$放置后，将在第 $t+3$ 时刻爆炸，爆炸时处在 $(x,y)$ 点的老鼠将全部被炸死。\n\n4. 生物炸弹：它的攻击范围仅包括 $(x,y)$。它将在放置之后立刻爆炸，使处在 $(x,y)$ 点的所有老鼠的性别改变（无论大小，雌变成雄，雄变成雌），但不影响老鼠的正常生理活动。\n\n虽然特工队的实力很强，但是老鼠的实力也不容忽视。\n\n我们定义，相邻两个时刻之间是一个时间单位。从 $t=0$ 时刻开始，每只老鼠就从初始位置向某一初始方向运动。只要前方有管道，如上图中沿方向 $\\texttt{N}$ 到达点 $\\texttt{A}$，老鼠就会一直向前走，运动速度为 $1$。否则，如果只有左边或者只有右边有管道，如上图中沿方向 $\\texttt{E}$ 到达点 $\\texttt{B}$ 时，再不能沿原方向继续前进，它就会花费一个时间单位朝该方向原地转动 $90$ 度，即它将改变方向朝向 $\\texttt{S}$。如果它左边和右边都有管道，如上图中沿方向 $\\texttt{W}$ 到达点 $\\texttt{C}$，老鼠会回忆这是第几次处于这种情况。如果是第奇数次遇到，它会向左转，第偶数次就向右转。如果它处于一条死路的尽头，如上图中沿方向 $\\texttt{W}$ 到达点 $\\texttt{D}$，那么它会花费两个时间单位连续向右转两次，即它将改变方向朝向E。\n\n   如果在 $t$ 时刻某点恰好只有两只老鼠，一只为成年雄老鼠，一只为成年雌老鼠，则它们将会因为进行繁殖而在该点停留两个单位时间，$t+2$ 时刻会在该点对每个有管道的方向生出一只朝着该方向的小老鼠，南北方向为雄小老鼠，东西方向为雌小老鼠。如上图中的 $\\texttt{C}$ 点，$t$ 时刻恰好只有两只老鼠，它们都已成年且性别相异，那么在第 $t+2$ 时刻就会在该点生出三只小老鼠，它们分别朝向 $\\texttt{N}$、$\\texttt{S}$、$\\texttt{E}$，性别分别是雄性、雄性、雌性。小老鼠一出生就立刻开始移动，而成年老鼠需要再休息一个时间单位，即在 $t+3$ 时刻继续活动（两只老鼠都保持生育前的朝向）。小老鼠需要成长 $5$ 个时间单位才会长成为成年老鼠。\n\n   特工队现在制定了一套灭鼠计划，其中包括在下水管道放置武器的位置、时间和类型。你需要帮他们计算灭鼠行动的效果，如果在该计划实施的过程中，老鼠的数量超过了某个限定值，就会爆发鼠疫。", "inputFormat": "第一行为 $4$ 个整数 $L, R, m, n(0\\le L,R\\le 10,1\\le m,n\\le 50)$，其中 $L$ 代表强力炸弹的有效攻击距离，$R$ 代表神秘射线的作用半径，$m$ 和 $n$ 代表下水道平面图的规模。$x$ 坐标的范围为 $[1,m]$, $y$ 坐标的范围为 $[1,n]$。\n\n从第 $2$ 行到第 $m+1$ 行为下水道结构图。我们用方向数 $1$ 代表 $\\texttt{N}$ (北)，用方向数 $2$ 代表$\\texttt{E}$ (东)，用方向数 $4$ 代表 $\\texttt{S}$ (南)，用方向数 $8$ 代表 $\\texttt{W}$ (西)。第 $i+1$ 行的第 $j$ 个数字 $c_{i,j}$ 代表点 $(i,j)$ 处有管道连接的所有方向数之和，如上图中的点 $\\texttt{B}$ 的方向数之和为 $12$。\n\n第 $m+2$ 行为一个整数 $K（1\\le K\\le 50）$，代表时刻 $0$ 时老鼠的个数（此时老鼠都是成年的）。\n\n第 $m+3$ 行到第 $m+K+2$ 行每行描述一只老鼠，包括该老鼠的初始坐标 $(x,y), (1\\le x\\le m, 1\\le y\\le n)$，朝向（’$\\texttt{E}$’,’$\\texttt{S}$’,’$\\texttt{W}$’,’$\\texttt{N}$’）以及性别（’$\\texttt{X}$’=雄，’$\\texttt{Y}$’=雌）。输入保证每个老鼠都在水管内。\n\n第 $m+K+3$ 行为两个整数 $P，Limit(1\\le P, Limit\\le 100)$，分别表示特工队准备使用的武器个数以及控制鼠疫发生的老鼠数量的极限。\n\n第 $m+K+4$ 行到第 $m+K+P+3$ 行每行描述一个武器，包括该武器的类型($1$-强力炸弹，$2$-神秘射线，$3$-定时炸弹，$4$-生物炸弹)，放置的时刻 $t(t\\ge 1)$，放置的坐标 $(x,y) (1\\le x\\le m, 1\\le y\\le n)$，输入保证武器放置在管道内。武器按照放置的时间不降序排列。\n\n最后一行包含一个整数 $Time(1\\le Time\\le 1000)$，表示模拟的结束时刻。$Time$ 保证比所有武器的放置时刻大。", "outputFormat": "包含一个整数。如果爆发了鼠疫，该整数为 $-1$，否则该整数为时刻 $Time$ 的老鼠数目。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lwexoo5d.png)", "locale": "zh-CN"}}}
{"pid": "P7197", "type": "P", "difficulty": 0, "samples": [["5 5\n6\nhouse1 LOCATION A 0\npostoffice LOCATION A 4\nschool DISTANCE 4 house1\nhouse2 DISTANCE 6 postoffice\nschool DISTANCE 6 postoffice\nhouse3 DISTANCE 6 postoffice", "6 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "CTSC/CTS"], "title": "[CTSC2002] 购房计划", "background": "", "description": "$\\text{Bill}$ 和 $\\text{Scott}$ 是商业对手。他们都计划在 $\\text{Javaville}$ 城市购买一幢房子，但是他们希望自己的住宅尽量远离对方的住宅。由于 $\\text{Javaville}$ 是一座新兴的城市，所以暂时还没有地图，于是，他们只能从当地人的口中搜集信息，这些信息包括建筑物的位置和建筑物之间的距离。尽管这些信息并不完整，但是它们都是正确的。\n   \n$\\text{Javaville}$ 的街道是一个矩形网格，包含 $m$ 条东西走向的街道，依次用大写字母$\\text{A},\\text{B},\\text{C},\\cdots$标识，$n$ 条南北走向的街道，依次用数字 $0,1,2,\\cdots$ 标识。我们把两条街道的交点称为交叉路口，两个交叉路口之间的一段街道称为街区。所有的建筑物都位于交叉路口处，每个交叉路口至多只有一座建筑物。建筑物之间的距离定义为从一座建筑物到另一座建筑物所需经过的最少的街区数。\n    \n例如，$\\text{Bill}$ 和 $\\text{Scott}$ 搜集了以下这些信息：\n- 城市中有 $5$ 条东西走向的街道和 $5$ 条南北走向的街道；\n- 住宅 $1$ 位于交叉路口 $A0$；\n- 邮局位于交叉路口 $A4$；\n- 学校与住宅 $1$ 距离 $4$ 个街区；\n- 住宅 $2$ 与邮局距离 $6$ 个街区；\n- 学校与邮局距离 $6$ 个街区；\n- 住宅 $3$ 与邮局距离 $6$ 个街区；\n\n![](https://darkbzoj.tk/JudgeOnline/upload/201112/1(4).jpg)\n\n根据以上信息，我们可以得到 $\\text{Javaville}$ 城市可能的两种布局。我们发现：住宅 $1$，邮局和学校的位置都已经确定了，而住宅 $2$ 可以位于 $C0$ 或 $E2$，住宅 $3$ 可以位于 $C0$ 或$E2$。于是，城市中总是存在两座住宅相距 $6$ 个街区（地图 $1$ 中的 $h1$ 与 $h3$，地图 $2$ 中的 $h1$ 与 $h2$）。但是，对于确定的两座住宅，我们可以保证的最长距离只有 $4$ 个街区 ($h2$ 与 $h3$ 的距离总是 $4$ 个街区)。于是，我们要告诉 $\\text{Bill}$ 和 $\\text{Scott}$，尽管总是存在两座相距 $6$ 个街区的住宅，然而最安全的建议是：一人购买住宅 $2$，另一人购买住宅 $3$。\n\n下面给出所求数值的严格定义：\n\n- 一个可行的城市布局 $S$ 的直径 $d(S)$ 定义为该布局中距离最远的两座住宅之间的距离。\n\n- 对于确定的两座住宅 $i, j$，它们的安全系数 $e[i, j]$ 定义为在所有可行的城市布局中，住宅 $i, j$ 之间的距离的最小值。\n\n$\\text{Bill}$ 和 $text{Scott}$ 希望你编写一个程序，根据他们所搜集到的信息，计算出 $D$ 和$E$。其中：$D=\\min\\{d(S)\\}$；$E=\\max\\{e[i, j]\\}$。同时你还要给出最安全的购房建议，即所有满足 $e[i, j]=E$ 的住宅 $i, j$。\n\n对于上面的例子，第一种布局的 $d(S_1)=6$，第二种布局的 $d(S_2)=6$。每两座住宅之间的安全系数是：$e[1,2]=2，e[1,3]=2，e[2,3]=4$。于是：$D=min{d(S1),d(S2)}=6，E= max{e[1,2],e[1,3],e[2,3]}=4$，最安全的购房建议是：住宅 $2$ 与住宅 $3$。", "inputFormat": "第一行包含两个正整数 $m, n（1\\le m, n\\le 10）$，分别表示东西走向的街道数目和南北走向的街道数目。第二行包含一个整数，表示所搜集到的信息条数 $t(1\\le t\\le 50)$。文件从第三行开始每行描述一条所搜集到的信息，每条信息都是以下两种形式之一：\n- `name  LOCATION  r  c`\n\n或者\n\n- `name  DISTANCE  d  name2`\n\n这两种形式分别描述建筑物的位置和建筑物之间的距离。\n\n其中，$\\text{name}$ 和 $\\text{name2}$ 是仅包含数字和小写字母的字符串，长度不超过 $20$，表示建筑的名称。$r$ 是 $\\text{A}$ 到 $\\text{J}$ 之间的大写字母，$c$ 是一个数字，表示建筑物所位于的交叉路口。$d$ 是一个正整数，表示两座建筑物之间的距离。如果建筑物名称的前五个字符是小写字母 $\\text{“house”}$，那么表示这是一座可以购买的住宅，否则表示一座非民用的建筑物。如果信息是第二种形式，那么其中的 $\\text{name2}$ 一定在前面的信息中出现过。\n\n这组信息中至少包含两座可以购买的住宅，至多包含 $25$ 座不同的建筑物。", "outputFormat": "第一行包含两个整数，分别表示 $D$ 和 $E$，之间用一个空格隔开", "hint": "所有数据范围均在输入格式中提到。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTSC2002] 购房计划", "background": "", "description": "$\\text{Bill}$ 和 $\\text{Scott}$ 是商业对手。他们都计划在 $\\text{Javaville}$ 城市购买一幢房子，但是他们希望自己的住宅尽量远离对方的住宅。由于 $\\text{Javaville}$ 是一座新兴的城市，所以暂时还没有地图，于是，他们只能从当地人的口中搜集信息，这些信息包括建筑物的位置和建筑物之间的距离。尽管这些信息并不完整，但是它们都是正确的。\n   \n$\\text{Javaville}$ 的街道是一个矩形网格，包含 $m$ 条东西走向的街道，依次用大写字母$\\text{A},\\text{B},\\text{C},\\cdots$标识，$n$ 条南北走向的街道，依次用数字 $0,1,2,\\cdots$ 标识。我们把两条街道的交点称为交叉路口，两个交叉路口之间的一段街道称为街区。所有的建筑物都位于交叉路口处，每个交叉路口至多只有一座建筑物。建筑物之间的距离定义为从一座建筑物到另一座建筑物所需经过的最少的街区数。\n    \n例如，$\\text{Bill}$ 和 $\\text{Scott}$ 搜集了以下这些信息：\n- 城市中有 $5$ 条东西走向的街道和 $5$ 条南北走向的街道；\n- 住宅 $1$ 位于交叉路口 $A0$；\n- 邮局位于交叉路口 $A4$；\n- 学校与住宅 $1$ 距离 $4$ 个街区；\n- 住宅 $2$ 与邮局距离 $6$ 个街区；\n- 学校与邮局距离 $6$ 个街区；\n- 住宅 $3$ 与邮局距离 $6$ 个街区；\n\n![](https://darkbzoj.tk/JudgeOnline/upload/201112/1(4).jpg)\n\n根据以上信息，我们可以得到 $\\text{Javaville}$ 城市可能的两种布局。我们发现：住宅 $1$，邮局和学校的位置都已经确定了，而住宅 $2$ 可以位于 $C0$ 或 $E2$，住宅 $3$ 可以位于 $C0$ 或$E2$。于是，城市中总是存在两座住宅相距 $6$ 个街区（地图 $1$ 中的 $h1$ 与 $h3$，地图 $2$ 中的 $h1$ 与 $h2$）。但是，对于确定的两座住宅，我们可以保证的最长距离只有 $4$ 个街区 ($h2$ 与 $h3$ 的距离总是 $4$ 个街区)。于是，我们要告诉 $\\text{Bill}$ 和 $\\text{Scott}$，尽管总是存在两座相距 $6$ 个街区的住宅，然而最安全的建议是：一人购买住宅 $2$，另一人购买住宅 $3$。\n\n下面给出所求数值的严格定义：\n\n- 一个可行的城市布局 $S$ 的直径 $d(S)$ 定义为该布局中距离最远的两座住宅之间的距离。\n\n- 对于确定的两座住宅 $i, j$，它们的安全系数 $e[i, j]$ 定义为在所有可行的城市布局中，住宅 $i, j$ 之间的距离的最小值。\n\n$\\text{Bill}$ 和 $text{Scott}$ 希望你编写一个程序，根据他们所搜集到的信息，计算出 $D$ 和$E$。其中：$D=\\min\\{d(S)\\}$；$E=\\max\\{e[i, j]\\}$。同时你还要给出最安全的购房建议，即所有满足 $e[i, j]=E$ 的住宅 $i, j$。\n\n对于上面的例子，第一种布局的 $d(S_1)=6$，第二种布局的 $d(S_2)=6$。每两座住宅之间的安全系数是：$e[1,2]=2，e[1,3]=2，e[2,3]=4$。于是：$D=min{d(S1),d(S2)}=6，E= max{e[1,2],e[1,3],e[2,3]}=4$，最安全的购房建议是：住宅 $2$ 与住宅 $3$。", "inputFormat": "第一行包含两个正整数 $m, n（1\\le m, n\\le 10）$，分别表示东西走向的街道数目和南北走向的街道数目。第二行包含一个整数，表示所搜集到的信息条数 $t(1\\le t\\le 50)$。文件从第三行开始每行描述一条所搜集到的信息，每条信息都是以下两种形式之一：\n- `name  LOCATION  r  c`\n\n或者\n\n- `name  DISTANCE  d  name2`\n\n这两种形式分别描述建筑物的位置和建筑物之间的距离。\n\n其中，$\\text{name}$ 和 $\\text{name2}$ 是仅包含数字和小写字母的字符串，长度不超过 $20$，表示建筑的名称。$r$ 是 $\\text{A}$ 到 $\\text{J}$ 之间的大写字母，$c$ 是一个数字，表示建筑物所位于的交叉路口。$d$ 是一个正整数，表示两座建筑物之间的距离。如果建筑物名称的前五个字符是小写字母 $\\text{“house”}$，那么表示这是一座可以购买的住宅，否则表示一座非民用的建筑物。如果信息是第二种形式，那么其中的 $\\text{name2}$ 一定在前面的信息中出现过。\n\n这组信息中至少包含两座可以购买的住宅，至多包含 $25$ 座不同的建筑物。", "outputFormat": "第一行包含两个整数，分别表示 $D$ 和 $E$，之间用一个空格隔开", "hint": "所有数据范围均在输入格式中提到。", "locale": "zh-CN"}}}
{"pid": "P7198", "type": "P", "difficulty": 6, "samples": [["4 6 2 5\n1 1 1 5 4 1 4 5 3 3\n1 2 1 2 6 1 3 2 1 3 6 1 4 3 1\n3 2 6 1 3 5\n2 1 7 4 4 6\n2 3 1 4 3 4\n4 3 4 3 2 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "CTSC/CTS"], "title": "[CTSC2002] 玩具兵", "background": "", "description": "小明的爸爸给他买了一盒玩具兵，其中有 $K$ 个步兵，$K$ 个骑兵和一个天兵，个个高大威猛，形象逼真。盒子里还有一个$M\\times N$棋盘，每个格子 $(i,j)$ 都有一个高度$H_{i,j}$，并且大得足以容纳所有的玩具兵。小明把所有的玩具兵都放到棋盘上去，突然想到了一种很有趣的玩法：任意挑选 $T$ 个不同的格子，并给每个格子 $i$ 规定一个重要值$R_i$，游戏的目标就是每次沿东南西北之一的方向把一个玩具兵移动到其相邻的格子中（但不能移动到棋盘外面去），最终使得每个挑选出的格子 $i$ 上恰好有 $R_i$ 个玩具兵。小明希望所有的玩具兵都在某个选定的格子中，因此他总是使选出的T个格子的重要值之和等于玩具兵的个数。为了增加难度，小明给玩具兵们的移动方式做了一些规定：\n\n- 步兵只会往高处爬，因此如果两个格子A和B相邻，当且仅当格子A的高度小于或等于B，步兵才可以从A移动到B。\n\n- 骑兵只会往低处跳，因此如果两个格子A和B相邻，当且仅当格子A的高度大于或等于B，骑兵才可以从A移动到B。\n\n- 天兵技术全面，移动不受任何限制。\n\n可是没玩几次，小明就发现这个游戏太难了，他常常玩了好半天也达不到目的。于是，他设计了一种“超能力”，每使用一次超能力的时候，虽然不能移动任何一个玩具兵，但可对它们进行任意多次交换操作，每次交换两个玩具兵。等这次超能力使用完后又可和平常一样继续移动这些玩具兵。借助强大的超能力，这个游戏是容易玩通的，但是怎样才能让使用超能力的次数最少呢？", "inputFormat": "第一行包含四个整数：$M,N,K,T (2\\le M,N\\le 100, 1\\le K\\le 50, 1\\le T\\le 2K+1)$\n\n第二行包括 $2K+1$ 个数对 $(x_i,y_i)$，代表各个玩具兵的初始位置。前 $K$ 个代表步兵，接下来的 $K$ 个代表骑兵，最后一个代表天兵。\n\n第三行包含 $T$ 个三元组 $(x_i,y_i,r_i)$，第 $i$ 组代表第 $i$ 个目标格的位置和重要值。\n\n以下 $M$ 行，每行 $N$ 个整数。其中第 $i$ 行第 $j$ 个数为即格子的高度 $H_{i,j}$。高度是不超过 $100$ 的正整数，注意：不同玩具兵的初始位置可能相同。输入数据保证无错，选定的 $T$ 个格子的重要值之和保证等于 $2K+1$。", "outputFormat": "仅包含一行，即使用超能力的最小次数 $T$。", "hint": "所有数据范围均在输入格式内。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTSC2002] 玩具兵", "background": "", "description": "小明的爸爸给他买了一盒玩具兵，其中有 $K$ 个步兵，$K$ 个骑兵和一个天兵，个个高大威猛，形象逼真。盒子里还有一个$M\\times N$棋盘，每个格子 $(i,j)$ 都有一个高度$H_{i,j}$，并且大得足以容纳所有的玩具兵。小明把所有的玩具兵都放到棋盘上去，突然想到了一种很有趣的玩法：任意挑选 $T$ 个不同的格子，并给每个格子 $i$ 规定一个重要值$R_i$，游戏的目标就是每次沿东南西北之一的方向把一个玩具兵移动到其相邻的格子中（但不能移动到棋盘外面去），最终使得每个挑选出的格子 $i$ 上恰好有 $R_i$ 个玩具兵。小明希望所有的玩具兵都在某个选定的格子中，因此他总是使选出的T个格子的重要值之和等于玩具兵的个数。为了增加难度，小明给玩具兵们的移动方式做了一些规定：\n\n- 步兵只会往高处爬，因此如果两个格子A和B相邻，当且仅当格子A的高度小于或等于B，步兵才可以从A移动到B。\n\n- 骑兵只会往低处跳，因此如果两个格子A和B相邻，当且仅当格子A的高度大于或等于B，骑兵才可以从A移动到B。\n\n- 天兵技术全面，移动不受任何限制。\n\n可是没玩几次，小明就发现这个游戏太难了，他常常玩了好半天也达不到目的。于是，他设计了一种“超能力”，每使用一次超能力的时候，虽然不能移动任何一个玩具兵，但可对它们进行任意多次交换操作，每次交换两个玩具兵。等这次超能力使用完后又可和平常一样继续移动这些玩具兵。借助强大的超能力，这个游戏是容易玩通的，但是怎样才能让使用超能力的次数最少呢？", "inputFormat": "第一行包含四个整数：$M,N,K,T (2\\le M,N\\le 100, 1\\le K\\le 50, 1\\le T\\le 2K+1)$\n\n第二行包括 $2K+1$ 个数对 $(x_i,y_i)$，代表各个玩具兵的初始位置。前 $K$ 个代表步兵，接下来的 $K$ 个代表骑兵，最后一个代表天兵。\n\n第三行包含 $T$ 个三元组 $(x_i,y_i,r_i)$，第 $i$ 组代表第 $i$ 个目标格的位置和重要值。\n\n以下 $M$ 行，每行 $N$ 个整数。其中第 $i$ 行第 $j$ 个数为即格子的高度 $H_{i,j}$。高度是不超过 $100$ 的正整数，注意：不同玩具兵的初始位置可能相同。输入数据保证无错，选定的 $T$ 个格子的重要值之和保证等于 $2K+1$。", "outputFormat": "仅包含一行，即使用超能力的最小次数 $T$。", "hint": "所有数据范围均在输入格式内。", "locale": "zh-CN"}}}
{"pid": "P7199", "type": "P", "difficulty": 2, "samples": [["1\n1 5", "15"], ["2\n9 13\n44 45", "19\n17"], ["1\n1998 2018", "102"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "2019", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #1] Trol", "background": "", "description": "Stjepan 最近在萨格勒布大学获得了数学学士学位。他的父母自然而然地为他感到骄傲，并决定给他所有不超过 $2^{60}$ 的正整数作为礼物。为了保证它们的安全，他迅速地将所有数存入了一个序列 $A$，使得 $A_i=i$。\n\n一个妒忌他的朋友 Marin 决定做一个恶作剧：**不断地把 $A$ 中的每个元素替换为其所有数位之和，直到最终只剩下一位数。**\n\n例如，第 $197$ 个元素的初始值为 $197$。Marin 先将这个值变为 $1+9+7=17$，然后再一次改变了它，使其变为 $1+7=8$。\n\nStjepan 对此极为震惊，并请求 Marin 把序列变回初始状态。不幸的是，在他正确回答 $Q$ 个询问之前，Marin 并不会如此。对于每一个询问，Stjepan 需要回答 $A$ 序列中第 $l$ 项至第 $r$ 项元素的总和。\n\n来帮 Stjepan 回答这些询问吧！", "inputFormat": "第一行包含一个整数 $Q$，表示询问次数。\n\n接下来的 $Q$ 行，每行包含两个正整数 $l_i,r_i$，表示 Marin 第 $i$ 次询问的区间范围。", "outputFormat": "输出 $Q$ 个询问的答案。答案之间应当用换行符两两分开，并且应当符合询问的顺序。", "hint": "#### 数据规模及约定\n\n对于 $20\\%$ 的数据，所有询问满足 $1 \\le l_i \\le r_i \\le 9$。\n\n对于 $60\\%$ 的数据，所有询问满足 $r_i-l_i \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le Q \\le 100$，所有询问满足 $1 \\le l_i \\le r_i \\le 2^{60}$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #1](https://hsin.hr/coci/archive/2019_2020/contest1_tasks.pdf)  _T1 Trol_ 。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #1] Trol", "background": "", "description": "Stjepan 最近在萨格勒布大学获得了数学学士学位。他的父母自然而然地为他感到骄傲，并决定给他所有不超过 $2^{60}$ 的正整数作为礼物。为了保证它们的安全，他迅速地将所有数存入了一个序列 $A$，使得 $A_i=i$。\n\n一个妒忌他的朋友 Marin 决定做一个恶作剧：**不断地把 $A$ 中的每个元素替换为其所有数位之和，直到最终只剩下一位数。**\n\n例如，第 $197$ 个元素的初始值为 $197$。Marin 先将这个值变为 $1+9+7=17$，然后再一次改变了它，使其变为 $1+7=8$。\n\nStjepan 对此极为震惊，并请求 Marin 把序列变回初始状态。不幸的是，在他正确回答 $Q$ 个询问之前，Marin 并不会如此。对于每一个询问，Stjepan 需要回答 $A$ 序列中第 $l$ 项至第 $r$ 项元素的总和。\n\n来帮 Stjepan 回答这些询问吧！", "inputFormat": "第一行包含一个整数 $Q$，表示询问次数。\n\n接下来的 $Q$ 行，每行包含两个正整数 $l_i,r_i$，表示 Marin 第 $i$ 次询问的区间范围。", "outputFormat": "输出 $Q$ 个询问的答案。答案之间应当用换行符两两分开，并且应当符合询问的顺序。", "hint": "#### 数据规模及约定\n\n对于 $20\\%$ 的数据，所有询问满足 $1 \\le l_i \\le r_i \\le 9$。\n\n对于 $60\\%$ 的数据，所有询问满足 $r_i-l_i \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le Q \\le 100$，所有询问满足 $1 \\le l_i \\le r_i \\le 2^{60}$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #1](https://hsin.hr/coci/archive/2019_2020/contest1_tasks.pdf)  _T1 Trol_ 。**", "locale": "zh-CN"}}}
{"pid": "P7200", "type": "P", "difficulty": 2, "samples": [["13 11", "2\n13 11"], ["37 11", "-1"], ["2 17", "3\n2 19 17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "Special Judge", "深度优先搜索 DFS", "素数判断,质数,筛法", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #1] Lutrija", "background": "Vedran 在赌输彩票之后，无意之间打开了 COCI 的频道。只要完成 COCI 给出的任务，他就能够免除前往新加坡 IOI2020 现场的费用。\n\n不幸的是，Vedran 已经老了，于是你决定帮帮他。", "description": "给定两个素数 $A,B$。你需要给出一个开头和结尾分别为 $A$ 和 $B$ 的序列，使得其所有元素均为素数，并且相邻两个元素之间的差值也为素数。", "inputFormat": "输入两个素数 $A,B$。", "outputFormat": "如果任务不可能完成，即没有满足条件的序列（以下称为有解），则只输出 `-1`。\n\n否则，在第一行输出序列的元素个数，并在第二行输出所有元素。\n\n如果有解，则你的构造必须满足下列二者之一：\n\n- 序列元素个数不超过 $30$\n- 任何一个元素都不超过 $10^{15}$。\n\n如果有多组解，则输出任意一种。", "hint": "#### 数据规模及约定\n\n对于 $20\\%$ 的数据，如果有解，则必定有一种解，满足元素的个数不超过 $3$，且其中的所有元素都不超过 $1000$。\n\n对于另外 $40\\%$ 的数据，$2 \\le A,B \\le 1000$。\n\n对于 $100\\%$ 的数据，$2 \\le A,B \\le 10^{14},A \\neq B$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n由于平均下来每个测试点为 $2.5$ 分，因而将其中一半的测试点设置为 $2$ 分，另一半设置为 $3$ 分。\n\n本题使用非官方的 [Special Judge](https://www.luogu.com.cn/paste/hrj05be5)，欢迎大家 hack（可私信或直接发帖）。\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #1](https://hsin.hr/coci/archive/2019_2020/contest1_tasks.pdf)  _T2 Lutrija_ 。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #1] Lutrija", "background": "Vedran 在赌输彩票之后，无意之间打开了 COCI 的频道。只要完成 COCI 给出的任务，他就能够免除前往新加坡 IOI2020 现场的费用。\n\n不幸的是，Vedran 已经老了，于是你决定帮帮他。", "description": "给定两个素数 $A,B$。你需要给出一个开头和结尾分别为 $A$ 和 $B$ 的序列，使得其所有元素均为素数，并且相邻两个元素之间的差值也为素数。", "inputFormat": "输入两个素数 $A,B$。", "outputFormat": "如果任务不可能完成，即没有满足条件的序列（以下称为有解），则只输出 `-1`。\n\n否则，在第一行输出序列的元素个数，并在第二行输出所有元素。\n\n如果有解，则你的构造必须满足下列二者之一：\n\n- 序列元素个数不超过 $30$\n- 任何一个元素都不超过 $10^{15}$。\n\n如果有多组解，则输出任意一种。", "hint": "#### 数据规模及约定\n\n对于 $20\\%$ 的数据，如果有解，则必定有一种解，满足元素的个数不超过 $3$，且其中的所有元素都不超过 $1000$。\n\n对于另外 $40\\%$ 的数据，$2 \\le A,B \\le 1000$。\n\n对于 $100\\%$ 的数据，$2 \\le A,B \\le 10^{14},A \\neq B$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n由于平均下来每个测试点为 $2.5$ 分，因而将其中一半的测试点设置为 $2$ 分，另一半设置为 $3$ 分。\n\n本题使用非官方的 [Special Judge](https://www.luogu.com.cn/paste/hrj05be5)，欢迎大家 hack（可私信或直接发帖）。\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #1](https://hsin.hr/coci/archive/2019_2020/contest1_tasks.pdf)  _T2 Lutrija_ 。**", "locale": "zh-CN"}}}
{"pid": "P7201", "type": "P", "difficulty": 5, "samples": [["1 0\n1000\n1\n1000", "0"], ["3 2\n1 2 3\n1 2\n1 3\n3\n2\n3\n5", "0\n2\n2"], ["14 13\n2 3 4 19 20 21 5 22 6 7 23 8 10 14\n1 2\n1 3\n1 4\n2 5\n2 6\n3 7\n3 8\n3 9\n4 10\n8 11\n10 13\n10 12\n12 14\n3\n45\n44\n23", "8\n7\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2019", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #1] Džumbus", "background": "", "description": "Marin 是一个心地善良的人，因此他将为他的 $N$ 个朋友组织 $Q$ 次宴会。宴会上唯一的饮料被称为 _džumbus_。\n\n每位朋友对这种饮料的需求量是已知的。在这些朋友中，有 $M$ 组朋友。每一组中的两位在同时满足他们各自的需求量后，将开始互相核对自己对往届 COCI 题目的答案。\n\n当朋友 $A$ 把自己的答案分享给朋友 $B$ 时，朋友 $B$ 可以决定是否要以相同的方式进行分享。然而，这 $M$ 组朋友不可能将 $A$ 分享给别人的答案重新分享给 $A$。\n\nMarin 为每一次宴会准备了不同单位量的 džumbus。在每次宴会的过程中，他想要使分享给别人答案至少一次的朋友数量最多。\n\n你的任务是找到会与别人分享答案的朋友的最大数量。", "inputFormat": "第一行包含题中所提到的两个整数 $N$ 和 $M$。\n\n第二行包含 $N$ 个整数，其中第 $i$ 个整数为 $D_i$，表示第 $i$ 个朋友对这种饮料的需求量。\n\n接下来的 $M$ 行，每行包含两个整数 $A_i,B_i$（$A_i \\neq B_i$），表示第 $i$ 对朋友。\n\n接下来的一行，包含整数 $Q$。\n\n接下来的 $Q$ 行，每行包含一个整数 $S_i$ 表示第 $i$ 次宴会的饮料总量。", "outputFormat": "分别输出每次宴会的答案，即会与别人分享答案的朋友的最大数量。\n\n每两次宴会的答案之间用换行符分开。", "hint": "#### 样例解释\n\n在第三个样例中的第一个宴会过程中，Marin 决定让编号为 $1,2,3,7,9,10,12,13$ 的朋友达到各自的需求量。他们总共饮用了 $45$ 个单位的饮料。\n\n如下图，建立一个无向图，用点来表示朋友，用边表示二者是否为一组。其中 exchange 表示两个朋友之间交换答案。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/37y5ctim.png?x-oss-process=image/resize,m_lfit,h_377,w_438)\n\n#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $M = N - 1, 1 \\le S_i \\le 1000$ | 每位朋友最多只与两位其他朋友分享答案 |\n| $2$ | $30$ | $M = N - 1$ | 每位朋友最多只与两位其他朋友分享答案 |\n| $3$ | $30$ | $N \\le 100$ | 无 |\n| $4$ | $30$ | 无 | 无 |\n\n对于 $100\\%$ 的数据，$0 \\le M \\lt N \\le 1000, 1 \\le Q \\le 2 \\times 10^5, 1 \\le D_i \\le 10^9, 1 \\le S_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #1](https://hsin.hr/coci/archive/2019_2020/contest1_tasks.pdf)  _T3 Džumbus_ 。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #1] Džumbus", "background": "", "description": "Marin 是一个心地善良的人，因此他将为他的 $N$ 个朋友组织 $Q$ 次宴会。宴会上唯一的饮料被称为 _džumbus_。\n\n每位朋友对这种饮料的需求量是已知的。在这些朋友中，有 $M$ 组朋友。每一组中的两位在同时满足他们各自的需求量后，将开始互相核对自己对往届 COCI 题目的答案。\n\n当朋友 $A$ 把自己的答案分享给朋友 $B$ 时，朋友 $B$ 可以决定是否要以相同的方式进行分享。然而，这 $M$ 组朋友不可能将 $A$ 分享给别人的答案重新分享给 $A$。\n\nMarin 为每一次宴会准备了不同单位量的 džumbus。在每次宴会的过程中，他想要使分享给别人答案至少一次的朋友数量最多。\n\n你的任务是找到会与别人分享答案的朋友的最大数量。", "inputFormat": "第一行包含题中所提到的两个整数 $N$ 和 $M$。\n\n第二行包含 $N$ 个整数，其中第 $i$ 个整数为 $D_i$，表示第 $i$ 个朋友对这种饮料的需求量。\n\n接下来的 $M$ 行，每行包含两个整数 $A_i,B_i$（$A_i \\neq B_i$），表示第 $i$ 对朋友。\n\n接下来的一行，包含整数 $Q$。\n\n接下来的 $Q$ 行，每行包含一个整数 $S_i$ 表示第 $i$ 次宴会的饮料总量。", "outputFormat": "分别输出每次宴会的答案，即会与别人分享答案的朋友的最大数量。\n\n每两次宴会的答案之间用换行符分开。", "hint": "#### 样例解释\n\n在第三个样例中的第一个宴会过程中，Marin 决定让编号为 $1,2,3,7,9,10,12,13$ 的朋友达到各自的需求量。他们总共饮用了 $45$ 个单位的饮料。\n\n如下图，建立一个无向图，用点来表示朋友，用边表示二者是否为一组。其中 exchange 表示两个朋友之间交换答案。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/37y5ctim.png?x-oss-process=image/resize,m_lfit,h_377,w_438)\n\n#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $M = N - 1, 1 \\le S_i \\le 1000$ | 每位朋友最多只与两位其他朋友分享答案 |\n| $2$ | $30$ | $M = N - 1$ | 每位朋友最多只与两位其他朋友分享答案 |\n| $3$ | $30$ | $N \\le 100$ | 无 |\n| $4$ | $30$ | 无 | 无 |\n\n对于 $100\\%$ 的数据，$0 \\le M \\lt N \\le 1000, 1 \\le Q \\le 2 \\times 10^5, 1 \\le D_i \\le 10^9, 1 \\le S_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #1](https://hsin.hr/coci/archive/2019_2020/contest1_tasks.pdf)  _T3 Džumbus_ 。**", "locale": "zh-CN"}}}
{"pid": "P7202", "type": "P", "difficulty": 6, "samples": [["4\n1212", "DA\n1 3 3"], ["4\n1213", "NE"], ["7\n1223121", "DA\n1 3 3\n3 5 1\n5 7 3\n7 3 2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #1] Trobojnica", "background": "", "description": "> \"Everything will be in flames once red, white, and blue start running through your veins.\" - Slaven Bilić\n\n在该任务中，我们将会研究一些多边形，它们具有 $N$ 条被涂成颜色的边（总共有三种颜色），而顶点的编号沿顺时针依次为 $1$ 至 $N$。\n\n你的任务是找到一个多边形的三角形分割方式，即将一个多边形沿对角线分成 $N-2$ 个三角形，使得多边形的每个三角形的三条邻边都各分别为三种不同的颜色。", "inputFormat": "第一行包含一个题中所提的整数 $N$。\n\n第二行是一个共有 $N$ 个数位的整数，表示该多边形各边的颜色。其第一位表示边 $(1,2)$ 的颜色，第二位表示边 $(2,3)$ 的颜色，以此类推，第 $N$ 位表示边 $(N,1)$ 的颜色。所有数位都将会是 $1,2,3$ 中的其中一个。", "outputFormat": "如果没有符合条件的分法，输出 `NE` 并结束整个程序。\n\n否则，在第一行输出 `DA` 并在接下来的 $N-3$ 行中输出每一条被分割的对角线及其颜色。\n\n每行输出格式为 `X Y C`。其中 $X,Y$ 为对角线的两个顶点，而 $C$ 为其颜色编号（$1 \\le X,Y \\le N, 1 \\le C \\le 3$），不必考虑对角线顶点顺序。\n\n如果有多种符合条件的分法，输出任意一种。", "hint": "#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | $4 \\le N \\le 11$ |\n| $2$ | $40$ | $4 \\le N \\le 10^3$ |\n| $3$ | $50$ | $4 \\le N \\le 2 \\times 10^5$ |\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n本题使用非官方的 [Special Judge](https://www.luogu.com.cn/paste/wxx1bxs2)，欢迎大家 hack（可私信或直接发帖）。\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #1](https://hsin.hr/coci/archive/2019_2020/contest1_tasks.pdf)  _T4 Trobojnica_ 。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #1] Trobojnica", "background": "", "description": "> \"Everything will be in flames once red, white, and blue start running through your veins.\" - Slaven Bilić\n\n在该任务中，我们将会研究一些多边形，它们具有 $N$ 条被涂成颜色的边（总共有三种颜色），而顶点的编号沿顺时针依次为 $1$ 至 $N$。\n\n你的任务是找到一个多边形的三角形分割方式，即将一个多边形沿对角线分成 $N-2$ 个三角形，使得多边形的每个三角形的三条邻边都各分别为三种不同的颜色。", "inputFormat": "第一行包含一个题中所提的整数 $N$。\n\n第二行是一个共有 $N$ 个数位的整数，表示该多边形各边的颜色。其第一位表示边 $(1,2)$ 的颜色，第二位表示边 $(2,3)$ 的颜色，以此类推，第 $N$ 位表示边 $(N,1)$ 的颜色。所有数位都将会是 $1,2,3$ 中的其中一个。", "outputFormat": "如果没有符合条件的分法，输出 `NE` 并结束整个程序。\n\n否则，在第一行输出 `DA` 并在接下来的 $N-3$ 行中输出每一条被分割的对角线及其颜色。\n\n每行输出格式为 `X Y C`。其中 $X,Y$ 为对角线的两个顶点，而 $C$ 为其颜色编号（$1 \\le X,Y \\le N, 1 \\le C \\le 3$），不必考虑对角线顶点顺序。\n\n如果有多种符合条件的分法，输出任意一种。", "hint": "#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | $4 \\le N \\le 11$ |\n| $2$ | $40$ | $4 \\le N \\le 10^3$ |\n| $3$ | $50$ | $4 \\le N \\le 2 \\times 10^5$ |\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n本题使用非官方的 [Special Judge](https://www.luogu.com.cn/paste/wxx1bxs2)，欢迎大家 hack（可私信或直接发帖）。\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #1](https://hsin.hr/coci/archive/2019_2020/contest1_tasks.pdf)  _T4 Trobojnica_ 。**", "locale": "zh-CN"}}}
{"pid": "P7203", "type": "P", "difficulty": 2, "samples": [["5\n1\n1\n2\n2\n2", "2 3\n2\n3"], ["9\n1\n2\n2\n1\n1\n1\n2\n1\n1", "6 3\n3\n3"], ["3\n2\n1\n1", "2 1\n2\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["模拟", "2019", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #3] Preokret", "background": "圣诞节后的一天——圣史蒂芬日，将要到来了。在非宗教领域，它在英国被称为节礼日。在克罗地亚人通过享用大餐来庆祝的同时，我们的英国朋友却有着踢足球的传统。\n\n今年圣诞节，Pep 吃了太多的烤牛肉，因此他决定这次不踢足球，而是在家中分析球赛。", "description": "已知有 $N$ 次进球得分以及它们的顺序。他想要得到下列问题的答案：\n\n1. 最终的得分是多少，即 City 队及其对手的得分。\n\n2. 球赛过程中有几次打平，即两队进球数目相同。初始比分 `0:0` 也算作一次打平。\n\n3. 球赛中最大的「翻盘」。「翻盘」指其中一队在比分落后的情况之下，通过**连续**进球若干次，在比分上领先于对方。他想知道该队的进球数是多少。数据保证至少有一次「翻盘」。", "inputFormat": "第一行包含题中所提的整数 $N$。\n\n接下来的 $N$ 行，每行有一个整数 $1$ 或 $2$。$1$ 代表 City 队得分，$2$ 则代表其对手得分。", "outputFormat": "第一行，输出两个用空格分开的整数，表示 City 及其对手的进球数量。\n\n第二行，输出双方打平的次数。\n\n第三行，输出最大的「翻盘」。", "hint": "#### 样例解释\n\n第一个样例的解释：\n\n$6$ 次比分分别为：`0:0`、`1:0`、`2:0`、`2:1`、`2:2`、`2:3`。其中，有 $2$ 次平局—— `0:0` 和 `2:2`。最大的「翻盘」指 City 对手以 `2:0` 落后，但后续进球 $3$ 次，比分变为 `2:3`，得分超过 City。\n\n第二个样例的解释：\n\n$10$ 次比分分别为：`0:0`、`1:0`、`1:1`、`1:2`、`2:2`、`3:2`、`4:2`、`4:3`、`5:3`、`6:3`。其中，有 $3$ 次平局—— `0:0`、`1:1` 以及 `2:2`。最大的「翻盘」指 City 以 `1:2` 落后，但后续进球 $3$ 次，比分变为 `4:3`，得分超过对手。\n\n#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 250$。\n\n#### 评分方式\n\n本题中，每个测试点按行给分。第一行和第二行分值均为 $1$ 分，第三行分值为 $3$ 分，因而启用 Special Judge。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n本题使用非官方的 [Special Judge](https://www.luogu.com.cn/paste/zfwv9rik)，欢迎大家 hack（可私信或直接发帖）。\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #3](https://hsin.hr/coci/archive/2019_2020/contest3_tasks.pdf)  _T1 Preokret_ 。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #3] Preokret", "background": "圣诞节后的一天——圣史蒂芬日，将要到来了。在非宗教领域，它在英国被称为节礼日。在克罗地亚人通过享用大餐来庆祝的同时，我们的英国朋友却有着踢足球的传统。\n\n今年圣诞节，Pep 吃了太多的烤牛肉，因此他决定这次不踢足球，而是在家中分析球赛。", "description": "已知有 $N$ 次进球得分以及它们的顺序。他想要得到下列问题的答案：\n\n1. 最终的得分是多少，即 City 队及其对手的得分。\n\n2. 球赛过程中有几次打平，即两队进球数目相同。初始比分 `0:0` 也算作一次打平。\n\n3. 球赛中最大的「翻盘」。「翻盘」指其中一队在比分落后的情况之下，通过**连续**进球若干次，在比分上领先于对方。他想知道该队的进球数是多少。数据保证至少有一次「翻盘」。", "inputFormat": "第一行包含题中所提的整数 $N$。\n\n接下来的 $N$ 行，每行有一个整数 $1$ 或 $2$。$1$ 代表 City 队得分，$2$ 则代表其对手得分。", "outputFormat": "第一行，输出两个用空格分开的整数，表示 City 及其对手的进球数量。\n\n第二行，输出双方打平的次数。\n\n第三行，输出最大的「翻盘」。", "hint": "#### 样例解释\n\n第一个样例的解释：\n\n$6$ 次比分分别为：`0:0`、`1:0`、`2:0`、`2:1`、`2:2`、`2:3`。其中，有 $2$ 次平局—— `0:0` 和 `2:2`。最大的「翻盘」指 City 对手以 `2:0` 落后，但后续进球 $3$ 次，比分变为 `2:3`，得分超过 City。\n\n第二个样例的解释：\n\n$10$ 次比分分别为：`0:0`、`1:0`、`1:1`、`1:2`、`2:2`、`3:2`、`4:2`、`4:3`、`5:3`、`6:3`。其中，有 $3$ 次平局—— `0:0`、`1:1` 以及 `2:2`。最大的「翻盘」指 City 以 `1:2` 落后，但后续进球 $3$ 次，比分变为 `4:3`，得分超过对手。\n\n#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 250$。\n\n#### 评分方式\n\n本题中，每个测试点按行给分。第一行和第二行分值均为 $1$ 分，第三行分值为 $3$ 分，因而启用 Special Judge。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n本题使用非官方的 [Special Judge](https://www.luogu.com.cn/paste/zfwv9rik)，欢迎大家 hack（可私信或直接发帖）。\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #3](https://hsin.hr/coci/archive/2019_2020/contest3_tasks.pdf)  _T1 Preokret_ 。**", "locale": "zh-CN"}}}
{"pid": "P7204", "type": "P", "difficulty": 0, "samples": [["aaaaa\n2\n1 2\n4 5\n2 4 1 5 3", "2"], ["abbabaab\n3\n1 3\n4 7\n3 5\n6 3 5 1 4 2 7 8", "5"], ["abcd\n1\n1 4\n1 2 3 4", "0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "二分", "前缀和", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #3] Grudanje", "background": "Patrik 热爱研究英语单词。他尤其喜欢正好包含 $N$ 个字母的单词。他看到满足这种条件的单词时，便立即开始分析这个单词的 $Q$ 个子单词。如果这 $Q$ 个子单词的字母各不相同，那么他称原单词为「完美单词」。\n\nKrešimir 则不然，他则更喜欢朝 Patrik 扔雪球。在一个寒冷的冬天早晨，正当他在城中拿着 $N$ 个雪球游荡时，却突然撞到正在研究一个包含 $N$ 个字母的单词的 Patrik。\n\nKrešimir 向 Patrik 扔出了他的 $N$ 个雪球，其中第 $i$ 个雪球正好不偏不倚地砸在单词的第 $p_i$ 个字母上。", "description": "Patrik 决定重新对「完美单词」作出定义：对于一个长度为 $N$ 的单词的 $Q$ 个子单词，如果所有的子单词的未被雪覆盖的字母部分没有重复，那么原单词被称为「完美单词」。\n\n他想知道 Krešimir 在砸了几个雪球之后，原单词就成为了「完美单词」。", "inputFormat": "第一行包含一个只有小写英文字母的单词，其长度为 $N$。\n\n第二行包含一个整数 $Q$。\n\n接下来的 $Q$ 行，第 $i$ 行包含两个整数 $a_i,b_i$。这表示第 $i$ 个子单词是从原单词的第 $a_i$ 个字母至第 $b_i$ 个字母连续截取而来。\n\n接下来的一行，包含 $N$ 个互不相同的整数 $p_i$。", "outputFormat": "输出 Patrik 想要知道的答案，即输出在砸了几个（可能为 $0$）雪球之后，原单词才能成为「完美单词」。", "hint": "#### 样例解释\n\n第二个样例中的单词在分别被雪球砸掉之后的情况：\n\n```plain\nabbab*ab\nab*ab*ab\nab*a**ab\n*b*a**ab\n*b****ab\n******ab\n*******b\n********\n```\n\n#### 数据规模及约定\n\n对于 $20\\%$ 的数据，$1 \\le N,Q \\le 500$。\n\n对于另外 $30\\%$ 的数据，$1 \\le N,Q \\le 3000$。\n\n对于另外 $20\\%$ 的数据，原单词只包含字母 `a`。\n\n对于 $100\\%$ 的数据，$1 \\le N,Q \\le 10^5$，$1 \\le a_i \\le b_i \\le N$，$1 \\le p_i \\le N$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n由于平均下来每个测试点为 $2.5$ 分，因而将其中一半的测试点设置为 $2$ 分，另一半设置为 $3$ 分。\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #3](https://hsin.hr/coci/archive/2019_2020/contest3_tasks.pdf)  _T2 Grudanje_ 。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #3] Grudanje", "background": "Patrik 热爱研究英语单词。他尤其喜欢正好包含 $N$ 个字母的单词。他看到满足这种条件的单词时，便立即开始分析这个单词的 $Q$ 个子单词。如果这 $Q$ 个子单词的字母各不相同，那么他称原单词为「完美单词」。\n\nKrešimir 则不然，他则更喜欢朝 Patrik 扔雪球。在一个寒冷的冬天早晨，正当他在城中拿着 $N$ 个雪球游荡时，却突然撞到正在研究一个包含 $N$ 个字母的单词的 Patrik。\n\nKrešimir 向 Patrik 扔出了他的 $N$ 个雪球，其中第 $i$ 个雪球正好不偏不倚地砸在单词的第 $p_i$ 个字母上。", "description": "Patrik 决定重新对「完美单词」作出定义：对于一个长度为 $N$ 的单词的 $Q$ 个子单词，如果所有的子单词的未被雪覆盖的字母部分没有重复，那么原单词被称为「完美单词」。\n\n他想知道 Krešimir 在砸了几个雪球之后，原单词就成为了「完美单词」。", "inputFormat": "第一行包含一个只有小写英文字母的单词，其长度为 $N$。\n\n第二行包含一个整数 $Q$。\n\n接下来的 $Q$ 行，第 $i$ 行包含两个整数 $a_i,b_i$。这表示第 $i$ 个子单词是从原单词的第 $a_i$ 个字母至第 $b_i$ 个字母连续截取而来。\n\n接下来的一行，包含 $N$ 个互不相同的整数 $p_i$。", "outputFormat": "输出 Patrik 想要知道的答案，即输出在砸了几个（可能为 $0$）雪球之后，原单词才能成为「完美单词」。", "hint": "#### 样例解释\n\n第二个样例中的单词在分别被雪球砸掉之后的情况：\n\n```plain\nabbab*ab\nab*ab*ab\nab*a**ab\n*b*a**ab\n*b****ab\n******ab\n*******b\n********\n```\n\n#### 数据规模及约定\n\n对于 $20\\%$ 的数据，$1 \\le N,Q \\le 500$。\n\n对于另外 $30\\%$ 的数据，$1 \\le N,Q \\le 3000$。\n\n对于另外 $20\\%$ 的数据，原单词只包含字母 `a`。\n\n对于 $100\\%$ 的数据，$1 \\le N,Q \\le 10^5$，$1 \\le a_i \\le b_i \\le N$，$1 \\le p_i \\le N$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n由于平均下来每个测试点为 $2.5$ 分，因而将其中一半的测试点设置为 $2$ 分，另一半设置为 $3$ 分。\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #3](https://hsin.hr/coci/archive/2019_2020/contest3_tasks.pdf)  _T2 Grudanje_ 。**", "locale": "zh-CN"}}}
{"pid": "P7205", "type": "P", "difficulty": 5, "samples": [["4\n1 2 3 4", "2\n1 2\n2\n3 4"], ["6\n23 4 7 6 8 15", "3\n4 6 8\n3\n7 15 23"], ["6\n1 2 3 7 9 10", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #3] Drvca", "background": "", "description": "为了迎接圣诞老人，市政厅已经准备了 $N$ 棵圣诞树。相关人员想要将这些树排成两排，使得每一排中：\n\n- 相邻两树之间高度之差相等\n- 圣诞树按照高度从小到大的顺序排列。\n\n请你帮助大家找到一个合适的排列方式。", "inputFormat": "第一行，输入一个整数 $N$，表示圣诞树的总数。\n\n第二行，输入 $N$ 个整数，第 $i$ 个为 $h_i$，表示第 $i$ 棵圣诞树的高度。", "outputFormat": "第一行，输出一个整数 $A$，表示第一排圣诞树的数量。\n\n第二行，输出 $A$ 个整数，依次表示第一排各个圣诞树的高度。\n\n第三行，输出一个整数 $B$，表示第二排圣诞树的数量。\n\n第四行，输出 $B$ 个整数，依次表示第二排各个圣诞树的高度。\n\n给出的方案中，每排都必须有树，即 $A \\gt 0, B \\gt 0$，并且每一棵树都应该放在其中一排，即 $A+B=N$。并且，每一排的圣诞树都必须按照高度从小到大排列。如果有多种方案，请输出任意一种。否则，只输出一个整数 `-1`。", "hint": "#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 | 特殊性质\n| :----------: | :----------: | :----------: | :----------: \n| $1$ | $20$ | $N \\le 15$ | 无 |\n| $2$ | $30$ | $N \\le 300$ | 无 |\n| $3$ | $30$ | $N \\le 10^5$ | 有一种方案，使得两排圣诞树数量相等 |\n| $4$ | $30$ | 无 | 无 |\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 10^5, 1 \\le h_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n本题使用非官方的 [Special Judge](https://www.luogu.com.cn/paste/c2638vjq)，欢迎大家 hack（可私信或直接发帖）。\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #3](https://hsin.hr/coci/archive/2019_2020/contest3_tasks.pdf)  _T3 Drvca_ 。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #3] Drvca", "background": "", "description": "为了迎接圣诞老人，市政厅已经准备了 $N$ 棵圣诞树。相关人员想要将这些树排成两排，使得每一排中：\n\n- 相邻两树之间高度之差相等\n- 圣诞树按照高度从小到大的顺序排列。\n\n请你帮助大家找到一个合适的排列方式。", "inputFormat": "第一行，输入一个整数 $N$，表示圣诞树的总数。\n\n第二行，输入 $N$ 个整数，第 $i$ 个为 $h_i$，表示第 $i$ 棵圣诞树的高度。", "outputFormat": "第一行，输出一个整数 $A$，表示第一排圣诞树的数量。\n\n第二行，输出 $A$ 个整数，依次表示第一排各个圣诞树的高度。\n\n第三行，输出一个整数 $B$，表示第二排圣诞树的数量。\n\n第四行，输出 $B$ 个整数，依次表示第二排各个圣诞树的高度。\n\n给出的方案中，每排都必须有树，即 $A \\gt 0, B \\gt 0$，并且每一棵树都应该放在其中一排，即 $A+B=N$。并且，每一排的圣诞树都必须按照高度从小到大排列。如果有多种方案，请输出任意一种。否则，只输出一个整数 `-1`。", "hint": "#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 | 特殊性质\n| :----------: | :----------: | :----------: | :----------: \n| $1$ | $20$ | $N \\le 15$ | 无 |\n| $2$ | $30$ | $N \\le 300$ | 无 |\n| $3$ | $30$ | $N \\le 10^5$ | 有一种方案，使得两排圣诞树数量相等 |\n| $4$ | $30$ | 无 | 无 |\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 10^5, 1 \\le h_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n本题使用非官方的 [Special Judge](https://www.luogu.com.cn/paste/c2638vjq)，欢迎大家 hack（可私信或直接发帖）。\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #3](https://hsin.hr/coci/archive/2019_2020/contest3_tasks.pdf)  _T3 Drvca_ 。**", "locale": "zh-CN"}}}
{"pid": "P7206", "type": "P", "difficulty": 6, "samples": [["7\nimanade\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7", "3"], ["4\naabb\n1 2\n1 3\n3 4", "2"], ["8\nacdbabcd\n1 6\n6 7\n6 3\n3 4\n4 5\n5 2\n8 5", "5"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "二分", "哈希 hashing", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #3] Lampice", "background": "", "description": "Mirko 用 $N$ 个 LED 灯来装饰圣诞树，它们的颜色是已知的，并且通过 $(N-1)$ 条电线连接。\n\nMirko 在大功告成后，仔细地品味自己的作品。他被一种叫作「回文段」的特殊图案所吸引。「回文段」指一条从 $u$ 至 $v$ 的路径，它满足从 $u$ 到 $v$ 的路径所包含灯的颜色等于从 $v$ 到 $u$ 的路径所包含灯的颜色。\n\n求出圣诞树中最长的「回文段」。", "inputFormat": "第一行，输入一个整数 $N$，表示 LED 灯的数量。\n\n第二行，输入一个由 $N$ 个英文小写字母组成的字符串，其中第 $i$ 个字母代表第 $i$ 个灯的颜色。\n\n接下来的 $(N-1)$ 行，每行输入两个整数 $A,B$，表示 $A,B$ 之间用一条电线连接。", "outputFormat": "输出圣诞树中最长的「回文段」。", "hint": "#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $17$ | $N \\le 3000$ |\n| $2$ | $25$ | 第 $i$ 个与第 $i+1$ 个灯直接相连（$1 \\le i \\lt N$） |\n| $3$ | $31$ | 至多有 $100$ 个灯与另一个灯直接相连 |\n| $4$ | $37$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10^4, 1 \\le A,B \\le N, A \\neq B$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #3](https://hsin.hr/coci/archive/2019_2020/contest3_tasks.pdf)  _T4 Drvca_ 。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #3] Lampice", "background": "", "description": "Mirko 用 $N$ 个 LED 灯来装饰圣诞树，它们的颜色是已知的，并且通过 $(N-1)$ 条电线连接。\n\nMirko 在大功告成后，仔细地品味自己的作品。他被一种叫作「回文段」的特殊图案所吸引。「回文段」指一条从 $u$ 至 $v$ 的路径，它满足从 $u$ 到 $v$ 的路径所包含灯的颜色等于从 $v$ 到 $u$ 的路径所包含灯的颜色。\n\n求出圣诞树中最长的「回文段」。", "inputFormat": "第一行，输入一个整数 $N$，表示 LED 灯的数量。\n\n第二行，输入一个由 $N$ 个英文小写字母组成的字符串，其中第 $i$ 个字母代表第 $i$ 个灯的颜色。\n\n接下来的 $(N-1)$ 行，每行输入两个整数 $A,B$，表示 $A,B$ 之间用一条电线连接。", "outputFormat": "输出圣诞树中最长的「回文段」。", "hint": "#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $17$ | $N \\le 3000$ |\n| $2$ | $25$ | 第 $i$ 个与第 $i+1$ 个灯直接相连（$1 \\le i \\lt N$） |\n| $3$ | $31$ | 至多有 $100$ 个灯与另一个灯直接相连 |\n| $4$ | $37$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10^4, 1 \\le A,B \\le N, A \\neq B$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #3](https://hsin.hr/coci/archive/2019_2020/contest3_tasks.pdf)  _T4 Drvca_ 。**", "locale": "zh-CN"}}}
{"pid": "P7207", "type": "P", "difficulty": 6, "samples": [["1 3", "0 3"], ["3 5", "0 7\n1 5\n2 6"], ["5 10", "0 12\n1 13\n2 10\n3 11\n4 14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "2019", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #3] Sob", "background": "在漆黑的平安夜晚上，一个巨大的驯鹿闯入，对我们的英雄说：「在你解决这个问题之前，我将不会离开。」", "description": "给定两个正整数 $N,M$。\n\n现要将集合 $A=\\{0,1,2,\\cdots,N-1\\}$ 和 $B=\\{M,\\cdots,M+N-1\\}$ 中的数进行组合，选出 $N$ 个有序数对 $(x_i,y_i)$。要求：\n\n- $x_i \\in A$，$y_i \\in B$，$x_i \\& y_i = x_i$（$\\&$ 表示按位与运算）。\n- 所有的 $x_i$ 互不相同，所有的 $y_i$ 互不相同。", "inputFormat": "输入两个整数 $N,M$。", "outputFormat": "输出共有 $N$ 行。\n\n第 $i$ 行输出两个整数 $x_i,y_i$，其中 $x_i \\in A, y_i \\in B$。\n\n可以证明，符合条件的方案一定存在。", "hint": "#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $N$ 是 $2$ 的整数次幂 |\n| $2$ | $29$ | $N+M$ 是 $2$ 的整数次幂 |\n| $3$ | $39$ | $N+M \\le 1000$ |\n| $4$ | $32$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le N \\le M, N+M \\le 10^6$。\n\n#### 说明\n\n本题使用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/462bmlh1)，欢迎大家 hack（可私信或直接发帖）。\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #3](https://hsin.hr/coci/archive/2019_2020/contest3_tasks.pdf)  _T5 Sob_ 。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #3] Sob", "background": "在漆黑的平安夜晚上，一个巨大的驯鹿闯入，对我们的英雄说：「在你解决这个问题之前，我将不会离开。」", "description": "给定两个正整数 $N,M$。\n\n现要将集合 $A=\\{0,1,2,\\cdots,N-1\\}$ 和 $B=\\{M,\\cdots,M+N-1\\}$ 中的数进行组合，选出 $N$ 个有序数对 $(x_i,y_i)$。要求：\n\n- $x_i \\in A$，$y_i \\in B$，$x_i \\& y_i = x_i$（$\\&$ 表示按位与运算）。\n- 所有的 $x_i$ 互不相同，所有的 $y_i$ 互不相同。", "inputFormat": "输入两个整数 $N,M$。", "outputFormat": "输出共有 $N$ 行。\n\n第 $i$ 行输出两个整数 $x_i,y_i$，其中 $x_i \\in A, y_i \\in B$。\n\n可以证明，符合条件的方案一定存在。", "hint": "#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $N$ 是 $2$ 的整数次幂 |\n| $2$ | $29$ | $N+M$ 是 $2$ 的整数次幂 |\n| $3$ | $39$ | $N+M \\le 1000$ |\n| $4$ | $32$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le N \\le M, N+M \\le 10^6$。\n\n#### 说明\n\n本题使用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/462bmlh1)，欢迎大家 hack（可私信或直接发帖）。\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #3](https://hsin.hr/coci/archive/2019_2020/contest3_tasks.pdf)  _T5 Sob_ 。**", "locale": "zh-CN"}}}
{"pid": "P7208", "type": "P", "difficulty": 0, "samples": [["4 4\nTT*T\n*TTT\n***T\n***T", "1"], ["3 5\nTTBB*\n*T*B*\n*TTTT", "2"], ["7 5\nBT***\nBTBBB\nBTTTB\nBBT*B\nBBT*B\nBBT**\n*BBBB", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #1] Zoo", "background": "$2010$ 年圣诞节的晚上，萨格勒布是一片雪的世界。\n\nZdravko 决定离开自己的城堡，并在 Maksimir 公园散步。不幸的是，一个美妙的冬夜竟被一个魔鬼所侵扰。Zdravko 将其吓走，但这声惊吓引起了动物园的骚动。更严重的是，一群老虎和公牛被逼的想要逃跑，并找一个安静的地方睡觉。", "description": "在逃跑的过程中，动物们需要通过一个 $R \\times C$ 的矩形区域。它们必须从这片区域的左上角进入，并从右下角离开。\n\n为了更快地离开这里，动物们将一个接着一个地经过，并以一种随机的路径往四个方向（上、下、左、右）行走。也就是说，每一个动物并不一定选择最短路径，而且可能在同一位置停留数次（包括左上角和右下角）。\n\n动物们每踏上一个格子，便会留下脚印。如果当前位置已经有了脚印，那么该动物会擦除当前的脚印，并留下自己的脚印。\n\n你的任务是根据雪地脚印的情况，求出逃跑动物可能的最少数量。", "inputFormat": "第一行包含题中所提到的两个整数 $R,C$。\n\n接下来的 $R$ 行，每行有 $C$ 个字符，表示矩形的区域。其中，字符 `T` 表示老虎的脚印， `B` 表示公牛的脚印，`*` 表示没有行走痕迹的雪地。\n\n你可以认为，至少有 $1$ 个动物经过了矩形区域，并且每个进入矩形区域的动物都最终离开了区域。", "outputFormat": "输出逃跑动物可能的最少数量。", "hint": "#### 样例解释\n\n下列是对第二个样例的图片解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j3ugwb7t.png)\n\n#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $45$ | $2 \\le R, C \\le 100$ |\n| $2$ | $65$ | $2 \\le R, C \\le 1000$ |\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #1](https://hsin.hr/coci/archive/2019_2020/contest1_tasks.pdf)  _T5 Zoo_ 。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #1] Zoo", "background": "$2010$ 年圣诞节的晚上，萨格勒布是一片雪的世界。\n\nZdravko 决定离开自己的城堡，并在 Maksimir 公园散步。不幸的是，一个美妙的冬夜竟被一个魔鬼所侵扰。Zdravko 将其吓走，但这声惊吓引起了动物园的骚动。更严重的是，一群老虎和公牛被逼的想要逃跑，并找一个安静的地方睡觉。", "description": "在逃跑的过程中，动物们需要通过一个 $R \\times C$ 的矩形区域。它们必须从这片区域的左上角进入，并从右下角离开。\n\n为了更快地离开这里，动物们将一个接着一个地经过，并以一种随机的路径往四个方向（上、下、左、右）行走。也就是说，每一个动物并不一定选择最短路径，而且可能在同一位置停留数次（包括左上角和右下角）。\n\n动物们每踏上一个格子，便会留下脚印。如果当前位置已经有了脚印，那么该动物会擦除当前的脚印，并留下自己的脚印。\n\n你的任务是根据雪地脚印的情况，求出逃跑动物可能的最少数量。", "inputFormat": "第一行包含题中所提到的两个整数 $R,C$。\n\n接下来的 $R$ 行，每行有 $C$ 个字符，表示矩形的区域。其中，字符 `T` 表示老虎的脚印， `B` 表示公牛的脚印，`*` 表示没有行走痕迹的雪地。\n\n你可以认为，至少有 $1$ 个动物经过了矩形区域，并且每个进入矩形区域的动物都最终离开了区域。", "outputFormat": "输出逃跑动物可能的最少数量。", "hint": "#### 样例解释\n\n下列是对第二个样例的图片解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j3ugwb7t.png)\n\n#### 数据范围及约定\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $45$ | $2 \\le R, C \\le 100$ |\n| $2$ | $65$ | $2 \\le R, C \\le 1000$ |\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #1](https://hsin.hr/coci/archive/2019_2020/contest1_tasks.pdf)  _T5 Zoo_ 。**", "locale": "zh-CN"}}}
{"pid": "P7209", "type": "P", "difficulty": 3, "samples": [["3\n2 3 1", "8\nUZMI L L\nSTAVI L D\nUZMI L L\nUZMI D L\nSTAVI L L\nUZMI L D\nSTAVI L L\nSTAVI D L"], ["4\n1 1 2 5", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["模拟", "2020", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #3] Knjige", "background": "", "description": "Tin 认为书籍不按顺序摆放是最讨厌的。Ante 决定帮助他。在排序的过程中，每一步可以执行下列二者操作之一：\n\n- 若对应手上无书，则可从**堆顶**取下一本书并放在左手或右手上。\n- 将一本在其手上的书放置到书架顶端。\n\nAnte 希望你能找到一种方法，能使**左侧**书架的书能从顶部到底端依次对应从薄到厚。", "inputFormat": "第一行包含一个整数 $n$，表示左侧书架上书的数目。\n\n第二行包含 $n$ 个整数 $d_i$，依次按从顶部到底端顺序表示书籍的厚薄程度。", "outputFormat": "第一行输出一个整数 $k$，表示你的方法所需执行操作的步数。\n\n接下来的 $k$ 行，按照 `INSTRUCTION HAND SHELF` 格式输出：\n\n- `INSTRUCTION`：若 Ante 应从书架顶端取下一本书，则输出 `UZMI`；若他应往一个书架顶端放置一本书，则输出 `STAVI`。\n- `HAND`：若使用左手，则输出 `L`，否则输出 `D` 表示使用右手。\n- `SHELF`：若涉及到左侧书架，则输出 `L`，否则输出 `D` 表示涉及到右侧书架。\n\n你的方案**不一定**与最少操作次数相等，但总操作次数必须不超过 $100000$。可以证明，在满足数据条件的情况下，必定有至少一种方案。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2wyrdy5q.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，$1 \\le d_i \\le 1000$，$0 \\le k \\le 10^5$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n本题使用自行编写的非官方 [Special Judge](https://www.luogu.com.cn/paste/enzsg1cn)，欢迎大家 hack（可私信或直接发帖）。注意，Special Judge 对输出格式敏感，每行末尾请不要输出多余空格。\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf)  _T1 Knjige_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #3] Knjige", "background": "", "description": "Tin 认为书籍不按顺序摆放是最讨厌的。Ante 决定帮助他。在排序的过程中，每一步可以执行下列二者操作之一：\n\n- 若对应手上无书，则可从**堆顶**取下一本书并放在左手或右手上。\n- 将一本在其手上的书放置到书架顶端。\n\nAnte 希望你能找到一种方法，能使**左侧**书架的书能从顶部到底端依次对应从薄到厚。", "inputFormat": "第一行包含一个整数 $n$，表示左侧书架上书的数目。\n\n第二行包含 $n$ 个整数 $d_i$，依次按从顶部到底端顺序表示书籍的厚薄程度。", "outputFormat": "第一行输出一个整数 $k$，表示你的方法所需执行操作的步数。\n\n接下来的 $k$ 行，按照 `INSTRUCTION HAND SHELF` 格式输出：\n\n- `INSTRUCTION`：若 Ante 应从书架顶端取下一本书，则输出 `UZMI`；若他应往一个书架顶端放置一本书，则输出 `STAVI`。\n- `HAND`：若使用左手，则输出 `L`，否则输出 `D` 表示使用右手。\n- `SHELF`：若涉及到左侧书架，则输出 `L`，否则输出 `D` 表示涉及到右侧书架。\n\n你的方案**不一定**与最少操作次数相等，但总操作次数必须不超过 $100000$。可以证明，在满足数据条件的情况下，必定有至少一种方案。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2wyrdy5q.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$，$1 \\le d_i \\le 1000$，$0 \\le k \\le 10^5$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n本题使用自行编写的非官方 [Special Judge](https://www.luogu.com.cn/paste/enzsg1cn)，欢迎大家 hack（可私信或直接发帖）。注意，Special Judge 对输出格式敏感，每行末尾请不要输出多余空格。\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf)  _T1 Knjige_。**", "locale": "zh-CN"}}}
{"pid": "P7210", "type": "P", "difficulty": 4, "samples": [["2\naaa\nbbb\n3\naab\naba\nbbb", "Nina"], ["2\nacg\nbeh\n2\nadi\nbfj", "Emilija"], ["3\nja\nsam\nvlak\n5\nsto\nzgazit\nce\nte\nmali", "Nina"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #3] Vlak", "background": "", "description": "Nina 和 Emilija 在纸上做游戏。刚开始，纸是空白的。在一个回合里，一个玩家将一个字母加入到纸上一个单词的末尾。接着，二者交替顺序。规定 Nina 为先手。\n\n玩家们选择字母时必须遵循这样的原则：每一次添加字母**后**的单词必须是该玩家最喜爱歌曲中某个单词的前缀。如果某个玩家无法继续执行它的回合，那么她就输了。\n\n如果两位玩家选择的策略都是最佳的，请判断谁是赢家。", "inputFormat": "第一行包含一个正整数 $n$，表示 Nina 最喜爱歌曲中的单词数量。\n\n接下来的 $n$ 行，每一行输入 Nina 最喜爱歌曲中的一个单词。\n\n接下来的一行包含一个正整数 $m$，表示 Emilija 最喜爱歌曲中的单词数量。\n\n接下来的 $m$ 行，每一行输入 Emilija 最喜爱歌曲中的一个单词。\n\n输入的单词都只包含小写字母，且单词长度总和不超过 $200000$。", "outputFormat": "输出获胜的玩家，`Nina` 或 `Emilija`。", "hint": "#### 样例 1 解释\n\n如果 Nina 先写下字母 `b`，那么 Emilija 将必须写下 `b`，然后 Nina 将继续写下 `b`。则当前的单词为 `bbb`，而 Emilija 将无法继续执行下一步，因此 Nina 获胜。\n\n如果 Nina 先写下字母 `a`，那么 Emilija 将写下 `b`。单词将变成 `ab`，因此 Nina 将无法继续执行下一步，因此她将输掉。\n\n#### 数据规模与约定\n\n对于其中 $40$ 分的数据，单词长度总和不超过 $2000$。\n\n对于 $100\\%$ 的数据，单词长度总和不超过 $200000$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf)  _T2 Vlak_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #3] Vlak", "background": "", "description": "Nina 和 Emilija 在纸上做游戏。刚开始，纸是空白的。在一个回合里，一个玩家将一个字母加入到纸上一个单词的末尾。接着，二者交替顺序。规定 Nina 为先手。\n\n玩家们选择字母时必须遵循这样的原则：每一次添加字母**后**的单词必须是该玩家最喜爱歌曲中某个单词的前缀。如果某个玩家无法继续执行它的回合，那么她就输了。\n\n如果两位玩家选择的策略都是最佳的，请判断谁是赢家。", "inputFormat": "第一行包含一个正整数 $n$，表示 Nina 最喜爱歌曲中的单词数量。\n\n接下来的 $n$ 行，每一行输入 Nina 最喜爱歌曲中的一个单词。\n\n接下来的一行包含一个正整数 $m$，表示 Emilija 最喜爱歌曲中的单词数量。\n\n接下来的 $m$ 行，每一行输入 Emilija 最喜爱歌曲中的一个单词。\n\n输入的单词都只包含小写字母，且单词长度总和不超过 $200000$。", "outputFormat": "输出获胜的玩家，`Nina` 或 `Emilija`。", "hint": "#### 样例 1 解释\n\n如果 Nina 先写下字母 `b`，那么 Emilija 将必须写下 `b`，然后 Nina 将继续写下 `b`。则当前的单词为 `bbb`，而 Emilija 将无法继续执行下一步，因此 Nina 获胜。\n\n如果 Nina 先写下字母 `a`，那么 Emilija 将写下 `b`。单词将变成 `ab`，因此 Nina 将无法继续执行下一步，因此她将输掉。\n\n#### 数据规模与约定\n\n对于其中 $40$ 分的数据，单词长度总和不超过 $2000$。\n\n对于 $100\\%$ 的数据，单词长度总和不超过 $200000$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf)  _T2 Vlak_。**", "locale": "zh-CN"}}}
{"pid": "P7211", "type": "P", "difficulty": 7, "samples": [["4\n1 0 1 0 0 1 1 0\n4 4 1 2 1 2 3 3\n4 3 8 7 6 5 2 1", ""]], "limits": {"time": [1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "交互题", "Special Judge", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOISC 2020] カメレオンの恋", "background": "您可以在如下的代码模板中编写程序：\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nextern \"C\" int Query(const std::vector<int> &p);\nextern \"C\" void Answer(int a, int b);\nextern \"C\" void Solve(int N) {\n\t\n}\n```", "description": "在 JOI 动物园中，有 $2\\times N$ 只变色龙，有 $N$ 只的性别为 $\\rm X$，另外 $N$ 只的性别为 $\\rm Y$。\n\n每一只变色龙均有其原始颜色，其约束如下：\n- $\\rm X$ 性别的变色龙颜色两两不同。\n- 对于每一只 $\\rm X$ 性别的变色龙，都有一只 $\\rm Y$ 性别的变色龙颜色与之相同。\n\n现在每一只变色龙都爱另一只变色龙了，具体规则如下：\n- 每一只变色龙只爱异性变色龙。\n- 每只变色龙与其喜欢的变色龙有不同的初始颜色。\n- 不会存在两只变色龙爱一只变色龙。\n\n现在您可以组织一些变色龙开会，对于每一只在会议中的变色龙 $s$，设 $s$ 爱的变色龙为 $t$。\n\n- 若 $t$ 参加会议，则 $s$ 的皮肤颜色为 $t$ 的原始颜色。\n- 否则，$s$ 的皮肤颜色为 $s$ 的原始颜色。\n\n对于您组织的每次会议，您可以统计不同的肤色数量。\n\n通过召开不超过 $2\\times 10^4$ 次会议，您要确定初始颜色相同的每一对变色龙。\n\n#### 交互细节\n您需要在程序前声明两个函数：\n- `int Query(const std::vector<int> &p)`。\n- `void Answer(int a, int b)`。\n\n您需要实现一个函数：`void Solve(int N)`。\n- 每个测试样例仅调用一次。\n- $N$ 的意义如题。\n\n你的程序可以调用如下函数：\n- `int Query(const std::vector<int> &p)`\n   - 您可以调用此函数来组织变色龙会议。\n       - $p$ 是参加会议的变色龙名单。\n       - 这会返回参加会议的变色龙颜色的种数。\n       - 所有 $p$ 内的数必须在 $1$ 到 $2\\times N$ 之间，不然会返回 `Wrong Answer [1]`。\n       - 所有 $p$ 内的数必须是两两不同的，不然会返回 `Wrong Answer [2]`。\n       - 您只能调用此函数 $2\\times 10^4$ 次，若超过，会返回 `Wrong Answer [3]`。\n     \n- `void Answer(int a, int b)`\n   - 调用这个函数来提交一对原始颜色相同的变色龙。\n       - 参数 $a$ 和 $b$ 表示变色龙 $a$ 和 $b$ 具有相同的初始颜色。\n       - 您需要保证 $1\\le a,b\\le 2\\times N$，否则会返回 `Wrong Answer [4]`。\n       - 您需要保证每一次提交的变色龙不同，否则会返回 `Wrong Answer [5]`。\n       - 如果您提交的 $a$ 和 $b$ 的初始颜色不同，会返回 `Wrong Answer [6]`。\n       - 您需要调用 $N$ 次该函数，否则会返回 `Wrong Answer [7]`。\n       \n如果您在交互过程中均未违反限制，恭喜您 AC 了。", "inputFormat": "交互库输入格式如下：\n\n第一行为一个整数 $N$。\n\n第二行为 $2\\times N$ 个整数 $Y_i$，表示变色龙的性别，$Y_i=0$，则性别为 $\\rm X$，$Y_i=1$，则性别为 $\\rm Y$。\n\n第三行为 $2\\times N$ 个整数 $C_i$，$C_i$ 表示变色龙 $i$ 的颜色。\n\n第四行为 $2\\times N$ 个整数 $L_i$，$L_i$ 表示变色龙 $i$  稀饭变色龙 $L_i$。", "outputFormat": "交互库输出格式如下：\n\n若您 AC 了，则输出一行 `Accepted: x`，$x$ 是您调用 `int Query(const std::vector<int> &p)` 的次数。\n\n若您 WA 了，则输出一行 `Wrong Answer [type]`，$type$ 是您 WA 的原因，可参照交互细节。", "hint": "#### 样例解释\n样例调用如下：\n| 交互库调用 | 你的调用 | 返回值 |\n| :-: | :-: | :-:|\n| `Solve(4)` |  |  |\n|  | `Query([])` | $0$ |\n|  | `Query([6, 2])` | $2$ |\n|  | `Query([8, 1, 6])` | $2$ |\n|  | `Query([7, 1, 3, 5, 6, 8])` | $4$  |\n|  | `Query([8, 6, 4, 1, 5])` | $3$ | \n|  | `Answer(6, 4)` |  |\n|  | `Answer(7, 8)` |  |\n|  | `Answer(2, 1)` |  |\n|  | `Answer(3, 5)` |  |\n\n`sample-02.txt` 符合 Subtask 1 的限制，`sample-03.txt` 符合 Subtask 4 的限制。\n#### 子任务\n对于 $100\\%$ 的数据，保证 $2\\le N\\le 500$，$0\\le Y_i\\le 1$，$1\\le C_i\\le N$，$1\\le L_i\\le 2\\times N$，$Y_i\\not=Y_{L_i}$，$C_i\\not=C_{L_i}$，$L$ 两两不同。\n\n| 子任务 | 特殊性质 | 分数 |\n| :-: | :-: | :-: |\n| $1$ | $L_{L_i}=i (1\\le i\\le 2\\times N)$ | $4$ |\n| $2$ | $N\\le 7$ | $20$ |\n| $3$ | $N\\le 50$ | $20$ |\n| $4$ | $Y_i=0 (1\\le i\\le N)$ | $20$ |\n| $5$ | 无 | $36$ |\n#### 说明\n本题译自 [第 19 回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) Day 2 [T1 カメレオンの恋](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day2/chameleon-en.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2020] カメレオンの恋", "background": "您可以在如下的代码模板中编写程序：\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nextern \"C\" int Query(const std::vector<int> &p);\nextern \"C\" void Answer(int a, int b);\nextern \"C\" void Solve(int N) {\n\t\n}\n```", "description": "在 JOI 动物园中，有 $2\\times N$ 只变色龙，有 $N$ 只的性别为 $\\rm X$，另外 $N$ 只的性别为 $\\rm Y$。\n\n每一只变色龙均有其原始颜色，其约束如下：\n- $\\rm X$ 性别的变色龙颜色两两不同。\n- 对于每一只 $\\rm X$ 性别的变色龙，都有一只 $\\rm Y$ 性别的变色龙颜色与之相同。\n\n现在每一只变色龙都爱另一只变色龙了，具体规则如下：\n- 每一只变色龙只爱异性变色龙。\n- 每只变色龙与其喜欢的变色龙有不同的初始颜色。\n- 不会存在两只变色龙爱一只变色龙。\n\n现在您可以组织一些变色龙开会，对于每一只在会议中的变色龙 $s$，设 $s$ 爱的变色龙为 $t$。\n\n- 若 $t$ 参加会议，则 $s$ 的皮肤颜色为 $t$ 的原始颜色。\n- 否则，$s$ 的皮肤颜色为 $s$ 的原始颜色。\n\n对于您组织的每次会议，您可以统计不同的肤色数量。\n\n通过召开不超过 $2\\times 10^4$ 次会议，您要确定初始颜色相同的每一对变色龙。\n\n#### 交互细节\n您需要在程序前声明两个函数：\n- `int Query(const std::vector<int> &p)`。\n- `void Answer(int a, int b)`。\n\n您需要实现一个函数：`void Solve(int N)`。\n- 每个测试样例仅调用一次。\n- $N$ 的意义如题。\n\n你的程序可以调用如下函数：\n- `int Query(const std::vector<int> &p)`\n   - 您可以调用此函数来组织变色龙会议。\n       - $p$ 是参加会议的变色龙名单。\n       - 这会返回参加会议的变色龙颜色的种数。\n       - 所有 $p$ 内的数必须在 $1$ 到 $2\\times N$ 之间，不然会返回 `Wrong Answer [1]`。\n       - 所有 $p$ 内的数必须是两两不同的，不然会返回 `Wrong Answer [2]`。\n       - 您只能调用此函数 $2\\times 10^4$ 次，若超过，会返回 `Wrong Answer [3]`。\n     \n- `void Answer(int a, int b)`\n   - 调用这个函数来提交一对原始颜色相同的变色龙。\n       - 参数 $a$ 和 $b$ 表示变色龙 $a$ 和 $b$ 具有相同的初始颜色。\n       - 您需要保证 $1\\le a,b\\le 2\\times N$，否则会返回 `Wrong Answer [4]`。\n       - 您需要保证每一次提交的变色龙不同，否则会返回 `Wrong Answer [5]`。\n       - 如果您提交的 $a$ 和 $b$ 的初始颜色不同，会返回 `Wrong Answer [6]`。\n       - 您需要调用 $N$ 次该函数，否则会返回 `Wrong Answer [7]`。\n       \n如果您在交互过程中均未违反限制，恭喜您 AC 了。", "inputFormat": "交互库输入格式如下：\n\n第一行为一个整数 $N$。\n\n第二行为 $2\\times N$ 个整数 $Y_i$，表示变色龙的性别，$Y_i=0$，则性别为 $\\rm X$，$Y_i=1$，则性别为 $\\rm Y$。\n\n第三行为 $2\\times N$ 个整数 $C_i$，$C_i$ 表示变色龙 $i$ 的颜色。\n\n第四行为 $2\\times N$ 个整数 $L_i$，$L_i$ 表示变色龙 $i$  稀饭变色龙 $L_i$。", "outputFormat": "交互库输出格式如下：\n\n若您 AC 了，则输出一行 `Accepted: x`，$x$ 是您调用 `int Query(const std::vector<int> &p)` 的次数。\n\n若您 WA 了，则输出一行 `Wrong Answer [type]`，$type$ 是您 WA 的原因，可参照交互细节。", "hint": "#### 样例解释\n样例调用如下：\n| 交互库调用 | 你的调用 | 返回值 |\n| :-: | :-: | :-:|\n| `Solve(4)` |  |  |\n|  | `Query([])` | $0$ |\n|  | `Query([6, 2])` | $2$ |\n|  | `Query([8, 1, 6])` | $2$ |\n|  | `Query([7, 1, 3, 5, 6, 8])` | $4$  |\n|  | `Query([8, 6, 4, 1, 5])` | $3$ | \n|  | `Answer(6, 4)` |  |\n|  | `Answer(7, 8)` |  |\n|  | `Answer(2, 1)` |  |\n|  | `Answer(3, 5)` |  |\n\n`sample-02.txt` 符合 Subtask 1 的限制，`sample-03.txt` 符合 Subtask 4 的限制。\n#### 子任务\n对于 $100\\%$ 的数据，保证 $2\\le N\\le 500$，$0\\le Y_i\\le 1$，$1\\le C_i\\le N$，$1\\le L_i\\le 2\\times N$，$Y_i\\not=Y_{L_i}$，$C_i\\not=C_{L_i}$，$L$ 两两不同。\n\n| 子任务 | 特殊性质 | 分数 |\n| :-: | :-: | :-: |\n| $1$ | $L_{L_i}=i (1\\le i\\le 2\\times N)$ | $4$ |\n| $2$ | $N\\le 7$ | $20$ |\n| $3$ | $N\\le 50$ | $20$ |\n| $4$ | $Y_i=0 (1\\le i\\le N)$ | $20$ |\n| $5$ | 无 | $36$ |\n#### 说明\n本题译自 [第 19 回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) Day 2 [T1 カメレオンの恋](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day2/chameleon-en.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7212", "type": "P", "difficulty": 6, "samples": [["4 6\n1 2\n2 3\n3 2\n1 3\n3 4\n4 3", "1\n2\n4\n4\n5\n9"], ["6 10\n1 2\n2 3\n3 4\n4 5\n5 6\n6 5\n5 4\n4 3\n3 2\n2 1", "1\n2\n3\n4\n5\n7\n11\n17\n25\n30"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOISC 2020] ジョイッターで友だちをつくろう", "background": "Joitter 是一款交友软件。", "description": "在 Joitter 你可以关注他人，但你不可以关注自己和关注他人两次，即如果关注他人多次只会算作一次。\n\n共有 $N$ 名新用户，$M$ 天。\n\n在第 $i$ 天，用户 $A_i$ 会关注用户 $B_i$。\n\n同时在关注之后，会举办一场交友活动，活动内容如下：\n\n1. 选择一个用户 $x$。\n2. 选择一个被用户 $x$ 关注的用户 $y$。\n3. 选择一个用户 $z$，要求 $z\\not=x$，$x$ 未关注 $z$ 且 $y$ 和 $z$ 互关。\n4. 让 $x$ 关注 $z$。\n5. 重复 $1,2,3,4$，直到选不出合适的三元组 $(x,y,z)$。\n\n您需要求出，对于每一个 $i$，第 $i$ 天过后的所有关注总数。", "inputFormat": "第一行为两个整数 $N,M$。\n\n接下来 $M$ 行，一行两个整数 $A_i,B_i$。", "outputFormat": "输出共 $M$ 行，每一行一个数，第 $i$ 行表示经过第 $i$ 天之后的关注总数。", "hint": "#### 子任务\n对于 $100\\%$ 的数据，保证 $2\\le N\\le 10^5$，$1\\le M\\le 3\\times 10^5$，$1\\le A_i,B_i\\le N$，$A_i\\not=B_i$，$(A_i,B_i)\\not=(A_j,B_j)$。\n\n| 子任务编号 | $N\\le $ | 分值 |\n|:-:|:-:|:-:\n| $1$ | $50$ | $1$ |\n| $2$ | $2\\times 10^3$ | $16$ |\n| $3$ | 无 | $83$ |\n\n#### 说明\n本题译自 [第 19 回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) Day 2 [T2 ジョイッターで友だちをつくろう](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day2/joitter2-en.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2020] ジョイッターで友だちをつくろう", "background": "Joitter 是一款交友软件。", "description": "在 Joitter 你可以关注他人，但你不可以关注自己和关注他人两次，即如果关注他人多次只会算作一次。\n\n共有 $N$ 名新用户，$M$ 天。\n\n在第 $i$ 天，用户 $A_i$ 会关注用户 $B_i$。\n\n同时在关注之后，会举办一场交友活动，活动内容如下：\n\n1. 选择一个用户 $x$。\n2. 选择一个被用户 $x$ 关注的用户 $y$。\n3. 选择一个用户 $z$，要求 $z\\not=x$，$x$ 未关注 $z$ 且 $y$ 和 $z$ 互关。\n4. 让 $x$ 关注 $z$。\n5. 重复 $1,2,3,4$，直到选不出合适的三元组 $(x,y,z)$。\n\n您需要求出，对于每一个 $i$，第 $i$ 天过后的所有关注总数。", "inputFormat": "第一行为两个整数 $N,M$。\n\n接下来 $M$ 行，一行两个整数 $A_i,B_i$。", "outputFormat": "输出共 $M$ 行，每一行一个数，第 $i$ 行表示经过第 $i$ 天之后的关注总数。", "hint": "#### 子任务\n对于 $100\\%$ 的数据，保证 $2\\le N\\le 10^5$，$1\\le M\\le 3\\times 10^5$，$1\\le A_i,B_i\\le N$，$A_i\\not=B_i$，$(A_i,B_i)\\not=(A_j,B_j)$。\n\n| 子任务编号 | $N\\le $ | 分值 |\n|:-:|:-:|:-:\n| $1$ | $50$ | $1$ |\n| $2$ | $2\\times 10^3$ | $16$ |\n| $3$ | 无 | $83$ |\n\n#### 说明\n本题译自 [第 19 回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) Day 2 [T2 ジョイッターで友だちをつくろう](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day2/joitter2-en.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7213", "type": "P", "difficulty": 7, "samples": [["3\n3 4 6", "5"], ["1\n1", "0"], ["10\n5 8 9 13 15 16 17 18 19 20", "147003663"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOISC 2020] 最古の遺跡 3", "background": "JOI 教授是一名研究 IOI 王国的历史学家。", "description": "他发现了一行古代石柱的废墟及一份古代文献。\n\n古代文献上的记载如下：\n- 刚建造完成的时候，有 $2\\times N$ 个石柱，对于 $1\\le k\\le N$ 均有两个石柱高度为 $k$，同时记第 $i$ 个石柱的高度为 $h_i$。\n- 会发生 $N$ 次地震，每次地震会使一些石柱的高度 $-1$，其他石柱高度不变。\n- 石柱 $i$ 地震时高度不变，当且仅当 $h_i\\ge 1$ 并且对于 $j>i$ 都要有 $h_i\\not=h_j$\n- $N$ 次地震后，恰好只剩下了 $N$ 个石柱。\n\n现在 JOI 教授找出了仅存的 $N$ 个石柱的位置 $A_1,A_2,\\ldots,A_N$，他想让你求出，最初 $2\\times N$ 个石柱高度的修建方案数 $\\bmod~10^9+7$ 的值。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行 $N$ 个数，表示 $A_1,A_2,\\ldots,A_N$。", "outputFormat": "仅一行一个整数，表示最初 $2\\times N$ 个石柱高度的建造方案数 $\\bmod~10^9+7$ 的值。", "hint": "#### 样例解释\n#### 样例 1 解释\n一种可行的解为 $(2,2,3,3,1,1)$。\n- 第一次地震后，变为 $(1,2,2,3,0,1)$。\n- 第二次地震后，变为 $(0,1,2,3,0,1)$。\n- 第三次地震后，变为 $(0,0,2,3,0,1)$。\n\n另外四种解如下：\n- $(2,3,2,3,1,1)$。\n- $(2,3,3,2,1,1)$。\n- $(3,2,2,3,1,1)$.\n- $(3,2,3,2,1,1)$。\n#### 样例 2 解释\n对于 $N=1$ 的情况，显然只有 $(1,1)$ 一种修建方案，在一次地震后，会变为 $(0,1)$，$1$ 号位置不可能有石柱。\n#### 样例 3 解释\n共有 $111147004440$ 种可能的修建方案，$111147004440 \\bmod 10^9+7=147003663$。\n#### 子任务\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 600$，$1\\le A_i\\le 2\\times N$，$A_i< A_{i+1}$。\n| Subtask 编号 | $N\\le$ | 分数 |\n| :-: |:-: | :-: |\n| $1$ | $13$ | $6$\n| $2$| $60$ | $52$\n| $3$ | 无 | $42$\n#### 说明\n本题译自 [第 19 回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) Day 2 [T3 最古の遺跡 3](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day2/ruins3-en.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2020] 最古の遺跡 3", "background": "JOI 教授是一名研究 IOI 王国的历史学家。", "description": "他发现了一行古代石柱的废墟及一份古代文献。\n\n古代文献上的记载如下：\n- 刚建造完成的时候，有 $2\\times N$ 个石柱，对于 $1\\le k\\le N$ 均有两个石柱高度为 $k$，同时记第 $i$ 个石柱的高度为 $h_i$。\n- 会发生 $N$ 次地震，每次地震会使一些石柱的高度 $-1$，其他石柱高度不变。\n- 石柱 $i$ 地震时高度不变，当且仅当 $h_i\\ge 1$ 并且对于 $j>i$ 都要有 $h_i\\not=h_j$\n- $N$ 次地震后，恰好只剩下了 $N$ 个石柱。\n\n现在 JOI 教授找出了仅存的 $N$ 个石柱的位置 $A_1,A_2,\\ldots,A_N$，他想让你求出，最初 $2\\times N$ 个石柱高度的修建方案数 $\\bmod~10^9+7$ 的值。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行 $N$ 个数，表示 $A_1,A_2,\\ldots,A_N$。", "outputFormat": "仅一行一个整数，表示最初 $2\\times N$ 个石柱高度的建造方案数 $\\bmod~10^9+7$ 的值。", "hint": "#### 样例解释\n#### 样例 1 解释\n一种可行的解为 $(2,2,3,3,1,1)$。\n- 第一次地震后，变为 $(1,2,2,3,0,1)$。\n- 第二次地震后，变为 $(0,1,2,3,0,1)$。\n- 第三次地震后，变为 $(0,0,2,3,0,1)$。\n\n另外四种解如下：\n- $(2,3,2,3,1,1)$。\n- $(2,3,3,2,1,1)$。\n- $(3,2,2,3,1,1)$.\n- $(3,2,3,2,1,1)$。\n#### 样例 2 解释\n对于 $N=1$ 的情况，显然只有 $(1,1)$ 一种修建方案，在一次地震后，会变为 $(0,1)$，$1$ 号位置不可能有石柱。\n#### 样例 3 解释\n共有 $111147004440$ 种可能的修建方案，$111147004440 \\bmod 10^9+7=147003663$。\n#### 子任务\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 600$，$1\\le A_i\\le 2\\times N$，$A_i< A_{i+1}$。\n| Subtask 编号 | $N\\le$ | 分数 |\n| :-: |:-: | :-: |\n| $1$ | $13$ | $6$\n| $2$| $60$ | $52$\n| $3$ | 无 | $42$\n#### 说明\n本题译自 [第 19 回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) Day 2 [T3 最古の遺跡 3](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day2/ruins3-en.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7214", "type": "P", "difficulty": 7, "samples": [["10 5\n2 5 10 3\n1 1 6 5\n5 2 8 3\n7 6 10 4\n4 1 3 1", "7"], ["10 5\n2 6 10 3\n1 1 5 5\n5 2 7 3\n8 6 10 4\n4 1 3 1", "-1"], ["10 5\n1 5 10 4\n1 1 6 5\n1 4 8 3\n1 6 10 3\n1 1 3 1", "7"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "线段树", "最短路", "JOISC/JOIST（日本）"], "title": "[JOISC 2020] 治療計画", "background": "JOI 村庄的村民们最近发生了 COVILLAGE-19 疫情！", "description": "JOI 村庄有 $N$ 个房屋，编号为 $1$ 到 $N$，每个房屋住有一个村民，第 $i$ 个房屋居住编号为村民 $i$。\n\n现在，这 $N$ 个房屋里的村民全部感染 COVILLAGE-19 病毒，有 $M$ 个治疗方案被提出，第 $i$ 个治疗方案描述为，在第 $T_i$ 天的晚上，编号在 $[L_i,R_i]$ 区间内的村民被治愈。\n\nCOVILLAGE-19 病毒还会继续传播，在某天早上，如果村民 $i$ 被感染，那么村民 $i+1$ 和村民 $i-1$ 也会被感染，因为病毒威力巨大，所以被治愈的村民有可能再次被感染。\n\n您是 JOI 国的总理，您要选择一些方案使得 JOI 村庄所有村民全部被治愈，一天可以进行很多方案。\n\n第 $i$ 个方案要花费 $C_i$，求最小花费。", "inputFormat": "第一行两个整数 $N,M$ 代表村民数和方案数。  \n接下来 $M$ 行每行四个整数 $T_i,L_i,R_i,C_i$ 代表一个治疗方案。", "outputFormat": "一行一个整数代表最小花费。         \n如果无法全部治愈，输出 $-1$。", "hint": "#### 样例 1 解释\n\n执行过程如下（红色为被病毒感染，绿色为治愈）：\n\n1. 在第二天晚上，执行第 $1$ 个方案，情况如下：\n\n$$\\color{Red}1\\ 2\\ 3\\ 4\\color{Green}\\ 5\\ 6\\ 7\\ 8\\ 9\\ 10$$\n\n2. 在第三天早上，村民 $5$ 被感染，情况如下：\n\n$$\\color{Red}1\\ 2\\ 3\\ 4\\ 5\\color{Green}\\ 6\\ 7\\ 8\\ 9\\ 10$$\n\n3. 在第四天早上，村民 $6$ 被感染，情况如下：\n\n$$\\color{Red}1\\ 2\\ 3\\ 4\\ 5\\ 6\\color{Green}\\ 7\\ 8\\ 9\\ 10$$\n\n4. 在第四天晚上，执行第 $5$ 个方案，情况如下：\n\n$$\\color{Green}1\\ 2\\ 3\\color{Red}\\ 4\\ 5\\ 6\\color{Green}\\ 7\\ 8\\ 9\\ 10$$\n\n5. 第五天早上，村民 $3,7$ 被感染，情况如下：\n\n$$\\color{Green}1\\ 2\\color{Red}\\ 3\\ 4\\ 5\\ 6\\ 7\\color{Green}\\ 8\\ 9\\ 10$$\n\n6. 在第五天晚上，执行第 $3$ 个方案，情况如下：\n\n$$\\color{Green}1\\ 2\\ 3\\ 4\\ 5\\ 6\\ 7\\ 8\\ 9\\ 10$$\n\n全部治愈，这三个方案花费为 $7$，为最小花费。\n\n#### 样例 2 解释\n\n无法使得所有村民全部治愈。\n\n#### 子任务\n\n|子任务|特殊性质|分数|\n|:-:|:-:|:-:|\n|$1$|$T_i=1$|$4$|\n|$2$|$M \\le 16$|$5$|\n|$3$|$M \\le 5000$|$30$|\n|$4$|无|$61$|\n\n对于 $100\\%$ 的数据，$1 \\le N,T_i,C_i \\le 10^9$，$1 \\le M \\le 10^5$，$1 \\le L_i \\le R_i \\le N$。\n\n#### 说明\n\n翻译自 [第１９回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) [Day4 C 治療計画](https://www2.ioi-jp.org/camp/2020/2020-sp-tasks/day4/treatment.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2020] 治療計画", "background": "JOI 村庄的村民们最近发生了 COVILLAGE-19 疫情！", "description": "JOI 村庄有 $N$ 个房屋，编号为 $1$ 到 $N$，每个房屋住有一个村民，第 $i$ 个房屋居住编号为村民 $i$。\n\n现在，这 $N$ 个房屋里的村民全部感染 COVILLAGE-19 病毒，有 $M$ 个治疗方案被提出，第 $i$ 个治疗方案描述为，在第 $T_i$ 天的晚上，编号在 $[L_i,R_i]$ 区间内的村民被治愈。\n\nCOVILLAGE-19 病毒还会继续传播，在某天早上，如果村民 $i$ 被感染，那么村民 $i+1$ 和村民 $i-1$ 也会被感染，因为病毒威力巨大，所以被治愈的村民有可能再次被感染。\n\n您是 JOI 国的总理，您要选择一些方案使得 JOI 村庄所有村民全部被治愈，一天可以进行很多方案。\n\n第 $i$ 个方案要花费 $C_i$，求最小花费。", "inputFormat": "第一行两个整数 $N,M$ 代表村民数和方案数。  \n接下来 $M$ 行每行四个整数 $T_i,L_i,R_i,C_i$ 代表一个治疗方案。", "outputFormat": "一行一个整数代表最小花费。         \n如果无法全部治愈，输出 $-1$。", "hint": "#### 样例 1 解释\n\n执行过程如下（红色为被病毒感染，绿色为治愈）：\n\n1. 在第二天晚上，执行第 $1$ 个方案，情况如下：\n\n$$\\color{Red}1\\ 2\\ 3\\ 4\\color{Green}\\ 5\\ 6\\ 7\\ 8\\ 9\\ 10$$\n\n2. 在第三天早上，村民 $5$ 被感染，情况如下：\n\n$$\\color{Red}1\\ 2\\ 3\\ 4\\ 5\\color{Green}\\ 6\\ 7\\ 8\\ 9\\ 10$$\n\n3. 在第四天早上，村民 $6$ 被感染，情况如下：\n\n$$\\color{Red}1\\ 2\\ 3\\ 4\\ 5\\ 6\\color{Green}\\ 7\\ 8\\ 9\\ 10$$\n\n4. 在第四天晚上，执行第 $5$ 个方案，情况如下：\n\n$$\\color{Green}1\\ 2\\ 3\\color{Red}\\ 4\\ 5\\ 6\\color{Green}\\ 7\\ 8\\ 9\\ 10$$\n\n5. 第五天早上，村民 $3,7$ 被感染，情况如下：\n\n$$\\color{Green}1\\ 2\\color{Red}\\ 3\\ 4\\ 5\\ 6\\ 7\\color{Green}\\ 8\\ 9\\ 10$$\n\n6. 在第五天晚上，执行第 $3$ 个方案，情况如下：\n\n$$\\color{Green}1\\ 2\\ 3\\ 4\\ 5\\ 6\\ 7\\ 8\\ 9\\ 10$$\n\n全部治愈，这三个方案花费为 $7$，为最小花费。\n\n#### 样例 2 解释\n\n无法使得所有村民全部治愈。\n\n#### 子任务\n\n|子任务|特殊性质|分数|\n|:-:|:-:|:-:|\n|$1$|$T_i=1$|$4$|\n|$2$|$M \\le 16$|$5$|\n|$3$|$M \\le 5000$|$30$|\n|$4$|无|$61$|\n\n对于 $100\\%$ 的数据，$1 \\le N,T_i,C_i \\le 10^9$，$1 \\le M \\le 10^5$，$1 \\le L_i \\le R_i \\le N$。\n\n#### 说明\n\n翻译自 [第１９回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) [Day4 C 治療計画](https://www2.ioi-jp.org/camp/2020/2020-sp-tasks/day4/treatment.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7215", "type": "P", "difficulty": 6, "samples": [["6 3\n2 1\n3 5\n6 2\n3 4\n2 3\n1\n3\n1\n2\n3\n2", "1"], ["8 4\n4 1\n1 3\n3 6\n6 7\n7 2\n2 5\n5 8\n2\n4\n3\n1\n1\n2\n3\n4", "1"], ["12 4\n7 9\n1 3\n4 6\n2 4\n10 12\n1 2\n2 10\n11 1\n2 8\n5 3\n6 7\n3\n1\n1\n2\n4\n3\n3\n2\n2\n3\n4\n4", "2"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000, 500000]}, "tags": ["2020", "倍增", "点分治", "JOISC/JOIST（日本）"], "title": "[JOISC 2020] 首都", "background": "JOI 国是一个庞大的国度。", "description": "JOI 国拥有 $N$ 个城镇，编号为 $1$ 到 $N$，这些城镇由 $N-1$ 条双向道路连接。\n\nJOI 国还拥有 $K$ 个城市，编号为 $1$ 到 $K$，第 $i$ 个城镇属于第 $C_i$ 个城市。\n\n现在 JOI 国的总理 JOI 君 114514 世要挑选一个城市作为首都。作为首都的城市需要满足：从首都中的任一个城镇到达另一个首都中的城镇可以只经过首都中的城镇。但不一定有满足条件的城市。\n\n所以 JOI 君 114514 世要进行合并城市，合并城市 $x$ 和城市 $y$ 就会把城市 $y$ 里的所有小镇归为城市 $x$。\n\n求能找到首都的最小合并次数。", "inputFormat": "第一行两个整数 $N,K$ 代表城镇数和城市数。    \n接下来 $N-1$ 行每行两个整数 $u,v$ 代表一条双向边。   \n接下来 $N$ 行第 $i$ 行一个整数 $C_i$ 代表第 $i$ 个城镇属于第 $C_i$ 个城市。", "outputFormat": "一行一个整数代表最小的合并次数。", "hint": "#### 样例 1 解释\n\n可以将城市 $1$ 和 $3$ 合并，然后选择城市 $1$ 作为首都。\n\n#### 子任务\n\n|子任务|特殊性质|分数|\n|:-:|:-:|:-:|\n|$1$|$N \\le 20$|$1$|\n|$2$|$N \\le 2000$|$10$|\n|$3$|每个城镇最多与两个城镇相连|$30$|\n|$4$|无|$59$|\n\n对于 $100\\%$ 的数据，$1 \\le K,u,v \\le N \\le 2 \\times 10^5$，保证从任何一个城镇出发都能到达其他城镇，$1 \\le C_i \\le K$。\n\n#### 说明\n\n翻译自 [第１９回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) [Day4 A 首都](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day4/capital_city.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2020] 首都", "background": "JOI 国是一个庞大的国度。", "description": "JOI 国拥有 $N$ 个城镇，编号为 $1$ 到 $N$，这些城镇由 $N-1$ 条双向道路连接。\n\nJOI 国还拥有 $K$ 个城市，编号为 $1$ 到 $K$，第 $i$ 个城镇属于第 $C_i$ 个城市。\n\n现在 JOI 国的总理 JOI 君 114514 世要挑选一个城市作为首都。作为首都的城市需要满足：从首都中的任一个城镇到达另一个首都中的城镇可以只经过首都中的城镇。但不一定有满足条件的城市。\n\n所以 JOI 君 114514 世要进行合并城市，合并城市 $x$ 和城市 $y$ 就会把城市 $y$ 里的所有小镇归为城市 $x$。\n\n求能找到首都的最小合并次数。", "inputFormat": "第一行两个整数 $N,K$ 代表城镇数和城市数。    \n接下来 $N-1$ 行每行两个整数 $u,v$ 代表一条双向边。   \n接下来 $N$ 行第 $i$ 行一个整数 $C_i$ 代表第 $i$ 个城镇属于第 $C_i$ 个城市。", "outputFormat": "一行一个整数代表最小的合并次数。", "hint": "#### 样例 1 解释\n\n可以将城市 $1$ 和 $3$ 合并，然后选择城市 $1$ 作为首都。\n\n#### 子任务\n\n|子任务|特殊性质|分数|\n|:-:|:-:|:-:|\n|$1$|$N \\le 20$|$1$|\n|$2$|$N \\le 2000$|$10$|\n|$3$|每个城镇最多与两个城镇相连|$30$|\n|$4$|无|$59$|\n\n对于 $100\\%$ 的数据，$1 \\le K,u,v \\le N \\le 2 \\times 10^5$，保证从任何一个城镇出发都能到达其他城镇，$1 \\le C_i \\le K$。\n\n#### 说明\n\n翻译自 [第１９回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) [Day4 A 首都](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day4/capital_city.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7216", "type": "P", "difficulty": 7, "samples": [["4 2\n2 1 3 3 \n1 2 4 3 \n6 1 7 4\n5 3 7 5", "2 2\n7 4"], ["3 3\n1 1 1 1\n1 2 1 2\n1 3 1 3", "1 1\n1 2\n1 3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "Special Judge", "JOISC/JOIST（日本）"], "title": "[JOISC 2020] 美味しい美味しいハンバーグ", "background": "JOISC2020 Day 1 T2", "description": "有一个 $10^9\\times 10^9$ 的金属网格，其中 $(x,y)$ 表示从左往右第 $x$ 列，从上往下第 $y$ 行的格子。（$1\\leq x,y\\leq 10^9$）。在这些网格上放了 $N$ 块汉堡肉，依次编号为 $1,\\cdots,N$，其中第 $i$ 块汉堡肉放在以 $(L_i,D_i)$ 为左下角，$(R_i,U_i)$ 为右上角的矩形区域内，并且汉堡肉可以重叠。\n\n你需要检查所有的汉堡肉是否煮熟。你可以选择金属网上的 $K$ 个格子，并且垂直地在这个格子中间插一根竹签。对于每一块汉堡肉来说，你可以通过在它所处的格子中插一根竹签来确认这块汉堡肉是否煮熟。当然，你也可以在一个格子里面插多根竹签或者是在没有汉堡肉的格子插竹签，尽管这很不必要。\n\n形式上说，你需要找到 $K$ 组 $(x_1,y_1),\\cdots,(x_k,y_k)$，满足以下条件：\n\n- 对于所有 $i$，存在一个 $j$ 满足 $L_i\\leq x_j\\leq R_i,D_i\\leq y_j\\leq U_i$。\n\n- 对于所有 $j$，$1\\leq x_j,y_j\\leq 10^9$。\n\n你需要写一个程序来找出这 $K$ 组 $(x_j,y_j)$，数据保证有解。", "inputFormat": "第一行两个的整数 $N,K$，含义见题面描述。\n\n接下来 $n$ 行，每行四个整数 $L_i,D_i,R_i,U_i$，描述一块汉堡肉。", "outputFormat": "$K$ 行，每行两个整数 $x_j$ 和 $y_j$。\n\n如果有多解，输出任意一个均可。", "hint": "#### 样例 1 解释\n\n在 $(2,2)$ 处插一根竹签，可以确定前两块汉堡肉是否煮熟，在 $(7,4)$ 处插一根竹签，可以确定后两块汉堡肉是否煮熟。\n\n另一种可行方案是，在 $(3,3)$ 和 $(6,4)$ 处分别插一根竹签。\n\n#### 子任务\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $N\\leq 2000,K=1$ | $1$ |\n| $2$ | $N\\leq 2000,K=2$ | $1$ |\n| $3$ | $N\\leq 2000,K=3$ | $3$ |\n| $4$ | $N\\leq 2000,K=4$ | $6$ |\n| $5$ | $K=1$ | $1$ |\n| $6$ | $K=2$ | $3$ |\n| $7$ | $K=3$ | $6$ |\n| $8$ | $K=4$ | $79$ |\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 2\\times 10^5,1\\leq k\\leq 4,1\\leq L_i\\leq R_i\\leq 10^9,1\\leq D_i\\leq U_i\\leq 10^9$，数据保证有解。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2020] 美味しい美味しいハンバーグ", "background": "JOISC2020 Day 1 T2", "description": "有一个 $10^9\\times 10^9$ 的金属网格，其中 $(x,y)$ 表示从左往右第 $x$ 列，从上往下第 $y$ 行的格子。（$1\\leq x,y\\leq 10^9$）。在这些网格上放了 $N$ 块汉堡肉，依次编号为 $1,\\cdots,N$，其中第 $i$ 块汉堡肉放在以 $(L_i,D_i)$ 为左下角，$(R_i,U_i)$ 为右上角的矩形区域内，并且汉堡肉可以重叠。\n\n你需要检查所有的汉堡肉是否煮熟。你可以选择金属网上的 $K$ 个格子，并且垂直地在这个格子中间插一根竹签。对于每一块汉堡肉来说，你可以通过在它所处的格子中插一根竹签来确认这块汉堡肉是否煮熟。当然，你也可以在一个格子里面插多根竹签或者是在没有汉堡肉的格子插竹签，尽管这很不必要。\n\n形式上说，你需要找到 $K$ 组 $(x_1,y_1),\\cdots,(x_k,y_k)$，满足以下条件：\n\n- 对于所有 $i$，存在一个 $j$ 满足 $L_i\\leq x_j\\leq R_i,D_i\\leq y_j\\leq U_i$。\n\n- 对于所有 $j$，$1\\leq x_j,y_j\\leq 10^9$。\n\n你需要写一个程序来找出这 $K$ 组 $(x_j,y_j)$，数据保证有解。", "inputFormat": "第一行两个的整数 $N,K$，含义见题面描述。\n\n接下来 $n$ 行，每行四个整数 $L_i,D_i,R_i,U_i$，描述一块汉堡肉。", "outputFormat": "$K$ 行，每行两个整数 $x_j$ 和 $y_j$。\n\n如果有多解，输出任意一个均可。", "hint": "#### 样例 1 解释\n\n在 $(2,2)$ 处插一根竹签，可以确定前两块汉堡肉是否煮熟，在 $(7,4)$ 处插一根竹签，可以确定后两块汉堡肉是否煮熟。\n\n另一种可行方案是，在 $(3,3)$ 和 $(6,4)$ 处分别插一根竹签。\n\n#### 子任务\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $N\\leq 2000,K=1$ | $1$ |\n| $2$ | $N\\leq 2000,K=2$ | $1$ |\n| $3$ | $N\\leq 2000,K=3$ | $3$ |\n| $4$ | $N\\leq 2000,K=4$ | $6$ |\n| $5$ | $K=1$ | $1$ |\n| $6$ | $K=2$ | $3$ |\n| $7$ | $K=3$ | $6$ |\n| $8$ | $K=4$ | $79$ |\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 2\\times 10^5,1\\leq k\\leq 4,1\\leq L_i\\leq R_i\\leq 10^9,1\\leq D_i\\leq U_i\\leq 10^9$，数据保证有解。\n\n", "locale": "zh-CN"}}}
{"pid": "P7217", "type": "P", "difficulty": 7, "samples": [["3 2 7 3\n1 4 6\n0 5\n3\n1 7\n2 3\n3 8", "2\n1\n1"], ["5 3 20 6\n0 4 8 12 16\n2 11 14\n9\n4 1932\n2 93787\n1 89\n5 98124798\n1 2684\n1 137598\n3 2\n3 8375\n4 237", "146\n7035\n7\n7359360\n202\n10320\n0\n628\n18"], ["8 15 217 33608\n0 12 71 96 111 128 152 206\n4 34 42 67 76 81 85 104 110 117 122 148 166 170 212\n14\n2 223544052420046341\n3 86357593875941375\n4 892813012303440034\n1 517156961659770735\n7 415536186438473633\n6 322175014520330760\n7 557706040951533058\n6 640041274241532527\n5 286263974600593111\n8 349405886653104871\n1 987277313830536091\n5 989137777159975413\n2 50689028127994215\n7 445686748471896881", "33230868503053\n3\n5\n1\n123542793648997\n8\n165811220737767\n8\n7\n1\n1\n7\n7535161012043\n132506837660717"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["树形数据结构", "2020", "树状数组", "JOISC/JOIST（日本）"], "title": "[JOISC 2020] 収穫", "background": "JOI 君是 IOI 庄园的庄园主。", "description": "现在 IOI 庄园有 $N$ 名员工，在周长为 $L$ 的湖的湖岸边有 $M$ 棵苹果树。\n\n第 $i$ 名员工从湖的最北点顺时针走了 $A_i$ 米，第 $i$ 棵苹果树长在从湖的最北点顺时针的 $B_i$ 米。\n\n因为特殊原因，每棵苹果树上最多长一个苹果，初始时刻每棵苹果树上都有 $1$ 个苹果，如果一棵树上的苹果被摘掉了，在恰好 $C$ s 后会长出一个苹果。\n\n每名员工在初始时刻都在自己原本的位置，每过一个时刻就会顺时针走 $1$ 米，遇到有成熟苹果的苹果树就会把苹果摘下来。\n\n现在 JOI 君给定了 $Q$ 个询问，第 $i$ 个询问为：\n\n- 询问第 $V_i$ 个员工在时刻 $T_i$ 结束后收获到几个苹果。", "inputFormat": "第一行四个整数 $N,M,L,C$ 代表员工数，苹果树数，湖的周长，苹果每隔一定时间成熟。      \n第二行 $N$ 个整数 $A_i$ 如题目所示。   \n第三行 $M$ 个整数 $B_i$ 去题目所示。    \n第四行一个整数 $Q$ 代表询问次数。    \n接下来 $Q$ 行每行两个整数 $V_i,T_i$ 代表一个询问。", "outputFormat": "$Q$ 行每行一个整数代表答案。", "hint": "#### 样例 1 解释\n\n- 在时刻 $1$：\n\t- 员工 $2$ 到达第 $2$ 棵苹果树，并采摘了成熟的苹果\n    - 员工 $3$ 到达第 $1$ 棵苹果树，并采摘了成熟的苹果\n- 在时刻 $3$：\n\t- 员工 $2$ 到达第 $1$ 棵苹果树，但没有成熟的苹果\n\n到时刻 $3$ 结束后，员工 $2$ 共采摘了 $1$ 个苹果，对应样例 $1$ 的第 $2$ 个询问。\n\n- 在时刻 $4$：\n\t- 员工 $1$ 到达第 $2$ 棵苹果树，并采摘了成熟的苹果\n- 在时刻 $6$：\n\t - 员工 $1$ 到达第 $1$ 棵苹果树，并采摘了成熟的苹果\n     - 员工 $3$ 到达第 $2$ 棵苹果树，但没有成熟的苹果\n\n到时刻 $7$ 结束后，员工 $1$ 共采摘了 $2$ 个苹果，对应样例 $1$ 的第 $1$ 个询问。\n\n- 在时刻 $8$：\n\t- 员工 $2$ 到达第 $2$ 棵苹果树，并采摘了成熟的苹果\n    - 员工 $3$ 到达第 $1$ 棵苹果树，但没有成熟的苹果\n\n到时刻 $8$ 结束后，员工 $3$ 共采摘了 $1$ 个苹果，对应样例 $1$ 的第 $3$ 个询问。\n\n#### 子任务\n\n|子任务|特殊性质|分数|\n|:-:|:-:|:-:|\n|$1$|$N,M,Q \\le 3000$|$5$|\n|$2$|$T_i \\ge 10^{15}$|$20$|\n|$3$|无|$75$|\n\n对于 $100\\%$ 的数据，$1 \\le N,M,Q \\le 2 \\times 10^5$，$N+M \\le L$，$1 \\le C,L \\le 10^9$，$0 \\le A_i,B_i < L$，$A_i<A_{i+1}$，$B_i<B_{i+1}$，$A_i \\ne B_i$，$1 \\le V_i \\le N$，$1 \\le T_i \\le 10^{18}$。\n\n#### 说明\n\n翻译自 [第１９回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) [Day3 B 収穫](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day3/harvest.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2020] 収穫", "background": "JOI 君是 IOI 庄园的庄园主。", "description": "现在 IOI 庄园有 $N$ 名员工，在周长为 $L$ 的湖的湖岸边有 $M$ 棵苹果树。\n\n第 $i$ 名员工从湖的最北点顺时针走了 $A_i$ 米，第 $i$ 棵苹果树长在从湖的最北点顺时针的 $B_i$ 米。\n\n因为特殊原因，每棵苹果树上最多长一个苹果，初始时刻每棵苹果树上都有 $1$ 个苹果，如果一棵树上的苹果被摘掉了，在恰好 $C$ s 后会长出一个苹果。\n\n每名员工在初始时刻都在自己原本的位置，每过一个时刻就会顺时针走 $1$ 米，遇到有成熟苹果的苹果树就会把苹果摘下来。\n\n现在 JOI 君给定了 $Q$ 个询问，第 $i$ 个询问为：\n\n- 询问第 $V_i$ 个员工在时刻 $T_i$ 结束后收获到几个苹果。", "inputFormat": "第一行四个整数 $N,M,L,C$ 代表员工数，苹果树数，湖的周长，苹果每隔一定时间成熟。      \n第二行 $N$ 个整数 $A_i$ 如题目所示。   \n第三行 $M$ 个整数 $B_i$ 去题目所示。    \n第四行一个整数 $Q$ 代表询问次数。    \n接下来 $Q$ 行每行两个整数 $V_i,T_i$ 代表一个询问。", "outputFormat": "$Q$ 行每行一个整数代表答案。", "hint": "#### 样例 1 解释\n\n- 在时刻 $1$：\n\t- 员工 $2$ 到达第 $2$ 棵苹果树，并采摘了成熟的苹果\n    - 员工 $3$ 到达第 $1$ 棵苹果树，并采摘了成熟的苹果\n- 在时刻 $3$：\n\t- 员工 $2$ 到达第 $1$ 棵苹果树，但没有成熟的苹果\n\n到时刻 $3$ 结束后，员工 $2$ 共采摘了 $1$ 个苹果，对应样例 $1$ 的第 $2$ 个询问。\n\n- 在时刻 $4$：\n\t- 员工 $1$ 到达第 $2$ 棵苹果树，并采摘了成熟的苹果\n- 在时刻 $6$：\n\t - 员工 $1$ 到达第 $1$ 棵苹果树，并采摘了成熟的苹果\n     - 员工 $3$ 到达第 $2$ 棵苹果树，但没有成熟的苹果\n\n到时刻 $7$ 结束后，员工 $1$ 共采摘了 $2$ 个苹果，对应样例 $1$ 的第 $1$ 个询问。\n\n- 在时刻 $8$：\n\t- 员工 $2$ 到达第 $2$ 棵苹果树，并采摘了成熟的苹果\n    - 员工 $3$ 到达第 $1$ 棵苹果树，但没有成熟的苹果\n\n到时刻 $8$ 结束后，员工 $3$ 共采摘了 $1$ 个苹果，对应样例 $1$ 的第 $3$ 个询问。\n\n#### 子任务\n\n|子任务|特殊性质|分数|\n|:-:|:-:|:-:|\n|$1$|$N,M,Q \\le 3000$|$5$|\n|$2$|$T_i \\ge 10^{15}$|$20$|\n|$3$|无|$75$|\n\n对于 $100\\%$ 的数据，$1 \\le N,M,Q \\le 2 \\times 10^5$，$N+M \\le L$，$1 \\le C,L \\le 10^9$，$0 \\le A_i,B_i < L$，$A_i<A_{i+1}$，$B_i<B_{i+1}$，$A_i \\ne B_i$，$1 \\le V_i \\le N$，$1 \\le T_i \\le 10^{18}$。\n\n#### 说明\n\n翻译自 [第１９回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) [Day3 B 収穫](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day3/harvest.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7218", "type": "P", "difficulty": 6, "samples": [["3 4\nPWGP\nWGPW\nGWPG", "P-GP\nWGP|\nG-PG"], ["3 4\nPWWP\nWWWW\nPGGP", "PWWP\nW\\/W\nPGGP"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "提交答案", "Special Judge", "模拟退火", "随机化", "JOISC/JOIST（日本）"], "title": "[JOISC 2020] 伝説の団子職人", "background": "您是做团子带师，您太强了。", "description": "您面前有一个 $R \\times C$ 的网格，每一个格子里有一个团子，您可以横向，竖向，斜向地将三个连续的团子按顺序串起来，按顺序指可以串上中下，下中上之类的，但是不能串中下上，上下中之类的。\n\n如果一串团子的颜色为绿，白，粉或者粉，白，绿，那么称这串团子叫 AK IOI 串。\n\n求串最多 AK IOI 串的方法（我坚信做了几个 AK IOI 串就会 AK 几次 IOI）。", "inputFormat": "第一行两个整数 $R,C$ 代表网格大小。    \n接下来 $R$ 行每行 $C$ 个字符代表网格：\n\n- `P` 代表粉色团子\n- `W` 代表白色团子\n- `G` 代表绿色团子", "outputFormat": "$R$ 行每行 $C$ 个字符代表串好的网格：\n\n- 可以为 `-`，`|`，`/`，`\\`，代表一个团子串\n- 如果不是以上四种线，那么原样输出\n\n输出文件应为 `01.ans` ~ `06.ans`。", "hint": "#### 样例 1 解释\n\n您做了 $3$ 个 AK IOI 串。\n\n#### 样例 2 解释\n\n您做了 $2$ 个 AK IOI 串。\n\n#### 数据规模与约定\n\n**本题为提交答案题。**\n\n**本题使用 Special Judge。**\n\n一共有 $6$ 组数据，保证 $3 \\le R,C \\le 500$，输入文件可在附加文件中得到，具体数据表格如下：\n\n|数据点|分数 $S$|及格线 $X$|良好线 $Y$|优秀线 $Z$|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$15$|$44000$|$47000$|$47220$|\n|$2$|$15$|$39000$|$41700$|$41980$|\n|$3$|$15$|$45000$|$51000$|$51390$|\n|$4$|$15$|$18000$|$19000$|$19120$|\n|$5$|$20$|$43000$|$48200$|$48620$|\n|$6$|$20$|$44000$|$46000$|$46500$|\n\n假设 $N$ 为得到的 AK IOI 串个数，那么评分标准为（四舍五入）：\n\n- $N<X$，$0$ 分\n- $X \\le N <Y$，$\\dfrac{N-X}{2(Y-X)} \\times S$ 分\n- $Y \\le N < Z$，$\\left(\\dfrac{1}{2}+\\dfrac{N-Y}{2(Z-Y)}\\right) \\times S$ 分\n- $Z \\le N$，$S$ 分\n\n如果输出格式有误或输出无效，判 $0$ 分。\n\n#### 说明\n\n翻译自 [第１９回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) [Day4 B 伝説の団子職人 ](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day4/dango2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2020] 伝説の団子職人", "background": "您是做团子带师，您太强了。", "description": "您面前有一个 $R \\times C$ 的网格，每一个格子里有一个团子，您可以横向，竖向，斜向地将三个连续的团子按顺序串起来，按顺序指可以串上中下，下中上之类的，但是不能串中下上，上下中之类的。\n\n如果一串团子的颜色为绿，白，粉或者粉，白，绿，那么称这串团子叫 AK IOI 串。\n\n求串最多 AK IOI 串的方法（我坚信做了几个 AK IOI 串就会 AK 几次 IOI）。", "inputFormat": "第一行两个整数 $R,C$ 代表网格大小。    \n接下来 $R$ 行每行 $C$ 个字符代表网格：\n\n- `P` 代表粉色团子\n- `W` 代表白色团子\n- `G` 代表绿色团子", "outputFormat": "$R$ 行每行 $C$ 个字符代表串好的网格：\n\n- 可以为 `-`，`|`，`/`，`\\`，代表一个团子串\n- 如果不是以上四种线，那么原样输出\n\n输出文件应为 `01.ans` ~ `06.ans`。", "hint": "#### 样例 1 解释\n\n您做了 $3$ 个 AK IOI 串。\n\n#### 样例 2 解释\n\n您做了 $2$ 个 AK IOI 串。\n\n#### 数据规模与约定\n\n**本题为提交答案题。**\n\n**本题使用 Special Judge。**\n\n一共有 $6$ 组数据，保证 $3 \\le R,C \\le 500$，输入文件可在附加文件中得到，具体数据表格如下：\n\n|数据点|分数 $S$|及格线 $X$|良好线 $Y$|优秀线 $Z$|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$15$|$44000$|$47000$|$47220$|\n|$2$|$15$|$39000$|$41700$|$41980$|\n|$3$|$15$|$45000$|$51000$|$51390$|\n|$4$|$15$|$18000$|$19000$|$19120$|\n|$5$|$20$|$43000$|$48200$|$48620$|\n|$6$|$20$|$44000$|$46000$|$46500$|\n\n假设 $N$ 为得到的 AK IOI 串个数，那么评分标准为（四舍五入）：\n\n- $N<X$，$0$ 分\n- $X \\le N <Y$，$\\dfrac{N-X}{2(Y-X)} \\times S$ 分\n- $Y \\le N < Z$，$\\left(\\dfrac{1}{2}+\\dfrac{N-Y}{2(Z-Y)}\\right) \\times S$ 分\n- $Z \\le N$，$S$ 分\n\n如果输出格式有误或输出无效，判 $0$ 分。\n\n#### 说明\n\n翻译自 [第１９回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) [Day4 B 伝説の団子職人 ](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day4/dango2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7219", "type": "P", "difficulty": 6, "samples": [["5\n1 3 4 2 3\n3\n1 5 3\n4 3 2\n2 4 2", "2"], ["7\n5 6 2 3 6 7 6\n5\n7 7 5\n3 3 7\n3 7 10\n1 7 6\n4 7 8", "16"], ["8\n6 8 5 7 3 4 2 1\n10\n8 2 9\n6 6 7\n8 3 18\n5 8 17\n8 5 3\n5 5 3\n5 4 8\n1 8 13\n1 7 5\n7 4 13", "44"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2020", "线段树", "JOISC/JOIST（日本）", "反悔贪心"], "title": "[JOISC 2020] 星座 3", "background": "> 蓝蓝的天空银河里       \n有只小白船      \n船上有棵桂花树      \n白兔在游玩      \n桨儿桨儿看不见      \n船上也没帆        \n飘呀飘呀飘向西天      \n渡过那条银河水       \n走向云彩国         \n走过那个云彩国      \n再向哪儿去         \n在那遥远的地方        \n闪着金光         \n晨星是灯塔          \n照呀照得亮      \n晨星是灯塔         \n照呀照得亮 \n\n**本题被卡空间的可以尝试使用 C++14 通过**", "description": "JOI 君去拍照，拍了一张大小为 $N \\times N$ 的图片，第 $i$ 列第 $j$ 行的格子称为格子 $(i,j)$。\n\n图里有白色的小白船，黄色的星星（天知道为啥星星是黄色的），黑色的空格（天知道这空格是啥），第 $i$ 列自下往上数到第 $A_i$ 行的格子里都是小白船，另外有 $M$ 颗星星，第 $i$ 颗星星在格子 $(X_i,Y_i)$，除了小白船和星星，其他格子都是空格。\n\n现在 JOI 君定义满足下面的一个矩阵为星座：\n\n1. 不包含小白船\n2. 至少包含 $2$ 颗星星\n\nJOI 君已经看星座看了 114514 年了，他厌烦了，所以他要把图片中的一些星星涂黑变成黑色空格，涂黑第 $i$ 颗星星会让图片增加 $C_i$ 的不自然度。求不存在星座的最小不自然度。", "inputFormat": "第一行一个整数 $N$ 代表图片的大小。      \n第二行 $N$ 个整数第 $i$ 个整数 $A_i$ 代表小白船的位置。   \n第三行一个整数 $M$ 代表星星的个数。     \n接下来 $M$ 行每行三个整数 $X_i,Y_i,C_i$ 代表一颗星星。", "outputFormat": "一行一个整数代表不存在星座的最小不自然度。", "hint": "#### 样例 1 解释\n\n把第三颗星星涂黑即可。\n\n#### 样例 2 解释\n\n把第三颗和第四颗星星涂黑即可。\n\n#### 子任务\n\n|子任务|特殊性质|分数|\n|:-:|:-:|:-:|\n|$1$|$N,M \\le 300$|$14$|\n|$2$|$N,M \\le 2000$|$21$|\n|$3$|无|$65$|\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 2 \\times 10^5$，$1 \\le A_i,X_i,Y_i \\le N$，$1 \\le C_i \\le 10^9$，$A_{X_i}<Y_i$，没有相同位置的星星。\n\n#### 说明\n\n翻译自 [第１９回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) [Day3 A 星座3](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day3/constellation3.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2020] 星座 3", "background": "> 蓝蓝的天空银河里       \n有只小白船      \n船上有棵桂花树      \n白兔在游玩      \n桨儿桨儿看不见      \n船上也没帆        \n飘呀飘呀飘向西天      \n渡过那条银河水       \n走向云彩国         \n走过那个云彩国      \n再向哪儿去         \n在那遥远的地方        \n闪着金光         \n晨星是灯塔          \n照呀照得亮      \n晨星是灯塔         \n照呀照得亮 \n\n**本题被卡空间的可以尝试使用 C++14 通过**", "description": "JOI 君去拍照，拍了一张大小为 $N \\times N$ 的图片，第 $i$ 列第 $j$ 行的格子称为格子 $(i,j)$。\n\n图里有白色的小白船，黄色的星星（天知道为啥星星是黄色的），黑色的空格（天知道这空格是啥），第 $i$ 列自下往上数到第 $A_i$ 行的格子里都是小白船，另外有 $M$ 颗星星，第 $i$ 颗星星在格子 $(X_i,Y_i)$，除了小白船和星星，其他格子都是空格。\n\n现在 JOI 君定义满足下面的一个矩阵为星座：\n\n1. 不包含小白船\n2. 至少包含 $2$ 颗星星\n\nJOI 君已经看星座看了 114514 年了，他厌烦了，所以他要把图片中的一些星星涂黑变成黑色空格，涂黑第 $i$ 颗星星会让图片增加 $C_i$ 的不自然度。求不存在星座的最小不自然度。", "inputFormat": "第一行一个整数 $N$ 代表图片的大小。      \n第二行 $N$ 个整数第 $i$ 个整数 $A_i$ 代表小白船的位置。   \n第三行一个整数 $M$ 代表星星的个数。     \n接下来 $M$ 行每行三个整数 $X_i,Y_i,C_i$ 代表一颗星星。", "outputFormat": "一行一个整数代表不存在星座的最小不自然度。", "hint": "#### 样例 1 解释\n\n把第三颗星星涂黑即可。\n\n#### 样例 2 解释\n\n把第三颗和第四颗星星涂黑即可。\n\n#### 子任务\n\n|子任务|特殊性质|分数|\n|:-:|:-:|:-:|\n|$1$|$N,M \\le 300$|$14$|\n|$2$|$N,M \\le 2000$|$21$|\n|$3$|无|$65$|\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 2 \\times 10^5$，$1 \\le A_i,X_i,Y_i \\le N$，$1 \\le C_i \\le 10^9$，$A_{X_i}<Y_i$，没有相同位置的星星。\n\n#### 说明\n\n翻译自 [第１９回日本情報オリンピック　春季トレーニング合宿](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/index.html) [Day3 A 星座3](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day3/constellation3.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7220", "type": "P", "difficulty": 7, "samples": [["6 2 10\n1 1\n4 0\n4 2 3\n3 3\n1 1\n4 1 2\n2 3\n2 0\n1 4\n3 2\n1 3\n1 2", "1 3\n3 2\n3 3\n6 0"], ["9 4 8\n2 3\n3 1\n1 6\n4 3\n2 6\n1 3\n2 2\n1 4\n2 3\n1 2\n2 4\n1 1", "3 6\n4 3\n7 1\n6 3"], ["8 1 8\n1 5\n4 4 1\n2 6\n1 2\n2 3\n4 2 2\n2 5\n1 1\n1 3", "4 1\n3 5\n3 2"], ["7 4 9\n1 5\n2 2\n4 2\n5 0\n2 6\n2 3\n1 2\n3 6\n1 4\n3 1\n1 1\n2 2\n1 3", "4 2\n5 1\n1 6\n5 2"], ["20 5 25\n10 6\n0 4\n2 1\n1 0\n2 3\n2 18\n3 9\n4 1 5\n4 0 2\n3 10\n4 3 3\n3 3\n2 9\n4 9 1\n3 12\n1 4\n3 19\n1 3\n1 9\n2 1\n1 7\n1 6\n4 3 3\n1 10\n1 1\n1 5\n2 0\n1 2\n2 2\n1 7", "2 17\n2 17\n9 8\n0 17\n1 17\n3 3\n10 10\n2 17\n2 17\n0 17"]], "limits": {"time": [11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000, 11000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2020", "线段树", "平衡树", "线段树分治", "JOISC/JOIST（日本）"], "title": "[JOISC 2020] 掃除", "background": "JOISC2020 Day 1 T3\n\n如果洛谷自带的下载功能无法下载错误测试点，可以在[这里](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day1/sweeping-data.zip)自行下载数据。由于测试数据过大，评测本题时，评测机可能会需要 30 秒的时间加载数据。\n\n请注意本题不同寻常的时空限制。", "description": "由于 Bitaro AK 了 IOI，所以 IOI 主办方送了他一套房子，为一个边长为 $N$ 的等腰直角三角形。房间内一点用坐标 $(x,y)$ 表示，其中 $0\\leq x+y\\leq N$。直角顶点为原点，三角形两腰分别为 $x$ 轴与 $y$ 轴。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3m2wdn4u.png)\n\n一天，Bitaro 发现自己已经 AK 了 1919810 届 IOI 闲的没事做准备打扫房间里的灰尘。这些灰尘一开始一共有 $M$ 堆，其中第 $i$ 堆位于 $(X_i,Y_i)$。同时，可能存在多堆灰尘位于同一个位置上的情况。\n\n现在 Bitaro 准备用扫帚打扫房间。我们认为扫帚是放置在房间里的一条线段，并且将这条线段的长度称为扫帚的宽度。由于 Bitaro 很有条理，所以他只会用以下的两种方式打扫房间：\n\n- Bitaro 将扫帚平行于 $y$ 轴放置，一端位于原点。然后他会垂直向右移动扫帚，直到不能移动为止。如果扫帚的宽度为 $l$，那么原来一堆满足 $x<N-l,y\\leq l$ 的灰尘 $(x,y)$ 将会被移动到 $(N-l,y)$。（这个位置可能会存在多堆灰尘）我们称这个过程为过程 H。\n\n- Bitaro 将扫帚平行于 $x$ 轴放置，一端位于原点。然后他会水平向上移动扫帚，直到不能移动为止。如果扫帚的宽度为 $l$，那么原来一堆满足 $x\\leq l,y<N-l$ 的灰尘 $(x,y)$ 将会被移动到 $(x,N-l)$。（这个位置可能会存在多堆灰尘）我们称这个过程为过程 V。\n\n在 Bitaro 的房间里，依次会发生 $Q$ 个事件。第 $i$ 个事件形如以下 $4$ 种：\n\n- Bitaro 想要计算第 $P_i$ 堆灰尘的位置坐标；\n\n- Bitaro 使用宽度为 $L_i$ 的扫帚，进行了过程 H；\n\n- Bitaro 使用宽度为 $L_i$ 的扫帚，进行了过程 V；\n\n- 有一堆新的灰尘出现在点 $(A_i,B_i)$ 处。如果在这个事件之前一共有 $c$ 堆灰尘，那么这堆灰尘就是房间中的第 $c+1$ 堆灰尘。\n\n由于 Bitaro 已经 AK 了 IOI，啥都不想干，所以你需要写一个程序，给出房间的腰长，每一堆灰尘的位置坐标和每个事件的细节，求出要求的某堆灰尘的位置坐标。", "inputFormat": "第一行三个整数，分别为 $N,M,Q$。\n\n接下来 $m$ 行，每行两个整数 $X_i,Y_i$，表示第 $i$ 堆灰尘一开始的位置。\n\n接下来 $Q$ 行，每行两到三个整数，表示一个事件。设 $T_i$ 为第一个整数，每行含义如下：\n\n- 如果 $T_i=1$，则这行有两个整数 $T_i,P_i$，表示 Bitaro 要计算第 $P_i$ 堆灰尘的坐标；\n\n- 如果 $T_i=2$，则这行有两个整数 $T_i,L_i$，表示 Bitaro 用宽度为 $L_i$ 的扫帚进行了过程 H；\n\n- 如果 $T_i=3$，则这行有两个整数 $T_i,L_i$，表示 Bitaro 用宽度为 $L_i$ 的扫帚进行了过程 V；\n\n- 如果 $T_i=4$，则这行有三个整数 $T_i,A_i,B_i$，表示一堆新的灰尘出现在 $(A_i,B_i)$ 位置。", "outputFormat": "对于每个 $T_i=1$ 的事件，输出一行两个整数，表示事件 $i$ 发生时第 $P_i$ 堆灰尘的位置坐标。", "hint": "### 样例 1 解释\n\n一开始第一堆灰尘位于 $(1,1)$，第二堆灰尘位于 $(4,0)$。图一描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8e305ll6.png)\n\n在第一个事件中，添加了 $(2,3)$ 位置上的第三堆灰尘。图二描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wili6lmg.png)\n\n在第二个事件中，Bitaro 用宽度为 $3$ 的扫帚进行了过程 V。之后，第一堆灰尘移动到了 $(1,3)$，图三描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x5x5nsvb.png)\n\n在第三个事件中，Bitaro 计算了第一堆灰尘的坐标 $(1,3)$。\n\n在第四个事件中，添加 $(1,2)$ 位置上的第四堆灰尘。图四描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sxqf521x.png)\n\n在第五个事件中，Bitaro 用宽度为 $3$ 的扫帚进行了过程 H，第一堆灰尘移到了 $(3,3)$，第三堆灰尘移到了 $(3,3)$，第四堆灰尘移到了 $(3,2)$。图五描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0lt0inff.png)\n\n在第六个事件中，Bitaro 用宽度为 $0$ 的扫帚进行了过程 H，第二堆灰尘移到了 $(6,0)$。图六描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wnv1lqz7.png)\n\n在第七个事件中，Bitaro 计算了第四堆灰尘的坐标 $(3,2)$。\n\n在第八个事件中，Bitaro 用宽度为 $2$ 的扫帚进行了过程 V，然而什么都没有发生。图七描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s4rebol9.png)\n\n在第九个事件中，Bitaro 计算了第三堆灰尘的坐标 $(3,3)$。\n\n在第十个事件中，Bitaro 计算了第二堆灰尘的坐标 $(6,0)$。\n\n这组样例满足子任务 1 和子任务 5 的限制。\n\n#### 样例 2~5 解释\n\n第二组样例满足子任务 1,2,4,5 的限制。\n\n第三组样例满足子任务 1,2,5 的限制。\n\n第四组样例满足子任务 1,3,4,5 的限制。\n\n第五组样例满足子任务 1,5 的限制。\n\n#### 子任务\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| Subtask 1 | $m\\leq 2\\times 10^3,Q\\leq 5\\times 10^3$ | $1$ |\n| Subtask 2 | $T\\in\\{1,2,4\\}$ | $10$ |\n| Subtask 3 | $T\\in\\{1,2,3\\},X_i\\leq X_{i+1},Y_i\\geq Y_{i+1}(1\\leq i\\leq m-1)$ | $11$ |\n| Subtask 4 | $T\\in\\{1,2,3\\}$ | $53$ |\n| Subtask 5 | 无 | $25$ | \n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^9,1\\leq m\\leq 5\\times 10^5,1\\leq Q\\leq 10^6$。保证：\n\n- $0\\leq X_i,Y_i\\leq N,X_i+Y_i\\leq N(1\\leq i\\leq m)$；\n\n- $1\\leq P_i\\leq M^\\prime(1\\leq i\\leq Q)$，其中 $M^\\prime$ 表示事件 $i$ 发生时灰尘的堆数；\n\n- $0\\leq L_i\\leq n-1(1\\leq i\\leq Q)$；\n\n- $0\\leq A_i,B_i\\leq n,A_i+B_i\\leq n(1\\leq i\\leq Q)$；\n\n- 至少存在一个 $T_i=1$ 的事件。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOISC 2020] 掃除", "background": "JOISC2020 Day 1 T3\n\n如果洛谷自带的下载功能无法下载错误测试点，可以在[这里](https://www.ioi-jp.org/camp/2020/2020-sp-tasks/day1/sweeping-data.zip)自行下载数据。由于测试数据过大，评测本题时，评测机可能会需要 30 秒的时间加载数据。\n\n请注意本题不同寻常的时空限制。", "description": "由于 Bitaro AK 了 IOI，所以 IOI 主办方送了他一套房子，为一个边长为 $N$ 的等腰直角三角形。房间内一点用坐标 $(x,y)$ 表示，其中 $0\\leq x+y\\leq N$。直角顶点为原点，三角形两腰分别为 $x$ 轴与 $y$ 轴。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3m2wdn4u.png)\n\n一天，Bitaro 发现自己已经 AK 了 1919810 届 IOI 闲的没事做准备打扫房间里的灰尘。这些灰尘一开始一共有 $M$ 堆，其中第 $i$ 堆位于 $(X_i,Y_i)$。同时，可能存在多堆灰尘位于同一个位置上的情况。\n\n现在 Bitaro 准备用扫帚打扫房间。我们认为扫帚是放置在房间里的一条线段，并且将这条线段的长度称为扫帚的宽度。由于 Bitaro 很有条理，所以他只会用以下的两种方式打扫房间：\n\n- Bitaro 将扫帚平行于 $y$ 轴放置，一端位于原点。然后他会垂直向右移动扫帚，直到不能移动为止。如果扫帚的宽度为 $l$，那么原来一堆满足 $x<N-l,y\\leq l$ 的灰尘 $(x,y)$ 将会被移动到 $(N-l,y)$。（这个位置可能会存在多堆灰尘）我们称这个过程为过程 H。\n\n- Bitaro 将扫帚平行于 $x$ 轴放置，一端位于原点。然后他会水平向上移动扫帚，直到不能移动为止。如果扫帚的宽度为 $l$，那么原来一堆满足 $x\\leq l,y<N-l$ 的灰尘 $(x,y)$ 将会被移动到 $(x,N-l)$。（这个位置可能会存在多堆灰尘）我们称这个过程为过程 V。\n\n在 Bitaro 的房间里，依次会发生 $Q$ 个事件。第 $i$ 个事件形如以下 $4$ 种：\n\n- Bitaro 想要计算第 $P_i$ 堆灰尘的位置坐标；\n\n- Bitaro 使用宽度为 $L_i$ 的扫帚，进行了过程 H；\n\n- Bitaro 使用宽度为 $L_i$ 的扫帚，进行了过程 V；\n\n- 有一堆新的灰尘出现在点 $(A_i,B_i)$ 处。如果在这个事件之前一共有 $c$ 堆灰尘，那么这堆灰尘就是房间中的第 $c+1$ 堆灰尘。\n\n由于 Bitaro 已经 AK 了 IOI，啥都不想干，所以你需要写一个程序，给出房间的腰长，每一堆灰尘的位置坐标和每个事件的细节，求出要求的某堆灰尘的位置坐标。", "inputFormat": "第一行三个整数，分别为 $N,M,Q$。\n\n接下来 $m$ 行，每行两个整数 $X_i,Y_i$，表示第 $i$ 堆灰尘一开始的位置。\n\n接下来 $Q$ 行，每行两到三个整数，表示一个事件。设 $T_i$ 为第一个整数，每行含义如下：\n\n- 如果 $T_i=1$，则这行有两个整数 $T_i,P_i$，表示 Bitaro 要计算第 $P_i$ 堆灰尘的坐标；\n\n- 如果 $T_i=2$，则这行有两个整数 $T_i,L_i$，表示 Bitaro 用宽度为 $L_i$ 的扫帚进行了过程 H；\n\n- 如果 $T_i=3$，则这行有两个整数 $T_i,L_i$，表示 Bitaro 用宽度为 $L_i$ 的扫帚进行了过程 V；\n\n- 如果 $T_i=4$，则这行有三个整数 $T_i,A_i,B_i$，表示一堆新的灰尘出现在 $(A_i,B_i)$ 位置。", "outputFormat": "对于每个 $T_i=1$ 的事件，输出一行两个整数，表示事件 $i$ 发生时第 $P_i$ 堆灰尘的位置坐标。", "hint": "### 样例 1 解释\n\n一开始第一堆灰尘位于 $(1,1)$，第二堆灰尘位于 $(4,0)$。图一描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8e305ll6.png)\n\n在第一个事件中，添加了 $(2,3)$ 位置上的第三堆灰尘。图二描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wili6lmg.png)\n\n在第二个事件中，Bitaro 用宽度为 $3$ 的扫帚进行了过程 V。之后，第一堆灰尘移动到了 $(1,3)$，图三描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x5x5nsvb.png)\n\n在第三个事件中，Bitaro 计算了第一堆灰尘的坐标 $(1,3)$。\n\n在第四个事件中，添加 $(1,2)$ 位置上的第四堆灰尘。图四描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sxqf521x.png)\n\n在第五个事件中，Bitaro 用宽度为 $3$ 的扫帚进行了过程 H，第一堆灰尘移到了 $(3,3)$，第三堆灰尘移到了 $(3,3)$，第四堆灰尘移到了 $(3,2)$。图五描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0lt0inff.png)\n\n在第六个事件中，Bitaro 用宽度为 $0$ 的扫帚进行了过程 H，第二堆灰尘移到了 $(6,0)$。图六描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wnv1lqz7.png)\n\n在第七个事件中，Bitaro 计算了第四堆灰尘的坐标 $(3,2)$。\n\n在第八个事件中，Bitaro 用宽度为 $2$ 的扫帚进行了过程 V，然而什么都没有发生。图七描述了房间现在的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s4rebol9.png)\n\n在第九个事件中，Bitaro 计算了第三堆灰尘的坐标 $(3,3)$。\n\n在第十个事件中，Bitaro 计算了第二堆灰尘的坐标 $(6,0)$。\n\n这组样例满足子任务 1 和子任务 5 的限制。\n\n#### 样例 2~5 解释\n\n第二组样例满足子任务 1,2,4,5 的限制。\n\n第三组样例满足子任务 1,2,5 的限制。\n\n第四组样例满足子任务 1,3,4,5 的限制。\n\n第五组样例满足子任务 1,5 的限制。\n\n#### 子任务\n\n| 子任务编号 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| Subtask 1 | $m\\leq 2\\times 10^3,Q\\leq 5\\times 10^3$ | $1$ |\n| Subtask 2 | $T\\in\\{1,2,4\\}$ | $10$ |\n| Subtask 3 | $T\\in\\{1,2,3\\},X_i\\leq X_{i+1},Y_i\\geq Y_{i+1}(1\\leq i\\leq m-1)$ | $11$ |\n| Subtask 4 | $T\\in\\{1,2,3\\}$ | $53$ |\n| Subtask 5 | 无 | $25$ | \n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^9,1\\leq m\\leq 5\\times 10^5,1\\leq Q\\leq 10^6$。保证：\n\n- $0\\leq X_i,Y_i\\leq N,X_i+Y_i\\leq N(1\\leq i\\leq m)$；\n\n- $1\\leq P_i\\leq M^\\prime(1\\leq i\\leq Q)$，其中 $M^\\prime$ 表示事件 $i$ 发生时灰尘的堆数；\n\n- $0\\leq L_i\\leq n-1(1\\leq i\\leq Q)$；\n\n- $0\\leq A_i,B_i\\leq n,A_i+B_i\\leq n(1\\leq i\\leq Q)$；\n\n- 至少存在一个 $T_i=1$ 的事件。\n", "locale": "zh-CN"}}}
{"pid": "P7221", "type": "P", "difficulty": 6, "samples": [["5\n-1 3\n1 2\n1 1\n3 2\n3 2\n5\n-1 3\n1 2\n1 1\n3 2\n3 3\n0", "13\n+inf\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "各省省选", "江苏"], "title": "[JSOI2010] 蔬菜庆典", "background": "", "description": "JYY 在火星上找到一片埋有宝藏的岛，并且带走了一些宝藏。之后 JYY 被火星人发现偷宝藏，抓了起来。火星人打算吃掉 JYY，除非 JYY 能在火星年度蔬菜庆典的游戏中赢得足够多的火星币来支付他带走宝藏的费用。\n\n游戏在蔬菜广场上进行。首先放进广场的是一个巨大的转基因南瓜，接着各种其他巨大的蔬菜被陆续拖进广场，连同大南瓜一共 $n$ 个，第 $i$ 个放入的蔬菜会用一根绳子和先前放入的某个蔬菜连接起来。按照火星人的说法，蔬菜 $i$ 是蔬菜 $p_i$ 的 Dlihc，蔬菜 $p_i$ 是蔬菜 $i$ 的 Tnerap。JYY 立即看出，一开始的大南瓜没有 Tnerap，后来的每个蔬菜都恰好有一个 Tnerap；每个蔬菜可能有一个或多个的 Dlihc，也可能没有。$n$ 个蔬菜全部在广场上安置好后，火星人在每个蔬菜上贴一张纸条，蔬菜 $i$ 的纸条上写着一个整数 $v_i$，表示这个蔬菜的价钱。\n\n游戏一个接一个地进行着。在整个晚会将要结束时，JYY 终于等到了适合自己的那一个。（你不能指望有恐高症的 JYY 会在蔬菜间玩走钢丝，尽管那样能有丰厚的报酬）。游戏规则是：游戏者（也就是 JYY）每次可以选择任意一个既有 Dlihc 又有 Tnerap 的蔬菜 $i$，将它的价钱 $v_i$ 改成 $v_p+v_c-v_i$，其中 $p$ 代表蔬菜 $i$ 的 Tnerap 的编号，$c$ 代表蔬菜 $i$ 的任意一个 Dlihc 的编号。火星人给的时间比较宽裕，足够 JYY 进行任意多次操作。当 JYY 决定不再操作时，游戏结束。之后所有巨型蔬菜将被火星政府按蔬菜上的标价收购。买菜所得的钱归 JYY 所有，用以支付他的债务。\n\nJYY 想知道，他最多能把这些蔬菜卖出多少钱，或者他能通过一系列操作使得蔬菜的总价无限制地增大。请你帮助 JYY 解决这个问题。", "inputFormat": "输入文件有多组数据，每组数据的格式为：\n\n第一行一个整数 $n$ 表示广场上蔬菜的个数。\n\n接下来 $n$ 行，每行两个整数 $p_i,v_i$，第 $i$ 行中的整数代表蔬菜 $i$ 的 Tnerap 的编号和蔬菜 $i$ 的价格。\n\n当 $n=0$ 时表示输入结束。", "outputFormat": "对于每组数据，输出一行。若蔬菜的总价能无限制增大，输出 `+inf`。否则输出一个整数，表示所有蔬菜的最大总价。", "hint": "### 样例解释 1\n\n共有两组数据。\n\n对于第一组数据，我们只能对蔬菜 $3$ 进行操作，它的值只能是 $1$ 或 $4$，所以答案为 $3+2+4+2+2=13$。\n\n对于第二组数据，可以按照如下方法使得所有蔬菜的价钱无限制地增大：\n\n$$\\begin{matrix}1\\to 3+3-1=5\\\\5\\to 3+2-5=0\\\\0\\to 3+3-0=6\\\\6\\to 3+2-6=-1\\\\-1\\to 3+3-(-1)=7\\\\\\cdots\\end{matrix}$$\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$n\\leq 2\\times 10^5,-10^7\\leq v_i\\leq 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2010] 蔬菜庆典", "background": "", "description": "JYY 在火星上找到一片埋有宝藏的岛，并且带走了一些宝藏。之后 JYY 被火星人发现偷宝藏，抓了起来。火星人打算吃掉 JYY，除非 JYY 能在火星年度蔬菜庆典的游戏中赢得足够多的火星币来支付他带走宝藏的费用。\n\n游戏在蔬菜广场上进行。首先放进广场的是一个巨大的转基因南瓜，接着各种其他巨大的蔬菜被陆续拖进广场，连同大南瓜一共 $n$ 个，第 $i$ 个放入的蔬菜会用一根绳子和先前放入的某个蔬菜连接起来。按照火星人的说法，蔬菜 $i$ 是蔬菜 $p_i$ 的 Dlihc，蔬菜 $p_i$ 是蔬菜 $i$ 的 Tnerap。JYY 立即看出，一开始的大南瓜没有 Tnerap，后来的每个蔬菜都恰好有一个 Tnerap；每个蔬菜可能有一个或多个的 Dlihc，也可能没有。$n$ 个蔬菜全部在广场上安置好后，火星人在每个蔬菜上贴一张纸条，蔬菜 $i$ 的纸条上写着一个整数 $v_i$，表示这个蔬菜的价钱。\n\n游戏一个接一个地进行着。在整个晚会将要结束时，JYY 终于等到了适合自己的那一个。（你不能指望有恐高症的 JYY 会在蔬菜间玩走钢丝，尽管那样能有丰厚的报酬）。游戏规则是：游戏者（也就是 JYY）每次可以选择任意一个既有 Dlihc 又有 Tnerap 的蔬菜 $i$，将它的价钱 $v_i$ 改成 $v_p+v_c-v_i$，其中 $p$ 代表蔬菜 $i$ 的 Tnerap 的编号，$c$ 代表蔬菜 $i$ 的任意一个 Dlihc 的编号。火星人给的时间比较宽裕，足够 JYY 进行任意多次操作。当 JYY 决定不再操作时，游戏结束。之后所有巨型蔬菜将被火星政府按蔬菜上的标价收购。买菜所得的钱归 JYY 所有，用以支付他的债务。\n\nJYY 想知道，他最多能把这些蔬菜卖出多少钱，或者他能通过一系列操作使得蔬菜的总价无限制地增大。请你帮助 JYY 解决这个问题。", "inputFormat": "输入文件有多组数据，每组数据的格式为：\n\n第一行一个整数 $n$ 表示广场上蔬菜的个数。\n\n接下来 $n$ 行，每行两个整数 $p_i,v_i$，第 $i$ 行中的整数代表蔬菜 $i$ 的 Tnerap 的编号和蔬菜 $i$ 的价格。\n\n当 $n=0$ 时表示输入结束。", "outputFormat": "对于每组数据，输出一行。若蔬菜的总价能无限制增大，输出 `+inf`。否则输出一个整数，表示所有蔬菜的最大总价。", "hint": "### 样例解释 1\n\n共有两组数据。\n\n对于第一组数据，我们只能对蔬菜 $3$ 进行操作，它的值只能是 $1$ 或 $4$，所以答案为 $3+2+4+2+2=13$。\n\n对于第二组数据，可以按照如下方法使得所有蔬菜的价钱无限制地增大：\n\n$$\\begin{matrix}1\\to 3+3-1=5\\\\5\\to 3+2-5=0\\\\0\\to 3+3-0=6\\\\6\\to 3+2-6=-1\\\\-1\\to 3+3-(-1)=7\\\\\\cdots\\end{matrix}$$\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$n\\leq 2\\times 10^5,-10^7\\leq v_i\\leq 10^7$。", "locale": "zh-CN"}}}
{"pid": "P7222", "type": "P", "difficulty": 1, "samples": [["100", "-10"]], "limits": {"time": [1000, 1000], "memory": [128000, 128000]}, "tags": [], "title": "[RC-04] 信息学竞赛", "background": "", "description": "小 R 今天学习了余角有关的数学知识，请你帮帮他计算一个角的余角吧！\n\n一个角的余角的计算公式如下：\n\n$$\\angle B=90\\degree -\\angle A$$\n\n其中 A 是给出的角，B 是你要计算的角。", "inputFormat": "一行一个整数 $x$，表示 $\\angle A=x\\degree$。", "outputFormat": "一行一个整数 $y$，表示 $\\angle B=y\\degree$。你需要严格按照公式计算。", "hint": "对于 $100\\%$ 的数据，$x$ 在 C++ 语言的 `int` 范围内。即，$x\\in[-2^{31},2^{31}-1]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-04] 信息学竞赛", "background": "", "description": "小 R 今天学习了余角有关的数学知识，请你帮帮他计算一个角的余角吧！\n\n一个角的余角的计算公式如下：\n\n$$\\angle B=90\\degree -\\angle A$$\n\n其中 A 是给出的角，B 是你要计算的角。", "inputFormat": "一行一个整数 $x$，表示 $\\angle A=x\\degree$。", "outputFormat": "一行一个整数 $y$，表示 $\\angle B=y\\degree$。你需要严格按照公式计算。", "hint": "对于 $100\\%$ 的数据，$x$ 在 C++ 语言的 `int` 范围内。即，$x\\in[-2^{31},2^{31}-1]$。", "locale": "zh-CN"}}}
{"pid": "P7223", "type": "P", "difficulty": 3, "samples": [["2 2\n1 4", "51"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["背包 DP"], "title": "[RC-04] 01 背包", "background": "", "description": "有一个容积为 $+\\infty $ 的背包，你要往里面放物品。\n\n你有 $n$ 个物品，第 $i$ 个体积为 $a_i$。\n\n你有一个幸运数字 $p$，若放入的物品体积和为 $k$，你会得到 $p^k$ 的收益。**特别地，$0^0=1$。**\n\n求所有 $2^n$ 种放入物品的方案的收益和。答案很大，因此请输出它对 $998244353$ 取模的值。", "inputFormat": "第一行两个整数 $n,p$。\n\n接下来一行 $n$ 个正整数 $a_1\\sim a_n$，描述这 $n$ 个物品的体积。", "outputFormat": "输出一个整数，为所有 $2^n$ 种方案的收益和对 $998244353$ 取模的值。", "hint": "【样例解释】\n\n答案为 $2^0+2^1+2^4+2^5=51$。\n\n【数据范围】\n\n对于所有数据，$1\\le n\\le 10^6$，$0\\le p,a_i<998244353$。\n\n详细数据范围如下表：\n\n| 测试点编号 | $n$ | $p$ | $\\sum_{i=1}^na_i$ | 每测试点分数 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ |  | $=0$ |  | $2$ |\n| $2\\sim 5$ | $\\le 22$ |  |  | $6$ |\n| $6\\sim 9$ | $\\le 1000$ |  | $\\le 1000$ | $6$ |\n| $10\\sim 14$ | $\\le 100000$ |  | $\\le 100000$ | $5$ |\n| $15$ |  |  |  | $25$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-04] 01 背包", "background": "", "description": "有一个容积为 $+\\infty $ 的背包，你要往里面放物品。\n\n你有 $n$ 个物品，第 $i$ 个体积为 $a_i$。\n\n你有一个幸运数字 $p$，若放入的物品体积和为 $k$，你会得到 $p^k$ 的收益。**特别地，$0^0=1$。**\n\n求所有 $2^n$ 种放入物品的方案的收益和。答案很大，因此请输出它对 $998244353$ 取模的值。", "inputFormat": "第一行两个整数 $n,p$。\n\n接下来一行 $n$ 个正整数 $a_1\\sim a_n$，描述这 $n$ 个物品的体积。", "outputFormat": "输出一个整数，为所有 $2^n$ 种方案的收益和对 $998244353$ 取模的值。", "hint": "【样例解释】\n\n答案为 $2^0+2^1+2^4+2^5=51$。\n\n【数据范围】\n\n对于所有数据，$1\\le n\\le 10^6$，$0\\le p,a_i<998244353$。\n\n详细数据范围如下表：\n\n| 测试点编号 | $n$ | $p$ | $\\sum_{i=1}^na_i$ | 每测试点分数 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ |  | $=0$ |  | $2$ |\n| $2\\sim 5$ | $\\le 22$ |  |  | $6$ |\n| $6\\sim 9$ | $\\le 1000$ |  | $\\le 1000$ | $6$ |\n| $10\\sim 14$ | $\\le 100000$ |  | $\\le 100000$ | $5$ |\n| $15$ |  |  |  | $25$ |", "locale": "zh-CN"}}}
{"pid": "P7224", "type": "P", "difficulty": 4, "samples": [["4 4\n1 1 2 3", "4"], ["20 123456\n1 5 12 24 189893 233333 2 22 134 3284 28456 261 50 10 1 2 2 2 2 22", "1036360"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "O2优化", "背包 DP"], "title": "[RC-04] 子集积", "background": "", "description": "给出 $n$ 个整数 $a_1\\sim a_n$，它们构成的多重集中，有几个子集的元素积大于 $m$？（空集的元素积等于 $1$）\n\n两个子集不同，当且仅当它们中包含元素的 **下标** 不同。\n\n答案很大，因此请输出它对 $998244353$ 取模的值。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来一行 $n$ 个正整数 $a_1\\sim a_n$，描述这个多重集。", "outputFormat": "一行一个整数，为答案对 $998244353$ 取模的值。", "hint": "【样例 $1$ 解释】\n\n以下子集符合要求：$\\{a_3,a_4\\}$，$\\{a_1,a_3,a_4\\}$，$\\{a_2,a_3,a_4\\}$，$\\{a_1,a_2,a_3,a_4\\}$。\n\n【数据范围】\n\n对于所有数据，$0\\le n,m\\le 10^6$，$1\\le a_i\\le 10^6$。\n\n详细数据范围如下表：\n\n| 测试点编号 | $n$ | $m$ | $a_i$ | 每测试点分数 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $=0$ |  |  | $1$ |\n| $2$ |  | $=0$ |  | $1$ |\n| $3\\sim 6$ | $\\le 22$ |  |  | $4$ |\n| $7\\sim 10$ | $\\le 1000$ | $\\le 1000$ |  | $4$ |\n| $11\\sim 14$ |  |  | 互不相同 | $4$ |\n| $15\\sim 19$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ |  | $5$ |\n| $20\\sim 24$ |  |  |  | $5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-04] 子集积", "background": "", "description": "给出 $n$ 个整数 $a_1\\sim a_n$，它们构成的多重集中，有几个子集的元素积大于 $m$？（空集的元素积等于 $1$）\n\n两个子集不同，当且仅当它们中包含元素的 **下标** 不同。\n\n答案很大，因此请输出它对 $998244353$ 取模的值。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来一行 $n$ 个正整数 $a_1\\sim a_n$，描述这个多重集。", "outputFormat": "一行一个整数，为答案对 $998244353$ 取模的值。", "hint": "【样例 $1$ 解释】\n\n以下子集符合要求：$\\{a_3,a_4\\}$，$\\{a_1,a_3,a_4\\}$，$\\{a_2,a_3,a_4\\}$，$\\{a_1,a_2,a_3,a_4\\}$。\n\n【数据范围】\n\n对于所有数据，$0\\le n,m\\le 10^6$，$1\\le a_i\\le 10^6$。\n\n详细数据范围如下表：\n\n| 测试点编号 | $n$ | $m$ | $a_i$ | 每测试点分数 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $=0$ |  |  | $1$ |\n| $2$ |  | $=0$ |  | $1$ |\n| $3\\sim 6$ | $\\le 22$ |  |  | $4$ |\n| $7\\sim 10$ | $\\le 1000$ | $\\le 1000$ |  | $4$ |\n| $11\\sim 14$ |  |  | 互不相同 | $4$ |\n| $15\\sim 19$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ |  | $5$ |\n| $20\\sim 24$ |  |  |  | $5$ |", "locale": "zh-CN"}}}
{"pid": "P7225", "type": "P", "difficulty": 3, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["交互题", "Special Judge"], "title": "[RC-04] 走迷宫", "background": "**这是一道交互题。** \n\n请确保您提交前认真阅读过 <https://www.luogu.com.cn/blog/luogu/interactive-problems>，并且熟知 P1947 的写法。\n\n您可以直接在以下样例程序中编辑：\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nextern \"C\" bool move_to(char position);\nextern \"C\" string find_out_map(int X,int Y,int N){\n\treturn \"233\";\n}\n```\n\n同时本题不支持 Pascal，祝愿 Pascal 党早日转 C++。", "description": "### 题目描述\n\n**这是一道交互题。** \n\n你被困在一个迷宫内，你需要求出这个迷宫的地图。\n\n迷宫是 $n\\times n$ 的网格，每个位置上要么是障碍，要么是路。障碍用 `1` 表示，路用 `0` 表示。坐标按照从上到下，从左到右编号，第 $i$ 行第 $j$ 列坐标为 $(i,j)$。\n\n定义两个格子连通当且仅当他们有公共边（四连通）。保证恰好存在一个 `0` 构成的连通块，并且你的出生点在这个连通块中。\n\n### 实现细节\n\n你需实现一个函数：\n\n`string find_out_map(int x,int y,int n)`\n\n参数为三个整数 $x,y,n$，返回值为一个字符串。其中 $x,y$ 表示你的坐标为 $(x,y)$（$1<x,y<n$），$n$ 为地图大小。\n\n你返回的字符串的第 $i$ 位（$0\\le i<n\\times n$）为 `1` 表示地图的第 $\\lfloor\\dfrac{i}{n}\\rfloor+1$ 行，第 $i+1-n\\lfloor \\dfrac{i}{n}\\rfloor$ 列是障碍；反之为路。\n\n你可以调用以下函数以找出答案：\n\n`bool move_to(char position)`\n\n其中 `position` 为 `WASD` 中任一个，分别表示试图向上，左，下，右（分别为横坐标减一，纵坐标减一，横坐标加一，纵坐标加一）移动。若这个函数返回 `1`，说明你成功向这个方向移动一格；否则说明这个方向上有障碍物，移动失败。注意除了最开始，你都不能从交互器获得当前坐标。假如 `position` 不合法，交互器的行为是未定义的。\n\n保证地图开始时已确定，不会动态构造。保证第一列，第一行，第 $n$ 列，第 $n$ 行都是障碍。\n\n**你的函数可能会被调用多次，请注意初始化。**", "inputFormat": "这部分你无法读取，其中包含 $n$ 与地图。输入文件以加密形式给出，并且交互器中也不会解密存储。", "outputFormat": "没有输出。", "hint": "### 交互过程范例\n\n假设地图为\n\n```\n1111\n1011\n1001\n1111\n```\n\n最初传进来的参数为 $(2,2,4)$。\n\n下面是一种合法的交互过程：\n\n| 选手调用 | 交互器返回 |\n| :----------: | :----------: |\n| `move_to('S')` | 1 |\n| `move_to('D')` | 1 |\n| `move_to('W')` | 0 |\n| 返回 `1111101110011111` | Accepted |\n\n### 数据范围与限制\n\n**本题时间限制 $2$ 秒，空间限制 $512\\text{MB}$，且保证交互库最坏情况下所用时间小于 $0.5$ 秒、空间小于 $15\\text{MB}$。**\n\n首先交互题会受到和常规题相同的限制，如超时/超空间会导致整个测试点得零分。\n\n在此基础上，当且仅当你报告的迷宫地图完全正确时你得分。设你调用函数最多的一次次数为 $W$，则你得到该测试点的满分，当且仅当 $W\\le 5\\times 10^5$。\n\n对于 $100\\%$ 的数据，$5\\le n\\le 500$。设调用你的函数的次数为 $x$（相当于有多组数据，你需要初始化），则 $1\\le x\\le 50$。详细数据范围如下，$(T)$ 表示这个测试点分数为 $T$ 分。\n\n- 测试点 $1\\ (8)$：$n=5,x\\le 50$。\n- 测试点 $2\\ (8)$：$n=7,x\\le 50$。\n- 测试点 $3\\ (20)$：$n\\le 10,x\\le 50$。\n- 测试点 $4\\ (10)$：$n\\le 500,x\\le 7$。保证仅存在恰好一个 `1` 构成的连通块。\n- 测试点 $5\\ (10)$：$n\\le 20,x\\le 20$。\n- 测试点 $6\\ (10)$：$n\\le 50,x\\le 20$。\n- 测试点 $7\\ (9)$：$n\\le 100,x\\le 10$。\n- 测试点 $8\\ (10)$：$n\\le 200,x\\le 7$。\n- 测试点 $9\\ (15)$：$n\\le 500,x\\le 7$。\n\n### 交互题怎么调试\n\n本题交互过程太过简单，因此本题不提供交互器。请选手自行编写。\n\n假如你不知道怎么做：只需编写一个程序，读入地图，并且实现 `move_to` 函数，然后把你的答案函数放于其中即可运行。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[RC-04] 走迷宫", "background": "**这是一道交互题。** \n\n请确保您提交前认真阅读过 <https://www.luogu.com.cn/blog/luogu/interactive-problems>，并且熟知 P1947 的写法。\n\n您可以直接在以下样例程序中编辑：\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nextern \"C\" bool move_to(char position);\nextern \"C\" string find_out_map(int X,int Y,int N){\n\treturn \"233\";\n}\n```\n\n同时本题不支持 Pascal，祝愿 Pascal 党早日转 C++。", "description": "### 题目描述\n\n**这是一道交互题。** \n\n你被困在一个迷宫内，你需要求出这个迷宫的地图。\n\n迷宫是 $n\\times n$ 的网格，每个位置上要么是障碍，要么是路。障碍用 `1` 表示，路用 `0` 表示。坐标按照从上到下，从左到右编号，第 $i$ 行第 $j$ 列坐标为 $(i,j)$。\n\n定义两个格子连通当且仅当他们有公共边（四连通）。保证恰好存在一个 `0` 构成的连通块，并且你的出生点在这个连通块中。\n\n### 实现细节\n\n你需实现一个函数：\n\n`string find_out_map(int x,int y,int n)`\n\n参数为三个整数 $x,y,n$，返回值为一个字符串。其中 $x,y$ 表示你的坐标为 $(x,y)$（$1<x,y<n$），$n$ 为地图大小。\n\n你返回的字符串的第 $i$ 位（$0\\le i<n\\times n$）为 `1` 表示地图的第 $\\lfloor\\dfrac{i}{n}\\rfloor+1$ 行，第 $i+1-n\\lfloor \\dfrac{i}{n}\\rfloor$ 列是障碍；反之为路。\n\n你可以调用以下函数以找出答案：\n\n`bool move_to(char position)`\n\n其中 `position` 为 `WASD` 中任一个，分别表示试图向上，左，下，右（分别为横坐标减一，纵坐标减一，横坐标加一，纵坐标加一）移动。若这个函数返回 `1`，说明你成功向这个方向移动一格；否则说明这个方向上有障碍物，移动失败。注意除了最开始，你都不能从交互器获得当前坐标。假如 `position` 不合法，交互器的行为是未定义的。\n\n保证地图开始时已确定，不会动态构造。保证第一列，第一行，第 $n$ 列，第 $n$ 行都是障碍。\n\n**你的函数可能会被调用多次，请注意初始化。**", "inputFormat": "这部分你无法读取，其中包含 $n$ 与地图。输入文件以加密形式给出，并且交互器中也不会解密存储。", "outputFormat": "没有输出。", "hint": "### 交互过程范例\n\n假设地图为\n\n```\n1111\n1011\n1001\n1111\n```\n\n最初传进来的参数为 $(2,2,4)$。\n\n下面是一种合法的交互过程：\n\n| 选手调用 | 交互器返回 |\n| :----------: | :----------: |\n| `move_to('S')` | 1 |\n| `move_to('D')` | 1 |\n| `move_to('W')` | 0 |\n| 返回 `1111101110011111` | Accepted |\n\n### 数据范围与限制\n\n**本题时间限制 $2$ 秒，空间限制 $512\\text{MB}$，且保证交互库最坏情况下所用时间小于 $0.5$ 秒、空间小于 $15\\text{MB}$。**\n\n首先交互题会受到和常规题相同的限制，如超时/超空间会导致整个测试点得零分。\n\n在此基础上，当且仅当你报告的迷宫地图完全正确时你得分。设你调用函数最多的一次次数为 $W$，则你得到该测试点的满分，当且仅当 $W\\le 5\\times 10^5$。\n\n对于 $100\\%$ 的数据，$5\\le n\\le 500$。设调用你的函数的次数为 $x$（相当于有多组数据，你需要初始化），则 $1\\le x\\le 50$。详细数据范围如下，$(T)$ 表示这个测试点分数为 $T$ 分。\n\n- 测试点 $1\\ (8)$：$n=5,x\\le 50$。\n- 测试点 $2\\ (8)$：$n=7,x\\le 50$。\n- 测试点 $3\\ (20)$：$n\\le 10,x\\le 50$。\n- 测试点 $4\\ (10)$：$n\\le 500,x\\le 7$。保证仅存在恰好一个 `1` 构成的连通块。\n- 测试点 $5\\ (10)$：$n\\le 20,x\\le 20$。\n- 测试点 $6\\ (10)$：$n\\le 50,x\\le 20$。\n- 测试点 $7\\ (9)$：$n\\le 100,x\\le 10$。\n- 测试点 $8\\ (10)$：$n\\le 200,x\\le 7$。\n- 测试点 $9\\ (15)$：$n\\le 500,x\\le 7$。\n\n### 交互题怎么调试\n\n本题交互过程太过简单，因此本题不提供交互器。请选手自行编写。\n\n假如你不知道怎么做：只需编写一个程序，读入地图，并且实现 `move_to` 函数，然后把你的答案函数放于其中即可运行。", "locale": "zh-CN"}}}
{"pid": "P7226", "type": "P", "difficulty": 1, "samples": [["2\n212\n1253\n", "1953566"], ["5\n23\n17\n43\n52\n22\n", "102"], ["3\n213\n102\n45\n", "10385"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "数学", "2015", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #3] POT", "background": null, "description": "老师给同学们发了一封电子邮件，任务如下。\n\n> 写一个程序，给你 $n$ 个数，输出 $X$。      \n> $$X = num_1^{p_1} + num_2^{p_2} + \\cdots + num_n^{p_n}$$         \n> $num_1$，$num_2$，$\\cdots$，$num_n$ 都是整数，$p_1$，$p_2$，$\\cdots$，$p_n$ 都是一位数。    \n\n但是出现了一些玄学错误，使得 $X$ 变成了：\n$$X = q_1 + q_2 +... + q_n$$\n\n注：$q_i = num_i \\times 10 + p_i$。\n\n例如，原来的 $X$ 为 $21^2+125^3$，但现在变成了 $212+1253$。请帮助老师编写一个程序，输出原来 $X$ 的值。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行一个整数 $q_i$。", "outputFormat": "仅一行一个整数，$X$ 的值。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10$，$10 \\le q_i \\le 9.999 \\times 10 ^ 3$，$1 \\leq X \\leq 10 ^ 9$。\n\n#### 说明\n翻译自 [COCI 2015-2016 #3 A POT](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 50。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #3] POT", "background": null, "description": "老师给同学们发了一封电子邮件，任务如下。\n\n> 写一个程序，给你 $n$ 个数，输出 $X$。      \n> $$X = num_1^{p_1} + num_2^{p_2} + \\cdots + num_n^{p_n}$$         \n> $num_1$，$num_2$，$\\cdots$，$num_n$ 都是整数，$p_1$，$p_2$，$\\cdots$，$p_n$ 都是一位数。    \n\n但是出现了一些玄学错误，使得 $X$ 变成了：\n$$X = q_1 + q_2 +... + q_n$$\n\n注：$q_i = num_i \\times 10 + p_i$。\n\n例如，原来的 $X$ 为 $21^2+125^3$，但现在变成了 $212+1253$。请帮助老师编写一个程序，输出原来 $X$ 的值。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行一个整数 $q_i$。", "outputFormat": "仅一行一个整数，$X$ 的值。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10$，$10 \\le q_i \\le 9.999 \\times 10 ^ 3$，$1 \\leq X \\leq 10 ^ 9$。\n\n#### 说明\n翻译自 [COCI 2015-2016 #3 A POT](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 50。", "locale": "zh-CN"}}}
{"pid": "P7227", "type": "P", "difficulty": 2, "samples": [["2 7\n", "this shakespeare fella is good"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2015", "Special Judge", "随机化", "构造", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #3] ESEJ", "background": "", "description": "小 M 要写一篇文章。\n\n- 这篇文章至少 $a$ 个词，最多 $b$ 个词，\n- 每个单词至少 $1$ 个字母，最多 $15$ 个字母。\n- 文章至少包含 $\\dfrac{b}{2}$ 个不同的单词。\n\n小 M 昨晚熬夜打 Codeforces，所以请你帮他写作文。\n\n作文只能有一段（只有一行），只能使用英文字母的小写字母和空格。\n\n**注：作文的句意可以不通顺，语法也可以不正确，只要符合要求的作文，均可以 $\\color{green}\\texttt{AC}$。**", "inputFormat": "第一行两个正整数 $a, b$。", "outputFormat": "一行，一篇作文。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1\\le a, b \\le 10^5$。\n\n#### 说明\n- 样例 #2 和样例 #3 由于输出过长放置在了这里：[样例 #2 与样例 #3](https://www.luogu.com.cn/paste/we9k25k1)。\n- 翻译自 [COCI 2015-2016 #3 B ESEJ](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 80。\n- 感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的 checker.cpp。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #3] ESEJ", "background": "", "description": "小 M 要写一篇文章。\n\n- 这篇文章至少 $a$ 个词，最多 $b$ 个词，\n- 每个单词至少 $1$ 个字母，最多 $15$ 个字母。\n- 文章至少包含 $\\dfrac{b}{2}$ 个不同的单词。\n\n小 M 昨晚熬夜打 Codeforces，所以请你帮他写作文。\n\n作文只能有一段（只有一行），只能使用英文字母的小写字母和空格。\n\n**注：作文的句意可以不通顺，语法也可以不正确，只要符合要求的作文，均可以 $\\color{green}\\texttt{AC}$。**", "inputFormat": "第一行两个正整数 $a, b$。", "outputFormat": "一行，一篇作文。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1\\le a, b \\le 10^5$。\n\n#### 说明\n- 样例 #2 和样例 #3 由于输出过长放置在了这里：[样例 #2 与样例 #3](https://www.luogu.com.cn/paste/we9k25k1)。\n- 翻译自 [COCI 2015-2016 #3 B ESEJ](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 80。\n- 感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的 checker.cpp。", "locale": "zh-CN"}}}
{"pid": "P7228", "type": "P", "difficulty": 3, "samples": [["3\n1 2\n2 3", "1\n0"], ["4\n2 1\n1 3\n4 1", "0\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2015", "Special Judge", "深度优先搜索 DFS", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #3] MOLEKULE", "background": "", "description": "有 $N$ 个点和 $N-1$ 条无向边，定义一张有向图的代价为一条在这张有向图上的最长通路长度。\n\n现在把这 $N-1$ 条无向边指定方向，使得形成的有向图代价最小。\n\n求一种指定方向的方案。", "inputFormat": "第一行一个整数 $N$ 代表点数。      \n接下来 $N-1$ 行每行两个整数 $a_i,b_i$ 代表一条边。", "outputFormat": "$N-1$ 行每行一个整数 $r$：\n\n- 如果 $r=1$ 代表从 $a_i$ 连向 $b_i$。\n- 如果 $r=0$ 代表从 $b_i$ 连向 $a_i$。", "hint": "#### 样例 1 解释\n\n如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f1q6jgtu.png)\n\n这张图的代价为 $1$，注意 $0\\ 1$ 也是一组最优解。\n\n#### 样例 2 解释\n\n如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/96aku20f.png)\n\n#### 数据规模与约定\n\n对于 $30\\%$ 的数据，$N \\le 20$。       \n对于 $100\\%$ 的数据，$2 \\le N \\le 10^5$，$1 \\le a_i,b_i\\le N$。\n\n**本题采用 Special Judge。**        \n你只需要输出任意一种合法方案。\n\n#### 说明\n\n翻译自 [COCI 2015-2016 #3 C MOLEKULE](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #3] MOLEKULE", "background": "", "description": "有 $N$ 个点和 $N-1$ 条无向边，定义一张有向图的代价为一条在这张有向图上的最长通路长度。\n\n现在把这 $N-1$ 条无向边指定方向，使得形成的有向图代价最小。\n\n求一种指定方向的方案。", "inputFormat": "第一行一个整数 $N$ 代表点数。      \n接下来 $N-1$ 行每行两个整数 $a_i,b_i$ 代表一条边。", "outputFormat": "$N-1$ 行每行一个整数 $r$：\n\n- 如果 $r=1$ 代表从 $a_i$ 连向 $b_i$。\n- 如果 $r=0$ 代表从 $b_i$ 连向 $a_i$。", "hint": "#### 样例 1 解释\n\n如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f1q6jgtu.png)\n\n这张图的代价为 $1$，注意 $0\\ 1$ 也是一组最优解。\n\n#### 样例 2 解释\n\n如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/96aku20f.png)\n\n#### 数据规模与约定\n\n对于 $30\\%$ 的数据，$N \\le 20$。       \n对于 $100\\%$ 的数据，$2 \\le N \\le 10^5$，$1 \\le a_i,b_i\\le N$。\n\n**本题采用 Special Judge。**        \n你只需要输出任意一种合法方案。\n\n#### 说明\n\n翻译自 [COCI 2015-2016 #3 C MOLEKULE](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7229", "type": "P", "difficulty": 4, "samples": [["5+3+x\n9 10\n", "1"], ["20+3+x\n0 5\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2015", "数论", "栈", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #3] SLON", "background": "", "description": "小 Q 在学校里非常调皮。\n\n他上课时总是很无聊，他总是把课堂弄得一团糟。老师希望让他冷静下来，所以给他出了一道很难的数学题。\n\n老师给小 Q 一个算术表达式 $A$、整数 $P$ 和 $M$，小 Q 要回答的是以下问题：\n\n> 求最小非负整数  $x$，使含  $x$ 的表达式  $A$ 除以  $M$ 余数等于  $P$。\n\n注意每一个运算符均会连接两个数或是变量。每一个乘号都不会省略且不允许连接两个含有 $x$ 的表达式。括号均合法，可能存在括号内容仅有一个数或变量的情况。\n\n题目保证原表达式化简后一定能写成一个形如 $kx+b$ 的一元一次式。", "inputFormat": "第一行，一行表达式 $A$。\n\n第二行，两个正整数 $P, M$。", "outputFormat": "第一行，一个正整数 $x$。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据：\n- 令 $|A|$ 为字符串 $A$ 的长度，那么 $1 \\le |A| \\le 10 ^ 5$。\n- 表达式 $A$ 中仅会有 $\\texttt{+}$，$\\texttt{-}$，$\\texttt{*}$，$\\texttt{(}$，$\\texttt{)}$，$\\texttt{x}$，和 $\\texttt{0}$ $\\sim$ $\\texttt{9}$。\n- $0 \\le P \\le M - 1$。\n- $1 \\le M \\le 10 ^ 6$。\n\n#### 说明\n翻译自 [COCI 2015-2016 #3 D SLON](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 120。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #3] SLON", "background": "", "description": "小 Q 在学校里非常调皮。\n\n他上课时总是很无聊，他总是把课堂弄得一团糟。老师希望让他冷静下来，所以给他出了一道很难的数学题。\n\n老师给小 Q 一个算术表达式 $A$、整数 $P$ 和 $M$，小 Q 要回答的是以下问题：\n\n> 求最小非负整数  $x$，使含  $x$ 的表达式  $A$ 除以  $M$ 余数等于  $P$。\n\n注意每一个运算符均会连接两个数或是变量。每一个乘号都不会省略且不允许连接两个含有 $x$ 的表达式。括号均合法，可能存在括号内容仅有一个数或变量的情况。\n\n题目保证原表达式化简后一定能写成一个形如 $kx+b$ 的一元一次式。", "inputFormat": "第一行，一行表达式 $A$。\n\n第二行，两个正整数 $P, M$。", "outputFormat": "第一行，一个正整数 $x$。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据：\n- 令 $|A|$ 为字符串 $A$ 的长度，那么 $1 \\le |A| \\le 10 ^ 5$。\n- 表达式 $A$ 中仅会有 $\\texttt{+}$，$\\texttt{-}$，$\\texttt{*}$，$\\texttt{(}$，$\\texttt{)}$，$\\texttt{x}$，和 $\\texttt{0}$ $\\sim$ $\\texttt{9}$。\n- $0 \\le P \\le M - 1$。\n- $1 \\le M \\le 10 ^ 6$。\n\n#### 说明\n翻译自 [COCI 2015-2016 #3 D SLON](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 120。", "locale": "zh-CN"}}}
{"pid": "P7230", "type": "P", "difficulty": 6, "samples": [["4 3 5\n2 3 1 2\n2\n1 3 3\n2\n1 1 1\n2\n", "3\n-1\n4\n"], ["6 3 6\n1 2 3 2 1 1\n2\n1 2 1\n2\n1 4 1\n1 6 2\n2", "3\n3\n4\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712, 499712]}, "tags": ["2015", "线段树", "COCI（克罗地亚）", "双指针 two-pointer", "线段树分治"], "title": "[COCI 2015/2016 #3] NEKAMELEONI", "background": "> 「嘿，亲爱的！我要去给 $11$ 月 $28$ 日的 Croatian Open Competition In Informatics 出 T5。」      \n> 「去吧，去吧……」 　　                       \n> 「…」\n> _____\n> 「这题怎么样？」          \n> 「唔……这太难了……会把那些小可爱难住的，换个简单些的吧……」           \n> 于是可爱的出题人便出了这道题。\n> ______\n> 嘿！我会 $O(n^6)$ 的做法，$ n$ 的范围是什么？？", "description": "给你一个 $n$ 个元素的数组。你需要处理 $q$ 个查询。\n\n- 第一种查询需要你将数组中的第 $p$ 个数字改为 $v$。\n- 第二种查询需要你确定当前数组中最短的连续子数组的长度，这个子数组必须要包含从 $1$ 到 $k$ 的所有数字。\n", "inputFormat": "第一行，三个正整数 $n, k, m$。\n\n第二行，$n$ 个正整数，用空格隔开，表示数组中的数。\n\n接着，$m$ 行，表示 $m$ 个查询，每个查询有以下两种形式。\n- $\\texttt{1 p v}$：将数组中的第 $p$ 个数字改为 $v$。\n- $\\texttt{2}$：确定并输出当前数组中最短的连续子数组的长度，这个子数组必须要包含从 $1$ 到 $k$ 的所有数字。", "outputFormat": "仅查询 $2$ 有输出。\n\n对于每个查询 $2$，输出当前数组中最短的连续子数组的长度（这个子数组必须要包含从 $1$ 到 $k$ 的所有数字），若没有输出 $\\texttt{-1}$。", "hint": "#### 数据范围及约定\n- 对于 $30\\%$ 的数据，$1\\le n, m \\le 5 \\times 10 ^ 3$。\n- 对于 $100\\%$ 的数据，$1 \\le n, m \\le 10^5$，$1\\le k \\le 50$，$1 \\le p \\le n$，$1\\le v \\le k$。\n\n#### 说明\n翻译自 [COCI 2015-2016 #3 E NEKAMELEONI](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 140。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #3] NEKAMELEONI", "background": "> 「嘿，亲爱的！我要去给 $11$ 月 $28$ 日的 Croatian Open Competition In Informatics 出 T5。」      \n> 「去吧，去吧……」 　　                       \n> 「…」\n> _____\n> 「这题怎么样？」          \n> 「唔……这太难了……会把那些小可爱难住的，换个简单些的吧……」           \n> 于是可爱的出题人便出了这道题。\n> ______\n> 嘿！我会 $O(n^6)$ 的做法，$ n$ 的范围是什么？？", "description": "给你一个 $n$ 个元素的数组。你需要处理 $q$ 个查询。\n\n- 第一种查询需要你将数组中的第 $p$ 个数字改为 $v$。\n- 第二种查询需要你确定当前数组中最短的连续子数组的长度，这个子数组必须要包含从 $1$ 到 $k$ 的所有数字。\n", "inputFormat": "第一行，三个正整数 $n, k, m$。\n\n第二行，$n$ 个正整数，用空格隔开，表示数组中的数。\n\n接着，$m$ 行，表示 $m$ 个查询，每个查询有以下两种形式。\n- $\\texttt{1 p v}$：将数组中的第 $p$ 个数字改为 $v$。\n- $\\texttt{2}$：确定并输出当前数组中最短的连续子数组的长度，这个子数组必须要包含从 $1$ 到 $k$ 的所有数字。", "outputFormat": "仅查询 $2$ 有输出。\n\n对于每个查询 $2$，输出当前数组中最短的连续子数组的长度（这个子数组必须要包含从 $1$ 到 $k$ 的所有数字），若没有输出 $\\texttt{-1}$。", "hint": "#### 数据范围及约定\n- 对于 $30\\%$ 的数据，$1\\le n, m \\le 5 \\times 10 ^ 3$。\n- 对于 $100\\%$ 的数据，$1 \\le n, m \\le 10^5$，$1\\le k \\le 50$，$1 \\le p \\le n$，$1\\le v \\le k$。\n\n#### 说明\n翻译自 [COCI 2015-2016 #3 E NEKAMELEONI](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 140。\n\n", "locale": "zh-CN"}}}
{"pid": "P7231", "type": "P", "difficulty": 5, "samples": [["3 1\n2 7 6\n9 5 1\n4 3 8\n", "31"], ["4 2\n1 2 4 0\n4 0 5 4\n0 3 5 1\n1 0 4 1\n", "17"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2015", "网络流", "最短路", "费用流", "前缀和", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #3] DOMINO", "background": "「誕生日おめでとう！!」\n\n小 M 收到了他女朋友的生日祝福和一份礼物。", "description": "小 M 的女朋友送小 M 了一张 $n \\times n$ 的表格作为生日礼物，在表格的每个单元格中都写有一个非负整数。\n\n不幸的是，有些单元格里数字太大了，小 M 不喜欢它们，所以他将在表格上面放置 $k$ 张骨牌，将覆盖那些数字太大的单元格。\n\n更准确地说，小 M 按照以下规则放置骨牌。\n\n- 骨牌为 $1\\times 2$ 的矩形，不能拆开放置。\n- 骨牌不重叠（但可以接触）。\n- 所有可见（未覆盖）字段的总和需要尽可能的小。\n\n您的任务是确定最小可见区域的数字的总和。数据保证可放置 $k$ 个骨牌且无重叠。", "inputFormat": "第一行，$2$ 个正整数 $n,k$，$n$ 表示表格的尺寸， $k$ 表示骨牌的数量。\n\n接下来 $n$ 行，每一行都有 $n$ 个整数 $a_i$。这些 $n \\times n$ 的数字的数字描述了 Mirko 的表格。", "outputFormat": "一行一个整数，最小可见区域的数字的总和。", "hint": "#### 数据规模及约定\n对于 $100\\%$ 的数据，$1\\le n \\le 2 \\times 10 ^ 3$，$1\\le k \\le 8$，$0 \\le a_i \\le 10 ^ 3$。\n\n#### 说明\n翻译自 [COCI 2015-2016 #3 F DOMINO](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 160。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #3] DOMINO", "background": "「誕生日おめでとう！!」\n\n小 M 收到了他女朋友的生日祝福和一份礼物。", "description": "小 M 的女朋友送小 M 了一张 $n \\times n$ 的表格作为生日礼物，在表格的每个单元格中都写有一个非负整数。\n\n不幸的是，有些单元格里数字太大了，小 M 不喜欢它们，所以他将在表格上面放置 $k$ 张骨牌，将覆盖那些数字太大的单元格。\n\n更准确地说，小 M 按照以下规则放置骨牌。\n\n- 骨牌为 $1\\times 2$ 的矩形，不能拆开放置。\n- 骨牌不重叠（但可以接触）。\n- 所有可见（未覆盖）字段的总和需要尽可能的小。\n\n您的任务是确定最小可见区域的数字的总和。数据保证可放置 $k$ 个骨牌且无重叠。", "inputFormat": "第一行，$2$ 个正整数 $n,k$，$n$ 表示表格的尺寸， $k$ 表示骨牌的数量。\n\n接下来 $n$ 行，每一行都有 $n$ 个整数 $a_i$。这些 $n \\times n$ 的数字的数字描述了 Mirko 的表格。", "outputFormat": "一行一个整数，最小可见区域的数字的总和。", "hint": "#### 数据规模及约定\n对于 $100\\%$ 的数据，$1\\le n \\le 2 \\times 10 ^ 3$，$1\\le k \\le 8$，$0 \\le a_i \\le 10 ^ 3$。\n\n#### 说明\n翻译自 [COCI 2015-2016 #3 F DOMINO](https://hsin.hr/coci/archive/2015_2016/contest3_tasks.pdf)，满分 160。", "locale": "zh-CN"}}}
{"pid": "P7232", "type": "P", "difficulty": 0, "samples": [["9\n2 5 1 2 1\n2 3 1 6 1\n2 7 1 4 1\n2 8 1 9 1\n0\n0\n0\n0\n0", "8"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "各省省选", "江苏", "树形 DP"], "title": "[JSOI2014] 支线剧情 2", "background": "", "description": "宅男 JYY 非常喜欢玩 RPG 游戏，并且 JYY 总是想花费最少的时间看完所有的支线剧情。最近JYY买了一款新的正版 RPG 游戏,所以 JYY 总算可以“读档”和“存档”了！\n\nJYY 现在所玩的 RPG 游戏中，一共有 $n$ 个剧情点，由 $1$ 到 $n$ 编号，第 $i$ 个剧情点可以根据 JYY 的不同的选择，而经过不同的支线剧情，前往 $k_i$ 种不同的新的剧情点。当然如果 $k_i$ 为 $0$，则说明 $i$ 号剧情点是游戏的一个结局了。\n\n\nJYY 观看一个支线剧情需要一定的时间。JYY—开始处在 $1$ 号剧情点，也就是游戏的开始。JYY 买的这款游戏很特殊，从游戏开始到达任何一个剧情点的支线路径都是唯一的。而且，任何一个剧情点都是从 $1$ 号剧情点可达的。\n\n与上一款 RPG 游戏一样，JYY 可以在任意时刻选择重新开始游戏，即回到 $1$ 号剧情点。不过有些不同的是，这次 JYY 买的是正版软件，每当 JYY 到达一个剧情点，JYY 都可以进行“存档”和“读档”。但是很遗憾的是，JYY 的 RPG 游戏只有一个存档的位置：每次“存档”操作都会覆盖之前的存档。比如，如果 JYY 在 $x$ 号剧情点进行了“存档”操作，那么此后当 JYY 到达任何一个剧情点（包括结局）都可以“读档”并立即回到 $x$号剧情点。但是如果之后 JYY 在 $y$ 号剧情点又进行了“存档”，那么 JYY 再进行“读档”，就只能回到 $y$ 号剧情点了。\n\n一开始存档位置里没有存储任何信息，所以 JYY 只有在进行一次“存档”操作之后才可以进行“读档”操作，并且“读档”，“存档”和“重新开始”都是不需要花费时间的。\n\n\n重复观看己经看过的剧情是很痛苦的，JYY 希望花费最少的时间，看完所有不同的支线剧情。", "inputFormat": "第一行为一个正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行为第 $i$ 号剧情点的信息。\n\n每一行第一个非负整数为 $k_i$。接下来 $k_i$ 个整数对，$b_{i,j}$ 和 $t_{i,j}$，表示从剧情点 $i$ 可以前往剧情点 $b_{i,j}$，并且观看这段支线剧情需要花费 $t_{i,j}$ 的时间。", "outputFormat": "一行一个整数，表示 JYY 看完所有支线剧情所需要的最少时间。", "hint": "### 样例解释 1\n\n最佳路线为：\n\n从 $1$ 前往 $5$，然后重新开始。\n\n从 $1$ 前往 $2$，在 $2$ 处存档，再前往 $6$，并读档。\n\n从 $2$ 前往 $3$，在 $3$ 处存档，再前往 $7$，并读档。\n\n从 $3$ 前往 $4$，在 $4$ 处存档，再前往 $8$，并读档。\n\n最后前往 $9$，花费时间为 $8$。可以证明没有比 $8$ 更小的答案。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$n\\leq 10^6,1\\leq t_{i,j}\\leq 10^4,\\sum\\limits_{i=1}^{n}k_i=n-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2014] 支线剧情 2", "background": "", "description": "宅男 JYY 非常喜欢玩 RPG 游戏，并且 JYY 总是想花费最少的时间看完所有的支线剧情。最近JYY买了一款新的正版 RPG 游戏,所以 JYY 总算可以“读档”和“存档”了！\n\nJYY 现在所玩的 RPG 游戏中，一共有 $n$ 个剧情点，由 $1$ 到 $n$ 编号，第 $i$ 个剧情点可以根据 JYY 的不同的选择，而经过不同的支线剧情，前往 $k_i$ 种不同的新的剧情点。当然如果 $k_i$ 为 $0$，则说明 $i$ 号剧情点是游戏的一个结局了。\n\n\nJYY 观看一个支线剧情需要一定的时间。JYY—开始处在 $1$ 号剧情点，也就是游戏的开始。JYY 买的这款游戏很特殊，从游戏开始到达任何一个剧情点的支线路径都是唯一的。而且，任何一个剧情点都是从 $1$ 号剧情点可达的。\n\n与上一款 RPG 游戏一样，JYY 可以在任意时刻选择重新开始游戏，即回到 $1$ 号剧情点。不过有些不同的是，这次 JYY 买的是正版软件，每当 JYY 到达一个剧情点，JYY 都可以进行“存档”和“读档”。但是很遗憾的是，JYY 的 RPG 游戏只有一个存档的位置：每次“存档”操作都会覆盖之前的存档。比如，如果 JYY 在 $x$ 号剧情点进行了“存档”操作，那么此后当 JYY 到达任何一个剧情点（包括结局）都可以“读档”并立即回到 $x$号剧情点。但是如果之后 JYY 在 $y$ 号剧情点又进行了“存档”，那么 JYY 再进行“读档”，就只能回到 $y$ 号剧情点了。\n\n一开始存档位置里没有存储任何信息，所以 JYY 只有在进行一次“存档”操作之后才可以进行“读档”操作，并且“读档”，“存档”和“重新开始”都是不需要花费时间的。\n\n\n重复观看己经看过的剧情是很痛苦的，JYY 希望花费最少的时间，看完所有不同的支线剧情。", "inputFormat": "第一行为一个正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行为第 $i$ 号剧情点的信息。\n\n每一行第一个非负整数为 $k_i$。接下来 $k_i$ 个整数对，$b_{i,j}$ 和 $t_{i,j}$，表示从剧情点 $i$ 可以前往剧情点 $b_{i,j}$，并且观看这段支线剧情需要花费 $t_{i,j}$ 的时间。", "outputFormat": "一行一个整数，表示 JYY 看完所有支线剧情所需要的最少时间。", "hint": "### 样例解释 1\n\n最佳路线为：\n\n从 $1$ 前往 $5$，然后重新开始。\n\n从 $1$ 前往 $2$，在 $2$ 处存档，再前往 $6$，并读档。\n\n从 $2$ 前往 $3$，在 $3$ 处存档，再前往 $7$，并读档。\n\n从 $3$ 前往 $4$，在 $4$ 处存档，再前往 $8$，并读档。\n\n最后前往 $9$，花费时间为 $8$。可以证明没有比 $8$ 更小的答案。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$n\\leq 10^6,1\\leq t_{i,j}\\leq 10^4,\\sum\\limits_{i=1}^{n}k_i=n-1$。", "locale": "zh-CN"}}}
{"pid": "P7233", "type": "P", "difficulty": 6, "samples": [["5\n0 1 7 10\n0 -1 7 10\n5 0 1 -15\n10 0 6 10\n15 1 2 -20", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "各省省选", "网络流", "江苏", "最小割"], "title": "[JSOI2014] 电信网络", "background": "", "description": "JYY 创建的电信公司，垄断着整个 JSOI 王国的电信网络。JYY在 JSOI 王国里建造了很多的通信基站。目前所有的基站都是使用 2G 网络系统的。而现在 3G 时代已经到来了，JYY 在思考，要不要把一些基站升级成 3G 网络的呢？\n\nJSOI王国可以被看作为一个无穷大的二维平面，JYY 一共建造了 $n$ 个通信基站，第 $i$ 个基站的坐标是 $(x_i,y_i)$。每个基站有一个通信范围 $r_i$。第 $i$ 号基站会向所有到其距离不超过 $r_i$ 的基站发送信息。\n\n每个基站升级到 3G 网络都会有一个收益 $s_i$，这个收益可能是正数（比如基站附近有个大城市，用户很多，赚的流量费也就很多了），也可能是负数（比如基站周围市场不佳，收益不能填补升级基站本身的投资）。此外，由于原有的使用 2G 网络系统的基站无法解析从升级成 3G 网络系统的基站所发来的信息（但是升级之后的基站是可以解析未升级基站发来的信息的），所以JYY必须使得在升级工作全部完成之后，所有使用3G网络的基站，其通信范围内的基站，也都是使用 3G 网络的。\n\n由于基站数量很多，你可以帮助 JYY 计算一下，他通过升级基站，最多能获得的收益是多少吗？", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行 $4$ 个整数 $x_i,y_i,r_i,s_i$，表示处在 $(x_i,y_i)$ 的基站的通信范围是 $r_i$，升级可以获得的收益是 $s_i$。\n\n数据满足任意两个基站的坐标不同。", "outputFormat": "一行一个整数，表示可以获得的最大收益。", "hint": "### 样例解释 1\n\n将前三座基站升级可以获得最大收益。\n\n### 数据范围\n\n$1\\leq n\\leq 500,1\\leq r_i\\leq 2\\times 10^4,-10^4\\leq x_i,y_i,s_i\\leq 10^4$，保证所有基站坐标两两不同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2014] 电信网络", "background": "", "description": "JYY 创建的电信公司，垄断着整个 JSOI 王国的电信网络。JYY在 JSOI 王国里建造了很多的通信基站。目前所有的基站都是使用 2G 网络系统的。而现在 3G 时代已经到来了，JYY 在思考，要不要把一些基站升级成 3G 网络的呢？\n\nJSOI王国可以被看作为一个无穷大的二维平面，JYY 一共建造了 $n$ 个通信基站，第 $i$ 个基站的坐标是 $(x_i,y_i)$。每个基站有一个通信范围 $r_i$。第 $i$ 号基站会向所有到其距离不超过 $r_i$ 的基站发送信息。\n\n每个基站升级到 3G 网络都会有一个收益 $s_i$，这个收益可能是正数（比如基站附近有个大城市，用户很多，赚的流量费也就很多了），也可能是负数（比如基站周围市场不佳，收益不能填补升级基站本身的投资）。此外，由于原有的使用 2G 网络系统的基站无法解析从升级成 3G 网络系统的基站所发来的信息（但是升级之后的基站是可以解析未升级基站发来的信息的），所以JYY必须使得在升级工作全部完成之后，所有使用3G网络的基站，其通信范围内的基站，也都是使用 3G 网络的。\n\n由于基站数量很多，你可以帮助 JYY 计算一下，他通过升级基站，最多能获得的收益是多少吗？", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行 $4$ 个整数 $x_i,y_i,r_i,s_i$，表示处在 $(x_i,y_i)$ 的基站的通信范围是 $r_i$，升级可以获得的收益是 $s_i$。\n\n数据满足任意两个基站的坐标不同。", "outputFormat": "一行一个整数，表示可以获得的最大收益。", "hint": "### 样例解释 1\n\n将前三座基站升级可以获得最大收益。\n\n### 数据范围\n\n$1\\leq n\\leq 500,1\\leq r_i\\leq 2\\times 10^4,-10^4\\leq x_i,y_i,s_i\\leq 10^4$，保证所有基站坐标两两不同。", "locale": "zh-CN"}}}
{"pid": "P7234", "type": "P", "difficulty": 5, "samples": [["4 3\n1 1\n1 3\n1 2", "1 3 2 3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "各省省选", "江苏", "哈希 hashing", "STL"], "title": "[JSOI2014] 歌剧表演", "background": "", "description": "文艺青年 JYY 非常喜欢观看歌剧表演。\n\nJYY 知道所有演员的长相和名字，但是却对不上号，JYY 希望有一天能够知道每一个演员到底是谁。\n\nJSOI 歌剧团一共有 $n$ 个演员，并进行了 $m$ 次演出。所有演员由 $1$ 到 $n$ 编号，并且第 $i$ 次演出共有 $k_i$ 位演员参加。\n\nJYY看过所有 $n$ 个演员的照片(即知道这 $n$ 个演员的长相)，也看过演员的名单(即知道这 $n$ 个演员的姓名，假设没有同名的情况)，并且仔细观摩了所有的 $m$ 次演出：每次演出 JYY 都知道有哪些演员参加了本次表演并且能够分辨出他们的长相。\n\n现在JYY想知道，看完这 $m$ 次演出之后，他是不是能够把所有演员的名字和长相都一一对应了呢？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行首先包含一个整数 $k_i$，接下来 $k_i$ 个不同的 $1$ 到 $n$ 之间的整数，表示参与此次演出的演员编号。", "outputFormat": "一行 $n$ 个整数，第 $i$ 个整数 $a_i$ 表示编号为 $i$ 的演员在第 $a_i$ 场演出之后 JYY 就可以将他的编号和长相对应起来。\n\n如果 $m$ 次演出之后 JYY 仍然不能认出这个演员，则 $a_i$ 为 $0$。", "hint": "### 样例解释 1\n\n每一场演出可以确定一个演员的长相，而 $4$ 号演员是唯一一直没有参加过演出的。\n由于 JYY 一开始知道所有演员的长相，所以第三场演出后 JYY 也可以确认 $4$ 号演员的长相。\n\n### 数据范围\n\n$1\\leq n,m\\leq 10^5,\\sum\\limits_{i=1}^{n}k_i\\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2014] 歌剧表演", "background": "", "description": "文艺青年 JYY 非常喜欢观看歌剧表演。\n\nJYY 知道所有演员的长相和名字，但是却对不上号，JYY 希望有一天能够知道每一个演员到底是谁。\n\nJSOI 歌剧团一共有 $n$ 个演员，并进行了 $m$ 次演出。所有演员由 $1$ 到 $n$ 编号，并且第 $i$ 次演出共有 $k_i$ 位演员参加。\n\nJYY看过所有 $n$ 个演员的照片(即知道这 $n$ 个演员的长相)，也看过演员的名单(即知道这 $n$ 个演员的姓名，假设没有同名的情况)，并且仔细观摩了所有的 $m$ 次演出：每次演出 JYY 都知道有哪些演员参加了本次表演并且能够分辨出他们的长相。\n\n现在JYY想知道，看完这 $m$ 次演出之后，他是不是能够把所有演员的名字和长相都一一对应了呢？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行首先包含一个整数 $k_i$，接下来 $k_i$ 个不同的 $1$ 到 $n$ 之间的整数，表示参与此次演出的演员编号。", "outputFormat": "一行 $n$ 个整数，第 $i$ 个整数 $a_i$ 表示编号为 $i$ 的演员在第 $a_i$ 场演出之后 JYY 就可以将他的编号和长相对应起来。\n\n如果 $m$ 次演出之后 JYY 仍然不能认出这个演员，则 $a_i$ 为 $0$。", "hint": "### 样例解释 1\n\n每一场演出可以确定一个演员的长相，而 $4$ 号演员是唯一一直没有参加过演出的。\n由于 JYY 一开始知道所有演员的长相，所以第三场演出后 JYY 也可以确认 $4$ 号演员的长相。\n\n### 数据范围\n\n$1\\leq n,m\\leq 10^5,\\sum\\limits_{i=1}^{n}k_i\\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P7238", "type": "P", "difficulty": 5, "samples": [["3\n1 2\n1 3", "5"], ["5\n1 2\n1 3\n2 4\n2 5", "9"], ["9\n1 2\n1 3\n1 4\n1 5\n2 6\n2 7\n5 8\n5 9", "11"], ["5\n1 2\n2 3\n2 4\n2 5", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "洛谷原创", "O2优化"], "title": "迷失森林", "background": "", "description": "首先给出一棵以 $1$ 为根，$n$ 个结点的树，定义为「单位树」。\n\n现有 $n$ 个结构与「单位树」完全相同的树，要将 $n$ 个树再用 $n-1$ 条边连接起来。\n\n为方便叙述，用符号 $(a,b)$ 表示结点 $a$ 所代表树中，编号为 $b$ 的结点。\n\n连接方式如下：\n\n1. 将 $n$ 棵树按照「单位树」的结构摆放好。\n\n2. 对于每个 $i(1<i\\leq n)$，连接结点 $(i,1)$ 和 $(f_i,f_i)$。其中 $f_i$ 表示「单位树」中结点 $i$ 的父亲。\n\n求将 $n$ 棵树连接后，整棵包含 $n^2$ 个结点的树中，树上两点简单路径所包含的 **结点** 个数的最大值。", "inputFormat": "第一行输入一个正整数 $n$，表示「单位树」的结点数。\n\n接下来输入 $n-1$ 行，每行两个正整数 $u,v$，表示「单位树」中的一条边。", "outputFormat": "输出一行一个正整数，表示树上两点简单路径所包含的 **结点** 个数的最大值。", "hint": "#### 样例说明\n\n样例 #1 ![](https://i.loli.net/2021/10/24/QRqkpeC7u4dYA5o.png)\n\n样例 #2 如下图，以 $(3,4)$ 和 $(4,4)$ 为两端的路径包含 $9$ 个结点，长度为 $9$。\n\n![](https://i.loli.net/2021/10/24/2IVR9ZXuNcdzTQp.png)\n\n样例 #3 如下图，取 $(6,6)$ 和 $(9,9)$，包含 $11$ 个结点。\n\n![](https://i.loli.net/2021/10/24/th8CWcbxQEGVXRm.png)\n\n事实上，任取两个最近公共祖先为 $1$ 的橙色结点，答案均为 $11$。\n\n#### 数据范围\n\n**本题采取捆绑测试。**\n\n| 子任务编号 | 分值 | $n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $10$ | $\\times$ |\n| $2$ | $12$ | $10^6$ | $v=u+1$ |\n| $3$ | $6$ | $10^6$ | $u=1$ |\n| $4$ | $18$ | $=2^k(k\\in\\mathbf{Z})$ | $u=\\left\\lfloor\\dfrac{v}{2}\\right\\rfloor$ |\n| $5$ | $27$ | $10^3$ | 树的形态随机 |\n| $6$ | $27$ | $10^6$ | $\\times$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq10^6$，结点编号介于 $1\\sim n$ 之间。\n\n**本题可能略微卡常。**\n\n时限缩短为 1s，原因如下：\n\n- 讨论区认为本题撞原，为防止所谓「加强版」的 $O(n\\log n)$ 做法直接冲过本题，时限缩短。\n\n- 最优解能跑进 200ms 以内。\n\n- 由于出题人懒惰，懒得 $n\\le10^6\\rightarrow n\\le10^7$ 只能通过缩短时限来卡掉所谓原题做法（实际上是错解）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "迷失森林", "background": "", "description": "首先给出一棵以 $1$ 为根，$n$ 个结点的树，定义为「单位树」。\n\n现有 $n$ 个结构与「单位树」完全相同的树，要将 $n$ 个树再用 $n-1$ 条边连接起来。\n\n为方便叙述，用符号 $(a,b)$ 表示结点 $a$ 所代表树中，编号为 $b$ 的结点。\n\n连接方式如下：\n\n1. 将 $n$ 棵树按照「单位树」的结构摆放好。\n\n2. 对于每个 $i(1<i\\leq n)$，连接结点 $(i,1)$ 和 $(f_i,f_i)$。其中 $f_i$ 表示「单位树」中结点 $i$ 的父亲。\n\n求将 $n$ 棵树连接后，整棵包含 $n^2$ 个结点的树中，树上两点简单路径所包含的 **结点** 个数的最大值。", "inputFormat": "第一行输入一个正整数 $n$，表示「单位树」的结点数。\n\n接下来输入 $n-1$ 行，每行两个正整数 $u,v$，表示「单位树」中的一条边。", "outputFormat": "输出一行一个正整数，表示树上两点简单路径所包含的 **结点** 个数的最大值。", "hint": "#### 样例说明\n\n样例 #1 ![](https://i.loli.net/2021/10/24/QRqkpeC7u4dYA5o.png)\n\n样例 #2 如下图，以 $(3,4)$ 和 $(4,4)$ 为两端的路径包含 $9$ 个结点，长度为 $9$。\n\n![](https://i.loli.net/2021/10/24/2IVR9ZXuNcdzTQp.png)\n\n样例 #3 如下图，取 $(6,6)$ 和 $(9,9)$，包含 $11$ 个结点。\n\n![](https://i.loli.net/2021/10/24/th8CWcbxQEGVXRm.png)\n\n事实上，任取两个最近公共祖先为 $1$ 的橙色结点，答案均为 $11$。\n\n#### 数据范围\n\n**本题采取捆绑测试。**\n\n| 子任务编号 | 分值 | $n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $10$ | $\\times$ |\n| $2$ | $12$ | $10^6$ | $v=u+1$ |\n| $3$ | $6$ | $10^6$ | $u=1$ |\n| $4$ | $18$ | $=2^k(k\\in\\mathbf{Z})$ | $u=\\left\\lfloor\\dfrac{v}{2}\\right\\rfloor$ |\n| $5$ | $27$ | $10^3$ | 树的形态随机 |\n| $6$ | $27$ | $10^6$ | $\\times$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq10^6$，结点编号介于 $1\\sim n$ 之间。\n\n**本题可能略微卡常。**\n\n时限缩短为 1s，原因如下：\n\n- 讨论区认为本题撞原，为防止所谓「加强版」的 $O(n\\log n)$ 做法直接冲过本题，时限缩短。\n\n- 最优解能跑进 200ms 以内。\n\n- 由于出题人懒惰，懒得 $n\\le10^6\\rightarrow n\\le10^7$ 只能通过缩短时限来卡掉所谓原题做法（实际上是错解）。", "locale": "zh-CN"}}}
{"pid": "P7239", "type": "P", "difficulty": 6, "samples": [["3 3\n2 2 2\n2 2 2\n0 1 0\n1 1 1\n0 1 0", "0 2 0 \n2 2 2 \n0 2 0 "]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["Special Judge", "O2优化"], "title": "3D Cube", "background": "**此题数据纯手造，并有手玩验证。**\n\nidea & data：[zrmpaul](/user/226760)  \ntester：[Hilarious_Reality](/user/80049)\n\n--------\n\n小 Z 喜欢三维模型，并从不同角度进行细致的观察。", "description": "小 Z 拿到了一个二维矩阵。底面可以看作一个 $n \\times m$ 的方格纸。\n\n在每一个格子上，可以放任意个方块。由于有地心引力，方块不会悬空，且不会用胶水粘住。\n\n他给出了这个三维矩阵的三视图，请你构造一个方块组，满足以下条件：\n\n对于每一行、每一列，最多只有一个“**峰**”出现。特别地，底层矩阵的周围的高度被视为 $0$。如 `12321` 是一个“峰”，而 `13231` 有两个“峰”。\n\n再举一些例子：\n\n|方块排列|“峰”的数量|\n|:----:|:----:|\n|$\\texttt{123}$|$1$|\n|$\\texttt{212}$|$2$|\n|$\\texttt{122221}$|$1$|\n|$\\texttt{00011000}$|$1$|\n|$\\texttt{10010101}$|$4$|\n\n求出需要**最少**方块的矩阵。如果无解，请输出 `-1`。", "inputFormat": "第一行两个整数：$n,m$。\n\n第二行 $n$ 个整数：左视图，第 $i$ 个整数表示左视图中第 $i$ 列的方块个数。\n\n第三行 $m$ 个整数：主视图，第 $j$ 个整数表示主视图中第 $j$ 列的方块个数。\n\n接下来 $n$ 行，每行 $m$ 个整数：俯视图，其中 `0` 表示没有方块，`1` 表示有方块。", "outputFormat": "如果无解，则输出 `-1`。\n\n否则输出共 $n$ 行，每行 $m$ 个非负整数，为构造的三维矩阵的俯视图，其中第 $i$ 行第 $j$ 个整数表示该位置上的方块个数。\n\n**请确保按照输出格式输出，否则可能导致 SPJ 返回 UKE 等结果。**", "hint": "### 数据范围\n\n**本题各部分测试点采用捆绑测试。**\n\n对于 $20\\%$ 的数据：给出输入文件，程序打表输出答案，见附件 `easy.zip`。\n\n对于 $100\\%$ 的数据：$n\\times m\\leq25$。在俯视图中每个格子上最多有 $7\\times10^8$ 个方块，且在俯视图中 `1` 的个数 $\\leq20$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "3D Cube", "background": "**此题数据纯手造，并有手玩验证。**\n\nidea & data：[zrmpaul](/user/226760)  \ntester：[Hilarious_Reality](/user/80049)\n\n--------\n\n小 Z 喜欢三维模型，并从不同角度进行细致的观察。", "description": "小 Z 拿到了一个二维矩阵。底面可以看作一个 $n \\times m$ 的方格纸。\n\n在每一个格子上，可以放任意个方块。由于有地心引力，方块不会悬空，且不会用胶水粘住。\n\n他给出了这个三维矩阵的三视图，请你构造一个方块组，满足以下条件：\n\n对于每一行、每一列，最多只有一个“**峰**”出现。特别地，底层矩阵的周围的高度被视为 $0$。如 `12321` 是一个“峰”，而 `13231` 有两个“峰”。\n\n再举一些例子：\n\n|方块排列|“峰”的数量|\n|:----:|:----:|\n|$\\texttt{123}$|$1$|\n|$\\texttt{212}$|$2$|\n|$\\texttt{122221}$|$1$|\n|$\\texttt{00011000}$|$1$|\n|$\\texttt{10010101}$|$4$|\n\n求出需要**最少**方块的矩阵。如果无解，请输出 `-1`。", "inputFormat": "第一行两个整数：$n,m$。\n\n第二行 $n$ 个整数：左视图，第 $i$ 个整数表示左视图中第 $i$ 列的方块个数。\n\n第三行 $m$ 个整数：主视图，第 $j$ 个整数表示主视图中第 $j$ 列的方块个数。\n\n接下来 $n$ 行，每行 $m$ 个整数：俯视图，其中 `0` 表示没有方块，`1` 表示有方块。", "outputFormat": "如果无解，则输出 `-1`。\n\n否则输出共 $n$ 行，每行 $m$ 个非负整数，为构造的三维矩阵的俯视图，其中第 $i$ 行第 $j$ 个整数表示该位置上的方块个数。\n\n**请确保按照输出格式输出，否则可能导致 SPJ 返回 UKE 等结果。**", "hint": "### 数据范围\n\n**本题各部分测试点采用捆绑测试。**\n\n对于 $20\\%$ 的数据：给出输入文件，程序打表输出答案，见附件 `easy.zip`。\n\n对于 $100\\%$ 的数据：$n\\times m\\leq25$。在俯视图中每个格子上最多有 $7\\times10^8$ 个方块，且在俯视图中 `1` 的个数 $\\leq20$。", "locale": "zh-CN"}}}
{"pid": "P7240", "type": "P", "difficulty": 0, "samples": [["5 2\n6 1 5 3 4", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2014", "各省省选", "江苏"], "title": "[JSOI2014] 打兔子", "background": "", "description": "勤劳的 JYY 在花园里面种了好多胡萝卜！可是，今天早上 JYY 发现一大群从 JSOI 王国里面跑来的兔子把他的花园全部占满了！兔子们把胡萝卜吃光了，JYY 靠什么过冬呢！忍无可忍的 JYY 决定取出他的强力猎枪来消灭这些兔子。\n\nJYY 的花园是一个由 $n$ 块小菜地顺次连接所形成的圆环，编号为 $1$ 到 $n$。第 $i$ 号菜地和第 $i+1$ 号菜地是相邻的。由于花园是环形的，所以 $1$ 号菜地和 $n$ 号菜地也是相邻的。\n\n现在，第 $i$ 号菜地上有 $r_i$ 只兔子。JYY 的猎枪有 $k$ 发子弹，每次 JYY 可以选择一块菜地打一枪，然后这块菜地上的兔子就全部都被消灭了。但是由于 JYY 的猎枪威力太大，会吓到相邻菜地上的兔子，所以，如果 JYY 朝 $i$ 号菜地打了一枪，那么 $i+1$ 号菜地上的兔子就会跑到 $i+2$ 号菜地上去，同样的，$i-1$ 号菜地上的兔子也会跑到 $i-2$ 号菜地上去。JYY 想知道，如何用这 $k$ 发子弹，消灭尽量多的兔子呢？", "inputFormat": "第一行两个整数 $n$ 和 $k$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $r_i$。", "outputFormat": "一行一个整数，表示 JYY 最多可以消灭的兔子个数。", "hint": "### 样例解释\n\n先朝 $1$ 号菜地打一枪，变成 $0\\ 0\\ 6\\ 7\\ 0$，再朝 $4$ 号菜地打一枪。可以证明没有比 $13$ 大的答案。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$3\\leq n\\leq 4000,0\\leq k\\leq 4000,r_i\\leq 10^5$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2014] 打兔子", "background": "", "description": "勤劳的 JYY 在花园里面种了好多胡萝卜！可是，今天早上 JYY 发现一大群从 JSOI 王国里面跑来的兔子把他的花园全部占满了！兔子们把胡萝卜吃光了，JYY 靠什么过冬呢！忍无可忍的 JYY 决定取出他的强力猎枪来消灭这些兔子。\n\nJYY 的花园是一个由 $n$ 块小菜地顺次连接所形成的圆环，编号为 $1$ 到 $n$。第 $i$ 号菜地和第 $i+1$ 号菜地是相邻的。由于花园是环形的，所以 $1$ 号菜地和 $n$ 号菜地也是相邻的。\n\n现在，第 $i$ 号菜地上有 $r_i$ 只兔子。JYY 的猎枪有 $k$ 发子弹，每次 JYY 可以选择一块菜地打一枪，然后这块菜地上的兔子就全部都被消灭了。但是由于 JYY 的猎枪威力太大，会吓到相邻菜地上的兔子，所以，如果 JYY 朝 $i$ 号菜地打了一枪，那么 $i+1$ 号菜地上的兔子就会跑到 $i+2$ 号菜地上去，同样的，$i-1$ 号菜地上的兔子也会跑到 $i-2$ 号菜地上去。JYY 想知道，如何用这 $k$ 发子弹，消灭尽量多的兔子呢？", "inputFormat": "第一行两个整数 $n$ 和 $k$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $r_i$。", "outputFormat": "一行一个整数，表示 JYY 最多可以消灭的兔子个数。", "hint": "### 样例解释\n\n先朝 $1$ 号菜地打一枪，变成 $0\\ 0\\ 6\\ 7\\ 0$，再朝 $4$ 号菜地打一枪。可以证明没有比 $13$ 大的答案。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$3\\leq n\\leq 4000,0\\leq k\\leq 4000,r_i\\leq 10^5$", "locale": "zh-CN"}}}
{"pid": "P7241", "type": "P", "difficulty": 5, "samples": [["3 2 2 1\n1 2 3", "1"], ["5 2 3 3\n21 54 12 2 0", "12"], ["6 4 6 100\n1 2 3 4 5 6", "6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2019", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #4] Holding", "background": "Ivica 有一个由 $N$ 家克罗地亚公司组成的集团，但他的集团正面临着困难。他的企业承受着巨额的负债，所以政$ $府派遣律师没收了他的一切财产。\n\n但我们发现，尽管他有巨额债务在身，他依然与政$ $府达成协议，留住了部分企业。他留住的是哪些？我们也知道了。", "description": "律师们把 Ivica 的公司的 $N$ 份债务文件摆在桌上。第一家公司的债务为 $A_1$ ，第二家公司的债务为 $A_2$ ，依次类推。\n\nIvica 与政$ $府达成协议，使它留下桌上 $[L,R]$ 区间的所有文件所对应的公司，但他需要承担 $A_L,A_{L+1}\\ldots A_R$ 的所有债务，其中 $L$ 和 $R$ 代表桌子上一系列文件中的位置。\n\n幸运的是，律师们也是腐败。他们可以让他以 $|i-j|$ 的价格交换当前放在位置 $i$ 和位置 $j$ 的文件。\n\nIvica 有点绝望。他口袋里只有 $K$ 元钱，他现在想把这些钱花在这里，使得他的需要承担的债务尽可能少。\n\n请帮他达成目标。 ", "inputFormat": "第一行四个整数 $N,L,R,K$。\n\n第二行 $N$ 个整数，第 $i$ 个表示 $A_i$。", "outputFormat": "一行一个整数，表示花不超过 $K$ 元后负债的最小值。", "hint": "【数据规模与约定】\n\n| 子任务编号 | 特殊限制         | 分值 |\n| ---------- | ---------------- | ---- |\n| $1$        | $N\\le 13$，$R=N$ | $20$ |\n| $2$        | $N\\le 50$，$R=N$ | $30$ |\n| $3$        | $N\\le 50$        | $30$ |\n| $4$        | 无特殊限制       | $20$ |\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 100$，$1\\le L\\le R\\le N$，$1\\le K\\le 10^4$，$1\\le A_i\\le 10^6$。\n\n【提示与帮助】\n\n**题目译自 [COCI 2019/2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #4](https://hsin.hr/coci/archive/2019_2020/contest4_tasks.pdf) T3 Holding**\n\n在 COCI 中，本题分值为 $110$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #4] Holding", "background": "Ivica 有一个由 $N$ 家克罗地亚公司组成的集团，但他的集团正面临着困难。他的企业承受着巨额的负债，所以政$ $府派遣律师没收了他的一切财产。\n\n但我们发现，尽管他有巨额债务在身，他依然与政$ $府达成协议，留住了部分企业。他留住的是哪些？我们也知道了。", "description": "律师们把 Ivica 的公司的 $N$ 份债务文件摆在桌上。第一家公司的债务为 $A_1$ ，第二家公司的债务为 $A_2$ ，依次类推。\n\nIvica 与政$ $府达成协议，使它留下桌上 $[L,R]$ 区间的所有文件所对应的公司，但他需要承担 $A_L,A_{L+1}\\ldots A_R$ 的所有债务，其中 $L$ 和 $R$ 代表桌子上一系列文件中的位置。\n\n幸运的是，律师们也是腐败。他们可以让他以 $|i-j|$ 的价格交换当前放在位置 $i$ 和位置 $j$ 的文件。\n\nIvica 有点绝望。他口袋里只有 $K$ 元钱，他现在想把这些钱花在这里，使得他的需要承担的债务尽可能少。\n\n请帮他达成目标。 ", "inputFormat": "第一行四个整数 $N,L,R,K$。\n\n第二行 $N$ 个整数，第 $i$ 个表示 $A_i$。", "outputFormat": "一行一个整数，表示花不超过 $K$ 元后负债的最小值。", "hint": "【数据规模与约定】\n\n| 子任务编号 | 特殊限制         | 分值 |\n| ---------- | ---------------- | ---- |\n| $1$        | $N\\le 13$，$R=N$ | $20$ |\n| $2$        | $N\\le 50$，$R=N$ | $30$ |\n| $3$        | $N\\le 50$        | $30$ |\n| $4$        | 无特殊限制       | $20$ |\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 100$，$1\\le L\\le R\\le N$，$1\\le K\\le 10^4$，$1\\le A_i\\le 10^6$。\n\n【提示与帮助】\n\n**题目译自 [COCI 2019/2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #4](https://hsin.hr/coci/archive/2019_2020/contest4_tasks.pdf) T3 Holding**\n\n在 COCI 中，本题分值为 $110$ 分。", "locale": "zh-CN"}}}
{"pid": "P7242", "type": "P", "difficulty": 6, "samples": [["4\nAdd 1 5\nQuery 1 1\nAdd 1 7\nQuery 1 1", "5\n7"], ["6\nAdd 1 5\nAdd 2 7\nAdd 1 4\nAdd 4 3\nQuery 1 1\nQuery 2 4", "7\n2"], ["10\nAdd 1 4\nAdd 1 9\nAdd 1 10\nAdd 2 2\nAdd 3 3\nAdd 4 4\nQuery 4 2\nQuery 1 3\nAdd 6 7\nQuery 1 3", "14\n10\n13"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #4] Klasika", "background": "", "description": "开始时，你有一个编号为 $1$ 的节点，它代表着一棵树的根。你的任务是对树进行 $Q$ 次操作。\n\n操作分为两类：\n\n- $\\texttt{Add x y}$，给树上编号为 $x$ 的节点加入一个儿子，该儿子的编号为加入该节点后树的大小，它与 $x$ 的边的边权为 $y$。\n- $\\texttt{Query a b}$，查找从 $a$ 出发，到 $b$ 节点子树内某个节点（包括 $B$ ）的路径中边权异或和最大的一条，并输出其异或和。", "inputFormat": "第一行一个整数 $Q$。\n\n加下来 $Q$ 行，每行一个字符串和两个数字，描述一次操作。", "outputFormat": "对于每个 $\\texttt{Query}$ 操作，一行一个整数表示答案。", "hint": "【数据规模与约定】\n\n| 子任务编号 | 特殊限制                                   | 分值 |\n| ---------- | ------------------------------------------ | ---- |\n| $1$        | $Q\\le 200$                                 | $10$ |\n| $2$        | $Q\\le 2\\times 10^3$                        | $20$ |\n| $3$        | 对于所有 $\\texttt{Query}$ 操作，保证 $b=1$ | $30$ |\n| $4$        | 无特殊限制                                 | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le Q\\le 2\\times 10^5$，$0\\le y\\le 2^{30}$，保证 $x,a,b$ 小于等于当前树的大小。\n\n【提示与帮助】\n\n**题目译自 [COCI 2019/2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #4](https://hsin.hr/coci/archive/2019_2020/contest4_tasks.pdf) T4 Klasika**\n\n在 COCI 中，本题分值为 $110$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #4] Klasika", "background": "", "description": "开始时，你有一个编号为 $1$ 的节点，它代表着一棵树的根。你的任务是对树进行 $Q$ 次操作。\n\n操作分为两类：\n\n- $\\texttt{Add x y}$，给树上编号为 $x$ 的节点加入一个儿子，该儿子的编号为加入该节点后树的大小，它与 $x$ 的边的边权为 $y$。\n- $\\texttt{Query a b}$，查找从 $a$ 出发，到 $b$ 节点子树内某个节点（包括 $B$ ）的路径中边权异或和最大的一条，并输出其异或和。", "inputFormat": "第一行一个整数 $Q$。\n\n加下来 $Q$ 行，每行一个字符串和两个数字，描述一次操作。", "outputFormat": "对于每个 $\\texttt{Query}$ 操作，一行一个整数表示答案。", "hint": "【数据规模与约定】\n\n| 子任务编号 | 特殊限制                                   | 分值 |\n| ---------- | ------------------------------------------ | ---- |\n| $1$        | $Q\\le 200$                                 | $10$ |\n| $2$        | $Q\\le 2\\times 10^3$                        | $20$ |\n| $3$        | 对于所有 $\\texttt{Query}$ 操作，保证 $b=1$ | $30$ |\n| $4$        | 无特殊限制                                 | $40$ |\n\n对于 $100\\%$ 的数据，$1\\le Q\\le 2\\times 10^5$，$0\\le y\\le 2^{30}$，保证 $x,a,b$ 小于等于当前树的大小。\n\n【提示与帮助】\n\n**题目译自 [COCI 2019/2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #4](https://hsin.hr/coci/archive/2019_2020/contest4_tasks.pdf) T4 Klasika**\n\n在 COCI 中，本题分值为 $110$ 分。", "locale": "zh-CN"}}}
{"pid": "P7243", "type": "P", "difficulty": 3, "samples": [["2 2\n2 2\n1 2\n2 1", "0"], ["2 2\n2 2 \n2 2\n1 1", "-1"], ["3 3\n3 2 3\n2 3 2\n3 2 3\n2 2", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["搜索", "数学", "O2优化", "广度优先搜索 BFS"], "title": "最大公约数", "background": "&emsp;&emsp;“寻求最大公约数是人民民主的真谛。……”\n\n&emsp;&emsp;初秋，从枝丫滴下的阳光，柔和，在教室的窗棱溅起，润湿晨读的少女的脸颊。\n\n&emsp;&emsp;“阿绫，阿绫”，天依低俯身子，八字辫耷拉在竖起的课本沿，“我们的最大公约数是多少呢？”\n\n&emsp;&emsp;“一定不小吧”，左手悄悄捏捏天依的小臂，“比如呀，有一个公因子，叫做‘你喜欢我，我也喜欢你’。”", "description": "相反，人际圈形形色色，公约数小得可怜，似乎很难保持自己的个性因而变成无趣的人呢。\n\n现在把人际抽象成一个 $n \\times m$ 的矩形，每个人初始的个性为 $a_{i,j}$。从第二天开始，每个人会与上下左右四个人（如果存在）建立人际关系，其个性变为昨天自己和四周人个性的最大公约数。那么对于第 $x$ 行第 $y$ 列的人，在多少天后他的个性会变为 $1$ 呢？\n\n----\n\n#### 简化题意\n\n有一个 $n \\times m$ 的矩阵 $a$。对一个矩阵进行变换，定义为将这个矩阵内的所有元素变为其上下左右四个元素（不存在则忽略）及自身的最大公约数。询问 $a_{x,y}$ 在进行最少多少次变换之后会变成 $1$。如果可以使 $a_{x,y}$ 经过若干次变换变成 $1$，输出其中最小的次数；否则输出 $-1$。", "inputFormat": "第一行两个整数 $n,m$，表示矩阵的行数和列数。\n\n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 列的整数 $a_{i,j}$ 描述了该位置的人的初始个性。\n\n接下来一行两个整数 $x,y$，表示某个指定的人的位置。", "outputFormat": "一行一个整数 $d$，表示第 $x$ 行第 $y$ 列的人的个性会在 $d$ 天后变为 $1$；**特别地**，若永远不会变为 $1$，应输出 $-1$。", "hint": "#### 样例解释 3\n第一天的个性矩阵（也就是最开始的矩阵）为\n$$\n\\begin{pmatrix}\n3&2&3\\\\\n2&3&2\\\\\n3&2&3\n\\end{pmatrix}\n$$\n第二天的个性矩阵为\n$$\n\\begin{pmatrix}\n1&1&1\\\\\n1&1&1\\\\\n1&1&1\n\\end{pmatrix}\n$$\n可见只需要经过一天，$a_{2,2}$ 就会变为 $1$，所以答案为 $1$。\n\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times 10^3$，$1\\le a_{i,j}\\le 10^{18}$，$1\\le x\\le n$，$1\\le y\\le m$。\n\n| 子任务 | 分值 |        $n,m$        |              特殊限制              |\n| :----: | :--: | :-----------------: | :--------------------------------: |\n|   1    |  1   |          /          | 保证给出的位置个性永远不会变为 $1$ |\n|   2    |  1   |          /          |          保证 $a_{x,y}=1$          |\n|   3    |  3   |      $ \\le 2$       |                 /                  |\n|   4    |  10  |     $ \\le 10^2$     |                 /                  |\n|   5    |  30  | $ \\le 5\\times 10^2$ |           /            |\n|   6    |  10  |          /          |   保证对于所有的 $a_{i,j} \\le 2$   |\n|   7    |  10  |          /          |     保证 $x$ 与 $y$ 都等于 $1$     |\n|   8    |  35  |          /          |                 /                  |\n\n\n\n\n\n------------\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "最大公约数", "background": "&emsp;&emsp;“寻求最大公约数是人民民主的真谛。……”\n\n&emsp;&emsp;初秋，从枝丫滴下的阳光，柔和，在教室的窗棱溅起，润湿晨读的少女的脸颊。\n\n&emsp;&emsp;“阿绫，阿绫”，天依低俯身子，八字辫耷拉在竖起的课本沿，“我们的最大公约数是多少呢？”\n\n&emsp;&emsp;“一定不小吧”，左手悄悄捏捏天依的小臂，“比如呀，有一个公因子，叫做‘你喜欢我，我也喜欢你’。”", "description": "相反，人际圈形形色色，公约数小得可怜，似乎很难保持自己的个性因而变成无趣的人呢。\n\n现在把人际抽象成一个 $n \\times m$ 的矩形，每个人初始的个性为 $a_{i,j}$。从第二天开始，每个人会与上下左右四个人（如果存在）建立人际关系，其个性变为昨天自己和四周人个性的最大公约数。那么对于第 $x$ 行第 $y$ 列的人，在多少天后他的个性会变为 $1$ 呢？\n\n----\n\n#### 简化题意\n\n有一个 $n \\times m$ 的矩阵 $a$。对一个矩阵进行变换，定义为将这个矩阵内的所有元素变为其上下左右四个元素（不存在则忽略）及自身的最大公约数。询问 $a_{x,y}$ 在进行最少多少次变换之后会变成 $1$。如果可以使 $a_{x,y}$ 经过若干次变换变成 $1$，输出其中最小的次数；否则输出 $-1$。", "inputFormat": "第一行两个整数 $n,m$，表示矩阵的行数和列数。\n\n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 列的整数 $a_{i,j}$ 描述了该位置的人的初始个性。\n\n接下来一行两个整数 $x,y$，表示某个指定的人的位置。", "outputFormat": "一行一个整数 $d$，表示第 $x$ 行第 $y$ 列的人的个性会在 $d$ 天后变为 $1$；**特别地**，若永远不会变为 $1$，应输出 $-1$。", "hint": "#### 样例解释 3\n第一天的个性矩阵（也就是最开始的矩阵）为\n$$\n\\begin{pmatrix}\n3&2&3\\\\\n2&3&2\\\\\n3&2&3\n\\end{pmatrix}\n$$\n第二天的个性矩阵为\n$$\n\\begin{pmatrix}\n1&1&1\\\\\n1&1&1\\\\\n1&1&1\n\\end{pmatrix}\n$$\n可见只需要经过一天，$a_{2,2}$ 就会变为 $1$，所以答案为 $1$。\n\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\times 10^3$，$1\\le a_{i,j}\\le 10^{18}$，$1\\le x\\le n$，$1\\le y\\le m$。\n\n| 子任务 | 分值 |        $n,m$        |              特殊限制              |\n| :----: | :--: | :-----------------: | :--------------------------------: |\n|   1    |  1   |          /          | 保证给出的位置个性永远不会变为 $1$ |\n|   2    |  1   |          /          |          保证 $a_{x,y}=1$          |\n|   3    |  3   |      $ \\le 2$       |                 /                  |\n|   4    |  10  |     $ \\le 10^2$     |                 /                  |\n|   5    |  30  | $ \\le 5\\times 10^2$ |           /            |\n|   6    |  10  |          /          |   保证对于所有的 $a_{i,j} \\le 2$   |\n|   7    |  10  |          /          |     保证 $x$ 与 $y$ 都等于 $1$     |\n|   8    |  35  |          /          |                 /                  |\n\n\n\n\n\n------------\n\n\n", "locale": "zh-CN"}}}
{"pid": "P7244", "type": "P", "difficulty": 5, "samples": [["5 3\n1 3 2 9 6", "3"], ["5 2\n10 2 5 5 5", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "数学", "线段树", "树状数组", "O2优化", "ST 表"], "title": "章节划分", "background": "&emsp;&emsp;作文周，顾名思义，一天写一篇，高产似那啥。\n\n&emsp;&emsp;小灰毛的作文被老师无数次公开处刑，昨天自己的奶奶变成了别人作文里的外婆，今天憋出来的小面变成了明天别人的酸辣粉。素材一用，就报废了啊 qwq。\n\n&emsp;&emsp;于是，不甘心的小灰毛决定加倍高产。", "description": "天依决定了 $n$ 个素材，它们将**依次**在作文中被叙写。其中，第 $i$ 个素材的立意特征值是 $a_i$。\n\n但天依发现她构思的大作实在是太长啦，所以她想把它们划分为**恰好 $k$ 个**章节，每个章节包含一段**连续且非空的**素材。假设第 $i$ 个章节包含素材 $[l_i,r_i]$，天依将选取立意特征值最大的素材来升华，得到该章节的立意值 $b_i$，满足 $b_i=\\max\\limits_{i\\in[l_i,r_i]}\\{a_i\\}$。  \n\n最后，整篇作文的凝练度为每个章节立意值的**最大公约数**，即 $\\gcd\\limits_{i\\in[1,k]}\\{b_i\\}$。\n\n天依当然希望**最大化**作文的凝练度，那么凝练度的最大值是多少呢？\n\n---\n\n#### 简化题意\n\n有一个长度为 $n$ 的序列 $a$。要求将这个序列**恰好**分成**连续且非空**的 $k$ 段，并定义第 $i$ 段的立意值为该段的所有元素的最大值，记为 $b_i$。要求最大化 $\\gcd\\limits_{i\\in[1,k]}\\{b_i\\}$ 并输出这个最大值。", "inputFormat": "第一行包含两个整数 $n,k$，表示素材的长度和需要划分的章节数。\n\n接下来第二行包含 $n$ 个整数，表示每个素材的立意特征值。", "outputFormat": "一行一个整数，表示你的答案。", "hint": "#### 样例解释 1\n最优的素材划分可能有多种，这里给出一种最优的素材划分，将这 $5$ 个素材分成 $3$ 个章节：$[1,3],[2,9],[6]$，可以得出 $b_1=3,b_2=9,b_3=6$，凝练度的最大值为 $\\gcd(3,9,6)=3$。\n\n------------\n\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le 10^5$，$1\\le a_i\\le 10^{6}$。\n\n| 子任务 | 分值 |        $n$         | $k$  |       $a_i$        |\n| :----: | :--: | :----------------: | :--: | :----------------: |\n|   1    |  5   |      $\\le 5$      |  /   |         /          |\n|   2    |  10  |     $\\le 10^2$     |  /   |         /          |\n|   3    |  10  |         /          | $2$  |         /          |\n|   4    |  15  |         /          | $3$  |         /          |\n|   5    |  20  | $\\le 3\\times 10^3$ |  /   |         /          |\n|   6    |  10  |         /          |  /   | $\\le 2\\times 10^2$ |\n|   7    |  30  |         /          |  /   |         /          |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "章节划分", "background": "&emsp;&emsp;作文周，顾名思义，一天写一篇，高产似那啥。\n\n&emsp;&emsp;小灰毛的作文被老师无数次公开处刑，昨天自己的奶奶变成了别人作文里的外婆，今天憋出来的小面变成了明天别人的酸辣粉。素材一用，就报废了啊 qwq。\n\n&emsp;&emsp;于是，不甘心的小灰毛决定加倍高产。", "description": "天依决定了 $n$ 个素材，它们将**依次**在作文中被叙写。其中，第 $i$ 个素材的立意特征值是 $a_i$。\n\n但天依发现她构思的大作实在是太长啦，所以她想把它们划分为**恰好 $k$ 个**章节，每个章节包含一段**连续且非空的**素材。假设第 $i$ 个章节包含素材 $[l_i,r_i]$，天依将选取立意特征值最大的素材来升华，得到该章节的立意值 $b_i$，满足 $b_i=\\max\\limits_{i\\in[l_i,r_i]}\\{a_i\\}$。  \n\n最后，整篇作文的凝练度为每个章节立意值的**最大公约数**，即 $\\gcd\\limits_{i\\in[1,k]}\\{b_i\\}$。\n\n天依当然希望**最大化**作文的凝练度，那么凝练度的最大值是多少呢？\n\n---\n\n#### 简化题意\n\n有一个长度为 $n$ 的序列 $a$。要求将这个序列**恰好**分成**连续且非空**的 $k$ 段，并定义第 $i$ 段的立意值为该段的所有元素的最大值，记为 $b_i$。要求最大化 $\\gcd\\limits_{i\\in[1,k]}\\{b_i\\}$ 并输出这个最大值。", "inputFormat": "第一行包含两个整数 $n,k$，表示素材的长度和需要划分的章节数。\n\n接下来第二行包含 $n$ 个整数，表示每个素材的立意特征值。", "outputFormat": "一行一个整数，表示你的答案。", "hint": "#### 样例解释 1\n最优的素材划分可能有多种，这里给出一种最优的素材划分，将这 $5$ 个素材分成 $3$ 个章节：$[1,3],[2,9],[6]$，可以得出 $b_1=3,b_2=9,b_3=6$，凝练度的最大值为 $\\gcd(3,9,6)=3$。\n\n------------\n\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le k\\le n\\le 10^5$，$1\\le a_i\\le 10^{6}$。\n\n| 子任务 | 分值 |        $n$         | $k$  |       $a_i$        |\n| :----: | :--: | :----------------: | :--: | :----------------: |\n|   1    |  5   |      $\\le 5$      |  /   |         /          |\n|   2    |  10  |     $\\le 10^2$     |  /   |         /          |\n|   3    |  10  |         /          | $2$  |         /          |\n|   4    |  15  |         /          | $3$  |         /          |\n|   5    |  20  | $\\le 3\\times 10^3$ |  /   |         /          |\n|   6    |  10  |         /          |  /   | $\\le 2\\times 10^2$ |\n|   7    |  30  |         /          |  /   |         /          |", "locale": "zh-CN"}}}
{"pid": "P7245", "type": "P", "difficulty": 5, "samples": [["2 3 1\n0 1 2\n0 1 2\n", "110916041"], ["3 3 3\n0 1 2\n0 1 2", "592921545"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "灯光效果", "background": "&emsp;&emsp;「为了你唱下去——直到荒芜」\n\n&emsp;&emsp;「为了你唱下去——直到……」\n\n&emsp;&emsp;舞台上，享受地阖上眼眸，双手交叠扣在话筒，后脚踮起，在随着节奏闪烁变换的灯光下轻摇……\n\n&emsp;&emsp;嘴角轻扬，绫珍惜着步入瞳孔的每一粒光，那些从天依的发丝、脸颊划过的，带着属于她的旖旎，轰击着明明做好防备的绫的心尖。\n\n&emsp;&emsp;收尾的音调扬起，灯光，也是那样应景呢。", "description": "对于舞台效果，灯光是重要的角色。背景屏幕是一个 $n \\times n$ 的矩形，行从左到右，列从上到下编号为 $1\\sim n$，并用 $(x,y)$ 表示第 $x$ 行第 $y$ 列的灯光单元。\n\n作为御用灯光师的阿绫设计了一个控制背景灯光效果的程序。她设定了两个长度为 $m$ 的**递增**整数序列 $\\{x_m\\}$ 和 $\\{y_m\\}$，且满足 $0\\le x_1,y_1$，$x_m,y_m\\le n$。每次灯光变换，程序会均匀地随机生成两对整数 $(i_1,i_2),(j_1,j_2)$，满足 $1\\le i_1<i_2\\le m$，$1\\le j_1<j_2\\le m$，转换满足 $x_{i_1}<r\\le x_{i_2}$，$y_{j_1}<c\\le y_{j_2}$ 的所有灯光单元 $(r,c)$ 的状态（亮变为熄，熄变为亮）。\n\n表演开始时，所有灯光单元处于熄灭状态；经计算，到表演结束时，一共会发生 $k$ 次灯光变换。而表演落幕时的灯光效果极为关键，所以阿绫想知道，表演落幕时，期望有多少个灯光单元是亮着的？\n\n**由于答案可能是一个小数，为了避免损失精度，请输出答案在 $998244353$ 模意义下的值。**\n\n------------\n\n#### 简化题意\n\n有一个 $n\\times n$ 的矩阵，初始所有元素的值为 $0$。给出递增序列 $\\{x_m\\}$ 和 $\\{y_m\\}$，其中 $0\\le x_1,y_1$，$x_m,y_m\\le n$，一次操作定义为：\n\n- 随机选出四个整数 $i_1,i_2,j_1,j_2$，满足 $1\\le i_1<i_2\\le m$，$1\\le j_1<j_2\\le m$。\n- 把以 $(x_{i_1}+1,y_{j_1}+1)$ 为左上角，$(x_{i_2},y_{j_2})$ 为右下角的子矩阵的每个元素异或 $1$。\n\n求 $k$ 次操作后矩阵内元素之和的期望值。答案对 $998244353$ 取模。", "inputFormat": "第一行三个整数，分别为 $n,m,k$ 。\n\n第二行 $m$ 个整数，其中第 $i$ 个数表示 $x_i$ 。\n\n第三行 $m$ 个整数，其中第 $i$ 个数表示 $y_i$ 。\n\n", "outputFormat": "一行一个整数，表示答案在 $998244353$ 模意义下的值。", "hint": "#### 样例解释 1\n\n样例中，$\\{x_m\\}=\\{y_m\\}=\\{0,1,2\\}$。可以发现，此 $2\\times 2$ 矩阵的任意一个子矩阵都可以被变换。当子矩阵大小分别为 $1,2,4$ 时，对应方案数分别为 $4,4,1$，由于只操作一次，所以对应的最终矩阵元素之和分别为 $4\\times1,4\\times2,1\\times 4$。于是，答案为 $\\frac{4+8+4}{4+4+1}=\\frac{16}9$。\n\n#### 数据规模与约定  \n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$2\\le m\\le \\min(n+1,10^3)$，$1\\le n\\le10^9$，$1\\le k\\le 10^6$，保证 $x_i$ 互不相等且递增，$y_i$ 互不相等且递增。\n\n| 子任务 | 分值 |     $n$      |   $m$    |     $k$      |\n| :----: | :--: | :----------: | :------: | :----------: |\n|   1    |  10  |   $ \\le 4$   | $ \\le 3$ |   $ \\le 2$   |\n|   2    |  5   |      /       |   $2$    |      /       |\n|   3    |  25  | $ \\le 10^2 $ |    /     | $ \\le 10^2 $ |\n|   4    |  20  | $ \\le 10^9 $ |    /     | $ \\le 10^2 $ |\n|   5    |  20  | $ \\le 10^2 $ |    /     | $ \\le 10^6 $ |\n|   6    |  20  |      /       |    /     |      /       |\n\n\n\n\n\n------------\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "灯光效果", "background": "&emsp;&emsp;「为了你唱下去——直到荒芜」\n\n&emsp;&emsp;「为了你唱下去——直到……」\n\n&emsp;&emsp;舞台上，享受地阖上眼眸，双手交叠扣在话筒，后脚踮起，在随着节奏闪烁变换的灯光下轻摇……\n\n&emsp;&emsp;嘴角轻扬，绫珍惜着步入瞳孔的每一粒光，那些从天依的发丝、脸颊划过的，带着属于她的旖旎，轰击着明明做好防备的绫的心尖。\n\n&emsp;&emsp;收尾的音调扬起，灯光，也是那样应景呢。", "description": "对于舞台效果，灯光是重要的角色。背景屏幕是一个 $n \\times n$ 的矩形，行从左到右，列从上到下编号为 $1\\sim n$，并用 $(x,y)$ 表示第 $x$ 行第 $y$ 列的灯光单元。\n\n作为御用灯光师的阿绫设计了一个控制背景灯光效果的程序。她设定了两个长度为 $m$ 的**递增**整数序列 $\\{x_m\\}$ 和 $\\{y_m\\}$，且满足 $0\\le x_1,y_1$，$x_m,y_m\\le n$。每次灯光变换，程序会均匀地随机生成两对整数 $(i_1,i_2),(j_1,j_2)$，满足 $1\\le i_1<i_2\\le m$，$1\\le j_1<j_2\\le m$，转换满足 $x_{i_1}<r\\le x_{i_2}$，$y_{j_1}<c\\le y_{j_2}$ 的所有灯光单元 $(r,c)$ 的状态（亮变为熄，熄变为亮）。\n\n表演开始时，所有灯光单元处于熄灭状态；经计算，到表演结束时，一共会发生 $k$ 次灯光变换。而表演落幕时的灯光效果极为关键，所以阿绫想知道，表演落幕时，期望有多少个灯光单元是亮着的？\n\n**由于答案可能是一个小数，为了避免损失精度，请输出答案在 $998244353$ 模意义下的值。**\n\n------------\n\n#### 简化题意\n\n有一个 $n\\times n$ 的矩阵，初始所有元素的值为 $0$。给出递增序列 $\\{x_m\\}$ 和 $\\{y_m\\}$，其中 $0\\le x_1,y_1$，$x_m,y_m\\le n$，一次操作定义为：\n\n- 随机选出四个整数 $i_1,i_2,j_1,j_2$，满足 $1\\le i_1<i_2\\le m$，$1\\le j_1<j_2\\le m$。\n- 把以 $(x_{i_1}+1,y_{j_1}+1)$ 为左上角，$(x_{i_2},y_{j_2})$ 为右下角的子矩阵的每个元素异或 $1$。\n\n求 $k$ 次操作后矩阵内元素之和的期望值。答案对 $998244353$ 取模。", "inputFormat": "第一行三个整数，分别为 $n,m,k$ 。\n\n第二行 $m$ 个整数，其中第 $i$ 个数表示 $x_i$ 。\n\n第三行 $m$ 个整数，其中第 $i$ 个数表示 $y_i$ 。\n\n", "outputFormat": "一行一个整数，表示答案在 $998244353$ 模意义下的值。", "hint": "#### 样例解释 1\n\n样例中，$\\{x_m\\}=\\{y_m\\}=\\{0,1,2\\}$。可以发现，此 $2\\times 2$ 矩阵的任意一个子矩阵都可以被变换。当子矩阵大小分别为 $1,2,4$ 时，对应方案数分别为 $4,4,1$，由于只操作一次，所以对应的最终矩阵元素之和分别为 $4\\times1,4\\times2,1\\times 4$。于是，答案为 $\\frac{4+8+4}{4+4+1}=\\frac{16}9$。\n\n#### 数据规模与约定  \n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$2\\le m\\le \\min(n+1,10^3)$，$1\\le n\\le10^9$，$1\\le k\\le 10^6$，保证 $x_i$ 互不相等且递增，$y_i$ 互不相等且递增。\n\n| 子任务 | 分值 |     $n$      |   $m$    |     $k$      |\n| :----: | :--: | :----------: | :------: | :----------: |\n|   1    |  10  |   $ \\le 4$   | $ \\le 3$ |   $ \\le 2$   |\n|   2    |  5   |      /       |   $2$    |      /       |\n|   3    |  25  | $ \\le 10^2 $ |    /     | $ \\le 10^2 $ |\n|   4    |  20  | $ \\le 10^9 $ |    /     | $ \\le 10^2 $ |\n|   5    |  20  | $ \\le 10^2 $ |    /     | $ \\le 10^6 $ |\n|   6    |  20  |      /       |    /     |      /       |\n\n\n\n\n\n------------\n", "locale": "zh-CN"}}}
{"pid": "P7246", "type": "P", "difficulty": 6, "samples": [["1\n4\n1 2 1 2\n1 2\n2 3\n2 4", "2"], ["1\n8\n1 4 2 8 5 7 8 1\n1 2\n2 3\n2 4\n2 5\n1 6\n6 7\n6 8", "19"], ["2\n10086001 100000", "26892182890608"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "手势密码", "background": "&emsp;&emsp;众目睽睽之下被要求解锁另一个人的手机是一件非常恐怖的事。\n\n&emsp;&emsp;——特别是密码关于自己的时候。\n\n---\n\n&emsp;&emsp;被堆在讲台周围乌压压的同学围着，小灰毛表示自己真的很难。作为班长的阿绫被叫去开会，存着月考名次表的手机被交给天依保管。但消息不出意料地走漏，现在一班觊觎着分数数据的饿狼一致要求天依打开手机……\n\n&emsp;&emsp;“真不知道密码啊！”拖延着，心里早就猜到手势密码的答案。\n\n&emsp;&emsp;最后，试探而肯定地划出一个字母“Y”，解锁成功。什么意思呢？首先排除“依”的首字母。\n\n&emsp;&emsp;这个时候肯定有起哄的啦！\n\n&emsp;&emsp;“懂的都懂\\~”“别问，问就是 [XX即是正义！](https://www.bilibili.com/video/BV1z741137vQ)”……", "description": "乐正大小姐用的手机很高级，所以她的手势密码也很花哨。\n\n具体地，现在有一棵 $n$ 个结点的树，对于两个结点 $u,v$，当且仅当 $(u,v)$ 是一条树边时，手势才能从其中一个点（$u$ 或 $v$）划向另一个点（$v$ 或 $u$）。更奇怪的是，这种手势密码不限制仅划一次，但每次划出的路径必须是树上的一条简单路径。\n\n现在阿绫告诉了天依在她的密码中每个结点被手势划过的次数（作为手势的起点或终点也算划过一次），其中第 $i$ 个结点划过 $a_i$ 次。那么，天依至少要划多少次才能解开密码呢？\n\n----\n\n#### 简化题意\n\n有一棵带点权的树。定义一次操作为选择树上的一条简单路径，并将这条简单路径上的所有点点权减去 $1$。问至少需要多少次操作，使树上所有点的点权**恰好**变为 $0$。", "inputFormat": "第一行一个整数 $op$，表示数据输入方式类型。\n\n如果 $op=1$：\n\n第二行一个正整数 $n$，表示结点个数。\n\n第三行 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$，表示每个结点的点权。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示一条连接结点 $u$ 和结点 $v$ 的树边。\n\n如果 $op=2$：\n\n我们将给出一个输入的模板：\n```cpp\n#include <cstdio>\nint a[3000005], u[3000005],v[3000005];\nnamespace Generate{\n\tint n,seed;\n\tstatic const int mod=1e9;\n\tint Rand(int x){\n\t\tseed=(1ll*seed*0x66CCF+19260817ll)%x+1;\n\t\tseed=(1ll*seed*0x77CCF+20060428ll)%x+1;\n\t\tseed=(1ll*seed*0x88CCF+12345678ll)%x+1;\n\t\tseed=(1ll*seed*0x33CCCCFF+10086001ll)%x+1;\n\t\treturn seed;\n\t}\n\tvoid RS(int* a, int* u, int* v){ //你需要传入三个参数，分别表示点权，一条边的两个端点 \n\t\tint cnt=0;\n\t\tfor(int i=1;i<=n;i++)a[i]=Rand(mod); \n\t\tfor(int i=2;i<=n;i++){\n\t\t\tint fa=Rand(i-1);\n\t\t\tcnt++;\n\t\t\tu[cnt]=fa,v[cnt]=i;\n\t\t}\n\t}\n};\nint main () {\n\tint op;\n\tscanf(\"%d\",&op);\n\tif(op==1){\n\t\t//直接输入 \n\t}else{\n\t\tint n;\n\t\tscanf(\"%d %d\",&Generate::seed,&n);//输入种子和n \n\t\tGenerate::n=n;//记得赋值 \n\t\tGenerate::RS(a,u,v); //开始工作 \n\t}\n\treturn 0;\n}\n```\n\n第二行两个整数 $seed$ 和 $n$，表示生成器的种子与结点个数。", "outputFormat": "一行一个整数，表示最少的操作次数。", "hint": "#### 样例解释 2\n给出的树形态如下，括号中的数字表示该点的点权。\n\n![样例2](https://cdn.luogu.com.cn/upload/image_hosting/djmtr8s9.png)\n\n一种最优的操作方案为 $(3,4)\\times2,(4,5),(4,4)\\times4,(5,5)\\times4,(4,7),(7,8),(6,7)\\times6$。其中 $(u,v)$ 表示对从 $u$ 到 $v$ 的简单路径进行一次操作。\n\n------------\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$op\\in\\{1,2\\}$，$1\\le seed\\le 10^9$，$1\\le n\\le 3\\times 10^6$，$0\\le a_i\\le10^9$，$1\\le u,v\\le n$，保证 $u\\ne v$。\n\n| 子任务 | 分值 |    $op$    |           $n$            |      $a_i$      | 特殊性质 |\n| :----: | :--: | :--------: | :----------------------: | :-------------: | :------: |\n|   1    |  1   |    $1$     |           $2$            |        /        |    /     |\n|   2    |  4   |    $1$     |           $3$            |        /        |    /     |\n|   3    |  10  |    $1$     |      $\\leq 6$       |  $\\leq 3$  |    /     |\n|   4    |  5   |    $1$     |     $\\leq 10^6$     |        /        |    A     |\n|   5    |  15  |    $1$     |      $\\leq 50$      |        /        |    /     |\n|   6    |  5   |    $1$     | $\\leq 5\\times 10^3$ | $\\leq 100$ |    B     |\n|   7    |  10  |    $1$     |     $\\leq 10^5$     | $\\leq 100$ |    B     |\n|   8    |  10  |    $1$     |     $\\leq 10^5$     |        /        |    C     |\n|   9    |  10  |    $1$     |     $\\leq 10^5$     | $\\leq 100$ |    /     |\n|   10   |  30  |    /     |            /             |        /        |    /     |\n\n\n- 特殊限制 A：对于第 $i$ 条边 $(u,v)$，保证 $u=i,v=i+1$。\n- 特殊限制 B：输入的边构成一棵满二叉树。\n- 特殊限制 C：对于 $\\forall 1\\le i\\le n$ 有 $a_i=1$。\n\n\n\n\n------------\n#### 提示\nSubtask 10 时限 2S。\n\n对于 $op=2$ 的数据，输入的模板只用于减小输入量，标程不依赖该数据生成方式。\n\n【2024.7.2 补充】@[Edward1002001](https://www.luogu.com.cn/user/151415) 指出，Subtask 10 的数据生成器生成的树形并没有随机性。（因为在生成 $2$ 的父亲时，最终 `seed` 一定会变为 $1$，此后的随机序列就完全相同了。）这一点不影响数据的正确性，但导致数据强度下降，我们为此致歉。鉴于本题提交较多，不做题面和数据修改。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "手势密码", "background": "&emsp;&emsp;众目睽睽之下被要求解锁另一个人的手机是一件非常恐怖的事。\n\n&emsp;&emsp;——特别是密码关于自己的时候。\n\n---\n\n&emsp;&emsp;被堆在讲台周围乌压压的同学围着，小灰毛表示自己真的很难。作为班长的阿绫被叫去开会，存着月考名次表的手机被交给天依保管。但消息不出意料地走漏，现在一班觊觎着分数数据的饿狼一致要求天依打开手机……\n\n&emsp;&emsp;“真不知道密码啊！”拖延着，心里早就猜到手势密码的答案。\n\n&emsp;&emsp;最后，试探而肯定地划出一个字母“Y”，解锁成功。什么意思呢？首先排除“依”的首字母。\n\n&emsp;&emsp;这个时候肯定有起哄的啦！\n\n&emsp;&emsp;“懂的都懂\\~”“别问，问就是 [XX即是正义！](https://www.bilibili.com/video/BV1z741137vQ)”……", "description": "乐正大小姐用的手机很高级，所以她的手势密码也很花哨。\n\n具体地，现在有一棵 $n$ 个结点的树，对于两个结点 $u,v$，当且仅当 $(u,v)$ 是一条树边时，手势才能从其中一个点（$u$ 或 $v$）划向另一个点（$v$ 或 $u$）。更奇怪的是，这种手势密码不限制仅划一次，但每次划出的路径必须是树上的一条简单路径。\n\n现在阿绫告诉了天依在她的密码中每个结点被手势划过的次数（作为手势的起点或终点也算划过一次），其中第 $i$ 个结点划过 $a_i$ 次。那么，天依至少要划多少次才能解开密码呢？\n\n----\n\n#### 简化题意\n\n有一棵带点权的树。定义一次操作为选择树上的一条简单路径，并将这条简单路径上的所有点点权减去 $1$。问至少需要多少次操作，使树上所有点的点权**恰好**变为 $0$。", "inputFormat": "第一行一个整数 $op$，表示数据输入方式类型。\n\n如果 $op=1$：\n\n第二行一个正整数 $n$，表示结点个数。\n\n第三行 $n$ 个非负整数 $a_1,a_2,\\cdots,a_n$，表示每个结点的点权。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示一条连接结点 $u$ 和结点 $v$ 的树边。\n\n如果 $op=2$：\n\n我们将给出一个输入的模板：\n```cpp\n#include <cstdio>\nint a[3000005], u[3000005],v[3000005];\nnamespace Generate{\n\tint n,seed;\n\tstatic const int mod=1e9;\n\tint Rand(int x){\n\t\tseed=(1ll*seed*0x66CCF+19260817ll)%x+1;\n\t\tseed=(1ll*seed*0x77CCF+20060428ll)%x+1;\n\t\tseed=(1ll*seed*0x88CCF+12345678ll)%x+1;\n\t\tseed=(1ll*seed*0x33CCCCFF+10086001ll)%x+1;\n\t\treturn seed;\n\t}\n\tvoid RS(int* a, int* u, int* v){ //你需要传入三个参数，分别表示点权，一条边的两个端点 \n\t\tint cnt=0;\n\t\tfor(int i=1;i<=n;i++)a[i]=Rand(mod); \n\t\tfor(int i=2;i<=n;i++){\n\t\t\tint fa=Rand(i-1);\n\t\t\tcnt++;\n\t\t\tu[cnt]=fa,v[cnt]=i;\n\t\t}\n\t}\n};\nint main () {\n\tint op;\n\tscanf(\"%d\",&op);\n\tif(op==1){\n\t\t//直接输入 \n\t}else{\n\t\tint n;\n\t\tscanf(\"%d %d\",&Generate::seed,&n);//输入种子和n \n\t\tGenerate::n=n;//记得赋值 \n\t\tGenerate::RS(a,u,v); //开始工作 \n\t}\n\treturn 0;\n}\n```\n\n第二行两个整数 $seed$ 和 $n$，表示生成器的种子与结点个数。", "outputFormat": "一行一个整数，表示最少的操作次数。", "hint": "#### 样例解释 2\n给出的树形态如下，括号中的数字表示该点的点权。\n\n![样例2](https://cdn.luogu.com.cn/upload/image_hosting/djmtr8s9.png)\n\n一种最优的操作方案为 $(3,4)\\times2,(4,5),(4,4)\\times4,(5,5)\\times4,(4,7),(7,8),(6,7)\\times6$。其中 $(u,v)$ 表示对从 $u$ 到 $v$ 的简单路径进行一次操作。\n\n------------\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$op\\in\\{1,2\\}$，$1\\le seed\\le 10^9$，$1\\le n\\le 3\\times 10^6$，$0\\le a_i\\le10^9$，$1\\le u,v\\le n$，保证 $u\\ne v$。\n\n| 子任务 | 分值 |    $op$    |           $n$            |      $a_i$      | 特殊性质 |\n| :----: | :--: | :--------: | :----------------------: | :-------------: | :------: |\n|   1    |  1   |    $1$     |           $2$            |        /        |    /     |\n|   2    |  4   |    $1$     |           $3$            |        /        |    /     |\n|   3    |  10  |    $1$     |      $\\leq 6$       |  $\\leq 3$  |    /     |\n|   4    |  5   |    $1$     |     $\\leq 10^6$     |        /        |    A     |\n|   5    |  15  |    $1$     |      $\\leq 50$      |        /        |    /     |\n|   6    |  5   |    $1$     | $\\leq 5\\times 10^3$ | $\\leq 100$ |    B     |\n|   7    |  10  |    $1$     |     $\\leq 10^5$     | $\\leq 100$ |    B     |\n|   8    |  10  |    $1$     |     $\\leq 10^5$     |        /        |    C     |\n|   9    |  10  |    $1$     |     $\\leq 10^5$     | $\\leq 100$ |    /     |\n|   10   |  30  |    /     |            /             |        /        |    /     |\n\n\n- 特殊限制 A：对于第 $i$ 条边 $(u,v)$，保证 $u=i,v=i+1$。\n- 特殊限制 B：输入的边构成一棵满二叉树。\n- 特殊限制 C：对于 $\\forall 1\\le i\\le n$ 有 $a_i=1$。\n\n\n\n\n------------\n#### 提示\nSubtask 10 时限 2S。\n\n对于 $op=2$ 的数据，输入的模板只用于减小输入量，标程不依赖该数据生成方式。\n\n【2024.7.2 补充】@[Edward1002001](https://www.luogu.com.cn/user/151415) 指出，Subtask 10 的数据生成器生成的树形并没有随机性。（因为在生成 $2$ 的父亲时，最终 `seed` 一定会变为 $1$，此后的随机序列就完全相同了。）这一点不影响数据的正确性，但导致数据强度下降，我们为此致歉。鉴于本题提交较多，不做题面和数据修改。", "locale": "zh-CN"}}}
{"pid": "P7247", "type": "P", "difficulty": 7, "samples": [["3\n1 2 3\n1 2 1\n2 3 1", "332748127"], ["5\n2 3 4 2 5\n1 2 3\n2 4 2\n2 5 5\n1 3 3", "615584181"], ["2\n1 2\n1 2 2", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "教材运送", "background": "&emsp;&emsp;“如果天依来当志愿者的话，说不定会被累死哟。”\n\n------------\n\n&emsp;&emsp;“七年三班又在什么鬼地方啊……”，不信这个邪的小灰毛喘息着抱怨。发丝凝着汗珠，慵懒地趴在白皙的后颈，粘黏感若有若无地在心里描画着燥热。数十本教材抵在胸口，大腿前伸直的双手托着艰难的重量，贴着扶手一步一步挪上漫长的台阶。\n\n&emsp;&emsp;背后，一撮可爱的棕色呆毛蹦蹦跳跳地跟了上来，“所以\\~需要帮忙吗？”", "description": "魔都中学的教学楼是一棵有 $n$ 个结点的树，结点 $i$ 对应编号为 $i$，人数为 $a_i$ 的教室。无向边 $i$ 描述为 $(u_i,v_i,b_i)$，对应连接教室 $u_i$ 和 $v_i$，垂直高差为 $b_i\\ \\text{m}$ 的台阶。\n\n新学期开学，需要为同学们分发教材，不过传送系统的故障导致教材散落在各个教室。当天依在教室 $u$ 时，会随机抱起属于教室 $v~(v\\in[1,n])$ 的 $a_v$ 本教材，并沿连接教室 $u,v$ 的唯一简单路径将这些教材送到教室 $v$。设天依走过的台阶高差为 $b_1,b_2,\\cdots,b_m\\ \\text{m}$，每本教材重力为 $1\\text{N}$，那么称此次运送中，天依的托举力做功的绝对值（上台阶取正功，下台阶取负功的绝对值）为 $W=a_v\\left( \\sum_{i=1}^{m} b_i \\right)\\text{J}$。换句话来说，一次运送的代价是**终点点权**与**走过路径边权之和**的乘积。\n\n初始时，天依在 $1$ 号教室，但她不认识路，所以阿绫会带着天依运送教材，使得天依到达过每个教室至少一次。那么在达到这一目标之前，天依托举力做功的绝对值之和的期望为多少 $\\text{J}$？\n\n**由于答案可能是一个小数，为了避免损失精度，请输出答案在 $998244353$ 模意义下的值。**\n\n------------\n\n#### 简化题意\n\n给定一棵包含 $n$ 个点，有点权和边权的无根树。设当前位置 $s$（初始时 $s=1$），每次在 $n$ 个结点内随机选择目标结点 $t$，付出「$s$ 到 $t$ 的简单路径上的边权之和」$\\times$「$t$ 的点权」的代价，标记（可以重复标记）点 $t$ 并把 $s$ 置为 $t$。求每个点至少被标记一次时（其中 $1$ 号结点一开始就被标记）代价之和的期望。答案对 $998244353$ 取模。", "inputFormat": "第一行输入一个整数 $n$，含义如题所述。\n\n第二行有 $n$ 个整数，表示每个教室的人数。\n\n随后 $n-1$ 行，每行三个整数 $u_i,v_i,b_i$ 表示教室 $u_i$ 与教室 $v_i$ 之间有一垂直高差为 $b_i\\ \\text{m}$ 的台阶。", "outputFormat": "一行一个整数，表示答案在 $998244353$ 模意义下的值。", "hint": "------------\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$1\\le a_i,b_i\\lt 998244353$，$1\\le u_i,v_i\\le n$，保证 $u_i\\ne v_i$。\n\n| 子任务 | 分值 |         $n$          |               特殊限制                |\n| :----: | :--: | :------------------: | :-----------------------------------: |\n|   1    |  5  |      $ \\le 3$       |                   /                   |\n|   2    |  10  |      $ \\le 13$       |                   /                   |\n|   3    |  10  |      $ \\le 20$       |                   /                   |\n|   4    |  25  | $ \\le 5\\times 10^3 $ |                   /                   |\n|   5    |  5   |          /           | 对于 $\\forall 1\\le i\\le n$，$a_i=1$ |\n|   6    |  10  |          /           | 对于每一条边，$v_i=u_i+1$，即树是一条链。 |\n|   7    |  35  |          /           |                   /                   |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "教材运送", "background": "&emsp;&emsp;“如果天依来当志愿者的话，说不定会被累死哟。”\n\n------------\n\n&emsp;&emsp;“七年三班又在什么鬼地方啊……”，不信这个邪的小灰毛喘息着抱怨。发丝凝着汗珠，慵懒地趴在白皙的后颈，粘黏感若有若无地在心里描画着燥热。数十本教材抵在胸口，大腿前伸直的双手托着艰难的重量，贴着扶手一步一步挪上漫长的台阶。\n\n&emsp;&emsp;背后，一撮可爱的棕色呆毛蹦蹦跳跳地跟了上来，“所以\\~需要帮忙吗？”", "description": "魔都中学的教学楼是一棵有 $n$ 个结点的树，结点 $i$ 对应编号为 $i$，人数为 $a_i$ 的教室。无向边 $i$ 描述为 $(u_i,v_i,b_i)$，对应连接教室 $u_i$ 和 $v_i$，垂直高差为 $b_i\\ \\text{m}$ 的台阶。\n\n新学期开学，需要为同学们分发教材，不过传送系统的故障导致教材散落在各个教室。当天依在教室 $u$ 时，会随机抱起属于教室 $v~(v\\in[1,n])$ 的 $a_v$ 本教材，并沿连接教室 $u,v$ 的唯一简单路径将这些教材送到教室 $v$。设天依走过的台阶高差为 $b_1,b_2,\\cdots,b_m\\ \\text{m}$，每本教材重力为 $1\\text{N}$，那么称此次运送中，天依的托举力做功的绝对值（上台阶取正功，下台阶取负功的绝对值）为 $W=a_v\\left( \\sum_{i=1}^{m} b_i \\right)\\text{J}$。换句话来说，一次运送的代价是**终点点权**与**走过路径边权之和**的乘积。\n\n初始时，天依在 $1$ 号教室，但她不认识路，所以阿绫会带着天依运送教材，使得天依到达过每个教室至少一次。那么在达到这一目标之前，天依托举力做功的绝对值之和的期望为多少 $\\text{J}$？\n\n**由于答案可能是一个小数，为了避免损失精度，请输出答案在 $998244353$ 模意义下的值。**\n\n------------\n\n#### 简化题意\n\n给定一棵包含 $n$ 个点，有点权和边权的无根树。设当前位置 $s$（初始时 $s=1$），每次在 $n$ 个结点内随机选择目标结点 $t$，付出「$s$ 到 $t$ 的简单路径上的边权之和」$\\times$「$t$ 的点权」的代价，标记（可以重复标记）点 $t$ 并把 $s$ 置为 $t$。求每个点至少被标记一次时（其中 $1$ 号结点一开始就被标记）代价之和的期望。答案对 $998244353$ 取模。", "inputFormat": "第一行输入一个整数 $n$，含义如题所述。\n\n第二行有 $n$ 个整数，表示每个教室的人数。\n\n随后 $n-1$ 行，每行三个整数 $u_i,v_i,b_i$ 表示教室 $u_i$ 与教室 $v_i$ 之间有一垂直高差为 $b_i\\ \\text{m}$ 的台阶。", "outputFormat": "一行一个整数，表示答案在 $998244353$ 模意义下的值。", "hint": "------------\n#### 数据规模与约定\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$1\\le a_i,b_i\\lt 998244353$，$1\\le u_i,v_i\\le n$，保证 $u_i\\ne v_i$。\n\n| 子任务 | 分值 |         $n$          |               特殊限制                |\n| :----: | :--: | :------------------: | :-----------------------------------: |\n|   1    |  5  |      $ \\le 3$       |                   /                   |\n|   2    |  10  |      $ \\le 13$       |                   /                   |\n|   3    |  10  |      $ \\le 20$       |                   /                   |\n|   4    |  25  | $ \\le 5\\times 10^3 $ |                   /                   |\n|   5    |  5   |          /           | 对于 $\\forall 1\\le i\\le n$，$a_i=1$ |\n|   6    |  10  |          /           | 对于每一条边，$v_i=u_i+1$，即树是一条链。 |\n|   7    |  35  |          /           |                   /                   |\n", "locale": "zh-CN"}}}
{"pid": "P7248", "type": "P", "difficulty": 3, "samples": [["4\n((()", "2"], ["8\n((((((((", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["动态规划 DP", "2012", "BalticOI（波罗的海）"], "title": "[BalticOI 2012] 括号 (Day1)", "background": "", "description": "一个合法括号序列的定义如下：\n\n- () 和 [] 是合法括号序列\n- 若 A 是合法括号序列，则 (A) 和 [A] 也是合法括号序列\n- 若 A 和 B 都是合法括号序列，则 AB 也是合法括号序列\n\n在包含至少一对方括号的合法括号序列中，我们可以将 [ 和 ] 都用 ( 代替，这样就能够得到一个不合法括号序列。\n\n例如 (( 和 ((((())) 都是不合法括号序列，前者可以由合法括号序列 \\[] 转化而来，后者可以通过 \\[]((()))，(\\[](()))，((\\[]())) 和 (((\\[]))) 这四种合法括号序列转化而来。\n\n现在给出一个不合法括号序列，求有多少种合法括号序列，在将其中的方括号用 ( 代替后，可以得到给定的括号序列。", "inputFormat": "第一行一个正整数 $n$，表示给出的不合法括号序列的长度。  \n第二行一个长度为 $n$ 的字符串，代表给出的序列，只包含 ( 和 )。", "outputFormat": "输出符合要求的合法括号序列总数对 $10^9+9$ 取模后的结果。", "hint": "**【样例解释#1】** \n\n满足条件的合法括号序列有两种：\\[]() 和 ([])。\n\n**【数据范围】**\n\n- 对于 20% 的数据，满足 $n \\leq 50$\n- 对于 50% 的数据，满足 $n \\leq 1000$\n- 对于 100% 的数据，满足 $2\\leq n \\leq 30000$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T1. Brackets](http://www.boi2012.lv/data/day1/eng/brackets.pdf)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2012] 括号 (Day1)", "background": "", "description": "一个合法括号序列的定义如下：\n\n- () 和 [] 是合法括号序列\n- 若 A 是合法括号序列，则 (A) 和 [A] 也是合法括号序列\n- 若 A 和 B 都是合法括号序列，则 AB 也是合法括号序列\n\n在包含至少一对方括号的合法括号序列中，我们可以将 [ 和 ] 都用 ( 代替，这样就能够得到一个不合法括号序列。\n\n例如 (( 和 ((((())) 都是不合法括号序列，前者可以由合法括号序列 \\[] 转化而来，后者可以通过 \\[]((()))，(\\[](()))，((\\[]())) 和 (((\\[]))) 这四种合法括号序列转化而来。\n\n现在给出一个不合法括号序列，求有多少种合法括号序列，在将其中的方括号用 ( 代替后，可以得到给定的括号序列。", "inputFormat": "第一行一个正整数 $n$，表示给出的不合法括号序列的长度。  \n第二行一个长度为 $n$ 的字符串，代表给出的序列，只包含 ( 和 )。", "outputFormat": "输出符合要求的合法括号序列总数对 $10^9+9$ 取模后的结果。", "hint": "**【样例解释#1】** \n\n满足条件的合法括号序列有两种：\\[]() 和 ([])。\n\n**【数据范围】**\n\n- 对于 20% 的数据，满足 $n \\leq 50$\n- 对于 50% 的数据，满足 $n \\leq 1000$\n- 对于 100% 的数据，满足 $2\\leq n \\leq 30000$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T1. Brackets](http://www.boi2012.lv/data/day1/eng/brackets.pdf)", "locale": "zh-CN"}}}
{"pid": "P7249", "type": "P", "difficulty": 4, "samples": [["2 10\n0 0\n11 1", "5.545455"]], "limits": {"time": [600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2012", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2012] 移动网络 (Day1)", "background": "", "description": "有一条线段与若干个点，求线段上的点离最近的点最远的距离。", "inputFormat": "第一行两个整数 $n$，$l$，代表总共有 $n$ 个点，线段端点为 $(0,0)$ 与 $(l,0)$。  \n接下来每行两个整数 $(x,y)$，描述了点的横纵坐标，保证没有两个点坐标相同。  \n给出点的坐标以横坐标为第一关键字，纵坐标为第二关键字升序排序。", "outputFormat": "输出最远距离。  \n\n本题开启 SPJ，你的答案与标准答案与标准答案误差不超过 $10^{-3}$ 即为正确。", "hint": "**【样例解释】** \n\n距离最远的点在两个点的中垂线与线段的交点处。\n\n**【数据范围】**\n\n- 对于 25% 的数据，满足 $n \\leq 5000$\n- 对于 50% 的数据，满足 $n \\leq 10^5$\n- 对于 100% 的数据，满足 $1\\leq n \\leq 10^6$，$1 \\leq l \\leq 10^9$，$-10^9 \\leq x_i,y_i \\leq 10^9$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T2. Mobile](http://www.boi2012.lv/data/day1/eng/mobile.pdf)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2012] 移动网络 (Day1)", "background": "", "description": "有一条线段与若干个点，求线段上的点离最近的点最远的距离。", "inputFormat": "第一行两个整数 $n$，$l$，代表总共有 $n$ 个点，线段端点为 $(0,0)$ 与 $(l,0)$。  \n接下来每行两个整数 $(x,y)$，描述了点的横纵坐标，保证没有两个点坐标相同。  \n给出点的坐标以横坐标为第一关键字，纵坐标为第二关键字升序排序。", "outputFormat": "输出最远距离。  \n\n本题开启 SPJ，你的答案与标准答案与标准答案误差不超过 $10^{-3}$ 即为正确。", "hint": "**【样例解释】** \n\n距离最远的点在两个点的中垂线与线段的交点处。\n\n**【数据范围】**\n\n- 对于 25% 的数据，满足 $n \\leq 5000$\n- 对于 50% 的数据，满足 $n \\leq 10^5$\n- 对于 100% 的数据，满足 $1\\leq n \\leq 10^6$，$1 \\leq l \\leq 10^9$，$-10^9 \\leq x_i,y_i \\leq 10^9$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T2. Mobile](http://www.boi2012.lv/data/day1/eng/mobile.pdf)", "locale": "zh-CN"}}}
{"pid": "P7250", "type": "P", "difficulty": 4, "samples": [["6 6\n21 16 9 11 6 7\n21 21 10 14 15 9\n18 20 8 9 13 14\n11 10 9 9 8 13\n8 12 12 14 13 8\n7 13 12 9 5 1", "4\n21 0\n15 11\n14 13\n13 12"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2012", "BalticOI（波罗的海）"], "title": "[BalticOI 2012] 山峰 (Day1)", "background": "", "description": "有一个 $N \\times M$ 大小的岛屿，每个点有不同的海拔。定义相邻为两个点横纵坐标差均不超过 $1$。定义路径为任意两个连续点都相邻的序列。定义平坦的区域是一组联通的海拔相同的点的极大集合，山峰是一个不与任何海拔更高的点相邻的平坦区域。\n\n给出这个岛屿上每个点的海拔，你需要求出岛屿上所有的山峰与前往比其高度更高的山峰所需经过的最低点的海拔的最大值。", "inputFormat": "第一行两个整数 $N,M$，代表地图的长和宽。\n\n接下来 $N$ 行，每行 $M$ 个整数 $E_{i,j}$ ，描述了 $(i,j)$ 的海拔。", "outputFormat": "第一行一个整数 $P$，代表岛上的山峰数。\n\n接下来 $P$ 行，每行两个整数 $h_0,h_1$，代表某座山峰的海拔，以及从该山峰出发到达更高的山峰所需经过的最低点的海拔的最大值。\n\n输出应以 $h_0$ 为第一关键字，$h_1$ 为第二关键字降序排列，特别的，对于最高峰，$h_1=0$", "hint": "**【样例解释】** \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/flr0h9rs.png)  \n如上图所示，其中圆圈圈出的为山峰，从海拔为15的山峰前往其他山峰的一条路径用深色标出。\n\n**【数据范围】**\n\n- 对于 15% 的数据，满足 $\\min (N,M)\\leq 2$\n- 对于 50% 的数据，满足 $P \\leq 500$\n- 对于 80% 的数据，满足 $P \\leq 5000$\n- 对于 100% 的数据，满足 $1 \\leq N,M \\leq 2000$，$N \\times M \\leq 10^5$，$1 \\leq E_{i,j} \\leq 10^6$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T3. Peaks](http://www.boi2012.lv/data/day1/eng/peaks.pdf)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2012] 山峰 (Day1)", "background": "", "description": "有一个 $N \\times M$ 大小的岛屿，每个点有不同的海拔。定义相邻为两个点横纵坐标差均不超过 $1$。定义路径为任意两个连续点都相邻的序列。定义平坦的区域是一组联通的海拔相同的点的极大集合，山峰是一个不与任何海拔更高的点相邻的平坦区域。\n\n给出这个岛屿上每个点的海拔，你需要求出岛屿上所有的山峰与前往比其高度更高的山峰所需经过的最低点的海拔的最大值。", "inputFormat": "第一行两个整数 $N,M$，代表地图的长和宽。\n\n接下来 $N$ 行，每行 $M$ 个整数 $E_{i,j}$ ，描述了 $(i,j)$ 的海拔。", "outputFormat": "第一行一个整数 $P$，代表岛上的山峰数。\n\n接下来 $P$ 行，每行两个整数 $h_0,h_1$，代表某座山峰的海拔，以及从该山峰出发到达更高的山峰所需经过的最低点的海拔的最大值。\n\n输出应以 $h_0$ 为第一关键字，$h_1$ 为第二关键字降序排列，特别的，对于最高峰，$h_1=0$", "hint": "**【样例解释】** \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/flr0h9rs.png)  \n如上图所示，其中圆圈圈出的为山峰，从海拔为15的山峰前往其他山峰的一条路径用深色标出。\n\n**【数据范围】**\n\n- 对于 15% 的数据，满足 $\\min (N,M)\\leq 2$\n- 对于 50% 的数据，满足 $P \\leq 500$\n- 对于 80% 的数据，满足 $P \\leq 5000$\n- 对于 100% 的数据，满足 $1 \\leq N,M \\leq 2000$，$N \\times M \\leq 10^5$，$1 \\leq E_{i,j} \\leq 10^6$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day1 T3. Peaks](http://www.boi2012.lv/data/day1/eng/peaks.pdf)", "locale": "zh-CN"}}}
{"pid": "P7251", "type": "P", "difficulty": 5, "samples": [["4 3\n1 4\n2 3\n2 4", "1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "2014", "各省省选", "江苏", "强连通分量"], "title": "[JSOI2014] 强连通图", "background": "", "description": "JYY 最近痴迷于图的强连通性，所以对于任何有向图，JYY 都希望增加一些边使得这个图变成强连通图。JYY现在得到了一个 $n$ 个点 $m$ 条边的有向图，所有点从 $1$ 到 $n$ 编号。\n\nJYY 想知道：\n\n- 在给定的图中，最多能选出多少个点，使得这些点在原图中两两可达？\n\n- 在给定的图中，最少增加多少条边，可以使得这个图变成强连通图？\n\n其中，一个有向图 $G(V,E)$是强连通的，当且仅当任意顶点 $a,b\\in V,a\\neq b$之间都存在 $a\\to b$ 和 $b\\to a$ 的路径。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $x$ 和 $y$，表示图中有一条从 $x$ 到 $y$ 的有向边。", "outputFormat": "两行，第一行表示第一个问题的答案，第二行表示第二个问题的答案。", "hint": "### 样例解释 1\n\n对于第一个问题，无法选出互相连通两个点，答案为 $1$。\n\n对于第二个问题，一种加边数最小的方案为 $(3,1)$ 和 $(4,2)$，答案为 $2$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5,1\\leq m\\leq 3\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2014] 强连通图", "background": "", "description": "JYY 最近痴迷于图的强连通性，所以对于任何有向图，JYY 都希望增加一些边使得这个图变成强连通图。JYY现在得到了一个 $n$ 个点 $m$ 条边的有向图，所有点从 $1$ 到 $n$ 编号。\n\nJYY 想知道：\n\n- 在给定的图中，最多能选出多少个点，使得这些点在原图中两两可达？\n\n- 在给定的图中，最少增加多少条边，可以使得这个图变成强连通图？\n\n其中，一个有向图 $G(V,E)$是强连通的，当且仅当任意顶点 $a,b\\in V,a\\neq b$之间都存在 $a\\to b$ 和 $b\\to a$ 的路径。", "inputFormat": "第一行包含两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，每行两个整数 $x$ 和 $y$，表示图中有一条从 $x$ 到 $y$ 的有向边。", "outputFormat": "两行，第一行表示第一个问题的答案，第二行表示第二个问题的答案。", "hint": "### 样例解释 1\n\n对于第一个问题，无法选出互相连通两个点，答案为 $1$。\n\n对于第二个问题，一种加边数最小的方案为 $(3,1)$ 和 $(4,2)$，答案为 $2$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5,1\\leq m\\leq 3\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P7252", "type": "P", "difficulty": 5, "samples": [["5 3 \n1 \n2 \n2\n1\n1\n1 5\n2 5\n2 4", "1\n0\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2011", "各省省选", "江苏", "O2优化"], "title": "[JSOI2011] 棒棒糖", "background": null, "description": "Coffee 的世界里也是有棒棒糖卖的，Coffee 买了 $n$ 只连着的棒棒糖。这 $n$ 只棒棒糖包裹在小塑料袋中，排成\n一列，相邻的两只棒棒糖的塑料袋是接起来的。为了方便，我们把棒棒糖从左到右编号为 $1\\cdots n$。\n\n每只棒棒糖有一种口味。第 $i$ 只的口味是 $c_i$。两只棒棒糖 $i,j$ 的口味相同，当且仅当 $c_i=c_j$。Coffee 对 $m$ 只棒棒糖总体口味的评价比较奇怪。如果这 $m$ 只棒棒糖中，有一种口味 $c_0$ 的数量严格大于总数的一半，那么 Coffee 认为这 $m$ 只棒棒糖主要是 $c_0$ 口味的。Coffee 知道，这里的 $c_0$ 如果存在就一定是唯一的。而当 $c_0$ 不存在时，Coffee 认为这 $m$ 只棒棒糖是混合口味的。\n\nCoffee 暂时舍不得吃棒棒糖，它在想一些好玩的问题。如果考虑棒棒糖序列的一个连续子序列 $s\\cdots t(1\\leq s\\leq t\\leq n)$，包括棒棒糖 $s$ 和 $t$。那么这 $t-s+1$ 只棒棒糖的总体口味是什么呢？\n\nCoffee 有一堆这样的问题，一共 $m$ 个。第 $i$ 个问题是棒棒糖子序列 $s_i\\cdots t_i$ 的总体口味，请你帮忙解决。", "inputFormat": "第一行两个用空格隔开的整数，分别表示 $n,m$。\n\n接下来 $n$ 行，每行一个整数，表示 $c_i$。\n\n接下来 $m$ 行，每行两个整数，表示 $s_i,t_i$。", "outputFormat": "$m$ 行，每行一个整数，表示每个询问的总体口味。如果总体口味为混合口味则输出 $0$。", "hint": "### 样例解释 1\n\n在第一个询问中，口味 $1$ 出现 $3$ 次，大于总数的一半，所以总体口味为 $1$。\n\n在第二个询问中，没有一种口味出现次数大于总数的一半，所以为混合口味。\n\n在第三个询问中，口味 $2$ 出现 $2$ 次，大于总数的一半，所以总体口味为 $2$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq n,m,c_i\\leq 5\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JSOI2011] 棒棒糖", "background": null, "description": "Coffee 的世界里也是有棒棒糖卖的，Coffee 买了 $n$ 只连着的棒棒糖。这 $n$ 只棒棒糖包裹在小塑料袋中，排成\n一列，相邻的两只棒棒糖的塑料袋是接起来的。为了方便，我们把棒棒糖从左到右编号为 $1\\cdots n$。\n\n每只棒棒糖有一种口味。第 $i$ 只的口味是 $c_i$。两只棒棒糖 $i,j$ 的口味相同，当且仅当 $c_i=c_j$。Coffee 对 $m$ 只棒棒糖总体口味的评价比较奇怪。如果这 $m$ 只棒棒糖中，有一种口味 $c_0$ 的数量严格大于总数的一半，那么 Coffee 认为这 $m$ 只棒棒糖主要是 $c_0$ 口味的。Coffee 知道，这里的 $c_0$ 如果存在就一定是唯一的。而当 $c_0$ 不存在时，Coffee 认为这 $m$ 只棒棒糖是混合口味的。\n\nCoffee 暂时舍不得吃棒棒糖，它在想一些好玩的问题。如果考虑棒棒糖序列的一个连续子序列 $s\\cdots t(1\\leq s\\leq t\\leq n)$，包括棒棒糖 $s$ 和 $t$。那么这 $t-s+1$ 只棒棒糖的总体口味是什么呢？\n\nCoffee 有一堆这样的问题，一共 $m$ 个。第 $i$ 个问题是棒棒糖子序列 $s_i\\cdots t_i$ 的总体口味，请你帮忙解决。", "inputFormat": "第一行两个用空格隔开的整数，分别表示 $n,m$。\n\n接下来 $n$ 行，每行一个整数，表示 $c_i$。\n\n接下来 $m$ 行，每行两个整数，表示 $s_i,t_i$。", "outputFormat": "$m$ 行，每行一个整数，表示每个询问的总体口味。如果总体口味为混合口味则输出 $0$。", "hint": "### 样例解释 1\n\n在第一个询问中，口味 $1$ 出现 $3$ 次，大于总数的一半，所以总体口味为 $1$。\n\n在第二个询问中，没有一种口味出现次数大于总数的一半，所以为混合口味。\n\n在第三个询问中，口味 $2$ 出现 $2$ 次，大于总数的一半，所以总体口味为 $2$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq n,m,c_i\\leq 5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P7253", "type": "P", "difficulty": 0, "samples": [["7 2\n3 -2\n0 8\n-4 8\n-1 4\n-2 13\n-4 8\n1 5", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2012", "BalticOI（波罗的海）"], "title": "[BalticOI 2012] 城市烟花 (Day2)", "background": "", "description": "这是一座有着无限网格状街道的城市，有一些市民住在网格的交点处。(可能会有两个市民住在相同的地方)\n\n现在你需要选择某个竖直街道与水平街道 $0$ 的交点处进行烟花表演，市民需要赶到这个地点所在的水平街道或竖直街道上来观看，同时他们离燃放地点的距离不能小于 $S$。你需要选择一个燃放地点以最小化市民们的移动距离。", "inputFormat": "第一行两个整数 $N$，$S$，分别代表市民总数和最小距离。\n\n接下来 $N$ 行每行两个整数 $H_i$，$V_i$，表示这位市民住在水平街道 $H_i$ 与 竖直街道 $V_i$ 交点处。", "outputFormat": "输出移动距离和的最小值。", "hint": "**【样例解释】** \n\n注意水平街道 $-4$ 与竖直街道 $8$ 交点处有两个人居住。\n\n最优解是选择竖直街道 $8$，此时距离取最小值 $9$。\n\n**【数据范围】**\n\n- 对于 $20\\%$ 的数据，满足 $0 \\leq V_i \\leq 5000$\n- 对于 $40\\%$ 的数据，满足 $N \\leq 5000$\n- 对于 $100\\%$ 的数据，满足 $1 \\leq N \\leq 10^5$，$1 \\leq S \\leq 10^6$，$-10^9 \\leq H_i,V_i \\leq 10^9$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day2 T1. Fireworks in RightAngleles](http://www.boi2012.lv/data/day2/eng/fire.pdf)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2012] 城市烟花 (Day2)", "background": "", "description": "这是一座有着无限网格状街道的城市，有一些市民住在网格的交点处。(可能会有两个市民住在相同的地方)\n\n现在你需要选择某个竖直街道与水平街道 $0$ 的交点处进行烟花表演，市民需要赶到这个地点所在的水平街道或竖直街道上来观看，同时他们离燃放地点的距离不能小于 $S$。你需要选择一个燃放地点以最小化市民们的移动距离。", "inputFormat": "第一行两个整数 $N$，$S$，分别代表市民总数和最小距离。\n\n接下来 $N$ 行每行两个整数 $H_i$，$V_i$，表示这位市民住在水平街道 $H_i$ 与 竖直街道 $V_i$ 交点处。", "outputFormat": "输出移动距离和的最小值。", "hint": "**【样例解释】** \n\n注意水平街道 $-4$ 与竖直街道 $8$ 交点处有两个人居住。\n\n最优解是选择竖直街道 $8$，此时距离取最小值 $9$。\n\n**【数据范围】**\n\n- 对于 $20\\%$ 的数据，满足 $0 \\leq V_i \\leq 5000$\n- 对于 $40\\%$ 的数据，满足 $N \\leq 5000$\n- 对于 $100\\%$ 的数据，满足 $1 \\leq N \\leq 10^5$，$1 \\leq S \\leq 10^6$，$-10^9 \\leq H_i,V_i \\leq 10^9$\n\n**【说明】**\n\n译自 [BalticOI 2012 Day2 T1. Fireworks in RightAngleles](http://www.boi2012.lv/data/day2/eng/fire.pdf)", "locale": "zh-CN"}}}
{"pid": "P7254", "type": "P", "difficulty": 0, "samples": [["5 4 2\n1111\n2101\n2000\n0100\n0000\n7\n1 5 4 5 3 2 1", "1\n1 2 4 5 3 2 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2012", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2012] 旋律 (Day2)", "background": "", "description": "有一种不为人知的乐器，这种乐器有 $S$ 个孔，可以通过十种不同的方式 $(0$ ～ $9)$ 覆盖这些孔来弹奏出 $N$ 个音符。你不能采取除了这 $N$ 个音符以外的孔的覆盖方式。\n\n现在你要弹奏一首乐曲，但是由于这种乐器每两个音符之间不能有超过 $G$ 个孔的覆盖方式不同，所以你可能不得不弹错一些音符。你希望最小化你弹错音符的数目。", "inputFormat": "第一行三个整数 $N, S, G\\ (0 \\le G < S \\le 100)$，含义如上文所述。\n\n接下来 $N$ 行，每行一个长度为 $S$ 的字符串（只包含数字），表示弹奏这个音符时孔的覆盖方式。\n\n接下来一行一个整数 $L$，表示乐曲中包含的音符的数目。\n\n最后一行 $L$ 个整数，表示乐曲中音符的编号。", "outputFormat": "第一行一个整数，表示你能取到的弹错音符数目的最小值。  \n\n接下来一行 $L$ 个整数，表示你的任意一种构造方案。", "hint": "**【样例解释】**\n\n音符 $1$ 和音符 $5$ 在四个孔上的弹奏方式都不同，所以你不能在弹奏完音符 $1$ 后弹奏音符 $5$。\n\n**【数据范围】**\n\n- 对于 $40\\%$ 的数据，$L \\leq 100$；\n- 对于 $65\\%$ 的数据，$L \\leq 5000$；\n- 对于 $100\\%$ 的数据，$1 \\leq N \\leq 100$，$1 \\le L \\le 10 ^ 5$。\n\n**【说明】**\n\n译自 [BalticOI 2012 Day2 T2. Melody](http://www.boi2012.lv/data/day2/eng/melody.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2012] 旋律 (Day2)", "background": "", "description": "有一种不为人知的乐器，这种乐器有 $S$ 个孔，可以通过十种不同的方式 $(0$ ～ $9)$ 覆盖这些孔来弹奏出 $N$ 个音符。你不能采取除了这 $N$ 个音符以外的孔的覆盖方式。\n\n现在你要弹奏一首乐曲，但是由于这种乐器每两个音符之间不能有超过 $G$ 个孔的覆盖方式不同，所以你可能不得不弹错一些音符。你希望最小化你弹错音符的数目。", "inputFormat": "第一行三个整数 $N, S, G\\ (0 \\le G < S \\le 100)$，含义如上文所述。\n\n接下来 $N$ 行，每行一个长度为 $S$ 的字符串（只包含数字），表示弹奏这个音符时孔的覆盖方式。\n\n接下来一行一个整数 $L$，表示乐曲中包含的音符的数目。\n\n最后一行 $L$ 个整数，表示乐曲中音符的编号。", "outputFormat": "第一行一个整数，表示你能取到的弹错音符数目的最小值。  \n\n接下来一行 $L$ 个整数，表示你的任意一种构造方案。", "hint": "**【样例解释】**\n\n音符 $1$ 和音符 $5$ 在四个孔上的弹奏方式都不同，所以你不能在弹奏完音符 $1$ 后弹奏音符 $5$。\n\n**【数据范围】**\n\n- 对于 $40\\%$ 的数据，$L \\leq 100$；\n- 对于 $65\\%$ 的数据，$L \\leq 5000$；\n- 对于 $100\\%$ 的数据，$1 \\leq N \\leq 100$，$1 \\le L \\le 10 ^ 5$。\n\n**【说明】**\n\n译自 [BalticOI 2012 Day2 T2. Melody](http://www.boi2012.lv/data/day2/eng/melody.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7255", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["2012", "提交答案", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2012] 俄罗斯方块 (Day2)", "background": "", "description": "这是一个和俄罗斯方块较为类似的游戏。游戏中一共有一下几个碎片：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w1ggafuv.png)\n\n游戏有一个 $9 \\times 9$ 的区域。对于每个下落的碎片，你可以指定这个碎片最左边的方块（即图片中做标记的方块）下落的列。如果碎片没有完全落在区域内，游戏结束。此时如果有被方块完整填满的行，这一行的所有方块将被清除，上面的方块则相应向下移动。\n\n游戏一共有 $N$ 个碎片，你需要使尽量多的碎片成功下落。\n\n注意本游戏中碎片不能旋转。", "inputFormat": "输入文件请点击附件下载。\n\n第一行一个整数 $N$，代表游戏共有 $N$ 个碎片。\n\n接下来 $N$ 行每行一个整数，表示下落碎片的编号。\n\n数据保证有解。", "outputFormat": "对于输入文件请提交相应的输出文件。\n\n输出文件最多包含 $N$ 行，每行一个整数，表示该下落的碎片最左边方块落在的列的编号。", "hint": "**【提示】**\n\n每个测试点 $20$ 分。\n\n如果你能使 $A$ 个碎片正常下落，那你能够获得该测试点 $\\dfrac{A}{N}$ 的分数。\n\n**【说明】**\n\n译自 [BalticOI 2012 Day2 T3. Tiny](http://www.boi2012.lv/data/day2/eng/tiny.pdf)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2012] 俄罗斯方块 (Day2)", "background": "", "description": "这是一个和俄罗斯方块较为类似的游戏。游戏中一共有一下几个碎片：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w1ggafuv.png)\n\n游戏有一个 $9 \\times 9$ 的区域。对于每个下落的碎片，你可以指定这个碎片最左边的方块（即图片中做标记的方块）下落的列。如果碎片没有完全落在区域内，游戏结束。此时如果有被方块完整填满的行，这一行的所有方块将被清除，上面的方块则相应向下移动。\n\n游戏一共有 $N$ 个碎片，你需要使尽量多的碎片成功下落。\n\n注意本游戏中碎片不能旋转。", "inputFormat": "输入文件请点击附件下载。\n\n第一行一个整数 $N$，代表游戏共有 $N$ 个碎片。\n\n接下来 $N$ 行每行一个整数，表示下落碎片的编号。\n\n数据保证有解。", "outputFormat": "对于输入文件请提交相应的输出文件。\n\n输出文件最多包含 $N$ 行，每行一个整数，表示该下落的碎片最左边方块落在的列的编号。", "hint": "**【提示】**\n\n每个测试点 $20$ 分。\n\n如果你能使 $A$ 个碎片正常下落，那你能够获得该测试点 $\\dfrac{A}{N}$ 的分数。\n\n**【说明】**\n\n译自 [BalticOI 2012 Day2 T3. Tiny](http://www.boi2012.lv/data/day2/eng/tiny.pdf)", "locale": "zh-CN"}}}
{"pid": "P7257", "type": "P", "difficulty": 1, "samples": [["734 893\n", "437"], ["221 231\n", "132"], ["839 237\n", "938"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "数学", "2009", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #3] FILIP", "background": "", "description": "给你两个十进制正整数 $a, b$，输出将这两个数翻转后的较大数。\n\n**「翻转」在本题中的定义详见「说明 / 提示」部分。**\n\n\n", "inputFormat": "第一行，两个十进制正整数 $a, b$。", "outputFormat": "第一行，$a$ 和 $b$ 翻转后的较大数。", "hint": "#### 「翻转」在本题中的定义\n\n设原数有 $f$ 位，最高位为 $a_1$，第二位为 $a_2$，……，第 $f$ 位为 $a_f$。\n\n那么该数的翻转同样有 $f$ 位，最高位为为 $a_f$，第二位为 $a_{f - 1}$，……，第 $f$ 位为 $a_1$。\n\n#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$100 \\le a, b \\le 999$，$a, b$ 不含 $0$ 或不为 $0$。\n\n#### 说明\n翻译自 [COCI 2009-2010 #3 T1 FILIP](https://hsin.hr/coci/archive/2009_2010/contest3_tasks.pdf)，满分 30，每个测试点 3 分，共 10 个测试点。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #3] FILIP", "background": "", "description": "给你两个十进制正整数 $a, b$，输出将这两个数翻转后的较大数。\n\n**「翻转」在本题中的定义详见「说明 / 提示」部分。**\n\n\n", "inputFormat": "第一行，两个十进制正整数 $a, b$。", "outputFormat": "第一行，$a$ 和 $b$ 翻转后的较大数。", "hint": "#### 「翻转」在本题中的定义\n\n设原数有 $f$ 位，最高位为 $a_1$，第二位为 $a_2$，……，第 $f$ 位为 $a_f$。\n\n那么该数的翻转同样有 $f$ 位，最高位为为 $a_f$，第二位为 $a_{f - 1}$，……，第 $f$ 位为 $a_1$。\n\n#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$100 \\le a, b \\le 999$，$a, b$ 不含 $0$ 或不为 $0$。\n\n#### 说明\n翻译自 [COCI 2009-2010 #3 T1 FILIP](https://hsin.hr/coci/archive/2009_2010/contest3_tasks.pdf)，满分 30，每个测试点 3 分，共 10 个测试点。\n\n", "locale": "zh-CN"}}}
{"pid": "P7258", "type": "P", "difficulty": 2, "samples": [["184 1\n", "180"], ["123450995 1\n", "123451000"], ["182 2\n", "200"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2009", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #3] SLATKISI", "background": "可爱的 Mirko 在糖果店买了很多糖果。", "description": "他不能总是支付准确的金额，所以店主和他达成了协议。\n\n他告诉店主他有的最小的钞票，店主就把他的金额四舍五入到他能支付的最接近的数字。\n\n例如，如果 Mirko 最小的钞票是 $100$ 元，他想买 $150$ 元的糖果，店主就把他的金额四舍五入到 $200$ 元。如果他想买 $149$ 元的糖果，店主就会把他的金额四舍五入到 $100$ 元。\n\n最近，Mirko 怀疑店主想骗他。请你判断店主有没有骗他。\n\nMirko 的妈妈只会给他 $1, 10, 100, 10^3, 10^4, 10^5, \\cdots, 10^9$ 元钞票，他有无限张这些钞票。", "inputFormat": "第一行，两个整数，$c, k$，表示 Mirko 要买的糖果的价格和 Mirko 最小的钞票上的零数，这里的「零数」指的是一个数 $0$ 的个数，在本题中，即 $10^t$ 中的 $t$。", "outputFormat": "第一行，一个整数，$c$ 四舍五入到最接近的 Mirko 可以的支付金额。 ", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le c \\le 10^9$，$0 \\le k \\le 9$。\n\n#### 说明\n翻译自 [COCI 2009-2010 #3 T2 SLATKISI](https://hsin.hr/coci/archive/2009_2010/contest3_tasks.pdf)，满分 50，每个测试点 5 分，共 10 个测试点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #3] SLATKISI", "background": "可爱的 Mirko 在糖果店买了很多糖果。", "description": "他不能总是支付准确的金额，所以店主和他达成了协议。\n\n他告诉店主他有的最小的钞票，店主就把他的金额四舍五入到他能支付的最接近的数字。\n\n例如，如果 Mirko 最小的钞票是 $100$ 元，他想买 $150$ 元的糖果，店主就把他的金额四舍五入到 $200$ 元。如果他想买 $149$ 元的糖果，店主就会把他的金额四舍五入到 $100$ 元。\n\n最近，Mirko 怀疑店主想骗他。请你判断店主有没有骗他。\n\nMirko 的妈妈只会给他 $1, 10, 100, 10^3, 10^4, 10^5, \\cdots, 10^9$ 元钞票，他有无限张这些钞票。", "inputFormat": "第一行，两个整数，$c, k$，表示 Mirko 要买的糖果的价格和 Mirko 最小的钞票上的零数，这里的「零数」指的是一个数 $0$ 的个数，在本题中，即 $10^t$ 中的 $t$。", "outputFormat": "第一行，一个整数，$c$ 四舍五入到最接近的 Mirko 可以的支付金额。 ", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le c \\le 10^9$，$0 \\le k \\le 9$。\n\n#### 说明\n翻译自 [COCI 2009-2010 #3 T2 SLATKISI](https://hsin.hr/coci/archive/2009_2010/contest3_tasks.pdf)，满分 50，每个测试点 5 分，共 10 个测试点。", "locale": "zh-CN"}}}
{"pid": "P7259", "type": "P", "difficulty": 2, "samples": [["5 2\n2 1 2 1 2\n", "2 2 2 1 1\n"], ["9 3\n1 3 3 3 2 2 2 1 1\n", "1 1 1 3 3 3 2 2 2\n"], ["9 77\n11 33 11 77 54 11 25 25 33\n", "11 11 11 33 33 25 25 77 54"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "排序", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #3] SORT", "background": "", "description": "Mirko 是一个伟大的密码破解者。他知道世界上任何密码都可以通过频率分析来破解。\n\n但他完全弄错了什么是频率分析。\n\n他截获了一个敌人的信息。这个信息由 $N$ 个小于等于 $C$ 的数字组成。 \n\nMirko 相信频率分析包括对这个序列进行排序，使频率较高的数字出现在频率较低的数字之前。\n\n给定任何两个数字 $x$ 和 $y$，如果 $x$ 在原始序列中出现的次数大于 $y$ 出现的次数，则 $x$ 出现在 $y$ 之前。如果出现的次数相等，则输入中谁的值出现的早，谁就应该在排序后的序列中出现靠前。\n\n请帮助 Mirko 制作一个「频率排序器」。\n", "inputFormat": "第一行，两个正整数 $N, C$，含义见题目描述。\n\n第二行，$N$ 个正整数 $a_i$，表示消息。", "outputFormat": "第一行，$N$ 个正整数，表示排序后的序列。\n", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^3$，$1 \\le C \\le 10^9$，$1\\le a_i \\le C$。\n\n#### 说明\n翻译自 [COCI 2009-2010 #3 T3 SORT](https://hsin.hr/coci/archive/2009_2010/contest3_tasks.pdf)，满分 70，每个测试点 7 分，共 10 个测试点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #3] SORT", "background": "", "description": "Mirko 是一个伟大的密码破解者。他知道世界上任何密码都可以通过频率分析来破解。\n\n但他完全弄错了什么是频率分析。\n\n他截获了一个敌人的信息。这个信息由 $N$ 个小于等于 $C$ 的数字组成。 \n\nMirko 相信频率分析包括对这个序列进行排序，使频率较高的数字出现在频率较低的数字之前。\n\n给定任何两个数字 $x$ 和 $y$，如果 $x$ 在原始序列中出现的次数大于 $y$ 出现的次数，则 $x$ 出现在 $y$ 之前。如果出现的次数相等，则输入中谁的值出现的早，谁就应该在排序后的序列中出现靠前。\n\n请帮助 Mirko 制作一个「频率排序器」。\n", "inputFormat": "第一行，两个正整数 $N, C$，含义见题目描述。\n\n第二行，$N$ 个正整数 $a_i$，表示消息。", "outputFormat": "第一行，$N$ 个正整数，表示排序后的序列。\n", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^3$，$1 \\le C \\le 10^9$，$1\\le a_i \\le C$。\n\n#### 说明\n翻译自 [COCI 2009-2010 #3 T3 SORT](https://hsin.hr/coci/archive/2009_2010/contest3_tasks.pdf)，满分 70，每个测试点 7 分，共 10 个测试点。", "locale": "zh-CN"}}}
{"pid": "P7260", "type": "P", "difficulty": 3, "samples": [["3 4\n3 1\n2 2\n1 1\n", "2"], ["2 3\n1 23\n2 17\n", "23"], ["3 9\n7 2\n8 3\n3 4\n", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2009", "排序", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #3] RAZGOVOR", "background": "", "description": "可爱村只有一条长长的街道，从东向西延伸，有 $m$ 户人家。每栋房子都有一个单独的房号，从 $1$ 开始到 $m$ 结束。\n\n最近的暴风雪摧毁了大部分电话线，所以市长出资建造了一个新的电话线。Mirko 对这个新的电话网络的普及程度很感兴趣，所以他在一些点上安装了特殊的探测器。\n\n探测器可以检测到两栋房子之间的任何电话，一栋房子在探测器的 **东边**，一栋房子在探测器的 **西边**。\n\n在第一个月结束时，Mirko 撤掉了所有的探测器，现在想知道在这一个月里，可能打过的电话中，**最小** 的电话数量是多少。\n\n\n", "inputFormat": "第一行，两个正整数，$n, m$，分别表示探测器和房屋的数量。\n\n接下来，$n$ 行，每行两个正整数 $P_i$，和 $C_i$，编号为 $i$ 的探测器检测到的位置和电话总数。 我们说，如果且仅当一个探测器在编号为 $P_i$ 和 $P_i+1$ 的房屋之间时，他就在位置 $P_i$ 上。\n\n**同一位置上最多有一个探测器。**", "outputFormat": "输出一个正整数，表示最小的通话次数。\n", "hint": "#### 数据规模及约定\n\n- 对于 $50\\%$ 的数据，$1 \\le n \\le 10^3$，$1 \\le C_i \\le 10^3$，$n < m \\le 10^9$，$1 \\le P_i < M$。\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le C_i \\le 10^9$，$n < m \\le 10^9$，$1 \\le P_i < M$。\n\n#### 说明\n翻译自 [COCI 2009-2010 #3 T4 RAZGOVOR](https://hsin.hr/coci/archive/2009_2010/contest3_tasks.pdf)，满分 100，每个测试点 10 分，共 10 个测试点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #3] RAZGOVOR", "background": "", "description": "可爱村只有一条长长的街道，从东向西延伸，有 $m$ 户人家。每栋房子都有一个单独的房号，从 $1$ 开始到 $m$ 结束。\n\n最近的暴风雪摧毁了大部分电话线，所以市长出资建造了一个新的电话线。Mirko 对这个新的电话网络的普及程度很感兴趣，所以他在一些点上安装了特殊的探测器。\n\n探测器可以检测到两栋房子之间的任何电话，一栋房子在探测器的 **东边**，一栋房子在探测器的 **西边**。\n\n在第一个月结束时，Mirko 撤掉了所有的探测器，现在想知道在这一个月里，可能打过的电话中，**最小** 的电话数量是多少。\n\n\n", "inputFormat": "第一行，两个正整数，$n, m$，分别表示探测器和房屋的数量。\n\n接下来，$n$ 行，每行两个正整数 $P_i$，和 $C_i$，编号为 $i$ 的探测器检测到的位置和电话总数。 我们说，如果且仅当一个探测器在编号为 $P_i$ 和 $P_i+1$ 的房屋之间时，他就在位置 $P_i$ 上。\n\n**同一位置上最多有一个探测器。**", "outputFormat": "输出一个正整数，表示最小的通话次数。\n", "hint": "#### 数据规模及约定\n\n- 对于 $50\\%$ 的数据，$1 \\le n \\le 10^3$，$1 \\le C_i \\le 10^3$，$n < m \\le 10^9$，$1 \\le P_i < M$。\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le C_i \\le 10^9$，$n < m \\le 10^9$，$1 \\le P_i < M$。\n\n#### 说明\n翻译自 [COCI 2009-2010 #3 T4 RAZGOVOR](https://hsin.hr/coci/archive/2009_2010/contest3_tasks.pdf)，满分 100，每个测试点 10 分，共 10 个测试点。", "locale": "zh-CN"}}}
{"pid": "P7261", "type": "P", "difficulty": 5, "samples": [["10 3\n1 2 1 2 1 2 3 2 3 3\n8\n1 2\n1 3\n1 4\n1 5\n2 5\n2 6\n6 9\n7 10\n", "no\nyes 1\nno\nyes 1\nno\nyes 2\nno\nyes 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "莫队", "线段树", "平衡树", "可持久化线段树", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #3] PATULJCI", "background": "", "description": "白雪公主和 $n$ 个小矮人在森林里，当 $n$ 个小矮人在挖矿时，白雪公主在玩电脑。\n\n每天早上，小矮人排成长长的队伍，去矿山挖矿。白雪公主在他们身边跑来跑去，拍下照片上传到她最喜欢的 App 上。\n\n小矮人进入矿区后，白雪公主回到自己的房子里，翻看图片，挑选漂亮的图片。每个小矮人都有一顶彩色的帽子，有 $c$ 种不同的颜色。如果一张照片上有一半以上的帽子是同一种颜色，那就是漂亮的。换句话说，如果图片上有 $k$ 个小矮人，如果大于 $\\dfrac{k}{2}$ 个小矮人有相同颜色的帽子，那就是漂亮的图片。\n\n请求出第 $m$ 张图是否漂亮，如果漂亮，以什么颜色为主。", "inputFormat": "第一行，两个正整数 $n, c$，分别表示小矮人的数量和颜色的数量。\n\n第二行，$1$ 到 $c$ 之间的 $n$ 个整数，表示小矮人帽子的颜色，按照当天早上排队的方式排序。\n\n第三行，一个正整数 $m$，表示图片数量。\n\n接下来，$m$ 行，每行两个正整数 $a$ 和 $b$。每一行都描述了一幅画，上面有从 $a$ 开始一直到 $b$ 的所有小矮人。\n\n\n", "outputFormat": "$m$ 行。对于每张图片，如果白雪公主认为图片不漂亮，则输出 `no`，如果认为漂亮，则输出 `yes` 和 $x$，$x$ 是图片上的主要颜色。", "hint": "#### 数据规模及约定\n\n- 对于 $30\\%$ 的数据，$1 \\le m < 10$，$3 \\le n \\le 3 \\cdot 10^5$，$1 \\le c \\le 10^4$，$1 \\le a \\le b \\le n$。\n- 对于另外 $30\\%$ 的数据，$1 \\le m \\le 10^4$，$3 \\le n \\le 3 \\cdot 10^5$，$1 \\le c < 10$，$1 \\le a \\le b \\le n$。\n- 对于 $100\\%$ 的数据，$1 \\le m \\le 10^4$，$3 \\le n \\le 3 \\cdot 10^5$，$1 \\le c \\le 10^4$，$1 \\le a \\le b \\le n$。\n\n#### 说明\n翻译自 [COCI 2009-2010 #3 T5 PATULJCI](https://hsin.hr/coci/archive/2009_2010/contest3_tasks.pdf)，满分 120，每个测试点 12 分，共 10 个测试点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #3] PATULJCI", "background": "", "description": "白雪公主和 $n$ 个小矮人在森林里，当 $n$ 个小矮人在挖矿时，白雪公主在玩电脑。\n\n每天早上，小矮人排成长长的队伍，去矿山挖矿。白雪公主在他们身边跑来跑去，拍下照片上传到她最喜欢的 App 上。\n\n小矮人进入矿区后，白雪公主回到自己的房子里，翻看图片，挑选漂亮的图片。每个小矮人都有一顶彩色的帽子，有 $c$ 种不同的颜色。如果一张照片上有一半以上的帽子是同一种颜色，那就是漂亮的。换句话说，如果图片上有 $k$ 个小矮人，如果大于 $\\dfrac{k}{2}$ 个小矮人有相同颜色的帽子，那就是漂亮的图片。\n\n请求出第 $m$ 张图是否漂亮，如果漂亮，以什么颜色为主。", "inputFormat": "第一行，两个正整数 $n, c$，分别表示小矮人的数量和颜色的数量。\n\n第二行，$1$ 到 $c$ 之间的 $n$ 个整数，表示小矮人帽子的颜色，按照当天早上排队的方式排序。\n\n第三行，一个正整数 $m$，表示图片数量。\n\n接下来，$m$ 行，每行两个正整数 $a$ 和 $b$。每一行都描述了一幅画，上面有从 $a$ 开始一直到 $b$ 的所有小矮人。\n\n\n", "outputFormat": "$m$ 行。对于每张图片，如果白雪公主认为图片不漂亮，则输出 `no`，如果认为漂亮，则输出 `yes` 和 $x$，$x$ 是图片上的主要颜色。", "hint": "#### 数据规模及约定\n\n- 对于 $30\\%$ 的数据，$1 \\le m < 10$，$3 \\le n \\le 3 \\cdot 10^5$，$1 \\le c \\le 10^4$，$1 \\le a \\le b \\le n$。\n- 对于另外 $30\\%$ 的数据，$1 \\le m \\le 10^4$，$3 \\le n \\le 3 \\cdot 10^5$，$1 \\le c < 10$，$1 \\le a \\le b \\le n$。\n- 对于 $100\\%$ 的数据，$1 \\le m \\le 10^4$，$3 \\le n \\le 3 \\cdot 10^5$，$1 \\le c \\le 10^4$，$1 \\le a \\le b \\le n$。\n\n#### 说明\n翻译自 [COCI 2009-2010 #3 T5 PATULJCI](https://hsin.hr/coci/archive/2009_2010/contest3_tasks.pdf)，满分 120，每个测试点 12 分，共 10 个测试点。", "locale": "zh-CN"}}}
{"pid": "P7262", "type": "P", "difficulty": 2, "samples": [["3 3 v\n.o.\n...\nxxx", "GG"], ["3 3 >\n...\no.x\n...", "GG"], ["3 3 ^\n.o.\n...\nxxx", "OK"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2021"], "title": "Get Your Wish", "background": "![Get Your Wish](https://mivik.gitee.io/image/nurture/get_your_wish.png)\n\n> So, tell me how it felt when you walked on water\n>\n> Did you get your wish?", "description": "Porter 在浅水上完成了他的 MV，但他很快发现了事情不对：他的话筒进水了。\n\nPorter 的话筒内部的关键电子元件可以被看作一个 $n\\times m$ 的二维平面。我们用一张 $n\\times m$ 的字符画来表示 Porter 的话筒内部状况，其中有三种不同的字符：\n\n- `.`：表示空位\n\n- `x`：表示关键电子原件\n\n- `o`：表示水滴\n\n水滴会沿着重力方向一直流动，直到流出边界或者流到电子原件上。当水滴流到任意一个电子原件上时，Porter 的话筒就会坏掉。Porter 慌忙把话筒转过来，改变了话筒内部的重力方向。重力方向用四种字符之一表示：`^v<>`，分别对应上下左右。\n\nPorter 想知道，在这种重力方向下，他的话筒过一会儿会不会 GG。", "inputFormat": "第一行两个正整数和一个字符，分别代表 $n$、$m$ 和重力方向。\n\n接下来 $n$ 行，每行 $m$ 个字符，分别对应代表该点状态。", "outputFormat": "输出一行一个字符串。`GG` 代表 Porter 的话筒会坏掉，`OK` 代表不会。", "hint": "\n### 样例解释\n\n样例一：第一行第二列的水滴向下流到了最后一行第二列的电子原件上，因此话筒坏掉了。\n\n样例二：第二行第一列的水滴向右流到了第二行最后一列的电子原件上，因此话筒坏掉了。\n\n样例三：第一行第二列的水滴直接向上流出话筒，因此 Porter 的话筒不会坏掉。\n\n### 数据范围\n\n对于全部数据，保证 $1\\le n,m\\le 100$，且输入数据合法。\n\nSubtask 1 (10 pts)：话筒中没有 `x`（即电子原件）。\n\nSubtask 2 (10 pts)：话筒中没有 `o`（即水滴）。\n\nSubtask 3 (30 pts)：保证重力方向总是 `v`（向下）。\n\nSubtask 4 (50 pts)：无特殊限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Get Your Wish", "background": "![Get Your Wish](https://mivik.gitee.io/image/nurture/get_your_wish.png)\n\n> So, tell me how it felt when you walked on water\n>\n> Did you get your wish?", "description": "Porter 在浅水上完成了他的 MV，但他很快发现了事情不对：他的话筒进水了。\n\nPorter 的话筒内部的关键电子元件可以被看作一个 $n\\times m$ 的二维平面。我们用一张 $n\\times m$ 的字符画来表示 Porter 的话筒内部状况，其中有三种不同的字符：\n\n- `.`：表示空位\n\n- `x`：表示关键电子原件\n\n- `o`：表示水滴\n\n水滴会沿着重力方向一直流动，直到流出边界或者流到电子原件上。当水滴流到任意一个电子原件上时，Porter 的话筒就会坏掉。Porter 慌忙把话筒转过来，改变了话筒内部的重力方向。重力方向用四种字符之一表示：`^v<>`，分别对应上下左右。\n\nPorter 想知道，在这种重力方向下，他的话筒过一会儿会不会 GG。", "inputFormat": "第一行两个正整数和一个字符，分别代表 $n$、$m$ 和重力方向。\n\n接下来 $n$ 行，每行 $m$ 个字符，分别对应代表该点状态。", "outputFormat": "输出一行一个字符串。`GG` 代表 Porter 的话筒会坏掉，`OK` 代表不会。", "hint": "\n### 样例解释\n\n样例一：第一行第二列的水滴向下流到了最后一行第二列的电子原件上，因此话筒坏掉了。\n\n样例二：第二行第一列的水滴向右流到了第二行最后一列的电子原件上，因此话筒坏掉了。\n\n样例三：第一行第二列的水滴直接向上流出话筒，因此 Porter 的话筒不会坏掉。\n\n### 数据范围\n\n对于全部数据，保证 $1\\le n,m\\le 100$，且输入数据合法。\n\nSubtask 1 (10 pts)：话筒中没有 `x`（即电子原件）。\n\nSubtask 2 (10 pts)：话筒中没有 `o`（即水滴）。\n\nSubtask 3 (30 pts)：保证重力方向总是 `v`（向下）。\n\nSubtask 4 (50 pts)：无特殊限制。\n", "locale": "zh-CN"}}}
{"pid": "P7263", "type": "P", "difficulty": 4, "samples": [["1\n()", "1"], ["3\n()(())", "598946612"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2021", "组合数学"], "title": "Something Comforting", "background": "![Something Comforting](https://mivik.gitee.io/image/nurture/something_comforting.png)\n\n> Cause getting made you want more\n>\n> And hoping made you hurt more\n>\n> Someone tell me\n>\n> Something comforting", "description": "Porter Robinson 花了五年的时间制作了 Something Comforting 这首歌，Mivik 花了五天时间造出了一道和括号序列相关的题。但 Mivik 并不开心，因为他发现他不会造数据了！\n\nMivik 需要随机生成一个 **合法** 的括号序列，于是 Mivik 想了一会，写出了下面的算法：\n\n```cpp\n#include <algorithm>\n#include <string>\n\nstd::string generate(int n) { // 生成一个长度为 n * 2 的括号序列\n\tconst int len = n * 2;\n\tbool arr[len]; // 0 代表左括号，1 代表右括号\n\tfor (int i = 0; i < n; ++i) arr[i] = 0;\n\tfor (int i = n; i < len; ++i) arr[i] = 1;\n\tstd::random_shuffle(arr, arr + len); // 随机打乱这个数组\n\tfor (int i = 0, j, sum = 0; i < len; ) {\n\t\tsum += arr[i]? -1: 1;\n\t\tif (sum < 0) { // 出现了不合法的位置\n\t\t\tfor (j = i + 1; j < len; ++j) {\n\t\t\t\tsum += arr[j]? -1: 1;\n\t\t\t\tif (sum == 0) break;\n\t\t\t}\n\t\t\t// 现在 i 是第一个不合法的位置，j 是 i 后面第一个合法的位置\n\t\t\t// ( ( ) ) ) ) ( ( ( ) ( )\n\t\t\t//         i     j\n\t\t\tfor (int k = i; k <= j; ++k)\n\t\t\t\tarr[k] ^= 1; // 把这段区间全部反转\n\t\t\ti = j + 1;\n\t\t} else ++i;\n\t}\n\tstd::string ret;\n\tfor (int i = 0; i < len; ++i)\n\t\tret += arr[i]? ')': '(';\n\treturn ret;\n}\n```\n\nP.S. 为了给其它语言用户带来做题体验，[这里](https://www.luogu.com.cn/paste/wof8zjn8) 提供了多种语言对该算法的描述。\n\nMivik 十分开心，因为这个算法总能生成合法的括号序列。但不一会儿他就发现这个算法生成的括号序列并不均匀，也就是说，当 $n$ 固定时，所有合法的括号序列出现的概率并不均等。例如，Mivik 发现当 $n=3$ 时，`()()()` 被生成的概率要远大于 `((()))`。\n\n现在 Mivik 给了你一个 $n$ 和一个长度为 $2n$ 的 **合法** 括号序列，假设 `std::random_shuffle` （对于其它语言来说，`shuffle`）能够均匀随机地打乱一个数组，他想问问你这个括号序列通过上文的算法被生成的概率是多少。由于 Mivik 不喜欢小数，你需要输出这个概率对 $998244353$ 取模的结果。如果你不知道如何将一个有理数对质数取模，可以参考 [有理数取模](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "第一行一个整数 $n$，意义同题面。\n\n接下来输入一个长度为 $2n$ 的合法括号序列，意义同题面。", "outputFormat": "输出一行一个整数，代表这个概率对 $998244353$ 取模的结果。", "hint": "\n### 样例解释\n\n样例一：$n$ 为 1 时，无论怎样都只可能会生成 `()` 这一种合法的括号序列，因此概率为 1。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 5\\cdot 10^5$，且输入的括号序列合法。\n\nSubtask 1（20 pts）：保证 $1\\le n\\le 5$。\n\nSubtask 2（30 pts）：保证 $1\\le n\\le 1000$。\n\nSubtask 3（50 pts）：无特殊限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Something Comforting", "background": "![Something Comforting](https://mivik.gitee.io/image/nurture/something_comforting.png)\n\n> Cause getting made you want more\n>\n> And hoping made you hurt more\n>\n> Someone tell me\n>\n> Something comforting", "description": "Porter Robinson 花了五年的时间制作了 Something Comforting 这首歌，Mivik 花了五天时间造出了一道和括号序列相关的题。但 Mivik 并不开心，因为他发现他不会造数据了！\n\nMivik 需要随机生成一个 **合法** 的括号序列，于是 Mivik 想了一会，写出了下面的算法：\n\n```cpp\n#include <algorithm>\n#include <string>\n\nstd::string generate(int n) { // 生成一个长度为 n * 2 的括号序列\n\tconst int len = n * 2;\n\tbool arr[len]; // 0 代表左括号，1 代表右括号\n\tfor (int i = 0; i < n; ++i) arr[i] = 0;\n\tfor (int i = n; i < len; ++i) arr[i] = 1;\n\tstd::random_shuffle(arr, arr + len); // 随机打乱这个数组\n\tfor (int i = 0, j, sum = 0; i < len; ) {\n\t\tsum += arr[i]? -1: 1;\n\t\tif (sum < 0) { // 出现了不合法的位置\n\t\t\tfor (j = i + 1; j < len; ++j) {\n\t\t\t\tsum += arr[j]? -1: 1;\n\t\t\t\tif (sum == 0) break;\n\t\t\t}\n\t\t\t// 现在 i 是第一个不合法的位置，j 是 i 后面第一个合法的位置\n\t\t\t// ( ( ) ) ) ) ( ( ( ) ( )\n\t\t\t//         i     j\n\t\t\tfor (int k = i; k <= j; ++k)\n\t\t\t\tarr[k] ^= 1; // 把这段区间全部反转\n\t\t\ti = j + 1;\n\t\t} else ++i;\n\t}\n\tstd::string ret;\n\tfor (int i = 0; i < len; ++i)\n\t\tret += arr[i]? ')': '(';\n\treturn ret;\n}\n```\n\nP.S. 为了给其它语言用户带来做题体验，[这里](https://www.luogu.com.cn/paste/wof8zjn8) 提供了多种语言对该算法的描述。\n\nMivik 十分开心，因为这个算法总能生成合法的括号序列。但不一会儿他就发现这个算法生成的括号序列并不均匀，也就是说，当 $n$ 固定时，所有合法的括号序列出现的概率并不均等。例如，Mivik 发现当 $n=3$ 时，`()()()` 被生成的概率要远大于 `((()))`。\n\n现在 Mivik 给了你一个 $n$ 和一个长度为 $2n$ 的 **合法** 括号序列，假设 `std::random_shuffle` （对于其它语言来说，`shuffle`）能够均匀随机地打乱一个数组，他想问问你这个括号序列通过上文的算法被生成的概率是多少。由于 Mivik 不喜欢小数，你需要输出这个概率对 $998244353$ 取模的结果。如果你不知道如何将一个有理数对质数取模，可以参考 [有理数取模](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "第一行一个整数 $n$，意义同题面。\n\n接下来输入一个长度为 $2n$ 的合法括号序列，意义同题面。", "outputFormat": "输出一行一个整数，代表这个概率对 $998244353$ 取模的结果。", "hint": "\n### 样例解释\n\n样例一：$n$ 为 1 时，无论怎样都只可能会生成 `()` 这一种合法的括号序列，因此概率为 1。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 5\\cdot 10^5$，且输入的括号序列合法。\n\nSubtask 1（20 pts）：保证 $1\\le n\\le 5$。\n\nSubtask 2（30 pts）：保证 $1\\le n\\le 1000$。\n\nSubtask 3（50 pts）：无特殊限制。\n", "locale": "zh-CN"}}}
{"pid": "P7264", "type": "P", "difficulty": 5, "samples": [["0\n0 0\n0 2", "2\n"], ["3\n0 0\n0 2\n1 2\n4 2\n3 4", "13\n110"], ["0\n12 34\n3 100", "85\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["递归", "2021"], "title": "Mirror", "background": "![Mirror](https://mivik.gitee.io/image/nurture/mirror.png)\n\n> And it’s not the voice of all the others\n>\n> You’ve only said it to yourself\n>\n> I know what you want from me, from me\n>\n> I know what you’re thinking", "description": "> Porter Robinson: We all have these avatars that we give to our critical inner voices - we might imagine a scornful parent telling us we’ll fail, or a critic telling us our work comes up short, or a society telling us that we aren’t good enough - it’s about recognizing that most of this criticism is self-inflicted.\n\nMivik 在镜中看见了自己的 Inner Voice ——不过是在一个镜子般对称的迷宫中。这个迷宫很特殊：它有无穷多行和无穷多列，行和列都从 $0$ 开始标号。一个格子 $(i,j)$ 能通过（没有障碍）当且仅当 $(i\\&j)=0$，其中 $\\&$ 指按位与运算（Bitwise And，[百度百科](https://baike.baidu.com/item/%E6%8C%89%E4%BD%8D%E4%B8%8E/9601818)）。下图给出了这个迷宫的 $0\\sim63$ 行和 $0\\sim 63$ 列的图像：\n\n![迷宫](https://cdn.luogu.com.cn/upload/image_hosting/das5c73w.png)\n\nMivik 想抓到并消灭那个给予自己负面声音的 Inner Voice，但他找不到路了。Mivik 和 Inner Voice 最初处在迷宫中的两点。Mivik 想知道，在 Mivik 的 Inner Voice 一直不移动的情况下，他至少需要走过多少个方格才能抓到他的 Inner Voice（Mivik 的起始格不算）。\n\n但是... 游戏并不会像 Mivik 想象的一样简单。邪恶的 ggy 在这个迷宫中的某些格子布下了许多炸弹，Mivik 需要拆除它们才能踏上这些格子。Mivik 需要你告诉他，在他走过的方格数最少的情况下，他至少需要拆除哪些炸弹。\n\n**请注意炸弹可能会重合，而你只有拆除一个格子上的所有炸弹才能通过这个格子。保障炸弹不与起点重合。**", "inputFormat": "第一行一个整数 $n$，代表 ggy 设下的炸弹个数。\n\n接下来 $n$ 行，**其中的**第 $i$ 行两个非负整数，代表 $i$ 号炸弹的坐标（从 1 开始编号）。\n\n接下来一行两个非负整数 $sx$ 和 $sy$，代表 Mivik 位于哪一行哪一列。\n\n接下来一行两个非负整数 $ex$ 和 $ey$，代表 Mivik 的 Inner Voice 位于哪一行哪一列。", "outputFormat": "第一行一个整数，代表 Mivik 至少需要走少格才能抓到他的 Inner Voice。\n\n接下来一行，给出一个长度为 $n$ 的 01 串，第 $i$ 个字符为 `1` 代表 Mivik 必须拆除第 $i$ 号炸弹，`0` 代表不需要。", "hint": "### 样例解释\n\n样例一：显然由于没有任何炸弹，Mivik 向右走两格就能抓到他的 Inner Voice。\n\n样例二：Mivik 的最短路径如图所示：\n\n![路径](https://cdn.luogu.com.cn/upload/image_hosting/mg0hmhgs.png)\n\n其中，图片左上角为 $(0,0)$，蓝色代表 Mivik 的起始位置，绿色代表 Inner Voice 的位置，红色代表 Mivik 的最短路径，黄色代表炸弹，橙色（其实是黄色 + 红色）代表 Mivik 必须拆除的炸弹。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 2\\cdot 10^5$，$(sx,sy)\\ne(ex,ey)$，并保证对于给出的任何坐标 $(x,y)$ 都有 $x\\&y=0$ 且 $0\\le x,y\\le 10^{18}$。\n\nSubtask 1 (10 pts)：保证 Mivik 可以直线（只向 上/下/左/右 走）抓到他的 Inner Voice。\n\nSubtask 2 (15 pts)：保证 $sx=sy=0$。\n\nSubtask 3 (20 pts)：保证 $0\\le(\\text{任意 x,y 坐标})\\le 100$。\n\nSubtask 4 (25 pts)：保证 $n=0$。\n\nSubtask 5 (30 pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Mirror", "background": "![Mirror](https://mivik.gitee.io/image/nurture/mirror.png)\n\n> And it’s not the voice of all the others\n>\n> You’ve only said it to yourself\n>\n> I know what you want from me, from me\n>\n> I know what you’re thinking", "description": "> Porter Robinson: We all have these avatars that we give to our critical inner voices - we might imagine a scornful parent telling us we’ll fail, or a critic telling us our work comes up short, or a society telling us that we aren’t good enough - it’s about recognizing that most of this criticism is self-inflicted.\n\nMivik 在镜中看见了自己的 Inner Voice ——不过是在一个镜子般对称的迷宫中。这个迷宫很特殊：它有无穷多行和无穷多列，行和列都从 $0$ 开始标号。一个格子 $(i,j)$ 能通过（没有障碍）当且仅当 $(i\\&j)=0$，其中 $\\&$ 指按位与运算（Bitwise And，[百度百科](https://baike.baidu.com/item/%E6%8C%89%E4%BD%8D%E4%B8%8E/9601818)）。下图给出了这个迷宫的 $0\\sim63$ 行和 $0\\sim 63$ 列的图像：\n\n![迷宫](https://cdn.luogu.com.cn/upload/image_hosting/das5c73w.png)\n\nMivik 想抓到并消灭那个给予自己负面声音的 Inner Voice，但他找不到路了。Mivik 和 Inner Voice 最初处在迷宫中的两点。Mivik 想知道，在 Mivik 的 Inner Voice 一直不移动的情况下，他至少需要走过多少个方格才能抓到他的 Inner Voice（Mivik 的起始格不算）。\n\n但是... 游戏并不会像 Mivik 想象的一样简单。邪恶的 ggy 在这个迷宫中的某些格子布下了许多炸弹，Mivik 需要拆除它们才能踏上这些格子。Mivik 需要你告诉他，在他走过的方格数最少的情况下，他至少需要拆除哪些炸弹。\n\n**请注意炸弹可能会重合，而你只有拆除一个格子上的所有炸弹才能通过这个格子。保障炸弹不与起点重合。**", "inputFormat": "第一行一个整数 $n$，代表 ggy 设下的炸弹个数。\n\n接下来 $n$ 行，**其中的**第 $i$ 行两个非负整数，代表 $i$ 号炸弹的坐标（从 1 开始编号）。\n\n接下来一行两个非负整数 $sx$ 和 $sy$，代表 Mivik 位于哪一行哪一列。\n\n接下来一行两个非负整数 $ex$ 和 $ey$，代表 Mivik 的 Inner Voice 位于哪一行哪一列。", "outputFormat": "第一行一个整数，代表 Mivik 至少需要走少格才能抓到他的 Inner Voice。\n\n接下来一行，给出一个长度为 $n$ 的 01 串，第 $i$ 个字符为 `1` 代表 Mivik 必须拆除第 $i$ 号炸弹，`0` 代表不需要。", "hint": "### 样例解释\n\n样例一：显然由于没有任何炸弹，Mivik 向右走两格就能抓到他的 Inner Voice。\n\n样例二：Mivik 的最短路径如图所示：\n\n![路径](https://cdn.luogu.com.cn/upload/image_hosting/mg0hmhgs.png)\n\n其中，图片左上角为 $(0,0)$，蓝色代表 Mivik 的起始位置，绿色代表 Inner Voice 的位置，红色代表 Mivik 的最短路径，黄色代表炸弹，橙色（其实是黄色 + 红色）代表 Mivik 必须拆除的炸弹。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 2\\cdot 10^5$，$(sx,sy)\\ne(ex,ey)$，并保证对于给出的任何坐标 $(x,y)$ 都有 $x\\&y=0$ 且 $0\\le x,y\\le 10^{18}$。\n\nSubtask 1 (10 pts)：保证 Mivik 可以直线（只向 上/下/左/右 走）抓到他的 Inner Voice。\n\nSubtask 2 (15 pts)：保证 $sx=sy=0$。\n\nSubtask 3 (20 pts)：保证 $0\\le(\\text{任意 x,y 坐标})\\le 100$。\n\nSubtask 4 (25 pts)：保证 $n=0$。\n\nSubtask 5 (30 pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P7265", "type": "P", "difficulty": 7, "samples": [["2 0", "3"], ["3 2", "13\n8\n6"], ["10 0", "83728116"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "O2优化", "快速数论变换 NTT"], "title": "Look At The Sky", "background": "![Look At The Sky](https://mivik.gitee.io/image/nurture/look_at_the_sky.jpeg)\n\n> Look at the sky, I'm still here\n>\n> I'll be alive next year\n>\n> I can make something good, oh\n>\n> Something good\n\n本题加强版：[U148588](https://www.luogu.com.cn/problem/U148588)", "description": "Mivik 又把 $(x+y)^2$ 当成 $(x^2+y^2)$ 来算了！蒟蒻的他望向天空，看见朵朵白云飘散又融合，忽然来了灵感，写下了一个序列 $S$ 的 $k$ 阶平均数的定义：\n$$\navg_k(S)=\\frac{\\sum_{i=1}^{|S|}{S_i^k}}{\\left(\\sum_{i=1}^{|S|}S_i\\right)^k}\n$$\nMivik 想起 2020 年发生的一切，对他而言很重要的一共有 $n$ 件。例如，举办了自己的第一场比赛、见证了 Porter Robinson 时隔一年后重新在音乐界活跃、和那个人相遇... 其中有一些事件之间相互有联系，也就是说它们形成了一张无向图。Mivik 把这个无向图的所有极大连通块的大小依次写在了一张白纸上，认为这代表了他 2020 年所经历的一切。或美好、或悲伤，Mivik 现在把这张白纸折成了纸飞机准备放飞它。不过在此之前，Mivik 想要求一下这个白纸上的数的 $k$ 阶平均数，并作为 2020 年的纪念记录在日记本上。\n\n可惜的是，Mivik 的记性不太好：他只记得一共发生了 $n$ 件大事，但却记不清它们之间的关系了。Mivik 干脆让你求出在所有可能的情况下，这个白纸上的数的 $k$ 阶平均数之和。实际上，Mivik 并不在意 $k$ 是什么，他只在意最终的答案写在日记本上是否美观，于是他干脆让你对所有 $k\\in [0,K]$ 算出上面的值，这样他好选出一个。\n\n两种情况本质不同，当且仅当存在两件事情，它们在一种情况中没有联系而在另一种情况中有。\n\n形式化题意：记一张无向图的连通块集合 $f(G)$ 为这张图所有极大连通块的大小形成的任意顺序的序列，要求对所有 $k\\in [0,K]$ 求：\n$$\n\\sum_{G\\in S(n)}\\frac{\\sum_{i=1}^{|f(G)|}{f(G)_i^k}}{\\left(\\sum_{i=1}^{|f(G)|}f(G)_i\\right)^k}\n$$\n$S(n)$ 为所有大小为 $n$ 的无向图形成的集合。答案对 $998244353$ 取模。如果你不知道如何将一个有理数对质数取模，可以参考 [有理数取模](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "一行两个正整数，代表 $n$ 和 $K$，意义同题面。", "outputFormat": "$K+1$ 行，第 $i$ 行一个整数，代表 $k=i-1$ 时的答案。", "hint": "\n### 样例解释\n\n样例一：两个点的无向图只有两种，即两个点之间有边和无边，那么 $k=0$ 时的答案为 $\\frac{1^0+1^0}{(1+1)^0}+\\frac{2^0}{(2)^0}=1+2=3$。\n\n样例二：三个点的无向图有以下 8 种：\n\n![样例二](https://cdn.luogu.com.cn/upload/image_hosting/bu2h64fw.png)\n\n$k=0$ 时，答案为 $\\frac{1^0+1^0+1^0}{(1+1+1)^0}+3\\times\\frac{1^0+2^0}{(1+2)^0}+4\\times\\frac{3^0}{(3)^0}=3+3\\times2+4\\times1=13$；\n\n$k=1$ 时，答案为 $\\frac{1^1+1^1+1^1}{(1+1+1)^1}+3\\times\\frac{1^1+2^1}{(1+2)^1}+4\\times\\frac{3^1}{(3)^1}=1+3\\times1+4\\times1=8$；\n\n$k=2$ 时，答案为 $\\frac{1^2+1^2+1^2}{(1+1+1)^2}+3\\times\\frac{1^2+2^2}{(1+2)^2}+4\\times\\frac{3^2}{(3)^2}=\\frac13+3\\times\\frac59+4\\times1=6$。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 2\\cdot10^5$，$0\\le K\\le 5000$。\n\nSubtask 1 (5 pts)：保证 $n=1$。\n\nSubtask 2 (10 pts)：保证 $n=2$。\n\nSubtask 3 (25 pts)：保证 $K=0$。\n\nSubtask 4 (25 pts)：保证 $0\\le K\\le 10$。\n\nSubtask 5 (35 pts)：无特殊限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Look At The Sky", "background": "![Look At The Sky](https://mivik.gitee.io/image/nurture/look_at_the_sky.jpeg)\n\n> Look at the sky, I'm still here\n>\n> I'll be alive next year\n>\n> I can make something good, oh\n>\n> Something good\n\n本题加强版：[U148588](https://www.luogu.com.cn/problem/U148588)", "description": "Mivik 又把 $(x+y)^2$ 当成 $(x^2+y^2)$ 来算了！蒟蒻的他望向天空，看见朵朵白云飘散又融合，忽然来了灵感，写下了一个序列 $S$ 的 $k$ 阶平均数的定义：\n$$\navg_k(S)=\\frac{\\sum_{i=1}^{|S|}{S_i^k}}{\\left(\\sum_{i=1}^{|S|}S_i\\right)^k}\n$$\nMivik 想起 2020 年发生的一切，对他而言很重要的一共有 $n$ 件。例如，举办了自己的第一场比赛、见证了 Porter Robinson 时隔一年后重新在音乐界活跃、和那个人相遇... 其中有一些事件之间相互有联系，也就是说它们形成了一张无向图。Mivik 把这个无向图的所有极大连通块的大小依次写在了一张白纸上，认为这代表了他 2020 年所经历的一切。或美好、或悲伤，Mivik 现在把这张白纸折成了纸飞机准备放飞它。不过在此之前，Mivik 想要求一下这个白纸上的数的 $k$ 阶平均数，并作为 2020 年的纪念记录在日记本上。\n\n可惜的是，Mivik 的记性不太好：他只记得一共发生了 $n$ 件大事，但却记不清它们之间的关系了。Mivik 干脆让你求出在所有可能的情况下，这个白纸上的数的 $k$ 阶平均数之和。实际上，Mivik 并不在意 $k$ 是什么，他只在意最终的答案写在日记本上是否美观，于是他干脆让你对所有 $k\\in [0,K]$ 算出上面的值，这样他好选出一个。\n\n两种情况本质不同，当且仅当存在两件事情，它们在一种情况中没有联系而在另一种情况中有。\n\n形式化题意：记一张无向图的连通块集合 $f(G)$ 为这张图所有极大连通块的大小形成的任意顺序的序列，要求对所有 $k\\in [0,K]$ 求：\n$$\n\\sum_{G\\in S(n)}\\frac{\\sum_{i=1}^{|f(G)|}{f(G)_i^k}}{\\left(\\sum_{i=1}^{|f(G)|}f(G)_i\\right)^k}\n$$\n$S(n)$ 为所有大小为 $n$ 的无向图形成的集合。答案对 $998244353$ 取模。如果你不知道如何将一个有理数对质数取模，可以参考 [有理数取模](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "一行两个正整数，代表 $n$ 和 $K$，意义同题面。", "outputFormat": "$K+1$ 行，第 $i$ 行一个整数，代表 $k=i-1$ 时的答案。", "hint": "\n### 样例解释\n\n样例一：两个点的无向图只有两种，即两个点之间有边和无边，那么 $k=0$ 时的答案为 $\\frac{1^0+1^0}{(1+1)^0}+\\frac{2^0}{(2)^0}=1+2=3$。\n\n样例二：三个点的无向图有以下 8 种：\n\n![样例二](https://cdn.luogu.com.cn/upload/image_hosting/bu2h64fw.png)\n\n$k=0$ 时，答案为 $\\frac{1^0+1^0+1^0}{(1+1+1)^0}+3\\times\\frac{1^0+2^0}{(1+2)^0}+4\\times\\frac{3^0}{(3)^0}=3+3\\times2+4\\times1=13$；\n\n$k=1$ 时，答案为 $\\frac{1^1+1^1+1^1}{(1+1+1)^1}+3\\times\\frac{1^1+2^1}{(1+2)^1}+4\\times\\frac{3^1}{(3)^1}=1+3\\times1+4\\times1=8$；\n\n$k=2$ 时，答案为 $\\frac{1^2+1^2+1^2}{(1+1+1)^2}+3\\times\\frac{1^2+2^2}{(1+2)^2}+4\\times\\frac{3^2}{(3)^2}=\\frac13+3\\times\\frac59+4\\times1=6$。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 2\\cdot10^5$，$0\\le K\\le 5000$。\n\nSubtask 1 (5 pts)：保证 $n=1$。\n\nSubtask 2 (10 pts)：保证 $n=2$。\n\nSubtask 3 (25 pts)：保证 $K=0$。\n\nSubtask 4 (25 pts)：保证 $0\\le K\\le 10$。\n\nSubtask 5 (35 pts)：无特殊限制。\n", "locale": "zh-CN"}}}
{"pid": "P7266", "type": "P", "difficulty": 3, "samples": [["3\n1 2 3\n3 2 2 1\n4 2 8 0 3\n5 3 1 2\n3 1 4", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2000", "BalticOI（波罗的海）"], "title": "[BalticOI 2000] Honeycomb Problem", "background": "", "description": "如下图，是一个边长为 $3$ 的蜂窝图，每个点有点权：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/71c4lcqk.png)\n\n现在要从上面一行的某一点到最下面的一行某一点，每次只可以到达左下角的点和右下角的点，您最多可以交换选定的一行中的两个点的数值。\n\n求通过交换，从上面一行的某一点到最下面的一行某一点的点权之和的最大值是多少。", "inputFormat": "第一行一个整数 $n$ 代表蜂窝图的边长。     \n接下来 $2n-1$ 行每行若干个整数代表一个蜂窝图。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 样例说明\n\n对于样例 $1$，交换第四行的 $5$ 和 $1$，然后我们就可以得到一条点权之和最大的路径：\n\n$$3 \\to 2 \\to 8 \\to 5 \\to 4$$\n\n最大值为 $22$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 99$，$0 \\le $ 蜂窝图中的每个图 $\\le 99$。\n\n#### 说明\n\n翻译自 [BalticOI 2000 Day1 A Honeycomb Problem](https://boi.cses.fi/files/boi2000_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2000] Honeycomb Problem", "background": "", "description": "如下图，是一个边长为 $3$ 的蜂窝图，每个点有点权：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/71c4lcqk.png)\n\n现在要从上面一行的某一点到最下面的一行某一点，每次只可以到达左下角的点和右下角的点，您最多可以交换选定的一行中的两个点的数值。\n\n求通过交换，从上面一行的某一点到最下面的一行某一点的点权之和的最大值是多少。", "inputFormat": "第一行一个整数 $n$ 代表蜂窝图的边长。     \n接下来 $2n-1$ 行每行若干个整数代表一个蜂窝图。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 样例说明\n\n对于样例 $1$，交换第四行的 $5$ 和 $1$，然后我们就可以得到一条点权之和最大的路径：\n\n$$3 \\to 2 \\to 8 \\to 5 \\to 4$$\n\n最大值为 $22$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 99$，$0 \\le $ 蜂窝图中的每个图 $\\le 99$。\n\n#### 说明\n\n翻译自 [BalticOI 2000 Day1 A Honeycomb Problem](https://boi.cses.fi/files/boi2000_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7267", "type": "P", "difficulty": 0, "samples": [["5\n0017\n0250\n0400\n0201\n0002", "3 1 0 2 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2000", "BalticOI（波罗的海）"], "title": "[BalticOI 2000] Time Zones", "background": "", "description": "给定一个整数 $n$，现在将世界划分为 $n$ 个时区，分别编号为第 $0$ 时区到第 $n-1$ 时区，您在第 $0$ 时区。现在有 $n$ 个地方发来的一些时间，用 $hh$ 和 $mm$ 表示，代表小时和分钟。\n\n保证 $0 \\le hh \\le n-1$，$0 \\le mm \\le 59$。\n\n发来时间中间要跨时区，跨过一个时区 $hh$ 就要变化 $1$，因此最终第 $0$ 时区得到的时间信息是最后跨时区进行加减后的结果，跨时区之后不能使得 $hh$ 超出 $[0,n-1]$ 的范围。\n\n求这 $n$ 个时间信息分别来自哪几个时区。", "inputFormat": "第一行一个整数 $n$ 代表时区数和时间消息数。     \n接下来 $n$ 行每行两个整数 $hh$ 和 $mm$ 代表一个时间消息，注意 $hh$ 和 $mm$ 都要用两位整数的形式表示。    \n比如 $hh=5$，$mm=6$ 最终表示结果就是 $0506$。", "outputFormat": "一行 $n$ 个整数代表每个时间消息来自哪个时区。", "hint": "#### 样例说明\n\n注意样例 $1$ 的第 $3$ 个数据，该时间消息必须来自第 $0$ 时区，因为其他时区的时间消息到第 $0$ 时区都要至少经过 $1$ 小时，$hh$ 最小值为 $5$，就超过了 $[0,n-1]$ 的范围。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$5 \\le n \\le 60$，$0 \\le hh \\le n-1$，$0 \\le mm \\le 59$。\n\n#### 说明\n\n翻译自 [BalticOI 2000 Day1 B Time Zones](https://boi.cses.fi/files/boi2000_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2000] Time Zones", "background": "", "description": "给定一个整数 $n$，现在将世界划分为 $n$ 个时区，分别编号为第 $0$ 时区到第 $n-1$ 时区，您在第 $0$ 时区。现在有 $n$ 个地方发来的一些时间，用 $hh$ 和 $mm$ 表示，代表小时和分钟。\n\n保证 $0 \\le hh \\le n-1$，$0 \\le mm \\le 59$。\n\n发来时间中间要跨时区，跨过一个时区 $hh$ 就要变化 $1$，因此最终第 $0$ 时区得到的时间信息是最后跨时区进行加减后的结果，跨时区之后不能使得 $hh$ 超出 $[0,n-1]$ 的范围。\n\n求这 $n$ 个时间信息分别来自哪几个时区。", "inputFormat": "第一行一个整数 $n$ 代表时区数和时间消息数。     \n接下来 $n$ 行每行两个整数 $hh$ 和 $mm$ 代表一个时间消息，注意 $hh$ 和 $mm$ 都要用两位整数的形式表示。    \n比如 $hh=5$，$mm=6$ 最终表示结果就是 $0506$。", "outputFormat": "一行 $n$ 个整数代表每个时间消息来自哪个时区。", "hint": "#### 样例说明\n\n注意样例 $1$ 的第 $3$ 个数据，该时间消息必须来自第 $0$ 时区，因为其他时区的时间消息到第 $0$ 时区都要至少经过 $1$ 小时，$hh$ 最小值为 $5$，就超过了 $[0,n-1]$ 的范围。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$5 \\le n \\le 60$，$0 \\le hh \\le n-1$，$0 \\le mm \\le 59$。\n\n#### 说明\n\n翻译自 [BalticOI 2000 Day1 B Time Zones](https://boi.cses.fi/files/boi2000_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7268", "type": "P", "difficulty": 0, "samples": [["6\n0 0 0 1 1 1\n0 0 0 0 1 0\n0 0 0 1 1 1\n0 0 0 0 0 0\n0 0 1 1 1 1\n0 0 0 1 0 1", "6\n11 E\n16 NWN\n17 SE\n27 S\n28 NWWSS\n29 S"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2000", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2000] Electronical Plate", "background": "", "description": "给定一个 $(n-1) \\times (n-1)$ 的网格，两条直线的交点有一个节点，则这个网格有 $n \\times n$ 个节点，从左往右，从上往下，这些节点依次编号为 $1$ 到 $n^2$。\n\n这些节点中有一些节点被称为「电源」，现在要连一些电路，要求以电源为起点，连向其他节点，要求不能经过其他电源，终点为网格上下左右四个边缘上的节点。\n\n比如说下面这个图，黑色的为电源，白色的为普通节点：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oxg2y2aq.png)\n\n因为有一些电源就在边缘上，我们不需要进行连接。有一种可行解即为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/th4jbsdg.png)\n\n如果有多组解，找出其中一组即可。", "inputFormat": "第一行一个整数 $n$ 代表网格的大小。     \n接下来 $n$ 行每行 $n$ 个整数代表每个节点，$0$ 或者 $1$。       \n$0$ 代表这个节点是普通节点，$1$ 代表这个节点是电源。", "outputFormat": "第一行一个整数 $k$ 代表至少需要多少个电源要连电线。（有一些在边缘的电源不需要连电线）      \n接下来 $k$ 行，每行首先第一个整数代表要连电线的电源的编号，接下来一个字符串代表电源要把电线连向边缘的路线，向左输出 `W`，向右输出 `E`，向上输出 `N`，向下输出 `S`，电源按照编号从小到大输出。        \n如果有多解，输出一组即可。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$3 \\le n \\le 15$。\n\n**本题使用 Special Judge。**\n\n感谢 spj 提供者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n#### 说明\n\n翻译自 [BalticOI 2000 Day1 C Electronical Plate](https://boi.cses.fi/files/boi2000_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2000] Electronical Plate", "background": "", "description": "给定一个 $(n-1) \\times (n-1)$ 的网格，两条直线的交点有一个节点，则这个网格有 $n \\times n$ 个节点，从左往右，从上往下，这些节点依次编号为 $1$ 到 $n^2$。\n\n这些节点中有一些节点被称为「电源」，现在要连一些电路，要求以电源为起点，连向其他节点，要求不能经过其他电源，终点为网格上下左右四个边缘上的节点。\n\n比如说下面这个图，黑色的为电源，白色的为普通节点：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oxg2y2aq.png)\n\n因为有一些电源就在边缘上，我们不需要进行连接。有一种可行解即为：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/th4jbsdg.png)\n\n如果有多组解，找出其中一组即可。", "inputFormat": "第一行一个整数 $n$ 代表网格的大小。     \n接下来 $n$ 行每行 $n$ 个整数代表每个节点，$0$ 或者 $1$。       \n$0$ 代表这个节点是普通节点，$1$ 代表这个节点是电源。", "outputFormat": "第一行一个整数 $k$ 代表至少需要多少个电源要连电线。（有一些在边缘的电源不需要连电线）      \n接下来 $k$ 行，每行首先第一个整数代表要连电线的电源的编号，接下来一个字符串代表电源要把电线连向边缘的路线，向左输出 `W`，向右输出 `E`，向上输出 `N`，向下输出 `S`，电源按照编号从小到大输出。        \n如果有多解，输出一组即可。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$3 \\le n \\le 15$。\n\n**本题使用 Special Judge。**\n\n感谢 spj 提供者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n#### 说明\n\n翻译自 [BalticOI 2000 Day1 C Electronical Plate](https://boi.cses.fi/files/boi2000_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7269", "type": "P", "difficulty": 2, "samples": [["8 2\n(((((])] ", "1\n3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "字符串", "2005", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2005] Magic Parenthesis (Day1)", "background": "合法括号串的定义：\n\n- `()` 是合法的；\n- 如果 `A` 是合法的，那么 `(A)` 是合法的；\n- 如果 `A` 和 `B` 是合法的，那么 `AB` 是合法的。", "description": "给定一个长为 $N$ 的字符串 $S$，由 `(`，`)` 和 `]` 组成。\n\n整个字符串中有 $M$ 个 `]`，其他全为左右括号。\n\n现在得知可以用若干个 `)` 来替换 `]`，求一种通过替换 $S$ 中的 `]` 得到合法括号串的做法。", "inputFormat": "第一行两个整数 $N,M$ 代表字符串的长度与 `]` 的个数。   \n接下来有若干行，每行最多 $72$ 个字符，总计 $N$ 个字符，代表字符串 $S$。", "outputFormat": "如果无解，输出 `0` 并结束程序。       \n如果有解，首先输出一个 `1`，然后接下来 $M$ 行每行一个整数代表每一个 `]` 要替换多少成个 `)`。", "hint": "#### 样例说明\n\n对于样例 $1$，按照输入替换后得到的 $S$ 为 `((((()))))`，为合法括号串。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^7$，$1 \\le M \\le 5 \\times 10^6$，$M \\le N$。\n\n**本题使用 Special Judge。**\n\n感谢 spj 提供者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n#### 说明\n\n翻译自 [BalticOI 2005 Day1 B Magic Parenthesis](https://boi.cses.fi/files/boi2005_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2005] Magic Parenthesis (Day1)", "background": "合法括号串的定义：\n\n- `()` 是合法的；\n- 如果 `A` 是合法的，那么 `(A)` 是合法的；\n- 如果 `A` 和 `B` 是合法的，那么 `AB` 是合法的。", "description": "给定一个长为 $N$ 的字符串 $S$，由 `(`，`)` 和 `]` 组成。\n\n整个字符串中有 $M$ 个 `]`，其他全为左右括号。\n\n现在得知可以用若干个 `)` 来替换 `]`，求一种通过替换 $S$ 中的 `]` 得到合法括号串的做法。", "inputFormat": "第一行两个整数 $N,M$ 代表字符串的长度与 `]` 的个数。   \n接下来有若干行，每行最多 $72$ 个字符，总计 $N$ 个字符，代表字符串 $S$。", "outputFormat": "如果无解，输出 `0` 并结束程序。       \n如果有解，首先输出一个 `1`，然后接下来 $M$ 行每行一个整数代表每一个 `]` 要替换多少成个 `)`。", "hint": "#### 样例说明\n\n对于样例 $1$，按照输入替换后得到的 $S$ 为 `((((()))))`，为合法括号串。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^7$，$1 \\le M \\le 5 \\times 10^6$，$M \\le N$。\n\n**本题使用 Special Judge。**\n\n感谢 spj 提供者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n#### 说明\n\n翻译自 [BalticOI 2005 Day1 B Magic Parenthesis](https://boi.cses.fi/files/boi2005_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7270", "type": "P", "difficulty": 0, "samples": [["5\n-5 -3 6\n-1 -2 3\n0 0 2\n-2 2 1\n-4 -1 2 ", "24.5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "BalticOI（波罗的海）"], "title": "[BalticOI 2002] Triangles (Day1)", "background": null, "description": "给定 $n$ 个等腰直角三角形，每个三角形由一个点 $(x_i,y_i)$ 向上向右延伸出长为 $m_i$ 的两条直角边生成。\n\n求这些三角形覆盖的面积之和。", "inputFormat": "第一行一个整数 $n$ 代表三角形的个数。     \n接下来 $n$ 行每行三个整数 $x_i,y_i,m_i$ 描述一个三角形。", "outputFormat": "一行一个实数代表答案。    \n只需要保留一位小数。", "hint": "#### 样例说明\n\n对于样例 $1$，$5$ 个三角形如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a49ow7cr.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2000$，$-10^7 \\le x_i,y_i \\le 10^7$，$0 \\le m \\le 1000$。\n\n#### 说明\n\n翻译自 [BalticOI 2002 Day1 C Triangles](https://boi.cses.fi/files/boi2002_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2002] Triangles (Day1)", "background": null, "description": "给定 $n$ 个等腰直角三角形，每个三角形由一个点 $(x_i,y_i)$ 向上向右延伸出长为 $m_i$ 的两条直角边生成。\n\n求这些三角形覆盖的面积之和。", "inputFormat": "第一行一个整数 $n$ 代表三角形的个数。     \n接下来 $n$ 行每行三个整数 $x_i,y_i,m_i$ 描述一个三角形。", "outputFormat": "一行一个实数代表答案。    \n只需要保留一位小数。", "hint": "#### 样例说明\n\n对于样例 $1$，$5$ 个三角形如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a49ow7cr.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2000$，$-10^7 \\le x_i,y_i \\le 10^7$，$0 \\le m \\le 1000$。\n\n#### 说明\n\n翻译自 [BalticOI 2002 Day1 C Triangles](https://boi.cses.fi/files/boi2002_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7271", "type": "P", "difficulty": 0, "samples": [["6 15 1\n0 1 25 68\n0 2 30 50\n0 5 0 101\n1 2 70 77\n1 3 35 42\n2 0 0 22\n2 1 40 86\n2 3 0 23\n2 4 45 40\n3 1 64 14\n3 5 0 23\n4 1 95 8\n5 1 0 84\n5 2 90 64\n5 3 36 40", "0 5 2 3 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2002", "BalticOI（波罗的海）"], "title": "[BalticOI 2002] Speed Limits (Day1)", "background": "", "description": "您现在在一张 $N$ 点 $M$ 边的无向图的点 $0$ 处，这 $N$ 个点编号为 $0$ 到 $N-1$。\n\n每条边从 $A$ 连向 $B$，速度限制为 $V$，长度为 $L$，经过这条边的时间的算法如下：\n\n$$T=\\begin{cases}\\dfrac{L}{V}\\ (V\\ne 0)\\\\\\dfrac{L}{V_\\text{old}}\\ (V=0)\\end{cases}$$\n\n其中 $V_\\text{old}$ 为您经过的上一条边的 $V$ 的值，最开始 $V_\\text{old}=70$。\n\n如果 $V=0$，这条边的 $V$ 的值在计算完 $T$ 后更新为 $V_\\text{old}$，$V_\\text{old}$ 更新为 $V$。\n\n您先在要从点 $0$ 到点 $D$，求一条从 $0$ 到 $D$ 的路径使得花的时间最少。", "inputFormat": "第一行三个整数 $N,M,D$ 代表点数，边数和终点。     \n接下来 $M$ 行每行四个整数 $A,B,V,L$ 代表一条边。", "outputFormat": "一行若干个整数代表花的时间最少的路径。", "hint": "#### 样例说明\n\n对于样例 $1$，输出这条路径花的时间最少，为 $2628$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$2 \\le M \\le N \\le 150$，$0 \\le V,L \\le 500$。\n\n#### 说明\n\n翻译自 [BalticOI 2002 Day1 A Speed Limits](https://boi.cses.fi/files/boi2002_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2002] Speed Limits (Day1)", "background": "", "description": "您现在在一张 $N$ 点 $M$ 边的无向图的点 $0$ 处，这 $N$ 个点编号为 $0$ 到 $N-1$。\n\n每条边从 $A$ 连向 $B$，速度限制为 $V$，长度为 $L$，经过这条边的时间的算法如下：\n\n$$T=\\begin{cases}\\dfrac{L}{V}\\ (V\\ne 0)\\\\\\dfrac{L}{V_\\text{old}}\\ (V=0)\\end{cases}$$\n\n其中 $V_\\text{old}$ 为您经过的上一条边的 $V$ 的值，最开始 $V_\\text{old}=70$。\n\n如果 $V=0$，这条边的 $V$ 的值在计算完 $T$ 后更新为 $V_\\text{old}$，$V_\\text{old}$ 更新为 $V$。\n\n您先在要从点 $0$ 到点 $D$，求一条从 $0$ 到 $D$ 的路径使得花的时间最少。", "inputFormat": "第一行三个整数 $N,M,D$ 代表点数，边数和终点。     \n接下来 $M$ 行每行四个整数 $A,B,V,L$ 代表一条边。", "outputFormat": "一行若干个整数代表花的时间最少的路径。", "hint": "#### 样例说明\n\n对于样例 $1$，输出这条路径花的时间最少，为 $2628$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$2 \\le M \\le N \\le 150$，$0 \\le V,L \\le 500$。\n\n#### 说明\n\n翻译自 [BalticOI 2002 Day1 A Speed Limits](https://boi.cses.fi/files/boi2002_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P7273", "type": "P", "difficulty": 4, "samples": [["6 1000\n1 2 999 4 72 6", "2"], ["10 2\n2 1 2 2 1 1 2 2 2 2", "3"], ["1 1\n1", "0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "O2优化", "剪枝"], "title": "ix35 的等差数列", "background": "等差数列是指从第二项起，每一项与它的前一项的差等于同一个常数的一种数列，并称这个常数为公差。特别地，认为只有一项的数列也是等差数列，其公差视为 $0$。", "description": "给定一包含 $n$ 项的正整数列 $a_1, a_2, \\ldots , a_n$，满足 $1 \\leq a_i \\leq w$。\n\n现可以进行若干次修改，一次修改可将数列的任意一项修改为任意 $\\leq w$ 的正整数。\n\n求：至少进行多少次修改，才能使得原数列变为一公差为非负整数的等差数列。", "inputFormat": "第一行两个整数 $n, w$。  \n接下来一行 $n$ 个整数 $a_1, a_2, \\ldots , a_n$。", "outputFormat": "一行一个整数，所求答案。", "hint": "**【样例解释 #1】**\n\n将 $a_3$ 修改为 $3$，$a_5$ 修改为 $5$。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（$20$ 分）：$n = 2$，$w = 2$。\n- Subtask 2（$20$ 分）：$n, w \\leq 100$。\n- Subtask 3（$10$ 分）：$a_i = 1$。\n- Subtask 4（$20$ 分）：$n, w \\leq 1000$。\n- Subtask 5（$30$ 分）：没有特殊限制。\n\n对于 $100 \\%$ 的数据，$1 \\leq n, w \\leq 3 \\times 10^5$。\n\n---\n\n原始 idea：ix35。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "ix35 的等差数列", "background": "等差数列是指从第二项起，每一项与它的前一项的差等于同一个常数的一种数列，并称这个常数为公差。特别地，认为只有一项的数列也是等差数列，其公差视为 $0$。", "description": "给定一包含 $n$ 项的正整数列 $a_1, a_2, \\ldots , a_n$，满足 $1 \\leq a_i \\leq w$。\n\n现可以进行若干次修改，一次修改可将数列的任意一项修改为任意 $\\leq w$ 的正整数。\n\n求：至少进行多少次修改，才能使得原数列变为一公差为非负整数的等差数列。", "inputFormat": "第一行两个整数 $n, w$。  \n接下来一行 $n$ 个整数 $a_1, a_2, \\ldots , a_n$。", "outputFormat": "一行一个整数，所求答案。", "hint": "**【样例解释 #1】**\n\n将 $a_3$ 修改为 $3$，$a_5$ 修改为 $5$。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（$20$ 分）：$n = 2$，$w = 2$。\n- Subtask 2（$20$ 分）：$n, w \\leq 100$。\n- Subtask 3（$10$ 分）：$a_i = 1$。\n- Subtask 4（$20$ 分）：$n, w \\leq 1000$。\n- Subtask 5（$30$ 分）：没有特殊限制。\n\n对于 $100 \\%$ 的数据，$1 \\leq n, w \\leq 3 \\times 10^5$。\n\n---\n\n原始 idea：ix35。", "locale": "zh-CN"}}}
{"pid": "P7274", "type": "P", "difficulty": 7, "samples": [["5 4\n1100\n1000\n0011\n0000\n0001", "1"], ["8 10\n0000000011\n0000000000\n0000000000\n0000000010\n0000000000\n0001010100\n0000000000\n0001000100", "3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化", "动态树 LCT", "整体二分"], "title": "草地", "background": "", "description": "给定一 $n \\times m$ 的网格，其中每个格子均有颜色，可以为黑色或白色。\n\n现可以进行若干次操作。一次操作中，你需选定上、下、左和右中的一个方向，然后，对于每个黑色的格子，若其指定方向上对应的位置不为网格的边界，则对应的那个格子变为黑色。\n\n求：至少进行几次操作，才能使任意两个黑色格子八连通。八连通的定义可参考【提示/说明】部分。", "inputFormat": "第一行两个整数 $n,m$（$1 \\leq n,m \\leq 10^3$），表示网格的大小。  \n接下来 $n$ 行，每行一个长为 $m$ 的 01 字符串，第 $i$ 个串的第 $j$ 位为 $1$ 则表示第 $i$ 行 $j$ 列的格子是黑色，否则是白色。", "outputFormat": "一行一个整数，最少的操作次数。", "hint": "----\n\n**【样例解释 #1】**\n\n对于第一组样例，一开始的网格如图（1）所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7amyon0v.png)\n\n（1）\n\n进行一次操作，选择下方向，网格会变为图（2）所示的样子（标红的是新变为黑色的格子），此时任意两个黑格都八连通。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9aszlhed.png)\n\n（2）\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试**\n\n- Subtask 1（$10$ 分）：保证 $n, m\\leq 3$。\n- Subtask 2（$10$ 分）：保证 $n, m \\leq 80$。\n- Subtask 3（$5$ 分）：保证黑色格子的数量不超过 $20$。\n- Subtask 4（$5$ 分）：保证 $m = 1$。\n- Subtask 5（$25$ 分）：保证 $n, m \\leq 300$。\n- Subtask 6（$45$ 分）：没有特殊限制。\n\n对于 $100 \\%$ 的数据，保证 $1 \\leq n,m \\leq 10^3$，至少有一个黑色格子。\n\n**八连通的定义**\n\n两个黑色格子八连通，当且仅当在它们之间有公共顶点或公共边，或存在一个黑色格子同时与它们八连通。\n\n用比较通俗的话说，就是它们在只能向周围相邻的八个格子行走，且只能经过黑色格子的条件下相互可达。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "草地", "background": "", "description": "给定一 $n \\times m$ 的网格，其中每个格子均有颜色，可以为黑色或白色。\n\n现可以进行若干次操作。一次操作中，你需选定上、下、左和右中的一个方向，然后，对于每个黑色的格子，若其指定方向上对应的位置不为网格的边界，则对应的那个格子变为黑色。\n\n求：至少进行几次操作，才能使任意两个黑色格子八连通。八连通的定义可参考【提示/说明】部分。", "inputFormat": "第一行两个整数 $n,m$（$1 \\leq n,m \\leq 10^3$），表示网格的大小。  \n接下来 $n$ 行，每行一个长为 $m$ 的 01 字符串，第 $i$ 个串的第 $j$ 位为 $1$ 则表示第 $i$ 行 $j$ 列的格子是黑色，否则是白色。", "outputFormat": "一行一个整数，最少的操作次数。", "hint": "----\n\n**【样例解释 #1】**\n\n对于第一组样例，一开始的网格如图（1）所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7amyon0v.png)\n\n（1）\n\n进行一次操作，选择下方向，网格会变为图（2）所示的样子（标红的是新变为黑色的格子），此时任意两个黑格都八连通。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9aszlhed.png)\n\n（2）\n\n----\n\n**【数据范围】**\n\n**本题采用捆绑测试**\n\n- Subtask 1（$10$ 分）：保证 $n, m\\leq 3$。\n- Subtask 2（$10$ 分）：保证 $n, m \\leq 80$。\n- Subtask 3（$5$ 分）：保证黑色格子的数量不超过 $20$。\n- Subtask 4（$5$ 分）：保证 $m = 1$。\n- Subtask 5（$25$ 分）：保证 $n, m \\leq 300$。\n- Subtask 6（$45$ 分）：没有特殊限制。\n\n对于 $100 \\%$ 的数据，保证 $1 \\leq n,m \\leq 10^3$，至少有一个黑色格子。\n\n**八连通的定义**\n\n两个黑色格子八连通，当且仅当在它们之间有公共顶点或公共边，或存在一个黑色格子同时与它们八连通。\n\n用比较通俗的话说，就是它们在只能向周围相邻的八个格子行走，且只能经过黑色格子的条件下相互可达。", "locale": "zh-CN"}}}
{"pid": "P7275", "type": "P", "difficulty": 7, "samples": [["4", "4"], ["209", "21754876"], ["5", "11"], ["6", "56"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "计树", "background": "", "description": "求有多少不同的包含 $n$ 个点的有标号无根树，满足：对于任何一个点 $x$，都存在点 $y$ 使得 $x$ 和 $y$ 之间有一条边且 $|x - y| = 1$。答案对 $998244353$ 取模。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个整数，所求答案。", "hint": "**【样例解释 #1】**\n\n![无标题.png](https://i.loli.net/2020/12/28/1Cp3jLXaiOWmuPA.png)\n\n样例 #1 中符合题意的 $4$ 种树如上图所示。\n\n----\n\n**【数据范围】**\n\n本题包含 $20$ 个测试点，每个测试点 $5$ 分。\n\n| 测试点编号 | $n$ 的范围  |\n| :--------: | :---------: |\n|  $1 \\sim 2$  |  $\\leq 7$   |\n|  $3 \\sim 4$  |  $\\leq 14$  |\n|  $5 \\sim 8$  |  $\\leq 30$  |\n|  $9 \\sim 12$ | $\\leq 10^3$ |\n| $13 \\sim 20$ | $\\leq 10^5$ |\n\n对于所有测试点满足 $n$ 为正整数且 $2 \\leq n \\leq {10}^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "计树", "background": "", "description": "求有多少不同的包含 $n$ 个点的有标号无根树，满足：对于任何一个点 $x$，都存在点 $y$ 使得 $x$ 和 $y$ 之间有一条边且 $|x - y| = 1$。答案对 $998244353$ 取模。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个整数，所求答案。", "hint": "**【样例解释 #1】**\n\n![无标题.png](https://i.loli.net/2020/12/28/1Cp3jLXaiOWmuPA.png)\n\n样例 #1 中符合题意的 $4$ 种树如上图所示。\n\n----\n\n**【数据范围】**\n\n本题包含 $20$ 个测试点，每个测试点 $5$ 分。\n\n| 测试点编号 | $n$ 的范围  |\n| :--------: | :---------: |\n|  $1 \\sim 2$  |  $\\leq 7$   |\n|  $3 \\sim 4$  |  $\\leq 14$  |\n|  $5 \\sim 8$  |  $\\leq 30$  |\n|  $9 \\sim 12$ | $\\leq 10^3$ |\n| $13 \\sim 20$ | $\\leq 10^5$ |\n\n对于所有测试点满足 $n$ 为正整数且 $2 \\leq n \\leq {10}^5$。", "locale": "zh-CN"}}}
{"pid": "P7276", "type": "P", "difficulty": 5, "samples": [["7 4\n1 2\n2 3\n2 4\n1 5\n5 6\n6 7\n3 4 5 7", "6"], ["1 1\n1", "0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "送给好友的礼物", "background": "小 M 和小 B 是一对好朋友，她们很喜欢草莓。", "description": "给定一棵包含 $n$ 个结点的树 $T$，结点从 $1 \\sim n$ 顺序编号。\n\n小 M 和小 B 在时刻 $0$ 都在 $1$ 号结点。从时刻 $1$ 开始的每个时刻初，小 M 和小 B 都可以选择：移动到一个和自己所在结点直接相连的结点，或者停留在当前所在的结点。\n\n树上有 $k$ 个草莓，它们分布在 $k$ 个不同的结点上。小 M 和小 B 想要收集到所有的草莓，任何一个时刻末，如果小 M 或者小 B 在某一个草莓所在的结点上，那么这个草莓就被收集了。\n\n她们不想花费太多的时间，因此你需要回答：至少在第几时刻末，小 M 和小 B 可以收集到所有的草莓，并且都回到结点 $1$。", "inputFormat": "第一行两个整数 $n, k$（$1 \\leq k \\leq n \\leq 415$），分别表示树的结点个数和草莓的个数。  \n接下来 $n - 1$ 行，每行两个整数 $u$ 和 $v$，表示树上有一条从 $u$ 到 $v$ 的边。  \n接下来一行 $k$ 个互不相同的整数 $a_1, a_2, \\ldots , a_k$，分别表示这 $k$ 个草莓所在的结点。", "outputFormat": "一行一个整数，所求答案。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bhe4q1zn.png)\n\n小 M 的路线是：$1 \\to 2 \\to 3 \\to 2 \\to 4 \\to 2 \\to 1$。\n\n小 B 的路线是：$1 \\to 5 \\to 6 \\to 7 \\to 6 \\to 5 \\to 1$。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（$6$ 分）：$n \\leq 3$。\n- Subtask 2（$1$ 分）：$k = 1$。\n- Subtask 3（$11$ 分）：$n \\leq 7$。\n- Subtask 4（$17$ 分）：$k \\leq 20$。\n- Subtask 5（$42$ 分）：$n \\leq 90$。\n- Subtask 6（$23$ 分）：无特殊限制。\n\n对于 $100 \\%$ 的数据，$1 \\leq k \\leq n \\leq 415$，$1 \\leq u, v \\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "送给好友的礼物", "background": "小 M 和小 B 是一对好朋友，她们很喜欢草莓。", "description": "给定一棵包含 $n$ 个结点的树 $T$，结点从 $1 \\sim n$ 顺序编号。\n\n小 M 和小 B 在时刻 $0$ 都在 $1$ 号结点。从时刻 $1$ 开始的每个时刻初，小 M 和小 B 都可以选择：移动到一个和自己所在结点直接相连的结点，或者停留在当前所在的结点。\n\n树上有 $k$ 个草莓，它们分布在 $k$ 个不同的结点上。小 M 和小 B 想要收集到所有的草莓，任何一个时刻末，如果小 M 或者小 B 在某一个草莓所在的结点上，那么这个草莓就被收集了。\n\n她们不想花费太多的时间，因此你需要回答：至少在第几时刻末，小 M 和小 B 可以收集到所有的草莓，并且都回到结点 $1$。", "inputFormat": "第一行两个整数 $n, k$（$1 \\leq k \\leq n \\leq 415$），分别表示树的结点个数和草莓的个数。  \n接下来 $n - 1$ 行，每行两个整数 $u$ 和 $v$，表示树上有一条从 $u$ 到 $v$ 的边。  \n接下来一行 $k$ 个互不相同的整数 $a_1, a_2, \\ldots , a_k$，分别表示这 $k$ 个草莓所在的结点。", "outputFormat": "一行一个整数，所求答案。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bhe4q1zn.png)\n\n小 M 的路线是：$1 \\to 2 \\to 3 \\to 2 \\to 4 \\to 2 \\to 1$。\n\n小 B 的路线是：$1 \\to 5 \\to 6 \\to 7 \\to 6 \\to 5 \\to 1$。\n\n---\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（$6$ 分）：$n \\leq 3$。\n- Subtask 2（$1$ 分）：$k = 1$。\n- Subtask 3（$11$ 分）：$n \\leq 7$。\n- Subtask 4（$17$ 分）：$k \\leq 20$。\n- Subtask 5（$42$ 分）：$n \\leq 90$。\n- Subtask 6（$23$ 分）：无特殊限制。\n\n对于 $100 \\%$ 的数据，$1 \\leq k \\leq n \\leq 415$，$1 \\leq u, v \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P7277", "type": "P", "difficulty": 7, "samples": [["4 4 4", "1328"], ["6 6 6", "410114"], ["10000000000 114514 100", "603074925"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": [], "title": "平凡点滴", "background": "少年看见他的桌上有一本书。  \n翻开着其中一页。  \n上面只有一道题。", "description": "他写下一个函数 $f(n)$。  \n它是这么定义的：  \n记 $n$ 的质因子分解式中每个质因子的最大次数为 $g(n)$，例如 $g(2)=1,g(12)=2$。  \n**注意**：本题中假设 $g(1)=1$。样例及数据已修正。  \n则 $f(n) = \\max(m-g(n)+1,0) n^k$。  \n其中 $m,k$ 都是他将给定你的参数。\n\n他希望你求出\n$$\n\\sum\\limits_{i=1}^n \\sum\\limits_{j=1}^n f(\\gcd(i,j))\n$$\n\n并对 $998244353$ 取模。", "inputFormat": "第一行，三个正整数 $n,m,k$。", "outputFormat": "一行，一个非负整数，表示答案。", "hint": "对于 $70\\%$ 的数据，$n \\le 10^7$；  \n对于 $50\\%$ 的数据，$m \\le 33$；  \n对于 $100\\%$ 的数据，$1 \\le n \\le 10^{10}$, $1 \\le m < 998244353$, $1 \\le k \\le 100$。\n\n除此之外，添加一组来自 @[cqbzljsqwq](/user/154560) 的 Hack 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "平凡点滴", "background": "少年看见他的桌上有一本书。  \n翻开着其中一页。  \n上面只有一道题。", "description": "他写下一个函数 $f(n)$。  \n它是这么定义的：  \n记 $n$ 的质因子分解式中每个质因子的最大次数为 $g(n)$，例如 $g(2)=1,g(12)=2$。  \n**注意**：本题中假设 $g(1)=1$。样例及数据已修正。  \n则 $f(n) = \\max(m-g(n)+1,0) n^k$。  \n其中 $m,k$ 都是他将给定你的参数。\n\n他希望你求出\n$$\n\\sum\\limits_{i=1}^n \\sum\\limits_{j=1}^n f(\\gcd(i,j))\n$$\n\n并对 $998244353$ 取模。", "inputFormat": "第一行，三个正整数 $n,m,k$。", "outputFormat": "一行，一个非负整数，表示答案。", "hint": "对于 $70\\%$ 的数据，$n \\le 10^7$；  \n对于 $50\\%$ 的数据，$m \\le 33$；  \n对于 $100\\%$ 的数据，$1 \\le n \\le 10^{10}$, $1 \\le m < 998244353$, $1 \\le k \\le 100$。\n\n除此之外，添加一组来自 @[cqbzljsqwq](/user/154560) 的 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P7278", "type": "P", "difficulty": 6, "samples": [["3 2", "0"], ["4 2", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "纯洁憧憬", "background": "少年对他的憧憬，简直连续不断。  \n少年的思绪，如同许多数字的排列一般凌乱。", "description": "对于一个 $n$ 阶排列 $p_1,\\dots,p_n$ 和一个区间 $[l,r]$，若 $\\max\\limits_{l\\le i\\le r} p_i - \\min\\limits_{l\\le i\\le r} p_i = r - l$，则称 $[l,r]$ 为一个**连续段**。\n\n对于一个连续段 $[l,r]$，若其满足 $2 \\le r - l + 1 < n$，则称 $[l,r]$ 为一个**非平凡连续段**。\n\n**少年的思绪**可以抽象成一个**至少存在一个**长度大于 $k$ 的非平凡连续段的排列。\n\n少年会给定 $n,k$，并询问你有多少 $n$ 阶排列可能是少年的思绪。答案对 $10^9 + 7$ 取模。", "inputFormat": "第一行，两个正整数 $n,k$。", "outputFormat": "一行，一个非负整数表示答案。", "hint": "对于 $20\\%$ 的数据，$n \\le 10$；  \n对于 $100\\%$ 的数据，$1 \\le k < n \\le 400$。\n\n#### 样例解释\n\n对于第二个样例，不满足条件的排列有以下 $4$ 种：\n1. $[2,1,4,3]$；\n1. $[2,4,1,3]$；\n1. $[3,4,1,2]$；\n1. $[3,1,4,2]$。\n\n另外 $4!-4=20$ 种方案都满足条件，可能是少年的思绪。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "纯洁憧憬", "background": "少年对他的憧憬，简直连续不断。  \n少年的思绪，如同许多数字的排列一般凌乱。", "description": "对于一个 $n$ 阶排列 $p_1,\\dots,p_n$ 和一个区间 $[l,r]$，若 $\\max\\limits_{l\\le i\\le r} p_i - \\min\\limits_{l\\le i\\le r} p_i = r - l$，则称 $[l,r]$ 为一个**连续段**。\n\n对于一个连续段 $[l,r]$，若其满足 $2 \\le r - l + 1 < n$，则称 $[l,r]$ 为一个**非平凡连续段**。\n\n**少年的思绪**可以抽象成一个**至少存在一个**长度大于 $k$ 的非平凡连续段的排列。\n\n少年会给定 $n,k$，并询问你有多少 $n$ 阶排列可能是少年的思绪。答案对 $10^9 + 7$ 取模。", "inputFormat": "第一行，两个正整数 $n,k$。", "outputFormat": "一行，一个非负整数表示答案。", "hint": "对于 $20\\%$ 的数据，$n \\le 10$；  \n对于 $100\\%$ 的数据，$1 \\le k < n \\le 400$。\n\n#### 样例解释\n\n对于第二个样例，不满足条件的排列有以下 $4$ 种：\n1. $[2,1,4,3]$；\n1. $[2,4,1,3]$；\n1. $[3,4,1,2]$；\n1. $[3,1,4,2]$。\n\n另外 $4!-4=20$ 种方案都满足条件，可能是少年的思绪。", "locale": "zh-CN"}}}
{"pid": "P7279", "type": "P", "difficulty": 6, "samples": [["5\nabcbc\n0 1 2 3 4\n2 7", "2"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "光棱碎片", "background": "碎片在少年的世界里四处飘散。  \n最后被少年收集起，成为一列仿若无意义的字符。", "description": "少年只剩一个字符串 $S$，它的长度为 $n$，下标以 $1 \\dots n$ 编号；  \n以及一个数组 $a_{1\\dots n}$。\n\n少年写出了两个数 $L,R$ 并尝试寻找那些被光芒照耀过的碎片：  \n对于 $S$ 中两个出现位置不同而本质相同的子串 $(S_{l_1\\dots r_1},S_{l_2\\dots r_2})$，若 $L \\le (a_{r_1} \\oplus a_{r_2}) + (r_1 - l_1 + 1) \\le R$，则这两个子串之间存在光芒。  \n其中 $S_{l\\dots r}$ 表示 $S$ 的下标在 $[l,r]$ 内的字符顺次连接构成的子串，$\\oplus$ 表示按位异或运算。\n\n少年试图寻找，有多少对子串之间存在光芒。  \n子串对是无序的。具体地，$(S_{l_1\\dots r_1},S_{l_2\\dots r_2})$ 和 $(S_{l_2\\dots r_2},S_{l_1\\dots r_1})$ 视为一个子串对。  \n而你只需要将答案对 $998244353$ 取模之后告诉他就行了。", "inputFormat": "第一行，一个正整数 $n$。  \n第二行，一个字符串 $S$。  \n第三行，$n$ 个非负整数 $a_{1\\dots n}$。  \n第四行，两个非负整数 $L,R$。", "outputFormat": "一行，一个非负整数，表示答案。", "hint": "对于 $20\\%$ 的数据，$n \\le 100$；    \n对于 $50\\%$ 的数据，$n \\le 10^3$；  \n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$, $0 \\le a_i,L,R \\le 10^5$, $L \\le R$, $S$ 只包含小写字母。\n\n**「出题人的馈赠」**  \n勇敢一点。相信某算法的常数。你想到的可能就是垃圾标算。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "光棱碎片", "background": "碎片在少年的世界里四处飘散。  \n最后被少年收集起，成为一列仿若无意义的字符。", "description": "少年只剩一个字符串 $S$，它的长度为 $n$，下标以 $1 \\dots n$ 编号；  \n以及一个数组 $a_{1\\dots n}$。\n\n少年写出了两个数 $L,R$ 并尝试寻找那些被光芒照耀过的碎片：  \n对于 $S$ 中两个出现位置不同而本质相同的子串 $(S_{l_1\\dots r_1},S_{l_2\\dots r_2})$，若 $L \\le (a_{r_1} \\oplus a_{r_2}) + (r_1 - l_1 + 1) \\le R$，则这两个子串之间存在光芒。  \n其中 $S_{l\\dots r}$ 表示 $S$ 的下标在 $[l,r]$ 内的字符顺次连接构成的子串，$\\oplus$ 表示按位异或运算。\n\n少年试图寻找，有多少对子串之间存在光芒。  \n子串对是无序的。具体地，$(S_{l_1\\dots r_1},S_{l_2\\dots r_2})$ 和 $(S_{l_2\\dots r_2},S_{l_1\\dots r_1})$ 视为一个子串对。  \n而你只需要将答案对 $998244353$ 取模之后告诉他就行了。", "inputFormat": "第一行，一个正整数 $n$。  \n第二行，一个字符串 $S$。  \n第三行，$n$ 个非负整数 $a_{1\\dots n}$。  \n第四行，两个非负整数 $L,R$。", "outputFormat": "一行，一个非负整数，表示答案。", "hint": "对于 $20\\%$ 的数据，$n \\le 100$；    \n对于 $50\\%$ 的数据，$n \\le 10^3$；  \n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$, $0 \\le a_i,L,R \\le 10^5$, $L \\le R$, $S$ 只包含小写字母。\n\n**「出题人的馈赠」**  \n勇敢一点。相信某算法的常数。你想到的可能就是垃圾标算。", "locale": "zh-CN"}}}
{"pid": "P7280", "type": "P", "difficulty": 2, "samples": [["1 2\n3\n1 1\n1 2\n1 3", "2"], ["2 1 2\n4\n2 1 4\n3 1 2 3\n2 3 4\n3 3 5 7", "2"], ["1 4\n3\n1 1\n1 2\n1 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #4] Pizza", "background": "在一个漫长而痛苦的一天快要结束时，Mirko 决定订一个比萨来提神。在他书桌的一堆纸中，他找到了一个附近比萨店的传单。", "description": "比萨店提供 $m$ 种不同的比萨。比萨的配料使用正整数来编号。第 $i$ 个比萨有 $k_i$ 种配料，编号分别为 $b_{i,1},b_{i,2},\\cdots,b_{i,k_i}$。\n\nMirko 在食物面前格外挑剔。他不喜欢其中的 $n$ 种配料，即编号为 $a_1,a_2,\\cdots,a_n$ 的配料，因此他想订购一个没有上述配料的比萨。求 Mirko 能订购的比萨的数量。", "inputFormat": "第一行输入一个整数 $n$，表示 Mirko 不喜欢的配料的种数。接下来输入 $n$ 个互不相同的整数 $a_i$，表示 Mirko 不喜欢配料所对应的编号。\n\n第二行输入一个整数 $m$，表示比萨的数量。\n\n接下来的 $m$ 行，第 $i$ 行输入一个整数 $k_i$，表示第 $i$ 个比萨的配料数量。接下来输入 $k_i$ 个互不相同的整数 $b_{i,j}$，表示该比萨的配料编号。\n\n不会出现两个具有完全相同配料的比萨。", "outputFormat": "输出 Mirko 能订购的比萨的数量。", "hint": "#### 数据规模与约定\n\n对于 $40\\%$ 的数据，$n=k_1=k_2=\\cdots=k_m=1$。\n\n对于 $100\\%$ 的数据，$1 \\le n,m,a_i,k_i,b_{i,j} \\le 100$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf)  _T1 Pizza_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #4] Pizza", "background": "在一个漫长而痛苦的一天快要结束时，Mirko 决定订一个比萨来提神。在他书桌的一堆纸中，他找到了一个附近比萨店的传单。", "description": "比萨店提供 $m$ 种不同的比萨。比萨的配料使用正整数来编号。第 $i$ 个比萨有 $k_i$ 种配料，编号分别为 $b_{i,1},b_{i,2},\\cdots,b_{i,k_i}$。\n\nMirko 在食物面前格外挑剔。他不喜欢其中的 $n$ 种配料，即编号为 $a_1,a_2,\\cdots,a_n$ 的配料，因此他想订购一个没有上述配料的比萨。求 Mirko 能订购的比萨的数量。", "inputFormat": "第一行输入一个整数 $n$，表示 Mirko 不喜欢的配料的种数。接下来输入 $n$ 个互不相同的整数 $a_i$，表示 Mirko 不喜欢配料所对应的编号。\n\n第二行输入一个整数 $m$，表示比萨的数量。\n\n接下来的 $m$ 行，第 $i$ 行输入一个整数 $k_i$，表示第 $i$ 个比萨的配料数量。接下来输入 $k_i$ 个互不相同的整数 $b_{i,j}$，表示该比萨的配料编号。\n\n不会出现两个具有完全相同配料的比萨。", "outputFormat": "输出 Mirko 能订购的比萨的数量。", "hint": "#### 数据规模与约定\n\n对于 $40\\%$ 的数据，$n=k_1=k_2=\\cdots=k_m=1$。\n\n对于 $100\\%$ 的数据，$1 \\le n,m,a_i,k_i,b_{i,j} \\le 100$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf)  _T1 Pizza_。**", "locale": "zh-CN"}}}
{"pid": "P7281", "type": "P", "difficulty": 4, "samples": [["2\n9 10 3 6\n2 5 7 9", "DA\nNE"], ["6\n1 2 3 4\n1 4 2 3\n2 3 1 4\n1 3 2 4\n19 22 55 57\n55 57 19 22", "DA\nNE\nDA\nDA\nDA\nDA"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "2020", "数论", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #4] Vepar", "background": "", "description": "给定两组正整数 $\\{a,a+1,\\cdots,b\\}$ 和 $\\{c,c+1,\\cdots,d\\}$。判断 $c \\cdot (c+1)\\cdots d$ 能否被 $a \\cdot (a+1)\\cdots b$ 整除。", "inputFormat": "第一行输入一个整数 $t$，表示数据组数。\n\n接下来的 $t$ 行，输入四个整数 $a_i,b_i,c_i,d_i$。", "outputFormat": "输出共 $t$ 行。对于第 $i$ 行，如果 $c_i \\cdot (c_i+1)\\cdots d_i$ 能够被 $a_i \\cdot (a_i+1)\\cdots b_i$ 整除，就输出 `DA`，否则输出 `NE`。", "hint": "#### 样例 1 解释\n\n按照题意分别相乘得到 $9 \\times 10=90$ 和 $3 \\times 4 \\times 5 \\times 6=360$。由于 $90$ 能被 $360$ 整除，因此输出 `DA`。\n\n我们得到 $2 \\times 3 \\times 4 \\times 5=120$ 和 $7 \\times 8 \\times 9=504$。而 $120$ 不能被 $504$ 整除，因此输出 `NE`。\n\n#### 数据规模与约定\n\n本题**不采用捆绑评测**，通过对应测试点就可以拿到对应的分数，但有若干个约束。\n\n| 约束编号 | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $a_i,b_i,c_i,d_i \\le 50$ |\n| $2$ | $20$ | $a_i,b_i,c_i,d_i \\le 1000$ |\n| $3$ | $10$ | $a_i=1$ |\n| $4$ | $30$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 10$，$1 \\le a_i \\le b_i \\le 10^7$，$1 \\le c_i \\le d_i \\le 10^7$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf)  _T2 Vepar_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #4] Vepar", "background": "", "description": "给定两组正整数 $\\{a,a+1,\\cdots,b\\}$ 和 $\\{c,c+1,\\cdots,d\\}$。判断 $c \\cdot (c+1)\\cdots d$ 能否被 $a \\cdot (a+1)\\cdots b$ 整除。", "inputFormat": "第一行输入一个整数 $t$，表示数据组数。\n\n接下来的 $t$ 行，输入四个整数 $a_i,b_i,c_i,d_i$。", "outputFormat": "输出共 $t$ 行。对于第 $i$ 行，如果 $c_i \\cdot (c_i+1)\\cdots d_i$ 能够被 $a_i \\cdot (a_i+1)\\cdots b_i$ 整除，就输出 `DA`，否则输出 `NE`。", "hint": "#### 样例 1 解释\n\n按照题意分别相乘得到 $9 \\times 10=90$ 和 $3 \\times 4 \\times 5 \\times 6=360$。由于 $90$ 能被 $360$ 整除，因此输出 `DA`。\n\n我们得到 $2 \\times 3 \\times 4 \\times 5=120$ 和 $7 \\times 8 \\times 9=504$。而 $120$ 不能被 $504$ 整除，因此输出 `NE`。\n\n#### 数据规模与约定\n\n本题**不采用捆绑评测**，通过对应测试点就可以拿到对应的分数，但有若干个约束。\n\n| 约束编号 | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $a_i,b_i,c_i,d_i \\le 50$ |\n| $2$ | $20$ | $a_i,b_i,c_i,d_i \\le 1000$ |\n| $3$ | $10$ | $a_i=1$ |\n| $4$ | $30$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 10$，$1 \\le a_i \\le b_i \\le 10^7$，$1 \\le c_i \\le d_i \\le 10^7$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf)  _T2 Vepar_。**", "locale": "zh-CN"}}}
{"pid": "P7282", "type": "P", "difficulty": 4, "samples": [["8\n3 4 6 9 12 18 36 72", "1\n2 3\n1 2 3\n1 2 3 1\n2 3 1 2 3\n1 2 3 1 2 3\n1 2 3 1 2 3 1"], ["2\n10 101", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #4] Hop", "background": "> 杰瑞米是一个牛蛙，是我的一个好朋友。", "description": "有 $n$ 片百合花，它们分别从 $1$ 到 $n$ 依次编号。第 $i$ 片上有一个整数 $x_i$，而序列 $(x_i)_{1 \\le i \\le n}$ 单调递增。\n\n三只青蛙到来。\n\n每对满足 $a \\lt b$ 的百合 $(a,b)$ 必须属于青蛙 $1,2$ 或 $3$ 中的其中一只。\n\n当百合 $(i,j)$ 属于一只青蛙且 $x_j$ 能被 $x_i$ 整除时（$j \\gt i$），该青蛙可以从 $i$ 号百合跳动到第 $j$ 号。\n\n请找出一种分类方案，使得任何一只青蛙都不会连续跳动超过 $3$ 次。", "inputFormat": "第一行输入一个正整数 $n$，表示百合花的数量。\n\n第二行输入 $n$ 个正整数 $x_i$，表示百合花上的整数。", "outputFormat": "输出 $n-1$ 行。第 $i$ 行输出 $i$ 个整数，其中该行第 $j$ 个整数表示 $(j,i+1)$ 所归属的青蛙。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d4bitfzs.png)\n\n青蛙 $1,2,3$ 分别用蓝、绿和红色代替。\n\n蓝蛙可以从 $x_1=3$ 跳动到 $x_4=9$，再跳动到 $x_7=36$，再到 $x_8=72$。该青蛙只能进行 $3$ 次连续的跳动。\n\n绿蛙可以从 $x_2=4$ 跳动到 $x_5=12$，再跳动到 $x_7=36$。该青蛙只能进行 $2$ 次连续的跳动。\n\n红蛙不能从 $x_2=4$ 跳动到 $x_3=6$，因为 $6$ 不能被 $4$ 整除。\n\n#### 数据规模与约定\n\n**本题采用捆绑评测。**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $n \\le 30$ |\n| $2$ | $100$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le x_i \\le 10^{18}$。\n\n#### 评分方式\n\n在输出方案中，如果其中一只青蛙可以连续跳动 $k$ 次，其中 $k \\gt 3$，而没有青蛙可以连续跳动 $k+1$ 次，则对应测试点的分数为 $f(k)·x$ 分，其中：\n\n$$f(k)=\\dfrac{1}{10}·\n\\begin{cases}\n11-k & (4 \\le k \\le 5) \\cr\n8-\\lfloor {\\dfrac{k}{2}} \\rfloor & (6 \\le k \\le 11) \\cr\n1 & (12 \\le k \\le 19) \\cr\n0 & (k \\ge 20) \\cr\n\\end{cases}$$\n\n而 $x$ 为对应子任务的总分。每个子任务的得分等于该子任务中所有测试点得分的最小值。\n\n因本题的评分方式特殊，因而启用非官方的自行编写的 [Special Judge](https://www.luogu.com.cn/paste/mfhbmugl)，也可以在附件中下载。欢迎大家 hack（可私信或直接发帖）。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf)  _T3 Hop_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #4] Hop", "background": "> 杰瑞米是一个牛蛙，是我的一个好朋友。", "description": "有 $n$ 片百合花，它们分别从 $1$ 到 $n$ 依次编号。第 $i$ 片上有一个整数 $x_i$，而序列 $(x_i)_{1 \\le i \\le n}$ 单调递增。\n\n三只青蛙到来。\n\n每对满足 $a \\lt b$ 的百合 $(a,b)$ 必须属于青蛙 $1,2$ 或 $3$ 中的其中一只。\n\n当百合 $(i,j)$ 属于一只青蛙且 $x_j$ 能被 $x_i$ 整除时（$j \\gt i$），该青蛙可以从 $i$ 号百合跳动到第 $j$ 号。\n\n请找出一种分类方案，使得任何一只青蛙都不会连续跳动超过 $3$ 次。", "inputFormat": "第一行输入一个正整数 $n$，表示百合花的数量。\n\n第二行输入 $n$ 个正整数 $x_i$，表示百合花上的整数。", "outputFormat": "输出 $n-1$ 行。第 $i$ 行输出 $i$ 个整数，其中该行第 $j$ 个整数表示 $(j,i+1)$ 所归属的青蛙。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d4bitfzs.png)\n\n青蛙 $1,2,3$ 分别用蓝、绿和红色代替。\n\n蓝蛙可以从 $x_1=3$ 跳动到 $x_4=9$，再跳动到 $x_7=36$，再到 $x_8=72$。该青蛙只能进行 $3$ 次连续的跳动。\n\n绿蛙可以从 $x_2=4$ 跳动到 $x_5=12$，再跳动到 $x_7=36$。该青蛙只能进行 $2$ 次连续的跳动。\n\n红蛙不能从 $x_2=4$ 跳动到 $x_3=6$，因为 $6$ 不能被 $4$ 整除。\n\n#### 数据规模与约定\n\n**本题采用捆绑评测。**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $n \\le 30$ |\n| $2$ | $100$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le x_i \\le 10^{18}$。\n\n#### 评分方式\n\n在输出方案中，如果其中一只青蛙可以连续跳动 $k$ 次，其中 $k \\gt 3$，而没有青蛙可以连续跳动 $k+1$ 次，则对应测试点的分数为 $f(k)·x$ 分，其中：\n\n$$f(k)=\\dfrac{1}{10}·\n\\begin{cases}\n11-k & (4 \\le k \\le 5) \\cr\n8-\\lfloor {\\dfrac{k}{2}} \\rfloor & (6 \\le k \\le 11) \\cr\n1 & (12 \\le k \\le 19) \\cr\n0 & (k \\ge 20) \\cr\n\\end{cases}$$\n\n而 $x$ 为对应子任务的总分。每个子任务的得分等于该子任务中所有测试点得分的最小值。\n\n因本题的评分方式特殊，因而启用非官方的自行编写的 [Special Judge](https://www.luogu.com.cn/paste/mfhbmugl)，也可以在附件中下载。欢迎大家 hack（可私信或直接发帖）。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf)  _T3 Hop_。**", "locale": "zh-CN"}}}
{"pid": "P7283", "type": "P", "difficulty": 6, "samples": [["3 1\n1 2 3\n1 3 2", "6"], ["4 1\n1 2 1\n2 3 2\n3 4 3", "6"], ["5 2\n1 2 2\n1 3 3\n3 4 2\n3 5 4", "8"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #4] Janjetina", "background": "疫情封禁期间，克罗地亚的所有餐厅均被关闭。\n\nMalnar 先生为此十分伤感。但他不久发现并没有必要感到如此伤心，因此他决定将在封禁结束后周游克罗地亚，并在最好的餐厅中享用最美味的羊肉。", "description": "Malnar 先生将访问 $n$ 个城市，分别用整数 $1$ 到 $n$ 表示。同时，他经过调研发现，有 $n-1$ 条连接其中两个城市的双向路。\n\n每条路上均有一家提供羊肉的餐厅，同时给定每个餐厅可以订购的最大羊肉的重量。\n\n他将选择两个城市 $x$ 和 $y$，并以最短路径（指经过的最少的路）从 $x$ 到达 $y$。他将且仅将在一家餐厅停留，且这家餐厅为可提供羊肉重量最多的一家（如果有多家这样的餐厅，他将会选择任意一家），并将订购的羊肉全部吃光。\n\n如果通过一种长度为 $l$ 的路径可以吃到 $w$ 千克的羊肉，且 $w-l \\ge k$，那么 Malnar 先生就称之为**满意的**。一种路径的长度等同于其经过路的条数。\n\n求有多少个有序数对 $(x,y)$，使得从 $x$ 到 $y$ 的最短路径是满意的。", "inputFormat": "第一行输入整数 $n,k$，其中 $n$ 表示城市的个数。\n\n接下来的 $n-1$ 行，每行输入三个整数 $x,y,w$，表示有一条连接城市 $x,y$ 的路，且这条道路有一家提供 $w$ 千克羊肉的餐厅。", "outputFormat": "输出满足题意的有序数对的个数。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/orifach0.png)\n\n满足题意的有序数对有 $(1,3),(3,1),(1,5),(5,1),(3,5),(5,3),(4,5),(5,4)$。\n\n#### 数据规模与约定\n\n**本题采用捆绑评测。**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $15$ | $1 \\le n \\le 1000$ |\n| $2$ | $35$ | 城市 $i$ 和 $i+1$ （$1 \\le i \\le n-1$）直接相连（即最短距离为 $1$） |\n| $2$ | $60$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n,k,w \\le 10^5$，$1 \\le x,y \\le n,x \\neq y$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf)  _T4 Janjetina_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #4] Janjetina", "background": "疫情封禁期间，克罗地亚的所有餐厅均被关闭。\n\nMalnar 先生为此十分伤感。但他不久发现并没有必要感到如此伤心，因此他决定将在封禁结束后周游克罗地亚，并在最好的餐厅中享用最美味的羊肉。", "description": "Malnar 先生将访问 $n$ 个城市，分别用整数 $1$ 到 $n$ 表示。同时，他经过调研发现，有 $n-1$ 条连接其中两个城市的双向路。\n\n每条路上均有一家提供羊肉的餐厅，同时给定每个餐厅可以订购的最大羊肉的重量。\n\n他将选择两个城市 $x$ 和 $y$，并以最短路径（指经过的最少的路）从 $x$ 到达 $y$。他将且仅将在一家餐厅停留，且这家餐厅为可提供羊肉重量最多的一家（如果有多家这样的餐厅，他将会选择任意一家），并将订购的羊肉全部吃光。\n\n如果通过一种长度为 $l$ 的路径可以吃到 $w$ 千克的羊肉，且 $w-l \\ge k$，那么 Malnar 先生就称之为**满意的**。一种路径的长度等同于其经过路的条数。\n\n求有多少个有序数对 $(x,y)$，使得从 $x$ 到 $y$ 的最短路径是满意的。", "inputFormat": "第一行输入整数 $n,k$，其中 $n$ 表示城市的个数。\n\n接下来的 $n-1$ 行，每行输入三个整数 $x,y,w$，表示有一条连接城市 $x,y$ 的路，且这条道路有一家提供 $w$ 千克羊肉的餐厅。", "outputFormat": "输出满足题意的有序数对的个数。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/orifach0.png)\n\n满足题意的有序数对有 $(1,3),(3,1),(1,5),(5,1),(3,5),(5,3),(4,5),(5,4)$。\n\n#### 数据规模与约定\n\n**本题采用捆绑评测。**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $15$ | $1 \\le n \\le 1000$ |\n| $2$ | $35$ | 城市 $i$ 和 $i+1$ （$1 \\le i \\le n-1$）直接相连（即最短距离为 $1$） |\n| $2$ | $60$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n,k,w \\le 10^5$，$1 \\le x,y \\le n,x \\neq y$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf)  _T4 Janjetina_。**", "locale": "zh-CN"}}}
{"pid": "P7284", "type": "P", "difficulty": 4, "samples": [["3 3\n>vo\nvv>\nx>>", "1\n>vo\nvv>\nx<>"], ["3 6\n>>vv<<\n^ovvx^\n^<<>>^", "2\n>>vv<<\n^o>>x^\n^<<>>^"], ["4 4\nx.v.\n.>.<\n>.<.\n.^.o", "4\nx<<.\n.>^<\n>.<^\n.^.o"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "Special Judge", "O2优化", "广度优先搜索 BFS", "COCI（克罗地亚）"], "title": "[COCI 2020/2021 #4] Patkice II", "background": "", "description": "Netflix 的经商人员想要制作一个有关三只鸭子之旅的系列改编。\n\n在 COCI20/21 的第一轮中，鸭子们位于一个洋流的地图中，鸭子们一同出行。鸭子们的起始岛屿用 `o` 表示。鸭子们可以往四个方向进行旅行，分别是：西 $\\to$ 东（`>`），东 $\\to$ 西（`<`），北 $\\to$ 南（`v`） 和南 $\\to$ 北（`^`）。当鸭子们位于洋流的点上时，它们将会向洋流的方向移动一个单位。\n\n平静的海面用 `.` 表示。如果洋流把鸭子们带到了平静的海面、到达地图之外或者回到起始小岛处，它们就会停止旅行。鸭子们想要前往的目的地岛屿用 `x` 表示。\n\n为了让情节更加吸引人，Netflix 进行了改编：现在海面上可能会出现旋涡（鸭子们可能会困在其中）和可把鸭子带到地图之外的洋流。\n\n因此，原先地图被迫改变。但在即将到来的截止期的情况下，导演犯了几个错误：鸭子们不能再通过洋流到达目的地岛屿。\n\nNetflix 导演是非常重要的人，因此他们并不花时间思考情节漏洞。你的任务是替换地图中的几个字符，使得鸭子们能够从起始岛屿到达目的地岛屿。\n\n因情节需要，字符 `o` 和 `x` 不能被修改。其他字符（`<>v^.`）分别表示洋流和平静的海面。你可以用 `<>v^.` 中的任意字符来替换原先地图中 `<>v^.` 的任意字符。", "inputFormat": "第一行输入两个整数 $r$ 和 $s$，分别表示地图的行数和列数。\n\n接下来的 $r$ 行，每行包含 $s$ 个字符，字符必为 `o<>v^.x` 中的其中一个。保证地图上分别只有一个 `o` 和 `x`，并且它们不相邻。", "outputFormat": "第一行输出 $k$，表示需要进行改变的字符的最少数量。\n\n接下来的 $r$ 行，每行输出 $s$ 个字符，表示改变后的地图。\n\n如果有多种符合题意的地图，请输出任意一种。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑评测，自动开启 O2 优化。**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $3 \\le r,s \\le 20$ |\n| $2$ | $80$ | 无 |\n\n对于 $100\\%$ 的数据，$3 \\le r,s \\le 2000$。\n\n#### 评分方式\n\n如果一个子任务中的所有数据中，第一行均正确，那么可以得到该子任务一半的分数。\n\n本题启用非官方的自行编写的 [Special Judge](https://www.luogu.com.cn/paste/d4nbx1ua)，也可以在附件中下载。欢迎大家 hack（可私信或直接发帖）。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf)  _T5 Patkice II_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2020/2021 #4] Patkice II", "background": "", "description": "Netflix 的经商人员想要制作一个有关三只鸭子之旅的系列改编。\n\n在 COCI20/21 的第一轮中，鸭子们位于一个洋流的地图中，鸭子们一同出行。鸭子们的起始岛屿用 `o` 表示。鸭子们可以往四个方向进行旅行，分别是：西 $\\to$ 东（`>`），东 $\\to$ 西（`<`），北 $\\to$ 南（`v`） 和南 $\\to$ 北（`^`）。当鸭子们位于洋流的点上时，它们将会向洋流的方向移动一个单位。\n\n平静的海面用 `.` 表示。如果洋流把鸭子们带到了平静的海面、到达地图之外或者回到起始小岛处，它们就会停止旅行。鸭子们想要前往的目的地岛屿用 `x` 表示。\n\n为了让情节更加吸引人，Netflix 进行了改编：现在海面上可能会出现旋涡（鸭子们可能会困在其中）和可把鸭子带到地图之外的洋流。\n\n因此，原先地图被迫改变。但在即将到来的截止期的情况下，导演犯了几个错误：鸭子们不能再通过洋流到达目的地岛屿。\n\nNetflix 导演是非常重要的人，因此他们并不花时间思考情节漏洞。你的任务是替换地图中的几个字符，使得鸭子们能够从起始岛屿到达目的地岛屿。\n\n因情节需要，字符 `o` 和 `x` 不能被修改。其他字符（`<>v^.`）分别表示洋流和平静的海面。你可以用 `<>v^.` 中的任意字符来替换原先地图中 `<>v^.` 的任意字符。", "inputFormat": "第一行输入两个整数 $r$ 和 $s$，分别表示地图的行数和列数。\n\n接下来的 $r$ 行，每行包含 $s$ 个字符，字符必为 `o<>v^.x` 中的其中一个。保证地图上分别只有一个 `o` 和 `x`，并且它们不相邻。", "outputFormat": "第一行输出 $k$，表示需要进行改变的字符的最少数量。\n\n接下来的 $r$ 行，每行输出 $s$ 个字符，表示改变后的地图。\n\n如果有多种符合题意的地图，请输出任意一种。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑评测，自动开启 O2 优化。**\n\n| Subtask | 分值 | 数据范围及约定 |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $3 \\le r,s \\le 20$ |\n| $2$ | $80$ | 无 |\n\n对于 $100\\%$ 的数据，$3 \\le r,s \\le 2000$。\n\n#### 评分方式\n\n如果一个子任务中的所有数据中，第一行均正确，那么可以得到该子任务一半的分数。\n\n本题启用非官方的自行编写的 [Special Judge](https://www.luogu.com.cn/paste/d4nbx1ua)，也可以在附件中下载。欢迎大家 hack（可私信或直接发帖）。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf)  _T5 Patkice II_。**", "locale": "zh-CN"}}}
{"pid": "P7285", "type": "P", "difficulty": 1, "samples": [["1\n1\n1", "1\n1"], ["2\n3\n1 0 1\n5\n0 1 0 1 0", "2\n1 1 1\n2\n0 1 1 1 1"]], "limits": {"time": [1000, 1000, 1000], "memory": [131072, 131072, 131072]}, "tags": ["贪心", "Special Judge", "构造", "洛谷月赛"], "title": "「EZEC-5」修改数组", "background": "", "description": "给定一个长度为 $n$、元素由 $0$ 或 $1$ 组成的数组。\n\n现在可以**选择若干（可以为 0）个值为 $0$ 的元素，将其修改为 $1$**。\n\n记：\n\n- $x$ 为数组中最长连续 $1$ 子段的长度（规定，若所有数均为 $0$，则 $x$ 为 $0$）；\n- $y$ 为修改的元素的个数。\n\n\n\n求要怎么修改才能使 $x-y$ **最大**，并构造一个方案（输出修改后的数组）。", "inputFormat": "**本题含有多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。\n\n接下来 $2\\times T$ 行，每 $2$ 行表示一组数据。\n\n在一组数据中，第一行一个整数 $n$，表示数组的长度；\n\n第二行 $n$ 个整数（0 或 1），表示给定的数组。", "outputFormat": "共 $2\\times T$ 行，每 $2$ 行表示一组数据。\n\n在一组数据中，第一行输出一个整数表示 $x-y$ 的最大值；\n\n第二行 $n$ 个整数（0 或 1）表示修改以后的数组。**如有多个方案，任意输出一种即可。**", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，保证 $T\\le10,1\\le n\\le 10^5$，数组元素 $\\in \\{0,1\\}$。\n\n- Subtask 1(70 points)：保证 $1\\le n\\le 10$；\n- Subtask 2(30 points)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-5」修改数组", "background": "", "description": "给定一个长度为 $n$、元素由 $0$ 或 $1$ 组成的数组。\n\n现在可以**选择若干（可以为 0）个值为 $0$ 的元素，将其修改为 $1$**。\n\n记：\n\n- $x$ 为数组中最长连续 $1$ 子段的长度（规定，若所有数均为 $0$，则 $x$ 为 $0$）；\n- $y$ 为修改的元素的个数。\n\n\n\n求要怎么修改才能使 $x-y$ **最大**，并构造一个方案（输出修改后的数组）。", "inputFormat": "**本题含有多组数据。**\n\n第一行一个整数 $T$ 表示数据组数。\n\n接下来 $2\\times T$ 行，每 $2$ 行表示一组数据。\n\n在一组数据中，第一行一个整数 $n$，表示数组的长度；\n\n第二行 $n$ 个整数（0 或 1），表示给定的数组。", "outputFormat": "共 $2\\times T$ 行，每 $2$ 行表示一组数据。\n\n在一组数据中，第一行输出一个整数表示 $x-y$ 的最大值；\n\n第二行 $n$ 个整数（0 或 1）表示修改以后的数组。**如有多个方案，任意输出一种即可。**", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，保证 $T\\le10,1\\le n\\le 10^5$，数组元素 $\\in \\{0,1\\}$。\n\n- Subtask 1(70 points)：保证 $1\\le n\\le 10$；\n- Subtask 2(30 points)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P7286", "type": "P", "difficulty": 3, "samples": [["3\n3 2 1", "6"], ["5\n3 4 5 4 3", "28"]], "limits": {"time": [700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷月赛"], "title": "「EZEC-5」人赢", "background": "> “我们在 小 Z 面前秀个恩爱吧。”\\\n>“好的。”\n\n小 Z 发现他身边都是人赢，这使他非常自闭。\n\n小 Z 又看着身边的潇，不禁陷入了沉思……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b1ij58kc.png)", "description": "潇有一个数组 $k$，下标为 $1$ 到 $n$ 。\n\n潇定义 $f(x,y)=\\begin{cases} \\min(k_x,k_y) \\times (x + y) &x \\ne y \\\\ k_x\\times x&x=y \\end{cases}$ 。\n\n潇想知道对于任意的 $1 \\le x,y \\le n$，$f(x,y)$ 的最大值是多少。但是她不会做，于是就问了善良的小 Z，然而非常想在妹子面前表现的小 Z 发现他也不会做，就只能够求助善良的你了。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $k$，第 $i$ 个整数为 $k_i$。含义如上文。", "outputFormat": "一行一个整数，表示对于任意的 $1 \\le x,y \\le n$，$f(x,y)$ 的最大值。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$1 \\le n \\le 5000$。\n\n- Subtask 2（10 points）：保证所有 $k_{i}$ 都相等。\n\n- Subtask 3（20 points）：$k_i \\le 10^3$。\n\n- Subtask 4（50 points）：无特殊性质。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$，$1 \\le k_{i} \\le 10^9$。\n\n------------\n\n本题加强版：[link](https://www.luogu.com.cn/problem/P7291)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-5」人赢", "background": "> “我们在 小 Z 面前秀个恩爱吧。”\\\n>“好的。”\n\n小 Z 发现他身边都是人赢，这使他非常自闭。\n\n小 Z 又看着身边的潇，不禁陷入了沉思……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b1ij58kc.png)", "description": "潇有一个数组 $k$，下标为 $1$ 到 $n$ 。\n\n潇定义 $f(x,y)=\\begin{cases} \\min(k_x,k_y) \\times (x + y) &x \\ne y \\\\ k_x\\times x&x=y \\end{cases}$ 。\n\n潇想知道对于任意的 $1 \\le x,y \\le n$，$f(x,y)$ 的最大值是多少。但是她不会做，于是就问了善良的小 Z，然而非常想在妹子面前表现的小 Z 发现他也不会做，就只能够求助善良的你了。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $k$，第 $i$ 个整数为 $k_i$。含义如上文。", "outputFormat": "一行一个整数，表示对于任意的 $1 \\le x,y \\le n$，$f(x,y)$ 的最大值。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$1 \\le n \\le 5000$。\n\n- Subtask 2（10 points）：保证所有 $k_{i}$ 都相等。\n\n- Subtask 3（20 points）：$k_i \\le 10^3$。\n\n- Subtask 4（50 points）：无特殊性质。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$，$1 \\le k_{i} \\le 10^9$。\n\n------------\n\n本题加强版：[link](https://www.luogu.com.cn/problem/P7291)。", "locale": "zh-CN"}}}
{"pid": "P7287", "type": "P", "difficulty": 5, "samples": [["5 2 3 102\n-3 -1 1 -2 0", "17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "二分", "O2优化", "洛谷月赛"], "title": "「EZEC-5」魔法", "background": "", "description": "小明是一个魔法师。\n\n他有一个可以被施魔法的数列 $A$ 。\n\n他有两种魔法：\n\n1. 花费 $a$ 魔法值，选择 $A$ 中的一个区间 $[l,r]$ ，将 $A_{l},A_{l+1}...A_{r}$ 全部 $+1$ 。\n2. 花费 $b$ 魔法值，选择 $A$ 中的一个区间 $[l,r]$ ，将 $A_{l},A_{l+1}...A_{r}$ 全部 $\\times 2$ 。\n\n现在小明想对 $A$ 序列施若干次魔法，使其存在一个子区间元素之和不小于 $s$ 。请求出小明需要花费的最小魔法值。", "inputFormat": "第一行四个整数 $n,a,b,s$，表示序列长度，两种魔法的代价，以及元素之和的要求。\n\n接下来一行 $n$ 个整数，表示初始序列。", "outputFormat": "一个整数，表示最小花费。", "hint": "【本题开启捆绑测试】\n\n对于 $10\\%$ 的数据，$n \\leq 5， |A_i|,s\\le 100$。\n\n对于另外 $20\\%$ 的数据，$n = 10^3$。\n\n对于另外 $5\\%$ 的数据，$A_i \\ge 0$。\n\n对于另外 $25\\%$ 的数据，$a,b \\le 3$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^{5}$ , $1 \\leq a,b \\leq 10^9$ , $- 10^{9} \\leq A_{i} \\leq  10^{9}$ , $1 \\leq s \\leq 10^{9}$\n\n【样例解释】：\n\n对于样例，最佳方法之一为使用一次魔法 1 改变 (1,4)，三次魔法 1 改变 (2,5)，三次魔法 2 改变 (2,5)。\n\n```\n-3 -1 1 -2 0\n\n-2 0 2 -1 0\n-2 1 3 0 1\n-2 2 4 1 2\n-2 3 5 2 3\n-2 6 10 4 6\n-2 12 20 8 12\n-2 24 40 16 24\n\n-2+24+40+16+24 >= 102\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-5」魔法", "background": "", "description": "小明是一个魔法师。\n\n他有一个可以被施魔法的数列 $A$ 。\n\n他有两种魔法：\n\n1. 花费 $a$ 魔法值，选择 $A$ 中的一个区间 $[l,r]$ ，将 $A_{l},A_{l+1}...A_{r}$ 全部 $+1$ 。\n2. 花费 $b$ 魔法值，选择 $A$ 中的一个区间 $[l,r]$ ，将 $A_{l},A_{l+1}...A_{r}$ 全部 $\\times 2$ 。\n\n现在小明想对 $A$ 序列施若干次魔法，使其存在一个子区间元素之和不小于 $s$ 。请求出小明需要花费的最小魔法值。", "inputFormat": "第一行四个整数 $n,a,b,s$，表示序列长度，两种魔法的代价，以及元素之和的要求。\n\n接下来一行 $n$ 个整数，表示初始序列。", "outputFormat": "一个整数，表示最小花费。", "hint": "【本题开启捆绑测试】\n\n对于 $10\\%$ 的数据，$n \\leq 5， |A_i|,s\\le 100$。\n\n对于另外 $20\\%$ 的数据，$n = 10^3$。\n\n对于另外 $5\\%$ 的数据，$A_i \\ge 0$。\n\n对于另外 $25\\%$ 的数据，$a,b \\le 3$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^{5}$ , $1 \\leq a,b \\leq 10^9$ , $- 10^{9} \\leq A_{i} \\leq  10^{9}$ , $1 \\leq s \\leq 10^{9}$\n\n【样例解释】：\n\n对于样例，最佳方法之一为使用一次魔法 1 改变 (1,4)，三次魔法 1 改变 (2,5)，三次魔法 2 改变 (2,5)。\n\n```\n-3 -1 1 -2 0\n\n-2 0 2 -1 0\n-2 1 3 0 1\n-2 2 4 1 2\n-2 3 5 2 3\n-2 6 10 4 6\n-2 12 20 8 12\n-2 24 40 16 24\n\n-2+24+40+16+24 >= 102\n```", "locale": "zh-CN"}}}
{"pid": "P7288", "type": "P", "difficulty": 5, "samples": [["4 3\n1 2 3 4\n1 2\n2 3\n3 4\n1\n2\n3\n", "140\n40"], ["7 2\n1 1 1 1 1 1 1\n1 2\n1 3\n2 6\n2 4\n1 5\n3 7\n2\n6", "70\n52"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化", "洛谷月赛"], "title": "「EZEC-5」树木的愤怒", "background": "小 L 总是在卑微地被强大的人吊打，其中包括小 Y。", "description": "小 L 和 小 Y 是好朋友。有一天，小 L 拿来了一棵 $n$ 个点的有权值的树。第 $u$ 个点的权值为 $a_u$。但是小 Y 讨厌树，所以二话不说直接把树上的一条边给断了。\n\n小 L 很愤怒，但是为了保持该有礼貌，他决定做好事情后再把这条边连起来。但是，他总是操作失误，导致不但没法连起来，还会有另一条边被断掉。于是，这棵树就被分成了 $3$ 个连通块。\n\n小 Y 看不下去了，于是在割掉边后，开始思考一个对他来说很难的问题。他想知道，在割掉第 $x$ 条边后，由于小 L 还会因为操作失误割掉一条边，则最后所形成的 **3 个连通块的权值和的乘积的所有情况的总和** 是多少。即设这三个连通块分别为 $a,b,c$，求在已经割掉一条边的情况下 \n\n$$\n(\\sum_{u\\in a} a_u)\\times (\\sum_{u\\in b} a_u) \\times (\\sum_{u\\in c} a_u)\n$$\n\n的总和。\n\n由于愤怒，每次你算好后，小 L 都会对你帮助小 Y 算出的答案不理不顾，于是小 Y 只好把图恢复到原来那棵树，再割掉一条边，你也得再帮助小 Y 算一次，即再进行一次可能不一样的询问。你需要这样帮助小 Y 一共 $q$ 次，即回答 $q$ 个询问。又因为小 L 和小 Y 都很讨厌太大的数，所以请你用输出这个总和对 $99991$ 取模的结果。又因为输出太耗费时间，你只需要输出所有询问的答案对 $99991$ 取模的总和以及异或和即可。", "inputFormat": "第一行两个正整数 $n, q$。\n\n第二行 $n$ 个非负整数代表 $a_{1,2,...,n}$。\n\n后面 $n-1$ 行中，第 $i$ 行两个正整数 $(u,v)$ 代表第 $i$ 条边 $(u,v)$。\n\n后面 $q$ 个正整数，第 $i$ 个代表第 $i$ 次询问所割掉的边。注意，各个询问是独立的。\n\n", "outputFormat": "输出一共两行。\n\n第一行输出所有的答案对 $99991$ 取模后的和（注意，最终输出可能大于等于 $99991$）。\n\n第二行输出所有的答案对 $99991$ 取模后的异或和。", "hint": "**样例说明**\n\n对于样例一的第一个询问。已经割掉了第一条边（即边 $(1,2)$）。若小 L 再割掉的边是 $(2,3)$，那么 3 个连通块的权值和的乘积为 $1\\times 2\\times (3+4)=14$。若小 L 再割掉的边是 $(3,4)$，那么 3 个连通块的权值和的乘积为 $1\\times (2+3)\\times 4=20$。所以输出为 $14+20=34$。\n\n对于样例一的第二个询问。已经割掉了第二条边（即边 $(2,3)$）。若小 L 再割掉的边是 $(1,2)$，那么 3 个连通块的权值和的乘积为 $1\\times 2\\times (3+4)=14$。若小 L 再割掉的边是 $(3,4)$，那么 3 个连通块的权值和的乘积为 $(1+2)\\times 3\\times 4=36$。所以输出为 $14+36=50$。\n\n同理，我们可以求出样例一的第三个询问，答案为 $20+36=56$。\n\n所以三个答案的总和是 $140$，异或和是 $40$。\n\n---\n**数据规模**\n\n$\\texttt{Subtask 1 (1 pts) } a_i=0$。  \n$\\texttt{Subtask 2 (5 pts) } n,q\\le 300$。  \n$\\texttt{Subtask 3 (14 pts) } n\\le 300$。  \n$\\texttt{Subtask 4 (20 pts) } n\\le 5000$。  \n$\\texttt{Subtask 5 (10 pts) } u=v-1$。  \n$\\texttt{Subtask 6 (50 pts) }$ 没有特殊限制。\n\n对于全部数据，满足 $2 \\le n, q \\le {10}^6$，$0 \\le a_i \\le {10}^6$。\n\n---\n\nidea by lgswdn  \ntested by LHQing, Karry5307", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-5」树木的愤怒", "background": "小 L 总是在卑微地被强大的人吊打，其中包括小 Y。", "description": "小 L 和 小 Y 是好朋友。有一天，小 L 拿来了一棵 $n$ 个点的有权值的树。第 $u$ 个点的权值为 $a_u$。但是小 Y 讨厌树，所以二话不说直接把树上的一条边给断了。\n\n小 L 很愤怒，但是为了保持该有礼貌，他决定做好事情后再把这条边连起来。但是，他总是操作失误，导致不但没法连起来，还会有另一条边被断掉。于是，这棵树就被分成了 $3$ 个连通块。\n\n小 Y 看不下去了，于是在割掉边后，开始思考一个对他来说很难的问题。他想知道，在割掉第 $x$ 条边后，由于小 L 还会因为操作失误割掉一条边，则最后所形成的 **3 个连通块的权值和的乘积的所有情况的总和** 是多少。即设这三个连通块分别为 $a,b,c$，求在已经割掉一条边的情况下 \n\n$$\n(\\sum_{u\\in a} a_u)\\times (\\sum_{u\\in b} a_u) \\times (\\sum_{u\\in c} a_u)\n$$\n\n的总和。\n\n由于愤怒，每次你算好后，小 L 都会对你帮助小 Y 算出的答案不理不顾，于是小 Y 只好把图恢复到原来那棵树，再割掉一条边，你也得再帮助小 Y 算一次，即再进行一次可能不一样的询问。你需要这样帮助小 Y 一共 $q$ 次，即回答 $q$ 个询问。又因为小 L 和小 Y 都很讨厌太大的数，所以请你用输出这个总和对 $99991$ 取模的结果。又因为输出太耗费时间，你只需要输出所有询问的答案对 $99991$ 取模的总和以及异或和即可。", "inputFormat": "第一行两个正整数 $n, q$。\n\n第二行 $n$ 个非负整数代表 $a_{1,2,...,n}$。\n\n后面 $n-1$ 行中，第 $i$ 行两个正整数 $(u,v)$ 代表第 $i$ 条边 $(u,v)$。\n\n后面 $q$ 个正整数，第 $i$ 个代表第 $i$ 次询问所割掉的边。注意，各个询问是独立的。\n\n", "outputFormat": "输出一共两行。\n\n第一行输出所有的答案对 $99991$ 取模后的和（注意，最终输出可能大于等于 $99991$）。\n\n第二行输出所有的答案对 $99991$ 取模后的异或和。", "hint": "**样例说明**\n\n对于样例一的第一个询问。已经割掉了第一条边（即边 $(1,2)$）。若小 L 再割掉的边是 $(2,3)$，那么 3 个连通块的权值和的乘积为 $1\\times 2\\times (3+4)=14$。若小 L 再割掉的边是 $(3,4)$，那么 3 个连通块的权值和的乘积为 $1\\times (2+3)\\times 4=20$。所以输出为 $14+20=34$。\n\n对于样例一的第二个询问。已经割掉了第二条边（即边 $(2,3)$）。若小 L 再割掉的边是 $(1,2)$，那么 3 个连通块的权值和的乘积为 $1\\times 2\\times (3+4)=14$。若小 L 再割掉的边是 $(3,4)$，那么 3 个连通块的权值和的乘积为 $(1+2)\\times 3\\times 4=36$。所以输出为 $14+36=50$。\n\n同理，我们可以求出样例一的第三个询问，答案为 $20+36=56$。\n\n所以三个答案的总和是 $140$，异或和是 $40$。\n\n---\n**数据规模**\n\n$\\texttt{Subtask 1 (1 pts) } a_i=0$。  \n$\\texttt{Subtask 2 (5 pts) } n,q\\le 300$。  \n$\\texttt{Subtask 3 (14 pts) } n\\le 300$。  \n$\\texttt{Subtask 4 (20 pts) } n\\le 5000$。  \n$\\texttt{Subtask 5 (10 pts) } u=v-1$。  \n$\\texttt{Subtask 6 (50 pts) }$ 没有特殊限制。\n\n对于全部数据，满足 $2 \\le n, q \\le {10}^6$，$0 \\le a_i \\le {10}^6$。\n\n---\n\nidea by lgswdn  \ntested by LHQing, Karry5307", "locale": "zh-CN"}}}
{"pid": "P7289", "type": "P", "difficulty": 7, "samples": [["2 10\n3 1\n5 2", "2\n16"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "数学", "递推", "O2优化", "组合数学", "排列组合", "生成函数", "微积分", "积分", "级数", "快速傅里叶变换 FFT", "快速数论变换 NTT", "洛谷月赛"], "title": "「EZEC-5」「KrOI2021」Chasse Neige", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kben34ml.png)\n\n『我喜欢雪。』\n\n『之前虽然讨厌寒冷，现在却是最喜欢了。』\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sbuj1tnc.png)", "description": "Rikka 给了你 $T$ 组询问，每组询问给定两个正整数 $n,k$，你需要告诉 Rikka 有多少个长度为 $n$ 的排列 $\\pi$ 满足如下条件：\n\n- $\\pi_1<\\pi_2$\n\n- $\\pi_{n-1}>\\pi_{n}$\n\n- 恰好存在 $k$ 个位置 $i(2\\leq i\\leq n-1)$ 满足 $\\pi_{i-1}<\\pi_{i}$ 且 $\\pi_{i}>\\pi_{i+1}$。\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行两个整数 $T,r$，表示询问次数以及 $n$ 的值域。\n\n接下来 $T$ 行，每行两个整数 $n,k$，意义如题意所示。", "outputFormat": "$T$ 行，每行一个正整数，表示答案对 $998244353$ 取模的值。", "hint": "### 样例解释 1\n\n对于第一组询问，$n=3,k=1$，$(1,3,2)$ 和 $(2,3,1)$ 均满足条件，答案为 $2$。\n\n对于第二组询问，满足条件的排列为：\n\n$$(1,3,2,5,4),(1,4,2,5,3),(1,4,3,5,2),(1,5,2,4,3),(1,5,3,4,2)\\\\(2,3,1,5,4),(2,4,1,5,3),(2,4,3,5,1),(2,5,1,4,3),(2,5,3,4,1)\\\\(3,4,1,5,2),(3,4,2,5,1),(3,5,1,4,2),(3,5,2,4,1),(4,5,1,3,2),(4,5,2,3,1)$$\n\n共 $16$ 个，所以答案为 $16$。\n\n### 数据范围\n\n| 子任务编号 | 分值 | $T\\leq $ | $r\\leq $ | 其他限制 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| Subtask 1 | $1$ | $1$ | $10$ |  |\n| Subtask 2 | $5$ | $2\\times 10^5$ | $10$ |  |\n| Subtask 3 | $13$ | $1$ | $2\\times 10^3$ |  |\n| Subtask 4 | $13$ | $2\\times 10^5$ | $2\\times 10^3$ |  |\n| Subtask 5 | $16$ | $2\\times 10^5$ | $2\\times 10^5$ | $k=\\lfloor\\frac{n-1}{2}\\rfloor$ 且 $n$ 为奇数 |\n| Subtask 6 | $16$ | $2\\times 10^5$ | $2\\times 10^5$ | $k=\\lfloor\\frac{n-1}{2}\\rfloor-1$ |\n| Subtask 7 | $36$ | $2\\times 10^5$ | $2\\times 10^5$ |  |\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 2\\times 10^5,3\\leq n\\leq r\\leq 2\\times 10^5,\\max(1,\\lfloor\\frac{n-1}{2}\\rfloor-10)\\leq k\\leq \\lfloor\\frac{n-1}{2}\\rfloor$。\n\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-5」「KrOI2021」Chasse Neige", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kben34ml.png)\n\n『我喜欢雪。』\n\n『之前虽然讨厌寒冷，现在却是最喜欢了。』\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sbuj1tnc.png)", "description": "Rikka 给了你 $T$ 组询问，每组询问给定两个正整数 $n,k$，你需要告诉 Rikka 有多少个长度为 $n$ 的排列 $\\pi$ 满足如下条件：\n\n- $\\pi_1<\\pi_2$\n\n- $\\pi_{n-1}>\\pi_{n}$\n\n- 恰好存在 $k$ 个位置 $i(2\\leq i\\leq n-1)$ 满足 $\\pi_{i-1}<\\pi_{i}$ 且 $\\pi_{i}>\\pi_{i+1}$。\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行两个整数 $T,r$，表示询问次数以及 $n$ 的值域。\n\n接下来 $T$ 行，每行两个整数 $n,k$，意义如题意所示。", "outputFormat": "$T$ 行，每行一个正整数，表示答案对 $998244353$ 取模的值。", "hint": "### 样例解释 1\n\n对于第一组询问，$n=3,k=1$，$(1,3,2)$ 和 $(2,3,1)$ 均满足条件，答案为 $2$。\n\n对于第二组询问，满足条件的排列为：\n\n$$(1,3,2,5,4),(1,4,2,5,3),(1,4,3,5,2),(1,5,2,4,3),(1,5,3,4,2)\\\\(2,3,1,5,4),(2,4,1,5,3),(2,4,3,5,1),(2,5,1,4,3),(2,5,3,4,1)\\\\(3,4,1,5,2),(3,4,2,5,1),(3,5,1,4,2),(3,5,2,4,1),(4,5,1,3,2),(4,5,2,3,1)$$\n\n共 $16$ 个，所以答案为 $16$。\n\n### 数据范围\n\n| 子任务编号 | 分值 | $T\\leq $ | $r\\leq $ | 其他限制 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| Subtask 1 | $1$ | $1$ | $10$ |  |\n| Subtask 2 | $5$ | $2\\times 10^5$ | $10$ |  |\n| Subtask 3 | $13$ | $1$ | $2\\times 10^3$ |  |\n| Subtask 4 | $13$ | $2\\times 10^5$ | $2\\times 10^3$ |  |\n| Subtask 5 | $16$ | $2\\times 10^5$ | $2\\times 10^5$ | $k=\\lfloor\\frac{n-1}{2}\\rfloor$ 且 $n$ 为奇数 |\n| Subtask 6 | $16$ | $2\\times 10^5$ | $2\\times 10^5$ | $k=\\lfloor\\frac{n-1}{2}\\rfloor-1$ |\n| Subtask 7 | $36$ | $2\\times 10^5$ | $2\\times 10^5$ |  |\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 2\\times 10^5,3\\leq n\\leq r\\leq 2\\times 10^5,\\max(1,\\lfloor\\frac{n-1}{2}\\rfloor-10)\\leq k\\leq \\lfloor\\frac{n-1}{2}\\rfloor$。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P7290", "type": "P", "difficulty": 7, "samples": [["10\n1 8\n5 9\n5 6\n2 8\n3 7\n4 5\n3 7\n6 7\n3 9\n5 10\n10\n2 4 2 5\n5 9 8 10\n2 9 3 6\n3 7 6 9\n1 10 2 9\n4 5 1 7\n9 10 4 9\n2 3 6 9\n1 7 6 7\n3 10 3 4\n", "2\n3\n4\n3\n7\n7\n1\n2\n2\n2\n"]], "limits": {"time": [30000, 30000, 30000, 30000, 30000, 30000, 30000, 30000, 30000], "memory": [340992, 340992, 340992, 340992, 340992, 340992, 340992, 340992, 340992]}, "tags": ["O2优化", "洛谷月赛"], "title": "「EZEC-5」暴力出奇迹", "background": "### 滥用本题评测将封号！", "description": "给定一个平面，有 $n$ 个竖直线段，第 $i$ 条的端点是 $(i,a_i)$ 和 $(i,b_i)$。\n\n有 $m$ 次查询，每次查询给定 $l,r,x,y$，查询对所有 $(x,i)$ 和 $(y,i)$ 连接成的水平线段，满足 $l\\le i\\le r$，其最多能与多少竖直线段相交，定义端点为 $(i,a_1)$ 和 $(i,a_2)$ 的竖直线段与端点为 $(b_1,j)$ 和 $(b_2,j)$ 的水平线段相交，当且仅当 $a_1\\le j\\le a_2$ 且 $b_1\\le i\\le b_2$，注意当线段两端点重合时，如果有其他线段经过这个重合点，仍然算作相交。", "inputFormat": "第一行一个数表示 $n$。\n\n之后 $n$ 行，第 $i$ 行两个数 $a_i,b_i$ 表示 第 $i$ 条竖直线段的两个端点，保证 $a_i \\le b_i$。\n\n之后一行一个数表示 $m$。\n\n之后 $m$ 行，每行四个数表示一次询问的 $l,r,x,y$。", "outputFormat": "对于每次询问，输出一行一个数表示答案。", "hint": "注意：本题采用**捆绑测试**，只有当你通过一个 subtask 中的所有测试点后，你才能拿到这个 subtask 的分数。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^5,1\\le m\\le 9\\times 10^5$，$1\\le l,r,x,y,a_i,b_i\\le n$。\n\n---\n\n## 以下为旧数据范围\n\n对于其中 $5\\%$ 的数据，为样例 1。\n\n对于另外 $14\\%$ 的数据，$m=1$。\n\n对于另外 $5\\%$ 的数据，$n,m\\leq 500$。\n\n对于另外 $14\\%$ 的数据，$n\\leq 500$。\n\n对于另外 $19\\%$ 的数据，$n,m\\leq 2000$。\n\n对于另外 $19\\%$ 的数据，$n\\leq 20000$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^4,1\\le m\\le 5\\times 10^5$，$1\\le l,r,x,y,a_i,b_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-5」暴力出奇迹", "background": "### 滥用本题评测将封号！", "description": "给定一个平面，有 $n$ 个竖直线段，第 $i$ 条的端点是 $(i,a_i)$ 和 $(i,b_i)$。\n\n有 $m$ 次查询，每次查询给定 $l,r,x,y$，查询对所有 $(x,i)$ 和 $(y,i)$ 连接成的水平线段，满足 $l\\le i\\le r$，其最多能与多少竖直线段相交，定义端点为 $(i,a_1)$ 和 $(i,a_2)$ 的竖直线段与端点为 $(b_1,j)$ 和 $(b_2,j)$ 的水平线段相交，当且仅当 $a_1\\le j\\le a_2$ 且 $b_1\\le i\\le b_2$，注意当线段两端点重合时，如果有其他线段经过这个重合点，仍然算作相交。", "inputFormat": "第一行一个数表示 $n$。\n\n之后 $n$ 行，第 $i$ 行两个数 $a_i,b_i$ 表示 第 $i$ 条竖直线段的两个端点，保证 $a_i \\le b_i$。\n\n之后一行一个数表示 $m$。\n\n之后 $m$ 行，每行四个数表示一次询问的 $l,r,x,y$。", "outputFormat": "对于每次询问，输出一行一个数表示答案。", "hint": "注意：本题采用**捆绑测试**，只有当你通过一个 subtask 中的所有测试点后，你才能拿到这个 subtask 的分数。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^5,1\\le m\\le 9\\times 10^5$，$1\\le l,r,x,y,a_i,b_i\\le n$。\n\n---\n\n## 以下为旧数据范围\n\n对于其中 $5\\%$ 的数据，为样例 1。\n\n对于另外 $14\\%$ 的数据，$m=1$。\n\n对于另外 $5\\%$ 的数据，$n,m\\leq 500$。\n\n对于另外 $14\\%$ 的数据，$n\\leq 500$。\n\n对于另外 $19\\%$ 的数据，$n,m\\leq 2000$。\n\n对于另外 $19\\%$ 的数据，$n\\leq 20000$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^4,1\\le m\\le 5\\times 10^5$，$1\\le l,r,x,y,a_i,b_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P7291", "type": "P", "difficulty": 4, "samples": [["3\n3 2 1", "6"], ["5\n3 4 5 4 3", "28"]], "limits": {"time": [300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "「EZEC-5」人赢 加强版", "background": "> “我们在 小 Z 面前秀个恩爱吧。”\\\n>“好的。”\n\n小 Z 发现他身边都是人赢，这使他非常自闭。\n\n小 Z 又看着身边的潇，不禁陷入了沉思……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b1ij58kc.png)", "description": "潇有一个数组 $k$，下标为 $1$ 到 $n$ 。\n\n潇定义 $f(x,y)=\\begin{cases} \\min(k_x,k_y) \\times (x + y) &x \\ne y \\\\ k_x\\times x&x=y \\end{cases}$ 。\n\n潇想知道对于任意的 $1 \\le x,y \\le n$，$f(x,y)$ 的最大值是多少。但是她不会做，于是就问了善良的 小 Z，然而非常想在妹子面前表现的 小 Z 发现他也不会做，就只能够求助善良的你了。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $k$，第 $i$ 个整数为 $k_i$。含义如上文。", "outputFormat": "一行一个整数，表示对于任意的 $1 \\le x,y \\le n$，$f(x,y)$ 的最大值。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 points）：$1 \\le n \\le 50$。\n\n- Subtask 2（20 points）：$1 \\le n \\le 5000$。\n\n- Subtask 3（20 points）：$1 \\le n \\le 10^6$。\n\n- Subtask 4（10 points）：保证所有 $k_{i}$ 都相等。\n\n- Subtask 5（40 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^7$，$1 \\le k_{i} \\le 10^9$。\n\n**本题建议使用较快的读入方式。**\n\nstd 使用的快读：\n\n```cpp\n#define getchar()(p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\nchar buf[1<<21],*p1=buf,*p2=buf;\ninline int read()\n{\n    char c=getchar();int x=0;bool f=0;\n    for(;!isdigit(c);c=getchar())f^=!(c^45);\n    for(;isdigit(c);c=getchar())x=(x<<1)+(x<<3)+(c^48);\n    if(f)x=-x;return x;\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-5」人赢 加强版", "background": "> “我们在 小 Z 面前秀个恩爱吧。”\\\n>“好的。”\n\n小 Z 发现他身边都是人赢，这使他非常自闭。\n\n小 Z 又看着身边的潇，不禁陷入了沉思……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b1ij58kc.png)", "description": "潇有一个数组 $k$，下标为 $1$ 到 $n$ 。\n\n潇定义 $f(x,y)=\\begin{cases} \\min(k_x,k_y) \\times (x + y) &x \\ne y \\\\ k_x\\times x&x=y \\end{cases}$ 。\n\n潇想知道对于任意的 $1 \\le x,y \\le n$，$f(x,y)$ 的最大值是多少。但是她不会做，于是就问了善良的 小 Z，然而非常想在妹子面前表现的 小 Z 发现他也不会做，就只能够求助善良的你了。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $k$，第 $i$ 个整数为 $k_i$。含义如上文。", "outputFormat": "一行一个整数，表示对于任意的 $1 \\le x,y \\le n$，$f(x,y)$ 的最大值。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（10 points）：$1 \\le n \\le 50$。\n\n- Subtask 2（20 points）：$1 \\le n \\le 5000$。\n\n- Subtask 3（20 points）：$1 \\le n \\le 10^6$。\n\n- Subtask 4（10 points）：保证所有 $k_{i}$ 都相等。\n\n- Subtask 5（40 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^7$，$1 \\le k_{i} \\le 10^9$。\n\n**本题建议使用较快的读入方式。**\n\nstd 使用的快读：\n\n```cpp\n#define getchar()(p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\nchar buf[1<<21],*p1=buf,*p2=buf;\ninline int read()\n{\n    char c=getchar();int x=0;bool f=0;\n    for(;!isdigit(c);c=getchar())f^=!(c^45);\n    for(;isdigit(c);c=getchar())x=(x<<1)+(x<<3)+(c^48);\n    if(f)x=-x;return x;\n}\n```", "locale": "zh-CN"}}}
{"pid": "P7292", "type": "P", "difficulty": 7, "samples": [["2 10\n3 1\n5 2", "2\n16"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "数学", "递推", "O2优化", "组合数学", "排列组合", "生成函数", "微积分", "积分", "级数", "快速傅里叶变换 FFT", "快速数论变换 NTT"], "title": "「EZEC-5」「KrOI2021」Chasse Neige 加强版", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kben34ml.png)\n\n『我喜欢雪。』\n\n『之前虽然讨厌寒冷，现在却是最喜欢了。』\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sbuj1tnc.png)", "description": "**本题与原题的区别是 $r$ 的范围扩大了，应该能卡掉 $O(n\\log^2n)$ 的分治 FFT 做法，如果有分治 FFT 能过请联系我。同时，如果你的做法是 $O(n\\log n)$ 的话，请注意常数优化。**\n\nRikka 给了你 $T$ 组询问，每组询问给定两个正整数 $n,k$，你需要告诉 Rikka 有多少个长度为 $n$ 的排列 $\\pi$ 满足如下条件：\n\n- $\\pi_1<\\pi_2$\n\n- $\\pi_{n-1}>\\pi_{n}$\n\n- 恰好存在 $k$ 个位置 $i(2\\leq i\\leq n-1)$ 满足 $\\pi_{i-1}<\\pi_{i}$ 且 $\\pi_{i}>\\pi_{i+1}$。\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行两个整数 $T,r$，表示询问次数以及 $n$ 的值域。\n\n接下来 $T$ 行，每行两个整数 $n,k$，意义如题意所示。", "outputFormat": "$T$ 行，每行一个正整数，表示答案对 $998244353$ 取模的值。", "hint": "### 样例解释 1\n\n对于第一组询问，$n=3,k=1$，$(1,3,2)$ 和 $(2,3,1)$ 均满足条件，答案为 $2$。\n\n对于第二组询问，满足条件的排列为：\n\n$$(1,3,2,5,4),(1,4,2,5,3),(1,4,3,5,2),(1,5,2,4,3),(1,5,3,4,2)\\\\(2,3,1,5,4),(2,4,1,5,3),(2,4,3,5,1),(2,5,1,4,3),(2,5,3,4,1)\\\\(3,4,1,5,2),(3,4,2,5,1),(3,5,1,4,2),(3,5,2,4,1),(4,5,1,3,2),(4,5,2,3,1)$$\n\n共 $16$ 个，所以答案为 $16$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 2\\times 10^5,3\\leq n\\leq r\\leq 10^6,\\max(1,\\lfloor\\frac{n-1}{2}\\rfloor-10)\\leq k\\leq \\lfloor\\frac{n-1}{2}\\rfloor$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-5」「KrOI2021」Chasse Neige 加强版", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kben34ml.png)\n\n『我喜欢雪。』\n\n『之前虽然讨厌寒冷，现在却是最喜欢了。』\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sbuj1tnc.png)", "description": "**本题与原题的区别是 $r$ 的范围扩大了，应该能卡掉 $O(n\\log^2n)$ 的分治 FFT 做法，如果有分治 FFT 能过请联系我。同时，如果你的做法是 $O(n\\log n)$ 的话，请注意常数优化。**\n\nRikka 给了你 $T$ 组询问，每组询问给定两个正整数 $n,k$，你需要告诉 Rikka 有多少个长度为 $n$ 的排列 $\\pi$ 满足如下条件：\n\n- $\\pi_1<\\pi_2$\n\n- $\\pi_{n-1}>\\pi_{n}$\n\n- 恰好存在 $k$ 个位置 $i(2\\leq i\\leq n-1)$ 满足 $\\pi_{i-1}<\\pi_{i}$ 且 $\\pi_{i}>\\pi_{i+1}$。\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行两个整数 $T,r$，表示询问次数以及 $n$ 的值域。\n\n接下来 $T$ 行，每行两个整数 $n,k$，意义如题意所示。", "outputFormat": "$T$ 行，每行一个正整数，表示答案对 $998244353$ 取模的值。", "hint": "### 样例解释 1\n\n对于第一组询问，$n=3,k=1$，$(1,3,2)$ 和 $(2,3,1)$ 均满足条件，答案为 $2$。\n\n对于第二组询问，满足条件的排列为：\n\n$$(1,3,2,5,4),(1,4,2,5,3),(1,4,3,5,2),(1,5,2,4,3),(1,5,3,4,2)\\\\(2,3,1,5,4),(2,4,1,5,3),(2,4,3,5,1),(2,5,1,4,3),(2,5,3,4,1)\\\\(3,4,1,5,2),(3,4,2,5,1),(3,5,1,4,2),(3,5,2,4,1),(4,5,1,3,2),(4,5,2,3,1)$$\n\n共 $16$ 个，所以答案为 $16$。\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$1\\leq T\\leq 2\\times 10^5,3\\leq n\\leq r\\leq 10^6,\\max(1,\\lfloor\\frac{n-1}{2}\\rfloor-10)\\leq k\\leq \\lfloor\\frac{n-1}{2}\\rfloor$。", "locale": "zh-CN"}}}
{"pid": "P7293", "type": "P", "difficulty": 5, "samples": [["2\n\n2 1\n1 2\n\n4 4\n1 2\n2 3\n3 4\n4 1", "4"], ["3\n\n4 4\n1 2\n2 3\n3 1\n3 4\n\n6 5\n1 2\n2 3\n3 4\n4 5\n5 6\n\n7 7\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 1", "706"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["动态规划 DP", "线段树", "USACO", "2021", "O2优化", "组合数学", "容斥原理", "扫描线"], "title": "[USACO21JAN] Sum of Distances P", "background": "", "description": "Bessie 有一些无向连通图 $G_1,G_2,…,G_K$（$2≤K≤5⋅10^4$）。对于每一个 $1≤i≤K$，$G_i$ 有 $N_i$（$N_i≥2$）个编号为 $1…N_i$ 的结点与 $M_i$（$M_i≥N_i−1$）条边。$G_i$ 可能含有自环，但同一对结点之间不会存在多条边。 现在 Elsie 用 $N_1⋅N_2⋯N_K$ 个结点建立了一个新的无向图 $G$，每个结点用一个 $K$ 元组 $(j_1,j_2,…,j_K)$ 标号，其中 $1≤j_i≤N_i$。若对于所有的 $1≤i≤K$，$j_i$ 与 $k_i$ 在 $G_i$ 中连有一条边，则在 $G$ 中结点 $(j_1,j_2,…,j_K)$ 和 $(k_1,k_2,…,k_K)$ 之间连有一条边。 定义 $G$ 中位于同一连通分量的两个结点的 *距离* 为从一个结点到另一个结点的路径上的最小边数。计算 $G$ 中结点 $(1,1,…,1)$ 与所有与其在同一连通分量的结点的距离之和，对 $10^9+7$ 取模。", "inputFormat": "输入的第一行包含 $K$，为图的数量。\n\n每个图的描述的第一行包含 $N_i$ 和 $M_i$，以下是 $M_i$ 条边。\n\n为提高可读性，相邻的图之间用一个空行隔开。输入保证 $∑N_i≤10^5$ 以及 $∑M_i≤2⋅10^5$。", "outputFormat": "输出结点 $(1,1,…,1)$ 与所有该结点可以到达的结点的距离之和，对 $10^9+7$ 取模。\n\n", "hint": "#### 样例 1 解释\n\n$G$ 包含 $2⋅4=8$ 个结点，其中 $4$ 个结点不与结点 $(1,1)$ 连通。有 $2$ 个结点与 $(1,1)$ 的距离为 $1$，$1$ 个结点的距离为 $2$。所以答案为 $2⋅1+1⋅2=4$。 \n\n#### 样例 2 解释\n\n$G$ 包含 $4⋅6⋅7=168$ 个结点，均与结点 $(1,1,1)$ 连通。对于每一个 $i∈[1,7]$，与结点 $(1,1,1)$ 距离为 $i$ 的结点数量为下列数组中的第 $i$ 个元素：$[4,23,28,36,40,24,12]$。\n\n#### 测试点特性\n\n - 测试点 $3-4$ 满足 $∏N_i≤300$。\n - 测试点 $5-10$ 满足 $∑N_i≤300$。\n - 测试点 $11-20$ 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] Sum of Distances P", "background": "", "description": "Bessie 有一些无向连通图 $G_1,G_2,…,G_K$（$2≤K≤5⋅10^4$）。对于每一个 $1≤i≤K$，$G_i$ 有 $N_i$（$N_i≥2$）个编号为 $1…N_i$ 的结点与 $M_i$（$M_i≥N_i−1$）条边。$G_i$ 可能含有自环，但同一对结点之间不会存在多条边。 现在 Elsie 用 $N_1⋅N_2⋯N_K$ 个结点建立了一个新的无向图 $G$，每个结点用一个 $K$ 元组 $(j_1,j_2,…,j_K)$ 标号，其中 $1≤j_i≤N_i$。若对于所有的 $1≤i≤K$，$j_i$ 与 $k_i$ 在 $G_i$ 中连有一条边，则在 $G$ 中结点 $(j_1,j_2,…,j_K)$ 和 $(k_1,k_2,…,k_K)$ 之间连有一条边。 定义 $G$ 中位于同一连通分量的两个结点的 *距离* 为从一个结点到另一个结点的路径上的最小边数。计算 $G$ 中结点 $(1,1,…,1)$ 与所有与其在同一连通分量的结点的距离之和，对 $10^9+7$ 取模。", "inputFormat": "输入的第一行包含 $K$，为图的数量。\n\n每个图的描述的第一行包含 $N_i$ 和 $M_i$，以下是 $M_i$ 条边。\n\n为提高可读性，相邻的图之间用一个空行隔开。输入保证 $∑N_i≤10^5$ 以及 $∑M_i≤2⋅10^5$。", "outputFormat": "输出结点 $(1,1,…,1)$ 与所有该结点可以到达的结点的距离之和，对 $10^9+7$ 取模。\n\n", "hint": "#### 样例 1 解释\n\n$G$ 包含 $2⋅4=8$ 个结点，其中 $4$ 个结点不与结点 $(1,1)$ 连通。有 $2$ 个结点与 $(1,1)$ 的距离为 $1$，$1$ 个结点的距离为 $2$。所以答案为 $2⋅1+1⋅2=4$。 \n\n#### 样例 2 解释\n\n$G$ 包含 $4⋅6⋅7=168$ 个结点，均与结点 $(1,1,1)$ 连通。对于每一个 $i∈[1,7]$，与结点 $(1,1,1)$ 距离为 $i$ 的结点数量为下列数组中的第 $i$ 个元素：$[4,23,28,36,40,24,12]$。\n\n#### 测试点特性\n\n - 测试点 $3-4$ 满足 $∏N_i≤300$。\n - 测试点 $5-10$ 满足 $∑N_i≤300$。\n - 测试点 $11-20$ 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN"}}}
{"pid": "P7294", "type": "P", "difficulty": 7, "samples": [["5 4\n1 100 100 20\n20\n1 1\n2 1\n3 1\n4 1\n5 1\n1 2\n2 2\n3 2\n4 2\n5 2\n1 3\n2 3\n3 3\n4 3\n5 3\n1 4\n2 4\n3 4\n4 4\n5 4", "0\n1\n2\n3\n4\n1\n5\n11\n19\n29\n2\n9\n20\n35\n54\n3\n13\n29\n49\n69"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["二分", "USACO", "2021", "O2优化", "凸包", "单调栈", "组合优化", "保序回归"], "title": "[USACO21JAN] Minimum Cost Paths P", "background": "", "description": "Farmer John 的牧草地可以看作是一个$N×M$（$2≤N≤10^9, 2≤M≤2⋅10^5$）的正方形方格组成的二维方阵（想象一个巨大的棋盘）。对于 $x∈[1,N],y∈[1,M]$，从上往下第 $x$ 行、从左往右第 $y$ 列的方格记为 $(x,y)$。此外，对于每一个 $y∈[1,M]$，第 $y$ 列拥有一个代价 $c_y$（$1≤c_y≤10^9$）。\n\nBessie 从方格 $(1,1)$ 出发。如果她现在位于方格 $(x,y)$，则她可以执行以下操作之一：\n\n-  如果 $y<M$，Bessie 可以以 $x^2$ 的代价移动到下一列（$y$ 增加一）。\n- 如果 $x<N$，Bessie 可以以 $c_y$ 的代价移动到下一行（$x$ 增加一）。 \n\n给定 $Q$（$1≤Q≤2⋅10^5$）个独立的询问，每个询问给定 $(x_i,y_i)$（$x_i∈[1,N],y_i∈[1,M]$），计算 Bessie 从 $(1,1)$ 移动到 $(x_i,y_i)$ 的最小总代价。", "inputFormat": "输入的第一行包含 $N$ 和 $M$。\n\n第二行包含 $M$ 个空格分隔的整数 $c_1,c_2,…,c_M$。\n\n第三行包含 $Q$。 \n\n最后 $Q$ 行每行包含两个空格分隔的整数 $x_i$ 和 $y_i$。", "outputFormat": "输出 $Q$ 行，为每个询问的答案。\n\n注意本题计算中所使用的整数大小可能需要使用 64 位整数型（例如，C/C++ 中的 long long）。", "hint": "#### 样例 1 解释\n\n输出以方阵形式表示如下：\n\n```\n    1  2  3  4\n  *--*--*--*--*\n1 | 0| 1| 2| 3|\n  *--*--*--*--*\n2 | 1| 5| 9|13|\n  *--*--*--*--*\n3 | 2|11|20|29|\n  *--*--*--*--*\n4 | 3|19|35|49|\n  *--*--*--*--*\n5 | 4|29|54|69|\n  *--*--*--*--*\n```\n\n#### 测试点性质：\n\n - 测试点 1-3 满足 $N,M≤2000$。\n - 测试点 4-8 满足 $c_2>c_3>⋯>c_M$。\n - 测试点 9-15 满足 $N≤2⋅10^5$。\n - 测试点 16-20 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] Minimum Cost Paths P", "background": "", "description": "Farmer John 的牧草地可以看作是一个$N×M$（$2≤N≤10^9, 2≤M≤2⋅10^5$）的正方形方格组成的二维方阵（想象一个巨大的棋盘）。对于 $x∈[1,N],y∈[1,M]$，从上往下第 $x$ 行、从左往右第 $y$ 列的方格记为 $(x,y)$。此外，对于每一个 $y∈[1,M]$，第 $y$ 列拥有一个代价 $c_y$（$1≤c_y≤10^9$）。\n\nBessie 从方格 $(1,1)$ 出发。如果她现在位于方格 $(x,y)$，则她可以执行以下操作之一：\n\n-  如果 $y<M$，Bessie 可以以 $x^2$ 的代价移动到下一列（$y$ 增加一）。\n- 如果 $x<N$，Bessie 可以以 $c_y$ 的代价移动到下一行（$x$ 增加一）。 \n\n给定 $Q$（$1≤Q≤2⋅10^5$）个独立的询问，每个询问给定 $(x_i,y_i)$（$x_i∈[1,N],y_i∈[1,M]$），计算 Bessie 从 $(1,1)$ 移动到 $(x_i,y_i)$ 的最小总代价。", "inputFormat": "输入的第一行包含 $N$ 和 $M$。\n\n第二行包含 $M$ 个空格分隔的整数 $c_1,c_2,…,c_M$。\n\n第三行包含 $Q$。 \n\n最后 $Q$ 行每行包含两个空格分隔的整数 $x_i$ 和 $y_i$。", "outputFormat": "输出 $Q$ 行，为每个询问的答案。\n\n注意本题计算中所使用的整数大小可能需要使用 64 位整数型（例如，C/C++ 中的 long long）。", "hint": "#### 样例 1 解释\n\n输出以方阵形式表示如下：\n\n```\n    1  2  3  4\n  *--*--*--*--*\n1 | 0| 1| 2| 3|\n  *--*--*--*--*\n2 | 1| 5| 9|13|\n  *--*--*--*--*\n3 | 2|11|20|29|\n  *--*--*--*--*\n4 | 3|19|35|49|\n  *--*--*--*--*\n5 | 4|29|54|69|\n  *--*--*--*--*\n```\n\n#### 测试点性质：\n\n - 测试点 1-3 满足 $N,M≤2000$。\n - 测试点 4-8 满足 $c_2>c_3>⋯>c_M$。\n - 测试点 9-15 满足 $N≤2⋅10^5$。\n - 测试点 16-20 没有额外限制。\n\n供题：Benjamin Qi ", "locale": "zh-CN"}}}
{"pid": "P7295", "type": "P", "difficulty": 7, "samples": [["4 8 9\nABBAAAAA\nABAAAABA\nCAADABBA\nAAAAAAAA\n1 1 4 8\n3 5 3 8\n1 3 2 4\n1 4 2 5\n1 1 3 3\n4 4 4 4\n2 6 4 8\n3 5 4 6\n1 6 3 8", "6\n3\n2\n1\n4\n1\n3\n2\n2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "USACO", "并查集", "2021", "cdq 分治", "广度优先搜索 BFS", "平面图欧拉公式", "前缀和", "栈", "分块"], "title": "[USACO21JAN] Paint by Letters P", "background": "", "description": "Bessie 最近收到了一套颜料。画布可以用一个 $N×M$ 的矩形方阵表示，其中行从上往下编号为 $1…N$，列从左往右编号为 $1…M$（$1≤N,M≤1000$）。被涂色的方格的颜色可以用一个 `A` 到 `Z` 的大写字母表示。初始时，所有方格均未被涂色，每个方格至多只能被涂色一次。\n\nBessie 指定了每个方格她所希望的颜色。她一笔可以将一些组成连通分量的方格涂上颜色，也就是说这些方格之间可以通过相邻方格互相到达。如果两个方格有公共边则认为它们是相邻的。\n\n例如，$3×3$ 的画布\n\n```\nAAB\nBBA\nBBB\n```\n\n可以用如下四笔完成涂色：\n\n```\n...    ..B    AAB    AAB    AAB\n... -> ... -> ... -> BB. -> BBA\n...    ...    ...    BBB    BBB\n```\n\n使用少于四笔不可能得到最终结果。\n\n作为一名先锋派艺术家，Bessie 只会对这个画布中的一个子矩形进行涂色。现在，她正在考虑 $Q$\n个候选子矩形（$1≤Q≤1000$），每一候选给定四个整数 $x_1$、$y_1$、$x_2$ 和 $y_2$，表示由第 $x_1$ 行到第 $x_2$ 行及第 $y_1$ 列到第 $y_2$ 列的所有方格组成的子矩形。\n\n对于每个候选子矩形，将所有子矩形内的方格都涂上所希望的颜色，并且子矩形外的方格均不涂色，最少需要涂多少笔？注意在这个过程中 Bessie 并没有真正进行任何的涂色，所以对于每个候选的回答是独立的。\n\n注意：本题每个测试点的时间限制为默认限制的 1.5 倍，且内存限制为默认限制的 2 倍，为 512MB。 ", "inputFormat": "输入的第一行包含 $N$、$M$ 和 $Q$。\n\n以下 $N$ 行每行包含一个由 $M$ 个大写字母组成的字符串，表示画布每行所希望的颜色。\n\n以下 $Q$ 行每行包含四个空格分隔的整数 $x_1,y_1,x_2,y_2$，表示一个候选子矩形（$1≤x_1≤x_2≤N$, $1≤y_1≤y_2≤M$）。", "outputFormat": "对于 $Q$ 个候选子矩形的每一个，输出一行，包含答案。", "hint": "#### 样例 1 解释\n\n第一个候选由整个画布组成，可以用六笔完成涂色。\n\n第二个候选的子矩形所希望的颜色为\n\n```\nABBA\n```\n\n可以用三笔完成涂色。注意，尽管在考虑整个画布时方格 $(3,5)$ 和 $(3,8)$ 可以用一笔涂上颜色 $A$，但如果仅考虑子矩形内的方格则并非如此。 \n\n#### 测试点性质：\n\n - 测试点 1-2 满足 $N,M≤50$。\n - 测试点 3-5 中，画布不包含由单一颜色所组成的环。也就是说，不存在由不同方格所组成的序列 $c_1,c_2,c_3,…,c_k$ 满足以下条件：\n   - $k>2$\n   - 所有的 $c_1,…,c_k$ 颜色相同。\n   - 对于所有的 $1≤i<k$，$c_i$ 与 $c_i+1$ 相邻。\n   - $c_k$ 与 $c_1$ 相邻。\n   注意，问题描述中的 3×3 画布包含单一颜色所组成的环（左下角的四个 B）。\n - 测试点 6-8 中，每个由相同期望颜色的方格组成的连通分量均能够被一个四边平行于坐标轴的两行两列的正方形所包含。问题描述中的 $3×3$ 画布不符合这一性质（由五个 B 组成的连通分量不能被一个两行两列的正方形包含）。\n - 测试点 9-11 中，每个由相同期望颜色的方格组成的连通分量均能够被一个四边平行于坐标轴的三行三列的正方形所包含。问题描述中的 $3×3$ 画布符合这一性质。\n - 测试点 12-20 没有额外限制。\n\n供题：Andi Qu ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] Paint by Letters P", "background": "", "description": "Bessie 最近收到了一套颜料。画布可以用一个 $N×M$ 的矩形方阵表示，其中行从上往下编号为 $1…N$，列从左往右编号为 $1…M$（$1≤N,M≤1000$）。被涂色的方格的颜色可以用一个 `A` 到 `Z` 的大写字母表示。初始时，所有方格均未被涂色，每个方格至多只能被涂色一次。\n\nBessie 指定了每个方格她所希望的颜色。她一笔可以将一些组成连通分量的方格涂上颜色，也就是说这些方格之间可以通过相邻方格互相到达。如果两个方格有公共边则认为它们是相邻的。\n\n例如，$3×3$ 的画布\n\n```\nAAB\nBBA\nBBB\n```\n\n可以用如下四笔完成涂色：\n\n```\n...    ..B    AAB    AAB    AAB\n... -> ... -> ... -> BB. -> BBA\n...    ...    ...    BBB    BBB\n```\n\n使用少于四笔不可能得到最终结果。\n\n作为一名先锋派艺术家，Bessie 只会对这个画布中的一个子矩形进行涂色。现在，她正在考虑 $Q$\n个候选子矩形（$1≤Q≤1000$），每一候选给定四个整数 $x_1$、$y_1$、$x_2$ 和 $y_2$，表示由第 $x_1$ 行到第 $x_2$ 行及第 $y_1$ 列到第 $y_2$ 列的所有方格组成的子矩形。\n\n对于每个候选子矩形，将所有子矩形内的方格都涂上所希望的颜色，并且子矩形外的方格均不涂色，最少需要涂多少笔？注意在这个过程中 Bessie 并没有真正进行任何的涂色，所以对于每个候选的回答是独立的。\n\n注意：本题每个测试点的时间限制为默认限制的 1.5 倍，且内存限制为默认限制的 2 倍，为 512MB。 ", "inputFormat": "输入的第一行包含 $N$、$M$ 和 $Q$。\n\n以下 $N$ 行每行包含一个由 $M$ 个大写字母组成的字符串，表示画布每行所希望的颜色。\n\n以下 $Q$ 行每行包含四个空格分隔的整数 $x_1,y_1,x_2,y_2$，表示一个候选子矩形（$1≤x_1≤x_2≤N$, $1≤y_1≤y_2≤M$）。", "outputFormat": "对于 $Q$ 个候选子矩形的每一个，输出一行，包含答案。", "hint": "#### 样例 1 解释\n\n第一个候选由整个画布组成，可以用六笔完成涂色。\n\n第二个候选的子矩形所希望的颜色为\n\n```\nABBA\n```\n\n可以用三笔完成涂色。注意，尽管在考虑整个画布时方格 $(3,5)$ 和 $(3,8)$ 可以用一笔涂上颜色 $A$，但如果仅考虑子矩形内的方格则并非如此。 \n\n#### 测试点性质：\n\n - 测试点 1-2 满足 $N,M≤50$。\n - 测试点 3-5 中，画布不包含由单一颜色所组成的环。也就是说，不存在由不同方格所组成的序列 $c_1,c_2,c_3,…,c_k$ 满足以下条件：\n   - $k>2$\n   - 所有的 $c_1,…,c_k$ 颜色相同。\n   - 对于所有的 $1≤i<k$，$c_i$ 与 $c_i+1$ 相邻。\n   - $c_k$ 与 $c_1$ 相邻。\n   注意，问题描述中的 3×3 画布包含单一颜色所组成的环（左下角的四个 B）。\n - 测试点 6-8 中，每个由相同期望颜色的方格组成的连通分量均能够被一个四边平行于坐标轴的两行两列的正方形所包含。问题描述中的 $3×3$ 画布不符合这一性质（由五个 B 组成的连通分量不能被一个两行两列的正方形包含）。\n - 测试点 9-11 中，每个由相同期望颜色的方格组成的连通分量均能够被一个四边平行于坐标轴的三行三列的正方形所包含。问题描述中的 $3×3$ 画布符合这一性质。\n - 测试点 12-20 没有额外限制。\n\n供题：Andi Qu ", "locale": "zh-CN"}}}
{"pid": "P7296", "type": "P", "difficulty": 5, "samples": [["mildredree", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["USACO", "2021", "记忆化搜索", "状压 DP"], "title": "[USACO21JAN] Uddered but not Herd G", "background": "", "description": "一个鲜为人知的事实是，奶牛拥有自己的文字：「牛文」。牛文由 26 个字母 'a' 到 'z' 组成，但是当奶牛说牛文时，可能与我们所熟悉的 'abcdefghijklmnopqrstuvwxyz' 不同，她会按某种特定的顺序排列字母。\n\n为了打发时间，Bessie 的表妹 Mildred 在反复哼唱牛文字母歌，而 Farmer Nhoj 好奇她唱了多少遍。\n\n给定一个小写字母组成的字符串，为 Farmer Nhoj 听到 Mildred 唱的字母，计算 Mildred 至少唱了几遍完整的牛文字母歌，使得 Farmer Nhoj 能够听到给定的字符串。Farmer Nhoj 并不始终注意 Mildred 所唱的内容，所以他可能会漏听 Mildred 唱过的一些字母。给定的字符串仅包含他记得他所听到的字母。\n\n注意：本题每个测试点的时间限制为默认限制的两倍。", "inputFormat": "输入仅一行，包含一个小写字母组成的字符串，为 Farmer Nhoj 听到 Mildred 唱的字母。字符串的长度不小于 $1$ 且不大于 $10^5$。", "outputFormat": "输出 Mildred 所唱的完整的牛文字母歌的最小次数。", "hint": "Mildred 至少唱了三遍牛文字母歌。有可能 Mildred 只唱了三遍牛文字母歌，如果牛文字母表以 \"mildre\" 开头，并且 Farmer Nhoj 听到了以下被标记为大写的字母。\n\n```\nMILDREabcfghjknopqstuvwxyz\nmilDREabcfghjknopqstuvwxyz\nmildrEabcfghjknopqstuvwxyz\n```\n\n#### 测试点性质：\n\n - 测试点 1-5 中，Farmer Nhoj 仅听到出现在 Mildred 或 Bessie 的名字中的字母。\n - 测试点 6-16 中，Farmer Nhoj 从未听到任何出现在 Mildred 名字中的字母。\n\n**注意本题只有16个测试点**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] Uddered but not Herd G", "background": "", "description": "一个鲜为人知的事实是，奶牛拥有自己的文字：「牛文」。牛文由 26 个字母 'a' 到 'z' 组成，但是当奶牛说牛文时，可能与我们所熟悉的 'abcdefghijklmnopqrstuvwxyz' 不同，她会按某种特定的顺序排列字母。\n\n为了打发时间，Bessie 的表妹 Mildred 在反复哼唱牛文字母歌，而 Farmer Nhoj 好奇她唱了多少遍。\n\n给定一个小写字母组成的字符串，为 Farmer Nhoj 听到 Mildred 唱的字母，计算 Mildred 至少唱了几遍完整的牛文字母歌，使得 Farmer Nhoj 能够听到给定的字符串。Farmer Nhoj 并不始终注意 Mildred 所唱的内容，所以他可能会漏听 Mildred 唱过的一些字母。给定的字符串仅包含他记得他所听到的字母。\n\n注意：本题每个测试点的时间限制为默认限制的两倍。", "inputFormat": "输入仅一行，包含一个小写字母组成的字符串，为 Farmer Nhoj 听到 Mildred 唱的字母。字符串的长度不小于 $1$ 且不大于 $10^5$。", "outputFormat": "输出 Mildred 所唱的完整的牛文字母歌的最小次数。", "hint": "Mildred 至少唱了三遍牛文字母歌。有可能 Mildred 只唱了三遍牛文字母歌，如果牛文字母表以 \"mildre\" 开头，并且 Farmer Nhoj 听到了以下被标记为大写的字母。\n\n```\nMILDREabcfghjknopqstuvwxyz\nmilDREabcfghjknopqstuvwxyz\nmildrEabcfghjknopqstuvwxyz\n```\n\n#### 测试点性质：\n\n - 测试点 1-5 中，Farmer Nhoj 仅听到出现在 Mildred 或 Bessie 的名字中的字母。\n - 测试点 6-16 中，Farmer Nhoj 从未听到任何出现在 Mildred 名字中的字母。\n\n**注意本题只有16个测试点**", "locale": "zh-CN"}}}
{"pid": "P7297", "type": "P", "difficulty": 5, "samples": [["5 4\n1 4 2 3 4\n1010\n0001\n0110\n0100", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["USACO", "2021", "图论建模", "最短路"], "title": "[USACO21JAN] Telephone G", "background": null, "description": "Farmer John 的 N 头奶牛，编号为 $1…N$，站成一行（$1≤N≤5⋅10^4$）。第 $i$ 头奶牛的品种编号为 $b_i$，范围为 $1\\dots K$，其中 $1≤K≤50$。奶牛们需要你帮助求出如何最优地从奶牛 $1$ 传输一条信息到奶牛 $N$。\n\n从奶牛 $i$ 传输信息到奶牛 $j$ 花费时间 $|i-j|$。然而，不是所有品种的奶牛都愿意互相交谈，如一个 $K\\times K$ 的方阵 $S$ 所表示，其中如果一头品种 $i$ 的奶牛愿意传输一条信息给一头品种 $j$ 的奶牛，那么 $S_{ij}=1$，否则为 $0$。不保证 $S_{ij}=S_{ji}$，并且如果品种 $i$ 的奶牛之间不愿意互相交流时可以有 $S_{ii}=0$。\n\n请求出传输信息所需的最小时间。", "inputFormat": "输入的第一行包含 $N$ 和 $K$。\n\n下一行包含 $N$ 个空格分隔的整数 $b_1,b_2,\\dots,b_N$。\n\n以下 $K$ 行描述了方阵 $S$。每行包含一个由 $K$ 个二进制位组成的字符串，从上往下第 $i$ 个字符串的第 $j$ 位为 $S_{ij}$。", "outputFormat": "输出一个整数，为需要的最小时间。如果不可能从奶牛 $1$ 传输信息至奶牛 $N$，输出 $-1$。", "hint": "最优传输序列为 $1\\to 4\\to 3\\to 5$。总时间为 $|1-4|+|4-3|+|3-5|=6$。\n\n#### 测试点性质：\n\n - 测试点 1-5 满足 $N≤1000$。\n - 测试点 6-13 没有额外限制。\n\n供题：Dhruv Rohatgi", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] Telephone G", "background": null, "description": "Farmer John 的 N 头奶牛，编号为 $1…N$，站成一行（$1≤N≤5⋅10^4$）。第 $i$ 头奶牛的品种编号为 $b_i$，范围为 $1\\dots K$，其中 $1≤K≤50$。奶牛们需要你帮助求出如何最优地从奶牛 $1$ 传输一条信息到奶牛 $N$。\n\n从奶牛 $i$ 传输信息到奶牛 $j$ 花费时间 $|i-j|$。然而，不是所有品种的奶牛都愿意互相交谈，如一个 $K\\times K$ 的方阵 $S$ 所表示，其中如果一头品种 $i$ 的奶牛愿意传输一条信息给一头品种 $j$ 的奶牛，那么 $S_{ij}=1$，否则为 $0$。不保证 $S_{ij}=S_{ji}$，并且如果品种 $i$ 的奶牛之间不愿意互相交流时可以有 $S_{ii}=0$。\n\n请求出传输信息所需的最小时间。", "inputFormat": "输入的第一行包含 $N$ 和 $K$。\n\n下一行包含 $N$ 个空格分隔的整数 $b_1,b_2,\\dots,b_N$。\n\n以下 $K$ 行描述了方阵 $S$。每行包含一个由 $K$ 个二进制位组成的字符串，从上往下第 $i$ 个字符串的第 $j$ 位为 $S_{ij}$。", "outputFormat": "输出一个整数，为需要的最小时间。如果不可能从奶牛 $1$ 传输信息至奶牛 $N$，输出 $-1$。", "hint": "最优传输序列为 $1\\to 4\\to 3\\to 5$。总时间为 $|1-4|+|4-3|+|3-5|=6$。\n\n#### 测试点性质：\n\n - 测试点 1-5 满足 $N≤1000$。\n - 测试点 6-13 没有额外限制。\n\n供题：Dhruv Rohatgi", "locale": "zh-CN"}}}
{"pid": "P7298", "type": "P", "difficulty": 5, "samples": [["6 4 7\n1 2\n2 3\n3 4\n4 5", "5\n4\n3\n3\n3\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["USACO", "2021", "O2优化", "双指针 two-pointer"], "title": "[USACO21JAN] Dance Mooves G", "background": "", "description": "Farmer John 的奶牛们正在炫耀她们的最新舞步！\n\n最初，所有的 $N$ 头奶牛（$2≤N≤10^5$）站成一行，奶牛 $i$ 排在其中第 $i$ 位。舞步序列给定为 $K$ （$1≤K≤2\\times10^5$）个位置对 $(a_1,b_1),(a_2,b_2),…,(a_K,b_K)$。在舞蹈的第 $i=1…K$ 分钟，位置 $a_i$ 与 $b_i$ 上的奶牛交换位置。同样的 $K$ 次交换在第 $K+1…2K$ 分钟发生，在第 $2K+1…3K$ 分钟再次发生，以此类推，周期性地持续共 $M$ 分钟（$1≤M≤10^{18}$）。换言之， \n\n - 在第 $1$ 分钟，位置 $a_1$ 与 $b_1$ 上的奶牛交换位置。\n - 在第 $2$ 分钟，位置 $a_2$ 与 $b_2$ 上的奶牛交换位置。\n - ……\n - 在第 $K$ 分钟，位置 $a_K$ 与 $b_K$ 上的奶牛交换位置。\n - 在第 $K+1$ 分钟，位置 $a_1$ 与 $b_1$ 上的奶牛交换位置。\n - 在第 $K+2$ 分钟，位置 $a_2$ 与 $b_2$ 上的奶牛交换位置。\n - 以此类推……\n\n对于每头奶牛，求她在队伍中会占据的不同的位置数量。\n\n注意：本题每个测试点的时间限制为默认限制的两倍。 ", "inputFormat": "输入的第一行包含 $N$、$K$ 和 $M$。以下 $K$ 行分别包含 $(a_1,b_1)…(a_K,b_K)$（$1≤a_i<b_i≤N$）。 ", "outputFormat": "输出 $N$ 行，第 $i$ 行包含奶牛 $i$ 可以到达的不同的位置数量。 ", "hint": "$7$ 分钟之后，各个位置上的奶牛为 $[3,4,5,2,1,6]$。\n\n - 奶牛 $1$ 可以到达位置 $\\{1,2,3,4,5\\}$。\n - 奶牛 $2$ 可以到达位置 $\\{1,2,3,4\\}$。\n - 奶牛 $3$ 可以到达位置 $\\{1,2,3\\}$。\n - 奶牛 $4$ 可以到达位置 $\\{2,3,4\\}$。\n - 奶牛 $5$ 可以到达位置 $\\{3,4,5\\}$。\n - 奶牛 $6$ 从未移动，所以她没有离开过位置 $6$。\n \n#### 测试点性质：\n\n - 测试点 1-5 满足 $N≤100,K≤200$。\n - 测试点 6-10 满足 $M=10^{18}$。\n - 测试点 11-20 没有额外限制。\n\nProblem credits: Chris Zhang ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] Dance Mooves G", "background": "", "description": "Farmer John 的奶牛们正在炫耀她们的最新舞步！\n\n最初，所有的 $N$ 头奶牛（$2≤N≤10^5$）站成一行，奶牛 $i$ 排在其中第 $i$ 位。舞步序列给定为 $K$ （$1≤K≤2\\times10^5$）个位置对 $(a_1,b_1),(a_2,b_2),…,(a_K,b_K)$。在舞蹈的第 $i=1…K$ 分钟，位置 $a_i$ 与 $b_i$ 上的奶牛交换位置。同样的 $K$ 次交换在第 $K+1…2K$ 分钟发生，在第 $2K+1…3K$ 分钟再次发生，以此类推，周期性地持续共 $M$ 分钟（$1≤M≤10^{18}$）。换言之， \n\n - 在第 $1$ 分钟，位置 $a_1$ 与 $b_1$ 上的奶牛交换位置。\n - 在第 $2$ 分钟，位置 $a_2$ 与 $b_2$ 上的奶牛交换位置。\n - ……\n - 在第 $K$ 分钟，位置 $a_K$ 与 $b_K$ 上的奶牛交换位置。\n - 在第 $K+1$ 分钟，位置 $a_1$ 与 $b_1$ 上的奶牛交换位置。\n - 在第 $K+2$ 分钟，位置 $a_2$ 与 $b_2$ 上的奶牛交换位置。\n - 以此类推……\n\n对于每头奶牛，求她在队伍中会占据的不同的位置数量。\n\n注意：本题每个测试点的时间限制为默认限制的两倍。 ", "inputFormat": "输入的第一行包含 $N$、$K$ 和 $M$。以下 $K$ 行分别包含 $(a_1,b_1)…(a_K,b_K)$（$1≤a_i<b_i≤N$）。 ", "outputFormat": "输出 $N$ 行，第 $i$ 行包含奶牛 $i$ 可以到达的不同的位置数量。 ", "hint": "$7$ 分钟之后，各个位置上的奶牛为 $[3,4,5,2,1,6]$。\n\n - 奶牛 $1$ 可以到达位置 $\\{1,2,3,4,5\\}$。\n - 奶牛 $2$ 可以到达位置 $\\{1,2,3,4\\}$。\n - 奶牛 $3$ 可以到达位置 $\\{1,2,3\\}$。\n - 奶牛 $4$ 可以到达位置 $\\{2,3,4\\}$。\n - 奶牛 $5$ 可以到达位置 $\\{3,4,5\\}$。\n - 奶牛 $6$ 从未移动，所以她没有离开过位置 $6$。\n \n#### 测试点性质：\n\n - 测试点 1-5 满足 $N≤100,K≤200$。\n - 测试点 6-10 满足 $M=10^{18}$。\n - 测试点 11-20 没有额外限制。\n\nProblem credits: Chris Zhang ", "locale": "zh-CN"}}}
{"pid": "P7299", "type": "P", "difficulty": 4, "samples": [["5 4\n1 3\n1 2\n2 3\n2 4", "4\n4\n3\n4\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["USACO", "并查集", "2021", "置换"], "title": "[USACO21JAN] Dance Mooves S", "background": "", "description": "Farmer John 的奶牛们正在炫耀她们的最新舞步！\n\n最初，所有的 $N$ 头奶牛（$2≤N≤10^5$）站成一行，奶牛 $i$ 排在其中第 $i$ 位。舞步序列给定为 $K$ （$1≤K≤2\\times10^5$）个位置对 $(a_1,b_1),(a_2,b_2),…,(a_K,b_K)$。在舞蹈的第 $i=1…K$ 分钟，位置 $a_i$ 与 $b_i$ 上的奶牛交换位置。同样的 $K$ 次交换在第 $K+1…2K$ 分钟发生，在第 $2K+1…3K$ 分钟再次发生，以此类推，无限循环。换言之， \n\n - 在第 $1$ 分钟，位置 $a_1$ 与 $b_1$ 上的奶牛交换位置。\n - 在第 $2$ 分钟，位置 $a_2$ 与 $b_2$ 上的奶牛交换位置。\n - ……\n - 在第 $K$ 分钟，位置 $a_K$ 与 $b_K$ 上的奶牛交换位置。\n - 在第 $K+1$ 分钟，位置 $a_1$ 与 $b_1$ 上的奶牛交换位置。\n - 在第 $K+2$ 分钟，位置 $a_2$ 与 $b_2$ 上的奶牛交换位置。\n - 以此类推……\n\n对于每头奶牛，求她在队伍中会占据的不同的位置数量。", "inputFormat": "输入的第一行包含 $N$、$K$。以下 $K$ 行分别包含 $(a_1,b_1)…(a_K,b_K)$（$1≤a_i<b_i≤N$）。 ", "outputFormat": "输出 $N$ 行，第 $i$ 行包含奶牛 $i$ 可以到达的不同的位置数量。 ", "hint": " - 奶牛 $1$ 可以到达位置 $\\{1,2,3,4\\}$。\n - 奶牛 $2$ 可以到达位置 $\\{1,2,3,4\\}$。\n - 奶牛 $3$ 可以到达位置 $\\{1,2,3\\}$。\n - 奶牛 $4$ 可以到达位置 $\\{1,2,3,4\\}$。\n - 奶牛 $5$ 从未移动，所以她没有离开过位置 $5$。\n\n#### 测试点性质：\n\n - 测试点 1-5 满足 $N≤100,K≤200$。\n - 测试点 6-10 满足 $N≤2000,K≤4000$。\n - 测试点 11-20 没有额外限制。\n\n供题：Chris Zhang ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] Dance Mooves S", "background": "", "description": "Farmer John 的奶牛们正在炫耀她们的最新舞步！\n\n最初，所有的 $N$ 头奶牛（$2≤N≤10^5$）站成一行，奶牛 $i$ 排在其中第 $i$ 位。舞步序列给定为 $K$ （$1≤K≤2\\times10^5$）个位置对 $(a_1,b_1),(a_2,b_2),…,(a_K,b_K)$。在舞蹈的第 $i=1…K$ 分钟，位置 $a_i$ 与 $b_i$ 上的奶牛交换位置。同样的 $K$ 次交换在第 $K+1…2K$ 分钟发生，在第 $2K+1…3K$ 分钟再次发生，以此类推，无限循环。换言之， \n\n - 在第 $1$ 分钟，位置 $a_1$ 与 $b_1$ 上的奶牛交换位置。\n - 在第 $2$ 分钟，位置 $a_2$ 与 $b_2$ 上的奶牛交换位置。\n - ……\n - 在第 $K$ 分钟，位置 $a_K$ 与 $b_K$ 上的奶牛交换位置。\n - 在第 $K+1$ 分钟，位置 $a_1$ 与 $b_1$ 上的奶牛交换位置。\n - 在第 $K+2$ 分钟，位置 $a_2$ 与 $b_2$ 上的奶牛交换位置。\n - 以此类推……\n\n对于每头奶牛，求她在队伍中会占据的不同的位置数量。", "inputFormat": "输入的第一行包含 $N$、$K$。以下 $K$ 行分别包含 $(a_1,b_1)…(a_K,b_K)$（$1≤a_i<b_i≤N$）。 ", "outputFormat": "输出 $N$ 行，第 $i$ 行包含奶牛 $i$ 可以到达的不同的位置数量。 ", "hint": " - 奶牛 $1$ 可以到达位置 $\\{1,2,3,4\\}$。\n - 奶牛 $2$ 可以到达位置 $\\{1,2,3,4\\}$。\n - 奶牛 $3$ 可以到达位置 $\\{1,2,3\\}$。\n - 奶牛 $4$ 可以到达位置 $\\{1,2,3,4\\}$。\n - 奶牛 $5$ 从未移动，所以她没有离开过位置 $5$。\n\n#### 测试点性质：\n\n - 测试点 1-5 满足 $N≤100,K≤200$。\n - 测试点 6-10 满足 $N≤2000,K≤4000$。\n - 测试点 11-20 没有额外限制。\n\n供题：Chris Zhang ", "locale": "zh-CN"}}}
{"pid": "P7300", "type": "P", "difficulty": 3, "samples": [["8 2\nABBAABCB\n3 6\n1 4", "4\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["USACO", "2021", "前缀和"], "title": "[USACO21JAN] No Time to Paint S", "background": "", "description": "Bessie 最近收到了一套颜料，她想要给她的牧草地一端的栅栏上色。栅栏由 $N$ 个 1 米长的小段组成（$1≤N≤10^5$）。Bessie 可以使用 26 种不同的颜色，她将这些颜色由浅到深用字母 'A' 到 'Z' 标号（'A' 是很浅的颜色，'Z' 是很深的颜色）。从而她可以用一个长为 $N$ 且每个字符均为字母的字符串来描述她想要给栅栏的每一小段涂上的颜色。 \n\n初始时，所有栅栏小段均未被上色。Bessie 一笔可以给任意连续若干小段涂上同一种颜色，只要她不会在较深的颜色之上涂上较浅的颜色（她只能用较深的颜色覆盖较浅的颜色）。 \n\n例如，一段长为 4 的未被涂色的栅栏可以按如下方式上色：\n\n`.... -> BBB. -> BBLL -> BQQL`\n\n由于时间紧迫，Bessie 认为她可能需要放弃为栅栏上某个连续的区间上色！现在，她正在考虑 $Q$ 个候选的区间（$1≤Q≤10^5$），每个区间用满足 $1≤a≤b≤N$ 的两个整数 $(a,b)$ 表示，为需要不上色的小段 $a…b$ 的两端点位置。 \n\n对于每个候选区间，将所有区间外的栅栏小段都涂上所希望的颜色，并且区间内的栅栏小段均不涂色，最少需要涂多少笔？注意在这个过程中 Bessie 并没有真正进行任何的涂色，所以对于每个候选区间的回答是独立的。 ", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n下一行包含一个长为 $N$ 的字符串，表示每个栅栏小段所希望的颜色。\n\n以下 $Q$ 行，每行包含两个空格分隔的整数 $a$ 和 $b$，表示一个不涂色的候选区间。", "outputFormat": "对于 $Q$ 个候选区间的每一个，输出一行，包含答案。 ", "hint": "在这个样例种，除去目标颜色 `BAAB` 所对应的区间，涂上颜色需要四笔，而除去 `ABBA` 仅需三笔。\n\n`.... -> AA.. -> ABBB -> ABCB`\n\n#### 测试点性质：\n\n - 测试点 1-4 满足 $N,Q≤100$。\n - 测试点 5-7 满足 $N,Q≤5000$。\n - 测试点 8-13 没有额外限制。\n\n供题：Andi Qu，Brian Dean ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] No Time to Paint S", "background": "", "description": "Bessie 最近收到了一套颜料，她想要给她的牧草地一端的栅栏上色。栅栏由 $N$ 个 1 米长的小段组成（$1≤N≤10^5$）。Bessie 可以使用 26 种不同的颜色，她将这些颜色由浅到深用字母 'A' 到 'Z' 标号（'A' 是很浅的颜色，'Z' 是很深的颜色）。从而她可以用一个长为 $N$ 且每个字符均为字母的字符串来描述她想要给栅栏的每一小段涂上的颜色。 \n\n初始时，所有栅栏小段均未被上色。Bessie 一笔可以给任意连续若干小段涂上同一种颜色，只要她不会在较深的颜色之上涂上较浅的颜色（她只能用较深的颜色覆盖较浅的颜色）。 \n\n例如，一段长为 4 的未被涂色的栅栏可以按如下方式上色：\n\n`.... -> BBB. -> BBLL -> BQQL`\n\n由于时间紧迫，Bessie 认为她可能需要放弃为栅栏上某个连续的区间上色！现在，她正在考虑 $Q$ 个候选的区间（$1≤Q≤10^5$），每个区间用满足 $1≤a≤b≤N$ 的两个整数 $(a,b)$ 表示，为需要不上色的小段 $a…b$ 的两端点位置。 \n\n对于每个候选区间，将所有区间外的栅栏小段都涂上所希望的颜色，并且区间内的栅栏小段均不涂色，最少需要涂多少笔？注意在这个过程中 Bessie 并没有真正进行任何的涂色，所以对于每个候选区间的回答是独立的。 ", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n下一行包含一个长为 $N$ 的字符串，表示每个栅栏小段所希望的颜色。\n\n以下 $Q$ 行，每行包含两个空格分隔的整数 $a$ 和 $b$，表示一个不涂色的候选区间。", "outputFormat": "对于 $Q$ 个候选区间的每一个，输出一行，包含答案。 ", "hint": "在这个样例种，除去目标颜色 `BAAB` 所对应的区间，涂上颜色需要四笔，而除去 `ABBA` 仅需三笔。\n\n`.... -> AA.. -> ABBB -> ABCB`\n\n#### 测试点性质：\n\n - 测试点 1-4 满足 $N,Q≤100$。\n - 测试点 5-7 满足 $N,Q≤5000$。\n - 测试点 8-13 没有额外限制。\n\n供题：Andi Qu，Brian Dean ", "locale": "zh-CN"}}}
{"pid": "P7301", "type": "P", "difficulty": 4, "samples": [["4\n3 3 1 1\n1 1 3 1\n3 3 1 1\n1 1 3 3", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "贪心", "USACO", "2021"], "title": "[USACO21JAN] Spaced Out S", "background": "", "description": "Farmer John 想要拍摄一张他的奶牛吃草的照片挂在墙上。草地可以用一个 $N$ 行 $N$ 列正方形方格所组成的方阵表示（想象一个 $N \\times N$ 的棋盘），其中 $2 \\leq N \\leq 1000$。在 Farmer John 最近拍摄的照片中，他的奶牛们太过集中于草地上的某个区域。这一次，他想要确保他的奶牛们分散在整个草地上。于是他坚持如下的规则：\n\n - 没有两头奶牛可以位于同一个方格。\n - 所有 $2 \\times 2$ 的子矩阵（共有 $(N-1) \\times (N-1)$ 个）必须包含恰好 2 头奶牛。\n\n例如，这一放置方式是合法的：\n\n```\nCCC\n...\nCCC\n```\n\n而这一放置方式是不合法的，因为右下的 $2 \\times 2$ 正方形区域仅包含 1 头奶牛：\n\n```\nC.C\n.C.\nC..\n```\n\n没有其他限制。你可以假设 Farmer John 有无限多的奶牛（根据以往的经验，这种假设似乎是正确的……）。\n\nFarmer John 更希望某些方格中包含奶牛。具体地说，他相信如果方格 $(i, j)$ 中放有一头奶牛，照片的美丽度会增加 $a_{ij}$（$0 \\leq a_{ij} \\leq 1000$）单位。\n\n求合法的奶牛放置方式的最大总美丽度。\n", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行每行包含 $N$ 个整数。从上到下第 $i$ 行的第 $j$ 个整数为 $a_{ij}$ 的值。\n", "outputFormat": "输出一个整数，为得到的照片的最大美丽度。\n", "hint": "在这个样例中，最大美丽度可以在如下放置方式时达到：\n\n```\nCC..\n..CC\nCC..\n..CC\n```\n\n这种放置方式的美丽度为 $3 + 3 + 3 + 1 + 3 + 3 + 3 + 3 = 22$。\n\n测试点性质：\n\n - 测试点 2-4 满足 $N \\le 4$。\n - 测试点 5-10 满足 $N\\le 10$。\n - 测试点 11-20 满足 $N \\le 1000$。\n\n供题：Hankai Zhang，Danny Mittal", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] Spaced Out S", "background": "", "description": "Farmer John 想要拍摄一张他的奶牛吃草的照片挂在墙上。草地可以用一个 $N$ 行 $N$ 列正方形方格所组成的方阵表示（想象一个 $N \\times N$ 的棋盘），其中 $2 \\leq N \\leq 1000$。在 Farmer John 最近拍摄的照片中，他的奶牛们太过集中于草地上的某个区域。这一次，他想要确保他的奶牛们分散在整个草地上。于是他坚持如下的规则：\n\n - 没有两头奶牛可以位于同一个方格。\n - 所有 $2 \\times 2$ 的子矩阵（共有 $(N-1) \\times (N-1)$ 个）必须包含恰好 2 头奶牛。\n\n例如，这一放置方式是合法的：\n\n```\nCCC\n...\nCCC\n```\n\n而这一放置方式是不合法的，因为右下的 $2 \\times 2$ 正方形区域仅包含 1 头奶牛：\n\n```\nC.C\n.C.\nC..\n```\n\n没有其他限制。你可以假设 Farmer John 有无限多的奶牛（根据以往的经验，这种假设似乎是正确的……）。\n\nFarmer John 更希望某些方格中包含奶牛。具体地说，他相信如果方格 $(i, j)$ 中放有一头奶牛，照片的美丽度会增加 $a_{ij}$（$0 \\leq a_{ij} \\leq 1000$）单位。\n\n求合法的奶牛放置方式的最大总美丽度。\n", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行每行包含 $N$ 个整数。从上到下第 $i$ 行的第 $j$ 个整数为 $a_{ij}$ 的值。\n", "outputFormat": "输出一个整数，为得到的照片的最大美丽度。\n", "hint": "在这个样例中，最大美丽度可以在如下放置方式时达到：\n\n```\nCC..\n..CC\nCC..\n..CC\n```\n\n这种放置方式的美丽度为 $3 + 3 + 3 + 1 + 3 + 3 + 3 + 3 = 22$。\n\n测试点性质：\n\n - 测试点 2-4 满足 $N \\le 4$。\n - 测试点 5-10 满足 $N\\le 10$。\n - 测试点 11-20 满足 $N \\le 1000$。\n\n供题：Hankai Zhang，Danny Mittal", "locale": "zh-CN"}}}
{"pid": "P7302", "type": "P", "difficulty": 5, "samples": [["3 4\n1 2 3\n5 2 3\n6 3 4\n1 1 5\n ", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "1998", "线段树", "树状数组", "NOI"], "title": "[NOI1998] 免费的馅饼", "background": "", "description": "SERKOI 最新推出了一种叫做“免费馅饼”的游戏：游戏在一个舞台上进行。舞台的宽度为 $w$ 格（从左到右依次用 $1$ 到 $w$ 编号），游戏者占一格。开始时游戏者可以站在舞台的任意位置，手里拿着一个托盘。下图为天幕的高度为 $4$ 格时某一个时刻游戏者接馅饼的情景。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1gcg9awi.png)\n\n游戏开始后，从舞台天幕顶端的格子中不断出现馅饼并垂直下落。游戏者左右移动去接馅饼。游戏者每秒可以向左或向右移动一格或两格，也可以站在原地不动。\n\n当馅饼在某一时刻恰好到达游戏者所在的格子中，游戏者就收集到了这块馅饼。当馅饼落在一个游戏者不在的格子里时该馅饼就消失。\n\n写一个程序，帮助我们的游戏者收集馅饼，使得所收集馅饼的分数之和最大。", "inputFormat": "第一行是用空格隔开的两个正整数，分别给出了舞台的宽度 $w$ 和馅饼的个数 $n$。\n\n接下来 $n$ 行，每一行给出了一块馅饼的信息。\n\n由三个正整数组成，分别表示了每个馅饼落到舞台上的时刻 $t_i$，掉到舞台上的格子的编号 $p_i$，以及分值 $v_i$。\n\n游戏开始时刻为 $0$。\n\n输入文件中同一行相邻两项之间用一个空格隔开。\n\n输入数据中可能存在两个馅饼的 $t_i$ 和 $p_i$ 都一样。", "outputFormat": "一个数，表示游戏者获得的最大总得分。", "hint": "对于 $100\\%$ 的数据，$1 \\leq w \\leq 10^8$，$1 \\leq n \\leq 10^5$，$1\\leq t_i \\leq 10^8$，$1\\leq p_i \\leq w$，$1\\leq v_i \\leq 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI1998] 免费的馅饼", "background": "", "description": "SERKOI 最新推出了一种叫做“免费馅饼”的游戏：游戏在一个舞台上进行。舞台的宽度为 $w$ 格（从左到右依次用 $1$ 到 $w$ 编号），游戏者占一格。开始时游戏者可以站在舞台的任意位置，手里拿着一个托盘。下图为天幕的高度为 $4$ 格时某一个时刻游戏者接馅饼的情景。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1gcg9awi.png)\n\n游戏开始后，从舞台天幕顶端的格子中不断出现馅饼并垂直下落。游戏者左右移动去接馅饼。游戏者每秒可以向左或向右移动一格或两格，也可以站在原地不动。\n\n当馅饼在某一时刻恰好到达游戏者所在的格子中，游戏者就收集到了这块馅饼。当馅饼落在一个游戏者不在的格子里时该馅饼就消失。\n\n写一个程序，帮助我们的游戏者收集馅饼，使得所收集馅饼的分数之和最大。", "inputFormat": "第一行是用空格隔开的两个正整数，分别给出了舞台的宽度 $w$ 和馅饼的个数 $n$。\n\n接下来 $n$ 行，每一行给出了一块馅饼的信息。\n\n由三个正整数组成，分别表示了每个馅饼落到舞台上的时刻 $t_i$，掉到舞台上的格子的编号 $p_i$，以及分值 $v_i$。\n\n游戏开始时刻为 $0$。\n\n输入文件中同一行相邻两项之间用一个空格隔开。\n\n输入数据中可能存在两个馅饼的 $t_i$ 和 $p_i$ 都一样。", "outputFormat": "一个数，表示游戏者获得的最大总得分。", "hint": "对于 $100\\%$ 的数据，$1 \\leq w \\leq 10^8$，$1 \\leq n \\leq 10^5$，$1\\leq t_i \\leq 10^8$，$1\\leq p_i \\leq w$，$1\\leq v_i \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P7303", "type": "P", "difficulty": 2, "samples": [["100\n5", "10\n30\n20\n5\n35"], ["200\n1", "200"], ["100\n4", "21\n36\n12\n31"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2018", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #1] Nadan", "background": "", "description": "Nadan 是一个成功的商人。他经常对软件开发者进行投资。\n\n今年，他决定将 $K$ 库纳（克罗地亚货币）分配给 $N$ 个项目，使得每个项目能分配至少 $1$ 库纳，并且两两之间得到的数量互不相等且均为正整数。数据保证，这样的分配方式一定存在。", "inputFormat": "第一行输入正整数 $K$。\n\n第二行输入正整数 $N$。", "outputFormat": "输出共 $N$ 行，其中第 $i$ 行表示第 $i$ 个项目所分配的金额。", "hint": "#### 数据规模与约定\n\n对于 $50\\%$ 的数据，$N=5$。\n\n对于 $100\\%$ 的数据，$100 \\le K \\le 10^6$，$1 \\le N \\le 100$。\n\n#### 评分方式\n\n如果一组数据中，存在相同的分配金额，但总和正确，则可以获得该数据满分 $5$ 分中的 $3$ 分。\n\n本题启用非官方的自行编写的 [Special Judge](https://www.luogu.com.cn/paste/g6huzk80)，也可在附件中获取。由于 Special Judge 的原因，请在输出的最后一个数字后添上一个换行符。欢迎大家 hack（可私信或直接发帖）。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T1 Nadan_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #1] Nadan", "background": "", "description": "Nadan 是一个成功的商人。他经常对软件开发者进行投资。\n\n今年，他决定将 $K$ 库纳（克罗地亚货币）分配给 $N$ 个项目，使得每个项目能分配至少 $1$ 库纳，并且两两之间得到的数量互不相等且均为正整数。数据保证，这样的分配方式一定存在。", "inputFormat": "第一行输入正整数 $K$。\n\n第二行输入正整数 $N$。", "outputFormat": "输出共 $N$ 行，其中第 $i$ 行表示第 $i$ 个项目所分配的金额。", "hint": "#### 数据规模与约定\n\n对于 $50\\%$ 的数据，$N=5$。\n\n对于 $100\\%$ 的数据，$100 \\le K \\le 10^6$，$1 \\le N \\le 100$。\n\n#### 评分方式\n\n如果一组数据中，存在相同的分配金额，但总和正确，则可以获得该数据满分 $5$ 分中的 $3$ 分。\n\n本题启用非官方的自行编写的 [Special Judge](https://www.luogu.com.cn/paste/g6huzk80)，也可在附件中获取。由于 Special Judge 的原因，请在输出的最后一个数字后添上一个换行符。欢迎大家 hack（可私信或直接发帖）。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T1 Nadan_。**", "locale": "zh-CN"}}}
{"pid": "P7304", "type": "P", "difficulty": 3, "samples": [["3\n3 1 2\n3 1 x", "DA"], ["4\n4 5 iks ipsilon\n1 iks 3 iks", "NE"], ["5\nx 3 x y 3\nx y 2 z 3", "DA"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2018", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #1] Zamjena", "background": "", "description": "Vlatko 喜欢与整数数组打交道。\n\n他在纸上写下了两个分别包含 $N$ 个元素的数组，其中每个元素是一个整数，或者是表示一个变量的字符串（字符串仅包含小写字母）。\n\n一个变量可以被任何一个整数替换，而两个数组中可能会多次出现同一变量。假如这种情况出现，则替换时需要将该变量出现过所有位置均替换会为待替换整数。\n\nVlatko 好奇能不能将所有变量替换为特定的整数，使得两个数组相等。当两个数组所有位置处的整数均对应相等，则两个数组相等。", "inputFormat": "第一行输入正整数 $N$，表示每个数组中元素个数。\n\n第二行输入第一个数组的 $N$ 个元素。\n\n第三行输入第二个数组的 $N$ 个元素。\n\n数组中的每个元素为下列二者之一：\n\n- 一个小于 $1000$ 的正整数\n- 一个长度不超过 $10$ 的仅包含小写字母的字符串，表示一个变量。", "outputFormat": "如果有方案能在替换后使得两个数组相等，则输出 `DA`，否则输出 `NE`。", "hint": "#### 样例 3 解释\n\n当把 $x,y,z$ 分别替换为 $2,3,3$ 时，两个数组相等，均为 $(2,3,2,3,3)$。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，每个变量在两个数组中仅出现一次。\n\n对于另外 $20\\%$ 的数据，数组中只包含两个变量 $x,y$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10^4$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T2 Zamjena_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #1] Zamjena", "background": "", "description": "Vlatko 喜欢与整数数组打交道。\n\n他在纸上写下了两个分别包含 $N$ 个元素的数组，其中每个元素是一个整数，或者是表示一个变量的字符串（字符串仅包含小写字母）。\n\n一个变量可以被任何一个整数替换，而两个数组中可能会多次出现同一变量。假如这种情况出现，则替换时需要将该变量出现过所有位置均替换会为待替换整数。\n\nVlatko 好奇能不能将所有变量替换为特定的整数，使得两个数组相等。当两个数组所有位置处的整数均对应相等，则两个数组相等。", "inputFormat": "第一行输入正整数 $N$，表示每个数组中元素个数。\n\n第二行输入第一个数组的 $N$ 个元素。\n\n第三行输入第二个数组的 $N$ 个元素。\n\n数组中的每个元素为下列二者之一：\n\n- 一个小于 $1000$ 的正整数\n- 一个长度不超过 $10$ 的仅包含小写字母的字符串，表示一个变量。", "outputFormat": "如果有方案能在替换后使得两个数组相等，则输出 `DA`，否则输出 `NE`。", "hint": "#### 样例 3 解释\n\n当把 $x,y,z$ 分别替换为 $2,3,3$ 时，两个数组相等，均为 $(2,3,2,3,3)$。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，每个变量在两个数组中仅出现一次。\n\n对于另外 $20\\%$ 的数据，数组中只包含两个变量 $x,y$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10^4$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T2 Zamjena_。**", "locale": "zh-CN"}}}
{"pid": "P7305", "type": "P", "difficulty": 3, "samples": [["2 3\n2 3\n1 2 3", "0"], ["4 3\n2 39 41 45\n39 42 46", "1"], ["5 5\n7 6 1 2 10\n9 11 6 3 12", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2018", "二分", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #1] Cipele", "background": "", "description": "在各种各样的项目上消耗经费之后，Nadan 决定为软件开发者提供高质量的鞋子。\n\nNadan 在地下室找到了 $N$ 只左脚鞋和 $M$ 只右脚鞋。因为它们的来源未知，因此鞋子的大小也不尽相同。\n\nNadan 想让你配对尽可能多的鞋子（即在所有鞋子配对完毕后不能继续配对）。每一对应当包含一只左脚鞋和一只右脚鞋。当穿上一双鞋时，应当使得鞋子的丑陋度最小化。一双鞋子的丑陋度定义为：所有配对的鞋子中，左脚和右脚大小之差的绝对值的最大值。", "inputFormat": "第一行输入正整数 $N,M$，分别表示左脚鞋和右脚鞋的数量。\n\n第二行输入 $N$ 个整数 $L_i$，表示左脚鞋的大小。\n\n第二行输入 $M$ 个整数 $R_i$，表示右脚鞋的大小。", "outputFormat": "输出所有配对方式中丑陋度的最小值。", "hint": "#### 样例 2 解释\n\nNadan 的左脚鞋有 $4$ 只，右脚鞋有 $3$ 只，最多可以配成 $3$ 对。一种配对方式为：**39-46**，41-42，45-39，第一双的两只鞋大小之差的绝对值最大，因而丑陋度为 $7$。\n\n一种更好的配对方式为：39-39，41-42，45-46。该配对方式的丑陋度为 $1$，为所有配对方式中，丑陋度最小的。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$N=M$。\n\n对于另外 $50\\%$ 的数据，$N,M \\le 5000$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 10^5$，$1 \\le L_i,R_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $90$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T3 Cipele_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #1] Cipele", "background": "", "description": "在各种各样的项目上消耗经费之后，Nadan 决定为软件开发者提供高质量的鞋子。\n\nNadan 在地下室找到了 $N$ 只左脚鞋和 $M$ 只右脚鞋。因为它们的来源未知，因此鞋子的大小也不尽相同。\n\nNadan 想让你配对尽可能多的鞋子（即在所有鞋子配对完毕后不能继续配对）。每一对应当包含一只左脚鞋和一只右脚鞋。当穿上一双鞋时，应当使得鞋子的丑陋度最小化。一双鞋子的丑陋度定义为：所有配对的鞋子中，左脚和右脚大小之差的绝对值的最大值。", "inputFormat": "第一行输入正整数 $N,M$，分别表示左脚鞋和右脚鞋的数量。\n\n第二行输入 $N$ 个整数 $L_i$，表示左脚鞋的大小。\n\n第二行输入 $M$ 个整数 $R_i$，表示右脚鞋的大小。", "outputFormat": "输出所有配对方式中丑陋度的最小值。", "hint": "#### 样例 2 解释\n\nNadan 的左脚鞋有 $4$ 只，右脚鞋有 $3$ 只，最多可以配成 $3$ 对。一种配对方式为：**39-46**，41-42，45-39，第一双的两只鞋大小之差的绝对值最大，因而丑陋度为 $7$。\n\n一种更好的配对方式为：39-39，41-42，45-46。该配对方式的丑陋度为 $1$，为所有配对方式中，丑陋度最小的。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$N=M$。\n\n对于另外 $50\\%$ 的数据，$N,M \\le 5000$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 10^5$，$1 \\le L_i,R_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $90$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T3 Cipele_。**", "locale": "zh-CN"}}}
{"pid": "P7306", "type": "P", "difficulty": 5, "samples": [["2 3\n.#.\n..#", "8"], ["3 3\n...\n...\n...", "100"], ["3 4\n..#.\n#...\n...#", "40"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2018", "COCI（克罗地亚）", "单调栈"], "title": "[COCI 2018/2019 #1] Strah", "background": "任何人都会对某事感到害怕。有些怕黑，有些怕高，还有些惧怕 Vinnie Jones……", "description": "Mirko 最害怕的是寻找合适的土地来种植草莓。他的土地可以用一个 $N \\times M$ 的矩阵来表示。土地中有些田地适合种植草莓，而有些不适合，因为那里杂草丛生。\n\nMirko 正在寻找一块合适矩形。当土地中有一块矩形区域包含的所有田地均适合种植草莓，则该矩形被称为合适矩形。\n\nMirko 还对所有田地的潜力值感兴趣。一块田地的潜力值定义为包含该田地的合适矩形的个数。\n\n求 Mirko 所有田地的潜力值之和。", "inputFormat": "第一行输入正整数 $N,M$，表示土地的规模。\n\n接下来的 $N$ 行，每行输入 $M$ 个字符。其中 `.` 表示该块田地适合种植草莓，而 `#` 表示不适合。", "outputFormat": "输出 Mirko 所有田地的潜力值之和。", "hint": "#### 样例 1 解释\n\n下列矩阵代表各个田地的潜力值。所有田地潜力值总和为 $8$。\n\n|$2$|$0$|$1$|\n| :----------: | :----------: | :----------: |\n|$3$|$2$|$0$|\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$1 \\le N,M \\le 10$。\n\n对于另外 $30\\%$ 的数据，$1 \\le N,M \\le 300$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 2000$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T4 Strah_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #1] Strah", "background": "任何人都会对某事感到害怕。有些怕黑，有些怕高，还有些惧怕 Vinnie Jones……", "description": "Mirko 最害怕的是寻找合适的土地来种植草莓。他的土地可以用一个 $N \\times M$ 的矩阵来表示。土地中有些田地适合种植草莓，而有些不适合，因为那里杂草丛生。\n\nMirko 正在寻找一块合适矩形。当土地中有一块矩形区域包含的所有田地均适合种植草莓，则该矩形被称为合适矩形。\n\nMirko 还对所有田地的潜力值感兴趣。一块田地的潜力值定义为包含该田地的合适矩形的个数。\n\n求 Mirko 所有田地的潜力值之和。", "inputFormat": "第一行输入正整数 $N,M$，表示土地的规模。\n\n接下来的 $N$ 行，每行输入 $M$ 个字符。其中 `.` 表示该块田地适合种植草莓，而 `#` 表示不适合。", "outputFormat": "输出 Mirko 所有田地的潜力值之和。", "hint": "#### 样例 1 解释\n\n下列矩阵代表各个田地的潜力值。所有田地潜力值总和为 $8$。\n\n|$2$|$0$|$1$|\n| :----------: | :----------: | :----------: |\n|$3$|$2$|$0$|\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$1 \\le N,M \\le 10$。\n\n对于另外 $30\\%$ 的数据，$1 \\le N,M \\le 300$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 2000$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T4 Strah_。**", "locale": "zh-CN"}}}
{"pid": "P7307", "type": "P", "difficulty": 6, "samples": [["3 3 5\n1 1\n1 2\n2 2\n2 3\n3 3", "2\n1\n2\n1\n2\n1"], ["2 4 4\n1 1\n1 2\n1 3\n2 4", "4\n1\n2\n3\n4"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2018", "Special Judge", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #1] Teoretičar", "background": "", "description": "Alan 为了避免感到无聊，便让 Goran 给他出一道有趣的题目。由于他忙于准备考试，Goran 的回忆里只有一个巨大的二分图。他把二分图递给 Alan，让他用尽可能少的颜色涂满所有边，使得同种颜色的边没有公共点。\n\nGoran 看到 Alan 的复杂方法后，决定大发慈悲，给定了一个简化版本：令 $C$ 为上述问题的答案，$X$ 为不小于 $C$ 的最小的 $2$ 的正整数次幂。仅需给出一种方案，使得颜色个数不超过 $X$。\n\n请帮助 Alan 解决该题。\n\n注：二分图是一种能够被分成两个集合的图，使得每条边连接的两个点都属于不同集合。", "inputFormat": "第一行输入正整数 $L,R,M$，分别表示二分图其中第一个集合的点的个数、第二个集合的点的个数和边的个数。\n\n接下来的 $M$ 行，每行输入两个正整数 $a_i,b_i$，表示第一个集合的第 $a_i$ 个点和第二个集合的第 $b_i$ 个点之间有一条边。数据保证，没有重边。", "outputFormat": "第一行输出一个正整数 $K$，表示使用的颜色个数。\n\n接下来的 $M$ 行，每行输出一个正整数 $c_i$（$1 \\le c_i \\le K$），表示第 $i$ 条边所用颜色。", "hint": "#### 样例 2 解释\n\n使用颜色最少个数为 $3$。然而，使用 $4$ 种颜色也是可行的。因为 $4$ 是不小于 $3$ 的最小的 $2$ 的正整数次幂。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$L,R \\le 100$。\n\n对于另外 $20\\%$ 的数据，$L,R \\le 5000$。\n\n对于 $100\\%$ 的数据，$1 \\le L,R \\le 10^5$，$1 \\le M \\le 5 \\times 10^5$，$1 \\le a_i \\le L$，$1 \\le b_i \\le R$。\n\n#### 说明\n\n**这里只选取其中具有梯度的 $10$ 个测试点进行评测，因此满分由 $130$ 调整为 $100$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T5 Teoretičar_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #1] Teoretičar", "background": "", "description": "Alan 为了避免感到无聊，便让 Goran 给他出一道有趣的题目。由于他忙于准备考试，Goran 的回忆里只有一个巨大的二分图。他把二分图递给 Alan，让他用尽可能少的颜色涂满所有边，使得同种颜色的边没有公共点。\n\nGoran 看到 Alan 的复杂方法后，决定大发慈悲，给定了一个简化版本：令 $C$ 为上述问题的答案，$X$ 为不小于 $C$ 的最小的 $2$ 的正整数次幂。仅需给出一种方案，使得颜色个数不超过 $X$。\n\n请帮助 Alan 解决该题。\n\n注：二分图是一种能够被分成两个集合的图，使得每条边连接的两个点都属于不同集合。", "inputFormat": "第一行输入正整数 $L,R,M$，分别表示二分图其中第一个集合的点的个数、第二个集合的点的个数和边的个数。\n\n接下来的 $M$ 行，每行输入两个正整数 $a_i,b_i$，表示第一个集合的第 $a_i$ 个点和第二个集合的第 $b_i$ 个点之间有一条边。数据保证，没有重边。", "outputFormat": "第一行输出一个正整数 $K$，表示使用的颜色个数。\n\n接下来的 $M$ 行，每行输出一个正整数 $c_i$（$1 \\le c_i \\le K$），表示第 $i$ 条边所用颜色。", "hint": "#### 样例 2 解释\n\n使用颜色最少个数为 $3$。然而，使用 $4$ 种颜色也是可行的。因为 $4$ 是不小于 $3$ 的最小的 $2$ 的正整数次幂。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$L,R \\le 100$。\n\n对于另外 $20\\%$ 的数据，$L,R \\le 5000$。\n\n对于 $100\\%$ 的数据，$1 \\le L,R \\le 10^5$，$1 \\le M \\le 5 \\times 10^5$，$1 \\le a_i \\le L$，$1 \\le b_i \\le R$。\n\n#### 说明\n\n**这里只选取其中具有梯度的 $10$ 个测试点进行评测，因此满分由 $130$ 调整为 $100$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T5 Teoretičar_。**", "locale": "zh-CN"}}}
{"pid": "P7308", "type": "P", "difficulty": 2, "samples": [["3\n10\n1400\n1500\n2\n7\n2000", "3\n1"], ["6\n15\n30\n35\n55\n60\n2065\n7\n20\n25\n40\n45\n50\n2070\n2075", "10\n5"], ["11\n1402\n1412\n1428\n1430\n1441\n1444\n1453\n1483\n1485\n1489\n1490\n9\n1403\n1405\n1409\n1435\n1459\n1460\n1461\n1487\n1495", "8\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2018", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #2] Preokret", "background": "", "description": "假如我们正在观看一场未来的球赛，比赛双方是 A 队和 B 队。我们知道两队的得分和每次得分的准确时间。在一秒内，不可能有超过一次得分。\n\nKing James 想要得到两个问题的答案：\n\n1. 上半场总共得了多少分？（整场比赛持续 $4 \\times 12$ 分钟）\n2. 发生多少次反超？（一次反超定义为一支队伍在得分小于对方后，经过投球使得得分超过对方）", "inputFormat": "第一行输入正整数 $A$，表示 A 队的得分。\n\n接下来的 $A$ 行，每行输入正整数 $A_s$，表示 A 队第 $s$ 次得分的时间。\n\n接下来的一行，输入正整数 $B$，表示 B 队的得分。\n\n接下来的 $B$ 行，每行输入正整数 $B_s$，表示 B 队第 $s$ 次得分的时间。", "outputFormat": "输出两行，每行分别输出题目描述中对应问题的答案。", "hint": "#### 样例 2 解释\n\n|比分（A:B）|时间（秒）|所属半场|是否发生反超|\n| :----------: | :----------: | :----------: | :----------: |\n|$1:0$|$15$|$1$|否|\n|$1:1$|$20$|$1$|否|\n|$1:2$|$25$|$1$|是（B）|\n|$2:2$|$30$|$1$|否|\n|$3:2$|$35$|$1$|是（A）|\n|$3:3$|$40$|$1$|否|\n|$3:4$|$45$|$1$|是（B）|\n|$3:5$|$50$|$1$|否|\n|$4:5$|$55$|$1$|否|\n|$5:5$|$60$|$1$|否|\n|$6:5$|$2065$|$2$|是（A）|\n|$6:6$|$2070$|$2$|否|\n|$6:7$|$2075$|$2$|是（B）|\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le A,B \\le 2879$，$1 \\le A_s,B_s \\le 2880$。\n\n#### 评分方式\n\n每组数据第一行计 $2$ 分，第二行计 $3$ 分，每组数据共 $5$ 分。\n\n评分需要借助 Special Judge，详见附件。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #2](https://hsin.hr/coci/archive/2018_2019/contest2_tasks.pdf)  _T1 Preokret_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #2] Preokret", "background": "", "description": "假如我们正在观看一场未来的球赛，比赛双方是 A 队和 B 队。我们知道两队的得分和每次得分的准确时间。在一秒内，不可能有超过一次得分。\n\nKing James 想要得到两个问题的答案：\n\n1. 上半场总共得了多少分？（整场比赛持续 $4 \\times 12$ 分钟）\n2. 发生多少次反超？（一次反超定义为一支队伍在得分小于对方后，经过投球使得得分超过对方）", "inputFormat": "第一行输入正整数 $A$，表示 A 队的得分。\n\n接下来的 $A$ 行，每行输入正整数 $A_s$，表示 A 队第 $s$ 次得分的时间。\n\n接下来的一行，输入正整数 $B$，表示 B 队的得分。\n\n接下来的 $B$ 行，每行输入正整数 $B_s$，表示 B 队第 $s$ 次得分的时间。", "outputFormat": "输出两行，每行分别输出题目描述中对应问题的答案。", "hint": "#### 样例 2 解释\n\n|比分（A:B）|时间（秒）|所属半场|是否发生反超|\n| :----------: | :----------: | :----------: | :----------: |\n|$1:0$|$15$|$1$|否|\n|$1:1$|$20$|$1$|否|\n|$1:2$|$25$|$1$|是（B）|\n|$2:2$|$30$|$1$|否|\n|$3:2$|$35$|$1$|是（A）|\n|$3:3$|$40$|$1$|否|\n|$3:4$|$45$|$1$|是（B）|\n|$3:5$|$50$|$1$|否|\n|$4:5$|$55$|$1$|否|\n|$5:5$|$60$|$1$|否|\n|$6:5$|$2065$|$2$|是（A）|\n|$6:6$|$2070$|$2$|否|\n|$6:7$|$2075$|$2$|是（B）|\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le A,B \\le 2879$，$1 \\le A_s,B_s \\le 2880$。\n\n#### 评分方式\n\n每组数据第一行计 $2$ 分，第二行计 $3$ 分，每组数据共 $5$ 分。\n\n评分需要借助 Special Judge，详见附件。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #2](https://hsin.hr/coci/archive/2018_2019/contest2_tasks.pdf)  _T1 Preokret_。**", "locale": "zh-CN"}}}
{"pid": "P7309", "type": "P", "difficulty": 3, "samples": [["3\n-1 2 0\n-1 0 1\n2 2 1\n0 0 1", "DA"], ["3\n-1 0 1\n-1 2 1\n-1 2 -1\n1 0 -1", "NE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2018", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #2] Kocka", "background": "在儿童游乐场里，编者被一个由金属横杠组成的立方体所吸引，于是他想出了一个有趣的问题。这里是二维的版本。", "description": "给定一个 $N \\times N$ 的矩阵。有些区域被堵塞，而有些区域是空白的。在观察的过程中，他从 $4$ 个方向对该矩阵进行观察。先从左侧开始，记录下每一行的第一个堵塞处前有几排是空出的。如果没有堵塞，则记下 $-1$。接着他如法炮制，分别从右侧、上方和下方进行观察并记录。\n\n这样，他总共写下了 $4N$ 个数字，其中每个方位均写下了 $N$ 个数字。然而，未知的恶棍摧毁了矩阵，他所剩的只有他写下的数字。\n\n编者想问你他写的数字是否存在错误，即是否可以通过这些数字还原出一个 $N \\times N$ 的矩阵。", "inputFormat": "第一行输入正整数 $N$，表示矩阵的规模。\n\n第二行包含 $N$ 个整数 $L_i$，表示从左侧观察所记下的数字。\n\n第三行包含 $N$ 个整数 $R_i$，表示从右侧观察所记下的数字。\n\n第四行包含 $N$ 个整数 $U_i$，表示从上方观察所记下的数字。\n\n第五行包含 $N$ 个整数 $D_i$，表示从下方观察所记下的数字。", "outputFormat": "如果给定的数字可以还原出一个 $N \\times N$ 的矩阵，则输出 `DA`，否则输出 `NE`。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/50ve94cy.png)\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，$N \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$-1 \\le L_i,R_i,U_i,D_i \\lt N$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #2](https://hsin.hr/coci/archive/2018_2019/contest2_tasks.pdf)  _T2 Kocka_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #2] Kocka", "background": "在儿童游乐场里，编者被一个由金属横杠组成的立方体所吸引，于是他想出了一个有趣的问题。这里是二维的版本。", "description": "给定一个 $N \\times N$ 的矩阵。有些区域被堵塞，而有些区域是空白的。在观察的过程中，他从 $4$ 个方向对该矩阵进行观察。先从左侧开始，记录下每一行的第一个堵塞处前有几排是空出的。如果没有堵塞，则记下 $-1$。接着他如法炮制，分别从右侧、上方和下方进行观察并记录。\n\n这样，他总共写下了 $4N$ 个数字，其中每个方位均写下了 $N$ 个数字。然而，未知的恶棍摧毁了矩阵，他所剩的只有他写下的数字。\n\n编者想问你他写的数字是否存在错误，即是否可以通过这些数字还原出一个 $N \\times N$ 的矩阵。", "inputFormat": "第一行输入正整数 $N$，表示矩阵的规模。\n\n第二行包含 $N$ 个整数 $L_i$，表示从左侧观察所记下的数字。\n\n第三行包含 $N$ 个整数 $R_i$，表示从右侧观察所记下的数字。\n\n第四行包含 $N$ 个整数 $U_i$，表示从上方观察所记下的数字。\n\n第五行包含 $N$ 个整数 $D_i$，表示从下方观察所记下的数字。", "outputFormat": "如果给定的数字可以还原出一个 $N \\times N$ 的矩阵，则输出 `DA`，否则输出 `NE`。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/50ve94cy.png)\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，$N \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$-1 \\le L_i,R_i,U_i,D_i \\lt N$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #2](https://hsin.hr/coci/archive/2018_2019/contest2_tasks.pdf)  _T2 Kocka_。**", "locale": "zh-CN"}}}
{"pid": "P7310", "type": "P", "difficulty": 4, "samples": [["3\n1 2 3\n1 2\n2 3", "10"], ["5\n2 3 4 2 1\n1 2\n1 3\n3 4\n3 5", "64"], ["6\n5 4 1 3 3 3\n3 1\n3 5\n4 3\n4 2\n2 6", "85"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2018", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #2] Deblo", "background": "", "description": "给定一个包含 $n$ 个结点的树，其中每个结点都有一个权值。一条路径的权值定义为该路径经过的所有结点的权值异或后的结果。\n\n你的任务是求出所有路径的权值之和。", "inputFormat": "第一行输入正整数 $N$，表示树的结点个数。\n\n第二行输入 $N$ 个用空格分隔的整数 $v_i$，第 $i$ 个整数表示结点 $i$ 的权值。\n\n接下来的 $N-1$ 行，每行输入整数 $a_j,b_j$，表示 $a_j,b_j$ 之间有一条边。", "outputFormat": "输出所有路径的权值之和。", "hint": "#### 样例 1 解释\n\n路径 $1 \\to 1$ 的权值为 $1$；\n\n路径 $1 \\to 2$ 的权值为 $1⊕2=3$；\n\n路径 $1 \\to 3$ 的权值为 $1⊕2⊕3=0$；\n\n路径 $2 \\to 2$ 的权值为 $2$；\n\n路径 $2 \\to 3$ 的权值为 $2⊕3=1$；\n\n路径 $3 \\to 3$ 的权值为 $3$。\n\n所有路径的权值之和为 $1+3+0+2+1+3=10$。\n\n#### 数据规模与约定\n\n对于 $30\\%$ 的数据，$N \\le 200$。\n\n对于 $50\\%$ 的数据，$N \\le 1000$。\n\n对于另外 $20\\%$ 的数据，$x=1,2,\\cdots,N-1$ 中的每个结点都和结点 $x+1$ 之间有一条边。\n\n对于 $100\\%$ 的数据，$1 \\le a_j,b_j \\le N \\le 10^5$，$0 \\le v_i \\le 3 \\times 10^6$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $90$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #2](https://hsin.hr/coci/archive/2018_2019/contest2_tasks.pdf)  _T3 Deblo_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #2] Deblo", "background": "", "description": "给定一个包含 $n$ 个结点的树，其中每个结点都有一个权值。一条路径的权值定义为该路径经过的所有结点的权值异或后的结果。\n\n你的任务是求出所有路径的权值之和。", "inputFormat": "第一行输入正整数 $N$，表示树的结点个数。\n\n第二行输入 $N$ 个用空格分隔的整数 $v_i$，第 $i$ 个整数表示结点 $i$ 的权值。\n\n接下来的 $N-1$ 行，每行输入整数 $a_j,b_j$，表示 $a_j,b_j$ 之间有一条边。", "outputFormat": "输出所有路径的权值之和。", "hint": "#### 样例 1 解释\n\n路径 $1 \\to 1$ 的权值为 $1$；\n\n路径 $1 \\to 2$ 的权值为 $1⊕2=3$；\n\n路径 $1 \\to 3$ 的权值为 $1⊕2⊕3=0$；\n\n路径 $2 \\to 2$ 的权值为 $2$；\n\n路径 $2 \\to 3$ 的权值为 $2⊕3=1$；\n\n路径 $3 \\to 3$ 的权值为 $3$。\n\n所有路径的权值之和为 $1+3+0+2+1+3=10$。\n\n#### 数据规模与约定\n\n对于 $30\\%$ 的数据，$N \\le 200$。\n\n对于 $50\\%$ 的数据，$N \\le 1000$。\n\n对于另外 $20\\%$ 的数据，$x=1,2,\\cdots,N-1$ 中的每个结点都和结点 $x+1$ 之间有一条边。\n\n对于 $100\\%$ 的数据，$1 \\le a_j,b_j \\le N \\le 10^5$，$0 \\le v_i \\le 3 \\times 10^6$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $90$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #2](https://hsin.hr/coci/archive/2018_2019/contest2_tasks.pdf)  _T3 Deblo_。**", "locale": "zh-CN"}}}
{"pid": "P7311", "type": "P", "difficulty": 4, "samples": [["2 2 1 1 2\n0 1\n2 10", "2"], ["2 2 1 1 4\n0 5\n5 10", "20"], ["3 3 2 2 6\n5 1 0\n1 0 3\n1 3 3", "15"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2018", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #2] Maja", "background": "", "description": "蜜蜂 Maja 在一个神奇的牧场里为花朵传粉。牧场可用一个 $N \\times M$ 的矩阵表示。在第 $i$ 行第 $j$ 列有 $C_{i,j}$ 朵未传粉的花。\n\nMaja 从位于第 $A$ 行第 $B$ 列的蜂巢出发，并前往牧场的一些区域后返回。Maja 可以在 $1$ 步内从当前区域前往相邻的区域（即位于原区域的左、右、上或下方的区域），但不会离开牧场。每当 Maja 经过一个区域，它将会将该区域所有未传粉的花全部进行传粉。但牧场是神奇的！Maja 在离开区域 $(i,j)$ 后，所有传过粉的花将全部消失，而紧接着将会有 $C_{i,j}$ 朵未传粉的花重新生长。\n\n由于 Maja 不能一直飞下去，因此它将在 $K$ 步后感到劳累。Maja 在 $K$ 步内从蜂巢出发并返回的途中，最多能为多少朵花传粉？", "inputFormat": "第一行输入正整数 $N,M,A,B,K$。\n\n接下来的 $N$ 行，每行输入 $M$ 个整数表示区域 $(i,j)$ 的花的数量 $C_{i,j}$。\n\n蜂巢所在区域不会有任何花朵生长。", "outputFormat": "输出 Maja 在 $K$ 步内从蜂巢出发并返回的途中，被传粉的花的最大数量。", "hint": "#### 样例 1 解释\n\nMaja 从 $(1,1)$ 开始，先向下飞行，为 $2$ 朵花传粉，然后再返回。\n\n#### 样例 2 解释\n\nMaja 从 $(1,1)$ 开始，依次向右、下、上、左飞行。由于 Maja 经过了 $(1,2)$ 两次，因而它每经过一次，便可为 $5$ 朵花传粉。\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，$K \\le 10^4$。\n\n对于 $100\\%$ 的数据，$2 \\le N,M \\le 100$，$1 \\le A \\le N$，$1 \\le B \\le M$，$2 \\le K \\le 10^9$，$0 \\le C_{i,j} \\le 10^9$，$K \\bmod 2=0$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #2](https://hsin.hr/coci/archive/2018_2019/contest2_tasks.pdf)  _T4 Maja_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #2] Maja", "background": "", "description": "蜜蜂 Maja 在一个神奇的牧场里为花朵传粉。牧场可用一个 $N \\times M$ 的矩阵表示。在第 $i$ 行第 $j$ 列有 $C_{i,j}$ 朵未传粉的花。\n\nMaja 从位于第 $A$ 行第 $B$ 列的蜂巢出发，并前往牧场的一些区域后返回。Maja 可以在 $1$ 步内从当前区域前往相邻的区域（即位于原区域的左、右、上或下方的区域），但不会离开牧场。每当 Maja 经过一个区域，它将会将该区域所有未传粉的花全部进行传粉。但牧场是神奇的！Maja 在离开区域 $(i,j)$ 后，所有传过粉的花将全部消失，而紧接着将会有 $C_{i,j}$ 朵未传粉的花重新生长。\n\n由于 Maja 不能一直飞下去，因此它将在 $K$ 步后感到劳累。Maja 在 $K$ 步内从蜂巢出发并返回的途中，最多能为多少朵花传粉？", "inputFormat": "第一行输入正整数 $N,M,A,B,K$。\n\n接下来的 $N$ 行，每行输入 $M$ 个整数表示区域 $(i,j)$ 的花的数量 $C_{i,j}$。\n\n蜂巢所在区域不会有任何花朵生长。", "outputFormat": "输出 Maja 在 $K$ 步内从蜂巢出发并返回的途中，被传粉的花的最大数量。", "hint": "#### 样例 1 解释\n\nMaja 从 $(1,1)$ 开始，先向下飞行，为 $2$ 朵花传粉，然后再返回。\n\n#### 样例 2 解释\n\nMaja 从 $(1,1)$ 开始，依次向右、下、上、左飞行。由于 Maja 经过了 $(1,2)$ 两次，因而它每经过一次，便可为 $5$ 朵花传粉。\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，$K \\le 10^4$。\n\n对于 $100\\%$ 的数据，$2 \\le N,M \\le 100$，$1 \\le A \\le N$，$1 \\le B \\le M$，$2 \\le K \\le 10^9$，$0 \\le C_{i,j} \\le 10^9$，$K \\bmod 2=0$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #2](https://hsin.hr/coci/archive/2018_2019/contest2_tasks.pdf)  _T4 Maja_。**", "locale": "zh-CN"}}}
{"pid": "P7312", "type": "P", "difficulty": 6, "samples": [["5\n1 1 4 2\n6 1 1 1\n2 2 2 3\n3 4 3 2\n4 0 1 2", "NE\nDA\nNE\nDA\nDA"], ["3\n3 3 1 1\n2 2 3 3\n1 1 5 5", "NE\nNE\nDA"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2018", "cdq 分治", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #2] Sunčanje", "background": "", "description": "Slavko 做了一个不寻常的梦。在一个晴朗的早上，$N$ 个白色的矩形一个接着一个爬上了 Slavko 家的屋顶，并在屋顶上晒太阳。每个矩形在屋顶都选定了一个位置，使得它的边与屋顶的棱角平行。有些矩形可能会覆盖在其它矩形所在的位置上。每个矩形的长、宽分别为 $A_i,B_i$，其与屋顶左方和下方的棱角的距离分别为 $X_i,Y_i$。\n\n日落后，矩形们从屋顶上下来，并睡了一觉。次日，它们发现，有些矩形变成了黄色，而有些仍为白色。变为黄色的矩形都是完全暴露在阳光下的。\n\n请判断每个矩形是否变为了黄色。", "inputFormat": "第一行输入正整数 $N$，表示矩形的个数。\n\n接下来的 $N$ 行，每行输入整数 $X_i,Y_i,A_i,B_i$。输入顺序与登上屋顶的顺序一致。", "outputFormat": "输出 $N$ 行。其中，若第 $i$ 个矩形变为黄色，则在第 $i$ 行输出 `DA`，否则在该行输出 `NE`。", "hint": "#### 样例 1 解释\n\n矩形 $1,3$ 没有完全暴露在阳光下，因而它们没有变为黄色：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pzfz7o9i.png?x-oss-process=image/resize,m_lfit,h_320,w_362)\n\n#### 数据规模与约定\n\n对于 $10\\%$ 的数据，$N \\le 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$0 \\le X_i,Y_i \\le 10^9$，$1 \\le A_i,B_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $130$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #2](https://hsin.hr/coci/archive/2018_2019/contest2_tasks.pdf)  _T5 Sunčanje_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #2] Sunčanje", "background": "", "description": "Slavko 做了一个不寻常的梦。在一个晴朗的早上，$N$ 个白色的矩形一个接着一个爬上了 Slavko 家的屋顶，并在屋顶上晒太阳。每个矩形在屋顶都选定了一个位置，使得它的边与屋顶的棱角平行。有些矩形可能会覆盖在其它矩形所在的位置上。每个矩形的长、宽分别为 $A_i,B_i$，其与屋顶左方和下方的棱角的距离分别为 $X_i,Y_i$。\n\n日落后，矩形们从屋顶上下来，并睡了一觉。次日，它们发现，有些矩形变成了黄色，而有些仍为白色。变为黄色的矩形都是完全暴露在阳光下的。\n\n请判断每个矩形是否变为了黄色。", "inputFormat": "第一行输入正整数 $N$，表示矩形的个数。\n\n接下来的 $N$ 行，每行输入整数 $X_i,Y_i,A_i,B_i$。输入顺序与登上屋顶的顺序一致。", "outputFormat": "输出 $N$ 行。其中，若第 $i$ 个矩形变为黄色，则在第 $i$ 行输出 `DA`，否则在该行输出 `NE`。", "hint": "#### 样例 1 解释\n\n矩形 $1,3$ 没有完全暴露在阳光下，因而它们没有变为黄色：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pzfz7o9i.png?x-oss-process=image/resize,m_lfit,h_320,w_362)\n\n#### 数据规模与约定\n\n对于 $10\\%$ 的数据，$N \\le 10^4$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$0 \\le X_i,Y_i \\le 10^9$，$1 \\le A_i,B_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $130$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #2](https://hsin.hr/coci/archive/2018_2019/contest2_tasks.pdf)  _T5 Sunčanje_。**", "locale": "zh-CN"}}}
{"pid": "P7313", "type": "P", "difficulty": 2, "samples": [["MAGNUS", "0"], ["HHHHOOOONNNNIIII", "1"], ["PROHODNIHODNIK", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2018", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #3] Magnus", "background": "Magnus 下国际象棋输给了 Kile，所以他开始痴迷于编程。他决定前往 COCI 竞赛试试运气。\n\nKile 得知 Magnus 想要参加 COCI 后，便给他出了这道热身题。", "description": "给定一个长度为 $N$ 的单词。在单词中删除任意个字母，使得能够组成尽可能多的 `HONI`。", "inputFormat": "输入一个长度为 $N$ 的只包含英文字母的字符串，作为给定的单词。", "outputFormat": "输出能够组成的 `HONI` 的最大数量。", "hint": "#### 样例 2 解释\n\n可以将 `H`，`O`，`N`，`I` 四个字母各从原单词中删除最早出现的 $3$ 个，得到 `HONI`。\n\n#### 数据规模与规定\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T1 Magnus_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #3] Magnus", "background": "Magnus 下国际象棋输给了 Kile，所以他开始痴迷于编程。他决定前往 COCI 竞赛试试运气。\n\nKile 得知 Magnus 想要参加 COCI 后，便给他出了这道热身题。", "description": "给定一个长度为 $N$ 的单词。在单词中删除任意个字母，使得能够组成尽可能多的 `HONI`。", "inputFormat": "输入一个长度为 $N$ 的只包含英文字母的字符串，作为给定的单词。", "outputFormat": "输出能够组成的 `HONI` 的最大数量。", "hint": "#### 样例 2 解释\n\n可以将 `H`，`O`，`N`，`I` 四个字母各从原单词中删除最早出现的 $3$ 个，得到 `HONI`。\n\n#### 数据规模与规定\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $50$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T1 Magnus_。**", "locale": "zh-CN"}}}
{"pid": "P7314", "type": "P", "difficulty": 1, "samples": [["2\n1 3", "2"], ["3\n1 1 1", "0"], ["5\n1 2 1 2 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["贪心", "2018", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #3] Pismo", "background": "", "description": "给定一个包含 $N$ 个整数的数组 $A$。\n\n该数组中一个区间 $[L,R]$ （$L \\lt R$）的值定义为 $\\max(A[L],A[L+1],\\cdots,A[R])-\\min(A[L],A[L+1],\\cdots,A[R])$。\n\n求该数组中所有区间值的最小值。", "inputFormat": "第一行输入正整数 $N$。\n\n第二行输入 $N$ 个整数 $A_i$，表示数组中的数。", "outputFormat": "输出所有区间值的最小值。", "hint": "#### 样例 3 解释\n\n符合题意的区间为 $[1,5]$，该区间的值为 $\\max(1,2,1,2,1)-\\min(1,2,1,2,1)=2-1=1$，为所有区间中值最小的。\n\n#### 数据规模与规定\n\n对于 $20$ 分的数据，$N \\le 100$。\n\n对于 $40$ 分的数据，$N \\le 2000$。\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 10^5$，$|A_i| \\lt 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T2 Pismo_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #3] Pismo", "background": "", "description": "给定一个包含 $N$ 个整数的数组 $A$。\n\n该数组中一个区间 $[L,R]$ （$L \\lt R$）的值定义为 $\\max(A[L],A[L+1],\\cdots,A[R])-\\min(A[L],A[L+1],\\cdots,A[R])$。\n\n求该数组中所有区间值的最小值。", "inputFormat": "第一行输入正整数 $N$。\n\n第二行输入 $N$ 个整数 $A_i$，表示数组中的数。", "outputFormat": "输出所有区间值的最小值。", "hint": "#### 样例 3 解释\n\n符合题意的区间为 $[1,5]$，该区间的值为 $\\max(1,2,1,2,1)-\\min(1,2,1,2,1)=2-1=1$，为所有区间中值最小的。\n\n#### 数据规模与规定\n\n对于 $20$ 分的数据，$N \\le 100$。\n\n对于 $40$ 分的数据，$N \\le 2000$。\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 10^5$，$|A_i| \\lt 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T2 Pismo_。**", "locale": "zh-CN"}}}
{"pid": "P7315", "type": "P", "difficulty": 6, "samples": [["2 0\nox\nox", "DA"], ["3 1\nooo\nxoo\noox", "NE"], ["4 2\noxxo\nxxox\noxoo\noxxo", "DA"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2018", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #3] Sajam", "background": "原时限 5s，这里设为 1s，经测试正确算法可以正常通过。\n\nMilo 组织了一场圣诞游园会。结束后，他想通过 LEET 来实现熄灯。", "description": "每个区域都由 $N$ 行组成，其中每行有 $N$ 个摊位。现有 $3$ 种操作方式改变发光状态指将原来发光的灯改为熄灭，反之亦然）：\n\n1. LEET 将选定一整行，并自动将这行所有的灯改变发光状态。\n2. LEET 将选定一整列，并自动将这列所有的灯改变发光状态。\n3. Milo 将选定一个摊位，并手动将该摊位的灯改变发光状态。\n\n是否有方案使得 Milo 能在最多进行 $K$ 次操作 3 的情况下，将所有灯全部熄灭？", "inputFormat": "第一行输入整数 $N,K$。\n\n接下来的 $N$ 行，每行有 $N$ 个字符 `x` 或 `o`，表示圣诞游园会对应摊位灯的发光状态。其中 `x` 指熄灭，`o` 指发光。", "outputFormat": "如果有符合题意的方案，则输出 `DA`，否则输出 `NE`。", "hint": "#### 样例 3 解释\n\n一种符合题意的方案：\n\n- 执行操作 $2$，选定第 $1$ 列。\n- 执行操作 $3$，选定 $(2,2)$。\n- 执行操作 $1$，选定第 $2$ 行。\n- 执行操作 $2$，选定第 $4$ 列。\n- 执行操作 $3$，选定 $(3,3)$。\n\n#### 数据规模与规定\n\n对于 $15$ 分的数据，$K=0$。\n\n对于另外 $15$ 分的数据，$N \\le 100$。\n\n对于另外 $30$ 分的数据，$K \\lt \\dfrac{N}{2}$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 1000$，$0 \\le K \\le N$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $90$。这里只选取其中具有梯度的 $18$ 个测试点进行评测。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T3 Sajam_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #3] Sajam", "background": "原时限 5s，这里设为 1s，经测试正确算法可以正常通过。\n\nMilo 组织了一场圣诞游园会。结束后，他想通过 LEET 来实现熄灯。", "description": "每个区域都由 $N$ 行组成，其中每行有 $N$ 个摊位。现有 $3$ 种操作方式改变发光状态指将原来发光的灯改为熄灭，反之亦然）：\n\n1. LEET 将选定一整行，并自动将这行所有的灯改变发光状态。\n2. LEET 将选定一整列，并自动将这列所有的灯改变发光状态。\n3. Milo 将选定一个摊位，并手动将该摊位的灯改变发光状态。\n\n是否有方案使得 Milo 能在最多进行 $K$ 次操作 3 的情况下，将所有灯全部熄灭？", "inputFormat": "第一行输入整数 $N,K$。\n\n接下来的 $N$ 行，每行有 $N$ 个字符 `x` 或 `o`，表示圣诞游园会对应摊位灯的发光状态。其中 `x` 指熄灭，`o` 指发光。", "outputFormat": "如果有符合题意的方案，则输出 `DA`，否则输出 `NE`。", "hint": "#### 样例 3 解释\n\n一种符合题意的方案：\n\n- 执行操作 $2$，选定第 $1$ 列。\n- 执行操作 $3$，选定 $(2,2)$。\n- 执行操作 $1$，选定第 $2$ 行。\n- 执行操作 $2$，选定第 $4$ 列。\n- 执行操作 $3$，选定 $(3,3)$。\n\n#### 数据规模与规定\n\n对于 $15$ 分的数据，$K=0$。\n\n对于另外 $15$ 分的数据，$N \\le 100$。\n\n对于另外 $30$ 分的数据，$K \\lt \\dfrac{N}{2}$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 1000$，$0 \\le K \\le N$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $90$。这里只选取其中具有梯度的 $18$ 个测试点进行评测。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T3 Sajam_。**", "locale": "zh-CN"}}}
{"pid": "P7316", "type": "P", "difficulty": 6, "samples": [["6 6\n3\n4 4 2\n3 3 2\n2 4 1", "68"], ["100 100\n2\n50 50 49\n30 30 29", "9534"], ["33333 44444\n1\n11111 22222 9999", "1167355751"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2018", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #3] NLO", "background": "", "description": "给定一个 $N \\times M$ 的矩形麦田。麦田的每个区域都生长有一定量的草。所有区域的初始草量均为 $1$。\n\n在 $K$ 天内，圆形的 UFO 将降落在麦田上并画圆。在第 $i$ 天早上，一个半径为 $R_i$ 的 UFO 将降落在区域 $(X_i,Y_i)$，并使得以该区域为圆心，$R_i$ 的半径内的所有区域将会受到影响。如果一个区域 $(x,y)$ 受到影响，且 $(X_i-x)^2+(Y_i-y)^2 \\le R_i^2$，则该区域的草量将降为 $0$。在新的一天到来时，每个区域的草量都会增加 $1$。\n\n求在第 $K$ 天晚上，所有区域的草量之和。", "inputFormat": "第一行输入正整数 $N,M$，表示麦地规模。\n\n第二行输入正整数 $K$，表示天数。\n\n接下来的 $K$ 行中的第 $i$ 行，输入正整数 $X_i,Y_i,R_i$，表示降落的区域和 UFO 的半径。", "outputFormat": "输出草的总量。", "hint": "#### 样例 1 解释\n\n第一天晚上的麦田：\n\n|$1$|$1$|$1$|$1$|$1$|$1$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$1$|$1$|$1$|$\\red 0$|$1$|$1$|\n|$1$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|\n|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|\n|$1$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|\n|$1$|$1$|$1$|$\\red 0$|$1$|$1$|\n\n第二天晚上的麦田：\n\n|$2$|$2$|$\\red 0$|$2$|$2$|$2$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$2$|$\\red 0$|$\\red 0$|$\\red 0$|$2$|$2$|\n|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$2$|\n|$2$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|$1$|\n|$2$|$2$|$\\red 0$|$1$|$1$|$2$|\n|$2$|$2$|$2$|$1$|$2$|$2$|\n\n第三天晚上的麦田：\n\n|$3$|$3$|$1$|$\\red 0$|$3$|$3$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$3$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$3$|\n|$1$|$1$|$1$|$\\red 0$|$1$|$3$|\n|$3$|$1$|$1$|$1$|$2$|$2$|\n|$3$|$3$|$1$|$2$|$2$|$3$|\n|$3$|$3$|$3$|$2$|$3$|$3$|\n\n因此总草量为 $68$ 单位。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$N,M \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 10^5$，$1 \\le K \\le 100$，$1 \\lt X_i \\lt N$，$1 \\lt Y_i \\lt M$，$1 \\le R_i \\le \\min(X_i-1,Y_i-1,N-X_i,M-Y_i)$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T4 NLO_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #3] NLO", "background": "", "description": "给定一个 $N \\times M$ 的矩形麦田。麦田的每个区域都生长有一定量的草。所有区域的初始草量均为 $1$。\n\n在 $K$ 天内，圆形的 UFO 将降落在麦田上并画圆。在第 $i$ 天早上，一个半径为 $R_i$ 的 UFO 将降落在区域 $(X_i,Y_i)$，并使得以该区域为圆心，$R_i$ 的半径内的所有区域将会受到影响。如果一个区域 $(x,y)$ 受到影响，且 $(X_i-x)^2+(Y_i-y)^2 \\le R_i^2$，则该区域的草量将降为 $0$。在新的一天到来时，每个区域的草量都会增加 $1$。\n\n求在第 $K$ 天晚上，所有区域的草量之和。", "inputFormat": "第一行输入正整数 $N,M$，表示麦地规模。\n\n第二行输入正整数 $K$，表示天数。\n\n接下来的 $K$ 行中的第 $i$ 行，输入正整数 $X_i,Y_i,R_i$，表示降落的区域和 UFO 的半径。", "outputFormat": "输出草的总量。", "hint": "#### 样例 1 解释\n\n第一天晚上的麦田：\n\n|$1$|$1$|$1$|$1$|$1$|$1$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$1$|$1$|$1$|$\\red 0$|$1$|$1$|\n|$1$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|\n|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|\n|$1$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|\n|$1$|$1$|$1$|$\\red 0$|$1$|$1$|\n\n第二天晚上的麦田：\n\n|$2$|$2$|$\\red 0$|$2$|$2$|$2$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$2$|$\\red 0$|$\\red 0$|$\\red 0$|$2$|$2$|\n|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$\\red 0$|$2$|\n|$2$|$\\red 0$|$\\red 0$|$\\red 0$|$1$|$1$|\n|$2$|$2$|$\\red 0$|$1$|$1$|$2$|\n|$2$|$2$|$2$|$1$|$2$|$2$|\n\n第三天晚上的麦田：\n\n|$3$|$3$|$1$|$\\red 0$|$3$|$3$|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|$3$|$1$|$\\red 0$|$\\red 0$|$\\red 0$|$3$|\n|$1$|$1$|$1$|$\\red 0$|$1$|$3$|\n|$3$|$1$|$1$|$1$|$2$|$2$|\n|$3$|$3$|$1$|$2$|$2$|$3$|\n|$3$|$3$|$3$|$2$|$3$|$3$|\n\n因此总草量为 $68$ 单位。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$N,M \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 10^5$，$1 \\le K \\le 100$，$1 \\lt X_i \\lt N$，$1 \\lt Y_i \\lt M$，$1 \\le R_i \\le \\min(X_i-1,Y_i-1,N-X_i,M-Y_i)$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T4 NLO_。**", "locale": "zh-CN"}}}
{"pid": "P7317", "type": "P", "difficulty": 6, "samples": [["4 4\n1 2 10\n2 3 9\n3 4 8\n4 1 7", "1\n12 3 1 2 3"], ["2 1\n1 2 3", "0"], ["6 8\n1 2 6\n2 3 1\n3 5 6\n3 1 5\n4 5 0\n3 6 0\n4 2 8\n4 1 1", "2\n2 2 4 6\n15 1 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2018/2019 #3] Praktični", "background": "", "description": "给定一个包含 $N$ 个结点和 $M$ 条边的无向图。每条边有一个小于 $10^9$ 的权值。\n\n当一个环上的所有边的权值的异或和为 $0$，该环被称作好环。\n\n可以对无向图进行若干次操作。每次操作包含下列步骤：\n\n- 选定一个整数 $x$。\n- 选定一个包含若干条边的非空集合。\n- 给该集合中每条边都异或上 $x$。\n\n请在尽可能少的操作次数之下使得无向图中的所有简单回路都是好环。请求出最少操作次数，并输出对应的操作参数。", "inputFormat": "第一行输入正整数 $N,M$，分别表示结点和边的数量。\n\n接下来的 $M$ 行中的第 $i$ 行，输入 $a_i,b_i,p_i$，分别表示第 $i$ 条边连接的结点和边的权值。保证图联通，且无重边。", "outputFormat": "第一行输出 $K$，表示需要操作的最少次数。\n\n接下来的 $K$ 行，每行输出若干个数，用空格分开：\n\n- 第一个数为选定的数 $x$。\n- 第二个数位 $B$，表示选定的边的数量。\n- 接下来输出 $B$ 个数 $E_i$（$1 \\le E_i \\le M$），表示选定的边的序号。这 $B$ 个数必须按照从小到大的顺序输出。\n\n输出的所有数必须小于等于 $2 \\times 10^9$。", "hint": "#### 样例 1 解释\n\n图的初始和结束状态（在初始状态的基础上给前三条边的权值异或上 $12$）分别如下方左图和右图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zh4zuicc.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/lbmx5f8v.png)\n\n#### 样例 2 解释\n\n该无向图无环，因此题意已经满足，不需要进行修改，因此最少操作次数为 $0$。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$K=1$。\n\n对于另外 $40\\%$ 的数据，输入的所有数均小于等于 $10^6$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 10^5$，$1 \\le a_i,b_i \\le N$，$a_i \\neq b_i$，$0 \\le p_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $130$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T5 Praktični_。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2018/2019 #3] Praktični", "background": "", "description": "给定一个包含 $N$ 个结点和 $M$ 条边的无向图。每条边有一个小于 $10^9$ 的权值。\n\n当一个环上的所有边的权值的异或和为 $0$，该环被称作好环。\n\n可以对无向图进行若干次操作。每次操作包含下列步骤：\n\n- 选定一个整数 $x$。\n- 选定一个包含若干条边的非空集合。\n- 给该集合中每条边都异或上 $x$。\n\n请在尽可能少的操作次数之下使得无向图中的所有简单回路都是好环。请求出最少操作次数，并输出对应的操作参数。", "inputFormat": "第一行输入正整数 $N,M$，分别表示结点和边的数量。\n\n接下来的 $M$ 行中的第 $i$ 行，输入 $a_i,b_i,p_i$，分别表示第 $i$ 条边连接的结点和边的权值。保证图联通，且无重边。", "outputFormat": "第一行输出 $K$，表示需要操作的最少次数。\n\n接下来的 $K$ 行，每行输出若干个数，用空格分开：\n\n- 第一个数为选定的数 $x$。\n- 第二个数位 $B$，表示选定的边的数量。\n- 接下来输出 $B$ 个数 $E_i$（$1 \\le E_i \\le M$），表示选定的边的序号。这 $B$ 个数必须按照从小到大的顺序输出。\n\n输出的所有数必须小于等于 $2 \\times 10^9$。", "hint": "#### 样例 1 解释\n\n图的初始和结束状态（在初始状态的基础上给前三条边的权值异或上 $12$）分别如下方左图和右图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zh4zuicc.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/lbmx5f8v.png)\n\n#### 样例 2 解释\n\n该无向图无环，因此题意已经满足，不需要进行修改，因此最少操作次数为 $0$。\n\n#### 数据规模与约定\n\n对于 $20\\%$ 的数据，$K=1$。\n\n对于另外 $40\\%$ 的数据，输入的所有数均小于等于 $10^6$。\n\n对于 $100\\%$ 的数据，$1 \\le N,M \\le 10^5$，$1 \\le a_i,b_i \\le N$，$a_i \\neq b_i$，$0 \\le p_i \\le 10^9$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $130$。**\n\n**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #3](https://hsin.hr/coci/archive/2018_2019/contest3_tasks.pdf)  _T5 Praktični_。**", "locale": "zh-CN"}}}
{"pid": "P7318", "type": "P", "difficulty": 3, "samples": [["1 6 10", "6"], ["7 2 7", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "枚举", "矩阵乘法", "洛谷月赛"], "title": "「PMOI-4」人赢", "background": "众所周知，ducati 是人 win。\n\n现在 lhm 也想成为人 win，于是 ducati 扔给了 lhm 下面这道题，并且 ducati 承诺在 lhm 完成此题后教他如何成为人 win。", "description": "现在 lhm 手中有一个无穷长的衔尾数列 $a$，它满足：\n\n- 对于数列中的每一个 $a_i(i>2)$，它总为 $a_{i-2} \\times a_{i-1}$ 的**个位数**。\n\nducati 将给 lhm 衔尾数列的前两位 $a_1=n,a_2=m$ 与位置 $k$，它的任务是算出 $a_k$。\n\n由于 lhm 太菜了并不会这道题，但他仍然想成为人 win，所以他只好请聪明的你来帮他完成这个问题。", "inputFormat": "第一行三个整数 $n,m,k$。", "outputFormat": "一行一个整数，表示数列中位置 $k$ 的数字。", "hint": "【样例解释 $1$】\n\n数列 $1$ 至 $10$ 位依次为：$1,6,6,6,6,6,6,6,6,\\color{red}{6}$。所以答案为 $6$。\n\n【样例解释 $2$】\n\n数列 $1$ 至 $7$ 位依次为：$7,2,4,8,2,6,\\color{red}{2}$。所以答案为 $2$。\n\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（30pts）：$1 \\leq k \\leq 10^6$。\n- Subtask 2（70pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$0 \\leq n,m \\leq 9$，$1 \\leq k \\leq 10^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-4」人赢", "background": "众所周知，ducati 是人 win。\n\n现在 lhm 也想成为人 win，于是 ducati 扔给了 lhm 下面这道题，并且 ducati 承诺在 lhm 完成此题后教他如何成为人 win。", "description": "现在 lhm 手中有一个无穷长的衔尾数列 $a$，它满足：\n\n- 对于数列中的每一个 $a_i(i>2)$，它总为 $a_{i-2} \\times a_{i-1}$ 的**个位数**。\n\nducati 将给 lhm 衔尾数列的前两位 $a_1=n,a_2=m$ 与位置 $k$，它的任务是算出 $a_k$。\n\n由于 lhm 太菜了并不会这道题，但他仍然想成为人 win，所以他只好请聪明的你来帮他完成这个问题。", "inputFormat": "第一行三个整数 $n,m,k$。", "outputFormat": "一行一个整数，表示数列中位置 $k$ 的数字。", "hint": "【样例解释 $1$】\n\n数列 $1$ 至 $10$ 位依次为：$1,6,6,6,6,6,6,6,6,\\color{red}{6}$。所以答案为 $6$。\n\n【样例解释 $2$】\n\n数列 $1$ 至 $7$ 位依次为：$7,2,4,8,2,6,\\color{red}{2}$。所以答案为 $2$。\n\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（30pts）：$1 \\leq k \\leq 10^6$。\n- Subtask 2（70pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$0 \\leq n,m \\leq 9$，$1 \\leq k \\leq 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P7319", "type": "P", "difficulty": 3, "samples": [["7\n1 -1 -2 2 -3 3 4", "66"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2021", "O2优化", "排序", "洛谷月赛"], "title": "「PMOI-4」生成树", "background": "> 题目正解不会很难，反正很难的也必不会做，所以宁愿相信题目都是善良的。\n\n——command_block 《考前小贴士》\n\ndjy 出了一道生成树的题，然后发现做法假了，就把这个题改了一下，作为这场比赛的 B。", "description": "给定 $n$ 个数，第 $i$ 个数的原始权值是 $w_i$，你要按照某种顺序将这些数依次选择。\n\n若当前是第 $i$ 次选数，选择的**原始权值**为 $k$，则其他所有**未被选过**的数的权值均加上 $(-1)^{i+k+1} \\times k$。\n\n你需要求出一种选数方案，使得选出的 $n$ 个数**最终**的**权值**和**最大**。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数 $w_i$，表示第 $i$ 个数的权值。", "outputFormat": "一行一个整数，表示最大权值和。", "hint": "【样例解释】\n\n依次选择**编号**为 $\\{7,6,5,3,4,1,2\\}$ 的数即可。\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20pts）：$n \\le 7$。\n- Subtask 2（30pts）：$n \\le  10^3$。\n- Subtask 3（30pts）：保证所有的 $w_i \\ge 0$ 或所有的 $w_i \\le 0$。\n- Subtask 4（20pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le n \\le 10^5,-10^9 \\le w \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-4」生成树", "background": "> 题目正解不会很难，反正很难的也必不会做，所以宁愿相信题目都是善良的。\n\n——command_block 《考前小贴士》\n\ndjy 出了一道生成树的题，然后发现做法假了，就把这个题改了一下，作为这场比赛的 B。", "description": "给定 $n$ 个数，第 $i$ 个数的原始权值是 $w_i$，你要按照某种顺序将这些数依次选择。\n\n若当前是第 $i$ 次选数，选择的**原始权值**为 $k$，则其他所有**未被选过**的数的权值均加上 $(-1)^{i+k+1} \\times k$。\n\n你需要求出一种选数方案，使得选出的 $n$ 个数**最终**的**权值**和**最大**。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数 $w_i$，表示第 $i$ 个数的权值。", "outputFormat": "一行一个整数，表示最大权值和。", "hint": "【样例解释】\n\n依次选择**编号**为 $\\{7,6,5,3,4,1,2\\}$ 的数即可。\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20pts）：$n \\le 7$。\n- Subtask 2（30pts）：$n \\le  10^3$。\n- Subtask 3（30pts）：保证所有的 $w_i \\ge 0$ 或所有的 $w_i \\le 0$。\n- Subtask 4（20pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le n \\le 10^5,-10^9 \\le w \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P7320", "type": "P", "difficulty": 6, "samples": [["6 7\n1 2\n1 3\n2 3\n2 5\n4 5\n5 6\n4 6", "2\n1 4"], ["6 6\n1 2\n2 3\n3 4\n4 5\n5 6\n1 6", "1\n6 1 2 3 4 5 6"]], "limits": {"time": [200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "图论", "树形数据结构", "Special Judge", "O2优化", "深度优先搜索 DFS", "构造", "洛谷月赛"], "title": "「PMOI-4」可怜的团主", "background": "", "description": "lnlhm 被塞给了一张 $n$ 个点 $m$ 条边的**简单无向连通**图。很快，他就被 ducati 和 b6e0 盯上了。\n\nducati 希望能够从中找到**恰好** $\\left \\lceil \\frac n 6 \\right \\rceil$ 条**不同**的路径，使得所有的点都被至少一条路径经过。\n\nb6e0 希望找到一个大小**恰好**为 $\\lfloor \\frac n 3 \\rfloor$ 的节点集合，使得它们之间**两两没有边**。\n\nlnlhm 知道，如果他没有满足某个人的要求，那么他就会被揍。因此，他向你求助：是否存在一种选择边或点的方案，使得**最多被一个人揍**？", "inputFormat": "第一行两个正整数 $n,m$，表示点数以及边数。\n\n下面 $m$ 行，每行两个点 $u,v$，描述一条**无向边**。", "outputFormat": "若想要满足 ducati 的需求，在第一行输出 $1$，并在下面的 $\\left \\lceil \\frac {n} 6 \\right \\rceil$ 行中，每行输出一条路径，你需要保证这些路径两两不同（例如，不能同时输出 $5 \\to 3 \\to 1$ 和 $1 \\to 3 \\to 5$）。输出一条路径的格式如下：\n\n- 先输出一个正整数 $k(1\\le k\\le n)$，表示路径经过的节点数。\n\n- 接下来 $k$ 个正整数，表示路径上的点，点之间用空格隔开。你需要保证，每相邻两个点之间有连边，不存在一个点被**某条**路径经过不少于两次，且每个点均被至少一条路径经过。\n\n若想要满足 b6e0 的需求，在第一行输出 $2$，并在第二行中输出 $\\lfloor \\frac n 3 \\rfloor$ 个点表示选出的独立集，之间用空格隔开。\n\n特别的，若两个人的要求一个也无法满足，那么输出一行 `Poor lnlhm!`。", "hint": "【样例解释】\n\n对于第一组样例，我们只需要为 b6e0 选出节点集合 $\\{1,4\\}$ 即可。注意，$\\{1,5\\}\\{1,6\\}\\{2,4\\}\\{2,6\\}\\{3,4\\}\\{3,5\\}\\{3,6\\}$ 同样合法。\n\n对于第二组样例，我们只需要为 ducati 选出路径 $1 \\to 2 \\to 3 \\to 4 \\to 5 \\to 6$ 即可。\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20pts）：$n,m\\le10$。\n- Subtask 2（20pts）：保证图为一棵树。\n- Subtask 3（60pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$3\\le n\\le10^3$，$3\\le m\\le\\dfrac{n(n-1)}2$，保证给定的图为简单无向连通图。\n\n**温馨提示: 输入量较大，请使用较快的读入方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-4」可怜的团主", "background": "", "description": "lnlhm 被塞给了一张 $n$ 个点 $m$ 条边的**简单无向连通**图。很快，他就被 ducati 和 b6e0 盯上了。\n\nducati 希望能够从中找到**恰好** $\\left \\lceil \\frac n 6 \\right \\rceil$ 条**不同**的路径，使得所有的点都被至少一条路径经过。\n\nb6e0 希望找到一个大小**恰好**为 $\\lfloor \\frac n 3 \\rfloor$ 的节点集合，使得它们之间**两两没有边**。\n\nlnlhm 知道，如果他没有满足某个人的要求，那么他就会被揍。因此，他向你求助：是否存在一种选择边或点的方案，使得**最多被一个人揍**？", "inputFormat": "第一行两个正整数 $n,m$，表示点数以及边数。\n\n下面 $m$ 行，每行两个点 $u,v$，描述一条**无向边**。", "outputFormat": "若想要满足 ducati 的需求，在第一行输出 $1$，并在下面的 $\\left \\lceil \\frac {n} 6 \\right \\rceil$ 行中，每行输出一条路径，你需要保证这些路径两两不同（例如，不能同时输出 $5 \\to 3 \\to 1$ 和 $1 \\to 3 \\to 5$）。输出一条路径的格式如下：\n\n- 先输出一个正整数 $k(1\\le k\\le n)$，表示路径经过的节点数。\n\n- 接下来 $k$ 个正整数，表示路径上的点，点之间用空格隔开。你需要保证，每相邻两个点之间有连边，不存在一个点被**某条**路径经过不少于两次，且每个点均被至少一条路径经过。\n\n若想要满足 b6e0 的需求，在第一行输出 $2$，并在第二行中输出 $\\lfloor \\frac n 3 \\rfloor$ 个点表示选出的独立集，之间用空格隔开。\n\n特别的，若两个人的要求一个也无法满足，那么输出一行 `Poor lnlhm!`。", "hint": "【样例解释】\n\n对于第一组样例，我们只需要为 b6e0 选出节点集合 $\\{1,4\\}$ 即可。注意，$\\{1,5\\}\\{1,6\\}\\{2,4\\}\\{2,6\\}\\{3,4\\}\\{3,5\\}\\{3,6\\}$ 同样合法。\n\n对于第二组样例，我们只需要为 ducati 选出路径 $1 \\to 2 \\to 3 \\to 4 \\to 5 \\to 6$ 即可。\n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20pts）：$n,m\\le10$。\n- Subtask 2（20pts）：保证图为一棵树。\n- Subtask 3（60pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$3\\le n\\le10^3$，$3\\le m\\le\\dfrac{n(n-1)}2$，保证给定的图为简单无向连通图。\n\n**温馨提示: 输入量较大，请使用较快的读入方式。**", "locale": "zh-CN"}}}
{"pid": "P7321", "type": "P", "difficulty": 5, "samples": [["3 100 100 100\n\n1 3\n\n1 2", "? 3 1 2 3 3\n\n? 2 1 2 2\n\nA 1 2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["交互题", "Special Judge", "O2优化", "洛谷月赛"], "title": "「PMOI-4」猜排列", "background": "**这是一道 IO 交互题。**\n\n**请各位选手确认好再提交，防止评测机爆炸。**", "description": "小 A 有一个长度为 $n$ 的**排列** $a$，他想请你猜一猜这个排列。你仅能给出以下两种询问：\n\n- `! x y`，他将会告诉你 $a_x \\bmod a_y$ 的值，其中你询问的数应当满足 $a_x\\gt a_y$ 且 $x\\ne y$；否则，他会不高兴并直接判定询问不合法，从而导致 `WA`。\n- `? l S p`，你需要给小 A 一个大小为 $l$ 的集合 $S$ 与一个整数 $p$，其中 $S=\\{x_1,x_2,x_3,\\ldots,x_l\\}$，其中对于任意 $1\\le i\\le l$，$1\\le x_i\\le n$，且 $x_i$ 互不相同，还要满足 $1\\le p\\le n$，$1\\le l\\le n$，小 A 将会告诉你这个集合中 $a_{x_k} \\ge p$ 的所有的 $x_k$，返回形式如下：首先会返回一个整数 $L$，接着会返回 $L$ 个整数，表示有 $L$ 个满足条件的 $k$（注意返回的是集合 $S$ 中的元素，而不是下标！）。\n\n你最多只能向小 A 询问 $m_1$ 个问题 $1$，$m_2$ 个问题 $2$，其中问题二中询问的集合大小之和应不超过 $m_3$ 来猜出这个序列。", "inputFormat": "输入排列的长度 $n$ 和 $m_1,m_2,m_3$ 以开始交互。\n\n交互过程中，您可以进行题目描述中的两种询问。无论是第一种询问还是第二种询问，交互库都会返回一个整数。\n\n在您确定答案后，请以 `A a[1] a[2] ... a[n-1] a[n]` 的形式输出一行，停止交互。\n\n在您输出一行后，请清空缓冲区：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其它语言请自行查阅文档。", "outputFormat": "见「交互方式」。", "hint": "【数据范围】\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | 分值 |$n=$ | $m_1=$ | $m_2=$ | $m_3=$ | 特殊限制 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $4$ | $4$ | $1$ | $4$ | 无 | \n| $2$ | $10$ | $5 \\times 10^2$ | $5 \\times 10^2$ | $5 \\times 10^2$ | $2.5\\times 10^5$ | 无 |\n| $3$ | $10$ | $2 \\times 10^4$ | $2 \\times 10^4$ | $2 \\times 10^4$ | $3 \\times 10^5$ | A |\n| $4$ | $20$ | $10^4$ | $10^4$ | $30$ | $3 \\times 10^5$ | 无 |\n| $5$ | $20$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $34$ | $4 \\times 10^5$ | 无 |\n| $6$ | $25$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $17$ |  $1.5\\times 10^5$ | 无 |\n| $7$ | $5$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $15$ | $1.5\\times 10^5$ | 无 |\n\n**A：保证排列 $a$ 随机构造**。\n\n【提示】\n\n1. 询问不合法或交互库输出数超过 $m$ 后继续询问会直接导致 WA。\n\n2. 数据范围的顶栏都是 $=$ 而非 $\\le$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-4」猜排列", "background": "**这是一道 IO 交互题。**\n\n**请各位选手确认好再提交，防止评测机爆炸。**", "description": "小 A 有一个长度为 $n$ 的**排列** $a$，他想请你猜一猜这个排列。你仅能给出以下两种询问：\n\n- `! x y`，他将会告诉你 $a_x \\bmod a_y$ 的值，其中你询问的数应当满足 $a_x\\gt a_y$ 且 $x\\ne y$；否则，他会不高兴并直接判定询问不合法，从而导致 `WA`。\n- `? l S p`，你需要给小 A 一个大小为 $l$ 的集合 $S$ 与一个整数 $p$，其中 $S=\\{x_1,x_2,x_3,\\ldots,x_l\\}$，其中对于任意 $1\\le i\\le l$，$1\\le x_i\\le n$，且 $x_i$ 互不相同，还要满足 $1\\le p\\le n$，$1\\le l\\le n$，小 A 将会告诉你这个集合中 $a_{x_k} \\ge p$ 的所有的 $x_k$，返回形式如下：首先会返回一个整数 $L$，接着会返回 $L$ 个整数，表示有 $L$ 个满足条件的 $k$（注意返回的是集合 $S$ 中的元素，而不是下标！）。\n\n你最多只能向小 A 询问 $m_1$ 个问题 $1$，$m_2$ 个问题 $2$，其中问题二中询问的集合大小之和应不超过 $m_3$ 来猜出这个序列。", "inputFormat": "输入排列的长度 $n$ 和 $m_1,m_2,m_3$ 以开始交互。\n\n交互过程中，您可以进行题目描述中的两种询问。无论是第一种询问还是第二种询问，交互库都会返回一个整数。\n\n在您确定答案后，请以 `A a[1] a[2] ... a[n-1] a[n]` 的形式输出一行，停止交互。\n\n在您输出一行后，请清空缓冲区：\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。\n- 在 Pascal 中，使用 `flush(output)`。\n- 在 Python 中，使用 `stdout.flush()`。\n- 其它语言请自行查阅文档。", "outputFormat": "见「交互方式」。", "hint": "【数据范围】\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | 分值 |$n=$ | $m_1=$ | $m_2=$ | $m_3=$ | 特殊限制 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $1$ | $10$ | $4$ | $4$ | $1$ | $4$ | 无 | \n| $2$ | $10$ | $5 \\times 10^2$ | $5 \\times 10^2$ | $5 \\times 10^2$ | $2.5\\times 10^5$ | 无 |\n| $3$ | $10$ | $2 \\times 10^4$ | $2 \\times 10^4$ | $2 \\times 10^4$ | $3 \\times 10^5$ | A |\n| $4$ | $20$ | $10^4$ | $10^4$ | $30$ | $3 \\times 10^5$ | 无 |\n| $5$ | $20$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $34$ | $4 \\times 10^5$ | 无 |\n| $6$ | $25$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $17$ |  $1.5\\times 10^5$ | 无 |\n| $7$ | $5$ | $5 \\times 10^4$ | $5 \\times 10^4$ | $15$ | $1.5\\times 10^5$ | 无 |\n\n**A：保证排列 $a$ 随机构造**。\n\n【提示】\n\n1. 询问不合法或交互库输出数超过 $m$ 后继续询问会直接导致 WA。\n\n2. 数据范围的顶栏都是 $=$ 而非 $\\le$。", "locale": "zh-CN"}}}
{"pid": "P7322", "type": "P", "difficulty": 5, "samples": [["3 2", "10"], ["500000 200000", "840847204"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "O2优化", "组合数学", "洛谷月赛"], "title": "「PMOI-4」排列变换", "background": "", "description": "给定常数 $k$。对于一个长度为 $n$ 的**排列** $a$，定义\n\n$$f(a)=\\{\\max_{1 \\le i \\le k} \\{a_i\\},\\max_{2 \\le i \\le k+1} \\{a_i\\},\\cdots,\\max_{n-k+1 \\le i \\le n} \\{a_i\\}\\}$$\n\n对于一个长度为 $n$ 的**序列** $a$，定义其权值 $w(a)$ 为 $a$ 中不同的数的个数。\n\n现在，$\\text{ducati}$ 想知道，对于所有长度为 $n$ 的排列 $p$，它们的 $w(f(p))$ 之和。", "inputFormat": "一行两个正整数 $n,k$。", "outputFormat": "一行一个整数表示答案。\n\n由于答案可能很大，你需要将它对 $998244353$ 取模。", "hint": "【样例解释】\n\n- $p=\\{1,2,3\\}$，$f(p)=\\{2,3\\}$，则 $w(f(p))=2$。\n- $p=\\{1,3,2\\}$，$f(p)=\\{3,3\\}$，则 $w(f(p))=1$。\n- $p=\\{2,1,3\\}$，$f(p)=\\{2,3\\}$，则 $w(f(p))=2$。\n- $p=\\{2,3,1\\}$，$f(p)=\\{3,3\\}$，则 $w(f(p))=1$。\n- $p=\\{3,1,2\\}$，$f(p)=\\{3,2\\}$，则 $w(f(p))=2$。\n- $p=\\{3,2,1\\}$，$f(p)=\\{3,2\\}$，则 $w(f(p))=2$。\n\n答案为 $2+1+2+1+2+2=10$。 \n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（10pts）：$n \\le 8$。\n- Subtask 2（10pts）：$n \\le 11$。\n- Subtask 3（30pts）：$n \\le 100$。\n- Subtask 4（20pts）：$n \\le 400$。\n- Subtask 5（20pts）：$n \\le 4000$。\n- Subtask 6（10pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le k \\le n \\le  5 \\times 10^5$。\n\n【提示】\n\n1. $p$ 是一个长度为 $n$ 的排列，当且仅当每个在 $[1,n]$ 中的整数都在 $p$ 中**恰好出现了一次**。\n例如，$\\{1,5,3,2,4\\}$ 与 $\\{4,2,1,3\\}$ 分别是长度为 $5,4$ 的排列，而 $\\{1,2,2\\}$ 不是长度为 $3$ 的排列，$\\{5,4,3,2,1\\}$ 不是长度为 $6$ 的排列，$\\{1.5,3,1\\}$ 不是长度为 $3$ 的排列。\n\n2. 本题并不难。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-4」排列变换", "background": "", "description": "给定常数 $k$。对于一个长度为 $n$ 的**排列** $a$，定义\n\n$$f(a)=\\{\\max_{1 \\le i \\le k} \\{a_i\\},\\max_{2 \\le i \\le k+1} \\{a_i\\},\\cdots,\\max_{n-k+1 \\le i \\le n} \\{a_i\\}\\}$$\n\n对于一个长度为 $n$ 的**序列** $a$，定义其权值 $w(a)$ 为 $a$ 中不同的数的个数。\n\n现在，$\\text{ducati}$ 想知道，对于所有长度为 $n$ 的排列 $p$，它们的 $w(f(p))$ 之和。", "inputFormat": "一行两个正整数 $n,k$。", "outputFormat": "一行一个整数表示答案。\n\n由于答案可能很大，你需要将它对 $998244353$ 取模。", "hint": "【样例解释】\n\n- $p=\\{1,2,3\\}$，$f(p)=\\{2,3\\}$，则 $w(f(p))=2$。\n- $p=\\{1,3,2\\}$，$f(p)=\\{3,3\\}$，则 $w(f(p))=1$。\n- $p=\\{2,1,3\\}$，$f(p)=\\{2,3\\}$，则 $w(f(p))=2$。\n- $p=\\{2,3,1\\}$，$f(p)=\\{3,3\\}$，则 $w(f(p))=1$。\n- $p=\\{3,1,2\\}$，$f(p)=\\{3,2\\}$，则 $w(f(p))=2$。\n- $p=\\{3,2,1\\}$，$f(p)=\\{3,2\\}$，则 $w(f(p))=2$。\n\n答案为 $2+1+2+1+2+2=10$。 \n\n【数据范围】\n\n**本题采用捆绑测试**。\n\n- Subtask 1（10pts）：$n \\le 8$。\n- Subtask 2（10pts）：$n \\le 11$。\n- Subtask 3（30pts）：$n \\le 100$。\n- Subtask 4（20pts）：$n \\le 400$。\n- Subtask 5（20pts）：$n \\le 4000$。\n- Subtask 6（10pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le k \\le n \\le  5 \\times 10^5$。\n\n【提示】\n\n1. $p$ 是一个长度为 $n$ 的排列，当且仅当每个在 $[1,n]$ 中的整数都在 $p$ 中**恰好出现了一次**。\n例如，$\\{1,5,3,2,4\\}$ 与 $\\{4,2,1,3\\}$ 分别是长度为 $5,4$ 的排列，而 $\\{1,2,2\\}$ 不是长度为 $3$ 的排列，$\\{5,4,3,2,1\\}$ 不是长度为 $6$ 的排列，$\\{1.5,3,1\\}$ 不是长度为 $3$ 的排列。\n\n2. 本题并不难。", "locale": "zh-CN"}}}
{"pid": "P7323", "type": "P", "difficulty": 6, "samples": [["4 5 1\n4 3 1\n4 1 1\n4 2 1\n1 3 1\n2 1 1\n", "3\n"], ["6 8 2\n6 1 2\n3 5 1\n1 2 2\n5 1 2\n3 6 2\n4 3 1\n6 2 2\n3 2 1\n", "10\n"], ["见附件中的 bracket/bracket3.in", "见附件中的 bracket/bracket3.ans"], ["见附件中的 bracket/bracket4.in", "见附件中的 bracket/bracket4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "并查集", "2021", "Ad-hoc", "线段树合并", "WC", "启发式合并"], "title": "[WC2021] 括号路径", "background": "", "description": "给定一张 $n$ 个点 $2 m$ 条边的有向图，图中的每条边上都有一个标记，代表一个左括号或者右括号。共有 $k$ 种不同的括号类型，即图中可能有 $2 k$ 种不同的标记。点、边、括号种类均从 $1$ 开始编号。\n\n图中的每条边都会和另一条边成对出现。更具体地，若图中存在一条标有第 $w$ 种括号的左括号的边 $(u, v)$，则图中一定存在一条标有第 $w$ 种括号的右括号的边 $(v, u)$。同样地，图中每条标有右括号的边将对应着一条反方向的标有同类型左括号的边。\n\n现在请你求出，图中共有多少个点对 $(x, y)$（$1 \\le x < y \\le n$）满足：图中存在一条从 $x$ 出发到达 $y$ 的路径，且按经过顺序将路径各条边上的标记拼接得到的字符串是一个合法的括号序列。", "inputFormat": "第一行三个整数 $n, m, k$，分别表示图中的点数，边对数和括号类型数。\n\n接下来 $m$ 行，每行三个整数 $u, v, w$，表示一条从 $u$ 到 $v$ 的有向边，其标记为第 $w$ 种括号的左括号；以及一条从 $v$ 到 $u$ 的有向边，其标记为第 $w$ 种括号的右括号。\n\n输入给出的图中，任意两个不同的顶点间可以有多条有向边相连，但图中不存在连向自身的有向边，即 $u \\ne v$。", "outputFormat": "输出仅一行一个整数，表示满足条件的点对数量。", "hint": "**【样例解释 #1】**\n\n符合条件的点对及其对应的路径为：\n\n$(1, 2)$：$1 \\to 3 \\to 4 \\to 1 \\to 2$。  \n$(1, 4)$：$1 \\to 3 \\to 4$。  \n$(2, 4)$：$2 \\to 1 \\to 4$。\n\n**【数据范围】**\n\n对于所有测试点：$1 \\le n \\le 3 \\times {10}^5$，$1 \\le m \\le 6 \\times {10}^5$，$1 \\le k, u, v \\le n$，$1 \\le w \\le k$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n =$ | $m \\le$ | $k \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $4$ | $5$ | $2$ | 无 |\n| $5 \\sim 8$ | $8$ | $10$ | $2$ | 无 |\n| $9 \\sim 12$ | $3000$ | $6000$ | $1$ | 无 |\n| $13 \\sim 16$ | $3000$ | $n - 1$ | $n$ | 不存在仅由带左括号标记的边构成的环 |\n| $17 \\sim 20$ | $3 \\times {10}^5$ | $n - 1$ | $n$ | 不存在仅由带左括号标记的边构成的环 |\n| $21 \\sim 25$ | $3 \\times {10}^5$ | $6 \\times {10}^5$ | $n$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2021] 括号路径", "background": "", "description": "给定一张 $n$ 个点 $2 m$ 条边的有向图，图中的每条边上都有一个标记，代表一个左括号或者右括号。共有 $k$ 种不同的括号类型，即图中可能有 $2 k$ 种不同的标记。点、边、括号种类均从 $1$ 开始编号。\n\n图中的每条边都会和另一条边成对出现。更具体地，若图中存在一条标有第 $w$ 种括号的左括号的边 $(u, v)$，则图中一定存在一条标有第 $w$ 种括号的右括号的边 $(v, u)$。同样地，图中每条标有右括号的边将对应着一条反方向的标有同类型左括号的边。\n\n现在请你求出，图中共有多少个点对 $(x, y)$（$1 \\le x < y \\le n$）满足：图中存在一条从 $x$ 出发到达 $y$ 的路径，且按经过顺序将路径各条边上的标记拼接得到的字符串是一个合法的括号序列。", "inputFormat": "第一行三个整数 $n, m, k$，分别表示图中的点数，边对数和括号类型数。\n\n接下来 $m$ 行，每行三个整数 $u, v, w$，表示一条从 $u$ 到 $v$ 的有向边，其标记为第 $w$ 种括号的左括号；以及一条从 $v$ 到 $u$ 的有向边，其标记为第 $w$ 种括号的右括号。\n\n输入给出的图中，任意两个不同的顶点间可以有多条有向边相连，但图中不存在连向自身的有向边，即 $u \\ne v$。", "outputFormat": "输出仅一行一个整数，表示满足条件的点对数量。", "hint": "**【样例解释 #1】**\n\n符合条件的点对及其对应的路径为：\n\n$(1, 2)$：$1 \\to 3 \\to 4 \\to 1 \\to 2$。  \n$(1, 4)$：$1 \\to 3 \\to 4$。  \n$(2, 4)$：$2 \\to 1 \\to 4$。\n\n**【数据范围】**\n\n对于所有测试点：$1 \\le n \\le 3 \\times {10}^5$，$1 \\le m \\le 6 \\times {10}^5$，$1 \\le k, u, v \\le n$，$1 \\le w \\le k$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n =$ | $m \\le$ | $k \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $4$ | $5$ | $2$ | 无 |\n| $5 \\sim 8$ | $8$ | $10$ | $2$ | 无 |\n| $9 \\sim 12$ | $3000$ | $6000$ | $1$ | 无 |\n| $13 \\sim 16$ | $3000$ | $n - 1$ | $n$ | 不存在仅由带左括号标记的边构成的环 |\n| $17 \\sim 20$ | $3 \\times {10}^5$ | $n - 1$ | $n$ | 不存在仅由带左括号标记的边构成的环 |\n| $21 \\sim 25$ | $3 \\times {10}^5$ | $6 \\times {10}^5$ | $n$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P7324", "type": "P", "difficulty": 7, "samples": [["2 3\n3 1\n2 2\n2 3\n1>2?0\n", "9\n"], ["3 3\n4 3 2\n2 3 1\n2 3 3\n1?0>2?0\n", "36\n"], ["5 3\n354 321 414 205 257\n458 996 554 635 730\n681 374 903 966 349\n2<0>2<0>(1>2)>(0<0)\n", "4276\n"], ["见附件中的 expr/expr4.in", "见附件中的 expr/expr4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "WC"], "title": "[WC2021] 表达式求值", "background": "", "description": "定义二元操作符 `<`：对于两个长度都为 $n$ 的数组 $A, B$（下标从 $1$ 到 $n$），$A$`<`$B$ 的结果也是一个长度为 $n$ 的数组，记为 $C$。则有 $C[i] = \\min(A[i], B[i])$（$1 \\le i \\le n$）。\n\n定义二元操作符 `>`：对于两个长度都为 $n$ 的数组 $A, B$（下标从 $1$ 到 $n$），$A$`>`$B$ 的结果也是一个长度为 $n$ 的数组，记为 $C$。则有 $C[i] = \\max(A[i], B[i])$（$1 \\le i \\le n$）。\n\n现在有 $m$（$1 \\le m \\le 10$）个长度均为 $n$ 的整数数组 $A_0, A_1, \\ldots , A_{m-1}$。给定一个待计算的表达式 $E$，其满足 $E$ 中出现的每个操作数都是 $A_0, A_1, \\ldots , A_{m-1}$ 其中之一，且 $E$ 中只包含 `<` 和 `>` 两种操作符（`<` 和 `>` 的运算优先级相同），因此该表达式的结果值也将是一个长度为 $n$ 的数组。\n\n特殊地，表达式 $E$ 中还可能出现操作符 `?`，它表示该运算符可能是 `<` 也可能是 `>`。因此若表达式中有 $t$ 个 `?`，则该表达式可生成 $2^t$ 个可求确定值的表达式，从而可以得到 $2^t$ 个结果值，你的任务就是求出这 $2^t$ 个结果值（每个结果都是一个数组）中所有的元素的和。你只需要给出所有元素之和对 ${10}^9 + 7$ 取模后的值。", "inputFormat": "第一行两个整数 $n, m$，分别表示数组长度与数组个数。\n\n第 $2 \\sim m + 1$ 行每行 $n$ 个用空格分隔的整数，第 $i$ 行第 $j$ 个元素代表 $A_{i-2}[j]$（$2 \\le i \\le m + 1$，$1 \\le j \\le n$）。\n\n最后一行一个字符串 $S$，表示表达式 $E$。$S$ 中只包含字符 `0` 到 `9`、`(`、`)`、`<`、`>`、`?`，数字字符表示操作数的下标，例如字符 `2` 表示表达式中的操作数为 $A_2$。", "outputFormat": "仅一行一个整数，表示所有 $2^t$ 个表达式的结果，它们的元素之和模 ${10}^9 + 7$ 的值。", "hint": "**【样例解释 #1】**\n\n表达式 $E$ 生成的算式有：\n\n1. $A_1$`>`$A_2$`<`$A_0$，其结果为 $[2, 1]$。\n2. $A_1$`>`$A_2$`>`$A_0$，其结果为 $[3, 3]$。\n\n答案为 $2 + 1 + 3 + 3 = 9$。\n\n**【数据范围】**\n\n对于所有测试点：$1 \\le n \\le 5 \\times {10}^4$，$1 \\le m \\le 10$，$|S| \\le 5 \\times {10}^4$，$1 \\le A_i[j] \\le {10}^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | $\\vert E \\vert \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $5$ | $10$ | $S$ 中不包含左右括号和问号 |\n| $5 \\sim 7$ | $10$ | $100$ | $S$ 中不包含问号 |\n| $8 \\sim 9$ | $2$ | $5000$ | $S$ 中不包含左右括号 |\n| $10 \\sim 11$ | $2$ | $5000$ | 无 |\n| $12 \\sim 14$ | $5000$ | $5000$ | $S$ 中不包含问号 |\n| $15 \\sim 17$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | $S$ 中不包含问号 |\n| $18 \\sim 20$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2021] 表达式求值", "background": "", "description": "定义二元操作符 `<`：对于两个长度都为 $n$ 的数组 $A, B$（下标从 $1$ 到 $n$），$A$`<`$B$ 的结果也是一个长度为 $n$ 的数组，记为 $C$。则有 $C[i] = \\min(A[i], B[i])$（$1 \\le i \\le n$）。\n\n定义二元操作符 `>`：对于两个长度都为 $n$ 的数组 $A, B$（下标从 $1$ 到 $n$），$A$`>`$B$ 的结果也是一个长度为 $n$ 的数组，记为 $C$。则有 $C[i] = \\max(A[i], B[i])$（$1 \\le i \\le n$）。\n\n现在有 $m$（$1 \\le m \\le 10$）个长度均为 $n$ 的整数数组 $A_0, A_1, \\ldots , A_{m-1}$。给定一个待计算的表达式 $E$，其满足 $E$ 中出现的每个操作数都是 $A_0, A_1, \\ldots , A_{m-1}$ 其中之一，且 $E$ 中只包含 `<` 和 `>` 两种操作符（`<` 和 `>` 的运算优先级相同），因此该表达式的结果值也将是一个长度为 $n$ 的数组。\n\n特殊地，表达式 $E$ 中还可能出现操作符 `?`，它表示该运算符可能是 `<` 也可能是 `>`。因此若表达式中有 $t$ 个 `?`，则该表达式可生成 $2^t$ 个可求确定值的表达式，从而可以得到 $2^t$ 个结果值，你的任务就是求出这 $2^t$ 个结果值（每个结果都是一个数组）中所有的元素的和。你只需要给出所有元素之和对 ${10}^9 + 7$ 取模后的值。", "inputFormat": "第一行两个整数 $n, m$，分别表示数组长度与数组个数。\n\n第 $2 \\sim m + 1$ 行每行 $n$ 个用空格分隔的整数，第 $i$ 行第 $j$ 个元素代表 $A_{i-2}[j]$（$2 \\le i \\le m + 1$，$1 \\le j \\le n$）。\n\n最后一行一个字符串 $S$，表示表达式 $E$。$S$ 中只包含字符 `0` 到 `9`、`(`、`)`、`<`、`>`、`?`，数字字符表示操作数的下标，例如字符 `2` 表示表达式中的操作数为 $A_2$。", "outputFormat": "仅一行一个整数，表示所有 $2^t$ 个表达式的结果，它们的元素之和模 ${10}^9 + 7$ 的值。", "hint": "**【样例解释 #1】**\n\n表达式 $E$ 生成的算式有：\n\n1. $A_1$`>`$A_2$`<`$A_0$，其结果为 $[2, 1]$。\n2. $A_1$`>`$A_2$`>`$A_0$，其结果为 $[3, 3]$。\n\n答案为 $2 + 1 + 3 + 3 = 9$。\n\n**【数据范围】**\n\n对于所有测试点：$1 \\le n \\le 5 \\times {10}^4$，$1 \\le m \\le 10$，$|S| \\le 5 \\times {10}^4$，$1 \\le A_i[j] \\le {10}^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | $\\vert E \\vert \\le$ | 特殊限制 |\n|:-:|:-:|:-:|:-:|\n| $1 \\sim 4$ | $5$ | $10$ | $S$ 中不包含左右括号和问号 |\n| $5 \\sim 7$ | $10$ | $100$ | $S$ 中不包含问号 |\n| $8 \\sim 9$ | $2$ | $5000$ | $S$ 中不包含左右括号 |\n| $10 \\sim 11$ | $2$ | $5000$ | 无 |\n| $12 \\sim 14$ | $5000$ | $5000$ | $S$ 中不包含问号 |\n| $15 \\sim 17$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | $S$ 中不包含问号 |\n| $18 \\sim 20$ | $5 \\times {10}^4$ | $5 \\times {10}^4$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P7325", "type": "P", "difficulty": 7, "samples": [["4 5\n0 1\n1 2\n2 3\n3 4\n", "0\n3\n2\n-1\n"], ["1 6\n4 4\n", "3\n"], ["见附件中的 fib/fib3.in", "见附件中的 fib/fib3.ans"], ["见附件中的 fib/fib4.in", "见附件中的 fib/fib4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "WC"], "title": "[WC2021] 斐波那契", "background": "", "description": "众所周知，小葱同学擅长计算，尤其擅长计算组合数。但是对组合数有了充分研究的小葱同学对组合数失去了兴趣，而开始研究数列。\n\n我们定义 $F_0 = a$，$F_1 = b$，$F_i = (F_{i-1} + F_{i-2}) \\bmod m$（$i \\ge 2$）。\n\n现在给定 $n$ 组询问，对于每组询问请找到一个最小的整数 $p$，使得 $F_p = 0$。", "inputFormat": "第一行两个整数 $n, m$，代表询问的组数和每组计算中的模数。\n\n接下来 $n$ 行每行两个整数 $a, b$，代表一组询问中 $F_0$ 和 $F_1$ 的值。", "outputFormat": "对于每组询问，输出一行一个整数 $p$ 代表答案。如果这样的 $p$ 不存在，输出 `-1`。", "hint": "**【数据范围】**\n\n对于所有测试点：$1 \\le n, m \\le {10}^5$，$0 \\le a, b < m$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n, m \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $1000$ | 无 |\n| $3 \\sim 4$ | ${10}^5$ | $m$ 是质数 |\n| $5 \\sim 6$ | ${10}^5$ | $m = p_1 p_2 \\cdots p_k$，其中 $p_i$ 是两两不同的质数 |\n| $7 \\sim 10$ | ${10}^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2021] 斐波那契", "background": "", "description": "众所周知，小葱同学擅长计算，尤其擅长计算组合数。但是对组合数有了充分研究的小葱同学对组合数失去了兴趣，而开始研究数列。\n\n我们定义 $F_0 = a$，$F_1 = b$，$F_i = (F_{i-1} + F_{i-2}) \\bmod m$（$i \\ge 2$）。\n\n现在给定 $n$ 组询问，对于每组询问请找到一个最小的整数 $p$，使得 $F_p = 0$。", "inputFormat": "第一行两个整数 $n, m$，代表询问的组数和每组计算中的模数。\n\n接下来 $n$ 行每行两个整数 $a, b$，代表一组询问中 $F_0$ 和 $F_1$ 的值。", "outputFormat": "对于每组询问，输出一行一个整数 $p$ 代表答案。如果这样的 $p$ 不存在，输出 `-1`。", "hint": "**【数据范围】**\n\n对于所有测试点：$1 \\le n, m \\le {10}^5$，$0 \\le a, b < m$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n, m \\le$ | 特殊限制 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $1000$ | 无 |\n| $3 \\sim 4$ | ${10}^5$ | $m$ 是质数 |\n| $5 \\sim 6$ | ${10}^5$ | $m = p_1 p_2 \\cdots p_k$，其中 $p_i$ 是两两不同的质数 |\n| $7 \\sim 10$ | ${10}^5$ | 无 |", "locale": "zh-CN"}}}
