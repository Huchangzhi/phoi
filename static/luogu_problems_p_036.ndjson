{"pid": "P10126", "type": "P", "difficulty": 3, "samples": [["5\n1 2 3 4 5", "lovely\n-114514"], ["5\n3 2 1 6 7", "lovely\n3.1416"], ["5\n3 2 1 4 5", "pigeon"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化"], "title": "「Daily OI Round 3」Pigeon", "background": "> 最近，忙吗，也不说打个电话。哦，是吗，嘿嘿原来没给过你号码。但这，不是，你不找我的理由，下次罚你陪我等到太阳出头。——recollect_i 的博客", "description": "recollect_i 给了你长度为 $n$ 的序列 $x$，你需要求出一个实数 $y$ 使得对于所有 $1\\leq i<j\\leq n$，$\\vert x_j-y\\vert>\\vert x_i-y\\vert$，或报告无解。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数 $x$，表示序列。", "outputFormat": "如果有解，第一行输出字符串 `lovely`，第二行输出一个实数 $y$。\n\n为了避免精度问题，如果您输出的方案满足对于所有 $ 1\\leq i<j\\leq n$，$\\vert x_j-y\\vert-\\vert x_i-y\\vert>10^{-6}$，则认为您的答案正确。\n\n同时您需要保证 $-2\\times 10^9\\leq y\\leq 2\\times 10^9$，且 $y$ 的小数点后不超过 $10$ 位，否则无法保证评测的正确性。\n\n如果无解，一行输出字符串 `pigeon`。", "hint": "#### 【提示】\n\n输出格式中 $>10^{-6}$ 只是为了避免精度问题，您可以当成要求 $\\vert x_j-y\\vert>\\vert x_i-y\\vert$。\n\n可以证明，如果有解，则一定存在 $y$ 满足 $-2\\times 10^{9}\\leq y\\leq2\\times 10^{9}$ 且对于所有 $1\\leq i<j\\leq n$，$\\vert x_j-y\\vert-\\vert x_i-y\\vert>0.2$，且小数点后位数不超过 $3$。\n\n#### 【数据范围】\n\n对于全部数据保证：$5\\leq n\\leq10^5$，$-10^9\\leq x_i\\leq10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 3」Pigeon", "background": "> 最近，忙吗，也不说打个电话。哦，是吗，嘿嘿原来没给过你号码。但这，不是，你不找我的理由，下次罚你陪我等到太阳出头。——recollect_i 的博客", "description": "recollect_i 给了你长度为 $n$ 的序列 $x$，你需要求出一个实数 $y$ 使得对于所有 $1\\leq i<j\\leq n$，$\\vert x_j-y\\vert>\\vert x_i-y\\vert$，或报告无解。", "inputFormat": "第一行一个整数 $n$，表示序列长度。\n\n第二行 $n$ 个整数 $x$，表示序列。", "outputFormat": "如果有解，第一行输出字符串 `lovely`，第二行输出一个实数 $y$。\n\n为了避免精度问题，如果您输出的方案满足对于所有 $ 1\\leq i<j\\leq n$，$\\vert x_j-y\\vert-\\vert x_i-y\\vert>10^{-6}$，则认为您的答案正确。\n\n同时您需要保证 $-2\\times 10^9\\leq y\\leq 2\\times 10^9$，且 $y$ 的小数点后不超过 $10$ 位，否则无法保证评测的正确性。\n\n如果无解，一行输出字符串 `pigeon`。", "hint": "#### 【提示】\n\n输出格式中 $>10^{-6}$ 只是为了避免精度问题，您可以当成要求 $\\vert x_j-y\\vert>\\vert x_i-y\\vert$。\n\n可以证明，如果有解，则一定存在 $y$ 满足 $-2\\times 10^{9}\\leq y\\leq2\\times 10^{9}$ 且对于所有 $1\\leq i<j\\leq n$，$\\vert x_j-y\\vert-\\vert x_i-y\\vert>0.2$，且小数点后位数不超过 $3$。\n\n#### 【数据范围】\n\n对于全部数据保证：$5\\leq n\\leq10^5$，$-10^9\\leq x_i\\leq10^9$。", "locale": "zh-CN"}}}
{"pid": "P10127", "type": "P", "difficulty": 4, "samples": [["3 4\n....\n...#\n....", "14\n10 10 10 13\n10 10 10 -1\n10 10 10 13"], ["5 6\n...#..\n#.....\n......\n......\n...#..", "39\n38 38 38 -1 38 38\n-1 35 32 29 32 35\n35 32 29 29 32 35\n35 32 29 29 32 35\n35 35 35 -1 38 38"], ["7 7\n....#..\n.#.....\n.......\n.......\n.#...##\n..#####\n.......", "51\n50 50 50 50 -1 50 50\n50 -1 47 44 41 44 47\n50 50 44 41 38 44 47\n50 50 44 41 38 44 47\n50 -1 47 47 47 -1 -1\n50 50 -1 -1 -1 -1 -1\n50 50 50 50 50 50 50"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "差分"], "title": "「Daily OI Round 3」Tower", "background": "定义 $(x_1,y_1),(x_2,y_2)$ 的 `A 距离` 为 $\\max\\{|x_1-x_2|,|y_1-y_2|\\}+1$，下文中的距离都指的是 `A 距离`。\n\n比如说，$(1,1)$ 和 $(3,8)$ 的 `A 距离` 为 $\\max\\{|1-3|,|1-8|\\}+1=8$。\n\n比如说，$(46,1)$ 和 $(35,9)$ 的 `A 距离` 为 $\\max\\{|46-35|,|1-9|\\}+1=12$。", "description": "A 国的国土可以看成是 $n\\times m$ 的矩阵，第 $x$ 行第 $y$ 列坐标为 $(x,y)$。\n\n国土可以是山地，用 `#` 表示，可以是平地，用 `.` 表示。\n\nA 国在每一个平地建了一个能量塔，能量塔搜集能量的范围是正方形的。如果 $e$ 满足到该能量塔 `A 距离` **不超过** $e$ 的地方是 A 国的国土，并且该地方是平地，则称 $e$ 是该能量塔的基准能量。\n\n一个能量塔的综合能量 $E$ 为该能量塔基准能量 $e$ 的最大值。\n\n特殊地，如果这个地方没有能量塔，该处综合能量 $E=0$，否则，该处的综合能量就是能量塔的综合能量。\n\n记第 $i$ 行第 $j$ 列的综合能量为 $E_{i,j}$。\n\n记一个国家的能量总和 $\\xi=\\sum\\limits^n_{i=1}\\sum\\limits_{j=1}^mE_{i,j}^2$。\n\n你需要求一个国家的能量总和 $\\xi$。\n\n当然，由于特殊的原因（比如宇宙射线的影响），某一个地方的平地可能会突然变成山地，当地的能量塔也会被摧毁，而且影响到附近能量塔的综合能量 $E$。\n\n作为 A 国的参谋，国王想让你预备方案，看看每一个非山地的点变成山地之后，该国家的能量总和是多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n下面是一个 $n\\times m$ 的矩阵，第 $i$ 行第 $j$ 列为 `#` 或 `.`，描述 A 国的地形。", "outputFormat": "输出共 $n+1$ 行。\n\n第一行一个整数 $\\xi$，表示 A 国开始的能量总和。\n\n下面是一个 $n\\times m$ 的矩阵，第 $i+1$ 行第 $j$ 个整数表示 $(i,j)$ 变成山地之后该国家的能量总和 $\\xi_{i,j}$，特殊地，如果 $(i,j)$ 原来是山地，输出 $-1$。", "hint": "#### 【样例解释 #1】\n\n下面举 $3$ 个例子：\n\n开始，这个国家的 $E_{i,j}$ 如下：\n\n```\n1 1 1 1 \n1 2 1 0\n1 1 1 1\n```\n\n$(1,1)$ 变成山地后，$E_{i,j}$ 如下：\n\n```\n0 1 1 1\n1 1 1 0\n1 1 1 1\n```\n\n\n\n$(3,4)$ 变成山地后，$E_{i,j}$ 如下：\n\n```\n1 1 1 1\n1 2 1 0\n1 1 1 0\n```\n\n#### 【数据范围】\n\n对于全部数据保证：$1\\le n,m\\le600$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 3」Tower", "background": "定义 $(x_1,y_1),(x_2,y_2)$ 的 `A 距离` 为 $\\max\\{|x_1-x_2|,|y_1-y_2|\\}+1$，下文中的距离都指的是 `A 距离`。\n\n比如说，$(1,1)$ 和 $(3,8)$ 的 `A 距离` 为 $\\max\\{|1-3|,|1-8|\\}+1=8$。\n\n比如说，$(46,1)$ 和 $(35,9)$ 的 `A 距离` 为 $\\max\\{|46-35|,|1-9|\\}+1=12$。", "description": "A 国的国土可以看成是 $n\\times m$ 的矩阵，第 $x$ 行第 $y$ 列坐标为 $(x,y)$。\n\n国土可以是山地，用 `#` 表示，可以是平地，用 `.` 表示。\n\nA 国在每一个平地建了一个能量塔，能量塔搜集能量的范围是正方形的。如果 $e$ 满足到该能量塔 `A 距离` **不超过** $e$ 的地方是 A 国的国土，并且该地方是平地，则称 $e$ 是该能量塔的基准能量。\n\n一个能量塔的综合能量 $E$ 为该能量塔基准能量 $e$ 的最大值。\n\n特殊地，如果这个地方没有能量塔，该处综合能量 $E=0$，否则，该处的综合能量就是能量塔的综合能量。\n\n记第 $i$ 行第 $j$ 列的综合能量为 $E_{i,j}$。\n\n记一个国家的能量总和 $\\xi=\\sum\\limits^n_{i=1}\\sum\\limits_{j=1}^mE_{i,j}^2$。\n\n你需要求一个国家的能量总和 $\\xi$。\n\n当然，由于特殊的原因（比如宇宙射线的影响），某一个地方的平地可能会突然变成山地，当地的能量塔也会被摧毁，而且影响到附近能量塔的综合能量 $E$。\n\n作为 A 国的参谋，国王想让你预备方案，看看每一个非山地的点变成山地之后，该国家的能量总和是多少。", "inputFormat": "第一行两个整数 $n,m$。\n\n下面是一个 $n\\times m$ 的矩阵，第 $i$ 行第 $j$ 列为 `#` 或 `.`，描述 A 国的地形。", "outputFormat": "输出共 $n+1$ 行。\n\n第一行一个整数 $\\xi$，表示 A 国开始的能量总和。\n\n下面是一个 $n\\times m$ 的矩阵，第 $i+1$ 行第 $j$ 个整数表示 $(i,j)$ 变成山地之后该国家的能量总和 $\\xi_{i,j}$，特殊地，如果 $(i,j)$ 原来是山地，输出 $-1$。", "hint": "#### 【样例解释 #1】\n\n下面举 $3$ 个例子：\n\n开始，这个国家的 $E_{i,j}$ 如下：\n\n```\n1 1 1 1 \n1 2 1 0\n1 1 1 1\n```\n\n$(1,1)$ 变成山地后，$E_{i,j}$ 如下：\n\n```\n0 1 1 1\n1 1 1 0\n1 1 1 1\n```\n\n\n\n$(3,4)$ 变成山地后，$E_{i,j}$ 如下：\n\n```\n1 1 1 1\n1 2 1 0\n1 1 1 0\n```\n\n#### 【数据范围】\n\n对于全部数据保证：$1\\le n,m\\le600$。", "locale": "zh-CN"}}}
{"pid": "P10128", "type": "P", "difficulty": 5, "samples": [["4\n2\n3\n50\n999998", "2\n15\n599192517\n81627972"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["递推", "洛谷原创", "O2优化"], "title": "「Daily OI Round 3」Xor Graph", "background": "在黎明来临之前，总要有人照亮黑暗。", "description": "Xs_siqi 给了你 $2^n$ 个点，$x$ 到 $y$ 有**有向**边当且仅当 $x\\operatorname{xor} y=2^k,k \\in [0,n)$，且 $x>y$。其中，$\\operatorname{xor}$ 表示按位异或，$k$ 为整数。令 $f_{x,y}$ 为 $x$ 点到 $y$ 点的不同路径数，求： \n\n$$\\sum_{i=1}^{2^n}\\sum_{j=1}^{2^n}f_{i,j}(i\\neq j)$$\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行，一个整数 $t$。\n\n接下来 $2 \\sim t+1$ 行，一行一个整数表示 $n$。", "outputFormat": "共 $t$ 行，每行一个整数表示题目要求的方案数。", "hint": "#### 【样例解释 #1】\n\n对于样例的第一组，$3$ 向 $1,2$ 连边，这样 $3$ 到 $1$ 是一个方案，$3$ 到 $2$ 是一个方案，一共有 $2$ 个方案。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le t \\le 10^6$，$1 \\le n \\le 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 3」Xor Graph", "background": "在黎明来临之前，总要有人照亮黑暗。", "description": "Xs_siqi 给了你 $2^n$ 个点，$x$ 到 $y$ 有**有向**边当且仅当 $x\\operatorname{xor} y=2^k,k \\in [0,n)$，且 $x>y$。其中，$\\operatorname{xor}$ 表示按位异或，$k$ 为整数。令 $f_{x,y}$ 为 $x$ 点到 $y$ 点的不同路径数，求： \n\n$$\\sum_{i=1}^{2^n}\\sum_{j=1}^{2^n}f_{i,j}(i\\neq j)$$\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行，一个整数 $t$。\n\n接下来 $2 \\sim t+1$ 行，一行一个整数表示 $n$。", "outputFormat": "共 $t$ 行，每行一个整数表示题目要求的方案数。", "hint": "#### 【样例解释 #1】\n\n对于样例的第一组，$3$ 向 $1,2$ 连边，这样 $3$ 到 $1$ 是一个方案，$3$ 到 $2$ 是一个方案，一共有 $2$ 个方案。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le t \\le 10^6$，$1 \\le n \\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P10129", "type": "P", "difficulty": 6, "samples": [["2 2 3\n2 1\n2 1\n1 3\n3\n1 1 2 3\n1 1 1 1\n1 1 3 3\n2 0\n7 6", "9"], ["3 1 3\n1 2\n3 2\n1 2 3\n1 2 1 3\n2 3 2 2\n2 2\n1 100\n1 1 1 3\n1 2 2 1\n5 1\n5 0 5 5 5\n4 5 1 3", "4"], ["5 6 5\n4 3\n3 5\n1 2\n2 1\n3 4\n3 5\n2 0\n37 44\n4 2\n33 2 43 49\n3 1 3 6\n3 4 4 6\n6 4\n4 23 0 9 35 22\n3 4 2 7\n3 4 5 3\n2 1 3 2\n4 4 4 10\n3 2\n14 41 35\n2 2 4 1\n3 3 2 5\n3 5\n27 39 9\n3 3 2 1\n3 2 3 3\n2 1 1 5\n2 1 5 3\n1 2 4 8", "71"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["网络流", "洛谷原创", "O2优化", "最小割", "线性规划"], "title": "「Daily OI Round 3」City Planning", "background": "只要不失去你的崇高，整个世界都会为你敞开。", "description": "Provence-Alpes-Côte d'Azur 的管理者们遇上大麻烦了！他们邀请你来解决城市规划的问题。\n\n这群管理者一共有 $t$ 人，并且这个地区一共有 $n$ 个城镇，第 $i$ 个城镇内部又有 $k_i$ 个村庄，通过 $p_i$ 条道路连接，第 $j$ 条道路双向连接第 $i$ 个城镇中的第 $u_{i,j}$ 和 $v_{i,j}$ 两个村庄，管理道路的人是第 $w_{i,j}$ 个，客流量是 $z_{i,j}$。\n\n为了管理组内部的团结，保证每个人在同一个城镇最多管理 $1$ 条道路。\n\n现在这些城镇中的村庄和村庄之间的道路都遭到了损坏，管理者们急于恢复这些城镇内的交通。这些城镇互相之间有 $m$ 条高铁，每条高铁连接了 $u,v$ 两个城镇，并且当初为了设计的优美，这 $n$ 个城镇和 $m$ 条高铁构成了一个**二分图**。\n\n对于每个城镇 $i$，你都需要帮助管理组选择一个参数 $c_i(1 \\le c_i \\le k_i)$，修复一些村庄，编号在 $1 \\sim c_i$ 之间的村庄都会被修复，如果道路的两端的村庄都修复了，那么这条道路就会自动修复。因此第 $i$ 个城镇中会产生 $b_{i,c_i}$ 的花费。\n\n对于管理者 $i$ 来说，如果存在两条他在不同城镇管理的道路都没有被修复，并且这两条道路所属的城镇有高铁**直接连接**，你需要支付这两条道路的人流量的乘积来弥补损失，这样管理者 $i$ 才会高兴。（对于**任意**两条满足上述条件的道路你都需要弥补损失，而不是对于每个管理者只需要弥补一对道路的损失）\n\n为了让管理组的成员都高兴并且给出的方案符合题目的要求（即 $1 \\le c_i \\le k_i$），你需要提前计算好自己至少需要支付多少钱以应对这一群管理者们的刁难。\n\n", "inputFormat": "第一行三个整数 $n,m,t$ 表示城镇的数量，城镇间的高铁的数量和管理组人员的数量。\n\n接下来 $m$ 行每行两个整数 $x,y$ 表示这条高铁连接的两个城镇的编号。\n\n接下来 $n$ 组输入，对于第 $i$ 组输入，格式如下：\n\n第一行两个整数 $k_i,p_i$ 表示第 $i$ 个城镇有 $k_i$ 个村庄，$p_i$ 条道路。\n\n第二行 $k_i$ 个整数，第 $j$ 个整数表示当 $c=j$ 时的花费 $b_{i,j}$。\n\n接下来 $p_i$ 行，每行四个整数 $u_{i,j},v_{i,j},w_{i,j},z_{i,j}$，表示有一条边连接 $i$ 号城镇的第 $u_{i,j}$ 个村庄和第 $v_{i,j}$ 个村庄，并且管理道路的人是第 $w_{i,j}$ 个，客流量为 $z_{i,j}$。", "outputFormat": "一行一个整数表示让所有管理者都高兴的最小花费是多少。", "hint": "#### 【样例解释 #1】\n\n我们可以选择 $c_1=1,c_2=2$，那么花费就是 $b_{1,c_1}+b_{2,c_2}=3+6=9$，而没有一个管理员你需要讨好。\n\n#### 【样例解释 #2】\n\n我们可以选择 $c_1=1,c_2=1,c_3=2$，那么花费就是 $b_{1,c_1}+b_{2,c_2}+b_{3,c_3}=1+1=2$，但是管理员 $2$ 在城镇 $1$ 中管理的道路 $2 \\to 3$ 不可能被修复，在城镇 $2$ 中管理的道路 $1 \\to 2$ 不可能被修复，你就需要花费 $2 \\times 1 = 2$ 的代价讨好管理员 $2$，总的代价就是 $4$。\n\n你并不需要讨好管理员 $1$，哪怕他在城镇 $1$ 和 $3$ 中分别有一条道路不可能被修复，因为城镇 $1$ 和 $3$ 没有高铁相连，所以你不需要为此支付额外的资金。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le n \\le 50$，$1 \\le k_i \\le 100$，$0 \\le p_i \\le t$，$0 \\le m \\le 500$，$1 \\le t \\le 50$，$1 \\le x,y \\le n$，$x \\ne y$，$0 \\le b_{i,j} \\le 10^9$，$1 \\le u_{i,j},v_{i,j} \\le k_i$，$1 \\le w_{i,j} \\le t$，$1 \\le z_{i,j} \\le 10^4$。\n\n$n$ 个城镇和 $m$ 条高铁构成的图是一个二分图，每个管理员在同一个村庄管理的道路数量不超过 $1$。\n\n**可能有连接同一对城镇的不同的高铁，不会出现自己连向自己的高铁。但城镇中的村庄可能会有自己连向自己的道路，也可能出现连接同一对村庄的不同的道路。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 3」City Planning", "background": "只要不失去你的崇高，整个世界都会为你敞开。", "description": "Provence-Alpes-Côte d'Azur 的管理者们遇上大麻烦了！他们邀请你来解决城市规划的问题。\n\n这群管理者一共有 $t$ 人，并且这个地区一共有 $n$ 个城镇，第 $i$ 个城镇内部又有 $k_i$ 个村庄，通过 $p_i$ 条道路连接，第 $j$ 条道路双向连接第 $i$ 个城镇中的第 $u_{i,j}$ 和 $v_{i,j}$ 两个村庄，管理道路的人是第 $w_{i,j}$ 个，客流量是 $z_{i,j}$。\n\n为了管理组内部的团结，保证每个人在同一个城镇最多管理 $1$ 条道路。\n\n现在这些城镇中的村庄和村庄之间的道路都遭到了损坏，管理者们急于恢复这些城镇内的交通。这些城镇互相之间有 $m$ 条高铁，每条高铁连接了 $u,v$ 两个城镇，并且当初为了设计的优美，这 $n$ 个城镇和 $m$ 条高铁构成了一个**二分图**。\n\n对于每个城镇 $i$，你都需要帮助管理组选择一个参数 $c_i(1 \\le c_i \\le k_i)$，修复一些村庄，编号在 $1 \\sim c_i$ 之间的村庄都会被修复，如果道路的两端的村庄都修复了，那么这条道路就会自动修复。因此第 $i$ 个城镇中会产生 $b_{i,c_i}$ 的花费。\n\n对于管理者 $i$ 来说，如果存在两条他在不同城镇管理的道路都没有被修复，并且这两条道路所属的城镇有高铁**直接连接**，你需要支付这两条道路的人流量的乘积来弥补损失，这样管理者 $i$ 才会高兴。（对于**任意**两条满足上述条件的道路你都需要弥补损失，而不是对于每个管理者只需要弥补一对道路的损失）\n\n为了让管理组的成员都高兴并且给出的方案符合题目的要求（即 $1 \\le c_i \\le k_i$），你需要提前计算好自己至少需要支付多少钱以应对这一群管理者们的刁难。\n\n", "inputFormat": "第一行三个整数 $n,m,t$ 表示城镇的数量，城镇间的高铁的数量和管理组人员的数量。\n\n接下来 $m$ 行每行两个整数 $x,y$ 表示这条高铁连接的两个城镇的编号。\n\n接下来 $n$ 组输入，对于第 $i$ 组输入，格式如下：\n\n第一行两个整数 $k_i,p_i$ 表示第 $i$ 个城镇有 $k_i$ 个村庄，$p_i$ 条道路。\n\n第二行 $k_i$ 个整数，第 $j$ 个整数表示当 $c=j$ 时的花费 $b_{i,j}$。\n\n接下来 $p_i$ 行，每行四个整数 $u_{i,j},v_{i,j},w_{i,j},z_{i,j}$，表示有一条边连接 $i$ 号城镇的第 $u_{i,j}$ 个村庄和第 $v_{i,j}$ 个村庄，并且管理道路的人是第 $w_{i,j}$ 个，客流量为 $z_{i,j}$。", "outputFormat": "一行一个整数表示让所有管理者都高兴的最小花费是多少。", "hint": "#### 【样例解释 #1】\n\n我们可以选择 $c_1=1,c_2=2$，那么花费就是 $b_{1,c_1}+b_{2,c_2}=3+6=9$，而没有一个管理员你需要讨好。\n\n#### 【样例解释 #2】\n\n我们可以选择 $c_1=1,c_2=1,c_3=2$，那么花费就是 $b_{1,c_1}+b_{2,c_2}+b_{3,c_3}=1+1=2$，但是管理员 $2$ 在城镇 $1$ 中管理的道路 $2 \\to 3$ 不可能被修复，在城镇 $2$ 中管理的道路 $1 \\to 2$ 不可能被修复，你就需要花费 $2 \\times 1 = 2$ 的代价讨好管理员 $2$，总的代价就是 $4$。\n\n你并不需要讨好管理员 $1$，哪怕他在城镇 $1$ 和 $3$ 中分别有一条道路不可能被修复，因为城镇 $1$ 和 $3$ 没有高铁相连，所以你不需要为此支付额外的资金。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le n \\le 50$，$1 \\le k_i \\le 100$，$0 \\le p_i \\le t$，$0 \\le m \\le 500$，$1 \\le t \\le 50$，$1 \\le x,y \\le n$，$x \\ne y$，$0 \\le b_{i,j} \\le 10^9$，$1 \\le u_{i,j},v_{i,j} \\le k_i$，$1 \\le w_{i,j} \\le t$，$1 \\le z_{i,j} \\le 10^4$。\n\n$n$ 个城镇和 $m$ 条高铁构成的图是一个二分图，每个管理员在同一个村庄管理的道路数量不超过 $1$。\n\n**可能有连接同一对城镇的不同的高铁，不会出现自己连向自己的高铁。但城镇中的村庄可能会有自己连向自己的道路，也可能出现连接同一对村庄的不同的道路。**", "locale": "zh-CN"}}}
{"pid": "P10130", "type": "P", "difficulty": 6, "samples": [["10 20 2 9\n1 5 2 6\n7 9 8 10\n1 4 1 5\n3 6 2 3\n2 1\n3 6 2 3\n1 10 2 7\n1 9 3 6\n2 6\n1 7 8 13\n3 8 2 12", "Yes\nNo\nYes"], ["10 10 2 10\n1 1 2 2\n1 1 8 8\n1 2 1 8\n1 6 7 8\n1 8 7 8\n1 9 6 7\n3 8 3 3\n2 4\n1 5 7 8\n3 3 3 3\n3 6 3 3\n2 3", "Yes\nNo\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "树状数组", "洛谷原创", "O2优化"], "title": "「Daily OI Round 3」War", "background": "《赤壁之战》是一款开放世界冒险游戏，这意味着从你踏入提瓦特的第一刻起，只要合理规划自己的体力，不论翻山越岭、还是横渡江河，总有办法见到新的风景。", "description": "有 $n$ 条船，船编号为 $1$ 至 $n$。每条船上有 $m$ 个士兵，士兵编号为 $1$ 至 $m$。\n\n开始时，有若干组船由铁索相连。具体的关系给出如下：\n\n给出 $s$ 组关系，形如 $l_1,r_1,l_2,r_2$，表示 $\\forall k \\in [0,r_1-l_1]$，第 $l_1+k$ 条船与第 $l_2+k$ 条船相连，保证 $r_1-l_1+1=r_2-l_2+1$ 且 $l_1 < l_2$。\n\n保证 $\\forall p \\in [1,n]$，最多存在一组关系使得 $l_2 \\le p \\le r_2$。\n\n然后有 $q$ 个操作，操作如下（操作按照时间先后顺序编号为 $1 \\sim q$）：\n\n操作 $1$：向编号为 $p$ 的船的 $[L,R]$ 区间的士兵发射一支火箭。这样操作之后，这个区间的所有士兵都会着火。由于铁锁连环的缘故，所有与 $p$ 直接相连或间接相连的船的 $[L,R]$ 区间的士兵都会着火。注意，士兵可能着火多次。\n\n操作 $2$：撤回编号为 $p$ 的操作，保证这个操作必定是操作 $1$。**保证不会多次撤回同一个操作，并且以后的询问都不考虑已经撤销的操作所带来的影响。**\n\n操作 $3$：询问船 $p$ 上区间为 $[L,R]$ 的士兵是否全部着火。如果全部着火请输出 `Yes`，否则输出 `No`。", "inputFormat": "第一行四个整数分别是 $n,m,s,q$，含义如题所示。\n\n接下来 $s$ 行，每行四个整数，表示一个铁索关系。\n\n接下来 $q$ 行，表示操作。\n\n每行第一个整数 $op$ 表示操作种类。\n\n- 若 $op=1$，你需要输入三个整数 $p,L,R$，并按照题目要求执行操作 $1$。\n\n- 若 $op=2$，你需要输入一个整数 $p$，并按照题目要求执行操作 $2$。\n\n- 若 $op=3$，你需要输入三个整数 $p,L,R$，并按照题目要求执行操作 $3$。", "outputFormat": "若干行，表示每个 $3$ 操作的答案。\n\n**温馨提示：全部输出 `No` 或者 `Yes` 会得到 $0\\text{ pts}$ 的高分。**", "hint": "#### 【样例解释 #1】\n\n首先给出了两条关系式，第一条表示了 $1$ 与 $2$，$2$ 与 $3$，$3$ 与 $4$，$4$ 与 $5$，$5$ 与 $6$ 的船是相连的。第二条表示了 $7$ 与 $8$，$8$ 与 $9$，$9$ 与 $10$ 的船是相连的。\n\n第一个操作向第 $4$ 条船的 $1$ 到 $5$ 号士兵发射火箭，因为 $1$ 到 $6$ 号船是相连的，所以 $1$ 到 $6$ 号船上的 $1$ 到 $5$ 号士兵都着火了。\n\n第二个操作询问第一条船的 $2$ 到 $3$ 号是否着火。显然着火了，所以输出 `Yes`。\n\n第三个操作撤回了第一个操作，所以所有士兵操作后都没有着火。\n\n第四个操作询问第一条船的 $2$ 到 $3$ 号是否着火。显然没有着，所以输出 `No`。\n\n第五个操作将十号船的 $[2,7]$ 士兵着火，第六个操作将九号船的 $[3,6]$ 着火。然后第七个操作撤回了第六个操作。注意：目前，第七到十号船的 $[2,7]$ 的士兵是着火的。\n\n第八号操作将七号船的 $[8,13]$ 着火，第九个操作询问是否 $[2,12]$ 全部着火。显然此时已经全部着火了。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le n\\leq 10^9$，$1 \\le m\\leq 5\\times 10^5$，$0 \\le q\\leq 10^5$，$0 \\le s\\leq 200$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 3」War", "background": "《赤壁之战》是一款开放世界冒险游戏，这意味着从你踏入提瓦特的第一刻起，只要合理规划自己的体力，不论翻山越岭、还是横渡江河，总有办法见到新的风景。", "description": "有 $n$ 条船，船编号为 $1$ 至 $n$。每条船上有 $m$ 个士兵，士兵编号为 $1$ 至 $m$。\n\n开始时，有若干组船由铁索相连。具体的关系给出如下：\n\n给出 $s$ 组关系，形如 $l_1,r_1,l_2,r_2$，表示 $\\forall k \\in [0,r_1-l_1]$，第 $l_1+k$ 条船与第 $l_2+k$ 条船相连，保证 $r_1-l_1+1=r_2-l_2+1$ 且 $l_1 < l_2$。\n\n保证 $\\forall p \\in [1,n]$，最多存在一组关系使得 $l_2 \\le p \\le r_2$。\n\n然后有 $q$ 个操作，操作如下（操作按照时间先后顺序编号为 $1 \\sim q$）：\n\n操作 $1$：向编号为 $p$ 的船的 $[L,R]$ 区间的士兵发射一支火箭。这样操作之后，这个区间的所有士兵都会着火。由于铁锁连环的缘故，所有与 $p$ 直接相连或间接相连的船的 $[L,R]$ 区间的士兵都会着火。注意，士兵可能着火多次。\n\n操作 $2$：撤回编号为 $p$ 的操作，保证这个操作必定是操作 $1$。**保证不会多次撤回同一个操作，并且以后的询问都不考虑已经撤销的操作所带来的影响。**\n\n操作 $3$：询问船 $p$ 上区间为 $[L,R]$ 的士兵是否全部着火。如果全部着火请输出 `Yes`，否则输出 `No`。", "inputFormat": "第一行四个整数分别是 $n,m,s,q$，含义如题所示。\n\n接下来 $s$ 行，每行四个整数，表示一个铁索关系。\n\n接下来 $q$ 行，表示操作。\n\n每行第一个整数 $op$ 表示操作种类。\n\n- 若 $op=1$，你需要输入三个整数 $p,L,R$，并按照题目要求执行操作 $1$。\n\n- 若 $op=2$，你需要输入一个整数 $p$，并按照题目要求执行操作 $2$。\n\n- 若 $op=3$，你需要输入三个整数 $p,L,R$，并按照题目要求执行操作 $3$。", "outputFormat": "若干行，表示每个 $3$ 操作的答案。\n\n**温馨提示：全部输出 `No` 或者 `Yes` 会得到 $0\\text{ pts}$ 的高分。**", "hint": "#### 【样例解释 #1】\n\n首先给出了两条关系式，第一条表示了 $1$ 与 $2$，$2$ 与 $3$，$3$ 与 $4$，$4$ 与 $5$，$5$ 与 $6$ 的船是相连的。第二条表示了 $7$ 与 $8$，$8$ 与 $9$，$9$ 与 $10$ 的船是相连的。\n\n第一个操作向第 $4$ 条船的 $1$ 到 $5$ 号士兵发射火箭，因为 $1$ 到 $6$ 号船是相连的，所以 $1$ 到 $6$ 号船上的 $1$ 到 $5$ 号士兵都着火了。\n\n第二个操作询问第一条船的 $2$ 到 $3$ 号是否着火。显然着火了，所以输出 `Yes`。\n\n第三个操作撤回了第一个操作，所以所有士兵操作后都没有着火。\n\n第四个操作询问第一条船的 $2$ 到 $3$ 号是否着火。显然没有着，所以输出 `No`。\n\n第五个操作将十号船的 $[2,7]$ 士兵着火，第六个操作将九号船的 $[3,6]$ 着火。然后第七个操作撤回了第六个操作。注意：目前，第七到十号船的 $[2,7]$ 的士兵是着火的。\n\n第八号操作将七号船的 $[8,13]$ 着火，第九个操作询问是否 $[2,12]$ 全部着火。显然此时已经全部着火了。\n\n#### 【数据范围】\n\n对于全部数据保证：$1 \\le n\\leq 10^9$，$1 \\le m\\leq 5\\times 10^5$，$0 \\le q\\leq 10^5$，$0 \\le s\\leq 200$。", "locale": "zh-CN"}}}
{"pid": "P10131", "type": "P", "difficulty": 2, "samples": [["5\n5\n1 2 2 2 3\n6\n1 2 3 1 2 3\n6\n1 1 1 2 2 2\n3\n3 2 3\n2\n2 1", "2\n-1\n1 2\n3\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2024", "O2优化"], "title": "[USACO24JAN] Majority Opinion B", "background": "", "description": "Farmer John 有一项重要的任务——弄清楚要为他的奶牛们购买什么类型的干草。\n\nFarmer John 的 $N$ 头奶牛（$2\\le N\\le 10^5$）编号为 $1$ 到 $N$，每头奶牛喜欢恰好一种类型的干草 $h_i$（$1\\le h_i\\le N$）。他希望他的所有奶牛都喜欢同一种干草。\n\n为了实现这一目标，Farmer John 可以主持焦点小组访谈。一次焦点小组访谈为让编号从 $i$ 到 $j$ 的连续范围内的所有奶牛聚集在一起参加一次访谈。如果有一种干草是小组中超过一半的奶牛喜欢的，则此次焦点小组访谈结束后，所有奶牛最终都会喜欢这种干草。如果不存在这种类型的干草，那么奶牛们不会改变她们喜欢的干草类型。例如，在由 $16$ 头奶牛组成的焦点小组访谈中，需要有其中 $9$ 头或更多的奶牛具有相同的干草喜好，才能使其余奶牛改变其喜好以与之一致。\n\nFarmer John 想知道哪些类型的干草有可能变为同时受到所有奶牛的喜爱。他一次只能主持一个焦点小组访谈，但为了使所有奶牛都喜欢同一类型的干草，他可以根据需要任意多次地主持焦点小组访谈。 ", "inputFormat": "输入的第一行包含一个整数 $T$，为独立的测试用例的数量（$1\\le T\\le 10$）。\n\n每一个测试用例的第一行包含 $N$。\n\n第二行包含 $N$ 个整数，为奶牛们喜爱的干草类型 $h_i$。\n\n输入保证所有测试用例的 $N$ 之和不超过 $2\\cdot 10^5$。 ", "outputFormat": "输出 $T$ 行，对于每个测试用例输出一行。\n\n如果可能使所有奶牛同时喜欢同一种干草，则以升序输出所有可能的此类干草的类型，否则输出 $-1$。在同一行内输出一列整数时，相邻的数用空格分隔，并确保行末没有多余空格。 ", "hint": "### 样例解释\n\n在输入样例中，有 5 个测试用例。\n\n在第一个测试用例中，仅可能使所有奶牛喜欢种类 $2$。FJ 可以通过主持一次所有奶牛的焦点小组访谈达到这一目的。\n\n在第二个测试用例中，可以证明没有奶牛会改变她们喜爱的干草种类。\n\n在第三个测试用例中，有可能使所有奶牛喜欢种类 $1$，可以通过主持三次焦点小组访谈达到这一目的——首先使奶牛 $1$ 到 $4$ 进行一次焦点小组访谈，随后使奶牛 $1$ 到 $5$ 进行一次焦点小组访谈，随后使奶牛 $1$ 到 $6$ 进行一次焦点小组访谈。以类似的逻辑，依次操作奶牛 $3$ 到 $6$，随后是奶牛 $2$ 到 $6$，随后是奶牛 $1$ 到 $6$，我们可以使所有奶牛喜欢种类 $2$。\n\n在第四个测试用例中，有可能使所有奶牛喜欢种类 $3$，可以通过主持一次所有奶牛的焦点小组访谈达到这一目的。\n\n在第五个测试用例中，可以证明没有奶牛会改变她们喜爱的干草种类。\n\n### 测试点性质\n\n- 测试点 $2$：$N=2$。\n- 测试点 $3-4$：$N\\le 50$。\n- 测试点 $5-6$：对于所有的 $1\\le i\\le N−1$，有 $h_i\\le h_{i+1}$。\n- 测试点 $7-15$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Majority Opinion B", "background": "", "description": "Farmer John 有一项重要的任务——弄清楚要为他的奶牛们购买什么类型的干草。\n\nFarmer John 的 $N$ 头奶牛（$2\\le N\\le 10^5$）编号为 $1$ 到 $N$，每头奶牛喜欢恰好一种类型的干草 $h_i$（$1\\le h_i\\le N$）。他希望他的所有奶牛都喜欢同一种干草。\n\n为了实现这一目标，Farmer John 可以主持焦点小组访谈。一次焦点小组访谈为让编号从 $i$ 到 $j$ 的连续范围内的所有奶牛聚集在一起参加一次访谈。如果有一种干草是小组中超过一半的奶牛喜欢的，则此次焦点小组访谈结束后，所有奶牛最终都会喜欢这种干草。如果不存在这种类型的干草，那么奶牛们不会改变她们喜欢的干草类型。例如，在由 $16$ 头奶牛组成的焦点小组访谈中，需要有其中 $9$ 头或更多的奶牛具有相同的干草喜好，才能使其余奶牛改变其喜好以与之一致。\n\nFarmer John 想知道哪些类型的干草有可能变为同时受到所有奶牛的喜爱。他一次只能主持一个焦点小组访谈，但为了使所有奶牛都喜欢同一类型的干草，他可以根据需要任意多次地主持焦点小组访谈。 ", "inputFormat": "输入的第一行包含一个整数 $T$，为独立的测试用例的数量（$1\\le T\\le 10$）。\n\n每一个测试用例的第一行包含 $N$。\n\n第二行包含 $N$ 个整数，为奶牛们喜爱的干草类型 $h_i$。\n\n输入保证所有测试用例的 $N$ 之和不超过 $2\\cdot 10^5$。 ", "outputFormat": "输出 $T$ 行，对于每个测试用例输出一行。\n\n如果可能使所有奶牛同时喜欢同一种干草，则以升序输出所有可能的此类干草的类型，否则输出 $-1$。在同一行内输出一列整数时，相邻的数用空格分隔，并确保行末没有多余空格。 ", "hint": "### 样例解释\n\n在输入样例中，有 5 个测试用例。\n\n在第一个测试用例中，仅可能使所有奶牛喜欢种类 $2$。FJ 可以通过主持一次所有奶牛的焦点小组访谈达到这一目的。\n\n在第二个测试用例中，可以证明没有奶牛会改变她们喜爱的干草种类。\n\n在第三个测试用例中，有可能使所有奶牛喜欢种类 $1$，可以通过主持三次焦点小组访谈达到这一目的——首先使奶牛 $1$ 到 $4$ 进行一次焦点小组访谈，随后使奶牛 $1$ 到 $5$ 进行一次焦点小组访谈，随后使奶牛 $1$ 到 $6$ 进行一次焦点小组访谈。以类似的逻辑，依次操作奶牛 $3$ 到 $6$，随后是奶牛 $2$ 到 $6$，随后是奶牛 $1$ 到 $6$，我们可以使所有奶牛喜欢种类 $2$。\n\n在第四个测试用例中，有可能使所有奶牛喜欢种类 $3$，可以通过主持一次所有奶牛的焦点小组访谈达到这一目的。\n\n在第五个测试用例中，可以证明没有奶牛会改变她们喜爱的干草种类。\n\n### 测试点性质\n\n- 测试点 $2$：$N=2$。\n- 测试点 $3-4$：$N\\le 50$。\n- 测试点 $5-6$：对于所有的 $1\\le i\\le N−1$，有 $h_i\\le h_{i+1}$。\n- 测试点 $7-15$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10132", "type": "P", "difficulty": 2, "samples": [["5 2\n0 1\n1 1\n1 2\n0 1\n1 1", "1"], ["6 4\n0 3\n1 1\n1 2\n1 1\n0 1\n1 1", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2024"], "title": "[USACO24JAN] Cannonball B", "background": "", "description": "Bessie 已经精通了变成炮弹并沿着长度为 $N$（$1\\le N\\le 10^5$）的数轴弹跳的艺术，数轴上的位置从左到右编号为 $1,2,\\cdots,N$。她从某个整数位置 $S$（$1\\le S\\le N$）开始，以 $1$ 的起始能量向右弹跳。 如果 Bessie 的能量为 $k$，则她将弹跳至距当前位置向前距离 $k$ 处进行下一次弹跳。\n\n从 $1$ 到 $N$ 的每个整数位置上均有炮击目标或跳板。每个炮击目标和跳板都有一个在 $0$ 到 $N$ 范围内的整数值。一个数值为 $v$ 的跳板会使 Bessie 的能量增加 $v$ 并反转她的方向。一个数值为 $v$ 的炮击目标会当着陆时能量不小于 $v$ 时被击破。着陆在炮击目标上不会改变 Bessie 的能量和方向。被击破的炮击目标将保持击破状态，Bessie 依然可以该炮击目标上弹跳，同样不会改变能量和方向。\n\n如果 Bessie 弹跳无限长的时间或直到她离开数轴，她会击破多少个炮击目标？\n\n如果 Bessie 开始时位于一个她可以击破的炮击目标，她会立刻这样做。类似地，如果 Bessie 开始时位于一个跳板，跳板的效果将在她第一次跳跃之前生效。 ", "inputFormat": "输入的第一行包含 $N$ 和 $S$，其中 $N$ 为数轴的长度，$S$ 为 Bessie 的起始位置。\n\n以下 $N$ 行描述了每一个位置。其中第 $i$ 行包含整数 $q_i$ 和 $v_i$，如果位置 $i$ 上有一个跳板则 $q_i=0$，位置 $i$ 上有一个炮击目标则 $q_i=1$，$v_i$ 是位置 $i$ 上的跳板或炮击目标的数值。 ", "outputFormat": "输出一个整数，为将被击破的炮击目标数量。 ", "hint": "### 样例解释 1\n\nBessie 从坐标 $2$ 开始，这是一个数值为 $1$ 的炮击目标，所以她立刻击破了它。然后她弹跳至坐标 $3$，这是一个数值为 $2$ 的炮击目标，所以她无法击破它。她继续弹跳至坐标 $4$，这改变了她的方向并将她的能量增加了 $1$，达到 $2$。她跳回至坐标 $2$，这是一个已经被击破的炮击目标，所以她继续弹跳。此时，她弹跳至了坐标 $0$，因此她停了下来。她击破了恰好一个炮击目标，位于坐标 $2$。\n\n### 样例解释 2\n\nBessie 经过的路径为 $4\\to 5\\to 3\\to 1\\to 6$，下一次弹跳将会使她离开数轴（$11$）。她依次击破了炮击目标 $4,3,6$。\n\n### 测试点性质\n\n - 测试点 $3-5$：$N\\le 100$。\n - 测试点 $6-10$：$N\\le 1000$。\n - 测试点 $11-20$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Cannonball B", "background": "", "description": "Bessie 已经精通了变成炮弹并沿着长度为 $N$（$1\\le N\\le 10^5$）的数轴弹跳的艺术，数轴上的位置从左到右编号为 $1,2,\\cdots,N$。她从某个整数位置 $S$（$1\\le S\\le N$）开始，以 $1$ 的起始能量向右弹跳。 如果 Bessie 的能量为 $k$，则她将弹跳至距当前位置向前距离 $k$ 处进行下一次弹跳。\n\n从 $1$ 到 $N$ 的每个整数位置上均有炮击目标或跳板。每个炮击目标和跳板都有一个在 $0$ 到 $N$ 范围内的整数值。一个数值为 $v$ 的跳板会使 Bessie 的能量增加 $v$ 并反转她的方向。一个数值为 $v$ 的炮击目标会当着陆时能量不小于 $v$ 时被击破。着陆在炮击目标上不会改变 Bessie 的能量和方向。被击破的炮击目标将保持击破状态，Bessie 依然可以该炮击目标上弹跳，同样不会改变能量和方向。\n\n如果 Bessie 弹跳无限长的时间或直到她离开数轴，她会击破多少个炮击目标？\n\n如果 Bessie 开始时位于一个她可以击破的炮击目标，她会立刻这样做。类似地，如果 Bessie 开始时位于一个跳板，跳板的效果将在她第一次跳跃之前生效。 ", "inputFormat": "输入的第一行包含 $N$ 和 $S$，其中 $N$ 为数轴的长度，$S$ 为 Bessie 的起始位置。\n\n以下 $N$ 行描述了每一个位置。其中第 $i$ 行包含整数 $q_i$ 和 $v_i$，如果位置 $i$ 上有一个跳板则 $q_i=0$，位置 $i$ 上有一个炮击目标则 $q_i=1$，$v_i$ 是位置 $i$ 上的跳板或炮击目标的数值。 ", "outputFormat": "输出一个整数，为将被击破的炮击目标数量。 ", "hint": "### 样例解释 1\n\nBessie 从坐标 $2$ 开始，这是一个数值为 $1$ 的炮击目标，所以她立刻击破了它。然后她弹跳至坐标 $3$，这是一个数值为 $2$ 的炮击目标，所以她无法击破它。她继续弹跳至坐标 $4$，这改变了她的方向并将她的能量增加了 $1$，达到 $2$。她跳回至坐标 $2$，这是一个已经被击破的炮击目标，所以她继续弹跳。此时，她弹跳至了坐标 $0$，因此她停了下来。她击破了恰好一个炮击目标，位于坐标 $2$。\n\n### 样例解释 2\n\nBessie 经过的路径为 $4\\to 5\\to 3\\to 1\\to 6$，下一次弹跳将会使她离开数轴（$11$）。她依次击破了炮击目标 $4,3,6$。\n\n### 测试点性质\n\n - 测试点 $3-5$：$N\\le 100$。\n - 测试点 $6-10$：$N\\le 1000$。\n - 测试点 $11-20$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10133", "type": "P", "difficulty": 3, "samples": [["2\n-1 3", "6"], ["5\n1 3 -2 -7 5", "26"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2024", "差分"], "title": "[USACO24JAN] Balancing Bacteria B", "background": "", "description": "Farmer John 有 $N$（$1\\le N\\le 2\\cdot 10^5$）块草地排成一行，其中草地 $i$ 的细菌水平与健康草的细菌水平相差 $a_i$（$−10^{15}\\le a_i\\le 10^{15}$）。例如，如果 $a_i=−3$，则草地 $i$ 的细菌水平比正常水平低 $3$，需要额外添加恰好 $3$ 个单位的细菌才能将其提高到被认为是健康的程度。\n\nFarmer John 想要确保每一块草地都被修复至健康的细菌水平。方便的是，他有两种品牌的农药可以喷洒在他的田地里，一种可以添加细菌，另一种可以去除细菌。当 Farmer John 喷洒任一类型的农药时，他站在草地 $N$（最右边的草地）并为他的喷雾器选择功率等级 $L$（$1\\le L\\le N$）。\n\n喷雾器对靠近 Farmer John 的草地效果最大，随着距离增加效果逐渐减弱。如果 Farmer John 选择添加细菌的农药，则 $L$ 单位的细菌将被添加至草地 $N$，$L−1$ 单位添加至草地 $N−1$，$L−2$ 单位添加至草地 $N−2$，以此类推。草地 $1\\ldots N−L$ 不会得到任何细菌，因为喷雾器设置的功率不足以到达它们。类似地，如果 Farmer John 选择去除细菌的农药，则 $L$ 单位的细菌将被从草地 $N$ 去除，$L−1$ 单位被从草地 $N−1$ 去除，以此类推。同样，草地 $1\\ldots N−L$ 将不受影响。\n\n求 Farmer John 使用喷雾器的最少次数，使得每块草地都具有健康草的推荐细菌值。输入保证答案不超过 $10^9$。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 \"long long\"）。**", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个整数 $a_1\\ldots a_N$，为每块草地的初始细菌水平。 ", "outputFormat": "输出一个整数，为使每块草地都具有健康草的推荐的细菌值所需使用喷雾器的最少次数。 ", "hint": "### 样例解释 1\n\n使用去除细菌的农药，功率等级为 $1$，使用五次。然后使用添加细菌的农药，功率等级为 $2$，使用一次。\n\n### 测试点性质\n\n- 测试点 $3-5$：$N\\le 10^3$，答案不超过 $10^3$。\n- 测试点 $6-10$：$N\\le 10^3$。\n- 测试点 $11-15$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Balancing Bacteria B", "background": "", "description": "Farmer John 有 $N$（$1\\le N\\le 2\\cdot 10^5$）块草地排成一行，其中草地 $i$ 的细菌水平与健康草的细菌水平相差 $a_i$（$−10^{15}\\le a_i\\le 10^{15}$）。例如，如果 $a_i=−3$，则草地 $i$ 的细菌水平比正常水平低 $3$，需要额外添加恰好 $3$ 个单位的细菌才能将其提高到被认为是健康的程度。\n\nFarmer John 想要确保每一块草地都被修复至健康的细菌水平。方便的是，他有两种品牌的农药可以喷洒在他的田地里，一种可以添加细菌，另一种可以去除细菌。当 Farmer John 喷洒任一类型的农药时，他站在草地 $N$（最右边的草地）并为他的喷雾器选择功率等级 $L$（$1\\le L\\le N$）。\n\n喷雾器对靠近 Farmer John 的草地效果最大，随着距离增加效果逐渐减弱。如果 Farmer John 选择添加细菌的农药，则 $L$ 单位的细菌将被添加至草地 $N$，$L−1$ 单位添加至草地 $N−1$，$L−2$ 单位添加至草地 $N−2$，以此类推。草地 $1\\ldots N−L$ 不会得到任何细菌，因为喷雾器设置的功率不足以到达它们。类似地，如果 Farmer John 选择去除细菌的农药，则 $L$ 单位的细菌将被从草地 $N$ 去除，$L−1$ 单位被从草地 $N−1$ 去除，以此类推。同样，草地 $1\\ldots N−L$ 将不受影响。\n\n求 Farmer John 使用喷雾器的最少次数，使得每块草地都具有健康草的推荐细菌值。输入保证答案不超过 $10^9$。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 \"long long\"）。**", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个整数 $a_1\\ldots a_N$，为每块草地的初始细菌水平。 ", "outputFormat": "输出一个整数，为使每块草地都具有健康草的推荐的细菌值所需使用喷雾器的最少次数。 ", "hint": "### 样例解释 1\n\n使用去除细菌的农药，功率等级为 $1$，使用五次。然后使用添加细菌的农药，功率等级为 $2$，使用一次。\n\n### 测试点性质\n\n- 测试点 $3-5$：$N\\le 10^3$，答案不超过 $10^3$。\n- 测试点 $6-10$：$N\\le 10^3$。\n- 测试点 $11-15$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10134", "type": "P", "difficulty": 4, "samples": [["1\n7 3 5\n1 0 2 3 0 4 0\n1 2\n3 4\n4 5", "1 2 2 3 4 4 1"], ["5\n7 6 10\n0 0 0 0 0 0 0\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n8 4 9\n0 0 0 0 1 6 0 6\n1 3\n6 7\n4 7\n2 3\n2 1 1\n0 0\n1 2\n10 4 10\n1 2 0 2 1 5 8 6 0 3\n4 7\n1 2\n5 7\n3 7\n10 2 8\n1 0 0 0 0 5 7 0 0 0\n4 6\n6 9", "1 2 3 4 5 6 7\n1 1 2 6 1 6 7 6\n-1\n1 2 5 2 1 5 8 6 1 3\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "线段树", "USACO", "2024", "排序"], "title": "[USACO24JAN] Cowmpetency S", "background": "", "description": "Farmer John 正在为他的奶牛们雇用一位新的牛群领队。为此，他面试了 $N$（$2\\le N\\le 10^5$）头奶牛来担任该职位。在面试第 $i$ 个候选牛后，他会为候选牛分配一个 $1$ 到 $C$（$1\\le C\\le 10^9$）范围内的整数「牲任力」分数 $c_i$，与她们的领导能力相关。\n\n由于 Farmer John 面试了如此多的奶牛，他没能记得所有奶牛的牲任力分数。然而，他确实记得 $Q$（$1\\le Q<N$）对数字 $(a_j,h_j)$，其中奶牛 $h_j$ 是第一头比奶牛 $1$ 到 $a_j$ 拥有严格更高牲任力分数的奶牛（所以 $1\\le a_j<h_j\\le N$）。\n\nFarmer John 现在告诉你序列 $c_1,\\ldots,c_N$\n（其中 $c_i=0$ 表示他忘记了奶牛 $i$ 的牲任力分数）和 $Q$ 对 $(a_j,h_j)$。帮助他求出与此信息一致的最小字典序的牲任力分数序列，或者判断不存在这样的序列！如果一个分数序列比另一个分数序列于这两个序列不同的第一个位置上的奶牛分配了更小的分数，则这个分数序列的字典序更小。\n\n每个测试点包含 $T$（$1\\le T\\le 20$）个独立的测试用例。输入保证所有测试用例的 $N$ 之和不超过 $3\\cdot 10^5$。 ", "inputFormat": "输入的第一行包含 $T$，独立的测试用例的数量。每个测试用例描述如下：\n\n 1. 第一行包含 $N$，$Q$ 和 $C$。\n 2. 第二行包含序列 $c_1,\\ldots,c_N$（$0\\le c_i\\le C$）。\n 3. 最后 $Q$ 行，每行包含一个数对 $(a_j,h_j)$。输入保证同一测试用例内的所有 $a_j$ 各不相同。", "outputFormat": " 对于每个测试用例，输出一行，包含与 Farmer John 记忆一致的最小字典序牲任力分数序列，或者如果这样的序列不存在时输出 $−1$。", "hint": "### 样例解释 1\n\n我们可以看到给定的输出满足所有 Farmer John 记得的数对。\n\n- $\\max(c_1)=1$，$c_2=2$ 且 $1<2$，故第一个数对是满足的\n- $\\max(c_1,c_2,c_3)=2$，$c_4=3$ 且 $2<3$，故第二个数对是满足的\n- $\\max(c_1,c_2,c_3,c_4)=3$，$c_5=4$ 且 $3<4$，故第三个数对是满足的\n\n存在一些其他的序列与 Farmer John 的记忆相一致，如\n\n$1\\ 2\\ 2\\ 3\\ 5\\ 4\\ 1$  \n$1\\ 2\\ 2\\ 3\\ 4\\ 4\\ 5$\n\n然而，其中没有序列比给定的输出字典序更小。 \n\n### 样例解释 2\n\n在测试用例 $3$ 中，由于 $C=1$，唯一可能的序列是\n\n$1\\ 1$\n\n然而，在这种情况下，奶牛 $2$ 的分数并不比奶牛 $1$ 高，因此我们无法满足条件。\n\n在测试用例 $5$ 中，$a_1$ 和 $h_1$ 告诉我们奶牛 $6$ 是第一头分数严格高于奶牛 $1$ 到 $4$ 的奶牛。因此，奶牛 $1$ 到 $6$ 的最高得分是奶牛 $6$，为 $5$。由于奶牛 $7$ 的分数为 $7$，所以奶牛 $7$ 是第一头比奶牛 $1$ 到 $6$ 得分更高的奶牛。因此，第二个陈述「奶牛 $9$ 是第一头比奶牛 $1$ 到 $6$ 得分更高的奶牛」不能成立。 \n\n### 测试点性质\n\n - 测试点 $3$：$N \\le 10$ 且 $Q,C\\le 4$。\n - 测试点 $4-8$：$N\\le 1000$。\n - 测试点 $9-12$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Cowmpetency S", "background": "", "description": "Farmer John 正在为他的奶牛们雇用一位新的牛群领队。为此，他面试了 $N$（$2\\le N\\le 10^5$）头奶牛来担任该职位。在面试第 $i$ 个候选牛后，他会为候选牛分配一个 $1$ 到 $C$（$1\\le C\\le 10^9$）范围内的整数「牲任力」分数 $c_i$，与她们的领导能力相关。\n\n由于 Farmer John 面试了如此多的奶牛，他没能记得所有奶牛的牲任力分数。然而，他确实记得 $Q$（$1\\le Q<N$）对数字 $(a_j,h_j)$，其中奶牛 $h_j$ 是第一头比奶牛 $1$ 到 $a_j$ 拥有严格更高牲任力分数的奶牛（所以 $1\\le a_j<h_j\\le N$）。\n\nFarmer John 现在告诉你序列 $c_1,\\ldots,c_N$\n（其中 $c_i=0$ 表示他忘记了奶牛 $i$ 的牲任力分数）和 $Q$ 对 $(a_j,h_j)$。帮助他求出与此信息一致的最小字典序的牲任力分数序列，或者判断不存在这样的序列！如果一个分数序列比另一个分数序列于这两个序列不同的第一个位置上的奶牛分配了更小的分数，则这个分数序列的字典序更小。\n\n每个测试点包含 $T$（$1\\le T\\le 20$）个独立的测试用例。输入保证所有测试用例的 $N$ 之和不超过 $3\\cdot 10^5$。 ", "inputFormat": "输入的第一行包含 $T$，独立的测试用例的数量。每个测试用例描述如下：\n\n 1. 第一行包含 $N$，$Q$ 和 $C$。\n 2. 第二行包含序列 $c_1,\\ldots,c_N$（$0\\le c_i\\le C$）。\n 3. 最后 $Q$ 行，每行包含一个数对 $(a_j,h_j)$。输入保证同一测试用例内的所有 $a_j$ 各不相同。", "outputFormat": " 对于每个测试用例，输出一行，包含与 Farmer John 记忆一致的最小字典序牲任力分数序列，或者如果这样的序列不存在时输出 $−1$。", "hint": "### 样例解释 1\n\n我们可以看到给定的输出满足所有 Farmer John 记得的数对。\n\n- $\\max(c_1)=1$，$c_2=2$ 且 $1<2$，故第一个数对是满足的\n- $\\max(c_1,c_2,c_3)=2$，$c_4=3$ 且 $2<3$，故第二个数对是满足的\n- $\\max(c_1,c_2,c_3,c_4)=3$，$c_5=4$ 且 $3<4$，故第三个数对是满足的\n\n存在一些其他的序列与 Farmer John 的记忆相一致，如\n\n$1\\ 2\\ 2\\ 3\\ 5\\ 4\\ 1$  \n$1\\ 2\\ 2\\ 3\\ 4\\ 4\\ 5$\n\n然而，其中没有序列比给定的输出字典序更小。 \n\n### 样例解释 2\n\n在测试用例 $3$ 中，由于 $C=1$，唯一可能的序列是\n\n$1\\ 1$\n\n然而，在这种情况下，奶牛 $2$ 的分数并不比奶牛 $1$ 高，因此我们无法满足条件。\n\n在测试用例 $5$ 中，$a_1$ 和 $h_1$ 告诉我们奶牛 $6$ 是第一头分数严格高于奶牛 $1$ 到 $4$ 的奶牛。因此，奶牛 $1$ 到 $6$ 的最高得分是奶牛 $6$，为 $5$。由于奶牛 $7$ 的分数为 $7$，所以奶牛 $7$ 是第一头比奶牛 $1$ 到 $6$ 得分更高的奶牛。因此，第二个陈述「奶牛 $9$ 是第一头比奶牛 $1$ 到 $6$ 得分更高的奶牛」不能成立。 \n\n### 测试点性质\n\n - 测试点 $3$：$N \\le 10$ 且 $Q,C\\le 4$。\n - 测试点 $4-8$：$N\\le 1000$。\n - 测试点 $9-12$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10135", "type": "P", "difficulty": 3, "samples": [["5\n5 4 3 2 1\n1 2\n1 3\n3 4\n3 5", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2024", "树形 DP"], "title": "[USACO24JAN] Potion Farming S", "background": "", "description": "你正在玩你最喜欢的手机游戏。为了有机会击败传说中的奶牛 Boss，你正在试着刷药水。游戏地图是由 $N$（$2\\le N\\le 10^5$）个编号为 $1\\ldots N$ 的房间组成，由 $N−1$ 条边连接，形成一棵树。\n\n你可以通过一系列的「遍历」来探索地图。一次遍历是从房间 $1$ 到树中任何其他房间的一条简单路径。当你完成一次遍历后，你可以从房间 $1$ 再次开始遍历。一旦地图的每个房间都被至少一次遍历访问过，这个地图就通关了。你的主要目标是以最小的遍历次数通关这一地图。\n\n你的次要目标是刷到尽可能多的药水。在一次遍历开始前，地图上的某个房间内会生成一瓶药水。你可以通过在当次遍历中访问生成药水的房间来拾取药水。如果你没有拾取药水，那么当次遍历结束它就会消失，你无法在未来的遍历中拾取它。\n\n由于你是一位聪明的程序员，在查看游戏文件后，你成功知道了在接下来的 $N$ 次遍历之前药水的出现位置。如果你以最小的遍历次数通关地图，你可以从地图内刷到的最大药水数量是多少？ ", "inputFormat": "输入的第一行包含一个整数 $N$，为地图内的房间数量。\n\n以下一行包含 $N$ 个空格分隔的整数 $p_1p_2\\ldots p_N$，其中 $p_i$ 为第 $i$ 次遍历之前药水出现的房间。\n\n最后 $N−1$ 行每行包含两个空格分隔的整数 $a\\ b$（$1\\le a,b\\le N$），表示房间 $a$ 和 $b$ 之间的一条边。输入保证所有边形成一棵树。", "outputFormat": "输出一行，包含一个整数，为以最小的遍历次数可以从地图内刷到的最大药水数量。 ", "hint": "### 样例解释 1\n\n在这个测试用例中，通关地图所需的最小遍历次数为 $3$。\n\n一个在三次遍历中拾取两瓶药水的最佳方案如下：\n\n- 遍历 $1$：$1\\to 3\\to 5$（于房间 $5$ 拾取药水）\n- 遍历 $2$：$1\\to 3\\to 4$（于房间 $4$ 拾取药水）\n- 遍历 $3$：$1\\to 2$（被迫通关地图，无视房间 $3$ 的药水）\n\n或者，我们也可以计划我们的遍历如下：\n\n- 遍历 $1$：$1\\to 2$（没有药水）\n- 遍历 $2$：$1\\to 3\\to 4$（于房间 $4$ 拾取药水）\n- 遍历 $3$：$1\\to 3\\to 5$（于房间 $3$ 拾取药水）\n\n### 测试点性质\n\n- 测试点 $2-7$：$N\\le 1000$。\n- 测试点 $8-15$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Potion Farming S", "background": "", "description": "你正在玩你最喜欢的手机游戏。为了有机会击败传说中的奶牛 Boss，你正在试着刷药水。游戏地图是由 $N$（$2\\le N\\le 10^5$）个编号为 $1\\ldots N$ 的房间组成，由 $N−1$ 条边连接，形成一棵树。\n\n你可以通过一系列的「遍历」来探索地图。一次遍历是从房间 $1$ 到树中任何其他房间的一条简单路径。当你完成一次遍历后，你可以从房间 $1$ 再次开始遍历。一旦地图的每个房间都被至少一次遍历访问过，这个地图就通关了。你的主要目标是以最小的遍历次数通关这一地图。\n\n你的次要目标是刷到尽可能多的药水。在一次遍历开始前，地图上的某个房间内会生成一瓶药水。你可以通过在当次遍历中访问生成药水的房间来拾取药水。如果你没有拾取药水，那么当次遍历结束它就会消失，你无法在未来的遍历中拾取它。\n\n由于你是一位聪明的程序员，在查看游戏文件后，你成功知道了在接下来的 $N$ 次遍历之前药水的出现位置。如果你以最小的遍历次数通关地图，你可以从地图内刷到的最大药水数量是多少？ ", "inputFormat": "输入的第一行包含一个整数 $N$，为地图内的房间数量。\n\n以下一行包含 $N$ 个空格分隔的整数 $p_1p_2\\ldots p_N$，其中 $p_i$ 为第 $i$ 次遍历之前药水出现的房间。\n\n最后 $N−1$ 行每行包含两个空格分隔的整数 $a\\ b$（$1\\le a,b\\le N$），表示房间 $a$ 和 $b$ 之间的一条边。输入保证所有边形成一棵树。", "outputFormat": "输出一行，包含一个整数，为以最小的遍历次数可以从地图内刷到的最大药水数量。 ", "hint": "### 样例解释 1\n\n在这个测试用例中，通关地图所需的最小遍历次数为 $3$。\n\n一个在三次遍历中拾取两瓶药水的最佳方案如下：\n\n- 遍历 $1$：$1\\to 3\\to 5$（于房间 $5$ 拾取药水）\n- 遍历 $2$：$1\\to 3\\to 4$（于房间 $4$ 拾取药水）\n- 遍历 $3$：$1\\to 2$（被迫通关地图，无视房间 $3$ 的药水）\n\n或者，我们也可以计划我们的遍历如下：\n\n- 遍历 $1$：$1\\to 2$（没有药水）\n- 遍历 $2$：$1\\to 3\\to 4$（于房间 $4$ 拾取药水）\n- 遍历 $3$：$1\\to 3\\to 5$（于房间 $3$ 拾取药水）\n\n### 测试点性质\n\n- 测试点 $2-7$：$N\\le 1000$。\n- 测试点 $8-15$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10136", "type": "P", "difficulty": 5, "samples": [["12\n31 28 31 30 31 30 31 31 30 31 30 31", "28"], ["4\n31 35 28 29", "23"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2024", "数论", "鸽笼原理"], "title": "[USACO24JAN] Cowlendar S", "background": "", "description": "Bessie 在一个陌生的星球上醒来。这个星球上有 $N$（$1\\le N\\le 10^4$）个月，分别有 $a_1,\\ldots,a_N$ 天（$1\\le a_i\\le 4\\cdot 10^9$，所有 $a_i$ 均为整数）。此外，这个星球上还存在周，一周为 $L$ 天，其中 $L$ 是一个正整数。有趣的是，Bessie 知道以下事情：\n\n- 对于正确的 $L$，每个月至少有 $4$ 周。\n- 对于正确的 $L$，$a_i\\bmod L$ 至多有 $3$ 个不同值。\n\n不幸的是，Bessie 忘记了 $L$ 是多少！请通过输出 $L$ 的所有可能值之和来帮助她。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 \"long long\"）。**", "inputFormat": "输入的第一行包含一个整数 $N$。第二行包含 $N$ 个空格分隔的整数 $a_1,\\ldots,a_N$。", "outputFormat": "输出一个整数，为 $L$ 的所有可能值之和。", "hint": "### 样例解释 1\n\n$L$ 的可能值为 $1$，$2$，$3$，$4$，$5$，$6$ 和 $7$。例如，$L=7$ 是合法的，因为每个月的至少有 $4\\cdot 7=28$ 天，且每个月的天数模 $7$ 的余数均为 $0$，$2$ 或 $3$。\n\n### 样例解释 2\n\n$L$ 的可能值为 $1$，$2$，$3$，$4$，$6$ 和 $7$。例如，$L=6$ 是合法的，因为每个月的至少有 $4\\cdot 6=24$ 天，且每个月的天数模 $6$ 的余数均为 $1$，$4$ 或 $5$。\n\n### 测试点性质\n\n- 测试点 $3-4$：$1\\le a_i\\le 10^6$。\n- 测试点 $5-14$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Cowlendar S", "background": "", "description": "Bessie 在一个陌生的星球上醒来。这个星球上有 $N$（$1\\le N\\le 10^4$）个月，分别有 $a_1,\\ldots,a_N$ 天（$1\\le a_i\\le 4\\cdot 10^9$，所有 $a_i$ 均为整数）。此外，这个星球上还存在周，一周为 $L$ 天，其中 $L$ 是一个正整数。有趣的是，Bessie 知道以下事情：\n\n- 对于正确的 $L$，每个月至少有 $4$ 周。\n- 对于正确的 $L$，$a_i\\bmod L$ 至多有 $3$ 个不同值。\n\n不幸的是，Bessie 忘记了 $L$ 是多少！请通过输出 $L$ 的所有可能值之和来帮助她。\n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 \"long long\"）。**", "inputFormat": "输入的第一行包含一个整数 $N$。第二行包含 $N$ 个空格分隔的整数 $a_1,\\ldots,a_N$。", "outputFormat": "输出一个整数，为 $L$ 的所有可能值之和。", "hint": "### 样例解释 1\n\n$L$ 的可能值为 $1$，$2$，$3$，$4$，$5$，$6$ 和 $7$。例如，$L=7$ 是合法的，因为每个月的至少有 $4\\cdot 7=28$ 天，且每个月的天数模 $7$ 的余数均为 $0$，$2$ 或 $3$。\n\n### 样例解释 2\n\n$L$ 的可能值为 $1$，$2$，$3$，$4$，$6$ 和 $7$。例如，$L=6$ 是合法的，因为每个月的至少有 $4\\cdot 6=24$ 天，且每个月的天数模 $6$ 的余数均为 $1$，$4$ 或 $5$。\n\n### 测试点性质\n\n- 测试点 $3-4$：$1\\le a_i\\le 10^6$。\n- 测试点 $5-14$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10137", "type": "P", "difficulty": 5, "samples": [["4 5\nV 7\nH 4\nH 5\nV 6\n6 3 10\n6 4 10\n6 5 10\n6 6 10\n100 4 10", "14 5\n7 13\n6 15\n6 16\n110 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["倍增", "USACO", "2024", "Ad-hoc", "分类讨论"], "title": "[USACO24JAN] Walking in Manhattan G", "background": null, "description": "Farmer John 和他的 $Q$（$1\\le Q\\le 2\\cdot 10^5$）头奶牛在曼哈顿度假，但奶牛们逃跑了，现在正在城市里自由走动！曼哈顿很大——大到它的 $N$（$1\\le N\\le 2\\cdot 10^5$）条道路在 $x-y$ 平面上无限延伸，但简单的是，这些道路都完全水平或垂直。每条水平和垂直道路都可以用形式为 $y=c_i$ 或 $x=c_i$ 的方程表示，其中 $c_i$ 是 $0$ 到 $10^9$ 范围内的整数。\n\nFarmer John 准确地知道每头奶牛从哪里开始行走，以及她们多久之前逃跑的。奶牛们很容易被预测，因此每头奶牛都是按照以下模式行走：\n\n- 她们只会以每秒一个单位的速度向北（$+y$）或向东（$+x$）行走。\n- 如果她们当前在一条道路上，她们会继续沿着道路的方向行走。\n- 如果她们在两条道路的交叉口处，如果她们行走了偶数秒，则向北行走，否则向东行走。\n\n给定曼哈顿的布局以及每头奶牛的信息，帮助 Farmer John 求出他的奶牛们现在在哪里！", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n以下 $N$ 行描述道路。每条道路由方向（`H` 代表东西向，`V` 代表南北向）和坐标 $c_i$ 表示。输入保证道路各不相同。\n\n以下 $Q$ 行描述奶牛。每头奶牛由三个整数 $(x_i,y_i,d_i)$ 表示，意味着她们在 $d_i$ 秒前从 $(x_i,y_i)$ 开始行走。输入保证 $(x_i,y_i)$ 位于某条道路上，且 $0\\le x_i,y_i,d_i\\le 10^9$。", "outputFormat": "输出 $Q$ 行，其中第 $i$ 行包含第 $i$ 头奶牛当前的位置。", "hint": "### 样例解释 1\n\n前两头奶牛经过的路径如下：\n\n$(6, 3) \\to (6, 4) \\to (7, 4) \\to (7, 5) \\to (8, 5) \\to \\ldots \\to (14, 5)$  \n$(6, 4) \\to (6, 5) \\to (7, 5) \\to (7, 6) \\to \\ldots \\to (7, 13)$\n\n### 测试点性质\n\n- 测试点 $2-4$：$N,Q,c_i,x_i,y_i,d_i\\le 100$。\n- 测试点 $5-9$：$N,Q\\le 3000$。\n- 测试点 $10-20$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Walking in Manhattan G", "background": null, "description": "Farmer John 和他的 $Q$（$1\\le Q\\le 2\\cdot 10^5$）头奶牛在曼哈顿度假，但奶牛们逃跑了，现在正在城市里自由走动！曼哈顿很大——大到它的 $N$（$1\\le N\\le 2\\cdot 10^5$）条道路在 $x-y$ 平面上无限延伸，但简单的是，这些道路都完全水平或垂直。每条水平和垂直道路都可以用形式为 $y=c_i$ 或 $x=c_i$ 的方程表示，其中 $c_i$ 是 $0$ 到 $10^9$ 范围内的整数。\n\nFarmer John 准确地知道每头奶牛从哪里开始行走，以及她们多久之前逃跑的。奶牛们很容易被预测，因此每头奶牛都是按照以下模式行走：\n\n- 她们只会以每秒一个单位的速度向北（$+y$）或向东（$+x$）行走。\n- 如果她们当前在一条道路上，她们会继续沿着道路的方向行走。\n- 如果她们在两条道路的交叉口处，如果她们行走了偶数秒，则向北行走，否则向东行走。\n\n给定曼哈顿的布局以及每头奶牛的信息，帮助 Farmer John 求出他的奶牛们现在在哪里！", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n以下 $N$ 行描述道路。每条道路由方向（`H` 代表东西向，`V` 代表南北向）和坐标 $c_i$ 表示。输入保证道路各不相同。\n\n以下 $Q$ 行描述奶牛。每头奶牛由三个整数 $(x_i,y_i,d_i)$ 表示，意味着她们在 $d_i$ 秒前从 $(x_i,y_i)$ 开始行走。输入保证 $(x_i,y_i)$ 位于某条道路上，且 $0\\le x_i,y_i,d_i\\le 10^9$。", "outputFormat": "输出 $Q$ 行，其中第 $i$ 行包含第 $i$ 头奶牛当前的位置。", "hint": "### 样例解释 1\n\n前两头奶牛经过的路径如下：\n\n$(6, 3) \\to (6, 4) \\to (7, 4) \\to (7, 5) \\to (8, 5) \\to \\ldots \\to (14, 5)$  \n$(6, 4) \\to (6, 5) \\to (7, 5) \\to (7, 6) \\to \\ldots \\to (7, 13)$\n\n### 测试点性质\n\n- 测试点 $2-4$：$N,Q,c_i,x_i,y_i,d_i\\le 100$。\n- 测试点 $5-9$：$N,Q\\le 3000$。\n- 测试点 $10-20$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10138", "type": "P", "difficulty": 5, "samples": [["6 2 3\n2 3\n4 5", "6"], ["10 1 20\n1 3", "399988086"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2024", "动态规划优化", "前缀和"], "title": "[USACO24JAN] Cowmpetency G", "background": null, "description": "Farmer John 正在为他的奶牛们雇用一位新的牛群领队。为此，他面试了 $N$（$2\\le N\\le 10^9$）头奶牛来担任该职位。在每次面试后，他会为候选牛分配一个 $1$ 到 $C$（$1\\le C\\le 10^4$）范围内的整数「牲任力」分数 $c_i$，与她们的领导能力相关。\n\n由于 Farmer John 面试了如此多的奶牛，他已经忘记了所有奶牛的牲任力分数。然而，他确实记得 $Q$\n（$1\\le Q\\le \\min(N-1,100)$）对数字 $(a_i,h_i)$，其中奶牛 $h_i$ 是第一头比奶牛 $1$ 到 $a_i$ 拥有**严格**更高牲任力分数的奶牛（所以 $1\\le a_i<h_i\\le N$）。\n\nFarmer John 现在告诉你这 $Q$ 个数对 $(a_i,h_i)$。请帮助他数一下有多少个牲任力分数序列与此信息一致！输入保证存在至少一个这样的序列。由于这个数字可能非常大，输出该值模 $10^9+7$ 的余数。", "inputFormat": "输入的第一行包含 $N$，$Q$ 和 $C$。\n\n以下 $Q$ 行，每行包含一个数对 $(a_i,h_i)$。输入保证所有 $a_i$ 各不相同。", "outputFormat": "输出与 Farmer John 记忆一致的牲任力分数序列的数量，对 $10^9+7$ 取模。", "hint": "### 样例解释 1\n\n以下六个序列是仅有的与 Farmer John 记忆一致的序列：\n\n$1\\ 1\\ 2\\ 1\\ 3\\ 1$  \n$1\\ 1\\ 2\\ 1\\ 3\\ 2$  \n$1\\ 1\\ 2\\ 1\\ 3\\ 3$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 1$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 2$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 3$  \n\n### 样例解释 2\n\n确保输出答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $3-4$：$N\\le 10$ 且 $Q,C\\le 4$。\n- 测试点 $5-7$：$N,C\\le 100$。\n- 测试点 $8-10$：$N\\le 2000$ 且 $C\\le 200$。\n- 测试点 $11-15$：$N,C\\le 5000$。\n- 测试点 $16-20$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Cowmpetency G", "background": null, "description": "Farmer John 正在为他的奶牛们雇用一位新的牛群领队。为此，他面试了 $N$（$2\\le N\\le 10^9$）头奶牛来担任该职位。在每次面试后，他会为候选牛分配一个 $1$ 到 $C$（$1\\le C\\le 10^4$）范围内的整数「牲任力」分数 $c_i$，与她们的领导能力相关。\n\n由于 Farmer John 面试了如此多的奶牛，他已经忘记了所有奶牛的牲任力分数。然而，他确实记得 $Q$\n（$1\\le Q\\le \\min(N-1,100)$）对数字 $(a_i,h_i)$，其中奶牛 $h_i$ 是第一头比奶牛 $1$ 到 $a_i$ 拥有**严格**更高牲任力分数的奶牛（所以 $1\\le a_i<h_i\\le N$）。\n\nFarmer John 现在告诉你这 $Q$ 个数对 $(a_i,h_i)$。请帮助他数一下有多少个牲任力分数序列与此信息一致！输入保证存在至少一个这样的序列。由于这个数字可能非常大，输出该值模 $10^9+7$ 的余数。", "inputFormat": "输入的第一行包含 $N$，$Q$ 和 $C$。\n\n以下 $Q$ 行，每行包含一个数对 $(a_i,h_i)$。输入保证所有 $a_i$ 各不相同。", "outputFormat": "输出与 Farmer John 记忆一致的牲任力分数序列的数量，对 $10^9+7$ 取模。", "hint": "### 样例解释 1\n\n以下六个序列是仅有的与 Farmer John 记忆一致的序列：\n\n$1\\ 1\\ 2\\ 1\\ 3\\ 1$  \n$1\\ 1\\ 2\\ 1\\ 3\\ 2$  \n$1\\ 1\\ 2\\ 1\\ 3\\ 3$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 1$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 2$  \n$1\\ 1\\ 2\\ 2\\ 3\\ 3$  \n\n### 样例解释 2\n\n确保输出答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $3-4$：$N\\le 10$ 且 $Q,C\\le 4$。\n- 测试点 $5-7$：$N,C\\le 100$。\n- 测试点 $8-10$：$N\\le 2000$ 且 $C\\le 200$。\n- 测试点 $11-15$：$N,C\\le 5000$。\n- 测试点 $16-20$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10139", "type": "P", "difficulty": 4, "samples": [["4\n5\n1 2 4 5 100000000000\n5\n17 53 4 33 44\n4\n3 5 5 5\n6\n2 5 100 1 4 5", "6\n15\n5\n6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "USACO", "2024"], "title": "[USACO24JAN] Nap Sort G", "background": "", "description": "Bessie 正在尝试使用她自己的排序算法对一个整数数组进行排序。她有一堆共 $N$（$1\\le N\\le 2\\cdot 10^5$）个整数 $a_1,a_2,\\ldots,a_N$（$1\\le a_i\\le 10^{11}$），她将会按排序顺序将这些数放入一个单独的数组中。她反复查找这堆数中的最小数，将其删除，同时将其添加到数组的末尾。Bessie 在 $p$ 个数的堆中找到最小数需要花费 $p$ 秒。\n\nFarmer John 命令了农场中其他一些奶牛帮助 Bessie 完成任务，她们很懒，然而 Bessie 利用了这一点。她将整数分成两堆：Bessie 堆和助手堆。对于 Bessie 堆中的每个整数，她会正常执行她的算法。对于助手堆中的每个整数，她将其分配给不同的助手奶牛。Farmer John 有一个很大的农场，所以 Bessie 可以找来任意多的助手奶牛。如果助手收到整数 $a_i$，Bessie 会指示该牛小睡 $a_i$ 秒，并在她们醒来时立即将该整数添加到数组末尾。如果 Bessie 和一个助手同时向数组添加整数，Bessie 的整数将优先被添加，因为她是领导者。如果多个助手被分配了相同的整数，她们会同时将多个该整数添加到数组中。\n\n请帮助 Bessie 划分她的数，使得最终得到的数组是排序的，并使得排序该数组所需的时间最少。 ", "inputFormat": "输入的第一行包含 $T$，为独立的测试用例的数量（$1\\le T\\le 10$）。\n\n每个测试用例的格式如下：\n\n每个测试用例的第一行包含 Bessie 的数组中的数的数量 $N$。\n\n下一行包含 $a_1,a_2,\\ldots,a_N$，为 Bessie 将要排序的整数。相同的数值可能会多次出现。\n\n输入保证所有测试用例的 $N$ 之和不超过 $2\\cdot 10^5$。", "outputFormat": " 对于每个测试用例输出一行，包含当 Bessie 以最优方案划分她的数时，排序该数组所需要的最小时间。", "hint": "### 样例解释 1\n\n在第一个测试用例中，Bessie 可以将 $1,2$ 分配给助手，将 $4,5,10^{11}$ 留给自己。\n\n| 时间 | 事件 |\n| :-----------:| :----------- |\n| $1$ | 助手添加了 $1$ |\n| $2$ | 助手添加了 $2$ |\n| $3$ | Bessie 添加了 $4$ |\n| $5$ | Bessie 添加了 $5$ |\n| $6$ | Bessie 添加了 $10^{11}$ |\n\n在第二个测试用例中，Bessie 的最优方案是自己对所有数进行排序。一个不正确的划分是 Bessie 将 $4$ 分配给助手，其余的分配给她自己，因为助手将 $4$ 添加到数组之前 Bessie 就会将 $17$ 添加到数组中。\n\n在第三个测试用例中，Bessie 可以将所有数都分配给助手。\n\n在第四个测试用例中，Bessie 可以将 $1,4,5$ 分配给助手，将 $2,5,100$ 留给自己。\n\n| 时间 | 事件 |\n| :-----------:| :----------- |\n| $1$ | 助手添加了 $1$ |\n| $3$ | Bessie 添加了 $2$ |\n| $4$ | 助手添加了 $4$ |\n| $5$ | Bessie 添加了 $5$ |\n| $5$ | 助手添加了 $5$ |\n| $6$ | Bessie 添加了 $100$ |\n\n### 测试点性质\n\n- 测试点 $2$：$N\\le 16$。\n- 测试点 $3-5$：$N\\le 150$。\n- 测试点 $6-8$：$\\sum N\\le 5000$。\n- 测试点 $9-11$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Nap Sort G", "background": "", "description": "Bessie 正在尝试使用她自己的排序算法对一个整数数组进行排序。她有一堆共 $N$（$1\\le N\\le 2\\cdot 10^5$）个整数 $a_1,a_2,\\ldots,a_N$（$1\\le a_i\\le 10^{11}$），她将会按排序顺序将这些数放入一个单独的数组中。她反复查找这堆数中的最小数，将其删除，同时将其添加到数组的末尾。Bessie 在 $p$ 个数的堆中找到最小数需要花费 $p$ 秒。\n\nFarmer John 命令了农场中其他一些奶牛帮助 Bessie 完成任务，她们很懒，然而 Bessie 利用了这一点。她将整数分成两堆：Bessie 堆和助手堆。对于 Bessie 堆中的每个整数，她会正常执行她的算法。对于助手堆中的每个整数，她将其分配给不同的助手奶牛。Farmer John 有一个很大的农场，所以 Bessie 可以找来任意多的助手奶牛。如果助手收到整数 $a_i$，Bessie 会指示该牛小睡 $a_i$ 秒，并在她们醒来时立即将该整数添加到数组末尾。如果 Bessie 和一个助手同时向数组添加整数，Bessie 的整数将优先被添加，因为她是领导者。如果多个助手被分配了相同的整数，她们会同时将多个该整数添加到数组中。\n\n请帮助 Bessie 划分她的数，使得最终得到的数组是排序的，并使得排序该数组所需的时间最少。 ", "inputFormat": "输入的第一行包含 $T$，为独立的测试用例的数量（$1\\le T\\le 10$）。\n\n每个测试用例的格式如下：\n\n每个测试用例的第一行包含 Bessie 的数组中的数的数量 $N$。\n\n下一行包含 $a_1,a_2,\\ldots,a_N$，为 Bessie 将要排序的整数。相同的数值可能会多次出现。\n\n输入保证所有测试用例的 $N$ 之和不超过 $2\\cdot 10^5$。", "outputFormat": " 对于每个测试用例输出一行，包含当 Bessie 以最优方案划分她的数时，排序该数组所需要的最小时间。", "hint": "### 样例解释 1\n\n在第一个测试用例中，Bessie 可以将 $1,2$ 分配给助手，将 $4,5,10^{11}$ 留给自己。\n\n| 时间 | 事件 |\n| :-----------:| :----------- |\n| $1$ | 助手添加了 $1$ |\n| $2$ | 助手添加了 $2$ |\n| $3$ | Bessie 添加了 $4$ |\n| $5$ | Bessie 添加了 $5$ |\n| $6$ | Bessie 添加了 $10^{11}$ |\n\n在第二个测试用例中，Bessie 的最优方案是自己对所有数进行排序。一个不正确的划分是 Bessie 将 $4$ 分配给助手，其余的分配给她自己，因为助手将 $4$ 添加到数组之前 Bessie 就会将 $17$ 添加到数组中。\n\n在第三个测试用例中，Bessie 可以将所有数都分配给助手。\n\n在第四个测试用例中，Bessie 可以将 $1,4,5$ 分配给助手，将 $2,5,100$ 留给自己。\n\n| 时间 | 事件 |\n| :-----------:| :----------- |\n| $1$ | 助手添加了 $1$ |\n| $3$ | Bessie 添加了 $2$ |\n| $4$ | 助手添加了 $4$ |\n| $5$ | Bessie 添加了 $5$ |\n| $5$ | 助手添加了 $5$ |\n| $6$ | Bessie 添加了 $100$ |\n\n### 测试点性质\n\n- 测试点 $2$：$N\\le 16$。\n- 测试点 $3-5$：$N\\le 150$。\n- 测试点 $6-8$：$\\sum N\\le 5000$。\n- 测试点 $9-11$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10140", "type": "P", "difficulty": 7, "samples": [["2\n\n3 2\n0 10 111111112\n1 3\n2 3\n\n6 5\n500000004 0 0 0 0 0\n1 5\n1 3\n4 5\n5 6\n1 2", "0 888888896 111111112\n500000004 166666668 166666668 83333334 0 83333334"], ["2\n\n5 5\n333333336 333333336 0 0 0\n1 2\n2 3\n3 4\n4 5\n1 5\n\n5 5\n0 0 0 0 0\n1 2\n2 3\n2 4\n1 4\n1 5", "777777784 222222224 0 0 0\n0 0 333333336 0 666666672"], ["1\n\n11 13\n2 3 4 5 6 7 8 9 10 11 12\n1 2\n1 3\n2 3\n2 4\n4 5\n2 5\n4 8\n5 9\n2 6\n6 7\n2 7\n6 10\n5 11", "133332478 200000394 577778352 999999971 399999938 933333282 355555536 800000020 18 600000029 18"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2024", "树形 DP", "概率论", "圆方树"], "title": "[USACO24JAN] Island Vacation P", "background": "", "description": "Bessie 正在一个 $N$（$2\\le N\\le 10^4$）座岛组成的岛屿网络中度假，编号为 $1\\ldots N$，由 $M$ 座双向通行的桥连接，每座桥连接两座岛（$N−1\\le M\\le \\dfrac{3(N-1)}{2}$）。保证所有桥形成连通的简单图（具体地说，没有两座桥连接同一对岛屿，也没有一座桥连接一座岛到其自身）。\n\n另外保证没有一座桥处在多于一个简单环上。一个简单环是一个不包含重复岛的环。\n\nBessie 从岛 $1$ 开始，按以下过程旅行。假设她目前在岛 $i$ 上，\n\n1. 如果不存在连接岛 $i$ 的她尚未穿过的桥，则她的度假结束。\n2. 否则，以 $p_i \\pmod {10^9+7}$ 的概率，她的度假结束。\n3. 否则，在连接岛 $i$的所有她还没有穿过的桥中，她均匀地随机选择一座并穿过它。\n\n对于每座岛，输出她在该岛上结束度假的概率，对 $10^9+7$ 取模。 ", "inputFormat": "输入的第一行包含独立的测试用例的数量 $T$（$1\\le T\\le 10$）。相邻的测试用例之间以一个空行分隔。\n\n每一个测试用例的第一行包含 $N$ 和 $M$，其中 $N$ 为岛的数量，$M$ 为桥的数量。输入保证所有测试用例的 $N$ 之和不超过 $10^4$。\n\n第二行包含 $p_1,p_2,\\ldots,p_N$（$0\\le p_i<10^9+7$）。\n\n以下 $M$ 行描述所有的桥。第 $i$ 行包含整数 $u_i$ 和 $v_i$（$1\\le u_i<v_i\\le N$），表示第 $i$ 座桥连接岛 $u_i$ 和 $v_i$。输入保证所有桥满足上文中的限制。 ", "outputFormat": "对于每个测试用例输出一行，包含在岛 $1$ 到 $N$ 的每一座岛上结束度假的概率模 $10^9+7$ 的余数，用空格分隔。", "hint": "### 样例解释 1\n\n在第一个测试用例中，$p_3\\equiv \\frac{1}{9}\\pmod {10^9+7}$。Bessie 有 $\\frac{1}{9}$ 的概率在岛 $3$ 结束（经过路径 $1\\to 3$），$\\frac{8}{9}$ 的概率在岛 $2$ 结束（经过路径 $1\\to 3\\to 2$）。\n\n在第二个测试用例中，$p_1\\equiv \\frac{1}{2}\\pmod {10^9+7}$。Bessie 有 $\\frac{1}{2}$ 的概率在岛 $1$ 结束，各 $\\frac{1}{6}$ 的概率在岛 $2$ 和 $3$ 结束，各 $\\frac{1}{12}$ 的概率在岛 $4$ 和岛 $6$ 结束。\n\n### 样例解释 2\n\n在第一个测试用例中，$p_1\\equiv p_2\\equiv \\frac{1}{3}\\pmod {10^9+7}$。Bessie 有 $\\frac{7}{9}$ 的概率在岛 $1$ 结束（经过路径 $1$，$1\\to 2\\to 3\\to 4\\to 5\\to 1$ 与 $1\\to 5\\to 4\\to 3\\to 2\\to 1$ 之一），$\\frac{2}{9}$ 的概率在岛 $2$ 结束。\n\n在第二个测试用例中，Bessie 有 $\\frac{1}{3}$ 的概率在岛 $3$ 结束，$\\frac{2}{3}$ 的概率在岛 $5$ 结束。\n\n### 测试点性质\n\n- 测试点 $4-5$：$N\\le 11$。\n- 测试点 $6-7$：不存在简单环。\n- 测试点 $8-11$：没有一座岛处在多于一个简单环上。\n- 测试点 $12-15$：没有一座岛处在多于 $5$ 个简单环上。\n- 测试点 $16-19$：没有一座岛处在多于 $50$ 个简单环上。\n- 测试点 $20-23$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Island Vacation P", "background": "", "description": "Bessie 正在一个 $N$（$2\\le N\\le 10^4$）座岛组成的岛屿网络中度假，编号为 $1\\ldots N$，由 $M$ 座双向通行的桥连接，每座桥连接两座岛（$N−1\\le M\\le \\dfrac{3(N-1)}{2}$）。保证所有桥形成连通的简单图（具体地说，没有两座桥连接同一对岛屿，也没有一座桥连接一座岛到其自身）。\n\n另外保证没有一座桥处在多于一个简单环上。一个简单环是一个不包含重复岛的环。\n\nBessie 从岛 $1$ 开始，按以下过程旅行。假设她目前在岛 $i$ 上，\n\n1. 如果不存在连接岛 $i$ 的她尚未穿过的桥，则她的度假结束。\n2. 否则，以 $p_i \\pmod {10^9+7}$ 的概率，她的度假结束。\n3. 否则，在连接岛 $i$的所有她还没有穿过的桥中，她均匀地随机选择一座并穿过它。\n\n对于每座岛，输出她在该岛上结束度假的概率，对 $10^9+7$ 取模。 ", "inputFormat": "输入的第一行包含独立的测试用例的数量 $T$（$1\\le T\\le 10$）。相邻的测试用例之间以一个空行分隔。\n\n每一个测试用例的第一行包含 $N$ 和 $M$，其中 $N$ 为岛的数量，$M$ 为桥的数量。输入保证所有测试用例的 $N$ 之和不超过 $10^4$。\n\n第二行包含 $p_1,p_2,\\ldots,p_N$（$0\\le p_i<10^9+7$）。\n\n以下 $M$ 行描述所有的桥。第 $i$ 行包含整数 $u_i$ 和 $v_i$（$1\\le u_i<v_i\\le N$），表示第 $i$ 座桥连接岛 $u_i$ 和 $v_i$。输入保证所有桥满足上文中的限制。 ", "outputFormat": "对于每个测试用例输出一行，包含在岛 $1$ 到 $N$ 的每一座岛上结束度假的概率模 $10^9+7$ 的余数，用空格分隔。", "hint": "### 样例解释 1\n\n在第一个测试用例中，$p_3\\equiv \\frac{1}{9}\\pmod {10^9+7}$。Bessie 有 $\\frac{1}{9}$ 的概率在岛 $3$ 结束（经过路径 $1\\to 3$），$\\frac{8}{9}$ 的概率在岛 $2$ 结束（经过路径 $1\\to 3\\to 2$）。\n\n在第二个测试用例中，$p_1\\equiv \\frac{1}{2}\\pmod {10^9+7}$。Bessie 有 $\\frac{1}{2}$ 的概率在岛 $1$ 结束，各 $\\frac{1}{6}$ 的概率在岛 $2$ 和 $3$ 结束，各 $\\frac{1}{12}$ 的概率在岛 $4$ 和岛 $6$ 结束。\n\n### 样例解释 2\n\n在第一个测试用例中，$p_1\\equiv p_2\\equiv \\frac{1}{3}\\pmod {10^9+7}$。Bessie 有 $\\frac{7}{9}$ 的概率在岛 $1$ 结束（经过路径 $1$，$1\\to 2\\to 3\\to 4\\to 5\\to 1$ 与 $1\\to 5\\to 4\\to 3\\to 2\\to 1$ 之一），$\\frac{2}{9}$ 的概率在岛 $2$ 结束。\n\n在第二个测试用例中，Bessie 有 $\\frac{1}{3}$ 的概率在岛 $3$ 结束，$\\frac{2}{3}$ 的概率在岛 $5$ 结束。\n\n### 测试点性质\n\n- 测试点 $4-5$：$N\\le 11$。\n- 测试点 $6-7$：不存在简单环。\n- 测试点 $8-11$：没有一座岛处在多于一个简单环上。\n- 测试点 $12-15$：没有一座岛处在多于 $5$ 个简单环上。\n- 测试点 $16-19$：没有一座岛处在多于 $50$ 个简单环上。\n- 测试点 $20-23$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10141", "type": "P", "difficulty": 6, "samples": [["3\n1 1 1", "0\n500000004\n500000004"], ["4\n3 1 1 1", "666666672\n0\n166666668\n166666668"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "USACO", "2024", "概率论"], "title": "[USACO24JAN] Merging Cells P", "background": "**注意：本题的内存限制为 512MB，通常限制的两倍。**", "description": "Bessie 正在玩一个著名的在线游戏，游戏中有许多不同编号和大小的细胞。细胞会被其他细胞吞噬，直到只剩下一个胜利者。\n\n有 $N$（$2\\le N\\le 5000$）个细胞从左到右排成一行，编号为 $1\\ldots N$，初始大小为 $s_1,s_2,\\ldots,s_N$（$1\\le s_i\\le 10^5$）。当存在多个细胞时，均匀地随机选择一对相邻细胞，并根据以下规则合并为一个新的细胞：\n\n如果编号为 $a$ 且当前大小为 $c_a$ 的细胞与编号为 $b$ 且当前大小为 $c_b$ 的细胞合并，则合并成的细胞的大小为 $c_a+c_b$，且编号等于较大细胞的编号，并列时则为编号较大的细胞的编号。形式化地说，合并成的细胞的编号为 $\\begin{cases}a & c_a>c_b\\\\b & c_a<c_b\\\\ \\max(a,b) & c_a=c_b \\end{cases}$。\n\n对于 $1\\ldots N$ 范围内的每个编号 $i$，最终的细胞具有编号 $i$ 的概率可以以 $\\frac{a_i}{b_i}$ 的形式表示，其中 $b_i\\not \\equiv 0 \\pmod {10^9+7}$。输出 $a_ib_i^{-1}\\pmod {10^9+7}$。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $s_1,s_2,\\ldots,s_N$。 ", "outputFormat": "对于 $1\\ldots N$ 内的每个 $i$ 输出一行，为输出最终的细胞具有编号 $i$ 的概率模 $10^9+7$ 的余数。 ", "hint": "### 样例解释 1\n\n存在两种可能性，其中 $(a,b)\\to c$ 表示编号为 $a$ 和 $b$ 的细胞合并成了一个编号为 $c$ 的新的细胞。\n\n$(1, 2) \\to 2, (2, 3) \\to 2$  \n$(2, 3) \\to 3, (1, 3) \\to 3$\n\n所以有各 $\\frac{1}{2}$ 的概率最终的细胞具有编号 $2$ 或 $3$。\n\n\n### 样例解释 2\n\n六种可能性如下：\n\n$(1, 2) \\to 1, (1, 3) \\to 1, (1, 4) \\to 1$  \n$(1, 2) \\to 1, (3, 4) \\to 4, (1, 4) \\to 1$  \n$(2, 3) \\to 3, (1, 3) \\to 1, (1, 4) \\to 1$  \n$(2, 3) \\to 3, (3, 4) \\to 3, (1, 3) \\to 3$  \n$(3, 4) \\to 4, (2, 4) \\to 4, (1, 4) \\to 4$  \n$(3, 4) \\to 4, (1, 2) \\to 1, (1, 4) \\to 1$\n\n所以有 $\\frac{2}{3}$ 的概率最终的细胞具有编号 $1$，各 $\\frac{1}{6}$ 的概率最终的细胞具有编号 $3$ 或 $4$。\n\n### 测试点性质\n\n- 测试点 3：$N\\le 8$。\n- 测试点 $4-8$：$N\\le 100$。\n- 测试点 $9-14$：$N\\le 500$。\n- 测试点 $15-22$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Merging Cells P", "background": "**注意：本题的内存限制为 512MB，通常限制的两倍。**", "description": "Bessie 正在玩一个著名的在线游戏，游戏中有许多不同编号和大小的细胞。细胞会被其他细胞吞噬，直到只剩下一个胜利者。\n\n有 $N$（$2\\le N\\le 5000$）个细胞从左到右排成一行，编号为 $1\\ldots N$，初始大小为 $s_1,s_2,\\ldots,s_N$（$1\\le s_i\\le 10^5$）。当存在多个细胞时，均匀地随机选择一对相邻细胞，并根据以下规则合并为一个新的细胞：\n\n如果编号为 $a$ 且当前大小为 $c_a$ 的细胞与编号为 $b$ 且当前大小为 $c_b$ 的细胞合并，则合并成的细胞的大小为 $c_a+c_b$，且编号等于较大细胞的编号，并列时则为编号较大的细胞的编号。形式化地说，合并成的细胞的编号为 $\\begin{cases}a & c_a>c_b\\\\b & c_a<c_b\\\\ \\max(a,b) & c_a=c_b \\end{cases}$。\n\n对于 $1\\ldots N$ 范围内的每个编号 $i$，最终的细胞具有编号 $i$ 的概率可以以 $\\frac{a_i}{b_i}$ 的形式表示，其中 $b_i\\not \\equiv 0 \\pmod {10^9+7}$。输出 $a_ib_i^{-1}\\pmod {10^9+7}$。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $s_1,s_2,\\ldots,s_N$。 ", "outputFormat": "对于 $1\\ldots N$ 内的每个 $i$ 输出一行，为输出最终的细胞具有编号 $i$ 的概率模 $10^9+7$ 的余数。 ", "hint": "### 样例解释 1\n\n存在两种可能性，其中 $(a,b)\\to c$ 表示编号为 $a$ 和 $b$ 的细胞合并成了一个编号为 $c$ 的新的细胞。\n\n$(1, 2) \\to 2, (2, 3) \\to 2$  \n$(2, 3) \\to 3, (1, 3) \\to 3$\n\n所以有各 $\\frac{1}{2}$ 的概率最终的细胞具有编号 $2$ 或 $3$。\n\n\n### 样例解释 2\n\n六种可能性如下：\n\n$(1, 2) \\to 1, (1, 3) \\to 1, (1, 4) \\to 1$  \n$(1, 2) \\to 1, (3, 4) \\to 4, (1, 4) \\to 1$  \n$(2, 3) \\to 3, (1, 3) \\to 1, (1, 4) \\to 1$  \n$(2, 3) \\to 3, (3, 4) \\to 3, (1, 3) \\to 3$  \n$(3, 4) \\to 4, (2, 4) \\to 4, (1, 4) \\to 4$  \n$(3, 4) \\to 4, (1, 2) \\to 1, (1, 4) \\to 1$\n\n所以有 $\\frac{2}{3}$ 的概率最终的细胞具有编号 $1$，各 $\\frac{1}{6}$ 的概率最终的细胞具有编号 $3$ 或 $4$。\n\n### 测试点性质\n\n- 测试点 3：$N\\le 8$。\n- 测试点 $4-8$：$N\\le 100$。\n- 测试点 $9-14$：$N\\le 500$。\n- 测试点 $15-22$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10142", "type": "P", "difficulty": 6, "samples": [["2\n1 2\n2 1", "2"], ["3\n1 1\n2 2\n3 3", "10"], ["3\n1 1\n2 3\n3 2", "12"], ["40\n1 1\n2 2\n3 3\n4 4\n5 5\n6 6\n7 7\n8 8\n9 9\n10 10\n11 11\n12 12\n13 13\n14 14\n15 15\n16 16\n17 17\n18 18\n19 19\n20 20\n21 21\n22 22\n23 23\n24 24\n25 25\n26 26\n27 27\n28 28\n29 29\n30 30\n31 31\n32 32\n33 33\n34 34\n35 35\n36 36\n37 37\n38 38\n39 39\n40 40", "441563023"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "USACO", "2024", "容斥原理"], "title": "[USACO24JAN] Mooball Teams III P", "background": "", "description": "Farmer John 在他的农场上有 $N$ 头牛（$2\\le N\\le 2\\cdot 10^5$），编号为 $1\\ldots N$。奶牛 $i$ 位于整数坐标 $(x_i,y_i)$（$1\\le x_i,y_i\\le N$）。Farmer John 想要挑选两支队伍来玩哞球游戏！\n\n其中一支队伍将是「红队」；另一队将是「蓝队」。对组队只有很少的要求。两队都不能为空，并且 $N$ 头奶牛中的每一头至多只能在一个队中（可以两队都不在）。唯一的其他要求是基于哞球独特的特点：一个无限长的网，必须将其放置为平面中非整数坐标的水平或垂直直线，例如 $x=0.5$。FJ 挑选队伍必须使得可以用网将两队分开。奶牛们不愿意为此进行移动。\n\n帮帮农夫吧！为 Farmer John 计算选择满足上述要求的红队和蓝队的方法数，对 $10^9+7$ 取模。", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n以下 $N$ 行每行包含两个空格分隔的整数 $x_i$ 和 $y_i$。输入保证 $x_i$ 组成 $1\\ldots N$ 的一个排列，$y_i$ 类似。", "outputFormat": "输出一个整数，为选择满足上述要求的红队和蓝队的方法数，对 $10^9+7$ 取模。", "hint": "### 样例解释 1\n\n我们可以选择红队为牛 1，蓝队为牛 2，或者相反。无论哪种情况，我们都可以用一个网将两支球队分开（例如，$x=1.5$）。\n\n### 样例解释 2\n\n以下是所有的十种可能的将奶牛分队的方法；第 $i$ 个字符表示第 $i$ 头奶牛的队伍，`R` 表示红队，`B` 表示蓝队，或 `.` 表示第 $i$ 头奶牛不在一个队伍中。 \n\n```plain\nRRB\nR.B\nRB.\nRBB\n.RB\n.BR\nBRR\nBR.\nB.R\nBBR\n```\n\n### 样例解释 3\n\n以下是所有的十二种可能的将奶牛分队的方法：\n\n```plain\nRRB\nR.B\nRBR\nRB.\nRBB\n.RB\n.BR\nBRR\nBR.\nBRB\nB.R\nBBR\n```\n\n### 样例解释 4\n\n确保输出答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $5$：$N\\le 10$。\n- 测试点 $6-9$：$N\\le 200$。\n- 测试点 $10-13$：$N\\le 3000$。\n- 测试点 $14-24$：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO24JAN] Mooball Teams III P", "background": "", "description": "Farmer John 在他的农场上有 $N$ 头牛（$2\\le N\\le 2\\cdot 10^5$），编号为 $1\\ldots N$。奶牛 $i$ 位于整数坐标 $(x_i,y_i)$（$1\\le x_i,y_i\\le N$）。Farmer John 想要挑选两支队伍来玩哞球游戏！\n\n其中一支队伍将是「红队」；另一队将是「蓝队」。对组队只有很少的要求。两队都不能为空，并且 $N$ 头奶牛中的每一头至多只能在一个队中（可以两队都不在）。唯一的其他要求是基于哞球独特的特点：一个无限长的网，必须将其放置为平面中非整数坐标的水平或垂直直线，例如 $x=0.5$。FJ 挑选队伍必须使得可以用网将两队分开。奶牛们不愿意为此进行移动。\n\n帮帮农夫吧！为 Farmer John 计算选择满足上述要求的红队和蓝队的方法数，对 $10^9+7$ 取模。", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n以下 $N$ 行每行包含两个空格分隔的整数 $x_i$ 和 $y_i$。输入保证 $x_i$ 组成 $1\\ldots N$ 的一个排列，$y_i$ 类似。", "outputFormat": "输出一个整数，为选择满足上述要求的红队和蓝队的方法数，对 $10^9+7$ 取模。", "hint": "### 样例解释 1\n\n我们可以选择红队为牛 1，蓝队为牛 2，或者相反。无论哪种情况，我们都可以用一个网将两支球队分开（例如，$x=1.5$）。\n\n### 样例解释 2\n\n以下是所有的十种可能的将奶牛分队的方法；第 $i$ 个字符表示第 $i$ 头奶牛的队伍，`R` 表示红队，`B` 表示蓝队，或 `.` 表示第 $i$ 头奶牛不在一个队伍中。 \n\n```plain\nRRB\nR.B\nRB.\nRBB\n.RB\n.BR\nBRR\nBR.\nB.R\nBBR\n```\n\n### 样例解释 3\n\n以下是所有的十二种可能的将奶牛分队的方法：\n\n```plain\nRRB\nR.B\nRBR\nRB.\nRBB\n.RB\n.BR\nBRR\nBR.\nBRB\nB.R\nBBR\n```\n\n### 样例解释 4\n\n确保输出答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $5$：$N\\le 10$。\n- 测试点 $6-9$：$N\\le 200$。\n- 测试点 $10-13$：$N\\le 3000$。\n- 测试点 $14-24$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10143", "type": "P", "difficulty": 4, "samples": [["1 3 3\n2 3 4\n1 2 2", "40"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "背包 DP", "WC"], "title": "[WC2024] 代码堵塞", "background": "", "description": "小 $\\beth$ 为了纪念停办的 codejam，准备了一场“代码堵塞纪念赛”。小 $\\beth$ 的朋友小 $\\mho$ 也来围观，于是小 $\\beth$ 想预测小 $\\mho$ 的成绩。\n\n比赛共 $T$ 秒，有 $n$ 道题。第 $i(1 \\le i \\le n)$ 题分数为 $a_i$，小 $\\beth$ 预测小 $\\mho$ 需要 $t_i$ 秒完成。\n\n题目有两种类型：结果可见和结果不可见。结果不可见的题在比赛结束后才能知道评测结果，而结果可见的题在提交后立即得到评测结果。小 $\\beth$ 还没确定每道题的类型。\n\n小 $\\mho$ 由于从不写对拍，所以会先按编号从小到大完成所有结果可见的题，再按编号从小到大完成所有结果不可见的题。小 $\\mho$ 会花 $t_i$ 秒完成第 $i$ 题，当小 $\\mho$ 花费在第 $i$ 题和在第 $i$ 题之前完成的所有题的时间总和**不超过** $T$，就会在第 $i$ 题**产生提交**。\n\n由于小 $\\mho$ 提交即 AC，所以小 $\\beth$ 想知道对于所有 $2^n$ 种确定 $n$ 道题类型的方案，小 $\\mho$ 所能得到的分数总和的和。由于答案很大，你需要将答案对 $998244353$ 取模。", "inputFormat": "输入的第一行包含三个整数 $c, n, T$，表示测试点编号，题数和比赛时间。样例中的 $c$ 表示其满足的限制条件与第 $c$ 个测试点一致。\n\n输入的第二行包含 $n$ 个整数 $a_1, a_2, \\cdots , a_n$，分别表示每道题的分数。\n\n输入的第三行包含 $n$ 个整数 $t_1, t_2, \\cdots , t_n$，分别表示小 $\\mho$ 做每道题的时间。", "outputFormat": "输出一行包含一个整数，表示对于所有确定 $n$ 道题类型的方案，小 $\\mho$ 所能得到的分数总和的和，对 $998244353$ 取模。", "hint": "**样例 1 解释**\n\n我们用长度为 $3$ 的 $01$ 序列表示题目类型，$1$ 表示结果可见，$0$ 表示结果不可见。\n\n- $(0, 0, 0)(1, 0, 0)(1, 1, 0)(1, 1, 1)$ 四种情况：小 $\\mho$ 按照编号顺序做题，前两题产生提交，分数和为 $5$；\n-  $(0, 1, 0)$：小 $\\mho$ 按照 $213$ 的顺序做题，前两题产生提交，分数和为 $5$；\n-  $(0, 0, 1)$：小 $\\mho$ 按照 $312$ 的顺序做题，第一题和第三题产生提交，分数和为 $6$；\n-  $(1, 0, 1)$：小 $\\mho$ 按照 $132$ 的顺序做题，第一题和第三题产生提交，分数和为 $6$；\n-  $(0, 1, 1)$：小 $\\mho$ 按照 $231$ 的顺序做题，只有第二题产生提交，分数和为 $3$。\n\n因此答案为 $(5 \\times 4 + 5 + 6 + 6 + 3) \\bmod 998244353 = 40$。\n\n### 数据范围\n\n对于所有测试数据：\n\n- $1\\le n\\le 200$，\n- $1\\le T\\le 3\\times 10^5$，\n- $\\forall 1\\le i\\le n , 1\\le a_i\\le 3\\times 10^5$，\n- $\\forall 1\\le i\\le n,  1\\le t_i\\le T$。\n\n| 测试点编号 | $n\\le $ | $T\\le $ | 特殊性质 A | 特殊性质 B |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $15$ | $10^2$ | 否 | 否 |\n| $5\\sim 7$ | $200$ | $3\\times 10^5$ | 是 | 是 |\n| $8,9$ | $200$ | $3\\times 10^5$ | 是 | 否 |\n| $10\\sim 13$ | $200$ | $3\\times 10^5$ | 否 | 是 |\n| $14\\sim 16$ | $50$ | $10^3$ | 否 | 否 |\n| $17,18$ | $10^2$ | $10^4$ | 否 | 否 |\n| $19,20$ | $200$ | $3\\times 10^5$ | 否 | 否 |\n\n\n- 特殊性质 A：$\\forall 1 \\le i \\le n, a_i = 1$。\n- 特殊性质 B：$\\forall 1 \\le i \\le n, t_i = 1$。\n\n### 后记\n\n“你们这比赛怎么所有题都结果不可见啊？”", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2024] 代码堵塞", "background": "", "description": "小 $\\beth$ 为了纪念停办的 codejam，准备了一场“代码堵塞纪念赛”。小 $\\beth$ 的朋友小 $\\mho$ 也来围观，于是小 $\\beth$ 想预测小 $\\mho$ 的成绩。\n\n比赛共 $T$ 秒，有 $n$ 道题。第 $i(1 \\le i \\le n)$ 题分数为 $a_i$，小 $\\beth$ 预测小 $\\mho$ 需要 $t_i$ 秒完成。\n\n题目有两种类型：结果可见和结果不可见。结果不可见的题在比赛结束后才能知道评测结果，而结果可见的题在提交后立即得到评测结果。小 $\\beth$ 还没确定每道题的类型。\n\n小 $\\mho$ 由于从不写对拍，所以会先按编号从小到大完成所有结果可见的题，再按编号从小到大完成所有结果不可见的题。小 $\\mho$ 会花 $t_i$ 秒完成第 $i$ 题，当小 $\\mho$ 花费在第 $i$ 题和在第 $i$ 题之前完成的所有题的时间总和**不超过** $T$，就会在第 $i$ 题**产生提交**。\n\n由于小 $\\mho$ 提交即 AC，所以小 $\\beth$ 想知道对于所有 $2^n$ 种确定 $n$ 道题类型的方案，小 $\\mho$ 所能得到的分数总和的和。由于答案很大，你需要将答案对 $998244353$ 取模。", "inputFormat": "输入的第一行包含三个整数 $c, n, T$，表示测试点编号，题数和比赛时间。样例中的 $c$ 表示其满足的限制条件与第 $c$ 个测试点一致。\n\n输入的第二行包含 $n$ 个整数 $a_1, a_2, \\cdots , a_n$，分别表示每道题的分数。\n\n输入的第三行包含 $n$ 个整数 $t_1, t_2, \\cdots , t_n$，分别表示小 $\\mho$ 做每道题的时间。", "outputFormat": "输出一行包含一个整数，表示对于所有确定 $n$ 道题类型的方案，小 $\\mho$ 所能得到的分数总和的和，对 $998244353$ 取模。", "hint": "**样例 1 解释**\n\n我们用长度为 $3$ 的 $01$ 序列表示题目类型，$1$ 表示结果可见，$0$ 表示结果不可见。\n\n- $(0, 0, 0)(1, 0, 0)(1, 1, 0)(1, 1, 1)$ 四种情况：小 $\\mho$ 按照编号顺序做题，前两题产生提交，分数和为 $5$；\n-  $(0, 1, 0)$：小 $\\mho$ 按照 $213$ 的顺序做题，前两题产生提交，分数和为 $5$；\n-  $(0, 0, 1)$：小 $\\mho$ 按照 $312$ 的顺序做题，第一题和第三题产生提交，分数和为 $6$；\n-  $(1, 0, 1)$：小 $\\mho$ 按照 $132$ 的顺序做题，第一题和第三题产生提交，分数和为 $6$；\n-  $(0, 1, 1)$：小 $\\mho$ 按照 $231$ 的顺序做题，只有第二题产生提交，分数和为 $3$。\n\n因此答案为 $(5 \\times 4 + 5 + 6 + 6 + 3) \\bmod 998244353 = 40$。\n\n### 数据范围\n\n对于所有测试数据：\n\n- $1\\le n\\le 200$，\n- $1\\le T\\le 3\\times 10^5$，\n- $\\forall 1\\le i\\le n , 1\\le a_i\\le 3\\times 10^5$，\n- $\\forall 1\\le i\\le n,  1\\le t_i\\le T$。\n\n| 测试点编号 | $n\\le $ | $T\\le $ | 特殊性质 A | 特殊性质 B |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 4$ | $15$ | $10^2$ | 否 | 否 |\n| $5\\sim 7$ | $200$ | $3\\times 10^5$ | 是 | 是 |\n| $8,9$ | $200$ | $3\\times 10^5$ | 是 | 否 |\n| $10\\sim 13$ | $200$ | $3\\times 10^5$ | 否 | 是 |\n| $14\\sim 16$ | $50$ | $10^3$ | 否 | 否 |\n| $17,18$ | $10^2$ | $10^4$ | 否 | 否 |\n| $19,20$ | $200$ | $3\\times 10^5$ | 否 | 否 |\n\n\n- 特殊性质 A：$\\forall 1 \\le i \\le n, a_i = 1$。\n- 特殊性质 B：$\\forall 1 \\le i \\le n, t_i = 1$。\n\n### 后记\n\n“你们这比赛怎么所有题都结果不可见啊？”", "locale": "zh-CN"}}}
{"pid": "P10144", "type": "P", "difficulty": 6, "samples": [["4\n1 3 2 4", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2024", "离线处理", "WC"], "title": "[WC2024] 水镜", "background": "", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nA 城是一座多雨的城市，山溪泉水众多。出于对水的喜爱，市民们在城市中央修建了一座大喷泉。\n\n喷泉的水池中有一排 $n$ 个石柱，从左到右编号为 $1, 2, \\cdots , n$，第 $i$ 个石柱的高度为 $h_i$。水池中有储水，水位 $L$ 为一个**正实数**。第 $i$ 个石柱会产生一个高度为 $h'_i = 2L - h_i$ 的像。若石柱在水面上方，像在水面下方；若石柱在水面下方，像在水面上方；若石柱顶端与水面重合，则像也与水面重合。\n\n传说水中栖息着泉水精灵，每到满月之夜，它们就会在石柱上起舞，行动规则如下：\n\n- 泉水精灵只能栖息在石柱顶端，或者石柱的像的顶端。即如果泉水精灵在石柱 $u$ 上，它的高度 $r_u$ 便只有 $h_u, h'_u$ 两种可能取值。\n- 泉水精灵每次只能前往右侧相邻的石柱（或石柱的像）。\n- 在移动过程中，泉水精灵的高度必须**严格单调递增**。\n\n泉水精灵会选择一个石柱（或石柱的像）为起点，进行若干次移动后停止。这样的过程称为一次**舞蹈**。\n\nA 城的雨季漫长，由于不规律的降雨，喷泉的水位可能会多次变化，舞蹈路径的可能性也随之改变。作为远道而来的旅人，你很想知道有多少种舞蹈是可能实现的。具体地，你需要计算有多少对 $(u, v)$（$1 ≤ u < v ≤ n$），满足存在一种水位 $L$，使得泉水精灵在一次舞蹈中，能从第 $u$ 个石柱（或它的像）出发，到达第 $v$ 个石柱（或它的像）。\n\n**形式化的**：给定一个长度为 $n$ 的正整数序列 $h_1, h_2,\\cdots , h_n$，求满足以下所有条件的\n二元组 $(u, v)$ 的数量：\n- $1 \\le u < v \\le n$，且 $u, v$ 为整数；\n- 存在一个**正实数** $L$ 以及一个长度为 $(v - u + 1)$ 的序列 $r_u, r_{u+1},\\cdots , r_v$ 满足以下\n所有条件：\n- $\\forall u \\le i \\le v$，记 $h'_i = 2L - h_i$，则 $r_i \\in \\{h_i,h'_i\\}$，特别地，当 $h_i = h'_i$ 时，$r_i = h_i$；\n- $\\forall u \\le i < v, r_i < r_{i+1}$。\n", "inputFormat": "输入的第一行包含一个正整数 $n$，表示石柱的个数。\n\n输入的第二行包含 $n$ 个正整数 $h_1, h_2, \\cdots , h_n$，表示石柱的高度。\n", "outputFormat": "输出一行一个整数，表示符合题目描述的 $(u, v)$ 对数。", "hint": "**样例 1 解释**\n\n所有 $\\binom{4}{2}=6$ 种 $(u, v)$ 都是可行的。\n对于 $u = 1, v = 4$，可以选择 $L = 2.5$，则序列 $h'$\n 为 $\\{4, 2, 3, 1\\}$，取序列 $r$ 为 $\\{1, 2, 3, 4\\}$\n可以满足所有条件。\n\n### 数据范围\n\n对于所有测试数据：\n\n- $2\\le n\\le 5\\times 10^5$，\n- $\\forall 1\\le i\\le n,1\\le h_i\\le 10^{12}$。\n\n| 测试点编号 | $n\\le$ |\n| :----------: | :----------: |\n| $1\\sim 2$ | $10$ |\n| $3\\sim 4$ | $100$ |\n| $5\\sim 6$ | $400$ |\n| $7\\sim 11$| $4000$ |\n| $12\\sim 13$ | $5\\times 10^4$ |\n| $14\\sim 16$ | $10^5$ |\n| $17\\sim 19$ | $2\\times 10^5$ |\n| $20\\sim 25$ | $5\\times 10^5$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2024] 水镜", "background": "", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nA 城是一座多雨的城市，山溪泉水众多。出于对水的喜爱，市民们在城市中央修建了一座大喷泉。\n\n喷泉的水池中有一排 $n$ 个石柱，从左到右编号为 $1, 2, \\cdots , n$，第 $i$ 个石柱的高度为 $h_i$。水池中有储水，水位 $L$ 为一个**正实数**。第 $i$ 个石柱会产生一个高度为 $h'_i = 2L - h_i$ 的像。若石柱在水面上方，像在水面下方；若石柱在水面下方，像在水面上方；若石柱顶端与水面重合，则像也与水面重合。\n\n传说水中栖息着泉水精灵，每到满月之夜，它们就会在石柱上起舞，行动规则如下：\n\n- 泉水精灵只能栖息在石柱顶端，或者石柱的像的顶端。即如果泉水精灵在石柱 $u$ 上，它的高度 $r_u$ 便只有 $h_u, h'_u$ 两种可能取值。\n- 泉水精灵每次只能前往右侧相邻的石柱（或石柱的像）。\n- 在移动过程中，泉水精灵的高度必须**严格单调递增**。\n\n泉水精灵会选择一个石柱（或石柱的像）为起点，进行若干次移动后停止。这样的过程称为一次**舞蹈**。\n\nA 城的雨季漫长，由于不规律的降雨，喷泉的水位可能会多次变化，舞蹈路径的可能性也随之改变。作为远道而来的旅人，你很想知道有多少种舞蹈是可能实现的。具体地，你需要计算有多少对 $(u, v)$（$1 ≤ u < v ≤ n$），满足存在一种水位 $L$，使得泉水精灵在一次舞蹈中，能从第 $u$ 个石柱（或它的像）出发，到达第 $v$ 个石柱（或它的像）。\n\n**形式化的**：给定一个长度为 $n$ 的正整数序列 $h_1, h_2,\\cdots , h_n$，求满足以下所有条件的\n二元组 $(u, v)$ 的数量：\n- $1 \\le u < v \\le n$，且 $u, v$ 为整数；\n- 存在一个**正实数** $L$ 以及一个长度为 $(v - u + 1)$ 的序列 $r_u, r_{u+1},\\cdots , r_v$ 满足以下\n所有条件：\n- $\\forall u \\le i \\le v$，记 $h'_i = 2L - h_i$，则 $r_i \\in \\{h_i,h'_i\\}$，特别地，当 $h_i = h'_i$ 时，$r_i = h_i$；\n- $\\forall u \\le i < v, r_i < r_{i+1}$。\n", "inputFormat": "输入的第一行包含一个正整数 $n$，表示石柱的个数。\n\n输入的第二行包含 $n$ 个正整数 $h_1, h_2, \\cdots , h_n$，表示石柱的高度。\n", "outputFormat": "输出一行一个整数，表示符合题目描述的 $(u, v)$ 对数。", "hint": "**样例 1 解释**\n\n所有 $\\binom{4}{2}=6$ 种 $(u, v)$ 都是可行的。\n对于 $u = 1, v = 4$，可以选择 $L = 2.5$，则序列 $h'$\n 为 $\\{4, 2, 3, 1\\}$，取序列 $r$ 为 $\\{1, 2, 3, 4\\}$\n可以满足所有条件。\n\n### 数据范围\n\n对于所有测试数据：\n\n- $2\\le n\\le 5\\times 10^5$，\n- $\\forall 1\\le i\\le n,1\\le h_i\\le 10^{12}$。\n\n| 测试点编号 | $n\\le$ |\n| :----------: | :----------: |\n| $1\\sim 2$ | $10$ |\n| $3\\sim 4$ | $100$ |\n| $5\\sim 6$ | $400$ |\n| $7\\sim 11$| $4000$ |\n| $12\\sim 13$ | $5\\times 10^4$ |\n| $14\\sim 16$ | $10^5$ |\n| $17\\sim 19$ | $2\\times 10^5$ |\n| $20\\sim 25$ | $5\\times 10^5$ |\n", "locale": "zh-CN"}}}
{"pid": "P10145", "type": "P", "difficulty": 7, "samples": [["2 1\n1\n0 2", "5"], ["2 1\n1 \n1 2", "5"], ["5 2\n2 1 4 3\n1 3\n2 5", "193"], ["10 10\n5 2 1 3 4 7 6 8 9\n0 1\n0 2\n0 3\n0 4\n0 5\n0 6\n0 7\n0 8\n0 9\n0 10", "70848"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "WC"], "title": "[WC2024] 线段树", "background": "", "description": "小 Y 最近学会了如何用线段树维护序列，并支持区间求和的操作。\n\n**以下给出本题中线段树的定义。 该定义可能和你熟知的线段树有区别。**\n\n- 线段树是一种有根的二叉树，其每个节点对应了序列上的一个区间 $[l, r)$，其中根节点对应 $[0, n)$。\n- 对于每个节点，若其代表的序列区间 $[l, r)$ 满足 $r - l = 1$，则其为叶节点；否则存在整数 $m(l < m < r)$，满足其左儿子代表区间 $[l, m)$，右儿子代表区间 $[m, r)$。\n- 线段树的形态取决于每个非叶结点的划分点 $m$ 的选择。\n- 在区间求和的问题上，对于序列 $a_0, a_1, \\dots , a_{n-1}$，线段树的每个结点 $[l, r)$ 维护了\n$(a_l + a_{l+1} + \\cdots + a_{r-1})$ 的值。\n\n小 J 有一个长度为 $N$ 的数组 $A_0, A_1, \\dots , A_{N-1}$，他并不知道 $A$ 中的任何一个数，但是他有一棵线段树维护了 $A$ 的区间和。线段树由 $X_1, X_2, \\dots , X_{N-1}$ 给出，其中 $X_i$ 是线段树先序遍历的第 $i$ 个非叶结点的划分点。\n\n例如，如果 $N = 5, X = [2, 1, 4, 3]$，则线段树包含的结点的先序遍历为 $[0, 5), [0, 2), [0, 1), [1, 2), [2, 5), [2, 4), [2, 3), [3, 4), [4, 5)$。\n\n小 J 有 $M$ 个区间 $[L_1, R_1), [L_2, R_2), \\dots , [L_M, R_M)$，他想知道，在所有 $2^{2N-1}$ 个线段树结点的子集中，有多少个子集 $S$ 满足以下条件：\n\n- 如果已知 $S$ 中所有结点维护的值，则每个 $[L_i\n, R_i)$ 区间的和都能被唯一确定。\n\n例如，如果已知 $[0, 1), [1, 2)$，就能确定 $[0, 2)$ 的和；反过来，如果已知 $[0, 1), [0, 2)$，也能确定 $[1, 2)$ 的和。但如果仅已知 $[0, 2), [2, 4)$ 则不能确定 $[0, 3)$ 或 $[1, 2)$ 的和。\n\n由于答案很大，你需要输出答案对 $998244353$ 取模后的值。\n", "inputFormat": "输入的第一行包含两个整数 $N, M$，分别表示数组长度和区间个数。\n\n输入的第二行包含 $N - 1$ 个整数 $X_1, X_2, \\dots , X_{N-1}$。\n\n接下来 $M$ 行，每行包含两个整数 $L_i, R_i$，表示一个区间。\n", "outputFormat": "输出一行一个整数表示答案对 $998244353$ 取模后的值。\n", "hint": "**样例 1 解释**\n\n只有当直接知道 $[0, 2)$ 的总和或同时知道 $[0, 1)$ 和 $[1, 2)$ 的总和时才能知道 $[0, 2)$ 的总和，因此总的方案数为 $2^2 + 1 = 5$。\n\n### 数据范围\n\n对于所有测试数据：\n- $2 \\le N \\le 2 \\times 10^5$，\n- $1 \\le M \\le \\min \\{\\frac{N(N+1)}{2}, 2 \\times 10^5\\}$，\n- $\\forall 1 \\le i \\le N - 1, 1 \\le X_i \\le N - 1$，\n- 保证 $X_i$ 正确描述了一棵线段树，\n- $\\forall 1 \\le i \\le M, 0 \\le L_i < R_i \\le N$，\n- $\\forall i \\ne j,(L_i, R_i) \\ne (L_j, R_j )$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ncb7tdfe.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2024] 线段树", "background": "", "description": "小 Y 最近学会了如何用线段树维护序列，并支持区间求和的操作。\n\n**以下给出本题中线段树的定义。 该定义可能和你熟知的线段树有区别。**\n\n- 线段树是一种有根的二叉树，其每个节点对应了序列上的一个区间 $[l, r)$，其中根节点对应 $[0, n)$。\n- 对于每个节点，若其代表的序列区间 $[l, r)$ 满足 $r - l = 1$，则其为叶节点；否则存在整数 $m(l < m < r)$，满足其左儿子代表区间 $[l, m)$，右儿子代表区间 $[m, r)$。\n- 线段树的形态取决于每个非叶结点的划分点 $m$ 的选择。\n- 在区间求和的问题上，对于序列 $a_0, a_1, \\dots , a_{n-1}$，线段树的每个结点 $[l, r)$ 维护了\n$(a_l + a_{l+1} + \\cdots + a_{r-1})$ 的值。\n\n小 J 有一个长度为 $N$ 的数组 $A_0, A_1, \\dots , A_{N-1}$，他并不知道 $A$ 中的任何一个数，但是他有一棵线段树维护了 $A$ 的区间和。线段树由 $X_1, X_2, \\dots , X_{N-1}$ 给出，其中 $X_i$ 是线段树先序遍历的第 $i$ 个非叶结点的划分点。\n\n例如，如果 $N = 5, X = [2, 1, 4, 3]$，则线段树包含的结点的先序遍历为 $[0, 5), [0, 2), [0, 1), [1, 2), [2, 5), [2, 4), [2, 3), [3, 4), [4, 5)$。\n\n小 J 有 $M$ 个区间 $[L_1, R_1), [L_2, R_2), \\dots , [L_M, R_M)$，他想知道，在所有 $2^{2N-1}$ 个线段树结点的子集中，有多少个子集 $S$ 满足以下条件：\n\n- 如果已知 $S$ 中所有结点维护的值，则每个 $[L_i\n, R_i)$ 区间的和都能被唯一确定。\n\n例如，如果已知 $[0, 1), [1, 2)$，就能确定 $[0, 2)$ 的和；反过来，如果已知 $[0, 1), [0, 2)$，也能确定 $[1, 2)$ 的和。但如果仅已知 $[0, 2), [2, 4)$ 则不能确定 $[0, 3)$ 或 $[1, 2)$ 的和。\n\n由于答案很大，你需要输出答案对 $998244353$ 取模后的值。\n", "inputFormat": "输入的第一行包含两个整数 $N, M$，分别表示数组长度和区间个数。\n\n输入的第二行包含 $N - 1$ 个整数 $X_1, X_2, \\dots , X_{N-1}$。\n\n接下来 $M$ 行，每行包含两个整数 $L_i, R_i$，表示一个区间。\n", "outputFormat": "输出一行一个整数表示答案对 $998244353$ 取模后的值。\n", "hint": "**样例 1 解释**\n\n只有当直接知道 $[0, 2)$ 的总和或同时知道 $[0, 1)$ 和 $[1, 2)$ 的总和时才能知道 $[0, 2)$ 的总和，因此总的方案数为 $2^2 + 1 = 5$。\n\n### 数据范围\n\n对于所有测试数据：\n- $2 \\le N \\le 2 \\times 10^5$，\n- $1 \\le M \\le \\min \\{\\frac{N(N+1)}{2}, 2 \\times 10^5\\}$，\n- $\\forall 1 \\le i \\le N - 1, 1 \\le X_i \\le N - 1$，\n- 保证 $X_i$ 正确描述了一棵线段树，\n- $\\forall 1 \\le i \\le M, 0 \\le L_i < R_i \\le N$，\n- $\\forall i \\ne j,(L_i, R_i) \\ne (L_j, R_j )$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ncb7tdfe.png)", "locale": "zh-CN"}}}
{"pid": "P10147", "type": "P", "difficulty": 7, "samples": [["8 3\n1\n2\n3\n3\n3\n4\n4\n0\n0\n0\n0\n7\n5\n7\n5\n7 5 8\n1 2 8\n8 2 8", "7 7 28\n7 7 14\n5 7 26"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["1999", "O2优化", "Ynoi"], "title": "[Ynoi1999] 56TP", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/70a1t3pn.png)", "description": "给包含 $n$ 个顶点的有根树，每个顶点 $i$ 在时刻 $t$ 有权重 $v(t,i)$。\n\n对每个顶点给出 $v(0,i)$，保证对非叶节点 $i$ 有 $v(0,i)=0$，对叶子 $i$ 有 $0\\le v(0,i)\\le n$。\n\n共 $m$ 次询问，每次询问给出 $x,y,t$，问 $x$ 到 $y$ 路径上在时刻 $t$ 的权重的最小值、最大值、和。\n\n对叶子 $i$，有 $v(t,i)=v(0,i)$；\n\n对非叶节点 $i$，$t>0$，$v(t,i)$ 是 $i$ 的每个孩子 $j$ 的 $v(t-1,j)$ 的最大值。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n-1$ 行每行一个整数依次表示 $f_2,\\dots,f_n$，其中 $f_i$ 表示节点 $i$ 的父亲，根为 $1$。\n\n接下来 $n$ 行每行一个整数依次表示 $v(0,1),v(0,2),\\dots,v(0,n)$。\n\n接下来 $m$ 行，每行三个整数表示 $x,y,t$。", "outputFormat": "输出 $m$ 行，共 $m$ 个整数表示每个询问的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足  $1\\le n,m\\le 10^6$，$1\\le f_i\\le i-1$，$0\\le v(0,i)\\le n$，$1\\le x,y,t\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi1999] 56TP", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/70a1t3pn.png)", "description": "给包含 $n$ 个顶点的有根树，每个顶点 $i$ 在时刻 $t$ 有权重 $v(t,i)$。\n\n对每个顶点给出 $v(0,i)$，保证对非叶节点 $i$ 有 $v(0,i)=0$，对叶子 $i$ 有 $0\\le v(0,i)\\le n$。\n\n共 $m$ 次询问，每次询问给出 $x,y,t$，问 $x$ 到 $y$ 路径上在时刻 $t$ 的权重的最小值、最大值、和。\n\n对叶子 $i$，有 $v(t,i)=v(0,i)$；\n\n对非叶节点 $i$，$t>0$，$v(t,i)$ 是 $i$ 的每个孩子 $j$ 的 $v(t-1,j)$ 的最大值。", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n-1$ 行每行一个整数依次表示 $f_2,\\dots,f_n$，其中 $f_i$ 表示节点 $i$ 的父亲，根为 $1$。\n\n接下来 $n$ 行每行一个整数依次表示 $v(0,1),v(0,2),\\dots,v(0,n)$。\n\n接下来 $m$ 行，每行三个整数表示 $x,y,t$。", "outputFormat": "输出 $m$ 行，共 $m$ 个整数表示每个询问的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足  $1\\le n,m\\le 10^6$，$1\\le f_i\\le i-1$，$0\\le v(0,i)\\le n$，$1\\le x,y,t\\le n$。", "locale": "zh-CN"}}}
{"pid": "P10148", "type": "P", "difficulty": 7, "samples": [["10 5 4\n1 9 10 7\n1 7 10 9\n2 3 10\n1 10 10 1\n2 5 10\n2 5\n1 1\n3 4\n1 3", "64\n0\n0\n36"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["1999", "O2优化", "分块", "扫描线", "Ynoi"], "title": "[Ynoi1999] M47升级型“钢铁阿诺”", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/eb7fil05.png)", "description": "给定一个长度 $n$ 的整数序列 $a_1,\\dots,a_n$ ；\n\n给定一个由 $m$ 次操作构成的操作序列，操作从 $1$ 开始编号，到 $m$ 结束。操作序列中包含修改操作和求和操作，修改操作给定 $l,r,v$ ，将 $a_l,a_{l+1},\\dots,a_r$ 修改为 $v$ ，求和操作给定 $l,r$ ，查询 $\\sum\\limits_{i=l}^r a_i$；\n\n共 $q$ 次查询，每次查询给出 $L,R$ ，询问将序列 $a$ 初始化为 $0$ 后，依次进行操作序列中的第 $L,L+1,\\dots,R$ 次操作，每次求和操作的答案之和。", "inputFormat": "第一行三个整数 $n,m,q$ ；\n\n接下来 $m$ 行，每行 $1,l,r,v$ 或 $2,l,r$ 表示一次操作；\n\n接下来 $q$ 行，每行两个整数 $L,R$ 表示一次查询。", "outputFormat": "共 $q$ 行，每行一个整数，依次表示每次查询的答案。", "hint": "Idea：Ynoi，Solution：nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对所有数据，满足 $1\\le l\\le r\\le n$，$1\\le v\\le n$，$1\\le L\\le R\\le m$，$1\\le n,m,q\\le 5\\times 10^5$。\n\n对 $10\\%$ 的数据，$n,m,q\\le 10^2$。\n\n对另外 $20\\%$ 的数据，$n,m,q\\le 5\\times 10^3$。\n\n对另外 $10\\%$ 的数据，每次操作都是求和操作。\n\n对另外 $20\\%$ 的数据，每次查询满足 $L=1$。\n\n对另外 $20\\%$ 的数据，$n,m,q\\le 2\\times 10^5$。\n\n对于其余数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi1999] M47升级型“钢铁阿诺”", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/eb7fil05.png)", "description": "给定一个长度 $n$ 的整数序列 $a_1,\\dots,a_n$ ；\n\n给定一个由 $m$ 次操作构成的操作序列，操作从 $1$ 开始编号，到 $m$ 结束。操作序列中包含修改操作和求和操作，修改操作给定 $l,r,v$ ，将 $a_l,a_{l+1},\\dots,a_r$ 修改为 $v$ ，求和操作给定 $l,r$ ，查询 $\\sum\\limits_{i=l}^r a_i$；\n\n共 $q$ 次查询，每次查询给出 $L,R$ ，询问将序列 $a$ 初始化为 $0$ 后，依次进行操作序列中的第 $L,L+1,\\dots,R$ 次操作，每次求和操作的答案之和。", "inputFormat": "第一行三个整数 $n,m,q$ ；\n\n接下来 $m$ 行，每行 $1,l,r,v$ 或 $2,l,r$ 表示一次操作；\n\n接下来 $q$ 行，每行两个整数 $L,R$ 表示一次查询。", "outputFormat": "共 $q$ 行，每行一个整数，依次表示每次查询的答案。", "hint": "Idea：Ynoi，Solution：nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对所有数据，满足 $1\\le l\\le r\\le n$，$1\\le v\\le n$，$1\\le L\\le R\\le m$，$1\\le n,m,q\\le 5\\times 10^5$。\n\n对 $10\\%$ 的数据，$n,m,q\\le 10^2$。\n\n对另外 $20\\%$ 的数据，$n,m,q\\le 5\\times 10^3$。\n\n对另外 $10\\%$ 的数据，每次操作都是求和操作。\n\n对另外 $20\\%$ 的数据，每次查询满足 $L=1$。\n\n对另外 $20\\%$ 的数据，$n,m,q\\le 2\\times 10^5$。\n\n对于其余数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P10149", "type": "P", "difficulty": 6, "samples": [["10 5\n9 8 5 4 5 1 5 1 5 8\n2 8\n4 9\n7 9\n6 7\n2 3", "4\n4\n1\n0\n0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["1999", "O2优化", "Ynoi"], "title": "[Ynoi1999] XM66F", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/f05zotfr.png)", "description": "给定序列 $a_1,\\dots,a_n$ ，$m$ 次询问，每次询问给出 $l,r$ ，问有多少组 $(i,j,k)$ 满足 $l\\le i<j<k\\le r,\\;a_i=a_k>a_j$ 。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$。\n\n接下来 $m$ 行每行两个整数 $l,r$ 表示一个询问。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每个询问的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n所有数值为整数。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le l\\le r\\le n$，$n,m\\le 5\\times 10^5$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi1999] XM66F", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/f05zotfr.png)", "description": "给定序列 $a_1,\\dots,a_n$ ，$m$ 次询问，每次询问给出 $l,r$ ，问有多少组 $(i,j,k)$ 满足 $l\\le i<j<k\\le r,\\;a_i=a_k>a_j$ 。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$。\n\n接下来 $m$ 行每行两个整数 $l,r$ 表示一个询问。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每个询问的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n所有数值为整数。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le l\\le r\\le n$，$n,m\\le 5\\times 10^5$。\n\n", "locale": "zh-CN"}}}
{"pid": "P10150", "type": "P", "difficulty": 7, "samples": [["6 5\n4 2 5 5 4 4\n2\n5\n5\n3\n6", "1\n1\n1\n2\n0"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["1999", "O2优化", "Ynoi"], "title": "[Ynoi1999] TS-54", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kgov9x9z.png)", "description": "给定整数序列 $a_1,\\dots,a_n$ ，满足不存在 $1\\le i<j<k<l\\le n$ 使得 $a_i=a_j=a_k=a_l$ ；\n\n共 $m$ 次操作，每次操作给出 $x$ ，首先进行修改，将 $a_1,a_2,\\dots,a_x$ 翻转为 $a_x,\\dots,a_2,a_1$ ，然后查询有多少个不同的 $k$ ，满足存在 $1\\le i\\le x<j\\le n$ 使得 $a_i=a_j=k$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行一个整数 $x$ ，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足所有数值为整数，$1\\le a_i\\le n$，$1\\le x\\le n$，$n,m\\le 5\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi1999] TS-54", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/kgov9x9z.png)", "description": "给定整数序列 $a_1,\\dots,a_n$ ，满足不存在 $1\\le i<j<k<l\\le n$ 使得 $a_i=a_j=a_k=a_l$ ；\n\n共 $m$ 次操作，每次操作给出 $x$ ，首先进行修改，将 $a_1,a_2,\\dots,a_x$ 翻转为 $a_x,\\dots,a_2,a_1$ ，然后查询有多少个不同的 $k$ ，满足存在 $1\\le i\\le x<j\\le n$ 使得 $a_i=a_j=k$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行一个整数 $x$ ，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足所有数值为整数，$1\\le a_i\\le n$，$1\\le x\\le n$，$n,m\\le 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10151", "type": "P", "difficulty": 7, "samples": [["8 10\n1 4 7 3 8 2 4 7\n5 4 8 7 1 6 3 2\n2 6 6 2\n2 8 8 7\n1 4 3\n2 6 8 3\n2 4 4 3\n2 4 4 3\n2 6 8 4\n2 5 6 2\n2 1 8 1\n2 1 1 6", "1\n1\n0\n1\n1\n3\n2\n1\n0"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["1999", "O2优化", "Ynoi"], "title": "[Ynoi1999] SMV CC-64“蝰蛇”", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/h5yq3zo2.png)", "description": "给序列 $a_1,\\dots,a_n$ 和排列 $b_1,\\dots,b_n$，共有 $m$ 次操作：\n\n修改操作：给定 $x,y$，将 $a_x$ 改为 $y$；\n\n查询操作：给定 $l,r,x$，查区间 $[l,r]$ 内最长的子区间 $[l',r']$（即满足 $l\\le l'\\le r'\\le r$），使得对 $l'\\le i<r'$ 有 $a_{i+1}=b_{a_i}$，且存在 $l'\\le i\\le r'$ 使得 $a_i=x$。需要输出满足条件的 $r'-l'+1$ 的最大值，若不存在则输出 $0$。\n", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数依次表示 $b_1,\\dots,b_n$；\n\n接下来 $m$ 行，每行 $1,x,y$ 或 $2,l,r,x$ 表示进行一次修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，表示相应的答案。", "hint": "Idea：s_r_f，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足：\n\n$1\\le n,m\\le 10^6$；\n\n$1\\le a_i\\le n$；\n\n$1\\le b_i\\le n$，$b_i$ 互不相同；\n\n对修改操作，满足 $1\\le x,y\\le n$；\n\n对查询操作，满足 $1\\le l\\le r\\le n$，$1\\le x\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi1999] SMV CC-64“蝰蛇”", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/h5yq3zo2.png)", "description": "给序列 $a_1,\\dots,a_n$ 和排列 $b_1,\\dots,b_n$，共有 $m$ 次操作：\n\n修改操作：给定 $x,y$，将 $a_x$ 改为 $y$；\n\n查询操作：给定 $l,r,x$，查区间 $[l,r]$ 内最长的子区间 $[l',r']$（即满足 $l\\le l'\\le r'\\le r$），使得对 $l'\\le i<r'$ 有 $a_{i+1}=b_{a_i}$，且存在 $l'\\le i\\le r'$ 使得 $a_i=x$。需要输出满足条件的 $r'-l'+1$ 的最大值，若不存在则输出 $0$。\n", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数依次表示 $b_1,\\dots,b_n$；\n\n接下来 $m$ 行，每行 $1,x,y$ 或 $2,l,r,x$ 表示进行一次修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，表示相应的答案。", "hint": "Idea：s_r_f，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足：\n\n$1\\le n,m\\le 10^6$；\n\n$1\\le a_i\\le n$；\n\n$1\\le b_i\\le n$，$b_i$ 互不相同；\n\n对修改操作，满足 $1\\le x,y\\le n$；\n\n对查询操作，满足 $1\\le l\\le r\\le n$，$1\\le x\\le n$。", "locale": "zh-CN"}}}
{"pid": "P10152", "type": "P", "difficulty": 3, "samples": [["2\n3\n6", "Shinobu\nAlice"], ["1\n1000000000", "Alice"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "O2优化"], "title": "「LAOI-5」拼图", "background": "", "description": "Alice 和 Shinobu 在玩一个游戏。现在有 $n$ 个点，点有黑白两种颜色。初始每个点都是孤立的白点，Alice 和 Shinobu 轮流操作，Alice 先手：\n- 每轮 Alice 选择一对没有边的点对 $u,v$ 并连无向边 $(u,v)$，不能连自环。\n- 每轮 Shinobu 选择一个点并翻转其颜色（黑变白，白变黑）。\n\n当某一次操作后图中存在同色三元环（即存在点 $a,b,c$ 使 $a,b,c$ 同色且 $(a,b),(b,c),(c,a)$ 都已经连上）或者对手无法操作时，操作者获胜。假设两人都绝顶聪明，问谁存在必胜策略？", "inputFormat": "**本题有多组询问。**\n\n第一行一个正整数 $T$ 表示询问组数。\n\n后 $T$ 行，每行一个正整数 $n$ 表示游戏的点数。", "outputFormat": "$T$ 行，每行一个 `Alice` 或 `Shinobu`，表示最后谁会赢。", "hint": "样例 $1$ 解释：\n\n对于第 $1$ 组数据，Alice 一定在 $3$ 轮后连上 $(1,2),(2,3),(3,1)$，Shinobu 把 $1,2,3$ 依次变黑即可。\n\n对于第 $2$ 组数据，Alice 分 $8$ 轮连上 $(1,2),(2,3),(3,4),(4,5),(5,6),(6,1),(1,4),(2,5)$，然后 Alice 必胜：\n\n- $1,2,4,5$ 中三个同色，连上它们；\n- $1,2/4,5$ 同色，将 $6$ 与 $2/4$ 中同色的那个相连；\n- $1,4/2,5$ 同色，方案同上；\n- $1,5/2,4$ 同色，则 $3/6$ 必然同色（颜色换了 $8$ 次，黑点必有偶数个），即 $2,3,4/5,6,1$ 必然同色，连上即可。\n\n----------\n\n**本题采用捆绑测试。**\n\n- Subtask 1 (10pts)：$n\\le 6$。\n- Subtask 2 (40pts)：$n\\ge 10^7$。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$1\\le T\\le 10^6$，$1\\le n\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-5」拼图", "background": "", "description": "Alice 和 Shinobu 在玩一个游戏。现在有 $n$ 个点，点有黑白两种颜色。初始每个点都是孤立的白点，Alice 和 Shinobu 轮流操作，Alice 先手：\n- 每轮 Alice 选择一对没有边的点对 $u,v$ 并连无向边 $(u,v)$，不能连自环。\n- 每轮 Shinobu 选择一个点并翻转其颜色（黑变白，白变黑）。\n\n当某一次操作后图中存在同色三元环（即存在点 $a,b,c$ 使 $a,b,c$ 同色且 $(a,b),(b,c),(c,a)$ 都已经连上）或者对手无法操作时，操作者获胜。假设两人都绝顶聪明，问谁存在必胜策略？", "inputFormat": "**本题有多组询问。**\n\n第一行一个正整数 $T$ 表示询问组数。\n\n后 $T$ 行，每行一个正整数 $n$ 表示游戏的点数。", "outputFormat": "$T$ 行，每行一个 `Alice` 或 `Shinobu`，表示最后谁会赢。", "hint": "样例 $1$ 解释：\n\n对于第 $1$ 组数据，Alice 一定在 $3$ 轮后连上 $(1,2),(2,3),(3,1)$，Shinobu 把 $1,2,3$ 依次变黑即可。\n\n对于第 $2$ 组数据，Alice 分 $8$ 轮连上 $(1,2),(2,3),(3,4),(4,5),(5,6),(6,1),(1,4),(2,5)$，然后 Alice 必胜：\n\n- $1,2,4,5$ 中三个同色，连上它们；\n- $1,2/4,5$ 同色，将 $6$ 与 $2/4$ 中同色的那个相连；\n- $1,4/2,5$ 同色，方案同上；\n- $1,5/2,4$ 同色，则 $3/6$ 必然同色（颜色换了 $8$ 次，黑点必有偶数个），即 $2,3,4/5,6,1$ 必然同色，连上即可。\n\n----------\n\n**本题采用捆绑测试。**\n\n- Subtask 1 (10pts)：$n\\le 6$。\n- Subtask 2 (40pts)：$n\\ge 10^7$。\n- Subtask 3 (50pts)：无特殊限制。\n\n对于全部数据，$1\\le T\\le 10^6$，$1\\le n\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10153", "type": "P", "difficulty": 4, "samples": [["3 9 20\n3 3 3\n0 1 2", "3\n3 3 3 2 2 2 1 1 1\n1 0 1 0 1 0 0 0 0"], ["3 16 3\n5 5 6\n2 0 8", "3\n1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 3\n0 0 1 0 0 1 1 0 2 1 0 2 0 0 1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "构造"], "title": "「LAOI-5」膜你赛", "background": "LAOI 团员们出了一场有 $10^{100}$ 道题的 CSP-J 膜你赛！\n\n\n2025.1.24 本题 Idea 来源为 [xzCyanBrad](/user/380730)。", "description": "比赛是 ICPC 赛制，先以过题数为第一关键字不升排序，再以罚时数为第二关键字不降排序。\n\n有 $n$ 个巨佬前来爆切这场比赛，比赛一共 $m$ 分钟。\n\n在第 $i$ 分钟（$0 \\le i \\le m-1$）的开始，$s_i$ 号巨佬先提交了 $t_i$ 个 WA 的评测（每个罚时 $x$ 分钟），然后通过了某一道题目。**于是，TA 的通过数增加 $1$，总罚时增加 $x \\times t_i + i$ 分钟。**\n\n第 $i$ 个巨佬共有 $k_i$ 个 WA，共过了 $a_i$ 道题（保证 $\\sum_{i=1}^n a_i=m$）。为什么巨佬们没有把题目全部切完呢？因为他们觉得题目太简单了，觉得没意思，走了。\n\n如果巨佬 $i$ 在**结束自己的所有提交**之后，发现自己在排行榜上的第一名（**不能并列**），那么称他「爆切比赛」。\n\n试构造数列 $\\{s_m\\}$ 和 $\\{t_m\\}$，使得第 $i$ 个巨佬共有 $k_i$ 个 WA，共过了 $a_i$ 道题，且使「爆切比赛」的人数尽量多。", "inputFormat": "共三行。\n\n第一行三个整数 $n,m,x$。  \n\n第二行 $n$ 个整数，表示 $\\{a_n\\}$。\n\n第三行 $n$ 个整数，表示 $\\{k_n\\}$。", "outputFormat": "第一行输出最大的「爆切比赛」的人数。 \n\n第二、三行输出一组最大方案：\n\n第二行 $m$ 个整数，表示 $\\{s_m\\}$。\n\n第三行 $m$ 个整数，表示 $\\{t_m\\}$。", "hint": "### 样例 1 解释\n\n$2$ 分钟时，巨佬 $3$ 结束提交，通过 $3$ 题，罚时 $20 \\times 2 + 0 + 1 + 2 = 43$ 分钟。\n\n$5$ 分钟时，巨佬 $2$ 结束提交，通过 $3$ 题，罚时 $20 \\times 1 + 3 + 4 + 5 = 32$ 分钟。\n\n$8$ 分钟时，巨佬 $1$ 结束提交，通过 $3$ 题，罚时 $20 \\times 0 + 6 + 7 + 8 = 21$ 分钟。\n\n### 数据范围\n\n**不保证数据随机。**\n\n**本题采用捆绑测试。**\n\n|子任务编号|分值|$n,m,x$|\n|:--:|:--:|:--:|\n|$1$|$10$|$n\\le5$，$m \\le50$，$x\\le5$|\n|$2$|$10$|$n\\le50$，$m\\le500$|\n|$3$|$20$|$n\\le10^3$，$m \\le5\\times10^3$|\n|$4$|$20$|$x=0$，$k_i=0$|\n|$5$|$40$|无特殊限制|\n\n对于 $100\\%$ 的数据，保证：\n\n- $m\\ge 3n$；\n- $3 \\le n\\le10^5$；\n- $9\\le m\\le 3\\times10^5$；\n- $0\\le x\\le 5\\times10^4$；\n- $0\\le k_i \\le 4\\times10^4$；\n- $3\\le\\color{black} a_i \\le 3\\times10^5$；\n- $\\sum ^{n}_{i=1} a_i = m$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-5」膜你赛", "background": "LAOI 团员们出了一场有 $10^{100}$ 道题的 CSP-J 膜你赛！\n\n\n2025.1.24 本题 Idea 来源为 [xzCyanBrad](/user/380730)。", "description": "比赛是 ICPC 赛制，先以过题数为第一关键字不升排序，再以罚时数为第二关键字不降排序。\n\n有 $n$ 个巨佬前来爆切这场比赛，比赛一共 $m$ 分钟。\n\n在第 $i$ 分钟（$0 \\le i \\le m-1$）的开始，$s_i$ 号巨佬先提交了 $t_i$ 个 WA 的评测（每个罚时 $x$ 分钟），然后通过了某一道题目。**于是，TA 的通过数增加 $1$，总罚时增加 $x \\times t_i + i$ 分钟。**\n\n第 $i$ 个巨佬共有 $k_i$ 个 WA，共过了 $a_i$ 道题（保证 $\\sum_{i=1}^n a_i=m$）。为什么巨佬们没有把题目全部切完呢？因为他们觉得题目太简单了，觉得没意思，走了。\n\n如果巨佬 $i$ 在**结束自己的所有提交**之后，发现自己在排行榜上的第一名（**不能并列**），那么称他「爆切比赛」。\n\n试构造数列 $\\{s_m\\}$ 和 $\\{t_m\\}$，使得第 $i$ 个巨佬共有 $k_i$ 个 WA，共过了 $a_i$ 道题，且使「爆切比赛」的人数尽量多。", "inputFormat": "共三行。\n\n第一行三个整数 $n,m,x$。  \n\n第二行 $n$ 个整数，表示 $\\{a_n\\}$。\n\n第三行 $n$ 个整数，表示 $\\{k_n\\}$。", "outputFormat": "第一行输出最大的「爆切比赛」的人数。 \n\n第二、三行输出一组最大方案：\n\n第二行 $m$ 个整数，表示 $\\{s_m\\}$。\n\n第三行 $m$ 个整数，表示 $\\{t_m\\}$。", "hint": "### 样例 1 解释\n\n$2$ 分钟时，巨佬 $3$ 结束提交，通过 $3$ 题，罚时 $20 \\times 2 + 0 + 1 + 2 = 43$ 分钟。\n\n$5$ 分钟时，巨佬 $2$ 结束提交，通过 $3$ 题，罚时 $20 \\times 1 + 3 + 4 + 5 = 32$ 分钟。\n\n$8$ 分钟时，巨佬 $1$ 结束提交，通过 $3$ 题，罚时 $20 \\times 0 + 6 + 7 + 8 = 21$ 分钟。\n\n### 数据范围\n\n**不保证数据随机。**\n\n**本题采用捆绑测试。**\n\n|子任务编号|分值|$n,m,x$|\n|:--:|:--:|:--:|\n|$1$|$10$|$n\\le5$，$m \\le50$，$x\\le5$|\n|$2$|$10$|$n\\le50$，$m\\le500$|\n|$3$|$20$|$n\\le10^3$，$m \\le5\\times10^3$|\n|$4$|$20$|$x=0$，$k_i=0$|\n|$5$|$40$|无特殊限制|\n\n对于 $100\\%$ 的数据，保证：\n\n- $m\\ge 3n$；\n- $3 \\le n\\le10^5$；\n- $9\\le m\\le 3\\times10^5$；\n- $0\\le x\\le 5\\times10^4$；\n- $0\\le k_i \\le 4\\times10^4$；\n- $3\\le\\color{black} a_i \\le 3\\times10^5$；\n- $\\sum ^{n}_{i=1} a_i = m$。\n", "locale": "zh-CN"}}}
{"pid": "P10154", "type": "P", "difficulty": 4, "samples": [["7\n1 1\n2 4\n3 9\n10 6\n23 44\n108 301\n9181918 918918", "1\n16\n1080\n721510288\n57314155\n568048964\n118153594"]], "limits": {"time": [2000, 2000, 2000], "memory": [524288, 524288, 524288]}, "tags": ["数学", "O2优化"], "title": "「FAOI-R3」移民计划", "background": null, "description": "给定两个正整数 $n,a$。\n\n现有两个正整数数列 $\\{h_n\\},\\{s_n\\}$ 和一个正整数 $W$，满足：\n\n$$\\begin{cases} s_1=a, \\\\  s_i=\\left\\lceil \\dfrac{h_{i-1}}{i} \\right\\rceil, \\\\  h_i=i \\times s_i,\\\\  W=h_1\\times h_2\\times \\ldots\\times h_n. \\end{cases}$$\n\n试计算 $W$ 的值。**答案对 $10^9+7$ 取模。**", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n下面 $T$ 行，每行两个整数 $n,a$。", "outputFormat": "$T$ 行，每行一个整数，对应一组数据的答案。", "hint": "样例解释：\n\n- 对于第 $1$ 组数据，$s$ 数列为 $\\{1\\}$，$h$ 数列为 $\\{1\\}$，故答案为 $1$。\n- 对于第 $2$ 组数据，$s$ 数列为 $\\{4,2\\}$，$h$ 数列为 $\\{4,4\\}$，故答案为 $16$。\n- 对于第 $3$ 组数据，$s$ 数列为 $\\{9,5,4\\}$，$h$ 数列为 $\\{9,10,12\\}$，故答案为 $1080$。\n- 对于第 $4$ 组数据，取模前的答案为 $16721510400$。\n\n------------\n\n| 测试点编号 | $n \\le$ | $a \\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $100$ | $1000$ | $40$ |\n| $2$ | $10^7$ | $1000$ | $30$ |\n| $3$ | $10^7$ | $10^6$ | $30$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$1 \\le n \\le 10^7$，$1 \\le a \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R3」移民计划", "background": null, "description": "给定两个正整数 $n,a$。\n\n现有两个正整数数列 $\\{h_n\\},\\{s_n\\}$ 和一个正整数 $W$，满足：\n\n$$\\begin{cases} s_1=a, \\\\  s_i=\\left\\lceil \\dfrac{h_{i-1}}{i} \\right\\rceil, \\\\  h_i=i \\times s_i,\\\\  W=h_1\\times h_2\\times \\ldots\\times h_n. \\end{cases}$$\n\n试计算 $W$ 的值。**答案对 $10^9+7$ 取模。**", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。\n\n下面 $T$ 行，每行两个整数 $n,a$。", "outputFormat": "$T$ 行，每行一个整数，对应一组数据的答案。", "hint": "样例解释：\n\n- 对于第 $1$ 组数据，$s$ 数列为 $\\{1\\}$，$h$ 数列为 $\\{1\\}$，故答案为 $1$。\n- 对于第 $2$ 组数据，$s$ 数列为 $\\{4,2\\}$，$h$ 数列为 $\\{4,4\\}$，故答案为 $16$。\n- 对于第 $3$ 组数据，$s$ 数列为 $\\{9,5,4\\}$，$h$ 数列为 $\\{9,10,12\\}$，故答案为 $1080$。\n- 对于第 $4$ 组数据，取模前的答案为 $16721510400$。\n\n------------\n\n| 测试点编号 | $n \\le$ | $a \\le$ | 分值 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $100$ | $1000$ | $40$ |\n| $2$ | $10^7$ | $1000$ | $30$ |\n| $3$ | $10^7$ | $10^6$ | $30$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^5$，$1 \\le n \\le 10^7$，$1 \\le a \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10155", "type": "P", "difficulty": 3, "samples": [["5\n3 1 4 2 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心"], "title": "[LSOT-2] 基于二分查找与插入的快速排序", "background": "小 H 不会排序，但是会二分！\n\n于是他创造了一个基于二分查找与插入的快速排序。\n\n本题存在可带修做法，因为这题是这场考试的签到题所以良心出题人没有加上。", "description": "给定一个排列 $p$。每次可以选择一个数 $p_i$，你需要找到最小的 $j$，使得 $j>i$ 且 $p_j>p_i$，并将 $p_i$ 插入到 $p_j$ 前面。你需要最小化使得 $p_i=i$ 的操作次数。\n\n若不存在这样的 $j$，则无法进行操作。", "inputFormat": "第一行一个整数 $n$，表示排列的长度。\n\n接下来一行 $n$ 个整数描述排列 $p$，第 $i$ 个数为 $p_i$。", "outputFormat": "一行一个整数表示最小的操作次数。若无法完成排序输出 $-1$。", "hint": "\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(20pts)：}n\\le10$。\n- $\\texttt{Subtask 2(20pts)：}$保证 $p_i=n-i+1$。\n- $\\texttt{Subtask 3(20pts)：}n\\le1000$。\n- $\\texttt{Subtask 4(40pts)：}$无特殊性质。\n\n对于全部的数据，$1\\le n\\le2\\times 10^6$，$p$ 是一个 $1$ 到 $n$ 的排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-2] 基于二分查找与插入的快速排序", "background": "小 H 不会排序，但是会二分！\n\n于是他创造了一个基于二分查找与插入的快速排序。\n\n本题存在可带修做法，因为这题是这场考试的签到题所以良心出题人没有加上。", "description": "给定一个排列 $p$。每次可以选择一个数 $p_i$，你需要找到最小的 $j$，使得 $j>i$ 且 $p_j>p_i$，并将 $p_i$ 插入到 $p_j$ 前面。你需要最小化使得 $p_i=i$ 的操作次数。\n\n若不存在这样的 $j$，则无法进行操作。", "inputFormat": "第一行一个整数 $n$，表示排列的长度。\n\n接下来一行 $n$ 个整数描述排列 $p$，第 $i$ 个数为 $p_i$。", "outputFormat": "一行一个整数表示最小的操作次数。若无法完成排序输出 $-1$。", "hint": "\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(20pts)：}n\\le10$。\n- $\\texttt{Subtask 2(20pts)：}$保证 $p_i=n-i+1$。\n- $\\texttt{Subtask 3(20pts)：}n\\le1000$。\n- $\\texttt{Subtask 4(40pts)：}$无特殊性质。\n\n对于全部的数据，$1\\le n\\le2\\times 10^6$，$p$ 是一个 $1$ 到 $n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P10156", "type": "P", "difficulty": 4, "samples": [["6 2 2 3\n2 5 7 2 5 7\n1 1 2 1 2 1", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "背包 DP"], "title": "[LSOT-2] 胜者组", "background": "进入胜者组就算胜利吗...\n\n至少人们都这样说。", "description": "小 H 的学校在 noip 结束后要决定踢出一些学生回去学文化课。\n\n具体的，学校一共有 $n$ 个同学，留下了最多 $m$ 个学习信息学的名额。\n\n学校里的同学组成了 $k$ 个小团体，其中第 $i$ 个同学属于第 $c_i$ 个小团体。\n\n你每次可以钦定两个处于同一小团体的学生学习文化课。若你让学生 $i,j(c_i=c_j)$ 去学习文化课，学生会产生 $a_i+a_j+x\\times|i-j|$ 的不满意度。这里 $x$ 是输入一开始给定的常数。\n\n你需要让学生的不满意度最小化，或报告无法留下不多于 $m$ 个学习信息学的学生。", "inputFormat": "第一行四个正整数 $n,m,k,x$。\n\n接下来两行每行 $n$ 个整数分别表示 $a_i,c_i$。", "outputFormat": "一行一个整数表示最小的不满意度。或输出 `Impossible` 表示无解。", "hint": "样例解释：\n\n分别钦定 $(1,2)$ 和 $(4,6)$ 学习文化课，不满意度为 $(2+5+3\\times|1-2|)+(2+7+3\\times|4-6|)=25$。\n\n需要注意的是，一个同学不可以被钦定多次。\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(15pts)：}n\\le20$。\n- $\\texttt{Subtask 2(15pts)：}x=0$。\n- $\\texttt{Subtask 3(15pts)：}k=1$。\n- $\\texttt{Subtask 4(20pts)：}n\\le 300$。\n- $\\texttt{Subtask 5(35pts)：}$无特殊性质。\n\n对于全部的数据，$0\\le a_i,x\\le10^5$，$1\\le c_i\\le k\\le n\\le 5000$，$0\\le m\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-2] 胜者组", "background": "进入胜者组就算胜利吗...\n\n至少人们都这样说。", "description": "小 H 的学校在 noip 结束后要决定踢出一些学生回去学文化课。\n\n具体的，学校一共有 $n$ 个同学，留下了最多 $m$ 个学习信息学的名额。\n\n学校里的同学组成了 $k$ 个小团体，其中第 $i$ 个同学属于第 $c_i$ 个小团体。\n\n你每次可以钦定两个处于同一小团体的学生学习文化课。若你让学生 $i,j(c_i=c_j)$ 去学习文化课，学生会产生 $a_i+a_j+x\\times|i-j|$ 的不满意度。这里 $x$ 是输入一开始给定的常数。\n\n你需要让学生的不满意度最小化，或报告无法留下不多于 $m$ 个学习信息学的学生。", "inputFormat": "第一行四个正整数 $n,m,k,x$。\n\n接下来两行每行 $n$ 个整数分别表示 $a_i,c_i$。", "outputFormat": "一行一个整数表示最小的不满意度。或输出 `Impossible` 表示无解。", "hint": "样例解释：\n\n分别钦定 $(1,2)$ 和 $(4,6)$ 学习文化课，不满意度为 $(2+5+3\\times|1-2|)+(2+7+3\\times|4-6|)=25$。\n\n需要注意的是，一个同学不可以被钦定多次。\n\n**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(15pts)：}n\\le20$。\n- $\\texttt{Subtask 2(15pts)：}x=0$。\n- $\\texttt{Subtask 3(15pts)：}k=1$。\n- $\\texttt{Subtask 4(20pts)：}n\\le 300$。\n- $\\texttt{Subtask 5(35pts)：}$无特殊性质。\n\n对于全部的数据，$0\\le a_i,x\\le10^5$，$1\\le c_i\\le k\\le n\\le 5000$，$0\\le m\\le n$。", "locale": "zh-CN"}}}
{"pid": "P10157", "type": "P", "difficulty": 6, "samples": [["2\n2\n3", "2\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "二分", "位运算", "Ad-hoc", "分类讨论"], "title": "[LSOT-2] Tree and Xor", "background": "", "description": "给定 $n$，你需要构造一棵 $n$ 个点的以 $1$ 为根的有根树，满足 $\\bigoplus\\limits_{i=1}^ndegree(i)=0$ 且 $fa_2 \\sim fa_n$ 的字典序最小。其中，$\\oplus$ 表示异或运算。\n\n其中 $degree(i)$ 表示与点 $i$ 相连的点数，$fa_i$ 表示点 $i$ 的父节点且 $fa_i < i$。\n\n你需要输出 $\\sum\\limits_{i=2}^ni \\times fa_i$，若无解则输出 $-1$。", "inputFormat": "第一行，一个正整数 $T$，表示询问数量。\n\n接下来每 $T$ 行每行一个正整数 $n$ 表示一次询问。", "outputFormat": "一共 $T$ 行，每行一个整数表示答案除 $998244353$ 的余数。", "hint": "**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(5 pts)：}n \\leq 7$。\n- $\\texttt{Subtask 2(10 pts)：} n \\leq 20$。\n- $\\texttt{Subtask 3(20 pts)：}\\sum n \\leq 2000$。\n- $\\texttt{Subtask 4(15 pts)：}n = 2^k-1$，其中 $k$ 是自然数。\n- $\\texttt{Subtask 5(50 pts)：}$无特殊限制。\n\n对于所有数据，$1\\le T\\le 10^6$，$2 \\leq n \\leq 10^{9}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-2] Tree and Xor", "background": "", "description": "给定 $n$，你需要构造一棵 $n$ 个点的以 $1$ 为根的有根树，满足 $\\bigoplus\\limits_{i=1}^ndegree(i)=0$ 且 $fa_2 \\sim fa_n$ 的字典序最小。其中，$\\oplus$ 表示异或运算。\n\n其中 $degree(i)$ 表示与点 $i$ 相连的点数，$fa_i$ 表示点 $i$ 的父节点且 $fa_i < i$。\n\n你需要输出 $\\sum\\limits_{i=2}^ni \\times fa_i$，若无解则输出 $-1$。", "inputFormat": "第一行，一个正整数 $T$，表示询问数量。\n\n接下来每 $T$ 行每行一个正整数 $n$ 表示一次询问。", "outputFormat": "一共 $T$ 行，每行一个整数表示答案除 $998244353$ 的余数。", "hint": "**「本题采用捆绑测试」**\n\n- $\\texttt{Subtask 1(5 pts)：}n \\leq 7$。\n- $\\texttt{Subtask 2(10 pts)：} n \\leq 20$。\n- $\\texttt{Subtask 3(20 pts)：}\\sum n \\leq 2000$。\n- $\\texttt{Subtask 4(15 pts)：}n = 2^k-1$，其中 $k$ 是自然数。\n- $\\texttt{Subtask 5(50 pts)：}$无特殊限制。\n\n对于所有数据，$1\\le T\\le 10^6$，$2 \\leq n \\leq 10^{9}$。", "locale": "zh-CN"}}}
{"pid": "P10158", "type": "P", "difficulty": 6, "samples": [["5 2 6 1000000007\n1 1 2 3 5\n0 0 0 0 0\n1 1 2 3\n1 2 2 3\n2 1 1 5 2\n4 1 2 2 3\n1 1 1 4\n1 2 1 4", "3\n0\nwhere is self?\n4\n3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "哈希 hashing"], "title": "[LSOT-2] 笼中鸟", "background": "> 「笼中鸟，笼中鸟」\n>\n> 「笼中有只小小鸟」\n>\n> 「何时才能出囚笼」\n>\n> 「黎明时分的夜晚」\n>\n> 「仙鹤灵龟都滑倒」\n>\n> 「猜猜身后是何人」", "description": "榎本在 SPHIA 的小黑屋内实验神秘转移装置。\n\n实验体是 $m$ 个长度为 $n$ 的数列，他要在这些数列上验证转移装置是否能够正常运行。\n\n这个转移装置的主要功能是将两个序列的部分交换，也就是说他会选择 $(i,j),[l,r]$，然后将序列 $i$ 的 $[l,r]$ 与序列 $j$ 的 $[l,r]$ 交换。\n\n当然了，为了验证是否成功交换，他会查询某个序列的某个区间的和与预期值是否相同，并且为了避免偶然现象，他会给某个序列的某个区间加上一个值。\n\n榎本知道 self 非常喜欢斐波那契数列，于是为了更好的困住 self，他还加了一个功能，就是判断数列 $f$ 的某个区间是不是满足 $f_i\\equiv\\sum_{j=1}^kf_{i-j}\\pmod p$ 的特殊数列。\n\n形式化题面：\n\n1. 给定 $x,l,r$，求 $\\sum_{i=l}^ra_{x,i}\\bmod p$。\n\n2. 给定 $x,l,r,f$，询问命题 $\\forall i\\in[l+f,r],a_{x,i}\\equiv \\sum_{j=1}^fa_{x,i-j}\\pmod p$ 是否是真命题。\n3. 给定 $x,l,r,k$，$\\forall i\\in[l,r],a_{x,i}← a_{x,i}+k$。\n4. 给定 $x,y,l,r$，$\\forall i\\in[l,r],\\text{swap}(a_{x,i},a_{y,i})$。\n", "inputFormat": "第一行四个正整数 $n,m,q,p$，$q$ 代表榎本的操作数。\n\n接下来 $m$ 行每行 $n$ 个整数，第 $i$ 行的第 $j$ 个数代表 $a_{i,j}$。\n\n接下来 $q$ 行，每行四个或五个整数。\n\n若输入为 `1 x l r` 则代表对区间 $[l,r]$ 进行一次 $1$ 操作，若输入为 `2 x l r f` 则代表对区间 $[l,r]$ 进行一次 $2$ 操作，若输入为 `3 x l r k` 则代表对区间 $[l,r]$ 进行一次 $3$ 操作，若输入为 `4 x y l r ` 则代表对区间 $[l,r]$ 进行一次 $4$ 操作。", "outputFormat": "对于每个 $1$ 操作，一行一个正整数表示答案。\n\n对于每个 $2$ 操作，如果是真命题输出 `where is self?`，否则输出 `infinity loop!`。", "hint": "**「本题采用捆绑测试」**\n\n$\\texttt{Subtask 1(20pts)：}n,q\\le100$。\n\n$\\texttt{Subtask 2(25pts)：}n,q\\le10^5$。\n\n$\\texttt{Subtask 3(25pts)：}$不存在 $2$ 操作。\n\n$\\texttt{Subtask 4(30pts)：}$无特殊性质。\n\n对于所有数据，$1\\le n,q\\le5\\times10^5$，$1\\le m\\le10$，$0\\le a_{i,j},k< p$，$1\\le l\\le r\\le n$，$1\\le f\\le n$，$1\\le x,y\\le m$，$x\\not=y$。保证 $p$ 是 $10^{9}$ 到 $2\\times 10^9$ 中随机生成的质数。\n\n\n\n------------\n2024/2/13 本题赛后添加两组 hack 数据（Subtask #5）", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LSOT-2] 笼中鸟", "background": "> 「笼中鸟，笼中鸟」\n>\n> 「笼中有只小小鸟」\n>\n> 「何时才能出囚笼」\n>\n> 「黎明时分的夜晚」\n>\n> 「仙鹤灵龟都滑倒」\n>\n> 「猜猜身后是何人」", "description": "榎本在 SPHIA 的小黑屋内实验神秘转移装置。\n\n实验体是 $m$ 个长度为 $n$ 的数列，他要在这些数列上验证转移装置是否能够正常运行。\n\n这个转移装置的主要功能是将两个序列的部分交换，也就是说他会选择 $(i,j),[l,r]$，然后将序列 $i$ 的 $[l,r]$ 与序列 $j$ 的 $[l,r]$ 交换。\n\n当然了，为了验证是否成功交换，他会查询某个序列的某个区间的和与预期值是否相同，并且为了避免偶然现象，他会给某个序列的某个区间加上一个值。\n\n榎本知道 self 非常喜欢斐波那契数列，于是为了更好的困住 self，他还加了一个功能，就是判断数列 $f$ 的某个区间是不是满足 $f_i\\equiv\\sum_{j=1}^kf_{i-j}\\pmod p$ 的特殊数列。\n\n形式化题面：\n\n1. 给定 $x,l,r$，求 $\\sum_{i=l}^ra_{x,i}\\bmod p$。\n\n2. 给定 $x,l,r,f$，询问命题 $\\forall i\\in[l+f,r],a_{x,i}\\equiv \\sum_{j=1}^fa_{x,i-j}\\pmod p$ 是否是真命题。\n3. 给定 $x,l,r,k$，$\\forall i\\in[l,r],a_{x,i}← a_{x,i}+k$。\n4. 给定 $x,y,l,r$，$\\forall i\\in[l,r],\\text{swap}(a_{x,i},a_{y,i})$。\n", "inputFormat": "第一行四个正整数 $n,m,q,p$，$q$ 代表榎本的操作数。\n\n接下来 $m$ 行每行 $n$ 个整数，第 $i$ 行的第 $j$ 个数代表 $a_{i,j}$。\n\n接下来 $q$ 行，每行四个或五个整数。\n\n若输入为 `1 x l r` 则代表对区间 $[l,r]$ 进行一次 $1$ 操作，若输入为 `2 x l r f` 则代表对区间 $[l,r]$ 进行一次 $2$ 操作，若输入为 `3 x l r k` 则代表对区间 $[l,r]$ 进行一次 $3$ 操作，若输入为 `4 x y l r ` 则代表对区间 $[l,r]$ 进行一次 $4$ 操作。", "outputFormat": "对于每个 $1$ 操作，一行一个正整数表示答案。\n\n对于每个 $2$ 操作，如果是真命题输出 `where is self?`，否则输出 `infinity loop!`。", "hint": "**「本题采用捆绑测试」**\n\n$\\texttt{Subtask 1(20pts)：}n,q\\le100$。\n\n$\\texttt{Subtask 2(25pts)：}n,q\\le10^5$。\n\n$\\texttt{Subtask 3(25pts)：}$不存在 $2$ 操作。\n\n$\\texttt{Subtask 4(30pts)：}$无特殊性质。\n\n对于所有数据，$1\\le n,q\\le5\\times10^5$，$1\\le m\\le10$，$0\\le a_{i,j},k< p$，$1\\le l\\le r\\le n$，$1\\le f\\le n$，$1\\le x,y\\le m$，$x\\not=y$。保证 $p$ 是 $10^{9}$ 到 $2\\times 10^9$ 中随机生成的质数。\n\n\n\n------------\n2024/2/13 本题赛后添加两组 hack 数据（Subtask #5）", "locale": "zh-CN"}}}
{"pid": "P10159", "type": "P", "difficulty": 6, "samples": [["1\n5\n\n2\n\n3\n\n1\n\n4\n\n", "\n\n? 1 1 1\n\n? 2 2 1\n\n? 3 3 1\n\n? 4 4 1\n\n! 2 3 1 4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "交互题", "Special Judge", "剪枝", "构造", "洛谷月赛"], "title": "[DTCPC 2024] The last permutation", "background": "**本题题目背景不均为虚构，不影射任何人**。\n\n小 L 是小 L 初中时的白月光。\n\n有一天，小 L 在朋友圈说要玩农，小 L 火速研究怎么下载王者。\n\n第二天，小 L 在朋友圈说要玩吃鸡，小 L 火速研究怎么下载 pubg。\n\n但小 L 很快就和小 L 分手了，小 L 最后的情思化作一个排列。遗憾的是，小 L 并不情愿告诉大家。\n\n不过在你的不断追问下，小 L 还是同意回答几个关于排列的问题。", "description": "现存在一个长度为 $n$ 的隐藏排列 $p$。你可以进行如下询问若干次：选择三元组 $(l,r,k)$，满足 $1\\leq l\\leq r\\leq n$，$1\\leq k\\leq r - l + 1$，交互库会返回下标在 $[l,r]$ 内的第 $k$ 大值。\n\n对于一次询问操作，其代价为 $\\frac{1}{r-l+1}$，你需要在不超过 $11.8$ 的代价内得出排列。\n\n交互库不自适应，也就是说，你所需得到的排列在交互开始前就已经确定。", "inputFormat": "输入第一行是一个正整数 $t$ ($1 \\le t \\le 5$) 表示测试组数。\n\n对于每组数据，输入一行 $n$ ($1 \\le n \\le 1000$) 表示排列 $p$ 的长度。\n\n当你已经得到排列，你应当输出形如 `! p1 p2 ... pn` 表示你得出的排列。\n\n本题使用 IO 交互模式。\n\n### 交互格式\n- `? l r k`，询问下标在 $[l,r]$ 内的第 $k$ 大值。\n\n- `! p1 p2 p3 ... pn`，输出答案。\n\n请注意：在每组数据中，请保证询问操作的代价总和不超过 $11.8$。\n\n需要注意的是，在每一次操作后，需要调用以下函数刷新缓存：\n\n- 对于 C/C++：`fflush(stdout);`\n- 对于 C++：`std::cout << std::flush;`\n- 对于 Java：`System.out.flush();`\n- 对于 Python：`stdout.flush();`\n- 对于 Pascal：`flush(output);`\n\n对于其他语言，请自行查阅对应语言的帮助文档。", "outputFormat": "见「交互格式」。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] The last permutation", "background": "**本题题目背景不均为虚构，不影射任何人**。\n\n小 L 是小 L 初中时的白月光。\n\n有一天，小 L 在朋友圈说要玩农，小 L 火速研究怎么下载王者。\n\n第二天，小 L 在朋友圈说要玩吃鸡，小 L 火速研究怎么下载 pubg。\n\n但小 L 很快就和小 L 分手了，小 L 最后的情思化作一个排列。遗憾的是，小 L 并不情愿告诉大家。\n\n不过在你的不断追问下，小 L 还是同意回答几个关于排列的问题。", "description": "现存在一个长度为 $n$ 的隐藏排列 $p$。你可以进行如下询问若干次：选择三元组 $(l,r,k)$，满足 $1\\leq l\\leq r\\leq n$，$1\\leq k\\leq r - l + 1$，交互库会返回下标在 $[l,r]$ 内的第 $k$ 大值。\n\n对于一次询问操作，其代价为 $\\frac{1}{r-l+1}$，你需要在不超过 $11.8$ 的代价内得出排列。\n\n交互库不自适应，也就是说，你所需得到的排列在交互开始前就已经确定。", "inputFormat": "输入第一行是一个正整数 $t$ ($1 \\le t \\le 5$) 表示测试组数。\n\n对于每组数据，输入一行 $n$ ($1 \\le n \\le 1000$) 表示排列 $p$ 的长度。\n\n当你已经得到排列，你应当输出形如 `! p1 p2 ... pn` 表示你得出的排列。\n\n本题使用 IO 交互模式。\n\n### 交互格式\n- `? l r k`，询问下标在 $[l,r]$ 内的第 $k$ 大值。\n\n- `! p1 p2 p3 ... pn`，输出答案。\n\n请注意：在每组数据中，请保证询问操作的代价总和不超过 $11.8$。\n\n需要注意的是，在每一次操作后，需要调用以下函数刷新缓存：\n\n- 对于 C/C++：`fflush(stdout);`\n- 对于 C++：`std::cout << std::flush;`\n- 对于 Java：`System.out.flush();`\n- 对于 Python：`stdout.flush();`\n- 对于 Pascal：`flush(output);`\n\n对于其他语言，请自行查阅对应语言的帮助文档。", "outputFormat": "见「交互格式」。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10160", "type": "P", "difficulty": 4, "samples": [["1010011", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "洛谷月赛"], "title": "[DTCPC 2024] Ultra", "background": "Tony2 喜欢玩某二字游戏，这一天他在小 C 面前展示他的 $\\text{Ultra}$。\n\n但是小 C 不会 $\\text{Ultra}$，所以他跑去图图酱一去了。\n\n~~然后图图失败了~~\n\n于是小 C 趁 Tony2 不在的时候偷偷地把他的跳跃键和下冲键交换了（", "description": "Tony2 的操作可以看作下冲和跳跃的组合。\n\n称一个 $\\text{Ultra}$ 为一段连续的操作，以下冲开头，然后跳跃和下冲交替，并以下冲结束。由于是 $\\text{Ultra}$，所以至少要有一次跳跃。\n\n小 C 每次可以将一个 $\\text{Ultra}$ 变成 $\\text{uLTRA}$，也就是将这个 $\\text{Ultra}$ 的每个下冲变成跳跃，将每个跳跃变成下冲。\n\n小 C 不喜欢 $\\text{Ultra}$，所以想要使得下冲次数尽量少。\n\n**形式化题意**\n\n给你一个 $01$ 序列，你可以进行如下操作若干次（或零次）:\n\n- 将序列中形如 $101\\cdots01$ 的一个子串（即 $1(01)^k$，$k\\ge 1$）替换成**等长**的 $010\\cdots10$（即 $0(10)^k$）。\n\n你要操作使得 $1$ 的个数尽可能少，输出最少的 $1$ 的个数。", "inputFormat": "一行一个长度为 $n$（$n\\le 10^6$） 的字符串表示这个 $01$ 序列。", "outputFormat": "输出一个数表示最少的 $1$ 的个数。", "hint": "样例 $1$ 解释：选中该串的前三个字符 $101$，对其操作后该串变为 $0100011$，仅包含 $3$ 个 $1$。容易证明这是最优的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] Ultra", "background": "Tony2 喜欢玩某二字游戏，这一天他在小 C 面前展示他的 $\\text{Ultra}$。\n\n但是小 C 不会 $\\text{Ultra}$，所以他跑去图图酱一去了。\n\n~~然后图图失败了~~\n\n于是小 C 趁 Tony2 不在的时候偷偷地把他的跳跃键和下冲键交换了（", "description": "Tony2 的操作可以看作下冲和跳跃的组合。\n\n称一个 $\\text{Ultra}$ 为一段连续的操作，以下冲开头，然后跳跃和下冲交替，并以下冲结束。由于是 $\\text{Ultra}$，所以至少要有一次跳跃。\n\n小 C 每次可以将一个 $\\text{Ultra}$ 变成 $\\text{uLTRA}$，也就是将这个 $\\text{Ultra}$ 的每个下冲变成跳跃，将每个跳跃变成下冲。\n\n小 C 不喜欢 $\\text{Ultra}$，所以想要使得下冲次数尽量少。\n\n**形式化题意**\n\n给你一个 $01$ 序列，你可以进行如下操作若干次（或零次）:\n\n- 将序列中形如 $101\\cdots01$ 的一个子串（即 $1(01)^k$，$k\\ge 1$）替换成**等长**的 $010\\cdots10$（即 $0(10)^k$）。\n\n你要操作使得 $1$ 的个数尽可能少，输出最少的 $1$ 的个数。", "inputFormat": "一行一个长度为 $n$（$n\\le 10^6$） 的字符串表示这个 $01$ 序列。", "outputFormat": "输出一个数表示最少的 $1$ 的个数。", "hint": "样例 $1$ 解释：选中该串的前三个字符 $101$，对其操作后该串变为 $0100011$，仅包含 $3$ 个 $1$。容易证明这是最优的。", "locale": "zh-CN"}}}
{"pid": "P10161", "type": "P", "difficulty": 5, "samples": [["3\n5 2\n5 3\n5 4\n", "(())(\n()()(\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "背包 DP", "组合数学", "构造", "洛谷月赛", "线性 DP"], "title": "[DTCPC 2024] 小方的疑惑 10", "background": "小方一直有很多疑惑。", "description": "小 C 在几年前的生日那天收到了一个礼物：一个长度为 $n$ 的只包含 $\\text{(}$ 和 $\\text{)}$ 的字符串，其中恰好有 $k$ 个子串为合法的括号序列。\n\n由于小方很疑惑这个礼物长什么样，所以你要构造一个这样的字符串，或者输出 $-1$ 表示无解。\n\n合法的括号序列满足以下条件：\n\n- $\\text{()}$ 是合法的括号序列。\n- 若 $\\text{A}$ 和 $\\text{B}$ 是合法的括号序列，则 $\\text{(A)}$ 和 $\\text{AB}$ 是合法的括号序列。\n- 其它序列均不是合法的括号序列。\n\n小方有很多疑惑，所以他会询问你 $T$ 次。", "inputFormat": "第一行一个整数 $T$ 表示询问次数。\n\n接下来 $T$ 行，每行两个整数 $n$ 和 $k$（$1\\le n,k \\le 10^5$，$\\sum n\\le 10^6$）。\n\n**本题输入输出量较大，请使用较为快速的输入输出方式。**", "outputFormat": "对于每次询问，如果有解，输出一行一个长度为 $n$ 的字符串，否则输出 $-1$。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 小方的疑惑 10", "background": "小方一直有很多疑惑。", "description": "小 C 在几年前的生日那天收到了一个礼物：一个长度为 $n$ 的只包含 $\\text{(}$ 和 $\\text{)}$ 的字符串，其中恰好有 $k$ 个子串为合法的括号序列。\n\n由于小方很疑惑这个礼物长什么样，所以你要构造一个这样的字符串，或者输出 $-1$ 表示无解。\n\n合法的括号序列满足以下条件：\n\n- $\\text{()}$ 是合法的括号序列。\n- 若 $\\text{A}$ 和 $\\text{B}$ 是合法的括号序列，则 $\\text{(A)}$ 和 $\\text{AB}$ 是合法的括号序列。\n- 其它序列均不是合法的括号序列。\n\n小方有很多疑惑，所以他会询问你 $T$ 次。", "inputFormat": "第一行一个整数 $T$ 表示询问次数。\n\n接下来 $T$ 行，每行两个整数 $n$ 和 $k$（$1\\le n,k \\le 10^5$，$\\sum n\\le 10^6$）。\n\n**本题输入输出量较大，请使用较为快速的输入输出方式。**", "outputFormat": "对于每次询问，如果有解，输出一行一个长度为 $n$ 的字符串，否则输出 $-1$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10162", "type": "P", "difficulty": 5, "samples": [["5\n1 3 5 2 3\n", "21"], ["4\n4 6 3 3", "12"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2024", "分治", "洛谷月赛", "均摊分析"], "title": "[DTCPC 2024] 序列", "background": "", "description": "定义一个长度为 $n$ 的序列 $\\{p_n\\}$ 的权值 $f(\\{p_n\\})$ 为 $\\max\\limits_{i=1}^n\\{p_i-\\max\\{p_{i-1},p_{i+1}\\}\\}$，特别的，定义 $p_0=p_{n+1}=-\\inf$。\n\n求 $\\sum\\limits_{l=1}^n \\sum\\limits_{r=l+1}^n f(\\{a_l,a_{l+1},\\dots,a_r\\})$。\n\n答案对 $2^{32}$ 取模。", "inputFormat": "第一行一个正整数 $n$（$1 \\le n \\le 10^6$）。\n\n第二行 $n$ 个整数 $a_i$（$1 \\le a_i \\le 10^9$）。\n", "outputFormat": "一行一个数表示答案。\n\n答案对 $2^{32}$ 取模。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 序列", "background": "", "description": "定义一个长度为 $n$ 的序列 $\\{p_n\\}$ 的权值 $f(\\{p_n\\})$ 为 $\\max\\limits_{i=1}^n\\{p_i-\\max\\{p_{i-1},p_{i+1}\\}\\}$，特别的，定义 $p_0=p_{n+1}=-\\inf$。\n\n求 $\\sum\\limits_{l=1}^n \\sum\\limits_{r=l+1}^n f(\\{a_l,a_{l+1},\\dots,a_r\\})$。\n\n答案对 $2^{32}$ 取模。", "inputFormat": "第一行一个正整数 $n$（$1 \\le n \\le 10^6$）。\n\n第二行 $n$ 个整数 $a_i$（$1 \\le a_i \\le 10^9$）。\n", "outputFormat": "一行一个数表示答案。\n\n答案对 $2^{32}$ 取模。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10163", "type": "P", "difficulty": 5, "samples": [["3 2\n1 2\n1 3", "2 2\n1 4\n1 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "洛谷月赛"], "title": "[DTCPC 2024] 平方树", "background": "", "description": "给你一个森林，每条边有一个方向。\n\n你可以进行两种操作：\n\n- 新增一个点。\n\n- 将两个点之间连一条有向边。\n\n你要使得最后将所有有向边看成无向边后，图形成一棵树，且每个点的出度都是平方数。\n\n给出一种新增点数最少的方案。", "inputFormat": "第一行两个整数 $n,m$（$1\\le m \\lt n \\le 10^5$）表示这个森林的点数和边数。\n\n接下来 $m$ 行，每行两个数 $u,v$（$1\\le u,v\\le n$）表示一条 $u$ 连向 $v$ 的有向边。\n\n保证将每条边看作无向边后，这张图是森林。", "outputFormat": "第一行两个整数 $x,y$ 表示你的新增点数和连边数。\n\n接下来 $y$ 行，每行两个数 $u,v$ 表示新增一条 $u$ 连向 $v$ 的有向边，你要保证 $1\\le u,v\\le n+x$。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 平方树", "background": "", "description": "给你一个森林，每条边有一个方向。\n\n你可以进行两种操作：\n\n- 新增一个点。\n\n- 将两个点之间连一条有向边。\n\n你要使得最后将所有有向边看成无向边后，图形成一棵树，且每个点的出度都是平方数。\n\n给出一种新增点数最少的方案。", "inputFormat": "第一行两个整数 $n,m$（$1\\le m \\lt n \\le 10^5$）表示这个森林的点数和边数。\n\n接下来 $m$ 行，每行两个数 $u,v$（$1\\le u,v\\le n$）表示一条 $u$ 连向 $v$ 的有向边。\n\n保证将每条边看作无向边后，这张图是森林。", "outputFormat": "第一行两个整数 $x,y$ 表示你的新增点数和连边数。\n\n接下来 $y$ 行，每行两个数 $u,v$ 表示新增一条 $u$ 连向 $v$ 的有向边，你要保证 $1\\le u,v\\le n+x$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10164", "type": "P", "difficulty": 6, "samples": [["01101", "1"], ["01011", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["动态规划 DP", "2024", "前缀和", "洛谷月赛"], "title": "[DTCPC 2024] 戈布", "background": "", "description": "对于 $01$ 序列 $\\{a_n\\}$，找到最小的 $k$ 满足存在一组 $\\{(l_k,r_k)\\}$使得以下条件成立。\n\n- $\\forall i\\in[1,n]$，$a_i=1$ 当且仅当 $\\exist  j\\in[1,k]$，$i\\in[l_j,r_j]$。\n\n可以证明满足条件的 $\\{(l_k,r_k)\\}$ 仅有一个。\n\n一个 $01$ 序列 $\\{a_n\\}$ 是好的当且仅当 $\\forall i\\in[1,k)$，$r_i-l_i<r_{i+1}-l_{i+1}$。\n\n简单来说，一个 $01$ 序列是好的当且仅当从左到右形成的极长 $1$ 段长度严格递增。\n\n给定序列 $\\{a_n\\}$，你可以进行如下操作若干次（或不进行操作）：\n\n- 选择 $i,j(i\\ne j)$，交换 $a_i,a_j$。\n\n试求最小的操作次数使得 $\\{a_n\\}$ 变成一个好的序列。", "inputFormat": "一行一个长为 $n$（$n\\leq 800$） 的 $01$ 序列 $\\{a_n\\}$。", "outputFormat": "一行一个数字，表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 戈布", "background": "", "description": "对于 $01$ 序列 $\\{a_n\\}$，找到最小的 $k$ 满足存在一组 $\\{(l_k,r_k)\\}$使得以下条件成立。\n\n- $\\forall i\\in[1,n]$，$a_i=1$ 当且仅当 $\\exist  j\\in[1,k]$，$i\\in[l_j,r_j]$。\n\n可以证明满足条件的 $\\{(l_k,r_k)\\}$ 仅有一个。\n\n一个 $01$ 序列 $\\{a_n\\}$ 是好的当且仅当 $\\forall i\\in[1,k)$，$r_i-l_i<r_{i+1}-l_{i+1}$。\n\n简单来说，一个 $01$ 序列是好的当且仅当从左到右形成的极长 $1$ 段长度严格递增。\n\n给定序列 $\\{a_n\\}$，你可以进行如下操作若干次（或不进行操作）：\n\n- 选择 $i,j(i\\ne j)$，交换 $a_i,a_j$。\n\n试求最小的操作次数使得 $\\{a_n\\}$ 变成一个好的序列。", "inputFormat": "一行一个长为 $n$（$n\\leq 800$） 的 $01$ 序列 $\\{a_n\\}$。", "outputFormat": "一行一个数字，表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10165", "type": "P", "difficulty": 7, "samples": [["5\n1 2 1 2\n1 3 2 1\n1 4 3 3\n1 5 4 4\n", "9"], ["7\n1 2 3 4\n2 3 6 2\n2 4 1 3\n2 5 4 6\n3 6 2 1\n5 7 5 5", "44"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "洛谷月赛"], "title": "[DTCPC 2024] 人赢的跳棋", "background": "小 C 是人赢。\n\n每周三晚上，小 T 晚上在吃猪脚饭，小 C 晚上和妹子在食堂共进晚餐。\n\n每周五晚上，小 T 启动废墟图书馆，小 C 在和妹子聊天。\n\n今天小 T 在睡觉，而小 C 在和妹子玩人赢的跳棋。\n", "description": "给一棵 $n$ 个点的树，边有边权，边权为三元组。第 $i$ 条边的三元组 $e$ 为 $(e_{i,1},e_{i,2},e_{i,3})$。\n\n设函数 $\\operatorname{win}(x,y)$：\n- 若 $x_2<y_2$ 且 $x_3<y_3$ 则 $\\operatorname{win}(x,y)=x_1$。\n- 若 $x_2>y_2$ 且 $x_3>y_3$ 则  $\\operatorname{win}(x,y)=y_1$ \n- 否则 $\\operatorname{win}(x,y)=0$。\n\n其中 $x=(x_1,x_2,x_3),y=(y_1,y_2,y_3)$。\n\n显然 $\\operatorname{win}$ 函数满足交换律。\n\n设一个三元组序列 $\\{a_n\\}$ 的权值为 $\\max_{i=1}^{n-1} \\operatorname{win}(a_i,a_{i+1})$，特别的，$n=1$ 时权值为 $0$。\n\n设一条路径的权值为经过的所有边的权值按顺序组成的序列的权值。\n\n求树的所有无向路径的权值和。", "inputFormat": "第一行一个正整数 $n$（$1 \\le n\\leq 3\\times 10^5$） 表示树的节点数。\n\n之后 $n-1$ 行每行四个整数表示 $u,v,e_{i,1},e_{i,2}$，其中有 $e_{i,3}=i$。\n\n保证 $\\{e_{i,1}\\}$ 互不相同，$\\{e_{i,2}\\}$ 互不相同，值域都为 $[1,n]$。", "outputFormat": "一行一个整数表示答案。", "hint": "2025/10/31 增加 hack 数据一组", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 人赢的跳棋", "background": "小 C 是人赢。\n\n每周三晚上，小 T 晚上在吃猪脚饭，小 C 晚上和妹子在食堂共进晚餐。\n\n每周五晚上，小 T 启动废墟图书馆，小 C 在和妹子聊天。\n\n今天小 T 在睡觉，而小 C 在和妹子玩人赢的跳棋。\n", "description": "给一棵 $n$ 个点的树，边有边权，边权为三元组。第 $i$ 条边的三元组 $e$ 为 $(e_{i,1},e_{i,2},e_{i,3})$。\n\n设函数 $\\operatorname{win}(x,y)$：\n- 若 $x_2<y_2$ 且 $x_3<y_3$ 则 $\\operatorname{win}(x,y)=x_1$。\n- 若 $x_2>y_2$ 且 $x_3>y_3$ 则  $\\operatorname{win}(x,y)=y_1$ \n- 否则 $\\operatorname{win}(x,y)=0$。\n\n其中 $x=(x_1,x_2,x_3),y=(y_1,y_2,y_3)$。\n\n显然 $\\operatorname{win}$ 函数满足交换律。\n\n设一个三元组序列 $\\{a_n\\}$ 的权值为 $\\max_{i=1}^{n-1} \\operatorname{win}(a_i,a_{i+1})$，特别的，$n=1$ 时权值为 $0$。\n\n设一条路径的权值为经过的所有边的权值按顺序组成的序列的权值。\n\n求树的所有无向路径的权值和。", "inputFormat": "第一行一个正整数 $n$（$1 \\le n\\leq 3\\times 10^5$） 表示树的节点数。\n\n之后 $n-1$ 行每行四个整数表示 $u,v,e_{i,1},e_{i,2}$，其中有 $e_{i,3}=i$。\n\n保证 $\\{e_{i,1}\\}$ 互不相同，$\\{e_{i,2}\\}$ 互不相同，值域都为 $[1,n]$。", "outputFormat": "一行一个整数表示答案。", "hint": "2025/10/31 增加 hack 数据一组", "locale": "zh-CN"}}}
{"pid": "P10166", "type": "P", "difficulty": 3, "samples": [["5 5\n1 2 3 4 5 \n1 2\n2 3\n3 4\n1 5\n5 4 ", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2024", "拓扑排序", "洛谷月赛"], "title": "[DTCPC 2024] 环", "background": "环", "description": "给定无重边无自环的有向图 $G$ 和序列 $\\{a_n\\}$，每次可以花费 $a_i+a_j$ 的代价加上一条 $i\\to j$ 的边，试花费最小代价使得可以找到 $k\\geq 2$ 个不同的点 $p_1,p_2,\\dots,p_k$，满足 $\\forall i\\in [1,k]$，都有一条 $p_i\\to p_{i\\bmod k+1}$ 的边。", "inputFormat": "第一行两个整数 $n,m$（$2\\le n\\le 5 \\times 10^5$，$n-1 \\le m \\le 10^6$），表示图的点数和边数。\n\n第二行输入 $n$ 个整数，表示序列 $\\{a_n\\}$（$1\\le a_i\\le 10^9$）。\n\n接下来 $m$ 行，每行两个整数 $u,v$（$1\\le u,v\\le n$），表示存在一条有向边 $u\\to v$。", "outputFormat": "一行一个整数表示最小代价。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 环", "background": "环", "description": "给定无重边无自环的有向图 $G$ 和序列 $\\{a_n\\}$，每次可以花费 $a_i+a_j$ 的代价加上一条 $i\\to j$ 的边，试花费最小代价使得可以找到 $k\\geq 2$ 个不同的点 $p_1,p_2,\\dots,p_k$，满足 $\\forall i\\in [1,k]$，都有一条 $p_i\\to p_{i\\bmod k+1}$ 的边。", "inputFormat": "第一行两个整数 $n,m$（$2\\le n\\le 5 \\times 10^5$，$n-1 \\le m \\le 10^6$），表示图的点数和边数。\n\n第二行输入 $n$ 个整数，表示序列 $\\{a_n\\}$（$1\\le a_i\\le 10^9$）。\n\n接下来 $m$ 行，每行两个整数 $u,v$（$1\\le u,v\\le n$），表示存在一条有向边 $u\\to v$。", "outputFormat": "一行一个整数表示最小代价。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10167", "type": "P", "difficulty": 6, "samples": [["123?13?23\n1 10", "507086689"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "洛谷月赛", "拉格朗日插值法"], "title": "[DTCPC 2024] 小方学乘法", "background": "小方上数学课，开始学乘法，但是他在课上睡着了。", "description": "\n他梦见了一个数学公式，只包含数字和乘号，梦境是迷糊的，所以他可能会把乘号看成字母 $x$。\n\n他冥冥之中记得这个 $x$ 的值，并且他认为字母可以看成数字，因此他在将字母 $x$ 都替换为了数字的情况下算出了这个表达式的值。\n\n然后他被教练抓到睡觉了。\n\n在被 gank 之前，他想回忆起梦中算出的值。\n\n但是小方太困了，所以他决定求出所有情况下的值，也就是将每个**乘号**都替换或者不替换为字母 $x$ 所代表的值后，对所有可能情况求和。\n\n然而小方连 $x$ 都忘记了，只记得它在某个范围 $[L,R]$ 内，所以他要对每个 $x$ 求出上面那个和的和。\n\n小方刚学乘法，算不清太大的数字，所以他想让你求出答案 $\\bmod {10^9+7}$ 的结果。\n\n**形式化题意**\n\n给你一个只含有数字 $1 \\sim 9$ 和 `?` 的字符串 $s$，保证没有两个相邻的 `?`，且字符串的第一个字符和最后一个字符都不是 `?`。\n\n现在每个 `?` 可以换成 $x$ 或者 $\\times$，其中 $x$ 是一个给定的字符串拼接变量。\n\n比如 `12x45` 当 $x=33$ 时替换结果为 `123345`。\n\n记 $x=k$ 时所有 `?` 替换方案下表达式的权值和为 $f(k)$。\n\n求 $\\sum_{i=L}^R{f(i)} \\bmod {10^9 + 7}$。\n\n\n", "inputFormat": "第一行一个长度为 $n$（$1 \\le n \\le 2000$） 字符串 $S$，表示算式。\n\n第二行两个正整数 $L,R$（$1 \\le L \\le R < 10^{18}$）。", "outputFormat": "一行一个正整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 小方学乘法", "background": "小方上数学课，开始学乘法，但是他在课上睡着了。", "description": "\n他梦见了一个数学公式，只包含数字和乘号，梦境是迷糊的，所以他可能会把乘号看成字母 $x$。\n\n他冥冥之中记得这个 $x$ 的值，并且他认为字母可以看成数字，因此他在将字母 $x$ 都替换为了数字的情况下算出了这个表达式的值。\n\n然后他被教练抓到睡觉了。\n\n在被 gank 之前，他想回忆起梦中算出的值。\n\n但是小方太困了，所以他决定求出所有情况下的值，也就是将每个**乘号**都替换或者不替换为字母 $x$ 所代表的值后，对所有可能情况求和。\n\n然而小方连 $x$ 都忘记了，只记得它在某个范围 $[L,R]$ 内，所以他要对每个 $x$ 求出上面那个和的和。\n\n小方刚学乘法，算不清太大的数字，所以他想让你求出答案 $\\bmod {10^9+7}$ 的结果。\n\n**形式化题意**\n\n给你一个只含有数字 $1 \\sim 9$ 和 `?` 的字符串 $s$，保证没有两个相邻的 `?`，且字符串的第一个字符和最后一个字符都不是 `?`。\n\n现在每个 `?` 可以换成 $x$ 或者 $\\times$，其中 $x$ 是一个给定的字符串拼接变量。\n\n比如 `12x45` 当 $x=33$ 时替换结果为 `123345`。\n\n记 $x=k$ 时所有 `?` 替换方案下表达式的权值和为 $f(k)$。\n\n求 $\\sum_{i=L}^R{f(i)} \\bmod {10^9 + 7}$。\n\n\n", "inputFormat": "第一行一个长度为 $n$（$1 \\le n \\le 2000$） 字符串 $S$，表示算式。\n\n第二行两个正整数 $L,R$（$1 \\le L \\le R < 10^{18}$）。", "outputFormat": "一行一个正整数，表示答案对 $10^9+7$ 取模后的结果。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10168", "type": "P", "difficulty": 3, "samples": [["111100", "8\n2\n1 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "构造", "洛谷月赛"], "title": "[DTCPC 2024] 0=1=0", "background": "", "description": "给你一个只含 $0$ 和 $1$ 的字符串 $s$。\n\n每次你可以选择 $i\\in [1,n)$，并将 $s_i$ 和 $s_{i+1}$ 分别取反。\n\n定义 $1$ 取反结果为 $0$，$0$ 取反结果为 $1$。\n\n要求使得顺序对数量最大，即使得 $i\\lt j$ 且 $s_i\\lt s_j$ 的 $(i,j)$ 个数最大。\n\n输出方案。", "inputFormat": "一行一个字符串 $S$（$\\lvert S\\rvert\\leq 2\\times 10^5$）。", "outputFormat": "第一行输出一个数字，表示最大的顺序对个数。\n\n第二行输出一个数字 $x$，表示操作步数。\n\n接下来输出一行 $x$ 个数字，第 $i$ 个数字 $a_i$ 表示第 $i$ 步操作的是 $s_{a_i}$ 和 $s_{a_i+1}$ 。\n\n**你要保证操作步数不超过 $2\\times 10^5$ 步，但不必最小化操作步数。**", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 0=1=0", "background": "", "description": "给你一个只含 $0$ 和 $1$ 的字符串 $s$。\n\n每次你可以选择 $i\\in [1,n)$，并将 $s_i$ 和 $s_{i+1}$ 分别取反。\n\n定义 $1$ 取反结果为 $0$，$0$ 取反结果为 $1$。\n\n要求使得顺序对数量最大，即使得 $i\\lt j$ 且 $s_i\\lt s_j$ 的 $(i,j)$ 个数最大。\n\n输出方案。", "inputFormat": "一行一个字符串 $S$（$\\lvert S\\rvert\\leq 2\\times 10^5$）。", "outputFormat": "第一行输出一个数字，表示最大的顺序对个数。\n\n第二行输出一个数字 $x$，表示操作步数。\n\n接下来输出一行 $x$ 个数字，第 $i$ 个数字 $a_i$ 表示第 $i$ 步操作的是 $s_{a_i}$ 和 $s_{a_i+1}$ 。\n\n**你要保证操作步数不超过 $2\\times 10^5$ 步，但不必最小化操作步数。**", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10169", "type": "P", "difficulty": 6, "samples": [["3 0\n1 0 2", "5"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2024", "颜色段均摊（珂朵莉树 ODT）", "洛谷月赛", "单调栈"], "title": "[DTCPC 2024] mex,min,max", "background": "", "description": "给定序列 $\\{a_n\\}$ 和 $k$，求有多少子区间 $[l,r]$ 满足 $\\operatorname{mex}\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}+\\min\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}+k\\geq \\max\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}$。\n\n$\\operatorname{mex}$ 定义为集合内没有出现过的最小的**非负整数**。", "inputFormat": "第一行两个整数 $n,k$（$1\\leq n\\leq 5\\times 10^5,0\\leq k\\leq n$）。\n\n第二行 $n$ 个非负整数，第 $i$ 个表示 $a_i$（$0\\leq a_i\\leq n$）。", "outputFormat": "一行一个数，表示满足条件的子区间个数。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] mex,min,max", "background": "", "description": "给定序列 $\\{a_n\\}$ 和 $k$，求有多少子区间 $[l,r]$ 满足 $\\operatorname{mex}\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}+\\min\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}+k\\geq \\max\\{a_l,a_{l+1},\\dots,a_{r-1},a_r\\}$。\n\n$\\operatorname{mex}$ 定义为集合内没有出现过的最小的**非负整数**。", "inputFormat": "第一行两个整数 $n,k$（$1\\leq n\\leq 5\\times 10^5,0\\leq k\\leq n$）。\n\n第二行 $n$ 个非负整数，第 $i$ 个表示 $a_i$（$0\\leq a_i\\leq n$）。", "outputFormat": "一行一个数，表示满足条件的子区间个数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10170", "type": "P", "difficulty": 2, "samples": [["ababa", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "2024", "洛谷月赛"], "title": "[DTCPC 2024] 小方和小立方", "background": "小方不想变成小立方。", "description": "给你一个由小写字母组成的字符串，求有多少个区间 $[l,r]$，满足这个区间所表示的串是回文的，且每个字符的出现次数不超过 $2$。", "inputFormat": "一行一个字符串 $S$（$\\lvert S\\rvert\\leq 5\\times 10^4$）。", "outputFormat": "一行一个数，表示答案。", "hint": null, "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 小方和小立方", "background": "小方不想变成小立方。", "description": "给你一个由小写字母组成的字符串，求有多少个区间 $[l,r]$，满足这个区间所表示的串是回文的，且每个字符的出现次数不超过 $2$。", "inputFormat": "一行一个字符串 $S$（$\\lvert S\\rvert\\leq 5\\times 10^4$）。", "outputFormat": "一行一个数，表示答案。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P10171", "type": "P", "difficulty": 5, "samples": [["3 1 3\n11 7 6", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "数论", "快速傅里叶变换 FFT", "洛谷月赛"], "title": "[DTCPC 2024] 取模", "background": "", "description": "给定序列 $\\{a_n\\}$ 和 $[L,R]$，问有多少个 $k\\in [L,R]$ 满足 $a_i\\bmod k$ 互不相同。", "inputFormat": "第一行三个正整数 $n,L,R$（$n\\leq 5\\times 10^4,1\\leq L\\leq R\\leq 10^9$）。\n\n第二行 $n$ 个正整数，表示 $\\{a_n\\}$（$0 < a_i\\leq 4\\times10^5$）。", "outputFormat": "一行一个数，表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[DTCPC 2024] 取模", "background": "", "description": "给定序列 $\\{a_n\\}$ 和 $[L,R]$，问有多少个 $k\\in [L,R]$ 满足 $a_i\\bmod k$ 互不相同。", "inputFormat": "第一行三个正整数 $n,L,R$（$n\\leq 5\\times 10^4,1\\leq L\\leq R\\leq 10^9$）。\n\n第二行 $n$ 个正整数，表示 $\\{a_n\\}$（$0 < a_i\\leq 4\\times10^5$）。", "outputFormat": "一行一个数，表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10172", "type": "P", "difficulty": 4, "samples": [["2 2", "3\n1 2\n3 -1"], ["3 5", "12\n2 3 4 5 6\n1 -1 12 -1 7\n8 9 -1 11 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "Special Judge", "O2优化", "构造"], "title": "「OICon-02」Pick Stone", "background": "", "description": "小 S 有一个 $n\\times m$ 的棋盘。初始每个位置都有一个棋子。每次，小 S 可以取走一个周围（四连通）被取走棋子数不超过 $1$ 的棋子。求小 S 最多能取走多少棋子，并构造一种合法的取棋子方案。", "inputFormat": "一行，两个正整数 $n,m$，表示棋盘大小。", "outputFormat": "第一行一个正整数，表示最多能取走的棋子数 $ans$。\n\n接下来 $n$ 行，每行 $m$ 个 $-1\\sim ans$ 之间的整数。每个位置的数表示这个位置的棋子是第几个取走的。如果该位置的棋子没被取走，请输出 $-1$。", "hint": "### 样例解释\n\n对于样例 $1$，取出 $(1,1)$ 时周围有 $0$ 个已取出位置，取出 $(1,2),(2,1)$ 时周围有 $1$ 个已取出位置，故原构造符合要求。\n\n容易证明没有更优答案。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n=1$ | $20$ |\n| $2$ | $n=2$ | $30$ |\n| $3$ | $n=3$ | $50$ |\n\n对于 $100\\%$ 的数据：$\\bm{1\\leq n\\leq3}$，$1\\leq m\\leq10^5$。\n\n如果你答对了第一问最多能取走的棋子数而没有正确地构造，你将获得 $70\\%$ 的分值。一个子任务你的得分是所有测试点得分的最小值。注意，你仍需要按格式输出 $n\\times m$ 个数表示构造方案，我们推荐你全部输出 $-1$。\n\n保证 `checker.cpp` 在符合格式要求的输出下用时不超过 $0.5$ 秒。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「OICon-02」Pick Stone", "background": "", "description": "小 S 有一个 $n\\times m$ 的棋盘。初始每个位置都有一个棋子。每次，小 S 可以取走一个周围（四连通）被取走棋子数不超过 $1$ 的棋子。求小 S 最多能取走多少棋子，并构造一种合法的取棋子方案。", "inputFormat": "一行，两个正整数 $n,m$，表示棋盘大小。", "outputFormat": "第一行一个正整数，表示最多能取走的棋子数 $ans$。\n\n接下来 $n$ 行，每行 $m$ 个 $-1\\sim ans$ 之间的整数。每个位置的数表示这个位置的棋子是第几个取走的。如果该位置的棋子没被取走，请输出 $-1$。", "hint": "### 样例解释\n\n对于样例 $1$，取出 $(1,1)$ 时周围有 $0$ 个已取出位置，取出 $(1,2),(2,1)$ 时周围有 $1$ 个已取出位置，故原构造符合要求。\n\n容易证明没有更优答案。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n=1$ | $20$ |\n| $2$ | $n=2$ | $30$ |\n| $3$ | $n=3$ | $50$ |\n\n对于 $100\\%$ 的数据：$\\bm{1\\leq n\\leq3}$，$1\\leq m\\leq10^5$。\n\n如果你答对了第一问最多能取走的棋子数而没有正确地构造，你将获得 $70\\%$ 的分值。一个子任务你的得分是所有测试点得分的最小值。注意，你仍需要按格式输出 $n\\times m$ 个数表示构造方案，我们推荐你全部输出 $-1$。\n\n保证 `checker.cpp` 在符合格式要求的输出下用时不超过 $0.5$ 秒。", "locale": "zh-CN"}}}
{"pid": "P10173", "type": "P", "difficulty": 5, "samples": [["4\n1 3 4 2", "14"], ["10\n1 3 6 2 7 9 4 10 8 5", "1992"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化", "笛卡尔树", "单调栈"], "title": "「OICon-02」maxiMINImax", "background": "", "description": "给出一个长度为 $n$ 的排列 $a$。定义一个子区间 $[l,r]$ 中 $a_i$ 的最小值为 $\\min_{[l,r]}$，$a_i$ 的最大值为 $\\max_{[l,r]}$。对于所有子区间三元组 $([l_1,r_1],[l_2,r_2],[l_3,r_3])$ 使得 $1\\leq l_1\\leq r_1<l_2\\leq r_2<l_3\\leq r_3\\leq n$，求 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 之和，对 $9712176$ 取模。", "inputFormat": "第一行，一个正整数 $n$，表示排列的长度。\n\n第二行，$n$ 个正整数 $a$，表示给出的排列 $a$。", "outputFormat": "一行，一个正整数，表示 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 之和，对 $9712176$ 取模。", "hint": "### 样例解释\n\n对于样例 $1$：\n\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[3,3])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=0$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[3,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=0$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=6$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,2],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([2,2],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$。\n\n所有 $([l_1,r_1],[l_2,r_2],[l_3,r_3])$ 的 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 总和为 $0+0+2+2+6+2+2=14$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n\\leq60$ | $5$ |\n| $2$ | $n\\leq100$ | $9$ |\n| $3$ | $n\\leq200$ | $9$ |\n| $4$ | $n\\leq500$ | $9$ |\n| $5$ | $n\\leq2000$ | $19$ |\n| $6$ | $n\\leq6000$ | $11$ |\n| $7$ | $n\\leq10^5$ | $19$ |\n| $8$ | 无特殊限制 | $19$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq10^6$，$1\\leq a_i\\leq n$，保证 $a$ 为 $\\{1,2,\\dots,n\\}$ 的一个排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「OICon-02」maxiMINImax", "background": "", "description": "给出一个长度为 $n$ 的排列 $a$。定义一个子区间 $[l,r]$ 中 $a_i$ 的最小值为 $\\min_{[l,r]}$，$a_i$ 的最大值为 $\\max_{[l,r]}$。对于所有子区间三元组 $([l_1,r_1],[l_2,r_2],[l_3,r_3])$ 使得 $1\\leq l_1\\leq r_1<l_2\\leq r_2<l_3\\leq r_3\\leq n$，求 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 之和，对 $9712176$ 取模。", "inputFormat": "第一行，一个正整数 $n$，表示排列的长度。\n\n第二行，$n$ 个正整数 $a$，表示给出的排列 $a$。", "outputFormat": "一行，一个正整数，表示 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 之和，对 $9712176$ 取模。", "hint": "### 样例解释\n\n对于样例 $1$：\n\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[3,3])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=0$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[3,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=0$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,2],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[2,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,1],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=6$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([1,2],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$；\n* $([l_1,r_1],[l_2,r_2],[l_3,r_3])=([2,2],[3,3],[4,4])$：$\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})=2$。\n\n所有 $([l_1,r_1],[l_2,r_2],[l_3,r_3])$ 的 $\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_1,r_1]})\\times\\max(0,\\min_{[l_2,r_2]}-\\max_{[l_3,r_3]})$ 总和为 $0+0+2+2+6+2+2=14$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n\\leq60$ | $5$ |\n| $2$ | $n\\leq100$ | $9$ |\n| $3$ | $n\\leq200$ | $9$ |\n| $4$ | $n\\leq500$ | $9$ |\n| $5$ | $n\\leq2000$ | $19$ |\n| $6$ | $n\\leq6000$ | $11$ |\n| $7$ | $n\\leq10^5$ | $19$ |\n| $8$ | 无特殊限制 | $19$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq10^6$，$1\\leq a_i\\leq n$，保证 $a$ 为 $\\{1,2,\\dots,n\\}$ 的一个排列。", "locale": "zh-CN"}}}
{"pid": "P10174", "type": "P", "difficulty": 5, "samples": [["4 2\n1 3 2 4", "1\n2\n2\n2"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线性数据结构", "O2优化", "树论", "单调栈"], "title": "「OICon-02」Great Segments", "background": "upd：时间限制改为 400ms\n\n[加强版题目推荐](https://www.luogu.com.cn/problem/P11291)", "description": "给定一个长度为 $n$ 的无重复元素序列 $a$。\n\n对于一个区间 $[l,r]$，我们定义它是好的，有以下条件：\n\n1. 定义一个序列 $b=\\{ a_l,\\max(a_l,a_{l+1}),\\max(a_l,a_{l+1},a_{l+2}),\\ ...\\ ,\\max(a_l,a_{l+1},\\ ... \\ ,a_r)\\}$，将该序列进行去重操作后，该序列的长度不超过 $k$ 且大于 $1$；\n2. $\\max(a_l,a_{l+1},\\ ... \\ ,a_r)=a_r$。\n\n请你解决这样一个问题：对于每一个 $i \\ (1 \\le i \\le n)$，有多少个好的区间 $[l,r]$ 满足 $l \\le i \\le r$。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数，第 $i$ 个数表示 $a_i$。", "outputFormat": "$n$ 行，每行一个整数，第 $i$ 行的数表示序列中有多少个好的区间 $[l,r]$ 满足 $l \\le i \\le r$。", "hint": "### 样例解释\n\n对于样例 $1$，满足条件的区间有：\n\n1. $[1,2]$；\n2. $[2,4]$；\n3. $[3,4]$。\n\n故当 $i=1,2,3,4$ 时，分别有以下区间满足 $l\\leq i\\leq r$（根据上述的区间编号）：\n\n1. $1$ 区间；\n2. $1,2$ 区间；\n3. $2,3$ 区间；\n4. $2,3$ 区间。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $n \\le 200$ | $5$ |\n| $2$ | $n\\leq 2000$ | $10$ | \n| $3$ | $\\{a\\}$ 递增 | $10$ |\n| $4$ | $k\\leq 5$ | $12$ |\n| $5$ | $k=n$ | $13$ |\n| $6$ | $n \\le 3 \\times 10^5$ | $20$ |\n| $7$ | 无特殊限制 | $30$ |\n\n对于 $100\\%$ 的数据：$1\\leq k\\leq n\\leq 10^6$，$0\\leq a_i\\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「OICon-02」Great Segments", "background": "upd：时间限制改为 400ms\n\n[加强版题目推荐](https://www.luogu.com.cn/problem/P11291)", "description": "给定一个长度为 $n$ 的无重复元素序列 $a$。\n\n对于一个区间 $[l,r]$，我们定义它是好的，有以下条件：\n\n1. 定义一个序列 $b=\\{ a_l,\\max(a_l,a_{l+1}),\\max(a_l,a_{l+1},a_{l+2}),\\ ...\\ ,\\max(a_l,a_{l+1},\\ ... \\ ,a_r)\\}$，将该序列进行去重操作后，该序列的长度不超过 $k$ 且大于 $1$；\n2. $\\max(a_l,a_{l+1},\\ ... \\ ,a_r)=a_r$。\n\n请你解决这样一个问题：对于每一个 $i \\ (1 \\le i \\le n)$，有多少个好的区间 $[l,r]$ 满足 $l \\le i \\le r$。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数，第 $i$ 个数表示 $a_i$。", "outputFormat": "$n$ 行，每行一个整数，第 $i$ 行的数表示序列中有多少个好的区间 $[l,r]$ 满足 $l \\le i \\le r$。", "hint": "### 样例解释\n\n对于样例 $1$，满足条件的区间有：\n\n1. $[1,2]$；\n2. $[2,4]$；\n3. $[3,4]$。\n\n故当 $i=1,2,3,4$ 时，分别有以下区间满足 $l\\leq i\\leq r$（根据上述的区间编号）：\n\n1. $1$ 区间；\n2. $1,2$ 区间；\n3. $2,3$ 区间；\n4. $2,3$ 区间。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $n \\le 200$ | $5$ |\n| $2$ | $n\\leq 2000$ | $10$ | \n| $3$ | $\\{a\\}$ 递增 | $10$ |\n| $4$ | $k\\leq 5$ | $12$ |\n| $5$ | $k=n$ | $13$ |\n| $6$ | $n \\le 3 \\times 10^5$ | $20$ |\n| $7$ | 无特殊限制 | $30$ |\n\n对于 $100\\%$ 的数据：$1\\leq k\\leq n\\leq 10^6$，$0\\leq a_i\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10175", "type": "P", "difficulty": 6, "samples": [["3 10 6\n1 1\n1 2 3", "156"], ["11 4 6\n1 1 2 3 4 4 4 5 6 7\n325 190 400 325 380 165 334 400 80 171 340", "678"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "树形 DP", "组合数学"], "title": "「OICon-02」Subtree Value", "background": "", "description": "给出一棵 $n$ 个节点的树，每个点有点权 $a_v$。定义一棵树的一个子连通块为一个树中点的**非空集合**，满足这些点在树上形成一个连通块。定义子连通块 $S$ 的权值为 $\\prod_{v\\in S}(a_v+|S|)$。求所有子连通块的权值之和对 $U^V$ 取模。", "inputFormat": "第一行，三个正整数 $n,U,V$，分别表示节点个数，以及模数（$U^V$）。\n\n第二行，$n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，分别表示以 $1$ 节点为根节点的情况下第 $i$ 个点的父亲节点。\n\n第三行，$n$ 个非负整数 $a_i$，表示每个点的点权。", "outputFormat": "一行，一个正整数，表示所有子联通块的权值之和，对 $U^V$ 取模。", "hint": "### 样例解释\n\n对于样例 $1$，以下子连通块的权值分别是：\n\n* $\\{1\\}$：$(1+1)=2$；\n* $\\{2\\}$：$(2+1)=3$；\n* $\\{3\\}$：$(3+1)=4$；\n* $\\{1,2\\}$：$(1+2)\\times(2+2)=12$；\n* $\\{1,3\\}$：$(1+2)\\times(3+2)=15$；\n* $\\{1,2,3\\}$：$(1+3)\\times(2+3)\\times(3+3)=120$。\n\n总和为 $2+3+4+12+15+120=156$，对 $10^6$ 取模后为 $156$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n\\leq10$ | $5$ |\n| $2$ | $n\\leq150$ | $8$ |\n| $3$ | $n\\leq500$ | $11$ |\n| $4$ | $U=2,V=1$ | $7$ |\n| $5$ | $V=1$ | $23$ |\n| $6$ | $U\\mid a_i$ | $23$ |\n| $7$ | 无特殊限制 | $23$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq2000$，$1\\leq f_i<i$，$2\\leq U\\leq10$，$1\\leq V\\leq6$，$0\\leq a_i< U^V$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「OICon-02」Subtree Value", "background": "", "description": "给出一棵 $n$ 个节点的树，每个点有点权 $a_v$。定义一棵树的一个子连通块为一个树中点的**非空集合**，满足这些点在树上形成一个连通块。定义子连通块 $S$ 的权值为 $\\prod_{v\\in S}(a_v+|S|)$。求所有子连通块的权值之和对 $U^V$ 取模。", "inputFormat": "第一行，三个正整数 $n,U,V$，分别表示节点个数，以及模数（$U^V$）。\n\n第二行，$n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，分别表示以 $1$ 节点为根节点的情况下第 $i$ 个点的父亲节点。\n\n第三行，$n$ 个非负整数 $a_i$，表示每个点的点权。", "outputFormat": "一行，一个正整数，表示所有子联通块的权值之和，对 $U^V$ 取模。", "hint": "### 样例解释\n\n对于样例 $1$，以下子连通块的权值分别是：\n\n* $\\{1\\}$：$(1+1)=2$；\n* $\\{2\\}$：$(2+1)=3$；\n* $\\{3\\}$：$(3+1)=4$；\n* $\\{1,2\\}$：$(1+2)\\times(2+2)=12$；\n* $\\{1,3\\}$：$(1+2)\\times(3+2)=15$；\n* $\\{1,2,3\\}$：$(1+3)\\times(2+3)\\times(3+3)=120$。\n\n总和为 $2+3+4+12+15+120=156$，对 $10^6$ 取模后为 $156$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ |\n|:--:|:--:|:--:|\n| $1$ | $n\\leq10$ | $5$ |\n| $2$ | $n\\leq150$ | $8$ |\n| $3$ | $n\\leq500$ | $11$ |\n| $4$ | $U=2,V=1$ | $7$ |\n| $5$ | $V=1$ | $23$ |\n| $6$ | $U\\mid a_i$ | $23$ |\n| $7$ | 无特殊限制 | $23$ |\n\n对于 $100\\%$ 的数据：$1\\leq n\\leq2000$，$1\\leq f_i<i$，$2\\leq U\\leq10$，$1\\leq V\\leq6$，$0\\leq a_i< U^V$。", "locale": "zh-CN"}}}
{"pid": "P10176", "type": "P", "difficulty": 7, "samples": [["3 3\na\naa\naaa\n1 2 3\n2 3 3\n1 3 3", "6\n30\n36"], ["10 10\naabb\naba\nabbba\nabaccaab\nabbba\nababababab\naaaaa\nbbbbbb\naaba\nabbba\n1 10 10\n1 4 5\n3 6 4\n2 8 1\n1 5 4\n2 10 7\n2 9 2\n4 5 5\n5 5 6\n8 9 10", "241\n31\n51\n105\n40\n136\n460\n17\n0\n0"], ["5 5\na\nba\naba\nababa\nabab\n1 3 3\n1 2 3\n2 3 3\n4 4 5\n3 4 4", "12\n2\n9\n11\n28"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["字符串", "后缀自动机 SAM", "O2优化", "分块", "AC 自动机", "根号分治"], "title": "「OICon-02」Native Faith", "background": "", "description": "本题字符串下标从 $1$ 开始。  \n\n定义两个字符串相加的结果为将这两个字符串首尾拼接形成的新字符串。\n\n令 $f(a,b,c)=\\sum\\limits_{i=1}^{|a|}\\sum\\limits_{j=i}^{|a|}\\sum\\limits_{k=1}^{|b|}\\sum\\limits_{l=k}^{|b|}[a_{i,i+1,\\cdots,j}+b_{k,k+1,\\cdots,l} = c]$（$a,b,c$ 均为字符串）。\n\n即有多少种方式从 $a,b$ 中分别选出一个非空子串使两个子串的和为 $c$。\n\n给定 $n$ 个字符串 $s_1,s_2,s_3,\\cdots,s_n$。\n\n有 $q$ 次询问，每次询问给出三个正整数 $l,r,k$，求 $\\sum\\limits_{i=l}^r\\sum\\limits_{j=l}^rf(s_i,s_j,s_k)$。", "inputFormat": "第一行包含两个整数 $n,q$。\n\n下面 $n$ 行，每行一个只包含小写字母的非空字符串表示 $s_1,s_2,\\cdots,s_n$。\n\n下面 $q$ 行，每行三个正整数 $l,r,k$，表示一次询问。", "outputFormat": "对于每个询问，每行输出一个整数表示答案。", "hint": "### 样例解释\n\n对于样例 $1$，给出部分 $f$ 函数的值。\n- $f(s_1,s_1,s_3)=0$，$f(s_1,s_2,s_3)=1$，$f(s_1,s_3,s_3)=2$，$f(s_2,s_1,s_3)=1$，$f(s_2,s_2,s_3)=4$，$f(s_2,s_3,s_3)=7$，$f(s_3,s_1,s_3)=2$，$f(s_3,s_2,s_3)=7$，$f(s_3,s_3,s_3)=12$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n令 $m=\\sum|s_i|$。\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ | \n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1\\le n,m,q\\le 3\\times 10^3$ | $17$ |\n| $2$ | 保证每次询问的 $k$ 各不相同 | $23$ | \n| $3$ | $1\\le n,m,q\\le 3\\times 10^4$ | $27$ |\n| $4$ | 字符串只包含小写字母 $\\texttt{a}$ | $19$ |\n| $5$ | 无特殊限制 | $14$ |\n\n对于 $100\\%$ 的数据：$1\\le n,m,q\\le 10^5$，$1\\le l \\le r\\le n$，$1\\le k\\le n$，字符串仅包含小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「OICon-02」Native Faith", "background": "", "description": "本题字符串下标从 $1$ 开始。  \n\n定义两个字符串相加的结果为将这两个字符串首尾拼接形成的新字符串。\n\n令 $f(a,b,c)=\\sum\\limits_{i=1}^{|a|}\\sum\\limits_{j=i}^{|a|}\\sum\\limits_{k=1}^{|b|}\\sum\\limits_{l=k}^{|b|}[a_{i,i+1,\\cdots,j}+b_{k,k+1,\\cdots,l} = c]$（$a,b,c$ 均为字符串）。\n\n即有多少种方式从 $a,b$ 中分别选出一个非空子串使两个子串的和为 $c$。\n\n给定 $n$ 个字符串 $s_1,s_2,s_3,\\cdots,s_n$。\n\n有 $q$ 次询问，每次询问给出三个正整数 $l,r,k$，求 $\\sum\\limits_{i=l}^r\\sum\\limits_{j=l}^rf(s_i,s_j,s_k)$。", "inputFormat": "第一行包含两个整数 $n,q$。\n\n下面 $n$ 行，每行一个只包含小写字母的非空字符串表示 $s_1,s_2,\\cdots,s_n$。\n\n下面 $q$ 行，每行三个正整数 $l,r,k$，表示一次询问。", "outputFormat": "对于每个询问，每行输出一个整数表示答案。", "hint": "### 样例解释\n\n对于样例 $1$，给出部分 $f$ 函数的值。\n- $f(s_1,s_1,s_3)=0$，$f(s_1,s_2,s_3)=1$，$f(s_1,s_3,s_3)=2$，$f(s_2,s_1,s_3)=1$，$f(s_2,s_2,s_3)=4$，$f(s_2,s_3,s_3)=7$，$f(s_3,s_1,s_3)=2$，$f(s_3,s_2,s_3)=7$，$f(s_3,s_3,s_3)=12$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n令 $m=\\sum|s_i|$。\n\n| $\\text{Subtask}$ | 特殊性质 | $\\text{Score}$ | \n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1\\le n,m,q\\le 3\\times 10^3$ | $17$ |\n| $2$ | 保证每次询问的 $k$ 各不相同 | $23$ | \n| $3$ | $1\\le n,m,q\\le 3\\times 10^4$ | $27$ |\n| $4$ | 字符串只包含小写字母 $\\texttt{a}$ | $19$ |\n| $5$ | 无特殊限制 | $14$ |\n\n对于 $100\\%$ 的数据：$1\\le n,m,q\\le 10^5$，$1\\le l \\le r\\le n$，$1\\le k\\le n$，字符串仅包含小写字母。", "locale": "zh-CN"}}}
{"pid": "P10177", "type": "P", "difficulty": 2, "samples": [["2\n1 1", "0"], ["4\n2 4 1 3", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "似巨龙高歌", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wpc73r2k.png)\n\n拜谢 whk 神犇帆巨/bx\n\n尽管帆帆文化课很强，但在新年他不想给同龄蒟蒻带来太大压力，于是他准备对一年的考试成绩做一些手脚……", "description": "面对着自己向巨龙一样腾飞的成绩，新年到来时帆帆忍不住唱起了《爱你》。\n\n他今年一共有 $n$ 次考试，第 $i$ 次考试的排名是 $a_i$。\n\n这在无形之中给别的同学造成了压力，于是他希望把自己的 $n$ 次排名进行重排，使得进步最大的一次考试进步的名次最少，这样他就可以隐藏自己的实力。\n\n对于第 $i$ 次和第 $i+1$ 次考试（$1\\le i < n$），他的进步名次即为 $a_i-a_{i+1}$，如果该值为负则代表他退步了。\n\n\n请你帮帮他。\n", "inputFormat": "输入两行。\n\n第一行，输入一个整数 $n$。\n\n第二行，输入 $n$ 个整数，每两个整数之间用空格隔开。第 $i$ 个整数表示 $a_i$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "\n### 【样例 1 解释】\n\n帆帆不改变原本的考试序列，那么从第一次到第二次考试进步了 $0$ 名（排名没变化）。\n\n### 【样例 2 解释】\n\n帆帆可以把自己的考试排名重排为 $1,2,3,4$，那么他每次考试都进步了 $-1$，所以答案是 $-1$。 \n\n本题采用捆绑测试\n\n### 【数据范围】\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 10$。\n\n- 对于 $50\\%$ 的数据，保证 $n\\le 5000$。\n\n- 对于另外 $20\\%$ 的数据，保证 $a_i\\le 2$。\n\n- 对于 $100\\%$ 的数据，保证 $2\\le n\\le 10^6$，$1\\le a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "似巨龙高歌", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/wpc73r2k.png)\n\n拜谢 whk 神犇帆巨/bx\n\n尽管帆帆文化课很强，但在新年他不想给同龄蒟蒻带来太大压力，于是他准备对一年的考试成绩做一些手脚……", "description": "面对着自己向巨龙一样腾飞的成绩，新年到来时帆帆忍不住唱起了《爱你》。\n\n他今年一共有 $n$ 次考试，第 $i$ 次考试的排名是 $a_i$。\n\n这在无形之中给别的同学造成了压力，于是他希望把自己的 $n$ 次排名进行重排，使得进步最大的一次考试进步的名次最少，这样他就可以隐藏自己的实力。\n\n对于第 $i$ 次和第 $i+1$ 次考试（$1\\le i < n$），他的进步名次即为 $a_i-a_{i+1}$，如果该值为负则代表他退步了。\n\n\n请你帮帮他。\n", "inputFormat": "输入两行。\n\n第一行，输入一个整数 $n$。\n\n第二行，输入 $n$ 个整数，每两个整数之间用空格隔开。第 $i$ 个整数表示 $a_i$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "\n### 【样例 1 解释】\n\n帆帆不改变原本的考试序列，那么从第一次到第二次考试进步了 $0$ 名（排名没变化）。\n\n### 【样例 2 解释】\n\n帆帆可以把自己的考试排名重排为 $1,2,3,4$，那么他每次考试都进步了 $-1$，所以答案是 $-1$。 \n\n本题采用捆绑测试\n\n### 【数据范围】\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 10$。\n\n- 对于 $50\\%$ 的数据，保证 $n\\le 5000$。\n\n- 对于另外 $20\\%$ 的数据，保证 $a_i\\le 2$。\n\n- 对于 $100\\%$ 的数据，保证 $2\\le n\\le 10^6$，$1\\le a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10178", "type": "P", "difficulty": 4, "samples": [["2\n3 2 3\n1 2\n2 3\n2 2 1\n1 2\n1 2", "Yes\n1 2\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "广度优先搜索 BFS", "最短路", "洛谷月赛"], "title": "陌路寻诗礼", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/pkwo5ogg.png)\n\n作为 luogu 网红的帆巨，有非常多狂热的粉丝，而我们的帆巨也很喜欢面基，寻找遍布大江南北的粉丝们。\n\n\n", "description": "帆巨所在的家乡的地图是一张有 $n$ 个节点 $m$ 条有向道路的有向图，每个节点都是一个城市，而帆巨所在的城市是 $1$ 号城市，并且 $1$ 号城市总是可以通过若干道路到达其他任何城市。\n\n第 $i$ 条道路从 $x_i$ 号城市出发到达 $y_i$ 号城市，长度为 $z_i$。\n\n帆帆现在要从他的 $1$ 号城市前往各个城市面基。\n\n精通 spfa 算法的帆帆在面基的过程中自然会按照长度和最短的路径去其他城市。\n\n但是帆帆有选择困难症，他希望从 $1$ 号城市到达每一座城市的最短路径都是唯一的，所以他决定施加魔法，改变所有道路的长度，具体地：\n\n帆巨施加魔法后，对于每一条道路的长度，都可以 **独立地** 将其变成一个 $[1,k]$ 范围内的整数，其中 $k$ 是帆巨的魔法等级。\n\n但帆巨所在的世界的地图和他的魔法等级一直在变，总共会变 $T$ 次，所以他希望你对 $T$ 次询问都给出一种构造方法使得帆巨不会纠结或者报告无解。\n\n", "inputFormat": "\n第一行一个整数 $T$ 表示数据组数。\n\n接下来 $T$ 组，每组先是三个整数 $n,m,k$，接着 $m$ 行描述有向道路 $(x_i,y_i)$。\n\n**不保证无自环无重边。**", "outputFormat": "对于每组数据，如果有解，第一行输出 `Yes`，第二行 $m$ 个数依次输出每条边的权值；如果没有解，一行输出 `No`。\n\n本题采用 `special judge` 评测，也就是说，如果有多种可能的答案，你可以输出任意一种。", "hint": "### 【样例解释】\n\n对于第一组数据，$1$ 号点到达每个点的路径都是唯一，自然无论怎么设置边权，最短路都是唯一的。\n\n对于第二组数据，因为 $k=1$，所以两条边的边权都只能设置为 $1$。$1$ 号点到 $2$ 号点的最短路长度为 $1$，走两条边都可以，所以不是唯一的。\n\n### 【数据范围】\n\n本题采用捆绑测试。\n\n对于 $20\\%$ 的数据，$n,m\\leq 5$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于另外 $20\\%$ 的数据，$m=n-1$。\n\n对于另外 $20\\%$ 的数据，$k=10^9$。\n\n对于 $100\\%$ 的数据，$n\\ge 1$，$m\\ge 0$，$1\\le \\sum n,\\sum m\\leq 3\\times 10^5$，$1\\leq k \\leq 10^9$，$1\\le x_i,y_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "陌路寻诗礼", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/pkwo5ogg.png)\n\n作为 luogu 网红的帆巨，有非常多狂热的粉丝，而我们的帆巨也很喜欢面基，寻找遍布大江南北的粉丝们。\n\n\n", "description": "帆巨所在的家乡的地图是一张有 $n$ 个节点 $m$ 条有向道路的有向图，每个节点都是一个城市，而帆巨所在的城市是 $1$ 号城市，并且 $1$ 号城市总是可以通过若干道路到达其他任何城市。\n\n第 $i$ 条道路从 $x_i$ 号城市出发到达 $y_i$ 号城市，长度为 $z_i$。\n\n帆帆现在要从他的 $1$ 号城市前往各个城市面基。\n\n精通 spfa 算法的帆帆在面基的过程中自然会按照长度和最短的路径去其他城市。\n\n但是帆帆有选择困难症，他希望从 $1$ 号城市到达每一座城市的最短路径都是唯一的，所以他决定施加魔法，改变所有道路的长度，具体地：\n\n帆巨施加魔法后，对于每一条道路的长度，都可以 **独立地** 将其变成一个 $[1,k]$ 范围内的整数，其中 $k$ 是帆巨的魔法等级。\n\n但帆巨所在的世界的地图和他的魔法等级一直在变，总共会变 $T$ 次，所以他希望你对 $T$ 次询问都给出一种构造方法使得帆巨不会纠结或者报告无解。\n\n", "inputFormat": "\n第一行一个整数 $T$ 表示数据组数。\n\n接下来 $T$ 组，每组先是三个整数 $n,m,k$，接着 $m$ 行描述有向道路 $(x_i,y_i)$。\n\n**不保证无自环无重边。**", "outputFormat": "对于每组数据，如果有解，第一行输出 `Yes`，第二行 $m$ 个数依次输出每条边的权值；如果没有解，一行输出 `No`。\n\n本题采用 `special judge` 评测，也就是说，如果有多种可能的答案，你可以输出任意一种。", "hint": "### 【样例解释】\n\n对于第一组数据，$1$ 号点到达每个点的路径都是唯一，自然无论怎么设置边权，最短路都是唯一的。\n\n对于第二组数据，因为 $k=1$，所以两条边的边权都只能设置为 $1$。$1$ 号点到 $2$ 号点的最短路长度为 $1$，走两条边都可以，所以不是唯一的。\n\n### 【数据范围】\n\n本题采用捆绑测试。\n\n对于 $20\\%$ 的数据，$n,m\\leq 5$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于另外 $20\\%$ 的数据，$m=n-1$。\n\n对于另外 $20\\%$ 的数据，$k=10^9$。\n\n对于 $100\\%$ 的数据，$n\\ge 1$，$m\\ge 0$，$1\\le \\sum n,\\sum m\\leq 3\\times 10^5$，$1\\leq k \\leq 10^9$，$1\\le x_i,y_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P10179", "type": "P", "difficulty": 4, "samples": [["2\n4 2\n1 2\n3 4\n3 3\n1 2\n2 3\n3 1", "Yes\n1 3\n2 4\n2 3\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "水影若深蓝", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/e2h3lfb4.png)\n\n帆帆爱明日方舟，更爱水月和深蓝之树。但在龙年，他想构建一棵独属于他的深蓝之树。", "description": "在梦里，在朦胧的水影中，帆帆看见了这棵只属于他的深蓝之树。\n\n当一切梦沉寂，他却遗忘了所有，只记得树上有 $n$ 个结点。\n\n真的吗？似乎并没有，有 $m$ 件事情他一直牢记着，第 $i$ 件事情是：节点 $u_i$ 和 $v_i$ 在这棵深蓝之树上唯一的不重复经过某个点的路径恰好有两条边。\n\n那么，你能否帮助帆帆想起来这棵深蓝之树的样子呢，如果有多个可能的，你只需要输出任意一种。\n\n当然，帆帆也是会磨损的，因此当你发现无论如何都找不到满足帆帆这 $m$ 件事情的深蓝之树时，你需要报告无解。\n", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$ 表示数据组数。\n\n对于每组数据：\n\n第一行两个非负整数 $n,m$ 表示树上的点数和帆帆记忆中事件个数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$ 表示一个事件。", "outputFormat": "对于每组数据：\n\n- 若不存在符合条件的树，输出 `No`。\n- 否则，第一行输出 `Yes`，接下来 $n-1$ 行输出 $n-1$ 对正整数 $(u,v)$，表示你给出的树上的 $n-1$ 条边。\n\n本题采用 `special judge` 评测，也就是说，如果有多种可能的答案，你可以输出任意一种。", "hint": "### 样例 $1$ 解释\n\n对于第一组数据，不难验证给出的树符合条件。\n\n对于第二组数据，可以证明不存在符合条件的树。\n\n### 测试点约束\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$n\\ge 2$，$m\\ge 0$，$1\\le \\sum n\\le 3\\times 10^5$，$0\\le \\sum m\\le 3\\times 10^5$，$1\\le u_i,v_i\\le n$，$u_i\\neq v_i$。\n\n本题采用捆绑测试。\n\n| 子任务编号 | 特殊限制 | 分值 |\n| :--------: | :-------------: | :--: |\n| Subtask #1 |     $\\sum n,\\sum m\\le 9$     | $10$ |\n| Subtask #2 |    $\\sum n,\\sum m\\le 50$     | $10$ |\n| Subtask #3 |    $\\sum n,\\sum m\\le 5000$    | $10$ |\n| Subtask #4 |   $v_i=u_i+1$    | $10$ |\n| Subtask #5 |   $u_i=1$    | $10$ |\n| Subtask #6 |   $u_i\\neq 1,v_i\\neq 1$    | $10$ |\n| Subtask #7 |   $T=1$    | $10$ |\n| Subtask #8 |   无    | $30$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "水影若深蓝", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/e2h3lfb4.png)\n\n帆帆爱明日方舟，更爱水月和深蓝之树。但在龙年，他想构建一棵独属于他的深蓝之树。", "description": "在梦里，在朦胧的水影中，帆帆看见了这棵只属于他的深蓝之树。\n\n当一切梦沉寂，他却遗忘了所有，只记得树上有 $n$ 个结点。\n\n真的吗？似乎并没有，有 $m$ 件事情他一直牢记着，第 $i$ 件事情是：节点 $u_i$ 和 $v_i$ 在这棵深蓝之树上唯一的不重复经过某个点的路径恰好有两条边。\n\n那么，你能否帮助帆帆想起来这棵深蓝之树的样子呢，如果有多个可能的，你只需要输出任意一种。\n\n当然，帆帆也是会磨损的，因此当你发现无论如何都找不到满足帆帆这 $m$ 件事情的深蓝之树时，你需要报告无解。\n", "inputFormat": "**本题有多组数据**。\n\n第一行一个正整数 $T$ 表示数据组数。\n\n对于每组数据：\n\n第一行两个非负整数 $n,m$ 表示树上的点数和帆帆记忆中事件个数。\n\n接下来 $m$ 行，每行两个正整数 $u_i,v_i$ 表示一个事件。", "outputFormat": "对于每组数据：\n\n- 若不存在符合条件的树，输出 `No`。\n- 否则，第一行输出 `Yes`，接下来 $n-1$ 行输出 $n-1$ 对正整数 $(u,v)$，表示你给出的树上的 $n-1$ 条边。\n\n本题采用 `special judge` 评测，也就是说，如果有多种可能的答案，你可以输出任意一种。", "hint": "### 样例 $1$ 解释\n\n对于第一组数据，不难验证给出的树符合条件。\n\n对于第二组数据，可以证明不存在符合条件的树。\n\n### 测试点约束\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$n\\ge 2$，$m\\ge 0$，$1\\le \\sum n\\le 3\\times 10^5$，$0\\le \\sum m\\le 3\\times 10^5$，$1\\le u_i,v_i\\le n$，$u_i\\neq v_i$。\n\n本题采用捆绑测试。\n\n| 子任务编号 | 特殊限制 | 分值 |\n| :--------: | :-------------: | :--: |\n| Subtask #1 |     $\\sum n,\\sum m\\le 9$     | $10$ |\n| Subtask #2 |    $\\sum n,\\sum m\\le 50$     | $10$ |\n| Subtask #3 |    $\\sum n,\\sum m\\le 5000$    | $10$ |\n| Subtask #4 |   $v_i=u_i+1$    | $10$ |\n| Subtask #5 |   $u_i=1$    | $10$ |\n| Subtask #6 |   $u_i\\neq 1,v_i\\neq 1$    | $10$ |\n| Subtask #7 |   $T=1$    | $10$ |\n| Subtask #8 |   无    | $30$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P10180", "type": "P", "difficulty": 5, "samples": [["5 3\n1 2 1 3 3\n1 1 2 2\n1 2\n1 3\n2 3", "9\n6\n9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "半彩三重奏", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/6205nazm.png)\n\n帆帆不满足于只构建一棵深蓝之树，他觉得深蓝之树只有深蓝色太单调了，于是想给这棵树染上颜色。", "description": "由于现在已经来到了魔幻的龙年，帆帆的深蓝之树已经被染上了颜色，结点 $i$ 的颜色为 $a_i$。\n\n帆帆是一个喜新厌旧的人，在接下来的 $q$ 天中，他每天都会改变他喜欢的颜色，第 $i$ 天他喜欢的两种颜色是 $x_i,y_i$（$x_i\\neq y_i$）。\n\n但是为了照顾自己的树，他需要经常在树上移动，并且只会经过自己喜欢的颜色。\n\n具体来说，第 $i$ 天，帆帆会选择一个有序结点对 $(u,v)$，然后沿着 $u\\to v$ 的唯一简单路径移动，并且中间经过的结点（包含 $u,v$）颜色必须 $\\in \\{x_i,y_i\\}$（$u$ 可以等于 $v$），之后可以抽取一次宵宫。\n\n每一天你都需要抽取一个满命宵宫，然后告诉帆帆有多少种可能的选择有序结点对的方案。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$ 表示每个点的颜色。\n\n接下来一行 $n-1$ 个正整数 $p_2,p_3,\\cdots,p_n$，表示对所有 $2\\le i\\le n$，树上存在一条边 $(p_i,i)$。\n\n接下来 $q$ 行，每行两个正整数 $x_i,y_i$。", "outputFormat": "对于每组询问输出一行一个正整数表示答案。", "hint": "### 【样例 $1$ 解释】\n\n树的形态如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w65i5hof.png)\n\n对于第一组询问，合法的路径有且仅有 $\\{1,2,3\\}$ 中一点到另一点的路径。\n\n对于第二组询问，合法的路径有且仅有 $1\\to 1,1\\to 3,3\\to 1,3\\to 3,4\\to 4,5\\to 5$。\n\n### 【子任务约束】\n\n本题采用子任务捆绑测试。\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^6$，$1\\le q\\le 2\\times 10^6$，$1\\le a_i,x,y\\le n$，$x\\neq y$。保证 $p_i<i$。\n\n| 子任务编号 |        $n$         |        $q$         | 特殊性质 | 分值 | 依赖子任务 | \n| :--------: | :----------------: | :----------------: | :------: | :--: | :--: |\n| Subtask \\#1 |     $\\le 100$      |     $\\le 100$      |    无    | $7$  |无|\n| Subtask \\#2 |     $\\le 2000$     |     $\\le 2000$     |    无    | $18$ |$1$|\n| Subtask \\#3 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    A     | $5$  |无|\n| Subtask \\#4 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    B     | $19$ |无|\n| Subtask \\#5 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    无    | $21$ |$1,2,3,4$|\n| Subtask \\#6 | $\\le 2\\times 10^5$ | $\\le 5\\times 10^5$ |    无    | $10$ |$5$|\n| Subtask \\#7 | $\\le 10^6$ | $\\le 2\\times 10^6$ |    无    | $20$ |$6$|\n\n特殊性质 A：$p_i=1$。\n\n特殊性质 B：$p_i=i-1$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "半彩三重奏", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/6205nazm.png)\n\n帆帆不满足于只构建一棵深蓝之树，他觉得深蓝之树只有深蓝色太单调了，于是想给这棵树染上颜色。", "description": "由于现在已经来到了魔幻的龙年，帆帆的深蓝之树已经被染上了颜色，结点 $i$ 的颜色为 $a_i$。\n\n帆帆是一个喜新厌旧的人，在接下来的 $q$ 天中，他每天都会改变他喜欢的颜色，第 $i$ 天他喜欢的两种颜色是 $x_i,y_i$（$x_i\\neq y_i$）。\n\n但是为了照顾自己的树，他需要经常在树上移动，并且只会经过自己喜欢的颜色。\n\n具体来说，第 $i$ 天，帆帆会选择一个有序结点对 $(u,v)$，然后沿着 $u\\to v$ 的唯一简单路径移动，并且中间经过的结点（包含 $u,v$）颜色必须 $\\in \\{x_i,y_i\\}$（$u$ 可以等于 $v$），之后可以抽取一次宵宫。\n\n每一天你都需要抽取一个满命宵宫，然后告诉帆帆有多少种可能的选择有序结点对的方案。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$ 表示每个点的颜色。\n\n接下来一行 $n-1$ 个正整数 $p_2,p_3,\\cdots,p_n$，表示对所有 $2\\le i\\le n$，树上存在一条边 $(p_i,i)$。\n\n接下来 $q$ 行，每行两个正整数 $x_i,y_i$。", "outputFormat": "对于每组询问输出一行一个正整数表示答案。", "hint": "### 【样例 $1$ 解释】\n\n树的形态如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w65i5hof.png)\n\n对于第一组询问，合法的路径有且仅有 $\\{1,2,3\\}$ 中一点到另一点的路径。\n\n对于第二组询问，合法的路径有且仅有 $1\\to 1,1\\to 3,3\\to 1,3\\to 3,4\\to 4,5\\to 5$。\n\n### 【子任务约束】\n\n本题采用子任务捆绑测试。\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^6$，$1\\le q\\le 2\\times 10^6$，$1\\le a_i,x,y\\le n$，$x\\neq y$。保证 $p_i<i$。\n\n| 子任务编号 |        $n$         |        $q$         | 特殊性质 | 分值 | 依赖子任务 | \n| :--------: | :----------------: | :----------------: | :------: | :--: | :--: |\n| Subtask \\#1 |     $\\le 100$      |     $\\le 100$      |    无    | $7$  |无|\n| Subtask \\#2 |     $\\le 2000$     |     $\\le 2000$     |    无    | $18$ |$1$|\n| Subtask \\#3 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    A     | $5$  |无|\n| Subtask \\#4 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    B     | $19$ |无|\n| Subtask \\#5 |     $\\le 10^5$     | $\\le 2\\times 10^5$ |    无    | $21$ |$1,2,3,4$|\n| Subtask \\#6 | $\\le 2\\times 10^5$ | $\\le 5\\times 10^5$ |    无    | $10$ |$5$|\n| Subtask \\#7 | $\\le 10^6$ | $\\le 2\\times 10^6$ |    无    | $20$ |$6$|\n\n特殊性质 A：$p_i=1$。\n\n特殊性质 B：$p_i=i-1$。\n", "locale": "zh-CN"}}}
{"pid": "P10181", "type": "P", "difficulty": 7, "samples": [["5 5 0 956144375 1\n2 4 1 5 2 \n", "21971409"], ["10 10 0 478178732 1\n2 2 1 1 2 1 2 1 2 1 \n", "2834792"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "并查集", "洛谷原创", "O2优化", "凸完全单调性（wqs 二分）", "洛谷月赛", "根号分治", "单调栈"], "title": "龙逐千灯幻", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/6w2vttoo.png)\n\n龙年到，帆帆也举起了自己的彩龙灯，他自己也要变成大彩龙啦！", "description": "帆帆一共有 $n$ 盏龙灯，第 $i$ 盏的颜色是 $a_i$。\n\n帆帆认为一段区间 $[l,r]$ 的美观度 $f(l,r)$ 为 $a_l\\cdots a_r$ 中的不同颜色个数。\n\n帆帆准备带着自己的龙灯去玩，他一共计划去玩 $m$ 天，第 $i$ 天，他会带着自己的 $1\\cdots x_i$ 号龙灯，但是他发现如果把很多龙灯装在一起，那么别人只会注意到其中有多少种不同的颜色。\n\n因此帆帆准备把这 $x_i$ 个龙灯按照编号顺序分成恰好 $k_i$ 个区间，满足每盏灯恰好在一个区间内。\n\n那么帆帆这次出行的美观度就为所有区间的美观度的和。\n\n请你帮帮帆帆最大化每一次出行的美观度。\n\n", "inputFormat": "第一行五个整数 $n,m,id,seed,limx$，分别代表序列长度，询问次数，以及 $\\texttt{subtask}$ 编号（样例中的 $id=0$），随机数种子，以及一个和询问有关的参数 $limx$。\n\n因为本题输入量过大，因此采用如下方式生成询问：\n\n我们使用下面的代码生成一个伪随机数列：\n\n```cpp\nuint64_t PRG_state;\nuint64_t get_number()\n{\n    PRG_state ^= PRG_state << 13;\n    PRG_state ^= PRG_state >> 7;\n    PRG_state ^= PRG_state << 17;\n    return PRG_state;\n}\nint readW(int l,int r)\n{\n\treturn get_number()%(r-l+1)+l;\n}\n```\n\n一开始 `PRG_state=seed`，你每次调用 `readW(l,r)` 会返回一个 $[l,r]$ 内的随机数。\n\n第二行 $n$ 个整数，第 $i$ 个整数代表 $a_i$。\n\n设 $x_i,k_i,c_i$ 表示第 $i$ 组询问需要的参数 $x,k,c$，其中 $c$ 的作用见输出格式，那么所有询问的参数可以用以下程序生成：\n\n```cpp\nfor (int i = 1; i <= m; ++i) {\n\tx[i] = readW(limx, n);\n\tk[i] = readW(1, x[i]);\n\tc[i] = readW(0, 1e7);\n}\n```\n\n注：**请不要在运行上述代码段获得各组询问的参数之前调用 `readW()` 函数，否则无法获得正确的询问信息。** 本题不需要利用该伪随机数生成器的特殊性质，你只需将  `get_number()` 视为一个每次调用独立且均匀随机地生成一个无符号 $64$ 位整数的生成器即可。本题也不需要优化伪随机数生成器的内部实现。", "outputFormat": "为了减少输出量，我们使用如下方式进行信息压缩：\n\n如果第 $i$ 组询问的答案为 $ans_i$，其生成参数为 $c_i$，那么你需要输出：\n\n$$\\bigoplus\\limits_{i=1}^m(ans_i\\times c_i)$$\n\n其中 $\\bigoplus $ 为异或运算，该值显然一定位于 `long long` 能表示的整数范围内。", "hint": "### 【样例1解释】\n\n询问分别是：\n\n```\n3 1 6121576\n5 3 3089509\n1 1 4506170\n3 1 2821007\n1 1 7941511\n```\n\n答案分别是:\n\n```\n3\n5\n1\n3\n1\n```\n\n对于第一组询问，要分成一个区间，那么就是 $[1,3]$，美观度就是 $f(1,3)=3$ 。\n\n对于第二组询问，最优的方案是分成 $[1,3],[4,4],[5,5]$，美观度是 $f(1,3)+f(4,4)+f(5,5)=5$\n\n后三个询问同理。\n\n### 【样例2解释】\n\n询问分别是：\n\n```\n8 4 6858024\n3 2 236530\n2 2 8140891\n5 3 4562139\n8 7 4749403\n7 4 4319971\n5 1 5063575\n3 1 7343109\n6 2 1566851\n3 1 7959241\n```\n\n询问答案分别是：\n\n```\n7\n3\n2\n5\n8\n7\n2\n2\n4\n2\n```\n\n### 【数据范围】\n\n本题采用捆绑测试。\n\n- 子任务一（$10$ 分）：$1 \\leq n\\leq 500$。\n- 子任务二（$15$ 分）：$1\\leq n\\leq 3000$。\n- 子任务三（$15$ 分）：$m=1$。\n- 子任务四（$20$ 分）：$1\\le a_i\\le 30$。\n- 子任务五（$20$ 分）：$1\\leq n\\leq 4\\times 10^4$。\n- 子任务六（$20$ 分）：无特殊限制。\n\n\n对于 $100\\%$ 的数据，$1 \\leq n\\leq 10^5$，$1\\leq  m\\leq 10^6$，$0\\leq seed\\leq 10^9$，$1\\leq limx\\leq n$，$1\\leq a_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "龙逐千灯幻", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/6w2vttoo.png)\n\n龙年到，帆帆也举起了自己的彩龙灯，他自己也要变成大彩龙啦！", "description": "帆帆一共有 $n$ 盏龙灯，第 $i$ 盏的颜色是 $a_i$。\n\n帆帆认为一段区间 $[l,r]$ 的美观度 $f(l,r)$ 为 $a_l\\cdots a_r$ 中的不同颜色个数。\n\n帆帆准备带着自己的龙灯去玩，他一共计划去玩 $m$ 天，第 $i$ 天，他会带着自己的 $1\\cdots x_i$ 号龙灯，但是他发现如果把很多龙灯装在一起，那么别人只会注意到其中有多少种不同的颜色。\n\n因此帆帆准备把这 $x_i$ 个龙灯按照编号顺序分成恰好 $k_i$ 个区间，满足每盏灯恰好在一个区间内。\n\n那么帆帆这次出行的美观度就为所有区间的美观度的和。\n\n请你帮帮帆帆最大化每一次出行的美观度。\n\n", "inputFormat": "第一行五个整数 $n,m,id,seed,limx$，分别代表序列长度，询问次数，以及 $\\texttt{subtask}$ 编号（样例中的 $id=0$），随机数种子，以及一个和询问有关的参数 $limx$。\n\n因为本题输入量过大，因此采用如下方式生成询问：\n\n我们使用下面的代码生成一个伪随机数列：\n\n```cpp\nuint64_t PRG_state;\nuint64_t get_number()\n{\n    PRG_state ^= PRG_state << 13;\n    PRG_state ^= PRG_state >> 7;\n    PRG_state ^= PRG_state << 17;\n    return PRG_state;\n}\nint readW(int l,int r)\n{\n\treturn get_number()%(r-l+1)+l;\n}\n```\n\n一开始 `PRG_state=seed`，你每次调用 `readW(l,r)` 会返回一个 $[l,r]$ 内的随机数。\n\n第二行 $n$ 个整数，第 $i$ 个整数代表 $a_i$。\n\n设 $x_i,k_i,c_i$ 表示第 $i$ 组询问需要的参数 $x,k,c$，其中 $c$ 的作用见输出格式，那么所有询问的参数可以用以下程序生成：\n\n```cpp\nfor (int i = 1; i <= m; ++i) {\n\tx[i] = readW(limx, n);\n\tk[i] = readW(1, x[i]);\n\tc[i] = readW(0, 1e7);\n}\n```\n\n注：**请不要在运行上述代码段获得各组询问的参数之前调用 `readW()` 函数，否则无法获得正确的询问信息。** 本题不需要利用该伪随机数生成器的特殊性质，你只需将  `get_number()` 视为一个每次调用独立且均匀随机地生成一个无符号 $64$ 位整数的生成器即可。本题也不需要优化伪随机数生成器的内部实现。", "outputFormat": "为了减少输出量，我们使用如下方式进行信息压缩：\n\n如果第 $i$ 组询问的答案为 $ans_i$，其生成参数为 $c_i$，那么你需要输出：\n\n$$\\bigoplus\\limits_{i=1}^m(ans_i\\times c_i)$$\n\n其中 $\\bigoplus $ 为异或运算，该值显然一定位于 `long long` 能表示的整数范围内。", "hint": "### 【样例1解释】\n\n询问分别是：\n\n```\n3 1 6121576\n5 3 3089509\n1 1 4506170\n3 1 2821007\n1 1 7941511\n```\n\n答案分别是:\n\n```\n3\n5\n1\n3\n1\n```\n\n对于第一组询问，要分成一个区间，那么就是 $[1,3]$，美观度就是 $f(1,3)=3$ 。\n\n对于第二组询问，最优的方案是分成 $[1,3],[4,4],[5,5]$，美观度是 $f(1,3)+f(4,4)+f(5,5)=5$\n\n后三个询问同理。\n\n### 【样例2解释】\n\n询问分别是：\n\n```\n8 4 6858024\n3 2 236530\n2 2 8140891\n5 3 4562139\n8 7 4749403\n7 4 4319971\n5 1 5063575\n3 1 7343109\n6 2 1566851\n3 1 7959241\n```\n\n询问答案分别是：\n\n```\n7\n3\n2\n5\n8\n7\n2\n2\n4\n2\n```\n\n### 【数据范围】\n\n本题采用捆绑测试。\n\n- 子任务一（$10$ 分）：$1 \\leq n\\leq 500$。\n- 子任务二（$15$ 分）：$1\\leq n\\leq 3000$。\n- 子任务三（$15$ 分）：$m=1$。\n- 子任务四（$20$ 分）：$1\\le a_i\\le 30$。\n- 子任务五（$20$ 分）：$1\\leq n\\leq 4\\times 10^4$。\n- 子任务六（$20$ 分）：无特殊限制。\n\n\n对于 $100\\%$ 的数据，$1 \\leq n\\leq 10^5$，$1\\leq  m\\leq 10^6$，$0\\leq seed\\leq 10^9$，$1\\leq limx\\leq n$，$1\\leq a_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P10182", "type": "P", "difficulty": 7, "samples": [["2 1 2", "2"], ["2 3 4", "254"], ["19 8 10", "913255725"], ["10000000000 1 2", "880793261"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "洛谷原创", "O2优化", "线性代数", "洛谷月赛"], "title": "一径入繁华", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/68qtrpb7.png)\n\n伴随龙年到来的，还有帆巨很喜欢的九省联考。为了爆踩压轴题。帆巨狠狠地重温了数论。\n\n数论所生，繁华之地！", "description": "帆巨觉得求 $x^a$ 在 $\\bmod\\ p$ 意义下的值太简单了，所以他想求 $\\sigma_0^s(x^t)$ 在 $\\bmod\\ p$ 意义下的值。\n\n帆帆不满足于只计算一次，于是他列了一个 $n\\times n$ 的数表 $A$，保证第 $i$ 行第 $j$ 列（$1\\le i,j\\le n$）中的元素 $a_{i,j}$ 满足：\n\n$$\na_{i,j}=\\sum_{d\\mid \\gcd(i,j)}\\mu\\left(\\dfrac{\\gcd(i,j)}{d}\\right)\\times (\\sigma_0(d^s))^t\n$$\n\n帆帆想知道这个数表长什么样子，但这个数表实在太大了，所以请你告诉他 $\\det A$ 对 $10^9+7$ 取模后的结果。\n\n注释：\n\n1. 表达式中的各种函数含义在 **[这里](https://oi-wiki.org/math/number-theory/basic/#%E4%BE%8B%E5%AD%90)（$\\mu$ 表示莫比乌斯函数，$\\sigma_0$ 表示约数个数函数）**。\n2. $\\det A$ 表示方阵 $A$ 的 **[行列式](https://baike.baidu.com/item/%E8%A1%8C%E5%88%97%E5%BC%8F/2010180)**。", "inputFormat": "一行，输入三个整数 $n,s,t$。", "outputFormat": "一行，输出一个整数表示答案。", "hint": "### 【样例 $1$ 解释】\n\n矩阵 $A$ 如下：\n\n$$\n\\begin{bmatrix}\n1 & 1\\\\\n1 &3\n\\end{bmatrix}\n$$\n\n行列式为 $1\\times 3 - 1\\times 1=2$。\n\n### 【样例 $2$ 解释】\n\n矩阵 $A$ 如下：\n\n$$\n\\begin{bmatrix}\n1 & 1\\\\\n1 & 255\n\\end{bmatrix}\n$$\n\n行列式为 $1\\times 255 - 1 \\times 1=254$。\n\n### 数据范围\n\n本题采用 **子任务捆绑测试**。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^{11}$，$0\\le s,t< 10^9+7$。\n\n\n| 子任务编号  |      $n$      | 特殊性质  | 分值 |\n| :---------: | :-----------: | :-------: | :--: |\n| Subtask #1  |   $\\le 500$   |    无     | $8$  |\n| Subtask #2  |  $\\le 10^7$   | $s=1,t=2$ | $5$  |\n| Subtask #3  |  $\\le 10^7$   |   $s=1$   | $10$ |\n| Subtask #4  | $\\le 10^{11}$ | $s=1,t=2$ | $10$ |\n| Subtask #5  | $\\le 10^{11}$ |   $s=1$   | $10$ |\n| Subtask #6  | $\\le 10^{11}$ |   $t=1$   | $2$  |\n| Subtask #7  | $\\le 10^{7}$  | $t\\le 9$  | $10$ |\n| Subtask #8  | $\\le 10^{11}$ | $t\\le 9$  | $15$ |\n| Subtask #9  |  $\\le 10^7$   |    无     | $10$ |\n| Subtask #10 | $\\le 10^{11}$ |    无     | $20$ |\n\n**特殊性质** 一栏为空则表示没有特殊性质。子任务中没有规定范围的变量的值均在 $[0,10^9+7)$ 范围内生成。\n\n时间限制：$\\text{2000 ms}$；\n\n空间限制：$\\text{512 MB}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "一径入繁华", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/68qtrpb7.png)\n\n伴随龙年到来的，还有帆巨很喜欢的九省联考。为了爆踩压轴题。帆巨狠狠地重温了数论。\n\n数论所生，繁华之地！", "description": "帆巨觉得求 $x^a$ 在 $\\bmod\\ p$ 意义下的值太简单了，所以他想求 $\\sigma_0^s(x^t)$ 在 $\\bmod\\ p$ 意义下的值。\n\n帆帆不满足于只计算一次，于是他列了一个 $n\\times n$ 的数表 $A$，保证第 $i$ 行第 $j$ 列（$1\\le i,j\\le n$）中的元素 $a_{i,j}$ 满足：\n\n$$\na_{i,j}=\\sum_{d\\mid \\gcd(i,j)}\\mu\\left(\\dfrac{\\gcd(i,j)}{d}\\right)\\times (\\sigma_0(d^s))^t\n$$\n\n帆帆想知道这个数表长什么样子，但这个数表实在太大了，所以请你告诉他 $\\det A$ 对 $10^9+7$ 取模后的结果。\n\n注释：\n\n1. 表达式中的各种函数含义在 **[这里](https://oi-wiki.org/math/number-theory/basic/#%E4%BE%8B%E5%AD%90)（$\\mu$ 表示莫比乌斯函数，$\\sigma_0$ 表示约数个数函数）**。\n2. $\\det A$ 表示方阵 $A$ 的 **[行列式](https://baike.baidu.com/item/%E8%A1%8C%E5%88%97%E5%BC%8F/2010180)**。", "inputFormat": "一行，输入三个整数 $n,s,t$。", "outputFormat": "一行，输出一个整数表示答案。", "hint": "### 【样例 $1$ 解释】\n\n矩阵 $A$ 如下：\n\n$$\n\\begin{bmatrix}\n1 & 1\\\\\n1 &3\n\\end{bmatrix}\n$$\n\n行列式为 $1\\times 3 - 1\\times 1=2$。\n\n### 【样例 $2$ 解释】\n\n矩阵 $A$ 如下：\n\n$$\n\\begin{bmatrix}\n1 & 1\\\\\n1 & 255\n\\end{bmatrix}\n$$\n\n行列式为 $1\\times 255 - 1 \\times 1=254$。\n\n### 数据范围\n\n本题采用 **子任务捆绑测试**。\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^{11}$，$0\\le s,t< 10^9+7$。\n\n\n| 子任务编号  |      $n$      | 特殊性质  | 分值 |\n| :---------: | :-----------: | :-------: | :--: |\n| Subtask #1  |   $\\le 500$   |    无     | $8$  |\n| Subtask #2  |  $\\le 10^7$   | $s=1,t=2$ | $5$  |\n| Subtask #3  |  $\\le 10^7$   |   $s=1$   | $10$ |\n| Subtask #4  | $\\le 10^{11}$ | $s=1,t=2$ | $10$ |\n| Subtask #5  | $\\le 10^{11}$ |   $s=1$   | $10$ |\n| Subtask #6  | $\\le 10^{11}$ |   $t=1$   | $2$  |\n| Subtask #7  | $\\le 10^{7}$  | $t\\le 9$  | $10$ |\n| Subtask #8  | $\\le 10^{11}$ | $t\\le 9$  | $15$ |\n| Subtask #9  |  $\\le 10^7$   |    无     | $10$ |\n| Subtask #10 | $\\le 10^{11}$ |    无     | $20$ |\n\n**特殊性质** 一栏为空则表示没有特殊性质。子任务中没有规定范围的变量的值均在 $[0,10^9+7)$ 范围内生成。\n\n时间限制：$\\text{2000 ms}$；\n\n空间限制：$\\text{512 MB}$。", "locale": "zh-CN"}}}
{"pid": "P10183", "type": "P", "difficulty": 2, "samples": [["2\n1 \n2", "-1"], ["5\n10 \n20 \n30\n40\n50", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "最大公约数 gcd", "洛谷比赛"], "title": "[YDOI R1] Running", "background": "小 Z 要去跑步，他想开学后拉爆他的同学。", "description": "\n\n小 Z 在一条公路上跑步，公路上有 $n$ 个超市，第 $i$ 个超市的位置为 $a_i$。当小 Z 经过一个超市的时间为奇数时，他就会去逛超市，从而被同学拉爆。\n\n小 Z 最开始位于位置为 $0$ 的点。他会在每个单位时间向右跑 $v$ 个单位长度。\n\n请求出：能够使小 Z 经过 $n$ 个超市中每一个超市时，都不去逛超市的 $v$ 的最大值。\n\n\n规定 $v$ 必须是正整数，且小 Z 到达任意一个超市时，花费的时间必须为整数，换言之，你需要保证小 Z 到达任意一个超市的时间都是偶数。注意时间初始为 $0$。\n", "inputFormat": "输入共 $n+1$ 行。\n\n第 $1$ 行，$1$ 个正整数 $n$。\n\n第 $2\\sim n+1$ 行，每行 $1$ 个正整数，第 $i+1$ 行输入的正整数是 $a_i$。", "outputFormat": "输出共 $1$ 行。\n\n输出符合条件的 $v$ 的最大值。如果无解则输出 $-1$。", "hint": "### 【样例解释】\n对于样例 $1$，可以证明不存在符合要求的速度。\n\n对于样例 $2$，当 $v=5$ 时，到达第 $1\\sim5$ 个超市的时间分别为 $2$，$4$，$6$，$8$，$10$，均为偶数，符合题目要求。可以证明不存在更快的符合要求的速度。\n\n\n**本题采用捆绑测试**。\n\n|子任务编号|$n\\le$|$a_i\\le$|分值|\n|:--:|:--:|:--:|:--:|\n|$1$|$1$|$3\\times10^{18}$|$10$|\n|$2$|$25$|保证 $a_1\\le 2\\times 10^6$|$10$|\n|$3$|$10^4$|保证 $a_1\\le 2\\times 10^6$|$20$|\n|$4$|$2\\times10^6$|$3\\times10^{18}$|$60$|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2\\times10^6$，$1\\le a_1<a_2<\\dots<a_{n-1}<a_n\\le3\\times10^{18}$。保证所有输入都是正整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YDOI R1] Running", "background": "小 Z 要去跑步，他想开学后拉爆他的同学。", "description": "\n\n小 Z 在一条公路上跑步，公路上有 $n$ 个超市，第 $i$ 个超市的位置为 $a_i$。当小 Z 经过一个超市的时间为奇数时，他就会去逛超市，从而被同学拉爆。\n\n小 Z 最开始位于位置为 $0$ 的点。他会在每个单位时间向右跑 $v$ 个单位长度。\n\n请求出：能够使小 Z 经过 $n$ 个超市中每一个超市时，都不去逛超市的 $v$ 的最大值。\n\n\n规定 $v$ 必须是正整数，且小 Z 到达任意一个超市时，花费的时间必须为整数，换言之，你需要保证小 Z 到达任意一个超市的时间都是偶数。注意时间初始为 $0$。\n", "inputFormat": "输入共 $n+1$ 行。\n\n第 $1$ 行，$1$ 个正整数 $n$。\n\n第 $2\\sim n+1$ 行，每行 $1$ 个正整数，第 $i+1$ 行输入的正整数是 $a_i$。", "outputFormat": "输出共 $1$ 行。\n\n输出符合条件的 $v$ 的最大值。如果无解则输出 $-1$。", "hint": "### 【样例解释】\n对于样例 $1$，可以证明不存在符合要求的速度。\n\n对于样例 $2$，当 $v=5$ 时，到达第 $1\\sim5$ 个超市的时间分别为 $2$，$4$，$6$，$8$，$10$，均为偶数，符合题目要求。可以证明不存在更快的符合要求的速度。\n\n\n**本题采用捆绑测试**。\n\n|子任务编号|$n\\le$|$a_i\\le$|分值|\n|:--:|:--:|:--:|:--:|\n|$1$|$1$|$3\\times10^{18}$|$10$|\n|$2$|$25$|保证 $a_1\\le 2\\times 10^6$|$10$|\n|$3$|$10^4$|保证 $a_1\\le 2\\times 10^6$|$20$|\n|$4$|$2\\times10^6$|$3\\times10^{18}$|$60$|\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2\\times10^6$，$1\\le a_1<a_2<\\dots<a_{n-1}<a_n\\le3\\times10^{18}$。保证所有输入都是正整数。", "locale": "zh-CN"}}}
{"pid": "P10184", "type": "P", "difficulty": 4, "samples": [["5 3 \n3 2 5 1 1 ", "3 "], ["6 4 \n1 1 4 5 1 4 ", "3 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "贪心", "二分", "O2优化", "洛谷比赛"], "title": "[YDOI R1] whk", "background": "小 Z 要卷 whk。", "description": "小 Z 一共要卷 $n$ 门科目，第 $i$ 门科目他有且只有 $a_i$ 道题。有无数天时间，每天小 Z 可以做无数道题。\n\n如果小 Z 认为一天是有趣的，仅当他在这一天**至少**做了 $t$ 门科目的题。\n\n小 Z 想知道最多有多少天是有趣的。", "inputFormat": "第一行，$2$ 个正整数 $n,t$。\n\n接下来一行，有 $n$ 个整数，分别 $a_1,a_2,a_3,\\dots,a_{n-1},a_n$。\n", "outputFormat": "一个整数，输出小 Z 认为有趣的天数的最大值。", "hint": "Subtask 0 为 hack 数据，不计分。\n\n **本题采用捆绑测试**。\n| 子任务编号 | $n\\le$ | $a_i\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | \n| $1$ | $1000$ | $1000$ | 无 | $20$ | \n| $2$ | $5\\times10^5$ | $10^5$ | $t=1$ | $10$ |  \n| $3$ | $5\\times10^5$ | $1$ | 所有 $a_i$ 值都为 $1$ | $10$ |  \n| $4$ | $5\\times10^5$ | $10^6$ | 无 | $60$ |   \n\n\n\n对于所有数据，$1\\le t\\le n\\le5\\times10^5$，$1\\le a_i \\le 10^6$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YDOI R1] whk", "background": "小 Z 要卷 whk。", "description": "小 Z 一共要卷 $n$ 门科目，第 $i$ 门科目他有且只有 $a_i$ 道题。有无数天时间，每天小 Z 可以做无数道题。\n\n如果小 Z 认为一天是有趣的，仅当他在这一天**至少**做了 $t$ 门科目的题。\n\n小 Z 想知道最多有多少天是有趣的。", "inputFormat": "第一行，$2$ 个正整数 $n,t$。\n\n接下来一行，有 $n$ 个整数，分别 $a_1,a_2,a_3,\\dots,a_{n-1},a_n$。\n", "outputFormat": "一个整数，输出小 Z 认为有趣的天数的最大值。", "hint": "Subtask 0 为 hack 数据，不计分。\n\n **本题采用捆绑测试**。\n| 子任务编号 | $n\\le$ | $a_i\\le$ | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | \n| $1$ | $1000$ | $1000$ | 无 | $20$ | \n| $2$ | $5\\times10^5$ | $10^5$ | $t=1$ | $10$ |  \n| $3$ | $5\\times10^5$ | $1$ | 所有 $a_i$ 值都为 $1$ | $10$ |  \n| $4$ | $5\\times10^5$ | $10^6$ | 无 | $60$ |   \n\n\n\n对于所有数据，$1\\le t\\le n\\le5\\times10^5$，$1\\le a_i \\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P10185", "type": "P", "difficulty": 4, "samples": [["2\n1 2\n2 3 ", "38"], ["2\n18 2\n9 1", "786624"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "组合数学", "二项式定理"], "title": "[YDOI R1] Necklace", "background": "hdkk 正在做项链。", "description": "hdkk 有 $n$ 种颜色的珠子，每种珠子有 $a_i$ 颗，他可以选出任意颗珠子串成一串项链。\n\n每种珠子有一个漂亮值 $v_i$，hdkk 认为项链有一个美丽度，若第 $i$ 种珠子在项链中有 $cnt$ 颗并且 $cnt\\ge1$，则这串项链的美丽度会加上 $(v_i)^{cnt}$。\n\n\n\n现在他想知道，所有不同的项链的美丽度总和是多少，请你求出答案，并对 $10^9+7$ 取模。\n\n定义两串项链是不同的，当且仅当存在一颗珠子，它在一串项链中出现，在另一串中没有出现。\n\n注意：每颗珠子都是互不相同的，即使颜色一样。", "inputFormat": "第 $1$ 行有 $1$ 个正整数 $n$。\n\n第 $2$ 行有 $n$ 个整数，第 $i$ 个数表示 $a_i$。\n\n第 $3$ 行有 $n$ 个整数，第 $i$ 个数表示 $v_i$。\n\n\n", "outputFormat": "一个整数，所有不同项链的美丽度的总和对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 #1\n\n颜色 $1$：$\\left\\{1\\right\\}$，颜色 $2$：$\\left\\{2,3\\right\\}$。\n\n共有 $7$ 种不同的项链：$\\left \\{1 \\right \\},\\left \\{2\\right \\},\\left \\{3\\right \\},\\left \\{1,2 \\right \\},\\left \\{1,3 \\right \\},\\left \\{2,3 \\right \\},\\left \\{1,2,3 \\right \\}$，美丽度总和为 $2+3+3+(2+3)+(2+3)+3^2+(2+3^2)=38$。\n\n\n**本题采用捆绑测试。**\n\n|子任务编号|$n\\le$|$a_i\\le$|分值|\n|:--:|:--:|:--:|:--:|\n|$1$|$4$|$5$|$15$|\n|$2$|$10^3$|$10^3$|$25$|\n|$3$|$2\\times10^5$|$10^9$|$60$|\n\n对于所有数据，保证 $1\\le n\\le2\\times10^5$，$1\\le a_i\\le10^9$，$1\\le v_i\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YDOI R1] Necklace", "background": "hdkk 正在做项链。", "description": "hdkk 有 $n$ 种颜色的珠子，每种珠子有 $a_i$ 颗，他可以选出任意颗珠子串成一串项链。\n\n每种珠子有一个漂亮值 $v_i$，hdkk 认为项链有一个美丽度，若第 $i$ 种珠子在项链中有 $cnt$ 颗并且 $cnt\\ge1$，则这串项链的美丽度会加上 $(v_i)^{cnt}$。\n\n\n\n现在他想知道，所有不同的项链的美丽度总和是多少，请你求出答案，并对 $10^9+7$ 取模。\n\n定义两串项链是不同的，当且仅当存在一颗珠子，它在一串项链中出现，在另一串中没有出现。\n\n注意：每颗珠子都是互不相同的，即使颜色一样。", "inputFormat": "第 $1$ 行有 $1$ 个正整数 $n$。\n\n第 $2$ 行有 $n$ 个整数，第 $i$ 个数表示 $a_i$。\n\n第 $3$ 行有 $n$ 个整数，第 $i$ 个数表示 $v_i$。\n\n\n", "outputFormat": "一个整数，所有不同项链的美丽度的总和对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 #1\n\n颜色 $1$：$\\left\\{1\\right\\}$，颜色 $2$：$\\left\\{2,3\\right\\}$。\n\n共有 $7$ 种不同的项链：$\\left \\{1 \\right \\},\\left \\{2\\right \\},\\left \\{3\\right \\},\\left \\{1,2 \\right \\},\\left \\{1,3 \\right \\},\\left \\{2,3 \\right \\},\\left \\{1,2,3 \\right \\}$，美丽度总和为 $2+3+3+(2+3)+(2+3)+3^2+(2+3^2)=38$。\n\n\n**本题采用捆绑测试。**\n\n|子任务编号|$n\\le$|$a_i\\le$|分值|\n|:--:|:--:|:--:|:--:|\n|$1$|$4$|$5$|$15$|\n|$2$|$10^3$|$10^3$|$25$|\n|$3$|$2\\times10^5$|$10^9$|$60$|\n\n对于所有数据，保证 $1\\le n\\le2\\times10^5$，$1\\le a_i\\le10^9$，$1\\le v_i\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P10186", "type": "P", "difficulty": 6, "samples": [["2", "6"], ["1919810", "107114211"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "素数判断,质数,筛法", "莫比乌斯反演", "杜教筛"], "title": "[YDOI R1] Lattice", "background": "se 喜欢点阵。", "description": "se 有一个正方形点阵，这个点阵以 $(1,1)$ 为左下角，以 $(n,n)$ 为右上角。\n\nse 还有一条直线，其表达式为 $y=kx$，其中 $k\\in(0,\\infty)$。\n\n对于任意一个 $k$，设该直线经过了 $cnt$ 个点阵中的点，se 对这条直线有一个喜爱程度，为 $cnt^2$。\n\nse 想知道所有直线的喜爱程度和对 $10^9+7$ 取模的结果，请你告诉 se。", "inputFormat": "一行一个整数 $n$。", "outputFormat": "输出一个整数，表示喜爱程度和对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 #1\n当 $k$ 为 $\\frac{1}{2}$ 时，直线过点阵中的点 $(2,1)$，喜爱程度为 $1^2=1$；当 $k$ 为 $1$ 时，直线过点阵中的点 $(1,1)$ 和点 $(2,2)$，喜爱程度为 $2^2=4$；当 $k$ 为 $2$ 时，直线过点阵中的点 $(1,2)$，喜爱程度为 $1^2=1$。喜爱程度和为 $1+4+1=6$。\n### 数据范围\n**本题采用捆绑测试**。\n|子任务编号|$n\\le$|分值|\n|:--:|:--:|:--:|\n|$1$|$8$|$5$|\n|$2$|$10^3$|$15$|\n|$3$|$10^6$|$30$|\n|$4$|$2^{31}-1$|$50$|\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2^{31}-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YDOI R1] Lattice", "background": "se 喜欢点阵。", "description": "se 有一个正方形点阵，这个点阵以 $(1,1)$ 为左下角，以 $(n,n)$ 为右上角。\n\nse 还有一条直线，其表达式为 $y=kx$，其中 $k\\in(0,\\infty)$。\n\n对于任意一个 $k$，设该直线经过了 $cnt$ 个点阵中的点，se 对这条直线有一个喜爱程度，为 $cnt^2$。\n\nse 想知道所有直线的喜爱程度和对 $10^9+7$ 取模的结果，请你告诉 se。", "inputFormat": "一行一个整数 $n$。", "outputFormat": "输出一个整数，表示喜爱程度和对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 #1\n当 $k$ 为 $\\frac{1}{2}$ 时，直线过点阵中的点 $(2,1)$，喜爱程度为 $1^2=1$；当 $k$ 为 $1$ 时，直线过点阵中的点 $(1,1)$ 和点 $(2,2)$，喜爱程度为 $2^2=4$；当 $k$ 为 $2$ 时，直线过点阵中的点 $(1,2)$，喜爱程度为 $1^2=1$。喜爱程度和为 $1+4+1=6$。\n### 数据范围\n**本题采用捆绑测试**。\n|子任务编号|$n\\le$|分值|\n|:--:|:--:|:--:|\n|$1$|$8$|$5$|\n|$2$|$10^3$|$15$|\n|$3$|$10^6$|$30$|\n|$4$|$2^{31}-1$|$50$|\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2^{31}-1$。", "locale": "zh-CN"}}}
{"pid": "P10187", "type": "P", "difficulty": 2, "samples": [["3\n8\n10\n12", "B\nE\nB"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "博弈论", "USACO", "2024", "O2优化"], "title": "[USACO24FEB] Palindrome Game B", "background": "", "description": "Bessie 和 Elsie 正在使用一堆初始时共 $S$ 个石子（$1\\le S<10^{10^5}$）进行一个游戏。两头奶牛依次行动，Bessie 先行动。当轮到一头奶牛行动时，她必须从堆中取走 $x$ 个石子，其中 $x$ 是该奶牛选定的任意正整数回文数。如果当一头奶牛的回合开始时石子堆是空的，那么这头奶牛就输了。\n\n**定义**：一个正整数如果从前向后和从后向前读相同，则该数为回文数；回文数的例子有 $1$，$121$ 和 $9009$。数不允许有前导零；例如，$990$ **不是**回文数。\n\n有 $T$（$1\\le T\\le 10$）个独立的测试用例。对于每一个测试用例，输出如果两头奶牛都采取最优策略，谁会赢得游戏。 ", "inputFormat": "输入的第一行包含 $T$，为测试用例的数量。以下 $T$ 行为测试用例，每个测试用例一行。\n\n每个测试用例均由一个整数 $S$ 指定。 ", "outputFormat": "对于每一个测试用例输出一行，如果 Bessie 在最优策略下可以从一堆 $S$ 个石子的石子堆开始赢得游戏，则输出 `B`，否则输出 `E`。", "hint": "### 样例解释\n\n对于第一个测试用例，Bessie 可以在第一次行动中取走所有石子，因为 $8$ 是回文数，使她获胜。\n\n对于第二个测试用例，$10$ 不是回文数，因此 Bessie 无法在第一次行动中取走所有石子。无论 Bessie 第一回合取走多少石子，Elsie 总能在第二回合取走所有余下的石子，使她获胜。\n\n对于第三个测试用例，可以证明在最优策略下 Bessie 可以获胜。 \n\n### 测试点性质\n\n- 测试点 $2-4$：$S<100$。\n- 测试点 $5-7$：$S<10^6$。\n- 测试点 $8-10$：$S<10^9$。\n- 测试点 $11-13$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO24FEB] Palindrome Game B", "background": null, "description": "Bessie and Elsie are playing a game with a pile of stones that initially contains $S$ stones ($1\\le S<10^{10^5}$). The two cows alternate turns,  with Bessie going first. When it is a cow's turn, she must remove $x$ stones from the pile, where $x$ is any positive integer palindrome of the cow's choosing. If the pile is empty when a cow's turn starts, that cow loses.  \n\n**Definition:** A positive integer is a palindrome if it reads the same forward and backward; examples of palindromes include 1, 121, and 9009. Leading zeros are not allowed; e.g., 990 is *not* a palindrome.  \n\nThere are $T$ ($1\\le T\\le 10$) independent test cases. For each test case,  print who wins the game if both cows play optimally.", "inputFormat": "The first line contains $T$, the number of test cases. The next $T$ lines describe the test cases, one line per test case.  \n\nEach test case is specified by a single integer $S$.", "outputFormat": "For each test case, output B if Bessie wins the game under optimal play starting with a pile of stones of size $S$, or E otherwise, on a new line.", "hint": "For the first test case, Bessie can remove all the stones on her first move, since $8$ is a palindrome, guaranteeing her win.  \n\nFor the second test case, $10$ is not a palindrome, so Bessie cannot remove all the stones on her first move. Regardless of how many stones  Bessie removes on her first move, Elsie can always remove all remaining stones on her second move, guaranteeing her win.  \n\nFor the third test case, it can be proven that Bessie wins under optimal play.  \n\n\n#### SCORING:\n- Inputs 2-4: $S<100$\n- Inputs 5-7: $S<10^6$\n- Inputs 8-10: $S<10^9$\n- Inputs 11-13: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Palindrome Game B", "background": "", "description": "Bessie 和 Elsie 正在使用一堆初始时共 $S$ 个石子（$1\\le S<10^{10^5}$）进行一个游戏。两头奶牛依次行动，Bessie 先行动。当轮到一头奶牛行动时，她必须从堆中取走 $x$ 个石子，其中 $x$ 是该奶牛选定的任意正整数回文数。如果当一头奶牛的回合开始时石子堆是空的，那么这头奶牛就输了。\n\n**定义**：一个正整数如果从前向后和从后向前读相同，则该数为回文数；回文数的例子有 $1$，$121$ 和 $9009$。数不允许有前导零；例如，$990$ **不是**回文数。\n\n有 $T$（$1\\le T\\le 10$）个独立的测试用例。对于每一个测试用例，输出如果两头奶牛都采取最优策略，谁会赢得游戏。 ", "inputFormat": "输入的第一行包含 $T$，为测试用例的数量。以下 $T$ 行为测试用例，每个测试用例一行。\n\n每个测试用例均由一个整数 $S$ 指定。 ", "outputFormat": "对于每一个测试用例输出一行，如果 Bessie 在最优策略下可以从一堆 $S$ 个石子的石子堆开始赢得游戏，则输出 `B`，否则输出 `E`。", "hint": "### 样例解释\n\n对于第一个测试用例，Bessie 可以在第一次行动中取走所有石子，因为 $8$ 是回文数，使她获胜。\n\n对于第二个测试用例，$10$ 不是回文数，因此 Bessie 无法在第一次行动中取走所有石子。无论 Bessie 第一回合取走多少石子，Elsie 总能在第二回合取走所有余下的石子，使她获胜。\n\n对于第三个测试用例，可以证明在最优策略下 Bessie 可以获胜。 \n\n### 测试点性质\n\n- 测试点 $2-4$：$S<100$。\n- 测试点 $5-7$：$S<10^6$。\n- 测试点 $8-10$：$S<10^9$。\n- 测试点 $11-13$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10188", "type": "P", "difficulty": 4, "samples": [["3 1\nRRL\n1 1 1", "2"], ["5 20\nLLLLL\n3 3 2 3 3", "14"], ["9 5\nRRRLRRLLR\n5 8 4 9 3 4 9 5 4", "38"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2024", "O2优化", "图论建模"], "title": "[USACO24FEB] Milk Exchange B", "background": "", "description": "Farmer John 的 $N$（$1\\le N\\le 2\\cdot 10^5$）头奶牛排成一圈，使得对于 $1,2,\\ldots,N−1$ 中的每个 $i$，奶牛 $i$ 右边的奶牛是奶牛 $i+1$，而奶牛 $N$ 右边的奶牛是奶牛 $1$。第 $i$ 头奶牛有一个容量为整数 $a_i$（$1\\le a_i\\le 10^9$）升的桶。所有桶初始时都是满的。\n\n每一分钟，奶牛都会根据一个字符串 $s_1s_2\\ldots s_N$\n传递牛奶，该字符串仅由字符 `L` 和 `R` 组成。当第 $i$ 头奶牛至少有 $1$ 升牛奶时，如果 $s_i=\\texttt{L}$，她会将 $1$ 升牛奶传递给她左边的奶牛，如果 $s_i=\\texttt R$ 则传递给右边的奶牛。所有交换同时发生（即，如果一头奶牛的桶是满的，送出一升牛奶，但也收到一升，则她的牛奶量保持不变）。如果此时一头奶牛的牛奶量超过 $a_i$，则多余的牛奶会损失。\n\nFJ 想要知道：经过 $M$ 分钟（$1\\le M\\le 10^9$）后，所有奶牛总共还余下多少牛奶？ ", "inputFormat": "输入的第一行包含 $N$ 和 $M$。\n\n第二行包含一个字符串 $s_1s_2\\ldots s_N$，仅由字符 `L` 或 `R` 组成，表示每头奶牛传递牛奶的方向。\n\n第三行包含整数 $a_1,a_2,\\ldots,a_N$，为每个桶的容量。 ", "outputFormat": "输出一个整数，为 $M$ 分钟后所有奶牛总共余下的牛奶量。 \n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 `long long`）。**", "hint": "### 样例解释 1\n\n奶牛 $2$ 和 $3$ 互相传递一升牛奶，因此她们的牛奶得以保留。当奶牛 $1$ 将牛奶传递给奶牛 $2$ 时，奶牛 $2$ 的桶会溢出，从而一分钟后损失了一升牛奶。 \n\n### 样例解释 2\n\n 每头奶牛都将一升牛奶传递给左边的奶牛，并从右边的奶牛那里获得一升牛奶，因此无论经过多长时间所有牛奶都会被保留下来。 \n \n### 样例解释 3\n\n初始时，共有 $51$ 升牛奶。$5$ 分钟后，奶牛 $3$，$6$ 和 $7$ 将分别损失 $5$，$3$ 和 $5$ 升牛奶。因此，总共还剩下 $38$ 升牛奶。\n\n### 测试点性质\n\n- 测试点 $4-8$：$N,M\\le 1000$。\n- 测试点 $9-16$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO24FEB] Milk Exchange B", "background": null, "description": "Farmer John's $N$ $(1 \\leq N \\leq 2 \\cdot 10^5)$ cows are lined up in a circle such that for each $i$ in $1,2,\\dots,N-1$, the cow to the right of cow $i$ is cow $i+1$, and the cow to the right of cow $N$ is cow $1$. The $i$th cow has a bucket with integer capacity $a_i$ $(1 \\leq a_i \\leq 10^9)$ liters. All buckets are initially full.  \n\nEvery minute, the cows exchange milk according to a string $s_1s_2\\dots s_N$  consisting solely of the characters $\\text{‘L’}$ and $\\text{‘R’}$.  if the $i$th cow has at least $1$ liter of milk, she will pass $1$ liter of milk to the cow to her left if $s_i=\\text{‘L’}$, or to the right if $s_i=\\text{‘R’}$.  All exchanges happen simultaneously (i.e., if a cow has a full bucket but gives away a liter of milk but also receives a liter, her milk is preserved). If a cow's total milk ever ends up exceeding $a_i$, then the excess milk will be lost.  \n\nFJ wants to know: after $M$ minutes $(1 \\leq M \\leq 10^9$), what is the total amount of milk left among all cows?", "inputFormat": "The first line contains $N$ and $M$.  \n\nThe second line contains a string $s_1s_2\\dots s_N$ consisting solely of the characters $\\text{‘L’}$ or $\\text{‘R’}$, denoting the direction each cow will pass their milk in.  \n\nThe third line contains integers $a_1, a_2, \\dots, a_N$, the capacities of each bucket.", "outputFormat": "Output an integer, the sum of milk among all cows after $M$ minutes.  \n\n**Note that the large size of integers involved in this problem may require the use of 64-bit integer data types (e.g., a \"long long\" in C/C++).**", "hint": "##### For Sample 1:\nCows $2$ and $3$ pass each other one liter of milk, so their milk is preserved. When cow $1$ passes their milk to cow $2$, cow $2$'s bucket overflows, and one liter of milk is lost after one minute.  \n\n\n##### For Sample 2:\nEach cow is passing a liter of milk to the cow on the left and gaining a liter of milk from the cow on the right, so all of the milk is preserved regardless of how much time passes.  \n\n##### For Sample 3:\nInitially, there are a total of 51 liters of milk. After 5 minutes, cows $3$, $6$, and $7$ will lose 5, 3, and 5 liters of milk respectively. Therefore, a total of 38 liters of milk remain.  \n#### SCORING:\n- Inputs 4-8: $N,M \\le 1000$\n- Inputs 9-16: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Milk Exchange B", "background": "", "description": "Farmer John 的 $N$（$1\\le N\\le 2\\cdot 10^5$）头奶牛排成一圈，使得对于 $1,2,\\ldots,N−1$ 中的每个 $i$，奶牛 $i$ 右边的奶牛是奶牛 $i+1$，而奶牛 $N$ 右边的奶牛是奶牛 $1$。第 $i$ 头奶牛有一个容量为整数 $a_i$（$1\\le a_i\\le 10^9$）升的桶。所有桶初始时都是满的。\n\n每一分钟，奶牛都会根据一个字符串 $s_1s_2\\ldots s_N$\n传递牛奶，该字符串仅由字符 `L` 和 `R` 组成。当第 $i$ 头奶牛至少有 $1$ 升牛奶时，如果 $s_i=\\texttt{L}$，她会将 $1$ 升牛奶传递给她左边的奶牛，如果 $s_i=\\texttt R$ 则传递给右边的奶牛。所有交换同时发生（即，如果一头奶牛的桶是满的，送出一升牛奶，但也收到一升，则她的牛奶量保持不变）。如果此时一头奶牛的牛奶量超过 $a_i$，则多余的牛奶会损失。\n\nFJ 想要知道：经过 $M$ 分钟（$1\\le M\\le 10^9$）后，所有奶牛总共还余下多少牛奶？ ", "inputFormat": "输入的第一行包含 $N$ 和 $M$。\n\n第二行包含一个字符串 $s_1s_2\\ldots s_N$，仅由字符 `L` 或 `R` 组成，表示每头奶牛传递牛奶的方向。\n\n第三行包含整数 $a_1,a_2,\\ldots,a_N$，为每个桶的容量。 ", "outputFormat": "输出一个整数，为 $M$ 分钟后所有奶牛总共余下的牛奶量。 \n\n**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 `long long`）。**", "hint": "### 样例解释 1\n\n奶牛 $2$ 和 $3$ 互相传递一升牛奶，因此她们的牛奶得以保留。当奶牛 $1$ 将牛奶传递给奶牛 $2$ 时，奶牛 $2$ 的桶会溢出，从而一分钟后损失了一升牛奶。 \n\n### 样例解释 2\n\n 每头奶牛都将一升牛奶传递给左边的奶牛，并从右边的奶牛那里获得一升牛奶，因此无论经过多长时间所有牛奶都会被保留下来。 \n \n### 样例解释 3\n\n初始时，共有 $51$ 升牛奶。$5$ 分钟后，奶牛 $3$，$6$ 和 $7$ 将分别损失 $5$，$3$ 和 $5$ 升牛奶。因此，总共还剩下 $38$ 升牛奶。\n\n### 测试点性质\n\n- 测试点 $4-8$：$N,M\\le 1000$。\n- 测试点 $9-16$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10189", "type": "P", "difficulty": 2, "samples": [["5 5\n3 5 7 9 12\n4 2 3 3 8\n1 5\n1 6\n3 3\n4 2\n5 1", "YES\nNO\nYES\nYES\nNO"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "USACO", "2024", "O2优化"], "title": "[USACO24FEB] Maximizing Productivity B", "background": "", "description": "Farmer John 有 $N$（$1\\le N\\le 2\\cdot 10^5$）个农场，编号为 $1$ 到 $N$。已知 FJ 会在时刻 $c_i$ 关闭农场 $i$。Bessie 在时刻 $S$ 起床，她希望在农场关闭前访问尽可能多的农场，从而最大限度地提高她这一天的生产力。她计划在时刻 $t_i+S$ 访问农场 $i$。Bessie 必须于严格早于 Farmer John 关闭农场的时刻抵达农场才能成功进行访问。\n\nBessie 有 $Q$（$1\\le Q\\le 2\\cdot 10^5$）个询问。对于每个询问，她会给你两个整数 $S$ 和 $V$。对于每个询问，输出当 Bessie 在时刻 $S$ 起床是否可以访问至少 $V$ 个农场。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n第二行包含 $c_1,c_2,c_3\\ldots c_N$（$1\\le c_i\\le 10^6$）。\n\n第三行包含 $t_1,t_2,t_3\\ldots t_N$（$1\\le t_i\\le 10^6$）。\n\n以下 $Q$ 行，每行包含两个整数 $V$（$1\\le V\\le N$）和 $S$（$1\\le S\\le 10^6$）。 ", "outputFormat": "对 $Q$ 个询问的每一个输出一行，输出 `YES`（是）或 `NO`（否）。", "hint": "### 样例解释\n\n对于第一个询问，Bessie 将在时间 $t=[9,7,8,8,13]$ 访问农场， 因此她在 FJ 关闭农场之前能准时访问到的只有农场 $4$。\n\n对于第二个询问，Bessie 将无法准时访问到任何农场。\n\n对于第三个询问，Bessie 将可以准时访问到农场 $3,4,5$。\n\n对于第四个和第五个询问，Bessie 将能够准时访问除第一个农场之外的所有农场。\n\n### 测试点性质\n\n- 测试点 $2-4$：$N,Q\\le 10^3$。\n- 测试点 $5-9$：$c_i,t_i\\le 20$。\n- 测试点 $10-17$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO24FEB] Maximizing Productivity B", "background": null, "description": "Farmer John has $N$ ($1 \\leq N \\leq 2 \\cdot 10^5$) farms, numbered from $1$ to $N$. It is known that FJ closes farm $i$ at time $c_i$. Bessie wakes up at time $S$, and wants to maximize the productivity of her day by visiting as many farms as possible before they close. She plans to visit farm $i$ on time $t_i + S$. Bessie must arrive at a farm strictly before Farmer John closes it to actually visit it.  \n\nBessie has $Q$ $(1 \\leq Q \\leq 2 \\cdot 10^5)$ queries. For each query, she gives you two integers $S$ and $V$. For each query, output whether Bessie can visit at least $V$ farms if she wakes up at time $S$.", "inputFormat": "The first line consists of $N$ and $Q$.  \n\nThe second line consists of $c_1, c_2, c_3 \\dots c_N$ ($1 \\leq c_i \\leq 10^6$).  \n\nThe third line consists of $t_1, t_2, t_3 \\dots t_N$ ($1 \\leq t_i \\leq 10^6$).  \n\nThe next $Q$ lines each consist of two integers $V$ ($1 \\leq V \\leq N$) and $S$ ($1 \\leq S \\leq 10^6$).", "outputFormat": "For each of the $Q$ queries, output YES or NO on a new line.", "hint": "For the first query, Bessie will visit the farms at time $t = [9, 7, 8, 8, 13]$, so she will only get to visit farm $4$ on time before FJ closes the farm.  \n\nFor the second query, Bessie will not be able to visit any of the farms on time.  \n\nFor the third query, Bessie will visit farms $3, 4, 5$ on time.  \n\nFor the fourth and fifth queries, Bessie will be able to visit all but the first farm on time.  \n\n#### SCORING:\n- Inputs 2-4: $N,Q\\le 10^3$\n- Inputs 5-9: $c_i, t_i \\le 20$\n- Inputs 10-17: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Maximizing Productivity B", "background": "", "description": "Farmer John 有 $N$（$1\\le N\\le 2\\cdot 10^5$）个农场，编号为 $1$ 到 $N$。已知 FJ 会在时刻 $c_i$ 关闭农场 $i$。Bessie 在时刻 $S$ 起床，她希望在农场关闭前访问尽可能多的农场，从而最大限度地提高她这一天的生产力。她计划在时刻 $t_i+S$ 访问农场 $i$。Bessie 必须于严格早于 Farmer John 关闭农场的时刻抵达农场才能成功进行访问。\n\nBessie 有 $Q$（$1\\le Q\\le 2\\cdot 10^5$）个询问。对于每个询问，她会给你两个整数 $S$ 和 $V$。对于每个询问，输出当 Bessie 在时刻 $S$ 起床是否可以访问至少 $V$ 个农场。", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n第二行包含 $c_1,c_2,c_3\\ldots c_N$（$1\\le c_i\\le 10^6$）。\n\n第三行包含 $t_1,t_2,t_3\\ldots t_N$（$1\\le t_i\\le 10^6$）。\n\n以下 $Q$ 行，每行包含两个整数 $V$（$1\\le V\\le N$）和 $S$（$1\\le S\\le 10^6$）。 ", "outputFormat": "对 $Q$ 个询问的每一个输出一行，输出 `YES`（是）或 `NO`（否）。", "hint": "### 样例解释\n\n对于第一个询问，Bessie 将在时间 $t=[9,7,8,8,13]$ 访问农场， 因此她在 FJ 关闭农场之前能准时访问到的只有农场 $4$。\n\n对于第二个询问，Bessie 将无法准时访问到任何农场。\n\n对于第三个询问，Bessie 将可以准时访问到农场 $3,4,5$。\n\n对于第四个和第五个询问，Bessie 将能够准时访问除第一个农场之外的所有农场。\n\n### 测试点性质\n\n- 测试点 $2-4$：$N,Q\\le 10^3$。\n- 测试点 $5-9$：$c_i,t_i\\le 20$。\n- 测试点 $10-17$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10190", "type": "P", "difficulty": 4, "samples": [["3\n2 1\n1 3 6\n4 6 3\n1 -1 2 -2 3 -3 4 -4\n2 1\n1 3 6\n4 6 3\n1 1 2 2 3 3 4 4\n2 1\n1 3 3\n4 6 3\n1 -1 2 -2 3 -3 4 -4", "17\n-1\n11"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "二分", "USACO", "2024", "O2优化"], "title": "[USACO24FEB] Target Practice II S", "background": "**注意：本题的时间限制为 2.5 秒，通常限制的 1.25 倍。**\n\n**注意：这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 `long long`）。**", "description": "巴黎哞运会即将来临，Farmer John 正在对他的奶牛队进行射箭训练！他在二维坐标平面上设置了以下练习。\n\n有 $N$（$1\\le N\\le 4\\cdot 10^4$）个四边与坐标轴平行的矩形箭靶和 $4N$ 头奶牛。每头牛都必须被分配一个不同的箭靶顶点。对于 $1\\le i\\le N$，在时刻 $i$：\n\n1. 箭靶 $i$ 出现。\n2. 分配其顶点的 $4$ 头奶牛向它们射箭。\n3. 如果奶牛的箭在击中所分配的顶点之前穿过箭靶内部，或未命中，则奶牛们的练习失败。\n4. 箭靶消失，为下一个箭靶腾出空间。\n\n每头牛都位于 $y$ 轴（$x=0$）上，每个箭靶都是一个矩形，其中箭靶 $i$ 的左下顶点坐标为 $(X_1,y^{(i)}_1)$，右上顶点坐标为 $(x^{(i)}_2,y^{(i)}_2)$。所有坐标满足 $1\\le X_1<x^{(i)}_2\\le 10^9$ 以及 $1\\le y^{(i)}_1<y^{(i)}_2\\le 10^9$（注意：$X_1$ 对于每个箭靶都是相同的）。\n\n此外，每头奶牛都有一个正在钻研的「瞄准」角度。因此她们在射箭时会转向特定的角度。考虑到她们的箭从她们的位置沿直线射向指定的顶点，奶牛 $i$ 的箭的轨迹可以用轨迹的斜率 $s_i$（$0<|s_i|<10^9$）来表示。\n\n为了能够仔细检查奶牛们的技术，Farmer John 希望尽量缩短最远的奶牛之间的距离。如果 Farmer John 以最佳方式给每头奶牛分配箭靶顶点并将她们放置在 $y$ 轴上，你能否帮助他求出最远奶牛之间的最小距离是多少，或者奶牛是否总是会练习失败？\n\n每个测试点包含 $T$（$1\\le T\\le 10$）个独立的测试用例。输入保证所有测试用例的 $N$ 之和不超过 $4\\cdot 10^4$。 ", "inputFormat": "输入的第一行包含 $T$（$1\\le T\\le 10$），为测试用例的数量。每个测试用例的描述如下：\n\n每个测试用例的第一行包含两个整数 $N$ 和 $X_1$，分别为箭靶的数量以及所有箭靶的左端的 $x$ 坐标。\n\n以下 $N$ 行，第 $i$ 行包含三个整数 $y^{(i)}_1$，$y^{(i)}_2$ 和 $x^{(i)}_2$，分别为第 $i$ 个箭靶的下端 $y$ 坐标，上端 $y$ 坐标和右端 $x$ 坐标。\n\n最后一行包含 $4N$ 个整数 $s_1,s_2,\\ldots,s_{4N}$，其中 $s_i$ 表示奶牛 $i$ 的射箭轨迹的斜率。", "outputFormat": "输出最远奶牛之间的最小可能距离，或如果奶牛总是练习失败时输出 $−1$。", "hint": "### 样例解释\n\n对于测试用例 $1$，一个最佳分配方案是分别为奶牛 $1-8$ 分配以下目标顶点：\n\n$$(6,1),(6,3),(3,4),(3,6),(1,4),(1,3),(1,6),(1,1)$$\n\n这得出了奶牛 $1-8$ 的 $y$ 坐标如下：\n\n$$−5,9,−2,12,1,6,2,5$$\n\n这给出了最小距离 $12−(−5)=17$。\n\n第二个测试用例的答案是不可能的原因之一是，如果箭不穿过箭靶 $1$ 的内部，不可能射中 $(6,3)$ 处的顶点（箭靶 $1$ 的右上顶点）。\n\n### 测试点性质\n\n- 测试点 $2$：对于所有的 $1\\le i\\le 4N$，$|S_i|$ 均相同。\n- 测试点 $3-9$：所有测试用例的 $N$ 之和不超过 $1000$。\n- 测试点 $10-15$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO24FEB] Target Practice II S", "background": "", "description": "**Note: The time limit for this problem is 2.5s, 1.25 times the default.**  \n\n**Note: The large size of integers involved in this problem may require the use of 64-bit integer data types (e.g., a \"long long\" in C/C++).**  \n\nThe Paris Moolympics are coming up and Farmer John is training his team of cows in archery! He has set up the following exercise on the 2D coordinate plane.  \n\nThere are $N (1 \\leq N \\leq 4 \\cdot 10^4)$ axis-aligned rectangular targets and $4N$ cows. Every cow must be assigned to a different target vertex. At moment $i$, for $1 \\leq i \\leq N$: \n1.  Target $i$ appears.\n1.  The $4$ cows assigned to its vertices shoot at them.\n1.  If a cow's shot passes through the interior of the target before it hits the assigned vertex or misses, the cows **fail** the exercise.\n1.  The target disappears to make space for the next one.  \n\nEach cow is located on the $y$-axis $(x = 0)$, and each target is a rectangle where target $i$ has its lower left coordinate at $(X_1, y_1^{(i)})$ and its upper right coordinate at $(x_2^{(i)}, y_2^{(i)})$. The coordinates also satisfy $1 \\leq X_1 < x_2^{(i)}\\leq 10^9$ and $1 \\leq y_1^{(i)} <  y_2^{(i)} \\leq 10^9$ (Note: $X_1$ is the same for every target).  \n\nIn addition, each cow has a \"focus\" angle they are working on. Therefore, they will turn at a specific angle when shooting. Given that their shot travels in a straight line from their position towards their assigned vertex, the trajectory of cow $i$'s arrow can be described by $s_i$ $(0 < |s_i| < 10^9)$, the slope of the trajectory.  \n\nSo that he can carefully examine the cows' technique, Farmer John wants to minimize the distance between the furthest cows. If Farmer John were to optimally assign each cow to a target vertex and place them on the $y$-axis, can you help him determine what the minimum distance between the furthest cows would be or if the cows will always fail the exercise?  \n\nEach input contains $T$ ($1 \\leq T \\leq 10$) independent test cases. The sum of $N$ across all test cases is guaranteed to not exceed $4\\cdot 10^4$.", "inputFormat": "The first line contains $T$ ($1 \\leq T \\leq 10$), the number of independent test cases. Each test case is described as follows:  \n\nThe first line of each test case contains two integers, $N$ and $X_1$, the number of targets and the left-most $x$-coordinate of the targets respectively.  \n\nThis is followed by $N$ lines with the $i$-th line consisting of three integers, $y_1^{(i)}$, $y_2^{(i)}$, and $x_2^{(i)}$, the lower $y$-coordinate, the upper $y$-coordinate, and the right $x$-coordinate of the $i$-th target respectively.  \n\nThe last line consists of $4N$ integers, $s_1, s_2, \\dots, s_{4N}$ where $s_i$ denotes the slope of cow $i$'s shot trajectory.", "outputFormat": "The minimum possible distance between the furthest cows or $-1$ if the cows will always fail the exercise.", "hint": "One optimal assignment for test case 1 is the following target vertices for cows 1-8 respectively: \n$$(6, 1), (6,3), (3,4), (3,6), (1,4), (1,3), (1,6), (1,1)$$ \nThis gives the following $y$ locations for cows 1-8 respectively: \n$$-5, 9, -2, 12, 1, 6, 2, 5$$  \n\nThis gives a minimum distance of $12-(-5) = 17$.  \n\nOne reason the second test case is impossible is because it is impossible to shoot the vertex at $(6, 3)$ (the top right vertex of target 1) without the shot passing through the interior of target 1.  \n\n\n#### SCORING:\n- Input 2: $|S_i|$ is the same for all $1 \\leq i \\leq 4N$.\n- Input 3-9: The sum of $N$ across all testcases is at most $1000$.\n- Inputs 10-15: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Target Practice II S", "background": "**注意：本题的时间限制为 2.5 秒，通常限制的 1.25 倍。**\n\n**注意：这个问题涉及到的整数可能需要使用 64 位整数型（例如，C/C++ 中的 `long long`）。**", "description": "巴黎哞运会即将来临，Farmer John 正在对他的奶牛队进行射箭训练！他在二维坐标平面上设置了以下练习。\n\n有 $N$（$1\\le N\\le 4\\cdot 10^4$）个四边与坐标轴平行的矩形箭靶和 $4N$ 头奶牛。每头牛都必须被分配一个不同的箭靶顶点。对于 $1\\le i\\le N$，在时刻 $i$：\n\n1. 箭靶 $i$ 出现。\n2. 分配其顶点的 $4$ 头奶牛向它们射箭。\n3. 如果奶牛的箭在击中所分配的顶点之前穿过箭靶内部，或未命中，则奶牛们的练习失败。\n4. 箭靶消失，为下一个箭靶腾出空间。\n\n每头牛都位于 $y$ 轴（$x=0$）上，每个箭靶都是一个矩形，其中箭靶 $i$ 的左下顶点坐标为 $(X_1,y^{(i)}_1)$，右上顶点坐标为 $(x^{(i)}_2,y^{(i)}_2)$。所有坐标满足 $1\\le X_1<x^{(i)}_2\\le 10^9$ 以及 $1\\le y^{(i)}_1<y^{(i)}_2\\le 10^9$（注意：$X_1$ 对于每个箭靶都是相同的）。\n\n此外，每头奶牛都有一个正在钻研的「瞄准」角度。因此她们在射箭时会转向特定的角度。考虑到她们的箭从她们的位置沿直线射向指定的顶点，奶牛 $i$ 的箭的轨迹可以用轨迹的斜率 $s_i$（$0<|s_i|<10^9$）来表示。\n\n为了能够仔细检查奶牛们的技术，Farmer John 希望尽量缩短最远的奶牛之间的距离。如果 Farmer John 以最佳方式给每头奶牛分配箭靶顶点并将她们放置在 $y$ 轴上，你能否帮助他求出最远奶牛之间的最小距离是多少，或者奶牛是否总是会练习失败？\n\n每个测试点包含 $T$（$1\\le T\\le 10$）个独立的测试用例。输入保证所有测试用例的 $N$ 之和不超过 $4\\cdot 10^4$。 ", "inputFormat": "输入的第一行包含 $T$（$1\\le T\\le 10$），为测试用例的数量。每个测试用例的描述如下：\n\n每个测试用例的第一行包含两个整数 $N$ 和 $X_1$，分别为箭靶的数量以及所有箭靶的左端的 $x$ 坐标。\n\n以下 $N$ 行，第 $i$ 行包含三个整数 $y^{(i)}_1$，$y^{(i)}_2$ 和 $x^{(i)}_2$，分别为第 $i$ 个箭靶的下端 $y$ 坐标，上端 $y$ 坐标和右端 $x$ 坐标。\n\n最后一行包含 $4N$ 个整数 $s_1,s_2,\\ldots,s_{4N}$，其中 $s_i$ 表示奶牛 $i$ 的射箭轨迹的斜率。", "outputFormat": "输出最远奶牛之间的最小可能距离，或如果奶牛总是练习失败时输出 $−1$。", "hint": "### 样例解释\n\n对于测试用例 $1$，一个最佳分配方案是分别为奶牛 $1-8$ 分配以下目标顶点：\n\n$$(6,1),(6,3),(3,4),(3,6),(1,4),(1,3),(1,6),(1,1)$$\n\n这得出了奶牛 $1-8$ 的 $y$ 坐标如下：\n\n$$−5,9,−2,12,1,6,2,5$$\n\n这给出了最小距离 $12−(−5)=17$。\n\n第二个测试用例的答案是不可能的原因之一是，如果箭不穿过箭靶 $1$ 的内部，不可能射中 $(6,3)$ 处的顶点（箭靶 $1$ 的右上顶点）。\n\n### 测试点性质\n\n- 测试点 $2$：对于所有的 $1\\le i\\le 4N$，$|S_i|$ 均相同。\n- 测试点 $3-9$：所有测试用例的 $N$ 之和不超过 $1000$。\n- 测试点 $10-15$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10191", "type": "P", "difficulty": 5, "samples": [["6\n4 1\n1221\n2211\n4 2\n1221\n2211\n4 3\n1221\n2211\n6 3\n222222\n111112\n4 3\n1121\n1222\n4 2\n1121\n1222", "4\n4\n1 2\n1 3\n2 1\n3 2\n4\n1 2\n1 3\n2 1\n3 2\n1\n2 1\n5\n2 3\n1 2\n1 3\n1 2\n3 1\n6\n2 3\n1 2\n1 3\n1 2\n2 1\n3 2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "贪心", "USACO", "2024", "Special Judge", "O2优化"], "title": "[USACO24FEB] Test Tubes S", "background": "", "description": "Bessie has recently gotten into chemistry. At the moment, she has two different colors $1$ and $2$ of various liquids that don't mix well with one another. She has two test tubes of infinite capacity filled with $N$ $(1 \\leq N \\leq 10^5)$ units each of some mixture of liquids of these two colors. Because the liquids don't mix,  once they settled, they divided into layers of separate colors. Because of this, the two tubes can be viewed as strings $f_1f_2\\ldots f_N$ and $s_1s_2\\ldots s_N$  where $f_i$ represents the color of the liquid that is $i$ units from the bottom of the first tube, and $s_i$ represents the color of the liquid that is $i$ units from the bottom of the second tube. It is guaranteed that there is at least one unit of each color of liquid.  \n\nBessie wants to separate these liquids so that each test tube contains all units of one color of liquid. She has a third empty beaker of infinite capacity to help her in this task. When Bessie makes a \"pour\", she moves all liquid of color $i$ at the top of one test tube or beaker into another.  \n\nDetermine the minimum number of pours to separate all the liquid into the two test tubes, and the series of moves needed to do so. It does not matter which test tube ends up with which color, but the beaker must be empty..  \n\nThere will be $T$ ($1 \\leq T \\leq 10$) test cases, with a parameter $P$ for each test case.  \n\nSuppose the minimum number of pours to separate the liquids into the original tubes is $M$.  \n\n\n- If $P=1$, you will receive credit if you print only $M$.\n- If $P=2$, you will receive credit if you print an integer $A$ such that $M \\leq A \\leq M+5$, followed by $A$ lines that construct a solution with that number of moves. Each line should contain the source and the destination tube ($1$, $2$, or $3$ for the beaker). The source tube must be nonempty before the move and a tube may not be poured into itself.\n- If $P=3$, you will receive credit if you print $M$, followed by a valid construction using that number of moves.", "inputFormat": "The first line contains $T$, the. number of test cases. For each test case, the next line contains $N$ and $P$ representing the amount each test tube is initially filled to, and the query type. The following line contains $f_1f_2f_3\\ldots f_N$ representing  the first test tube. $f_i \\in \\{ 1,2 \\}$ and $f_1$ represents the bottom of the test tube. The subsequent line contains $s_1s_2s_3\\ldots s_N$ representing the second test tube. $s_i \\in \\{ 1,2 \\}$ and $s_1$ represents the bottom of the test tube.  \n\nIt is guaranteed that there will be at least one $1$ and one $2$ across both input strings.", "outputFormat": "For each test case, you will print a single number representing the minimum pours to separate the liquid in the test tubes. Depending on the query type, you may also need to provide a valid construction.", "hint": "In the first three test cases, the minimum number of pours to separate the tubes is $4$. We can see how the following moves separate the test tubes:  \n\nInitial state: \n```\n1: 1221\n2: 2211\n3: \n```\nAfter the move \"1 2\": \n```\n1: 122\n2: 22111\n3: \n```\nAfter the move \"1 3\": \n```\n1: 1\n2: 22111\n3: 22\n```\nAfter the move \"2 1\": \n```\n1: 1111\n2: 22\n3: 22\n```\nAfter the move \"3 2\": \n```\n1: 1111\n2: 2222\n3:\n```\n\n\nIn the last test case, the minimum amount of pours is $5$. However, since $P=2$, the given construction with $6$ moves is valid since it is within $5$ pours from the optimal answer. \n#### SCORING:\n- Inputs 2-6: $P = 1$\n- Inputs 7-11: $P=2$\n- Inputs 12-21: No additional constraints.\n\nAdditionally, it is guaranteed that $T=10$ for all inputs besides the sample.", "locale": "en", "translations": {"en": {"title": "[USACO24FEB] Test Tubes S", "background": "", "description": "Bessie has recently gotten into chemistry. At the moment, she has two different colors $1$ and $2$ of various liquids that don't mix well with one another. She has two test tubes of infinite capacity filled with $N$ $(1 \\leq N \\leq 10^5)$ units each of some mixture of liquids of these two colors. Because the liquids don't mix,  once they settled, they divided into layers of separate colors. Because of this, the two tubes can be viewed as strings $f_1f_2\\ldots f_N$ and $s_1s_2\\ldots s_N$  where $f_i$ represents the color of the liquid that is $i$ units from the bottom of the first tube, and $s_i$ represents the color of the liquid that is $i$ units from the bottom of the second tube. It is guaranteed that there is at least one unit of each color of liquid.  \n\nBessie wants to separate these liquids so that each test tube contains all units of one color of liquid. She has a third empty beaker of infinite capacity to help her in this task. When Bessie makes a \"pour\", she moves all liquid of color $i$ at the top of one test tube or beaker into another.  \n\nDetermine the minimum number of pours to separate all the liquid into the two test tubes, and the series of moves needed to do so. It does not matter which test tube ends up with which color, but the beaker must be empty..  \n\nThere will be $T$ ($1 \\leq T \\leq 10$) test cases, with a parameter $P$ for each test case.  \n\nSuppose the minimum number of pours to separate the liquids into the original tubes is $M$.  \n\n\n- If $P=1$, you will receive credit if you print only $M$.\n- If $P=2$, you will receive credit if you print an integer $A$ such that $M \\leq A \\leq M+5$, followed by $A$ lines that construct a solution with that number of moves. Each line should contain the source and the destination tube ($1$, $2$, or $3$ for the beaker). The source tube must be nonempty before the move and a tube may not be poured into itself.\n- If $P=3$, you will receive credit if you print $M$, followed by a valid construction using that number of moves.", "inputFormat": "The first line contains $T$, the. number of test cases. For each test case, the next line contains $N$ and $P$ representing the amount each test tube is initially filled to, and the query type. The following line contains $f_1f_2f_3\\ldots f_N$ representing  the first test tube. $f_i \\in \\{ 1,2 \\}$ and $f_1$ represents the bottom of the test tube. The subsequent line contains $s_1s_2s_3\\ldots s_N$ representing the second test tube. $s_i \\in \\{ 1,2 \\}$ and $s_1$ represents the bottom of the test tube.  \n\nIt is guaranteed that there will be at least one $1$ and one $2$ across both input strings.", "outputFormat": "For each test case, you will print a single number representing the minimum pours to separate the liquid in the test tubes. Depending on the query type, you may also need to provide a valid construction.", "hint": "In the first three test cases, the minimum number of pours to separate the tubes is $4$. We can see how the following moves separate the test tubes:  \n\nInitial state: \n```\n1: 1221\n2: 2211\n3: \n```\nAfter the move \"1 2\": \n```\n1: 122\n2: 22111\n3: \n```\nAfter the move \"1 3\": \n```\n1: 1\n2: 22111\n3: 22\n```\nAfter the move \"2 1\": \n```\n1: 1111\n2: 22\n3: 22\n```\nAfter the move \"3 2\": \n```\n1: 1111\n2: 2222\n3:\n```\n\n\nIn the last test case, the minimum amount of pours is $5$. However, since $P=2$, the given construction with $6$ moves is valid since it is within $5$ pours from the optimal answer. \n#### SCORING:\n- Inputs 2-6: $P = 1$\n- Inputs 7-11: $P=2$\n- Inputs 12-21: No additional constraints.\n\nAdditionally, it is guaranteed that $T=10$ for all inputs besides the sample.", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Test Tubes S", "background": "", "description": "Bessie 最近开始对化学感兴趣。目前，她有两种不同颜色 $1$ 和 $2$ 的液体，彼此之间无法混合。她有两个无限容量的试管，各装有 $N$（$1\\le N\\le 10^5$）单位的这两种颜色的液体混合物。由于液体无法混合，一旦沉淀，它们就会分成不同颜色的层。因此，两个试管可以被视为两个字符串 $f_1f_2\\ldots f_N$ 和 $s_1s_2\\ldots s_N$，其中 $f_i$ 表示距离第一个试管底部 $i$ 单位处的液体的颜色，$s_i$ 表示距离第二个试管底部 $i$ 单位处的液体的颜色。输入保证两种颜色的液体至少各有一个单位。\n\nBessie 想要分离这些液体，以使得每个试管包含一种颜色的液体的所有单位。她有第三个无限容量的空烧杯来帮助她完成这一任务。当 Bessie 进行一次「倾倒」时，她将一个试管或烧杯顶部的所有颜色为 $i$ 的液体移至另一个的顶部。\n\n求出将所有液体分离到两个试管中所需的最小的倾倒次数，以及所需的移动操作。两个试管最终包含的液体颜色不影响正确性，但烧杯必须是空的。\n\n有 $T$（$1\\le T\\le 10$）个测试用例，每个测试用例有一个参数 $P$。\n\n设将液体分离至试管中的最小倾倒次数为 $M$。\n\n- 若 $P=1$，当你仅输出 $M$ 时可以得到分数。\n- 若 $P=2$，当你输出 $A$，其中 $M\\le A\\le M+5$，并在以下 $A$ 行输出以该操作次数构造的一个方案时，可以得到分数。每一行包含来源试管和目标试管（$1$，$2$，或用 $3$ 表示烧杯）。操作之前，来源试管必须是非空的，并且不得将一个试管向其自身倾倒。\n- 若 $P=3$，当你输出 $M$，并输出以该操作次数构造的一个方案时，可以得到分数。", "inputFormat": "输入的第一行包含 $T$，为测试用例的数量。对于每一个测试用例，第一行包含 $N$ 和 $P$，为每个试管最初装有液体的数量以及询问类型。下一行包含 $f_1f_2f_3\\ldots f_N$，表示第一个试管。$f_i\\in \\{1,2\\}$，$f_1$ 表示试管的底部。下一行包含 $s_1s_2s_3\\ldots s_N$，表示第二个试管。$s_i\\in \\{1,2\\}$，$s_1$ 表示试管的底部。\n\n输入保证两个字符串均包含至少一个 $1$ 和一个 $2$。", "outputFormat": "对于每一个测试用例，输出一个整数，表示分离试管中液体的最少倾倒次数。根据询问类型，你可能还需要提供合法的构造方案。", "hint": "### 样例解释\n\n在前三个测试用例中，分离试管的最小倾倒次数为 $4$。我们可以看到以下操作是如何分离试管的：\n\n初始状态：\n\n```plain\n1: 1221\n2: 2211\n3: \n```\n\n在操作 `1 2` 后：\n\n```plain\n1: 122\n2: 22111\n3: \n```\n\n在操作 `1 3` 后：\n\n```plain\n1: 1\n2: 22111\n3: 22\n```\n\n在操作 `2 1` 后：\n\n```plain\n1: 1111\n2: 22\n3: 22\n```\n\n在操作 `3 2` 后：\n\n```plain\n1: 1111\n2: 2222\n3:\n```\n\n在最后一个测试用例中，最小倾倒次数为 $5$。然而，由于 $P=2$，给出的 $6$ 次操作的构造也是合法的，因为它与最优解的差在 $5$ 次倾倒之内。\n\n### 测试点性质\n\n- 测试点 $2-6$：$P=1$。\n- 测试点 $7-11$：$P=2$。\n- 测试点 $12-21$：没有额外限制。\n\n除此之外，输入保证除样例外的所有测试点均有 $T=10$。", "locale": "zh-CN"}}}
{"pid": "P10192", "type": "P", "difficulty": 4, "samples": [["2\n10 3 2\n2 5\n1 3\n1 3\n10 3 3\n2 7 5\n8 3 4\n2 5 6", "Even Even Odd\n-1"], ["1\n20 8 2\n3 5\n3 5\n3 5\n3 5\n3 5\n3 5\n3 5\n3 5", "Even Even Even Odd Even Odd Even Odd"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "贪心", "USACO", "2024", "O2优化"], "title": "[USACO24FEB] Moorbles S", "background": "", "description": "Bessie and Elsie are playing a game of Moorbles. The game works as follows: Bessie and Elsie each start out with some amount of marbles. Bessie holds out $A$ of her marbles in her hoof and Elsie guesses if $A$ is Even or Odd. If Elsie is correct, she wins the $A$ marbles from Bessie and if she guesses incorrectly, she loses $A$ of her marbles to Bessie (if Elsie has less than $A$ marbles, she loses all her marbles). A player loses when they lose all of their marbles.  \n\nAfter some amount of turns in the game, Elsie has $N$ $(1 \\leq N \\leq 10^9)$ marbles. She thinks it is hard to win, but she is playing to not lose. After being around Bessie enough, Elsie has a good read on Bessie's habits and recognizes that on turn $i$, there are only $K$ $(1 \\leq K \\leq 4)$ different amounts of marbles that Bessie may put out. There are only $M$ $(1 \\leq M \\leq 3 \\cdot 10^5)$ turns before Bessie gets bored and stops playing. Can you identify a lexicographically minimum turn sequence such that Elsie will not lose, regardless of how Bessie plays?", "inputFormat": "The first line contains a single integer $T$ ($1 \\leq T \\leq 10$) representing the number of test cases. Each test case is described as follows: \n-  First, one line containing three integers $N$, $M$, and $K$, representing the number of marbles Elsie has, the number of turns, and the number of potential moves Bessie can make respectively.\n- Then, $M$ lines where line $i$ contains $K$ distinct space separated integers $a_{i,1} \\; a_{i,2} \\ldots a_{i,K}$ ($1 \\leq a_{i, j} \\leq 10^3$) representing the possible amounts of marbles that Bessie might play on turn $i$.\n\nIt is guaranteed that the sum of $M$ over all test cases is at most $3 \\cdot 10^5$.", "outputFormat": "For each test case, output the lexicographically minimum move sequence for Elsie to guarantee not losing, or $-1$ if she will lose. The move sequence should be on a single line and consist of $M$ space-separated tokens each equal to either \"Even\" or \"Odd\".  \n\nNote: \"Even\" is lexicographically smaller than \"Odd\".", "hint": "##### For Sample 1:\nIn the first case, the only lexicographically smaller sequence of moves is \"Even Even Even\", but Bessie can make Elsie lose in that case by first playing $5$, which reduces Elsie's number of marbles from $10$ to $5$, then playing $3$, which reduces Elsie's number of marbles from $5$ to $2$, then playing $3$, which wipes out all of her marbles.  \n\nIf Elsie instead plays the correct move sequence \"Even Even Odd\", then if Bessie plays the same way, at the end when she plays $3$, Elsie will gain those $3$ marbles, increasing her number of marbles to $5$. It can further be shown that Bessie cannot play in a different way to take all of Elsie's marbles given that Elsie plays \"Even Even Odd\".  \n\nIn the second case, it can be shown that for any move sequence that Elsie could choose, Bessie can play in a way to take all of Elsie's marbles.  \n\n\n#### SCORING:\n- Input 3: $M \\leq 16$.\n- Inputs 4-6: $M \\leq 1000$.\n- Inputs 7-12: No further constraints.", "locale": "en", "translations": {"en": {"title": "[USACO24FEB] Moorbles S", "background": "", "description": "Bessie and Elsie are playing a game of Moorbles. The game works as follows: Bessie and Elsie each start out with some amount of marbles. Bessie holds out $A$ of her marbles in her hoof and Elsie guesses if $A$ is Even or Odd. If Elsie is correct, she wins the $A$ marbles from Bessie and if she guesses incorrectly, she loses $A$ of her marbles to Bessie (if Elsie has less than $A$ marbles, she loses all her marbles). A player loses when they lose all of their marbles.  \n\nAfter some amount of turns in the game, Elsie has $N$ $(1 \\leq N \\leq 10^9)$ marbles. She thinks it is hard to win, but she is playing to not lose. After being around Bessie enough, Elsie has a good read on Bessie's habits and recognizes that on turn $i$, there are only $K$ $(1 \\leq K \\leq 4)$ different amounts of marbles that Bessie may put out. There are only $M$ $(1 \\leq M \\leq 3 \\cdot 10^5)$ turns before Bessie gets bored and stops playing. Can you identify a lexicographically minimum turn sequence such that Elsie will not lose, regardless of how Bessie plays?", "inputFormat": "The first line contains a single integer $T$ ($1 \\leq T \\leq 10$) representing the number of test cases. Each test case is described as follows: \n-  First, one line containing three integers $N$, $M$, and $K$, representing the number of marbles Elsie has, the number of turns, and the number of potential moves Bessie can make respectively.\n- Then, $M$ lines where line $i$ contains $K$ distinct space separated integers $a_{i,1} \\; a_{i,2} \\ldots a_{i,K}$ ($1 \\leq a_{i, j} \\leq 10^3$) representing the possible amounts of marbles that Bessie might play on turn $i$.\n\nIt is guaranteed that the sum of $M$ over all test cases is at most $3 \\cdot 10^5$.", "outputFormat": "For each test case, output the lexicographically minimum move sequence for Elsie to guarantee not losing, or $-1$ if she will lose. The move sequence should be on a single line and consist of $M$ space-separated tokens each equal to either \"Even\" or \"Odd\".  \n\nNote: \"Even\" is lexicographically smaller than \"Odd\".", "hint": "##### For Sample 1:\nIn the first case, the only lexicographically smaller sequence of moves is \"Even Even Even\", but Bessie can make Elsie lose in that case by first playing $5$, which reduces Elsie's number of marbles from $10$ to $5$, then playing $3$, which reduces Elsie's number of marbles from $5$ to $2$, then playing $3$, which wipes out all of her marbles.  \n\nIf Elsie instead plays the correct move sequence \"Even Even Odd\", then if Bessie plays the same way, at the end when she plays $3$, Elsie will gain those $3$ marbles, increasing her number of marbles to $5$. It can further be shown that Bessie cannot play in a different way to take all of Elsie's marbles given that Elsie plays \"Even Even Odd\".  \n\nIn the second case, it can be shown that for any move sequence that Elsie could choose, Bessie can play in a way to take all of Elsie's marbles.  \n\n\n#### SCORING:\n- Input 3: $M \\leq 16$.\n- Inputs 4-6: $M \\leq 1000$.\n- Inputs 7-12: No further constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Moorbles S", "background": "", "description": "Bessie 和 Elsie 正在玩弹珠游戏。游戏的玩法如下：Bessie 和 Elsie 开始时各有一定数量的弹珠。Bessie 取出 $A$ 个弹珠放在蹄子下，Elsie 猜测 $A$ 是偶数还是奇数。如果 Elsie 猜对了，她从 Bessie 那里赢得 $A$ 个弹珠，如果她猜错了，她输给 Bessie $A$ 个弹珠（如果 Elsie 有少于 $A$ 个弹珠，她就会输掉所有弹珠）。一名玩家失去所有弹珠时即失败。\n\n游戏进行了一定回合后，Elsie 拥有 $N$（$1\\le N\\le 10^9$）个弹珠。她感觉获胜很难，但她只是想不要输。在与 Bessie 玩得足够久之后，Elsie 对 Bessie 的习惯有了很好的了解，她发现在回合 $i$，Bessie 只可能会取出 $K$（$1\\le K\\le 4$）种不同数量的弹珠。距离 Bessie 感到无聊退出游戏只有 $M$（$1\\le M\\le 3\\cdot 10^5$）个回合了。你能求出一个字典序最小的行动序列，使得无论 Bessie 如何选择，Elsie 都不会输吗？", "inputFormat": "输入的第一行包含一个整数 $T$（$1\\le T\\le 10$），为测试用例的数量。每个测试用例的描述如下：\n\n- 第一行包含三个整数 $N$，$M$ 和 $K$，分别表示 Elsie 拥有的弹珠数量，回合数及 Bessie 可能进行的选择数。\n- 以下 $M$ 行，第 $i$ 行包含 $K$ 个不同的空格分隔的整数 $a_{i,1}a_{i,2}\\ldots a_{i,K}$（$1\\le a_{i,j}\\le10^3$），表示 Bessie 在回合 $i$ 可能取出的弹珠数量。\n\n输入保证所有测试用例的 $M$ 之和不超过 $3\\cdot 10^5$。 ", "outputFormat": "对于每一个测试用例，输出 Elsie 保证不输的字典序最小的行动序列，或者如果她会输则输出 $−1$。行动序列输出在一行中，包含 $M$ 个空格分隔的单词，每个单词为 `Even`（偶）或 `Odd`（奇）。\n\n注意：`Even` 的字典序小于 `Odd`。 ", "hint": "### 样例解释 1\n\n在第一个测试用例中，唯一字典序更小的行动序列是 `Even Even Even`，但 Bessie 可以使 Elsie 输，通过先出 $5$，将 Elsie 的弹珠数量从 $10$ 减少到 $5$，然后再出 $3$，将 Elsie 的弹珠数量从 $5$ 减少到 $2$，然后出 $3$，这会输光她所有的弹珠。\n\n如果 Elsie 采用正确的行动序列 `Even Even Odd`，那么如果 Bessie 以同样的方式进行游戏，最后当她出 $3$ 时，Elsie 将获得那 $3$ 个弹珠，将她的弹珠数量增加到 $5$。可以进一步证明，只要 Elsie 操作是 `Even Even Odd`，Bessie 无法以其他的方式赢走 Elsie 的所有弹珠。\n\n在第二个测试用例中，可以证明，对于 Elsie 可以选择的任何行动顺序，Bessie 都存在一种方式可以赢走 Elsie 的所有弹珠。\n\n### 测试点性质\n\n- 测试点 $3$：$M\\le 16$。\n- 测试点 $4-6$：$M\\le 1000$。\n- 测试点 $7-12$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10193", "type": "P", "difficulty": 5, "samples": [["3 3 1 4 1\n1 2 3\n1 3 5\n2 3 2", "1\n2"], ["4 3 2 101 2\n1 2 1\n2 3 100\n1 4 10", "2\n3\n4"], ["4 3 2 100 2\n1 2 1\n2 3 100\n1 4 10", "1\n4\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "USACO", "2024", "O2优化", "最短路"], "title": "[USACO24FEB] Bessla Motors G", "background": "**注意：本题的时间限制为 3 秒，通常限制的 1.5 倍。本题的内存限制为 512MB，通常限制的 2 倍。**", "description": "为了推广他的贝斯拉（Bessla）电动拖拉机系列，Farmer John 希望展示贝斯拉的充电网络。他已标记了地图上 $N$（$2\\le N\\le 5\\cdot 10^4$）个编号为 $1\\ldots N$ 的兴趣点，其中前 $C$（$1\\le C<N$）个是充电站，其余为旅游目的地。这些兴趣点之间由 $M$（$1 \\le M \\le 10^5$）条双向道路连接，其中第 $i$ 条连接不同的点 $u_i$ 和 $v_i$（$1\\le u_i,v_i\\le N$）且长度为 $l_i$ 英里（$1\\le l_i\\le 10^9$）。\n\n贝斯拉一次充电最多可行驶 $2R$英里（$1\\le R\\le 10^9$），使之可以到达一个充电站 $R$ 英里范围内的任何目的地。一个目的地被称之为交通便利的，如果可以从至少 $K$（$1\\le K\\le 10$）个不同的充电站到达目的地。你的任务是帮助 Farmer John 确定交通便利的旅游目的地的集合。 ", "inputFormat": "输入的第一行包含五个空格分隔的整数 $N$，$M$，$C$，$R$ 和 $K$。以下 $M$ 行，每行包含三个空格分隔的整数 $u_i$，$v_i$ 和 $l_i$，其中 $u_i\\neq v_i$。\n\n充电站的编号为 $1,2,\\ldots,C$。其余兴趣点均为旅游目的地。 ", "outputFormat": "首先输出一行，包含交通便利的旅游目的地的数量。然后升序输出所有交通便利的旅游目的地，每个一行。", "hint": "### 样例解释 1\n\n我们在 $1$ 有一个充电站。从这个充电站出发，我们可以到达 $2$（因为它与 $1$ 的距离为 $3$），但不能到达 $3$（因为它与 $1$ 的距离为 $5$）。因此，只有点 $2$ 是交通便利的。\n\n### 样例解释 2\n\n我们在 $1$ 和 $2$ 有充电站，点 $3$ 和 $4$ 均位于 $1$ 和 $2$ 的 $101$ 距离内。因此，点 $3$ 和 $4$ 都是交通便利的。\n\n### 测试点性质\n\n- 测试点 $4-5$：$K=2$，$N\\le 500$ 且 $M\\le 1000$。\n- 测试点 $6-7$：$K=2$。\n- 测试点 $8-15$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO24FEB] Bessla Motors G", "background": null, "description": "****Note: The time limit for this problem is 3s, 1.5x the default. The memory limit for this problem is 512MB, twice the default.****  \n\nFarmer John would like to promote his line of Bessla electric tractors by showcasing Bessla's network of charging stations. He has identified $N$ ($2\\le N\\le 5\\cdot 10^4$) points of interest labeled $1\\dots N$, of which the first $C$ ($1\\le C < N$) are charging stations and the remainder are travel destinations. These points of interest are interconnected by $M$ ($1\\le M\\le 10^5$) bidirectional roads, the $i$-th of which connects distinct points $u_i$ and $v_i$ ($1\\le u_i, v_i\\le N$) and has length $\\ell_i$ miles ($1\\le\\ell_i\\le 10^9$).  \n\nA Bessla can travel up to $2R$ miles ($1\\le R\\le 10^9$) on a single charge, allowing it to reach any destination within $R$ miles of a charging station. A destination is deemed _well-connected_ if it is reachable from at least $K$ ($1\\le K\\le 10$) distinct charging stations. Your task is to assist Farmer John in identifying the set of well-connected travel destinations.", "inputFormat": "The first line contains five space-separated integers $N$, $M$, $C$, $R$, and $K$. Each of the following $M$ lines contains three space-separated integers $u_i$, $v_i$, and $\\ell_i$ such that $u_i\\neq v_i$.  \n\nThe charging stations are labeled $1, 2, \\ldots, C$. The remaining points of interest are all travel destinations.", "outputFormat": "First, output the number of well-connected travel destinations on a single line. Then, list all well-connected travel destinations in ascending order, each on a separate line.", "hint": "##### For Sample 1:\nWe have one charging station at $1$. From this charging station, we can reach point $2$ (since it is distance $3$ away from $1$), but not point $3$ (since it is distance $5$ away from $1$). Thus, only point $2$ is well-connected.  \n\n\n##### For Sample 2:\nWe have charging stations at $1$ and $2$, and both points $3$ and $4$ are within distance $101$ of both $1$ and $2$. Thus, both points $3$ and $4$ are well-connected.  \n\n\n#### SCORING:\n- Inputs 4 and 5: $K = 2$ and $N \\le 500$ and $M\\le 1000$.\n- Inputs 6 and 7: $K = 2$.\n- Inputs 8-15: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Bessla Motors G", "background": "**注意：本题的时间限制为 3 秒，通常限制的 1.5 倍。本题的内存限制为 512MB，通常限制的 2 倍。**", "description": "为了推广他的贝斯拉（Bessla）电动拖拉机系列，Farmer John 希望展示贝斯拉的充电网络。他已标记了地图上 $N$（$2\\le N\\le 5\\cdot 10^4$）个编号为 $1\\ldots N$ 的兴趣点，其中前 $C$（$1\\le C<N$）个是充电站，其余为旅游目的地。这些兴趣点之间由 $M$（$1 \\le M \\le 10^5$）条双向道路连接，其中第 $i$ 条连接不同的点 $u_i$ 和 $v_i$（$1\\le u_i,v_i\\le N$）且长度为 $l_i$ 英里（$1\\le l_i\\le 10^9$）。\n\n贝斯拉一次充电最多可行驶 $2R$英里（$1\\le R\\le 10^9$），使之可以到达一个充电站 $R$ 英里范围内的任何目的地。一个目的地被称之为交通便利的，如果可以从至少 $K$（$1\\le K\\le 10$）个不同的充电站到达目的地。你的任务是帮助 Farmer John 确定交通便利的旅游目的地的集合。 ", "inputFormat": "输入的第一行包含五个空格分隔的整数 $N$，$M$，$C$，$R$ 和 $K$。以下 $M$ 行，每行包含三个空格分隔的整数 $u_i$，$v_i$ 和 $l_i$，其中 $u_i\\neq v_i$。\n\n充电站的编号为 $1,2,\\ldots,C$。其余兴趣点均为旅游目的地。 ", "outputFormat": "首先输出一行，包含交通便利的旅游目的地的数量。然后升序输出所有交通便利的旅游目的地，每个一行。", "hint": "### 样例解释 1\n\n我们在 $1$ 有一个充电站。从这个充电站出发，我们可以到达 $2$（因为它与 $1$ 的距离为 $3$），但不能到达 $3$（因为它与 $1$ 的距离为 $5$）。因此，只有点 $2$ 是交通便利的。\n\n### 样例解释 2\n\n我们在 $1$ 和 $2$ 有充电站，点 $3$ 和 $4$ 均位于 $1$ 和 $2$ 的 $101$ 距离内。因此，点 $3$ 和 $4$ 都是交通便利的。\n\n### 测试点性质\n\n- 测试点 $4-5$：$K=2$，$N\\le 500$ 且 $M\\le 1000$。\n- 测试点 $6-7$：$K=2$。\n- 测试点 $8-15$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10194", "type": "P", "difficulty": 5, "samples": [["6\n2 2 2 1 2 1", "8\n7\n6\n6\n6\n6"], ["8\n3 8 6 4 8 3 8 1", "25\n20\n17\n14\n12\n10\n8\n8"], ["10\n9 9 10 10 6 8 2 1000000000 1000000000 1000000000", "2000000053\n1000000054\n56\n49\n42\n35\n28\n24\n20\n20"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2024", "O2优化", "前缀和", "差分", "单调栈"], "title": "[USACO24FEB] Milk Exchange G", "background": "", "description": "Farmer John 的 $N$（$1\\le N \\le 5\\cdot 10^5$）头奶牛排成一圈。第 $i$ 头奶牛有一个容量为整数 $a_i$（$1\\le a_i\\le 10^9$）升的桶。所有桶初始时都是满的。\n\n每一分钟，对于 $1\\le i<N$，奶牛 $i$ 会将其桶中所有牛奶传递给奶牛 $i+1$，奶牛 $N$ 将其牛奶传递给奶牛 $1$。所有交换同时发生（即，如果一头奶牛的桶是满的，送出 $x$ 升牛奶同时收到 $x$ 升，则她的牛奶量保持不变）。如果此时一头奶牛的牛奶量超过 $a_i$，则多余的牛奶会损失。\n\n在 $1,2,\\ldots,N$ 的每一分钟后，所有奶牛总共还余下多少牛奶？ ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $a_1,a_2,\\ldots,a_N$。", "outputFormat": "输出 $N$ 行，其中第 $i$ 行包含 $i$ 分钟后所有奶牛总共余下的牛奶量。", "hint": "### 样例解释 1\n\n最初，每个桶中的牛奶量为 $[2,2,2,1,2,1]$。\n\n- $1$ 分钟后，每个桶中的牛奶量为 $[1,2,2,1,1,1]$，因此总牛奶量为 $8$。\n- $2$ 分钟后，每个桶中的牛奶量为 $[1,1,2,1,1,1]$，因此总牛奶量为 $7$。\n- $3$ 分钟后，每个桶中的牛奶量为 $[1,1,1,1,1,1]$，因此总牛奶量为 $6$。\n- $4$ 分钟后，每个桶中的牛奶量为 $[1,1,1,1,1,1]$，因此总牛奶量为 $6$。\n- $5$ 分钟后，每个桶中的牛奶量为 $[1,1,1,1,1,1]$，因此总牛奶量为 $6$。\n- $6$ 分钟后，每个桶中的牛奶量为 $[1,1,1,1,1,1]$，因此总牛奶量为 $6$。\n\n### 样例解释 2\n\n$1$ 分钟后，每个桶中的牛奶量为 $[1,3,6,4,4,3,3,1]$，因此总牛奶量为 $25$。\n\n### 测试点性质\n\n- 测试点 $4-5$：$N\\le 2000$。\n- 测试点 $6-8$：$a_i\\le 2$。\n- 测试点 $9-13$：所有 $a_i$ 在范围 $[1,10^9]$ 内均匀随机生成。\n- 测试点 $14-23$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO24FEB] Milk Exchange G", "background": null, "description": "Farmer John's $N$ $(1 \\leq N \\leq 5 \\cdot 10^5)$ cows are lined up in a circle. The $i$th cow has a bucket with integer capacity $a_i$ $(1 \\leq a_i \\leq 10^9)$ liters. All buckets are initially full.  \n\nEvery minute, cow $i$ will pass all the milk in their bucket to cow $i+1$ for $1\\le i<N$, with cow $N$ passing its milk to cow $1$. All exchanges happen simultaneously (i.e., if a cow has a full bucket but gives away $x$ liters of milk and also receives $x$ liters, her milk is preserved). If a cow's total milk ever ends up exceeding $a_i$, then the excess milk will be lost.  \n\nAfter each of $1, 2, \\dots, N$ minutes, how much total milk is left among all cows?", "inputFormat": "The first line contains $N$.   \n\nThe next line contains integers $a_1,a_2,...,a_N$.", "outputFormat": "Output $N$ lines, where the $i$-th line is the total milk left among all cows after $i$ minutes.", "hint": "##### For Sample 1:\nInitially, the amount of milk in each bucket is $[2, 2, 2, 1, 2, 1]$. \n- After $1$ minute, the amount of milk in each bucket is $[1, 2, 2, 1, 1, 1]$ so the total amount of milk is $8$.\n- After $2$ minutes, the amount of milk in each bucket is $[1, 1, 2, 1, 1, 1]$ so the total amount of milk is $7$.\n- After $3$ minutes, the amount of milk in each bucket is $[1, 1, 1, 1, 1, 1]$ so the total amount of milk is $6$.\n- After $4$ minutes, the amount of milk in each bucket is  $[1, 1, 1, 1, 1, 1]$ so the total amount of milk is $6$.\n- After $5$ minutes, the amount of milk in each bucket is $[1, 1, 1, 1, 1, 1]$ so the total amount of milk is $6$.\n- After $6$ minutes, the amount of milk in each bucket is $[1, 1, 1, 1, 1, 1]$ so the total amount of milk is $6$.  \n\n\n##### For Sample 2:\nAfter $1$ minute, the amount of milk in each bucket is $[1, 3, 6, 4, 4, 3, 3, 1]$ so the total amount of milk is $25$.  \n\n#### SCORING:\n- Inputs 4-5: $N \\le 2000$\n- Inputs 6-8: $a_i \\le 2$\n- Inputs 9-13: All $a_i$ are generated uniformly at random in the range $[1,10^9]$. \n- Inputs 14-23: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Milk Exchange G", "background": "", "description": "Farmer John 的 $N$（$1\\le N \\le 5\\cdot 10^5$）头奶牛排成一圈。第 $i$ 头奶牛有一个容量为整数 $a_i$（$1\\le a_i\\le 10^9$）升的桶。所有桶初始时都是满的。\n\n每一分钟，对于 $1\\le i<N$，奶牛 $i$ 会将其桶中所有牛奶传递给奶牛 $i+1$，奶牛 $N$ 将其牛奶传递给奶牛 $1$。所有交换同时发生（即，如果一头奶牛的桶是满的，送出 $x$ 升牛奶同时收到 $x$ 升，则她的牛奶量保持不变）。如果此时一头奶牛的牛奶量超过 $a_i$，则多余的牛奶会损失。\n\n在 $1,2,\\ldots,N$ 的每一分钟后，所有奶牛总共还余下多少牛奶？ ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $a_1,a_2,\\ldots,a_N$。", "outputFormat": "输出 $N$ 行，其中第 $i$ 行包含 $i$ 分钟后所有奶牛总共余下的牛奶量。", "hint": "### 样例解释 1\n\n最初，每个桶中的牛奶量为 $[2,2,2,1,2,1]$。\n\n- $1$ 分钟后，每个桶中的牛奶量为 $[1,2,2,1,1,1]$，因此总牛奶量为 $8$。\n- $2$ 分钟后，每个桶中的牛奶量为 $[1,1,2,1,1,1]$，因此总牛奶量为 $7$。\n- $3$ 分钟后，每个桶中的牛奶量为 $[1,1,1,1,1,1]$，因此总牛奶量为 $6$。\n- $4$ 分钟后，每个桶中的牛奶量为 $[1,1,1,1,1,1]$，因此总牛奶量为 $6$。\n- $5$ 分钟后，每个桶中的牛奶量为 $[1,1,1,1,1,1]$，因此总牛奶量为 $6$。\n- $6$ 分钟后，每个桶中的牛奶量为 $[1,1,1,1,1,1]$，因此总牛奶量为 $6$。\n\n### 样例解释 2\n\n$1$ 分钟后，每个桶中的牛奶量为 $[1,3,6,4,4,3,3,1]$，因此总牛奶量为 $25$。\n\n### 测试点性质\n\n- 测试点 $4-5$：$N\\le 2000$。\n- 测试点 $6-8$：$a_i\\le 2$。\n- 测试点 $9-13$：所有 $a_i$ 在范围 $[1,10^9]$ 内均匀随机生成。\n- 测试点 $14-23$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10195", "type": "P", "difficulty": 4, "samples": [["4\n2\n1 11\n1 1\n2\n1 12\n1 1\n2\n1 11\n4 6\n2\n1 11\n4 5", "9 9\n11 11\n1 1\n3 3"], ["2\n4\n1 3 5 8\n1 1 1 1\n4\n1 4 5 8\n1 1 1 1", "1 1 3 3\n7 2 2 7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "堆", "2024", "O2优化"], "title": "[USACO24FEB] Quantum Moochanics G", "background": "", "description": "在空闲时间，Bessie 喜欢涉猎实验物理。她最近发现了一对新的亚原子粒子，命名为**哞微子**和**反哞微子**。如同标准的[物质-反物质对](https://baike.baidu.com/item/%E5%8F%8D%E7%89%A9%E8%B4%A8/115035)，哞微子和反哞微子相遇时会相互湮灭并消失。但这些粒子的独特之处在于，每当 Bessie 看向它们时它们就会改变运动方向（同时保持相同的速率）。\n\n在她最新的实验中，Bessie 将**偶数** $N$（$2\\le N\\le 2\\cdot 10^5$）个这些粒子排成一行。这一行的左端以哞微子开始，然后在两种类型的粒子之间交替，第 $i$ 个粒子位于位置 $p_i$（$0\\le p_1<\\cdots <p_N\\le 10^{18}$）。哞微子初始时**向右**运动而反哞微子初始时**向左**运动，其中第 $i$ 个粒子以每秒 $s_i$ 单位的恒定速率运动（$1\\le s_i\\le 10^9$）。\n\nBessie 在以下时刻进行观察：\n\n- 首先是实验开始后 $1$ 秒。\n- 然后是第一次观察后 $2$ 秒。\n- 然后是第二次观察后 $3$ 秒。\n- $\\ldots \\ldots$\n- 然后是第 $n$ 次观察后 $n+1$ 秒。\n\n在每次观察中，Bessie 都会记下哪些粒子消失了。\n\n这个实验可能需要非常长的时间才能完成，所以 Bessie 想要首先模拟一下它的结果。根据实验设置，请帮助 Bessie 求出她何时（即**观察次数**）会观察到各个粒子消失！可以证明，所有粒子最终都会消失。", "inputFormat": "每个测试点包含 $T$（$1\\le T\\le 10$）个独立的测试用例。\n\n每个测试用例包含三行。第一行包含 $N$，第二行包含 $p_1,\\ldots,p_N$，第三行包含 $s_1,\\ldots,s_N$。\n\n输入保证所有 $N$ 之和不超过 $2\\cdot 10^5$。 ", "outputFormat": "对于每一个测试用例，输出每个粒子消失时的观察次数，用空格分隔。 ", "hint": "### 样例解释 1\n\n对于第一个测试用例，Bessie 在前 $8$ 次观察中观察到以下情况：\n\n- 哞微子（初始时向右运动）出现在位置 $2\\to 0\\to 3\\to −1\\to 4\\to −2\\to 5\\to −3$。\n- 反哞微子（初始时向左运动）出现在位置 $10\\to 12\\to 9\\to 13\\to 8\\to 14\\to 7\\to 15$。\n\n然后恰好在观察 $9$ 时，两个粒子在位置 $6$ 相遇并相互湮灭。\n\n对于第二个测试用例，反哞微子的初始位置更靠右 $1$\n单位，从而两个粒子在观察 $11$ 之前半秒在位置 $6.5$ 相遇。\n\n注意我们只关心观察次数，不关心时刻或位置。\n\n### 样例解释 2\n\n对于第一个测试用例：\n\n- 最左边的两个粒子恰好在观察 $1$ 时在位置 $2$ 相遇。\n- 最右边的两个粒子在观察 $3$ 之前半秒在位置 $6.5$ 相遇。\n\n### 测试点性质\n\n- 测试点 $3$：$N=2$。\n- 测试点 $4$：$N\\le 2000$，且对于所有粒子，$p_i\\le 10^4$。\n- 测试点 $5-7$：$N\\le 2000$。\n- 测试点 $8-12$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO24FEB] Quantum Moochanics G", "background": null, "description": "In her free time, Bessie likes to dabble in experimental physics. She has recently discovered a pair of new subatomic particles, named **mootrinos** and **antimootrinos**. Like standard [matter-antimatter pairs](https://en.wikipedia.org/wiki/Antimatter'), mootrinos and antimootrinos annihilate each other and disappear when they meet. But what makes these particles unique is that they switch their direction of motion (while maintaining the same speed) whenever Bessie looks at them.  \n\nFor her latest experiment, Bessie has placed an **even number** $N$ ($2 \\leq N \\leq 2 \\cdot 10^5$) of these particles in a line. The line starts with a mootrino on the left and then alternates between the two types of particles, with the $i$-th particle located at position $p_i$ ($0 \\leq p_1 < \\cdots < p_N \\leq 10^{18}$). Mootrinos initially move **right** while antimootrinos initially move **left**, and the $i$-th particle moves with a constant speed of $s_i$ units per second ($1 \\leq s_i \\leq 10^9$).  \n\nBessie makes observations at the following times: \n- First, $1$ second after the start of the experiment.\n- Then $2$ seconds after the first observation.\n- Then $3$ seconds after the second observation.\n- ...\n- Then $n + 1$ seconds after the $n$-th observation. During each observation, Bessie notes down which particles have disappeared.  \n\nThis experiment may take an extremely long time to complete, so Bessie would like to first simulate its results. Given the experiment setup, help Bessie determine when (i.e., **the observation number**) she will observe each particle disappear! It may be shown that all particles will eventually disappear.", "inputFormat": "Each input contains $T$ ($1\\le T\\le 10$) independent test cases.  \n\nEach test case consists of three lines. The first line contains $N$, the second line contains $p_1,\\dots,p_N$, and the third line contains $s_1\\dots,s_N$.  \n\nIt is guaranteed that the sum of all $N$ does not exceed $2\\cdot 10^5$.", "outputFormat": "For each test case, output the observation number for each particle's disappearance, separated by spaces.", "hint": "##### For Sample 1:\nFor the first test, Bessie observes the following during the first $8$ observations: \n- The mootrino (initially moving **right**) appears at positions $2 \\rightarrow 0 \\rightarrow 3 \\rightarrow -1 \\rightarrow 4 \\rightarrow -2 \\rightarrow 5 \\rightarrow -3$.\n- The antimootrino (initially moving **left**) appears at positions $10 \\rightarrow 12 \\rightarrow 9 \\rightarrow 13 \\rightarrow 8 \\rightarrow 14 \\rightarrow 7 \\rightarrow 15$. Then right at observation $9$, the two particles meet at position $6$ and annihilate each other.  \n\nFor the second test, the antimootrino starts $1$ additional unit to the right, so the two particles meet at position $6.5$ half a second before observation $11$.  \n\nNote that we only care about observation numbers, not times or positions.\n\n##### For Sample 2:\nFor the first test: \n- The two leftmost particles meet at position $2$ right at observation $1$.\n- The two rightmost particles meet at position $6.5$ half a second before observation $3$.  \n\n\n#### SCORING:\n- Input 3 satisfies $N = 2$.\n- Input 4 satisfies $N \\leq 2000$ and $p_i \\leq 10^4$ for all cows.\n- Inputs 5-7 satisfy $N \\leq 2000$.\n- Inputs 8-12 satisfy no additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Quantum Moochanics G", "background": "", "description": "在空闲时间，Bessie 喜欢涉猎实验物理。她最近发现了一对新的亚原子粒子，命名为**哞微子**和**反哞微子**。如同标准的[物质-反物质对](https://baike.baidu.com/item/%E5%8F%8D%E7%89%A9%E8%B4%A8/115035)，哞微子和反哞微子相遇时会相互湮灭并消失。但这些粒子的独特之处在于，每当 Bessie 看向它们时它们就会改变运动方向（同时保持相同的速率）。\n\n在她最新的实验中，Bessie 将**偶数** $N$（$2\\le N\\le 2\\cdot 10^5$）个这些粒子排成一行。这一行的左端以哞微子开始，然后在两种类型的粒子之间交替，第 $i$ 个粒子位于位置 $p_i$（$0\\le p_1<\\cdots <p_N\\le 10^{18}$）。哞微子初始时**向右**运动而反哞微子初始时**向左**运动，其中第 $i$ 个粒子以每秒 $s_i$ 单位的恒定速率运动（$1\\le s_i\\le 10^9$）。\n\nBessie 在以下时刻进行观察：\n\n- 首先是实验开始后 $1$ 秒。\n- 然后是第一次观察后 $2$ 秒。\n- 然后是第二次观察后 $3$ 秒。\n- $\\ldots \\ldots$\n- 然后是第 $n$ 次观察后 $n+1$ 秒。\n\n在每次观察中，Bessie 都会记下哪些粒子消失了。\n\n这个实验可能需要非常长的时间才能完成，所以 Bessie 想要首先模拟一下它的结果。根据实验设置，请帮助 Bessie 求出她何时（即**观察次数**）会观察到各个粒子消失！可以证明，所有粒子最终都会消失。", "inputFormat": "每个测试点包含 $T$（$1\\le T\\le 10$）个独立的测试用例。\n\n每个测试用例包含三行。第一行包含 $N$，第二行包含 $p_1,\\ldots,p_N$，第三行包含 $s_1,\\ldots,s_N$。\n\n输入保证所有 $N$ 之和不超过 $2\\cdot 10^5$。 ", "outputFormat": "对于每一个测试用例，输出每个粒子消失时的观察次数，用空格分隔。 ", "hint": "### 样例解释 1\n\n对于第一个测试用例，Bessie 在前 $8$ 次观察中观察到以下情况：\n\n- 哞微子（初始时向右运动）出现在位置 $2\\to 0\\to 3\\to −1\\to 4\\to −2\\to 5\\to −3$。\n- 反哞微子（初始时向左运动）出现在位置 $10\\to 12\\to 9\\to 13\\to 8\\to 14\\to 7\\to 15$。\n\n然后恰好在观察 $9$ 时，两个粒子在位置 $6$ 相遇并相互湮灭。\n\n对于第二个测试用例，反哞微子的初始位置更靠右 $1$\n单位，从而两个粒子在观察 $11$ 之前半秒在位置 $6.5$ 相遇。\n\n注意我们只关心观察次数，不关心时刻或位置。\n\n### 样例解释 2\n\n对于第一个测试用例：\n\n- 最左边的两个粒子恰好在观察 $1$ 时在位置 $2$ 相遇。\n- 最右边的两个粒子在观察 $3$ 之前半秒在位置 $6.5$ 相遇。\n\n### 测试点性质\n\n- 测试点 $3$：$N=2$。\n- 测试点 $4$：$N\\le 2000$，且对于所有粒子，$p_i\\le 10^4$。\n- 测试点 $5-7$：$N\\le 2000$。\n- 测试点 $8-12$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10196", "type": "P", "difficulty": 6, "samples": [["4\n5 11\n6 10\n10 15\n10 30", "21\n21\n25\n90"], ["2\n100 5\n100 1000000000000", "5\n627323485"], ["20\n303590 482848034083\n180190 112716918480\n312298 258438719980\n671877 605558355401\n662137 440411075067\n257593 261569032231\n766172 268433874550\n8114 905639446594\n209577 11155741818\n227183 874665904430\n896141 55422874585\n728247 456681845046\n193800 632739601224\n443005 623200306681\n330325 955479269245\n377303 177279745225\n880246 22559233849\n58084 155169139314\n813702 758370488574\n929760 785245728062", "108753959\n108753959\n108753959\n148189797\n148189797\n148189797\n148189797\n32884410\n32884410\n32884410\n32884410\n32884410\n32884410\n32884410\n3883759\n3883759\n3883759\n3883759\n3883759\n3883759"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "二分", "USACO", "2024", "O2优化", "凸包"], "title": "[USACO24FEB] Lazy Cow P", "background": "", "description": "Bessie 正在努力为美国件算机奥林匹克二月的竞赛准备测试用例。每一分钟，她可以选择不准备测试用例，不花费能量；或者对于某个正整数 $a$，花费 $3^{a−1}$ 能量准备 $a$ 个测试用例。\n\nFarmer John 有 $D$（$1\\le D\\le 2\\cdot 10^5$）个需求。对于第 $i$ 个需求，他告诉 Bessie，在前 $m_i$ 分钟内她总共需要准备至少 $b_i$ 个测试用例（$1\\le m_i\\le 10^6,1\\le b_i\\le 10^{12}$）。\n\n令 $e_i$ 为满足前 $i$ 个需求 Bessie 最小需要花费的能量。输出 $e_1,\\ldots,e_D$ 模 $10^9+7$ 的余数。 ", "inputFormat": "输入的第一行包含 $D$。以下 $D$ 行，第 $i$ 行包含两个空格分隔的整数 $m_i$ 和 $b_i$。", "outputFormat": "输出 $D$ 行，第 $i$ 行包含 $e_i \\bmod 10^9+7$。 ", "hint": "### 样例解释 1\n\n对于第一个测试用例，\n\n- $i=1$：如果 Bessie 在前 $5$ 天分别制作 $[2,3,2,2,2]$ 个测试用例，她将花费 $3^1+3^2+3^1+3^1+3^1=21$ 单位能量，并在第 $5$ 天结束时制作了 $11$ 个测试用例。\n- $i=2$：Bessie 可以遵循上面的策略，确保在第 $5$ 天结束时制作了 $11$ 个测试用例，而这将自动满足第二个需求。\n- $i=3$：如果 Bessie 在前 $10$ 天分别制作 $[2,3,2,2,2,0,1,1,1,1]$ 个测试用例，她将花费 $25$ 单位能量并满足所有需求。可以证明她无法花费更少的能量。\n- $i=4$：如果 Bessie 在前 $10$ 天每一天制作 $3$ 个测试用例，她将花费 $3^2\\cdot 10=90$ 单位能量并满足所有需求。\n\n对于每一个 $i$，可以证明 Bessie 无法花费更少的能量满足前 $i$ 个需求。\n\n### 测试点性质\n\n- 测试点 $4-5$：$D\\le 100$，且对于所有 $i$，$m_i\\le 100$。\n- 测试点 $6-8$：$D\\le 3000$。\n- 测试点 $9-20$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO24FEB] Lazy Cow P", "background": null, "description": "Bessie is hard at work preparing test cases for the USA Cowmputing Olympiad February contest. Each minute, she can choose to not prepare any tests, expending no energy; or expend $3^{a-1}$ energy preparing $a$ test cases, for some positive integer $a$.  \n\nFarmer John has $D$ ($1\\le D\\le 2\\cdot 10^5$) demands. For the $i$th demand, he tells Bessie that within the first $m_i$ minutes, she needs to have prepared  at least $b_i$ test cases in total ($1\\le m_i\\le 10^6, 1 \\leq b_i \\leq 10^{12}$).  \n\nLet $e_i$ be the smallest amount of energy Bessie needs to spend to satisfy the first $i$ demands. Print $e_1,\\dots,e_D$ modulo $10^9+7$.", "inputFormat": "The first line contains $D$. The $i$th of the next $D$ lines contains two space-separated integers $m_i$ and $b_i$.", "outputFormat": "Output $D$ lines, the $i$th containing $e_i \\text{ mod } 10^9+7$.", "hint": "##### For Sample 1:\nFor the first test case,  \n-  $i=1$: If Bessie creates $[2, 3, 2, 2, 2]$ test cases on the first $5$ days, respectively, she would have expended $3^1 + 3^2 + 3^1 + 3^1 + 3^1 = 21$ units of energy and created $11$ test cases by the end of day $5$. \n-  $i=2$: Bessie can follow the above strategy to ensure $11$ test cases are created by the end of day $5$, and this will automatically satisfy the second demand.\n-  $i=3$: If Bessie creates $[2, 3, 2, 2, 2, 0, 1, 1, 1, 1]$ test cases on the first $10$ days, respectively, she would have expended $25$ units of energy and satisfied all demands. It can be shown that she cannot expend less energy. \n- $i=4$: If Bessie creates 3 test cases on each of the first $10$ days she would have expended $3^{2}\\cdot 10 = 90$ units of energy and satisfied all demands.  For each $i$, it can be shown that Bessie cannot satisfy the first $i$ demands using less energy.  \n#### SCORING:\n- Inputs 4-5: $D\\le 100$ and $m_i \\le 100$ for all $i$ \n- Inputs 6-8: $D\\le 3000$\n- Inputs 9-20: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Lazy Cow P", "background": "", "description": "Bessie 正在努力为美国件算机奥林匹克二月的竞赛准备测试用例。每一分钟，她可以选择不准备测试用例，不花费能量；或者对于某个正整数 $a$，花费 $3^{a−1}$ 能量准备 $a$ 个测试用例。\n\nFarmer John 有 $D$（$1\\le D\\le 2\\cdot 10^5$）个需求。对于第 $i$ 个需求，他告诉 Bessie，在前 $m_i$ 分钟内她总共需要准备至少 $b_i$ 个测试用例（$1\\le m_i\\le 10^6,1\\le b_i\\le 10^{12}$）。\n\n令 $e_i$ 为满足前 $i$ 个需求 Bessie 最小需要花费的能量。输出 $e_1,\\ldots,e_D$ 模 $10^9+7$ 的余数。 ", "inputFormat": "输入的第一行包含 $D$。以下 $D$ 行，第 $i$ 行包含两个空格分隔的整数 $m_i$ 和 $b_i$。", "outputFormat": "输出 $D$ 行，第 $i$ 行包含 $e_i \\bmod 10^9+7$。 ", "hint": "### 样例解释 1\n\n对于第一个测试用例，\n\n- $i=1$：如果 Bessie 在前 $5$ 天分别制作 $[2,3,2,2,2]$ 个测试用例，她将花费 $3^1+3^2+3^1+3^1+3^1=21$ 单位能量，并在第 $5$ 天结束时制作了 $11$ 个测试用例。\n- $i=2$：Bessie 可以遵循上面的策略，确保在第 $5$ 天结束时制作了 $11$ 个测试用例，而这将自动满足第二个需求。\n- $i=3$：如果 Bessie 在前 $10$ 天分别制作 $[2,3,2,2,2,0,1,1,1,1]$ 个测试用例，她将花费 $25$ 单位能量并满足所有需求。可以证明她无法花费更少的能量。\n- $i=4$：如果 Bessie 在前 $10$ 天每一天制作 $3$ 个测试用例，她将花费 $3^2\\cdot 10=90$ 单位能量并满足所有需求。\n\n对于每一个 $i$，可以证明 Bessie 无法花费更少的能量满足前 $i$ 个需求。\n\n### 测试点性质\n\n- 测试点 $4-5$：$D\\le 100$，且对于所有 $i$，$m_i\\le 100$。\n- 测试点 $6-8$：$D\\le 3000$。\n- 测试点 $9-20$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10197", "type": "P", "difficulty": 7, "samples": [["3 0\n1 100 10", "110"], ["3 1\n1 100 10\n2", "200"], ["4 2\n1 3 2 4\n2 3", "9"], ["3 1\n1 100 10\n3", "110"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2024", "O2优化", "区间 DP"], "title": "[USACO24FEB] Minimum Sum of Maximums P", "background": "", "description": "Bessie 有一行 $N$（$2\\le N\\le 300$）块瓷砖，依次具有丑陋度 $a_1,a_2,\\ldots,a_N$（$1\\le a_i\\le 10^6$）。其中 $K$（$0\\le K\\le \\min(N,6)$）块瓷砖卡住了；具体地，索引为 $x_1,\\ldots,x_K$（$1\\le x_1<x_2<\\cdots<x_K\\le N$）的瓷砖。\n\nBessie 想要最小化瓷砖的总丑陋度，其中总丑陋度定义为每对相邻瓷砖的最大丑陋度之和；即 $\\sum\\limits^{N−1}_{i=1}\\max(a_i,a_{i+1})$。她可以任意次执行以下操作：选择两块均未卡住的瓷砖，并交换它们。\n\n求 Bessie 以最优方案执行操作可以达到的最小总丑陋度。 ", "inputFormat": "输入的第一行包含 $N$ 和 $K$。\n\n第二行包含 $a_1,\\ldots,a_N$。\n\n第三行包含 $K$ 个索引 $x_1,\\ldots,x_K$。 ", "outputFormat": "输出最小可能的总丑陋度。 ", "hint": "### 样例解释 1\n\nBessie 可以交换第二块和第三块瓷砖，使得 $a=[1,10,100]$，达到总丑陋度 $\\max(1,10)+\\max(10,100)=110$。或者，她也可以交换第一块和第二块瓷砖，使得 $a=[100,1,10]$，同样达到总丑陋度 $\\max(100,1)+\\max(1,10)=110$。\n\n### 样例解释 2\n\n瓷砖的初始总丑陋度为 $\\max(1,100)+\\max(100,10)=200$。Bessie 只允许交换第一块和第三块瓷砖，这并不能使她能够减少总丑陋度。\n\n### 测试点性质\n\n- 测试点 $5$：$K=0$。\n- 测试点 $6-7$：$K=1$。\n- 测试点 $8-12$：$N\\le 50$。\n- 测试点 $13-24$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO24FEB] Minimum Sum of Maximums P", "background": null, "description": "Bessie has $N$ ($2\\le N\\le 300$) tiles in a line with ugliness values  $a_1, a_2, \\dots, a_N$ in that order ($1\\le a_i\\le 10^6$). $K$ ($0\\le K\\le \\min(N,6)$) of the tiles are stuck in place; specifically, those at indices $x_1,\\dots, x_K$ ($1\\le x_1 < x_2<\\dots< x_K\\le N$).   \n\nBessie wants to minimize the total ugliness of the tiles, which is defined as the sum of the maximum ugliness over every consecutive pair of tiles; that is, $\\sum_{i=1}^{N-1}\\max(a_i,a_{i+1})$. She is allowed to perform the following operation any number of times: choose two tiles, neither of which are stuck in place, and swap them.   \n\nDetermine the minimum possible total ugliness Bessie can achieve if she performs operations optimally.", "inputFormat": "The first line contains $N$ and $K$.  \n\nThe next line contains $a_1,\\dots,a_N$.  \n\nThe next line contains the $K$ indices $x_1,\\dots,x_K$.", "outputFormat": "Output the minimum possible total ugliness.", "hint": "##### For Sample 1:\nBessie can swap the second and third tiles so that $a=[1,10,100]$, achieving total ugliness $\\max(1,10)+\\max(10,100)=110$. Alternatively, she could swap the first and second tiles so that $a=[100,1,10]$, also achieving  total ugliness $\\max(100,1)+\\max(1,10)=110$.  \n\n##### For Sample 2:\nBessie could swap the first and second tiles so that $a=[100,1,10]$, achieving  total ugliness $\\max(100,1)+\\max(1,10)=110$.  \n\n##### For Sample 3:\nThe initial total ugliness of the tiles is $\\max(1,100)+\\max(100,10)=200$. Bessie is only allowed to swap the first and third tiles, which does not allow her to reduce the total ugliness.  \n\n#### SCORING:\n- Input 5: $K=0$\n- Inputs 6-7: $K=1$\n- Inputs 8-12: $N\\le 50$\n- Inputs 13-24: No additional constraints", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Minimum Sum of Maximums P", "background": "", "description": "Bessie 有一行 $N$（$2\\le N\\le 300$）块瓷砖，依次具有丑陋度 $a_1,a_2,\\ldots,a_N$（$1\\le a_i\\le 10^6$）。其中 $K$（$0\\le K\\le \\min(N,6)$）块瓷砖卡住了；具体地，索引为 $x_1,\\ldots,x_K$（$1\\le x_1<x_2<\\cdots<x_K\\le N$）的瓷砖。\n\nBessie 想要最小化瓷砖的总丑陋度，其中总丑陋度定义为每对相邻瓷砖的最大丑陋度之和；即 $\\sum\\limits^{N−1}_{i=1}\\max(a_i,a_{i+1})$。她可以任意次执行以下操作：选择两块均未卡住的瓷砖，并交换它们。\n\n求 Bessie 以最优方案执行操作可以达到的最小总丑陋度。 ", "inputFormat": "输入的第一行包含 $N$ 和 $K$。\n\n第二行包含 $a_1,\\ldots,a_N$。\n\n第三行包含 $K$ 个索引 $x_1,\\ldots,x_K$。 ", "outputFormat": "输出最小可能的总丑陋度。 ", "hint": "### 样例解释 1\n\nBessie 可以交换第二块和第三块瓷砖，使得 $a=[1,10,100]$，达到总丑陋度 $\\max(1,10)+\\max(10,100)=110$。或者，她也可以交换第一块和第二块瓷砖，使得 $a=[100,1,10]$，同样达到总丑陋度 $\\max(100,1)+\\max(1,10)=110$。\n\n### 样例解释 2\n\n瓷砖的初始总丑陋度为 $\\max(1,100)+\\max(100,10)=200$。Bessie 只允许交换第一块和第三块瓷砖，这并不能使她能够减少总丑陋度。\n\n### 测试点性质\n\n- 测试点 $5$：$K=0$。\n- 测试点 $6-7$：$K=1$。\n- 测试点 $8-12$：$N\\le 50$。\n- 测试点 $13-24$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10198", "type": "P", "difficulty": 7, "samples": [["5 4\n1 2 1 2 8\n2\n3 4\n4\n2 3\n5 5 5 5 5 1 5 5\n2 4 3\n3 3 6\n5 3 2\n5 3 7", "2\n2\n5\n4"], ["5 5\n1 2 1 2 8\n2\n3 4\n4\n2 3\n5 5 5 5 5 1 5 5\n2 4 3\n3 2 6\n5 3 2\n5 3 7\n5 3 1000000000000000000", "2\n3\n5\n4\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "USACO", "2024", "O2优化"], "title": "[USACO24FEB] Infinite Adventure P", "background": "**注意：本题的内存限制为 512MB，通常限制的 2 倍。**", "description": "Bessie 正在计划一次在 $N$（$1\\le N\\le 10^5$）个城市的大陆上的无尽冒险。每个城市 $i$ 都有一个传送门以及循环周期 $T_i$。所有 $T_i$ 均为 $2$ 的幂，且 $T_1+\\cdots+T_N\\le 10^5$。如果你在日期 $t$ 进入城市 $i$ 的传送门，那么你会立即从城市 $c_{i,t\\bmod T_i}$ 的传送门出来。\n\nBessie 的旅行有 $Q$（$1\\le Q\\le 5\\cdot 10^4$）个计划，每个计划由一个元组 $(v,t,\\Delta)$ 组成。在每个计划中，她将于日期 $t$ 从城市 $v$ 出发。然后，她将执行以下操作 $\\Delta$ 次：她将进入当前城市的传送门，然后等待一天。对于她的每一个计划，她想要知道她最终会在哪个城市。", "inputFormat": "输入的第一行包含两个空格分隔的整数：结点的数量 $N$，以及询问的数量 $Q$。\n\n第二行包含 $N$ 个空格分隔的整数：$T_1,T_2,\\ldots,T_N$（$1\\le T_i$，$T_i$ 是 $2$ 的幂，且 $T_1+\\cdots+T_N\\le 10^5$）。\n\n对于 $i=1,2,\\ldots,N$，第 $i+2$ 行包含 $T_i$ 个空格分隔的正整数，为 $c_{i,0},\\ldots,c_{i,T_i-1}$（$1\\le c_{i,t}\\le N$）。\n\n对于 $j=1,2,…,Q$，第 $j+N+2$ 行包含三个空格分隔的正整数 $v_j,t_j,\\Delta_j$（$1\\le v_j\\le N$，$1\\le t_j\\le 10^{18}$，且 $1\\le \\Delta_j\\le 10^{18}$），表示第 $j$ 个询问。", "outputFormat": "输出 $Q$ 行。第 $j$ 行包含第 $j$ 个询问的答案。", "hint": "### 样例解释 1\n\nBessie 的前三次冒险会如下进行：\n\n- 在第一次冒险中，她于时刻 $4$ 从城市 $2$ 出发，于时刻 $5$ 到达城市 $3$，于时刻 $6$ 到达城市 $4$，于时刻 $7$ 到达城市 $2$。\n- 在第二次冒险中，她于时刻 $3$ 从城市 $3$ 出发，于时刻 $4$ 到达城市 $4$，于时刻 $5$ 到达城市 $2$，于时刻 $6$ 到达城市 $4$，于时刻 $7$ 到达城市 $2$，于时刻 $8$ 到达城市 $4$，于时刻 $9$ 到达城市 $2$。\n- 在第三次冒险中，她于时刻 $3$ 从城市 $5$ 出发，于时刻 $4$ 到达城市 $5$，于时刻 $5$ 到达城市 $5$。\n\n### 测试点性质\n\n- 测试点 $3$：$\\Delta_j\\le 2\\cdot 10^2$。\n- 测试点 $4-5$：$N,\\sum T_j\\le 2\\cdot 10^3$。\n- 测试点 $6-8$：$N,\\sum T_j\\le 10^4$。\n- 测试点 $9-18$：没有额外限制。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO24FEB] Infinite Adventure P", "background": null, "description": "****Note: The memory limit for this problem is 512MB, twice the default.****\n\nBessie is planning an infinite adventure in a land with $N$ ($1\\leq N \\leq 10^5$) cities. In each city $i$, there is a portal, as well as a cycling time $T_i$.  All $T_i$'s are powers of $2$, and $T_1 + \\cdots + T_N \\leq 10^5$. If you enter city $i$'s portal on day $t$, then you instantly exit the portal in city $c_{i, t\\bmod{T_i}}$.\n\nBessie has $Q$ ($1\\leq Q \\leq 5\\cdot 10^4$) plans for her trip, each of which consists of a tuple $(v, t, \\Delta)$. In each plan, she will start in city $v$ on day $t$. She will then do the following $\\Delta$ times: She will follow the portal in her current city, then wait one day. For each of her plans, she wants to know what city she will end up in.", "inputFormat": "The first line contains two space-separated integers: $N$, the number of nodes, and $Q$, the number of queries.\n\nThe second line contains $N$ space-separated integers: $T_1, T_2, \\ldots, T_N$ ($1\\leq T_i$, $T_i$ is a power of $2$, and $T_1 + \\cdots + T_N \\leq 10^5$).\n\nFor $i = 1, 2, \\ldots, N$, line $i+2$ contains $T_i$ space-separated positive integers, namely $c_{i, 0}, \\ldots, c_{i, T_i-1}$ ($1\\leq c_{i, t} \\leq N$).\n\nFor $j = 1, 2, \\ldots, Q$, line $j+N+2$ contains three space-separated positive integers, $v_j, t_j, \\Delta_j$ ($1\\leq v_j \\leq N$, $1\\leq t_j \\leq 10^{18}$, and $1\\leq \\Delta_j \\leq 10^{18}$) representing the $j$th query.", "outputFormat": "Print $Q$ lines. The $j$th line must contain the answer to the $j$th query.", "hint": "##### For Sample 1:\nBessie's first three adventures proceed as follows: \n-  In the first adventure, she goes from city $2$ at time $4$ to city $3$ at time $5$, to city $4$ at time $6$, to city $2$ at time $7$. \n-  In the second adventure, she goes from city $3$ at time $3$ to city $4$ at time $4$, to city $2$ at time $5$, to city $4 $ at time $6$, to city $2$ at time $7$, to city $4$ at time $8$, to city $2$ at time $9$. \n-  In the third adventure, she goes from city $5$ at time $3$ to city $5$ at time $4$, to city $5$ at time $5$.   \n\n#### SCORING:\n\n- Input 3: $\\Delta_j \\leq 2\\cdot 10^2$.\n- Inputs 4-5: $N, \\sum T_j\\leq 2\\cdot 10^3$.\n- Inputs 6-8: $N, \\sum T_j\\leq 10^4$.\n- Inputs 9-18: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24FEB] Infinite Adventure P", "background": "**注意：本题的内存限制为 512MB，通常限制的 2 倍。**", "description": "Bessie 正在计划一次在 $N$（$1\\le N\\le 10^5$）个城市的大陆上的无尽冒险。每个城市 $i$ 都有一个传送门以及循环周期 $T_i$。所有 $T_i$ 均为 $2$ 的幂，且 $T_1+\\cdots+T_N\\le 10^5$。如果你在日期 $t$ 进入城市 $i$ 的传送门，那么你会立即从城市 $c_{i,t\\bmod T_i}$ 的传送门出来。\n\nBessie 的旅行有 $Q$（$1\\le Q\\le 5\\cdot 10^4$）个计划，每个计划由一个元组 $(v,t,\\Delta)$ 组成。在每个计划中，她将于日期 $t$ 从城市 $v$ 出发。然后，她将执行以下操作 $\\Delta$ 次：她将进入当前城市的传送门，然后等待一天。对于她的每一个计划，她想要知道她最终会在哪个城市。", "inputFormat": "输入的第一行包含两个空格分隔的整数：结点的数量 $N$，以及询问的数量 $Q$。\n\n第二行包含 $N$ 个空格分隔的整数：$T_1,T_2,\\ldots,T_N$（$1\\le T_i$，$T_i$ 是 $2$ 的幂，且 $T_1+\\cdots+T_N\\le 10^5$）。\n\n对于 $i=1,2,\\ldots,N$，第 $i+2$ 行包含 $T_i$ 个空格分隔的正整数，为 $c_{i,0},\\ldots,c_{i,T_i-1}$（$1\\le c_{i,t}\\le N$）。\n\n对于 $j=1,2,…,Q$，第 $j+N+2$ 行包含三个空格分隔的正整数 $v_j,t_j,\\Delta_j$（$1\\le v_j\\le N$，$1\\le t_j\\le 10^{18}$，且 $1\\le \\Delta_j\\le 10^{18}$），表示第 $j$ 个询问。", "outputFormat": "输出 $Q$ 行。第 $j$ 行包含第 $j$ 个询问的答案。", "hint": "### 样例解释 1\n\nBessie 的前三次冒险会如下进行：\n\n- 在第一次冒险中，她于时刻 $4$ 从城市 $2$ 出发，于时刻 $5$ 到达城市 $3$，于时刻 $6$ 到达城市 $4$，于时刻 $7$ 到达城市 $2$。\n- 在第二次冒险中，她于时刻 $3$ 从城市 $3$ 出发，于时刻 $4$ 到达城市 $4$，于时刻 $5$ 到达城市 $2$，于时刻 $6$ 到达城市 $4$，于时刻 $7$ 到达城市 $2$，于时刻 $8$ 到达城市 $4$，于时刻 $9$ 到达城市 $2$。\n- 在第三次冒险中，她于时刻 $3$ 从城市 $5$ 出发，于时刻 $4$ 到达城市 $5$，于时刻 $5$ 到达城市 $5$。\n\n### 测试点性质\n\n- 测试点 $3$：$\\Delta_j\\le 2\\cdot 10^2$。\n- 测试点 $4-5$：$N,\\sum T_j\\le 2\\cdot 10^3$。\n- 测试点 $6-8$：$N,\\sum T_j\\le 10^4$。\n- 测试点 $9-18$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10199", "type": "P", "difficulty": 5, "samples": [["4 10 1\n4 2 6 20111 6 11900\n2 4 2 10786 13 23576\n2 1 3 5274 16 13903\n2 1 2 17162 1 26120\n1 2 1 42040 11 16065\n2 1 4 23690 18 26541\n2 3 9 18977 2 26795\n4 1 4 51880 1 25060\n1 4 13 17776 3 28236\n1 4 1 19112 1 10131", "26795"], ["见选手目录下的 wind/wind2.in 与 wind/wind2.ans。", ""], ["见选手目录下的 wind/wind3.in 与 wind/wind3.ans。", ""], ["见选手目录下的 wind/wind4.in 与 wind/wind4.ans。", ""]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "湖北"], "title": "[湖北省选模拟 2024] 时与风 / wind", "background": "风带来故事的种子，时间使之神话。", "description": "你在 $N$ 个锚点间，沿着 $M$ 条有向航道，使用风之翼进行飞行。锚点依次编号为 $1,2,\\cdots,N$，有向航道依次编号为 $1,2,\\cdots,M$。第 $i$ 条航道的出发锚点为 $u_i$，到达锚点为 $v_i$。\n\n由于巴巴斯托与时间存在神秘的联系，第 $i$ 条航道将在时刻 $O_i$ 开启，在时刻 $C_i$ **后**关闭。**也就是说，对于任意的 $O_i \\le t \\le C_i$，你可以在时刻 $t$ 由锚点 $u_i$ 进入航道 $i$。**进入航道后，空间上，你将直接到达锚点 $v_i$，时间上，时间将**等概率**的变化为 $[L_i,R_i]$ 中的一个实数对应的时刻。**注意到达一个锚点后，你必须在同一时刻立刻进入下一段航道，否则你必须在此结束飞行。**\n\n你将从锚点 $S$ 出发，尝试访问锚点 $i(1\\le i\\le N)$，你需要对于锚点 $i$ 确定一条路径 $E_1,E_2,E_3,\\cdots,E_k$，其中 $E_x(1\\le x\\le k)$ 表示一条航道。要求 $E_1$ 从锚点 $S$ 出发，$E_k$ 到达锚点 $i$，且对于 $1\\le j<k$，满足 $E_j$ 的到达锚点与 $E_{j+1}$ 的出发锚点相同。一条路径是**稳定路径**，当且仅当无论每次通过航道后时间如何变化，都可以走完整条路径。一条**稳定路径的到达时间**是通过路径前往锚点 $i$ 时，**最晚的**可能到达锚点 $i$ 的时刻。访问**锚点 $i$ 的稳定到达时间 $T_i(i \\neq S)$** 是所有到达 $i$ 的稳定路径中到达时间的**最小值**。你可以在任意非负时刻出发。**如果不存在访问锚点 $i$ 的稳定路径或 $i=S$，则 $T_i=0$。**\n\n请你求出 $T_i(1\\le i\\le N)$ 的最大值。", "inputFormat": "输入共 $M+1$ 行。\n\n输入的第一行为三个整数 $N,M,S$，分别表示锚点数、航道数和起点锚点。\n\n接下来 $M$ 行，每行包含六个整数 $u_i,v_i,O_i,C_i,L_i,R_i$，描述了第 $i$ 条航道的有关信息，变量具体含义见题目描述部分。", "outputFormat": "输出一行一个整数，表示 $T_i$ 的最大值。", "hint": "### 样例解释 1\n\n对于锚点 $1$，显然有 $T_1=0$。\n\n对于锚点 $2$，沿路径 $1 \\rightarrow 2$ ，$T_2=16065$。\n\n对于锚点 $3$，沿路径 $1 \\rightarrow 2 \\rightarrow 3$ ，$T_3=26795$。\n\n对于锚点 $4$，沿路径 $1 \\rightarrow 4$ ，$T_4 = 10131$。\n\n综上所述，答案 $\\max T_i=T_3=26795$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le N,M \\le 5\\times 10^5$，$1 \\le O_i,L_i \\le 20$，$1 \\le O_i \\le C_i \\le 10^9$，$1 \\le L_i \\le R_i \\le 10^9$，$1\\le S \\le N$。\n\n| 测试点编号 | $N\\le$ | $M\\le$ | $C_i,R_i\\le$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|:--:|\n| $1\\sim 4$ | $20$ | $20$ | $10^9$ | 无 |\n| $5\\sim 8$ | $10^5$ | $10^3$ | $10^9$| 无 |\n| $9\\sim 10$ | $5\\times 10^5$ | $5\\times 10^5$ | $10^9$ | A |\n| $11\\sim 12$ | $10^5$ | $10^5$ | $20$ | 无 |\n| $13\\sim 14$ | $5\\times 10^5$ | $5\\times 10^5$ | $10^3$ | 无 |\n| $15\\sim 20$ | $5\\times 10^5$ | $5\\times 10^5$ | $10^9$ | 无 |\n\n\n特殊性质 A：一个锚点连接的航道数不超过 $100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2024] 时与风 / wind", "background": "风带来故事的种子，时间使之神话。", "description": "你在 $N$ 个锚点间，沿着 $M$ 条有向航道，使用风之翼进行飞行。锚点依次编号为 $1,2,\\cdots,N$，有向航道依次编号为 $1,2,\\cdots,M$。第 $i$ 条航道的出发锚点为 $u_i$，到达锚点为 $v_i$。\n\n由于巴巴斯托与时间存在神秘的联系，第 $i$ 条航道将在时刻 $O_i$ 开启，在时刻 $C_i$ **后**关闭。**也就是说，对于任意的 $O_i \\le t \\le C_i$，你可以在时刻 $t$ 由锚点 $u_i$ 进入航道 $i$。**进入航道后，空间上，你将直接到达锚点 $v_i$，时间上，时间将**等概率**的变化为 $[L_i,R_i]$ 中的一个实数对应的时刻。**注意到达一个锚点后，你必须在同一时刻立刻进入下一段航道，否则你必须在此结束飞行。**\n\n你将从锚点 $S$ 出发，尝试访问锚点 $i(1\\le i\\le N)$，你需要对于锚点 $i$ 确定一条路径 $E_1,E_2,E_3,\\cdots,E_k$，其中 $E_x(1\\le x\\le k)$ 表示一条航道。要求 $E_1$ 从锚点 $S$ 出发，$E_k$ 到达锚点 $i$，且对于 $1\\le j<k$，满足 $E_j$ 的到达锚点与 $E_{j+1}$ 的出发锚点相同。一条路径是**稳定路径**，当且仅当无论每次通过航道后时间如何变化，都可以走完整条路径。一条**稳定路径的到达时间**是通过路径前往锚点 $i$ 时，**最晚的**可能到达锚点 $i$ 的时刻。访问**锚点 $i$ 的稳定到达时间 $T_i(i \\neq S)$** 是所有到达 $i$ 的稳定路径中到达时间的**最小值**。你可以在任意非负时刻出发。**如果不存在访问锚点 $i$ 的稳定路径或 $i=S$，则 $T_i=0$。**\n\n请你求出 $T_i(1\\le i\\le N)$ 的最大值。", "inputFormat": "输入共 $M+1$ 行。\n\n输入的第一行为三个整数 $N,M,S$，分别表示锚点数、航道数和起点锚点。\n\n接下来 $M$ 行，每行包含六个整数 $u_i,v_i,O_i,C_i,L_i,R_i$，描述了第 $i$ 条航道的有关信息，变量具体含义见题目描述部分。", "outputFormat": "输出一行一个整数，表示 $T_i$ 的最大值。", "hint": "### 样例解释 1\n\n对于锚点 $1$，显然有 $T_1=0$。\n\n对于锚点 $2$，沿路径 $1 \\rightarrow 2$ ，$T_2=16065$。\n\n对于锚点 $3$，沿路径 $1 \\rightarrow 2 \\rightarrow 3$ ，$T_3=26795$。\n\n对于锚点 $4$，沿路径 $1 \\rightarrow 4$ ，$T_4 = 10131$。\n\n综上所述，答案 $\\max T_i=T_3=26795$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le N,M \\le 5\\times 10^5$，$1 \\le O_i,L_i \\le 20$，$1 \\le O_i \\le C_i \\le 10^9$，$1 \\le L_i \\le R_i \\le 10^9$，$1\\le S \\le N$。\n\n| 测试点编号 | $N\\le$ | $M\\le$ | $C_i,R_i\\le$ | 特殊性质 |\n|:--:|:--:|:--:|:--:|:--:|\n| $1\\sim 4$ | $20$ | $20$ | $10^9$ | 无 |\n| $5\\sim 8$ | $10^5$ | $10^3$ | $10^9$| 无 |\n| $9\\sim 10$ | $5\\times 10^5$ | $5\\times 10^5$ | $10^9$ | A |\n| $11\\sim 12$ | $10^5$ | $10^5$ | $20$ | 无 |\n| $13\\sim 14$ | $5\\times 10^5$ | $5\\times 10^5$ | $10^3$ | 无 |\n| $15\\sim 20$ | $5\\times 10^5$ | $5\\times 10^5$ | $10^9$ | 无 |\n\n\n特殊性质 A：一个锚点连接的航道数不超过 $100$。", "locale": "zh-CN"}}}
{"pid": "P10200", "type": "P", "difficulty": 6, "samples": [["2 10 10\n1 2", "2"], ["4 2 5\n5 3 1 4", "5"], ["见选手目录下的 sabzeruz/sabzeruz3.in 与 sabzeruz/sabzeruz3.ans。", "该样例符合测试点 9 ∼ 11 的限制。"], ["见选手目录下的 sabzeruz/sabzeruz4.in 与 sabzeruz/sabzeruz4.ans。", "该样例符合测试点 12 ∼ 15 的限制。"], ["见选手目录下的 sabzeruz/sabzeruz5.in 与 sabzeruz/sabzeruz5.ans。", ""]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "湖北"], "title": "[湖北省选模拟 2024] 花神诞日 / sabzeruz", "background": "传说，之所以这个日子会叫做「花神诞日」，其实最早是「花神祝诞」的意思。\n\n在很久很久以前，有一次树王大人过生日，她的朋友们举办了宴席为她祝寿。\n\n宴席上，几位神明大人都喝醉了，其中一位便乘兴弹奏起了乐器，于是树王大人唱歌，花神大人就跳起舞来。\n\n在花神大人起舞时，她踏过的草地上，长出了无数美丽的帕蒂沙兰……\n\n啊，若是时间能永驻此刻就好了。", "description": "你正在为花神诞日准备宴席。你一共有 $N$ 种食材，依次编号为 $1,2,\\cdots, N$，第 $i$ 种食材的味道为 $a_i$，任意两种食材的味道都不相同。你希望用这 $N$ 种食材做两道菜，每种食材必须被在**恰好**一道菜中使用。每道菜至少使用一种食材。\n\n同一道菜中不同食材的味道会**两两发生反应**。食材 $i$ 与食材 $j$ 反应，将产生 $a_i \\oplus a_j$ 的味道，其中 $\\oplus$ 表示异或运算。一道菜最终的味道为**两两反应产生的味道的最小值**。例如，一道菜使用了味道分别为 $2,3,4$ 的三种食材，食材将会两两反应产生 $1(2 \\oplus 3)$，$6(2\\oplus 4)$，$7(3\\oplus 4)$ 三种味道，这道菜的味道为 $\\min(1,6,7)=1$。\n\n本真的味道最为美味。**如果一道菜只使用了一种食材，这道菜的味道为 $+\\infty$。**\n\n你希望第一道菜的味道不低于 $k_1$，第二道菜的味道不低于 $k_2$。请问，你一共有多少种做菜的方案？\n\n**请注意：相同集合的食材，分别作为第一道菜与第二道菜是两种不同的方案。** 例如，第一道菜使用食材 $1,2,3$，第二道菜使用食材 $4,5$，与第一道菜使用食材 $4,5$，第二道菜使用食材 $1,2,3$ 是两种不同的方案。\n\n由于答案可能很大，你只需要输出答案对 $10^9+7$ 取模的值。", "inputFormat": "输入共两行。\n\n输入的第一行为三个正整数 $N,k_1,k_2$，分别表示食材的种类数、第一道菜与第二道菜要求的味道。\n\n输入的第二行包含 $N$ 个正整数 $a_1,a_2,\\cdots,a_N$，$a_i$ 表示第 $i$ 种食材的味道。", "outputFormat": "输出一行一个整数，表示做菜的方案数对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 2\n\n做菜的五种方式列举如下：\n\n- 第一道菜使用食材 $1,2,3$，第二道菜使用食材 $4$。\n- 第一道菜使用食材 $1,2$，第二道菜使用食材 $3,4$。\n- 第一道菜使用食材 $1,3$，第二道菜使用食材 $2,4$。\n- 第一道菜使用食材 $2,3,4$，第二道菜使用食材 $1$。\n- 第一道菜使用食材 $3,4$，第二道菜使用食材 $1,2$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le N \\le 2\\times 10^5$，$1 \\le k_1,k_2,a_i <2^{60}$。对于任意的 $1 \\le i<j \\le N$，有 $a_i \\neq a_j$。\n\n| 测试点编号 | $N\\le$ | 特殊性质 |\n| :--:|:--:|:--:|\n| $1$ | $18$ | 无 |\n| $2\\sim 3$ | $5\\times 10^3$ | A |\n| $4\\sim 8$ | $5\\times 10^3$ | 无 |\n| $9\\sim 11$ | $2\\times 10^5$ | A |\n| $12\\sim 15$ | $2\\times 10^5$ | B |\n| $16\\sim 25$ | $2\\times 10^5$ | 无 |\n\n特殊性质 A：保证 $k_1=k_2$。\n\n特殊性质 B：保证 $k_1=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2024] 花神诞日 / sabzeruz", "background": "传说，之所以这个日子会叫做「花神诞日」，其实最早是「花神祝诞」的意思。\n\n在很久很久以前，有一次树王大人过生日，她的朋友们举办了宴席为她祝寿。\n\n宴席上，几位神明大人都喝醉了，其中一位便乘兴弹奏起了乐器，于是树王大人唱歌，花神大人就跳起舞来。\n\n在花神大人起舞时，她踏过的草地上，长出了无数美丽的帕蒂沙兰……\n\n啊，若是时间能永驻此刻就好了。", "description": "你正在为花神诞日准备宴席。你一共有 $N$ 种食材，依次编号为 $1,2,\\cdots, N$，第 $i$ 种食材的味道为 $a_i$，任意两种食材的味道都不相同。你希望用这 $N$ 种食材做两道菜，每种食材必须被在**恰好**一道菜中使用。每道菜至少使用一种食材。\n\n同一道菜中不同食材的味道会**两两发生反应**。食材 $i$ 与食材 $j$ 反应，将产生 $a_i \\oplus a_j$ 的味道，其中 $\\oplus$ 表示异或运算。一道菜最终的味道为**两两反应产生的味道的最小值**。例如，一道菜使用了味道分别为 $2,3,4$ 的三种食材，食材将会两两反应产生 $1(2 \\oplus 3)$，$6(2\\oplus 4)$，$7(3\\oplus 4)$ 三种味道，这道菜的味道为 $\\min(1,6,7)=1$。\n\n本真的味道最为美味。**如果一道菜只使用了一种食材，这道菜的味道为 $+\\infty$。**\n\n你希望第一道菜的味道不低于 $k_1$，第二道菜的味道不低于 $k_2$。请问，你一共有多少种做菜的方案？\n\n**请注意：相同集合的食材，分别作为第一道菜与第二道菜是两种不同的方案。** 例如，第一道菜使用食材 $1,2,3$，第二道菜使用食材 $4,5$，与第一道菜使用食材 $4,5$，第二道菜使用食材 $1,2,3$ 是两种不同的方案。\n\n由于答案可能很大，你只需要输出答案对 $10^9+7$ 取模的值。", "inputFormat": "输入共两行。\n\n输入的第一行为三个正整数 $N,k_1,k_2$，分别表示食材的种类数、第一道菜与第二道菜要求的味道。\n\n输入的第二行包含 $N$ 个正整数 $a_1,a_2,\\cdots,a_N$，$a_i$ 表示第 $i$ 种食材的味道。", "outputFormat": "输出一行一个整数，表示做菜的方案数对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 2\n\n做菜的五种方式列举如下：\n\n- 第一道菜使用食材 $1,2,3$，第二道菜使用食材 $4$。\n- 第一道菜使用食材 $1,2$，第二道菜使用食材 $3,4$。\n- 第一道菜使用食材 $1,3$，第二道菜使用食材 $2,4$。\n- 第一道菜使用食材 $2,3,4$，第二道菜使用食材 $1$。\n- 第一道菜使用食材 $3,4$，第二道菜使用食材 $1,2$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le N \\le 2\\times 10^5$，$1 \\le k_1,k_2,a_i <2^{60}$。对于任意的 $1 \\le i<j \\le N$，有 $a_i \\neq a_j$。\n\n| 测试点编号 | $N\\le$ | 特殊性质 |\n| :--:|:--:|:--:|\n| $1$ | $18$ | 无 |\n| $2\\sim 3$ | $5\\times 10^3$ | A |\n| $4\\sim 8$ | $5\\times 10^3$ | 无 |\n| $9\\sim 11$ | $2\\times 10^5$ | A |\n| $12\\sim 15$ | $2\\times 10^5$ | B |\n| $16\\sim 25$ | $2\\times 10^5$ | 无 |\n\n特殊性质 A：保证 $k_1=k_2$。\n\n特殊性质 B：保证 $k_1=1$。", "locale": "zh-CN"}}}
{"pid": "P10201", "type": "P", "difficulty": 7, "samples": [["5 5 5 0\n19999\n14519\n99949\n9999#\n999#0\n2 1 1 3 4 114514\n2 5 1 3 1 99999\n2 1 1 5 5 0\n2 5 1 1 5 557047\n2 3 1 4 4 838871", "Yes\nYes\nNo\nYes\nYes"], ["见选手目录下的 eternity/eternity2.in 与 eternity/eternity2.ans。", "该样例符合测试点 9 ∼ 11 的限制。"], ["见选手目录下的 eternity/eternity3.in 与 eternity/eternity3.ans。", ""]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "湖北", "线段树分治"], "title": "[湖北省选模拟 2024] 永恒 / eternity", "background": "总有地上的生灵，敢于直面雷霆的威光。", "description": "稻妻的地图可以被划分为 $N$ 行 $M$ 列的网格，第 $i$ 行第 $j$ 列的区域用 $(i,j)$ 表示。曾经，每一块区域中都有一位神之眼拥有者，其元素力编号为 $c_{i,j}$（$0 \\le c_{i,j} \\le 9$）。\n\n雷电将军降下雷霆的威光，收缴了一部分神之眼。神之眼被收缴的区域，被称为**雷电封锁区**，其他区域称为**非雷电封锁区**。由于你反对眼狩令而遭到通缉，你不能进入**雷电封锁区**，也无法离开稻妻地图区域。\n\n你正在积蓄力量，你可以在**相邻的非雷电封锁区**自由移动。假设你现在在 $(i,j)$，你可以移动到 $(i+1,j),(i-1,j),(i,j+1),(i,j-1)$ 四个区域中的任意一个**非雷电封锁区**。在一次移动中，你积蓄的力量为，经过的所有区域的神之眼元素力编号**依次相连**，对 $1\\ 145\\ 141$ 取模的结果。例如，你经过的区域神之眼元素力编号依次为 $3,1,0,3,3,3,2,1$，那么你积蓄的力量为 $31033321 \\bmod 1145141 = 114514$。**请注意，你的一次移动可以经过相同的非雷电封锁区。重复经过相同的非雷电封锁区将重复积蓄力量。**\n\n常道恢宏，鸣神永恒。永恒的愿望终为南柯一梦，变化的趋势岂可阻挡。稻妻会随时间发生变化。在 $1\\sim Q$ 秒，每秒发生了一个事件，事件有如下两种：\n\n- `1 x y c`：若 $c$ 为 `#`，表示 $(x,y)$ 的神之眼已经**被收缴**，$(x,y)$ 为雷电封锁区；若 $c$ 为数字字符，则表示 $(x,y)$ 的神之眼拥有者重获元素力编号为 $c$ 的神之眼，或其神之眼元素力编号变化为 $c$，$(x,y)$ 为非雷电封锁区。\n\n- `2 sx sy tx ty v`：请判断是否存在由 $(sx,sy)$ 出发，到达 $(tx,ty)$ 的移动方式，使得你积蓄了恰好为 $v$ 的力量。保证 $(sx,sy)$ 与 $(tx,ty)$ 均为非雷电封锁区。\n\n请回答全部事件 2，保证至少有一次事件 2。", "inputFormat": "输入共 $N+Q+1$ 行。\n\n第一行为四个整数 $N,M,Q,id$，其中 $id$ 表示该测试点编号。\n\n接下来 $N$ 行，每行 $M$ 个字符，描述了稻妻的地图。若第 $i$ 行第 $j$ 个字符为 `#`，则表示 $(i,j)$ 是**雷电封锁区**；若第 $i$ 行第 $j$ 个字符为数字字符，则 $(i,j)$ 为**非雷电封锁区**，该数字字符描述了 $(i,j)$ 神之眼拥有者的神之眼元素力编号。\n\n接下来 $Q$ 行，依照时间顺序描述了每一秒的事件，描述格式如题目描述所示。", "outputFormat": "输出若干行，对于每一个事件 2 输出一行：\n\n- 若存在积蓄力量为 $v$ 的移动方式，输出 `Yes`；\n- 若不存在积蓄力量为 $v$ 的移动方式，输出 `No`。", "hint": "### 样例解释 1\n\n**请注意，全部样例输入中 $id$ 均为 $0$。**\n\n对于第一组询问，$(1,1)\\to (2,1)\\to (2,2)\\to (2,3)\\to (2,4)\\to (3,4)$。\n\n对于第二组询问，$(5,1)\\to (5,2)\\to (4,2)\\to (3,2)\\to (3,1)$。\n\n对于第三组询问，有雷电封锁区阻挡，显然无法到达。\n\n对于第四组询问，$(5,1)\\to (4,1)\\to (3,1)\\to (2,1)\\to (1,1)\\to (1,2)\\to (1,3)\\to (1,4)\\to (1,5)$，权值为 $999119999 \\bmod 1145141=557047$。\n\n对于第五组询问，$(3,1)\\to (4,1)\\to (4,2)\\to (4,3)\\to (4,4)\\to (4,3)\\to (4,4)$ ，权值为 $9999999\\bmod 1145141=838871$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le n,m \\le 500$，$1 \\le Q \\le 2\\times10^5$，$1 \\le x, sx, tx \\le N$，$1 \\le y,sy,ty \\le M$，$0 \\le v < 1145141$。输入的迷宫仅包含 `#` 和数字字符。\n\n| 测试点编号 | $N,M \\le$ | 特殊性质 |\n| :--: | :--: | :--: |\n| $1\\sim 2$ | $2$ | B |\n| $3\\sim 4$ | $500$ | A |\n| $5\\sim 6$ | $500$ | B,C |\n| $7\\sim 8$ | $500$ | C |\n| $9\\sim 11$ | $500$ | B,D |\n| $12\\sim 13$ | $500$ | D |\n| $14\\sim 17$ | $500$ | B |\n| $18\\sim 20$ | $500$ | 无 |\n\n特殊性质 A：对于每一个询问，不存在合法方案，或存在不超过 $5$ 步的方案。\n\n特殊性质 B：不存在操作 $1$。\n\n特殊性质 C：任何时候所有非雷电封锁区的格子，上面的数字是 $0$。\n\n特殊性质 D：任何时候所有非雷电封锁区的格子，上面的数字相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2024] 永恒 / eternity", "background": "总有地上的生灵，敢于直面雷霆的威光。", "description": "稻妻的地图可以被划分为 $N$ 行 $M$ 列的网格，第 $i$ 行第 $j$ 列的区域用 $(i,j)$ 表示。曾经，每一块区域中都有一位神之眼拥有者，其元素力编号为 $c_{i,j}$（$0 \\le c_{i,j} \\le 9$）。\n\n雷电将军降下雷霆的威光，收缴了一部分神之眼。神之眼被收缴的区域，被称为**雷电封锁区**，其他区域称为**非雷电封锁区**。由于你反对眼狩令而遭到通缉，你不能进入**雷电封锁区**，也无法离开稻妻地图区域。\n\n你正在积蓄力量，你可以在**相邻的非雷电封锁区**自由移动。假设你现在在 $(i,j)$，你可以移动到 $(i+1,j),(i-1,j),(i,j+1),(i,j-1)$ 四个区域中的任意一个**非雷电封锁区**。在一次移动中，你积蓄的力量为，经过的所有区域的神之眼元素力编号**依次相连**，对 $1\\ 145\\ 141$ 取模的结果。例如，你经过的区域神之眼元素力编号依次为 $3,1,0,3,3,3,2,1$，那么你积蓄的力量为 $31033321 \\bmod 1145141 = 114514$。**请注意，你的一次移动可以经过相同的非雷电封锁区。重复经过相同的非雷电封锁区将重复积蓄力量。**\n\n常道恢宏，鸣神永恒。永恒的愿望终为南柯一梦，变化的趋势岂可阻挡。稻妻会随时间发生变化。在 $1\\sim Q$ 秒，每秒发生了一个事件，事件有如下两种：\n\n- `1 x y c`：若 $c$ 为 `#`，表示 $(x,y)$ 的神之眼已经**被收缴**，$(x,y)$ 为雷电封锁区；若 $c$ 为数字字符，则表示 $(x,y)$ 的神之眼拥有者重获元素力编号为 $c$ 的神之眼，或其神之眼元素力编号变化为 $c$，$(x,y)$ 为非雷电封锁区。\n\n- `2 sx sy tx ty v`：请判断是否存在由 $(sx,sy)$ 出发，到达 $(tx,ty)$ 的移动方式，使得你积蓄了恰好为 $v$ 的力量。保证 $(sx,sy)$ 与 $(tx,ty)$ 均为非雷电封锁区。\n\n请回答全部事件 2，保证至少有一次事件 2。", "inputFormat": "输入共 $N+Q+1$ 行。\n\n第一行为四个整数 $N,M,Q,id$，其中 $id$ 表示该测试点编号。\n\n接下来 $N$ 行，每行 $M$ 个字符，描述了稻妻的地图。若第 $i$ 行第 $j$ 个字符为 `#`，则表示 $(i,j)$ 是**雷电封锁区**；若第 $i$ 行第 $j$ 个字符为数字字符，则 $(i,j)$ 为**非雷电封锁区**，该数字字符描述了 $(i,j)$ 神之眼拥有者的神之眼元素力编号。\n\n接下来 $Q$ 行，依照时间顺序描述了每一秒的事件，描述格式如题目描述所示。", "outputFormat": "输出若干行，对于每一个事件 2 输出一行：\n\n- 若存在积蓄力量为 $v$ 的移动方式，输出 `Yes`；\n- 若不存在积蓄力量为 $v$ 的移动方式，输出 `No`。", "hint": "### 样例解释 1\n\n**请注意，全部样例输入中 $id$ 均为 $0$。**\n\n对于第一组询问，$(1,1)\\to (2,1)\\to (2,2)\\to (2,3)\\to (2,4)\\to (3,4)$。\n\n对于第二组询问，$(5,1)\\to (5,2)\\to (4,2)\\to (3,2)\\to (3,1)$。\n\n对于第三组询问，有雷电封锁区阻挡，显然无法到达。\n\n对于第四组询问，$(5,1)\\to (4,1)\\to (3,1)\\to (2,1)\\to (1,1)\\to (1,2)\\to (1,3)\\to (1,4)\\to (1,5)$，权值为 $999119999 \\bmod 1145141=557047$。\n\n对于第五组询问，$(3,1)\\to (4,1)\\to (4,2)\\to (4,3)\\to (4,4)\\to (4,3)\\to (4,4)$ ，权值为 $9999999\\bmod 1145141=838871$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le n,m \\le 500$，$1 \\le Q \\le 2\\times10^5$，$1 \\le x, sx, tx \\le N$，$1 \\le y,sy,ty \\le M$，$0 \\le v < 1145141$。输入的迷宫仅包含 `#` 和数字字符。\n\n| 测试点编号 | $N,M \\le$ | 特殊性质 |\n| :--: | :--: | :--: |\n| $1\\sim 2$ | $2$ | B |\n| $3\\sim 4$ | $500$ | A |\n| $5\\sim 6$ | $500$ | B,C |\n| $7\\sim 8$ | $500$ | C |\n| $9\\sim 11$ | $500$ | B,D |\n| $12\\sim 13$ | $500$ | D |\n| $14\\sim 17$ | $500$ | B |\n| $18\\sim 20$ | $500$ | 无 |\n\n特殊性质 A：对于每一个询问，不存在合法方案，或存在不超过 $5$ 步的方案。\n\n特殊性质 B：不存在操作 $1$。\n\n特殊性质 C：任何时候所有非雷电封锁区的格子，上面的数字是 $0$。\n\n特殊性质 D：任何时候所有非雷电封锁区的格子，上面的数字相同。", "locale": "zh-CN"}}}
{"pid": "P10202", "type": "P", "difficulty": 6, "samples": [["1\n1", "1"], ["3\n3 3 1", "8"], ["5\n1 2 1 2 1\n", "165"], ["见选手目录下的 jade/jade4.in 与 jade/jade4.ans。", "该样例满足测试点 5 ∼ 8 的限制。"], ["见选手目录下的 jade/jade5.in 与 jade/jade5.ans。", "该样例满足测试点 9 ∼ 12 的限制。"], ["见选手目录下的 jade/jade6.in 与 jade/jade6.ans。", "该样例满足测试点 13 ∼ 16 的限制。"], ["见选手目录下的 jade/jade7.in 与 jade/jade7.ans。", ""]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "数学", "2024", "O2优化", "区间 DP", "湖北"], "title": "[湖北省选模拟 2024] 沉玉谷 / jade", "background": "倘若天下无神，这里便是人的国度。", "description": "你将主持一场祭祀，祭祀会使用到 $N$ 块排成一列的玉石，玉石从左至右依次编号为 $1,2,\\cdots,N$。玉石 $i$ 的颜色为 $a_i$。\n\n每一轮祭祀，你需要选择一段颜色相同的玉石 $a_l \\sim a_r(1\\le l \\le r\\le N\\le 50)$，并将它们沉入水中。本次祭祀的仙力值 $K$ 将变为 $10000\\cdot K+100\\cdot l+r$，$K$ 的初始值为 $0$。\n\n一段玉石被沉入水中后，右侧的玉石会向左移动。**同时，编号也会发生变化**，从左至右依次编号为 $1,2,\\cdots$。例如，共有 $7$ 块玉石，颜色依次为 $1,1,2,2,2,3,2$。一开始，颜色为 $3$ 的玉石编号为 $6$，在 $3\\sim 5$ 号玉石被沉入水中后，其编号将变为 $3$。\n\n当所有玉石被沉入水中，祭祀完成，此时的仙力值即为本次祭祀的仙力值。请问祭祀完成后，一共可能得到多少种不同的仙力值？\n\n由于答案可能很大，你只需要输出答案对 $10^9+7$ 取模的值。", "inputFormat": "输入共两行。\n\n输入的第一行为一个正整数 $N$，表示玉石的个数。\n\n输入的第二行为 $N$ 个正整数 $a_1,a_2,\\cdots,a_N$，其中 $a_i$ 表示第 $i$ 块玉石的颜色。", "outputFormat": "输出一行一个整数，表示不同仙力值的种数对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 3\n\n这里列举两种可能得到的仙力值和得到的方式：\n\n1. $(1,\\underline{2},1,2,1) \\xrightarrow{K=202} (1,1,\\underline{2},1) \\xrightarrow{K=2\\ 020\\ 303} (\\underline{1},\\underline{1},1) \\xrightarrow{K=20\\ 203\\ 030\\ 102} (\\underline{1}) \\xrightarrow{K=202\\ 030\\ 301\\ 020\\ 101} ()$，得到的仙力值 $K$ 为 $202\\ 030\\ 301\\ 020\\ 101$。\n\n2. $(1,2,\\underline{1},2,1) \\xrightarrow{K=303} (1,\\underline{2},\\underline{2},1) \\xrightarrow{K=3\\ 030\\ 203} (\\underline{1},\\underline{1}) \\xrightarrow{K=30\\ 302\\ 030\\ 102} ()$，得到的仙力值 $K$ 为 $30\\ 302\\ 030\\ 102$。\n\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le N \\le 50$，$1 \\le a_i \\le N$。\n\n| 测试点编号 | $N\\le$ | 特殊性质 |\n| :--: | :--: | :--: |\n| $1\\sim 2$ | $18$ | 无 |\n| $3$ | $50$ | A |\n| $4$ | $50$ | B |\n| $5\\sim 8$ | $50$ | C,D |\n| $9\\sim 12$ | $50$ | C |\n| $13\\sim 16$ | $50$ | D |\n| $17\\sim 25$ | $50$ | 无 |\n\n特殊性质 A：保证 $a_i=i$。\n\n特殊性质 B：保证 $a_i=1$。\n\n特殊性质 C：保证不存在 $p_1<p_2<p_3<p_4$，使得 $a_{p_1}=a_{p_3},a_{p_2}=a_{p_4},a_{p_1}\\neq a_{p_2}$。\n\n特殊性质 D：保证不存在 $p_1<p_2<p_3$，使得 $a_{p_1}=a_{p_2}=a_{p_3}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2024] 沉玉谷 / jade", "background": "倘若天下无神，这里便是人的国度。", "description": "你将主持一场祭祀，祭祀会使用到 $N$ 块排成一列的玉石，玉石从左至右依次编号为 $1,2,\\cdots,N$。玉石 $i$ 的颜色为 $a_i$。\n\n每一轮祭祀，你需要选择一段颜色相同的玉石 $a_l \\sim a_r(1\\le l \\le r\\le N\\le 50)$，并将它们沉入水中。本次祭祀的仙力值 $K$ 将变为 $10000\\cdot K+100\\cdot l+r$，$K$ 的初始值为 $0$。\n\n一段玉石被沉入水中后，右侧的玉石会向左移动。**同时，编号也会发生变化**，从左至右依次编号为 $1,2,\\cdots$。例如，共有 $7$ 块玉石，颜色依次为 $1,1,2,2,2,3,2$。一开始，颜色为 $3$ 的玉石编号为 $6$，在 $3\\sim 5$ 号玉石被沉入水中后，其编号将变为 $3$。\n\n当所有玉石被沉入水中，祭祀完成，此时的仙力值即为本次祭祀的仙力值。请问祭祀完成后，一共可能得到多少种不同的仙力值？\n\n由于答案可能很大，你只需要输出答案对 $10^9+7$ 取模的值。", "inputFormat": "输入共两行。\n\n输入的第一行为一个正整数 $N$，表示玉石的个数。\n\n输入的第二行为 $N$ 个正整数 $a_1,a_2,\\cdots,a_N$，其中 $a_i$ 表示第 $i$ 块玉石的颜色。", "outputFormat": "输出一行一个整数，表示不同仙力值的种数对 $10^9+7$ 取模的结果。", "hint": "### 样例解释 3\n\n这里列举两种可能得到的仙力值和得到的方式：\n\n1. $(1,\\underline{2},1,2,1) \\xrightarrow{K=202} (1,1,\\underline{2},1) \\xrightarrow{K=2\\ 020\\ 303} (\\underline{1},\\underline{1},1) \\xrightarrow{K=20\\ 203\\ 030\\ 102} (\\underline{1}) \\xrightarrow{K=202\\ 030\\ 301\\ 020\\ 101} ()$，得到的仙力值 $K$ 为 $202\\ 030\\ 301\\ 020\\ 101$。\n\n2. $(1,2,\\underline{1},2,1) \\xrightarrow{K=303} (1,\\underline{2},\\underline{2},1) \\xrightarrow{K=3\\ 030\\ 203} (\\underline{1},\\underline{1}) \\xrightarrow{K=30\\ 302\\ 030\\ 102} ()$，得到的仙力值 $K$ 为 $30\\ 302\\ 030\\ 102$。\n\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\le N \\le 50$，$1 \\le a_i \\le N$。\n\n| 测试点编号 | $N\\le$ | 特殊性质 |\n| :--: | :--: | :--: |\n| $1\\sim 2$ | $18$ | 无 |\n| $3$ | $50$ | A |\n| $4$ | $50$ | B |\n| $5\\sim 8$ | $50$ | C,D |\n| $9\\sim 12$ | $50$ | C |\n| $13\\sim 16$ | $50$ | D |\n| $17\\sim 25$ | $50$ | 无 |\n\n特殊性质 A：保证 $a_i=i$。\n\n特殊性质 B：保证 $a_i=1$。\n\n特殊性质 C：保证不存在 $p_1<p_2<p_3<p_4$，使得 $a_{p_1}=a_{p_3},a_{p_2}=a_{p_4},a_{p_1}\\neq a_{p_2}$。\n\n特殊性质 D：保证不存在 $p_1<p_2<p_3$，使得 $a_{p_1}=a_{p_2}=a_{p_3}$。", "locale": "zh-CN"}}}
{"pid": "P10203", "type": "P", "difficulty": 6, "samples": [["4 4 1\n1 2 1 2\n3 2 1 3\n3 4 1 5\n2 4 1 2\n1", "565671802"], ["9 9 5\n9 3 3 5\n9 1 1 2\n9 2 1 1\n4 7 4 5\n2 4 2 3\n6 8 1 4\n5 6 1 3\n3 5 2 5\n8 3 3 5\n1\n3\n4\n7\n5", "35936800\n46584741\n380663851\n584039500\n757135070"], ["见选手目录下的 tartaglia/tartaglia3.in 与 tartaglia/tartaglia3.ans。", "该样例满足测试点 1 ∼ 2 的限制。"], ["见选手目录下的 tartaglia/tartaglia4.in 与 tartaglia/tartaglia4.ans。", "该样例满足测试点 10 ∼ 13 的限制。"], ["见选手目录下的 tartaglia/tartaglia5.in 与 tartaglia/tartaglia5.ans。", "该样例满足测试点 14 ∼ 19 的限制。"], ["见选手目录下的 tartaglia/tartaglia6.in 与 tartaglia/tartaglia6.ans。", ""]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "O2优化", "湖北"], "title": "[湖北省选模拟 2024] 玩具销售员 / tartaglia", "background": "孩童时期的梦是最易碎的东西，哪怕放着不管，也总有一天会自己碎掉，所以，一定要有人来保护才行吧。", "description": "“独眼小宝”是托克最喜欢的玩具，作为璃月最好的玩具销售员，达达利亚共招募了 $N$ 位经销商负责分销“独眼小宝”，$N$ 位经销商依次编号为 $1,2,\\cdots,N$。\n\n$N$ 位经销商中共形成了 $M$ 对交易关系，依次编号为 $1,2,\\cdots,M$，第 $i$ 对交易关系联系起经销商 $u_i,v_i$。对于第 $i$ 对交易关系，当一方获知“独眼小宝”的生产情报时，将有 $\\dfrac{p_i}{q_i}$ 的概率告知另一方。形式化地，经销商和他们之间的交易关系构成了一张无向图，**数据保证这张无向图是连通的、无自环的和无重边的。**\n\n一些经销商 $a_1,a_2,\\cdots,a_k(k>2)$ 构成**商业集团**，**当且仅当**存在 $k$ 组不同的交易关系，使得第 $w$ 组关系联系起经销商 $a_w,a_{w \\bmod k+1}$。形式化地，一个商业集团对应 $k$ 名经销商和他们的交易关系图中的一个简单环。**一名经销商最多属于一个商业集团。**\n\n现在，达达利亚希望对这些经销商进行测试，他共进行了 $Q$ 次**独立的**测试。对于第 $i$ 次测试，达达利亚将“独眼小宝”的生产情报告知了经销商 $S_i$，请问期望条件下，共有多少名经销商会得知该情报？\n\n**可以证明，期望一定可以被表示为 $\\dfrac{p}{q}$ 的形式，你需要输出 $p\\cdot q^{-1}\\pmod {998\\ 244\\ 353}$ 的值。**", "inputFormat": "输入共 $M+Q+1$ 行。\n\n输入的第一行为三个正整数 $N,M,Q$，分别表示经销商数量、交易关系数量和测试次数。\n\n接下来 $M$ 行，每行四个正整数 $u_i,v_i,p_i,q_i$，表示第 $i$ 条交易关系联系的经销商与告知概率。\n\n接下来 $Q$ 行，每行一个整数 $S_i$，表示第 $i$ 次测试所告知的经销商。", "outputFormat": "输出 $Q$ 行。对于每组询问，输出一行一个整数，表示期望对 $998\\ 244\\ 353$ 取模的结果。", "hint": "### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ii4noq6d.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/qz2o6jfu.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/dbojsfej.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/xq08n2l2.png)\n\n上图展现了所有的 $16$ 种可能的图连通情况，从上至下，从左至右，依次编号为 $1\\sim 16$。对于节点 $1$ 的询问，我们依次计算 $16$ 种情况中节点 $1$ 能到达的节点数和该情况对应的概率：\n\n| 图编号 | 节点数 | 概率 | 期望 |\n| :--: | :--: | :--: | :--: |\n| $1$ | $4$ | $\\frac{1}{60}$ | $\\frac{1}{15}$ |\n| $2$ | $1$ | $\\frac{1}{60}$ | $\\frac{1}{60}$ |\n| $3$ | $4$ | $\\frac{1}{30}$ | $\\frac{2}{15}$ |\n| $4$ | $4$ | $\\frac{1}{15}$ | $\\frac{4}{15}$ |\n| $5$ | $4$ | $\\frac{1}{60}$ | $\\frac{1}{15}$ |\n| $6$ | $1$ | $\\frac{1}{30}$ | $\\frac{1}{30}$ |\n| $7$ | $1$ | $\\frac{1}{15}$ | $\\frac{1}{15}$ |\n| $8$ | $1$ | $\\frac{1}{60}$ | $\\frac{1}{60}$ |\n| $9$ | $3$ | $\\frac{2}{15}$ | $\\frac{2}{5}$ |\n| $10$ | $2$ | $\\frac{1}{30}$ | $\\frac{1}{15}$ |\n| $11$ | $3$ | $\\frac{1}{15}$ | $\\frac{1}{5}$ |\n| $12$ | $1$ | $\\frac{2}{15}$ | $\\frac{2}{15}$ |\n| $13$ | $1$ | $\\frac{1}{30}$ | $\\frac{1}{30}$ |\n| $14$ | $1$ | $\\frac{1}{15}$ | $\\frac{1}{15}$ |\n| $15$ | $2$ | $\\frac{2}{15}$ | $\\frac{4}{15}$ |\n| $16$ | $1$ | $\\frac{2}{15}$ | $\\frac{2}{15}$ |\n\n求和，得到 $E=\\sum E_i=\\frac{59}{30}\\equiv 565\\ 671\\ 802\\pmod{998\\ 244\\ 353}$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\leq N,M,Q \\leq 3 \\times 10^5$，$1 \\le u_i,v_i \\le N$，$u_i\\neq v_i$，$1 \\le p_i,q_i < 998\\ 244 \\ 353$，$1 \\le S_i \\le N$。\n\n| 测试点编号 | $N,M,Q\\le$ | 特殊性质 |\n| :--: | :--: | :--: |\n| $1\\sim 2$ | $17$ | 无 |\n| $3\\sim 4$ | $2\\times 10^3$ | A |\n| $5\\sim 7$ | $2\\times 10^3$ | B |\n| $8\\sim 9$ | $2\\times 10^3$ | 无 |\n| $10\\sim 13$ | $3\\times 10^5$ | A |\n| $14\\sim 19$ | $3\\times 10^5$ | B |\n| $20\\sim 25$ | $3\\times 10^5$ | 无 |\n\n特殊性质 A：不存在集团。\n\n特殊性质 B：有且只有一个集团。\n\n### 提示\n\n在本题中，你可能需要使用较大的栈空间。在最终测试时，程序可使用的栈空间内存限制与题目内存限制一致。\n\n若你使用 Linux 系统，可使用命令 `ulimit -s unlimited` 解除系统栈空间限制。若你使用 Windows 系统，可在编译命令后添加 `-Wl,--stack=1024000000`，以将系统栈空间限制修改为约 1024MiB。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2024] 玩具销售员 / tartaglia", "background": "孩童时期的梦是最易碎的东西，哪怕放着不管，也总有一天会自己碎掉，所以，一定要有人来保护才行吧。", "description": "“独眼小宝”是托克最喜欢的玩具，作为璃月最好的玩具销售员，达达利亚共招募了 $N$ 位经销商负责分销“独眼小宝”，$N$ 位经销商依次编号为 $1,2,\\cdots,N$。\n\n$N$ 位经销商中共形成了 $M$ 对交易关系，依次编号为 $1,2,\\cdots,M$，第 $i$ 对交易关系联系起经销商 $u_i,v_i$。对于第 $i$ 对交易关系，当一方获知“独眼小宝”的生产情报时，将有 $\\dfrac{p_i}{q_i}$ 的概率告知另一方。形式化地，经销商和他们之间的交易关系构成了一张无向图，**数据保证这张无向图是连通的、无自环的和无重边的。**\n\n一些经销商 $a_1,a_2,\\cdots,a_k(k>2)$ 构成**商业集团**，**当且仅当**存在 $k$ 组不同的交易关系，使得第 $w$ 组关系联系起经销商 $a_w,a_{w \\bmod k+1}$。形式化地，一个商业集团对应 $k$ 名经销商和他们的交易关系图中的一个简单环。**一名经销商最多属于一个商业集团。**\n\n现在，达达利亚希望对这些经销商进行测试，他共进行了 $Q$ 次**独立的**测试。对于第 $i$ 次测试，达达利亚将“独眼小宝”的生产情报告知了经销商 $S_i$，请问期望条件下，共有多少名经销商会得知该情报？\n\n**可以证明，期望一定可以被表示为 $\\dfrac{p}{q}$ 的形式，你需要输出 $p\\cdot q^{-1}\\pmod {998\\ 244\\ 353}$ 的值。**", "inputFormat": "输入共 $M+Q+1$ 行。\n\n输入的第一行为三个正整数 $N,M,Q$，分别表示经销商数量、交易关系数量和测试次数。\n\n接下来 $M$ 行，每行四个正整数 $u_i,v_i,p_i,q_i$，表示第 $i$ 条交易关系联系的经销商与告知概率。\n\n接下来 $Q$ 行，每行一个整数 $S_i$，表示第 $i$ 次测试所告知的经销商。", "outputFormat": "输出 $Q$ 行。对于每组询问，输出一行一个整数，表示期望对 $998\\ 244\\ 353$ 取模的结果。", "hint": "### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ii4noq6d.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/qz2o6jfu.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/dbojsfej.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/xq08n2l2.png)\n\n上图展现了所有的 $16$ 种可能的图连通情况，从上至下，从左至右，依次编号为 $1\\sim 16$。对于节点 $1$ 的询问，我们依次计算 $16$ 种情况中节点 $1$ 能到达的节点数和该情况对应的概率：\n\n| 图编号 | 节点数 | 概率 | 期望 |\n| :--: | :--: | :--: | :--: |\n| $1$ | $4$ | $\\frac{1}{60}$ | $\\frac{1}{15}$ |\n| $2$ | $1$ | $\\frac{1}{60}$ | $\\frac{1}{60}$ |\n| $3$ | $4$ | $\\frac{1}{30}$ | $\\frac{2}{15}$ |\n| $4$ | $4$ | $\\frac{1}{15}$ | $\\frac{4}{15}$ |\n| $5$ | $4$ | $\\frac{1}{60}$ | $\\frac{1}{15}$ |\n| $6$ | $1$ | $\\frac{1}{30}$ | $\\frac{1}{30}$ |\n| $7$ | $1$ | $\\frac{1}{15}$ | $\\frac{1}{15}$ |\n| $8$ | $1$ | $\\frac{1}{60}$ | $\\frac{1}{60}$ |\n| $9$ | $3$ | $\\frac{2}{15}$ | $\\frac{2}{5}$ |\n| $10$ | $2$ | $\\frac{1}{30}$ | $\\frac{1}{15}$ |\n| $11$ | $3$ | $\\frac{1}{15}$ | $\\frac{1}{5}$ |\n| $12$ | $1$ | $\\frac{2}{15}$ | $\\frac{2}{15}$ |\n| $13$ | $1$ | $\\frac{1}{30}$ | $\\frac{1}{30}$ |\n| $14$ | $1$ | $\\frac{1}{15}$ | $\\frac{1}{15}$ |\n| $15$ | $2$ | $\\frac{2}{15}$ | $\\frac{4}{15}$ |\n| $16$ | $1$ | $\\frac{2}{15}$ | $\\frac{2}{15}$ |\n\n求和，得到 $E=\\sum E_i=\\frac{59}{30}\\equiv 565\\ 671\\ 802\\pmod{998\\ 244\\ 353}$。\n\n### 子任务\n\n对于所有测试数据，保证 $1 \\leq N,M,Q \\leq 3 \\times 10^5$，$1 \\le u_i,v_i \\le N$，$u_i\\neq v_i$，$1 \\le p_i,q_i < 998\\ 244 \\ 353$，$1 \\le S_i \\le N$。\n\n| 测试点编号 | $N,M,Q\\le$ | 特殊性质 |\n| :--: | :--: | :--: |\n| $1\\sim 2$ | $17$ | 无 |\n| $3\\sim 4$ | $2\\times 10^3$ | A |\n| $5\\sim 7$ | $2\\times 10^3$ | B |\n| $8\\sim 9$ | $2\\times 10^3$ | 无 |\n| $10\\sim 13$ | $3\\times 10^5$ | A |\n| $14\\sim 19$ | $3\\times 10^5$ | B |\n| $20\\sim 25$ | $3\\times 10^5$ | 无 |\n\n特殊性质 A：不存在集团。\n\n特殊性质 B：有且只有一个集团。\n\n### 提示\n\n在本题中，你可能需要使用较大的栈空间。在最终测试时，程序可使用的栈空间内存限制与题目内存限制一致。\n\n若你使用 Linux 系统，可使用命令 `ulimit -s unlimited` 解除系统栈空间限制。若你使用 Windows 系统，可在编译命令后添加 `-Wl,--stack=1024000000`，以将系统栈空间限制修改为约 1024MiB。", "locale": "zh-CN"}}}
{"pid": "P10204", "type": "P", "difficulty": 7, "samples": [["4 0\n1 2 3 2", "3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "交互题", "Special Judge", "O2优化", "湖北"], "title": "[湖北省选模拟 2024] 白草净华 / buer", "background": "**由于洛谷评测环境限制，请勿使用 C++ 14 (GCC 9) 语言提交本题，否则可能会导致编译错误。**\n\n**这是一道交互题。**\n\n神明只送给人类填饱肚子的知识，人类却借此制作了工具，书写了文字，壮大了城邦，现在又放眼星辰与深渊……\n\n他们每时每刻都在创造全新的「知识」，也令我再也无法移开双眼。\n\n我自认为我擅长提问和回答问题，但我渐渐明白，有很多人是揣着明白装糊涂，问题的答案并不能帮上他们的忙。是不是随着年龄增长，大家都会失去面对质问和答案的勇气呢……", "description": "智慧之神布耶尔的知识可以用长度为 $N$ 的数列 $a_0,a_1,\\cdots,a_{N-1}$ 表示（请注意，下标从 $0$ 开始）。很遗憾，凡人难以窥探智慧之神的知识，你既不知道 $N$ 的大小，又不知道任何 $a_i$ 的值。\n\n智慧之神是善良的，纳西妲愿意告诉你关于知识的一切：\n\n- 对于任意的 $0 \\le i < N$，$a_i \\neq a_{(i+1)\\bmod N}$。\n- **有且仅有一个** $i(0 \\le i < N)$，使 $a_i>a_{(i+1)\\bmod N}$ 与 $a_i > a_{(i+N-1)\\bmod N}$ 同时成立。\n\n你可以向智慧之神提问，每次提问，你可以向纳西妲提供一个 $0\\sim10^9$ 范围内的整数 $k$，纳西妲将回答你 $a_{(d+k)\\bmod N}$ 的值。其中，$d$ 是上一次纳西妲回答的元素的下标。$d$ 的初始值设定为 $0$。例如，$N=5$，你依次向纳西妲提供了 $1,2,3$，纳西妲回答的数字依次为 $a_1,a_3,a_1$。\n\n你有 $333$ 次提问的机会，你需要求出数列 $a$ 中的最大值。\n\n你，还有质问与提问的勇气吗？\n\n### 实现细节\n\n交互库实现了如下函数，**选手需要在程序中声明这些函数，但不应该实现其函数体**：\n\n```cpp\nint ask(int k);\n```\n\n- 这个函数返回  $a_{(d+k)\\bmod N}$ 的值，并将 $d$ 的值修改为 $d+k$。\n\n```cpp\nint cheat();\n```\n\n- 这个函数返回 $N$ 的值。\n- **调用该函数，将不能得到测试点全部的分数，详见评分方式部分。**\n\n**你不需要，也不应该实现主函数。** 你需要实现函数 `buer`：\n\n```cpp\nint buer(int T);\n```\n\n- `T` 表示测试点编号。\n- 你需要在函数结束时，返回数列 $a$ 的最大值。\n\n**此外，你提交的程序不应试图从或向任何文件或标准控制流读取或写入信息，否则本题以零分计。** 你的程序需要引用全部你所需要的头文件与命名空间。\n\n最终测试时，在每个测试点，交互库会恰好调用一次 `buer` 函数，并将其返回值作为你程序的结果。\n\n下面是一个示例程序，其功能是获取 $a_1 \\sim a_9$ 并返回 $\\max(a_1,a_2)$。选手可以在此基础上继续实现本题。\n\n```cpp\n#include <vector>\nusing std::max;\nusing std::vector;\n// 引用所需头文件与命名空间中的函数\nint ask(int k);\nint cheat(); \n// 声明 ask 与 cheat 函数\nint buer(int T) {\n\tvector <int> vec;\n\tfor(int i = 1; i <= 9; i++) {\n\t\tint p = ask(1);\n\t\tvec.push_back(p);\n\t}\n\treturn max(vec[0], vec[1]);\n}\n```\n\n**保证在 `ask` 函数调用不超过 $3333$ 次的情况下，最终测试的交互库运行所需时间不超过 $0.2$ 秒，交互库本身所消耗的内存不超过 $10$ MiB。**\n\n### 测试程序方式\n\n本题目录下提供了交互库的参考实现 `grader.cpp`。最终测试时所使用的交互库实现与该实现有所不同，因此选手的解法**不应依赖交互库的具体实现**。\n\n选手实现程序 `buer.cpp` 后，将 `grader.cpp` 与 `buer.cpp` 放置在同一目录下，使用如下命令编译得到可执行程序：\n\n```plain\ng++ -c grader.cpp -O2 -std=c++14\ng++ -c buer.cpp -O2 -std=c++14\ng++ grader.o buer.o -o buer -O2 -std=c++14\n```\n\n其中第一行命令会编译 `grader.cpp` 得到目标文件 `grader.o`，第二行命令会编译 `buer.cpp` 得到目标文件 `buer.o`，第三行命令会将 `grader.o` 与 `buer.o` 链接起来，生成可执行文件 `buer`。\n\n按上述方法编译得到的可执行文件 `buer`，其运行方式如下：\n\n- 可执行文件将从 `buer.in` 读入以下格式的数据：\n\n  - 第一行为两个正整数 $N,T$，分别表示 $a$ 的长度与测试点编号。\n  - 第二行为 $N$ 个正整数 $a_0,a_1,\\ldots,a_{N-1}$，表示数列 $a$。\n\n- 若你的程序正常运行完毕，可执行文件将向 `buer.out` 写入以下内容：\n\n  - 输出一行两个整数，分别表示你的询问次数与 `buer` 函数的返回值。\n\n选手在调试时需要保证输入可执行文件 `buer` 的数据满足上述格式，否则不保证交互库正确运行。", "inputFormat": "你提交的程序不应试图从或向任何文件或标准控制流读取或写入信息。", "outputFormat": "你提交的程序不应试图从或向任何文件或标准控制流读取或写入信息。", "hint": "### 样例解释 1\n\n本题提供的样例输入中，第一行为两个整数 $N,T$，分别表示 $N$ 与测试点编号，样例测试点编号均为 $0$。第二行为 $N$ 个整数 $a_0,a_1,\\cdots,a_{N-1}$，表示数列 $a$。样例输出为一行一个正整数，表示数列 $a$ 的最大值。\n\n**请注意，你的程序不应试图从或向任何文件或标准控制流读取或写入信息。**\n\n### 评分方式\n\n最终评测**只**收取 `buer.cpp`，请不要提交选手目录下其他文件。\n\n**本题首先会受到和传统题相同的限制**，例如编译错误会导致整道题目得 $0$ 分，运行\n时错误、超过时间限制、超过空间限制等会导致相应测试点得 $0$ 分等。\n\n在上述条件以外，在一个测试点中，若程序执行了非法的函数调用或 `buer` 函数返回了错误答案，该测试点将会获得 $0$ 分。否则，假设你的程序调用了 $Q$ 次 `ask` 函数：\n\n- 若 $0 \\le Q \\le 333$，且没有调用 `cheat` 函数，该测试点得 $5$ 分。\n\n- 若 $333<Q\\le 3333$，且没有调用 `cheat` 函数，该测试点得 $3$ 分。\n\n- 若 $0\\le Q \\le 333$，但调用了 `cheat` 函数，该测试点得 $2$ 分。\n\n- 若 $333<Q\\le 3333$，但调用了 `cheat` 函数，该测试点得 $1$ 分。\n- 若 $Q>3333$，该测试点得 $0$ 分。\n\n### 子任务\n\n对于所有测试数据，保证 $2 \\le N \\le 10^6$，$1 \\le a_i \\le 10^9$。\n\n| 测试点编号 | $N\\le$ |\n| :--: | :--: |\n| $1$ | $333$ |\n| $2\\sim 20$ | $10^6$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[湖北省选模拟 2024] 白草净华 / buer", "background": "**由于洛谷评测环境限制，请勿使用 C++ 14 (GCC 9) 语言提交本题，否则可能会导致编译错误。**\n\n**这是一道交互题。**\n\n神明只送给人类填饱肚子的知识，人类却借此制作了工具，书写了文字，壮大了城邦，现在又放眼星辰与深渊……\n\n他们每时每刻都在创造全新的「知识」，也令我再也无法移开双眼。\n\n我自认为我擅长提问和回答问题，但我渐渐明白，有很多人是揣着明白装糊涂，问题的答案并不能帮上他们的忙。是不是随着年龄增长，大家都会失去面对质问和答案的勇气呢……", "description": "智慧之神布耶尔的知识可以用长度为 $N$ 的数列 $a_0,a_1,\\cdots,a_{N-1}$ 表示（请注意，下标从 $0$ 开始）。很遗憾，凡人难以窥探智慧之神的知识，你既不知道 $N$ 的大小，又不知道任何 $a_i$ 的值。\n\n智慧之神是善良的，纳西妲愿意告诉你关于知识的一切：\n\n- 对于任意的 $0 \\le i < N$，$a_i \\neq a_{(i+1)\\bmod N}$。\n- **有且仅有一个** $i(0 \\le i < N)$，使 $a_i>a_{(i+1)\\bmod N}$ 与 $a_i > a_{(i+N-1)\\bmod N}$ 同时成立。\n\n你可以向智慧之神提问，每次提问，你可以向纳西妲提供一个 $0\\sim10^9$ 范围内的整数 $k$，纳西妲将回答你 $a_{(d+k)\\bmod N}$ 的值。其中，$d$ 是上一次纳西妲回答的元素的下标。$d$ 的初始值设定为 $0$。例如，$N=5$，你依次向纳西妲提供了 $1,2,3$，纳西妲回答的数字依次为 $a_1,a_3,a_1$。\n\n你有 $333$ 次提问的机会，你需要求出数列 $a$ 中的最大值。\n\n你，还有质问与提问的勇气吗？\n\n### 实现细节\n\n交互库实现了如下函数，**选手需要在程序中声明这些函数，但不应该实现其函数体**：\n\n```cpp\nint ask(int k);\n```\n\n- 这个函数返回  $a_{(d+k)\\bmod N}$ 的值，并将 $d$ 的值修改为 $d+k$。\n\n```cpp\nint cheat();\n```\n\n- 这个函数返回 $N$ 的值。\n- **调用该函数，将不能得到测试点全部的分数，详见评分方式部分。**\n\n**你不需要，也不应该实现主函数。** 你需要实现函数 `buer`：\n\n```cpp\nint buer(int T);\n```\n\n- `T` 表示测试点编号。\n- 你需要在函数结束时，返回数列 $a$ 的最大值。\n\n**此外，你提交的程序不应试图从或向任何文件或标准控制流读取或写入信息，否则本题以零分计。** 你的程序需要引用全部你所需要的头文件与命名空间。\n\n最终测试时，在每个测试点，交互库会恰好调用一次 `buer` 函数，并将其返回值作为你程序的结果。\n\n下面是一个示例程序，其功能是获取 $a_1 \\sim a_9$ 并返回 $\\max(a_1,a_2)$。选手可以在此基础上继续实现本题。\n\n```cpp\n#include <vector>\nusing std::max;\nusing std::vector;\n// 引用所需头文件与命名空间中的函数\nint ask(int k);\nint cheat(); \n// 声明 ask 与 cheat 函数\nint buer(int T) {\n\tvector <int> vec;\n\tfor(int i = 1; i <= 9; i++) {\n\t\tint p = ask(1);\n\t\tvec.push_back(p);\n\t}\n\treturn max(vec[0], vec[1]);\n}\n```\n\n**保证在 `ask` 函数调用不超过 $3333$ 次的情况下，最终测试的交互库运行所需时间不超过 $0.2$ 秒，交互库本身所消耗的内存不超过 $10$ MiB。**\n\n### 测试程序方式\n\n本题目录下提供了交互库的参考实现 `grader.cpp`。最终测试时所使用的交互库实现与该实现有所不同，因此选手的解法**不应依赖交互库的具体实现**。\n\n选手实现程序 `buer.cpp` 后，将 `grader.cpp` 与 `buer.cpp` 放置在同一目录下，使用如下命令编译得到可执行程序：\n\n```plain\ng++ -c grader.cpp -O2 -std=c++14\ng++ -c buer.cpp -O2 -std=c++14\ng++ grader.o buer.o -o buer -O2 -std=c++14\n```\n\n其中第一行命令会编译 `grader.cpp` 得到目标文件 `grader.o`，第二行命令会编译 `buer.cpp` 得到目标文件 `buer.o`，第三行命令会将 `grader.o` 与 `buer.o` 链接起来，生成可执行文件 `buer`。\n\n按上述方法编译得到的可执行文件 `buer`，其运行方式如下：\n\n- 可执行文件将从 `buer.in` 读入以下格式的数据：\n\n  - 第一行为两个正整数 $N,T$，分别表示 $a$ 的长度与测试点编号。\n  - 第二行为 $N$ 个正整数 $a_0,a_1,\\ldots,a_{N-1}$，表示数列 $a$。\n\n- 若你的程序正常运行完毕，可执行文件将向 `buer.out` 写入以下内容：\n\n  - 输出一行两个整数，分别表示你的询问次数与 `buer` 函数的返回值。\n\n选手在调试时需要保证输入可执行文件 `buer` 的数据满足上述格式，否则不保证交互库正确运行。", "inputFormat": "你提交的程序不应试图从或向任何文件或标准控制流读取或写入信息。", "outputFormat": "你提交的程序不应试图从或向任何文件或标准控制流读取或写入信息。", "hint": "### 样例解释 1\n\n本题提供的样例输入中，第一行为两个整数 $N,T$，分别表示 $N$ 与测试点编号，样例测试点编号均为 $0$。第二行为 $N$ 个整数 $a_0,a_1,\\cdots,a_{N-1}$，表示数列 $a$。样例输出为一行一个正整数，表示数列 $a$ 的最大值。\n\n**请注意，你的程序不应试图从或向任何文件或标准控制流读取或写入信息。**\n\n### 评分方式\n\n最终评测**只**收取 `buer.cpp`，请不要提交选手目录下其他文件。\n\n**本题首先会受到和传统题相同的限制**，例如编译错误会导致整道题目得 $0$ 分，运行\n时错误、超过时间限制、超过空间限制等会导致相应测试点得 $0$ 分等。\n\n在上述条件以外，在一个测试点中，若程序执行了非法的函数调用或 `buer` 函数返回了错误答案，该测试点将会获得 $0$ 分。否则，假设你的程序调用了 $Q$ 次 `ask` 函数：\n\n- 若 $0 \\le Q \\le 333$，且没有调用 `cheat` 函数，该测试点得 $5$ 分。\n\n- 若 $333<Q\\le 3333$，且没有调用 `cheat` 函数，该测试点得 $3$ 分。\n\n- 若 $0\\le Q \\le 333$，但调用了 `cheat` 函数，该测试点得 $2$ 分。\n\n- 若 $333<Q\\le 3333$，但调用了 `cheat` 函数，该测试点得 $1$ 分。\n- 若 $Q>3333$，该测试点得 $0$ 分。\n\n### 子任务\n\n对于所有测试数据，保证 $2 \\le N \\le 10^6$，$1 \\le a_i \\le 10^9$。\n\n| 测试点编号 | $N\\le$ |\n| :--: | :--: |\n| $1$ | $333$ |\n| $2\\sim 20$ | $10^6$ |", "locale": "zh-CN"}}}
{"pid": "P10205", "type": "P", "difficulty": 3, "samples": [["2 4\n19 24", "1"], ["3 1\n21 19 23", "0"], ["6 8\n24 22 21 25 29 17", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2024", "JOI（日本）"], "title": "[JOI 2024 Final] 室温 / Room Temperature", "background": "", "description": "K 董事长负责调节高管们的房间的室温，他希望高管们能尽可能舒适地工作。\n\n现在房间里有 $N$ 位高管。每位高管都有一个从 $1$ 到 $N$ 的编号。不穿外套时，高管 $i\\ (1 \\leq i \\leq N)$ 的舒适温度是 $A_{i}$ 度。另外，每位高管每穿一件外套，舒适温度就会降低 $T$ 度。也就是说，高管 $i$ 如果穿了 $k$ 件外套，那么高管 $i$ 的舒适温度就是 $A_{i}-k T$ 度。\n\n如果房间的温度是 $x$ 度，某位高管的舒适温度是 $y$ 度，那么这位高管的不舒适度就是 $|x-y|$。其中，$|t|$ 表示 $t$ 的绝对值。每位高管会根据房间的温度，穿上大于等于 $0$ 件合适的外套，使得不舒适度最小。\n\nK 董事长把高管们的不舒适度的最大值称为房间的不舒适度，并决定要把房间的温度设定为使得房间的不舒适度最小的值。但是，设定的温度必须是整数。\n\n给定高管和舒适温度的信息。编写一个程序，求出房间的不舒适度可能的最小值。", "inputFormat": "第一行包含两个整数 $N,T$。\n\n第二行包含用空格分隔的 $N$ 个整数 $A_1, A_2, \\ldots, A_N$。", "outputFormat": "输出一行一个整数，表示房间的不舒适度可能的最小值。\n\n", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\times 10^5$\n- $1 \\leq T \\leq 10^{9}$\n- $1 \\leq A_{i} \\leq 10^{9}(1 \\leq i \\leq N)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$N=2$|\t15|\n|2|\t$N \\leq 3000, T=1$|\t5|\n|3|\t$N \\leq 3000, T \\leq 2$|\t30|\n|4|\t$N \\leq 3000, T \\leq 3000$|\t35|\n|5|\t无附加限制\t|15|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2024 Final] 室温 / Room Temperature", "background": "", "description": "K 董事长负责调节高管们的房间的室温，他希望高管们能尽可能舒适地工作。\n\n现在房间里有 $N$ 位高管。每位高管都有一个从 $1$ 到 $N$ 的编号。不穿外套时，高管 $i\\ (1 \\leq i \\leq N)$ 的舒适温度是 $A_{i}$ 度。另外，每位高管每穿一件外套，舒适温度就会降低 $T$ 度。也就是说，高管 $i$ 如果穿了 $k$ 件外套，那么高管 $i$ 的舒适温度就是 $A_{i}-k T$ 度。\n\n如果房间的温度是 $x$ 度，某位高管的舒适温度是 $y$ 度，那么这位高管的不舒适度就是 $|x-y|$。其中，$|t|$ 表示 $t$ 的绝对值。每位高管会根据房间的温度，穿上大于等于 $0$ 件合适的外套，使得不舒适度最小。\n\nK 董事长把高管们的不舒适度的最大值称为房间的不舒适度，并决定要把房间的温度设定为使得房间的不舒适度最小的值。但是，设定的温度必须是整数。\n\n给定高管和舒适温度的信息。编写一个程序，求出房间的不舒适度可能的最小值。", "inputFormat": "第一行包含两个整数 $N,T$。\n\n第二行包含用空格分隔的 $N$ 个整数 $A_1, A_2, \\ldots, A_N$。", "outputFormat": "输出一行一个整数，表示房间的不舒适度可能的最小值。\n\n", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\times 10^5$\n- $1 \\leq T \\leq 10^{9}$\n- $1 \\leq A_{i} \\leq 10^{9}(1 \\leq i \\leq N)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$N=2$|\t15|\n|2|\t$N \\leq 3000, T=1$|\t5|\n|3|\t$N \\leq 3000, T \\leq 2$|\t30|\n|4|\t$N \\leq 3000, T \\leq 3000$|\t35|\n|5|\t无附加限制\t|15|", "locale": "zh-CN"}}}
{"pid": "P10206", "type": "P", "difficulty": 4, "samples": [["7 8\n6 7 1 2\n1 2 1\n1 6 1\n2 3 1\n2 4 1\n3 5 1\n3 7 1\n4 5 1\n5 6 1", "4"], ["3 2\n1 3 1 2\n1 2 1\n2 3 1", "3"], ["6 4\n2 5 1000000000 1\n1 2 1000000000\n2 3 1000000000\n2 4 1000000000\n5 6 1000000000", "0"], ["18 21\n4 8 678730772 3000000062\n5 13 805281073\n8 17 80983648\n3 8 996533440\n10 16 514277428\n2 5 57914340\n6 11 966149890\n8 12 532734310\n2 9 188599710\n2 3 966306014\n12 16 656457780\n16 18 662633078\n1 15 698078877\n2 8 665665772\n2 6 652261981\n14 15 712798281\n7 13 571169114\n13 14 860543313\n6 7 454251187\n9 14 293590683\n6 14 959532841\n3 11 591245645", "16"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["二分", "2024", "最短路", "JOI（日本）", "双指针 two-pointer"], "title": "[JOI 2024 Final] 建设工程 2 / Construction Project 2", "background": null, "description": "JOI 国有 $N$ 个火车站，编号从 $1$ 到 $N$。另外，JOI 国有 $M$ 条双向铁路线，编号从 $1$ 到 $M$。铁路线 $i\\ (1 \\leq i \\leq M)$ 连接了火车站 $A_{i}$ 和火车站 $B_{i}$，从一个站到另一个站需要花费 $C_i$ 分钟。\n\n你是 JOI 国的部长，决定按照以下方式新建一条铁路线：\n\n选择两个整数 $u, v\\ (1 \\leq u<v \\leq N)$，在火车站 $u$ 和火车站 $v$ 之间建设一条双向铁路线，从一个站到另一个站需要花费 $L$ 分钟。注意，即使已经有一条连接火车站 $u$ 和火车站 $v$ 的铁路线也可以建设。\n\n如果你建设这条铁路线后，可以花费不超过 $K$ 分钟从火车站 $S$ 到火车站 $T$，国王就会高兴。我们不考虑换乘时间和等待时间。\n\n你有 $\\frac{N(N-1)}{2}$ 种选择两个整数 $u, v$ 的方法，你想知道其中有多少种方法会让国王高兴。\n\n给定火车站和铁路线以及国王的要求的信息，编写一个程序，求出其中有多少种选择整数的方法会让国王高兴。", "inputFormat": "第一行包含两个整数 $N,M$。\n\n第二行包含四个整数 $S,T,L,K$。\n\n接下来 $M$ 行，每行包含三个整数 $A_i, B_i, C_i$，表示第 $i$ 条双向铁路线。", "outputFormat": "输出一行一个整数，表示让国王高兴的两个整数的选择方法有多少种。", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 2\\times 10^5$\n- $1 \\leq M \\leq 2\\times 10^5$\n- $1 \\leq S<T \\leq N$\n- $1 \\leq L \\leq 10^{9}$\n- $1 \\leq K \\leq 10^{15}$\n- $1 \\leq A_{i}<B_{i} \\leq N\\ (1 \\leq i \\leq M)$\n- $(A_{i}, B_{i}) \\neq (A_{j}, B_{j})\\ (1 \\leq i<j \\leq M)$\n- $1 \\leq C_{i} \\leq 10^{9}\\ (1 \\leq i \\leq M)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$L=1, K=2, C_{i}=1\\ (1 \\leq i \\leq M)$|\t8\n|2|\t$N \\leq 50, M \\leq 50$|\t16\n|3|\t$N \\leq 3000, M \\leq 3000$|\t29\n|4|\t无附加限制|\t47", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2024 Final] 建设工程 2 / Construction Project 2", "background": null, "description": "JOI 国有 $N$ 个火车站，编号从 $1$ 到 $N$。另外，JOI 国有 $M$ 条双向铁路线，编号从 $1$ 到 $M$。铁路线 $i\\ (1 \\leq i \\leq M)$ 连接了火车站 $A_{i}$ 和火车站 $B_{i}$，从一个站到另一个站需要花费 $C_i$ 分钟。\n\n你是 JOI 国的部长，决定按照以下方式新建一条铁路线：\n\n选择两个整数 $u, v\\ (1 \\leq u<v \\leq N)$，在火车站 $u$ 和火车站 $v$ 之间建设一条双向铁路线，从一个站到另一个站需要花费 $L$ 分钟。注意，即使已经有一条连接火车站 $u$ 和火车站 $v$ 的铁路线也可以建设。\n\n如果你建设这条铁路线后，可以花费不超过 $K$ 分钟从火车站 $S$ 到火车站 $T$，国王就会高兴。我们不考虑换乘时间和等待时间。\n\n你有 $\\frac{N(N-1)}{2}$ 种选择两个整数 $u, v$ 的方法，你想知道其中有多少种方法会让国王高兴。\n\n给定火车站和铁路线以及国王的要求的信息，编写一个程序，求出其中有多少种选择整数的方法会让国王高兴。", "inputFormat": "第一行包含两个整数 $N,M$。\n\n第二行包含四个整数 $S,T,L,K$。\n\n接下来 $M$ 行，每行包含三个整数 $A_i, B_i, C_i$，表示第 $i$ 条双向铁路线。", "outputFormat": "输出一行一个整数，表示让国王高兴的两个整数的选择方法有多少种。", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 2\\times 10^5$\n- $1 \\leq M \\leq 2\\times 10^5$\n- $1 \\leq S<T \\leq N$\n- $1 \\leq L \\leq 10^{9}$\n- $1 \\leq K \\leq 10^{15}$\n- $1 \\leq A_{i}<B_{i} \\leq N\\ (1 \\leq i \\leq M)$\n- $(A_{i}, B_{i}) \\neq (A_{j}, B_{j})\\ (1 \\leq i<j \\leq M)$\n- $1 \\leq C_{i} \\leq 10^{9}\\ (1 \\leq i \\leq M)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$L=1, K=2, C_{i}=1\\ (1 \\leq i \\leq M)$|\t8\n|2|\t$N \\leq 50, M \\leq 50$|\t16\n|3|\t$N \\leq 3000, M \\leq 3000$|\t29\n|4|\t无附加限制|\t47", "locale": "zh-CN"}}}
{"pid": "P10207", "type": "P", "difficulty": 6, "samples": [["3 100\n30 80 30\n3\n0 100 403\n0 100 300\n0 100 262", "Yes\nYes\nNo"], ["3 100\n30 80 30\n3\n0 0 403\n0 0 300\n0 0 262", "Yes\nNo\nNo"], ["6 100\n0 50 100 0 50 100\n4\n20 70 600\n70 20 600\n10 40 600\n40 10 600", "No\nYes\nNo\nYes"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2024", "JOI（日本）"], "title": "[JOI 2024 Final] 马拉松比赛 2 / Marathon Race 2", "background": "", "description": "JOI 大道是一条东西向的长度为 $L$ 米的道路，地点 $l$ 位于从道路的西端走 $l\\ (0 \\leq l \\leq L)$ 米的地方。\n\n今年 JOI 大道上第一次举办了马拉松大会。这个马拉松大会的规则和一般的不同，是按照以下的方式进行的：\n\n- 道路上放了 $N$ 个球，第 $i\\ (1 \\leq i \\leq N)$ 个球放在地点 $X_{i}$。有些地方可能有多个球放在一起。\n- 参加者从规定的起点出发，拿到所有 $N$ 个球后，如果在规定的时间内到达规定的终点，就算是完赛。但是，如果把拿到的球放在地上就会被取消资格。\n\n这个大会的起点，终点和时间限制还没有公布，但是已经公布了 $Q$ 个可能的方案。第 $j\\ (1 \\leq j \\leq Q)$ 个方案的起点是地点 $S_{j}$，终点是地点 $G_{j}$，时间限制是 $T_{j}$ 秒。\n\n理恵是马拉松大会的其中一名运动员。她拿起一个球要花 $1$ 秒，拿着 $x$ 个球在道路上跑 $1$ 米要花 $x+1$ 秒。\n\n给出 JOI 大道，球，方案的信息。编写一个程序，对于每个方案判断理恵能不能完赛。", "inputFormat": "第一行包含两个整数 $N,L$。\n\n第二行包含用空格分隔的 $N$ 个整数 $X_1, X_2, \\ldots ,X_N$。\n\n第三行包含一个整数 $Q$。\n\n接下来 $Q$ 行，每行包含三个整数 $S_j, G_j, T_j$，表示第 $j$ 个方案。", "outputFormat": "输出 $Q$ 行。第 $j\\ (1 \\leq j \\leq Q)$ 行，如果第 $j$ 个方案理恵能完赛输出 Yes，否则输出 No。", "hint": "对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\times 10^5$\n- $1 \\leq L \\leq 5\\times 10^5$\n- $0 \\leq X_{i} \\leq L\\ (1 \\leq i \\leq N)$\n- $1 \\leq Q \\leq 5\\times 10^5$\n- $0 \\leq S_{j} \\leq L\\ (1 \\leq j \\leq Q)$\n- $0 \\leq G_{j} \\leq L\\ (1 \\leq j \\leq Q)$\n- $1 \\leq T_{j} \\leq 5\\times 10^5\\ (1 \\leq j \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$N \\leq 7, Q \\leq 10, S_{j}=0, G_{j}=0\\ (1 \\leq j \\leq Q)$|\t7\n|2|\t$N \\leq 7, Q \\leq 10$|\t7\n|3|\t$N \\leq 14, Q \\leq 10$|\t10\n|4|\t$N \\leq 100, Q \\leq 10$|\t28\n|5|\t$N \\leq 2000, Q \\leq 10$|\t10\n|6|\t$N \\leq 2000$|\t19\n|7|\t无附加限制\t|19", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2024 Final] 马拉松比赛 2 / Marathon Race 2", "background": "", "description": "JOI 大道是一条东西向的长度为 $L$ 米的道路，地点 $l$ 位于从道路的西端走 $l\\ (0 \\leq l \\leq L)$ 米的地方。\n\n今年 JOI 大道上第一次举办了马拉松大会。这个马拉松大会的规则和一般的不同，是按照以下的方式进行的：\n\n- 道路上放了 $N$ 个球，第 $i\\ (1 \\leq i \\leq N)$ 个球放在地点 $X_{i}$。有些地方可能有多个球放在一起。\n- 参加者从规定的起点出发，拿到所有 $N$ 个球后，如果在规定的时间内到达规定的终点，就算是完赛。但是，如果把拿到的球放在地上就会被取消资格。\n\n这个大会的起点，终点和时间限制还没有公布，但是已经公布了 $Q$ 个可能的方案。第 $j\\ (1 \\leq j \\leq Q)$ 个方案的起点是地点 $S_{j}$，终点是地点 $G_{j}$，时间限制是 $T_{j}$ 秒。\n\n理恵是马拉松大会的其中一名运动员。她拿起一个球要花 $1$ 秒，拿着 $x$ 个球在道路上跑 $1$ 米要花 $x+1$ 秒。\n\n给出 JOI 大道，球，方案的信息。编写一个程序，对于每个方案判断理恵能不能完赛。", "inputFormat": "第一行包含两个整数 $N,L$。\n\n第二行包含用空格分隔的 $N$ 个整数 $X_1, X_2, \\ldots ,X_N$。\n\n第三行包含一个整数 $Q$。\n\n接下来 $Q$ 行，每行包含三个整数 $S_j, G_j, T_j$，表示第 $j$ 个方案。", "outputFormat": "输出 $Q$ 行。第 $j\\ (1 \\leq j \\leq Q)$ 行，如果第 $j$ 个方案理恵能完赛输出 Yes，否则输出 No。", "hint": "对于所有输入数据，满足：\n\n- $1 \\leq N \\leq 5\\times 10^5$\n- $1 \\leq L \\leq 5\\times 10^5$\n- $0 \\leq X_{i} \\leq L\\ (1 \\leq i \\leq N)$\n- $1 \\leq Q \\leq 5\\times 10^5$\n- $0 \\leq S_{j} \\leq L\\ (1 \\leq j \\leq Q)$\n- $0 \\leq G_{j} \\leq L\\ (1 \\leq j \\leq Q)$\n- $1 \\leq T_{j} \\leq 5\\times 10^5\\ (1 \\leq j \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$N \\leq 7, Q \\leq 10, S_{j}=0, G_{j}=0\\ (1 \\leq j \\leq Q)$|\t7\n|2|\t$N \\leq 7, Q \\leq 10$|\t7\n|3|\t$N \\leq 14, Q \\leq 10$|\t10\n|4|\t$N \\leq 100, Q \\leq 10$|\t28\n|5|\t$N \\leq 2000, Q \\leq 10$|\t10\n|6|\t$N \\leq 2000$|\t19\n|7|\t无附加限制\t|19", "locale": "zh-CN"}}}
{"pid": "P10208", "type": "P", "difficulty": 6, "samples": [["4\n3 8 5 7\n2 6 1 4\n3\n3 4\n1 3\n1 4", "Yes\nNo\nYes"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2024", "JOI（日本）"], "title": "[JOI 2024 Final] 礼物交换 / Gift Exchange", "background": "", "description": "JOI 学园有 $N$ 名学生，每个学生都有一个从 $1$ 到 $N$ 的编号。\n\nJOI 学园计划近期举办一个礼物交换会。每个学生都要准备一份礼物带到会场，学生 $i\\ (1 \\leq i \\leq N)$ 带来的礼物的价值是 $A_{i}$ 。学生们都不喜欢收到比自己带来的礼物价值低很多的礼物，具体来说，学生 $i$ 如果收到价值低于 $B_{i}$ 的礼物，就会感到不满。保证 $B_{i}<A_{i}$。\n\n不过，并不是所有 $N$ 名学生都会真的参加礼物交换会。JOI 学园的校长 K 正在考虑 $Q$ 种可能参加礼物交换会的学生组合，第 $j\\ (1 \\leq j \\leq Q)$ 种组合由 $R_{j}-L_{j}+1$ 名学生 $L_{j}, L_{j}+1, \\ldots, R_{j}$ 组成。\n\n对于一个由 $2$ 人以上的学生组成的组合，如果他们可以在组内互换礼物，而不会有人收到自己带来的礼物或者不满意的礼物，那么这个组合就是可行的。准确地说，由 $m$ 名 $(m \\geq 2)$ 学生 $p_{1}, p_{2}, \\ldots, p_{m}$ 组成的组合是可行的，当且仅当存在一个由 $p_{1}, p_{2}, \\ldots, p_{m}$ 重新排列得到的数列 $q_{1}, q_{2}, \\ldots, q_{m}$，这里 $q_{k}\\ (1 \\leq k \\leq m)$ 表示给学生 $p_{k}$ 送礼物的学生的编号，满足以下的条件：\n\n- 对于所有的 $k\\ (1 \\leq k \\leq m)$ ，$p_{k} \\neq q_{k}$。\n- 对于所有的 $k\\ (1 \\leq k \\leq m)$ ，$A_{q_{k}} \\geq B_{p_{k}}$。\n\n校长 K 想要让礼物交换会成功的，所以他想要知道这 $Q$ 个组合中，哪些是可行的。\n\n给定学生的信息和组合的信息，对于每个组合，判断它是否是可行的，并编写一个程序来输出结果。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个用空格分隔的整数 $A_1,A_2,\\ldots ,A_N$。\n\n第三行包含 $N$ 个用空格分隔的整数 $B_1,B_2,\\ldots ,B_N$。\n\n第四行包含一个整数 $Q$。\n\n接下来的 $Q$ 行，每行包含两个整数 $L_i,R_i$。", "outputFormat": "输出 $Q$ 行，第 $j\\ (1 \\leq j \\leq Q)$ 行如果第 $j$ 个组合是可行的输出 Yes，否则输出 No。", "hint": "**样例解释**\n\n第一个组合是由 2 名学生 3,4 组成的。如果学生 3 收到学生 4 的礼物，学生 4 收到学生 3 的礼物，那么由于 $A_{3} \\geq B_{4} 且 A_{4} \\geq B_{3}$ ，所以两个学生都不会不满。因此，这个组合是可行的，所以在第一行输出 Yes。\n\n第二个组合是由 3 名学生 1,2,3 组成的。由于 $A_{1}<B_{2}$ 且 $A_{3}<B_{2}$ ，所以学生 2 不管收到学生 1 还是学生 3 的礼物，都会感到不满。因此，这个组合不是可行的，所以在第二行输出 No。\n\n第三个组合是由 4 名学生 1,2,3,4 组成的。例如，如果学生 1 收到学生 2 的礼物，学生 2 收到学生 4 的礼物，学生 3 收到学生 1 的礼物，学生 4 收到学生 3 的礼物，那么没有人会不满。因此，这个组合是可行的，所以在第三行输出 Yes。\n\n这个样例满足子任务 1,2,4,7,8 的限制。\n\n**数据范围**\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\times 10^5$\n- $1 \\leq B_{i}<A_{i} \\leq 2N\\ (1 \\leq i \\leq N)$\n- $A_{1}, B_{1}, A_{2}, B_{2}, \\ldots, A_{N}, B_{N}$ 各不相同\n- $1 \\leq Q \\leq 2\\times 10^5$\n- $1 \\leq L_{j}<R_{j} \\leq N\\ (1 \\leq j \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$N \\leq 10, Q \\leq 10$|\t4\n|2|\t$N \\leq 18, Q \\leq 10$|\t5\n|3|\t$N \\leq 10^5, A_{1} \\geq 2 N-2, B_{1}=1, Q=1, L_{1}=1, R_{1}=N$|\t10\n|4|\t$N \\leq 10^5, Q \\leq 10$|\t31\n|5|\t$N \\leq 10^5, A_{i}<A_{i+1}, B_{i}<B_{i+1}\\ (1 \\leq i \\leq N-1)$|\t8\n|6|\t$N \\leq 10^5, A_{i}<A_{i+1}\\ (1 \\leq i \\leq N-1)$|\t12\n|7|\t$N \\leq 10^5$|\t18\n|8|\t无附加限制\t|12", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2024 Final] 礼物交换 / Gift Exchange", "background": "", "description": "JOI 学园有 $N$ 名学生，每个学生都有一个从 $1$ 到 $N$ 的编号。\n\nJOI 学园计划近期举办一个礼物交换会。每个学生都要准备一份礼物带到会场，学生 $i\\ (1 \\leq i \\leq N)$ 带来的礼物的价值是 $A_{i}$ 。学生们都不喜欢收到比自己带来的礼物价值低很多的礼物，具体来说，学生 $i$ 如果收到价值低于 $B_{i}$ 的礼物，就会感到不满。保证 $B_{i}<A_{i}$。\n\n不过，并不是所有 $N$ 名学生都会真的参加礼物交换会。JOI 学园的校长 K 正在考虑 $Q$ 种可能参加礼物交换会的学生组合，第 $j\\ (1 \\leq j \\leq Q)$ 种组合由 $R_{j}-L_{j}+1$ 名学生 $L_{j}, L_{j}+1, \\ldots, R_{j}$ 组成。\n\n对于一个由 $2$ 人以上的学生组成的组合，如果他们可以在组内互换礼物，而不会有人收到自己带来的礼物或者不满意的礼物，那么这个组合就是可行的。准确地说，由 $m$ 名 $(m \\geq 2)$ 学生 $p_{1}, p_{2}, \\ldots, p_{m}$ 组成的组合是可行的，当且仅当存在一个由 $p_{1}, p_{2}, \\ldots, p_{m}$ 重新排列得到的数列 $q_{1}, q_{2}, \\ldots, q_{m}$，这里 $q_{k}\\ (1 \\leq k \\leq m)$ 表示给学生 $p_{k}$ 送礼物的学生的编号，满足以下的条件：\n\n- 对于所有的 $k\\ (1 \\leq k \\leq m)$ ，$p_{k} \\neq q_{k}$。\n- 对于所有的 $k\\ (1 \\leq k \\leq m)$ ，$A_{q_{k}} \\geq B_{p_{k}}$。\n\n校长 K 想要让礼物交换会成功的，所以他想要知道这 $Q$ 个组合中，哪些是可行的。\n\n给定学生的信息和组合的信息，对于每个组合，判断它是否是可行的，并编写一个程序来输出结果。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个用空格分隔的整数 $A_1,A_2,\\ldots ,A_N$。\n\n第三行包含 $N$ 个用空格分隔的整数 $B_1,B_2,\\ldots ,B_N$。\n\n第四行包含一个整数 $Q$。\n\n接下来的 $Q$ 行，每行包含两个整数 $L_i,R_i$。", "outputFormat": "输出 $Q$ 行，第 $j\\ (1 \\leq j \\leq Q)$ 行如果第 $j$ 个组合是可行的输出 Yes，否则输出 No。", "hint": "**样例解释**\n\n第一个组合是由 2 名学生 3,4 组成的。如果学生 3 收到学生 4 的礼物，学生 4 收到学生 3 的礼物，那么由于 $A_{3} \\geq B_{4} 且 A_{4} \\geq B_{3}$ ，所以两个学生都不会不满。因此，这个组合是可行的，所以在第一行输出 Yes。\n\n第二个组合是由 3 名学生 1,2,3 组成的。由于 $A_{1}<B_{2}$ 且 $A_{3}<B_{2}$ ，所以学生 2 不管收到学生 1 还是学生 3 的礼物，都会感到不满。因此，这个组合不是可行的，所以在第二行输出 No。\n\n第三个组合是由 4 名学生 1,2,3,4 组成的。例如，如果学生 1 收到学生 2 的礼物，学生 2 收到学生 4 的礼物，学生 3 收到学生 1 的礼物，学生 4 收到学生 3 的礼物，那么没有人会不满。因此，这个组合是可行的，所以在第三行输出 Yes。\n\n这个样例满足子任务 1,2,4,7,8 的限制。\n\n**数据范围**\n\n对于所有输入数据，满足：\n\n- $2 \\leq N \\leq 5\\times 10^5$\n- $1 \\leq B_{i}<A_{i} \\leq 2N\\ (1 \\leq i \\leq N)$\n- $A_{1}, B_{1}, A_{2}, B_{2}, \\ldots, A_{N}, B_{N}$ 各不相同\n- $1 \\leq Q \\leq 2\\times 10^5$\n- $1 \\leq L_{j}<R_{j} \\leq N\\ (1 \\leq j \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|1|\t$N \\leq 10, Q \\leq 10$|\t4\n|2|\t$N \\leq 18, Q \\leq 10$|\t5\n|3|\t$N \\leq 10^5, A_{1} \\geq 2 N-2, B_{1}=1, Q=1, L_{1}=1, R_{1}=N$|\t10\n|4|\t$N \\leq 10^5, Q \\leq 10$|\t31\n|5|\t$N \\leq 10^5, A_{i}<A_{i+1}, B_{i}<B_{i+1}\\ (1 \\leq i \\leq N-1)$|\t8\n|6|\t$N \\leq 10^5, A_{i}<A_{i+1}\\ (1 \\leq i \\leq N-1)$|\t12\n|7|\t$N \\leq 10^5$|\t18\n|8|\t无附加限制\t|12", "locale": "zh-CN"}}}
{"pid": "P10209", "type": "P", "difficulty": 7, "samples": [["4 3 4\n00\n00\n00\n00\n100\n001\n000\n1 1 1 1\n2\n1 1\n3 3\n2\n3 1\n1 2\n2\n2 3\n3 3\n2\n4 2\n3 2", "1\n3\n0\n-1"], ["4 4 4\n100\n110\n011\n010\n0010\n1001\n0101\n1 1 1 1\n2\n1 2\n3 1\n2\n1 4\n4 1\n2\n3 2\n1 2\n2\n4 3\n1 1", "1\n3\n2\n2"], ["7 3 3\n10\n00\n00\n10\n00\n01\n00\n110\n101\n011\n001\n110\n100\n1 1 1 1 1 1 1\n3\n7 2\n3 1\n3 2\n3\n3 1\n6 3\n2 3\n7\n2 2\n1 3\n7 3\n5 2\n1 2\n7 2\n3 1", "3\n2\n4"], ["4 3 3\n00\n00\n10\n00\n110\n011\n001\n1 2 2 2\n2\n1 1\n3 1\n2\n4 3\n2 1\n2\n4 1\n1 3", "1\n2\n5"], ["7 3 2\n01\n00\n00\n00\n00\n10\n01\n100\n110\n011\n001\n101\n001\n1 1 2 1 1 2 2\n3\n7 2\n1 3\n5 1\n5\n1 1\n2 2\n3 1\n2 3\n4 2", "4\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "倍增", "2024", "JOI（日本）"], "title": "[JOI 2024 Final] 路网服务 2 / Road Service 2", "background": "", "description": "JOI 市有一个由 $H$ 条东西向的无限长道路和 $W$ 条南北向的道路组成的网格状道路网。从北边数第 $i\\ (1 \\leq i \\leq H)$ 条的东西向的道路和从西边数第 $j\\ (1 \\leq j \\leq W)$ 条的南北向的道路相交的地方称作交叉点 $(i, j)$。\n\n现在，由于道路年久失修，一部分道路被封锁了。具体的封锁情况如下：\n\n- 如果 $A_{i, j}=0\\ (1 \\leq i \\leq H,1 \\leq j \\leq W-1)$，则从北边数第 $i$ 条的东西向的道路的，交叉点 $(i, j)$ 和交叉点 $(i, j+1)$ 之间的部分就是封锁的；如果 $A_{i, j}=1$ 则是可以通行的。\n- 如果 $B_{i, j}=0\\ (1 \\leq j \\leq W,1 \\leq i \\leq H-1)$ 从西边数第 $j$ 条的南北向的道路的，交叉点 $(i, j)$ 和交叉点 $(i+1, j)$ 之间的部分就是封锁的；如果 $B_{i, j}=1$ 就是可以通行的。\n- 道路的其他部分，即 $H \\times W$ 个交叉点外面的部分都是封锁的。\n\nJOI 市的市长 K 理事长决定制定一个道路维修计划。维修计划由大于等于 $0$ 次维修构成。一次维修时选择一个满足的整数 $i\\ (1 \\leq i \\leq H)$，然后进行以下的操作：\n\n\n对于**所有**满足 $1 \\leq j \\leq W-1$ 的整数 $j$，如果从北边数第 $i$ 条的东西向的道路的，交叉点 $(i, j)$ 和交叉点 $(i, j+1)$ 之间的部分是封锁的话，将其变成可以通行的。这个过程总共需要 $C_{i}$ 天。其中，$C_{i}$ 为 $1$ 或 $2$。\n\n维修计划里包含的多次维修不能同时进行。因此，维修计划的执行所需要的天数是维修计划里包含的所有维修所需要的天数的总和。\n\n为了让市里的重要设施之间能够互相通行，K 理事长向你提出了 $Q$ 个问题。第 $k\\ (1 \\leq k \\leq Q)$ 个问题是这样的：\n\n是否存在一个维修计划，能够让 $T_{k}$ 个交叉点 $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots ,(X_{k, T_{k}}, Y_{k, T_{k}})$ 之间，只通过可以通行的道路互相通行。如果存在的话，执行这样的维修计划最少需要多少天。\n\n给定道路网的封锁情况，各条道路的维修所需要的天数，K 理事长的问题的内容，编写一个程序来回答 K 理事长的所有问题。", "inputFormat": "第一行包含三个整数 $H,W,Q$。\n\n接下来 $H$ 行，每行包含一个长度为 $W-1$ 的字符串，表示 $A_{i,1},A_{i,2},\\ldots ,A_{i,W-1}$。\n\n接下来 $H-1$ 行，每行包含一个长度为 $W$ 的字符串，表示 $B_{i,1},B_{i,2},\\ldots ,B_{i,W}$。\n\n接下来一行包含 $H$ 个用空格分隔的整数 $C_1,C_2,\\ldots ,C_H$。\n\n接下来有 $Q$ 个询问，每个询问用以下形式给出：\n\n第一行包含一个整数 $T_k$。  \n接下来 $T_k$ 行每行包含两个整数 $X_{k,i},Y_{k,i}$。", "outputFormat": "输出 $Q$ 行，第 $k$ 行 $(1 \\leq k \\leq Q)$ 里，如果存在一个维修计划，能够让 $T_{k}$ 个交叉点 $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots ,(X_{k, T_{k}}, Y_{k, T_{k}})$ 之间互相通行，就输出执行这样的维修计划最少需要多少天。否则输出 $-1$。", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq H$\n- $2 \\leq W$\n- $H \\times W \\leq 10^6$\n- $1 \\leq Q \\leq 10^5$\n- $A_{i, j}$ 为 $0$ 或 $1\\ (1 \\leq i \\leq H, 1 \\leq j \\leq W-1)$\n- $B_{i, j}$ 为 $0$ 或 $1\\ (1 \\leq i \\leq H-1,1 \\leq j \\leq W)$\n- $C_{i}$ 为 $1$ 或 $2\\ (1 \\leq i \\leq H)$\n- $2 \\leq T_{k}\\ (1 \\leq k \\leq Q)$\n- $T_{1}+T_{2}+\\cdots+T_{Q} \\leq 2\\times 10^5$\n- $1 \\leq X_{k, l} \\leq H\\ (1 \\leq k \\leq Q, 1 \\leq l \\leq T_{k})$\n- $1 \\leq Y_{k, l} \\leq W\\ (1 \\leq k \\leq Q, 1 \\leq l \\leq T_{k})$\n- $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots,(X_{k, T_{k}}, Y_{k, T_{k}})$ 各不相同 $(1 \\leq k \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n| :-: | :-: | :-:|\n|1|\t$C_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5, T_{k}=2\\ (1 \\leq k \\leq Q), A_{i, j}=0\\ (1 \\leq i \\leq H, 1 \\leq j \\leq W-1)$|\t$10$|\n|2|$\tC_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5, T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$6$\n|3|\t$C_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5$|\t$15$|\n|4|\t$C_{i}=1\\ (1 \\leq i \\leq H), T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$11$|\n|5|\t$C_{i}=1\\ (1 \\leq i \\leq H)$|\t$6$|\n|6|\t$Q \\leq 5$|\t$12$|\n|7|\t$T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$26$|\n|8|\t无附加限制\t|$14$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI 2024 Final] 路网服务 2 / Road Service 2", "background": "", "description": "JOI 市有一个由 $H$ 条东西向的无限长道路和 $W$ 条南北向的道路组成的网格状道路网。从北边数第 $i\\ (1 \\leq i \\leq H)$ 条的东西向的道路和从西边数第 $j\\ (1 \\leq j \\leq W)$ 条的南北向的道路相交的地方称作交叉点 $(i, j)$。\n\n现在，由于道路年久失修，一部分道路被封锁了。具体的封锁情况如下：\n\n- 如果 $A_{i, j}=0\\ (1 \\leq i \\leq H,1 \\leq j \\leq W-1)$，则从北边数第 $i$ 条的东西向的道路的，交叉点 $(i, j)$ 和交叉点 $(i, j+1)$ 之间的部分就是封锁的；如果 $A_{i, j}=1$ 则是可以通行的。\n- 如果 $B_{i, j}=0\\ (1 \\leq j \\leq W,1 \\leq i \\leq H-1)$ 从西边数第 $j$ 条的南北向的道路的，交叉点 $(i, j)$ 和交叉点 $(i+1, j)$ 之间的部分就是封锁的；如果 $B_{i, j}=1$ 就是可以通行的。\n- 道路的其他部分，即 $H \\times W$ 个交叉点外面的部分都是封锁的。\n\nJOI 市的市长 K 理事长决定制定一个道路维修计划。维修计划由大于等于 $0$ 次维修构成。一次维修时选择一个满足的整数 $i\\ (1 \\leq i \\leq H)$，然后进行以下的操作：\n\n\n对于**所有**满足 $1 \\leq j \\leq W-1$ 的整数 $j$，如果从北边数第 $i$ 条的东西向的道路的，交叉点 $(i, j)$ 和交叉点 $(i, j+1)$ 之间的部分是封锁的话，将其变成可以通行的。这个过程总共需要 $C_{i}$ 天。其中，$C_{i}$ 为 $1$ 或 $2$。\n\n维修计划里包含的多次维修不能同时进行。因此，维修计划的执行所需要的天数是维修计划里包含的所有维修所需要的天数的总和。\n\n为了让市里的重要设施之间能够互相通行，K 理事长向你提出了 $Q$ 个问题。第 $k\\ (1 \\leq k \\leq Q)$ 个问题是这样的：\n\n是否存在一个维修计划，能够让 $T_{k}$ 个交叉点 $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots ,(X_{k, T_{k}}, Y_{k, T_{k}})$ 之间，只通过可以通行的道路互相通行。如果存在的话，执行这样的维修计划最少需要多少天。\n\n给定道路网的封锁情况，各条道路的维修所需要的天数，K 理事长的问题的内容，编写一个程序来回答 K 理事长的所有问题。", "inputFormat": "第一行包含三个整数 $H,W,Q$。\n\n接下来 $H$ 行，每行包含一个长度为 $W-1$ 的字符串，表示 $A_{i,1},A_{i,2},\\ldots ,A_{i,W-1}$。\n\n接下来 $H-1$ 行，每行包含一个长度为 $W$ 的字符串，表示 $B_{i,1},B_{i,2},\\ldots ,B_{i,W}$。\n\n接下来一行包含 $H$ 个用空格分隔的整数 $C_1,C_2,\\ldots ,C_H$。\n\n接下来有 $Q$ 个询问，每个询问用以下形式给出：\n\n第一行包含一个整数 $T_k$。  \n接下来 $T_k$ 行每行包含两个整数 $X_{k,i},Y_{k,i}$。", "outputFormat": "输出 $Q$ 行，第 $k$ 行 $(1 \\leq k \\leq Q)$ 里，如果存在一个维修计划，能够让 $T_{k}$ 个交叉点 $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots ,(X_{k, T_{k}}, Y_{k, T_{k}})$ 之间互相通行，就输出执行这样的维修计划最少需要多少天。否则输出 $-1$。", "hint": "对于所有输入数据，满足：\n\n- $2 \\leq H$\n- $2 \\leq W$\n- $H \\times W \\leq 10^6$\n- $1 \\leq Q \\leq 10^5$\n- $A_{i, j}$ 为 $0$ 或 $1\\ (1 \\leq i \\leq H, 1 \\leq j \\leq W-1)$\n- $B_{i, j}$ 为 $0$ 或 $1\\ (1 \\leq i \\leq H-1,1 \\leq j \\leq W)$\n- $C_{i}$ 为 $1$ 或 $2\\ (1 \\leq i \\leq H)$\n- $2 \\leq T_{k}\\ (1 \\leq k \\leq Q)$\n- $T_{1}+T_{2}+\\cdots+T_{Q} \\leq 2\\times 10^5$\n- $1 \\leq X_{k, l} \\leq H\\ (1 \\leq k \\leq Q, 1 \\leq l \\leq T_{k})$\n- $1 \\leq Y_{k, l} \\leq W\\ (1 \\leq k \\leq Q, 1 \\leq l \\leq T_{k})$\n- $(X_{k, 1}, Y_{k, 1}),(X_{k, 2}, Y_{k, 2}), \\ldots,(X_{k, T_{k}}, Y_{k, T_{k}})$ 各不相同 $(1 \\leq k \\leq Q)$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务|\t附加限制|\t分值|\n| :-: | :-: | :-:|\n|1|\t$C_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5, T_{k}=2\\ (1 \\leq k \\leq Q), A_{i, j}=0\\ (1 \\leq i \\leq H, 1 \\leq j \\leq W-1)$|\t$10$|\n|2|$\tC_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5, T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$6$\n|3|\t$C_{i}=1\\ (1 \\leq i \\leq H), Q \\leq 5$|\t$15$|\n|4|\t$C_{i}=1\\ (1 \\leq i \\leq H), T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$11$|\n|5|\t$C_{i}=1\\ (1 \\leq i \\leq H)$|\t$6$|\n|6|\t$Q \\leq 5$|\t$12$|\n|7|\t$T_{k}=2\\ (1 \\leq k \\leq Q)$|\t$26$|\n|8|\t无附加限制\t|$14$|", "locale": "zh-CN"}}}
{"pid": "P10210", "type": "P", "difficulty": 6, "samples": [["4\n1 3 2 4\n", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CTSC/CTS"], "title": "[CTS2024] 水镜", "background": "", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nA 城是一座多雨的城市，山溪泉水众多。出于对水的喜爱，市民们在城市中央修建了一座大喷泉。\n\n喷泉的水池中有一排 $n$ 个石柱，从左到右编号为 $1, 2, \\cdots , n$，第 $i$ 个石柱的高度为 $h_i$。水池中有储水，水位 $L$ 为一个**正实数**。第 $i$ 个石柱会产生一个高度为 $h'_i = 2L - h_i$ 的像。若石柱在水面上方，像在水面下方；若石柱在水面下方，像在水面上方；若石柱顶端与水面重合，则像也与水面重合。\n\n传说水中栖息着泉水精灵，每到满月之夜，它们就会在石柱上起舞，行动规则如下：\n\n- 泉水精灵只能栖息在石柱顶端，或者石柱的像的顶端。即如果泉水精灵在石柱 $u$ 上，它的高度 $r_u$ 便只有 $h_u, h'_u$ 两种可能取值。\n- 泉水精灵每次只能前往右侧相邻的石柱（或石柱的像）。\n- 在移动过程中，泉水精灵的高度必须**严格单调递增**。\n\n泉水精灵会选择一个石柱（或石柱的像）为起点，进行若干次移动后停止。这样的过程称为一次**舞蹈**。\n\nA 城的雨季漫长，由于不规律的降雨，喷泉的水位可能会多次变化，舞蹈路径的可能性也随之改变。作为远道而来的旅人，你很想知道有多少种舞蹈是可能实现的。具体地，你需要计算有多少对 $(u, v)$（$1 ≤ u < v ≤ n$），满足存在一种水位 $L$，使得泉水精灵在一次舞蹈中，能从第 $u$ 个石柱（或它的像）出发，到达第 $v$ 个石柱（或它的像）。\n\n**形式化的**：给定一个长度为 $n$ 的正整数序列 $h_1, h_2,\\cdots , h_n$，求满足以下所有条件的\n二元组 $(u, v)$ 的数量：\n- $1 \\le u < v \\le n$，且 $u, v$ 为整数；\n- 存在一个**正实数** $L$ 以及一个长度为 $(v - u + 1)$ 的序列 $r_u, r_{u+1},\\cdots , r_v$ 满足以下\n所有条件：\n- $\\forall u \\le i \\le v$，记 $h'_i = 2L - h_i$，则 $r_i \\in \\{h_i,h'_i\\}$，特别地，当 $h_i = h'_i$ 时，$r_i = h_i$；\n- $\\forall u \\le i < v, r_i < r_{i+1}$。\n", "inputFormat": "输入的第一行包含一个正整数 $n$，表示石柱的个数。\n\n输入的第二行包含 $n$ 个正整数 $h_1, h_2, \\cdots , h_n$，表示石柱的高度。", "outputFormat": "输出一行一个整数，表示符合题目描述的 $(u, v)$ 对数。", "hint": "\n**样例 1 解释**\n\n所有 $\\binom{4}{2}=6$ 种 $(u, v)$ 都是可行的。\n对于 $u = 1, v = 4$，可以选择 $L = 2.5$，则序列 $h'$\n 为 $\\{4, 2, 3, 1\\}$，取序列 $r$ 为 $\\{1, 2, 3, 4\\}$\n可以满足所有条件。\n\n### 数据范围\n\n对于所有测试点，$2\\leq n\\leq 5\\times 10 ^ 5$，$1\\leq h_i\\leq 10 ^ {12}$。\n\n| 子任务编号 | $n\\leq$ | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $7$ |\n| $2$ | $100$ | $10$ |\n| $3$ | $4000$ | $18$ |\n| $4$ | $10 ^ 5$ | $30$ |\n| $5$ | $5\\times 10^ 5$ | $35$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 水镜", "background": "", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nA 城是一座多雨的城市，山溪泉水众多。出于对水的喜爱，市民们在城市中央修建了一座大喷泉。\n\n喷泉的水池中有一排 $n$ 个石柱，从左到右编号为 $1, 2, \\cdots , n$，第 $i$ 个石柱的高度为 $h_i$。水池中有储水，水位 $L$ 为一个**正实数**。第 $i$ 个石柱会产生一个高度为 $h'_i = 2L - h_i$ 的像。若石柱在水面上方，像在水面下方；若石柱在水面下方，像在水面上方；若石柱顶端与水面重合，则像也与水面重合。\n\n传说水中栖息着泉水精灵，每到满月之夜，它们就会在石柱上起舞，行动规则如下：\n\n- 泉水精灵只能栖息在石柱顶端，或者石柱的像的顶端。即如果泉水精灵在石柱 $u$ 上，它的高度 $r_u$ 便只有 $h_u, h'_u$ 两种可能取值。\n- 泉水精灵每次只能前往右侧相邻的石柱（或石柱的像）。\n- 在移动过程中，泉水精灵的高度必须**严格单调递增**。\n\n泉水精灵会选择一个石柱（或石柱的像）为起点，进行若干次移动后停止。这样的过程称为一次**舞蹈**。\n\nA 城的雨季漫长，由于不规律的降雨，喷泉的水位可能会多次变化，舞蹈路径的可能性也随之改变。作为远道而来的旅人，你很想知道有多少种舞蹈是可能实现的。具体地，你需要计算有多少对 $(u, v)$（$1 ≤ u < v ≤ n$），满足存在一种水位 $L$，使得泉水精灵在一次舞蹈中，能从第 $u$ 个石柱（或它的像）出发，到达第 $v$ 个石柱（或它的像）。\n\n**形式化的**：给定一个长度为 $n$ 的正整数序列 $h_1, h_2,\\cdots , h_n$，求满足以下所有条件的\n二元组 $(u, v)$ 的数量：\n- $1 \\le u < v \\le n$，且 $u, v$ 为整数；\n- 存在一个**正实数** $L$ 以及一个长度为 $(v - u + 1)$ 的序列 $r_u, r_{u+1},\\cdots , r_v$ 满足以下\n所有条件：\n- $\\forall u \\le i \\le v$，记 $h'_i = 2L - h_i$，则 $r_i \\in \\{h_i,h'_i\\}$，特别地，当 $h_i = h'_i$ 时，$r_i = h_i$；\n- $\\forall u \\le i < v, r_i < r_{i+1}$。\n", "inputFormat": "输入的第一行包含一个正整数 $n$，表示石柱的个数。\n\n输入的第二行包含 $n$ 个正整数 $h_1, h_2, \\cdots , h_n$，表示石柱的高度。", "outputFormat": "输出一行一个整数，表示符合题目描述的 $(u, v)$ 对数。", "hint": "\n**样例 1 解释**\n\n所有 $\\binom{4}{2}=6$ 种 $(u, v)$ 都是可行的。\n对于 $u = 1, v = 4$，可以选择 $L = 2.5$，则序列 $h'$\n 为 $\\{4, 2, 3, 1\\}$，取序列 $r$ 为 $\\{1, 2, 3, 4\\}$\n可以满足所有条件。\n\n### 数据范围\n\n对于所有测试点，$2\\leq n\\leq 5\\times 10 ^ 5$，$1\\leq h_i\\leq 10 ^ {12}$。\n\n| 子任务编号 | $n\\leq$ | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $7$ |\n| $2$ | $100$ | $10$ |\n| $3$ | $4000$ | $18$ |\n| $4$ | $10 ^ 5$ | $30$ |\n| $5$ | $5\\times 10^ 5$ | $35$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P10211", "type": "P", "difficulty": 7, "samples": [["2 1\n1\n0 2\n", "5\n"], ["2 1\n1 \n1 2\n", "5\n"], ["5 2\n2 1 4 3\n1 3\n2 5\n", "193\n"], ["10 10\n5 2 1 3 4 7 6 8 9\n0 1\n0 2\n0 3\n0 4\n0 5\n0 6\n0 7\n0 8\n0 9\n0 10\n", "70848\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "CTSC/CTS"], "title": "[CTS2024] 线段树", "background": "", "description": "小 Y 最近学会了如何用线段树维护序列，并支持区间求和的操作。\n\n**以下给出本题中线段树的定义。 该定义可能和你熟知的线段树有区别。**\n\n- 线段树是一种有根的二叉树，其每个节点对应了序列上的一个区间 $[l, r)$，其中根节点对应 $[0, n)$。\n- 对于每个节点，若其代表的序列区间 $[l, r)$ 满足 $r - l = 1$，则其为叶节点；否则存在整数 $m(l < m < r)$，满足其左儿子代表区间 $[l, m)$，右儿子代表区间 $[m, r)$。\n- 线段树的形态取决于每个非叶结点的划分点 $m$ 的选择。\n- 在区间求和的问题上，对于序列 $a_0, a_1, \\dots , a_{n-1}$，线段树的每个结点 $[l, r)$ 维护了\n$(a_l + a_{l+1} + \\cdots + a_{r-1})$ 的值。\n\n小 J 有一个长度为 $N$ 的数组 $A_0, A_1, \\dots , A_{N-1}$，他并不知道 $A$ 中的任何一个数，但是他有一棵线段树维护了 $A$ 的区间和。线段树由 $X_1, X_2, \\dots , X_{N-1}$ 给出，其中 $X_i$ 是线段树先序遍历的第 $i$ 个非叶结点的划分点。\n\n例如，如果 $N = 5, X = [2, 1, 4, 3]$，则线段树包含的结点的先序遍历为 $[0, 5), [0, 2), [0, 1), [1, 2), [2, 5), [2, 4), [2, 3), [3, 4), [4, 5)$。\n\n小 J 有 $M$ 个区间 $[L_1, R_1), [L_2, R_2), \\dots , [L_M, R_M)$，他想知道，在所有 $2^{2N-1}$ 个线段树结点的子集中，有多少个子集 $S$ 满足以下条件：\n\n- 如果已知 $S$ 中所有结点维护的值，则每个 $[L_i\n, R_i)$ 区间的和都能被唯一确定。\n\n例如，如果已知 $[0, 1), [1, 2)$，就能确定 $[0, 2)$ 的和；反过来，如果已知 $[0, 1), [0, 2)$，也能确定 $[1, 2)$ 的和。但如果仅已知 $[0, 2), [2, 4)$ 则不能确定 $[0, 3)$ 或 $[1, 2)$ 的和。\n\n由于答案很大，你需要输出答案对 $998244353$ 取模后的值。\n", "inputFormat": "输入的第一行包含两个整数 $N, M$，分别表示数组长度和区间个数。\n\n输入的第二行包含 $N - 1$ 个整数 $X_1, X_2, \\dots , X_{N-1}$。\n\n接下来 $M$ 行，每行包含两个整数 $L_i, R_i$，表示一个区间。\n", "outputFormat": "输出一行一个整数表示答案对 $998244353$ 取模后的值。\n", "hint": "**样例 1 解释**\n\n只有当直接知道 $[0, 2)$ 的总和或同时知道 $[0, 1)$ 和 $[1, 2)$ 的总和时才能知道 $[0, 2)$ 的总和，因此总的方案数为 $2^2 + 1 = 5$。\n\n### 数据范围\n\n对于所有测试数据：\n- $2 \\le N \\le 2 \\times 10^5$，\n- $1 \\le M \\le \\min \\{\\frac{N(N+1)}{2}, 2 \\times 10^5\\}$，\n- $\\forall 1 \\le i \\le N - 1, 1 \\le X_i \\le N - 1$，\n- 保证 $X_i$ 正确描述了一棵线段树，\n- $\\forall 1 \\le i \\le M, 0 \\le L_i < R_i \\le N$，\n- $\\forall i \\ne j,(L_i, R_i) \\ne (L_j, R_j )$。\n\n子任务 1（6 分）：$N≤10$。\n\n子任务 2（18 分）：$N≤100$。\n\n子任务 3（9 分）：$N≤500$。\n\n子任务 4（17 分）：$N≤5000$。\n\n子任务 5（10 分）：$M=1$。\n\n子任务 6（13 分）：$M≤5$。\n\n子任务 7（7 分）：$M=N,L_i=0,R_i=i$。\n\n子任务 8（20 分）：无额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 线段树", "background": "", "description": "小 Y 最近学会了如何用线段树维护序列，并支持区间求和的操作。\n\n**以下给出本题中线段树的定义。 该定义可能和你熟知的线段树有区别。**\n\n- 线段树是一种有根的二叉树，其每个节点对应了序列上的一个区间 $[l, r)$，其中根节点对应 $[0, n)$。\n- 对于每个节点，若其代表的序列区间 $[l, r)$ 满足 $r - l = 1$，则其为叶节点；否则存在整数 $m(l < m < r)$，满足其左儿子代表区间 $[l, m)$，右儿子代表区间 $[m, r)$。\n- 线段树的形态取决于每个非叶结点的划分点 $m$ 的选择。\n- 在区间求和的问题上，对于序列 $a_0, a_1, \\dots , a_{n-1}$，线段树的每个结点 $[l, r)$ 维护了\n$(a_l + a_{l+1} + \\cdots + a_{r-1})$ 的值。\n\n小 J 有一个长度为 $N$ 的数组 $A_0, A_1, \\dots , A_{N-1}$，他并不知道 $A$ 中的任何一个数，但是他有一棵线段树维护了 $A$ 的区间和。线段树由 $X_1, X_2, \\dots , X_{N-1}$ 给出，其中 $X_i$ 是线段树先序遍历的第 $i$ 个非叶结点的划分点。\n\n例如，如果 $N = 5, X = [2, 1, 4, 3]$，则线段树包含的结点的先序遍历为 $[0, 5), [0, 2), [0, 1), [1, 2), [2, 5), [2, 4), [2, 3), [3, 4), [4, 5)$。\n\n小 J 有 $M$ 个区间 $[L_1, R_1), [L_2, R_2), \\dots , [L_M, R_M)$，他想知道，在所有 $2^{2N-1}$ 个线段树结点的子集中，有多少个子集 $S$ 满足以下条件：\n\n- 如果已知 $S$ 中所有结点维护的值，则每个 $[L_i\n, R_i)$ 区间的和都能被唯一确定。\n\n例如，如果已知 $[0, 1), [1, 2)$，就能确定 $[0, 2)$ 的和；反过来，如果已知 $[0, 1), [0, 2)$，也能确定 $[1, 2)$ 的和。但如果仅已知 $[0, 2), [2, 4)$ 则不能确定 $[0, 3)$ 或 $[1, 2)$ 的和。\n\n由于答案很大，你需要输出答案对 $998244353$ 取模后的值。\n", "inputFormat": "输入的第一行包含两个整数 $N, M$，分别表示数组长度和区间个数。\n\n输入的第二行包含 $N - 1$ 个整数 $X_1, X_2, \\dots , X_{N-1}$。\n\n接下来 $M$ 行，每行包含两个整数 $L_i, R_i$，表示一个区间。\n", "outputFormat": "输出一行一个整数表示答案对 $998244353$ 取模后的值。\n", "hint": "**样例 1 解释**\n\n只有当直接知道 $[0, 2)$ 的总和或同时知道 $[0, 1)$ 和 $[1, 2)$ 的总和时才能知道 $[0, 2)$ 的总和，因此总的方案数为 $2^2 + 1 = 5$。\n\n### 数据范围\n\n对于所有测试数据：\n- $2 \\le N \\le 2 \\times 10^5$，\n- $1 \\le M \\le \\min \\{\\frac{N(N+1)}{2}, 2 \\times 10^5\\}$，\n- $\\forall 1 \\le i \\le N - 1, 1 \\le X_i \\le N - 1$，\n- 保证 $X_i$ 正确描述了一棵线段树，\n- $\\forall 1 \\le i \\le M, 0 \\le L_i < R_i \\le N$，\n- $\\forall i \\ne j,(L_i, R_i) \\ne (L_j, R_j )$。\n\n子任务 1（6 分）：$N≤10$。\n\n子任务 2（18 分）：$N≤100$。\n\n子任务 3（9 分）：$N≤500$。\n\n子任务 4（17 分）：$N≤5000$。\n\n子任务 5（10 分）：$M=1$。\n\n子任务 6（13 分）：$M≤5$。\n\n子任务 7（7 分）：$M=N,L_i=0,R_i=i$。\n\n子任务 8（20 分）：无额外限制。", "locale": "zh-CN"}}}
{"pid": "P10212", "type": "P", "difficulty": 7, "samples": [["3\n3 1 3\n1 2\n2 3\n4 3 4\n1 2\n2 3\n2 4\n5 1 2\n1 2\n1 3\n2 4\n3 5\n", "1 2 3\n3 2 1 4\n1 5 3 4 2"], ["见题目目录下的 2.in 与 2.ans。", ""]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "CTSC/CTS"], "title": "[CTS2024] 众生之门", "background": "[原题面存档。](https://www.luogu.com.cn/paste/pd4a89g5)", "description": "给定 $n$、一棵 $n$ 个点的无向树和树上的两个不相同的节点 $s,t$，其中每条边的长度均为 $1$。节点由 $1$ 至 $n$ 的整数编号。记 $\\mathrm{dist}(u,v)$ 表示 $u$ 和 $v$ 的距离（即简单路径经过的边数）。你需要给出一个 $1$ 到 $n$ 的排列 $p_1,p_2,\\cdots,p_n$ 满足以下两个条件：\n\n- $p_1=s$，$p_n=t$；\n- 设 $d_i=\\mathrm{dist}(p_i,p_{i+1})(1\\leq i\\leq n-1)$，那么你给出的排列需要满足以上条件的前提下，最小化 $\\oplus_{i = 1} ^ {n - 1}d_i$，其中 $\\oplus$ 表示按位异或。\n\n如果有多种满足条件的排列，输出任意一种均可。", "inputFormat": "从标准输入读入数据。\n\n本题有多组测试数据。第一行输入一个正整数 $T$ 表示测试数据组数。\n\n对于每组数据，第一行输入三个正整数 $n,s,t$，接下来 $n-1$ 行每行两个正整数 $u,v$，表示地点 $u$ 和 $v$ 有直接无向道路连接（即树上的一条边）。", "outputFormat": "输出到标准输出。\n\n对于每组数据，输出一行 $n$ 个正整数 $p_1,p_2,\\cdots,p_n$，你需要保证其为 $1$ 到 $n$ 的一个排列且 $p_1=s$，$p_n=t$，且 $\\oplus_{i = 1} ^ {n - 1} d_i$ 最小。", "hint": "**样例 1 解释**\n\n该样例共有三组测试数据。\n\n- 对于第一组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $0$，样例输出为 $1,2,3$，其中 $d_1=d_2=1$。\n- 对于第二组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $2$，样例输出为 $3,2,1,4$，其中 $d_1=d_2=1$，$d_3=2$；另一种合法输出为 $3,1,2,4$。\n- 对于第三组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $1$，样例输出为 $1,5,3,4,2$，其中 $d_1=2$，$d_2=1$，$d_3=3$，$d_4=1$。\n\n**样例 2 解释**\n\n值得注意的是，该输入数据由所有满足 $n\\leq 10$ 的，且所有不同 $s$ 和 $t$ 的相对位置的可能的树形态构成。\n\n这个样例，无疑是善良的出题人无私的馈赠。中间忘了。出题人相信，这个美妙的样例，可以给拼搏于 AC 这道题的逐梦之路上的你，提供一个有力的援助。\n\n### 数据范围\n\n设 $\\sum n$ 表示单个测试点内所有数据的 $n$ 的和。对于所有测试数据，\n\n- $T≥1$；\n- $2\\leq n\\leq 5\\times 10 ^4$，$\\sum n\\leq 5\\times 10 ^ 5$；\n- $1\\leq s,t\\leq n$，$s\\neq t$；\n- $1\\le u,v\\le n$，$u\\neq v$；\n- 输入的 $n-1$ 个 $(u,v)$ 构成一棵树。\n\n| 子任务编号 | $n$                   | $\\sum n$              | 特殊性质 | 分数 |\n|-------|-----------------------|-----------------------|------|----|\n| 1     | $\\le 8$               | $\\le 10^{3}$          | 无    | 5  |\n| 2     | $\\le 12$              | $\\le 10^{3}$          | 无    | 8  |\n| 3     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | A    | 17 |\n| 4     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | B    | 20 |\n| 5     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | C    | 17 |\n| 6     | $\\le 10^{3}$          | $\\le 10^{4}$          | D    | 10 |\n| 7     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | 无    | 23 |\n\n\n\n特殊性质 A：保证每个点度数小于等于 $2$。\n\n特殊性质 B：保证对于任意 $x$ 有 $\\mathrm{dist}(s,x)+\\mathrm{dist}(x,t)\\le \\mathrm{dist}(s,t)+2$。\n\n特殊性质 C：保证 $\\mathrm{dist}(s,t)=1$。\n\n特殊性质 D：该子任务共有五个测试点，对于每一个测试点，保证 $T=10$ 且 $n=1000$，并且每个测试数据中，$s$ 在 $1\\sim n$ 中等概率随机生成，$t$ 从 $1\\sim n$ 除去 $s$ 中等概率随机生成，树从所有 $n$ 个点的有标号树中等概率随机生成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 众生之门", "background": "[原题面存档。](https://www.luogu.com.cn/paste/pd4a89g5)", "description": "给定 $n$、一棵 $n$ 个点的无向树和树上的两个不相同的节点 $s,t$，其中每条边的长度均为 $1$。节点由 $1$ 至 $n$ 的整数编号。记 $\\mathrm{dist}(u,v)$ 表示 $u$ 和 $v$ 的距离（即简单路径经过的边数）。你需要给出一个 $1$ 到 $n$ 的排列 $p_1,p_2,\\cdots,p_n$ 满足以下两个条件：\n\n- $p_1=s$，$p_n=t$；\n- 设 $d_i=\\mathrm{dist}(p_i,p_{i+1})(1\\leq i\\leq n-1)$，那么你给出的排列需要满足以上条件的前提下，最小化 $\\oplus_{i = 1} ^ {n - 1}d_i$，其中 $\\oplus$ 表示按位异或。\n\n如果有多种满足条件的排列，输出任意一种均可。", "inputFormat": "从标准输入读入数据。\n\n本题有多组测试数据。第一行输入一个正整数 $T$ 表示测试数据组数。\n\n对于每组数据，第一行输入三个正整数 $n,s,t$，接下来 $n-1$ 行每行两个正整数 $u,v$，表示地点 $u$ 和 $v$ 有直接无向道路连接（即树上的一条边）。", "outputFormat": "输出到标准输出。\n\n对于每组数据，输出一行 $n$ 个正整数 $p_1,p_2,\\cdots,p_n$，你需要保证其为 $1$ 到 $n$ 的一个排列且 $p_1=s$，$p_n=t$，且 $\\oplus_{i = 1} ^ {n - 1} d_i$ 最小。", "hint": "**样例 1 解释**\n\n该样例共有三组测试数据。\n\n- 对于第一组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $0$，样例输出为 $1,2,3$，其中 $d_1=d_2=1$。\n- 对于第二组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $2$，样例输出为 $3,2,1,4$，其中 $d_1=d_2=1$，$d_3=2$；另一种合法输出为 $3,1,2,4$。\n- 对于第三组数据，$\\oplus_{i = 1} ^ {n - 1} d_i$ 最小可以取到 $1$，样例输出为 $1,5,3,4,2$，其中 $d_1=2$，$d_2=1$，$d_3=3$，$d_4=1$。\n\n**样例 2 解释**\n\n值得注意的是，该输入数据由所有满足 $n\\leq 10$ 的，且所有不同 $s$ 和 $t$ 的相对位置的可能的树形态构成。\n\n这个样例，无疑是善良的出题人无私的馈赠。中间忘了。出题人相信，这个美妙的样例，可以给拼搏于 AC 这道题的逐梦之路上的你，提供一个有力的援助。\n\n### 数据范围\n\n设 $\\sum n$ 表示单个测试点内所有数据的 $n$ 的和。对于所有测试数据，\n\n- $T≥1$；\n- $2\\leq n\\leq 5\\times 10 ^4$，$\\sum n\\leq 5\\times 10 ^ 5$；\n- $1\\leq s,t\\leq n$，$s\\neq t$；\n- $1\\le u,v\\le n$，$u\\neq v$；\n- 输入的 $n-1$ 个 $(u,v)$ 构成一棵树。\n\n| 子任务编号 | $n$                   | $\\sum n$              | 特殊性质 | 分数 |\n|-------|-----------------------|-----------------------|------|----|\n| 1     | $\\le 8$               | $\\le 10^{3}$          | 无    | 5  |\n| 2     | $\\le 12$              | $\\le 10^{3}$          | 无    | 8  |\n| 3     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | A    | 17 |\n| 4     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | B    | 20 |\n| 5     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | C    | 17 |\n| 6     | $\\le 10^{3}$          | $\\le 10^{4}$          | D    | 10 |\n| 7     | $\\le 5 \\times 10^{4}$ | $\\le 5 \\times 10^{5}$ | 无    | 23 |\n\n\n\n特殊性质 A：保证每个点度数小于等于 $2$。\n\n特殊性质 B：保证对于任意 $x$ 有 $\\mathrm{dist}(s,x)+\\mathrm{dist}(x,t)\\le \\mathrm{dist}(s,t)+2$。\n\n特殊性质 C：保证 $\\mathrm{dist}(s,t)=1$。\n\n特殊性质 D：该子任务共有五个测试点，对于每一个测试点，保证 $T=10$ 且 $n=1000$，并且每个测试数据中，$s$ 在 $1\\sim n$ 中等概率随机生成，$t$ 从 $1\\sim n$ 除去 $s$ 中等概率随机生成，树从所有 $n$ 个点的有标号树中等概率随机生成。", "locale": "zh-CN"}}}
{"pid": "P10213", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "交互题", "Special Judge", "CTSC/CTS"], "title": "[CTS2024] 多方计算", "background": "## 滥用本题评测将被封号\n\n**特别注意**：为了能够正常评测，请删去代码开头的 `#include \"mpc.h\"` 并加入以下代码段：\n\n```cpp\n#include <array>\nstruct player{\n    bool last_message;\n    std::array<int, 4096> memory;\n};\nint precalc(int n, int m);\nbool transmit(player &player, int round, int position);\n```", "description": "**这是一道交互题。**\n\n有 $n+1$ 个人，由 $0$ 至 $n$ 编号。第 $i(0 \\le i \\le n-1)$ 个人有一个 $[0,2^m-1]$ 之间的整数 $a_i$。\n\n编号为 $n$ 的人希望知道 $a_0+a_1+\\cdots+a_{n-1}$ 的值。为此，他们可以进行如下通讯：\n\n1. 首先，选定通讯的秒数 $N$。\n2. 接下来的 $N$ 秒中的每一秒，所有 $i(0 \\le i \\le n-1)$ **同时**向 $(i+1)$ 发送一个比特的信息。\n\n  - 该消息会在下一秒开始前收到。特别地，最后一秒发出的信息不会被收到。\n  - 除此之外，不允许任何其他形式的通讯。\n\n你需要用尽可能少的通讯秒数完成这个任务。\n\n## 实现细节\n\n请确保你的程序开头有 `#include \"mpc.h\"`。\n\n你不需要也不应该实现主函数。你需要实现以下两个函数：\n\n```cpp\nint precalc(int n, int m);\n```\n\n- `n` 表示人数，`m` 表示整数的值域。\n- 你需要返回通讯的秒数 $N$。\n\n```cpp\nbool transmit(player &player, int round, int position);\n```\n\n- `round` 表示目前通讯的秒数，其取值为 $[1,N]$ 中的整数；\n- `position` 表示当前传递信息的人的编号，其取值为 $[0,n]$ 中的整数；\n- `player` 为一个结构体类型，描述了当前传递信息的人。该结构体实现在 `mpc.h` 中。其包含以下两个成员变量：\n  - 布尔类型变量 `last_message`，表示上一秒上一个人传递的信息。若 `position` 为 $0$ 或 `round` 为 $1$，则 `last_message` 的值一定为 $0$；\n  - 长度为 $4096$ 的整型数组 `memory`，描述当前传递信息的人的“记忆”。\n    - 在 `transmit` 函数中，这个数组可以被任意修改。\n    - `player.memory` 只可能在 `transmit` 函数中被修改。若 `transmit` 函数中不对 `player.memory` 进行修改，则同一个人多次传递信息时，`player.memory` 都存储相同的值。\n    - `player.memory` 的初始值按照以下规则设定：\n      - `position` 不为 $n$ 时，`memory` 的 $0$ 到 $m-1$ 位取值为 $\\{0,1\\}$，从低位到高位描述 $a_{\\text{position}}$ 的二进制表示（即第 $i$ 位对应位权 $2^i$ 的位），而其余位置为 $0$；\n      - 否则，该数组的所有位置均为 $0$。\n- 你需要返回这个人在这一秒传递给下一个人的信息。\n  - 当 `position` 为 $n$ 时或 `round` 为 $N$ 时，该返回值不会产生任何影响。\n\n在所有 `transmit` 调用结束后，你需要保证编号为 $n$ 的人的 `player.memory` 中前 $2200$ 位取值均属于 $\\{0,1\\}$，且对应的二进制数是所有 $a_i$ 的和。\n\n在满足题目条件和数据范围的情况下，交互库至多消耗 $0.15$ 秒的时间以及 $128\\text{MiB}$ 的空间。\n\n**在程序中使用其他形式的通讯，包括但不限于使用全局变量，会被视为攻击交互库。**\n\n## 测试程序方式\n\n试题目录下提供了一个交互库的参考实现 `grader.cpp`。最终测试时所用的交互库实现与该实现有不同，因此选手的解法不应依赖交互库的具体实现。\n\n你需要在本题目录下使用以下编译命令得到可执行程序：\n\n`g++ mpc.cpp grader.cpp -o mpc -O2 -std=c++17 -lm`\n\n可执行文件将从标准输入读入以下格式的数据：\n\n- 第一行两个整数 $n, m$，\n- 接下来 $n$ 行每行 $m$ 个 `01` 整数，从低到高表示每个人的整数的二进制表示，每行的两个整数之间用一个空格分隔。\n\n读入完成后，交互库会先调用一次 `init(n,m)` 函数得到 $N$，然后进行 $\\max(0,N)$ 轮调用，第 $k(1 \\le k \\le \\max(0,N))$ 轮调用会调用所有 $\\text{round}=k$ 的 `transmit` 函数，并在调用完之后更新相应的 `player.last_message` 的值。\n\n- 若 $N \\le 0$，则不会进行任何调用，所有 `player.memory` 为其初始值。\n\n若你的程序正确运行，可执行文件会输出以下格式的数据：\n\n- 第一行一个长度为 $2200$ 的字符串，表示所有 $a_i$ 的和，按二进制从低位到高位输出。\n- 第二行一个字符串，依次输出所有交互完毕后编号为 $n$ 的人的 `player.memory` 中前 $2200$ 个位置表示的数，**相邻两个数之间没有空格**。\n- 第三行，如果上述两个字符串不同，那么会告知你答案错误；不然，会输出你在这组数据上的得分。\n\n本题目录中同时下发了样例 `1.in`，`1.ans` 以及一个样例程序 `mpc.cpp`。该样例程序可以通过下发的样例。", "inputFormat": "", "outputFormat": "", "hint": "## 子任务\n\n对于所有测试数据，$1 \\le n,m \\le 2000$。\n\n本题共有 10 个子任务，每个子任务 10 分。\n\n| 子任务编号 |  1   |  2   |  3   |  4   |  5   |  6   |  7   |  8   |  9   |  10  |\n| :--------: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n|   $n =$    |  5   | 1000 | 1000 | 1000 |  3   |  10  | 500  | 1000 | 1500 | 2000 |\n|   $m =$    |  5   |  1   |  10  |  30  | 1000 | 1000 | 1000 | 1000 | 1500 | 2000 |\n\n## 评分方式\n\n本题首先会受到和传统题相同的限制，例如编译错误会导致整道题目得 0 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 0 分等。\n\n在上述条件以外，在一个测试点中，若 $N > n+m+100$，或者在所有的 `transmit` 调用结束后编号为 $n$ 的人的 `player.memory` 中前 $2200$ 位对应的二进制数不是所有 $a_i$ 的和，你会获得 $0$ 分。否则，根据 $(N - n - m)$ 的值，你在该测试点的分数按照以下表格计算：\n\n| $(N - n - m) \\in$ | $[14,100]$ | $[12, 13]$ | $[9, 11]$ | $[6,8]$ | $[5,5]$ | $[4,4]$ | $(-\\infty, 3]$ |\n| :---------------: | :--------: | :--------: | :-------: | :-----: | :-----: | :-----: | :------------: |\n|       分数        |     1      |     2      |     3     |    4    |    6    |    8    |       10       |\n\n你在一个子任务中的分数为该子任务中所有测试点的分数的最小值。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 多方计算", "background": "## 滥用本题评测将被封号\n\n**特别注意**：为了能够正常评测，请删去代码开头的 `#include \"mpc.h\"` 并加入以下代码段：\n\n```cpp\n#include <array>\nstruct player{\n    bool last_message;\n    std::array<int, 4096> memory;\n};\nint precalc(int n, int m);\nbool transmit(player &player, int round, int position);\n```", "description": "**这是一道交互题。**\n\n有 $n+1$ 个人，由 $0$ 至 $n$ 编号。第 $i(0 \\le i \\le n-1)$ 个人有一个 $[0,2^m-1]$ 之间的整数 $a_i$。\n\n编号为 $n$ 的人希望知道 $a_0+a_1+\\cdots+a_{n-1}$ 的值。为此，他们可以进行如下通讯：\n\n1. 首先，选定通讯的秒数 $N$。\n2. 接下来的 $N$ 秒中的每一秒，所有 $i(0 \\le i \\le n-1)$ **同时**向 $(i+1)$ 发送一个比特的信息。\n\n  - 该消息会在下一秒开始前收到。特别地，最后一秒发出的信息不会被收到。\n  - 除此之外，不允许任何其他形式的通讯。\n\n你需要用尽可能少的通讯秒数完成这个任务。\n\n## 实现细节\n\n请确保你的程序开头有 `#include \"mpc.h\"`。\n\n你不需要也不应该实现主函数。你需要实现以下两个函数：\n\n```cpp\nint precalc(int n, int m);\n```\n\n- `n` 表示人数，`m` 表示整数的值域。\n- 你需要返回通讯的秒数 $N$。\n\n```cpp\nbool transmit(player &player, int round, int position);\n```\n\n- `round` 表示目前通讯的秒数，其取值为 $[1,N]$ 中的整数；\n- `position` 表示当前传递信息的人的编号，其取值为 $[0,n]$ 中的整数；\n- `player` 为一个结构体类型，描述了当前传递信息的人。该结构体实现在 `mpc.h` 中。其包含以下两个成员变量：\n  - 布尔类型变量 `last_message`，表示上一秒上一个人传递的信息。若 `position` 为 $0$ 或 `round` 为 $1$，则 `last_message` 的值一定为 $0$；\n  - 长度为 $4096$ 的整型数组 `memory`，描述当前传递信息的人的“记忆”。\n    - 在 `transmit` 函数中，这个数组可以被任意修改。\n    - `player.memory` 只可能在 `transmit` 函数中被修改。若 `transmit` 函数中不对 `player.memory` 进行修改，则同一个人多次传递信息时，`player.memory` 都存储相同的值。\n    - `player.memory` 的初始值按照以下规则设定：\n      - `position` 不为 $n$ 时，`memory` 的 $0$ 到 $m-1$ 位取值为 $\\{0,1\\}$，从低位到高位描述 $a_{\\text{position}}$ 的二进制表示（即第 $i$ 位对应位权 $2^i$ 的位），而其余位置为 $0$；\n      - 否则，该数组的所有位置均为 $0$。\n- 你需要返回这个人在这一秒传递给下一个人的信息。\n  - 当 `position` 为 $n$ 时或 `round` 为 $N$ 时，该返回值不会产生任何影响。\n\n在所有 `transmit` 调用结束后，你需要保证编号为 $n$ 的人的 `player.memory` 中前 $2200$ 位取值均属于 $\\{0,1\\}$，且对应的二进制数是所有 $a_i$ 的和。\n\n在满足题目条件和数据范围的情况下，交互库至多消耗 $0.15$ 秒的时间以及 $128\\text{MiB}$ 的空间。\n\n**在程序中使用其他形式的通讯，包括但不限于使用全局变量，会被视为攻击交互库。**\n\n## 测试程序方式\n\n试题目录下提供了一个交互库的参考实现 `grader.cpp`。最终测试时所用的交互库实现与该实现有不同，因此选手的解法不应依赖交互库的具体实现。\n\n你需要在本题目录下使用以下编译命令得到可执行程序：\n\n`g++ mpc.cpp grader.cpp -o mpc -O2 -std=c++17 -lm`\n\n可执行文件将从标准输入读入以下格式的数据：\n\n- 第一行两个整数 $n, m$，\n- 接下来 $n$ 行每行 $m$ 个 `01` 整数，从低到高表示每个人的整数的二进制表示，每行的两个整数之间用一个空格分隔。\n\n读入完成后，交互库会先调用一次 `init(n,m)` 函数得到 $N$，然后进行 $\\max(0,N)$ 轮调用，第 $k(1 \\le k \\le \\max(0,N))$ 轮调用会调用所有 $\\text{round}=k$ 的 `transmit` 函数，并在调用完之后更新相应的 `player.last_message` 的值。\n\n- 若 $N \\le 0$，则不会进行任何调用，所有 `player.memory` 为其初始值。\n\n若你的程序正确运行，可执行文件会输出以下格式的数据：\n\n- 第一行一个长度为 $2200$ 的字符串，表示所有 $a_i$ 的和，按二进制从低位到高位输出。\n- 第二行一个字符串，依次输出所有交互完毕后编号为 $n$ 的人的 `player.memory` 中前 $2200$ 个位置表示的数，**相邻两个数之间没有空格**。\n- 第三行，如果上述两个字符串不同，那么会告知你答案错误；不然，会输出你在这组数据上的得分。\n\n本题目录中同时下发了样例 `1.in`，`1.ans` 以及一个样例程序 `mpc.cpp`。该样例程序可以通过下发的样例。", "inputFormat": "", "outputFormat": "", "hint": "## 子任务\n\n对于所有测试数据，$1 \\le n,m \\le 2000$。\n\n本题共有 10 个子任务，每个子任务 10 分。\n\n| 子任务编号 |  1   |  2   |  3   |  4   |  5   |  6   |  7   |  8   |  9   |  10  |\n| :--------: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n|   $n =$    |  5   | 1000 | 1000 | 1000 |  3   |  10  | 500  | 1000 | 1500 | 2000 |\n|   $m =$    |  5   |  1   |  10  |  30  | 1000 | 1000 | 1000 | 1000 | 1500 | 2000 |\n\n## 评分方式\n\n本题首先会受到和传统题相同的限制，例如编译错误会导致整道题目得 0 分，运行时错误、超过时间限制、超过空间限制等会导致相应测试点得 0 分等。\n\n在上述条件以外，在一个测试点中，若 $N > n+m+100$，或者在所有的 `transmit` 调用结束后编号为 $n$ 的人的 `player.memory` 中前 $2200$ 位对应的二进制数不是所有 $a_i$ 的和，你会获得 $0$ 分。否则，根据 $(N - n - m)$ 的值，你在该测试点的分数按照以下表格计算：\n\n| $(N - n - m) \\in$ | $[14,100]$ | $[12, 13]$ | $[9, 11]$ | $[6,8]$ | $[5,5]$ | $[4,4]$ | $(-\\infty, 3]$ |\n| :---------------: | :--------: | :--------: | :-------: | :-----: | :-----: | :-----: | :------------: |\n|       分数        |     1      |     2      |     3     |    4    |    6    |    8    |       10       |\n\n你在一个子任务中的分数为该子任务中所有测试点的分数的最小值。", "locale": "zh-CN"}}}
{"pid": "P10214", "type": "P", "difficulty": 7, "samples": [["5 8\n1 2 3 2\n1 3 2 1 0\n0 4 1 0 0\n2 1 3\n1 1 0 3\n2 2 5\n1 1 2 2\n2 4 3\n2 5 4\n2 5 1\n2 2 1\n", "0\n0\n1\n1\n1\n1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CTSC/CTS"], "title": "[CTS2024] 投票游戏", "background": "", "description": "有 $n$ 个人，由 $1$ 至 $n$ 编号。第 $i (2 \\le i \\le n)$ 个人有一个讨厌的人 $f_i (1 \\leq f_i < i)$，第 $1$ 个人没有讨厌的人。\n\n这一天，$n$ 个人进行了一场关于投票的游戏。一次游戏会进行 $n$ 轮。游戏开始时，所有人都没有被票出。游戏的每一轮中，会进行以下过程：\n\n1. 对于每一个没有被票出的人 $i$，TA 初始有 $a_i$ 票。\n2. 随后，对于每一个没有被票出的人 $i$，如果 TA 有讨厌的人且 TA 讨厌的人 $f_i$ 没有被票出，则 TA 会给 $f_i$ 投 $b_i$ 票。\n3. 最后，票出当前没有被票出的人的票数最高的，如果有多个票数最高的人，票出其中编号最大的人。\n\n一次游戏的 $n$ 轮之间独立计票。\n\n在游戏开始前，发生了 $q$ 次事件，事件有以下两种：\n\n1. 给定 $p, x, y$，将 $(a_p, b_p)$ 修改为 $(x,y)$；\n2. 小明想知道，给定两个人 $c,d$，如果此刻进行一次游戏，两个人中谁先被票出。\n\n作为小明的朋友，你可以帮帮小明吗？", "inputFormat": "从标准输入读入数据。\n\n第一行两个正整数 $n, q$，表示人数与发生的事件数。\n\n第二行 $(n-1)$ 个整数 $f_2, f_3, \\cdots, f_n$。\n\n第三行 $n$ 个整数 $a_1, a_2, \\cdots, a_n$。\n\n第四行 $n$ 个整数 $b_1, b_2, \\cdots, b_n$。\n\n接下来 $q$ 行，每行三个或四个整数描述一个事件。第一个正整数 $op$ 表示发生事件的类型。\n\n- 若 $op=1$，则接下来三个整数 $p, x, y$，表示将 $(a_p, b_p)$ 修改为 $(x, y)$。\n- 若 $op=2$，则接下来两个正整数 $c, d$，你需要判断如果此时进行了一次游戏，$c$ 和 $d$ 谁先被票出。", "outputFormat": "输出到标准输出。\n\n对于每个 $op=2$ 的事件输出一行一个 `01` 字符，若 $c$ 先被票出输出 `0`，否则输出 `1`。", "hint": "对于所有测试数据，\n\n- $1 \\le n, q \\le 2 \\times 10^5$，\n- $\\forall 2 \\le i \\le n, 1 \\le f_i < i$，\n- $0 \\le a_i, b_i, x, y \\le 10^8$，\n- $1 \\le c, d, p \\le n$，\n- $c \\ne d$。\n\n| 子任务编号 | 子任务分值 | $n \\leq$        | $q \\leq$        | 特殊性质                       |\n|-------|-------|-----------------|-----------------|----------------------------|\n| 1     | 5     | $500$           | $500$           | 无                          |\n| 2     | 10    | $3000$          | $3000$          | 无                          |\n| 3     | 10    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i$ 在 $[1, i - 1]$ 中均匀随机 |\n| 4     | 15    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i = 1$                  |\n| 5     | 30    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i = i-1$                |\n| 6     | 30    | $2 \\times 10^5$ | $2 \\times 10^5$ | 无                          |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 投票游戏", "background": "", "description": "有 $n$ 个人，由 $1$ 至 $n$ 编号。第 $i (2 \\le i \\le n)$ 个人有一个讨厌的人 $f_i (1 \\leq f_i < i)$，第 $1$ 个人没有讨厌的人。\n\n这一天，$n$ 个人进行了一场关于投票的游戏。一次游戏会进行 $n$ 轮。游戏开始时，所有人都没有被票出。游戏的每一轮中，会进行以下过程：\n\n1. 对于每一个没有被票出的人 $i$，TA 初始有 $a_i$ 票。\n2. 随后，对于每一个没有被票出的人 $i$，如果 TA 有讨厌的人且 TA 讨厌的人 $f_i$ 没有被票出，则 TA 会给 $f_i$ 投 $b_i$ 票。\n3. 最后，票出当前没有被票出的人的票数最高的，如果有多个票数最高的人，票出其中编号最大的人。\n\n一次游戏的 $n$ 轮之间独立计票。\n\n在游戏开始前，发生了 $q$ 次事件，事件有以下两种：\n\n1. 给定 $p, x, y$，将 $(a_p, b_p)$ 修改为 $(x,y)$；\n2. 小明想知道，给定两个人 $c,d$，如果此刻进行一次游戏，两个人中谁先被票出。\n\n作为小明的朋友，你可以帮帮小明吗？", "inputFormat": "从标准输入读入数据。\n\n第一行两个正整数 $n, q$，表示人数与发生的事件数。\n\n第二行 $(n-1)$ 个整数 $f_2, f_3, \\cdots, f_n$。\n\n第三行 $n$ 个整数 $a_1, a_2, \\cdots, a_n$。\n\n第四行 $n$ 个整数 $b_1, b_2, \\cdots, b_n$。\n\n接下来 $q$ 行，每行三个或四个整数描述一个事件。第一个正整数 $op$ 表示发生事件的类型。\n\n- 若 $op=1$，则接下来三个整数 $p, x, y$，表示将 $(a_p, b_p)$ 修改为 $(x, y)$。\n- 若 $op=2$，则接下来两个正整数 $c, d$，你需要判断如果此时进行了一次游戏，$c$ 和 $d$ 谁先被票出。", "outputFormat": "输出到标准输出。\n\n对于每个 $op=2$ 的事件输出一行一个 `01` 字符，若 $c$ 先被票出输出 `0`，否则输出 `1`。", "hint": "对于所有测试数据，\n\n- $1 \\le n, q \\le 2 \\times 10^5$，\n- $\\forall 2 \\le i \\le n, 1 \\le f_i < i$，\n- $0 \\le a_i, b_i, x, y \\le 10^8$，\n- $1 \\le c, d, p \\le n$，\n- $c \\ne d$。\n\n| 子任务编号 | 子任务分值 | $n \\leq$        | $q \\leq$        | 特殊性质                       |\n|-------|-------|-----------------|-----------------|----------------------------|\n| 1     | 5     | $500$           | $500$           | 无                          |\n| 2     | 10    | $3000$          | $3000$          | 无                          |\n| 3     | 10    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i$ 在 $[1, i - 1]$ 中均匀随机 |\n| 4     | 15    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i = 1$                  |\n| 5     | 30    | $2 \\times 10^5$ | $2 \\times 10^5$ | $f_i = i-1$                |\n| 6     | 30    | $2 \\times 10^5$ | $2 \\times 10^5$ | 无                          |\n", "locale": "zh-CN"}}}
{"pid": "P10215", "type": "P", "difficulty": 7, "samples": [["ababa\n", "2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CTSC/CTS"], "title": "[CTS2024] 字符串游戏", "background": "", "description": "小 P 和小 B 喜欢玩游戏，他们找到了 skip。skip 告诉了他们这样一个游戏：\n\n- 有一个包含小写字母的字符串 $S$，游戏开始时其为 skip 给定的一个字符串 $S_0$。游戏对小 P 和小 B 计算分数，初始他们的分数都为 $0$。\n- 小 P 和小 B 轮流在这个串上操作，小 P 先手。每次操作方可以进行以下操作：\n  - 选择 $S$ 的一个非空前缀（可以是 $S$ 本身），获得等同于这个前缀在 $S$ 中的出现次数的分数，并将这个前缀从 $S$ 中删掉。\n- 如果进行了某次操作后 $S$ 变为空，游戏就结束了。\n\n为了让你更好的理解游戏规则，考虑如下例子：\n\n- 初始时，$S_0 = ababa$；\n- 小 P 选择 $ababa$ 的前缀 $a$，获得 3 分，$S$ 变为 $baba$；\n- 小 B 选择 $baba$ 的前缀 $ba$，获得 2 分，$S$ 变为 $ba$；\n- 小 P 选择 $ba$，获得 1 分，字符串变为空，游戏结束。最终小 P 获得 4 分，小 B 获得 2 分。\n\n小 P 希望最大化小 P 的得分减去小 B 的得分，而小 B 希望最小化这个值。他们想知道在双方都绝顶聪明的情况下，最终小 P 的得分减去小 B 的得分会是多少。", "inputFormat": "标准输入读入数据。\n\n输入仅一行一个小写字母构成的字符串 $S_0$。", "outputFormat": "输出到标准输出。\n\n一个整数，表示双方绝顶聪明的前提下，游戏结束时小 P 的得分减去小 B 的得分的值。\n\n", "hint": "**样例 1 解释**\n\n小 P 和小 B 的最优策略为题目描述中给出的策略。\n\n### 子任务\n\n设 $n$ 为字符串 $S$ 的长度。对于所有测试数据，$1\\le n\\le 10^6$，且字符串 $S$ 为小写字母构成的字符串。\n\n| 子任务编号 | $n \\le$         | 特殊性质                         | 分值 |\n|-------|-----------------|------------------------------|----|\n| 1     | $5\\times 10^3$   | 无                            | 10 |\n| 2     | $10^6$          | $S$ 的每个字符在 $\\{a,b\\}$ 中独立均匀随机 | 10 |\n| 3     | $10^6$          | $S$ 的每个字符均为 $a$              | 5  |\n| 4     | $2 \\times 10^5$ | $S$ 的每个字符均为 $a$ 或 $b$        | 25 |\n| 5     | $5 \\times 10^5$ | 无                            | 25 |\n| 6     | $10^6$          | 无                            | 25 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CTS2024] 字符串游戏", "background": "", "description": "小 P 和小 B 喜欢玩游戏，他们找到了 skip。skip 告诉了他们这样一个游戏：\n\n- 有一个包含小写字母的字符串 $S$，游戏开始时其为 skip 给定的一个字符串 $S_0$。游戏对小 P 和小 B 计算分数，初始他们的分数都为 $0$。\n- 小 P 和小 B 轮流在这个串上操作，小 P 先手。每次操作方可以进行以下操作：\n  - 选择 $S$ 的一个非空前缀（可以是 $S$ 本身），获得等同于这个前缀在 $S$ 中的出现次数的分数，并将这个前缀从 $S$ 中删掉。\n- 如果进行了某次操作后 $S$ 变为空，游戏就结束了。\n\n为了让你更好的理解游戏规则，考虑如下例子：\n\n- 初始时，$S_0 = ababa$；\n- 小 P 选择 $ababa$ 的前缀 $a$，获得 3 分，$S$ 变为 $baba$；\n- 小 B 选择 $baba$ 的前缀 $ba$，获得 2 分，$S$ 变为 $ba$；\n- 小 P 选择 $ba$，获得 1 分，字符串变为空，游戏结束。最终小 P 获得 4 分，小 B 获得 2 分。\n\n小 P 希望最大化小 P 的得分减去小 B 的得分，而小 B 希望最小化这个值。他们想知道在双方都绝顶聪明的情况下，最终小 P 的得分减去小 B 的得分会是多少。", "inputFormat": "标准输入读入数据。\n\n输入仅一行一个小写字母构成的字符串 $S_0$。", "outputFormat": "输出到标准输出。\n\n一个整数，表示双方绝顶聪明的前提下，游戏结束时小 P 的得分减去小 B 的得分的值。\n\n", "hint": "**样例 1 解释**\n\n小 P 和小 B 的最优策略为题目描述中给出的策略。\n\n### 子任务\n\n设 $n$ 为字符串 $S$ 的长度。对于所有测试数据，$1\\le n\\le 10^6$，且字符串 $S$ 为小写字母构成的字符串。\n\n| 子任务编号 | $n \\le$         | 特殊性质                         | 分值 |\n|-------|-----------------|------------------------------|----|\n| 1     | $5\\times 10^3$   | 无                            | 10 |\n| 2     | $10^6$          | $S$ 的每个字符在 $\\{a,b\\}$ 中独立均匀随机 | 10 |\n| 3     | $10^6$          | $S$ 的每个字符均为 $a$              | 5  |\n| 4     | $2 \\times 10^5$ | $S$ 的每个字符均为 $a$ 或 $b$        | 25 |\n| 5     | $5 \\times 10^5$ | 无                            | 25 |\n| 6     | $10^6$          | 无                            | 25 |", "locale": "zh-CN"}}}
{"pid": "P10216", "type": "P", "difficulty": 7, "samples": [["4\n1 2 3\n4 5\n6", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模板题"], "title": "【模板】Pfaffian", "background": "称一个长度为 $2n$ 的排列 $\\pi$ 是完美匹配，当且仅当其满足\n- $\\forall 1\\le i\\le n,\\pi_{2i-1}<\\pi_{2i}$\n- $\\forall 1\\le i< n,\\pi_{2i-1}<\\pi_{2i+1}$\n\n记 $\\textup{inv }\\pi$ 表示 $\\pi$ 的逆序对数，$\\textup{sgn }\\pi=(-1)^{\\textup{inv }\\pi}$，$\\mathfrak{M}_{2n}$ 表示全体长度为 $2n$ 的完美匹配构成的集合。\n\t\n令 $\\mathbf{A}=(a_{i,j})_{1\\le i<j\\le 2n}$ 是一个反对称矩阵，定义 $\\mathbf{A}$ 的 $\\text{Pfaffian}$ 为\n$$\\textup{Pf}(\\mathbf{A})=\\sum\\limits_{\\pi\\in\\mathfrak{M}_{2n}}(\\textup{sgn }\\pi)\\prod\\limits_{i=1}^{n}a_{\\pi(2i-1),\\pi(2i)}$$", "description": "给定偶数 $n$ 与反对称矩阵 $\\mathbf{A}=(a_{i,j})_{1\\le i<j\\le n}$，求 $\\textup{Pf}(\\mathbf{A})$ 对 $10^9+7$ 取模的结果。", "inputFormat": "第一行一个正整数 $n$，保证 $n$ 是偶数。\n\n接下来 $n-1$ 行，第 $i$ 行有 $n-i$ 个非负整数，其中第 $j$ 个整数表示 $a_{i,i+j}$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "对于 $30\\%$ 的数据，$n\\le 10$。\n\n对于 $100\\%$ 的数据，$2\\leq n\\le 500$，$0\\le a_{i,j}<10^9+7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】Pfaffian", "background": "称一个长度为 $2n$ 的排列 $\\pi$ 是完美匹配，当且仅当其满足\n- $\\forall 1\\le i\\le n,\\pi_{2i-1}<\\pi_{2i}$\n- $\\forall 1\\le i< n,\\pi_{2i-1}<\\pi_{2i+1}$\n\n记 $\\textup{inv }\\pi$ 表示 $\\pi$ 的逆序对数，$\\textup{sgn }\\pi=(-1)^{\\textup{inv }\\pi}$，$\\mathfrak{M}_{2n}$ 表示全体长度为 $2n$ 的完美匹配构成的集合。\n\t\n令 $\\mathbf{A}=(a_{i,j})_{1\\le i<j\\le 2n}$ 是一个反对称矩阵，定义 $\\mathbf{A}$ 的 $\\text{Pfaffian}$ 为\n$$\\textup{Pf}(\\mathbf{A})=\\sum\\limits_{\\pi\\in\\mathfrak{M}_{2n}}(\\textup{sgn }\\pi)\\prod\\limits_{i=1}^{n}a_{\\pi(2i-1),\\pi(2i)}$$", "description": "给定偶数 $n$ 与反对称矩阵 $\\mathbf{A}=(a_{i,j})_{1\\le i<j\\le n}$，求 $\\textup{Pf}(\\mathbf{A})$ 对 $10^9+7$ 取模的结果。", "inputFormat": "第一行一个正整数 $n$，保证 $n$ 是偶数。\n\n接下来 $n-1$ 行，第 $i$ 行有 $n-i$ 个非负整数，其中第 $j$ 个整数表示 $a_{i,i+j}$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "对于 $30\\%$ 的数据，$n\\le 10$。\n\n对于 $100\\%$ 的数据，$2\\leq n\\le 500$，$0\\le a_{i,j}<10^9+7$。", "locale": "zh-CN"}}}
{"pid": "P10217", "type": "P", "difficulty": 5, "samples": [["4\n1 2 2 2\n1 1\n1 2 -2 -2\n1 1\n1 2 0 0\n1 1\n2 100000000 100000000 100000000\n-99999999 0\n-100000000 0", "1\n-1\n0\n399999999"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2024", "O2优化"], "title": "[省选联考 2024] 季风", "background": "生活在二维平面的小 X 准备拜访小 Y，但由于气候的变化，平面上刮起了季风。小 X 想知道季风的影响下，TA 至少要多少天能够到达小 Y 的家，但小 X 也是第一次遇见这种怪事，所以请精通算法的你来帮忙。", "description": "给定 $n,k,x,y$ 和 $2n$ 个整数 $x_0,y_0,x_1,y_1,\\dots,x_{n-1},y_{n-1}$。\n\n找到最小的**非负整数** $m$，使得存在 $2m$ 个实数 $x_0',y_0',x_1',y_1',\\dots,x_{m-1}',y_{m-1}'$ 满足以下条件，或报告不存在这样的 $m$：\n- $\\sum \\limits_{i=0}^{m-1} (x_i'+x_{i \\bmod n})=x$；\n- $\\sum \\limits_{i=0}^{m-1} (y_i'+y_{i \\bmod n})=y$；\n- $\\forall 0\\leq i\\leq m-1,|x_i'|+|y_i'|\\leq k$。\n\n特别地，$m=0$ 时，认为 $\\sum \\limits_{i=0}^{m-1} (x_i'+x_{i \\bmod n})$ 和 $\\sum \\limits_{i=0}^{m-1} (y_i'+y_{i \\bmod n})$ 均为 $0$。", "inputFormat": "**本题有多组测试数据**。输入的第一行一个整数 $T$ 表示测试数据组数。\n\n对于每组测试数据，\n- 第一行四个整数 $n,k,x,y$；\n- 接下来 $n$ 行，第 $i$ 行两个整数 $x_{i-1},y_{i-1}$。", "outputFormat": "对于每组测试数据输出一行一个整数，如果存在满足题意的 $m$，输出其最小可能值，否则输出 $-1$。", "hint": "**【样例 1 解释】**\n\n该组样例共有四组测试数据。\n- 对于第一组测试数据，取 $m=1$，$(x_0',y_0')=(1,1)$ 满足条件，可以证明不存在更小的 $m$ 满足条件；\n- 对于第二组测试数据，可以证明不存在任何非负整数 $m$ 满足条件；\n- 对于第三组测试数据，取 $m=0$ 满足条件，可以证明不存在更小的 $m$ 满足条件。\n\n**【样例 2】**\n\n见附件中的 `wind2.in/ans`。\n\n该组样例共有八十组测试数据，所有测试数据均满足 $n=1$，其中测试数据 $1\\sim 20$ 满足特殊性质 A，$21\\sim 40$ 满足特殊性质 B，$41\\sim 60$ 满足特殊性质 C。\n\n**【样例 3】**\n\n见附件中的 `wind3.in/ans`。\n\n该组样例共有六十组测试数据，所有测试数据均满足 $n=200$，其中测试数据 $1\\sim 20$ 满足特殊性质 A，$21\\sim 40$ 满足特殊性质 B。\n\n**【子任务】**\n\n设 $\\sum n$ 为单个测试点内所有测试数据 $n$ 的和。对于所有测试数据：\n\n- $1\\leq T\\leq 5\\times 10^4$；\n- $1\\leq n\\leq 10^5$，$1\\leq \\sum n \\leq 10^6$；\n- $0\\leq |x|,|y|,|x_i|,|y_i|,k\\leq 10^8$。\n\n| 测试点编号 | $n\\leq$ | $\\sum n\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $300$ | A |\n| $2$ | $1$ | $300$ | B |\n| $3$ | $1$ | $300$ | C |\n| $4$ | $1$ | $300$ | 无 |\n| $5$ | $200$ | $5000$ | A |\n| $6$ | $200$ | $5000$ | B |\n| $7$ | $200$ | $5000$ | 无 |\n| $8$ | $10^4$ | $10^5$ | A |\n| $9$ | $10^4$ | $10^5$ | B |\n| $10$ | $10^5$ | $10^6$ | 无 |\n\n- 特殊性质 A：$\\forall 0\\leq i \\leq n-1$，$|x_i|+|y_i| \\leq k$；\n- 特殊性质 B：$k=0$；\n- 特殊性质 C：$x_0=y_0=0$。\n\n**【提示】**\n\n本题输入文件较大，请使用较为快速的输入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 季风", "background": "生活在二维平面的小 X 准备拜访小 Y，但由于气候的变化，平面上刮起了季风。小 X 想知道季风的影响下，TA 至少要多少天能够到达小 Y 的家，但小 X 也是第一次遇见这种怪事，所以请精通算法的你来帮忙。", "description": "给定 $n,k,x,y$ 和 $2n$ 个整数 $x_0,y_0,x_1,y_1,\\dots,x_{n-1},y_{n-1}$。\n\n找到最小的**非负整数** $m$，使得存在 $2m$ 个实数 $x_0',y_0',x_1',y_1',\\dots,x_{m-1}',y_{m-1}'$ 满足以下条件，或报告不存在这样的 $m$：\n- $\\sum \\limits_{i=0}^{m-1} (x_i'+x_{i \\bmod n})=x$；\n- $\\sum \\limits_{i=0}^{m-1} (y_i'+y_{i \\bmod n})=y$；\n- $\\forall 0\\leq i\\leq m-1,|x_i'|+|y_i'|\\leq k$。\n\n特别地，$m=0$ 时，认为 $\\sum \\limits_{i=0}^{m-1} (x_i'+x_{i \\bmod n})$ 和 $\\sum \\limits_{i=0}^{m-1} (y_i'+y_{i \\bmod n})$ 均为 $0$。", "inputFormat": "**本题有多组测试数据**。输入的第一行一个整数 $T$ 表示测试数据组数。\n\n对于每组测试数据，\n- 第一行四个整数 $n,k,x,y$；\n- 接下来 $n$ 行，第 $i$ 行两个整数 $x_{i-1},y_{i-1}$。", "outputFormat": "对于每组测试数据输出一行一个整数，如果存在满足题意的 $m$，输出其最小可能值，否则输出 $-1$。", "hint": "**【样例 1 解释】**\n\n该组样例共有四组测试数据。\n- 对于第一组测试数据，取 $m=1$，$(x_0',y_0')=(1,1)$ 满足条件，可以证明不存在更小的 $m$ 满足条件；\n- 对于第二组测试数据，可以证明不存在任何非负整数 $m$ 满足条件；\n- 对于第三组测试数据，取 $m=0$ 满足条件，可以证明不存在更小的 $m$ 满足条件。\n\n**【样例 2】**\n\n见附件中的 `wind2.in/ans`。\n\n该组样例共有八十组测试数据，所有测试数据均满足 $n=1$，其中测试数据 $1\\sim 20$ 满足特殊性质 A，$21\\sim 40$ 满足特殊性质 B，$41\\sim 60$ 满足特殊性质 C。\n\n**【样例 3】**\n\n见附件中的 `wind3.in/ans`。\n\n该组样例共有六十组测试数据，所有测试数据均满足 $n=200$，其中测试数据 $1\\sim 20$ 满足特殊性质 A，$21\\sim 40$ 满足特殊性质 B。\n\n**【子任务】**\n\n设 $\\sum n$ 为单个测试点内所有测试数据 $n$ 的和。对于所有测试数据：\n\n- $1\\leq T\\leq 5\\times 10^4$；\n- $1\\leq n\\leq 10^5$，$1\\leq \\sum n \\leq 10^6$；\n- $0\\leq |x|,|y|,|x_i|,|y_i|,k\\leq 10^8$。\n\n| 测试点编号 | $n\\leq$ | $\\sum n\\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $1$ | $300$ | A |\n| $2$ | $1$ | $300$ | B |\n| $3$ | $1$ | $300$ | C |\n| $4$ | $1$ | $300$ | 无 |\n| $5$ | $200$ | $5000$ | A |\n| $6$ | $200$ | $5000$ | B |\n| $7$ | $200$ | $5000$ | 无 |\n| $8$ | $10^4$ | $10^5$ | A |\n| $9$ | $10^4$ | $10^5$ | B |\n| $10$ | $10^5$ | $10^6$ | 无 |\n\n- 特殊性质 A：$\\forall 0\\leq i \\leq n-1$，$|x_i|+|y_i| \\leq k$；\n- 特殊性质 B：$k=0$；\n- 特殊性质 C：$x_0=y_0=0$。\n\n**【提示】**\n\n本题输入文件较大，请使用较为快速的输入方式。", "locale": "zh-CN"}}}
{"pid": "P10218", "type": "P", "difficulty": 7, "samples": [["1 2\n5 2 3\n1 1 2 3 7\n1 1 0 3 2\n1 1 1\n1\n0", "5\n2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2024"], "title": "[省选联考 2024] 魔法手杖", "background": "", "description": "**提示：** 我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nC 城是一座魔力之都，以最高的魔法师水平闻名。对于一名魔法师而言，最重要的固然是魔法手杖和镶嵌在手杖上的魔法水晶。\n\n每个魔法手杖和魔法水晶都可以用**魔力值**来衡量其能力大小，一个魔法手杖的魔力值是镶嵌在其上的所有魔法水晶中魔力值的最小值。\n\n小 $\\omega$ 是 C 城的一名见习魔法师，他想加强他的魔法手杖。在加强之前，小 $\\omega$ 的魔法手杖镶嵌着 $n$ 颗魔法水晶，它们的魔力值分别为 $a_1,a_2,\\dots,a_n$。\n\n小 $\\omega$ 准备使用一次强力的秘术来加强他的手杖。这一次秘术中，他可以任意选择 $x$，然后将所有魔法水晶的魔力值由 $a_i$ 变为 $(a_i \\oplus x)$，其中 $\\oplus$ 表示按位异或。由于小 $\\omega$ 能力有限，$a_1,a_2,\\dots,a_n$ 和 $x$ 都是 $[0,2^k-1]$ 中的整数。\n\n小 $\\omega$ 还发现这个秘术可以定向加强。具体地，他可以花费 $b_i$ 的体力值对第 $i$ 个魔法水晶进行定向加强，将原本应变为 $(a_i \\oplus x)$ 的魔力值变为 $(a_i+x)$。小 $\\omega$ 能力有限，因此他定向加强所花费的体力值总和不能超过 $m$，且每个水晶只能被定向加强至多一次。\n\n小 $\\omega$ 想知道他在加强魔法手杖后，魔法手杖的魔力值最大能为多少，但他并不会算，所以请你来帮他计算。\n\n**形式化的：** 给定 $a_1,a_2,\\dots,a_n$ 以及 $b_1,b_2,\\dots,b_n$，满足 $a_i \\in [0,2^k-1]$ 以及 $b_i\\geq 0$，你需要给出 $S \\subseteq \\{1,2,\\dots,n\\}$ 以及 $x \\in [0,2^k-1]$ 满足以下条件：\n\n- $\\sum \\limits_{i\\in S} b_i\\leq m$；\n- 满足以上条件的前提下，最大化 $val(S,x)=\\min(\\min \\limits_{i \\in S}(a_i+x),\\min \\limits_{i \\in U \\backslash S}(a_i \\oplus x))$ 的值。\n\n你只需要给出最大的 $val(S,x)$ 的值即可。", "inputFormat": "**本题有多组测试数据。** 输入的第一行包含两个整数 $c,T$，表示测试点编号与测试数据组数。样例中的 $c$ 表示该样例的数据范围与第 $c$ 个测试点的数据范围相同。\n\n接下来依次给出每组输入数据，对于每组数据：\n- 第一行三个整数 $n,m,k$；\n- 第二行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，分别表示每个魔法水晶的初始魔力值；\n- 第三行 $n$ 个整数 $b_1,b_2,\\dots,b_n$，分别表示每个魔法水晶定向加强需要的体力值。", "outputFormat": "对于每组测试数据输出一行一个整数表示小 $\\omega$ 能获得魔法手杖魔力值的最大值。", "hint": "**【样例 1 解释】**\n\n- 对于第一组数据，一种可行的方案为：定向强化魔法水晶 $5$（即 $S=\\{5\\}$）并取 $x=4$，最后得到的魔法水晶魔力值分别为 $5,5,6,7,11$，故魔法手杖的魔力值为 $5$。可以证明不存在更优方案。\n- 对于第二组数据，一种可行的方案为：定向强化魔法水晶 $1$（即 $S=\\{1\\}$）并取 $x=1$。\n\n**【样例 2】**\n\n见附件中的 `xor2.in/ans`。\n\n该组样例满足 $c=4$。\n\n**【样例 3】**\n\n见附件中的 `xor3.in/ans`。\n\n该组样例满足 $c=7$。\n\n**【样例 4】**\n\n见附件中的 `xor4.in/ans`。\n\n该组样例满足 $c=9$。\n\n**【样例 5】**\n\n见附件中的 `xor5.in/ans`。\n\n该组样例满足 $c=11$。\n\n**【样例 6】**\n\n见附件中的 `xor6.in/ans`。\n\n该组样例满足 $c=14$。\n\n**【样例 7】**\n\n见附件中的 `xor7.in/ans`。\n\n该组样例满足 $c=22$。\n\n**【子任务】**\n\n设 $\\sum n$ 表示单组测试点各组数据 $n$ 的和。对于所有测试数据，\n- $T \\geq 1$；\n- $1 \\leq n \\leq 10^5$，$1 \\leq \\sum n \\leq 5\\times 10^5$；\n- $0 \\leq m \\leq 10^9$；\n- $0 \\leq k \\leq 120$；\n- $\\forall 1 \\leq i \\leq n, 0 \\leq a_i<2^k$；\n- $\\forall 1 \\leq i \\leq n, 0 \\leq b_i \\leq 10^9$。\n\n| 测试点编号 | $\\sum n \\leq$ | $n \\leq$ | $m \\leq$ | $k \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $10$ | $10$ | $10^9$ | $10$ | / |\n| $4\\sim 6$ | $5\\times 10^5$ | $10^5$ | $0$ | $30$ | A |\n| $7,8$ | $5\\times 10^5$ | $2$ | $10^9$ | $30$ | B |\n| $9,10$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $30$ | B |\n| $11\\sim 13$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $30$ | C |\n| $14,15$ | $500$ | $10^2$ | $10^9$ | $30$ | / |\n| $16\\sim 18$ | $5\\times 10^4$ | $10^4$ | $10^9$ | $60$ | / |\n| $19\\sim 21$ | $3\\times 10^5$ | $10^5$ | $10^9$ | $120$ | / |\n| $22\\sim 25$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $120$ | / |\n\n\n- 特殊性质 A：$m=0$；$\\forall 1 \\leq i\\le n, b_i\\geq 1$；\n- 特殊性质 B：$m=1$；$\\forall 1 \\leq i\\le n, b_i \\in \\{1,2\\}$，且至多只有一个 $i$ 满足 $b_i=1$；\n- 特殊性质 C：$m=1$；$\\forall 1 \\leq i\\le n, b_i \\in \\{1,2\\}$。\n\n**【提示】**\n\n本题输入文件较大，请使用较为快速的输入方式。\n\n在评测环境中，你可以使用 $128$ 位有符号整数类型 `__int128`，它可以存储范围在 $[-2^{127},2^{127}-1]$ 内的整数，使用方法与其他整型类型基本一致。\n\n需要注意，此类型无法使用诸如 `cin/cout` 或 `scanf/printf` 等常规输入输出方式进行输入输出。我们在选手目录下提供了一份 `__int128` 的输入输出函数实现供选手选择使用。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 魔法手杖", "background": "", "description": "**提示：** 我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nC 城是一座魔力之都，以最高的魔法师水平闻名。对于一名魔法师而言，最重要的固然是魔法手杖和镶嵌在手杖上的魔法水晶。\n\n每个魔法手杖和魔法水晶都可以用**魔力值**来衡量其能力大小，一个魔法手杖的魔力值是镶嵌在其上的所有魔法水晶中魔力值的最小值。\n\n小 $\\omega$ 是 C 城的一名见习魔法师，他想加强他的魔法手杖。在加强之前，小 $\\omega$ 的魔法手杖镶嵌着 $n$ 颗魔法水晶，它们的魔力值分别为 $a_1,a_2,\\dots,a_n$。\n\n小 $\\omega$ 准备使用一次强力的秘术来加强他的手杖。这一次秘术中，他可以任意选择 $x$，然后将所有魔法水晶的魔力值由 $a_i$ 变为 $(a_i \\oplus x)$，其中 $\\oplus$ 表示按位异或。由于小 $\\omega$ 能力有限，$a_1,a_2,\\dots,a_n$ 和 $x$ 都是 $[0,2^k-1]$ 中的整数。\n\n小 $\\omega$ 还发现这个秘术可以定向加强。具体地，他可以花费 $b_i$ 的体力值对第 $i$ 个魔法水晶进行定向加强，将原本应变为 $(a_i \\oplus x)$ 的魔力值变为 $(a_i+x)$。小 $\\omega$ 能力有限，因此他定向加强所花费的体力值总和不能超过 $m$，且每个水晶只能被定向加强至多一次。\n\n小 $\\omega$ 想知道他在加强魔法手杖后，魔法手杖的魔力值最大能为多少，但他并不会算，所以请你来帮他计算。\n\n**形式化的：** 给定 $a_1,a_2,\\dots,a_n$ 以及 $b_1,b_2,\\dots,b_n$，满足 $a_i \\in [0,2^k-1]$ 以及 $b_i\\geq 0$，你需要给出 $S \\subseteq \\{1,2,\\dots,n\\}$ 以及 $x \\in [0,2^k-1]$ 满足以下条件：\n\n- $\\sum \\limits_{i\\in S} b_i\\leq m$；\n- 满足以上条件的前提下，最大化 $val(S,x)=\\min(\\min \\limits_{i \\in S}(a_i+x),\\min \\limits_{i \\in U \\backslash S}(a_i \\oplus x))$ 的值。\n\n你只需要给出最大的 $val(S,x)$ 的值即可。", "inputFormat": "**本题有多组测试数据。** 输入的第一行包含两个整数 $c,T$，表示测试点编号与测试数据组数。样例中的 $c$ 表示该样例的数据范围与第 $c$ 个测试点的数据范围相同。\n\n接下来依次给出每组输入数据，对于每组数据：\n- 第一行三个整数 $n,m,k$；\n- 第二行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，分别表示每个魔法水晶的初始魔力值；\n- 第三行 $n$ 个整数 $b_1,b_2,\\dots,b_n$，分别表示每个魔法水晶定向加强需要的体力值。", "outputFormat": "对于每组测试数据输出一行一个整数表示小 $\\omega$ 能获得魔法手杖魔力值的最大值。", "hint": "**【样例 1 解释】**\n\n- 对于第一组数据，一种可行的方案为：定向强化魔法水晶 $5$（即 $S=\\{5\\}$）并取 $x=4$，最后得到的魔法水晶魔力值分别为 $5,5,6,7,11$，故魔法手杖的魔力值为 $5$。可以证明不存在更优方案。\n- 对于第二组数据，一种可行的方案为：定向强化魔法水晶 $1$（即 $S=\\{1\\}$）并取 $x=1$。\n\n**【样例 2】**\n\n见附件中的 `xor2.in/ans`。\n\n该组样例满足 $c=4$。\n\n**【样例 3】**\n\n见附件中的 `xor3.in/ans`。\n\n该组样例满足 $c=7$。\n\n**【样例 4】**\n\n见附件中的 `xor4.in/ans`。\n\n该组样例满足 $c=9$。\n\n**【样例 5】**\n\n见附件中的 `xor5.in/ans`。\n\n该组样例满足 $c=11$。\n\n**【样例 6】**\n\n见附件中的 `xor6.in/ans`。\n\n该组样例满足 $c=14$。\n\n**【样例 7】**\n\n见附件中的 `xor7.in/ans`。\n\n该组样例满足 $c=22$。\n\n**【子任务】**\n\n设 $\\sum n$ 表示单组测试点各组数据 $n$ 的和。对于所有测试数据，\n- $T \\geq 1$；\n- $1 \\leq n \\leq 10^5$，$1 \\leq \\sum n \\leq 5\\times 10^5$；\n- $0 \\leq m \\leq 10^9$；\n- $0 \\leq k \\leq 120$；\n- $\\forall 1 \\leq i \\leq n, 0 \\leq a_i<2^k$；\n- $\\forall 1 \\leq i \\leq n, 0 \\leq b_i \\leq 10^9$。\n\n| 测试点编号 | $\\sum n \\leq$ | $n \\leq$ | $m \\leq$ | $k \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1\\sim 3$ | $10$ | $10$ | $10^9$ | $10$ | / |\n| $4\\sim 6$ | $5\\times 10^5$ | $10^5$ | $0$ | $30$ | A |\n| $7,8$ | $5\\times 10^5$ | $2$ | $10^9$ | $30$ | B |\n| $9,10$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $30$ | B |\n| $11\\sim 13$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $30$ | C |\n| $14,15$ | $500$ | $10^2$ | $10^9$ | $30$ | / |\n| $16\\sim 18$ | $5\\times 10^4$ | $10^4$ | $10^9$ | $60$ | / |\n| $19\\sim 21$ | $3\\times 10^5$ | $10^5$ | $10^9$ | $120$ | / |\n| $22\\sim 25$ | $5\\times 10^5$ | $10^5$ | $10^9$ | $120$ | / |\n\n\n- 特殊性质 A：$m=0$；$\\forall 1 \\leq i\\le n, b_i\\geq 1$；\n- 特殊性质 B：$m=1$；$\\forall 1 \\leq i\\le n, b_i \\in \\{1,2\\}$，且至多只有一个 $i$ 满足 $b_i=1$；\n- 特殊性质 C：$m=1$；$\\forall 1 \\leq i\\le n, b_i \\in \\{1,2\\}$。\n\n**【提示】**\n\n本题输入文件较大，请使用较为快速的输入方式。\n\n在评测环境中，你可以使用 $128$ 位有符号整数类型 `__int128`，它可以存储范围在 $[-2^{127},2^{127}-1]$ 内的整数，使用方法与其他整型类型基本一致。\n\n需要注意，此类型无法使用诸如 `cin/cout` 或 `scanf/printf` 等常规输入输出方式进行输入输出。我们在选手目录下提供了一份 `__int128` 的输入输出函数实现供选手选择使用。", "locale": "zh-CN"}}}
{"pid": "P10219", "type": "P", "difficulty": 7, "samples": [["1 4 1 1\n1 2 1\n2 1 1\n3 4 1\n4 3 1", "8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2024", "O2优化"], "title": "[省选联考 2024] 虫洞", "background": null, "description": "E 国有 $n$ 个城市，编号为 $1$ 至 $n$。为了让城市之间的来往更加便利，E 国的交通部想在 $n$ 个城市间建造一些虫洞。每条虫洞是一条**单向**的从某个城市到另一个城市的通道。允许通道的起点和终点是同一个城市，也允许两个城市之间有多个虫洞连接。\n\n为了区分虫洞的建造时间，交通部给每一条虫洞一个正整数的编号。\n\n我们称一种虫洞的建造方案是**好的**，若它满足如下四个条件：\n\n1. 存在一个非负整数 $d$ 使得每个城市恰好是 $d$ 条虫洞的起点，也恰好是 $d$ 条虫洞的终点。\n2. 对于每个城市而言，在以它为起点的虫洞的编号中，$1$ 到 $d$ **恰好**各出现一次。\n3. 对于每个城市而言，在以它为终点的虫洞的编号中，$1$ 到 $d$ **恰好**各出现一次。\n4. 任意选取一个城市 $u$ 和正整数 $1\\le j_1, j_2 \\le d$。设从 $u$ 出发，先经过一次编号为 $j_1$ 的虫洞，再经过一次编号为 $j_2$ 的虫洞，到达城市 $v_1$。设从 $u$ 出发，先经过一次编号为 $j_2$ 的虫洞，再经过一次编号为 $j_1$ 的虫洞，到达城市 $v_2$。则条件 $v_1=v_2$ 必定满足。\n\n特别地，不建造任何虫洞的方案也是好的。\n\n现在，建造师已建造了 $mn$ 条虫洞，且给了它们 $1\\sim m$ 的编号，**此时这样的建造方案是好的**。他想要新建造 $kn$ 条虫洞，并给它们 $(m+1)\\sim (m+k)$ 的编号。他必须保证这 $(m + k)n$ 条虫洞形成的建造方案仍然是好的。他想知道有多少种新建造 $kn$ 条虫洞的方法，使得这 $(m + k)n$ 条虫洞形成的建造方案是好的。\n\n由于答案很大，你只需要求出方案数除以 $998244353$ 的余数。", "inputFormat": "输入的第一行四个非负整数 $c, n, m, k$，其中 $c$ 表示测试点编号。样例中的 $c$ 表示该样例的数据范围与第 $c$ 个测试点的数据范围相同。\n\n接下来 $nm$ 行，每行三个正整数 $u,v,w$，表示一条编号为 $w$ 的，起点为 $u$ 号城市，终点为 $v$ 号城市的虫洞。", "outputFormat": "输出一行整数，表示方案数除以 $998244353$ 的余数。", "hint": "**【样例 1 解释】**\n\n在该组样例中，已经建造的编号为 $1$ 的虫洞为 $1\\to 2,2\\to 1,3\\to 4,4\\to 3$。为了使 $8$ 条虫洞形成的建造方案是好的，新建造的编号为 $2$ 的虫洞可能有 $8$ 种情形：\n\n1. $1\\to 1, 2\\to 2, 3\\to 3, 4\\to 4$\n2. $1\\to 1, 2\\to 2, 3\\to 4, 4\\to 3$\n3. $1\\to 2, 2\\to 1, 3\\to 3, 4\\to 4$\n4. $1\\to 2, 2\\to 1, 3\\to 4, 4\\to 3$\n5. $1\\to 3, 2\\to 4, 3\\to 1, 4\\to 2$\n6. $1\\to 3, 2\\to 4, 3\\to 2, 4\\to 1$\n7. $1\\to 4, 2\\to 3, 3\\to 1, 4\\to 2$\n8. $1\\to 4, 2\\to 3, 3\\to 2, 4\\to 1$\n\n**【样例 2】**\n\n见附件中的 `wormhole2.in/ans`。\n\n该样例的 $c = 2$，它满足第 2 个测试点的限制条件。\n\n**【样例 3】**\n\n见附件中的 `wormhole3.in/ans`。\n\n该样例的 $c = 5$，它满足第 5 个测试点的限制条件。\n\n**【样例 4】**\n\n见附件中的 `wormhole4.in/ans`。\n\n该样例的 $c = 7$，它满足第 7 个测试点的限制条件。\n\n**【样例 5】**\n\n见附件中的 `wormhole5.in/ans`。\n\n该样例的 $c = 9$，它满足第 9 个测试点的限制条件。\n\n**【样例 6】**\n\n见附件中的 `wormhole6.in/ans`。\n\n该样例的 $c = 11$，它满足第 11 个测试点的限制条件。\n\n**【样例 7】**\n\n见附件中的 `wormhole7.in/ans`。\n\n该样例的 $c = 15$，它满足第 15 个测试点的限制条件。\n\n**【样例 8】**\n\n见附件中的 `wormhole8.in/ans`。\n\n该样例的 $c = 17$，它满足第 17 个测试点的限制条件。\n\n**【样例 9】**\n\n见附件中的 `wormhole9.in/ans`。\n\n该样例的 $c = 20$，它满足第 20 个测试点的限制条件。\n\n**【样例 10】**\n\n见附件中的 `wormhole10.in/ans`。\n\n该样例的 $c = 22$，它满足第 22 个测试点的限制条件。\n\n**【子任务】**\n\n对于所有测试点，\n\n- $1\\le n \\le 2\\cdot 10^3$，$0 \\le m \\le 10^3$，$1 \\le k \\le 10^{15}$；\n- $1 \\le u,v \\le n$，$1 \\le w \\le m$；\n- 保证初始建造的 $mn$ 条虫洞构成一个好的建造方案。\n\n| 测试点编号 | $n$ | $m$ | $k$ |\n| :--: | :--: | :--: | :--: |\n| $1\\sim 4$ | $\\le 5$ | $\\le 3$ |$ \\le 3$ |\n| $5\\sim 6$ | $\\le 2\\cdot 10^3$| $=0$ | $=1$|\n| $7\\sim 8$ | $\\le 10^2$ | $=1$| $=1$ |\n| $9\\sim 10$ | $\\le 10^2$ | $\\le 10$ | $=1$|\n| $11\\sim 14$ | $\\le 10^2$ | $\\le 10$ | $\\le 10^3$|\n| $15\\sim 16$ | $\\le 10^2$ | $=0$ | $\\le 10^{15}$ |\n| $17\\sim 19$ | $\\le 10^2$ | $\\le 10$ | $\\le 10^{15}$ |\n| $20\\sim 21$ | $\\le 2\\cdot 10^3$ | $\\le 10^3$ | $\\le 10^2$ |\n| $22\\sim 25$ | $\\le 2\\cdot 10^3$ | $\\le 10^3$ | $\\le 10^{15}$ |\n\n**【提示】**\n\n本题部分测试点输入规模较大，我们推荐你使用较为快速的读入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 虫洞", "background": null, "description": "E 国有 $n$ 个城市，编号为 $1$ 至 $n$。为了让城市之间的来往更加便利，E 国的交通部想在 $n$ 个城市间建造一些虫洞。每条虫洞是一条**单向**的从某个城市到另一个城市的通道。允许通道的起点和终点是同一个城市，也允许两个城市之间有多个虫洞连接。\n\n为了区分虫洞的建造时间，交通部给每一条虫洞一个正整数的编号。\n\n我们称一种虫洞的建造方案是**好的**，若它满足如下四个条件：\n\n1. 存在一个非负整数 $d$ 使得每个城市恰好是 $d$ 条虫洞的起点，也恰好是 $d$ 条虫洞的终点。\n2. 对于每个城市而言，在以它为起点的虫洞的编号中，$1$ 到 $d$ **恰好**各出现一次。\n3. 对于每个城市而言，在以它为终点的虫洞的编号中，$1$ 到 $d$ **恰好**各出现一次。\n4. 任意选取一个城市 $u$ 和正整数 $1\\le j_1, j_2 \\le d$。设从 $u$ 出发，先经过一次编号为 $j_1$ 的虫洞，再经过一次编号为 $j_2$ 的虫洞，到达城市 $v_1$。设从 $u$ 出发，先经过一次编号为 $j_2$ 的虫洞，再经过一次编号为 $j_1$ 的虫洞，到达城市 $v_2$。则条件 $v_1=v_2$ 必定满足。\n\n特别地，不建造任何虫洞的方案也是好的。\n\n现在，建造师已建造了 $mn$ 条虫洞，且给了它们 $1\\sim m$ 的编号，**此时这样的建造方案是好的**。他想要新建造 $kn$ 条虫洞，并给它们 $(m+1)\\sim (m+k)$ 的编号。他必须保证这 $(m + k)n$ 条虫洞形成的建造方案仍然是好的。他想知道有多少种新建造 $kn$ 条虫洞的方法，使得这 $(m + k)n$ 条虫洞形成的建造方案是好的。\n\n由于答案很大，你只需要求出方案数除以 $998244353$ 的余数。", "inputFormat": "输入的第一行四个非负整数 $c, n, m, k$，其中 $c$ 表示测试点编号。样例中的 $c$ 表示该样例的数据范围与第 $c$ 个测试点的数据范围相同。\n\n接下来 $nm$ 行，每行三个正整数 $u,v,w$，表示一条编号为 $w$ 的，起点为 $u$ 号城市，终点为 $v$ 号城市的虫洞。", "outputFormat": "输出一行整数，表示方案数除以 $998244353$ 的余数。", "hint": "**【样例 1 解释】**\n\n在该组样例中，已经建造的编号为 $1$ 的虫洞为 $1\\to 2,2\\to 1,3\\to 4,4\\to 3$。为了使 $8$ 条虫洞形成的建造方案是好的，新建造的编号为 $2$ 的虫洞可能有 $8$ 种情形：\n\n1. $1\\to 1, 2\\to 2, 3\\to 3, 4\\to 4$\n2. $1\\to 1, 2\\to 2, 3\\to 4, 4\\to 3$\n3. $1\\to 2, 2\\to 1, 3\\to 3, 4\\to 4$\n4. $1\\to 2, 2\\to 1, 3\\to 4, 4\\to 3$\n5. $1\\to 3, 2\\to 4, 3\\to 1, 4\\to 2$\n6. $1\\to 3, 2\\to 4, 3\\to 2, 4\\to 1$\n7. $1\\to 4, 2\\to 3, 3\\to 1, 4\\to 2$\n8. $1\\to 4, 2\\to 3, 3\\to 2, 4\\to 1$\n\n**【样例 2】**\n\n见附件中的 `wormhole2.in/ans`。\n\n该样例的 $c = 2$，它满足第 2 个测试点的限制条件。\n\n**【样例 3】**\n\n见附件中的 `wormhole3.in/ans`。\n\n该样例的 $c = 5$，它满足第 5 个测试点的限制条件。\n\n**【样例 4】**\n\n见附件中的 `wormhole4.in/ans`。\n\n该样例的 $c = 7$，它满足第 7 个测试点的限制条件。\n\n**【样例 5】**\n\n见附件中的 `wormhole5.in/ans`。\n\n该样例的 $c = 9$，它满足第 9 个测试点的限制条件。\n\n**【样例 6】**\n\n见附件中的 `wormhole6.in/ans`。\n\n该样例的 $c = 11$，它满足第 11 个测试点的限制条件。\n\n**【样例 7】**\n\n见附件中的 `wormhole7.in/ans`。\n\n该样例的 $c = 15$，它满足第 15 个测试点的限制条件。\n\n**【样例 8】**\n\n见附件中的 `wormhole8.in/ans`。\n\n该样例的 $c = 17$，它满足第 17 个测试点的限制条件。\n\n**【样例 9】**\n\n见附件中的 `wormhole9.in/ans`。\n\n该样例的 $c = 20$，它满足第 20 个测试点的限制条件。\n\n**【样例 10】**\n\n见附件中的 `wormhole10.in/ans`。\n\n该样例的 $c = 22$，它满足第 22 个测试点的限制条件。\n\n**【子任务】**\n\n对于所有测试点，\n\n- $1\\le n \\le 2\\cdot 10^3$，$0 \\le m \\le 10^3$，$1 \\le k \\le 10^{15}$；\n- $1 \\le u,v \\le n$，$1 \\le w \\le m$；\n- 保证初始建造的 $mn$ 条虫洞构成一个好的建造方案。\n\n| 测试点编号 | $n$ | $m$ | $k$ |\n| :--: | :--: | :--: | :--: |\n| $1\\sim 4$ | $\\le 5$ | $\\le 3$ |$ \\le 3$ |\n| $5\\sim 6$ | $\\le 2\\cdot 10^3$| $=0$ | $=1$|\n| $7\\sim 8$ | $\\le 10^2$ | $=1$| $=1$ |\n| $9\\sim 10$ | $\\le 10^2$ | $\\le 10$ | $=1$|\n| $11\\sim 14$ | $\\le 10^2$ | $\\le 10$ | $\\le 10^3$|\n| $15\\sim 16$ | $\\le 10^2$ | $=0$ | $\\le 10^{15}$ |\n| $17\\sim 19$ | $\\le 10^2$ | $\\le 10$ | $\\le 10^{15}$ |\n| $20\\sim 21$ | $\\le 2\\cdot 10^3$ | $\\le 10^3$ | $\\le 10^2$ |\n| $22\\sim 25$ | $\\le 2\\cdot 10^3$ | $\\le 10^3$ | $\\le 10^{15}$ |\n\n**【提示】**\n\n本题部分测试点输入规模较大，我们推荐你使用较为快速的读入方式。", "locale": "zh-CN"}}}
{"pid": "P10220", "type": "P", "difficulty": 6, "samples": [["3\n1 0\n1\n2 1\n1 1\n1\n2 1\n3 3\n3 2 1 2 1 2 1\n4 2 6 3 7 1 5 8", "1 2\n2 1\n2 4 6 3 5 8 7 1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2024", "O2优化"], "title": "[省选联考 2024] 迷宫守卫", "background": "", "description": "Alice 拥有一座迷宫，这座迷宫可以抽象成一棵拥有 $2^n$ 个叶节点的满二叉树，总节点数目为 $(2^{n+1} - 1)$，依次编号为 $1 \\sim (2^{n+1} - 1)$。其中编号为 $2^n \\sim (2^{n+1} - 1)$ 的是叶节点，编号为 $1 \\sim (2^n - 1)$ 的是非叶节点，且非叶节点 $1 \\le u \\le (2^n - 1)$ 的左儿子编号为 $2u$，右儿子编号为 $(2u + 1)$。\n\n每个非叶节点都有一个石像守卫，初始时，所有石像守卫均在沉睡。唤醒 $u$ 点的石像守卫需要 $w_u$ 的魔力值。\n\n每个叶节点都有一个符文，$v$ 点的符文记作 $q_v$。**保证 $q_{2^n}, q_{2^n+1},\\cdots, q_{2^{n+1}-1}$ 构成 $1 \\sim 2^n$ 的排列**。\n\n探险者初始时持有空序列 $Q$，从节点 $1$ 出发，按照如下规则行动：\n\n- 到达叶节点 $v$ 时，将 $v$ 点的符文 $q_v$ 添加到序列 $Q$ 的末尾，然后返回父节点。\n- 到达非叶节点 $u$ 时：\n  - 若该点的石像守卫已被唤醒，则只能先前往左儿子，（从左儿子返回后）再前往右儿子，（从右儿子返回后）最后返回父节点。\n  - 若该点的石像守卫在沉睡，可以在以下二者中任选其一：\n    - 先前往左儿子，再前往右儿子，最后返回父节点。\n    - 先前往右儿子，再前往左儿子，最后返回父节点。\n\n返回节点 $1$ 时，探险结束。可以证明，探险者一定访问每个叶节点各一次，故此时 $Q$ 的长度为 $2^n$。\n\n探险者 Bob 准备进入迷宫，他希望探险结束时的 $Q$ 的字典序越小越好，与之相对，Alice 希望 $Q$ 的字典序越大越好。\n\n在 Bob 出发之前，Alice 可以选择一些魔力值花费之和不超过 $K$ 的石像守卫，并唤醒它们。Bob 出发时，他能够知道 Alice 唤醒了哪些神像。若**双方都采取最优策略**，求序列 $Q$ 的最终取值。\n\n对于两个长度为 $2^n$ 的序列 $Q_1,Q_2$，称 $Q_1$ 字典序小于 $Q_2$ 当且仅当以下条件成立：\n\n- $\\exist i \\in [1, 2^n]$ 满足以下两个条件：\n  - $\\forall 1 \\le j < i，Q_{1,j} = Q_{2,j}$；\n  - $Q_{1,i} < Q_{2,i}$。", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次 $T$ 组测试数据。对于每组测试数据：\n\n- 第一行两个整数 $n,K$ 表示迷宫规模和 Alice 可用于唤醒石像守卫的魔力值上限。\n- 第二行 $(2^n - 1)$ 个整数 $w_1,w_2,\\cdots,w_{2^n-1}$ 表示唤醒各个石像守卫耗费的魔力值。\n- 第三行 $2^n$ 个整数 $q_{2^n}, q_{2^n+1},\\cdots, q_{2^{n+1}-1}$ 表示各个叶节点上的符文。", "outputFormat": "对于每组数据，输出一行 $2^n$ 个整数 $Q_1,Q_2,\\cdots,Q_{2^n}$，表示双方都采取最优策略的情况下，序列 $Q$ 的最终取值。", "hint": "**【样例 1 解释】**\n\n- 第一组数据中，Alice 无法唤醒石像守卫，Bob 可以选择先访问叶节点 $3$，再访问叶节点 $2$，得 $Q = \\{1, 2\\}$。\n- 第二组数据中，Alice 可以唤醒节点 $1$ 的石像守卫，Bob 只能先访问叶节点 $2$，再访问叶节点 $3$，得 $Q = \\{2, 1\\}$。\n- 第三组数据中，Alice 的最优策略是唤醒节点 $5, 6$ 的石像守卫。\n\n**【样例 2】**\n\n见附件中的 `maze2.in/ans`。\n\n该组数据满足特殊性质 A。\n\n**【样例 3】**\n\n见附件中的 `maze3.in/ans`。\n\n该组数据满足特殊性质 B。\n\n**【样例 4】**\n\n见附件中的 `maze4.in/ans`。\n\n**【样例 5】**\n\n见附件中的 `maze5.in/ans`。\n\n**【子任务】**\n\n设 $\\sum 2^n$ 表示单个测试点钟所有测试数据的 $2^n$ 的和。对于所有测试数据，保证\n\n- $1\\le T \\le 100$；\n- $1\\le n \\le 16$，$1 \\le \\sum 2^n \\le 10^5$；\n- $0\\le K \\le 10^{12}$\n- $\\forall 1 \\le u \\le (2^n-1)$，$0 \\le w_u \\le 10^{12}$；\n- $q_{2^n},q_{2^n+1},\\cdots,q_{2^{n+1}-1}$ 构成 $1\\sim 2^n$ 的排列。\n\n| 测试点编号 | $n\\le$ | $\\sum 2^n \\le$ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1\\sim 5$ | $4$ | $80$ | 无 |\n| $6$ | $6$ | $200$ | A |\n| $7\\sim 8$ | $6$ | $200$ | B |\n| $9\\sim 10$ | $6$ | $200$ | 无 |\n| $11$ | $11$ | $4000$ | A |\n| $12\\sim 13$ | $11$ | $4000$ | B |\n| $14\\sim 15$ | $11$ | $4000$ | 无 |\n| $16$ | $16$ | $10^5$ | A |\n| $17\\sim 18$ | $16$ | $10^5$ | B |\n| $19\\sim 20$ | $16$ | $10^5$ | 无 |\n\n特殊性质 A：$\\forall 2^n \\le v \\le (2^{n+1}-1)$，$q_v = (2^{n+1}-v)$。\n\n特殊性质 B：$\\forall 1 \\le u \\le (2^n-1)$，$w_u = 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 迷宫守卫", "background": "", "description": "Alice 拥有一座迷宫，这座迷宫可以抽象成一棵拥有 $2^n$ 个叶节点的满二叉树，总节点数目为 $(2^{n+1} - 1)$，依次编号为 $1 \\sim (2^{n+1} - 1)$。其中编号为 $2^n \\sim (2^{n+1} - 1)$ 的是叶节点，编号为 $1 \\sim (2^n - 1)$ 的是非叶节点，且非叶节点 $1 \\le u \\le (2^n - 1)$ 的左儿子编号为 $2u$，右儿子编号为 $(2u + 1)$。\n\n每个非叶节点都有一个石像守卫，初始时，所有石像守卫均在沉睡。唤醒 $u$ 点的石像守卫需要 $w_u$ 的魔力值。\n\n每个叶节点都有一个符文，$v$ 点的符文记作 $q_v$。**保证 $q_{2^n}, q_{2^n+1},\\cdots, q_{2^{n+1}-1}$ 构成 $1 \\sim 2^n$ 的排列**。\n\n探险者初始时持有空序列 $Q$，从节点 $1$ 出发，按照如下规则行动：\n\n- 到达叶节点 $v$ 时，将 $v$ 点的符文 $q_v$ 添加到序列 $Q$ 的末尾，然后返回父节点。\n- 到达非叶节点 $u$ 时：\n  - 若该点的石像守卫已被唤醒，则只能先前往左儿子，（从左儿子返回后）再前往右儿子，（从右儿子返回后）最后返回父节点。\n  - 若该点的石像守卫在沉睡，可以在以下二者中任选其一：\n    - 先前往左儿子，再前往右儿子，最后返回父节点。\n    - 先前往右儿子，再前往左儿子，最后返回父节点。\n\n返回节点 $1$ 时，探险结束。可以证明，探险者一定访问每个叶节点各一次，故此时 $Q$ 的长度为 $2^n$。\n\n探险者 Bob 准备进入迷宫，他希望探险结束时的 $Q$ 的字典序越小越好，与之相对，Alice 希望 $Q$ 的字典序越大越好。\n\n在 Bob 出发之前，Alice 可以选择一些魔力值花费之和不超过 $K$ 的石像守卫，并唤醒它们。Bob 出发时，他能够知道 Alice 唤醒了哪些神像。若**双方都采取最优策略**，求序列 $Q$ 的最终取值。\n\n对于两个长度为 $2^n$ 的序列 $Q_1,Q_2$，称 $Q_1$ 字典序小于 $Q_2$ 当且仅当以下条件成立：\n\n- $\\exist i \\in [1, 2^n]$ 满足以下两个条件：\n  - $\\forall 1 \\le j < i，Q_{1,j} = Q_{2,j}$；\n  - $Q_{1,i} < Q_{2,i}$。", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来依次 $T$ 组测试数据。对于每组测试数据：\n\n- 第一行两个整数 $n,K$ 表示迷宫规模和 Alice 可用于唤醒石像守卫的魔力值上限。\n- 第二行 $(2^n - 1)$ 个整数 $w_1,w_2,\\cdots,w_{2^n-1}$ 表示唤醒各个石像守卫耗费的魔力值。\n- 第三行 $2^n$ 个整数 $q_{2^n}, q_{2^n+1},\\cdots, q_{2^{n+1}-1}$ 表示各个叶节点上的符文。", "outputFormat": "对于每组数据，输出一行 $2^n$ 个整数 $Q_1,Q_2,\\cdots,Q_{2^n}$，表示双方都采取最优策略的情况下，序列 $Q$ 的最终取值。", "hint": "**【样例 1 解释】**\n\n- 第一组数据中，Alice 无法唤醒石像守卫，Bob 可以选择先访问叶节点 $3$，再访问叶节点 $2$，得 $Q = \\{1, 2\\}$。\n- 第二组数据中，Alice 可以唤醒节点 $1$ 的石像守卫，Bob 只能先访问叶节点 $2$，再访问叶节点 $3$，得 $Q = \\{2, 1\\}$。\n- 第三组数据中，Alice 的最优策略是唤醒节点 $5, 6$ 的石像守卫。\n\n**【样例 2】**\n\n见附件中的 `maze2.in/ans`。\n\n该组数据满足特殊性质 A。\n\n**【样例 3】**\n\n见附件中的 `maze3.in/ans`。\n\n该组数据满足特殊性质 B。\n\n**【样例 4】**\n\n见附件中的 `maze4.in/ans`。\n\n**【样例 5】**\n\n见附件中的 `maze5.in/ans`。\n\n**【子任务】**\n\n设 $\\sum 2^n$ 表示单个测试点钟所有测试数据的 $2^n$ 的和。对于所有测试数据，保证\n\n- $1\\le T \\le 100$；\n- $1\\le n \\le 16$，$1 \\le \\sum 2^n \\le 10^5$；\n- $0\\le K \\le 10^{12}$\n- $\\forall 1 \\le u \\le (2^n-1)$，$0 \\le w_u \\le 10^{12}$；\n- $q_{2^n},q_{2^n+1},\\cdots,q_{2^{n+1}-1}$ 构成 $1\\sim 2^n$ 的排列。\n\n| 测试点编号 | $n\\le$ | $\\sum 2^n \\le$ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1\\sim 5$ | $4$ | $80$ | 无 |\n| $6$ | $6$ | $200$ | A |\n| $7\\sim 8$ | $6$ | $200$ | B |\n| $9\\sim 10$ | $6$ | $200$ | 无 |\n| $11$ | $11$ | $4000$ | A |\n| $12\\sim 13$ | $11$ | $4000$ | B |\n| $14\\sim 15$ | $11$ | $4000$ | 无 |\n| $16$ | $16$ | $10^5$ | A |\n| $17\\sim 18$ | $16$ | $10^5$ | B |\n| $19\\sim 20$ | $16$ | $10^5$ | 无 |\n\n特殊性质 A：$\\forall 2^n \\le v \\le (2^{n+1}-1)$，$q_v = (2^{n+1}-v)$。\n\n特殊性质 B：$\\forall 1 \\le u \\le (2^n-1)$，$w_u = 1$。", "locale": "zh-CN"}}}
{"pid": "P10221", "type": "P", "difficulty": 7, "samples": [["2 1 1\n1 2", "666666672"], ["3 0 2\n", "1"], ["4 4 4\n1 2\n1 3\n1 4\n2 4", "937500007"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2024", "O2优化"], "title": "[省选联考 2024] 重塑时光", "background": "", "description": "小 T 正在研究某段时间中所发生的事件。经观测，有 $n$ 个编号为 $1\\sim n$ 的事件在这段时间内按顺序依次发生，第 $i$ 个发生的是事件 $p_i$。这个描述事件发生顺序的排列 $p$ 可称为这段时间的**时间线**。\n\n突然，邪恶生物小 S 攻击了这条时间线，将这 $n$ 个事件的发生顺序 $p$ 变为了在所有长为 $n$ 的排列中等概率随机选取的一个排列。不仅如此，小 S 还用剪刀把时间线剪断，通过进行 $k$ 次操作，将排列 $p$ 分割成了 $(k + 1)$ 段。\n\n具体而言，在小 S 进行第 $i$ 次操作时，排列 $p$ 和之前所有插入的剪断点构成了一个长度为 $(n + i - 1)$ 的序列。该序列包括所有相邻元素之间和序列开头、末尾处共有 $(n + i)$ 个插入位置。小 S 将从这些插入位置中等概率随机选取一个位置，插入一个新的剪断点。最后，小 S 从最终被插入的 $k$ 个剪断点处把序列剪开，将排列 $p$ 分割成了 $(k + 1)$ 段序列。这 $(k + 1)$ 段序列中可能有空序列。\n\n为了拯救这条即将毁灭的时间线，小 T 决定把这 $(k + 1)$ 段序列按某种顺序重新拼接成一个长度为 $n$ 的排列，形成一条新的时间线。不过，由于事件之间存在一定的逻辑关系，事件的发生时间之间也存在一些先后顺序要求。经研究，共存在 $m$ 条先后顺序要求 $(u, v)$，要求事件 $u$ 的发生时间必须在事件 $v$ 之前。也就是说，$u$ 在时间线中的出现位置必须在 $v$ 之前。\n\n请你设计程序，计算有多大的概率，存在至少一种重新排列这 $(k + 1)$ 段序列，并将其重新拼接为一条新的时间线的方案，能够使所有的 $m$ 条事件发生时间之间的先后顺序要求都得到满足。\n\n为了避免精度误差，请你输出答案对 $10^9 +7$ 取模的结果。形式化地，可以证明答案可被表示为一最简分数 $\\frac{p}{q}$，请你输出一个 $x$ 满足 $0 \\le x < 10^9+7$ 且 $qx \\equiv p \\pmod {10^9+7}$。可以证明在题目条件下这样的 $x$ 总是存在。", "inputFormat": "第一行三个整数 $n, m, k$，分别描述事件的个数，事件之间先后顺序的条数以及小 S 进行的剪断操作次数。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条事件发生时间的先后顺序要求。", "outputFormat": "输出一行一个整数，表示所求答案。", "hint": "**【样例 1 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f8vh2qqo.png)\n\n假如事件 $1$ 的发生时间早于事件 $2$，那么无论怎样拼接都是可行方案，一定可以满足要求。否则，只有剪断时间线的位置位于事件 $1$ 和事件 $2$ 的发生时间之间，才能满足要求。答案为 $\\frac{1}{2}+\\frac{1}{2}\\times \\frac{1}{3}=\\frac{2}{3}$。\n\n**【样例 2 解释】**\n\n没有任何事件发生时间之间的先后顺序要求，因此无论怎样拼接都是可行的方案，答案为 $1$。\n\n**【样例 4】**\n\n见附件中的 `timeline4.in/ans`。\n\n**【样例 5】**\n\n见附件中的 `timeline5.in/ans`。\n\n该组样例满足数据范围中的特殊性质 B。\n\n**【样例 6】**\n\n见附件中的 `timeline6.in/ans`。\n\n该组样例满足数据范围中的特殊性质 A。\n\n**【样例 7】**\n\n见附件中的 `timeline7.in/ans`。\n\n**【子任务】**\n\n对于所有测试数据，\n\n- $1 \\le n \\le 15$，\n- $0 \\le m \\le \\frac{n(n-1)}{2}$，$0 \\le k \\le n$，\n- $1 \\le u < v \\le n$，保证不存在两对 $(u,v)$ 完全相同。\n\n| 测试点 | $n$ | $m$ | $k$ | 特殊性质 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ | $\\le 3$ | $=n-1$ | $=0$ | B |\n| $2$ | $\\le 5$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$| 无 |\n| $3,4$ | $\\le 14$ | $=n-1$| $\\le n$ | B |\n| $5$ | $\\le 14$ | $=n-1$ | $=0$ | A |\n| $6$ | $\\le 14$ | $=n-1$ | $\\le n$ | A |\n| $7$ | $\\le 14$ | $=0$ | $\\le n$ | 无 |\n| $8$ | $\\le 14$ | $=\\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $9,10$ | $\\le 9$ | $\\le 15$ | $\\le n$ | 无 |\n| $11$ | $\\le 13$ | $\\le \\frac{n(n-1)}{2}$ | $=0$ | 无 |\n| $12$ | $\\le 13$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $13 \\sim 17$ | $\\le 14$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $18\\sim 20$ | $\\le 15$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n\n特殊性质 A：对于每个事件 $x$，至多存在一条先后顺序 $(u, v)$ 使得 $v = x$。\n\n特殊性质 B：对于所有先后顺序 $(u, v)$，均满足 $u = 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 重塑时光", "background": "", "description": "小 T 正在研究某段时间中所发生的事件。经观测，有 $n$ 个编号为 $1\\sim n$ 的事件在这段时间内按顺序依次发生，第 $i$ 个发生的是事件 $p_i$。这个描述事件发生顺序的排列 $p$ 可称为这段时间的**时间线**。\n\n突然，邪恶生物小 S 攻击了这条时间线，将这 $n$ 个事件的发生顺序 $p$ 变为了在所有长为 $n$ 的排列中等概率随机选取的一个排列。不仅如此，小 S 还用剪刀把时间线剪断，通过进行 $k$ 次操作，将排列 $p$ 分割成了 $(k + 1)$ 段。\n\n具体而言，在小 S 进行第 $i$ 次操作时，排列 $p$ 和之前所有插入的剪断点构成了一个长度为 $(n + i - 1)$ 的序列。该序列包括所有相邻元素之间和序列开头、末尾处共有 $(n + i)$ 个插入位置。小 S 将从这些插入位置中等概率随机选取一个位置，插入一个新的剪断点。最后，小 S 从最终被插入的 $k$ 个剪断点处把序列剪开，将排列 $p$ 分割成了 $(k + 1)$ 段序列。这 $(k + 1)$ 段序列中可能有空序列。\n\n为了拯救这条即将毁灭的时间线，小 T 决定把这 $(k + 1)$ 段序列按某种顺序重新拼接成一个长度为 $n$ 的排列，形成一条新的时间线。不过，由于事件之间存在一定的逻辑关系，事件的发生时间之间也存在一些先后顺序要求。经研究，共存在 $m$ 条先后顺序要求 $(u, v)$，要求事件 $u$ 的发生时间必须在事件 $v$ 之前。也就是说，$u$ 在时间线中的出现位置必须在 $v$ 之前。\n\n请你设计程序，计算有多大的概率，存在至少一种重新排列这 $(k + 1)$ 段序列，并将其重新拼接为一条新的时间线的方案，能够使所有的 $m$ 条事件发生时间之间的先后顺序要求都得到满足。\n\n为了避免精度误差，请你输出答案对 $10^9 +7$ 取模的结果。形式化地，可以证明答案可被表示为一最简分数 $\\frac{p}{q}$，请你输出一个 $x$ 满足 $0 \\le x < 10^9+7$ 且 $qx \\equiv p \\pmod {10^9+7}$。可以证明在题目条件下这样的 $x$ 总是存在。", "inputFormat": "第一行三个整数 $n, m, k$，分别描述事件的个数，事件之间先后顺序的条数以及小 S 进行的剪断操作次数。\n\n接下来 $m$ 行，每行两个整数 $u, v$，表示一条事件发生时间的先后顺序要求。", "outputFormat": "输出一行一个整数，表示所求答案。", "hint": "**【样例 1 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/f8vh2qqo.png)\n\n假如事件 $1$ 的发生时间早于事件 $2$，那么无论怎样拼接都是可行方案，一定可以满足要求。否则，只有剪断时间线的位置位于事件 $1$ 和事件 $2$ 的发生时间之间，才能满足要求。答案为 $\\frac{1}{2}+\\frac{1}{2}\\times \\frac{1}{3}=\\frac{2}{3}$。\n\n**【样例 2 解释】**\n\n没有任何事件发生时间之间的先后顺序要求，因此无论怎样拼接都是可行的方案，答案为 $1$。\n\n**【样例 4】**\n\n见附件中的 `timeline4.in/ans`。\n\n**【样例 5】**\n\n见附件中的 `timeline5.in/ans`。\n\n该组样例满足数据范围中的特殊性质 B。\n\n**【样例 6】**\n\n见附件中的 `timeline6.in/ans`。\n\n该组样例满足数据范围中的特殊性质 A。\n\n**【样例 7】**\n\n见附件中的 `timeline7.in/ans`。\n\n**【子任务】**\n\n对于所有测试数据，\n\n- $1 \\le n \\le 15$，\n- $0 \\le m \\le \\frac{n(n-1)}{2}$，$0 \\le k \\le n$，\n- $1 \\le u < v \\le n$，保证不存在两对 $(u,v)$ 完全相同。\n\n| 测试点 | $n$ | $m$ | $k$ | 特殊性质 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ | $\\le 3$ | $=n-1$ | $=0$ | B |\n| $2$ | $\\le 5$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$| 无 |\n| $3,4$ | $\\le 14$ | $=n-1$| $\\le n$ | B |\n| $5$ | $\\le 14$ | $=n-1$ | $=0$ | A |\n| $6$ | $\\le 14$ | $=n-1$ | $\\le n$ | A |\n| $7$ | $\\le 14$ | $=0$ | $\\le n$ | 无 |\n| $8$ | $\\le 14$ | $=\\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $9,10$ | $\\le 9$ | $\\le 15$ | $\\le n$ | 无 |\n| $11$ | $\\le 13$ | $\\le \\frac{n(n-1)}{2}$ | $=0$ | 无 |\n| $12$ | $\\le 13$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $13 \\sim 17$ | $\\le 14$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n| $18\\sim 20$ | $\\le 15$ | $\\le \\frac{n(n-1)}{2}$ | $\\le n$ | 无 |\n\n特殊性质 A：对于每个事件 $x$，至多存在一条先后顺序 $(u, v)$ 使得 $v = x$。\n\n特殊性质 B：对于所有先后顺序 $(u, v)$，均满足 $u = 1$。", "locale": "zh-CN"}}}
{"pid": "P10222", "type": "P", "difficulty": 7, "samples": [["3 6\n0 2 2 3\n0 0\n0 0\n2 1\n1 3\n2 1\n1 3\n1 2\n2 1", "3\n3\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2024"], "title": "[省选联考 2024] 最长待机", "background": "", "description": "精灵程序员小 $\\omega$ 和 小 $\\aleph$ 拥有无限的寿命，因此在写代码之余，它们经常玩一些对抗游戏来打发时间。尽管如此，时间还是太多，于是它们发明了一款专用于消磨时间的游戏：最长待机。\n\n为了了解最长待机的规则，首先要了解精灵们使用的编程语言 Sleep++ 的规则：\n\n- 程序由 $n$ 个函数组成，第 $i(1 \\le i\\le n)$ 个函数具有种类 $e_i$ 和子函数编号序列 $Q_i = (Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i})$。$Q_i$ 可以为空，此时 $l_i$ 为 $0$。\n\n- $n$ 以及所有的 $e_i$ 和 $Q_i$ 可以由程序员任意给出，但它们需要满足以下所有条件：\n  - $n\\ge 1$；\n  - $\\forall 1 \\le i \\le n$，$e_i \\in \\{0, 1\\}$；\n  - $\\forall 1 \\le i \\le n$，$Q_i$ 中元素两两不同且均为 $[i + 1, n]$ 中的整数；\n  - $\\forall 2 \\le j \\le n$，**恰好有一个 $Q_i(1 \\le i \\le n)$ 包含了 $j$**。\n\n- **调用**函数 $i(1 \\le i \\le n)$ 时，按顺序执行如下操作：\n  - 若 $e_i = 0$，令变量 $r_i$ 为 $1$；否则程序员需要立即为 $r_i$ 输入一个**正整数值**。\n  - 若 $Q_i$ 为空，程序等待 $r_i$ 秒；否则重复以下操作 $r_i$ 次：\n    * 按顺序**调用**编号为 $Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i}$ 的函数。\n\n- 若一个种类为 $1$ 的函数 $j$ 被调用多次，则其每次调用都需要输入 $r_j$。\n\n- 我们认为，在函数调用中，除了“等待 $r$ 秒”之外的操作不消耗任何时间，即函数调用、运行和输入都在瞬间完成。因此，一个时刻内程序员可能输入多个数。\n\n可以证明，调用任意一个 Sleep++ 程序的任意一个函数，无论如何设定输入，消耗的时间总是有限的。\n\n“最长待机”的游戏规则如下：\n\n- 小 $\\omega$ 和 小 $\\aleph$ 准备好各自的 Sleep++ 程序并选择各自程序中的一个函数。它们互相知晓对方程序的结构以及选择的函数。\n\n- 在时刻 $0$，小 $\\omega$ 和 小 $\\aleph$ 同时调用自己选择的函数，游戏开始。\n\n- 在时刻 $t$（$t \\ge 0$），双方可以看到对方在时刻 $0$ 至 $(t - 1)$ 输入的所有数字，并相应调整自己在时刻 $t$ 输入的数字，但双方无法得知对方在时刻 $t$ 输入的数字。\n\n- 函数调用先结束的一方输掉游戏，另一方胜利。两个调用同时结束算作平局。\n\n小 $\\omega$ 和 小 $\\aleph$ 都是绝顶聪明的，在它们眼中，如果有一方存在必胜策略，那么这局游戏是不公平的。换言之，双方都不存在必胜策略的游戏是公平的。\n\n小 $\\omega$ 写了一个 $n$ 个函数的 Sleep++ 程序并进行了 $m$ 次操作，操作有以下两种：\n\n- 操作一：给出 $k$，将 $e_k$ 修改为 $(1 - e_k)$；\n- 操作二：给出 $k$，与小 $\\aleph$ 玩一局“最长待机”，开始时小 $\\omega$ 会调用自己的函数 $k$。\n\n小 $\\aleph$ 信奉极简主义，它希望对于每一局游戏设计出函数个数最少的程序，使得选择其中某个函数能让这局游戏是公平的。你能帮它求出最少所需的函数个数吗？\n\n可以证明，小 $\\aleph$ 总是能设计一个程序并选择其中一个函数，使得游戏是公平的。", "inputFormat": "输入的第一行包含两个正整数 $n,m$，表示小 $\\omega$ 的程序中函数的个数以及操作次数。\n\n接下来 $n$ 行，第 $i$ 行若干个整数，描述小 $\\omega$ 程序中的函数 $i$：\n\n- 前两个整数 $e_i, l_i$ 表示函数种类和子函数编号序列长度；\n- 接下来 $l_i$ 个整数 $Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i}$ 描述子函数编号序列。\n\n接下来 $m$ 行，第 $j$ 行两个整数 $o_j, k_j$ 描述一次操作，其中 $o_j = 1$ 表示操作一，$o_j = 2$ 表示操作二。", "outputFormat": "对于每个操作二输出一行一个整数，表示小 $\\aleph$ 的程序中最少所需的函数个数。", "hint": "**【样例 1 解释】**\n\n- 对于前两次游戏，小 $\\aleph$ 可以给出与小 $\\omega$ 完全一致的程序并在游戏开始时调用函数 $1$。可以证明不存在函数个数更少的方案。\n\n- 对于第三次游戏，小 $\\aleph$ 可以给出一个仅包含一个种类为 $1$ 的函数的程序，并在游戏开始时调用函数 $1$。\n  - 在时刻 $0$，小 $\\omega$ 输入其程序中的 $r_2$，小 $\\aleph$ 输入其程序中的 $r_1$。\n    * 注意：$r$ 变量在小 $\\omega$ 和小 $\\aleph$ 的程序之间是独立的，不会互相影响。\n  - 输入完成后，小 $\\omega$ 的程序在时刻 $(r_2 +1)$ 结束，小 $\\aleph$ 的程序在时刻 $r_1$ 结束。\n  - 由于两人在时刻 $0$ 互不知道对方的决策，不能保证 $(r_2 + 1)$ 和 $r_1$ 的大小关系，故双方均不存在必胜策略，这局游戏是公平的。\n\n**【样例 2】**\n\n见附件中的 `sleep2.in/ans`。\n\n该组数据满足特殊性质 AD。\n\n**【样例 3】**\n\n见附件中的 `sleep3.in/ans`。\n\n该组数据满足特殊性质 BD。\n\n**【样例 4】**\n\n见附件中的 `sleep4.in/ans`。\n\n该组数据满足特殊性质 D。\n\n**【样例 5】**\n\n见附件中的 `sleep5.in/ans`。\n\n该组数据满足特殊性质 C。\n\n**【子任务】**\n\n对于所有测试数据，\n\n- $1 \\le n \\le 5\\times 10^5$，$1 \\le m \\le 2\\times 10^5$；\n- $\\forall 1 \\le i \\le n$，$e_i\\in \\{0, 1\\}$，$0 \\le l_i <n$；\n- $\\forall 1 \\le i \\le n,1 \\le j \\le l_i$，$i < Q_{i,j} \\le n$；\n- $\\forall 1 \\le i \\le n, 1 \\le p < q \\le l_i$，$Q_{i,p}\\neq Q_{i,q}$；\n- $\\forall 2 \\le j \\le n$，恰好有一个 $Q_i(1 \\le i \\le n)$ 包含了 $j$；\n- $\\forall 1 \\le j \\le m$，$1 \\le o_j \\le 2$，$1 \\le k_j \\le n$。\n\n| 测试点编号 | $n \\le $ | $m\\le $| 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1\\sim 2$ | $3$ | $24$ | 无 |\n| $3$ | $80$ | $400$ | AD |\n| $4$ | $80$ | $400$ | BD |\n| $5\\sim 6$ | $80$ | $400$ | D |\n| $7$ | $3\\times 10^5$ | $10^5$ | AD |\n| $8$ | $3\\times 10^5$ | $10^5$ | BD |\n| $9\\sim 10$ | $3\\times 10^5$ | $10^5$ | D |\n| $11$ | $3\\times 10^5$ | $10^5$ | A |\n| $12$ | $3\\times 10^5$ | $10^5$ | BC |\n| $13$ | $3\\times 10^5$ | $10^5$ | B |\n| $14\\sim 15$ | $3\\times 10^5$ | $10^5$ | C |\n| $16\\sim 17$ | $3\\times 10^5$ | $10^5$ | 无 |\n| $18\\sim 19$ | $5\\times 10^5$ | $2\\times 10^5$ | A |\n| $20$ | $5\\times 10^5$ | $2\\times 10^5$ | BC |\n| $21$ | $5\\times 10^5$ | $2\\times 10^5$ | B |\n| $22\\sim 23$ | $5\\times 10^5$ | $2\\times 10^5$ | C |\n| $24\\sim 25$ | $5\\times 10^5$ | $2\\times 10^5$ | 无 |\n\n特殊性质 A：保证\n\n- 任意时刻 $e_1$ 均为 $0$；\n- $\\forall 2\\le i \\le n$，$l_i \\le 1$；\n- 操作二的 $k$ 均为 $1$。\n\n特殊性质 B：保证\n\n- 操作二的 $k$ 满足当时的 $e_k$ 为 $1$。\n\n特殊性质 C：保证\n\n- $\\forall 2\\le i \\le n$，$i \\in Q_{\\lfloor \\frac{i}{2}\\rfloor}$；\n- $\\forall 1 \\le i \\le n$，序列 $Q_i$ 单调递增。\n\n特殊性质 D：保证\n\n- 操作二不超过 $10$ 个；\n- 操作二的 $k$ 均为 $1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2024] 最长待机", "background": "", "description": "精灵程序员小 $\\omega$ 和 小 $\\aleph$ 拥有无限的寿命，因此在写代码之余，它们经常玩一些对抗游戏来打发时间。尽管如此，时间还是太多，于是它们发明了一款专用于消磨时间的游戏：最长待机。\n\n为了了解最长待机的规则，首先要了解精灵们使用的编程语言 Sleep++ 的规则：\n\n- 程序由 $n$ 个函数组成，第 $i(1 \\le i\\le n)$ 个函数具有种类 $e_i$ 和子函数编号序列 $Q_i = (Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i})$。$Q_i$ 可以为空，此时 $l_i$ 为 $0$。\n\n- $n$ 以及所有的 $e_i$ 和 $Q_i$ 可以由程序员任意给出，但它们需要满足以下所有条件：\n  - $n\\ge 1$；\n  - $\\forall 1 \\le i \\le n$，$e_i \\in \\{0, 1\\}$；\n  - $\\forall 1 \\le i \\le n$，$Q_i$ 中元素两两不同且均为 $[i + 1, n]$ 中的整数；\n  - $\\forall 2 \\le j \\le n$，**恰好有一个 $Q_i(1 \\le i \\le n)$ 包含了 $j$**。\n\n- **调用**函数 $i(1 \\le i \\le n)$ 时，按顺序执行如下操作：\n  - 若 $e_i = 0$，令变量 $r_i$ 为 $1$；否则程序员需要立即为 $r_i$ 输入一个**正整数值**。\n  - 若 $Q_i$ 为空，程序等待 $r_i$ 秒；否则重复以下操作 $r_i$ 次：\n    * 按顺序**调用**编号为 $Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i}$ 的函数。\n\n- 若一个种类为 $1$ 的函数 $j$ 被调用多次，则其每次调用都需要输入 $r_j$。\n\n- 我们认为，在函数调用中，除了“等待 $r$ 秒”之外的操作不消耗任何时间，即函数调用、运行和输入都在瞬间完成。因此，一个时刻内程序员可能输入多个数。\n\n可以证明，调用任意一个 Sleep++ 程序的任意一个函数，无论如何设定输入，消耗的时间总是有限的。\n\n“最长待机”的游戏规则如下：\n\n- 小 $\\omega$ 和 小 $\\aleph$ 准备好各自的 Sleep++ 程序并选择各自程序中的一个函数。它们互相知晓对方程序的结构以及选择的函数。\n\n- 在时刻 $0$，小 $\\omega$ 和 小 $\\aleph$ 同时调用自己选择的函数，游戏开始。\n\n- 在时刻 $t$（$t \\ge 0$），双方可以看到对方在时刻 $0$ 至 $(t - 1)$ 输入的所有数字，并相应调整自己在时刻 $t$ 输入的数字，但双方无法得知对方在时刻 $t$ 输入的数字。\n\n- 函数调用先结束的一方输掉游戏，另一方胜利。两个调用同时结束算作平局。\n\n小 $\\omega$ 和 小 $\\aleph$ 都是绝顶聪明的，在它们眼中，如果有一方存在必胜策略，那么这局游戏是不公平的。换言之，双方都不存在必胜策略的游戏是公平的。\n\n小 $\\omega$ 写了一个 $n$ 个函数的 Sleep++ 程序并进行了 $m$ 次操作，操作有以下两种：\n\n- 操作一：给出 $k$，将 $e_k$ 修改为 $(1 - e_k)$；\n- 操作二：给出 $k$，与小 $\\aleph$ 玩一局“最长待机”，开始时小 $\\omega$ 会调用自己的函数 $k$。\n\n小 $\\aleph$ 信奉极简主义，它希望对于每一局游戏设计出函数个数最少的程序，使得选择其中某个函数能让这局游戏是公平的。你能帮它求出最少所需的函数个数吗？\n\n可以证明，小 $\\aleph$ 总是能设计一个程序并选择其中一个函数，使得游戏是公平的。", "inputFormat": "输入的第一行包含两个正整数 $n,m$，表示小 $\\omega$ 的程序中函数的个数以及操作次数。\n\n接下来 $n$ 行，第 $i$ 行若干个整数，描述小 $\\omega$ 程序中的函数 $i$：\n\n- 前两个整数 $e_i, l_i$ 表示函数种类和子函数编号序列长度；\n- 接下来 $l_i$ 个整数 $Q_{i,1},Q_{i,2},\\cdots,Q_{i,l_i}$ 描述子函数编号序列。\n\n接下来 $m$ 行，第 $j$ 行两个整数 $o_j, k_j$ 描述一次操作，其中 $o_j = 1$ 表示操作一，$o_j = 2$ 表示操作二。", "outputFormat": "对于每个操作二输出一行一个整数，表示小 $\\aleph$ 的程序中最少所需的函数个数。", "hint": "**【样例 1 解释】**\n\n- 对于前两次游戏，小 $\\aleph$ 可以给出与小 $\\omega$ 完全一致的程序并在游戏开始时调用函数 $1$。可以证明不存在函数个数更少的方案。\n\n- 对于第三次游戏，小 $\\aleph$ 可以给出一个仅包含一个种类为 $1$ 的函数的程序，并在游戏开始时调用函数 $1$。\n  - 在时刻 $0$，小 $\\omega$ 输入其程序中的 $r_2$，小 $\\aleph$ 输入其程序中的 $r_1$。\n    * 注意：$r$ 变量在小 $\\omega$ 和小 $\\aleph$ 的程序之间是独立的，不会互相影响。\n  - 输入完成后，小 $\\omega$ 的程序在时刻 $(r_2 +1)$ 结束，小 $\\aleph$ 的程序在时刻 $r_1$ 结束。\n  - 由于两人在时刻 $0$ 互不知道对方的决策，不能保证 $(r_2 + 1)$ 和 $r_1$ 的大小关系，故双方均不存在必胜策略，这局游戏是公平的。\n\n**【样例 2】**\n\n见附件中的 `sleep2.in/ans`。\n\n该组数据满足特殊性质 AD。\n\n**【样例 3】**\n\n见附件中的 `sleep3.in/ans`。\n\n该组数据满足特殊性质 BD。\n\n**【样例 4】**\n\n见附件中的 `sleep4.in/ans`。\n\n该组数据满足特殊性质 D。\n\n**【样例 5】**\n\n见附件中的 `sleep5.in/ans`。\n\n该组数据满足特殊性质 C。\n\n**【子任务】**\n\n对于所有测试数据，\n\n- $1 \\le n \\le 5\\times 10^5$，$1 \\le m \\le 2\\times 10^5$；\n- $\\forall 1 \\le i \\le n$，$e_i\\in \\{0, 1\\}$，$0 \\le l_i <n$；\n- $\\forall 1 \\le i \\le n,1 \\le j \\le l_i$，$i < Q_{i,j} \\le n$；\n- $\\forall 1 \\le i \\le n, 1 \\le p < q \\le l_i$，$Q_{i,p}\\neq Q_{i,q}$；\n- $\\forall 2 \\le j \\le n$，恰好有一个 $Q_i(1 \\le i \\le n)$ 包含了 $j$；\n- $\\forall 1 \\le j \\le m$，$1 \\le o_j \\le 2$，$1 \\le k_j \\le n$。\n\n| 测试点编号 | $n \\le $ | $m\\le $| 特殊性质 |\n|:--:|:--:|:--:|:--:|\n| $1\\sim 2$ | $3$ | $24$ | 无 |\n| $3$ | $80$ | $400$ | AD |\n| $4$ | $80$ | $400$ | BD |\n| $5\\sim 6$ | $80$ | $400$ | D |\n| $7$ | $3\\times 10^5$ | $10^5$ | AD |\n| $8$ | $3\\times 10^5$ | $10^5$ | BD |\n| $9\\sim 10$ | $3\\times 10^5$ | $10^5$ | D |\n| $11$ | $3\\times 10^5$ | $10^5$ | A |\n| $12$ | $3\\times 10^5$ | $10^5$ | BC |\n| $13$ | $3\\times 10^5$ | $10^5$ | B |\n| $14\\sim 15$ | $3\\times 10^5$ | $10^5$ | C |\n| $16\\sim 17$ | $3\\times 10^5$ | $10^5$ | 无 |\n| $18\\sim 19$ | $5\\times 10^5$ | $2\\times 10^5$ | A |\n| $20$ | $5\\times 10^5$ | $2\\times 10^5$ | BC |\n| $21$ | $5\\times 10^5$ | $2\\times 10^5$ | B |\n| $22\\sim 23$ | $5\\times 10^5$ | $2\\times 10^5$ | C |\n| $24\\sim 25$ | $5\\times 10^5$ | $2\\times 10^5$ | 无 |\n\n特殊性质 A：保证\n\n- 任意时刻 $e_1$ 均为 $0$；\n- $\\forall 2\\le i \\le n$，$l_i \\le 1$；\n- 操作二的 $k$ 均为 $1$。\n\n特殊性质 B：保证\n\n- 操作二的 $k$ 满足当时的 $e_k$ 为 $1$。\n\n特殊性质 C：保证\n\n- $\\forall 2\\le i \\le n$，$i \\in Q_{\\lfloor \\frac{i}{2}\\rfloor}$；\n- $\\forall 1 \\le i \\le n$，序列 $Q_i$ 单调递增。\n\n特殊性质 D：保证\n\n- 操作二不超过 $10$ 个；\n- 操作二的 $k$ 均为 $1$。", "locale": "zh-CN"}}}
{"pid": "P10223", "type": "P", "difficulty": 2, "samples": [["3\n1 2 3\n50 10 20", "1. Kod01 (6)\n2. Kod03 (3)\n3. Kod02 (3)"], ["5\n5 2 4 1 3\n4 5 2 1 3", "1. Kod02 (9)\n2. Kod05 (8)\n3. Kod01 (6)\n4. Kod04 (4)\n5. Kod03 (3)"], ["7\n6 3 2 1 5 4 7\n200 56 11 0 13 105 12", "1. Kod06 (13)\n2. Kod01 (11)\n3. Kod02 (10)\n4. Kod03 (8)\n5. Kod05 (7)\n6. Kod07 (4)\n7. Kod04 (3)"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #3] Eurokod", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T1「[Eurokod](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Eurokod，全球美丽与高可读性代码竞赛，今年第一次举行！\n\n共有 $n$ 名参赛者参加了竞赛，他们被依次编号为 $1\\sim n$。每名参赛者已经编写了一份代码。\n\n他们的代码将由一组计算机科学家进行评估。这组计算机科学家分为组长与其他成员，组长将用一种方法给出评分，其他成员则用另一种方法给出评分。\n\n**组长评分：**\n\n组长按照他的想法，将代码按照美丽程度从大到小排序。最美丽的代码将获得 $n$ 分，其他代码依次比上一名少一分。\n\n**其他成员评分：**\n\n每名其他成员将投票选出自己认为最美丽的代码。在所有其他成员投票后，所有代码按照投票人数从高到低排序。得票数最多的代码将获得 $n$ 分，其他代码依次比上一名少一分。\n\n**总分：**\n\n一份代码的总分由组长评分与其他成员评分加和得到。\n\n你的任务是按照得分降序输出代码的编号。如果两份代码得分相同，其他成员评分高者列前。", "inputFormat": "第一行包含一个整数 $n$（$1 \\le n \\le 50$），表示参赛者的数目。\n\n第二行包含 $n$ 个整数 $a_i$（$1 \\le a_i \\le n$），第 $i$ 个整数表示组长评为第 $i$ 名代码的编号。按照美丽程度从高到低给出。保证 $1\\sim n$ 恰好出现一次。\n\n第三行包含 $n$ 个整数 $b_i$（$0 \\le b_i \\le 200$），第 $i$ 个整数表示第 $i$ 份代码收获的其他成员票数。保证没有两份代码获得了同样的票数。", "outputFormat": "输出 $n$ 行，按照分数降序输出代码编号。\n\n每一行的输出应当符合 `[rank]. Kod[label] ([number of points])` 的格式。其中，`[rank]` 表示代码的排名，`[label]` 是用含前导零的两位十位数表示的代码编号，`[number of points]` 是代码获得的总分。\n\n例如，$3$ 号代码以 $12$ 分总分获得第一名，那么你应该在第一行输出 `1. Kod03 (12)`。", "hint": "### 样例解释 1\n\nKod03 和 Kod02 得分相同，但 Kod03 从其他成员处获得了更高的分数，所以 Kod03 排名列前。\n\n### 样例解释 2\n\n组长给予 Kod05 最高的排名，它因此获得 $n=5$ 分。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n|:--:|:--:|:--:|\n| 1|17|对于每一份代码，其他成员投的票数与其他成员评分在数值上相同。同时，没有两份代码总分相同。|\n|2|19|没有两份代码总分相同。|\n|3|14|无特殊限制。|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #3] Eurokod", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T1「[Eurokod](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Eurokod，全球美丽与高可读性代码竞赛，今年第一次举行！\n\n共有 $n$ 名参赛者参加了竞赛，他们被依次编号为 $1\\sim n$。每名参赛者已经编写了一份代码。\n\n他们的代码将由一组计算机科学家进行评估。这组计算机科学家分为组长与其他成员，组长将用一种方法给出评分，其他成员则用另一种方法给出评分。\n\n**组长评分：**\n\n组长按照他的想法，将代码按照美丽程度从大到小排序。最美丽的代码将获得 $n$ 分，其他代码依次比上一名少一分。\n\n**其他成员评分：**\n\n每名其他成员将投票选出自己认为最美丽的代码。在所有其他成员投票后，所有代码按照投票人数从高到低排序。得票数最多的代码将获得 $n$ 分，其他代码依次比上一名少一分。\n\n**总分：**\n\n一份代码的总分由组长评分与其他成员评分加和得到。\n\n你的任务是按照得分降序输出代码的编号。如果两份代码得分相同，其他成员评分高者列前。", "inputFormat": "第一行包含一个整数 $n$（$1 \\le n \\le 50$），表示参赛者的数目。\n\n第二行包含 $n$ 个整数 $a_i$（$1 \\le a_i \\le n$），第 $i$ 个整数表示组长评为第 $i$ 名代码的编号。按照美丽程度从高到低给出。保证 $1\\sim n$ 恰好出现一次。\n\n第三行包含 $n$ 个整数 $b_i$（$0 \\le b_i \\le 200$），第 $i$ 个整数表示第 $i$ 份代码收获的其他成员票数。保证没有两份代码获得了同样的票数。", "outputFormat": "输出 $n$ 行，按照分数降序输出代码编号。\n\n每一行的输出应当符合 `[rank]. Kod[label] ([number of points])` 的格式。其中，`[rank]` 表示代码的排名，`[label]` 是用含前导零的两位十位数表示的代码编号，`[number of points]` 是代码获得的总分。\n\n例如，$3$ 号代码以 $12$ 分总分获得第一名，那么你应该在第一行输出 `1. Kod03 (12)`。", "hint": "### 样例解释 1\n\nKod03 和 Kod02 得分相同，但 Kod03 从其他成员处获得了更高的分数，所以 Kod03 排名列前。\n\n### 样例解释 2\n\n组长给予 Kod05 最高的排名，它因此获得 $n=5$ 分。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n|:--:|:--:|:--:|\n| 1|17|对于每一份代码，其他成员投的票数与其他成员评分在数值上相同。同时，没有两份代码总分相同。|\n|2|19|没有两份代码总分相同。|\n|3|14|无特殊限制。|", "locale": "zh-CN"}}}
{"pid": "P10224", "type": "P", "difficulty": 4, "samples": [["3 1\n3 7 0\n6 11 3\n10 13 5\n1", "6"], ["3 2\n5 10 3\n3 6 1\n1 5 0\n0 3", "5 8"], ["1 3\n3 3 3\n0 1 2", "0 1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #3] Vrsar", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T2「[Vrsar](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Vrsar 是一个由 $n$ 座小山丘组成的海滨小镇。惊人地，从海岸看去，$n$ 座山丘排成一列，第 $i$ 座山丘到海岸的距离为 $x_i$ 米。在每座山丘顶上各有一个溜冰场。所有溜冰场每天同时开放，但它们的关闭时间是不同的。第 $i$ 座溜冰场开放 $t_i$ 分钟。\n\nIva 和 Mia 已经来到了 Vrsar，他们将在这里停留 $m$ 天。Iva 和 Mia 热爱溜冰，他们希望在 Vrsar 停留的每一天都以溜冰度过。在第 $i$ 天的开始，他们距离海岸 $a_i$ 米。当滑雪场开放的同时，他们开始他们的溜冰之旅。他们需要走去滑雪场，走路的速度为每分钟 $1$ 米。\n\n他们的身体非常好，因此他们不需要额外时间来爬山。一旦他们到达山顶的滑雪场，他们可以滑任意长的时间，直到滑雪场关闭。然而，下山并不像上山一样容易，因为下雨，山路非常湿滑，他们需要消耗 $s_i$ 的时间走下第 $i$ 座山。从一座山上下来后，他们可以前往另一座山。\n\nIva 和 Mia 想知道每天他们最长可以滑多久的雪。每天他们可以访问任意多座滑雪场。因为他们想用尽可能多的时间滑雪，用尽可能少的时间计算，所以他们向你寻求帮助。帮助他们解决这个问题。\n\n请注意：如果 Iva 和 Mia 早晨出发的位置就有一座山，他们在山脚。\n", "inputFormat": "第一行包含两个整数 $n,m$（$1 \\le n,m \\le 10^5$），表示山的数量和天数。\n\n接下来 $n$ 行，第 $i$ 行包含三个整数 $x_i,t_i,s_i$（$0 \\le x_i,t_i,s_i \\le 10^9$），分别表示第 $i$ 座山到海岸的距离、滑雪场的关闭时间和下山所需的时间。\n\n第三行包含 $m$ 个整数 $a_i$（$1 \\le a_i \\le 10^9$），表示 Iva 和 Mia 第 $i$ 天出发时到海岸的距离。", "outputFormat": "输出一行 $m$ 个整数，第 $i$ 个整数表示第 $i$ 天 Iva 和 Mia 可以滑雪的最长时间。", "hint": "### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/swsv3bec.png)\n\nIva 和 Mia 在位置 $1$ 出发，走 $2$ 分钟到位置 $3$ 的山，并滑雪 $5$ 分钟。接着花费 $0$ 分钟时间下山，继续走 $3$ 分钟时间到位置 $6$ 山上的滑雪场，滑雪 $1$ 分钟。\n\n他们一共滑雪 $6$ 分钟。\n\n\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 8 | $n,m \\le 10$ |\n| 2 | 17 | $m=1,a_1=0$ |\n| 3 | 19 | $n,m \\le 1000$ |\n| 4 |  26 | 无特殊限制。|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #3] Vrsar", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T2「[Vrsar](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Vrsar 是一个由 $n$ 座小山丘组成的海滨小镇。惊人地，从海岸看去，$n$ 座山丘排成一列，第 $i$ 座山丘到海岸的距离为 $x_i$ 米。在每座山丘顶上各有一个溜冰场。所有溜冰场每天同时开放，但它们的关闭时间是不同的。第 $i$ 座溜冰场开放 $t_i$ 分钟。\n\nIva 和 Mia 已经来到了 Vrsar，他们将在这里停留 $m$ 天。Iva 和 Mia 热爱溜冰，他们希望在 Vrsar 停留的每一天都以溜冰度过。在第 $i$ 天的开始，他们距离海岸 $a_i$ 米。当滑雪场开放的同时，他们开始他们的溜冰之旅。他们需要走去滑雪场，走路的速度为每分钟 $1$ 米。\n\n他们的身体非常好，因此他们不需要额外时间来爬山。一旦他们到达山顶的滑雪场，他们可以滑任意长的时间，直到滑雪场关闭。然而，下山并不像上山一样容易，因为下雨，山路非常湿滑，他们需要消耗 $s_i$ 的时间走下第 $i$ 座山。从一座山上下来后，他们可以前往另一座山。\n\nIva 和 Mia 想知道每天他们最长可以滑多久的雪。每天他们可以访问任意多座滑雪场。因为他们想用尽可能多的时间滑雪，用尽可能少的时间计算，所以他们向你寻求帮助。帮助他们解决这个问题。\n\n请注意：如果 Iva 和 Mia 早晨出发的位置就有一座山，他们在山脚。\n", "inputFormat": "第一行包含两个整数 $n,m$（$1 \\le n,m \\le 10^5$），表示山的数量和天数。\n\n接下来 $n$ 行，第 $i$ 行包含三个整数 $x_i,t_i,s_i$（$0 \\le x_i,t_i,s_i \\le 10^9$），分别表示第 $i$ 座山到海岸的距离、滑雪场的关闭时间和下山所需的时间。\n\n第三行包含 $m$ 个整数 $a_i$（$1 \\le a_i \\le 10^9$），表示 Iva 和 Mia 第 $i$ 天出发时到海岸的距离。", "outputFormat": "输出一行 $m$ 个整数，第 $i$ 个整数表示第 $i$ 天 Iva 和 Mia 可以滑雪的最长时间。", "hint": "### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/swsv3bec.png)\n\nIva 和 Mia 在位置 $1$ 出发，走 $2$ 分钟到位置 $3$ 的山，并滑雪 $5$ 分钟。接着花费 $0$ 分钟时间下山，继续走 $3$ 分钟时间到位置 $6$ 山上的滑雪场，滑雪 $1$ 分钟。\n\n他们一共滑雪 $6$ 分钟。\n\n\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 8 | $n,m \\le 10$ |\n| 2 | 17 | $m=1,a_1=0$ |\n| 3 | 19 | $n,m \\le 1000$ |\n| 4 |  26 | 无特殊限制。|", "locale": "zh-CN"}}}
{"pid": "P10225", "type": "P", "difficulty": 3, "samples": [["5\n3 5 2 4 1\n3 2 5 1 4\n", "2\n"], ["5\n3 1 2 5 4\n4 2 3 1 5\n", "4\n"], ["3\n3 2 1\n1 2 3\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "二分", "2023", "COCI（克罗地亚）", "Dilworth 定理"], "title": "[COCI 2023/2024 #3] Milano C.le", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T3「[Milano C.le](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Silvia 目前在米兰中央车站，她注意到车站有很多站台。她觉得站台数量太多了，所以她打算统计有多少真正需要的站台。\n\nSilvia 同样注意到这个车站的一个有趣的事实：出发和到达时刻表每两天就会重复一次，并且时刻表满足所有 $n$ 列火车在一天到达车站，并且在另一天离开。注意按这种方式，没有火车会在所有火车都到达之前离开。\n\n车站的站台足够长，可以满足所有 $n$ 列火车都能在同一站台停成一列。然而，如果火车 $x$ 先进入站台，然后 $y$ 进入同一站台，则火车 $x$ 不可以在火车 $y$ 离开站台之前离开。\n\nSilvia 想知道在不存在由于排在某列火车前面的火车还没离开导致这列火车无法离开的情况下，最少需要多少站台可以使所有火车都停下。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 2\\cdot 10^5)$，表示火车的数量。\n\n第二行包含 $n$ 个整数 $a_i\\ (1\\le a_i\\le n,\\forall i\\neq j,a_i\\neq a_j)$，表示第 $i$ 列火车在第一天第 $a_i$ 个到达车站。序列 $(a_i)$ 是一个排列。\n\n第三行包含 $n$ 个整数 $b_i\\ (1\\le b_i\\le n,\\forall i\\neq j,b_i\\neq b_j)$，表示第 $i$ 列火车在第二天第 $b_i$ 个离开车站。序列 $(b_i)$ 是一个排列。", "outputFormat": "输出一行一个整数，表示最少需要多少个站台。", "hint": "### 样例解释 2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4ol0mhxg.png)\n\n上图展示了一个样例二中站台上可能的列车调度情况。列车上 $(i:a_i/b_i)$ 的标签表示第 $i$ 列火车在第一天第 $a_i$ 个到达车站，然后在第二天第 $b_i$ 个离开车站。火车 $(2:1/2)$ 不能比火车 $(4:5/1)$ 更早离开车站。\n\n### 样例解释 3\n\n所有火车均可在同一站台排成一列，没有任何问题。\n\n### 子任务\n\n| 子任务 |               附加限制               | 分值 |\n| :--------: | :----------------------------------: | :--: |\n|    $1$     |              $n\\le 10$               | $21$ |\n|    $2$     | 最小所需站台数要么是 $1$，要么是 $2$ | $18$ |\n|    $3$     |            $n\\le 1\\ 000$             | $31$ |\n|    $4$     |              无附加限制              | $40$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #3] Milano C.le", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T3「[Milano C.le](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Silvia 目前在米兰中央车站，她注意到车站有很多站台。她觉得站台数量太多了，所以她打算统计有多少真正需要的站台。\n\nSilvia 同样注意到这个车站的一个有趣的事实：出发和到达时刻表每两天就会重复一次，并且时刻表满足所有 $n$ 列火车在一天到达车站，并且在另一天离开。注意按这种方式，没有火车会在所有火车都到达之前离开。\n\n车站的站台足够长，可以满足所有 $n$ 列火车都能在同一站台停成一列。然而，如果火车 $x$ 先进入站台，然后 $y$ 进入同一站台，则火车 $x$ 不可以在火车 $y$ 离开站台之前离开。\n\nSilvia 想知道在不存在由于排在某列火车前面的火车还没离开导致这列火车无法离开的情况下，最少需要多少站台可以使所有火车都停下。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 2\\cdot 10^5)$，表示火车的数量。\n\n第二行包含 $n$ 个整数 $a_i\\ (1\\le a_i\\le n,\\forall i\\neq j,a_i\\neq a_j)$，表示第 $i$ 列火车在第一天第 $a_i$ 个到达车站。序列 $(a_i)$ 是一个排列。\n\n第三行包含 $n$ 个整数 $b_i\\ (1\\le b_i\\le n,\\forall i\\neq j,b_i\\neq b_j)$，表示第 $i$ 列火车在第二天第 $b_i$ 个离开车站。序列 $(b_i)$ 是一个排列。", "outputFormat": "输出一行一个整数，表示最少需要多少个站台。", "hint": "### 样例解释 2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4ol0mhxg.png)\n\n上图展示了一个样例二中站台上可能的列车调度情况。列车上 $(i:a_i/b_i)$ 的标签表示第 $i$ 列火车在第一天第 $a_i$ 个到达车站，然后在第二天第 $b_i$ 个离开车站。火车 $(2:1/2)$ 不能比火车 $(4:5/1)$ 更早离开车站。\n\n### 样例解释 3\n\n所有火车均可在同一站台排成一列，没有任何问题。\n\n### 子任务\n\n| 子任务 |               附加限制               | 分值 |\n| :--------: | :----------------------------------: | :--: |\n|    $1$     |              $n\\le 10$               | $21$ |\n|    $2$     | 最小所需站台数要么是 $1$，要么是 $2$ | $18$ |\n|    $3$     |            $n\\le 1\\ 000$             | $31$ |\n|    $4$     |              无附加限制              | $40$ |", "locale": "zh-CN"}}}
{"pid": "P10226", "type": "P", "difficulty": 6, "samples": [["3 1\n2\n3\n1 2\n1 3\n", "4\n1 1\n"], ["9 4\n2 3 4 6\n4 5 8 9\n1 2\n1 3\n3 4\n3 5\n5 6\n1 7\n7 8\n7 9\n", "18\n3 1 4 2 2 4 1 3\n"], ["10 5\n3 5 6 7 8\n1 2 4 9 10\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9\n9 10\n", "24\n4 4 5 5 3 3 2 2 1 1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #3] Restorani", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T4「[Restorani](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "来到塞格德，Malnar 先生像通常一样，必须了解当地文化，品尝所有传统餐点、特色美食和当地饮料。\n\n我们可以把塞格德想象成由 $n - 1$ 条双向道路连接的 $n$ 个景点，这些景点的编号从 $1$ 到 $n$。这样，每一对景点之间都有一条路径。令人惊奇的是，Malnar 先生走过每条道路正好需要一分钟。在景点行走的时间可以忽略不计。\n\nMalnar 先生有一份他想去的 $m$ 家餐厅的清单。它由 $m$ 个正整数组成，其中第 $i$ 个数表示第 $i$ 个餐厅在哪个景点附近。\n\n一个问题是 Malnar 先生在餐厅用餐后，必须马上去甜品店吃冰淇淋。另一个问题是，他拒绝两次光顾同一家甜品店。\n\n幸运的是他有备而来，因为他知道 $m$ 家甜品店，这些甜品店的位置是由 $m$ 个正整数组成的列表，其中第 $i$ 个数字代表第 $i$ 家甜品店在这个景点附近。\n\nMalnar 先生旅途劳累，不想走更多的路，因此他请你计算一下他需要走多少路，并提供去餐厅和甜品店的顺序，这样他就可以在没有帮助的情况下穿梭于餐厅和甜品店之间了。\n\nMalnar 先生目前在景点 $1$，并且必须在最后回到景点 $1$。", "inputFormat": "第一行包含整数 $n$ 和 $m\\ (1\\le m\\le n\\le 3\\cdot 10^5)$，分别表示景点个数和餐厅/甜品店个数。\n\n第二行包含 $m$ 个整数 $a_i\\ (1\\le a_i\\le n,\\forall i\\neq j,a_i\\neq a_j)$，表示餐厅清单。\n\n第二行包含 $m$ 个整数 $b_i\\ (1\\le b_i\\le n,\\forall i\\neq j,b_i\\neq b_j)$，表示甜品店清单。\n\n接下来 $n-1$ 行，每行两个整数 $x_i$ 和 $y_i\\ (1\\le x_i,y_i\\le n)$，表示景点 $x_i$ 和 $y_i$ 之间有一条道路。", "outputFormat": "第一行输出 $t$，表示 Malnar 先生为了去所有餐厅和甜品店，并最后返回景点 $1$ 的最短用时。\n\n第二行输出 $2m$ 个整数 $v_i$，表示去餐厅和甜品店的顺序。\n\n在奇数位置的数表示餐馆，这些数必须组成前 $m$ 个正整数的排列。在偶数位置的数表示甜品店，这些数也必须组成前 $m$ 个正整数的排列。\n\n按上述顺序去景点并返回开始位置所经历的时间必须为最短时间 $t$。\n\n如果有多个最优顺序，输出任意一个均可。", "hint": "### 样例解释 1\n\nMalnar 先生首先走一分钟前往唯一在景点 $2$ 的餐厅，然后走两分钟到唯一在景点 $3$ 的甜品店，然后花一分钟走回景点 $1$。Malnar 先生总共会花 $1+2+1=4$ 分钟。\n\n### 样例解释 2\n\nMalnar 先生按如下顺序去餐厅和甜品店：在景点 $4$ 的餐厅（$2$ 分钟），在景点 $4$ 的甜品店（$0$ 分钟），在景点 $6$ 的餐厅（$3$ 分钟），在景点 $5$ 的甜品店（$1$ 分钟），在景点 $3$ 的餐厅（$1$ 分钟），在景点 $9$ 的甜品店（$3$ 分钟），在景点 $2$ 的餐厅（$3$ 分钟），在景点 $8$ 的甜品店（$3$ 分钟）。在景点 $8$ 处的甜品店吃完冰淇淋后，他返回景点 $1$（$2$ 分钟）。Malnar 先生一共走了 $2+0+3+1+1+3+3+3+2=18$ 分钟。\n\n### 样例解释 3\n\nMalnar 先生按如下顺序去餐厅和甜品店：在景点 $7$ 的餐厅（$6$ 分钟），在景点 $9$ 的甜品店（$2$ 分钟），在景点 $8$ 的餐厅（$1$ 分钟），在景点 $10$ 的甜品店（$2$ 分钟），在景点 $6$ 的餐厅（$4$ 分钟），在景点 $4$ 的甜品店（$2$ 分钟），在景点 $5$ 的餐厅（$1$ 分钟），在景点 $2$ 的甜品店（$3$ 分钟），在景点 $3$ 的餐厅（$1$ 分钟），在景点 $1$ 的甜品店（$2$ 分钟）。在吃完最后的冰淇淋后，他已经在景点 $1$ 所以他不会移动。Malnar 先生一共走了 $24$ 分钟。\n\n### 子任务\n\n| 子任务编号 |                附加限制                | 分值 |\n| :--------: | :------------------------------------: | :--: |\n|    $1$     |         $n\\le 5\\ 000,m\\le 10$          | $18$ |\n|    $2$     | $\\forall i=1,\\ldots,n-1,x_i=i,y_i=i+1$ | $18$ |\n|    $3$     |             $n\\le 5\\ 000$              | $27$ |\n|    $4$     |               无附加限制               | $37$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #3] Restorani", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T4「[Restorani](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "来到塞格德，Malnar 先生像通常一样，必须了解当地文化，品尝所有传统餐点、特色美食和当地饮料。\n\n我们可以把塞格德想象成由 $n - 1$ 条双向道路连接的 $n$ 个景点，这些景点的编号从 $1$ 到 $n$。这样，每一对景点之间都有一条路径。令人惊奇的是，Malnar 先生走过每条道路正好需要一分钟。在景点行走的时间可以忽略不计。\n\nMalnar 先生有一份他想去的 $m$ 家餐厅的清单。它由 $m$ 个正整数组成，其中第 $i$ 个数表示第 $i$ 个餐厅在哪个景点附近。\n\n一个问题是 Malnar 先生在餐厅用餐后，必须马上去甜品店吃冰淇淋。另一个问题是，他拒绝两次光顾同一家甜品店。\n\n幸运的是他有备而来，因为他知道 $m$ 家甜品店，这些甜品店的位置是由 $m$ 个正整数组成的列表，其中第 $i$ 个数字代表第 $i$ 家甜品店在这个景点附近。\n\nMalnar 先生旅途劳累，不想走更多的路，因此他请你计算一下他需要走多少路，并提供去餐厅和甜品店的顺序，这样他就可以在没有帮助的情况下穿梭于餐厅和甜品店之间了。\n\nMalnar 先生目前在景点 $1$，并且必须在最后回到景点 $1$。", "inputFormat": "第一行包含整数 $n$ 和 $m\\ (1\\le m\\le n\\le 3\\cdot 10^5)$，分别表示景点个数和餐厅/甜品店个数。\n\n第二行包含 $m$ 个整数 $a_i\\ (1\\le a_i\\le n,\\forall i\\neq j,a_i\\neq a_j)$，表示餐厅清单。\n\n第二行包含 $m$ 个整数 $b_i\\ (1\\le b_i\\le n,\\forall i\\neq j,b_i\\neq b_j)$，表示甜品店清单。\n\n接下来 $n-1$ 行，每行两个整数 $x_i$ 和 $y_i\\ (1\\le x_i,y_i\\le n)$，表示景点 $x_i$ 和 $y_i$ 之间有一条道路。", "outputFormat": "第一行输出 $t$，表示 Malnar 先生为了去所有餐厅和甜品店，并最后返回景点 $1$ 的最短用时。\n\n第二行输出 $2m$ 个整数 $v_i$，表示去餐厅和甜品店的顺序。\n\n在奇数位置的数表示餐馆，这些数必须组成前 $m$ 个正整数的排列。在偶数位置的数表示甜品店，这些数也必须组成前 $m$ 个正整数的排列。\n\n按上述顺序去景点并返回开始位置所经历的时间必须为最短时间 $t$。\n\n如果有多个最优顺序，输出任意一个均可。", "hint": "### 样例解释 1\n\nMalnar 先生首先走一分钟前往唯一在景点 $2$ 的餐厅，然后走两分钟到唯一在景点 $3$ 的甜品店，然后花一分钟走回景点 $1$。Malnar 先生总共会花 $1+2+1=4$ 分钟。\n\n### 样例解释 2\n\nMalnar 先生按如下顺序去餐厅和甜品店：在景点 $4$ 的餐厅（$2$ 分钟），在景点 $4$ 的甜品店（$0$ 分钟），在景点 $6$ 的餐厅（$3$ 分钟），在景点 $5$ 的甜品店（$1$ 分钟），在景点 $3$ 的餐厅（$1$ 分钟），在景点 $9$ 的甜品店（$3$ 分钟），在景点 $2$ 的餐厅（$3$ 分钟），在景点 $8$ 的甜品店（$3$ 分钟）。在景点 $8$ 处的甜品店吃完冰淇淋后，他返回景点 $1$（$2$ 分钟）。Malnar 先生一共走了 $2+0+3+1+1+3+3+3+2=18$ 分钟。\n\n### 样例解释 3\n\nMalnar 先生按如下顺序去餐厅和甜品店：在景点 $7$ 的餐厅（$6$ 分钟），在景点 $9$ 的甜品店（$2$ 分钟），在景点 $8$ 的餐厅（$1$ 分钟），在景点 $10$ 的甜品店（$2$ 分钟），在景点 $6$ 的餐厅（$4$ 分钟），在景点 $4$ 的甜品店（$2$ 分钟），在景点 $5$ 的餐厅（$1$ 分钟），在景点 $2$ 的甜品店（$3$ 分钟），在景点 $3$ 的餐厅（$1$ 分钟），在景点 $1$ 的甜品店（$2$ 分钟）。在吃完最后的冰淇淋后，他已经在景点 $1$ 所以他不会移动。Malnar 先生一共走了 $24$ 分钟。\n\n### 子任务\n\n| 子任务编号 |                附加限制                | 分值 |\n| :--------: | :------------------------------------: | :--: |\n|    $1$     |         $n\\le 5\\ 000,m\\le 10$          | $18$ |\n|    $2$     | $\\forall i=1,\\ldots,n-1,x_i=i,y_i=i+1$ | $18$ |\n|    $3$     |             $n\\le 5\\ 000$              | $27$ |\n|    $4$     |               无附加限制               | $37$ |", "locale": "zh-CN"}}}
{"pid": "P10227", "type": "P", "difficulty": 5, "samples": [["2\n1\n2 1\n", "500000006\n2\n"], ["3\n1 1\n8 8 8\n", "14\n14\n14"], ["11\n1 1 1 2 3 4 1 2 6 2\n1 1000 5 3 18 200 8 9 0 2 2\n", "968750272\n610352580\n450521029\n536458466\n199219275\n662760680\n190972315\n90277951\n824219264\n941840425\n532552597\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #3] Slučajna Cesta", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T5「[Slučajna Cesta](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Vito 住在一个有 $n$ 个公园的城市，这些公园编号为 $1$ 到 $n$。这些公园被 $n-1$ 条道路相连，满足任意两公园之间都存在一条路径。每个公园均有一个美丽值，第 $i$ 个公园的美丽值为 $v_i$。\n\n昨晚 Vito 决定在城市中走走，在他游览完一个公园后，他会等概率随机选择一条路，并游览这条路通往的公园。但在出发前，他透过摩天大楼的窗户看到，每条路上都有一条蓝蛇或红蛇。蓝蛇会攻击所有从编号较小的公园前往编号较大的公园的人，红蛇会攻击所有从编号较大的公园前往编号较小的公园的人。由于 Vito 不想被蛇攻击，他决定改变计划，在随机选择道路时只考虑不会被蛇攻击的道路。因为他喜欢长距离行走，所以在至少有一条路他可以安全通过之前，他不会停下脚步。\n\n当 Vito 下楼时，他完全忘记了哪条路上有红蛇或蓝蛇，于是他想知道：「如果每条路上有蓝蛇或红蛇的概率相同，那么我从第 $i$ 个公园开始的路线的美感的期望是多少？」\n\n一条路线的美感是在这条路线上经过的公园的美丽值的和。路线美感的期望定义为对于所有可能的路线，路线的美感乘以 Vito 按这条路线走的概率的乘积之和。", "inputFormat": "第一行一个整数 $n\\ (2\\le n\\le 10^6)$，表示公园数量。\n\n第二行有 $n-1$ 个整数 $p_i\\ (1\\le p_i<i)$，表示第 $i+1$ 个公园和第 $p_i$ 个公园之间有一条道路。\n\n第三行 $n$ 个整数 $v_i\\ (0\\le v_i\\le 10^6)$，表示第 $i$ 个公园的美丽值。", "outputFormat": "第 $i$ 行输出 Vito 从第 $i$ 个公园开始的路线的美感的期望。如果这个值为 $\\frac{a}{b}$（$a,b$ 为整数），则输出 $ab^{-1} \\pmod{10^9+7}$，其中 $b^{-1}$ 是 $b$ 在模 $10^9+7$ 意义下的逆元。", "hint": "### 样例解释 1\n\n从第一个公园开始的路线的美感的期望是 $2.5\\pmod{10^9+7}=\\frac{5}{2}\\pmod{10^9+7}=5\\cdot 2^{-1}\\pmod{10^9+7}=5\\cdot 500000004\\pmod{10^9+7}=500000006\\pmod{10^9+7}$，从第二个公园开始的路线的美感的期望是 $2$。\n\n### 样例解释 2\n\n两条蛇都是红蛇的概率是 $\\frac{1}{4}$，这种情况下如果 Vito 从第一个公园出发，他会随机选择走哪条路。\n\n### 子任务\n\n| 子任务编号 |              附加限制              | 分值 |\n| :--------: | :--------------------------------: | :--: |\n|    $1$     |             $n\\le 10$              | $9$  |\n|    $2$     |           $n\\le 1\\ 000$            | $27$ |\n|    $3$     | 序列 $p_i$ 中没有值出现超过 $2$ 次 | $27$ |\n|    $4$     |             无附加限制             | $37$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #3] Slučajna Cesta", "background": "**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T5「[Slučajna Cesta](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**", "description": "Vito 住在一个有 $n$ 个公园的城市，这些公园编号为 $1$ 到 $n$。这些公园被 $n-1$ 条道路相连，满足任意两公园之间都存在一条路径。每个公园均有一个美丽值，第 $i$ 个公园的美丽值为 $v_i$。\n\n昨晚 Vito 决定在城市中走走，在他游览完一个公园后，他会等概率随机选择一条路，并游览这条路通往的公园。但在出发前，他透过摩天大楼的窗户看到，每条路上都有一条蓝蛇或红蛇。蓝蛇会攻击所有从编号较小的公园前往编号较大的公园的人，红蛇会攻击所有从编号较大的公园前往编号较小的公园的人。由于 Vito 不想被蛇攻击，他决定改变计划，在随机选择道路时只考虑不会被蛇攻击的道路。因为他喜欢长距离行走，所以在至少有一条路他可以安全通过之前，他不会停下脚步。\n\n当 Vito 下楼时，他完全忘记了哪条路上有红蛇或蓝蛇，于是他想知道：「如果每条路上有蓝蛇或红蛇的概率相同，那么我从第 $i$ 个公园开始的路线的美感的期望是多少？」\n\n一条路线的美感是在这条路线上经过的公园的美丽值的和。路线美感的期望定义为对于所有可能的路线，路线的美感乘以 Vito 按这条路线走的概率的乘积之和。", "inputFormat": "第一行一个整数 $n\\ (2\\le n\\le 10^6)$，表示公园数量。\n\n第二行有 $n-1$ 个整数 $p_i\\ (1\\le p_i<i)$，表示第 $i+1$ 个公园和第 $p_i$ 个公园之间有一条道路。\n\n第三行 $n$ 个整数 $v_i\\ (0\\le v_i\\le 10^6)$，表示第 $i$ 个公园的美丽值。", "outputFormat": "第 $i$ 行输出 Vito 从第 $i$ 个公园开始的路线的美感的期望。如果这个值为 $\\frac{a}{b}$（$a,b$ 为整数），则输出 $ab^{-1} \\pmod{10^9+7}$，其中 $b^{-1}$ 是 $b$ 在模 $10^9+7$ 意义下的逆元。", "hint": "### 样例解释 1\n\n从第一个公园开始的路线的美感的期望是 $2.5\\pmod{10^9+7}=\\frac{5}{2}\\pmod{10^9+7}=5\\cdot 2^{-1}\\pmod{10^9+7}=5\\cdot 500000004\\pmod{10^9+7}=500000006\\pmod{10^9+7}$，从第二个公园开始的路线的美感的期望是 $2$。\n\n### 样例解释 2\n\n两条蛇都是红蛇的概率是 $\\frac{1}{4}$，这种情况下如果 Vito 从第一个公园出发，他会随机选择走哪条路。\n\n### 子任务\n\n| 子任务编号 |              附加限制              | 分值 |\n| :--------: | :--------------------------------: | :--: |\n|    $1$     |             $n\\le 10$              | $9$  |\n|    $2$     |           $n\\le 1\\ 000$            | $27$ |\n|    $3$     | 序列 $p_i$ 中没有值出现超过 $2$ 次 | $27$ |\n|    $4$     |             无附加限制             | $37$ |", "locale": "zh-CN"}}}
{"pid": "P10228", "type": "P", "difficulty": 2, "samples": [["3\nbabylasagna\n10 11 12 13 14\n15 16 17 18 19\n20 21 22 23 24\n25 26 27 28 29\n30 31 32 33 34\nnataliebalmix\n10 20 30 40 50\n11 21 31 41 51\n12 22 32 42 52\n13 23 33 43 53\n14 24 34 44 54\nlettri\n89 88 87 86 10\n85 84 83 11 82\n81 80 12 79 78\n77 13 76 75 74\n14 73 72 71 70\n6\n10 11 12 13 14 15", "3\nbabylasagna\nnataliebalmix\nlettri"], ["1\nhoni\n1 2 3 4 5\n6 7 8 9 10\n11 12 13 14 15\n16 17 18 19 20\n21 22 23 24 25\n4\n1 2 49 50", "0"], ["4\nrim\n15 23 14 26 34\n12 11 13 16 17\n90 67 45 24 18\n85 82 77 66 22\n62 71 32 35 7\ntim\n61 89 25 63 12\n29 30 31 32 33\n11 17 42 24 18\n88 82 77 66 22\n44 71 54 35 7\ndagi\n15 23 14 26 34\n12 11 13 16 17\n90 67 45 24 18\n85 82 77 66 22\n62 71 36 35 7\ndim\n15 23 14 26 34\n12 11 13 16 17\n90 67 45 24 18\n85 82 77 66 22\n42 51 32 33 7\n7\n15 11 66 7 42 30 61", "1\ntim"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #4] Bingo", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T1「[Bingo](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "现在是游玩 Bingo 的时间！\n\n想要玩 Bingo 游戏，你需要一名游戏主持人和一个装有 90 个球的滚轮。滚轮中的球被编号为 $1\\sim 90$，每个数字编号写在恰好一个球上。\n\n在游戏开始前，主持人向 $n$ 名玩家每人发放一块 $5\\times 5$ 的格板，每格包含一个 $1$ 到 $90$ 范围内的整数。一块格板上的数字互不相同，每名玩家的格板互不相同。\n\n所有的玩家都拿到格板后，游戏开始。\n\n主持人开始从滚轮中取出球。取出编号为 $x_i$ 的球后，主持人向所有玩家宣布编号，并将球放到一边。所有玩家会检查自己的格板，如果格板上有取出的球的编号，他们会将这个数从格板上划去。\n\n当一名玩家划去了行、列、主对角线或从对角线上全部的 5 个数字，这名玩家将喊出 `Bingo!`。此时，游戏结束，这名玩家赢得游戏。\n\n为了让游戏更加有趣，主持人决定引入一条额外规则。在任何人被允许喊出 `Bingo!` 前，主持人将先取出 $m$ 个球。（即使玩家已经划去了连续的 5 个数，也必须等到 $m$ 个球取出后才能喊出 `Bingo!`）\n\n但是，当主持人取出第 $m$ 个球的瞬间，场上发生了一阵骚动！所有的玩家都喊出了 `Bingo!`。\n\n主持人不知道该相信谁。为了解决这个状况，他向你寻求帮助。请计算出 $m$ 个球被取出后，有多少玩家可以喊出 `Bingo!`。", "inputFormat": "输入的第一行为一个整数 $n$（$1 \\le n \\le 50$），表示玩家的数目。\n\n接下来 $n\\times 6$ 行：\n\n- 第一行包含一个长度不超过 $20$ 的字符串，仅由英文小写字母组成，表示玩家的姓名。没有两个玩家姓名相同。\n- 接下来 $5$ 行，每行包含 $5$ 个 $1\\sim90$ 的整数，描述了这名玩家的格板。每块格板上数字不同。\n\n接下来一行包含一个整数 $m$（$1 \\le m \\le 90$），表示主持人将取出的球的数目。\n\n接下来一行包含 $m$ 个 $1\\sim 90$ 范围内的整数，表示主持人从滚轮中取出的球的编号。每个数字最多出现一次。", "outputFormat": "第一行输出一个整数 $k$，表示可以喊出 `Bingo!` 的玩家数目。\n\n接下来 $k$ 行，输出他们的名字。按照输入的顺序输出。", "hint": "### 样例解释 1\n\n`babylasagna` 在第一行实现了 `Bingo!`。\n\n`nataliebalmix` 在第一列实现了 `Bingo!`。\n\n`lettri` 在左下角到右上角的从对角线实现了 `Bingo!`。\n\n### 样例解释 2\n\n只取出了 4 个球，没有人能划去 5 个数。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 12 | 只有一个玩家，也就是说，$n=1$ |\n| 2 | 22 | 最多只有一个玩家喊出 `Bingo!` |\n| 3 | 16 | 无额外限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #4] Bingo", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T1「[Bingo](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "现在是游玩 Bingo 的时间！\n\n想要玩 Bingo 游戏，你需要一名游戏主持人和一个装有 90 个球的滚轮。滚轮中的球被编号为 $1\\sim 90$，每个数字编号写在恰好一个球上。\n\n在游戏开始前，主持人向 $n$ 名玩家每人发放一块 $5\\times 5$ 的格板，每格包含一个 $1$ 到 $90$ 范围内的整数。一块格板上的数字互不相同，每名玩家的格板互不相同。\n\n所有的玩家都拿到格板后，游戏开始。\n\n主持人开始从滚轮中取出球。取出编号为 $x_i$ 的球后，主持人向所有玩家宣布编号，并将球放到一边。所有玩家会检查自己的格板，如果格板上有取出的球的编号，他们会将这个数从格板上划去。\n\n当一名玩家划去了行、列、主对角线或从对角线上全部的 5 个数字，这名玩家将喊出 `Bingo!`。此时，游戏结束，这名玩家赢得游戏。\n\n为了让游戏更加有趣，主持人决定引入一条额外规则。在任何人被允许喊出 `Bingo!` 前，主持人将先取出 $m$ 个球。（即使玩家已经划去了连续的 5 个数，也必须等到 $m$ 个球取出后才能喊出 `Bingo!`）\n\n但是，当主持人取出第 $m$ 个球的瞬间，场上发生了一阵骚动！所有的玩家都喊出了 `Bingo!`。\n\n主持人不知道该相信谁。为了解决这个状况，他向你寻求帮助。请计算出 $m$ 个球被取出后，有多少玩家可以喊出 `Bingo!`。", "inputFormat": "输入的第一行为一个整数 $n$（$1 \\le n \\le 50$），表示玩家的数目。\n\n接下来 $n\\times 6$ 行：\n\n- 第一行包含一个长度不超过 $20$ 的字符串，仅由英文小写字母组成，表示玩家的姓名。没有两个玩家姓名相同。\n- 接下来 $5$ 行，每行包含 $5$ 个 $1\\sim90$ 的整数，描述了这名玩家的格板。每块格板上数字不同。\n\n接下来一行包含一个整数 $m$（$1 \\le m \\le 90$），表示主持人将取出的球的数目。\n\n接下来一行包含 $m$ 个 $1\\sim 90$ 范围内的整数，表示主持人从滚轮中取出的球的编号。每个数字最多出现一次。", "outputFormat": "第一行输出一个整数 $k$，表示可以喊出 `Bingo!` 的玩家数目。\n\n接下来 $k$ 行，输出他们的名字。按照输入的顺序输出。", "hint": "### 样例解释 1\n\n`babylasagna` 在第一行实现了 `Bingo!`。\n\n`nataliebalmix` 在第一列实现了 `Bingo!`。\n\n`lettri` 在左下角到右上角的从对角线实现了 `Bingo!`。\n\n### 样例解释 2\n\n只取出了 4 个球，没有人能划去 5 个数。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 12 | 只有一个玩家，也就是说，$n=1$ |\n| 2 | 22 | 最多只有一个玩家喊出 `Bingo!` |\n| 3 | 16 | 无额外限制 |", "locale": "zh-CN"}}}
{"pid": "P10229", "type": "P", "difficulty": 2, "samples": [["3 5 2 1\n2 2 4", "6"], ["2 10 3 1\n3 3", "6"], ["4 10 3 2\n3 4 5 6", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2023", "前缀和", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #4] Knjige", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T2「[Knjige](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Marko 正在 Interliber 图书集市，他一共购买了 $n$ 本书，第 $i$ 本书的吸引力为 $k_i$。Marko 按照吸引力从左到右单调不减的方式，将所有的书放在了书架上。\n\nMarko 将要花费 $t$ 分钟阅读这些书，对于每一本书，他可以花费 $a$ 分钟完整阅读以获得灵感值，也可以花费 $b$ 分钟，只通过封面了解内容。\n\n他将从最左侧的书籍开始阅读，当他读完当前的书后（完整阅读或通过目录了解内容），他开始阅读紧靠右侧的下一本书。Marko 获得的灵感值与他完整阅读的书的吸引力之和相等。问 $t$ 分钟后，Marko 的灵感值最大是多少？\n\n注意：如果 Marko 开始阅读一本书，但是没有在第 $t$ 分钟结束前读完，这本书将不会对 Marko 的灵感值产生贡献。", "inputFormat": "输入的第一行包含四个整数 $n,t,a,b$（$1 \\le n \\le 2\\cdot 10^5$，$1 \\le t \\le 10^9$，$1\\le b < a \\le 10^9$），分别表示书的数目，Marko 阅读的时间，完整阅读和阅读封面所需要的时间。\n\n输入的第二行包含 $n$ 个整数 $k_i$（$1 \\le k_i \\le 10^9$，$k_i \\le k_{i+1}$），表示书的吸引力。", "outputFormat": "输出一行一个整数，表示 $t$ 分钟后 Marko 灵感最大值。", "hint": "### 样例解释 1\n\n例如，Marko 完整阅读第 $1,3$ 本书，阅读第 $2$ 本书的封面，可以达到灵感最大值。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 7 | 对于 $i=1,\\ldots,n-1$，$k_i=k_{i+1}$ |\n| 2 | 27 | $n \\le 1000$ |\n| 3 | 36 | 无额外限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #4] Knjige", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T2「[Knjige](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Marko 正在 Interliber 图书集市，他一共购买了 $n$ 本书，第 $i$ 本书的吸引力为 $k_i$。Marko 按照吸引力从左到右单调不减的方式，将所有的书放在了书架上。\n\nMarko 将要花费 $t$ 分钟阅读这些书，对于每一本书，他可以花费 $a$ 分钟完整阅读以获得灵感值，也可以花费 $b$ 分钟，只通过封面了解内容。\n\n他将从最左侧的书籍开始阅读，当他读完当前的书后（完整阅读或通过目录了解内容），他开始阅读紧靠右侧的下一本书。Marko 获得的灵感值与他完整阅读的书的吸引力之和相等。问 $t$ 分钟后，Marko 的灵感值最大是多少？\n\n注意：如果 Marko 开始阅读一本书，但是没有在第 $t$ 分钟结束前读完，这本书将不会对 Marko 的灵感值产生贡献。", "inputFormat": "输入的第一行包含四个整数 $n,t,a,b$（$1 \\le n \\le 2\\cdot 10^5$，$1 \\le t \\le 10^9$，$1\\le b < a \\le 10^9$），分别表示书的数目，Marko 阅读的时间，完整阅读和阅读封面所需要的时间。\n\n输入的第二行包含 $n$ 个整数 $k_i$（$1 \\le k_i \\le 10^9$，$k_i \\le k_{i+1}$），表示书的吸引力。", "outputFormat": "输出一行一个整数，表示 $t$ 分钟后 Marko 灵感最大值。", "hint": "### 样例解释 1\n\n例如，Marko 完整阅读第 $1,3$ 本书，阅读第 $2$ 本书的封面，可以达到灵感最大值。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 7 | 对于 $i=1,\\ldots,n-1$，$k_i=k_{i+1}$ |\n| 2 | 27 | $n \\le 1000$ |\n| 3 | 36 | 无额外限制 |", "locale": "zh-CN"}}}
{"pid": "P10230", "type": "P", "difficulty": 6, "samples": [["4 3\n1 3\n2 1\n1 1 3 2 4\n2 1\n", "0 1\n1 1\n"], ["5 4\n1 3\n3 5\n2 1\n2 2\n1 1 3 2 5\n2 2\n", "1 1\n2 1\n1 1\n"], ["9 3\n1 5\n1 7\n2 4\n2 5\n5 7\n7 9\n2 1\n1 2 5 1 4\n2 1\n", "4 12\n3 6\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树状数组", "2023", "图论建模", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #4] Lepeze", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T3「[Lepeze](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "小 Fran 收到了一个礼物——一个正多边形木制框架。由于多边形有 $n$ 个顶点，他还收到了 $\\frac{n(n-3)}{2}$ 根与每条对角线相匹配的木棍。多边形的顶点按逆时针顺序标记为 $1$ 到 $n$。一开始，弗兰将 $n-3$ 根木棍放在框架内，以使每根木棍接触框架的两个不相邻顶点，并且没有两根木棍相交。换句话说，他做了一个三角剖分。由于这对他来说不够有趣，他决定进行特定的操作来改变这种放置方法，该操作由两个步骤组成：\n\n1. 移除一根木棍。\n2. 添加一根新的木棍，使得我们得到一个新的三角剖分。\n\n我们用一个由无序对组成的有序对 $((a, b),(c, d))$ 来描述这个操作，表示小 Fran 移除了接触顶点 $a$ 和 $b$ 的木棍，并添加了接触顶点 $c$ 和 $d$ 的木棍。\n\n弗兰喜欢扇子，所以在进行这些操作时，他有时会问自己：「将这个三角剖分转换为以顶点 $x$ 为『扇形』三角剖分需要多少次操作，并且有多少种方式可以实现？」\n\n由于他忙于操作和娱乐，他请求你的帮助！\n\n以顶点 $x$ 为中心的「扇形」三角剖分是一种三角剖分，其中所有的对角线都有一个共同的端点，即顶点 $x$。\n\n设所需操作的数量为 $m$。设 $f_1,f_2,\\ldots ,f_m$ 是一个操作序列，满足按这一顺序操作可以实现满足条件的三角剖分。设 $s_1,s_2,\\ldots ,s_m$ 是另一种这样的序列。如果存在一个下标 $i$ 使得 $f_i\\neq s_i$，则两个序列是不同的。\n\n由于这样的序列数量可能非常大，小 Fran 只关心它对 $10^9 + 7$ 取模后的值。", "inputFormat": "第一行两个整数 $n$ 和 $q\\ (4\\le n\\le 2\\cdot 10^5,1\\le q\\le 2\\cdot 10^5)$，表示顶点数和事件数。\n\n接下来 $n-3$ 行，每行两个整数 $x_i,y_i\\ (1\\le x_i,y_i\\le n)$，表示第 $i$ 根木棍接触的两个顶点。\n\n接下来 $q$ 行，每行描述一个事件。第一个整数为 $t_i\\ (1\\le t_i\\le 2)$，表示事件类别。\n\n如果 $t_i=1$，则接下来还有四个整数 $a_i,b_i,c_i,d_i\\ (1\\le a_i,b_i,c_i,d_i\\le n)$，表示一次 $((a_i,b_i),(c_i,d_i))$ 操作。保证给出的操作可以实现。\n\n如果 $t_i=2$，则接下来一个整数 $x_i\\ (1\\le x_i\\le n)$，表示小 Fran 对与目前顶点 $x_i$​ 处的「扇形」三角剖分的数据感兴趣。", "outputFormat": "对于每个类型为 $2$ 的事件，按照它们在输入中的顺序，输出两个整数：所需的最小操作数和使用最小操作数达到目标三角剖分的方式数量。", "hint": "### 样例解释 1\n\n起始三角剖分已经是以顶点 $1$ 为中心的「扇形」三角剖分，所以小 Fran 不需要进行任何操作，有一种方式可以实现。在执行给定的操作后，将其恢复到先前状态只有一种方式，即进行操作 $((2, 4),(1, 3))$。\n\n### 样例解释 2\n\n第一个询问对应的唯一操作序列：$((3,5),(1,4))$。\n\n第二个询问对应的唯一操作序列：$((1,3),(2,5)),((3,5),(2,4))$。\n\n第三个询问对应的唯一操作序列：$((3,5),(2,4))$。\n\n### 子任务\n\n| 子任务编号 |                           附加限制                           | 分值 |\n| :--------: | :----------------------------------------------------------: | :--: |\n|    $1$     |                     $n\\le 9,q\\le 1\\ 000$                     | $12$ |\n|    $2$     | 对于所有 $i=1,\\ldots,n-3$，满足 $x_i=1,y_i=i+2$，且没有 $t_i=1$ 的事件 | $16$ |\n|    $3$     |                            $q=1$                             | $30$ |\n|    $4$     |                       $n,q\\le 1\\ 000$                        | $12$ |\n|    $5$     |                          无附加限制                          | $40$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #4] Lepeze", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T3「[Lepeze](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "小 Fran 收到了一个礼物——一个正多边形木制框架。由于多边形有 $n$ 个顶点，他还收到了 $\\frac{n(n-3)}{2}$ 根与每条对角线相匹配的木棍。多边形的顶点按逆时针顺序标记为 $1$ 到 $n$。一开始，弗兰将 $n-3$ 根木棍放在框架内，以使每根木棍接触框架的两个不相邻顶点，并且没有两根木棍相交。换句话说，他做了一个三角剖分。由于这对他来说不够有趣，他决定进行特定的操作来改变这种放置方法，该操作由两个步骤组成：\n\n1. 移除一根木棍。\n2. 添加一根新的木棍，使得我们得到一个新的三角剖分。\n\n我们用一个由无序对组成的有序对 $((a, b),(c, d))$ 来描述这个操作，表示小 Fran 移除了接触顶点 $a$ 和 $b$ 的木棍，并添加了接触顶点 $c$ 和 $d$ 的木棍。\n\n弗兰喜欢扇子，所以在进行这些操作时，他有时会问自己：「将这个三角剖分转换为以顶点 $x$ 为『扇形』三角剖分需要多少次操作，并且有多少种方式可以实现？」\n\n由于他忙于操作和娱乐，他请求你的帮助！\n\n以顶点 $x$ 为中心的「扇形」三角剖分是一种三角剖分，其中所有的对角线都有一个共同的端点，即顶点 $x$。\n\n设所需操作的数量为 $m$。设 $f_1,f_2,\\ldots ,f_m$ 是一个操作序列，满足按这一顺序操作可以实现满足条件的三角剖分。设 $s_1,s_2,\\ldots ,s_m$ 是另一种这样的序列。如果存在一个下标 $i$ 使得 $f_i\\neq s_i$，则两个序列是不同的。\n\n由于这样的序列数量可能非常大，小 Fran 只关心它对 $10^9 + 7$ 取模后的值。", "inputFormat": "第一行两个整数 $n$ 和 $q\\ (4\\le n\\le 2\\cdot 10^5,1\\le q\\le 2\\cdot 10^5)$，表示顶点数和事件数。\n\n接下来 $n-3$ 行，每行两个整数 $x_i,y_i\\ (1\\le x_i,y_i\\le n)$，表示第 $i$ 根木棍接触的两个顶点。\n\n接下来 $q$ 行，每行描述一个事件。第一个整数为 $t_i\\ (1\\le t_i\\le 2)$，表示事件类别。\n\n如果 $t_i=1$，则接下来还有四个整数 $a_i,b_i,c_i,d_i\\ (1\\le a_i,b_i,c_i,d_i\\le n)$，表示一次 $((a_i,b_i),(c_i,d_i))$ 操作。保证给出的操作可以实现。\n\n如果 $t_i=2$，则接下来一个整数 $x_i\\ (1\\le x_i\\le n)$，表示小 Fran 对与目前顶点 $x_i$​ 处的「扇形」三角剖分的数据感兴趣。", "outputFormat": "对于每个类型为 $2$ 的事件，按照它们在输入中的顺序，输出两个整数：所需的最小操作数和使用最小操作数达到目标三角剖分的方式数量。", "hint": "### 样例解释 1\n\n起始三角剖分已经是以顶点 $1$ 为中心的「扇形」三角剖分，所以小 Fran 不需要进行任何操作，有一种方式可以实现。在执行给定的操作后，将其恢复到先前状态只有一种方式，即进行操作 $((2, 4),(1, 3))$。\n\n### 样例解释 2\n\n第一个询问对应的唯一操作序列：$((3,5),(1,4))$。\n\n第二个询问对应的唯一操作序列：$((1,3),(2,5)),((3,5),(2,4))$。\n\n第三个询问对应的唯一操作序列：$((3,5),(2,4))$。\n\n### 子任务\n\n| 子任务编号 |                           附加限制                           | 分值 |\n| :--------: | :----------------------------------------------------------: | :--: |\n|    $1$     |                     $n\\le 9,q\\le 1\\ 000$                     | $12$ |\n|    $2$     | 对于所有 $i=1,\\ldots,n-3$，满足 $x_i=1,y_i=i+2$，且没有 $t_i=1$ 的事件 | $16$ |\n|    $3$     |                            $q=1$                             | $30$ |\n|    $4$     |                       $n,q\\le 1\\ 000$                        | $12$ |\n|    $5$     |                          无附加限制                          | $40$ |", "locale": "zh-CN"}}}
{"pid": "P10231", "type": "P", "difficulty": 6, "samples": [["7 6\n1 2\n1 3\n3 4\n3 5\n3 6\n5 7\n2 -1 -1 -1 -1 -1 3\n", "2\n4 6\n"], ["6 6\n1 2\n2 3\n3 4\n4 5\n5 6\n6 1\n2 -1 -1 1 -1 -1\n", "2\n3 5\n"], ["4 3\n1 2\n2 3\n3 4\n1 -1 -1 1\n", "0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "广度优先搜索 BFS", "COCI（克罗地亚）", "bitset"], "title": "[COCI 2023/2024 #4] Putovanje", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T4「[Putovanje](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Malnar 先生终于迎来了他的年假。他决定要去的国家可以表示为 $n$ 个城市和 $m$ 条双向连接它们的道路。每条道路的长度相同，并且可以通过这些道路从任何一个城市到达另一个城市。从城市 $a$ 到城市 $b$ 的路径被定义为一系列道路，满足从城市 $a$ 开始，按照该序列依次遍历道路，最终到达城市 $b$。路径的长度定义为该路径上的道路数量。\n\nMalnar 先生像以往一样预订了其中一个城市最贵的酒店，然后开始规划他的旅程。为了方便规划，他记录了从酒店到每个城市的最短路径长度。\n\n由于对他期待已久的假期感到兴奋，Malnar 先生完全忘记了酒店位于哪个城市。他当然不想错过这次旅行，所以他请你确定酒店可能位于哪些城市。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (1\\le n\\le 5\\cdot 10^4,n-1\\le m\\le 10^5)$，分别表示城市和道路的数量。\n\n接下来 $m$ 行，每行两个整数 $u_i,v_i\\ (1\\le u_i,v_i\\le n,u_i\\neq v_i)$，表示城市 $u_i$ 和 $v_i$ 之间有一条道路。任意两城市之间最多只有一条道路。\n\n最后一行有 $n$ 个整数，第 $i$ 个整数 $d_i\\ (-1\\le d_i<n)$ 表示从城市 $i$ 到酒店所在城市的路径长度，如果 Malnar 先生没有记录这个值，则为 $-1$。", "outputFormat": "第一行输出酒店可能位于多少个城市。\n\n第二行输出酒店可能位于的城市编号，**按升序输出**。", "hint": "### 样例解释 1\n\n从城市 $4$ 到城市 $1$ 的路径长度为 $2$，到城市 $7$ 的路径长度为 $3$。因此，城市 $4$ 满足两个条件，酒店可以位于那里。\n\n同样的情况也适用于城市 $6$。\n\n### 子任务\n\n| 子任务编号 |                     附加限制                     | 分值 |\n| :--------: | :----------------------------------------------: | :--: |\n|    $1$     | $m+1=n\\le 5\\ 000$，对于所有 $i$ 满足 $u_i+1=v_i$ | $10$  |\n|    $2$     |           对于所有 $i>1$ 满足 $d_i=-1$           | $20$ |\n|    $3$     |                 $n,m\\le 5\\ 000$                  | $35$ |\n|    $4$     |                    无附加限制                    | $45$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #4] Putovanje", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T4「[Putovanje](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Malnar 先生终于迎来了他的年假。他决定要去的国家可以表示为 $n$ 个城市和 $m$ 条双向连接它们的道路。每条道路的长度相同，并且可以通过这些道路从任何一个城市到达另一个城市。从城市 $a$ 到城市 $b$ 的路径被定义为一系列道路，满足从城市 $a$ 开始，按照该序列依次遍历道路，最终到达城市 $b$。路径的长度定义为该路径上的道路数量。\n\nMalnar 先生像以往一样预订了其中一个城市最贵的酒店，然后开始规划他的旅程。为了方便规划，他记录了从酒店到每个城市的最短路径长度。\n\n由于对他期待已久的假期感到兴奋，Malnar 先生完全忘记了酒店位于哪个城市。他当然不想错过这次旅行，所以他请你确定酒店可能位于哪些城市。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (1\\le n\\le 5\\cdot 10^4,n-1\\le m\\le 10^5)$，分别表示城市和道路的数量。\n\n接下来 $m$ 行，每行两个整数 $u_i,v_i\\ (1\\le u_i,v_i\\le n,u_i\\neq v_i)$，表示城市 $u_i$ 和 $v_i$ 之间有一条道路。任意两城市之间最多只有一条道路。\n\n最后一行有 $n$ 个整数，第 $i$ 个整数 $d_i\\ (-1\\le d_i<n)$ 表示从城市 $i$ 到酒店所在城市的路径长度，如果 Malnar 先生没有记录这个值，则为 $-1$。", "outputFormat": "第一行输出酒店可能位于多少个城市。\n\n第二行输出酒店可能位于的城市编号，**按升序输出**。", "hint": "### 样例解释 1\n\n从城市 $4$ 到城市 $1$ 的路径长度为 $2$，到城市 $7$ 的路径长度为 $3$。因此，城市 $4$ 满足两个条件，酒店可以位于那里。\n\n同样的情况也适用于城市 $6$。\n\n### 子任务\n\n| 子任务编号 |                     附加限制                     | 分值 |\n| :--------: | :----------------------------------------------: | :--: |\n|    $1$     | $m+1=n\\le 5\\ 000$，对于所有 $i$ 满足 $u_i+1=v_i$ | $10$  |\n|    $2$     |           对于所有 $i>1$ 满足 $d_i=-1$           | $20$ |\n|    $3$     |                 $n,m\\le 5\\ 000$                  | $35$ |\n|    $4$     |                    无附加限制                    | $45$ |\n", "locale": "zh-CN"}}}
{"pid": "P10232", "type": "P", "difficulty": 5, "samples": [["2 2 2\n1 1 L\n2 2 R\n5\n1 1 2 2\n2 1 1 2\n1 1 1 2\n2 1 1 1\n2 2 2 1\n", "-1\n1\n0\n0\n0\n"], ["3 3 4\n1 1 L\n1 3 L\n2 1 L\n3 3 L\n7\n1 1 3 3\n3 3 2 1\n3 1 2 2\n2 3 1 2\n2 3 3 1\n1 2 3 2\n3 3 2 2\n", "1\n2\n1\n1\n1\n0\n3\n"], ["4 4 8\n1 1 R\n1 3 L\n2 2 R\n2 4 L\n3 1 L\n3 3 L\n4 2 L\n4 4 L\n7\n1 2 1 4\n2 2 3 4\n4 4 3 2\n4 1 4 4\n4 2 3 1\n1 2 2 3\n2 4 2 3\n", "2\n1\n1\n0\n-1\n5\n0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2023", "最短路", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #4] Roboti", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T5「[Roboti](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Kile 是一个桌游爱好者，他最近发现了一个叫做 Robots 的游戏。这个游戏由一个 $n$ 行 $m$ 列的网格和一个机器人组成。位置 $(1, 1)$ 是棋盘的左上角，位置 $(n, m)$ 是右下角。\n\n开始时，机器人位于某个位置 $(x, y)$（第 $x$ 行，第 $y$ 列），玩家可以将其朝上下左右之一的方向进行移动。根据选择的方向，它将沿着该方向移动，直到到达目标格或网格中的特殊格。如果在任何时候机器人想要离开棋盘，它将翻折到另一侧。例如，如果它位于位置 $(n, 3)$ 并希望向下移动，它将到达位置 $(1, 3)$。\n\n棋盘上有三种类型的位置：\n\n- 空格：机器人朝相同的方向继续移动；\n- 左转格：当机器人进入此格时，它会左转 $90$ 度并继续移动；\n- 右转格：当机器人进入此格时，它会右转 $90$ 度并继续移动。\n\n网格中大部分位置都是空格，只有 $k$ 个位置是左转或右转格。\n\n游戏由 $q$ 轮组成。在第 $i$ 轮中，机器人将被放置在位置 $(a_i, b_i)$。目标是使用最少的转弯次数到达位置 $(c_i, d_i)$，或判定这是不可能的。\n\n在多次玩这个游戏后，Kile 意识到它比起初看起来要更具挑战性。这就是为什么他现在需要你的帮助。帮助他确定每一轮游戏所需的最小转弯次数！\n\n**注意**：如果机器人路径的起点或终点位于左转或右转格上，则该格不起作用。", "inputFormat": "第一行包含三个整数 $n,m,k\\ (1\\le n,m\\le 10^6,0\\le k\\le 10^5)$，分别表示行数，列数和网格中非空格的个数。\n\n接下来 $k$ 行，每行两个整数 $x_i,y_i\\ (1\\le x_i\\le n,1\\le y_i\\le m)$ 和一个字符 $s_i\\ (s_i\\in \\{\\texttt{L},\\texttt{R}\\})$，分别表示第 $i$ 个特殊格的位置和类别。如果 $s_i$ 是 `L`，则表示这是一个左转格。如果是 `R`，则表示这是一个右转格。\n\n接下来一行一个整数 $q\\ (1\\le q\\le 3\\cdot 10^5)$，表示游戏轮数。\n\n接下来 $q$ 行，每行四个整数 $a_i,b_i,c_i,d_i\\ (1\\le a_i,c_i\\le n,1\\le b_i,d_i\\le m)$，分别表示起始和目标位置。", "outputFormat": "输出 $q$ 行，第 $i$ 行输出第 $i$ 轮所需的最小转弯次数，如果无法到达目标，则输出 $-1$。", "hint": "### 样例解释 2\n\n第一轮：从 $(1, 1)$ 开始。如果初始机器人向左移动，它将在下一步到达 $(1, 3)$，因为它想要离开棋盘，所以会从另一侧进入。位置 $(1, 3)$ 是一个左转格，所以机器人将朝下方向移动。再经过两步，它将到达目标位置 $(3, 3)$​。\n\n第二轮：从 $(3, 3)$ 开始。如果初始机器人向上移动，它将在两步后到达 $(1, 3)$，在那里由于左转格而向左转。再经过两步，它将到达位置 $(1, 1)$，这也是一个左转格，所以它将向下移动。在下一步中，它将到达目标位置 $(2, 1)$。\n\n### 子任务\n\n| 子任务编号 |       附加限制       | 分值 |\n| :--------: | :------------------: | :--: |\n|    $1$     |        $k=0$         | $10$  |\n|    $2$     | $n,m\\le 300,q\\le 10$ | $13$ |\n|    $3$     |     $n,m\\le 300$     | $49$ |\n|    $4$     |      无附加限制      | $38$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #4] Roboti", "background": "**译自 [COCI 2023/2024 Contest #4](https://hsin.hr/coci/archive/2023_2024) T5「[Roboti](https://hsin.hr/coci/archive/2023_2024/contest4_tasks.pdf)」**", "description": "Kile 是一个桌游爱好者，他最近发现了一个叫做 Robots 的游戏。这个游戏由一个 $n$ 行 $m$ 列的网格和一个机器人组成。位置 $(1, 1)$ 是棋盘的左上角，位置 $(n, m)$ 是右下角。\n\n开始时，机器人位于某个位置 $(x, y)$（第 $x$ 行，第 $y$ 列），玩家可以将其朝上下左右之一的方向进行移动。根据选择的方向，它将沿着该方向移动，直到到达目标格或网格中的特殊格。如果在任何时候机器人想要离开棋盘，它将翻折到另一侧。例如，如果它位于位置 $(n, 3)$ 并希望向下移动，它将到达位置 $(1, 3)$。\n\n棋盘上有三种类型的位置：\n\n- 空格：机器人朝相同的方向继续移动；\n- 左转格：当机器人进入此格时，它会左转 $90$ 度并继续移动；\n- 右转格：当机器人进入此格时，它会右转 $90$ 度并继续移动。\n\n网格中大部分位置都是空格，只有 $k$ 个位置是左转或右转格。\n\n游戏由 $q$ 轮组成。在第 $i$ 轮中，机器人将被放置在位置 $(a_i, b_i)$。目标是使用最少的转弯次数到达位置 $(c_i, d_i)$，或判定这是不可能的。\n\n在多次玩这个游戏后，Kile 意识到它比起初看起来要更具挑战性。这就是为什么他现在需要你的帮助。帮助他确定每一轮游戏所需的最小转弯次数！\n\n**注意**：如果机器人路径的起点或终点位于左转或右转格上，则该格不起作用。", "inputFormat": "第一行包含三个整数 $n,m,k\\ (1\\le n,m\\le 10^6,0\\le k\\le 10^5)$，分别表示行数，列数和网格中非空格的个数。\n\n接下来 $k$ 行，每行两个整数 $x_i,y_i\\ (1\\le x_i\\le n,1\\le y_i\\le m)$ 和一个字符 $s_i\\ (s_i\\in \\{\\texttt{L},\\texttt{R}\\})$，分别表示第 $i$ 个特殊格的位置和类别。如果 $s_i$ 是 `L`，则表示这是一个左转格。如果是 `R`，则表示这是一个右转格。\n\n接下来一行一个整数 $q\\ (1\\le q\\le 3\\cdot 10^5)$，表示游戏轮数。\n\n接下来 $q$ 行，每行四个整数 $a_i,b_i,c_i,d_i\\ (1\\le a_i,c_i\\le n,1\\le b_i,d_i\\le m)$，分别表示起始和目标位置。", "outputFormat": "输出 $q$ 行，第 $i$ 行输出第 $i$ 轮所需的最小转弯次数，如果无法到达目标，则输出 $-1$。", "hint": "### 样例解释 2\n\n第一轮：从 $(1, 1)$ 开始。如果初始机器人向左移动，它将在下一步到达 $(1, 3)$，因为它想要离开棋盘，所以会从另一侧进入。位置 $(1, 3)$ 是一个左转格，所以机器人将朝下方向移动。再经过两步，它将到达目标位置 $(3, 3)$​。\n\n第二轮：从 $(3, 3)$ 开始。如果初始机器人向上移动，它将在两步后到达 $(1, 3)$，在那里由于左转格而向左转。再经过两步，它将到达位置 $(1, 1)$，这也是一个左转格，所以它将向下移动。在下一步中，它将到达目标位置 $(2, 1)$。\n\n### 子任务\n\n| 子任务编号 |       附加限制       | 分值 |\n| :--------: | :------------------: | :--: |\n|    $1$     |        $k=0$         | $10$  |\n|    $2$     | $n,m\\le 300,q\\le 10$ | $13$ |\n|    $3$     |     $n,m\\le 300$     | $49$ |\n|    $4$     |      无附加限制      | $38$ |", "locale": "zh-CN"}}}
{"pid": "P10233", "type": "P", "difficulty": 2, "samples": [["2\nPpGgm\n2\n1 5\n4 5\nPPppGGgm\n5\n1 2\n3 4\n5 6\n7 7\n8 8", "6\n0\n6\n4\n2\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "前缀和", "差分", "洛谷月赛"], "title": "[yLCPC2024] A. dx 分计算", "background": "你说的对，但舞萌 DX 是一款由 SEGA 开发，华立科技代理，形似洗衣机的街机音乐游戏。\n\n只要看准时机拍到所有的音符就好啦！", "description": "在舞萌 DX 中，每个音符根据完成击打的时刻，会得到如下五种判定：\n\n- `Critical Perfect`：简记为 `P`，可得 $3$ 分 dx 分。\n- `Perfect`：简记为 `p`，可得 $2$ 分 dx 分。\n- `Great`：简记为 `G`，可得 $1$ 分 dx 分。\n- `Good`：简记为 `g`，不能得到 dx 分。\n- `Miss`：简记为 `m`，不能得到 dx 分。\n\n扶苏游玩了一局舞萌 DX，她将她各个音符的判定情况按顺序使用上面的简记规则记为了一个字符串 $s$。规定这个字符串最左边的字符表示第一个音符的判定结果，最右边的字符表示第 $|s|$ 个音符的判定结果，这里 $|s|$ 表示字符串 $|s|$ 的长度，也即整首歌的音符数。\n\n现在，扶苏有 $q$ 次询问，每次询问会给出两个整数 $l, r$，对每个询问你需要回答：这首歌的第 $l$ 个音符到第 $r$ 个音符（包含第 $l$ 个和第 $r$ 个）的判定结果共能得到多少 dx 分数？\n\n乐曲一段区间内的音符得到的 dx 分数是这些音符分别能得到的 dx 分数之和。", "inputFormat": "**本题单个测试点内有多组测试数据**，输入的第一行是一个正整数，表示数据组数 $T$。对每组测试数据：\n\n第一行是一个字符串 $s$（$1 \\leq |s| \\leq 10^7$），表示一首歌各个音符的判定结果。保证 $s$ 中只含字符 `P`，`p`，`G`，`g`，`m`。  \n第二行有一个整数 $q$（$1 \\leq q \\leq 10^4$），表示询问的数量。  \n接下来 $q$ 行，每行两个整数 $l, r$（$1 \\leq l \\leq r \\leq |s|$），表示一组询问。\n\n数据保证单个测试点内 $s$ 的长度之和不超过 $10^7$，$q$ 之和不超过 $10^4$。", "outputFormat": "对每组测试数据，按询问的顺序依次给出每个询问的答案。每个询问输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] A. dx 分计算", "background": "你说的对，但舞萌 DX 是一款由 SEGA 开发，华立科技代理，形似洗衣机的街机音乐游戏。\n\n只要看准时机拍到所有的音符就好啦！", "description": "在舞萌 DX 中，每个音符根据完成击打的时刻，会得到如下五种判定：\n\n- `Critical Perfect`：简记为 `P`，可得 $3$ 分 dx 分。\n- `Perfect`：简记为 `p`，可得 $2$ 分 dx 分。\n- `Great`：简记为 `G`，可得 $1$ 分 dx 分。\n- `Good`：简记为 `g`，不能得到 dx 分。\n- `Miss`：简记为 `m`，不能得到 dx 分。\n\n扶苏游玩了一局舞萌 DX，她将她各个音符的判定情况按顺序使用上面的简记规则记为了一个字符串 $s$。规定这个字符串最左边的字符表示第一个音符的判定结果，最右边的字符表示第 $|s|$ 个音符的判定结果，这里 $|s|$ 表示字符串 $|s|$ 的长度，也即整首歌的音符数。\n\n现在，扶苏有 $q$ 次询问，每次询问会给出两个整数 $l, r$，对每个询问你需要回答：这首歌的第 $l$ 个音符到第 $r$ 个音符（包含第 $l$ 个和第 $r$ 个）的判定结果共能得到多少 dx 分数？\n\n乐曲一段区间内的音符得到的 dx 分数是这些音符分别能得到的 dx 分数之和。", "inputFormat": "**本题单个测试点内有多组测试数据**，输入的第一行是一个正整数，表示数据组数 $T$。对每组测试数据：\n\n第一行是一个字符串 $s$（$1 \\leq |s| \\leq 10^7$），表示一首歌各个音符的判定结果。保证 $s$ 中只含字符 `P`，`p`，`G`，`g`，`m`。  \n第二行有一个整数 $q$（$1 \\leq q \\leq 10^4$），表示询问的数量。  \n接下来 $q$ 行，每行两个整数 $l, r$（$1 \\leq l \\leq r \\leq |s|$），表示一组询问。\n\n数据保证单个测试点内 $s$ 的长度之和不超过 $10^7$，$q$ 之和不超过 $10^4$。", "outputFormat": "对每组测试数据，按询问的顺序依次给出每个询问的答案。每个询问输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10234", "type": "P", "difficulty": 3, "samples": [["2\n2 2\n01\n11\n2 2\n01\n10", "-1\n2\nRD"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "广度优先搜索 BFS", "洛谷月赛"], "title": "[yLCPC2024] B. 找机厅", "background": "扶苏正在出发去打 mai！\n\n但是商场内部实在太复杂了，她在里面迷路了。已经在地铁站迷路过一次的扶苏看着商场的地图实在是不懂怎么走，你能帮帮她吗？", "description": "给定一个 $n$ 行 $m$ 列的 $01$ 矩阵，记矩阵第 $i$ 行第 $j$ 列的格子是 $(i, j)$（$1 \\leq i \\leq n$，$1 \\leq j \\leq m$）。\n\n你要从矩阵的左上角出发到达右下角。行走规则如下：\n\n- 如果你在格子 $(i, j)$，你下一步只能走到：$(i - 1, j)$、$(i + 1, j)$、$(i, j - 1)$、$(i, j + 1)$ 四个格子的其中之一。\n- 任意时刻你不能走出这个矩阵，即你的位置 $(i, j)$ 必须时刻满足 $1 \\leq i \\leq n$，$1 \\leq j \\leq m$。\n- 如果你想从一个格子走到另一个格子，除了满足上述的要求外，还必须保证：这两个格子对应的数字不同。即：写着 $0$ 的格子只能走到写着 $1$ 的格子，反之亦然。\n\n你每走一步就需要花费一个单位的时间。你需要用最短的时间从 $(1, 1)$ 到达 $(n, m)$。除了给出最短时间外，你还必须给出一种可行的最短用时的行走方法。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n, m$（$1 \\leq n, m \\leq 2 \\times 10^3$），表示矩阵的行数和列数。  \n接下来 $n$ 行，每行一个长度为 $m$ 的仅含字符 `0` `1` 的字符串，表示这个矩阵。\n\n数据保证每组数据内的 $n$ 之和、$m$ 之和均不超过 $2 \\times 10^3$。", "outputFormat": "对每组数据，输出一行或两行：\n\n如果从 $(1, 1)$ 无法到达 $(n, m)$，输出一行一个 $-1$ 表示无解。\n\n否则按如下规则输出：\n\n- 第一行输出一个整数 $t$，表示从左上角走到右下角的最短用时。\n- 第二行输出一个长度为 $t$ 的仅含字符 `L` `R` `U` `D` 的字符串 $s$，表示你给出的行走方法：\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i - 1, j)$，则 $s_i = \\texttt{U}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i + 1, j)$，则 $s_i = \\texttt{D}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i, j-1)$，则 $s_i = \\texttt{L}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i, j + 1)$，则 $s_i = \\texttt{R}$。\n\n你第二行输出的字符串长度必须恰好为第一行给出的最短用时 $t$。如果有多种方案符合要求，你可以输出任意一种。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] B. 找机厅", "background": "扶苏正在出发去打 mai！\n\n但是商场内部实在太复杂了，她在里面迷路了。已经在地铁站迷路过一次的扶苏看着商场的地图实在是不懂怎么走，你能帮帮她吗？", "description": "给定一个 $n$ 行 $m$ 列的 $01$ 矩阵，记矩阵第 $i$ 行第 $j$ 列的格子是 $(i, j)$（$1 \\leq i \\leq n$，$1 \\leq j \\leq m$）。\n\n你要从矩阵的左上角出发到达右下角。行走规则如下：\n\n- 如果你在格子 $(i, j)$，你下一步只能走到：$(i - 1, j)$、$(i + 1, j)$、$(i, j - 1)$、$(i, j + 1)$ 四个格子的其中之一。\n- 任意时刻你不能走出这个矩阵，即你的位置 $(i, j)$ 必须时刻满足 $1 \\leq i \\leq n$，$1 \\leq j \\leq m$。\n- 如果你想从一个格子走到另一个格子，除了满足上述的要求外，还必须保证：这两个格子对应的数字不同。即：写着 $0$ 的格子只能走到写着 $1$ 的格子，反之亦然。\n\n你每走一步就需要花费一个单位的时间。你需要用最短的时间从 $(1, 1)$ 到达 $(n, m)$。除了给出最短时间外，你还必须给出一种可行的最短用时的行走方法。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n, m$（$1 \\leq n, m \\leq 2 \\times 10^3$），表示矩阵的行数和列数。  \n接下来 $n$ 行，每行一个长度为 $m$ 的仅含字符 `0` `1` 的字符串，表示这个矩阵。\n\n数据保证每组数据内的 $n$ 之和、$m$ 之和均不超过 $2 \\times 10^3$。", "outputFormat": "对每组数据，输出一行或两行：\n\n如果从 $(1, 1)$ 无法到达 $(n, m)$，输出一行一个 $-1$ 表示无解。\n\n否则按如下规则输出：\n\n- 第一行输出一个整数 $t$，表示从左上角走到右下角的最短用时。\n- 第二行输出一个长度为 $t$ 的仅含字符 `L` `R` `U` `D` 的字符串 $s$，表示你给出的行走方法：\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i - 1, j)$，则 $s_i = \\texttt{U}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i + 1, j)$，则 $s_i = \\texttt{D}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i, j-1)$，则 $s_i = \\texttt{L}$。\n  + 如果给出的行走方法第 $i$ 次移动是从 $(i, j)$ 走向 $(i, j + 1)$，则 $s_i = \\texttt{R}$。\n\n你第二行输出的字符串长度必须恰好为第一行给出的最短用时 $t$。如果有多种方案符合要求，你可以输出任意一种。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10235", "type": "P", "difficulty": 4, "samples": [["2\n5 2\n1 3 2 5 4\n8 2\n4 2 3 6 7 1 8 5", "1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "树状数组", "洛谷原创", "洛谷月赛"], "title": "[yLCPC2024] C. 舞萌基本练习", "background": "", "description": "扶苏在游玩舞萌 dx 的过程中，发现一首歌可以分成不超过 $k$ 段分别进行练习。\n\n具体来说，这首歌共有 $n$ 个音符，每个音符有一个难度值。第 $i$ 个音符的难度值为 $a_i$。扶苏觉得一段歌曲的音符的难度应该是尽可能变难的。因此对于音符序列的一个区间 $[l, r]$，她认为这段区间的『不优美度』是这段区间的**逆序对**数。\n\n一个区间 $[l, r]$ 的**逆序对数**被定义为满足 $l \\leq i < j \\leq r$ 且 $a_i > a_j$ 的数对 $(i, j)$ 个数。\n\n扶苏希望把这首歌划分成不超过 $k$ 个子段，满足每个音符都至少属于一个子段，使得不优美度最大的段的不优美度尽可能小。\n\n形式化的，你需要划分出 $t \\leq k$ 个区间 $[l_1, r_1], [l_2, r_2], \\dots [l_t, r_t]$，满足：\n\n- $l_1 = 1$，$r_t = n$。\n- 对 $1 \\leq i < t$，$r_i + 1= l_{i + 1}$。\n- 对 $1 \\leq i \\leq t$，$l_i \\leq r_i$。\n\n定义 $f(l, r)$ 表示区间 $[l, r]$ 的不优美度，最小化 $\\max\\limits_{i = 1}^t f(l_i, r_i)$", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n,k$（$1 \\leq k \\leq n \\leq 10^5$），表示歌曲的音符数和最多的划分段数。  \n第二行有 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$-10^9 \\leq a_i \\leq 10^9$），表示每个音符的难度。\n\n数据保证单个测试点内的 $n$ 之和不超过 $10^5$。", "outputFormat": "对每组数据，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] C. 舞萌基本练习", "background": "", "description": "扶苏在游玩舞萌 dx 的过程中，发现一首歌可以分成不超过 $k$ 段分别进行练习。\n\n具体来说，这首歌共有 $n$ 个音符，每个音符有一个难度值。第 $i$ 个音符的难度值为 $a_i$。扶苏觉得一段歌曲的音符的难度应该是尽可能变难的。因此对于音符序列的一个区间 $[l, r]$，她认为这段区间的『不优美度』是这段区间的**逆序对**数。\n\n一个区间 $[l, r]$ 的**逆序对数**被定义为满足 $l \\leq i < j \\leq r$ 且 $a_i > a_j$ 的数对 $(i, j)$ 个数。\n\n扶苏希望把这首歌划分成不超过 $k$ 个子段，满足每个音符都至少属于一个子段，使得不优美度最大的段的不优美度尽可能小。\n\n形式化的，你需要划分出 $t \\leq k$ 个区间 $[l_1, r_1], [l_2, r_2], \\dots [l_t, r_t]$，满足：\n\n- $l_1 = 1$，$r_t = n$。\n- 对 $1 \\leq i < t$，$r_i + 1= l_{i + 1}$。\n- 对 $1 \\leq i \\leq t$，$l_i \\leq r_i$。\n\n定义 $f(l, r)$ 表示区间 $[l, r]$ 的不优美度，最小化 $\\max\\limits_{i = 1}^t f(l_i, r_i)$", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n,k$（$1 \\leq k \\leq n \\leq 10^5$），表示歌曲的音符数和最多的划分段数。  \n第二行有 $n$ 个整数 $a_1, a_2, \\dots, a_n$（$-10^9 \\leq a_i \\leq 10^9$），表示每个音符的难度。\n\n数据保证单个测试点内的 $n$ 之和不超过 $10^5$。", "outputFormat": "对每组数据，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10236", "type": "P", "difficulty": 4, "samples": [["2\n5\n5 3 1 4 2\n6\n6 5 1 4 2 3", "1168\n15655"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "区间 DP", "洛谷月赛"], "title": "[yLCPC2024] D. 排卡", "background": "经过千辛万苦，扶苏终于到达了机厅。但是她很快发现机厅排起了大 b 队 ~~（不是省选的 B 队）~~。\n\n舞萌玩家们在人多的时候经常采取排卡的方式决定谁下一个上机。因为人实在是太多了，他们在排卡的时候，便注意到了卡上的编号。\n\n他们向扶苏提了一个问题，你能解决吗？", "description": "扶苏有一个双端队列 $a$。这个队列与计算机科学中队列的概念类似，不同的是，这个队列既可以从队列头读取和弹出元素，也可以在队列尾部读取和弹出元素，因此被称为『双端队列』。\n\n这个队列中有 $n$ 个数。扶苏将通过 $n$ 次操作构造一个长度为 $n$ 的序列 $b$，第 $i$（$1 \\leq i \\leq n$）次操作会可以进行如下两个过程之一：\n\n1. 令 $b_i$ 为 $a$ 的队列头，并在 $a$ 的头部弹出一个元素。\n2. 令 $b_i$ 为 $a$ 的队列尾，并在 $a$ 的尾部弹出一个元素。\n\n我们定义一个数对 $(i, j)$ 的得分为：\n\n$$\\mathrm{score}(i,j) = i^j \\bmod 998244353$$\n\n即 $i$ 的 $j$ 次幂对 $998244353$ 取余数的结果。特别的，在本题中我们规定 $0^0 = 0$。\n\n现在，扶苏想用最优的策略构造 $b$ 序列，最大化如下式子的值：\n\n$$\\sum_{i = 1}^{n - 1} \\mathrm{score}(b_i, b_{i + 1})$$\n\n即 $b$ 所有相邻两项按原顺序计算的得分之和。\n\n注意，我们仅在计算一个数对的时候将得分对 $998,244,353$ 取模，在计算求和时不再将这个和取余。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数，表示数据组数 $T$。对每组数据：\n\n第一行是一个整数 $n$（$2 \\leq n \\leq 10^3$），表示序列的长度。  \n第二行有 $n$ 个整数 $a_1, a_2, \\dots a_n$（$0 \\leq a_i < 998,244,353$），按从头到尾的顺序表示队列 $a$ 里每个数字的值。\n\n数据保证单个测试点内 $n$ 的和不超过 $10^3$。", "outputFormat": "对每组测试数据，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] D. 排卡", "background": "经过千辛万苦，扶苏终于到达了机厅。但是她很快发现机厅排起了大 b 队 ~~（不是省选的 B 队）~~。\n\n舞萌玩家们在人多的时候经常采取排卡的方式决定谁下一个上机。因为人实在是太多了，他们在排卡的时候，便注意到了卡上的编号。\n\n他们向扶苏提了一个问题，你能解决吗？", "description": "扶苏有一个双端队列 $a$。这个队列与计算机科学中队列的概念类似，不同的是，这个队列既可以从队列头读取和弹出元素，也可以在队列尾部读取和弹出元素，因此被称为『双端队列』。\n\n这个队列中有 $n$ 个数。扶苏将通过 $n$ 次操作构造一个长度为 $n$ 的序列 $b$，第 $i$（$1 \\leq i \\leq n$）次操作会可以进行如下两个过程之一：\n\n1. 令 $b_i$ 为 $a$ 的队列头，并在 $a$ 的头部弹出一个元素。\n2. 令 $b_i$ 为 $a$ 的队列尾，并在 $a$ 的尾部弹出一个元素。\n\n我们定义一个数对 $(i, j)$ 的得分为：\n\n$$\\mathrm{score}(i,j) = i^j \\bmod 998244353$$\n\n即 $i$ 的 $j$ 次幂对 $998244353$ 取余数的结果。特别的，在本题中我们规定 $0^0 = 0$。\n\n现在，扶苏想用最优的策略构造 $b$ 序列，最大化如下式子的值：\n\n$$\\sum_{i = 1}^{n - 1} \\mathrm{score}(b_i, b_{i + 1})$$\n\n即 $b$ 所有相邻两项按原顺序计算的得分之和。\n\n注意，我们仅在计算一个数对的时候将得分对 $998,244,353$ 取模，在计算求和时不再将这个和取余。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数，表示数据组数 $T$。对每组数据：\n\n第一行是一个整数 $n$（$2 \\leq n \\leq 10^3$），表示序列的长度。  \n第二行有 $n$ 个整数 $a_1, a_2, \\dots a_n$（$0 \\leq a_i < 998,244,353$），按从头到尾的顺序表示队列 $a$ 里每个数字的值。\n\n数据保证单个测试点内 $n$ 的和不超过 $10^3$。", "outputFormat": "对每组测试数据，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10237", "type": "P", "difficulty": 4, "samples": [["1\n3 3\n1 1\n2 2 3\n3 4 5 6\n1 2\n1 3\n2 3", "2\n4\n4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "二分", "洛谷原创", "洛谷月赛"], "title": "[yLCPC2024] E. Latent Kindom", "background": "扶苏和 10circle 老师正在拼机游玩最新最热歌曲 Latent Kindom（LK）！\n\nLK 这首歌共有 $n$ 个难度的谱面，第 $i$ 个难度的谱面有 $l_i$ 个音符，分别是 $a_{i, 1}, a_{i, 2}, \\dots a_{i, l_i}$，构成了一个序列。\n\n扶苏想知道，如果她开难度为 $i$ 的谱面，10circle 老师开难度为 $j$ 的谱面，那么两个谱面的音符序列合并起来的中位数是多少。", "description": "给定 $n$ 个序列 $a_1, a_2, \\dots a_n$。你要回答 $q$ 次询问，每次询问会给出 $i, j$，你要求出序列 $a_i$ 和 $a_j$ 拼接后的中位数是多少。\n\n拼接两个序列 $x, y$ 指的是把 $y$ 序列中的数依次写在 $x$ 序列后面。如果得到的序列长度为 $t$，中位数指的是序列中第 $\\left\\lceil\\frac t 2 \\right\\rceil$ 小的数字。其中 $\\left\\lceil x \\right\\rceil$ 表示不小于 $x$ 的最小整数。\n\n需要注意的是，本题的询问是独立的。也就是说，虽然你要回答假设 $a_i$ 和 $a_j$ 拼接后的中位数，但是不会真的进行对数列拼接的操作。", "inputFormat": "**本题单个测试点内有多组测试数据**。输入的第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n,q$（$2 \\leq n, q \\leq 10^6$），表示序列的个数和询问的次数。  \n接下来 $n$ 行，每行表示一个序列。第 $i$ 行首先有一个整数 $l_i$（$1 \\leq l_i \\leq 10^6$），表示序列 $a_i$ 的长度。接下来 $l_i$ 个整数，表示序列 $a_i$。保证序列里的数都是不大于 $10^{18}$ 的正整数。  \n接下来 $q$ 行，每行两个整数 $i,j$（$1 \\leq i,j \\leq n$，$i \\neq j$）表示一组询问。\n\n数据保证单个测试点内的 $n,q,l_i$ 之和均不超过 $10^6$。", "outputFormat": "对每组数据的每组询问，输出一行一个整数表示答案。", "hint": "#### 提示\n\n请注意大量的数据读入输出对程序效率造成的影响，使用合适的读入输出方式，不要频繁刷新输出缓冲区，避免超时。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] E. Latent Kindom", "background": "扶苏和 10circle 老师正在拼机游玩最新最热歌曲 Latent Kindom（LK）！\n\nLK 这首歌共有 $n$ 个难度的谱面，第 $i$ 个难度的谱面有 $l_i$ 个音符，分别是 $a_{i, 1}, a_{i, 2}, \\dots a_{i, l_i}$，构成了一个序列。\n\n扶苏想知道，如果她开难度为 $i$ 的谱面，10circle 老师开难度为 $j$ 的谱面，那么两个谱面的音符序列合并起来的中位数是多少。", "description": "给定 $n$ 个序列 $a_1, a_2, \\dots a_n$。你要回答 $q$ 次询问，每次询问会给出 $i, j$，你要求出序列 $a_i$ 和 $a_j$ 拼接后的中位数是多少。\n\n拼接两个序列 $x, y$ 指的是把 $y$ 序列中的数依次写在 $x$ 序列后面。如果得到的序列长度为 $t$，中位数指的是序列中第 $\\left\\lceil\\frac t 2 \\right\\rceil$ 小的数字。其中 $\\left\\lceil x \\right\\rceil$ 表示不小于 $x$ 的最小整数。\n\n需要注意的是，本题的询问是独立的。也就是说，虽然你要回答假设 $a_i$ 和 $a_j$ 拼接后的中位数，但是不会真的进行对数列拼接的操作。", "inputFormat": "**本题单个测试点内有多组测试数据**。输入的第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n第一行是两个整数 $n,q$（$2 \\leq n, q \\leq 10^6$），表示序列的个数和询问的次数。  \n接下来 $n$ 行，每行表示一个序列。第 $i$ 行首先有一个整数 $l_i$（$1 \\leq l_i \\leq 10^6$），表示序列 $a_i$ 的长度。接下来 $l_i$ 个整数，表示序列 $a_i$。保证序列里的数都是不大于 $10^{18}$ 的正整数。  \n接下来 $q$ 行，每行两个整数 $i,j$（$1 \\leq i,j \\leq n$，$i \\neq j$）表示一组询问。\n\n数据保证单个测试点内的 $n,q,l_i$ 之和均不超过 $10^6$。", "outputFormat": "对每组数据的每组询问，输出一行一个整数表示答案。", "hint": "#### 提示\n\n请注意大量的数据读入输出对程序效率造成的影响，使用合适的读入输出方式，不要频繁刷新输出缓冲区，避免超时。", "locale": "zh-CN"}}}
{"pid": "P10238", "type": "P", "difficulty": 5, "samples": [["2\n4 2\n1 2 1\n2 3 2\n3 4 3\n2\n3\n12 2\n1 2 1\n2 3 1\n1 4 3\n2 5 4\n5 6 3\n5 7 2\n7 8 1\n8 9 1\n9 10 1\n7 11 5\n8 12 3\n4\n6", "3\n1\n10\n9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "最近公共祖先 LCA", "洛谷月赛", "离线处理"], "title": "[yLCPC2024] F. PANDORA PARADOXXX", "background": "扶苏所在的城市的机厅联合举办了 KING of PerforPandora！\n\n但是因为大雪封路，有些机厅不能到达。她想知道在能互相到达的机厅中距离最远为多少。", "description": "给定一棵 $n$ 个结点的树。一棵树被定义为一个有 $n$ 个点和 $n-1$ 条边的无向连通图。这棵树的边有边权。两点 $u,v$ 间的距离 $\\mathrm{dist}(u,v)$ 定义为从 $u$ 到 $v$ 的简单路径边权和。可以证明树上两点间的简单路径是唯一的。特别的，我们规定 $\\mathrm{dist}(u, u) = 0$。\n\n现在有 $q$ 次操作，每次会删除这棵树上的一条边。显然在做出至少一次操作后，这棵树会被分成若干个连通块。你需要在每次操作后都求出每个连通块内距离最远的两个点的距离的最大值。\n\n形式化的，每次操作后，你要求出\n\n$$\\max\\limits_{c \\in C}\\{\\max\\limits_{u, v \\in c} \\mathrm{dist}(u,v)\\}$$\n\n其中 $C$ 表示当前所有连通块构成的集合。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n输入第一行是两个整数 $n, q$（$1 \\leq q < n \\leq 10^5$），依次表示树的结点数和操作数。  \n接下来 $n - 1$ 行，每行三个整数 $u,v,w$（$1 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^5$）表示树上有一条连接 $u$ 和 $v$ 的权值为 $w$ 的边。  \n接下来 $q$ 行，每行一个整数 $e_i$（$1 \\leq e_i < n$），表示这次操作删除了输入的第 $e_i$ 条边。数据保证每条边只会被删除一次。\n\n数据保证单个测试点内的 $n$ 之和不超过 $3 \\times 10^5$。", "outputFormat": "对每组数据，输出 $q$ 行，每行一个整数，依次表示每次操作后所求的答案。", "hint": "#### 提示\n\n请注意大量的数据读入和输出对程序效率造成的影响，选择合适的读入输出方式，不要频繁刷新输出缓冲区，避免超时。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] F. PANDORA PARADOXXX", "background": "扶苏所在的城市的机厅联合举办了 KING of PerforPandora！\n\n但是因为大雪封路，有些机厅不能到达。她想知道在能互相到达的机厅中距离最远为多少。", "description": "给定一棵 $n$ 个结点的树。一棵树被定义为一个有 $n$ 个点和 $n-1$ 条边的无向连通图。这棵树的边有边权。两点 $u,v$ 间的距离 $\\mathrm{dist}(u,v)$ 定义为从 $u$ 到 $v$ 的简单路径边权和。可以证明树上两点间的简单路径是唯一的。特别的，我们规定 $\\mathrm{dist}(u, u) = 0$。\n\n现在有 $q$ 次操作，每次会删除这棵树上的一条边。显然在做出至少一次操作后，这棵树会被分成若干个连通块。你需要在每次操作后都求出每个连通块内距离最远的两个点的距离的最大值。\n\n形式化的，每次操作后，你要求出\n\n$$\\max\\limits_{c \\in C}\\{\\max\\limits_{u, v \\in c} \\mathrm{dist}(u,v)\\}$$\n\n其中 $C$ 表示当前所有连通块构成的集合。", "inputFormat": "**本题单个测试点内有多组测试数据**。第一行是一个正整数 $T$，表示数据组数。对每组数据：\n\n输入第一行是两个整数 $n, q$（$1 \\leq q < n \\leq 10^5$），依次表示树的结点数和操作数。  \n接下来 $n - 1$ 行，每行三个整数 $u,v,w$（$1 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^5$）表示树上有一条连接 $u$ 和 $v$ 的权值为 $w$ 的边。  \n接下来 $q$ 行，每行一个整数 $e_i$（$1 \\leq e_i < n$），表示这次操作删除了输入的第 $e_i$ 条边。数据保证每条边只会被删除一次。\n\n数据保证单个测试点内的 $n$ 之和不超过 $3 \\times 10^5$。", "outputFormat": "对每组数据，输出 $q$ 行，每行一个整数，依次表示每次操作后所求的答案。", "hint": "#### 提示\n\n请注意大量的数据读入和输出对程序效率造成的影响，选择合适的读入输出方式，不要频繁刷新输出缓冲区，避免超时。", "locale": "zh-CN"}}}
{"pid": "P10239", "type": "P", "difficulty": 3, "samples": [["2", "4"], ["100", "1471"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "洛谷月赛"], "title": "[yLCPC2024] G. 系ぎて", "background": "> 与其说不甘心吧，这谱面到底是什么东西…  \n> ——ReMiRiA  \n> 虽然获得了冠军非常开心，但是这个谱面到底是什么？真的会收录吗？？  \n> ——yoshiki", "description": "扶苏很喜欢拆分自然数。\n\n对给定的正整数 $n$，若 $n = i \\times j \\times k$，其中 $i,j,k$ 是正整数，则称三元组 $(i,j,k)$ 是 $n$ 的一组优秀的拆分。\n\n三元组 $(i,j,k)$ 是有序的。例如，对于 $2 = 1 \\times 1 \\times 2 = 1 \\times 2 \\times 1 = 2 \\times 1 \\times 1$，我们称 $(1,1,2)$、$(1,2,1)$、$(2,1,1)$ 是三组不同的优秀的拆分。\n\n现在，扶苏想问你，对于 $n = 1,2,3\\dots N$，$n$ 的所有的优秀的拆分之和是多少。\n\n形式化的，记 $f(n)$ 表示 $n$ 的优秀的拆分数量，你需要求出 $\\sum_{i = 1}^N f(i)$。", "inputFormat": "输入只有一行一个整数，表示 $N$（$1 \\leq N \\leq 10^{10}$）。", "outputFormat": "输出一行一个整数表示答案。因为答案可能过大，你只需要输出这个值除以 $2^{64}$ 的余数。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[yLCPC2024] G. 系ぎて", "background": "> 与其说不甘心吧，这谱面到底是什么东西…  \n> ——ReMiRiA  \n> 虽然获得了冠军非常开心，但是这个谱面到底是什么？真的会收录吗？？  \n> ——yoshiki", "description": "扶苏很喜欢拆分自然数。\n\n对给定的正整数 $n$，若 $n = i \\times j \\times k$，其中 $i,j,k$ 是正整数，则称三元组 $(i,j,k)$ 是 $n$ 的一组优秀的拆分。\n\n三元组 $(i,j,k)$ 是有序的。例如，对于 $2 = 1 \\times 1 \\times 2 = 1 \\times 2 \\times 1 = 2 \\times 1 \\times 1$，我们称 $(1,1,2)$、$(1,2,1)$、$(2,1,1)$ 是三组不同的优秀的拆分。\n\n现在，扶苏想问你，对于 $n = 1,2,3\\dots N$，$n$ 的所有的优秀的拆分之和是多少。\n\n形式化的，记 $f(n)$ 表示 $n$ 的优秀的拆分数量，你需要求出 $\\sum_{i = 1}^N f(i)$。", "inputFormat": "输入只有一行一个整数，表示 $N$（$1 \\leq N \\leq 10^{10}$）。", "outputFormat": "输出一行一个整数表示答案。因为答案可能过大，你只需要输出这个值除以 $2^{64}$ 的余数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10240", "type": "P", "difficulty": 6, "samples": [["11 10\n3 1 3 8 4 3 2 1 2 1 1\n", "4\n"], ["见附件中的 2.in。", "见附件中的 2.ans。"], ["见附件中的 3.in。", "见附件中的 3.ans。"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "O2优化", "THUSC"], "title": "[THUSC 2021] 搬东西", "background": "", "description": "有 $n$ 件物品，编号为 $1$ 到 $n$，编号为 $i$ 的物品重量记为 $a_i$，是一个正整数。\n\n只有一个可用的箱子，它最大可容纳的重量是一个正整数 $m$。物品被分批搬运，每批搬走其中一部分，直至所有物品都被搬走。每个批次被搬走的物品是当时剩下物品的一个子集，按如下策略选择：\n\n选择重量之和不超过 $m$ 且包含物品数量最多的方案，如果有多种数量最多的方案，则将被选择的物品编号从小到大排列成一个序列，选择使这个序列字典序最大的方案。\n\n请计算出依此策略会分成多少批次来搬运。", "inputFormat": "输入共有两行，第一行包含两个空格分隔的正整数 $n, m$，第二行包含 $n$ 个空格隔开的正整数，依次为 $n$ 个物品的重量 $a_i$。", "outputFormat": "输出一个正整数，表示完成搬运所需的批次数。", "hint": "**【样例解释 #1】**\n\n第一次最多可以搬运 $6$ 件物品，编号序列为 $6, 7, 8, 9, 10, 11$。\n\n第二次最多可以搬运 $3$ 件物品，这时有 $4$ 种数量最大的方案：\n\n+ 编号序列 $1, 2, 3$。\n+ 编号序列 $1, 2, 5$。\n+ 编号序列 $1, 3, 5$。\n+ 编号序列 $2, 3, 5$。\n\n选择字典序最大的 $2, 3, 5$。\n\n第三次最多可以搬运 $1$ 件物品，编号序列为 $4$。\n\n第四次最多可以搬运 $1$ 件物品，编号序列为 $1$。\n\n**【子任务】**\n\n|子任务|分值|$n$|$m$|\n|:----:|:----:|:----:|:----:|\n|$1$|$5$|$n \\leq 20$|$m \\leq 100$|\n|$2$|$25$|$n \\leq 500$|$m \\leq 10^9$|\n|$3$|$20$|$n \\leq 3000$|$m \\leq 10^9$|\n|$4$|$10$|$n \\leq 50000$|$m \\leq 10$|\n|$5$|$40$|$n \\leq 50000$|$m \\leq 10^9$|\n\n全部数据满足：\n\n+ $1 \\leq n \\leq 50000$，$1 \\leq m \\leq 10^9$；\n+ 所有物品的重量满足 $1 \\leq a_i \\leq m, \\ i=1 \\dots n$。\n\n**【提示】**\n\n对于两个等长且不相同的序列 $a$ 和 $b$，如果序列中的元素可以比较大小，那么 $a$ 与 $b$ 的字典序大小关系如下定义：从前向后找到第一个位置 $i$ 使 $a_i \\neq b_i$，若 $a_i < b_i$ 则 $a<b$，否则 $a_i>b_i$ 时 $a>b$。\n\n在本题中，$a$ 和 $b$ 是两个搬运方案中涉及的物品编号序列，元素之间的大小关系指的就是编号之间的整数比较。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2021] 搬东西", "background": "", "description": "有 $n$ 件物品，编号为 $1$ 到 $n$，编号为 $i$ 的物品重量记为 $a_i$，是一个正整数。\n\n只有一个可用的箱子，它最大可容纳的重量是一个正整数 $m$。物品被分批搬运，每批搬走其中一部分，直至所有物品都被搬走。每个批次被搬走的物品是当时剩下物品的一个子集，按如下策略选择：\n\n选择重量之和不超过 $m$ 且包含物品数量最多的方案，如果有多种数量最多的方案，则将被选择的物品编号从小到大排列成一个序列，选择使这个序列字典序最大的方案。\n\n请计算出依此策略会分成多少批次来搬运。", "inputFormat": "输入共有两行，第一行包含两个空格分隔的正整数 $n, m$，第二行包含 $n$ 个空格隔开的正整数，依次为 $n$ 个物品的重量 $a_i$。", "outputFormat": "输出一个正整数，表示完成搬运所需的批次数。", "hint": "**【样例解释 #1】**\n\n第一次最多可以搬运 $6$ 件物品，编号序列为 $6, 7, 8, 9, 10, 11$。\n\n第二次最多可以搬运 $3$ 件物品，这时有 $4$ 种数量最大的方案：\n\n+ 编号序列 $1, 2, 3$。\n+ 编号序列 $1, 2, 5$。\n+ 编号序列 $1, 3, 5$。\n+ 编号序列 $2, 3, 5$。\n\n选择字典序最大的 $2, 3, 5$。\n\n第三次最多可以搬运 $1$ 件物品，编号序列为 $4$。\n\n第四次最多可以搬运 $1$ 件物品，编号序列为 $1$。\n\n**【子任务】**\n\n|子任务|分值|$n$|$m$|\n|:----:|:----:|:----:|:----:|\n|$1$|$5$|$n \\leq 20$|$m \\leq 100$|\n|$2$|$25$|$n \\leq 500$|$m \\leq 10^9$|\n|$3$|$20$|$n \\leq 3000$|$m \\leq 10^9$|\n|$4$|$10$|$n \\leq 50000$|$m \\leq 10$|\n|$5$|$40$|$n \\leq 50000$|$m \\leq 10^9$|\n\n全部数据满足：\n\n+ $1 \\leq n \\leq 50000$，$1 \\leq m \\leq 10^9$；\n+ 所有物品的重量满足 $1 \\leq a_i \\leq m, \\ i=1 \\dots n$。\n\n**【提示】**\n\n对于两个等长且不相同的序列 $a$ 和 $b$，如果序列中的元素可以比较大小，那么 $a$ 与 $b$ 的字典序大小关系如下定义：从前向后找到第一个位置 $i$ 使 $a_i \\neq b_i$，若 $a_i < b_i$ 则 $a<b$，否则 $a_i>b_i$ 时 $a>b$。\n\n在本题中，$a$ 和 $b$ 是两个搬运方案中涉及的物品编号序列，元素之间的大小关系指的就是编号之间的整数比较。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN"}}}
{"pid": "P10241", "type": "P", "difficulty": 6, "samples": [["9\n2 4 1 6 7 3 5 1 2\n2 3\n6 1\n6 7\n1 2\n8 6\n4 2\n6 9\n4 5\n", "5\n"], ["见附件中的 2.in。", "见附件中的 2.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["点分治", "树上启发式合并", "2021", "O2优化", "树链剖分", "线段树合并", "THUSC"], "title": "[THUSC 2021] 白兰地厅的西瓜", "background": "> 在地底的洞府中住着一个霍比特人。这不是那种让人恶心的洞，脏兮兮湿乎乎的，长满虫子，透着一股子泥腥味儿；也不是那种满是泥沙的洞，干巴巴光秃秃的，没地方好坐，也没好东西好吃。这是一个霍比特人的洞，而霍比特人的洞就意味着舒适。\n> \n> ——《霍比特人》开篇", "description": "白兰地厅是最大的霍比特洞之一，位于雄鹿山内部，是白兰地鹿家族的祖宅，数百年来白兰地鹿家族的霍比特人不断扩张白兰地厅的规模，直至其占满了整个山丘。白兰地鹿家族是弗罗多·巴金斯的母族，他十二岁那年，双亲在划船时不幸溺亡，弗罗多便被交由白兰地厅抚养。\n\n白兰地厅有 $n$ 个房间，房间之间以双向圆形通道相连。从任意一个房间出发都可以到达任意另一个房间，但为了避免人们迷失在交错纵横的通道里，白兰地厅经过了精心设计，以保证任意两个房间之间仅有一条路径可达。在炎炎的夏日，白兰地鹿家有贮藏甘甜可口的西瓜的习俗，但由于西瓜个头太大，白兰地鹿家会在每个房间里贮藏恰好一个西瓜。对一个西瓜而言最重要的是它的甜度，$i$ 号房间里的西瓜的甜度为 $a_i$。\n\n弗罗多算是客居于此，因而可以在白兰地厅自由走动，也可以在任意一个他想过夜的房间里过夜。弗罗多每天会从一个房间前往另一个房间，但他生性懒惰，总是会沿着最短的路径来走。经过每个房间时弗罗多都可以品尝那个房间里的西瓜，当然他也可以只是经过而选择忽略西瓜——这也包括了他出发和最终落脚的房间。\n\n弗罗多喜欢吃甜的西瓜，然而众所周知，味蕾感受到的甜度是相对甜度，也就是说，如果弗罗多先吃了一个甜度为 $x$ 的西瓜，紧接着又吃了一个甜度为 $y$ 的西瓜，当 $y > x$ 时，味蕾才会觉得后者是甜的，当 $y \\le x$ 时，弗罗多并不会感觉到后者的甜。所以，弗罗多给自己定了一个规矩：**除了每天的第一个西瓜外，他吃的每一个西瓜的甜度都要大于前一个**。\n\n一天清晨，弗罗多突然对白兰地厅里百无聊赖的生活心生倦意，或许只有西瓜才能让他解忧，他想吃很多个西瓜，并且不想违背他的规矩。弗罗多不禁陷入思考……他的一天里总是面临很多选择，从哪一个房间出发、最终抵达哪一个房间、在经过的房间中选择吃哪一些房间的西瓜、并忽略另一些房间里的西瓜……弗罗多想知道，在如此多的选择下，弗罗多的一天最多能吃到多少个西瓜呢？", "inputFormat": "第一行包含一个正整数 $n$，表示白兰地厅的房间数量。保证 $2 \\le n \\le 10^{5}$。\n\n第二行包含 $n$ 个正整数，第 $i$ 个整数为 $a_i$，表示 $i$ 号房间里的西瓜的甜度。保证 $1 \\le a_i \\le 10^{9}$。\n\n接下来 $n - 1$ 行描述了白兰地厅的形态，第 $i$ 行为两个正整数 $u_i$ 和 $v_i$，表示 $u_i$ 号房间和 $v_i$ 号房间之间有一条双向通道。保证 $1 \\le u_i, v_i \\le n$。", "outputFormat": "输出共一行，包含一个正整数，即 **弗罗多一天里最多能吃到多少个西瓜**。", "hint": "**【样例解释 #1】**\n\n下图为本样例中的白兰地厅的示意图。黑色直线表示房间之间的通道；左侧墙壁上的数字为房间编号；西瓜内部的数字为其甜度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3i7dc9g.png)\n\n弗罗多一天最多能吃到 5 个西瓜，有三种选择可以让他吃到 5 个西瓜。\n\n选择一：\n\n - 从 8 号房间出发，并吃掉房间里的西瓜（甜度为 1）；\n - 经过 6 号房间，忽略房间里的西瓜；\n - 经过 1 号房间，并吃掉房间里的西瓜（甜度为 2）；\n - 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n - 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n - 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n\n选择二：\n\n + 从 8 号房间出发，并吃掉房间里的西瓜（甜度为 1）；\n + 经过 6 号房间，并吃掉房间里的西瓜（甜度为 3）；\n + 经过 1 号房间，忽略房间里的西瓜；\n + 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n + 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n + 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n\n选择三：\n\n * 从 9 号房间出发，并吃掉房间里的西瓜（甜度为 2）；\n * 经过 6 号房间，并吃掉房间里的西瓜（甜度为 3）；\n * 经过 1 号房间，忽略房间里的西瓜；\n * 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n * 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n * 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n \n **【子任务】**\n \n 本题有多个子任务，每个子任务可能包含多个测试点，只有通过了一个子任务中的所有测试点才能得到该子任务的分数。\n\n每个子任务的测试点满足一些特殊的限制，具体如下表：\n\n|子任务编号|$n \\le$|特殊性质|占分|\n|:----:|:----:|:----:|:----:|\n|$1$|$100$|无|$10$|\n|$2$|$1000$|无|$10$|\n|$3$|$5000$|$a_i \\le 4$|$10$|\n|$4$|$10 ^ 5$|$a_i \\le 2$|$10$|\n|$5$|$10 ^ 5$|树中仅有一个节点度数大于 $1$|$10$|\n|$6$|$10 ^ 5$|树中所有节点度数不超过 $2$|$10$|\n|$7$|$10 ^ 5$|无|$40$|\n\n对于所有测试点，保证 $1 \\le a_i \\le 10^{9}$，$2 \\le n \\le 10^{5}$。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2021] 白兰地厅的西瓜", "background": "> 在地底的洞府中住着一个霍比特人。这不是那种让人恶心的洞，脏兮兮湿乎乎的，长满虫子，透着一股子泥腥味儿；也不是那种满是泥沙的洞，干巴巴光秃秃的，没地方好坐，也没好东西好吃。这是一个霍比特人的洞，而霍比特人的洞就意味着舒适。\n> \n> ——《霍比特人》开篇", "description": "白兰地厅是最大的霍比特洞之一，位于雄鹿山内部，是白兰地鹿家族的祖宅，数百年来白兰地鹿家族的霍比特人不断扩张白兰地厅的规模，直至其占满了整个山丘。白兰地鹿家族是弗罗多·巴金斯的母族，他十二岁那年，双亲在划船时不幸溺亡，弗罗多便被交由白兰地厅抚养。\n\n白兰地厅有 $n$ 个房间，房间之间以双向圆形通道相连。从任意一个房间出发都可以到达任意另一个房间，但为了避免人们迷失在交错纵横的通道里，白兰地厅经过了精心设计，以保证任意两个房间之间仅有一条路径可达。在炎炎的夏日，白兰地鹿家有贮藏甘甜可口的西瓜的习俗，但由于西瓜个头太大，白兰地鹿家会在每个房间里贮藏恰好一个西瓜。对一个西瓜而言最重要的是它的甜度，$i$ 号房间里的西瓜的甜度为 $a_i$。\n\n弗罗多算是客居于此，因而可以在白兰地厅自由走动，也可以在任意一个他想过夜的房间里过夜。弗罗多每天会从一个房间前往另一个房间，但他生性懒惰，总是会沿着最短的路径来走。经过每个房间时弗罗多都可以品尝那个房间里的西瓜，当然他也可以只是经过而选择忽略西瓜——这也包括了他出发和最终落脚的房间。\n\n弗罗多喜欢吃甜的西瓜，然而众所周知，味蕾感受到的甜度是相对甜度，也就是说，如果弗罗多先吃了一个甜度为 $x$ 的西瓜，紧接着又吃了一个甜度为 $y$ 的西瓜，当 $y > x$ 时，味蕾才会觉得后者是甜的，当 $y \\le x$ 时，弗罗多并不会感觉到后者的甜。所以，弗罗多给自己定了一个规矩：**除了每天的第一个西瓜外，他吃的每一个西瓜的甜度都要大于前一个**。\n\n一天清晨，弗罗多突然对白兰地厅里百无聊赖的生活心生倦意，或许只有西瓜才能让他解忧，他想吃很多个西瓜，并且不想违背他的规矩。弗罗多不禁陷入思考……他的一天里总是面临很多选择，从哪一个房间出发、最终抵达哪一个房间、在经过的房间中选择吃哪一些房间的西瓜、并忽略另一些房间里的西瓜……弗罗多想知道，在如此多的选择下，弗罗多的一天最多能吃到多少个西瓜呢？", "inputFormat": "第一行包含一个正整数 $n$，表示白兰地厅的房间数量。保证 $2 \\le n \\le 10^{5}$。\n\n第二行包含 $n$ 个正整数，第 $i$ 个整数为 $a_i$，表示 $i$ 号房间里的西瓜的甜度。保证 $1 \\le a_i \\le 10^{9}$。\n\n接下来 $n - 1$ 行描述了白兰地厅的形态，第 $i$ 行为两个正整数 $u_i$ 和 $v_i$，表示 $u_i$ 号房间和 $v_i$ 号房间之间有一条双向通道。保证 $1 \\le u_i, v_i \\le n$。", "outputFormat": "输出共一行，包含一个正整数，即 **弗罗多一天里最多能吃到多少个西瓜**。", "hint": "**【样例解释 #1】**\n\n下图为本样例中的白兰地厅的示意图。黑色直线表示房间之间的通道；左侧墙壁上的数字为房间编号；西瓜内部的数字为其甜度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3i7dc9g.png)\n\n弗罗多一天最多能吃到 5 个西瓜，有三种选择可以让他吃到 5 个西瓜。\n\n选择一：\n\n - 从 8 号房间出发，并吃掉房间里的西瓜（甜度为 1）；\n - 经过 6 号房间，忽略房间里的西瓜；\n - 经过 1 号房间，并吃掉房间里的西瓜（甜度为 2）；\n - 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n - 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n - 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n\n选择二：\n\n + 从 8 号房间出发，并吃掉房间里的西瓜（甜度为 1）；\n + 经过 6 号房间，并吃掉房间里的西瓜（甜度为 3）；\n + 经过 1 号房间，忽略房间里的西瓜；\n + 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n + 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n + 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n\n选择三：\n\n * 从 9 号房间出发，并吃掉房间里的西瓜（甜度为 2）；\n * 经过 6 号房间，并吃掉房间里的西瓜（甜度为 3）；\n * 经过 1 号房间，忽略房间里的西瓜；\n * 经过 2 号房间，并吃掉房间里的西瓜（甜度为 4）；\n * 经过 4 号房间，并吃掉房间里的西瓜（甜度为 6）；\n * 抵达 5 号房间，并吃掉房间里的西瓜（甜度为 7）。\n \n **【子任务】**\n \n 本题有多个子任务，每个子任务可能包含多个测试点，只有通过了一个子任务中的所有测试点才能得到该子任务的分数。\n\n每个子任务的测试点满足一些特殊的限制，具体如下表：\n\n|子任务编号|$n \\le$|特殊性质|占分|\n|:----:|:----:|:----:|:----:|\n|$1$|$100$|无|$10$|\n|$2$|$1000$|无|$10$|\n|$3$|$5000$|$a_i \\le 4$|$10$|\n|$4$|$10 ^ 5$|$a_i \\le 2$|$10$|\n|$5$|$10 ^ 5$|树中仅有一个节点度数大于 $1$|$10$|\n|$6$|$10 ^ 5$|树中所有节点度数不超过 $2$|$10$|\n|$7$|$10 ^ 5$|无|$40$|\n\n对于所有测试点，保证 $1 \\le a_i \\le 10^{9}$，$2 \\le n \\le 10^{5}$。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN"}}}
{"pid": "P10242", "type": "P", "difficulty": 5, "samples": [["3 3\n1 2 3\n2 -1 100\n100 10 -1\n", "113\n"], ["见附件中的 2.in。", "见附件中的 2.ans。"], ["见附件中的 3.in。", "见附件中的 3.ans。"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2021", "O2优化", "快速沃尔什变换 FWT", "THUSC", "状压 DP"], "title": "[THUSC 2021] Emiya 家明天的饭", "background": "由于本题的测试数据规模较大，本题只评测一部分测试数据，其余的测试数据可以在 [U412486](https://www.luogu.com.cn/problem/U412486) 中提交测试。", "description": "Emiya 是个擅长做菜的高中生，他会做 $m$ 道不同的菜品。某天，Yaz、Zid 和他们的 $n$ 个朋友们到他家做客，Emiya 需要做一些菜来招待他们。\n\nYaz 和 Zid 什么都吃，但他们的朋友们有些挑食。具体来说，我们用整数 $a_{i,j}\\geq -1$ 来表示第 $i$ 个朋友对第 $j$ 道菜品的态度：\n\n* 若 $a_{i,j}\\geq 0$，则第 $i$ 位朋友不讨厌这道菜品，如果饭桌上有这道菜，且没有其他让这位朋友讨厌的菜品，那么他会给 Emiya 留下 $a_{i,j}$ 元红包以表赞许和感谢。\n\n* 若 $a_{i,j} = -1$，则第 $i$ 为朋友讨厌这道菜品，如果饭桌上有这道菜，那么这位朋友会非常生气，并直接离席而去。这意味着他将不会因为任何菜品留下红包。\n\nEmiya 擅长做菜，却不擅长计算，请你帮助 Emiya 挑选若干道菜品，使得他收到的红包数额总和最大。方便起见，你只需要输出这个最大的总和即可。", "inputFormat": "第一行包含两个整数 $n,m$，意义见题目描述。\n\n第 $2$ 到第 $n+1$ 行，每行包含 $m$ 个整数：其中第 $i+1$ 行的第 $j$ 个整数为 $a_{i,j}$，意义见题目描述。\n\n保证 $n,m\\geq 1$，保证 $a_{i,j} \\geq -1$。", "outputFormat": "一行一个整数，表示红包金额的最大总和。", "hint": "**【样例解释 #1】**\n\n最优方案是制作第 $1$ 和第 $2$ 道菜。若如此做，虽然第 $2$ 位客人会生气地离席而去，但另两位客人留下的红包总金额是最大的。\n\n**【子任务】**\n\n本题设置 4 个子任务：\n\n* 第 1 个子任务（20 分）的特殊限制：$n\\leq 10, m\\leq 2000$；\n* 第 2 个子任务（20 分）的特殊限制：$n\\leq 14$；\n* 第 3 个子任务（20 分）的特殊限制：每位朋友不喜欢的菜品编号范围为一个区间，即对于每位客人 $i$，存在整数 $l,r$（$l\\leq r$），满足 $a_{i,j} = -1$ 当且仅当 $j\\in \\left[l,r\\right]$；\n* 第 4 个子任务（40 分）没有特殊限制。\n\n对于所有测试点，保证 $n\\leq 20$，$m\\leq 10^6$，$a_{i,j}\\leq 10^9$。\n\n**【提示】**\n\n一些测试点的输入规模较大，请注意程序的 IO 效率。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2021] Emiya 家明天的饭", "background": "由于本题的测试数据规模较大，本题只评测一部分测试数据，其余的测试数据可以在 [U412486](https://www.luogu.com.cn/problem/U412486) 中提交测试。", "description": "Emiya 是个擅长做菜的高中生，他会做 $m$ 道不同的菜品。某天，Yaz、Zid 和他们的 $n$ 个朋友们到他家做客，Emiya 需要做一些菜来招待他们。\n\nYaz 和 Zid 什么都吃，但他们的朋友们有些挑食。具体来说，我们用整数 $a_{i,j}\\geq -1$ 来表示第 $i$ 个朋友对第 $j$ 道菜品的态度：\n\n* 若 $a_{i,j}\\geq 0$，则第 $i$ 位朋友不讨厌这道菜品，如果饭桌上有这道菜，且没有其他让这位朋友讨厌的菜品，那么他会给 Emiya 留下 $a_{i,j}$ 元红包以表赞许和感谢。\n\n* 若 $a_{i,j} = -1$，则第 $i$ 为朋友讨厌这道菜品，如果饭桌上有这道菜，那么这位朋友会非常生气，并直接离席而去。这意味着他将不会因为任何菜品留下红包。\n\nEmiya 擅长做菜，却不擅长计算，请你帮助 Emiya 挑选若干道菜品，使得他收到的红包数额总和最大。方便起见，你只需要输出这个最大的总和即可。", "inputFormat": "第一行包含两个整数 $n,m$，意义见题目描述。\n\n第 $2$ 到第 $n+1$ 行，每行包含 $m$ 个整数：其中第 $i+1$ 行的第 $j$ 个整数为 $a_{i,j}$，意义见题目描述。\n\n保证 $n,m\\geq 1$，保证 $a_{i,j} \\geq -1$。", "outputFormat": "一行一个整数，表示红包金额的最大总和。", "hint": "**【样例解释 #1】**\n\n最优方案是制作第 $1$ 和第 $2$ 道菜。若如此做，虽然第 $2$ 位客人会生气地离席而去，但另两位客人留下的红包总金额是最大的。\n\n**【子任务】**\n\n本题设置 4 个子任务：\n\n* 第 1 个子任务（20 分）的特殊限制：$n\\leq 10, m\\leq 2000$；\n* 第 2 个子任务（20 分）的特殊限制：$n\\leq 14$；\n* 第 3 个子任务（20 分）的特殊限制：每位朋友不喜欢的菜品编号范围为一个区间，即对于每位客人 $i$，存在整数 $l,r$（$l\\leq r$），满足 $a_{i,j} = -1$ 当且仅当 $j\\in \\left[l,r\\right]$；\n* 第 4 个子任务（40 分）没有特殊限制。\n\n对于所有测试点，保证 $n\\leq 20$，$m\\leq 10^6$，$a_{i,j}\\leq 10^9$。\n\n**【提示】**\n\n一些测试点的输入规模较大，请注意程序的 IO 效率。\n\n### 题目使用协议\n\n来自 清华大学 2021 年全国优秀中学生信息学体验营 (THUSC 2021)。\n\n以下『本仓库』皆指 THUSC 2021 官方仓库（[https://gitlink.org.cn/thusaa/thusc2021](https://gitlink.org.cn/thusaa/thusc2021)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库地址。\n4. 清华大学计算机系保留一切权利。", "locale": "zh-CN"}}}
{"pid": "P10244", "type": "P", "difficulty": 1, "samples": [["8\nwestlake\nyummyqaq\nweabzzke\nazazazaq\n", "auazyqaq"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "洛谷原创", "洛谷月赛"], "title": "String Minimization", "background": "", "description": "你有四个长 $n$ 的字符串 $a,b,c,d$。你可以执行任意多次如下操作：\n\n- 选择一个 $i$，交换 $a_i,c_i$，然后交换 $b_i,d_i$。\n\n求在 $a$ 的字典序尽量小的前提下，$b$ 字典序最小是什么。\n\n---\n\n如果你不知道什么是字典序，看这里：\n\n对于两个字符串 $p,q$，称 $p$ 的字典序小于 $q$（记为 $p<q$），当且仅当存在**自然数** $k$ 使 $p,q$ 的前 $k$ 个字符相同且 $p_{k+1}$ 的 ASCII 码小于 $q_{k+1}$ 的 ASCII 码。\n\n例如：\n- $\\texttt{abc}<\\texttt{baa}$（当 $k=0$）\n- $\\texttt{bae}<\\texttt{bbb}$（当 $k=1$）", "inputFormat": "输入的第一行有一个正整数 $n$，表示字符串 $a,b,c,d$ 长度。\n\n之后四行，每行一个字符串，分别表示 $a,b,c,d$。", "outputFormat": "输出一行一个字符串，表示题目要求的字符串 $b$。", "hint": "【样例解释】\n\n选择 $i$ 为 $1,3,4$ 可以让 $a$ 取到最小的字典序 $\\texttt{weablake}$，此时字符串 $b$ 也得到满足题意最小的字典序 $\\texttt{auazyqaq}$。\n\n事实上如果 $i=1$ 时不操作 $a$ 的字典序也是最小的，但是此时字符串 $b$ 就是 $\\texttt{yuazyqaq}$，不够小。\n\n【数据范围】\n\n本题共 $10$ 个测试点，每个测试点 $10$ 分。\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 2$|$15$||\n|$3$|$10^5$|$a_i>c_i$|\n|$4\\sim 5$|$10^5$|$a_i\\ne c_i$|\n|$6\\sim 7$|$10^5$|$b_i\\ge d_i$|\n|$8\\sim 10$|$10^5$||\n\n对于全体数据，保证 $1\\le n\\le 10^5$，字符串所有字符都是小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "String Minimization", "background": "", "description": "你有四个长 $n$ 的字符串 $a,b,c,d$。你可以执行任意多次如下操作：\n\n- 选择一个 $i$，交换 $a_i,c_i$，然后交换 $b_i,d_i$。\n\n求在 $a$ 的字典序尽量小的前提下，$b$ 字典序最小是什么。\n\n---\n\n如果你不知道什么是字典序，看这里：\n\n对于两个字符串 $p,q$，称 $p$ 的字典序小于 $q$（记为 $p<q$），当且仅当存在**自然数** $k$ 使 $p,q$ 的前 $k$ 个字符相同且 $p_{k+1}$ 的 ASCII 码小于 $q_{k+1}$ 的 ASCII 码。\n\n例如：\n- $\\texttt{abc}<\\texttt{baa}$（当 $k=0$）\n- $\\texttt{bae}<\\texttt{bbb}$（当 $k=1$）", "inputFormat": "输入的第一行有一个正整数 $n$，表示字符串 $a,b,c,d$ 长度。\n\n之后四行，每行一个字符串，分别表示 $a,b,c,d$。", "outputFormat": "输出一行一个字符串，表示题目要求的字符串 $b$。", "hint": "【样例解释】\n\n选择 $i$ 为 $1,3,4$ 可以让 $a$ 取到最小的字典序 $\\texttt{weablake}$，此时字符串 $b$ 也得到满足题意最小的字典序 $\\texttt{auazyqaq}$。\n\n事实上如果 $i=1$ 时不操作 $a$ 的字典序也是最小的，但是此时字符串 $b$ 就是 $\\texttt{yuazyqaq}$，不够小。\n\n【数据范围】\n\n本题共 $10$ 个测试点，每个测试点 $10$ 分。\n\n|测试点编号|$n\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 2$|$15$||\n|$3$|$10^5$|$a_i>c_i$|\n|$4\\sim 5$|$10^5$|$a_i\\ne c_i$|\n|$6\\sim 7$|$10^5$|$b_i\\ge d_i$|\n|$8\\sim 10$|$10^5$||\n\n对于全体数据，保证 $1\\le n\\le 10^5$，字符串所有字符都是小写字母。", "locale": "zh-CN"}}}
{"pid": "P10245", "type": "P", "difficulty": 2, "samples": [["3\n20 2 4 8\n3 5 3 5\n1 2 4 3\n", "no\nno\nyes\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "洛谷月赛"], "title": "Swimming Pool", "background": "**请注意，四边形 $ABCD$ 中，四个点必须*顺次*是 $A,B,C,D$**，不允许 $AB$ 是一条对角线之类的情况。", "description": "小 J 想要建一个四边形游泳池 $ABCD$。他希望有一组对边互相平行（方便搞一些家庭比赛），另外一组对边不平行（否则会显得太没有个性）。换言之，**他需要让这个游泳池是个梯形**。\n\n给出四个正整数 $p,q,r,s$，判断他能否造一个符合题意的游泳池，使得 $AB=p,BC=q,CD=r,DA=s$。\n", "inputFormat": "**本题有多组数据。** 输入的第一行有一个正整数 $T$ 表示数据组数。\n\n之后 $T$ 行，每行有用空格隔开的四个正整数 $p,q,r,s$。", "outputFormat": "对于每组数据输出 $T$ 行，其中若可以构成梯形则输出 `yes`，否则输出 `no`。", "hint": "【样例解释】\n\n第一组数据显然无法构成四边形。\n\n第二组数据只能构成平行四边形。\n\n第三组数据确实可以构成梯形。\n\n【数据范围】\n\n本题共 $6$ 个测试点，注意测试点不等分。\n\n|测试点编号|特殊性质|分值|\n|:-:|:-:|:-:|\n|$1$|可构成梯形当且仅当可构成四边形|$19$|\n|$2$|$p<r<s$ 且 $q<s$|$17$|\n|$3$|$p,q,r,s\\le 2$|$7$|\n|$4$|$p<r$ 且 $q<s$|$12$|\n|$5$|输入必能构成四边形|$18$|\n|$6$|无特殊性质|$27$|\n\n对于全体数据，保证 $1\\le T\\le 10^4$，$1\\le p,q,r,s\\le 5\\times 10^8$，输入皆为正整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Swimming Pool", "background": "**请注意，四边形 $ABCD$ 中，四个点必须*顺次*是 $A,B,C,D$**，不允许 $AB$ 是一条对角线之类的情况。", "description": "小 J 想要建一个四边形游泳池 $ABCD$。他希望有一组对边互相平行（方便搞一些家庭比赛），另外一组对边不平行（否则会显得太没有个性）。换言之，**他需要让这个游泳池是个梯形**。\n\n给出四个正整数 $p,q,r,s$，判断他能否造一个符合题意的游泳池，使得 $AB=p,BC=q,CD=r,DA=s$。\n", "inputFormat": "**本题有多组数据。** 输入的第一行有一个正整数 $T$ 表示数据组数。\n\n之后 $T$ 行，每行有用空格隔开的四个正整数 $p,q,r,s$。", "outputFormat": "对于每组数据输出 $T$ 行，其中若可以构成梯形则输出 `yes`，否则输出 `no`。", "hint": "【样例解释】\n\n第一组数据显然无法构成四边形。\n\n第二组数据只能构成平行四边形。\n\n第三组数据确实可以构成梯形。\n\n【数据范围】\n\n本题共 $6$ 个测试点，注意测试点不等分。\n\n|测试点编号|特殊性质|分值|\n|:-:|:-:|:-:|\n|$1$|可构成梯形当且仅当可构成四边形|$19$|\n|$2$|$p<r<s$ 且 $q<s$|$17$|\n|$3$|$p,q,r,s\\le 2$|$7$|\n|$4$|$p<r$ 且 $q<s$|$12$|\n|$5$|输入必能构成四边形|$18$|\n|$6$|无特殊性质|$27$|\n\n对于全体数据，保证 $1\\le T\\le 10^4$，$1\\le p,q,r,s\\le 5\\times 10^8$，输入皆为正整数。", "locale": "zh-CN"}}}
{"pid": "P10246", "type": "P", "difficulty": 3, "samples": [["2\n2 1\n11 12\n12 2\n31 29 31 30 31 30 31 31 30 31 30 31\n", "0\n7\n1 6\n1 28\n3 2\n5 12\n6 4\n10 24\n12 8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "枚举", "洛谷月赛"], "title": "Exciting Days", "background": "网上流传一种说法，称 $10$ 月 $24$ 日是“程序员节”，因为 $1024$ 恰好是 $2^{10}$，而计算机和二进制有密切联系。\n\n如果某个不使用地球历法的外星文明，也不一定用传统的二进制计算机，会不会也有类似的传统呢？", "description": "某个星球的历法和地球虽然数值上和地球不同，但是其结构和地球人的历法大体相似。具体地，他们的一年有 $n$ 个月，其中第 $i$ 个月有 $a_i$ 天。\n\n定义 $m$ 月 $d$ 日的**特征值**为将 $m,d$ 的十进制写出（不含前导 $0$）后，直接拼接的结果。例如 $3$ 月 $7$ 日特征值是 $37$，$12$ 月 $20$ 日特征值是 $1220$。\n\n如果一个日期的特征值是 $k$ 的自然数次幂，则称这个日期是**广义程序员节**。你可以求出这个星球的所有广义程序员节吗？", "inputFormat": "**本题有多组测试数据。** 输入的第一行有一个正整数 $T$，表示测试数据组数。\n\n每组测试数据输入两行。第一行有两个正整数 $n,k$，含义和题目描述一致；第二行有 $n$ 个正整数 $a_1,\\ldots,a_n$ 表示每个月的天数。", "outputFormat": "对于每组测试数据，先输出一行一个自然数表示广义程序员节个数；再输出若干行，每行一对用空格隔开的正整数 $m,d$ 表示 $m$ 月 $d$ 日表示一个程序员节。\n\n在同一组测试数据中，输出的日期应按照一年当中的顺序输出。", "hint": "【样例解释】\n\n对于第一组数据，外星人的日历有两个月，第一个月有 $11$ 天，第二个月有 $12$ 天。现在要求特征值是 $1$ 的整数次幂，只能是 $1$，然而日期的特征值**至少是两位数**，因此不存在符合要求的日期。\n\n对于第二组数据，这是地球人闰年时的公历，不难发现输出的日期特征值确实都是 $2$ 的自然数次幂。\n\n【数据范围】\n\n本题共 $25$ 个测试点，每个 $4$ 分。数据范围中，$\\sum n$ 表示所有测试数据的 $n$ 之和，例如样例的 $\\sum n=14$。\n\n|测试点编号|$T\\le$|$\\sum n\\le$|$a_i\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$1$|$1000$|$1000$|$k=6$|\n|$2\\sim 3$|$1$|$1000$|$1000$||\n|$4\\sim 6$|$3$|$1000$|$1000$||\n|$7\\sim 11$|$3$|$10^4$|$10^4$||\n|$12\\sim 14$|$1$|$3\\times 10^5$|$10^9$||\n|$15\\sim 17$|$3$|$3\\times 10^5$|$10^9$||\n|$18\\sim 19$|$10^4$|$10^4$|$10^9$|$n=1$|\n|$20\\sim 21$|$10^4$|$9\\times 10^4$|$10^9$|$n\\le 9$|\n|$22\\sim 25$|$10^4$|$3\\times 10^5$|$10^9$||\n\n对于全部数据，保证 $1\\le T\\le 10^4$，$1\\le n\\le 3\\times 10^5$，$1\\le \\sum n\\le 3\\times 10^5$，$1\\le a_i,k\\le 10^9$，输入皆为整数。\n\n为避免卡常，题目保证单个测试点输出的日期不超过 $2\\times 10^4$ 个。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Exciting Days", "background": "网上流传一种说法，称 $10$ 月 $24$ 日是“程序员节”，因为 $1024$ 恰好是 $2^{10}$，而计算机和二进制有密切联系。\n\n如果某个不使用地球历法的外星文明，也不一定用传统的二进制计算机，会不会也有类似的传统呢？", "description": "某个星球的历法和地球虽然数值上和地球不同，但是其结构和地球人的历法大体相似。具体地，他们的一年有 $n$ 个月，其中第 $i$ 个月有 $a_i$ 天。\n\n定义 $m$ 月 $d$ 日的**特征值**为将 $m,d$ 的十进制写出（不含前导 $0$）后，直接拼接的结果。例如 $3$ 月 $7$ 日特征值是 $37$，$12$ 月 $20$ 日特征值是 $1220$。\n\n如果一个日期的特征值是 $k$ 的自然数次幂，则称这个日期是**广义程序员节**。你可以求出这个星球的所有广义程序员节吗？", "inputFormat": "**本题有多组测试数据。** 输入的第一行有一个正整数 $T$，表示测试数据组数。\n\n每组测试数据输入两行。第一行有两个正整数 $n,k$，含义和题目描述一致；第二行有 $n$ 个正整数 $a_1,\\ldots,a_n$ 表示每个月的天数。", "outputFormat": "对于每组测试数据，先输出一行一个自然数表示广义程序员节个数；再输出若干行，每行一对用空格隔开的正整数 $m,d$ 表示 $m$ 月 $d$ 日表示一个程序员节。\n\n在同一组测试数据中，输出的日期应按照一年当中的顺序输出。", "hint": "【样例解释】\n\n对于第一组数据，外星人的日历有两个月，第一个月有 $11$ 天，第二个月有 $12$ 天。现在要求特征值是 $1$ 的整数次幂，只能是 $1$，然而日期的特征值**至少是两位数**，因此不存在符合要求的日期。\n\n对于第二组数据，这是地球人闰年时的公历，不难发现输出的日期特征值确实都是 $2$ 的自然数次幂。\n\n【数据范围】\n\n本题共 $25$ 个测试点，每个 $4$ 分。数据范围中，$\\sum n$ 表示所有测试数据的 $n$ 之和，例如样例的 $\\sum n=14$。\n\n|测试点编号|$T\\le$|$\\sum n\\le$|$a_i\\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$1$|$1000$|$1000$|$k=6$|\n|$2\\sim 3$|$1$|$1000$|$1000$||\n|$4\\sim 6$|$3$|$1000$|$1000$||\n|$7\\sim 11$|$3$|$10^4$|$10^4$||\n|$12\\sim 14$|$1$|$3\\times 10^5$|$10^9$||\n|$15\\sim 17$|$3$|$3\\times 10^5$|$10^9$||\n|$18\\sim 19$|$10^4$|$10^4$|$10^9$|$n=1$|\n|$20\\sim 21$|$10^4$|$9\\times 10^4$|$10^9$|$n\\le 9$|\n|$22\\sim 25$|$10^4$|$3\\times 10^5$|$10^9$||\n\n对于全部数据，保证 $1\\le T\\le 10^4$，$1\\le n\\le 3\\times 10^5$，$1\\le \\sum n\\le 3\\times 10^5$，$1\\le a_i,k\\le 10^9$，输入皆为整数。\n\n为避免卡常，题目保证单个测试点输出的日期不超过 $2\\times 10^4$ 个。", "locale": "zh-CN"}}}
{"pid": "P10247", "type": "P", "difficulty": 4, "samples": [["6 5\n1 2\n2 3\n1 3\n2 5\n3 6\n", "5 0 4 5 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "洛谷原创", "Special Judge", "洛谷月赛"], "title": "Pairing Pairs", "background": "本题为赛时原始数据。如果想要测试 $O(n)$，可以参考[加强版](https://www.luogu.com.cn/problem/P10248)。", "description": "你有 $m$ 个数对 $(u_i,v_i)$（保证 $1\\le u_i<v_i\\le n$ 且 $m$ 个数对两两不同），对于每个 $i$ 找一个 $j$ 使得 $u_i,v_i,u_j,v_j$ 四个数两两不同，或报告不存在。", "inputFormat": "输入的第一行有两个正整数 $n,m$ 表示数对中数字的范围和数对的个数。\n\n之后 $m$ 行，其中的第 $i$ 行有两个正整数 $u_i,v_i$ 表示第 $i$ 个数对。", "outputFormat": "输出一行 $m$ 个自然数，其中第 $i$ 个数表示你对这个 $i$ 找到的 $j$。若对应的 $j$ 不存在则输出 $0$。\n\n若符合题意的 $j$ 有多个，任意输出一个都可以通过本题。", "hint": "【样例解释】\n\n答案不唯一，例如 $i=4$ 时：\n- $j$ 也可以是 $3$，因为 $2,5,1,3$ 四个数互不相同。所以输出 `5 0 4 3 1` 也可通过测试点。\n- 然而 $j$ 不可以是 $1$，因为 $2,5,1,2$ 中存在相同数字。\n\n【数据范围】\n\n**本题采用捆绑测试。** 具体地，你只有通过一个子任务内所有测试点，才能拿到该子任务的分数。\n\n|子任务编号|$n\\le$|$m\\le$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$10^3$|$3\\times 10^3$||$19$|\n|$2$|$=10^3$|$=3\\times 10^5$||$16$|\n|$3$|$3\\times 10^5$|$=n-1$|$u_i=i,v_i=i+1$|$3$|\n|$4$|$3\\times 10^5$|$=n-1$|$v_i=i+1$|$22$|\n|$5$|$3\\times 10^5$|$3\\times 10^5$|数据随机|$11$|\n|$6$|$3\\times 10^5$|$3\\times 10^5$||$29$|\n\n子任务 $5$ 的具体生成过程：首先我**指定**一组 $n,m$，接下来执行 $m$ 次如下流程：\n- 在 $1\\sim n$ 内抽取 $x$，然后在 $1\\sim n-1$ 内抽取 $y$。\n- 若 $y\\ge x$ 则把 $y$ 增加 $1$，否则交换 $x,y$。\n- 判断数对 $(x,y)$ 是否出现过，若是，回到第一步。\n- 输出 $(x,y)$。\n\n对于全部数据，保证 $1\\le u_i<v_i\\le n\\le 3\\times 10^5$，$1\\le m\\le 3\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Pairing Pairs", "background": "本题为赛时原始数据。如果想要测试 $O(n)$，可以参考[加强版](https://www.luogu.com.cn/problem/P10248)。", "description": "你有 $m$ 个数对 $(u_i,v_i)$（保证 $1\\le u_i<v_i\\le n$ 且 $m$ 个数对两两不同），对于每个 $i$ 找一个 $j$ 使得 $u_i,v_i,u_j,v_j$ 四个数两两不同，或报告不存在。", "inputFormat": "输入的第一行有两个正整数 $n,m$ 表示数对中数字的范围和数对的个数。\n\n之后 $m$ 行，其中的第 $i$ 行有两个正整数 $u_i,v_i$ 表示第 $i$ 个数对。", "outputFormat": "输出一行 $m$ 个自然数，其中第 $i$ 个数表示你对这个 $i$ 找到的 $j$。若对应的 $j$ 不存在则输出 $0$。\n\n若符合题意的 $j$ 有多个，任意输出一个都可以通过本题。", "hint": "【样例解释】\n\n答案不唯一，例如 $i=4$ 时：\n- $j$ 也可以是 $3$，因为 $2,5,1,3$ 四个数互不相同。所以输出 `5 0 4 3 1` 也可通过测试点。\n- 然而 $j$ 不可以是 $1$，因为 $2,5,1,2$ 中存在相同数字。\n\n【数据范围】\n\n**本题采用捆绑测试。** 具体地，你只有通过一个子任务内所有测试点，才能拿到该子任务的分数。\n\n|子任务编号|$n\\le$|$m\\le$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$10^3$|$3\\times 10^3$||$19$|\n|$2$|$=10^3$|$=3\\times 10^5$||$16$|\n|$3$|$3\\times 10^5$|$=n-1$|$u_i=i,v_i=i+1$|$3$|\n|$4$|$3\\times 10^5$|$=n-1$|$v_i=i+1$|$22$|\n|$5$|$3\\times 10^5$|$3\\times 10^5$|数据随机|$11$|\n|$6$|$3\\times 10^5$|$3\\times 10^5$||$29$|\n\n子任务 $5$ 的具体生成过程：首先我**指定**一组 $n,m$，接下来执行 $m$ 次如下流程：\n- 在 $1\\sim n$ 内抽取 $x$，然后在 $1\\sim n-1$ 内抽取 $y$。\n- 若 $y\\ge x$ 则把 $y$ 增加 $1$，否则交换 $x,y$。\n- 判断数对 $(x,y)$ 是否出现过，若是，回到第一步。\n- 输出 $(x,y)$。\n\n对于全部数据，保证 $1\\le u_i<v_i\\le n\\le 3\\times 10^5$，$1\\le m\\le 3\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10248", "type": "P", "difficulty": 4, "samples": [["7 5\n0 2\n2 3\n0 3\n2 5\n3 6", "4 -1 3 4 0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["图论", "洛谷原创", "交互题", "Special Judge", "洛谷月赛"], "title": "Pairing Pairs （加强版）", "background": "本题是 [Pairing Pairs](https://www.luogu.com.cn/problem/P10247) 的加强版，数据范围和输入输出方式都有区别。", "description": "你有一些数对 $(u_i,v_i)$（保证 $0\\le u_i<v_i<n$ 且数对两两不同），对于每个 $i$ 找一个 $j$ 使得 $u_i,v_i,u_j,v_j$ 四个数两两不同，或报告不存在。\n\n**为加速输入输出，本题采用 grader 交互。请注意本题和赛时题目的区别，本题输入和输出的下标均从 $0$ 开始。**\n\n你需要实现一个函数 `int* find_pairs(int n,int m,int u[],int v[])`，其中 $n,m,u,v$ 如题意所示。\n\n返回值是一个数组（设为 `ans`），则 `ans[i]` 表示你对于 $i$ 找到的 $j$。若这样的 $j$ 不存在，则 `ans[i]=-1`，**不是 $0$。**\n\n**由于本题的返回值是一个指针，请保证返回的数组在堆空间中，具体可以参考[这篇博客](https://www.luogu.com.cn/article/sxyv0830)。**", "inputFormat": "**以下输入输出格式均为 `sample_interactive_lib.cpp` 的输入输出格式。你不需要输入或输出任何数据，甚至不应该实现 `main` 函数。**\n\n输入的第一行有两个正整数 $n,m$ 表示数对中数字的范围和数对的个数。\n\n之后 $m$ 行，其中的第 $i$ 行有两个正整数 $u_i,v_i$ 表示第 $i$ 个数对。", "outputFormat": "输出一行 $m$ 个自然数，其中第 $i$ 个数表示你对这个 $i$ 找到的 $j$。若对应的 $j$ 不存在则输出 $-1$。\n\n若符合题意的 $j$ 有多个，任意输出一个都可以通过本题。", "hint": "【样例解释】\n\n根据该程序，样例交互库将会调用 `find_pairs(7,5,{0,2,0,2,3},{2,3,3,5,6})`，然后如果你返回的数组是 `{4,-1,3,4,0}`，就会得到样例输出。这个样例输出是合法的。\n\n【数据范围】\n\n对于全体数据，保证 $1\\le n,m\\le 10^7$。\n\nstd 用时为 $324$ 毫秒，空间为 $267.87$ MB。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Pairing Pairs （加强版）", "background": "本题是 [Pairing Pairs](https://www.luogu.com.cn/problem/P10247) 的加强版，数据范围和输入输出方式都有区别。", "description": "你有一些数对 $(u_i,v_i)$（保证 $0\\le u_i<v_i<n$ 且数对两两不同），对于每个 $i$ 找一个 $j$ 使得 $u_i,v_i,u_j,v_j$ 四个数两两不同，或报告不存在。\n\n**为加速输入输出，本题采用 grader 交互。请注意本题和赛时题目的区别，本题输入和输出的下标均从 $0$ 开始。**\n\n你需要实现一个函数 `int* find_pairs(int n,int m,int u[],int v[])`，其中 $n,m,u,v$ 如题意所示。\n\n返回值是一个数组（设为 `ans`），则 `ans[i]` 表示你对于 $i$ 找到的 $j$。若这样的 $j$ 不存在，则 `ans[i]=-1`，**不是 $0$。**\n\n**由于本题的返回值是一个指针，请保证返回的数组在堆空间中，具体可以参考[这篇博客](https://www.luogu.com.cn/article/sxyv0830)。**", "inputFormat": "**以下输入输出格式均为 `sample_interactive_lib.cpp` 的输入输出格式。你不需要输入或输出任何数据，甚至不应该实现 `main` 函数。**\n\n输入的第一行有两个正整数 $n,m$ 表示数对中数字的范围和数对的个数。\n\n之后 $m$ 行，其中的第 $i$ 行有两个正整数 $u_i,v_i$ 表示第 $i$ 个数对。", "outputFormat": "输出一行 $m$ 个自然数，其中第 $i$ 个数表示你对这个 $i$ 找到的 $j$。若对应的 $j$ 不存在则输出 $-1$。\n\n若符合题意的 $j$ 有多个，任意输出一个都可以通过本题。", "hint": "【样例解释】\n\n根据该程序，样例交互库将会调用 `find_pairs(7,5,{0,2,0,2,3},{2,3,3,5,6})`，然后如果你返回的数组是 `{4,-1,3,4,0}`，就会得到样例输出。这个样例输出是合法的。\n\n【数据范围】\n\n对于全体数据，保证 $1\\le n,m\\le 10^7$。\n\nstd 用时为 $324$ 毫秒，空间为 $267.87$ MB。", "locale": "zh-CN"}}}
{"pid": "P10249", "type": "P", "difficulty": 7, "samples": [["4 3\n1 2 3 4 5\n1 2 3 4", "15 80 300 892 2069"]], "limits": {"time": [10007, 10007, 10007, 10007, 10007, 10007, 10007, 10007, 10007, 10007], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["多项式", "O2优化", "快速傅里叶变换 FFT", "快速数论变换 NTT", "模板题"], "title": "【模板】多项式复合函数（加强版）", "background": "本题相较于 [P5373](https://www.luogu.com.cn/problem/P5373) 扩大了数据范围。", "description": "给定一个 $n$ 次多项式 $F(x)$，和一个 $m$ 次多项式 $G(x)$，你需要求一个 $n$ 次多项式 $H(x)$ ，满足条件：  \n$$H(x) \\equiv F(G(x))\\space (\\text{mod }x^{n+1})$$   \n换种说法，你要求的多项式应满足：  \n$$H(x) \\equiv \\sum_{i=0}^n [x^i]F(x)\\times G(x)^i \\space (\\text{mod }x^{n+1})$$\n将结果的各项系数对 $998244353$ 取模。", "inputFormat": "第一行两个正整数 $n,m$，分别表示 $F(x)$ 和 $G(x)$ 的次数。\n\n第二行 $n+1$ 个非负整数 $f_i$，表示 $F(x)$ 的 $i$ 次项系数。\n\n第三行 $m+1$ 个非负整数 $g_i$，表示 $G(x)$ 的 $i$ 次项系数。   ", "outputFormat": "输出一行 $n+1$ 个非负整数，从低到高表示 $H(x)$ 的系数。", "hint": "**数据范围：**  \n\n- $1\\le m \\le n \\le 200000$    \n- $f_i,g_i \\in [0,998244353)\\cap \\mathbb Z$\n\n| 测试点编号 | $m,n\\le$ |\n| :----------: | :----------: |\n| $1,2$ | $30000$ |\n| $3,4$ | $50000$ |\n| $5,6$ | $100000$ |\n| $7,8$ | $150000$ |\n| $9,10$ | $200000$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】多项式复合函数（加强版）", "background": "本题相较于 [P5373](https://www.luogu.com.cn/problem/P5373) 扩大了数据范围。", "description": "给定一个 $n$ 次多项式 $F(x)$，和一个 $m$ 次多项式 $G(x)$，你需要求一个 $n$ 次多项式 $H(x)$ ，满足条件：  \n$$H(x) \\equiv F(G(x))\\space (\\text{mod }x^{n+1})$$   \n换种说法，你要求的多项式应满足：  \n$$H(x) \\equiv \\sum_{i=0}^n [x^i]F(x)\\times G(x)^i \\space (\\text{mod }x^{n+1})$$\n将结果的各项系数对 $998244353$ 取模。", "inputFormat": "第一行两个正整数 $n,m$，分别表示 $F(x)$ 和 $G(x)$ 的次数。\n\n第二行 $n+1$ 个非负整数 $f_i$，表示 $F(x)$ 的 $i$ 次项系数。\n\n第三行 $m+1$ 个非负整数 $g_i$，表示 $G(x)$ 的 $i$ 次项系数。   ", "outputFormat": "输出一行 $n+1$ 个非负整数，从低到高表示 $H(x)$ 的系数。", "hint": "**数据范围：**  \n\n- $1\\le m \\le n \\le 200000$    \n- $f_i,g_i \\in [0,998244353)\\cap \\mathbb Z$\n\n| 测试点编号 | $m,n\\le$ |\n| :----------: | :----------: |\n| $1,2$ | $30000$ |\n| $3,4$ | $50000$ |\n| $5,6$ | $100000$ |\n| $7,8$ | $150000$ |\n| $9,10$ | $200000$ |\n", "locale": "zh-CN"}}}
{"pid": "P10250", "type": "P", "difficulty": 2, "samples": [["4", "7"], ["10", "274"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "递推", "GESP"], "title": "[GESP样题 六级] 下楼梯", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1106>", "description": "顽皮的小明发现，下楼梯时每步可以走 $1$ 个台阶、$2$ 个台阶或 $3$ 个台阶。现在一共有 $N$ 个台阶，你能帮小明算算有多少种方案吗？", "inputFormat": "输入一行，包含一个整数 $N$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "对全部的测试点，保证 $1 \\leq N \\leq 60$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP样题 六级] 下楼梯", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1106>", "description": "顽皮的小明发现，下楼梯时每步可以走 $1$ 个台阶、$2$ 个台阶或 $3$ 个台阶。现在一共有 $N$ 个台阶，你能帮小明算算有多少种方案吗？", "inputFormat": "输入一行，包含一个整数 $N$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "对全部的测试点，保证 $1 \\leq N \\leq 60$。", "locale": "zh-CN"}}}
{"pid": "P10251", "type": "P", "difficulty": 2, "samples": [["2\n1 0 2 3\n-1 1 3 2", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "农场", "background": "加入 mc2b2t.com 谢谢喵。\n\nupd：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ks73gdzb.png)", "description": "ZHY 想管理他的农场。  \n\n具体地，他有 $n$ 片农场，每一片农场都是一个矩形，其四条边都平行于坐标轴。这些农场可以有重叠的部分。\n\n他现在想圈一块地来维护自己的农场。他希望这块地可以完全覆盖所有农场。为了方便，他还希望这块地也是一个四条边都平行于坐标轴的矩形。他想最小化矩形的面积。\n\n由于他的农场实在是太多了，所以他向你寻求帮助。你需要输出这个矩形的面积。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，输入四个整数 $x_{1},y_{1},x_{2},y_{2}$，表示存在一个以 $(x_{1},y_{1})$，$(x_{2},y_{2})$ 为两个对角顶点的农场。", "outputFormat": "输出一个整数表示圈地的最小面积。", "hint": "样例解释：如下图所示，绿色为第一个农场，红色为第二个农场，不难发现最小的圈地面积为 $3\\times 4=12$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8hhhluee.png)\n\n----\n\n对于 $40\\%$ 的数据，$n,|x|,|y| \\le 200$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^{5}$，$0 \\le |x|,|y| \\le 10^{9}$，$x_{1}\\neq x_{2}$，$y_{1}\\neq y_{2}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "农场", "background": "加入 mc2b2t.com 谢谢喵。\n\nupd：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ks73gdzb.png)", "description": "ZHY 想管理他的农场。  \n\n具体地，他有 $n$ 片农场，每一片农场都是一个矩形，其四条边都平行于坐标轴。这些农场可以有重叠的部分。\n\n他现在想圈一块地来维护自己的农场。他希望这块地可以完全覆盖所有农场。为了方便，他还希望这块地也是一个四条边都平行于坐标轴的矩形。他想最小化矩形的面积。\n\n由于他的农场实在是太多了，所以他向你寻求帮助。你需要输出这个矩形的面积。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，输入四个整数 $x_{1},y_{1},x_{2},y_{2}$，表示存在一个以 $(x_{1},y_{1})$，$(x_{2},y_{2})$ 为两个对角顶点的农场。", "outputFormat": "输出一个整数表示圈地的最小面积。", "hint": "样例解释：如下图所示，绿色为第一个农场，红色为第二个农场，不难发现最小的圈地面积为 $3\\times 4=12$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8hhhluee.png)\n\n----\n\n对于 $40\\%$ 的数据，$n,|x|,|y| \\le 200$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2 \\times 10^{5}$，$0 \\le |x|,|y| \\le 10^{9}$，$x_{1}\\neq x_{2}$，$y_{1}\\neq y_{2}$。", "locale": "zh-CN"}}}
{"pid": "P10252", "type": "P", "difficulty": 3, "samples": [["2\n6 2 4\n5 3 16", "6\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛", "分类讨论"], "title": "线性变换", "background": "", "description": "你有三个非负整数 $x,a,b$。在 $x \\ge 0$ 的前提下，你可以对 $x$ 进行任意次（包括 $0$ 次）如下操作：\n\n* 将 $x$ 变为 $ax - b$。\n\n你需要求出你通过操作能得到的 $x$ 的最小值。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据，输入一行三个整数 $x,a,b$。", "outputFormat": "对于每组数据，输出一行一个整数表示答案。", "hint": "样例解释：对于第一组数据，有 $x=6 \\rightarrow 8 \\rightarrow 12 \\rightarrow \\cdots$，很明显 $x=6$ 就是最小值。\n\n对于第二组数据，有 $x=5\\rightarrow -1$，$x=-1$ 为最小值。\n\n----\n\n对于 $30\\%$ 的数据，$T \\le 5$，$x,a,b \\le 100$。\n\n对于另 $20\\%$ 的数据，$a \\gt b$。\n\n对于另 $20\\%$ 的数据，$b=0$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 1000$，$0 \\le x,a,b \\le 10^{9}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "线性变换", "background": "", "description": "你有三个非负整数 $x,a,b$。在 $x \\ge 0$ 的前提下，你可以对 $x$ 进行任意次（包括 $0$ 次）如下操作：\n\n* 将 $x$ 变为 $ax - b$。\n\n你需要求出你通过操作能得到的 $x$ 的最小值。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据，输入一行三个整数 $x,a,b$。", "outputFormat": "对于每组数据，输出一行一个整数表示答案。", "hint": "样例解释：对于第一组数据，有 $x=6 \\rightarrow 8 \\rightarrow 12 \\rightarrow \\cdots$，很明显 $x=6$ 就是最小值。\n\n对于第二组数据，有 $x=5\\rightarrow -1$，$x=-1$ 为最小值。\n\n----\n\n对于 $30\\%$ 的数据，$T \\le 5$，$x,a,b \\le 100$。\n\n对于另 $20\\%$ 的数据，$a \\gt b$。\n\n对于另 $20\\%$ 的数据，$b=0$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 1000$，$0 \\le x,a,b \\le 10^{9}$。", "locale": "zh-CN"}}}
{"pid": "P10253", "type": "P", "difficulty": 5, "samples": [["2\n12\n136", "11\n123"], ["3\n10\n123\n7510", "-1\n111\n6761"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "高精度", "洛谷原创", "O2优化", "洛谷月赛"], "title": "说唱", "background": "在题目描述末尾有形式化题意。", "description": "ZHY 在一个空旷的房间里练习说唱。\n\nZHY 初始时会发出一个强度为 $x$ 的声音，这个声音会与墙壁发生碰撞，产生一个强度为 $\\lfloor \\frac x {10} \\rfloor$ 的回声。回声会继续与墙壁碰撞，产生回声的回声……直到这个回声的强度为 $0$。\n\n房间里还有一个收音机，它会记录下来所有的声音（包括初始发出的声音和所有回声）。可惜，ZHY 一不小心把收音机弄坏了。现在，收音机只能显示出记录下的所有声音的强度之和 $y$，你能通过这个仅有的信息计算出 ZHY 初始发出的声音的强度是多少吗？由于收音机太过古老，可能会出现一些故障导致显示的数有误。对于这种情况，你需要输出 $-1$。\n\n**形式化题意**\n\n如下定义一个函数：\n\n$$f(x)=\\begin{cases} 0 & x = 0 \\\\ x+f(\\lfloor\\frac{x}{10}\\rfloor) & x > 0 \\end{cases}$$\n\n比如 $f(123)=123+12+1=136$。\n\n给定一个数 $y$，请求出是否存在唯一的一个数 $x$ 满足 $f(x)=y$，如果有则输出 $x$，否则输出 $-1$。", "inputFormat": "本题有多组数据。\n\n第一行一个整数 $T$，表示数据组数。\n\n每一组数据包含一行一个整数 $y$。", "outputFormat": "对于每组数据，若存在唯一的 $x$ 对应这个 $y$，则输出 $x$。否则，输出 `-1`。", "hint": "| $\\mathrm{Subtask} \\kern{2pt} \\mathrm{id}$ | $y$ | 特殊性质 |分值 |\n| :-----: | :-----: | :-----: | :-----: |\n| $1$ | $< 1000$ | 无 | $10$ |\n| $2$ | $< 10^6$ | 无 | $15$ |\n| $3$ | $< 10^{100000}$ | $S\\le 9$ | $10$ |\n| $4$ | $< 10^{100000}$ | $S\\le 10$ | $20$ |\n| $5$ | $< 10^{3000}$ | 无 | $15$ |\n| $6$ | $< 10^{500000}$ | 无 | $30$ |\n\n特殊性质一栏中，$S\\le k$ 表示“若有解，$x$ 中所有位的数字和不超过 $k$”。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10$，$0 \\le y < 10^{500000}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "说唱", "background": "在题目描述末尾有形式化题意。", "description": "ZHY 在一个空旷的房间里练习说唱。\n\nZHY 初始时会发出一个强度为 $x$ 的声音，这个声音会与墙壁发生碰撞，产生一个强度为 $\\lfloor \\frac x {10} \\rfloor$ 的回声。回声会继续与墙壁碰撞，产生回声的回声……直到这个回声的强度为 $0$。\n\n房间里还有一个收音机，它会记录下来所有的声音（包括初始发出的声音和所有回声）。可惜，ZHY 一不小心把收音机弄坏了。现在，收音机只能显示出记录下的所有声音的强度之和 $y$，你能通过这个仅有的信息计算出 ZHY 初始发出的声音的强度是多少吗？由于收音机太过古老，可能会出现一些故障导致显示的数有误。对于这种情况，你需要输出 $-1$。\n\n**形式化题意**\n\n如下定义一个函数：\n\n$$f(x)=\\begin{cases} 0 & x = 0 \\\\ x+f(\\lfloor\\frac{x}{10}\\rfloor) & x > 0 \\end{cases}$$\n\n比如 $f(123)=123+12+1=136$。\n\n给定一个数 $y$，请求出是否存在唯一的一个数 $x$ 满足 $f(x)=y$，如果有则输出 $x$，否则输出 $-1$。", "inputFormat": "本题有多组数据。\n\n第一行一个整数 $T$，表示数据组数。\n\n每一组数据包含一行一个整数 $y$。", "outputFormat": "对于每组数据，若存在唯一的 $x$ 对应这个 $y$，则输出 $x$。否则，输出 `-1`。", "hint": "| $\\mathrm{Subtask} \\kern{2pt} \\mathrm{id}$ | $y$ | 特殊性质 |分值 |\n| :-----: | :-----: | :-----: | :-----: |\n| $1$ | $< 1000$ | 无 | $10$ |\n| $2$ | $< 10^6$ | 无 | $15$ |\n| $3$ | $< 10^{100000}$ | $S\\le 9$ | $10$ |\n| $4$ | $< 10^{100000}$ | $S\\le 10$ | $20$ |\n| $5$ | $< 10^{3000}$ | 无 | $15$ |\n| $6$ | $< 10^{500000}$ | 无 | $30$ |\n\n特殊性质一栏中，$S\\le k$ 表示“若有解，$x$ 中所有位的数字和不超过 $k$”。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10$，$0 \\le y < 10^{500000}$。", "locale": "zh-CN"}}}
{"pid": "P10254", "type": "P", "difficulty": 6, "samples": [["3 2", "22"], ["7 5", "22066"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数学", "洛谷原创", "O2优化", "前缀和", "洛谷月赛"], "title": "口吃", "background": "在题目描述末尾有形式化题意。", "description": "因为练习说唱，ZHY 变成了一个口吃。\n\nZHY 的口吃十分特别，具体的，假设 ZHY 要读一段有 $n$ 个字的话，那么他会将第一个字读一遍，第二个字读两遍，第三个字读三遍……第 $n$ 个字读 $n$ 遍。例如，“原神启动”ZHY 会读成“原神神启启启动动动动”。\n\nYHZ 手上有 $n$ 个字，每个字都有 YHZ 为其设定的悦耳值 $a_i$，且 $a_{1\\sim n}$ 会形成一个 $1\\sim n$ 的排列。现在，他要把这 $n$ 个字重新排列成一段话给 ZHY 读。因为 YHZ 喜欢玩原神，所以他要求重新排列后序列 $a$ 的逆序对个数恰好为 $k$。不过 YHZ 还没定好每个字的顺序，所以请你求出对于所有可能的排列，ZHY 按顺序将这段话读出后，YHZ 将听到的所有字的悦耳值之和的和。显然，如果 YHZ 听到了一个字多次，其悦耳值也应算进总和多次。\n\n**形式化题意**\n\n称一个 $1\\sim n$ 的排列 $a_1,a_2,\\cdots,a_n$ 是合法的，当且仅当其逆序对数**恰好**为 $k$。同时，对于一个排列 $a_1,a_2,\\cdots,a_n$，其权值是 $\\sum_{i=1}^n i\\times a_i$。\n\n给定 $n$ 和 $k$，请你求出所有 $1\\sim n$ 的合法排列的权值之和，答案对 $998244353$ 取模。\n\n一个排列的逆序对数定义为 $\\sum_{i=1}^n\\sum_{j=i+1}^n [a_i>a_j]$。", "inputFormat": "一行两个整数 $n,k$。", "outputFormat": "一行一个整数表示答案对 $998244353$ 取模的值。", "hint": "**样例 $1$ 解释**\n\n合法的排列只有两种：$2\\ 3\\ 1$ 和 $3\\ 1\\ 2$，它们的权值都是 $11$，故答案为 $22$。\n\n---\n\n对于 $10\\%$ 的数据，$n \\le 10$。\n\n对于 $25\\%$ 的数据，$n \\le 100$。\n\n对于另外 $20\\%$ 的数据，$k \\le 300$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 300$，$0\\le k \\le \\frac{n(n-1)}{2}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "口吃", "background": "在题目描述末尾有形式化题意。", "description": "因为练习说唱，ZHY 变成了一个口吃。\n\nZHY 的口吃十分特别，具体的，假设 ZHY 要读一段有 $n$ 个字的话，那么他会将第一个字读一遍，第二个字读两遍，第三个字读三遍……第 $n$ 个字读 $n$ 遍。例如，“原神启动”ZHY 会读成“原神神启启启动动动动”。\n\nYHZ 手上有 $n$ 个字，每个字都有 YHZ 为其设定的悦耳值 $a_i$，且 $a_{1\\sim n}$ 会形成一个 $1\\sim n$ 的排列。现在，他要把这 $n$ 个字重新排列成一段话给 ZHY 读。因为 YHZ 喜欢玩原神，所以他要求重新排列后序列 $a$ 的逆序对个数恰好为 $k$。不过 YHZ 还没定好每个字的顺序，所以请你求出对于所有可能的排列，ZHY 按顺序将这段话读出后，YHZ 将听到的所有字的悦耳值之和的和。显然，如果 YHZ 听到了一个字多次，其悦耳值也应算进总和多次。\n\n**形式化题意**\n\n称一个 $1\\sim n$ 的排列 $a_1,a_2,\\cdots,a_n$ 是合法的，当且仅当其逆序对数**恰好**为 $k$。同时，对于一个排列 $a_1,a_2,\\cdots,a_n$，其权值是 $\\sum_{i=1}^n i\\times a_i$。\n\n给定 $n$ 和 $k$，请你求出所有 $1\\sim n$ 的合法排列的权值之和，答案对 $998244353$ 取模。\n\n一个排列的逆序对数定义为 $\\sum_{i=1}^n\\sum_{j=i+1}^n [a_i>a_j]$。", "inputFormat": "一行两个整数 $n,k$。", "outputFormat": "一行一个整数表示答案对 $998244353$ 取模的值。", "hint": "**样例 $1$ 解释**\n\n合法的排列只有两种：$2\\ 3\\ 1$ 和 $3\\ 1\\ 2$，它们的权值都是 $11$，故答案为 $22$。\n\n---\n\n对于 $10\\%$ 的数据，$n \\le 10$。\n\n对于 $25\\%$ 的数据，$n \\le 100$。\n\n对于另外 $20\\%$ 的数据，$k \\le 300$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 300$，$0\\le k \\le \\frac{n(n-1)}{2}$。", "locale": "zh-CN"}}}
{"pid": "P10255", "type": "P", "difficulty": 6, "samples": [["4 2\n1 2 3 4\n1 2 1\n2 3 1", "4\n6\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛", "根号分治"], "title": "一首诗", "background": "题目描述最后有形式化题意。", "description": "文学大师 ZHY 创作了一首诗。\n\n这首诗由 $n$ 个单词组成，为了方便表述，ZHY 将这首诗记录为一个长度为 $n$ 的整数序列 $a_1,a_2,\\dots,a_n$。创作完后，ZHY 立刻将自己的作品分享给了 YHZ。YHZ 在感受到了诗歌之美后，希望借此提高一下自己的文学素养，于是准备对这首诗中的诗句进行摘抄。\n\nYHZ 认为一个“诗句”，应该是 $a_1,a_2,\\dots,a_n$ 的一个**连续**子序列，诗句的长度即为子序列的长度。当然，他不会摘抄所有的诗句，而是只选择“优美的诗句”进行摘抄。由于不懂文法，YHZ 简单地认为一个诗句是“优美的”，当且仅当这个诗句中不存在两个**相邻**的重复单词。形式化的说，一个连续子序列 $a_l,a_{l+1},\\dots,a_r$（$l\\leq r$）组成的诗句是“优美的”，当且仅当对于所有的 $l\\leq i<r$，有 $a_i\\neq a_{i+1}$。\n\nYHZ 发现文学大师 ZHY 写的诗里优美的诗句太多了，所以他需要进行归类。不过还是由于他不懂文法，他希望直接按照句子的长度归类。记 $b_i$ 为长度为 $i$ 的优美的诗句的个数，YHZ 希望知道 $b_1,b_2,\\dots,b_n$。但即使是所有的 $b$ 数量也太多了，所以他只需要知道 $b_1\\oplus b_2\\oplus\\dots\\oplus b_n$。\n\n还没等 YHZ 摘抄结束，文学大师 ZHY 告诉 YHZ 他要进行 $Q$ 次润色。具体地，每次润色，ZHY 会选择一个诗句 $[l_i,r_i]$ 和一个整数 $x_i$，并对所有的 $l_i\\leq j\\leq r_i$，将单词 $a_j$ 修改为 $a_j+x_i$。好学的 YHZ 希望对每次润色后的诗歌进行摘抄，即对于每次修改后的 $a_1,a_2\\dots,a_n$，知道 $b_1\\oplus b_2\\oplus\\dots\\oplus b_n$。\n\n不过文学大师 ZHY 太卷了，他进行的润色次数太多了，YHZ 还是承受不了这么大的工作量，所以他希望你帮帮他。\n\n**形式化题面：**\n\n给定一个序列 $a_{1\\sim n}$，定义 $b_i$ 表示 $a$ 中有多少个长度为 $i$ 的区间使得任意两个相邻的数都不同。有 $q$ 次操作，每次操作给定 $l,r,x$，表示将 $a_{l\\sim r}$ 都加上 $x$。请在第一次操作之前和每次操作之后求出 $b_1\\oplus b_2\\oplus \\cdots \\oplus b_n$。其中 $\\oplus$ 表示按位异或。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个整数 $a_{1},a_{2},\\cdots,a_{n}$。\n\n接下来 $q$ 行，每行三个整数 $l_{i},r_{i},x_{i}$，表示一次操作。", "outputFormat": "输出 $q+1$ 行，表示第一次操作前和每次操作后的答案。", "hint": "样例解释：\n\n第一次修改之前序列为 $[1,2,3,4]$，得到 $b_1=4,b_2=3,b_3=2,b_4=1$，故答案为 $4\\oplus 3 \\oplus 2\\oplus 1=4$。\n\n第一次修改之后序列为 $[2,3,3,4]$，得到 $b_1=4,b_2=2,b_3=0,b_4=0$，故答案为 $4\\oplus 2 \\oplus 0\\oplus 0=6$。\n\n第二次修改之后序列为 $[2,4,4,4]$，得到 $b_1=4,b_2=1,b_3=0,b_4=0$，故答案为 $4\\oplus 1 \\oplus 0\\oplus 0=5$。\n\n----\n\n| 子任务编号 | $n$ | $q$ | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $0$ | $\\le 300$ | $\\le 300$ | 无 | $15$ |\n| $1$ | $\\le 5000$ | $\\le 5000$ | 无 | $15$ |\n| $2$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | 保证 $a_i,x$ 在值域内均匀随机 | $10$ |\n| $3$ | $\\le 5\\times 10^4$ | $\\le 5\\times 10^4$ | 无 | $30$ |\n| $4$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | $l=1,r=n$ | $5$ |\n| $5$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | 无 | $25$ |\n\n对于所有数据，$1 \\le n,q \\le 2\\times 10^5$，$1\\le l \\le r \\le n$，$0\\le |x|,|a_i|\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "一首诗", "background": "题目描述最后有形式化题意。", "description": "文学大师 ZHY 创作了一首诗。\n\n这首诗由 $n$ 个单词组成，为了方便表述，ZHY 将这首诗记录为一个长度为 $n$ 的整数序列 $a_1,a_2,\\dots,a_n$。创作完后，ZHY 立刻将自己的作品分享给了 YHZ。YHZ 在感受到了诗歌之美后，希望借此提高一下自己的文学素养，于是准备对这首诗中的诗句进行摘抄。\n\nYHZ 认为一个“诗句”，应该是 $a_1,a_2,\\dots,a_n$ 的一个**连续**子序列，诗句的长度即为子序列的长度。当然，他不会摘抄所有的诗句，而是只选择“优美的诗句”进行摘抄。由于不懂文法，YHZ 简单地认为一个诗句是“优美的”，当且仅当这个诗句中不存在两个**相邻**的重复单词。形式化的说，一个连续子序列 $a_l,a_{l+1},\\dots,a_r$（$l\\leq r$）组成的诗句是“优美的”，当且仅当对于所有的 $l\\leq i<r$，有 $a_i\\neq a_{i+1}$。\n\nYHZ 发现文学大师 ZHY 写的诗里优美的诗句太多了，所以他需要进行归类。不过还是由于他不懂文法，他希望直接按照句子的长度归类。记 $b_i$ 为长度为 $i$ 的优美的诗句的个数，YHZ 希望知道 $b_1,b_2,\\dots,b_n$。但即使是所有的 $b$ 数量也太多了，所以他只需要知道 $b_1\\oplus b_2\\oplus\\dots\\oplus b_n$。\n\n还没等 YHZ 摘抄结束，文学大师 ZHY 告诉 YHZ 他要进行 $Q$ 次润色。具体地，每次润色，ZHY 会选择一个诗句 $[l_i,r_i]$ 和一个整数 $x_i$，并对所有的 $l_i\\leq j\\leq r_i$，将单词 $a_j$ 修改为 $a_j+x_i$。好学的 YHZ 希望对每次润色后的诗歌进行摘抄，即对于每次修改后的 $a_1,a_2\\dots,a_n$，知道 $b_1\\oplus b_2\\oplus\\dots\\oplus b_n$。\n\n不过文学大师 ZHY 太卷了，他进行的润色次数太多了，YHZ 还是承受不了这么大的工作量，所以他希望你帮帮他。\n\n**形式化题面：**\n\n给定一个序列 $a_{1\\sim n}$，定义 $b_i$ 表示 $a$ 中有多少个长度为 $i$ 的区间使得任意两个相邻的数都不同。有 $q$ 次操作，每次操作给定 $l,r,x$，表示将 $a_{l\\sim r}$ 都加上 $x$。请在第一次操作之前和每次操作之后求出 $b_1\\oplus b_2\\oplus \\cdots \\oplus b_n$。其中 $\\oplus$ 表示按位异或。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个整数 $a_{1},a_{2},\\cdots,a_{n}$。\n\n接下来 $q$ 行，每行三个整数 $l_{i},r_{i},x_{i}$，表示一次操作。", "outputFormat": "输出 $q+1$ 行，表示第一次操作前和每次操作后的答案。", "hint": "样例解释：\n\n第一次修改之前序列为 $[1,2,3,4]$，得到 $b_1=4,b_2=3,b_3=2,b_4=1$，故答案为 $4\\oplus 3 \\oplus 2\\oplus 1=4$。\n\n第一次修改之后序列为 $[2,3,3,4]$，得到 $b_1=4,b_2=2,b_3=0,b_4=0$，故答案为 $4\\oplus 2 \\oplus 0\\oplus 0=6$。\n\n第二次修改之后序列为 $[2,4,4,4]$，得到 $b_1=4,b_2=1,b_3=0,b_4=0$，故答案为 $4\\oplus 1 \\oplus 0\\oplus 0=5$。\n\n----\n\n| 子任务编号 | $n$ | $q$ | 特殊性质 | 分值 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $0$ | $\\le 300$ | $\\le 300$ | 无 | $15$ |\n| $1$ | $\\le 5000$ | $\\le 5000$ | 无 | $15$ |\n| $2$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | 保证 $a_i,x$ 在值域内均匀随机 | $10$ |\n| $3$ | $\\le 5\\times 10^4$ | $\\le 5\\times 10^4$ | 无 | $30$ |\n| $4$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | $l=1,r=n$ | $5$ |\n| $5$ | $\\le 2\\times 10^5$ | $\\le 2\\times 10^5$ | 无 | $25$ |\n\n对于所有数据，$1 \\le n,q \\le 2\\times 10^5$，$1\\le l \\le r \\le n$，$0\\le |x|,|a_i|\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10256", "type": "P", "difficulty": 6, "samples": [["3 1 3\n1 3\n2 3\n1 4\n2 3\n2\n1 2 4 5\n2", "10\n9"], ["2 1 1\n1 1\n1 2\n0 2\n2", "4"], ["2 1 1\n1 1\n1 2\n1 2\n2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "洛谷原创", "洛谷月赛", "动态 DP", "全局平衡二叉树"], "title": "高仿的 Migos", "background": "", "description": "经过刻苦的训练，ZHY 终于成为了一名说唱歌手。但这天，说唱歌手 ZHY 看到了同行说唱组合 Migos 的作品，立刻意识到了自己的差距，于是他要学习 Migos 的说唱技巧，复刻 Migos 的成功。\n\n经过数个日夜的研究，ZHY 最终挑选出了 $n$ 部 Migos 的说唱作品，依次编号为 $1,2,\\dots,n$。他认为只要学习完这 $n$ 部作品，就可以成为更加优秀的说唱歌手。于是，他会从第 $1$ 部作品，按编号从小到大的顺序依次进行学习，学习完第 $n$ 部作品就结束学习。\n\n不过，说唱歌手 ZHY 的学习方式很特殊。对于每部作品，他只会听 $1$ 分钟。这种学习方式的问题是，对于第 $i$ 部作品，他在投入 $1$ 分钟后，有可能学习成功，也有可能会失败，具体地，如果 ZHY 学习的是作品 $i$，那么在他花一分钟的时间进行学习后：\n\n- 有 $P_i$ 的概率，ZHY 学习成功了，那么他会接着去学习作品 $i+1$（当然如果 $i=n$ 就直接结束学习）。\n- 有 $1-P_i$ 的概率，ZHY 学习失败了。不幸的是，ZHY 脑内的记忆还会因此产生混乱，导致他只会记住前 $x_i$ 部作品，即他必须从第 $x_i+1$ 部作品开始重新学习。\n\nZHY 在尝试了几次学习后，深受记忆混乱的困扰，于是向脑科学专家 YHZ 求助。经过脑科学专家 YHZ 的研究，他发现所有的 $x_i$ 有一定的规律。具体地，他发现有 $m$ 对自然数 $(l_i,r_i)$, 其中 $i=1,2\\dots,m$，满足 $0\\leq l_i<r_i\\leq n$，那么 $x_i=\\max\\limits_{j=1}^m\\{l_j\n\\mid l_j+1\\leq i\\leq r_j\\}$，特别地，如果对于所有 $1\\leq j\\leq m$，都**不满足** $l_j+1\\leq i\\leq r_j$，那么 $x_i=0$。\n\n现在，ZHY 对自己的学习能力有了充分了解，但刚才的尝试让他疲惫不堪，所以他决定休息 $1$ 秒，并希望你帮他计算一下他期望多少分钟可以结束学习。不过他意识到，自己如果每部作品只学固定的 $1$ 分钟是不够全面的，所以他决定更改一些作品他所会学习的那一分钟，这会导致他学习这一部作品的成功概率发生改变。具体地，现在 ZHY 提出了 $k$ 个要求，每个要求有两种可能：\n\n1. 修改某个作品 $i$ 学习成功的概率 $P_i$。\n1. 询问以当前的概率他学习完 $n$ 部作品期望要多少分钟。\n\n由于 ZHY 要休息，所以他找上了你，希望你来解决他的要求。对于他的每个第二种要求，你要告诉他期望时间对 $10^9+7$ 取模的结果。ZHY 给了你 $1$ 秒的时间，因为他只能休息这么久。", "inputFormat": "第一行三个整数 $n,m,k$。意思如题面所述。\n\n接下来 $n$ 行，每行两个正整数 $p_i,q_i$，表示 $P_i=\\frac{p_i}{q_i}$。\n\n接下来 $m$ 行，每行两个整数 $l_{i},r_{i}$。\n\n接下来 $k$ 行，每行都是以下两种格式的其中一种：\n\n- `1 x a b` 为修改操作。表示 $P_x$ 变成了 $\\frac a b$。保证 $1\\le x \\le n$，$1 \\le a \\le b < 10^9+7$ 且 $x,a,b$ 均为正整数。\n\n- `2` 为查询操作。表示询问此时结束学习的期望时间是多少。对 $10^9+7$ 取模。", "outputFormat": "对于每个询问，输出一行一个整数表示答案。", "hint": "**本题使用捆绑测试。**\n\n| Subtask 编号 | $n$ | $m$ | $k$ | 特殊性质 |分值 |\n| :-----: | :-----: | :-----: | :-----: | :-----: | :-----: |\n| $0$ | $\\le 300$ | $\\le 300$ | $\\le 300$ | 无 | $11$ |\n| $1$ | $\\le 3000$ | $\\le 3000$ | $\\le 3000$ | 无 | $4$ |\n| $2$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 1$ | B | $5$ |\n| $3$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 1$ | 无 | $14$ |\n| $4$ | $\\le 10^5$ | $=0$ | $\\le 10^5$ | 无 | $19$ |\n| $5$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ | A | $19$ |\n| $6$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ | B | $8$ |\n| $7$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ | C | $10$ |\n| $8$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ | 无 | $10$ |\n\n以下的“区间”均指 $[l_i,r_i]$。\n\n特殊性质 A：保证对于 $\\forall i \\in [1,m]$，$r_i-l_i+1\\le 5$。\n\n特殊性质 B：保证这些区间两两的交 $\\le 1$。即对于 $\\forall i,j \\in [1,m]$ 且 $i\\ne j$，有 $r_i\\le l_j$ 或 $r_j\\le l_i$。\n\n特殊性质 C：保证这些区间不存在包含关系。即对于 $\\forall i,j \\in [1,m]$ 且 $i\\ne j$，有 $l_i>l_j$ 或 $r_i<r_j$。\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 10^5$，$0 \\le m \\le 10^5$，$1 \\le p_{i} \\le q_{i} \\lt 10^{9}+7$，$0 \\le l_{i} \\lt r_{i} \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "高仿的 Migos", "background": "", "description": "经过刻苦的训练，ZHY 终于成为了一名说唱歌手。但这天，说唱歌手 ZHY 看到了同行说唱组合 Migos 的作品，立刻意识到了自己的差距，于是他要学习 Migos 的说唱技巧，复刻 Migos 的成功。\n\n经过数个日夜的研究，ZHY 最终挑选出了 $n$ 部 Migos 的说唱作品，依次编号为 $1,2,\\dots,n$。他认为只要学习完这 $n$ 部作品，就可以成为更加优秀的说唱歌手。于是，他会从第 $1$ 部作品，按编号从小到大的顺序依次进行学习，学习完第 $n$ 部作品就结束学习。\n\n不过，说唱歌手 ZHY 的学习方式很特殊。对于每部作品，他只会听 $1$ 分钟。这种学习方式的问题是，对于第 $i$ 部作品，他在投入 $1$ 分钟后，有可能学习成功，也有可能会失败，具体地，如果 ZHY 学习的是作品 $i$，那么在他花一分钟的时间进行学习后：\n\n- 有 $P_i$ 的概率，ZHY 学习成功了，那么他会接着去学习作品 $i+1$（当然如果 $i=n$ 就直接结束学习）。\n- 有 $1-P_i$ 的概率，ZHY 学习失败了。不幸的是，ZHY 脑内的记忆还会因此产生混乱，导致他只会记住前 $x_i$ 部作品，即他必须从第 $x_i+1$ 部作品开始重新学习。\n\nZHY 在尝试了几次学习后，深受记忆混乱的困扰，于是向脑科学专家 YHZ 求助。经过脑科学专家 YHZ 的研究，他发现所有的 $x_i$ 有一定的规律。具体地，他发现有 $m$ 对自然数 $(l_i,r_i)$, 其中 $i=1,2\\dots,m$，满足 $0\\leq l_i<r_i\\leq n$，那么 $x_i=\\max\\limits_{j=1}^m\\{l_j\n\\mid l_j+1\\leq i\\leq r_j\\}$，特别地，如果对于所有 $1\\leq j\\leq m$，都**不满足** $l_j+1\\leq i\\leq r_j$，那么 $x_i=0$。\n\n现在，ZHY 对自己的学习能力有了充分了解，但刚才的尝试让他疲惫不堪，所以他决定休息 $1$ 秒，并希望你帮他计算一下他期望多少分钟可以结束学习。不过他意识到，自己如果每部作品只学固定的 $1$ 分钟是不够全面的，所以他决定更改一些作品他所会学习的那一分钟，这会导致他学习这一部作品的成功概率发生改变。具体地，现在 ZHY 提出了 $k$ 个要求，每个要求有两种可能：\n\n1. 修改某个作品 $i$ 学习成功的概率 $P_i$。\n1. 询问以当前的概率他学习完 $n$ 部作品期望要多少分钟。\n\n由于 ZHY 要休息，所以他找上了你，希望你来解决他的要求。对于他的每个第二种要求，你要告诉他期望时间对 $10^9+7$ 取模的结果。ZHY 给了你 $1$ 秒的时间，因为他只能休息这么久。", "inputFormat": "第一行三个整数 $n,m,k$。意思如题面所述。\n\n接下来 $n$ 行，每行两个正整数 $p_i,q_i$，表示 $P_i=\\frac{p_i}{q_i}$。\n\n接下来 $m$ 行，每行两个整数 $l_{i},r_{i}$。\n\n接下来 $k$ 行，每行都是以下两种格式的其中一种：\n\n- `1 x a b` 为修改操作。表示 $P_x$ 变成了 $\\frac a b$。保证 $1\\le x \\le n$，$1 \\le a \\le b < 10^9+7$ 且 $x,a,b$ 均为正整数。\n\n- `2` 为查询操作。表示询问此时结束学习的期望时间是多少。对 $10^9+7$ 取模。", "outputFormat": "对于每个询问，输出一行一个整数表示答案。", "hint": "**本题使用捆绑测试。**\n\n| Subtask 编号 | $n$ | $m$ | $k$ | 特殊性质 |分值 |\n| :-----: | :-----: | :-----: | :-----: | :-----: | :-----: |\n| $0$ | $\\le 300$ | $\\le 300$ | $\\le 300$ | 无 | $11$ |\n| $1$ | $\\le 3000$ | $\\le 3000$ | $\\le 3000$ | 无 | $4$ |\n| $2$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 1$ | B | $5$ |\n| $3$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 1$ | 无 | $14$ |\n| $4$ | $\\le 10^5$ | $=0$ | $\\le 10^5$ | 无 | $19$ |\n| $5$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ | A | $19$ |\n| $6$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ | B | $8$ |\n| $7$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ | C | $10$ |\n| $8$ | $\\le 10^5$ | $\\le 10^5$ | $\\le 10^5$ | 无 | $10$ |\n\n以下的“区间”均指 $[l_i,r_i]$。\n\n特殊性质 A：保证对于 $\\forall i \\in [1,m]$，$r_i-l_i+1\\le 5$。\n\n特殊性质 B：保证这些区间两两的交 $\\le 1$。即对于 $\\forall i,j \\in [1,m]$ 且 $i\\ne j$，有 $r_i\\le l_j$ 或 $r_j\\le l_i$。\n\n特殊性质 C：保证这些区间不存在包含关系。即对于 $\\forall i,j \\in [1,m]$ 且 $i\\ne j$，有 $l_i>l_j$ 或 $r_i<r_j$。\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 10^5$，$0 \\le m \\le 10^5$，$1 \\le p_{i} \\le q_{i} \\lt 10^{9}+7$，$0 \\le l_{i} \\lt r_{i} \\le n$。", "locale": "zh-CN"}}}
{"pid": "P10257", "type": "P", "difficulty": 2, "samples": [["2\na 3 4 0 3\nb 2 5 1 1\n1 2", "5 7\n..bbbbb\n..bbbbb\naaaa...\naaaa...\naaaa..."], ["2\na 3 4 0 3\nb 2 5 1 1\n2 1", "4 9\n.....aaaa\n.....aaaa\nbbbbbaaaa\nbbbbb...."], ["4\ng 9 5 0 2\na 3 2 1 1\nc 5 10 0 2\np 8 7 1 6\n4 3 2 1", "18 17\n..........ggggg..\n..........ggggg..\n..........ggggg..\n..........ggggg..\n..........ggggg..\n..........ggggg..\n..........ggggg..\n..........ggggg..\n........aaggggg..\n........aa.......\nppppppp.aa.......\npppppppcccccccccc\npppppppcccccccccc\npppppppcccccccccc\npppppppcccccccccc\npppppppcccccccccc\nppppppp..........\nppppppp.........."]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2023", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #5] Zlagalica", "background": "**译自 [COCI 2023/2024 Contest #5](https://hsin.hr/coci/archive/2023_2024) T1「[Zlagalica](https://hsin.hr/coci/archive/2023_2024/contest5_tasks.pdf)」**", "description": "Little Maja 喜欢拼图。既然大家都已经认识她很久了，那么一定不会对 Maja 在一个晴朗的日子里，收到一份奇怪的拼图作为礼物感到惊讶。\n\n这个拼图由 $n$ 片组成。每片拼图的形状都是矩形，并具有一定的颜色。同时，每片拼图的背面都写着 $u$ 和 $d$ 两个数字。在精心尝试了一段时间后，Maja 发现了这些数字的含义。\n\n她发现数字 $u$ 表示**方向**，换句话说，描述了下一块拼图从上侧还是从右侧连接这一块拼图。数字 $d$ 表示下一块拼图连接这一块拼图的起点行/列。更具体地：\n\n- 如果 $u=0$，我们通过将下一块拼图左下角放在当前拼图上边的第 $d$ 列，将下一块拼图拼接在当前拼图的上方。\n\n- 如果 $u=1$，我们通过将下一块拼图左下角放在当前拼图右边的第 $d$ 行，将下一块拼图拼接在当前拼图的右边。\n\n假设有颜色分别为 `a` 和 `b` 的两块拼图。图一展示了 $u=0,d=3$ 时的拼接情况；图二展示了 $u=1,d=3$ 时的拼接情况（这里的 $u,d$ 均写在颜色为 `a` 的拼图上）\n\n| 图一 | 图二 |\n|:--:|:--:\n|![](https://cdn.luogu.com.cn/upload/image_hosting/b6c7t1e9.png)| ![](https://cdn.luogu.com.cn/upload/image_hosting/sxahll4p.png)|\n\nMaja 已经厌烦了这个拼图，但是她的好奇心是无限的。这正是她寻求你帮助的原因。她想知道，给出全部的拼图信息，以及拼装它们的顺序序列，最终拼图是什么样的？编写程序输出一个长方形字符矩阵，恰好包含最终拼图的样子，用 `.` 表示这里没有拼图。\n\n\n", "inputFormat": "输入的第一行包含一个整数 $n$（$1 \\le n \\le 20$），表示拼图的数目。\n\n接下来 $n$ 行，第 $i$ 行包含一个字符和四个整数 $b_i,r_i,s_i,u_i,d_i$，描述了第 $i$ 块拼图：\n\n- $b_i$ 是一个小写英文字母，表示第 $i$ 块拼图的颜色。\n- $r_i,s_i$（$1 \\le r_i,s_i \\le 10$）依次表示第 $i$ 块拼图行与列的长度。\n- $u_i,d_i$（$0 \\le u_i \\le 1$，$1 \\le d_i \\le r_i,s_i$（与 $u_i$ 有关））表示第 $i$ 块拼图背面的数字，含义如题所述。\n\n最后一行包含 $n$ 个整数，表示拼图拼接的顺序。其中数字 $i$ 表示第 $i$ 块输入的拼图。保证每块拼图在序列中出现且仅出现一次。", "outputFormat": "第一行输出完成的拼图的高度与宽度。\n\n接下来若干行，输出拼图，不属于拼图的位置用 `.` 替代。", "hint": "### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 17 | 拼图拼接的顺序与输入相同 |\n| 2 | 12 | 对于所有拼图，$u=0$ |\n| 3 | 12 | 对于所有拼图，$u=1$ |\n| 4 | 9 | 无额外限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #5] Zlagalica", "background": "**译自 [COCI 2023/2024 Contest #5](https://hsin.hr/coci/archive/2023_2024) T1「[Zlagalica](https://hsin.hr/coci/archive/2023_2024/contest5_tasks.pdf)」**", "description": "Little Maja 喜欢拼图。既然大家都已经认识她很久了，那么一定不会对 Maja 在一个晴朗的日子里，收到一份奇怪的拼图作为礼物感到惊讶。\n\n这个拼图由 $n$ 片组成。每片拼图的形状都是矩形，并具有一定的颜色。同时，每片拼图的背面都写着 $u$ 和 $d$ 两个数字。在精心尝试了一段时间后，Maja 发现了这些数字的含义。\n\n她发现数字 $u$ 表示**方向**，换句话说，描述了下一块拼图从上侧还是从右侧连接这一块拼图。数字 $d$ 表示下一块拼图连接这一块拼图的起点行/列。更具体地：\n\n- 如果 $u=0$，我们通过将下一块拼图左下角放在当前拼图上边的第 $d$ 列，将下一块拼图拼接在当前拼图的上方。\n\n- 如果 $u=1$，我们通过将下一块拼图左下角放在当前拼图右边的第 $d$ 行，将下一块拼图拼接在当前拼图的右边。\n\n假设有颜色分别为 `a` 和 `b` 的两块拼图。图一展示了 $u=0,d=3$ 时的拼接情况；图二展示了 $u=1,d=3$ 时的拼接情况（这里的 $u,d$ 均写在颜色为 `a` 的拼图上）\n\n| 图一 | 图二 |\n|:--:|:--:\n|![](https://cdn.luogu.com.cn/upload/image_hosting/b6c7t1e9.png)| ![](https://cdn.luogu.com.cn/upload/image_hosting/sxahll4p.png)|\n\nMaja 已经厌烦了这个拼图，但是她的好奇心是无限的。这正是她寻求你帮助的原因。她想知道，给出全部的拼图信息，以及拼装它们的顺序序列，最终拼图是什么样的？编写程序输出一个长方形字符矩阵，恰好包含最终拼图的样子，用 `.` 表示这里没有拼图。\n\n\n", "inputFormat": "输入的第一行包含一个整数 $n$（$1 \\le n \\le 20$），表示拼图的数目。\n\n接下来 $n$ 行，第 $i$ 行包含一个字符和四个整数 $b_i,r_i,s_i,u_i,d_i$，描述了第 $i$ 块拼图：\n\n- $b_i$ 是一个小写英文字母，表示第 $i$ 块拼图的颜色。\n- $r_i,s_i$（$1 \\le r_i,s_i \\le 10$）依次表示第 $i$ 块拼图行与列的长度。\n- $u_i,d_i$（$0 \\le u_i \\le 1$，$1 \\le d_i \\le r_i,s_i$（与 $u_i$ 有关））表示第 $i$ 块拼图背面的数字，含义如题所述。\n\n最后一行包含 $n$ 个整数，表示拼图拼接的顺序。其中数字 $i$ 表示第 $i$ 块输入的拼图。保证每块拼图在序列中出现且仅出现一次。", "outputFormat": "第一行输出完成的拼图的高度与宽度。\n\n接下来若干行，输出拼图，不属于拼图的位置用 `.` 替代。", "hint": "### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 17 | 拼图拼接的顺序与输入相同 |\n| 2 | 12 | 对于所有拼图，$u=0$ |\n| 3 | 12 | 对于所有拼图，$u=1$ |\n| 4 | 9 | 无额外限制 |", "locale": "zh-CN"}}}
{"pid": "P10258", "type": "P", "difficulty": 4, "samples": [["3\n0 1 2\n1 2 3", "2\n1 3\n0 1"], ["3\n4 8 31\n0 4 8", "5\n31 30\n30 28\n28 24\n24 16\n16 0"], ["5\n0 1 2 4 5\n7 6 5 3 2", "9\n1 3\n3 7\n0 1\n1 0\n2 6\n0 2\n7 3\n5 7\n4 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "位运算", "构造", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #5] Bitovi", "background": "**译自 [COCI 2023/2024 Contest #5](https://hsin.hr/coci/archive/2023_2024) T2「[Bitovi](https://hsin.hr/coci/archive/2023_2024/contest5_tasks.pdf)」**", "description": "哪个先出现，鸡还是蛋？作为一个百万富翁活上一百年好，还是贫穷中度过七天好？如何成为国际象棋大师？如何拉起百叶窗？如何通过期末考试？如何训练龙？这些都是一些有趣的问题，我们可以在竞赛结束后再去思考，但现在我们提出一个不那么有趣的计算机科学问题。\n\n给定两组数集 $A$ 和 $B$，大小均为 $N$。每次操作，你可以从集合 $A$ 中选择一个任意元素，并改变其二进制表示中的一个任意数位。结果数不能是改变前集合 $A$ 中的元素。\n\n例如，数字 $5$ 的二进制是 $0101_2$。通过一次操作，它可以变成 $13=1101_2$、$1=0001_2$、$7=0111_2$ 或 $4=0100_2$。\n\n确定一系列操作，通过这些操作集合 $A$ 变得和集合 $B$ 相等。如果两个集合大小相同，并且集合 $A$ 中没有不属于集合 $B$ 的元素，则认为两个集合是相等的。\n\n注意：操作的数量不必是最小的，但必须满足任务的限制。", "inputFormat": "第一行包含一个整数 $N$（$1 \\le N \\le 2^{15}$），集合 $A$ 和 $B$ 的大小。\n\n第二行包含 $N$ 个不同的整数 $a_i$（$0 \\le a_i < 2^{15}$），表示集合 $A$ 的元素。\n\n第二行包含 $N$ 个不同的整数 $b_i$（$0 \\le b_i < 2^{15}$），表示集合 $B$ 的元素。", "outputFormat": "第一行输出操作的数目，不超过 $2^{19}$。\n\n接下来若干行，每行输出 $x,y$（$0 \\le x, y < 2^{15}$），表示将集合 $A$ 中的 $x$ 修改为 $y$。$x$ 和 $y$ 在二进制位中只能有一位不同。并且，必须满足 $x\\in A$，$y\\not \\in A$。", "hint": "### 样例解释 1\n\n如果我们先操作 $0\\ 1$，再操作 $1\\ 3$，两次操作间，集合 $A$ 将有两个相同的元素，这是不被允许的。另一种可能的方案是 $2\\ 3$，$0\\ 2$。\n\n### 样例解释 2\n\n$31=11111_2$。按照从最低有效位到最高有效位修改，依次可以得到 $30,28,24,16$ 和 $0$。在所有的操作后，$A$ 和 $B$ 相同。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 10 | $a_i,b_i \\le 2^{14}$ |\n| 2 | 15 | $N \\le 7$ | \n| 3 | 30 | $N \\le 2^7$ |\n| 4 | 15 | 无额外限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #5] Bitovi", "background": "**译自 [COCI 2023/2024 Contest #5](https://hsin.hr/coci/archive/2023_2024) T2「[Bitovi](https://hsin.hr/coci/archive/2023_2024/contest5_tasks.pdf)」**", "description": "哪个先出现，鸡还是蛋？作为一个百万富翁活上一百年好，还是贫穷中度过七天好？如何成为国际象棋大师？如何拉起百叶窗？如何通过期末考试？如何训练龙？这些都是一些有趣的问题，我们可以在竞赛结束后再去思考，但现在我们提出一个不那么有趣的计算机科学问题。\n\n给定两组数集 $A$ 和 $B$，大小均为 $N$。每次操作，你可以从集合 $A$ 中选择一个任意元素，并改变其二进制表示中的一个任意数位。结果数不能是改变前集合 $A$ 中的元素。\n\n例如，数字 $5$ 的二进制是 $0101_2$。通过一次操作，它可以变成 $13=1101_2$、$1=0001_2$、$7=0111_2$ 或 $4=0100_2$。\n\n确定一系列操作，通过这些操作集合 $A$ 变得和集合 $B$ 相等。如果两个集合大小相同，并且集合 $A$ 中没有不属于集合 $B$ 的元素，则认为两个集合是相等的。\n\n注意：操作的数量不必是最小的，但必须满足任务的限制。", "inputFormat": "第一行包含一个整数 $N$（$1 \\le N \\le 2^{15}$），集合 $A$ 和 $B$ 的大小。\n\n第二行包含 $N$ 个不同的整数 $a_i$（$0 \\le a_i < 2^{15}$），表示集合 $A$ 的元素。\n\n第二行包含 $N$ 个不同的整数 $b_i$（$0 \\le b_i < 2^{15}$），表示集合 $B$ 的元素。", "outputFormat": "第一行输出操作的数目，不超过 $2^{19}$。\n\n接下来若干行，每行输出 $x,y$（$0 \\le x, y < 2^{15}$），表示将集合 $A$ 中的 $x$ 修改为 $y$。$x$ 和 $y$ 在二进制位中只能有一位不同。并且，必须满足 $x\\in A$，$y\\not \\in A$。", "hint": "### 样例解释 1\n\n如果我们先操作 $0\\ 1$，再操作 $1\\ 3$，两次操作间，集合 $A$ 将有两个相同的元素，这是不被允许的。另一种可能的方案是 $2\\ 3$，$0\\ 2$。\n\n### 样例解释 2\n\n$31=11111_2$。按照从最低有效位到最高有效位修改，依次可以得到 $30,28,24,16$ 和 $0$。在所有的操作后，$A$ 和 $B$ 相同。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 10 | $a_i,b_i \\le 2^{14}$ |\n| 2 | 15 | $N \\le 7$ | \n| 3 | 30 | $N \\le 2^7$ |\n| 4 | 15 | 无额外限制 |", "locale": "zh-CN"}}}
{"pid": "P10259", "type": "P", "difficulty": 5, "samples": [["4\n", "0 1 4 16\n"]], "limits": {"time": [2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2023", "组合数学", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #5] Piratski kod", "background": "**译自 [COCI 2023/2024 Contest #5](https://hsin.hr/coci/archive/2023_2024) T3「[Piratski kod](https://hsin.hr/coci/archive/2023_2024/contest5_tasks.pdf)」**", "description": "Marrrtina 船长和她的海盗团队，在搜索了三个月之后，终于挖掘出一箱属于最著名的意大利海盗的失落宝藏。但是，要打开这个宝箱，她需要一个密码，该密码被描述在宝箱旁边的一个瓶子中的一条信息中。\n\n信息如下：\n\n---\n\n只有最有价值的海盗才能打开宝箱，密码是以下谜题的答案：对于长度为 $a$ 的二进制序列 $s$，且其中唯一的连续两个 $1$ 位于序列的末尾，如果满足以下条件，它是一个数字 $x$​ 的海盗表示：\n$$\ns[0]\\cdot \\text{Fib}[2] + s[1]\\cdot \\text{Fib}[3] + s[2]\\cdot \\text{Fib}[4] + \\ldots + s[a − 2]\\cdot \\text{Fib}[a] = \\sum_{i=0}^{a-2} s[i]\\cdot \\text{Fib}[2 + i] = x\n$$\n这里的 $\\text{Fib}[x]$ 表示第 $x$ 个斐波那契数。斐波那契数的定义如下：$\\text{Fib}[1] = 1$，$\\text{Fib}[2] = 1$，对于每个 $y > 2$，$\\text{Fib}[y] = \\text{Fib}[y − 1] + \\text{Fib}[y − 2]$。\n\n例如，$11_p = 1$，$011_p = 2$，$1010011_p = 17$，这里的 $p$ 表示数字的海盗表示。\n\n海盗代码是一个二进制序列（没有关于连续 $1$ 的任何条件），代表一系列正整数的序列。为了阅读它，我们将其分割为尽可能多的部分，这些部分是某些数字的海盗表示（可能还有一个不是任何数字的海盗表示的后缀），并按顺序写出这些整数。例如，我们将 $01111010110101$ 分割为 $011|11|01011|0101$，最后一部分不是海盗表示，因此我们删除它，得到 $011|11|01011$，并读到序列 $2,1,7$。\n\n海盗代码的值等于解码后的正整数序列的值之和。前面的密码的值为 $10$。\n\n我最喜欢的数字 $P$ 是长度为 $k$ 的所有海盗代码值的总和。由于该数字可能很大，打开宝箱的密码是 $P$ 除以 $10^9 + 7$ 的余数。\n\n— *Leonarrrdo da Pisa*\n\n---\n\n如果 Marrrtina 无法打开宝箱，她的船员将认为她不值得信任，并将她逼上走板。", "inputFormat": "一行一个整数 $n\\ (n\\le 5\\ 000)$。", "outputFormat": "输出一行 $n$ 个整数，其中第 $k$ 个整数表示长度为 $k$ 的密码谜题的答案。", "hint": "### 样例解释 1\n\n长度为 $1$ 的代码是 $0$ 和 $1$，它们的值都是 $0$。\n\n代码 $11$ 的值为 $1$，其余所有长度为 $2$ 的代码值都是 $0$。\n\n代码 $1111$ 的值为 $2$，$0011$ 的值为 $3$。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 20 | $n=20$ |\n| 2 | 40 | $n=300$ |\n| 3 | 50 | $n=5000$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #5] Piratski kod", "background": "**译自 [COCI 2023/2024 Contest #5](https://hsin.hr/coci/archive/2023_2024) T3「[Piratski kod](https://hsin.hr/coci/archive/2023_2024/contest5_tasks.pdf)」**", "description": "Marrrtina 船长和她的海盗团队，在搜索了三个月之后，终于挖掘出一箱属于最著名的意大利海盗的失落宝藏。但是，要打开这个宝箱，她需要一个密码，该密码被描述在宝箱旁边的一个瓶子中的一条信息中。\n\n信息如下：\n\n---\n\n只有最有价值的海盗才能打开宝箱，密码是以下谜题的答案：对于长度为 $a$ 的二进制序列 $s$，且其中唯一的连续两个 $1$ 位于序列的末尾，如果满足以下条件，它是一个数字 $x$​ 的海盗表示：\n$$\ns[0]\\cdot \\text{Fib}[2] + s[1]\\cdot \\text{Fib}[3] + s[2]\\cdot \\text{Fib}[4] + \\ldots + s[a − 2]\\cdot \\text{Fib}[a] = \\sum_{i=0}^{a-2} s[i]\\cdot \\text{Fib}[2 + i] = x\n$$\n这里的 $\\text{Fib}[x]$ 表示第 $x$ 个斐波那契数。斐波那契数的定义如下：$\\text{Fib}[1] = 1$，$\\text{Fib}[2] = 1$，对于每个 $y > 2$，$\\text{Fib}[y] = \\text{Fib}[y − 1] + \\text{Fib}[y − 2]$。\n\n例如，$11_p = 1$，$011_p = 2$，$1010011_p = 17$，这里的 $p$ 表示数字的海盗表示。\n\n海盗代码是一个二进制序列（没有关于连续 $1$ 的任何条件），代表一系列正整数的序列。为了阅读它，我们将其分割为尽可能多的部分，这些部分是某些数字的海盗表示（可能还有一个不是任何数字的海盗表示的后缀），并按顺序写出这些整数。例如，我们将 $01111010110101$ 分割为 $011|11|01011|0101$，最后一部分不是海盗表示，因此我们删除它，得到 $011|11|01011$，并读到序列 $2,1,7$。\n\n海盗代码的值等于解码后的正整数序列的值之和。前面的密码的值为 $10$。\n\n我最喜欢的数字 $P$ 是长度为 $k$ 的所有海盗代码值的总和。由于该数字可能很大，打开宝箱的密码是 $P$ 除以 $10^9 + 7$ 的余数。\n\n— *Leonarrrdo da Pisa*\n\n---\n\n如果 Marrrtina 无法打开宝箱，她的船员将认为她不值得信任，并将她逼上走板。", "inputFormat": "一行一个整数 $n\\ (n\\le 5\\ 000)$。", "outputFormat": "输出一行 $n$ 个整数，其中第 $k$ 个整数表示长度为 $k$ 的密码谜题的答案。", "hint": "### 样例解释 1\n\n长度为 $1$ 的代码是 $0$ 和 $1$，它们的值都是 $0$。\n\n代码 $11$ 的值为 $1$，其余所有长度为 $2$ 的代码值都是 $0$。\n\n代码 $1111$ 的值为 $2$，$0011$ 的值为 $3$。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 20 | $n=20$ |\n| 2 | 40 | $n=300$ |\n| 3 | 50 | $n=5000$ |\n", "locale": "zh-CN"}}}
{"pid": "P10260", "type": "P", "difficulty": 5, "samples": [["3 2 5 1\n2 2 4\n3\n2 0 1\n", "4 14 9\n"], ["2 3 4 0\n3 1\n3\n3 2 0\n", "0 3 10\n"], ["4 3 10 3\n2 4 5 6\n3\n4 3 0\n", "9 18 47\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["二分", "2023", "三分", "COCI（克罗地亚）", "决策单调性"], "title": "[COCI 2023/2024 #5] Rolete", "background": "**译自 [COCI 2023/2024 Contest #5](https://hsin.hr/coci/archive/2023_2024) T4「[Rolete](https://hsin.hr/coci/archive/2023_2024/contest5_tasks.pdf)」**", "description": "一个周六的下午，Luka 从午睡中醒来，想起今天有 COCI！在比赛前，他只需要做一件事情：拉起窗帘。\n\n卢卡的房间里有 $n$ 个窗帘，其中第 $i$ 个窗帘距离窗户顶部下降了 $a_i$ 厘米。他可以通过两种方式拉起窗帘：\n\n- 他可以手动开始拉起任意一个窗帘。使用这种方法，他每拉起 $1$ 厘米需要 $t$ 秒钟。\n- 他可以按下一个按钮，同时以相同的速度将所有窗帘同步拉起。\n\n按下按钮时，窗帘的上升速度定义如下：如果所有窗帘都在上升，每个窗帘都会在 $s$ 秒内上升 $1$ 厘米。如果 $r$ 个窗帘已经完全升起，这会减慢系统的速度。那么剩余的窗帘每上升 $1$ 厘米需要 $s + k \\cdot r$ 秒钟。\n\nCOCI 即将开始，Luka 希望尽快拉起他的窗帘。与此同时，他的兄弟 Marin 走进房间，问了他 $q$ 个问题：**为了使窗帘下降的最大高度不超过 $h$ 厘米，你需要的最短时间是多少**？Marin 对于每个问题都考虑窗帘的初始状态。\n\n他们意识到在 COCI 之前没有足够的时间来考虑这个问题。幸运的是，这个问题也出现在这里！帮助他们解决它！\n\n注意：Luka 总是将窗帘拉起一个整数值的厘米。", "inputFormat": "第一行四个整数 $n,t,s,k\\ (1\\le n,t,s\\le 10^5,0\\le k\\le 10^5)$，分别表示窗帘个数，手动拉窗帘所需的时间，按下按钮拉窗帘所需的时间和同步上升的减慢因子。\n\n第二行包含 $n$ 个整数 $a_i\\ (0\\le a_i\\le 10^5)$，表示初始窗帘的状态。\n\n第三行包含一个整数 $q\\ (1\\le q\\le 10^5)$，表示问题个数。\n\n第四行包含 $q$ 个整数 $h_i\\ (0\\le h_i\\le 10^5)$，表示最大窗帘高度。", "outputFormat": "输出一行 $q$ 个整数，第 $i$ 个表示使得窗帘下降的最大高度不超过 $h_i$ 厘米所需的最短用时。", "hint": "### 样例解释 1\n\n为了使所有窗帘的下降高度最多为 $2$ 厘米，卢卡需要手动将第三个窗帘拉起 $2$ 厘米。最快的方法是手动拉起它，这将花费他 $4$ 秒钟。\n\n如果所有窗帘都需要完全拉起，卢卡可以先手动将第三个窗帘拉起 $2$ 厘米。然后，他可以按下按钮，让所有窗帘同时上升 $2$ 厘米。总共需要的时间为 $4 + 10 = 14$ 秒。\n\n类似地，如果窗帘的下降高度最多为 $1$ 厘米，卢卡会先手动将第三个窗帘拉起 $2$ 厘米，然后将所有窗帘一起上升 $1$ 厘米。拉起的总时间将为 $9$ 秒。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 16 | $n,q,a_i,h_i\\le 100$ |\n| 2 | 26 | $k=0$ |\n| 3 | 32 | $q=1$ |\n| 4 | 36 | 无额外限制 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #5] Rolete", "background": "**译自 [COCI 2023/2024 Contest #5](https://hsin.hr/coci/archive/2023_2024) T4「[Rolete](https://hsin.hr/coci/archive/2023_2024/contest5_tasks.pdf)」**", "description": "一个周六的下午，Luka 从午睡中醒来，想起今天有 COCI！在比赛前，他只需要做一件事情：拉起窗帘。\n\n卢卡的房间里有 $n$ 个窗帘，其中第 $i$ 个窗帘距离窗户顶部下降了 $a_i$ 厘米。他可以通过两种方式拉起窗帘：\n\n- 他可以手动开始拉起任意一个窗帘。使用这种方法，他每拉起 $1$ 厘米需要 $t$ 秒钟。\n- 他可以按下一个按钮，同时以相同的速度将所有窗帘同步拉起。\n\n按下按钮时，窗帘的上升速度定义如下：如果所有窗帘都在上升，每个窗帘都会在 $s$ 秒内上升 $1$ 厘米。如果 $r$ 个窗帘已经完全升起，这会减慢系统的速度。那么剩余的窗帘每上升 $1$ 厘米需要 $s + k \\cdot r$ 秒钟。\n\nCOCI 即将开始，Luka 希望尽快拉起他的窗帘。与此同时，他的兄弟 Marin 走进房间，问了他 $q$ 个问题：**为了使窗帘下降的最大高度不超过 $h$ 厘米，你需要的最短时间是多少**？Marin 对于每个问题都考虑窗帘的初始状态。\n\n他们意识到在 COCI 之前没有足够的时间来考虑这个问题。幸运的是，这个问题也出现在这里！帮助他们解决它！\n\n注意：Luka 总是将窗帘拉起一个整数值的厘米。", "inputFormat": "第一行四个整数 $n,t,s,k\\ (1\\le n,t,s\\le 10^5,0\\le k\\le 10^5)$，分别表示窗帘个数，手动拉窗帘所需的时间，按下按钮拉窗帘所需的时间和同步上升的减慢因子。\n\n第二行包含 $n$ 个整数 $a_i\\ (0\\le a_i\\le 10^5)$，表示初始窗帘的状态。\n\n第三行包含一个整数 $q\\ (1\\le q\\le 10^5)$，表示问题个数。\n\n第四行包含 $q$ 个整数 $h_i\\ (0\\le h_i\\le 10^5)$，表示最大窗帘高度。", "outputFormat": "输出一行 $q$ 个整数，第 $i$ 个表示使得窗帘下降的最大高度不超过 $h_i$ 厘米所需的最短用时。", "hint": "### 样例解释 1\n\n为了使所有窗帘的下降高度最多为 $2$ 厘米，卢卡需要手动将第三个窗帘拉起 $2$ 厘米。最快的方法是手动拉起它，这将花费他 $4$ 秒钟。\n\n如果所有窗帘都需要完全拉起，卢卡可以先手动将第三个窗帘拉起 $2$ 厘米。然后，他可以按下按钮，让所有窗帘同时上升 $2$ 厘米。总共需要的时间为 $4 + 10 = 14$ 秒。\n\n类似地，如果窗帘的下降高度最多为 $1$ 厘米，卢卡会先手动将第三个窗帘拉起 $2$ 厘米，然后将所有窗帘一起上升 $1$ 厘米。拉起的总时间将为 $9$ 秒。\n\n### 子任务\n\n| Subtask | Points | Constraints |\n| :--: | :--: | :--: |\n| 1 | 16 | $n,q,a_i,h_i\\le 100$ |\n| 2 | 26 | $k=0$ |\n| 3 | 32 | $q=1$ |\n| 4 | 36 | 无额外限制 |", "locale": "zh-CN"}}}
{"pid": "P10261", "type": "P", "difficulty": 5, "samples": [["3\n3\n4\n5\n", "Lucija\nLucija\nIvan\n"], ["3\n7\n8\n9\n", "Lucija\nLucija\nIvan\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #5] Trokut", "background": "**译自 [COCI 2023/2024 Contest #5](https://hsin.hr/coci/archive/2023_2024) T5「[Trokut](https://hsin.hr/coci/archive/2023_2024/contest5_tasks.pdf)」**", "description": "Ivan 和 Lucija 正在一次遥远的旅程中。他们知道旅程将持续很长时间，而且在某个时候他们会感到无聊。当他们在考虑做什么时，Lucija 想到了一个游戏。\n\n她在纸上画了 $N$ 个点，使它们形成一个正 $N$ 边形的顶点，并按顺序标记为 $1$ 到 $N$。轮到的玩家选择两个点，满足连接这两个点的线段不与先前画的任何线段相交，并连接这两个点。线段可以在顶点处相接触。如果在玩家的回合后存在三条连接的线段形成一个三角形，即存在三个点，它们都通过已画的线段相连，则该玩家获胜。当然，玩家可以连接相邻的顶点，这些线段也可以用于形成三角形。玩家轮流进行，Lucija 先手。\n\n两位玩家都非常熟练，我们知道他们会采用最优策略进行游戏。你的任务是确定给定 $N$ 时，谁将成为游戏的赢家。可以证明游戏将在有限次移动后结束，而且总会产生一个赢家。", "inputFormat": "第一行一个整数 $T\\ (1\\le T\\le 10\\ 000)$，表示场景数。\n\n接下来 $T$ 行，每行一个整数 $N\\ (3\\le N\\le 10^9)$，表示 Lucija 在纸上画的点数。", "outputFormat": "输出 $T$ 行，按给定的顺序，对于每个场景输出 `Ivan` 或 `Lucija`，表示该场景中的获胜者。", "hint": "### 样例解释 1\n\n当 $N = 3$ 时，必须连接所有三条可能的线段，Lucija 获胜。\n\n当 $N = 4$ 时，Lucija 可以连接点 $1$ 和点 $3$ 之间的线段。我们看到，在 Ivan 的任何一步之后，Lucija 都可以连接一个三角形并获胜。\n\n### 子任务\n\n| Subtask| Points | Constraints|\n| :--:|:--:|:--:|\n|1|13|$T\\le 18,N\\le 20$|\n|2|36|$T\\le 998,N\\le 1000$\n|3|15|$N\\le 10^5$|\n|4|46|无额外限制|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #5] Trokut", "background": "**译自 [COCI 2023/2024 Contest #5](https://hsin.hr/coci/archive/2023_2024) T5「[Trokut](https://hsin.hr/coci/archive/2023_2024/contest5_tasks.pdf)」**", "description": "Ivan 和 Lucija 正在一次遥远的旅程中。他们知道旅程将持续很长时间，而且在某个时候他们会感到无聊。当他们在考虑做什么时，Lucija 想到了一个游戏。\n\n她在纸上画了 $N$ 个点，使它们形成一个正 $N$ 边形的顶点，并按顺序标记为 $1$ 到 $N$。轮到的玩家选择两个点，满足连接这两个点的线段不与先前画的任何线段相交，并连接这两个点。线段可以在顶点处相接触。如果在玩家的回合后存在三条连接的线段形成一个三角形，即存在三个点，它们都通过已画的线段相连，则该玩家获胜。当然，玩家可以连接相邻的顶点，这些线段也可以用于形成三角形。玩家轮流进行，Lucija 先手。\n\n两位玩家都非常熟练，我们知道他们会采用最优策略进行游戏。你的任务是确定给定 $N$ 时，谁将成为游戏的赢家。可以证明游戏将在有限次移动后结束，而且总会产生一个赢家。", "inputFormat": "第一行一个整数 $T\\ (1\\le T\\le 10\\ 000)$，表示场景数。\n\n接下来 $T$ 行，每行一个整数 $N\\ (3\\le N\\le 10^9)$，表示 Lucija 在纸上画的点数。", "outputFormat": "输出 $T$ 行，按给定的顺序，对于每个场景输出 `Ivan` 或 `Lucija`，表示该场景中的获胜者。", "hint": "### 样例解释 1\n\n当 $N = 3$ 时，必须连接所有三条可能的线段，Lucija 获胜。\n\n当 $N = 4$ 时，Lucija 可以连接点 $1$ 和点 $3$ 之间的线段。我们看到，在 Ivan 的任何一步之后，Lucija 都可以连接一个三角形并获胜。\n\n### 子任务\n\n| Subtask| Points | Constraints|\n| :--:|:--:|:--:|\n|1|13|$T\\le 18,N\\le 20$|\n|2|36|$T\\le 998,N\\le 1000$\n|3|15|$N\\le 10^5$|\n|4|46|无额外限制|", "locale": "zh-CN"}}}
{"pid": "P10262", "type": "P", "difficulty": 3, "samples": [["2\n102", "5\n"], ["2\n12342", "11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "GESP"], "title": "[GESP样题 六级] 亲朋数", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1106>", "description": "\n给定一串长度为 $L$、由数字 $0\\sim 9$ 组成的数字串 $S$。容易知道，它的连续子串共有 $\\frac{L(L + 1)}2$ 个。如果某个子串对应的数（允许有前导零）是 $p$ 的倍数，则称该子串为数字串 $S$ 对于 $p$ 的亲朋数。\n\n例如，数字串 $S$ 为“ $12342$ ”、$p$ 为 $2$，则在 $15$ 个连续子串中，亲朋数有“ $12$ ”、“ $1234$ ”、“ $12342$ ”、“ $2$ ”、“ $234$ ”、“ $2342$ ”、“ $34$ ”、“ $342$ ”、“ $4$ ”、“ $42$ ”、“ $2$ ”共 $11$ 个。注意其中“ $2$ ”出现了 $2$ 次，但由于其在 $S$ 中的位置不同，记为不同的亲朋数。\n\n现在，告诉你数字串 $S$ 和正整数 $p$ ，你能计算出有多少个亲朋数吗？", "inputFormat": "输入的第一行，包含一个正整数 $p$。约定 $2 \\leq p \\leq 128$。  \n输入的第二行，包含一个长为 $L$ 的数字串 $S$。约定 $1 \\leq L \\leq 10^6$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "## 样例 1 解释\n\n$5$ 个亲朋数，分别 $10$、$102$、$0$、$02$、$2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP样题 六级] 亲朋数", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1106>", "description": "\n给定一串长度为 $L$、由数字 $0\\sim 9$ 组成的数字串 $S$。容易知道，它的连续子串共有 $\\frac{L(L + 1)}2$ 个。如果某个子串对应的数（允许有前导零）是 $p$ 的倍数，则称该子串为数字串 $S$ 对于 $p$ 的亲朋数。\n\n例如，数字串 $S$ 为“ $12342$ ”、$p$ 为 $2$，则在 $15$ 个连续子串中，亲朋数有“ $12$ ”、“ $1234$ ”、“ $12342$ ”、“ $2$ ”、“ $234$ ”、“ $2342$ ”、“ $34$ ”、“ $342$ ”、“ $4$ ”、“ $42$ ”、“ $2$ ”共 $11$ 个。注意其中“ $2$ ”出现了 $2$ 次，但由于其在 $S$ 中的位置不同，记为不同的亲朋数。\n\n现在，告诉你数字串 $S$ 和正整数 $p$ ，你能计算出有多少个亲朋数吗？", "inputFormat": "输入的第一行，包含一个正整数 $p$。约定 $2 \\leq p \\leq 128$。  \n输入的第二行，包含一个长为 $L$ 的数字串 $S$。约定 $1 \\leq L \\leq 10^6$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "## 样例 1 解释\n\n$5$ 个亲朋数，分别 $10$、$102$、$0$、$02$、$2$。", "locale": "zh-CN"}}}
{"pid": "P10263", "type": "P", "difficulty": 3, "samples": [["2 5 2", "9"], ["100 100 100", "185233"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2024", "GESP", "调和级数"], "title": "[GESP202403 八级] 公倍数问题", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1148>", "description": "小 A 写了一个 $N \\times M$ 的矩阵 $A$，我们看不到这个矩阵，但我们可以知道，其中第 $i$ 行第 $j$ 列的元素 $A_{i,j}$ 是 $i$ 和 $j$ 的公倍数（$i=1,\\dots,N$，$j=1,\\dots,M$）。现在有 $K$ 个小朋友，其中第 $k$ 个小朋友想知道，矩阵 $A$ 中最多有多少个元素可以是 $k$（$k=1,2,\\dots,K$）。请你帮助这些小朋友求解。\n\n注意：每位小朋友的答案互不相关，例如，有些位置既可能是 $x$，又可能是 $y$，则它同时可以满足 $x,y$ 两名小朋友的要求。\n\n方便起见，你只需要输出 $\\sum_{k=1}^{K}{k \\times \\texttt{ans}_k}$ 即可，其中 $\\texttt{ans}_k$ 表示第 $k$ 名小朋友感兴趣的答案。", "inputFormat": "第一行三个正整数 $N,M,K$。", "outputFormat": "输出一行，即 $\\sum_{k=1}^{K}{k \\times \\texttt{ans}_k}$。\n\n请注意，这个数可能很大，使用 C++ 语言的选手请酌情使用 `long long` 等数据类型存储答案。", "hint": "### 样例 1 解释\n\n只有 $A_{1,1}$ 可以是 $1$，其余都不行。\n\n$A_{1,1},A_{1,2},A_{2,1},A_{2,2}$ 都可以是 $2$，而其余不行。\n\n因此答案是 $1 \\times 1 + 2 \\times 4 = 9$。\n\n### 数据规模\n\n对于 $30\\%$ 的测试点，保证 $N,M,K \\leq 10$；\n\n对于 $60\\%$ 的测试点，保证 $N,M,K \\leq 500$；\n\n对于 $100\\%$ 的测试点，保证 $N,M \\leq 10^5$，$K \\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202403 八级] 公倍数问题", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1148>", "description": "小 A 写了一个 $N \\times M$ 的矩阵 $A$，我们看不到这个矩阵，但我们可以知道，其中第 $i$ 行第 $j$ 列的元素 $A_{i,j}$ 是 $i$ 和 $j$ 的公倍数（$i=1,\\dots,N$，$j=1,\\dots,M$）。现在有 $K$ 个小朋友，其中第 $k$ 个小朋友想知道，矩阵 $A$ 中最多有多少个元素可以是 $k$（$k=1,2,\\dots,K$）。请你帮助这些小朋友求解。\n\n注意：每位小朋友的答案互不相关，例如，有些位置既可能是 $x$，又可能是 $y$，则它同时可以满足 $x,y$ 两名小朋友的要求。\n\n方便起见，你只需要输出 $\\sum_{k=1}^{K}{k \\times \\texttt{ans}_k}$ 即可，其中 $\\texttt{ans}_k$ 表示第 $k$ 名小朋友感兴趣的答案。", "inputFormat": "第一行三个正整数 $N,M,K$。", "outputFormat": "输出一行，即 $\\sum_{k=1}^{K}{k \\times \\texttt{ans}_k}$。\n\n请注意，这个数可能很大，使用 C++ 语言的选手请酌情使用 `long long` 等数据类型存储答案。", "hint": "### 样例 1 解释\n\n只有 $A_{1,1}$ 可以是 $1$，其余都不行。\n\n$A_{1,1},A_{1,2},A_{2,1},A_{2,2}$ 都可以是 $2$，而其余不行。\n\n因此答案是 $1 \\times 1 + 2 \\times 4 = 9$。\n\n### 数据规模\n\n对于 $30\\%$ 的测试点，保证 $N,M,K \\leq 10$；\n\n对于 $60\\%$ 的测试点，保证 $N,M,K \\leq 500$；\n\n对于 $100\\%$ 的测试点，保证 $N,M \\leq 10^5$，$K \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10264", "type": "P", "difficulty": 4, "samples": [["1\n6\n1 2 2 3 1 3\n4\n1 3\n1 6\n1 5\n5 6\n", "1\n1\n0\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "2024", "GESP"], "title": "[GESP202403 八级] 接竹竿", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1148>", "description": "小杨同学想用卡牌玩一种叫做“接竹竿”的游戏。\n\n游戏规则是：每张牌上有一个点数 $v$，将给定的牌依次放入一列牌的末端。若放入之前这列牌中已有与这张牌点数相同的牌，则小杨同学会将这张牌和点数相同的牌之间的所有牌全部取出队列（包括这两张牌本身）。\n\n小杨同学现在有一个长度为 $n$ 的卡牌序列 $A$，其中每张牌的点数为 $A_i$（$1\\le i\\le n$）。小杨同学有 $q$ 次询问。第 $i$ 次（$1\\le i\\le q$）询问时，小杨同学会给出 $l_i,r_i$ 小杨同学想知道如果用下标在 $[l_i,r_i]$ 的所有卡牌按照下标顺序玩“接竹竿”的游戏，最后队列中剩余的牌数。", "inputFormat": "一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，第一行包含一个正整数 $n$，表示卡牌序列 $A$ 的长度。\n\n第二行包含 $n$ 个正整数 $A_1,A_2,\\dots,A_n$，表示卡牌的点数 $A$。\n\n第三行包含一个正整数 $q$，表示询问次数。\n\n接下来 $q$ 行，每行两个正整数 $l_i,r_i$ 表示一组询问。", "outputFormat": "对于每组数据，输出 $q$ 行。第 $i$ 行（$1\\le i\\le q$）输出一个非负整数，表示第 $i$ 次询问的答案。", "hint": "**样例解释**\n\n对于第一次询问，小杨同学会按照 $1,2,2$ 的顺序放置卡牌，在放置最后一张卡牌时，两张点数为 $2$ 的卡牌会被收走，因此最后队列中只剩余一张点数为 $1$ 的卡牌。\n\n对于第二次询问，队列变化情况为：\n\n$\\{\\}\\to\\{1\\}\\to\\{1,2\\}\\to\\{1,2,2\\}\\to\\{1\\}\\to\\{1,3\\}\\to\\{1,3,1\\}\\to\\{\\}\\to\\{3\\}$。因此最后队列中只剩余一张点数为 $3$ 的卡牌。\n\n**数据范围**\n\n|子任务|分数|$T$|$n$|$q$|$\\max A_i$|特殊条件| \n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n|$1$|$30$|$\\le 5$|$\\le100$|$\\le100$|$\\le13$|\n|$2$|$30$|$\\le 5$|$\\le 1.5\\times10^4$|$\\le 1.5\\times10^4$|$\\le13$|所有询问的右端点等于 $n$\n|$3$|$40$|$\\le 5$|$\\le 1.5\\times10^4$|$\\le 1.5\\times10^4$|$\\le13$|\n\n对于全部数据，保证有 $1\\le T\\le 5$，$1\\le n\\le 1.5\\times 10^4$，$1\\le q\\le 1.5\\times 10^4$，$1\\le A_i\\le 13$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202403 八级] 接竹竿", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1148>", "description": "小杨同学想用卡牌玩一种叫做“接竹竿”的游戏。\n\n游戏规则是：每张牌上有一个点数 $v$，将给定的牌依次放入一列牌的末端。若放入之前这列牌中已有与这张牌点数相同的牌，则小杨同学会将这张牌和点数相同的牌之间的所有牌全部取出队列（包括这两张牌本身）。\n\n小杨同学现在有一个长度为 $n$ 的卡牌序列 $A$，其中每张牌的点数为 $A_i$（$1\\le i\\le n$）。小杨同学有 $q$ 次询问。第 $i$ 次（$1\\le i\\le q$）询问时，小杨同学会给出 $l_i,r_i$ 小杨同学想知道如果用下标在 $[l_i,r_i]$ 的所有卡牌按照下标顺序玩“接竹竿”的游戏，最后队列中剩余的牌数。", "inputFormat": "一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，第一行包含一个正整数 $n$，表示卡牌序列 $A$ 的长度。\n\n第二行包含 $n$ 个正整数 $A_1,A_2,\\dots,A_n$，表示卡牌的点数 $A$。\n\n第三行包含一个正整数 $q$，表示询问次数。\n\n接下来 $q$ 行，每行两个正整数 $l_i,r_i$ 表示一组询问。", "outputFormat": "对于每组数据，输出 $q$ 行。第 $i$ 行（$1\\le i\\le q$）输出一个非负整数，表示第 $i$ 次询问的答案。", "hint": "**样例解释**\n\n对于第一次询问，小杨同学会按照 $1,2,2$ 的顺序放置卡牌，在放置最后一张卡牌时，两张点数为 $2$ 的卡牌会被收走，因此最后队列中只剩余一张点数为 $1$ 的卡牌。\n\n对于第二次询问，队列变化情况为：\n\n$\\{\\}\\to\\{1\\}\\to\\{1,2\\}\\to\\{1,2,2\\}\\to\\{1\\}\\to\\{1,3\\}\\to\\{1,3,1\\}\\to\\{\\}\\to\\{3\\}$。因此最后队列中只剩余一张点数为 $3$ 的卡牌。\n\n**数据范围**\n\n|子任务|分数|$T$|$n$|$q$|$\\max A_i$|特殊条件| \n|:---:|:---:|:---:|:---:|:---:|:---:|:---:|\n|$1$|$30$|$\\le 5$|$\\le100$|$\\le100$|$\\le13$|\n|$2$|$30$|$\\le 5$|$\\le 1.5\\times10^4$|$\\le 1.5\\times10^4$|$\\le13$|所有询问的右端点等于 $n$\n|$3$|$40$|$\\le 5$|$\\le 1.5\\times10^4$|$\\le 1.5\\times10^4$|$\\le13$|\n\n对于全部数据，保证有 $1\\le T\\le 5$，$1\\le n\\le 1.5\\times 10^4$，$1\\le q\\le 1.5\\times 10^4$，$1\\le A_i\\le 13$。", "locale": "zh-CN"}}}
{"pid": "P10265", "type": "P", "difficulty": 2, "samples": [["6 4\n1 1 0 1 0 0\n0 1 1 0 0 0\n1 0 1 0 0 1\n0 0 1 1 0 1\n0 0 0 1 1 0\n1 0 0 0 1 1", "3 3 6"]], "limits": {"time": [1000, 1000, 1000], "memory": [131072, 131072, 131072]}, "tags": ["图论", "GESP"], "title": "[GESP样题 七级] 迷宫统计", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1107>", "description": "在神秘的幻想⼤陆中，存在着 $n$ 个古老而神奇的迷宫，迷宫编号从 $1$ 到 $n$。有的迷宫之间可以直接往返，有的可以⾛到别的迷宫，但是不能⾛回来。玩家小杨想挑战⼀下不同的迷宫，他决定从 $m$ 号迷宫出发。现在，他需要你帮助他统计：有多少迷宫可以直接到达 $m$ 号迷宫，$m$ 号迷宫可以直接到达其他的迷宫有多少，并求出他们的和。\n\n需要注意的是，对于 $i$ ($1 \\leq i \\leq n$) 号迷宫，它总可以直接到达自身。", "inputFormat": "第一行两个整数 $n$ 和 $m$，分别表示结点迷宫总数，指定出发迷宫的编号。  \n下面 $n$ 行，每行 $n$ 个整数，表示迷宫之间的关系。对于第 $i$ 行第 $j$ 列的整数，$1$ 表示能从 $i$ 号迷宫直接到达 $j$ 号迷宫，$0$ 表示不能直接到达。", "outputFormat": "一行输出空格分隔的三个整数，分别表示迷宫 $m$ 可以直接到达其他的迷宫有多少个，有多少迷宫可以直接到达 $m$ 号迷宫，这些迷宫的总和。", "hint": "### 样例 1 解释\n\n$4$ 号迷宫能直接到达的迷宫有 $3,4,6$ 号迷宫，共 $3$ 个。  \n能直接到达 $4$ 号迷宫的迷宫有 $1,4,5$ 号迷宫，共 $3$ 个。\n\n共 6 个。\n\n### 数据规模与约定\n\n| 子任务| 分值 | $n \\leq $ |\n| :-: | :-: | :-: |\n| $1$ | $30$ | $10$ |\n| $2$ | $30$ | $100$ | \n| $3$ | $40$ | $1000$ |\n\n对全部的测试数据，保证 $1 \\leq m \\leq n \\leq 1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP样题 七级] 迷宫统计", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1107>", "description": "在神秘的幻想⼤陆中，存在着 $n$ 个古老而神奇的迷宫，迷宫编号从 $1$ 到 $n$。有的迷宫之间可以直接往返，有的可以⾛到别的迷宫，但是不能⾛回来。玩家小杨想挑战⼀下不同的迷宫，他决定从 $m$ 号迷宫出发。现在，他需要你帮助他统计：有多少迷宫可以直接到达 $m$ 号迷宫，$m$ 号迷宫可以直接到达其他的迷宫有多少，并求出他们的和。\n\n需要注意的是，对于 $i$ ($1 \\leq i \\leq n$) 号迷宫，它总可以直接到达自身。", "inputFormat": "第一行两个整数 $n$ 和 $m$，分别表示结点迷宫总数，指定出发迷宫的编号。  \n下面 $n$ 行，每行 $n$ 个整数，表示迷宫之间的关系。对于第 $i$ 行第 $j$ 列的整数，$1$ 表示能从 $i$ 号迷宫直接到达 $j$ 号迷宫，$0$ 表示不能直接到达。", "outputFormat": "一行输出空格分隔的三个整数，分别表示迷宫 $m$ 可以直接到达其他的迷宫有多少个，有多少迷宫可以直接到达 $m$ 号迷宫，这些迷宫的总和。", "hint": "### 样例 1 解释\n\n$4$ 号迷宫能直接到达的迷宫有 $3,4,6$ 号迷宫，共 $3$ 个。  \n能直接到达 $4$ 号迷宫的迷宫有 $1,4,5$ 号迷宫，共 $3$ 个。\n\n共 6 个。\n\n### 数据规模与约定\n\n| 子任务| 分值 | $n \\leq $ |\n| :-: | :-: | :-: |\n| $1$ | $30$ | $10$ |\n| $2$ | $30$ | $100$ | \n| $3$ | $40$ | $1000$ |\n\n对全部的测试数据，保证 $1 \\leq m \\leq n \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P10266", "type": "P", "difficulty": 5, "samples": [["4 5 2\n7 5 4 6 5\n2 4 7 9 5\n6 4 5 3 5\n1 2 3 0 7\n2 4 2\n3 3 2", "7 5 3 5 4\n2 3 5 4 4\n6 3 0 1 4\n1 1 2 0 7"], ["6 7 3\n6 4 7 8 4 6 1\n4 5 4 6 7 5 9\n1 4 3 0 7 1 3\n4 6 0 7 9 0 0\n1 2 3 4 4 5 8\n4 7 6 8 7 4 9\n5 5 3\n2 3 4\n3 6 2", "2 0 0 0 0 5 1 \n0 0 0 0 2 3 8 \n0 0 0 0 1 0 1 \n0 2 0 0 0 0 0 \n0 1 1 0 0 0 7 \n4 7 5 4 3 0 8 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["前缀和", "差分"], "title": "高效清理", "background": "清理炸弹设计理念图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mjfmevu2.png)", "description": "真寻的房间太大了，但是作为家里蹲，她又懒得打扫，于是美波里发明了一款清理炸弹给真寻使用。\n\n真寻的房间由 $n$ 行 $m$ 列的方砖组成，第 $i$ 行第 $j$ 列的方砖上的灰尘数量为 $a_{i,j}$。\n\n真寻将会使用 $k$ 次清理炸弹，第 $i$ 次她会在第 $x_i$ 行第 $y_i$ 列的方砖上使用能量值为 $p_i$ 的清理炸弹，这将会使 $(x_i,y_i)$ 的灰尘数量减少 ${p_i}^2$，$(x_i,y_i)$ 外围第一圈的方砖上的灰尘数量减少 $(p_i-1)^2$，外围第二圈的方砖上的灰尘数量减少 $(p_i-2)^2$ $\\cdots$ 外围第 $(p_i-1)$ 圈的方砖上的灰尘数量减少 $1$。\n\n当然，灰尘数量不能为负数，所以若某次操作前，某块方砖上的灰尘数量小于它将要减少的灰尘数量，那么它的灰尘数量将变为 $0$。\n\n请你输出真寻使用完 $k$ 次清理炸弹后，每块方砖上的灰尘数量。", "inputFormat": "第一行三个整数 $n,m,k$，分别表示方砖行数、列数及操作次数；\n\n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 列的整数表示 $a_{i,j}$，描述每一块方砖上的灰尘数量；\n\n接下来 $k$ 行，第 $i$ 行三个整数 $x_i,y_i,p_i$，描述一次操作。", "outputFormat": "共 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 列的整数表示方砖 $(i,j)$ 上最终的灰尘数量。", "hint": "**样例** $\\mathbf{1}$ **解释**\n\n第一次操作在方砖 $(2,4)$ 上使用能量值为 $2$ 的“清理炸弹”，使 $(2,4)$ 的灰尘数量减少 $4$，$(1,3),(1,4),(1,5),(2,3),(2,5),(3,3),(3,4),(3,5)$ 的灰尘数量减少 $1$；\n\n第二次操作在方砖 $(3,3)$ 上使用能量值为 $2$ 的“清理炸弹”，使 $(3,3)$ 的灰尘数量减少 $4$，$(2,2),(2,3),(2,4),(3,2),(3,4),(4,2),(4,3),(4,4)$ 的灰尘数量减少 $1$。\n\n**数据范围**\n\n对于所有数据，$1\\leq n,m,p_i\\leq 10^3$，$1\\leq k\\leq 10^6$，$0\\leq a_{i,j}\\leq 10^{12}$，$1\\leq x_i\\leq n$，$1\\leq y_i\\leq m$。\n\n本题共 $11$ 个数据点，**采用捆绑测试**，子任务及数据点分配如下：\n\n| 子任务编号 | 数据点编号 | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: |\n| $0$ | $1\\sim 4$ | $n,m,k\\leq 300$ | $10$ |\n| $1$ | $5$ | $p_i\\leq 3$ | $10$ |\n| $2$ | $6\\sim 7$ | $k\\leq 10^3$ | $20$ |\n| $3$ | $8\\sim 9$ | $n,m\\leq 300$ | $20$ |\n| $4$ | $10\\sim 11$ | 无特殊限制 | $40$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "高效清理", "background": "清理炸弹设计理念图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mjfmevu2.png)", "description": "真寻的房间太大了，但是作为家里蹲，她又懒得打扫，于是美波里发明了一款清理炸弹给真寻使用。\n\n真寻的房间由 $n$ 行 $m$ 列的方砖组成，第 $i$ 行第 $j$ 列的方砖上的灰尘数量为 $a_{i,j}$。\n\n真寻将会使用 $k$ 次清理炸弹，第 $i$ 次她会在第 $x_i$ 行第 $y_i$ 列的方砖上使用能量值为 $p_i$ 的清理炸弹，这将会使 $(x_i,y_i)$ 的灰尘数量减少 ${p_i}^2$，$(x_i,y_i)$ 外围第一圈的方砖上的灰尘数量减少 $(p_i-1)^2$，外围第二圈的方砖上的灰尘数量减少 $(p_i-2)^2$ $\\cdots$ 外围第 $(p_i-1)$ 圈的方砖上的灰尘数量减少 $1$。\n\n当然，灰尘数量不能为负数，所以若某次操作前，某块方砖上的灰尘数量小于它将要减少的灰尘数量，那么它的灰尘数量将变为 $0$。\n\n请你输出真寻使用完 $k$ 次清理炸弹后，每块方砖上的灰尘数量。", "inputFormat": "第一行三个整数 $n,m,k$，分别表示方砖行数、列数及操作次数；\n\n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 列的整数表示 $a_{i,j}$，描述每一块方砖上的灰尘数量；\n\n接下来 $k$ 行，第 $i$ 行三个整数 $x_i,y_i,p_i$，描述一次操作。", "outputFormat": "共 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 列的整数表示方砖 $(i,j)$ 上最终的灰尘数量。", "hint": "**样例** $\\mathbf{1}$ **解释**\n\n第一次操作在方砖 $(2,4)$ 上使用能量值为 $2$ 的“清理炸弹”，使 $(2,4)$ 的灰尘数量减少 $4$，$(1,3),(1,4),(1,5),(2,3),(2,5),(3,3),(3,4),(3,5)$ 的灰尘数量减少 $1$；\n\n第二次操作在方砖 $(3,3)$ 上使用能量值为 $2$ 的“清理炸弹”，使 $(3,3)$ 的灰尘数量减少 $4$，$(2,2),(2,3),(2,4),(3,2),(3,4),(4,2),(4,3),(4,4)$ 的灰尘数量减少 $1$。\n\n**数据范围**\n\n对于所有数据，$1\\leq n,m,p_i\\leq 10^3$，$1\\leq k\\leq 10^6$，$0\\leq a_{i,j}\\leq 10^{12}$，$1\\leq x_i\\leq n$，$1\\leq y_i\\leq m$。\n\n本题共 $11$ 个数据点，**采用捆绑测试**，子任务及数据点分配如下：\n\n| 子任务编号 | 数据点编号 | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: |\n| $0$ | $1\\sim 4$ | $n,m,k\\leq 300$ | $10$ |\n| $1$ | $5$ | $p_i\\leq 3$ | $10$ |\n| $2$ | $6\\sim 7$ | $k\\leq 10^3$ | $20$ |\n| $3$ | $8\\sim 9$ | $n,m\\leq 300$ | $20$ |\n| $4$ | $10\\sim 11$ | 无特殊限制 | $40$ |", "locale": "zh-CN"}}}
{"pid": "P10267", "type": "P", "difficulty": 4, "samples": [["2 3 5\n7 18 4\n10 6 3", "375000011"], ["6 5 0\n9 4 6 2 3\n6 4 4 0 1\n2 0 4 3 0\n1 5 7 3 4\n5 0 2 1 5\n6 4 9 8 3", "99609378"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "数学"], "title": "机器人", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/sub3kd3c.png)\n\n> 画师：白森 さわ（from pixiv），侵删。", "description": "真寻连清理炸弹都懒得自己使用，于是美波里又发明了一款全自动扫地机器人来清理房间。\n\n真寻的房间由 $n$ 行 $m$ 列的方砖组成，第 $i$ 行第 $j$ 列的方砖上的灰尘数量为 $a_{i,j}$。美波里的机器人每天会从房间的左上角出发，每次随机往右或往下走一步。\n\n若机器人在没有撞墙的情况下走到了右下角，那么它会返回**它经过的所有方砖的灰尘数量的异或和**给美波里；若机器人在走到右下角之前撞了墙，即某一步的目标位置不存在，那么机器人会返回一个错误值 $x$ 并结束移动。\n\n现给出某一天真寻的房间中每一块方砖上的灰尘数量，请你求出机器人返回值的期望值。\n\n形式化地，给定一 $n\\times m$ 的矩阵 $a$，第 $i$ 行第 $j$ 列的权值为 $a_{i,j}$，现有一机器人从 $(1,1)$ 出发，每次各有 $\\frac{1}{2}$ 的概率从 $(i,j)$ 移动至 $(i,j+1)$ 或 $(i+1,j)$；若机器人移动至 $(n,m)$，则返回**路径点权异或和**；若在移动至 $(n,m)$ 前有任意时刻移动至矩阵外，则返回 $x$；求返回值的期望值。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行三个整数 $n,m,x$，分别表示方砖行数、列数及错误值；\n\n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 列的整数表示 $a_{i,j}$，描述每一块方砖上的灰尘数量。", "outputFormat": "一行一个整数 $ans$，表示期望值在模 $10^9+7$ 意义下的值。\n\n若对有理数取余有疑惑，请参照 [P2613 【模板】有理数取余](https://www.luogu.com.cn/problem/P2613)。", "hint": "**样例** $\\mathbf{1}$ **解释**\n\n若机器人第一步往下走，则：\n\n- 若机器人第二步往下走，则撞墙，返回 $5$，概率为 $\\frac{1}{4}$；\n\n- 若机器人第二步往右走，则：\n\n\t- 若机器人第三步往下走，则撞墙，返回 $5$，概率为 $\\frac{1}{8}$；\n    \n    - 若机器人第三步往右走，则到达右下角，返回 $7\\oplus 10\\oplus 6\\oplus 3=8$，概率为 $\\frac{1}{8}$；\n    \n若机器人第一步往右走，则：\n\n- 若机器人第二步往下走，则：\n\n\t- 若机器人第三步往下走，则撞墙，返回 $5$，概率为 $\\frac{1}{8}$；\n    \n    - 若机器人第三步往右走，则到达右下角，返回 $7\\oplus 18\\oplus 6\\oplus 3=16$，概率为 $\\frac{1}{8}$；\n    \n- 若机器人第二步往右走，则：\n    \n    - 若机器人第三步往下走，则到达右下角，返回 $7\\oplus 18\\oplus 4\\oplus 3=18$，概率为 $\\frac{1}{8}$；\n    \n    - 若机器人第三步往右走，则撞墙，返回 $5$，概率为 $\\frac{1}{8}$；\n\n因此，返回值的期望值为 $\\frac{3\\times 5+8+16+18}{8}+\\frac{5}{4}=\\frac{67}{8}$，在模 $10^9+7$ 意义下为 $375000011$。\n\n**数据范围**\n\n对于所有数据，$1\\leq n,m\\leq 10^3$，$0\\leq a_{i,j},x\\leq 10^9$。\n\n本题共 $22$ 个测试点，**采用捆绑测试**，子任务及数据点分配如下：\n\n| 子任务编号 | 数据点编号 | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: |\n| $0$ | $1\\sim 4$ | $n,m\\leq 12$ | $10$ |\n| $1$ | $5\\sim 8$ | $n,m\\leq 20$ | $20$ |\n| $2$ | $9\\sim 12$ | $a_{i,j}\\leq 20$ | $20$ |\n| $3$ | $13\\sim 16$ | $x=0$ | $20$ |\n| $4$ | $17\\sim 22$ | 无特殊限制 | $30$ |\n\n**提示**\n\n$\\oplus$ 表示异或（bitwise xor），$x_1,x_2,x_3,\\cdots,x_n$ 的异或和为 $x_1\\oplus x_2\\oplus x_3\\oplus\\cdots \\oplus x_n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "机器人", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/sub3kd3c.png)\n\n> 画师：白森 さわ（from pixiv），侵删。", "description": "真寻连清理炸弹都懒得自己使用，于是美波里又发明了一款全自动扫地机器人来清理房间。\n\n真寻的房间由 $n$ 行 $m$ 列的方砖组成，第 $i$ 行第 $j$ 列的方砖上的灰尘数量为 $a_{i,j}$。美波里的机器人每天会从房间的左上角出发，每次随机往右或往下走一步。\n\n若机器人在没有撞墙的情况下走到了右下角，那么它会返回**它经过的所有方砖的灰尘数量的异或和**给美波里；若机器人在走到右下角之前撞了墙，即某一步的目标位置不存在，那么机器人会返回一个错误值 $x$ 并结束移动。\n\n现给出某一天真寻的房间中每一块方砖上的灰尘数量，请你求出机器人返回值的期望值。\n\n形式化地，给定一 $n\\times m$ 的矩阵 $a$，第 $i$ 行第 $j$ 列的权值为 $a_{i,j}$，现有一机器人从 $(1,1)$ 出发，每次各有 $\\frac{1}{2}$ 的概率从 $(i,j)$ 移动至 $(i,j+1)$ 或 $(i+1,j)$；若机器人移动至 $(n,m)$，则返回**路径点权异或和**；若在移动至 $(n,m)$ 前有任意时刻移动至矩阵外，则返回 $x$；求返回值的期望值。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行三个整数 $n,m,x$，分别表示方砖行数、列数及错误值；\n\n接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 列的整数表示 $a_{i,j}$，描述每一块方砖上的灰尘数量。", "outputFormat": "一行一个整数 $ans$，表示期望值在模 $10^9+7$ 意义下的值。\n\n若对有理数取余有疑惑，请参照 [P2613 【模板】有理数取余](https://www.luogu.com.cn/problem/P2613)。", "hint": "**样例** $\\mathbf{1}$ **解释**\n\n若机器人第一步往下走，则：\n\n- 若机器人第二步往下走，则撞墙，返回 $5$，概率为 $\\frac{1}{4}$；\n\n- 若机器人第二步往右走，则：\n\n\t- 若机器人第三步往下走，则撞墙，返回 $5$，概率为 $\\frac{1}{8}$；\n    \n    - 若机器人第三步往右走，则到达右下角，返回 $7\\oplus 10\\oplus 6\\oplus 3=8$，概率为 $\\frac{1}{8}$；\n    \n若机器人第一步往右走，则：\n\n- 若机器人第二步往下走，则：\n\n\t- 若机器人第三步往下走，则撞墙，返回 $5$，概率为 $\\frac{1}{8}$；\n    \n    - 若机器人第三步往右走，则到达右下角，返回 $7\\oplus 18\\oplus 6\\oplus 3=16$，概率为 $\\frac{1}{8}$；\n    \n- 若机器人第二步往右走，则：\n    \n    - 若机器人第三步往下走，则到达右下角，返回 $7\\oplus 18\\oplus 4\\oplus 3=18$，概率为 $\\frac{1}{8}$；\n    \n    - 若机器人第三步往右走，则撞墙，返回 $5$，概率为 $\\frac{1}{8}$；\n\n因此，返回值的期望值为 $\\frac{3\\times 5+8+16+18}{8}+\\frac{5}{4}=\\frac{67}{8}$，在模 $10^9+7$ 意义下为 $375000011$。\n\n**数据范围**\n\n对于所有数据，$1\\leq n,m\\leq 10^3$，$0\\leq a_{i,j},x\\leq 10^9$。\n\n本题共 $22$ 个测试点，**采用捆绑测试**，子任务及数据点分配如下：\n\n| 子任务编号 | 数据点编号 | 特殊性质 | 分值 |\n| :-: | :-: | :-: | :-: |\n| $0$ | $1\\sim 4$ | $n,m\\leq 12$ | $10$ |\n| $1$ | $5\\sim 8$ | $n,m\\leq 20$ | $20$ |\n| $2$ | $9\\sim 12$ | $a_{i,j}\\leq 20$ | $20$ |\n| $3$ | $13\\sim 16$ | $x=0$ | $20$ |\n| $4$ | $17\\sim 22$ | 无特殊限制 | $30$ |\n\n**提示**\n\n$\\oplus$ 表示异或（bitwise xor），$x_1,x_2,x_3,\\cdots,x_n$ 的异或和为 $x_1\\oplus x_2\\oplus x_3\\oplus\\cdots \\oplus x_n$。", "locale": "zh-CN"}}}
{"pid": "P10268", "type": "P", "difficulty": 6, "samples": [["4 4 4\n5 8 2 7 \n3 1\n1 4\n3 2\n1 4\n2 4\n1 2\n2 3\n3 3", "500000012\n833333349\n500000012\n666666674"], ["14 16 15\n1 2 7 3 2 4 6 2 5 7 2 4 3 3 \n5 12\n2 9\n2 10\n7 10\n6 12\n12 3\n11 1\n4 8\n1 13\n6 8\n6 10\n4 1\n1 10\n12 11\n3 5\n9 7\n14 14\n2 16\n5 6\n2 3\n5 10\n1 6\n5 16\n13 15\n1 2\n3 7\n3 4\n14 14\n3 7\n6 7\n11 14", "318681321\n263736277\n868131875\n725274731\n32967035\n384615390\n637362648\n780219786\n967032974\n406593411\n208791211\n318681321\n406593411\n945054952\n681318687"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["莫队", "并查集"], "title": "符卡对决", "background": "灵梦正在和魔理沙进行符卡对决。\n\n![Card](https://cdn.luogu.com.cn/upload/image_hosting/xu68nj8k.png)\n\n> 永夜の报い，Pixiv76062895，作者是 minusT，侵删。", "description": "灵梦一共有 $n$ 张符卡，每张卡都有一个能力值，对于第 $i$ 张卡，它的能力值为 $a_i$，现在她想从中选出两张符卡并使用它们，灵梦发现，如果她同时打出了两张符卡 $i, j$，这两张符卡造成的伤害将会是 $a_i\\times a_j$。\n\n这些符卡之间有能力的冲突，灵梦会告诉你这些符卡的兼容性，具体而言这些符卡之间有 $m$ 条关系，这些关系表明某两张符卡之间是兼容的，**注意**，如果符卡 $i, j$ 兼容且符卡 $j, k$ 兼容，那么符卡 $i, k$ 也是兼容的，如果打出的两张符卡之间不是兼容的，那么它们造成的伤害为 $0$。\n\n她很好奇符卡之间的兼容性会造成什么样的影响，所以她会询问你 $q$ 次，每次告诉你一对正整数 $l, r$，意味着只有编号在区间 $[l, r]$ 内的关系才会生效。\n\n灵梦不想把魔理沙虐得太惨，所以她会随机从所有符卡中选出两张**不同**的符卡来打出，她想知道每次询问造成的伤害的期望值对 $10^9 + 7$ 取模后是多少。", "inputFormat": "第一行三个整数 $n, m, q$ 分别表示符卡总数，符卡间的关系总数，灵梦的询问次数。\n\n接下来一行 $n$ 个正整数，第 $i$ 个表示 $a_i$。\n\n接下来 $m$ 行，每行两个正整数 $u_i, v_i$，表示第 $u_i$ 张符卡与第 $v_i$ 张符卡是兼容的。\n\n接下来 $q$ 行，每行两个正整数 $l_i, r_i$，表示灵梦询问的编号区间 $[l_i, r_i]$。", "outputFormat": "一共 $q$ 行，第 $i$ 行一个整数，表示第 $i$ 次询问中，随机选择两张**不同**的符卡，造成伤害的期望值对 $10^9 + 7$ 取模后的结果。", "hint": "#### 样例 1 解释\n\n对于第三组询问，只有 $(1, 4), (2, 3)$ 两对符卡之间是兼容的。\n\n如果选择的符卡是 $(1, 2)$，那么它们不兼容，伤害值为 $0$，这种情况的概率是 $\\dfrac16$。\n\n如果选择的符卡是 $(1, 3)$，那么它们不兼容，伤害值为 $0$，这种情况的概率是 $\\dfrac16$。\n\n如果选择的符卡是 $(1, 4)$，它们兼容，伤害值为 $a_1\\times a_4 = 35$，这种情况的概率是 $\\dfrac16$。\n\n如果选择的符卡是 $(2, 3)$，它们兼容，伤害值为 $a_2\\times a_3 = 16$，这种情况的概率是 $\\dfrac16$。\n\n如果选择的符卡是 $(2, 4)$，那么它们不兼容，伤害值为 $0$，这种情况的概率是 $\\dfrac16$。\n\n以此类推，最终的期望值是 $\\dfrac{17}{2}$，其在模 $10^9 + 7$ 意义下等于 $500000012$。\n\n#### 数据范围\n\n**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n, q\\le 10^5, 1\\le m\\le 2n, 1\\le a_i\\le 10^9, 1\\le l_i\\le r_i\\le m, 1\\le u_i, v_i\\le n$。\n\n对于不同的子任务，我们如下约定：\n\n| 子任务编号 | $n$         | $q$         | 特殊性质 | 子任务分值 |\n| ---------- | ----------- | ----------- | -------- | ---------- |\n| $0$        | $\\le300$    | $\\le300$    | 无       | $5$        |\n| $1$        | $\\le 2000$  | $\\le 2000$  | A        | $10$       |\n| $2$        | $\\le 2000$  | $\\le 2000$  | B        | $5$       |\n| $3$        | $\\le 2000$  | $\\le 2000$  | 无       | $10$       |\n| $4$        | $\\le 30000$ | $\\le 30000$ | 无       | $10$       |\n| $5$        | $\\le 50000$ | $\\le 50000$ | A        | $10$       |\n| $6$        | $\\le 50000$ | $\\le 50000$ | B        | $10$       |\n| $7$        | $\\le 50000$ | $\\le 50000$ | 无       | $15$       |\n| $8$        | $\\le 10^5$  | $\\le 10^5$  | 无       | $25$       |\n\n- **特殊性质 A**：保证 $u_i = 1, v_i = i + 1, m = n - 1$。\n- **特殊性质 B**：保证 $l_i = 1$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "符卡对决", "background": "灵梦正在和魔理沙进行符卡对决。\n\n![Card](https://cdn.luogu.com.cn/upload/image_hosting/xu68nj8k.png)\n\n> 永夜の报い，Pixiv76062895，作者是 minusT，侵删。", "description": "灵梦一共有 $n$ 张符卡，每张卡都有一个能力值，对于第 $i$ 张卡，它的能力值为 $a_i$，现在她想从中选出两张符卡并使用它们，灵梦发现，如果她同时打出了两张符卡 $i, j$，这两张符卡造成的伤害将会是 $a_i\\times a_j$。\n\n这些符卡之间有能力的冲突，灵梦会告诉你这些符卡的兼容性，具体而言这些符卡之间有 $m$ 条关系，这些关系表明某两张符卡之间是兼容的，**注意**，如果符卡 $i, j$ 兼容且符卡 $j, k$ 兼容，那么符卡 $i, k$ 也是兼容的，如果打出的两张符卡之间不是兼容的，那么它们造成的伤害为 $0$。\n\n她很好奇符卡之间的兼容性会造成什么样的影响，所以她会询问你 $q$ 次，每次告诉你一对正整数 $l, r$，意味着只有编号在区间 $[l, r]$ 内的关系才会生效。\n\n灵梦不想把魔理沙虐得太惨，所以她会随机从所有符卡中选出两张**不同**的符卡来打出，她想知道每次询问造成的伤害的期望值对 $10^9 + 7$ 取模后是多少。", "inputFormat": "第一行三个整数 $n, m, q$ 分别表示符卡总数，符卡间的关系总数，灵梦的询问次数。\n\n接下来一行 $n$ 个正整数，第 $i$ 个表示 $a_i$。\n\n接下来 $m$ 行，每行两个正整数 $u_i, v_i$，表示第 $u_i$ 张符卡与第 $v_i$ 张符卡是兼容的。\n\n接下来 $q$ 行，每行两个正整数 $l_i, r_i$，表示灵梦询问的编号区间 $[l_i, r_i]$。", "outputFormat": "一共 $q$ 行，第 $i$ 行一个整数，表示第 $i$ 次询问中，随机选择两张**不同**的符卡，造成伤害的期望值对 $10^9 + 7$ 取模后的结果。", "hint": "#### 样例 1 解释\n\n对于第三组询问，只有 $(1, 4), (2, 3)$ 两对符卡之间是兼容的。\n\n如果选择的符卡是 $(1, 2)$，那么它们不兼容，伤害值为 $0$，这种情况的概率是 $\\dfrac16$。\n\n如果选择的符卡是 $(1, 3)$，那么它们不兼容，伤害值为 $0$，这种情况的概率是 $\\dfrac16$。\n\n如果选择的符卡是 $(1, 4)$，它们兼容，伤害值为 $a_1\\times a_4 = 35$，这种情况的概率是 $\\dfrac16$。\n\n如果选择的符卡是 $(2, 3)$，它们兼容，伤害值为 $a_2\\times a_3 = 16$，这种情况的概率是 $\\dfrac16$。\n\n如果选择的符卡是 $(2, 4)$，那么它们不兼容，伤害值为 $0$，这种情况的概率是 $\\dfrac16$。\n\n以此类推，最终的期望值是 $\\dfrac{17}{2}$，其在模 $10^9 + 7$ 意义下等于 $500000012$。\n\n#### 数据范围\n\n**本题采用捆绑测试。**\n\n对于所有数据，$1\\le n, q\\le 10^5, 1\\le m\\le 2n, 1\\le a_i\\le 10^9, 1\\le l_i\\le r_i\\le m, 1\\le u_i, v_i\\le n$。\n\n对于不同的子任务，我们如下约定：\n\n| 子任务编号 | $n$         | $q$         | 特殊性质 | 子任务分值 |\n| ---------- | ----------- | ----------- | -------- | ---------- |\n| $0$        | $\\le300$    | $\\le300$    | 无       | $5$        |\n| $1$        | $\\le 2000$  | $\\le 2000$  | A        | $10$       |\n| $2$        | $\\le 2000$  | $\\le 2000$  | B        | $5$       |\n| $3$        | $\\le 2000$  | $\\le 2000$  | 无       | $10$       |\n| $4$        | $\\le 30000$ | $\\le 30000$ | 无       | $10$       |\n| $5$        | $\\le 50000$ | $\\le 50000$ | A        | $10$       |\n| $6$        | $\\le 50000$ | $\\le 50000$ | B        | $10$       |\n| $7$        | $\\le 50000$ | $\\le 50000$ | 无       | $15$       |\n| $8$        | $\\le 10^5$  | $\\le 10^5$  | 无       | $25$       |\n\n- **特殊性质 A**：保证 $u_i = 1, v_i = i + 1, m = n - 1$。\n- **特殊性质 B**：保证 $l_i = 1$。\n", "locale": "zh-CN"}}}
{"pid": "P10269", "type": "P", "difficulty": 6, "samples": [["4 4 998244353\n8 15 12 6\n2\n3\n4\n5", "1 19\n2 7\n1 1\n0 0"], ["6 4 19260817\n11 45 14 19 19 810\n2\n1\n2\n2", "12 78\n0 918\n12 78\n12 78"], ["8 3 19491001\n3 2 2 3 1 2 1 2\n5\n3\n4", "56 56\n52 60\n69 71"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1500, 1500, 1500, 1500, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "素数判断,质数,筛法", "最大公约数 gcd", "莫比乌斯反演"], "title": "实力派", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/z8ednvb2.png)", "description": "来自全国各地的 $n$ 位 OIer 组成了一个名为“实力派”的团队，每个人有一个实力值 $a_i$。共有 $m$ 场比赛向他们发送了参赛邀请，其中第 $i$ 场比赛要求 $k_i$ 个人组成一个队伍参加。为了决定他们是否应该参加某场比赛，他们想出了如下两个衡量实力的数据：\n\n- 定义 $x$ 阶最低实力表示从这 $n$ 个人中选出 $x$ 个人，使得这 $x$ 个人实力值的 $\\gcd=1$ 的方案数；\n\n- 定义 $x$ 阶最高实力表示从这 $n$ 个人中选出 $x$ 个人，所有方案的 $x$ 个人的 $\\gcd$ 之和。\n\n请你对于每场比赛，告诉他们他们在这场比赛中的 $k_i$ 阶最低实力和最高实力。对了，为了不让别人听懂，你需要将答案对一个秘密模数 $p$ 取模。", "inputFormat": "第一行三个整数 $n,m,p$，分别表示团队人数，比赛场数及秘密模数；\n\n第二行 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个人的实力值 $a_i$。\n\n接下来 $m$ 行，第 $i$ 行一个整数 $k_i$，表示第 $i$ 场比赛的要求参赛人数。", "outputFormat": "输出共 $m$ 行，第 $i$ 行两个整数 $min_i,max_i$，分别表示他们在第 $i$ 场比赛中的最低实力和最高实力，答案对 $p$ 取模。", "hint": "**样例** $\\mathbf{1}$ **解释**\n\n第一场比赛要求选出 $2$ 人参加，仅有 $(8,15)$ 一种方案的 $\\gcd=1$，因此最低实力为 $1$；所有方案的 $\\gcd$ 之和为 $19$，因此最高实力为 $19$；\n\n第二场比赛要求选出 $3$ 人参加，有 $(8,15,12)$ 和 $(8,15,6)$ 两种 $\\gcd=1$ 的方案，因此最低实力为 $2$；所有方案的 $\\gcd$ 之和为 $7$，因此最高实力为 $7$。\n\n**数据范围**\n\n对于所有数据，$1\\leq n,m,k_i\\leq 2\\times 10^5$，$1\\leq a_i\\leq 10^6$，$10^7\\leq p\\leq 10^9$，$p\\in \\mathbb{P}$。\n\n本题共 $30$ 个测试点，**采用捆绑测试**，子任务及数据点分配如下：\n\n| 子任务编号 | 数据点编号 | 特殊性质 | 分值 | 时限 |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $1\\sim 4$ | $n\\leq 20$ | $10$ | $1s$ |\n| $1$ | $5\\sim 8$ | $n,a_i\\leq 300$ | $10$ | $1s$ | \n| $2$ | $9\\sim 12$ | $k_i\\leq 2$ | $20$ | $1.5s$ |\n| $3$ | $13\\sim 16$ | $a_i\\leq 3$ | $10$ | $1s$ |\n| $4$ | $17\\sim 22$ | $a_i\\leq 10^5$ | $20$ | $1s$ |\n| $5$ | $23\\sim 30$ | 无特殊性质 | $30$ | $1.5s$ |\n\n**提示**\n\n$\\mathbb{P}$ 表示全体质数集合，$\\gcd$ 表示最大公因数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "实力派", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/z8ednvb2.png)", "description": "来自全国各地的 $n$ 位 OIer 组成了一个名为“实力派”的团队，每个人有一个实力值 $a_i$。共有 $m$ 场比赛向他们发送了参赛邀请，其中第 $i$ 场比赛要求 $k_i$ 个人组成一个队伍参加。为了决定他们是否应该参加某场比赛，他们想出了如下两个衡量实力的数据：\n\n- 定义 $x$ 阶最低实力表示从这 $n$ 个人中选出 $x$ 个人，使得这 $x$ 个人实力值的 $\\gcd=1$ 的方案数；\n\n- 定义 $x$ 阶最高实力表示从这 $n$ 个人中选出 $x$ 个人，所有方案的 $x$ 个人的 $\\gcd$ 之和。\n\n请你对于每场比赛，告诉他们他们在这场比赛中的 $k_i$ 阶最低实力和最高实力。对了，为了不让别人听懂，你需要将答案对一个秘密模数 $p$ 取模。", "inputFormat": "第一行三个整数 $n,m,p$，分别表示团队人数，比赛场数及秘密模数；\n\n第二行 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个人的实力值 $a_i$。\n\n接下来 $m$ 行，第 $i$ 行一个整数 $k_i$，表示第 $i$ 场比赛的要求参赛人数。", "outputFormat": "输出共 $m$ 行，第 $i$ 行两个整数 $min_i,max_i$，分别表示他们在第 $i$ 场比赛中的最低实力和最高实力，答案对 $p$ 取模。", "hint": "**样例** $\\mathbf{1}$ **解释**\n\n第一场比赛要求选出 $2$ 人参加，仅有 $(8,15)$ 一种方案的 $\\gcd=1$，因此最低实力为 $1$；所有方案的 $\\gcd$ 之和为 $19$，因此最高实力为 $19$；\n\n第二场比赛要求选出 $3$ 人参加，有 $(8,15,12)$ 和 $(8,15,6)$ 两种 $\\gcd=1$ 的方案，因此最低实力为 $2$；所有方案的 $\\gcd$ 之和为 $7$，因此最高实力为 $7$。\n\n**数据范围**\n\n对于所有数据，$1\\leq n,m,k_i\\leq 2\\times 10^5$，$1\\leq a_i\\leq 10^6$，$10^7\\leq p\\leq 10^9$，$p\\in \\mathbb{P}$。\n\n本题共 $30$ 个测试点，**采用捆绑测试**，子任务及数据点分配如下：\n\n| 子任务编号 | 数据点编号 | 特殊性质 | 分值 | 时限 |\n| :-: | :-: | :-: | :-: | :-: |\n| $0$ | $1\\sim 4$ | $n\\leq 20$ | $10$ | $1s$ |\n| $1$ | $5\\sim 8$ | $n,a_i\\leq 300$ | $10$ | $1s$ | \n| $2$ | $9\\sim 12$ | $k_i\\leq 2$ | $20$ | $1.5s$ |\n| $3$ | $13\\sim 16$ | $a_i\\leq 3$ | $10$ | $1s$ |\n| $4$ | $17\\sim 22$ | $a_i\\leq 10^5$ | $20$ | $1s$ |\n| $5$ | $23\\sim 30$ | 无特殊性质 | $30$ | $1.5s$ |\n\n**提示**\n\n$\\mathbb{P}$ 表示全体质数集合，$\\gcd$ 表示最大公因数。", "locale": "zh-CN"}}}
{"pid": "P10270", "type": "P", "difficulty": 2, "samples": [["3 3\nabe\nbcx\nexy", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": [], "title": "好奇心宝贝", "background": "> 道路，由人亲手制造。\n>\n> 酒与面包，靠劳作取得。\n>\n> 幼小的新芽舒展叶片，\n>\n> 与成堆魔药中抵抗困意。\n>\n> 多一点，再多一点时间，\n>\n> 再看看书的下一页。", "description": "给出一个 $n\\times m$ 的矩阵，每个位置 $(i,j)$ 都是一个小写字母。\n\n定义一条路径对应的字符串为路径上字符顺次连接所形成的字符串。\n\n请找出两条从 $(1,1)$ 到 $(n,m)$ 的路径，要求只能向下或向右走，最小化两条路径对应字符串的最长公共前缀。\n\n", "inputFormat": "第一行两个数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个字符，描述整个矩阵。", "outputFormat": "输出为一个数，即最短的最长公共前缀长度。", "hint": "### 样例一解释\n\n选择的两条路径分别为：\n\n- $(1,1)\\rightarrow (1,2)\\rightarrow (1,3)\\rightarrow (2,3)\\rightarrow (3,3):$ `abexy`。\n\n- $(1,1)\\rightarrow (1,2)\\rightarrow (2,2)\\rightarrow (2,3)\\rightarrow (3,3):$ `abcxy`。\n\n它们的最长公共前缀为 $2$。可以证明没有更优的方案。\n\n### 数据范围与约定\n\n对于 $30\\%$ 的数据，$1\\le n,m \\le 5$。\n\n对于 $50\\%$ 的数据，$1 \\le n,m \\le 50$。\n\n对于另外 $20\\%$ 的数据，矩阵随机生成且只含字母 `a,b`。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 2\\times 10^3$，输入均为整数和小写字母。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "好奇心宝贝", "background": "> 道路，由人亲手制造。\n>\n> 酒与面包，靠劳作取得。\n>\n> 幼小的新芽舒展叶片，\n>\n> 与成堆魔药中抵抗困意。\n>\n> 多一点，再多一点时间，\n>\n> 再看看书的下一页。", "description": "给出一个 $n\\times m$ 的矩阵，每个位置 $(i,j)$ 都是一个小写字母。\n\n定义一条路径对应的字符串为路径上字符顺次连接所形成的字符串。\n\n请找出两条从 $(1,1)$ 到 $(n,m)$ 的路径，要求只能向下或向右走，最小化两条路径对应字符串的最长公共前缀。\n\n", "inputFormat": "第一行两个数 $n,m$。\n\n接下来 $n$ 行，每行 $m$ 个字符，描述整个矩阵。", "outputFormat": "输出为一个数，即最短的最长公共前缀长度。", "hint": "### 样例一解释\n\n选择的两条路径分别为：\n\n- $(1,1)\\rightarrow (1,2)\\rightarrow (1,3)\\rightarrow (2,3)\\rightarrow (3,3):$ `abexy`。\n\n- $(1,1)\\rightarrow (1,2)\\rightarrow (2,2)\\rightarrow (2,3)\\rightarrow (3,3):$ `abcxy`。\n\n它们的最长公共前缀为 $2$。可以证明没有更优的方案。\n\n### 数据范围与约定\n\n对于 $30\\%$ 的数据，$1\\le n,m \\le 5$。\n\n对于 $50\\%$ 的数据，$1 \\le n,m \\le 50$。\n\n对于另外 $20\\%$ 的数据，矩阵随机生成且只含字母 `a,b`。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 2\\times 10^3$，输入均为整数和小写字母。\n\n", "locale": "zh-CN"}}}
{"pid": "P10271", "type": "P", "difficulty": 5, "samples": [["9\nabbbabbba", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": [], "title": "漫长悄悄话", "background": "> 故事从哪一页起始？\n>\n> 小石头，红土地，遥远的火。\n>\n> 摸索的轮廓，夜空之中，扑火的人。\n>\n> 手与手的相握，心与心碰触。\n>\n> 涌动在喉咙深沉，我温暖的火。 ", "description": "一些前置定义：\n\n- $\\text{Rev}(S):$ $S_{|S|},S_{|S|-1},\\dots,S_1$ 顺次相连形成的字符串。即将 $S$ 翻转。\n\n- $\\text{lcp}(i,j):$ 第 $i$ 个位置开始的后缀与第 $j$ 个位置开始的后缀的最长公共前缀**对应的字符串**。\n\n- $\\text{lcs}(i,j):$ 第 $i$ 个位置结束的前缀与第 $j$ 个位置结束的前缀的最长公共后缀**对应的字符串**。\n\n- $\\text{LCP}(S,T):$ $S$ 和 $T$ 的最长公共前缀。\n----\n\n给出长度为 $n$ 的字符串 $S$，求：\n\n$$\\max\\limits_{1 \\le i < j \\le n}\\{\\text{LCP}(\\text{Rev}(\\text{lcs}(i,j)),\\text{lcp}(i,j))\\}$$", "inputFormat": "第一行一个整数 $n$。\n\n第二行一个长度为 $n$ 的字符串 $S$。", "outputFormat": "输出为一个数，即答案。", "hint": "### 样例一解释\n\n$\\text{lcp}(3,7):$ `bba`。\n\n$\\text{lcs}(3,7):$ `abb`。\n\n$\\text{LCP}(\\text{Rev}(\\texttt{\\color{blue}abb}),\\texttt{\\color{blue}bba}):$ `bba`。\n\n可以证明，没有比 $i=3,j=7$ 更优的方案。\n\n\n### 数据范围与约束\n\n对于 $30\\%$ 的数据，$1 \\le n \\le 2\\times 10^3$。\n\n对于 $60\\%$ 的数据，$1 \\le n \\le 10^5$。\n\n对于另外 $10\\%$ 的数据，$\\forall 1 \\le i \\le n-2,S_{i}\\not=S_{i+2}$。\n\n对于 $100\\%$ 的数据 $1 \\le n \\le 10^6$，输入均为整数和小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "漫长悄悄话", "background": "> 故事从哪一页起始？\n>\n> 小石头，红土地，遥远的火。\n>\n> 摸索的轮廓，夜空之中，扑火的人。\n>\n> 手与手的相握，心与心碰触。\n>\n> 涌动在喉咙深沉，我温暖的火。 ", "description": "一些前置定义：\n\n- $\\text{Rev}(S):$ $S_{|S|},S_{|S|-1},\\dots,S_1$ 顺次相连形成的字符串。即将 $S$ 翻转。\n\n- $\\text{lcp}(i,j):$ 第 $i$ 个位置开始的后缀与第 $j$ 个位置开始的后缀的最长公共前缀**对应的字符串**。\n\n- $\\text{lcs}(i,j):$ 第 $i$ 个位置结束的前缀与第 $j$ 个位置结束的前缀的最长公共后缀**对应的字符串**。\n\n- $\\text{LCP}(S,T):$ $S$ 和 $T$ 的最长公共前缀。\n----\n\n给出长度为 $n$ 的字符串 $S$，求：\n\n$$\\max\\limits_{1 \\le i < j \\le n}\\{\\text{LCP}(\\text{Rev}(\\text{lcs}(i,j)),\\text{lcp}(i,j))\\}$$", "inputFormat": "第一行一个整数 $n$。\n\n第二行一个长度为 $n$ 的字符串 $S$。", "outputFormat": "输出为一个数，即答案。", "hint": "### 样例一解释\n\n$\\text{lcp}(3,7):$ `bba`。\n\n$\\text{lcs}(3,7):$ `abb`。\n\n$\\text{LCP}(\\text{Rev}(\\texttt{\\color{blue}abb}),\\texttt{\\color{blue}bba}):$ `bba`。\n\n可以证明，没有比 $i=3,j=7$ 更优的方案。\n\n\n### 数据范围与约束\n\n对于 $30\\%$ 的数据，$1 \\le n \\le 2\\times 10^3$。\n\n对于 $60\\%$ 的数据，$1 \\le n \\le 10^5$。\n\n对于另外 $10\\%$ 的数据，$\\forall 1 \\le i \\le n-2,S_{i}\\not=S_{i+2}$。\n\n对于 $100\\%$ 的数据 $1 \\le n \\le 10^6$，输入均为整数和小写字母。", "locale": "zh-CN"}}}
{"pid": "P10272", "type": "P", "difficulty": 6, "samples": [["ababcab\n1 3", "39"], ["aa\n3 5", "59"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": [], "title": "在四方城外", "background": "> 柳花、青山与月光。\n>\n> 诗中的酒香与诗外的酒香。\n>\n> 城中的天空与城外的天空。\n>\n> 一字一句，一笔一划，所知晓的，尚懵懂的。\n>\n> \t看呀看，学呀学，世界正如浊酒，滋味饮酌方知。", "description": "定义字符串 $S$ 的**扩展**操作为：\n\n- 求出 $S$ 的最长 $\\text{border}$ $T$。\n\n- $S'\\leftarrow S+T$。\n\n**注意，本题的 $\\text{border}$ 指真 $\\text{border}$（即字符串本身不计入 $\\text{border}$）**。\n\n设**扩展**操作的权值为**扩展**后字符串的长度 $|S'|$，请求出字符串 $S$ 第 $L$  次**扩展**到第 $R$ 次**扩展**的权值之和。\n\n由于结果可能很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行一个字符串 $S$。\n\n第二行两个整数 $L,R$。", "outputFormat": "输出为一个数，即答案对 $998244353$ 取模的结果。", "hint": "### 样例一解释\n\n第 $1$ 次扩展操作：`ababcab[ab]`，权值为 $9$。\n\n第 $2$ 次扩展操作：`ababcabab[abab]`，权值为 $13$。\n\n第 $3$ 次扩展操作：`ababcabababab[abab]`，权值为 $17$。\n\n权值之和为 $9+13+17=39$。\n\n### 数据范围与约束\n\n对于 $30\\%$ 的数据，$1 \\le |S| \\le 100,1 \\le L,R \\le 10$。\n\n对于 $60\\%$ 的数据，$1 \\le L,R \\le 10^6$。\n\n对于另外 $10\\%$ 的数据，$\\text{border}_{S}=|S|-1$。\n\n对于 $100\\%$ 的数据，$1 \\le |S| \\le 10^6,1 \\le L \\le R \\le 10^9$，输入均为整数和小写字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "在四方城外", "background": "> 柳花、青山与月光。\n>\n> 诗中的酒香与诗外的酒香。\n>\n> 城中的天空与城外的天空。\n>\n> 一字一句，一笔一划，所知晓的，尚懵懂的。\n>\n> \t看呀看，学呀学，世界正如浊酒，滋味饮酌方知。", "description": "定义字符串 $S$ 的**扩展**操作为：\n\n- 求出 $S$ 的最长 $\\text{border}$ $T$。\n\n- $S'\\leftarrow S+T$。\n\n**注意，本题的 $\\text{border}$ 指真 $\\text{border}$（即字符串本身不计入 $\\text{border}$）**。\n\n设**扩展**操作的权值为**扩展**后字符串的长度 $|S'|$，请求出字符串 $S$ 第 $L$  次**扩展**到第 $R$ 次**扩展**的权值之和。\n\n由于结果可能很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行一个字符串 $S$。\n\n第二行两个整数 $L,R$。", "outputFormat": "输出为一个数，即答案对 $998244353$ 取模的结果。", "hint": "### 样例一解释\n\n第 $1$ 次扩展操作：`ababcab[ab]`，权值为 $9$。\n\n第 $2$ 次扩展操作：`ababcabab[abab]`，权值为 $13$。\n\n第 $3$ 次扩展操作：`ababcabababab[abab]`，权值为 $17$。\n\n权值之和为 $9+13+17=39$。\n\n### 数据范围与约束\n\n对于 $30\\%$ 的数据，$1 \\le |S| \\le 100,1 \\le L,R \\le 10$。\n\n对于 $60\\%$ 的数据，$1 \\le L,R \\le 10^6$。\n\n对于另外 $10\\%$ 的数据，$\\text{border}_{S}=|S|-1$。\n\n对于 $100\\%$ 的数据，$1 \\le |S| \\le 10^6,1 \\le L \\le R \\le 10^9$，输入均为整数和小写字母。", "locale": "zh-CN"}}}
{"pid": "P10273", "type": "P", "difficulty": 7, "samples": [["10 5\nabbaababaa\n0111111111\n1 5\n7 10\n1 3\n3 7\n4 8", "01111"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "大娱乐至上", "background": "> 闪光，黑洞，万众瞩目之星。\n>\n> 美丽的国度之中最美丽的梦。\n>\n> 她的发丝比金箔更贵，她的唇印可抵成捆钞票。\n>\n> 而她的心呀，心呀，心呀，\n>\n> 不值一枚金币，不值一枚金币，不值一瞧。", "description": "给出一个由小写字母组成、长度为 $n$ 的字符串 $S$ 和一个长度为 $n$ 的 $01$ 串 $b$，$b_i=1$ 表示 $S_i$ 是可修改的。\n\n给出 $m$ 个子串 $S_{[l,r]}$，定义一个子串 $str$ 是**非偏序**的，当且仅当可以通过修改 $S$ 的至多一个位置，使得 $m$ 个子串中原先 $<str$ 的子串都 $\\ge str$。\n\n形式化地说，一个二元组 $(l_i,r_i)$ 是**非偏序**的，当且仅当存在一个字符串 $T$（由 $S$ 修改至多一个字符得到），使得 $\\forall\\,1 \\le j \\le m,[S_{[l_j,r_j]}<S_{[l_i,r_i]}]+[T_{[l_j,r_j]}<T_{[l_i,r_i]}]\\not=2$。\n\n询问哪些子串是**非偏序**的。\n\n注意，修改后出现比 `a` 小或比 `z` 大的字符是**允许的**。\n\n", "inputFormat": "第一行两个数 $n,m$。\n\n第二行一个字符串 $S$。\n\n第三行一个 $01$ 串 $b$。\n\n接下来 $m$ 行，每行一个二元组 $(l_i,r_i)$。", "outputFormat": "输出为一个长度为 $m$ 的 $01$ 串 $ans$。$ans_i=1$ 表示 $(l_i,r_i)$ 是 `非偏序` 的，$ans_i=0$ 表示不是。", "hint": "### 样例一解释\n\n为了方便表述，钦定比 `a` 小的字符为 `#`，比 `z` 大的字符为 `*`。\n\n- $(1,5):$ 无论如何修改，恒有 $S_{[1,3]}<S_{[1,5]},T_{[1,3]}<T_{[1,5]}$。\n\n- $(7,10):$ $T$ 可以为 `abbcababaa`。\n\n- $(1,3):$ $T$ 可以为 `a#baababaa`。\n\n- $(3,7):$ $T$ 可以为 `ab#aababaa`。\n\n- $(4,8):$ $T$ 可以为 `abbaababaa`。\n\n### 数据范围与约定\n \n**本题采用捆绑测试**。\n\n$\\text{subtask1(10pt):}$ $1 \\le n,m \\le 100$。\n\n$\\text{subtask2(30pt):}$ $1 \\le n,m \\le 1000$。\n\n$\\text{subtask3(10pt):}$ $b_i=1$。\n\n$\\text{subtask4(50pt):}$ 无特殊限制。\n\n对于所有数据，$1\\le n,m \\le 2\\times 10^5,1 \\le l_i \\le r_i \\le n$，输入均为整数和小写字母。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "大娱乐至上", "background": "> 闪光，黑洞，万众瞩目之星。\n>\n> 美丽的国度之中最美丽的梦。\n>\n> 她的发丝比金箔更贵，她的唇印可抵成捆钞票。\n>\n> 而她的心呀，心呀，心呀，\n>\n> 不值一枚金币，不值一枚金币，不值一瞧。", "description": "给出一个由小写字母组成、长度为 $n$ 的字符串 $S$ 和一个长度为 $n$ 的 $01$ 串 $b$，$b_i=1$ 表示 $S_i$ 是可修改的。\n\n给出 $m$ 个子串 $S_{[l,r]}$，定义一个子串 $str$ 是**非偏序**的，当且仅当可以通过修改 $S$ 的至多一个位置，使得 $m$ 个子串中原先 $<str$ 的子串都 $\\ge str$。\n\n形式化地说，一个二元组 $(l_i,r_i)$ 是**非偏序**的，当且仅当存在一个字符串 $T$（由 $S$ 修改至多一个字符得到），使得 $\\forall\\,1 \\le j \\le m,[S_{[l_j,r_j]}<S_{[l_i,r_i]}]+[T_{[l_j,r_j]}<T_{[l_i,r_i]}]\\not=2$。\n\n询问哪些子串是**非偏序**的。\n\n注意，修改后出现比 `a` 小或比 `z` 大的字符是**允许的**。\n\n", "inputFormat": "第一行两个数 $n,m$。\n\n第二行一个字符串 $S$。\n\n第三行一个 $01$ 串 $b$。\n\n接下来 $m$ 行，每行一个二元组 $(l_i,r_i)$。", "outputFormat": "输出为一个长度为 $m$ 的 $01$ 串 $ans$。$ans_i=1$ 表示 $(l_i,r_i)$ 是 `非偏序` 的，$ans_i=0$ 表示不是。", "hint": "### 样例一解释\n\n为了方便表述，钦定比 `a` 小的字符为 `#`，比 `z` 大的字符为 `*`。\n\n- $(1,5):$ 无论如何修改，恒有 $S_{[1,3]}<S_{[1,5]},T_{[1,3]}<T_{[1,5]}$。\n\n- $(7,10):$ $T$ 可以为 `abbcababaa`。\n\n- $(1,3):$ $T$ 可以为 `a#baababaa`。\n\n- $(3,7):$ $T$ 可以为 `ab#aababaa`。\n\n- $(4,8):$ $T$ 可以为 `abbaababaa`。\n\n### 数据范围与约定\n \n**本题采用捆绑测试**。\n\n$\\text{subtask1(10pt):}$ $1 \\le n,m \\le 100$。\n\n$\\text{subtask2(30pt):}$ $1 \\le n,m \\le 1000$。\n\n$\\text{subtask3(10pt):}$ $b_i=1$。\n\n$\\text{subtask4(50pt):}$ 无特殊限制。\n\n对于所有数据，$1\\le n,m \\le 2\\times 10^5,1 \\le l_i \\le r_i \\le n$，输入均为整数和小写字母。\n", "locale": "zh-CN"}}}
{"pid": "P10274", "type": "P", "difficulty": 4, "samples": [["5 7\nfalse and true or true\n1 1 false\n1 3 true\n1 5 false\n3 3 true\n3 3 false\n5 5 false\n5 5 true", "NYYYNYY"], ["13 4\nfalse or true and false and false and true or true and false\n1 5 false\n3 11 true\n3 11 false\n13 13 true", "YNYY"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2024", "分类讨论"], "title": "[USACO24OPEN] Logical Moos B", "background": "", "description": "Farmer John has a boolean statement that is $N$ keywords long ($1 \\leq N < 2 \\cdot 10^5$, $N$ odd). Only $\\texttt{true}$ or $\\texttt{false}$ appear in odd positions, while only $\\texttt{and}$ and $\\texttt{or}$ appear in even positions.  \n\nA phrase of the form $x\\text{ OPERATOR }y$, where $x$ and $y$ are either $\\texttt{true}$ or $\\texttt{false}$, and $\\text{OPERATOR}$ is $\\texttt{and}$ or $\\texttt{or}$, evaluates as follows:  \n\n\n- $x\\texttt{ and }y$: This evaluates to true if both $x$ and $y$ are true, and false otherwise.\n- $x\\texttt{ or }y$: This evaluates to true if either $x$ or $y$ is true, and false otherwise.  \n\nWhen evaluating the statement, FJ has to take the order of precedence in Moo Language into account. Similar to C++, $\\texttt{and}$ takes priority over $\\texttt{or}$. More specifically, to evaluate the statement, repeat the following step until the statement consists of only one keyword.  \n\n\n1. If the statement contains an $\\texttt{and}$, choose any of them and replace the phrase surrounding it with its evaluation.\n1. Otherwise, the statement contains an $\\texttt{or}$. Choose any of them and replace the phrase surrounding it with its evaluation.  \n\nIt may be proven that if multiple phrases can be evaluated during a given step, it does not matter which one is chosen; the statement will always evaluate to the same value.  \n\nFJ has $Q$ $(1 \\leq Q \\leq 2 \\cdot 10^5)$ queries. In each query, he gives you two integers $l$ and $r$ ($1 \\leq l \\leq r \\leq N$, $l$ and $r$ are both odd), and deletes the segment from keyword $l$ to keyword $r$ inclusive. In turn, he wishes to replace the segment he just deleted with just one simple $\\texttt{true}$ or $\\texttt{false}$ so that the whole statement evaluates to a certain boolean value. Help FJ determine if it's possible!", "inputFormat": "The first line contains $N$ and $Q$.  \n\nThe next line contains $N$ strings, a valid boolean statement.  \n\nThe following $Q$ lines contain two integers $l$ and $r$, and a string $\\texttt{true}$ or $\\texttt{false}$, denoting whether he wants the whole statement to evaluate to true or false.", "outputFormat": "Output a string of length $Q$, where the $i$'th character is Y if the $i$'th query is possible, otherwise N.", "hint": "##### For Sample 1:\nLet's analyze the first query:  \n\nIf we were to replace delete the segment $[1, 1]$ and replace it with $\\texttt{true}$, then the whole statement becomes:  \n```\ntrue and true or true\n```\n\n\nWe evaluate the $\\texttt{and}$ keyword from at position $2$ and obtain  \n```\ntrue or true\n```\n\n\nSince we have no $\\texttt{and}$ keywords left, we have to evaluate the $\\texttt{or}$ keyword. After evaluation, all that is left is  \n```\ntrue\n```\n\n\nIt can be shown that if we were to replace the segment with $\\texttt{false}$, the statement will still evaluate to $\\texttt{true}$, so we output N since the statement cannot possibly evaluate to $\\texttt{false}$.  \n\nFor the second query, we can replace the segment $[1, 3]$ with $\\texttt{true}$ and the whole statement will evaluate to $\\texttt{true}$, so we output Y.  \n\nFor the third query, since $[1, 5]$ is the whole statement, we can replace it with anything, so we output Y.  \n\n\n\n#### SCORING:\n\n- Inputs 3-5: $N,Q\\le 10^2$\n- Inputs 6-8: $N,Q\\le 10^3$\n- Inputs 9-26: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] Logical Moos B", "background": "", "description": "Farmer John has a boolean statement that is $N$ keywords long ($1 \\leq N < 2 \\cdot 10^5$, $N$ odd). Only $\\texttt{true}$ or $\\texttt{false}$ appear in odd positions, while only $\\texttt{and}$ and $\\texttt{or}$ appear in even positions.  \n\nA phrase of the form $x\\text{ OPERATOR }y$, where $x$ and $y$ are either $\\texttt{true}$ or $\\texttt{false}$, and $\\text{OPERATOR}$ is $\\texttt{and}$ or $\\texttt{or}$, evaluates as follows:  \n\n\n- $x\\texttt{ and }y$: This evaluates to true if both $x$ and $y$ are true, and false otherwise.\n- $x\\texttt{ or }y$: This evaluates to true if either $x$ or $y$ is true, and false otherwise.  \n\nWhen evaluating the statement, FJ has to take the order of precedence in Moo Language into account. Similar to C++, $\\texttt{and}$ takes priority over $\\texttt{or}$. More specifically, to evaluate the statement, repeat the following step until the statement consists of only one keyword.  \n\n\n1. If the statement contains an $\\texttt{and}$, choose any of them and replace the phrase surrounding it with its evaluation.\n1. Otherwise, the statement contains an $\\texttt{or}$. Choose any of them and replace the phrase surrounding it with its evaluation.  \n\nIt may be proven that if multiple phrases can be evaluated during a given step, it does not matter which one is chosen; the statement will always evaluate to the same value.  \n\nFJ has $Q$ $(1 \\leq Q \\leq 2 \\cdot 10^5)$ queries. In each query, he gives you two integers $l$ and $r$ ($1 \\leq l \\leq r \\leq N$, $l$ and $r$ are both odd), and deletes the segment from keyword $l$ to keyword $r$ inclusive. In turn, he wishes to replace the segment he just deleted with just one simple $\\texttt{true}$ or $\\texttt{false}$ so that the whole statement evaluates to a certain boolean value. Help FJ determine if it's possible!", "inputFormat": "The first line contains $N$ and $Q$.  \n\nThe next line contains $N$ strings, a valid boolean statement.  \n\nThe following $Q$ lines contain two integers $l$ and $r$, and a string $\\texttt{true}$ or $\\texttt{false}$, denoting whether he wants the whole statement to evaluate to true or false.", "outputFormat": "Output a string of length $Q$, where the $i$'th character is Y if the $i$'th query is possible, otherwise N.", "hint": "##### For Sample 1:\nLet's analyze the first query:  \n\nIf we were to replace delete the segment $[1, 1]$ and replace it with $\\texttt{true}$, then the whole statement becomes:  \n```\ntrue and true or true\n```\n\n\nWe evaluate the $\\texttt{and}$ keyword from at position $2$ and obtain  \n```\ntrue or true\n```\n\n\nSince we have no $\\texttt{and}$ keywords left, we have to evaluate the $\\texttt{or}$ keyword. After evaluation, all that is left is  \n```\ntrue\n```\n\n\nIt can be shown that if we were to replace the segment with $\\texttt{false}$, the statement will still evaluate to $\\texttt{true}$, so we output N since the statement cannot possibly evaluate to $\\texttt{false}$.  \n\nFor the second query, we can replace the segment $[1, 3]$ with $\\texttt{true}$ and the whole statement will evaluate to $\\texttt{true}$, so we output Y.  \n\nFor the third query, since $[1, 5]$ is the whole statement, we can replace it with anything, so we output Y.  \n\n\n\n#### SCORING:\n\n- Inputs 3-5: $N,Q\\le 10^2$\n- Inputs 6-8: $N,Q\\le 10^3$\n- Inputs 9-26: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] Logical Moos B", "background": "", "description": "Farmer John 有一个布尔语句，包含 $N$ 个关键字（$1\\le N<2\\cdot 10^5$，$N$ 为奇数）。奇数位置仅出现 $\\texttt{true}$ 或 $\\texttt{false}$，偶数位置上仅出现 $\\texttt{and}$ 或 $\\texttt{or}$。\n\n一个 $x \\operatorname{OPERATOR} y$ 形式的短语，其中 $x$ 和 $y$ 为 $\\texttt{true}$ 或 $\\texttt{false}$，而 $\\operatorname{OPERATOR}$ 为 $\\texttt{and}$ 或 $\\texttt{or}$ ，按如下规则求值：\n\n- $x \\operatorname{and} y$：如果 $x$ 和 $y$ 均为 $\\texttt{true}$，则求值结果为 $\\texttt{true}$，否则为 $\\texttt{false}$。\n- $x \\operatorname{or} y$：如果 $x$ 或 $y$ 为 $\\texttt{true}$，则求值结果为 $\\texttt{true}$，否则为 $\\texttt{false}$。\n\n在求值该语句时，FJ 必须考虑 Moo 语言中的运算符优先级。与 C++ 类似，$\\operatorname{and}$ 优先级高于 $\\operatorname{or}$。更具体地说，在求值该语句时，重复以下步骤直至该语句仅包含一个关键字。\n\n1. 如果语句中包含 $\\operatorname{and}$，选择其中任意一个，并将其周围的短语替换为其求值结果。\n2. 否则，该语句包含 $\\operatorname{or}$。选择其中任意一个，并将其周围的短语替换为其求值结果。\n\n可以证明，如果在指定的一个步骤中可以求值多个短语，那么选择哪一个求值并不重要；该语句最终的求值结果将始终相同。\n\nFJ 有 $Q$（$1\\le Q\\le 2\\cdot 10^5$）个询问。在每个询问中，他给你两个整数 $l$ 和 $r$（$1\\le l\\le r\\le N$，$l$ 和 $r$ 均为奇数），并删除关键字 $l$ 到关键字 $r$ 之间的段。反过来，他希望用一个简单的 $\\texttt{true}$ 或 $\\texttt{false}$ 替换他刚刚删除的段，以使整个语句的求值结果为某个指定的布尔值。帮助 FJ 判断是否可行！ ", "inputFormat": "输入的第一行包含 $N$ 和 $Q$。\n\n下一行包含 $N$ 个字符串，为一个合法的布尔语句。\n\n以下 $Q$ 行，每行包含两个整数 $l$ 和 $r$，以及一个字符串 $\\texttt{true}$ 或 $\\texttt{false}$，表示他希望整个语句的求值结果为 $\\texttt{true}$ 还是 $\\texttt{false}$。 ", "outputFormat": "输出一个长度为 $Q$ 的字符串，其中如果第 $i$ 个询问的结果为可能，则第 $i$ 个字符为 `Y`，否则为 `N`。 ", "hint": "### 样例解释 1\n\n我们来分析第一个询问：\n\n如果我们删除段 $[1,1]$ 并替换为 $\\texttt{true}$，那么整个语句将变为：\n\n$\\texttt{true and true or true}$\n\n我们对位置 $2$ 处的 $\\texttt{and}$\n\n关键字求值，得到\n\n$\\texttt{true or true}$\n\n由于我们没有剩下的 $\\texttt{and}$ 关键字，我们必须求值 $\\texttt{or}$ 关键字。求值结束后，余下的是\n\n$\\texttt{true}$\n\n可以证明，如果我们用 $\\texttt{false}$ 替换该段，该语句仍将求值为 $\\texttt{true}$，因此我们输出 `N`，因为该语句不可能求值为 false。\n\n对于第二个询问，我们可以将段 $[1,3]$\n替换为 true，整个语句将求值为 $\\texttt{true}$，因此我们输出 `Y`。\n\n对于第三个询问，由于 $[1,5]$ 是整个语句，我们可以将其替换为任意内容，因此我们输出 `Y`。\n\n### 测试点性质\n\n- 测试点 $3-5$：$N,Q\\le 10^2$。\n- 测试点 $6-8$：$N,Q\\le 10^3$。\n- 测试点 $9-26$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10275", "type": "P", "difficulty": 3, "samples": [["5 4\n0 0\n2 0\n2 2\n0 2\n0 0 0 2\n0 2 1 0\n2 1 0 2\n1 0 1 2\n1 2 1 0", "2\n3\n3\n4\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2024"], "title": "[USACO24OPEN] Walking Along a Fence B", "background": "", "description": "Farmer John's $N$ cows ($1 \\leq N \\leq 10^5$) each like to take a daily walk around the fence enclosing his pasture.   \n\nThe fence consists of $P$ posts ($4 \\leq P \\leq 2\\cdot 10^5$, $P$ even), the location of each being a different 2D point $(x,y)$ on a map of FJ's farm ($0 \\leq x, y \\leq 1000$).  Each post is connected to the two adjacent posts by fences that are either vertical  or horizontal line segments, so the entire fence can be considered a polygon whose sides are parallel to the x or y axes (the last post connects back to the first post, ensuring the fence forms a closed loop that encloses the pasture).  The fence polygon is \"well-behaved\" in that fence segments only potentially overlap at their endpoints, each post aligns with exactly  two fence segment endpoints, and every two fence segments that meet at an endpoint are perpendicular.    \n\nEach cow has a preferred starting and ending position for her daily walk, each being points somewhere along the fence (possibly at posts, possibly not).  Each cow walks along the fence for her daily walks, starting from her starting position and ending at her ending position.  There are two routes that the cow could take, given that the fence forms a closed loop. Since cows are somewhat lazy creatures, each cow will walk in the direction around the fence that is shorter (if there is a tie, the cow may choose either direction).   \n\nDetermine the distance that each cow walks.", "inputFormat": "The first line of input contains $N$ and $P$. Each of the next $P$ lines contains two integers representing the positions of the fence posts in clockwise or counterclockwise order. Each of the next $N$ lines contains four integers $x_1$ $y_1$ $x_2$ $y_2$ representing the starting position $(x_1, y_1)$ and ending position $(x_2, y_2)$ of a cow.", "outputFormat": "Write $N$ integers as output, giving the distance that each cow walks.", "hint": "The first cow can walk directly from $(0,0)$ to $(0,2)$.  \n\nThe second cow can walk from $(0,2)$ to $(0,0)$ and then to $(1,0)$.  \n\nThe fourth cow has two possible routes with equal lengths: $(1,0)\\to (0,0)\\to (0,2)\\to (1,2)$ and $(1,0)\\to (2,0)\\to (2,2)\\to (1,2)$.  \n\n\n#### SCORING:\n\n- Inputs 2-6: $0\\le x,y \\le 100$ and $N\\le 100$\n- Inputs 7-11: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] Walking Along a Fence B", "background": "", "description": "Farmer John's $N$ cows ($1 \\leq N \\leq 10^5$) each like to take a daily walk around the fence enclosing his pasture.   \n\nThe fence consists of $P$ posts ($4 \\leq P \\leq 2\\cdot 10^5$, $P$ even), the location of each being a different 2D point $(x,y)$ on a map of FJ's farm ($0 \\leq x, y \\leq 1000$).  Each post is connected to the two adjacent posts by fences that are either vertical  or horizontal line segments, so the entire fence can be considered a polygon whose sides are parallel to the x or y axes (the last post connects back to the first post, ensuring the fence forms a closed loop that encloses the pasture).  The fence polygon is \"well-behaved\" in that fence segments only potentially overlap at their endpoints, each post aligns with exactly  two fence segment endpoints, and every two fence segments that meet at an endpoint are perpendicular.    \n\nEach cow has a preferred starting and ending position for her daily walk, each being points somewhere along the fence (possibly at posts, possibly not).  Each cow walks along the fence for her daily walks, starting from her starting position and ending at her ending position.  There are two routes that the cow could take, given that the fence forms a closed loop. Since cows are somewhat lazy creatures, each cow will walk in the direction around the fence that is shorter (if there is a tie, the cow may choose either direction).   \n\nDetermine the distance that each cow walks.", "inputFormat": "The first line of input contains $N$ and $P$. Each of the next $P$ lines contains two integers representing the positions of the fence posts in clockwise or counterclockwise order. Each of the next $N$ lines contains four integers $x_1$ $y_1$ $x_2$ $y_2$ representing the starting position $(x_1, y_1)$ and ending position $(x_2, y_2)$ of a cow.", "outputFormat": "Write $N$ integers as output, giving the distance that each cow walks.", "hint": "The first cow can walk directly from $(0,0)$ to $(0,2)$.  \n\nThe second cow can walk from $(0,2)$ to $(0,0)$ and then to $(1,0)$.  \n\nThe fourth cow has two possible routes with equal lengths: $(1,0)\\to (0,0)\\to (0,2)\\to (1,2)$ and $(1,0)\\to (2,0)\\to (2,2)\\to (1,2)$.  \n\n\n#### SCORING:\n\n- Inputs 2-6: $0\\le x,y \\le 100$ and $N\\le 100$\n- Inputs 7-11: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] Walking Along a Fence B", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$1\\le N\\le 10^5$）每头都喜欢日常沿围着牧场的栅栏散步。\n\n栅栏由 $P$ 根柱子组成（$4\\le P\\le 2\\cdot 10^5$，$P$ 为偶数），每根柱子的位置是 FJ 农场地图上的一个不同的二维坐标点 $(x,y)$（$0\\le x,y\\le 1000$）。每根柱子通过垂直或水平线段的栅栏连接到两根相邻的柱子，因此整个栅栏可以被视为各边平行于 $x$ 轴或 $y$ 轴的一个多边形（最后一根柱子连回第一根柱子，确保围栏形成一个包围牧场的闭环）。栅栏多边形是「规则的」，体现在栅栏段仅可能在其端点处重合，每根柱子恰好属于两个栅栏段，同时每两个在端点处相交的栅栏段都是垂直的。\n\n每头奶牛的日常散步都有一个偏好的起始和结束位置，均为沿栅栏的某个点（可能在柱子处，也可能不在）。每头奶牛日常散步时沿着栅栏行走，从起始位置开始，到结束位置结束。由于栅栏形成闭环，奶牛有两条路线可以选择。由于奶牛是一种有点懒的生物，每头奶牛都会选择距离较短的方向沿栅栏行走（如果并列，奶牛可以选择任一方向）。\n\n求每头奶牛行走的距离。 ", "inputFormat": "输入的第一行包含 $N$ 和 $P$。以下 $P$ 行的每一行包含两个整数，以顺时针或逆时针顺序表示栅栏柱子的位置。以下 $N$ 行的每一行包含四个整数 $x_1\\ y_1\\ x_2\\ y_2$，表示一头奶牛的起始位置 $(x_1,y_1)$ 和结束位置 $(x_2,y_2)$。 ", "outputFormat": "输出 $N$ 个整数，为每头奶牛行走的距离。 ", "hint": "### 样例解释\n\n第一头奶牛可以直接从 $(0,0)$ 走到 $(0,2)$。\n\n第二头奶牛可以从 $(0,2)$ 走到 $(0,0)$，然后走到 $(1,0)$。\n\n第四头奶牛有两条长度相等的可能路线：$(1,0)\\to (0,0)\\to (0,2)\\to (1,2)$ 和 $(1,0)\\to (2,0)\\to (2,2)\\to (1,2)$。\n\n### 测试点性质\n\n- 测试点 $2-6$：$0\\le x,y\\le 100$ 且 $N\\le 100$。\n- 测试点 $7-11$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10276", "type": "P", "difficulty": 3, "samples": [["5\n2\n1\n2\n2\n4\n1 1 1\n4\n2 1 1\n4\n3 2 1", "1 2\n-1\n-1\n3 1 2 4\n1 2 3 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2024"], "title": "[USACO24OPEN] Farmer John's Favorite Permutation B", "background": "", "description": "Farmer John has a permutation $p$ of length $N$ ($2 \\leq N \\leq 10^5)$, containing each positive integer from $1$ to $N$ exactly once. However, Farmer Nhoj has broken into FJ's barn and disassembled $p$. To not be too cruel, FN has written some hints that will help FJ reconstruct $p$. While there is more than one element remaining in $p$, FN does the following:  \n\nLet the remaining elements of $p$ be $p'_1, p'_2, \\dots , p'_n$, \n-  If $p'_1 > p'_n$, he writes down $p'_2$ and removes $p'_1$ from the permutation.\n-  Otherwise, he writes down $p'_{n-1}$ and removes $p'_n$ from the permutation.  \n\nAt the end, Farmer Nhoj will have written down $N - 1$ integers $h_1, h_2, \\dots, h_{N-1}$, in that order. Given $h$, Farmer John wants to enlist your help to reconstruct the lexicographically minimum $p$ consistent with Farmer Nhoj's hints, or determine that Farmer Nhoj must have made a mistake.  Recall that if you are given two permutations $p$ and $p'$, $p$ is lexicographically smaller than $p'$ if $p_i < p'_i$ at the first position $i$ where the two differ.", "inputFormat": "Each input consists of $T$ independent test cases ($1\\le T\\le 10$). Each test case is described as follows:  \n\nThe first line contains $N$.  \n\nThe second line contains $N - 1$ integers $h_1, h_2, \\dots, h_{N-1}$ ($1\\le h_i\\le N$).", "outputFormat": "Output $T$ lines, one for each test case.  \n\nIf there is a permutation $p$ of $1\\dots N$ consistent with $h$, output the lexicographically smallest such $p$. If no such $p$ exists, output $-1$.", "hint": "For the fourth test case, if $p=[3,1,2,4]$ then FN will have written down $h=[2,1,1]$.  \n```text\np' = [3,1,2,4]\np_1' < p_n' -> h_1 = 2\np' = [3,1,2]\np_1' > p_n' -> h_2 = 1\np' = [1,2]\np_1' < p_n' -> h_3 = 1\np' = [1]\n```\n\n\nNote that the permutation $p=[4,2,1,3]$ would also produce the same $h$, but $[3,1,2,4]$ is lexiocgraphically smaller.  \n\nFor the second test case, there is no $p$ consistent with $h$; both $p=[1,2]$ and $p=[2,1]$ would produce $h=[1]$, not $h=[2]$.  \n\n\n#### SCORING:\n\n- Input 2: $N\\le 8$\n- Inputs 3-6: $N\\le 100$\n- Inputs 7-11: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] Farmer John's Favorite Permutation B", "background": "", "description": "Farmer John has a permutation $p$ of length $N$ ($2 \\leq N \\leq 10^5)$, containing each positive integer from $1$ to $N$ exactly once. However, Farmer Nhoj has broken into FJ's barn and disassembled $p$. To not be too cruel, FN has written some hints that will help FJ reconstruct $p$. While there is more than one element remaining in $p$, FN does the following:  \n\nLet the remaining elements of $p$ be $p'_1, p'_2, \\dots , p'_n$, \n-  If $p'_1 > p'_n$, he writes down $p'_2$ and removes $p'_1$ from the permutation.\n-  Otherwise, he writes down $p'_{n-1}$ and removes $p'_n$ from the permutation.  \n\nAt the end, Farmer Nhoj will have written down $N - 1$ integers $h_1, h_2, \\dots, h_{N-1}$, in that order. Given $h$, Farmer John wants to enlist your help to reconstruct the lexicographically minimum $p$ consistent with Farmer Nhoj's hints, or determine that Farmer Nhoj must have made a mistake.  Recall that if you are given two permutations $p$ and $p'$, $p$ is lexicographically smaller than $p'$ if $p_i < p'_i$ at the first position $i$ where the two differ.", "inputFormat": "Each input consists of $T$ independent test cases ($1\\le T\\le 10$). Each test case is described as follows:  \n\nThe first line contains $N$.  \n\nThe second line contains $N - 1$ integers $h_1, h_2, \\dots, h_{N-1}$ ($1\\le h_i\\le N$).", "outputFormat": "Output $T$ lines, one for each test case.  \n\nIf there is a permutation $p$ of $1\\dots N$ consistent with $h$, output the lexicographically smallest such $p$. If no such $p$ exists, output $-1$.", "hint": "For the fourth test case, if $p=[3,1,2,4]$ then FN will have written down $h=[2,1,1]$.  \n```text\np' = [3,1,2,4]\np_1' < p_n' -> h_1 = 2\np' = [3,1,2]\np_1' > p_n' -> h_2 = 1\np' = [1,2]\np_1' < p_n' -> h_3 = 1\np' = [1]\n```\n\n\nNote that the permutation $p=[4,2,1,3]$ would also produce the same $h$, but $[3,1,2,4]$ is lexiocgraphically smaller.  \n\nFor the second test case, there is no $p$ consistent with $h$; both $p=[1,2]$ and $p=[2,1]$ would produce $h=[1]$, not $h=[2]$.  \n\n\n#### SCORING:\n\n- Input 2: $N\\le 8$\n- Inputs 3-6: $N\\le 100$\n- Inputs 7-11: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] Farmer John's Favorite Permutation B", "background": "", "description": "Farmer John 有一个长为 $N$（$2\\le N\\le 10^5$）的排列 $p$，包含从 $1$ 到 $N$ 的每个正整数恰好一次。然而，Farmer Nhoj 闯入了 FJ 的牛棚并拆散了 $p$。为了不至于太过残忍，FN 写了一些能够帮助 FJ 重建 $p$ 的提示。当 $p$ 中剩余多于一个元素时，FN 会执行以下操作：\n\n令 $p$ 的剩余元素为 $p_1^\\prime,p_2^\\prime,\\ldots,p_n^\\prime$，\n\n- 如果 $p_1^\\prime>p_n^\\prime$，他写下 $p_2^\\prime$ 并从排列中删除 $p_1^\\prime$。\n- 否则，他写下 $p_{n−1}^\\prime$ 并从排列中删除 $p_n^\\prime$。\n\n最终，Farmer Nhoj 将按顺序写下 $N−1$ 个整数 $h_1,h_2,\\ldots,h_{N−1}$。给定 $h$，Farmer John 希望得到你的帮助重建与 Farmer Nhoj 的提示相一致的最小字典序 $p$，或者判断 Farmer Nhoj 一定犯了错误。我们知道，给定两个排列 $p$ 和 $p^\\prime$，如果在第一个两者不同的位置 $i$ 处有 $p_i<p_i^\\prime$，则 $p$ 的字典序小于 $p^\\prime$。", "inputFormat": "每个测试点包含 $T$ 个独立的测试用例（$1\\le T\\le 10$）。每个测试用例的描述如下：\n\n第一行包含 $N$。\n\n第二行包含 $N−1$ 个整数 $h_1,h_2,\\ldots,h_{N−1}$（$1\\le h_i\\le N$）。", "outputFormat": "输出 $T$ 行，每个测试用例一行。\n\n如果存在与 $h$ 相一致的 $1\\ldots N$ 的排列 $p$，输出字典顺序最小的 $p$。如果不存在这样的 $p$，输出 $-1$。 ", "hint": "对于第四个测试用例，如果 $p=[3,1,2,4]$ 则 FN 将写下 $h=[2,1,1]$。\n\n```plain\np' = [3,1,2,4]\np_1' < p_n' -> h_1 = 2\np' = [3,1,2]\np_1' > p_n' -> h_2 = 1\np' = [1,2]\np_1' < p_n' -> h_3 = 1\np' = [1]\n```\n\n注意排列 $p=[4,2,1,3]$ 也会产生同样的 $h$，但 $[3,1,2,4]$ 字典序更小。\n\n对于第二个测试用例，不存在与 $h$ 相一致的 $p$；$p=[1,2]$ 和 $p=[2,1]$ 均会产生 $h=[1]$，并非 $h=[2]$。\n\n### 测试点性质\n\n- 测试点 $2$：$N\\le 8$。\n- 测试点 $3-6$：$N\\le 100$。\n- 测试点 $7-11$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10277", "type": "P", "difficulty": 4, "samples": [["6 3\n3 1 4159 2 6 5", "8\n110"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "堆", "2024", "图论建模"], "title": "[USACO24OPEN] Bessie's Interview S", "background": "", "description": "Bessie is looking for a new job! Fortunately, $K$ farmers are currently hiring and conducting interviews. Since jobs are highly competitive, the farmers have decided to number and interview cows in the order they applied. There are $N$ cows that applied before Bessie, so her number is $N+1$  ($1 \\leq K \\leq N \\leq 3 \\cdot 10^5$).  \n\nThe interview process will go as follows. At time $0$, farmer $i$ will start interviewing cow $i$ for each $1 \\leq i \\leq K$. Once a farmer finishes an interview, he will immediately begin interviewing the next cow in line. If multiple farmers finish at the same time, the next cow may choose to be interviewed by any of the available farmers, according to her preference.  \n\nFor each $1\\le i\\le N$, Bessie already knows that cow $i$'s interview will take exactly $t_i$ minutes ($1 \\leq t_i \\leq 10^9$). However, she doesn't know each cow's preference of farmers.  \n\nSince this job is very important to Bessie, she wants to carefully prepare for her interview. To do this, she needs to know when she will be interviewed and which farmers could potentially interview her. Help her find this information!", "inputFormat": "The first line of the input will contain two integers $N$ and $K$.  \n\nThe second line will contain $N$ integers $t_1 \\dots t_N$.", "outputFormat": "On the first line, print the time Bessie's interview will begin.  \n\nOn the second line, a bit string of length $K$, where the $i$-th bit is $1$ if farmer $i$ could interview Bessie and $0$ otherwise.", "hint": "There are $6$ cows aside from Bessie and $3$ farmers, and the interview process will go as follows:  \n\n\n1.  At time $t = 0$, farmer $1$ interviews cow $1$, farmer $2$ interviews cow $2$, and farmer $3$ interviews cow $3$.\n1.  At time $t = 1$, farmer $2$ finishes his interview with cow $2$ and starts interviewing cow $4$.\n1.  At time $t = 3$, both farmer $1$ and farmer $2$ finish their interviews, and there are two possibilities:   \n-  Farmer $1$ interviews cow $5$ and farmer $2$ interviews cow $6$. In this case, farmer $2$ would finish his interview at time $t = 8$ and start interviewing Bessie.\n-  Farmer $1$ interviews cow $6$ and farmer $2$ interviews cow $5$. In this case, farmer $1$ would finish his interview at time $t = 8$ and start interviewing Bessie.     \n\nThus, Bessie's interview will begin at time $t = 8$, and she could be interviewed by either farmer $1$ or farmer $2$.  \n\n\n#### SCORING:\n- Inputs 2-3: No two farmers finish at the same time.\n- Inputs 4-9: $N\\le 3\\cdot 10^3$.\n- Inputs 10-21: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] Bessie's Interview S", "background": "", "description": "Bessie is looking for a new job! Fortunately, $K$ farmers are currently hiring and conducting interviews. Since jobs are highly competitive, the farmers have decided to number and interview cows in the order they applied. There are $N$ cows that applied before Bessie, so her number is $N+1$  ($1 \\leq K \\leq N \\leq 3 \\cdot 10^5$).  \n\nThe interview process will go as follows. At time $0$, farmer $i$ will start interviewing cow $i$ for each $1 \\leq i \\leq K$. Once a farmer finishes an interview, he will immediately begin interviewing the next cow in line. If multiple farmers finish at the same time, the next cow may choose to be interviewed by any of the available farmers, according to her preference.  \n\nFor each $1\\le i\\le N$, Bessie already knows that cow $i$'s interview will take exactly $t_i$ minutes ($1 \\leq t_i \\leq 10^9$). However, she doesn't know each cow's preference of farmers.  \n\nSince this job is very important to Bessie, she wants to carefully prepare for her interview. To do this, she needs to know when she will be interviewed and which farmers could potentially interview her. Help her find this information!", "inputFormat": "The first line of the input will contain two integers $N$ and $K$.  \n\nThe second line will contain $N$ integers $t_1 \\dots t_N$.", "outputFormat": "On the first line, print the time Bessie's interview will begin.  \n\nOn the second line, a bit string of length $K$, where the $i$-th bit is $1$ if farmer $i$ could interview Bessie and $0$ otherwise.", "hint": "There are $6$ cows aside from Bessie and $3$ farmers, and the interview process will go as follows:  \n\n\n1.  At time $t = 0$, farmer $1$ interviews cow $1$, farmer $2$ interviews cow $2$, and farmer $3$ interviews cow $3$.\n1.  At time $t = 1$, farmer $2$ finishes his interview with cow $2$ and starts interviewing cow $4$.\n1.  At time $t = 3$, both farmer $1$ and farmer $2$ finish their interviews, and there are two possibilities:   \n-  Farmer $1$ interviews cow $5$ and farmer $2$ interviews cow $6$. In this case, farmer $2$ would finish his interview at time $t = 8$ and start interviewing Bessie.\n-  Farmer $1$ interviews cow $6$ and farmer $2$ interviews cow $5$. In this case, farmer $1$ would finish his interview at time $t = 8$ and start interviewing Bessie.     \n\nThus, Bessie's interview will begin at time $t = 8$, and she could be interviewed by either farmer $1$ or farmer $2$.  \n\n\n#### SCORING:\n- Inputs 2-3: No two farmers finish at the same time.\n- Inputs 4-9: $N\\le 3\\cdot 10^3$.\n- Inputs 10-21: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] Bessie's Interview S", "background": "", "description": "Bessie 正在寻找新工作！幸运的是，$K$ 名农夫目前正在招聘并举行面试。由于工作竞争激烈，农夫们决定按申请的顺序对奶牛进行编号和面试。有 $N$ 头奶牛在 Bessie 之前申请，因此她的编号为 $N+1$（$1\\le K\\le N\\le 3\\cdot 10^5$）。\n\n面试过程如下。在时刻 $0$，对于每一个 $1\\le i\\le K$，农夫 $i$ 将开始面试奶牛 $i$。一旦一名农夫完成面试，他将立刻开始面试队列中的下一头奶牛。如果多名农夫同时完成，下一头奶牛可以根据自己的偏好选择接受任一此时空闲的农夫的面试。\n\n对于每一个 $1\\le i\\le N$，Bessie 已经知道奶牛 $i$ 的面试将恰好花费 $t_i$ 分钟（$1\\le t_i\\le 10^9$）。然而，她不知道每头奶牛对农夫的偏好。\n\n由于这份工作对 Bessie 来说非常重要，所以她想要认真准备面试。为此，她需要知道她会在何时接受面试，以及哪些农夫可能会面试她。帮助她求出这些信息！ ", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $K$。\n\n第二行包含 $N$ 个整数 $t_1\\ldots t_N$。 ", "outputFormat": "输出的第一行包含 Bessie 的面试将开始的时刻。\n\n第二行包含一个长为 $K$ 的 `01` 字符串，其中如果农夫 $i$ 可能面试 Bessie 则第 $i$ 个字符为 `1`，否则为 `0`。 ", "hint": "### 样例解释 1\n\n除了 Bessie 之外有 $6$ 头奶牛，以及 $3$ 名农夫。面试过程将如下进行：\n\n1. 于时刻 $t=0$，农夫 $1$ 面试奶牛 $1$，农夫 $2$ 面试奶牛 $2$，农夫 $3$ 面试奶牛 $3$。\n2. 于时刻 $t=1$，农夫 $2$ 结束了对奶牛 $2$ 的面试并开始面试奶牛 $4$。\n3. 于时刻 $t=3$，农夫 $1$ 和农夫 $2$ 都完成了面试，从而有两种可能：\n    * 农夫 $1$ 面试奶牛 $5$，农夫 $2$ 面试奶牛 $6$。在这种情况下，农夫 $2$ 将于时刻 $t=8$ 完成面试并开始面试 Bessie。\n    * 农夫 $1$ 面试奶牛 $6$，农夫 $2$ 面试奶牛 $5$。在这种情况下，农夫 $1$ 将于时刻 $t=8$ 完成面试并开始面试 Bessie。\n\n从而，Bessie 的面试将于时刻 $t=8$ 开始，并且她可能会被农夫 $1$ 或农夫 $2$ 面试。\n\n### 测试点性质\n\n- 测试点 $2-3$：没有两名农夫同时完成面试。\n- 测试点 $4-9$：$N\\le 3\\cdot 10^3$。\n- 测试点 $10-21$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10278", "type": "P", "difficulty": 5, "samples": [["5 4\n3 1\n1 5\n3 5\n1 1\n2 1 1 5\n1 5 3 4\n3 1 3 5\n2 1 2 1\n3 2 3 3", "1\n2\n2\n1"], ["2 8\n1 1\n1 2\n0 2\n0 3\n0 0\n0 1\n2 3\n2 0\n1 1 2 1\n1 0 1 3", "1\n0\n0\n0\n1\n1\n1\n2"], ["1 12\n0 0\n2 0\n2 1\n1 1\n1 2\n3 2\n3 3\n1 3\n1 4\n2 4\n2 5\n0 5\n2 2 0 2", "1\n1\n1\n1\n1\n0\n0\n0\n0\n0\n0\n0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["USACO", "2024", "图论建模", "差分"], "title": "[USACO24OPEN] Painting Fence Posts S", "background": "", "description": "****Note: The time limit and memory limit for this problem are 3s and 512MB, which are 1.5x and 2x the normal amount, respectively.****  \n\nFarmer John's $N$ cows ($1 \\leq N \\leq 10^5$) each like to take a daily walk around the fence enclosing his pasture.  Unfortunately, whenever a cow walks past a fence post, she brushes up against it, requiring Farmer John to need to repaint the fence posts regularly.  \n\nThe fence consists of $P$ posts ($4 \\leq P \\leq 2\\cdot 10^5$, $P$ even), the location of each being a different 2D point $(x,y)$ on a map of FJ's farm ($0 \\leq x, y \\leq 10^9$).  Each post is connected to the two adjacent posts by fences that are either vertical  or horizontal line segments, so the entire fence can be considered a polygon whose sides are parallel to the x or y axes (the last post connects back to the first post, ensuring the fence forms a closed loop that encloses the pasture).  The fence polygon is \"well-behaved\" in that fence segments only potentially overlap at their endpoints, each post aligns with exactly  two fence segment endpoints, and every two fence segments that meet at an endpoint are perpendicular.   \n\nEach cow has a preferred starting and ending position for her daily walk, each being points somewhere along the fence (possibly at posts, possibly not).  Each cow walks along the fence for her daily walks, starting from her starting position and ending at her ending position.  There are two routes that the cow could take, given that the fence forms a closed loop.  Since cows are somewhat lazy creatures, each cow will walk in the direction around the fence that is shorter. Remarkably, this choice is always clear -- there are no ties!  \n\nA cow touches a fence post if she walks past it, or if the fence post is the starting or ending point of her walk.  Please help FJ calculate the number of daily touches experienced by each fence post, so he knows which post to repaint next.  \n\nIt can be shown that there is exactly one possibility for the fences given the locations of all of the posts.", "inputFormat": "The first line of input contains $N$ and $P$. Each of the next $P$ lines contains two integers representing the positions of the fence posts in no particular order. Each of the next $N$ lines contains four integers $x_1$ $y_1$ $x_2$ $y_2$ representing the starting position $(x_1, y_1)$ and ending position $(x_2, y_2)$ of a cow.", "outputFormat": "Write $P$ integers as output, giving the number of touches experienced by each fence post.", "hint": "##### For Sample 1:\nThe following posts are connected by fence segments:  \n\n$$(3,1)\\leftrightarrow (3, 5) \\leftrightarrow  (1,5) \\leftrightarrow (1,1) \\leftrightarrow (3,1)$$  \n\nThe posts touched by each cow are as follows:  \n\n1. Posts $2$ and $4$.\n1. Posts $2$ and $3$.\n1. Posts $1$ and $3$.\n1. No posts.\n1. No posts.  \n\n#### SCORING:\n- Inputs 4-6: $N,P\\le 1000$\n- Inputs 7-9: All locations satisfy $0\\le x, y\\le 1000$.\n- Inputs 10-15: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] Painting Fence Posts S", "background": "", "description": "****Note: The time limit and memory limit for this problem are 3s and 512MB, which are 1.5x and 2x the normal amount, respectively.****  \n\nFarmer John's $N$ cows ($1 \\leq N \\leq 10^5$) each like to take a daily walk around the fence enclosing his pasture.  Unfortunately, whenever a cow walks past a fence post, she brushes up against it, requiring Farmer John to need to repaint the fence posts regularly.  \n\nThe fence consists of $P$ posts ($4 \\leq P \\leq 2\\cdot 10^5$, $P$ even), the location of each being a different 2D point $(x,y)$ on a map of FJ's farm ($0 \\leq x, y \\leq 10^9$).  Each post is connected to the two adjacent posts by fences that are either vertical  or horizontal line segments, so the entire fence can be considered a polygon whose sides are parallel to the x or y axes (the last post connects back to the first post, ensuring the fence forms a closed loop that encloses the pasture).  The fence polygon is \"well-behaved\" in that fence segments only potentially overlap at their endpoints, each post aligns with exactly  two fence segment endpoints, and every two fence segments that meet at an endpoint are perpendicular.   \n\nEach cow has a preferred starting and ending position for her daily walk, each being points somewhere along the fence (possibly at posts, possibly not).  Each cow walks along the fence for her daily walks, starting from her starting position and ending at her ending position.  There are two routes that the cow could take, given that the fence forms a closed loop.  Since cows are somewhat lazy creatures, each cow will walk in the direction around the fence that is shorter. Remarkably, this choice is always clear -- there are no ties!  \n\nA cow touches a fence post if she walks past it, or if the fence post is the starting or ending point of her walk.  Please help FJ calculate the number of daily touches experienced by each fence post, so he knows which post to repaint next.  \n\nIt can be shown that there is exactly one possibility for the fences given the locations of all of the posts.", "inputFormat": "The first line of input contains $N$ and $P$. Each of the next $P$ lines contains two integers representing the positions of the fence posts in no particular order. Each of the next $N$ lines contains four integers $x_1$ $y_1$ $x_2$ $y_2$ representing the starting position $(x_1, y_1)$ and ending position $(x_2, y_2)$ of a cow.", "outputFormat": "Write $P$ integers as output, giving the number of touches experienced by each fence post.", "hint": "##### For Sample 1:\nThe following posts are connected by fence segments:  \n\n$$(3,1)\\leftrightarrow (3, 5) \\leftrightarrow  (1,5) \\leftrightarrow (1,1) \\leftrightarrow (3,1)$$  \n\nThe posts touched by each cow are as follows:  \n\n1. Posts $2$ and $4$.\n1. Posts $2$ and $3$.\n1. Posts $1$ and $3$.\n1. No posts.\n1. No posts.  \n\n#### SCORING:\n- Inputs 4-6: $N,P\\le 1000$\n- Inputs 7-9: All locations satisfy $0\\le x, y\\le 1000$.\n- Inputs 10-15: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] Painting Fence Posts S", "background": "**注意：本题的时间限制和内存限制为 3 秒 和 512MB，分别为通常限制的 1.5 倍和 2 倍。**", "description": "Farmer John 的 $N$ 头奶牛（$1\\le N\\le 10^5$）每头都喜欢日常沿围着牧场的栅栏散步。不幸的是，每当一头奶牛走过栅栏柱子时，她就会碰到它，这要求 Farmer John 需要定期重新粉刷栅栏柱子。\n\n栅栏由 $P$ 根柱子组成（$4\\le P\\le 2\\cdot 10^5$，$P$ 为偶数），每根柱子的位置是 FJ 农场地图上的一个不同的二维坐标点 $(x,y)$（$0\\le x,y\\le 10^9$）。每根柱子通过垂直或水平线段的栅栏连接到两根相邻的柱子，因此整个栅栏可以被视为各边平行于 $x$ 轴或 $y$ 轴的一个多边形（最后一根柱子连回第一根柱子，确保围栏形成一个包围牧场的闭环）。栅栏多边形是「规则的」，体现在栅栏段仅可能在其端点处重合，每根柱子恰好属于两个栅栏段，同时每两个在端点处相交的栅栏段都是垂直的。\n\n每头奶牛的日常散步都有一个偏好的起始和结束位置，均为沿栅栏的某个点（可能在柱子处，也可能不在）。每头奶牛日常散步时沿着栅栏行走，从起始位置开始，到结束位置结束。由于栅栏形成闭环，奶牛有两条路线可以选择。由于奶牛是一种有点懒的生物，每头奶牛都会选择距离较短的方向沿栅栏行走。值得注意的是，这个选择总是明确的——不存在并列的情况！\n\n一头奶牛会触碰一根栅栏柱子，当她走过这根柱子，或者当这根栅栏柱子是她散步的起点或终点时。请帮助 FJ 计算每个栅栏柱子每天所经历的触碰次数，以便他知道接下来要重新粉刷哪根柱子。\n\n可以证明，给定所有柱子的位置，组成的栅栏仅有唯一的可能性。", "inputFormat": "输入的第一行包含 $N$ 和 $P$。以下 $P$ 行的每一行包含两个整数，表示栅栏柱子的位置，没有特定的顺序。以下 $N$ 行的每一行包含四个整数 $x_1\\ y_1\\ x_2\\ y_2$，表示一头奶牛的起始位置 $(x_1,y_1)$ 和结束位置 $(x_2,y_2)$。", "outputFormat": "输出 $P$ 个整数，包含每个栅栏柱子所经历的触碰次数。", "hint": "### 样例解释 1\n\n柱子以如下方式由栅栏段连接：\n\n$$\n(3,1)\\leftrightarrow(3,5)\\leftrightarrow(1,5)\\leftrightarrow(1,1)\\leftrightarrow(3,1)\n$$\n\n各奶牛接触的柱子如下：\n\n1. 柱子 $2$ 和 $4$。\n2. 柱子 $2$ 和 $3$。\n3. 柱子 $1$ 和 $3$。\n4. 无。\n5. 无。\n\n### 测试点性质\n\n- 测试点 $4-6$：$N,P\\le 1000$。\n- 测试点 $7-9$：所有位置均有 $0\\le x,y\\le 1000$。\n- 测试点 $10-15$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10279", "type": "P", "difficulty": 5, "samples": [["8\nAGTCAACG", "11\n10\n5\n4\n2\n2\n1\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["USACO", "2024", "哈希 hashing", "单调栈"], "title": "[USACO24OPEN] The 'Winning' Gene S", "background": "", "description": "****Note: The memory limit for this problem is 512MB, twice the default.****  \n\nAfter years of hosting games and watching Bessie get first place over and over, Farmer John has realized that this can't be accidental. Instead, he concludes that Bessie must have winning coded into her DNA so he sets out to find this \"winning\" gene.  \n\nHe devises a process to identify possible candidates for this \"winning\" gene. He takes Bessie's genome, which is a string $S$ of length $N$ where $1 \\leq N \\leq 3000$. He picks some pair $(K,L)$ where $1 \\leq L \\leq K \\leq N$ representing that the \"winning\" gene candidates will have length $L$ and will be found within a larger $K$ length substring. To identify the gene, he takes all $K$ length substrings from $S$ which we will call a $k$-mer. For a given $k$-mer, he takes all length $L$ substrings, identifies the lexicographically minimal substring as a winning gene candidate (choosing the leftmost such substring if there is a tie),  and then writes down the $0$-indexed position $p_i$ where that substring starts in $S$ to a set $P$.   \n\nSince he hasn't picked $K$ and $L$ yet, he wants to know how many candidates there will be for every pair of $(K,L)$.  \n\nFor each $v$ in $1\\dots N$, help him determine the number of $(K,L)$ pairs with $|P|=v$.", "inputFormat": "$N$ representing the length of the string. $S$ representing the given string. All characters are guaranteed to be uppercase characters where $s_i \\in A-Z$ since bovine genetics are far more advanced than ours.", "outputFormat": "For each $v$ in $1\\dots N$, output the number of $(K,L)$ pairs with $|P|=v$, with each number on a separate line.", "hint": "In this test case, the third line of the output is 5 because we see that there are exactly 5 pairs of $K$ and $L$ that allow for three \"winning\" gene candidates.  These candidates are (where $p_i$ is $0$-indexed):  \n```text\n(4,2) -> P = [0,3,4]\n(5,3) -> P = [0,3,4]\n(6,4) -> P = [0,3,4]\n(6,5) -> P = [0,1,3]\n(6,6) -> P = [0,1,2]\n```\nTo see how (4,2) leads to these results, we take all $4$-mers \n```text\nAGTC\nGTCA\nTCAA\nCAAC\nAACG\n```\nFor each $4$-mer, we identify the lexicographically minimal length 2 substring \n```text\nAGTC -> AG\nGTCA -> CA\nTCAA -> AA\nCAAC -> AA\nAACG -> AA\n```\nWe take the positions of all these substrings in the original string and add them to a set $P$ to get $P = [0,3,4]$.  \n\nOn the other hand, if we focus on the pair $(4,1)$, we see that this only leads to $2$ total \"winning\" gene candidates. If we take all $4$-mers and identify the lexicographically minimum length $1$ substring (using A and A' and A* to distinguish the different As), we get \n```text\nAGTC -> A\nGTCA' -> A'\nTCA'A* -> A'\nCA'A*C -> A'\nA'A*CG -> A'\n```\nWhile both A' and A* are lexicographically minimal in the last 3 cases, the leftmost substring takes precedence so A' is counted as the only candidate in all of these cases. This means that $P = [0,4]$.  \n\n\n#### SCORING:\n\n- Inputs 2-4: $N \\leq 100$ \n- Inputs 5-7: $N \\leq 500$ \n- Inputs 8-16: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] The 'Winning' Gene S", "background": "", "description": "****Note: The memory limit for this problem is 512MB, twice the default.****  \n\nAfter years of hosting games and watching Bessie get first place over and over, Farmer John has realized that this can't be accidental. Instead, he concludes that Bessie must have winning coded into her DNA so he sets out to find this \"winning\" gene.  \n\nHe devises a process to identify possible candidates for this \"winning\" gene. He takes Bessie's genome, which is a string $S$ of length $N$ where $1 \\leq N \\leq 3000$. He picks some pair $(K,L)$ where $1 \\leq L \\leq K \\leq N$ representing that the \"winning\" gene candidates will have length $L$ and will be found within a larger $K$ length substring. To identify the gene, he takes all $K$ length substrings from $S$ which we will call a $k$-mer. For a given $k$-mer, he takes all length $L$ substrings, identifies the lexicographically minimal substring as a winning gene candidate (choosing the leftmost such substring if there is a tie),  and then writes down the $0$-indexed position $p_i$ where that substring starts in $S$ to a set $P$.   \n\nSince he hasn't picked $K$ and $L$ yet, he wants to know how many candidates there will be for every pair of $(K,L)$.  \n\nFor each $v$ in $1\\dots N$, help him determine the number of $(K,L)$ pairs with $|P|=v$.", "inputFormat": "$N$ representing the length of the string. $S$ representing the given string. All characters are guaranteed to be uppercase characters where $s_i \\in A-Z$ since bovine genetics are far more advanced than ours.", "outputFormat": "For each $v$ in $1\\dots N$, output the number of $(K,L)$ pairs with $|P|=v$, with each number on a separate line.", "hint": "In this test case, the third line of the output is 5 because we see that there are exactly 5 pairs of $K$ and $L$ that allow for three \"winning\" gene candidates.  These candidates are (where $p_i$ is $0$-indexed):  \n```text\n(4,2) -> P = [0,3,4]\n(5,3) -> P = [0,3,4]\n(6,4) -> P = [0,3,4]\n(6,5) -> P = [0,1,3]\n(6,6) -> P = [0,1,2]\n```\nTo see how (4,2) leads to these results, we take all $4$-mers \n```text\nAGTC\nGTCA\nTCAA\nCAAC\nAACG\n```\nFor each $4$-mer, we identify the lexicographically minimal length 2 substring \n```text\nAGTC -> AG\nGTCA -> CA\nTCAA -> AA\nCAAC -> AA\nAACG -> AA\n```\nWe take the positions of all these substrings in the original string and add them to a set $P$ to get $P = [0,3,4]$.  \n\nOn the other hand, if we focus on the pair $(4,1)$, we see that this only leads to $2$ total \"winning\" gene candidates. If we take all $4$-mers and identify the lexicographically minimum length $1$ substring (using A and A' and A* to distinguish the different As), we get \n```text\nAGTC -> A\nGTCA' -> A'\nTCA'A* -> A'\nCA'A*C -> A'\nA'A*CG -> A'\n```\nWhile both A' and A* are lexicographically minimal in the last 3 cases, the leftmost substring takes precedence so A' is counted as the only candidate in all of these cases. This means that $P = [0,4]$.  \n\n\n#### SCORING:\n\n- Inputs 2-4: $N \\leq 100$ \n- Inputs 5-7: $N \\leq 500$ \n- Inputs 8-16: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] The 'Winning' Gene S", "background": "**注意：本题的内存限制为 512MB，通常限制的 2 倍。**", "description": "在多年举办比赛并看着 Bessie 一次又一次地获得第一名后，Farmer John 意识到这绝非偶然。他得出结论，Bessie 一定将胜利写进了 DNA，于是他开始寻找这种「胜利」基因。\n\n他设计了一个过程来识别这个「胜利」基因的可能候选。他获取了 Bessie 的基因组，为一个长为 $N$ 的字符串 $S$，其中 $1\\le N\\le 3000$。他选择某个数对 $(K,L)$，其中 $1\\le L\\le K\\le N$，表示「胜利」基因候选的长度将为 $L$，并且将在一个较大的 $K$ 长度子串中进行寻找。为了识别这一基因，他从 $S$ 中取出所有 $K$ 长度的子串，我们将称这样的子串为一个 $K$-mer。对于一个给定的 $K$-mer，他取出其所有长度为 $L$ 的子串，将字典序最小的子串识别为胜利基因候选（如果存在并列则选择其中最左边的子串），然后将该字串在 $S$ 中的起始位置 $p_i$（从 $0$ 开始索引）写入一个集合 $P$。\n\n由于他还没有选定 $K$ 和 $L$，他想知道每对 $(K,L)$ 将有多少个候选。\n\n对于 $1\\ldots N$ 中的每一个 $v$，帮助他求出满足 $|P|=v$ 的 $(K,L)$ 对的数量。 ", "inputFormat": "输入的第一行包含 $N$，为字符串的长度。第二行包含 $S$，为给定的字符串。输入保证所有字符均为大写字符，其中 $s_i\\in \\texttt A-\\texttt Z$，因为奶牛遗传学远比我们的高级。", "outputFormat": "对于 $1\\ldots N$ 中的每一个 $v$，输出满足 $|P|=v$ 的 $(K,L)$ 对的数量，每行输出一个数。\n", "hint": "### 样例解释 1\n\n在这个测试用例中，输出的第三行为 $5$ 是因为我们发现恰好有 $5$ 对 $K$ 和 $L$ 存在三个「胜利」基因候选。这些候选为（其中 $p_i$ 从 $0$ 开始索引）：\n\n```plain\n(4,2) -> P = [0,3,4]\n(5,3) -> P = [0,3,4]\n(6,4) -> P = [0,3,4]\n(6,5) -> P = [0,1,3]\n(6,6) -> P = [0,1,2]\n```\n\n为了了解 $(4,2)$ 如何得到这些结果，我们取出所有的 $4$-mer\n\n```plain\nAGTC\nGTCA\nTCAA\nCAAC\nAACG\n```\n\n对于每一个 $4$-mer，我们识别出字典序最小的长度为 $2$ 的子串\n\n```plain\nAGTC -> AG\nGTCA -> CA\nTCAA -> AA\nCAAC -> AA\nAACG -> AA\n```\n\n我们取出所有这些子串在原字符串中的位置并将它们添加到集合 $P$ 中，得到 $P=[0,3,4]$。\n\n另一方面，如果我们关注 $(4,1)$ 对，我们会发现这只会得到总共 $2$ 个「胜利」基因候选。如果我们取出所有的 $4$-mer 并识别字典序最小的长度为 $1$ 的子串（用 A，A' 和 A* 来区分不同的 A），我们得到\n\n```plain\nAGTC -> A\nGTCA' -> A'\nTCA'A* -> A'\nCA'A*C -> A'\nA'A*CG -> A'\n```\n\n尽管 A' 和 A* 在最后 3 种情况下字典序均为最小，但最左边的子串优先，因此仅有 A' 在所有这些情况中被视为候选。这意味着 $P=[0,4]$。\n\n### 测试点性质\n\n- 测试点 $2-4$：$N\\le 100$。\n- 测试点 $5-7$：$N\\le 500$。\n- 测试点 $8-16$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10280", "type": "P", "difficulty": 5, "samples": [["4 1\n0111\n1110", "3"], ["5 2\n11000\n00011", "3"], ["5 4\n11000\n00011", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "USACO", "2024"], "title": "[USACO24OPEN] Cowreography G", "background": "", "description": "The cows have formed a dance team, and Farmer John is their choreographer! The team's latest and greatest dance involves $N$ cows ($2 \\le N \\le 10^6$) standing in a line. Each move in the dance involves two cows, up to $K$ positions apart ($1 \\le K < N$), gracefully jumping and landing in each other's position.  \n\nThere are two types of cows in the line – Guernseys and Holsteins. As such, Farmer John has documented the dance as a sequence of **length-$N$ binary strings**, where a $0$ represents a Guernsey, a $1$ represents a Holstein, and the overall string represents how the cows are arranged in the line.  \n\nUnfortunately, Farmer Nhoj (who choreographs for a rival team) has sabotaged the dance and erased all but the first and last binary strings! With a big competition quickly approaching, Farmer John must waste no time in reconstructing the dance.  \n\nGiven these two binary strings, help Farmer John find the minimum number of moves in the dance!", "inputFormat": "The first line contains $N$ and $K$.  \n\nThe second line contains the first binary string.  \n\nThe third line contains the last binary string.  \n\nIt is guaranteed that both binary strings contain the same number of ones.", "outputFormat": "The minimum number of moves in the dance.", "hint": "##### For Sample 1:\nOne possible dance:  \n```text\n0111 -> 1011 -> 1101 -> 1110\n```\n##### For Sample 2:\nOne possible dance:  \n```text\n11000 -> 01100 -> 00110 -> 00011\n```\n##### For Sample 3:\nOne possible dance:  \n```text\n11000 -> 10010 -> 00011\n```\n\n#### SCORING:\n- Inputs 4-5: $K=1$.\n- Inputs 6-7: Both strings have at most $8$ ones.\n- Inputs 8-15: $N\\le 5000$.\n- Inputs 16-23: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] Cowreography G", "background": "", "description": "The cows have formed a dance team, and Farmer John is their choreographer! The team's latest and greatest dance involves $N$ cows ($2 \\le N \\le 10^6$) standing in a line. Each move in the dance involves two cows, up to $K$ positions apart ($1 \\le K < N$), gracefully jumping and landing in each other's position.  \n\nThere are two types of cows in the line – Guernseys and Holsteins. As such, Farmer John has documented the dance as a sequence of **length-$N$ binary strings**, where a $0$ represents a Guernsey, a $1$ represents a Holstein, and the overall string represents how the cows are arranged in the line.  \n\nUnfortunately, Farmer Nhoj (who choreographs for a rival team) has sabotaged the dance and erased all but the first and last binary strings! With a big competition quickly approaching, Farmer John must waste no time in reconstructing the dance.  \n\nGiven these two binary strings, help Farmer John find the minimum number of moves in the dance!", "inputFormat": "The first line contains $N$ and $K$.  \n\nThe second line contains the first binary string.  \n\nThe third line contains the last binary string.  \n\nIt is guaranteed that both binary strings contain the same number of ones.", "outputFormat": "The minimum number of moves in the dance.", "hint": "##### For Sample 1:\nOne possible dance:  \n```text\n0111 -> 1011 -> 1101 -> 1110\n```\n##### For Sample 2:\nOne possible dance:  \n```text\n11000 -> 01100 -> 00110 -> 00011\n```\n##### For Sample 3:\nOne possible dance:  \n```text\n11000 -> 10010 -> 00011\n```\n\n#### SCORING:\n- Inputs 4-5: $K=1$.\n- Inputs 6-7: Both strings have at most $8$ ones.\n- Inputs 8-15: $N\\le 5000$.\n- Inputs 16-23: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] Cowreography G", "background": "", "description": "奶牛们组了一支舞蹈队，Farmer John 是她们的编舞！舞蹈队最新而最精彩的舞蹈有 $N$ 头奶牛（$2\\le N\\le 10^6$）排成一行。舞蹈中的每次动作都涉及两头奶牛，至多相距 $K$ 个位置（$1\\le K < N$），优雅地跳起并降落在对方的位置上。\n\n队伍中有两种奶牛——更赛牛（Guernsey）和荷斯坦牛（Holstein）。因此，Farmer John 将这一舞蹈记录为一系列**长为 $N$ 的 `01` 字符串**，其中 `0` 代表更赛牛，`1` 代表荷斯坦牛，整个字符串表示奶牛在这一行中是如何排列的。\n\n不幸的是，Farmer Nhoj（对手团队的编舞）蓄意破坏了这一舞蹈，并清除了除第一个和最后一个 `01` 字符串之外的所有内容！由于一场大型比赛即将开始，Farmer John 必须抓紧每一秒重建这一舞蹈。\n\n给定这两个 `01` 字符串，帮助 Farmer John 求出舞蹈中的最小动作数量！ ", "inputFormat": "输入的第一行包含 $N$ 和 $K$。\n\n第二行包含第一个 `01` 字符串。\n\n第三行包含最后一个 `01` 字符串。\n\n输入保证两个 `01` 字符串包含相同数量的 `1`。 ", "outputFormat": "输出舞蹈中的最小动作数量。", "hint": "### 样例解释 1\n\n一个可能的舞蹈：\n\n```plain\n0111 -> 1011 -> 1101 -> 1110\n```\n### 样例解释 2\n\n一个可能的舞蹈：\n\n```plain\n11000 -> 01100 -> 00110 -> 00011\n```\n\n### 样例解释 3\n\n一个可能的舞蹈：\n\n```plain\n11000 -> 10010 -> 00011\n```\n\n### 测试点性质\n\n- 测试点 $4-5$：$K=1$。\n- 测试点 $6-7$：两个字符串各至多包含 $8$ 个 $1$。\n- 测试点 $8-15$：$N\\le 5000$。\n- 测试点 $16-23$：没有额外限制。\n", "locale": "zh-CN"}}}
{"pid": "P10281", "type": "P", "difficulty": 6, "samples": [["2\n3 6 3\n4 7 2", "0\n1"], ["4\n3 6 1\n2 5 1\n4 10 1\n1 4 1", "3\n3\n2\n2"], ["5\n8 10 2\n4 9 2\n3 7 4\n5 7 1\n2 7 1", "0\n3\n1\n3\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2024", "cdq 分治"], "title": "[USACO24OPEN] Grass Segments G", "background": "", "description": "Bessie is planting some grass on the positive real line. She has $N$ ($2\\le N\\le 2\\cdot 10^5$) different cultivars of grass,  and will plant the $i$th cultivar on the interval $[\\ell_i, r_i]$ ($0 < \\ell_i < r_i \\leq 10^9$).  \n\nIn addition, cultivar $i$ grows better when there is some cultivar $j$ ($j\\neq i$) such that  cultivar $j$ and cultivar $i$ overlap with length at least $k_i$ ($0 < k_i \\leq r_i - \\ell_i$). Bessie wants to evaluate all of her cultivars.  For each $i$, compute the number of $j\\neq i$ such that $j$ and $i$ overlap with length at least $k_i$.", "inputFormat": "The first line contains $N$.  \n\nThe next $N$ lines each contain three space-separated integers $\\ell_i$, $r_i$, and $k_i$.", "outputFormat": "The answers for all cultivars on separate lines.", "hint": "##### For Sample 1:\nThe overlaps of the cultivars is $[4,6]$, which has length $2$, which is at least $2$ but not at least $3$.  \n\n#### SCORING:\n- Input 4-5: $N \\leq 5000$.\n- Inputs 6-11: $k$ is the same for all intervals.\n- Inputs 12-20: No additional constraints.  \n\nIn addition, for Inputs 5, 7, ..., 19, $r_i \\leq 2N$ for all $i$.", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] Grass Segments G", "background": "", "description": "Bessie is planting some grass on the positive real line. She has $N$ ($2\\le N\\le 2\\cdot 10^5$) different cultivars of grass,  and will plant the $i$th cultivar on the interval $[\\ell_i, r_i]$ ($0 < \\ell_i < r_i \\leq 10^9$).  \n\nIn addition, cultivar $i$ grows better when there is some cultivar $j$ ($j\\neq i$) such that  cultivar $j$ and cultivar $i$ overlap with length at least $k_i$ ($0 < k_i \\leq r_i - \\ell_i$). Bessie wants to evaluate all of her cultivars.  For each $i$, compute the number of $j\\neq i$ such that $j$ and $i$ overlap with length at least $k_i$.", "inputFormat": "The first line contains $N$.  \n\nThe next $N$ lines each contain three space-separated integers $\\ell_i$, $r_i$, and $k_i$.", "outputFormat": "The answers for all cultivars on separate lines.", "hint": "##### For Sample 1:\nThe overlaps of the cultivars is $[4,6]$, which has length $2$, which is at least $2$ but not at least $3$.  \n\n#### SCORING:\n- Input 4-5: $N \\leq 5000$.\n- Inputs 6-11: $k$ is the same for all intervals.\n- Inputs 12-20: No additional constraints.  \n\nIn addition, for Inputs 5, 7, ..., 19, $r_i \\leq 2N$ for all $i$.", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] Grass Segments G", "background": "", "description": "Bessie 正在数轴的正半轴上种一些草。她有 $N$（$2\\le N\\le 2\\cdot 10^5$）个不同的栽培品种，并将把第 $i$ 个品种种植在区间 $[l_i,r_i]$（$0<l_i<r_i\\le 10^9$）内。\n\n此外，品种 $i$ 会在存在某个品种 $j$（$j\\neq i$）使得品种 $j$ 与品种 $i$ 重叠至少 $k_i$（$0<k_i\\le r_i-l_i$）长度时生长得更好。Bessie 想要评估她所有的品种。对于每一个 $i$，计算 $j\\neq i$ 的数量，使得 $j$ 与 $i$ 重叠至少 $k_i$ 长度。 ", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行每行包含三个空格分隔的整数 $l_i$，$r_i$ 和 $k_i$。 ", "outputFormat": "输出所有品种的答案，每种一行。", "hint": "### 样例解释 1\n\n两品种的重叠部分为 $[4,6]$，长度为 $2$，不小于 $2$ 但并非不小于 $3$。\n\n### 测试点性质\n\n- 测试点 $4-5$：$N\\le 5000$。\n- 测试点 $6-11$：$k$ 对于所有的区间均相同。\n- 测试点 $12-20$：没有额外限制。\n\n此外，对于测试点 $5$，$7$，……，$19$，对于所有 $i$ 有 $r_i\\le 2N$。 ", "locale": "zh-CN"}}}
{"pid": "P10282", "type": "P", "difficulty": 5, "samples": [["2\n1 2\n2 2", "2"], ["3\n1 3 2\n2 2 2", "3"], ["5\n2 5 1 3 2\n2 1 5 2 2", "1"], ["7\n3 5 2 3 4 4 1\n5 3 5 3 3 4 1", "140"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2024", "前缀和", "双指针 two-pointer"], "title": "[USACO24OPEN] Smaller Averages G", "background": "", "description": "Bessie has two arrays of length $N$ ($1 \\le N \\le 500$). The $i$-th element of the first array is $a_i$ ($1 \\le a_i \\le 10^6$) and the $i$-th element of the second array is $b_i$ ($1 \\le b_i \\le 10^6$).   \n\nBessie wants to split both arrays into **non-empty** subarrays such that the following is true. \n1. Every element belongs in exactly 1 subarray. \n2. Both arrays are split into the same number of subarrays. Let the number of subarrays the first and second array are split into be $k$ (i.e. the first array is split into exactly $k$ subarrays and the second array is split into exactly $k$ subarrays). \n3. For all $1 \\le i \\le k$, the average of the $i$-th subarray on the left of the first array is **less than or equal to** the average of the $i$-th subarray on the left of the second array.   \n\nCount how many ways she can split both arrays into non-empty subarrays while satisfying the constraints modulo $10^9+7$. Two ways are considered different if the number of subarrays are different or if some element belongs in a different subarray.", "inputFormat": "The first line contains $N$.  \n\nThe next line contains $a_1,a_2,...,a_N$.  \n\nThe next line contains $b_1,b_2,...,b_N$.", "outputFormat": "Output the number of ways she can split both arrays into non-empty subarrays while satisfying the constraints modulo $10^9+7$.", "hint": "##### For Sample 1:\nThe two valid ways are: \n1. Split the first array into $[1],[2]$ and the second array into $[2],[2]$.\n2. Split the first array into $[1,2]$ and the second array into $[2,2]$.\n\n##### For Sample 2:\nThe three valid ways are: \n1. Split the first array into $[1,3],[2]$ and the second array into $[2,2],[2]$.\n2. Split the first array into $[1,3],[2]$ and the second array into $[2],[2,2]$.\n3. Split the first array into $[1,3,2]$ and the second array into $[2,2,2]$.  \n\n\n##### For Sample 3:\nThe only valid way is to split the first array into $[2],[5,1,3],[2]$ and the  second array into $[2],[1,5],[2,2]$.  \n\n#### SCORING:\n- Inputs 5-6: $N \\le 10$\n- Inputs 7-9: $N \\le 80$ \n- Inputs 10-17: $N \\le 300$ \n- Inputs 18-20: $N \\le 500$", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] Smaller Averages G", "background": "", "description": "Bessie has two arrays of length $N$ ($1 \\le N \\le 500$). The $i$-th element of the first array is $a_i$ ($1 \\le a_i \\le 10^6$) and the $i$-th element of the second array is $b_i$ ($1 \\le b_i \\le 10^6$).   \n\nBessie wants to split both arrays into **non-empty** subarrays such that the following is true. \n1. Every element belongs in exactly 1 subarray. \n2. Both arrays are split into the same number of subarrays. Let the number of subarrays the first and second array are split into be $k$ (i.e. the first array is split into exactly $k$ subarrays and the second array is split into exactly $k$ subarrays). \n3. For all $1 \\le i \\le k$, the average of the $i$-th subarray on the left of the first array is **less than or equal to** the average of the $i$-th subarray on the left of the second array.   \n\nCount how many ways she can split both arrays into non-empty subarrays while satisfying the constraints modulo $10^9+7$. Two ways are considered different if the number of subarrays are different or if some element belongs in a different subarray.", "inputFormat": "The first line contains $N$.  \n\nThe next line contains $a_1,a_2,...,a_N$.  \n\nThe next line contains $b_1,b_2,...,b_N$.", "outputFormat": "Output the number of ways she can split both arrays into non-empty subarrays while satisfying the constraints modulo $10^9+7$.", "hint": "##### For Sample 1:\nThe two valid ways are: \n1. Split the first array into $[1],[2]$ and the second array into $[2],[2]$.\n2. Split the first array into $[1,2]$ and the second array into $[2,2]$.\n\n##### For Sample 2:\nThe three valid ways are: \n1. Split the first array into $[1,3],[2]$ and the second array into $[2,2],[2]$.\n2. Split the first array into $[1,3],[2]$ and the second array into $[2],[2,2]$.\n3. Split the first array into $[1,3,2]$ and the second array into $[2,2,2]$.  \n\n\n##### For Sample 3:\nThe only valid way is to split the first array into $[2],[5,1,3],[2]$ and the  second array into $[2],[1,5],[2,2]$.  \n\n#### SCORING:\n- Inputs 5-6: $N \\le 10$\n- Inputs 7-9: $N \\le 80$ \n- Inputs 10-17: $N \\le 300$ \n- Inputs 18-20: $N \\le 500$", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] Smaller Averages G", "background": "", "description": "Bessie 有两个长度为 $N$ 的数组（$1\\le N\\le 500$）。第一个数组的第 $i$ 个元素为 $a_i$（$1\\le a_i\\le 10^6$），第二个数组的第 $i$ 个元素为 $b_i$（$1\\le b_i\\le 10^6$）。\n\nBessie 希望将两个数组均划分为若干**非空**子数组，使得以下条件成立。\n\n1. 每个元素恰属于 $1$ 个子数组。\n2. 两个数组划分为相同数量的子数组。令第一个和第二个数组被划分为的子数组数量为 $k$（即，第一个数组被划分为恰好 $k$ 个子数组，第二个数组被划分为恰好 $k$ 个子数组）。\n3. 对于所有 $1\\le i\\le k$，第一个数组左数第 $i$ 个子数组的平均值**小于或等于**第二个数组左数第 $i$ 个子数组的平均值。 \n\n计算她有多少种方式在满足限制的情况下将两个数组划分为非空子数组，对 $10^9+7$ 取模。两种划分方式被认为是不同的，如果子数组的数量不同或是某个元素属于不同的子数组。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $a_1,a_2,\\ldots,a_N$。\n\n第三行包含 $b_1,b_2,\\ldots,b_N$。 ", "outputFormat": "输出在满足限制的情况下将两个数组划分为非空子数组的方法数模 $10^9+7$ 的余数。", "hint": "### 样例解释 1\n\n两种合法的方法为：\n\n1. 将第一个数组划分为 $[1],[2]$，第二个数组划分为 $[2],[2]$。\n2. 将第一个数组划分为 $[1,2]$，第二个数组划分为 $[2,2]$。\n\n### 样例解释 2\n\n三种合法的方法为：\n\n1. 将第一个数组划分为 $[1,3],[2]$，第二个数组划分为 $[2,2],[2]$。\n2. 将第一个数组划分为 $[1,3],[2]$，第二个数组划分为 $[2],[2,2]$。\n3. 将第一个数组划分为 $[1,3,2]$，第二个数组划分为 $[2,2,2]$。\n\n### 样例解释 3\n\n唯一合法的方法是将第一个数组划分为 $[2],[5,1,3],[2]$，第二个数组划分为 $[2],[1,5],[2,2]$。\n\n### 测试点性质\n\n- 测试点 $5-6$：$N\\le 10$。\n- 测试点 $7-9$：$N\\le 80$。\n- 测试点 $10-17$：$N\\le 300$。\n- 测试点 $18-20$：$N\\le 500$。", "locale": "zh-CN"}}}
{"pid": "P10283", "type": "P", "difficulty": 6, "samples": [["3\n1\n1\n1", "5"], ["3\n1\n11\n111", "2"], ["3\n1\n1\n11", "4"], ["5\n0\n01\n0011\n010\n01", "6"], ["14\n0\n1\n1\n0\n1\n0\n1\n1\n1\n1\n1\n0\n0\n1", "41"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "USACO", "2024", "字典树 Trie", "启发式合并"], "title": "[USACO24OPEN] Identity Theft P", "background": "", "description": "****Note: The time limit and memory limit for this problem are 3s and 512MB, which are 1.5x and 2x the normal amount, respectively.****  \n\nFarmer John's $N$ ($1 \\leq N \\leq 10^5$) cows each have a Farm ID number in the form of a bitstring (a string consisting of the characters '0' and '1'). Bessie, the eldest cow, has the Farm ID numbers of all the cows memorized, and likes to go around and ask cows their ID numbers.  \n\nWhen a cow is asked their Farm ID number, they will start to say the correct bitstring, but may get confused and stop before finishing it. When Bessie hears the bitstring, if it is not the Farm ID number of any cow on the farm, then she will shrug and walk off. However, if it is the ID number of a different cow than the one she asked, then she will assume that identity theft has occurred and place the farm into lockdown. Note that this can happen even when the cow says their full Farm ID number.  \n\nFarmer John would like to prevent this from happening, and is willing to change the cows' Farm ID numbers by adding some more bits to them. In one second, he can add one bit to the end of the Farm ID number of any cow. Figure out the minimum amount of time it will take for him to prevent a lockdown from ever occurring.", "inputFormat": "The first line contains $N$, the number of cows on Farmer John's farm.  \n\nThen $N$ lines follow. The $k$th line contains a bitstring equal to the Farm ID number of the $k$th cow on Farmer John's farm.  \n\nNo cow's Farm ID number is empty, and the total length of all Farm ID numbers is at most $10^6$.", "outputFormat": "Output the minimum number of seconds Farmer John needs to spend to ensure that a lockdown will never occur.", "hint": "##### For Sample 1:\nThis sample satisfies the constraints for the first subtask.  \n\nWe can make a lockdown impossible in 5 seconds by adding '0' to the first Farm ID number, '10' to the second Farm ID number, and '11' to the third Farm ID number, making the Farm ID numbers '10', '110', and '111'.  \n\nYou can prove that this cannot be done in 4 or fewer seconds. For example, if you leave the Farm ID numbers as they are, then all 3 cows have the same Farm ID number '1', so when Bessie hears it it will always be the Farm ID number of another cow.  \n\nAs another example, if you spend just 2 seconds to add '0' to the second Farm ID number and '1' to the third Farm ID number, then the Farm ID numbers are '1', '10', and '11', and so the second and third cows, when saying their Farm ID numbers, might stop in the middle and just say '1', which would be the Farm ID number of the first cow.  \n\n##### For Sample 2:\nWe can make a lockdown impossible in 2 seconds by adding '0' to the first two Farm ID numbers, making the Farm ID numbers '10', '110', and '111' like before. You can prove that this cannot be done in 1 second.  \n\n##### For Sample 3:\nWe can make a lockdown impossible in 4 seconds by adding '00' to the first Farm ID number and '01' to the second Farm ID number. You can prove that this cannot be done in 3 or fewer seconds.  \n##### For Sample 5:\nThis sample satisfies the constraints for the first subtask. \n#### SCORING:\n-  Inputs 6-7: All Farm ID numbers have length exactly $1$.\n-  Inputs 8-15: $N\\le 10^2$ and the total length of the Farm ID numbers does not exceed $10^3$.\n- Inputs 16-25: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] Identity Theft P", "background": "", "description": "****Note: The time limit and memory limit for this problem are 3s and 512MB, which are 1.5x and 2x the normal amount, respectively.****  \n\nFarmer John's $N$ ($1 \\leq N \\leq 10^5$) cows each have a Farm ID number in the form of a bitstring (a string consisting of the characters '0' and '1'). Bessie, the eldest cow, has the Farm ID numbers of all the cows memorized, and likes to go around and ask cows their ID numbers.  \n\nWhen a cow is asked their Farm ID number, they will start to say the correct bitstring, but may get confused and stop before finishing it. When Bessie hears the bitstring, if it is not the Farm ID number of any cow on the farm, then she will shrug and walk off. However, if it is the ID number of a different cow than the one she asked, then she will assume that identity theft has occurred and place the farm into lockdown. Note that this can happen even when the cow says their full Farm ID number.  \n\nFarmer John would like to prevent this from happening, and is willing to change the cows' Farm ID numbers by adding some more bits to them. In one second, he can add one bit to the end of the Farm ID number of any cow. Figure out the minimum amount of time it will take for him to prevent a lockdown from ever occurring.", "inputFormat": "The first line contains $N$, the number of cows on Farmer John's farm.  \n\nThen $N$ lines follow. The $k$th line contains a bitstring equal to the Farm ID number of the $k$th cow on Farmer John's farm.  \n\nNo cow's Farm ID number is empty, and the total length of all Farm ID numbers is at most $10^6$.", "outputFormat": "Output the minimum number of seconds Farmer John needs to spend to ensure that a lockdown will never occur.", "hint": "##### For Sample 1:\nThis sample satisfies the constraints for the first subtask.  \n\nWe can make a lockdown impossible in 5 seconds by adding '0' to the first Farm ID number, '10' to the second Farm ID number, and '11' to the third Farm ID number, making the Farm ID numbers '10', '110', and '111'.  \n\nYou can prove that this cannot be done in 4 or fewer seconds. For example, if you leave the Farm ID numbers as they are, then all 3 cows have the same Farm ID number '1', so when Bessie hears it it will always be the Farm ID number of another cow.  \n\nAs another example, if you spend just 2 seconds to add '0' to the second Farm ID number and '1' to the third Farm ID number, then the Farm ID numbers are '1', '10', and '11', and so the second and third cows, when saying their Farm ID numbers, might stop in the middle and just say '1', which would be the Farm ID number of the first cow.  \n\n##### For Sample 2:\nWe can make a lockdown impossible in 2 seconds by adding '0' to the first two Farm ID numbers, making the Farm ID numbers '10', '110', and '111' like before. You can prove that this cannot be done in 1 second.  \n\n##### For Sample 3:\nWe can make a lockdown impossible in 4 seconds by adding '00' to the first Farm ID number and '01' to the second Farm ID number. You can prove that this cannot be done in 3 or fewer seconds.  \n##### For Sample 5:\nThis sample satisfies the constraints for the first subtask. \n#### SCORING:\n-  Inputs 6-7: All Farm ID numbers have length exactly $1$.\n-  Inputs 8-15: $N\\le 10^2$ and the total length of the Farm ID numbers does not exceed $10^3$.\n- Inputs 16-25: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] Identity Theft P", "background": "**注意：本题的时间限制和内存限制为 3 秒 和 512MB，分别为通常限制的 1.5 倍和 2 倍。**", "description": "Farmer John 的 $N$（$1\\le N\\le 10^5$）头奶牛每头都有一个二进制字符串（由字符 `0` 和 `1` 组成的字符串）形式的农场证号。Bessie，最年长的奶牛，记住了所有奶牛的农场证号，还喜欢到处询问奶牛她们的农场证号。\n\n当一头奶牛被询问她的农场证号时，她们会开始报正确的二进制字符串，但有可能会感到困惑并在报完之前停下来。当 Bessie 听到该二进制字符串时，如果它不等于农场上任何一头奶牛的农场证号，她就会耸耸肩走开。然而，如果它等于不同于她所询问的奶牛的另一头奶牛的农场证号，那么她就会认为发生了身份盗用并封锁整个农场。注意，这种情况即使当奶牛报出完整的农场证号时也可能发生。\n\nFarmer John 希望防止这种情况发生，并愿意以添加更多二进制位的方式改变奶牛的农场证号。他可以在一秒钟内在任意一头牛的农场证号末尾添加一个二进制位。求出他所需要的最小时间以防止封锁发生。 ", "inputFormat": "输入的第一行包含 $N$，为 Farmer John 的农场上的奶牛数量。\n\n以下 $N$ 行，第 $k$ 行包含表示 Farmer John 的农场上第 $k$ 头奶牛的农场证号的二进制字符串。\n\n所有奶牛的农场证号均不为空，且所有农场证号的总长度不超过 $10^6$。 ", "outputFormat": "输出 Farmer John 需要花费的最小秒数以确保封锁不会发生。 ", "hint": "### 样例解释 1\n\n这一样例满足第一个子任务的性质。\n\n我们可以花费 5 秒使得封锁不可能发生，通过对第一个农场证号添加 `0`，对第二个农场证号添加 `10`，对第三个农场证号添加 `11`，使农场证号变为 `10`，`110` 和 `111`。\n\n你可以证明这不可能在 4 秒或更少的时间内完成。例如，如果你保持所有农场证号不变，则所有 3 头奶牛都具有相同的农场证号 `1`，因此当 Bessie 听到它时，它将始终等于另一头奶牛的农场证号。\n\n作为另一个例子，如果你仅花费 2 秒对第二个农场证号添加 `0`，对第三个农场证号添加 `1`，则农场证号变为 `1`，`10` 和 `11`，因此第二头和第三头奶牛在报她们的农场证号时，可能会停在中间只报出 `1`，而这将等于第一头奶牛的农场证号。\n\n### 样例解释 2\n\n我们可以在 2 秒内使得封锁不可能发生，通过对前两个农场证号添加 `0`，像之前一样使农场证号变为 `10`，`110` 和 `111`。你可以证明这不可能在 1 秒内完成。\n\n### 样例解释 3\n\n我们可以在 4 秒内使得封锁不可能发生，通过对第一个农场证号添加 `00`，对第二个农场证号添加 `01`。你可以证明这不可能在 3 秒或更少的时间内完成。\n\n### 样例解释 5\n\n这一样例满足第一个子任务的性质。\n\n### 测试点性质\n\n- 测试点 $6-7$：所有农场证号的长度均恰好为 $1$。\n- 测试点 $8-15$：$N\\le 10^2$，且所有农场证号的总长度不超过 $10^3$。\n- 测试点 $16-25$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10284", "type": "P", "difficulty": 6, "samples": [["2\n3 1\n15\n1 1 -2\n1 1 -1\n1 1 0\n1 1 1\n1 1 2\n1 2 -2\n1 2 -1\n1 2 0\n1 2 1\n1 2 2\n2 2 -2\n2 2 -1\n2 2 0\n2 2 1\n2 2 2", "1\n2\n3\n-2\n-1\n0\n1\n2\n-1\n0\n-1\n0\n1\n0\n1"], ["5\n4 4 3 1 1\n7\n1 1 20\n1 2 20\n1 5 20\n1 1 0\n1 5 0\n1 4 0\n3 5 2", "16\n12\n7\n4\n1\n2\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "平衡树", "2024", "均摊分析"], "title": "[USACO24OPEN] Splitting Haybales P", "background": "", "description": "Farmer John wants to fairly split haybales between his two favorite cows Bessie and Elsie. He has $N$ ( $1\\le N\\le 2\\cdot 10^5$) haybales sorted in non-increasing order,  where the $i$-th haybale has $a_i$ units of hay ($2\\cdot 10^5\\ge a_1\\ge a_2 \\ge \\dots \\ge a_N \\ge 1$).  \n\nFarmer John is considering splitting a contiguous range of haybales $a_l, \\dots, a_r$ between Bessie and Elsie. He has decided to process the haybales in order from $l$ to $r$, and when processing the $i$-th haybale he will give it to the cow who currently has less hay (if it is a tie, he will give it to Bessie).  \n\nYou are given $Q$ ($1\\le Q\\le 2\\cdot 10^5$) queries, each with three integers $l,r,x$ ($1\\le l\\le r\\le N$, $|x|\\le 10^9$). For each query, output how many more units of hay Bessie will have than Elsie after processing haybales $l$ to $r$, if Bessie starts with $x$ more units than Elsie. Note that this value is negative if Elsie ends up with more haybales than Bessie.", "inputFormat": "First line contains $N$.  \n\nSecond line contains $a_1\\dots a_N$.  \n\nThird line contains $Q$.  \n\nNext $Q$ lines contain $l, r, x$.", "outputFormat": "Output $Q$ lines, containing the answer for each query.", "hint": "##### For Sample 1:\nFor the 1st query, Elsie starts with $2$ more hay than Bessie. Then, after processing haybale $1$, Bessie will receive $3$ hay, and Bessie will have $1$ more hay than Elsie.   \n\nFor the 3rd query, Elsie and Bessie start with the same number of hay. After processing haybale $1$, Bessie will receive $3$ hay, and Bessie will have $3$ more hay than Elsie.  \n\nFor the 9th query, Bessie starts with $1$ more hay than Elsie, then after processing the 1st haybale, has $2$ less hay than Elsie, and after processing the 2nd haybale, has $1$ less hay than Elsie. \n##### For Sample 2:\nIn the 5th query, there are $5$ haybales to process. Bessie receives $4$ hay, then Elsie receives $4$ hay, then Bessie receives $3$ hay, then Elsie receives $1$ hay, then Elsie receives $1$ hay.  \n\n#### SCORING:\n- Input 3: $Q\\le 100$.\n- Inputs 4-6: At most $100$ distinct $a_i$.\n- Inputs 7-22: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] Splitting Haybales P", "background": "", "description": "Farmer John wants to fairly split haybales between his two favorite cows Bessie and Elsie. He has $N$ ( $1\\le N\\le 2\\cdot 10^5$) haybales sorted in non-increasing order,  where the $i$-th haybale has $a_i$ units of hay ($2\\cdot 10^5\\ge a_1\\ge a_2 \\ge \\dots \\ge a_N \\ge 1$).  \n\nFarmer John is considering splitting a contiguous range of haybales $a_l, \\dots, a_r$ between Bessie and Elsie. He has decided to process the haybales in order from $l$ to $r$, and when processing the $i$-th haybale he will give it to the cow who currently has less hay (if it is a tie, he will give it to Bessie).  \n\nYou are given $Q$ ($1\\le Q\\le 2\\cdot 10^5$) queries, each with three integers $l,r,x$ ($1\\le l\\le r\\le N$, $|x|\\le 10^9$). For each query, output how many more units of hay Bessie will have than Elsie after processing haybales $l$ to $r$, if Bessie starts with $x$ more units than Elsie. Note that this value is negative if Elsie ends up with more haybales than Bessie.", "inputFormat": "First line contains $N$.  \n\nSecond line contains $a_1\\dots a_N$.  \n\nThird line contains $Q$.  \n\nNext $Q$ lines contain $l, r, x$.", "outputFormat": "Output $Q$ lines, containing the answer for each query.", "hint": "##### For Sample 1:\nFor the 1st query, Elsie starts with $2$ more hay than Bessie. Then, after processing haybale $1$, Bessie will receive $3$ hay, and Bessie will have $1$ more hay than Elsie.   \n\nFor the 3rd query, Elsie and Bessie start with the same number of hay. After processing haybale $1$, Bessie will receive $3$ hay, and Bessie will have $3$ more hay than Elsie.  \n\nFor the 9th query, Bessie starts with $1$ more hay than Elsie, then after processing the 1st haybale, has $2$ less hay than Elsie, and after processing the 2nd haybale, has $1$ less hay than Elsie. \n##### For Sample 2:\nIn the 5th query, there are $5$ haybales to process. Bessie receives $4$ hay, then Elsie receives $4$ hay, then Bessie receives $3$ hay, then Elsie receives $1$ hay, then Elsie receives $1$ hay.  \n\n#### SCORING:\n- Input 3: $Q\\le 100$.\n- Inputs 4-6: At most $100$ distinct $a_i$.\n- Inputs 7-22: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] Splitting Haybales P", "background": "", "description": "Farmer John 想要将干草堆公平地分配给他最喜欢的两头奶牛 Bessie 和 Elsie。他有 $N$（$1\\le N\\le 2\\cdot 10^5$）个降序排序的干草堆，其中第 $i$ 个干草堆有 $a_i$ 单位干草（$2\\cdot 10^5\\ge a_1\\ge a_2\\ge \\cdots \\ge a_N\\ge 1$）。\n\nFarmer John 正在考虑将一个连续区间的干草堆 $a_l,\\ldots,a_r$ 分配给 Bessie 和 Elsie。他决定按从 $l$ 到 $r$ 的顺序处理干草堆，当处理第 $i$ 个干草堆时他会将其交给当前干草较少的奶牛（如果并列，他会将其交给 Bessie）。\n\n给定 $Q$（$1\\le Q\\le 2\\cdot 10^5$）个询问，每个询问包含三个整数 $l,r,x$（$1\\le l\\le r\\le N$，$|x|\\le 10^9$）。对于每个询问，输出如果 Bessie 初始时比 Elsie 多 $x$ 单位干草，在处理干草堆 $l$ 到 $r$ 后 Bessie 将比 Elsie 多多少单位的干草。注意如果 Elsie 最终获得的干草多于 Bessie 则该值为负。", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $a_1\\ldots a_N$。\n\n第三行包含 $Q$。\n\n以下 $Q$ 行包含 $l,r,x$。 ", "outputFormat": "输出 $Q$ 行，包含每个询问的答案。", "hint": "### 样例解释 1\n\n对于第 1 个询问，Elsie 初始时比 Bessie 多 2 单位干草。然后，在处理干草堆 1 后，Bessie 将收到 3 单位干草，从而 Bessie 将比 Elsie 多 1 单位干草。\n\n对于第 3 个询问，Elsie 和 Bessie 初始时有相同的干草数量。在处理干草堆 1 后，Bessie 将收到 3 单位干草，从而 Bessie 将比 Elsie 多 3 \n单位干草。\n\n对于第 9 个询问，Bessie 初始时比 Elsie 多 1 单位干草，然后在处理第 1 个干草堆后，比 Elsie 少 2 单位干草，处理第 2 个干草堆后，比 Elsie 少 1 单位干草。\n\n### 样例解释 2\n\n对于第 5 个询问，有 5 个干草堆需要处理。Bessie 收到 4 单位干草，然后 Elsie 收到 4 单位干草，然后 Bessie 收到 3 单位干草，然后 Elsie 收到 1 单位干草，然后 Elsie 收到 1 单位干草。\n\n### 测试点性质\n\n- 测试点 $3$：$Q\\le 100$。\n- 测试点 $4-6$：至多存在 $100$ 个不同的 $a_i$。\n- 测试点 $7-22$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10285", "type": "P", "difficulty": 6, "samples": [["10 2 1 2\n6", "22"], ["10 2 1 2\n7", "4"], ["32 4 5 2\n0 23 12 5 11", "48"], ["24 3 1 2\n16", "48"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "USACO", "2024", "状压 DP"], "title": "[USACO24OPEN] Activating Robots P", "background": "", "description": "You and a single robot are initially at point $0$ on a circle with perimeter $L$ ($1 \\le L \\le 10^9$). You can move either counterclockwise or clockwise along the circle at $1$ unit per second. All movement in this problem is continuous.  \n\nYour goal is to place exactly $R-1$ robots such that at the end, every two consecutive robots are spaced $L/R$ away from each other ($2\\le R\\le 20$, $R$ divides $L$). There are $N$ ($1\\le N\\le 10^5$) activation points, the $i$th of which is located $a_i$ distance counterclockwise from $0$ ($0\\le a_i<L$). If you are currently at an activation point, you can instantaneously place a robot at that point. All robots (including the original) move counterclockwise at a rate of $1$ unit per $K$ seconds ($1\\leq K\\leq 10^6$).  \n\nCompute the minimum time required to achieve the goal.", "inputFormat": "The first line contains $L$, $R$, $N$, and $K$.  \n\nThe next line contains $N$ space-separated integers $a_1,a_2,\\dots,a_N$.", "outputFormat": "The minimum time required to achieve the goal.", "hint": "##### For Sample 1:\nWe can reach the activation point at $6$ in $4$ seconds by going clockwise. At this time, the initial robot will be located at $2$. Wait an additional $18$ seconds until the initial robot is located at $1$. Now we can place a robot to immediately win.  \n\n##### For Sample 2:\nWe can reach the activation point at $7$ in $3$ seconds by going clockwise. At this time, the initial robot will be located at $1.5$. Wait an additional second until the initial robot is located at $2$. Now we can place a robot to immediately win.  \n\n\n#### SCORING:\n- Inputs 5-6: $R=2$.\n- Inputs 7-12: $R\\le 10, N\\le 80$.\n- Inputs 13-20: $R\\le 16$.\n- Inputs 21-24: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO24OPEN] Activating Robots P", "background": "", "description": "You and a single robot are initially at point $0$ on a circle with perimeter $L$ ($1 \\le L \\le 10^9$). You can move either counterclockwise or clockwise along the circle at $1$ unit per second. All movement in this problem is continuous.  \n\nYour goal is to place exactly $R-1$ robots such that at the end, every two consecutive robots are spaced $L/R$ away from each other ($2\\le R\\le 20$, $R$ divides $L$). There are $N$ ($1\\le N\\le 10^5$) activation points, the $i$th of which is located $a_i$ distance counterclockwise from $0$ ($0\\le a_i<L$). If you are currently at an activation point, you can instantaneously place a robot at that point. All robots (including the original) move counterclockwise at a rate of $1$ unit per $K$ seconds ($1\\leq K\\leq 10^6$).  \n\nCompute the minimum time required to achieve the goal.", "inputFormat": "The first line contains $L$, $R$, $N$, and $K$.  \n\nThe next line contains $N$ space-separated integers $a_1,a_2,\\dots,a_N$.", "outputFormat": "The minimum time required to achieve the goal.", "hint": "##### For Sample 1:\nWe can reach the activation point at $6$ in $4$ seconds by going clockwise. At this time, the initial robot will be located at $2$. Wait an additional $18$ seconds until the initial robot is located at $1$. Now we can place a robot to immediately win.  \n\n##### For Sample 2:\nWe can reach the activation point at $7$ in $3$ seconds by going clockwise. At this time, the initial robot will be located at $1.5$. Wait an additional second until the initial robot is located at $2$. Now we can place a robot to immediately win.  \n\n\n#### SCORING:\n- Inputs 5-6: $R=2$.\n- Inputs 7-12: $R\\le 10, N\\le 80$.\n- Inputs 13-20: $R\\le 16$.\n- Inputs 21-24: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO24OPEN] Activating Robots P", "background": "", "description": "你和一个机器人初始时位于周长为 $L$（$1\\le L\\le 10^9$）的圆上的点 $0$ 处。你可以以每秒 $1$ \n单位的速度沿圆周顺时针或逆时针移动。本题中的所有移动都是连续的。\n\n你的目标是放置恰好 $R-1$ 个机器人，使得最终每两个相邻的机器人彼此相距 $L/R$（$2\\le R\\le 20$，$R$ 整除 $L$）。有 $N$（$1\\le N\\le 10^5$）个激活点，其中第 $i$ 个激活点位于距点 $0$ 逆时针方向 $a_i$ 距离处（$0\\le a_i<L$）处。如果你当前位于一个激活点，你可以立刻在该点放置一个机器人。所有机器人（包括初始的）均以每 $K$ 秒 $1$ 单位的速度逆时针移动（$1\\le K\\le 10^6$）。\n\n计算达到目标所需要的最小时间。 ", "inputFormat": "输入的第一行包含 $L$，$R$，$N$ 和 $K$。\n\n第二行包含 $N$ 个空格分隔的整数 $a_1,a_2,\\ldots,a_N$。 ", "outputFormat": " 输出达到目标所需要的最小时间。", "hint": "### 样例解释 1\n\n我们可以通过顺时针移动在 $4$ 秒内到达点 $6$ 的激活点。此时，初始的机器人将位于点 $2$。再等待 $18$ 秒直到初始机器人位于点 $1$。现在我们可以放置一个机器人以立即获胜。 \n\n### 样例解释 2\n\n我们可以通过顺时针移动在 $3$ 秒内到达点 $7$ 的激活点。此时，初始的机器人将位于点 $1.5$。再等待一秒直到初始机器人位于点 $2$。现在我们可以放置一个机器人以立即获胜。 \n\n### 测试点性质\n\n- 测试点 $5-6$：$R=2$。\n- 测试点 $7-12$：$R\\le 10,N\\le 80$。\n- 测试点 $13-20$：$R\\le 16$。\n- 测试点 $21-24$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P10286", "type": "P", "difficulty": 7, "samples": [["2 1\n1 1 1", "15"], ["3 2\n1 1 1 1", "40"], ["12 1\n1 1 4 5 1 4 1 9 1 9 8 1 0", "721168027"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "二分图", "生成函数", "快速数论变换 NTT"], "title": "「RiOI-03」A Journey to the Moonlight（加强版）", "background": "本题相较于 [P9919](/problem/P9919) 扩大了数据范围。", "description": "对于一个右部点为 $m$ 个的二分图 $G$，定义它的权值 $w(G)$ 如下：\n\n- 选择一种匹配方案，标记第一个已匹配的右部点。如果不存在这样的点，那么标记第一个未匹配的右部点。\n- 每次随机选择一个 $1,2,\\cdots,m$ 的排列，当未匹配的右部点与被标记的点 **按标号顺序作为一个子段出现在排列中时** 停止操作。\n- $w(G)$ 为在所有匹配方案中操作次数期望的 **最小值**。\n\n将这个二分图 $G$ 定义为 **$k$ 合法** 的，当且仅当：\n\n- 所有左部点的度数在 $k\\sim \\color{red}2$ 之间。\n- 没有任意两个左部点，与其相邻的点组成的集合相同。\n\n定义 $f(k,x)$ 为所有右部点 $x$ 个，左部点不进行区分的 $k$ 合法二分图 $G$ 的 $w(G)$ 之和。\n\n给定 $n,k,a_{0\\sim n}$，求 $\\sum\\limits^n_ia_if(k,i) \\bmod998244353$。", "inputFormat": "一行两个正整数，分别表示 $n,k$。\n\n第二行 $n+1$ 个非负整数，分别表示 $a_{0\\sim n}$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "约定一个左部点连接了编号为 $x,y$ 的右部点表示为 $(x,y)$。\n\n#### 【样例 1 解释】\n\n对于 $n=0,1$，答案显然为 $1,2$。\n\n对于 $n=2$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1),(2),(1,2)$\n\n$\\{(1),(2)\\},\\{(1,2),(2)\\},\\{(1,2),(1)\\},\\{(1,2),(1),(2)\\}$\n\n期望相同的二分图被分为一组。答案为 $\\dfrac21+\\dfrac21\\times3+\\dfrac22\\times4=12$，输出 $1\\times1+1\\times2+1\\times12=15$。\n\n#### 【样例 2 解释】\n\n对于 $n=0,1,2$，答案为 $1,1,4$。\n\n对于 $n=3$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1,2),(1,3),(2,3)$\n\n$\\{(1,2),(1,3)\\},\\{(1,2),(2,3)\\},\\{(1,3),(2,3)\\}$\n\n$\\{(1,2),(2,3),(1,3)\\}$\n\n答案为 $\\dfrac61+\\dfrac61\\times3+\\dfrac62\\times3+\\dfrac66=34$。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$0\\le n\\le10^5$，$1\\le k\\le2$，$0\\le a_i<998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」A Journey to the Moonlight（加强版）", "background": "本题相较于 [P9919](/problem/P9919) 扩大了数据范围。", "description": "对于一个右部点为 $m$ 个的二分图 $G$，定义它的权值 $w(G)$ 如下：\n\n- 选择一种匹配方案，标记第一个已匹配的右部点。如果不存在这样的点，那么标记第一个未匹配的右部点。\n- 每次随机选择一个 $1,2,\\cdots,m$ 的排列，当未匹配的右部点与被标记的点 **按标号顺序作为一个子段出现在排列中时** 停止操作。\n- $w(G)$ 为在所有匹配方案中操作次数期望的 **最小值**。\n\n将这个二分图 $G$ 定义为 **$k$ 合法** 的，当且仅当：\n\n- 所有左部点的度数在 $k\\sim \\color{red}2$ 之间。\n- 没有任意两个左部点，与其相邻的点组成的集合相同。\n\n定义 $f(k,x)$ 为所有右部点 $x$ 个，左部点不进行区分的 $k$ 合法二分图 $G$ 的 $w(G)$ 之和。\n\n给定 $n,k,a_{0\\sim n}$，求 $\\sum\\limits^n_ia_if(k,i) \\bmod998244353$。", "inputFormat": "一行两个正整数，分别表示 $n,k$。\n\n第二行 $n+1$ 个非负整数，分别表示 $a_{0\\sim n}$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "约定一个左部点连接了编号为 $x,y$ 的右部点表示为 $(x,y)$。\n\n#### 【样例 1 解释】\n\n对于 $n=0,1$，答案显然为 $1,2$。\n\n对于 $n=2$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1),(2),(1,2)$\n\n$\\{(1),(2)\\},\\{(1,2),(2)\\},\\{(1,2),(1)\\},\\{(1,2),(1),(2)\\}$\n\n期望相同的二分图被分为一组。答案为 $\\dfrac21+\\dfrac21\\times3+\\dfrac22\\times4=12$，输出 $1\\times1+1\\times2+1\\times12=15$。\n\n#### 【样例 2 解释】\n\n对于 $n=0,1,2$，答案为 $1,1,4$。\n\n对于 $n=3$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1,2),(1,3),(2,3)$\n\n$\\{(1,2),(1,3)\\},\\{(1,2),(2,3)\\},\\{(1,3),(2,3)\\}$\n\n$\\{(1,2),(2,3),(1,3)\\}$\n\n答案为 $\\dfrac61+\\dfrac61\\times3+\\dfrac62\\times3+\\dfrac66=34$。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$0\\le n\\le10^5$，$1\\le k\\le2$，$0\\le a_i<998244353$。", "locale": "zh-CN"}}}
{"pid": "P10287", "type": "P", "difficulty": 3, "samples": [["5 4\n2 10 6 3 1\n5 2\n2 3\n3 1\n1 4", "3"], ["6 11\n1 1 2 1 1 2\n3 2\n3 1\n5 3\n4 2\n2 6\n3 6\n1 6\n4 6\n1 2\n5 1\n5 4", "4"], ["6 11\n5 9 10 5 1 6\n5 4\n5 2\n4 2\n3 1\n5 3\n6 1\n4 1\n4 3\n5 1\n2 3\n2 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "拓扑排序", "GESP"], "title": "[GESP样题 七级] 最长不下降子序列", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1107>", "description": "小杨有个包含 $n$ 个节点 $m$ 条边的有向无环图，其中节点的编号为 $1$ 到 $n$。\n\n对于编号为 $i$ 的节点，其权值为 $A_i$。对于图中的一条路径，根据路径上的经过节点的先后顺序可以得到一个节点权值的序列，小杨想知道图中所有可能序列中最长不下降子序列的最大长度。\n\n注：给定一个序列 $S$，其最长不下降子序列 $S'$ 是原序列中的如下子序列：整个子序列 $S'$ 单调不降，并且是序列中最长的单调不降子序列。例如，给定序列 $S = [11,12,13,9,8,17,19]$，其最长不下降子序列为 $S'=[11,12,13,17,19]$，长度为 $5$。", "inputFormat": "第一行包含两个正整数 $n,m$，表示节点数和边数。 \n \n第二行包含 $n$ 个正整数 $A_1, A_2, \\dots A_n$，表示节点 $1$ 到 $n$ 的点权。  \n\n之后 $m$ 行每行包含两个正整数 $u_i, v_i$，表示第 $i$ 条边连接节点 $u_i$ 和 $v_i$，方向为从 $u_i$ 到 $v_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n| 子任务 | 分值 | $n\\le$ | $A_i \\le$ | 特殊约定 |\n| :-: | :-: | :-: | :-: | :-:|\n| $1$ | $30$ | $10^3$ | $10$ | 输入的图是一条链 |\n| $2$ | $30$ | $10^5$ | $2$ | 无 |\n| $3$ | $40$ | $10^5$ | $10$ | 无|\n\n对全部的测试数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 10^5$，$1 \\leq A_i \\leq 10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP样题 七级] 最长不下降子序列", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1107>", "description": "小杨有个包含 $n$ 个节点 $m$ 条边的有向无环图，其中节点的编号为 $1$ 到 $n$。\n\n对于编号为 $i$ 的节点，其权值为 $A_i$。对于图中的一条路径，根据路径上的经过节点的先后顺序可以得到一个节点权值的序列，小杨想知道图中所有可能序列中最长不下降子序列的最大长度。\n\n注：给定一个序列 $S$，其最长不下降子序列 $S'$ 是原序列中的如下子序列：整个子序列 $S'$ 单调不降，并且是序列中最长的单调不降子序列。例如，给定序列 $S = [11,12,13,9,8,17,19]$，其最长不下降子序列为 $S'=[11,12,13,17,19]$，长度为 $5$。", "inputFormat": "第一行包含两个正整数 $n,m$，表示节点数和边数。 \n \n第二行包含 $n$ 个正整数 $A_1, A_2, \\dots A_n$，表示节点 $1$ 到 $n$ 的点权。  \n\n之后 $m$ 行每行包含两个正整数 $u_i, v_i$，表示第 $i$ 条边连接节点 $u_i$ 和 $v_i$，方向为从 $u_i$ 到 $v_i$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n| 子任务 | 分值 | $n\\le$ | $A_i \\le$ | 特殊约定 |\n| :-: | :-: | :-: | :-: | :-:|\n| $1$ | $30$ | $10^3$ | $10$ | 输入的图是一条链 |\n| $2$ | $30$ | $10^5$ | $2$ | 无 |\n| $3$ | $40$ | $10^5$ | $10$ | 无|\n\n对全部的测试数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 10^5$，$1 \\leq A_i \\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P10288", "type": "P", "difficulty": 3, "samples": [["2\n5\n7 4 6 1 1\n2\n1 2 3\n1 5 1\n5\n1 2 3 4 5\n2\n5 5 3\n1 4 3", "0\n2\n0\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["二分", "离散化", "GESP"], "title": "[GESP样题 八级] 区间", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1108>", "description": "小杨有一个长度为 $n$ 的正整数序列 $A$。\n\n小杨有 $q$ 次询问。第 $i$ 次（$1\\le i\\le q$）询问时，小杨会给出 $l_i,r_i,x_i$，请你求出 $x_i$ 在 $A_{l_i}, A_{l_i+1}, \\dots A_{r_i}$ 中出现的次数。", "inputFormat": "第一行包含一个正整数 $T$，表示数据组数。\n\n对于每组数据：第一行包含一个正整数 $n$，表示序列 $A$ 的长度。  \n第二行包含 $n$ 个正整数 $A_1,A_2,\\dots,A_n$，表示序列 $A$。  \n第三行包含一个正整数 $q$，表示询问次数。接下来 $q$ 行，每行三个正整数 $l_i,r_i,x_i$，表示一组询问。", "outputFormat": "对于每组数据，输出 $q$ 行。第 $i$ 行（$1\\le i\\le q$）输出一个非负整数，表示第 $i$ 次询问的答案。", "hint": "|子任务|分值|$n$|$q$|$\\max A_i$|\n|-|-|-|-|-|\n|$1$|$30$|$\\le 100$|$\\le 100$|$\\le 10$|\n|$2$|$30$|$\\le 10^5$|$\\le 10^5$|$\\le 10^5$|\n|$3$|$40$|$\\le 10^5$|$\\le 10^5$|$\\le 10^9$|\n\n对于全部数据，保证有 $1 \\leq T\\le 5$，$1 \\le n,q\\le 10^5$，$1 \\le A_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP样题 八级] 区间", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1108>", "description": "小杨有一个长度为 $n$ 的正整数序列 $A$。\n\n小杨有 $q$ 次询问。第 $i$ 次（$1\\le i\\le q$）询问时，小杨会给出 $l_i,r_i,x_i$，请你求出 $x_i$ 在 $A_{l_i}, A_{l_i+1}, \\dots A_{r_i}$ 中出现的次数。", "inputFormat": "第一行包含一个正整数 $T$，表示数据组数。\n\n对于每组数据：第一行包含一个正整数 $n$，表示序列 $A$ 的长度。  \n第二行包含 $n$ 个正整数 $A_1,A_2,\\dots,A_n$，表示序列 $A$。  \n第三行包含一个正整数 $q$，表示询问次数。接下来 $q$ 行，每行三个正整数 $l_i,r_i,x_i$，表示一组询问。", "outputFormat": "对于每组数据，输出 $q$ 行。第 $i$ 行（$1\\le i\\le q$）输出一个非负整数，表示第 $i$ 次询问的答案。", "hint": "|子任务|分值|$n$|$q$|$\\max A_i$|\n|-|-|-|-|-|\n|$1$|$30$|$\\le 100$|$\\le 100$|$\\le 10$|\n|$2$|$30$|$\\le 10^5$|$\\le 10^5$|$\\le 10^5$|\n|$3$|$40$|$\\le 10^5$|$\\le 10^5$|$\\le 10^9$|\n\n对于全部数据，保证有 $1 \\leq T\\le 5$，$1 \\le n,q\\le 10^5$，$1 \\le A_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10289", "type": "P", "difficulty": 4, "samples": [["7 2 1\n5 7\n3 6\n2 3\n1 5\n5 4\n1 2\n7 4\n3 7\n", "4"], ["5 0 3\n2 3\n5 1\n5 2\n1 4\n4 5\n1 4\n4 3\n", "2\n1\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["广度优先搜索 BFS", "最短路", "最近公共祖先 LCA", "GESP"], "title": "[GESP样题 八级] 小杨的旅游", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1108>", "description": "小杨准备前往 B 国旅游。\n\nB 国有 $n$ 座城市，这 $n$ 座城市依次以 $1$ 至 $n$ 编号。城市之间由 $n-1$ 条双向道路连接，任意两座城市之间均可达（即任意两座城市之间存在可达的路径）。\n\n小杨可以通过双向道路在城市之间移动，通过一条双向道路需要 $1$ 单位时间。\n\nB 国城市中有 $k$ 座城市设有传送门。设有传送门的城市的编号依次为 $b_1,b_2, \\cdots ,b_k$。小杨可以从任意一座设有传送门的城市花费 $0$ 单位时间前往另一座设有传送门的城市。\n\n注：如果两座设有传送门的城市之间存在双向道路，那么小杨可以选择通过双向道路移动，也可以选择通过传送门传送。\n\n小杨计划在 B 国旅游 $q$ 次。第 $i$ 次旅游（$1 \\le i \\le q$），⼩杨计划从编号为 $u_i$ 的城市前往编号为 $v_i$ 的城市，小杨希望你能求出所需要的最短时间。", "inputFormat": "第一行包含三个正整数 $n,k,q$，分别表示 B 国的城市数量，设有传送门的城市数量，以及小杨计划在 B 国旅游的次数。  \n接下来 $n-1$ 行，每行包含两个正整数 $x_i, y_i$，表示一条双向道路连接的两座城市的编号。  \n第 $n + 1$ 行包含 $k$ 个正整数，表示设有传送门的城市的编号。  \n接下来 $q$ 行，每行包含两个正整数 $u_i,v_i$，表示小杨第 $i$ 次旅游行程的起点城市编号与终点城市编号。", "outputFormat": "输出共 $q$ 行。第 $i$ 行（$1 \\leq i \\leq q$）输出一个非负整数，表示小杨计划第 $i$ 次旅游从编号为 $u_i$ 的城市前往编号为 $v_i$ 的城市所需要的最短时间。", "hint": "| 子任务 | 分值 | $n \\leq $ | $ k \\leq $ | $q \\leq $ |\n|:-: | :-: | :-: | :-: | :-:|\n| $1$ | $30$ | $500$ | $500$ | $1$ |\n| $2$ | $30$ | $2 \\times 10^5$ | $0$ | $2 \\times 10^5$ |\n| $3$ | $40$ | $2 \\times 10^5$ | $2 \\times 10^5$ | $2 \\times 10^5$ |\n\n对全部的测试数据，$1 \\leq n \\leq 2 \\times 10^5$，$0 \\leq k \\leq n$，$1 \\leq x_i, y_i, u_i, v_i \\leq n$，$u_i \\neq v_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP样题 八级] 小杨的旅游", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1108>", "description": "小杨准备前往 B 国旅游。\n\nB 国有 $n$ 座城市，这 $n$ 座城市依次以 $1$ 至 $n$ 编号。城市之间由 $n-1$ 条双向道路连接，任意两座城市之间均可达（即任意两座城市之间存在可达的路径）。\n\n小杨可以通过双向道路在城市之间移动，通过一条双向道路需要 $1$ 单位时间。\n\nB 国城市中有 $k$ 座城市设有传送门。设有传送门的城市的编号依次为 $b_1,b_2, \\cdots ,b_k$。小杨可以从任意一座设有传送门的城市花费 $0$ 单位时间前往另一座设有传送门的城市。\n\n注：如果两座设有传送门的城市之间存在双向道路，那么小杨可以选择通过双向道路移动，也可以选择通过传送门传送。\n\n小杨计划在 B 国旅游 $q$ 次。第 $i$ 次旅游（$1 \\le i \\le q$），⼩杨计划从编号为 $u_i$ 的城市前往编号为 $v_i$ 的城市，小杨希望你能求出所需要的最短时间。", "inputFormat": "第一行包含三个正整数 $n,k,q$，分别表示 B 国的城市数量，设有传送门的城市数量，以及小杨计划在 B 国旅游的次数。  \n接下来 $n-1$ 行，每行包含两个正整数 $x_i, y_i$，表示一条双向道路连接的两座城市的编号。  \n第 $n + 1$ 行包含 $k$ 个正整数，表示设有传送门的城市的编号。  \n接下来 $q$ 行，每行包含两个正整数 $u_i,v_i$，表示小杨第 $i$ 次旅游行程的起点城市编号与终点城市编号。", "outputFormat": "输出共 $q$ 行。第 $i$ 行（$1 \\leq i \\leq q$）输出一个非负整数，表示小杨计划第 $i$ 次旅游从编号为 $u_i$ 的城市前往编号为 $v_i$ 的城市所需要的最短时间。", "hint": "| 子任务 | 分值 | $n \\leq $ | $ k \\leq $ | $q \\leq $ |\n|:-: | :-: | :-: | :-: | :-:|\n| $1$ | $30$ | $500$ | $500$ | $1$ |\n| $2$ | $30$ | $2 \\times 10^5$ | $0$ | $2 \\times 10^5$ |\n| $3$ | $40$ | $2 \\times 10^5$ | $2 \\times 10^5$ | $2 \\times 10^5$ |\n\n对全部的测试数据，$1 \\leq n \\leq 2 \\times 10^5$，$0 \\leq k \\leq n$，$1 \\leq x_i, y_i, u_i, v_i \\leq n$，$u_i \\neq v_i$。", "locale": "zh-CN"}}}
{"pid": "P10290", "type": "P", "difficulty": 1, "samples": [["0\n2\n4\n", "28\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CCC（加拿大）"], "title": "[CCC 2024 J1] Conveyor Belt Sushi", "background": "", "description": "小镇里新开了一家传送带寿司店。一盘盘寿司在高高架起的传送带上旋转，顾客可以直接通过取走盘子来选择吃什么。\n\n每一个红色盘子的寿司需要 $3$ 美元，每一个绿色盘子的寿司需要 $4$ 美元，每一个蓝色盘子的寿司需要 $5$ 美元。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yy1kg2a9.png)\n\n你的任务是根据顾客选择的每种颜色的盘子数量，确定一顿饭的价钱。", "inputFormat": "输入的第一行包含一个非负整数 $R$ 表示顾客选择的红色盘子数量。第二行包含一个非负整数 $G$ 表示顾客选择的绿色盘子数量。第三行包含一个非负整数 $B$ 表示顾客选择的蓝色盘子数量。\n", "outputFormat": "输出一个非负整数 $C$ 表示这顿饭花费的美元。\n", "hint": "**【样例 1 解释】**\n\n这个顾客选择了 $0$ 个红色盘子，$2$ 个绿色盘子，$4$ 个蓝色盘子。所以这顿饭的价钱为 $0 \\times 3 + 2 \\times 4 + 4 \\times 5 = 28$ 美元。\n\n**【数据范围】**\n\n对于所有数据，保证 $0\\leq R,G,B\\leq 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2024 J1] Conveyor Belt Sushi", "background": "", "description": "小镇里新开了一家传送带寿司店。一盘盘寿司在高高架起的传送带上旋转，顾客可以直接通过取走盘子来选择吃什么。\n\n每一个红色盘子的寿司需要 $3$ 美元，每一个绿色盘子的寿司需要 $4$ 美元，每一个蓝色盘子的寿司需要 $5$ 美元。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yy1kg2a9.png)\n\n你的任务是根据顾客选择的每种颜色的盘子数量，确定一顿饭的价钱。", "inputFormat": "输入的第一行包含一个非负整数 $R$ 表示顾客选择的红色盘子数量。第二行包含一个非负整数 $G$ 表示顾客选择的绿色盘子数量。第三行包含一个非负整数 $B$ 表示顾客选择的蓝色盘子数量。\n", "outputFormat": "输出一个非负整数 $C$ 表示这顿饭花费的美元。\n", "hint": "**【样例 1 解释】**\n\n这个顾客选择了 $0$ 个红色盘子，$2$ 个绿色盘子，$4$ 个蓝色盘子。所以这顿饭的价钱为 $0 \\times 3 + 2 \\times 4 + 4 \\times 5 = 28$ 美元。\n\n**【数据范围】**\n\n对于所有数据，保证 $0\\leq R,G,B\\leq 500$。", "locale": "zh-CN"}}}
{"pid": "P10291", "type": "P", "difficulty": 1, "samples": [["5\n3\n2\n9\n20\n22\n14", "19"], ["10\n10\n3\n5\n13", "10"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CCC（加拿大）"], "title": "[CCC 2024 J2] Dusa And The Yobis", "background": "", "description": "Dusa 吃 Yobi，但是只吃大小在某个范围里的 Yobi。\n\n如果 Dusa 遇到了一个大小比它小的 Yobi，它会吃掉这个 Yobi 并把它的大小吞并。（即令自己的大小加上这个 Yobi 的大小。）\n\n例如，如果 Dusa 的大小是 $10$，并且遇到了一个大小是 $6$ 的 Yobi，Dusa 会吃掉这个 Yobi 并且大小变大为 $10 + 6 = 16$。\n\n如果 Dusa 遇到了一个和它一样大或者甚至比它更大的 Yobi，Dusa 会选择逃跑并且不吃掉 Yobi。\n\nDusa 现在遇到了一列 Yobi 并且按照顺序遇到它们。保证 Dusa 必定会遇到一个 Yobi 导致它逃跑。你需要确定 Dusa 逃跑时的大小。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oq4z4sne.png)", "inputFormat": "输入的第一行包含一个正整数 $D$ 表示 Dusa 的初始大小。\n\n剩下的每一行包含一个正整数按顺序表示遇到的 Yobi 的大小。", "outputFormat": "输出一个正整数 $R$ 表示 Dusa 逃跑时的大小。\n", "hint": "**【样例 1 解释】**\n\nDusa 可以吃掉大小为 $3$ 的 Yobi 并使得 Dusa 的大小变为 $8$。Dusa 可以吃掉大小为 $2$ 的 Yobi 并使得 Dusa 的大小变为 $10$。Dusa 可以吃掉大小为 $9$ 的 Yobi 并使得 Dusa 的大小变为 $19$。大小为 $20$ 的 Yobi 导致了 Dusa 逃跑。\n\n**【样例 2 解释】**\n\n大小为 $10$ 的 Yobi 导致了 Dusa 逃跑，它的大小没有改变。\n\n**【数据范围】**\n\n对于所有数据，保证输入的所有数不超过 $5 \\times 10^5$，输入的总行数不超过 $2 \\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2024 J2] Dusa And The Yobis", "background": "", "description": "Dusa 吃 Yobi，但是只吃大小在某个范围里的 Yobi。\n\n如果 Dusa 遇到了一个大小比它小的 Yobi，它会吃掉这个 Yobi 并把它的大小吞并。（即令自己的大小加上这个 Yobi 的大小。）\n\n例如，如果 Dusa 的大小是 $10$，并且遇到了一个大小是 $6$ 的 Yobi，Dusa 会吃掉这个 Yobi 并且大小变大为 $10 + 6 = 16$。\n\n如果 Dusa 遇到了一个和它一样大或者甚至比它更大的 Yobi，Dusa 会选择逃跑并且不吃掉 Yobi。\n\nDusa 现在遇到了一列 Yobi 并且按照顺序遇到它们。保证 Dusa 必定会遇到一个 Yobi 导致它逃跑。你需要确定 Dusa 逃跑时的大小。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oq4z4sne.png)", "inputFormat": "输入的第一行包含一个正整数 $D$ 表示 Dusa 的初始大小。\n\n剩下的每一行包含一个正整数按顺序表示遇到的 Yobi 的大小。", "outputFormat": "输出一个正整数 $R$ 表示 Dusa 逃跑时的大小。\n", "hint": "**【样例 1 解释】**\n\nDusa 可以吃掉大小为 $3$ 的 Yobi 并使得 Dusa 的大小变为 $8$。Dusa 可以吃掉大小为 $2$ 的 Yobi 并使得 Dusa 的大小变为 $10$。Dusa 可以吃掉大小为 $9$ 的 Yobi 并使得 Dusa 的大小变为 $19$。大小为 $20$ 的 Yobi 导致了 Dusa 逃跑。\n\n**【样例 2 解释】**\n\n大小为 $10$ 的 Yobi 导致了 Dusa 逃跑，它的大小没有改变。\n\n**【数据范围】**\n\n对于所有数据，保证输入的所有数不超过 $5 \\times 10^5$，输入的总行数不超过 $2 \\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10292", "type": "P", "difficulty": 1, "samples": [["4\n70\n62\n58\n73", "62 1"], ["8\n75\n70\n60\n70\n70\n60\n75\n70", "60 2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CCC（加拿大）"], "title": "[CCC 2024 J3] Bronze Count", "background": "", "description": "一次比赛结束后，您可能迫切地想知道有多少参赛者获得了铜牌？\n\n金牌会授予所有获得最高分的参赛者。银牌会授予获得第二高分的所有参赛者。铜牌会授予获得第三高分的所有参赛者。\n\n给定一份参赛选手的成绩列表，请求出获得铜牌所需的分数以及有多少人正好得到这一分数。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l5gzr1cf.png)", "inputFormat": "输入的第一行包含一个正整数 $N$ 表示参赛者的数量。\n\n接下来 $N$ 行包含一个整数表示一个参赛者的分数。\n\n保证每个分数都在 $0$ 到 $75$ 之间（包含）并且至少存在三个不同的分数。", "outputFormat": "输出一个非负整数 $S$ 和一个正整数 $P$ 用空格隔开。其中 $S$ 是得到铜牌所需要的分数，$P$ 是正好得到这个分数的参赛者数量。", "hint": "**【样例 1 解释】**\n\n得到铜牌需要 $62$ 分并且有一个参赛者正好得到这一分数。\n\n**【样例 2 解释】**\n\n得到铜牌需要 $60$ 分并且有两个参赛者正好得到这一分数。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\leq N\\leq 2.5\\times 10^5$，分数 $s$ 满足 $0\\leq s\\leq 75$，至少存在三个不同的分数。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | 描述 | 范围 |\n| :-: | :- | :-: |\n| $6$ | 分数互不相同并且参赛者数量很少。 | $N \\leq 50$ |\n| $7$ | 分数可能存在相同并且参赛者数量很少。 | $N \\leq 50$ |\n| $2$ | 分数可能存在相同并且参赛者数量可以很大。 | $N \\leq 2.5 \\times 10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2024 J3] Bronze Count", "background": "", "description": "一次比赛结束后，您可能迫切地想知道有多少参赛者获得了铜牌？\n\n金牌会授予所有获得最高分的参赛者。银牌会授予获得第二高分的所有参赛者。铜牌会授予获得第三高分的所有参赛者。\n\n给定一份参赛选手的成绩列表，请求出获得铜牌所需的分数以及有多少人正好得到这一分数。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l5gzr1cf.png)", "inputFormat": "输入的第一行包含一个正整数 $N$ 表示参赛者的数量。\n\n接下来 $N$ 行包含一个整数表示一个参赛者的分数。\n\n保证每个分数都在 $0$ 到 $75$ 之间（包含）并且至少存在三个不同的分数。", "outputFormat": "输出一个非负整数 $S$ 和一个正整数 $P$ 用空格隔开。其中 $S$ 是得到铜牌所需要的分数，$P$ 是正好得到这个分数的参赛者数量。", "hint": "**【样例 1 解释】**\n\n得到铜牌需要 $62$ 分并且有一个参赛者正好得到这一分数。\n\n**【样例 2 解释】**\n\n得到铜牌需要 $60$ 分并且有两个参赛者正好得到这一分数。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\leq N\\leq 2.5\\times 10^5$，分数 $s$ 满足 $0\\leq s\\leq 75$，至少存在三个不同的分数。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | 描述 | 范围 |\n| :-: | :- | :-: |\n| $6$ | 分数互不相同并且参赛者数量很少。 | $N \\leq 50$ |\n| $7$ | 分数可能存在相同并且参赛者数量很少。 | $N \\leq 50$ |\n| $2$ | 分数可能存在相同并且参赛者数量可以很大。 | $N \\leq 2.5 \\times 10^5$ |", "locale": "zh-CN"}}}
{"pid": "P10293", "type": "P", "difficulty": 2, "samples": [["forloops\nfxrlxxps", "o x\n-"], ["forloops\nfxrlxxp", "o x\ns"], ["forloops\nfrlpz", "s z\no"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CCC（加拿大）"], "title": "[CCC 2024 J4] Troublesome Keys", "background": "", "description": "Alex 的键盘很奇怪。有两个字母按键出现了问题：\n\n- 键盘上有一个按键，每次按下它的时候总是显示另一个错误的字母。Alex 把这个按键称为愚蠢的按键。奇怪的是，Alex 从来没有尝试过输入这个错误的字母。\n- 键盘上还有一个按键，按下它的时候则不会显示任何内容。Alex 把这个按键称为安静的按键。\n\nAlex 至少按下了一次愚蠢的按键，但不一定按下了安静的按键。\n\n你需要确定出现问题的按键和按下它时显示的错误的字母。幸运的是，这是可能的，因为 Alex 从来没有在按下愚蠢的按键之后立即按下安静的按键，也没有再按下安静的按键之后立即按下愚蠢的按键。", "inputFormat": "输入共两行。输入的第一行包含 Alex 按下的 $N$ 个按键。第二行包含屏幕上显示的字母。\n", "outputFormat": "\n输出共两行。\n\n第一行输出用空格分开的两个字母表示愚蠢的按键和按下时显示的错误字母。\n\n第二行输出一个字符，如果安静的按键被按下，输出安静的按键，否则输出一个短横线（`-`）。\n", "hint": "**【样例 1 解释】**\n\n与愚蠢的按键对应的字母是 `o`，每次按下会显示错误的字母 `x`。安静的按键没有被按下过。\n\n**【样例 2 解释】**\n\n与愚蠢的按键对应的字母是 `o`，每次按下会显示错误的字母 `x`。没有显示的安静的按键对应的字母是 `s`。\n\n**【样例 3 解释】**\n\n与愚蠢的按键对应的字母是 `s`，每次按下会显示错误的字母 `z`。没有显示的安静的按键对应的字母是 `o`。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证输入中每行都只包含小写字母，$1\\leq N\\leq 5\\times 10^5$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | 描述 | 范围 |\n| :-: | :- | :-: |\n| $3$ | 安静的按键没有被按下过，按键次数很少。 | $N \\leq 50$ |\n| $3$ | 按下的第一个有问题的按键是愚蠢的按键，按键次数很少。 | $N \\leq 50$ |\n| $5$ | 按下的第一个有问题的按键可能是愚蠢的按键或者安静的按键，按键次数很少。 | $N \\leq 50$ |\n| $4$ | 按下的第一个有问题的按键可能是愚蠢的按键或者安静的按键，按键次数可能很多。 | $N \\leq 5 \\times 10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2024 J4] Troublesome Keys", "background": "", "description": "Alex 的键盘很奇怪。有两个字母按键出现了问题：\n\n- 键盘上有一个按键，每次按下它的时候总是显示另一个错误的字母。Alex 把这个按键称为愚蠢的按键。奇怪的是，Alex 从来没有尝试过输入这个错误的字母。\n- 键盘上还有一个按键，按下它的时候则不会显示任何内容。Alex 把这个按键称为安静的按键。\n\nAlex 至少按下了一次愚蠢的按键，但不一定按下了安静的按键。\n\n你需要确定出现问题的按键和按下它时显示的错误的字母。幸运的是，这是可能的，因为 Alex 从来没有在按下愚蠢的按键之后立即按下安静的按键，也没有再按下安静的按键之后立即按下愚蠢的按键。", "inputFormat": "输入共两行。输入的第一行包含 Alex 按下的 $N$ 个按键。第二行包含屏幕上显示的字母。\n", "outputFormat": "\n输出共两行。\n\n第一行输出用空格分开的两个字母表示愚蠢的按键和按下时显示的错误字母。\n\n第二行输出一个字符，如果安静的按键被按下，输出安静的按键，否则输出一个短横线（`-`）。\n", "hint": "**【样例 1 解释】**\n\n与愚蠢的按键对应的字母是 `o`，每次按下会显示错误的字母 `x`。安静的按键没有被按下过。\n\n**【样例 2 解释】**\n\n与愚蠢的按键对应的字母是 `o`，每次按下会显示错误的字母 `x`。没有显示的安静的按键对应的字母是 `s`。\n\n**【样例 3 解释】**\n\n与愚蠢的按键对应的字母是 `s`，每次按下会显示错误的字母 `z`。没有显示的安静的按键对应的字母是 `o`。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证输入中每行都只包含小写字母，$1\\leq N\\leq 5\\times 10^5$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | 描述 | 范围 |\n| :-: | :- | :-: |\n| $3$ | 安静的按键没有被按下过，按键次数很少。 | $N \\leq 50$ |\n| $3$ | 按下的第一个有问题的按键是愚蠢的按键，按键次数很少。 | $N \\leq 50$ |\n| $5$ | 按下的第一个有问题的按键可能是愚蠢的按键或者安静的按键，按键次数很少。 | $N \\leq 50$ |\n| $4$ | 按下的第一个有问题的按键可能是愚蠢的按键或者安静的按键，按键次数可能很多。 | $N \\leq 5 \\times 10^5$ |", "locale": "zh-CN"}}}
{"pid": "P10294", "type": "P", "difficulty": 2, "samples": [["6\n6\n**LMLS\nS*LMMS\nS*SMSM\n******\nLLM*MS\nSSL*SS\n5\n1\n", "37\n"], ["6\n6\n**LMLS\nS*LMMS\nS*SMSM\n***SLL\nLLM*MS\nSSL*SS\n2\n4\n", "88\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "2024", "CCC（加拿大）", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "[CCC 2024 J5] Harvest Waterloo", "background": "", "description": "有一款新出现的广受欢迎的收割模拟游戏叫做 Harvest Waterloo。游戏在一块矩形南瓜地上进行，南瓜地里有成捆的干草和不同大小的南瓜。游戏开始时，一个农民在其中一个南瓜的位置上。\n\n农民通过在整片土地上向左、向右、向上或向下移动来收割南瓜。农民不能斜着移动，不能穿过干草，也不能离开田地。\n\n你的工作是确定农民收获的南瓜的总价值。其中一个小南瓜值 $1$ 美元，一个中等大小的南瓜值 $5$ 美元，而一个大南瓜值 $10$ 美元。", "inputFormat": "输入的第一行是一个整数 $R > 0$ 表示南瓜地的行数。\n\n第二行是一个整数 $C > 0$ 表示南瓜地的列数。\n\n接下来 $R$ 行描述了整个南瓜地。每行包含 $C$ 个字符并且每个字符要么表示一个南瓜，要么表示干草：`S` 表示小南瓜，`M` 表示中等大小的南瓜，`L` 表示一个大南瓜，`*` 表示干草。\n\n下一行包含一个整数 $A$ 满足 $0 \\leq A < R$，最后一行是一个整数 $B$ 满足 $0 \\leq B < C$。表示农民一开始在第 $A$ 行第 $B$ 列的位置。南瓜地的左上角称为第 $0$ 行第 $0$ 列。", "outputFormat": "输出一个整数 $V$ 表示农民能够收割的南瓜的总价值。\n", "hint": "**【样例 1 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sppn2crp.png)\n\n农民在第 $5$ 行第 $1$ 列开始可以收割 $6$ 个南瓜。可以收割到 $2$ 个小南瓜，$1$ 个中等大小的南瓜和 $3$ 个大南瓜。收割的南瓜的总价值是 $2 \\times 1 + 1 \\times 5 + 3 \\times 10 = 37$。\n\n**【样例 2 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dni4nwdv.png)\n\n农民在第 $2$ 行第 $4$ 列开始可以收割 $19$ 个南瓜。可以收割到 $8$ 个小南瓜，$6$ 个中等大小的南瓜和 $5$ 个大南瓜。收割的南瓜的总价值是 $8 \\times 1 + 6 \\times 5 + 5 \\times 10 = 88$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\leq R,C\\leq 10^5$，$1\\leq R\\times C\\leq 10^5$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | 描述 | 范围 |\n| :-: | :- | :-: |\n| $1$ | 南瓜地很小并且不存在干草。 | $R \\times C \\leq 100$ |\n| $4$ | 南瓜地很小并且干草把南瓜地分割为一些矩形区域。 | $R \\times C \\leq 100$ |\n| $5$ | 南瓜地很小并且干草可以在任意位置。 | $R \\times C \\leq 100$ |\n| $5$ | 南瓜地可能很大并且干草可以在任意位置。 | $R \\times C \\leq 10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2024 J5] Harvest Waterloo", "background": "", "description": "有一款新出现的广受欢迎的收割模拟游戏叫做 Harvest Waterloo。游戏在一块矩形南瓜地上进行，南瓜地里有成捆的干草和不同大小的南瓜。游戏开始时，一个农民在其中一个南瓜的位置上。\n\n农民通过在整片土地上向左、向右、向上或向下移动来收割南瓜。农民不能斜着移动，不能穿过干草，也不能离开田地。\n\n你的工作是确定农民收获的南瓜的总价值。其中一个小南瓜值 $1$ 美元，一个中等大小的南瓜值 $5$ 美元，而一个大南瓜值 $10$ 美元。", "inputFormat": "输入的第一行是一个整数 $R > 0$ 表示南瓜地的行数。\n\n第二行是一个整数 $C > 0$ 表示南瓜地的列数。\n\n接下来 $R$ 行描述了整个南瓜地。每行包含 $C$ 个字符并且每个字符要么表示一个南瓜，要么表示干草：`S` 表示小南瓜，`M` 表示中等大小的南瓜，`L` 表示一个大南瓜，`*` 表示干草。\n\n下一行包含一个整数 $A$ 满足 $0 \\leq A < R$，最后一行是一个整数 $B$ 满足 $0 \\leq B < C$。表示农民一开始在第 $A$ 行第 $B$ 列的位置。南瓜地的左上角称为第 $0$ 行第 $0$ 列。", "outputFormat": "输出一个整数 $V$ 表示农民能够收割的南瓜的总价值。\n", "hint": "**【样例 1 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sppn2crp.png)\n\n农民在第 $5$ 行第 $1$ 列开始可以收割 $6$ 个南瓜。可以收割到 $2$ 个小南瓜，$1$ 个中等大小的南瓜和 $3$ 个大南瓜。收割的南瓜的总价值是 $2 \\times 1 + 1 \\times 5 + 3 \\times 10 = 37$。\n\n**【样例 2 解释】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dni4nwdv.png)\n\n农民在第 $2$ 行第 $4$ 列开始可以收割 $19$ 个南瓜。可以收割到 $8$ 个小南瓜，$6$ 个中等大小的南瓜和 $5$ 个大南瓜。收割的南瓜的总价值是 $8 \\times 1 + 6 \\times 5 + 5 \\times 10 = 88$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\leq R,C\\leq 10^5$，$1\\leq R\\times C\\leq 10^5$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | 描述 | 范围 |\n| :-: | :- | :-: |\n| $1$ | 南瓜地很小并且不存在干草。 | $R \\times C \\leq 100$ |\n| $4$ | 南瓜地很小并且干草把南瓜地分割为一些矩形区域。 | $R \\times C \\leq 100$ |\n| $5$ | 南瓜地很小并且干草可以在任意位置。 | $R \\times C \\leq 100$ |\n| $5$ | 南瓜地可能很大并且干草可以在任意位置。 | $R \\times C \\leq 10^5$ |", "locale": "zh-CN"}}}
{"pid": "P10295", "type": "P", "difficulty": 1, "samples": [["4\n0\n1\n0\n1\n", "4\n"], ["4\n1\n0\n0\n1\n", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CCC（加拿大）"], "title": "[CCC 2024 S1] Hat Circle", "background": "", "description": "在最近的一次聚会上，$N$ 个人围坐在一张圆桌旁，其中 $N$ 是偶数。座椅按顺时针方向编号为 $1\\sim N$。每个人都戴着一顶写有数字的帽子。具体来说，座位 $i$ 上的人戴着一个写有数字 $H_i$ 的帽子。\n\n每个人都看着圆圈中与自己正对面的人。\n\n请你求出看到戴着与自己相同号码的帽子的人的数量。", "inputFormat": "输入的第一行包含一个正偶数 $N$ 表示聚会的人数。\n\n接下来 $N$ 行分别包含一个非负整数 $H_i$，表示第 $i$ 个人的帽子上写的数字。", "outputFormat": "输出一个整数，表示看到戴着与自己相同号码的帽子的人的数量。\n", "hint": "**【样例 1 解释】**\n\n桌子周围的四个座位排布如下图所示。圆圈里的数字表示这个人的帽子上写的数字，圆圈旁边的数字表示这个人的编号。注意每个人看到的数都与自己的帽子上的数相等。坐在位置 $1$ 和 $3$ 上的人都看到了数字 $0$，坐在位置 $2$ 和 $4$ 上的人都看到了数字 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vvym8vb6.png)\n\n**【样例 2 解释】**\n\n桌子周围的四个座位排布如下图所示。圆圈里的数字表示这个人的帽子上写的数字，圆圈旁边的数字表示这个人的编号。注意每个人看到的数都不与自己的帽子上的数相等。坐在位置 $1$ 和 $4$ 上的人都看到了数字 $0$，坐在位置 $2$ 和 $3$ 上的人都看到了数字 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dc5ar3s0.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\leq N\\leq 10^6$，$0\\leq H_i\\leq 2\\times 10^6$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | 描述 | $N$ 的范围 | $H_i$ 的范围 |\n| :-: | :- | :-: | :-: |\n| $2$ | 人数很少；只有两种可能的帽子上的数 | $N \\leq 4$ | $H_i \\leq 1$ |\n| $1$ | 只有一种可能的帽子上的数 | $N \\leq 100$ | $H_i = 1$ |\n| $2$ | 坐在奇数位置上的人的帽子上数为 $1$，坐在偶数位置上的人的帽子上数为 $0$ | $N \\leq 100$ | $H_i \\leq 1$ |\n| $5$ | 中等多少的人数 | $N \\leq 2 \\times 10^3$ | $H_i \\leq 4 \\times 10^3$ |\n| $5$ | 很多人和可能的帽子上的数 | $N \\leq 10^6$ | $H_i \\leq 2 \\times 10^6$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2024 S1] Hat Circle", "background": "", "description": "在最近的一次聚会上，$N$ 个人围坐在一张圆桌旁，其中 $N$ 是偶数。座椅按顺时针方向编号为 $1\\sim N$。每个人都戴着一顶写有数字的帽子。具体来说，座位 $i$ 上的人戴着一个写有数字 $H_i$ 的帽子。\n\n每个人都看着圆圈中与自己正对面的人。\n\n请你求出看到戴着与自己相同号码的帽子的人的数量。", "inputFormat": "输入的第一行包含一个正偶数 $N$ 表示聚会的人数。\n\n接下来 $N$ 行分别包含一个非负整数 $H_i$，表示第 $i$ 个人的帽子上写的数字。", "outputFormat": "输出一个整数，表示看到戴着与自己相同号码的帽子的人的数量。\n", "hint": "**【样例 1 解释】**\n\n桌子周围的四个座位排布如下图所示。圆圈里的数字表示这个人的帽子上写的数字，圆圈旁边的数字表示这个人的编号。注意每个人看到的数都与自己的帽子上的数相等。坐在位置 $1$ 和 $3$ 上的人都看到了数字 $0$，坐在位置 $2$ 和 $4$ 上的人都看到了数字 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vvym8vb6.png)\n\n**【样例 2 解释】**\n\n桌子周围的四个座位排布如下图所示。圆圈里的数字表示这个人的帽子上写的数字，圆圈旁边的数字表示这个人的编号。注意每个人看到的数都不与自己的帽子上的数相等。坐在位置 $1$ 和 $4$ 上的人都看到了数字 $0$，坐在位置 $2$ 和 $3$ 上的人都看到了数字 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dc5ar3s0.png)\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\leq N\\leq 10^6$，$0\\leq H_i\\leq 2\\times 10^6$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | 描述 | $N$ 的范围 | $H_i$ 的范围 |\n| :-: | :- | :-: | :-: |\n| $2$ | 人数很少；只有两种可能的帽子上的数 | $N \\leq 4$ | $H_i \\leq 1$ |\n| $1$ | 只有一种可能的帽子上的数 | $N \\leq 100$ | $H_i = 1$ |\n| $2$ | 坐在奇数位置上的人的帽子上数为 $1$，坐在偶数位置上的人的帽子上数为 $0$ | $N \\leq 100$ | $H_i \\leq 1$ |\n| $5$ | 中等多少的人数 | $N \\leq 2 \\times 10^3$ | $H_i \\leq 4 \\times 10^3$ |\n| $5$ | 很多人和可能的帽子上的数 | $N \\leq 10^6$ | $H_i \\leq 2 \\times 10^6$ |", "locale": "zh-CN"}}}
{"pid": "P10296", "type": "P", "difficulty": 1, "samples": [["3 4\nabcb\nbcbb\nbabc\n", "T\nF\nT\n"], ["2 3\nabc\nbcb\n", "F\nT\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CCC（加拿大）"], "title": "[CCC 2024 S2] Heavy-Light Composition", "background": "", "description": "在一个只包含小写字母的字符串中，称一个字母是重的当且仅当它在字符串中出现了超过一次，否则称它是轻的。\n\n给定一些字符串，对于每个字符串，请判断其中重的字母和轻的字母是否满足交替出现。（即要么每个奇数位的字母都是重的，每个偶数位的字母都是轻的，要么每个奇数位的字母都是轻的，每个偶数位的字母都是重的。）", "inputFormat": "输入的第一行包含两个正整数 $T$ 和 $N$ 表示字符串数量和每个字符串的长度。\n\n接下来 $T$ 行每行包含一个长度为 $N$ 的小写字母组成的字符串。\n", "outputFormat": "输出 $T$ 行，每行包含一个字符 `T` 或者 `F`。如果第 $i$ 个输入的字符串的轻的字母和重的字母交替出现，在第 $i$ 行输出 `T`，否则在第 $i$ 行输出 `F`。\n", "hint": "**【样例 1 解释】**\n\n第一个字符串由轻字母、重字母、轻字母、重字母组成。\n\n第二个字符串以两个连续的重字母结尾。\n\n第三个字符串由重字母、轻字母、重字母、轻字母组成。\n\n**【样例 2 解释】**\n\n第一个字符串全部是轻字母。\n\n第二个字符串由重字母、轻字母、重字母组成。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证字符串中只包含小写字母，$2\\leq T\\leq 10^4$，$2\\leq N\\leq 100$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | $T$ 的范围 | $N$ 的范围 | 其他限制 |\n| :-: | :-: | :-: | :- |\n| $5$ | $2 \\leq T \\leq 4$ | $2 \\leq N \\leq 4$ | 字符串只包含 `a` 和 `b` |\n| $5$ | $2 \\leq T \\leq 10$ | $2 \\leq N \\leq 30$ | 无 |\n| $2$ | $2 \\leq T \\leq 100$ | $2 \\leq N \\leq 100$ | 只有字母 `a` 是重的；其他字母是轻的 |\n| $3$ | $2 \\leq T \\leq 10^4$ | $2 \\leq N \\leq 100$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2024 S2] Heavy-Light Composition", "background": "", "description": "在一个只包含小写字母的字符串中，称一个字母是重的当且仅当它在字符串中出现了超过一次，否则称它是轻的。\n\n给定一些字符串，对于每个字符串，请判断其中重的字母和轻的字母是否满足交替出现。（即要么每个奇数位的字母都是重的，每个偶数位的字母都是轻的，要么每个奇数位的字母都是轻的，每个偶数位的字母都是重的。）", "inputFormat": "输入的第一行包含两个正整数 $T$ 和 $N$ 表示字符串数量和每个字符串的长度。\n\n接下来 $T$ 行每行包含一个长度为 $N$ 的小写字母组成的字符串。\n", "outputFormat": "输出 $T$ 行，每行包含一个字符 `T` 或者 `F`。如果第 $i$ 个输入的字符串的轻的字母和重的字母交替出现，在第 $i$ 行输出 `T`，否则在第 $i$ 行输出 `F`。\n", "hint": "**【样例 1 解释】**\n\n第一个字符串由轻字母、重字母、轻字母、重字母组成。\n\n第二个字符串以两个连续的重字母结尾。\n\n第三个字符串由重字母、轻字母、重字母、轻字母组成。\n\n**【样例 2 解释】**\n\n第一个字符串全部是轻字母。\n\n第二个字符串由重字母、轻字母、重字母组成。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证字符串中只包含小写字母，$2\\leq T\\leq 10^4$，$2\\leq N\\leq 100$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | $T$ 的范围 | $N$ 的范围 | 其他限制 |\n| :-: | :-: | :-: | :- |\n| $5$ | $2 \\leq T \\leq 4$ | $2 \\leq N \\leq 4$ | 字符串只包含 `a` 和 `b` |\n| $5$ | $2 \\leq T \\leq 10$ | $2 \\leq N \\leq 30$ | 无 |\n| $2$ | $2 \\leq T \\leq 100$ | $2 \\leq N \\leq 100$ | 只有字母 `a` 是重的；其他字母是轻的 |\n| $3$ | $2 \\leq T \\leq 10^4$ | $2 \\leq N \\leq 100$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P10297", "type": "P", "difficulty": 5, "samples": [["3\n3 1 2\n3 1 1\n", "YES\n1\nR 1 2\n"], ["4\n1 2 4 3\n1 4 2 3\n", "NO\n"], ["4\n2 1 4 3\n2 1 4 3\n", "YES\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "CCC（加拿大）", "构造"], "title": "[CCC 2024 S3] Swipe", "background": "", "description": "\nSwipe 是一款新的手机游戏，最近大受欢迎。在 Swipe 游戏的每一个关卡中，您都会得到两个长度为 $N$ 的数列 $A$ 和 $B$。Swipe 游戏的每个关卡的目标是把数组 $A$ 变成数组 $B$。\n\n现在有两种可以对 $A$ 进行的滑动操作。\n\n- 向右滑动：选择一个区间 $[l, r]$，对任意 $l \\leq i \\leq r$ 令 $A_i = A_l$。\n- 向左滑动：选择一个区间 $[l, r]$，对任意 $l \\leq i \\leq r$ 令 $A_i = A_r$。\n\n例如，一开始 $A = [0, 1, 2, 3, 4, 5]$，如果我们对区间 $[2, 4]$ 做向右滑动的操作，序列变为 $[0, 1, 2, 2, 2, 5]$。如果我们对区间 $[3, 5]$ 做向左滑动的操作，序列变为 $[0, 1, 2, 5, 5, 5]$。注意序列从 $0$ 开始编号。\n\n不幸的是，游戏存在一些问题，可能会包含无法通过的关卡。请问是否可以将数组 $A$ 转换为数组 $B$。如果可以，请给出任意一种将数组 $A$ 转换为数组 $B$ 的滑动操作方案。\n", "inputFormat": "\n输入的第一行包含一个正整数 $N$ 表示两个数列的长度。\n\n第二行包含 $N$ 个空格隔开的 $A$ 中的整数。\n\n第三行包含 $N$ 个空格隔开的 $B$ 中的整数。\n", "outputFormat": "如果存在一种操作方案可以把 $A$ 变为 $B$，在第一行输出 `YES`，否则输出 `NO`。\n\n如果在第一行输出了 `YES`，则下一行包含一个非负整数 $K$（$K \\leq N$）表示滑动次数。\n\n接下来 $K$ 行每行包含三个空格隔开的数 $D_j,l_j$ 和 $r_j$。$D_j$ 是 `R` 或者 `L` 表示第 $j$ 次操作是向右滑动还是向左滑动。\n\n$l_j$ 和 $r_j$ 表示这次滑动操作的左端和右端，必须满足 $0 \\leq l_j \\leq r_j < N$。\n", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，保证 $1 \\leq N \\leq 3 \\times 10^5$，$1 \\leq A_i, B_i \\leq 3 \\times 10^5$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | $N$ 的范围 | $A_i$ 和 $B_i$ 的范围 |\n| :-: | :-: | :-: |\n| $2$ | $N = 2$ | $1 \\leq A_i, B_i \\leq 3$ |\n| $4$ | $1 \\leq N \\leq 8$ | $1 \\leq A_i, B_i \\leq 8$ |\n| $4$ | $1 \\leq N \\leq 500$ | $1 \\leq A_i, B_i \\leq 3000$ |\n| $5$ | $1 \\leq N \\leq 3 \\times 10^5$ | $1 \\leq A_i, B_i \\leq 3 \\times 10^5$ |\n\n注意对于一个分值为 $M$ 的子任务，如果只答对了第一行的内容，你可以得到 $\\left\\lfloor\\dfrac M2\\right\\rfloor$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2024 S3] Swipe", "background": "", "description": "\nSwipe 是一款新的手机游戏，最近大受欢迎。在 Swipe 游戏的每一个关卡中，您都会得到两个长度为 $N$ 的数列 $A$ 和 $B$。Swipe 游戏的每个关卡的目标是把数组 $A$ 变成数组 $B$。\n\n现在有两种可以对 $A$ 进行的滑动操作。\n\n- 向右滑动：选择一个区间 $[l, r]$，对任意 $l \\leq i \\leq r$ 令 $A_i = A_l$。\n- 向左滑动：选择一个区间 $[l, r]$，对任意 $l \\leq i \\leq r$ 令 $A_i = A_r$。\n\n例如，一开始 $A = [0, 1, 2, 3, 4, 5]$，如果我们对区间 $[2, 4]$ 做向右滑动的操作，序列变为 $[0, 1, 2, 2, 2, 5]$。如果我们对区间 $[3, 5]$ 做向左滑动的操作，序列变为 $[0, 1, 2, 5, 5, 5]$。注意序列从 $0$ 开始编号。\n\n不幸的是，游戏存在一些问题，可能会包含无法通过的关卡。请问是否可以将数组 $A$ 转换为数组 $B$。如果可以，请给出任意一种将数组 $A$ 转换为数组 $B$ 的滑动操作方案。\n", "inputFormat": "\n输入的第一行包含一个正整数 $N$ 表示两个数列的长度。\n\n第二行包含 $N$ 个空格隔开的 $A$ 中的整数。\n\n第三行包含 $N$ 个空格隔开的 $B$ 中的整数。\n", "outputFormat": "如果存在一种操作方案可以把 $A$ 变为 $B$，在第一行输出 `YES`，否则输出 `NO`。\n\n如果在第一行输出了 `YES`，则下一行包含一个非负整数 $K$（$K \\leq N$）表示滑动次数。\n\n接下来 $K$ 行每行包含三个空格隔开的数 $D_j,l_j$ 和 $r_j$。$D_j$ 是 `R` 或者 `L` 表示第 $j$ 次操作是向右滑动还是向左滑动。\n\n$l_j$ 和 $r_j$ 表示这次滑动操作的左端和右端，必须满足 $0 \\leq l_j \\leq r_j < N$。\n", "hint": "**本题采用捆绑测试。**\n\n对于所有数据，保证 $1 \\leq N \\leq 3 \\times 10^5$，$1 \\leq A_i, B_i \\leq 3 \\times 10^5$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | $N$ 的范围 | $A_i$ 和 $B_i$ 的范围 |\n| :-: | :-: | :-: |\n| $2$ | $N = 2$ | $1 \\leq A_i, B_i \\leq 3$ |\n| $4$ | $1 \\leq N \\leq 8$ | $1 \\leq A_i, B_i \\leq 8$ |\n| $4$ | $1 \\leq N \\leq 500$ | $1 \\leq A_i, B_i \\leq 3000$ |\n| $5$ | $1 \\leq N \\leq 3 \\times 10^5$ | $1 \\leq A_i, B_i \\leq 3 \\times 10^5$ |\n\n注意对于一个分值为 $M$ 的子任务，如果只答对了第一行的内容，你可以得到 $\\left\\lfloor\\dfrac M2\\right\\rfloor$ 分。", "locale": "zh-CN"}}}
{"pid": "P10298", "type": "P", "difficulty": 4, "samples": [["5 7\n1 2\n2 4\n5 2\n4 5\n4 3\n1 3\n1 4\n", "BRGBBGG\n"], ["4 2\n1 2\n3 4\n", "BB\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2024", "Special Judge", "CCC（加拿大）", "生成树", "构造"], "title": "[CCC 2024 S4] Painting Roads", "background": "", "description": "Kitchener 市的市长 Alanna 成功地改进了该市的道路规划。然而，来自 RedBlue 市的一位售货员仍然抱怨道路的颜色不够丰富。Alanna 的下一个任务就是粉刷一些道路。\n\nKitchener 市的道路规划可以表示为 $N$ 个十字路口和 $M$ 条道路，第 $i$ 条道路连接第 $u_i$ 个十字路口和第 $v_i$ 个十字路口。一开始所有道路都是灰色的。Alanna 想要把一些道路染成红色或者蓝色，满足以下条件：\n\n- 对于每一条灰色道路，假设其连接十字路口 $u_i$ 和十字路口 $v_i$，一定存在一条从十字路口 $u_i$ 到十字路口 $v_i$ 的路径，满足路径上的道路颜色红色和蓝色交替出现，任何道路都不是灰色的。\n\n为了降低城市的支出，Alanna 希望尽可能少地对道路进行染色。请帮助 Alanna 设计一个符合要求的染色方案。", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $M$（$1\\leq N, M \\leq 2 \\times 10^5$）。\n\n接下来 $M$ 行中的第 $i$ 行包含两个整数 $u_i$ 和 $v_i$ 表示存在一条连接十字路口 $u_i$ 和十字路口 $v_i$ 的道路（$1 \\leq u_i, v_i \\leq N$，$u_i \\neq v_i$）。\n\n任意两个十字路口之间至多存在一条道路。", "outputFormat": "输出一个长度为 $M$ 的字符串，表示染色的方案。第 $i$ 个字符表示第 $i$ 条道路的颜色，`R` 表示红色，`B` 表示蓝色，`G` 表示灰色（未染色）。\n\n注意你必须在满足条件的情况下最小化染色的道路数目。如果存在多个这样的染色方案，输出任意一个。", "hint": "**【样例 1 解释】**\n\n十字路口以及有效的道路的示意图如下所示，该方案最小化了染色道路的数量。请注意，每条道路上的颜色显示为 R（红色）、B（蓝色）或 G（灰色）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vwughkb3.png)\n\n所有为染色的道路都满足条件：\n\n- 第二条路标记为 $G_2$ 连接了十字路口 $2$ 和 $4$，路径 $2, 1, 4$ 上的道路被染上红色、蓝色。\n- 第三条路标记为 $G_3$ 连接了十字路口 $5$ 和 $2$，路径 $5, 4, 1, 2$ 上的道路被染上红色、蓝色、红色。\n- 第五条路标记为 $G_5$ 连接了十字路口 $4$ 和 $3$，路径 $4, 1, 3$ 上的道路被染上蓝色、红色。\n\n**【样例 2 解释】**\n\n请注意 Kitchener 的道路可能不是连通的。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\leq N, M \\leq 2 \\times 10^5$，$1 \\leq u_i, v_i \\leq N$，$u_i \\neq v_i$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | 附加条件 |\n| :-: | :- |\n| $2$ | 对任意 $1 \\leq i < N$ 存在一条连接 $i$ 和 $i + 1$ 的道路（还可能存在其他道路） |\n| $3$ | 图连通并且 $N = M$ |\n| $3$ | 任何道路都不同时属于至少两个简单环（见下文定义） |\n| $7$ | 无 |\n\n定义：若用 $u \\leftrightarrow v$ 表示一条连接 $u$ 和 $v$ 的道路，则称 $k \\geq 3$ 且所有 $w_i$ 互不相同是序列 $w_1 \\leftrightarrow w_2 \\leftrightarrow \\cdots \\leftrightarrow w_k \\leftrightarrow w_1$ 为简单环。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2024 S4] Painting Roads", "background": "", "description": "Kitchener 市的市长 Alanna 成功地改进了该市的道路规划。然而，来自 RedBlue 市的一位售货员仍然抱怨道路的颜色不够丰富。Alanna 的下一个任务就是粉刷一些道路。\n\nKitchener 市的道路规划可以表示为 $N$ 个十字路口和 $M$ 条道路，第 $i$ 条道路连接第 $u_i$ 个十字路口和第 $v_i$ 个十字路口。一开始所有道路都是灰色的。Alanna 想要把一些道路染成红色或者蓝色，满足以下条件：\n\n- 对于每一条灰色道路，假设其连接十字路口 $u_i$ 和十字路口 $v_i$，一定存在一条从十字路口 $u_i$ 到十字路口 $v_i$ 的路径，满足路径上的道路颜色红色和蓝色交替出现，任何道路都不是灰色的。\n\n为了降低城市的支出，Alanna 希望尽可能少地对道路进行染色。请帮助 Alanna 设计一个符合要求的染色方案。", "inputFormat": "输入的第一行包含两个整数 $N$ 和 $M$（$1\\leq N, M \\leq 2 \\times 10^5$）。\n\n接下来 $M$ 行中的第 $i$ 行包含两个整数 $u_i$ 和 $v_i$ 表示存在一条连接十字路口 $u_i$ 和十字路口 $v_i$ 的道路（$1 \\leq u_i, v_i \\leq N$，$u_i \\neq v_i$）。\n\n任意两个十字路口之间至多存在一条道路。", "outputFormat": "输出一个长度为 $M$ 的字符串，表示染色的方案。第 $i$ 个字符表示第 $i$ 条道路的颜色，`R` 表示红色，`B` 表示蓝色，`G` 表示灰色（未染色）。\n\n注意你必须在满足条件的情况下最小化染色的道路数目。如果存在多个这样的染色方案，输出任意一个。", "hint": "**【样例 1 解释】**\n\n十字路口以及有效的道路的示意图如下所示，该方案最小化了染色道路的数量。请注意，每条道路上的颜色显示为 R（红色）、B（蓝色）或 G（灰色）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vwughkb3.png)\n\n所有为染色的道路都满足条件：\n\n- 第二条路标记为 $G_2$ 连接了十字路口 $2$ 和 $4$，路径 $2, 1, 4$ 上的道路被染上红色、蓝色。\n- 第三条路标记为 $G_3$ 连接了十字路口 $5$ 和 $2$，路径 $5, 4, 1, 2$ 上的道路被染上红色、蓝色、红色。\n- 第五条路标记为 $G_5$ 连接了十字路口 $4$ 和 $3$，路径 $4, 1, 3$ 上的道路被染上蓝色、红色。\n\n**【样例 2 解释】**\n\n请注意 Kitchener 的道路可能不是连通的。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1\\leq N, M \\leq 2 \\times 10^5$，$1 \\leq u_i, v_i \\leq N$，$u_i \\neq v_i$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | 附加条件 |\n| :-: | :- |\n| $2$ | 对任意 $1 \\leq i < N$ 存在一条连接 $i$ 和 $i + 1$ 的道路（还可能存在其他道路） |\n| $3$ | 图连通并且 $N = M$ |\n| $3$ | 任何道路都不同时属于至少两个简单环（见下文定义） |\n| $7$ | 无 |\n\n定义：若用 $u \\leftrightarrow v$ 表示一条连接 $u$ 和 $v$ 的道路，则称 $k \\geq 3$ 且所有 $w_i$ 互不相同是序列 $w_1 \\leftrightarrow w_2 \\leftrightarrow \\cdots \\leftrightarrow w_k \\leftrightarrow w_1$ 为简单环。", "locale": "zh-CN"}}}
{"pid": "P10299", "type": "P", "difficulty": 6, "samples": [["2\n5 4\n6 5\n", "2\n"], ["5\n1 0 1 2 0\n0 2 0 3 1\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "CCC（加拿大）"], "title": "[CCC 2024 S5] Chocolate Bar Partition", "background": "", "description": "Maxwell 有一块巧克力想和他的朋友们分享。巧克力可以看作 $2\\times N$ 个小方块组成的，每个小方块的美味度可以表示为 $2 \\times N$ 的整数数组 $T_{i,j}$。Maxwell 想把整个巧克力分成若干个连通块，每个连通块的巧克力小方格的平均美味程度都是一样的。Maxwell 想知道根据如上所述，他可以将巧克力棒分成的最大连通块数量是多少。\n\n如果可以通过向上、向下、向左或向右移动的方式访问到每个小方块，则该部分被视为一个连通块。", "inputFormat": "输入的第一行包含一个正整数 $N$ 表示巧克力的长度。\n\n第二行包含 $N$ 个空格隔开的整数，第 $j$ 个整数表示巧克力的第一行第 $j$ 个小方块的美味度 $T_{1,j}$。\n\n类似地，第三行包含 $N$ 个空格隔开的整数，第 $j$ 个整数表示巧克力的第二行第 $j$ 个小方块的美味度 $T_{2,j}$。", "outputFormat": "输出一个整数，表示 Maxwell 最多能把巧克力切分出的连通块数。\n", "hint": "\n**【样例 1 解释】**\n\n把巧克力分割成 $2$ 块是最优的，一种方案是把右下角的一个小方块作为一个连通块，其余三个小方块作为第二个连通块，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2yga1u9u.png)\n\n每一个连通块的平均美味度都为 $5$。\n\n**【样例 2 解释】**\n\n一种获得平均分割巧克力的方案如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hty1ata8.png)\n\n注意每一块的平均美味度都为 $1$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1 \\leq N \\leq 2 \\times 10^5$，$0 \\leq T_{i,j} \\leq 10^8$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | $N$ 的范围 | $T_{i,j}$ 的范围 |\n| :-: | :-: | :-: |\n| $2$ | $N = 2$ | $0 \\leq T_{i,j} \\leq 5$ |\n| $2$ | $1 \\leq N \\leq 8$ | $0 \\leq T_{i,j} \\leq 20$ |\n| $1$ | $1 \\leq N \\leq 20$ | $0 \\leq T_{i,j} \\leq 20$ |\n| $2$ | $1 \\leq N \\leq 100$ | $0 \\leq T_{i,j} \\leq 20$ |\n| $2$ | $1 \\leq N \\leq 1000$ | $0 \\leq T_{i,j} \\leq 100$ |\n| $3$ | $1 \\leq N \\leq 2000$ | $0 \\leq T_{i,j} \\leq 10^5$ |\n| $3$ | $1 \\leq N \\leq 2 \\times 10^5$ | $0 \\leq T_{i,j} \\leq 10^8$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2024 S5] Chocolate Bar Partition", "background": "", "description": "Maxwell 有一块巧克力想和他的朋友们分享。巧克力可以看作 $2\\times N$ 个小方块组成的，每个小方块的美味度可以表示为 $2 \\times N$ 的整数数组 $T_{i,j}$。Maxwell 想把整个巧克力分成若干个连通块，每个连通块的巧克力小方格的平均美味程度都是一样的。Maxwell 想知道根据如上所述，他可以将巧克力棒分成的最大连通块数量是多少。\n\n如果可以通过向上、向下、向左或向右移动的方式访问到每个小方块，则该部分被视为一个连通块。", "inputFormat": "输入的第一行包含一个正整数 $N$ 表示巧克力的长度。\n\n第二行包含 $N$ 个空格隔开的整数，第 $j$ 个整数表示巧克力的第一行第 $j$ 个小方块的美味度 $T_{1,j}$。\n\n类似地，第三行包含 $N$ 个空格隔开的整数，第 $j$ 个整数表示巧克力的第二行第 $j$ 个小方块的美味度 $T_{2,j}$。", "outputFormat": "输出一个整数，表示 Maxwell 最多能把巧克力切分出的连通块数。\n", "hint": "\n**【样例 1 解释】**\n\n把巧克力分割成 $2$ 块是最优的，一种方案是把右下角的一个小方块作为一个连通块，其余三个小方块作为第二个连通块，如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2yga1u9u.png)\n\n每一个连通块的平均美味度都为 $5$。\n\n**【样例 2 解释】**\n\n一种获得平均分割巧克力的方案如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hty1ata8.png)\n\n注意每一块的平均美味度都为 $1$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于所有数据，保证 $1 \\leq N \\leq 2 \\times 10^5$，$0 \\leq T_{i,j} \\leq 10^8$。\n\n下面的表格显示了 $15$ 分的分配方案：\n\n| 分值 | $N$ 的范围 | $T_{i,j}$ 的范围 |\n| :-: | :-: | :-: |\n| $2$ | $N = 2$ | $0 \\leq T_{i,j} \\leq 5$ |\n| $2$ | $1 \\leq N \\leq 8$ | $0 \\leq T_{i,j} \\leq 20$ |\n| $1$ | $1 \\leq N \\leq 20$ | $0 \\leq T_{i,j} \\leq 20$ |\n| $2$ | $1 \\leq N \\leq 100$ | $0 \\leq T_{i,j} \\leq 20$ |\n| $2$ | $1 \\leq N \\leq 1000$ | $0 \\leq T_{i,j} \\leq 100$ |\n| $3$ | $1 \\leq N \\leq 2000$ | $0 \\leq T_{i,j} \\leq 10^5$ |\n| $3$ | $1 \\leq N \\leq 2 \\times 10^5$ | $0 \\leq T_{i,j} \\leq 10^8$ |\n", "locale": "zh-CN"}}}
{"pid": "P10300", "type": "P", "difficulty": 4, "samples": [["5 10 3\n1 7 2 5\n2 1 4 10\n3 2 6 3\n1 8 1 4\n2 7 3 5\n4 7 8\n2 2 6\n9 10 6\n9 3 4\n8 1 6\n10 6 10\n4 9 2\n4 1 10\n7 7 8\n10 3 2\n", "7 3 5\n7 3 5\n9 10 6\n7 3 5\n7 3 5\n10 6 10\n7 3 5\n7 3 5\n7 3 5\n7 3 5\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "THUWC"], "title": "[THUWC 2020] 工资分配", "background": "", "description": "月末，一家公司的老板给公司内的 $k$ 个员工（他们被编号为 $1\\sim k$）准备了一份工资的分配方案。这份方案可以用一个长度为 $k$ 的序列 $a$ 表示，其中 $a_i$ 表示第 $i$ 个人的工资。现在，这份分配方案放在办公室的桌上，无人看管。\n\n一些员工决定通过替换的方式替换掉这份工资分配方案，来使得自己获得更多的工资。于是，一些员工自己准备了一个自行伪造、不会被老板察觉的分配方案 $b$（也是一个长度为 $k$ 的序列），并选择在一个时刻潜入办公室。他会偷看**当前**放在办公桌上的分配方案 $a^{'}$，如果该员工编号为 $i$ 且 $b_i > a^{'}_ i$，他就会把**整个分配方案**替换成 $b$。为了保证替换成功，一个员工可能会在多个时刻潜入办公室，并且可能会伪造不同的分配方案。但同一时刻最多有一个员工潜入办公室。\n\n假设一天总共有 $n$ 个时刻有员工潜入，我们将这些时刻按时间顺序从 $1$ 到 $n$ 编号。现在，你知道了在每个时刻 $t$，潜入办公室的员工 $p_t$ 和他在 $t$ 时刻伪造的分配方案 $b_t$。现在给出 $q$ 个询问，每次询问会给出一个老板的初始分配方案，请你计算出最后放在桌面上的分配方案。", "inputFormat": "第一行三个整数 $n$、$q$、$k$，表示时刻的个数、询问的个数和员工的个数；\n\n接下来 $n$ 行，每行 $k+1$ 个整数 $p_t, b_{t,1},\\cdots, b_{t_k}$，表示 $t$ 时刻潜入的员工和他准备的分配方案；\n\n接下来 $q$ 行，每行 $k$ 个整数 $a_1, \\cdots, a_k$，表示老板的初始分配方案。", "outputFormat": "输出 $q$ 行，每行 $k$ 个整数，表示最后的方案。", "hint": "**【子任务】**\n\n存在 20% 的数据，$n,q\\le 1,000$\n\n存在另外 10% 的数据，$k=1$；\n\n对于所有的数据，$n,q\\le 10^5, k\\le 20$。\n\n**【提示】**\n\n本题输入、输出规模较大，建议使用 `scanf/printf` 进行输入输出。如果使用 `cin/cout`，建议在 `main` 函数开头加上 `std::ios::sync_with_stdio(0); std::cin.tie(0); std::cout.tie(0);`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2020] 工资分配", "background": "", "description": "月末，一家公司的老板给公司内的 $k$ 个员工（他们被编号为 $1\\sim k$）准备了一份工资的分配方案。这份方案可以用一个长度为 $k$ 的序列 $a$ 表示，其中 $a_i$ 表示第 $i$ 个人的工资。现在，这份分配方案放在办公室的桌上，无人看管。\n\n一些员工决定通过替换的方式替换掉这份工资分配方案，来使得自己获得更多的工资。于是，一些员工自己准备了一个自行伪造、不会被老板察觉的分配方案 $b$（也是一个长度为 $k$ 的序列），并选择在一个时刻潜入办公室。他会偷看**当前**放在办公桌上的分配方案 $a^{'}$，如果该员工编号为 $i$ 且 $b_i > a^{'}_ i$，他就会把**整个分配方案**替换成 $b$。为了保证替换成功，一个员工可能会在多个时刻潜入办公室，并且可能会伪造不同的分配方案。但同一时刻最多有一个员工潜入办公室。\n\n假设一天总共有 $n$ 个时刻有员工潜入，我们将这些时刻按时间顺序从 $1$ 到 $n$ 编号。现在，你知道了在每个时刻 $t$，潜入办公室的员工 $p_t$ 和他在 $t$ 时刻伪造的分配方案 $b_t$。现在给出 $q$ 个询问，每次询问会给出一个老板的初始分配方案，请你计算出最后放在桌面上的分配方案。", "inputFormat": "第一行三个整数 $n$、$q$、$k$，表示时刻的个数、询问的个数和员工的个数；\n\n接下来 $n$ 行，每行 $k+1$ 个整数 $p_t, b_{t,1},\\cdots, b_{t_k}$，表示 $t$ 时刻潜入的员工和他准备的分配方案；\n\n接下来 $q$ 行，每行 $k$ 个整数 $a_1, \\cdots, a_k$，表示老板的初始分配方案。", "outputFormat": "输出 $q$ 行，每行 $k$ 个整数，表示最后的方案。", "hint": "**【子任务】**\n\n存在 20% 的数据，$n,q\\le 1,000$\n\n存在另外 10% 的数据，$k=1$；\n\n对于所有的数据，$n,q\\le 10^5, k\\le 20$。\n\n**【提示】**\n\n本题输入、输出规模较大，建议使用 `scanf/printf` 进行输入输出。如果使用 `cin/cout`，建议在 `main` 函数开头加上 `std::ios::sync_with_stdio(0); std::cin.tie(0); std::cout.tie(0);`。", "locale": "zh-CN"}}}
{"pid": "P10301", "type": "P", "difficulty": 7, "samples": [["7 8\n3 1 3\n1 2 5\n2 3 2\n6 3 1\n5 2 2\n4 2 1\n7 5 3\n2 2 2\n3\n7 7\n6 2\n6 2\n", "1\n1\n6\n"], ["见附件中的 2.in。", "见附件中的 2.ans。"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "THUWC"], "title": "[THUWC 2020] Yazid 的棋", "background": "", "description": "给定一张包含 $n$ 个点、$m$ 条边的有向图，点标号从 $1$ 至 $n$，边标号从 $1$ 至 $m$。\n\n这张图的主人 Yazid 将先后执行 $Q$ 次操作，每个操作的形式为：在一个节点 $x$ 放置一个棋子，并设定一个整数 $s$，同时该棋子不停地沿着**编号最小**的出边移动，其中当第 $i$ 条边被经过 $w_i$ 次后就会立刻从图中被删除。棋子会不停移动直到**无出边可走**或**棋子已移动了 $s$ 步**。对于最终棋子停留的节点，我们把它叫做这次操作的**终点**。做完这些后，Yazid 会将该棋子移出游戏。\n\n你需要预测 Yazid 每次操作的终点编号。\n\n需要注意的是，所有操作都是有后效性的。也就是说，在前 $Q-1$ 步操作时**消失的边**、**经过的次数**都**不会**在第 $Q$ 次操作时被重置，即下一步操作在上一步操作基础上进行。", "inputFormat": "第一行两个用空格隔开的整数 $n,m$。\n\n接下来 $m$ 行描述有向图。这部分中第 $i$ 行（$1\\leq i\\leq m$）包含三个用空格隔开的整数 $u_i,v_i,w_i$，描述一条 $u_i$ 到 $v_i$ 的经过 $w_i$ 次会被删除的有向边。\n\n* 这里保证 $1\\leq u_i,v_i\\leq n$，$w_i\\leq 10^{18}$。\n\n接下来一行一个整数 $Q$。\n\n接下来 $Q$ 行依次描述各操作，每行两个用空格隔开的整数 $x,s$，描述一个操作。\n\n* 这里保证 $1\\leq x\\leq n$，$1\\leq s\\leq 10^{9}$。", "outputFormat": "输出 $Q$ 行，每行一个整数，依次输出各操作的终点。其中第 $i$ 行输出的是第 $i$ 个操作的终点。", "hint": "**【样例解释 #1】**\n\n第一次操作，棋子的移动步骤如下：\n\n1. 在 $7$ 号节点放置一个棋子。\n2. $7$ 号节点编号最小的出边是第 $7$ 条边，棋子通过该边移动到 $5$ 号节点。\n3. $5$ 号节点编号最小的出边是第 $5$ 条边，棋子通过该边移动到 $2$ 号节点。\n4. $2$ 号节点编号最小的出边是第 $3$ 条边，棋子通过该边移动到 $3$ 号节点。\n5. $3$ 号节点编号最小的出边是第 $1$ 条边，棋子通过该边移动到 $1$ 号节点。\n6. $1$ 号节点编号最小的出边是第 $2$ 条边，棋子通过该边移动到 $2$ 号节点。\n7. $2$ 号节点编号最小的出边是第 $3$ 条边，棋子通过该边移动到 $3$ 号节点。此时，第 $3$ 条边已被经过了 $2$ 次，被从图中删去。\n8. $3$ 号节点编号最小的出边是第 $1$ 条边，棋子通过该边移动到 $1$ 号节点。\n9. 棋子停留在 $1$ 号节点，故 $1$ 号节点就是此次操作的终点。\n\n第二次操作，棋子的移动步骤如下：\n\n1. 在 $6$ 号节点放置一个棋子。\n2. $6$ 号节点编号最小的出边是第 $4$ 条边，棋子通过该边移动到 $3$ 号节点。此时，第 $4$ 条边已被经过了 $1$ 次，被从图中删去。\n3. $3$ 号节点编号最小的出边是第 $1$ 条边，棋子通过该边移动到 $1$ 号节点。此时，第 $1$ 条边已被经过了 $1$ 次，被从图中删去。\n4. 棋子已移动了 $7$ 步，故停留在 $1$ 号节点，$1$ 号节点是此次操作的终点。\n\n第三次操作，棋子的移动步骤如下：\n\n1. 在 $6$ 号节点放置一个棋子。\n2. $6$ 号节点已没有出边，故棋子只能停留在 $6$ 号节点，故 $6$ 号节点是此次操作的终点。\n\n**【子任务】**\n\n本题有多个子任务，每个子任务可能包含多个测试点，只有通过了一个子任务中的所有测试点才能得到该子任务的分数。\n\n每个子任务的测试点满足一些特殊的限制，具体如下表：\n\n \n\t\n\n|子任务编号|$n \\le$|$m \\le$|$Q \\le$|$s \\le$|$w \\le$|性质|分值|\n|----|----|----|----|----|----|----|----|\n|1|$10^5$|$1.5 \\times 10^5$|$5000$|$5000$|$10^{18}$|$0$|8|\n|2|$10^5$|$1.5 \\times 10^5$|$5000$|$10^9$|$5000$|$0$|8|\n|3|$10^5$|$1.5 \\times 10^5$|$10^5$|$10^9$|$10^{18}$|$1$|8|\n|4|$10^5$|$1.5 \\times 10^5$|$10^5$|$10^9$|$10^{18}$|$2$|$12$|\n|5|$10^5$|$n - 1$|$10^5$|$10^9$|$10^{18}$|$3$|13|\n|6|$10^5$|$n$|$10^5$|$10^9$|$10^{18}$|$4$|15|\n|7|$10^5$|$n + 50$|$10^5$|$10^9$|$10^{18}$|$5$|8|\n|8|$10^5$|$1.5 \\times 10^5$|$10^5$|$10^9$|$10^{18}$|$0$|28|\n \n\n对于所有测试点，保证 $1 \\leq n\\leq 10^5$，$1 \\leq m\\leq 1.5\\times 10^5$，$1 \\leq Q \\leq 10^5$，$1 \\leq s \\leq 10^9$，$1 \\leq w_i \\leq 10^{18}$。\n\n- 性质 0：无特殊性质；\n- 性质 1：图为随机生成，每条边 $(u, v)$ 出现的概率为 $1 / n^2$；\n- 性质 2：保证 $w_i = 10^{18}$；\n- 性质 3：保证图构成了一棵有根树。\n- 性质 4：保证图构成了一棵环套树。\n- 性质 5：保证前 $n$ 条边构成了一棵环套树。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2020] Yazid 的棋", "background": "", "description": "给定一张包含 $n$ 个点、$m$ 条边的有向图，点标号从 $1$ 至 $n$，边标号从 $1$ 至 $m$。\n\n这张图的主人 Yazid 将先后执行 $Q$ 次操作，每个操作的形式为：在一个节点 $x$ 放置一个棋子，并设定一个整数 $s$，同时该棋子不停地沿着**编号最小**的出边移动，其中当第 $i$ 条边被经过 $w_i$ 次后就会立刻从图中被删除。棋子会不停移动直到**无出边可走**或**棋子已移动了 $s$ 步**。对于最终棋子停留的节点，我们把它叫做这次操作的**终点**。做完这些后，Yazid 会将该棋子移出游戏。\n\n你需要预测 Yazid 每次操作的终点编号。\n\n需要注意的是，所有操作都是有后效性的。也就是说，在前 $Q-1$ 步操作时**消失的边**、**经过的次数**都**不会**在第 $Q$ 次操作时被重置，即下一步操作在上一步操作基础上进行。", "inputFormat": "第一行两个用空格隔开的整数 $n,m$。\n\n接下来 $m$ 行描述有向图。这部分中第 $i$ 行（$1\\leq i\\leq m$）包含三个用空格隔开的整数 $u_i,v_i,w_i$，描述一条 $u_i$ 到 $v_i$ 的经过 $w_i$ 次会被删除的有向边。\n\n* 这里保证 $1\\leq u_i,v_i\\leq n$，$w_i\\leq 10^{18}$。\n\n接下来一行一个整数 $Q$。\n\n接下来 $Q$ 行依次描述各操作，每行两个用空格隔开的整数 $x,s$，描述一个操作。\n\n* 这里保证 $1\\leq x\\leq n$，$1\\leq s\\leq 10^{9}$。", "outputFormat": "输出 $Q$ 行，每行一个整数，依次输出各操作的终点。其中第 $i$ 行输出的是第 $i$ 个操作的终点。", "hint": "**【样例解释 #1】**\n\n第一次操作，棋子的移动步骤如下：\n\n1. 在 $7$ 号节点放置一个棋子。\n2. $7$ 号节点编号最小的出边是第 $7$ 条边，棋子通过该边移动到 $5$ 号节点。\n3. $5$ 号节点编号最小的出边是第 $5$ 条边，棋子通过该边移动到 $2$ 号节点。\n4. $2$ 号节点编号最小的出边是第 $3$ 条边，棋子通过该边移动到 $3$ 号节点。\n5. $3$ 号节点编号最小的出边是第 $1$ 条边，棋子通过该边移动到 $1$ 号节点。\n6. $1$ 号节点编号最小的出边是第 $2$ 条边，棋子通过该边移动到 $2$ 号节点。\n7. $2$ 号节点编号最小的出边是第 $3$ 条边，棋子通过该边移动到 $3$ 号节点。此时，第 $3$ 条边已被经过了 $2$ 次，被从图中删去。\n8. $3$ 号节点编号最小的出边是第 $1$ 条边，棋子通过该边移动到 $1$ 号节点。\n9. 棋子停留在 $1$ 号节点，故 $1$ 号节点就是此次操作的终点。\n\n第二次操作，棋子的移动步骤如下：\n\n1. 在 $6$ 号节点放置一个棋子。\n2. $6$ 号节点编号最小的出边是第 $4$ 条边，棋子通过该边移动到 $3$ 号节点。此时，第 $4$ 条边已被经过了 $1$ 次，被从图中删去。\n3. $3$ 号节点编号最小的出边是第 $1$ 条边，棋子通过该边移动到 $1$ 号节点。此时，第 $1$ 条边已被经过了 $1$ 次，被从图中删去。\n4. 棋子已移动了 $7$ 步，故停留在 $1$ 号节点，$1$ 号节点是此次操作的终点。\n\n第三次操作，棋子的移动步骤如下：\n\n1. 在 $6$ 号节点放置一个棋子。\n2. $6$ 号节点已没有出边，故棋子只能停留在 $6$ 号节点，故 $6$ 号节点是此次操作的终点。\n\n**【子任务】**\n\n本题有多个子任务，每个子任务可能包含多个测试点，只有通过了一个子任务中的所有测试点才能得到该子任务的分数。\n\n每个子任务的测试点满足一些特殊的限制，具体如下表：\n\n \n\t\n\n|子任务编号|$n \\le$|$m \\le$|$Q \\le$|$s \\le$|$w \\le$|性质|分值|\n|----|----|----|----|----|----|----|----|\n|1|$10^5$|$1.5 \\times 10^5$|$5000$|$5000$|$10^{18}$|$0$|8|\n|2|$10^5$|$1.5 \\times 10^5$|$5000$|$10^9$|$5000$|$0$|8|\n|3|$10^5$|$1.5 \\times 10^5$|$10^5$|$10^9$|$10^{18}$|$1$|8|\n|4|$10^5$|$1.5 \\times 10^5$|$10^5$|$10^9$|$10^{18}$|$2$|$12$|\n|5|$10^5$|$n - 1$|$10^5$|$10^9$|$10^{18}$|$3$|13|\n|6|$10^5$|$n$|$10^5$|$10^9$|$10^{18}$|$4$|15|\n|7|$10^5$|$n + 50$|$10^5$|$10^9$|$10^{18}$|$5$|8|\n|8|$10^5$|$1.5 \\times 10^5$|$10^5$|$10^9$|$10^{18}$|$0$|28|\n \n\n对于所有测试点，保证 $1 \\leq n\\leq 10^5$，$1 \\leq m\\leq 1.5\\times 10^5$，$1 \\leq Q \\leq 10^5$，$1 \\leq s \\leq 10^9$，$1 \\leq w_i \\leq 10^{18}$。\n\n- 性质 0：无特殊性质；\n- 性质 1：图为随机生成，每条边 $(u, v)$ 出现的概率为 $1 / n^2$；\n- 性质 2：保证 $w_i = 10^{18}$；\n- 性质 3：保证图构成了一棵有根树。\n- 性质 4：保证图构成了一棵环套树。\n- 性质 5：保证前 $n$ 条边构成了一棵环套树。", "locale": "zh-CN"}}}
{"pid": "P10302", "type": "P", "difficulty": 7, "samples": [["10 9 2\n1 1 1 2 3 4 1 1 1\n1 3\n2 4\n3 5\n4 6\n5 7\n6 8\n7 9\n8 10\n5 5\n", "1\n1\n2\n3\n3\n3\n2\n1\n1\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "THUWC"], "title": "[THUWC 2020] 某科学的动态仙人掌", "background": "", "description": "题目名是吸引你点进来的。\n\n给一棵边权为 $1$ 的树和一个常数 $X$，节点用 $1$ 到 $n$ 的整数表示。\n\n定义 $dist(a,b)$ 为节点 $a,b$ 在树上的距离，即 $a$ 到 $b$ 的简单路径上的边权和，特别地，$dist(a,a) = 0$。  \n\n每次查询的时候给出一个区间 $[l,r]$，查询有多少个 $X$-块，定义如下：  \n\n对任意两个节点 $a,b$，定义 $a,b$ 是 $X$-连通的，当且仅当存在一个长为 $t$ 的节点序列 $\\{v_i\\}$，其中 $t$ 可以是任意正整数，满足：  \n\n1. $v_1=a$；  \n2. $v_t=b$；  \n3. 对任意 $1\\le i\\le t-1$，$dist(v_i,v_{i+1})\\le X$； \n4. 对任意 $1\\le i\\le t$，$l\\le v_i\\le r$。  \n\n定义“$X$-块”为一个点集 $S$，满足：  \n\n1. 对任意 $a$ 属于 $S$，$b$ 属于 $S$ 的补集且 $l\\le b \\le r$，$a,b$ 不是 X-连通的；\n2. 对任意 $a,b$ 属于 $S$，$a$ 和 $b$ 是 X-连通的；\n3. 对任意 $a$ 属于 $S$，有 $l\\le a \\le r$。", "inputFormat": "第一行三个整数 $n$，$m$，$X$ 依次表示树的节点个数，询问次数，还有常数 $X$；\n\n第二行共 $n-1$ 个整数 $p_2\\;p_3\\;\\dots\\;p_n$，表示对于 $2 \\le i\\le n$ 的整数 $i$，$i$ 和 $p_i$ 之间有一条无向边；\n\n保证输入的数据构成一棵树；\n\n之后 $m$ 行，每行两个整数 $l\\;\\;r$，表示这次询问的区间是 $[l,r]$，保证 $l \\le r$；\n\n保证 $1 \\le n\\le 3\\cdot 10^5$，$1 \\le m\\le 6\\cdot 10^5$。", "outputFormat": "共 $m$ 行，依次回答各组询问：每行输出一行一个整数表示这组询问的答案。", "hint": "本题有多个子任务，每个子任务可能包含多个测试点，只有通过了一个子任务中的所有测试点才能得到该子任务的分数。\n\n每个子任务的测试点满足一些特殊的限制，具体如下表：\n\n|子任务|分数|$n$|$m$|$X$|性质 1|性质 2|\n|:----:|:----:|:----:|:----:|:----:|:----:|:----:|\n|$1$|$4$|$100$|$100$|$10$|否|否|\n|$2$|$4$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$299999$|否|否|\n|$3$|$16$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$299900$|否|否|\n|$4$|$4$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$1$|否|否|\n|$5$|$8$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$2$|否|否|\n|$6$|$8$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$3$|否|否|\n|$7$|$8$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$4$|否|否|\n|$8$|$8$|$1\\times 10 ^ 5$|$1\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|是|否|\n|$9$|$4$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|是|否|\n|$10$|$8$|$3\\times 10 ^ 5$|$3\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|否|是|\n|$11$|$4$|$3\\times 10 ^ 5$|$3\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|是|是|\n|$12$|$8$|$1\\times 10 ^ 5$|$2\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|否|否|\n|$13$|$8$|$2\\times 10 ^ 5$|$4\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|否|否|\n|$14$|$8$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|否|否|\n \n\n其中，性质 1、性质 2 的含义如下：\n\n性质 1：存在一个点 $w$ 使得 $dist(1,w)=n-1$；\n\n性质 2：$n=m$，且第 $i$ 次询问为 $l=1,\\;r=i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2020] 某科学的动态仙人掌", "background": "", "description": "题目名是吸引你点进来的。\n\n给一棵边权为 $1$ 的树和一个常数 $X$，节点用 $1$ 到 $n$ 的整数表示。\n\n定义 $dist(a,b)$ 为节点 $a,b$ 在树上的距离，即 $a$ 到 $b$ 的简单路径上的边权和，特别地，$dist(a,a) = 0$。  \n\n每次查询的时候给出一个区间 $[l,r]$，查询有多少个 $X$-块，定义如下：  \n\n对任意两个节点 $a,b$，定义 $a,b$ 是 $X$-连通的，当且仅当存在一个长为 $t$ 的节点序列 $\\{v_i\\}$，其中 $t$ 可以是任意正整数，满足：  \n\n1. $v_1=a$；  \n2. $v_t=b$；  \n3. 对任意 $1\\le i\\le t-1$，$dist(v_i,v_{i+1})\\le X$； \n4. 对任意 $1\\le i\\le t$，$l\\le v_i\\le r$。  \n\n定义“$X$-块”为一个点集 $S$，满足：  \n\n1. 对任意 $a$ 属于 $S$，$b$ 属于 $S$ 的补集且 $l\\le b \\le r$，$a,b$ 不是 X-连通的；\n2. 对任意 $a,b$ 属于 $S$，$a$ 和 $b$ 是 X-连通的；\n3. 对任意 $a$ 属于 $S$，有 $l\\le a \\le r$。", "inputFormat": "第一行三个整数 $n$，$m$，$X$ 依次表示树的节点个数，询问次数，还有常数 $X$；\n\n第二行共 $n-1$ 个整数 $p_2\\;p_3\\;\\dots\\;p_n$，表示对于 $2 \\le i\\le n$ 的整数 $i$，$i$ 和 $p_i$ 之间有一条无向边；\n\n保证输入的数据构成一棵树；\n\n之后 $m$ 行，每行两个整数 $l\\;\\;r$，表示这次询问的区间是 $[l,r]$，保证 $l \\le r$；\n\n保证 $1 \\le n\\le 3\\cdot 10^5$，$1 \\le m\\le 6\\cdot 10^5$。", "outputFormat": "共 $m$ 行，依次回答各组询问：每行输出一行一个整数表示这组询问的答案。", "hint": "本题有多个子任务，每个子任务可能包含多个测试点，只有通过了一个子任务中的所有测试点才能得到该子任务的分数。\n\n每个子任务的测试点满足一些特殊的限制，具体如下表：\n\n|子任务|分数|$n$|$m$|$X$|性质 1|性质 2|\n|:----:|:----:|:----:|:----:|:----:|:----:|:----:|\n|$1$|$4$|$100$|$100$|$10$|否|否|\n|$2$|$4$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$299999$|否|否|\n|$3$|$16$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$299900$|否|否|\n|$4$|$4$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$1$|否|否|\n|$5$|$8$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$2$|否|否|\n|$6$|$8$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$3$|否|否|\n|$7$|$8$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$4$|否|否|\n|$8$|$8$|$1\\times 10 ^ 5$|$1\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|是|否|\n|$9$|$4$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|是|否|\n|$10$|$8$|$3\\times 10 ^ 5$|$3\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|否|是|\n|$11$|$4$|$3\\times 10 ^ 5$|$3\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|是|是|\n|$12$|$8$|$1\\times 10 ^ 5$|$2\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|否|否|\n|$13$|$8$|$2\\times 10 ^ 5$|$4\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|否|否|\n|$14$|$8$|$3\\times 10 ^ 5$|$6\\times 10 ^ 5$|$\\le 3\\times 10 ^ 5$|否|否|\n \n\n其中，性质 1、性质 2 的含义如下：\n\n性质 1：存在一个点 $w$ 使得 $dist(1,w)=n-1$；\n\n性质 2：$n=m$，且第 $i$ 次询问为 $l=1,\\;r=i$。", "locale": "zh-CN"}}}
{"pid": "P10303", "type": "P", "difficulty": 6, "samples": [["2 3\n0 1 1\n0 2 0\n", "8\n"], ["1 -2\n8 -4 1\n", "25\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "THUWC"], "title": "[THUWC 2020] 报告顺序", "background": "", "description": "Yazid 今天要听 $n$ 个人做报告，方便起见，我们把这些人从 $1$ 至 $n$ 编号。\n\nYazid 有一个兴奋度，初始为 $s$，这个值会随着报告的进行而改变。\n\n第 $i$ 个人（$1\\leq i\\leq n$）的报告可以用三个数 $a_i,b_i,c_i$ 来描述，这表示假设听他的报告前，Yazid 的兴奋度为 $x$，那么听完他的报告后，Yazid 的兴奋度将会变成 $a\\lvert x\\rvert+bx+c$。\n\nYazid 还要参加期末考试，因此他希望听完报告后尽可能兴奋。因此，你的任务是帮助 Yazid 安排确定所有人的报告顺序，使得 Yazid 在所有人报告完后兴奋度最大。", "inputFormat": "第一行两个用空格隔开的整数 $n,s$。\n\n接下来 $n$ 行描述 $n$ 个人的报告。这部分的第 $i$ 行为三个空格隔开的整数 $a_i,b_i,c_i$。", "outputFormat": "输出一行一个整数，表示听完所有人的报告后，Yazid 最大的兴奋度。", "hint": "**【样例解释 #1】**\n\n如果 Yazid 先听第一个人的报告，再听第二个人的报告，那么最后的兴奋度是 $(3+1)\\times2=8$；\n\n如果 Yazid 先听第二个人的报告，再听第一个人的报告，那么最后的兴奋度是 $(3\\times 2)+1=7$。\n\n所以最大的兴奋度为 $8$。\n\n**【样例解释 #2】**\n\n只有一场报告，Yazid 初始兴奋度为 $-2$，那么听完报告之后的兴奋度为 $8\\times \\lvert -2 \\rvert+(-4)\\times (-2)+1=25$。\n\n**【子任务】**\n\n子任务 1（13 分）：$n \\le 10$；\n\n子任务 2（19 分）：$c_i = 0$；\n\n子任务 3（23 分）：$a_i=0$；\n\n子任务 4（45 分）：无特殊限制。\n\n对于所有测试点，保证 $n\\leq 15$，保证 $a,b,c,s$ 的绝对值均**不超过** $15$。\n\n**【提示】**\n\n在数据规模限制下，答案将不超过 $128$ 位有符号整数的范围，因此你可以尝试使用 `__int128` 来帮助实现你的算法。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2020] 报告顺序", "background": "", "description": "Yazid 今天要听 $n$ 个人做报告，方便起见，我们把这些人从 $1$ 至 $n$ 编号。\n\nYazid 有一个兴奋度，初始为 $s$，这个值会随着报告的进行而改变。\n\n第 $i$ 个人（$1\\leq i\\leq n$）的报告可以用三个数 $a_i,b_i,c_i$ 来描述，这表示假设听他的报告前，Yazid 的兴奋度为 $x$，那么听完他的报告后，Yazid 的兴奋度将会变成 $a\\lvert x\\rvert+bx+c$。\n\nYazid 还要参加期末考试，因此他希望听完报告后尽可能兴奋。因此，你的任务是帮助 Yazid 安排确定所有人的报告顺序，使得 Yazid 在所有人报告完后兴奋度最大。", "inputFormat": "第一行两个用空格隔开的整数 $n,s$。\n\n接下来 $n$ 行描述 $n$ 个人的报告。这部分的第 $i$ 行为三个空格隔开的整数 $a_i,b_i,c_i$。", "outputFormat": "输出一行一个整数，表示听完所有人的报告后，Yazid 最大的兴奋度。", "hint": "**【样例解释 #1】**\n\n如果 Yazid 先听第一个人的报告，再听第二个人的报告，那么最后的兴奋度是 $(3+1)\\times2=8$；\n\n如果 Yazid 先听第二个人的报告，再听第一个人的报告，那么最后的兴奋度是 $(3\\times 2)+1=7$。\n\n所以最大的兴奋度为 $8$。\n\n**【样例解释 #2】**\n\n只有一场报告，Yazid 初始兴奋度为 $-2$，那么听完报告之后的兴奋度为 $8\\times \\lvert -2 \\rvert+(-4)\\times (-2)+1=25$。\n\n**【子任务】**\n\n子任务 1（13 分）：$n \\le 10$；\n\n子任务 2（19 分）：$c_i = 0$；\n\n子任务 3（23 分）：$a_i=0$；\n\n子任务 4（45 分）：无特殊限制。\n\n对于所有测试点，保证 $n\\leq 15$，保证 $a,b,c,s$ 的绝对值均**不超过** $15$。\n\n**【提示】**\n\n在数据规模限制下，答案将不超过 $128$ 位有符号整数的范围，因此你可以尝试使用 `__int128` 来帮助实现你的算法。", "locale": "zh-CN"}}}
{"pid": "P10304", "type": "P", "difficulty": 6, "samples": [["3 3 2\n1 2\n2 3\n1 3\n1 2\n1 3\n", "1\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "THUWC"], "title": "[THUWC 2020] 道路修建", "background": "", "description": "$A$ 国是一个古老的国家。这个国家分布着 $n$ 个城市，城市由 $1 \\sim n$ 编号。其中，$1$ 号城市是这个国家的首都，也是国家里唯一有港口的城市。进口的货物从首都的港口运入，再运送向其它城市。\n\n为了方便进口货物的运送，$A$ 国国王打算修建若干条单向道路专门用于运送货物。很快，$A$ 国的大臣们给出了一个道路修建方案：这个方案由 $m$ 条单向道路组成，通过这些道路可以从 $1$ 号城市到达国家内的其它任意一个城市。非常特殊的是，这 $m$ 条道路构成的道路网络不存在环。\n\n由于财政状况不允许，$A$ 国国王打算从 $m$ 条道路中先选择 $n-1$ 条进行修建，以保证基本的货物运输能力。他使用了一种类似于深度优先搜索的方法确定出优先修建的 $n-1$ 条道路：\n\n首先，令集合 $S$ 为仅包含 $1$ 号城市的集合，并设置当前城市 $u$ 为 $1$ 号城市。\n\n然后，选择一条以当前城市 $u$ 为出发点、一个不在集合 $S$ 内的城市 $v$ 为终点的道路，将该道路标记为优先修建的道路，将城市 $v$ 加入 $S$ 集合，并将城市 $v$ 的父亲设置为当前城市 $u$。\n\n最后，将当前城市 $u$ 修改为城市 $v$。如果城市 $v$ 的选择有多个，则选择城市编号最小的一个；如果没有可以选择的城市 $v$，则将当前城市 $u$ 修改为 $u$ 的父亲。\n\n重复上述操作，直到所有城市被加入 $S$ 集合时停止。\n\n可以发现，上述步骤恰好可以选出被优先修建的 $n - 1$ 条道路，并且这些优先修建的道路可以构成一个以首都为根的树型结构。我们称这些被优先修建的道路为树上道路。\n\n随着经济的发展，$A$ 国逐渐完成了 $m$ 条道路构成的道路网。但其中，树上道路由于修建年代较早，时常需要进行维护。$A$ 国的大臣们提出了 $q$ 个可能的维护计划，每个修建计划需要同时维护城市 $a$ 与城市 $b$ 之间的所有树上道路，并且保证城市 $a$ 是城市 $b$ 在树上的祖先。这样的维护计划会对城市 $b$ 为根的子树产生很大的影响，$A$ 国国王希望你帮忙评估每个可能的维护计划——计算在城市 $a$ 与城市 $b$ 之间的所有树上道路不能使用时，从首都出发，有多少个在以城市 $b$ 为根的子树内的城市将不能到达？", "inputFormat": "第一行三个整数 $n,m,q$，分别表示 $A$ 国的城市数量、道路修建方案的道路数量、维护计划的数量。\n\n接下来 $m$ 行，每行两个整数 $x, y$，表示修建方案中一条从$x$到$y$的单向道路。\n\n接下来 $q$ 行，每行两个整数 $a,b$，表示一个维护计划。\n\n输入数据保证：\n\n1. 给定的道路修建方案保证从首都出发能到达 $A$ 国的每个城市，并且该方案中不存在环。\n2. 任意两个城市之间的道路至多出现一条，每条道路两端的城市编号不同。\n3. 每个维护计划中的城市 $a$ 保证是城市 $b$ 在树上道路构成的树结构中的某个祖先。", "outputFormat": "输出 $q$ 行，每行一个整数，表示在每个维护计划下，从首都出发，有多少个在以城市 $b$ 为根的子树内的城市将不能到达。", "hint": "**【子任务】**\n\n|子任务编号|分值|特殊限制|\n|:----:|:----:|:----:|\n|$1$|$20$|$n,q\\leq 1000$，$m\\leq 1500$|\n|$2$|$23$|保证维护计划的城市 $a$ 是城市 $b$ 的父亲|\n|$3$|$11$|$m=n$|\n|$4$|$19$|保证维护计划满足 $a=1$|\n|$5$|$27$|无|\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,q \\leq 10 ^ 5$，$1\\leq m \\leq 1.5 \\times 10 ^ 5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2020] 道路修建", "background": "", "description": "$A$ 国是一个古老的国家。这个国家分布着 $n$ 个城市，城市由 $1 \\sim n$ 编号。其中，$1$ 号城市是这个国家的首都，也是国家里唯一有港口的城市。进口的货物从首都的港口运入，再运送向其它城市。\n\n为了方便进口货物的运送，$A$ 国国王打算修建若干条单向道路专门用于运送货物。很快，$A$ 国的大臣们给出了一个道路修建方案：这个方案由 $m$ 条单向道路组成，通过这些道路可以从 $1$ 号城市到达国家内的其它任意一个城市。非常特殊的是，这 $m$ 条道路构成的道路网络不存在环。\n\n由于财政状况不允许，$A$ 国国王打算从 $m$ 条道路中先选择 $n-1$ 条进行修建，以保证基本的货物运输能力。他使用了一种类似于深度优先搜索的方法确定出优先修建的 $n-1$ 条道路：\n\n首先，令集合 $S$ 为仅包含 $1$ 号城市的集合，并设置当前城市 $u$ 为 $1$ 号城市。\n\n然后，选择一条以当前城市 $u$ 为出发点、一个不在集合 $S$ 内的城市 $v$ 为终点的道路，将该道路标记为优先修建的道路，将城市 $v$ 加入 $S$ 集合，并将城市 $v$ 的父亲设置为当前城市 $u$。\n\n最后，将当前城市 $u$ 修改为城市 $v$。如果城市 $v$ 的选择有多个，则选择城市编号最小的一个；如果没有可以选择的城市 $v$，则将当前城市 $u$ 修改为 $u$ 的父亲。\n\n重复上述操作，直到所有城市被加入 $S$ 集合时停止。\n\n可以发现，上述步骤恰好可以选出被优先修建的 $n - 1$ 条道路，并且这些优先修建的道路可以构成一个以首都为根的树型结构。我们称这些被优先修建的道路为树上道路。\n\n随着经济的发展，$A$ 国逐渐完成了 $m$ 条道路构成的道路网。但其中，树上道路由于修建年代较早，时常需要进行维护。$A$ 国的大臣们提出了 $q$ 个可能的维护计划，每个修建计划需要同时维护城市 $a$ 与城市 $b$ 之间的所有树上道路，并且保证城市 $a$ 是城市 $b$ 在树上的祖先。这样的维护计划会对城市 $b$ 为根的子树产生很大的影响，$A$ 国国王希望你帮忙评估每个可能的维护计划——计算在城市 $a$ 与城市 $b$ 之间的所有树上道路不能使用时，从首都出发，有多少个在以城市 $b$ 为根的子树内的城市将不能到达？", "inputFormat": "第一行三个整数 $n,m,q$，分别表示 $A$ 国的城市数量、道路修建方案的道路数量、维护计划的数量。\n\n接下来 $m$ 行，每行两个整数 $x, y$，表示修建方案中一条从$x$到$y$的单向道路。\n\n接下来 $q$ 行，每行两个整数 $a,b$，表示一个维护计划。\n\n输入数据保证：\n\n1. 给定的道路修建方案保证从首都出发能到达 $A$ 国的每个城市，并且该方案中不存在环。\n2. 任意两个城市之间的道路至多出现一条，每条道路两端的城市编号不同。\n3. 每个维护计划中的城市 $a$ 保证是城市 $b$ 在树上道路构成的树结构中的某个祖先。", "outputFormat": "输出 $q$ 行，每行一个整数，表示在每个维护计划下，从首都出发，有多少个在以城市 $b$ 为根的子树内的城市将不能到达。", "hint": "**【子任务】**\n\n|子任务编号|分值|特殊限制|\n|:----:|:----:|:----:|\n|$1$|$20$|$n,q\\leq 1000$，$m\\leq 1500$|\n|$2$|$23$|保证维护计划的城市 $a$ 是城市 $b$ 的父亲|\n|$3$|$11$|$m=n$|\n|$4$|$19$|保证维护计划满足 $a=1$|\n|$5$|$27$|无|\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,q \\leq 10 ^ 5$，$1\\leq m \\leq 1.5 \\times 10 ^ 5$。", "locale": "zh-CN"}}}
{"pid": "P10305", "type": "P", "difficulty": 7, "samples": [["4 4\n1 3 2 4\n1 2\n2 3\n3 4\n1 1 1\n1 2 1\n1 3 1\n1 4 1\n", "1\n2\n0\n4\n"], ["见附件中的 2.in。", "见附件中的 2.ans。"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "THUWC"], "title": "[THUWC 2020] 序排泡冒", "background": "> You are given a peach tree $T$. \n>\n> You don't need to think of the peach.\n>\n> Because I'm going to talk about the tree.", "description": "**冒泡排序算法**是一种广为人知的排序算法，其思路在于不断地交换相邻且逆序的两个元素，由于总的逆序对个数不断减少，冒泡排序算法一定可以终止。给 $a[0], a[1], \\dots, a[n-1]$ **从小到大排序**的冒泡排序算法可以用下面的伪代码描述。\n\n```cpp\nfor (int i = 1; i <= k; i++)\n    for (int j = 0; j < n-1; j++)\n        if (a[j] > a[j+1]) {\n            tmp = a[j];\n            a[j] = a[j+1];\n            a[j+1] = tmp;\n        }\n```\n\n其中 $k$ 称为冒泡排序进行的轮数，当 $k$ 取 $n$ 时，便可以保证序列被从小到大排序。\n\n**序排泡冒算法**是一种鲜为人知的序排算法，其作用是给定一个长度为 $n$ 的序列 $a$ 和参数 $k$，输出所有可能的序列 $b$，满足其经过 $k$ 轮冒泡排序之后成为序列 $a$。\n\n给定一棵树 $T$，结点用 $1,2, \\dots, n$ 编号。每一个结点 $u$ 有一个点权 $p(u)$，保证 $p(1), p(2), \\dots, p(n)$ 构成了 $\\{1,2,\\dots,n\\}$ 的一个排列。换言之，满足\n\n1. 对于 $u\\ne v$，均有 $p(u)\\ne p(v)$；\n2. 对于任意的 $i\\in \\{1, 2, \\dots, n\\}$，均存在一个 $u$ 满足 $p(u)=i$。\n\n对于这棵树，我们将进行 $m$ 次询问，每次询问给出两个结点 $u, v$ 和一个参数 $k$。用 $t_1, t_2, \\dots, t_l$ 表示从 $u$ 到 $v$ 的唯一简单路径上**依次经过的所有结点的点权**组成的序列，可以看出 $t_1$ 就是 $p(u)$，$t_l$ 就是 $p(v)$，你需要计算序列 $t$ 和参数 $k$ 进行序排泡冒后，输出的排列序列个数。换言之，求有多少个序列满足其**经过 $k$ 轮冒泡排序后得到序列 $t$**。\n\n由于答案很大，你只需要输出其对 $998,244,353$ 取模的结果（也就是说，输出答案除以 $998,244,353$ 的余数）。", "inputFormat": "第一行包含两个用空格分隔的自然数 $n, m$，表示结点个数和询问个数。\n\n接下来的一行包含 $n$ 用空格分隔的整数 $p(1), p(2), \\dots, p(n)$，表示每个点的点权。\n\n接下来 $n-1$ 行每行包含两个数 $x_i, y_i$，表示树上存在一条连接 $x_i$ 和 $y_i$ 上的边。输入的数据保证所有的边构成一棵树。\n\n接下来 $m$ 行每行包含一个询问 $u_i, v_i, k_i$，其意义在题目描述中已经说明。", "outputFormat": "输出包含 $m$ 行，第 $i$ 行包含一个整数，表示第 $i$ 个询问的答案对 $998,244,353$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n在这组样例中，树构成了一个长度为 $4$ 的链。\n\n1. 对于第一次询问，经过的结点序列为 $[1]$，点权序列为 $[1]$，序排泡冒输出 $\\{[1]\\}$。\n2. 对于第二次询问，经过的结点序列为 $[1,2]$，点权序列为 $[1,3]$，序排泡冒输出 $\\{[1,3], [3,1]\\}$。\n3. 对于第三次询问，经过的结点序列为 $[1,2,3]$，点权序列为 $[1,3,2]$，序排泡冒输出 $\\{\\}$。\n4. 对于第四次询问，经过的结点序列为 $[1,2,3,4]$，点权序列为 $[1,3,2,4]$，序排泡冒输出 $\\{[1,3,4,2], [3,1,4,2], [1,4,3,2], [4,1,3,2]\\}$。\n\n**【子任务】**\n\n|Subtask|$n$|$m$|$k$|Type|Score|\n|:--:|:--:|:--:|:--:|:--:|:--:|\n|$1$|$\\le 5 \\times 10^{5}$|$\\le 5 \\times 10^{5}$|$= 0$|$3$|$1$|\n|$2$|$\\le 10$|$\\le 1$|$\\le n$|$1$|$4$|\n|$3$|$\\le 10$|$\\le 5 \\times 10^{5}$|$\\le n$|$3$|$3$|\n|$4$|$\\le 10^{3}$|$\\le 10^{3}$|$\\le n$|$1$|$10$|\n|$5$|$\\le 5 \\times 10^{5}$|$\\le 5 \\times 10^{5}$|$\\le n$|$1$|$12$|\n|$6$|$\\le 5 \\times 10^{5}$|$\\le 5 \\times 10^{5}$|$\\le n$|$2$|$13$|\n|$7$|$\\le 10^{3}$|$\\le 10^{3}$|$\\le n$|$3$|$5$|\n|$8$|$\\le 10^{5}$|$\\le 10^{5}$|$\\le n$|$3$|$25$|\n|$9$|$\\le 5 \\times 10^{5}$|$\\le 5 \\times 10^{5}$|$\\le n$|$3$|$27$|\n \n\n**对于所有数据，**$1\\le n,m\\le 5\\times 10^5, 0\\le k\\le n$。\n\n**数据类型含义：**\n\n- $\\mathrm{Type}=1$：树构成一条链，即 $x_i = i,y_i=i+1$，并且所有的询问都满足 $u_1=1, v_i=n$。\n- $\\mathrm{Type}=2$：树构成一条链，即 $x_i = i,y_i=i+1$，并且所有的询问都满足 $u_i < v_i$。\n- $\\mathrm{Type} = 3$：无特殊限制。\n\n**【提示】**\n\n> Don't be afraid of the pain in climbing.\n>\n> Your tough journey is just beginning.\n>\n> But the fruit you will gain is not only peaches.\n>\n> Keep counting on the tree! Young gentlemen and ladies.\n>\n> Hope in your heart will lead you to the destiny.", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2020] 序排泡冒", "background": "> You are given a peach tree $T$. \n>\n> You don't need to think of the peach.\n>\n> Because I'm going to talk about the tree.", "description": "**冒泡排序算法**是一种广为人知的排序算法，其思路在于不断地交换相邻且逆序的两个元素，由于总的逆序对个数不断减少，冒泡排序算法一定可以终止。给 $a[0], a[1], \\dots, a[n-1]$ **从小到大排序**的冒泡排序算法可以用下面的伪代码描述。\n\n```cpp\nfor (int i = 1; i <= k; i++)\n    for (int j = 0; j < n-1; j++)\n        if (a[j] > a[j+1]) {\n            tmp = a[j];\n            a[j] = a[j+1];\n            a[j+1] = tmp;\n        }\n```\n\n其中 $k$ 称为冒泡排序进行的轮数，当 $k$ 取 $n$ 时，便可以保证序列被从小到大排序。\n\n**序排泡冒算法**是一种鲜为人知的序排算法，其作用是给定一个长度为 $n$ 的序列 $a$ 和参数 $k$，输出所有可能的序列 $b$，满足其经过 $k$ 轮冒泡排序之后成为序列 $a$。\n\n给定一棵树 $T$，结点用 $1,2, \\dots, n$ 编号。每一个结点 $u$ 有一个点权 $p(u)$，保证 $p(1), p(2), \\dots, p(n)$ 构成了 $\\{1,2,\\dots,n\\}$ 的一个排列。换言之，满足\n\n1. 对于 $u\\ne v$，均有 $p(u)\\ne p(v)$；\n2. 对于任意的 $i\\in \\{1, 2, \\dots, n\\}$，均存在一个 $u$ 满足 $p(u)=i$。\n\n对于这棵树，我们将进行 $m$ 次询问，每次询问给出两个结点 $u, v$ 和一个参数 $k$。用 $t_1, t_2, \\dots, t_l$ 表示从 $u$ 到 $v$ 的唯一简单路径上**依次经过的所有结点的点权**组成的序列，可以看出 $t_1$ 就是 $p(u)$，$t_l$ 就是 $p(v)$，你需要计算序列 $t$ 和参数 $k$ 进行序排泡冒后，输出的排列序列个数。换言之，求有多少个序列满足其**经过 $k$ 轮冒泡排序后得到序列 $t$**。\n\n由于答案很大，你只需要输出其对 $998,244,353$ 取模的结果（也就是说，输出答案除以 $998,244,353$ 的余数）。", "inputFormat": "第一行包含两个用空格分隔的自然数 $n, m$，表示结点个数和询问个数。\n\n接下来的一行包含 $n$ 用空格分隔的整数 $p(1), p(2), \\dots, p(n)$，表示每个点的点权。\n\n接下来 $n-1$ 行每行包含两个数 $x_i, y_i$，表示树上存在一条连接 $x_i$ 和 $y_i$ 上的边。输入的数据保证所有的边构成一棵树。\n\n接下来 $m$ 行每行包含一个询问 $u_i, v_i, k_i$，其意义在题目描述中已经说明。", "outputFormat": "输出包含 $m$ 行，第 $i$ 行包含一个整数，表示第 $i$ 个询问的答案对 $998,244,353$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n在这组样例中，树构成了一个长度为 $4$ 的链。\n\n1. 对于第一次询问，经过的结点序列为 $[1]$，点权序列为 $[1]$，序排泡冒输出 $\\{[1]\\}$。\n2. 对于第二次询问，经过的结点序列为 $[1,2]$，点权序列为 $[1,3]$，序排泡冒输出 $\\{[1,3], [3,1]\\}$。\n3. 对于第三次询问，经过的结点序列为 $[1,2,3]$，点权序列为 $[1,3,2]$，序排泡冒输出 $\\{\\}$。\n4. 对于第四次询问，经过的结点序列为 $[1,2,3,4]$，点权序列为 $[1,3,2,4]$，序排泡冒输出 $\\{[1,3,4,2], [3,1,4,2], [1,4,3,2], [4,1,3,2]\\}$。\n\n**【子任务】**\n\n|Subtask|$n$|$m$|$k$|Type|Score|\n|:--:|:--:|:--:|:--:|:--:|:--:|\n|$1$|$\\le 5 \\times 10^{5}$|$\\le 5 \\times 10^{5}$|$= 0$|$3$|$1$|\n|$2$|$\\le 10$|$\\le 1$|$\\le n$|$1$|$4$|\n|$3$|$\\le 10$|$\\le 5 \\times 10^{5}$|$\\le n$|$3$|$3$|\n|$4$|$\\le 10^{3}$|$\\le 10^{3}$|$\\le n$|$1$|$10$|\n|$5$|$\\le 5 \\times 10^{5}$|$\\le 5 \\times 10^{5}$|$\\le n$|$1$|$12$|\n|$6$|$\\le 5 \\times 10^{5}$|$\\le 5 \\times 10^{5}$|$\\le n$|$2$|$13$|\n|$7$|$\\le 10^{3}$|$\\le 10^{3}$|$\\le n$|$3$|$5$|\n|$8$|$\\le 10^{5}$|$\\le 10^{5}$|$\\le n$|$3$|$25$|\n|$9$|$\\le 5 \\times 10^{5}$|$\\le 5 \\times 10^{5}$|$\\le n$|$3$|$27$|\n \n\n**对于所有数据，**$1\\le n,m\\le 5\\times 10^5, 0\\le k\\le n$。\n\n**数据类型含义：**\n\n- $\\mathrm{Type}=1$：树构成一条链，即 $x_i = i,y_i=i+1$，并且所有的询问都满足 $u_1=1, v_i=n$。\n- $\\mathrm{Type}=2$：树构成一条链，即 $x_i = i,y_i=i+1$，并且所有的询问都满足 $u_i < v_i$。\n- $\\mathrm{Type} = 3$：无特殊限制。\n\n**【提示】**\n\n> Don't be afraid of the pain in climbing.\n>\n> Your tough journey is just beginning.\n>\n> But the fruit you will gain is not only peaches.\n>\n> Keep counting on the tree! Young gentlemen and ladies.\n>\n> Hope in your heart will lead you to the destiny.", "locale": "zh-CN"}}}
{"pid": "P10306", "type": "P", "difficulty": 2, "samples": [["3\n1\n2\n4", "3\n0 5\n2 0 -2 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「Cfz Round 2」How to Prove", "background": "", "description": "给定一个正整数 $n$。\n\n我们定义，对于一个集合 $S$，$\\Omega(S)$ 为集合 $S$ 的所有的 **非空子集的元素和** 所组成的集合。\n\n形式化地，$\\Omega(S)=\\{x\\mid x=\\sum\\limits_{i\\in T}i,T\\subseteq S,T\\neq \\varnothing\\}$。\n\n例如，当 $S=\\{2,0,-3,5\\}$ 时，$\\Omega(S)=\\{-3,-1,0,2,4,5,7\\}$。\n\n你需要构造一个大小为 $n$ 的集合 $S$，满足：\n\n- 集合 $S$ 中的所有元素均为不大于 $10^9$ 且不小于 $-10^9$ 的整数；\n- $|\\Omega(S)|$ 最小，即 $\\Omega(S)$ 所包含的元素个数最少。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行一个正整数 $n$。", "outputFormat": "对于每组测试数据，输出一行 $n$ 个整数，表示你构造的集合 $S$ 中的所有元素。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$S=\\{3\\}$，$\\Omega(S)=\\{3\\}$。当然，$\\{0\\}$、$\\{-2\\}$ 等也为满足条件的集合 $S$。\n\n对于第 $2$ 组数据，$S=\\{0,5\\}$，$\\Omega(S)=\\{0,5\\}$。\n\n对于第 $3$ 组数据，$S=\\{2,0,-2,4\\}$，$\\Omega(S)=\\{-2,0,2,4,6\\}$。\n\n可以证明以上构造均满足条件。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 100$，$1 \\le n \\le 10^6$，$\\sum n \\le 10^6$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 2」How to Prove", "background": "", "description": "给定一个正整数 $n$。\n\n我们定义，对于一个集合 $S$，$\\Omega(S)$ 为集合 $S$ 的所有的 **非空子集的元素和** 所组成的集合。\n\n形式化地，$\\Omega(S)=\\{x\\mid x=\\sum\\limits_{i\\in T}i,T\\subseteq S,T\\neq \\varnothing\\}$。\n\n例如，当 $S=\\{2,0,-3,5\\}$ 时，$\\Omega(S)=\\{-3,-1,0,2,4,5,7\\}$。\n\n你需要构造一个大小为 $n$ 的集合 $S$，满足：\n\n- 集合 $S$ 中的所有元素均为不大于 $10^9$ 且不小于 $-10^9$ 的整数；\n- $|\\Omega(S)|$ 最小，即 $\\Omega(S)$ 所包含的元素个数最少。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行一个正整数 $n$。", "outputFormat": "对于每组测试数据，输出一行 $n$ 个整数，表示你构造的集合 $S$ 中的所有元素。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$S=\\{3\\}$，$\\Omega(S)=\\{3\\}$。当然，$\\{0\\}$、$\\{-2\\}$ 等也为满足条件的集合 $S$。\n\n对于第 $2$ 组数据，$S=\\{0,5\\}$，$\\Omega(S)=\\{0,5\\}$。\n\n对于第 $3$ 组数据，$S=\\{2,0,-2,4\\}$，$\\Omega(S)=\\{-2,0,2,4,6\\}$。\n\n可以证明以上构造均满足条件。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 100$，$1 \\le n \\le 10^6$，$\\sum n \\le 10^6$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10307", "type": "P", "difficulty": 3, "samples": [["5\n2\n0 1 2\n3\n1 3 3 1\n4\n2 2 5 4 2\n5\n7 0 3 4 0 1\n6\n5 2 1 8 6 0 9", "10\n1\n100\n11\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "位运算", "洛谷月赛"], "title": "「Cfz Round 2」Binary", "background": "", "description": "给定 $n + 1$ 个整数 $a_0\\dots a_n$。\n\n对于整数 $u$，设它在二进制下为 $1$ 的位分别为 $k_1, k_2\\dots k_m$，那么它的权值 $f(u) = a_{k_1} \\oplus a_{k_2} \\oplus \\dots \\oplus a_{k_m}$。此处的二进制位的编号从右到左，依次为 $0,1,2\\dots$。其中 $\\oplus$ 表示 [按位异或](https://baike.baidu.com/item/%E5%BC%82%E6%88%96/10993677?fromModule=search-result_lemma-recommend) 符号。\n\n你想要知道有多少个 $0 \\leq u \\leq 2^n - 1$ 使得 $f(u) = f(u + 1)$。为了方便，请你用 **二进制形式** 输出答案（不取模）。\n\n请注意：输出不能包含前导 $0$，除非答案为 $0$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入一个正整数 $n$。\n- 第二行输入 $n + 1$ 个整数 $a_0 \\dots a_n$。", "outputFormat": "对于每组数据，输出一行一个二进制整数，表示答案。\n\n再次提示：输出不能包含前导 $0$，除非答案为 $0$。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，\n\n- $(0)_{10} = (0)_{2}$，所以 $f(0) = 0$；\n- $(1)_{10} = (1)_{2}$，所以 $f(1) = a_0 = 0$；\n- $(2)_{10} = (10)_{2}$，所以 $f(2) = a_1 = 1$；\n- $(3)_{10} = (11)_{2}$，所以 $f(3) = a_0 \\oplus a_1 = 0 \\oplus 1 = 1$；\n- $(4)_{10} = (100)_{2}$，所以 $f(4) = a_2 = 2$。\n\n这其中有 $f(0) = f(1)$，$f(2) = f(3)$，所以输出 $(2)_{10} = (10)_{2}$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\leq T \\leq 10^3$，$1 \\leq n \\leq 2\\times 10^5$，$\\sum n \\leq 6\\times 10^5$，$0 \\leq a_i \\leq 2^{30} - 1$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 2」Binary", "background": "", "description": "给定 $n + 1$ 个整数 $a_0\\dots a_n$。\n\n对于整数 $u$，设它在二进制下为 $1$ 的位分别为 $k_1, k_2\\dots k_m$，那么它的权值 $f(u) = a_{k_1} \\oplus a_{k_2} \\oplus \\dots \\oplus a_{k_m}$。此处的二进制位的编号从右到左，依次为 $0,1,2\\dots$。其中 $\\oplus$ 表示 [按位异或](https://baike.baidu.com/item/%E5%BC%82%E6%88%96/10993677?fromModule=search-result_lemma-recommend) 符号。\n\n你想要知道有多少个 $0 \\leq u \\leq 2^n - 1$ 使得 $f(u) = f(u + 1)$。为了方便，请你用 **二进制形式** 输出答案（不取模）。\n\n请注意：输出不能包含前导 $0$，除非答案为 $0$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入一个正整数 $n$。\n- 第二行输入 $n + 1$ 个整数 $a_0 \\dots a_n$。", "outputFormat": "对于每组数据，输出一行一个二进制整数，表示答案。\n\n再次提示：输出不能包含前导 $0$，除非答案为 $0$。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，\n\n- $(0)_{10} = (0)_{2}$，所以 $f(0) = 0$；\n- $(1)_{10} = (1)_{2}$，所以 $f(1) = a_0 = 0$；\n- $(2)_{10} = (10)_{2}$，所以 $f(2) = a_1 = 1$；\n- $(3)_{10} = (11)_{2}$，所以 $f(3) = a_0 \\oplus a_1 = 0 \\oplus 1 = 1$；\n- $(4)_{10} = (100)_{2}$，所以 $f(4) = a_2 = 2$。\n\n这其中有 $f(0) = f(1)$，$f(2) = f(3)$，所以输出 $(2)_{10} = (10)_{2}$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\leq T \\leq 10^3$，$1 \\leq n \\leq 2\\times 10^5$，$\\sum n \\leq 6\\times 10^5$，$0 \\leq a_i \\leq 2^{30} - 1$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10308", "type": "P", "difficulty": 4, "samples": [["3 3\n3 1 0\n2 2\n1 0\n2 0", "4\n2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "位运算", "洛谷月赛", "Ad-hoc"], "title": "「Cfz Round 2」Osmanthus", "background": "", "description": "给定一个长度为 $n$ 的序列 $a$。\n\n我们定义一次操作为，**同时**将序列 $a$ 中的**每个**元素 $a_i$ 替换为 $\\bigoplus\\limits_{j=1}^i a_j$（即 $a_1$ 至 $a_i$ 的异或和），其中 $\\bigoplus$ 表示**按位异或**，即 C++ 中的 `^`。\n\n现有 $q$ 次有序的修改，每次修改会给定两个整数 $x_i,p_i$，表示将 $a_{x_i}$ 的值修改为 $p_i$。**修改之间并不独立，每次修改会对后续的修改产生影响**。\n\n你需要在每次修改后，找到**最小**的正整数 $t$，满足进行 $t$ 次操作后的序列 $a$ 与操作前的序列 $a$ 相同。可以证明一定存在满足要求的正整数 $t$。\n\n由于答案可能很大，所以你只需要输出答案对 $(10^9+7)$ 取模的结果。", "inputFormat": "第一行输入两个整数 $n,q$。\n\n第二行输入 $n$ 个整数，表示给定的序列 $a$。\n\n接下来 $q$ 行，每行输入两个整数 $x_i,p_i$，表示一次修改。", "outputFormat": "共 $q$ 行，每行输出一个整数，其中第 $i$ 行的整数表示第 $i$ 次修改后，最小的满足要求的正整数 $t$ 对 $(10^9+7)$ 取模的结果。", "hint": "#### 「样例解释 #1」\n\n第 $1$ 次修改后的序列 $a$ 为 $\\{3,2,0\\}$，此时进行 $1$ 次操作后的序列 $a$ 为 $\\{3,1,1\\}$，进行 $2$ 次操作后的序列 $a$ 为 $\\{3,2,3\\}$，进行 $3$ 次操作后的序列 $a$ 为 $\\{3,1,2\\}$，进行 $4$ 次操作后的序列 $a$ 为 $\\{3,2,0\\}$，所以最小的满足要求的正整数 $t$ 为 $4$。\n\n#### 「数据范围」\n\n对于所有数据，$1 \\le n,q \\le 3\\times10^5$，$0 \\le a_i,p_i \\le 10^9$，$1 \\le x_i \\le n$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 2」Osmanthus", "background": "", "description": "给定一个长度为 $n$ 的序列 $a$。\n\n我们定义一次操作为，**同时**将序列 $a$ 中的**每个**元素 $a_i$ 替换为 $\\bigoplus\\limits_{j=1}^i a_j$（即 $a_1$ 至 $a_i$ 的异或和），其中 $\\bigoplus$ 表示**按位异或**，即 C++ 中的 `^`。\n\n现有 $q$ 次有序的修改，每次修改会给定两个整数 $x_i,p_i$，表示将 $a_{x_i}$ 的值修改为 $p_i$。**修改之间并不独立，每次修改会对后续的修改产生影响**。\n\n你需要在每次修改后，找到**最小**的正整数 $t$，满足进行 $t$ 次操作后的序列 $a$ 与操作前的序列 $a$ 相同。可以证明一定存在满足要求的正整数 $t$。\n\n由于答案可能很大，所以你只需要输出答案对 $(10^9+7)$ 取模的结果。", "inputFormat": "第一行输入两个整数 $n,q$。\n\n第二行输入 $n$ 个整数，表示给定的序列 $a$。\n\n接下来 $q$ 行，每行输入两个整数 $x_i,p_i$，表示一次修改。", "outputFormat": "共 $q$ 行，每行输出一个整数，其中第 $i$ 行的整数表示第 $i$ 次修改后，最小的满足要求的正整数 $t$ 对 $(10^9+7)$ 取模的结果。", "hint": "#### 「样例解释 #1」\n\n第 $1$ 次修改后的序列 $a$ 为 $\\{3,2,0\\}$，此时进行 $1$ 次操作后的序列 $a$ 为 $\\{3,1,1\\}$，进行 $2$ 次操作后的序列 $a$ 为 $\\{3,2,3\\}$，进行 $3$ 次操作后的序列 $a$ 为 $\\{3,1,2\\}$，进行 $4$ 次操作后的序列 $a$ 为 $\\{3,2,0\\}$，所以最小的满足要求的正整数 $t$ 为 $4$。\n\n#### 「数据范围」\n\n对于所有数据，$1 \\le n,q \\le 3\\times10^5$，$0 \\le a_i,p_i \\le 10^9$，$1 \\le x_i \\le n$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10309", "type": "P", "difficulty": 4, "samples": [["3\n1 2\n2 3\n665496238", "1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "树的直径", "树论", "构造", "洛谷月赛"], "title": "「Cfz Round 2」Max of Distance", "background": "", "description": "给定一棵包含 $n$ 个结点的树 $G$ 和一个整数 $E$。\n\n你需要构造树 $G$ 中每条边的整数边权 $w_i$，满足：\n\n- $1 \\le w_i \\le 10^9$；\n- 均匀随机选择一个结点 $u$，$\\max\\limits_{v=1}^n\\operatorname{dis}(u,v)$ 的期望对 $998244353$ 取模的值等于 $E$；\n\n或报告无解。\n\n其中，$\\operatorname{dis}(u,v)$ 表示结点 $u,v$ 之间简单路径上的边权和。\n\n如果你不知道如何计算期望对 $998244353$ 取模的结果，请移步 [P2613 【模板】有理数取余](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "第一行输入一个整数 $n$。\n\n接下来 $n-1$ 行，每行输入两个正整数 $u_i,v_i$，表示树 $G$ 中结点 $u_i,v_i$ 之间存在一条边 $(u_i,v_i)$。\n\n接下来一行，输入一个整数 $E$。", "outputFormat": "输出一行或 $n-1$ 行：\n\n- 若有解，则输出 $n-1$ 行，每行输出一个整数 $w_i$，表示你构造的树 $G$ 中边 $(u_i,v_i)$ 的边权；\n- 若无解，则输出一行，包含一个整数 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n所有 $\\operatorname{dis}$ 的值如下表，其中标红的是行首结点的 $\\operatorname{dis}$ 的最大值。\n\n|$\\operatorname{dis}$|$1$|$2$|$3$|\n|:-:|:-:|:-:|:-:|\n|$1$|$0$|$1$|$\\color{red}3$|\n|$2$|$1$|$0$|$\\color{red}2$|\n|$3$|$\\color{red}3$|$2$|$0$|\n\n可以验证，$E=\\dfrac{3+2+3}{3}=\\dfrac{8}{3}\\equiv 665496238\\pmod {998244353} $。\n\n#### 「数据范围」\n\n对于所有数据，$2\\le n\\le 10^5$，$1 \\le u_i,v_i \\le n$，$0\\le E < 998244353$，保证输入数据形成一棵树。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 2」Max of Distance", "background": "", "description": "给定一棵包含 $n$ 个结点的树 $G$ 和一个整数 $E$。\n\n你需要构造树 $G$ 中每条边的整数边权 $w_i$，满足：\n\n- $1 \\le w_i \\le 10^9$；\n- 均匀随机选择一个结点 $u$，$\\max\\limits_{v=1}^n\\operatorname{dis}(u,v)$ 的期望对 $998244353$ 取模的值等于 $E$；\n\n或报告无解。\n\n其中，$\\operatorname{dis}(u,v)$ 表示结点 $u,v$ 之间简单路径上的边权和。\n\n如果你不知道如何计算期望对 $998244353$ 取模的结果，请移步 [P2613 【模板】有理数取余](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "第一行输入一个整数 $n$。\n\n接下来 $n-1$ 行，每行输入两个正整数 $u_i,v_i$，表示树 $G$ 中结点 $u_i,v_i$ 之间存在一条边 $(u_i,v_i)$。\n\n接下来一行，输入一个整数 $E$。", "outputFormat": "输出一行或 $n-1$ 行：\n\n- 若有解，则输出 $n-1$ 行，每行输出一个整数 $w_i$，表示你构造的树 $G$ 中边 $(u_i,v_i)$ 的边权；\n- 若无解，则输出一行，包含一个整数 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n所有 $\\operatorname{dis}$ 的值如下表，其中标红的是行首结点的 $\\operatorname{dis}$ 的最大值。\n\n|$\\operatorname{dis}$|$1$|$2$|$3$|\n|:-:|:-:|:-:|:-:|\n|$1$|$0$|$1$|$\\color{red}3$|\n|$2$|$1$|$0$|$\\color{red}2$|\n|$3$|$\\color{red}3$|$2$|$0$|\n\n可以验证，$E=\\dfrac{3+2+3}{3}=\\dfrac{8}{3}\\equiv 665496238\\pmod {998244353} $。\n\n#### 「数据范围」\n\n对于所有数据，$2\\le n\\le 10^5$，$1 \\le u_i,v_i \\le n$，$0\\le E < 998244353$，保证输入数据形成一棵树。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10310", "type": "P", "difficulty": 5, "samples": [["4\n3 1\n001\n5 2\n00101\n30 10\n010100110101001010010010011101\n10 1000000000000\n0010110101", "2\n19\n926292963\n340558843"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "组合数学", "洛谷月赛"], "title": "「Cfz Round 2」01 String", "background": "", "description": "定义一个 $\\tt{01}$ 串是合法的，当且仅当它的首字符为 $\\tt 0$ 而尾字符为 $\\tt 1$。我们继而定义一个 $\\tt{01}$ 串 $T$ 的权值 $f(T)$ 为，将 $T$ 划分若干个连续的合法子串的方案数。\n\n例如 $f(\\tt{001}) = \\text{1}$，因为它仅可以被分割为 $[\\tt 001]$；$f(\\tt{0101101}) = \\text{4}$，因为它可以被分割为 $[\\tt 0101101][01, 01101][01011, 01][01, 011, 01]$ 共四种不同的方案；而 $f(\\tt{1001010101}) = \\text{0}$。\n\n给定一个长度为 $n$ 的 $\\tt{01}$ 串 $S$。定义 $f_k(l, r) = \\begin{cases} f(S_{l\\dots r}) & k = 0 \\\\ \\displaystyle\\sum_{l\\leq l' \\leq r' \\leq r} f_{k-1}(l', r') & k \\gt 0\\end{cases}$，你需要求出 $f_k(1, n)$ 的值。\n\n由于答案可能很大，所以你只需要输出答案对 $10^9+7$ 取模的结果。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n+ 第一行输入两个整数 $n,k$，分别表示 $\\lvert S\\rvert$ 和给定的参数。\n+ 接下来一行，输入一个长度为 $n$ 的 $\\tt{01}$ 串表示 $S$。", "outputFormat": "对于每组数据，输出一行一个整数，表示答案。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，用表格的交叉点表示 $f_k(l, r)$ 的值：\n\n| $\\bm{k = 0}$ | $r = 1$ | $2$ | $3$ |\n| -----------: | :-----: | :-: | :-: |\n| $l = 1$ | $0$ | $0$ | $1$ |\n| $2$ | / | $0$ | $1$ |\n| $3$ | / | / | $0$ |\n\n| $\\bm{k = 1}$ | $r = 1$ | $2$ | $3$ |\n| -----------: | :-----: | :-: | :-: |\n| $l = 1$ | $0$ | $0$ | $2$ |\n| $2$ | / | $0$ | $1$ |\n| $3$ | / | / | $0$ |\n\n其中：\n\n- $f_1(2, 3)= f_0(2, 2) + f_0(2, 3) + f_0(3, 3)= 0 + 1 + 0 = 1$；\n- $f_1(1, 3) = f_0(1, 1) + f_0(1, 2) + f_0(1, 3) + f_0(2, 2) + f_0(2, 3) + f_0(3, 3) = 0 + 0 + 1 + 0 + 1 + 0 = 2$；\n\n所以答案为 $2$。\n \n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\leq T \\leq 100$，$1 \\leq n \\leq 2\\times 10^5$，$0 \\leq k \\leq 10^{18}$，$\\sum n \\leq 6\\times 10^5$，保证 $S$ 中只包含 $\\tt{0}$ 和 $\\tt{1}$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 2」01 String", "background": "", "description": "定义一个 $\\tt{01}$ 串是合法的，当且仅当它的首字符为 $\\tt 0$ 而尾字符为 $\\tt 1$。我们继而定义一个 $\\tt{01}$ 串 $T$ 的权值 $f(T)$ 为，将 $T$ 划分若干个连续的合法子串的方案数。\n\n例如 $f(\\tt{001}) = \\text{1}$，因为它仅可以被分割为 $[\\tt 001]$；$f(\\tt{0101101}) = \\text{4}$，因为它可以被分割为 $[\\tt 0101101][01, 01101][01011, 01][01, 011, 01]$ 共四种不同的方案；而 $f(\\tt{1001010101}) = \\text{0}$。\n\n给定一个长度为 $n$ 的 $\\tt{01}$ 串 $S$。定义 $f_k(l, r) = \\begin{cases} f(S_{l\\dots r}) & k = 0 \\\\ \\displaystyle\\sum_{l\\leq l' \\leq r' \\leq r} f_{k-1}(l', r') & k \\gt 0\\end{cases}$，你需要求出 $f_k(1, n)$ 的值。\n\n由于答案可能很大，所以你只需要输出答案对 $10^9+7$ 取模的结果。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n+ 第一行输入两个整数 $n,k$，分别表示 $\\lvert S\\rvert$ 和给定的参数。\n+ 接下来一行，输入一个长度为 $n$ 的 $\\tt{01}$ 串表示 $S$。", "outputFormat": "对于每组数据，输出一行一个整数，表示答案。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，用表格的交叉点表示 $f_k(l, r)$ 的值：\n\n| $\\bm{k = 0}$ | $r = 1$ | $2$ | $3$ |\n| -----------: | :-----: | :-: | :-: |\n| $l = 1$ | $0$ | $0$ | $1$ |\n| $2$ | / | $0$ | $1$ |\n| $3$ | / | / | $0$ |\n\n| $\\bm{k = 1}$ | $r = 1$ | $2$ | $3$ |\n| -----------: | :-----: | :-: | :-: |\n| $l = 1$ | $0$ | $0$ | $2$ |\n| $2$ | / | $0$ | $1$ |\n| $3$ | / | / | $0$ |\n\n其中：\n\n- $f_1(2, 3)= f_0(2, 2) + f_0(2, 3) + f_0(3, 3)= 0 + 1 + 0 = 1$；\n- $f_1(1, 3) = f_0(1, 1) + f_0(1, 2) + f_0(1, 3) + f_0(2, 2) + f_0(2, 3) + f_0(3, 3) = 0 + 0 + 1 + 0 + 1 + 0 = 2$；\n\n所以答案为 $2$。\n \n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\leq T \\leq 100$，$1 \\leq n \\leq 2\\times 10^5$，$0 \\leq k \\leq 10^{18}$，$\\sum n \\leq 6\\times 10^5$，保证 $S$ 中只包含 $\\tt{0}$ 和 $\\tt{1}$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10311", "type": "P", "difficulty": 6, "samples": [["3\n3 5\n1 2 3\n2 2\n1 2\n4 100000\n1 2 5 9", "1 2 1\n-1\n1 1 3 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛", "Ad-hoc"], "title": "「Cfz Round 2」Weighted Mean", "background": "", "description": "给定一个长度为 $n$ 的序列 $a$ 和一个整数 $m$，保证序列 $a$ 中的每个元素均为不大于 $m$ 的正整数，且每个元素互不相等。\n\n你需要构造一个长度为 $n$ 的序列 $b$，满足：\n\n- 序列 $b$ 中的每个元素均为不大于 $m$ 的正整数；\n- $\\dfrac{\\sum\\limits_{i=1}^n (a_i \\cdot b_i)}{\\sum\\limits_{i=1}^n b_i}$ 为整数，即 $a_i$ 的权为 $b_i$ 时，序列 $a$ 的加权平均数为整数；\n- 不存在有序三元整数组 $(i,j,k)$，满足 $1\\le i<j<k\\le n$ 且 $b_i=b_j=b_k$；\n\n或报告无解。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入两个整数 $n,m$。\n- 第二行输入 $n$ 个整数，表示给定的序列 $a$。", "outputFormat": "对于每组测试数据，输出一行：\n\n- 若存在满足条件的序列 $b$，则输出用空格分隔的 $n$ 个整数，表示你构造的序列 $b$；\n- 若不存在满足条件的序列 $b$，则输出 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，给出的样例的加权平均数为 $\\dfrac{1 \\times 1+2 \\times 2 + 3 \\times 1}{1+2+1}=2$，为整数。\n\n输出 `1 5 1` 也视作正确，其加权平均数为 $2$。\n\n但是输出 `1 6 1` 不正确，虽然其加权平均数为 $2$，但是 $b_2>5$。\n\n输出 `1 2 3` 也不正确，其加权平均数为 $\\dfrac{7}{3}$，不为整数。\n\n输出 `1 1 1` 也不正确，虽然其加权平均数为 $2$，但是存在有序三元组 $(1,2,3)$ 满足 $1 \\leq 1 < 2 < 3 \\leq 3$ 且 $b_1=b_2=b_3$。\n\n对于第 $2$ 组测试数据，可以证明不存在满足条件的序列 $b$。\n\n对于第 $3$ 组测试数据，给出的样例的加权平均数为 $\\dfrac{1 \\times 1+2 \\times 1 + 5 \\times 3+9 \\times 4}{1+1+3+4}=6$，为整数。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 1000$，$1 \\le n \\le 10^6$，$1 \\le a_i \\le m \\le 10^9$，$\\sum n \\le 10^6$，保证序列 $a$ 中的每个元素间互不相等。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 2」Weighted Mean", "background": "", "description": "给定一个长度为 $n$ 的序列 $a$ 和一个整数 $m$，保证序列 $a$ 中的每个元素均为不大于 $m$ 的正整数，且每个元素互不相等。\n\n你需要构造一个长度为 $n$ 的序列 $b$，满足：\n\n- 序列 $b$ 中的每个元素均为不大于 $m$ 的正整数；\n- $\\dfrac{\\sum\\limits_{i=1}^n (a_i \\cdot b_i)}{\\sum\\limits_{i=1}^n b_i}$ 为整数，即 $a_i$ 的权为 $b_i$ 时，序列 $a$ 的加权平均数为整数；\n- 不存在有序三元整数组 $(i,j,k)$，满足 $1\\le i<j<k\\le n$ 且 $b_i=b_j=b_k$；\n\n或报告无解。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入两个整数 $n,m$。\n- 第二行输入 $n$ 个整数，表示给定的序列 $a$。", "outputFormat": "对于每组测试数据，输出一行：\n\n- 若存在满足条件的序列 $b$，则输出用空格分隔的 $n$ 个整数，表示你构造的序列 $b$；\n- 若不存在满足条件的序列 $b$，则输出 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组测试数据，给出的样例的加权平均数为 $\\dfrac{1 \\times 1+2 \\times 2 + 3 \\times 1}{1+2+1}=2$，为整数。\n\n输出 `1 5 1` 也视作正确，其加权平均数为 $2$。\n\n但是输出 `1 6 1` 不正确，虽然其加权平均数为 $2$，但是 $b_2>5$。\n\n输出 `1 2 3` 也不正确，其加权平均数为 $\\dfrac{7}{3}$，不为整数。\n\n输出 `1 1 1` 也不正确，虽然其加权平均数为 $2$，但是存在有序三元组 $(1,2,3)$ 满足 $1 \\leq 1 < 2 < 3 \\leq 3$ 且 $b_1=b_2=b_3$。\n\n对于第 $2$ 组测试数据，可以证明不存在满足条件的序列 $b$。\n\n对于第 $3$ 组测试数据，给出的样例的加权平均数为 $\\dfrac{1 \\times 1+2 \\times 1 + 5 \\times 3+9 \\times 4}{1+1+3+4}=6$，为整数。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 1000$，$1 \\le n \\le 10^6$，$1 \\le a_i \\le m \\le 10^9$，$\\sum n \\le 10^6$，保证序列 $a$ 中的每个元素间互不相等。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10312", "type": "P", "difficulty": 3, "samples": [["3\nHorel,ol!lWd", "Hello,World!"], ["5\nccehgyaefnpeoobe{lcirg}epriec_ora_g", "cyberpeace{railfence_cipher_gogogo}"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "2024", "高校校赛"], "title": "[SHUPC 2024] 栅栏密码", "background": "", "description": "栅栏密码（rail fence）是一种很基础的移位密码。\n\n我们将明文 `Hello,World!` 按如下方式排列：\n\n```\nH...o...r\n.e.l.,.o.l.!\n..l...W...d\n```\n\n即把明文 `Hello,World!` 排列成若干个 `\\/\\/\\/` 的形状，然后再逐行按从左到右的顺序取出字符，形成密文。例如第一行为 `Hor`，第二行为 `el,ol!`，第三行为 `lWd`，最终形成的密文为 `Horel,ol!lWd`。\n\n若按上述方式排列的密文有 $h$ 行，则称该栅栏密码的高度为 $h$。\n\n现在我们给出高度 $h$ 和一行密文字符串 $s$，请你输出一行明文字符串 $plain$。\n", "inputFormat": "第一行读入一个数字 $h\\ (2\\le h \\le10)$，表示密码的高度。\n\n第二行读入一个字符串 $s\\ (1\\le |s| \\le 10^5)$，表示密文。", "outputFormat": "一个字符串 $plain$，表示明文。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SHUPC 2024] 栅栏密码", "background": "", "description": "栅栏密码（rail fence）是一种很基础的移位密码。\n\n我们将明文 `Hello,World!` 按如下方式排列：\n\n```\nH...o...r\n.e.l.,.o.l.!\n..l...W...d\n```\n\n即把明文 `Hello,World!` 排列成若干个 `\\/\\/\\/` 的形状，然后再逐行按从左到右的顺序取出字符，形成密文。例如第一行为 `Hor`，第二行为 `el,ol!`，第三行为 `lWd`，最终形成的密文为 `Horel,ol!lWd`。\n\n若按上述方式排列的密文有 $h$ 行，则称该栅栏密码的高度为 $h$。\n\n现在我们给出高度 $h$ 和一行密文字符串 $s$，请你输出一行明文字符串 $plain$。\n", "inputFormat": "第一行读入一个数字 $h\\ (2\\le h \\le10)$，表示密码的高度。\n\n第二行读入一个字符串 $s\\ (1\\le |s| \\le 10^5)$，表示密文。", "outputFormat": "一个字符串 $plain$，表示明文。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10313", "type": "P", "difficulty": 2, "samples": [["3 3\n...\n...\n...", "9"], ["3 3\n..#\n.#.\n#..", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "高校校赛"], "title": "[SHUPC 2024]  占地斗士！", "background": "一个名为“占地斗士”的卡牌小游戏深深的吸引了小 A\n。目前小 A 正在进行卡牌摆放练习，但是她并不熟练，于是想要请教擅长编程的你来解决这个问题。", "description": "游戏的具体规则为：游戏在一个 $n\\times m$ 的方格矩阵中进行，`.` 代表这个格子可以被放置，`#` 代表这个格子不能被放置。你手中有 $4$ 种形状各异的卡牌，每种卡牌均**只有一张**。你需要将卡牌放置在棋盘中，卡牌可以放置在任意位置，但是卡牌占领的格子不能重叠，也不能放在不能放置的格子上。目标是要使得卡牌占领的格子数量尽可能多。\n小 A 现在想知道，在最优的摆放策略下，最多可以占领多少个格子？\n![](https://cdn.luogu.com.cn/upload/image_hosting/l9d77whu.png)", "inputFormat": "第一行输入两个正整数 $n,m\\ (1 \\le n,m\\le10) $\n\n接下来 $n$ 行，每行 $m$ 个字符串，保证字符仅包含 `.` 和 `#` ，代表棋盘的放置类型。", "outputFormat": "输出一个整数，代表答案。", "hint": "样例解释：\n\n样例一最优摆放方法如下，使用第一种和第二种卡牌，最多可以占领 $9$ 个格子。\n\n![img1](https://cdn.luogu.com.cn/upload/image_hosting/zt41mdit.png)\n\n样例二最优摆放方法如下，使用第二种卡牌，最多可以占领 $4$ 个格子，红色代表这个格子不能放置卡牌。\n\n![img2](https://cdn.luogu.com.cn/upload/image_hosting/352061x2.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SHUPC 2024]  占地斗士！", "background": "一个名为“占地斗士”的卡牌小游戏深深的吸引了小 A\n。目前小 A 正在进行卡牌摆放练习，但是她并不熟练，于是想要请教擅长编程的你来解决这个问题。", "description": "游戏的具体规则为：游戏在一个 $n\\times m$ 的方格矩阵中进行，`.` 代表这个格子可以被放置，`#` 代表这个格子不能被放置。你手中有 $4$ 种形状各异的卡牌，每种卡牌均**只有一张**。你需要将卡牌放置在棋盘中，卡牌可以放置在任意位置，但是卡牌占领的格子不能重叠，也不能放在不能放置的格子上。目标是要使得卡牌占领的格子数量尽可能多。\n小 A 现在想知道，在最优的摆放策略下，最多可以占领多少个格子？\n![](https://cdn.luogu.com.cn/upload/image_hosting/l9d77whu.png)", "inputFormat": "第一行输入两个正整数 $n,m\\ (1 \\le n,m\\le10) $\n\n接下来 $n$ 行，每行 $m$ 个字符串，保证字符仅包含 `.` 和 `#` ，代表棋盘的放置类型。", "outputFormat": "输出一个整数，代表答案。", "hint": "样例解释：\n\n样例一最优摆放方法如下，使用第一种和第二种卡牌，最多可以占领 $9$ 个格子。\n\n![img1](https://cdn.luogu.com.cn/upload/image_hosting/zt41mdit.png)\n\n样例二最优摆放方法如下，使用第二种卡牌，最多可以占领 $4$ 个格子，红色代表这个格子不能放置卡牌。\n\n![img2](https://cdn.luogu.com.cn/upload/image_hosting/352061x2.png)", "locale": "zh-CN"}}}
{"pid": "P10314", "type": "P", "difficulty": 2, "samples": [["3\n1.10\n1.72\n2.34", "1.000000\n1.000000\n2.000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "高校校赛"], "title": "[SHUPC 2024] 函数", "background": "", "description": "小 A 正在学习函数，有一天她发现了一个奇妙的函数：\n$$\nf(x)=x-0.5+\\frac{\\arctan(\\cot(\\pi x))}{\\pi}\n$$\n\n她非常喜欢这个函数。现在，她会对你提出 $T$ 个询问，每个询问包含一个浮点数 $x$ ，而你只需要回答 $f(x)$ 的值是多少。\n\n选手输出与标准答案的绝对误差或相对误差不超过 $10^{-6}$ 即视为正确。", "inputFormat": "第一行一个整数 $T\\ (T\\le 10^4)$ 表示数据组数。\n\n接下来 $T$ 行，每行一个浮点数 $x$ ，保证 $0 \\le x \\le 10^9$ 且 $x \\notin \\N$（即 $x$ 不为自然数）。", "outputFormat": "输出 $T$ 行，每行一个数，代表答案。\n\n选手输出与标准答案的绝对误差或相对误差不超过 $10^{-6}$ 即视为正确。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SHUPC 2024] 函数", "background": "", "description": "小 A 正在学习函数，有一天她发现了一个奇妙的函数：\n$$\nf(x)=x-0.5+\\frac{\\arctan(\\cot(\\pi x))}{\\pi}\n$$\n\n她非常喜欢这个函数。现在，她会对你提出 $T$ 个询问，每个询问包含一个浮点数 $x$ ，而你只需要回答 $f(x)$ 的值是多少。\n\n选手输出与标准答案的绝对误差或相对误差不超过 $10^{-6}$ 即视为正确。", "inputFormat": "第一行一个整数 $T\\ (T\\le 10^4)$ 表示数据组数。\n\n接下来 $T$ 行，每行一个浮点数 $x$ ，保证 $0 \\le x \\le 10^9$ 且 $x \\notin \\N$（即 $x$ 不为自然数）。", "outputFormat": "输出 $T$ 行，每行一个数，代表答案。\n\n选手输出与标准答案的绝对误差或相对误差不超过 $10^{-6}$ 即视为正确。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10315", "type": "P", "difficulty": 5, "samples": [["3 3\n1 3\n2 1 3\n1 2\n0 0 0\n0 2 1", "2 1 1"], ["3 3\n2 2 3\n2 1 3\n1 1\n0 0 0\n0 1 2", "niuza"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "高斯消元", "高校校赛"], "title": "[SHUPC 2024] 原神，启动！", "background": "", "description": "雷元素方碑具有如下性质：\n\n1. 具有 $m$ 种状态，$0,1,\\cdots,m-1$ 中的一种；\n2. 方碑受到一次攻击会进入下一个状态（$m-1$ 的下一个状态是$0$）；\n3. 某个方碑受到一次攻击时会带动其它一些方碑一起进入下一个状态。\n\n当 $n$ 个方碑的状态相同时，解谜成功。但是小 A 觉得游戏里的方碑解谜太简单了，只需要使用刻晴的“斩尽牛杂”将元素方碑全部胡乱攻击一遍就能解谜成功，于是他开始思考更复杂的版本。\n\n现在有 $n$ 个雷元素方碑，每个雷元素方碑有 $m$ 种状态。对于每个方碑 $i$ ，当它受到攻击时，都有 $k_i$ 个其它方碑和它一起进入下一个状态。\n\n给定 $n$ 个雷元素方碑的初始状态 $s$ 和终止状态 $t$，请你计算需要分别攻击每个方碑多少下，才能将雷元素方碑从状态 $s$ 变换到 $t$。\n\n如果无解请输出`niuza`。", "inputFormat": "第一行读入两个正整数 $n,m\\ (1\\le n\\le100,m\\le10^9)$，**保证 $m$ 为素数**。\n\n接下来 $n$ 行，第 $i$ 行会读取如下数据：\n\n- 先读入一个数字 $k\\ (0\\le k<n)$，表示攻击该方碑会带动的方碑数。\n- 接下来读入 $k$ 个数字，第 $j$ 个数 $a_j\\ (1\\le a_j \\le n, a_j\\neq i$ 且 $a_{j-1}<a_j)$ 表示 $i$ 方碑带动的方碑编号。\n\n接下来两行：\n\n第一行读入 $n$ 个数，第 $i$ 个数 $s_i$ 表示第 $i$ 个雷元素方碑的初始状态 $s_i\\ (0\\le s_i <m)$。\n\n第二行读入 $n$ 个数，第 $i$ 个数 $t_i$ 表示第 $i$ 个雷元素方碑的终止状态 $t_i\\ (0\\le t_i <m)$​。", "outputFormat": "如果有解，输出 $n$ 个小于 $m$ 的数，分别表示应该攻击每个方碑多少次，用空格隔开。对于多个解，输出任意一个即可。\n\n如果无解，请输出 `niuza`。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SHUPC 2024] 原神，启动！", "background": "", "description": "雷元素方碑具有如下性质：\n\n1. 具有 $m$ 种状态，$0,1,\\cdots,m-1$ 中的一种；\n2. 方碑受到一次攻击会进入下一个状态（$m-1$ 的下一个状态是$0$）；\n3. 某个方碑受到一次攻击时会带动其它一些方碑一起进入下一个状态。\n\n当 $n$ 个方碑的状态相同时，解谜成功。但是小 A 觉得游戏里的方碑解谜太简单了，只需要使用刻晴的“斩尽牛杂”将元素方碑全部胡乱攻击一遍就能解谜成功，于是他开始思考更复杂的版本。\n\n现在有 $n$ 个雷元素方碑，每个雷元素方碑有 $m$ 种状态。对于每个方碑 $i$ ，当它受到攻击时，都有 $k_i$ 个其它方碑和它一起进入下一个状态。\n\n给定 $n$ 个雷元素方碑的初始状态 $s$ 和终止状态 $t$，请你计算需要分别攻击每个方碑多少下，才能将雷元素方碑从状态 $s$ 变换到 $t$。\n\n如果无解请输出`niuza`。", "inputFormat": "第一行读入两个正整数 $n,m\\ (1\\le n\\le100,m\\le10^9)$，**保证 $m$ 为素数**。\n\n接下来 $n$ 行，第 $i$ 行会读取如下数据：\n\n- 先读入一个数字 $k\\ (0\\le k<n)$，表示攻击该方碑会带动的方碑数。\n- 接下来读入 $k$ 个数字，第 $j$ 个数 $a_j\\ (1\\le a_j \\le n, a_j\\neq i$ 且 $a_{j-1}<a_j)$ 表示 $i$ 方碑带动的方碑编号。\n\n接下来两行：\n\n第一行读入 $n$ 个数，第 $i$ 个数 $s_i$ 表示第 $i$ 个雷元素方碑的初始状态 $s_i\\ (0\\le s_i <m)$。\n\n第二行读入 $n$ 个数，第 $i$ 个数 $t_i$ 表示第 $i$ 个雷元素方碑的终止状态 $t_i\\ (0\\le t_i <m)$​。", "outputFormat": "如果有解，输出 $n$ 个小于 $m$ 的数，分别表示应该攻击每个方碑多少次，用空格隔开。对于多个解，输出任意一个即可。\n\n如果无解，请输出 `niuza`。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10316", "type": "P", "difficulty": 3, "samples": [["2 17 10 6\n3\n1 1 2\n2 1 7\n2\n1 2\n3 4", "2"], ["2 20 10 8\n3\n10 2 3\n8 2 1\n1\n1\n1", "-1"], ["2 17 10 9\n3\n1 1 2\n2 2 7\n2\n1 2\n3 4", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "高校校赛"], "title": "[SHUPC 2024] 为美好的世界献上爆焰！", "background": "小 A 目前正在带着小 B 进行攻打魔王城的每日一爆演练。", "description": "具体来说，魔王城的结界护盾共有 $x$ 的血量，小 A 想在 $n$ 天内完成对魔王城护盾的破坏。每天小 B 的魔力值会恢复至 $m$ ，且魔力值的上限为 $M$ ，使用爆裂魔法时每 $1$ 点魔力值可以对魔王城护盾造成 $1$ 点伤害。当然，爆裂魔法每天只能使用一次。\n\n为了确保小 B 可以造成充足的伤害，小 A 每天可以花钱去商店购买魔晶石为小 B 增加魔力值。但是商店每天出售的魔晶石的数量、价格、和魔力值都有所不同。且当天出售的**魔晶石只能当天使用**，不然会过期，无法补充魔力。小A现在想知道，如果要小 B 能够顺利爆破魔王城的护盾，最少需要花费多少钱？（如果无法完成破坏，则输出 `-1`）\n\n**注意**：由于小 B 的魔力值具有上限，因此当魔晶石魔力含量 $h$ 加上小 B 当前魔力值 $m$ 大于等于 $M$ 时，使用该魔晶石只能使小 B 的魔力值变为 $M$ ，也就是说 $ m'=\\min(M,m+h)$ 。", "inputFormat": "第一行输入四个正整数，$n,x,M,m$ （$1 \\le n,x,M \\le 5000,m \\le M$）。\n\n接下来会有 $n$ 组数据，每组数据有三行。\n\n第一行代表第 $i$ 天出售的魔晶石数量 $\\text{num}_i\\ (1 \\le \\text{num} \\le 5000)$ ，数据保证 $\\sum_{i=1}^{n}\\text{num}_i\\le 5000$。\n\n第二行共 $\\text{num}_i$ 个正整数，代表第 $i$ 天出售的第 $j$ 个魔晶石的价格 $p_{i,j}\\ (1\\le p_{i,j} \\le 10^9)$ 。\n\n第三行共 $\\text{num}_i$ 个正整数，代表第 $i$ 天出售的第 $j$ 个魔晶石的魔力值 $h_{i,j}\\ (1 \\le h_{i,j} \\le M)$ ，数据保证 $\\sum_{i=1}^{n}\\sum_{j=1}^{\\text{num}_i}h_{i,j}\\le 5000$。", "outputFormat": "输出一个整数，代表所求的答案。", "hint": "样例解释：\n\n样例 1 中，可以选择购买第一天的第一个魔晶石，花费为 $1$，当天总魔力值为 $8$。再购买第二天的第一个魔晶石，花费为 $1$，当天总魔力值为 $9$。这样两天总共可以造成 $17$ 点伤害，成功破坏结界，且花费最少为 $2$。\n\n样例 2 中，因为存在魔力值上限，因此第一天最多造成 $10$ 点伤害，而第二天最多造成 $9$ 点伤害，因此无法破坏结界。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SHUPC 2024] 为美好的世界献上爆焰！", "background": "小 A 目前正在带着小 B 进行攻打魔王城的每日一爆演练。", "description": "具体来说，魔王城的结界护盾共有 $x$ 的血量，小 A 想在 $n$ 天内完成对魔王城护盾的破坏。每天小 B 的魔力值会恢复至 $m$ ，且魔力值的上限为 $M$ ，使用爆裂魔法时每 $1$ 点魔力值可以对魔王城护盾造成 $1$ 点伤害。当然，爆裂魔法每天只能使用一次。\n\n为了确保小 B 可以造成充足的伤害，小 A 每天可以花钱去商店购买魔晶石为小 B 增加魔力值。但是商店每天出售的魔晶石的数量、价格、和魔力值都有所不同。且当天出售的**魔晶石只能当天使用**，不然会过期，无法补充魔力。小A现在想知道，如果要小 B 能够顺利爆破魔王城的护盾，最少需要花费多少钱？（如果无法完成破坏，则输出 `-1`）\n\n**注意**：由于小 B 的魔力值具有上限，因此当魔晶石魔力含量 $h$ 加上小 B 当前魔力值 $m$ 大于等于 $M$ 时，使用该魔晶石只能使小 B 的魔力值变为 $M$ ，也就是说 $ m'=\\min(M,m+h)$ 。", "inputFormat": "第一行输入四个正整数，$n,x,M,m$ （$1 \\le n,x,M \\le 5000,m \\le M$）。\n\n接下来会有 $n$ 组数据，每组数据有三行。\n\n第一行代表第 $i$ 天出售的魔晶石数量 $\\text{num}_i\\ (1 \\le \\text{num} \\le 5000)$ ，数据保证 $\\sum_{i=1}^{n}\\text{num}_i\\le 5000$。\n\n第二行共 $\\text{num}_i$ 个正整数，代表第 $i$ 天出售的第 $j$ 个魔晶石的价格 $p_{i,j}\\ (1\\le p_{i,j} \\le 10^9)$ 。\n\n第三行共 $\\text{num}_i$ 个正整数，代表第 $i$ 天出售的第 $j$ 个魔晶石的魔力值 $h_{i,j}\\ (1 \\le h_{i,j} \\le M)$ ，数据保证 $\\sum_{i=1}^{n}\\sum_{j=1}^{\\text{num}_i}h_{i,j}\\le 5000$。", "outputFormat": "输出一个整数，代表所求的答案。", "hint": "样例解释：\n\n样例 1 中，可以选择购买第一天的第一个魔晶石，花费为 $1$，当天总魔力值为 $8$。再购买第二天的第一个魔晶石，花费为 $1$，当天总魔力值为 $9$。这样两天总共可以造成 $17$ 点伤害，成功破坏结界，且花费最少为 $2$。\n\n样例 2 中，因为存在魔力值上限，因此第一天最多造成 $10$ 点伤害，而第二天最多造成 $9$ 点伤害，因此无法破坏结界。", "locale": "zh-CN"}}}
{"pid": "P10317", "type": "P", "difficulty": 2, "samples": [["3\n10\n2 3 3 3 1 1 1 1 1 1 \n7 8 9 1 2 3 4 5 6 6\n13 13 13 13 3 3 3 3\n10\n2 2 3 1 1 1 1 1 1 1\n10 9 2 2 2 2 2 2 2 2\n5 5 5 5 5 5 5 6\n8\n1 1 1 1 1 1 1 1\n15 15 15 15 15 15 15 15\n1 1 1 1 1 1 1 1", "Yes\nNo\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "高校校赛"], "title": "[SHUPC 2024] 小A的皇室战争卡组", "background": "", "description": "小 A 很喜欢玩皇室战争这款游戏。皇室战争的卡牌种类共有 $3$ 种，分别为部队、建筑和法术。一个卡组会携带 $8$ 张卡牌，一个合理的卡组会包含 $0\\sim 1$ 张建筑牌、 $1\\sim 3$ 张法术牌，部队牌则没有限制。每张卡牌都有自己独立的等级 $a_i$ 和种类 $c_i$。\n\n现在小 A 想和 小 B 进行友谊战，因此需要来构建出战卡组。小 A 共有 $n$ 张卡牌，卡牌的类型与等级已知，且 小 B 的每张出战卡牌的等级已知。由于小 A 对自己的水平非常自信，因此只要 **出战卡牌的平均等级 $\\ge$ 对手出战卡牌的平均等级 $-2$**，**且卡组为一个合理的卡组**，则他就能确保取胜。\n\n现在请你帮小 A​ 想想，他可以确保取胜吗？", "inputFormat": "第一行一个整数 $T\\ (T\\le 10^3)$ 表示数据组数。\n\n每组第一行输入一个正整数 $n\\ (8 \\le n\\le 10^5)$ ，代表 $小A$ 的卡牌总数，保证 $\\sum n \\le 10^5$\n\n每组第二行输入 $n$ 个正整数，代表每张卡牌的种类 $c_i\\ (1 \\le c_i \\le 3)$ ，其中种类 $1$ 代表部队卡，种类 $2$ 代表建筑卡，种类 $3$ 代表法术卡。 \n\n每组第三行输入 $n$ 个正整数，代表每张卡牌的等级 $a_i\\ (1 \\le a_i \\le 15)$\n\n每组第四行输入 $8$ 个正整数，代表 小 B 每张卡牌的等级 $x_i\\ (1 \\le x_i \\le 15)$。", "outputFormat": "共 $T$ 行，每行一个字符串。如果 $小A$ 可以取胜则输出 `Yes`，否则输出 `No`", "hint": "样例解释：\n\n在第一组样例中，小A可以取第1,2,3,6,7,8,9,10张卡牌，此时出战卡组的平均等级为6级，而小B的出战卡组平均等级为8级，$小A的平均等级 \\ge 小B的平均等级-2$，因此小A可以确保胜利。\n\n在第二组样例中，无论小A如何配置卡组都无法使平均等级满足条件，因此不能获胜。\n\n在第三组样例中，小A无法配置出一个合理的卡组，因此也不能获胜。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SHUPC 2024] 小A的皇室战争卡组", "background": "", "description": "小 A 很喜欢玩皇室战争这款游戏。皇室战争的卡牌种类共有 $3$ 种，分别为部队、建筑和法术。一个卡组会携带 $8$ 张卡牌，一个合理的卡组会包含 $0\\sim 1$ 张建筑牌、 $1\\sim 3$ 张法术牌，部队牌则没有限制。每张卡牌都有自己独立的等级 $a_i$ 和种类 $c_i$。\n\n现在小 A 想和 小 B 进行友谊战，因此需要来构建出战卡组。小 A 共有 $n$ 张卡牌，卡牌的类型与等级已知，且 小 B 的每张出战卡牌的等级已知。由于小 A 对自己的水平非常自信，因此只要 **出战卡牌的平均等级 $\\ge$ 对手出战卡牌的平均等级 $-2$**，**且卡组为一个合理的卡组**，则他就能确保取胜。\n\n现在请你帮小 A​ 想想，他可以确保取胜吗？", "inputFormat": "第一行一个整数 $T\\ (T\\le 10^3)$ 表示数据组数。\n\n每组第一行输入一个正整数 $n\\ (8 \\le n\\le 10^5)$ ，代表 $小A$ 的卡牌总数，保证 $\\sum n \\le 10^5$\n\n每组第二行输入 $n$ 个正整数，代表每张卡牌的种类 $c_i\\ (1 \\le c_i \\le 3)$ ，其中种类 $1$ 代表部队卡，种类 $2$ 代表建筑卡，种类 $3$ 代表法术卡。 \n\n每组第三行输入 $n$ 个正整数，代表每张卡牌的等级 $a_i\\ (1 \\le a_i \\le 15)$\n\n每组第四行输入 $8$ 个正整数，代表 小 B 每张卡牌的等级 $x_i\\ (1 \\le x_i \\le 15)$。", "outputFormat": "共 $T$ 行，每行一个字符串。如果 $小A$ 可以取胜则输出 `Yes`，否则输出 `No`", "hint": "样例解释：\n\n在第一组样例中，小A可以取第1,2,3,6,7,8,9,10张卡牌，此时出战卡组的平均等级为6级，而小B的出战卡组平均等级为8级，$小A的平均等级 \\ge 小B的平均等级-2$，因此小A可以确保胜利。\n\n在第二组样例中，无论小A如何配置卡组都无法使平均等级满足条件，因此不能获胜。\n\n在第三组样例中，小A无法配置出一个合理的卡组，因此也不能获胜。", "locale": "zh-CN"}}}
{"pid": "P10318", "type": "P", "difficulty": 5, "samples": [["5\n3 2 5 4 3", "14 12 11 10 10"], ["6\n171 814 2313 6676 196 897", "3861 1719 1076 1051 1026 1026"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "差分", "单调栈", "高校校赛"], "title": "[SHUPC 2024] 彭罗斯水槽", "background": "", "description": "小 A 在上课时出现了幻觉，他幻想出了若干个水槽，它们环形排列，每一个水槽里的水都会流向下一个水槽（当然在现实里这是不可能的）。\n\n于是小 A 开始思考这样一个问题：\n\n有 $n$ 个水槽环形排列，每个水槽都有一个容量，初始时水都是满的。接下来每一秒，水槽 $i$ 的水全部转移到 $i+1$ （特殊的，第 $n$ 个水槽的水会转移到第 $1$ 个），如果转移的水超出了容量就会溢出。\n\n现在他想知道，在接下来的 $1$ 至 $n$ 秒内，每一秒所有水槽的水量总和。", "inputFormat": "第一行读入一个正整数 $n\\ (1\\le n\\le 10^5)$ ，表示水槽的个数。\n\n第二行读入 $n$ 个数字，第 $i$ 个数字 $a_i\\ (1\\le a_i\\le 10^9)$ 表示水槽 $i$ 的容量。", "outputFormat": "$n$ 个数字，用空格隔开。分别表示 $1$ 至 $n$ 秒，每一秒所有水槽的水量总和。\n", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SHUPC 2024] 彭罗斯水槽", "background": "", "description": "小 A 在上课时出现了幻觉，他幻想出了若干个水槽，它们环形排列，每一个水槽里的水都会流向下一个水槽（当然在现实里这是不可能的）。\n\n于是小 A 开始思考这样一个问题：\n\n有 $n$ 个水槽环形排列，每个水槽都有一个容量，初始时水都是满的。接下来每一秒，水槽 $i$ 的水全部转移到 $i+1$ （特殊的，第 $n$ 个水槽的水会转移到第 $1$ 个），如果转移的水超出了容量就会溢出。\n\n现在他想知道，在接下来的 $1$ 至 $n$ 秒内，每一秒所有水槽的水量总和。", "inputFormat": "第一行读入一个正整数 $n\\ (1\\le n\\le 10^5)$ ，表示水槽的个数。\n\n第二行读入 $n$ 个数字，第 $i$ 个数字 $a_i\\ (1\\le a_i\\le 10^9)$ 表示水槽 $i$ 的容量。", "outputFormat": "$n$ 个数字，用空格隔开。分别表示 $1$ 至 $n$ 秒，每一秒所有水槽的水量总和。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10320", "type": "P", "difficulty": 3, "samples": [["2 1", "0"], ["3 6", "3"], ["16 335", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "枚举", "洛谷比赛"], "title": "勇气（Courage）", "background": "数学家渴求真理的美德，永不停歇的力量的源泉 —— 勇气。\n****\n「勇气之光」乔伊，是杜沃夫族的接任族长，也是拥有古代战神之力的战士。", "description": "乔伊有一项技能，可以将 $x$ 的攻击力强化为 $x^2$。但这个技能并不完美，除了第一次之外，每一次**使用该技能前**，攻击力都会衰减到之前的一半。\n\n比如最初的攻击力为 $\\color{red}6$，强化后变成 $6^2=\\color{red}{36}$。而在下一次强化前，会先衰减到 $36/2=18$，然后再强化为 $18^2=\\color{red}{324}$。\n\n乔伊想知道，如果最初的攻击力为 $x$，至少需要多少次强化，可以使其**不小于** $2^n$？  \n如果无论强化多少次，都不可能达到要求，请输出 `inf`。", "inputFormat": "输入一行两个正整数 $x,n$。分别表示初始攻击力为 $x$，以及要达到 $2^n$ 的攻击力。", "outputFormat": "输出一行一个整数或字符串 `inf`，表示答案。", "hint": "【样例 $1$ 解释】  \n初始攻击力 $x=2$ 就已经达到了 $2^n=2$，不需要使用技能就满足了要求，故答案为 $0$。\n\n【样例 $2$ 解释】  \n初始攻击力为 $3$，需要达到 $2^6=64$。第一次用技能后变为 $9$，第二次后变为 $(9/2)^2=81/4$，第三次变为 $((81/4)/2)^2=6561/64$，已经达到了要求，故答案为 $3$。\n\n【数据范围】  \n**本题采用捆绑测试。**  \n\nSubtask 1（15 pts）：$n\\le 60$；  \nSubtask 2（20 pts）：$x=4$；  \nSubtask 3（25 pts）：$n\\le 10^5$；  \nSubtask 4（40 pts）：无特殊限制。\n\n对于全部的数据，$2\\le x\\le 10^9$，$1\\le n \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "勇气（Courage）", "background": "数学家渴求真理的美德，永不停歇的力量的源泉 —— 勇气。\n****\n「勇气之光」乔伊，是杜沃夫族的接任族长，也是拥有古代战神之力的战士。", "description": "乔伊有一项技能，可以将 $x$ 的攻击力强化为 $x^2$。但这个技能并不完美，除了第一次之外，每一次**使用该技能前**，攻击力都会衰减到之前的一半。\n\n比如最初的攻击力为 $\\color{red}6$，强化后变成 $6^2=\\color{red}{36}$。而在下一次强化前，会先衰减到 $36/2=18$，然后再强化为 $18^2=\\color{red}{324}$。\n\n乔伊想知道，如果最初的攻击力为 $x$，至少需要多少次强化，可以使其**不小于** $2^n$？  \n如果无论强化多少次，都不可能达到要求，请输出 `inf`。", "inputFormat": "输入一行两个正整数 $x,n$。分别表示初始攻击力为 $x$，以及要达到 $2^n$ 的攻击力。", "outputFormat": "输出一行一个整数或字符串 `inf`，表示答案。", "hint": "【样例 $1$ 解释】  \n初始攻击力 $x=2$ 就已经达到了 $2^n=2$，不需要使用技能就满足了要求，故答案为 $0$。\n\n【样例 $2$ 解释】  \n初始攻击力为 $3$，需要达到 $2^6=64$。第一次用技能后变为 $9$，第二次后变为 $(9/2)^2=81/4$，第三次变为 $((81/4)/2)^2=6561/64$，已经达到了要求，故答案为 $3$。\n\n【数据范围】  \n**本题采用捆绑测试。**  \n\nSubtask 1（15 pts）：$n\\le 60$；  \nSubtask 2（20 pts）：$x=4$；  \nSubtask 3（25 pts）：$n\\le 10^5$；  \nSubtask 4（40 pts）：无特殊限制。\n\n对于全部的数据，$2\\le x\\le 10^9$，$1\\le n \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10321", "type": "P", "difficulty": 5, "samples": [["6", "21.0000000"], ["20", "422.0000000"], ["233", "99838.0384544"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "洛谷原创", "Special Judge", "O2优化", "素数判断,质数,筛法", "最大公约数 gcd", "洛谷比赛"], "title": "奉献（Dedication）", "background": "不断鞭策自己的数学精神 —— 奉献。\n****\n「奉献之光」丽莎，既是「秩序之神」派拉的神官，亦为「无秩序之神」迪奥尼斯的信徒。\n\n丽莎最近学习了[高精度除法](https://www.luogu.com.cn/problem/P5432)，她能以 $\\Theta(n \\log n)$ 的时间复杂度计算 $n$ 位整数除法了。", "description": "\n\n丽莎想要制作一张 $n$ 以内正整数的除法表。具体来说，是一张记录了 $\\lfloor a/b \\rfloor$（$1\\leq b \\leq a \\leq n$，$a,b$ 均为整数）的表格。她使用如下方法来制作：\n\n>以 $a$ 为第一关键字从小到大，以 $b$ 为第二关键字从小到大的顺序枚举位置 $(a,b)$。若 $(a,b)$ 位置**未被填写**，则：\n>\n>计算 $\\lfloor a/b \\rfloor$，这需要消耗的**魔力**为 $d_a \\log_2 d_a$（其中 $d_a$ 表示 $a$ 在十进制下的位数，即 $d_a=\\lfloor 1+ \\log_{10}a\\rfloor$）。然后枚举正整数 $i$，找到所有**未被填写**的 $(ai,bi)$（$ai\\leq n$）位置都填写入 $\\lfloor a/b \\rfloor$。每次填写需要消耗的魔力为 $d_i$。\n\n由于美娜已经做过一张乘法表，丽莎无需魔力就可以直接计算乘法。现在丽莎想要知道，制作整个除法表需要消耗多少魔力。\n\n\n为了防止精度问题，只要你的输出与标准输出的**相对误差**不超过 $10^{-6}$ 则视为正确。保证标准输出与实际答案的相对误差不超过 $10^{-10}$。", "inputFormat": "输入一行一个正整数 $n$，表示要制作大小为 $n$ 的除法表。", "outputFormat": "输出一行一个实数，表示答案。", "hint": "【样例 $1$ 解释】  \n\n由于 $a \\leq 6$，$d_a=1$，从而 $d_a \\log_2 d_a=0$。也就是说在此范围下只有填写数字会消耗魔力。而每次 $i$ 也不超过 $6$，满足 $d_i=1$，每次填写都消耗固定 $1$ 点魔力，要填写全部 $1+2+3+4+5+6=21$ 个数消耗的魔力就是 $21$。\n\n故答案为 $21$。\n\n【数据范围】  \n\n**本题采用捆绑测试。**  \n\nSubtask 1（15 pts）：$n\\le 5000$；  \nSubtask 2（15 pts）：$n\\le 10^5$；  \nSubtask 3（30 pts）：$n\\le 2 \\times 10^6$；  \nSubtask 4（40 pts）：无特殊限制。\n\n对于全部的数据，$1\\le n \\le 2 \\times 10^7$。  \n\n【提示】\n\n$\\log_2 n$ 读作「以 $2$ 为底的 $n$ 的对数」。设 $x=\\log_2n$，它表示 $2^x=n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "奉献（Dedication）", "background": "不断鞭策自己的数学精神 —— 奉献。\n****\n「奉献之光」丽莎，既是「秩序之神」派拉的神官，亦为「无秩序之神」迪奥尼斯的信徒。\n\n丽莎最近学习了[高精度除法](https://www.luogu.com.cn/problem/P5432)，她能以 $\\Theta(n \\log n)$ 的时间复杂度计算 $n$ 位整数除法了。", "description": "\n\n丽莎想要制作一张 $n$ 以内正整数的除法表。具体来说，是一张记录了 $\\lfloor a/b \\rfloor$（$1\\leq b \\leq a \\leq n$，$a,b$ 均为整数）的表格。她使用如下方法来制作：\n\n>以 $a$ 为第一关键字从小到大，以 $b$ 为第二关键字从小到大的顺序枚举位置 $(a,b)$。若 $(a,b)$ 位置**未被填写**，则：\n>\n>计算 $\\lfloor a/b \\rfloor$，这需要消耗的**魔力**为 $d_a \\log_2 d_a$（其中 $d_a$ 表示 $a$ 在十进制下的位数，即 $d_a=\\lfloor 1+ \\log_{10}a\\rfloor$）。然后枚举正整数 $i$，找到所有**未被填写**的 $(ai,bi)$（$ai\\leq n$）位置都填写入 $\\lfloor a/b \\rfloor$。每次填写需要消耗的魔力为 $d_i$。\n\n由于美娜已经做过一张乘法表，丽莎无需魔力就可以直接计算乘法。现在丽莎想要知道，制作整个除法表需要消耗多少魔力。\n\n\n为了防止精度问题，只要你的输出与标准输出的**相对误差**不超过 $10^{-6}$ 则视为正确。保证标准输出与实际答案的相对误差不超过 $10^{-10}$。", "inputFormat": "输入一行一个正整数 $n$，表示要制作大小为 $n$ 的除法表。", "outputFormat": "输出一行一个实数，表示答案。", "hint": "【样例 $1$ 解释】  \n\n由于 $a \\leq 6$，$d_a=1$，从而 $d_a \\log_2 d_a=0$。也就是说在此范围下只有填写数字会消耗魔力。而每次 $i$ 也不超过 $6$，满足 $d_i=1$，每次填写都消耗固定 $1$ 点魔力，要填写全部 $1+2+3+4+5+6=21$ 个数消耗的魔力就是 $21$。\n\n故答案为 $21$。\n\n【数据范围】  \n\n**本题采用捆绑测试。**  \n\nSubtask 1（15 pts）：$n\\le 5000$；  \nSubtask 2（15 pts）：$n\\le 10^5$；  \nSubtask 3（30 pts）：$n\\le 2 \\times 10^6$；  \nSubtask 4（40 pts）：无特殊限制。\n\n对于全部的数据，$1\\le n \\le 2 \\times 10^7$。  \n\n【提示】\n\n$\\log_2 n$ 读作「以 $2$ 为底的 $n$ 的对数」。设 $x=\\log_2n$，它表示 $2^x=n$。", "locale": "zh-CN"}}}
{"pid": "P10322", "type": "P", "difficulty": 6, "samples": [["5\n15 12\n400 2520\n5000000 68256\n10000000 65536\n10000000000 3628800", "462\n946645637\n231125775\n290821843\n602104955"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "洛谷原创", "O2优化", "莫比乌斯反演", "拉格朗日插值法", "洛谷比赛"], "title": "高洁（Purity）", "background": "简洁、准确而永恒的美丽 —— 高洁。\n****\n「高洁之光」拉姆，身为精灵王的他可以完美使用《阿梅斯草纸书》的力量。", "description": "拉姆使用「暴风箭雨」一次射出了 $n$ 支箭，其中第 $i$ 支箭的原始攻击力是 $i$。不过，这些箭会经过一些强化。\n\n对于常数 $d$，设原始攻击力为 $i$ 的箭，其**能级**为 $v(i)$：\n\n- 若不存在正整数 $k$ 使得 $i^k$ 是 $d$ 的整数倍，则 $v(i)=0$；  \n- 否则 $v(i)$ 为**最小的**、使得 $i^k$ 是 $d$ 的整数倍的正整数 $k$。\n\n那么这支箭强化后的攻击力为 $i^{v(i)+1}$。\n\n拉姆想知道所有箭在**强化后**的攻击力之和，由于答案可能很大，你只需要求出答案对 $998244353$ 取模的结果。（即求出答案除以 $998244353$ 的余数）", "inputFormat": "第一行一个正整数 $T$，表示数据组数。  \n接下来 $T$ 行，每行两个正整数 $n,d$，意义如题目描述。", "outputFormat": "输出 $T$ 行，每行对应一组数据的答案。", "hint": "【样例解释】   \n对于第一组数据，$d=12$。其中 $v(6)=2$，因为 $12$ 能整除 $6^2$，而不整除 $6^1$，同样也能得到 $v(12)=1$。\n可以发现 $n=15$ 以内的其它数能级都为 $0$，故答案为：\n\n$$\\left(\\sum_{i=1}^{15}i\\right)-6-12+6^3+12^2=462$$\n\n对于第二组数据，可以证明 $n$ 以内只有 $v(210)=3$ 非零，由此可以算出答案为 $1944889990$，对 $998244353$ 取模后为 $946645637$。\n\n【数据范围】  \n**本题采用捆绑测试。**\n\nSubtask 1（15 pts）：$1 \\le n,d \\le 10^4$；  \nSubtask 2（15 pts）：$d$ 为质数；  \nSubtask 3（20 pts）：$d$ 为质数的正整数幂；  \nSubtask 4（20 pts）：不存在大于 $1$ 的整数 $x$，使得 $x^4$ 整除 $d$；  \nSubtask 5（30 pts）：无特殊限制。\n\n对于全部数据，$1\\le T \\le 1000$，$1\\le n < 2^{63}$，$1\\le d \\le 10^8$。\n\n【提示】  \n此题的时间限制较为宽松，即使你的代码在某些细节上没有优化，也可以正常通过此题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "高洁（Purity）", "background": "简洁、准确而永恒的美丽 —— 高洁。\n****\n「高洁之光」拉姆，身为精灵王的他可以完美使用《阿梅斯草纸书》的力量。", "description": "拉姆使用「暴风箭雨」一次射出了 $n$ 支箭，其中第 $i$ 支箭的原始攻击力是 $i$。不过，这些箭会经过一些强化。\n\n对于常数 $d$，设原始攻击力为 $i$ 的箭，其**能级**为 $v(i)$：\n\n- 若不存在正整数 $k$ 使得 $i^k$ 是 $d$ 的整数倍，则 $v(i)=0$；  \n- 否则 $v(i)$ 为**最小的**、使得 $i^k$ 是 $d$ 的整数倍的正整数 $k$。\n\n那么这支箭强化后的攻击力为 $i^{v(i)+1}$。\n\n拉姆想知道所有箭在**强化后**的攻击力之和，由于答案可能很大，你只需要求出答案对 $998244353$ 取模的结果。（即求出答案除以 $998244353$ 的余数）", "inputFormat": "第一行一个正整数 $T$，表示数据组数。  \n接下来 $T$ 行，每行两个正整数 $n,d$，意义如题目描述。", "outputFormat": "输出 $T$ 行，每行对应一组数据的答案。", "hint": "【样例解释】   \n对于第一组数据，$d=12$。其中 $v(6)=2$，因为 $12$ 能整除 $6^2$，而不整除 $6^1$，同样也能得到 $v(12)=1$。\n可以发现 $n=15$ 以内的其它数能级都为 $0$，故答案为：\n\n$$\\left(\\sum_{i=1}^{15}i\\right)-6-12+6^3+12^2=462$$\n\n对于第二组数据，可以证明 $n$ 以内只有 $v(210)=3$ 非零，由此可以算出答案为 $1944889990$，对 $998244353$ 取模后为 $946645637$。\n\n【数据范围】  \n**本题采用捆绑测试。**\n\nSubtask 1（15 pts）：$1 \\le n,d \\le 10^4$；  \nSubtask 2（15 pts）：$d$ 为质数；  \nSubtask 3（20 pts）：$d$ 为质数的正整数幂；  \nSubtask 4（20 pts）：不存在大于 $1$ 的整数 $x$，使得 $x^4$ 整除 $d$；  \nSubtask 5（30 pts）：无特殊限制。\n\n对于全部数据，$1\\le T \\le 1000$，$1\\le n < 2^{63}$，$1\\le d \\le 10^8$。\n\n【提示】  \n此题的时间限制较为宽松，即使你的代码在某些细节上没有优化，也可以正常通过此题。", "locale": "zh-CN"}}}
{"pid": "P10323", "type": "P", "difficulty": 6, "samples": [["3\n1 4 4\n3 7 7\n5 10 10", "0"], ["5\n1 4 4\n2 5 5\n3 7 7\n4 8 8\n9 8 8", "488831003"], ["5\n1 1 4\n2 2 5\n3 3 7\n4 2 8\n9 3 8", "884183796"], ["10\n123 1 10\n234 11 14\n345 10 20\n456 6 6\n567 20 30\n678 84 90\n789 1 3\n8910 8 15\n91011 123 129\n101112 56 64", "483360041"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "期望", "线性代数", "微积分", "洛谷比赛"], "title": "理性（Rationality）", "background": "数学之善，统治宇宙的根本原理 —— 理性。\n****\n「理性之光」伊奥，是古代精灵图形术士。已经千岁的她总能不受感情的干扰，以理性做出最优的决策。   ", "description": "赛时更新：请注意，对于一组确定的 $v_1,\\cdots,v_n$，都可以求出 $\\text{RSS}$ 的最小值。**它是关于随机变量  $v_1,\\cdots,v_n$ 的一个随机变量**，将其记为 $X$，则要求的是 $\\mathbb E[X]$。   \n笔误改正：残差平方和的英文为 $\\text{RSS}$。\n****\n伊奥的思绪回到了千年前的一场大战中。\n\n她记得那场战斗中有 $n$ 个敌人，第 $i$ 个敌人在距离她 $d_i$（$d_i$ 之间互不相同）的位置上。这些敌人都带有一个**正整数**标记 $v_i$，只要以**恰好** $v_i$ 的攻击力击中它就可以将其消灭。\n\n她只要设定一个一次函数 $f(x)=ax+b$，就能在距离她 $d_i$ 的位置放出 $f(d_i)$ 的攻击力。好在她的队友会辅助她攻击，她只用考虑确定 $a,b$ 使得 $f(x)$ 的效果最优，即最小化 $\\text{RSS}$（残差平方和）：\n$$\\text{RSS}=\\sum_{i=1}^n(f(d_i)-v_i)^2$$\n当然了，这只是她的回忆。她能清晰记得每个敌人到她的距离 $d_i$，而对于 $v_i$ 她只记得满足 $l_i\\leq v_i \\leq r_i$。\n\n她想知道假设每个 $v_i$ 都对应在 $[l_i,r_i]$ 范围内**均匀随机**的情况下，「$\\text{RSS}$ **的最小值」的期望**。   \n可以证明答案总是有理数，你只需要告诉她答案对 $998244353$ 取模的结果即可。", "inputFormat": "第一行一个正整数 $n$，表示敌人的个数。  \n接下来 $n$ 行，每行三个正整数 $d_i,l_i,r_i$，分别表示第 $i$ 个敌人到伊奥的距离，其标记 $v_i$ 的下界和上界。\n\n为了方便你的计算，伊奥保证 $d_i< d_{i+1}$（$1\\leq i <n$），并且：\n\n$$n\\sum_{i=1}^nd_i^2 \\not \\equiv \\left(\\sum_{i=1}^nd_i \\right)^2 \\pmod{998244353}$$\n**即确保答案在模 $998244353$ 意义下一定存在。**", "outputFormat": "输出一行一个整数，表示所有情况下 $\\text{RSS}$ 最小值的期望。", "hint": "【样例 $1$ 解释】\n\n此样例中有 $l_i=r_i$，即情况已经确定，只需要求出此时最优的 $a,b$ 即可。容易发现 $(1,4),(3,7),(5,10)$ 这三组数据可以用一次函数完美拟合：即 $f(x)=\\dfrac 32 x+\\dfrac{5}{2}$，与每个点偏差都是 $0$，故 $\\text{RSS}$ 最小值的期望，也就是答案为 $0$。\n\n【样例 $2$ 解释】\n\n这里同样有 $l_i=r_i$。$5$ 个敌人的数据 $(d_i,v_i)$ 分别为 $(1,4),(2,5),(3,7),(4,8),(9,8)$，可以证明取\n$$a=\\frac{87}{194} \\ , \\ b=\\frac{911}{194}$$\n是一组使得 $\\text{RSS}$ 最小的解，代入计算得\n$$\\text{RSS}=\\sum_{i=1}^n\\left( \\frac{87}{194}d_i+\\frac{911}{194}-v_i\\right)^2=\\frac{1047}{194}$$\n在模 $998244353$ 意义下答案为 $488831003$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask 1（10 pts）：$n \\leq 3$；  \nSubtask 2（10 pts）：$l_i=r_i$；  \nSubtask 3（15 pts）：$n\\le500$，$r_i\\leq 500$；  \nSubtask 4（15 pts）：$n\\le 5000$；  \nSubtask 5（20 pts）：$n\\le 10^5$；  \nSubtask 6（30 pts）：无特殊限制。\n\n对于全部的数据，$2\\le n \\le 5\\times 10^5$，$1\\leq l_i \\leq r_i \\leq 10^8$，$1\\leq d_i \\leq 10^8$， $d_i<d_{i+1}$（$1\\leq i <n$），并且有：\n$$n\\sum_{i=1}^nd_i^2 \\not \\equiv \\left(\\sum_{i=1}^nd_i \\right)^2 \\pmod{998244353}$$\n\n【提示】\n\n题目中要求出「$\\text{RSS}$ 的最小值」期望值。对于离散随机变量 $X$，假设其可以取值为 $a_1,a_2,\\cdots,a_n$，对应概率为 $p_1,p_2,\\cdots,p_n$（$p_1+\\cdots+p_n=1$），则其期望值可以定义为：\n$$\\mathbb E[X]=\\sum_{i=1}^np_i a_i$$\n对于计算有理数取模的方法，请参考[模板题](https://www.luogu.com.cn/problem/P2613)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "理性（Rationality）", "background": "数学之善，统治宇宙的根本原理 —— 理性。\n****\n「理性之光」伊奥，是古代精灵图形术士。已经千岁的她总能不受感情的干扰，以理性做出最优的决策。   ", "description": "赛时更新：请注意，对于一组确定的 $v_1,\\cdots,v_n$，都可以求出 $\\text{RSS}$ 的最小值。**它是关于随机变量  $v_1,\\cdots,v_n$ 的一个随机变量**，将其记为 $X$，则要求的是 $\\mathbb E[X]$。   \n笔误改正：残差平方和的英文为 $\\text{RSS}$。\n****\n伊奥的思绪回到了千年前的一场大战中。\n\n她记得那场战斗中有 $n$ 个敌人，第 $i$ 个敌人在距离她 $d_i$（$d_i$ 之间互不相同）的位置上。这些敌人都带有一个**正整数**标记 $v_i$，只要以**恰好** $v_i$ 的攻击力击中它就可以将其消灭。\n\n她只要设定一个一次函数 $f(x)=ax+b$，就能在距离她 $d_i$ 的位置放出 $f(d_i)$ 的攻击力。好在她的队友会辅助她攻击，她只用考虑确定 $a,b$ 使得 $f(x)$ 的效果最优，即最小化 $\\text{RSS}$（残差平方和）：\n$$\\text{RSS}=\\sum_{i=1}^n(f(d_i)-v_i)^2$$\n当然了，这只是她的回忆。她能清晰记得每个敌人到她的距离 $d_i$，而对于 $v_i$ 她只记得满足 $l_i\\leq v_i \\leq r_i$。\n\n她想知道假设每个 $v_i$ 都对应在 $[l_i,r_i]$ 范围内**均匀随机**的情况下，「$\\text{RSS}$ **的最小值」的期望**。   \n可以证明答案总是有理数，你只需要告诉她答案对 $998244353$ 取模的结果即可。", "inputFormat": "第一行一个正整数 $n$，表示敌人的个数。  \n接下来 $n$ 行，每行三个正整数 $d_i,l_i,r_i$，分别表示第 $i$ 个敌人到伊奥的距离，其标记 $v_i$ 的下界和上界。\n\n为了方便你的计算，伊奥保证 $d_i< d_{i+1}$（$1\\leq i <n$），并且：\n\n$$n\\sum_{i=1}^nd_i^2 \\not \\equiv \\left(\\sum_{i=1}^nd_i \\right)^2 \\pmod{998244353}$$\n**即确保答案在模 $998244353$ 意义下一定存在。**", "outputFormat": "输出一行一个整数，表示所有情况下 $\\text{RSS}$ 最小值的期望。", "hint": "【样例 $1$ 解释】\n\n此样例中有 $l_i=r_i$，即情况已经确定，只需要求出此时最优的 $a,b$ 即可。容易发现 $(1,4),(3,7),(5,10)$ 这三组数据可以用一次函数完美拟合：即 $f(x)=\\dfrac 32 x+\\dfrac{5}{2}$，与每个点偏差都是 $0$，故 $\\text{RSS}$ 最小值的期望，也就是答案为 $0$。\n\n【样例 $2$ 解释】\n\n这里同样有 $l_i=r_i$。$5$ 个敌人的数据 $(d_i,v_i)$ 分别为 $(1,4),(2,5),(3,7),(4,8),(9,8)$，可以证明取\n$$a=\\frac{87}{194} \\ , \\ b=\\frac{911}{194}$$\n是一组使得 $\\text{RSS}$ 最小的解，代入计算得\n$$\\text{RSS}=\\sum_{i=1}^n\\left( \\frac{87}{194}d_i+\\frac{911}{194}-v_i\\right)^2=\\frac{1047}{194}$$\n在模 $998244353$ 意义下答案为 $488831003$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask 1（10 pts）：$n \\leq 3$；  \nSubtask 2（10 pts）：$l_i=r_i$；  \nSubtask 3（15 pts）：$n\\le500$，$r_i\\leq 500$；  \nSubtask 4（15 pts）：$n\\le 5000$；  \nSubtask 5（20 pts）：$n\\le 10^5$；  \nSubtask 6（30 pts）：无特殊限制。\n\n对于全部的数据，$2\\le n \\le 5\\times 10^5$，$1\\leq l_i \\leq r_i \\leq 10^8$，$1\\leq d_i \\leq 10^8$， $d_i<d_{i+1}$（$1\\leq i <n$），并且有：\n$$n\\sum_{i=1}^nd_i^2 \\not \\equiv \\left(\\sum_{i=1}^nd_i \\right)^2 \\pmod{998244353}$$\n\n【提示】\n\n题目中要求出「$\\text{RSS}$ 的最小值」期望值。对于离散随机变量 $X$，假设其可以取值为 $a_1,a_2,\\cdots,a_n$，对应概率为 $p_1,p_2,\\cdots,p_n$（$p_1+\\cdots+p_n=1$），则其期望值可以定义为：\n$$\\mathbb E[X]=\\sum_{i=1}^np_i a_i$$\n对于计算有理数取模的方法，请参考[模板题](https://www.luogu.com.cn/problem/P2613)。", "locale": "zh-CN"}}}
{"pid": "P10324", "type": "P", "difficulty": 7, "samples": [["1 1", "5"], ["2 0", "45"], ["2 1", "149"], ["10 0", "36011666"], ["20 1", "593465999"], ["106 1", "516553582"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "组合数学", "生成函数", "拉格朗日反演", "洛谷比赛"], "title": "洞察（Insight）", "background": "看待万物毫无偏见的新视角 —— 洞察。\n\n****\n「洞察之光」凯伊·雅思·德·布拉德，是减法盗贼，也是背负黑暗命运的混沌骑士。\n\n凯伊的右手内隐藏着混沌之剑，为了使其发挥出足够的力量又不至于失控，需要满足特定的内部结构。她想知道有多少种符合条件的结构，为了方便你的计算，她把问题转化为如下形式：", "description": "赛时更新：题面中的笔误已修改为：相邻点对颜色**互不相同**。\n****\n在一个**无向连通图** $G$ 中，有黑色和白色的点各 $n$ 个，红色的点 $1$ 个。  \n所有点都有标号，图中有 $2n$ 条边，且所有相邻点对（也就是有边直接相连的点对）的颜色也互不相同。\n\n对于 $\\text{type}$ 等于 $0$ 或 $1$，分别在不同条件下计算符合条件的图 $G$ 有多少个：\n\n- $\\text{type}=0$：无附加条件。  \n- $\\text{type}=1$：对于每个**不包含**红色点的极大连通子图，都要对**恰好一个**点做特殊标记（每个标记也都是不同的）。\n\n答案对 $998244353$ 取模。", "inputFormat": "输入一行两个整数 $n$ 和 $\\text{type}$。\n", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例 $1$ 解释】  \n此时 $\\text{type}=1$，所有 $5$ 种合法的图包括：\n\n1. $R-W'-B$\n2. $R-W-B'$\n3. $R-B'-W$\n4. $R-B-W'$\n5. $B'-R-W'$\n\n由于 $n=1$，可以仅用 $B$ 和 $W$ 来区分白点和黑点，$R$ 表示红点。中间的横杠表示连边，$B'$ 和 $W'$ 分别表示有标记的白点和黑点。\n\n注意，由于第 $5$ 个图中，单个的 $B$ 和 $W$ 就是不包含 $R$ 的极大连通子图，必须各有一个标记在这唯一的位置上。\n\n【样例 $2,3$ 解释】\n\n见附件图片，其中展示了 $\\text{type}=0$ 时全部的 $45$ 种可能的图 $G$。\n\n对于 $\\text{type}=1$ 的情况，只需要对每个图的基础上做标记，就可以数出答案为 $149$。\n\n【样例 $4,5$ 解释】\n\n取模前的答案分别为 $116758263583336861101$ 和 $4159784334433940020473603987503242886367209494283213841$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask 1（8 pts）：$n \\le4$；     \nSubtask 2（10 pts）：$n \\le 10^3$，$\\text{type}=0$；  \nSubtask 3（11 pts）：$\\text{type}=0$；  \nSubtask 4（13 pts）：$n \\le 100$，$\\text{type}=1$；     \nSubtask 5（14 pts）：$n \\le 10^3$，$\\text{type}=1$；  \nSubtask 6（21 pts）：$n\\le 10^5$，$\\text{type}=1$；  \nSubtask 7（23 pts）：$\\text{type}=1$。\n\n对于全部的数据，$1\\le n \\le 10^7$，$\\text{type}\\in \\{ 0,1\\}$。\n\n【提示】  \n对于这类题目，你或许会想从 [OEIS](https://oeis.org/) 上寻找答案。但我要提醒你的是，直接搜索答案数列不会找到任何结果。然而，对于小数据范围，仍然可以提前处理出答案数列。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "洞察（Insight）", "background": "看待万物毫无偏见的新视角 —— 洞察。\n\n****\n「洞察之光」凯伊·雅思·德·布拉德，是减法盗贼，也是背负黑暗命运的混沌骑士。\n\n凯伊的右手内隐藏着混沌之剑，为了使其发挥出足够的力量又不至于失控，需要满足特定的内部结构。她想知道有多少种符合条件的结构，为了方便你的计算，她把问题转化为如下形式：", "description": "赛时更新：题面中的笔误已修改为：相邻点对颜色**互不相同**。\n****\n在一个**无向连通图** $G$ 中，有黑色和白色的点各 $n$ 个，红色的点 $1$ 个。  \n所有点都有标号，图中有 $2n$ 条边，且所有相邻点对（也就是有边直接相连的点对）的颜色也互不相同。\n\n对于 $\\text{type}$ 等于 $0$ 或 $1$，分别在不同条件下计算符合条件的图 $G$ 有多少个：\n\n- $\\text{type}=0$：无附加条件。  \n- $\\text{type}=1$：对于每个**不包含**红色点的极大连通子图，都要对**恰好一个**点做特殊标记（每个标记也都是不同的）。\n\n答案对 $998244353$ 取模。", "inputFormat": "输入一行两个整数 $n$ 和 $\\text{type}$。\n", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例 $1$ 解释】  \n此时 $\\text{type}=1$，所有 $5$ 种合法的图包括：\n\n1. $R-W'-B$\n2. $R-W-B'$\n3. $R-B'-W$\n4. $R-B-W'$\n5. $B'-R-W'$\n\n由于 $n=1$，可以仅用 $B$ 和 $W$ 来区分白点和黑点，$R$ 表示红点。中间的横杠表示连边，$B'$ 和 $W'$ 分别表示有标记的白点和黑点。\n\n注意，由于第 $5$ 个图中，单个的 $B$ 和 $W$ 就是不包含 $R$ 的极大连通子图，必须各有一个标记在这唯一的位置上。\n\n【样例 $2,3$ 解释】\n\n见附件图片，其中展示了 $\\text{type}=0$ 时全部的 $45$ 种可能的图 $G$。\n\n对于 $\\text{type}=1$ 的情况，只需要对每个图的基础上做标记，就可以数出答案为 $149$。\n\n【样例 $4,5$ 解释】\n\n取模前的答案分别为 $116758263583336861101$ 和 $4159784334433940020473603987503242886367209494283213841$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask 1（8 pts）：$n \\le4$；     \nSubtask 2（10 pts）：$n \\le 10^3$，$\\text{type}=0$；  \nSubtask 3（11 pts）：$\\text{type}=0$；  \nSubtask 4（13 pts）：$n \\le 100$，$\\text{type}=1$；     \nSubtask 5（14 pts）：$n \\le 10^3$，$\\text{type}=1$；  \nSubtask 6（21 pts）：$n\\le 10^5$，$\\text{type}=1$；  \nSubtask 7（23 pts）：$\\text{type}=1$。\n\n对于全部的数据，$1\\le n \\le 10^7$，$\\text{type}\\in \\{ 0,1\\}$。\n\n【提示】  \n对于这类题目，你或许会想从 [OEIS](https://oeis.org/) 上寻找答案。但我要提醒你的是，直接搜索答案数列不会找到任何结果。然而，对于小数据范围，仍然可以提前处理出答案数列。\n", "locale": "zh-CN"}}}
{"pid": "P10325", "type": "P", "difficulty": 7, "samples": [["2 3\n1 2\n2 3\n2 3", "103983787"], ["4 5\n1 3\n1 2\n1 4\n1 5\n1 6", "525030616"], ["7 17\n1 5\n1 5\n1 5\n1 5\n1 3\n1 3\n1 3\n1 2\n1 2\n1 6\n1 6\n1 6\n1 6\n1 6\n1 6\n1 6\n1 6", "308796722"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "多项式", "洛谷原创", "O2优化", "分治", "概率论", "期望", "快速傅里叶变换 FFT", "洛谷比赛"], "title": "超越（Transcendent）", "background": "越过领域和现实的终极存在 —— 超越。\n\n****\n「超越之光」美娜，是亚特兰蒂斯最强的魔法师，亦是无人能及的贤者。即便如此，她也一刻都没有停下对数学的探索。\n\n「最高次系数为 $1$ 的整系数多项式方程的解不一定是整数，」美娜自言自语道，「但是其所有根组成的对称多项式的值必然是整数。」\n\n「这很容易证明，却也很有趣呢。」想到这里，美娜突然有了开发新魔法的思路。", "description": "美娜的魔法需要 $m+1$ 个阶段来构建。第 $i \\ (1 \\leq i \\leq m)$ 个阶段每次尝试的成功概率为 $a_i/b_i$，如果失败**只需要重试当前阶段**即可，如果成功就能进入下一个阶段。\n\n最后的第 $m+1$ 个阶段需要选一个魔力基数 $c$。不过这个魔法现在并不稳定，设 $r$ 是一个不大于 $2n$ 的范围内**均匀随机**生成的正整数，则\n$$c=\\cos \\frac{r\\pi}{n}$$\n最后，若美娜在前 $m$ 个阶段中总共尝试了 $k$ 次（每次无论失败或成功，都算多一次尝试），她的魔法会产生 $c^k$ 的能量。\n\n美娜想知道这个魔法所产生能量的期望值是多少，当然她很容易就算出了答案，你能帮她验算一下吗？\n\n你只用输出答案对 $998244353$ 取模的结果即可。显然，答案一定是有理数，所以你可以简单地计算其对 $998244353$ 取模的值。", "inputFormat": "第一行两个正整数 $n,m$。  \n接下来 $m$ 行，每行两个正整数 $a_i,b_i$，意义如题目描述。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例 $1$ 解释】\n\n此时 $m=3$，前 $m$ 个阶段中，第一阶段的成功概率为 $1/2$，之后两个阶段的成功概率都为 $2/3$。由此可以算出，恰好尝试 $k \\ (k \\geq m)$ 次完成前 $m$ 个阶段的概率为（我有一个巧妙的方法给出证明，可惜这里空间太小，写不下）：\n\n$$p_k=2^{4-k}-4(k+1)3^{1-k}$$\n例如 $p_3=2/9$，这是每个阶段都一次成功的概率 $1/2 \\times 2/3 \\times 2/3$。  \n又如 $p_4=7/27$，这要求在某一阶段尝试恰好两次，其它阶段都一次成功，即：\n$$p_4=\\left( \\frac 12\\right)^2   \\frac 23 \\cdot \\frac 23+\\frac 12\\left( \\frac 29\\right)\\frac 23+\\frac 12\\cdot \\frac 23\\left( \\frac 29\\right)$$\n样例中 $n=2$，可知 $c=1$ 的概率为 $1/4$，$c=-1$ 的概率为 $1/4$，还有 $1/2$ 的概率 $c=0$。故答案为\n\n$$\\frac 14\\sum_{k\\geq 3}p_k (1+(-1)^k)=\\frac{11}{48}$$\n对 $998244353$ 取模后为 $103983787$。\n\n【样例 $2$ 解释】\n\n取模前的答案为 $\\dfrac{24284321}{191028915}$。\n\n【数据范围】 \n\n**本题使用捆绑测试。**\n\n\nSubtask 1（7 pts）：$n\\le 6$，$m=1$；   \nSubtask 2（9 pts）：$n\\le 6$，$m\\le 10$；  \nSubtask 3（13 pts）：$n\\le 500$，$m\\le 500$；   \nSubtask 4（13 pts）：$n=2^{19}$；  \nSubtask 5（15 pts）：$n \\le 10^5$，$m\\le 500$；  \nSubtask 6（15 pts）：不同的 $a_i/b_i$ 最多有两组；   \nSubtask 7（28 pts）：无特殊限制。\n\n\n对于全部数据，$1\\le n \\le 10^8$，$1\\le m \\le 60000$，$1\\le a_i<b_i\\leq 10^8$。且保证\n\n$$U_n\\left( \\frac{b_i}{b_i-a_i}\\right)\\not \\equiv 0 \\pmod{998244353}$$\n其中 $U_n(x)$ 表示 $n$ 次的[第二类 Chebyshev 多项式](https://mathworld.wolfram.com/ChebyshevPolynomialoftheSecondKind.html)。\n\n【提示】   \n你在找什么呢？或许可以再看看题目背景，会有帮助的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "超越（Transcendent）", "background": "越过领域和现实的终极存在 —— 超越。\n\n****\n「超越之光」美娜，是亚特兰蒂斯最强的魔法师，亦是无人能及的贤者。即便如此，她也一刻都没有停下对数学的探索。\n\n「最高次系数为 $1$ 的整系数多项式方程的解不一定是整数，」美娜自言自语道，「但是其所有根组成的对称多项式的值必然是整数。」\n\n「这很容易证明，却也很有趣呢。」想到这里，美娜突然有了开发新魔法的思路。", "description": "美娜的魔法需要 $m+1$ 个阶段来构建。第 $i \\ (1 \\leq i \\leq m)$ 个阶段每次尝试的成功概率为 $a_i/b_i$，如果失败**只需要重试当前阶段**即可，如果成功就能进入下一个阶段。\n\n最后的第 $m+1$ 个阶段需要选一个魔力基数 $c$。不过这个魔法现在并不稳定，设 $r$ 是一个不大于 $2n$ 的范围内**均匀随机**生成的正整数，则\n$$c=\\cos \\frac{r\\pi}{n}$$\n最后，若美娜在前 $m$ 个阶段中总共尝试了 $k$ 次（每次无论失败或成功，都算多一次尝试），她的魔法会产生 $c^k$ 的能量。\n\n美娜想知道这个魔法所产生能量的期望值是多少，当然她很容易就算出了答案，你能帮她验算一下吗？\n\n你只用输出答案对 $998244353$ 取模的结果即可。显然，答案一定是有理数，所以你可以简单地计算其对 $998244353$ 取模的值。", "inputFormat": "第一行两个正整数 $n,m$。  \n接下来 $m$ 行，每行两个正整数 $a_i,b_i$，意义如题目描述。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例 $1$ 解释】\n\n此时 $m=3$，前 $m$ 个阶段中，第一阶段的成功概率为 $1/2$，之后两个阶段的成功概率都为 $2/3$。由此可以算出，恰好尝试 $k \\ (k \\geq m)$ 次完成前 $m$ 个阶段的概率为（我有一个巧妙的方法给出证明，可惜这里空间太小，写不下）：\n\n$$p_k=2^{4-k}-4(k+1)3^{1-k}$$\n例如 $p_3=2/9$，这是每个阶段都一次成功的概率 $1/2 \\times 2/3 \\times 2/3$。  \n又如 $p_4=7/27$，这要求在某一阶段尝试恰好两次，其它阶段都一次成功，即：\n$$p_4=\\left( \\frac 12\\right)^2   \\frac 23 \\cdot \\frac 23+\\frac 12\\left( \\frac 29\\right)\\frac 23+\\frac 12\\cdot \\frac 23\\left( \\frac 29\\right)$$\n样例中 $n=2$，可知 $c=1$ 的概率为 $1/4$，$c=-1$ 的概率为 $1/4$，还有 $1/2$ 的概率 $c=0$。故答案为\n\n$$\\frac 14\\sum_{k\\geq 3}p_k (1+(-1)^k)=\\frac{11}{48}$$\n对 $998244353$ 取模后为 $103983787$。\n\n【样例 $2$ 解释】\n\n取模前的答案为 $\\dfrac{24284321}{191028915}$。\n\n【数据范围】 \n\n**本题使用捆绑测试。**\n\n\nSubtask 1（7 pts）：$n\\le 6$，$m=1$；   \nSubtask 2（9 pts）：$n\\le 6$，$m\\le 10$；  \nSubtask 3（13 pts）：$n\\le 500$，$m\\le 500$；   \nSubtask 4（13 pts）：$n=2^{19}$；  \nSubtask 5（15 pts）：$n \\le 10^5$，$m\\le 500$；  \nSubtask 6（15 pts）：不同的 $a_i/b_i$ 最多有两组；   \nSubtask 7（28 pts）：无特殊限制。\n\n\n对于全部数据，$1\\le n \\le 10^8$，$1\\le m \\le 60000$，$1\\le a_i<b_i\\leq 10^8$。且保证\n\n$$U_n\\left( \\frac{b_i}{b_i-a_i}\\right)\\not \\equiv 0 \\pmod{998244353}$$\n其中 $U_n(x)$ 表示 $n$ 次的[第二类 Chebyshev 多项式](https://mathworld.wolfram.com/ChebyshevPolynomialoftheSecondKind.html)。\n\n【提示】   \n你在找什么呢？或许可以再看看题目背景，会有帮助的。", "locale": "zh-CN"}}}
{"pid": "P10326", "type": "P", "difficulty": 7, "samples": [["0\n3 5 12\n2 4 6\n2 3 5\n1 2 3\n3 1 7\n3 2 11\n1 1 2", "155"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "提交答案", "枚举", "组合数学", "生成函数", "线性代数", "洛谷比赛"], "title": "自由（Freedom）", "background": "完全抽象的，只在数学中被允许的**无限**的「自由」。\n\n****\n\n「自由之光」，未知数的骑士 —— 知修。哪怕面对的是无限的绝望，他也能将其转变为无限的自由。", "description": "给定一个 $n$ 个节点、$m$ 条边的**有向图**，节点和边都有权值，保证对于任意两个节点 $u,v$，从 $u$ 指向 $v$ 的边最多只有一条。\n\n**路径** $P$ 是一个节点序列 $u_1,\\cdots,u_k$，其中对于任意 $1\\leq i < k$，$u_i$ 有指向 $u_{i+1}$ 的边（这条边记为 $e_i$）。则定义 $P$ 的**边权**是所有 $e_i$ 的权值的乘积，其**点权**是所有 $u_i$ 权值的和，其**长度**为 $k$。特别地，如果 $k=1$，则定义其**边权**为 $1$。\n\n对于两条路径 $P_1,P_2$，长度分别为 $L_1,L_2$，包含的节点序列记为 $u_1,\\cdots,u_{L_1}$ 和 $v_1,\\cdots,v_{L_2}$。定义它们是**相同**的，当且仅当 $L_1=L_2$，且对于所有 $1\\le i \\le L_1$ 有 $u_i=v_i$。\n\n给定正整数 $V$，请求出所有不相同的「**点权**为 $V$ 的路径」的**边权**之和。答案可能很大，请对 $998244353$ 取模后输出。\n\n**题目的输入数据下载链接：[Link1](https://pan.baidu.com/s/1Gn0T5DNQBwC41oR-0hsh4A)，提取码：`92ih`；**   \n备用下载路径与操作方法：[Link2](https://www.luogu.com.cn/paste/xkqpnptw)。", "inputFormat": "第一行一个正整数 $T$，表示测试点编号。\n\n第二行三个正整数 $n,m,V$，意义如题目描述。  \n第三行 $n$ 个正整数 $a_1,\\cdots,a_n$，$a_i$ 表示了编号为 $i$ 的节点的权值。  \n接下来 $m$ 行，每行三个正整数 $u_i,v_i,w_i$，表示编号为 $u_i$ 的点有一条权值为 $w_i$ 的边指向 $v_i$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例 $1$ 解释】\n\n样例中 $V=12$，满足点权为 $12$ 的路径有：   \n（给出的是路径中节点的编号，样例中每个节点的权值恰好为其编号的两倍）\n\n- $1 \\to 1\\to 1\\to 1\\to 1\\to 1$，边权为 $2^5=32$。 \n- $1\\to 1\\to 1\\to 1 \\to 2$，边权为 $3\\times 2^3=24$。  \n- $1\\to 2 \\to 3$，边权为 $3\\times 5=15$。  \n- $2\\to 3\\to 1$，边权为 $5\\times 7=35$。  \n- $3\\to 1\\to 1\\to 1$，边权为 $7\\times 2^2=28$。  \n- $3\\to 1\\to 2$，边权为 $7\\times 3=21$。\n\n故答案为 $32+24+15+35+28+21=155$。\n\n【数据信息】\n\n| 测试点编号 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 测试点名称 | W | K\\_1 | K\\_2 | K\\_3 | MP\\_1 | MP\\_2 | MP\\_3 | MP\\_4 | R | Finale |\n| 测试点分数 | $10$ | $10$ | $10$ | $10$ | $10$ | $10$ | $10$ | $10$ | $10$ | $10$ |\n\n\n对于全部的数据，$1\\le n \\le10^5$，$1\\le m \\le \\min(n^2,10^6)$，$1\\le V \\le 10^{10000000}$。\n\n【提示】   \n**时间**是宝贵的。代码运行需要时间，你的思考也需要时间。好在这两件事可以同时进行，希望你可以在这有限的时间内做更多的事，拿到更好的成绩。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "自由（Freedom）", "background": "完全抽象的，只在数学中被允许的**无限**的「自由」。\n\n****\n\n「自由之光」，未知数的骑士 —— 知修。哪怕面对的是无限的绝望，他也能将其转变为无限的自由。", "description": "给定一个 $n$ 个节点、$m$ 条边的**有向图**，节点和边都有权值，保证对于任意两个节点 $u,v$，从 $u$ 指向 $v$ 的边最多只有一条。\n\n**路径** $P$ 是一个节点序列 $u_1,\\cdots,u_k$，其中对于任意 $1\\leq i < k$，$u_i$ 有指向 $u_{i+1}$ 的边（这条边记为 $e_i$）。则定义 $P$ 的**边权**是所有 $e_i$ 的权值的乘积，其**点权**是所有 $u_i$ 权值的和，其**长度**为 $k$。特别地，如果 $k=1$，则定义其**边权**为 $1$。\n\n对于两条路径 $P_1,P_2$，长度分别为 $L_1,L_2$，包含的节点序列记为 $u_1,\\cdots,u_{L_1}$ 和 $v_1,\\cdots,v_{L_2}$。定义它们是**相同**的，当且仅当 $L_1=L_2$，且对于所有 $1\\le i \\le L_1$ 有 $u_i=v_i$。\n\n给定正整数 $V$，请求出所有不相同的「**点权**为 $V$ 的路径」的**边权**之和。答案可能很大，请对 $998244353$ 取模后输出。\n\n**题目的输入数据下载链接：[Link1](https://pan.baidu.com/s/1Gn0T5DNQBwC41oR-0hsh4A)，提取码：`92ih`；**   \n备用下载路径与操作方法：[Link2](https://www.luogu.com.cn/paste/xkqpnptw)。", "inputFormat": "第一行一个正整数 $T$，表示测试点编号。\n\n第二行三个正整数 $n,m,V$，意义如题目描述。  \n第三行 $n$ 个正整数 $a_1,\\cdots,a_n$，$a_i$ 表示了编号为 $i$ 的节点的权值。  \n接下来 $m$ 行，每行三个正整数 $u_i,v_i,w_i$，表示编号为 $u_i$ 的点有一条权值为 $w_i$ 的边指向 $v_i$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例 $1$ 解释】\n\n样例中 $V=12$，满足点权为 $12$ 的路径有：   \n（给出的是路径中节点的编号，样例中每个节点的权值恰好为其编号的两倍）\n\n- $1 \\to 1\\to 1\\to 1\\to 1\\to 1$，边权为 $2^5=32$。 \n- $1\\to 1\\to 1\\to 1 \\to 2$，边权为 $3\\times 2^3=24$。  \n- $1\\to 2 \\to 3$，边权为 $3\\times 5=15$。  \n- $2\\to 3\\to 1$，边权为 $5\\times 7=35$。  \n- $3\\to 1\\to 1\\to 1$，边权为 $7\\times 2^2=28$。  \n- $3\\to 1\\to 2$，边权为 $7\\times 3=21$。\n\n故答案为 $32+24+15+35+28+21=155$。\n\n【数据信息】\n\n| 测试点编号 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 测试点名称 | W | K\\_1 | K\\_2 | K\\_3 | MP\\_1 | MP\\_2 | MP\\_3 | MP\\_4 | R | Finale |\n| 测试点分数 | $10$ | $10$ | $10$ | $10$ | $10$ | $10$ | $10$ | $10$ | $10$ | $10$ |\n\n\n对于全部的数据，$1\\le n \\le10^5$，$1\\le m \\le \\min(n^2,10^6)$，$1\\le V \\le 10^{10000000}$。\n\n【提示】   \n**时间**是宝贵的。代码运行需要时间，你的思考也需要时间。好在这两件事可以同时进行，希望你可以在这有限的时间内做更多的事，拿到更好的成绩。", "locale": "zh-CN"}}}
{"pid": "P10327", "type": "P", "difficulty": 7, "samples": [["3\n5\n1 5 3 2 4\n5\n1 2 3 4 5\n6\n5 3 6 1 4 2", "11\n5\n19"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 汉诺塔排序问题", "background": "", "description": "Natsuzora 在玩一个特殊规则的汉诺塔。\n\n汉诺塔有 $A$、$B$、$C$ 共三根柱子，每根柱子上可以堆叠放置圆盘。圆盘可以在不同柱子之间移动，但必须遵守以下规则：\n\n- 一次只有一个圆盘被移动；\n- 每次移动只能将一个柱子最顶端的圆盘移动到另一个柱子的最顶端；\n- 在柱子 $B$ 和 $C$ 上，不允许任何圆盘放置在另外一个比它本身小的圆盘上；\n- **在柱子 $A$ 上，允许将较大的圆盘放置在较小的圆盘上。**\n\n最开始时，Natsuzora 将 $n$ 个大小互不相同的圆盘乱序地摞在 $A$ 柱子上并将柱子 $B$ 和 $C$ 留空。在满足上述条件的情况下，Natsuzora 想要知道，若要将 $A$ 柱上的圆盘全部移动到 $B$ 柱上，他至少需要进行多少次移动。", "inputFormat": "第一行包含一个整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n每组数据的第一行包含一个整数 $n$ $(1\\leq n\\leq 10^5)$，表示初始状态下柱子 $A$ 上的圆盘数量。\n\n每组数据的第二行包含 $n$ 个整数 $p_1,p_2,\\ldots,p_n$ $(1\\leq p_i\\leq n)$，其中 $p_i$ 表示柱子 $A$ **从下往上**第 $i$ 个圆盘的直径。数据保证 $p_1,p_2,\\ldots,p_n$ 是一个长度为 $n$ 的排列，即 $1$ 到 $n$ 中的每个整数都在序列中出现恰好一次。\n\n对于所有数据，保证 $\\sum n\\leq 2\\times 10^5$。", "outputFormat": "对于每组数据，输出一行一个整数，表示需要的最少移动次数。", "hint": "在第一个样例中，一种可行的次数最少的移动方案如下（$X\\rightarrow Y$ 表示将柱子 $X$ 最顶上的圆盘移动到柱子 $Y$ 的顶部）：\n\n  1. $A\\rightarrow C$\n  2. $A\\rightarrow B$\n  3. $A\\rightarrow C$\n  4. $B\\rightarrow C$\n  5. $A\\rightarrow B$\n  6. $C\\rightarrow A$\n  7. $C\\rightarrow A$\n  8. $C\\rightarrow B$\n  9. $A\\rightarrow B$\n  10. $A\\rightarrow B$\n  11. $A\\rightarrow B$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 汉诺塔排序问题", "background": "", "description": "Natsuzora 在玩一个特殊规则的汉诺塔。\n\n汉诺塔有 $A$、$B$、$C$ 共三根柱子，每根柱子上可以堆叠放置圆盘。圆盘可以在不同柱子之间移动，但必须遵守以下规则：\n\n- 一次只有一个圆盘被移动；\n- 每次移动只能将一个柱子最顶端的圆盘移动到另一个柱子的最顶端；\n- 在柱子 $B$ 和 $C$ 上，不允许任何圆盘放置在另外一个比它本身小的圆盘上；\n- **在柱子 $A$ 上，允许将较大的圆盘放置在较小的圆盘上。**\n\n最开始时，Natsuzora 将 $n$ 个大小互不相同的圆盘乱序地摞在 $A$ 柱子上并将柱子 $B$ 和 $C$ 留空。在满足上述条件的情况下，Natsuzora 想要知道，若要将 $A$ 柱上的圆盘全部移动到 $B$ 柱上，他至少需要进行多少次移动。", "inputFormat": "第一行包含一个整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n每组数据的第一行包含一个整数 $n$ $(1\\leq n\\leq 10^5)$，表示初始状态下柱子 $A$ 上的圆盘数量。\n\n每组数据的第二行包含 $n$ 个整数 $p_1,p_2,\\ldots,p_n$ $(1\\leq p_i\\leq n)$，其中 $p_i$ 表示柱子 $A$ **从下往上**第 $i$ 个圆盘的直径。数据保证 $p_1,p_2,\\ldots,p_n$ 是一个长度为 $n$ 的排列，即 $1$ 到 $n$ 中的每个整数都在序列中出现恰好一次。\n\n对于所有数据，保证 $\\sum n\\leq 2\\times 10^5$。", "outputFormat": "对于每组数据，输出一行一个整数，表示需要的最少移动次数。", "hint": "在第一个样例中，一种可行的次数最少的移动方案如下（$X\\rightarrow Y$ 表示将柱子 $X$ 最顶上的圆盘移动到柱子 $Y$ 的顶部）：\n\n  1. $A\\rightarrow C$\n  2. $A\\rightarrow B$\n  3. $A\\rightarrow C$\n  4. $B\\rightarrow C$\n  5. $A\\rightarrow B$\n  6. $C\\rightarrow A$\n  7. $C\\rightarrow A$\n  8. $C\\rightarrow B$\n  9. $A\\rightarrow B$\n  10. $A\\rightarrow B$\n  11. $A\\rightarrow B$", "locale": "zh-CN"}}}
{"pid": "P10328", "type": "P", "difficulty": 5, "samples": [["2 2\n1 1 1 1\n2 1 1 1", "582309208"], ["2 4\n1 2 3 4\n4 3 2 1", "570601408"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 卡牌游戏", "background": "", "description": "李华有一副卡牌，每张卡牌有颜色、数字以及价值三个属性。每张卡牌的颜色可以用一个 $[1,n]$ 中的整数代表，同样的，每张卡牌上会写有一个 $[1,n]$ 之间的整数。根据数字和颜色的不同，这些卡牌被分为 $n^2$ 种。\n\n为了方便表示，记一张颜色为 $x$，数字为 $y$ 的卡牌种类编号为 $(x-1)\\times n+y$。在牌堆中，第 $i$ 种卡牌共有 $a_i$ 张，每张卡牌的价值为 $b_i$。\n\n一开始，李华的手牌为空，初始积分为 $0$，李华会进行 $k$ 轮游戏。在每一轮的开始，李华会从牌堆里剩余的牌中**随机**取出一张牌，抽到每张牌的概率都是相等的。紧接着，如果手牌中含有与取出的牌数字**或**颜色相同的牌，那么李华会将**所有的**符合上述条件的牌加上原本取出的牌放回牌堆，反之则将抽出的牌置于手牌中。\n\n每一轮结束后，李华的积分会加上其手牌中所有牌的价值，请帮李华求出 $k$ 轮后的期望总积分对 $998244353$ 取模后的值。", "inputFormat": "第一行两个正整数 $n,k$ $(2\\le n\\le 4, 1\\le k\\le 10^9)$，代表颜色及数字的种类数和游戏轮数。\n\n第二行为 $n^2$ 个整数 $a_i$ $(0\\le a_i<998244353)$，代表牌堆里每种卡牌的数量。\n\n第三行为 $n^2$ 个整数 $b_i$ $(0\\le b_i<998244353)$，代表每种卡牌的积分。\n\n数据保证不会出现所有卡牌可以同时置于手牌中的情况，且 $\\sum a_i< 998244353$。", "outputFormat": "输出一行一个整数，代表 $k$ 轮之后的总分期望值。", "hint": "对于第一个样例，最后得分与概率的对应如下：\n\n| 得分 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 概率 | $\\frac 12$ | $\\frac 16$ | $\\frac 16$ | $\\frac 1{12}$ | $\\frac 1{12}$ |\n\n期望得分为 $\\frac{25}{12}$。\n\n对于第二个样例，期望得分为 $\\frac{5041}{810}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 卡牌游戏", "background": "", "description": "李华有一副卡牌，每张卡牌有颜色、数字以及价值三个属性。每张卡牌的颜色可以用一个 $[1,n]$ 中的整数代表，同样的，每张卡牌上会写有一个 $[1,n]$ 之间的整数。根据数字和颜色的不同，这些卡牌被分为 $n^2$ 种。\n\n为了方便表示，记一张颜色为 $x$，数字为 $y$ 的卡牌种类编号为 $(x-1)\\times n+y$。在牌堆中，第 $i$ 种卡牌共有 $a_i$ 张，每张卡牌的价值为 $b_i$。\n\n一开始，李华的手牌为空，初始积分为 $0$，李华会进行 $k$ 轮游戏。在每一轮的开始，李华会从牌堆里剩余的牌中**随机**取出一张牌，抽到每张牌的概率都是相等的。紧接着，如果手牌中含有与取出的牌数字**或**颜色相同的牌，那么李华会将**所有的**符合上述条件的牌加上原本取出的牌放回牌堆，反之则将抽出的牌置于手牌中。\n\n每一轮结束后，李华的积分会加上其手牌中所有牌的价值，请帮李华求出 $k$ 轮后的期望总积分对 $998244353$ 取模后的值。", "inputFormat": "第一行两个正整数 $n,k$ $(2\\le n\\le 4, 1\\le k\\le 10^9)$，代表颜色及数字的种类数和游戏轮数。\n\n第二行为 $n^2$ 个整数 $a_i$ $(0\\le a_i<998244353)$，代表牌堆里每种卡牌的数量。\n\n第三行为 $n^2$ 个整数 $b_i$ $(0\\le b_i<998244353)$，代表每种卡牌的积分。\n\n数据保证不会出现所有卡牌可以同时置于手牌中的情况，且 $\\sum a_i< 998244353$。", "outputFormat": "输出一行一个整数，代表 $k$ 轮之后的总分期望值。", "hint": "对于第一个样例，最后得分与概率的对应如下：\n\n| 得分 | $1$ | $2$ | $3$ | $4$ | $5$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 概率 | $\\frac 12$ | $\\frac 16$ | $\\frac 16$ | $\\frac 1{12}$ | $\\frac 1{12}$ |\n\n期望得分为 $\\frac{25}{12}$。\n\n对于第二个样例，期望得分为 $\\frac{5041}{810}$。", "locale": "zh-CN"}}}
{"pid": "P10329", "type": "P", "difficulty": 3, "samples": [["3\n4\n2\n5", "30\n5\n55"], ["3\n4\n3\n5", "30\n14\n55"], ["3\n8\n1\n3", "204\n1\n14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "递推", "2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] Add", "background": "", "description": "给定一个长度为 $n$ 的序列 $a_1,a_2,\\ldots,a_n$，初始时 $a_i=i$。对该序列进行 $n-1$ 次操作，其中第 $i$ 次操作为在 $[1,n-i]$ 中等概率选择一个整数 $j$，令 $a_j$ 变为 $a_j+2a_{n-i+1}$。\n\n求操作完毕后 $a_1$ 的期望 $\\bmod\\text{ }998244353$ 的值。", "inputFormat": "输入第一行一个正整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n接下来 $T$ 组数据，每组一行一个正整数 $n$ $(1\\leq n\\leq 10^9)$，表示序列的长度。", "outputFormat": "$T$ 行，每行一个整数表示 $a_1$ 的期望 $\\bmod\\text{ }998244353$ 的值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] Add", "background": "", "description": "给定一个长度为 $n$ 的序列 $a_1,a_2,\\ldots,a_n$，初始时 $a_i=i$。对该序列进行 $n-1$ 次操作，其中第 $i$ 次操作为在 $[1,n-i]$ 中等概率选择一个整数 $j$，令 $a_j$ 变为 $a_j+2a_{n-i+1}$。\n\n求操作完毕后 $a_1$ 的期望 $\\bmod\\text{ }998244353$ 的值。", "inputFormat": "输入第一行一个正整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n接下来 $T$ 组数据，每组一行一个正整数 $n$ $(1\\leq n\\leq 10^9)$，表示序列的长度。", "outputFormat": "$T$ 行，每行一个整数表示 $a_1$ 的期望 $\\bmod\\text{ }998244353$ 的值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10330", "type": "P", "difficulty": 2, "samples": [["3\n3 1\n3 2\n2 0", "4\n1100\n1\n0\n2"], ["4\n2 1\n3 3\n4 0\n3 2", "7\n1110000\n2\n0\n3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "Special Judge", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 黑白珠串", "background": "", "description": "你是宽窄巷子里的一位手艺人。这天，顾客向你订购一条黑白珠串。黑白珠串形如一条链，其上排列着黑色和白色的珠子。顾客还向你提出了 $k$ 个条件，每个条件如下：\n\n- 给定 $x,y$，要求黑白珠串中存在至少一个子串，满足子串的长度为 $x$，且恰好包含 $y$ 个黑珠。\n\n这里，子串指黑白珠串中的一段连续的珠子。\n\n请你为顾客构造出符合以上所有条件的黑白珠串，且满足珠串的长度最小。为了保证你构造的珠串满足上述条件，你还要对于每个条件，给出一个满足条件的子串的位置。", "inputFormat": "第一行包含一个整数 $k$ $(1\\leq k\\leq 10^5)$，表示条件的数量。\n\n接下来 $k$ 行，其中第 $i$ 行包含两个整数 $x_i,y_i$ $(1\\leq x_i\\leq 10^6,0\\leq y_i\\leq x_i)$，表示条件的内容。", "outputFormat": "第一行一个整数 $l$，表示满足条件的黑白珠串的最小长度。\n\n第二行一个由 ```0``` 和 ```1``` 构成的字符串，满足该字符串长度为 $l$，表示你构造的黑白珠串。其中 ```0``` 代表白珠，```1``` 代表黑珠。\n\n接下来 $k$ 行，其中第 $i$ 行包含一个整数 $p_i$，表示满足第 $i$ 个条件的一个子串在珠串中的起始位置。这里令珠串的位置编号从 $0$ 开始。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 黑白珠串", "background": "", "description": "你是宽窄巷子里的一位手艺人。这天，顾客向你订购一条黑白珠串。黑白珠串形如一条链，其上排列着黑色和白色的珠子。顾客还向你提出了 $k$ 个条件，每个条件如下：\n\n- 给定 $x,y$，要求黑白珠串中存在至少一个子串，满足子串的长度为 $x$，且恰好包含 $y$ 个黑珠。\n\n这里，子串指黑白珠串中的一段连续的珠子。\n\n请你为顾客构造出符合以上所有条件的黑白珠串，且满足珠串的长度最小。为了保证你构造的珠串满足上述条件，你还要对于每个条件，给出一个满足条件的子串的位置。", "inputFormat": "第一行包含一个整数 $k$ $(1\\leq k\\leq 10^5)$，表示条件的数量。\n\n接下来 $k$ 行，其中第 $i$ 行包含两个整数 $x_i,y_i$ $(1\\leq x_i\\leq 10^6,0\\leq y_i\\leq x_i)$，表示条件的内容。", "outputFormat": "第一行一个整数 $l$，表示满足条件的黑白珠串的最小长度。\n\n第二行一个由 ```0``` 和 ```1``` 构成的字符串，满足该字符串长度为 $l$，表示你构造的黑白珠串。其中 ```0``` 代表白珠，```1``` 代表黑珠。\n\n接下来 $k$ 行，其中第 $i$ 行包含一个整数 $p_i$，表示满足第 $i$ 个条件的一个子串在珠串中的起始位置。这里令珠串的位置编号从 $0$ 开始。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10331", "type": "P", "difficulty": 5, "samples": [["2\n5\n11001\n5\n11000", "1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 消消乐", "background": "", "description": "bjh 有一个长度为 $n$ 的只由字符 ```0``` 和 ```1``` 构成的字符串 $s$。\n\nbjh 的每次操作可以选择一个长度**大于 1** 的极大的只包含一种字符的子串，将这一整个子串修改为与其中字符相反的一个字符（如 $11001$ 一次操作后可以改为 $0001$ 或 $1111$）。\n\nbjh 会一直操作下去，直到字符串无法再被操作，请帮他找到所有操作方案中最大操作次数和最小操作次数的差值。", "inputFormat": "本题包含多组数据。第一行输入一个整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n对于每组数据，第一行输入一个整数 $n$ $(1\\leq n\\leq 10^5)$，表示字符串的长度。\n\n第二行输入一个字符串 $s$，表示初始的字符串。\n\n保证所有数据的 $n$ 之和不超过 $10^6$。", "outputFormat": "对于每组数据，输出一个整数，表示最大操作次数和最小操作次数的差值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 消消乐", "background": "", "description": "bjh 有一个长度为 $n$ 的只由字符 ```0``` 和 ```1``` 构成的字符串 $s$。\n\nbjh 的每次操作可以选择一个长度**大于 1** 的极大的只包含一种字符的子串，将这一整个子串修改为与其中字符相反的一个字符（如 $11001$ 一次操作后可以改为 $0001$ 或 $1111$）。\n\nbjh 会一直操作下去，直到字符串无法再被操作，请帮他找到所有操作方案中最大操作次数和最小操作次数的差值。", "inputFormat": "本题包含多组数据。第一行输入一个整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n对于每组数据，第一行输入一个整数 $n$ $(1\\leq n\\leq 10^5)$，表示字符串的长度。\n\n第二行输入一个字符串 $s$，表示初始的字符串。\n\n保证所有数据的 $n$ 之和不超过 $10^6$。", "outputFormat": "对于每组数据，输出一个整数，表示最大操作次数和最小操作次数的差值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10332", "type": "P", "difficulty": 6, "samples": [["5\n5 4 3 2 1\n0.9 0.89 0.88 0.87 0.86\n1 1 2 2", "11.572522416"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 一站到底", "background": "", "description": "假设你是电子科技大学的学生李华，在 4202 年的某一期一站到底中，你作为选手参加了节目的录制。不同于 2000 多年前的规则，节目中不会进行选手两两对战并抢答或轮答题目的环节，每位选手的答题以单人赛的方式进行，具体规则如下：\n\n在选手的答题环节开始前，系统会从题库中抽取 $n$ 道题，每道题根据难度系数有 $a_i$ 的分值。主持人会在一开始公布所有的题目内容和分值，之后进入选手的答题环节。\n\n为了增加节目的趣味性，在答题环节中，选手并不能随意选择作答题目的顺序。具体的，除 $1$ 号题目外所有题目**有且仅有**一道前置题目，在选手正确作答出某道题的前置题目后才可以进行作答这道题。节目组保证编号为 $i$ 的题目的前置题目编号必然小于 $i$。\n\n此外，如果选手作答题目时提交了错误答案，那么其脚下的地板将立刻打开，选手掉落并结束作答，此前答对的所有题目的分值之和就是该选手的得分。如果选手答对了所有的题目，那么所有题目的分值之和就是该选手的得分。\n\n现在你已经看完了所有的题目，根据你的知识储备，你判断出了每道题你做对的概率 $p_i$。你需要在最短时间内制定出最优的做题策略去最大化你的期望得分，请输出这个得分，~~并以参加这次节目的过程为主题写一篇不少于 120 词的英语作文~~。", "inputFormat": "第一行一个正整数 $n$ $(2\\le n\\le 10^5)$，代表题目的数量。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^6)$，$a_i$ 代表编号为 $i$ 的题目的分值。\n\n接下来一行 $n$ 个实数 $p_1,p_2,\\ldots,p_n$ $(0<p_i<1)$，$p_i$ 代表你答对编号为 $i$ 的题目的概率。\n\n接下来一行 $n-1$ 个正整数 $t_1,t_2,\\ldots,t_{n-1}$ $(1\\leq t_i\\leq i)$，$t_i$ 代表编号为 $i+1$ 的题目的前置题目的编号。", "outputFormat": "输出一行一个实数，代表在最优做题策略下的期望得分。\n\n假设你的输出是 $a$，答案是 $b$，当且仅当 $\\frac{|a-b|}{\\max(1,b)}\\le 10^{-9}$ 时，你的答案会被认为是正确的。", "hint": "在样例中，分值越高的题目你也有越大的概率答对，显然按照 $1,2,3,4,5$ 的顺序去答题最优。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 一站到底", "background": "", "description": "假设你是电子科技大学的学生李华，在 4202 年的某一期一站到底中，你作为选手参加了节目的录制。不同于 2000 多年前的规则，节目中不会进行选手两两对战并抢答或轮答题目的环节，每位选手的答题以单人赛的方式进行，具体规则如下：\n\n在选手的答题环节开始前，系统会从题库中抽取 $n$ 道题，每道题根据难度系数有 $a_i$ 的分值。主持人会在一开始公布所有的题目内容和分值，之后进入选手的答题环节。\n\n为了增加节目的趣味性，在答题环节中，选手并不能随意选择作答题目的顺序。具体的，除 $1$ 号题目外所有题目**有且仅有**一道前置题目，在选手正确作答出某道题的前置题目后才可以进行作答这道题。节目组保证编号为 $i$ 的题目的前置题目编号必然小于 $i$。\n\n此外，如果选手作答题目时提交了错误答案，那么其脚下的地板将立刻打开，选手掉落并结束作答，此前答对的所有题目的分值之和就是该选手的得分。如果选手答对了所有的题目，那么所有题目的分值之和就是该选手的得分。\n\n现在你已经看完了所有的题目，根据你的知识储备，你判断出了每道题你做对的概率 $p_i$。你需要在最短时间内制定出最优的做题策略去最大化你的期望得分，请输出这个得分，~~并以参加这次节目的过程为主题写一篇不少于 120 词的英语作文~~。", "inputFormat": "第一行一个正整数 $n$ $(2\\le n\\le 10^5)$，代表题目的数量。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^6)$，$a_i$ 代表编号为 $i$ 的题目的分值。\n\n接下来一行 $n$ 个实数 $p_1,p_2,\\ldots,p_n$ $(0<p_i<1)$，$p_i$ 代表你答对编号为 $i$ 的题目的概率。\n\n接下来一行 $n-1$ 个正整数 $t_1,t_2,\\ldots,t_{n-1}$ $(1\\leq t_i\\leq i)$，$t_i$ 代表编号为 $i+1$ 的题目的前置题目的编号。", "outputFormat": "输出一行一个实数，代表在最优做题策略下的期望得分。\n\n假设你的输出是 $a$，答案是 $b$，当且仅当 $\\frac{|a-b|}{\\max(1,b)}\\le 10^{-9}$ 时，你的答案会被认为是正确的。", "hint": "在样例中，分值越高的题目你也有越大的概率答对，显然按照 $1,2,3,4,5$ 的顺序去答题最优。", "locale": "zh-CN"}}}
{"pid": "P10333", "type": "P", "difficulty": 6, "samples": [["4 2 3\n0 2 3 2\n3 0\n2 1 4\n4 0", "22"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "斜率优化", "高校校赛"], "title": "[UESTCPC 2024] 打字", "background": "", "description": "给定一颗 $n$ 个节点的 trie 树，以 $1$ 号节点为根，其余每个节点到父亲的边上都有一个字符，且父亲相同的节点到父亲的边上的字符互不相同。从根到每个节点的路径都代表一个单词，这个单词由路径上的字符顺序拼接而成。在每个节点 $i$ 处有一个权值 $c_i$，表示该节点所代表的单词需要写出的次数。\n\n你有一个 cache，可以选择任意个单词放在 cache 里面。写单词时，每写一个字符需要花费 $a$ 的代价。当写出一个完整的单词时，就可以选择结束当前单词，转而拼写下一个单词。而 cache 会根据当前已经写出的字符，把 cache 中以这一部分字符为前缀且字典序最小的单词提示出来。此时你可以花费 $b$ 的代价直接写出这个单词，**并结束当前单词的拼写**，转而拼写下一个单词。注意一个字符串本身也看作它自己的前缀。\n\n求完成 trie 树上所有单词的拼写所需的最小代价。", "inputFormat": "第一行输入三个整数 $n,a,b$ $(1\\leq n\\leq 2\\times 10^5,0\\leq a,b\\leq 10^4)$，分别表示 trie 树的大小、写一个字符的代价和使用 cache 写出单词的代价。\n\n接下来 $n$ 行，其中第 $i$ 行首先输入两个整数 $c_i,k_i$ $(0\\leq c_i\\leq 10^4,0\\leq k_i<n)$，分别表示第 $i$ 个节点上的权值和第 $i$ 个节点的儿子节点的个数。接下来输入 $k_i$ 个整数 $son_{i,1},son_{i,2},\\ldots,son_{i,k_i}$，表示第 $i$ 个节点的儿子节点编号，按照第 $i$ 个节点到儿子节点的边上的字符之间的字典序从小到大依次给出。\n\n保证 $c_1=0$。", "outputFormat": "输出一行一个整数，表示完成 trie 树上所有单词的拼写所需的最小代价。", "hint": "**【样例解释】**\n\n假设每个节点的子节点按字典序从小到大按 $a,b,\\ldots$ 编码。最优方案为将 $aa$ 放在 cache 中，于是 $aa$ 可以花费 $3\\times 4$\n的代价利用提示打出来，$a$ 和 $b$\n都直接打出来。总代价为 $3\\times 4+2\\times 1\\times 2+2\\times 1\\times 3=22$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 打字", "background": "", "description": "给定一颗 $n$ 个节点的 trie 树，以 $1$ 号节点为根，其余每个节点到父亲的边上都有一个字符，且父亲相同的节点到父亲的边上的字符互不相同。从根到每个节点的路径都代表一个单词，这个单词由路径上的字符顺序拼接而成。在每个节点 $i$ 处有一个权值 $c_i$，表示该节点所代表的单词需要写出的次数。\n\n你有一个 cache，可以选择任意个单词放在 cache 里面。写单词时，每写一个字符需要花费 $a$ 的代价。当写出一个完整的单词时，就可以选择结束当前单词，转而拼写下一个单词。而 cache 会根据当前已经写出的字符，把 cache 中以这一部分字符为前缀且字典序最小的单词提示出来。此时你可以花费 $b$ 的代价直接写出这个单词，**并结束当前单词的拼写**，转而拼写下一个单词。注意一个字符串本身也看作它自己的前缀。\n\n求完成 trie 树上所有单词的拼写所需的最小代价。", "inputFormat": "第一行输入三个整数 $n,a,b$ $(1\\leq n\\leq 2\\times 10^5,0\\leq a,b\\leq 10^4)$，分别表示 trie 树的大小、写一个字符的代价和使用 cache 写出单词的代价。\n\n接下来 $n$ 行，其中第 $i$ 行首先输入两个整数 $c_i,k_i$ $(0\\leq c_i\\leq 10^4,0\\leq k_i<n)$，分别表示第 $i$ 个节点上的权值和第 $i$ 个节点的儿子节点的个数。接下来输入 $k_i$ 个整数 $son_{i,1},son_{i,2},\\ldots,son_{i,k_i}$，表示第 $i$ 个节点的儿子节点编号，按照第 $i$ 个节点到儿子节点的边上的字符之间的字典序从小到大依次给出。\n\n保证 $c_1=0$。", "outputFormat": "输出一行一个整数，表示完成 trie 树上所有单词的拼写所需的最小代价。", "hint": "**【样例解释】**\n\n假设每个节点的子节点按字典序从小到大按 $a,b,\\ldots$ 编码。最优方案为将 $aa$ 放在 cache 中，于是 $aa$ 可以花费 $3\\times 4$\n的代价利用提示打出来，$a$ 和 $b$\n都直接打出来。总代价为 $3\\times 4+2\\times 1\\times 2+2\\times 1\\times 3=22$。", "locale": "zh-CN"}}}
{"pid": "P10334", "type": "P", "difficulty": 4, "samples": [["5\n1 3 4 6 6\n3 8 2 7 4", "24"], ["5\n1 3 4 5 5\n3 8 2 7 4", "26"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2024", "O2优化", "单调栈", "高校校赛"], "title": "[UESTCPC 2024] 饮料", "background": "", "description": "有一个果汁机，每分钟可以制作一杯任意体积的果汁。\n\n有 $n$ 个人排成一队。第 $i$ 个人将在第 $t_i$ 分钟走到果汁机前，并拿走当前已经制作的果汁中体积最大的一杯。第 $i$ 个人拿到体积大于等于 $a_i$ 的果汁就会满意。如果此时没有果汁，则第 $i$ 个人也会不满意。\n\n问是否能够让所有人满意。如果是，输出让所有人满意所需的果汁体积之和的最小值。", "inputFormat": "第一行一个整数 $n$ $(1\\leq n\\leq 2 \\times 10^5)$，表示队伍中人的数量。\n\n接下来一行 $n$ 个整数 $t_1,t_2,\\ldots,t_n$ $(1\\leq t_1\\leq t_2\\leq\\ldots\\leq t_n\\leq 10^9)$，其中 $t_i$ 表示第 $i$ 个人到果汁机前的时间。如果两个人的到达时间相同，则按题目给出的顺序从左到右决定先后。\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，其中 $a_i$ 表示第 $i$ 个人对果汁的体积要求。\n", "outputFormat": "如果不能令所有人满意，输出 $-1$。\n\n否则输出一行一个整数，表示所需的最小体积和。", "hint": "样例一解释如下：\n\n| 时间 | 制作 | 取走 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | $3$ |\n| $2$ | $-$ | $-$ |\n| $3$ | $8$ | $8$ |\n| $4$ | $2$ | $2$ |\n| $5$ | $4$ | $-$ |\n| $6$ | $7$ | $7,4$ |\n\n样例二解释如下：\n\n| 时间 | 制作 | 取走 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | $3$ |\n| $2$ | $4$ | $-$ |\n| $3$ | $8$ | $8$ |\n| $4$ | $4$ | $4$ |\n| $5$ | $7$ | $7,4$ |\n| $6$ | $-$ | $-$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 饮料", "background": "", "description": "有一个果汁机，每分钟可以制作一杯任意体积的果汁。\n\n有 $n$ 个人排成一队。第 $i$ 个人将在第 $t_i$ 分钟走到果汁机前，并拿走当前已经制作的果汁中体积最大的一杯。第 $i$ 个人拿到体积大于等于 $a_i$ 的果汁就会满意。如果此时没有果汁，则第 $i$ 个人也会不满意。\n\n问是否能够让所有人满意。如果是，输出让所有人满意所需的果汁体积之和的最小值。", "inputFormat": "第一行一个整数 $n$ $(1\\leq n\\leq 2 \\times 10^5)$，表示队伍中人的数量。\n\n接下来一行 $n$ 个整数 $t_1,t_2,\\ldots,t_n$ $(1\\leq t_1\\leq t_2\\leq\\ldots\\leq t_n\\leq 10^9)$，其中 $t_i$ 表示第 $i$ 个人到果汁机前的时间。如果两个人的到达时间相同，则按题目给出的顺序从左到右决定先后。\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，其中 $a_i$ 表示第 $i$ 个人对果汁的体积要求。\n", "outputFormat": "如果不能令所有人满意，输出 $-1$。\n\n否则输出一行一个整数，表示所需的最小体积和。", "hint": "样例一解释如下：\n\n| 时间 | 制作 | 取走 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | $3$ |\n| $2$ | $-$ | $-$ |\n| $3$ | $8$ | $8$ |\n| $4$ | $2$ | $2$ |\n| $5$ | $4$ | $-$ |\n| $6$ | $7$ | $7,4$ |\n\n样例二解释如下：\n\n| 时间 | 制作 | 取走 |\n| :----------: | :----------: | :----------: |\n| $1$ | $3$ | $3$ |\n| $2$ | $4$ | $-$ |\n| $3$ | $8$ | $8$ |\n| $4$ | $4$ | $4$ |\n| $5$ | $7$ | $7,4$ |\n| $6$ | $-$ | $-$ |", "locale": "zh-CN"}}}
{"pid": "P10335", "type": "P", "difficulty": 3, "samples": [["3\n3 \n3 6 4\n2 \n1 2\n3\n2 5 6", "NO\nYES\nNO"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["博弈论", "2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 取数游戏", "background": "", "description": "有一个长度为 $n$ 的序列，第 $i$ 个数的权值为 $a_i$。两位选手 A 和 B 在做游戏，他们将对轮流对序列进行操作。每位选手每次有两种操作可以选择：\n\n- 删除序列中的任意两个的数 $a_i,a_j$ $(i \\neq j)$，并在序列中添加一个权值为 $a_i+a_j$ 的数。当序列中只有一个数时，不能执行该操作。\n- 取走序列中一个数，将序列中剩下的数的权值全部累加给对方，结束游戏。\n\n如果最后 A 得到的权值更多，则他胜利，否则 B 胜利。\n\nA 先进行操作，问他是否有必胜策略。**保证 $a_i$ 之和为奇数。**", "inputFormat": "本题包含多组数据。\n\n第一行输入一个整数 $T$ $(1\\leq T\\leq 10^5)$，表示数据组数。\n\n对于每组数据，输入格式如下。\n\n第一行一个整数 $n$ $(1\\leq n\\leq 5 \\times 10^5)$，表示序列的初始长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，表示初始的序列。\n\n数据保证 $\\sum n\\leq 10^6$ 且 $\\sum a_i$ 为奇数。", "outputFormat": "对于每组数据，如果 A 有必胜策略，输出 `YES`，否则输出 `NO`。", "hint": "样例一解释如下：\n\n- 如果 A 选择权值 $3$，则 B 能得到的权值为 $6+4=10$。\n- 如果 A 选择权值 $4$，则 B 能得到的权值为 $3+6=9$。\n- 如果 A 选择权值 $6$，则 B 能得到的权值为 $3+4=7$。\n- 如果 A 选择合并权值 $3,6$，序列变为 $9,4$。若 B 选择权值 $9$，则 A 能得到的权值为 $4$。\n- 如果 A 选择合并权值 $3,4$，序列变为 $7,6$。若 B 选择权值 $7$，则 A 能得到的权值为 $6$。\n- 如果 A 选择合并权值 $4,6$，序列变为 $10,3$。若 B 选择权值 $10$，则 A 能得到的权值为 $3$。\n\n在所有情况下 B 均能以最优策略取得更高的权值，故 A 无法胜利。\n\n样例二解释如下：\n\n如果 A 选择权值 $2$，则 B 能得到的权值为 $1$。\n\n因此 A 有必胜策略。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 取数游戏", "background": "", "description": "有一个长度为 $n$ 的序列，第 $i$ 个数的权值为 $a_i$。两位选手 A 和 B 在做游戏，他们将对轮流对序列进行操作。每位选手每次有两种操作可以选择：\n\n- 删除序列中的任意两个的数 $a_i,a_j$ $(i \\neq j)$，并在序列中添加一个权值为 $a_i+a_j$ 的数。当序列中只有一个数时，不能执行该操作。\n- 取走序列中一个数，将序列中剩下的数的权值全部累加给对方，结束游戏。\n\n如果最后 A 得到的权值更多，则他胜利，否则 B 胜利。\n\nA 先进行操作，问他是否有必胜策略。**保证 $a_i$ 之和为奇数。**", "inputFormat": "本题包含多组数据。\n\n第一行输入一个整数 $T$ $(1\\leq T\\leq 10^5)$，表示数据组数。\n\n对于每组数据，输入格式如下。\n\n第一行一个整数 $n$ $(1\\leq n\\leq 5 \\times 10^5)$，表示序列的初始长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，表示初始的序列。\n\n数据保证 $\\sum n\\leq 10^6$ 且 $\\sum a_i$ 为奇数。", "outputFormat": "对于每组数据，如果 A 有必胜策略，输出 `YES`，否则输出 `NO`。", "hint": "样例一解释如下：\n\n- 如果 A 选择权值 $3$，则 B 能得到的权值为 $6+4=10$。\n- 如果 A 选择权值 $4$，则 B 能得到的权值为 $3+6=9$。\n- 如果 A 选择权值 $6$，则 B 能得到的权值为 $3+4=7$。\n- 如果 A 选择合并权值 $3,6$，序列变为 $9,4$。若 B 选择权值 $9$，则 A 能得到的权值为 $4$。\n- 如果 A 选择合并权值 $3,4$，序列变为 $7,6$。若 B 选择权值 $7$，则 A 能得到的权值为 $6$。\n- 如果 A 选择合并权值 $4,6$，序列变为 $10,3$。若 B 选择权值 $10$，则 A 能得到的权值为 $3$。\n\n在所有情况下 B 均能以最优策略取得更高的权值，故 A 无法胜利。\n\n样例二解释如下：\n\n如果 A 选择权值 $2$，则 B 能得到的权值为 $1$。\n\n因此 A 有必胜策略。", "locale": "zh-CN"}}}
{"pid": "P10336", "type": "P", "difficulty": 5, "samples": [["2 2\n1 0\n0 1\n1 1\n0 0", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 2-聚类算法", "background": "", "description": "Alice 和 Bob 是两只 $k$ 维空间中的生物。在他们生活的空间中，分布着 $2n$ 个特征点，其中第 $i$ 个特征点的坐标为 $(x_{i,1},x_{i,2},\\ldots,x_{i,k})$。\n\n在这个空间中，两点之间的距离被定义为它们之间的曼哈顿距离（即点 $i$ 与点 $j$ 之间的距离 $\\text{dist}_{i,j}=\\sum_{p=1}^{k}|x_{i,p}-x_{j,p}|$）。\n\nAlice 和 Bob 需要收集这些特征点。他们轮流从这 $2n$ 个点中选走一个点，已经被选走的点不能被再次选走。Alice 先手。Alice 会将她选走的点放入集合 $S_1$，而 Bob 会将他选走的点放入集合 $S_2$。\n\n设一个集合的价值 $\\text{val}(S)$ 为其中两两点之间的距离之和。Alice 希望最大化 $\\text{val}(S_1)-\\text{val}(S_2)$，而 Bob 希望最小化 $\\text{val}(S_1)-\\text{val}(S_2)$。\n\n若 Alice 和 Bob 都采取最优策略，请你求出最终 $\\text{val}(S_1)-\\text{val}(S_2)$ 的值会是多少？", "inputFormat": "第一行输入两个整数 $n,k$ $(1\\leq n,k\\leq 10^5,n\\times k\\leq 10^5)$，分别表示特征点的数量的一半和空间的维度数量。\n\n接下来 $2n$ 行，每行 $k$ 个整数 $x_{i,1},x_{i,2},\\ldots,x_{i,k}$ $(-10^8\\leq x_{i,j}\\leq 10^8)$，表示第 $i$ 个特征点的坐标。", "outputFormat": "输出一个整数，表示 Alice 和 Bob 都采取最优策略的情况下 $\\text{val}(S_1)-\\text{val}(S_2)$ 的值。\n\n“两两点之间的距离之和”对于每一个无序对只计算一次。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 2-聚类算法", "background": "", "description": "Alice 和 Bob 是两只 $k$ 维空间中的生物。在他们生活的空间中，分布着 $2n$ 个特征点，其中第 $i$ 个特征点的坐标为 $(x_{i,1},x_{i,2},\\ldots,x_{i,k})$。\n\n在这个空间中，两点之间的距离被定义为它们之间的曼哈顿距离（即点 $i$ 与点 $j$ 之间的距离 $\\text{dist}_{i,j}=\\sum_{p=1}^{k}|x_{i,p}-x_{j,p}|$）。\n\nAlice 和 Bob 需要收集这些特征点。他们轮流从这 $2n$ 个点中选走一个点，已经被选走的点不能被再次选走。Alice 先手。Alice 会将她选走的点放入集合 $S_1$，而 Bob 会将他选走的点放入集合 $S_2$。\n\n设一个集合的价值 $\\text{val}(S)$ 为其中两两点之间的距离之和。Alice 希望最大化 $\\text{val}(S_1)-\\text{val}(S_2)$，而 Bob 希望最小化 $\\text{val}(S_1)-\\text{val}(S_2)$。\n\n若 Alice 和 Bob 都采取最优策略，请你求出最终 $\\text{val}(S_1)-\\text{val}(S_2)$ 的值会是多少？", "inputFormat": "第一行输入两个整数 $n,k$ $(1\\leq n,k\\leq 10^5,n\\times k\\leq 10^5)$，分别表示特征点的数量的一半和空间的维度数量。\n\n接下来 $2n$ 行，每行 $k$ 个整数 $x_{i,1},x_{i,2},\\ldots,x_{i,k}$ $(-10^8\\leq x_{i,j}\\leq 10^8)$，表示第 $i$ 个特征点的坐标。", "outputFormat": "输出一个整数，表示 Alice 和 Bob 都采取最优策略的情况下 $\\text{val}(S_1)-\\text{val}(S_2)$ 的值。\n\n“两两点之间的距离之和”对于每一个无序对只计算一次。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10337", "type": "P", "difficulty": 2, "samples": [["1\n3\n2 6 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024", "O2优化", "高校校赛"], "title": "[UESTCPC 2024] 操作序列", "background": "", "description": "给定一个长度为 $n$ 的序列 $a_1,a_2,\\ldots,a_n$。\n\n你需要选定一个整数 $k$ $(1\\leq k\\leq n)$，然后对序列进行任意次操作，每次操作可以选择序列中 $k$ 个不同的位置，使得这些位置的数乘上一个相同的非零整数，最终使得序列中所有的数相等。\n\n输出满足条件的 $k$ 的最大值。", "inputFormat": "本题包含多组数据。第一行输入一个整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n对于每组数据，第一行输入一个整数 $n$ $(1\\leq n\\leq 10^5)$，表示序列的长度。\n\n第二行输入 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，表示给定的序列。\n\n保证所有数据的 $n$ 之和不超过 $10^6$。", "outputFormat": "对于每组数据，输出一个整数，表示满足条件的 $k$ 的最大值。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[UESTCPC 2024] 操作序列", "background": "", "description": "给定一个长度为 $n$ 的序列 $a_1,a_2,\\ldots,a_n$。\n\n你需要选定一个整数 $k$ $(1\\leq k\\leq n)$，然后对序列进行任意次操作，每次操作可以选择序列中 $k$ 个不同的位置，使得这些位置的数乘上一个相同的非零整数，最终使得序列中所有的数相等。\n\n输出满足条件的 $k$ 的最大值。", "inputFormat": "本题包含多组数据。第一行输入一个整数 $T$ $(1\\leq T\\leq 10^4)$，表示数据组数。\n\n对于每组数据，第一行输入一个整数 $n$ $(1\\leq n\\leq 10^5)$，表示序列的长度。\n\n第二行输入 $n$ 个整数 $a_1,a_2,\\ldots,a_n$ $(1\\leq a_i\\leq 10^9)$，表示给定的序列。\n\n保证所有数据的 $n$ 之和不超过 $10^6$。", "outputFormat": "对于每组数据，输出一个整数，表示满足条件的 $k$ 的最大值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10338", "type": "P", "difficulty": 6, "samples": [["3 6\n1 2\n2 2\n2 0\n1 1 1 1\n1 2 2 1\n2 1 3\n3 3 1 1\n1 3 3 3\n2 1 3\n", "833333340\n83333337\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 彩票", "background": "", "description": "华清大学内有一个彩票站点，站点内设有 $n$ 个彩箱。初始时每个彩箱内都放有若干奖券，奖券分为中奖券与空奖券两种，其中第 $i$ 个彩箱内有 $a_i$ 张中奖券、$b_i$ 张空奖券。同学们每次抽奖时，将会选择一个彩箱，然后从该彩箱剩余的奖券中等概率随机抽取一张，即剩余的每张奖券被抽中的概率均相等。注意：被抽出的奖券将不放回彩箱。\n\n现在有 $m$ 位同学在彩票站点排队，同学们将依次每人进行一次操作。具体地，对于第 $j$ 个操作的同学，他可能进行的操作有以下三种：\n\n1. 抽奖：从第 $l_j$ 个到第 $r_j$ 个彩箱，对它们中的每个都连续抽取 $c_j$ 次奖。若彩箱中剩余奖券数量不足 $c_j$，则将彩箱中所有奖券抽完为止。\n2. 询问：从第 $x_j$ 个到第 $y_j$ 个彩箱，求所有被抽出的中奖券的数量之和的期望值。\n3. 加奖：在第 $p_j$ 个彩箱中，添加 $u_j$ 张中奖券和 $v_j$ 张空奖券。\n\n现在请你回答同学们的每次询问。由题目性质知，期望值一定可以写成 $\\frac{p}{q}$ 形式的有理数，请你输出它对 $10^9+7$（一个质数）取模后的结果，即找出一个 $r$ $(0\\leq r < 10^9+7)$ 使得 $qr \\equiv p \\pmod{10^9+7}$。可以证明这样的 $r$ 是唯一的。", "inputFormat": "第一行两个正整数 $n,m$，分别表示彩箱数和同学人数。\n\n接下来 $n$ 行，每行描述一个彩箱。\n\n这 $n$ 行中的第 $i$ 行有两个整数 $a_i,b_i$，意义见题目描述。\n\n接下来 $m$ 行，每行描述一个同学的操作。\n\n这 $m$ 行中的第 $j$ 行的第一个整数 $op_j$ 表示操作类型。若 $op_j=1$，接下来输入三个整数 $l_j,r_j,c_j$；若 $op_j = 2$，接下来输入两个整数 $x_j,y_j$；若 $op_j=3$，接下来输入三个整数 $p_j,u_j,v_j$。具体变量意义见题目描述。\n\n同一行内整数均由一个空格分隔开。\n\n输入数据保证：\n\n$0 \\leq a_i,b_i,c_j \\leq 10^8$\n\n$0\\leq u_j,v_j \\leq 10^3$\n\n$1\\leq l_j\\leq r_j \\leq n$\n\n$1\\leq x_j\\leq y_j\\leq n$\n\n$1\\leq p_j\\leq n$\n\n$op_j \\in \\{1,2,3\\}$", "outputFormat": "对于每个 $op_j = 2$ 的询问，输出一行一个整数表示询问的答案。", "hint": "**【样例解释 1】**\n\n第一位同学操作后，第 1 个彩箱中被抽出的中奖券数量期望值为 $\\frac{1}{3}$。\n\n第二位同学操作后，第 2 个彩箱中被抽出的中奖券数量期望值为 $\\frac{1}{2}$。\n\n第三位同学的答案即为：$\\frac{1}{3} + \\frac{1}{2} = \\frac{5}{6}$，它对 $10^9+7$ 取模的结果为 $833333340$。\n\n第四位同学操作后，第 3 个彩箱中有 3 张中奖券、1 张空奖券。\n\n第五位同学操作后，第 3 个彩箱中被抽出的中奖券数量期望值为 $\\frac{9}{4}$。\n\n第六位同学的答案即为：$\\frac{1}{3} + \\frac{1}{2} + \\frac{9}{4} = \\frac{37}{12}$，它对 $10^9+7$ 取模的结果为 $83333337$。\n\n**【样例 2】**\n\n见题目附件中 `2.in/2.ans`。\n\n**【样例 3】**\n\n见题目附件中 `3.in/3.ans`。\n\n**【样例 4】**\n\n见题目附件中 `4.in/4.ans`。\n\n**【子任务】**\n\n| 子任务编号| 分值 | $n,m\\leq$ | 其他限制 |\n| :--: | :--: | :--: | :--: |\n| 1 | 23 | $1000$ | $0\\leq a_i,b_i \\leq 10$ 且 $op_j \\neq 3$|\n| 2 | 17 | $10^5$ | $op_j \\neq 3$ 且 $l_j = r_j$ |\n| 3 | 20 | $2 \\times 10^5$ | $l_j=r_j$ |\n| 4 | 20 | $2 \\times 10^5$ | $op_j \\neq 3$ |\n| 5 | 20 | $3 \\times 10^5$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 彩票", "background": "", "description": "华清大学内有一个彩票站点，站点内设有 $n$ 个彩箱。初始时每个彩箱内都放有若干奖券，奖券分为中奖券与空奖券两种，其中第 $i$ 个彩箱内有 $a_i$ 张中奖券、$b_i$ 张空奖券。同学们每次抽奖时，将会选择一个彩箱，然后从该彩箱剩余的奖券中等概率随机抽取一张，即剩余的每张奖券被抽中的概率均相等。注意：被抽出的奖券将不放回彩箱。\n\n现在有 $m$ 位同学在彩票站点排队，同学们将依次每人进行一次操作。具体地，对于第 $j$ 个操作的同学，他可能进行的操作有以下三种：\n\n1. 抽奖：从第 $l_j$ 个到第 $r_j$ 个彩箱，对它们中的每个都连续抽取 $c_j$ 次奖。若彩箱中剩余奖券数量不足 $c_j$，则将彩箱中所有奖券抽完为止。\n2. 询问：从第 $x_j$ 个到第 $y_j$ 个彩箱，求所有被抽出的中奖券的数量之和的期望值。\n3. 加奖：在第 $p_j$ 个彩箱中，添加 $u_j$ 张中奖券和 $v_j$ 张空奖券。\n\n现在请你回答同学们的每次询问。由题目性质知，期望值一定可以写成 $\\frac{p}{q}$ 形式的有理数，请你输出它对 $10^9+7$（一个质数）取模后的结果，即找出一个 $r$ $(0\\leq r < 10^9+7)$ 使得 $qr \\equiv p \\pmod{10^9+7}$。可以证明这样的 $r$ 是唯一的。", "inputFormat": "第一行两个正整数 $n,m$，分别表示彩箱数和同学人数。\n\n接下来 $n$ 行，每行描述一个彩箱。\n\n这 $n$ 行中的第 $i$ 行有两个整数 $a_i,b_i$，意义见题目描述。\n\n接下来 $m$ 行，每行描述一个同学的操作。\n\n这 $m$ 行中的第 $j$ 行的第一个整数 $op_j$ 表示操作类型。若 $op_j=1$，接下来输入三个整数 $l_j,r_j,c_j$；若 $op_j = 2$，接下来输入两个整数 $x_j,y_j$；若 $op_j=3$，接下来输入三个整数 $p_j,u_j,v_j$。具体变量意义见题目描述。\n\n同一行内整数均由一个空格分隔开。\n\n输入数据保证：\n\n$0 \\leq a_i,b_i,c_j \\leq 10^8$\n\n$0\\leq u_j,v_j \\leq 10^3$\n\n$1\\leq l_j\\leq r_j \\leq n$\n\n$1\\leq x_j\\leq y_j\\leq n$\n\n$1\\leq p_j\\leq n$\n\n$op_j \\in \\{1,2,3\\}$", "outputFormat": "对于每个 $op_j = 2$ 的询问，输出一行一个整数表示询问的答案。", "hint": "**【样例解释 1】**\n\n第一位同学操作后，第 1 个彩箱中被抽出的中奖券数量期望值为 $\\frac{1}{3}$。\n\n第二位同学操作后，第 2 个彩箱中被抽出的中奖券数量期望值为 $\\frac{1}{2}$。\n\n第三位同学的答案即为：$\\frac{1}{3} + \\frac{1}{2} = \\frac{5}{6}$，它对 $10^9+7$ 取模的结果为 $833333340$。\n\n第四位同学操作后，第 3 个彩箱中有 3 张中奖券、1 张空奖券。\n\n第五位同学操作后，第 3 个彩箱中被抽出的中奖券数量期望值为 $\\frac{9}{4}$。\n\n第六位同学的答案即为：$\\frac{1}{3} + \\frac{1}{2} + \\frac{9}{4} = \\frac{37}{12}$，它对 $10^9+7$ 取模的结果为 $83333337$。\n\n**【样例 2】**\n\n见题目附件中 `2.in/2.ans`。\n\n**【样例 3】**\n\n见题目附件中 `3.in/3.ans`。\n\n**【样例 4】**\n\n见题目附件中 `4.in/4.ans`。\n\n**【子任务】**\n\n| 子任务编号| 分值 | $n,m\\leq$ | 其他限制 |\n| :--: | :--: | :--: | :--: |\n| 1 | 23 | $1000$ | $0\\leq a_i,b_i \\leq 10$ 且 $op_j \\neq 3$|\n| 2 | 17 | $10^5$ | $op_j \\neq 3$ 且 $l_j = r_j$ |\n| 3 | 20 | $2 \\times 10^5$ | $l_j=r_j$ |\n| 4 | 20 | $2 \\times 10^5$ | $op_j \\neq 3$ |\n| 5 | 20 | $3 \\times 10^5$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P10339", "type": "P", "difficulty": 5, "samples": [["6 6 3\n0 1 1 1 1 1\n3 4 6\n1 2 2\n2 3 3\n2 4 4\n1 5 3\n5 4 4\n5 6 3\n", "2\n"], ["7 6 3\n0 1 1 1 1 1 1\n3 4 6\n1 2 1\n2 4 1\n2 5 1\n5 6 5\n1 3 2\n1 7 5\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 补给计划", "background": "T 国是一个小国，受百年一遇的寒流影响，现在一些城市受到了严重的影响，T 国政府打算从首都派出救援队对受灾城市进行救助，同时建立若干补给点对救援队提供支持。", "description": "T 国一共有 $N$ 个城市（城市编号从 $1$ 到 $N$），这些城市被 $M$ 条双向道路所连接，每条道路有各自的长度（均大于 $0$）。\n\n共有 $K$ 个城市受灾，T 国政府计划从首都（$1$ 号城市）向这 $K$ 个城市各派出一支救援队，同时为了更好地完成救助，T 国政府计划在一些城市建立补给点。\n\n然而由于受到地理与资金等因素的影响，并不是每个城市都能建立补给点（一个城市能否建立补给点与其是否是首都或受灾城市无关）。\n\n为了尽快完成救助，这 $K$ 支救援队都只会按照最短路径前往自己的目的城市，T 国政府希望在能够建立补给点的城市中建立尽量少的补给点，使得每只救援队至少有一条到其目的城市的最短路径会经过至少一个补给点。\n\n现在告诉你 T 国的城市与道路信息，你需要计算出 T 国政府至少需要建立多少个补给点。", "inputFormat": "输入的第一行包含三个整数 $N,M,K$，含义见题目描述，保证 $1 \\le N \\le 200, 0 \\le M \\le 10000, 1 \\le K \\le 20$。\n\n第二行有 $N$ 个整数，每个数为 $0$ 或者 $1$，依次表示对应的城市能否建立补给点（$1$ 表示可以建立补给点）。\n\n第三行有 $K$ 个正整数 $x_i$，表示受灾的城市编号，保证这 $K$ 个数各不相同且首都不会受灾，$1 \\le x_i \\le N$。\n\n接下来 $M$ 行，每行三个整数 $u,v,w$，表示城市 $u$ 和城市 $v$ 之间存在一条长度为 $w$ 的道路，$1 \\le u,v \\le N, 0 < w \\le 10^9$。\n\n输入保证一定存在至少一个方案满足题目描述的要求。", "outputFormat": "输出一个整数表示答案。", "hint": "**【样例解释 1】**\n\n该样例对应的图形如下，其中 $1$ 号点是首都，$3,4,6$ 号点是受灾城市：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/64qspivj.png)\n\n该样例至少需要修建 $2$ 个补给点，可以分别建在 $2,5$ 或者 $2,6$ 。注意不能修建在 $3,5$ 号点，因为从首都到 $4$ 号点的最短路径只能是 $1 \\rightarrow 2 \\rightarrow 4$，不存在经过 $3,5$ 号点的最短路。\n\n**【子任务】**\n\n| 测试点  | $N$ | $M$ | $K$ | 特殊性质 |\n| :--:|:--:|:--:|:--:|:--:|\n| $1\\cdots 2$ | $1 \\le N \\le 200$ | $M=N-1$| $1 \\le K \\le 20$ | 输入是一棵树 |\n| $3\\cdots 6$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 4$ | 无 |\n| $7\\cdots 12$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 16$ | 无 |\n| $13\\cdots 20$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 20$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 补给计划", "background": "T 国是一个小国，受百年一遇的寒流影响，现在一些城市受到了严重的影响，T 国政府打算从首都派出救援队对受灾城市进行救助，同时建立若干补给点对救援队提供支持。", "description": "T 国一共有 $N$ 个城市（城市编号从 $1$ 到 $N$），这些城市被 $M$ 条双向道路所连接，每条道路有各自的长度（均大于 $0$）。\n\n共有 $K$ 个城市受灾，T 国政府计划从首都（$1$ 号城市）向这 $K$ 个城市各派出一支救援队，同时为了更好地完成救助，T 国政府计划在一些城市建立补给点。\n\n然而由于受到地理与资金等因素的影响，并不是每个城市都能建立补给点（一个城市能否建立补给点与其是否是首都或受灾城市无关）。\n\n为了尽快完成救助，这 $K$ 支救援队都只会按照最短路径前往自己的目的城市，T 国政府希望在能够建立补给点的城市中建立尽量少的补给点，使得每只救援队至少有一条到其目的城市的最短路径会经过至少一个补给点。\n\n现在告诉你 T 国的城市与道路信息，你需要计算出 T 国政府至少需要建立多少个补给点。", "inputFormat": "输入的第一行包含三个整数 $N,M,K$，含义见题目描述，保证 $1 \\le N \\le 200, 0 \\le M \\le 10000, 1 \\le K \\le 20$。\n\n第二行有 $N$ 个整数，每个数为 $0$ 或者 $1$，依次表示对应的城市能否建立补给点（$1$ 表示可以建立补给点）。\n\n第三行有 $K$ 个正整数 $x_i$，表示受灾的城市编号，保证这 $K$ 个数各不相同且首都不会受灾，$1 \\le x_i \\le N$。\n\n接下来 $M$ 行，每行三个整数 $u,v,w$，表示城市 $u$ 和城市 $v$ 之间存在一条长度为 $w$ 的道路，$1 \\le u,v \\le N, 0 < w \\le 10^9$。\n\n输入保证一定存在至少一个方案满足题目描述的要求。", "outputFormat": "输出一个整数表示答案。", "hint": "**【样例解释 1】**\n\n该样例对应的图形如下，其中 $1$ 号点是首都，$3,4,6$ 号点是受灾城市：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/64qspivj.png)\n\n该样例至少需要修建 $2$ 个补给点，可以分别建在 $2,5$ 或者 $2,6$ 。注意不能修建在 $3,5$ 号点，因为从首都到 $4$ 号点的最短路径只能是 $1 \\rightarrow 2 \\rightarrow 4$，不存在经过 $3,5$ 号点的最短路。\n\n**【子任务】**\n\n| 测试点  | $N$ | $M$ | $K$ | 特殊性质 |\n| :--:|:--:|:--:|:--:|:--:|\n| $1\\cdots 2$ | $1 \\le N \\le 200$ | $M=N-1$| $1 \\le K \\le 20$ | 输入是一棵树 |\n| $3\\cdots 6$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 4$ | 无 |\n| $7\\cdots 12$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 16$ | 无 |\n| $13\\cdots 20$ | $1 \\le N \\le 200$ | $0 \\le M \\le 10000$ | $1 \\le K \\le 20$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P10341", "type": "P", "difficulty": 3, "samples": [["3 1 2\n1 3 6\n", "2"], ["3 1 3\n1 3 6\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 紧急决策", "background": null, "description": "在一片海岸上，有 $n$ 个灯塔，从 $1$ 到 $n$ 编号。这片海岸可以看作一条数轴，每个灯塔可以看作数轴上的一个点。第 $i$ 个灯塔在数轴上的位置为 $x_i$，每个位置上最多只能有一个灯塔。这 $n$ 个灯塔按照位置从前到后的顺序排列，即第 $x_i < x_{i+1}, 1 \\le i < n$。现在，刚好有 $n$ 名游客正在海岸外排队等候进入海岸，第 $i$ 名游客进入第 $i$ 座灯塔参观。\n\n出于安全考虑，每座有游客在上面的灯塔必须被*照亮*。但由于海岸上的供能限制，最多只能*点亮* $t$ 座灯塔。每个灯塔的照明范围为 $q$。当某个灯塔上的灯打开后，海岸上和它距离不超过 $q$ 位置都会被照亮（即集合 $\\{x \\mid \\lvert x-x_i \\rvert \\le q\\}$ 中的所有点都会被照亮）。\n\n现在你作为海岸的旅游局的管理者，需要决定让哪些游客进入海岸玩耍。做决策不是拍脑袋想出来的，必须满足几点要求：\n\n- 保证安全第一原则，即可以找到一种照明方案使得进入海岸的每个游客所在的灯塔都被照明；\n- 保证先来后到原则，排在队列前面的游客优先进入海岸。如果某个游客不能进入海岸，则排在他后面的游客都不能进入海岸；\n- 保证追求利润原则，卖出尽可能多的门票，即尽量让数量更多的游客进入海岸。\n\n精打细算的你一敲键盘，算出最后会有多少游客进入海岸。", "inputFormat": "第一行为三个整数 $n,t,q$，表示灯塔的数目以及最多点亮的灯塔的数目。\n\n第二行为 $n$ 个整数，第 $i$ 个数 $x_i$ 表示第 $i$ 座灯塔的坐标。", "outputFormat": "输出一行一个整数，表示最后进入海岸的游客数目。", "hint": "**【样例解释 1】**\n\n可让前两名游客进入海岸，并点亮第一座灯塔。可以证明没有比这人数还要多的合法方案。\n\n**【样例解释 2】**\n\n可让前三名游客进入海岸，并点亮第二座灯塔。可以证明没有比这人数还要多的合法方案。\n\n**【子任务】**\n\n| 子任务编号 | $n\\le$ | $t \\le $ | $q \\le $ | 分值 |\n|:--:|:--:|:--:|:--:|:--:|\n| 1| $100$ | $100$ | $10^9$ | 20 |\n|2| $10^3$ | $10^3$ | $10^9$ | 20 |\n|3| $10^4$ | $10^4$ | $10^9$ | 20|\n|4| $10^5$ | $10^5$ | $10^9$ | 20 |\n|5| $7.5\\times10^6$ | $7.5\\times10^6$ | $10^9$ | 20 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 紧急决策", "background": null, "description": "在一片海岸上，有 $n$ 个灯塔，从 $1$ 到 $n$ 编号。这片海岸可以看作一条数轴，每个灯塔可以看作数轴上的一个点。第 $i$ 个灯塔在数轴上的位置为 $x_i$，每个位置上最多只能有一个灯塔。这 $n$ 个灯塔按照位置从前到后的顺序排列，即第 $x_i < x_{i+1}, 1 \\le i < n$。现在，刚好有 $n$ 名游客正在海岸外排队等候进入海岸，第 $i$ 名游客进入第 $i$ 座灯塔参观。\n\n出于安全考虑，每座有游客在上面的灯塔必须被*照亮*。但由于海岸上的供能限制，最多只能*点亮* $t$ 座灯塔。每个灯塔的照明范围为 $q$。当某个灯塔上的灯打开后，海岸上和它距离不超过 $q$ 位置都会被照亮（即集合 $\\{x \\mid \\lvert x-x_i \\rvert \\le q\\}$ 中的所有点都会被照亮）。\n\n现在你作为海岸的旅游局的管理者，需要决定让哪些游客进入海岸玩耍。做决策不是拍脑袋想出来的，必须满足几点要求：\n\n- 保证安全第一原则，即可以找到一种照明方案使得进入海岸的每个游客所在的灯塔都被照明；\n- 保证先来后到原则，排在队列前面的游客优先进入海岸。如果某个游客不能进入海岸，则排在他后面的游客都不能进入海岸；\n- 保证追求利润原则，卖出尽可能多的门票，即尽量让数量更多的游客进入海岸。\n\n精打细算的你一敲键盘，算出最后会有多少游客进入海岸。", "inputFormat": "第一行为三个整数 $n,t,q$，表示灯塔的数目以及最多点亮的灯塔的数目。\n\n第二行为 $n$ 个整数，第 $i$ 个数 $x_i$ 表示第 $i$ 座灯塔的坐标。", "outputFormat": "输出一行一个整数，表示最后进入海岸的游客数目。", "hint": "**【样例解释 1】**\n\n可让前两名游客进入海岸，并点亮第一座灯塔。可以证明没有比这人数还要多的合法方案。\n\n**【样例解释 2】**\n\n可让前三名游客进入海岸，并点亮第二座灯塔。可以证明没有比这人数还要多的合法方案。\n\n**【子任务】**\n\n| 子任务编号 | $n\\le$ | $t \\le $ | $q \\le $ | 分值 |\n|:--:|:--:|:--:|:--:|:--:|\n| 1| $100$ | $100$ | $10^9$ | 20 |\n|2| $10^3$ | $10^3$ | $10^9$ | 20 |\n|3| $10^4$ | $10^4$ | $10^9$ | 20|\n|4| $10^5$ | $10^5$ | $10^9$ | 20 |\n|5| $7.5\\times10^6$ | $7.5\\times10^6$ | $10^9$ | 20 |", "locale": "zh-CN"}}}
{"pid": "P10342", "type": "P", "difficulty": 6, "samples": [["4\n12 23 23 45", "23"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 数列", "background": "", "description": "定义一个长度为 $k$ 的数列的价值为：$val = \\max \\limits_{1 \\le i \\le k}\\{i \\times f(i,k)\\}$。\n\n其中 $f(i,j)$ 表示区间 $[i,j]$ 范围内数值种类数。\n\n给出一个长度为 $n$ 的数列，计算所有连续子区间的价值总和。将一个连续子区间视为一个独立的数列，计算出的价值即为该连续子区间的价值。\n\n设 $m$ 为数列里出现的数值种类数。", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行输入 $n$ 个正整数，$a_1, a_2, \\dots, a_n$ 描述数列里每个位置上的数值。\n\n对于所有的输入数据，都满足 $1\\le n \\le 10^5$。", "outputFormat": "第一行输出一个整数表示答案对 $998\\ 244\\ 353$ 取模。", "hint": "**【样例解释 1】**\n\n所有长度为 $1$ 的区间对答案的贡献都是 $1$。\n\n所有长度为 $2$ 的区间对答案的贡献都是 $2$。\n\n$[1,3]$ 这个区间对答案贡献为 $3$。\n\n$[2,4]$ 这个区间对答案贡献为 $4$。\n\n$[1,4]$ 这个区间对答案贡献为 $6$。\n\n综上答案为 $ans = 4 \\times 1 + 2 \\times 3 + 3 + 4 + 6 = 23$。\n\n**【样例 2】**\n\n见题目附件 `2.in/ans`\n\n**【样例 3】**\n\n见题目附件 `3.in/ans`\n\n**【样例 4】**\n\n见题目附件 `4.in/ans`\n\n**【样例 5】**\n\n见题目附件 `5.in/ans`\n\n**【子任务】**\n\n| 子任务编号 | $n\\le$ | $m\\le$ | $a_i\\le$ | 约束 | 分值 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| 1 | $800$ | $800$ | $10^5$ | 无 | 13 |\n| 2 | $10^5$ | $10^5$ | $10^5$ | 不会出现相同的数值 | 15 |\n| 3 | $8\\times 10^4$ | $600$ | $10^5$ | $[1,m][m+1,2m]\\dots[\\lfloor\\frac{n}{m}\\rfloor\\times m + 1,n]$每个区间无重复数值 | 21 |\n| 4 | $10^5$ | $80$ | $10^5$ | 无 | 24 |\n| 5 | $8\\times 10^4$ | $600$ | $10^5$| 无 | 27 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 数列", "background": "", "description": "定义一个长度为 $k$ 的数列的价值为：$val = \\max \\limits_{1 \\le i \\le k}\\{i \\times f(i,k)\\}$。\n\n其中 $f(i,j)$ 表示区间 $[i,j]$ 范围内数值种类数。\n\n给出一个长度为 $n$ 的数列，计算所有连续子区间的价值总和。将一个连续子区间视为一个独立的数列，计算出的价值即为该连续子区间的价值。\n\n设 $m$ 为数列里出现的数值种类数。", "inputFormat": "第一行输入一个整数 $n$。\n\n第二行输入 $n$ 个正整数，$a_1, a_2, \\dots, a_n$ 描述数列里每个位置上的数值。\n\n对于所有的输入数据，都满足 $1\\le n \\le 10^5$。", "outputFormat": "第一行输出一个整数表示答案对 $998\\ 244\\ 353$ 取模。", "hint": "**【样例解释 1】**\n\n所有长度为 $1$ 的区间对答案的贡献都是 $1$。\n\n所有长度为 $2$ 的区间对答案的贡献都是 $2$。\n\n$[1,3]$ 这个区间对答案贡献为 $3$。\n\n$[2,4]$ 这个区间对答案贡献为 $4$。\n\n$[1,4]$ 这个区间对答案贡献为 $6$。\n\n综上答案为 $ans = 4 \\times 1 + 2 \\times 3 + 3 + 4 + 6 = 23$。\n\n**【样例 2】**\n\n见题目附件 `2.in/ans`\n\n**【样例 3】**\n\n见题目附件 `3.in/ans`\n\n**【样例 4】**\n\n见题目附件 `4.in/ans`\n\n**【样例 5】**\n\n见题目附件 `5.in/ans`\n\n**【子任务】**\n\n| 子任务编号 | $n\\le$ | $m\\le$ | $a_i\\le$ | 约束 | 分值 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| 1 | $800$ | $800$ | $10^5$ | 无 | 13 |\n| 2 | $10^5$ | $10^5$ | $10^5$ | 不会出现相同的数值 | 15 |\n| 3 | $8\\times 10^4$ | $600$ | $10^5$ | $[1,m][m+1,2m]\\dots[\\lfloor\\frac{n}{m}\\rfloor\\times m + 1,n]$每个区间无重复数值 | 21 |\n| 4 | $10^5$ | $80$ | $10^5$ | 无 | 24 |\n| 5 | $8\\times 10^4$ | $600$ | $10^5$| 无 | 27 |", "locale": "zh-CN"}}}
{"pid": "P10343", "type": "P", "difficulty": 7, "samples": [["4 1\n0 0 0\n0 1 0\n1 0 0\n1 1 0\n", "0\n3\n3\n4"], ["3 1\n0 0 1\n0 3 1\n0 6 1\n", "0\n1\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 推恩令", "background": "西汉初年，汉高祖刘邦为了更好地将土地掌握在刘家的手里，大量分封刘姓诸侯王。但随着刘邦去世，诸侯王们越来越不受中央的控制。为了削弱诸侯国的势力，汉武帝刘彻采纳朝臣主父偃的建议，实行推恩令。推恩令要求诸侯王将自己的土地分封给自己的每个子弟，而不是传位给自己的长子。这样一来，土地面积大的王国将被划分为几个土地比较小的诸侯国，诸侯王们的势力也就得到了削弱。", "description": "让我们来考虑这么一个实际的例子：有一个诸侯王，他的诸侯国里有 $n$ 个城邦，其中，城邦 $s$ 是他的诸侯国的国都。我们可以用平面直角坐标系来描述他的领土，第 $i$ 个城邦可以被看作坐标系中以 $(x_i,y_i)$ 为中心，$r_i$ 为半径的一个圆。任意两个城邦之间不会有重叠的部分（相交），也不会相互接触（相切）。\n\n这个诸侯王有两个儿子，他想用一种简单的方式将他的国土分给他的两个儿子：在他的国土中修建一道分界渠。这道分界渠可以用坐标系中的一条直线来表示，它不能经过任意一个城邦（相交），也不能经过一个城邦的边界（相切）。这道分界渠可以将国土分为两个部分，国都 $s$ 所在的部分分给长子，另一部分分给次子。为了保证次子也可以选择一个城邦作为他的国都，分界渠两侧的国土都必须包含至少一个城邦。\n\n分界渠的修建方式可以有很多种，为了保证公平，诸侯王希望在所有本质不同的修建水渠的方式中随机地选择一种。如果两种修建分界渠的方式会把城邦分成相同的两个部分，那么这两种修建方式就被认为是本质相同的。\n\n诸侯王的次子打听到了国王的划分办法。为了提前挑选自己的国都，他想知道了解每一个城邦成为他的国都的可能性大小。他把这个任务交给了你，你需要帮助他计算：对于每一个城邦，有多少种本质不同的修建水渠的方式能使得他能选择这个城邦作为国都？", "inputFormat": "第一行两个整数 $n,s$，分别表示诸侯国内城邦的数量以及国都的编号。\n\n接下来 $n$ 行，每行三个整数 $x_i, y_i, r_i$，第$i$行表示第 $i$ 个城邦的中心和半径。", "outputFormat": "输出 $n$ 行，每行一个整数 $a_i$，第 $i$ 行的输出表示有 $a_i$ 种本质不同的修水渠方案能让次子选择第 $i$ 个城邦作为国都。", "hint": "**【样例 3】**\n\n见题目附件中 `3.in/ans`。\n\n**【子任务】**\n\n对于 $100\\%$ 的数据，满足 $1\\leq s\\leq n\\leq 1000$，$0\\leq |x_i|, |y_i|, r_i \\leq 10^4$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :--: | :--: | :--: |\n| 1 | 17 | $n\\leq 18$ |\n| 2 | 29 | $n\\leq 100$ |\n| 3 | 22 | $r_i=0$ |\n| 4 | 32 | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 推恩令", "background": "西汉初年，汉高祖刘邦为了更好地将土地掌握在刘家的手里，大量分封刘姓诸侯王。但随着刘邦去世，诸侯王们越来越不受中央的控制。为了削弱诸侯国的势力，汉武帝刘彻采纳朝臣主父偃的建议，实行推恩令。推恩令要求诸侯王将自己的土地分封给自己的每个子弟，而不是传位给自己的长子。这样一来，土地面积大的王国将被划分为几个土地比较小的诸侯国，诸侯王们的势力也就得到了削弱。", "description": "让我们来考虑这么一个实际的例子：有一个诸侯王，他的诸侯国里有 $n$ 个城邦，其中，城邦 $s$ 是他的诸侯国的国都。我们可以用平面直角坐标系来描述他的领土，第 $i$ 个城邦可以被看作坐标系中以 $(x_i,y_i)$ 为中心，$r_i$ 为半径的一个圆。任意两个城邦之间不会有重叠的部分（相交），也不会相互接触（相切）。\n\n这个诸侯王有两个儿子，他想用一种简单的方式将他的国土分给他的两个儿子：在他的国土中修建一道分界渠。这道分界渠可以用坐标系中的一条直线来表示，它不能经过任意一个城邦（相交），也不能经过一个城邦的边界（相切）。这道分界渠可以将国土分为两个部分，国都 $s$ 所在的部分分给长子，另一部分分给次子。为了保证次子也可以选择一个城邦作为他的国都，分界渠两侧的国土都必须包含至少一个城邦。\n\n分界渠的修建方式可以有很多种，为了保证公平，诸侯王希望在所有本质不同的修建水渠的方式中随机地选择一种。如果两种修建分界渠的方式会把城邦分成相同的两个部分，那么这两种修建方式就被认为是本质相同的。\n\n诸侯王的次子打听到了国王的划分办法。为了提前挑选自己的国都，他想知道了解每一个城邦成为他的国都的可能性大小。他把这个任务交给了你，你需要帮助他计算：对于每一个城邦，有多少种本质不同的修建水渠的方式能使得他能选择这个城邦作为国都？", "inputFormat": "第一行两个整数 $n,s$，分别表示诸侯国内城邦的数量以及国都的编号。\n\n接下来 $n$ 行，每行三个整数 $x_i, y_i, r_i$，第$i$行表示第 $i$ 个城邦的中心和半径。", "outputFormat": "输出 $n$ 行，每行一个整数 $a_i$，第 $i$ 行的输出表示有 $a_i$ 种本质不同的修水渠方案能让次子选择第 $i$ 个城邦作为国都。", "hint": "**【样例 3】**\n\n见题目附件中 `3.in/ans`。\n\n**【子任务】**\n\n对于 $100\\%$ 的数据，满足 $1\\leq s\\leq n\\leq 1000$，$0\\leq |x_i|, |y_i|, r_i \\leq 10^4$。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :--: | :--: | :--: |\n| 1 | 17 | $n\\leq 18$ |\n| 2 | 29 | $n\\leq 100$ |\n| 3 | 22 | $r_i=0$ |\n| 4 | 32 | 无 |", "locale": "zh-CN"}}}
{"pid": "P10344", "type": "P", "difficulty": 4, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] PCAP 文件解析与读写", "background": "说明：请从题目附件下载试题题面所提及的《学习手册》。自本题起的五题，为 THUSC 2019 第三试《网络流量分析与处理》的五小题。原试题共六小题，其中最后一题为反馈，不再收入。\n\n---\n\n芃芃是华清大学计算机系的一名学生，马上读大二上学期。由于他精通 OI，觉得这个学期的唯一一门专业课《数据结构》实在是太简单了。在学长杰哥的盛情推荐下，他提前选了大三的专业课《计算机网络原理》。然而，这门课程的大作业是自己动手实现一个软件路由器，这可难倒了没有工程经验的芃芃。为了不让杰哥失望，他决定在暑假里就提前完成这个任务。\n\n本题一共分为 6 个小题，难度递增。你将与芃芃一起学习网络的基本原理、网络设备的工作方式，并亲手实现一个个功能，最终完成一个简化版的路由器软件。麻雀虽小，五脏俱全，它将能对多种基本的网络协议进行处理，并担任起路由器最根本的使命——转发。\n\n在本题**所有的小题**中，我们都有以下的约定：\n\n* 你的计算机上有 16 个网络接口，编号从 1 到 16。\n* 你的计算机上默认的路由表为空，并且只能从 RIP 报文获得路由表的更新。\n* 每个接口对应**一个** IP 地址 `10.2.n.1/24`，其中 $n$ 代表接口编号，范围是 1 到 16。\n* 每个接口对应一个 MAC 地址 `98:01:29:00:00:xx`，其中 `xx` 是接口编号的 16 进制表示，范围是 $01_{16}$ 到 $10_{16}$。\n* 所有的流量片段，包括读取和写入的，都是以太网帧（包括帧头和帧尾的校验），包含完整的协议格式。\n* 除特殊说明外，输入的 PCAP 文件中的流量片段都是按照时间顺序排列的（时间戳单调递增），只需要进行依次处理即可。\n\n如果你不能理解上述的约定，请参见《学习手册》网络基础相关部分。", "description": "所有题目中，网络流量都将以 PCAP 文件格式保存，具体格式说明可参见《学习手册》。本题需要对 PCAP 文件进行基本的读写与解析。\n\n在本题中，你需要完成的任务是依次遍历输入文件中时间乱序的流量片段，在对它们进行一些操作后，组装为 PCAP 格式写入输出。关于文件的读写方式，可以参照《学习手册》。\n\n需要进行的操作为：只保留长度**不大于** $1000$ 的片段（只考虑完整的以太网帧长度，不包括 PCAP 格式的片段头），并按照时间升序排序这些片段（即首先比较秒，而后比较微秒），保证没有两个片段的时间是相同的。需要注意，你的输出文件需要是一个合法的 PCAP 文件。为了测试文件格式的合法性，你可以使用 Wireshark 等工具打开你的输出文件进行检查。\n\n与手册中指示的不同的是，本题中，你应该直接完整复制每个流量片段的头，包括时间戳字段。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ |\n|:--:|:--:|:--:|\n| 1 | $=10^2$ | $=5\\times 10^4$ |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n你可以用你电脑上安装的 Wireshark 软件打开样例数据的输入和输出。\n\n用 Wireshark 打开样例输入文件，应该可以看到，界面上部记录了这个 PCAP 文件中记录的所有以太网帧，界面中部显示的是当前这个以太网帧的解析，下部则是它的十六进制数据。对于这个软件的详细使用方法，除了部分题目给出的提示外，不会提供更多帮助，请选手自行熟悉并摸索。\n\n样例输入文件记录了两个以太网帧，都是从 `10.2.254.100` 发往 `10.2.12.82` 地址的 ARP 请求，它们区别在于 ARP 请求后多余的数据长度不同。由于第一个帧的长度不大于 1000 ，第二个帧的长度大于 1000，按照题目意思，只有第一个帧需要输出，排序后输出到了样例输出文件中，你可以同样地用 Wireshark 打开样例输出文件来验证这一点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] PCAP 文件解析与读写", "background": "说明：请从题目附件下载试题题面所提及的《学习手册》。自本题起的五题，为 THUSC 2019 第三试《网络流量分析与处理》的五小题。原试题共六小题，其中最后一题为反馈，不再收入。\n\n---\n\n芃芃是华清大学计算机系的一名学生，马上读大二上学期。由于他精通 OI，觉得这个学期的唯一一门专业课《数据结构》实在是太简单了。在学长杰哥的盛情推荐下，他提前选了大三的专业课《计算机网络原理》。然而，这门课程的大作业是自己动手实现一个软件路由器，这可难倒了没有工程经验的芃芃。为了不让杰哥失望，他决定在暑假里就提前完成这个任务。\n\n本题一共分为 6 个小题，难度递增。你将与芃芃一起学习网络的基本原理、网络设备的工作方式，并亲手实现一个个功能，最终完成一个简化版的路由器软件。麻雀虽小，五脏俱全，它将能对多种基本的网络协议进行处理，并担任起路由器最根本的使命——转发。\n\n在本题**所有的小题**中，我们都有以下的约定：\n\n* 你的计算机上有 16 个网络接口，编号从 1 到 16。\n* 你的计算机上默认的路由表为空，并且只能从 RIP 报文获得路由表的更新。\n* 每个接口对应**一个** IP 地址 `10.2.n.1/24`，其中 $n$ 代表接口编号，范围是 1 到 16。\n* 每个接口对应一个 MAC 地址 `98:01:29:00:00:xx`，其中 `xx` 是接口编号的 16 进制表示，范围是 $01_{16}$ 到 $10_{16}$。\n* 所有的流量片段，包括读取和写入的，都是以太网帧（包括帧头和帧尾的校验），包含完整的协议格式。\n* 除特殊说明外，输入的 PCAP 文件中的流量片段都是按照时间顺序排列的（时间戳单调递增），只需要进行依次处理即可。\n\n如果你不能理解上述的约定，请参见《学习手册》网络基础相关部分。", "description": "所有题目中，网络流量都将以 PCAP 文件格式保存，具体格式说明可参见《学习手册》。本题需要对 PCAP 文件进行基本的读写与解析。\n\n在本题中，你需要完成的任务是依次遍历输入文件中时间乱序的流量片段，在对它们进行一些操作后，组装为 PCAP 格式写入输出。关于文件的读写方式，可以参照《学习手册》。\n\n需要进行的操作为：只保留长度**不大于** $1000$ 的片段（只考虑完整的以太网帧长度，不包括 PCAP 格式的片段头），并按照时间升序排序这些片段（即首先比较秒，而后比较微秒），保证没有两个片段的时间是相同的。需要注意，你的输出文件需要是一个合法的 PCAP 文件。为了测试文件格式的合法性，你可以使用 Wireshark 等工具打开你的输出文件进行检查。\n\n与手册中指示的不同的是，本题中，你应该直接完整复制每个流量片段的头，包括时间戳字段。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ |\n|:--:|:--:|:--:|\n| 1 | $=10^2$ | $=5\\times 10^4$ |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n你可以用你电脑上安装的 Wireshark 软件打开样例数据的输入和输出。\n\n用 Wireshark 打开样例输入文件，应该可以看到，界面上部记录了这个 PCAP 文件中记录的所有以太网帧，界面中部显示的是当前这个以太网帧的解析，下部则是它的十六进制数据。对于这个软件的详细使用方法，除了部分题目给出的提示外，不会提供更多帮助，请选手自行熟悉并摸索。\n\n样例输入文件记录了两个以太网帧，都是从 `10.2.254.100` 发往 `10.2.12.82` 地址的 ARP 请求，它们区别在于 ARP 请求后多余的数据长度不同。由于第一个帧的长度不大于 1000 ，第二个帧的长度大于 1000，按照题目意思，只有第一个帧需要输出，排序后输出到了样例输出文件中，你可以同样地用 Wireshark 打开样例输出文件来验证这一点。", "locale": "zh-CN"}}}
{"pid": "P10345", "type": "P", "difficulty": 4, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 常见网络校验和计算", "background": "芃芃发现，华清大学的玉兰学生公寓的网络质量似乎不是很好。由于网络线材质量的原因，也可能是有同学在进行一些奇怪的尝试，他总是会收到一些不太正常的内容。好在，网络协议的设计者们都考虑到了这一点，在协议中添加了校验和来检查一些明显的问题。作为鲁棒的路由器软件，必须只接收校验和检查通过的流量，而丢弃那些坏的。听说你已经能读到流量的内容了，下一步就是揪出这些不正常的流量。", "description": "你需要根据《学习手册》中的相关知识，对给定的流量片段进行校验。请注意，由于所有片段类型**都是以太网帧**，所以你总是需要计算 `CRC32`；而对于承载了 IP 分组的流量，你还需要对 IP 分组头的检验和进行检查。作为简化，我们不考虑除了以太网和 IP 以外的校验字段。只有当所有的校验都通过时，才认为该流量片段是正确的。", "inputFormat": "输入保证格式合法，并且每个流量片段都是以太网帧。其中包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。部分子任务的数据中保证 IP 分组头的校验是正确的，即只需要计算以太网帧的 `CRC32`。", "outputFormat": "输出由 $n$ 行文本构成，依次对应每一个片段的校验结果。如果是正确的，输出 `Yes`，否则输出 `No`。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | 仅需检查以太网帧 |\n| :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=5\\times 10^4$ | 是 |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ | 否 |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | 否 |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | 否 |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ | 否 |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n和 `pcap` 题一样，你可以用你电脑上安装的 Wireshark 软件打开样例数据的输入和输出。\n\n样例输入文件应该包含四个以太网帧，其中第一个以太网帧中 FCS 和 IP 的校验都是错误的，第二个以太网帧是 FCS 校验正确的 ARP 帧，第三个以太网帧仅 FCS 校验错误，第四个以太网帧仅 IP 校验错误。在页面中部点开当前帧的解析可以看到更多细节，包括是哪个校验错误和正确值等等，这可能对你有一定的帮助。\n\nWireshark 默认情况下可能不会检查 FCS 的正确性。对于这种情况，你可以在页面中部找到并右键点击 `Ethernet II` 所在的一行，在弹出的菜单中选择 `Protocol Preferences`，勾上选项中的 `Validate the Ethernet checksum if possible` 和 `Assume packets have FCS`，此时你应该可以在页面上部看到 FCS 错误的帧都被明显地标记出来。\n\n需要注意的是，Wireshark 还会计算并显示 UDP 的 Checksum 正确与否。在本题中，我们不考虑 UDP 的 Checksum，因此你可以忽略这些错误。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 常见网络校验和计算", "background": "芃芃发现，华清大学的玉兰学生公寓的网络质量似乎不是很好。由于网络线材质量的原因，也可能是有同学在进行一些奇怪的尝试，他总是会收到一些不太正常的内容。好在，网络协议的设计者们都考虑到了这一点，在协议中添加了校验和来检查一些明显的问题。作为鲁棒的路由器软件，必须只接收校验和检查通过的流量，而丢弃那些坏的。听说你已经能读到流量的内容了，下一步就是揪出这些不正常的流量。", "description": "你需要根据《学习手册》中的相关知识，对给定的流量片段进行校验。请注意，由于所有片段类型**都是以太网帧**，所以你总是需要计算 `CRC32`；而对于承载了 IP 分组的流量，你还需要对 IP 分组头的检验和进行检查。作为简化，我们不考虑除了以太网和 IP 以外的校验字段。只有当所有的校验都通过时，才认为该流量片段是正确的。", "inputFormat": "输入保证格式合法，并且每个流量片段都是以太网帧。其中包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。部分子任务的数据中保证 IP 分组头的校验是正确的，即只需要计算以太网帧的 `CRC32`。", "outputFormat": "输出由 $n$ 行文本构成，依次对应每一个片段的校验结果。如果是正确的，输出 `Yes`，否则输出 `No`。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | 仅需检查以太网帧 |\n| :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=5\\times 10^4$ | 是 |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ | 否 |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | 否 |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | 否 |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ | 否 |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n和 `pcap` 题一样，你可以用你电脑上安装的 Wireshark 软件打开样例数据的输入和输出。\n\n样例输入文件应该包含四个以太网帧，其中第一个以太网帧中 FCS 和 IP 的校验都是错误的，第二个以太网帧是 FCS 校验正确的 ARP 帧，第三个以太网帧仅 FCS 校验错误，第四个以太网帧仅 IP 校验错误。在页面中部点开当前帧的解析可以看到更多细节，包括是哪个校验错误和正确值等等，这可能对你有一定的帮助。\n\nWireshark 默认情况下可能不会检查 FCS 的正确性。对于这种情况，你可以在页面中部找到并右键点击 `Ethernet II` 所在的一行，在弹出的菜单中选择 `Protocol Preferences`，勾上选项中的 `Validate the Ethernet checksum if possible` 和 `Assume packets have FCS`，此时你应该可以在页面上部看到 FCS 错误的帧都被明显地标记出来。\n\n需要注意的是，Wireshark 还会计算并显示 UDP 的 Checksum 正确与否。在本题中，我们不考虑 UDP 的 Checksum，因此你可以忽略这些错误。", "locale": "zh-CN"}}}
{"pid": "P10346", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 数据链路层协议数据处理", "background": "路由器软件需要处理的最底层是数据链路层，这上面运行着一系列复杂的协议，比如各种神秘的滑动窗口协议。虽然芃芃对它们始终摸不着头脑，但他知道这一层最重要的协议就属 ARP 了。它起到了跨上下两层的桥梁作用，只有通过 ARP 查询，路由器才能知道究竟应该把 IP 分组发给哪一个邻居。你的路由器软件需要热情地回应每一个询问，才能正确地收到接下来的流量。", "description": "你需要根据《学习手册》中的相关知识，处理数据链路层的协议数据：在给定的流量片段中，有一些是对你的 ARP 询问（也就是说，询问的 IP（TPA 字段）是你拥有的，请在 pcap 题面中找到你拥有的 IP 地址和与其对应的 MAC 地址），请你正确地回复它们。数据保证 FCS 校验正确的 ARP 请求中发送端的 MAC 地址（SHA 字段）与以太网帧中的发送端 MAC 地址一致。注意，ARP 请求中以太网帧的目标地址可能与你拥有的 MAC 地址不同（如 `FF:FF:FF:FF:FF:FF` 广播地址），这种情况下依然需要回应 ARP 请求。你需要构造正确的 ARP 协议数据，以及外层的以太网帧格式（包括头部和校验和，并注意以太网帧的长度要求），并将这些以太网帧帧按照应答顺序按照《学习手册》的要求依次写入 PCAP 格式的输出文件中。\n\n在**下列所有题目（包括本题）**中，如果某个流量片段发生校验错误，则应当直接丢弃，片段的数据可能会出现不符合《学习手册》中的叙述的情况，所以不能有任何假设，不进行任何处理。", "inputFormat": "输入保证格式合法，其中包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。你需要回复 $n_1$ 个流量片段。", "outputFormat": "其将与答案文件进行**逐字节**对比。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | $n_1=n$ |\n| :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=5\\times 10^4$ | 是 |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ | 否 |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | 否 |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | 否 |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ | 否 |\n\n**【样例解释 1】**\n\n由于提供样例会大幅降低本题难度，故不提供样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 数据链路层协议数据处理", "background": "路由器软件需要处理的最底层是数据链路层，这上面运行着一系列复杂的协议，比如各种神秘的滑动窗口协议。虽然芃芃对它们始终摸不着头脑，但他知道这一层最重要的协议就属 ARP 了。它起到了跨上下两层的桥梁作用，只有通过 ARP 查询，路由器才能知道究竟应该把 IP 分组发给哪一个邻居。你的路由器软件需要热情地回应每一个询问，才能正确地收到接下来的流量。", "description": "你需要根据《学习手册》中的相关知识，处理数据链路层的协议数据：在给定的流量片段中，有一些是对你的 ARP 询问（也就是说，询问的 IP（TPA 字段）是你拥有的，请在 pcap 题面中找到你拥有的 IP 地址和与其对应的 MAC 地址），请你正确地回复它们。数据保证 FCS 校验正确的 ARP 请求中发送端的 MAC 地址（SHA 字段）与以太网帧中的发送端 MAC 地址一致。注意，ARP 请求中以太网帧的目标地址可能与你拥有的 MAC 地址不同（如 `FF:FF:FF:FF:FF:FF` 广播地址），这种情况下依然需要回应 ARP 请求。你需要构造正确的 ARP 协议数据，以及外层的以太网帧格式（包括头部和校验和，并注意以太网帧的长度要求），并将这些以太网帧帧按照应答顺序按照《学习手册》的要求依次写入 PCAP 格式的输出文件中。\n\n在**下列所有题目（包括本题）**中，如果某个流量片段发生校验错误，则应当直接丢弃，片段的数据可能会出现不符合《学习手册》中的叙述的情况，所以不能有任何假设，不进行任何处理。", "inputFormat": "输入保证格式合法，其中包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。你需要回复 $n_1$ 个流量片段。", "outputFormat": "其将与答案文件进行**逐字节**对比。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | $n_1=n$ |\n| :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=5\\times 10^4$ | 是 |\n| 2 | $=10^2$ | $=1.5\\times 10^5$ | 否 |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | 否 |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | 否 |\n| 5 | $=10^5$ | $=1.5\\times 10^8$ | 否 |\n\n**【样例解释 1】**\n\n由于提供样例会大幅降低本题难度，故不提供样例。", "locale": "zh-CN"}}}
{"pid": "P10347", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] 网络层协议数据处理", "background": "百度对程序员来说最大的作用当然是测试网络的联通性，在处理完 ARP 包以后，芃芃兴奋地输入了 `ping baidu.com`，然而并没有得到任何结果。咨询过杰哥以后，芃芃懂得了 ping 工具的工作原理，原来它使用了 ICMP 协议，工作在比数据链路层更高的网络层。他还发现，网络中也存在许多给他发送的 ping 报文，看来的确有很多人在关心他。为了不让他们失望，你决定帮芃芃回复这些请求。", "description": "你需要根据《学习手册》中的相关知识，处理网络层的协议数据：在给定的流量片段中，有一些是对你的 ICMP Echo Request 报文（也就是说，请求的 IP 和 MAC 地址都是是你拥有的，并为 `pcap` 题面中的对应关系），请你正确地回复它们。你需要构造正确的 ICMP Echo Reply 报文，以及外层的 IP 分组头、以太网帧头尾，并将这些帧按照应答顺序依次写入输出文件中。本题中只对**源地址与目的地址在同一个子网中的 `ICMP Echo Request` 报文**进行响应，而不响应其他情况（例如源地址与目的地址不在同一个网络中、ARP 请求）。\n\n我们保证，所有 `ICMP Echo Request` 报文在数据链路层和网络层都是单播发送的（也就是说不用考虑广播地址等情况，广播地址的定义见《学习手册》），请注意正确填写回复报文在这两层的源、目标地址。如果接收到的报文中含有数据负载，则你回复的报文中也需要**原样携带**这些负载，但不要携带链路层帧中超过 IP 包尺寸后的多余数据（请忽略 Wireshark 对这部分数据的解析）。特别地，本题对输出数据中片段的时间戳有额外的要求，设 `ICMP Echo Request` 的时间戳为 $(\\sec_0, \\text{us}_0)$，那么你回应的 `ICMP Echo Response` 的时间戳 $(\\sec, \\text{us})$ 应该满足 $\\sec \\times 10^6 + \\text{us} = \\sec_0 \\times 10^6 + \\text{us}_0 + 1$ 并且 $0 \\le \\text{us} < 10^6$，数据保证 $\\text{us}_0 < 10^6, \\sec < 2^{32}$，不保证上述加法不会溢出 32 位无符号整数。注意 Wireshark 界面上部显示的时间是相对于第一个以太网帧的时间戳的偏差。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n本题的各子任务规模与上一题相同。\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n样例中输入数据是三个 `ICMP Echo Request` ，输出数据是三个对应的 `ICMP Echo Reply`。\n\n**【提示】**\n\n请不要忘记前三题题面中与本题相关的内容，并注意 FCS 和 IP 校验和的计算和以太网帧的长度要求。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] 网络层协议数据处理", "background": "百度对程序员来说最大的作用当然是测试网络的联通性，在处理完 ARP 包以后，芃芃兴奋地输入了 `ping baidu.com`，然而并没有得到任何结果。咨询过杰哥以后，芃芃懂得了 ping 工具的工作原理，原来它使用了 ICMP 协议，工作在比数据链路层更高的网络层。他还发现，网络中也存在许多给他发送的 ping 报文，看来的确有很多人在关心他。为了不让他们失望，你决定帮芃芃回复这些请求。", "description": "你需要根据《学习手册》中的相关知识，处理网络层的协议数据：在给定的流量片段中，有一些是对你的 ICMP Echo Request 报文（也就是说，请求的 IP 和 MAC 地址都是是你拥有的，并为 `pcap` 题面中的对应关系），请你正确地回复它们。你需要构造正确的 ICMP Echo Reply 报文，以及外层的 IP 分组头、以太网帧头尾，并将这些帧按照应答顺序依次写入输出文件中。本题中只对**源地址与目的地址在同一个子网中的 `ICMP Echo Request` 报文**进行响应，而不响应其他情况（例如源地址与目的地址不在同一个网络中、ARP 请求）。\n\n我们保证，所有 `ICMP Echo Request` 报文在数据链路层和网络层都是单播发送的（也就是说不用考虑广播地址等情况，广播地址的定义见《学习手册》），请注意正确填写回复报文在这两层的源、目标地址。如果接收到的报文中含有数据负载，则你回复的报文中也需要**原样携带**这些负载，但不要携带链路层帧中超过 IP 包尺寸后的多余数据（请忽略 Wireshark 对这部分数据的解析）。特别地，本题对输出数据中片段的时间戳有额外的要求，设 `ICMP Echo Request` 的时间戳为 $(\\sec_0, \\text{us}_0)$，那么你回应的 `ICMP Echo Response` 的时间戳 $(\\sec, \\text{us})$ 应该满足 $\\sec \\times 10^6 + \\text{us} = \\sec_0 \\times 10^6 + \\text{us}_0 + 1$ 并且 $0 \\le \\text{us} < 10^6$，数据保证 $\\text{us}_0 < 10^6, \\sec < 2^{32}$，不保证上述加法不会溢出 32 位无符号整数。注意 Wireshark 界面上部显示的时间是相对于第一个以太网帧的时间戳的偏差。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n本题的各子任务规模与上一题相同。\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n样例中输入数据是三个 `ICMP Echo Request` ，输出数据是三个对应的 `ICMP Echo Reply`。\n\n**【提示】**\n\n请不要忘记前三题题面中与本题相关的内容，并注意 FCS 和 IP 校验和的计算和以太网帧的长度要求。", "locale": "zh-CN"}}}
{"pid": "P10348", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "THUSC"], "title": "[THUSC 2019] RIP 路由协议实现", "background": "支持了链路层和网络层的协议以后，路由器立刻了收到无数的数据包。虽然芃芃被大量的数据淹没，不过镇定的他还是记起来教材上写的话：网络设备能够处理的报文有两种，分别是控制报文和数据报文。对于路由器来说，数据报文就是需要转发的内容；而控制报文则是用来管理它的转发流向（路由表）的。为了和其他真实的路由器进行交互，你需要实现简单的路由协议 RIP；而在建立了转发表之后，需要开始进行“抛热土豆”，正确地将其他主机的流量送到对应的下一台路由器。", "description": "你需要根据《学习手册》中的相关知识，处理下列两类报文：\n\n一类是 RIP 路由协议的控制报文，它被封装在 UDP 协议数据报中。你将只会收到 `RIP Response` 报文，且目标 IP 地址是 `224.0.0.9`，目标 MAC 地址为 `01:00:5E:00:00:09`，用于指示路由表的更新，你需要根据源 IP 地址来判断它与你拥有的哪一个 IP 在同一个子网中，从而得知路由表中对应的出端口编号。对于收到的每一条路由信息，你需要根据给定的规则（见《学习手册》）恰当维护自身的路由表，记录对于可达的每一个网络前缀的下一跳信息（包括 IP 和 MAC）。对于控制报文，总是无需进行回复。\n\n另一类是数据报文，它将被封装在 IP 分组中，你需要对**目标 IP 地址非本机所拥有**的分组进行转发。如果路由表中能够查询到目标 IP 地址对应的下一跳，则你应当构造一个合法的 IP 分组，填写正确的源、目标信息，并更新相关字段（如 TTL、校验和）；如果无法查询到路由信息，则你应当构造一个正确的 `ICMP Destination Network Unreachable` 报文返回给源主机；如果分组的 TTL 减小到 0，则你应当构造一个正确的 `ICMP Time Exceeded` 报文返回给源主机，这两种错误信息都需要按照《学习手册》的要求填入相应的负载，从接收者 MAC 地址中推断出源地址 IP ，并且以太网帧中（接收者的 MAC 地址，发送者的 MAC 地址）为输入数据中对应数据报文的（发送者的 MAC 地址，接收者的 MAC 地址）；如果同时出现无法查询到路由信息并且 TTL 减到 0 的情况，应当构造一个 `ICMP Destination Network Unreachable`。无论何种情况，对于一个目标 IP 地址不属于本机的数据报文，你实现的路由器**总会产生**一个发出的以太网帧。\n\n由于转发报文需要填写下一跳的 MAC 地址，而我们不提供主动的 ARP 查询接口；在本小题中，你需要并仅从 RIP 报文的**以太网帧头**中获得相应目的路由器的 MAC 地址，以**转发前最后一次获得到的为准** 。\n\n我们保证，在此问题给出的正常流量片段（也就是通过了校验的片段）中，包含且只包含上述两类报文；并且对于所有需要转发的包，你都能通过上述方法从 RIP 报文中获得对应目的路由器的 MAC 地址。和上题类似，Wireshark 会显示 UDP 校验值错误，忽略即可。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。根据输入，你需要构造的路由表的项目不超过 $k$ 条，需要查询路由表进行转发的报文占总报文的数量约为 $p_{query}\\%$。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | $k$ | $p_{query}$ |\n| :--: | :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=1.5\\times 10^5$ | $=10$ | $=50\\%$ |\n| 2 | $=10^3$ | $=1.5\\times 10^6$ | $=10^2$ | $=50\\%$ |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | $=10^2$ | $=95\\%$ |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | $=10^3$ | $=50\\%$ |\n| 5 | $=10^4$ | $=1.5\\times 10^7$ | $=10^3$ | $=95\\%$ |\n| 6 | $=10^5$ | $=2\\times 10^7$ | $=10^4$ | $=95\\%$ |\n| 7 | $=10^5$ | $=2\\times 10^7$ | $=10^4$ | $=95\\%$ |\n| 8 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n| 9 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n| 10 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n样例输入有十个以太网帧，包括八个 RIP 包和两个需要转发的 IP 包。\n\n对于前四个 RIP Response，可以得到如下的路由表：\n\n收到第一个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n224.0.0.0/3 via 10.2.7.2 if 7 metric 15\n```\n\n收到第二个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n```\n\n收到第三个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n```\n\n收到第四个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n```\n\n接着是两个 UDP 包，对于 `77.147.142.166` 这个地址，在路由表中没有对应的项，于是回应了 `ICMP Destination unreachable` 。对于 `107.28.70.129` 地址，它在 `104.0.0.0/6` 范围中，于是 TTL 减一并且转发到 `10.2.7.2` ，它的 MAC 地址可以从第一个 `RIP Response` 得到。\n\n收到第五个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n```\n\n收到第六个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n```\n\n收到第七个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n160.245.176.0/20 via 10.2.5.2 if 5 metric 9\n```\n\n收到第八个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n160.245.176.0/20 via 10.2.5.2 if 5 metric 9\n90.32.0.0/15 via 10.2.5.2 if 5 metric 8\n```\n\n**【提示】**\n\n由于每个数据报文的转发都需要查询路由表，因此需要用高效的数据结构存储路由表中的关键信息，同时也要注意空间的使用效率。关于算法的高效实现，你可以参考《学习手册》附带的相关论文和资料。\n\n在转发 IP 分组时，分组头内很少的字段会被修改。因此 IP 校验值也未必需要重新计算，很多情况下可以只进行最小限度的改动。但如果你想进行任何形式的简化，务必保证你的操作与我们叙述的操作是**完全等价**的。直观的想法往往会遗漏一些边界情况，请一定注意。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUSC 2019] RIP 路由协议实现", "background": "支持了链路层和网络层的协议以后，路由器立刻了收到无数的数据包。虽然芃芃被大量的数据淹没，不过镇定的他还是记起来教材上写的话：网络设备能够处理的报文有两种，分别是控制报文和数据报文。对于路由器来说，数据报文就是需要转发的内容；而控制报文则是用来管理它的转发流向（路由表）的。为了和其他真实的路由器进行交互，你需要实现简单的路由协议 RIP；而在建立了转发表之后，需要开始进行“抛热土豆”，正确地将其他主机的流量送到对应的下一台路由器。", "description": "你需要根据《学习手册》中的相关知识，处理下列两类报文：\n\n一类是 RIP 路由协议的控制报文，它被封装在 UDP 协议数据报中。你将只会收到 `RIP Response` 报文，且目标 IP 地址是 `224.0.0.9`，目标 MAC 地址为 `01:00:5E:00:00:09`，用于指示路由表的更新，你需要根据源 IP 地址来判断它与你拥有的哪一个 IP 在同一个子网中，从而得知路由表中对应的出端口编号。对于收到的每一条路由信息，你需要根据给定的规则（见《学习手册》）恰当维护自身的路由表，记录对于可达的每一个网络前缀的下一跳信息（包括 IP 和 MAC）。对于控制报文，总是无需进行回复。\n\n另一类是数据报文，它将被封装在 IP 分组中，你需要对**目标 IP 地址非本机所拥有**的分组进行转发。如果路由表中能够查询到目标 IP 地址对应的下一跳，则你应当构造一个合法的 IP 分组，填写正确的源、目标信息，并更新相关字段（如 TTL、校验和）；如果无法查询到路由信息，则你应当构造一个正确的 `ICMP Destination Network Unreachable` 报文返回给源主机；如果分组的 TTL 减小到 0，则你应当构造一个正确的 `ICMP Time Exceeded` 报文返回给源主机，这两种错误信息都需要按照《学习手册》的要求填入相应的负载，从接收者 MAC 地址中推断出源地址 IP ，并且以太网帧中（接收者的 MAC 地址，发送者的 MAC 地址）为输入数据中对应数据报文的（发送者的 MAC 地址，接收者的 MAC 地址）；如果同时出现无法查询到路由信息并且 TTL 减到 0 的情况，应当构造一个 `ICMP Destination Network Unreachable`。无论何种情况，对于一个目标 IP 地址不属于本机的数据报文，你实现的路由器**总会产生**一个发出的以太网帧。\n\n由于转发报文需要填写下一跳的 MAC 地址，而我们不提供主动的 ARP 查询接口；在本小题中，你需要并仅从 RIP 报文的**以太网帧头**中获得相应目的路由器的 MAC 地址，以**转发前最后一次获得到的为准** 。\n\n我们保证，在此问题给出的正常流量片段（也就是通过了校验的片段）中，包含且只包含上述两类报文；并且对于所有需要转发的包，你都能通过上述方法从 RIP 报文中获得对应目的路由器的 MAC 地址。和上题类似，Wireshark 会显示 UDP 校验值错误，忽略即可。", "inputFormat": "输入包含不超过 $n$ 个流量片段，总大小不超过 $m$ 字节。根据输入，你需要构造的路由表的项目不超过 $k$ 条，需要查询路由表进行转发的报文占总报文的数量约为 $p_{query}\\%$。", "outputFormat": "你的输出将与答案文件进行**逐字节**对比。请不要输出任何多余信息，以免导致不必要的失分。", "hint": "**【子任务】**\n\n| 测试点 | $n$ | $m$ | $k$ | $p_{query}$ |\n| :--: | :--: | :--: | :--: | :--: |\n| 1 | $=10^2$ | $=1.5\\times 10^5$ | $=10$ | $=50\\%$ |\n| 2 | $=10^3$ | $=1.5\\times 10^6$ | $=10^2$ | $=50\\%$ |\n| 3 | $=10^3$ | $=1.5\\times 10^6$ | $=10^2$ | $=95\\%$ |\n| 4 | $=10^4$ | $=1.5\\times 10^7$ | $=10^3$ | $=50\\%$ |\n| 5 | $=10^4$ | $=1.5\\times 10^7$ | $=10^3$ | $=95\\%$ |\n| 6 | $=10^5$ | $=2\\times 10^7$ | $=10^4$ | $=95\\%$ |\n| 7 | $=10^5$ | $=2\\times 10^7$ | $=10^4$ | $=95\\%$ |\n| 8 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n| 9 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n| 10 | $=10^6$ | $=2\\times 10^8$ | $=10^5$ | $=95\\%$ |\n\n**【样例 1】**\n\n见题目附件 `1.in/ans`。\n\n**【样例解释 1】**\n\n样例输入有十个以太网帧，包括八个 RIP 包和两个需要转发的 IP 包。\n\n对于前四个 RIP Response，可以得到如下的路由表：\n\n收到第一个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n224.0.0.0/3 via 10.2.7.2 if 7 metric 15\n```\n\n收到第二个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n```\n\n收到第三个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n13.115.192.0/18 via 10.2.7.2 if 7 metric 9\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n```\n\n收到第四个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n```\n\n接着是两个 UDP 包，对于 `77.147.142.166` 这个地址，在路由表中没有对应的项，于是回应了 `ICMP Destination unreachable` 。对于 `107.28.70.129` 地址，它在 `104.0.0.0/6` 范围中，于是 TTL 减一并且转发到 `10.2.7.2` ，它的 MAC 地址可以从第一个 `RIP Response` 得到。\n\n收到第五个 Response 后：\n\n```\n104.0.0.0/6 via 10.2.7.2 if 7 metric 7\n88.128.0.0/10 via 10.2.6.2 if 6 metric 13\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n```\n\n收到第六个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n```\n\n收到第七个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n160.245.176.0/20 via 10.2.5.2 if 5 metric 9\n```\n\n收到第八个 Response 后：\n\n```\n130.127.0.0/17 via 10.2.4.2 if 4 metric 3\n160.245.176.0/20 via 10.2.5.2 if 5 metric 9\n90.32.0.0/15 via 10.2.5.2 if 5 metric 8\n```\n\n**【提示】**\n\n由于每个数据报文的转发都需要查询路由表，因此需要用高效的数据结构存储路由表中的关键信息，同时也要注意空间的使用效率。关于算法的高效实现，你可以参考《学习手册》附带的相关论文和资料。\n\n在转发 IP 分组时，分组头内很少的字段会被修改。因此 IP 校验值也未必需要重新计算，很多情况下可以只进行最小限度的改动。但如果你想进行任何形式的简化，务必保证你的操作与我们叙述的操作是**完全等价**的。直观的想法往往会遗漏一些边界情况，请一定注意。", "locale": "zh-CN"}}}
{"pid": "P10349", "type": "P", "difficulty": 3, "samples": [["6\nLPPLPL\n", "0 1 3 3 2 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Mrówki", "background": null, "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda próbna [Mrówki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/mro/)**\n\n数轴上有 $n$ 只蚂蚁，第 $i$ 只位于点 $x=i$。每只蚂蚁面向右（数轴的正方向）或者向左（数轴正方向的反方向）。蚂蚁小到我们可以认为他们是独立的点。\n\n信号发出后，所有蚂蚁开始以相同的单位速度朝它们面向的方向前进。如果两只蚂蚁相撞（位于同一点），它们就会弹开，也就是说，它们都会改变行进方向，继续前进。可以证明，经过一定时间后，不会再发生碰撞。你能编写一个程序，计算出每只蚂蚁会与其他蚂蚁碰撞多少次吗？", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 3\\times 10^5)$，表示蚂蚁的数量。\n\n第二行包含一个长为 $n$ 的字符串，字符串仅包含 `L` 和 `P`。其中第 $i$ 个字符表示蚂蚁 $i$ 面向的方向，如果为 `L`，则初始面向左，如果为 `P`，则初始面向右。", "outputFormat": "输出一行 $n$ 个整数，第 $i$ 个整数表示第 $i$ 只蚂蚁与其他蚂蚁的碰撞次数。", "hint": "第一只蚂蚁一开始面向左，不会与其他蚂蚁碰撞。最后一只蚂蚁会在 $x=5.5$ 处与第五只蚂蚁相撞，然后开始向右行进，并且再也不会停下来。第三只蚂蚁在 $x=3.5$ 处与第四只蚂蚁碰撞后，开始向左行走。第二只蚂蚁会在 $x=3$ 处碰撞，然后向左转，之后一直走下去。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Mrówki", "background": null, "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda próbna [Mrówki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/mro/)**\n\n数轴上有 $n$ 只蚂蚁，第 $i$ 只位于点 $x=i$。每只蚂蚁面向右（数轴的正方向）或者向左（数轴正方向的反方向）。蚂蚁小到我们可以认为他们是独立的点。\n\n信号发出后，所有蚂蚁开始以相同的单位速度朝它们面向的方向前进。如果两只蚂蚁相撞（位于同一点），它们就会弹开，也就是说，它们都会改变行进方向，继续前进。可以证明，经过一定时间后，不会再发生碰撞。你能编写一个程序，计算出每只蚂蚁会与其他蚂蚁碰撞多少次吗？", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 3\\times 10^5)$，表示蚂蚁的数量。\n\n第二行包含一个长为 $n$ 的字符串，字符串仅包含 `L` 和 `P`。其中第 $i$ 个字符表示蚂蚁 $i$ 面向的方向，如果为 `L`，则初始面向左，如果为 `P`，则初始面向右。", "outputFormat": "输出一行 $n$ 个整数，第 $i$ 个整数表示第 $i$ 只蚂蚁与其他蚂蚁的碰撞次数。", "hint": "第一只蚂蚁一开始面向左，不会与其他蚂蚁碰撞。最后一只蚂蚁会在 $x=5.5$ 处与第五只蚂蚁相撞，然后开始向右行进，并且再也不会停下来。第三只蚂蚁在 $x=3.5$ 处与第四只蚂蚁碰撞后，开始向左行走。第二只蚂蚁会在 $x=3$ 处碰撞，然后向左转，之后一直走下去。", "locale": "zh-CN"}}}
{"pid": "P10350", "type": "P", "difficulty": 5, "samples": [["5 11\n? 1\n+ 1 2\n+ 2 3\n? 2\n+ 3 1\n- 2\n? 1\n? 2\n? 3\n+ 2 2\n? 2\n", "0?1011\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["并查集", "2024", "PA（波兰）"], "title": "[PA 2024] Modernizacja Bajtocji", "background": "PA 2024 1A", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 1 [Modernizacja Bajtocji](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/mod/)**\n\nByteland 正在走向现代化。最新的政府项目旨在为那些没有电脑的村镇居民提供电脑。Byteasar 正在监督该计划中的一个村庄——Bytetown——的现代化进程，目前那里没有一个居民拥有电脑。\n\nBytetown 有 $n$ 个居民，为了简单起见，Byteasar 将他们用 $1$ 到 $n$ 的整数编号。最初没有一个居民拥有电脑。Byteasar 的任务是处理三种形式的事件：\n\n- $\\texttt{+}\\ a_i\\ b_i$：将一台电脑送给 Bytetown 的居民。然而，Byteasar 并不知道电脑是送给了编号为 $a_i$ 还是 $b_i$ 的居民。可能会出现 $a_i = b_i$ 的情况——在这种情况下，电脑肯定送给了编号为 $a_i$ 的居民。可以确定的是，电脑被送到了目前还没有电脑的居民手中。\n- $\\texttt{-}\\ c_i$：编号为 $c_i$ 的居民的电脑坏了。可以肯定的是，该居民曾经拥有一台电脑（但现在不再拥有，因此将来可能会收到一台新电脑）。\n- $\\texttt{?}\\ d_i$：Byteasar 需要（利用**迄今为止**获得的所有信息）确定编号为 $d_i$ 的居民：肯定有电脑，肯定没有电脑，还是不确定他是否有电脑。\n\n请编写一个程序，帮助 Byteasar 回答所提出的问题！\n\n注：在居民的电脑坏掉的前一刻，Byteasar 不一定可以确定这个居民是否有电脑。换句话说，在某居民电脑坏掉之前，不一定可以从之前的事件中确定他是否有电脑。", "inputFormat": "第一行包含两个整数 $n$ 和 $q\\ (1\\le n\\le 300\\, 000, 1\\le q\\le 1\\,000\\,000)$，分别表示 Bytetown 的居民人数和 Byteasar 需要处理的事件数量。\n\n接下来的 $q$ 行描述了题目中的连续发生的事件。在所有事件中，$1 \\le a_i,b_i,c_i,d_i \\le n$。\n\n保证 Byteasar 至少会被问及一次他知道的内容，即输入中至少包含一个 `?`，还保证至少有一次电脑送出过程，在这个过程中，电脑总会给一个目前不拥有电脑的人，且保证对于电脑坏掉事件中的居民，电脑坏掉时总会拥有一台电脑。", "outputFormat": "输出一个字符串，其长度等于 `?` 事件的个数。如果在第 $i$ 次查询时，该居民肯定有电脑，则该字符串中的第 $i$ 个字符为 `1`。如果该居民肯定没有电脑，则该字符串中的第 $i$ 个字符应为 `0`。如果不能确定该居民是否拥有电脑，则该序列中的第 $i$ 个字符应为 `?`。", "hint": "最初没有人有电脑，所以第一个询问的答案为「否」，输出的第一个字符是 `0`。然后送出了两台电脑，我们又被问到另一位居民是否有电脑。有可能迄今为止送出的两台电脑中有一台是送给他的，但也有可能电脑是分别送给第一位和第三位居民的。因此，我们无法最终确定第二位居民是否有电脑，所以答案是 `?`。需要注意的是，在下一次送出之后，第二位居民肯定已经拥有了一台电脑，但在询问 Byteasar 时，他并不知道这一点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Modernizacja Bajtocji", "background": "PA 2024 1A", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 1 [Modernizacja Bajtocji](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/mod/)**\n\nByteland 正在走向现代化。最新的政府项目旨在为那些没有电脑的村镇居民提供电脑。Byteasar 正在监督该计划中的一个村庄——Bytetown——的现代化进程，目前那里没有一个居民拥有电脑。\n\nBytetown 有 $n$ 个居民，为了简单起见，Byteasar 将他们用 $1$ 到 $n$ 的整数编号。最初没有一个居民拥有电脑。Byteasar 的任务是处理三种形式的事件：\n\n- $\\texttt{+}\\ a_i\\ b_i$：将一台电脑送给 Bytetown 的居民。然而，Byteasar 并不知道电脑是送给了编号为 $a_i$ 还是 $b_i$ 的居民。可能会出现 $a_i = b_i$ 的情况——在这种情况下，电脑肯定送给了编号为 $a_i$ 的居民。可以确定的是，电脑被送到了目前还没有电脑的居民手中。\n- $\\texttt{-}\\ c_i$：编号为 $c_i$ 的居民的电脑坏了。可以肯定的是，该居民曾经拥有一台电脑（但现在不再拥有，因此将来可能会收到一台新电脑）。\n- $\\texttt{?}\\ d_i$：Byteasar 需要（利用**迄今为止**获得的所有信息）确定编号为 $d_i$ 的居民：肯定有电脑，肯定没有电脑，还是不确定他是否有电脑。\n\n请编写一个程序，帮助 Byteasar 回答所提出的问题！\n\n注：在居民的电脑坏掉的前一刻，Byteasar 不一定可以确定这个居民是否有电脑。换句话说，在某居民电脑坏掉之前，不一定可以从之前的事件中确定他是否有电脑。", "inputFormat": "第一行包含两个整数 $n$ 和 $q\\ (1\\le n\\le 300\\, 000, 1\\le q\\le 1\\,000\\,000)$，分别表示 Bytetown 的居民人数和 Byteasar 需要处理的事件数量。\n\n接下来的 $q$ 行描述了题目中的连续发生的事件。在所有事件中，$1 \\le a_i,b_i,c_i,d_i \\le n$。\n\n保证 Byteasar 至少会被问及一次他知道的内容，即输入中至少包含一个 `?`，还保证至少有一次电脑送出过程，在这个过程中，电脑总会给一个目前不拥有电脑的人，且保证对于电脑坏掉事件中的居民，电脑坏掉时总会拥有一台电脑。", "outputFormat": "输出一个字符串，其长度等于 `?` 事件的个数。如果在第 $i$ 次查询时，该居民肯定有电脑，则该字符串中的第 $i$ 个字符为 `1`。如果该居民肯定没有电脑，则该字符串中的第 $i$ 个字符应为 `0`。如果不能确定该居民是否拥有电脑，则该序列中的第 $i$ 个字符应为 `?`。", "hint": "最初没有人有电脑，所以第一个询问的答案为「否」，输出的第一个字符是 `0`。然后送出了两台电脑，我们又被问到另一位居民是否有电脑。有可能迄今为止送出的两台电脑中有一台是送给他的，但也有可能电脑是分别送给第一位和第三位居民的。因此，我们无法最终确定第二位居民是否有电脑，所以答案是 `?`。需要注意的是，在下一次送出之后，第二位居民肯定已经拥有了一台电脑，但在询问 Byteasar 时，他并不知道这一点。", "locale": "zh-CN"}}}
{"pid": "P10351", "type": "P", "difficulty": 2, "samples": [["5\n1 2 3 1 2\n", "2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Liderzy", "background": "PA 2024 1B", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 1 [Liderzy](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/lid/)**\n\n根据 PWN 字典（一本波兰语字典），「*lider*」是指「政党、工会或其他社会组织的领导人」。另一方面，在算法中，序列中出现次数严格大于序列长度一半的元素被称为序列的领导元素。例如，序列 $[7, 2, 5, 7, 7]$ 的领导元素是数字 $7$，而序列 $[2, 3, 2, 3]$ 则没有领导元素。\n\n在本题中，我们将重点讨论「*lider*」一词的后一种含义。给定一个数列，你的任务是将它分成最小数目的数列（不一定连续），满足每个数列都有一个领导元素，并输出这个最小数目。可以证明这样的划分总是可能的。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 5\\times 10^5)$，表示序列的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n\\ (1\\le a_i\\le n)$，表示这个序列。", "outputFormat": "输出一行一个整数表示答案。", "hint": "输入的序列可以划分为 $[1,3,1]$ 和 $[2,2]$，这样划分后的两个序列就都有领导元素了（分别为 $1$ 和 $2$）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Liderzy", "background": "PA 2024 1B", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 1 [Liderzy](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/lid/)**\n\n根据 PWN 字典（一本波兰语字典），「*lider*」是指「政党、工会或其他社会组织的领导人」。另一方面，在算法中，序列中出现次数严格大于序列长度一半的元素被称为序列的领导元素。例如，序列 $[7, 2, 5, 7, 7]$ 的领导元素是数字 $7$，而序列 $[2, 3, 2, 3]$ 则没有领导元素。\n\n在本题中，我们将重点讨论「*lider*」一词的后一种含义。给定一个数列，你的任务是将它分成最小数目的数列（不一定连续），满足每个数列都有一个领导元素，并输出这个最小数目。可以证明这样的划分总是可能的。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 5\\times 10^5)$，表示序列的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n\\ (1\\le a_i\\le n)$，表示这个序列。", "outputFormat": "输出一行一个整数表示答案。", "hint": "输入的序列可以划分为 $[1,3,1]$ 和 $[2,2]$，这样划分后的两个序列就都有领导元素了（分别为 $1$ 和 $2$）。", "locale": "zh-CN"}}}
{"pid": "P10352", "type": "P", "difficulty": 1, "samples": [["10 10 7 10 10 10 10 10 10 10 10 10 0 10 4 10 10 10\n10 10 10 10 10 10 10 10 10 10 10 10 4 3 4 10 10 10\n", "Algosia\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Kto wygrał?", "background": "PA 2024 1C", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 1 [Kto wygrał?](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/kto/)**\n\nAlgosia 和 Bytie 喜欢在 PA 中一较高下。在线上比赛中，有 $18$ 道题需要解决，每道题可获得 $0$ 到 $10$ 分。参赛者按总得分排序。如果积分相同，则在更多题中获得 $10$ 分的选手排名靠前。如果再次出现同分情况，则在更多题中获得 $9$ 分的选手排名靠前，依此类推。如果无法通过这种方式区分选手，则宣布他们之间打成平手。\n\nAlgosia 和 Bajtek 还记得上届比赛所有任务的得分，但他们不记得……谁赢了。你能帮他们编写一个程序，读取他们的成绩，并告诉他们谁的名次更高吗？", "inputFormat": "第一行包含区间 $[0, 10]$ 内的 $18$ 个整数，表示 Algosia 在每道题上的得分。\n\n第二行也包含区间 $[0, 10]$ 内的 $18$ 个整数，表示 Bajtek 在每道题上的得分。", "outputFormat": "输出一行一个单词——`Algosia` 或 `Bajtek`，表示获胜者的名字。如果出现平局，则输出 `remis`（波兰语中平局的意思）。", "hint": "虽然 Algosia 和 Bytie 的得分都是 $161$ 分，但根据 PA 规则，Algosia 的排名更高。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Kto wygrał?", "background": "PA 2024 1C", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 1 [Kto wygrał?](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/kto/)**\n\nAlgosia 和 Bytie 喜欢在 PA 中一较高下。在线上比赛中，有 $18$ 道题需要解决，每道题可获得 $0$ 到 $10$ 分。参赛者按总得分排序。如果积分相同，则在更多题中获得 $10$ 分的选手排名靠前。如果再次出现同分情况，则在更多题中获得 $9$ 分的选手排名靠前，依此类推。如果无法通过这种方式区分选手，则宣布他们之间打成平手。\n\nAlgosia 和 Bajtek 还记得上届比赛所有任务的得分，但他们不记得……谁赢了。你能帮他们编写一个程序，读取他们的成绩，并告诉他们谁的名次更高吗？", "inputFormat": "第一行包含区间 $[0, 10]$ 内的 $18$ 个整数，表示 Algosia 在每道题上的得分。\n\n第二行也包含区间 $[0, 10]$ 内的 $18$ 个整数，表示 Bajtek 在每道题上的得分。", "outputFormat": "输出一行一个单词——`Algosia` 或 `Bajtek`，表示获胜者的名字。如果出现平局，则输出 `remis`（波兰语中平局的意思）。", "hint": "虽然 Algosia 和 Bytie 的得分都是 $161$ 分，但根据 PA 规则，Algosia 的排名更高。", "locale": "zh-CN"}}}
{"pid": "P10353", "type": "P", "difficulty": 7, "samples": [["3 1\n2 3 1\n", "333333337\n"], ["5 2\n2 1 3 4 5\n2 3 4 5 1\n", "5"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "群论", "置换", "期望", "随机化", "PA（波兰）"], "title": "[PA 2024] Grupa permutacji", "background": "PA 2024 2A", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 2 [Grupa permutacji](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/gru/)**\n\n在本题中，我们将处理 $n$ 个元素的排列。$n$ 个元素的排列是由 $1$ 到 $n$（包含两端）的 $n$ 个不同的自然数组成的序列。将排列 $a_1,a_2,\\ldots,a_n$ 和排列 $b_1,b_2,\\ldots,b_n$ 复合起来，会得到排列 $a_{b_1},a_{b_2},\\ldots,a_{b_n}$。我们称任意满足 $i<j$ 且 $p_i>p_j$ 的数对 $(i,j)$ 为排列 $p_1,p_2,\\ldots,p_n$ 的逆序对。\n\nBytie 是 $n$ 个元素的排列的忠实粉丝。他非常喜欢它们，并且其中有一些是他最喜欢的。他决定开始在一张纸上写下通过复合他最喜欢的排列（以任何顺序，也许多次使用其中一些排列）能得到的所有排列，并小心翼翼地保证不写出任何排列超过一次。\n\n毫无疑问，他很快就用完了纸张。然后 Bytie 有一个问题：如果他列出所有可能的排列，它们平均会有多少个逆序对？\n\n帮他写一个程序来计算这个值。更具体地说，输出答案对 $10^9+7$ 取模后的值（详见「输出格式」部分）。", "inputFormat": "第一行包含两个整数 $n$ 和 $k\\ (1\\le n,k\\le 3\\,000)$，分别表示排列的长度和 Bytie 最喜欢的排列个数。\n\n接下来 $k$ 行，第 $i$ 行包含 $n$ 个互不相同的整数 $a_{i,1},a_{i,2},\\ldots,a_{i,n}\\ (1\\le a_{i,j}\\le n)$，表示 Bytie 第 $i$ 个最喜欢的排列。", "outputFormat": "输出一行一个整数，表示 Bytie 可能写下的所有排列中逆序对数的平均值模 $10^9+7$ 后的结果。\n\n形式化地说，令结果为 $\\frac{p}{q}$，其中 $q\\neq 0$ 且 $\\gcd(p,q)=1$。则输出 $p\\cdot q^{-1}\\pmod{10^9+7}$，其中 $q^{-1}$ 表示在 $1,2,\\ldots,10^9+6$ 中唯一满足 $q\\cdot q^{-1}\\equiv 1\\pmod{10^9+7}$ 的整数。\n\n可以证明，对于所有满足条件的测试数据，其结果是一个有理数，其不可约形式的分母不能被 $10^9+7$ 整除。", "hint": "在第一组样例中，Bytie 会写下排列 $\\{1,2,3\\}$（有 $0$ 个逆序对），排列 $\\{2,3,1\\}$（有 $2$ 个逆序对）和排列 $\\{3,1,2\\}$（有 $2$ 个逆序对）。因此平均逆序对个数为 $\\frac{4}{3}$。且 $3^{-1}\\equiv 333333336\\pmod{10^9+7}$，因此答案为 $333333336\\cdot 4\\equiv 1333333344\\equiv 333333337\\pmod{10^9+7}$。\n\n在第二组样例中，Bytie 会写下 $5$ 个元素的所有排列。容易证明它们平均有 $5$ 个逆序对。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Grupa permutacji", "background": "PA 2024 2A", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 2 [Grupa permutacji](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/gru/)**\n\n在本题中，我们将处理 $n$ 个元素的排列。$n$ 个元素的排列是由 $1$ 到 $n$（包含两端）的 $n$ 个不同的自然数组成的序列。将排列 $a_1,a_2,\\ldots,a_n$ 和排列 $b_1,b_2,\\ldots,b_n$ 复合起来，会得到排列 $a_{b_1},a_{b_2},\\ldots,a_{b_n}$。我们称任意满足 $i<j$ 且 $p_i>p_j$ 的数对 $(i,j)$ 为排列 $p_1,p_2,\\ldots,p_n$ 的逆序对。\n\nBytie 是 $n$ 个元素的排列的忠实粉丝。他非常喜欢它们，并且其中有一些是他最喜欢的。他决定开始在一张纸上写下通过复合他最喜欢的排列（以任何顺序，也许多次使用其中一些排列）能得到的所有排列，并小心翼翼地保证不写出任何排列超过一次。\n\n毫无疑问，他很快就用完了纸张。然后 Bytie 有一个问题：如果他列出所有可能的排列，它们平均会有多少个逆序对？\n\n帮他写一个程序来计算这个值。更具体地说，输出答案对 $10^9+7$ 取模后的值（详见「输出格式」部分）。", "inputFormat": "第一行包含两个整数 $n$ 和 $k\\ (1\\le n,k\\le 3\\,000)$，分别表示排列的长度和 Bytie 最喜欢的排列个数。\n\n接下来 $k$ 行，第 $i$ 行包含 $n$ 个互不相同的整数 $a_{i,1},a_{i,2},\\ldots,a_{i,n}\\ (1\\le a_{i,j}\\le n)$，表示 Bytie 第 $i$ 个最喜欢的排列。", "outputFormat": "输出一行一个整数，表示 Bytie 可能写下的所有排列中逆序对数的平均值模 $10^9+7$ 后的结果。\n\n形式化地说，令结果为 $\\frac{p}{q}$，其中 $q\\neq 0$ 且 $\\gcd(p,q)=1$。则输出 $p\\cdot q^{-1}\\pmod{10^9+7}$，其中 $q^{-1}$ 表示在 $1,2,\\ldots,10^9+6$ 中唯一满足 $q\\cdot q^{-1}\\equiv 1\\pmod{10^9+7}$ 的整数。\n\n可以证明，对于所有满足条件的测试数据，其结果是一个有理数，其不可约形式的分母不能被 $10^9+7$ 整除。", "hint": "在第一组样例中，Bytie 会写下排列 $\\{1,2,3\\}$（有 $0$ 个逆序对），排列 $\\{2,3,1\\}$（有 $2$ 个逆序对）和排列 $\\{3,1,2\\}$（有 $2$ 个逆序对）。因此平均逆序对个数为 $\\frac{4}{3}$。且 $3^{-1}\\equiv 333333336\\pmod{10^9+7}$，因此答案为 $333333336\\cdot 4\\equiv 1333333344\\equiv 333333337\\pmod{10^9+7}$。\n\n在第二组样例中，Bytie 会写下 $5$ 个元素的所有排列。容易证明它们平均有 $5$ 个逆序对。", "locale": "zh-CN"}}}
{"pid": "P10354", "type": "P", "difficulty": 4, "samples": [["4\n3\n1 2\n3 4\n3 2\n4\n1 4\n1 2\n2 3\n3 4\n", "3\n+ 1 3\n+ 1 4\n- 3 1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "Special Judge", "PA（波兰）"], "title": "[PA 2024] Alchemik Bajtazar", "background": "PA 2024 2B", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 2 [Alchemik Bajtazar](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/alc/)**\n\nByteasar 是一位著名的炼金术士，为了解决材料的嬗变问题，他暂时放下了制造贤者石的尝试。具体来说，Byteasar 想把一种分子转化成另一种。Byteasar 所拥有的分子由 $n$ 个 bytonium 原子组成（在 Byteotia，bytonium 是最常用的化学元素之一，主要用于生产食品和隐形眼镜），这些原子从 $1$ 到 $n$ 编号。某些原子对之间可能存在键，但每对原子之间最多只有一个键。这些分子形成了一个连贯的整体——从每个原子出发，通过一个或多个键就可以到达其他任何原子。\n\nByteasar 描述了他希望得到的 $n$ 个原子的分子中的键——对于每一对原子，他都知道是否希望它们最终由键连接。目标分子满足同样的条件——它形成一个连贯的整体，每对原子最多由一个键连接。不幸的是，Byteasar 的分子可能与目标分子不同。为了解决这个问题，他可以使用自己的炼金术能力。他可以随时进行两种可能的操作之一：\n\n- Byteasar 可以选择没有键连接的两个不同原子 $a$ 和 $b$，并在它们之间形成键。由于 bytonium 的高度不稳定性，只有当前存在与 $a$ 和 $b$ 都成键的原子 $c$（不同于 $a$ 和 $b$），他才可以这样做。\n- Byteasar 可以选择通过键连接的两个不同原子 $a$ 和 $b$，并移除连接它们的键。出于类似的原因，只有当前存在与 $a$ 和 $b$ 都成键的原子 $c$（不同于 $a$ 和 $b$），他才可以这样做。\n\nByteasar 不想在转化上花费太多时间。请编写一个程序，帮助他将自己的分子转化为目标分子，并在最多 $200\\, 000$ 次操作中完成。\n\n注意：原子两两不同，可以区分。", "inputFormat": "第一行一个整数 $n\\ (2\\le n\\le 30\\,000)$，表示 Byteasar 拥有的分子和目标分子中原子的个数。\n\n第二行一个整数 $m_s\\ (n-1 \\le m_s \\le 50\\, 000)$，表示 Byteasar 拥有的分子中的键数。\n\n接下来 $m_s$ 行，每行两个整数。其中第 $i$ 行的整数 $a_i$ 和 $b_i\\ (1 \\le a_i , b_i \\le n, a_i \\neq b_i)$ 表示通过键连接的原子编号。可以保证 Byteasar 的分子是一个连贯的整体，并且每两个原子最多只通过一个键相连。\n\n接下来一行一个整数 $m_d\\ (n-1\\le m_d\\le 50\\,000)$，表示目标分子中的键数。\n\n接下来 $m_d$ 行包含对这些键的描述，格式与目前已拥有的分子相同。", "outputFormat": "输出第一行包含总操作数 $r$。必须保证 $0\\le r\\le 200\\,000$。\n\n接下来每行包含对操作的描述。 如果你想在第 $i$ 次移动中连接原子 $x_i$ 和 $y_i$，第 $i$ 行应该以 `+` 号开头，在一个空格之后输出编号 $x_i$ 和 $y_i$，也用一个空格分隔。 相反，如果想删除连接 $x_i$ 和 $y_i$ 原子的键，则该行应以 `-` 开头，然后类似地，输出编号 $x_i$ 和 $y_i$。\n\n输出的操作序列必须满足题目描述中给出的条件——当选择原子 $x_i$ 和 $y_i$ 时，必须有另一个原子与它们连接。执行一系列动作后，最终的分子必须与目标分子相同，即对于每对原子 $i, j\\ (1 \\le i < j \\le n)$，如果编号为 $i$ 和 $j$ 的原子在目标分子中被一条键连接，最终状态中这对原子也应该被一条键连接。\n\n注意，你不必最小化移动次数，你只需要最多进行 $200\\,000$ 次操作即可。可以证明，总可以进行不超过 $200\\,000$ 次操作来实现转化。", "hint": "请注意，Byteasar 无法立即连接第一个原子与第四个原子，因为当时没有原子与它们两个相连。通过在第一个和第三个原子之间建立临时键，Byteasar 就使该原子成为了第三个原子。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Alchemik Bajtazar", "background": "PA 2024 2B", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 2 [Alchemik Bajtazar](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/alc/)**\n\nByteasar 是一位著名的炼金术士，为了解决材料的嬗变问题，他暂时放下了制造贤者石的尝试。具体来说，Byteasar 想把一种分子转化成另一种。Byteasar 所拥有的分子由 $n$ 个 bytonium 原子组成（在 Byteotia，bytonium 是最常用的化学元素之一，主要用于生产食品和隐形眼镜），这些原子从 $1$ 到 $n$ 编号。某些原子对之间可能存在键，但每对原子之间最多只有一个键。这些分子形成了一个连贯的整体——从每个原子出发，通过一个或多个键就可以到达其他任何原子。\n\nByteasar 描述了他希望得到的 $n$ 个原子的分子中的键——对于每一对原子，他都知道是否希望它们最终由键连接。目标分子满足同样的条件——它形成一个连贯的整体，每对原子最多由一个键连接。不幸的是，Byteasar 的分子可能与目标分子不同。为了解决这个问题，他可以使用自己的炼金术能力。他可以随时进行两种可能的操作之一：\n\n- Byteasar 可以选择没有键连接的两个不同原子 $a$ 和 $b$，并在它们之间形成键。由于 bytonium 的高度不稳定性，只有当前存在与 $a$ 和 $b$ 都成键的原子 $c$（不同于 $a$ 和 $b$），他才可以这样做。\n- Byteasar 可以选择通过键连接的两个不同原子 $a$ 和 $b$，并移除连接它们的键。出于类似的原因，只有当前存在与 $a$ 和 $b$ 都成键的原子 $c$（不同于 $a$ 和 $b$），他才可以这样做。\n\nByteasar 不想在转化上花费太多时间。请编写一个程序，帮助他将自己的分子转化为目标分子，并在最多 $200\\, 000$ 次操作中完成。\n\n注意：原子两两不同，可以区分。", "inputFormat": "第一行一个整数 $n\\ (2\\le n\\le 30\\,000)$，表示 Byteasar 拥有的分子和目标分子中原子的个数。\n\n第二行一个整数 $m_s\\ (n-1 \\le m_s \\le 50\\, 000)$，表示 Byteasar 拥有的分子中的键数。\n\n接下来 $m_s$ 行，每行两个整数。其中第 $i$ 行的整数 $a_i$ 和 $b_i\\ (1 \\le a_i , b_i \\le n, a_i \\neq b_i)$ 表示通过键连接的原子编号。可以保证 Byteasar 的分子是一个连贯的整体，并且每两个原子最多只通过一个键相连。\n\n接下来一行一个整数 $m_d\\ (n-1\\le m_d\\le 50\\,000)$，表示目标分子中的键数。\n\n接下来 $m_d$ 行包含对这些键的描述，格式与目前已拥有的分子相同。", "outputFormat": "输出第一行包含总操作数 $r$。必须保证 $0\\le r\\le 200\\,000$。\n\n接下来每行包含对操作的描述。 如果你想在第 $i$ 次移动中连接原子 $x_i$ 和 $y_i$，第 $i$ 行应该以 `+` 号开头，在一个空格之后输出编号 $x_i$ 和 $y_i$，也用一个空格分隔。 相反，如果想删除连接 $x_i$ 和 $y_i$ 原子的键，则该行应以 `-` 开头，然后类似地，输出编号 $x_i$ 和 $y_i$。\n\n输出的操作序列必须满足题目描述中给出的条件——当选择原子 $x_i$ 和 $y_i$ 时，必须有另一个原子与它们连接。执行一系列动作后，最终的分子必须与目标分子相同，即对于每对原子 $i, j\\ (1 \\le i < j \\le n)$，如果编号为 $i$ 和 $j$ 的原子在目标分子中被一条键连接，最终状态中这对原子也应该被一条键连接。\n\n注意，你不必最小化移动次数，你只需要最多进行 $200\\,000$ 次操作即可。可以证明，总可以进行不超过 $200\\,000$ 次操作来实现转化。", "hint": "请注意，Byteasar 无法立即连接第一个原子与第四个原子，因为当时没有原子与它们两个相连。通过在第一个和第三个原子之间建立临时键，Byteasar 就使该原子成为了第三个原子。", "locale": "zh-CN"}}}
{"pid": "P10355", "type": "P", "difficulty": 2, "samples": [["9\n1 1 777 42 777 1 42 1 777\n", "9 8 6 4 0 0 0 0 0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Znaczki pocztowe", "background": "PA 2024 2C", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 2 [Znaczki pocztowe](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/zna/)**\n\nByteasar 曾经收集了大量邮票。然而，他对邮票的兴趣已不如年轻时，因此他决定将自己的邮集赠送给更年轻的集邮爱好者。不过，他希望尽可能公平地完成这项工作，为此他需要你的帮助。\n\nBytesar 的邮集由 $n$ 张邮票组成，其中第 $i$ 张来自城市 $a_i$。为简单起见，我们用整数表示这些城市。Byteasar 打算在报纸上刊登一则公告，宣布他计划赠送自己的收藏的邮票。如果有 $k$ 个人愿意接收，他将在如下条件下向每个人赠送一个邮票的子集：每个人都必须收到相同的邮票多重集。这就意味着，对于每两个申请人和每个城市，两个申请人都必须从该城市获得相同数量的邮票。特别地，这可能意味着 Byteasar 将不发放任何邮票。\n\nByteasar 不知道会有多少人前来接收。因此，对于 $1$ 到 $n$ 范围内的每个数 $k$，你需要找出如果有 $k$ 个人愿意接收，Byteasar 最多可以分发多少张邮票。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 300\\,000)$，表示 Byteasar 收藏的邮票数量。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n\\ (1\\le a_i\\le 10^9)$，表示 Byteasar 的邮票所来自城市的编号。", "outputFormat": "输出一行 $n$ 个整数，第 $k$ 个整数表示如果有 $k$ 个人愿意接收 Byteasar 的邮票，Byteasar 最多能分发多少张邮票。", "hint": "如果有一个人愿意接收，Byteasar 可以把所有邮票都给他。\n\n如果有两个人，Byteasar 可以给他们每人两张 $1$ 号城镇的邮票、一张 $42$ 号城镇的邮票和一张 $777$ 号城镇的邮票，即总共 $8$ 张邮票。\n\n如果有四个人，Byteasar 可以给他们每人一张 $1$ 号城市的邮票。\n\n如果愿意接收的人数超过四人，Byteasar 将无法送出任何邮票。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Znaczki pocztowe", "background": "PA 2024 2C", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 2 [Znaczki pocztowe](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/zna/)**\n\nByteasar 曾经收集了大量邮票。然而，他对邮票的兴趣已不如年轻时，因此他决定将自己的邮集赠送给更年轻的集邮爱好者。不过，他希望尽可能公平地完成这项工作，为此他需要你的帮助。\n\nBytesar 的邮集由 $n$ 张邮票组成，其中第 $i$ 张来自城市 $a_i$。为简单起见，我们用整数表示这些城市。Byteasar 打算在报纸上刊登一则公告，宣布他计划赠送自己的收藏的邮票。如果有 $k$ 个人愿意接收，他将在如下条件下向每个人赠送一个邮票的子集：每个人都必须收到相同的邮票多重集。这就意味着，对于每两个申请人和每个城市，两个申请人都必须从该城市获得相同数量的邮票。特别地，这可能意味着 Byteasar 将不发放任何邮票。\n\nByteasar 不知道会有多少人前来接收。因此，对于 $1$ 到 $n$ 范围内的每个数 $k$，你需要找出如果有 $k$ 个人愿意接收，Byteasar 最多可以分发多少张邮票。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 300\\,000)$，表示 Byteasar 收藏的邮票数量。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n\\ (1\\le a_i\\le 10^9)$，表示 Byteasar 的邮票所来自城市的编号。", "outputFormat": "输出一行 $n$ 个整数，第 $k$ 个整数表示如果有 $k$ 个人愿意接收 Byteasar 的邮票，Byteasar 最多能分发多少张邮票。", "hint": "如果有一个人愿意接收，Byteasar 可以把所有邮票都给他。\n\n如果有两个人，Byteasar 可以给他们每人两张 $1$ 号城镇的邮票、一张 $42$ 号城镇的邮票和一张 $777$ 号城镇的邮票，即总共 $8$ 张邮票。\n\n如果有四个人，Byteasar 可以给他们每人一张 $1$ 号城市的邮票。\n\n如果愿意接收的人数超过四人，Byteasar 将无法送出任何邮票。", "locale": "zh-CN"}}}
{"pid": "P10356", "type": "P", "difficulty": 7, "samples": [["5 3\n1 2 5 7 4\n8 3 6\n", "0 84 6 0 0 0 0 0\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Splatanie ciągów", "background": "PA 2024 3A", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 3 [Splatanie ciągów](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/spl/)，感谢 Macaronlin 提供翻译**\n\n定义一个数组的稳定性是最长严格单调递增或递减的连续子区间的长度。如数组 $[8,6,1,3,5,7,4,2]$ 的稳定性为 $4$，因为有一个连续递增子区间 $[1,3,5,7]$，并且没有比其更长的严格单调的连续子区间了。\n\n定义 $A\\ \\text{i}\\ B$ 是 $A$ 和 $B$ 按某个方式归并形成的新数组（即新数组可以划分为两个不交叉子序列，且分别是 $A$ 和 $B$），如 $A=[1,2,3],B=[4,5]$，则 $A\\ \\text{i}\\ B$ 可以是 $ [1, 4, 2, 5, 3], [4, 5, 1, 2, 3]$ 或者 $[4, 1, 5, 2, 3]$，但不可能是 $[1,2,3,4,3]$ 或 $[1,2,3,5,4]$。\n\n令 $f(A,B)$ 表示 $A\\ \\text{i}\\ B$ 的最小稳定性。\n\n给你一个长度为 $n$ 的数组 $A$ 和长度为 $m$ 的数组 $B$。令 $A'$ 是 $A$ 的非空子区间，$B'$ 是 $B$ 的非空子区间。对于所有在区间 $[1,n+m]$ 的整数 $x$，求有多少对 $(A',B')$ 满足 $f(A', B')=x$。答案对 $10^9+7$ 取模。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (1\\le n,m\\le 300\\,000)$，分别表示 $A$ 数组和 $B$ 数组的长度。\n\n第二行 $n$ 个整数 $A_1,A_2,\\ldots,A_n\\ (1\\le A_i\\le n+m)$，表示 $A$ 数组。\n\n第三行 $m$ 个整数 $B_1,B_2,\\ldots,B_m\\ (1\\le B_i\\le n+m)$，表示 $B$ 数组。\n\n保证 $A$ 数组和 $B$ 数组中所有整数两两不同。也就是说 $A\\ \\text{i}\\ B$ 一定是 $1$ 到 $n+m$ 的整数的一个排列。", "outputFormat": "输出一行 $n+m$ 个整数，第 $i$ 个整数表示 满足 $f(A', B')=i$ 的 $(A',B')$ 对数，对 $10^9+7$ 取模。", "hint": "对于整个区间 $f([1,2,5,7,4],[8,3,6])=2$，如 $[1, 8, 2, 5, 3, 7, 4, 6]$ 的稳定性为 $2$，并且无法找出更小的了。\n\n考虑区间 $[1,2,5,7]$ 和 $[3]$，有 $f([1,2,5,7],[3])=3$，如 $[1,2,5,3,7]$。可以证明对于 $([1,2,5,7],[3])$ 没有比 $3$ 更小稳定性的组合方式了。\n\n考虑区间 $[4]$ 和 $[6]$，有 $f([4],[6])=2$，这两个区间只有两种拼接方式：$[4,6]$ 或 $[6,4]$，并且它们的稳定性都是 $2$。\n\n样例中所有子区间组合的稳定性都不大于 $3$，所以对于 $x\\ge 4$ 的情况答案均为 $0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Splatanie ciągów", "background": "PA 2024 3A", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 3 [Splatanie ciągów](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/spl/)，感谢 Macaronlin 提供翻译**\n\n定义一个数组的稳定性是最长严格单调递增或递减的连续子区间的长度。如数组 $[8,6,1,3,5,7,4,2]$ 的稳定性为 $4$，因为有一个连续递增子区间 $[1,3,5,7]$，并且没有比其更长的严格单调的连续子区间了。\n\n定义 $A\\ \\text{i}\\ B$ 是 $A$ 和 $B$ 按某个方式归并形成的新数组（即新数组可以划分为两个不交叉子序列，且分别是 $A$ 和 $B$），如 $A=[1,2,3],B=[4,5]$，则 $A\\ \\text{i}\\ B$ 可以是 $ [1, 4, 2, 5, 3], [4, 5, 1, 2, 3]$ 或者 $[4, 1, 5, 2, 3]$，但不可能是 $[1,2,3,4,3]$ 或 $[1,2,3,5,4]$。\n\n令 $f(A,B)$ 表示 $A\\ \\text{i}\\ B$ 的最小稳定性。\n\n给你一个长度为 $n$ 的数组 $A$ 和长度为 $m$ 的数组 $B$。令 $A'$ 是 $A$ 的非空子区间，$B'$ 是 $B$ 的非空子区间。对于所有在区间 $[1,n+m]$ 的整数 $x$，求有多少对 $(A',B')$ 满足 $f(A', B')=x$。答案对 $10^9+7$ 取模。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (1\\le n,m\\le 300\\,000)$，分别表示 $A$ 数组和 $B$ 数组的长度。\n\n第二行 $n$ 个整数 $A_1,A_2,\\ldots,A_n\\ (1\\le A_i\\le n+m)$，表示 $A$ 数组。\n\n第三行 $m$ 个整数 $B_1,B_2,\\ldots,B_m\\ (1\\le B_i\\le n+m)$，表示 $B$ 数组。\n\n保证 $A$ 数组和 $B$ 数组中所有整数两两不同。也就是说 $A\\ \\text{i}\\ B$ 一定是 $1$ 到 $n+m$ 的整数的一个排列。", "outputFormat": "输出一行 $n+m$ 个整数，第 $i$ 个整数表示 满足 $f(A', B')=i$ 的 $(A',B')$ 对数，对 $10^9+7$ 取模。", "hint": "对于整个区间 $f([1,2,5,7,4],[8,3,6])=2$，如 $[1, 8, 2, 5, 3, 7, 4, 6]$ 的稳定性为 $2$，并且无法找出更小的了。\n\n考虑区间 $[1,2,5,7]$ 和 $[3]$，有 $f([1,2,5,7],[3])=3$，如 $[1,2,5,3,7]$。可以证明对于 $([1,2,5,7],[3])$ 没有比 $3$ 更小稳定性的组合方式了。\n\n考虑区间 $[4]$ 和 $[6]$，有 $f([4],[6])=2$，这两个区间只有两种拼接方式：$[4,6]$ 或 $[6,4]$，并且它们的稳定性都是 $2$。\n\n样例中所有子区间组合的稳定性都不大于 $3$，所以对于 $x\\ge 4$ 的情况答案均为 $0$。", "locale": "zh-CN"}}}
{"pid": "P10357", "type": "P", "difficulty": 5, "samples": [["3 2 6\n1 2 1\n2 2 2\n1 1 5\n", "0\n10\n6\n7\n3\n13\n"], ["2 3 3\n1 1 1\n3 1 1\n", "0\n-1\n-1\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Żelki", "background": "PA 2024 3B", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 3 [Żelki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/zel/)，感谢 Macaronlin 提供翻译**\n\n共有 $n$ 种糖豆，有 $k$ 种颜色，第 $i$ 种糖豆颜色是 $k_i$，重量是 $m_i$，价格 $c_i$。现在要去购买糖豆，购买的糖豆需要包含所有 $k$ 种颜色，且每种颜色购买的数量相同。\n\n问对于在区间 $[0,m-1]$ 的每个整数 $r$，满足购买的糖豆总重量对 $m$ 取模为 $r$ 的购买方案中最小花费是多少？如果不存在满足条件的购买方案，则输出 $-1$。", "inputFormat": "第一行三个整数 $n,k$ 和 $m\\ (1\\le n,k,m\\le 7\\,000)$，分别表示糖豆种类数，颜色数和参数。\n\n接下来 $n$ 行，每行三个整数 $k_i,m_i$ 和 $c_i\\ (1\\le k_i\\le k,1\\le m_i\\le m,1\\le c_i\\le 10^9)$，分别表示第 $i$ 种糖豆的颜色，重量和价格。", "outputFormat": "输出 $m$ 行，第 $i$ 行表示满足购买的所有糖豆总重量对 $m$ 取模为 $i-1$ 的情况中花费的最小值。如果不存在这样的情况，输出 $-1$。", "hint": "在第一组样例中：\n\n- 为了使糖豆的总重量能被 $m = 6$ 整除，可以不买任何糖豆，这样就不用花钱了。\n- 为了使糖豆的总重量除以 $6$ 的余数为 $1$，应购买一颗第一种糖豆，两颗第二种糖豆，一颗第三种糖豆。这样花费为 $10$，得到两种颜色各两颗的糖豆，总重量等于 $7$。\n- 为了使糖豆总重量除以 $6$ 的余数等于 $5$，应该买两颗第一种糖豆、三颗第二种糖豆和一颗第三种糖豆。\n\n第二个样例中没有第二种颜色的糖豆，所以唯一可行的方案是不买任何糖豆。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Żelki", "background": "PA 2024 3B", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 3 [Żelki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/zel/)，感谢 Macaronlin 提供翻译**\n\n共有 $n$ 种糖豆，有 $k$ 种颜色，第 $i$ 种糖豆颜色是 $k_i$，重量是 $m_i$，价格 $c_i$。现在要去购买糖豆，购买的糖豆需要包含所有 $k$ 种颜色，且每种颜色购买的数量相同。\n\n问对于在区间 $[0,m-1]$ 的每个整数 $r$，满足购买的糖豆总重量对 $m$ 取模为 $r$ 的购买方案中最小花费是多少？如果不存在满足条件的购买方案，则输出 $-1$。", "inputFormat": "第一行三个整数 $n,k$ 和 $m\\ (1\\le n,k,m\\le 7\\,000)$，分别表示糖豆种类数，颜色数和参数。\n\n接下来 $n$ 行，每行三个整数 $k_i,m_i$ 和 $c_i\\ (1\\le k_i\\le k,1\\le m_i\\le m,1\\le c_i\\le 10^9)$，分别表示第 $i$ 种糖豆的颜色，重量和价格。", "outputFormat": "输出 $m$ 行，第 $i$ 行表示满足购买的所有糖豆总重量对 $m$ 取模为 $i-1$ 的情况中花费的最小值。如果不存在这样的情况，输出 $-1$。", "hint": "在第一组样例中：\n\n- 为了使糖豆的总重量能被 $m = 6$ 整除，可以不买任何糖豆，这样就不用花钱了。\n- 为了使糖豆的总重量除以 $6$ 的余数为 $1$，应购买一颗第一种糖豆，两颗第二种糖豆，一颗第三种糖豆。这样花费为 $10$，得到两种颜色各两颗的糖豆，总重量等于 $7$。\n- 为了使糖豆总重量除以 $6$ 的余数等于 $5$，应该买两颗第一种糖豆、三颗第二种糖豆和一颗第三种糖豆。\n\n第二个样例中没有第二种颜色的糖豆，所以唯一可行的方案是不买任何糖豆。", "locale": "zh-CN"}}}
{"pid": "P10358", "type": "P", "difficulty": 3, "samples": [["6 10\n3\n1 3 6\n", "9\n"], ["3 3\n1\n2\n", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "贪心", "2024", "PA（波兰）"], "title": "[PA 2024] Obrazy", "background": "PA 2024 3C", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 3 [Obrazy](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/obr/)，感谢 Macaronlin 提供翻译**\n\n给定尺寸为 $h\\times w$ 的矩形墙面，以及 $n$ 种尺寸的正方形画框，每种尺寸画框都有无穷多个。对于任意两种不同尺寸的画框，其中一个尺寸的边长总能整除另一个尺寸的边长。\n\n现用这些画框完全覆盖墙面，而且画框之间不能重叠，只能边缘相接，请求出最少需要购买多少个画框？如果不可能完全覆盖墙面，则程序应输出 $-1$。", "inputFormat": "第一行两个整数 $h$ 和 $w\\ (1\\le h,w\\le 10^9)$，表示墙面大小。\n\n第二行一个整数 $n\\ (1\\le n\\le 30)$，表示画框个数。\n\n第三行 $n$ 个整数 $d_1,d_2,\\ldots,d_n\\ (1\\le d_i\\le 10^9,d_i<d_{i+1})$，表示每个正方形画框的大小，保证 $d_{i+1}$ 能被 $d_i$ 整除。", "outputFormat": "输出一行一个整数，如果可以完全覆盖墙面，输出最少要购买多少画框，否则输出 $-1$。", "hint": "在第一个样例中，Byteasar 可以用九个画框（六个 $1\\times 1$、两个 $3\\times 3$ 和一个 $6\\times 6$）覆盖一面墙，具体如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t6g3zuws.png)\n\n在第二个样例中，无法完全覆盖墙面。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Obrazy", "background": "PA 2024 3C", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 3 [Obrazy](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/obr/)，感谢 Macaronlin 提供翻译**\n\n给定尺寸为 $h\\times w$ 的矩形墙面，以及 $n$ 种尺寸的正方形画框，每种尺寸画框都有无穷多个。对于任意两种不同尺寸的画框，其中一个尺寸的边长总能整除另一个尺寸的边长。\n\n现用这些画框完全覆盖墙面，而且画框之间不能重叠，只能边缘相接，请求出最少需要购买多少个画框？如果不可能完全覆盖墙面，则程序应输出 $-1$。", "inputFormat": "第一行两个整数 $h$ 和 $w\\ (1\\le h,w\\le 10^9)$，表示墙面大小。\n\n第二行一个整数 $n\\ (1\\le n\\le 30)$，表示画框个数。\n\n第三行 $n$ 个整数 $d_1,d_2,\\ldots,d_n\\ (1\\le d_i\\le 10^9,d_i<d_{i+1})$，表示每个正方形画框的大小，保证 $d_{i+1}$ 能被 $d_i$ 整除。", "outputFormat": "输出一行一个整数，如果可以完全覆盖墙面，输出最少要购买多少画框，否则输出 $-1$。", "hint": "在第一个样例中，Byteasar 可以用九个画框（六个 $1\\times 1$、两个 $3\\times 3$ 和一个 $6\\times 6$）覆盖一面墙，具体如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t6g3zuws.png)\n\n在第二个样例中，无法完全覆盖墙面。", "locale": "zh-CN"}}}
{"pid": "P10359", "type": "P", "difficulty": 7, "samples": [["4 2 9\n1 2 2\n3 2 5\n4 2\n3 2 2 5\n4 1\n3 2 4 3\n4 1\n4 3\n2 2 1\n1 1 4 1\n4 4\n", "0\n5\n3\n0\n0\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Kolorowy las", "background": "PA 2024 4A", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 4 [Kolorowy las](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/kol/)，感谢 Macaronlin 提供翻译**\n\n给定 $n$ 个点的森林（无向无环图），点从 $1$ 到 $n$ 编号，有正整数边权，每个点有颜色，初始所有点颜色为 $0$。\n\n有 $4$ 种共 $q$ 个操作：\n\n- $1\\ a_i\\ b_i\\ d_i$：在 $a_i$ 和 $b_i$ 之间添加一条边权为 $d_i$ 的边（保证添加之后图中仍无环）；\n- $2\\ a_i\\ b_i$：删除 $a_i$ 和 $b_i$ 之间的边；\n- $3\\ v_i\\ z_i\\ k_i$：把所有可以到达 $v_i$ 且到 $v_i$ 的距离小于等于 $z_i$ 的顶点染色为 $k_i$；\n- $4\\ u_i$：查询点 $u_i$ 的颜色。", "inputFormat": "第一行三个整数 $n,m,q\\ (2\\le n\\le 200\\,000,0\\le m\\le n-1,1\\le q\\le 200\\,000)$，分别表示点数，边数和操作数。\n\n接下来 $m$ 行，每行三个整数 $a_i,b_i,d_i\\ (1\\le a_i,b_i\\le n,1\\le d_i\\le 10^9)$，表示点 $a_i$ 和 $b_i$ 之间有一条长度为 $d_i$ 的边。\n\n接下来 $q$ 行描述操作，格式如题目描述。保证 $1\\le a_i,b_i,v_i,u_i\\le n$，$1\\le d_i\\le 10^9$，$0\\le z_i\\le 10^{15}$，$1\\le k_i\\le 10^9$。\n\n保证给定的 $m$ 条边形成一个合法的森林，图在经过修改后仍然形成一个合法的森林，并且保证不会删除图中不存在的边。\n\n此外，还保证至少存在一个操作 $4$。", "outputFormat": "对于每一个操作 $4$ 输出一行一个整数，表示答案。", "hint": "- 在某些子任务中，不存在操作 $1$ 和 $2$，且 $m=n-1$；\n- 在某些子任务中，操作 $3$ 中均有 $z_i=10^{15}$。\n\n对于上述每种附加限制，都至少有一个子任务能满足。满足两种附加限制的子任务集合可能相交，也可能不相交。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Kolorowy las", "background": "PA 2024 4A", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 4 [Kolorowy las](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/kol/)，感谢 Macaronlin 提供翻译**\n\n给定 $n$ 个点的森林（无向无环图），点从 $1$ 到 $n$ 编号，有正整数边权，每个点有颜色，初始所有点颜色为 $0$。\n\n有 $4$ 种共 $q$ 个操作：\n\n- $1\\ a_i\\ b_i\\ d_i$：在 $a_i$ 和 $b_i$ 之间添加一条边权为 $d_i$ 的边（保证添加之后图中仍无环）；\n- $2\\ a_i\\ b_i$：删除 $a_i$ 和 $b_i$ 之间的边；\n- $3\\ v_i\\ z_i\\ k_i$：把所有可以到达 $v_i$ 且到 $v_i$ 的距离小于等于 $z_i$ 的顶点染色为 $k_i$；\n- $4\\ u_i$：查询点 $u_i$ 的颜色。", "inputFormat": "第一行三个整数 $n,m,q\\ (2\\le n\\le 200\\,000,0\\le m\\le n-1,1\\le q\\le 200\\,000)$，分别表示点数，边数和操作数。\n\n接下来 $m$ 行，每行三个整数 $a_i,b_i,d_i\\ (1\\le a_i,b_i\\le n,1\\le d_i\\le 10^9)$，表示点 $a_i$ 和 $b_i$ 之间有一条长度为 $d_i$ 的边。\n\n接下来 $q$ 行描述操作，格式如题目描述。保证 $1\\le a_i,b_i,v_i,u_i\\le n$，$1\\le d_i\\le 10^9$，$0\\le z_i\\le 10^{15}$，$1\\le k_i\\le 10^9$。\n\n保证给定的 $m$ 条边形成一个合法的森林，图在经过修改后仍然形成一个合法的森林，并且保证不会删除图中不存在的边。\n\n此外，还保证至少存在一个操作 $4$。", "outputFormat": "对于每一个操作 $4$ 输出一行一个整数，表示答案。", "hint": "- 在某些子任务中，不存在操作 $1$ 和 $2$，且 $m=n-1$；\n- 在某些子任务中，操作 $3$ 中均有 $z_i=10^{15}$。\n\n对于上述每种附加限制，都至少有一个子任务能满足。满足两种附加限制的子任务集合可能相交，也可能不相交。", "locale": "zh-CN"}}}
{"pid": "P10360", "type": "P", "difficulty": 6, "samples": [["4 4\n4 1\n1 2\n3 4\n1 4\n", "0 0 1 1\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Desant 3", "background": "PA 2024 4B", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 4 [Desant 3](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/des/)，感谢 Macaronlin 提供翻译**\n\n$n$ 个士兵，从左到右编号为 $1$ 到 $n$。每个士兵有两种状态：准备好和未准备好。现对这些士兵下发 $m$ 条命令，第 $i$ 条命令会使得在 $a_i$ 位置和 $b_i$ 位置的士兵交换位置，但只有 $a_i$ 位置的士兵准备好并且 $b_i$ 位置的士兵没有准备好时才能交换，否则无效。\n\n问对于 $1$ 到 $n$ 中的每个整数 $k$，考虑 $\\binom{n}{k}$ 种士兵的初始准备情况，其中有 $k$ 个士兵已准备好，求有多少种准备情况可以在进行 $m$ 条命令后，满足所有准备好的士兵形成一段连续区间。你只需要输出种类数对 $2$ 取模后的值即可。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (2\\le n\\le 35,1\\le m\\le 1\\,000)$，分别表示士兵数和命令数。\n\n接下来 $m$ 行，每行两个整数 $a_i$ 和 $b_i\\ (1\\le a_i,b_i\\le n,a_i\\neq b_i)$，描述一条命令。", "outputFormat": "输出一行 $n$ 个整数，其中第 $k$ 个整数表示有 $k$ 个士兵准备好的所有初始情况中，可以在进行 $m$ 条命令后使得所有准备好的士兵形成一段连续区间的情况数。输出对 $2$ 取模。", "hint": "如果一开始只有一名士兵准备好，那么无论如何操作，最终准备好的士兵一定形成一个连续的区间。\n\n考虑这样一种情况：除了队列中的第二名士兵外，其他士兵都已准备好。第一个命令不会影响士兵的位置。第二道命令下达后，由于队列中的第一名士兵已准备好，而第二名士兵尚未准备好，他们将交换位置。第三道命令同样没有影响。由于现在队列中的第一名士兵还没有准备好，而队列中的第四名士兵已经准备好，因此他们不会因为最后一道命令而交换位置。最终只有排在第一位的士兵没有准备好。这是 $k = 3$ 时唯一一种满足条件的初始情况。\n\n未取模前的答案为 $[4,0,1,1]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Desant 3", "background": "PA 2024 4B", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 4 [Desant 3](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/des/)，感谢 Macaronlin 提供翻译**\n\n$n$ 个士兵，从左到右编号为 $1$ 到 $n$。每个士兵有两种状态：准备好和未准备好。现对这些士兵下发 $m$ 条命令，第 $i$ 条命令会使得在 $a_i$ 位置和 $b_i$ 位置的士兵交换位置，但只有 $a_i$ 位置的士兵准备好并且 $b_i$ 位置的士兵没有准备好时才能交换，否则无效。\n\n问对于 $1$ 到 $n$ 中的每个整数 $k$，考虑 $\\binom{n}{k}$ 种士兵的初始准备情况，其中有 $k$ 个士兵已准备好，求有多少种准备情况可以在进行 $m$ 条命令后，满足所有准备好的士兵形成一段连续区间。你只需要输出种类数对 $2$ 取模后的值即可。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (2\\le n\\le 35,1\\le m\\le 1\\,000)$，分别表示士兵数和命令数。\n\n接下来 $m$ 行，每行两个整数 $a_i$ 和 $b_i\\ (1\\le a_i,b_i\\le n,a_i\\neq b_i)$，描述一条命令。", "outputFormat": "输出一行 $n$ 个整数，其中第 $k$ 个整数表示有 $k$ 个士兵准备好的所有初始情况中，可以在进行 $m$ 条命令后使得所有准备好的士兵形成一段连续区间的情况数。输出对 $2$ 取模。", "hint": "如果一开始只有一名士兵准备好，那么无论如何操作，最终准备好的士兵一定形成一个连续的区间。\n\n考虑这样一种情况：除了队列中的第二名士兵外，其他士兵都已准备好。第一个命令不会影响士兵的位置。第二道命令下达后，由于队列中的第一名士兵已准备好，而第二名士兵尚未准备好，他们将交换位置。第三道命令同样没有影响。由于现在队列中的第一名士兵还没有准备好，而队列中的第四名士兵已经准备好，因此他们不会因为最后一道命令而交换位置。最终只有排在第一位的士兵没有准备好。这是 $k = 3$ 时唯一一种满足条件的初始情况。\n\n未取模前的答案为 $[4,0,1,1]$。", "locale": "zh-CN"}}}
{"pid": "P10361", "type": "P", "difficulty": 4, "samples": [["5 5\nAAPAA\nAPPAA\nAAPAA\nAAPAA\nAPPPA\n", "10\nR 1 Z\nK 4 A\nK 2 P\nR 5 P\nR 4 A\nR 3 A\nR 1 A\nK 5 A\nK 3 P\nK 1 A\n"], ["2 3\nAAA\nPPP\n", "2\nR 2 P\nR 1 A\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "Special Judge", "PA（波兰）"], "title": "[PA 2024] Łamigłówka 3", "background": "PA 2024 4C", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 4 [Łamigłówka 3](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/lam/)**\n\nBytie 喜欢玩手机游戏。然而让他感到恼火的是游戏中经常有其他游戏的广告，并且其中玩游戏的人表现得非常糟糕，广告这样做的目的是让看广告的人感到沮丧，从而产生玩下去的欲望。Bytie 对其中一个广告印象尤为深刻（你可能也看过）。\n\n![lam1.png](https://img.loj.ac.cn/2024/03/24/d2a22d1aa2488.png)\n\n由于可以从任何事物中汲取灵感，Bytie 决定在上述游戏的基础上出道题。他将选择一块大小为 $n\\times m$ 的目标图案，游戏在一块 $n\\times m$ 的网格上进行，其中没有任何区域被染色。在一次操作中，他可以选择一行或一列，并将这一行（或列）中的**所有方格**（注意，这比上面图片中的游戏更自由，因为在上面的游戏中，重复涂色同一单元格时颜色会混合）重新涂成自己选择的颜色。为了使题目更形式化，他还用大写英文字母标注了所有颜色。你能帮他写一个程序，对于他给出的每个网格，给出正确得到目标图案的操作顺序吗？你可以假设输入中最多可以用 $n+m$ 步操作得到目标图案。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (1\\le n,m\\le 2\\,000)$，分别表示网格的行数和列数。\n\n接下来 $n$ 行，每行一个长为 $m$ 的字符串。字符串由大写字母组成，第 $i$ 个字符串的第 $j$ 个字符表示目标图案中第 $i$ 行第 $j$ 列单元格的颜色。\n\n保证给定的目标图案可以通过最多 $n+m$ 次染色操作得到。", "outputFormat": "输出第一行包含一个整数 $r\\ (1\\le r\\le n+m)$，表示要进行的操作次数。接下来 $r$ 行描述操作。\n\n为了描述一次操作，首先应输出 `R` 或者 `K`，表示你希望对某行还是某列重新涂色（`R` 表示对某行重新涂色，`K` 表示对某列重新涂色）。接下来空一格，输出你希望重新涂色的行或列的编号，行按从上到下的顺序从 $1$ 到 $n$ 编号，列按从左到右的顺序从 $1$ 到 $m$ 编号。然后再空一格，输出一个大写英文字母，表示你希望对这行或这列重新涂成的颜色。\n\n注意你不需要最小化操作次数——只需要最多操作 $n+m$ 次即可。", "hint": "假设 `P` 代表绿色，`A` 代表黄色，`Z` 代表蓝色。样例 1 中的操作序列如下图所示：\n\n![lam2.png](https://img.loj.ac.cn/2024/03/24/7f9371fee9091.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Łamigłówka 3", "background": "PA 2024 4C", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 4 [Łamigłówka 3](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/lam/)**\n\nBytie 喜欢玩手机游戏。然而让他感到恼火的是游戏中经常有其他游戏的广告，并且其中玩游戏的人表现得非常糟糕，广告这样做的目的是让看广告的人感到沮丧，从而产生玩下去的欲望。Bytie 对其中一个广告印象尤为深刻（你可能也看过）。\n\n![lam1.png](https://img.loj.ac.cn/2024/03/24/d2a22d1aa2488.png)\n\n由于可以从任何事物中汲取灵感，Bytie 决定在上述游戏的基础上出道题。他将选择一块大小为 $n\\times m$ 的目标图案，游戏在一块 $n\\times m$ 的网格上进行，其中没有任何区域被染色。在一次操作中，他可以选择一行或一列，并将这一行（或列）中的**所有方格**（注意，这比上面图片中的游戏更自由，因为在上面的游戏中，重复涂色同一单元格时颜色会混合）重新涂成自己选择的颜色。为了使题目更形式化，他还用大写英文字母标注了所有颜色。你能帮他写一个程序，对于他给出的每个网格，给出正确得到目标图案的操作顺序吗？你可以假设输入中最多可以用 $n+m$ 步操作得到目标图案。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (1\\le n,m\\le 2\\,000)$，分别表示网格的行数和列数。\n\n接下来 $n$ 行，每行一个长为 $m$ 的字符串。字符串由大写字母组成，第 $i$ 个字符串的第 $j$ 个字符表示目标图案中第 $i$ 行第 $j$ 列单元格的颜色。\n\n保证给定的目标图案可以通过最多 $n+m$ 次染色操作得到。", "outputFormat": "输出第一行包含一个整数 $r\\ (1\\le r\\le n+m)$，表示要进行的操作次数。接下来 $r$ 行描述操作。\n\n为了描述一次操作，首先应输出 `R` 或者 `K`，表示你希望对某行还是某列重新涂色（`R` 表示对某行重新涂色，`K` 表示对某列重新涂色）。接下来空一格，输出你希望重新涂色的行或列的编号，行按从上到下的顺序从 $1$ 到 $n$ 编号，列按从左到右的顺序从 $1$ 到 $m$ 编号。然后再空一格，输出一个大写英文字母，表示你希望对这行或这列重新涂成的颜色。\n\n注意你不需要最小化操作次数——只需要最多操作 $n+m$ 次即可。", "hint": "假设 `P` 代表绿色，`A` 代表黄色，`Z` 代表蓝色。样例 1 中的操作序列如下图所示：\n\n![lam2.png](https://img.loj.ac.cn/2024/03/24/7f9371fee9091.png)", "locale": "zh-CN"}}}
{"pid": "P10362", "type": "P", "difficulty": 7, "samples": [["3 6 1\n-1 0 4 0 -3 0\n-4 1 5 2 -5 2\n-5 2 3 0 -2 2\n", "3\n0 0 0\n0 1 0\n0 0 0\n"], ["5 7 0\n0 0 0 8 0 0 0\n0 7 6 5 9 7 0\n0 0 0 5 9 6 0\n9 4 0 4 4 7 0\n0 0 0 9 8 6 0\n", "3"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Autostrada 2", "background": "PA 2024 5A1\n（缺 SPJ）", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Autostrada 2](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/aut/)**\n\n经过多年毫无意义的战争之后，Byteotia 和 Bitotia 终于签署了和平条约。作为最终协议的标志，两国首府之间修建了一条高速公路。而你则被任命为这条高速公路从 Byteotia 到 Bitotia 方向的管理者（至于从 Bitotia 到 Byteotia 方向，你并不感兴趣，它由~~不~~友好国家的管理者管理）。\n\n高速公路上目前有 $m$ 个收费站，编号为 $1$ 到 $m$。在一天的不同时段，通过某个收费站的费用会有所不同。一天分为 $n$ 个小时，编号为 $1$ 到 $n$。目前，在第 $i$ 个小时通过第 $j$ 个收费站的花费为 $c_{i,j}$ bytealerts。其中一些成本可能为 $0$（此时收费站免费），甚至为负（此时司机通过收费站会获得 $-c_{i,j}$ bytealerts）。\n\n整条高速公路很短，一小时就能走完。当然，你也不必如此匆忙，你可以在行驶过程中随意停车。不过，你不能在高速公路上过夜，必须在当天通过所有收费站。\n\n当然，司机希望以尽可能低的花费通过高速公路。对于 $1 \\le i \\le j \\le n$，我们用 $f(i,j)$ 表示司机在第 $i$ 小时通过第一个收费站，并在第 $j$ 小时通过最后一个收费站的情况下，通过整条高速公路的最小可能花费。所有 $f(i,j)$ 都是被两国政府的和平条约提前设置好的，作为高速公路管理者你不能更改他们。\n\n但是，只要保证保留第一个和最后一个收费站，$f(i, j)$ 的值保持不变，并且设置的所有费用都是 $1$ bytealert 的整数倍的情况下，你可以自由修改通过各个收费站的花费，甚至取消某些收费站。\n\n为了最小化高速公路维护的费用，你希望取消尽可能多的收费站。确定为了满足条约内容，最少需要保留多少收费站。\n\n收费计划重组项目将分为两个阶段。在第一阶段，即初步设计阶段，只需找到最佳的收费站数量即可。但在第二阶段，即项目实施阶段，你还需要提供一份完整的收费站价格表计划。", "inputFormat": "第一行三个整数 $n,m,q\\ (2\\le n,m\\le 30\\,000,n\\cdot m\\le 300\\,000,q\\in \\{0,1\\})$，分别表示一天中的小时数，收费站数和描述项目阶段的一位。$q=0$ 表示项目处于第一阶段（初步设计），$q=1$ 表示项目处于第二阶段（实施阶段）。\n\n接下来 $n$ 行描述目前的收费情况，第 $i$ 行包含 $m$ 个整数 $c_{i,1},c_{i,2},\\ldots,c_{i,m}\\ (-10^6\\le c_{i,j}\\le 10^6)$，意义如题目描述。", "outputFormat": "第一行输出一个整数 $k\\ (2\\le k\\le m)$，表示最少需要保留多少收费站，才能满足没有 $f(i,j)$ 改变。如果 $q=0$，输出仅包含这一行一个整数。\n\n如果 $q=1$，接下来 $n$ 行输出满足题目条件的最优价格计划。第 $i$ 行包含 $k$ 个整数 $d_{i,1},d_{i,2},\\ldots,d_{i,k}\\ (-10^{12}\\le d_{i,j}\\le 10^{12})$。$d_{i,j}$ 表示在第 $i$ 小时通过第 $j$ 个收费站的新花费。\n\n可以从题目限制知道，总可以确定一个绝对值不超过 $10^{12}$ 且花费均为整数的计划。", "hint": "第一个样例中，$f(i,j)$ 如下：\n$$f(1, 1) = (-1) + 0 + 4 + 0 + (-3) + 0 = 0$$\n$$f(1, 2) = (-1) + 0 + 4 + 0 + (-5) + 2 = 0$$\n$$f(1, 3) = (-1) + 0 + 4 + 0 + (-5) + 2 = 0$$\n$$f(2, 2) = (-4) + 1 + 5 + 2 + (-5) + 2 = 1$$\n$$f(2, 3) = (-4) + 1 + 3 + 0 + (-2) + 2 = 0$$\n$$f(3, 3) = (-5) + 2 + 3 + 0 + (-2) + 2 = 0$$\n\n两个收费站无法实现相同的花费。请注意，第一个和最后一个收费站是不能取消的，尽管根据输出的 $d_{i,j}$ 费用，这两个收费站是不收费的。\n\n在第二个样例中，由于收费计划重组草案仅处于初步阶段，因此输出不包含新价目表的计划。\n\n**数据范围与提示**\n\n- 有一半的子任务满足 $q=0$。\n- 另一半子任务满足 $q=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Autostrada 2", "background": "PA 2024 5A1\n（缺 SPJ）", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Autostrada 2](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/aut/)**\n\n经过多年毫无意义的战争之后，Byteotia 和 Bitotia 终于签署了和平条约。作为最终协议的标志，两国首府之间修建了一条高速公路。而你则被任命为这条高速公路从 Byteotia 到 Bitotia 方向的管理者（至于从 Bitotia 到 Byteotia 方向，你并不感兴趣，它由~~不~~友好国家的管理者管理）。\n\n高速公路上目前有 $m$ 个收费站，编号为 $1$ 到 $m$。在一天的不同时段，通过某个收费站的费用会有所不同。一天分为 $n$ 个小时，编号为 $1$ 到 $n$。目前，在第 $i$ 个小时通过第 $j$ 个收费站的花费为 $c_{i,j}$ bytealerts。其中一些成本可能为 $0$（此时收费站免费），甚至为负（此时司机通过收费站会获得 $-c_{i,j}$ bytealerts）。\n\n整条高速公路很短，一小时就能走完。当然，你也不必如此匆忙，你可以在行驶过程中随意停车。不过，你不能在高速公路上过夜，必须在当天通过所有收费站。\n\n当然，司机希望以尽可能低的花费通过高速公路。对于 $1 \\le i \\le j \\le n$，我们用 $f(i,j)$ 表示司机在第 $i$ 小时通过第一个收费站，并在第 $j$ 小时通过最后一个收费站的情况下，通过整条高速公路的最小可能花费。所有 $f(i,j)$ 都是被两国政府的和平条约提前设置好的，作为高速公路管理者你不能更改他们。\n\n但是，只要保证保留第一个和最后一个收费站，$f(i, j)$ 的值保持不变，并且设置的所有费用都是 $1$ bytealert 的整数倍的情况下，你可以自由修改通过各个收费站的花费，甚至取消某些收费站。\n\n为了最小化高速公路维护的费用，你希望取消尽可能多的收费站。确定为了满足条约内容，最少需要保留多少收费站。\n\n收费计划重组项目将分为两个阶段。在第一阶段，即初步设计阶段，只需找到最佳的收费站数量即可。但在第二阶段，即项目实施阶段，你还需要提供一份完整的收费站价格表计划。", "inputFormat": "第一行三个整数 $n,m,q\\ (2\\le n,m\\le 30\\,000,n\\cdot m\\le 300\\,000,q\\in \\{0,1\\})$，分别表示一天中的小时数，收费站数和描述项目阶段的一位。$q=0$ 表示项目处于第一阶段（初步设计），$q=1$ 表示项目处于第二阶段（实施阶段）。\n\n接下来 $n$ 行描述目前的收费情况，第 $i$ 行包含 $m$ 个整数 $c_{i,1},c_{i,2},\\ldots,c_{i,m}\\ (-10^6\\le c_{i,j}\\le 10^6)$，意义如题目描述。", "outputFormat": "第一行输出一个整数 $k\\ (2\\le k\\le m)$，表示最少需要保留多少收费站，才能满足没有 $f(i,j)$ 改变。如果 $q=0$，输出仅包含这一行一个整数。\n\n如果 $q=1$，接下来 $n$ 行输出满足题目条件的最优价格计划。第 $i$ 行包含 $k$ 个整数 $d_{i,1},d_{i,2},\\ldots,d_{i,k}\\ (-10^{12}\\le d_{i,j}\\le 10^{12})$。$d_{i,j}$ 表示在第 $i$ 小时通过第 $j$ 个收费站的新花费。\n\n可以从题目限制知道，总可以确定一个绝对值不超过 $10^{12}$ 且花费均为整数的计划。", "hint": "第一个样例中，$f(i,j)$ 如下：\n$$f(1, 1) = (-1) + 0 + 4 + 0 + (-3) + 0 = 0$$\n$$f(1, 2) = (-1) + 0 + 4 + 0 + (-5) + 2 = 0$$\n$$f(1, 3) = (-1) + 0 + 4 + 0 + (-5) + 2 = 0$$\n$$f(2, 2) = (-4) + 1 + 5 + 2 + (-5) + 2 = 1$$\n$$f(2, 3) = (-4) + 1 + 3 + 0 + (-2) + 2 = 0$$\n$$f(3, 3) = (-5) + 2 + 3 + 0 + (-2) + 2 = 0$$\n\n两个收费站无法实现相同的花费。请注意，第一个和最后一个收费站是不能取消的，尽管根据输出的 $d_{i,j}$ 费用，这两个收费站是不收费的。\n\n在第二个样例中，由于收费计划重组草案仅处于初步阶段，因此输出不包含新价目表的计划。\n\n**数据范围与提示**\n\n- 有一半的子任务满足 $q=0$。\n- 另一半子任务满足 $q=1$。", "locale": "zh-CN"}}}
{"pid": "P10363", "type": "P", "difficulty": 7, "samples": [["3 3 1\nCCN\n", "0 1 3\n"], ["2 1 0\n", "1 0 2\n"], ["4 2 4\nCN\nNC\nCC\nNN\n", "1\n"]], "limits": {"time": [12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Monety", "background": "PA 2024 5A2", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Monety](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/mon/)**\n\nNatalia 和 Cezary 喜欢玩游戏，尤其是他们自己发明的游戏。他们决定在自己面前放置一些堆硬币，硬币从上到下排成类似栈的样子，每堆有 $m$ 枚硬币，每枚硬币要么是蓝色的，要么是红色的。轮到 Natalia 时，她可以选择一枚蓝色硬币，并将其连同其上方的所有硬币一起从硬币堆中移除。同样，在轮到 Cezary 时，他可以选择一枚红色硬币，并将其连同其上方的所有硬币一起从硬币堆中移除。 玩家将轮流操作，不能采取合法操作的玩家就输了——也就是说，当一位玩家操作的所有硬币都已被移除时。\n\n现在他们知道了规则，他们必须确定游戏的初始状态——$d$ 堆硬币，每堆恰好包含 $m$ 个硬币。Natalia 和 Cezary 都不希望拥有不公平的优势，因此他们一致认为硬币的顺序应该是公平的。假设 Natalia 和 Cezary 都采取最优策略，后手赢得游戏，则称初始状态是公平的。因此，如果 Natalia 先手，则采用最优策略的 Cezary 将获胜，反之亦然：如果 Cezary 先手，Natalia 将获胜。\n\n两人已经摆好了前 $k$ 堆 $m$ 个硬币。现在他们正在思考如何完成这一系列硬币堆。他们已经得出结论，游戏中拥有超过 $n$ 堆硬币是没有意义的。\n\n帮助他们，对于区间 $[k, n]$ 中的每个整数 $d$，告诉他们有多少种不同的由 $d$ 堆 $m$ 枚硬币组成的公平初始状态，这些初始状态从他们已经摆好的硬币堆开始。如果存在 $i\\in [1, d]$ 和 $j\\in [1, m]$，当第 $i$ 堆中的第 $j$ 个硬币在一种排列方式中为蓝色，在另一种为红色，则认为这两个初始排列方式是不同的。\n\n由于答案可能很大，输出答案对 $10^9+7$ 取模后的值即可。", "inputFormat": "第一行三个整数 $n,m$ 和 $k\\ (1\\le n\\le 32,1\\le m\\le 24,0\\le k\\le n)$，分别表示硬币堆的最大值，每堆中硬币个数和已经摆好的硬币堆数。\n\n接下来 $k$ 行描述已经摆好的硬币堆，第 $i$ 行包含一个仅由 `N` 和 `C` 组成且长度为 $m$ 的字符串，表示从底部起第 $i$ 堆硬币的摆放方式。如果第 $j$ 个字符为 `N`，则第 $i$ 堆硬币自底向上数第 $j$ 个硬币为蓝色，否则，这个字符为 `C`，表示硬币为红色。", "outputFormat": "输出一行 $n-k+1$ 个整数，第 $i$ 个整数表示再摆 $i-1$ 堆硬币，以满足最终摆放方式是公平的最终摆放方式数。输出对 $10^9+7$ 取模。", "hint": "对于第一组样例，如果我们不添加任何硬币堆，则最初局面不是公平的。然而，我们可以加一堆排列为 `NNC` 的硬币——这样两堆硬币的初始状态就是公平的了。我们可以以三种方式添加两堆硬币：`[CCN, NNN]`，`[NNN, CCN]` 和 `[NCN, NCN]`。\n\n**数据范围与提示**\n\n- 在某些子任务中，满足 $k=n$。\n- 在某些子任务中，满足 $n\\le 8,m\\le 8$​。\n- 在某些子任务中，满足 $n\\le 12,m\\le 13$。\n- 在某些子任务中，满足 $n\\le 16,m\\le 19$​。\n\n上述每个子任务至少描述了之前子任务中没有出现的一组。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Monety", "background": "PA 2024 5A2", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Monety](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/mon/)**\n\nNatalia 和 Cezary 喜欢玩游戏，尤其是他们自己发明的游戏。他们决定在自己面前放置一些堆硬币，硬币从上到下排成类似栈的样子，每堆有 $m$ 枚硬币，每枚硬币要么是蓝色的，要么是红色的。轮到 Natalia 时，她可以选择一枚蓝色硬币，并将其连同其上方的所有硬币一起从硬币堆中移除。同样，在轮到 Cezary 时，他可以选择一枚红色硬币，并将其连同其上方的所有硬币一起从硬币堆中移除。 玩家将轮流操作，不能采取合法操作的玩家就输了——也就是说，当一位玩家操作的所有硬币都已被移除时。\n\n现在他们知道了规则，他们必须确定游戏的初始状态——$d$ 堆硬币，每堆恰好包含 $m$ 个硬币。Natalia 和 Cezary 都不希望拥有不公平的优势，因此他们一致认为硬币的顺序应该是公平的。假设 Natalia 和 Cezary 都采取最优策略，后手赢得游戏，则称初始状态是公平的。因此，如果 Natalia 先手，则采用最优策略的 Cezary 将获胜，反之亦然：如果 Cezary 先手，Natalia 将获胜。\n\n两人已经摆好了前 $k$ 堆 $m$ 个硬币。现在他们正在思考如何完成这一系列硬币堆。他们已经得出结论，游戏中拥有超过 $n$ 堆硬币是没有意义的。\n\n帮助他们，对于区间 $[k, n]$ 中的每个整数 $d$，告诉他们有多少种不同的由 $d$ 堆 $m$ 枚硬币组成的公平初始状态，这些初始状态从他们已经摆好的硬币堆开始。如果存在 $i\\in [1, d]$ 和 $j\\in [1, m]$，当第 $i$ 堆中的第 $j$ 个硬币在一种排列方式中为蓝色，在另一种为红色，则认为这两个初始排列方式是不同的。\n\n由于答案可能很大，输出答案对 $10^9+7$ 取模后的值即可。", "inputFormat": "第一行三个整数 $n,m$ 和 $k\\ (1\\le n\\le 32,1\\le m\\le 24,0\\le k\\le n)$，分别表示硬币堆的最大值，每堆中硬币个数和已经摆好的硬币堆数。\n\n接下来 $k$ 行描述已经摆好的硬币堆，第 $i$ 行包含一个仅由 `N` 和 `C` 组成且长度为 $m$ 的字符串，表示从底部起第 $i$ 堆硬币的摆放方式。如果第 $j$ 个字符为 `N`，则第 $i$ 堆硬币自底向上数第 $j$ 个硬币为蓝色，否则，这个字符为 `C`，表示硬币为红色。", "outputFormat": "输出一行 $n-k+1$ 个整数，第 $i$ 个整数表示再摆 $i-1$ 堆硬币，以满足最终摆放方式是公平的最终摆放方式数。输出对 $10^9+7$ 取模。", "hint": "对于第一组样例，如果我们不添加任何硬币堆，则最初局面不是公平的。然而，我们可以加一堆排列为 `NNC` 的硬币——这样两堆硬币的初始状态就是公平的了。我们可以以三种方式添加两堆硬币：`[CCN, NNN]`，`[NNN, CCN]` 和 `[NCN, NCN]`。\n\n**数据范围与提示**\n\n- 在某些子任务中，满足 $k=n$。\n- 在某些子任务中，满足 $n\\le 8,m\\le 8$​。\n- 在某些子任务中，满足 $n\\le 12,m\\le 13$。\n- 在某些子任务中，满足 $n\\le 16,m\\le 19$​。\n\n上述每个子任务至少描述了之前子任务中没有出现的一组。", "locale": "zh-CN"}}}
{"pid": "P10364", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "交互题", "Special Judge", "PA（波兰）"], "title": "[PA 2024] Dzielniki", "background": "PA 2024 5B1", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Dzielniki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/dzi/)**\n\n我们从区间 $[1,n]$ 中选取了一个整数 $x$，你的任务是猜这些数。你不必盲目地猜，可以问一些问题。每个问题你可以询问区间 $[0,c]$ 中的某个整数 $y$，我们会告诉你 $x+y$ 的因子个数。\n\n为了让题目稍微困难一些，你需要在一次运行中解决 $t$ 个用例。询问总数被限制在 $q$ 次。", "inputFormat": "在程序的开头你**不应该**使用 `#include \"dzilib.h\"` 引入交互库。\n\n你需要实现如下函数来完成本题。\n\n- `void Solve()`：程序只会调用此函数一次，在这个函数中，你需要实现猜测 $t$ 个用例的所有程序逻辑。\n\n你可以调用如下函数。\n\n- `int GetT()`：返回 $t$ 的值。\n- `long long GetN()`：返回 $n$ 的值。\n- `int GetQ()`：返回 $q$ 的值。\n- `long long GetC()`：返回 $c$ 的值。\n- `int Ask(long long y)`：返回要猜的数 $x$ 与 $y$ 的和的因子个数。你需要保证 $0\\le y\\le c$。\n- `void Answer(long long x)`：做出一次回答。此函数无返回值。\n\n如果你调用 `Ask()` 函数的总次数超过 $q$，则你的程序会被判为 `Wrong Answer`。如果存在一次调用 `Answer()` 函数，你猜测的数与答案不同，你的程序也会被判为 `Wrong Answer`。", "outputFormat": null, "hint": "#### 数据范围\n\n| 子任务编号  |  $t$ | $n$  | $q$  | $c$  |\n|:-:|:-:|:-:|:-:|:-:|\n| $1$  | $50$  | $10^5$   | $50000$  | $10^{12}$  |\n| $2$  | $50$  | $10^6$   | $5000$  | $10^{12}$  |\n| $3$  | $10$  | $10^9$   | $50000$  | $10^{12}$  |\n| $4$  | $10$  | $10^{14}$  | $5000$ | $10^{17}$  |\n| $5$  | $10$  | $10^{14}$  | $2000$  | $10^{17}$ |\n| $6$  | $10$  | $10^{14}$  | $1300$  | $10^{17}$ |\n| $7$  | $10$  | $10^{14}$  | $950$  | $10^{17}$ |\n| $8$  | $10$  | $10^{14}$  | $820$  | $10^{17}$ |\n| $9$  | $10$  | $10^{14}$  | $750$  | $10^{17}$ |\n| $10$ | $10$  | $10^{14}$  | $720$  | $10^{17}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Dzielniki", "background": "PA 2024 5B1", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Dzielniki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/dzi/)**\n\n我们从区间 $[1,n]$ 中选取了一个整数 $x$，你的任务是猜这些数。你不必盲目地猜，可以问一些问题。每个问题你可以询问区间 $[0,c]$ 中的某个整数 $y$，我们会告诉你 $x+y$ 的因子个数。\n\n为了让题目稍微困难一些，你需要在一次运行中解决 $t$ 个用例。询问总数被限制在 $q$ 次。", "inputFormat": "在程序的开头你**不应该**使用 `#include \"dzilib.h\"` 引入交互库。\n\n你需要实现如下函数来完成本题。\n\n- `void Solve()`：程序只会调用此函数一次，在这个函数中，你需要实现猜测 $t$ 个用例的所有程序逻辑。\n\n你可以调用如下函数。\n\n- `int GetT()`：返回 $t$ 的值。\n- `long long GetN()`：返回 $n$ 的值。\n- `int GetQ()`：返回 $q$ 的值。\n- `long long GetC()`：返回 $c$ 的值。\n- `int Ask(long long y)`：返回要猜的数 $x$ 与 $y$ 的和的因子个数。你需要保证 $0\\le y\\le c$。\n- `void Answer(long long x)`：做出一次回答。此函数无返回值。\n\n如果你调用 `Ask()` 函数的总次数超过 $q$，则你的程序会被判为 `Wrong Answer`。如果存在一次调用 `Answer()` 函数，你猜测的数与答案不同，你的程序也会被判为 `Wrong Answer`。", "outputFormat": null, "hint": "#### 数据范围\n\n| 子任务编号  |  $t$ | $n$  | $q$  | $c$  |\n|:-:|:-:|:-:|:-:|:-:|\n| $1$  | $50$  | $10^5$   | $50000$  | $10^{12}$  |\n| $2$  | $50$  | $10^6$   | $5000$  | $10^{12}$  |\n| $3$  | $10$  | $10^9$   | $50000$  | $10^{12}$  |\n| $4$  | $10$  | $10^{14}$  | $5000$ | $10^{17}$  |\n| $5$  | $10$  | $10^{14}$  | $2000$  | $10^{17}$ |\n| $6$  | $10$  | $10^{14}$  | $1300$  | $10^{17}$ |\n| $7$  | $10$  | $10^{14}$  | $950$  | $10^{17}$ |\n| $8$  | $10$  | $10^{14}$  | $820$  | $10^{17}$ |\n| $9$  | $10$  | $10^{14}$  | $750$  | $10^{17}$ |\n| $10$ | $10$  | $10^{14}$  | $720$  | $10^{17}$ |", "locale": "zh-CN"}}}
{"pid": "P10365", "type": "P", "difficulty": 6, "samples": [["3\n4 6\n1 3\n2 5\n", "2"], ["5\n2 9\n3 4\n1 8\n6 10\n5 7\n", "233333338\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Kraniki", "background": "PA 2024 5B2", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Kraniki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/kra/)**\n\n*Radek and Friends* 公司的负责人 Radek 试图淹没竞争对手 *Mati and Company* 公司的所有货架。为了进行完美的破坏，他让他的朋友，水管工 Janusz 在每个架子都上安装了小水龙头。\n\n为简单起见，*Mati and Company* 公司中的货架可以用平面上的线段来表示。每个货架都是一对点 $(l_i,h_i)$ 和 $(r_i,h_i)$ 之间的线段。水管工安装的水龙头是坐标为 $(\\frac{l_i+r_i}{2}, h_i + 0.5)$ 的点。这个房间的地面用 $OX$ 轴表示。\n\n只要打开第 $i$ 个货架上方的水龙头，该货架就会被水淹没。之后水会自然开始从货架的两端垂直向下滴落，并有可能淹没更多的货架，或自然滴落到地面上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uwllkpr7.png)\n\n在第二组样例中，当打开一个水龙头时，水流的可视化效果.\n\nRadek 会按某个确定的顺序看水龙头的情况。当他看到第 $i$ 个水龙头时，当且仅当第 $i$ 个货架没被水淹，他才会打开这个水龙头。\n\nRadek 还没确定他看水龙头的顺序。它会从 $n!$ 种顺序中均匀随机选择一种。Radek 想知道他平均会打开多少个水龙头。\n\n你的任务是回答 Radek 的问题，给出答案对 $10^9+7$ 取模后的值。形式化地，令答案为 $\\frac{p}{q}$，其中 $q\\neq 0$ 且 $\\gcd(p,q)=1$。你需要输出 $p\\cdot q^{-1}\\pmod{10^9+7}$，其中 $q^{-1}$ 是集合 $1,2,\\ldots,10^9+6$ 中唯一满足 $q\\cdot q^{-1}\\equiv 1\\pmod{10^9+7}$ 的整数。\n\n可以证明对于所有满足题目条件的数据，结果是有理数，且分母不会被 $10^9+7$ 整除。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 500\\,000)$，表示 Mati 公司的货架数。\n\n接下来 $n$ 行，第 $i$ 行有两个整数 $l_i,r_i\\ (1\\le l_i<r_i\\le 2\\cdot n)$，表示第 $i$ 个货架。为了简单，我们假设 $h_i=i$。\n\n你可以假设所有 $l_i,r_i$ 两两不同——整数 $l_i,r_i$ 形成了一个 $1$ 到 $2\\cdot n$ 的排列。", "outputFormat": "输出一行一个整数，表示 Radek 平均需要打开多少水龙头。答案对 $10^9+7$ 取模后输出。", "hint": "**样例解释 1**\n\n让我们考虑在第一个样例中 Radek 看水龙头的所有顺序：\n\n- 按 $1,2,3$ 的顺序，他会打开所有 $3$ 个水龙头。\n- 按 $1,3,2$ 的顺序，他会先打开水龙头 $1$ 和 $3$。当他准备打开水龙头 $2$ 时，水已经淹了第 $2$ 个货架，所以他不需要打开水龙头 $2$ 了。\n- 按 $2,1,3$ 的顺序，他会打开所有 $3$​ 个水龙头。\n- 按 $2,3,1$ 的顺序，他会先打开水龙头 $2$ 和 $3$。当他准备打开水龙头 $1$ 时，水已经淹了第 $1$ 个货架，所以他不需要打开水龙头 $1$ 了。\n- 按 $3,1,2$ 或 $3,2,1$ 的顺序，由于打开水龙头 $3$ 后，所有货架都会被淹，因此就不需要再打开剩下的两个水龙头了。\n\nRadek 平均需要打开 $\\frac{1}{6}\\cdot(3+2+3+2+1+1)=2$ 个水龙头。\n\n**样例解释 2**\n\n第二组样例中 Radek 平均要打开 $\\frac{91}{30}$ 个水龙头，由于 $30^{-1}\\equiv 233333335\\pmod{10^9+7}$，所以输出 $91\\cdot 233333335\\equiv 21233333485\\equiv 233333338\\pmod{10^9+7}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Kraniki", "background": "PA 2024 5B2", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Kraniki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/kra/)**\n\n*Radek and Friends* 公司的负责人 Radek 试图淹没竞争对手 *Mati and Company* 公司的所有货架。为了进行完美的破坏，他让他的朋友，水管工 Janusz 在每个架子都上安装了小水龙头。\n\n为简单起见，*Mati and Company* 公司中的货架可以用平面上的线段来表示。每个货架都是一对点 $(l_i,h_i)$ 和 $(r_i,h_i)$ 之间的线段。水管工安装的水龙头是坐标为 $(\\frac{l_i+r_i}{2}, h_i + 0.5)$ 的点。这个房间的地面用 $OX$ 轴表示。\n\n只要打开第 $i$ 个货架上方的水龙头，该货架就会被水淹没。之后水会自然开始从货架的两端垂直向下滴落，并有可能淹没更多的货架，或自然滴落到地面上。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uwllkpr7.png)\n\n在第二组样例中，当打开一个水龙头时，水流的可视化效果.\n\nRadek 会按某个确定的顺序看水龙头的情况。当他看到第 $i$ 个水龙头时，当且仅当第 $i$ 个货架没被水淹，他才会打开这个水龙头。\n\nRadek 还没确定他看水龙头的顺序。它会从 $n!$ 种顺序中均匀随机选择一种。Radek 想知道他平均会打开多少个水龙头。\n\n你的任务是回答 Radek 的问题，给出答案对 $10^9+7$ 取模后的值。形式化地，令答案为 $\\frac{p}{q}$，其中 $q\\neq 0$ 且 $\\gcd(p,q)=1$。你需要输出 $p\\cdot q^{-1}\\pmod{10^9+7}$，其中 $q^{-1}$ 是集合 $1,2,\\ldots,10^9+6$ 中唯一满足 $q\\cdot q^{-1}\\equiv 1\\pmod{10^9+7}$ 的整数。\n\n可以证明对于所有满足题目条件的数据，结果是有理数，且分母不会被 $10^9+7$ 整除。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 500\\,000)$，表示 Mati 公司的货架数。\n\n接下来 $n$ 行，第 $i$ 行有两个整数 $l_i,r_i\\ (1\\le l_i<r_i\\le 2\\cdot n)$，表示第 $i$ 个货架。为了简单，我们假设 $h_i=i$。\n\n你可以假设所有 $l_i,r_i$ 两两不同——整数 $l_i,r_i$ 形成了一个 $1$ 到 $2\\cdot n$ 的排列。", "outputFormat": "输出一行一个整数，表示 Radek 平均需要打开多少水龙头。答案对 $10^9+7$ 取模后输出。", "hint": "**样例解释 1**\n\n让我们考虑在第一个样例中 Radek 看水龙头的所有顺序：\n\n- 按 $1,2,3$ 的顺序，他会打开所有 $3$ 个水龙头。\n- 按 $1,3,2$ 的顺序，他会先打开水龙头 $1$ 和 $3$。当他准备打开水龙头 $2$ 时，水已经淹了第 $2$ 个货架，所以他不需要打开水龙头 $2$ 了。\n- 按 $2,1,3$ 的顺序，他会打开所有 $3$​ 个水龙头。\n- 按 $2,3,1$ 的顺序，他会先打开水龙头 $2$ 和 $3$。当他准备打开水龙头 $1$ 时，水已经淹了第 $1$ 个货架，所以他不需要打开水龙头 $1$ 了。\n- 按 $3,1,2$ 或 $3,2,1$ 的顺序，由于打开水龙头 $3$ 后，所有货架都会被淹，因此就不需要再打开剩下的两个水龙头了。\n\nRadek 平均需要打开 $\\frac{1}{6}\\cdot(3+2+3+2+1+1)=2$ 个水龙头。\n\n**样例解释 2**\n\n第二组样例中 Radek 平均要打开 $\\frac{91}{30}$ 个水龙头，由于 $30^{-1}\\equiv 233333335\\pmod{10^9+7}$，所以输出 $91\\cdot 233333335\\equiv 21233333485\\equiv 233333338\\pmod{10^9+7}$。", "locale": "zh-CN"}}}
{"pid": "P10366", "type": "P", "difficulty": 5, "samples": [["3\n7 -4 -2\n", "1\n"], ["10\n0 0 0 0 0 0 0 0 0 0\n", "26235"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2024", "PA（波兰）"], "title": "[PA 2024] Bardzo Ulubiony Ciąg", "background": "PA 2024 5C1", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Bardzo Ulubiony Ciąg](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/buc/)，感谢 Macaronlin 提供翻译**\n\n给定长度为 $n$ 的整数数组 $a$，$a$ 的所有子区间和形成长度为 $\\frac{n(n+1)}{2}$ 的数组 $b$，子区间和按区间开始下标的递增顺序排列，如果区间开始下标相同，则按区间结束递增顺序排列。\n\n对于新形成的数组 $b$，求满足 $b_i+b_j+b_k=0\\ (i<j<k)$ 的 $(i,j,k)$ 对数。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 500)$，表示数组 $a$ 的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n\\ (|a_i|\\le 20\\,000)$，表示数组 $a$。", "outputFormat": "一行一个整数，表示数组 $b$ 中满足 $b_i+b_j+b_k=0\\ (i<j<k)$ 的 $(i,j,k)$ 对数。", "hint": "**样例解释 1**\n\n数组 $b$ 为 $[7,3,1,-4,-6,-2]$，只有 $3,1,-4$ 这三个不同元素满足，所以答案为 $1$。\n\n**样例解释 2**\n\n数组 $b$ 为 $55$ 个 $0$，任选三个 $i<j<k$ 都满足和为 $0$，因此答案为 $26235$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Bardzo Ulubiony Ciąg", "background": "PA 2024 5C1", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Bardzo Ulubiony Ciąg](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/buc/)，感谢 Macaronlin 提供翻译**\n\n给定长度为 $n$ 的整数数组 $a$，$a$ 的所有子区间和形成长度为 $\\frac{n(n+1)}{2}$ 的数组 $b$，子区间和按区间开始下标的递增顺序排列，如果区间开始下标相同，则按区间结束递增顺序排列。\n\n对于新形成的数组 $b$，求满足 $b_i+b_j+b_k=0\\ (i<j<k)$ 的 $(i,j,k)$ 对数。", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 500)$，表示数组 $a$ 的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n\\ (|a_i|\\le 20\\,000)$，表示数组 $a$。", "outputFormat": "一行一个整数，表示数组 $b$ 中满足 $b_i+b_j+b_k=0\\ (i<j<k)$ 的 $(i,j,k)$ 对数。", "hint": "**样例解释 1**\n\n数组 $b$ 为 $[7,3,1,-4,-6,-2]$，只有 $3,1,-4$ 这三个不同元素满足，所以答案为 $1$。\n\n**样例解释 2**\n\n数组 $b$ 为 $55$ 个 $0$，任选三个 $i<j<k$ 都满足和为 $0$，因此答案为 $26235$。", "locale": "zh-CN"}}}
{"pid": "P10367", "type": "P", "difficulty": 6, "samples": [["5 4\n1 0 1 1 0\n1 3\n5 3\n4 2\n1 5\n", "4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "图论", "2024", "图论建模", "二分图", "组合数学", "PA（波兰）"], "title": "[PA 2024] Żarówki", "background": "PA 2024 5C2", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Żarówki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/zar/)，感谢 Macaronlin 提供翻译**\n\n有 $n$ 个灯泡，每个灯泡有两种状态：开和关，初始状态是给定的。有 $m$ 个开关，每个开关控制两个灯泡，按下开关可以使这两个灯泡变为与目前状态相反的状态，只有在两个灯泡有相同状态时才起作用，否则不起作用。\n\n你可以随意安排开关的使用顺序和使用次数，问利用这些开关可以实现多少种配置方案。灯泡在一种配置中打开而在另一种配置中关闭，则两种配置被视为不同。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (1\\le n\\le 200\\,000,0\\le m\\le 400\\,000)$，表示灯泡和开关的个数。\n\n第二行 $n$ 个整数 $c_i\\ (c_i\\in \\{0,1\\})$，如果 $c_i=1$，则初始时第 $i$ 个灯泡是打开的，如果 $c_i=0$，则初始时第 $i$ 个灯泡是关闭的。\n\n接下来 $m$ 行，每行两个整数 $a_i,b_i\\ (1\\le a_i,b_i\\le n,a_i\\neq b_i)$，描述一个开关。\n\n保证开关会影响不同的无序灯泡对。形式化地，$\\forall i,j \\in \\{1,2,\\ldots,m\\},i\\neq j$，都有 $(a_i,b_i)\\neq (a_j,b_j)$ 且 $(a_i,b_i)\\neq (b_j,a_j)$。", "outputFormat": "输出一行一个整数，表示利用这些开关可以实现多少种配置方案。输出对 $10^9+7$ 取模。", "hint": "所有可以实现的配置方案为：`10110`，`00010`，`00111` 和 `10011`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2024] Żarówki", "background": "PA 2024 5C2", "description": "**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 5 [Żarówki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/zar/)，感谢 Macaronlin 提供翻译**\n\n有 $n$ 个灯泡，每个灯泡有两种状态：开和关，初始状态是给定的。有 $m$ 个开关，每个开关控制两个灯泡，按下开关可以使这两个灯泡变为与目前状态相反的状态，只有在两个灯泡有相同状态时才起作用，否则不起作用。\n\n你可以随意安排开关的使用顺序和使用次数，问利用这些开关可以实现多少种配置方案。灯泡在一种配置中打开而在另一种配置中关闭，则两种配置被视为不同。", "inputFormat": "第一行两个整数 $n$ 和 $m\\ (1\\le n\\le 200\\,000,0\\le m\\le 400\\,000)$，表示灯泡和开关的个数。\n\n第二行 $n$ 个整数 $c_i\\ (c_i\\in \\{0,1\\})$，如果 $c_i=1$，则初始时第 $i$ 个灯泡是打开的，如果 $c_i=0$，则初始时第 $i$ 个灯泡是关闭的。\n\n接下来 $m$ 行，每行两个整数 $a_i,b_i\\ (1\\le a_i,b_i\\le n,a_i\\neq b_i)$，描述一个开关。\n\n保证开关会影响不同的无序灯泡对。形式化地，$\\forall i,j \\in \\{1,2,\\ldots,m\\},i\\neq j$，都有 $(a_i,b_i)\\neq (a_j,b_j)$ 且 $(a_i,b_i)\\neq (b_j,a_j)$。", "outputFormat": "输出一行一个整数，表示利用这些开关可以实现多少种配置方案。输出对 $10^9+7$ 取模。", "hint": "所有可以实现的配置方案为：`10110`，`00010`，`00111` 和 `10011`。", "locale": "zh-CN"}}}
{"pid": "P10368", "type": "P", "difficulty": 3, "samples": [["3 0\n3 1\naba\n5 2\nacaca\n3 0\nabc", "aa\naa\nabc"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "洛谷比赛"], "title": "「LAOI-4」Colors", "background": "做这个题：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6053fe2y.png)", "description": "给定长度为 $n$ 的字符串 $A$。  \n- 若 $A_{i-1}=A_{i+1}$，则称 $A_i$ 为 「可消除的」。\n\n定义一次操作为：消除 $A$ 中所有「可消除的」字符。\n\n请你输出操作 $k$ 次后的 $A$。", "inputFormat": "第一行两个正整数 $T,id$，表示数据组数和子任务编号。\n\n对于每组数据，第一行一个正整数 $n$ 和一个整数 $k$。\n\n接下来一行是一个长为 $n$ 的字符串。\n", "outputFormat": "对于每组数据，输出一行一个字符串表示答案。", "hint": "样例解释：\n\n- 对于第 $1$ 组数据，字符串为 $\\text{aba}$，一次操作后为 $\\text{aa}$。\n- 对于第 $2$ 组数据，字符串为 $\\text{acaca}$，一次操作后为 $\\text{aa}$，两次操作后为 $\\text{aa}$。\n- 对于第 $3$ 组数据，字符串为 $\\text{abc}$，零次操作后为 $\\text{abc}$。\n\n**「本题采用捆绑测试」**\n\n| $\\text{Subtask}$ | $\\sum n \\le$|  特殊性质 | 子任务依赖| 总分值 |\n| :--------------: | :-----: |:-----:|:--: | :--------: |\n|       $1$        |  $10^6$ |    $\\text{A}$    |无| $5$ |\n$2$        | $300$  | $k\\le 300$ |无| $10$ |\n$3$        | $10^3$  | 无| $2$| $15$ |\n|       $4$        | $10^6$  | $\\text{B}$ |无| $10$ |\n|       $5$        | $10^6$ | $\\text{C}$ |$4$| $20$ |\n|       $6$        | $10^7$ |     无     |$1\\sim5 $| $40$ |\n\n\n对于 $100\\%$ 的数据，$1  \\le \\sum n \\le 10^7$，$1 \\le  T \\le 10^5$，$0\\le k\\le 10^{18}$，字符串均由小写字母组成。\n\n特殊性质 $\\text{A}$：$A$ 是一个 $\\text{a}\\sim\\text{z}$ 的排列。\n\n特殊性质 $\\text{B}$：$\\forall i\\in[1,n-2], A_i= A_{i+2}$。\n\n特殊性质 $\\text{C}$：保证 $A_i$ 只可能有两种取值。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-4」Colors", "background": "做这个题：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6053fe2y.png)", "description": "给定长度为 $n$ 的字符串 $A$。  \n- 若 $A_{i-1}=A_{i+1}$，则称 $A_i$ 为 「可消除的」。\n\n定义一次操作为：消除 $A$ 中所有「可消除的」字符。\n\n请你输出操作 $k$ 次后的 $A$。", "inputFormat": "第一行两个正整数 $T,id$，表示数据组数和子任务编号。\n\n对于每组数据，第一行一个正整数 $n$ 和一个整数 $k$。\n\n接下来一行是一个长为 $n$ 的字符串。\n", "outputFormat": "对于每组数据，输出一行一个字符串表示答案。", "hint": "样例解释：\n\n- 对于第 $1$ 组数据，字符串为 $\\text{aba}$，一次操作后为 $\\text{aa}$。\n- 对于第 $2$ 组数据，字符串为 $\\text{acaca}$，一次操作后为 $\\text{aa}$，两次操作后为 $\\text{aa}$。\n- 对于第 $3$ 组数据，字符串为 $\\text{abc}$，零次操作后为 $\\text{abc}$。\n\n**「本题采用捆绑测试」**\n\n| $\\text{Subtask}$ | $\\sum n \\le$|  特殊性质 | 子任务依赖| 总分值 |\n| :--------------: | :-----: |:-----:|:--: | :--------: |\n|       $1$        |  $10^6$ |    $\\text{A}$    |无| $5$ |\n$2$        | $300$  | $k\\le 300$ |无| $10$ |\n$3$        | $10^3$  | 无| $2$| $15$ |\n|       $4$        | $10^6$  | $\\text{B}$ |无| $10$ |\n|       $5$        | $10^6$ | $\\text{C}$ |$4$| $20$ |\n|       $6$        | $10^7$ |     无     |$1\\sim5 $| $40$ |\n\n\n对于 $100\\%$ 的数据，$1  \\le \\sum n \\le 10^7$，$1 \\le  T \\le 10^5$，$0\\le k\\le 10^{18}$，字符串均由小写字母组成。\n\n特殊性质 $\\text{A}$：$A$ 是一个 $\\text{a}\\sim\\text{z}$ 的排列。\n\n特殊性质 $\\text{B}$：$\\forall i\\in[1,n-2], A_i= A_{i+2}$。\n\n特殊性质 $\\text{C}$：保证 $A_i$ 只可能有两种取值。\n", "locale": "zh-CN"}}}
{"pid": "P10369", "type": "P", "difficulty": 4, "samples": [["3\n2\n5\n7", "0 1\n3 1 5 0 1\n0 7 9 4 0 0 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "构造", "洛谷比赛"], "title": "「LAOI-4」Mex Tower (Easy ver.)", "background": "**本题与 Hard Version 的区别为本题需给出一个合法的方案。**", "description": "定义 $\\operatorname{mex}(x, y)$ 表示在集合 $\\{x, y\\}$ 中最小的未出现的 **自然数**。例如，$\\operatorname{mex}(1, 5) = 0$，$\\operatorname{mex}(3, 0) = 1$。\n\n继而，我们定义对自然数序列 $a_1\\dots a_n$ 的一次操作，是将序列 $a$ 替换为 **长度为 $\\bm{n - 1}$ 的** 序列 $b_1\\dots b_{n-1}$，其中 $b_i = \\operatorname{mex}(a_i, a_{i+1})$。\n\n你需要构造一个长度为 $n$ 的自然数序列 $a_1\\dots a_n$，满足 $0 \\leq a_i \\leq 10^9$；然后对它进行 $n - 1$ 次操作。显然最终序列 $a$ 只会剩下一个数，你需要最大化这个数的值。\n\n如果有多种可能的数列，可以输出任何一种合法方案。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据，仅一行，一个正整数 $n$。", "outputFormat": "对于每组数据，输出一行 $n$ 个整数，表示你构造的 $a_1\\dots a_n$。", "hint": "### 样例解释\n\n对于 $n = 2$，我们对 $[0, 1]$ 进行操作后显然会得到 $[2]$。可以证明，这是我们能得到的最大的答案。  \n其它合法的输出如 $[1, 0]$ 等也可以通过。\n\n对于 $n = 5$ 和 $n = 7$，暂时不能给你一个明确的答复。\n\n### 数据规模与约定\n\n**「本题采用捆绑测试」**\n\n| $\\text{Subtask}$ | $\\sum n \\le$|  特殊性质  | 总分值 |\n| :--------------: | :-----: |:-----: | :--------: |\n|       $1$        |  $10$ | 无| $5$ |\n$2$        | $10^5$  | $\\text{A}$ | $15$ |\n|       $3$        | $10^5$  | $\\text{B}$ | $15$ |\n|       $4$        | $50$ | $n\\le 25$ | $10$ |\n|       $5$        | $10^3$ | 无 | $20$ |\n|       $6$        | $10^6$ |     无     | $35$ |\n\n特殊性质 $\\text{A}$：保证 $n\\equiv 3\\pmod 4$。\n\n特殊性质 $\\text{B}$：保证 $n\\equiv 2\\pmod 4$。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^4$，$n > 1$，$\\sum n \\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-4」Mex Tower (Easy ver.)", "background": "**本题与 Hard Version 的区别为本题需给出一个合法的方案。**", "description": "定义 $\\operatorname{mex}(x, y)$ 表示在集合 $\\{x, y\\}$ 中最小的未出现的 **自然数**。例如，$\\operatorname{mex}(1, 5) = 0$，$\\operatorname{mex}(3, 0) = 1$。\n\n继而，我们定义对自然数序列 $a_1\\dots a_n$ 的一次操作，是将序列 $a$ 替换为 **长度为 $\\bm{n - 1}$ 的** 序列 $b_1\\dots b_{n-1}$，其中 $b_i = \\operatorname{mex}(a_i, a_{i+1})$。\n\n你需要构造一个长度为 $n$ 的自然数序列 $a_1\\dots a_n$，满足 $0 \\leq a_i \\leq 10^9$；然后对它进行 $n - 1$ 次操作。显然最终序列 $a$ 只会剩下一个数，你需要最大化这个数的值。\n\n如果有多种可能的数列，可以输出任何一种合法方案。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据，仅一行，一个正整数 $n$。", "outputFormat": "对于每组数据，输出一行 $n$ 个整数，表示你构造的 $a_1\\dots a_n$。", "hint": "### 样例解释\n\n对于 $n = 2$，我们对 $[0, 1]$ 进行操作后显然会得到 $[2]$。可以证明，这是我们能得到的最大的答案。  \n其它合法的输出如 $[1, 0]$ 等也可以通过。\n\n对于 $n = 5$ 和 $n = 7$，暂时不能给你一个明确的答复。\n\n### 数据规模与约定\n\n**「本题采用捆绑测试」**\n\n| $\\text{Subtask}$ | $\\sum n \\le$|  特殊性质  | 总分值 |\n| :--------------: | :-----: |:-----: | :--------: |\n|       $1$        |  $10$ | 无| $5$ |\n$2$        | $10^5$  | $\\text{A}$ | $15$ |\n|       $3$        | $10^5$  | $\\text{B}$ | $15$ |\n|       $4$        | $50$ | $n\\le 25$ | $10$ |\n|       $5$        | $10^3$ | 无 | $20$ |\n|       $6$        | $10^6$ |     无     | $35$ |\n\n特殊性质 $\\text{A}$：保证 $n\\equiv 3\\pmod 4$。\n\n特殊性质 $\\text{B}$：保证 $n\\equiv 2\\pmod 4$。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^4$，$n > 1$，$\\sum n \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10370", "type": "P", "difficulty": 5, "samples": [["2\n2\n0 1\n3\n1 0 2", "Yes\nNo"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["O2优化", "Ad-hoc", "洛谷比赛"], "title": "「LAOI-4」Mex Tower (Hard ver.)", "background": "**本题与 Easy Version 的区别为本题需判断方案的合法性。**\n\n**保证本题所有的测试点时空限制均为 std 的 $2.5$ 倍及以上**。\n", "description": "\n定义 $\\operatorname{mex}(x, y)$ 表示在集合 $\\{x, y\\}$ 中最小的未出现的 **自然数**。例如，$\\operatorname{mex}(1, 5) = 0$，$\\operatorname{mex}(3, 0) = 1$。\n\n继而，我们定义对自然数序列 $a_1\\dots a_n$ 的一次操作，是将序列 $a$ 替换为 **长度为 $\\bm{n - 1}$ 的** 序列 $a'_1\\dots a'_{n-1}$，其中 $a'_i = \\operatorname{mex}(a_i, a_{i+1})$。\n\n一个长度为 $n$ 的整数序列 $a_1\\dots a_n$，满足 $0 \\leq a_i \\leq 10^9$；然后依次对它进行 $n - 1$ 次操作。显然最终序列 $a$ 只会剩下一个数，定义这最终一个数的值成为 **该序列的价值**，记为 $f(a)$。\n\n请问对于给定的 $n$ 和 $a$ 序列，是否对于所有长度为 $n$ 的自然数序列 $b$，$f(a)\\ge f(b)$。\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据，第一行一个正整数 $n$。\n\n接下来 $n$ 个整数，表示序列 $a$。", "outputFormat": "对于每组数据，一行一个字符串 `Yes` 或 `No`。", "hint": "## 提示\n\n### 样例解释\n\n对于 $n = 2$，$f(a)=2$。可以证明，对于所有长度为 $2$ 的 $b$ 序列满足 $f(b)\\le 2$。\n\n对于 $n = 3$，$f(a)=0$，存在序列 $b=[114,514,1919]$，$f(b)=1>0$。\n\n### 数据规模与约定\n\n**「本题采用捆绑测试」**\n\n| $\\text{Subtask}$ | $\\sum n \\le$|  特殊性质  | 总分值 |\n| :--------------: | :-----: |:-----: | :--------: |\n|       $1$        |  $10^3$ | 无| $10$ |\n$2$        | $5\\cdot 10^5$  | $\\text{A}$ | $5$ |\n|       $3$        | $5\\cdot 10^5$  | $\\text{B}$ | $10$ |\n|       $4$        | $5\\cdot 10^5$ | $a_i< 2$ | $15$ |\n|       $5$        | $10^6$ | 无 | $20$ |\n|       $6$        | $3\\cdot 10^6$ |     无     | $40$ |\n\n特殊性质 $\\text{A}$：保证 $a_i=i$。\n\n特殊性质 $\\text{B}$：保证 $a_i=i\\bmod 3$。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^4$，$n > 1$，$\\sum n \\leq 3\\cdot 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-4」Mex Tower (Hard ver.)", "background": "**本题与 Easy Version 的区别为本题需判断方案的合法性。**\n\n**保证本题所有的测试点时空限制均为 std 的 $2.5$ 倍及以上**。\n", "description": "\n定义 $\\operatorname{mex}(x, y)$ 表示在集合 $\\{x, y\\}$ 中最小的未出现的 **自然数**。例如，$\\operatorname{mex}(1, 5) = 0$，$\\operatorname{mex}(3, 0) = 1$。\n\n继而，我们定义对自然数序列 $a_1\\dots a_n$ 的一次操作，是将序列 $a$ 替换为 **长度为 $\\bm{n - 1}$ 的** 序列 $a'_1\\dots a'_{n-1}$，其中 $a'_i = \\operatorname{mex}(a_i, a_{i+1})$。\n\n一个长度为 $n$ 的整数序列 $a_1\\dots a_n$，满足 $0 \\leq a_i \\leq 10^9$；然后依次对它进行 $n - 1$ 次操作。显然最终序列 $a$ 只会剩下一个数，定义这最终一个数的值成为 **该序列的价值**，记为 $f(a)$。\n\n请问对于给定的 $n$ 和 $a$ 序列，是否对于所有长度为 $n$ 的自然数序列 $b$，$f(a)\\ge f(b)$。\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据，第一行一个正整数 $n$。\n\n接下来 $n$ 个整数，表示序列 $a$。", "outputFormat": "对于每组数据，一行一个字符串 `Yes` 或 `No`。", "hint": "## 提示\n\n### 样例解释\n\n对于 $n = 2$，$f(a)=2$。可以证明，对于所有长度为 $2$ 的 $b$ 序列满足 $f(b)\\le 2$。\n\n对于 $n = 3$，$f(a)=0$，存在序列 $b=[114,514,1919]$，$f(b)=1>0$。\n\n### 数据规模与约定\n\n**「本题采用捆绑测试」**\n\n| $\\text{Subtask}$ | $\\sum n \\le$|  特殊性质  | 总分值 |\n| :--------------: | :-----: |:-----: | :--------: |\n|       $1$        |  $10^3$ | 无| $10$ |\n$2$        | $5\\cdot 10^5$  | $\\text{A}$ | $5$ |\n|       $3$        | $5\\cdot 10^5$  | $\\text{B}$ | $10$ |\n|       $4$        | $5\\cdot 10^5$ | $a_i< 2$ | $15$ |\n|       $5$        | $10^6$ | 无 | $20$ |\n|       $6$        | $3\\cdot 10^6$ |     无     | $40$ |\n\n特殊性质 $\\text{A}$：保证 $a_i=i$。\n\n特殊性质 $\\text{B}$：保证 $a_i=i\\bmod 3$。\n\n对于所有数据，保证 $1 \\leq T \\leq 10^4$，$n > 1$，$\\sum n \\leq 3\\cdot 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10371", "type": "P", "difficulty": 5, "samples": [["5 114514", "9"], ["10 113037", "23"], ["20 73555", "49"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "链表", "单调栈", "洛谷比赛"], "title": "「LAOI-4」石头", "background": "", "description": "有一个长度为 $n$ 的排列 $a$，初始可以任意染白一个数，然后接下来每一步可以染白最小的一个与已经被染白的数相邻的数，显然 $n$ 步之后所有数都会被染白。\n\n现在我们称满足以下要求的数对 $(i,j)$ 是好的数对：\n\n- $1\\leq i\\leq j\\leq n$。\n- 存在一个 $k$，满足若从 $a_i$ 开始染白，$a_j$ 会在第 $k$ 步被染白；若从 $a_j$ 开始染白，$a_i$ 也会在第 $k$ 步被染白。\n\n求好的数对的数量。", "inputFormat": "由于输入数据过大，现给出数据辅助生成器。\n\n```cpp\nint a[/*数组大小*/];\nnamespace GenHelper\n{\n    unsigned z1, z2, z3, z4, b;\n    unsigned rand_()\n    {\n        b = ((z1 << 6) ^ z1) >> 13;\n        z1 = ((z1 & 4294967294U) << 18) ^ b;\n        b = ((z2 << 2) ^ z2) >> 27;\n        z2 = ((z2 & 4294967288U) << 2) ^ b;\n        b = ((z3 << 13) ^ z3) >> 21;\n        z3 = ((z3 & 4294967280U) << 7) ^ b;\n        b = ((z4 << 3) ^ z4) >> 12;\n        z4 = ((z4 & 4294967168U) << 13) ^ b;\n        return (z1 ^ z2 ^ z3 ^ z4);\n    }\n}\nvoid srand_(unsigned x, int n)\n{\n    using namespace GenHelper;\n    z1 = x;\n    z2 = (~x) ^ 0x233333333U;\n    z3 = x ^ 0x1234598766U;\n    z4 = (~x) + 51;\n    for (int i = 1; i <= n; ++i)\n        a[i] = i;\n    if (!x)\n        return;\n    for (int i = 1; i <= n; ++i)\n    {\n        int j = rand_() % i + 1, k;\n        k = a[i], a[i] = a[j], a[j] = k;\n    }\n}\n```\n\n输入两个整数 $n$ 和 $s$，分别表示排列长度和随机数种子。\n\n你需要恰好调用一次 `srand_(s,n)`，在此之后 $a_i$ 已经储存在 `a[i]` 中，注意下标从 $1$ 开始，不要忘记规定数组大小。", "outputFormat": "共一行一个正整数，表示好的数对的数量。", "hint": "### 样例解释\n\n对于样例组 #1，$a=\\{4,3,1,5,2\\}$，好的数对分别是：$(1,1),(1,3),(1,5),(2,2),(2,3),(2,4),(3,3),(4,4),(5,5)$。\n\n### 数据范围\n\n**「本题采用捆绑测试」**\n\n|子任务编号|$n$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|\n|$1$|$\\le10^3$|无|$15$|\n|$2$|$\\le10^5$|无|$30$|\n|$3$|$\\le10^7$|$\\text{A}$|$5$|\n|$4$|$\\le10^7$|无|$50$|\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^7$，$0\\leq s\\leq 114514$，$a$ 为 $n$ 的排列。  \n\n特殊性质 $\\text{A}$：$a_i$ 单调递增，此时 $s=0$。  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「LAOI-4」石头", "background": "", "description": "有一个长度为 $n$ 的排列 $a$，初始可以任意染白一个数，然后接下来每一步可以染白最小的一个与已经被染白的数相邻的数，显然 $n$ 步之后所有数都会被染白。\n\n现在我们称满足以下要求的数对 $(i,j)$ 是好的数对：\n\n- $1\\leq i\\leq j\\leq n$。\n- 存在一个 $k$，满足若从 $a_i$ 开始染白，$a_j$ 会在第 $k$ 步被染白；若从 $a_j$ 开始染白，$a_i$ 也会在第 $k$ 步被染白。\n\n求好的数对的数量。", "inputFormat": "由于输入数据过大，现给出数据辅助生成器。\n\n```cpp\nint a[/*数组大小*/];\nnamespace GenHelper\n{\n    unsigned z1, z2, z3, z4, b;\n    unsigned rand_()\n    {\n        b = ((z1 << 6) ^ z1) >> 13;\n        z1 = ((z1 & 4294967294U) << 18) ^ b;\n        b = ((z2 << 2) ^ z2) >> 27;\n        z2 = ((z2 & 4294967288U) << 2) ^ b;\n        b = ((z3 << 13) ^ z3) >> 21;\n        z3 = ((z3 & 4294967280U) << 7) ^ b;\n        b = ((z4 << 3) ^ z4) >> 12;\n        z4 = ((z4 & 4294967168U) << 13) ^ b;\n        return (z1 ^ z2 ^ z3 ^ z4);\n    }\n}\nvoid srand_(unsigned x, int n)\n{\n    using namespace GenHelper;\n    z1 = x;\n    z2 = (~x) ^ 0x233333333U;\n    z3 = x ^ 0x1234598766U;\n    z4 = (~x) + 51;\n    for (int i = 1; i <= n; ++i)\n        a[i] = i;\n    if (!x)\n        return;\n    for (int i = 1; i <= n; ++i)\n    {\n        int j = rand_() % i + 1, k;\n        k = a[i], a[i] = a[j], a[j] = k;\n    }\n}\n```\n\n输入两个整数 $n$ 和 $s$，分别表示排列长度和随机数种子。\n\n你需要恰好调用一次 `srand_(s,n)`，在此之后 $a_i$ 已经储存在 `a[i]` 中，注意下标从 $1$ 开始，不要忘记规定数组大小。", "outputFormat": "共一行一个正整数，表示好的数对的数量。", "hint": "### 样例解释\n\n对于样例组 #1，$a=\\{4,3,1,5,2\\}$，好的数对分别是：$(1,1),(1,3),(1,5),(2,2),(2,3),(2,4),(3,3),(4,4),(5,5)$。\n\n### 数据范围\n\n**「本题采用捆绑测试」**\n\n|子任务编号|$n$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|\n|$1$|$\\le10^3$|无|$15$|\n|$2$|$\\le10^5$|无|$30$|\n|$3$|$\\le10^7$|$\\text{A}$|$5$|\n|$4$|$\\le10^7$|无|$50$|\n\n对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^7$，$0\\leq s\\leq 114514$，$a$ 为 $n$ 的排列。  \n\n特殊性质 $\\text{A}$：$a_i$ 单调递增，此时 $s=0$。  ", "locale": "zh-CN"}}}
{"pid": "P10372", "type": "P", "difficulty": 1, "samples": [["5\n1+1=2\n1+2=2\n15+66=81\n5+37=40\n99+99=99", "Right!\nWrong!\nRight!\nWrong!\nWrong!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2024", "安徽", "O2优化", "科创活动", "初中活动", "科大国创杯"], "title": "[AHOI2024 初中组 / 科大国创杯初中组 2024] 家庭作业", "background": "**本题的数据不是官方数据。**\n\n**本题征集（能够上传到这里的）官方数据。**\n\n**（没法上传到这里的）官方数据：<https://www.luogu.com.cn/training/499869>**\n\n**本题民间数据下载：<http://8.136.99.126/blog/3/67f0c2307aadac7b413b837b>**", "description": "小可可有 $T$ 道形如 $a + b = c$ 的计算题，你要检验她每道题目做的对不对。", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行一个形如 `a+b=c` 的算式。\n\n保证数据格式正确，数字没有前导零，且数字和运算符之间没有空格隔开。\n\n具体格式可参见样例。", "outputFormat": "$T$ 行，如果第 $i$ 个算式正确，则在第 $i$ 行输出 `Right!`，否则在第 $i$ 行输出 `Wrong!`。", "hint": "### 样例 1 解释\n\n搬题人注释：为了不侮辱各位同学的智商，样例不予解释。（出题人的 PDF 中没有样例解释！）\n\n### 数据范围\n\n对于 $40\\%$ 的数据，$a = b = 1$，$c = 2$。\n\n对于 $80\\%$ 的数据，$a,b,c \\le 9$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10$，$1 \\le a,b,c \\le 99$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2024 初中组 / 科大国创杯初中组 2024] 家庭作业", "background": "**本题的数据不是官方数据。**\n\n**本题征集（能够上传到这里的）官方数据。**\n\n**（没法上传到这里的）官方数据：<https://www.luogu.com.cn/training/499869>**\n\n**本题民间数据下载：<http://8.136.99.126/blog/3/67f0c2307aadac7b413b837b>**", "description": "小可可有 $T$ 道形如 $a + b = c$ 的计算题，你要检验她每道题目做的对不对。", "inputFormat": "第一行一个正整数 $T$。\n\n接下来 $T$ 行，每行一个形如 `a+b=c` 的算式。\n\n保证数据格式正确，数字没有前导零，且数字和运算符之间没有空格隔开。\n\n具体格式可参见样例。", "outputFormat": "$T$ 行，如果第 $i$ 个算式正确，则在第 $i$ 行输出 `Right!`，否则在第 $i$ 行输出 `Wrong!`。", "hint": "### 样例 1 解释\n\n搬题人注释：为了不侮辱各位同学的智商，样例不予解释。（出题人的 PDF 中没有样例解释！）\n\n### 数据范围\n\n对于 $40\\%$ 的数据，$a = b = 1$，$c = 2$。\n\n对于 $80\\%$ 的数据，$a,b,c \\le 9$。\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10$，$1 \\le a,b,c \\le 99$。", "locale": "zh-CN"}}}
{"pid": "P10373", "type": "P", "difficulty": 2, "samples": [["2\n5\n10", "5\n13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "递推", "2024", "安徽", "O2优化", "前缀和", "分块", "双指针 two-pointer", "科创活动", "初中活动", "科大国创杯"], "title": "[AHOI2024 初中组 / 科大国创杯初中组 2024] 立方根", "background": "**本题的数据不是官方数据。**\n\n**本题征集（能够上传到这里的）官方数据。**\n\n**（没法上传到这里的）官方数据：<https://www.luogu.com.cn/training/499869>**\n\n**本题民间数据下载：<http://8.136.99.126/blog/3/67f0c2307aadac7b413b837b>**\n\n**特别提示：**\n\n1. 请使用 `(int) cbrt(x + 0.5)` 计算 $\\lfloor \\sqrt[3]{x} \\rfloor$ 的值，否则可能会出现精度误差。\n2. 本题包含两组针对时间复杂度为 $O(q\\sqrt[3]{x})$ 的算法的 hack 数据（#11 和 #12）。", "description": "小可可想计算所有不大于 $x$ 的正整数的立方根下取整之和，但是她不会做，你能帮帮她吗？\n\n为了彻底帮小可可弄懂这个问题，你需要回答 $q$ 组询问，对于每组询问给定的一个正整数 $x_i$，输出：\n\n$$\\sum _{j=1} ^{x_i} \\lfloor j^{\\frac{1}{3}} \\rfloor$$\n\n其中，$\\lfloor x \\rfloor$ 表示不大于 $x$ 的最大整数。", "inputFormat": "第一行一个正整数 $q$。\n\n接下来 $q$ 行，第 $i$ 行一个正整数 $x_i$。\n\n**保证给出的 $\\bm{x_1 \\sim x_q}$ 单调不降。**", "outputFormat": "$q$ 行，每行一个正整数，表示该组询问的答案。\n\n**请注意答案的范围。**", "hint": "### 样例 1 解释\n\n$1 \\sim 10$ 的立方根下取整的结果是：$1,1,1,1,1,1,1,2,2,2$。\n\n### 数据范围\n\n对于 $20\\%$ 的数据，$x_q,q \\le 1000$。\n\n对于另外 $20\\%$ 的数据，$q=1$。\n\n对于另外 $20\\%$ 的数据，$q \\le 5000$。\n\n对于另外 $20\\%$ 的数据，$q \\le 10^5$，$x_q \\le 10^6$。 \n\n对于 $100\\%$ 的数据，$1 \\le q \\le 2 \\times 10^5$，$1 \\le x_1 \\le x_2 \\le \\ldots \\le x_q \\le 10^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2024 初中组 / 科大国创杯初中组 2024] 立方根", "background": "**本题的数据不是官方数据。**\n\n**本题征集（能够上传到这里的）官方数据。**\n\n**（没法上传到这里的）官方数据：<https://www.luogu.com.cn/training/499869>**\n\n**本题民间数据下载：<http://8.136.99.126/blog/3/67f0c2307aadac7b413b837b>**\n\n**特别提示：**\n\n1. 请使用 `(int) cbrt(x + 0.5)` 计算 $\\lfloor \\sqrt[3]{x} \\rfloor$ 的值，否则可能会出现精度误差。\n2. 本题包含两组针对时间复杂度为 $O(q\\sqrt[3]{x})$ 的算法的 hack 数据（#11 和 #12）。", "description": "小可可想计算所有不大于 $x$ 的正整数的立方根下取整之和，但是她不会做，你能帮帮她吗？\n\n为了彻底帮小可可弄懂这个问题，你需要回答 $q$ 组询问，对于每组询问给定的一个正整数 $x_i$，输出：\n\n$$\\sum _{j=1} ^{x_i} \\lfloor j^{\\frac{1}{3}} \\rfloor$$\n\n其中，$\\lfloor x \\rfloor$ 表示不大于 $x$ 的最大整数。", "inputFormat": "第一行一个正整数 $q$。\n\n接下来 $q$ 行，第 $i$ 行一个正整数 $x_i$。\n\n**保证给出的 $\\bm{x_1 \\sim x_q}$ 单调不降。**", "outputFormat": "$q$ 行，每行一个正整数，表示该组询问的答案。\n\n**请注意答案的范围。**", "hint": "### 样例 1 解释\n\n$1 \\sim 10$ 的立方根下取整的结果是：$1,1,1,1,1,1,1,2,2,2$。\n\n### 数据范围\n\n对于 $20\\%$ 的数据，$x_q,q \\le 1000$。\n\n对于另外 $20\\%$ 的数据，$q=1$。\n\n对于另外 $20\\%$ 的数据，$q \\le 5000$。\n\n对于另外 $20\\%$ 的数据，$q \\le 10^5$，$x_q \\le 10^6$。 \n\n对于 $100\\%$ 的数据，$1 \\le q \\le 2 \\times 10^5$，$1 \\le x_1 \\le x_2 \\le \\ldots \\le x_q \\le 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P10374", "type": "P", "difficulty": 3, "samples": [["2 3 3\n1 2 3\n1 1 2\n2 1 1\n2 1 2", "8 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "线段树", "树状数组", "2024", "安徽", "O2优化", "差分", "科创活动", "初中活动", "科大国创杯"], "title": "[AHOI2024 初中组 / 科大国创杯初中组 2024] 操作", "background": "**本题的数据不是官方数据。**\n\n**本题征集（能够上传到这里的）官方数据。**\n\n**（没法上传到这里的）官方数据：<https://www.luogu.com.cn/training/499869>**\n\n**本题民间数据下载：<http://8.136.99.126/blog/3/67f0c2307aadac7b413b837b>**", "description": "小可可有一个数组 $\\{a_n\\}$（初始值为 $\\{a_n\\}=\\{0,0,\\ldots,0\\}$）和从左到右的 $m$ 个机器，其中第 $i$ 个机器有类别 $o_i \\in \\{1,2\\}$ 和参数 $x_i,y_i$。第 $i$ 个机器执行的操作如下：\n\n- 若 $o_i=1$，则将 $a_{(x_i)}$ 加上 $y_i$，此时保证 $1 \\le x_i \\le n$，$1 \\le y_i \\le 10^4$。\n- 若 $o_i=2$，则执行第 $x_i \\sim y_i$ 个机器的操作各一次，此时保证 $1 \\le x_i \\le y_i \\le i-1$。\n- 特别地，保证 $o_1=1$。\n\n现在，小可可依次执行了第 $c_1,c_2,\\ldots,c_k$ 个机器的操作各一次，她想知道最后得到的数组 $\\{a_n\\}$ 是什么。\n\n由于数组中元素的值可能很大，你只需要帮她求出每个元素除以 $10007$ 的余数即可。", "inputFormat": "第一行三个正整数 $n,m,k$。\n\n接下来一行 $k$ 个正整数 $\\{c_k\\}$。\n\n接下来 $m$ 行，第 $i$ 行三个正整数 $o_i,x_i,y_i$。", "outputFormat": "一行 $n$ 个非负整数，表示数组 $\\{a_n\\}$ 中每个元素的值除以 $10007$ 的余数。", "hint": "### 样例 1 解释\n\n先执行第 $1$ 个机器的操作，给 $a_1$ 加上了 $2$。\n\n然后执行第 $2$ 个机器的操作，它操作了第 $1$ 个机器，给 $a_1$ 加上了 $2$。\n\n然后执行第 $3$ 个机器的操作。它先操作了第 $1$ 个机器，给 $a_1$ 加上了 $2$；然后操作了第 $2$ 个机器，第 $2$ 个机器又操作了第 $1$ 个机器，给 $a_1$ 加上了 $2$。\n\n综上所述，最后得到的数组为 $\\{8,0\\}$。\n\n### 数据范围\n\n\n对于 $10\\%$ 的数据，$n,m,k \\le 10$。\n\n对于 $30\\%$ 的数据，$n,m,k \\le 1000$。\n\n对于另外 $20\\%$ 的数据，$n=1$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于 $100\\%$ 的数据，$1 \\le n,m,k \\le 2 \\times 10^5$，$1 \\le c_i \\le m$，$o_i \\in \\{1,2\\}$，$o_1=1$。此外，对于第 $i$ 个机器，保证：\n\n- 若 $o_i=1$，则 $1 \\le x_i \\le n$，$1 \\le y_i \\le 10^4$。\n- 若 $o_i=2$，则 $1 \\le x_i \\le y_i \\le i-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2024 初中组 / 科大国创杯初中组 2024] 操作", "background": "**本题的数据不是官方数据。**\n\n**本题征集（能够上传到这里的）官方数据。**\n\n**（没法上传到这里的）官方数据：<https://www.luogu.com.cn/training/499869>**\n\n**本题民间数据下载：<http://8.136.99.126/blog/3/67f0c2307aadac7b413b837b>**", "description": "小可可有一个数组 $\\{a_n\\}$（初始值为 $\\{a_n\\}=\\{0,0,\\ldots,0\\}$）和从左到右的 $m$ 个机器，其中第 $i$ 个机器有类别 $o_i \\in \\{1,2\\}$ 和参数 $x_i,y_i$。第 $i$ 个机器执行的操作如下：\n\n- 若 $o_i=1$，则将 $a_{(x_i)}$ 加上 $y_i$，此时保证 $1 \\le x_i \\le n$，$1 \\le y_i \\le 10^4$。\n- 若 $o_i=2$，则执行第 $x_i \\sim y_i$ 个机器的操作各一次，此时保证 $1 \\le x_i \\le y_i \\le i-1$。\n- 特别地，保证 $o_1=1$。\n\n现在，小可可依次执行了第 $c_1,c_2,\\ldots,c_k$ 个机器的操作各一次，她想知道最后得到的数组 $\\{a_n\\}$ 是什么。\n\n由于数组中元素的值可能很大，你只需要帮她求出每个元素除以 $10007$ 的余数即可。", "inputFormat": "第一行三个正整数 $n,m,k$。\n\n接下来一行 $k$ 个正整数 $\\{c_k\\}$。\n\n接下来 $m$ 行，第 $i$ 行三个正整数 $o_i,x_i,y_i$。", "outputFormat": "一行 $n$ 个非负整数，表示数组 $\\{a_n\\}$ 中每个元素的值除以 $10007$ 的余数。", "hint": "### 样例 1 解释\n\n先执行第 $1$ 个机器的操作，给 $a_1$ 加上了 $2$。\n\n然后执行第 $2$ 个机器的操作，它操作了第 $1$ 个机器，给 $a_1$ 加上了 $2$。\n\n然后执行第 $3$ 个机器的操作。它先操作了第 $1$ 个机器，给 $a_1$ 加上了 $2$；然后操作了第 $2$ 个机器，第 $2$ 个机器又操作了第 $1$ 个机器，给 $a_1$ 加上了 $2$。\n\n综上所述，最后得到的数组为 $\\{8,0\\}$。\n\n### 数据范围\n\n\n对于 $10\\%$ 的数据，$n,m,k \\le 10$。\n\n对于 $30\\%$ 的数据，$n,m,k \\le 1000$。\n\n对于另外 $20\\%$ 的数据，$n=1$。\n\n对于另外 $20\\%$ 的数据，$k=1$。\n\n对于 $100\\%$ 的数据，$1 \\le n,m,k \\le 2 \\times 10^5$，$1 \\le c_i \\le m$，$o_i \\in \\{1,2\\}$，$o_1=1$。此外，对于第 $i$ 个机器，保证：\n\n- 若 $o_i=1$，则 $1 \\le x_i \\le n$，$1 \\le y_i \\le 10^4$。\n- 若 $o_i=2$，则 $1 \\le x_i \\le y_i \\le i-1$。", "locale": "zh-CN"}}}
{"pid": "P10375", "type": "P", "difficulty": 6, "samples": [["3 2", "4"], ["6 3", "405"], ["30 2", "73741759"], ["100 100", "566607183"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "安徽", "O2优化", "DP 套 DP", "科创活动", "初中活动", "科大国创杯"], "title": "[AHOI2024 初中组 / 科大国创杯初中组 2024] 计数", "background": "**本题的数据不是官方数据。**\n\n**本题征集（能够上传到这里的）官方数据。**\n\n**（没法上传到这里的）官方数据：<https://www.luogu.com.cn/training/499869>**\n\n**本题民间数据下载：<http://8.136.99.126/blog/3/67f0c2307aadac7b413b837b>**", "description": "小可可做了一个梦，梦里从左到右有 $n$ 个糖果，每种糖果有一个颜色，用 $[1, m]$ 之间的一个正整数表示。\n\n小可可每次会选择两个颜色相同的糖果，把它们以及它们之间的所有糖果吃掉。\n\n小可可记得，对于梦里的糖果序列，存在一种方法把所有糖果吃完。\n\n小可可醒来后忘记了梦中的糖果序列是什么，你能帮她求求在所有 $m^n$ 个可能的糖果序列中，有多少个糖果序列可能在小可可梦中（即存在一种全部吃完的方式）吗？\n\n由于结果可能很大，你只要求出它除以 $10^9+7$ 得到的余数即可。 ", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行一个非负整数，表示答案除以 $10^9+7$ 得到的余数。", "hint": "### 样例 1 解释\n\n一共有 $4$ 个合法的糖果序列：$[1,1,1],[1,2,1],[2,1,2],[2,2,2]$。\n\n### 数据范围\n\n对于 $10\\%$ 的数据，$n \\le 6$，$m \\le 4$。\n\n对于 $20\\%$ 的数据，$n \\le 6$，$m \\le 100$。\n\n对于另外 $30\\%$ 的数据，$n \\le 50$，$m \\le 2$。\n\n对于 $70\\%$ 的数据，$n,m \\le 100$。\n\n对于 $80\\%$ 的数据，$n,m \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 3000$，$1 \\le m \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2024 初中组 / 科大国创杯初中组 2024] 计数", "background": "**本题的数据不是官方数据。**\n\n**本题征集（能够上传到这里的）官方数据。**\n\n**（没法上传到这里的）官方数据：<https://www.luogu.com.cn/training/499869>**\n\n**本题民间数据下载：<http://8.136.99.126/blog/3/67f0c2307aadac7b413b837b>**", "description": "小可可做了一个梦，梦里从左到右有 $n$ 个糖果，每种糖果有一个颜色，用 $[1, m]$ 之间的一个正整数表示。\n\n小可可每次会选择两个颜色相同的糖果，把它们以及它们之间的所有糖果吃掉。\n\n小可可记得，对于梦里的糖果序列，存在一种方法把所有糖果吃完。\n\n小可可醒来后忘记了梦中的糖果序列是什么，你能帮她求求在所有 $m^n$ 个可能的糖果序列中，有多少个糖果序列可能在小可可梦中（即存在一种全部吃完的方式）吗？\n\n由于结果可能很大，你只要求出它除以 $10^9+7$ 得到的余数即可。 ", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一行一个非负整数，表示答案除以 $10^9+7$ 得到的余数。", "hint": "### 样例 1 解释\n\n一共有 $4$ 个合法的糖果序列：$[1,1,1],[1,2,1],[2,1,2],[2,2,2]$。\n\n### 数据范围\n\n对于 $10\\%$ 的数据，$n \\le 6$，$m \\le 4$。\n\n对于 $20\\%$ 的数据，$n \\le 6$，$m \\le 100$。\n\n对于另外 $30\\%$ 的数据，$n \\le 50$，$m \\le 2$。\n\n对于 $70\\%$ 的数据，$n,m \\le 100$。\n\n对于 $80\\%$ 的数据，$n,m \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 3000$，$1 \\le m \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10376", "type": "P", "difficulty": 2, "samples": [["1 1 1 1", "1"], ["114 51 4 1", "176"], ["114514 191 9 810", "384178446"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "深度优先搜索 DFS", "记忆化搜索", "GESP"], "title": "[GESP202403 六级] 游戏", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1146>", "description": "你有四个正整数 $n,a,b,c$，并准备用它们玩一个简单的小游戏。\n\n在一轮游戏操作中，你可以选择将 $n$ 减去 $a$，或是将 $n$ 减去 $b$。游戏将会进行多轮操作，直到当 $n \\leq c$ 时游戏结束。\n\n你想知道游戏结束时有多少种不同的游戏操作序列。两种游戏操作序列不同，当且仅当游戏操作轮数不同，或是某一轮游戏操作中，一种操作序列选择将 $n$ 减去 $a$，而另一种操作序列选择将 $n$ 减去 $b$。如果 $a=b$，也认为将 $n$ 减去 $a$ 与将 $n$ 减去 $b$ 是不同的操作。\n\n由于答案可能很大，你只需要求出答案对 $10^9 + 7$ 取模的结果。", "inputFormat": "\n一行四个整数 $n,a,b,c$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n\n- 对 $20\\%$ 的数据，$a=b=c=1$，$n \\leq 30$。\n- 对 $40\\%$ 的数据，$c = 1$，$n \\leq 10^3$。\n- 对全部的测试数据，保证 $1 \\leq a,b,c \\leq n \\leq 2 \\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202403 六级] 游戏", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1146>", "description": "你有四个正整数 $n,a,b,c$，并准备用它们玩一个简单的小游戏。\n\n在一轮游戏操作中，你可以选择将 $n$ 减去 $a$，或是将 $n$ 减去 $b$。游戏将会进行多轮操作，直到当 $n \\leq c$ 时游戏结束。\n\n你想知道游戏结束时有多少种不同的游戏操作序列。两种游戏操作序列不同，当且仅当游戏操作轮数不同，或是某一轮游戏操作中，一种操作序列选择将 $n$ 减去 $a$，而另一种操作序列选择将 $n$ 减去 $b$。如果 $a=b$，也认为将 $n$ 减去 $a$ 与将 $n$ 减去 $b$ 是不同的操作。\n\n由于答案可能很大，你只需要求出答案对 $10^9 + 7$ 取模的结果。", "inputFormat": "\n一行四个整数 $n,a,b,c$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n\n- 对 $20\\%$ 的数据，$a=b=c=1$，$n \\leq 30$。\n- 对 $40\\%$ 的数据，$c = 1$，$n \\leq 10^3$。\n- 对全部的测试数据，保证 $1 \\leq a,b,c \\leq n \\leq 2 \\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10377", "type": "P", "difficulty": 2, "samples": [["2\n1 2\n1 2\n", "4"], ["3\n1 2 3\n3 2 1\n", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "搜索", "2024", "GESP"], "title": "[GESP202403 六级] 好斗的牛", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1146>", "description": "\n你有 $10^9$ 个牛棚，从左到右一字排开。你希望把 $n$ 头牛安置到牛棚里。麻烦的是，你的牛很好斗，如果他们附近有其他的牛，他们就会不安分地去挑事。其中，第 $i$ 头牛的攻击范围是 $(a_i, b_i)$，这意味着，如果他的左边 $a_i$ 个牛棚或者右边 $b_i$ 个牛棚有其他牛，它就会去挑事。\n\n你想留下一段连续的牛棚，并把其他牛棚都卖掉。请问您最少需要留下多少牛棚，才能保证至少存在一种方案能够把所有的 $n$ 头牛都安置进剩余的牛棚里，且没有牛会挑事？", "inputFormat": "\n第一行一个正整数 $n$。  \n第二行 $n$ 个正整数 $a_1, a_2, \\dots a_n$。  \n第三行 $n$ 个正整数 $b_1, b_2, \\dots b_n$。\n", "outputFormat": "\n输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n留下第 1、2、3、4 个牛棚，并在第 $1$、$4$ 两个牛棚分别放下两头牛。\n\n### 数据规模与约定\n- 对 $20\\%$ 的数据，保证 $n = 2$。\n- 另有 $20\\%$ 的数据，保证 $n = 3$。\n- 对 $80\\%$ 的数据，保证 $n \\leq 8$。\n- 对于所有的测试数据，保证 $1 \\leq n \\leq 9$，$1 \\leq a_i, b_i \\leq 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202403 六级] 好斗的牛", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1146>", "description": "\n你有 $10^9$ 个牛棚，从左到右一字排开。你希望把 $n$ 头牛安置到牛棚里。麻烦的是，你的牛很好斗，如果他们附近有其他的牛，他们就会不安分地去挑事。其中，第 $i$ 头牛的攻击范围是 $(a_i, b_i)$，这意味着，如果他的左边 $a_i$ 个牛棚或者右边 $b_i$ 个牛棚有其他牛，它就会去挑事。\n\n你想留下一段连续的牛棚，并把其他牛棚都卖掉。请问您最少需要留下多少牛棚，才能保证至少存在一种方案能够把所有的 $n$ 头牛都安置进剩余的牛棚里，且没有牛会挑事？", "inputFormat": "\n第一行一个正整数 $n$。  \n第二行 $n$ 个正整数 $a_1, a_2, \\dots a_n$。  \n第三行 $n$ 个正整数 $b_1, b_2, \\dots b_n$。\n", "outputFormat": "\n输出一行一个整数表示答案。", "hint": "### 样例 1 解释\n\n留下第 1、2、3、4 个牛棚，并在第 $1$、$4$ 两个牛棚分别放下两头牛。\n\n### 数据规模与约定\n- 对 $20\\%$ 的数据，保证 $n = 2$。\n- 另有 $20\\%$ 的数据，保证 $n = 3$。\n- 对 $80\\%$ 的数据，保证 $n \\leq 8$。\n- 对于所有的测试数据，保证 $1 \\leq n \\leq 9$，$1 \\leq a_i, b_i \\leq 10^3$。", "locale": "zh-CN"}}}
{"pid": "P10378", "type": "P", "difficulty": 3, "samples": [["4 3\n1 2\n2 3\n4 2\n", "1 3"], ["7 5\n1 2\n2 3\n4 2\n5 6\n6 7\n", "2 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "图论", "并查集", "2024", "图论建模", "二分图", "GESP"], "title": "[GESP202403 七级] 交流问题", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1147>", "description": "来自两所学校 $A$、$B$ 的 $n$ 名同学聚在一起相互交流。为了方便起见，我们把这些同学从 $1$ 至 $n$ 编号。他们共进行了 $m$ 次交流，第 $i$ 次交流中，编号为 $u_i, v_i$ 的同学相互探讨了他们感兴趣的话题，并结交成为了新的朋友。\n\n由于这次交流会的目的是促进两校友谊，因此只有不同学校的同学之间会交流。同校同学并不会互相交流。\n\n作为 $A$ 校顾问，你对 $B$ 校的规模非常感兴趣，你希望求出 $B$ 校至少有几名同学、至多有几名同学。", "inputFormat": "第一行两个正整数，表示同学的人数 $n$、交流的次数 $m$。  \n接下来 $m$ 行，每行两个整数 $u_i, v_i$，表示一次交流。  ", "outputFormat": "输出一行两个整数，用单个空格隔开，分别表示 $B$ 校至少有几名同学、至多有几名同学。", "hint": "### 数据规模与约定\n\n- 对 $30\\%$ 的数据，保证 $n \\leq 17$，$m \\leq 50$。\n- 对 $60\\%$ 的数据，保证 $n \\leq 500$，$m \\leq 2000$。\n- 对全部的测试数据，保证 $1 \\leq u_i, v_i \\leq n \\leq 10^5$，$1 \\leq m \\leq 2\\times 10^5$，输入是合法的，即交流一定是跨校开展的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202403 七级] 交流问题", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1147>", "description": "来自两所学校 $A$、$B$ 的 $n$ 名同学聚在一起相互交流。为了方便起见，我们把这些同学从 $1$ 至 $n$ 编号。他们共进行了 $m$ 次交流，第 $i$ 次交流中，编号为 $u_i, v_i$ 的同学相互探讨了他们感兴趣的话题，并结交成为了新的朋友。\n\n由于这次交流会的目的是促进两校友谊，因此只有不同学校的同学之间会交流。同校同学并不会互相交流。\n\n作为 $A$ 校顾问，你对 $B$ 校的规模非常感兴趣，你希望求出 $B$ 校至少有几名同学、至多有几名同学。", "inputFormat": "第一行两个正整数，表示同学的人数 $n$、交流的次数 $m$。  \n接下来 $m$ 行，每行两个整数 $u_i, v_i$，表示一次交流。  ", "outputFormat": "输出一行两个整数，用单个空格隔开，分别表示 $B$ 校至少有几名同学、至多有几名同学。", "hint": "### 数据规模与约定\n\n- 对 $30\\%$ 的数据，保证 $n \\leq 17$，$m \\leq 50$。\n- 对 $60\\%$ 的数据，保证 $n \\leq 500$，$m \\leq 2000$。\n- 对全部的测试数据，保证 $1 \\leq u_i, v_i \\leq n \\leq 10^5$，$1 \\leq m \\leq 2\\times 10^5$，输入是合法的，即交流一定是跨校开展的。", "locale": "zh-CN"}}}
{"pid": "P10379", "type": "P", "difficulty": 3, "samples": [["5 6\n1 2 3 4 4 5\n1 2 3 3 4 5\n1 2 2 3 4 5\n1 6 6 7 7 8\n6 6 7 7 8 8\n", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "搜索", "2024", "GESP"], "title": "[GESP202403 七级] 俄罗斯方块", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1147>", "description": "小杨同学用不同种类的俄罗斯方块填满了一个大小为 $n \\times m$ 的网格图。\n\n网格图由 $n \\times m$ 个带颜色方块构成。小杨同学现在将这个网格图交给了你，请你计算出网格图中俄罗斯方块的种类数。  \n如果两个同色方块是四连通（即上下左右四个相邻的位置）的，则称两个同色方块直接连通；若两个同色方块同时与另一个同色方块直接或间接连通，则称两个同色方块间接连通。一个俄罗斯方块由一个方块和所有与其直接或间接连接的同色方块组成。定义两个俄罗斯方块的种类相同当且仅当通过**平移**其中一个俄罗斯方块可以和另一个俄罗斯方块重合；如果两个俄罗斯方块颜色不同，仍然视为同一种俄罗斯方块。\n\n例如，在如下情况中，方块 $1$ 和方块 $2$ 是同一种俄罗斯方块，而方块 $1$ 和方块 $3$ **不是**同一种俄罗斯方块。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ttv3nmgs.png)", "inputFormat": "第一行包含两个正整数 $n$ 和 $m$，表示网格图的大小。  \n对于之后的 $n$ 行，第 $i$ 行包含 $m$ 个正整数 $a_{i1}, a_{i2}, \\dots a_{im}$，表示该行 $m$ 个方块的颜色。\n", "outputFormat": "\n输出一行一个整数表示答案。", "hint": "| 子任务 | 分数 | $n,m \\leq$ | 特殊约定 | \n| :-: | :-: | :-: | :-: |\n| $1$ | $30$ | $20$ | 所有俄罗斯方块大小不超过 $5 \\times 5$ |\n| $2$ | $30$ | $500$ | 所有俄罗斯方块大小均为 $1 \\times x$ 或 $x \\times 1$ 类型，其中 $x$ 是任意正整数|\n| $3$ | $40$ | $500$ | 无 |\n\n对全部的测试数据，保证 $1 \\leq n, m \\leq 500$，$1 \\leq a_{i,j} \\leq n \\times m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202403 七级] 俄罗斯方块", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1147>", "description": "小杨同学用不同种类的俄罗斯方块填满了一个大小为 $n \\times m$ 的网格图。\n\n网格图由 $n \\times m$ 个带颜色方块构成。小杨同学现在将这个网格图交给了你，请你计算出网格图中俄罗斯方块的种类数。  \n如果两个同色方块是四连通（即上下左右四个相邻的位置）的，则称两个同色方块直接连通；若两个同色方块同时与另一个同色方块直接或间接连通，则称两个同色方块间接连通。一个俄罗斯方块由一个方块和所有与其直接或间接连接的同色方块组成。定义两个俄罗斯方块的种类相同当且仅当通过**平移**其中一个俄罗斯方块可以和另一个俄罗斯方块重合；如果两个俄罗斯方块颜色不同，仍然视为同一种俄罗斯方块。\n\n例如，在如下情况中，方块 $1$ 和方块 $2$ 是同一种俄罗斯方块，而方块 $1$ 和方块 $3$ **不是**同一种俄罗斯方块。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ttv3nmgs.png)", "inputFormat": "第一行包含两个正整数 $n$ 和 $m$，表示网格图的大小。  \n对于之后的 $n$ 行，第 $i$ 行包含 $m$ 个正整数 $a_{i1}, a_{i2}, \\dots a_{im}$，表示该行 $m$ 个方块的颜色。\n", "outputFormat": "\n输出一行一个整数表示答案。", "hint": "| 子任务 | 分数 | $n,m \\leq$ | 特殊约定 | \n| :-: | :-: | :-: | :-: |\n| $1$ | $30$ | $20$ | 所有俄罗斯方块大小不超过 $5 \\times 5$ |\n| $2$ | $30$ | $500$ | 所有俄罗斯方块大小均为 $1 \\times x$ 或 $x \\times 1$ 类型，其中 $x$ 是任意正整数|\n| $3$ | $40$ | $500$ | 无 |\n\n对全部的测试数据，保证 $1 \\leq n, m \\leq 500$，$1 \\leq a_{i,j} \\leq n \\times m$。", "locale": "zh-CN"}}}
