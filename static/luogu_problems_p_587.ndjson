{"pid": "P12912", "type": "P", "difficulty": 6, "samples": [["6\n10 8 3 30 5 10", "3 13 21 26 36 66"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "线段树", "平衡树", "堆", "POI（波兰）", "2021"], "title": "[POI 2020/2021 R2] 收拾背包 / Pakowanie plecaka", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4829)。", "description": "**题目译自 [XXVIII Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi28-2/dashboard/) [Pakowanie plecaka](https://szkopul.edu.pl/problemset/problem/tFYVKjavLmyczkxMH7WFewXe/statement/)**\n\nBajtazar 准备骑自行车去 Bajtocji 旅游。他现在在考虑要带什么有用的东西在背包里。可惜的是，他没有多少时间，所以他把可能需要的装备按照重要性从高到低排列了一下。他的做法很简单：按顺序检查每个物品，只要不超过背包的承重（当然，要算上之前放进去的物品），就带上它。\n\n还有一个关键的问题：要带什么样的背包呢？Bajtazar 觉得只要带上至少 $k$ 个物品，他就能在旅途中应付得来。可是他还不确定 $k$ 到底是多少。那么，他的背包的承重至少应该是多少，才能保证他带上至少 $k$ 个物品呢？", "inputFormat": "输入的第一行包含一个整数 $n\\ (1 \\leq n \\leq 5\\cdot 10^5)$，表示 Bajtazar 考虑带上的物品的数量。输入的第二行包含 $n$ 个用空格分隔的整数 $w_{1}, w_{2}, \\ldots, w_{n}\\ (1 \\leq w_{i} \\leq 10^{9})$，表示物品的重量，按照 Bajtazar 检查的顺序排列。", "outputFormat": "输出一行 $n$ 个用空格分隔的整数，第 $k$ 个数表示能保证 Bajtazar 带上至少 $k$ 个物品时背包的最小承重。", "hint": "**样例 1 解释**\n\n输出的第二个数是 $13$。如果背包的承重是 $13$，那么 Bajtazar 会带上第一个物品（重量为 $10$），不会带上第二个物品（因为他只剩下 $3$ 的承重，而物品重量为 $8$），然后会带上重量为 $3$ 的物品。总共他会带上正好需要的两个物品。\n\n**附加样例**\n1. 该样例满足 $n=20$，奇数位置的物品重量为 $10^{8}$，偶数位置的物品重量为 $10^{9}$。\n2. 该样例满足 $n=200, w_{i}=(i \\bmod 47)+1$。\n3. 该样例满足 $n=5000$，物品的重量是从区间 $\\left[1,10^{9}\\right]$ 随机选取的。\n4. 该样例满足 $n=5\\cdot 10^5, w_{i}=\\left\\lfloor\\frac{(i \\bmod 200)}{100}\\right\\rfloor+1$。\n5. 该样例满足 $n=5\\cdot 10^5, w_{i}=\\left(F_{i} \\bmod 100\\right)+1$，其中 $F_{0}=0, F_{1}=1, F_{i+2}=F_{i}+F_{i+1}$。\n6. 该样例满足 $n=5\\cdot 10^5$，物品的重量是从区间 $[1,10^{9}]$ 随机选取的。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$ | $n \\leq 20$ | $8$ |\n| $2$ | $n \\leq 200$ | $10$ |\n| $3$ | $n \\leq 5000$ | $20$ |\n| $4$ | $w_{i} \\leq 2$ | $8$ |\n| $5$ | $w_{i} \\leq 100$ | $20$ |\n| $6$ | 无附加限制 | $34$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R2] 收拾背包 / Pakowanie plecaka", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4829)。", "description": "**题目译自 [XXVIII Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi28-2/dashboard/) [Pakowanie plecaka](https://szkopul.edu.pl/problemset/problem/tFYVKjavLmyczkxMH7WFewXe/statement/)**\n\nBajtazar 准备骑自行车去 Bajtocji 旅游。他现在在考虑要带什么有用的东西在背包里。可惜的是，他没有多少时间，所以他把可能需要的装备按照重要性从高到低排列了一下。他的做法很简单：按顺序检查每个物品，只要不超过背包的承重（当然，要算上之前放进去的物品），就带上它。\n\n还有一个关键的问题：要带什么样的背包呢？Bajtazar 觉得只要带上至少 $k$ 个物品，他就能在旅途中应付得来。可是他还不确定 $k$ 到底是多少。那么，他的背包的承重至少应该是多少，才能保证他带上至少 $k$ 个物品呢？", "inputFormat": "输入的第一行包含一个整数 $n\\ (1 \\leq n \\leq 5\\cdot 10^5)$，表示 Bajtazar 考虑带上的物品的数量。输入的第二行包含 $n$ 个用空格分隔的整数 $w_{1}, w_{2}, \\ldots, w_{n}\\ (1 \\leq w_{i} \\leq 10^{9})$，表示物品的重量，按照 Bajtazar 检查的顺序排列。", "outputFormat": "输出一行 $n$ 个用空格分隔的整数，第 $k$ 个数表示能保证 Bajtazar 带上至少 $k$ 个物品时背包的最小承重。", "hint": "**样例 1 解释**\n\n输出的第二个数是 $13$。如果背包的承重是 $13$，那么 Bajtazar 会带上第一个物品（重量为 $10$），不会带上第二个物品（因为他只剩下 $3$ 的承重，而物品重量为 $8$），然后会带上重量为 $3$ 的物品。总共他会带上正好需要的两个物品。\n\n**附加样例**\n1. 该样例满足 $n=20$，奇数位置的物品重量为 $10^{8}$，偶数位置的物品重量为 $10^{9}$。\n2. 该样例满足 $n=200, w_{i}=(i \\bmod 47)+1$。\n3. 该样例满足 $n=5000$，物品的重量是从区间 $\\left[1,10^{9}\\right]$ 随机选取的。\n4. 该样例满足 $n=5\\cdot 10^5, w_{i}=\\left\\lfloor\\frac{(i \\bmod 200)}{100}\\right\\rfloor+1$。\n5. 该样例满足 $n=5\\cdot 10^5, w_{i}=\\left(F_{i} \\bmod 100\\right)+1$，其中 $F_{0}=0, F_{1}=1, F_{i+2}=F_{i}+F_{i+1}$。\n6. 该样例满足 $n=5\\cdot 10^5$，物品的重量是从区间 $[1,10^{9}]$ 随机选取的。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$ | $n \\leq 20$ | $8$ |\n| $2$ | $n \\leq 200$ | $10$ |\n| $3$ | $n \\leq 5000$ | $20$ |\n| $4$ | $w_{i} \\leq 2$ | $8$ |\n| $5$ | $w_{i} \\leq 100$ | $20$ |\n| $6$ | 无附加限制 | $34$ |", "locale": "zh-CN"}}}
{"pid": "P12913", "type": "P", "difficulty": 6, "samples": [["6 7\n5 6\n1 4\n4 5\n5 3\n1 5\n3 2\n2 6", "TAK\n1 6 5 2 3 4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["POI（波兰）", "2021", "Special Judge"], "title": "[POI 2020/2021 R2] 小矮人摄影 / Zdjęcia krasnali", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4831)。", "description": "**题目译自 [XXVIII Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi28-2/dashboard/) [Zdjęcia krasnali](https://szkopul.edu.pl/problemset/problem/GfCNwxdYubiS1Nlnb_h7VkJW/statement/)**\n\n在新年派对上，有 $n$ 个小矮人在玩耍。为了让这次派对留下美好的回忆，小矮人们请来了一位摄影师，要为每个小矮人和他的朋友们拍一张合影。每个小矮人（除了 Gburk 和 Wesołek，他们俩无所谓，但原因各不相同）都希望在自己的照片中站在正中间。幸运的是，每个小矮人的朋友数量都是偶数。\n\n但事情没那么简单，因为摄影师对照片有自己的艺术追求。他带来了 $n$ 顶高度从 $1$ 到 $n$ 的尖顶帽子，每顶高度都不一样，并宣布每个小矮人都要戴上一顶。而且，在每张照片中，小矮人必须按照帽子高度从小到大的顺序站好。\n\n于是，小矮人们开始琢磨，哪顶帽子该给哪个小矮人，才能既满足他们的愿望，又符合摄影师的要求呢？", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$ $(2 \\leq n \\leq 500000, 0 \\leq m \\leq 500000)$，分别表示小矮人的数量和朋友对的数量。为了方便，我们给小矮人从 $1$ 到 $n$ 编号，其中 Gburk 是 $1$ 号，Wesołek 是 $2$ 号。\n\n接下来的 $m$ 行描述朋友对，每行包含两个整数 $a$ 和 $b$ $(1 \\leq a, b \\leq n, a \\neq b)$，表示编号为 $a$ 和 $b$ 的小矮人是彼此的朋友。每个小矮人的朋友数量都是偶数。", "outputFormat": "输出的第一行，你的程序需要输出一个词：`TAK` 或 `NIE`，表示是否能成功分配帽子。如果答案是 `TAK`，第二行需要输出 $n$ 个整数 $h_{1}, h_{2}, \\ldots, h_{n}$ $(1 \\leq h_{i} \\leq n)$，用单个空格分隔，其中 $h_{i}$ 表示分配给编号 $i$ 的小矮人的帽子高度。如果有多个正确答案，你的程序可以输出任意一种。", "hint": "**附加样例**\n\n1. 该样例满足 $n=5$，所有人互为朋友，答案为 `NIE`；\n2. 该样例满足 $n=1000$，每个小矮人有 $2$ 个朋友，答案为 `TAK`；\n3. 该样例满足 $n=500000$，每个小矮人有 $2$ 个朋友，答案为 `TAK`。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$ | $n \\leq 10$ | $15$ |\n| $2$ | $m \\leq 20$ | $20$ |\n| $3$ | $n, m \\leq 1000$ | $25$ |\n| $4$ | 无附加限制 | $40$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R2] 小矮人摄影 / Zdjęcia krasnali", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4831)。", "description": "**题目译自 [XXVIII Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi28-2/dashboard/) [Zdjęcia krasnali](https://szkopul.edu.pl/problemset/problem/GfCNwxdYubiS1Nlnb_h7VkJW/statement/)**\n\n在新年派对上，有 $n$ 个小矮人在玩耍。为了让这次派对留下美好的回忆，小矮人们请来了一位摄影师，要为每个小矮人和他的朋友们拍一张合影。每个小矮人（除了 Gburk 和 Wesołek，他们俩无所谓，但原因各不相同）都希望在自己的照片中站在正中间。幸运的是，每个小矮人的朋友数量都是偶数。\n\n但事情没那么简单，因为摄影师对照片有自己的艺术追求。他带来了 $n$ 顶高度从 $1$ 到 $n$ 的尖顶帽子，每顶高度都不一样，并宣布每个小矮人都要戴上一顶。而且，在每张照片中，小矮人必须按照帽子高度从小到大的顺序站好。\n\n于是，小矮人们开始琢磨，哪顶帽子该给哪个小矮人，才能既满足他们的愿望，又符合摄影师的要求呢？", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$ $(2 \\leq n \\leq 500000, 0 \\leq m \\leq 500000)$，分别表示小矮人的数量和朋友对的数量。为了方便，我们给小矮人从 $1$ 到 $n$ 编号，其中 Gburk 是 $1$ 号，Wesołek 是 $2$ 号。\n\n接下来的 $m$ 行描述朋友对，每行包含两个整数 $a$ 和 $b$ $(1 \\leq a, b \\leq n, a \\neq b)$，表示编号为 $a$ 和 $b$ 的小矮人是彼此的朋友。每个小矮人的朋友数量都是偶数。", "outputFormat": "输出的第一行，你的程序需要输出一个词：`TAK` 或 `NIE`，表示是否能成功分配帽子。如果答案是 `TAK`，第二行需要输出 $n$ 个整数 $h_{1}, h_{2}, \\ldots, h_{n}$ $(1 \\leq h_{i} \\leq n)$，用单个空格分隔，其中 $h_{i}$ 表示分配给编号 $i$ 的小矮人的帽子高度。如果有多个正确答案，你的程序可以输出任意一种。", "hint": "**附加样例**\n\n1. 该样例满足 $n=5$，所有人互为朋友，答案为 `NIE`；\n2. 该样例满足 $n=1000$，每个小矮人有 $2$ 个朋友，答案为 `TAK`；\n3. 该样例满足 $n=500000$，每个小矮人有 $2$ 个朋友，答案为 `TAK`。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$ | $n \\leq 10$ | $15$ |\n| $2$ | $m \\leq 20$ | $20$ |\n| $3$ | $n, m \\leq 1000$ | $25$ |\n| $4$ | 无附加限制 | $40$ |", "locale": "zh-CN"}}}
{"pid": "P12914", "type": "P", "difficulty": 4, "samples": [["5 10 5\n0 2 3 7 10\n1\n2\n5\n6\n8", "5/1\n17/2\n6/1\n31/4\n1/2"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["POI（波兰）", "2021"], "title": "[POI 2020/2021 R2] 沙滩游客 / Plażowicze", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4832)。", "description": "**题目译自 [XXVIII Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi28-2/dashboard/) [Plażowicze](https://szkopul.edu.pl/problemset/problem/mSKiDD4jrokeNO__pazg6BaF/statement/)**\n\n每年，字节海边的沙滩都会吸引来自整个字节王国的游客。现在，沙滩上有 $n$ 个常客在休息，他们都铺着毯子紧靠着海岸线（每个人都想离水越近越好）。因此，每块毯子的位置可以用距离沙滩起点的距离（单位：米）来描述。海岸线总长 $X$ 米，所以毯子的位置是 $0$ 到 $X$ 之间的整数。为了简化，我们假设毯子的尺寸小到可以忽略不计。沙滩的起点 $0$ 和终点 $X$ 处都有毯子。这些常客一整天都待在固定的位置晒太阳。\n\n字节王国的人喜欢在休息时享受宁静。每当一个新游客来到沙滩，他都会选择一个靠近海岸线的地方铺毯子，同时尽量远离其他人的毯子（也就是最大化与最近毯子的距离）。如果有多个这样的位置，他会挑离沙滩起点最近的那个（因为那里有附近最好的冰激凌摊）。新游客的毯子位置不一定是整数。\n\n现在，一辆载满游客的大巴刚到沙滩，其中包括 Bajtazar。他喜欢坐在大巴最后一排，所以总是最后一个下车。请你告诉他，根据大巴里总共有 $k$ 个游客，他应该把毯子铺在哪里。", "inputFormat": "输入的第一行包含三个整数 $n, X, z$ $(2 \\leq n \\leq 10^{6}, 1 \\leq X \\leq 10^{9}, 1 \\leq z \\leq 10^{5})$，分别表示常客数量、沙滩长度和询问次数。\n\n第二行包含 $n$ 个整数 $x_{1}, x_{2}, \\ldots, x_{n}$ $(0 = x_{1} < x_{2} < \\ldots < x_{n} = X)$，表示常客毯子的位置。\n\n接下来的 $z$ 行是询问，每行包含一个整数 $k_{i}$ $(1 \\leq k_{i} \\leq 10^{9})$，表示第 $i$ 次询问中大巴里的游客总数。", "outputFormat": "输出应包含正好 $z$ 行，依次回答输入中的每个询问。第 $i$ 行应输出一个不可约分数的形式 $p / q$ $(0 \\leq p / q \\leq X$，且 $p, q$ 为正整数)，表示如果大巴里有 $k_{i}$ 个游客，且他们在字节扎尔之前都铺好毯子，他应该铺毯子的位置。", "hint": "**样例 1 解释**\n\n如果大巴里有 $k=8$ 个游客，游客按下车顺序铺毯子的位置依次是 $5, 8\\frac{1}{2}, 1, 4, 6, 7\\frac{3}{4}, 9\\frac{1}{4}$ 和 $\\frac{1}{2}$（Bajtazar）。注意，第一个、第二个、第五个和第六个位置分别是其他询问的答案。\n\n**附加样例**\n\n1. 该样例满足 $X = 15, n = 3; z = 10, k_i = i$。\n2. 该样例满足 $X = 1, n = 2, z = 1, k_1 = 10^9$；\n3. 该样例满足 $X = 10^6 - 1, n = 10^6, z = 10^5, k_i = i$；\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$ | $z=1 ; k_{1} \\leq 10^{5}$ | $20$ |\n| $2$ | $n=2$ | $10$ |\n| $3$ | $n \\leq 10^{4} ; z \\leq 5$ | $20$ |\n| $4$ | $n \\leq 10^{4}$ | $30$ |\n| $5$ | $z \\leq 10^{3}$ | $10$ |\n| $6$ | 无附加限制 | $10$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R2] 沙滩游客 / Plażowicze", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4832)。", "description": "**题目译自 [XXVIII Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi28-2/dashboard/) [Plażowicze](https://szkopul.edu.pl/problemset/problem/mSKiDD4jrokeNO__pazg6BaF/statement/)**\n\n每年，字节海边的沙滩都会吸引来自整个字节王国的游客。现在，沙滩上有 $n$ 个常客在休息，他们都铺着毯子紧靠着海岸线（每个人都想离水越近越好）。因此，每块毯子的位置可以用距离沙滩起点的距离（单位：米）来描述。海岸线总长 $X$ 米，所以毯子的位置是 $0$ 到 $X$ 之间的整数。为了简化，我们假设毯子的尺寸小到可以忽略不计。沙滩的起点 $0$ 和终点 $X$ 处都有毯子。这些常客一整天都待在固定的位置晒太阳。\n\n字节王国的人喜欢在休息时享受宁静。每当一个新游客来到沙滩，他都会选择一个靠近海岸线的地方铺毯子，同时尽量远离其他人的毯子（也就是最大化与最近毯子的距离）。如果有多个这样的位置，他会挑离沙滩起点最近的那个（因为那里有附近最好的冰激凌摊）。新游客的毯子位置不一定是整数。\n\n现在，一辆载满游客的大巴刚到沙滩，其中包括 Bajtazar。他喜欢坐在大巴最后一排，所以总是最后一个下车。请你告诉他，根据大巴里总共有 $k$ 个游客，他应该把毯子铺在哪里。", "inputFormat": "输入的第一行包含三个整数 $n, X, z$ $(2 \\leq n \\leq 10^{6}, 1 \\leq X \\leq 10^{9}, 1 \\leq z \\leq 10^{5})$，分别表示常客数量、沙滩长度和询问次数。\n\n第二行包含 $n$ 个整数 $x_{1}, x_{2}, \\ldots, x_{n}$ $(0 = x_{1} < x_{2} < \\ldots < x_{n} = X)$，表示常客毯子的位置。\n\n接下来的 $z$ 行是询问，每行包含一个整数 $k_{i}$ $(1 \\leq k_{i} \\leq 10^{9})$，表示第 $i$ 次询问中大巴里的游客总数。", "outputFormat": "输出应包含正好 $z$ 行，依次回答输入中的每个询问。第 $i$ 行应输出一个不可约分数的形式 $p / q$ $(0 \\leq p / q \\leq X$，且 $p, q$ 为正整数)，表示如果大巴里有 $k_{i}$ 个游客，且他们在字节扎尔之前都铺好毯子，他应该铺毯子的位置。", "hint": "**样例 1 解释**\n\n如果大巴里有 $k=8$ 个游客，游客按下车顺序铺毯子的位置依次是 $5, 8\\frac{1}{2}, 1, 4, 6, 7\\frac{3}{4}, 9\\frac{1}{4}$ 和 $\\frac{1}{2}$（Bajtazar）。注意，第一个、第二个、第五个和第六个位置分别是其他询问的答案。\n\n**附加样例**\n\n1. 该样例满足 $X = 15, n = 3; z = 10, k_i = i$。\n2. 该样例满足 $X = 1, n = 2, z = 1, k_1 = 10^9$；\n3. 该样例满足 $X = 10^6 - 1, n = 10^6, z = 10^5, k_i = i$；\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$ | $z=1 ; k_{1} \\leq 10^{5}$ | $20$ |\n| $2$ | $n=2$ | $10$ |\n| $3$ | $n \\leq 10^{4} ; z \\leq 5$ | $20$ |\n| $4$ | $n \\leq 10^{4}$ | $30$ |\n| $5$ | $z \\leq 10^{3}$ | $10$ |\n| $6$ | 无附加限制 | $10$ |", "locale": "zh-CN"}}}
{"pid": "P12915", "type": "P", "difficulty": 5, "samples": [["13\n1 2 A\n1 3 A\n2 4 B\n3 5 B\n4 6 A\n4 7 A\n5 8 A\n5 9 A\n6 10 B\n7 11 B\n8 12 B\n13 9 B", "14\nAAB\nAABAB\nAB\nABAABAB\nABAB\nBA\nBAA\nBAAB\nBAABAB\nBABA\nBABAA\nBABAAB\nBABAABA\nBABAABAB"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["POI（波兰）", "2021", "哈希 hashing"], "title": "[POI 2020/2021 R2] 模板 / Szablon Bajtogrodu", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4833)。", "description": "**题目译自 [XXVIII Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi28-2/dashboard/) [Szablon Bajtogrodu](https://szkopul.edu.pl/problemset/problem/y-mTVYClxMJcgMhUnHaUqPPq/statement/)**\n\n在 Bajtogród 里有 $n$ 个路口，它们通过一个简洁的双向街道网络连接在一起。这个网络之所以简洁，是因为从任意一个路口到另一个路口，恰好只有一条路径。每条街道都有自己的名字，就像城市里常见的那样。\n\n当 Bajtek 在城里散步时，他会记下经过的每条街道名称的首字母。沿着若干连续街道（不回头）走过的路线，我们称之为一条**路径**。于是，走完某条路径后，Bajtek 会记下一个与这条路径对应的字符串。\n\n今天，Bajtek 走了一条路径 $T$，发现它有个既有趣又没啥实际用处的特性：如果在 Bajtogród 中找出所有与路径 $T$ 对应相同字符串的路径，这些路径加起来至少会经过每条街道一次。Bajtek 把这种路径对应的字符串称为 **Bajtogród 的模板**。\n\n过了一会儿，Bajtek 开始怀疑，自己认定的路径 $T$ 是否真的是 Bajtogród 的模板？或者，Bajtogród 根本就没有模板？他请你帮忙研究这个问题，找出 Bajtogród 所有的模板（如果存在的话）。", "inputFormat": "输入的第一行包含一个整数 $n$ $(2 \\leq n \\leq 2000)$，表示 Bajtogród 中路口的数量。我们假设路口编号从 $1$ 到 $n$。\n\n接下来的 $n-1$ 行描述街道：第 $i$ $(1\\leq i\\leq n-1)$ 行包含两个整数 $a_{i}$ 和 $b_{i}$ $(1 \\leq a_{i}, b_{i} \\leq n, a_{i} \\neq b_{i})$，表示第 $i$ 条街道连接的两个路口编号，以及一个大写英文字母，表示这条街道名称的首字母。", "outputFormat": "输出的第一行应包含一个整数，表示 Bajtogród 模板的数量。接下来的几行按字典序列出所有模板，每行一个。", "hint": "**样例 1 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/06on46rj.png)\n\n在这个例子中，所有对应字符串 `AAB` 的六条路径（图中标红）加起来覆盖了每条街道至少一次，因此 `AAB` 是字节城的模板之一。\n\n**附加样例**\n\n1. 该样例满足 $n=21$，路径为一条直线，街道名称首字母交替为 `A` 和 `B`；\n2. 该样例满足 $n=200$，没有模板；\n3. 该样例满足 $n=200$，路径为一条直线，每条街道名称首字母均为 `A`；\n4. 该样例满足 $n=1001$，星形结构，由五条长度为 $200$ 的路径组成，每条街道名称首字母均为 `A`；\n5. 该样例满足 $n=1001$，星形结构，街道名称首字母一半为 `A`，一半为 `B`。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$ | $n \\leq 50$ | $15$ |\n| $2$ | $n \\leq 200$ | $35$ |\n| $3$ | 无附加限制 | $50$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R2] 模板 / Szablon Bajtogrodu", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4833)。", "description": "**题目译自 [XXVIII Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi28-2/dashboard/) [Szablon Bajtogrodu](https://szkopul.edu.pl/problemset/problem/y-mTVYClxMJcgMhUnHaUqPPq/statement/)**\n\n在 Bajtogród 里有 $n$ 个路口，它们通过一个简洁的双向街道网络连接在一起。这个网络之所以简洁，是因为从任意一个路口到另一个路口，恰好只有一条路径。每条街道都有自己的名字，就像城市里常见的那样。\n\n当 Bajtek 在城里散步时，他会记下经过的每条街道名称的首字母。沿着若干连续街道（不回头）走过的路线，我们称之为一条**路径**。于是，走完某条路径后，Bajtek 会记下一个与这条路径对应的字符串。\n\n今天，Bajtek 走了一条路径 $T$，发现它有个既有趣又没啥实际用处的特性：如果在 Bajtogród 中找出所有与路径 $T$ 对应相同字符串的路径，这些路径加起来至少会经过每条街道一次。Bajtek 把这种路径对应的字符串称为 **Bajtogród 的模板**。\n\n过了一会儿，Bajtek 开始怀疑，自己认定的路径 $T$ 是否真的是 Bajtogród 的模板？或者，Bajtogród 根本就没有模板？他请你帮忙研究这个问题，找出 Bajtogród 所有的模板（如果存在的话）。", "inputFormat": "输入的第一行包含一个整数 $n$ $(2 \\leq n \\leq 2000)$，表示 Bajtogród 中路口的数量。我们假设路口编号从 $1$ 到 $n$。\n\n接下来的 $n-1$ 行描述街道：第 $i$ $(1\\leq i\\leq n-1)$ 行包含两个整数 $a_{i}$ 和 $b_{i}$ $(1 \\leq a_{i}, b_{i} \\leq n, a_{i} \\neq b_{i})$，表示第 $i$ 条街道连接的两个路口编号，以及一个大写英文字母，表示这条街道名称的首字母。", "outputFormat": "输出的第一行应包含一个整数，表示 Bajtogród 模板的数量。接下来的几行按字典序列出所有模板，每行一个。", "hint": "**样例 1 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/06on46rj.png)\n\n在这个例子中，所有对应字符串 `AAB` 的六条路径（图中标红）加起来覆盖了每条街道至少一次，因此 `AAB` 是字节城的模板之一。\n\n**附加样例**\n\n1. 该样例满足 $n=21$，路径为一条直线，街道名称首字母交替为 `A` 和 `B`；\n2. 该样例满足 $n=200$，没有模板；\n3. 该样例满足 $n=200$，路径为一条直线，每条街道名称首字母均为 `A`；\n4. 该样例满足 $n=1001$，星形结构，由五条长度为 $200$ 的路径组成，每条街道名称首字母均为 `A`；\n5. 该样例满足 $n=1001$，星形结构，街道名称首字母一半为 `A`，一半为 `B`。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$ | $n \\leq 50$ | $15$ |\n| $2$ | $n \\leq 200$ | $35$ |\n| $3$ | 无附加限制 | $50$ |", "locale": "zh-CN"}}}
{"pid": "P12916", "type": "P", "difficulty": 5, "samples": [["5\n4 5\n2 4\n5 3\n1 9\n3 10", "3\n2 3\n4 7\n5 8"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "POI（波兰）", "2021", "Special Judge", "反悔贪心"], "title": "[POI 2021/2022 R1] 剪辑师 / Montażysta", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4103)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Montażysta](https://sio2.mimuw.edu.pl/c/oi29-1/p/mon/)**\n\nBajtazar 接手了剪辑 $n$ 部关于 POI 题目讲解的视频的任务。已知剪辑第 $i$ 部视频需要 $t_{i}$ 天，并且必须在第 $d_{i}$ 天之前发布。Bajtazar 有光纤网络，所以剪辑好的视频可以立即上传到服务器上。但是剪辑过程非常耗费硬件资源，而 Bajtazar 只有一台电脑，所以他一次只能剪辑一部视频。\n\n视频很多，Bajtazar 担心他不能按时完成所有的任务。请你帮助他，计算出如果他最早可以在第 $1$ 天开始剪辑，他最多能按时发布多少部视频。为了让 Bajtazar 更有信心，你还需要给出一个具体的工作计划，说明如何达到这个结果。", "inputFormat": "输入的第一行包含一个整数 $n\\ (1 \\leq n \\leq 5\\cdot 10^5)$，表示要剪辑的视频的数量。\n\n接下来的 $n$ 行，每行包含两个整数 $t_{i}, d_{i}\\ (1 \\leq t_{i}, d_{i} \\leq 10^{9})$，表示第 $i$ 部视频的剪辑时间和发布期限。", "outputFormat": "第一行输出一个整数 $m$，表示 Bajtazar 最多能按时发布的视频的数量。\n\n接下来的 $m$ 行，你需要给出一个工作计划；第 $i$ 行应该包含两个整数 $f_{i},k_{i}\\ (1 \\leq f_{i} \\leq n, 1 \\leq k_{i})$，表示第 $f_{i}$ 号视频应该在第 $k_{i}$ 天开始剪辑。如果有多种方案可以达到最大的 $m$，你的程序可以输出任意一种。", "hint": "**附加样例**\n\n1. 该样例满足 $n=1000 ; t_{i}=5 \\cdot 10^{8}, d_{i}=i \\cdot 10^{6}$。答案是 $2$。\n2. 该样例满足 $n=1000 , t_{i}=2, d_{i}=1999$。答案是 $999$。\n3. 该样例满足 $n=5\\cdot 10^5, t_{i} \\in\\{1,2,3\\}, d_{i}=10^{9}$。答案是 $5\\cdot 10^5$。\n\n详细子任务附加限制及分值如下表所示。如果你的程序正确地输出了 $m$，而方案不正确，你将获得该测试点 $50 \\%$ 的分数。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$ | $n \\leq 10$ | $20$ |\n| $2$ | $n \\leq 1000$ | $30$ |\n| $3$ | $t_{i}, d_{i} \\leq 10^{6}$ | $20$ |\n| $4$ | 无附加限制 | $30$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R1] 剪辑师 / Montażysta", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4103)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi29-1/dashboard/) [Montażysta](https://sio2.mimuw.edu.pl/c/oi29-1/p/mon/)**\n\nBajtazar 接手了剪辑 $n$ 部关于 POI 题目讲解的视频的任务。已知剪辑第 $i$ 部视频需要 $t_{i}$ 天，并且必须在第 $d_{i}$ 天之前发布。Bajtazar 有光纤网络，所以剪辑好的视频可以立即上传到服务器上。但是剪辑过程非常耗费硬件资源，而 Bajtazar 只有一台电脑，所以他一次只能剪辑一部视频。\n\n视频很多，Bajtazar 担心他不能按时完成所有的任务。请你帮助他，计算出如果他最早可以在第 $1$ 天开始剪辑，他最多能按时发布多少部视频。为了让 Bajtazar 更有信心，你还需要给出一个具体的工作计划，说明如何达到这个结果。", "inputFormat": "输入的第一行包含一个整数 $n\\ (1 \\leq n \\leq 5\\cdot 10^5)$，表示要剪辑的视频的数量。\n\n接下来的 $n$ 行，每行包含两个整数 $t_{i}, d_{i}\\ (1 \\leq t_{i}, d_{i} \\leq 10^{9})$，表示第 $i$ 部视频的剪辑时间和发布期限。", "outputFormat": "第一行输出一个整数 $m$，表示 Bajtazar 最多能按时发布的视频的数量。\n\n接下来的 $m$ 行，你需要给出一个工作计划；第 $i$ 行应该包含两个整数 $f_{i},k_{i}\\ (1 \\leq f_{i} \\leq n, 1 \\leq k_{i})$，表示第 $f_{i}$ 号视频应该在第 $k_{i}$ 天开始剪辑。如果有多种方案可以达到最大的 $m$，你的程序可以输出任意一种。", "hint": "**附加样例**\n\n1. 该样例满足 $n=1000 ; t_{i}=5 \\cdot 10^{8}, d_{i}=i \\cdot 10^{6}$。答案是 $2$。\n2. 该样例满足 $n=1000 , t_{i}=2, d_{i}=1999$。答案是 $999$。\n3. 该样例满足 $n=5\\cdot 10^5, t_{i} \\in\\{1,2,3\\}, d_{i}=10^{9}$。答案是 $5\\cdot 10^5$。\n\n详细子任务附加限制及分值如下表所示。如果你的程序正确地输出了 $m$，而方案不正确，你将获得该测试点 $50 \\%$ 的分数。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$ | $n \\leq 10$ | $20$ |\n| $2$ | $n \\leq 1000$ | $30$ |\n| $3$ | $t_{i}, d_{i} \\leq 10^{6}$ | $20$ |\n| $4$ | 无附加限制 | $30$ |", "locale": "zh-CN"}}}
{"pid": "P12917", "type": "P", "difficulty": 5, "samples": [["4\n2 4 2 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["POI（波兰）", "2022", "组合数学", "状压 DP"], "title": "[POI 2021/2022 R3] 小矮人派对 2 / Impreza krasnali 2", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4854)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – III etap](https://sio2.mimuw.edu.pl/c/oi29-3/dashboard/) [Impreza krasnali 2](https://szkopul.edu.pl/problemset/problem/2ZKQK-DbGaGSH4NAOY36o93L/statement/)**\n\n小矮人们又行动了！在上一次派对之后，他们又举办了一次后续聚会。这次依然有 $n$ 个小矮人，每人戴上一顶尖帽子（共有 $n$ 顶高度从 $1$ 到 $n$ 的不同帽子）。他们照旧围坐在一张长桌的一侧大吃大喝。\n\n本地画家又要为这次聚会作画，于是向每个小矮人询问帽子的信息。可惜，这群小矮人的记性更差了，每个小矮人只能告诉画家，自己、左边的人或右边的人的帽子高度。\n\n请你帮助画家，编写一个程序，计算根据小矮人们的描述，可能的帽子排列有多少种。由于结果可能很大，只需输出对 $10^{9}+7$ 取模的值。如果小矮人们的描述互相矛盾，正确答案应为 $0$。\n", "inputFormat": "输入的第一行包含一个整数 $n$ $(n \\geq 2)$，表示小矮人的数量。\n\n第二行包含 $n$ 个整数 $h_{1}, h_{2}, \\ldots, h_{n}$ $(1 \\leq h_{i} \\leq n)$，用空格分隔，其中 $h_{i}$ 表示从桌子左端开始数第 $i$ 个小矮人告诉画家的信息：「我、我左边的人或右边的人戴着高度为 $h_{i}$ 的帽子」。", "outputFormat": "你的程序应输出一行，包含一个整数，表示与小矮人们描述一致的帽子排列数量，结果需对 $10^{9}+7$ 取模。", "hint": "**附加样例**\n\n1. 该样例满足 $n=2, h_{i}=1$，答案为 $2$；\n2. 该样例满足 $n=100000, h_{i}=i$，答案为 $F_{n+1} \\bmod 10^{9}+7$，其中 $F_{i}$ 是第 $i$ 个斐波那契数。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$      | $n \\leq 10$      | $12$   |\n| $2$      | $n \\leq 20$      | $30$   |\n| $3$      | $n \\leq 1000$    | $30$   |\n| $4$      | $n \\leq 100000$  | $28$   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R3] 小矮人派对 2 / Impreza krasnali 2", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4854)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – III etap](https://sio2.mimuw.edu.pl/c/oi29-3/dashboard/) [Impreza krasnali 2](https://szkopul.edu.pl/problemset/problem/2ZKQK-DbGaGSH4NAOY36o93L/statement/)**\n\n小矮人们又行动了！在上一次派对之后，他们又举办了一次后续聚会。这次依然有 $n$ 个小矮人，每人戴上一顶尖帽子（共有 $n$ 顶高度从 $1$ 到 $n$ 的不同帽子）。他们照旧围坐在一张长桌的一侧大吃大喝。\n\n本地画家又要为这次聚会作画，于是向每个小矮人询问帽子的信息。可惜，这群小矮人的记性更差了，每个小矮人只能告诉画家，自己、左边的人或右边的人的帽子高度。\n\n请你帮助画家，编写一个程序，计算根据小矮人们的描述，可能的帽子排列有多少种。由于结果可能很大，只需输出对 $10^{9}+7$ 取模的值。如果小矮人们的描述互相矛盾，正确答案应为 $0$。\n", "inputFormat": "输入的第一行包含一个整数 $n$ $(n \\geq 2)$，表示小矮人的数量。\n\n第二行包含 $n$ 个整数 $h_{1}, h_{2}, \\ldots, h_{n}$ $(1 \\leq h_{i} \\leq n)$，用空格分隔，其中 $h_{i}$ 表示从桌子左端开始数第 $i$ 个小矮人告诉画家的信息：「我、我左边的人或右边的人戴着高度为 $h_{i}$ 的帽子」。", "outputFormat": "你的程序应输出一行，包含一个整数，表示与小矮人们描述一致的帽子排列数量，结果需对 $10^{9}+7$ 取模。", "hint": "**附加样例**\n\n1. 该样例满足 $n=2, h_{i}=1$，答案为 $2$；\n2. 该样例满足 $n=100000, h_{i}=i$，答案为 $F_{n+1} \\bmod 10^{9}+7$，其中 $F_{i}$ 是第 $i$ 个斐波那契数。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$      | $n \\leq 10$      | $12$   |\n| $2$      | $n \\leq 20$      | $30$   |\n| $3$      | $n \\leq 1000$    | $30$   |\n| $4$      | $n \\leq 100000$  | $28$   |", "locale": "zh-CN"}}}
{"pid": "P12920", "type": "P", "difficulty": 0, "samples": [["3 4 11\n--+\n+++-\nZ 1\nM 1\nM 2\nM 3\nZ 7\nN 3\nZ 1000000000000000000\nM 2\nN 2\nZ 4\nZ 1000000000000000000", "11\n9\n0\n10\n12"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["POI（波兰）", "2022"], "title": "[POI 2021/2022 R3] 河流 / Rzeki", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4857)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – III etap](https://sio2.mimuw.edu.pl/c/oi29-3/dashboard/) [Rzeki](https://szkopul.edu.pl/problemset/problem/KxrjYJ-gIqnT7k6iL3aF-g3t/statement/)**\n\n> 等到最后一条河被污染，等到最后一棵树被砍掉，等到最后一条鱼被捕捉，然后我们才明白，原来钞票是不能吃的。——印第安谚语\n\n在字节王国，有 $n$ 条河流从南向北沿着直线 $x=i$ $(i=1,2,\\ldots,n)$ 流动，还有 $m$ 条河流从西向东沿着直线 $y=j$ $(j=1,2,\\ldots,m)$ 流动。每两条河流的交点处都有一座城市。每座城市中，一条河流通过隧道流过，不与另一条混合。过去，每座城市都从其所在的河流取水。然而如今，一些河流污染严重，已无法净化水质，城市不得不从其他河流运水。运水成本等于城市到河流直线的距离。运水使用的是沿河流分布的双向公路，重卡可以通行（河流流向不影响运水）。\n\n遗憾的是，字节王国的预算有限，可能无法为所有城市供水。更复杂的是，有些河流会被净化，有些又会重新污染。\n\n请你编写一个程序，读取河流的当前状态，并支持两种操作：更改河流状态，以及回答在给定预算下最多能为多少城市供水。", "inputFormat": "输入的第一行包含三个整数 $n, m, z$ $(1 \\leq n, m, z \\leq 100000)$，分别表示南北向河流数、东西向河流数和操作次数。\n\n第二行是一个长度为 $n$ 的字符串，由 `+` 和 `-` 组成；第 $i$ 个字符表示第 $i$ 条南北向河流的状态：`+` 表示干净，`-` 表示污染。第三行是一个长度为 $m$ 的字符串，以相同格式描述东西向河流的初始状态。\n\n接下来的 $z$ 行描述操作，每行格式为以下之一：  \n- $\\texttt{Z}\\ c$：询问在预算 $c$ $(0 \\leq c \\leq 10^{18})$ 下，最多能为多少城市供水；  \n- $\\texttt{N}\\ i$：第 $i$ $(1 \\leq i \\leq n)$ 条南北向河流状态改变（干净变为污染，或污染变为干净）；  \n- $\\texttt{M}\\ i$：第 $i$ $(1 \\leq i \\leq m)$ 条东西向河流状态改变。", "outputFormat": "对于每个 $\\texttt{Z}$ 类型的询问，输出一行一个整数，表示在给定预算下最多能供水的城市数量。", "hint": "**样例 1 解释**\n\n初始状态下，实线表示干净河流，虚线表示污染河流，共有 $12$ 座城市位于交点处。  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rtc1mq5z.png)\n\n第一个询问 $\\texttt{Z}\\ 1$：城市 $(1,4)$ 和 $(2,4)$ 的运水成本为 $1$，因此只能放弃一座，其余 $10$ 座成本为 $0$，故答案为 $11$。  \n\n操作 $\\texttt{M}\\ 1$、$\\texttt{M}\\ 2$、$\\texttt{M}\\ 3$ 后，仅 $4$ 座城市有直接干净河流。询问 $\\texttt{Z}\\ 7$：预算 $7$ 可额外为 $x=2$ 上的 $4$ 座和 $x=1$ 上的 $1$ 座供水，总计 $9$ 座。 \n\n**附加样例**\n\n1. 该样例满足 $n=m=11$，仅第 $6$ 条南北向和东西向河流干净，询问预算 $0, 1, \\ldots, 220$；\n2. 该样例满足 $n=100000, m=1$，每次询问时恰有一条干净河流（对 $1 \\leq i \\leq 33333$，先净化第 $3i$ 条河流，询问成本 $2500000000$，再污染第 $3i$ 条河流）。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$      | $n, m, z \\leq 100$               | $7$    |\n| $2$      | 每条东西向河流始终污染            | $7$    |\n| $3$      | $n, m, z \\leq 1000$              | $21$   |\n| $4$      | 询问预算总和不超过 $10^{9}$      | $21$   |\n| $5$      | 无附加限制                       | $44$   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R3] 河流 / Rzeki", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4857)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – III etap](https://sio2.mimuw.edu.pl/c/oi29-3/dashboard/) [Rzeki](https://szkopul.edu.pl/problemset/problem/KxrjYJ-gIqnT7k6iL3aF-g3t/statement/)**\n\n> 等到最后一条河被污染，等到最后一棵树被砍掉，等到最后一条鱼被捕捉，然后我们才明白，原来钞票是不能吃的。——印第安谚语\n\n在字节王国，有 $n$ 条河流从南向北沿着直线 $x=i$ $(i=1,2,\\ldots,n)$ 流动，还有 $m$ 条河流从西向东沿着直线 $y=j$ $(j=1,2,\\ldots,m)$ 流动。每两条河流的交点处都有一座城市。每座城市中，一条河流通过隧道流过，不与另一条混合。过去，每座城市都从其所在的河流取水。然而如今，一些河流污染严重，已无法净化水质，城市不得不从其他河流运水。运水成本等于城市到河流直线的距离。运水使用的是沿河流分布的双向公路，重卡可以通行（河流流向不影响运水）。\n\n遗憾的是，字节王国的预算有限，可能无法为所有城市供水。更复杂的是，有些河流会被净化，有些又会重新污染。\n\n请你编写一个程序，读取河流的当前状态，并支持两种操作：更改河流状态，以及回答在给定预算下最多能为多少城市供水。", "inputFormat": "输入的第一行包含三个整数 $n, m, z$ $(1 \\leq n, m, z \\leq 100000)$，分别表示南北向河流数、东西向河流数和操作次数。\n\n第二行是一个长度为 $n$ 的字符串，由 `+` 和 `-` 组成；第 $i$ 个字符表示第 $i$ 条南北向河流的状态：`+` 表示干净，`-` 表示污染。第三行是一个长度为 $m$ 的字符串，以相同格式描述东西向河流的初始状态。\n\n接下来的 $z$ 行描述操作，每行格式为以下之一：  \n- $\\texttt{Z}\\ c$：询问在预算 $c$ $(0 \\leq c \\leq 10^{18})$ 下，最多能为多少城市供水；  \n- $\\texttt{N}\\ i$：第 $i$ $(1 \\leq i \\leq n)$ 条南北向河流状态改变（干净变为污染，或污染变为干净）；  \n- $\\texttt{M}\\ i$：第 $i$ $(1 \\leq i \\leq m)$ 条东西向河流状态改变。", "outputFormat": "对于每个 $\\texttt{Z}$ 类型的询问，输出一行一个整数，表示在给定预算下最多能供水的城市数量。", "hint": "**样例 1 解释**\n\n初始状态下，实线表示干净河流，虚线表示污染河流，共有 $12$ 座城市位于交点处。  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rtc1mq5z.png)\n\n第一个询问 $\\texttt{Z}\\ 1$：城市 $(1,4)$ 和 $(2,4)$ 的运水成本为 $1$，因此只能放弃一座，其余 $10$ 座成本为 $0$，故答案为 $11$。  \n\n操作 $\\texttt{M}\\ 1$、$\\texttt{M}\\ 2$、$\\texttt{M}\\ 3$ 后，仅 $4$ 座城市有直接干净河流。询问 $\\texttt{Z}\\ 7$：预算 $7$ 可额外为 $x=2$ 上的 $4$ 座和 $x=1$ 上的 $1$ 座供水，总计 $9$ 座。 \n\n**附加样例**\n\n1. 该样例满足 $n=m=11$，仅第 $6$ 条南北向和东西向河流干净，询问预算 $0, 1, \\ldots, 220$；\n2. 该样例满足 $n=100000, m=1$，每次询问时恰有一条干净河流（对 $1 \\leq i \\leq 33333$，先净化第 $3i$ 条河流，询问成本 $2500000000$，再污染第 $3i$ 条河流）。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$      | $n, m, z \\leq 100$               | $7$    |\n| $2$      | 每条东西向河流始终污染            | $7$    |\n| $3$      | $n, m, z \\leq 1000$              | $21$   |\n| $4$      | 询问预算总和不超过 $10^{9}$      | $21$   |\n| $5$      | 无附加限制                       | $44$   |", "locale": "zh-CN"}}}
{"pid": "P12921", "type": "P", "difficulty": 5, "samples": [["10 3\nacabbabbac\n3 b c\n4 a b\n3 c a", "babaabcbbc"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "二分", "POI（波兰）", "2022"], "title": "[POI 2021/2022 R3] 挑剔的 Bajtazar / Wybredny Bajtazar", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4858)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – III etap](https://sio2.mimuw.edu.pl/c/oi29-3/dashboard/) [Wybredny Bajtazar](https://szkopul.edu.pl/problemset/problem/n986eRgmdL0DsqT2Hn5aFDRs/statement/)**\n\n每年春天一到，Bajtazar 就开始琢磨如何用灯链装饰他的家迎接圣诞节。他拿出了那串陪伴多年的灯链，上面有 $n$ 个灯泡，每盏灯泡有五种颜色之一，用字母 $\\texttt{a}$ 到 $\\texttt{e}$ 表示。为了让灯链焕然一新，他开始调整每个灯泡的颜色。\n\n调整的过程是这样的：Bajtazar 选定两种颜色 $a$ 和 $b$，以及一个正整数 $p$，然后将从左边数起的前 $p$ 个颜色为 $a$ 的灯泡替换成颜色 $b$。\n\n由于他计划进行多次调整，他请你帮忙编写一个程序，展示在 $m$ 次调整后灯链的样子。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$ $(1 \\leq n, m \\leq 1000000)$，分别表示灯链中灯泡的数量和颜色调整的次数。第二行是一个长度为 $n$ 的字符串，由小写字母 $\\texttt{a}$ 到 $\\texttt{e}$ 组成，表示灯链上各灯泡的初始颜色。\n\n接下来的 $m$ 行描述颜色调整操作，每行包含一个正整数 $p_{i}$ 和两个不同的小写字母 $a_{i}$ 和 $b_{i}$，用单个空格分隔，表示将前 $p_{i}$ 个颜色为 $a_{i}$ 的灯泡改为颜色 $b_{i}$。你可以假设每次操作前，灯链中至少有 $p_{i}$ 个颜色为 $a_{i}$ 的灯泡。", "outputFormat": "输出一行，包含一个长度为 $n$ 的字符串，由字母 $\\texttt{a}$ 到 $\\texttt{e}$ 组成，表示所有调整操作完成后灯链上各灯泡的颜色。", "hint": "**样例解释**\n\n灯链颜色变化过程如下：\n\n$$\\texttt{acabbabbac} \\to \\texttt{acaccacbac} \\to \\texttt{bcbccbcbbc} \\to \\texttt{babaabcbbc}$$\n\n**附加样例**\n\n1. 该样例满足 $n=1000, m=1000$，初始灯链为 $\\texttt{ababab...ab}$，操作交替进行：将前 $250$ 个 $\\tt a$ 改为 $\\tt b$，再将前 $250$ 个 $\\tt b$ 改为 $\\tt a$；\n2. 该样例满足 $n=90000, m=100000$，初始灯链为 $\\texttt{aaa...abbb...bccc...c}$（每种颜色连续 $30000$ 个），操作循环进行：将前 $10000$ 个 $\\texttt{a}$ 改为 $\\texttt{b}$，前 $10000$ 个 $\\texttt{a}$ 改为 $\\texttt{c}$，前 $10000$ 个 $\\texttt{b}$ 改为 $\\texttt{a}$，前 $10000$ 个 $\\texttt{c}$ 改为 $\\texttt{a}$；\n3. 该样例满足 $n=1000000, m=1000000$，初始灯链为 $\\texttt{abcde}$ 重复 $200000$ 次，操作按颜色循环 $\\texttt{a} \\to  \\texttt{b} \\to \\texttt{c} \\to \\texttt{d} \\to \\texttt{e} \\to \\texttt{a}$，逐步增加调整的灯泡数量。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$      | $n \\leq 100000, m \\leq 100$      | $17$   |\n| $2$      | $n, m \\leq 100000$               | $18$   |\n| $3$      | 灯链始终只含 a 或 b             | $29$   |\n| $4$      | 灯链始终只含 a、b 或 c          | $17$   |\n| $5$      | 无附加限制                      | $19$   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R3] 挑剔的 Bajtazar / Wybredny Bajtazar", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4858)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – III etap](https://sio2.mimuw.edu.pl/c/oi29-3/dashboard/) [Wybredny Bajtazar](https://szkopul.edu.pl/problemset/problem/n986eRgmdL0DsqT2Hn5aFDRs/statement/)**\n\n每年春天一到，Bajtazar 就开始琢磨如何用灯链装饰他的家迎接圣诞节。他拿出了那串陪伴多年的灯链，上面有 $n$ 个灯泡，每盏灯泡有五种颜色之一，用字母 $\\texttt{a}$ 到 $\\texttt{e}$ 表示。为了让灯链焕然一新，他开始调整每个灯泡的颜色。\n\n调整的过程是这样的：Bajtazar 选定两种颜色 $a$ 和 $b$，以及一个正整数 $p$，然后将从左边数起的前 $p$ 个颜色为 $a$ 的灯泡替换成颜色 $b$。\n\n由于他计划进行多次调整，他请你帮忙编写一个程序，展示在 $m$ 次调整后灯链的样子。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$ $(1 \\leq n, m \\leq 1000000)$，分别表示灯链中灯泡的数量和颜色调整的次数。第二行是一个长度为 $n$ 的字符串，由小写字母 $\\texttt{a}$ 到 $\\texttt{e}$ 组成，表示灯链上各灯泡的初始颜色。\n\n接下来的 $m$ 行描述颜色调整操作，每行包含一个正整数 $p_{i}$ 和两个不同的小写字母 $a_{i}$ 和 $b_{i}$，用单个空格分隔，表示将前 $p_{i}$ 个颜色为 $a_{i}$ 的灯泡改为颜色 $b_{i}$。你可以假设每次操作前，灯链中至少有 $p_{i}$ 个颜色为 $a_{i}$ 的灯泡。", "outputFormat": "输出一行，包含一个长度为 $n$ 的字符串，由字母 $\\texttt{a}$ 到 $\\texttt{e}$ 组成，表示所有调整操作完成后灯链上各灯泡的颜色。", "hint": "**样例解释**\n\n灯链颜色变化过程如下：\n\n$$\\texttt{acabbabbac} \\to \\texttt{acaccacbac} \\to \\texttt{bcbccbcbbc} \\to \\texttt{babaabcbbc}$$\n\n**附加样例**\n\n1. 该样例满足 $n=1000, m=1000$，初始灯链为 $\\texttt{ababab...ab}$，操作交替进行：将前 $250$ 个 $\\tt a$ 改为 $\\tt b$，再将前 $250$ 个 $\\tt b$ 改为 $\\tt a$；\n2. 该样例满足 $n=90000, m=100000$，初始灯链为 $\\texttt{aaa...abbb...bccc...c}$（每种颜色连续 $30000$ 个），操作循环进行：将前 $10000$ 个 $\\texttt{a}$ 改为 $\\texttt{b}$，前 $10000$ 个 $\\texttt{a}$ 改为 $\\texttt{c}$，前 $10000$ 个 $\\texttt{b}$ 改为 $\\texttt{a}$，前 $10000$ 个 $\\texttt{c}$ 改为 $\\texttt{a}$；\n3. 该样例满足 $n=1000000, m=1000000$，初始灯链为 $\\texttt{abcde}$ 重复 $200000$ 次，操作按颜色循环 $\\texttt{a} \\to  \\texttt{b} \\to \\texttt{c} \\to \\texttt{d} \\to \\texttt{e} \\to \\texttt{a}$，逐步增加调整的灯泡数量。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$      | $n \\leq 100000, m \\leq 100$      | $17$   |\n| $2$      | $n, m \\leq 100000$               | $18$   |\n| $3$      | 灯链始终只含 a 或 b             | $29$   |\n| $4$      | 灯链始终只含 a、b 或 c          | $17$   |\n| $5$      | 无附加限制                      | $19$   |", "locale": "zh-CN"}}}
{"pid": "P12922", "type": "P", "difficulty": 6, "samples": [["3\n5 -3\n7 6\n4 -4", "5.5"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["POI（波兰）", "2022", "Special Judge"], "title": "[POI 2021/2022 R3] 流星 / Meteory", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4859)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – III etap](https://sio2.mimuw.edu.pl/c/oi29-3/dashboard/) [Meteory](https://szkopul.edu.pl/problemset/problem/k6tz-HdwVKUeP7p9RMpRE6RO/statement/)**\n\n字节王国是一个美丽却无限平坦的单维国度，可以看作一条数轴。很快，这里将迎来一场流星雨。根据字节王国气象学家的精准预测，会有正好 $n$ 颗流星坠落。更妙的是，他们还准确知道了每颗流星坠落的时间和地点：第 $i$ 颗流星将在 $t_{i}$ 小时落在位置 $x_{i}$。\n\n现在是 $0$ 时刻，Bajtazar 位于位置 $0$。因为流星很危险，而他随身携带的笔记本电脑里存着重要数据，他非常害怕数据受损，所以想尽量远离任何流星。具体来说，他希望最大化自己与最近坠落流星的距离（每次距离在流星坠落时测量）。\n\n假设 Bajtazar 跑步速度最多为每小时 $1$ 个单位（可向左或向右），且永不疲倦。他还能瞬间多次转向。请你帮助 Bajtazar 保护自己和他的数据，编写一个程序，读取流星信息，计算他能与最近的流星保持的最大距离。", "inputFormat": "输入的第一行包含一个整数 $n$ $(1 \\leq n \\leq 200000)$，表示流星数量。接下来的 $n$ 行每行描述一颗流星，包含两个整数 $t_{i}$ 和 $x_{i}$ $(0 \\leq t_{i} \\leq 10^{9}, -10^{9} \\leq x_{i} \\leq 10^{9})$，分别表示第 $i$ 颗流星坠落的时间和位置。", "outputFormat": "输出一行，包含一个实数，精确到小数点后一位，表示字节扎尔在最优策略下与最近流星的最大距离。若结果为整数，可带一位小数 $0$（如 $5.0$）或不带小数点（如 $5$）。", "hint": "**样例 1 解释**\n\n字节扎尔可先以每小时 $\\frac{1}{2}$ 的速度向右跑，到第 $4$ 小时到达位置 $2$（距第 $3$ 颗流星 $6$ 单位），第 $5$ 小时到达 $2 \\frac{1}{2}$（距第 $1$ 颗流星 $5 \\frac{1}{2}$ 单位）。然后他需转向，以最大速度 $1$ 向左跑，到第 $7$ 小时到达 $\\frac{1}{2}$（距第 $2$ 颗流星 $5 \\frac{1}{2}$ 单位）。这样，他始终与最近流星保持至少 $5 \\frac{1}{2}$ 的距离，且无法更大。\n\n**附加样例**\n\n1. 该样例满足 $n=5, t_{i}=i, x_{i}=2i-6$，答案为 $1 \\frac{1}{2}$；\n2. 该样例满足 $n=10, t_{i}=100, x_{i}=(-1)^{i} \\cdot i^{2}$，答案为 $19$；\n3. 该样例满足 $n=1000, t_{i}=4000, x_{i}=8i-4004$，答案为 $4$；\n4. 该样例满足 $n=200000, t_{i}=5000i, x_{i}=100000$，答案为 $105000$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$      | $t_{i} \\leq 1000$ 对所有 $i$      | $20$   |\n| $2$      | 所有 $t_{i}$ 相等                 | $10$   |\n| $3$      | $n \\leq 1000$                     | $20$   |\n| $4$      | 无附加限制                        | $50$   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R3] 流星 / Meteory", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4859)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – III etap](https://sio2.mimuw.edu.pl/c/oi29-3/dashboard/) [Meteory](https://szkopul.edu.pl/problemset/problem/k6tz-HdwVKUeP7p9RMpRE6RO/statement/)**\n\n字节王国是一个美丽却无限平坦的单维国度，可以看作一条数轴。很快，这里将迎来一场流星雨。根据字节王国气象学家的精准预测，会有正好 $n$ 颗流星坠落。更妙的是，他们还准确知道了每颗流星坠落的时间和地点：第 $i$ 颗流星将在 $t_{i}$ 小时落在位置 $x_{i}$。\n\n现在是 $0$ 时刻，Bajtazar 位于位置 $0$。因为流星很危险，而他随身携带的笔记本电脑里存着重要数据，他非常害怕数据受损，所以想尽量远离任何流星。具体来说，他希望最大化自己与最近坠落流星的距离（每次距离在流星坠落时测量）。\n\n假设 Bajtazar 跑步速度最多为每小时 $1$ 个单位（可向左或向右），且永不疲倦。他还能瞬间多次转向。请你帮助 Bajtazar 保护自己和他的数据，编写一个程序，读取流星信息，计算他能与最近的流星保持的最大距离。", "inputFormat": "输入的第一行包含一个整数 $n$ $(1 \\leq n \\leq 200000)$，表示流星数量。接下来的 $n$ 行每行描述一颗流星，包含两个整数 $t_{i}$ 和 $x_{i}$ $(0 \\leq t_{i} \\leq 10^{9}, -10^{9} \\leq x_{i} \\leq 10^{9})$，分别表示第 $i$ 颗流星坠落的时间和位置。", "outputFormat": "输出一行，包含一个实数，精确到小数点后一位，表示字节扎尔在最优策略下与最近流星的最大距离。若结果为整数，可带一位小数 $0$（如 $5.0$）或不带小数点（如 $5$）。", "hint": "**样例 1 解释**\n\n字节扎尔可先以每小时 $\\frac{1}{2}$ 的速度向右跑，到第 $4$ 小时到达位置 $2$（距第 $3$ 颗流星 $6$ 单位），第 $5$ 小时到达 $2 \\frac{1}{2}$（距第 $1$ 颗流星 $5 \\frac{1}{2}$ 单位）。然后他需转向，以最大速度 $1$ 向左跑，到第 $7$ 小时到达 $\\frac{1}{2}$（距第 $2$ 颗流星 $5 \\frac{1}{2}$ 单位）。这样，他始终与最近流星保持至少 $5 \\frac{1}{2}$ 的距离，且无法更大。\n\n**附加样例**\n\n1. 该样例满足 $n=5, t_{i}=i, x_{i}=2i-6$，答案为 $1 \\frac{1}{2}$；\n2. 该样例满足 $n=10, t_{i}=100, x_{i}=(-1)^{i} \\cdot i^{2}$，答案为 $19$；\n3. 该样例满足 $n=1000, t_{i}=4000, x_{i}=8i-4004$，答案为 $4$；\n4. 该样例满足 $n=200000, t_{i}=5000i, x_{i}=100000$，答案为 $105000$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$      | $t_{i} \\leq 1000$ 对所有 $i$      | $20$   |\n| $2$      | 所有 $t_{i}$ 相等                 | $10$   |\n| $3$      | $n \\leq 1000$                     | $20$   |\n| $4$      | 无附加限制                        | $50$   |", "locale": "zh-CN"}}}
{"pid": "P12923", "type": "P", "difficulty": 6, "samples": [["abcabcabacbabcab", "5 16"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "贪心", "并查集", "POI（波兰）", "2022", "Z 函数"], "title": "[POI 2021/2022 R3] 模板 2 / Szablon 2", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4860)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – III etap](https://sio2.mimuw.edu.pl/c/oi29-3/dashboard/) [Szablon 2](https://szkopul.edu.pl/problemset/problem/4GJfmOVwv_koH74nf7IV3lr9/statement/)**\n\nBajtazar 想在自家墙上写下一行长长的字。他决定先订做一个带有镂空字母的模板，然后将模板贴到墙上合适的位置，用喷漆涂抹，让墙上显现出模板上的字母。每次贴上模板，他都会涂满模板上的所有字母。他不介意某些字母被多次涂画（通过不同的模板位置），但每个位置的字母必须始终一致（否则字母叠加会毁了字迹）。模板上的字母是连续排列的，没有空隙。\n\nBajtazar 常去的模板供应商最近推出了一项超值优惠：订购一个镂空文字模板，就会免费附赠一个相同文字但反向镂空的模板（从右到左）。比如，如果他订购模板 `olimpiada`，就会收到 `olimpiada` 和 `adaipmilo` 两个模板。\n\nBajtazar 很好奇，想知道所有可能的模板订购方案（含赠品），让他能在墙上写出自己想要的文字。确切来说，他希望了解所有可能的模板长度。请你帮他解决这个问题！", "inputFormat": "输入只有一行，包含一个由 $1$ 到 $1000000$ 个小写英文字母组成的单词，表示 Bajtazar 想写在墙上的文字。以下用 $n$ 表示这个单词的长度。", "outputFormat": "输出一行，包含所有可能的模板长度，按升序排列，用单个空格分隔。即使某长度存在多个有效模板，也只需输出该长度一次。", "hint": "**样例 1 解释**\n\nBajtazar 可以订购模板 `abcab`，附赠模板为 `bacba`。通过合理摆放这两个模板，即可拼出输入的文字。箭头显示应该将哪个模板（订购的和附赠的）应用到墙上，以获得输入中的文字。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ym84i5lg.png)\n\n**附加样例**\n\n1. 该样例满足 $n=201$，文字为 $\\texttt{a}^{100}\\texttt{ba}^{100}$，模板长度为 $101, 102, 103, \\ldots, 201$；\n2. 该样例满足 $n=50000$，文字为 $(\\texttt{ab})^{25000}$，模板长度为 $2, 4, 6, \\ldots, 50000$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$      | $n \\leq 500$      | $15$   |\n| $2$      | $n \\leq 5000$     | $25$   |\n| $3$      | $n \\leq 100000$   | $40$   |\n| $4$      | 无附加限制        | $20$   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2021/2022 R3] 模板 2 / Szablon 2", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/4860)。", "description": "**题目译自 [XXIX Olimpiada Informatyczna – III etap](https://sio2.mimuw.edu.pl/c/oi29-3/dashboard/) [Szablon 2](https://szkopul.edu.pl/problemset/problem/4GJfmOVwv_koH74nf7IV3lr9/statement/)**\n\nBajtazar 想在自家墙上写下一行长长的字。他决定先订做一个带有镂空字母的模板，然后将模板贴到墙上合适的位置，用喷漆涂抹，让墙上显现出模板上的字母。每次贴上模板，他都会涂满模板上的所有字母。他不介意某些字母被多次涂画（通过不同的模板位置），但每个位置的字母必须始终一致（否则字母叠加会毁了字迹）。模板上的字母是连续排列的，没有空隙。\n\nBajtazar 常去的模板供应商最近推出了一项超值优惠：订购一个镂空文字模板，就会免费附赠一个相同文字但反向镂空的模板（从右到左）。比如，如果他订购模板 `olimpiada`，就会收到 `olimpiada` 和 `adaipmilo` 两个模板。\n\nBajtazar 很好奇，想知道所有可能的模板订购方案（含赠品），让他能在墙上写出自己想要的文字。确切来说，他希望了解所有可能的模板长度。请你帮他解决这个问题！", "inputFormat": "输入只有一行，包含一个由 $1$ 到 $1000000$ 个小写英文字母组成的单词，表示 Bajtazar 想写在墙上的文字。以下用 $n$ 表示这个单词的长度。", "outputFormat": "输出一行，包含所有可能的模板长度，按升序排列，用单个空格分隔。即使某长度存在多个有效模板，也只需输出该长度一次。", "hint": "**样例 1 解释**\n\nBajtazar 可以订购模板 `abcab`，附赠模板为 `bacba`。通过合理摆放这两个模板，即可拼出输入的文字。箭头显示应该将哪个模板（订购的和附赠的）应用到墙上，以获得输入中的文字。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ym84i5lg.png)\n\n**附加样例**\n\n1. 该样例满足 $n=201$，文字为 $\\texttt{a}^{100}\\texttt{ba}^{100}$，模板长度为 $101, 102, 103, \\ldots, 201$；\n2. 该样例满足 $n=50000$，文字为 $(\\texttt{ab})^{25000}$，模板长度为 $2, 4, 6, \\ldots, 50000$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$      | $n \\leq 500$      | $15$   |\n| $2$      | $n \\leq 5000$     | $25$   |\n| $3$      | $n \\leq 100000$   | $40$   |\n| $4$      | 无附加限制        | $20$   |", "locale": "zh-CN"}}}
{"pid": "P12925", "type": "P", "difficulty": 5, "samples": [["5 4\n01010", "01111"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["POI（波兰）", "2023", "矩阵加速", "bitset"], "title": "[POI 2022/2023 R2] 病毒 / Wirus", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/5020)。", "description": "**题目译自 [XXX Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi30-2/dashboard/) [Wirus](https://szkopul.edu.pl/problemset/problem/c9kbLOJVLHiQDcmiNo8Pa4w6/statement/)**\n\nBajtosia 在 Bajtocja 最先进的生物实验室工作，她的团队研究一种新型病毒。该病毒的基因型仅由两种基因组成，记为 $0$ 和 $1$，总计 $n$ 个基因，可表示为序列 $(X_1, X_2, \\ldots, X_n)$，其中每个 $X_i$ 为 $0$ 或 $1$。\n\n不幸的是，这种病毒以独特但规律的方式变异。每天，左侧第一个基因 $X_1$ 脱离，变为 $X_1 \\oplus X_2$（$\\oplus$ 表示异或运算），然后附着到序列右侧。因此，基因型 $(X_1, X_2, \\ldots, X_n)$ 变异后为 $(X_2, X_3, \\ldots, X_n, X_1 \\oplus X_2)$。\n\nBajtosia 需要预测病毒在 $d$ 天后的基因型。你能帮助她吗？", "inputFormat": "第一行包含两个整数 $n, d$ $(2 \\leq n \\leq 700, 1 \\leq d \\leq 10^{15})$，分别表示基因型长度和变异天数。\n\n第二行包含一个长度为 $n$ 的字符串，由字符 $X_1, X_2, \\ldots, X_n$ $(X_i \\in \\{0, 1\\})$ 组成，第 $i$ 个字符表示第 $i$ 个基因的类型。", "outputFormat": "输出一行，包含长度为 $n$ 的字符串，表示 $d$ 天后病毒的基因型，格式与输入相同。", "hint": "**样例 1 解释**\n\n病毒基因型每日变化如下：\n\n$$\n01010 \\to 10101 \\to 01011 \\to 10111 \\to 01111\n$$\n\n**附加样例**\n\n1. $n=10, d=30$，初始基因型 $1010000101$，答案为 $0110110110$。  \n2. $n=100, d=2000000$，初始基因型 $000\\ldots000$，答案为 $000\\ldots000$。  \n3. $n=700, d=10^{15}$，初始基因型 $111\\ldots111$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$    | $d \\leq 100$             | $7$  |\n| $2$    | $d \\leq 2000000$         | $12$ |\n| $3$    | $n \\leq 100$             | $65$ |\n| $4$    | 无附加限制               | $16$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2022/2023 R2] 病毒 / Wirus", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/5020)。", "description": "**题目译自 [XXX Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi30-2/dashboard/) [Wirus](https://szkopul.edu.pl/problemset/problem/c9kbLOJVLHiQDcmiNo8Pa4w6/statement/)**\n\nBajtosia 在 Bajtocja 最先进的生物实验室工作，她的团队研究一种新型病毒。该病毒的基因型仅由两种基因组成，记为 $0$ 和 $1$，总计 $n$ 个基因，可表示为序列 $(X_1, X_2, \\ldots, X_n)$，其中每个 $X_i$ 为 $0$ 或 $1$。\n\n不幸的是，这种病毒以独特但规律的方式变异。每天，左侧第一个基因 $X_1$ 脱离，变为 $X_1 \\oplus X_2$（$\\oplus$ 表示异或运算），然后附着到序列右侧。因此，基因型 $(X_1, X_2, \\ldots, X_n)$ 变异后为 $(X_2, X_3, \\ldots, X_n, X_1 \\oplus X_2)$。\n\nBajtosia 需要预测病毒在 $d$ 天后的基因型。你能帮助她吗？", "inputFormat": "第一行包含两个整数 $n, d$ $(2 \\leq n \\leq 700, 1 \\leq d \\leq 10^{15})$，分别表示基因型长度和变异天数。\n\n第二行包含一个长度为 $n$ 的字符串，由字符 $X_1, X_2, \\ldots, X_n$ $(X_i \\in \\{0, 1\\})$ 组成，第 $i$ 个字符表示第 $i$ 个基因的类型。", "outputFormat": "输出一行，包含长度为 $n$ 的字符串，表示 $d$ 天后病毒的基因型，格式与输入相同。", "hint": "**样例 1 解释**\n\n病毒基因型每日变化如下：\n\n$$\n01010 \\to 10101 \\to 01011 \\to 10111 \\to 01111\n$$\n\n**附加样例**\n\n1. $n=10, d=30$，初始基因型 $1010000101$，答案为 $0110110110$。  \n2. $n=100, d=2000000$，初始基因型 $000\\ldots000$，答案为 $000\\ldots000$。  \n3. $n=700, d=10^{15}$，初始基因型 $111\\ldots111$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$    | $d \\leq 100$             | $7$  |\n| $2$    | $d \\leq 2000000$         | $12$ |\n| $3$    | $n \\leq 100$             | $65$ |\n| $4$    | 无附加限制               | $16$ |", "locale": "zh-CN"}}}
{"pid": "P12926", "type": "P", "difficulty": 5, "samples": [["6\n1 2\n2 3\n3 4\n3 5\n5 6\n1 2 1\n1\n5 6\nA + 2", "1\n3"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["博弈论", "树状数组", "POI（波兰）", "2023", "树的重心"], "title": "[POI 2022/2023 R2] 涂色游戏 / Gra w kolorowanie", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/5021)。", "description": "**题目译自 [XXX Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi30-2/dashboard/) [Gra w kolorowanie](https://szkopul.edu.pl/problemset/problem/BefzQSkyOOBhuycp8gvD8XdG/statement/)**\n\n涂色游戏的棋盘由 $n$ 个格子组成，编号从 $1$ 到 $n$，部分格子相邻，恰有 $n-1$ 对相邻格子，且任意两格子可通过相邻格子连通（棋盘构成一棵树）。\n\n游戏由两名玩家参与。初始时，所有格子为白色，除一个格子涂为红色（属于玩家一）和另一个格子涂为蓝色（属于玩家二）。玩家轮流行动，每次选择一个自身颜色的格子 $u$，并将其相邻的任一白色格子 $v$ 涂为同色。无法行动的玩家输掉游戏。\n\n我们想知道，玩家一在哪些初始格子选择下能确保获胜，即无论玩家二如何行动，玩家一总有制胜策略。具体而言，给定格子集合 $A$ 和 $B$，计算满足以下条件的不同格子对 $(a, b)$ 数量：初始红色格子 $a \\in A$，初始蓝色格子 $b \\in B$，且玩家一有制胜策略。\n\n程序需处理集合 $A$ 和 $B$ 的 $q$ 次更新，每次添加或移除一个格子，输出每次更新后满足条件的 $(a, b)$ 对数量。", "inputFormat": "第一行包含一个整数 $n$ $(1 \\leq n \\leq 500000)$，表示棋盘格子数。\n\n接下来的 $n-1$ 行，每行包含两个整数 $u, v$ $(1 \\leq u, v \\leq n)$，表示格子 $u$ 和 $v$ 相邻。\n\n下一行包含三个整数 $S_A, S_B, q$ $(1 \\leq S_A, S_B \\leq n, 0 \\leq q \\leq 500000)$，分别表示集合 $A$ 和 $B$ 的初始大小及更新次数。\n\n下一行包含 $S_A$ 个互不相同的整数（属于 $\\{1, \\ldots, n\\}$），表示集合 $A$ 的格子编号。\n\n下一行包含 $S_B$ 个互不相同的整数（属于 $\\{1, \\ldots, n\\}$），表示集合 $B$ 的格子编号。\n\n接下来的 $q$ 行，每行包含两个字符 $z, t$ 和一个整数 $w$ $(z \\in \\{\\texttt{A}, \\texttt{B}\\}, t \\in \\{\\texttt{+}, \\texttt{-}\\}, 1 \\leq w \\leq n)$，分别表示操作的集合（$A$ 或 $B$）、操作类型（$\\texttt{+}$ 为添加，$\\texttt{-}$ 为移除）和格子编号 $w$。保证每次操作有效（添加时 $w$ 不在集合，移除时 $w$ 在集合）。\n\n集合 $A$ 和 $B$ 可不互斥，计数的 $(a, b)$ 对要求 $a \\neq b$。", "outputFormat": "输出 $q+1$ 行，第 $i$ 行包含一个整数，表示前 $i-1$ 次更新后，满足条件的 $(a, b)$ 对数量。特别地，第一行表示初始集合 $A$ 和 $B$ 的结果。", "hint": "**样例 1 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/98x0wc08.png)\n\n初始时，$A=\\{1\\}, B=\\{5, 6\\}$，可选初始对 $(a, b)$ 为 $(1, 5)$ 和 $(1, 6)$。  \n- 对 $(1, 5)$：玩家一涂格子 $2$，玩家二涂格子 $3$，玩家一无格子可涂，输。  \n- 对 $(1, 6)$：玩家一涂格子 $2$，玩家二涂格子 $5$，玩家一涂格子 $3$，玩家二无格子可涂，输。  \n仅 $(1, 6)$ 使玩家一获胜，输出 $1$。  \n\n更新后，$A=\\{1, 2\\}, B=\\{5, 6\\}$，玩家一在 $(1, 5), (2, 5), (2, 6)$ 有制胜策略，输出 $3$。\n\n**附加样例**\n\n1. $n=10, q=0$，格子 $i>1$ 连接格子 $1$，$A=\\{1, 2, 3\\}, B=\\{4, 5, 6\\}$，答案为 $9$。\n2. $n=200, q=0$，格子 $i>1$ 连接格子 $i-1$，$A=\\{1, 2, 3\\}, B=\\{1, 2, 3\\}$，答案为 $3$。\n3. $n=2000, q=0$，格子 $i>1$ 连接格子 $\\lfloor i/2 \\rfloor$，$A=B=\\{1, 2, \\ldots, n\\}$，答案为 $2411948$。\n4. $n=500000, q=0$，格子 $i>1$ 连接格子 $\\lfloor i/2 \\rfloor$，$A=B=\\{1, 2, \\ldots, n\\}$，答案为 $150744198828$。\n5. $n=500000, q=1$，格子 $i>1$ 连接格子 $i-1$，$A=\\{1, 2, 3\\}, B=\\{1\\}$，更新移除 $B$ 的格子 $1$。\n6. $n=500000, q=1$，格子 $i>1$ 连接格子 $i-1$，$A=\\{1, 2, 3\\}, B=\\{1, 2, 3\\}$，更新移除 $B$ 的格子 $3$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$    | $q=0, n \\leq 10$         | $8$  |\n| $2$    | $q=0, n \\leq 200$        | $10$ |\n| $3$    | $q=0, n \\leq 2000$       | $18$ |\n| $4$    | $q=0$                    | $30$ |\n| $5$    | $z=\\texttt{B}$           | $16$ |\n| $6$    | 无附加限制               | $18$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2022/2023 R2] 涂色游戏 / Gra w kolorowanie", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/5021)。", "description": "**题目译自 [XXX Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi30-2/dashboard/) [Gra w kolorowanie](https://szkopul.edu.pl/problemset/problem/BefzQSkyOOBhuycp8gvD8XdG/statement/)**\n\n涂色游戏的棋盘由 $n$ 个格子组成，编号从 $1$ 到 $n$，部分格子相邻，恰有 $n-1$ 对相邻格子，且任意两格子可通过相邻格子连通（棋盘构成一棵树）。\n\n游戏由两名玩家参与。初始时，所有格子为白色，除一个格子涂为红色（属于玩家一）和另一个格子涂为蓝色（属于玩家二）。玩家轮流行动，每次选择一个自身颜色的格子 $u$，并将其相邻的任一白色格子 $v$ 涂为同色。无法行动的玩家输掉游戏。\n\n我们想知道，玩家一在哪些初始格子选择下能确保获胜，即无论玩家二如何行动，玩家一总有制胜策略。具体而言，给定格子集合 $A$ 和 $B$，计算满足以下条件的不同格子对 $(a, b)$ 数量：初始红色格子 $a \\in A$，初始蓝色格子 $b \\in B$，且玩家一有制胜策略。\n\n程序需处理集合 $A$ 和 $B$ 的 $q$ 次更新，每次添加或移除一个格子，输出每次更新后满足条件的 $(a, b)$ 对数量。", "inputFormat": "第一行包含一个整数 $n$ $(1 \\leq n \\leq 500000)$，表示棋盘格子数。\n\n接下来的 $n-1$ 行，每行包含两个整数 $u, v$ $(1 \\leq u, v \\leq n)$，表示格子 $u$ 和 $v$ 相邻。\n\n下一行包含三个整数 $S_A, S_B, q$ $(1 \\leq S_A, S_B \\leq n, 0 \\leq q \\leq 500000)$，分别表示集合 $A$ 和 $B$ 的初始大小及更新次数。\n\n下一行包含 $S_A$ 个互不相同的整数（属于 $\\{1, \\ldots, n\\}$），表示集合 $A$ 的格子编号。\n\n下一行包含 $S_B$ 个互不相同的整数（属于 $\\{1, \\ldots, n\\}$），表示集合 $B$ 的格子编号。\n\n接下来的 $q$ 行，每行包含两个字符 $z, t$ 和一个整数 $w$ $(z \\in \\{\\texttt{A}, \\texttt{B}\\}, t \\in \\{\\texttt{+}, \\texttt{-}\\}, 1 \\leq w \\leq n)$，分别表示操作的集合（$A$ 或 $B$）、操作类型（$\\texttt{+}$ 为添加，$\\texttt{-}$ 为移除）和格子编号 $w$。保证每次操作有效（添加时 $w$ 不在集合，移除时 $w$ 在集合）。\n\n集合 $A$ 和 $B$ 可不互斥，计数的 $(a, b)$ 对要求 $a \\neq b$。", "outputFormat": "输出 $q+1$ 行，第 $i$ 行包含一个整数，表示前 $i-1$ 次更新后，满足条件的 $(a, b)$ 对数量。特别地，第一行表示初始集合 $A$ 和 $B$ 的结果。", "hint": "**样例 1 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/98x0wc08.png)\n\n初始时，$A=\\{1\\}, B=\\{5, 6\\}$，可选初始对 $(a, b)$ 为 $(1, 5)$ 和 $(1, 6)$。  \n- 对 $(1, 5)$：玩家一涂格子 $2$，玩家二涂格子 $3$，玩家一无格子可涂，输。  \n- 对 $(1, 6)$：玩家一涂格子 $2$，玩家二涂格子 $5$，玩家一涂格子 $3$，玩家二无格子可涂，输。  \n仅 $(1, 6)$ 使玩家一获胜，输出 $1$。  \n\n更新后，$A=\\{1, 2\\}, B=\\{5, 6\\}$，玩家一在 $(1, 5), (2, 5), (2, 6)$ 有制胜策略，输出 $3$。\n\n**附加样例**\n\n1. $n=10, q=0$，格子 $i>1$ 连接格子 $1$，$A=\\{1, 2, 3\\}, B=\\{4, 5, 6\\}$，答案为 $9$。\n2. $n=200, q=0$，格子 $i>1$ 连接格子 $i-1$，$A=\\{1, 2, 3\\}, B=\\{1, 2, 3\\}$，答案为 $3$。\n3. $n=2000, q=0$，格子 $i>1$ 连接格子 $\\lfloor i/2 \\rfloor$，$A=B=\\{1, 2, \\ldots, n\\}$，答案为 $2411948$。\n4. $n=500000, q=0$，格子 $i>1$ 连接格子 $\\lfloor i/2 \\rfloor$，$A=B=\\{1, 2, \\ldots, n\\}$，答案为 $150744198828$。\n5. $n=500000, q=1$，格子 $i>1$ 连接格子 $i-1$，$A=\\{1, 2, 3\\}, B=\\{1\\}$，更新移除 $B$ 的格子 $1$。\n6. $n=500000, q=1$，格子 $i>1$ 连接格子 $i-1$，$A=\\{1, 2, 3\\}, B=\\{1, 2, 3\\}$，更新移除 $B$ 的格子 $3$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$    | $q=0, n \\leq 10$         | $8$  |\n| $2$    | $q=0, n \\leq 200$        | $10$ |\n| $3$    | $q=0, n \\leq 2000$       | $18$ |\n| $4$    | $q=0$                    | $30$ |\n| $5$    | $z=\\texttt{B}$           | $16$ |\n| $6$    | 无附加限制               | $18$ |", "locale": "zh-CN"}}}
{"pid": "P12927", "type": "P", "difficulty": 4, "samples": [["5 1 1 1", "12"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["POI（波兰）", "2023"], "title": "[POI 2022/2023 R2] 车厢 / Wagony", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/5022)。", "description": "**题目译自 [XXX Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi30-2/dashboard/) [Wagony](https://szkopul.edu.pl/problemset/problem/UtJx9fM6UT2oxXFenSPjiz5C/statement/)**\n\n在一维铁轨上停放着 $n$ 个车厢，初始时各车厢互不连接。每次操作可将相邻的两组已连接车厢合并，前提是两组车厢数量差不超过 $d$。合并耗时取决于两组车厢数量。你的任务是将所有车厢合并成一个含 $n$ 个车厢的列车。\n\n合并含 $w$ 个车厢的组与含 $v$ 个车厢的组（满足 $|w-v| \\leq d$）的成本由奇特函数 $(a w + b v) \\bmod 1001$ 计算。", "inputFormat": "第一行包含四个正整数 $n, d, a, b$ $(1 \\leq n \\leq 10^{16}, 1 \\leq d, a, b \\leq 1000)$，分别表示车厢总数、数量差上限和成本函数参数。", "outputFormat": "输出一个整数，表示将 $n$ 个车厢合并成一个列车的最小成本。", "hint": "**样例 1 解释**\n\n我们将第一个车厢与第二个车厢连接（成本 $2$），第三个车厢与第四个车厢连接（成本 $2$），然后再与第五个车厢连接（成本 $3$），最后将两个形成的车厢组连接（成本 $5$）。\n\n**附加样例**\n\n1. $n=10, d=3, a=2, b=3$。\n2. $n=10^5, d=1000, a=3, b=5$。\n3. $n=10^{16}, d=300, a=3, b=5$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$    | $n \\leq 100000$          | $21$ |\n| $2$    | $d \\leq 300$             | $46$ |\n| $3$    | 无附加限制               | $33$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2022/2023 R2] 车厢 / Wagony", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/5022)。", "description": "**题目译自 [XXX Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi30-2/dashboard/) [Wagony](https://szkopul.edu.pl/problemset/problem/UtJx9fM6UT2oxXFenSPjiz5C/statement/)**\n\n在一维铁轨上停放着 $n$ 个车厢，初始时各车厢互不连接。每次操作可将相邻的两组已连接车厢合并，前提是两组车厢数量差不超过 $d$。合并耗时取决于两组车厢数量。你的任务是将所有车厢合并成一个含 $n$ 个车厢的列车。\n\n合并含 $w$ 个车厢的组与含 $v$ 个车厢的组（满足 $|w-v| \\leq d$）的成本由奇特函数 $(a w + b v) \\bmod 1001$ 计算。", "inputFormat": "第一行包含四个正整数 $n, d, a, b$ $(1 \\leq n \\leq 10^{16}, 1 \\leq d, a, b \\leq 1000)$，分别表示车厢总数、数量差上限和成本函数参数。", "outputFormat": "输出一个整数，表示将 $n$ 个车厢合并成一个列车的最小成本。", "hint": "**样例 1 解释**\n\n我们将第一个车厢与第二个车厢连接（成本 $2$），第三个车厢与第四个车厢连接（成本 $2$），然后再与第五个车厢连接（成本 $3$），最后将两个形成的车厢组连接（成本 $5$）。\n\n**附加样例**\n\n1. $n=10, d=3, a=2, b=3$。\n2. $n=10^5, d=1000, a=3, b=5$。\n3. $n=10^{16}, d=300, a=3, b=5$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$    | $n \\leq 100000$          | $21$ |\n| $2$    | $d \\leq 300$             | $46$ |\n| $3$    | 无附加限制               | $33$ |", "locale": "zh-CN"}}}
{"pid": "P12928", "type": "P", "difficulty": 4, "samples": [["3\n2 3 1", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "POI（波兰）", "2023", "位运算", "bitset"], "title": "[POI 2022/2023 R2] 伐木工人 / Drwale", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/5023)。", "description": "**题目译自 [XXX Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi30-2/dashboard/) [Drwale](https://szkopul.edu.pl/problemset/problem/fh8k3DcWsZB3OwD8rSLJw7SQ/statement/)**\n\n两位伐木工 Bajtek 和 Bitek 以相同速度砍伐 $n$ 块木材，初始堆放在一起。第 $i$ 块木材需耗时 $a_i$ 分钟。每次某位伐木工完成当前木材后，从堆顶取下一块。若两人同时完成，Bajtek 优先取木材。\n\n你的任务是计算在最不利排列下，伐木工完成所有砍伐的最晚时间。\n", "inputFormat": "第一行包含一个整数 $n$ $(1 \\leq n \\leq 10^6)$，表示木材数量。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\ldots, a_n$，表示每块木材的砍伐时间。  \n\n设 $A = a_1 + a_2 + \\ldots + a_n$ 为总砍伐时间，满足 $A \\leq 5000000$。", "outputFormat": "输出一个整数，表示伐木工完成砍伐的最长可能时间。", "hint": "**样例 1 解释**\n\n若木材按顺序 $1, 2, 3$ 排列（耗时 $1, 2, 3$），可达结果 $4$。Bajtek 先取木材 $1$（耗时 $1$），Bitek 取木材 $2$（耗时 $2$）。$1$ 分钟后，Bajtek 取木材 $3$（耗时 $3$）。$4$ 分钟后，所有木材砍伐完成。\n\n**附加样例**\n\n1. $n=6, a_i = i$，答案为 $13$。  \n2. $n=1000, a_i = 1$，答案为 $500$。  \n3. $n=10, a_i = 2^{i-1}$，答案为 $767$。  \n4. $n=2, a_i = 2500000$，答案为 $2500000$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$    | $n \\leq 10$              | $5$  |\n| $2$    | $A \\leq 500$             | $15$ |\n| $3$    | $A \\leq 10000$           | $20$ |\n| $4$    | $A \\leq 100000$          | $20$ |\n| $5$    | $A \\leq 1000000$         | $20$ |\n| $6$    | 无附加限制               | $20$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2022/2023 R2] 伐木工人 / Drwale", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/5023)。", "description": "**题目译自 [XXX Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi30-2/dashboard/) [Drwale](https://szkopul.edu.pl/problemset/problem/fh8k3DcWsZB3OwD8rSLJw7SQ/statement/)**\n\n两位伐木工 Bajtek 和 Bitek 以相同速度砍伐 $n$ 块木材，初始堆放在一起。第 $i$ 块木材需耗时 $a_i$ 分钟。每次某位伐木工完成当前木材后，从堆顶取下一块。若两人同时完成，Bajtek 优先取木材。\n\n你的任务是计算在最不利排列下，伐木工完成所有砍伐的最晚时间。\n", "inputFormat": "第一行包含一个整数 $n$ $(1 \\leq n \\leq 10^6)$，表示木材数量。\n\n第二行包含 $n$ 个正整数 $a_1, a_2, \\ldots, a_n$，表示每块木材的砍伐时间。  \n\n设 $A = a_1 + a_2 + \\ldots + a_n$ 为总砍伐时间，满足 $A \\leq 5000000$。", "outputFormat": "输出一个整数，表示伐木工完成砍伐的最长可能时间。", "hint": "**样例 1 解释**\n\n若木材按顺序 $1, 2, 3$ 排列（耗时 $1, 2, 3$），可达结果 $4$。Bajtek 先取木材 $1$（耗时 $1$），Bitek 取木材 $2$（耗时 $2$）。$1$ 分钟后，Bajtek 取木材 $3$（耗时 $3$）。$4$ 分钟后，所有木材砍伐完成。\n\n**附加样例**\n\n1. $n=6, a_i = i$，答案为 $13$。  \n2. $n=1000, a_i = 1$，答案为 $500$。  \n3. $n=10, a_i = 2^{i-1}$，答案为 $767$。  \n4. $n=2, a_i = 2500000$，答案为 $2500000$。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$    | $n \\leq 10$              | $5$  |\n| $2$    | $A \\leq 500$             | $15$ |\n| $3$    | $A \\leq 10000$           | $20$ |\n| $4$    | $A \\leq 100000$          | $20$ |\n| $5$    | $A \\leq 1000000$         | $20$ |\n| $6$    | 无附加限制               | $20$ |", "locale": "zh-CN"}}}
{"pid": "P12929", "type": "P", "difficulty": 5, "samples": [["4 4 2\n3 4 5 1\n1 2\n2 4\n1 3\n3 4", "13\n5\n6\n1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["POI（波兰）", "2023", "状压 DP"], "title": "[POI 2022/2023 R2] 攀登 / Wspinaczka", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/5024)。", "description": "**题目译自 [XXX Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi30-2/dashboard/) [Wspinaczka](https://szkopul.edu.pl/problemset/problem/dqDbPTjXtS9KK9xXHD4qAiie/statement/)**\n\nBajtocka 山是 Bajtocja 的最高峰，沿途有一条风景如画的登山步道。步道上有 $n$ 个位于不同高度的林间空地，第 $i$ 个空地位于 $i$ 米高度。$m$ 条登山路径（有时为绕过某些空地的栈桥）连接这些空地，每条路径通向上方。每块空地有其摄影吸引力，用整数表示。\n\n为确保安全，禁止离开指定路径！此地天气瞬息万变，常有暴雨侵袭，游客只能在空地的专用凉亭避雨。因此，每条路径连接的空地高度差不超过 $k$ 米。\n\nBajtocka 摄影协会（BKF）的 $n$ 名摄影师计划登上 Bajtocka 山。他们将一起攀登至某空地 $p$，然后分散行动。每人仅沿登山路径向上移动，拍摄途经空地的照片（因技术限制，仅能在空地拍摄，无法在路径上拍出好照片）。每人可选择任意空地结束行程。\n\n最后，摄影师们会计算探险的风景值——所有拍摄空地的摄影吸引力之和（每块空地最多贡献一张照片的吸引力值）。\n\nBKF 尚未决定从哪块空地 $p$ 开始并分散。请帮助他们，为每种可能的 $p$ 选择计算从该空地开始探险的最大风景值。", "inputFormat": "第一行包含三个整数 $n, m, k$ $(2 \\leq n \\leq 100000, 1 \\leq m \\leq 800000, 1 \\leq k \\leq 8)$，分别表示空地数、路径数和路径最大高度差。\n\n第二行包含 $n$ 个整数 $f_1, \\ldots, f_n$ $(1 \\leq f_i \\leq 10^9)$，表示各空地的摄影吸引力。\n\n接下来的 $m$ 行，每行包含两个整数 $a_i, b_i$ $(1 \\leq a_i < b_i \\leq n, b_i \\leq a_i + k)$，表示从空地 $a_i$ 到 $b_i$ 的路径。路径互不相同。", "outputFormat": "输出 $n$ 行，第 $i$ 行包含一个整数，表示从空地 $p=i$ 开始并分散的最大风景值。", "hint": "**附加样例**\n\n1. $n=5, m=4, k=1$，$f_i = 2^{i-1}$。  \n2. $n=30, k=2$，$f_i = 998244353 - 2^{i-1}$，每块空地有路径到后两块空地（若存在）。  \n3. $n=1000, k=8$，$f_i = i$，每块空地有路径到编号不互质的空地。  \n4. $n=100000, k=8$，$f_i = 1$，空地间有路径当十进制表示有公共数字。  \n5. $n=100000, k=8$，每块空地有路径到距离为偶数的空地。\n\n所有测试数据均满足路径仅连接高度差不超过 $k$ 米的空地。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$    | 除最后空地外，每块空地向上有恰一条路径       | $10$ |\n| $2$    | $n \\leq 1000$                                | $10$ |\n| $3$    | $f_i = 1$ 对每个 $i$                         | $20$ |\n| $4$    | $k \\leq 2$                                   | $15$ |\n| $5$    | 无附加限制                                   | $45$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2022/2023 R2] 攀登 / Wspinaczka", "background": "翻译来自于 [LibreOJ](https://loj.ac/p/5024)。", "description": "**题目译自 [XXX Olimpiada Informatyczna – II etap](https://sio2.mimuw.edu.pl/c/oi30-2/dashboard/) [Wspinaczka](https://szkopul.edu.pl/problemset/problem/dqDbPTjXtS9KK9xXHD4qAiie/statement/)**\n\nBajtocka 山是 Bajtocja 的最高峰，沿途有一条风景如画的登山步道。步道上有 $n$ 个位于不同高度的林间空地，第 $i$ 个空地位于 $i$ 米高度。$m$ 条登山路径（有时为绕过某些空地的栈桥）连接这些空地，每条路径通向上方。每块空地有其摄影吸引力，用整数表示。\n\n为确保安全，禁止离开指定路径！此地天气瞬息万变，常有暴雨侵袭，游客只能在空地的专用凉亭避雨。因此，每条路径连接的空地高度差不超过 $k$ 米。\n\nBajtocka 摄影协会（BKF）的 $n$ 名摄影师计划登上 Bajtocka 山。他们将一起攀登至某空地 $p$，然后分散行动。每人仅沿登山路径向上移动，拍摄途经空地的照片（因技术限制，仅能在空地拍摄，无法在路径上拍出好照片）。每人可选择任意空地结束行程。\n\n最后，摄影师们会计算探险的风景值——所有拍摄空地的摄影吸引力之和（每块空地最多贡献一张照片的吸引力值）。\n\nBKF 尚未决定从哪块空地 $p$ 开始并分散。请帮助他们，为每种可能的 $p$ 选择计算从该空地开始探险的最大风景值。", "inputFormat": "第一行包含三个整数 $n, m, k$ $(2 \\leq n \\leq 100000, 1 \\leq m \\leq 800000, 1 \\leq k \\leq 8)$，分别表示空地数、路径数和路径最大高度差。\n\n第二行包含 $n$ 个整数 $f_1, \\ldots, f_n$ $(1 \\leq f_i \\leq 10^9)$，表示各空地的摄影吸引力。\n\n接下来的 $m$ 行，每行包含两个整数 $a_i, b_i$ $(1 \\leq a_i < b_i \\leq n, b_i \\leq a_i + k)$，表示从空地 $a_i$ 到 $b_i$ 的路径。路径互不相同。", "outputFormat": "输出 $n$ 行，第 $i$ 行包含一个整数，表示从空地 $p=i$ 开始并分散的最大风景值。", "hint": "**附加样例**\n\n1. $n=5, m=4, k=1$，$f_i = 2^{i-1}$。  \n2. $n=30, k=2$，$f_i = 998244353 - 2^{i-1}$，每块空地有路径到后两块空地（若存在）。  \n3. $n=1000, k=8$，$f_i = i$，每块空地有路径到编号不互质的空地。  \n4. $n=100000, k=8$，$f_i = 1$，空地间有路径当十进制表示有公共数字。  \n5. $n=100000, k=8$，每块空地有路径到距离为偶数的空地。\n\n所有测试数据均满足路径仅连接高度差不超过 $k$ 米的空地。\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :---: | :--: | :---: |\n| $1$    | 除最后空地外，每块空地向上有恰一条路径       | $10$ |\n| $2$    | $n \\leq 1000$                                | $10$ |\n| $3$    | $f_i = 1$ 对每个 $i$                         | $20$ |\n| $4$    | $k \\leq 2$                                   | $15$ |\n| $5$    | 无附加限制                                   | $45$ |", "locale": "zh-CN"}}}
{"pid": "P12930", "type": "P", "difficulty": 5, "samples": [["12\n68 69 54 64 68 64 70 67\n78 62 98 87", "4 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "USACO", "树状数组"], "title": "[USACO4.3] 逢低吸纳 Buy Low, Buy Lower 加强版", "background": "[P2687](https://www.luogu.com.cn/problem/P2687) 加强版。在本题中，$N\\leq 10^6$，且输出方案数需要对 $10^9+7$ 取模。", "description": "“逢低吸纳”是炒股的一条成功秘诀。如果你想成为一个成功的投资者，就要遵守这条秘诀：“逢低吸纳，越低越买”。\n\n这句话的意思是：每次你购买股票时的股价一定要比你上次购买时的股价低。按照这个规则购买股票的次数越多越好，看看你最多能按这个规则买几次。\n\n给定连续的 $N$ 天中每天的股价。你可以在任何一天购买一次股票，但是购买时的股价一定要比你上次购买时的股价低。写一个程序，求出最多能买几次股票，和最优方案数对 $10^9+7$ 取模的结果。\n\n以下面这个表为例，某几天的股价是：\n\n|天数    |股价    |\n|:-------|:-------|\n|$1$|$68$|\n|$2$|$69$|\n|$3$|$54$|\n|$4$|$64$|\n|$5$|$68$|\n|$6$|$64$|\n|$7$|$70$|\n|$8$|$67$|\n|$9$|$78$|\n|$10$|$62$|\n|$11$|$98$|\n|$12$|$87$|\n\n\n这个例子中，如果每次买股票时的股价都比上一次买时低，那么最多能买 $4$ 次股票。一种买法如下（可能有其他的买法）：\n\n\n|天数    |股价    |\n|:-------|:-------|\n|$2$|$69$|\n|$5$|$68$|\n|$6$|$64$|\n|$10$|$62$|", "inputFormat": "第 $1$ 行：一个整数 $N$，表示能买股票的天数。\n\n以后多行，输入 $N$ 个非负整数（可能分多行），第 $i$ 个正整数表示第 $i$ 天的股价。这些非负整数大小不会超过 $2^{32}-1$。", "outputFormat": "一行两个整数，表示按每次买股票时的股价都比上一次买时低的要求最多能够买进股票的天数，和能够买进这些天数的股票的股票购买方案数量，对 $10^9+7$ 取模。\n\n两个方案不相同当且仅当这两个方案中所购买的股票的价格序列不相同。", "hint": "$1 \\le N \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO4.3] 逢低吸纳 Buy Low, Buy Lower 加强版", "background": "[P2687](https://www.luogu.com.cn/problem/P2687) 加强版。在本题中，$N\\leq 10^6$，且输出方案数需要对 $10^9+7$ 取模。", "description": "“逢低吸纳”是炒股的一条成功秘诀。如果你想成为一个成功的投资者，就要遵守这条秘诀：“逢低吸纳，越低越买”。\n\n这句话的意思是：每次你购买股票时的股价一定要比你上次购买时的股价低。按照这个规则购买股票的次数越多越好，看看你最多能按这个规则买几次。\n\n给定连续的 $N$ 天中每天的股价。你可以在任何一天购买一次股票，但是购买时的股价一定要比你上次购买时的股价低。写一个程序，求出最多能买几次股票，和最优方案数对 $10^9+7$ 取模的结果。\n\n以下面这个表为例，某几天的股价是：\n\n|天数    |股价    |\n|:-------|:-------|\n|$1$|$68$|\n|$2$|$69$|\n|$3$|$54$|\n|$4$|$64$|\n|$5$|$68$|\n|$6$|$64$|\n|$7$|$70$|\n|$8$|$67$|\n|$9$|$78$|\n|$10$|$62$|\n|$11$|$98$|\n|$12$|$87$|\n\n\n这个例子中，如果每次买股票时的股价都比上一次买时低，那么最多能买 $4$ 次股票。一种买法如下（可能有其他的买法）：\n\n\n|天数    |股价    |\n|:-------|:-------|\n|$2$|$69$|\n|$5$|$68$|\n|$6$|$64$|\n|$10$|$62$|", "inputFormat": "第 $1$ 行：一个整数 $N$，表示能买股票的天数。\n\n以后多行，输入 $N$ 个非负整数（可能分多行），第 $i$ 个正整数表示第 $i$ 天的股价。这些非负整数大小不会超过 $2^{32}-1$。", "outputFormat": "一行两个整数，表示按每次买股票时的股价都比上一次买时低的要求最多能够买进股票的天数，和能够买进这些天数的股票的股票购买方案数量，对 $10^9+7$ 取模。\n\n两个方案不相同当且仅当这两个方案中所购买的股票的价格序列不相同。", "hint": "$1 \\le N \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P12931", "type": "P", "difficulty": 4, "samples": [["5\n0 1 1 0 1", "2"], ["6\n500 20 900 0 900 70", "7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "树状数组", "离散化", "NOISG（新加坡）"], "title": "[NOISG 2020 Prelim] Mountains", "background": "企鹅 Pengu 和他的朋友们生活在南极洲。虽然企鹅不会飞，但他们渴望体验翱翔天际的感觉。为了满足大家的愿望，Pengu 决定借助科技的力量——滑翔伞。", "description": "幸运的是，在南极横贯山脉中有 $n$ 座山峰。这些山峰从左到右依次编号为 $1$ 到 $n$，第 $i$ 座山峰的高度为 $H_i$。\n\nPengu 决定选择三座山峰 $x,y,z$，他打算在山峰 $y$ 上建立起飞站，在山峰 $x$ 和 $z$ 上分别设置接收站。企鹅们将从山峰 $y$ 滑翔至山峰 $x$ 或 $z$。\n\n为了容纳更多企鹅并避免空中相撞，山峰 $x$ 必须位于山峰 $y$ 左侧，山峰 $z$ 必须位于山峰 $y$ 右侧，并且山峰 $x$ 和 $z$ 的高度必须都**严格小于**山峰 $y$。\n\nPengu 非常严谨，他想统计所有满足条件的选择方案。请你帮他计算，满足以下条件的三元组 $(x,y,z)$ 有多少个：\n\n- $1 \\leq x < y < z \\leq n$；\n- $H_x < H_y$ 且 $H_z < H_y$。", "inputFormat": "第一行包含一个整数 $n$，表示山峰的数量。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 座山峰的高度 $H_i$。", "outputFormat": "输出一个整数，表示满足条件的方案总数。", "hint": "【样例解释】\n\n对于样例 #1：\n\n- 共有 $2$ 组满足条件的三元组：$(1,2,4)$、$(1,3,4)$。\n\n对于样例 #2：\n\n- 共有 $7$ 组满足条件的三元组：$(1,3,4)$、$(1,3,6)$、$(1,5,6)$、$(2,3,4)$、$(2,3,6)$、$(2,5,6)$、$(4,5,6)$。\n\n【数据范围】\n\n- $3 \\leq n \\leq 3 \\times 10^5$；\n- $0 \\leq H_i \\leq 10^{18}$。\n\n| 子任务编号 | 分值 |                      额外限制                       |\n| :--------: | :--: | :-------------------------------------------------: |\n|    $1$     | $2$  | $H_i$ 单调不减（即 $H_i \\leq H_j$，对任意 $i < j$） |\n|    $2$     | $4$  |                 $0 \\leq H_i \\leq 1$                 |\n|    $3$     | $9$  |                $0 \\leq H_i \\leq 99$                 |\n|    $4$     | $36$ |                    $n \\leq 500$                     |\n|    $5$     | $28$ |                    $n \\leq 10^4$                    |\n|    $6$     | $9$  |               $0 \\leq H_i \\leq 10^5$                |\n|    $7$     | $12$ |                     无额外限制                      |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Prelim] Mountains", "background": "企鹅 Pengu 和他的朋友们生活在南极洲。虽然企鹅不会飞，但他们渴望体验翱翔天际的感觉。为了满足大家的愿望，Pengu 决定借助科技的力量——滑翔伞。", "description": "幸运的是，在南极横贯山脉中有 $n$ 座山峰。这些山峰从左到右依次编号为 $1$ 到 $n$，第 $i$ 座山峰的高度为 $H_i$。\n\nPengu 决定选择三座山峰 $x,y,z$，他打算在山峰 $y$ 上建立起飞站，在山峰 $x$ 和 $z$ 上分别设置接收站。企鹅们将从山峰 $y$ 滑翔至山峰 $x$ 或 $z$。\n\n为了容纳更多企鹅并避免空中相撞，山峰 $x$ 必须位于山峰 $y$ 左侧，山峰 $z$ 必须位于山峰 $y$ 右侧，并且山峰 $x$ 和 $z$ 的高度必须都**严格小于**山峰 $y$。\n\nPengu 非常严谨，他想统计所有满足条件的选择方案。请你帮他计算，满足以下条件的三元组 $(x,y,z)$ 有多少个：\n\n- $1 \\leq x < y < z \\leq n$；\n- $H_x < H_y$ 且 $H_z < H_y$。", "inputFormat": "第一行包含一个整数 $n$，表示山峰的数量。\n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 座山峰的高度 $H_i$。", "outputFormat": "输出一个整数，表示满足条件的方案总数。", "hint": "【样例解释】\n\n对于样例 #1：\n\n- 共有 $2$ 组满足条件的三元组：$(1,2,4)$、$(1,3,4)$。\n\n对于样例 #2：\n\n- 共有 $7$ 组满足条件的三元组：$(1,3,4)$、$(1,3,6)$、$(1,5,6)$、$(2,3,4)$、$(2,3,6)$、$(2,5,6)$、$(4,5,6)$。\n\n【数据范围】\n\n- $3 \\leq n \\leq 3 \\times 10^5$；\n- $0 \\leq H_i \\leq 10^{18}$。\n\n| 子任务编号 | 分值 |                      额外限制                       |\n| :--------: | :--: | :-------------------------------------------------: |\n|    $1$     | $2$  | $H_i$ 单调不减（即 $H_i \\leq H_j$，对任意 $i < j$） |\n|    $2$     | $4$  |                 $0 \\leq H_i \\leq 1$                 |\n|    $3$     | $9$  |                $0 \\leq H_i \\leq 99$                 |\n|    $4$     | $36$ |                    $n \\leq 500$                     |\n|    $5$     | $28$ |                    $n \\leq 10^4$                    |\n|    $6$     | $9$  |               $0 \\leq H_i \\leq 10^5$                |\n|    $7$     | $12$ |                     无额外限制                      |", "locale": "zh-CN"}}}
{"pid": "P12932", "type": "P", "difficulty": 5, "samples": [["1 5 3 -5 -4\n10\n1 1 1 1 1\n1 1 1", "30"], ["1 3 5 -10 -5\n10\n1 1 1\n1 1 1 1 1", "10"], ["4 7 4 0 0\n1 2 3 4\n3 1 2 1 4 1 1\n1 2 3 4", "7"], ["4 8 4 0 -3\n1 2 3 4\n3 1 2 1 1 4 1 1\n1 2 3 4", "-1"], ["4 8 4 -3 0\n1 2 3 4\n3 1 2 1 1 4 1 1\n1 2 3 4", "2"], ["6 10 6 -2 -1\n1 2 3 4 5 6\n3 1 5 2 6 1 5 1 1 4\n1 2 3 4 5 6", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "NOISG（新加坡）"], "title": "[NOISG 2020 Prelim] Visiting Singapore", "background": "", "description": "新加坡每天都会举办一场活动，记 $Σ = \\{1, 2, \\ldots, K\\}$ 表示所有可能的活动集合。参加第 $i$ 个活动可以让你的幸福值增加 $V[i]$。\n\n假设连续 $n$ 天内举办的活动依次为 $S[1], S[2], \\ldots, S[n]$（同一活动可能多次出现）。\n\n你想依次参加 $m$ 个指定活动 $T[1], T[2], \\ldots, T[m]$（同样可能重复）。因此，你计划选择某一天飞往新加坡，第 $i$ 天到达，第 $j$ 天离开。你也可以选择不去新加坡。\n\n在新加坡停留期间，你尝试依次完成 $T[1]$ 至 $T[m]$ 的活动：\n\n- 成功参加第 $T[i]$ 个活动，幸福值增加 $V[T[i]]$；\n- 若跳过连续的 $T[p]$ 至 $T[q]$，幸福值减少 $A + (q - p + 1)B$；\n- 此外，在新加坡期间，若连续 $d$ 天未参加任何活动，幸福值减少 $A + dB$。更具体地说，若你仅在第 $p$ 天和第 $q$ 天参加了活动，且 $q \\geq p + 2$，中间未参加任何活动，幸福值减少 $A + (q - p - 1)B$。\n\n你想最大化自己的幸福值。请计算最大可能的幸福值。", "inputFormat": "第一行包含五个整数 $K, n, m, A, B$，含义如下：\n\n- $K$：活动种类数；\n- $n$：总天数；\n- $m$：目标活动数量；\n- $A, B$：负数，分别表示跳过惩罚参数。\n\n第二行包含 $K$ 个正整数，第 $i$ 个整数表示第 $i$ 个活动带来的幸福值 $V[i]$。\n\n第三行包含 $n$ 个整数，第 $i$ 个整数 $S[i]$ 表示第 $i$ 天举办的活动，范围 $1 \\sim K$。\n\n第四行包含 $m$ 个整数，第 $i$ 个整数 $T[i]$ 表示你计划依次参加的活动，范围 $1 \\sim K$。\n", "outputFormat": "输出一行，表示在最优安排下可以获得的最大幸福值。", "hint": "【样例解释】\n\n对于样例 #1：\n\n在这个例子中，$K = 1,\\ n = 5,\\ m = 3,\\ A = -5,\\ B = -4$。\n由于只有一种类型的活动，且 $m \\leq n$，一种可行的最优方案是第 $1$ 天去新加坡，第 $m$ 天离开。\n\n由于每个活动的幸福值是 $10$，且 $m = 3$，所以最优幸福值是 $30$。\n\n对于样例 #2：\n\n由于只有一种类型的活动，且 $n > m$，一种可行的最优方案是第 $1$ 天去新加坡，第 $n$ 天离开。\n同时，我们需要跳过 $T[m - n + 1]$ 到 $T[n]$ 这几个目标活动。\n\n由于每个活动的幸福值是 $10$，$n = 3,\\ m = 5$，因此前 $3$ 个目标活动可以尝试，获得幸福值 $10 \\times 3 = 30$。\n跳过最后 $2$ 个目标活动，幸福值减少 $A + 2B = -10 + 2(-5) = -20$。\n\n因此，总幸福值是 $10$。\n\n对于样例 #3：\n\n最优方案是尝试第 $2$ 天的 $S[2] = 1$，第 $3$ 天的 $S[3] = 2$ 和第 $5$ 天的 $S[5] = 4$。\n获得的幸福值是 $1 + 2 + 4 = 7$。\n\n对于样例 #4：\n\n最优方案是尝试第 $5$ 天的 $S[5] = 1$ 和第 $6$ 天的 $S[6] = 4$。\n幸福值是 $1 + 4 - (2 \\times 3) = -1$。\n\n对于样例 #5：\n\n最优方案是尝试第 $5$ 天的 $S[5] = 1$ 和第 $6$ 天的 $S[6] = 4$。\n跳过 $T[2]$ 和 $T[3]$，幸福值减少 $-3$。\n幸福值是 $1 + 4 - 3 = 2$。\n\n对于样例 #6：\n\n最优方案是在第 $2$ 天到达新加坡，第 $5$ 天离开。\n该方案尝试了第 $2$ 天的 $S[2] = 1$，第 $3$ 天的 $S[3] = 5$ 和第 $5$ 天的 $S[5] = 6$。\n我们跳过了 $T[2]$ 到 $T[4]$，因此幸福值减少 $-2 + 3 \\times (-1) = -5$。\n我们跳过了第 $4$ 天，幸福值减少 $-2 + (-1) = -3$。\n幸福值是 $1 + 5 + 6 - 5 - 3 = 4$。\n\n【数据范围】\n\n- $1 \\leq K \\leq 1000$\n- $1 \\leq n, m \\leq 5000$\n- $-100 \\leq A, B \\leq 0$\n- $1 \\leq V[i] \\leq 100$\n\n| 子任务编号 | 分值 |           额外限制           |\n| :--------: | :--: | :--------------------------: |\n|    $1$     | $4$  | $K = 1,\\ m \\leq n \\leq 10^3$ |\n|    $2$     | $6$  |  $K = 1,\\ n < m \\leq 10^3$   |\n|    $3$     | $12$ |         $A = B = 0$          |\n|    $4$     | $7$  |           $A = 0$            |\n|    $5$     | $8$  |           $B = 0$            |\n|    $6$     | $13$ |        $n,\\ m < 100$         |\n|    $7$     | $50$ |          无额外限制          |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Prelim] Visiting Singapore", "background": "", "description": "新加坡每天都会举办一场活动，记 $Σ = \\{1, 2, \\ldots, K\\}$ 表示所有可能的活动集合。参加第 $i$ 个活动可以让你的幸福值增加 $V[i]$。\n\n假设连续 $n$ 天内举办的活动依次为 $S[1], S[2], \\ldots, S[n]$（同一活动可能多次出现）。\n\n你想依次参加 $m$ 个指定活动 $T[1], T[2], \\ldots, T[m]$（同样可能重复）。因此，你计划选择某一天飞往新加坡，第 $i$ 天到达，第 $j$ 天离开。你也可以选择不去新加坡。\n\n在新加坡停留期间，你尝试依次完成 $T[1]$ 至 $T[m]$ 的活动：\n\n- 成功参加第 $T[i]$ 个活动，幸福值增加 $V[T[i]]$；\n- 若跳过连续的 $T[p]$ 至 $T[q]$，幸福值减少 $A + (q - p + 1)B$；\n- 此外，在新加坡期间，若连续 $d$ 天未参加任何活动，幸福值减少 $A + dB$。更具体地说，若你仅在第 $p$ 天和第 $q$ 天参加了活动，且 $q \\geq p + 2$，中间未参加任何活动，幸福值减少 $A + (q - p - 1)B$。\n\n你想最大化自己的幸福值。请计算最大可能的幸福值。", "inputFormat": "第一行包含五个整数 $K, n, m, A, B$，含义如下：\n\n- $K$：活动种类数；\n- $n$：总天数；\n- $m$：目标活动数量；\n- $A, B$：负数，分别表示跳过惩罚参数。\n\n第二行包含 $K$ 个正整数，第 $i$ 个整数表示第 $i$ 个活动带来的幸福值 $V[i]$。\n\n第三行包含 $n$ 个整数，第 $i$ 个整数 $S[i]$ 表示第 $i$ 天举办的活动，范围 $1 \\sim K$。\n\n第四行包含 $m$ 个整数，第 $i$ 个整数 $T[i]$ 表示你计划依次参加的活动，范围 $1 \\sim K$。\n", "outputFormat": "输出一行，表示在最优安排下可以获得的最大幸福值。", "hint": "【样例解释】\n\n对于样例 #1：\n\n在这个例子中，$K = 1,\\ n = 5,\\ m = 3,\\ A = -5,\\ B = -4$。\n由于只有一种类型的活动，且 $m \\leq n$，一种可行的最优方案是第 $1$ 天去新加坡，第 $m$ 天离开。\n\n由于每个活动的幸福值是 $10$，且 $m = 3$，所以最优幸福值是 $30$。\n\n对于样例 #2：\n\n由于只有一种类型的活动，且 $n > m$，一种可行的最优方案是第 $1$ 天去新加坡，第 $n$ 天离开。\n同时，我们需要跳过 $T[m - n + 1]$ 到 $T[n]$ 这几个目标活动。\n\n由于每个活动的幸福值是 $10$，$n = 3,\\ m = 5$，因此前 $3$ 个目标活动可以尝试，获得幸福值 $10 \\times 3 = 30$。\n跳过最后 $2$ 个目标活动，幸福值减少 $A + 2B = -10 + 2(-5) = -20$。\n\n因此，总幸福值是 $10$。\n\n对于样例 #3：\n\n最优方案是尝试第 $2$ 天的 $S[2] = 1$，第 $3$ 天的 $S[3] = 2$ 和第 $5$ 天的 $S[5] = 4$。\n获得的幸福值是 $1 + 2 + 4 = 7$。\n\n对于样例 #4：\n\n最优方案是尝试第 $5$ 天的 $S[5] = 1$ 和第 $6$ 天的 $S[6] = 4$。\n幸福值是 $1 + 4 - (2 \\times 3) = -1$。\n\n对于样例 #5：\n\n最优方案是尝试第 $5$ 天的 $S[5] = 1$ 和第 $6$ 天的 $S[6] = 4$。\n跳过 $T[2]$ 和 $T[3]$，幸福值减少 $-3$。\n幸福值是 $1 + 4 - 3 = 2$。\n\n对于样例 #6：\n\n最优方案是在第 $2$ 天到达新加坡，第 $5$ 天离开。\n该方案尝试了第 $2$ 天的 $S[2] = 1$，第 $3$ 天的 $S[3] = 5$ 和第 $5$ 天的 $S[5] = 6$。\n我们跳过了 $T[2]$ 到 $T[4]$，因此幸福值减少 $-2 + 3 \\times (-1) = -5$。\n我们跳过了第 $4$ 天，幸福值减少 $-2 + (-1) = -3$。\n幸福值是 $1 + 5 + 6 - 5 - 3 = 4$。\n\n【数据范围】\n\n- $1 \\leq K \\leq 1000$\n- $1 \\leq n, m \\leq 5000$\n- $-100 \\leq A, B \\leq 0$\n- $1 \\leq V[i] \\leq 100$\n\n| 子任务编号 | 分值 |           额外限制           |\n| :--------: | :--: | :--------------------------: |\n|    $1$     | $4$  | $K = 1,\\ m \\leq n \\leq 10^3$ |\n|    $2$     | $6$  |  $K = 1,\\ n < m \\leq 10^3$   |\n|    $3$     | $12$ |         $A = B = 0$          |\n|    $4$     | $7$  |           $A = 0$            |\n|    $5$     | $8$  |           $B = 0$            |\n|    $6$     | $13$ |        $n,\\ m < 100$         |\n|    $7$     | $50$ |          无额外限制          |", "locale": "zh-CN"}}}
{"pid": "P12933", "type": "P", "difficulty": 4, "samples": [["6 2 7\n10 4 7 18 11\n5 8 2 4 8 12", "2\n3 5"], ["6 2 38\n10 4 7 18 11\n5 8 2 4 8 12", "1\n4"], ["6 1 12\n10 4 7 18 11\n5 8 2 4 8 12", "1\n5"], ["12 1 2\n1 1 1 1 1 1 1 1 1 1 1\n1 2 3 4 5 6 6 5 4 3 2 1", "1\n6"], ["10 3 1\n2 2 2 2 2 2 2 2 2\n3 7 5 6 8 4 3 2 2 9", "3\n3 4 5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "树形数据结构", "2020", "Special Judge", "双指针 two-pointer", "NOISG（新加坡）"], "title": "[NOISG 2020 Prelim] Solar Storm", "background": "", "description": "Squeaky 老鼠是宇宙飞船的船长，正在执行探索太阳系边界的任务。飞船呈长条状，沿着飞船的长度方向有一条笔直的通道，$N$ 个舱室连接在通道的不同位置。舱室从左到右编号为 $1$ 到 $N$，相邻舱室之间的距离不一定相等。\n\n每个舱室 $i$（$1 \\leq i \\leq N$）中都有重要的设备，用于支持飞船的运行，设备的重要性用正整数 $v_i$ 表示。相邻舱室之间有电缆连接，设备可以通过其他舱室远程控制。\n\n然而，一场太阳风暴即将袭击飞船！太阳风暴会释放大量带电粒子，如果不加保护，将会损坏飞船上的设备。\n\n幸运的是，船员随船携带了 $S$ 个防护盾。每个防护盾可以放置在任意舱室，也可以选择不使用。每个防护盾能在其所在位置产生磁场，保护半径为 $K$ 米，半径范围内的所有舱室设备都能被保护（包括防护盾所在的舱室）。\n\n需要注意：\n\n- 通道本身无需保护，因为电缆不受带电粒子的影响；\n- 为了方便后续操作，Squeaky 希望所有被保护的舱室之间可以相互控制设备；\n- 具体而言，如果两个被保护的舱室之间存在未被保护的舱室，则无法相互控制设备，这是不允许的。\n\n请你作为工程师，帮助 Squeaky 确定防护盾的最优放置方案，最大化被保护舱室的重要性总和，并保证控制连通性。", "inputFormat": "第一行三个整数 $N,\\ S,\\ K$，分别表示舱室数量、防护盾数量、防护盾的保护半径（单位：米）。\n\n第二行 $N - 1$ 个整数 $d_i$，第 $i$ 个舱室与第 $i+1$ 个舱室之间的距离。\n\n第三行 $N$ 个整数 $v_i$，第 $i$ 个舱室的重要性。\n", "outputFormat": "第一行一个整数 $T$，表示实际使用的防护盾数量，$0 \\leq T \\leq S$。\n\n第二行 $T$ 个整数，表示放置防护盾的舱室编号，顺序不限。若有多种方案都能达到最优，输出任意一种均可。\n", "hint": "【样例解释】\n\n对于样例 #1：  \n\n飞船的结构如下：  \n\n部署两个防护盾的最优位置是在第 $3$ 和第 $5$ 个舱室。  \n\n第 $3$ 个舱室的防护盾将保护第 $2, 3, 4$ 个舱室；第 $5$ 个舱室的防护盾将保护第 $5$ 个舱室。  \n\n注意，舱室 $4$ 和 $5$ 之间的通道没有完全被保护，这是允许的，因为通道上的电缆不会受到损害。  \n\n请注意，如果将两个防护盾部署在第 $3$ 和第 $6$ 个舱室，这不是一个合法方案，因为第 $5$ 个舱室会被太阳风暴损坏，导致第 $6$ 个舱室的船员无法控制第 $2, 3, 4$ 个舱室的设备。  \n\n对于样例 #2：  \n\n飞船的结构与样例 $1$ 相同，但防护盾的半径更大。  \n\n在第 $4$ 个舱室部署一个防护盾足以保护所有舱室。  \n\n注意，还有许多其他可接受的方案。  \n\n其他一些可选方案包括：  \n- 仅在第 $3$ 个舱室部署一个防护盾；  \n- 分别在第 $3$ 和第 $5$ 个舱室各部署一个防护盾；  \n- 在第 $3$ 个舱室部署两个防护盾。  \n\n所有能够最大化被保护舱室总重要性的合法方案都会被接受。  \n\n对于样例 #3：  \n\n飞船的结构与样例 $1$ 相同。  \n\n在第 $5$ 个舱室部署防护盾可以保护第 $5$ 和第 $6$ 个舱室，这是最优方案。  \n\n注意，同样也可以选择将防护盾部署在第 $6$ 个舱室，这也是最优的。  \n\n对于样例 #4：  \n\n最优方案是在第 $6$ 个舱室部署防护盾，这将保护第 $4, 5, 6, 7, 8$ 个舱室。  \n\n注意，同样也可以选择在第 $7$ 个舱室部署防护盾，这也是最优的。  \n\n对于样例 #5：  \n\n部署三个防护盾的最优位置是第 $3, 4, 5$ 个舱室。  \n\n【数据范围】\n\n- $1 \\leq S \\leq N \\leq 10^6$  \n- $1 \\leq K \\leq 10^{12}$  \n- $1 \\leq d_i \\leq 10^6$  \n- $1 \\leq v_i \\leq 10^6$  \n\n| 子任务编号 | 分值 |                           附加限制                           |\n| :--------: | :--: | :----------------------------------------------------------: |\n|    $1$     | $10$ | $S = 1,\\ N \\leq 10^4,\\ K \\leq 10^9,\\ d_i \\leq 10^5,\\ v_i \\leq 10^5$ |\n|    $2$     | $7$  |                      $S = 1,\\ d_i = 1$                       |\n|    $3$     | $11$ |                           $S = 1$                            |\n|    $4$     | $8$  |                      $K = 1,\\ d_i = 2$                       |\n|    $5$     | $18$ |                        $N \\leq 10^4$                         |\n|    $6$     | $16$ |                         $S \\leq 50$                          |\n|    $7$     | $30$ |                          无附加限制                          |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOISG 2020 Prelim] Solar Storm", "background": "", "description": "Squeaky 老鼠是宇宙飞船的船长，正在执行探索太阳系边界的任务。飞船呈长条状，沿着飞船的长度方向有一条笔直的通道，$N$ 个舱室连接在通道的不同位置。舱室从左到右编号为 $1$ 到 $N$，相邻舱室之间的距离不一定相等。\n\n每个舱室 $i$（$1 \\leq i \\leq N$）中都有重要的设备，用于支持飞船的运行，设备的重要性用正整数 $v_i$ 表示。相邻舱室之间有电缆连接，设备可以通过其他舱室远程控制。\n\n然而，一场太阳风暴即将袭击飞船！太阳风暴会释放大量带电粒子，如果不加保护，将会损坏飞船上的设备。\n\n幸运的是，船员随船携带了 $S$ 个防护盾。每个防护盾可以放置在任意舱室，也可以选择不使用。每个防护盾能在其所在位置产生磁场，保护半径为 $K$ 米，半径范围内的所有舱室设备都能被保护（包括防护盾所在的舱室）。\n\n需要注意：\n\n- 通道本身无需保护，因为电缆不受带电粒子的影响；\n- 为了方便后续操作，Squeaky 希望所有被保护的舱室之间可以相互控制设备；\n- 具体而言，如果两个被保护的舱室之间存在未被保护的舱室，则无法相互控制设备，这是不允许的。\n\n请你作为工程师，帮助 Squeaky 确定防护盾的最优放置方案，最大化被保护舱室的重要性总和，并保证控制连通性。", "inputFormat": "第一行三个整数 $N,\\ S,\\ K$，分别表示舱室数量、防护盾数量、防护盾的保护半径（单位：米）。\n\n第二行 $N - 1$ 个整数 $d_i$，第 $i$ 个舱室与第 $i+1$ 个舱室之间的距离。\n\n第三行 $N$ 个整数 $v_i$，第 $i$ 个舱室的重要性。\n", "outputFormat": "第一行一个整数 $T$，表示实际使用的防护盾数量，$0 \\leq T \\leq S$。\n\n第二行 $T$ 个整数，表示放置防护盾的舱室编号，顺序不限。若有多种方案都能达到最优，输出任意一种均可。\n", "hint": "【样例解释】\n\n对于样例 #1：  \n\n飞船的结构如下：  \n\n部署两个防护盾的最优位置是在第 $3$ 和第 $5$ 个舱室。  \n\n第 $3$ 个舱室的防护盾将保护第 $2, 3, 4$ 个舱室；第 $5$ 个舱室的防护盾将保护第 $5$ 个舱室。  \n\n注意，舱室 $4$ 和 $5$ 之间的通道没有完全被保护，这是允许的，因为通道上的电缆不会受到损害。  \n\n请注意，如果将两个防护盾部署在第 $3$ 和第 $6$ 个舱室，这不是一个合法方案，因为第 $5$ 个舱室会被太阳风暴损坏，导致第 $6$ 个舱室的船员无法控制第 $2, 3, 4$ 个舱室的设备。  \n\n对于样例 #2：  \n\n飞船的结构与样例 $1$ 相同，但防护盾的半径更大。  \n\n在第 $4$ 个舱室部署一个防护盾足以保护所有舱室。  \n\n注意，还有许多其他可接受的方案。  \n\n其他一些可选方案包括：  \n- 仅在第 $3$ 个舱室部署一个防护盾；  \n- 分别在第 $3$ 和第 $5$ 个舱室各部署一个防护盾；  \n- 在第 $3$ 个舱室部署两个防护盾。  \n\n所有能够最大化被保护舱室总重要性的合法方案都会被接受。  \n\n对于样例 #3：  \n\n飞船的结构与样例 $1$ 相同。  \n\n在第 $5$ 个舱室部署防护盾可以保护第 $5$ 和第 $6$ 个舱室，这是最优方案。  \n\n注意，同样也可以选择将防护盾部署在第 $6$ 个舱室，这也是最优的。  \n\n对于样例 #4：  \n\n最优方案是在第 $6$ 个舱室部署防护盾，这将保护第 $4, 5, 6, 7, 8$ 个舱室。  \n\n注意，同样也可以选择在第 $7$ 个舱室部署防护盾，这也是最优的。  \n\n对于样例 #5：  \n\n部署三个防护盾的最优位置是第 $3, 4, 5$ 个舱室。  \n\n【数据范围】\n\n- $1 \\leq S \\leq N \\leq 10^6$  \n- $1 \\leq K \\leq 10^{12}$  \n- $1 \\leq d_i \\leq 10^6$  \n- $1 \\leq v_i \\leq 10^6$  \n\n| 子任务编号 | 分值 |                           附加限制                           |\n| :--------: | :--: | :----------------------------------------------------------: |\n|    $1$     | $10$ | $S = 1,\\ N \\leq 10^4,\\ K \\leq 10^9,\\ d_i \\leq 10^5,\\ v_i \\leq 10^5$ |\n|    $2$     | $7$  |                      $S = 1,\\ d_i = 1$                       |\n|    $3$     | $11$ |                           $S = 1$                            |\n|    $4$     | $8$  |                      $K = 1,\\ d_i = 2$                       |\n|    $5$     | $18$ |                        $N \\leq 10^4$                         |\n|    $6$     | $16$ |                         $S \\leq 50$                          |\n|    $7$     | $30$ |                          无附加限制                          |", "locale": "zh-CN"}}}
{"pid": "P12934", "type": "P", "difficulty": 5, "samples": [["2\n5 7 1\n1 9 2", "5"], ["3\n1 10 4\n6 12 3\n9 13 2", "4"], ["3\n1 13 4\n6 11 2\n9 13 3", "4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "ICPC", "NERC/NEERC"], "title": "[NERC 2019] Apprentice Learning Trajectory", "background": "", "description": "Abigail is an apprentice studying to become a blacksmith. She wants to plan her learning trajectory and make as many swords as possible on her way to becoming a famous expert.\n\nThere are $n$ masters willing to host her as their apprentice. The $i$-th master will start working at the minute $a_i$ and end working at the minute $b_i$, working for a total of $b_i - a_i$ minutes. During this interval of time, Abigail can work at this master's forge. She can enter and leave the forge several times and produce one or several swords upon each arrival. However, in order to produce a sword under supervision of the $i$-th master she has to work there for $t_i$ minutes in a row. She can't leave the sword unfinished and continue working on it upon her next arrival to this forge.\n\nHelp Abigail make an optimal plan and calculate the maximum number of swords she can produce under the supervision of $n$ masters.", "inputFormat": "The first line contains integer $n$ ($1 \\le n \\le 200\\,000$) --- the number of masters.\n\nEach of the next $n$ lines contains three integers $a_i, b_i, t_i$ ($1 \\le a_i < a_i + t_i \\le b_i \\le 10^{18}$) --- the start and the end time of master's work, and the time needed to make one sword in their forge.", "outputFormat": "Output the maximum number of swords Abigail can produce using the optimal learning trajectory.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/pt30ioq8.png)", "locale": "en", "translations": {"en": {"title": "[NERC 2019] Apprentice Learning Trajectory", "background": "", "description": "Abigail is an apprentice studying to become a blacksmith. She wants to plan her learning trajectory and make as many swords as possible on her way to becoming a famous expert.\n\nThere are $n$ masters willing to host her as their apprentice. The $i$-th master will start working at the minute $a_i$ and end working at the minute $b_i$, working for a total of $b_i - a_i$ minutes. During this interval of time, Abigail can work at this master's forge. She can enter and leave the forge several times and produce one or several swords upon each arrival. However, in order to produce a sword under supervision of the $i$-th master she has to work there for $t_i$ minutes in a row. She can't leave the sword unfinished and continue working on it upon her next arrival to this forge.\n\nHelp Abigail make an optimal plan and calculate the maximum number of swords she can produce under the supervision of $n$ masters.", "inputFormat": "The first line contains integer $n$ ($1 \\le n \\le 200\\,000$) --- the number of masters.\n\nEach of the next $n$ lines contains three integers $a_i, b_i, t_i$ ($1 \\le a_i < a_i + t_i \\le b_i \\le 10^{18}$) --- the start and the end time of master's work, and the time needed to make one sword in their forge.", "outputFormat": "Output the maximum number of swords Abigail can produce using the optimal learning trajectory.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/pt30ioq8.png)", "locale": "en"}, "zh-CN": {"title": "[NERC 2019] Apprentice Learning Trajectory", "background": "", "description": "Abigail 是一名学徒，正在学习成为一名铁匠。她希望规划自己的学习轨迹，并在成为著名专家的道路上尽可能多地锻造剑。\n\n共有 $n$ 位大师愿意收她为徒。第 $i$ 位大师将在第 $a_i$ 分钟开始工作，并在第 $b_i$ 分钟结束工作，总共工作 $b_i - a_i$ 分钟。在这段时间内，Abigail 可以在这位大师的铁匠铺中工作。她可以多次进入和离开铁匠铺，并在每次到达时锻造一把或多把剑。然而，为了在第 $i$ 位大师的指导下锻造一把剑，她必须连续工作 $t_i$ 分钟。她不能留下未完成的剑，并在下次到达铁匠铺时继续锻造。\n\n请帮助 Abigail 制定一个最优计划，并计算她在 $n$ 位大师的指导下可以锻造的剑的最大数量。", "inputFormat": "第一行包含一个整数 $n$（$1 \\le n \\le 200\\,000$）—— 大师的数量。\n\n接下来的 $n$ 行，每行包含三个整数 $a_i$, $b_i$, $t_i$（$1 \\le a_i < a_i + t_i \\le b_i \\le 10^{18}$）—— 大师工作的开始和结束时间，以及在其铁匠铺中锻造一把剑所需的时间。\n", "outputFormat": "输出 Abigail 使用最优学习轨迹可以锻造的剑的最大数量。\n", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/pt30ioq8.png)\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
