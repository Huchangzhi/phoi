{"pid": "P6565", "type": "P", "difficulty": 1, "samples": [["2\nadam\nineedhelpsosineedhelpsos\nmark\nineedmorehelpsoshelpmesossoshelpme", "mark\n3"], ["3\nsusan\nsosososososos\njack\nsossossossos\nallen\nsoshelpsossossossossos", "susan allen\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "NOI Online"], "title": "[NOI Online #3 入门组] 最急救助", "background": "", "description": "救助中心每天都要收到很多求救信号。收到求救信号后，救助中心会分析求救信号，找出最紧急的求救者给予救助。\n\n求救信号是一个由小写英文字母组成的字符串，字符串中连续三个字符依次组成`sos`的情况越多（即包含子串`sos`的数目越多），代表着求救者情况越紧急。\n\n现在请你帮助救助中心找出最紧急的求救者。注意字符串中包含的`sos`可以有重叠，例如`sosos`算作包含 $2$ 个`sos`。", "inputFormat": "从标准输入读入数据。\n\n第一行一个整数 $n$，表示求救者的数目。\n\n接下来有 $2\\times n$ 行，每行一个由小写英文字母组成的字符串。这 $2\\times n$ 行中，第 $2\\times i-1$（$1\\le i\\le n$）行的字符串表示第 $i$ 个求救者的名字，第 $2\\times i$ 行的字符串表示第 $i$ 个求救者的求救信号。", "outputFormat": "输出到标准输出。\n\n输出共两行，第一行是最紧急求救者的名字。如果最紧急求救者有多个，则按照输入的顺序将他们的名字依次输出，相邻两个名字间用空格分隔。\n\n第二行一个整数，表示最紧急求救者的求救信号中包含有多少个`sos`子串。", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，$n=1$。\n- 对于所有数据，$1 \\leq n\\le 100$，求救者名字长度不超过 $20$，求救信号长度不超过 $200$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online #3 入门组] 最急救助", "background": "", "description": "救助中心每天都要收到很多求救信号。收到求救信号后，救助中心会分析求救信号，找出最紧急的求救者给予救助。\n\n求救信号是一个由小写英文字母组成的字符串，字符串中连续三个字符依次组成`sos`的情况越多（即包含子串`sos`的数目越多），代表着求救者情况越紧急。\n\n现在请你帮助救助中心找出最紧急的求救者。注意字符串中包含的`sos`可以有重叠，例如`sosos`算作包含 $2$ 个`sos`。", "inputFormat": "从标准输入读入数据。\n\n第一行一个整数 $n$，表示求救者的数目。\n\n接下来有 $2\\times n$ 行，每行一个由小写英文字母组成的字符串。这 $2\\times n$ 行中，第 $2\\times i-1$（$1\\le i\\le n$）行的字符串表示第 $i$ 个求救者的名字，第 $2\\times i$ 行的字符串表示第 $i$ 个求救者的求救信号。", "outputFormat": "输出到标准输出。\n\n输出共两行，第一行是最紧急求救者的名字。如果最紧急求救者有多个，则按照输入的顺序将他们的名字依次输出，相邻两个名字间用空格分隔。\n\n第二行一个整数，表示最紧急求救者的求救信号中包含有多少个`sos`子串。", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，$n=1$。\n- 对于所有数据，$1 \\leq n\\le 100$，求救者名字长度不超过 $20$，求救信号长度不超过 $200$。\n\n", "locale": "zh-CN"}}}
{"pid": "P6566", "type": "P", "difficulty": 2, "samples": [["5 7\n*......\n..**..*\n.*...*.\n...*...\n....*..", "3 4"], ["10 10\n**..**.**.\n***....*..\n*...**.**.\n...*..*...\n..........\n**...**.*.\n..*.*....*\n..........\n***..*.*..\n.***..*...", "4 12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "2020", "广度优先搜索 BFS", "深度优先搜索 DFS", "NOI Online"], "title": "[NOI Online #3 入门组] 观星", "background": "脚造数据一组，欢迎hack", "description": "Jimmy 和 Symbol 约好一起看星星，浩瀚的星空可视为一个长为 $N$、宽为 $M$ 的矩阵，矩阵中共有 $N\\times M$ 个位置，一个位置可以用坐标 $(i,j)$（$1\\le i\\le N$，$1\\le j\\le M$）来表示。每个位置上可能是空的，也可能有一个星星。\n\n对于一个位置 $(i,j)$，与其相邻的位置有左边、左上、上面、右上、右边、右下、下面、左下 8 个位置。相邻位置上的星星被视为同一个星座，这种关系有传递性，例如若 $(1,1),(1,2),(1,3)$ 三个\n位置上都有星星，那么这三个星星视为同一个星座。包含的星星数量相同的星座被视为一个星系（一个星系中的星座不一定相邻），星系的大小为星系中包含的所有星星数量。\n\n由于 Symbol 太喜欢星系了，他就想考一考 Jimmy，让 Jimmy 求出星空中有多少个星系，他还想知道，最大的星系有多大。", "inputFormat": "第一行两个整数 $N,M$ 表示矩阵的长宽。\n\n接下来 $N$ 行每行 $M$ 个字符，每个字符只可能是`.`或`*`。这 $N$ 行中第 $i$ 行的第 $j$ 个字符是`*`表示位置 $(i,j)$ 上有一个星星，否则表示它是空的。", "outputFormat": "仅一行两个整数，用空格分隔开，分别表示星系的数量与最大星系的大小。", "hint": "对于 $20\\%$ 的数据，$N,M\\le 20$，最大星系大小不超过 200。\n\n对于 $50\\%$ 的数据，$N,M\\le 400$。\n\n对于 $70\\%$ 的数据，$N,M\\le 1100$。\n\n对于 $100\\%$ 的数据，$2\\le N,M\\le 1500$，最大星系大小不超过 100000。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online #3 入门组] 观星", "background": "脚造数据一组，欢迎hack", "description": "Jimmy 和 Symbol 约好一起看星星，浩瀚的星空可视为一个长为 $N$、宽为 $M$ 的矩阵，矩阵中共有 $N\\times M$ 个位置，一个位置可以用坐标 $(i,j)$（$1\\le i\\le N$，$1\\le j\\le M$）来表示。每个位置上可能是空的，也可能有一个星星。\n\n对于一个位置 $(i,j)$，与其相邻的位置有左边、左上、上面、右上、右边、右下、下面、左下 8 个位置。相邻位置上的星星被视为同一个星座，这种关系有传递性，例如若 $(1,1),(1,2),(1,3)$ 三个\n位置上都有星星，那么这三个星星视为同一个星座。包含的星星数量相同的星座被视为一个星系（一个星系中的星座不一定相邻），星系的大小为星系中包含的所有星星数量。\n\n由于 Symbol 太喜欢星系了，他就想考一考 Jimmy，让 Jimmy 求出星空中有多少个星系，他还想知道，最大的星系有多大。", "inputFormat": "第一行两个整数 $N,M$ 表示矩阵的长宽。\n\n接下来 $N$ 行每行 $M$ 个字符，每个字符只可能是`.`或`*`。这 $N$ 行中第 $i$ 行的第 $j$ 个字符是`*`表示位置 $(i,j)$ 上有一个星星，否则表示它是空的。", "outputFormat": "仅一行两个整数，用空格分隔开，分别表示星系的数量与最大星系的大小。", "hint": "对于 $20\\%$ 的数据，$N,M\\le 20$，最大星系大小不超过 200。\n\n对于 $50\\%$ 的数据，$N,M\\le 400$。\n\n对于 $70\\%$ 的数据，$N,M\\le 1100$。\n\n对于 $100\\%$ 的数据，$2\\le N,M\\le 1500$，最大星系大小不超过 100000。", "locale": "zh-CN"}}}
{"pid": "P6567", "type": "P", "difficulty": 3, "samples": [["3 5\n1 2\n5 1\n6 3\n3 19 21 1 7", "No\nYes\nNo\nYes\nYes\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2020", "NOI Online"], "title": "[NOI Online #3 入门组] 买表", "background": "", "description": "Jimmy 到 Symbol 的手表店买手表，Jimmy 只带了 $n$ 种钱币，第 $i$ 种钱币的面额为 $k_i$ 元，张数为 $a_i$ 张。Symbol 的店里一共有 $m$ 块手表，第 $i$ 块手表的价格为 $t_i$ 元。\n\nSymbol 的手表店不能找零，所以 Jimmy 只能在凑出恰好的钱数时才能购买一块手表。现在对于店里的每块手表，Jimmy 想知道他能不能凑出恰好的钱数进行购买。\n", "inputFormat": "第一行两个空格分隔的整数 $n$ 和 $m$ 表示钱币数与手表数。\n\n接下来 $n$ 行每行两个空格分隔的整数 $k_i$ 和 $a_i$ 表示钱币的面额和张数。\n\n第 $n+2$ 行，共 $m$ 个用空格分隔的整数 $t_i$，表示每块手表的价格。\n", "outputFormat": "一共 $m$ 行，对于第 $i$ 行，如果能凑出恰好的钱数购买第 $i$ 块手表则输出 `Yes` 否则输出 `No`，注意只有首字母大写。", "hint": "#### 样例 1 解释\n\n- 第二块手表 $19=6 \\times 3+1=6 \\times 2+5+1 \\times 2$，可以恰好凑出。\n- 第四块手表 $1=1 \\times 1$，可以恰好凑出。\n- 第五块手表 $7=5+2\\times 1=6 \\times 1+1$，可以恰好凑出。\n\n#### 数据规模与约定\n- 对于 $50\\%$ 的数据，保证 $n\\leq 10$，$m \\leq 60$，$a_i \\leq 20$，$k_i \\leq 5000$，$t_i \\leq 250$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 200$，$1 \\leq m \\leq 10^5$，$1 \\leq a_i \\leq 1000$，$1 \\leq k_i \\leq 500000$，$0 \\leq t_i \\leq 500000$。\n\n#### 说明\n\ndata provider：@皎月半洒花。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online #3 入门组] 买表", "background": "", "description": "Jimmy 到 Symbol 的手表店买手表，Jimmy 只带了 $n$ 种钱币，第 $i$ 种钱币的面额为 $k_i$ 元，张数为 $a_i$ 张。Symbol 的店里一共有 $m$ 块手表，第 $i$ 块手表的价格为 $t_i$ 元。\n\nSymbol 的手表店不能找零，所以 Jimmy 只能在凑出恰好的钱数时才能购买一块手表。现在对于店里的每块手表，Jimmy 想知道他能不能凑出恰好的钱数进行购买。\n", "inputFormat": "第一行两个空格分隔的整数 $n$ 和 $m$ 表示钱币数与手表数。\n\n接下来 $n$ 行每行两个空格分隔的整数 $k_i$ 和 $a_i$ 表示钱币的面额和张数。\n\n第 $n+2$ 行，共 $m$ 个用空格分隔的整数 $t_i$，表示每块手表的价格。\n", "outputFormat": "一共 $m$ 行，对于第 $i$ 行，如果能凑出恰好的钱数购买第 $i$ 块手表则输出 `Yes` 否则输出 `No`，注意只有首字母大写。", "hint": "#### 样例 1 解释\n\n- 第二块手表 $19=6 \\times 3+1=6 \\times 2+5+1 \\times 2$，可以恰好凑出。\n- 第四块手表 $1=1 \\times 1$，可以恰好凑出。\n- 第五块手表 $7=5+2\\times 1=6 \\times 1+1$，可以恰好凑出。\n\n#### 数据规模与约定\n- 对于 $50\\%$ 的数据，保证 $n\\leq 10$，$m \\leq 60$，$a_i \\leq 20$，$k_i \\leq 5000$，$t_i \\leq 250$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 200$，$1 \\leq m \\leq 10^5$，$1 \\leq a_i \\leq 1000$，$1 \\leq k_i \\leq 500000$，$0 \\leq t_i \\leq 500000$。\n\n#### 说明\n\ndata provider：@皎月半洒花。", "locale": "zh-CN"}}}
{"pid": "P6568", "type": "P", "difficulty": 2, "samples": [["10\n5\n890 965 256 419 296 987 45 676 976 742\n", "3813"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2020", "前缀和", "NOI Online"], "title": "[NOI Online #3 提高组] 水壶", "background": "", "description": "有 $n$ 个容量无穷大的水壶，它们从 $1\\sim n$ 编号，初始时 $i$ 号水壶中装有 $A_i$ 单位的水。\n\n你可以进行不超过 $k$ 次操作，每次操作需要选择一个满足 $1\\le x\\le n-1$ 的编号 $x$，然后把 $x$ 号水壶中的水全部倒入 $x+1$ 号水壶中。\n\n最后你可以任意选择恰好一个水壶，并喝掉水壶中所有的水。现在请你求出，你最多能喝到多少单位的水。", "inputFormat": "第一行一个正整数 $n$，表示水壶的个数。\n\n第二行一个非负整数 $k$，表示操作次数上限。\n\n第三行 $n$ 个非负整数，相邻两个数用空格隔开，表示水壶的初始装水量 $A_1$, $A_2$, $\\cdots$, $A_n$。", "outputFormat": "一行，仅一个非负整数，表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，保证 $n \\leq 10$。\n- 对于 $30\\%$ 的数据，保证 $n \\leq 100$。\n- 对于 $50\\%$ 的数据，保证 $n \\leq 10^3$。\n- 对于 $70\\%$ 的数据，保证 $n \\leq 10^5$。\n- 对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^6$，$0\\leq k \\leq n-1$，$0\\le A_i\\le 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online #3 提高组] 水壶", "background": "", "description": "有 $n$ 个容量无穷大的水壶，它们从 $1\\sim n$ 编号，初始时 $i$ 号水壶中装有 $A_i$ 单位的水。\n\n你可以进行不超过 $k$ 次操作，每次操作需要选择一个满足 $1\\le x\\le n-1$ 的编号 $x$，然后把 $x$ 号水壶中的水全部倒入 $x+1$ 号水壶中。\n\n最后你可以任意选择恰好一个水壶，并喝掉水壶中所有的水。现在请你求出，你最多能喝到多少单位的水。", "inputFormat": "第一行一个正整数 $n$，表示水壶的个数。\n\n第二行一个非负整数 $k$，表示操作次数上限。\n\n第三行 $n$ 个非负整数，相邻两个数用空格隔开，表示水壶的初始装水量 $A_1$, $A_2$, $\\cdots$, $A_n$。", "outputFormat": "一行，仅一个非负整数，表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $10\\%$ 的数据，保证 $n \\leq 10$。\n- 对于 $30\\%$ 的数据，保证 $n \\leq 100$。\n- 对于 $50\\%$ 的数据，保证 $n \\leq 10^3$。\n- 对于 $70\\%$ 的数据，保证 $n \\leq 10^5$。\n- 对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 10^6$，$0\\leq k \\leq n-1$，$0\\le A_i\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P6569", "type": "P", "difficulty": 5, "samples": [["3 3 1\n0 0 1\n1 2\n1 3\n2 3\n1\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "倍增", "矩阵运算", "NOI Online"], "title": "[NOI Online #3 提高组] 魔法值", "background": null, "description": "H 国的交通由 $n$ 座城市与 $m$ 条道路构成，城市与道路都从 $1$ 开始编号，其中 $1$ 号城市是 H 国的首都。H 国中一条道路将把两个不同城市直接相连，且任意两个城市间至多有一条道路。\n\nH 国是一个信奉魔法的国家，在第 $j$ 天，$i$ 号城市的魔法值为 $f_{i,j}$。H 国的魔法师已观测到第 0 天时所有城市的魔法值 $f_{i,0}$，且他们还发现，之后的每一天每个城市的魔法值，都将会变为所有与该城市直接相连的城市的前一天魔法值的异或值，即\n\n$$\nf_{x,j}=f_{v_1,j-1}\\oplus f_{v_2,j-1}\\oplus \\cdots\\oplus f_{v_k,j-1}\n$$\n\n其中 $j\\ge 1$，$v_1,v_2,\\cdots,v_k$ 是所有与 $x$ 号城市直接相连的城市，$\\oplus$ 为异或运算。\n\n现在 H 国的国王问了你 $q$ 个问题，对于第 $i$（$1\\le i\\le q$）个问题你需要回答：第 $a_i$ 天时首都的魔法值是多少。", "inputFormat": "第一行三个用空格分隔的整数 $n,m,q$，表示城市数、道路数与问题数。\n\n第二行 $n$ 个用空格分隔的整数，第 $i$ 个整数表示 $f_{i, 0}$。\n\n接下来 $m$ 行，每行两个用空格分隔的正整数 $u,v$，表示一条连接 $u$ 号城市与 $v$ 号城市的道路。\n\n接下来 $q$ 行每行一个整数，第 $i$ 行的整数表示 $a_i$。", "outputFormat": "按顺序输出 $q$ 行每行一个整数，表示对应问题的答案。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，满足 $a_i \\leq 100$。\n- 对于 $40\\%$ 的数据，满足 $n \\leq 20$。\n- 另有 $30\\%$ 的数据，满足 $m=\\frac{n(n-1)}{2}$。\n- 对于 $100\\%$ 的数据，满足 $1 \\leq n,q \\leq 100$，$1 \\leq m \\leq \\frac{n(n-1)}{2}$，$1\\leq a_i < 2^{32}$，$0\\leq f_{i,0} < 2^{32}$。\n\n#### 说明\n\ndata provider ：@一扶苏一，数据有锅请联系她。如果被朴素的快速幂水过去了也请联系她。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online #3 提高组] 魔法值", "background": null, "description": "H 国的交通由 $n$ 座城市与 $m$ 条道路构成，城市与道路都从 $1$ 开始编号，其中 $1$ 号城市是 H 国的首都。H 国中一条道路将把两个不同城市直接相连，且任意两个城市间至多有一条道路。\n\nH 国是一个信奉魔法的国家，在第 $j$ 天，$i$ 号城市的魔法值为 $f_{i,j}$。H 国的魔法师已观测到第 0 天时所有城市的魔法值 $f_{i,0}$，且他们还发现，之后的每一天每个城市的魔法值，都将会变为所有与该城市直接相连的城市的前一天魔法值的异或值，即\n\n$$\nf_{x,j}=f_{v_1,j-1}\\oplus f_{v_2,j-1}\\oplus \\cdots\\oplus f_{v_k,j-1}\n$$\n\n其中 $j\\ge 1$，$v_1,v_2,\\cdots,v_k$ 是所有与 $x$ 号城市直接相连的城市，$\\oplus$ 为异或运算。\n\n现在 H 国的国王问了你 $q$ 个问题，对于第 $i$（$1\\le i\\le q$）个问题你需要回答：第 $a_i$ 天时首都的魔法值是多少。", "inputFormat": "第一行三个用空格分隔的整数 $n,m,q$，表示城市数、道路数与问题数。\n\n第二行 $n$ 个用空格分隔的整数，第 $i$ 个整数表示 $f_{i, 0}$。\n\n接下来 $m$ 行，每行两个用空格分隔的正整数 $u,v$，表示一条连接 $u$ 号城市与 $v$ 号城市的道路。\n\n接下来 $q$ 行每行一个整数，第 $i$ 行的整数表示 $a_i$。", "outputFormat": "按顺序输出 $q$ 行每行一个整数，表示对应问题的答案。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，满足 $a_i \\leq 100$。\n- 对于 $40\\%$ 的数据，满足 $n \\leq 20$。\n- 另有 $30\\%$ 的数据，满足 $m=\\frac{n(n-1)}{2}$。\n- 对于 $100\\%$ 的数据，满足 $1 \\leq n,q \\leq 100$，$1 \\leq m \\leq \\frac{n(n-1)}{2}$，$1\\leq a_i < 2^{32}$，$0\\leq f_{i,0} < 2^{32}$。\n\n#### 说明\n\ndata provider ：@一扶苏一，数据有锅请联系她。如果被朴素的快速幂水过去了也请联系她。", "locale": "zh-CN"}}}
{"pid": "P6570", "type": "P", "difficulty": 6, "samples": [["4\n1 2 2 3", "12"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "NOI Online"], "title": "[NOI Online #3 提高组] 优秀子序列", "background": "", "description": "给定一个长度为 $n$ 的非负整数序列 $A=\\{a_1,a_2,\\cdots,a_n\\}$，对于 $A$ 的一个子序列 $B=\\{a_{b_1},a_{b_2},\\cdots,a_{b_m}\\}$（$0\\le m\\le n$，$1\\le b_1<b_2<\\cdots<b_m\\le n$，下同），称 $B$ 是 $A$ 的优秀子序列当且仅当，其任意两个不同元素的按位与结果均为 $0$，即：$\\forall 1\\le i<j\\le m$，满足：$a_{b_i}~\\mathrm{and}~a_{b_j}=0$，其中 $~\\mathrm{and}~$   是按位与运算。\n\n对于子序列 $B=\\{a_{b_1},a_{b_2},\\cdots,a_{b_m}\\}$，我们定义其价值为 $\\varphi(1+\\sum_{i=1}^m a_{b_i})$，其中 $\\varphi(x)$ 表示小等于 $x$ 的正整数中与 $x$ 互质的数的个数。\n\n现在请你求出 $A$ 的所有优秀子序列的价值之和，答案对 $10^9+7$ 取模。", "inputFormat": "第一行一个正整数 $n$ 表示序列长度。\n\n第二行 $n$ 个用空格分隔的非负整数，表示 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "仅一行一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "#### 样例 1 解释\n符合条件的子序列有：$\\emptyset$，$\\{1\\}$，$\\{2\\}$，$\\{2\\}$，$\\{3\\}$，$\\{1,2\\}$，$\\{1,2\\}$，它们价值依次为 $1$，$1$，$2$，$2$，$2$，$2$，$2$，总和为 $12$。\n\n#### 数据规模与约定\n- 对于 $10\\%$ 的数据，保证 $a_i\\le 1$。\n- 对于 $30\\%$ 的数据，保证 $a_i\\le 1000$。\n- 对于 $60\\%$ 的数据，保证 $a_i\\le 30000$。\n- 另有 $10\\%$ 的数据，保证 $n\\le 20$。\n- 对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^6$，$0\\le a_i\\le 2\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI Online #3 提高组] 优秀子序列", "background": "", "description": "给定一个长度为 $n$ 的非负整数序列 $A=\\{a_1,a_2,\\cdots,a_n\\}$，对于 $A$ 的一个子序列 $B=\\{a_{b_1},a_{b_2},\\cdots,a_{b_m}\\}$（$0\\le m\\le n$，$1\\le b_1<b_2<\\cdots<b_m\\le n$，下同），称 $B$ 是 $A$ 的优秀子序列当且仅当，其任意两个不同元素的按位与结果均为 $0$，即：$\\forall 1\\le i<j\\le m$，满足：$a_{b_i}~\\mathrm{and}~a_{b_j}=0$，其中 $~\\mathrm{and}~$   是按位与运算。\n\n对于子序列 $B=\\{a_{b_1},a_{b_2},\\cdots,a_{b_m}\\}$，我们定义其价值为 $\\varphi(1+\\sum_{i=1}^m a_{b_i})$，其中 $\\varphi(x)$ 表示小等于 $x$ 的正整数中与 $x$ 互质的数的个数。\n\n现在请你求出 $A$ 的所有优秀子序列的价值之和，答案对 $10^9+7$ 取模。", "inputFormat": "第一行一个正整数 $n$ 表示序列长度。\n\n第二行 $n$ 个用空格分隔的非负整数，表示 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "仅一行一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "#### 样例 1 解释\n符合条件的子序列有：$\\emptyset$，$\\{1\\}$，$\\{2\\}$，$\\{2\\}$，$\\{3\\}$，$\\{1,2\\}$，$\\{1,2\\}$，它们价值依次为 $1$，$1$，$2$，$2$，$2$，$2$，$2$，总和为 $12$。\n\n#### 数据规模与约定\n- 对于 $10\\%$ 的数据，保证 $a_i\\le 1$。\n- 对于 $30\\%$ 的数据，保证 $a_i\\le 1000$。\n- 对于 $60\\%$ 的数据，保证 $a_i\\le 30000$。\n- 另有 $10\\%$ 的数据，保证 $n\\le 20$。\n- 对于 $100\\%$ 的数据，保证 $1\\le n\\le 10^6$，$0\\le a_i\\le 2\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P6571", "type": "P", "difficulty": 5, "samples": [["5 3\n2 1 2\n3 0 2 3\n3 0 1 4\n2 1 4\n2 2 3\n", "3"], ["5 3\n3 1 2 4\n1 0\n1 0\n0\n1 0\n", "2"]], "limits": {"time": [1000, 1000, 2000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["2017", "BalticOI（波罗的海）"], "title": "[BalticOI 2017] Political Development", "background": "", "description": "某个有 $n$ 个成员的政党想要发展一些全新的政策。为了做到这一点，这个政党计划为了新的政策的发展，建立一个委员会。显然，当所有委员会委员的意见都不一致，并且这个委员会尽量大的时候，政策得以最好地发展。  \n为了指出哪一对政治家的意见不一致以及哪一对意见一致，政党安排每一对可能的政治家讨论一个随机选择的话题。无论何时，如果两个政治家不能在指定的话题上达成统一意见，他们就会被记录在政党的功德册上。  \n带着这本书，你被指定去完成找出最大的委员会，使得所有的委员的意见都不一致的任务。然而，找到一个大的委员会是非常有挑战的。仔细的分析结果显示，对于任意一个由党员所组成的非空的小组，存在至少一个小组成员，使得小组中与他的意见不一致的成员严格少于 $k$ 个。那么显然委员会不能有多于 $k$ 个成员。但是能够选出一个这个大小的委员会吗？找到最大的委员会的大小，使得其中没有人的意见是一致的。\n\n---\n\n一句话题意：\n\n给一个图，满足对于任意点导出子图，存在一个节点的度数小于 $k$，求原图的最大团。", "inputFormat": "第一行包含两个整数 $n$ 和 $k$，$n$ 表示点的个数，$k$ 如上所述。  \n每个点用一个 $0$ 到 $n-1$ 之间的整数 $i$ 表示。  \n接下来的 $n$ 行，每行描述一个点 $i$，从 $i=0$ 开始。第 $i$ 行以一个整数 $d_i$ 开始，接下来是 $d_i$ 个整数，表示与第 $i$ 个点相连的点。", "outputFormat": "输出仅一行一个整数，表示原图的最大团。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（4 pts）：$k \\le 2$，$n \\le 5 \\times 10^3$。\n- Subtask 2（12 pts）：$k \\le 3$，$n \\le 5 \\times 10^3$。\n- Subtask 3（23 pts）：$d_i \\le 10$。\n- Subtask 4（38 pts）：$n \\le 5 \\times 10^3$。\n- Subtask 5（23 pts）：$ k \\le 5$。\n\n对于 $100\\%$ 的数据，$0 \\le d_i<n\\le 5 \\times 10^4$，$1 \\le k \\le 10$。\n\n#### 说明\n\n**翻译自 [BOI 2017 D1](https://boi.cses.fi/files/boi2017_day1.pdf) T1 Political Development。**  \n翻译者：@[FZzzz](https://www.luogu.com.cn/user/174045)。   \n~~所以这题提供者为什么还是菜鸡书虫呢，小编也不知道，欢迎私下跟小编讨论吖~~", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2017] Political Development", "background": "", "description": "某个有 $n$ 个成员的政党想要发展一些全新的政策。为了做到这一点，这个政党计划为了新的政策的发展，建立一个委员会。显然，当所有委员会委员的意见都不一致，并且这个委员会尽量大的时候，政策得以最好地发展。  \n为了指出哪一对政治家的意见不一致以及哪一对意见一致，政党安排每一对可能的政治家讨论一个随机选择的话题。无论何时，如果两个政治家不能在指定的话题上达成统一意见，他们就会被记录在政党的功德册上。  \n带着这本书，你被指定去完成找出最大的委员会，使得所有的委员的意见都不一致的任务。然而，找到一个大的委员会是非常有挑战的。仔细的分析结果显示，对于任意一个由党员所组成的非空的小组，存在至少一个小组成员，使得小组中与他的意见不一致的成员严格少于 $k$ 个。那么显然委员会不能有多于 $k$ 个成员。但是能够选出一个这个大小的委员会吗？找到最大的委员会的大小，使得其中没有人的意见是一致的。\n\n---\n\n一句话题意：\n\n给一个图，满足对于任意点导出子图，存在一个节点的度数小于 $k$，求原图的最大团。", "inputFormat": "第一行包含两个整数 $n$ 和 $k$，$n$ 表示点的个数，$k$ 如上所述。  \n每个点用一个 $0$ 到 $n-1$ 之间的整数 $i$ 表示。  \n接下来的 $n$ 行，每行描述一个点 $i$，从 $i=0$ 开始。第 $i$ 行以一个整数 $d_i$ 开始，接下来是 $d_i$ 个整数，表示与第 $i$ 个点相连的点。", "outputFormat": "输出仅一行一个整数，表示原图的最大团。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（4 pts）：$k \\le 2$，$n \\le 5 \\times 10^3$。\n- Subtask 2（12 pts）：$k \\le 3$，$n \\le 5 \\times 10^3$。\n- Subtask 3（23 pts）：$d_i \\le 10$。\n- Subtask 4（38 pts）：$n \\le 5 \\times 10^3$。\n- Subtask 5（23 pts）：$ k \\le 5$。\n\n对于 $100\\%$ 的数据，$0 \\le d_i<n\\le 5 \\times 10^4$，$1 \\le k \\le 10$。\n\n#### 说明\n\n**翻译自 [BOI 2017 D1](https://boi.cses.fi/files/boi2017_day1.pdf) T1 Political Development。**  \n翻译者：@[FZzzz](https://www.luogu.com.cn/user/174045)。   \n~~所以这题提供者为什么还是菜鸡书虫呢，小编也不知道，欢迎私下跟小编讨论吖~~", "locale": "zh-CN"}}}
{"pid": "P6572", "type": "P", "difficulty": 5, "samples": [["6 3 2\n1 3\n2 3\n3 4\n6 4\n4 5\n4 1 3 2 5\n2 6 3\n2 3 2", "2\n2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2017", "虚树", "差分", "BalticOI（波罗的海）"], "title": "[BalticOI 2017] Railway", "background": "Bergen 基础设施建设部在一年前就有了把所有的城市用道路连起来的想法。  \n可惜的是，过了一年了，这个计划烂尾了。  \n所以，基础设施建设部部长就准备重启这个计划，然后把它搞得简单亿点。", "description": "原定的计划是有 $n$ 个城市用 $n-1$ 个道路连起来。    \n现在有 $m$ 个副部长，每个副部长都认为有一些城市是必须连起来的。  \n比如说这个副部长想把 $a$ 和 $c$ 连起来，有两条道路 $a - b$ 和 $b - c$，那么副部长的要求等价过来就是选择这两条道路。  \n现在要找出几条道路是至少 $k$ 个副部长选择的。  \n部长就找到了您，想让您找出这几条道路。", "inputFormat": "第一行三个整数 $n,m,k$ 代表城市数，副部长数和最少需要满足多少个副部长。  \n接下来 $n-1$ 行每行两个整数 $a_i$ 和 $b_i$ 代表第 $i$ 条道路是 $a_i$ 和 $b_i$ 之间的。  \n这 $n-1$ 个道路的编号就是 $1$ 到 $n-1$。  \n接下来 $m$ 行首先一个整数 $s_i$ 代表这个副部长觉得有 $s_i$ 个城市需要相连，接下来 $s_i$ 个整数代表副部长觉得哪些城市需要相连。", "outputFormat": "第一行一个整数 $r$ 代表至少满足 $k$ 个副部长的道路有多少个。  \n第二行 $r$ 个整数代表要搭建编号为哪些的道路的升序排列。", "hint": "#### 样例说明\n\n$3$ 个副部长的要求如下：\n\n- $1-3,2-3,3-4,4-5$\n- $3-4,4-6$\n- $2-3$\n\n至少满足 $2$ 个副部长的道路为 $2$ 号和 $3$ 号。\n\n#### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$n \\le 10^4$，$\\sum s_i \\le 2 \\times 10^3$。\n- Subtask 2（15 pts）：$n \\le 10^4$，$m \\le 2 \\times 10^3$。\n- Subtask 3（7 pts）：每个城市最多是 $2$ 条道路的端点。\n- Subtask 4（29 pts）：$k=m$，$s_i=2$。\n- Subtask 5（16 pts）：$k=m$。\n- Subtask 6（25 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\le s_i \\le n \\le 10^5$，$1 \\le k \\le m \\le 5 \\times 10^4$，$\\sum s_i \\le 10^5$。\n\n#### 说明\n\n**翻译自 [BOI 2017 D1](https://boi.cses.fi/files/boi2017_day1.pdf) T2 Railway。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2017] Railway", "background": "Bergen 基础设施建设部在一年前就有了把所有的城市用道路连起来的想法。  \n可惜的是，过了一年了，这个计划烂尾了。  \n所以，基础设施建设部部长就准备重启这个计划，然后把它搞得简单亿点。", "description": "原定的计划是有 $n$ 个城市用 $n-1$ 个道路连起来。    \n现在有 $m$ 个副部长，每个副部长都认为有一些城市是必须连起来的。  \n比如说这个副部长想把 $a$ 和 $c$ 连起来，有两条道路 $a - b$ 和 $b - c$，那么副部长的要求等价过来就是选择这两条道路。  \n现在要找出几条道路是至少 $k$ 个副部长选择的。  \n部长就找到了您，想让您找出这几条道路。", "inputFormat": "第一行三个整数 $n,m,k$ 代表城市数，副部长数和最少需要满足多少个副部长。  \n接下来 $n-1$ 行每行两个整数 $a_i$ 和 $b_i$ 代表第 $i$ 条道路是 $a_i$ 和 $b_i$ 之间的。  \n这 $n-1$ 个道路的编号就是 $1$ 到 $n-1$。  \n接下来 $m$ 行首先一个整数 $s_i$ 代表这个副部长觉得有 $s_i$ 个城市需要相连，接下来 $s_i$ 个整数代表副部长觉得哪些城市需要相连。", "outputFormat": "第一行一个整数 $r$ 代表至少满足 $k$ 个副部长的道路有多少个。  \n第二行 $r$ 个整数代表要搭建编号为哪些的道路的升序排列。", "hint": "#### 样例说明\n\n$3$ 个副部长的要求如下：\n\n- $1-3,2-3,3-4,4-5$\n- $3-4,4-6$\n- $2-3$\n\n至少满足 $2$ 个副部长的道路为 $2$ 号和 $3$ 号。\n\n#### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$n \\le 10^4$，$\\sum s_i \\le 2 \\times 10^3$。\n- Subtask 2（15 pts）：$n \\le 10^4$，$m \\le 2 \\times 10^3$。\n- Subtask 3（7 pts）：每个城市最多是 $2$ 条道路的端点。\n- Subtask 4（29 pts）：$k=m$，$s_i=2$。\n- Subtask 5（16 pts）：$k=m$。\n- Subtask 6（25 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\le s_i \\le n \\le 10^5$，$1 \\le k \\le m \\le 5 \\times 10^4$，$\\sum s_i \\le 10^5$。\n\n#### 说明\n\n**翻译自 [BOI 2017 D1](https://boi.cses.fi/files/boi2017_day1.pdf) T2 Railway。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。", "locale": "zh-CN"}}}
{"pid": "P6573", "type": "P", "difficulty": 6, "samples": [["5 14 5 5\n0 5 9\n5 12 10\n0 7 7\n7 12 8\n4 7 10\n0 12\n0 5\n0 7\n7 12\n0 13", "15\n9\n7\n8\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2017", "线段树", "矩阵运算", "O2优化", "BalticOI（波罗的海）"], "title": "[BalticOI 2017] Toll", "background": "作为一个合格的货运公司，在送达货物的同时也要让花的钱最少。", "description": "这座城市有 $n$ 个地点，这 $n$ 个地点之间有 $m$ 条边。  \n货运公司接到了 $o$ 个订单，他们要想方设法的让路途中花的钱最少。  \n对于每条路，都有三个信息：  \n- $a,b$ 代表从 $a$ 连到 $b$；\n- $t$ 代表这条路需要多少钱。  \n\n并且对于每个订单，都给出 $a$ 和 $b$ 代表要把物品从 $a$ 运到 $b$ ，求每个订单需要花的最少的钱；如果无法送达就输出 $-1$。  \n特别的，对于两个编号为 $a,b$ 的路，一定满足：\n$$\\left\\lfloor\\dfrac{b}{k}\\right\\rfloor=1+\\left\\lfloor\\dfrac{a}{k}\\right\\rfloor$$\n（$k$ 是一个给定的常数）。", "inputFormat": "第一行四个整数 $k,n,m,o$ 代表一个常数，地点的个数，边的个数，订单的个数。  \n点的编号为从 $0$ 到 $n - 1$。  \n接下来 $m$ 行每行三个整数 $a,b,t$ 代表从 $a$ 连向 $b$ 要花费 $t$，保证满足 $\\left\\lfloor\\dfrac{b}{k}\\right\\rfloor=1+\\left\\lfloor\\dfrac{a}{k}\\right\\rfloor$，并且两点之间连接的边数不超过 $1$ 条边。  \n接下来 $o$ 行每行两个整数 $a,b$ 代表要从 $a$ 运货到 $b$。", "outputFormat": "对于每个订单，输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（7 pts）：$k=1$。\n- Subtask 2（10 pts）：每个订单中的 $a=0$。\n- Subtask 3（8 pts）：$o \\le 100$。\n- Subtask 4（31 pts）：$o \\le 3000$。\n- Subtask 5（44 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 50000$，$1 \\le o \\le 10000$，$1 \\le k \\le 5$，$0 \\le a < b < n$，$1 \\le t \\le 10000$。\n\n#### 说明\n\n**翻译自 [BOI 2017 D1](https://boi.cses.fi/files/boi2017_day1.pdf) T3 Toll。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。   \n**本题强制 $O2$ 优化。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2017] Toll", "background": "作为一个合格的货运公司，在送达货物的同时也要让花的钱最少。", "description": "这座城市有 $n$ 个地点，这 $n$ 个地点之间有 $m$ 条边。  \n货运公司接到了 $o$ 个订单，他们要想方设法的让路途中花的钱最少。  \n对于每条路，都有三个信息：  \n- $a,b$ 代表从 $a$ 连到 $b$；\n- $t$ 代表这条路需要多少钱。  \n\n并且对于每个订单，都给出 $a$ 和 $b$ 代表要把物品从 $a$ 运到 $b$ ，求每个订单需要花的最少的钱；如果无法送达就输出 $-1$。  \n特别的，对于两个编号为 $a,b$ 的路，一定满足：\n$$\\left\\lfloor\\dfrac{b}{k}\\right\\rfloor=1+\\left\\lfloor\\dfrac{a}{k}\\right\\rfloor$$\n（$k$ 是一个给定的常数）。", "inputFormat": "第一行四个整数 $k,n,m,o$ 代表一个常数，地点的个数，边的个数，订单的个数。  \n点的编号为从 $0$ 到 $n - 1$。  \n接下来 $m$ 行每行三个整数 $a,b,t$ 代表从 $a$ 连向 $b$ 要花费 $t$，保证满足 $\\left\\lfloor\\dfrac{b}{k}\\right\\rfloor=1+\\left\\lfloor\\dfrac{a}{k}\\right\\rfloor$，并且两点之间连接的边数不超过 $1$ 条边。  \n接下来 $o$ 行每行两个整数 $a,b$ 代表要从 $a$ 运货到 $b$。", "outputFormat": "对于每个订单，输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（7 pts）：$k=1$。\n- Subtask 2（10 pts）：每个订单中的 $a=0$。\n- Subtask 3（8 pts）：$o \\le 100$。\n- Subtask 4（31 pts）：$o \\le 3000$。\n- Subtask 5（44 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 50000$，$1 \\le o \\le 10000$，$1 \\le k \\le 5$，$0 \\le a < b < n$，$1 \\le t \\le 10000$。\n\n#### 说明\n\n**翻译自 [BOI 2017 D1](https://boi.cses.fi/files/boi2017_day1.pdf) T3 Toll。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。   \n**本题强制 $O2$ 优化。**", "locale": "zh-CN"}}}
{"pid": "P6574", "type": "P", "difficulty": 5, "samples": [["4 3\n0\n0\n1", "2"], ["3 1000\n0\n0", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2017", "深度优先搜索 DFS", "BalticOI（波罗的海）"], "title": "[BalticOI 2017] Cat in a tree", "background": null, "description": "小猫在一棵有 $n$ 个节点的树上，它通过标记节点来划分领地。  \n它标记的节点满足彼此距离不小于 $d$。  \n两节点之间的距离指的是两点间路径上边的个数。\n求小猫最多能标记多少个节点。", "inputFormat": "第一行两个整数代表节点数 $n$ 和标记的节点不小于的距离 $d$。\n第 $0$ 个节点就是根节点，节点的编号为从 $0$ 到 $n - 1$。  \n接下来 $n-1$ 行，第 $i$ 行代表第 $i$ 个节点与哪个节点相连，一个数 $x_i$ 代表编号为 $i$ 的节点与编号为 $x_i$ 的节点相连。", "outputFormat": "一行一个整数代表猫最多能标记多少个节点。", "hint": "#### 数据范围与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$n \\le 18$。\n- Subtask 2（40 pts）：$n \\le 1500$。\n- Subtask 3（49 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,d \\le 2 \\times 10^5$，$0 \\le x_i < i$。\n\n#### 说明\n\n**翻译自 [BOI 2017 D2](https://boi.cses.fi/files/boi2017_day2.pdf) T1 Cat in a tree。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2017] Cat in a tree", "background": null, "description": "小猫在一棵有 $n$ 个节点的树上，它通过标记节点来划分领地。  \n它标记的节点满足彼此距离不小于 $d$。  \n两节点之间的距离指的是两点间路径上边的个数。\n求小猫最多能标记多少个节点。", "inputFormat": "第一行两个整数代表节点数 $n$ 和标记的节点不小于的距离 $d$。\n第 $0$ 个节点就是根节点，节点的编号为从 $0$ 到 $n - 1$。  \n接下来 $n-1$ 行，第 $i$ 行代表第 $i$ 个节点与哪个节点相连，一个数 $x_i$ 代表编号为 $i$ 的节点与编号为 $x_i$ 的节点相连。", "outputFormat": "一行一个整数代表猫最多能标记多少个节点。", "hint": "#### 数据范围与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$n \\le 18$。\n- Subtask 2（40 pts）：$n \\le 1500$。\n- Subtask 3（49 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,d \\le 2 \\times 10^5$，$0 \\le x_i < i$。\n\n#### 说明\n\n**翻译自 [BOI 2017 D2](https://boi.cses.fi/files/boi2017_day2.pdf) T1 Cat in a tree。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。", "locale": "zh-CN"}}}
{"pid": "P6575", "type": "P", "difficulty": 6, "samples": [["4 2 1\n1 1\n2 0 2\n2 1 3\n1 2\n", "home\n2\n2 0 1\n2 2 3"], ["5 2 1\n1 1\n2 0 2\n2 1 3\n2 2 4\n1 3\n", "detention"], ["3 3 3\n2 1 2\n2 0 2\n1 0\n", "detention"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2017", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2017] Friends", "background": "高中就是要交最棒的朋友！  \n乌姆里奇校长要调查霍格沃茨学校的交友情况了！", "description": "学校里有 $n$ 个同学，他们的交友情况满足以下的条件：\n\n- 如果 $a$ 与 $b$ 是朋友那么 $b$ 与 $a$ 也是朋友；\n- 同学们可以分成组，每个同学都恰好只在一个组里面，且：\n\t- 每个组的人数至少 $1$ 个最多 $p$ 个；\n    - 每组都有这样最多 $q$ 对朋友满足一个人在这个组，另一个人在别的组。\n    \n在同一个组里的两个同学不一定必须是朋友。   \n现在她来问您，想让您说出这些学生撒没撒谎。  \n如果没有撒谎的话，她想让您给出一个合理的分组模式。", "inputFormat": "第一行三个整数 $n,p,q$ 代表学生数，组别内学生的限制，和组别内不同组别朋友的限制。  \n学生的编号为从 $0$ 到 $n - 1$。   \n接下来 $n$ 行，从第 $0$ 个学生开始，首先一个整数 $m_i$ 代表这个学生与多少个学生为朋友，接下来 $m_i$ 个整数代表有哪些朋友。", "outputFormat": "如果这些学生撒谎了，输出 `detention` 并结束程序。  \n如果这些学生没撒谎，首先输出 `home`。  \n然后一个整数 $G$ 代表这些学生可以分成 $G$ 组。  \n接下来 $G$ 行每行首先一个整数 $G'$ 代表这一组有几个学生，然后 $G'$ 个整数 $g_i$ 代表这一组学生的编号。  \n**任意输出一种方式即可。**", "hint": "**数据规模与约定**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$n \\le 16$。\n- Subtask 2（37 pts）：$n \\le 250$，$q \\le 2$。\n- Subtask 3（12 pts）：$q \\le 2$。\n- Subtask 4（31 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2500$，$p+q \\le 15$，$\\sum m_i \\le 30000$，同学们不以自己为朋友。\n\n**本题使用 Special Judge。**\n\n**说明**\n\n**翻译自 [BOI 2017 D2](https://boi.cses.fi/files/boi2017_day2.pdf) T2 Friends。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。\n\nspj 提示信息说明：\n- `Accepted`：答案正确。\n- `Wrong Answer[0]`：判断错误。\n- `Wrong Answer[1]`：某些组的大小不符合要求。\n- `Wrong Answer[2]`：组里含有编号不在 $0$ 到 $n-1$ 内的人。\n- `Wrong Answer[3]`：某些人属于多个组。\n- `Wrong Answer[4]`：某些人不属于任何组。\n- `Wrong Answer[5]`：分组不满足要求。\n\nspj 作者：@[FZzzz](https://www.luogu.com.cn/user/174045)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2017] Friends", "background": "高中就是要交最棒的朋友！  \n乌姆里奇校长要调查霍格沃茨学校的交友情况了！", "description": "学校里有 $n$ 个同学，他们的交友情况满足以下的条件：\n\n- 如果 $a$ 与 $b$ 是朋友那么 $b$ 与 $a$ 也是朋友；\n- 同学们可以分成组，每个同学都恰好只在一个组里面，且：\n\t- 每个组的人数至少 $1$ 个最多 $p$ 个；\n    - 每组都有这样最多 $q$ 对朋友满足一个人在这个组，另一个人在别的组。\n    \n在同一个组里的两个同学不一定必须是朋友。   \n现在她来问您，想让您说出这些学生撒没撒谎。  \n如果没有撒谎的话，她想让您给出一个合理的分组模式。", "inputFormat": "第一行三个整数 $n,p,q$ 代表学生数，组别内学生的限制，和组别内不同组别朋友的限制。  \n学生的编号为从 $0$ 到 $n - 1$。   \n接下来 $n$ 行，从第 $0$ 个学生开始，首先一个整数 $m_i$ 代表这个学生与多少个学生为朋友，接下来 $m_i$ 个整数代表有哪些朋友。", "outputFormat": "如果这些学生撒谎了，输出 `detention` 并结束程序。  \n如果这些学生没撒谎，首先输出 `home`。  \n然后一个整数 $G$ 代表这些学生可以分成 $G$ 组。  \n接下来 $G$ 行每行首先一个整数 $G'$ 代表这一组有几个学生，然后 $G'$ 个整数 $g_i$ 代表这一组学生的编号。  \n**任意输出一种方式即可。**", "hint": "**数据规模与约定**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$n \\le 16$。\n- Subtask 2（37 pts）：$n \\le 250$，$q \\le 2$。\n- Subtask 3（12 pts）：$q \\le 2$。\n- Subtask 4（31 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 2500$，$p+q \\le 15$，$\\sum m_i \\le 30000$，同学们不以自己为朋友。\n\n**本题使用 Special Judge。**\n\n**说明**\n\n**翻译自 [BOI 2017 D2](https://boi.cses.fi/files/boi2017_day2.pdf) T2 Friends。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。\n\nspj 提示信息说明：\n- `Accepted`：答案正确。\n- `Wrong Answer[0]`：判断错误。\n- `Wrong Answer[1]`：某些组的大小不符合要求。\n- `Wrong Answer[2]`：组里含有编号不在 $0$ 到 $n-1$ 内的人。\n- `Wrong Answer[3]`：某些人属于多个组。\n- `Wrong Answer[4]`：某些人不属于任何组。\n- `Wrong Answer[5]`：分组不满足要求。\n\nspj 作者：@[FZzzz](https://www.luogu.com.cn/user/174045)。", "locale": "zh-CN"}}}
{"pid": "P6576", "type": "P", "difficulty": 5, "samples": [["2 4 4\n+ 1 1\n- 1 2\n+ 1 3\n- 1 4", "2"], ["3 3 3\n- 2 1\n+ 2 3\n+ 3 3", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2017", "容斥原理", "BalticOI（波罗的海）"], "title": "[BalticOI 2017] Plus Minus", "background": "物理学家马修正在研究硅基矩形微芯片的量子电动力学。", "description": "这一块芯片的大小为 $n \\times m$ ，可以分成 $n \\times m$ 个电子。  \n我们都知道电子的状态只有正电 `+` 和负电 `-`。  \n所以，每一个电子都只有一个状态，`+` 或者 `-`。  \n马修不知道每个电子的状态，但他可以进行 $k$ 次测量。  \n第 $i$ 次测量他可以得到 $(y_i,x_i)$ 这个电子的状态 $s_i$。  \n（$s_i$ 是 `+` 或者 `-`）  \n马修还知道，在任意一个 $2\\times2$ 的大小的电子块中，拥有 `+` 的电子和拥有 `-` 的电子数量相等。  \n然后他找到了您，想让您给出有多少种电子排列的形式满足测量的结果和上述要求。  \n答案对 $10^9+7$ 取模。", "inputFormat": "第一行三个整数 $n,m,k$ 代表芯片的大小和测量次数。  \n接下来 $k$ 行每行一个字符 $s_i$ 代表这次测量得到的状态和 $y_i,x_i$ 代表测量的位置。", "outputFormat": "一行一个整数代表有多少种电子排布的形式。  \n答案对 $10^9+7$ 取模。", "hint": "#### 样例说明\n\n对于样例 $1$，有以下 $2$ 种情况：\n```\n+-+-\n+-+-\n```\n和\n```\n+-+-\n-+-+\n```\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（12 pts）：$n,m \\le 5$。\n- Subtask 2（42 pts）：$n,m \\le 1000$。\n- Subtask 3（46 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 10^9$，$0 \\le k \\le 10^5$，$1 \\le y_i \\le n$，$1 \\le x_i \\le m$。\n\n#### 说明\n\n**翻译自 [BOI 2017 D2](https://boi.cses.fi/files/boi2017_day2.pdf) T3 Plus Minus。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2017] Plus Minus", "background": "物理学家马修正在研究硅基矩形微芯片的量子电动力学。", "description": "这一块芯片的大小为 $n \\times m$ ，可以分成 $n \\times m$ 个电子。  \n我们都知道电子的状态只有正电 `+` 和负电 `-`。  \n所以，每一个电子都只有一个状态，`+` 或者 `-`。  \n马修不知道每个电子的状态，但他可以进行 $k$ 次测量。  \n第 $i$ 次测量他可以得到 $(y_i,x_i)$ 这个电子的状态 $s_i$。  \n（$s_i$ 是 `+` 或者 `-`）  \n马修还知道，在任意一个 $2\\times2$ 的大小的电子块中，拥有 `+` 的电子和拥有 `-` 的电子数量相等。  \n然后他找到了您，想让您给出有多少种电子排列的形式满足测量的结果和上述要求。  \n答案对 $10^9+7$ 取模。", "inputFormat": "第一行三个整数 $n,m,k$ 代表芯片的大小和测量次数。  \n接下来 $k$ 行每行一个字符 $s_i$ 代表这次测量得到的状态和 $y_i,x_i$ 代表测量的位置。", "outputFormat": "一行一个整数代表有多少种电子排布的形式。  \n答案对 $10^9+7$ 取模。", "hint": "#### 样例说明\n\n对于样例 $1$，有以下 $2$ 种情况：\n```\n+-+-\n+-+-\n```\n和\n```\n+-+-\n-+-+\n```\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（12 pts）：$n,m \\le 5$。\n- Subtask 2（42 pts）：$n,m \\le 1000$。\n- Subtask 3（46 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 10^9$，$0 \\le k \\le 10^5$，$1 \\le y_i \\le n$，$1 \\le x_i \\le m$。\n\n#### 说明\n\n**翻译自 [BOI 2017 D2](https://boi.cses.fi/files/boi2017_day2.pdf) T3 Plus Minus。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。", "locale": "zh-CN"}}}
{"pid": "P6577", "type": "P", "difficulty": 6, "samples": [["5 7\n5 1 19980600\n4 2 19980587\n1 3 19980635\n3 4 19980559\n2 5 19980626\n1 2 -15484297\n4 5 -17558732\n", "99903007\n5 4 1 3 2 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "﻿基础算法", "广度优先搜索 BFS", "二分图", "其它技巧", "模板题"], "title": "【模板】二分图最大权完美匹配", "background": "> $\\rm Love ~of ~my ~life$\n>\n> $\\rm U~are~far~from~me$\n> \n> $\\rm U've ~ turned ~ me ~ on$\n> \n> $\\rm and ~ now ~ I ~ try ~ to ~ catch ~ up ~ with ~ you$\n>\n> $\\rm Love ~ of ~ my ~ life ~ can't ~ you ~ see$\n>\n> $\\rm I'll ~ always ~ try, ~ always ~ try$\n>\n> $\\rm U ~ are ~ the ~ brightest ~ star ~ to ~ me$\n> \n> $\\rm No ~ matter ~ others ~ don't ~ know$\n>\n> $\\rm what ~ it ~ means ~ to ~ me$\n>\n> ——  An adaptation of _Love of My Life_ by Queen\n\n\n这是一道夹带私货的模板题。", "description": "给定一张二分图，左右部均有 $n$ 个点，共有 $m$ 条带权边，且保证有完美匹配。\n\n求一种完美匹配的方案，使得最终匹配边的边权之和最大。", "inputFormat": "第一行两个整数 $n,m$，含义见题目描述。\n\n第 $2\\sim m+1$ 行，每行三个整数 $y,c,h$ 描述了图中的一条从左部的 $y$ 号结点到右部的 $c$ 号节点，边权为 $h$ 的边。", "outputFormat": "**本题存在 Special Judge**。\n\n第一行一个整数 $ans$ 表示答案。\n\n第二行共 $n$ 个整数 $a_1,a_2,a_3\\cdots a_n$，其中 $a_i$ 表示完美匹配下与**右部**第 $i$ 个点相匹配的左部点的编号。如果存在多种方案，请输出任意一种。", "hint": "#### 数据规模与约定\n- 对于 $10\\%$ 的数据，满足 $n\\leq 10$。\n- 对于 $30\\%$ 的数据，满足 $n\\leq 100$。\n- 对于 $60\\%$ 的数据，满足 $n\\leq 500$，且保证数据随机 。\n- 对于 $100\\%$ 的数据，满足 $1\\leq n\\leq 500$，$1\\leq m\\leq n^2$，$-19980731\\leq h \\leq 19980731$ 。且保证没有重边。\n\n数据由善于出锅的出题人耗时好久制造完成。\n\n善良的杨村花提醒你，别忘了仔细观察一下边权范围哦~\n\n善良的杨村花又提醒你，你的复杂度可能只是「看起来」很对哦~", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】二分图最大权完美匹配", "background": "> $\\rm Love ~of ~my ~life$\n>\n> $\\rm U~are~far~from~me$\n> \n> $\\rm U've ~ turned ~ me ~ on$\n> \n> $\\rm and ~ now ~ I ~ try ~ to ~ catch ~ up ~ with ~ you$\n>\n> $\\rm Love ~ of ~ my ~ life ~ can't ~ you ~ see$\n>\n> $\\rm I'll ~ always ~ try, ~ always ~ try$\n>\n> $\\rm U ~ are ~ the ~ brightest ~ star ~ to ~ me$\n> \n> $\\rm No ~ matter ~ others ~ don't ~ know$\n>\n> $\\rm what ~ it ~ means ~ to ~ me$\n>\n> ——  An adaptation of _Love of My Life_ by Queen\n\n\n这是一道夹带私货的模板题。", "description": "给定一张二分图，左右部均有 $n$ 个点，共有 $m$ 条带权边，且保证有完美匹配。\n\n求一种完美匹配的方案，使得最终匹配边的边权之和最大。", "inputFormat": "第一行两个整数 $n,m$，含义见题目描述。\n\n第 $2\\sim m+1$ 行，每行三个整数 $y,c,h$ 描述了图中的一条从左部的 $y$ 号结点到右部的 $c$ 号节点，边权为 $h$ 的边。", "outputFormat": "**本题存在 Special Judge**。\n\n第一行一个整数 $ans$ 表示答案。\n\n第二行共 $n$ 个整数 $a_1,a_2,a_3\\cdots a_n$，其中 $a_i$ 表示完美匹配下与**右部**第 $i$ 个点相匹配的左部点的编号。如果存在多种方案，请输出任意一种。", "hint": "#### 数据规模与约定\n- 对于 $10\\%$ 的数据，满足 $n\\leq 10$。\n- 对于 $30\\%$ 的数据，满足 $n\\leq 100$。\n- 对于 $60\\%$ 的数据，满足 $n\\leq 500$，且保证数据随机 。\n- 对于 $100\\%$ 的数据，满足 $1\\leq n\\leq 500$，$1\\leq m\\leq n^2$，$-19980731\\leq h \\leq 19980731$ 。且保证没有重边。\n\n数据由善于出锅的出题人耗时好久制造完成。\n\n善良的杨村花提醒你，别忘了仔细观察一下边权范围哦~\n\n善良的杨村花又提醒你，你的复杂度可能只是「看起来」很对哦~", "locale": "zh-CN"}}}
{"pid": "P6578", "type": "P", "difficulty": 7, "samples": [["6 6\n1 1 4 5 1 4\n1 1 4\n2 1 4 2\n2 1 1 4\n2 1 5 4\n1 5 4 \n2 3 3 3", "1\n1\n7\n0"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2019", "O2优化", "分块", "Ynoi"], "title": "[Ynoi2019] 魔法少女网站", "background": "我每天都在想着死去\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l47w8gf1.png)\n\n干脆死了算了吧\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1r56c7q2.png)\n\n魔法少女网站？这是什么？\n\n“真是不幸啊 真是不幸”\n\n“给予这样的你——”\n\n“魔法的力量吧”\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6llyktk.png)\n\n雨谷小雨\n\n唉，自我介绍真麻烦\n\n你因为使用魔杖过度而倒下了，之后就一直没有意识\n\n所以我治好了你\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rxxe90qn.png)\n\n在未来的8月11日19时23分\n\n在那一天，tempest将袭来——\n\nTempest将为这腐朽的世界带来终焉，打开通往新世界的大门\n但在这过程中，大多数的人类估计都会死亡\n\nTempest的到来是不可避免的，但仅有一种方法可以获得救赎——\n\n那就是填饱王的肚子\n\n王以人类的负能量为食，只要献上这种能量，就能规避tempest带来的死亡\n\n通过使用魔法少女网站给予的魔杖，就能够将负能量储存至魔杖中\n\n只有尽可能多地使用魔杖，比其他魔法少女献上更多的负能量，这样才能成为tempest的赦免对象\n\n如果想活下去，就将充斥着负能量的魔杖，在tempest那天交给我们魔法少女网站吧\n\n最后祝你们迎来美好的终焉\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tu991ylc.png)\n\n去掉人类一切的负面情绪\n\nTempest必将席卷世界\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s72vowwk.png)\n", "description": "雨谷小雨给你一个长为 $n$ 的序列，定义区间 $[l,r]$ 的子区间为所有形如 $[l',r']$ 的区间，满足 $l',r'$ 为整数，且 $l \\le l' \\le r' \\le r$。\n\n有 $m$ 次操作：\n\n`1 x y`：将 $x$ 位置的值修改为 $y$。\n\n`2 l r x`：查询区间 $[l,r]$ 中有多少子区间的最大值小于或等于 $x$。", "inputFormat": "第一行有两个整数 $n,m$，第二行有 $n$ 个整数表示这个序列。\n\n接下来 $m$ 行，每行形如 `1 x y` 或者 `2 l r x` 表示每次操作。", "outputFormat": "对于每个 $2$ 操作，输出一行一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：ccz181078，Data：ccz181078\n\n\n对于 $100\\%$ 的数据，$n,m \\le 3 \\times 10^5$，$1 \\le l \\le  r \\le n$，$1 \\le x, y \\le n$，序列中每个元素都在 $[1,n]$ 中，所有数均为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2019] 魔法少女网站", "background": "我每天都在想着死去\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l47w8gf1.png)\n\n干脆死了算了吧\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1r56c7q2.png)\n\n魔法少女网站？这是什么？\n\n“真是不幸啊 真是不幸”\n\n“给予这样的你——”\n\n“魔法的力量吧”\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6llyktk.png)\n\n雨谷小雨\n\n唉，自我介绍真麻烦\n\n你因为使用魔杖过度而倒下了，之后就一直没有意识\n\n所以我治好了你\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rxxe90qn.png)\n\n在未来的8月11日19时23分\n\n在那一天，tempest将袭来——\n\nTempest将为这腐朽的世界带来终焉，打开通往新世界的大门\n但在这过程中，大多数的人类估计都会死亡\n\nTempest的到来是不可避免的，但仅有一种方法可以获得救赎——\n\n那就是填饱王的肚子\n\n王以人类的负能量为食，只要献上这种能量，就能规避tempest带来的死亡\n\n通过使用魔法少女网站给予的魔杖，就能够将负能量储存至魔杖中\n\n只有尽可能多地使用魔杖，比其他魔法少女献上更多的负能量，这样才能成为tempest的赦免对象\n\n如果想活下去，就将充斥着负能量的魔杖，在tempest那天交给我们魔法少女网站吧\n\n最后祝你们迎来美好的终焉\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tu991ylc.png)\n\n去掉人类一切的负面情绪\n\nTempest必将席卷世界\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s72vowwk.png)\n", "description": "雨谷小雨给你一个长为 $n$ 的序列，定义区间 $[l,r]$ 的子区间为所有形如 $[l',r']$ 的区间，满足 $l',r'$ 为整数，且 $l \\le l' \\le r' \\le r$。\n\n有 $m$ 次操作：\n\n`1 x y`：将 $x$ 位置的值修改为 $y$。\n\n`2 l r x`：查询区间 $[l,r]$ 中有多少子区间的最大值小于或等于 $x$。", "inputFormat": "第一行有两个整数 $n,m$，第二行有 $n$ 个整数表示这个序列。\n\n接下来 $m$ 行，每行形如 `1 x y` 或者 `2 l r x` 表示每次操作。", "outputFormat": "对于每个 $2$ 操作，输出一行一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：ccz181078，Data：ccz181078\n\n\n对于 $100\\%$ 的数据，$n,m \\le 3 \\times 10^5$，$1 \\le l \\le  r \\le n$，$1 \\le x, y \\le n$，序列中每个元素都在 $[1,n]$ 中，所有数均为整数。", "locale": "zh-CN"}}}
{"pid": "P6579", "type": "P", "difficulty": 7, "samples": [["9 9\n9 8 7 6 2 4 5 3 1\n4 9 3 6\n2 9 1 8\n3 8 2 4\n3 9 2 7\n2 8 1 6\n1 9 1 9\n1 3 5 7\n2 3 3 3\n6 6 6 6", "1\n4\n2\n4\n4\n4\n0\n0\n0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2019", "O2优化", "分块", "Ynoi"], "title": "[Ynoi2019] Happy Sugar Life", "background": "我不曾明白——\n\n所谓温暖是什么样的感觉？\n\n所谓温柔的是什么？\n\n所谓的怜爱是什么？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nob8pmsq.png)\n\n更重要的是……\n\n我不能理解什么是“爱”\n\n但是，现在我明白了——\n\n我终于明白了爱的真正含义\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4ed92uuh.png)\n\n——这份闪闪发光的感情，就是爱吧\n\n我发誓——\n\n无论疾病还是健康\n\n无论高兴还是悲伤\n\n无论富有还是贫穷\n\n直到死亡为止\n\n我将砂糖视为最爱，至死分离\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rtqkoufl.png)\n \n我从前没有爱过人\n\n被人咬耳朵告白这种事——\n\n倒是发生过许多次\n\n但是，无论是甜言蜜语\n\n还是做了什么事情\n\n我都无法感受到\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3x4mpqh5.png)\n\n砂糖酱，痛吗\n\n——我没事，不过……不能前往新的城堡了\n\n——对不起\n\n没事\n\n果然我还是和砂糖酱在一起的时候最幸福了\n\n——小盐……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ymxjeje5.png)\n\n呐，砂糖酱，我思考过——\n\n那个时候，被妈妈抛弃的时候\n\n我大概是死掉的状态\n\n又悲伤，又痛苦\n\n觉得一切都无所谓，世界一片空白——\n\n但是砂糖酱出现了\n\n遇到砂糖，一起生活，过得很幸福\n\n——我也是哦，小盐\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nql2dmab.png)\n\n所以，我想要和砂糖酱在一起\n\n想要和砂糖一起幸福到最后\n\n所以，我们一起死吧，砂糖！\n\n——小盐……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/83k9rf7e.png)\n\n我原本都不知道\n\n温暖是何种感受\n\n温柔是何物\n\n慈爱又是什么\n\n最重要的是\n\n我曾无法理解“爱”是什么\n\n这多亏了小盐\n\n因为那时小盐抓住了我的手\n\n因为小盐为我指引道路\n\n我才明白有生以来从未感受过的幸福的意义\n\n我一直都不明白\n\n原来教会我什么是爱的\n\n也是小盐\n\n小盐，转世之后也要对我告白哦\n\n对不起\n\n谢谢你\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hsgby4jy.png)\n\n这就是我的\n\n$\\texttt {Happy Sugar Life}$", "description": "砂糖和盐给你一个二维平面，记平面上两个点 $(x_1,y_1),(x_2,y_2)$ 构成支配对（记为$(x_1,y_1)\\le (x_2,y_2)$）当且仅当 $x_1\\le x_2,\\;y_1\\le y_2$。\n平面上初始给定 $n$ 个不同的点 $\\{(x_i,y_i)\\}_{i=1}^n$。\n\n你需要回答 $m$ 次询问，每次询问给出两个点 $(x,y),(x',y')$，问有多少二元组 $(i,j)$ 满足 $(x,y)\\le (x_i,y_i)\\le (x_j,y_j)\\le (x',y')$ 且 $i \\neq j$。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个数，其中第 $i$ 个数 $p_i$ 表示平面上初始给定的第 $i$ 个点 $(i,p_i)$，保证 $p_i$ 为一个 $1$ 到 $n$ 的排列。\n\n之后 $m$ 行，每行用四个空格隔开的数，分别表示 $x,x',y,y'$，表示一次询问，保证 $(x,y)\\le (x',y')$。\n", "outputFormat": "输出 $m$ 行，第 $i$ 行输出一行一个整数，表示第 $i$ 次询问的答案。", "hint": "Idea：ccz181078&nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：nzhtl1477&ccz181078\n\n对于 $100 \\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le m \\le 2 \\times 10^5$。\n\n#### 样例解释\n\n对于第一次询问，可以发现满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(4,6),(6,4),(7,5),(8,3)$，支配对有 $(6,4),(7,5)$，所对应的二元组为 $(6,7)$。\n\n对于第二次询问，可以发现满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(2,8),(3,7),(4,6),(5,2),(6,4),(7,5),(8,3),(9,1)$，支配对有 $(5,2),(6,4)$ 和 $(6,4),(7,5)$ 和 $(5,2),(7,5)$ 和 $(5,2),(8,3)$，所对应的二元组为 $(5,6),(6,7),(5,7),(5,8)$。\n\n对于第三次询问，可以发现满足$(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(5,2),(6,4),(8,3)$，支配对有 $(5,2),(6,4)$ 和 $(5,2),(8,3)$，所对应的二元组为 $(5,6),(5,8)$。\n\n对于第四次询问，可以发现满足$(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(4,6),(5,2),(6,4),(7,5),(8,3)$，支配对有 $(5,2),(6,4)$ 和 $(6,4),(7,5)$ 和 $(5,2),(7,5)$ 和 $(5,2),(8,3)$，所对应的二元组为 $(5,6),(6,7),(5,7),(5,8)$。\n\n对于第五次询问，可以发现满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(4,6),(5,2),(6,4),(7,5),(8,3)$，支配对有 $(5,2),(6,4)$ 和 $(6,4),(7,5)$ 和 $(5,2),(7,5)$ 和 $(5,2),(8,3)$，所对应的二元组为 $(5,6),(6,7),(5,7),(5,8)$。\n\n对于第六次询问，可以发现满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(1,9),(2,8),(3,7),(4,6),(5,2),(6,4),(7,5),(8,3),(9,1)$，支配对有 $(5,2),(6,4)$ 和 $(6,4),(7,5)$ 和 $(5,2),(7,5)$ 和 $(5,2),(8,3)$，所对应的二元组为 $(5,6),(6,7),(5,7),(5,8)$。\n\n对于第七次询问，可以发现满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(3,7)$，无支配对。\n\n对于第八次询问，可以发现无满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$，无支配对。\n\n对于第九次询问，可以发现无满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$，无支配对。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2019] Happy Sugar Life", "background": "我不曾明白——\n\n所谓温暖是什么样的感觉？\n\n所谓温柔的是什么？\n\n所谓的怜爱是什么？\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nob8pmsq.png)\n\n更重要的是……\n\n我不能理解什么是“爱”\n\n但是，现在我明白了——\n\n我终于明白了爱的真正含义\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4ed92uuh.png)\n\n——这份闪闪发光的感情，就是爱吧\n\n我发誓——\n\n无论疾病还是健康\n\n无论高兴还是悲伤\n\n无论富有还是贫穷\n\n直到死亡为止\n\n我将砂糖视为最爱，至死分离\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rtqkoufl.png)\n \n我从前没有爱过人\n\n被人咬耳朵告白这种事——\n\n倒是发生过许多次\n\n但是，无论是甜言蜜语\n\n还是做了什么事情\n\n我都无法感受到\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3x4mpqh5.png)\n\n砂糖酱，痛吗\n\n——我没事，不过……不能前往新的城堡了\n\n——对不起\n\n没事\n\n果然我还是和砂糖酱在一起的时候最幸福了\n\n——小盐……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ymxjeje5.png)\n\n呐，砂糖酱，我思考过——\n\n那个时候，被妈妈抛弃的时候\n\n我大概是死掉的状态\n\n又悲伤，又痛苦\n\n觉得一切都无所谓，世界一片空白——\n\n但是砂糖酱出现了\n\n遇到砂糖，一起生活，过得很幸福\n\n——我也是哦，小盐\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nql2dmab.png)\n\n所以，我想要和砂糖酱在一起\n\n想要和砂糖一起幸福到最后\n\n所以，我们一起死吧，砂糖！\n\n——小盐……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/83k9rf7e.png)\n\n我原本都不知道\n\n温暖是何种感受\n\n温柔是何物\n\n慈爱又是什么\n\n最重要的是\n\n我曾无法理解“爱”是什么\n\n这多亏了小盐\n\n因为那时小盐抓住了我的手\n\n因为小盐为我指引道路\n\n我才明白有生以来从未感受过的幸福的意义\n\n我一直都不明白\n\n原来教会我什么是爱的\n\n也是小盐\n\n小盐，转世之后也要对我告白哦\n\n对不起\n\n谢谢你\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hsgby4jy.png)\n\n这就是我的\n\n$\\texttt {Happy Sugar Life}$", "description": "砂糖和盐给你一个二维平面，记平面上两个点 $(x_1,y_1),(x_2,y_2)$ 构成支配对（记为$(x_1,y_1)\\le (x_2,y_2)$）当且仅当 $x_1\\le x_2,\\;y_1\\le y_2$。\n平面上初始给定 $n$ 个不同的点 $\\{(x_i,y_i)\\}_{i=1}^n$。\n\n你需要回答 $m$ 次询问，每次询问给出两个点 $(x,y),(x',y')$，问有多少二元组 $(i,j)$ 满足 $(x,y)\\le (x_i,y_i)\\le (x_j,y_j)\\le (x',y')$ 且 $i \\neq j$。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个数，其中第 $i$ 个数 $p_i$ 表示平面上初始给定的第 $i$ 个点 $(i,p_i)$，保证 $p_i$ 为一个 $1$ 到 $n$ 的排列。\n\n之后 $m$ 行，每行用四个空格隔开的数，分别表示 $x,x',y,y'$，表示一次询问，保证 $(x,y)\\le (x',y')$。\n", "outputFormat": "输出 $m$ 行，第 $i$ 行输出一行一个整数，表示第 $i$ 次询问的答案。", "hint": "Idea：ccz181078&nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：nzhtl1477&ccz181078\n\n对于 $100 \\%$ 的数据，$1 \\le n \\le 10^5$，$1 \\le m \\le 2 \\times 10^5$。\n\n#### 样例解释\n\n对于第一次询问，可以发现满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(4,6),(6,4),(7,5),(8,3)$，支配对有 $(6,4),(7,5)$，所对应的二元组为 $(6,7)$。\n\n对于第二次询问，可以发现满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(2,8),(3,7),(4,6),(5,2),(6,4),(7,5),(8,3),(9,1)$，支配对有 $(5,2),(6,4)$ 和 $(6,4),(7,5)$ 和 $(5,2),(7,5)$ 和 $(5,2),(8,3)$，所对应的二元组为 $(5,6),(6,7),(5,7),(5,8)$。\n\n对于第三次询问，可以发现满足$(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(5,2),(6,4),(8,3)$，支配对有 $(5,2),(6,4)$ 和 $(5,2),(8,3)$，所对应的二元组为 $(5,6),(5,8)$。\n\n对于第四次询问，可以发现满足$(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(4,6),(5,2),(6,4),(7,5),(8,3)$，支配对有 $(5,2),(6,4)$ 和 $(6,4),(7,5)$ 和 $(5,2),(7,5)$ 和 $(5,2),(8,3)$，所对应的二元组为 $(5,6),(6,7),(5,7),(5,8)$。\n\n对于第五次询问，可以发现满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(4,6),(5,2),(6,4),(7,5),(8,3)$，支配对有 $(5,2),(6,4)$ 和 $(6,4),(7,5)$ 和 $(5,2),(7,5)$ 和 $(5,2),(8,3)$，所对应的二元组为 $(5,6),(6,7),(5,7),(5,8)$。\n\n对于第六次询问，可以发现满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(1,9),(2,8),(3,7),(4,6),(5,2),(6,4),(7,5),(8,3),(9,1)$，支配对有 $(5,2),(6,4)$ 和 $(6,4),(7,5)$ 和 $(5,2),(7,5)$ 和 $(5,2),(8,3)$，所对应的二元组为 $(5,6),(6,7),(5,7),(5,8)$。\n\n对于第七次询问，可以发现满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$ 有 $(3,7)$，无支配对。\n\n对于第八次询问，可以发现无满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$，无支配对。\n\n对于第九次询问，可以发现无满足 $(x,y)\\le (x_i,y_i)\\le (x',y')$ 的 $(x_i,y_i)$，无支配对。", "locale": "zh-CN"}}}
{"pid": "P6580", "type": "P", "difficulty": 7, "samples": [["6 3 5\n1 1 4 5 1 4\n1 2\n2 3\n3 4\n4 5\n5 6\n1 1 4 5 1 4\n1 1\n4 5\n1 4", "1\n4\n4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2019", "O2优化", "分块", "洛谷月赛", "Ynoi"], "title": "[Ynoi2019] 美好的每一天~ 不连续的存在", "background": "3.0321\n\n虽然外面能在空间上表现一个违反物理规律的事态\n\n但是外面不能在空间上表现一个违反几何规律的事态。\n\nLudwig Josef Johann Wittgenstein【逻辑哲学论】\n\n![](https://cdn.luogu.com.cn/upload/pic/53829.png)\n\n……\n\n透明的…\n\n透明的白色？\n\n…不…不对\n\n这不是什么透明的白色…\n\n是白色的话就不是透明……那么…这是半透明的…\n\n但是…这也…并不是半透明…\n\n如果…要找个唯一能表达的词语的话…\n\n那就是…\n\n透明的白色…\n\n这是…那个啥…这是\n\n“光”\n\n【光】\n\n光？\n\n这是\n\n单纯的光\n\n是的……就是这样……\n\n这是——\n\n——光\n\n蝉的叫声……\n\n这里是…屋顶？\n\n环顾四周…那是司空见惯的风景…是A栋的屋顶\n\n为什么…为什么会在这里…\n\n间宫皆守为了保护羽咲跳了下去…然后…，\n\n然后…，\n\n然后发生了什么？\n\n今天是几号？那个，现在是…\n\n我确认了下手表，日期是2012年7月20日。\n\n从那时起…整整一天…\n\n到底发生了什么…\n\n梦……据说即使是明晰梦也少有能感觉到疼痛的……\n\n捏脸蛋能感觉到疼的话，就说明这里的景色是现实吗……\n \n音无彩名…同学\n\n“好久不见”\n\n“怎么了？”\n\n因为啊…离我们最后一次见面不是才只过了一天吗…\n\n“…这样啊”\n\n…我说\n\n“怎么？”\n\n间宫皆守怎么样了？\n\n“为什么…要问那种事？”\n\n那，那当然是因为很在意啊…而且说到底我也只是他创造出来的人格罢了…\n\n“那么他不就是还活着吗？”\n\n你说…什么\n\n“假设1…如果你…是间宫皆守创造出来的人格之一的话，你存在的这件事本身，就是间宫皆守的肉体还存在着的理由了…”\n\n但，但是…这样很奇怪对吧\n\n“哪里奇怪？”\n\n因为啊…他都受了那么重的伤了啊。才过一天怎么可能能跑到这种地方来\n\n“这样啊…”\n\n我即使出现，也是应该是在医院的床上的\n\n“那么假设2…你的存在不是因为解离性同一障碍而引起的…”\n\n“你的存在正是过去实际存在过的人物，水上由岐的灵魂。如果这个灵魂是寄宿\n在间宫皆守身上的…你存在于这里的理由换言之即…”\n\n“意味着间宫皆守的死…”\n\n怎，怎么会…\n\n“还有假设3…如果这里只是你做的梦的话…”\n\n“你眼前的我…也只是梦的产物…这个假设具有充分的说服力…”\n\n“那么…水上由岐小姐喜欢将其中哪一种作为现状说明呢？”\n\n喜欢哪种…我觉得更不是这种问题吧…\n\n“假设4…你只是我所看见的幻觉…是我创造出来的幻影…也就是说你并不存在”\n\n啊哈哈哈…那么，现在正在思考的我又成了什么呢？\n\n不是有正在思考的我存在吗\n\n“只不过是将我的大脑活动…的其中一部分，作为别的人格在认知而已…”\n\n“也就是说“你正在思考”这件事，并不能证明你存在…”\n\n“根本不能否定现在存在与此的水上由岐…是我创造出来的另一种人格的可能\n性”\n\n“这件事，在一具肉体里创造出三个人格的你应该是最能理解的…”\n\n“自己正在思考这件事…并不能成为自己存在的证明…”\n\n我说啊…我想知道的是\n\n“什么？”\n\n所以说，是在那之后怎么样了？\n\n“你想要知道的话就确认一下吧…打开屋顶的门，跑到外面的世界去就可以了…\n仅仅只需要这样而已”\n\n![](https://cdn.luogu.com.cn/upload/pic/53830.png) \n\n…\n\n正如音无彩名所言。\n\n要是真的那么在意的话…我只要从这里离开就好了。\n\n从这片屋顶上跑开，去看看外面的世界就行了。\n\n这样做的话，应该就能如我所愿地…得知一切的结果了。\n\n但是…\n\n只要出去就行…吗\n\n“嗯”\n\n虽然这也是一种方法…但能让我问个问题吗？\n\n“问什么？”\n\n今天是几号？\n\n“2012年7月20日…”\n\n也就是说…从明天开始就是暑假了？\n\n“对…从明天开始就是暑假…”\n\n昨天…应该是发生了集体自杀。\n\n根本不是还能安心地照常放暑假的那种小事。\n\n尽管如此…从屋顶看到的风景却…\n\n是一如既往的日常…\n\n走在走廊上的学生。\n\n在教室里谈话的学生。\n\n喊学生来找他的老师。\n\n这是毫无变化的日常。\n\n实在是看不出像是刚发生了那种事件…\n\n“怎么了吗”\n\n…彩名同学的假设…就这么多了吗？\n\n“假设…你还想要吗？”\n\n“说明的话你想要听多少都行…对这个世界的注释…人们想要多少就可以增加到\n多少”\n\n“如果那是你的愿望的话…无论多少…”\n\n卓司君说说的“终之空”是什么？\n\n那个啊…是不管是琴美的预言还是白莲华协会的预言里都不存在的词语哦…\n\n“终之空…就是字面上的”终结的天空””\n\n那个名字…是谁在什么时候起的呢…\n\n“记忆…”\n\n记忆？\n\n“幽灵房间…终之空…”\n\n唔\n\n“呵呵…你还记得”\n\n不是记得…那应该是我记错了吧…\n\n“是这样吗？”\n\n因，因为，那个…很奇怪对吧？\n\n“哪里奇怪？”\n\n因为啊…那个…是我被卷入高岛同学的自杀时做的梦吧？\n\n所以不是很奇怪吗\n\n“有什么奇怪的吗？”\n\n因为啊…如果那是，我已经被卷入高岛的自杀的话…时间轴就完全乱套了啊…因\n为在那之后我又一次体验了高岛同学的自杀\n\n“假设5…直到现在，你还没有从那个梦中醒来…”\n\n那个梦？\n\n“被卷入高岛柘榴自杀的水上由岐…现在这个瞬间正是她所做的梦的延续”\n\n梦，梦？你说现在？不…不过怎么想，说这是梦也太…\n\n“是吗…那么假设6…”幽灵房间…终之空”的记忆是错误的记忆…”\n\n“只是反复进行人格替换缩引起的记忆的混乱让你做了这样的梦…”\n\n“跳楼的高岛柘榴并没有撞上水上由岐，只是单纯的记忆混乱”\n\n那，那么，为什么卓司君会使用只在我梦中出现过的“终之空”这个词啊！\n\n“因为两者共享一个大脑，这样没有什么不可思议的…”\n\n那，那样的话…\n\n“你很在意最后看到的风景…那片天空的存在吗？”\n\n咕\n\n最后看见的…那片天空…\n\n间宫卓司君在跳楼的一刹那看到的那种风景。\n\n我不知为何觉得那种风景似曾相识…\n\n“不断重复的世界…从某个地点开始…”\n\n唔\n\n“可以确认一下吗？”\n\n什，什么？\n\n“称呼你，水上由岐同学…可以吗？”\n\n事，事到如今怎么这样问…你不是一直都这么叫我的吗…\n\n“由岐同学…水上由岐同学是谁？”\n\n哎？\n\n“由岐同学…是过去实际存在的人物，为了救间宫羽咲而死亡…在那之后，又作\n为间宫皆守所产生的人格而存在…”\n\n“那样的话…现在存在与此的由岐同学是谁？是已经死去的由岐同学？还是作为\n间宫皆守创造出来的人格的由岐同学？”\n\n就，就算你这么问…我也不知道…\n\n“正因为你不知道…才会问我…”\n\n“最后的注释…”\n\n“向由岐同学提问…”\n\n“这个世界上存在着多少个由岐同学呢？”\n\n哎？\n\n“一个，是在泽衣村出生…并在泽衣村死去的水上由岐…另一个是作为间宫皆守\n创造出来的人格的水上由岐…以及现在正在与我对话的存在与此的水上由岐”\n\n“那么请听题…请问你是第几位水上由岐小姐呢？”\n\n那，那种事我怎么知道…而且我就是我，才没有那么多人\n\n“在泽衣村死去的由岐同学，在皆守体内的由岐同学，还有现在在此的由岐同学\n是一样的…”\n\n“那么，其他还有可能存在的由岐小姐呢？”\n\n其他还有可能存在的我？\n\n“对…其他人格所产生的由岐同学…那也是由岐同学吗？”\n\n那种事我怎么知道…再说了要是有那么多我怎么受得了\n\n“但是事实上你并不是一个人…”\n\n“被卷入高岛柘榴的自杀的由岐同学，在泽衣村死去的由岐同学，皆守君制造出\n的由岐同学…以及现在存在于此的由岐同学…”\n\n那，那种事情我才不管…我就是我…\n\n“在“幽灵房间…终之空”中看到的景色…那是什么时候的景色？”\n\n景色？\n\n唔\n\n这时不知为何…我想起了那个游乐设备里的薯片袋子上的保质期…\n\n想起了挂在那的挂历上的日期…\n\n虽然完全不清楚那到底是什么…\n\n不知为何…想起了那个时候的事情。\n\n虽然不知道那句话到底有没有意义。\n\n只是，想起了那个日期…\n\n“最后附加上的注释”\n\n“假设7…所有的存在都是由一个灵魂所产生的…”\n\n ![](https://cdn.luogu.com.cn/upload/pic/53831.png) \n\n天空，到底延伸到哪里呢...\n\n大概，\n\n是和全世界的天空连在一起的吧... \n\n那样的话...这天空和——\n\n——终之空\n\n是没有连在一起的\n\n要问为什么的话，\n\n那是因为，\n\n那是不可以存在的东西——\n\n但是——\n\n这又是真的吗？ \n\n“————”\n\n某处传来呼唤我的声音。\n\n呼唤我的同班同学的声音……\n\n所以我回过头去……\n\n![](https://cdn.luogu.com.cn/upload/pic/53829.png)", "description": "音无彩名给你一个数组 $A$，以及一棵 $n$ 个节点的树，每个点有一个颜色，颜色为 $1$ 到 $x$ 的整数。\n\n有 $m$ 次查询，每次查询树上只保留 $[l,r]$ 内的所有节点，设一个极大连通块中出现奇数次数的颜色个数为 $t$，则其对答案的贡献为 $A_t$ ，即答案是所有连通块贡献的和，询问间互相独立。", "inputFormat": "第一行三个用空格隔开的数 $n,m,x$。\n\n第二行 $n$ 个数表示每个点的颜色。\n\n之后 $n-1$ 行每行两个用空格隔开的数 $x,y$ 表示一条边。\n\n之后一行 $x+1$ 个数表示 $A_0$ 到 $A_x$ 。\n\n之后 $m$ 行，每行两个用空格隔开的数 $l,r$ 表示一次询问。", "outputFormat": "输出 $m$ 行，每行一个数表示这次询问的答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n注意：本题采用**捆绑测试**，只有当你通过一个 subtask 中的所有测试点后，你才能拿到这个 subtask 的分数。\n\n对于其中 $1\\%$ 的数据，为样例 1。\n\n对于另外 $9\\%$ 的数据，$n,m\\leq 200$。\n\n对于另外 $19\\%$ 的数据，$n,m\\leq 2000$。\n\n对于另外 $19\\%$ 的数据，$x\\leq 10$。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$1\\leq x,A_i \\leq 10^4$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2019] 美好的每一天~ 不连续的存在", "background": "3.0321\n\n虽然外面能在空间上表现一个违反物理规律的事态\n\n但是外面不能在空间上表现一个违反几何规律的事态。\n\nLudwig Josef Johann Wittgenstein【逻辑哲学论】\n\n![](https://cdn.luogu.com.cn/upload/pic/53829.png)\n\n……\n\n透明的…\n\n透明的白色？\n\n…不…不对\n\n这不是什么透明的白色…\n\n是白色的话就不是透明……那么…这是半透明的…\n\n但是…这也…并不是半透明…\n\n如果…要找个唯一能表达的词语的话…\n\n那就是…\n\n透明的白色…\n\n这是…那个啥…这是\n\n“光”\n\n【光】\n\n光？\n\n这是\n\n单纯的光\n\n是的……就是这样……\n\n这是——\n\n——光\n\n蝉的叫声……\n\n这里是…屋顶？\n\n环顾四周…那是司空见惯的风景…是A栋的屋顶\n\n为什么…为什么会在这里…\n\n间宫皆守为了保护羽咲跳了下去…然后…，\n\n然后…，\n\n然后发生了什么？\n\n今天是几号？那个，现在是…\n\n我确认了下手表，日期是2012年7月20日。\n\n从那时起…整整一天…\n\n到底发生了什么…\n\n梦……据说即使是明晰梦也少有能感觉到疼痛的……\n\n捏脸蛋能感觉到疼的话，就说明这里的景色是现实吗……\n \n音无彩名…同学\n\n“好久不见”\n\n“怎么了？”\n\n因为啊…离我们最后一次见面不是才只过了一天吗…\n\n“…这样啊”\n\n…我说\n\n“怎么？”\n\n间宫皆守怎么样了？\n\n“为什么…要问那种事？”\n\n那，那当然是因为很在意啊…而且说到底我也只是他创造出来的人格罢了…\n\n“那么他不就是还活着吗？”\n\n你说…什么\n\n“假设1…如果你…是间宫皆守创造出来的人格之一的话，你存在的这件事本身，就是间宫皆守的肉体还存在着的理由了…”\n\n但，但是…这样很奇怪对吧\n\n“哪里奇怪？”\n\n因为啊…他都受了那么重的伤了啊。才过一天怎么可能能跑到这种地方来\n\n“这样啊…”\n\n我即使出现，也是应该是在医院的床上的\n\n“那么假设2…你的存在不是因为解离性同一障碍而引起的…”\n\n“你的存在正是过去实际存在过的人物，水上由岐的灵魂。如果这个灵魂是寄宿\n在间宫皆守身上的…你存在于这里的理由换言之即…”\n\n“意味着间宫皆守的死…”\n\n怎，怎么会…\n\n“还有假设3…如果这里只是你做的梦的话…”\n\n“你眼前的我…也只是梦的产物…这个假设具有充分的说服力…”\n\n“那么…水上由岐小姐喜欢将其中哪一种作为现状说明呢？”\n\n喜欢哪种…我觉得更不是这种问题吧…\n\n“假设4…你只是我所看见的幻觉…是我创造出来的幻影…也就是说你并不存在”\n\n啊哈哈哈…那么，现在正在思考的我又成了什么呢？\n\n不是有正在思考的我存在吗\n\n“只不过是将我的大脑活动…的其中一部分，作为别的人格在认知而已…”\n\n“也就是说“你正在思考”这件事，并不能证明你存在…”\n\n“根本不能否定现在存在与此的水上由岐…是我创造出来的另一种人格的可能\n性”\n\n“这件事，在一具肉体里创造出三个人格的你应该是最能理解的…”\n\n“自己正在思考这件事…并不能成为自己存在的证明…”\n\n我说啊…我想知道的是\n\n“什么？”\n\n所以说，是在那之后怎么样了？\n\n“你想要知道的话就确认一下吧…打开屋顶的门，跑到外面的世界去就可以了…\n仅仅只需要这样而已”\n\n![](https://cdn.luogu.com.cn/upload/pic/53830.png) \n\n…\n\n正如音无彩名所言。\n\n要是真的那么在意的话…我只要从这里离开就好了。\n\n从这片屋顶上跑开，去看看外面的世界就行了。\n\n这样做的话，应该就能如我所愿地…得知一切的结果了。\n\n但是…\n\n只要出去就行…吗\n\n“嗯”\n\n虽然这也是一种方法…但能让我问个问题吗？\n\n“问什么？”\n\n今天是几号？\n\n“2012年7月20日…”\n\n也就是说…从明天开始就是暑假了？\n\n“对…从明天开始就是暑假…”\n\n昨天…应该是发生了集体自杀。\n\n根本不是还能安心地照常放暑假的那种小事。\n\n尽管如此…从屋顶看到的风景却…\n\n是一如既往的日常…\n\n走在走廊上的学生。\n\n在教室里谈话的学生。\n\n喊学生来找他的老师。\n\n这是毫无变化的日常。\n\n实在是看不出像是刚发生了那种事件…\n\n“怎么了吗”\n\n…彩名同学的假设…就这么多了吗？\n\n“假设…你还想要吗？”\n\n“说明的话你想要听多少都行…对这个世界的注释…人们想要多少就可以增加到\n多少”\n\n“如果那是你的愿望的话…无论多少…”\n\n卓司君说说的“终之空”是什么？\n\n那个啊…是不管是琴美的预言还是白莲华协会的预言里都不存在的词语哦…\n\n“终之空…就是字面上的”终结的天空””\n\n那个名字…是谁在什么时候起的呢…\n\n“记忆…”\n\n记忆？\n\n“幽灵房间…终之空…”\n\n唔\n\n“呵呵…你还记得”\n\n不是记得…那应该是我记错了吧…\n\n“是这样吗？”\n\n因，因为，那个…很奇怪对吧？\n\n“哪里奇怪？”\n\n因为啊…那个…是我被卷入高岛同学的自杀时做的梦吧？\n\n所以不是很奇怪吗\n\n“有什么奇怪的吗？”\n\n因为啊…如果那是，我已经被卷入高岛的自杀的话…时间轴就完全乱套了啊…因\n为在那之后我又一次体验了高岛同学的自杀\n\n“假设5…直到现在，你还没有从那个梦中醒来…”\n\n那个梦？\n\n“被卷入高岛柘榴自杀的水上由岐…现在这个瞬间正是她所做的梦的延续”\n\n梦，梦？你说现在？不…不过怎么想，说这是梦也太…\n\n“是吗…那么假设6…”幽灵房间…终之空”的记忆是错误的记忆…”\n\n“只是反复进行人格替换缩引起的记忆的混乱让你做了这样的梦…”\n\n“跳楼的高岛柘榴并没有撞上水上由岐，只是单纯的记忆混乱”\n\n那，那么，为什么卓司君会使用只在我梦中出现过的“终之空”这个词啊！\n\n“因为两者共享一个大脑，这样没有什么不可思议的…”\n\n那，那样的话…\n\n“你很在意最后看到的风景…那片天空的存在吗？”\n\n咕\n\n最后看见的…那片天空…\n\n间宫卓司君在跳楼的一刹那看到的那种风景。\n\n我不知为何觉得那种风景似曾相识…\n\n“不断重复的世界…从某个地点开始…”\n\n唔\n\n“可以确认一下吗？”\n\n什，什么？\n\n“称呼你，水上由岐同学…可以吗？”\n\n事，事到如今怎么这样问…你不是一直都这么叫我的吗…\n\n“由岐同学…水上由岐同学是谁？”\n\n哎？\n\n“由岐同学…是过去实际存在的人物，为了救间宫羽咲而死亡…在那之后，又作\n为间宫皆守所产生的人格而存在…”\n\n“那样的话…现在存在与此的由岐同学是谁？是已经死去的由岐同学？还是作为\n间宫皆守创造出来的人格的由岐同学？”\n\n就，就算你这么问…我也不知道…\n\n“正因为你不知道…才会问我…”\n\n“最后的注释…”\n\n“向由岐同学提问…”\n\n“这个世界上存在着多少个由岐同学呢？”\n\n哎？\n\n“一个，是在泽衣村出生…并在泽衣村死去的水上由岐…另一个是作为间宫皆守\n创造出来的人格的水上由岐…以及现在正在与我对话的存在与此的水上由岐”\n\n“那么请听题…请问你是第几位水上由岐小姐呢？”\n\n那，那种事我怎么知道…而且我就是我，才没有那么多人\n\n“在泽衣村死去的由岐同学，在皆守体内的由岐同学，还有现在在此的由岐同学\n是一样的…”\n\n“那么，其他还有可能存在的由岐小姐呢？”\n\n其他还有可能存在的我？\n\n“对…其他人格所产生的由岐同学…那也是由岐同学吗？”\n\n那种事我怎么知道…再说了要是有那么多我怎么受得了\n\n“但是事实上你并不是一个人…”\n\n“被卷入高岛柘榴的自杀的由岐同学，在泽衣村死去的由岐同学，皆守君制造出\n的由岐同学…以及现在存在于此的由岐同学…”\n\n那，那种事情我才不管…我就是我…\n\n“在“幽灵房间…终之空”中看到的景色…那是什么时候的景色？”\n\n景色？\n\n唔\n\n这时不知为何…我想起了那个游乐设备里的薯片袋子上的保质期…\n\n想起了挂在那的挂历上的日期…\n\n虽然完全不清楚那到底是什么…\n\n不知为何…想起了那个时候的事情。\n\n虽然不知道那句话到底有没有意义。\n\n只是，想起了那个日期…\n\n“最后附加上的注释”\n\n“假设7…所有的存在都是由一个灵魂所产生的…”\n\n ![](https://cdn.luogu.com.cn/upload/pic/53831.png) \n\n天空，到底延伸到哪里呢...\n\n大概，\n\n是和全世界的天空连在一起的吧... \n\n那样的话...这天空和——\n\n——终之空\n\n是没有连在一起的\n\n要问为什么的话，\n\n那是因为，\n\n那是不可以存在的东西——\n\n但是——\n\n这又是真的吗？ \n\n“————”\n\n某处传来呼唤我的声音。\n\n呼唤我的同班同学的声音……\n\n所以我回过头去……\n\n![](https://cdn.luogu.com.cn/upload/pic/53829.png)", "description": "音无彩名给你一个数组 $A$，以及一棵 $n$ 个节点的树，每个点有一个颜色，颜色为 $1$ 到 $x$ 的整数。\n\n有 $m$ 次查询，每次查询树上只保留 $[l,r]$ 内的所有节点，设一个极大连通块中出现奇数次数的颜色个数为 $t$，则其对答案的贡献为 $A_t$ ，即答案是所有连通块贡献的和，询问间互相独立。", "inputFormat": "第一行三个用空格隔开的数 $n,m,x$。\n\n第二行 $n$ 个数表示每个点的颜色。\n\n之后 $n-1$ 行每行两个用空格隔开的数 $x,y$ 表示一条边。\n\n之后一行 $x+1$ 个数表示 $A_0$ 到 $A_x$ 。\n\n之后 $m$ 行，每行两个用空格隔开的数 $l,r$ 表示一次询问。", "outputFormat": "输出 $m$ 行，每行一个数表示这次询问的答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n注意：本题采用**捆绑测试**，只有当你通过一个 subtask 中的所有测试点后，你才能拿到这个 subtask 的分数。\n\n对于其中 $1\\%$ 的数据，为样例 1。\n\n对于另外 $9\\%$ 的数据，$n,m\\leq 200$。\n\n对于另外 $19\\%$ 的数据，$n,m\\leq 2000$。\n\n对于另外 $19\\%$ 的数据，$x\\leq 10$。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$1\\leq x,A_i \\leq 10^4$。\n", "locale": "zh-CN"}}}
{"pid": "P6581", "type": "P", "difficulty": 1, "samples": [["3", "5"], ["1145141919810", "2290283839619"], ["12345", "24689"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷月赛"], "title": "远大目标", "background": "众所周知，一个 OIer 的最远大的目标，就是要 AK IOI。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/81f0x6hi.png)\n\n（图片来自[《深入浅出 程序设计竞赛 基础册》](https://class.luogu.com.cn/course/lgbook1)）\n\n\n做为一名 OIer，小 Z 也想 AK IOI。但他还是太菜了，连说一句 `I AK IOI` 都会遭到大神的鄙视。\n\n所以，小 Z 只好说 `|A|<|O|` 来勉励自己。\n\n但是，Youyou 大佬看到了，很不屑，说：就你这水平还想 AK IOI？算了，你说了 `|A|<|O|`，就给你一道题目做做吧。\n\n可怜的小 Z 实在是太菜了，连这题都不会，所以只好求助于你——未来的 IOI AKer。 ", "description": "给你 $O$，求出满足 $|A|<O$ 且 $A$ 为整数的 $A$ 的个数。 \n\n由于小 Z 太菜了，于是连 `|A|<|O|` 都不敢说了，只好来研究这 `|A|<O` 的问题。", "inputFormat": "一行一个整数 $O$。 ", "outputFormat": "一行一个整数，满足条件的整数 $A$ 的个数。 ", "hint": "**样例 1 解释**\n\n$A$ 的取值可以是 $-1, 0$ 和 $1$。\n\n**数据规模和约定**\n\n* Subtask 1（30 分）：$0 \\le |O| \\le 2^{10}-1$；\n* Subtask 2（60 分）：$0 \\le |O| \\le 2^{31}-1$；\n* Subtask 3（10 分）：$0 \\le |O| \\le 2^{63}-1$。\n\n$|O|$ 表示 $O$ 的绝对值。\n\n**提示**\n\n如果您不了解绝对值是什么，可以理解为：\n\n$$|x| = \\begin{cases} x & (x > 0) \\\\ 0 & (x = 0) \\\\ -x & (x < 0)\\end{cases}$$\n\n原idea: [Meatherm](https://www.luogu.com.cn/user/108949)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "远大目标", "background": "众所周知，一个 OIer 的最远大的目标，就是要 AK IOI。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/81f0x6hi.png)\n\n（图片来自[《深入浅出 程序设计竞赛 基础册》](https://class.luogu.com.cn/course/lgbook1)）\n\n\n做为一名 OIer，小 Z 也想 AK IOI。但他还是太菜了，连说一句 `I AK IOI` 都会遭到大神的鄙视。\n\n所以，小 Z 只好说 `|A|<|O|` 来勉励自己。\n\n但是，Youyou 大佬看到了，很不屑，说：就你这水平还想 AK IOI？算了，你说了 `|A|<|O|`，就给你一道题目做做吧。\n\n可怜的小 Z 实在是太菜了，连这题都不会，所以只好求助于你——未来的 IOI AKer。 ", "description": "给你 $O$，求出满足 $|A|<O$ 且 $A$ 为整数的 $A$ 的个数。 \n\n由于小 Z 太菜了，于是连 `|A|<|O|` 都不敢说了，只好来研究这 `|A|<O` 的问题。", "inputFormat": "一行一个整数 $O$。 ", "outputFormat": "一行一个整数，满足条件的整数 $A$ 的个数。 ", "hint": "**样例 1 解释**\n\n$A$ 的取值可以是 $-1, 0$ 和 $1$。\n\n**数据规模和约定**\n\n* Subtask 1（30 分）：$0 \\le |O| \\le 2^{10}-1$；\n* Subtask 2（60 分）：$0 \\le |O| \\le 2^{31}-1$；\n* Subtask 3（10 分）：$0 \\le |O| \\le 2^{63}-1$。\n\n$|O|$ 表示 $O$ 的绝对值。\n\n**提示**\n\n如果您不了解绝对值是什么，可以理解为：\n\n$$|x| = \\begin{cases} x & (x > 0) \\\\ 0 & (x = 0) \\\\ -x & (x < 0)\\end{cases}$$\n\n原idea: [Meatherm](https://www.luogu.com.cn/user/108949)", "locale": "zh-CN"}}}
{"pid": "P6582", "type": "P", "difficulty": 3, "samples": [["2 3 2\nOOX\nXXO", "4"], ["2 3 3\nXOX\nXOO", "12"], ["2 3 4\nXOO\nXOO", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷月赛"], "title": "座位调查", "background": "ION 2048 结束了，但 ℲƆƆ 发现，一个机房里发生了性质恶劣的作弊事件。", "description": "Youyou 奉命来到该机房进行调查。已知该机房是一个 $n \\times m$ 的矩阵，每个位置是 `O` 或 `X`，其中 `O` 表示该位置是座位，`X` 表示该位置是空地。**每个座位上都必须坐有学生**，当然，至少有一个座位。\n\n要想查明作弊的学生，Youyou 必须知道这个机房中的考生有多少种座位的可能。ION 2048 有来自 $k$ 个学校的考生参加，且座位满足以下要求：\n\n* 考场中的座位是由若干长条形组成的，这样方便管理；\n* 任意考生不可能和来自同学校的考生座位相邻，可以避免交流。\n\n两个座位是相邻的当且仅当它们有一条**公共边**。\n\n条形定义为除了两个端点只有一个相邻的座位外，每个座位都恰好有两个相邻座位，当然，一个座位也属于条形的。\n\n例如，下面的都**是**「条形的座位」。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7ew1c6c.png)\n\n下面的都**不是**「条形的座位」。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x7z4d6yx.png)\n\n注：方格中的数字表示与其相邻的座位的个数。\n\n试求出合法的座位方案总数，由于结果可能很大，请输出结果对质数 $998244353$ 取模的结果。如果这个机房本身就不可能是 ION 2048 的考试机房，答案应当是 $0$。", "inputFormat": "第一行三个正整数，$n,m$ 和 $k$。\n\n接下来 $n$ 行，每行 $m$ 个字符，表示机房的情况。保证只有 `O`，`X` 两种字符，且 `O` 至少出现一次。", "outputFormat": "一行一个整数，表示结果对质数 $998244353$ 取模的结果。", "hint": "**样例 1 解释**\n\n可能有以下 $4$ 种情况，红色代表学校 $1$ 的学生，蓝色代表学校 $2$ 的学生：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d6riqiby.png)\n\n**样例 2 解释**\n\n可能有以下 $12$ 种情况，红色代表学校 $1$ 的学生，蓝色代表学校 $2$ 的学生，黄色代表学校 $3$ 的学生：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4ni46qzf.png)\n\n**样例 3 解释**\n\n机房不是条形安排的，所以答案为 $0$。\n\n**数据规模与约定**\n\n* Subtask 1（10 分）：$n = 1$，$k = 2$；\n* Subtask 2（15 分）：$n = 1$，$2 \\le m,k \\le 8$；\n* Subtask 3（15 分）：$n = 1$；\n* Subtask 4（20 分）：保证座位设置是条形的，$k = 2$；\n* Subtask 5（20 分）：保证座位设置是条形的；\n* Subtask 6（20 分）：无特殊限制。\n\n对于全部的数据，$1 \\le n, m \\le 10^3$，$2 \\le k \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "座位调查", "background": "ION 2048 结束了，但 ℲƆƆ 发现，一个机房里发生了性质恶劣的作弊事件。", "description": "Youyou 奉命来到该机房进行调查。已知该机房是一个 $n \\times m$ 的矩阵，每个位置是 `O` 或 `X`，其中 `O` 表示该位置是座位，`X` 表示该位置是空地。**每个座位上都必须坐有学生**，当然，至少有一个座位。\n\n要想查明作弊的学生，Youyou 必须知道这个机房中的考生有多少种座位的可能。ION 2048 有来自 $k$ 个学校的考生参加，且座位满足以下要求：\n\n* 考场中的座位是由若干长条形组成的，这样方便管理；\n* 任意考生不可能和来自同学校的考生座位相邻，可以避免交流。\n\n两个座位是相邻的当且仅当它们有一条**公共边**。\n\n条形定义为除了两个端点只有一个相邻的座位外，每个座位都恰好有两个相邻座位，当然，一个座位也属于条形的。\n\n例如，下面的都**是**「条形的座位」。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7ew1c6c.png)\n\n下面的都**不是**「条形的座位」。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x7z4d6yx.png)\n\n注：方格中的数字表示与其相邻的座位的个数。\n\n试求出合法的座位方案总数，由于结果可能很大，请输出结果对质数 $998244353$ 取模的结果。如果这个机房本身就不可能是 ION 2048 的考试机房，答案应当是 $0$。", "inputFormat": "第一行三个正整数，$n,m$ 和 $k$。\n\n接下来 $n$ 行，每行 $m$ 个字符，表示机房的情况。保证只有 `O`，`X` 两种字符，且 `O` 至少出现一次。", "outputFormat": "一行一个整数，表示结果对质数 $998244353$ 取模的结果。", "hint": "**样例 1 解释**\n\n可能有以下 $4$ 种情况，红色代表学校 $1$ 的学生，蓝色代表学校 $2$ 的学生：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d6riqiby.png)\n\n**样例 2 解释**\n\n可能有以下 $12$ 种情况，红色代表学校 $1$ 的学生，蓝色代表学校 $2$ 的学生，黄色代表学校 $3$ 的学生：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4ni46qzf.png)\n\n**样例 3 解释**\n\n机房不是条形安排的，所以答案为 $0$。\n\n**数据规模与约定**\n\n* Subtask 1（10 分）：$n = 1$，$k = 2$；\n* Subtask 2（15 分）：$n = 1$，$2 \\le m,k \\le 8$；\n* Subtask 3（15 分）：$n = 1$；\n* Subtask 4（20 分）：保证座位设置是条形的，$k = 2$；\n* Subtask 5（20 分）：保证座位设置是条形的；\n* Subtask 6（20 分）：无特殊限制。\n\n对于全部的数据，$1 \\le n, m \\le 10^3$，$2 \\le k \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P6583", "type": "P", "difficulty": 5, "samples": [["3", "7"], ["5", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数论", "洛谷月赛", "整除分块"], "title": "回首过去", "background": ">明天你是否会想起\n>\n>昨天未调完的题\n>\n>明天你是否还惦记\n>\n>考场写挂的暴力\n\n[OEIS 入口](http://oeis.org/)", "description": "在小学时，小 Z 就已经开始学\n OI 了。\n\n有一次，在数学课上，老师问了这样一个问题：\n求出有序整数对 $(x,y)$ 的个数，满足 $1\\le x,y\\le 5$ 且 $\\frac{x}{y}$ 可以表示为十进制有限小数。\n\n当然，小 Z 很快就算了出来。\n\n但因为他是学了 OI 的，所以他就推广了一下：\n\n**给定正整数 $n$，求出有序整数对 $(x,y)$ 的个数，满足 $1\\le x,y\\le n$ 且 $\\frac{x}{y}$ 可以表示为十进制有限小数。**\n\n当时，他还是一个菜鸡，只会\n $O(n^2)$ 的暴力。\n\n过了几年，他偶然又翻到了这道题。现在他会了一种更好的方法，于是就把这题出了出来，给你来做做。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个整数表示答案。", "hint": "**样例 1 解释**\n\n$\\frac{1}{1}$，$\\frac{1}{2}$，$\\frac{2}{1}$，$\\frac{2}{2}$，$\\frac{3}{1}$，$\\frac{3}{2}$，$\\frac{3}{3}$ 都可以表示为十进制有限小数。\n\n**数据规模与约定**\n\n* Subtask 1（40 分），$1 \\le n \\le 10^3$；\n* Subtask 2（40 分），$1 \\le n \\le 10^7$；\n* Subtask 3（20 分），$1 \\le n \\le 10^{12}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "回首过去", "background": ">明天你是否会想起\n>\n>昨天未调完的题\n>\n>明天你是否还惦记\n>\n>考场写挂的暴力\n\n[OEIS 入口](http://oeis.org/)", "description": "在小学时，小 Z 就已经开始学\n OI 了。\n\n有一次，在数学课上，老师问了这样一个问题：\n求出有序整数对 $(x,y)$ 的个数，满足 $1\\le x,y\\le 5$ 且 $\\frac{x}{y}$ 可以表示为十进制有限小数。\n\n当然，小 Z 很快就算了出来。\n\n但因为他是学了 OI 的，所以他就推广了一下：\n\n**给定正整数 $n$，求出有序整数对 $(x,y)$ 的个数，满足 $1\\le x,y\\le n$ 且 $\\frac{x}{y}$ 可以表示为十进制有限小数。**\n\n当时，他还是一个菜鸡，只会\n $O(n^2)$ 的暴力。\n\n过了几年，他偶然又翻到了这道题。现在他会了一种更好的方法，于是就把这题出了出来，给你来做做。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行一个整数表示答案。", "hint": "**样例 1 解释**\n\n$\\frac{1}{1}$，$\\frac{1}{2}$，$\\frac{2}{1}$，$\\frac{2}{2}$，$\\frac{3}{1}$，$\\frac{3}{2}$，$\\frac{3}{3}$ 都可以表示为十进制有限小数。\n\n**数据规模与约定**\n\n* Subtask 1（40 分），$1 \\le n \\le 10^3$；\n* Subtask 2（40 分），$1 \\le n \\le 10^7$；\n* Subtask 3（20 分），$1 \\le n \\le 10^{12}$。", "locale": "zh-CN"}}}
{"pid": "P6584", "type": "P", "difficulty": 5, "samples": [["5\n1 2\n2 3\n3 4\n4 5\n5\n1 2 3 4 5\n0 3", "3"], ["5\n1 2\n1 3\n2 4\n2 5\n4\n1 1 2 2\n1 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "洛谷月赛"], "title": "重拳出击", "background": "", "description": "小 Z 和 $m$ 个 Youyou 在一棵树上相遇了！\n\n这棵树上，每条边的长度都是 $1$。\n\n初始时，小 Z 在 $x$ 号节点上，并且有一把射程为 $k$ 的枪。\n\n因为小 Z 技术精湛，所以 Youyou 一打就死，而小 Z 永远不会死掉。\n\n小 Z 和 Youyou 都按回合行动，在每一回合中，按照下面的顺序行动：\n\n1. 回合计数器 $+1$（初始为 $0$）。\n\n2. 小 Z 可以用枪射死与小 Z 树上距离小于等于 $k$ 的所有 Youyou。\n\n3. 如果所有 Youyou 都被消灭了，游戏结束，这时回合计数器的值就是小 Z 用的回合数。\n\n4. 小 Z 可以选择沿着一条边，移动到任意相邻节点，也可以选择不动。\n\n5. 所有 Youyou 都会沿着他和小 Z 的简单路径向小 Z 移动一条边的距离。如果此时他们在同一个节点，则不动。\n\n小 Z 需要求出消灭所有敌人需要的最小回合数。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n-1$ 行每行两个正整数，表示这棵树上的一条边。\n\n接下来一行一个正整数 $m$。\n\n接下来一行 $m$ 个正整数，第 $i$ 个数表示第 $i$ 个 Youyou 的初始所在节点。\n\n最后一行两个整数，$k$ 和小 Z 自己的初始所在节点号 $x$。", "outputFormat": "一行一个正整数，最小回合数。", "hint": "**样例 2 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/75xvvplh.png)\n\n小 Z 可以在第一回合射死后两个 Youyou，然后从节点 $5$ 移动到节点 $2$。剩余的两个 Youyou 也会移动到节点  $2$。第二回合小 Z 可以消灭所有 Youyou。可以证明这就是最优方案。\n\n**数据规模与约定**\n\n* Subtask 1（10 分）：$1 \\le n,m \\le 20$；\n* Subtask 2（15 分）：$1 \\le n,m \\le 2\\times 10^3$；\n* Subtask 3（30 分）：$1 \\le n,m \\le 4\\times 10^4$；\n* Subtask 4（45 分）：$1 \\le n,m \\le 4\\times 10^5$。\n\n对于全部的数据，$1 \\le n,m \\le 4\\times 10^5$，$0 \\le k \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "重拳出击", "background": "", "description": "小 Z 和 $m$ 个 Youyou 在一棵树上相遇了！\n\n这棵树上，每条边的长度都是 $1$。\n\n初始时，小 Z 在 $x$ 号节点上，并且有一把射程为 $k$ 的枪。\n\n因为小 Z 技术精湛，所以 Youyou 一打就死，而小 Z 永远不会死掉。\n\n小 Z 和 Youyou 都按回合行动，在每一回合中，按照下面的顺序行动：\n\n1. 回合计数器 $+1$（初始为 $0$）。\n\n2. 小 Z 可以用枪射死与小 Z 树上距离小于等于 $k$ 的所有 Youyou。\n\n3. 如果所有 Youyou 都被消灭了，游戏结束，这时回合计数器的值就是小 Z 用的回合数。\n\n4. 小 Z 可以选择沿着一条边，移动到任意相邻节点，也可以选择不动。\n\n5. 所有 Youyou 都会沿着他和小 Z 的简单路径向小 Z 移动一条边的距离。如果此时他们在同一个节点，则不动。\n\n小 Z 需要求出消灭所有敌人需要的最小回合数。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n-1$ 行每行两个正整数，表示这棵树上的一条边。\n\n接下来一行一个正整数 $m$。\n\n接下来一行 $m$ 个正整数，第 $i$ 个数表示第 $i$ 个 Youyou 的初始所在节点。\n\n最后一行两个整数，$k$ 和小 Z 自己的初始所在节点号 $x$。", "outputFormat": "一行一个正整数，最小回合数。", "hint": "**样例 2 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/75xvvplh.png)\n\n小 Z 可以在第一回合射死后两个 Youyou，然后从节点 $5$ 移动到节点 $2$。剩余的两个 Youyou 也会移动到节点  $2$。第二回合小 Z 可以消灭所有 Youyou。可以证明这就是最优方案。\n\n**数据规模与约定**\n\n* Subtask 1（10 分）：$1 \\le n,m \\le 20$；\n* Subtask 2（15 分）：$1 \\le n,m \\le 2\\times 10^3$；\n* Subtask 3（30 分）：$1 \\le n,m \\le 4\\times 10^4$；\n* Subtask 4（45 分）：$1 \\le n,m \\le 4\\times 10^5$。\n\n对于全部的数据，$1 \\le n,m \\le 4\\times 10^5$，$0 \\le k \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P6585", "type": "P", "difficulty": 6, "samples": [["4 1\n\n\n2 1\n", "\n0\n1 1\n\n4 -1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["交互题", "Special Judge", "洛谷月赛"], "title": "中子衰变", "background": "这是一道**交互题**。\n\n可能会用到的前置知识：\n\n质子带一个单位的正电荷。\n\n电子带一个单位的负电荷。\n\n中子不带电。", "description": "Youyou 和小 Z 面前有 $n$ 个中子，从左往右排成一行，这些中子被强作用力固定在编号为 $1 \\sim n$ 的位置上。\n\n小 Z 拥有一台弱作用衰变机 Wadm（Weak Action Decay Machine）。Wadm 每次可以使一个中子发生弱作用衰变，放出一个电子和一个质子（本题中不考虑中微子），然后 Wadm 会根据 Youyou 或小 Z 的指令，留下其中一个粒子，然后将另一个粒子移出体系。\n\n简而言之，Wadm 可以将一个中子变为一个电子或一个质子。\n\n现在小 Z 想和 Youyou 玩一个游戏：两个人轮流使用 Wadm 操作一个中子，将其变为一个电子或一个质子。然而，如果一个电子和质子相邻，那么由于强大的库仑引力的作用，它们会脱离强作用力的束缚，所以这种情况是不被允许的。如果轮到某人操作时，所有位置都不能操作了，那么他就输了。\n\nYouyou 快乐地答应了小 Z 的游戏请求，但是面对聪明的小 Z，Youyou 只好来求助你了。\n\n特别地，**如果全部中子最后变成了同种粒子，那么后手获胜**。\n\n如果你帮助 Youyou 打败了小 Z，那么 Youyou 就会送你一台 Wadm 作为奖励！\n\n## 交互方式\n\n你的程序应从标准输入中读入，向标准输出中输出。\n\n输入中将包含两个整数 `n task_id` ，分别代表题目中的 $n$ 和子任务编号。\n\n然后你需要输出一个整数 `order`，$\\text{order}$ 只能是 $0$ 或 $1$。$0$ 代表你选择先手，$1$ 代表你选择后手。\n\n接下来，你应该根据你选择的先后手情况通过标准输入输出与交互库进行交互。\n\n- 若轮到你操作，那么你应该接着输出两个整数 `place type`，代表你将位置在 $\\text{place}$ 的中子变为了电子（$\\text{type}=-1$）或质子（$\\text{type}=1$）。其中，你需要保证：\n  - $\\text{place} \\in [1,n]$ 且该位置可以操作；\n  - $\\text{type} \\in \\{-1,1\\}$；\n  - **你已经清空缓冲区**。在 C 或 C++ 中，可使用 `fflush(stdout)` 函数。在 C++ 中，还可使用 `cout << flush`，`cout.flush()`，或使用 `endl` 而不是 `'\\n'` 来输出一个换行。\n\n- 若轮到小 Z 操作，那么你应该接着读入两个整数 `place type`，代表小 Z 将位置在 $\\text{place}$ 的中子变为了电子（$\\text{type}=-1$）或质子（$\\text{type}=1$）。其中，保证：\n  - $\\text{place} \\in [1,n]$ 且该位置可以操作；\n  - $\\text{type} \\in \\{-1,1\\}$。\n\n例如，如果你选择先手，那么你应该按照「输出，输入，输出，输入……」的顺序进行交互。如果你选择后手，那么你应该按照「输入，输出，输入，输出……」的顺序进行交互。\n\n请注意，如果游戏结束，你应当立即终止程序。游戏结束后多余的输出可能会导致 RE 。", "inputFormat": "见「交互方式」。", "outputFormat": "见「交互方式」。", "hint": "* Subtask 1（5 分）：$n \\leq 4$；\n* Subtask 2（8 分）：$n \\leq 8$；\n* Subtask 3（12 分）：$n$ 为偶数，交互库特殊策略*；\n* Subtask 4（15 分）：交互库特殊策略*；\n* Subtask 5（20 分）：$n$ 为偶数；\n* Subtask 6（40 分）：无特殊限制。\n\n*交互库特殊策略：每次轮到交互库操作时，交互库会找到最左侧的能操作的位置，然后如果该位置能操作为质子，则操作为质子，否则操作为电子。\n\n对于全部的数据，保证 $1 \\leq n \\leq 2^{10}$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "中子衰变", "background": "这是一道**交互题**。\n\n可能会用到的前置知识：\n\n质子带一个单位的正电荷。\n\n电子带一个单位的负电荷。\n\n中子不带电。", "description": "Youyou 和小 Z 面前有 $n$ 个中子，从左往右排成一行，这些中子被强作用力固定在编号为 $1 \\sim n$ 的位置上。\n\n小 Z 拥有一台弱作用衰变机 Wadm（Weak Action Decay Machine）。Wadm 每次可以使一个中子发生弱作用衰变，放出一个电子和一个质子（本题中不考虑中微子），然后 Wadm 会根据 Youyou 或小 Z 的指令，留下其中一个粒子，然后将另一个粒子移出体系。\n\n简而言之，Wadm 可以将一个中子变为一个电子或一个质子。\n\n现在小 Z 想和 Youyou 玩一个游戏：两个人轮流使用 Wadm 操作一个中子，将其变为一个电子或一个质子。然而，如果一个电子和质子相邻，那么由于强大的库仑引力的作用，它们会脱离强作用力的束缚，所以这种情况是不被允许的。如果轮到某人操作时，所有位置都不能操作了，那么他就输了。\n\nYouyou 快乐地答应了小 Z 的游戏请求，但是面对聪明的小 Z，Youyou 只好来求助你了。\n\n特别地，**如果全部中子最后变成了同种粒子，那么后手获胜**。\n\n如果你帮助 Youyou 打败了小 Z，那么 Youyou 就会送你一台 Wadm 作为奖励！\n\n## 交互方式\n\n你的程序应从标准输入中读入，向标准输出中输出。\n\n输入中将包含两个整数 `n task_id` ，分别代表题目中的 $n$ 和子任务编号。\n\n然后你需要输出一个整数 `order`，$\\text{order}$ 只能是 $0$ 或 $1$。$0$ 代表你选择先手，$1$ 代表你选择后手。\n\n接下来，你应该根据你选择的先后手情况通过标准输入输出与交互库进行交互。\n\n- 若轮到你操作，那么你应该接着输出两个整数 `place type`，代表你将位置在 $\\text{place}$ 的中子变为了电子（$\\text{type}=-1$）或质子（$\\text{type}=1$）。其中，你需要保证：\n  - $\\text{place} \\in [1,n]$ 且该位置可以操作；\n  - $\\text{type} \\in \\{-1,1\\}$；\n  - **你已经清空缓冲区**。在 C 或 C++ 中，可使用 `fflush(stdout)` 函数。在 C++ 中，还可使用 `cout << flush`，`cout.flush()`，或使用 `endl` 而不是 `'\\n'` 来输出一个换行。\n\n- 若轮到小 Z 操作，那么你应该接着读入两个整数 `place type`，代表小 Z 将位置在 $\\text{place}$ 的中子变为了电子（$\\text{type}=-1$）或质子（$\\text{type}=1$）。其中，保证：\n  - $\\text{place} \\in [1,n]$ 且该位置可以操作；\n  - $\\text{type} \\in \\{-1,1\\}$。\n\n例如，如果你选择先手，那么你应该按照「输出，输入，输出，输入……」的顺序进行交互。如果你选择后手，那么你应该按照「输入，输出，输入，输出……」的顺序进行交互。\n\n请注意，如果游戏结束，你应当立即终止程序。游戏结束后多余的输出可能会导致 RE 。", "inputFormat": "见「交互方式」。", "outputFormat": "见「交互方式」。", "hint": "* Subtask 1（5 分）：$n \\leq 4$；\n* Subtask 2（8 分）：$n \\leq 8$；\n* Subtask 3（12 分）：$n$ 为偶数，交互库特殊策略*；\n* Subtask 4（15 分）：交互库特殊策略*；\n* Subtask 5（20 分）：$n$ 为偶数；\n* Subtask 6（40 分）：无特殊限制。\n\n*交互库特殊策略：每次轮到交互库操作时，交互库会找到最左侧的能操作的位置，然后如果该位置能操作为质子，则操作为质子，否则操作为电子。\n\n对于全部的数据，保证 $1 \\leq n \\leq 2^{10}$ 。", "locale": "zh-CN"}}}
{"pid": "P6586", "type": "P", "difficulty": 2, "samples": [["5\n1 2 3 4 5\n3\n1 3 5\n2", "Great Set!"], ["15\n13 2 10 3 1 12 8 4 5 7 9 6 15 14 11 \n7\n13 2 1 12 8 3 10 \n2", "8"], ["50\n13 2 10 50 1 28 37 32 30 46 19 47 33 41 24 34 27 42 49 18 9 48 23 35 31 8 7 12 6 5 3 22 43 36 11 40 26 4 44 17 39 38 15 14 25 16 29 20 21 45 \n10\n50 46 30 32 10 2 28 37 1 13 \n3", "31"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200, 51200]}, "tags": ["模拟", "2020"], "title": "『JROI-1』 蒟蒻火锅的盛宴", "background": "点击展开阅读更佳，**题目背景与解题无关。**\n\n----------\n传说专门服务神仙们的蒟蒻火锅店前面有一首诗：\n\n灶前无用煮青山，不识神炉自往还。\n\n玉碗琼浆谁乞赐，瑶琴银箭可容攀。\n\n风生夜气通云汉，雨歇秋光上碧湾。\n\n却笑老奴真倦眼，此心空处一团闲。\n\n----\nQiuly 是洛谷著名餐厅“蒟蒻火锅店”的主厨，当中的伙计很多，比如呆呆的 Aw 顿顿，机智的 Cocoly1990 还有珂爱的 45dino。Qiuly 喜欢让顿顿为他准备丰富多样的食材，制作火锅的必需品包括但不限于七星章鱼和芥末鱼子酱，当然，还有各种各样珍稀而奇怪的食材：\n\n- 蒟蒻果冻制成的蒟蒻团子。\n- 糯米（雾）制成的糯米青团。\n- Aw 顿顿制成的菜鸡糕。\n- Bamboo（45dino）。\n\n这些食材难以收集，但是神仙 Qiuly 还是全部弄到手了。接下来她要让顿顿**分类这些食材**。但是顿顿是菜鸡，根本不会分类，他崩溃了。于是他请你，IOI 的 AKer，帮助他分类这些食材，因为这个问题事关 Qiuly 的成绩（IOI 第一名还是第二名），所以你必须尽快。\n\n每一个食材都有各种各样的奇怪特性，根据这些特性，Aw 顿顿咨询了全世界的专家们，评价出了**一个食材的美味程度**，根据这个程度可以**有效的分类食材**。如果你不能**在 $\\bf 400$ 毫秒内**给出答案，你就会成为一个食材，光荣的沉没在 Qiuly 精心调制的汤底中。", "description": "有 $n$ 个互不相同的整数，现有 $m$ 个整数属于集合 $G$ 中。\n\nAw顿顿规定这个集合有如下规定：\n\n- 若 $x\\in G$，则 $x+a\\in G$。\n- 若 $x+a$ 不在 $n$ 个整数中就不做处理。\n- 若对于一个集合 $G$ 不存在需要加入的元素，那么它是完善的。\n\n若集合是完善的，输出 `Great Set!`，反之输出至少还要按规定加入几个食材才能完善该级别。", "inputFormat": "第一行是一个整数 $n$，表示一共有 $n$ 个整数。\n\n接下来一行存在 $n$ 个用空格隔开的整数 $A_i$，**互不相同**。\n\n下一行一个正整数 $m$，表示集合 $G$ 当中有 $m$ 个整数，均属于 $n$ 个整数当中。\n\n接下来一行是 $m$ 个用空格隔开的整数。\n\n最后是一个正整数 $a$。", "outputFormat": "如果这个集合已经完善，输出 `Great Set!`。\n\n反之输出需要完善该集合所需的整数数量。", "hint": "### 【样例解释】\n\n#### 样例 1 解释\n\n这个集合包含 $1,3,5$，其中 $1+2=3$，$3+2=5$，$5+2=7$ 不存在，所以这个集合是完善的。\n\n#### 样例 2 解释\n\n剩下的所有整数都属于这个集合。\n\n### 【数据范围】\n\n- $1\\le m<n\\le6\\times10^4$。\n- $1\\le A_i\\le n$。\n- $0\\le a\\le 10^4$。\n\n### 【捆绑测试情况】\n\n|测试点编号|时间限制|分数分配|$n,m\\le$|\n|:--------:|:------:|:------:|:------:|\n|$\\rm Subtask 1$|$\\rm 400ms$|$\\rm 10pts$|$10^3$|\n|$\\rm Subtask 2$|$\\rm 400ms$|$\\rm 15pts$|$10^4$|\n|$\\rm Subtask 3$|$\\rm 400ms$|$\\rm 35pts$|$3\\times 10^4$|\n|$\\rm Subtask 4$|$\\rm 400ms$|$\\rm 40pts$|$6\\times 10^4$|\n\n$\\rm P.S.$ 这题的时限已经开到 $\\rm std$ 的 $\\bf 15$ 倍，附件内有部分测试点。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-1』 蒟蒻火锅的盛宴", "background": "点击展开阅读更佳，**题目背景与解题无关。**\n\n----------\n传说专门服务神仙们的蒟蒻火锅店前面有一首诗：\n\n灶前无用煮青山，不识神炉自往还。\n\n玉碗琼浆谁乞赐，瑶琴银箭可容攀。\n\n风生夜气通云汉，雨歇秋光上碧湾。\n\n却笑老奴真倦眼，此心空处一团闲。\n\n----\nQiuly 是洛谷著名餐厅“蒟蒻火锅店”的主厨，当中的伙计很多，比如呆呆的 Aw 顿顿，机智的 Cocoly1990 还有珂爱的 45dino。Qiuly 喜欢让顿顿为他准备丰富多样的食材，制作火锅的必需品包括但不限于七星章鱼和芥末鱼子酱，当然，还有各种各样珍稀而奇怪的食材：\n\n- 蒟蒻果冻制成的蒟蒻团子。\n- 糯米（雾）制成的糯米青团。\n- Aw 顿顿制成的菜鸡糕。\n- Bamboo（45dino）。\n\n这些食材难以收集，但是神仙 Qiuly 还是全部弄到手了。接下来她要让顿顿**分类这些食材**。但是顿顿是菜鸡，根本不会分类，他崩溃了。于是他请你，IOI 的 AKer，帮助他分类这些食材，因为这个问题事关 Qiuly 的成绩（IOI 第一名还是第二名），所以你必须尽快。\n\n每一个食材都有各种各样的奇怪特性，根据这些特性，Aw 顿顿咨询了全世界的专家们，评价出了**一个食材的美味程度**，根据这个程度可以**有效的分类食材**。如果你不能**在 $\\bf 400$ 毫秒内**给出答案，你就会成为一个食材，光荣的沉没在 Qiuly 精心调制的汤底中。", "description": "有 $n$ 个互不相同的整数，现有 $m$ 个整数属于集合 $G$ 中。\n\nAw顿顿规定这个集合有如下规定：\n\n- 若 $x\\in G$，则 $x+a\\in G$。\n- 若 $x+a$ 不在 $n$ 个整数中就不做处理。\n- 若对于一个集合 $G$ 不存在需要加入的元素，那么它是完善的。\n\n若集合是完善的，输出 `Great Set!`，反之输出至少还要按规定加入几个食材才能完善该级别。", "inputFormat": "第一行是一个整数 $n$，表示一共有 $n$ 个整数。\n\n接下来一行存在 $n$ 个用空格隔开的整数 $A_i$，**互不相同**。\n\n下一行一个正整数 $m$，表示集合 $G$ 当中有 $m$ 个整数，均属于 $n$ 个整数当中。\n\n接下来一行是 $m$ 个用空格隔开的整数。\n\n最后是一个正整数 $a$。", "outputFormat": "如果这个集合已经完善，输出 `Great Set!`。\n\n反之输出需要完善该集合所需的整数数量。", "hint": "### 【样例解释】\n\n#### 样例 1 解释\n\n这个集合包含 $1,3,5$，其中 $1+2=3$，$3+2=5$，$5+2=7$ 不存在，所以这个集合是完善的。\n\n#### 样例 2 解释\n\n剩下的所有整数都属于这个集合。\n\n### 【数据范围】\n\n- $1\\le m<n\\le6\\times10^4$。\n- $1\\le A_i\\le n$。\n- $0\\le a\\le 10^4$。\n\n### 【捆绑测试情况】\n\n|测试点编号|时间限制|分数分配|$n,m\\le$|\n|:--------:|:------:|:------:|:------:|\n|$\\rm Subtask 1$|$\\rm 400ms$|$\\rm 10pts$|$10^3$|\n|$\\rm Subtask 2$|$\\rm 400ms$|$\\rm 15pts$|$10^4$|\n|$\\rm Subtask 3$|$\\rm 400ms$|$\\rm 35pts$|$3\\times 10^4$|\n|$\\rm Subtask 4$|$\\rm 400ms$|$\\rm 40pts$|$6\\times 10^4$|\n\n$\\rm P.S.$ 这题的时限已经开到 $\\rm std$ 的 $\\bf 15$ 倍，附件内有部分测试点。", "locale": "zh-CN"}}}
{"pid": "P6587", "type": "P", "difficulty": 5, "samples": [["5 3\n1 2 3 4 6\n1 2 1\n1 1 1 3\n2 0 0", "7\n25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "字典树 Trie"], "title": "超超的序列 加强", "background": "孙1超总是喜欢疯言疯语，有一天，他随口说出了一串序列，又想对某几个特定位置的值进行修改和求和。由于孙1超十分菜，所以他来找你帮助。\n\n## 请不要抄题解。", "description": "给定序列 $a$，并且给出两种操作：\n- `1 x y v`：将所有 $a_i$ 的值加上 $v$，其中 $i\\equiv y\\pmod {2^x}$。\n- `2 x y`：询问所有 $a_i$ 的和，其中 $i\\equiv y\\pmod {2^ x}$。\n\n**本题强制在线。**\n\n\n", "inputFormat": "第一行 $n,m$ 两个整数。\n\n第二行 $n$ 个整数，第 $i$ 个表示 $a_i$。\n\n接下来若干行，每行给出若干个整数：\n\n当 $op=1$ 时，$op'$ 的后三个整数依次为该操作的 $x,y,v$；\n\n当 $op=2$ 时，$op'$ 的后两个个整数依次为该操作的 $x,y$。\n\n其中保证没有多余的数输入。\n\n每次操作的 $op=(\\operatorname{lastans}+op')\\bmod 2+1$。\n\n其中 $\\rm lastans$ 表示上一个输出的答案，若之前没有询问，则 $\\rm lastans=0$。", "outputFormat": "输出每次询问的结果。", "hint": "#### 样例解释\n对于样例 1：\n\n- 第一个操作 $op=2$，需要计算贡献的 $i$ 为 $1,5$，答案为 $7$。\n- 第二个操作 $op=1$， 需要加上 $3$ 的 $i$ 为 $1,3,5$，将 $a_1,a_3,a_5$ 加上 $3$。\n- 第三个操作 $op=2$， 需要计算贡献的 $i$ 为 $1,2,3,4,5$，答案为 $25$。\n\n#### 数据范围\n- 对于 $10\\%$ 的数据，$1\\le n,m \\leq 10^3$。\n- 对于 $70\\%$ 的数据，每一个操作后面有一个换行。 \n- 对于 $100\\%$ 的数据，$1\\le n,m \\leq 2\\times10^5$，$0 \\leq a_i,y,v,op'<10^7$。\n- 对于操作 1 和 2，$0\\leq x \\leq 20$ 且 $0 \\le y < 2^x$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "超超的序列 加强", "background": "孙1超总是喜欢疯言疯语，有一天，他随口说出了一串序列，又想对某几个特定位置的值进行修改和求和。由于孙1超十分菜，所以他来找你帮助。\n\n## 请不要抄题解。", "description": "给定序列 $a$，并且给出两种操作：\n- `1 x y v`：将所有 $a_i$ 的值加上 $v$，其中 $i\\equiv y\\pmod {2^x}$。\n- `2 x y`：询问所有 $a_i$ 的和，其中 $i\\equiv y\\pmod {2^ x}$。\n\n**本题强制在线。**\n\n\n", "inputFormat": "第一行 $n,m$ 两个整数。\n\n第二行 $n$ 个整数，第 $i$ 个表示 $a_i$。\n\n接下来若干行，每行给出若干个整数：\n\n当 $op=1$ 时，$op'$ 的后三个整数依次为该操作的 $x,y,v$；\n\n当 $op=2$ 时，$op'$ 的后两个个整数依次为该操作的 $x,y$。\n\n其中保证没有多余的数输入。\n\n每次操作的 $op=(\\operatorname{lastans}+op')\\bmod 2+1$。\n\n其中 $\\rm lastans$ 表示上一个输出的答案，若之前没有询问，则 $\\rm lastans=0$。", "outputFormat": "输出每次询问的结果。", "hint": "#### 样例解释\n对于样例 1：\n\n- 第一个操作 $op=2$，需要计算贡献的 $i$ 为 $1,5$，答案为 $7$。\n- 第二个操作 $op=1$， 需要加上 $3$ 的 $i$ 为 $1,3,5$，将 $a_1,a_3,a_5$ 加上 $3$。\n- 第三个操作 $op=2$， 需要计算贡献的 $i$ 为 $1,2,3,4,5$，答案为 $25$。\n\n#### 数据范围\n- 对于 $10\\%$ 的数据，$1\\le n,m \\leq 10^3$。\n- 对于 $70\\%$ 的数据，每一个操作后面有一个换行。 \n- 对于 $100\\%$ 的数据，$1\\le n,m \\leq 2\\times10^5$，$0 \\leq a_i,y,v,op'<10^7$。\n- 对于操作 1 和 2，$0\\leq x \\leq 20$ 且 $0 \\le y < 2^x$。\n", "locale": "zh-CN"}}}
{"pid": "P6588", "type": "P", "difficulty": 5, "samples": [["3 5\n1 1\n4 5\n1 4\n1 1 3 6\n2 3 3 0\n4 2 3\n3 2 3\n5 1 3", "12\n84"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "线段树"], "title": "『JROI-1』  向量", "background": "前言：虽然 SCR 已经并入了 JROI，但作为 JROI 的负责人，我还是想要感谢一下 SCR 出题组的**无私**奉献。出于对出题人的敬意。我们不会在题目背景故事上做大的改动，只会添加**小部分上下衔接**的语句。\n\n--------------\n\n蒟蒻火锅正在煮，自然要打一盘游戏了。\n\n小 L 是个喜欢打第五的初中生。这天他刚自学完了向量的基本运算，正在打第五时，他看着自己画出来的长短、方向各异的机关墙（他在玩疯眼），有了一个奇妙的想法。", "description": "小 L 有 $n$ 个向量 $\\overrightarrow{a_1},\\overrightarrow{a_2}\\ldots\\overrightarrow{a_n}$，他希望你能够帮他回答下面两个问题。\n\n+ 对于给定的 $l,r$，求出 \n\n$$\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\cdot\\overrightarrow{a_j}$$\n\n\n+ 对于给定的 $l,r$，求出 \n\n$$\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\oplus\\overrightarrow{a_j}$$\n\n随着时间的推移，这些向量也会不断发生变化，小 L 希望你在发生变化后仍然能给出答案。", "inputFormat": "第一行两个整数 $n,m$，分别代表向量个数和操作次数。  \n\n接下来 $n$ 行，每行两个整数 $x,y$，第 $i$ 行表示向量 $\\overrightarrow{a_i}$。  \n\n接下来 $m$ 行，每行首先有一个整数 $opt$ 表示操作序号，之后有若干个整数表示一次操作。一共有下面五种操作。\n\n1. 输入三个整数 $i,x,y(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 加上 $(x,y)$。\n1. 输入三个整数 $i,x,y(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 减去 $(x,y)$。\n1. 输入两个整数 $i,t(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 修改为 $t\\overrightarrow{a_i}$。\n1. 输入两个整数 $l,r(1\\leq l<r\\leq n)$，求 $\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\cdot\\overrightarrow{a_j}$。\n1. 输入两个整数 $l,r(1\\leq l<r\\leq n)$，求 $\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\oplus\\overrightarrow{a_j}$。", "outputFormat": "对于所有的第四和第五种操作，一行有一个整数，为这次操作的答案。", "hint": "#### 样例 1 解释\n\n前两次操作后三个向量分别为 $(4,7),(4,5),(-2,4)$，之后询问结果为 $4 \\times(-2)+5\\times4=12$。\n\n下一次操作后三个向量分别为 $(4,7),(12,15),(-2,4)$，询问结果为 $(4\\times15-7\\times12)+[4\\times4-7\\times(-2)]+[12\\times4-15\\times(-2)]=-24+30+78=84$\n\n-----------\n#### 数据规模与约定\n**本题采用捆绑测试**。\n+ Subtask 1 ( $20\\%$ )：$n,m\\leq 100$。\n+ Subtask 2 ( $30\\%$ )：没有操作五。\n+ Subtask 3 ( $50\\%$ )：无特殊要求。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^5$，$1\\leq m\\leq 10^5$，**保证对于任意时刻的向量 $\\overrightarrow{a_i}$，满足 $-1000\\leq x_i,y_i\\leq 1000$**。\n\n-----------\n#### 关于向量运算\n\n对于向量 $\\overrightarrow{a},\\overrightarrow{b}$ 和常数 $\\lambda$，假定 $\\overrightarrow{a},\\overrightarrow{b}$ 的坐标表示分别为 $(x_a,y_a),(x_b,y_b)$：\n\n+ $\\overrightarrow{a}+\\overrightarrow{b}=(x_a+x_b,y_a+y_b)$  \n+ $\\overrightarrow{a}-\\overrightarrow{b}=(x_a-x_b,y_a-y_b)$  \n+ $\\lambda\\overrightarrow{a}=(\\lambda x_a,\\lambda y_a)$  \n+ $\\overrightarrow{a}\\cdot\\overrightarrow{b}=x_ax_b+y_ay_b$  \n+ $\\overrightarrow{a}\\oplus\\overrightarrow{b}=x_ay_b-x_by_a$  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-1』  向量", "background": "前言：虽然 SCR 已经并入了 JROI，但作为 JROI 的负责人，我还是想要感谢一下 SCR 出题组的**无私**奉献。出于对出题人的敬意。我们不会在题目背景故事上做大的改动，只会添加**小部分上下衔接**的语句。\n\n--------------\n\n蒟蒻火锅正在煮，自然要打一盘游戏了。\n\n小 L 是个喜欢打第五的初中生。这天他刚自学完了向量的基本运算，正在打第五时，他看着自己画出来的长短、方向各异的机关墙（他在玩疯眼），有了一个奇妙的想法。", "description": "小 L 有 $n$ 个向量 $\\overrightarrow{a_1},\\overrightarrow{a_2}\\ldots\\overrightarrow{a_n}$，他希望你能够帮他回答下面两个问题。\n\n+ 对于给定的 $l,r$，求出 \n\n$$\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\cdot\\overrightarrow{a_j}$$\n\n\n+ 对于给定的 $l,r$，求出 \n\n$$\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\oplus\\overrightarrow{a_j}$$\n\n随着时间的推移，这些向量也会不断发生变化，小 L 希望你在发生变化后仍然能给出答案。", "inputFormat": "第一行两个整数 $n,m$，分别代表向量个数和操作次数。  \n\n接下来 $n$ 行，每行两个整数 $x,y$，第 $i$ 行表示向量 $\\overrightarrow{a_i}$。  \n\n接下来 $m$ 行，每行首先有一个整数 $opt$ 表示操作序号，之后有若干个整数表示一次操作。一共有下面五种操作。\n\n1. 输入三个整数 $i,x,y(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 加上 $(x,y)$。\n1. 输入三个整数 $i,x,y(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 减去 $(x,y)$。\n1. 输入两个整数 $i,t(1\\leq i\\leq n)$，将 $\\overrightarrow{a_i}$ 修改为 $t\\overrightarrow{a_i}$。\n1. 输入两个整数 $l,r(1\\leq l<r\\leq n)$，求 $\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\cdot\\overrightarrow{a_j}$。\n1. 输入两个整数 $l,r(1\\leq l<r\\leq n)$，求 $\\sum\\limits_{i=l}^{r-1}\\sum\\limits_{j=i+1}^{r}\\overrightarrow{a_i}\\oplus\\overrightarrow{a_j}$。", "outputFormat": "对于所有的第四和第五种操作，一行有一个整数，为这次操作的答案。", "hint": "#### 样例 1 解释\n\n前两次操作后三个向量分别为 $(4,7),(4,5),(-2,4)$，之后询问结果为 $4 \\times(-2)+5\\times4=12$。\n\n下一次操作后三个向量分别为 $(4,7),(12,15),(-2,4)$，询问结果为 $(4\\times15-7\\times12)+[4\\times4-7\\times(-2)]+[12\\times4-15\\times(-2)]=-24+30+78=84$\n\n-----------\n#### 数据规模与约定\n**本题采用捆绑测试**。\n+ Subtask 1 ( $20\\%$ )：$n,m\\leq 100$。\n+ Subtask 2 ( $30\\%$ )：没有操作五。\n+ Subtask 3 ( $50\\%$ )：无特殊要求。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^5$，$1\\leq m\\leq 10^5$，**保证对于任意时刻的向量 $\\overrightarrow{a_i}$，满足 $-1000\\leq x_i,y_i\\leq 1000$**。\n\n-----------\n#### 关于向量运算\n\n对于向量 $\\overrightarrow{a},\\overrightarrow{b}$ 和常数 $\\lambda$，假定 $\\overrightarrow{a},\\overrightarrow{b}$ 的坐标表示分别为 $(x_a,y_a),(x_b,y_b)$：\n\n+ $\\overrightarrow{a}+\\overrightarrow{b}=(x_a+x_b,y_a+y_b)$  \n+ $\\overrightarrow{a}-\\overrightarrow{b}=(x_a-x_b,y_a-y_b)$  \n+ $\\lambda\\overrightarrow{a}=(\\lambda x_a,\\lambda y_a)$  \n+ $\\overrightarrow{a}\\cdot\\overrightarrow{b}=x_ax_b+y_ay_b$  \n+ $\\overrightarrow{a}\\oplus\\overrightarrow{b}=x_ay_b-x_by_a$  ", "locale": "zh-CN"}}}
{"pid": "P6589", "type": "P", "difficulty": 6, "samples": [["5 3 2\n1 2\n1 5\n4 5\n3 5\n1 3\n2 5\n1 5", "6 10\n10 20\n14 30"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 4500, 4500, 4500, 4500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "二分", "点分治", "平衡树", "O2优化"], "title": "『JROI-1』 关系树", "background": "小 L 有许多喜欢的游戏角色，他把这些游戏角色按照一定的关系联系起来。这些游戏角色和他们之间的关系构成了一棵树，小 L 把这棵树称之为「关系树」。", "description": "关系树是由 $n$ 个点和 $n-1$ 条无向边组成的一棵树。\n\n对于一张给定的图 $G$，定义图 $G$ 对于点集 $E$ 的 **顶点导出子图** 为点集 $E$ 和所有的 **两个端点都属于 $E$** 且属于原图 $G$ 的边组成的图。\n\n定义一张图是 **整洁的**，当且仅当图中任意两点 $u,v$，$u$ 和 $v$ **不连通** 或 **距离不超过** $k$。\n\n小 L 想要知道对于一组 $l,r(l \\leq r)$，有多少对 $(a,b)$，满足 $l\\leq a\\leq b\\leq r$，且所有序号在 $a$ 和 $b$ 之间（包括 $a,b$）的点组成的顶点导出子图是 **整洁的**。不仅如此，他还想问你所有的区间长度（即 $b-a+1$）之和。\n\n因为小 L 喜欢问问题，所以你一共需要回答 $q$ 组询问。", "inputFormat": "第一行有三个整数 $n$，$q$，$k$，意义如上。\n\n接下来 $n-1$ 行，每行两个整数 $u$，$v$，描述一条边。\n\n接下来 $q$ 行，每行两个整数 $l$，$r$，表示一组询问。", "outputFormat": "$q$ 行，每行两个整数，依次为满足的 $(a,b)$ 组数和所有的区间长度之和。", "hint": "#### 样例 1 解释\n\n形成的关系树如图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zb12y5mq.png)\n\n满足的 $(a,b)$ 有 $(1,1),(1,2),(1,3),(1,4),(2,2),(2,3),(2,4),(2,5),(3,3),(3,4),(3,5),(4,4),(4,5),(5,5)$。\n\n三组询问的答案依次为 $6,10$，$10,20$，$14,30$。\n\n--------------------------------\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n+ Subtask 1 ( $10\\%$ )：$n\\leq 2000$。\n+ Subtask 2 ( $30\\%$ )：$n\\leq 2\\times 10^4$，形成的关系树为一条链。\n+ Subtask 3 ( $60\\%$ )：$n\\leq 2\\times 10^4$。\n+ Subtask 4 ( 加强版数据，时限 $4.5s$ )：无特殊限制。\n\n对于 $100\\%$ 的测试点，保证 $1\\leq n \\leq 8\\times 10^4$，$1\\leq q \\leq 10^5$，$0\\leq k <n$，$1\\leq u,v,l,r \\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-1』 关系树", "background": "小 L 有许多喜欢的游戏角色，他把这些游戏角色按照一定的关系联系起来。这些游戏角色和他们之间的关系构成了一棵树，小 L 把这棵树称之为「关系树」。", "description": "关系树是由 $n$ 个点和 $n-1$ 条无向边组成的一棵树。\n\n对于一张给定的图 $G$，定义图 $G$ 对于点集 $E$ 的 **顶点导出子图** 为点集 $E$ 和所有的 **两个端点都属于 $E$** 且属于原图 $G$ 的边组成的图。\n\n定义一张图是 **整洁的**，当且仅当图中任意两点 $u,v$，$u$ 和 $v$ **不连通** 或 **距离不超过** $k$。\n\n小 L 想要知道对于一组 $l,r(l \\leq r)$，有多少对 $(a,b)$，满足 $l\\leq a\\leq b\\leq r$，且所有序号在 $a$ 和 $b$ 之间（包括 $a,b$）的点组成的顶点导出子图是 **整洁的**。不仅如此，他还想问你所有的区间长度（即 $b-a+1$）之和。\n\n因为小 L 喜欢问问题，所以你一共需要回答 $q$ 组询问。", "inputFormat": "第一行有三个整数 $n$，$q$，$k$，意义如上。\n\n接下来 $n-1$ 行，每行两个整数 $u$，$v$，描述一条边。\n\n接下来 $q$ 行，每行两个整数 $l$，$r$，表示一组询问。", "outputFormat": "$q$ 行，每行两个整数，依次为满足的 $(a,b)$ 组数和所有的区间长度之和。", "hint": "#### 样例 1 解释\n\n形成的关系树如图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zb12y5mq.png)\n\n满足的 $(a,b)$ 有 $(1,1),(1,2),(1,3),(1,4),(2,2),(2,3),(2,4),(2,5),(3,3),(3,4),(3,5),(4,4),(4,5),(5,5)$。\n\n三组询问的答案依次为 $6,10$，$10,20$，$14,30$。\n\n--------------------------------\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n+ Subtask 1 ( $10\\%$ )：$n\\leq 2000$。\n+ Subtask 2 ( $30\\%$ )：$n\\leq 2\\times 10^4$，形成的关系树为一条链。\n+ Subtask 3 ( $60\\%$ )：$n\\leq 2\\times 10^4$。\n+ Subtask 4 ( 加强版数据，时限 $4.5s$ )：无特殊限制。\n\n对于 $100\\%$ 的测试点，保证 $1\\leq n \\leq 8\\times 10^4$，$1\\leq q \\leq 10^5$，$0\\leq k <n$，$1\\leq u,v,l,r \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P6591", "type": "P", "difficulty": 3, "samples": [["2\n1 2\n", "1 2 "], ["4\n1 2\n2 3\n3 4\n", "1 4 \n"], ["9\n1 2\n1 3\n4 1\n5 1\n1 6\n1 9\n8 1\n1 7\n", "1 2 3 4 5 6 7 8 9 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "枚举", "深度优先搜索 DFS"], "title": "[YsOI2020] 植树", "background": "\nYsuperman 响应号召，决定在幼儿园里植树。", "description": "Ysuperman 有一棵 $n$ 个节点的无根树 $T$。如果你不知道树是什么，TA 很乐意告诉你，树是一个没有环的无向连通图。\n\n既然树是无根的，那就没有办法种植。Ysuperman 研究了很久的园艺，发现一个节点如果可以成为根，它必须十分平衡，这意味着以它为根时，与它**直接相连的节点，他们的子树大小都相同**。\n\n你作为幼儿园信息组一把手，Ysuperman 给你一棵树，你能在 $1s$ 内找到所有可能成为根的节点吗？", "inputFormat": "第一行一个正整数 $n$，表示树的节点个数。\n\n此后 $n-1$ 行，每行两个正整数 $u_i,v_i$，表示树上有一条直接连接 $u_i,v_i$ 的边。保证每条边只会给出一次。", "outputFormat": "不超过 $n$ 个从小到大的整数，用空格隔开，表示每一个可能成为根的节点。", "hint": "### 样例说明\n\n#### 样例说明 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gsiug69y.png)\n\n以 $1$ 为根时，与 $1$ 直接相连的点有 $\\{2\\}$，因为只有一个所以大小全部相同。\n\n以 $2$ 为根时，与 $2$ 直接相连的点有 $\\{1\\}$，因为只有一个所以大小全部相同。\n\n所以答案为 $1,2$。\n\n#### 样例说明 $2$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p7fsretv.png)\n\n以 $1$ 为根时，与 $1$ 直接相连的点有 $\\{2\\}$，因为只有一个所以大小全部相同。\n\n以 $2$ 为根时，与 $2$ 直接相连的点有 $\\{1,3\\}$，子树大小分别为 $\\{1,2\\}$，不相同。\n\n以 $3$ 为根时，与 $3$ 直接相连的点有 $\\{2,4\\}$，子树大小分别为 $\\{2,1\\}$，不相同。\n\n以 $4$ 为根时，与 $4$ 直接相连的点有 $\\{3\\}$，因为只有一个所以大小全部相同。\n\n所以答案为 $1,4$。\n\n----\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\rm{subtask}$ | $n$ |  分数|\n| :-----------: | :-----------: | :----: |\n| $1$ | $\\le 5000$ | $40$ |\n| $2$ | $\\le 10^6$ | $60$ |\n\n对于 $100\\%$ 的数据，满足 $1 \\le n\\le 10^6$。\n\n------\n\n### 提示\n\n由于输入输出量较大，你可能需要快速输入/输出。", "locale": "zh-CN", "translations": {"en": {"title": "[YsOI2020] Tree Planting", "background": "In response to the call, Ysuperman decides to plant trees in a kindergarten.", "description": "Ysuperman has an unrooted tree $T$ with $n$ nodes. If you do not know what a tree is, they are happy to tell you that a tree is an undirected connected graph without cycles.\n\nSince the tree is unrooted, there is no way to “plant” it. After studying gardening for a long time, Ysuperman finds that for a node to be able to serve as the root, it must be very balanced. This means that when it is chosen as the root, among the nodes **directly connected** to it, the sizes of their subtrees are all the same.\n\nAs the leader of the kindergarten IT group, given a tree by Ysuperman, can you find all nodes that can possibly be the root within $1\\text{s}$?", "inputFormat": "The first line contains a positive integer $n$, the number of nodes in the tree.\n\nThe next $n-1$ lines each contain two positive integers $u_i, v_i$, indicating that there is an edge directly connecting $u_i$ and $v_i$ in the tree. It is guaranteed that each edge is given exactly once.", "outputFormat": "Output at most $n$ integers in increasing order, separated by spaces, representing every node that can possibly be the root.", "hint": "### Sample Explanation\n\n#### Sample Explanation $1$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gsiug69y.png)\n\nWhen rooted at $1$, the nodes directly connected to $1$ are $\\{2\\}$. Since there is only one, all subtree sizes are the same.\n\nWhen rooted at $2$, the nodes directly connected to $2$ are $\\{1\\}$. Since there is only one, all subtree sizes are the same.\n\nSo the answer is $1, 2$.\n\n#### Sample Explanation $2$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p7fsretv.png)\n\nWhen rooted at $1$, the nodes directly connected to $1$ are $\\{2\\}$. Since there is only one, all subtree sizes are the same.\n\nWhen rooted at $2$, the nodes directly connected to $2$ are $\\{1, 3\\}$. Their subtree sizes are $\\{1, 2\\}$, which are not the same.\n\nWhen rooted at $3$, the nodes directly connected to $3$ are $\\{2, 4\\}$. Their subtree sizes are $\\{2, 1\\}$, which are not the same.\n\nWhen rooted at $4$, the nodes directly connected to $4$ are $\\{3\\}$. Since there is only one, all subtree sizes are the same.\n\nSo the answer is $1, 4$.\n\n----\n\n### Constraints\n\n**This problem uses bundled testdata.**\n\n| $\\rm{subtask}$ | $n$ |  Score |\n| :-----------: | :-----------: | :----: |\n| $1$ | $\\le 5000$ | $40$ |\n| $2$ | $\\le 10^6$ | $60$ |\n\nFor $100\\%$ of the data, $1 \\le n \\le 10^6$.\n\n------\n\n### Hint\n\nSince the input and output sizes are large, you may need fast I/O.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[YsOI2020] 植树", "background": "\nYsuperman 响应号召，决定在幼儿园里植树。", "description": "Ysuperman 有一棵 $n$ 个节点的无根树 $T$。如果你不知道树是什么，TA 很乐意告诉你，树是一个没有环的无向连通图。\n\n既然树是无根的，那就没有办法种植。Ysuperman 研究了很久的园艺，发现一个节点如果可以成为根，它必须十分平衡，这意味着以它为根时，与它**直接相连的节点，他们的子树大小都相同**。\n\n你作为幼儿园信息组一把手，Ysuperman 给你一棵树，你能在 $1s$ 内找到所有可能成为根的节点吗？", "inputFormat": "第一行一个正整数 $n$，表示树的节点个数。\n\n此后 $n-1$ 行，每行两个正整数 $u_i,v_i$，表示树上有一条直接连接 $u_i,v_i$ 的边。保证每条边只会给出一次。", "outputFormat": "不超过 $n$ 个从小到大的整数，用空格隔开，表示每一个可能成为根的节点。", "hint": "### 样例说明\n\n#### 样例说明 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gsiug69y.png)\n\n以 $1$ 为根时，与 $1$ 直接相连的点有 $\\{2\\}$，因为只有一个所以大小全部相同。\n\n以 $2$ 为根时，与 $2$ 直接相连的点有 $\\{1\\}$，因为只有一个所以大小全部相同。\n\n所以答案为 $1,2$。\n\n#### 样例说明 $2$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/p7fsretv.png)\n\n以 $1$ 为根时，与 $1$ 直接相连的点有 $\\{2\\}$，因为只有一个所以大小全部相同。\n\n以 $2$ 为根时，与 $2$ 直接相连的点有 $\\{1,3\\}$，子树大小分别为 $\\{1,2\\}$，不相同。\n\n以 $3$ 为根时，与 $3$ 直接相连的点有 $\\{2,4\\}$，子树大小分别为 $\\{2,1\\}$，不相同。\n\n以 $4$ 为根时，与 $4$ 直接相连的点有 $\\{3\\}$，因为只有一个所以大小全部相同。\n\n所以答案为 $1,4$。\n\n----\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\rm{subtask}$ | $n$ |  分数|\n| :-----------: | :-----------: | :----: |\n| $1$ | $\\le 5000$ | $40$ |\n| $2$ | $\\le 10^6$ | $60$ |\n\n对于 $100\\%$ 的数据，满足 $1 \\le n\\le 10^6$。\n\n------\n\n### 提示\n\n由于输入输出量较大，你可能需要快速输入/输出。", "locale": "zh-CN"}}}
{"pid": "P6592", "type": "P", "difficulty": 5, "samples": [["5 7 5 0\n3 2\n1 2\n4 3\n5 4\n3 1\n5 3\n5 1\n3 1 4\n1 2 2\n5 5 6\n4 5 7\n2 1 7\n", "0\n1\n1\n0\n0\n"], ["5 12 10 0\n4 2\n4 2\n5 3\n3 3\n1 5\n1 4\n4 4\n2 4\n5 3\n1 5\n2 2\n4 1\n4 3 5\n4 2 3\n1 4 5\n3 1 8\n3 1 4\n3 5 5\n2 1 12\n4 10 12\n2 5 5\n1 1 3\n", "0\n0\n1\n0\n0\n0\n0\n1\n0\n1\n"], ["5 12 10 1\n4 2\n4 2\n5 3\n3 3\n1 5\n1 4\n4 4\n2 4\n5 3\n1 5\n2 2\n4 1\n4 3 5\n4 2 3\n1 4 5\n2 0 9\n2 0 5\n2 4 4\n3 0 13\n5 11 13\n0 7 7\n3 3 1", "0\n0\n1\n0\n0\n0\n0\n1\n0\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "二分", "可持久化线段树"], "title": "[YsOI2020] 幼儿园", "background": "", "description": "Ysuperman 热爱在 TA 的幼儿园里散步，为了更方便散步， TA 把幼儿园抽象成 $n$ 个点，$m$ 条边的**有向图**。 散步得多了， TA 就给了每一条边**无与伦比**的亲密程度：$1,2,\\cdots,m$，越大代表越亲密。 TA 也给了每一个点无与伦比的编号：$1,2,\\cdots,n$，其中 $1$ 代表着幼儿园大门，但是每个**点是没有亲密程度的**。\n\n接下来 $k$ 天，Ysuperman 每天会有一次散步计划。具体而言， TA 希望从 $x_i$ 号点出发，只经过**亲密程度属于区间 $[l_i,r_i]$ 的边**，走到幼儿园大门 $1$ 号点，期间经过的边的亲密程度必须**单调递减**，不然会因为 TA 有强迫症而不能回家。\n\n\nYsuperman 看着自己刚刚画的草稿脑子一团浆糊， TA 发现 TA 始终没有办法规划出这么多合理路线，现在 TA 想请你帮 TA 。具体而言，对于每一天的计划，如果可行，则输出 `1`，反之输出 `0`。\n\n当然啦，有的时候 Ysuperman 很着急，需要你立马回复，有的时候 TA 可以等等你，先把所有问题问完再等你回复。", "inputFormat": "第一行三个整数 $n,m,k,w$，分别表示节点个数、边个数、Ysuperman 的计划个数，和 Ysuperman 的焦急程度，此处的 $w$ 在后续输入中有用。\n\n此后 $m$ 行的第 $i$ 行有两个整数 $u_i,v_i$，表示 Ysuperman 的幼儿园里有一条 $u_i$ 号点到 $v_i$ 号点的单向边，且**亲密程度为** $i$。\n\n此后 $k$ 行的第 $i$ 行有三个整数 $x_i,l_i,r_i$，表示 Ysuperman 的第 $i$ 个计划。\n\n此处如果 $w=0$，则 $x_i,l_i,r_i$ 为明文，可以直接使用。\n\n如果 $w=1$，则 $x_i,l_i,r_i$ 为密文，你需要将它解密。解密操作是：令 $L$ 为之前所有询问的输出之和（没有询问过则为 $0$），你需要将 $x_i ,l_i,r_i$ 都异或 $L$。", "outputFormat": "$k$ 行，每行只可能是 `1` 或 `0`，第 $i$ 行的数表示第 $i$ 个计划是否可行。", "hint": "### 样例说明\n\n#### 样例说明 $1$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wxji6w6f.png)\n\n对于第 $2$ 条计划，Ysuperman 已经站在门口，所以计划可行。\n\n对于第 $3$ 条计划，Ysuperman 只能通过路径 $5 \\overset{6}{\\rightarrow}3 \\overset{5}{\\rightarrow} 1$。（箭头上方数字表示的是边的亲密程度）。\n\n其他计划都是不可行的。\n\n#### 样例说明 $3$\n\n样例三为加密后的样例二。\n\n----\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{subtask}$ |     $n$     |       $m$        |        $k$        |  特殊性质   | 分数  |\n| :----------------: | :---------: | :--------------: | :---------------: | :---------: | :---: |\n|        $1 $        |   $\\le17$   |     $\\le17$      | $\\le 2\\cdot 10^5$ |      /      | $ 5$  |\n|        $2$         |  $\\le500$   |     $\\le500$     |     $\\le500 $     |      /      | $17$  |\n|        $3 $        | $\\le 3000$  |   $\\le 3000 $    |    $\\le 3000 $    |      /      | $18 $ |\n|       $ 4 $        |  $\\le10^5$  | $\\le2\\cdot10^5$  |  $\\le2\\cdot10^5$  |   $v_i=1$   | $13$  |\n|        $5 $        | $\\le 10^5$  | $\\le 2\\cdot10^5$ |    $\\le 10^5$     | $l_i=1,w=0$ | $ 7 $ |\n|        $6$         | $\\le10^5 $  | $\\le2\\cdot10^5$  |    $\\le 10^5$     |   $w=0 $    | $13 $ |\n|        $7$         | $ \\le 10^5$ | $\\le 2\\cdot10^5$ | $\\le 2\\cdot10^5$  |      /      | $27$  |\n\n对于 $100\\%$ 的数据，满足 $1 \\le n \\le 10^5 ,1 \\le m \\le 2\\cdot10^5 ,0 \\le k \\le 2\\cdot10^5$。\n\n$w\\in\\{0,1\\},1 \\le u_i,v_i \\le n$。\n\n$x_i,l_i,r_i$ 在解密后保证 $1\\le x \\le n ,1 \\le l_i,r_i \\le m $。\n\n### 提示\n\n**不保证不出现重边自环，不保证图联通**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2020] 幼儿园", "background": "", "description": "Ysuperman 热爱在 TA 的幼儿园里散步，为了更方便散步， TA 把幼儿园抽象成 $n$ 个点，$m$ 条边的**有向图**。 散步得多了， TA 就给了每一条边**无与伦比**的亲密程度：$1,2,\\cdots,m$，越大代表越亲密。 TA 也给了每一个点无与伦比的编号：$1,2,\\cdots,n$，其中 $1$ 代表着幼儿园大门，但是每个**点是没有亲密程度的**。\n\n接下来 $k$ 天，Ysuperman 每天会有一次散步计划。具体而言， TA 希望从 $x_i$ 号点出发，只经过**亲密程度属于区间 $[l_i,r_i]$ 的边**，走到幼儿园大门 $1$ 号点，期间经过的边的亲密程度必须**单调递减**，不然会因为 TA 有强迫症而不能回家。\n\n\nYsuperman 看着自己刚刚画的草稿脑子一团浆糊， TA 发现 TA 始终没有办法规划出这么多合理路线，现在 TA 想请你帮 TA 。具体而言，对于每一天的计划，如果可行，则输出 `1`，反之输出 `0`。\n\n当然啦，有的时候 Ysuperman 很着急，需要你立马回复，有的时候 TA 可以等等你，先把所有问题问完再等你回复。", "inputFormat": "第一行三个整数 $n,m,k,w$，分别表示节点个数、边个数、Ysuperman 的计划个数，和 Ysuperman 的焦急程度，此处的 $w$ 在后续输入中有用。\n\n此后 $m$ 行的第 $i$ 行有两个整数 $u_i,v_i$，表示 Ysuperman 的幼儿园里有一条 $u_i$ 号点到 $v_i$ 号点的单向边，且**亲密程度为** $i$。\n\n此后 $k$ 行的第 $i$ 行有三个整数 $x_i,l_i,r_i$，表示 Ysuperman 的第 $i$ 个计划。\n\n此处如果 $w=0$，则 $x_i,l_i,r_i$ 为明文，可以直接使用。\n\n如果 $w=1$，则 $x_i,l_i,r_i$ 为密文，你需要将它解密。解密操作是：令 $L$ 为之前所有询问的输出之和（没有询问过则为 $0$），你需要将 $x_i ,l_i,r_i$ 都异或 $L$。", "outputFormat": "$k$ 行，每行只可能是 `1` 或 `0`，第 $i$ 行的数表示第 $i$ 个计划是否可行。", "hint": "### 样例说明\n\n#### 样例说明 $1$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wxji6w6f.png)\n\n对于第 $2$ 条计划，Ysuperman 已经站在门口，所以计划可行。\n\n对于第 $3$ 条计划，Ysuperman 只能通过路径 $5 \\overset{6}{\\rightarrow}3 \\overset{5}{\\rightarrow} 1$。（箭头上方数字表示的是边的亲密程度）。\n\n其他计划都是不可行的。\n\n#### 样例说明 $3$\n\n样例三为加密后的样例二。\n\n----\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\mathrm{subtask}$ |     $n$     |       $m$        |        $k$        |  特殊性质   | 分数  |\n| :----------------: | :---------: | :--------------: | :---------------: | :---------: | :---: |\n|        $1 $        |   $\\le17$   |     $\\le17$      | $\\le 2\\cdot 10^5$ |      /      | $ 5$  |\n|        $2$         |  $\\le500$   |     $\\le500$     |     $\\le500 $     |      /      | $17$  |\n|        $3 $        | $\\le 3000$  |   $\\le 3000 $    |    $\\le 3000 $    |      /      | $18 $ |\n|       $ 4 $        |  $\\le10^5$  | $\\le2\\cdot10^5$  |  $\\le2\\cdot10^5$  |   $v_i=1$   | $13$  |\n|        $5 $        | $\\le 10^5$  | $\\le 2\\cdot10^5$ |    $\\le 10^5$     | $l_i=1,w=0$ | $ 7 $ |\n|        $6$         | $\\le10^5 $  | $\\le2\\cdot10^5$  |    $\\le 10^5$     |   $w=0 $    | $13 $ |\n|        $7$         | $ \\le 10^5$ | $\\le 2\\cdot10^5$ | $\\le 2\\cdot10^5$  |      /      | $27$  |\n\n对于 $100\\%$ 的数据，满足 $1 \\le n \\le 10^5 ,1 \\le m \\le 2\\cdot10^5 ,0 \\le k \\le 2\\cdot10^5$。\n\n$w\\in\\{0,1\\},1 \\le u_i,v_i \\le n$。\n\n$x_i,l_i,r_i$ 在解密后保证 $1\\le x \\le n ,1 \\le l_i,r_i \\le m $。\n\n### 提示\n\n**不保证不出现重边自环，不保证图联通**。", "locale": "zh-CN"}}}
{"pid": "P6593", "type": "P", "difficulty": 5, "samples": [["5\n1 1\n1 1 1\n3 5\n1 1 2\n6 62\n3 2 1\n23 13\n10 10 10\n233 10\n233 233 233\n", "5\n545\n114514\n55555555554444444441111\n-1\n"], ["5\n100 64\n33 33 34\n114 63\n33 33 50\n115 62\n111 11 1\n192 60\n8 1 7\n233 64\n100 100 33\n", "5555555555555555555555555555555555444444444444444444444444444441111111111111111111111111111111414144\n555555555555555555555555555555555555555555555555444444444444444444444444444444441111411111111111111111111111111111\n5444444444111111111114111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111114\n-1\n55555555555555555555555555555555544444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444411111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111414144\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "状压 DP"], "title": "[YsOI2020] 义已失吾亦死", "background": "> 义已失吾亦死！亦久亦旧罢以龄。\n\n本题添加了 HACK 数据。并且愿意接受更多的 HACK 数据。", "description": "Ysuperman 的幼儿园不仅注重文化课、竞赛课的教学，还教授大家德智体美全面发展。这一天是周末，德智体美全面发展的 Ysuperman 爬上了 Y 山。\n\nYsuperman 爬山并不走行车的大路，而是走旁边的泥土山路。走了很远，他猛然发现回头的路已变得模糊，挡在他面前的是巨大的石壁。他震惊地发现，石壁上竟然写有上个世纪的文字！“义已失吾亦死”他看着这些文字，仿佛有一种特殊的魅力。\n\n回到幼儿园，兴奋的 Ysuperman 立即创造了其他的句子，但他却发现这些句子大部分都失去了魅力。经过两年半的钻研，TA 终于发现，“义已失吾亦死”，对应的其实是 $114514$ 这串数字！研究方向变得更加明确，他决定研究把一个句子映射到一个数字里，一个有魅力的数字满足如下条件：\n\n- 十进制，是自然数；\n\n- 数位(digit)仅仅包含 $1,4,5$ 三种数字；\n\n- 在模一个给定常数 $p$ 意义下为 $0$。\n\n现在 Ysuperman 已经有了很多的数字 $1,4,5$，分别有 $a_1,a_4,a_5$ 个。\n\nYsuperman 希望组成一个长度为 $n$ 的有魅力的数字，使得它尽可能大。\n\nYsuperman 知道，如果 TA 还是学生，一定能凭借这次发现入围羟基计划。为了 TA 儿时的梦想，你能帮帮他吗？", "inputFormat": "**本题有多组数据。**\n\n数据共 $T$ 组。第一行读入 $T$，此后每一组数据：\n\n第一行两个正整数 $n,p$，分别表示 Ysuperman 想组成的有魅力的数字的长度，给定的常数 $p$。\n\n第二行三个自然数 $a_1,a_4,a_5$，表示 Ysuperman 最初拥有的数字个数。", "outputFormat": "如果 Ysuperman 无法获得有魅力的数字，输出 `-1`。\n\n否则输出 Ysuperman 能组成的最大有魅力的数字。\n\n两组数据之间需要换行。", "hint": "### 样例说明\n\n#### 样例说明 $1$：\n\n第一组可以组成 $1,4,5$，最大的是 $5$。\n\n第二组可以组成 $145,155,415,455,515,545$，最大的是 $545$。\n\n第三组只能组成 $114514$。\n\n-----\n### 数据范围\n\n为了致敬 NOI，出题人特地准备了良心的部分分表格。\n\n| 测试点编号 | $n$ | $a_1,a_4,a_5$ | $p$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=1$ | $=0$ | $=1$ |\n| $2$ | $=2$ | $\\le 1$ | $\\le 10$ |\n| $3$ | $=3$ | $\\le 3$ | $\\le 10$ |\n| $4$ | $=15$ | $\\le 15$ | $\\le 10$ |\n| $5$ | $\\le 20$ | $\\le 20$ | $\\le 20$ |\n| $6$ | $\\le 30$ | $\\le 30$ | $\\le 30$ |\n| $7$ | $\\le 35$ | $\\le 35$ | $\\le 35$ |\n| $8$ | $\\le 233$ | $\\le 233$ | $\\le 2$ |\n| $9$ | $\\le 233$ | $\\le 233$ | $\\le 2$ |\n| $10$ | $\\le 50$ | $\\le 50$ | $\\le 64$ |\n| $11$ | $\\le 55$ | $\\le 55$ | $\\le 64$ |\n| $12$ | $\\le 60$ | $\\le 60$ | $\\le 64$ |\n| $13$ | $\\le 65$ | $\\le 65$ | $\\le 64$ |\n| $14$ | $\\le 70$ | $\\le 70$ | $\\le 64$ |\n| $15$ | $\\le 75$ | $\\le 75$ | $\\le 64$ |\n| $16$ | $\\le 80$ | $\\le 80$ | $\\le 64$ |\n| $17$ | $\\le 233$ | 性质一 | $\\le 64$ |\n| $18$ | $\\le 233$ | 性质一 | $\\le 64$ |\n| $19$ | $\\le 233$ | 性质二 | $\\le 64$ |\n| $20$ | $\\le 233$ | 性质二 | $\\le 64$ |\n| $21$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $22$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $23$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $24$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $25$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n\n性质一：$a_1+a_4+a_5=n$。\n\n性质二：$a_1=a_4=a_5=n$。\n\n对于 $100\\%$ 的数据，满足  \n\n$0 \\le a_1,a_4,a_5 \\le 233$。  \n$1\\le n \\le 233$。   \n$1 \\le p \\le64$。  \n$0 \\le T\\le 5$。\n\n-----\n\n### 提示\n\n如果你不知道自然数是什么意思，Ysuperman 提供了一个链接：[link](https://zh.wikipedia.org/zh-hans/%E8%87%AA%E7%84%B6%E6%95%B0)。\n\n如果你不知道取模是什么意思，Ysuperman 提供了另一个链接：[link](https://zh.wikipedia.org/zh-hans/%E6%A8%A1%E9%99%A4)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2020] 义已失吾亦死", "background": "> 义已失吾亦死！亦久亦旧罢以龄。\n\n本题添加了 HACK 数据。并且愿意接受更多的 HACK 数据。", "description": "Ysuperman 的幼儿园不仅注重文化课、竞赛课的教学，还教授大家德智体美全面发展。这一天是周末，德智体美全面发展的 Ysuperman 爬上了 Y 山。\n\nYsuperman 爬山并不走行车的大路，而是走旁边的泥土山路。走了很远，他猛然发现回头的路已变得模糊，挡在他面前的是巨大的石壁。他震惊地发现，石壁上竟然写有上个世纪的文字！“义已失吾亦死”他看着这些文字，仿佛有一种特殊的魅力。\n\n回到幼儿园，兴奋的 Ysuperman 立即创造了其他的句子，但他却发现这些句子大部分都失去了魅力。经过两年半的钻研，TA 终于发现，“义已失吾亦死”，对应的其实是 $114514$ 这串数字！研究方向变得更加明确，他决定研究把一个句子映射到一个数字里，一个有魅力的数字满足如下条件：\n\n- 十进制，是自然数；\n\n- 数位(digit)仅仅包含 $1,4,5$ 三种数字；\n\n- 在模一个给定常数 $p$ 意义下为 $0$。\n\n现在 Ysuperman 已经有了很多的数字 $1,4,5$，分别有 $a_1,a_4,a_5$ 个。\n\nYsuperman 希望组成一个长度为 $n$ 的有魅力的数字，使得它尽可能大。\n\nYsuperman 知道，如果 TA 还是学生，一定能凭借这次发现入围羟基计划。为了 TA 儿时的梦想，你能帮帮他吗？", "inputFormat": "**本题有多组数据。**\n\n数据共 $T$ 组。第一行读入 $T$，此后每一组数据：\n\n第一行两个正整数 $n,p$，分别表示 Ysuperman 想组成的有魅力的数字的长度，给定的常数 $p$。\n\n第二行三个自然数 $a_1,a_4,a_5$，表示 Ysuperman 最初拥有的数字个数。", "outputFormat": "如果 Ysuperman 无法获得有魅力的数字，输出 `-1`。\n\n否则输出 Ysuperman 能组成的最大有魅力的数字。\n\n两组数据之间需要换行。", "hint": "### 样例说明\n\n#### 样例说明 $1$：\n\n第一组可以组成 $1,4,5$，最大的是 $5$。\n\n第二组可以组成 $145,155,415,455,515,545$，最大的是 $545$。\n\n第三组只能组成 $114514$。\n\n-----\n### 数据范围\n\n为了致敬 NOI，出题人特地准备了良心的部分分表格。\n\n| 测试点编号 | $n$ | $a_1,a_4,a_5$ | $p$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=1$ | $=0$ | $=1$ |\n| $2$ | $=2$ | $\\le 1$ | $\\le 10$ |\n| $3$ | $=3$ | $\\le 3$ | $\\le 10$ |\n| $4$ | $=15$ | $\\le 15$ | $\\le 10$ |\n| $5$ | $\\le 20$ | $\\le 20$ | $\\le 20$ |\n| $6$ | $\\le 30$ | $\\le 30$ | $\\le 30$ |\n| $7$ | $\\le 35$ | $\\le 35$ | $\\le 35$ |\n| $8$ | $\\le 233$ | $\\le 233$ | $\\le 2$ |\n| $9$ | $\\le 233$ | $\\le 233$ | $\\le 2$ |\n| $10$ | $\\le 50$ | $\\le 50$ | $\\le 64$ |\n| $11$ | $\\le 55$ | $\\le 55$ | $\\le 64$ |\n| $12$ | $\\le 60$ | $\\le 60$ | $\\le 64$ |\n| $13$ | $\\le 65$ | $\\le 65$ | $\\le 64$ |\n| $14$ | $\\le 70$ | $\\le 70$ | $\\le 64$ |\n| $15$ | $\\le 75$ | $\\le 75$ | $\\le 64$ |\n| $16$ | $\\le 80$ | $\\le 80$ | $\\le 64$ |\n| $17$ | $\\le 233$ | 性质一 | $\\le 64$ |\n| $18$ | $\\le 233$ | 性质一 | $\\le 64$ |\n| $19$ | $\\le 233$ | 性质二 | $\\le 64$ |\n| $20$ | $\\le 233$ | 性质二 | $\\le 64$ |\n| $21$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $22$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $23$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $24$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n| $25$ | $\\le 233$ | $\\le 233$ | $\\le 64$ |\n\n性质一：$a_1+a_4+a_5=n$。\n\n性质二：$a_1=a_4=a_5=n$。\n\n对于 $100\\%$ 的数据，满足  \n\n$0 \\le a_1,a_4,a_5 \\le 233$。  \n$1\\le n \\le 233$。   \n$1 \\le p \\le64$。  \n$0 \\le T\\le 5$。\n\n-----\n\n### 提示\n\n如果你不知道自然数是什么意思，Ysuperman 提供了一个链接：[link](https://zh.wikipedia.org/zh-hans/%E8%87%AA%E7%84%B6%E6%95%B0)。\n\n如果你不知道取模是什么意思，Ysuperman 提供了另一个链接：[link](https://zh.wikipedia.org/zh-hans/%E6%A8%A1%E9%99%A4)。", "locale": "zh-CN"}}}
{"pid": "P6594", "type": "P", "difficulty": 5, "samples": [["5 2 0\n1 3 1 4 0\n1 2\n1 3\n1 4\n1 5\n2 3\n1 4", "3"], ["5 2 1\n1 3 1 4 0\n1 2\n1 3\n1 4\n1 5\n2 3\n1 4", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["二分", "O2优化", "深度优先搜索 DFS", "树形 DP", "最近公共祖先 LCA", "差分"], "title": "[YsOI2020] 换寝室", "background": "马上要开学了，Ysuperman 正在为给孩子们分配寝室忙得不可开交......", "description": "幼儿园里面有 $n$ 个房间，这些房间由 $n-1$ 条双向道路连接着，第 $i$ 条道路连接着房间 $u_i$ 和 $v_i$ ，每条道路 Ysuperman 都可以选择开启或者是关闭，每个房间**在所有道路开启的前提下**都可以到达其他任意一个房间。\n\n每个房间有一个差异值，其中，第 $i$ 个房间的差异值为 $h_i$ 。\n\n在选择完关闭哪些道路后，整个寝室会被分成许多连通块，一个联通块内的小朋友的不满意值定义为连通块内差异值的**最大值减去最小值**，小朋友们的总不满意值定义为**所有联通块不满意值的最大值**。\n\n寝室里有 $m$ 个寝室老师，每个老师晚上都要查寝，第 $i$ 个老师会从第 $x_i$ 个房间走到第 $y_i$ 个房间，如果老师在查寝时经过了某条被关闭的道路，TA就会很生气，一个老师的不满意值定义为**从 $x_i$ 走到 $y_i$ 经过的被关闭的道路数量**，老师的总不满意值定义为**所有老师的不满意值之和**。\n\nYsuperman 能承受的老师的总不满意值最大为 $k$ ，现在TA想知道小朋友们的总不满意值最小可以达到多少。", "inputFormat": "输入共 $n+m+1$ 行。\n\n第一行三个整数 $n,m,k$，表示房间个数，寝室老师个数和Ysuperman 能承受的老师的总不满意值。\n\n接下来一行，共 $n$ 个整数，第 $i$ 个整数是 $h_i$，表示第 $i$ 个房间的差异值。\n\n接下来 $n-1$ 行，每行两个整数，第 $i+2$ 行是 $u_i$ 和 $v_i$，表示寝室 $u_i,v_i$ 之间有直接道路。\n\n接下来 $m$ 行，每行两个整数，第 $i+n+1$ 行是 $x_i$ 和 $y_i$，表示第 $i$ 个老师的查寝路线。", "outputFormat": "一行一个整数，即答案。", "hint": "### 样例说明\n\n#### 样例说明 $1$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mf6j6hz3.png)\n\nYsuperman选择关闭连接着 $1$ 和 $5$ 的道路，老师的总不满意值为 $0$，寝室被分为 $2$ 个连通块，小朋友们的总不满意值为 $3$。\n\n#### 样例说明 $2$\n\n图同样例一。\n\nYsuperman选择关闭连接着 $1$ 和 $5$ 的道路以及连接着 $1$ 和 $4$ 的道路，老师的总不满意值为 $1$，寝室被分为 $3$ 个连通块，小朋友们的总不满意值为 $2$。\n\n------\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| Subtask | $n$ | $m$ | $k$ | 特殊性质 | 分数 |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| 1 | $\\le 20$ | $\\le 10$ | $\\le 80$ | 无 | 8 |\n| 2 | $\\le 150$ | $\\le 10^3$ | $\\le 8 \\times 10^4$ | 无 | 13 |\n| 3 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 树为一条链 | 13 |\n| 4 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 树为一朵盛开的菊花 | 13 |\n| 5 | $\\le 800$ | $\\le 10^5$ | $= 0$ | 无 | 13 |\n| 6 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 无 | 40 |\n\n【一条链】定义为：所有点的度数 $\\le2$。\n\n【一朵盛开的菊花】定义为：存在一个点的度数为 $n-1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le h_i\\le 10^9，0\\le k \\le 8\\cdot 10^7,u_i\\ne v_i$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2020] 换寝室", "background": "马上要开学了，Ysuperman 正在为给孩子们分配寝室忙得不可开交......", "description": "幼儿园里面有 $n$ 个房间，这些房间由 $n-1$ 条双向道路连接着，第 $i$ 条道路连接着房间 $u_i$ 和 $v_i$ ，每条道路 Ysuperman 都可以选择开启或者是关闭，每个房间**在所有道路开启的前提下**都可以到达其他任意一个房间。\n\n每个房间有一个差异值，其中，第 $i$ 个房间的差异值为 $h_i$ 。\n\n在选择完关闭哪些道路后，整个寝室会被分成许多连通块，一个联通块内的小朋友的不满意值定义为连通块内差异值的**最大值减去最小值**，小朋友们的总不满意值定义为**所有联通块不满意值的最大值**。\n\n寝室里有 $m$ 个寝室老师，每个老师晚上都要查寝，第 $i$ 个老师会从第 $x_i$ 个房间走到第 $y_i$ 个房间，如果老师在查寝时经过了某条被关闭的道路，TA就会很生气，一个老师的不满意值定义为**从 $x_i$ 走到 $y_i$ 经过的被关闭的道路数量**，老师的总不满意值定义为**所有老师的不满意值之和**。\n\nYsuperman 能承受的老师的总不满意值最大为 $k$ ，现在TA想知道小朋友们的总不满意值最小可以达到多少。", "inputFormat": "输入共 $n+m+1$ 行。\n\n第一行三个整数 $n,m,k$，表示房间个数，寝室老师个数和Ysuperman 能承受的老师的总不满意值。\n\n接下来一行，共 $n$ 个整数，第 $i$ 个整数是 $h_i$，表示第 $i$ 个房间的差异值。\n\n接下来 $n-1$ 行，每行两个整数，第 $i+2$ 行是 $u_i$ 和 $v_i$，表示寝室 $u_i,v_i$ 之间有直接道路。\n\n接下来 $m$ 行，每行两个整数，第 $i+n+1$ 行是 $x_i$ 和 $y_i$，表示第 $i$ 个老师的查寝路线。", "outputFormat": "一行一个整数，即答案。", "hint": "### 样例说明\n\n#### 样例说明 $1$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mf6j6hz3.png)\n\nYsuperman选择关闭连接着 $1$ 和 $5$ 的道路，老师的总不满意值为 $0$，寝室被分为 $2$ 个连通块，小朋友们的总不满意值为 $3$。\n\n#### 样例说明 $2$\n\n图同样例一。\n\nYsuperman选择关闭连接着 $1$ 和 $5$ 的道路以及连接着 $1$ 和 $4$ 的道路，老师的总不满意值为 $1$，寝室被分为 $3$ 个连通块，小朋友们的总不满意值为 $2$。\n\n------\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| Subtask | $n$ | $m$ | $k$ | 特殊性质 | 分数 |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| 1 | $\\le 20$ | $\\le 10$ | $\\le 80$ | 无 | 8 |\n| 2 | $\\le 150$ | $\\le 10^3$ | $\\le 8 \\times 10^4$ | 无 | 13 |\n| 3 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 树为一条链 | 13 |\n| 4 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 树为一朵盛开的菊花 | 13 |\n| 5 | $\\le 800$ | $\\le 10^5$ | $= 0$ | 无 | 13 |\n| 6 | $\\le 800$ | $\\le 10^5$ | $\\le 8 \\times 10^7$ | 无 | 40 |\n\n【一条链】定义为：所有点的度数 $\\le2$。\n\n【一朵盛开的菊花】定义为：存在一个点的度数为 $n-1$。\n\n对于 $100\\%$ 的数据，满足 $1\\le h_i\\le 10^9，0\\le k \\le 8\\cdot 10^7,u_i\\ne v_i$ 。", "locale": "zh-CN"}}}
{"pid": "P6595", "type": "P", "difficulty": 6, "samples": [["5 8 11\n13482572 \n299473306 598946612 898419918 199648871 499122177 798595483 99824436 1", "0 1"], ["3 5 0\n1\n1 1 1 1 1", "3 1"], ["2 2 0\n499122177\n499122177 499122177", "855638018 507044752"], ["11 4 514\n1919810\n1919810 1919810 1919810 1919810", "550831570 75142974"], ["100000 20 227\n2020\n2000 2001 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019", "808786679 861511854"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "Special Judge", "O2优化", "容斥原理", "期望"], "title": "[YsOI2020] 计划", "background": "相信大家已经知道了这样几个事实：  \n- Ysuperman 是很有钱。\n\n- Ysuperman 一直都很善于制定计划。\n\n- Ysuperman 管理着一个幼儿园。\n\n- Ysuperman 收藏了一些零食。\n\n- 每一天，TA 可能会心血来潮地想要有计划地吃掉 TA 的零食。\n", "description": "Ysuperman 现在有 $n$ 份零食，对**每份**零食而言，TA 每一天有 $P$ 的概率对 TA 的这份零食做出计划，TA 每做出一份计划后的 $T$ 天后，TA 将会将这一份零食给吃掉。需要特殊说明的是，如果在Ysuperman制定计划前已经对该份零食做出计划，则实际会按照**第一份计划的时间**将零食吃掉。\n\n不幸的是，幼儿园内贪吃的小朋友会破坏这一计划。  幼儿园内有 $m$ 个小朋友，TA 们觊觎着 Ysuperman 的零食。对于**每份**零食，每天会有 $p_i$ 的概率被第 $i$ 个小朋友偷吃。如果这份零食在某位小朋友偷吃之前被吃掉了，那么相应地，这位小朋友就偷吃不了。**如果有一份零食在计划完成前被偷吃，那么，相关计划就无法实现了。**\n\n现在 Ysuperman 要对 TA 的计划进行风险评估，TA 悬赏了 $114514pts$ ，这个项目在经过层层转包后来到了您的手上，现在已经算出了各概率在模意义下的值。经过各方协商，您如果解决了这个问题，您可以获得 $ 100pts $ 。您需要告诉 TA **Ysuperman 能期望吃掉多少份零食，以及 Ysuperman 的零食期望在多少天后被吃完** 。\n\n**如果一份零食被某位小朋友吃掉了，那么这份零食就不属于Ysuperman了。**\n\n需要注意的是，Ysuperman每天制定计划的时间在小朋友偷吃糖果**之前**。\n\nYsuperman 认为浮点数的精度误差太大，所以你只需要输出答案**对 $998244353$ 取模**的结果。", "inputFormat": "第一行包括三个正整数 $n,m,T$ ，含义如题目所述。 \n\n第二行包括一个正整数 $ P $ ，表示 $P$ 对 $998244353$ 取模后的结果。  \n\n第三行包括 $m$ 个正整数 $p_1,p_2,\\cdots,p_m$ ，分别表示 $p_i$ 对 $998244353$ 取模后的结果。", "outputFormat": "一行，两个自然数。 分别表示 Ysuperman 能期望吃掉多少份零食，以及 Ysuperman 的零食期望在多少天后被吃完，您需要输出答案对 $998244353$ 取模后的结果。\n\n", "hint": "### 样例说明\n\n#### 样例说明 $1$:\n\n在取模前的其中一种可能情况为：\n```cpp\n5 8 11  \n0.1  \n0.1 0.2 0.3 0.4 0.5 0.6 0.7 1\n```\n该情况下，小朋友会在第一天中偷吃完所有的零食。\n\n#### 样例说明 $2$:\n\n在取模前的一种可能情况为：\n```cpp\n3 5 0  \n1  \n1 1 1 1 1\n```\n\n该情况下，Ysuperman 会在第一天计划并吃完所有的零食。\n\n#### 样例说明 $3$:\n\n在取模前的一种可能的情况为：\n\n```cpp\n2 2 0  \n0.5  \n0.5 0.5\n```\n在此情况下，答案为 $\\dfrac{8}{7}$ 和 $\\dfrac{80}{63}$。\n\n由于解答过程较为复杂，所以请聪明的读者自行思考。\n\n\n------------\n### 数据范围\n\n**如果您只答对了某个测试点两问中的任意一问，您可以获得这个测试点 $ 25\\% $ 的分数。**\n\n以下是致敬 $\\text{NOI}$ 的部分分表格：\n| 测试点编号 | $n$ | $m$ | $T$ | $P$ | 特殊性质 |\n| :-----------: | -----------: | -----------: | -----------: | -----------: | :-----------: |\n| 1 | $=1$ | $=1$ | $=0$ | 无其它约束 | 无 |\n| 2 | $=1$ | $=10$ | $=1$ | $=1$ | $1$ |\n| 3 | $=1$ | $\\le100$ | $=227$ | $=1$ | $2$ |\n| 4 | $\\le 20$ | $\\le 1000$ | $=4$ | 无其它约束 | 无 |\n| 5 | $\\le 100$ | $\\le 1000$ | $=4$ | 无其它约束 | 无 |\n| 6 | $\\le 1000$ | $\\le 1000$ | $=227$ | $=0$ | $1$ |\n| 7 | $\\le 100000$ | $\\le 100000$ | $=233$ | $=1$ | $2$ |\n| 8 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 9 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 10 | $=100000$ | $=100000$ | $=3$ | 无其它约束 | $2$ |\n| 11 | $=114514$ | $=114514$ | $=3$ | 无其它约束 | 无 |\n| 12 | $\\le1919820$ | $=114514$ | $=0$ | 无其它约束 | $2$ |\n| 13 | $\\le 1919820$ | $=1$ | $\\le 227$ | 无其它约束 | 无 |\n| 14 | $\\le 1919820$ | $\\le114514$ | $\\le 227$ | 无其它约束 | $2$ |\n| 15 | $\\le 1919820$ | $=1$ | $\\le 500$ | $=1$ | 无 |\n| 16 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | 无 |\n| 17 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | 无 |\n| 18 | $\\le 1919820$ | $\\le 114514$ | $=0$ | 无其它约束 | 无 |\n| 19 | $\\le 1919820$ | $\\le 114514$ | $=0$ | 无其它约束 | 无 |\n| 20 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | $2$ |\n| 21 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | 无 |\n| 22 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | 无 |\n| 23 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | 无 |\n| 24 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | 无 |\n| 25 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | $2$ |\n\n对于 $100\\%$ 的数据，满足 $ 1\\le n\\le 1919820,1\\le m \\le 114514,0\\le T \\le 2333,0\\le P< 998244353,1\\le p_i<998244353$\n\n\n特殊性质 $1$：存在一个 $i$ 使得$p_i=1$。\n\n特殊性质 $2$：所有的 $p_i$ 都相等。", "locale": "zh-CN", "translations": {"en": {"title": "[YsOI2020] Plan", "background": "I believe everyone already knows the following facts:  \n- Ysuperman is very rich.\n\n- Ysuperman has always been good at making plans.\n\n- Ysuperman runs a kindergarten.\n\n- Ysuperman has collected some snacks.\n\n- Every day, they may suddenly feel like eating their snacks in a planned way.", "description": "Ysuperman currently has $n$ snacks. For **each** snack, every day there is a probability $P$ that they will make a plan for this snack. After $T$ days from the time they make a plan, they will eat this snack. A special note: if a plan has already been made for this snack before Ysuperman makes a new plan, then in practice the snack will be eaten according to the time of the **first plan**.\n\nUnfortunately, greedy kids in the kindergarten may ruin this plan. There are $m$ kids in the kindergarten, and they are eyeing Ysuperman’s snacks. For **each** snack, every day there is a probability $p_i$ that it will be stolen and eaten by kid $i$. If the snack has been eaten before some kid steals it, then correspondingly, that kid cannot steal it. **If a snack is stolen before its plan is completed, then the related plan cannot be carried out.**\n\nNow Ysuperman wants to do a risk assessment of their plan. They offered a bounty of $114514pts$, and after multiple layers of subcontracting, the project has ended up in your hands. The values of these probabilities modulo have already been computed. After negotiation, if you solve this problem, you can get $100pts$. You need to tell them **the expected number of snacks Ysuperman can eat, and the expected number of days after which all of Ysuperman’s snacks are finished (eaten up)**.\n\n**If a snack is eaten by a kid, then that snack no longer belongs to Ysuperman.**\n\nNote that each day, Ysuperman makes plans **before** the kids attempt to steal the snacks.\n\nYsuperman thinks floating-point precision errors are too large, so you only need to output the answers **modulo $998244353$**.", "inputFormat": "The first line contains three positive integers $n,m,T$, with meanings as described in the statement. \n\nThe second line contains one positive integer $P$, representing the value of $P$ modulo $998244353$.  \n\nThe third line contains $m$ positive integers $p_1,p_2,\\cdots,p_m$, each representing the value of $p_i$ modulo $998244353$.", "outputFormat": "One line with two non-negative integers, representing the expected number of snacks Ysuperman can eat, and the expected number of days after which Ysuperman’s snacks are finished. Output the answers modulo $998244353$.", "hint": "### Sample Explanation\n\n#### Sample Explanation $1$:\n\nOne possible situation before taking modulo is:\n```cpp\n5 8 11  \n0.1  \n0.1 0.2 0.3 0.4 0.5 0.6 0.7 1\n```\nIn this case, the kids will steal and eat all snacks on the first day.\n\n#### Sample Explanation $2$:\n\nOne possible situation before taking modulo is:\n```cpp\n3 5 0  \n1  \n1 1 1 1 1\n```\n\nIn this case, Ysuperman will make plans and finish eating all snacks on the first day.\n\n#### Sample Explanation $3$:\n\nOne possible situation before taking modulo is:\n\n```cpp\n2 2 0  \n0.5  \n0.5 0.5\n```\nIn this case, the answers are $\\dfrac{8}{7}$ and $\\dfrac{80}{63}$.\n\nSince the solution process is rather complicated, please let smart readers think it through by themselves.\n\n------------\n### Constraints\n\n**If you only answer either one of the two questions correctly for a test point, you can get $25\\%$ of the score for that test point.**\n\nBelow is a partial scoring table as a tribute to $\\text{NOI}$:\n| Test Point ID | $n$ | $m$ | $T$ | $P$ | Special Property |\n| :-----------: | -----------: | -----------: | -----------: | -----------: | :-----------: |\n| 1 | $=1$ | $=1$ | $=0$ | No other constraints | None |\n| 2 | $=1$ | $=10$ | $=1$ | $=1$ | $1$ |\n| 3 | $=1$ | $\\le100$ | $=227$ | $=1$ | $2$ |\n| 4 | $\\le 20$ | $\\le 1000$ | $=4$ | No other constraints | None |\n| 5 | $\\le 100$ | $\\le 1000$ | $=4$ | No other constraints | None |\n| 6 | $\\le 1000$ | $\\le 1000$ | $=227$ | $=0$ | $1$ |\n| 7 | $\\le 100000$ | $\\le 100000$ | $=233$ | $=1$ | $2$ |\n| 8 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 9 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 10 | $=100000$ | $=100000$ | $=3$ | No other constraints | $2$ |\n| 11 | $=114514$ | $=114514$ | $=3$ | No other constraints | None |\n| 12 | $\\le1919820$ | $=114514$ | $=0$ | No other constraints | $2$ |\n| 13 | $\\le 1919820$ | $=1$ | $\\le 227$ | No other constraints | None |\n| 14 | $\\le 1919820$ | $\\le114514$ | $\\le 227$ | No other constraints | $2$ |\n| 15 | $\\le 1919820$ | $=1$ | $\\le 500$ | $=1$ | None |\n| 16 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | None |\n| 17 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | None |\n| 18 | $\\le 1919820$ | $\\le 114514$ | $=0$ | No other constraints | None |\n| 19 | $\\le 1919820$ | $\\le 114514$ | $=0$ | No other constraints | None |\n| 20 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | No other constraints | $2$ |\n| 21 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | No other constraints | None |\n| 22 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | No other constraints | None |\n| 23 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | No other constraints | None |\n| 24 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | No other constraints | None |\n| 25 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | No other constraints | $2$ |\n\nFor $100\\%$ of the testdata, it holds that $ 1\\le n\\le 1919820,1\\le m \\le 114514,0\\le T \\le 2333,0\\le P< 998244353,1\\le p_i<998244353$.\n\nSpecial property $1$: There exists an $i$ such that $p_i=1$.\n\nSpecial property $2$: All $p_i$ are equal.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[YsOI2020] 计划", "background": "相信大家已经知道了这样几个事实：  \n- Ysuperman 是很有钱。\n\n- Ysuperman 一直都很善于制定计划。\n\n- Ysuperman 管理着一个幼儿园。\n\n- Ysuperman 收藏了一些零食。\n\n- 每一天，TA 可能会心血来潮地想要有计划地吃掉 TA 的零食。\n", "description": "Ysuperman 现在有 $n$ 份零食，对**每份**零食而言，TA 每一天有 $P$ 的概率对 TA 的这份零食做出计划，TA 每做出一份计划后的 $T$ 天后，TA 将会将这一份零食给吃掉。需要特殊说明的是，如果在Ysuperman制定计划前已经对该份零食做出计划，则实际会按照**第一份计划的时间**将零食吃掉。\n\n不幸的是，幼儿园内贪吃的小朋友会破坏这一计划。  幼儿园内有 $m$ 个小朋友，TA 们觊觎着 Ysuperman 的零食。对于**每份**零食，每天会有 $p_i$ 的概率被第 $i$ 个小朋友偷吃。如果这份零食在某位小朋友偷吃之前被吃掉了，那么相应地，这位小朋友就偷吃不了。**如果有一份零食在计划完成前被偷吃，那么，相关计划就无法实现了。**\n\n现在 Ysuperman 要对 TA 的计划进行风险评估，TA 悬赏了 $114514pts$ ，这个项目在经过层层转包后来到了您的手上，现在已经算出了各概率在模意义下的值。经过各方协商，您如果解决了这个问题，您可以获得 $ 100pts $ 。您需要告诉 TA **Ysuperman 能期望吃掉多少份零食，以及 Ysuperman 的零食期望在多少天后被吃完** 。\n\n**如果一份零食被某位小朋友吃掉了，那么这份零食就不属于Ysuperman了。**\n\n需要注意的是，Ysuperman每天制定计划的时间在小朋友偷吃糖果**之前**。\n\nYsuperman 认为浮点数的精度误差太大，所以你只需要输出答案**对 $998244353$ 取模**的结果。", "inputFormat": "第一行包括三个正整数 $n,m,T$ ，含义如题目所述。 \n\n第二行包括一个正整数 $ P $ ，表示 $P$ 对 $998244353$ 取模后的结果。  \n\n第三行包括 $m$ 个正整数 $p_1,p_2,\\cdots,p_m$ ，分别表示 $p_i$ 对 $998244353$ 取模后的结果。", "outputFormat": "一行，两个自然数。 分别表示 Ysuperman 能期望吃掉多少份零食，以及 Ysuperman 的零食期望在多少天后被吃完，您需要输出答案对 $998244353$ 取模后的结果。\n\n", "hint": "### 样例说明\n\n#### 样例说明 $1$:\n\n在取模前的其中一种可能情况为：\n```cpp\n5 8 11  \n0.1  \n0.1 0.2 0.3 0.4 0.5 0.6 0.7 1\n```\n该情况下，小朋友会在第一天中偷吃完所有的零食。\n\n#### 样例说明 $2$:\n\n在取模前的一种可能情况为：\n```cpp\n3 5 0  \n1  \n1 1 1 1 1\n```\n\n该情况下，Ysuperman 会在第一天计划并吃完所有的零食。\n\n#### 样例说明 $3$:\n\n在取模前的一种可能的情况为：\n\n```cpp\n2 2 0  \n0.5  \n0.5 0.5\n```\n在此情况下，答案为 $\\dfrac{8}{7}$ 和 $\\dfrac{80}{63}$。\n\n由于解答过程较为复杂，所以请聪明的读者自行思考。\n\n\n------------\n### 数据范围\n\n**如果您只答对了某个测试点两问中的任意一问，您可以获得这个测试点 $ 25\\% $ 的分数。**\n\n以下是致敬 $\\text{NOI}$ 的部分分表格：\n| 测试点编号 | $n$ | $m$ | $T$ | $P$ | 特殊性质 |\n| :-----------: | -----------: | -----------: | -----------: | -----------: | :-----------: |\n| 1 | $=1$ | $=1$ | $=0$ | 无其它约束 | 无 |\n| 2 | $=1$ | $=10$ | $=1$ | $=1$ | $1$ |\n| 3 | $=1$ | $\\le100$ | $=227$ | $=1$ | $2$ |\n| 4 | $\\le 20$ | $\\le 1000$ | $=4$ | 无其它约束 | 无 |\n| 5 | $\\le 100$ | $\\le 1000$ | $=4$ | 无其它约束 | 无 |\n| 6 | $\\le 1000$ | $\\le 1000$ | $=227$ | $=0$ | $1$ |\n| 7 | $\\le 100000$ | $\\le 100000$ | $=233$ | $=1$ | $2$ |\n| 8 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 9 | $\\le1919820$ | $=114514$ | $=2333$ | $=0$ | $2$ |\n| 10 | $=100000$ | $=100000$ | $=3$ | 无其它约束 | $2$ |\n| 11 | $=114514$ | $=114514$ | $=3$ | 无其它约束 | 无 |\n| 12 | $\\le1919820$ | $=114514$ | $=0$ | 无其它约束 | $2$ |\n| 13 | $\\le 1919820$ | $=1$ | $\\le 227$ | 无其它约束 | 无 |\n| 14 | $\\le 1919820$ | $\\le114514$ | $\\le 227$ | 无其它约束 | $2$ |\n| 15 | $\\le 1919820$ | $=1$ | $\\le 500$ | $=1$ | 无 |\n| 16 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | 无 |\n| 17 | $\\le 1919820$ | $\\le 114514$ | $\\le 500$ | $=1$ | 无 |\n| 18 | $\\le 1919820$ | $\\le 114514$ | $=0$ | 无其它约束 | 无 |\n| 19 | $\\le 1919820$ | $\\le 114514$ | $=0$ | 无其它约束 | 无 |\n| 20 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | $2$ |\n| 21 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | 无 |\n| 22 | $\\le 100000$ | $\\le 100000$ | $\\le 500$ | 无其它约束 | 无 |\n| 23 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | 无 |\n| 24 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | 无 |\n| 25 | $\\le 1919820$ | $\\le 114514$ | $\\le 2333$ | 无其它约束 | $2$ |\n\n对于 $100\\%$ 的数据，满足 $ 1\\le n\\le 1919820,1\\le m \\le 114514,0\\le T \\le 2333,0\\le P< 998244353,1\\le p_i<998244353$\n\n\n特殊性质 $1$：存在一个 $i$ 使得$p_i=1$。\n\n特殊性质 $2$：所有的 $p_i$ 都相等。", "locale": "zh-CN"}}}
{"pid": "P6596", "type": "P", "difficulty": 7, "samples": [["3 3", "4"], ["5 1", "453"]], "limits": {"time": [800, 800, 800, 800, 800, 800, 800, 800, 800, 800], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["动态规划 DP", "组合数学", "生成函数"], "title": "How Many of Them", "background": null, "description": "在无向连通图中，若一条边被删除后，图会分成不连通的两部分，则称该边为割边。\n\n求满足如下条件的无向连通图的数量：\n\n1. 由 $n$ 个结点构成，结点有标号。\n\n2. 割边不超过 $m$ 条。\n\n3. 没有重边和自环。\n\n答案对 $10^{9}+7$ 取模。", "inputFormat": "仅一行，两个整数 $n$ 和 $m$。", "outputFormat": "一个整数，表示答案。", "hint": "$2≤n≤50$，$0≤m≤\\dfrac{n(n-1)}{2}$。\n\nSource: Gennady Korotkevich (tourist), ITMO University.", "locale": "zh-CN", "translations": {"zh-CN": {"title": "How Many of Them", "background": null, "description": "在无向连通图中，若一条边被删除后，图会分成不连通的两部分，则称该边为割边。\n\n求满足如下条件的无向连通图的数量：\n\n1. 由 $n$ 个结点构成，结点有标号。\n\n2. 割边不超过 $m$ 条。\n\n3. 没有重边和自环。\n\n答案对 $10^{9}+7$ 取模。", "inputFormat": "仅一行，两个整数 $n$ 和 $m$。", "outputFormat": "一个整数，表示答案。", "hint": "$2≤n≤50$，$0≤m≤\\dfrac{n(n-1)}{2}$。\n\nSource: Gennady Korotkevich (tourist), ITMO University.", "locale": "zh-CN"}}}
{"pid": "P6597", "type": "P", "difficulty": 7, "samples": [["5", "1\n1\n3\n5"]], "limits": {"time": [2000], "memory": [512000]}, "tags": ["O2优化", "Pólya 定理", "生成函数", "快速数论变换 NTT"], "title": "烯烃计数", "background": "你可能需要：\n\n+ [烷基计数](https://loj.ac/problem/6538)\n\n+ [烷烃计数](https://loj.ac/problem/6512)\n\n由于洛谷没有上面两个题，所以就弄了这个题。", "description": "求化学式为 $\\text{C}_n \\text{H}_{2n}$ 的 **烯烃（乙烯的同系物）** 的同分异构体个数。\n\n本题中不考虑空间异构和顺反异构。\n\n答案对 $998244353$ 取模。", "inputFormat": "一个正整数 $n$。", "outputFormat": "共 $n-1$ 行分别碳原子数目为 $2\\sim n$ 的答案。", "hint": "#### 样例 1 解释\n\n+ $n=2$：乙烯。\n+ $n=3$：丙烯。\n+ $n=4$：1-丁烯；2-丁烯；2-甲基-1-丙烯。\n+ $n=5$：1-戊烯；2-戊烯；2-甲基-1-丁烯；3-甲基-1-丁烯；2-甲基-2-丁烯。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n\\le 100000$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "烯烃计数", "background": "你可能需要：\n\n+ [烷基计数](https://loj.ac/problem/6538)\n\n+ [烷烃计数](https://loj.ac/problem/6512)\n\n由于洛谷没有上面两个题，所以就弄了这个题。", "description": "求化学式为 $\\text{C}_n \\text{H}_{2n}$ 的 **烯烃（乙烯的同系物）** 的同分异构体个数。\n\n本题中不考虑空间异构和顺反异构。\n\n答案对 $998244353$ 取模。", "inputFormat": "一个正整数 $n$。", "outputFormat": "共 $n-1$ 行分别碳原子数目为 $2\\sim n$ 的答案。", "hint": "#### 样例 1 解释\n\n+ $n=2$：乙烯。\n+ $n=3$：丙烯。\n+ $n=4$：1-丁烯；2-丁烯；2-甲基-1-丙烯。\n+ $n=5$：1-戊烯；2-戊烯；2-甲基-1-丁烯；3-甲基-1-丁烯；2-甲基-2-丁烯。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n\\le 100000$。\n", "locale": "zh-CN"}}}
{"pid": "P6598", "type": "P", "difficulty": 7, "samples": [["5", "3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": [], "title": "烷烃计数", "background": "", "description": "$n$ 个碳原子的烷烃共有多少种同分异构体（不考虑立体异构）？\n\n提示：如果你不知道什么是烷烃，那么你可以认为这个问题等价于求 $n$ 个点的无标号无根树并满足每个点的度数 $\\le 4$ 的树的个数。", "inputFormat": "一个整数 $n$ 表示碳原子的个数。", "outputFormat": "一个整数表示答案，对 $998244353$ 取模的结果。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l8x7ct53.png)\n\n#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "烷烃计数", "background": "", "description": "$n$ 个碳原子的烷烃共有多少种同分异构体（不考虑立体异构）？\n\n提示：如果你不知道什么是烷烃，那么你可以认为这个问题等价于求 $n$ 个点的无标号无根树并满足每个点的度数 $\\le 4$ 的树的个数。", "inputFormat": "一个整数 $n$ 表示碳原子的个数。", "outputFormat": "一个整数表示答案，对 $998244353$ 取模的结果。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/l8x7ct53.png)\n\n#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P6599", "type": "P", "difficulty": 3, "samples": [["1\n2 3\n", "6"], ["2\n114 514\n1919 180\n", "8388223\n16580700"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "贪心", "进制", "位运算", "构造"], "title": "「EZEC-2」异或", "background": "", "description": "有 $T$ 组询问，每次给定两个正整数 $n,l$，   \n\n你需要构造一个长度为 $l$ 的正整数序列 $a$（编号从 $1$ 至 $l$），   \n\n且满足 $\\forall i\\in[1,l]$，都有 $a_i\\in[1,n]$。\n\n求：\n\n$$\\sum_{i=1}^l\\sum_{j=1}^{i-1}a_i\\oplus a_j$$\n\n的最大值。\n\n为了避免答案过大，对于每组询问，只需要输出这个最大值对 $10^9+7$ 取模的结果。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来第 $2$ 行到第 $T+1$ 行，每行两个整数 $n,l$ ，分别代表 $a_i$ 的最大取值与 $a$ 的长度。 \n", "outputFormat": "共 $T$ 行，每行一个整数，对应每组询问的答案对 $10^9+7$ 取模的结果。", "hint": "**【样例解释 #1】**   \n当 $n=2,l=3$，$a$ 取 $\\{1,2,1\\}$ 的任一排列时可以得到最大值，为 $(1\\oplus2)+(1\\oplus1)+(2\\oplus1)=6$，易证明此时原式有最大值。\n\n---\n**【数据规模与约定】**\n| 测试点编号 | $T\\le$ | $n\\le$ | $l\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim5$ | $1$ | $10$ | $5$ |\n| $6$ | $5\\times 10^5$ | $10^{12}$ | $2$ |\n| $7$ | $5\\times 10^5$ | $10^{12}$ | $3$ |\n| $8\\sim10$ | $5\\times 10^5$ | $10^{12}$ | $10^5$ |\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 5\\times10^5$，$1\\le n\\le 10^{12}$，$2\\le l \\le 10^5$。\n\n\n---\n**【提示】**\n\n1. 「$\\oplus$」是按位异或符号。如果您不知道什么是按位异或，可以参考[这里](https://oi-wiki.org/math/bit/#_1)。\n2. 取模是一种运算，$a$ 对 $b$ 取模代表将 $a$ 赋值为 $a$ 除以 $b$ 所得到的余数。  \n在 C++ / Python 中的取模符号为 `%`，在 Pascal 中的取模符号为 `mod`。\n3. $\\sum$ 是求和符号。如果您不知道什么是 $\\sum$ 符号，可以参考[这里](https://baike.baidu.com/item/∑/1233796?fr=aladdin)。\n4. 请注意数据的读入输出对程序效率造成的影响。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-2」异或", "background": "", "description": "有 $T$ 组询问，每次给定两个正整数 $n,l$，   \n\n你需要构造一个长度为 $l$ 的正整数序列 $a$（编号从 $1$ 至 $l$），   \n\n且满足 $\\forall i\\in[1,l]$，都有 $a_i\\in[1,n]$。\n\n求：\n\n$$\\sum_{i=1}^l\\sum_{j=1}^{i-1}a_i\\oplus a_j$$\n\n的最大值。\n\n为了避免答案过大，对于每组询问，只需要输出这个最大值对 $10^9+7$ 取模的结果。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来第 $2$ 行到第 $T+1$ 行，每行两个整数 $n,l$ ，分别代表 $a_i$ 的最大取值与 $a$ 的长度。 \n", "outputFormat": "共 $T$ 行，每行一个整数，对应每组询问的答案对 $10^9+7$ 取模的结果。", "hint": "**【样例解释 #1】**   \n当 $n=2,l=3$，$a$ 取 $\\{1,2,1\\}$ 的任一排列时可以得到最大值，为 $(1\\oplus2)+(1\\oplus1)+(2\\oplus1)=6$，易证明此时原式有最大值。\n\n---\n**【数据规模与约定】**\n| 测试点编号 | $T\\le$ | $n\\le$ | $l\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1\\sim5$ | $1$ | $10$ | $5$ |\n| $6$ | $5\\times 10^5$ | $10^{12}$ | $2$ |\n| $7$ | $5\\times 10^5$ | $10^{12}$ | $3$ |\n| $8\\sim10$ | $5\\times 10^5$ | $10^{12}$ | $10^5$ |\n\n对于 $100\\%$ 的数据，满足 $1\\le T\\le 5\\times10^5$，$1\\le n\\le 10^{12}$，$2\\le l \\le 10^5$。\n\n\n---\n**【提示】**\n\n1. 「$\\oplus$」是按位异或符号。如果您不知道什么是按位异或，可以参考[这里](https://oi-wiki.org/math/bit/#_1)。\n2. 取模是一种运算，$a$ 对 $b$ 取模代表将 $a$ 赋值为 $a$ 除以 $b$ 所得到的余数。  \n在 C++ / Python 中的取模符号为 `%`，在 Pascal 中的取模符号为 `mod`。\n3. $\\sum$ 是求和符号。如果您不知道什么是 $\\sum$ 符号，可以参考[这里](https://baike.baidu.com/item/∑/1233796?fr=aladdin)。\n4. 请注意数据的读入输出对程序效率造成的影响。", "locale": "zh-CN"}}}
{"pid": "P6600", "type": "P", "difficulty": 4, "samples": [["5 5\n3 3 18 9\n11111\n01110\n11111\n01110\n11111", "2"], ["5 5\n3 3 15 7\n11111\n01110\n11111\n01110\n11111", "7"], ["10 10\n5 4 40 11\n0011111111\n1011110101\n1111111111\n1001111101\n1111101111\n1111110110\n0111011101\n0111111110\n0011111111\n0111111101\n", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["前缀和", "容斥原理"], "title": "「EZEC-2」字母", "background": "\n给你一个 $01$ 矩阵，我们希望你从中找到由连续的 $1$ 组成的「字母 T」。", "description": "「字母 T」由一横和一竖组成，竖一定在横的下方（您可以借助英文字母 `T` 辅助理解）。\n\n在本题中，我们定义「横」为组成「字母 T」的水平线段，「竖」为组成「字母 T」的竖直线段。\n\n注意「横」与「竖」的公共部分同时计入横长和竖长。\n\n**合法的「字母 T」的「横」长必须为奇数且「竖」与「横」交于「横」的中点，「横」长最小为 $3$ ，「竖」长最小为 $2$。**\n\n\n如：\n\n$$\n    \\begin{array}{ccc}\n       0\\color{Red}111\\color{black}1\\\\\n       00\\color{Red}1\\color{black}01\n    \\end{array}\n$$\n\n**只含有**一个合法的「字母 T」（即标红部分）。\n\n\n现在给你一个 $n \\times m$ 的 $01$ 矩阵，请你求出在这个矩阵中**合法**的「字母 T」中，一共有多少个**满足以下条件**的「字母 T」。 \n\n设某个合法的「字母 T」的「横」长为 $w$，「竖」长为 $h$，有：\n\n- $w\\ge a$\n- $h\\ge b$\n- $w\\times h \\ge s$\n- $w+h\\ge x$\n\n两个「字母 T」不相同即两个「字母 T」的 **「横」长** 或 **「竖」长** 或 **最左上角的坐标** 不同。     ", "inputFormat": "第一行，两个整数 $n,m$，表示给定的 $01$ 矩阵共有 $n$ 行 $m$ 列。\n\n第二行，四个整数 $a,b,s,x$。\n\n接下来 $n$ 行，每行 $m$ 个数，只可能是 $0$ / $1$，为给定的矩阵。", "outputFormat": "输出一个整数，表示有多少个**满足条件且合法**的「字母 T」。   ", "hint": "**【样例解释 #1】**\n$$\n    \\begin{array}{ccc}\n      \\color{Red}11111\\qquad11111\\\\01\\color{Red}1\\color{black}10\\qquad01\\color{Red}1\\color{black}10\\\\\n      11\\color{Red}1\\color{black}11\\qquad11\\color{Red}1\\color{black}11\\\\\n      01\\color{Red}1\\color{black}10\\qquad01\\color{Red}1\\color{black}10\\\\\n      11111\\qquad11\\color{Red}1\\color{black}11\\\\\\\\\n      第\\ 1\\ 个\\qquad第\\ 2\\ 个\n    \\end{array}\n$$\n除了以上两个「字母 T」，没有其他满足条件且合法的「字母 T」，故输出 $2$。\n\n**【数据范围】**       \n| 测试点编号 | $n,m\\le$ | $a,b\\le$ | $s\\le$ | $x\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 4$ | $100$ | $100$ |$10^4$|$200$|\n| $5 \\sim 8$ | $500$ | $500$ |$2.5\\times 10^5$|$10^4$|\n| $9,10$ | $3\\times 10^3$ | $0$ |$0$|$0$|\n| $11\\sim 13$ | $3\\times 10^3$ |$3\\times 10^3$|$0$|$6\\times 10^3$|\n| $14\\sim 16$ | $3\\times 10^3$ |$3\\times 10^3$|$9\\times 10^6$|$0$|\n| $17\\sim 20$ | $3\\times 10^3$ |$3\\times 10^3$|$9\\times 10^6$|$6\\times 10^3$|\n\n对于 $100\\%$ 的数据，满足 $1 \\le n,m \\le 3\\times 10^3$，$0 \\le a,b \\le 3\\times10^3$，$0 \\le s \\le 9\\times10^6$，$\\space0 \\le x \\le 6\\times10^3$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-2」字母", "background": "\n给你一个 $01$ 矩阵，我们希望你从中找到由连续的 $1$ 组成的「字母 T」。", "description": "「字母 T」由一横和一竖组成，竖一定在横的下方（您可以借助英文字母 `T` 辅助理解）。\n\n在本题中，我们定义「横」为组成「字母 T」的水平线段，「竖」为组成「字母 T」的竖直线段。\n\n注意「横」与「竖」的公共部分同时计入横长和竖长。\n\n**合法的「字母 T」的「横」长必须为奇数且「竖」与「横」交于「横」的中点，「横」长最小为 $3$ ，「竖」长最小为 $2$。**\n\n\n如：\n\n$$\n    \\begin{array}{ccc}\n       0\\color{Red}111\\color{black}1\\\\\n       00\\color{Red}1\\color{black}01\n    \\end{array}\n$$\n\n**只含有**一个合法的「字母 T」（即标红部分）。\n\n\n现在给你一个 $n \\times m$ 的 $01$ 矩阵，请你求出在这个矩阵中**合法**的「字母 T」中，一共有多少个**满足以下条件**的「字母 T」。 \n\n设某个合法的「字母 T」的「横」长为 $w$，「竖」长为 $h$，有：\n\n- $w\\ge a$\n- $h\\ge b$\n- $w\\times h \\ge s$\n- $w+h\\ge x$\n\n两个「字母 T」不相同即两个「字母 T」的 **「横」长** 或 **「竖」长** 或 **最左上角的坐标** 不同。     ", "inputFormat": "第一行，两个整数 $n,m$，表示给定的 $01$ 矩阵共有 $n$ 行 $m$ 列。\n\n第二行，四个整数 $a,b,s,x$。\n\n接下来 $n$ 行，每行 $m$ 个数，只可能是 $0$ / $1$，为给定的矩阵。", "outputFormat": "输出一个整数，表示有多少个**满足条件且合法**的「字母 T」。   ", "hint": "**【样例解释 #1】**\n$$\n    \\begin{array}{ccc}\n      \\color{Red}11111\\qquad11111\\\\01\\color{Red}1\\color{black}10\\qquad01\\color{Red}1\\color{black}10\\\\\n      11\\color{Red}1\\color{black}11\\qquad11\\color{Red}1\\color{black}11\\\\\n      01\\color{Red}1\\color{black}10\\qquad01\\color{Red}1\\color{black}10\\\\\n      11111\\qquad11\\color{Red}1\\color{black}11\\\\\\\\\n      第\\ 1\\ 个\\qquad第\\ 2\\ 个\n    \\end{array}\n$$\n除了以上两个「字母 T」，没有其他满足条件且合法的「字母 T」，故输出 $2$。\n\n**【数据范围】**       \n| 测试点编号 | $n,m\\le$ | $a,b\\le$ | $s\\le$ | $x\\le$ |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 4$ | $100$ | $100$ |$10^4$|$200$|\n| $5 \\sim 8$ | $500$ | $500$ |$2.5\\times 10^5$|$10^4$|\n| $9,10$ | $3\\times 10^3$ | $0$ |$0$|$0$|\n| $11\\sim 13$ | $3\\times 10^3$ |$3\\times 10^3$|$0$|$6\\times 10^3$|\n| $14\\sim 16$ | $3\\times 10^3$ |$3\\times 10^3$|$9\\times 10^6$|$0$|\n| $17\\sim 20$ | $3\\times 10^3$ |$3\\times 10^3$|$9\\times 10^6$|$6\\times 10^3$|\n\n对于 $100\\%$ 的数据，满足 $1 \\le n,m \\le 3\\times 10^3$，$0 \\le a,b \\le 3\\times10^3$，$0 \\le s \\le 9\\times10^6$，$\\space0 \\le x \\le 6\\times10^3$。\n\n", "locale": "zh-CN"}}}
{"pid": "P6601", "type": "P", "difficulty": 4, "samples": [["2 500000004 1", "125000001"], ["6 114514 11", "756497239"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["递推", "二项式定理", "概率论", "矩阵乘法", "逆元"], "title": "「EZEC-2」机器", "background": "tlx 喜欢科幻小说。   \n\n>小宇宙中只剩下漂流瓶和生态球。漂流瓶隐没于黑暗里,在一千米见方的宇宙中,只有生态球里的小太阳发出一点光芒。在这个小小的生命世界中,几只清澈的水球在零重力环境中静静地飘浮着,有一条小鱼从一只水球中蹦出,跃入另一只水球,轻盈地穿游于绿藻之间。在一小块陆地上的草丛中,有一滴露珠从一片草叶上脱离,旋转着飘起,向太空中折射出一缕晶莹的阳光。    \n>$\\qquad \\qquad \\qquad \\qquad \\qquad \\qquad \\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad --$《三体》    \n\n在另一个宇宙，将是另一番奇景吧。    \n\n在那里，重力似乎变得微不足道了，引力机器成了司空见惯的东西。\n\n引力机器装置内并没有重力，即若有物体在机器上运动，运动过程中只受机器给予的引力，这个力有一定几率使物体向施力物体快速移动，达到一定动力时就可以实现瞬移。\n\n", "description": "一个引力机器由一个光滑圆轨道和 $2n$ 个小孔组成（小孔按**逆时针**从 $1$ 到 $2n$ 编号，每两个相邻的小孔所夹的**劣弧**度数为 $\\dfrac{\\pi}{n}$ ），每个小孔与和其夹角为 $\\pi$ 的另一个小孔有通道相连，比如当 $n=2$ 时，$1$ 号孔和 $3$ 号孔相连。\n\n当 $n=2$ 时，这个装置的构造大概是这样的：\n \n ![](https://cdn.luogu.com.cn/upload/image_hosting/el8alxde.png) \n \n现在我们在 $1$ 号孔处放一个小球，使它一直**沿逆时针方向做匀速圆周运动**，在不瞬移的情况下，每一秒恰好能从一个小孔运动至下一个小孔。\n\n由于未来实验室构造奇特（内部的引力提供装置太神了！），每经过一个小孔时，有 $p$ 的概率**立刻瞬移**（即不花费时间）到通道对面的小孔并继续沿逆时针方向做匀速圆周运动，也就是有 $1-p$ 的概率继续沿圆周向下一个小孔运动。\n\n值得注意的是，**每一单位时刻，小球只能瞬移一次**。  \n\n简单地说，若某一时刻小球在小孔 $i$，则下一时刻它可能运动到小孔 $i \\bmod 2n + 1$ 或 $(i + n) \\bmod 2n + 1$，概率分别为 $1-p$ 和 $p$。\n\n现在 tlx 有两个一模一样的引力机器，两个小球同时从 $1$ 号孔开始运动。他会**随机**（所有可能选择的概率相同）选择一个二元组 $(i,j)( 1\\leqslant i\\leqslant 2n,0\\leqslant j\\leqslant t,i,j\\in \\mathbb Z$ ) 分别代表小孔编号和时间，你需要求出时间为 $j$ 时两个引力机器的小孔 $i$ **同时**有小球**停留（运动经过小孔但瞬移到对面了不算停留）** 的概率。\n\n注意：**小球刚开始运动时也可能瞬移到对面的小孔。**   \n\n为方便计算，我们规定：所有概率都是在模 $10^9+7$ 意义下的。      ", "inputFormat": "输入数据共一行，三个整数 $n,p,t$，分别代表引力装置的小孔数的一半，瞬移的概率对 $10^9+7$ 取模的结果，选择的时间的范围的上界。", "outputFormat": "共一行，一个整数，代表两个小球同时经过所选位置的概率对 $10^9+7$ 取模的结果。", "hint": "**【数据范围与约定】** \n\n**本题采用捆绑测试。**    \n\n具体计分方式如下：   \n\n- Subtask $1$ ($7$ points)：满足 $p\\in \\{0,1\\}$；  \n- Subtask $2$ ($13$ points)：满足 $t\\leqslant 20,n\\leqslant50$；  \n- Subtask $3$ ($20$ points)：满足 $t\\leqslant 10^3,n\\leqslant50$；  \n- Subtask $4$ ($10$ points)：满足 $t\\leqslant 10^3$；  \n- Subtask $5$ ($10$ points)：满足 $t\\leqslant 10^6$；\n- Subtask $6$ ($15$ points)：满足 $n\\leqslant50$；\n- Subtask $7$ ($25$ points)：无特殊限制。\n\n\n对于 $100\\%$ 的数据，满足 $2\\leqslant n\\leqslant 500$，$0\\leqslant p\\leqslant 10^9+6$，$0\\leqslant t \\leqslant 10^9$。  \n\n**注意：不做说明的数据范围即为极限数据范围。**\n\n**【样例解释 #1】**  \n\n$500000004$ 是模 $10^9+7$ 意义下的 $\\dfrac{1}{2}$。 \n\n下面为了方便，记 $P(i,j)$ 为选择的二元组为 $(i,j)$ 时的概率。    \n\n所有概率不为 $0$ 的二元组有：   \n$P(1,0)=\\dfrac{1}{4},P(3,0)=\\dfrac{1}{4},P(2,1)=\\dfrac{1}{4},P(4,1)=\\dfrac{1}{4}$。    \n\n所有可以选择的二元组有：   \n$(1,0),(1,1),(2,0),(2,1),(3,0),(3,1),(4,0),(4,1)$，共 $8$ 种。    \n\n所以总的概率：  \n$$P=\\dfrac{1}{8}×\\dfrac{1}{4}×4+\\dfrac{1}{8}×0×4=\\dfrac{1}{8}$$\n\n在模 $10^9+7$ 意义下为 $125000001$，即为输出的答案。\n\n------------\n\n**【其他提示】**\n\n1. 如果你不了解分数取模，可以查看[这里](https://www.luogu.com.cn/problem/P2613)。  \n\n2. 如果你不明白题目中角度的表示方法，可以查看[弧度制](https://baike.baidu.com/item/弧度制/3315973?fr=aladdin)。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-2」机器", "background": "tlx 喜欢科幻小说。   \n\n>小宇宙中只剩下漂流瓶和生态球。漂流瓶隐没于黑暗里,在一千米见方的宇宙中,只有生态球里的小太阳发出一点光芒。在这个小小的生命世界中,几只清澈的水球在零重力环境中静静地飘浮着,有一条小鱼从一只水球中蹦出,跃入另一只水球,轻盈地穿游于绿藻之间。在一小块陆地上的草丛中,有一滴露珠从一片草叶上脱离,旋转着飘起,向太空中折射出一缕晶莹的阳光。    \n>$\\qquad \\qquad \\qquad \\qquad \\qquad \\qquad \\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad --$《三体》    \n\n在另一个宇宙，将是另一番奇景吧。    \n\n在那里，重力似乎变得微不足道了，引力机器成了司空见惯的东西。\n\n引力机器装置内并没有重力，即若有物体在机器上运动，运动过程中只受机器给予的引力，这个力有一定几率使物体向施力物体快速移动，达到一定动力时就可以实现瞬移。\n\n", "description": "一个引力机器由一个光滑圆轨道和 $2n$ 个小孔组成（小孔按**逆时针**从 $1$ 到 $2n$ 编号，每两个相邻的小孔所夹的**劣弧**度数为 $\\dfrac{\\pi}{n}$ ），每个小孔与和其夹角为 $\\pi$ 的另一个小孔有通道相连，比如当 $n=2$ 时，$1$ 号孔和 $3$ 号孔相连。\n\n当 $n=2$ 时，这个装置的构造大概是这样的：\n \n ![](https://cdn.luogu.com.cn/upload/image_hosting/el8alxde.png) \n \n现在我们在 $1$ 号孔处放一个小球，使它一直**沿逆时针方向做匀速圆周运动**，在不瞬移的情况下，每一秒恰好能从一个小孔运动至下一个小孔。\n\n由于未来实验室构造奇特（内部的引力提供装置太神了！），每经过一个小孔时，有 $p$ 的概率**立刻瞬移**（即不花费时间）到通道对面的小孔并继续沿逆时针方向做匀速圆周运动，也就是有 $1-p$ 的概率继续沿圆周向下一个小孔运动。\n\n值得注意的是，**每一单位时刻，小球只能瞬移一次**。  \n\n简单地说，若某一时刻小球在小孔 $i$，则下一时刻它可能运动到小孔 $i \\bmod 2n + 1$ 或 $(i + n) \\bmod 2n + 1$，概率分别为 $1-p$ 和 $p$。\n\n现在 tlx 有两个一模一样的引力机器，两个小球同时从 $1$ 号孔开始运动。他会**随机**（所有可能选择的概率相同）选择一个二元组 $(i,j)( 1\\leqslant i\\leqslant 2n,0\\leqslant j\\leqslant t,i,j\\in \\mathbb Z$ ) 分别代表小孔编号和时间，你需要求出时间为 $j$ 时两个引力机器的小孔 $i$ **同时**有小球**停留（运动经过小孔但瞬移到对面了不算停留）** 的概率。\n\n注意：**小球刚开始运动时也可能瞬移到对面的小孔。**   \n\n为方便计算，我们规定：所有概率都是在模 $10^9+7$ 意义下的。      ", "inputFormat": "输入数据共一行，三个整数 $n,p,t$，分别代表引力装置的小孔数的一半，瞬移的概率对 $10^9+7$ 取模的结果，选择的时间的范围的上界。", "outputFormat": "共一行，一个整数，代表两个小球同时经过所选位置的概率对 $10^9+7$ 取模的结果。", "hint": "**【数据范围与约定】** \n\n**本题采用捆绑测试。**    \n\n具体计分方式如下：   \n\n- Subtask $1$ ($7$ points)：满足 $p\\in \\{0,1\\}$；  \n- Subtask $2$ ($13$ points)：满足 $t\\leqslant 20,n\\leqslant50$；  \n- Subtask $3$ ($20$ points)：满足 $t\\leqslant 10^3,n\\leqslant50$；  \n- Subtask $4$ ($10$ points)：满足 $t\\leqslant 10^3$；  \n- Subtask $5$ ($10$ points)：满足 $t\\leqslant 10^6$；\n- Subtask $6$ ($15$ points)：满足 $n\\leqslant50$；\n- Subtask $7$ ($25$ points)：无特殊限制。\n\n\n对于 $100\\%$ 的数据，满足 $2\\leqslant n\\leqslant 500$，$0\\leqslant p\\leqslant 10^9+6$，$0\\leqslant t \\leqslant 10^9$。  \n\n**注意：不做说明的数据范围即为极限数据范围。**\n\n**【样例解释 #1】**  \n\n$500000004$ 是模 $10^9+7$ 意义下的 $\\dfrac{1}{2}$。 \n\n下面为了方便，记 $P(i,j)$ 为选择的二元组为 $(i,j)$ 时的概率。    \n\n所有概率不为 $0$ 的二元组有：   \n$P(1,0)=\\dfrac{1}{4},P(3,0)=\\dfrac{1}{4},P(2,1)=\\dfrac{1}{4},P(4,1)=\\dfrac{1}{4}$。    \n\n所有可以选择的二元组有：   \n$(1,0),(1,1),(2,0),(2,1),(3,0),(3,1),(4,0),(4,1)$，共 $8$ 种。    \n\n所以总的概率：  \n$$P=\\dfrac{1}{8}×\\dfrac{1}{4}×4+\\dfrac{1}{8}×0×4=\\dfrac{1}{8}$$\n\n在模 $10^9+7$ 意义下为 $125000001$，即为输出的答案。\n\n------------\n\n**【其他提示】**\n\n1. 如果你不了解分数取模，可以查看[这里](https://www.luogu.com.cn/problem/P2613)。  \n\n2. 如果你不明白题目中角度的表示方法，可以查看[弧度制](https://baike.baidu.com/item/弧度制/3315973?fr=aladdin)。\n\n", "locale": "zh-CN"}}}
{"pid": "P6602", "type": "P", "difficulty": 5, "samples": [["5 4 0\n2 1\n3 1\n0 1\n1 1\n4 1", "1\n1\n0\n0\n-1"], ["5 15 1\n3 1\n8 1\n1 1\n7 1\n14 1", "15\n11\n11\n7\n6\n"], ["10 100 10\n94 3\n22 10\n9 4\n37 1\n21 10\n92 5\n50 9\n68 8\n44 4\n78 9\n", "100\n93\n83\n77\n77\n77\n68\n44\n40\n26\n"], ["10 100 3\n95 1\n13 1\n52 1\n74 1\n40 1\n54 1\n71 1\n68 1\n51 3\n12 2\n", "100\n100\n100\n94\n80\n59\n56\n53\n50\n39\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "离散化", "O2优化"], "title": "「EZEC-2」数轴", "background": "", "description": "小 X 画了一条数轴，他将进行 $n$ 次操作，每次操作他会先在数轴上的 $x_i$ 位置上增添 $a_i$ 个标记。\n\n然后他需要选择二元组 $(l,r)$，满足 $l,r$ 为整数， $0\\le l\\le r \\le m$，且在数轴上的区间 $[l,r]$ 上的标记的个数**小于等于** $k$。\n\n对于每次操作，你需要求出满足条件的二元组 $(l,r)$ 中 $r-l$ 的最大值。\n\n", "inputFormat": "第一行，三个整数，$n,m$ 和 $k$。\n\n下面 $n$ 行，每行两个整数 $x_i$ 和 $a_i$。", "outputFormat": "共 $n$ 行，表示每次操作后的答案。\n\n若找不到符合条件的二元组 $(l,r)$，输出 `-1`。", "hint": "**【样例解释 #2】**\n\n每次操作后选择的二元组分别是 $(0,15),(4,15),(4,15),(8,15),(9,15)$。\n\n---\n**【数据范围与约定】**\n\n| 数据点编号 | $n=$ | $m=$ | $k=$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1,2$ | $100$ | $100$ | $3$ |\n| $3,4$ | $100$ | $10^3$ | $3$ |\n| $5,6$ | $100$ | $10^4$ | $3$ |\n| $7,8$ | $500$ | $10^4$ | $3$ |\n| $9,10$ | $10^3$ | $10^4$ | $3$ |\n| $11,12$ | $10^4$ | $10^5$ | $3$ |\n| $13\\sim 16$ | $10^5$ | $10^6$ | $0$ |\n| $17\\sim 21$ | $10^5$ | $10^6$ | $3$ |\n| $22,23$ | $10^5$ | $10^9$ | $100$ |\n| $24,25$ | $10^6$ | $10^9$ | $100$ |\n\n保证测试点 $13\\sim 16$ 的 $x_i$ 为随机构造。\n\n测试点 $24,25$ 的时间限制为 $3\\text s$ ，其他测试点的时间限制均为 $2\\text s$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$0\\le m\\le 10^9$，$0\\le x_i\\le m$，$0\\le k\\le 100$，$1\\le a_i\\le 100$。\n\n**注意：数轴上同一个位置上可能会多次增添标记。**\n\n**已自动开启 $\\text{O2}$ 优化，保证时空限制均为 $\\text{std}$ 在开启 $\\text{O2}$ 优化后的两倍以上。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-2」数轴", "background": "", "description": "小 X 画了一条数轴，他将进行 $n$ 次操作，每次操作他会先在数轴上的 $x_i$ 位置上增添 $a_i$ 个标记。\n\n然后他需要选择二元组 $(l,r)$，满足 $l,r$ 为整数， $0\\le l\\le r \\le m$，且在数轴上的区间 $[l,r]$ 上的标记的个数**小于等于** $k$。\n\n对于每次操作，你需要求出满足条件的二元组 $(l,r)$ 中 $r-l$ 的最大值。\n\n", "inputFormat": "第一行，三个整数，$n,m$ 和 $k$。\n\n下面 $n$ 行，每行两个整数 $x_i$ 和 $a_i$。", "outputFormat": "共 $n$ 行，表示每次操作后的答案。\n\n若找不到符合条件的二元组 $(l,r)$，输出 `-1`。", "hint": "**【样例解释 #2】**\n\n每次操作后选择的二元组分别是 $(0,15),(4,15),(4,15),(8,15),(9,15)$。\n\n---\n**【数据范围与约定】**\n\n| 数据点编号 | $n=$ | $m=$ | $k=$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1,2$ | $100$ | $100$ | $3$ |\n| $3,4$ | $100$ | $10^3$ | $3$ |\n| $5,6$ | $100$ | $10^4$ | $3$ |\n| $7,8$ | $500$ | $10^4$ | $3$ |\n| $9,10$ | $10^3$ | $10^4$ | $3$ |\n| $11,12$ | $10^4$ | $10^5$ | $3$ |\n| $13\\sim 16$ | $10^5$ | $10^6$ | $0$ |\n| $17\\sim 21$ | $10^5$ | $10^6$ | $3$ |\n| $22,23$ | $10^5$ | $10^9$ | $100$ |\n| $24,25$ | $10^6$ | $10^9$ | $100$ |\n\n保证测试点 $13\\sim 16$ 的 $x_i$ 为随机构造。\n\n测试点 $24,25$ 的时间限制为 $3\\text s$ ，其他测试点的时间限制均为 $2\\text s$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$0\\le m\\le 10^9$，$0\\le x_i\\le m$，$0\\le k\\le 100$，$1\\le a_i\\le 100$。\n\n**注意：数轴上同一个位置上可能会多次增添标记。**\n\n**已自动开启 $\\text{O2}$ 优化，保证时空限制均为 $\\text{std}$ 在开启 $\\text{O2}$ 优化后的两倍以上。**", "locale": "zh-CN"}}}
{"pid": "P6603", "type": "P", "difficulty": 6, "samples": [["7 9 2\n0 4 5 10 10 20 0\n1 2\n1 3\n1 4\n1 6\n2 5\n3 5\n4 7\n5 7\n6 7", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["前缀和", "状压 DP"], "title": "「EZEC-2」甜梦", "background": "\n\n> 昨是今非望无尽，生死相隔两茫茫。    \n解愁肠，度思量，人间如梦，倚笑乘风凉。", "description": "有 $n$ 个梦境场景，编号 $\\in [1,n]$ 且互不相同。PF 有精神分裂症，他在同一时间会处于两个梦境。**这两个梦境所在的场景编号差别的绝对值不能大于 $l$**。场景之间有 $m$ 种**单向**关系，其中第 $i$ 个关系连接场景 $u_i$ 和 $v_i$。不存在不可能到达的场景。\n\n每个场景都有一个快乐值，其中第 $j$ 个场景的快乐值为 $a_j$，在梦境**第一次**经过时增加。\n\n一开始两个梦境均在场景 $1$，当两个梦境都移动到场景 $n$ 时，PF会醒来。\n\n如果某次移动时，PF 目前梦境所在的两个场景 $A,B$ 都与某个场景 $C$ **直接相连**，那么 PF 可以**同时移动** 两个梦境到达场景 $C$ 。否则，PF **一次只能移动一个梦境**。\n\n请你编一个程序，来计算醒来时可能得到的最大快乐值。", "inputFormat": "第一行三个整数 $n,m,l$，分别表示场景的数量，场景之间的关系数量，以及 PF 两个场景距离的最大值。\n\n接下来一行 $n$ 个整数，第 $i$ 个数表示编号为 $i$ 的场景的快乐值为 $a_i$，场景 $1$ 和场景 $n$ 的快乐值为 $0$。\n\n接下来 $m$ 行，每行两个整数 $u,v(1\\le u<v \\le n)$，表示场景之间存在的一条单向关系。 ", "outputFormat": "如果有解，一行一个整数 $q$，表示能获得的最大快乐值。\n\n如果无解，只需输出 `-1`。", "hint": "[大样例](https://www.luogu.com.cn/paste/ar8yuqg6)\n\n**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3bbsu8i.png?x-oss-process=image/resize,m_lfit,h_340,w_500)\n\n下文用 $A,B$ 表示目前正在进行的梦境：\n\n移动梦境 $A \\space 1 \\to 3$，移动梦境 $B \\space 1 \\to 4$，移动梦境 $A \\space 3 \\to 5$，之后同时移动梦境 $A \\space B$ 到达场景 $7$，快乐值总和为 $5+10+10 = 25$。\n\n**注意**：如果想移动某一梦境到场景 $6$，那么另一梦境的编号必须大于等于 $4$。然而到 $6$ 的线路只有 $1\\to 6$，而同时拥有场景 $1$ 和场景 $4$ 不满足中间相隔场景 $\\le l$，故唯一通过场景 $6$ 的方案为将两个梦境同时移动到场景 $6$，而这么做能得到的快乐值为 $20$。\n\n---\n\n**【数据范围与约定】**\n| 测试点编号 | $ n \\le$ | $ m \\le$ | $ l \\le$ | $ a_i \\le$| 时间 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |:----------: | :----------: |:----------: |\n| $1,2$ | $10$ | $15$| $5$ | $50$ | $1\\text s$ |无 |\n| $3\\sim 4$ | $16$ | $40$ | $8$ | $5 \\times 10^3$ |$1\\text s$ |无 |\n| $5\\sim 6$ | $16$ | $120$ | $8$ | $5 \\times 10^3$ |$1\\text s$ |无 |\n| $7 \\sim 10$ | $100$| $10^3$|$10$ | $10^4$|$1 \\text s$ |无|\n| $11$ | $100$| $10^3$|$10$ | $10^4$|$1\\text s$ |场景是一棵树|\n| $12 \\sim 14$ | $10^3$| $10^4$|$10$ | $10^4$|$1\\text s$ |无|\n| $15,16$ | $5\\times10^3$| $3\\times10^4$|$10$ | $10^4$|$1\\text s$ |无|\n| $17,18$ | $5\\times10^3$| $3\\times10^4$|$11$ | $10^4$|$2\\text s$ |无|\n| $19,20$ | $5\\times10^3$| $3\\times10^4$|$12$ | $10^4$|$3\\text s$ |无|\n\n对于 $100\\%$ 的数据，$1\\le u<v \\le n$, $1 \\le n \\le 5\\times 10^3$, $1 \\le m \\le 3\\times 10^4$, $1 \\le a_i \\le 10^4$, $1 \\le l \\le 12$。\n\n**输入保证每个场景都能从起点到达，并且都能连到终点。**\n\n**输入不保证没有重边。**\n\n**输入不对 $u,v$ 的编号差做任何保证。**\n\n------------\n\n**【移动范例】**\n\n假设 $l=2$ 且关系存在，下面的格式表示 $A \\space B$ $\\to$ $A' \\space B'$ 一次移动：\n\n* $1 \\space 3 \\to 5\\space 3$ (√)\n* $1 \\space 3 \\to 1\\space 4$ (×)\n* $1 \\space 3 \\to 8\\space 8$ (√)\n* $1 \\space 3 \\to 6\\space 8$ (×)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-2」甜梦", "background": "\n\n> 昨是今非望无尽，生死相隔两茫茫。    \n解愁肠，度思量，人间如梦，倚笑乘风凉。", "description": "有 $n$ 个梦境场景，编号 $\\in [1,n]$ 且互不相同。PF 有精神分裂症，他在同一时间会处于两个梦境。**这两个梦境所在的场景编号差别的绝对值不能大于 $l$**。场景之间有 $m$ 种**单向**关系，其中第 $i$ 个关系连接场景 $u_i$ 和 $v_i$。不存在不可能到达的场景。\n\n每个场景都有一个快乐值，其中第 $j$ 个场景的快乐值为 $a_j$，在梦境**第一次**经过时增加。\n\n一开始两个梦境均在场景 $1$，当两个梦境都移动到场景 $n$ 时，PF会醒来。\n\n如果某次移动时，PF 目前梦境所在的两个场景 $A,B$ 都与某个场景 $C$ **直接相连**，那么 PF 可以**同时移动** 两个梦境到达场景 $C$ 。否则，PF **一次只能移动一个梦境**。\n\n请你编一个程序，来计算醒来时可能得到的最大快乐值。", "inputFormat": "第一行三个整数 $n,m,l$，分别表示场景的数量，场景之间的关系数量，以及 PF 两个场景距离的最大值。\n\n接下来一行 $n$ 个整数，第 $i$ 个数表示编号为 $i$ 的场景的快乐值为 $a_i$，场景 $1$ 和场景 $n$ 的快乐值为 $0$。\n\n接下来 $m$ 行，每行两个整数 $u,v(1\\le u<v \\le n)$，表示场景之间存在的一条单向关系。 ", "outputFormat": "如果有解，一行一个整数 $q$，表示能获得的最大快乐值。\n\n如果无解，只需输出 `-1`。", "hint": "[大样例](https://www.luogu.com.cn/paste/ar8yuqg6)\n\n**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/a3bbsu8i.png?x-oss-process=image/resize,m_lfit,h_340,w_500)\n\n下文用 $A,B$ 表示目前正在进行的梦境：\n\n移动梦境 $A \\space 1 \\to 3$，移动梦境 $B \\space 1 \\to 4$，移动梦境 $A \\space 3 \\to 5$，之后同时移动梦境 $A \\space B$ 到达场景 $7$，快乐值总和为 $5+10+10 = 25$。\n\n**注意**：如果想移动某一梦境到场景 $6$，那么另一梦境的编号必须大于等于 $4$。然而到 $6$ 的线路只有 $1\\to 6$，而同时拥有场景 $1$ 和场景 $4$ 不满足中间相隔场景 $\\le l$，故唯一通过场景 $6$ 的方案为将两个梦境同时移动到场景 $6$，而这么做能得到的快乐值为 $20$。\n\n---\n\n**【数据范围与约定】**\n| 测试点编号 | $ n \\le$ | $ m \\le$ | $ l \\le$ | $ a_i \\le$| 时间 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |:----------: | :----------: |:----------: |\n| $1,2$ | $10$ | $15$| $5$ | $50$ | $1\\text s$ |无 |\n| $3\\sim 4$ | $16$ | $40$ | $8$ | $5 \\times 10^3$ |$1\\text s$ |无 |\n| $5\\sim 6$ | $16$ | $120$ | $8$ | $5 \\times 10^3$ |$1\\text s$ |无 |\n| $7 \\sim 10$ | $100$| $10^3$|$10$ | $10^4$|$1 \\text s$ |无|\n| $11$ | $100$| $10^3$|$10$ | $10^4$|$1\\text s$ |场景是一棵树|\n| $12 \\sim 14$ | $10^3$| $10^4$|$10$ | $10^4$|$1\\text s$ |无|\n| $15,16$ | $5\\times10^3$| $3\\times10^4$|$10$ | $10^4$|$1\\text s$ |无|\n| $17,18$ | $5\\times10^3$| $3\\times10^4$|$11$ | $10^4$|$2\\text s$ |无|\n| $19,20$ | $5\\times10^3$| $3\\times10^4$|$12$ | $10^4$|$3\\text s$ |无|\n\n对于 $100\\%$ 的数据，$1\\le u<v \\le n$, $1 \\le n \\le 5\\times 10^3$, $1 \\le m \\le 3\\times 10^4$, $1 \\le a_i \\le 10^4$, $1 \\le l \\le 12$。\n\n**输入保证每个场景都能从起点到达，并且都能连到终点。**\n\n**输入不保证没有重边。**\n\n**输入不对 $u,v$ 的编号差做任何保证。**\n\n------------\n\n**【移动范例】**\n\n假设 $l=2$ 且关系存在，下面的格式表示 $A \\space B$ $\\to$ $A' \\space B'$ 一次移动：\n\n* $1 \\space 3 \\to 5\\space 3$ (√)\n* $1 \\space 3 \\to 1\\space 4$ (×)\n* $1 \\space 3 \\to 8\\space 8$ (√)\n* $1 \\space 3 \\to 6\\space 8$ (×)", "locale": "zh-CN"}}}
{"pid": "P6604", "type": "P", "difficulty": 6, "samples": [["5 5 0\n5 2 4 1 3\n1 5\n1 3\n2 4\n3 5\n2 5\n", "28\n"], ["6 5 1\n1 1 4 5 1 4\n19 19 8 10\n", "6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016"], "title": "[HNOI2016] 序列 加强版", "background": "本题是 [P3246](https://www.luogu.com.cn/problem/P3246) 的数据加强版，扩大了询问次数的范围，增加了强制在线，并加入了一组构造数据。\n\n本题的输入输出格式与原题略有不同。", "description": "给定长度为 $ n $ 的序列：$ a_1, a_2, \\cdots , a_n $，记为 $ a[1 \\colon n] $。类似地，$ a[l \\colon r] $（$ 1 \\leq l \\leq r \\leq N$）是指序列：$ a_{l}, a_{l+1}, \\cdots ,a_{r-1}, a_r $。若 $1\\leq l \\leq s \\leq t \\leq r \\leq n$，则称 $ a[s \\colon t] $是 $ a[l \\colon r] $ 的子序列。\n\n现在有 $ q $ 个询问，每个询问给定两个数 $ l $ 和 $ r $，$ 1 \\leq l \\leq r \\leq n $，求 $ a[l \\colon r] $ 的不同子序列的最小值之和。例如，给定序列\n $ 5, 2, 4, 1, 3 $，询问给定的两个数为 $ 1 $ 和 $ 3 $，那么 $ a[1 \\colon 3] $ 有 $ 6 $ 个子序列 $a[1 \\colon 1], a[2 \\colon 2], a[3 \\colon 3], a[1 \\colon 2],a[2 \\colon 3], a[1 \\colon 3] $，这 $6 $ 个子序列的最小值之和为 $5+2+4+2+2+2=17$。", "inputFormat": "第一行三个整数 $n$，$q$，$type$ 表示序列长度，询问数与输入方式。\n\n第二行 $n$ 个整数表示这个序列。\n\n若 $type=0$，接下来 $q$ 行，每行两个数 $l$，$r$，代表询问区间 $[l,r]$。\n\n若 $type=1$，则数据按照如下代码生成：\n```cpp\nnamespace gen{\n\ttypedef unsigned long long ull;\n\tull s,a,b,c,lastans=0;\n\tull rand(){\n\t\treturn s^=(a+b*lastans)%c;\n\t}\n};\n```\n其中，`s`，`a`，`b`，`c` 的初始值在第三行给出，满足 `s`，`a`，`b` 均在 $[0,10^9]$ 之间，`c` 在 $[1,10^9]$ 之间。`lastans` 表示上次询问的答案转化为 `unsigned long long` 类型后的值，第一次询问时值为 $0$。\n\n每次询问时，你可以通过下面的方式生成 $l$ 和 $r$：\n```cpp\nl=gen::rand()%n+1;\nr=gen::rand()%n+1;\nif(l>r) std::swap(l,r);\n```", "outputFormat": "一行一个整数，表示每次询问的答案转成 `unsigned long long` 类型后的异或和。", "hint": "- 对于 $30\\%$ 的数据，$1\\le q\\le10^5$，$type=0$。\n- 对于另外 $70\\%$ 的数据，$1\\le q\\le10^7$，$type=1$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$-10^9\\le a_i\\le10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[HNOI2016] 序列 加强版", "background": "本题是 [P3246](https://www.luogu.com.cn/problem/P3246) 的数据加强版，扩大了询问次数的范围，增加了强制在线，并加入了一组构造数据。\n\n本题的输入输出格式与原题略有不同。", "description": "给定长度为 $ n $ 的序列：$ a_1, a_2, \\cdots , a_n $，记为 $ a[1 \\colon n] $。类似地，$ a[l \\colon r] $（$ 1 \\leq l \\leq r \\leq N$）是指序列：$ a_{l}, a_{l+1}, \\cdots ,a_{r-1}, a_r $。若 $1\\leq l \\leq s \\leq t \\leq r \\leq n$，则称 $ a[s \\colon t] $是 $ a[l \\colon r] $ 的子序列。\n\n现在有 $ q $ 个询问，每个询问给定两个数 $ l $ 和 $ r $，$ 1 \\leq l \\leq r \\leq n $，求 $ a[l \\colon r] $ 的不同子序列的最小值之和。例如，给定序列\n $ 5, 2, 4, 1, 3 $，询问给定的两个数为 $ 1 $ 和 $ 3 $，那么 $ a[1 \\colon 3] $ 有 $ 6 $ 个子序列 $a[1 \\colon 1], a[2 \\colon 2], a[3 \\colon 3], a[1 \\colon 2],a[2 \\colon 3], a[1 \\colon 3] $，这 $6 $ 个子序列的最小值之和为 $5+2+4+2+2+2=17$。", "inputFormat": "第一行三个整数 $n$，$q$，$type$ 表示序列长度，询问数与输入方式。\n\n第二行 $n$ 个整数表示这个序列。\n\n若 $type=0$，接下来 $q$ 行，每行两个数 $l$，$r$，代表询问区间 $[l,r]$。\n\n若 $type=1$，则数据按照如下代码生成：\n```cpp\nnamespace gen{\n\ttypedef unsigned long long ull;\n\tull s,a,b,c,lastans=0;\n\tull rand(){\n\t\treturn s^=(a+b*lastans)%c;\n\t}\n};\n```\n其中，`s`，`a`，`b`，`c` 的初始值在第三行给出，满足 `s`，`a`，`b` 均在 $[0,10^9]$ 之间，`c` 在 $[1,10^9]$ 之间。`lastans` 表示上次询问的答案转化为 `unsigned long long` 类型后的值，第一次询问时值为 $0$。\n\n每次询问时，你可以通过下面的方式生成 $l$ 和 $r$：\n```cpp\nl=gen::rand()%n+1;\nr=gen::rand()%n+1;\nif(l>r) std::swap(l,r);\n```", "outputFormat": "一行一个整数，表示每次询问的答案转成 `unsigned long long` 类型后的异或和。", "hint": "- 对于 $30\\%$ 的数据，$1\\le q\\le10^5$，$type=0$。\n- 对于另外 $70\\%$ 的数据，$1\\le q\\le10^7$，$type=1$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le10^5$，$-10^9\\le a_i\\le10^9$。", "locale": "zh-CN"}}}
{"pid": "P6606", "type": "P", "difficulty": 3, "samples": [["5 5\n000000000003000001000003000001000002000002000000000002000003", "2000001\n2\n517560944\n-1"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["深度优先搜索 DFS", "Code+"], "title": "[Code+#7] 最小路径串", "background": "", "description": "$n$ 个点 $m$ 条边的无向图中，所有点用从 `0` 开始的 `6` 位数字串编号，即 `000000`、`000001`、`000002`、……直到 $n-1$ 对应的 $6$ 位数字串。保证 $n\\le 10^6$，所以 $6$ 位的编号不会溢出。\n\n对于除了 `000000` 以外的每个点，你需要找到一条从 `000000` 出发且不经过重复点的路径，使得路径上所有点的数字串顺次连接形成的串的字典序最小。比较两个不同的串的字典序的方法是：如果其中某个串是另一个的前缀，则较短的串字典序较小；否则，找出两个串从左往右扫描时遇到的首个不相等的位置，在这个位置上的数字较小的串字典序较小。\n\n由于输出路径过于麻烦，你不需要完整地输出路径，只需要将路径上所有点的数字串视作一个整数，输出这个数对 $998244353$ 取模的结果。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$。\n\n第二行输入一个长度为 $12m$ 的数字串，依次表示每条边。每条边用 $12$ 个数字表示，其中前 $6$ 个与后 $6$ 个数字分别表示这条边所连接的两个点的编号。\n\n注意，输入中可能会包含自环或重边。", "outputFormat": "输出 $n-1$ 行，依次输出除了点 `000000` 本身以外，点 `000000` 到每个点的字典序最小的路径，视为整数后对 $998244353$ 取模的结果。如果点 `000000` 不可到达某个点，则在对应的行改为输出 $-1$。", "hint": "### 样例解释\n\n- 从 `000000` 到 `000001` 所求的路径对应的串为 `000000000002000001`。\n- 从 `000000` 到 `000002` 所求的路径对应的串为 `000000000002`。\n- 从 `000000` 到 `000003` 所求的路径对应的串为 `000000000002000001000003`，对 $998244353$ 取模后为 $517560944$。\n- 从 `000000` 到 `000004` 不存在路径。\n\n### 子任务\n\n子任务 $1$（$11$ 分）\n- $1\\le n\\le 10^6, m = 0$。\n\n子任务 $2$（$55$ 分）\n- $1\\le n\\le 10, 0\\le m\\le20$。\n\n子任务 $3$（$34$ 分）\n- $1\\le n\\le 10^6, 0\\le m\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#7] 最小路径串", "background": "", "description": "$n$ 个点 $m$ 条边的无向图中，所有点用从 `0` 开始的 `6` 位数字串编号，即 `000000`、`000001`、`000002`、……直到 $n-1$ 对应的 $6$ 位数字串。保证 $n\\le 10^6$，所以 $6$ 位的编号不会溢出。\n\n对于除了 `000000` 以外的每个点，你需要找到一条从 `000000` 出发且不经过重复点的路径，使得路径上所有点的数字串顺次连接形成的串的字典序最小。比较两个不同的串的字典序的方法是：如果其中某个串是另一个的前缀，则较短的串字典序较小；否则，找出两个串从左往右扫描时遇到的首个不相等的位置，在这个位置上的数字较小的串字典序较小。\n\n由于输出路径过于麻烦，你不需要完整地输出路径，只需要将路径上所有点的数字串视作一个整数，输出这个数对 $998244353$ 取模的结果。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$。\n\n第二行输入一个长度为 $12m$ 的数字串，依次表示每条边。每条边用 $12$ 个数字表示，其中前 $6$ 个与后 $6$ 个数字分别表示这条边所连接的两个点的编号。\n\n注意，输入中可能会包含自环或重边。", "outputFormat": "输出 $n-1$ 行，依次输出除了点 `000000` 本身以外，点 `000000` 到每个点的字典序最小的路径，视为整数后对 $998244353$ 取模的结果。如果点 `000000` 不可到达某个点，则在对应的行改为输出 $-1$。", "hint": "### 样例解释\n\n- 从 `000000` 到 `000001` 所求的路径对应的串为 `000000000002000001`。\n- 从 `000000` 到 `000002` 所求的路径对应的串为 `000000000002`。\n- 从 `000000` 到 `000003` 所求的路径对应的串为 `000000000002000001000003`，对 $998244353$ 取模后为 $517560944$。\n- 从 `000000` 到 `000004` 不存在路径。\n\n### 子任务\n\n子任务 $1$（$11$ 分）\n- $1\\le n\\le 10^6, m = 0$。\n\n子任务 $2$（$55$ 分）\n- $1\\le n\\le 10, 0\\le m\\le20$。\n\n子任务 $3$（$34$ 分）\n- $1\\le n\\le 10^6, 0\\le m\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P6607", "type": "P", "difficulty": 2, "samples": [["3 6\n1 3 5\n1 1 0", "5 5 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["Code+"], "title": "[Code+#7] 蚂蚁", "background": "", "description": "在东西排布的两棵树之间悬挂着一条长为 $L$ 的细绳，有 $N$ 只蚂蚁在这条绳上。这些蚂蚁希望通过绳子爬到任何一棵树上，但这条绳太细了，导致两只蚂蚁不能并排爬行，也不能交错而过。\n\n它们想到了一个方法：每只蚂蚁都以每单位时间移动一个单位距离的速度不断向前爬，当迎面碰到另一只蚂蚁时，两只蚂蚁都将立即掉头并继续向前爬。现在，蚂蚁们想知道自己是否能爬下绳子，如果能，它们还希望知道自己爬下绳子所花的时间。为了方便，我们按初始时位置从东到西的顺序对蚂蚁从 $1$ 开始编号。", "inputFormat": "输入的第一行包含两个正整数 $N, L$，保证 $N\\le 10^5, L\\le 10^9$，且 $N<L$。\n\n输入的第二行包含 $N$ 个正整数，第 $i$ 个数 $p_i$ 表示第 $i$ 只蚂蚁到东侧树木的距离，保证 $p_i$ 随 $i$ 增大严格递增，且 $0<p_i<L$。\n\n输入的第三行包含 $N$ 个整数，第 $i$ 个数 $d_i$ 若为 $1$ 则表示第 $i$ 只蚂蚁一开始朝向西侧，为 $0$ 则表示朝向东侧。", "outputFormat": "输出仅一行，包含 $N$ 个数，第 $i$ 个数表示第 $i$ 只蚂蚁爬下绳子所花时间，四舍五入保留到整数。若第 $i$ 只蚂蚁无法爬下绳子，则输出的第 $i$ 个数为 $-1$。", "hint": "### 样例解释\n\n第三只蚂蚁在爬行 $1$ 个单位时间后遇见第二只蚂蚁并掉头，再爬行 $2$ 个单位时间到西侧树木；\n\n第二只蚂蚁在爬行 $1$ 个单位时间后遇见第三只蚂蚁并掉头，再爬行 $1$ 个单位时间后遇见第一只蚂蚁并掉头，再爬行 $3$ 个单位时间到西侧树木；\n\n第一只蚂蚁在爬行 $2$ 个单位时间后遇见第二只蚂蚁并掉头，再爬行 $3$ 个单位时间到东侧树木。\n\n### 子任务\n\n子任务 $1$（$17$ 分）\n- $1\\le N\\le 10, L\\le 10^5$。\n\n子任务 $2$（$19$ 分）\n- $1\\le N\\le 100, L\\le 10^9$。\n\n子任务 $3$（$27$ 分）\n- $1\\le N\\le 5000, L\\le 10^9$。\n\n子任务 $4$（$37$ 分）\n- $1\\le N\\le 10^5, L\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#7] 蚂蚁", "background": "", "description": "在东西排布的两棵树之间悬挂着一条长为 $L$ 的细绳，有 $N$ 只蚂蚁在这条绳上。这些蚂蚁希望通过绳子爬到任何一棵树上，但这条绳太细了，导致两只蚂蚁不能并排爬行，也不能交错而过。\n\n它们想到了一个方法：每只蚂蚁都以每单位时间移动一个单位距离的速度不断向前爬，当迎面碰到另一只蚂蚁时，两只蚂蚁都将立即掉头并继续向前爬。现在，蚂蚁们想知道自己是否能爬下绳子，如果能，它们还希望知道自己爬下绳子所花的时间。为了方便，我们按初始时位置从东到西的顺序对蚂蚁从 $1$ 开始编号。", "inputFormat": "输入的第一行包含两个正整数 $N, L$，保证 $N\\le 10^5, L\\le 10^9$，且 $N<L$。\n\n输入的第二行包含 $N$ 个正整数，第 $i$ 个数 $p_i$ 表示第 $i$ 只蚂蚁到东侧树木的距离，保证 $p_i$ 随 $i$ 增大严格递增，且 $0<p_i<L$。\n\n输入的第三行包含 $N$ 个整数，第 $i$ 个数 $d_i$ 若为 $1$ 则表示第 $i$ 只蚂蚁一开始朝向西侧，为 $0$ 则表示朝向东侧。", "outputFormat": "输出仅一行，包含 $N$ 个数，第 $i$ 个数表示第 $i$ 只蚂蚁爬下绳子所花时间，四舍五入保留到整数。若第 $i$ 只蚂蚁无法爬下绳子，则输出的第 $i$ 个数为 $-1$。", "hint": "### 样例解释\n\n第三只蚂蚁在爬行 $1$ 个单位时间后遇见第二只蚂蚁并掉头，再爬行 $2$ 个单位时间到西侧树木；\n\n第二只蚂蚁在爬行 $1$ 个单位时间后遇见第三只蚂蚁并掉头，再爬行 $1$ 个单位时间后遇见第一只蚂蚁并掉头，再爬行 $3$ 个单位时间到西侧树木；\n\n第一只蚂蚁在爬行 $2$ 个单位时间后遇见第二只蚂蚁并掉头，再爬行 $3$ 个单位时间到东侧树木。\n\n### 子任务\n\n子任务 $1$（$17$ 分）\n- $1\\le N\\le 10, L\\le 10^5$。\n\n子任务 $2$（$19$ 分）\n- $1\\le N\\le 100, L\\le 10^9$。\n\n子任务 $3$（$27$ 分）\n- $1\\le N\\le 5000, L\\le 10^9$。\n\n子任务 $4$（$37$ 分）\n- $1\\le N\\le 10^5, L\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P6608", "type": "P", "difficulty": 5, "samples": [["1", "2\n1 2"], ["5", "4\n1 2 2 4"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "Special Judge", "构造", "Code+"], "title": "[Code+#7] 神秘序列", "background": null, "description": "E.Space 做了一个梦。\n\n他梦到了一个神秘的序列，有人告诉他，这个序列和明天的考试有一些密切的关联。\n\n他决心要把这个序列记住。可醒来之后，E.Space 发现自己没有记住这个序列，甚至连序列的长度都不记得了。不过，他记得这个序列有一个神奇的性质。\n\n在梦中，E.Space 对它进行了一系列的操作。记这个序列为 $a_1, a_2, \\dots, a_n$，开始时它满足 $\\forall 1\\le i\\le n, a_i \\ge 0$，并且 $a_n \\neq 0$。\n\n之后，E.Space 在每次操作时选择一个满足 $a_i=i$ 的 $i$，将 $a_i$ 变为 $0$，并且将 $a_1, a_2, \\dots, a_{i-1}$ 分别变为原来的值加 $1$。\n\nE.Space 记得，在 $n+k$ 次操作之后，这个序列变成了全 $0$ 序列，即 $a_1=a_2=\\cdots =a_n= 0$。\n\nE.Space 知道可能有多个序列满足这个性质，但是他还是希望你告诉他一种可能的情况，因为，说不定所有满足这个性质的序列都可以在考试时派上用场呢。\n\n他的考试成绩就交给你了。", "inputFormat": "输入一行一个正整数 $k$。", "outputFormat": "如果你找到了满足 E.Space 描述的性质的序列，那么输出两行。\n\n第一行一个正整数 $n$。\n\n第二行 $n$ 个非负整数，$a_1, a_2, \\dots, a_n$，其中 $a_n \\neq 0$，表示这个神秘序列。\n\n如果存在多种可能的神秘序列，只需输出任意一种。如果不存在这样的神秘序列，输出一行 `Daydream!` 来告诉 E.Space 他在做白日梦。", "hint": "子任务 $1$（$10$ 分）：$k\\le 6$\n\n子任务 $2$（$25$ 分）：$k\\le 10^6$\n\n子任务 $3$（$30$ 分）：$k\\le 10^{11}$，如果有解则保证存在一个解满足 $\\forall 1\\le i< n, a_i \\neq i$\n\n子任务 $4$（$28$ 分）：$k\\le 10^{11}$\n\n子任务 $5$（$7$ 分）：$k\\le 10^{12}$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#7] 神秘序列", "background": null, "description": "E.Space 做了一个梦。\n\n他梦到了一个神秘的序列，有人告诉他，这个序列和明天的考试有一些密切的关联。\n\n他决心要把这个序列记住。可醒来之后，E.Space 发现自己没有记住这个序列，甚至连序列的长度都不记得了。不过，他记得这个序列有一个神奇的性质。\n\n在梦中，E.Space 对它进行了一系列的操作。记这个序列为 $a_1, a_2, \\dots, a_n$，开始时它满足 $\\forall 1\\le i\\le n, a_i \\ge 0$，并且 $a_n \\neq 0$。\n\n之后，E.Space 在每次操作时选择一个满足 $a_i=i$ 的 $i$，将 $a_i$ 变为 $0$，并且将 $a_1, a_2, \\dots, a_{i-1}$ 分别变为原来的值加 $1$。\n\nE.Space 记得，在 $n+k$ 次操作之后，这个序列变成了全 $0$ 序列，即 $a_1=a_2=\\cdots =a_n= 0$。\n\nE.Space 知道可能有多个序列满足这个性质，但是他还是希望你告诉他一种可能的情况，因为，说不定所有满足这个性质的序列都可以在考试时派上用场呢。\n\n他的考试成绩就交给你了。", "inputFormat": "输入一行一个正整数 $k$。", "outputFormat": "如果你找到了满足 E.Space 描述的性质的序列，那么输出两行。\n\n第一行一个正整数 $n$。\n\n第二行 $n$ 个非负整数，$a_1, a_2, \\dots, a_n$，其中 $a_n \\neq 0$，表示这个神秘序列。\n\n如果存在多种可能的神秘序列，只需输出任意一种。如果不存在这样的神秘序列，输出一行 `Daydream!` 来告诉 E.Space 他在做白日梦。", "hint": "子任务 $1$（$10$ 分）：$k\\le 6$\n\n子任务 $2$（$25$ 分）：$k\\le 10^6$\n\n子任务 $3$（$30$ 分）：$k\\le 10^{11}$，如果有解则保证存在一个解满足 $\\forall 1\\le i< n, a_i \\neq i$\n\n子任务 $4$（$28$ 分）：$k\\le 10^{11}$\n\n子任务 $5$（$7$ 分）：$k\\le 10^{12}$", "locale": "zh-CN"}}}
{"pid": "P6610", "type": "P", "difficulty": 7, "samples": [["1\n5 0", "9"]], "limits": {"time": [1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100, 1100], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Code+"], "title": "[Code+#7] 同余方程", "background": "", "description": "这就是一些朴素的二次同余方程:)\n\n------------------\n\n给出若干组正整数 $p$ 和 $x$，求方程 $a^2+b^2\\equiv x {\\pmod p}$ 关于 $a$ 和 $b$ **在模 $\\boldsymbol p$ 意义下**解的组数，其中 $p$ 是奇数，且不包含平方因子。", "inputFormat": "第一行包含一个正整数 $n$，表示询问个数。\n\n接下来 $n$ 行每包含两个用空格分隔的正整数 $p$ 和 $x$，保证 $0 \\le x \\le p - 1$，$p$ 是一个奇数，且对任意奇素数 $q\\mid p$，都有 $q^2 \\nmid p$。", "outputFormat": "输出包含 $n$ 行，第 $i$ 行包含一个正整数，表示第 $i$ 个方程解的组数。", "hint": "### 样例解释\n\n$9$ 组解分别为 $(a,b) = (0,0),(1,2),(1,3),(2,1),(2,4),(3,1),(3,4),(4,2),(4,3)$。\n\n### 子任务\n\n每个测试点的分值为 $5$ 分。\n\n**对于所有数据**，$n\\le 10^5$，$p\\le10^7$，且 $2\\nmid p$，$\\forall$ 奇素数 $q\\mid p，q^2\\nmid p$，$0\\le x\\le p-1$。\n\n| 测试点编号 | $n\\le$ | $p\\le$ | 附加性质     |\n| :--------: | :----: | :----: | :------------: |\n|    $1$     |  $5$   | $100$  | $p$ 为奇素数 |\n|    $2$     |  $10$  | $10^3$ | $p$ 为奇素数 |\n|    $3$     |  $10$  | $10^3$ |              |\n|    $4$     |  $50$  | $10^4$ | $p$ 为奇素数 |\n|    $5$     | $100$  | $10^4$ | $p$ 为奇素数 |\n|    $6$     |  $50$  | $10^4$ |              |\n|    $7$     | $100$  | $10^4$ |              |\n|    $8$     | $100$  | $10^4$ |              |\n|    $9$     | $10^3$ | $10^6$ | $p$ 为奇素数 |\n|    $10$    | $10^3$ | $10^6$ |              |\n|    $11$    | $10^3$ | $10^6$ |              |\n|    $12$    | $10^5$ | $10^6$ | $p$ 为奇素数 |\n|    $13$    | $10^5$ | $10^6$ |              |\n|    $14$    | $10^5$ | $10^6$ |              |\n|    $15$    | $10^5$ | $10^6$ |              |\n|    $16$    | $10^5$ | $10^6$ |              |\n|    $17$    | $10^5$ | $10^7$ |              |\n|    $18$    | $10^5$ | $10^7$ |              |\n|    $19$    | $10^5$ | $10^7$ |              |\n|    $20$    | $10^5$ | $10^7$ |              |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#7] 同余方程", "background": "", "description": "这就是一些朴素的二次同余方程:)\n\n------------------\n\n给出若干组正整数 $p$ 和 $x$，求方程 $a^2+b^2\\equiv x {\\pmod p}$ 关于 $a$ 和 $b$ **在模 $\\boldsymbol p$ 意义下**解的组数，其中 $p$ 是奇数，且不包含平方因子。", "inputFormat": "第一行包含一个正整数 $n$，表示询问个数。\n\n接下来 $n$ 行每包含两个用空格分隔的正整数 $p$ 和 $x$，保证 $0 \\le x \\le p - 1$，$p$ 是一个奇数，且对任意奇素数 $q\\mid p$，都有 $q^2 \\nmid p$。", "outputFormat": "输出包含 $n$ 行，第 $i$ 行包含一个正整数，表示第 $i$ 个方程解的组数。", "hint": "### 样例解释\n\n$9$ 组解分别为 $(a,b) = (0,0),(1,2),(1,3),(2,1),(2,4),(3,1),(3,4),(4,2),(4,3)$。\n\n### 子任务\n\n每个测试点的分值为 $5$ 分。\n\n**对于所有数据**，$n\\le 10^5$，$p\\le10^7$，且 $2\\nmid p$，$\\forall$ 奇素数 $q\\mid p，q^2\\nmid p$，$0\\le x\\le p-1$。\n\n| 测试点编号 | $n\\le$ | $p\\le$ | 附加性质     |\n| :--------: | :----: | :----: | :------------: |\n|    $1$     |  $5$   | $100$  | $p$ 为奇素数 |\n|    $2$     |  $10$  | $10^3$ | $p$ 为奇素数 |\n|    $3$     |  $10$  | $10^3$ |              |\n|    $4$     |  $50$  | $10^4$ | $p$ 为奇素数 |\n|    $5$     | $100$  | $10^4$ | $p$ 为奇素数 |\n|    $6$     |  $50$  | $10^4$ |              |\n|    $7$     | $100$  | $10^4$ |              |\n|    $8$     | $100$  | $10^4$ |              |\n|    $9$     | $10^3$ | $10^6$ | $p$ 为奇素数 |\n|    $10$    | $10^3$ | $10^6$ |              |\n|    $11$    | $10^3$ | $10^6$ |              |\n|    $12$    | $10^5$ | $10^6$ | $p$ 为奇素数 |\n|    $13$    | $10^5$ | $10^6$ |              |\n|    $14$    | $10^5$ | $10^6$ |              |\n|    $15$    | $10^5$ | $10^6$ |              |\n|    $16$    | $10^5$ | $10^6$ |              |\n|    $17$    | $10^5$ | $10^7$ |              |\n|    $18$    | $10^5$ | $10^7$ |              |\n|    $19$    | $10^5$ | $10^7$ |              |\n|    $20$    | $10^5$ | $10^7$ |              |", "locale": "zh-CN"}}}
{"pid": "P6611", "type": "P", "difficulty": 7, "samples": [["6\n1 2 5 4 3 6\n4\n1 8\n3 6\n5 10\n2 7", "3\n0\n1\n1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Code+"], "title": "[Code+#7] 六元环", "background": "", "description": "qwqwq。\n\n------------\n\n给定序列 $a_0, a_1, \\dots, a_n, a_{n+1}$；满足 $a_0 = a_{n+1} = +\\infty$，$a_1, a_2, \\dots, a_n$ 在输入中给出；\n\n对 $1\\le x\\le n$，称 $\\max_{0\\le i<x, a_i\\ge a_x} i$ 和 $x$ 是相邻的，且 $\\min_{x< i\\le n+1, a_i>a_x} i$ 和 $x$ 是**相邻**的；如果 $x$ 和 $y$ 相邻，则 $y$ 和 $x$ 也相邻；\n\n如果 $0 \\le b_1, b_2, b_3, b_4, b_5, b_6\\le n+1$，且 $b_i$ 和 $b_{i+1}$ 相邻，$b_1$ 和 $b_6$ 相邻，$b_i$ 互不相同，则称集合 $\\{b_1,b_2,b_3,b_4,b_5,b_6\\}$ 是一个六元环（即判断两个六元环是否相同时，不考虑 $b_i$ 的顺序）。\n\n共有 $m$ 次修改操作，每次修改操作给出 $x\\ y$，将 $a_x$ 改为 $a_x + y$；每次修改后要求输出六元环的个数；\n\n以上提到的所有数值为整数，且 $1\\le n, m\\le 5\\times 10^5, 1\\le x\\le n,1\\le a_i, y\\le 10^9$。", "inputFormat": "第一行一个整数 $n$；\n\n第二行 $n$ 个整数表示 $a_1, a_2, \\dots, a_n$；\n\n第三行一个整数 $m$；接下来 $m$ 行，每行两个整数 $x\\ y$ 表示一次修改操作。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次修改后的六元环个数。", "hint": "| 子任务 | 分数 |              限制              |\n| :----: | :--: | :----------------------------: |\n|  $1$   | $10$ |      $\\max (n,m)\\le 100$       |\n|  $2$   | $10$ |      $\\max (n,m)\\le 2000$      |\n|  $3$   | $20$ |     $\\max (n,m)\\le 50000$      |\n|  $4$   | $20$ | for each operation, $x\\le 100$ |\n|  $5$   | $20$ | for each operation, $y\\le 10$  |\n|  $6$   | $20$ |                                |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Code+#7] 六元环", "background": "", "description": "qwqwq。\n\n------------\n\n给定序列 $a_0, a_1, \\dots, a_n, a_{n+1}$；满足 $a_0 = a_{n+1} = +\\infty$，$a_1, a_2, \\dots, a_n$ 在输入中给出；\n\n对 $1\\le x\\le n$，称 $\\max_{0\\le i<x, a_i\\ge a_x} i$ 和 $x$ 是相邻的，且 $\\min_{x< i\\le n+1, a_i>a_x} i$ 和 $x$ 是**相邻**的；如果 $x$ 和 $y$ 相邻，则 $y$ 和 $x$ 也相邻；\n\n如果 $0 \\le b_1, b_2, b_3, b_4, b_5, b_6\\le n+1$，且 $b_i$ 和 $b_{i+1}$ 相邻，$b_1$ 和 $b_6$ 相邻，$b_i$ 互不相同，则称集合 $\\{b_1,b_2,b_3,b_4,b_5,b_6\\}$ 是一个六元环（即判断两个六元环是否相同时，不考虑 $b_i$ 的顺序）。\n\n共有 $m$ 次修改操作，每次修改操作给出 $x\\ y$，将 $a_x$ 改为 $a_x + y$；每次修改后要求输出六元环的个数；\n\n以上提到的所有数值为整数，且 $1\\le n, m\\le 5\\times 10^5, 1\\le x\\le n,1\\le a_i, y\\le 10^9$。", "inputFormat": "第一行一个整数 $n$；\n\n第二行 $n$ 个整数表示 $a_1, a_2, \\dots, a_n$；\n\n第三行一个整数 $m$；接下来 $m$ 行，每行两个整数 $x\\ y$ 表示一次修改操作。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次修改后的六元环个数。", "hint": "| 子任务 | 分数 |              限制              |\n| :----: | :--: | :----------------------------: |\n|  $1$   | $10$ |      $\\max (n,m)\\le 100$       |\n|  $2$   | $10$ |      $\\max (n,m)\\le 2000$      |\n|  $3$   | $20$ |     $\\max (n,m)\\le 50000$      |\n|  $4$   | $20$ | for each operation, $x\\le 100$ |\n|  $5$   | $20$ | for each operation, $y\\le 10$  |\n|  $6$   | $20$ |                                |", "locale": "zh-CN"}}}
{"pid": "P6612", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2012", "POI（波兰）", "交互题", "Special Judge", "O2优化"], "title": "[POI 2012] LIC-Bidding", "background": "**本题为交互题**。\n\n**本题 checker 中含有正解, 故不下发**。", "description": "A 和 B 两个人在玩一个游戏，这个游戏是他们轮流操作一对整数 $(x,y)$。\n\n初始时 $(x,y)=(1,0)$，可以进行三种操作：\n\n1. 将 $(x,y)$ 变成 $(1,x+y)$。\n2. 将 $(x,y)$ 变成 $(2x,y)$。\n3. 将 $(x,y)$ 变成 $(3x,y)$。\n\n给定正整数 $n$。在 $x+y\\ge n$ 时就不能进行后两种操作。如果某个人操作后 $y\\ge n$，他就输掉了。\n\n保证给出的 $n$ 为先手必胜的，你需要提供一种先手必胜的方案。例如 $n = 3$ 时，先手选择操作 3，后手只能选择操作 1 然后输，所以 $n = 3$ 时先手必胜。\n\n**交互题**，你需要实现一个函数 ``extern \"C\" int _opt(int n, int x, int y)``，该函数的返回值是一个值为 $1$，$2$ 或 $3$ 的整数，表示现在数对是 $(x, y)$，参数是 $n$ 且轮到你操作时，你会选择的操作。", "inputFormat": "", "outputFormat": "", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n\\leq 30000$。\n\n### 说明\n\n样例交互库见附件。与选手程序在本地一起编译后可以通过标准输入来模拟 spj 与选手程序进行交互。  \n当交互库输出 `-2 -2` 并退出时，说明选手程序正确。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2012] LIC-Bidding", "background": "**本题为交互题**。\n\n**本题 checker 中含有正解, 故不下发**。", "description": "A 和 B 两个人在玩一个游戏，这个游戏是他们轮流操作一对整数 $(x,y)$。\n\n初始时 $(x,y)=(1,0)$，可以进行三种操作：\n\n1. 将 $(x,y)$ 变成 $(1,x+y)$。\n2. 将 $(x,y)$ 变成 $(2x,y)$。\n3. 将 $(x,y)$ 变成 $(3x,y)$。\n\n给定正整数 $n$。在 $x+y\\ge n$ 时就不能进行后两种操作。如果某个人操作后 $y\\ge n$，他就输掉了。\n\n保证给出的 $n$ 为先手必胜的，你需要提供一种先手必胜的方案。例如 $n = 3$ 时，先手选择操作 3，后手只能选择操作 1 然后输，所以 $n = 3$ 时先手必胜。\n\n**交互题**，你需要实现一个函数 ``extern \"C\" int _opt(int n, int x, int y)``，该函数的返回值是一个值为 $1$，$2$ 或 $3$ 的整数，表示现在数对是 $(x, y)$，参数是 $n$ 且轮到你操作时，你会选择的操作。", "inputFormat": "", "outputFormat": "", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n\\leq 30000$。\n\n### 说明\n\n样例交互库见附件。与选手程序在本地一起编译后可以通过标准输入来模拟 spj 与选手程序进行交互。  \n当交互库输出 `-2 -2` 并退出时，说明选手程序正确。", "locale": "zh-CN"}}}
{"pid": "P6613", "type": "P", "difficulty": 7, "samples": [["9\n2 9 8 7 3 6 5 4 1 12\n23 9 8 7 4 6 1 3 2 5 ", "1 25 34 332748429 124783260 22560 624092696 904826719 284383572 50973515"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "O2优化", "微积分", "导数", "快速傅里叶变换 FFT"], "title": "一阶微分方程", "background": "题目中 $F'(x)$ 右侧的式子可以换成其它的，这里为了方便测试，是固定的。 ", "description": "已知多项式 $F(x),A(x),B(x)$，满足：\n\n$$\\frac{\\text dF(x)}{\\text dx} \\equiv A(x)\\text e^{F(x)-1}+B(x) \\pmod{x^n}$$\n且 $F(0)=1$。\n\n给定 $A(x),B(x)$，请求出 $F(x)$ 的前 $n$ 次项系数。\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $n$，表示 $A(x),B(x)$ 的次数。  \n第二行 $n+1$ 个整数，由低到高表示 $A(x)$ 的系数。  \n第三行 $n+1$ 个整数，由低到高表示 $B(x)$ 的系数。", "outputFormat": "输出一行 $n+1$ 个整数，由低到高表示 $F(x)$ 的系数。", "hint": "### 数据规模与约定\n对于 $30\\%$ 的数据，$1\\le n \\le 5000$；  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$。\n\n保证所有输入都在 $[0,998244353)$ 范围内。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "一阶微分方程", "background": "题目中 $F'(x)$ 右侧的式子可以换成其它的，这里为了方便测试，是固定的。 ", "description": "已知多项式 $F(x),A(x),B(x)$，满足：\n\n$$\\frac{\\text dF(x)}{\\text dx} \\equiv A(x)\\text e^{F(x)-1}+B(x) \\pmod{x^n}$$\n且 $F(0)=1$。\n\n给定 $A(x),B(x)$，请求出 $F(x)$ 的前 $n$ 次项系数。\n\n答案对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $n$，表示 $A(x),B(x)$ 的次数。  \n第二行 $n+1$ 个整数，由低到高表示 $A(x)$ 的系数。  \n第三行 $n+1$ 个整数，由低到高表示 $B(x)$ 的系数。", "outputFormat": "输出一行 $n+1$ 个整数，由低到高表示 $F(x)$ 的系数。", "hint": "### 数据规模与约定\n对于 $30\\%$ 的数据，$1\\le n \\le 5000$；  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$。\n\n保证所有输入都在 $[0,998244353)$ 范围内。\n", "locale": "zh-CN"}}}
{"pid": "P6614", "type": "P", "difficulty": 3, "samples": [["2 1 1\n0 1\n1 0", "1 0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge"], "title": "蛋糕 Cake", "background": ">   道不同不相为谋。\n\n$\\text{.cilohocohc}$ 喜欢吃蛋糕，尤其是巧克力蛋糕。\n\n$\\text{LeverImmy}$ 送了一个超级大的巧克力蛋糕给她做生日礼物，蛋糕上面点缀着许多巧克力布丁。\n\n$\\text{.cilohocohc}$ 一个人肯定是吃不完那么大一个蛋糕的，于是她要 $\\text{LeverImmy}$ 帮她蛋糕切成两块，使得两块蛋糕上的布丁数之比为 $a : b$。\n\n蛋糕可以抽象为一个二维平面；而做蛋糕的作坊很缺心眼，因此每个布丁都很小，可以看成二维平面上的一个 **整点**。\n\n$\\text{LeverImmy}$ 的刀技非常高超，所以他准备秀一下，他只会以一个 **斜率不小于 $1$ ，不大于 $10^{12}$ 的一次函数图像** 为轮廓在蛋糕上划一刀。\n\n他想考考聪明的你，如果是你，你会怎么划？\n", "description": "已知 $n$ 以及 $a, b$，求一个一次函数 $f(x) = k(x - x_0) + y_0 (1 \\le k \\le 10^{12})$，使得 $f(x)$ 将平面内的 $n$ 个点恰好分为个数之比 $a : b$ 的两部分。\n\n如果你不知道一次函数为什么要这样表示，这里有 [点斜式](https://baike.baidu.com/item/%E7%82%B9%E6%96%9C%E5%BC%8F/921468?fr=aladdin) 的定义。\n", "inputFormat": "第一行三个整数 $n, a, b$，表示点的个数以及你要分成两部分的比例。\n\n接下来的 $n$ 行，第 $i$ 行两个整数 $x_i, y_i$ 表示平面上的点 $(x_i, y_i)$。\n\n数据保证 **任意两个点不重合**。\n", "outputFormat": "输出数据共一行三个整数，分别表示题目中的 $k, x_0, y_0$。\n\n请务必保证 $1 \\le k \\le 10^{12}, -10^5 \\le x_0, y_0 \\le 10^{5}$。\n\n如果有点 **恰好** 落在你给的直线上，我们视作其位于直线 **上方**。\n", "hint": "本题采用 **捆绑测试**。\n\n$\\text{Subtask 1 (10 pts)}:$ 保证 $n \\in \\{2, 3\\}$；\n\n$\\text{Subtask 2 (30 pts)}:$ 保证 $\\left|x_i\\right|, \\left|y_i\\right| \\le 10$；\n\n$\\text{Subtask 3 (60 pts)}:$ 保证 $2 \\le n \\le 10^5$，$0 \\le \\left|x_i\\right|, \\left|y_i\\right| \\le 10^5$。\n\n对于所有数据，保证 $(a + b) | n$ 且 $ab \\neq 0$。\n\n---\n\n#### Special Judge\n\n**本题采用 $\\text{Special Judge}$。**\n\nspj 返回信息一览：\n\n`Your answer is correct!`：你的结果是正确的；\n\n`Your answer is wrong, expected ratio as a : b, found A : B.`：你的函数有问题，它把所有的点分割成了 $A : B$ 的两部分而不是 $a : b$ 的两部分；\n\n`Oops, data out of range!`：你所给出的点的横纵坐标，或是斜率，在题目要求的范围外。\n\n注意，你在 **赛时** 并不能看到 Special Judge 的返回结果。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "蛋糕 Cake", "background": ">   道不同不相为谋。\n\n$\\text{.cilohocohc}$ 喜欢吃蛋糕，尤其是巧克力蛋糕。\n\n$\\text{LeverImmy}$ 送了一个超级大的巧克力蛋糕给她做生日礼物，蛋糕上面点缀着许多巧克力布丁。\n\n$\\text{.cilohocohc}$ 一个人肯定是吃不完那么大一个蛋糕的，于是她要 $\\text{LeverImmy}$ 帮她蛋糕切成两块，使得两块蛋糕上的布丁数之比为 $a : b$。\n\n蛋糕可以抽象为一个二维平面；而做蛋糕的作坊很缺心眼，因此每个布丁都很小，可以看成二维平面上的一个 **整点**。\n\n$\\text{LeverImmy}$ 的刀技非常高超，所以他准备秀一下，他只会以一个 **斜率不小于 $1$ ，不大于 $10^{12}$ 的一次函数图像** 为轮廓在蛋糕上划一刀。\n\n他想考考聪明的你，如果是你，你会怎么划？\n", "description": "已知 $n$ 以及 $a, b$，求一个一次函数 $f(x) = k(x - x_0) + y_0 (1 \\le k \\le 10^{12})$，使得 $f(x)$ 将平面内的 $n$ 个点恰好分为个数之比 $a : b$ 的两部分。\n\n如果你不知道一次函数为什么要这样表示，这里有 [点斜式](https://baike.baidu.com/item/%E7%82%B9%E6%96%9C%E5%BC%8F/921468?fr=aladdin) 的定义。\n", "inputFormat": "第一行三个整数 $n, a, b$，表示点的个数以及你要分成两部分的比例。\n\n接下来的 $n$ 行，第 $i$ 行两个整数 $x_i, y_i$ 表示平面上的点 $(x_i, y_i)$。\n\n数据保证 **任意两个点不重合**。\n", "outputFormat": "输出数据共一行三个整数，分别表示题目中的 $k, x_0, y_0$。\n\n请务必保证 $1 \\le k \\le 10^{12}, -10^5 \\le x_0, y_0 \\le 10^{5}$。\n\n如果有点 **恰好** 落在你给的直线上，我们视作其位于直线 **上方**。\n", "hint": "本题采用 **捆绑测试**。\n\n$\\text{Subtask 1 (10 pts)}:$ 保证 $n \\in \\{2, 3\\}$；\n\n$\\text{Subtask 2 (30 pts)}:$ 保证 $\\left|x_i\\right|, \\left|y_i\\right| \\le 10$；\n\n$\\text{Subtask 3 (60 pts)}:$ 保证 $2 \\le n \\le 10^5$，$0 \\le \\left|x_i\\right|, \\left|y_i\\right| \\le 10^5$。\n\n对于所有数据，保证 $(a + b) | n$ 且 $ab \\neq 0$。\n\n---\n\n#### Special Judge\n\n**本题采用 $\\text{Special Judge}$。**\n\nspj 返回信息一览：\n\n`Your answer is correct!`：你的结果是正确的；\n\n`Your answer is wrong, expected ratio as a : b, found A : B.`：你的函数有问题，它把所有的点分割成了 $A : B$ 的两部分而不是 $a : b$ 的两部分；\n\n`Oops, data out of range!`：你所给出的点的横纵坐标，或是斜率，在题目要求的范围外。\n\n注意，你在 **赛时** 并不能看到 Special Judge 的返回结果。\n", "locale": "zh-CN"}}}
{"pid": "P6615", "type": "P", "difficulty": 5, "samples": [["6\n1 4 2 8 5 7\n1 2 3\n4 1 2\n1 5 1\n2 3 4\n3 6 1", "198"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": [], "title": "草莓 Strawberry", "background": "小 M 很喜欢草莓。\n\n草莓可以抽象为一棵树 $T$。我也不知道为什么可以，但草莓甚至可以飞，抽象成一棵树想必问题也不大吧。", "description": "给定一棵树 $T$，点和边均有权值。\n\n一条简单路径是一条不重复经过任意一个点的路径。可以证明，两个节点 $u$ 和 $v$ 之间的简单路径是唯一的，我们将其记为 $P(u,v)$。一条路径的长度是它所包含的所有边的权值和。\n\n你有两个集合 $S$ 和 $G$。\n\n在一开始，你必须选择一个点作为 **当前点** 并且将其加入集合 $S$。接下来可以进行任意次操作，一次操作的形式如下：\n\n假设你的 **当前点** 为 $u$，你可以选择一个节点 $v$，使得 $v \\neq u$，然后将你的 **当前点** 更新为 $v$，并且将点 $v$ 加入集合 $S$，将路径 $P(u,v)$ 加入集合 $G$。\n\n在你进行完所有操作之后，你得到的收益为 $S$ 中所有点的点权和 $\\times$ $G$ 中所有路径的长度的最小值。如果 $G$ 为空，我们认为第二项的值为 $0$。\n\n注意 $S$ 和 $G$ 都是 **不可重集**，这意味着，即使你多次将某个点加入集合 $S$，最终在计算点权时，也只会被计算一次。\n\n求得到的收益的最大值。", "inputFormat": "第一行一个整数 $n$。 \n\n接下来一行 $n$ 个整数 $a_1,a_2 \\ldots a_n$，表示这 $n$ 个节点的点权。\n\n接下来 $n - 1$ 行，每行三个整数 $u,v,w$，表示 $u$ 到 $v$ 有一条权值为 $w$ 的边。", "outputFormat": "输出一个整数，所求最大收益。", "hint": "本题采用 **捆绑测试**。\n\n| 子任务编号 |      $n$      |     特殊性质     | 分值 |\n| :--------: | :-----------: | :--------------: | :--: |\n|     1      |   $\\leq 10$   |                  |  5   |\n|     2      |  $\\leq 100$   |                  |  13  |\n|     3      |  $\\leq 900$   |                  |  8   |\n|     4      | $\\leq 214748$ | 树的形态是一条链 |  13  |\n|     5      | $\\leq 214748$ |     $a_i=0$      |  1   |\n|     6      | $\\leq 214748$ |                  |  60  |\n\n\n对于所有数据，保证 $1 \\leq n \\leq 214748, 0 \\leq a_i \\leq 10000$，$1 \\leq w \\leq 10000$。\n\n---\n\n#### 样例 #1 解释\n\n第一组样例给定的图如下。  \n\n[![EWyWjg.png](https://s2.ax1x.com/2019/05/11/EWyWjg.png)](https://imgchr.com/i/EWyWjg)  \n", "locale": "zh-CN", "translations": {"en": {"title": "Strawberry Strawberry", "background": "Little M likes strawberries very much.\n\nA strawberry can be abstracted as a tree $T$. I do not know why it works, but strawberries can even fly, so it should not be a big problem to abstract them as a tree.", "description": "Given a tree $T$, both vertices and edges have weights.\n\nA simple path is a path that does not pass through any vertex more than once. It can be proved that the simple path between two nodes $u$ and $v$ is unique; we denote it by $P(u,v)$. The length of a path is the sum of the weights of all edges on it.\n\nYou have two sets $S$ and $G$.\n\nAt the beginning, you must choose one node as the **current node** and add it to the set $S$. Then you may perform any number of operations. One operation is as follows:\n\nSuppose your **current node** is $u$. You may choose a node $v$ such that $v \\neq u$, then update your **current node** to $v$, add node $v$ to the set $S$, and add the path $P(u,v)$ to the set $G$.\n\nAfter you finish all operations, the profit you get is:\nthe minimum of (the sum of vertex weights of all nodes in $S$) $\\times$ (the sum of lengths of all paths in $G$).\nIf $G$ is empty, we consider the value of the second term to be $0$.\n\nNote that both $S$ and $G$ are **sets, not multisets**. This means that even if you add the same node to $S$ multiple times, it is counted only once when computing the vertex-weight sum.\n\nFind the maximum possible profit.", "inputFormat": "The first line contains an integer $n$.\n\nThe next line contains $n$ integers $a_1,a_2 \\ldots a_n$, representing the vertex weights of these $n$ nodes.\n\nThe next $n - 1$ lines each contain three integers $u,v,w$, indicating that there is an edge of weight $w$ between $u$ and $v$.", "outputFormat": "Output one integer, the maximum profit.", "hint": "This problem uses **bundled testdata**.\n\n| Subtask ID |      $n$      | Special Property | Score |\n| :--------: | :-----------: | :--------------: | :---: |\n|     1      |   $\\leq 10$   |                  |   5   |\n|     2      |  $\\leq 100$   |                  |  13   |\n|     3      |  $\\leq 900$   |                  |   8   |\n|     4      | $\\leq 214748$ | The tree is a chain. |  13  |\n|     5      | $\\leq 214748$ |     $a_i=0$      |   1   |\n|     6      | $\\leq 214748$ |                  |  60   |\n\nFor all data, it is guaranteed that $1 \\leq n \\leq 214748$, $0 \\leq a_i \\leq 10000$, and $1 \\leq w \\leq 10000$.\n\n---\n\n#### Sample #1 Explanation\n\nThe graph given in the first sample is as follows.\n\n[![EWyWjg.png](https://s2.ax1x.com/2019/05/11/EWyWjg.png)](https://imgchr.com/i/EWyWjg)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "草莓 Strawberry", "background": "小 M 很喜欢草莓。\n\n草莓可以抽象为一棵树 $T$。我也不知道为什么可以，但草莓甚至可以飞，抽象成一棵树想必问题也不大吧。", "description": "给定一棵树 $T$，点和边均有权值。\n\n一条简单路径是一条不重复经过任意一个点的路径。可以证明，两个节点 $u$ 和 $v$ 之间的简单路径是唯一的，我们将其记为 $P(u,v)$。一条路径的长度是它所包含的所有边的权值和。\n\n你有两个集合 $S$ 和 $G$。\n\n在一开始，你必须选择一个点作为 **当前点** 并且将其加入集合 $S$。接下来可以进行任意次操作，一次操作的形式如下：\n\n假设你的 **当前点** 为 $u$，你可以选择一个节点 $v$，使得 $v \\neq u$，然后将你的 **当前点** 更新为 $v$，并且将点 $v$ 加入集合 $S$，将路径 $P(u,v)$ 加入集合 $G$。\n\n在你进行完所有操作之后，你得到的收益为 $S$ 中所有点的点权和 $\\times$ $G$ 中所有路径的长度的最小值。如果 $G$ 为空，我们认为第二项的值为 $0$。\n\n注意 $S$ 和 $G$ 都是 **不可重集**，这意味着，即使你多次将某个点加入集合 $S$，最终在计算点权时，也只会被计算一次。\n\n求得到的收益的最大值。", "inputFormat": "第一行一个整数 $n$。 \n\n接下来一行 $n$ 个整数 $a_1,a_2 \\ldots a_n$，表示这 $n$ 个节点的点权。\n\n接下来 $n - 1$ 行，每行三个整数 $u,v,w$，表示 $u$ 到 $v$ 有一条权值为 $w$ 的边。", "outputFormat": "输出一个整数，所求最大收益。", "hint": "本题采用 **捆绑测试**。\n\n| 子任务编号 |      $n$      |     特殊性质     | 分值 |\n| :--------: | :-----------: | :--------------: | :--: |\n|     1      |   $\\leq 10$   |                  |  5   |\n|     2      |  $\\leq 100$   |                  |  13  |\n|     3      |  $\\leq 900$   |                  |  8   |\n|     4      | $\\leq 214748$ | 树的形态是一条链 |  13  |\n|     5      | $\\leq 214748$ |     $a_i=0$      |  1   |\n|     6      | $\\leq 214748$ |                  |  60  |\n\n\n对于所有数据，保证 $1 \\leq n \\leq 214748, 0 \\leq a_i \\leq 10000$，$1 \\leq w \\leq 10000$。\n\n---\n\n#### 样例 #1 解释\n\n第一组样例给定的图如下。  \n\n[![EWyWjg.png](https://s2.ax1x.com/2019/05/11/EWyWjg.png)](https://imgchr.com/i/EWyWjg)  \n", "locale": "zh-CN"}}}
{"pid": "P6616", "type": "P", "difficulty": 6, "samples": [["4\n3\n1 1\n1 0\n2 1\n", "7"], ["15\n4\n5 1\n2 1\n4 0\n4 1\n", "15424"], ["3\n3\n1 1\n1 0\n1 1", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "环 Rings", "background": "> 一九二九不出手，三九四九冰上走，五九六九隔河看杨柳；\n>\n> 七九河开，八九雁来，九九加一九，耕牛遍地走。\n\n「九」自古以来就是一个奇妙的数字，而你今天要解决的问题，也与「九」有关。", "description": "你有一个 $n$ 连环，和你熟知的九连环有着相同的结构。\n\n![这是一个九连环](https://cdn.luogu.com.cn/upload/image_hosting/x68krf0v.png)\n\n> 上图是一个九连环。\n\n顾名思义，$n$ 连环有一个长长的横梁，上面挂着 $n$ 个 **彼此影响** 的环。\n\n我们给这 $n$ 个环编号，其中最靠横梁头部的环为第 $1$ 个环，其次为第 $2$ 个环，以此类推……最靠横梁尾部的环为第 $n$ 个环；\n\n定义 $f_i$ 表示第 $i$ 个环的状态，其中 $f_i = 1$ 表示这个环在横梁上，$f_i = 0$ 表示这个环不在横梁上；\n\n定义 **拆装一个环** 为使环的状态 **取反**，即状态从 $1$ 变成 $0$ 或从 $0$ 变成 $1$。\n\n这些环的合法拆装规则如下：\n\n1. 第 $1$ 个环随时可以单独拆装；\n2. 第 $k+1$ 个环可以单独拆装，当且仅当 $f_k=1$ 且 $\\forall i < k$，都有 $f_i = 0$；\n3. 若 $f_1 = f_2$，则第 $1,2$ 两个环可以一起拆装。\n\n现在你需要解决的问题是：已知一个 $n$ 连环的初始状态，请你求出拆除这个 $n$ 连环的最少拆装步数。", "inputFormat": "本题数据量较大，故采取 **特殊** 输入方式。\n\n第一行一个正整数 $n$。\n\n第二行一个正整数 $m$；\n\n接下来 $m$ 行输入描述了初始状态：\n\n第 $i + 2$ 行有两个整数 $len_{i}, st_{i}$，表示往初始的 $n$ 连环的尾部连续添加 $len_{i}$ 个状态为 $st_{i}$ 的环。", "outputFormat": "一行共一个整数，表示从拆下这个 $n$ 连环所需要的最少拆装次数。\n\n由于答案可能很大，你只需要输出答案对 $1201201201$ 取模后的结果。", "hint": "本题采用 **捆绑测试**，开启 **O2优化**。\n\n$\\text{Subtask 1 (10 pts)}:$ 保证 $1 \\le n \\le 20$；\n\n$\\text{Subtask 2 (15 pts)}:$ 保证 $1 \\le n\\le 1000$；\n\n$\\text{Subtask 3 (15 pts)}:$ 保证初始状态中 **只有** $1$ 个 $1$；\n\n$\\text{Subtask 4 (30 pts)}:$ 保证 $1 \\le n \\le 10^7$；\n\n$\\text{Subtask 5 (30 pts)}:$ 没有特殊限制。\n\n对于所有数据，满足 $1 \\le n \\le 10^{18}$，$1 \\le m \\le 10^5$，$st_{i} \\in \\{0, 1\\}$，$len_{i} \\ge 1$\n\n数据保证 $\\sum\\limits_{i=1}^m len_{i} = n$。\n\n---\n\n#### 样例 #1 解释\n\n样例描述的是 $4$ 连环，初始状态为 `1101`。\n\n用最少合法拆装次数完成的方法如下：\n\n```plain\n1. 1101 -> 1100\n2. 1100 -> 0100\n3. 0100 -> 0111\n4. 0111 -> 0110\n5. 0110 -> 0010\n6. 0010 -> 0011\n7. 0011 -> 0000\n```\n\n共 $7$ 步。\n\n---\n\n#### 题外话\n\n本题中 $n$ 连环的第 $3$ 条拆装规则，在大部分的九连环玩法说明中都没有提到，但它确实是一个真实可行的操作呢！", "locale": "zh-CN", "translations": {"zh-CN": {"title": "环 Rings", "background": "> 一九二九不出手，三九四九冰上走，五九六九隔河看杨柳；\n>\n> 七九河开，八九雁来，九九加一九，耕牛遍地走。\n\n「九」自古以来就是一个奇妙的数字，而你今天要解决的问题，也与「九」有关。", "description": "你有一个 $n$ 连环，和你熟知的九连环有着相同的结构。\n\n![这是一个九连环](https://cdn.luogu.com.cn/upload/image_hosting/x68krf0v.png)\n\n> 上图是一个九连环。\n\n顾名思义，$n$ 连环有一个长长的横梁，上面挂着 $n$ 个 **彼此影响** 的环。\n\n我们给这 $n$ 个环编号，其中最靠横梁头部的环为第 $1$ 个环，其次为第 $2$ 个环，以此类推……最靠横梁尾部的环为第 $n$ 个环；\n\n定义 $f_i$ 表示第 $i$ 个环的状态，其中 $f_i = 1$ 表示这个环在横梁上，$f_i = 0$ 表示这个环不在横梁上；\n\n定义 **拆装一个环** 为使环的状态 **取反**，即状态从 $1$ 变成 $0$ 或从 $0$ 变成 $1$。\n\n这些环的合法拆装规则如下：\n\n1. 第 $1$ 个环随时可以单独拆装；\n2. 第 $k+1$ 个环可以单独拆装，当且仅当 $f_k=1$ 且 $\\forall i < k$，都有 $f_i = 0$；\n3. 若 $f_1 = f_2$，则第 $1,2$ 两个环可以一起拆装。\n\n现在你需要解决的问题是：已知一个 $n$ 连环的初始状态，请你求出拆除这个 $n$ 连环的最少拆装步数。", "inputFormat": "本题数据量较大，故采取 **特殊** 输入方式。\n\n第一行一个正整数 $n$。\n\n第二行一个正整数 $m$；\n\n接下来 $m$ 行输入描述了初始状态：\n\n第 $i + 2$ 行有两个整数 $len_{i}, st_{i}$，表示往初始的 $n$ 连环的尾部连续添加 $len_{i}$ 个状态为 $st_{i}$ 的环。", "outputFormat": "一行共一个整数，表示从拆下这个 $n$ 连环所需要的最少拆装次数。\n\n由于答案可能很大，你只需要输出答案对 $1201201201$ 取模后的结果。", "hint": "本题采用 **捆绑测试**，开启 **O2优化**。\n\n$\\text{Subtask 1 (10 pts)}:$ 保证 $1 \\le n \\le 20$；\n\n$\\text{Subtask 2 (15 pts)}:$ 保证 $1 \\le n\\le 1000$；\n\n$\\text{Subtask 3 (15 pts)}:$ 保证初始状态中 **只有** $1$ 个 $1$；\n\n$\\text{Subtask 4 (30 pts)}:$ 保证 $1 \\le n \\le 10^7$；\n\n$\\text{Subtask 5 (30 pts)}:$ 没有特殊限制。\n\n对于所有数据，满足 $1 \\le n \\le 10^{18}$，$1 \\le m \\le 10^5$，$st_{i} \\in \\{0, 1\\}$，$len_{i} \\ge 1$\n\n数据保证 $\\sum\\limits_{i=1}^m len_{i} = n$。\n\n---\n\n#### 样例 #1 解释\n\n样例描述的是 $4$ 连环，初始状态为 `1101`。\n\n用最少合法拆装次数完成的方法如下：\n\n```plain\n1. 1101 -> 1100\n2. 1100 -> 0100\n3. 0100 -> 0111\n4. 0111 -> 0110\n5. 0110 -> 0010\n6. 0010 -> 0011\n7. 0011 -> 0000\n```\n\n共 $7$ 步。\n\n---\n\n#### 题外话\n\n本题中 $n$ 连环的第 $3$ 条拆装规则，在大部分的九连环玩法说明中都没有提到，但它确实是一个真实可行的操作呢！", "locale": "zh-CN"}}}
{"pid": "P6617", "type": "P", "difficulty": 6, "samples": [["6 4 6\n1 3 2 5 5 6\n2 1 4\n1 4 1\n2 0 5\n2 3 7", "Yes\nNo\nYes"], ["10 20 10\n9 3 6 3 3 3 3 1 4 9\n1 3 9\n1 6 9\n2 3 10\n1 3 9\n2 4 4\n1 1 7\n1 1 3\n1 5 6\n1 3 9\n2 4 7\n1 2 7\n2 6 8\n1 6 10\n2 2 9\n1 7 9\n2 3 1\n1 3 5\n1 5 6\n1 9 10\n1 3 6", "Yes\nNo\nNo\nNo\nYes\nYes\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "平衡树", "O2优化"], "title": "查找 Search", "background": ">   也许，同学间最好的结局就是朋友吧。\n\n$\\mu ry$ 是一个可爱的女孩子。\n\n在她所住的小区里有排成一排的 $n$ 个垃圾桶，从左至右第 $i$ 个垃圾桶里都装着编号为 $a_i$ 的垃圾。\n\n$\\mu ry$ 不喜欢无序，于是就想把社区里编号和为 $w$ 的垃圾都清在一起。\n\n但是调皮的 $\\text{LeverImmy}$ 可能会把某个垃圾桶里的垃圾偷换成另一种。\n\n生气的 $\\mu ry$ 想考考 $\\text{LeverImmy}$ 一个区间 $[l, r]$ 内是否存在编号和为 $w$ 的垃圾。\n\n但 $\\text{LeverImmy}$ 也不会解决这个问题，于是他找到了聪明的你。", "description": "给定 $n$ 个垃圾桶，你需要维护一个数据结构，支持以下操作：\n\n-   `1 pos val` 表示将第 $pos$ 个垃圾桶里的垃圾的编号换成 $val$；\n\n-   `2 l r` 询问在 $[l\\oplus cnt, r\\oplus cnt]$ 内是否存在垃圾编号和为 $w$ 的 **两个** 垃圾桶。\n\n其中 $\\oplus$ 表示异或运算，$cnt$ 表示在 **此次询问之前**，答案为 `Yes` 的个数。\n\n对于每个操作 2，若存在请输出 `Yes`，不存在请输出 `No`。\n\n值得注意的是，对于所有询问， $w$ 为 **同一个数**。", "inputFormat": "第一行共三个整数 $n, m, w$，表示序列长度、接下来的操作个数与 $w$。\n\n第二行共 $n$ 个整数 $a_1, a_2, \\cdots, a_n$ 描述了这个每个垃圾桶内垃圾的编号 $a$。\n\n接下来的 $m$ 行，每行三个整数，格式为 `opt x y`。", "outputFormat": "令操作 2 的次数为 $t$，输出数据共 $t$ 行。\n\n第 $i$ 行表示第 $i$ 个操作 2 的结果，即 `Yes` 或 `No`。", "hint": "本题采用 **捆绑测试**，开启 **O2 优化**。\n\n$\\text{Subtask 1 (7 pts)}:$ 保证 $1 \\le n, m, w \\le 2\\cdot10^3$，**时限 $1\\text{s}$**；\n\n$\\text{Subtask 2 (20 pts)}:$ 保证 $1 \\le n, m, w \\le 1\\cdot10^5$，$opt = 2$，**时限 $2\\text{s}$**；\n\n$\\text{Subtask 3 (30 pts)}:$ 保证 $1 \\le n, m, w \\le 1\\cdot10^5$，**时限 $2\\text{s}$**；\n\n$\\text{Subtask 4 (43 pts)}:$ 没有特殊限制，**时限 $4\\text{s}$**；\n\n对于所有数据， $1 \\le n, m, w \\le 5\\cdot10^5$，$0 \\le a_i \\le w$。\n\n数据保证对于每个操作，$1 \\le pos \\le n$，$0 \\le val \\le w$，$1 \\le l \\oplus cnt \\le r \\oplus cnt \\le n$。\n\n由于输入输出量较大，建议使用更快的输入输出方式。\n\n---\n\n#### 输入 #1 解释\n\n第一次操作，询问区间 $[1, 4]$ 中是否有两个数加起来为 $6$，显然有 $a_1 + a_4 = 6$，因此输出 `Yes`；\n\n第二次操作，修改 $a_4$ 为 $1$，则序列变为 $[1, 3, 2, 1, 5, 6]$；\n\n第三次操作，询问区间 $[1, 4]$ 中是否有 **两个** 数加起来为 $6$，无，因此输出 `No`。\n\n第四次操作，询问区间 $[2, 6]$ 中是否有两个数加起来为 $6$，显然有 $a_4 + a_5 = 6$，因此输出 `Yes`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "查找 Search", "background": ">   也许，同学间最好的结局就是朋友吧。\n\n$\\mu ry$ 是一个可爱的女孩子。\n\n在她所住的小区里有排成一排的 $n$ 个垃圾桶，从左至右第 $i$ 个垃圾桶里都装着编号为 $a_i$ 的垃圾。\n\n$\\mu ry$ 不喜欢无序，于是就想把社区里编号和为 $w$ 的垃圾都清在一起。\n\n但是调皮的 $\\text{LeverImmy}$ 可能会把某个垃圾桶里的垃圾偷换成另一种。\n\n生气的 $\\mu ry$ 想考考 $\\text{LeverImmy}$ 一个区间 $[l, r]$ 内是否存在编号和为 $w$ 的垃圾。\n\n但 $\\text{LeverImmy}$ 也不会解决这个问题，于是他找到了聪明的你。", "description": "给定 $n$ 个垃圾桶，你需要维护一个数据结构，支持以下操作：\n\n-   `1 pos val` 表示将第 $pos$ 个垃圾桶里的垃圾的编号换成 $val$；\n\n-   `2 l r` 询问在 $[l\\oplus cnt, r\\oplus cnt]$ 内是否存在垃圾编号和为 $w$ 的 **两个** 垃圾桶。\n\n其中 $\\oplus$ 表示异或运算，$cnt$ 表示在 **此次询问之前**，答案为 `Yes` 的个数。\n\n对于每个操作 2，若存在请输出 `Yes`，不存在请输出 `No`。\n\n值得注意的是，对于所有询问， $w$ 为 **同一个数**。", "inputFormat": "第一行共三个整数 $n, m, w$，表示序列长度、接下来的操作个数与 $w$。\n\n第二行共 $n$ 个整数 $a_1, a_2, \\cdots, a_n$ 描述了这个每个垃圾桶内垃圾的编号 $a$。\n\n接下来的 $m$ 行，每行三个整数，格式为 `opt x y`。", "outputFormat": "令操作 2 的次数为 $t$，输出数据共 $t$ 行。\n\n第 $i$ 行表示第 $i$ 个操作 2 的结果，即 `Yes` 或 `No`。", "hint": "本题采用 **捆绑测试**，开启 **O2 优化**。\n\n$\\text{Subtask 1 (7 pts)}:$ 保证 $1 \\le n, m, w \\le 2\\cdot10^3$，**时限 $1\\text{s}$**；\n\n$\\text{Subtask 2 (20 pts)}:$ 保证 $1 \\le n, m, w \\le 1\\cdot10^5$，$opt = 2$，**时限 $2\\text{s}$**；\n\n$\\text{Subtask 3 (30 pts)}:$ 保证 $1 \\le n, m, w \\le 1\\cdot10^5$，**时限 $2\\text{s}$**；\n\n$\\text{Subtask 4 (43 pts)}:$ 没有特殊限制，**时限 $4\\text{s}$**；\n\n对于所有数据， $1 \\le n, m, w \\le 5\\cdot10^5$，$0 \\le a_i \\le w$。\n\n数据保证对于每个操作，$1 \\le pos \\le n$，$0 \\le val \\le w$，$1 \\le l \\oplus cnt \\le r \\oplus cnt \\le n$。\n\n由于输入输出量较大，建议使用更快的输入输出方式。\n\n---\n\n#### 输入 #1 解释\n\n第一次操作，询问区间 $[1, 4]$ 中是否有两个数加起来为 $6$，显然有 $a_1 + a_4 = 6$，因此输出 `Yes`；\n\n第二次操作，修改 $a_4$ 为 $1$，则序列变为 $[1, 3, 2, 1, 5, 6]$；\n\n第三次操作，询问区间 $[1, 4]$ 中是否有 **两个** 数加起来为 $6$，无，因此输出 `No`。\n\n第四次操作，询问区间 $[2, 6]$ 中是否有两个数加起来为 $6$，显然有 $a_4 + a_5 = 6$，因此输出 `Yes`。", "locale": "zh-CN"}}}
{"pid": "P6618", "type": "P", "difficulty": 0, "samples": [["10 12\n1 4 1\n1 5 3\n2 4 1\n4 5 1\n4 6 1\n3 6 1\n4 7 1\n8 7 1\n9 7 1\n8 9 1\n10 2 2\n3 10 2", "15"], ["17 20\n1 3 1\n1 6 2\n2 5 3\n2 6 4\n3 4 5\n3 5 6\n7 4 7\n7 3 8\n4 8 9\n9 1 10\n10 9 11\n11 6 12\n14 13 13\n13 12 14\n12 11 15\n11 14 16\n15 4 17\n16 5 18\n17 5 19\n17 16 20", "161"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "岛屿 Island", "background": "> 从前有些岛，岛旁有些桥；桥连着岛，岛连着桥。\n>\n> 有一天，桥倒了，岛翘了；从此桥没了岛，岛也没了桥。\n", "description": "茫茫大海中央，有一个庞大的群岛体系，坐落着 $n$ 座岛屿。为了方便记录，我们把它们编号为岛屿 $1$ 到 $n$，其中，岛屿 $1$ 是唯一一个有人居住的岛。\n\n这些群岛间，有 $m$ 架摇摇欲坠的小桥。第 $i$ 架桥连接着 $u_i, v_i$ 两座 **不同** 的岛，**没有两座岛之间架有两架桥**。\n\n脆弱的小桥已经荒废了，每架桥都只能容一个人走一遍就会倒塌。\n\n一天，你心血来潮，前来这个庞大的群岛探险。作为探险家的你，知道一条安全的岛屿探险路径 **可以多次踏足同一个岛屿**，但 **绝不能走倒塌的桥**；\n\n一条有趣的岛屿探险回路是一条 **以同一个岛屿为起点和终点** 的安全岛屿探险路径，并且它至少踏足两个不同的岛屿。\n\n但特别的，**有趣的岛屿探险回路除了起点能经过两次以外，其它的岛屿都只能经过一次**（显然，你当然不觉得重复探访你已经踏足过的岛屿很有趣）。\n\n为了保证你的安全，你做足了功课，拿到了群岛的地图。仔细研究这个古老的地图，你发现每两个岛之间都有至少一条路可以抵达，并且第 $i$ 架桥上竟然藏着价值为 $w_i$ 的宝藏！\n\n然而，你又发现群岛间的桥是非常稀少的，这些桥总是满足一个规律：**以同一个岛屿为起点的不同的有趣探险回路一定不会经过相同的一架桥**。\n\n你将可以空降到任意一个岛屿开始你的探险，途中你可以收集宝藏，但最终你 **必须回到岛屿** $1$，才能安全地返回。\n\n现在，你想知道在 **确保自己安全** 的情况下最大的能收集到的宝藏的价值和。", "inputFormat": "第一行两个正整数 $n, m$，表示小岛的数量和连接小岛的桥梁的总数量；\n\n接下来的 $m$ 行，每行共三个正整数，其中第 $i$ 行为 $u_i, v_i, w_i$ ，含义如题。", "outputFormat": "一行共一个整数，表示在 **确保自己安全** 的情况下最大的能收集到的宝藏的价值和。\n", "hint": "本题采用 **捆绑测试**，开启 **O2优化**。\n\n$\\text{Subtask 1 (3 pts)}:$ 保证不存在有趣的探险回路；\n\n$\\text{Subtask 2 (7 pts)}:$ 保证 $1 \\le n \\le 10$；\n\n$\\text{Subtask 3 (10 pts)}:$ 保证没有两个有趣的探险回路经过同一个岛屿；\n\n$\\text{Subtask 4 (10 pts)}:$ 保证 $w_i = 1$；\n\n$\\text{Subtask 5 (20 pts)}:$ 保证 $1 \\le n \\le 2000$；\n\n$\\text{Subtask 6 (20 pts)}:$ 保证 $1 \\le n \\le 10^5$；\n\n$\\text{Subtask 7 (30 pts)}:$ 没有特殊限制。\n\n对于所有数据，满足 $1 \\le n \\le 3\\times10^5$，$1 \\le m \\le10^6$，$1 \\le w_i \\le 10^9$。\n\n---\n\n#### 样例 #1 解释\n\n![地图](https://cdn.luogu.com.cn/upload/image_hosting/emfxzgh2.png)\n\n> 上为群岛的地图，圆圈代表岛屿，圆圈间的线代表桥，\n>\n> 圆圈中的数字是岛屿的编号，线旁的数字是桥上宝藏的价值。\n\n![合法解](https://cdn.luogu.com.cn/upload/image_hosting/4jyob32q.png)\n\n从 $7$ 号岛屿出发，沿着上图的方向和顺序走，收集到的宝藏价值和为 $15$，即为答案。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "岛屿 Island", "background": "> 从前有些岛，岛旁有些桥；桥连着岛，岛连着桥。\n>\n> 有一天，桥倒了，岛翘了；从此桥没了岛，岛也没了桥。\n", "description": "茫茫大海中央，有一个庞大的群岛体系，坐落着 $n$ 座岛屿。为了方便记录，我们把它们编号为岛屿 $1$ 到 $n$，其中，岛屿 $1$ 是唯一一个有人居住的岛。\n\n这些群岛间，有 $m$ 架摇摇欲坠的小桥。第 $i$ 架桥连接着 $u_i, v_i$ 两座 **不同** 的岛，**没有两座岛之间架有两架桥**。\n\n脆弱的小桥已经荒废了，每架桥都只能容一个人走一遍就会倒塌。\n\n一天，你心血来潮，前来这个庞大的群岛探险。作为探险家的你，知道一条安全的岛屿探险路径 **可以多次踏足同一个岛屿**，但 **绝不能走倒塌的桥**；\n\n一条有趣的岛屿探险回路是一条 **以同一个岛屿为起点和终点** 的安全岛屿探险路径，并且它至少踏足两个不同的岛屿。\n\n但特别的，**有趣的岛屿探险回路除了起点能经过两次以外，其它的岛屿都只能经过一次**（显然，你当然不觉得重复探访你已经踏足过的岛屿很有趣）。\n\n为了保证你的安全，你做足了功课，拿到了群岛的地图。仔细研究这个古老的地图，你发现每两个岛之间都有至少一条路可以抵达，并且第 $i$ 架桥上竟然藏着价值为 $w_i$ 的宝藏！\n\n然而，你又发现群岛间的桥是非常稀少的，这些桥总是满足一个规律：**以同一个岛屿为起点的不同的有趣探险回路一定不会经过相同的一架桥**。\n\n你将可以空降到任意一个岛屿开始你的探险，途中你可以收集宝藏，但最终你 **必须回到岛屿** $1$，才能安全地返回。\n\n现在，你想知道在 **确保自己安全** 的情况下最大的能收集到的宝藏的价值和。", "inputFormat": "第一行两个正整数 $n, m$，表示小岛的数量和连接小岛的桥梁的总数量；\n\n接下来的 $m$ 行，每行共三个正整数，其中第 $i$ 行为 $u_i, v_i, w_i$ ，含义如题。", "outputFormat": "一行共一个整数，表示在 **确保自己安全** 的情况下最大的能收集到的宝藏的价值和。\n", "hint": "本题采用 **捆绑测试**，开启 **O2优化**。\n\n$\\text{Subtask 1 (3 pts)}:$ 保证不存在有趣的探险回路；\n\n$\\text{Subtask 2 (7 pts)}:$ 保证 $1 \\le n \\le 10$；\n\n$\\text{Subtask 3 (10 pts)}:$ 保证没有两个有趣的探险回路经过同一个岛屿；\n\n$\\text{Subtask 4 (10 pts)}:$ 保证 $w_i = 1$；\n\n$\\text{Subtask 5 (20 pts)}:$ 保证 $1 \\le n \\le 2000$；\n\n$\\text{Subtask 6 (20 pts)}:$ 保证 $1 \\le n \\le 10^5$；\n\n$\\text{Subtask 7 (30 pts)}:$ 没有特殊限制。\n\n对于所有数据，满足 $1 \\le n \\le 3\\times10^5$，$1 \\le m \\le10^6$，$1 \\le w_i \\le 10^9$。\n\n---\n\n#### 样例 #1 解释\n\n![地图](https://cdn.luogu.com.cn/upload/image_hosting/emfxzgh2.png)\n\n> 上为群岛的地图，圆圈代表岛屿，圆圈间的线代表桥，\n>\n> 圆圈中的数字是岛屿的编号，线旁的数字是桥上宝藏的价值。\n\n![合法解](https://cdn.luogu.com.cn/upload/image_hosting/4jyob32q.png)\n\n从 $7$ 号岛屿出发，沿着上图的方向和顺序走，收集到的宝藏价值和为 $15$，即为答案。\n", "locale": "zh-CN"}}}
{"pid": "P6619", "type": "P", "difficulty": 6, "samples": [["8\n1 1 103 150\n1 0 100 100\n1 1 102 150\n1 0 103 300\n2 1\n1 1 101 100\n1 1 104 350\n1 0 100 400", "Peace\n103 200\n103 200\n103 300\n102 200\n102 200\n104 700\n102 1000"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "线段树", "二分", "各省省选", "树状数组", "离散化"], "title": "[省选联考 2020 A/B 卷] 冰火战士", "background": "A 卷 D1T1，B 卷 D1T3。\n\n时限 3s，内存 512MB。", "description": "一场比赛即将开始。\n\n每位战士有两个属性：温度和能量，有两派战士：冰系战士的技能会对周围造成降温冰冻伤害，因而要求场地温度不低于他的自身温度才能参赛；火系战士的技能会对周围造成升温灼烧伤害，因而要求场地温度不高于他的自身温度才能参赛。\n\n当场地温度确定时，双方能够参赛的战士分别排成一队。冰系战士按自身温度从低到高排序，火系战士按自身温度从高到低排序，温度相同时能量大的战士排在前面。首先，双方的第一位战士之间展开战斗，两位战士消耗相同的能量，能量少的战士将耗尽能量退出比赛，而能量有剩余的战士将继续和对方的下一位战士战斗（能量都耗尽则双方下一位战士之间展开战斗）。如此循环，直至某方战士队列为空，比赛结束。\n\n你需要寻找最佳场地温度：使冰火双方消耗总能量最高的温度的最高值。\n\n现在，比赛还处于报名阶段，目前还没有任何战士报名，接下来你将不断地收到报名信息和撤回信息。其中，报名信息包含报名战士的派系和两个属性，撤回信息包含要撤回的报名信息的序号。每当报名情况发生变化（即收到一条信息）时，你需要立即报出当前局面下的最佳场地温度，以及该场地温度下双方消耗的总能量之和是多少。若当前局面下无论何种温度都无法开展比赛（某一方没有战士能参赛），则只要输出 `Peace`。", "inputFormat": "第一行一个数 $Q$，表示信息的数量。\n\n接下来 $Q$ 行，每行为 `1 t x y` $(t \\in \\{0, 1\\}$，$x$ 和 $y$ 都是正整数 $)$ 或 `2 k`（$k$ 是正整数）：\n\n`1 t x y` 表示一条报名信息，$t = 0$ 时报名战士是冰系，$t = 1$ 时报名战士是火系，$x$ 表示战士的自身温度，$y$ 表示战士的能量。\n\n`2 k` 表示一条撤回信息，撤回的是第 $k$ 条信息。被撤回的信息一定是报名信息，已被撤回的信息不会再次被撤回。", "outputFormat": "共 $Q$ 行，每行有两个用空格隔开的正整数，分别表示当前局面下的最佳温度和该温度下冰火双方消耗的总能量之和。", "hint": "#### 样例 1 解释\n为说明方便，约定：若第 $k$ 条信息是报名信息，则该条报名信息对应战士 $k$。样例中含有战士 $1,2,3,4,6,7,8$，由于第 $5$ 条是撤回信息，所以没有战士 $5$。\n\n下面逐个解释每个输出：\n\n1. 只有火系战士：战士 $1$，无法比赛，输出 `Peace`。\n2. 温度为 $100 \\sim 103$ 都能消耗最多的能量 $200$：战士 $1$ 对阵战士 $2$ 消耗能量 $200$，最佳温度为 $103$。\n3. 温度为 $100 \\sim 103$ 都能消耗最多的能量 $200$：战士 $1$ 对阵战士 $2$ 消耗能量 $200$，最佳温度为 $103$。\n4. 温度 $103$ 能消耗最多的能量 $300$：首先，战士 $1$ 对阵战士 $2$ 消耗能量 $200$；然后，战士 $1$ 对阵战士 $4$ 消耗能量 $100$，最佳温度为 $103$。\n5. 从现在起战士 $1$ 不再存在。温度 $100 \\sim 102$ 能消耗最多的能量 $200$：战士 $2$ 对阵战士 $3$ 消耗能量 $200$，最佳温度为 $102$。\n\n#### 样例 2\n\n见附加文件中 `icefire2.in` 与 `icefire2.ans`。\n\n#### 数据范围\n\n$10\\%$ 的数据：$Q \\leq 100$，$x \\leq 10^3$。\n\n另有 $20\\%$ 的数据：$Q \\leq 10^4$，$x \\leq 5000$，不存在撤回信息，且输入的 $x$ 按顺序不降。\n\n$60\\%$ 的数据（包含上述 $20\\%$，下同）：$Q \\leq 2 \\times 10^5$，$x \\leq 2 \\times 10^5$。\n\n$90\\%$ 的数据：$Q \\leq 2 \\times 10^6$，$x \\leq 2 \\times 10^6$。\n\n$100\\%$ 的数据：$1 \\leq Q \\leq 2 \\times 10^6$，$1 \\leq x \\leq 2 \\times 10^9$，所有 $y$ 之和不超过 $2 \\times 10^9$，保证不存在 $t, x, y$ 完全相同的两个战士。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A/B 卷] 冰火战士", "background": "A 卷 D1T1，B 卷 D1T3。\n\n时限 3s，内存 512MB。", "description": "一场比赛即将开始。\n\n每位战士有两个属性：温度和能量，有两派战士：冰系战士的技能会对周围造成降温冰冻伤害，因而要求场地温度不低于他的自身温度才能参赛；火系战士的技能会对周围造成升温灼烧伤害，因而要求场地温度不高于他的自身温度才能参赛。\n\n当场地温度确定时，双方能够参赛的战士分别排成一队。冰系战士按自身温度从低到高排序，火系战士按自身温度从高到低排序，温度相同时能量大的战士排在前面。首先，双方的第一位战士之间展开战斗，两位战士消耗相同的能量，能量少的战士将耗尽能量退出比赛，而能量有剩余的战士将继续和对方的下一位战士战斗（能量都耗尽则双方下一位战士之间展开战斗）。如此循环，直至某方战士队列为空，比赛结束。\n\n你需要寻找最佳场地温度：使冰火双方消耗总能量最高的温度的最高值。\n\n现在，比赛还处于报名阶段，目前还没有任何战士报名，接下来你将不断地收到报名信息和撤回信息。其中，报名信息包含报名战士的派系和两个属性，撤回信息包含要撤回的报名信息的序号。每当报名情况发生变化（即收到一条信息）时，你需要立即报出当前局面下的最佳场地温度，以及该场地温度下双方消耗的总能量之和是多少。若当前局面下无论何种温度都无法开展比赛（某一方没有战士能参赛），则只要输出 `Peace`。", "inputFormat": "第一行一个数 $Q$，表示信息的数量。\n\n接下来 $Q$ 行，每行为 `1 t x y` $(t \\in \\{0, 1\\}$，$x$ 和 $y$ 都是正整数 $)$ 或 `2 k`（$k$ 是正整数）：\n\n`1 t x y` 表示一条报名信息，$t = 0$ 时报名战士是冰系，$t = 1$ 时报名战士是火系，$x$ 表示战士的自身温度，$y$ 表示战士的能量。\n\n`2 k` 表示一条撤回信息，撤回的是第 $k$ 条信息。被撤回的信息一定是报名信息，已被撤回的信息不会再次被撤回。", "outputFormat": "共 $Q$ 行，每行有两个用空格隔开的正整数，分别表示当前局面下的最佳温度和该温度下冰火双方消耗的总能量之和。", "hint": "#### 样例 1 解释\n为说明方便，约定：若第 $k$ 条信息是报名信息，则该条报名信息对应战士 $k$。样例中含有战士 $1,2,3,4,6,7,8$，由于第 $5$ 条是撤回信息，所以没有战士 $5$。\n\n下面逐个解释每个输出：\n\n1. 只有火系战士：战士 $1$，无法比赛，输出 `Peace`。\n2. 温度为 $100 \\sim 103$ 都能消耗最多的能量 $200$：战士 $1$ 对阵战士 $2$ 消耗能量 $200$，最佳温度为 $103$。\n3. 温度为 $100 \\sim 103$ 都能消耗最多的能量 $200$：战士 $1$ 对阵战士 $2$ 消耗能量 $200$，最佳温度为 $103$。\n4. 温度 $103$ 能消耗最多的能量 $300$：首先，战士 $1$ 对阵战士 $2$ 消耗能量 $200$；然后，战士 $1$ 对阵战士 $4$ 消耗能量 $100$，最佳温度为 $103$。\n5. 从现在起战士 $1$ 不再存在。温度 $100 \\sim 102$ 能消耗最多的能量 $200$：战士 $2$ 对阵战士 $3$ 消耗能量 $200$，最佳温度为 $102$。\n\n#### 样例 2\n\n见附加文件中 `icefire2.in` 与 `icefire2.ans`。\n\n#### 数据范围\n\n$10\\%$ 的数据：$Q \\leq 100$，$x \\leq 10^3$。\n\n另有 $20\\%$ 的数据：$Q \\leq 10^4$，$x \\leq 5000$，不存在撤回信息，且输入的 $x$ 按顺序不降。\n\n$60\\%$ 的数据（包含上述 $20\\%$，下同）：$Q \\leq 2 \\times 10^5$，$x \\leq 2 \\times 10^5$。\n\n$90\\%$ 的数据：$Q \\leq 2 \\times 10^6$，$x \\leq 2 \\times 10^6$。\n\n$100\\%$ 的数据：$1 \\leq Q \\leq 2 \\times 10^6$，$1 \\leq x \\leq 2 \\times 10^9$，所有 $y$ 之和不超过 $2 \\times 10^9$，保证不存在 $t, x, y$ 完全相同的两个战士。", "locale": "zh-CN"}}}
{"pid": "P6620", "type": "P", "difficulty": 6, "samples": [["5 1 10007 2\n0 0 1", "240"], ["996 233 998244353 5\n5 4 13 16 20 15", "869469289"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选", "组合数学", "Stirling 数"], "title": "[省选联考 2020 A 卷] 组合数问题", "background": "1s 512M", "description": "众所周知，小葱同学擅长计算，尤其擅长计算组合数。小葱现在希望你计算 \n$$\\left(\\sum_{k=0}^{n}f(k)\\times x^k\\times \\binom{n}{k}\\right)\\bmod p$$ \n的值。其中 $n$, $x$, $p$ 为给定的整数，$f(k)$ 为给定的一个 $m$ 次多项式 $f(k) = a_0 + a_1k + a_2k^2 + \\cdots + a_mk^m$。$\\binom{n}{k}$ 为组合数，其值为 $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$。", "inputFormat": "第一行四个非负整数 $n$, $x$, $p$, $m$。\n\n第二行 $m + 1$ 个整数，分别代表 $a_0$, $a_1$, $\\cdots$, $a_m$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "#### 样例 1 解释\n\n$f(0) = 0，f(1) = 1，f(2) = 4，f(3) = 9，f(4) = 16，f(5) = 25$。\n\n$x = 1$，故 $x^k$ 恒为 $1$，乘积中的该项可以忽略。\n\n$\\binom 5 0 = 1, \\binom 5 1 = 5, \\binom 5 2 = 10, \\binom 5 3 = 10, \\binom 5 4 = 5, \\binom 5 5 = 1$。\n\n#### 样例 3\n\n见附加文件中 `problem3.in` 与 `problem3.ans`。\n\n#### 数据范围与提示\n\n对于所有测试数据：$1\\le n, x, p \\le 10^9, 0\\le a_i\\le 10^9, 0\\le m \\le \\min(n,1000)$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号  | $n\\le $ | $m\\le $ | 其他特殊限制 |\n| :---------: | :-----: | :-----: | :----------: |\n|  $1\\sim 3$  | $1000$  | $1000$  |              |\n|  $4\\sim 6$  | $10^5$  |   $0$   |  $p$ 是质数  |\n|  $7\\sim 8$  | $10^9$  |   $0$   |              |\n| $9\\sim 12$  | $10^9$  |   $5$   |              |\n| $13\\sim 16$ | $10^9$  | $1000$  |    $x=1$     |\n| $17\\sim 20$ | $10^9$  | $1000$  |              |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A 卷] 组合数问题", "background": "1s 512M", "description": "众所周知，小葱同学擅长计算，尤其擅长计算组合数。小葱现在希望你计算 \n$$\\left(\\sum_{k=0}^{n}f(k)\\times x^k\\times \\binom{n}{k}\\right)\\bmod p$$ \n的值。其中 $n$, $x$, $p$ 为给定的整数，$f(k)$ 为给定的一个 $m$ 次多项式 $f(k) = a_0 + a_1k + a_2k^2 + \\cdots + a_mk^m$。$\\binom{n}{k}$ 为组合数，其值为 $\\binom{n}{k} = \\frac{n!}{k!(n-k)!}$。", "inputFormat": "第一行四个非负整数 $n$, $x$, $p$, $m$。\n\n第二行 $m + 1$ 个整数，分别代表 $a_0$, $a_1$, $\\cdots$, $a_m$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "#### 样例 1 解释\n\n$f(0) = 0，f(1) = 1，f(2) = 4，f(3) = 9，f(4) = 16，f(5) = 25$。\n\n$x = 1$，故 $x^k$ 恒为 $1$，乘积中的该项可以忽略。\n\n$\\binom 5 0 = 1, \\binom 5 1 = 5, \\binom 5 2 = 10, \\binom 5 3 = 10, \\binom 5 4 = 5, \\binom 5 5 = 1$。\n\n#### 样例 3\n\n见附加文件中 `problem3.in` 与 `problem3.ans`。\n\n#### 数据范围与提示\n\n对于所有测试数据：$1\\le n, x, p \\le 10^9, 0\\le a_i\\le 10^9, 0\\le m \\le \\min(n,1000)$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号  | $n\\le $ | $m\\le $ | 其他特殊限制 |\n| :---------: | :-----: | :-----: | :----------: |\n|  $1\\sim 3$  | $1000$  | $1000$  |              |\n|  $4\\sim 6$  | $10^5$  |   $0$   |  $p$ 是质数  |\n|  $7\\sim 8$  | $10^9$  |   $0$   |              |\n| $9\\sim 12$  | $10^9$  |   $5$   |              |\n| $13\\sim 16$ | $10^9$  | $1000$  |    $x=1$     |\n| $17\\sim 20$ | $10^9$  | $1000$  |              |", "locale": "zh-CN"}}}
{"pid": "P6621", "type": "P", "difficulty": 7, "samples": [["5 3\n1 2 5 6 7\n4 4 2 1 3\n1 2 3\n2 4 5", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选"], "title": "[省选联考 2020 A 卷] 魔法商店", "background": "1s 512M", "description": "笠笠和伦伦来到了一家魔法商店，这家商店内有 $n$ 件礼品，礼品从 $1 \\sim n$ 编号，$i$ 号礼品的魅力值为 $c_i$，价格为 $v_i$。\n\n两人希望购买一些礼品，但他们的要求比较奇怪：假设购买到的礼品集合为 $S=\\{s_1,s_2,\\dots,s_p\\}(1\\leq s_i\\leq n)$，两人要求对于 $S$ 中任意的非空子集 $T=\\{t_1,t_2,\\dots,t_q\\}$，它包含的所有礼品的魅力值异或和都不为零，即：$c_{t_1} \\oplus c_{t_2} \\oplus \\cdots \\oplus c_{t_q} \\neq 0$。其中 $\\oplus$ 是异或运算。在此基础上，两人还要求购买到的礼品数尽可能多。\n\n例如：$c_1=1,c_2=2,c_3=5,c_4=6,c_5=7$。则 $S_1=\\{2,3,5\\}$ 不符合要求，因为 $c_2 \\oplus c_3 \\oplus c_5=0$。$S_2=\\{1,2,3\\}$ 与 $S_3=\\{2,4,5\\}$ 符合要求，其任意非空子集的异或和都不为零。$S_4=\\{1,2\\}$ 因为其包含的礼品数不是最多的。\n\n满足两人要求的礼品集合可能很多，因此商店老板为两人挑选出了两个符合要求的礼品集合 $A$ 与 $B$（显然它们所含的礼品数相同），伦伦喜欢集合 $A$，但笠笠更喜欢集合 $B$。为了笠笠同意购买集合 $A$，伦伦决定使用魔法改变礼品价格。更具体地，伦伦能花费 $(x-v_i)^2$ 的魔力值，将 $i$ 号礼品的价格改为任意整数 $x$，每件礼品只能被改价一次。\n\n伦伦希望改价后 $A$ 是所有符合要求的礼品集合之中价格总和最小的，且 $B$ 是所有符合要求的礼品集合之中价格总和最大的（一个礼品集合的价格总和为它包含的所有礼品的价格之和）。现在请你帮伦伦计算，他至少要花费多少魔力值才能完成他的目标。", "inputFormat": "第一行两个整数 $n, m$，分别表示总礼品数与礼品集合 $A(B)$ 包含的礼品数。\n\n第二行 $n$ 个整数 $c_i$，第 $i$ 个整数表示 $i$ 号礼品的魅力值。\n\n第三行 $n$ 个整数 $v_i$，第 $i$ 个整数表示 $i$ 号礼品的价格。\n\n第四行 $m$ 个整数 $a_i$，表示礼品集合 $A$ 包含的礼品的编号。数据保证 $a_i$ 两两不同。\n\n第五行 $m$ 个整数 $b_i$，表示礼品集合 $B$ 包含的礼品的编号。数据保证 $b_i$ 两两不同。\n\n数据保证 $1 \\leq a_i, b_i \\leq n$，且礼品集合 $A$ 和 $B$ 均符合两人的要求。\n", "outputFormat": "仅一行一个整数，表示伦伦至少需要花费的魔力值。", "hint": "#### 样例 1 解释\n\n符合条件的礼品集合有：$\\{1,2,3\\},\\{1,2,4\\},\\{1,2,5\\},\\{1,3,4\\},\\{1,3,5\\},\\{2,3,4\\},\\{2,4,5\\},\\{3,4,5\\}$。\n\n一个最优的改价方案为：$c_1=c_2=c_4=c_5=3$，$c_3=2$。\n\n#### 样例 2\n\n见附加文件中 `shop2.in` 与 `shop2.ans`。\n\n#### 样例 3\n\n见附加文件中 `shop3.in` 与 `shop3.ans`。\n\n#### 数据范围\n\n对于所有测试数据：$1\\leq n\\leq 1000$，$1\\leq m\\leq 64$，$1\\leq c_i < 2^{64}$，$0\\leq v_i\\leq 10^6$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\leq$ | $m \\leq$ | 特殊限制 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 3$ | $10$ | $4$ | $1 \\leq v_i \\leq 5$ |\n| $4 \\sim 6$ | $50$ | $2$ | $1 \\leq v_i \\leq 10$ |\n| $7 \\sim 10$ | $500$ | $30$ | $0 \\leq v_i \\leq 1$ |\n| $11 \\sim 12$ | $1000$ | $64$ | $A$ 与 $B$ 相同 |\n| $13 \\sim 20$ | $1000$ | $64$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A 卷] 魔法商店", "background": "1s 512M", "description": "笠笠和伦伦来到了一家魔法商店，这家商店内有 $n$ 件礼品，礼品从 $1 \\sim n$ 编号，$i$ 号礼品的魅力值为 $c_i$，价格为 $v_i$。\n\n两人希望购买一些礼品，但他们的要求比较奇怪：假设购买到的礼品集合为 $S=\\{s_1,s_2,\\dots,s_p\\}(1\\leq s_i\\leq n)$，两人要求对于 $S$ 中任意的非空子集 $T=\\{t_1,t_2,\\dots,t_q\\}$，它包含的所有礼品的魅力值异或和都不为零，即：$c_{t_1} \\oplus c_{t_2} \\oplus \\cdots \\oplus c_{t_q} \\neq 0$。其中 $\\oplus$ 是异或运算。在此基础上，两人还要求购买到的礼品数尽可能多。\n\n例如：$c_1=1,c_2=2,c_3=5,c_4=6,c_5=7$。则 $S_1=\\{2,3,5\\}$ 不符合要求，因为 $c_2 \\oplus c_3 \\oplus c_5=0$。$S_2=\\{1,2,3\\}$ 与 $S_3=\\{2,4,5\\}$ 符合要求，其任意非空子集的异或和都不为零。$S_4=\\{1,2\\}$ 因为其包含的礼品数不是最多的。\n\n满足两人要求的礼品集合可能很多，因此商店老板为两人挑选出了两个符合要求的礼品集合 $A$ 与 $B$（显然它们所含的礼品数相同），伦伦喜欢集合 $A$，但笠笠更喜欢集合 $B$。为了笠笠同意购买集合 $A$，伦伦决定使用魔法改变礼品价格。更具体地，伦伦能花费 $(x-v_i)^2$ 的魔力值，将 $i$ 号礼品的价格改为任意整数 $x$，每件礼品只能被改价一次。\n\n伦伦希望改价后 $A$ 是所有符合要求的礼品集合之中价格总和最小的，且 $B$ 是所有符合要求的礼品集合之中价格总和最大的（一个礼品集合的价格总和为它包含的所有礼品的价格之和）。现在请你帮伦伦计算，他至少要花费多少魔力值才能完成他的目标。", "inputFormat": "第一行两个整数 $n, m$，分别表示总礼品数与礼品集合 $A(B)$ 包含的礼品数。\n\n第二行 $n$ 个整数 $c_i$，第 $i$ 个整数表示 $i$ 号礼品的魅力值。\n\n第三行 $n$ 个整数 $v_i$，第 $i$ 个整数表示 $i$ 号礼品的价格。\n\n第四行 $m$ 个整数 $a_i$，表示礼品集合 $A$ 包含的礼品的编号。数据保证 $a_i$ 两两不同。\n\n第五行 $m$ 个整数 $b_i$，表示礼品集合 $B$ 包含的礼品的编号。数据保证 $b_i$ 两两不同。\n\n数据保证 $1 \\leq a_i, b_i \\leq n$，且礼品集合 $A$ 和 $B$ 均符合两人的要求。\n", "outputFormat": "仅一行一个整数，表示伦伦至少需要花费的魔力值。", "hint": "#### 样例 1 解释\n\n符合条件的礼品集合有：$\\{1,2,3\\},\\{1,2,4\\},\\{1,2,5\\},\\{1,3,4\\},\\{1,3,5\\},\\{2,3,4\\},\\{2,4,5\\},\\{3,4,5\\}$。\n\n一个最优的改价方案为：$c_1=c_2=c_4=c_5=3$，$c_3=2$。\n\n#### 样例 2\n\n见附加文件中 `shop2.in` 与 `shop2.ans`。\n\n#### 样例 3\n\n见附加文件中 `shop3.in` 与 `shop3.ans`。\n\n#### 数据范围\n\n对于所有测试数据：$1\\leq n\\leq 1000$，$1\\leq m\\leq 64$，$1\\leq c_i < 2^{64}$，$0\\leq v_i\\leq 10^6$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\leq$ | $m \\leq$ | 特殊限制 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1 \\sim 3$ | $10$ | $4$ | $1 \\leq v_i \\leq 5$ |\n| $4 \\sim 6$ | $50$ | $2$ | $1 \\leq v_i \\leq 10$ |\n| $7 \\sim 10$ | $500$ | $30$ | $0 \\leq v_i \\leq 1$ |\n| $11 \\sim 12$ | $1000$ | $64$ | $A$ 与 $B$ 相同 |\n| $13 \\sim 20$ | $1000$ | $64$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P6622", "type": "P", "difficulty": 6, "samples": [["3 3 1\n1 2 3", "2"], ["4 3 1\n1 2 3 1", "6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选", "状压 DP"], "title": "[省选联考 2020 A/B 卷] 信号传递", "background": "", "description": "一条道路上从左至右排列着 $m$ 个信号站，初始时从左至右依次编号为 $1,2,\\dots,m$，相邻信号站之间相隔 $1$ 单位长度。每个信号站只能往它右侧的任意信号站传输信号（称为普通传递），每单位长度距离需要消耗 $1$ 单位时间。道路的最左侧有一个控制塔，它在最左侧信号站的左侧，与其相隔 $1$ 单位长度。控制塔能与任意信号站进行双向信号传递（称为特殊传递），但每单位长度距离需要消耗 $k$ 个单位时间。对于给定的长度为 $n$ 的信号传递序列 $S$，传递规则如下：\n\n1. 共 $n-1$ 次信号传递，第 $i$ 次信号传递将把信号从 $S_i$ 号信号站传递给 $S_{i+1}$ 号。\n2. 若 $S_{i+1}$ 号信号站在 $S_i$ 号右侧，则将使用普通传递方式，从 $S_i$ 号直接传递给 $S_{i+1}$ 号。\n3. 若 $S_{i+1}$ 号信号站在 $S_i$ 号左侧，则将使用特殊传递方式，信号将从 $S_i$ 号传递给控制塔，再由控制塔传递给 $S_{i+1}$ 号。\n4. 若 $S_i=S_{i+1}$，则信号无须传递。\n\n阿基作为大工程师，他能够任意多次交换任意两个信号站的位置，即他能够重排信号站的顺序，这样会使得 $S$ 消耗的传递时间改变。现在阿基想知道，在他重排信号站顺序后，$S$ 所消耗的传递时间最小能是多少。", "inputFormat": "第一行三个整数 $n,m,k$，分别代表信号传递序列 $S$ 的长度，信号站个数，特殊传递单位长度距离的时间消耗。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示 $S_i$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例解释 $1$】\n\n信号站顺序保持不变，两次使用普通传递方式，时间消耗为 $1+1=2$。\n\n【样例解释 $2$】\n\n对于排列 $1,2,3$，传递时间为 $1+1+(3\\times 1+1\\times 1)=6$。\n\n对于排列 $1,3,2$，传递时间为 $2+(3\\times 1+2\\times 1)+(2\\times 1+1\\times 1)=10$。\n\n对于排列 $2,1,3$，传递时间为 $(2\\times 1+1\\times 1)+2+(3\\times 1+2\\times 1)=10$。\n\n对于排列 $2,3,1$，传递时间为 $(3\\times 1+1\\times 1)+1+1=6$。\n\n对于排列 $3,1,2$，传递时间为 $1+(3\\times 1+1\\times 1)+1=6$。\n\n对于排列 $3,2,1$，传递时间为 $(3\\times 1+2\\times 1)+(2\\times 1+1\\times 1)+2=10$。\n\n【数据范围】\n\n$30\\%$ 的数据：$m\\leq 8, n\\leq 100$。\n\n$60\\%$ 的数据：$m\\leq 20$。\n\n$70\\%$ 的数据：$m\\leq 21$。\n\n$80\\%$ 的数据：$m\\leq 22$。\n\n$100\\%$ 的数据：$2\\leq m\\leq 23$，$2\\leq n\\leq 10^5$，$1\\leq k\\leq 100$，$1\\leq S_i\\leq m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A/B 卷] 信号传递", "background": "", "description": "一条道路上从左至右排列着 $m$ 个信号站，初始时从左至右依次编号为 $1,2,\\dots,m$，相邻信号站之间相隔 $1$ 单位长度。每个信号站只能往它右侧的任意信号站传输信号（称为普通传递），每单位长度距离需要消耗 $1$ 单位时间。道路的最左侧有一个控制塔，它在最左侧信号站的左侧，与其相隔 $1$ 单位长度。控制塔能与任意信号站进行双向信号传递（称为特殊传递），但每单位长度距离需要消耗 $k$ 个单位时间。对于给定的长度为 $n$ 的信号传递序列 $S$，传递规则如下：\n\n1. 共 $n-1$ 次信号传递，第 $i$ 次信号传递将把信号从 $S_i$ 号信号站传递给 $S_{i+1}$ 号。\n2. 若 $S_{i+1}$ 号信号站在 $S_i$ 号右侧，则将使用普通传递方式，从 $S_i$ 号直接传递给 $S_{i+1}$ 号。\n3. 若 $S_{i+1}$ 号信号站在 $S_i$ 号左侧，则将使用特殊传递方式，信号将从 $S_i$ 号传递给控制塔，再由控制塔传递给 $S_{i+1}$ 号。\n4. 若 $S_i=S_{i+1}$，则信号无须传递。\n\n阿基作为大工程师，他能够任意多次交换任意两个信号站的位置，即他能够重排信号站的顺序，这样会使得 $S$ 消耗的传递时间改变。现在阿基想知道，在他重排信号站顺序后，$S$ 所消耗的传递时间最小能是多少。", "inputFormat": "第一行三个整数 $n,m,k$，分别代表信号传递序列 $S$ 的长度，信号站个数，特殊传递单位长度距离的时间消耗。\n\n第二行 $n$ 个整数，第 $i$ 个整数表示 $S_i$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例解释 $1$】\n\n信号站顺序保持不变，两次使用普通传递方式，时间消耗为 $1+1=2$。\n\n【样例解释 $2$】\n\n对于排列 $1,2,3$，传递时间为 $1+1+(3\\times 1+1\\times 1)=6$。\n\n对于排列 $1,3,2$，传递时间为 $2+(3\\times 1+2\\times 1)+(2\\times 1+1\\times 1)=10$。\n\n对于排列 $2,1,3$，传递时间为 $(2\\times 1+1\\times 1)+2+(3\\times 1+2\\times 1)=10$。\n\n对于排列 $2,3,1$，传递时间为 $(3\\times 1+1\\times 1)+1+1=6$。\n\n对于排列 $3,1,2$，传递时间为 $1+(3\\times 1+1\\times 1)+1=6$。\n\n对于排列 $3,2,1$，传递时间为 $(3\\times 1+2\\times 1)+(2\\times 1+1\\times 1)+2=10$。\n\n【数据范围】\n\n$30\\%$ 的数据：$m\\leq 8, n\\leq 100$。\n\n$60\\%$ 的数据：$m\\leq 20$。\n\n$70\\%$ 的数据：$m\\leq 21$。\n\n$80\\%$ 的数据：$m\\leq 22$。\n\n$100\\%$ 的数据：$2\\leq m\\leq 23$，$2\\leq n\\leq 10^5$，$1\\leq k\\leq 100$，$1\\leq S_i\\leq m$。", "locale": "zh-CN"}}}
{"pid": "P6623", "type": "P", "difficulty": 6, "samples": [["5\n5 4 1 2 3\n1 1 2 2", "12"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "倍增", "各省省选", "字典树 Trie", "位运算"], "title": "[省选联考 2020 A 卷] 树", "background": "", "description": "给定一棵 $n$ 个结点的有根树 $T$，结点从 $1$ 开始编号，根结点为 $1$ 号结点，每个结点有一个正整数权值 $v_i$。\n\n设 $x$ 号结点的子树内（包含 $x$ 自身）的所有结点编号为 $c_1,c_2,\\dots,c_k$，定义 $x$ 的价值为：\n\n$\nval(x)=(v_{c_1}+d(c_1,x)) \\oplus (v_{c_2}+d(c_2,x)) \\oplus \\cdots \\oplus (v_{c_k}+d(c_k, x))\n$\n\n其中 $d(x,y)$ 表示树上 $x$ 号结点与 $y$ 号结点间唯一简单路径所包含的边数，$d(x, x) = 0$。$\\oplus$ 表示异或运算。\n\n请你求出 $\\sum\\limits_{i=1}^n val(i)$ 的结果。\n", "inputFormat": "第一行一个正整数 $n$ 表示树的大小。\n\n第二行 $n$ 个正整数表示 $v_i$。\n\n接下来一行 $n-1$ 个正整数，依次表示 $2$ 号结点到 $n$ 号结点，每个结点的父亲编号 $p_i$。\n", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例解释 $1$】\n\n$val(1)=(5+0)\\oplus(4+1)\\oplus(1+1)\\oplus(2+2)\\oplus(3+2)=3$。\n\n$val(2)=(4+0)\\oplus(2+1)\\oplus(3+1) = 3$。\n\n$val(3)=(1+0)=1$。\n\n$val(4)=(2+0)=2$。\n\n$val(5)=(3+0)=3$。\n\n和为 $12$。\n\n【数据范围】\n\n对于 $10\\%$ 的数据：$1\\leq n\\leq 2501$；\n\n对于 $40\\%$ 的数据：$1\\leq n\\leq 152501$；\n\n另有 $20\\%$ 的数据：所有 $p_i=i-1$（$2\\leq i\\leq n$）；\n\n另有 $20\\%$ 的数据：所有 $v_i=1$（$1\\leq i\\leq n$）；\n\n对于 $100\\%$ 的数据：$1\\leq n,v_i \\leq 525010$，$1\\leq p_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A 卷] 树", "background": "", "description": "给定一棵 $n$ 个结点的有根树 $T$，结点从 $1$ 开始编号，根结点为 $1$ 号结点，每个结点有一个正整数权值 $v_i$。\n\n设 $x$ 号结点的子树内（包含 $x$ 自身）的所有结点编号为 $c_1,c_2,\\dots,c_k$，定义 $x$ 的价值为：\n\n$\nval(x)=(v_{c_1}+d(c_1,x)) \\oplus (v_{c_2}+d(c_2,x)) \\oplus \\cdots \\oplus (v_{c_k}+d(c_k, x))\n$\n\n其中 $d(x,y)$ 表示树上 $x$ 号结点与 $y$ 号结点间唯一简单路径所包含的边数，$d(x, x) = 0$。$\\oplus$ 表示异或运算。\n\n请你求出 $\\sum\\limits_{i=1}^n val(i)$ 的结果。\n", "inputFormat": "第一行一个正整数 $n$ 表示树的大小。\n\n第二行 $n$ 个正整数表示 $v_i$。\n\n接下来一行 $n-1$ 个正整数，依次表示 $2$ 号结点到 $n$ 号结点，每个结点的父亲编号 $p_i$。\n", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例解释 $1$】\n\n$val(1)=(5+0)\\oplus(4+1)\\oplus(1+1)\\oplus(2+2)\\oplus(3+2)=3$。\n\n$val(2)=(4+0)\\oplus(2+1)\\oplus(3+1) = 3$。\n\n$val(3)=(1+0)=1$。\n\n$val(4)=(2+0)=2$。\n\n$val(5)=(3+0)=3$。\n\n和为 $12$。\n\n【数据范围】\n\n对于 $10\\%$ 的数据：$1\\leq n\\leq 2501$；\n\n对于 $40\\%$ 的数据：$1\\leq n\\leq 152501$；\n\n另有 $20\\%$ 的数据：所有 $p_i=i-1$（$2\\leq i\\leq n$）；\n\n另有 $20\\%$ 的数据：所有 $v_i=1$（$1\\leq i\\leq n$）；\n\n对于 $100\\%$ 的数据：$1\\leq n,v_i \\leq 525010$，$1\\leq p_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P6624", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2 4\n2 3 6\n1 3 12", "192"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2020", "各省省选", "矩阵树定理", "多项式", "最大公约数 gcd", "莫比乌斯反演", "容斥原理", "行列式"], "title": "[省选联考 2020 A 卷] 作业题", "background": "", "description": "小 W 刚刚在离散数学课学习了生成树的知识：一个无向图 $G=(V,E)$ 的生成树 $T$ 为边集 $E$ 的一个大小为 $|V|-1$ 的子集，且保证 $T$ 的生成子图在 $G$ 中连通。\n\n小 W 在做今天的作业时被这样一道题目难住了：\n\n给定一个 $n$ 个顶点 $m$ 条边（点和边都从 $1$ 开始编号）的无向图 $G$，保证图中无重边和无自环。每一条边有一个正整数边权 $w_i$，对于一棵 $G$ 的生成树 $T$，定义 $T$ 的价值为：$T$ 所包含的边的边权的最大公约数乘以边权之和，即：\n\n$$\nval(T)=\\left(\\sum\\limits_{i=1}^{n-1} w_{e_i}\\right) \\times \\gcd(w_{e_1},w_{e_2},\\dots,w_{e_{n-1}})\n$$\n\n其中 $e_1,e_2,\\dots,e_{n-1}$ 为 $T$ 包含的边的编号。\n\n小 W 需要求出 $G$ 的所有生成树 $T$ 的价值之和，他做了很久也没做出来，请你帮帮他。由于答案可能很大，你只需要给出答案对 $998244353$ 取模后的结果。", "inputFormat": "第一行两个正整数 $n,m$，表示 $G$ 的点数和边数。\n\n接下来 $m$ 行，每行三个正整数 $u_i,v_i,w_i$，第 $i$ 行表示一条无向边连接 $u_i$ 号点和 $v_i$ 号点，权值为 $w_i$。\n", "outputFormat": "仅一行一个整数，表示答案对 $998244353$ 取模后的结果。", "hint": "【样例解释 $1$】\n\n$G$ 共有三棵生成树：\n\n$T_1=\\{(1,2),(2,3)\\}$，价值为 $10\\times 2=20$。\n\n$T_2=\\{(1,2),(1,3)\\}$，价值为 $16\\times 4=64$。\n\n$T_3=\\{(1,3),(2,3)\\}$，价值为 $18\\times 6=108$。\n\n总和为 $192$。\n\n【数据规模】\n\n$10\\%$ 的数据满足：$m\\leq 15$。\n\n另有 $20\\%$ 的数据满足：$m \\leq n$。\n\n另有 $20\\%$ 的数据满足：$w_i$ 均相同。\n\n另有 $20\\%$ 的数据满足：$w_i$ 均为质数。\n\n$100\\%$ 的数据满足：$1\\leq n\\leq 30, 1\\leq m \\leq \\frac {n(n-1)}{2}, 1\\leq w_i \\leq 152501$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 A 卷] 作业题", "background": "", "description": "小 W 刚刚在离散数学课学习了生成树的知识：一个无向图 $G=(V,E)$ 的生成树 $T$ 为边集 $E$ 的一个大小为 $|V|-1$ 的子集，且保证 $T$ 的生成子图在 $G$ 中连通。\n\n小 W 在做今天的作业时被这样一道题目难住了：\n\n给定一个 $n$ 个顶点 $m$ 条边（点和边都从 $1$ 开始编号）的无向图 $G$，保证图中无重边和无自环。每一条边有一个正整数边权 $w_i$，对于一棵 $G$ 的生成树 $T$，定义 $T$ 的价值为：$T$ 所包含的边的边权的最大公约数乘以边权之和，即：\n\n$$\nval(T)=\\left(\\sum\\limits_{i=1}^{n-1} w_{e_i}\\right) \\times \\gcd(w_{e_1},w_{e_2},\\dots,w_{e_{n-1}})\n$$\n\n其中 $e_1,e_2,\\dots,e_{n-1}$ 为 $T$ 包含的边的编号。\n\n小 W 需要求出 $G$ 的所有生成树 $T$ 的价值之和，他做了很久也没做出来，请你帮帮他。由于答案可能很大，你只需要给出答案对 $998244353$ 取模后的结果。", "inputFormat": "第一行两个正整数 $n,m$，表示 $G$ 的点数和边数。\n\n接下来 $m$ 行，每行三个正整数 $u_i,v_i,w_i$，第 $i$ 行表示一条无向边连接 $u_i$ 号点和 $v_i$ 号点，权值为 $w_i$。\n", "outputFormat": "仅一行一个整数，表示答案对 $998244353$ 取模后的结果。", "hint": "【样例解释 $1$】\n\n$G$ 共有三棵生成树：\n\n$T_1=\\{(1,2),(2,3)\\}$，价值为 $10\\times 2=20$。\n\n$T_2=\\{(1,2),(1,3)\\}$，价值为 $16\\times 4=64$。\n\n$T_3=\\{(1,3),(2,3)\\}$，价值为 $18\\times 6=108$。\n\n总和为 $192$。\n\n【数据规模】\n\n$10\\%$ 的数据满足：$m\\leq 15$。\n\n另有 $20\\%$ 的数据满足：$m \\leq n$。\n\n另有 $20\\%$ 的数据满足：$w_i$ 均相同。\n\n另有 $20\\%$ 的数据满足：$w_i$ 均为质数。\n\n$100\\%$ 的数据满足：$1\\leq n\\leq 30, 1\\leq m \\leq \\frac {n(n-1)}{2}, 1\\leq w_i \\leq 152501$。", "locale": "zh-CN"}}}
{"pid": "P6625", "type": "P", "difficulty": 2, "samples": [["3\n2 -1 2", "4"], ["7\n-4 3 0 7 -3 -5 -3", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2020", "各省省选", "前缀和"], "title": "[省选联考 2020 B 卷] 卡牌游戏", "background": null, "description": "轩轩某天想到了一个卡牌游戏，游戏规则如下：\n\n1. 初始时轩轩的手中有自左向右排成一排的 $n$ 张卡牌，每张卡牌上有一个整数分值。\n2. 接下来，轩轩每次可以选取卡牌序列最左边的连续若干张卡牌（至少 $2$ 张），将它们替换为一张新卡牌。新卡牌将插入到序列的最左端，它的分值为本次操作中被替换掉的卡牌的分值之和。\n3. 初始时轩轩总分为 $0$，每执行一次卡牌替换操作，新卡牌的分值将加到总分中。当序列长度为 $1$ 时游戏结束，轩轩也可以在任意时刻结束游戏。\n\n现在给出序列中各个卡牌的分值，请你来帮助轩轩计算他能够获得的最高总分是多少？", "inputFormat": "第一行一个正整数 $n$，代表卡牌的数目。\n\n接下来一行 $n$ 个以空格分隔的整数，第 $i$ 个数字 $a_i$ 代表自左向右第 $i$ 张卡牌的分值。", "outputFormat": "仅一行一个整数表示答案。", "hint": "**样例解释 1**\n\n最优策略为，首先选择最左侧的两张卡牌，总分增加 $2 + (-1) = 1$。此时轩轩选择的两张卡牌被替换为一张分值为 $1$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $1$ 和 $2$。\n\n接下来选择当前序列中所有卡牌，总分增加 $1 + 2 = 3$，总分为 $4$。此时轩轩选择的两张卡牌被替换为一张分值为 $3$ 的卡牌，且被放入序列最左侧，此时序列中只有一张分值为 $3$ 的卡牌，游戏结束。\n\n**样例解释 2**\n\n\n最优策略为，首先选择最左侧的四张卡牌，总分增加  $(-4) + 3 + 0 + 7 = 6$。此时轩轩选择的四张卡牌被替换为一张分值为 $6$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $6, -3, -5, -3$。\n\n再选择最左侧的两张卡牌，总分增加 $6 + (-3) = 3$，总分为 $9$。此时轩轩选择的两张卡牌被替换为一张分值为 $3$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $3, -5, -3$。\n\n此时无论如何操作均无法使总分继续增大，轩轩选择结束游戏。\n\n**数据范围与约定**\n\n测试点 $1 \\sim6 $ 满足：$1\\le n\\le 16, |a_i| \\le 100$。\n\n测试点 $7 \\sim 12$ 满足：$1\\le n\\le 10^3, |a_i| \\le 100$。\n\n测试点 $13 \\sim 20$ 满足：$1\\le n\\le 10^5, |a_i| \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 B 卷] 卡牌游戏", "background": null, "description": "轩轩某天想到了一个卡牌游戏，游戏规则如下：\n\n1. 初始时轩轩的手中有自左向右排成一排的 $n$ 张卡牌，每张卡牌上有一个整数分值。\n2. 接下来，轩轩每次可以选取卡牌序列最左边的连续若干张卡牌（至少 $2$ 张），将它们替换为一张新卡牌。新卡牌将插入到序列的最左端，它的分值为本次操作中被替换掉的卡牌的分值之和。\n3. 初始时轩轩总分为 $0$，每执行一次卡牌替换操作，新卡牌的分值将加到总分中。当序列长度为 $1$ 时游戏结束，轩轩也可以在任意时刻结束游戏。\n\n现在给出序列中各个卡牌的分值，请你来帮助轩轩计算他能够获得的最高总分是多少？", "inputFormat": "第一行一个正整数 $n$，代表卡牌的数目。\n\n接下来一行 $n$ 个以空格分隔的整数，第 $i$ 个数字 $a_i$ 代表自左向右第 $i$ 张卡牌的分值。", "outputFormat": "仅一行一个整数表示答案。", "hint": "**样例解释 1**\n\n最优策略为，首先选择最左侧的两张卡牌，总分增加 $2 + (-1) = 1$。此时轩轩选择的两张卡牌被替换为一张分值为 $1$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $1$ 和 $2$。\n\n接下来选择当前序列中所有卡牌，总分增加 $1 + 2 = 3$，总分为 $4$。此时轩轩选择的两张卡牌被替换为一张分值为 $3$ 的卡牌，且被放入序列最左侧，此时序列中只有一张分值为 $3$ 的卡牌，游戏结束。\n\n**样例解释 2**\n\n\n最优策略为，首先选择最左侧的四张卡牌，总分增加  $(-4) + 3 + 0 + 7 = 6$。此时轩轩选择的四张卡牌被替换为一张分值为 $6$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $6, -3, -5, -3$。\n\n再选择最左侧的两张卡牌，总分增加 $6 + (-3) = 3$，总分为 $9$。此时轩轩选择的两张卡牌被替换为一张分值为 $3$ 的卡牌，且被放入序列最左侧，此时自左向右卡牌的分值为 $3, -5, -3$。\n\n此时无论如何操作均无法使总分继续增大，轩轩选择结束游戏。\n\n**数据范围与约定**\n\n测试点 $1 \\sim6 $ 满足：$1\\le n\\le 16, |a_i| \\le 100$。\n\n测试点 $7 \\sim 12$ 满足：$1\\le n\\le 10^3, |a_i| \\le 100$。\n\n测试点 $13 \\sim 20$ 满足：$1\\le n\\le 10^5, |a_i| \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P6626", "type": "P", "difficulty": 6, "samples": [["1\n4 2\n1 2\n2 3\n3 4\n1 1\n2 2", "1\n1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "各省省选", "点分治"], "title": "[省选联考 2020 B 卷] 消息传递", "background": "", "description": "给定一个包含 $n$ 个人（从 $1$ 到 $n$ 编号）的树形社交网络。如果一个人在某天收到了一条消息，则下一天他会将消息传递给所有与他有直接社交关系的人。\n\n现在有 $m$ 次询问，每次询问假定第 $0$ 天 $x$ 号人收到了一条消息，请你计算第 $k$ 天时新收到此条消息的人数（即第 $k$ 天前收到过此条消息的人不计入其中）。不同询问间互不影响。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行一个整数 $T$，为测试数据组数。\n\n对于每组测试数据：\n\n第一行两个数 $n,m$ 分别表示树形社交网络的人数和询问的数量。\n\n接下来 $n - 1$ 行，每行两个数 $a, b$，表示 $a$ 号人和 $b$ 号人之间有直接社交关系。保证输入的是树形社交网络。\n\n接下来 $m$ 行，每行两个数 $x, k$，意义见题目描述。\n", "outputFormat": "对于每组测试数据：输出 $m$ 行，每行一个数表示询问的答案。\n", "hint": "**样例解释**\n\n第一个询问，第一天新收到消息的人只有 $2$ 号。\n第二个询问，第一天新收到消息的人有 $1$、$3$ 号，第二天新收到消息的人有 $4$ 号。\n\n**数据范围与约定**\n\n对于测试点 $1$：$1\\le n, m\\le 10$。  \n对于测试点 $2$：$1\\le n, m\\le 100$。  \n对于测试点 $3$：$1\\le n, m\\le 1000$。  \n对于测试点 $4\\sim6$：$1\\le n, m\\le 10^5, k\\le 20$。  \n对于测试点 $7\\sim10$：$1\\le n, m\\le 10^5$。  \n对于所有测试点：$1\\le T\\le 5, 1\\le x\\le n, 0\\le k < n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 B 卷] 消息传递", "background": "", "description": "给定一个包含 $n$ 个人（从 $1$ 到 $n$ 编号）的树形社交网络。如果一个人在某天收到了一条消息，则下一天他会将消息传递给所有与他有直接社交关系的人。\n\n现在有 $m$ 次询问，每次询问假定第 $0$ 天 $x$ 号人收到了一条消息，请你计算第 $k$ 天时新收到此条消息的人数（即第 $k$ 天前收到过此条消息的人不计入其中）。不同询问间互不影响。", "inputFormat": "**本题包含多组测试数据。**\n\n第一行一个整数 $T$，为测试数据组数。\n\n对于每组测试数据：\n\n第一行两个数 $n,m$ 分别表示树形社交网络的人数和询问的数量。\n\n接下来 $n - 1$ 行，每行两个数 $a, b$，表示 $a$ 号人和 $b$ 号人之间有直接社交关系。保证输入的是树形社交网络。\n\n接下来 $m$ 行，每行两个数 $x, k$，意义见题目描述。\n", "outputFormat": "对于每组测试数据：输出 $m$ 行，每行一个数表示询问的答案。\n", "hint": "**样例解释**\n\n第一个询问，第一天新收到消息的人只有 $2$ 号。\n第二个询问，第一天新收到消息的人有 $1$、$3$ 号，第二天新收到消息的人有 $4$ 号。\n\n**数据范围与约定**\n\n对于测试点 $1$：$1\\le n, m\\le 10$。  \n对于测试点 $2$：$1\\le n, m\\le 100$。  \n对于测试点 $3$：$1\\le n, m\\le 1000$。  \n对于测试点 $4\\sim6$：$1\\le n, m\\le 10^5, k\\le 20$。  \n对于测试点 $7\\sim10$：$1\\le n, m\\le 10^5$。  \n对于所有测试点：$1\\le T\\le 5, 1\\le x\\le n, 0\\le k < n$。", "locale": "zh-CN"}}}
{"pid": "P6627", "type": "P", "difficulty": 4, "samples": [["4\n1 -100 -80 37\n2 -3 3\n3 4 64\n1 -10 1024 156", "223 -3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "各省省选", "离散化", "差分"], "title": "[省选联考 2020 B 卷] 幸运数字", "background": null, "description": "为庆祝疫情防治取得重大进展，某商场举行酬宾活动，给顾客一些优惠额度，规则如下：\n\n1. 每位顾客可以任意选择一个整数作为自己的幸运数字。\n2. 每位顾客的初始优惠额度为 $0$ 元。\n3. 商场有 $n$ 个奖励条件，对应不同的奖励额度 $w_i$。\n4. 每位顾客需要依次比对这 $n$ 个奖励条件，如果该位顾客选择的幸运数字满足第 $i$ 个条件，那么他的优惠额度就会**异或**上这个条件所对应的奖励额度。\n\n奖励条件共有三种，假设顾客选择的幸运数字为 $x$：\n\n1. 区间型条件，其有两个参数 $L$ 与 $R$，满足条件为 $L \\le x\\le R$。保证 $L < R$。\n2. 相等型条件，其有一个参数 $A$，满足条件为 $x = A$。\n3. 不等型条件，其有一个参数 $B$，满足条件为 $x \\neq B$。\n\n小炎同学获知了所有奖励条件的信息，他希望知道一位顾客能够得到的最大优惠额度以及对应的幸运数字是多少，请你帮他计算。", "inputFormat": "第一行包含一个正整数 $n$，代表奖励条件的数量。\n\n接下来 $n$ 行，每行三个或四个整数表示一个奖励条件。每行第一个整数 $t_i$ 代表奖励条件的类型：\n\n1. $t_i = 1$ 则该条件是区间型条件，接下来三个整数，分别代表 $L, R, w_i$。\n2. $t_i = 2$ 则该条件是相等型条件，接下来两个整数，分别代表 $A, w_i$。\n3. $t_i = 3$ 则该条件是不等型条件，接下来两个整数，分别代表 $B, w_i$。", "outputFormat": "输出一行两个整数，第一个数代表能够得到的最大优惠额度，第二个数代表对应的幸运数字。\n\n如果有多个幸运数字能够得到最大优惠额度，输出绝对值最小的那个。如果还有多个，则输出值最大的。", "hint": "**样例解释**\n\n幸运数字 $-3$ 满足奖励条件 $2, 3, 4$，奖励额度为 $3\\oplus 64\\oplus 156 = 223$，其中 $\\oplus$ 表示异或运算。\n\n**数据范围与约定**\n\n$20\\%$ 的数据满足：$n, |L|, |R|, |A|, |B| \\le 1000$。  \n$40\\%$ 的数据满足：$n\\le 1000$。  \n$100\\%$ 的数据满足：$1\\le n\\le 10^5, |L|, |R|, |A|, |B|\\le 10^9, 1\\le w_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 B 卷] 幸运数字", "background": null, "description": "为庆祝疫情防治取得重大进展，某商场举行酬宾活动，给顾客一些优惠额度，规则如下：\n\n1. 每位顾客可以任意选择一个整数作为自己的幸运数字。\n2. 每位顾客的初始优惠额度为 $0$ 元。\n3. 商场有 $n$ 个奖励条件，对应不同的奖励额度 $w_i$。\n4. 每位顾客需要依次比对这 $n$ 个奖励条件，如果该位顾客选择的幸运数字满足第 $i$ 个条件，那么他的优惠额度就会**异或**上这个条件所对应的奖励额度。\n\n奖励条件共有三种，假设顾客选择的幸运数字为 $x$：\n\n1. 区间型条件，其有两个参数 $L$ 与 $R$，满足条件为 $L \\le x\\le R$。保证 $L < R$。\n2. 相等型条件，其有一个参数 $A$，满足条件为 $x = A$。\n3. 不等型条件，其有一个参数 $B$，满足条件为 $x \\neq B$。\n\n小炎同学获知了所有奖励条件的信息，他希望知道一位顾客能够得到的最大优惠额度以及对应的幸运数字是多少，请你帮他计算。", "inputFormat": "第一行包含一个正整数 $n$，代表奖励条件的数量。\n\n接下来 $n$ 行，每行三个或四个整数表示一个奖励条件。每行第一个整数 $t_i$ 代表奖励条件的类型：\n\n1. $t_i = 1$ 则该条件是区间型条件，接下来三个整数，分别代表 $L, R, w_i$。\n2. $t_i = 2$ 则该条件是相等型条件，接下来两个整数，分别代表 $A, w_i$。\n3. $t_i = 3$ 则该条件是不等型条件，接下来两个整数，分别代表 $B, w_i$。", "outputFormat": "输出一行两个整数，第一个数代表能够得到的最大优惠额度，第二个数代表对应的幸运数字。\n\n如果有多个幸运数字能够得到最大优惠额度，输出绝对值最小的那个。如果还有多个，则输出值最大的。", "hint": "**样例解释**\n\n幸运数字 $-3$ 满足奖励条件 $2, 3, 4$，奖励额度为 $3\\oplus 64\\oplus 156 = 223$，其中 $\\oplus$ 表示异或运算。\n\n**数据范围与约定**\n\n$20\\%$ 的数据满足：$n, |L|, |R|, |A|, |B| \\le 1000$。  \n$40\\%$ 的数据满足：$n\\le 1000$。  \n$100\\%$ 的数据满足：$1\\le n\\le 10^5, |L|, |R|, |A|, |B|\\le 10^9, 1\\le w_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P6628", "type": "P", "difficulty": 6, "samples": [["4 3 1\n1 2\n4 2\n3 1", "6 7 8 7"], ["6 0 2", "1 0 1 2 3 4"], ["5 4 1\n1 2\n3 4\n4 5\n3 5", "8 7 6 7 8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2020", "并查集", "各省省选", "生成树", "欧拉回路"], "title": "[省选联考 2020 B 卷] 丁香之路", "background": "", "description": "春暖花开，万物复苏，随着疫情的逐渐过去，Yazid 带着他的 $n$ 个好朋友来到 T 大校园参观游览。方便起见，我们将他们从 $1$ 至 $n$ 编号。\n\nT 大校园的版图可以抽象成一张 $n$ 个顶点的无向图（顶点编号从 $1$ 至 $n$）。且对于任意两个不同顶点，设它们的编号分别为 $i, j(i\\neq j)$，则它们之间有一条需要花费 $|i - j|$ 单位时间通过的无向边。\n\n丁香花是 T 大的校花之一。时下正值丁香花盛开之际，校园内的 $m$ 条道路上都开有丁香花。Yazid 的朋友们对丁香花十分感兴趣，因此他们都希望遍历**所有**开有丁香花的 $m$ 条道路。\n\nYazid 的朋友们从顶点 $s$ 出发。其中，第 $i$ 个朋友希望以顶点 $i$ 为终点终止他的参观。与此同时，如上面所述，每个朋友都必须经过开着丁香花的 $m$ 条道路各至少一次。\n\nYazid 的朋友不想太过疲累，因此他们希望花尽可能少的时间来完成他们的目标。\n\n请你计算 Yazid 的朋友们分别需要花费多少单位时间完成他们的目标。", "inputFormat": "第一行 $3$ 个非负整数 $n, m, s$。保证 $1\\le s\\le n$；保证 $m\\le \\frac {n(n-1)}2$。\n\n第 $2$ 行至第 $m+1$ 行，每行 $2$ 个整数 $u, v$，描述一条开有丁香花的，连接顶点 $u, v$ 的无向边。保证 $1\\le u, v\\le n$ 且 $u\\neq v$；保证每条无向边至多被描述一次。\n\n对于输入的所有行，用单个空格将行内的多个整数隔开。", "outputFormat": "输出一行 $n$ 个用单个空格隔开的整数，其中第 $i$ 个整数描述 Yazid 的第 $i$ 个朋友完成目标所需花费的最少时间。\n", "hint": "**样例解释 1**\n\n第 $1$ 个朋友的一种最优路线是从 $1$ 出发依次途径 $2, 4, 3$，最终回到 $1$，消耗 $|1-2|+|2-4|+|4-3|+|3-1| = 6$ 单位时间。\n\n第 $2$ 个朋友的一种最优路线是从 $1$ 出发依次途径 $2, 4, 3, 1$，最终来到 $2$，消耗 $7$ 单位时间。\n\n第 $3$ 个朋友的一种最优路线是从 $1$ 出发依次途径 $2, 4, 1$，最终来到 $3$，消耗 $8$ 单位时间。\n\n第 $4$ 个朋友的一种最优路线是从 $1$ 出发依次途径 $3, 1, 2$，最终来到 $4$，消耗 $7$ 单位时间。\n\n**样例解释 2**\n\n由于 $m = 0$，没有必经之路，因此每个朋友直接通过一条边直达目的地即可。\n\n\n**数据范围与约定**\n\n| 测试点编号  |  $n=$  | 其他特殊限制 |\n| --------- | ---- | ---------- |\n|  $1\\sim 3$  |  $50$  |    $m=9$     |\n|  $4\\sim 6$  |  $50$  |    $m=15$    |\n|  $7\\sim 8$  |  $50$  |              |\n| $9\\sim 10$  | $300$  |              |\n|    $11$     | $1600$ |    $m=0$     |\n| $12\\sim 14$ | $1600$ |    $m=1$     |\n| $15\\sim 17$ | $1600$ |              |\n| $18\\sim 20$ | $2500$ |              |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2020 B 卷] 丁香之路", "background": "", "description": "春暖花开，万物复苏，随着疫情的逐渐过去，Yazid 带着他的 $n$ 个好朋友来到 T 大校园参观游览。方便起见，我们将他们从 $1$ 至 $n$ 编号。\n\nT 大校园的版图可以抽象成一张 $n$ 个顶点的无向图（顶点编号从 $1$ 至 $n$）。且对于任意两个不同顶点，设它们的编号分别为 $i, j(i\\neq j)$，则它们之间有一条需要花费 $|i - j|$ 单位时间通过的无向边。\n\n丁香花是 T 大的校花之一。时下正值丁香花盛开之际，校园内的 $m$ 条道路上都开有丁香花。Yazid 的朋友们对丁香花十分感兴趣，因此他们都希望遍历**所有**开有丁香花的 $m$ 条道路。\n\nYazid 的朋友们从顶点 $s$ 出发。其中，第 $i$ 个朋友希望以顶点 $i$ 为终点终止他的参观。与此同时，如上面所述，每个朋友都必须经过开着丁香花的 $m$ 条道路各至少一次。\n\nYazid 的朋友不想太过疲累，因此他们希望花尽可能少的时间来完成他们的目标。\n\n请你计算 Yazid 的朋友们分别需要花费多少单位时间完成他们的目标。", "inputFormat": "第一行 $3$ 个非负整数 $n, m, s$。保证 $1\\le s\\le n$；保证 $m\\le \\frac {n(n-1)}2$。\n\n第 $2$ 行至第 $m+1$ 行，每行 $2$ 个整数 $u, v$，描述一条开有丁香花的，连接顶点 $u, v$ 的无向边。保证 $1\\le u, v\\le n$ 且 $u\\neq v$；保证每条无向边至多被描述一次。\n\n对于输入的所有行，用单个空格将行内的多个整数隔开。", "outputFormat": "输出一行 $n$ 个用单个空格隔开的整数，其中第 $i$ 个整数描述 Yazid 的第 $i$ 个朋友完成目标所需花费的最少时间。\n", "hint": "**样例解释 1**\n\n第 $1$ 个朋友的一种最优路线是从 $1$ 出发依次途径 $2, 4, 3$，最终回到 $1$，消耗 $|1-2|+|2-4|+|4-3|+|3-1| = 6$ 单位时间。\n\n第 $2$ 个朋友的一种最优路线是从 $1$ 出发依次途径 $2, 4, 3, 1$，最终来到 $2$，消耗 $7$ 单位时间。\n\n第 $3$ 个朋友的一种最优路线是从 $1$ 出发依次途径 $2, 4, 1$，最终来到 $3$，消耗 $8$ 单位时间。\n\n第 $4$ 个朋友的一种最优路线是从 $1$ 出发依次途径 $3, 1, 2$，最终来到 $4$，消耗 $7$ 单位时间。\n\n**样例解释 2**\n\n由于 $m = 0$，没有必经之路，因此每个朋友直接通过一条边直达目的地即可。\n\n\n**数据范围与约定**\n\n| 测试点编号  |  $n=$  | 其他特殊限制 |\n| --------- | ---- | ---------- |\n|  $1\\sim 3$  |  $50$  |    $m=9$     |\n|  $4\\sim 6$  |  $50$  |    $m=15$    |\n|  $7\\sim 8$  |  $50$  |              |\n| $9\\sim 10$  | $300$  |              |\n|    $11$     | $1600$ |    $m=0$     |\n| $12\\sim 14$ | $1600$ |    $m=1$     |\n| $15\\sim 17$ | $1600$ |              |\n| $18\\sim 20$ | $2500$ |              |", "locale": "zh-CN"}}}
{"pid": "P6629", "type": "P", "difficulty": 7, "samples": [["11 5\naabaabaaaab\n1 11\n1 6\n7 10\n5 5\n3 8\n", "5\n2\n2\n0\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选", "浙江", "O2优化"], "title": "[ZJOI2020] 字符串", "background": "3s，512MB", "description": "Bob 喜欢字符串。\n\nBob 觉得，重复两遍的字符串是优美的，例如，`aa`，`sese`，`abcabc`，`baabaa`，`abababab`是优\n美的串，而 `ab`，`aadead`，`sesese`，`abba` 不是。更具体地说，如果一个字符串 $S$ 能够被写成两个相同的字符串前后拼接的形式，即存在字符串 $P$ 使得 $S=PP$，那么 $S$ 就是优美的。\n\nBob 有一个长度为 $n$ 的字符串 $T=T_1T_2 \\cdots T_n$。现在他想知道，给定 $T$ 的一个子串 $Q=T[l \\cdots r]$，这个子串 $Q$ 内一共包含多少种本质不同的优美的串作为子串。如果两个串相同，但是出现的位置不同，那么这两个串不是本质不同。\n\nBob 一共有 $q$ 组不同的询问，你需要快速计算出答案。", "inputFormat": "第一行输入两个整数 $n, q$。第二行输入一个只包含小写字母 $a$ 和 $b$ 的字符串 $T$。\n\n接下来 $q$ 行，每行输入两个整数 $l, r$，表示一组询问。", "outputFormat": "输出 $q$ 行，每行一个整数表示答案。\n", "hint": "样例解释 $1$：\n\n$|T|$ 有 `aa`，`aaaa`，`abaaba`，`aabaab`，`baabaa` 这些本质不同的优美的串。\n\n样例输入输出 2 见附件。\n\n对于前 $10\\%$ 的数据，$n \\leq 100$。\n\n对于前 $20\\%$ 的数据，$n \\leq 500$。\n\n对于前 $40\\%$ 的数据，$n \\leq 5000$。\n\n对于另外 $20\\%$ 的数据，保证 $T$ 中所有的优美的串的个数不超过 $10^6$，这里位置不同的串被视为不同的。\n\n对于另外 $20\\%$ 的数据，$q = 1$。\n\n对于 $100\\%$ 的数据，$1 \\leq n, q \\leq 200000,1 \\leq l \\leq r \\leq n$，$T$ 只包含小写字母 `a` 和 `b`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2020] 字符串", "background": "3s，512MB", "description": "Bob 喜欢字符串。\n\nBob 觉得，重复两遍的字符串是优美的，例如，`aa`，`sese`，`abcabc`，`baabaa`，`abababab`是优\n美的串，而 `ab`，`aadead`，`sesese`，`abba` 不是。更具体地说，如果一个字符串 $S$ 能够被写成两个相同的字符串前后拼接的形式，即存在字符串 $P$ 使得 $S=PP$，那么 $S$ 就是优美的。\n\nBob 有一个长度为 $n$ 的字符串 $T=T_1T_2 \\cdots T_n$。现在他想知道，给定 $T$ 的一个子串 $Q=T[l \\cdots r]$，这个子串 $Q$ 内一共包含多少种本质不同的优美的串作为子串。如果两个串相同，但是出现的位置不同，那么这两个串不是本质不同。\n\nBob 一共有 $q$ 组不同的询问，你需要快速计算出答案。", "inputFormat": "第一行输入两个整数 $n, q$。第二行输入一个只包含小写字母 $a$ 和 $b$ 的字符串 $T$。\n\n接下来 $q$ 行，每行输入两个整数 $l, r$，表示一组询问。", "outputFormat": "输出 $q$ 行，每行一个整数表示答案。\n", "hint": "样例解释 $1$：\n\n$|T|$ 有 `aa`，`aaaa`，`abaaba`，`aabaab`，`baabaa` 这些本质不同的优美的串。\n\n样例输入输出 2 见附件。\n\n对于前 $10\\%$ 的数据，$n \\leq 100$。\n\n对于前 $20\\%$ 的数据，$n \\leq 500$。\n\n对于前 $40\\%$ 的数据，$n \\leq 5000$。\n\n对于另外 $20\\%$ 的数据，保证 $T$ 中所有的优美的串的个数不超过 $10^6$，这里位置不同的串被视为不同的。\n\n对于另外 $20\\%$ 的数据，$q = 1$。\n\n对于 $100\\%$ 的数据，$1 \\leq n, q \\leq 200000,1 \\leq l \\leq r \\leq n$，$T$ 只包含小写字母 `a` 和 `b`。", "locale": "zh-CN"}}}
{"pid": "P6630", "type": "P", "difficulty": 6, "samples": [["3 1\n1 2\n", "166374060\n"], ["5 4\n2 1 3 4", "320443836"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选", "浙江", "O2优化"], "title": "[ZJOI2020] 传统艺能", "background": "4s，512MB", "description": "Bob 喜欢线段树。\n\n众所周知，ZJOI 的第二题有很多线段树。\n\nBob 有一棵根为 $[1, n]$ 的广义线段树。Bob 需要在这个线段树上执行 $k$ 次区间懒标记操作，每次操作会等概率地从 $[1, n]$ 的所有 $\\dfrac{n(n+1)}{2}$ 个子区间中随机选择一个。对于所有在该次操作中被访问到的非叶子节点，Bob 会将这个点上的标记下推；而对于所有叶子节点（即没有继续递归的节点），Bob 会给这个点打上标记。\n\nBob 想知道，$k$ 次操作之后，有标记的节点的期望数量是多少。\n\n【具体定义】\n\n线段树：线段树是一棵每个节点上都记录了一个线段的二叉树。根节点记录的线段是 $[1, n]$。对于每个节点，若它记录的线段是 $[l, r]$ 且 $l \\neq r$，取 $m = \\lfloor \\dfrac{l+r}{2} \\rfloor$，则它的左右儿子节点记录的线段分别是 $[l, m]$ 和 $[m + 1, r]$；若 $l = r$，则它是叶子节点。\n\n广义线段树：在广义的线段树中，$m$ 不要求恰好等于区间的中点，但是 $m$ 还是必须满足 $l \\leq m < r$ 的。不难发现在广义的线段树中，树的深度可以达到 $O(n)$ 级别。\n\n线段树的核心是懒标记，下面是一个带懒标记的广义线段树的伪代码，其中 `tag` 数组为懒标记：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3230chjw.png)\n\n注意，在处理叶子节点时，一旦他获得了一个标记，那么这个标记会一直存在。\n\n你也可以这么理解题意：有一棵广义线段树，每个节点有一个 $m$ 值。一开始 `tag` 数组均为 $0$，Bob 会执行 $k$ 次操作，每次操作等概率随机选择区间 $[l, r]$ 并执行 `MODIFY(root,1,n,l,r);`。\n最后所有 `Node` 中满足 `tag[Node]=1` 的期望数量就是需要求的值。\n", "inputFormat": "第一行输入两个整数 $n, k$。\n\n接下来输入一行包含 $n - 1$ 个整数 $a_i$：按照先序遍历的顺序，给出广义线段树上所有非叶子节点的划分位置 $m$。你也可以理解为从只有 $[1, n]$ 根节点开始，每次读入一个整数后，就将当前包含这个整数的节点做一次拆分，最后获得一棵有 $2n - 1$ 个节点的广义线段树。\n\n保证给定的 $n - 1$ 个整数是一个排列，不难发现通过这些信息就能唯一确定一棵 $[1, n]$ 上的广义线段树。\n", "outputFormat": "输出一行一个整数，代表期望数量对 $p = 998244353$ 取模后的结果。即，如果期望数量的最简分数表示为 $\\dfrac{a}{b}$，你需要输出一个整数 $c$ 满足 $c \\times b \\equiv a \\pmod p$。", "hint": "样例输入输出 $3$ 见下发文件。\n\n样例解释 $1$\n\n输入的线段树为 $[1, 3], [1, 1], [2, 3], [2, 2], [3, 3]$。\n\n若操作为 $[1, 1]/[2, 2]/[3, 3]/[2, 3]/[1, 3]$，标记个数为 $1$。若操作为 $[1, 2]$，标记个数为 $2$。故答案为 $\\dfrac{7}{6}$。\n\n| 测试点 | $n$ | $k$ | 其他约定 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leq 10$ | $\\leq 4$ | 无 |\n| $2$ | $\\leq 10$ | $\\leq 100$ | 无 |\n| $3$ | $\\leq 5$ | 无 | 无 |\n| $4$ | 无 | $=1$ | 无 |\n| $5$ | $=32$ | 无 | 输入的线段树为完全二叉树 |\n| $6$ | $=64$ | 无 | 输入的线段树为完全二叉树 |\n| $7$ | $=4096$ | 无 | 输入的线段树为完全二叉树 |\n| $8$ | $\\leq 5000$ | 无 | 每个 $m$ 均在 $[l, r - 1]$ 内均匀随机 |\n| $9$ | $\\leq 100000$ | 无 | 无 |\n| $10$ | 无 | 无 | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 200000, 1 \\leq k \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2020] 传统艺能", "background": "4s，512MB", "description": "Bob 喜欢线段树。\n\n众所周知，ZJOI 的第二题有很多线段树。\n\nBob 有一棵根为 $[1, n]$ 的广义线段树。Bob 需要在这个线段树上执行 $k$ 次区间懒标记操作，每次操作会等概率地从 $[1, n]$ 的所有 $\\dfrac{n(n+1)}{2}$ 个子区间中随机选择一个。对于所有在该次操作中被访问到的非叶子节点，Bob 会将这个点上的标记下推；而对于所有叶子节点（即没有继续递归的节点），Bob 会给这个点打上标记。\n\nBob 想知道，$k$ 次操作之后，有标记的节点的期望数量是多少。\n\n【具体定义】\n\n线段树：线段树是一棵每个节点上都记录了一个线段的二叉树。根节点记录的线段是 $[1, n]$。对于每个节点，若它记录的线段是 $[l, r]$ 且 $l \\neq r$，取 $m = \\lfloor \\dfrac{l+r}{2} \\rfloor$，则它的左右儿子节点记录的线段分别是 $[l, m]$ 和 $[m + 1, r]$；若 $l = r$，则它是叶子节点。\n\n广义线段树：在广义的线段树中，$m$ 不要求恰好等于区间的中点，但是 $m$ 还是必须满足 $l \\leq m < r$ 的。不难发现在广义的线段树中，树的深度可以达到 $O(n)$ 级别。\n\n线段树的核心是懒标记，下面是一个带懒标记的广义线段树的伪代码，其中 `tag` 数组为懒标记：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3230chjw.png)\n\n注意，在处理叶子节点时，一旦他获得了一个标记，那么这个标记会一直存在。\n\n你也可以这么理解题意：有一棵广义线段树，每个节点有一个 $m$ 值。一开始 `tag` 数组均为 $0$，Bob 会执行 $k$ 次操作，每次操作等概率随机选择区间 $[l, r]$ 并执行 `MODIFY(root,1,n,l,r);`。\n最后所有 `Node` 中满足 `tag[Node]=1` 的期望数量就是需要求的值。\n", "inputFormat": "第一行输入两个整数 $n, k$。\n\n接下来输入一行包含 $n - 1$ 个整数 $a_i$：按照先序遍历的顺序，给出广义线段树上所有非叶子节点的划分位置 $m$。你也可以理解为从只有 $[1, n]$ 根节点开始，每次读入一个整数后，就将当前包含这个整数的节点做一次拆分，最后获得一棵有 $2n - 1$ 个节点的广义线段树。\n\n保证给定的 $n - 1$ 个整数是一个排列，不难发现通过这些信息就能唯一确定一棵 $[1, n]$ 上的广义线段树。\n", "outputFormat": "输出一行一个整数，代表期望数量对 $p = 998244353$ 取模后的结果。即，如果期望数量的最简分数表示为 $\\dfrac{a}{b}$，你需要输出一个整数 $c$ 满足 $c \\times b \\equiv a \\pmod p$。", "hint": "样例输入输出 $3$ 见下发文件。\n\n样例解释 $1$\n\n输入的线段树为 $[1, 3], [1, 1], [2, 3], [2, 2], [3, 3]$。\n\n若操作为 $[1, 1]/[2, 2]/[3, 3]/[2, 3]/[1, 3]$，标记个数为 $1$。若操作为 $[1, 2]$，标记个数为 $2$。故答案为 $\\dfrac{7}{6}$。\n\n| 测试点 | $n$ | $k$ | 其他约定 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $\\leq 10$ | $\\leq 4$ | 无 |\n| $2$ | $\\leq 10$ | $\\leq 100$ | 无 |\n| $3$ | $\\leq 5$ | 无 | 无 |\n| $4$ | 无 | $=1$ | 无 |\n| $5$ | $=32$ | 无 | 输入的线段树为完全二叉树 |\n| $6$ | $=64$ | 无 | 输入的线段树为完全二叉树 |\n| $7$ | $=4096$ | 无 | 输入的线段树为完全二叉树 |\n| $8$ | $\\leq 5000$ | 无 | 每个 $m$ 均在 $[l, r - 1]$ 内均匀随机 |\n| $9$ | $\\leq 100000$ | 无 | 无 |\n| $10$ | 无 | 无 | 无 |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 200000, 1 \\leq k \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P6631", "type": "P", "difficulty": 7, "samples": [["3\n5\n2 1 2 1 2\n8\n1000000000 1000000000 0 1000000000 1000000000 0 1000000000 1000000000\n13\n1 1 4 5 1 4 1 9 1 9 8 1 0", "2\n3000000000\n19"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选", "浙江", "O2优化"], "title": "[ZJOI2020] 序列", "background": "1s，512MB", "description": "Bob 喜欢序列。\n\n有一个长度为 $n$ 的非负整数序列 $a_1, a_2,\\cdots, a_n$。每一步你可以从以下三种操作中选择一种执行：\n\n- 选择一个区间 $[l, r]$，将下标在这个区间里的所有数都减 $1$。\n\n- 选择一个区间 $[l, r]$，将下标在这个区间里且下标为奇数的所有数都减 $1$。\n\n- 选择一个区间 $[l, r]$，将下标在这个区间里且下标为偶数的所有数都减 $1$。\n\n求最少需要多少步才能将序列中的所有数都变成 $0$。", "inputFormat": "第一行输入一个整数 $T$，表示数据组数。\n\n对于每组数据，第一行输入一个整数 $n$，接下来一行输入 $n$ 个非负整数 $a_1, a_2,\\dots, a_n$。", "outputFormat": "输出 $T$ 行，对于每组测试数据，输出一行一个整数，表示答案。", "hint": "样例解释 $1$\n\n第一组数据：$21212 \\stackrel{1}{\\longrightarrow} 1111 1 \\stackrel{1}{\\longrightarrow} 00000$\n\n第三组数据：$1145141919810 \\stackrel{1}{\\longrightarrow} 0034030808700 \\stackrel{8}{\\longrightarrow} 0031000000700 \\stackrel{10}{\\longrightarrow}0000000000000$\n\n样例输入输出 $2$ 见下发文件\n\n对于前 $10\\%$ 的数据，$n \\leq 5, a_i \\leq 10$。\n\n对于前 $30\\%$ 的数据，$n \\leq 50, a_i \\leq 50$。\n\n对于前 $50\\%$ 的数据，$n \\leq 200, a_i \\leq 200$。\n\n对于前 $60\\%$ 的数据，$n \\leq 200, a_i \\leq 10^9$。\n\n对于前 $70\\%$ 的数据，$n \\leq 1000, a_i \\leq 10^9$。\n\n对于前 $90\\%$ 的数据，$n \\leq 10000, a_i \\leq 10^9$。\n\n对于 100% 的数据，$1 \\leq n \\leq 100000, 0 \\leq a_i \\leq 10^9, 1 \\leq T \\leq 10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2020] 序列", "background": "1s，512MB", "description": "Bob 喜欢序列。\n\n有一个长度为 $n$ 的非负整数序列 $a_1, a_2,\\cdots, a_n$。每一步你可以从以下三种操作中选择一种执行：\n\n- 选择一个区间 $[l, r]$，将下标在这个区间里的所有数都减 $1$。\n\n- 选择一个区间 $[l, r]$，将下标在这个区间里且下标为奇数的所有数都减 $1$。\n\n- 选择一个区间 $[l, r]$，将下标在这个区间里且下标为偶数的所有数都减 $1$。\n\n求最少需要多少步才能将序列中的所有数都变成 $0$。", "inputFormat": "第一行输入一个整数 $T$，表示数据组数。\n\n对于每组数据，第一行输入一个整数 $n$，接下来一行输入 $n$ 个非负整数 $a_1, a_2,\\dots, a_n$。", "outputFormat": "输出 $T$ 行，对于每组测试数据，输出一行一个整数，表示答案。", "hint": "样例解释 $1$\n\n第一组数据：$21212 \\stackrel{1}{\\longrightarrow} 1111 1 \\stackrel{1}{\\longrightarrow} 00000$\n\n第三组数据：$1145141919810 \\stackrel{1}{\\longrightarrow} 0034030808700 \\stackrel{8}{\\longrightarrow} 0031000000700 \\stackrel{10}{\\longrightarrow}0000000000000$\n\n样例输入输出 $2$ 见下发文件\n\n对于前 $10\\%$ 的数据，$n \\leq 5, a_i \\leq 10$。\n\n对于前 $30\\%$ 的数据，$n \\leq 50, a_i \\leq 50$。\n\n对于前 $50\\%$ 的数据，$n \\leq 200, a_i \\leq 200$。\n\n对于前 $60\\%$ 的数据，$n \\leq 200, a_i \\leq 10^9$。\n\n对于前 $70\\%$ 的数据，$n \\leq 1000, a_i \\leq 10^9$。\n\n对于前 $90\\%$ 的数据，$n \\leq 10000, a_i \\leq 10^9$。\n\n对于 100% 的数据，$1 \\leq n \\leq 100000, 0 \\leq a_i \\leq 10^9, 1 \\leq T \\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P6632", "type": "P", "difficulty": 7, "samples": [["5\n6 5 2 2\n1 2 0 \n2 3 0 \n2 4 0 \n3 5 0 \n4 6 0 \n5 6 \n3 4 \n6 5 2 2 \n1 2 1 \n2 3 0 \n2 4 0 \n3 5 0 \n4 6 0 \n5 6 \n3 4 \n5 4 2 2 \n1 2 1 \n1 3 1 \n2 4 0 \n3 5 0\n4 5 \n2 3 \n8 8 1 2 \n1 2 2 \n2 3 1 \n3 4 0 \n4 5 0 \n5 6 0 \n6 7 0 \n7 2 1 \n5 8 0 \n8 \n3 7 \n8 8 1 2 \n1 2 3 \n2 3 0 \n3 4 0 \n4 5 0 \n5 6 0 \n6 7 0 \n7 2 0 \n5 8 0 \n8 \n3 7", "1\n0\n0\n0\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选", "浙江"], "title": "[ZJOI2020] 染色游戏", "background": "", "description": "Alice 和 Bob 在玩一个染色游戏。游戏在一张 $N$ 个点 $M(N −1 \\le M \\le N)$ 条边的连通图上进行，Bob 想要围住 Alice，而 Alice 想要逃出 Bob 的包围。\n\n游戏开始时，Alice 将 $1$ 号点涂成了黑色表示占领了 $1$ 号点，Bob 将点集 $S$ 中的所有点涂成了白色表示占领了这 $|S|$ 个点，保证 $1$ 不在 $S$ 中。接下来两个人轮流进行操作，由 Alice 先 手，每轮中轮到的玩家可以从一个被自己占领的点出发 (对于 Alice 为黑色点对于 Bob 为白色 点)，选择一个相邻且未被染色的点，占领该点并染上自己的颜色。如果不存在可以染色的点， 那么这位玩家必须跳过这个回合。当所有点都被染完色时，游戏结束。\n\nAlice 和 Bob 约定了一个图中的非空点集 $T$，如果游戏结束时 $T$ 中的点全都涂成白色，则代表 Bob 成功围住了 Alice，Bob 获胜。反之一定存在一个 $T$ 中的点被涂成黑色，那么 Alice 获胜。注意这里的 $T$ 可能会包含 $S$ 中的点和 $1$ 号点。\n\nAlice 和 Bob 都会使用最优策略。Bob 注意到，在有些局面下，Alice 优势很大，如果能让 Alice 主动跳过 Alice 的一些行动回合来获得一个更加公平的局面，这个游戏会更有可玩性。 Bob 想知道，如果 Alice 跳过前 $k$ 个回合之后自己能够获胜，那么这个 $k$ 的最小值是多少。 Alice 只会跳过 Alice 的前 $k$ 个回合，并且在剩下的回合中采用最优策略，即你可以理解为 Bob 在 Alice 的第一回合行动之前额外行动了 $k$ 个回合。注意如果 Bob 在 Alice 跳过的一个回合中 没有合法行动，那么 Bob 仍需按照规则跳过自己的回合。如果在原图上就是 Bob 获胜那么输出 $0$。如果 $k = 1000000$ 时 Bob 也不能取胜，则输出 $1000000$。\n\n由于这个图可能很大，我们用如下的方式生成。\n\n- 首先生成一个含有标号为 $1$ 到 $n$ 一共 $n$ 个点的空图。 \n- 接下来加入 $m$ 条链，第 $i$ 条链记作 $(u_i,v_i,l_i)$，其中 $1 \\le u_i,v_i \\le n$ 且 $u_i \\neq v_i$。 \n\t- 首先我们加入 $l_i$ 个点，记作 $x_1^i,x_2^i,...,x_ {l_i}^i$。 \n\t- 然后在 $(u_i,x_1^i),(x_1^i,x_2^i),(x_2^i,x_3^i),$ $...,(x_{l_i−1}^i,x_{l_i}^i),(x_{l_i}^i,v_i)$ 之间连上无向边。 \n\t- 在这次操作之后，本轮中新加入的 $l_i$ 个点不会再与其他的点之间连边，即不同的链中的 $x_1^i ... x_{l_i}^i$ 均为互不相同的点。特别地，如果 $l = 0$，那么就不添加新点，直接在 $(u_i,v_i)$ 之间连上无向边。\n    \n保证 $S$ 集合以及 $T$ 集合的点均为一开始生成的 $n$ 个点之一。", "inputFormat": "第一行输入一个整数 $C$，表示数据组数。\n对于每组数据：\n\n- 第一行输入四个整数 $n,m,|S|,|T|$,$(1 \\le|S|\\le n−1,1 \\le|T|\\le n,n−1 \\le m \\le n)$。 \n- 接下来 $m$ 行每行输入 $3$ 个非负整数 $u_i,v_i,l_i$,$(1 \\le u_i,v_i \\le n,0 \\le l_i \\le 10^6)$，表示题面中的第 $i$ 条链。\n- 接下来一行输入 $|S|$ 个数 $s_1 ... s_{|S|}$ 表示 $S$ 集合中的所有元素 ($2 \\le s_i \\le n$ 且不重复)。 \n- 接下来一行输入 $|T|$ 个数 $t_1 ... t_{|T|}$ 表示 $T$ 集合中的所有元素 ($1 \\le t_i \\le n$ 且不重复)。\n\n即每组数据按照如下格式输入：\n\n```\nn m |S||T| \nu_1 v_1 l_1 \nu_2 v_2 l_2 \n···\nu_m v_m l_m \ns_1 s_2 ··· s_|S| \nt_1 t_2 ··· t_|T|\n```\n\n保证 $u_i \\neq v_i$（即没有自环），保证没有相同的 $(u_i,v_i)$ 对（即没有重边），保证给出的图是一个连通图。", "outputFormat": "输出 $C$ 行，对于每组测试数据，输出为了让 Bob 取胜 Alice 至少要跳过的回合数 $k$。如果在原图上就是 Bob 获胜那么输出 $0$。如果 $k = 1000000$ 时 Bob 也不能取胜，则输出 $1000000$。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/ltfz1gns.png?x-oss-process=image/resize,m_lfit,w_500)\n\n对于 $100\\%$ 的数据，$m = n$ 或 $n−1$，$3 \\le n \\le 500$，$C = 10000$，$0 \\le l_i \\le 10^6$，$1 \\le|S|\\le n−1,1 \\le|T|\\le n$ 且保证图中不存在点数（只计算前 $n$ 个点的数量）大于 $100$ 的环，每个测试点中最多只有 $10$ 组数据满足 $n > 50$，最多只有 $1000$ 组数据满足 $n > 20$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2020] 染色游戏", "background": "", "description": "Alice 和 Bob 在玩一个染色游戏。游戏在一张 $N$ 个点 $M(N −1 \\le M \\le N)$ 条边的连通图上进行，Bob 想要围住 Alice，而 Alice 想要逃出 Bob 的包围。\n\n游戏开始时，Alice 将 $1$ 号点涂成了黑色表示占领了 $1$ 号点，Bob 将点集 $S$ 中的所有点涂成了白色表示占领了这 $|S|$ 个点，保证 $1$ 不在 $S$ 中。接下来两个人轮流进行操作，由 Alice 先 手，每轮中轮到的玩家可以从一个被自己占领的点出发 (对于 Alice 为黑色点对于 Bob 为白色 点)，选择一个相邻且未被染色的点，占领该点并染上自己的颜色。如果不存在可以染色的点， 那么这位玩家必须跳过这个回合。当所有点都被染完色时，游戏结束。\n\nAlice 和 Bob 约定了一个图中的非空点集 $T$，如果游戏结束时 $T$ 中的点全都涂成白色，则代表 Bob 成功围住了 Alice，Bob 获胜。反之一定存在一个 $T$ 中的点被涂成黑色，那么 Alice 获胜。注意这里的 $T$ 可能会包含 $S$ 中的点和 $1$ 号点。\n\nAlice 和 Bob 都会使用最优策略。Bob 注意到，在有些局面下，Alice 优势很大，如果能让 Alice 主动跳过 Alice 的一些行动回合来获得一个更加公平的局面，这个游戏会更有可玩性。 Bob 想知道，如果 Alice 跳过前 $k$ 个回合之后自己能够获胜，那么这个 $k$ 的最小值是多少。 Alice 只会跳过 Alice 的前 $k$ 个回合，并且在剩下的回合中采用最优策略，即你可以理解为 Bob 在 Alice 的第一回合行动之前额外行动了 $k$ 个回合。注意如果 Bob 在 Alice 跳过的一个回合中 没有合法行动，那么 Bob 仍需按照规则跳过自己的回合。如果在原图上就是 Bob 获胜那么输出 $0$。如果 $k = 1000000$ 时 Bob 也不能取胜，则输出 $1000000$。\n\n由于这个图可能很大，我们用如下的方式生成。\n\n- 首先生成一个含有标号为 $1$ 到 $n$ 一共 $n$ 个点的空图。 \n- 接下来加入 $m$ 条链，第 $i$ 条链记作 $(u_i,v_i,l_i)$，其中 $1 \\le u_i,v_i \\le n$ 且 $u_i \\neq v_i$。 \n\t- 首先我们加入 $l_i$ 个点，记作 $x_1^i,x_2^i,...,x_ {l_i}^i$。 \n\t- 然后在 $(u_i,x_1^i),(x_1^i,x_2^i),(x_2^i,x_3^i),$ $...,(x_{l_i−1}^i,x_{l_i}^i),(x_{l_i}^i,v_i)$ 之间连上无向边。 \n\t- 在这次操作之后，本轮中新加入的 $l_i$ 个点不会再与其他的点之间连边，即不同的链中的 $x_1^i ... x_{l_i}^i$ 均为互不相同的点。特别地，如果 $l = 0$，那么就不添加新点，直接在 $(u_i,v_i)$ 之间连上无向边。\n    \n保证 $S$ 集合以及 $T$ 集合的点均为一开始生成的 $n$ 个点之一。", "inputFormat": "第一行输入一个整数 $C$，表示数据组数。\n对于每组数据：\n\n- 第一行输入四个整数 $n,m,|S|,|T|$,$(1 \\le|S|\\le n−1,1 \\le|T|\\le n,n−1 \\le m \\le n)$。 \n- 接下来 $m$ 行每行输入 $3$ 个非负整数 $u_i,v_i,l_i$,$(1 \\le u_i,v_i \\le n,0 \\le l_i \\le 10^6)$，表示题面中的第 $i$ 条链。\n- 接下来一行输入 $|S|$ 个数 $s_1 ... s_{|S|}$ 表示 $S$ 集合中的所有元素 ($2 \\le s_i \\le n$ 且不重复)。 \n- 接下来一行输入 $|T|$ 个数 $t_1 ... t_{|T|}$ 表示 $T$ 集合中的所有元素 ($1 \\le t_i \\le n$ 且不重复)。\n\n即每组数据按照如下格式输入：\n\n```\nn m |S||T| \nu_1 v_1 l_1 \nu_2 v_2 l_2 \n···\nu_m v_m l_m \ns_1 s_2 ··· s_|S| \nt_1 t_2 ··· t_|T|\n```\n\n保证 $u_i \\neq v_i$（即没有自环），保证没有相同的 $(u_i,v_i)$ 对（即没有重边），保证给出的图是一个连通图。", "outputFormat": "输出 $C$ 行，对于每组测试数据，输出为了让 Bob 取胜 Alice 至少要跳过的回合数 $k$。如果在原图上就是 Bob 获胜那么输出 $0$。如果 $k = 1000000$ 时 Bob 也不能取胜，则输出 $1000000$。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/ltfz1gns.png?x-oss-process=image/resize,m_lfit,w_500)\n\n对于 $100\\%$ 的数据，$m = n$ 或 $n−1$，$3 \\le n \\le 500$，$C = 10000$，$0 \\le l_i \\le 10^6$，$1 \\le|S|\\le n−1,1 \\le|T|\\le n$ 且保证图中不存在点数（只计算前 $n$ 个点的数量）大于 $100$ 的环，每个测试点中最多只有 $10$ 组数据满足 $n > 50$，最多只有 $1000$ 组数据满足 $n > 20$。", "locale": "zh-CN"}}}
{"pid": "P6633", "type": "P", "difficulty": 7, "samples": [["3 2\n1 2 3", "499122180"], ["10 2\n1 2 3 4 5 7 8 9 11 12", "839792873"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选", "浙江"], "title": "[ZJOI2020] 抽卡", "background": "", "description": "Bob 喜欢抽卡。\n\nBob 最近入坑了一款叫 “主公连结” 的抽卡游戏。游戏中共有 $n$ 个不同的角色，编号为 $1 \\sim n$。当 Bob 获得其中的编号连续的 $k$ 张卡时，就可以组出理论最强阵容。\n\n当期卡池中共有 $m$ 张不同的卡，每次抽卡，Bob 都可以等概率随机获得一张卡池中的卡。如果 Bob 抽到了一张他已经拥有的卡，那么什么事都不会发生，等于 Bob 浪费了这次抽卡机会。Bob 是个谨慎的人，他想知道，如果他不停地抽卡直到抽到编号连续的 $k$ 张卡时停止抽卡，期望需要抽多少轮。", "inputFormat": "第一行输入两个整数 $m,k$。\n\n第二行输入 $m$ 个两两不同的整数 $a_1,a_2,··· ,a_m$，表示卡池中有哪些角色。\n\n题面中的 $n$ 即为最大的 $a_i$ 的值。", "outputFormat": "输出一行一个整数，代表期望轮数对 $p = 998244353$ 取模后的结果。即，如果期望轮数的最简分数表示为 $\\frac{a}{b}$，你需要输出一个整数 c 满足 $c \\times b \\equiv a \\pmod{p}$", "hint": "**样例解释 1**\n\n如果第一轮抽到的是 $2$ 号卡，那么期望需要抽 $1 + \\frac{3}{2}$ 轮；如果第一轮抽到的是 $1$ 号卡或 $3$ 号卡，那么期望需要抽 $1 + 3$ 轮。故答案为 $\\frac{1}{3}(1 + \\frac{3}{2}) + \\frac{2}{3}(1 + 3) = 3.5$\n\n**数据范围与约定**\n\n对于前 $10\\%$ 的数据，$m \\le 10$。   \n对于另外 $10\\%$ 的数据，$m \\le 500$ 且 $k = m−1$。   \n对于另外 $10\\%$ 的数据，$m \\le 500$ 且保证有且仅有一组理论最强阵容。   \n对于另外 $10\\%$ 的数据，$m \\le 500$ 且保证任意两组可抽出的理论最强阵容不交。   \n对于前 $50\\%$ 的数据，$m \\le 500$。   \n对于前 $70\\%$ 的数据，$m \\le 5000$。   \n对于另外 $10\\%$ 的数据，$k = 5$。   \n对于另外 $10\\%$ 的数据，$k = 2000$。   \n对于 $100\\%$ 的数据，$1 \\le m \\le 200000,1 \\le a_i \\le 2m,2 \\le k \\le m$，保证卡池中至少存在一组 可抽出的理论最强阵容（即编号连续的 $k$ 张卡）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2020] 抽卡", "background": "", "description": "Bob 喜欢抽卡。\n\nBob 最近入坑了一款叫 “主公连结” 的抽卡游戏。游戏中共有 $n$ 个不同的角色，编号为 $1 \\sim n$。当 Bob 获得其中的编号连续的 $k$ 张卡时，就可以组出理论最强阵容。\n\n当期卡池中共有 $m$ 张不同的卡，每次抽卡，Bob 都可以等概率随机获得一张卡池中的卡。如果 Bob 抽到了一张他已经拥有的卡，那么什么事都不会发生，等于 Bob 浪费了这次抽卡机会。Bob 是个谨慎的人，他想知道，如果他不停地抽卡直到抽到编号连续的 $k$ 张卡时停止抽卡，期望需要抽多少轮。", "inputFormat": "第一行输入两个整数 $m,k$。\n\n第二行输入 $m$ 个两两不同的整数 $a_1,a_2,··· ,a_m$，表示卡池中有哪些角色。\n\n题面中的 $n$ 即为最大的 $a_i$ 的值。", "outputFormat": "输出一行一个整数，代表期望轮数对 $p = 998244353$ 取模后的结果。即，如果期望轮数的最简分数表示为 $\\frac{a}{b}$，你需要输出一个整数 c 满足 $c \\times b \\equiv a \\pmod{p}$", "hint": "**样例解释 1**\n\n如果第一轮抽到的是 $2$ 号卡，那么期望需要抽 $1 + \\frac{3}{2}$ 轮；如果第一轮抽到的是 $1$ 号卡或 $3$ 号卡，那么期望需要抽 $1 + 3$ 轮。故答案为 $\\frac{1}{3}(1 + \\frac{3}{2}) + \\frac{2}{3}(1 + 3) = 3.5$\n\n**数据范围与约定**\n\n对于前 $10\\%$ 的数据，$m \\le 10$。   \n对于另外 $10\\%$ 的数据，$m \\le 500$ 且 $k = m−1$。   \n对于另外 $10\\%$ 的数据，$m \\le 500$ 且保证有且仅有一组理论最强阵容。   \n对于另外 $10\\%$ 的数据，$m \\le 500$ 且保证任意两组可抽出的理论最强阵容不交。   \n对于前 $50\\%$ 的数据，$m \\le 500$。   \n对于前 $70\\%$ 的数据，$m \\le 5000$。   \n对于另外 $10\\%$ 的数据，$k = 5$。   \n对于另外 $10\\%$ 的数据，$k = 2000$。   \n对于 $100\\%$ 的数据，$1 \\le m \\le 200000,1 \\le a_i \\le 2m,2 \\le k \\le m$，保证卡池中至少存在一组 可抽出的理论最强阵容（即编号连续的 $k$ 张卡）。", "locale": "zh-CN"}}}
{"pid": "P6634", "type": "P", "difficulty": 7, "samples": [["见下发文件。该样例满足题目中提到的所有随机生成的性质。\n", ""]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "各省省选", "浙江"], "title": "[ZJOI2020] 密码", "background": null, "description": "Bob 喜欢 Alice。\n\nAlice 和 Bob 想要进行加密通信，于是他们自己设计了一套加密算法进行身份验证。你知道这个加密算法并不可靠，并截获了 Alice 和 Bob 之间的信息。现在你想要恢复出 Alice 的密钥。\n\nAlice 和 Bob 约定了一个大质数 $p$，一个随机范围值 $err$ 和一个在 $0 \\sim p - 1$ 之间均匀随机生成的整数密钥 $x$。其中 $p$ 和 $err$ 的值是公开的，而 $x$ 的值只有 Alice 和 Bob 知道。\n\n当 Bob 想要确认 Alice 的身份时，Bob 会生成 $m$ 个在 $0\\sim p-1$ 之间均匀随机生成的 $a_i$ 并发给 Alice。对于每个 $a_i$，Alice 会返回给 Bob $a_i x$ 模 $p$ 的值。为了防止窃听，Alice 会给结果加上一个在 $-\\lceil \\frac {err}2 \\rceil$ 到 $\\lceil \\frac {err}2 \\rceil$ 之间均匀随机生成的扰动。\n\n即，Alice 会返回给 Bob $m$ 组形如 $a_i x + b_i \\equiv c_i \\pmod p$ 的等式，其中 $b_i$ 为一个不公开的在 $-\\lceil \\frac {err}2 \\rceil$ 到 \n$\\lceil \\frac {err}2 \\rceil$ 之间均匀随机生成的数，$a_i$ 为随机生成的数，$a_i,p,err,c_i$ 为公开的数。\n\n你获得了 Alice 返回的这 $m$ 组等式（即 $m$ 个 $a_i$ 和 $c_i$），你需要求出 $x$ 的值。", "inputFormat": "第一行输入一个整数 $T$，表示数据组数。\n\n对于每组数据，第一行输入三个整数 $m,p,err$。接下来 $m$ 行，每行两个整数 $a_i,c_i$。符号的含义和题面中相同。", "outputFormat": "输出 $T$ 行，  \n对于每组测试数据，输出一个 $0$ 到 $p - 1$ 之间整数表示答案。数据保证有解并且解唯一。", "hint": "对于前 $10\\%$ 的数据，满足 $err \\le 10^6$。   \n对于前 $20\\%$ 的数据，满足 $err \\le 10^8$。   \n对于前 $30\\%$ 的数据，满足 $err \\le 10^{11}$。   \n对于前 $40\\%$ 的数据，满足 $err \\le 10^{12}$。  \n对于另外 $20\\%$ 的数据，满足 $p \\le 10^{16}$，$m = 2000$。   \n对于 $100\\%$ 的数据，满足 $10^{15} \\le p \\le 10^{18}$，$50 \\le m \\le 2000$，$1 \\le err \\le 0.01p$，$1 \\le T \\le 5$，$0 \\le a_i,c_i \\le p-1$，保证 $p$ 为素数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ZJOI2020] 密码", "background": null, "description": "Bob 喜欢 Alice。\n\nAlice 和 Bob 想要进行加密通信，于是他们自己设计了一套加密算法进行身份验证。你知道这个加密算法并不可靠，并截获了 Alice 和 Bob 之间的信息。现在你想要恢复出 Alice 的密钥。\n\nAlice 和 Bob 约定了一个大质数 $p$，一个随机范围值 $err$ 和一个在 $0 \\sim p - 1$ 之间均匀随机生成的整数密钥 $x$。其中 $p$ 和 $err$ 的值是公开的，而 $x$ 的值只有 Alice 和 Bob 知道。\n\n当 Bob 想要确认 Alice 的身份时，Bob 会生成 $m$ 个在 $0\\sim p-1$ 之间均匀随机生成的 $a_i$ 并发给 Alice。对于每个 $a_i$，Alice 会返回给 Bob $a_i x$ 模 $p$ 的值。为了防止窃听，Alice 会给结果加上一个在 $-\\lceil \\frac {err}2 \\rceil$ 到 $\\lceil \\frac {err}2 \\rceil$ 之间均匀随机生成的扰动。\n\n即，Alice 会返回给 Bob $m$ 组形如 $a_i x + b_i \\equiv c_i \\pmod p$ 的等式，其中 $b_i$ 为一个不公开的在 $-\\lceil \\frac {err}2 \\rceil$ 到 \n$\\lceil \\frac {err}2 \\rceil$ 之间均匀随机生成的数，$a_i$ 为随机生成的数，$a_i,p,err,c_i$ 为公开的数。\n\n你获得了 Alice 返回的这 $m$ 组等式（即 $m$ 个 $a_i$ 和 $c_i$），你需要求出 $x$ 的值。", "inputFormat": "第一行输入一个整数 $T$，表示数据组数。\n\n对于每组数据，第一行输入三个整数 $m,p,err$。接下来 $m$ 行，每行两个整数 $a_i,c_i$。符号的含义和题面中相同。", "outputFormat": "输出 $T$ 行，  \n对于每组测试数据，输出一个 $0$ 到 $p - 1$ 之间整数表示答案。数据保证有解并且解唯一。", "hint": "对于前 $10\\%$ 的数据，满足 $err \\le 10^6$。   \n对于前 $20\\%$ 的数据，满足 $err \\le 10^8$。   \n对于前 $30\\%$ 的数据，满足 $err \\le 10^{11}$。   \n对于前 $40\\%$ 的数据，满足 $err \\le 10^{12}$。  \n对于另外 $20\\%$ 的数据，满足 $p \\le 10^{16}$，$m = 2000$。   \n对于 $100\\%$ 的数据，满足 $10^{15} \\le p \\le 10^{18}$，$50 \\le m \\le 2000$，$1 \\le err \\le 0.01p$，$1 \\le T \\le 5$，$0 \\le a_i,c_i \\le p-1$，保证 $p$ 为素数。", "locale": "zh-CN"}}}
{"pid": "P6635", "type": "P", "difficulty": 3, "samples": [["6 7 5\n1 3\n2 1\n4 2\n4 3\n4 5\n3 6\n5 6", "0111001"], ["11 20 20091210\n2 3\n3 1\n2 5\n4 6\n7 9\n8 10\n8 1\n7 2\n2 3\n3 2\n4 5\n5 7\n7 6\n7 8\n9 7\n9 8\n10 2\n2 3\n1 3\n1 7", "10110000100110110111"]], "limits": {"time": [5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144]}, "tags": ["递归", "深度优先搜索 DFS"], "title": "「JYLOI Round 1」箭头调度", "background": "", "description": "moyu_028 给了你一个有 $n$ 个点 $m$ 条边的无向图，现在要给每条边赋一个方向，现在请你求出一个赋方向的方案，使得按照这个方案能够生成一个拓扑序，且使得这个拓扑序是在所有可能的拓扑序中字典序第 $k$ 小的。\n", "inputFormat": "输入的第 1 行有 3 个正整数 $n$、$m$、$k$，含义如题所述。\n\n接下来有 $m$ 行，这 $m$ 行中的第 $i$ 行有两个正整数 $x_i$ 和 $y_i$，表示有一条从 $x_i$ 到 $y_i$ 的无向边。", "outputFormat": "输出为一行一个长度为 $m$ 的 01 串，这个 01 串中的第 $i$ 个字符表示从 $x_i$ 和 $y_i$ 之间的无向边的方向，为 0 则表示这条边是从 $x_i$ 到 $y_i$，为 1 则表示这条边是从 $y_i$ 到 $x_i$。可以证明答案唯一，且数据保证有解。", "hint": "## 提示\n\n拓扑序：在一个 DAG（有向无环图）中，我们将图中的顶点以线性方式进行排序，使得对于任何的顶点 $u$ 到 $v$ 的有向边 $(u,v)$，都可以有 $u$ 在 $v$ 的前面，则这样的序列称为拓扑序。\n\n----------\n\n## 样例解释\n\n### 样例 1 解释\n\n答案的图如下，根据图可得出答案。\n\n![](https://i.loli.net/2020/05/23/3FK2n78JAYLrGMD.png)\n\n-----------------\n\n## 数据范围\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 11, 1 \\leq m \\leq 2 \\times 10^3, 1 \\leq k \\leq 10^8，1 \\leq x_i, y_i \\leq n, x_i \\not= y_i$。\n\n对于测试点 1（10 分）：$n = 1$。\n\n对于测试点 2（30 分）：$n \\leq 11, m \\leq 20$。\n\n对于测试点 3（30 分）：$n \\leq 11, k = 1$。\n\n对于测试点 4（30 分）：无特殊限制。\n\n本题共 4 个测试点，总分为 100 分，单个测试点的时间限制为 5 秒。\n\n## 题目来源\n\n「JYLOI Round 1」 A\n\nIdea：moyu_028 & abcdeffa\n\nSolution：LiuXiangle\n\nData：abcdeffa", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「JYLOI Round 1」箭头调度", "background": "", "description": "moyu_028 给了你一个有 $n$ 个点 $m$ 条边的无向图，现在要给每条边赋一个方向，现在请你求出一个赋方向的方案，使得按照这个方案能够生成一个拓扑序，且使得这个拓扑序是在所有可能的拓扑序中字典序第 $k$ 小的。\n", "inputFormat": "输入的第 1 行有 3 个正整数 $n$、$m$、$k$，含义如题所述。\n\n接下来有 $m$ 行，这 $m$ 行中的第 $i$ 行有两个正整数 $x_i$ 和 $y_i$，表示有一条从 $x_i$ 到 $y_i$ 的无向边。", "outputFormat": "输出为一行一个长度为 $m$ 的 01 串，这个 01 串中的第 $i$ 个字符表示从 $x_i$ 和 $y_i$ 之间的无向边的方向，为 0 则表示这条边是从 $x_i$ 到 $y_i$，为 1 则表示这条边是从 $y_i$ 到 $x_i$。可以证明答案唯一，且数据保证有解。", "hint": "## 提示\n\n拓扑序：在一个 DAG（有向无环图）中，我们将图中的顶点以线性方式进行排序，使得对于任何的顶点 $u$ 到 $v$ 的有向边 $(u,v)$，都可以有 $u$ 在 $v$ 的前面，则这样的序列称为拓扑序。\n\n----------\n\n## 样例解释\n\n### 样例 1 解释\n\n答案的图如下，根据图可得出答案。\n\n![](https://i.loli.net/2020/05/23/3FK2n78JAYLrGMD.png)\n\n-----------------\n\n## 数据范围\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 11, 1 \\leq m \\leq 2 \\times 10^3, 1 \\leq k \\leq 10^8，1 \\leq x_i, y_i \\leq n, x_i \\not= y_i$。\n\n对于测试点 1（10 分）：$n = 1$。\n\n对于测试点 2（30 分）：$n \\leq 11, m \\leq 20$。\n\n对于测试点 3（30 分）：$n \\leq 11, k = 1$。\n\n对于测试点 4（30 分）：无特殊限制。\n\n本题共 4 个测试点，总分为 100 分，单个测试点的时间限制为 5 秒。\n\n## 题目来源\n\n「JYLOI Round 1」 A\n\nIdea：moyu_028 & abcdeffa\n\nSolution：LiuXiangle\n\nData：abcdeffa", "locale": "zh-CN"}}}
{"pid": "P6636", "type": "P", "difficulty": 4, "samples": [["2\n2 1 0", "415935148"], ["50\n2 1 2 1 0 0 2 2 0 0 1 2 0 0 0 2 0 0 1 2 1 1 1 1 1 0 1 1 1 0 1 2 0 1 1 0 1 1 2 0 1 0 0 1 1 1 0 1 2 1 1", "576313280"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP"], "title": "「JYLOI Round 1」性状", "background": "", "description": "小郭给你 $(n + 1)$ 个非负整数 $a_0 \\sim a_n$，对于任意 $0 \\leq i \\leq n$ 有 $a_i \\in \\{0, 1, 2\\}$，其中 $a_i$ 表示第 $i$ 个人的基因中控制双眼皮的显性基因个数，在下文中也代表着这个生物。\n\n现在对于原序列中的任意一个子序列 $b_{c_1} \\sim b_{c_m}$（其中 $1 \\leq c_i < c_{i + 1} \\leq m$，并且 $1 \\leq i < m \\leq n$），将 $a_0$ 和 $b_{c_1}$ 进行交配，得到子一代，并将子一代和 $b_{c_2}$ 交配，得到子二代，以此类推，最后将子 $(m - 1)$  代与 $b_{c_m}$ 进行交配，得到子 $m$ 代，我们定义这个子序列的价值为子 $m$ 代为双眼皮的概率。\n\n由于他很忙，于是他现在请你帮他求出所有子序列的价值的平均值在模 $998244353$ 意义下的值。\n\n**提示**：把 0、1、2 分别看作 ``aa``、``Aa``、``AA`` 三种字符串，两个生物进行交配，就是选择每个字符串间长度为 1 的子序列进行大写字母在前，小写在后的合并，其中这样的一个字符串为子代一种可能的基因组成。\n\n其中大写字母开头的为显性性状，小写字母开头为隐性性状。双眼皮为显性性状，单眼皮为隐性性状，结果 ``aa``、``Aa``、``AA`` 分别再对应回数字 0、1、2。\n\n**注意**，在本题中，我们认为眼皮的单双由位于常染色体上的一对等位基因 ``A`` 和 ``a`` 控制，其中 ``A`` 相对 ``a`` 为完全显性。且该性状的遗传遵循孟德尔的分离定律，并不考虑表观遗传、从性遗传、突变、基因表达的相互影响，所有基因型的配子和个体均无致死概率，所有个体均能产生可育配子。", "inputFormat": "输入的第 1 行有一个正整数 $n$，中间用一个空格隔开，$n$ 的含义如题所述。\n\n第二行有 $(n + 1)$ 个非负整数，这一行中的第 $i$ 个数表示 $a_i$。", "outputFormat": "输出只有一行一个非负整数，表示答案。", "hint": "## 样例 1 解释\n\n子序列 $\\{1\\}$、$\\{0\\}$、$\\{1, 0\\}$ 的价值分别为 $1$、$1$ 和 $\\dfrac{3}{4}$，平均价值为 $\\dfrac{11}{12}$，对 $998244353$ 取模后的结果为 $415935148$。\n\n## 数据范围\n\n对于 $100\\%$ 的测试数据，$1 \\leq n \\leq 5 \\times 10^6, a_i \\in \\{0, 1, 2\\}$。\n\n对于测试点 1，$n = 1$。\n\n对于测试点 2，$n = 2$。\n\n对于测试点 3~5，$n \\leq 5$。\n\n对于测试点 6~10，$n \\leq 7.5 \\times 10^3$。\n\n本题共有 20 个测试点，每个测试点 5 分，共 100 分。\n\n## 题目来源\n\n「JYLOI Round 1」 B\n\nIdea：abcdeffa & LiuXiangle\n\nSolution：LiuXiangle\n\nData：LiuXiangle", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「JYLOI Round 1」性状", "background": "", "description": "小郭给你 $(n + 1)$ 个非负整数 $a_0 \\sim a_n$，对于任意 $0 \\leq i \\leq n$ 有 $a_i \\in \\{0, 1, 2\\}$，其中 $a_i$ 表示第 $i$ 个人的基因中控制双眼皮的显性基因个数，在下文中也代表着这个生物。\n\n现在对于原序列中的任意一个子序列 $b_{c_1} \\sim b_{c_m}$（其中 $1 \\leq c_i < c_{i + 1} \\leq m$，并且 $1 \\leq i < m \\leq n$），将 $a_0$ 和 $b_{c_1}$ 进行交配，得到子一代，并将子一代和 $b_{c_2}$ 交配，得到子二代，以此类推，最后将子 $(m - 1)$  代与 $b_{c_m}$ 进行交配，得到子 $m$ 代，我们定义这个子序列的价值为子 $m$ 代为双眼皮的概率。\n\n由于他很忙，于是他现在请你帮他求出所有子序列的价值的平均值在模 $998244353$ 意义下的值。\n\n**提示**：把 0、1、2 分别看作 ``aa``、``Aa``、``AA`` 三种字符串，两个生物进行交配，就是选择每个字符串间长度为 1 的子序列进行大写字母在前，小写在后的合并，其中这样的一个字符串为子代一种可能的基因组成。\n\n其中大写字母开头的为显性性状，小写字母开头为隐性性状。双眼皮为显性性状，单眼皮为隐性性状，结果 ``aa``、``Aa``、``AA`` 分别再对应回数字 0、1、2。\n\n**注意**，在本题中，我们认为眼皮的单双由位于常染色体上的一对等位基因 ``A`` 和 ``a`` 控制，其中 ``A`` 相对 ``a`` 为完全显性。且该性状的遗传遵循孟德尔的分离定律，并不考虑表观遗传、从性遗传、突变、基因表达的相互影响，所有基因型的配子和个体均无致死概率，所有个体均能产生可育配子。", "inputFormat": "输入的第 1 行有一个正整数 $n$，中间用一个空格隔开，$n$ 的含义如题所述。\n\n第二行有 $(n + 1)$ 个非负整数，这一行中的第 $i$ 个数表示 $a_i$。", "outputFormat": "输出只有一行一个非负整数，表示答案。", "hint": "## 样例 1 解释\n\n子序列 $\\{1\\}$、$\\{0\\}$、$\\{1, 0\\}$ 的价值分别为 $1$、$1$ 和 $\\dfrac{3}{4}$，平均价值为 $\\dfrac{11}{12}$，对 $998244353$ 取模后的结果为 $415935148$。\n\n## 数据范围\n\n对于 $100\\%$ 的测试数据，$1 \\leq n \\leq 5 \\times 10^6, a_i \\in \\{0, 1, 2\\}$。\n\n对于测试点 1，$n = 1$。\n\n对于测试点 2，$n = 2$。\n\n对于测试点 3~5，$n \\leq 5$。\n\n对于测试点 6~10，$n \\leq 7.5 \\times 10^3$。\n\n本题共有 20 个测试点，每个测试点 5 分，共 100 分。\n\n## 题目来源\n\n「JYLOI Round 1」 B\n\nIdea：abcdeffa & LiuXiangle\n\nSolution：LiuXiangle\n\nData：LiuXiangle", "locale": "zh-CN"}}}
{"pid": "P6638", "type": "P", "difficulty": 6, "samples": [["0\n5 10 3\n1 2 3 4 5\n1 5\n2 5\n3 5\n4 5\n5 5\n10 10\n20 30\n10 30\n1 30\n5 30", "2\n2\n2\n2\n1\n2\n18\n35\n43\n42"], ["1\n5 10 3 100\n1 2 3 4 5\n1 5\n2 5\n3 5\n4 5\n5 5\n10 10\n20 30\n10 30\n1 30\n5 30", "2\n5\n5\n3\n2\n1\n18\n35\n50\n44"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "可持久化线段树"], "title": "「JYLOI Round 1」常规", "background": "", "description": "LS 制定了 $n$ 项常规，其中第 $i$ 项常规制定的时间是 $a_i$。\n\n对于第 $i$ 项常规，从第 $i$ 项常规的制定时间 $a_i$ 后的每 $k$ 秒，他都要做一次第 $i$ 项常规，他做一次常规的时间可以忽略不计。\n\n现在 LS 想给你 $m$ 个询问，每个询问用一个区间 $[l_i, r_i]$ 来表示，问你在第 $l_i$ 到 $r_i$ 秒，他一共做了多少次常规。", "inputFormat": "输入的第一行是一个为 0 或 1 的整数 $type$，在接下来会用到。\n\n对于 $type = 0$ 的情况，接下来有一行三个正整数 $n$、$m$、$k$，含义如题所述。\n\n接下来有一行 $n$ 个正整数，这一行中的第 $i$ 个正整数表示的是 $a_i$，$a_i$ 的含义如题所述。\n\n接下来有 $m$ 行，第 $i$ 行表示的是第 $i$ 个询问是一个区间 $[l_i, r_i]$，$l_i$ 和 $r_i$ 的含义如题所述。对于 $type = 0$ 的所有询问，我们都没有进行加密。\n\n对于 $type=1$ 的情况，接下来有一行四个正整数 $n$、$m$、$k$ 和 $mod$，$n$、$m$、$k$ 的含义如题所述，其中 $mod$ 是一个会在下面用到的参数。\n\n接下来有一行 $n$ 个正整数，这一行中的第 $i$ 个正整数表示的是 $a_i$，$a_i$ 的含义如题所述。\n\n接下来有 $m$ 行，这 $m$ 行中的第 $i$ 行有两个正整数 $l_i$ 和 $r_i$，表示第 $i$ 个询问是一个区间 $[l_i, r_i]$，$l_i$ 和 $r_i$ 的含义如题所述。特别地，我们加密了第 2 至第 $m$ 个询问，对于第 $i(2 \\leq i \\leq m)$ 个询问，解密后的：\n$$l_i = \\min((l_i + \\text{lastans} - 1) \\;\\text{mod}\\; mod + 1, (r_i + \\text{lastans} - 1) \\;\\text{mod}\\; mod + 1)$$\n\n$$r_i=\\max((l_i + \\text{lastans} - 1) \\;\\text{mod}\\; mod + 1, (r_i + \\text{lastans} - 1) \\;\\text{mod}\\; mod + 1)$$\n\n其中 $\\text{lastans}$ 是第 $(i - 1)$ 个询问的答案，对于第 2 到第 $m$ 个询问，你的程序需要回答解密后的询问所对应的答案。\n\n**特别地，第一个询问没有被加密。**", "outputFormat": "输出共有 $m$ 行，对于每个解密后的询问输出一行，输出中的第 $i$ 行表示的是第 $i$ 个询问的答案。", "hint": "### 样例 2 说明\n\n解密后的询问分别为 [1, 5]、[4, 7]、[8, 10]、[9, 10]、[8, 8]、[12, 12]、[21, 31]、[28, 48]、[36, 65]、[55, 80]，因此可以得出答案。\n\n____________\n\n### 数据范围\n\n对于 $100\\%$ 的数据，满足 $type \\in \\{0, 1\\}; 1 \\leq n, m \\leq 10^5; 0 \\leq l_i \\leq r_i \\leq 10^9; 0 \\leq a_i \\leq 10^9; 1 \\leq k, mod \\leq 10^9$。\n\n子任务 1（有 10 个测试点，每个测试点 1 分，共 10 分）：$type = 0; n, m, k \\leq 10^3; r_i \\leq 10^3$。\n\n子任务 2（有 10 个测试点，每个测试点 1 分，共 10 分）：$type = 0; n, m \\leq 10^3$。\n\n子任务 3（有 2 个测试点，每个测试点 5 分，共 10 分）：$type = 0, r_i \\leq 10^5,k = 1$。\n\n子任务 4（共 20 分）：$type = 0, k \\leq 10^5, r_i \\leq 10^5$。\n\n子任务 5（共 30 分）：$type = 0$。\n\n子任务 6（共 20 分）：无特殊限制。\n\n对于子任务 4、5、6，分别捆绑计分（即你需要通过一个子任务内的所有测试点才能够拿到这个子任务的分数），本题总共 50 个测试点、100 分。\n\n## 题目来源\n\n「JYLOI Round 1」 D\n\nIdea / Solution / Data ：abcdeffa", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「JYLOI Round 1」常规", "background": "", "description": "LS 制定了 $n$ 项常规，其中第 $i$ 项常规制定的时间是 $a_i$。\n\n对于第 $i$ 项常规，从第 $i$ 项常规的制定时间 $a_i$ 后的每 $k$ 秒，他都要做一次第 $i$ 项常规，他做一次常规的时间可以忽略不计。\n\n现在 LS 想给你 $m$ 个询问，每个询问用一个区间 $[l_i, r_i]$ 来表示，问你在第 $l_i$ 到 $r_i$ 秒，他一共做了多少次常规。", "inputFormat": "输入的第一行是一个为 0 或 1 的整数 $type$，在接下来会用到。\n\n对于 $type = 0$ 的情况，接下来有一行三个正整数 $n$、$m$、$k$，含义如题所述。\n\n接下来有一行 $n$ 个正整数，这一行中的第 $i$ 个正整数表示的是 $a_i$，$a_i$ 的含义如题所述。\n\n接下来有 $m$ 行，第 $i$ 行表示的是第 $i$ 个询问是一个区间 $[l_i, r_i]$，$l_i$ 和 $r_i$ 的含义如题所述。对于 $type = 0$ 的所有询问，我们都没有进行加密。\n\n对于 $type=1$ 的情况，接下来有一行四个正整数 $n$、$m$、$k$ 和 $mod$，$n$、$m$、$k$ 的含义如题所述，其中 $mod$ 是一个会在下面用到的参数。\n\n接下来有一行 $n$ 个正整数，这一行中的第 $i$ 个正整数表示的是 $a_i$，$a_i$ 的含义如题所述。\n\n接下来有 $m$ 行，这 $m$ 行中的第 $i$ 行有两个正整数 $l_i$ 和 $r_i$，表示第 $i$ 个询问是一个区间 $[l_i, r_i]$，$l_i$ 和 $r_i$ 的含义如题所述。特别地，我们加密了第 2 至第 $m$ 个询问，对于第 $i(2 \\leq i \\leq m)$ 个询问，解密后的：\n$$l_i = \\min((l_i + \\text{lastans} - 1) \\;\\text{mod}\\; mod + 1, (r_i + \\text{lastans} - 1) \\;\\text{mod}\\; mod + 1)$$\n\n$$r_i=\\max((l_i + \\text{lastans} - 1) \\;\\text{mod}\\; mod + 1, (r_i + \\text{lastans} - 1) \\;\\text{mod}\\; mod + 1)$$\n\n其中 $\\text{lastans}$ 是第 $(i - 1)$ 个询问的答案，对于第 2 到第 $m$ 个询问，你的程序需要回答解密后的询问所对应的答案。\n\n**特别地，第一个询问没有被加密。**", "outputFormat": "输出共有 $m$ 行，对于每个解密后的询问输出一行，输出中的第 $i$ 行表示的是第 $i$ 个询问的答案。", "hint": "### 样例 2 说明\n\n解密后的询问分别为 [1, 5]、[4, 7]、[8, 10]、[9, 10]、[8, 8]、[12, 12]、[21, 31]、[28, 48]、[36, 65]、[55, 80]，因此可以得出答案。\n\n____________\n\n### 数据范围\n\n对于 $100\\%$ 的数据，满足 $type \\in \\{0, 1\\}; 1 \\leq n, m \\leq 10^5; 0 \\leq l_i \\leq r_i \\leq 10^9; 0 \\leq a_i \\leq 10^9; 1 \\leq k, mod \\leq 10^9$。\n\n子任务 1（有 10 个测试点，每个测试点 1 分，共 10 分）：$type = 0; n, m, k \\leq 10^3; r_i \\leq 10^3$。\n\n子任务 2（有 10 个测试点，每个测试点 1 分，共 10 分）：$type = 0; n, m \\leq 10^3$。\n\n子任务 3（有 2 个测试点，每个测试点 5 分，共 10 分）：$type = 0, r_i \\leq 10^5,k = 1$。\n\n子任务 4（共 20 分）：$type = 0, k \\leq 10^5, r_i \\leq 10^5$。\n\n子任务 5（共 30 分）：$type = 0$。\n\n子任务 6（共 20 分）：无特殊限制。\n\n对于子任务 4、5、6，分别捆绑计分（即你需要通过一个子任务内的所有测试点才能够拿到这个子任务的分数），本题总共 50 个测试点、100 分。\n\n## 题目来源\n\n「JYLOI Round 1」 D\n\nIdea / Solution / Data ：abcdeffa", "locale": "zh-CN"}}}
{"pid": "P6639", "type": "P", "difficulty": 5, "samples": [["5\nchange 3\nquery 1\n2 2\nchange 4\nquery 1\n2 2\nchange 2", "01"], ["5\nchange 11\nchange 68\nquery 15\n15 16\n54 64\n49 55\n33 38\n27 52\n20 30\n45 46\n29 60\n58 64\n11 55\n17 40\n15 58\n41 63\n7 30\n15 37\nquery 14\n15 57\n13 34\n4 13\n35 43\n12 20\n16 62\n63 65\n17 29\n19 67\n48 63\n25 49\n1 8\n1 37\n44 49\nquery 14\n15 24\n6 50\n49 60\n30 53\n33 52\n4 44\n1 5\n44 59\n4 40\n45 48\n1 20\n12 27\n44 63\n21 39", "001"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["博弈论", "博弈树", "Nim 积", "SG 函数"], "title": "「JYLOI Round 1」让", "background": "", "description": "Alice 和 Bob 在玩游戏。\n\n现在有多堆石子，其中第 $k$ 堆石子有 $p_k$ 个，先后手轮流操作。取石子时，可以选任意一堆进行操作。若记 $i$ 为在这次取之前这堆石子的个数，$j$ 为这次要取的石子数，$R$ 为给定的常数，则需满足以下条件：\n\n$$1 \\leq i + j \\leq R,i \\geq j \\geq 1$$\n\n使对方无法操作者即为胜者。游戏时，双方都采用最优策略。\n\n有多次游戏，具体来说，共有 $T$ 个操作，分为两类：\n\n1. “``change x``” 表示将 $R$ 更改为 $x$。\n\n2. “``query n``” 表示进行一次游戏，接下来有 $n$ 行，这 $n$ 行中的第 $i$ 行有两个正整数 $l_i$ 和 $r_i$，表示这次游戏的石子的堆数和个数可以用这 $n$ 个区间来表示。第 $i$ 个区间表示这次游戏的石子的堆数新增了 $(r_i - l_i + 1)$ 堆，并且其中这个区间所表示的第 $j(1 \\leq j \\leq r_i - l_i + 1)$ 堆的石子个数为 $(l_i + j - 1)$。\n\n\t例如当这次游戏的 $n = 2$，并且两个区间分别为 $[1, 7]$ 和 $[2, 3]$ 的时候，这次游戏一共有 $[(7 - 1 + 1) + (3 - 2 + 1)] = 9$ 堆石子，这 $9$ 堆石子的个数分别为 $1, 2, 3, 4, 5, 6, 7, 2, 3$。\n\n由于 Bob 和 Alice 都非常聪明，而 Bob 希望不赢太多次，在适当的时候让让 Alice。因而他希望你帮他编写一个程序，对于每次游戏，如果先手有必胜策略输出“``1``”，否则输出“``0``”，你能做到吗？", "inputFormat": "第一行有一个正整数 $T$，表示操作的个数。\n\n接下来有 $T$ 个操作，格式如题所述。\n", "outputFormat": "输出共一行，为一个长度小于 $T$ 的由字符 0 和 1 组成的字符串，含义如题所述。", "hint": "### 样例 1 说明\n\n共有 $T=5$ 个操作。\n\n第 1 个操作将 $R$ 改成了 3。\n\n第 2 个操作表示进行了一次游戏，这次游戏的 $n=1$，区间为 $[2, 2]$，表示这次游戏共有 $(2 - 2 + 1) = 1$ 堆石子，这 1 堆石子的个数为 $(2 + 1 - 1) = 2$。因为 $R=3$，因此先手最多只能够取 1 个。若取 2 个则不满足 **题目描述** 中的条件 $1 \\leq i + j \\leq R$，若取 3 个及以上则不满足 **题目描述** 中的条件 $1 \\leq i + j \\leq R,i \\geq j \\geq 1$，其中 $i$、$j$、$R$ 的含义如题所述。先手取完后唯一的一堆只剩下 1 颗石子，因为后手取了 1 颗石子后使先手无法操作，所以先手落败，又因为这是唯一的一种取法，所以先手必败，因此先手无必胜策略，输出“``0``”。\n\n第 3 个操作将 $R$ 改成了 4。\n\n第 4 个操作表示进行了一次游戏，这次游戏的 $n=1$，区间为 $[2, 2]$，表示这次游戏共有 $(2 - 2 + 1) = 1$ 堆石子，这 1 堆石子的个数为 $(2 + 1 - 1) = 2$。先手最多可以取 2 颗石子，因为当先手取 3 颗或以上时，不满足 **题目描述** 中的条件 $1 \\leq i + j \\leq R,i \\geq j \\geq 1$，其中 $i$、$j$、$R$ 的含义如题所述。因为当先手选择取 2 颗石子时，先手取完了所有石子，使后手无法操作，所以先手必胜，输出“``1``”。\n\n第 5 个操作将 $R$ 改成了 2。\n\n____________\n\n### 数据范围\n\n对于 $100\\%$ 的数据，满足 $1 \\leq T \\leq 10^5, 2 \\leq R \\leq 10^{15}, 0 \\leq l_i \\leq r_i < R, 1 \\leq \\sum{n} \\leq 5 \\times 10^5$，并且第一个操作一定是第 1 类操作。\n\n对于测试点 1~2 ，满足 $T \\leq 10, l_i \\leq r_i \\leq 3$，并且在一轮游戏中石子的堆数不会超过 4。\n\n对于测试点 3~6 ，满足 $T \\leq 100, R \\leq 100, \\sum{n} \\leq 100$。\n\n对于测试点 7~10 ，满足 $T \\leq 10, R \\leq 10^5, \\sum{n} \\leq 50$。\n\n对于测试点 11~12 ，满足 $R \\leq 5 \\times 10^3, \\sum{n} \\leq 5 \\times 10^5$，并且只有一次修改操作。\n\n对于测试点 13~16 ，满足 $T \\leq 10^5,R \\leq 10^5,\\sum{n} \\leq 5 \\times 10^5$。\n\n共 20 个测试点，每个测试点 5 分。\n\n## 题目来源\n\n「JYLOI Round 1」 E\n\nIdea / Solution / Data：abcdeffa", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「JYLOI Round 1」让", "background": "", "description": "Alice 和 Bob 在玩游戏。\n\n现在有多堆石子，其中第 $k$ 堆石子有 $p_k$ 个，先后手轮流操作。取石子时，可以选任意一堆进行操作。若记 $i$ 为在这次取之前这堆石子的个数，$j$ 为这次要取的石子数，$R$ 为给定的常数，则需满足以下条件：\n\n$$1 \\leq i + j \\leq R,i \\geq j \\geq 1$$\n\n使对方无法操作者即为胜者。游戏时，双方都采用最优策略。\n\n有多次游戏，具体来说，共有 $T$ 个操作，分为两类：\n\n1. “``change x``” 表示将 $R$ 更改为 $x$。\n\n2. “``query n``” 表示进行一次游戏，接下来有 $n$ 行，这 $n$ 行中的第 $i$ 行有两个正整数 $l_i$ 和 $r_i$，表示这次游戏的石子的堆数和个数可以用这 $n$ 个区间来表示。第 $i$ 个区间表示这次游戏的石子的堆数新增了 $(r_i - l_i + 1)$ 堆，并且其中这个区间所表示的第 $j(1 \\leq j \\leq r_i - l_i + 1)$ 堆的石子个数为 $(l_i + j - 1)$。\n\n\t例如当这次游戏的 $n = 2$，并且两个区间分别为 $[1, 7]$ 和 $[2, 3]$ 的时候，这次游戏一共有 $[(7 - 1 + 1) + (3 - 2 + 1)] = 9$ 堆石子，这 $9$ 堆石子的个数分别为 $1, 2, 3, 4, 5, 6, 7, 2, 3$。\n\n由于 Bob 和 Alice 都非常聪明，而 Bob 希望不赢太多次，在适当的时候让让 Alice。因而他希望你帮他编写一个程序，对于每次游戏，如果先手有必胜策略输出“``1``”，否则输出“``0``”，你能做到吗？", "inputFormat": "第一行有一个正整数 $T$，表示操作的个数。\n\n接下来有 $T$ 个操作，格式如题所述。\n", "outputFormat": "输出共一行，为一个长度小于 $T$ 的由字符 0 和 1 组成的字符串，含义如题所述。", "hint": "### 样例 1 说明\n\n共有 $T=5$ 个操作。\n\n第 1 个操作将 $R$ 改成了 3。\n\n第 2 个操作表示进行了一次游戏，这次游戏的 $n=1$，区间为 $[2, 2]$，表示这次游戏共有 $(2 - 2 + 1) = 1$ 堆石子，这 1 堆石子的个数为 $(2 + 1 - 1) = 2$。因为 $R=3$，因此先手最多只能够取 1 个。若取 2 个则不满足 **题目描述** 中的条件 $1 \\leq i + j \\leq R$，若取 3 个及以上则不满足 **题目描述** 中的条件 $1 \\leq i + j \\leq R,i \\geq j \\geq 1$，其中 $i$、$j$、$R$ 的含义如题所述。先手取完后唯一的一堆只剩下 1 颗石子，因为后手取了 1 颗石子后使先手无法操作，所以先手落败，又因为这是唯一的一种取法，所以先手必败，因此先手无必胜策略，输出“``0``”。\n\n第 3 个操作将 $R$ 改成了 4。\n\n第 4 个操作表示进行了一次游戏，这次游戏的 $n=1$，区间为 $[2, 2]$，表示这次游戏共有 $(2 - 2 + 1) = 1$ 堆石子，这 1 堆石子的个数为 $(2 + 1 - 1) = 2$。先手最多可以取 2 颗石子，因为当先手取 3 颗或以上时，不满足 **题目描述** 中的条件 $1 \\leq i + j \\leq R,i \\geq j \\geq 1$，其中 $i$、$j$、$R$ 的含义如题所述。因为当先手选择取 2 颗石子时，先手取完了所有石子，使后手无法操作，所以先手必胜，输出“``1``”。\n\n第 5 个操作将 $R$ 改成了 2。\n\n____________\n\n### 数据范围\n\n对于 $100\\%$ 的数据，满足 $1 \\leq T \\leq 10^5, 2 \\leq R \\leq 10^{15}, 0 \\leq l_i \\leq r_i < R, 1 \\leq \\sum{n} \\leq 5 \\times 10^5$，并且第一个操作一定是第 1 类操作。\n\n对于测试点 1~2 ，满足 $T \\leq 10, l_i \\leq r_i \\leq 3$，并且在一轮游戏中石子的堆数不会超过 4。\n\n对于测试点 3~6 ，满足 $T \\leq 100, R \\leq 100, \\sum{n} \\leq 100$。\n\n对于测试点 7~10 ，满足 $T \\leq 10, R \\leq 10^5, \\sum{n} \\leq 50$。\n\n对于测试点 11~12 ，满足 $R \\leq 5 \\times 10^3, \\sum{n} \\leq 5 \\times 10^5$，并且只有一次修改操作。\n\n对于测试点 13~16 ，满足 $T \\leq 10^5,R \\leq 10^5,\\sum{n} \\leq 5 \\times 10^5$。\n\n共 20 个测试点，每个测试点 5 分。\n\n## 题目来源\n\n「JYLOI Round 1」 E\n\nIdea / Solution / Data：abcdeffa", "locale": "zh-CN"}}}
{"pid": "P6640", "type": "P", "difficulty": 6, "samples": [["aaba\naaaabbbaa\n3\n1 4\n1 3\n2 4", "3\n3\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "线段树", "二分", "各省省选", "北京", "后缀自动机 SAM", "ST 表", "扫描线", "后缀数组 SA"], "title": "[BJOI2020] 封印", "background": "注：NOI 2020 北京队选拔赛因不可抗力因素取消，改为按前一年 CSP-S 第二轮成绩选出省队。因为出现同分，为决定最终 A 队名单，举办了加试。本题即为加试题。", "description": "给出只包含小写字母 $a,b$ 的两个字符串 $s, t$，$q$ 次询问，每次询问 $s[l \\dots r]$ 和 $t$ 的最长公共子串长度。", "inputFormat": "输入共 $q+3$ 行。\n\n第一行一个字符串 $s$。\n\n第二行一个字符串 $t$。\n\n第三行一个整数 $q$。\n\n接下来的 $q$ 行，每行两个整数 $l_i, r_i(1\\le l_i \\le r_i \\le |s|)$，表示一次询问。", "outputFormat": "输出共 $q$ 行。\n\n第 $i$ 行表示 $s[l_i \\dots r_i]$ 和 $t$ 的最长公共子串长度。", "hint": "| 测试点编号 | $\\vert s\\vert , \\vert t\\vert \\le $ |     $q\\le$     |\n| :--------: | :------------: | :------------: |\n|    $1$     |      $50$      |      $50$      |\n|   $2,3$    | $2\\times 10^3$ | $2\\times 10^3$ |\n|   $4,5$    | $2\\times 10^5$ |      $10$      |\n| $6\\sim 10$ | $2\\times 10^5$ | $2\\times 10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BJOI2020] 封印", "background": "注：NOI 2020 北京队选拔赛因不可抗力因素取消，改为按前一年 CSP-S 第二轮成绩选出省队。因为出现同分，为决定最终 A 队名单，举办了加试。本题即为加试题。", "description": "给出只包含小写字母 $a,b$ 的两个字符串 $s, t$，$q$ 次询问，每次询问 $s[l \\dots r]$ 和 $t$ 的最长公共子串长度。", "inputFormat": "输入共 $q+3$ 行。\n\n第一行一个字符串 $s$。\n\n第二行一个字符串 $t$。\n\n第三行一个整数 $q$。\n\n接下来的 $q$ 行，每行两个整数 $l_i, r_i(1\\le l_i \\le r_i \\le |s|)$，表示一次询问。", "outputFormat": "输出共 $q$ 行。\n\n第 $i$ 行表示 $s[l_i \\dots r_i]$ 和 $t$ 的最长公共子串长度。", "hint": "| 测试点编号 | $\\vert s\\vert , \\vert t\\vert \\le $ |     $q\\le$     |\n| :--------: | :------------: | :------------: |\n|    $1$     |      $50$      |      $50$      |\n|   $2,3$    | $2\\times 10^3$ | $2\\times 10^3$ |\n|   $4,5$    | $2\\times 10^5$ |      $10$      |\n| $6\\sim 10$ | $2\\times 10^5$ | $2\\times 10^5$ |", "locale": "zh-CN"}}}
{"pid": "P6641", "type": "P", "difficulty": 4, "samples": [["3\n-7 7 3\n0 2 3\n-4 2 1\n3 3 1", "5\n12\n15\n15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "CCO（加拿大）"], "title": "[CCO 2020] A Game with Grundy", "background": "", "description": "**本题的所有讨论均在平面直角坐标系上进行。**\n\n有 $N$ 个人，每个人有一个视野，同时每个人在 $(x_i,0)$ 的位置上。\n\n视野可抽象为一个角。\n\n**注意，组成角的两条射线未在视野内。**\n\n现在，您可以站在 $(a,Y)$ 上，其中 $L\\le a\\le R$。\n\n请求出，对于每个 $i(0\\le i\\le N)$，您可以站在多少个位置，使得您至多在 $i$ 个人的视野内。 ", "inputFormat": "第一行为一个整数 $N$。\n\n第二行为三个整数 $L,R,Y$。\n\n接下来 $N$ 行，每行三个整数，分别为 $x_i,v_i,h_i$，其中 $v_i$ 和 $h_i$ 表示，组成角的两条射线的斜率分别为 $\\frac{v_i}{h_i},\\frac{-v_i}{h_i}$，一端的端点为 $(x_i,0)$。", "outputFormat": "共 $N+1$ 行，每行一个整数，第 $i$ 行的数表示您可以站在的位置个数，使得您至多在 $i-1$ 个人的视野内。", "hint": "#### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/ksz1n28u.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n#### 子任务\n**本题采用捆绑测试。**\n- Subtask 1（$60$ 分）：保证 $-10^6\\le L\\le R\\le 10^6$。\n- Subtask 2（$40$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^5$，$-10^9\\le L \\le R\\le 10^9$，$1\\le Y\\le 10^6$，$1\\le x_i\\le R$，$1\\le v_i,h_i\\le 100$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/index.html) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day1.pdf) T1 A Game with Grundy。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2020] A Game with Grundy", "background": "", "description": "**本题的所有讨论均在平面直角坐标系上进行。**\n\n有 $N$ 个人，每个人有一个视野，同时每个人在 $(x_i,0)$ 的位置上。\n\n视野可抽象为一个角。\n\n**注意，组成角的两条射线未在视野内。**\n\n现在，您可以站在 $(a,Y)$ 上，其中 $L\\le a\\le R$。\n\n请求出，对于每个 $i(0\\le i\\le N)$，您可以站在多少个位置，使得您至多在 $i$ 个人的视野内。 ", "inputFormat": "第一行为一个整数 $N$。\n\n第二行为三个整数 $L,R,Y$。\n\n接下来 $N$ 行，每行三个整数，分别为 $x_i,v_i,h_i$，其中 $v_i$ 和 $h_i$ 表示，组成角的两条射线的斜率分别为 $\\frac{v_i}{h_i},\\frac{-v_i}{h_i}$，一端的端点为 $(x_i,0)$。", "outputFormat": "共 $N+1$ 行，每行一个整数，第 $i$ 行的数表示您可以站在的位置个数，使得您至多在 $i-1$ 个人的视野内。", "hint": "#### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/ksz1n28u.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n#### 子任务\n**本题采用捆绑测试。**\n- Subtask 1（$60$ 分）：保证 $-10^6\\le L\\le R\\le 10^6$。\n- Subtask 2（$40$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^5$，$-10^9\\le L \\le R\\le 10^9$，$1\\le Y\\le 10^6$，$1\\le x_i\\le R$，$1\\le v_i,h_i\\le 100$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/index.html) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day1.pdf) T1 A Game with Grundy。", "locale": "zh-CN"}}}
{"pid": "P6642", "type": "P", "difficulty": 4, "samples": [["4\n4 4 3 2", "3"], ["3\n1 1 3\n", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "CCO（加拿大）"], "title": "[CCO 2020] Exercise Deadlines", "background": "", "description": "现在有 $N$ 个任务，第 $i$ 个任务需要在 $d_i$ 的时间前完成。\n\n完成一个任务只需要 $1$ 的时间。\n\n现在的完成顺序为 $1,2,3\\ldots N$，但很显然，这种顺序有可能无法完成全部任务。\n\n您可以交换任意**相邻**的任务序号来达到完成全部任务的结果。\n\n举个例子：$1,2,3\\ldots N\\to 1,3,2\\ldots N$。\n\n您需要在保证所有任务完成的情况下，输出最小的交换次数。\n\n如果无论如何都不能完成所有任务，请输出 `-1`。", "inputFormat": "第一行为一个整数 $N$。\n\n第二行为 $N$ 个整数 $d_i$。", "outputFormat": "仅一行一个整数，表示在保证所有任务完成的情况下，最小的交换次数。\n\n如果无论如何都不能完成所有任务，请输出 `-1`。", "hint": "#### 样例解释\n#### 样例 1 解释\n一种合法的完成顺序为 $1,4,3,2$，需要交换 $3$ 次。\n#### 样例 2 解释\n很明显，您不可能在同一时间内做完两项任务。\n\n#### 子任务\n**本题使用捆绑测试**\n- Subtask 1（$68$ 分）：$N\\le 5\\times 10^3$。\n- Subtask 1（$32$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 2\\times 10^5$，$1\\le d_i\\le N$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/index.html) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day1.pdf) T2 Exercise Deadlines。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2020] Exercise Deadlines", "background": "", "description": "现在有 $N$ 个任务，第 $i$ 个任务需要在 $d_i$ 的时间前完成。\n\n完成一个任务只需要 $1$ 的时间。\n\n现在的完成顺序为 $1,2,3\\ldots N$，但很显然，这种顺序有可能无法完成全部任务。\n\n您可以交换任意**相邻**的任务序号来达到完成全部任务的结果。\n\n举个例子：$1,2,3\\ldots N\\to 1,3,2\\ldots N$。\n\n您需要在保证所有任务完成的情况下，输出最小的交换次数。\n\n如果无论如何都不能完成所有任务，请输出 `-1`。", "inputFormat": "第一行为一个整数 $N$。\n\n第二行为 $N$ 个整数 $d_i$。", "outputFormat": "仅一行一个整数，表示在保证所有任务完成的情况下，最小的交换次数。\n\n如果无论如何都不能完成所有任务，请输出 `-1`。", "hint": "#### 样例解释\n#### 样例 1 解释\n一种合法的完成顺序为 $1,4,3,2$，需要交换 $3$ 次。\n#### 样例 2 解释\n很明显，您不可能在同一时间内做完两项任务。\n\n#### 子任务\n**本题使用捆绑测试**\n- Subtask 1（$68$ 分）：$N\\le 5\\times 10^3$。\n- Subtask 1（$32$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 2\\times 10^5$，$1\\le d_i\\le N$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/index.html) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day1.pdf) T2 Exercise Deadlines。\n", "locale": "zh-CN"}}}
{"pid": "P6643", "type": "P", "difficulty": 7, "samples": [["9 10\n0 1 1\n0 2 1\n0 3 1\n1 4 1\n2 5 1\n2 6 1\n3 7 1\n3 8 1\n2 4 5\n6 7 3\n", "11\n"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCO（加拿大）"], "title": "[CCO 2020] Mountains and Valleys", "background": null, "description": "有一个有 $N$ 个点 $M$ 条边，边有边权的无向图，图无重边、无自环，点的标号从 $0$ 开始。\n\n共有 $N-1$ 条边的边权为 $1$，其余边的边权均 $\\ge \\lceil \\frac{N}{3} \\rceil$ 且 $\\le N$，同时，如果仅考虑边权为 $1$ 的边，整个图会是一棵树。\n\n现在您要遍历每个点一遍，且使经过的边权总和最小。\n\n求最小的边权总和。\n\n**提醒：**\n- 您可以往返走一条边。\n- 您可以任选一个点出发。\n- 您只有一个人。", "inputFormat": "第一行为两个整数 $N,M$。\n\n接下来 $M$ 行，一行三个整数 $x_i,y_i,w_i$，表示有一条从 $x_i$ 到 $y_i$，边权为 $w_i$ 的边。", "outputFormat": "遍历每个点一遍，所需最小的边权总和。", "hint": "#### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/5ftpjk6m.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\n最优路径为 $4\\to 1\\to 0\\to 2\\to 5\\to 2\\to 6\\to 7\\to 3\\to 8$，边权和为 $1+1+1+1+1+1+3+1+1=11$。\n\n#### 子任务\n**本题使用捆绑测试。**\n- Subtask 1（$4$ 分）：保证 $N\\le 6$，$M\\le 10$。\n- Subtask 2（$8$ 分）：保证 $N\\le 20$，$M\\le 40$。\n- Subtask 3（$8$ 分）：保证 $N\\le 5\\times 10^3$，$M\\le 10^5$，$w_i=1$ 或 $\\lceil\\frac{N}{2}\\rceil\\le w_i\\le N$。\n- Subtask 4（$24$ 分）：保证 $N\\le 100$，$M\\le 200$。\n- Subtask 5（$8$ 分）：保证 $N\\le 500$，$M\\le 10^3$。\n- Subtask 6（$12$ 分）：保证 $N\\le 5\\times 10^3$，$M\\le 10^4$。\n- Subtask 7（$20$ 分）：保证 $N\\le 8\\times 10^4$，$M\\le 1.6\\times 10^5$。\n- Subtask 8（$16$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $4\\le N\\le 5\\times 10^5$，$N-1 \\le M\\le 2\\times 10^6$，$0\\le x_i,y_i\\le N-1$，$w_i=1$ 或者 $\\lceil \\frac{N}{3}\\rceil\\le w_i\\le N$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/index.html) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day1.pdf) T3 Mountains and Valleys。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2020] Mountains and Valleys", "background": null, "description": "有一个有 $N$ 个点 $M$ 条边，边有边权的无向图，图无重边、无自环，点的标号从 $0$ 开始。\n\n共有 $N-1$ 条边的边权为 $1$，其余边的边权均 $\\ge \\lceil \\frac{N}{3} \\rceil$ 且 $\\le N$，同时，如果仅考虑边权为 $1$ 的边，整个图会是一棵树。\n\n现在您要遍历每个点一遍，且使经过的边权总和最小。\n\n求最小的边权总和。\n\n**提醒：**\n- 您可以往返走一条边。\n- 您可以任选一个点出发。\n- 您只有一个人。", "inputFormat": "第一行为两个整数 $N,M$。\n\n接下来 $M$ 行，一行三个整数 $x_i,y_i,w_i$，表示有一条从 $x_i$ 到 $y_i$，边权为 $w_i$ 的边。", "outputFormat": "遍历每个点一遍，所需最小的边权总和。", "hint": "#### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/5ftpjk6m.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\n最优路径为 $4\\to 1\\to 0\\to 2\\to 5\\to 2\\to 6\\to 7\\to 3\\to 8$，边权和为 $1+1+1+1+1+1+3+1+1=11$。\n\n#### 子任务\n**本题使用捆绑测试。**\n- Subtask 1（$4$ 分）：保证 $N\\le 6$，$M\\le 10$。\n- Subtask 2（$8$ 分）：保证 $N\\le 20$，$M\\le 40$。\n- Subtask 3（$8$ 分）：保证 $N\\le 5\\times 10^3$，$M\\le 10^5$，$w_i=1$ 或 $\\lceil\\frac{N}{2}\\rceil\\le w_i\\le N$。\n- Subtask 4（$24$ 分）：保证 $N\\le 100$，$M\\le 200$。\n- Subtask 5（$8$ 分）：保证 $N\\le 500$，$M\\le 10^3$。\n- Subtask 6（$12$ 分）：保证 $N\\le 5\\times 10^3$，$M\\le 10^4$。\n- Subtask 7（$20$ 分）：保证 $N\\le 8\\times 10^4$，$M\\le 1.6\\times 10^5$。\n- Subtask 8（$16$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $4\\le N\\le 5\\times 10^5$，$N-1 \\le M\\le 2\\times 10^6$，$0\\le x_i,y_i\\le N-1$，$w_i=1$ 或者 $\\lceil \\frac{N}{3}\\rceil\\le w_i\\le N$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/index.html) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day1.pdf) T3 Mountains and Valleys。", "locale": "zh-CN"}}}
{"pid": "P6644", "type": "P", "difficulty": 6, "samples": [["4\nR\nRR\nBRB", "5\n1 4 2 1 3\n6\n2 3 1 2 3 4\n5\n3 1 2 3 4\n4\n4 3 1 2"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "Special Judge", "CCO（加拿大）"], "title": "[CCO 2020] Travelling Salesperson", "background": "", "description": "有一个有 $N$ 个点的完全图，边权为 $1$，边是红色或蓝色。\n\n对于每一个点，您需要构造从该点出发，经过每一个点至少一次且边权和最小的路径。\n\n为了增大难度，我们要求您从一条边走到另一条异色的边需花费一张票，并且您只有一张票。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来 $N$ 行，一行一个字符串，第 $i$ 行的字符串为 $C_i=C_{i,1},C_{i,2}\\ldots C_{i,i-1}$，如果 $C_{i,j}$ 为 `R`，说明从 $i$ 到 $j$ 的边为红色的，反之，则为蓝色。", "outputFormat": "输出共 $2\\times N$ 行。\n\n对于 $2\\times i-1(1\\le i\\le N)$ 行，您需要输出一个整数 $M_i$，表示您所构造的从 $i$ 出发的遍历每一个点的方案的长度。\n\n对于 $2\\times i (1\\le i\\le N)$ 行，您需要输出 $M_i$ 个整数，表示您的方案所遍历点的顺序。", "hint": "#### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/j79801x8.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n聪明的你一定发现了这个样例输出不是最优的。\n\n从 $3$ 出发的话，有最优方案为 $3\\to 1\\to 2\\to 4$，长度为 $4$，所以这个方案得 $\\lfloor 8+8\\times \\frac{2\\times 4-5}{4-1}\\rfloor=16$ 分。\n\n#### SPJ 计分策略\n本题的每个测试点按您设计的路线计分。\n\n对于您设计的第 $i$ 个方案，设其长度为 $M_i$，标准答案的第 $i$ 个方案长度为 $K_i$。\n\n如果 $M_i>2\\times K_i$ 或者您的方案错误，您会得 $0$ 分。\n\n如果 $M_i=K_i$ 且您的方案合法，您会得 $25$ 分。\n\n否则，如果您的方案合法，您会得 $\\lfloor 8+8\\times \\frac{2\\times K_i-M_i}{K_i-1}\\rfloor$ 分。\n\n这个测试点的分数为每个方案的得分的最小值。\n\n您的提交得分为每个测试点得分的最小值。\n\n**译者提醒：为了方便 SPJ 的编写和测试点的计分，每个测试点 $100$ 分，题目的计分策略里的所有分数会按比例计算。**\n\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 2\\times 10^3$，$C_{i,j}$ 为 `R` 或 `B`。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day2.pdf) T1 Travelling Salesperson。\n\n感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的 SPJ。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2020] Travelling Salesperson", "background": "", "description": "有一个有 $N$ 个点的完全图，边权为 $1$，边是红色或蓝色。\n\n对于每一个点，您需要构造从该点出发，经过每一个点至少一次且边权和最小的路径。\n\n为了增大难度，我们要求您从一条边走到另一条异色的边需花费一张票，并且您只有一张票。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来 $N$ 行，一行一个字符串，第 $i$ 行的字符串为 $C_i=C_{i,1},C_{i,2}\\ldots C_{i,i-1}$，如果 $C_{i,j}$ 为 `R`，说明从 $i$ 到 $j$ 的边为红色的，反之，则为蓝色。", "outputFormat": "输出共 $2\\times N$ 行。\n\n对于 $2\\times i-1(1\\le i\\le N)$ 行，您需要输出一个整数 $M_i$，表示您所构造的从 $i$ 出发的遍历每一个点的方案的长度。\n\n对于 $2\\times i (1\\le i\\le N)$ 行，您需要输出 $M_i$ 个整数，表示您的方案所遍历点的顺序。", "hint": "#### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/j79801x8.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n聪明的你一定发现了这个样例输出不是最优的。\n\n从 $3$ 出发的话，有最优方案为 $3\\to 1\\to 2\\to 4$，长度为 $4$，所以这个方案得 $\\lfloor 8+8\\times \\frac{2\\times 4-5}{4-1}\\rfloor=16$ 分。\n\n#### SPJ 计分策略\n本题的每个测试点按您设计的路线计分。\n\n对于您设计的第 $i$ 个方案，设其长度为 $M_i$，标准答案的第 $i$ 个方案长度为 $K_i$。\n\n如果 $M_i>2\\times K_i$ 或者您的方案错误，您会得 $0$ 分。\n\n如果 $M_i=K_i$ 且您的方案合法，您会得 $25$ 分。\n\n否则，如果您的方案合法，您会得 $\\lfloor 8+8\\times \\frac{2\\times K_i-M_i}{K_i-1}\\rfloor$ 分。\n\n这个测试点的分数为每个方案的得分的最小值。\n\n您的提交得分为每个测试点得分的最小值。\n\n**译者提醒：为了方便 SPJ 的编写和测试点的计分，每个测试点 $100$ 分，题目的计分策略里的所有分数会按比例计算。**\n\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 2\\times 10^3$，$C_{i,j}$ 为 `R` 或 `B`。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day2.pdf) T1 Travelling Salesperson。\n\n感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的 SPJ。", "locale": "zh-CN"}}}
{"pid": "P6645", "type": "P", "difficulty": 6, "samples": [["5\nA 1 5\nA 2 7\nA 4 6\nA 6 8\nR 4 6", "4\n6\n5\n4\n7"]], "limits": {"time": [3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500, 3500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "CCO（加拿大）"], "title": "[CCO 2020] Interval Collection", "background": "本题题面来自 [LOJ](https://loj.ac/p/3321)。", "description": "Altina 正进行区间收藏。一对满足 $l < r$ 的正整数 $[l, r]$ 为一个区间，我们称这样的区间的长度为 $r - l$。\n\n我们称区间 $[l, r]$ 包含区间 $[x, y]$，当且仅当 $l \\le x$ 并且 $y \\le r$。特别地，每个区间都包含自身。\n\n定义一个非空集合 $S$ 的**最大公共子区间**为被 $S$ 中每个区间都包含的区间中最长的那个，如果没有这样的区间则未定义。\n\n定义一个非空集合 $S$ 的**最小公共超区间**为包含 $S$ 中每个区间的区间中最短的那个，注意这样的区间总是存在。\n\n初始时，Altina 的收藏中没有任何区间。接下来会发生 $Q$ 个事件，对 Altina 的收藏产生改变。\n\n1. Altina 往她的收藏中添加一个区间 $[l, r]$，如果此时收藏中已有 $[l, r]$，应该被算作不同的两个区间。\n2. Altina 移除一个在收藏中已经存在的区间 $[l, r]$，如有多个只以移除恰好一个。\n\n在每个事件发生后，Altina 选择一个她的收藏中的非空子集 $S$，并且满足如下条件：\n\n- 在所有的选取方案中，她会选择最大公共子区间未定义的。如果不存在这样的方案，则她会选择最大公共子区间的长度最小的。\n- 在所有的满足上述条件的集合 $S$ 中，她会选择最小公共超区间的长度最小的。\n\n请你在每一个事件发生后，输出 Altina 会选择的集合 $S$ 的最小公共超区间的长度。", "inputFormat": "第一行一个正整数 $Q$，表示将会发生的事件的个数。  \n接下来 $Q$ 行，每行描述一个事件，格式如下：\n\n- $\\mathtt{A}\\;l\\;r$：添加一个区间 $[l, r]$ 到 Altina 的收藏中。\n- $\\mathtt{R}\\;l\\;r$：从 Altina 的收藏中移除一个区间 $[l, r]$，保证这个区间在她的收藏中存在，且移除后她的收藏非空。", "outputFormat": "输出 $Q$ 行，每行一个正整数表示每个事件发生后 Altina 会选择的集合 $S$ 的最小公共超区间的长度。", "hint": "#### 样例解释\n加入 $[1,5]$，选择 $[1,5]$ 最优，答案为 $4$。\n\n加入 $[2,7]$，选择 $[1,5],[2,7]$ 最优，答案为 $7-1=6$。\n\n加入 $[4,6]$，选择 $[1,5],[4,6]$ 最优，答案为 $6-1=5$。\n\n加入 $[6,8]$，选择 $[4,6],[6,8]$ 最优，答案为 $8-4=4$。\n\n删除 $[4,6]$，选择 $[1,5],[6,8]$ 最优，答案为 $8-1=7$。\n\n#### 子任务\n**本题使用捆绑测试**\n\n- Subtask 1（$12$ 分）：$Q\\le 500$。\n- Subtask 2（$32$ 分）：$Q\\le 1.2\\times 10^4$。\n- Subtask 3（$28$ 分）：$Q\\le 5\\times 10^4$。\n- Subtask 4（$16$ 分）：对于任两个区间 $(l_1,r_1)$ 和 $(l_2,r_2)$，保证 $r_1<l_2$ 或者 $r_2<l_1$。\n- Subtask 5（$12$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le Q\\le 5\\times 10^5$，$1\\le l,r\\le 10^6$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day2.pdf) T2 Interval Collection。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2020] Interval Collection", "background": "本题题面来自 [LOJ](https://loj.ac/p/3321)。", "description": "Altina 正进行区间收藏。一对满足 $l < r$ 的正整数 $[l, r]$ 为一个区间，我们称这样的区间的长度为 $r - l$。\n\n我们称区间 $[l, r]$ 包含区间 $[x, y]$，当且仅当 $l \\le x$ 并且 $y \\le r$。特别地，每个区间都包含自身。\n\n定义一个非空集合 $S$ 的**最大公共子区间**为被 $S$ 中每个区间都包含的区间中最长的那个，如果没有这样的区间则未定义。\n\n定义一个非空集合 $S$ 的**最小公共超区间**为包含 $S$ 中每个区间的区间中最短的那个，注意这样的区间总是存在。\n\n初始时，Altina 的收藏中没有任何区间。接下来会发生 $Q$ 个事件，对 Altina 的收藏产生改变。\n\n1. Altina 往她的收藏中添加一个区间 $[l, r]$，如果此时收藏中已有 $[l, r]$，应该被算作不同的两个区间。\n2. Altina 移除一个在收藏中已经存在的区间 $[l, r]$，如有多个只以移除恰好一个。\n\n在每个事件发生后，Altina 选择一个她的收藏中的非空子集 $S$，并且满足如下条件：\n\n- 在所有的选取方案中，她会选择最大公共子区间未定义的。如果不存在这样的方案，则她会选择最大公共子区间的长度最小的。\n- 在所有的满足上述条件的集合 $S$ 中，她会选择最小公共超区间的长度最小的。\n\n请你在每一个事件发生后，输出 Altina 会选择的集合 $S$ 的最小公共超区间的长度。", "inputFormat": "第一行一个正整数 $Q$，表示将会发生的事件的个数。  \n接下来 $Q$ 行，每行描述一个事件，格式如下：\n\n- $\\mathtt{A}\\;l\\;r$：添加一个区间 $[l, r]$ 到 Altina 的收藏中。\n- $\\mathtt{R}\\;l\\;r$：从 Altina 的收藏中移除一个区间 $[l, r]$，保证这个区间在她的收藏中存在，且移除后她的收藏非空。", "outputFormat": "输出 $Q$ 行，每行一个正整数表示每个事件发生后 Altina 会选择的集合 $S$ 的最小公共超区间的长度。", "hint": "#### 样例解释\n加入 $[1,5]$，选择 $[1,5]$ 最优，答案为 $4$。\n\n加入 $[2,7]$，选择 $[1,5],[2,7]$ 最优，答案为 $7-1=6$。\n\n加入 $[4,6]$，选择 $[1,5],[4,6]$ 最优，答案为 $6-1=5$。\n\n加入 $[6,8]$，选择 $[4,6],[6,8]$ 最优，答案为 $8-4=4$。\n\n删除 $[4,6]$，选择 $[1,5],[6,8]$ 最优，答案为 $8-1=7$。\n\n#### 子任务\n**本题使用捆绑测试**\n\n- Subtask 1（$12$ 分）：$Q\\le 500$。\n- Subtask 2（$32$ 分）：$Q\\le 1.2\\times 10^4$。\n- Subtask 3（$28$ 分）：$Q\\le 5\\times 10^4$。\n- Subtask 4（$16$ 分）：对于任两个区间 $(l_1,r_1)$ 和 $(l_2,r_2)$，保证 $r_1<l_2$ 或者 $r_2<l_1$。\n- Subtask 5（$12$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le Q\\le 5\\times 10^5$，$1\\le l,r\\le 10^6$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day2.pdf) T2 Interval Collection。", "locale": "zh-CN"}}}
{"pid": "P6646", "type": "P", "difficulty": 7, "samples": [["5 2 7\n1 5\n1 3\n2 3\n1 6\n2 1\n1 1\n1 1", "4\n6\n6\n7\n8\n9\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "堆", "CCO（加拿大）"], "title": "[CCO 2020] Shopping Plans", "background": "", "description": "有 $N$ 个商品，每个商品有个种类 $a_i$，有个价格 $c_i$。\n\n对于第 $j$ 个种类，必须购买个数位于 $[x_j,y_j]$ 的商品，即最少购买 $x_j$ 个，最多购买 $y_j$ 个该种类的商品。\n\n您需要求出前 $K$ 种便宜的方案所需的价钱，如果没有这样的方案，请输出 `-1`。\n\n特别的，如果有相同钱数，但是具体方案不相同的，算作两种方案。", "inputFormat": "第一行为三个整数 $N,M,K$。\n\n接下来 $N$ 行，一行两个整数 $a_i,c_i$。\n\n接下来 $M$ 行，一行两个整数 $x_j,y_j$。", "outputFormat": "共 $K$ 行，一行一个整数，第 $i$ 行表示第 $i$ 便宜的方案所需的价钱。", "hint": "#### 样例解释\n共有 $5$ 个商品，$2$ 种类型。\n\n类型 $1$：$\\{3,5,6\\}$，类型 $2$：$\\{1,3\\}$。\n\n类型 $1$ 与类型 $2$ 均只能选择一个商品。\n\n对于最便宜的方案，选择 $\\{1,3\\}$ 即可。\n\n以此类推。\n\n#### 子任务\n**本题使用捆绑测试**\n\n- Subtask 1（$20$ 分）：$x_j,y_j=1$，$N,M,K\\le4\\times 10^3$。\n- Subtask 2（$20$ 分）：$x_j,y_j=1$，$N,M,c_i\\le 4\\times 10^3$。\n- Subtask 3（$20$ 分）：$x_j,y_j=1$。\n- Subtask 4（$20$ 分）：$x_j=0$。\n- Subtask 5（$20$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le N,M,K\\le 2\\times 10^5$，$1\\le a_i\\le M$，$1\\le c_i\\le 10^9$，$0\\le x_j\\le y_j\\le N$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day2.pdf) T3 Shopping Plans。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2020] Shopping Plans", "background": "", "description": "有 $N$ 个商品，每个商品有个种类 $a_i$，有个价格 $c_i$。\n\n对于第 $j$ 个种类，必须购买个数位于 $[x_j,y_j]$ 的商品，即最少购买 $x_j$ 个，最多购买 $y_j$ 个该种类的商品。\n\n您需要求出前 $K$ 种便宜的方案所需的价钱，如果没有这样的方案，请输出 `-1`。\n\n特别的，如果有相同钱数，但是具体方案不相同的，算作两种方案。", "inputFormat": "第一行为三个整数 $N,M,K$。\n\n接下来 $N$ 行，一行两个整数 $a_i,c_i$。\n\n接下来 $M$ 行，一行两个整数 $x_j,y_j$。", "outputFormat": "共 $K$ 行，一行一个整数，第 $i$ 行表示第 $i$ 便宜的方案所需的价钱。", "hint": "#### 样例解释\n共有 $5$ 个商品，$2$ 种类型。\n\n类型 $1$：$\\{3,5,6\\}$，类型 $2$：$\\{1,3\\}$。\n\n类型 $1$ 与类型 $2$ 均只能选择一个商品。\n\n对于最便宜的方案，选择 $\\{1,3\\}$ 即可。\n\n以此类推。\n\n#### 子任务\n**本题使用捆绑测试**\n\n- Subtask 1（$20$ 分）：$x_j,y_j=1$，$N,M,K\\le4\\times 10^3$。\n- Subtask 2（$20$ 分）：$x_j,y_j=1$，$N,M,c_i\\le 4\\times 10^3$。\n- Subtask 3（$20$ 分）：$x_j,y_j=1$。\n- Subtask 4（$20$ 分）：$x_j=0$。\n- Subtask 5（$20$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le N,M,K\\le 2\\times 10^5$，$1\\le a_i\\le M$，$1\\le c_i\\le 10^9$，$0\\le x_j\\le y_j\\le N$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2020/) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2020/cco/day2.pdf) T3 Shopping Plans。", "locale": "zh-CN"}}}
{"pid": "P6647", "type": "P", "difficulty": 6, "samples": [["5 3\n2 5 7 1 4\n", "12"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2019", "线段树", "CCC（加拿大）", "动态规划优化"], "title": "[CCC 2019] Tourism", "background": "**警告：滥用本题评测将被封号！**\n\n\nShuchong 和您正在畅玩洛谷著名景点。  \n但是他因为太菜爽约了。   \n您只好独自去游览洛谷著名景点。", "description": "您正在游览 $n$ 个景点，编号为 $1$ 到 $n$，并且因为 3k 的强硬要求，您必须按照 $1$ 到 $n$ 的顺序浏览。您一天最多可以游览 $k$ 个景点，因为剩下的时间您要用来爆切黑题，所以您想尽快浏览完这些景点。   \n每个景点对您的吸引度不同，第 $i$ 个景点对您的吸引度为 $a_i$，一天游览的这些景点的官方评分就是这天游览的景点的 $a_i$ 的最大值。最后，您需要把每天的官方评分加起来获得最后的评分。   \n因为您太着急想爆切黑题了，所以您提前计算好了浏览完所有景点最少需要多少天（假设它为 $t$），您想知道：\n\n- 用 $t$ 天浏览\n- 满足每天最多游览 $k$ 个景点\n- 能得到的最后的评分最大是多少", "inputFormat": "第一行两个整数 $n,k$ 代表景点数和最多游览景点数。   \n第二行 $n$ 个整数 $a_i$ 代表每个景点的吸引度。", "outputFormat": "一行一个整数代表\n\n- 用 $t$ 天浏览\n- 满足每天最多游览 $k$ 个景点\n- 能得到的最后的评分最大是多少\n\n（$t$ 为浏览完所有景点最少需要多少天）", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n- 我们很容易就知道至少需要 $2$ 天就可以浏览完所有景点。  \n- 但是我们不能一天内浏览完所有景点。（$n>k$）   \n- 我们把景点尽量平分，有以下两种情况：\n\t- 如果第一天浏览 $2$ 个，第二天浏览 $3$ 个，最终的评分为 $5+7=12$。\n    - 如果第二天浏览 $3$ 个，第二天浏览 $2$ 个，最终的评分为  $7+4=11$。\n- 最后的答案为 $\\max(12,11)=12$。\n\n#### 数据规定与说明\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$2k \\ge n$。\n- Subtask 2（20 pts）：$k \\le 100$，$n \\le 10^5$。\n- Subtask 3（60 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 10^6$，$1 \\le a_i \\le 10^9$。\n\n#### 说明\n\n**翻译自 [CCC 2019](https://cemc.math.uwaterloo.ca/contests/computing/2019/index.html) Senior T4 [Tourism](https://cemc.math.uwaterloo.ca/contests/computing/2019/stage%201/seniorEF.pdf)。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2019] Tourism", "background": "**警告：滥用本题评测将被封号！**\n\n\nShuchong 和您正在畅玩洛谷著名景点。  \n但是他因为太菜爽约了。   \n您只好独自去游览洛谷著名景点。", "description": "您正在游览 $n$ 个景点，编号为 $1$ 到 $n$，并且因为 3k 的强硬要求，您必须按照 $1$ 到 $n$ 的顺序浏览。您一天最多可以游览 $k$ 个景点，因为剩下的时间您要用来爆切黑题，所以您想尽快浏览完这些景点。   \n每个景点对您的吸引度不同，第 $i$ 个景点对您的吸引度为 $a_i$，一天游览的这些景点的官方评分就是这天游览的景点的 $a_i$ 的最大值。最后，您需要把每天的官方评分加起来获得最后的评分。   \n因为您太着急想爆切黑题了，所以您提前计算好了浏览完所有景点最少需要多少天（假设它为 $t$），您想知道：\n\n- 用 $t$ 天浏览\n- 满足每天最多游览 $k$ 个景点\n- 能得到的最后的评分最大是多少", "inputFormat": "第一行两个整数 $n,k$ 代表景点数和最多游览景点数。   \n第二行 $n$ 个整数 $a_i$ 代表每个景点的吸引度。", "outputFormat": "一行一个整数代表\n\n- 用 $t$ 天浏览\n- 满足每天最多游览 $k$ 个景点\n- 能得到的最后的评分最大是多少\n\n（$t$ 为浏览完所有景点最少需要多少天）", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n- 我们很容易就知道至少需要 $2$ 天就可以浏览完所有景点。  \n- 但是我们不能一天内浏览完所有景点。（$n>k$）   \n- 我们把景点尽量平分，有以下两种情况：\n\t- 如果第一天浏览 $2$ 个，第二天浏览 $3$ 个，最终的评分为 $5+7=12$。\n    - 如果第二天浏览 $3$ 个，第二天浏览 $2$ 个，最终的评分为  $7+4=11$。\n- 最后的答案为 $\\max(12,11)=12$。\n\n#### 数据规定与说明\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$2k \\ge n$。\n- Subtask 2（20 pts）：$k \\le 100$，$n \\le 10^5$。\n- Subtask 3（60 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 10^6$，$1 \\le a_i \\le 10^9$。\n\n#### 说明\n\n**翻译自 [CCC 2019](https://cemc.math.uwaterloo.ca/contests/computing/2019/index.html) Senior T4 [Tourism](https://cemc.math.uwaterloo.ca/contests/computing/2019/stage%201/seniorEF.pdf)。**  \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。", "locale": "zh-CN"}}}
{"pid": "P6648", "type": "P", "difficulty": 5, "samples": [["4 2\n3\n1 2\n4 2 1\n6 1 4 2", "23"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "递推", "2019", "倍增", "CCC（加拿大）", "ST 表"], "title": "[CCC 2019] Triangle: The Data Structure", "background": "在 Shuchong 的平行宇宙里，计算机学中的最重要的数据结构就是三角形。   \n注：因为原数据包太大，故这题缩减了一些数据，具体缩减的数据点如下：\n\n- Subtask 1：1 ~ 10\n- Subtask 2：1 ~ 10\n\n所以此题拥有的测试点为：\n\n- Subtask 1：11 ~ 26\n- Subtask 2：11 ~ 24\n\n若想测试本题没有的测试点请到 [此处](https://www.luogu.com.cn/problem/U120704) 测试。", "description": "大小为 $m$ 的一个三角形由 $m$ 行组成，第 $i$ 行包含 $i$ 个元素。   \n并且，这些行必须排为等边三角形的形状。  \n比如说，以下是一个 $m=4$ 的三角形。   \n![](https://cdn.luogu.com.cn/upload/image_hosting/fdut4hrs.png)    \n每个三角形还包含子三角形。   \n比如说上面这个三角形，包含：\n- $10$ 个大小为 $1$ 的三角形。\n- $6$ 个大小为 $2$ 的三角形。\n- $3$ 个大小为 $3$ 的三角形。\n\n注意，每个三角形都是自身的子三角形。   \n现在给定一个大小为 $n$ 的三角形，求对于每个大小为 $k$ 的子三角形，子三角形内几个数的最大值的和。", "inputFormat": "第一行两个整数 $n,k$ 代表三角形的大小和要求的子三角形的大小。   \n接下来 $n$ 行第 $i$ 行有 $i$ 个整数代表这个三角形。", "outputFormat": "一行一个整数代表对于每个大小为 $k$ 的子三角形，子三角形内几个数的最大值的和。", "hint": "#### 数据规模与约定\n\n- Subtask 1（25 pts）：$n \\le 1000$。\n- Subtask 2（75 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 3000$，$0 \\le $ 三角形内每个数 $\\le 10^9$。\n\n#### 说明\n\n**翻译自 [CCC 2019](https://cemc.math.uwaterloo.ca/contests/computing/2019/index.html) Senior T5 [Triangle: The Data Structure](https://cemc.math.uwaterloo.ca/contests/computing/2019/stage%201/seniorEF.pdf)。**   \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2019] Triangle: The Data Structure", "background": "在 Shuchong 的平行宇宙里，计算机学中的最重要的数据结构就是三角形。   \n注：因为原数据包太大，故这题缩减了一些数据，具体缩减的数据点如下：\n\n- Subtask 1：1 ~ 10\n- Subtask 2：1 ~ 10\n\n所以此题拥有的测试点为：\n\n- Subtask 1：11 ~ 26\n- Subtask 2：11 ~ 24\n\n若想测试本题没有的测试点请到 [此处](https://www.luogu.com.cn/problem/U120704) 测试。", "description": "大小为 $m$ 的一个三角形由 $m$ 行组成，第 $i$ 行包含 $i$ 个元素。   \n并且，这些行必须排为等边三角形的形状。  \n比如说，以下是一个 $m=4$ 的三角形。   \n![](https://cdn.luogu.com.cn/upload/image_hosting/fdut4hrs.png)    \n每个三角形还包含子三角形。   \n比如说上面这个三角形，包含：\n- $10$ 个大小为 $1$ 的三角形。\n- $6$ 个大小为 $2$ 的三角形。\n- $3$ 个大小为 $3$ 的三角形。\n\n注意，每个三角形都是自身的子三角形。   \n现在给定一个大小为 $n$ 的三角形，求对于每个大小为 $k$ 的子三角形，子三角形内几个数的最大值的和。", "inputFormat": "第一行两个整数 $n,k$ 代表三角形的大小和要求的子三角形的大小。   \n接下来 $n$ 行第 $i$ 行有 $i$ 个整数代表这个三角形。", "outputFormat": "一行一个整数代表对于每个大小为 $k$ 的子三角形，子三角形内几个数的最大值的和。", "hint": "#### 数据规模与约定\n\n- Subtask 1（25 pts）：$n \\le 1000$。\n- Subtask 2（75 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le k \\le n \\le 3000$，$0 \\le $ 三角形内每个数 $\\le 10^9$。\n\n#### 说明\n\n**翻译自 [CCC 2019](https://cemc.math.uwaterloo.ca/contests/computing/2019/index.html) Senior T5 [Triangle: The Data Structure](https://cemc.math.uwaterloo.ca/contests/computing/2019/stage%201/seniorEF.pdf)。**   \n翻译者：@[一只书虫仔](https://www.luogu.com.cn/user/114914)。", "locale": "zh-CN"}}}
{"pid": "P6649", "type": "P", "difficulty": 4, "samples": [["3 3\n-1 -3 2\n5 -1 -6\n-3 7 -6", "-17"], ["3 3\n1 2 3\n4 5 -6\n-7 8 9", "-2"], ["4 4\n-1 2 -3 3\n-7 -8 -9 -10\n-7 20 -3 15\n-8 7 0 -1", "-32"], ["17 17\n536854 594409 871941 -388369 465282 -638502 -121382 -481711 -648747 583148 -407200 -756103 225750 685372 -952316 -115958 688880\n-248927 927601 -41187 -729045 -902796 -714842 537911 -972691 646275 -968170 811593 -288461 -492905 954416 455549 839671 927565\n317945 317920 -182592 -477 239886 747388 -323625 132984 -147642 637483 948110 750134 450272 -689049 862925 -327794 5865\n196810 600825 -547716 873435 -389664 882011 -708186 504812 955352 -657431 -963785 -899423 671938 -770932 -428505 204660 -235382\n592361 -686010 805643 -168792 871936 -334335 402655 783215 -315411 480760 371553 -87790 -111152 142452 918172 968088 364749\n200836 914812 962142 -276470 757612 -369974 955746 -740349 -218873 976129 94337 -853562 69100 -479860 865764 -865684 -782689\n-977548 -226536 197351 516125 137800 -391378 -392070 -954935 -399763 284345 -752733 195962 268045 800832 916405 578799 782717\n-111876 -384522 785558 -663839 -346670 317823 -902413 -138975 794147 -377010 -370134 925156 333264 -827840 859848 773995 -335011\n495949 -158831 446359 962836 -861756 936842 533809 -58318 -462176 561405 -127056 -497496 -636673 -312588 -354065 -489258 926614\n603167 -154853 601062 951736 758952 -290610 838384 -455373 -823858 293098 782955 -711867 739231 -835281 -940599 938774 389756\n-762794 -788479 -122327 -608246 998569 -70814 -198006 -361373 658973 -811815 -26348 240052 251877 -660298 -390790 558411 -90995\n213545 492431 847902 -681087 -721770 -482897 -577178 -400679 712628 -943805 -613025 927604 867612 -753902 -235086 -60571 445511\n901422 -769346 -655924 638444 188703 964292 865767 -298677 -245870 643123 -87216 -18374 -115040 -954311 -220506 919822 -183816\n-576494 -481376 139875 360147 411997 437956 755645 874372 130352 -770235 -708813 850918 -835413 -426540 62763 722776 767682\n-237305 -121638 -273740 518922 -423961 690214 -253799 571892 915095 586784 670083 -764317 14014 -103481 -750401 325979 70672\n323842 988625 859616 920791 -749116 -660548 302396 408853 -944605 732263 -38368 223609 -484449 712951 831842 -200066 -965163\n-659884 172567 -482821 -666287 42438 -113937 -539200 -57775 -558423 116068 532754 -440321 456398 -216316 293270 771477 583186\n", "-28761600"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "O2优化"], "title": "「SWTR-5」Grid", "background": "**赛时提醒：格子可以重复经过，但分数只算一次。**", "description": "小 A 有一个 $n\\times m$ 的网格，每个格子上都写着一个数字。为方便描述，令左上角的网格为 $(1,1)$，右下角的网格为 $(n,m)$。\n\n小 A 可以进入最下方第 $n$ 行的任意一个网格，并按照以下规则进行游戏：\n\n- 设小 A **第一次进入第 $i$ 行**的位置为 $(i,r_i)$：  \n如果小 A 在 $(i,r_i)$，则他只能向左或向上跳。否则他可以向左，向右或向上跳。\n- 小 A 不能跳出网格，除非他在第 $1$ 行，这代表结束整场游戏。\n\n定义一局游戏的得分为所有小 A 经过的格子上的数字之和。小 A 想请你帮他求出得分的最小值。", "inputFormat": "第一行两个整数 $n,m$，分别表示网格的行数和列数。\n\n第二至 $n+1$ 行每行 $m$ 个整数 $a_{i,j}$，表示 $(i,j)$ 上的数。", "outputFormat": "一行一个整数，表示最小值。", "hint": "「样例说明」\n\n样例 $1$ 的解释如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1l4pl5s2.png)\n\n「数据范围与约定」\n\n**本题采用捆绑测试。**\n\n- Subtask 1（3 points）：$a_{i,j}\\leq 0$。\n- Subtask 2（12 points）：$n,m\\leq 5$。\n- Subtask 3（15 points）：$n=2$。\n- Subtask 4（18 points）：$n,m\\leq 90$。\n- Subtask 5（22 points）：$n,m\\leq 400$。\n- Subtask 6（30 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：$1\\leq n,m\\leq 10^3$，$-10^6 \\leq a_{i,j}\\leq 10^6$。\n\n---\n\n「题目来源」\n\n[Sweet Round 05](https://www.luogu.com.cn/contest/28195) A。  \nidea & solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-5」Grid", "background": "**赛时提醒：格子可以重复经过，但分数只算一次。**", "description": "小 A 有一个 $n\\times m$ 的网格，每个格子上都写着一个数字。为方便描述，令左上角的网格为 $(1,1)$，右下角的网格为 $(n,m)$。\n\n小 A 可以进入最下方第 $n$ 行的任意一个网格，并按照以下规则进行游戏：\n\n- 设小 A **第一次进入第 $i$ 行**的位置为 $(i,r_i)$：  \n如果小 A 在 $(i,r_i)$，则他只能向左或向上跳。否则他可以向左，向右或向上跳。\n- 小 A 不能跳出网格，除非他在第 $1$ 行，这代表结束整场游戏。\n\n定义一局游戏的得分为所有小 A 经过的格子上的数字之和。小 A 想请你帮他求出得分的最小值。", "inputFormat": "第一行两个整数 $n,m$，分别表示网格的行数和列数。\n\n第二至 $n+1$ 行每行 $m$ 个整数 $a_{i,j}$，表示 $(i,j)$ 上的数。", "outputFormat": "一行一个整数，表示最小值。", "hint": "「样例说明」\n\n样例 $1$ 的解释如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1l4pl5s2.png)\n\n「数据范围与约定」\n\n**本题采用捆绑测试。**\n\n- Subtask 1（3 points）：$a_{i,j}\\leq 0$。\n- Subtask 2（12 points）：$n,m\\leq 5$。\n- Subtask 3（15 points）：$n=2$。\n- Subtask 4（18 points）：$n,m\\leq 90$。\n- Subtask 5（22 points）：$n,m\\leq 400$。\n- Subtask 6（30 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：$1\\leq n,m\\leq 10^3$，$-10^6 \\leq a_{i,j}\\leq 10^6$。\n\n---\n\n「题目来源」\n\n[Sweet Round 05](https://www.luogu.com.cn/contest/28195) A。  \nidea & solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。", "locale": "zh-CN"}}}
{"pid": "P6650", "type": "P", "difficulty": 4, "samples": [["4 2\n6 4 2 3", "7"], ["5 3\n8 6 9 6 4", "13"], ["17 17\n29 38 9 10 16 5 1 10 27 20 11 9 15 11 2 3 10 \n", "17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "「SWTR-5」Sequence", "background": "", "description": "小 A 有一个长度为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$。他可以选择一个区间 $[l,r]$ 满足其最大值与最小值的差不超过 $k$。\n\n他还需找出 $m$ 个**互不相同的整数** $p_1,p_2,\\cdots,p_m$，满足：\n\n- $m$ 为正整数。\n- $\\prod\\limits_{i=l}^ra_i=\\prod\\limits_{i=1}^mp_i$。即选择区间的乘积等于这 $m$ 个数的乘积。\n- $p_i$ 为一个质数的正整数次幂。\n\n这 $m$ 个数的约数个数之和就是小 A 的得分。帮他求出得分的最大值。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示这个序列。", "outputFormat": "一行一个整数表示答案。", "hint": "「样例说明」\n\n样例 $1$：选择区间 $[1,2]$，再选择 $p_1=2$，$p_2=3$，$p_3=4$，可以达到最大值 $7$，方案不唯一。\n\n样例 $2$：选择区间 $[1,4]$，再选择 $p_1=4$，$p_2=8$，$p_3=3$，$p_4=27$，可以达到最大值 $13$。\n\n「数据范围与约定」\n\n**本题采用捆绑测试**。\n\n- Subtask 1（1 points）：$n=1$ 且 $a_1$ 为质数。\n- Subtask 2（9 points）：$n=1$。\n- Subtask 3（20 points）：$n\\leq 10$，$a_i \\leq 20$。\n- Subtask 4（13 points）：$n\\leq 200$，$a_i \\leq 200$。\n- Subtask 5（17 points）：$n\\leq 2\\times 10^3$。\n- Subtask 6（15 points）：$a_i$ 为质数。\n- Subtask 7（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^5$，$2 \\leq a_i \\leq 10^5$，$0 \\leq k \\leq 10^5$。\n\n---\n\n「题目来源」\n\n[Sweet Round 05](https://www.luogu.com.cn/contest/28195) B。    \nidea & solution：[ET2006](https://www.luogu.com.cn/user/115194)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-5」Sequence", "background": "", "description": "小 A 有一个长度为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$。他可以选择一个区间 $[l,r]$ 满足其最大值与最小值的差不超过 $k$。\n\n他还需找出 $m$ 个**互不相同的整数** $p_1,p_2,\\cdots,p_m$，满足：\n\n- $m$ 为正整数。\n- $\\prod\\limits_{i=l}^ra_i=\\prod\\limits_{i=1}^mp_i$。即选择区间的乘积等于这 $m$ 个数的乘积。\n- $p_i$ 为一个质数的正整数次幂。\n\n这 $m$ 个数的约数个数之和就是小 A 的得分。帮他求出得分的最大值。", "inputFormat": "第一行两个整数 $n,k$。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示这个序列。", "outputFormat": "一行一个整数表示答案。", "hint": "「样例说明」\n\n样例 $1$：选择区间 $[1,2]$，再选择 $p_1=2$，$p_2=3$，$p_3=4$，可以达到最大值 $7$，方案不唯一。\n\n样例 $2$：选择区间 $[1,4]$，再选择 $p_1=4$，$p_2=8$，$p_3=3$，$p_4=27$，可以达到最大值 $13$。\n\n「数据范围与约定」\n\n**本题采用捆绑测试**。\n\n- Subtask 1（1 points）：$n=1$ 且 $a_1$ 为质数。\n- Subtask 2（9 points）：$n=1$。\n- Subtask 3（20 points）：$n\\leq 10$，$a_i \\leq 20$。\n- Subtask 4（13 points）：$n\\leq 200$，$a_i \\leq 200$。\n- Subtask 5（17 points）：$n\\leq 2\\times 10^3$。\n- Subtask 6（15 points）：$a_i$ 为质数。\n- Subtask 7（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^5$，$2 \\leq a_i \\leq 10^5$，$0 \\leq k \\leq 10^5$。\n\n---\n\n「题目来源」\n\n[Sweet Round 05](https://www.luogu.com.cn/contest/28195) B。    \nidea & solution：[ET2006](https://www.luogu.com.cn/user/115194)。", "locale": "zh-CN"}}}
{"pid": "P6651", "type": "P", "difficulty": 5, "samples": [["7 14\n3 2\n4 5\n2 5\n2 6\n3 1\n3 5\n3 7\n3 6\n6 4\n1 4\n6 5\n1 6\n7 2\n7 4\n7\n3 2 4 6\n2 4 6\n2 2 5\n2 1 4\n0\n1 4\n1 6", "1\n3\n0\n6\n13\n7\n5"], ["233 1\n1 2\n6\n0\n1 10\n2 10 40\n1 1\n1 2\n2 1 2", "232\n231\n230\n231\n231\n231"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "O2优化", "拓扑排序", "容斥原理"], "title": "「SWTR-5」Chain", "background": "", "description": "给定 $n$ 个点，$m$ 条边的有向无环图。不保证图连通。\n\n$q$ 次询问，每次给出 $k$ 和 $k$ 个互不相同的数 $c_i$，求出如果去掉这 $k$ 个点，整个有向无环图将剩余多少条链。答案对 $10^9+7$ 取模。**每次询问独立。**\n\n- “链”的定义是：我们设一条长度为 $p$ 的链的路径为 $w_0\\to w_1\\to\\cdots\\to w_{p-1}\\to w_p$，则应满足 $w_0$ 入度为 $0$，$w_p$ 出度为 $0$。你可以将其理解为一条食物链。\n\n- 两条链是“不同的”，当且仅当它们的长度不同，或者经过的点集不同。\n\n- **需要特别注意的是，删去某些点后新产生的链不计入答案。** 例如 $1\\to 2\\to 3\\to 4$ 一图中，有 $1$ 条链 $1\\to 2\\to 3\\to 4$。如果去掉 $2$ 号点，则剩余 $0$ 条链。", "inputFormat": "第一行两个整数 $n,m$，分别表示点的个数和边的条数。\n\n接下来 $m$ 行，每行两个整数 $u,v(u\\neq v)$，表示 $u\\to v$ 有一条有向边。\n\n第 $m+2$ 行一个整数 $q$，表示询问个数。\n\n接下来 $q$ 行：  \n- 每行先是一个整数 $k$，表示去掉的点的个数。\n- 接下来 $k$ 个整数 $c_i$，表示去掉的点的编号。", "outputFormat": "共 $q$ 行，每行表示该次询问答案对 $10^9+7$ 取模后的值。", "hint": "「样例 $1$ 说明」\n\nDAG 如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2gbdoemh.png)\n\n询问 $1$：如果去掉 $2,4,6$，则剩余 $1$ 条链：$3\\to 5$。\n\n询问 $2$：如果去掉 $4,6$，则剩余 $3$ 条链：$3\\to 5$，$3\\to 2\\to 5$，$3\\to 7\\to 2\\to 5$。\n\n询问 $7$：如果去掉 $6$，则剩余 $5$ 条链：$3\\to 5$，$3\\to 2\\to 5$，$3\\to 7\\to 2\\to 5$，$3\\to 1\\to 4\\to 5$，$3\\to 7\\to 4\\to 5$。\n\n「数据范围与约定」\n\n**本题采用捆绑测试。**\n\n- Subtask 1（1 point）：给定的图是一条链。\n- Subtask 2（14 points）：$n,q\\leq 10$。\n- Subtask 3（20 points）：$q\\leq 10^3$。\n- Subtask 4（17 points）：$k=1$。\n- Subtask 5（18 points）：$k=2$。\n- Subtask 6（30 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：$2\\leq n\\leq 2\\times 10^3$，$1\\leq m\\leq \\min(\\frac{n\\times(n-1)}{2},2\\times 10^4)$，$1\\leq q\\leq 5\\times 10^5$。  \n所有询问满足：$1\\leq \\sum k\\leq 2\\times 10^6$，$0\\leq k\\leq \\min(n,15)$，$1\\leq c_i\\leq n$。保证 $c_i$ 互不相同。\n\n**本题轻微卡常，请注意 IO 优化。**\n\n---\n\n「题目来源」\n\n[Sweet Round 05](https://www.luogu.com.cn/contest/28195) D。  \nidea & solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-5」Chain", "background": "", "description": "给定 $n$ 个点，$m$ 条边的有向无环图。不保证图连通。\n\n$q$ 次询问，每次给出 $k$ 和 $k$ 个互不相同的数 $c_i$，求出如果去掉这 $k$ 个点，整个有向无环图将剩余多少条链。答案对 $10^9+7$ 取模。**每次询问独立。**\n\n- “链”的定义是：我们设一条长度为 $p$ 的链的路径为 $w_0\\to w_1\\to\\cdots\\to w_{p-1}\\to w_p$，则应满足 $w_0$ 入度为 $0$，$w_p$ 出度为 $0$。你可以将其理解为一条食物链。\n\n- 两条链是“不同的”，当且仅当它们的长度不同，或者经过的点集不同。\n\n- **需要特别注意的是，删去某些点后新产生的链不计入答案。** 例如 $1\\to 2\\to 3\\to 4$ 一图中，有 $1$ 条链 $1\\to 2\\to 3\\to 4$。如果去掉 $2$ 号点，则剩余 $0$ 条链。", "inputFormat": "第一行两个整数 $n,m$，分别表示点的个数和边的条数。\n\n接下来 $m$ 行，每行两个整数 $u,v(u\\neq v)$，表示 $u\\to v$ 有一条有向边。\n\n第 $m+2$ 行一个整数 $q$，表示询问个数。\n\n接下来 $q$ 行：  \n- 每行先是一个整数 $k$，表示去掉的点的个数。\n- 接下来 $k$ 个整数 $c_i$，表示去掉的点的编号。", "outputFormat": "共 $q$ 行，每行表示该次询问答案对 $10^9+7$ 取模后的值。", "hint": "「样例 $1$ 说明」\n\nDAG 如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2gbdoemh.png)\n\n询问 $1$：如果去掉 $2,4,6$，则剩余 $1$ 条链：$3\\to 5$。\n\n询问 $2$：如果去掉 $4,6$，则剩余 $3$ 条链：$3\\to 5$，$3\\to 2\\to 5$，$3\\to 7\\to 2\\to 5$。\n\n询问 $7$：如果去掉 $6$，则剩余 $5$ 条链：$3\\to 5$，$3\\to 2\\to 5$，$3\\to 7\\to 2\\to 5$，$3\\to 1\\to 4\\to 5$，$3\\to 7\\to 4\\to 5$。\n\n「数据范围与约定」\n\n**本题采用捆绑测试。**\n\n- Subtask 1（1 point）：给定的图是一条链。\n- Subtask 2（14 points）：$n,q\\leq 10$。\n- Subtask 3（20 points）：$q\\leq 10^3$。\n- Subtask 4（17 points）：$k=1$。\n- Subtask 5（18 points）：$k=2$。\n- Subtask 6（30 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：$2\\leq n\\leq 2\\times 10^3$，$1\\leq m\\leq \\min(\\frac{n\\times(n-1)}{2},2\\times 10^4)$，$1\\leq q\\leq 5\\times 10^5$。  \n所有询问满足：$1\\leq \\sum k\\leq 2\\times 10^6$，$0\\leq k\\leq \\min(n,15)$，$1\\leq c_i\\leq n$。保证 $c_i$ 互不相同。\n\n**本题轻微卡常，请注意 IO 优化。**\n\n---\n\n「题目来源」\n\n[Sweet Round 05](https://www.luogu.com.cn/contest/28195) D。  \nidea & solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。", "locale": "zh-CN"}}}
{"pid": "P6652", "type": "P", "difficulty": 5, "samples": [["abbabb\nba", "3"], ["fxofoxxooffoxooo\nfox", "8"], ["abcdefghijklmnopq\nrstuvwxyzz", "-1"], ["ycxcy\ncxy", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "O2优化", "广度优先搜索 BFS", "哈希 hashing"], "title": "「SWTR-5」String", "background": "", "description": "小 A 有一个字符串 $t$。他可以进行以下操作：切掉 $t$ 的一个前/后缀，满足切掉的前/后缀为**切割后** $t$ 的子串。小 A 想得到字符串 $s$，请问他最少需要进行多少次操作。无解输出 $-1$。", "inputFormat": "两行字符串分别表示 $t,s$。", "outputFormat": "一行一个整数，表示答案。", "hint": "「样例说明」\n\n样例 $1$：$\\texttt{abbabb}\\to \\texttt{abba}\\to \\texttt{bba}\\to \\texttt{ba}$。方案不唯一。\n\n样例 $2$：$\\texttt{fxofoxxooffoxooo}\\to\\texttt{xofoxxooffoxooo}\\to\\texttt{foxxooffoxooo}\\to\\texttt{xooffoxooo}\\to\\texttt{ffoxooo}\\to\\texttt{ffoxoo}\\to\\texttt{ffoxo}\\to\\texttt{ffox}\\to\\texttt{fox}$。方案不唯一。\n\n「数据范围与约定」\n\n**本题采用捆绑测试。**\n\n- Subtask 1（1 points）：$s=t$。\n- Subtask 2（9 points）：$s$ 仅包含字母 $\\texttt{a}$。\n- Subtask 3（15 points）：$|t|\\leq 100$。\n- Subtask 4（17 points）：$|t|\\leq 500$。\n- Subtask 5（18 points）：$|t|\\leq 1.5\\times 10^3$。\n- Subtask 6（15 points）：$|s|=4$，*数据随机。\n- Subtask 7（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：$1 \\leq |s| \\leq |t| \\leq 5\\times 10^3$，字符集 $\\in[\\texttt{a,z}]$。\n\n*数据随机：$s,t$ 字符均随机，字符集 $\\in[\\texttt{a,c}]$。\n\n**请注意常数优化。**\n\n---\n\n「题目来源」\n\n[Sweet Round 05](https://www.luogu.com.cn/contest/28195) E。    \nidea & solution：[Isaunoya](https://www.luogu.com.cn/user/96580) & [Alex_Wei](https://www.luogu.com.cn/user/123294)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-5」String", "background": "", "description": "小 A 有一个字符串 $t$。他可以进行以下操作：切掉 $t$ 的一个前/后缀，满足切掉的前/后缀为**切割后** $t$ 的子串。小 A 想得到字符串 $s$，请问他最少需要进行多少次操作。无解输出 $-1$。", "inputFormat": "两行字符串分别表示 $t,s$。", "outputFormat": "一行一个整数，表示答案。", "hint": "「样例说明」\n\n样例 $1$：$\\texttt{abbabb}\\to \\texttt{abba}\\to \\texttt{bba}\\to \\texttt{ba}$。方案不唯一。\n\n样例 $2$：$\\texttt{fxofoxxooffoxooo}\\to\\texttt{xofoxxooffoxooo}\\to\\texttt{foxxooffoxooo}\\to\\texttt{xooffoxooo}\\to\\texttt{ffoxooo}\\to\\texttt{ffoxoo}\\to\\texttt{ffoxo}\\to\\texttt{ffox}\\to\\texttt{fox}$。方案不唯一。\n\n「数据范围与约定」\n\n**本题采用捆绑测试。**\n\n- Subtask 1（1 points）：$s=t$。\n- Subtask 2（9 points）：$s$ 仅包含字母 $\\texttt{a}$。\n- Subtask 3（15 points）：$|t|\\leq 100$。\n- Subtask 4（17 points）：$|t|\\leq 500$。\n- Subtask 5（18 points）：$|t|\\leq 1.5\\times 10^3$。\n- Subtask 6（15 points）：$|s|=4$，*数据随机。\n- Subtask 7（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据：$1 \\leq |s| \\leq |t| \\leq 5\\times 10^3$，字符集 $\\in[\\texttt{a,z}]$。\n\n*数据随机：$s,t$ 字符均随机，字符集 $\\in[\\texttt{a,c}]$。\n\n**请注意常数优化。**\n\n---\n\n「题目来源」\n\n[Sweet Round 05](https://www.luogu.com.cn/contest/28195) E。    \nidea & solution：[Isaunoya](https://www.luogu.com.cn/user/96580) & [Alex_Wei](https://www.luogu.com.cn/user/123294)。", "locale": "zh-CN"}}}
{"pid": "P6653", "type": "P", "difficulty": 6, "samples": [["5\n1 2\n2 3\n3 4\n4 5\n", "3\n1\n2\n2\n"], ["7\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n", "3\n1\n2\n4\n"], ["25\n15 9\n22 15\n23 22\n25 15\n13 23\n6 22\n12 15\n1 23\n19 13\n18 9\n11 15\n17 1\n4 25\n3 1\n8 9\n20 1\n10 18\n21 20\n16 8\n2 22\n24 1\n7 19\n5 16\n14 7\n", "17\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n2\n2\n2\n2\n2\n2\n3\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 4000, 4000, 4000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["树形数据结构", "O2优化", "树形 DP", "哈希 hashing"], "title": "[YsOI2020] 造林", "background": "「承前」\n\nYsuperman 响应号召，决定在幼儿园外造林。\n\n呐呐，如果这样的话，Ysuperman 便能在这炎热的夏天与小朋友们玩游戏了呢。", "description": "为了落实环保工作，Ysuperman 购进了一批树，它们都长一个样。由于树还没有种下去，所以这些树还没有根，可以认为是**无根树**。\n\nYsuperman 觉得全都种长得一样的树太无聊了，于是 TA 请到了园艺公司帮 TA 规划。园艺公司提供给了 TA 一个方法——「嫁接」。\n\n下面给出「嫁接」操作的定义：\n\n定义「叶子节点」为树上度数为 $1$ 的节点。\n \n「嫁接」操作指：在一棵**无根树**上接入一个新的「叶子节点」。\n\n例如：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/jfaksqwy.png)\n\n图 2 是由图 1 的树进行一次合法的嫁接操作后得到的树，图 3 也是由图 1 的树进行一次合法的嫁接操作后得到的树。\n\n那么，我们还知道，树有一个基本属性：「品种」。\n\n一棵树的「品种」是指**每个点的最大子树大小所构成的可重集**。\n\n两棵树的「品种」不同，当且仅当**每个点的最大子树大小所构成的可重集不同**。\n\n这里的一个点的**最大子树大小**指将这个点删掉后**最大的联通块所包含的点数**。\n\n例如：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/zzyznfl7.png)\n\n图 4 的树的每个点的最大子树大小所构成的可重集为：$ \\{ 2,2,3,3 \\} $  \n图 5 的树的每个点的最大子树大小所构成的可重集为：$ \\{ 2,2,3,3 \\} $  \n图 6 的树的每个点的最大子树大小所构成的可重集为：$ \\{ 1,3,3,3 \\} $  \n所以说，图 4 的树与图 5 的树「品种」相同，与图 6 的树「品种」不同。\n\nYsuperman 想知道，通过一次「嫁接」操作，可以构造出的树包含多少不同的「品种」，以及对于每个「品种」，有多少不同的「嫁接」方法可以构造。请**从小到大**输出每个「品种」的「嫁接」方法数。\n\n两个「嫁接」方案不同，当且仅当在「嫁接」操作中与新接入的「叶子节点」直接相连的点不同。\n", "inputFormat": "第一行一个数 $n$ 。  \n接下来 $n-1$ 行，每行两个数 $u,v$ 表示 $u,v$ 之间有一条**无向边**。", "outputFormat": "第一行一个数 $cnt$，表示可以构造出的树包含多少不同的「品种」。  \n第二行到第 $cnt+1$ 行，**从小到大**输出每个「品种」的「嫁接」方法数。", "hint": "**本题采用捆绑测试。**\n### 样例解释 1\n可以构造出 1 种「品种」为 $\\{2,4,4,5,5,5\\}$ 的树。  \n可以构造出 2 种「品种」为 $\\{3,3,4,5,5,5\\}$ 的树。  \n可以构造出 2 种「品种」为 $\\{3,3,4,4,5,5\\}$ 的树。\n### 样例解释 2\n可以构造出 1 种「品种」为 $\\{3,5,5,7,7,7,7,7\\}$ 的树。  \n可以构造出 2 种「品种」为 $\\{4,4,5,7,7,7,7,7\\}$ 的树。  \n可以构造出 4 种「品种」为 $\\{4,4,5,6,7,7,7,7\\}$ 的树。\n\n\n对于 100% 的数据，满足 $1 \\le n\\le2\\cdot 10^6$。\n\n定义「链」为所有节点度数不超过 $2$ 的树。  \n定义「菊花」为包含 $n-1$ 个「叶子节点」的树。\n\n特殊性质 1：保证树的形态为一条「链」。  \n特殊性质 2：保证树的形态为一朵「菊花」。  \n特殊性质 3：保证树的形态为一棵完全二叉树。\n\n| subtask | $n$ | 特殊性质 | 分值 | 时间限制 |\n| :-----------: | :-----------: | :-----------: | :--------:| :---------:|\n| 1 | $\\le 2\\cdot 10^6$ | 2 | 2 | 4s |\n| 2 | $\\le 2\\cdot 10^6$ | 1 | 3 | 4s |\n| 3 | $\\le 300$ | 无 | 5 | 1s |\n| 4 | $\\le 2\\cdot10^6$ | 3 | 7 | 4s |\n| 5 | $\\le 5000$ | 无 | 23 | 1s |\n| 6 | $\\le 5\\cdot10^4$ | 无 | 29 | 2s |\n| 7 | $\\le 2\\cdot10^6$ | 无 | 31 | 4s |\n\n### 提示：\n\n如果你不知道完全二叉树是什么意思，Ysuperman 提供了一个链接：[Link](https://zh.wikipedia.org/zh/%E4%BA%8C%E5%8F%89%E6%A0%91#%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91)。\n\n输入输出较大，请使用较快的输入输出方式。\n\n如果您使用了所需栈空间较大的递归算法，可以在本地（NOI linux 下）先使用 ```sudo su``` 获取权限，再使用 ```ulimit -s unlimited ``` 命令开启无限栈。\n\n题目并不难。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2020] 造林", "background": "「承前」\n\nYsuperman 响应号召，决定在幼儿园外造林。\n\n呐呐，如果这样的话，Ysuperman 便能在这炎热的夏天与小朋友们玩游戏了呢。", "description": "为了落实环保工作，Ysuperman 购进了一批树，它们都长一个样。由于树还没有种下去，所以这些树还没有根，可以认为是**无根树**。\n\nYsuperman 觉得全都种长得一样的树太无聊了，于是 TA 请到了园艺公司帮 TA 规划。园艺公司提供给了 TA 一个方法——「嫁接」。\n\n下面给出「嫁接」操作的定义：\n\n定义「叶子节点」为树上度数为 $1$ 的节点。\n \n「嫁接」操作指：在一棵**无根树**上接入一个新的「叶子节点」。\n\n例如：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/jfaksqwy.png)\n\n图 2 是由图 1 的树进行一次合法的嫁接操作后得到的树，图 3 也是由图 1 的树进行一次合法的嫁接操作后得到的树。\n\n那么，我们还知道，树有一个基本属性：「品种」。\n\n一棵树的「品种」是指**每个点的最大子树大小所构成的可重集**。\n\n两棵树的「品种」不同，当且仅当**每个点的最大子树大小所构成的可重集不同**。\n\n这里的一个点的**最大子树大小**指将这个点删掉后**最大的联通块所包含的点数**。\n\n例如：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/zzyznfl7.png)\n\n图 4 的树的每个点的最大子树大小所构成的可重集为：$ \\{ 2,2,3,3 \\} $  \n图 5 的树的每个点的最大子树大小所构成的可重集为：$ \\{ 2,2,3,3 \\} $  \n图 6 的树的每个点的最大子树大小所构成的可重集为：$ \\{ 1,3,3,3 \\} $  \n所以说，图 4 的树与图 5 的树「品种」相同，与图 6 的树「品种」不同。\n\nYsuperman 想知道，通过一次「嫁接」操作，可以构造出的树包含多少不同的「品种」，以及对于每个「品种」，有多少不同的「嫁接」方法可以构造。请**从小到大**输出每个「品种」的「嫁接」方法数。\n\n两个「嫁接」方案不同，当且仅当在「嫁接」操作中与新接入的「叶子节点」直接相连的点不同。\n", "inputFormat": "第一行一个数 $n$ 。  \n接下来 $n-1$ 行，每行两个数 $u,v$ 表示 $u,v$ 之间有一条**无向边**。", "outputFormat": "第一行一个数 $cnt$，表示可以构造出的树包含多少不同的「品种」。  \n第二行到第 $cnt+1$ 行，**从小到大**输出每个「品种」的「嫁接」方法数。", "hint": "**本题采用捆绑测试。**\n### 样例解释 1\n可以构造出 1 种「品种」为 $\\{2,4,4,5,5,5\\}$ 的树。  \n可以构造出 2 种「品种」为 $\\{3,3,4,5,5,5\\}$ 的树。  \n可以构造出 2 种「品种」为 $\\{3,3,4,4,5,5\\}$ 的树。\n### 样例解释 2\n可以构造出 1 种「品种」为 $\\{3,5,5,7,7,7,7,7\\}$ 的树。  \n可以构造出 2 种「品种」为 $\\{4,4,5,7,7,7,7,7\\}$ 的树。  \n可以构造出 4 种「品种」为 $\\{4,4,5,6,7,7,7,7\\}$ 的树。\n\n\n对于 100% 的数据，满足 $1 \\le n\\le2\\cdot 10^6$。\n\n定义「链」为所有节点度数不超过 $2$ 的树。  \n定义「菊花」为包含 $n-1$ 个「叶子节点」的树。\n\n特殊性质 1：保证树的形态为一条「链」。  \n特殊性质 2：保证树的形态为一朵「菊花」。  \n特殊性质 3：保证树的形态为一棵完全二叉树。\n\n| subtask | $n$ | 特殊性质 | 分值 | 时间限制 |\n| :-----------: | :-----------: | :-----------: | :--------:| :---------:|\n| 1 | $\\le 2\\cdot 10^6$ | 2 | 2 | 4s |\n| 2 | $\\le 2\\cdot 10^6$ | 1 | 3 | 4s |\n| 3 | $\\le 300$ | 无 | 5 | 1s |\n| 4 | $\\le 2\\cdot10^6$ | 3 | 7 | 4s |\n| 5 | $\\le 5000$ | 无 | 23 | 1s |\n| 6 | $\\le 5\\cdot10^4$ | 无 | 29 | 2s |\n| 7 | $\\le 2\\cdot10^6$ | 无 | 31 | 4s |\n\n### 提示：\n\n如果你不知道完全二叉树是什么意思，Ysuperman 提供了一个链接：[Link](https://zh.wikipedia.org/zh/%E4%BA%8C%E5%8F%89%E6%A0%91#%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91)。\n\n输入输出较大，请使用较快的输入输出方式。\n\n如果您使用了所需栈空间较大的递归算法，可以在本地（NOI linux 下）先使用 ```sudo su``` 获取权限，再使用 ```ulimit -s unlimited ``` 命令开启无限栈。\n\n题目并不难。", "locale": "zh-CN"}}}
{"pid": "P6654", "type": "P", "difficulty": 6, "samples": [["5\n", "1\n"], ["45\n", "2\n"], ["55\n", "4\n"], ["3333\n", "24\n"], ["999999\n", "16336\n"], ["1919810\n", "3461\n"], ["11451419\n", "210000\n"]], "limits": {"time": [1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145, 1145], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP"], "title": "[YsOI2020] 归零", "background": "Ysuperman 特别喜欢玩数数游戏。\n\n~~其实本来这题想叫“亦旧亦久罢以龄”的，但是我见到其他的题目名称都是两个字，取这么长名称也不好。~~", "description": "闲暇时光，Ysuerpman 选择用计算器打发时间。他输入了一个很长的十进制数 $S$。具体有多长呢？共 $n$ 位。为了方便解释，设从低到高第 $i$ 位上的数字是 $S_i$（下标从 $1$ 开始）。\n\nYsuerpman 每次会选择一个**非零**数字位进行「四舍五入」。具体来说，假设「四舍五入」的是第 $i$ 位：\n\n- 如果 $S_i<5$，则让 $S$ 减去 $S_i \\cdot 10^{i-1}$。\n- 如果它 $S_i\\ge5$，则让 $S$ 加上 $10^i$ 再减去 $S_i \\cdot 10^{i-1}$。\n\n经过若干次操作后，$S$ 总会变成 $0$。现在问题来了，请问有多少种使得 $S$ 变成 $0$ 的不同的方案？两个方案不同当且仅当某一次选择的操作位置不同。\n\n", "inputFormat": "一个高精度数 $S$。", "outputFormat": "使得 $S$ 变成 $0$ 的不同的方案数量，对 $998244353$ 取模。", "hint": "### 样例解释\n\n#### 样例解释 $1$\n\n$\\underline5\\to \\underline10 \\to 0$\n\n共 $1$ 种。\n\n#### 样例解释 $2$\n\n$\\underline{4}5\\to\\underline{5}\\to\\underline10\\to 0$\n\n$4\\underline{5}\\to\\underline{5}0\\to \\underline100 \\to 0$\n\n共 $2$ 种。\n\n#### 样例解释 $3$\n\n$\\underline{5}5\\to\\underline{1}05\\to\\underline{5}\\to\\underline{1}0 \\to 0$\n\n$\\underline{5}5\\to10\\underline{5}\\to\\underline{1}10\\to \\underline10 \\to 0$\n\n$\\underline{5}5\\to10\\underline{5}\\to1\\underline{1}0\\to \\underline100 \\to 0$\n\n$5\\underline{5}\\to\\underline{6}0\\to \\underline100 \\to 0$\n\n共 $4$ 种。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\rm{subtask}$ |    $n$    | $S_i\\in$ | 分数 |\n| :------------: | :-------: | :------: | :--: |\n|      $0$       |  $\\le 6$  | $[0,9]$  | $5$  |\n|      $1$       | $\\le 15$ | $[0,9]$  | $13$ |\n|      $2$       |  $\\le40$  | $[0,4]$  | $5$  |\n|      $3$       | $\\le 40$  | $\\{9\\}$  | $12$ |\n|      $4$       |  $\\le40$  | $[5,8]$  | $15$ |\n|      $5$       | $\\le 40$  | $[0,9]$  | $30$ |\n|      $6$       | $\\le 64$  | $[0,9]$  | $20$ |\n\n对于 $100\\%$ 的数据，满足 $1\\le n \\le 64$，$S$ 不含前导零。\n\n### 提示\n\n本题时间限制为 $1145ms$。\n\n题目并不难。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2020] 归零", "background": "Ysuperman 特别喜欢玩数数游戏。\n\n~~其实本来这题想叫“亦旧亦久罢以龄”的，但是我见到其他的题目名称都是两个字，取这么长名称也不好。~~", "description": "闲暇时光，Ysuerpman 选择用计算器打发时间。他输入了一个很长的十进制数 $S$。具体有多长呢？共 $n$ 位。为了方便解释，设从低到高第 $i$ 位上的数字是 $S_i$（下标从 $1$ 开始）。\n\nYsuerpman 每次会选择一个**非零**数字位进行「四舍五入」。具体来说，假设「四舍五入」的是第 $i$ 位：\n\n- 如果 $S_i<5$，则让 $S$ 减去 $S_i \\cdot 10^{i-1}$。\n- 如果它 $S_i\\ge5$，则让 $S$ 加上 $10^i$ 再减去 $S_i \\cdot 10^{i-1}$。\n\n经过若干次操作后，$S$ 总会变成 $0$。现在问题来了，请问有多少种使得 $S$ 变成 $0$ 的不同的方案？两个方案不同当且仅当某一次选择的操作位置不同。\n\n", "inputFormat": "一个高精度数 $S$。", "outputFormat": "使得 $S$ 变成 $0$ 的不同的方案数量，对 $998244353$ 取模。", "hint": "### 样例解释\n\n#### 样例解释 $1$\n\n$\\underline5\\to \\underline10 \\to 0$\n\n共 $1$ 种。\n\n#### 样例解释 $2$\n\n$\\underline{4}5\\to\\underline{5}\\to\\underline10\\to 0$\n\n$4\\underline{5}\\to\\underline{5}0\\to \\underline100 \\to 0$\n\n共 $2$ 种。\n\n#### 样例解释 $3$\n\n$\\underline{5}5\\to\\underline{1}05\\to\\underline{5}\\to\\underline{1}0 \\to 0$\n\n$\\underline{5}5\\to10\\underline{5}\\to\\underline{1}10\\to \\underline10 \\to 0$\n\n$\\underline{5}5\\to10\\underline{5}\\to1\\underline{1}0\\to \\underline100 \\to 0$\n\n$5\\underline{5}\\to\\underline{6}0\\to \\underline100 \\to 0$\n\n共 $4$ 种。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n| $\\rm{subtask}$ |    $n$    | $S_i\\in$ | 分数 |\n| :------------: | :-------: | :------: | :--: |\n|      $0$       |  $\\le 6$  | $[0,9]$  | $5$  |\n|      $1$       | $\\le 15$ | $[0,9]$  | $13$ |\n|      $2$       |  $\\le40$  | $[0,4]$  | $5$  |\n|      $3$       | $\\le 40$  | $\\{9\\}$  | $12$ |\n|      $4$       |  $\\le40$  | $[5,8]$  | $15$ |\n|      $5$       | $\\le 40$  | $[0,9]$  | $30$ |\n|      $6$       | $\\le 64$  | $[0,9]$  | $20$ |\n\n对于 $100\\%$ 的数据，满足 $1\\le n \\le 64$，$S$ 不含前导零。\n\n### 提示\n\n本题时间限制为 $1145ms$。\n\n题目并不难。", "locale": "zh-CN"}}}
{"pid": "P6655", "type": "P", "difficulty": 5, "samples": [["3\n1 3 2\n1 1\n1 2\n", "5\n"], ["10\n1 1 1 0 5 2 11 12 17 7\n1 1\n1 2\n2 2\n1 3\n1 1\n1 4\n1 2\n6 7\n1 5\n", "4044\n"], ["50\n1 0 0 6 2 5 0 2 16 15 14 8 20 22 23 21 7 24 27 17 1 13 39 40 31 38 40 16 25 48 2 0 15 7 0 47 58 11 22 54 11 78 30 32 31 35 44 56 59 85\n1 1\n2 2\n1 2\n2 3\n3 3\n1 6\n2 6\n3 5\n5 9\n3 4\n1 4\n3 12\n1 12\n5 7\n5 13\n1 10\n7 9\n4 11\n12 12\n16 17\n3 9\n8 15\n15 16\n1 19\n9 10\n10 12\n8 10\n4 10\n6 13\n10 13\n11 30\n11 21\n2 30\n13 23\n4 24\n32 34\n8 29\n4 22\n2 26\n29 33\n28 38\n18 31\n19 36\n15 32\n8 14\n15 32\n4 33\n30 45\n8 25\n", "904672069\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "树状数组", "可持久化线段树"], "title": "[YsOI2020] 制高", "background": "Ysuperman 特别喜欢玩战略游戏。", "description": "游戏地图是一棵 $n$ 个点的有根树，根节点是 $1$ ，除节点 $1$ 外其他节点都有唯一的父亲节点。\n\n每个节点有一个高度，第 $i$ 个节点的高度为 $h_i$ ，我们认为一个节点 $v$ 是“制高点”，当且仅当 $v$ 是根节点或者其父亲节点 $u$ 是“制高点”并且 $h_v\\ge h_u$ 。\n\n但是， Ysuperman 并不知道每个节点的父亲具体是哪个，只知道它的父亲编号可能在的区间，其中，节点 $i$ 的父亲可能在的编号范围为 $[l_i,r_i]$ ，保证 $1\\le l_i\\le r_i<i$ 。\n\n现在， Ysuperman 想知道对于**所有可能的情况**，“制高点”的数量之和是多少。\n\n因为这个结果可能会很大，所以你只需要输出结果 $\\bmod \\ {998244353}$ 的值即可。", "inputFormat": "输入共 $n+1$ 行。\n\n第一行一个正整数 $n$ 。\n\n接下来一行 $n$ 个非负整数，第 $i$ 个整数描述 $h_i$ 。\n\n接下来 $n-1$ 行，每行两个正整数，分别描述 $l_2,r_2,\\cdots,l_n,r_n$ 。\n\n保证 $1\\le l_i\\le r_i<i$ 。", "outputFormat": "一行一个整数，即答案。", "hint": "样例一解释：\n\n共有两种情况，情况一： $2$ 的父亲节点是 $1$ ， $3$ 的父亲节点是 $1$ ，此时 $1,2,3$ 均是“制高点”；情况二： $2$ 的父亲节点是 $1$ ， $3$ 的父亲节点是 $2$ ，由于 $h_2>h_3$ ，所以 $3$ 不是“制高点”，此时 $1,2$ 均是“制高点”。\n\n所以所有情况“制高点”数量的和为 $5$ 。\n\n| $\\text{测试点编号}$ |   $n$    | $\\prod_{i=2}^n(r_i-l_i+1)$ | $\\text{特殊性质}$ |\n| :-----------------: | :------: | :------------------------: | :---------------: |\n|      $1\\sim 2$      |  $=10$   |         $\\le 10^6$         |    $\\text{无}$    |\n|         $3$         | $= 10^5$ |         $\\le 10^6$         |    $\\text{无}$    |\n|         $4$         | $= 10^5$ |             \\\\             | $h_i\\le h_{i+1}$  |\n|         $5$         | $= 10^5$ |             \\\\             |   $h_i>h_{i+1}$   |\n|     $6\\sim 12$      | $= 10^3$ |             \\\\             |    $\\text{无}$    |\n|     $13\\sim 20$     | $=10^5$  |             \\\\             |    $\\text{无}$    |\n\n题目数据保证 $h_i$ 在 `int` 能表示的最大范围内， $1\\le l_i\\le r_i<i$ 。\n\n题目并不难。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[YsOI2020] 制高", "background": "Ysuperman 特别喜欢玩战略游戏。", "description": "游戏地图是一棵 $n$ 个点的有根树，根节点是 $1$ ，除节点 $1$ 外其他节点都有唯一的父亲节点。\n\n每个节点有一个高度，第 $i$ 个节点的高度为 $h_i$ ，我们认为一个节点 $v$ 是“制高点”，当且仅当 $v$ 是根节点或者其父亲节点 $u$ 是“制高点”并且 $h_v\\ge h_u$ 。\n\n但是， Ysuperman 并不知道每个节点的父亲具体是哪个，只知道它的父亲编号可能在的区间，其中，节点 $i$ 的父亲可能在的编号范围为 $[l_i,r_i]$ ，保证 $1\\le l_i\\le r_i<i$ 。\n\n现在， Ysuperman 想知道对于**所有可能的情况**，“制高点”的数量之和是多少。\n\n因为这个结果可能会很大，所以你只需要输出结果 $\\bmod \\ {998244353}$ 的值即可。", "inputFormat": "输入共 $n+1$ 行。\n\n第一行一个正整数 $n$ 。\n\n接下来一行 $n$ 个非负整数，第 $i$ 个整数描述 $h_i$ 。\n\n接下来 $n-1$ 行，每行两个正整数，分别描述 $l_2,r_2,\\cdots,l_n,r_n$ 。\n\n保证 $1\\le l_i\\le r_i<i$ 。", "outputFormat": "一行一个整数，即答案。", "hint": "样例一解释：\n\n共有两种情况，情况一： $2$ 的父亲节点是 $1$ ， $3$ 的父亲节点是 $1$ ，此时 $1,2,3$ 均是“制高点”；情况二： $2$ 的父亲节点是 $1$ ， $3$ 的父亲节点是 $2$ ，由于 $h_2>h_3$ ，所以 $3$ 不是“制高点”，此时 $1,2$ 均是“制高点”。\n\n所以所有情况“制高点”数量的和为 $5$ 。\n\n| $\\text{测试点编号}$ |   $n$    | $\\prod_{i=2}^n(r_i-l_i+1)$ | $\\text{特殊性质}$ |\n| :-----------------: | :------: | :------------------------: | :---------------: |\n|      $1\\sim 2$      |  $=10$   |         $\\le 10^6$         |    $\\text{无}$    |\n|         $3$         | $= 10^5$ |         $\\le 10^6$         |    $\\text{无}$    |\n|         $4$         | $= 10^5$ |             \\\\             | $h_i\\le h_{i+1}$  |\n|         $5$         | $= 10^5$ |             \\\\             |   $h_i>h_{i+1}$   |\n|     $6\\sim 12$      | $= 10^3$ |             \\\\             |    $\\text{无}$    |\n|     $13\\sim 20$     | $=10^5$  |             \\\\             |    $\\text{无}$    |\n\n题目数据保证 $h_i$ 在 `int` 能表示的最大范围内， $1\\le l_i\\le r_i<i$ 。\n\n题目并不难。", "locale": "zh-CN"}}}
{"pid": "P6656", "type": "P", "difficulty": 7, "samples": [["aababaababb", "7\n1 2 1\n1 10 5\n2 6 2\n4 9 3\n6 7 1\n7 10 2\n10 11 1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "模板题"], "title": "【模板】Runs", "background": "", "description": "定义一个字符串 $|S|$ 里的一个 run，指其内部一段两侧都不能扩展的**周期子串**，且周期至少完整出现两次。\n\n严格地说，一个 run 是一个 三元组 $(i,j,p)$，满足 $p$ 是 $S[i..j]$ 的最小周期，$j-i+1 \\ge 2p$，且满足如下两个条件：\n\n+ 要么 $i=1$，要么 $S[i-1]\\ne S[i-1+p]$；\n+ 要么 $j=n$，要么 $S[j+1] \\ne S[j+1-p]$。\n\n给定字符串 $S$，求他的所有 runs。\n\n", "inputFormat": "一行一个字符串 $S$，保证其只由小写字母构成。", "outputFormat": "第一行一个整数 $m$，表示 runs 的数量。\n\n接下来 $m$ 行，每行三个整数描述一个 runs：\n\n+ 这个 runs 的第一个字符的位置\n+ 最后一个字符的位置\n+ 这个 runs 的最小循环的长度\n\n你应该以第一个字符的位置为第一关键词，最后一个字符的位置为第二关键词对所有的 runs 进行排序。", "hint": "对于 $60\\%$ 的数据，$|S| \\le 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$|S| \\le 10^6$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】Runs", "background": "", "description": "定义一个字符串 $|S|$ 里的一个 run，指其内部一段两侧都不能扩展的**周期子串**，且周期至少完整出现两次。\n\n严格地说，一个 run 是一个 三元组 $(i,j,p)$，满足 $p$ 是 $S[i..j]$ 的最小周期，$j-i+1 \\ge 2p$，且满足如下两个条件：\n\n+ 要么 $i=1$，要么 $S[i-1]\\ne S[i-1+p]$；\n+ 要么 $j=n$，要么 $S[j+1] \\ne S[j+1-p]$。\n\n给定字符串 $S$，求他的所有 runs。\n\n", "inputFormat": "一行一个字符串 $S$，保证其只由小写字母构成。", "outputFormat": "第一行一个整数 $m$，表示 runs 的数量。\n\n接下来 $m$ 行，每行三个整数描述一个 runs：\n\n+ 这个 runs 的第一个字符的位置\n+ 最后一个字符的位置\n+ 这个 runs 的最小循环的长度\n\n你应该以第一个字符的位置为第一关键词，最后一个字符的位置为第二关键词对所有的 runs 进行排序。", "hint": "对于 $60\\%$ 的数据，$|S| \\le 2 \\times 10^5$。\n\n对于 $100\\%$ 的数据，$|S| \\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P6657", "type": "P", "difficulty": 6, "samples": [["3\n3 2\n1 2\n2 3\n5 2\n1 3\n3 5\n10 5\n3 5\n4 7\n5 8\n7 9\n9 10", "3\n155\n2047320"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["LGV 引理", "容斥原理", "高斯消元", "模板题"], "title": "【模板】LGV 引理", "background": "", "description": "这是一道模板题。\n\n有一个 $n\\times n$ 的棋盘，左下角为 $(1,1)$，右上角为 $(n,n)$，若一个棋子在点 $(x,y)$，那么走一步只能走到 $(x+1,y)$ 或 $(x,y+1)$。\n\n现在有 $m$ 个棋子，第 $i$ 个棋子一开始放在 $(a_i,1)$，最终要走到 $(b_i,n)$。问有多少种方案，使得每个棋子都能从起点走到终点，且对于所有棋子，走过路径上的点互不相交。输出方案数 $\\bmod\\ 998244353$ 的值。\n\n两种方案不同当且仅当存在至少一个棋子所经过的点不同。", "inputFormat": "**本题有多组数据**\n\n第一行一个整数 $T$，表示该测试点的数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n,m$，分别表示棋盘的大小和起点终点的数量。\n\n接下来 $m$ 行，每行 $2$ 个整数 $a_i,b_i$，其意义已在题目描述中说明。", "outputFormat": "对于每一组数据，输出一行一个整数表示方案数 $\\bmod\\ 998244353$ 的值。", "hint": "- 对于 $30\\%$ 的数据，$n\\leq 100$，$m\\leq 8$。 \n\n- 对于 $100\\%$ 的数据，$T\\leq5$，$2\\leq n\\leq10^6$，$1\\leq m\\leq100$，$1\\leq a_1\\leq a_2\\leq \\dots\\leq a_m\\leq n$，$1\\leq b_1\\leq b_2\\leq \\dots\\leq b_m\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】LGV 引理", "background": "", "description": "这是一道模板题。\n\n有一个 $n\\times n$ 的棋盘，左下角为 $(1,1)$，右上角为 $(n,n)$，若一个棋子在点 $(x,y)$，那么走一步只能走到 $(x+1,y)$ 或 $(x,y+1)$。\n\n现在有 $m$ 个棋子，第 $i$ 个棋子一开始放在 $(a_i,1)$，最终要走到 $(b_i,n)$。问有多少种方案，使得每个棋子都能从起点走到终点，且对于所有棋子，走过路径上的点互不相交。输出方案数 $\\bmod\\ 998244353$ 的值。\n\n两种方案不同当且仅当存在至少一个棋子所经过的点不同。", "inputFormat": "**本题有多组数据**\n\n第一行一个整数 $T$，表示该测试点的数据组数。\n\n对于每组数据：\n\n第一行两个整数 $n,m$，分别表示棋盘的大小和起点终点的数量。\n\n接下来 $m$ 行，每行 $2$ 个整数 $a_i,b_i$，其意义已在题目描述中说明。", "outputFormat": "对于每一组数据，输出一行一个整数表示方案数 $\\bmod\\ 998244353$ 的值。", "hint": "- 对于 $30\\%$ 的数据，$n\\leq 100$，$m\\leq 8$。 \n\n- 对于 $100\\%$ 的数据，$T\\leq5$，$2\\leq n\\leq10^6$，$1\\leq m\\leq100$，$1\\leq a_1\\leq a_2\\leq \\dots\\leq a_m\\leq n$，$1\\leq b_1\\leq b_2\\leq \\dots\\leq b_m\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P6658", "type": "P", "difficulty": 6, "samples": [["4 5\n1 3\n1 2\n4 1\n3 2\n3 4", "3\n1 3\n2\n4"], ["17 29\n1 2\n1 10\n1 10\n2 3\n2 8\n3 4\n3 5\n4 6\n4 6\n5 6\n5 6\n5 7\n7 8\n7 11\n7 12\n7 17\n7 17\n8 9\n9 10\n11 12\n11 17\n12 13\n12 16\n13 14\n13 15\n13 16\n14 15\n14 16\n15 16", "7\n1 10\n2 8\n3 4 5 6\n7 11 17\n9\n12\n13 14 15 16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["图论", "深度优先搜索 DFS", "Tarjan"], "title": "边三连通分量", "background": "对于一张无向图 $G = (V, E)$。\n\n- 我们称两个点 $u, v ~ (u, v \\in V, u \\neq v)$ 是边三连通的，当且仅当存在三条从 $u$ 出发到达 $v$ 的，相互没有公共边的路径。\n- 我们称一个点集 $U ~ (U \\subseteq V)$ 是边三连通分量，当且仅当对于任意两个点 $u', v' ~ (u', v' \\in U, u' \\neq v')$ 都是边三连通的。\n- 我们称一个边三连通分量 $S$ 是极大边三连通分量，当且仅当不存在 $u \\not \\in S$ 且 $u \\in V$，使得 $S \\cup \\{u\\}$ 也是边三连通分量。", "description": "给出一个 $n$ 个点，$m$ 条边的无向图 $G = (V, E)$，$V = \\{1, 2, \\ldots, n\\}$，请求出其所有的极大边三连通分量。", "inputFormat": "第一行输入两个整数 $n, m$，表示点数、边数。\n\n接下来 $m$ 行，每行输入两个数 $u, v$，表示图上的一条边。", "outputFormat": "第一行输出一个整数 $s$，表示极大边三连通分量个数。\n\n接下来输出 $s$ 行，每行若干整数，表示一个极大边三连通分量内所有点。\n\n对于单个极大边三连通分量，请将点按照标号升序输出。对于所有极大边三连通分量，请按照点集内编号最小的点升序输出。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/eqpng8sy.png)\n\n如图，$1 \\to 3$ 共有 $(1, 2, 3)$，$(1, 3)$，$(1, 4, 3)$ 三条路径，它们互相都没有相交的边。因此 $1$ 与 $3$ 在同一个边三连通分量中。\n\n由于 $2$，$4$ 点度都只有 $2$，不可能有三条边不相交的到其它点的路径，因此它们自己形成边三联通分量。\n\n---\n\n#### 数据范围\n\n- 对于 $30\\%$ 的数据，$n \\le 100$，$m \\le 200$。\n- 对于 $50\\%$ 的数据，$n \\le 1000$，$m \\le 2000$。\n- 对于 $80\\%$ 的数据，$n \\le 10 ^ 5$，$m \\le 2 \\times 10 ^ 5$。\n- 对于 $100\\%$ 的数据，$1 \\le n, m \\le 5 \\times 10 ^ 5$，$1 \\le u, v \\le n$。可能有重边和自环。\n\n---\n\n#### 来源\n\n题目搬运自 [Three-Edge-Connected Components](https://judge.yosupo.jp/problem/three_edge_connected_components)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "边三连通分量", "background": "对于一张无向图 $G = (V, E)$。\n\n- 我们称两个点 $u, v ~ (u, v \\in V, u \\neq v)$ 是边三连通的，当且仅当存在三条从 $u$ 出发到达 $v$ 的，相互没有公共边的路径。\n- 我们称一个点集 $U ~ (U \\subseteq V)$ 是边三连通分量，当且仅当对于任意两个点 $u', v' ~ (u', v' \\in U, u' \\neq v')$ 都是边三连通的。\n- 我们称一个边三连通分量 $S$ 是极大边三连通分量，当且仅当不存在 $u \\not \\in S$ 且 $u \\in V$，使得 $S \\cup \\{u\\}$ 也是边三连通分量。", "description": "给出一个 $n$ 个点，$m$ 条边的无向图 $G = (V, E)$，$V = \\{1, 2, \\ldots, n\\}$，请求出其所有的极大边三连通分量。", "inputFormat": "第一行输入两个整数 $n, m$，表示点数、边数。\n\n接下来 $m$ 行，每行输入两个数 $u, v$，表示图上的一条边。", "outputFormat": "第一行输出一个整数 $s$，表示极大边三连通分量个数。\n\n接下来输出 $s$ 行，每行若干整数，表示一个极大边三连通分量内所有点。\n\n对于单个极大边三连通分量，请将点按照标号升序输出。对于所有极大边三连通分量，请按照点集内编号最小的点升序输出。", "hint": "#### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/eqpng8sy.png)\n\n如图，$1 \\to 3$ 共有 $(1, 2, 3)$，$(1, 3)$，$(1, 4, 3)$ 三条路径，它们互相都没有相交的边。因此 $1$ 与 $3$ 在同一个边三连通分量中。\n\n由于 $2$，$4$ 点度都只有 $2$，不可能有三条边不相交的到其它点的路径，因此它们自己形成边三联通分量。\n\n---\n\n#### 数据范围\n\n- 对于 $30\\%$ 的数据，$n \\le 100$，$m \\le 200$。\n- 对于 $50\\%$ 的数据，$n \\le 1000$，$m \\le 2000$。\n- 对于 $80\\%$ 的数据，$n \\le 10 ^ 5$，$m \\le 2 \\times 10 ^ 5$。\n- 对于 $100\\%$ 的数据，$1 \\le n, m \\le 5 \\times 10 ^ 5$，$1 \\le u, v \\le n$。可能有重边和自环。\n\n---\n\n#### 来源\n\n题目搬运自 [Three-Edge-Connected Components](https://judge.yosupo.jp/problem/three_edge_connected_components)。", "locale": "zh-CN"}}}
{"pid": "P6659", "type": "P", "difficulty": 4, "samples": [["3\n12\n504\n17", "1 4\n6 9\nNIE"], ["5\n5\n6\n7\n8\n9", "NIE\n1 3\nNIE\nNIE\nNIE"], ["1\n1000000", "NIE"], ["1\n99999990000000", "9999999 10000000"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2019", "二分", "POI（波兰）", "最大公约数 gcd"], "title": "[POI 2019/2020 R1] Najmniejsza wspólna wielokrotność / 最小公倍数", "background": "Byteasar 正在准备他的数学考试。", "description": "老师跟他说考试题目中有关于最小公倍数 $\\rm lcm$ 的题目，于是他找到了一道题练练手。\n\n给定一个整数 $M$，求一个区间 $[a,b]$ 使得 $M$ 为这个区间所有数的最小公倍数。\n\n因为您很强，所以 Byteasar 在解出来这道题的同时也想问问您这题的答案。\n\n因为 Byteasar 非常爱问问题，所以他要问您 $z$ 组问题。", "inputFormat": "第一行一个整数 $z$ 代表询问个数。    \n接下来 $z$ 行每行一个整数 $M$ 代表一个询问。", "outputFormat": "$z$ 行每行两个整数 $a,b$ 代表一个询问的答案。    \n\n如果有多组解：\n\n- 输出 $a$ 最小的。\n- 如果还有多组解，输出 $b$ 最小的。\n\n如果无解，则输出 `NIE`。", "hint": "#### 样例说明\n\n对于样例 $1$ 的第一组数据，$12$ 为区间 $[1,4]$ 的最小公倍数。\n\n另一组附加样例见附加文件的 sample.in 和 sample.out。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（18 pts）：$z \\le 10$，$M \\le 1000$。\n- Subtask 2（20 pts）：$z\\le 100$，$M \\le 10^9$。\n- Subtask 3（20 pts）：$z \\le 100$，$M \\le 10^{18}$。\n- Subtask 4（42 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le z\\le 10^4$，$1 \\le M \\le 10^{18}$。\n\n#### 说明\n\n翻译自 [POI 2019](https://sio2.mimuw.edu.pl/c/oi27-1/dashboard/) A [Najmniejsza wspólna wielokrotność](https://sio2.mimuw.edu.pl/c/oi27-1/p/nww/)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2019/2020 R1] Najmniejsza wspólna wielokrotność / 最小公倍数", "background": "Byteasar 正在准备他的数学考试。", "description": "老师跟他说考试题目中有关于最小公倍数 $\\rm lcm$ 的题目，于是他找到了一道题练练手。\n\n给定一个整数 $M$，求一个区间 $[a,b]$ 使得 $M$ 为这个区间所有数的最小公倍数。\n\n因为您很强，所以 Byteasar 在解出来这道题的同时也想问问您这题的答案。\n\n因为 Byteasar 非常爱问问题，所以他要问您 $z$ 组问题。", "inputFormat": "第一行一个整数 $z$ 代表询问个数。    \n接下来 $z$ 行每行一个整数 $M$ 代表一个询问。", "outputFormat": "$z$ 行每行两个整数 $a,b$ 代表一个询问的答案。    \n\n如果有多组解：\n\n- 输出 $a$ 最小的。\n- 如果还有多组解，输出 $b$ 最小的。\n\n如果无解，则输出 `NIE`。", "hint": "#### 样例说明\n\n对于样例 $1$ 的第一组数据，$12$ 为区间 $[1,4]$ 的最小公倍数。\n\n另一组附加样例见附加文件的 sample.in 和 sample.out。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（18 pts）：$z \\le 10$，$M \\le 1000$。\n- Subtask 2（20 pts）：$z\\le 100$，$M \\le 10^9$。\n- Subtask 3（20 pts）：$z \\le 100$，$M \\le 10^{18}$。\n- Subtask 4（42 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le z\\le 10^4$，$1 \\le M \\le 10^{18}$。\n\n#### 说明\n\n翻译自 [POI 2019](https://sio2.mimuw.edu.pl/c/oi27-1/dashboard/) A [Najmniejsza wspólna wielokrotność](https://sio2.mimuw.edu.pl/c/oi27-1/p/nww/)。", "locale": "zh-CN"}}}
{"pid": "P6660", "type": "P", "difficulty": 7, "samples": [["3\nPetroniusz obudzil sie zaledwie kolo...\nLitwo! Ojczyzno moja! ty jestes jak...\nW poczatkach roku 1878, kiedy swiat...", "Sienkiewicz\nMickiewicz\nPrus"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2019", "POI（波兰）", "Special Judge"], "title": "[POI 2019/2020 R1] Pisarze / 作家", "background": "Bajtek 拿到了一些波兰文的句段，他想知道这个这个句段从哪本书来的。\n\n**本题为数据分析题。**", "description": "他找到了 $t$ 个句段，并且确定这些句段来自以下三本书\n\n- Adama Mickiewicza 的 Pan Tadeusz  \n- Henryka Sienkiewicza 的 Quo Vadis\n- Bolesława Prusa 的 Lalka\n\n求具体来自哪一本书。", "inputFormat": "第一行一个整数 $t$ 代表句段数。       \n接下来 $t$ 行每行一个字符串 $s_i$ 代表一个句段。", "outputFormat": "$t$ 行每行一个字符串代表答案，输出该文章的作者 Mickiewicz，Prus 或 Sienkiewicz。", "hint": "#### 样例说明\n\n样例只截取了一部分，真正的样例见附加文件中的 sample.in 与 sample.out。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$t \\le 100$，$500 \\le |s_i| \\le 2000$。\n- Subtask 2（20 pts）：每行一定为完整的句子。\n- Subtask 3（30 pts）：$30 \\le |s_i| \\le 80$。\n- Subtask 4（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 1000$，$10 \\le |s_i| \\le 2000$，$\\sum|s_i| \\le 2 \\times 10^6$。\n\n**本题为数据分析题。**\n\n**本题采用 Special Judge**，您不需要准确识别每一组数据，SPJ 机制如下：\n\n- 假设 $t$ 为句段数，$p$ 为您答对的句段数。\n- 如果 $p \\ge 0.9 \\times t$，那么您就会得到 $100\\%$ 的分数。\n- 如果 $p \\le \\dfrac{t}{3}$，很遗憾，您不会得到任何分数。\n- 其他情况，您会得到 $100\\times \\dfrac{p-\\frac{t}{3}}{0.9\\times t-\\frac{t}{3}}\\%$ 的分数。\n\n附加文件中的 Mickiewicz.txt，Prus.txt 和 Sienkiewicz.txt 代表三段句段。\n\n数据生成器见附加文件中的 pistestgen.py，使用 `python3 pistestgen.py subtask name directory [seed]` 来生成一组数据，其中：\n\n- grupa 代表子任务的编号，从 $1$ 到 $4$\n- nazma 为数据名，将会生成在 nazma.in 与 nazma.out 中\n- katalog 为这三本书的文件夹\n- ziarno 用于生成同一组数据\n\n#### 说明\n\n翻译自 [POI 2019](https://sio2.mimuw.edu.pl/c/oi27-1/dashboard/) B [Pisarze](https://sio2.mimuw.edu.pl/c/oi27-1/p/pis/)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2019/2020 R1] Pisarze / 作家", "background": "Bajtek 拿到了一些波兰文的句段，他想知道这个这个句段从哪本书来的。\n\n**本题为数据分析题。**", "description": "他找到了 $t$ 个句段，并且确定这些句段来自以下三本书\n\n- Adama Mickiewicza 的 Pan Tadeusz  \n- Henryka Sienkiewicza 的 Quo Vadis\n- Bolesława Prusa 的 Lalka\n\n求具体来自哪一本书。", "inputFormat": "第一行一个整数 $t$ 代表句段数。       \n接下来 $t$ 行每行一个字符串 $s_i$ 代表一个句段。", "outputFormat": "$t$ 行每行一个字符串代表答案，输出该文章的作者 Mickiewicz，Prus 或 Sienkiewicz。", "hint": "#### 样例说明\n\n样例只截取了一部分，真正的样例见附加文件中的 sample.in 与 sample.out。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$t \\le 100$，$500 \\le |s_i| \\le 2000$。\n- Subtask 2（20 pts）：每行一定为完整的句子。\n- Subtask 3（30 pts）：$30 \\le |s_i| \\le 80$。\n- Subtask 4（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 1000$，$10 \\le |s_i| \\le 2000$，$\\sum|s_i| \\le 2 \\times 10^6$。\n\n**本题为数据分析题。**\n\n**本题采用 Special Judge**，您不需要准确识别每一组数据，SPJ 机制如下：\n\n- 假设 $t$ 为句段数，$p$ 为您答对的句段数。\n- 如果 $p \\ge 0.9 \\times t$，那么您就会得到 $100\\%$ 的分数。\n- 如果 $p \\le \\dfrac{t}{3}$，很遗憾，您不会得到任何分数。\n- 其他情况，您会得到 $100\\times \\dfrac{p-\\frac{t}{3}}{0.9\\times t-\\frac{t}{3}}\\%$ 的分数。\n\n附加文件中的 Mickiewicz.txt，Prus.txt 和 Sienkiewicz.txt 代表三段句段。\n\n数据生成器见附加文件中的 pistestgen.py，使用 `python3 pistestgen.py subtask name directory [seed]` 来生成一组数据，其中：\n\n- grupa 代表子任务的编号，从 $1$ 到 $4$\n- nazma 为数据名，将会生成在 nazma.in 与 nazma.out 中\n- katalog 为这三本书的文件夹\n- ziarno 用于生成同一组数据\n\n#### 说明\n\n翻译自 [POI 2019](https://sio2.mimuw.edu.pl/c/oi27-1/dashboard/) B [Pisarze](https://sio2.mimuw.edu.pl/c/oi27-1/p/pis/)。", "locale": "zh-CN"}}}
{"pid": "P6661", "type": "P", "difficulty": 4, "samples": [["4\n555 333 1\n0555 0551 3\n0555 0333 4\n9 9 1", "255\n0499\n-1\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2019", "POI（波兰）"], "title": "[POI 2019/2020 R1] Pomniejszenie / 削减", "background": "Bajtek 和 Bitek 是兄弟俩（Bajtek 是哥哥），他们要玩一个游戏。", "description": "游戏规则为：写下较大数的人获胜。\n\n假设 Bajtek 写的是 $A$，Bitek 写的是 $B$。$A$ 和 $B$ 的长度相等，且可能有前导零。\n\n但是每次比赛都是 Bajtek 赢（即总是 $A \\ge B$），所以 Bajtek 想输一次。\n\n他现在可以修改 $A$ 上的 **恰好** $k$ 位，使得 $A$ 比 $B$ 小。\n\n求 $A$ 修改后比 $B$ 小的最大值。\n\n如果无法使得 $A$ 比 $B$ 小，输出 `-1`。\n\n因为兄弟俩很喜欢玩这个游戏，所以他们要玩 $t$ 局，即要进行 $t$ 次修改与判断。", "inputFormat": "第一行一个整数 $t$ 代表局数。    \n接下来 $t$ 行每行三个整数 $A,B,k$ 代表 Bajtek 写的数，Bitek 写的数，和允许的修改次数。", "outputFormat": "$t$ 行每行一个整数代表 $A$ 经过修改后比 $B$ 小的最大值。    \n如果 $A$ 怎样修改都不能使得 $A$ 比 $B$ 小，输出 `-1`。", "hint": "#### 样例说明\n\n前两组附加样例分别对应附加文件中的 sample1/2.in 和 sample1/2.out。\n\n第三组附加样例为 sample3.zip。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n假设这里的 $n$ 为 $A,B$ 的长度：\n\n- Subtask 1（18 pts）：$1 \\le n \\le 5$。\n- Subtask 2（20 pts）：$1 \\le n \\le 5000$。\n- Subtask 3（20 pts）：$1 \\le n \\le 10^5$，$k=1$。\n- Subtask 4（42 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 100$，$1 \\le k \\le n \\le 10^5$，$A \\ge B$。\n\n#### 说明\n\n翻译自 [POI 2019](https://sio2.mimuw.edu.pl/c/oi27-1/dashboard/) C [Pomniejszenie](https://sio2.mimuw.edu.pl/c/oi27-1/p/pom/)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2019/2020 R1] Pomniejszenie / 削减", "background": "Bajtek 和 Bitek 是兄弟俩（Bajtek 是哥哥），他们要玩一个游戏。", "description": "游戏规则为：写下较大数的人获胜。\n\n假设 Bajtek 写的是 $A$，Bitek 写的是 $B$。$A$ 和 $B$ 的长度相等，且可能有前导零。\n\n但是每次比赛都是 Bajtek 赢（即总是 $A \\ge B$），所以 Bajtek 想输一次。\n\n他现在可以修改 $A$ 上的 **恰好** $k$ 位，使得 $A$ 比 $B$ 小。\n\n求 $A$ 修改后比 $B$ 小的最大值。\n\n如果无法使得 $A$ 比 $B$ 小，输出 `-1`。\n\n因为兄弟俩很喜欢玩这个游戏，所以他们要玩 $t$ 局，即要进行 $t$ 次修改与判断。", "inputFormat": "第一行一个整数 $t$ 代表局数。    \n接下来 $t$ 行每行三个整数 $A,B,k$ 代表 Bajtek 写的数，Bitek 写的数，和允许的修改次数。", "outputFormat": "$t$ 行每行一个整数代表 $A$ 经过修改后比 $B$ 小的最大值。    \n如果 $A$ 怎样修改都不能使得 $A$ 比 $B$ 小，输出 `-1`。", "hint": "#### 样例说明\n\n前两组附加样例分别对应附加文件中的 sample1/2.in 和 sample1/2.out。\n\n第三组附加样例为 sample3.zip。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n假设这里的 $n$ 为 $A,B$ 的长度：\n\n- Subtask 1（18 pts）：$1 \\le n \\le 5$。\n- Subtask 2（20 pts）：$1 \\le n \\le 5000$。\n- Subtask 3（20 pts）：$1 \\le n \\le 10^5$，$k=1$。\n- Subtask 4（42 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 100$，$1 \\le k \\le n \\le 10^5$，$A \\ge B$。\n\n#### 说明\n\n翻译自 [POI 2019](https://sio2.mimuw.edu.pl/c/oi27-1/dashboard/) C [Pomniejszenie](https://sio2.mimuw.edu.pl/c/oi27-1/p/pom/)。", "locale": "zh-CN"}}}
{"pid": "P6662", "type": "P", "difficulty": 6, "samples": [["4 4 1\n1 2\n2 3\n1 3\n3 4\n3", "12"], ["5 10 2\n1 2\n1 3\n1 4\n1 5\n2 3\n2 4\n2 5\n3 4\n3 5\n4 5\n5\n6", "120\n720"], ["11 40 1\n8 1\n4 1\n3 8\n2 6\n9 8\n11 5\n2 5\n2 1\n11 4\n10 6\n11 10\n9 7\n10 4\n6 9\n9 10\n2 11\n6 7\n8 2\n10 8\n3 6\n11 9\n1 10\n4 3\n6 11\n3 11\n4 5\n8 7\n10 3\n11 7\n9 2\n8 6\n2 3\n3 7\n8 4\n9 5\n4 9\n7 2\n5 10\n10 2\n6 4\n15", "142679253"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2019", "POI（波兰）", "容斥原理"], "title": "[POI 2019/2020 R1] Przedszkole / 幼儿园", "background": "幼儿园的早上，老师们要给小孩子发玩具。", "description": "有些小孩子玩玩具是自己一个人玩，有些小孩子是成对玩耍。\n\n现在有 $n$ 个小孩子，这 $n$ 个小孩子可以分为 $m$ 对。\n\n有 $k$ 种玩具，要发放给这些小孩子，必须保证在一对内的小孩子拿到的玩具不同。\n\n求一共有多少种发放方案。\n\n因为要发放的天数很多，所以给定 $z$ 组询问，这 $z$ 组询问中 $n,m$ 和对应的对是不变的，变的是 $k$。", "inputFormat": "第一行三个整数 $n,m,z$ 代表小孩子数，成对数和询问数。   \n这 $n$ 个小朋友编号为 $1$ 到 $n$。   \n接下来 $m$ 行每行两个整数代表一对小朋友。   \n接下来 $z$ 行每行一个整数 $k$ 代表一组询问。", "outputFormat": "$z$ 行每行一个整数代表发放方案数。        \n答案对 $10^9+7$ 取模。", "hint": "#### 样例说明\n\n两个附加样例请见附加文件中的 sample 1/2.in 和 sample 1/2.out。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$n,k \\le 8$，$z \\le 50$。\n- Subtask 2（26 pts）：$n \\le 15$。\n- Subtask 3（33 pts）：$m \\le 24$。\n- Subtask 4（33 pts）：一个小朋友恰好在两对小朋友。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$0 \\le m \\le \\min(10^5,\\dfrac{n^2-n}{2})$，$1 \\le z \\le 1000$，$1 \\le k \\le 10^9$。\n\n对于其中 $50\\%$ 的数据，$z=1$。\n\n#### 说明\n\n翻译自 [POI 2019](https://sio2.mimuw.edu.pl/c/oi27-1/dashboard/) D [Przedszkole](https://sio2.mimuw.edu.pl/c/oi27-1/p/prz/)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2019/2020 R1] Przedszkole / 幼儿园", "background": "幼儿园的早上，老师们要给小孩子发玩具。", "description": "有些小孩子玩玩具是自己一个人玩，有些小孩子是成对玩耍。\n\n现在有 $n$ 个小孩子，这 $n$ 个小孩子可以分为 $m$ 对。\n\n有 $k$ 种玩具，要发放给这些小孩子，必须保证在一对内的小孩子拿到的玩具不同。\n\n求一共有多少种发放方案。\n\n因为要发放的天数很多，所以给定 $z$ 组询问，这 $z$ 组询问中 $n,m$ 和对应的对是不变的，变的是 $k$。", "inputFormat": "第一行三个整数 $n,m,z$ 代表小孩子数，成对数和询问数。   \n这 $n$ 个小朋友编号为 $1$ 到 $n$。   \n接下来 $m$ 行每行两个整数代表一对小朋友。   \n接下来 $z$ 行每行一个整数 $k$ 代表一组询问。", "outputFormat": "$z$ 行每行一个整数代表发放方案数。        \n答案对 $10^9+7$ 取模。", "hint": "#### 样例说明\n\n两个附加样例请见附加文件中的 sample 1/2.in 和 sample 1/2.out。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（8 pts）：$n,k \\le 8$，$z \\le 50$。\n- Subtask 2（26 pts）：$n \\le 15$。\n- Subtask 3（33 pts）：$m \\le 24$。\n- Subtask 4（33 pts）：一个小朋友恰好在两对小朋友。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^5$，$0 \\le m \\le \\min(10^5,\\dfrac{n^2-n}{2})$，$1 \\le z \\le 1000$，$1 \\le k \\le 10^9$。\n\n对于其中 $50\\%$ 的数据，$z=1$。\n\n#### 说明\n\n翻译自 [POI 2019](https://sio2.mimuw.edu.pl/c/oi27-1/dashboard/) D [Przedszkole](https://sio2.mimuw.edu.pl/c/oi27-1/p/prz/)。", "locale": "zh-CN"}}}
{"pid": "P6663", "type": "P", "difficulty": 6, "samples": [["2 3 4", "TAK\n1 1 1 2\n1 1 2 1\n1 2 2 2\n2 3 2 2\n1 2 1 3"], ["2 3 1", "NIE"], ["2 3 3 ", "TAK\n1 2 2 2\n1 1 1 2\n2 2 2 3\n1 2 1 3\n2 2 2 1"], ["1 10 10", "NIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "2019", "POI（波兰）", "Special Judge", "构造"], "title": "[POI 2019/2020 R1] Układ scalony / 集成电路", "background": "Bajtel 公司专门生产集成电路板。", "description": "Bajtel 公司生产的集合电路板的大小为 $n \\times m$，现在通电的格子为 $(1,1)$。\n\n我们可以在两个相邻的格子连上电路让一个格子的电通向另一个格子，若干个电路组成集合电路。\n\n现在我们要连 $n \\times m-1$ 条电路，并且要求最长的集合电路 **恰好** 长度为 $k$，并且要求 **让所有格子通电**。\n\n求一种连接电路的方式。", "inputFormat": "一行三个整数 $n,m,k$ 代表电路板的大小和最长的集合电路必须满足的长度。", "outputFormat": "如果没有满足题意的连接方式，输出一个字符串 `NIE` 并结束程序。            \n如果有满足题意的连接方式：    \n第一行一个字符串 `TAK`。       \n接下来 $n \\times m-1$ 行每行四个整数 $u_1,v_1,u_2,v_2$ 代表一个电路连接 $(u_1,v_1)$，$(u_2,v_2)$。           \n如果有多组满足题意的解，输出一组即可。", "hint": "#### 样例说明\n\n对于样例 $1$，如下图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ly5swltx.png)\n\n另一组附加样例请见附加文件中的 sample.zip。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$n,m \\le 6$。\n- Subtask 2（20 pts）：$n \\le 3$。\n- Subtask 3（30 pts）：$n \\times m$ 为奇数。\n- Subtask 4（30 pts）：$n \\times m$ 为偶数。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 1000$，$0 \\le k \\le 10^6$。\n\n如果您输出了 `TAK`（并且这个数据点的确有解），但是您在后面电路连接的描述中出错（但必须保证是合法的输出），您可以获得 $20\\%$ 的分数。\n\n#### 说明\n\n翻译自 [POI 2019](https://sio2.mimuw.edu.pl/c/oi27-1/dashboard/) E [Układ scalony](https://sio2.mimuw.edu.pl/c/oi27-1/p/ukl/)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2019/2020 R1] Układ scalony / 集成电路", "background": "Bajtel 公司专门生产集成电路板。", "description": "Bajtel 公司生产的集合电路板的大小为 $n \\times m$，现在通电的格子为 $(1,1)$。\n\n我们可以在两个相邻的格子连上电路让一个格子的电通向另一个格子，若干个电路组成集合电路。\n\n现在我们要连 $n \\times m-1$ 条电路，并且要求最长的集合电路 **恰好** 长度为 $k$，并且要求 **让所有格子通电**。\n\n求一种连接电路的方式。", "inputFormat": "一行三个整数 $n,m,k$ 代表电路板的大小和最长的集合电路必须满足的长度。", "outputFormat": "如果没有满足题意的连接方式，输出一个字符串 `NIE` 并结束程序。            \n如果有满足题意的连接方式：    \n第一行一个字符串 `TAK`。       \n接下来 $n \\times m-1$ 行每行四个整数 $u_1,v_1,u_2,v_2$ 代表一个电路连接 $(u_1,v_1)$，$(u_2,v_2)$。           \n如果有多组满足题意的解，输出一组即可。", "hint": "#### 样例说明\n\n对于样例 $1$，如下图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ly5swltx.png)\n\n另一组附加样例请见附加文件中的 sample.zip。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$n,m \\le 6$。\n- Subtask 2（20 pts）：$n \\le 3$。\n- Subtask 3（30 pts）：$n \\times m$ 为奇数。\n- Subtask 4（30 pts）：$n \\times m$ 为偶数。\n\n对于 $100\\%$ 的数据，$1 \\le n,m \\le 1000$，$0 \\le k \\le 10^6$。\n\n如果您输出了 `TAK`（并且这个数据点的确有解），但是您在后面电路连接的描述中出错（但必须保证是合法的输出），您可以获得 $20\\%$ 的分数。\n\n#### 说明\n\n翻译自 [POI 2019](https://sio2.mimuw.edu.pl/c/oi27-1/dashboard/) E [Układ scalony](https://sio2.mimuw.edu.pl/c/oi27-1/p/ukl/)。", "locale": "zh-CN"}}}
{"pid": "P6664", "type": "P", "difficulty": 6, "samples": [["8 19\nfind 0 0 2 7 2\nfind 1 2 4 4 4\nfind 2 4 6 10 1\nfind 3 6 7 8 6\nmove 2 7\nmove 1 6\nfind 4 2 5 3 4\nmove 0 5\nchange 0 12\nfind 5 4 5 5 10\nfind 6 2 3 6 9\nmove 3 5\nfind 7 0 1 12 1\nmove 1 6\nfind 8 1 7 11 100\nmove 1 6\nmove 3 7\nmove 5 6\nmove 2 2\n", "11\n-1\n6\n23\n18\n106\n122\n11\n0"], ["15 45\nfind 0 1 0 8 5987\nfind 1 2 0 14 5455\nfind 2 3 0 27 8830\nfind 3 4 3 42 7688\nfind 4 5 0 25 1756\nfind 5 6 5 35 1550\nfind 6 7 4 43 9440\nmove 3 9\nchange 2 9113\nmove 10 13\nmove 3 3\nmove 11 10\nfind 7 8 7 6 7347\nfind 8 9 8 26 8935\nmove 8 4\nchange 3 4466\nfind 9 10 9 28 8560\nmove 6 5\nfind 10 11 10 31 6205\nchange 9 9228\nfind 11 12 10 23 948\nfind 12 13 12 45 5945\nmove 0 9\nmove 2 5\nchange 2 6118\nfind 13 14 13 12 6906\nmove 4 1\nchange 2 504\nfind 14 4 2 22 9796\nmove 10 7\nmove 1 14\nmove 13 3\nfind 15 12 9 39 8985\nfind 16 9 8 17 3710\nchange 1 5370\nfind 17 1 0 36 4669\nfind 18 7 6 37 8087\nmove 9 0\nfind 19 14 9 33 8234\nfind 20 0 4 24 5209\nchange 1 4883\nfind 21 6 3 9 2461\nfind 22 5 2 19 4291\nchange 1 7219\nchange 6 4846", "-1\n-1\n0\n-1\n16787\n1550\n39301\n7211\n16571\n25510\n59706\n46309\n30692"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "CTT（清华集训/北大集训）"], "title": "[清华集训 2016] 温暖会指引我们前行", "background": "寒冬又一次肆虐了北国大地\n\n无情的北风穿透了人们御寒的衣物\n\n可怜虫们在冬夜中发出无助的哀嚎\n\n“冻死宝宝了！”\n\n这时\n\n远处的天边出现了一位火焰之神\n\n“我将赐予你们温暖和希望！”\n\n只见他的身体中喷射出火焰之力\n\n通过坚固的钢铁，传遍了千家万户\n\n这时，只听见人们欢呼\n\n“暖气来啦！”", "description": "虽然小 R 住的宿舍楼早已来了暖气，但是由于某些原因，宿舍楼中的某些窗户仍然开着（例如厕所的窗户），这就使得宿舍楼中有一些路上的温度还是很低。\n\n小 R 的宿舍楼中有 $n$ 个地点和一些路，一条路连接了两个地点，小 R 可以通过这条路从其中任意一个地点到达另外一个地点。但在刚开始，小 R 还不熟悉宿舍楼中的任何一条路，所以他会慢慢地发现这些路，他在发现一条路时还会知道这条路的温度和长度。每条路的温度都是互不相同的。\n\n小 R 需要在宿舍楼中活动，每次他都需要从一个地点到达另一个地点。小 R 希望每次活动时经过一条最温暖的路径，最温暖的路径的定义为，将路径上各条路的温度从小到大排序后字典序最大。即温度最低的路温度尽量高，在满足该条件的情况下，温度第二低的路温度尽量高，以此类推。小 R 不会经过重复的路。由于每条路的温度互不相同，因此只存在一条最温暖的路径。\n\n对于小 R 的每次活动，你需要求出小 R 需要走过的路径总长度。如果小 R 通过当前发现的路不能完成这次活动，则输出  `−1`。\n\n注意本题中的字典序与传统意义上的字典序定义有所不同，对于两个序列 $a,b(a≠b)$，若 $a$ 是 $b$ 的前缀则 $a$ 的字典序较大，同时可以推出空串的字典序最大。", "inputFormat": "第一行两个正整数 $n,m$。表示小 R 的宿舍楼中有 $n$ 个地点，共发生了 $m$ 个事件。\n\n接下来 $m$ 行，每行描述一个事件，事件分为三类。\n\n- `find id u v t l` 表示小 R 发现了一条连接 $u$ 和 $v$ 之间的路，编号为id。相同id的边只会出现一次。\n- `move u v` 表示小 R 要从 $u$ 到达 $v$，你需要计算出最温暖的路径的长度 ，若不能从 $u$ 到达 $v$，则输出 `−1`。\n- `change id l` 表示从 $u$ 到 $v$ 这条边的长度变为了 $l$（保证在当前时间点这条边存在）。\n\n", "outputFormat": "对于每个询问，输出一行整数，表示最温暖的路径长度。", "hint": "对于 `find` 操作：$0≤id<m$，$0≤u,v<n$，$u≠v$，$0≤t≤1000000000$，$0≤l≤10000$；\n\n对于 `move` 操作：$0≤u,v<n$；\n\n对于 `change` 操作：$0≤l≤10000$。\n\n对于 $100\\%$ 的数据，$1≤n≤100000$，$1≤m≤300000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2016] 温暖会指引我们前行", "background": "寒冬又一次肆虐了北国大地\n\n无情的北风穿透了人们御寒的衣物\n\n可怜虫们在冬夜中发出无助的哀嚎\n\n“冻死宝宝了！”\n\n这时\n\n远处的天边出现了一位火焰之神\n\n“我将赐予你们温暖和希望！”\n\n只见他的身体中喷射出火焰之力\n\n通过坚固的钢铁，传遍了千家万户\n\n这时，只听见人们欢呼\n\n“暖气来啦！”", "description": "虽然小 R 住的宿舍楼早已来了暖气，但是由于某些原因，宿舍楼中的某些窗户仍然开着（例如厕所的窗户），这就使得宿舍楼中有一些路上的温度还是很低。\n\n小 R 的宿舍楼中有 $n$ 个地点和一些路，一条路连接了两个地点，小 R 可以通过这条路从其中任意一个地点到达另外一个地点。但在刚开始，小 R 还不熟悉宿舍楼中的任何一条路，所以他会慢慢地发现这些路，他在发现一条路时还会知道这条路的温度和长度。每条路的温度都是互不相同的。\n\n小 R 需要在宿舍楼中活动，每次他都需要从一个地点到达另一个地点。小 R 希望每次活动时经过一条最温暖的路径，最温暖的路径的定义为，将路径上各条路的温度从小到大排序后字典序最大。即温度最低的路温度尽量高，在满足该条件的情况下，温度第二低的路温度尽量高，以此类推。小 R 不会经过重复的路。由于每条路的温度互不相同，因此只存在一条最温暖的路径。\n\n对于小 R 的每次活动，你需要求出小 R 需要走过的路径总长度。如果小 R 通过当前发现的路不能完成这次活动，则输出  `−1`。\n\n注意本题中的字典序与传统意义上的字典序定义有所不同，对于两个序列 $a,b(a≠b)$，若 $a$ 是 $b$ 的前缀则 $a$ 的字典序较大，同时可以推出空串的字典序最大。", "inputFormat": "第一行两个正整数 $n,m$。表示小 R 的宿舍楼中有 $n$ 个地点，共发生了 $m$ 个事件。\n\n接下来 $m$ 行，每行描述一个事件，事件分为三类。\n\n- `find id u v t l` 表示小 R 发现了一条连接 $u$ 和 $v$ 之间的路，编号为id。相同id的边只会出现一次。\n- `move u v` 表示小 R 要从 $u$ 到达 $v$，你需要计算出最温暖的路径的长度 ，若不能从 $u$ 到达 $v$，则输出 `−1`。\n- `change id l` 表示从 $u$ 到 $v$ 这条边的长度变为了 $l$（保证在当前时间点这条边存在）。\n\n", "outputFormat": "对于每个询问，输出一行整数，表示最温暖的路径长度。", "hint": "对于 `find` 操作：$0≤id<m$，$0≤u,v<n$，$u≠v$，$0≤t≤1000000000$，$0≤l≤10000$；\n\n对于 `move` 操作：$0≤u,v<n$；\n\n对于 `change` 操作：$0≤l≤10000$。\n\n对于 $100\\%$ 的数据，$1≤n≤100000$，$1≤m≤300000$。", "locale": "zh-CN"}}}
{"pid": "P6665", "type": "P", "difficulty": 6, "samples": [["4\n2 1\n1 2\n3 2\n1 2\n1 3\n2 0\n3 1\n1 2", "Alice\nAlice\nBob\nAlice\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["博弈论", "2016", "字典树 Trie", "CTT（清华集训/北大集训）"], "title": "[清华集训 2016] Alice 和 Bob 又在玩游戏", "background": "", "description": "Alice 和 Bob 在玩游戏。\n\n有 $n$ 个节点，$m$ 条边 $(0\\le m\\le n-1)$ ，构成若干棵有根树，每棵树的根节点是该连通块内编号最小的点。Alice 和 Bob 轮流操作，每回合选择一个没有被删除的节点 $x$，将 $x$ 及其所有祖先全部删除，不能操作的人输。\n\n注：树的形态是在一开始就确定好的，删除节点不会影响剩余节点父亲和儿子的关系。比如：$1-3-2$ 这样一条链\n，$1$ 号点是根节点，删除 $1$ 号点之后，$3$ 号点还是 $2$ 号点的父节点。\n\n问有没有先手必胜策略。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示该测试点有 $T$ 组数据；接下来 $T$ 组数据。\n\n对于每组数据：\n\n输入第一行两个整数 $n, m$，分别表示点数和边数（节点从 $1$ 开始编号）。\n\n接下来 $m$ 行，每行两个正整数 $a, b$，表示节点 $a$ 和节点 $b$ 之间有一条边，输入数据中没有重边。", "outputFormat": "输出 $T$ 行，每行输出 Alice 先手并且 Alice 和 Bob 都足够聪明的情况下谁获胜。", "hint": "#### 样例解释\n\n第一组数据输入是一条链，Alice 可以一次性把所有节点都删掉。\n\n第二组数据，Alice 先手第一步删除 $1$ 号点即可胜利。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，$1≤T≤10$，$1≤n≤10^5$，$∑n≤2×10^5$，$0≤m≤n−1$，输入数据保证不会形成环，且每棵树的大小 $≤5×10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2016] Alice 和 Bob 又在玩游戏", "background": "", "description": "Alice 和 Bob 在玩游戏。\n\n有 $n$ 个节点，$m$ 条边 $(0\\le m\\le n-1)$ ，构成若干棵有根树，每棵树的根节点是该连通块内编号最小的点。Alice 和 Bob 轮流操作，每回合选择一个没有被删除的节点 $x$，将 $x$ 及其所有祖先全部删除，不能操作的人输。\n\n注：树的形态是在一开始就确定好的，删除节点不会影响剩余节点父亲和儿子的关系。比如：$1-3-2$ 这样一条链\n，$1$ 号点是根节点，删除 $1$ 号点之后，$3$ 号点还是 $2$ 号点的父节点。\n\n问有没有先手必胜策略。", "inputFormat": "**本题有多组数据。**\n\n第一行一个正整数 $T$，表示该测试点有 $T$ 组数据；接下来 $T$ 组数据。\n\n对于每组数据：\n\n输入第一行两个整数 $n, m$，分别表示点数和边数（节点从 $1$ 开始编号）。\n\n接下来 $m$ 行，每行两个正整数 $a, b$，表示节点 $a$ 和节点 $b$ 之间有一条边，输入数据中没有重边。", "outputFormat": "输出 $T$ 行，每行输出 Alice 先手并且 Alice 和 Bob 都足够聪明的情况下谁获胜。", "hint": "#### 样例解释\n\n第一组数据输入是一条链，Alice 可以一次性把所有节点都删掉。\n\n第二组数据，Alice 先手第一步删除 $1$ 号点即可胜利。\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，$1≤T≤10$，$1≤n≤10^5$，$∑n≤2×10^5$，$0≤m≤n−1$，输入数据保证不会形成环，且每棵树的大小 $≤5×10^4$。", "locale": "zh-CN"}}}
{"pid": "P6666", "type": "P", "difficulty": 7, "samples": [["5 6\n1 2\n2 4\n4 3\n2 5\n+ 1 4 7\n+ 5 5 4\n- 1\n+ 3 4 3\n+ 1 1 6\n- 2", "7\n11\n4\n7\n10\n9"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "CTT（清华集训/北大集训）", "动态 DP"], "title": "[清华集训 2016] 数据交互", "background": "", "description": "一个简单的网络系统可以被描述成一棵无根树。每个节点为一个服务器。连接服务器与服务器的数据线则看做一条树边。两个服务器进行数据交互时，数据会经过连接这两个服务器的路径上的所有服务器（包括这两个服务器自身）。每个数据交互请求都有一个非负的重要度，越重要的请求显然需要得到越高的优先处理权。此外，如果在某一个时刻存在一条非常重要（可以看作重要度无穷大）、且数据量巨大的交互请求，则所有被该交互经过的服务器都会优先处理这条交互并阻塞，从而导致其他通过这些服务器的交互出现延迟。\n\n现在，你作为一个网络系统的管理员，要监控整个系统的运行状态。系统的运行也很简单，在每一个时刻，只有可能出现下列二种事件中的一种：\n\n- 在某两个服务器之间出现一条新的数据交互请求；\n- 某个数据交互请求结束。\n\n我们假设这些事件中的交互请求的数据量都足够小。你的任务是在每一个时刻的事件结束后，求出：如果突然出现一条非常重要、且数据量巨大的交互请求，那么因其造成延迟的数据交互请求的重要度之和最大可能是多少？\n\n", "inputFormat": "输入的第一行包含二个正整数 $n,m$，分别表示服务器的个数、事件（时刻）的个数。\n\n接下来 $n−1$ 行，每行两个整数 $u,v$，描述一条树边。$u$ 和 $v$ 是服务器的编号，服务器编号为 $1,…,n$。\n\n接下来 $m$ 行，按发生时刻依次描述每一个事件；即第 $i$ 行（$i=1,2,3,…,m$）描述时刻 $i$ 发生的事件。事件的描述有两种：\n\n- `+ u v w`：服务器 $u$ 和 $v$ 之间出现了一条重要度为 $w$ 的数据交互请求；\n- `- t`：时刻 $t$ 出现的数据交互请求结束。\n", "outputFormat": "输出 $m$ 行，每行一个整数，依次描述在每个事件后，如果突然出现一条非常重要、且数据量巨大的交互请求，那么因其造成延迟的数据交互请求的重要度之和的最大值。如果此时没有任何数据交互请求，输出 $0$。\n", "hint": "对于 $30\\%$ 的数据，有 $1≤n,m≤100$。\n\n另有 $30\\%$ 的数据，没有第二类事件，即所有请求都不会结束。\n\n对于 $100\\%$ 的数据，有 $1≤n,m≤10^5$，所有的输入数据均为 `int` 范围内的非负整数。\n\n保证输入合法。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2016] 数据交互", "background": "", "description": "一个简单的网络系统可以被描述成一棵无根树。每个节点为一个服务器。连接服务器与服务器的数据线则看做一条树边。两个服务器进行数据交互时，数据会经过连接这两个服务器的路径上的所有服务器（包括这两个服务器自身）。每个数据交互请求都有一个非负的重要度，越重要的请求显然需要得到越高的优先处理权。此外，如果在某一个时刻存在一条非常重要（可以看作重要度无穷大）、且数据量巨大的交互请求，则所有被该交互经过的服务器都会优先处理这条交互并阻塞，从而导致其他通过这些服务器的交互出现延迟。\n\n现在，你作为一个网络系统的管理员，要监控整个系统的运行状态。系统的运行也很简单，在每一个时刻，只有可能出现下列二种事件中的一种：\n\n- 在某两个服务器之间出现一条新的数据交互请求；\n- 某个数据交互请求结束。\n\n我们假设这些事件中的交互请求的数据量都足够小。你的任务是在每一个时刻的事件结束后，求出：如果突然出现一条非常重要、且数据量巨大的交互请求，那么因其造成延迟的数据交互请求的重要度之和最大可能是多少？\n\n", "inputFormat": "输入的第一行包含二个正整数 $n,m$，分别表示服务器的个数、事件（时刻）的个数。\n\n接下来 $n−1$ 行，每行两个整数 $u,v$，描述一条树边。$u$ 和 $v$ 是服务器的编号，服务器编号为 $1,…,n$。\n\n接下来 $m$ 行，按发生时刻依次描述每一个事件；即第 $i$ 行（$i=1,2,3,…,m$）描述时刻 $i$ 发生的事件。事件的描述有两种：\n\n- `+ u v w`：服务器 $u$ 和 $v$ 之间出现了一条重要度为 $w$ 的数据交互请求；\n- `- t`：时刻 $t$ 出现的数据交互请求结束。\n", "outputFormat": "输出 $m$ 行，每行一个整数，依次描述在每个事件后，如果突然出现一条非常重要、且数据量巨大的交互请求，那么因其造成延迟的数据交互请求的重要度之和的最大值。如果此时没有任何数据交互请求，输出 $0$。\n", "hint": "对于 $30\\%$ 的数据，有 $1≤n,m≤100$。\n\n另有 $30\\%$ 的数据，没有第二类事件，即所有请求都不会结束。\n\n对于 $100\\%$ 的数据，有 $1≤n,m≤10^5$，所有的输入数据均为 `int` 范围内的非负整数。\n\n保证输入合法。", "locale": "zh-CN"}}}
{"pid": "P6667", "type": "P", "difficulty": 7, "samples": [["4 1 332748118\n0 1", "332748119"], ["4 3 12\n0 1 8 27", "46704"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2016", "CTT（清华集训/北大集训）"], "title": "[清华集训 2016] 如何优雅地求和", "background": "", "description": "有一个多项式函数 $f(x)$，最高次幂为 $x^m$，定义变换 $Q$：\n\n$$Q(f,n,x)=∑_{k=0}^{n}f(k)\\binom nkx^k(1−x)^{n−k}$$\n\n现在给定函数 $f$ 和 $n,x$，求 $Q(f,n,x)\\bmod998244353$。\n\n出于某种原因，函数 $f$ 由点值形式给出，即给定 $a_0,a_1,⋯,a_m$ 共 $m+1$ 个数，$f(x)=a_x$。可以证明该函数唯一。", "inputFormat": "第一行三个整数 $n,m,x$，意义如前所述。\n\n第二行共 $m+1$ 个整数，表示 $a_0,a_1,⋯,a_m$。", "outputFormat": "输出一行一个数表示答案，请对 $998,244,353$ 取模。", "hint": "#### 样例 $2$ 解释\n\n经计算得 $f(x)=x^3$。\n\n#### 数据范围\n\n对于所有的测试点，保证 $1≤n≤10^9$，$1≤m≤2×10^4$，$0≤a_i,x<998,244,353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2016] 如何优雅地求和", "background": "", "description": "有一个多项式函数 $f(x)$，最高次幂为 $x^m$，定义变换 $Q$：\n\n$$Q(f,n,x)=∑_{k=0}^{n}f(k)\\binom nkx^k(1−x)^{n−k}$$\n\n现在给定函数 $f$ 和 $n,x$，求 $Q(f,n,x)\\bmod998244353$。\n\n出于某种原因，函数 $f$ 由点值形式给出，即给定 $a_0,a_1,⋯,a_m$ 共 $m+1$ 个数，$f(x)=a_x$。可以证明该函数唯一。", "inputFormat": "第一行三个整数 $n,m,x$，意义如前所述。\n\n第二行共 $m+1$ 个整数，表示 $a_0,a_1,⋯,a_m$。", "outputFormat": "输出一行一个数表示答案，请对 $998,244,353$ 取模。", "hint": "#### 样例 $2$ 解释\n\n经计算得 $f(x)=x^3$。\n\n#### 数据范围\n\n对于所有的测试点，保证 $1≤n≤10^9$，$1≤m≤2×10^4$，$0≤a_i,x<998,244,353$。", "locale": "zh-CN"}}}
{"pid": "P6668", "type": "P", "difficulty": 7, "samples": [["5 3\n1 2 3 1 2\n1 2\n2 3\n3 4\n4 5\n1 1 2 1 3 1\n1 0 2 1 3 1\n1 1 2 1 3 0", "3\n1\n2"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "CTT（清华集训/北大集训）"], "title": "[清华集训 2016] 连通子树", "background": "", "description": "小 M 至上主义者小 D 今天心情很好，准备给小 M 准备一个圣诞礼物。\n\n他购买了一个圣诞树，这个圣诞树是一个有 $n$ 个点的树，点 $i$ 有一个颜色 $c_i$。小 D 觉得如果某种颜色太多就不好看了，所以最多会有 $5$ 个点有相同的颜色。\n\n小 M 收到了礼物很高兴，但是她最近对计数问题很感兴趣，于是她有一些问题想要小 D 解决。每次小 M 会关心三种不同的颜色 $a,b,c$，她想要知道这个圣诞树有多少个不同的非空联通子图满足里面颜色为 $a,b,c$ 的点的个数分别为 $na,nb,nc$。由于数可能很大，输出关于对 $10^9+7$ 取模的余数就可以了。\n\n小 D 当然轻松解决了这个问题，你虽然被喂了狗粮，但你也想锻炼你的实力，你能解决这个问题吗？\n\n", "inputFormat": "第一行两个数 $n$ 和 $Q$，表示树的大小和询问的个数。 \n\n第二行 $n$ 个数，其中第 $i$ 个表示 $c_i$，为第 $i$ 个节点的颜色。 \n\n接下来 $n-1$ 行，每行两个数 $a$ 和 $b$，表示点 $a$ 和点 $b$ 之间有一条边。\n\n接下来 $Q$ 行，其中每行有 $6$ 个数 $a,na,b,nb,c,nc$，表示如题目中所述的询问。", "outputFormat": "对每个询问输出一行表示答案。\n", "hint": "#### 限制与约定\n\n$1≤i≤n$，$1≤c_i≤n$。\n\n对于每个询问我们有：$0≤na,nb,nc≤5$，$1≤a,b,c≤n$ 以及 $a,b,c$ 两两不同。\n\n对于 $10\\%$ 的询问，$n,Q≤10$。\n\n对于另 $10\\%$ 的询问，$n≤15$，$Q≤50$。\n\n对于另 $10\\%$ 的询问，$n,Q≤1000$。\n\n对于另 $5\\%$ 的询问，$n,Q≤50000$，并且输入的树如果以点 $1$ 为根，最大深度不超过 $35$（点 $1$ 的深度为 $0$）。\n\n对于另 $5\\%$ 的询问，$n,Q≤100000$，并且输入的树如果以点 $1$ 为根，最大深度不超过 $35$（点 $1$ 的深度为 $0$）。\n\n对于另 $20\\%$ 的询问，$n,Q≤100000$，并且保证所有询问 $(na+1)^2(nb+1)^2(nc+1)^2$ 的和小于等于 $10^8$。\n\n对于另 $40\\%$ 的询问，$n,Q≤100000$，并且保证所有询问 $(na+1)(nb+1)(nc+1)$ 的和小于等于 $8\\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2016] 连通子树", "background": "", "description": "小 M 至上主义者小 D 今天心情很好，准备给小 M 准备一个圣诞礼物。\n\n他购买了一个圣诞树，这个圣诞树是一个有 $n$ 个点的树，点 $i$ 有一个颜色 $c_i$。小 D 觉得如果某种颜色太多就不好看了，所以最多会有 $5$ 个点有相同的颜色。\n\n小 M 收到了礼物很高兴，但是她最近对计数问题很感兴趣，于是她有一些问题想要小 D 解决。每次小 M 会关心三种不同的颜色 $a,b,c$，她想要知道这个圣诞树有多少个不同的非空联通子图满足里面颜色为 $a,b,c$ 的点的个数分别为 $na,nb,nc$。由于数可能很大，输出关于对 $10^9+7$ 取模的余数就可以了。\n\n小 D 当然轻松解决了这个问题，你虽然被喂了狗粮，但你也想锻炼你的实力，你能解决这个问题吗？\n\n", "inputFormat": "第一行两个数 $n$ 和 $Q$，表示树的大小和询问的个数。 \n\n第二行 $n$ 个数，其中第 $i$ 个表示 $c_i$，为第 $i$ 个节点的颜色。 \n\n接下来 $n-1$ 行，每行两个数 $a$ 和 $b$，表示点 $a$ 和点 $b$ 之间有一条边。\n\n接下来 $Q$ 行，其中每行有 $6$ 个数 $a,na,b,nb,c,nc$，表示如题目中所述的询问。", "outputFormat": "对每个询问输出一行表示答案。\n", "hint": "#### 限制与约定\n\n$1≤i≤n$，$1≤c_i≤n$。\n\n对于每个询问我们有：$0≤na,nb,nc≤5$，$1≤a,b,c≤n$ 以及 $a,b,c$ 两两不同。\n\n对于 $10\\%$ 的询问，$n,Q≤10$。\n\n对于另 $10\\%$ 的询问，$n≤15$，$Q≤50$。\n\n对于另 $10\\%$ 的询问，$n,Q≤1000$。\n\n对于另 $5\\%$ 的询问，$n,Q≤50000$，并且输入的树如果以点 $1$ 为根，最大深度不超过 $35$（点 $1$ 的深度为 $0$）。\n\n对于另 $5\\%$ 的询问，$n,Q≤100000$，并且输入的树如果以点 $1$ 为根，最大深度不超过 $35$（点 $1$ 的深度为 $0$）。\n\n对于另 $20\\%$ 的询问，$n,Q≤100000$，并且保证所有询问 $(na+1)^2(nb+1)^2(nc+1)^2$ 的和小于等于 $10^8$。\n\n对于另 $40\\%$ 的询问，$n,Q≤100000$，并且保证所有询问 $(na+1)(nb+1)(nc+1)$ 的和小于等于 $8\\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P6669", "type": "P", "difficulty": 6, "samples": [["1 2\n3 3", "1"], ["2 5\n4 5\n6 7", "0\n7"], ["3 23\n23333333 23333333\n233333333 233333333\n2333333333 2333333333", "851883128\n959557926\n680723120"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "数位 DP", "Lucas 定理", "CTT（清华集训/北大集训）"], "title": "[清华集训 2016] 组合数问题", "background": "", "description": "组合数 $C_n^m$ 表示的是从 $n$ 个物品中选出 $m$ 个物品的方案数。举个例子，从 $(1,2,3)$ 三个物品中选择两个物品可以有 $(1,2),(1,3),(2,3)$ 这三种选择方法。根据组合数的定义，我们可以给出计算组合数 $C_n^m$ 的一般公式：\n\n$$C_n^m=\\dfrac{n!}{m!(n-m)!}$$\n\n其中 $n!=1×2×⋯×n$。（额外的，当 $n=0$ 时，$n!=1$）\n\n小葱想知道如果给定 $n,m$ 和 $k$，对于所有的 $0≤i≤n,0≤j≤\\min(i,m)$ 有多少对 $(i,j)$ 满足 $C^j_i$ 是 $k$ 的倍数。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行有两个整数 $t,k$，其中 $t$ 代表该测试点总共有多少组测试数据。\n\n接下来 $t$ 行每行两个整数 $n,m$。\n", "outputFormat": "$t$ 行，每行一个整数代表所有的 $0≤i≤n,0≤j≤\\min(i,m)$ 中有多少对 $(i,j)$ 满足 $C^j_i$ 是 $k$ 的倍数。", "hint": "#### 样例 $1$ 解释\n\n在所有情况中，只有 $C_{2}^{1}=2$ 是 $2$ 的倍数。\n\n#### 限制与约定\n\n对于 $20\\%$ 的测试点，$1≤n,m≤100$；\n\n对于另外 $15\\%$ 的测试点，$n≤m$；\n\n对于另外 $15\\%$ 的测试点，$k=2$；\n\n对于另外 $15\\%$ 的测试点， $m\\le10$；\n\n对于 $100\\%$ 的测试点， $1≤n,m≤10^{18}$，$1≤t,k≤100$，且 $k$ 是一个质数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2016] 组合数问题", "background": "", "description": "组合数 $C_n^m$ 表示的是从 $n$ 个物品中选出 $m$ 个物品的方案数。举个例子，从 $(1,2,3)$ 三个物品中选择两个物品可以有 $(1,2),(1,3),(2,3)$ 这三种选择方法。根据组合数的定义，我们可以给出计算组合数 $C_n^m$ 的一般公式：\n\n$$C_n^m=\\dfrac{n!}{m!(n-m)!}$$\n\n其中 $n!=1×2×⋯×n$。（额外的，当 $n=0$ 时，$n!=1$）\n\n小葱想知道如果给定 $n,m$ 和 $k$，对于所有的 $0≤i≤n,0≤j≤\\min(i,m)$ 有多少对 $(i,j)$ 满足 $C^j_i$ 是 $k$ 的倍数。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行有两个整数 $t,k$，其中 $t$ 代表该测试点总共有多少组测试数据。\n\n接下来 $t$ 行每行两个整数 $n,m$。\n", "outputFormat": "$t$ 行，每行一个整数代表所有的 $0≤i≤n,0≤j≤\\min(i,m)$ 中有多少对 $(i,j)$ 满足 $C^j_i$ 是 $k$ 的倍数。", "hint": "#### 样例 $1$ 解释\n\n在所有情况中，只有 $C_{2}^{1}=2$ 是 $2$ 的倍数。\n\n#### 限制与约定\n\n对于 $20\\%$ 的测试点，$1≤n,m≤100$；\n\n对于另外 $15\\%$ 的测试点，$n≤m$；\n\n对于另外 $15\\%$ 的测试点，$k=2$；\n\n对于另外 $15\\%$ 的测试点， $m\\le10$；\n\n对于 $100\\%$ 的测试点， $1≤n,m≤10^{18}$，$1≤t,k≤100$，且 $k$ 是一个质数。", "locale": "zh-CN"}}}
{"pid": "P6670", "type": "P", "difficulty": 7, "samples": [["5 21\n1 2 9\n1 3 27\n1 4 3\n1 5 12", "1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "CTT（清华集训/北大集训）"], "title": "[清华集训 2016] 汽水", "background": "", "description": "牛牛来到了一个盛产汽水的国度旅行。\n\n这个国度的地图上有 $n$ 个城市，这些城市之间用 $n−1$ 条道路连接，任意两个城市之间，都存在一条路径连接。这些城市生产的汽水有许多不同的风味，在经过道路 $i$ 时，牛牛会喝掉 $w_i$ 的汽水。牛牛非常喜欢喝汽水，但过量地饮用汽水是有害健康的，因此，他希望在他旅行的这段时间内，平均每天喝到的汽水的量尽可能地接近给定的一个正整数 $k$ 。\n\n同时，牛牛希望他的旅行计划尽可能地有趣，牛牛会先选择一个城市作为起点，然后每天通过一条道路，前往一个没有去过的城市，最终选择在某一个城市结束旅行。\n\n牛牛还要忙着去喝可乐，他希望你帮他设计出一个旅行计划，满足每天 $|P−k|$（$P$ 为平均每天喝到的汽水量）的值尽量小，请你告诉他这个最小值。", "inputFormat": "第一行两个正整数 $n,k$。\n\n接下来 $n−1$ 行，每行三个正整数 $u_i,v_i,w_i$，表示城市 $u_i$ 和城市 $v_i$ 之间有一条长度为 $w_i$ 的道路连接。\n\n同一行相邻的两个整数均用一个空格隔开。", "outputFormat": "一行一个整数，表示答案的最小值的整数部分，即你只要将这个最小值向下取整然后输出即可。", "hint": "#### 样例解释\n\n在图中，路径 $5\\to1\\to3$ 是一条最合适的路线，总计喝到的汽水的量是 $27+12=39$, 平均每天喝到的汽水量是 $39÷2=19.5$, $|19.5−21|=1.5$，向下取整后得到 $1$，因此答案是 $1$。\n\n#### 数据范围\n\n对于 $20\\%$ 的数据，$n≤1000$。\n\n对于另外 $20\\%$ 的数据，保证编号为 $i(1≤i≤n−1)$ 的节点和编号为 $i+1$ 的节点之间连接了一条边。\n\n对于另外 $20\\%$ 的数据，保证数据是以 $1$ 为根的完全二叉树（在完全二叉树中，节点 $i(2≤i≤n)$ 和节点 $⌊i÷2⌋$ 之间有一条道路）。\n\n对于另外 $20\\%$ 的数据，保证除节点 $1$ 以外，其他节点和节点 $1$ 之间都有一条道路。\n\n对于 $100\\%$ 的数据，$1≤n≤5×10^4$，$0≤w_i≤10^{13}$，$0≤k≤10^{13}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2016] 汽水", "background": "", "description": "牛牛来到了一个盛产汽水的国度旅行。\n\n这个国度的地图上有 $n$ 个城市，这些城市之间用 $n−1$ 条道路连接，任意两个城市之间，都存在一条路径连接。这些城市生产的汽水有许多不同的风味，在经过道路 $i$ 时，牛牛会喝掉 $w_i$ 的汽水。牛牛非常喜欢喝汽水，但过量地饮用汽水是有害健康的，因此，他希望在他旅行的这段时间内，平均每天喝到的汽水的量尽可能地接近给定的一个正整数 $k$ 。\n\n同时，牛牛希望他的旅行计划尽可能地有趣，牛牛会先选择一个城市作为起点，然后每天通过一条道路，前往一个没有去过的城市，最终选择在某一个城市结束旅行。\n\n牛牛还要忙着去喝可乐，他希望你帮他设计出一个旅行计划，满足每天 $|P−k|$（$P$ 为平均每天喝到的汽水量）的值尽量小，请你告诉他这个最小值。", "inputFormat": "第一行两个正整数 $n,k$。\n\n接下来 $n−1$ 行，每行三个正整数 $u_i,v_i,w_i$，表示城市 $u_i$ 和城市 $v_i$ 之间有一条长度为 $w_i$ 的道路连接。\n\n同一行相邻的两个整数均用一个空格隔开。", "outputFormat": "一行一个整数，表示答案的最小值的整数部分，即你只要将这个最小值向下取整然后输出即可。", "hint": "#### 样例解释\n\n在图中，路径 $5\\to1\\to3$ 是一条最合适的路线，总计喝到的汽水的量是 $27+12=39$, 平均每天喝到的汽水量是 $39÷2=19.5$, $|19.5−21|=1.5$，向下取整后得到 $1$，因此答案是 $1$。\n\n#### 数据范围\n\n对于 $20\\%$ 的数据，$n≤1000$。\n\n对于另外 $20\\%$ 的数据，保证编号为 $i(1≤i≤n−1)$ 的节点和编号为 $i+1$ 的节点之间连接了一条边。\n\n对于另外 $20\\%$ 的数据，保证数据是以 $1$ 为根的完全二叉树（在完全二叉树中，节点 $i(2≤i≤n)$ 和节点 $⌊i÷2⌋$ 之间有一条道路）。\n\n对于另外 $20\\%$ 的数据，保证除节点 $1$ 以外，其他节点和节点 $1$ 之间都有一条道路。\n\n对于 $100\\%$ 的数据，$1≤n≤5×10^4$，$0≤w_i≤10^{13}$，$0≤k≤10^{13}$。", "locale": "zh-CN"}}}
{"pid": "P6671", "type": "P", "difficulty": 7, "samples": [["2 1 20 11\n2\n5 5 4\n16 9 4", "23.0"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "CTT（清华集训/北大集训）"], "title": "[清华集训 2016] 定向越野", "background": "", "description": "定向越野是一项集智力与体力为一体的体育运动，在这项活动中，选手需要从起点出发，在尽可能短的时间内到达指定的地点。\n\n牛牛非常喜爱这项运动，但是他不知道怎么样才能更快到达终点。他听说来参加集训的你智力过人，于是他把定向越野的地图交给了你，希望你帮他解决一些问题。\n\n牛牛给你的地图描述的是一块平地，地图上不仅清楚地标出了起点和终点的坐标，还标有若干个互不相交圆形区域，每个区域表示一个圆形的水域。对于不会游泳的牛牛来说，进入水域是根本不可能的。因此，牛牛的行动路线不能从水域中穿过。牛牛想知道这样的路线长度最小可以是多少。", "inputFormat": "第一行包含四个实数 $S_x,S_y,T_x,T_y$ ，分别表示起点的坐标和终点的坐标。\n\n第二行包含一个整数 $n$，表示水域的个数。\n\n接下来 $n$ 行，每行 $3$ 个整数 $x_i,y_i,r_i$ 表示一片水域的圆心的坐标和半径。\n\n保证起点和终点都不在水域的内部或边界上，起点和终点不重合。", "outputFormat": "输出一行，包含一个实数，四舍五入精确到小数点后恰好 $1$ 位，表示答案。你的输出必须和标准输出完全一样才算正确。\n\n测试数据保证四舍五入后的答案和准确答案的差的绝对值不大于 $4×10^{−2}$。\n\n（如果你不知道什么是浮点误差，这段话可以理解为：对于大多数的算法，你可以正常地使用浮点数类型而不用对它进行特殊的处理）", "hint": "#### 样例解释\n\n这个地图如下图，其中画出的路径即是所求的最短路径。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k4pfy2m5.png)\n\n#### 数据范围\n\n所有数据满足 $0≤n≤500$，$−1000≤x_i,y_i,r_i,S_x,S_y,T_x,T_y≤1000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2016] 定向越野", "background": "", "description": "定向越野是一项集智力与体力为一体的体育运动，在这项活动中，选手需要从起点出发，在尽可能短的时间内到达指定的地点。\n\n牛牛非常喜爱这项运动，但是他不知道怎么样才能更快到达终点。他听说来参加集训的你智力过人，于是他把定向越野的地图交给了你，希望你帮他解决一些问题。\n\n牛牛给你的地图描述的是一块平地，地图上不仅清楚地标出了起点和终点的坐标，还标有若干个互不相交圆形区域，每个区域表示一个圆形的水域。对于不会游泳的牛牛来说，进入水域是根本不可能的。因此，牛牛的行动路线不能从水域中穿过。牛牛想知道这样的路线长度最小可以是多少。", "inputFormat": "第一行包含四个实数 $S_x,S_y,T_x,T_y$ ，分别表示起点的坐标和终点的坐标。\n\n第二行包含一个整数 $n$，表示水域的个数。\n\n接下来 $n$ 行，每行 $3$ 个整数 $x_i,y_i,r_i$ 表示一片水域的圆心的坐标和半径。\n\n保证起点和终点都不在水域的内部或边界上，起点和终点不重合。", "outputFormat": "输出一行，包含一个实数，四舍五入精确到小数点后恰好 $1$ 位，表示答案。你的输出必须和标准输出完全一样才算正确。\n\n测试数据保证四舍五入后的答案和准确答案的差的绝对值不大于 $4×10^{−2}$。\n\n（如果你不知道什么是浮点误差，这段话可以理解为：对于大多数的算法，你可以正常地使用浮点数类型而不用对它进行特殊的处理）", "hint": "#### 样例解释\n\n这个地图如下图，其中画出的路径即是所求的最短路径。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k4pfy2m5.png)\n\n#### 数据范围\n\n所有数据满足 $0≤n≤500$，$−1000≤x_i,y_i,r_i,S_x,S_y,T_x,T_y≤1000$。", "locale": "zh-CN"}}}
{"pid": "P6672", "type": "P", "difficulty": 6, "samples": [["1\n5\n", "24"], ["6\n1 2 3 4 5 6\n", "90337303"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "CTT（清华集训/北大集训）"], "title": "[清华集训 2016] 你的生命已如风中残烛", "background": null, "description": "期中考试考完了，已经感到没有什么好害怕的六花今天决定不学数学了，于是和勇太打起了游戏王。\n\n“你已空手空场，生命只剩一百，事到如今你还能做什么？”\n\n“所累哇多卡纳！”\n\n“纳尼？”\n\n然而六花的卡组实在是太菜了，经过分析，六花发现在一回合内，她卡组中的牌并没有办法达成 OTK，除非主角光环附体：\n\n**被封印的艾克佐迪亚**\n\n**——包括这张卡在内，「被封印者的右足」「被封印者的左足」「被封印者的右腕」「被封印者的左腕」全在手牌的时候，获得决斗胜利。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zk6r83v0.png)\n\n但是因为六花不是高贵的氪金玩家，她可以肯定，这五张牌中肯定有一张，在牌堆的底端。所以六花现在面临着一个难题：需要在一回合内将卡组抽完。\n\n六花的牌堆一共有 $m+1$ 张牌，因为最后一张牌是固定的，所以我们现在只考虑前 $m$ 张牌。\n\n在这 $m$ 张牌中，有 $n$ 张特殊牌和 $m-n$ 张普通牌，每一个特殊牌有一个属性值 $w_i$，表示在打出这张牌后，可以再摸 $w_i$ 张牌。幸运的是，六花发现这些牌刚好满足 $∑\\limits_{i=1}^nw_i=m$，因此她可以放心的随意摸牌而不用担心爆牌。\n\n因为这 $m$ 张牌是被打乱的，所以总共有 $m!$ 种不同的可能的牌堆。\n\n现在这回合开始了，六花先从牌堆里抽出一张牌，接着六花不断的打出手中的牌，如果打出特殊牌，则又可以摸牌，直到摸到最后一张牌达成胜利条件或者打光自己的手牌结束自己的回合继而输掉比赛。\n\n举例来说，如果牌堆是 $\\{4,0,0,2,0,0,0\\}$（用 $0$ 表示普通牌，其他数字表示 $w_i$，其中最后一个 $0$ 是最后一个部件），那么六花打牌的过程可以为：\n\n- 取一张牌，手中的牌为 $\\{4\\}$。\n- 打出 $\\{4\\}$，再取四张牌，手中的牌为 $\\{0,0,2,0\\}$。\n- 打出 $\\{2\\}$，还需要再取两张，这时已摸到最后一个部件，六花胜利。\n- 而如果牌堆是 $\\{2,0,0,4,0,0,0\\}$，不难发现是勇太的胜利。\n\n现在，六花想要知道这 $m!$ 种不同的牌堆中，有多少种能够让她胜利。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个空格隔开的正整数 $w_i$。\n\n通过输入你可以自己算出来 $m=∑w_i$。", "outputFormat": "输出一个整数表示答案，答案可能很大，你只需要输出对 $998\\,244\\,353$ 取模后的结果。", "hint": "#### 样例 $1$ 解释\n\n所有可能的 $m!$ 种牌堆中，只有形如 $\\{5,0,0,0,0,0\\}$ 的 $24$ 个牌堆满足条件。\n\n#### 数据范围\n\n对于 $10\\%$ 的数据，$m \\leq 10$。\n\n对于 $30\\%$ 的数据，$n \\leq 8$。\n\n对于 $50\\%$ 的数据，$n \\leq 15$。\n\n对于 $70\\%$ 的数据，$n \\leq 30$。\n\n对于 $100\\%$ 的数据，$n \\leq 40$，$1 \\leq w_i \\leq 10^5$。同时保证有 $m-n \\geq 4$，因为牌堆里毕竟要有这 $5$ 个部件嘛。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2016] 你的生命已如风中残烛", "background": null, "description": "期中考试考完了，已经感到没有什么好害怕的六花今天决定不学数学了，于是和勇太打起了游戏王。\n\n“你已空手空场，生命只剩一百，事到如今你还能做什么？”\n\n“所累哇多卡纳！”\n\n“纳尼？”\n\n然而六花的卡组实在是太菜了，经过分析，六花发现在一回合内，她卡组中的牌并没有办法达成 OTK，除非主角光环附体：\n\n**被封印的艾克佐迪亚**\n\n**——包括这张卡在内，「被封印者的右足」「被封印者的左足」「被封印者的右腕」「被封印者的左腕」全在手牌的时候，获得决斗胜利。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zk6r83v0.png)\n\n但是因为六花不是高贵的氪金玩家，她可以肯定，这五张牌中肯定有一张，在牌堆的底端。所以六花现在面临着一个难题：需要在一回合内将卡组抽完。\n\n六花的牌堆一共有 $m+1$ 张牌，因为最后一张牌是固定的，所以我们现在只考虑前 $m$ 张牌。\n\n在这 $m$ 张牌中，有 $n$ 张特殊牌和 $m-n$ 张普通牌，每一个特殊牌有一个属性值 $w_i$，表示在打出这张牌后，可以再摸 $w_i$ 张牌。幸运的是，六花发现这些牌刚好满足 $∑\\limits_{i=1}^nw_i=m$，因此她可以放心的随意摸牌而不用担心爆牌。\n\n因为这 $m$ 张牌是被打乱的，所以总共有 $m!$ 种不同的可能的牌堆。\n\n现在这回合开始了，六花先从牌堆里抽出一张牌，接着六花不断的打出手中的牌，如果打出特殊牌，则又可以摸牌，直到摸到最后一张牌达成胜利条件或者打光自己的手牌结束自己的回合继而输掉比赛。\n\n举例来说，如果牌堆是 $\\{4,0,0,2,0,0,0\\}$（用 $0$ 表示普通牌，其他数字表示 $w_i$，其中最后一个 $0$ 是最后一个部件），那么六花打牌的过程可以为：\n\n- 取一张牌，手中的牌为 $\\{4\\}$。\n- 打出 $\\{4\\}$，再取四张牌，手中的牌为 $\\{0,0,2,0\\}$。\n- 打出 $\\{2\\}$，还需要再取两张，这时已摸到最后一个部件，六花胜利。\n- 而如果牌堆是 $\\{2,0,0,4,0,0,0\\}$，不难发现是勇太的胜利。\n\n现在，六花想要知道这 $m!$ 种不同的牌堆中，有多少种能够让她胜利。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个空格隔开的正整数 $w_i$。\n\n通过输入你可以自己算出来 $m=∑w_i$。", "outputFormat": "输出一个整数表示答案，答案可能很大，你只需要输出对 $998\\,244\\,353$ 取模后的结果。", "hint": "#### 样例 $1$ 解释\n\n所有可能的 $m!$ 种牌堆中，只有形如 $\\{5,0,0,0,0,0\\}$ 的 $24$ 个牌堆满足条件。\n\n#### 数据范围\n\n对于 $10\\%$ 的数据，$m \\leq 10$。\n\n对于 $30\\%$ 的数据，$n \\leq 8$。\n\n对于 $50\\%$ 的数据，$n \\leq 15$。\n\n对于 $70\\%$ 的数据，$n \\leq 30$。\n\n对于 $100\\%$ 的数据，$n \\leq 40$，$1 \\leq w_i \\leq 10^5$。同时保证有 $m-n \\geq 4$，因为牌堆里毕竟要有这 $5$ 个部件嘛。", "locale": "zh-CN"}}}
{"pid": "P6673", "type": "P", "difficulty": 7, "samples": [["1 1 10009\n10 100 1000\n2 3\n4\n", "4320\n3240\n2430\n"], ["2 3 103\n7 8 9 10 11 12 13 14 15\n1 2 3\n4 5\n6\n", "96\n8\n73\n38\n53\n15\n27\n42\n4\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2016", "CTT（清华集训/北大集训）"], "title": "[清华集训 2016] 石家庄的工人阶级队伍比较坚强", "background": "B 君和 G 君在过街天桥上。  \n\nB 君：「又到冬天啦，算起来到大学已经三年多了」 \n\nG 君：「是呀」  \n\nB 君：「街上的情侣又多起来了，想想三年之前，我也是这样……」  \n\nG 君：「？？」 \n\nB 君：「……在天桥上看情侣的！」 \n\nG 君：「唔。」  \n\nB 君：「不过这次有你陪我了呢~」  \n\nG 君：「……」  \n\nB 君：「诶诶，我有个问题想问你~」  \n\nG 君：「问吧」  \n\nB 君：「假设 $n=3^m$ 个人一起玩 cei ding ke」  \n\nG 君：「啊咧？cei ding ke 是什么？」  \n\nB 君：「就是石头剪刀布~，我们也叫钉钢锤」 \n\nG 君：「你就问这个？」  \n\nB 君：「你等会，我还没说完呢」", "description": "$n=3^m$ 个人在玩石头剪刀布， 一共有 $t$ 轮游戏，每轮有 $m$ 次石头剪刀布。\n\n在同一轮的 $m$ 次游戏中，每个人的决策必须是提前确定的，也就是说不能采用随机策略，也不能根据前若干局的结果决定下一局的决策； 这样，显然一共有 $n=3^m$ 种决策。\n\n这 $n=3^m$ 个人会采取两两不同的决策。 为了方便表达，对于第 $x$（$0≤x<n$）个人，将 $x$ 转换成三进制得到一个 $m$ 位的数。 其中 $0$ 表示剪刀，$1$ 表示石头，$2$ 表示布。就得到了第 $x$ 个人采取的策略。\n\n由于编号是固定的，因此每个人在不同轮的 $m$ 次游戏中都会采取同一套决策。\n\n第 $x$ 个人在最初时有一个分数 $f_{0,x}$。\n\n在第 $i$ 轮中，他将和另一个人 $y$ 进行 $m$ 次的石头剪刀布的比赛。\n\n我们用 $W(x,y)$ 表示 $x$ 在和 $y$ 的 $m$ 次比赛中赢的次数； 用 $L(x,y)$ 表示 $x$ 在和 $y$ 的 $m$ 次比赛中输的次数。\n\n在第 $i$ 轮结束之后，第 $x$ 个人分数是：\n\n$$f_{i,x}=∑_{0≤y<n}f_{i−1,y}b_{u,v}$$\n\n其中 $u=W(x,y)=L(y,x),v=L(x,y)=W(y,x)$，平局不计入次数；$b_{u,v}$ 则是一个给定的评分数组。\n\n注意即使 $y$ 和 $x$ 一样（自己转移到自己）也会乘上一个系数 $b_{0,0}$（即自己跟自己打全为平局）。\n\n显然随着轮数越来越多，分数也会越来越大， 这个计分系统和我们平时用的计算机一样，也会溢出。 当要储存的分数 $f$ 大于等于 $p$ 的时候，就会变成 $f\\bmod p$。\n\nB 君想知道 $t$ 轮之后所有人的分数，也就是 $f_{t,0},f_{t,1},…,f_{t,n−1}$。\n\nG 君：「诶，我发现这个数 $p$ 有特殊的性质诶！不存在两个正整数，使得他们倒数的和等于 $3/p$！」\n\nB 君：「G 君好棒！不过这个题怎么做呢？」", "inputFormat": "第一行三个整数，表示 $m,t,p$。\n\n第二行有 $n=3^m$ 个整数，表示 $f_{0,0},f_{0,1},…,f_{0,n−1}$。保证 $0≤f_{0,i}<p$。\n\n接下来的部分是一个数组 $b$，第 $1$ 行 $m+1$ 个数，第 $2$ 行 $m$ 个数……第 $m+1$ 行 $1$ 个数。\n\n其中第 $i$ 行的第 $j$ 个数为 $b_{i−1,j−1}$（$i,j≥1,i+j−2≤m$），保证 $0≤b_{i,j}<p$。\n\n不存在两个正整数，使得他们倒数的和等于 $3/p$。 即不存在正整数 $x,y>0$，使得 $1/x+1/y=3/p$。", "outputFormat": "输出 $n=3^m$ 行，每行一个整数，表示每个人最终的得分。\n\n其中第 $i$ 行表示第 $i$ 个人的得分 $f_{t,i}$。", "hint": "对于所有数据，$0≤m≤12$，$0≤t≤10^9$，$1≤p≤10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[清华集训 2016] 石家庄的工人阶级队伍比较坚强", "background": "B 君和 G 君在过街天桥上。  \n\nB 君：「又到冬天啦，算起来到大学已经三年多了」 \n\nG 君：「是呀」  \n\nB 君：「街上的情侣又多起来了，想想三年之前，我也是这样……」  \n\nG 君：「？？」 \n\nB 君：「……在天桥上看情侣的！」 \n\nG 君：「唔。」  \n\nB 君：「不过这次有你陪我了呢~」  \n\nG 君：「……」  \n\nB 君：「诶诶，我有个问题想问你~」  \n\nG 君：「问吧」  \n\nB 君：「假设 $n=3^m$ 个人一起玩 cei ding ke」  \n\nG 君：「啊咧？cei ding ke 是什么？」  \n\nB 君：「就是石头剪刀布~，我们也叫钉钢锤」 \n\nG 君：「你就问这个？」  \n\nB 君：「你等会，我还没说完呢」", "description": "$n=3^m$ 个人在玩石头剪刀布， 一共有 $t$ 轮游戏，每轮有 $m$ 次石头剪刀布。\n\n在同一轮的 $m$ 次游戏中，每个人的决策必须是提前确定的，也就是说不能采用随机策略，也不能根据前若干局的结果决定下一局的决策； 这样，显然一共有 $n=3^m$ 种决策。\n\n这 $n=3^m$ 个人会采取两两不同的决策。 为了方便表达，对于第 $x$（$0≤x<n$）个人，将 $x$ 转换成三进制得到一个 $m$ 位的数。 其中 $0$ 表示剪刀，$1$ 表示石头，$2$ 表示布。就得到了第 $x$ 个人采取的策略。\n\n由于编号是固定的，因此每个人在不同轮的 $m$ 次游戏中都会采取同一套决策。\n\n第 $x$ 个人在最初时有一个分数 $f_{0,x}$。\n\n在第 $i$ 轮中，他将和另一个人 $y$ 进行 $m$ 次的石头剪刀布的比赛。\n\n我们用 $W(x,y)$ 表示 $x$ 在和 $y$ 的 $m$ 次比赛中赢的次数； 用 $L(x,y)$ 表示 $x$ 在和 $y$ 的 $m$ 次比赛中输的次数。\n\n在第 $i$ 轮结束之后，第 $x$ 个人分数是：\n\n$$f_{i,x}=∑_{0≤y<n}f_{i−1,y}b_{u,v}$$\n\n其中 $u=W(x,y)=L(y,x),v=L(x,y)=W(y,x)$，平局不计入次数；$b_{u,v}$ 则是一个给定的评分数组。\n\n注意即使 $y$ 和 $x$ 一样（自己转移到自己）也会乘上一个系数 $b_{0,0}$（即自己跟自己打全为平局）。\n\n显然随着轮数越来越多，分数也会越来越大， 这个计分系统和我们平时用的计算机一样，也会溢出。 当要储存的分数 $f$ 大于等于 $p$ 的时候，就会变成 $f\\bmod p$。\n\nB 君想知道 $t$ 轮之后所有人的分数，也就是 $f_{t,0},f_{t,1},…,f_{t,n−1}$。\n\nG 君：「诶，我发现这个数 $p$ 有特殊的性质诶！不存在两个正整数，使得他们倒数的和等于 $3/p$！」\n\nB 君：「G 君好棒！不过这个题怎么做呢？」", "inputFormat": "第一行三个整数，表示 $m,t,p$。\n\n第二行有 $n=3^m$ 个整数，表示 $f_{0,0},f_{0,1},…,f_{0,n−1}$。保证 $0≤f_{0,i}<p$。\n\n接下来的部分是一个数组 $b$，第 $1$ 行 $m+1$ 个数，第 $2$ 行 $m$ 个数……第 $m+1$ 行 $1$ 个数。\n\n其中第 $i$ 行的第 $j$ 个数为 $b_{i−1,j−1}$（$i,j≥1,i+j−2≤m$），保证 $0≤b_{i,j}<p$。\n\n不存在两个正整数，使得他们倒数的和等于 $3/p$。 即不存在正整数 $x,y>0$，使得 $1/x+1/y=3/p$。", "outputFormat": "输出 $n=3^m$ 行，每行一个整数，表示每个人最终的得分。\n\n其中第 $i$ 行表示第 $i$ 个人的得分 $f_{t,i}$。", "hint": "对于所有数据，$0≤m≤12$，$0≤t≤10^9$，$1≤p≤10^9$。", "locale": "zh-CN"}}}
{"pid": "P6674", "type": "P", "difficulty": 6, "samples": [["3 5\n1\n2\n2\n1\n1", "6.656854249\n"], ["4 5\n1\n2\n2\n1\n1", "9.0\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "Special Judge", "CCO（加拿大）"], "title": "[CCO 2019] Card Scoring", "background": "", "description": "您下载了一款卡牌游戏。\n\n这款游戏的规则如下：\n1. 共有 $n$ 张牌，每张牌有一个种类，种类共有 $n$ 种，用 $1\\sim n$ 的整数表示，同时还有一个评分参数 $k$。\n2. 您按顺序摸这 $n$ 张牌，每张牌有两种选择，拿走或不要。\n3. 在任何情况下，您都要保证，您的手上的牌里只能有一种种类的牌。\n4. 在摸完牌后，您可以选择结算您的分数。分数的计算方式为：若您有 $x$ 张牌，您会获得 $x^{\\frac{1}{2}k}$ 的分数。结算完分数后，您的手牌将被清空，且您的总分会进行累加。\n\n现在，您决定计算，这款手牌游戏可能取得的总分的最大值是多少。", "inputFormat": "第一行为两个整数 $k,n$。\n\n接下来 $n$ 行，一行一个数，表示牌的种类。", "outputFormat": "仅一行一个实数，表示可能取得的最高分。", "hint": "#### 样例解释\n#### 样例 1 解释\n最优方案为不放弃每一张牌，摸完第一、三、五张牌后计分，分数为：$1^{1.5}+2^{1.5}+2^{1.5}\\approx 6.656854249$。\n#### 样例 2 解释\n最优方案有两种，一种是弃掉种类为 $2$ 的牌，在第五张牌摸完后计分，共得 $3^2=9$ 分。\n\n另一种同样例一，分数为：$1^{2}+2^{2}+2^{2}=9$。\n#### SPJ 计分标准\n设您的答案为 $p$，标准答案为 $q$，若 $\\frac{|p-q|}{q}\\le 10^{-6}$，您可以 AC。\n\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $2\\le k\\le 4$，$1\\le n\\le 10^6$，牌的种类 $\\in \\{1,n\\}$。\n\n| 子任务 | $n\\le $ | $k=$ | 分值 |\n| - | - | - | - |\n| 1 | $20$ | 无特殊限制 | $16$\n| 2 | $300$ | $2$ | $4$\n| 3 | $300$ | 无特殊限制 | $20$\n| 4 | $5\\times 10^3$ | 无特殊限制 | $12$\n| 5 | 无特殊限制 | $4$ | $12$\n| 6 | 无特殊限制 | 无特殊限制 | $36$\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2019](https://cemc.math.uwaterloo.ca/contests/computing/2019/index.html) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2019/stage%202/day2.pdf) T1 Card Scoring。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2019] Card Scoring", "background": "", "description": "您下载了一款卡牌游戏。\n\n这款游戏的规则如下：\n1. 共有 $n$ 张牌，每张牌有一个种类，种类共有 $n$ 种，用 $1\\sim n$ 的整数表示，同时还有一个评分参数 $k$。\n2. 您按顺序摸这 $n$ 张牌，每张牌有两种选择，拿走或不要。\n3. 在任何情况下，您都要保证，您的手上的牌里只能有一种种类的牌。\n4. 在摸完牌后，您可以选择结算您的分数。分数的计算方式为：若您有 $x$ 张牌，您会获得 $x^{\\frac{1}{2}k}$ 的分数。结算完分数后，您的手牌将被清空，且您的总分会进行累加。\n\n现在，您决定计算，这款手牌游戏可能取得的总分的最大值是多少。", "inputFormat": "第一行为两个整数 $k,n$。\n\n接下来 $n$ 行，一行一个数，表示牌的种类。", "outputFormat": "仅一行一个实数，表示可能取得的最高分。", "hint": "#### 样例解释\n#### 样例 1 解释\n最优方案为不放弃每一张牌，摸完第一、三、五张牌后计分，分数为：$1^{1.5}+2^{1.5}+2^{1.5}\\approx 6.656854249$。\n#### 样例 2 解释\n最优方案有两种，一种是弃掉种类为 $2$ 的牌，在第五张牌摸完后计分，共得 $3^2=9$ 分。\n\n另一种同样例一，分数为：$1^{2}+2^{2}+2^{2}=9$。\n#### SPJ 计分标准\n设您的答案为 $p$，标准答案为 $q$，若 $\\frac{|p-q|}{q}\\le 10^{-6}$，您可以 AC。\n\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $2\\le k\\le 4$，$1\\le n\\le 10^6$，牌的种类 $\\in \\{1,n\\}$。\n\n| 子任务 | $n\\le $ | $k=$ | 分值 |\n| - | - | - | - |\n| 1 | $20$ | 无特殊限制 | $16$\n| 2 | $300$ | $2$ | $4$\n| 3 | $300$ | 无特殊限制 | $20$\n| 4 | $5\\times 10^3$ | 无特殊限制 | $12$\n| 5 | 无特殊限制 | $4$ | $12$\n| 6 | 无特殊限制 | 无特殊限制 | $36$\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2019](https://cemc.math.uwaterloo.ca/contests/computing/2019/index.html) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2019/stage%202/day2.pdf) T1 Card Scoring。", "locale": "zh-CN"}}}
{"pid": "P6675", "type": "P", "difficulty": 2, "samples": [["2 1\nNijeZivotJedanACM -\nZivotJESTJedanACM -\nNijeZivotJedanACM -\n", "1"], ["3 2\nStoJeZivot ?1/04:00:00 +1/02:04:06\nJeLiZivotJedanACM ?1/04:59:59 -\nNijeZivotJedanACM ?1/04:42:43 -\nNijeZivotJedanACM +1/04:42:43 -\n", "2"], ["7 4\nNisamSadaNistaDonio +1/03:59:59 +3/03:42:02 +2/00:14:59 ?1/04:56:12\nJeLiMojKockaSeUmio ?4/04:00:00 -3 +1/00:10:01 +9/03:04:42\nOstaviDobroJe ?4/04:59:59 -1 +2/00:24:15 +8/03:24:45\nDobroJeOstavi +1/01:42:53 - ?9/04:58:23 ?1/04:34:43\nNijeZivotJedanACM ?2/04:50:05 ?4/04:32:12 +2/01:32:45 ?1/04:59:59\nKoSeToSeta ?1/04:23:32 - +9/01:00:00 -9\nSipSipSipSipSipSip - - - ?9/04:00:00\nNijeZivotJedanACM -2 +4/04:32:12 +2/01:32:45 +1/04:59:59\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000]}, "tags": ["模拟", "贪心", "2019", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #2] ACM", "background": null, "description": "一场有着悠久历史的比赛马上开始了，它是由 ACM 组织的。确切地说，有 $n$ 个团队将角逐头名，其中包括克罗地亚黄金三人组：Paula、Marin 和 Josip。竞赛采用标准形式，通过团队成员之间的协作，共同编写代码并提交。\n\n比赛由 $m$ 个不同的题目组成，各小组按已解决的题目数排序（不递增）。\n\n具有相同数量已解决任务的团队按所谓的罚时排序（不递减）。某个团队的罚时是他们在每一个正确解决的任务上获得的罚时的总和。正确解决的任务的罚时等于团队解决该任务所花费的时间（从比赛开始）增加。\n\n每个提交但未通过的代码将给提交该代码的团队增加 $20$ 分钟罚时。任何团队都不会为他们已经解决的问题提交代码，并且每个团队的每一个问题的最大提交次数为 $9$。如果一些团队有相同数量的问题解决和相同的罚时，他们将按字典序在排行榜中排列。\n\n比赛持续 $5$ 个小时。在前 $4$ 个小时内，所有团队都可以获得排名，并包含有关每个团队的每个题目状态的信息（提交的次数、是否已解决以及何时解决）。在这 $4$ 个小时里，队伍的排名将在每一次提交后自动更新。不过，在最后 $1$ 小时内，排行榜被冻结，即评测新提交的代码后，参赛队伍的排名不会更新。在这段时间里，每个团队都知道自己提交的代码的评测结果，但不知道其他团队提交的代码的评测结果。他们只知道其他团队提交了哪些任务、提交了多少次以及每个任务的最后一次提交时间。\n\n比赛结束了，排行榜很快就会解冻。我们的英雄，NijeZivotJedanACM 需要你的帮助。他们想知道在排行榜上最差的排名是什么，在排行榜解冻后他们最终可能会排在什么位置。请你帮助他们！", "inputFormat": "输入数据共 $n + 2$ 行。\n\n第一行两个整数 $n$ 和 $m$，表示参赛队伍的个数和题目的个数。\n\n接下来 $n$ 行，每行的输入格式如下：\n1. 首先输入队伍名称；\n2. 接下来 $m$ 个字符串，格式均为 `SX/V`，说明如下：\n- `S` 表示题目状态，共有三种字符：`-`、`+`、`?`。`-` 表示该题目该团队未通过，`+` 表示该题目该团队已通过，`?` 表示该题目最后一次提交时排行榜已冻结。\n- `X` 表示该题目该团队的提交次数。特别地，如果该题目该团队未提交，则 `X` 省略。\n- `V` 表示该题目该团队最后一次提交时比赛已经开始的时间，用 `HH:MM:SS` 表示，可能有前导零来补足。特别地，如该题目未通过，则整个 `/V` 部分省略。\n\n最后一行按照前面的格式，输入 NijeZivotJedanACM 的最终成绩（即排行榜解冻后的成绩）。", "outputFormat": "输入数据共一行。\n\n第一行，输出 NijeZivotJedanACM 可能会处在的最差排名。", "hint": "#### 数据规模及约定\n- 对于 $40\\%$ 的数据，保证所有输入的 `S` 状态均不为 `?`。\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le m \\le 15$，保证所有测试数据中，任意两个小组的名字均不同。\n\n#### 说明\n\n**本题满分 $50$ 分。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T1 ACM*。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #2] ACM", "background": null, "description": "一场有着悠久历史的比赛马上开始了，它是由 ACM 组织的。确切地说，有 $n$ 个团队将角逐头名，其中包括克罗地亚黄金三人组：Paula、Marin 和 Josip。竞赛采用标准形式，通过团队成员之间的协作，共同编写代码并提交。\n\n比赛由 $m$ 个不同的题目组成，各小组按已解决的题目数排序（不递增）。\n\n具有相同数量已解决任务的团队按所谓的罚时排序（不递减）。某个团队的罚时是他们在每一个正确解决的任务上获得的罚时的总和。正确解决的任务的罚时等于团队解决该任务所花费的时间（从比赛开始）增加。\n\n每个提交但未通过的代码将给提交该代码的团队增加 $20$ 分钟罚时。任何团队都不会为他们已经解决的问题提交代码，并且每个团队的每一个问题的最大提交次数为 $9$。如果一些团队有相同数量的问题解决和相同的罚时，他们将按字典序在排行榜中排列。\n\n比赛持续 $5$ 个小时。在前 $4$ 个小时内，所有团队都可以获得排名，并包含有关每个团队的每个题目状态的信息（提交的次数、是否已解决以及何时解决）。在这 $4$ 个小时里，队伍的排名将在每一次提交后自动更新。不过，在最后 $1$ 小时内，排行榜被冻结，即评测新提交的代码后，参赛队伍的排名不会更新。在这段时间里，每个团队都知道自己提交的代码的评测结果，但不知道其他团队提交的代码的评测结果。他们只知道其他团队提交了哪些任务、提交了多少次以及每个任务的最后一次提交时间。\n\n比赛结束了，排行榜很快就会解冻。我们的英雄，NijeZivotJedanACM 需要你的帮助。他们想知道在排行榜上最差的排名是什么，在排行榜解冻后他们最终可能会排在什么位置。请你帮助他们！", "inputFormat": "输入数据共 $n + 2$ 行。\n\n第一行两个整数 $n$ 和 $m$，表示参赛队伍的个数和题目的个数。\n\n接下来 $n$ 行，每行的输入格式如下：\n1. 首先输入队伍名称；\n2. 接下来 $m$ 个字符串，格式均为 `SX/V`，说明如下：\n- `S` 表示题目状态，共有三种字符：`-`、`+`、`?`。`-` 表示该题目该团队未通过，`+` 表示该题目该团队已通过，`?` 表示该题目最后一次提交时排行榜已冻结。\n- `X` 表示该题目该团队的提交次数。特别地，如果该题目该团队未提交，则 `X` 省略。\n- `V` 表示该题目该团队最后一次提交时比赛已经开始的时间，用 `HH:MM:SS` 表示，可能有前导零来补足。特别地，如该题目未通过，则整个 `/V` 部分省略。\n\n最后一行按照前面的格式，输入 NijeZivotJedanACM 的最终成绩（即排行榜解冻后的成绩）。", "outputFormat": "输入数据共一行。\n\n第一行，输出 NijeZivotJedanACM 可能会处在的最差排名。", "hint": "#### 数据规模及约定\n- 对于 $40\\%$ 的数据，保证所有输入的 `S` 状态均不为 `?`。\n- 对于 $100\\%$ 的数据，$1 \\le n \\le 1000$，$1 \\le m \\le 15$，保证所有测试数据中，任意两个小组的名字均不同。\n\n#### 说明\n\n**本题满分 $50$ 分。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T1 ACM*。**", "locale": "zh-CN"}}}
{"pid": "P6676", "type": "P", "difficulty": 3, "samples": [["5\n1 5\n2 7\n2 3\n8 4\n6 1\n", "1 3 7 5 4"], ["3\n5 1\n7 2\n4 3\n", "1 3 2"], ["5\n2 5\n2 7\n2 3\n8 4\n6 1\n", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "COCI（克罗地亚）", "分类讨论"], "title": "[COCI 2019/2020 #2] Slagalica", "background": "## 本题征集 SPJ。但若您写的是正解，即，输出了字典序最小解，仍可获得 AC 的评测结果。\n\n\n小斌喜欢玩拼图。", "description": "小斌得到了一个由 $n$ 个部分组成的一维拼图游戏。他很快意识到每块拼图都属于以下类型之一：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vkiyrjd5.png)\n\n另外，已知在这 $n$ 片拼图中，恰好有一个 $5$ 号拼图或 $6$ 号拼图（左边框）和一个 $7$ 号拼图或 $8$ 号拼图（右边框）。\n\n小斌希望将所有块排列成一行，以使第一个（最左边的）拼图类型为 $5$ 号拼图或 $6$ 号拼图，而最后一个（最右边的）拼图类型为 $7$ 号拼图或 $8$ 号拼图。如果有两块拼图，则可以彼此相邻放置，并且仅当它们的相邻边框的形状不同时，即一个边框具有凹凸，而另一个边框具有一个凸出才可以相邻放置。\n\n对于小斌来说，这个问题太简单了，因此他决定在每个部分上写一个唯一的正整数。现在，他想要寻找出字典序最小的方案。\n\n注意：拼图不能旋转！\n", "inputFormat": "输入数据共 $n + 1$ 行。\n\n第一行，一个正整数 $n$。\n\n接下来，$n$ 行，包含两个整数 $x_i$ 和 $a_i$，它们表示 $i$ 的类型，$x_i$ 拼图编号，$a_i$ 表示 Fabian 在上面写的数字。数据保证所有 $a_i$ 不重复。", "outputFormat": "输出数据共一行。\n\n第一行，如果小斌无法解决拼图游戏，输出 `-1`。 否则，您应该输出拼图上数字按字典序排列最小的方案。", "hint": "#### 样例 #1 解释\n只有 $2$ 种解法，如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lnprd06v.png)\n\n可以看出，第二种解法的字典序较小，所以输出 `1 3 7 5 4`。\n\n\n\n#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5, 1 \\le x_i \\le 8, 1 \\le a_i \\le 10^9$。\n\n没有给出字典序最小解而只构造一组解可以得到 $40\\%$ 的分数。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T2 Slagalica*。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #2] Slagalica", "background": "## 本题征集 SPJ。但若您写的是正解，即，输出了字典序最小解，仍可获得 AC 的评测结果。\n\n\n小斌喜欢玩拼图。", "description": "小斌得到了一个由 $n$ 个部分组成的一维拼图游戏。他很快意识到每块拼图都属于以下类型之一：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vkiyrjd5.png)\n\n另外，已知在这 $n$ 片拼图中，恰好有一个 $5$ 号拼图或 $6$ 号拼图（左边框）和一个 $7$ 号拼图或 $8$ 号拼图（右边框）。\n\n小斌希望将所有块排列成一行，以使第一个（最左边的）拼图类型为 $5$ 号拼图或 $6$ 号拼图，而最后一个（最右边的）拼图类型为 $7$ 号拼图或 $8$ 号拼图。如果有两块拼图，则可以彼此相邻放置，并且仅当它们的相邻边框的形状不同时，即一个边框具有凹凸，而另一个边框具有一个凸出才可以相邻放置。\n\n对于小斌来说，这个问题太简单了，因此他决定在每个部分上写一个唯一的正整数。现在，他想要寻找出字典序最小的方案。\n\n注意：拼图不能旋转！\n", "inputFormat": "输入数据共 $n + 1$ 行。\n\n第一行，一个正整数 $n$。\n\n接下来，$n$ 行，包含两个整数 $x_i$ 和 $a_i$，它们表示 $i$ 的类型，$x_i$ 拼图编号，$a_i$ 表示 Fabian 在上面写的数字。数据保证所有 $a_i$ 不重复。", "outputFormat": "输出数据共一行。\n\n第一行，如果小斌无法解决拼图游戏，输出 `-1`。 否则，您应该输出拼图上数字按字典序排列最小的方案。", "hint": "#### 样例 #1 解释\n只有 $2$ 种解法，如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lnprd06v.png)\n\n可以看出，第二种解法的字典序较小，所以输出 `1 3 7 5 4`。\n\n\n\n#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5, 1 \\le x_i \\le 8, 1 \\le a_i \\le 10^9$。\n\n没有给出字典序最小解而只构造一组解可以得到 $40\\%$ 的分数。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $70$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T2 Slagalica*。**", "locale": "zh-CN"}}}
{"pid": "P6677", "type": "P", "difficulty": 5, "samples": [["1\n5\n12113\n1 3 3\n2 5 2\n", "neispravna triangulacija"], ["1\n4\n1212\n1 3 2\n", "neispravno bojenje\n"], ["1\n7\n1223121\n1 3 3\n3 5 1\n5 7 3\n7 3 2\n", "tocno"]], "limits": {"time": [2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790, 2790], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2019", "二分", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #2] Checker", "background": "\n> \"...fool me once, shame on — shame on you. Fool me — you can't get fooled again.\" — W", "description": "有一种规则多边形 ，它们的 $n$ 边分别用某三种颜色之一着色，并且其顶点按顺时针顺序从 $1$ 到 $n$ 表示。\n\n多边形的三角剖分是指将其面积分解为一组不重叠的三角形的操作，这些三角形的边可能是多边形的边或其内对角线上。当然，在此任务中，用于多边形三角剖分的每条对角线也用三种颜色之一着色。\n\n如果每个三角形的 $n\\space−\\space2$ 个三角形的所有三个面都具有不同的颜色，则称这样的三角剖分是“非常好”的。\n\n您的任务是确定给定的对角线多边形是否被三角剖分以及该三角剖分是否非常好。", "inputFormat": "输入数据共 $n$ 行。\n\n第一行，一个正整数 $T$，表示这个数据对应的 Subtask 编号。\n\n第二行，一个正整数 $n$，含义见 **题目描述** 部分。\n\n第三行，一个 $n$ 位数正整数，这些数字代表多边形边的颜色。更准确地说，第一个数字代表边 $(1, 2)$ 的颜色，第二个数字代表边 $(2, 3)$ 的颜色，第 $i$ 个数字表示边 $(i, i+1)$ 的颜色，**特别的**，第 $n$ 个数字表示边 $(n, 1)$ 的颜色。颜色用数字 $1, 2, 3$ 表示。\n\n接下来的 $n-3$ 行，每一行都包含对一个对角线的描述，格式为 `x y c`，其中 $x$ 和 $y$ 是多边形顶点，$c$ 是对角线的颜色。数据保证顶点 $x$ 和 $y$ 既不相等也不相邻。\n", "outputFormat": "输出数据共一行。\n\n- 如果输入多边形没有正确三角剖分，则应输出 $\\mathtt{neispravna \\space triangulacija}$。\n- 如果输入多边形有正确三角剖分，但三角剖分不是好的，则应输出 $\\mathtt{neispravno \\space bojenje}$。\n- 否则，输出 $\\mathtt{tocno}$。", "hint": "#### 数据规模及约定\n\n本题采用 **捆绑测试**。\n\n| Subtask 编号 | Subtask 分数 | Subtask 数据规模及约定 |\n| :----------- | :----------- | :----------- |\n| $1$ | $12$ | $4 \\le n \\le 300$ |\n| $2$ | $17$ | $4 \\le n \\le 2000$ |\n| $3$ | $23$ | $4 \\le n \\le 2 \\times 10^5$，数据保证输出为 $\\mathtt{neispravna \\space triangulacija}$ 或 $\\mathtt{tocno}$ |\n| $4$ | $23$ | $4 \\le n \\le 2 \\times 10^5$，数据保证输出为 $\\mathtt{neispravno \\space bojenje}$ 或 $\\mathtt{tocno}$ |\n| $5$ | $35$ | $4 \\le n \\le 2 \\times 10^5$ |\n\n**特别的**，对于 $100\\%$ 的数据，$1\\le T\\le 5$。\n \n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T3 Checker*。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #2] Checker", "background": "\n> \"...fool me once, shame on — shame on you. Fool me — you can't get fooled again.\" — W", "description": "有一种规则多边形 ，它们的 $n$ 边分别用某三种颜色之一着色，并且其顶点按顺时针顺序从 $1$ 到 $n$ 表示。\n\n多边形的三角剖分是指将其面积分解为一组不重叠的三角形的操作，这些三角形的边可能是多边形的边或其内对角线上。当然，在此任务中，用于多边形三角剖分的每条对角线也用三种颜色之一着色。\n\n如果每个三角形的 $n\\space−\\space2$ 个三角形的所有三个面都具有不同的颜色，则称这样的三角剖分是“非常好”的。\n\n您的任务是确定给定的对角线多边形是否被三角剖分以及该三角剖分是否非常好。", "inputFormat": "输入数据共 $n$ 行。\n\n第一行，一个正整数 $T$，表示这个数据对应的 Subtask 编号。\n\n第二行，一个正整数 $n$，含义见 **题目描述** 部分。\n\n第三行，一个 $n$ 位数正整数，这些数字代表多边形边的颜色。更准确地说，第一个数字代表边 $(1, 2)$ 的颜色，第二个数字代表边 $(2, 3)$ 的颜色，第 $i$ 个数字表示边 $(i, i+1)$ 的颜色，**特别的**，第 $n$ 个数字表示边 $(n, 1)$ 的颜色。颜色用数字 $1, 2, 3$ 表示。\n\n接下来的 $n-3$ 行，每一行都包含对一个对角线的描述，格式为 `x y c`，其中 $x$ 和 $y$ 是多边形顶点，$c$ 是对角线的颜色。数据保证顶点 $x$ 和 $y$ 既不相等也不相邻。\n", "outputFormat": "输出数据共一行。\n\n- 如果输入多边形没有正确三角剖分，则应输出 $\\mathtt{neispravna \\space triangulacija}$。\n- 如果输入多边形有正确三角剖分，但三角剖分不是好的，则应输出 $\\mathtt{neispravno \\space bojenje}$。\n- 否则，输出 $\\mathtt{tocno}$。", "hint": "#### 数据规模及约定\n\n本题采用 **捆绑测试**。\n\n| Subtask 编号 | Subtask 分数 | Subtask 数据规模及约定 |\n| :----------- | :----------- | :----------- |\n| $1$ | $12$ | $4 \\le n \\le 300$ |\n| $2$ | $17$ | $4 \\le n \\le 2000$ |\n| $3$ | $23$ | $4 \\le n \\le 2 \\times 10^5$，数据保证输出为 $\\mathtt{neispravna \\space triangulacija}$ 或 $\\mathtt{tocno}$ |\n| $4$ | $23$ | $4 \\le n \\le 2 \\times 10^5$，数据保证输出为 $\\mathtt{neispravno \\space bojenje}$ 或 $\\mathtt{tocno}$ |\n| $5$ | $35$ | $4 \\le n \\le 2 \\times 10^5$ |\n\n**特别的**，对于 $100\\%$ 的数据，$1\\le T\\le 5$。\n \n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T3 Checker*。**", "locale": "zh-CN"}}}
{"pid": "P6678", "type": "P", "difficulty": 5, "samples": [["2 2\n", "1\nA=(A-((A&2)>>1))\n"], ["3 5\n", "2\nA=((A&4)|((A&3)-((A&2)>>1)))\nA=((A&3)+((A&4)>>2))\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 3000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2019", "Special Judge", "构造", "COCI（克罗地亚）"], "title": "[COCI 2019/2020 #2] Popcount", "background": "Miniature Algebraic Natural Relay 是小型可编程设备的最新技术进步。 您可以使用 MalnarScript 为此设备编写自己的程序。\n\n", "description": "程序要求如下：\n\n- 程序的输入是一个严格小于 $2^n$ 的单个非负整数。\n- 程序的输出是一个严格小于 $2^n$ 的单个非负整数。\n- 使用 MalnarScript 进行编程时，您只能使用一个 $n$ 位无符号整数变量 $a$。在程序的开头，此变量保存输入，并且其在程序末尾的值被视为程序的输出。\n- MalnarScript 的源代码最多必须包含 $k$ 个格式为 $\\texttt{a = <expr>}$ 的命令，这些命令按顺序执行，并且每个命令最多包含 $10^3$ 个字符。 \n\n符号 $\\texttt{<expr>}$ 的递归定义如下：\n\n$$\\texttt{<expr> = A | <num> | (<expr><operator><expr>)}$$\n\n换句话说，符号 $\\texttt{<expr>}$ 可以是变量 $a$ ，也可以符合符号 $\\texttt{<num>}$ 的定义，或者在括号内表示二元表达式，其中每个操作数均符合相同的 $\\texttt{<expr>}$ 定义。\n\n上面定义中的符号 $\\texttt{<num>}$ 表示严格小于 $2^n$ 的非负十进制整数。而符号 $\\texttt{<operator>}$ 可以是 $\\texttt{+}$，$\\texttt{-}$，$\\texttt{|}$，$\\texttt{\\&}$，$\\texttt{<<}$ 或 $\\texttt{>>}$，分别表示：加，减，按位或，按位与，左移和右移的运算。\n\n此外，字符 $a$ 在 $\\texttt{<expr>}$ 符号中最多出现 $5$ 次。\n\n在执行加减运算时出现溢出或下溢时，MalnarScript 将以 $2^n$ 为模执行这些运算。例如，当 $n = 3$ 时，在 MalnarScript 中，$7 + 3 = 2$，$2 - 5 = 5$。\n\n每个命令中方程式的右侧求和为一个数字，然后将其存储到 $a$ 中。为了计算右侧表达式，MalnarScript 首先将每次出现的 $a$ 替换为其当前值。 然后，像在任何数学表达式中一样进行表达式的计算，即，括号优先。请注意，运算符的优先级（按照运算顺序）是不相关的，因为最终结果完全由括号的位置定义。\n\n您的任务是编写一个程序，该程序在 MalnarScript 中输出程序，该程序以输入值的二进制表示形式计算一个数。\n", "inputFormat": "第一行，两个正整数 $n, k$，含义见 **题目描述**。", "outputFormat": "第一行中，您应该输出产生的 MalnarScript 程序的命令数。\n\n在其余各行中，您应该输出所需程序的命令。每个命令必须在单独的行中输出，并且必须满足任务描述中所述的 MalnarScript 语法。\n\n重要的是，输出中不要有不必要的空行或多余的空格字符。\n每行（包括最后一行）必须以换行（`\\n`）结尾。", "hint": "#### 数据范围及约定\n\n| Subtask | 分数 | 数据范围及约定 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $15$ | $2 \\le n \\le 100$，$k = n \\ − \\ 1$ |\n| $2$ | $15$ | $n = 500$，$k = 128$ |\n| $3$ | $35$ | $1 \\le n \\le 40$，$k = 7$ |\n| $4$ | $45$ | $100 \\le n \\le 500$，$k = 10$ |\n\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T4 Popcount*。**\n\n感谢 @[Sprague_Garundy](https://www.luogu.com.cn/user/764746) 提供的 SPJ，SPJ 可以在题目附件处下载。\n\n另外，由于 `testlib` 库在洛谷环境下生成随机数在 $N=31$ 时有问题，采用固定已生成随机数。部分测试点 $N$ 较大，Special Judge 程序运行较久，如下。\n\n| 特殊测试点编号 | 时限 |\n|:-:|:-:|\n| 15 | 3s |\n| 39 | 2s |\n| 40 | 3s |\n| 48 | 3s |\n\n上述测试点时限仅用于 Special Judge 程序使用。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2019/2020 #2] Popcount", "background": "Miniature Algebraic Natural Relay 是小型可编程设备的最新技术进步。 您可以使用 MalnarScript 为此设备编写自己的程序。\n\n", "description": "程序要求如下：\n\n- 程序的输入是一个严格小于 $2^n$ 的单个非负整数。\n- 程序的输出是一个严格小于 $2^n$ 的单个非负整数。\n- 使用 MalnarScript 进行编程时，您只能使用一个 $n$ 位无符号整数变量 $a$。在程序的开头，此变量保存输入，并且其在程序末尾的值被视为程序的输出。\n- MalnarScript 的源代码最多必须包含 $k$ 个格式为 $\\texttt{a = <expr>}$ 的命令，这些命令按顺序执行，并且每个命令最多包含 $10^3$ 个字符。 \n\n符号 $\\texttt{<expr>}$ 的递归定义如下：\n\n$$\\texttt{<expr> = A | <num> | (<expr><operator><expr>)}$$\n\n换句话说，符号 $\\texttt{<expr>}$ 可以是变量 $a$ ，也可以符合符号 $\\texttt{<num>}$ 的定义，或者在括号内表示二元表达式，其中每个操作数均符合相同的 $\\texttt{<expr>}$ 定义。\n\n上面定义中的符号 $\\texttt{<num>}$ 表示严格小于 $2^n$ 的非负十进制整数。而符号 $\\texttt{<operator>}$ 可以是 $\\texttt{+}$，$\\texttt{-}$，$\\texttt{|}$，$\\texttt{\\&}$，$\\texttt{<<}$ 或 $\\texttt{>>}$，分别表示：加，减，按位或，按位与，左移和右移的运算。\n\n此外，字符 $a$ 在 $\\texttt{<expr>}$ 符号中最多出现 $5$ 次。\n\n在执行加减运算时出现溢出或下溢时，MalnarScript 将以 $2^n$ 为模执行这些运算。例如，当 $n = 3$ 时，在 MalnarScript 中，$7 + 3 = 2$，$2 - 5 = 5$。\n\n每个命令中方程式的右侧求和为一个数字，然后将其存储到 $a$ 中。为了计算右侧表达式，MalnarScript 首先将每次出现的 $a$ 替换为其当前值。 然后，像在任何数学表达式中一样进行表达式的计算，即，括号优先。请注意，运算符的优先级（按照运算顺序）是不相关的，因为最终结果完全由括号的位置定义。\n\n您的任务是编写一个程序，该程序在 MalnarScript 中输出程序，该程序以输入值的二进制表示形式计算一个数。\n", "inputFormat": "第一行，两个正整数 $n, k$，含义见 **题目描述**。", "outputFormat": "第一行中，您应该输出产生的 MalnarScript 程序的命令数。\n\n在其余各行中，您应该输出所需程序的命令。每个命令必须在单独的行中输出，并且必须满足任务描述中所述的 MalnarScript 语法。\n\n重要的是，输出中不要有不必要的空行或多余的空格字符。\n每行（包括最后一行）必须以换行（`\\n`）结尾。", "hint": "#### 数据范围及约定\n\n| Subtask | 分数 | 数据范围及约定 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $15$ | $2 \\le n \\le 100$，$k = n \\ − \\ 1$ |\n| $2$ | $15$ | $n = 500$，$k = 128$ |\n| $3$ | $35$ | $1 \\le n \\le 40$，$k = 7$ |\n| $4$ | $45$ | $100 \\le n \\le 500$，$k = 10$ |\n\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T4 Popcount*。**\n\n感谢 @[Sprague_Garundy](https://www.luogu.com.cn/user/764746) 提供的 SPJ，SPJ 可以在题目附件处下载。\n\n另外，由于 `testlib` 库在洛谷环境下生成随机数在 $N=31$ 时有问题，采用固定已生成随机数。部分测试点 $N$ 较大，Special Judge 程序运行较久，如下。\n\n| 特殊测试点编号 | 时限 |\n|:-:|:-:|\n| 15 | 3s |\n| 39 | 2s |\n| 40 | 3s |\n| 48 | 3s |\n\n上述测试点时限仅用于 Special Judge 程序使用。", "locale": "zh-CN"}}}
{"pid": "P6679", "type": "P", "difficulty": 5, "samples": [["0\n4\n1 1\n5 1\n4 3\n2 2\n4\n3 2\n2 4\n6 2\n4 5\n", "DA\nNE\nDA\nNE"], ["0\n6\n-1 -1\n2 -1\n3 3\n2 4\n1 4\n-2 1\n6\n2 2\n3 0\n1 -6\n2 6\n-5 5\n5 10\n", "DA\nDA\nNE\nNE\nNE\nNE"], ["1\n6\n-1 -1\n2 -1\n3 3\n2 4\n1 4\n-2 1\n6\n2 2\n3 0\n1 -6\n2 6\n-5 5\n5 10\n", "DA\nDA\nDA\nNE\nNE\nNE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["计算几何", "2019", "COCI（克罗地亚）", "平面几何"], "title": "[COCI 2019/2020 #2] Zvijezda", "background": null, "description": "Mirko and Slavko are spending their free time playing with polygons and watching a new season of *The Biggest Loser*. Mirko recently drew a convex polygon with an even number of vertices $N$. Slavko then considered each pair of oposite sides (two sides are opposite if there are $\\dfrac N2 - 1$ sides between them), drew straight lines that lie on those sides and colored them along with the part of the plane that lies between them and contains the polygon. Finally, Mirko found a set of $Q $ points and decided to challenge Slavko to answer for each point whether it lies in the colored or uncolored part of the plane. The new episode of *The Biggest Loser* is about to start and Slavko doesn’t have the time to answer Mirko’s queries. Can you help him?", "inputFormat": "The first line contains an integer $T$ which is used as a parameter for generating Mirko's queries. This number can be either $0$ or $1$.\n\nThe second line contains an even integer $N$ from the task description.\n\nEach of the next $N$ lines contains two integers $X_i, Y_i$ ($0\\leq|X_i|,|Y_i|\\leq10^9$) which represent one of the polygon's vertices. You can assume that the vertices are given in the counter - clockwise order and that no three successive vertices are collinear.\n\nThe next line contains an integer $Q$ from the task description.\n\nEach of the next $Q$ lines contains two integers $A_i, B_i$ ($0\\leq|A_i|,|B_i|\\leq2\\cdot10^{18}$) which are used as parameters for generating the point in the $i$ - th of Mirko's queries.\n\nLet $X_i$ be equal to the number of points in the first $i$ (inclusive) of Mirko's queries that lie in the colored part of the plane. Naturally, $X_0 = 0$. The point of Mirko's $i$ - th query should then be generated as:\n\n$$\nP_i=(A_i\\oplus(T\\cdot X_{i - 1}^3),B_i\\oplus(T\\cdot X_{i - 1}^3))\n$$\n\nwhere $\\oplus$ represents the bitwise xor operation.", "outputFormat": "The $i$ - th line of output should contain the word `DA` (YES in Croatian) if the point from $i$ - th of Mirko's queries lies in the colored part of the plane. Otherwise, the $i$ - th line should contain the word `NE` (NO in Croatian).", "hint": "#### 数据规模及约定\n\n本题采用捆绑测试。\n\n| Subtask | Scores | Constraints |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $20$ | $1 \\le n, q \\le 2000$，$T = 0$|\n| $2$ | $30$ | $1 \\le n, q \\le 10^5$，$T = 0$|\n| $3$ | $60$ | $1 \\le n, q \\le 10^5$，$T = 1$|。\n\n此外，对于 $100\\%$ 的数据，$0 \\le |x_i|, |y_i| \\le 10^9, 0 \\le |a_i|, |b_i| \\le 2 \\times 10^{18}$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T5 Zvijezda*。**", "locale": "en", "translations": {"en": {"title": "[COCI 2019/2020 #2] Zvijezda", "background": null, "description": "Mirko and Slavko are spending their free time playing with polygons and watching a new season of *The Biggest Loser*. Mirko recently drew a convex polygon with an even number of vertices $N$. Slavko then considered each pair of oposite sides (two sides are opposite if there are $\\dfrac N2 - 1$ sides between them), drew straight lines that lie on those sides and colored them along with the part of the plane that lies between them and contains the polygon. Finally, Mirko found a set of $Q $ points and decided to challenge Slavko to answer for each point whether it lies in the colored or uncolored part of the plane. The new episode of *The Biggest Loser* is about to start and Slavko doesn’t have the time to answer Mirko’s queries. Can you help him?", "inputFormat": "The first line contains an integer $T$ which is used as a parameter for generating Mirko's queries. This number can be either $0$ or $1$.\n\nThe second line contains an even integer $N$ from the task description.\n\nEach of the next $N$ lines contains two integers $X_i, Y_i$ ($0\\leq|X_i|,|Y_i|\\leq10^9$) which represent one of the polygon's vertices. You can assume that the vertices are given in the counter - clockwise order and that no three successive vertices are collinear.\n\nThe next line contains an integer $Q$ from the task description.\n\nEach of the next $Q$ lines contains two integers $A_i, B_i$ ($0\\leq|A_i|,|B_i|\\leq2\\cdot10^{18}$) which are used as parameters for generating the point in the $i$ - th of Mirko's queries.\n\nLet $X_i$ be equal to the number of points in the first $i$ (inclusive) of Mirko's queries that lie in the colored part of the plane. Naturally, $X_0 = 0$. The point of Mirko's $i$ - th query should then be generated as:\n\n$$\nP_i=(A_i\\oplus(T\\cdot X_{i - 1}^3),B_i\\oplus(T\\cdot X_{i - 1}^3))\n$$\n\nwhere $\\oplus$ represents the bitwise xor operation.", "outputFormat": "The $i$ - th line of output should contain the word `DA` (YES in Croatian) if the point from $i$ - th of Mirko's queries lies in the colored part of the plane. Otherwise, the $i$ - th line should contain the word `NE` (NO in Croatian).", "hint": "#### 数据规模及约定\n\n本题采用捆绑测试。\n\n| Subtask | Scores | Constraints |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $20$ | $1 \\le n, q \\le 2000$，$T = 0$|\n| $2$ | $30$ | $1 \\le n, q \\le 10^5$，$T = 0$|\n| $3$ | $60$ | $1 \\le n, q \\le 10^5$，$T = 1$|。\n\n此外，对于 $100\\%$ 的数据，$0 \\le |x_i|, |y_i| \\le 10^9, 0 \\le |a_i|, |b_i| \\le 2 \\times 10^{18}$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T5 Zvijezda*。**", "locale": "en"}, "zh-CN": {"title": "[COCI 2019/2020 #2] Zvijezda", "background": null, "description": "Mirko 和 Slavko 正在通过玩多边形和观看新一季的《The Biggest Loser》来打发空闲时间。Mirko 最近画了一个有偶数个顶点 $N$ 的凸多边形。然后 Slavko 考虑每对相对的边（如果两边之间有 $\\frac N2 - 1$ 条边，则它们是相对的），画出位于这些边上的直线，并将它们与包含多边形的平面部分一起着色。最后，Mirko 找到了一组 $Q$ 个点，并决定挑战 Slavko，要求他回答每个点是位于着色部分还是未着色部分。新的《The Biggest Loser》剧集即将开始，Slavko 没有时间回答 Mirko 的查询。你能帮助他吗？", "inputFormat": "第一行，一个整数 $T$，它用于生成 Mirko 查询的参数。该数字只能是 $0$ 或 $1$。\n\n第二行，一个正整数 $n$。\n\n第 $3 \\sim n + 2$ 行，每行 $2$ 个正整数 $x_i, y_i$。表示多边形的一个顶点。顶点是按逆时针顺序给出的，没有三个连续的顶点是共线的。\n\n第 $n + 3$ 行，一个正整数 $q$。\n\n接下来 $q$ 行，每行都有两个整数 $a_i, b_i$，它们用作在第 $i$ 个 Mirko 查询中生成点的参数。$x_i$ 等于 Mirko 查询的第 $i$ 个（含 $i$ 点）在平面彩色部分上的点数。当然，$x_0 = 0$。然后，应将 Mirko 第 $i$ 个查询的点生成为：\n\n$$p_i = (a_i \\oplus (T \\times x^{3}_{i-1}), b_i \\oplus(T \\times x^{3}_{i-1}))$$\n\n其中 $\\oplus$ 代表按位异或运算。", "outputFormat": "如果 Mirko 查询的第 $i$ 个点位于平面的有色部分，则输出的第 $i$ 行为 $\\tt DA$。否则，第 $i$ 行为 $\\tt NE$。", "hint": "#### 数据规模及约定\n\n本题采用捆绑测试。\n\n| Subtask 编号 | 分值 | 数据范围 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $20$ | $1 \\le n, q \\le 2000$，$T = 0$|\n| $2$ | $30$ | $1 \\le n, q \\le 10^5$，$T = 0$|\n| $3$ | $60$ | $1 \\le n, q \\le 10^5$，$T = 1$|。\n\n此外，对于 $100\\%$ 的数据，$0 \\le |x_i|, |y_i| \\le 10^9, 0 \\le |a_i|, |b_i| \\le 2 \\times 10^{18}$。\n\n#### 说明\n\n**本题分值按 COCI 原题设置，满分 $110$。**\n\n**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T5 Zvijezda*。**\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P6680", "type": "P", "difficulty": 5, "samples": [["6 4\n1 2\n1 4\n4 6\n4 5", "6"], ["7 6\n2 3\n2 6\n2 7\n1 3\n1 4\n1 5\n", "16\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "CCO（加拿大）", "启发式合并"], "title": "[CCO 2019] Marshmallow Molecules", "background": "", "description": "有一个有 $N$ 个点，$M$ 条边的无向图，图无重边，无自环。\n\n如果 $a<b<c$ 且 $a$ 到 $b$ 有边，$a$ 到 $c$ 也有边，则 $b$ 到 $c$ 会连上一条边。\n\n求最后的边数。", "inputFormat": "第一行为两个整数 $N$ 和 $M$。\n\n接下来 $M$ 行，每行两个整数 $a_i$ 和 $b_i$，表示有一条从 $a_i$ 连到 $b_i$ 的边。", "outputFormat": "仅一行一个整数，表示最后的边数。", "hint": "#### 样例 1 解释\n需要添加 $(2,4),(5,6)$ 两条边。\n\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $1\\le N,M\\le 10^5$，$1\\le a_i<b_i\\le N$。\n\n| 子任务 | $N\\le $ | 特殊限制 | 分值\n| :-: |:-: |:-:| :-:\n| 1 | $100$ | 无 | $20$\n| 2 | $5\\times 10^3$ | 无 | $20$\n| 3 | 无特殊限制 | 对于每个 $1\\le j\\le N$ 均有至少一组 $(a_i,b_i)$ 且 $b_i=j$ | $20$\n| 4 | 无特殊限制 | 无 | $40$\n#### 说明\n本题译自 [Canadian Computing Olympiad 2019](https://cemc.math.uwaterloo.ca/contests/computing/2019/index.html) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2019/stage%202/day2.pdf) T2 Marshmallow Molecules。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2019] Marshmallow Molecules", "background": "", "description": "有一个有 $N$ 个点，$M$ 条边的无向图，图无重边，无自环。\n\n如果 $a<b<c$ 且 $a$ 到 $b$ 有边，$a$ 到 $c$ 也有边，则 $b$ 到 $c$ 会连上一条边。\n\n求最后的边数。", "inputFormat": "第一行为两个整数 $N$ 和 $M$。\n\n接下来 $M$ 行，每行两个整数 $a_i$ 和 $b_i$，表示有一条从 $a_i$ 连到 $b_i$ 的边。", "outputFormat": "仅一行一个整数，表示最后的边数。", "hint": "#### 样例 1 解释\n需要添加 $(2,4),(5,6)$ 两条边。\n\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $1\\le N,M\\le 10^5$，$1\\le a_i<b_i\\le N$。\n\n| 子任务 | $N\\le $ | 特殊限制 | 分值\n| :-: |:-: |:-:| :-:\n| 1 | $100$ | 无 | $20$\n| 2 | $5\\times 10^3$ | 无 | $20$\n| 3 | 无特殊限制 | 对于每个 $1\\le j\\le N$ 均有至少一组 $(a_i,b_i)$ 且 $b_i=j$ | $20$\n| 4 | 无特殊限制 | 无 | $40$\n#### 说明\n本题译自 [Canadian Computing Olympiad 2019](https://cemc.math.uwaterloo.ca/contests/computing/2019/index.html) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2019/stage%202/day2.pdf) T2 Marshmallow Molecules。", "locale": "zh-CN"}}}
{"pid": "P6681", "type": "P", "difficulty": 5, "samples": [["4 3\n101\n10\n1\n100\n", "3"], ["4 4\n1011\n1000\n1111\n1001", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2019", "CCO（加拿大）"], "title": "[CCO 2019] Bad Codes", "background": "", "description": "有 $N$ 个长度至多为 $M$ 的字符串。\n\n字符串之间可以随意拼接。\n\n如果可以用不同的方法拼接出两个相同的字符串，则请输出可能存在的这种字符串的最小长度，否则，请输出 `-1`。", "inputFormat": "第一行为两个整数 $N,M$。\n\n接下来 $N$ 行，一行一个长度至多为 $M$ 的字符串。", "outputFormat": "如果可以用不同的方法拼接出两个相同的字符串，则请输出可能存在的这种字符串的最小长度，否则，请输出 `-1`。", "hint": "#### 样例 1 解释\n拼接第二个字符串与第三个字符串可以得到第一个字符串。\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $1\\le N,M\\le 50$，读入的字符串里无空串，读入的字符 $\\in \\{0,1\\}$。\n\n| 子任务 | $N=$ | $M\\le$ | 特殊限制 | 分数\n| :-: | :-: | :-: | :-: |:-:\n| 1 | $4$ | $6$ | 无 | $16$\n| 2 | 无特殊限制 | 无特殊限制 | 每一个字符串包含一个 `1`，如 `00100`。| $28$\n| 3 | 无特殊限制 | 无特殊限制 | 无 | $56$\n#### 说明\n本题译自 [Canadian Computing Olympiad 2019](https://cemc.math.uwaterloo.ca/contests/computing/2019/index.html) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2019/stage%202/day2.pdf) T3 Bad Codes。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2019] Bad Codes", "background": "", "description": "有 $N$ 个长度至多为 $M$ 的字符串。\n\n字符串之间可以随意拼接。\n\n如果可以用不同的方法拼接出两个相同的字符串，则请输出可能存在的这种字符串的最小长度，否则，请输出 `-1`。", "inputFormat": "第一行为两个整数 $N,M$。\n\n接下来 $N$ 行，一行一个长度至多为 $M$ 的字符串。", "outputFormat": "如果可以用不同的方法拼接出两个相同的字符串，则请输出可能存在的这种字符串的最小长度，否则，请输出 `-1`。", "hint": "#### 样例 1 解释\n拼接第二个字符串与第三个字符串可以得到第一个字符串。\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $1\\le N,M\\le 50$，读入的字符串里无空串，读入的字符 $\\in \\{0,1\\}$。\n\n| 子任务 | $N=$ | $M\\le$ | 特殊限制 | 分数\n| :-: | :-: | :-: | :-: |:-:\n| 1 | $4$ | $6$ | 无 | $16$\n| 2 | 无特殊限制 | 无特殊限制 | 每一个字符串包含一个 `1`，如 `00100`。| $28$\n| 3 | 无特殊限制 | 无特殊限制 | 无 | $56$\n#### 说明\n本题译自 [Canadian Computing Olympiad 2019](https://cemc.math.uwaterloo.ca/contests/computing/2019/index.html) [Day 2](https://cemc.math.uwaterloo.ca/contests/computing/2019/stage%202/day2.pdf) T3 Bad Codes。\n", "locale": "zh-CN"}}}
{"pid": "P6682", "type": "P", "difficulty": 6, "samples": [["1\n7\n\n1\n\n1\n\n0\n\n0\n\n1\n", "\n\n? 2\n\n? 7\n\n? 4\n\n? 1\n\n? 5\n\n= 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "交互题", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2020] 染色 (Day1)", "background": "", "description": "Linda 喜欢时不时改变她头发的颜色，如果她的男友 Archie 注意到她头发颜色发生了改变，Linda 会十分高兴。当且仅当 Archie 发现 Linda 的头发颜色发生改变时，Archie 才会去评论 Linda 头发的新颜色。这意味着 Linda 始终可以知道 Archie 是否发现她的头发颜色有改变。\n\n现在市场上有一个新染发剂系列，该染发剂系列有 $N$ 种颜色，从 $1$ 到 $N$ 编号。两个颜色的相近程度与它们编号的差值有关——差值越小，则越相近。\n\nLinda 发现，对于该系列的染发剂，存在一个色差阈值 $C$（$1 \\leq C \\leq N$）。具体来说，假如 Linda 之前使用的染发剂颜色编号为 $color_{prew}$，Linda 接下来打算使用的染发剂颜色编号为 $color_{new}$，则 Archie 会注意到 Linda 的颜色头发差异，当且仅当 $\\left | color_{new}-color_{prew}\\right | \\geq C$。\n\n现在 Linda 买下了一套该系列的染发剂，准备做一个实验。她会不断地更换头发的颜色，并观察 Archie 是否注意到了头发颜色发生改变。因为染发剂有限，每种颜色的染发剂最多只能使用一次。\n\n在实验开始之前，Linda 使用的是另外一个系列的染发剂，因此讨论第一次染发后 Archie 的反应是没有意义的。\n\n现在 Linda 想要通过有限的时间找到阈值 $C$，请写一个程序帮助她完成这个任务。\n\n### 交互方式\n\n本题是一道交互题。\n\n**与原题不同的是，为了压缩数据组数，本题单个测试点中将包含多组数据。**\n\n输入第一行包含一个整数 $T$，表示该测试点的数据组数。\n\n对于每组数据，你首先将读入一个整数 $N$，代表该系列染发剂的颜色数量。\n\n接下来，你可以按如下形式输出来进行询问：`? P`。其中 $P$ 代表 Linda 下一次要使用的染发剂的颜色编号。你输出的 $P$ 需要满足 $1 \\leq P \\leq N$，且任意两次询问的 $P$ 均不相同。\n\n在询问过后，你的程序将读入一个整数，若这个整数为 $1$，代表 Archie 注意到了 Linda 头发颜色的变化；若为 $0$，则表示他没有注意到颜色的变化。\n\n当你确认了阙值 $C$ 后，按如下格式输出答案：`= C`。\n\n如果答案正确，将会直接进入下一组数据的交互。\n\n如果答案错误，交互器将直接终止你的程序。\n\n对于每组测试数据，你的程序可以最多进行 $64$ 次询问（最后输出答案不算作询问）。\n\n请注意，一般情况下程序的输出会存放在缓冲区中，为了确保你的输出能被交互库接收，请在输出一行之后刷新缓冲区。\n\n- 对于 C++ 语言，可以使用 `std::cout<<std::endl` 来在输出换行的同时刷新缓冲区；\n- 对于 Java 语言，可以使用 `System.out.flush();` 来刷新缓冲区；\n- 对于 Python 语言，可以使用 `sys.stdout.flush()` 来刷新缓冲区。", "inputFormat": "", "outputFormat": "", "hint": "### 样例解释\n\n为了方便各位理解交互过程，部分行之间人为添加了空行。\n\n下面依次解释每次询问过程：\n\n1. 这一次询问的结果无意义。\n2. 此次询问后有 $C \\leq 5$；\n3. 此次询问后有 $3 \\lt C \\leq 5$，这时候可以考虑检测差值为 $4$ 时的情况。但因为 $4+4=8$ 和 $4-4=0$ 都不合法，因此不再考虑这么做。\n4. 此次询问后有 $3 \\lt C \\leq 5$。\n5. 此次询问后有 $3 \\lt C \\leq 4$，即 $C=4$。\n\n### 子任务\n\n所有数据均满足：$1 \\leq T \\leq 1200$，$1 < N \\leq 10^{18}$。\n\n- 子任务 1（9 分）：$N \\leq 64$；\n- 子任务 2（13 分）：$N \\leq 125$；\n- 子任务 3（21 分）：$N \\leq 10^3$；\n- 子任务 4（24 分）：$N \\leq 10^9$；\n- 子任务 5（33 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2020] 染色 (Day1)", "background": "", "description": "Linda 喜欢时不时改变她头发的颜色，如果她的男友 Archie 注意到她头发颜色发生了改变，Linda 会十分高兴。当且仅当 Archie 发现 Linda 的头发颜色发生改变时，Archie 才会去评论 Linda 头发的新颜色。这意味着 Linda 始终可以知道 Archie 是否发现她的头发颜色有改变。\n\n现在市场上有一个新染发剂系列，该染发剂系列有 $N$ 种颜色，从 $1$ 到 $N$ 编号。两个颜色的相近程度与它们编号的差值有关——差值越小，则越相近。\n\nLinda 发现，对于该系列的染发剂，存在一个色差阈值 $C$（$1 \\leq C \\leq N$）。具体来说，假如 Linda 之前使用的染发剂颜色编号为 $color_{prew}$，Linda 接下来打算使用的染发剂颜色编号为 $color_{new}$，则 Archie 会注意到 Linda 的颜色头发差异，当且仅当 $\\left | color_{new}-color_{prew}\\right | \\geq C$。\n\n现在 Linda 买下了一套该系列的染发剂，准备做一个实验。她会不断地更换头发的颜色，并观察 Archie 是否注意到了头发颜色发生改变。因为染发剂有限，每种颜色的染发剂最多只能使用一次。\n\n在实验开始之前，Linda 使用的是另外一个系列的染发剂，因此讨论第一次染发后 Archie 的反应是没有意义的。\n\n现在 Linda 想要通过有限的时间找到阈值 $C$，请写一个程序帮助她完成这个任务。\n\n### 交互方式\n\n本题是一道交互题。\n\n**与原题不同的是，为了压缩数据组数，本题单个测试点中将包含多组数据。**\n\n输入第一行包含一个整数 $T$，表示该测试点的数据组数。\n\n对于每组数据，你首先将读入一个整数 $N$，代表该系列染发剂的颜色数量。\n\n接下来，你可以按如下形式输出来进行询问：`? P`。其中 $P$ 代表 Linda 下一次要使用的染发剂的颜色编号。你输出的 $P$ 需要满足 $1 \\leq P \\leq N$，且任意两次询问的 $P$ 均不相同。\n\n在询问过后，你的程序将读入一个整数，若这个整数为 $1$，代表 Archie 注意到了 Linda 头发颜色的变化；若为 $0$，则表示他没有注意到颜色的变化。\n\n当你确认了阙值 $C$ 后，按如下格式输出答案：`= C`。\n\n如果答案正确，将会直接进入下一组数据的交互。\n\n如果答案错误，交互器将直接终止你的程序。\n\n对于每组测试数据，你的程序可以最多进行 $64$ 次询问（最后输出答案不算作询问）。\n\n请注意，一般情况下程序的输出会存放在缓冲区中，为了确保你的输出能被交互库接收，请在输出一行之后刷新缓冲区。\n\n- 对于 C++ 语言，可以使用 `std::cout<<std::endl` 来在输出换行的同时刷新缓冲区；\n- 对于 Java 语言，可以使用 `System.out.flush();` 来刷新缓冲区；\n- 对于 Python 语言，可以使用 `sys.stdout.flush()` 来刷新缓冲区。", "inputFormat": "", "outputFormat": "", "hint": "### 样例解释\n\n为了方便各位理解交互过程，部分行之间人为添加了空行。\n\n下面依次解释每次询问过程：\n\n1. 这一次询问的结果无意义。\n2. 此次询问后有 $C \\leq 5$；\n3. 此次询问后有 $3 \\lt C \\leq 5$，这时候可以考虑检测差值为 $4$ 时的情况。但因为 $4+4=8$ 和 $4-4=0$ 都不合法，因此不再考虑这么做。\n4. 此次询问后有 $3 \\lt C \\leq 5$。\n5. 此次询问后有 $3 \\lt C \\leq 4$，即 $C=4$。\n\n### 子任务\n\n所有数据均满足：$1 \\leq T \\leq 1200$，$1 < N \\leq 10^{18}$。\n\n- 子任务 1（9 分）：$N \\leq 64$；\n- 子任务 2（13 分）：$N \\leq 125$；\n- 子任务 3（21 分）：$N \\leq 10^3$；\n- 子任务 4（24 分）：$N \\leq 10^9$；\n- 子任务 5（33 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P6683", "type": "P", "difficulty": 6, "samples": [["1 2 3\n6\nA 5 6 7\nA 3 10 17\nR 1\nA 15 18 21\nA 5 10 15\nR 3\n", "0\n2\n0\n2\n1\n1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2020", "BalticOI（波罗的海）"], "title": "[BalticOI 2020] 混合调料 (Day1)", "background": "", "description": "著名餐厅 *Salt, Pepper & Garlic* 的主厨 Serge 准备好成为一名米其林一星厨师。他已被告知，今晚一位秘密评审员将光临他的餐厅。\n\n虽然他并没有得知这位评审员的姓名，但他已经得知了这位评审员将要点的菜和他的口味偏好。具体来说，这位评审员希望在菜肴中加入非常精确比例的盐，胡椒粉和大蒜粉。\n\nSerge 在厨房的一个架子上放了若干盐，胡椒粉和大蒜粉的混合调料瓶。对于每种调料瓶，Serge 都知道该调料瓶中混合的盐，胡椒粉和大蒜粉的量（单位为千克），他可以通过将任意多瓶调料混合起来（当然也可以单独使用一瓶调料），得到所需比例的调料。\n\n事实上菜肴里放的调料量并不多，因此可以认为调料的量是足够的。但是，评审员要求的盐，胡椒粉和大蒜粉的量之比中的数字可能非常大。\n\n现在 Serge 想要求出，是否能够利用已有的调料瓶配制出满足评审员要求比例的调料？如果能够配制，最少需用多少个瓶子？\n\n此外，Serge 可能会拿到新的调料瓶，或者将架子上已有的调料瓶给其他厨师，这意味着架子上的瓶子种类会不断发生改变，Serge 希望在每次架子上的调料瓶发生变化后，再解决上面的问题。\n\n举个例子，假如评审员要求的盐，胡椒粉和大蒜粉的量的比例为 $1:1:1$，架子上有以下几种调料瓶：\n\n| 调料瓶编号 |  盐  | 胡椒粉 | 大蒜粉 |\n| :--------: | :--: | :----: | :----: |\n|     1      |  10  |   20   |   30   |\n|     2      | 300  |  200   |  100   |\n|     3      |  12  |   15   |   27   |\n\n则只需将瓶子 $1$ 中的全部调料，和瓶子 $2$ 中的 $60$ 千克调料（其中包括盐 $30$ 千克，胡椒粉 $20$ 千克，大蒜粉 $10$ 千克）混合即可满足要求。一旦取走瓶子 $2$，则无法满足评审员的要求。", "inputFormat": "输入第一行包含三个整数 $S_f,P_f,G_f$，表示评审员要求的盐，胡椒粉，大蒜粉的量之比为 $S_f:P_f:G_f$，$\\forall \\alpha \\gt 0$，$(\\alpha S_f,\\alpha P_f, \\alpha G_f)$ 的混合调料也满足评审员要求。\n\n下一行一个整数 $N$，表示架子上的瓶子要进行 $N$ 次变动。最开始架子上没有瓶子。\n\n接下来 $N$ 行，每行描述一次变动。\n\n- 若架子上新增了瓶子，则该行包含一个大写字母 `A` 和三个整数 $S_i,P_i,G_i$，分别代表该瓶中盐，胡椒粉，大蒜粉的量。瓶子按加入的先后顺序从 $1$ 开始编号，即如果该瓶子是第 $i$ 个加入架子的，则其编号为 $i$。\n- 若架子上移除了瓶子，则该行包含一个大写字母 `R` 和一个整数 $r_i$，代表移除的瓶子编号。保证该编号的瓶子在架子上。", "outputFormat": "输出 $N$ 行。第 $i$ 行输出在第 $i$ 次变动后，满足评审员要求所需的最少瓶子数量。特别地，若不存在一种方案满足评审员的要求，输出 $0$。", "hint": "所有数据均满足：$1 \\leq N \\leq 10^5$，$S_f,P_f,G_f \\geq 0$，$0 \\lt S_f+P_f+G_f \\leq 10^6$，$S_i,P_i,G_i \\geq 0$，$0 \\lt S_i+P_i+G_i \\leq 10^6$。\n\n- 子任务 1（13 分）：$N \\leq 50$，$0 \\lt S_i+P_i+G_i \\leq 10^2$；\n- 子任务 2（17 分）：$N \\leq 500$，$0 \\lt S_i+P_i+G_i \\leq 10^3$；\n- 子任务 3（30 分）：$N \\leq 5000$，$0 \\lt S_i+P_i+G_i \\leq 10^4$；\n- 子任务 4（40 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2020] 混合调料 (Day1)", "background": "", "description": "著名餐厅 *Salt, Pepper & Garlic* 的主厨 Serge 准备好成为一名米其林一星厨师。他已被告知，今晚一位秘密评审员将光临他的餐厅。\n\n虽然他并没有得知这位评审员的姓名，但他已经得知了这位评审员将要点的菜和他的口味偏好。具体来说，这位评审员希望在菜肴中加入非常精确比例的盐，胡椒粉和大蒜粉。\n\nSerge 在厨房的一个架子上放了若干盐，胡椒粉和大蒜粉的混合调料瓶。对于每种调料瓶，Serge 都知道该调料瓶中混合的盐，胡椒粉和大蒜粉的量（单位为千克），他可以通过将任意多瓶调料混合起来（当然也可以单独使用一瓶调料），得到所需比例的调料。\n\n事实上菜肴里放的调料量并不多，因此可以认为调料的量是足够的。但是，评审员要求的盐，胡椒粉和大蒜粉的量之比中的数字可能非常大。\n\n现在 Serge 想要求出，是否能够利用已有的调料瓶配制出满足评审员要求比例的调料？如果能够配制，最少需用多少个瓶子？\n\n此外，Serge 可能会拿到新的调料瓶，或者将架子上已有的调料瓶给其他厨师，这意味着架子上的瓶子种类会不断发生改变，Serge 希望在每次架子上的调料瓶发生变化后，再解决上面的问题。\n\n举个例子，假如评审员要求的盐，胡椒粉和大蒜粉的量的比例为 $1:1:1$，架子上有以下几种调料瓶：\n\n| 调料瓶编号 |  盐  | 胡椒粉 | 大蒜粉 |\n| :--------: | :--: | :----: | :----: |\n|     1      |  10  |   20   |   30   |\n|     2      | 300  |  200   |  100   |\n|     3      |  12  |   15   |   27   |\n\n则只需将瓶子 $1$ 中的全部调料，和瓶子 $2$ 中的 $60$ 千克调料（其中包括盐 $30$ 千克，胡椒粉 $20$ 千克，大蒜粉 $10$ 千克）混合即可满足要求。一旦取走瓶子 $2$，则无法满足评审员的要求。", "inputFormat": "输入第一行包含三个整数 $S_f,P_f,G_f$，表示评审员要求的盐，胡椒粉，大蒜粉的量之比为 $S_f:P_f:G_f$，$\\forall \\alpha \\gt 0$，$(\\alpha S_f,\\alpha P_f, \\alpha G_f)$ 的混合调料也满足评审员要求。\n\n下一行一个整数 $N$，表示架子上的瓶子要进行 $N$ 次变动。最开始架子上没有瓶子。\n\n接下来 $N$ 行，每行描述一次变动。\n\n- 若架子上新增了瓶子，则该行包含一个大写字母 `A` 和三个整数 $S_i,P_i,G_i$，分别代表该瓶中盐，胡椒粉，大蒜粉的量。瓶子按加入的先后顺序从 $1$ 开始编号，即如果该瓶子是第 $i$ 个加入架子的，则其编号为 $i$。\n- 若架子上移除了瓶子，则该行包含一个大写字母 `R` 和一个整数 $r_i$，代表移除的瓶子编号。保证该编号的瓶子在架子上。", "outputFormat": "输出 $N$ 行。第 $i$ 行输出在第 $i$ 次变动后，满足评审员要求所需的最少瓶子数量。特别地，若不存在一种方案满足评审员的要求，输出 $0$。", "hint": "所有数据均满足：$1 \\leq N \\leq 10^5$，$S_f,P_f,G_f \\geq 0$，$0 \\lt S_f+P_f+G_f \\leq 10^6$，$S_i,P_i,G_i \\geq 0$，$0 \\lt S_i+P_i+G_i \\leq 10^6$。\n\n- 子任务 1（13 分）：$N \\leq 50$，$0 \\lt S_i+P_i+G_i \\leq 10^2$；\n- 子任务 2（17 分）：$N \\leq 500$，$0 \\lt S_i+P_i+G_i \\leq 10^3$；\n- 子任务 3（30 分）：$N \\leq 5000$，$0 \\lt S_i+P_i+G_i \\leq 10^4$；\n- 子任务 4（40 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P6684", "type": "P", "difficulty": 6, "samples": [["6 8 2\n1 3\n1 5\n1 6\n2 5\n2 6\n3 4\n3 5\n5 6\n4 8\n4 7\n", "NO\nYES\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "BalticOI（波罗的海）"], "title": "[BalticOI 2020] 小丑 (Day1)", "background": "由于官方测试数据量过大，为了避免过多资源占用，这里选取了部分官方数据作为本题测试数据。", "description": "小丑回到了哥谭市，准备执行一个邪恶的计划。哥谭市有 $N$ 个路口（编号从 $1$ 到 $N$），$M$ 条道路（编号从 $1$ 到 $M$）。一条道路连接两个不同的路口，且两个路口间最多只有一条道路相连。\n\n为了实现他的邪恶计划，小丑需要在城市中走完一个奇环。形式化地说，一个奇环为一个形如 $S,s_1,s_2,\\ldots,s_k,S$ 的序列（要求 $k$ 为偶数），其中 $S$ 和 $s_1$，$s_k$ 和 $S$，以及 $\\forall 1 \\lt i \\leq k$，$s_{i-1}$ 和 $s_i$ 之间都有道路直接相连。\n\n然而，警察控制了城市中的部分街道。在第 $i$ 天，警察控制了编号在 $[l_i,r_i]$ 范围内的所有街道，小丑不能经过这些街道。然而小丑通过买通警察局的内鬼，了解到了警察在未来 $Q$ 天控制街道的计划，现在小丑想要知道，在哪些日子里，他的邪恶计划可以实现。", "inputFormat": "输入第一行三个整数 $N,M,Q$。\n\n接下来 $M$ 行，第 $i$ 行两个整数 $u,v$（保证 $u \\neq v$），描述了编号为 $i$ 的街道。其连接了 $u$ 和 $v$ 两个路口。保证两个路口间最多只有一条街道相连。\n\n接下来 $Q$ 行，第 $i$ 行两个整数 $l_i,r_i$，表示警察在第 $i$ 天将要控制编号在 $[l_i,r_i]$ 范围内的所有街道。", "outputFormat": "输出 $Q$ 行。\n\n在第 $i$ 行，若第 $i$ 天小丑的计划可以实现，输出 `YES`，否则输出 `NO`。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qr5q8ha4.png)\n\n### 子任务\n\n所有数据均满足：$1 \\leq N,M,Q \\leq 2 \\times 10^5$。\n\n- 子任务 1（6 分）：$1 \\leq N,M,Q \\leq 200$；\n- 子任务 2（8 分）：$1 \\leq N,M,Q \\leq 2 \\times 10^3$；\n- 子任务 3（25 分）：$\\forall i \\in [1,Q]$，$l_i =1$；\n- 子任务 4（10 分）：$\\forall i \\in [1,Q]$，$l_i \\leq 200$；\n- 子任务 5（22 分）：$Q \\leq 2 \\times 10^3$；\n- 子任务 6（29 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2020] 小丑 (Day1)", "background": "由于官方测试数据量过大，为了避免过多资源占用，这里选取了部分官方数据作为本题测试数据。", "description": "小丑回到了哥谭市，准备执行一个邪恶的计划。哥谭市有 $N$ 个路口（编号从 $1$ 到 $N$），$M$ 条道路（编号从 $1$ 到 $M$）。一条道路连接两个不同的路口，且两个路口间最多只有一条道路相连。\n\n为了实现他的邪恶计划，小丑需要在城市中走完一个奇环。形式化地说，一个奇环为一个形如 $S,s_1,s_2,\\ldots,s_k,S$ 的序列（要求 $k$ 为偶数），其中 $S$ 和 $s_1$，$s_k$ 和 $S$，以及 $\\forall 1 \\lt i \\leq k$，$s_{i-1}$ 和 $s_i$ 之间都有道路直接相连。\n\n然而，警察控制了城市中的部分街道。在第 $i$ 天，警察控制了编号在 $[l_i,r_i]$ 范围内的所有街道，小丑不能经过这些街道。然而小丑通过买通警察局的内鬼，了解到了警察在未来 $Q$ 天控制街道的计划，现在小丑想要知道，在哪些日子里，他的邪恶计划可以实现。", "inputFormat": "输入第一行三个整数 $N,M,Q$。\n\n接下来 $M$ 行，第 $i$ 行两个整数 $u,v$（保证 $u \\neq v$），描述了编号为 $i$ 的街道。其连接了 $u$ 和 $v$ 两个路口。保证两个路口间最多只有一条街道相连。\n\n接下来 $Q$ 行，第 $i$ 行两个整数 $l_i,r_i$，表示警察在第 $i$ 天将要控制编号在 $[l_i,r_i]$ 范围内的所有街道。", "outputFormat": "输出 $Q$ 行。\n\n在第 $i$ 行，若第 $i$ 天小丑的计划可以实现，输出 `YES`，否则输出 `NO`。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qr5q8ha4.png)\n\n### 子任务\n\n所有数据均满足：$1 \\leq N,M,Q \\leq 2 \\times 10^5$。\n\n- 子任务 1（6 分）：$1 \\leq N,M,Q \\leq 200$；\n- 子任务 2（8 分）：$1 \\leq N,M,Q \\leq 2 \\times 10^3$；\n- 子任务 3（25 分）：$\\forall i \\in [1,Q]$，$l_i =1$；\n- 子任务 4（10 分）：$\\forall i \\in [1,Q]$，$l_i \\leq 200$；\n- 子任务 5（22 分）：$Q \\leq 2 \\times 10^3$；\n- 子任务 6（29 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P6685", "type": "P", "difficulty": 2, "samples": [["5 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷月赛"], "title": "可持久化动态仙人掌的直径问题", "background": "众所周知，一场考试需要一道签到题。", "description": "给定 $n,m$，求有多少个正整数 $x$，使得 $x^m\\le n$。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一个整数表示正整数 $x$ 的个数。", "hint": "对于 $25\\%$ 的数据满足 $m=1$；  \n对于 $50\\%$ 的数据满足 $n\\le 10^6$；  \n对于 $100\\%$ 的数据满足 $1\\leq n,m\\le 10^9$。\n\n---\n\n$\\text{upd 2022.7.24}$：新增加一组 Hack 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "可持久化动态仙人掌的直径问题", "background": "众所周知，一场考试需要一道签到题。", "description": "给定 $n,m$，求有多少个正整数 $x$，使得 $x^m\\le n$。", "inputFormat": "一行两个正整数 $n,m$。", "outputFormat": "一个整数表示正整数 $x$ 的个数。", "hint": "对于 $25\\%$ 的数据满足 $m=1$；  \n对于 $50\\%$ 的数据满足 $n\\le 10^6$；  \n对于 $100\\%$ 的数据满足 $1\\leq n,m\\le 10^9$。\n\n---\n\n$\\text{upd 2022.7.24}$：新增加一组 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P6686", "type": "P", "difficulty": 3, "samples": [["6\n3 3 2 2 4 5", "6"], ["6\n1 1 4 5 1 4\n", "5"], ["6\n2 2 2 2 2 2", "20"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2020", "洛谷原创", "洛谷月赛"], "title": "混凝土数学", "background": "", "description": "你正在看混凝土数学，这时旁边的工地开工了，你觉得看他们施工更有意思，于是你向窗外望去，注意到了一些长度不同的木棍。具体而言，你看到了 $n$ 条木棍编号为 $1,2,3,\\ldots,n$，长度为 $a_1,a_2,a_3,\\ldots,a_n$。你突发奇想：有多少拿出其中 $3$ 条木棍的方案满足它们能构成等腰三角形呢？你不想要输出的数太大，所以最后的方案要对 $998244353$ 取模。\n\n给出等腰三角形的要求：任意两边之和大于第三边且至少有两条边边长相等。\n\n例如，如果木棍长度分别为 $\\{3,3,2,2,4,5\\}$，你就有 $6$ 种方法，选取的木棍编号分别为：$\\{1,2,3\\}$，$\\{1,2,4\\}$，$\\{1,2,5\\}$，$\\{1,2,6\\}$，$\\{1,3,4\\}$，$\\{2,3,4\\}$。", "inputFormat": "第一行给出一个正整数 $n$ 表示木棍个数。\n\n第二行 $n$ 个正整数表示 $a_1,a_2,a_3,\\ldots, a_n$。", "outputFormat": "一个数表示总方案数对 $998244353$ 取模的结果。", "hint": "- Subtask1 （$30$ pts）：$1\\leq n \\leq 200$。\n- Subtask2 （$30$ pts）：$1\\leq n \\leq 2000$。\n- Subtask3 （$20$ pts）：木棍长度全部相等。\n- Subtask4 （$20$ pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足：$1\\leq n \\leq 2\\times 10^5$，$1\\leq a_i \\leq 2\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "混凝土数学", "background": "", "description": "你正在看混凝土数学，这时旁边的工地开工了，你觉得看他们施工更有意思，于是你向窗外望去，注意到了一些长度不同的木棍。具体而言，你看到了 $n$ 条木棍编号为 $1,2,3,\\ldots,n$，长度为 $a_1,a_2,a_3,\\ldots,a_n$。你突发奇想：有多少拿出其中 $3$ 条木棍的方案满足它们能构成等腰三角形呢？你不想要输出的数太大，所以最后的方案要对 $998244353$ 取模。\n\n给出等腰三角形的要求：任意两边之和大于第三边且至少有两条边边长相等。\n\n例如，如果木棍长度分别为 $\\{3,3,2,2,4,5\\}$，你就有 $6$ 种方法，选取的木棍编号分别为：$\\{1,2,3\\}$，$\\{1,2,4\\}$，$\\{1,2,5\\}$，$\\{1,2,6\\}$，$\\{1,3,4\\}$，$\\{2,3,4\\}$。", "inputFormat": "第一行给出一个正整数 $n$ 表示木棍个数。\n\n第二行 $n$ 个正整数表示 $a_1,a_2,a_3,\\ldots, a_n$。", "outputFormat": "一个数表示总方案数对 $998244353$ 取模的结果。", "hint": "- Subtask1 （$30$ pts）：$1\\leq n \\leq 200$。\n- Subtask2 （$30$ pts）：$1\\leq n \\leq 2000$。\n- Subtask3 （$20$ pts）：木棍长度全部相等。\n- Subtask4 （$20$ pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足：$1\\leq n \\leq 2\\times 10^5$，$1\\leq a_i \\leq 2\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P6687", "type": "P", "difficulty": 4, "samples": [["1\n1\n2\n2\n1\n", "dldsgay!!1\n"], ["2\n1 2\n3 4\n4 3\n2 1\n", "1\n"], ["2\n1 2\n3 4\n1 2\n4 3\n", "dldsgay!!1\n"], ["3\n1 6 2\n4 3 5\n2 4 3\n5 1 6\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["树状数组", "分治", "洛谷月赛"], "title": "论如何玩转 Excel 表格", "background": "", "description": "有一个 $2 \\times n$ 的表格，表格内不重不漏地填有 $1 \\sim 2 \\times n$ 这些数字。你可以进行若干次操作，每次操作可以选择一个 $2 \\times 2$ 的正方形区域，然后旋转 $180\\degree$。\n\n给出现在的状态以及目标状态。问是否可以达到目标状态。如果能，最少操作次数是多少。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来两行，每行 $n$ 个正整数表示表格现在的状态。\n\n接下来两行，每行 $n$ 个正整数表示目标状态。", "outputFormat": "若无解，输出一行 `dldsgay!!1`。\n\n否则，输出一个整数，表示最少的操作次数。", "hint": "#### 子任务\n\n本题采用捆绑测试。\n\n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^6$。\n\n本题共 $10$ 个子任务，各子任务的分值和限制如下：\n\n子任务 $1$（$1$ 分）：保证输出一定为 `dldsgay!!1`。  \n子任务 $2$（$1$ 分）：保证目标状态与现在状态一致。  \n子任务 $3$（$4$ 分）：$n=1$。  \n子任务 $4$（$5$ 分）：$n=2$。  \n子任务 $5$（$14$ 分）：$1 \\leq n \\leq 20$。  \n子任务 $6$（$19$ 分）：$1 \\leq n \\leq 100$。  \n子任务 $7$（$19$ 分）：$1 \\leq n \\leq 1000$。  \n子任务 $8$（$8$ 分）：保证目标状态第一行依次为 $1 \\sim n$，第二行依次为  $n + 1 \\sim 2n$。  \n子任务 $9$（$10$ 分）：保证不存在无解情况。  \n子任务 $10$（$19$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "论如何玩转 Excel 表格", "background": "", "description": "有一个 $2 \\times n$ 的表格，表格内不重不漏地填有 $1 \\sim 2 \\times n$ 这些数字。你可以进行若干次操作，每次操作可以选择一个 $2 \\times 2$ 的正方形区域，然后旋转 $180\\degree$。\n\n给出现在的状态以及目标状态。问是否可以达到目标状态。如果能，最少操作次数是多少。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来两行，每行 $n$ 个正整数表示表格现在的状态。\n\n接下来两行，每行 $n$ 个正整数表示目标状态。", "outputFormat": "若无解，输出一行 `dldsgay!!1`。\n\n否则，输出一个整数，表示最少的操作次数。", "hint": "#### 子任务\n\n本题采用捆绑测试。\n\n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^6$。\n\n本题共 $10$ 个子任务，各子任务的分值和限制如下：\n\n子任务 $1$（$1$ 分）：保证输出一定为 `dldsgay!!1`。  \n子任务 $2$（$1$ 分）：保证目标状态与现在状态一致。  \n子任务 $3$（$4$ 分）：$n=1$。  \n子任务 $4$（$5$ 分）：$n=2$。  \n子任务 $5$（$14$ 分）：$1 \\leq n \\leq 20$。  \n子任务 $6$（$19$ 分）：$1 \\leq n \\leq 100$。  \n子任务 $7$（$19$ 分）：$1 \\leq n \\leq 1000$。  \n子任务 $8$（$8$ 分）：保证目标状态第一行依次为 $1 \\sim n$，第二行依次为  $n + 1 \\sim 2n$。  \n子任务 $9$（$10$ 分）：保证不存在无解情况。  \n子任务 $10$（$19$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P6688", "type": "P", "difficulty": 5, "samples": [["12 6\n1 1 4 5 1 4 2 2 5 2 3 3\n1 1 3 7 9\n1 2 3 5 6\n1 1 3 2 4\n0 7 1\n1 1 4 2 5\n1 5 7 8 10", "YES\nYES\nNO\nYES\nYES"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "线段树", "树状数组", "洛谷原创", "O2优化", "哈希 hashing", "洛谷月赛"], "title": "可重集", "background": "", "description": "给出一个长度为 $n$ 的非负整数序列 $a_1,a_2,a_3,\\ldots, a_n$，给出 $q$ 次操作，每次先给出一个参数 $op$：\n\n- $op=0$，接下来给出 $2$ 个参数 $x,y$，把 $a_x$ 修改为 $y$。\n\n- $op=1$，接下来给出 $4$ 个参数 $ l_1,r_1,l_2,r_2$（保证 $r_1-l_1=r_2-l_2$），你需要判断区间 $[l_1,r_1]$ 与区间 $[l_2,r_2]$ 是否本质相同，如果本质相同输出 `YES`，否则输出 `NO`。\n\n本质相同的定义：令区间长度为 $\\text{len}$ ，序列 $p_{1}\\dots p_{\\text{len}}$ 为 $a_{l_1}\\dots a_{r_1}$ 升序排序后的结果，序列 $q_{1}\\dots q_\\text{len}$ 为 $a_{l_2}\\dots a_{r_2}$ 升序排序后的结果，存在一个整数 $k$ 使得满足 $\\forall i,p_i+k=q_i$。", "inputFormat": "第一行给出两个正整数 $n,q$，表示序列长度及操作次数。\n\n第二行 $n$ 个非负整数表示 $a_{1},a_2,a_3,\\ldots,a_n$。\n\n\n接下来 $q$ 行，每行为上述操作中的一种。", "outputFormat": "对于 $op=1$ 的操作，输出两个区间是否本质相同，如果是输出 `YES`，否则输出 `NO`。", "hint": "\n\n- Subtask1 （$25$ pts）：$1\\leq n,q \\leq 1000$。\n\n- Subtask2 （$25$ pts）：$1\\leq n,q \\leq 10^5$，$0\\leq a_i,y\\leq 100$。\n\n- Subtask3 （$25$ pts）：$1\\leq n,q \\leq 10^5$。\n\n- Subtask4 （$25$ pts）：无特殊限制。\n\n你只有通过 subtask 中的所有测试点才能获得该 subtask 的分数。\n\n对于所有数据满足：$1\\leq n,q \\leq 10^6$，$1\\leq x \\leq n$，$0\\leq a_i,y \\leq  10^6$ 。且对于所有 $l,r$ 有 $1\\leq l\\leq r\\leq n$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "可重集", "background": "", "description": "给出一个长度为 $n$ 的非负整数序列 $a_1,a_2,a_3,\\ldots, a_n$，给出 $q$ 次操作，每次先给出一个参数 $op$：\n\n- $op=0$，接下来给出 $2$ 个参数 $x,y$，把 $a_x$ 修改为 $y$。\n\n- $op=1$，接下来给出 $4$ 个参数 $ l_1,r_1,l_2,r_2$（保证 $r_1-l_1=r_2-l_2$），你需要判断区间 $[l_1,r_1]$ 与区间 $[l_2,r_2]$ 是否本质相同，如果本质相同输出 `YES`，否则输出 `NO`。\n\n本质相同的定义：令区间长度为 $\\text{len}$ ，序列 $p_{1}\\dots p_{\\text{len}}$ 为 $a_{l_1}\\dots a_{r_1}$ 升序排序后的结果，序列 $q_{1}\\dots q_\\text{len}$ 为 $a_{l_2}\\dots a_{r_2}$ 升序排序后的结果，存在一个整数 $k$ 使得满足 $\\forall i,p_i+k=q_i$。", "inputFormat": "第一行给出两个正整数 $n,q$，表示序列长度及操作次数。\n\n第二行 $n$ 个非负整数表示 $a_{1},a_2,a_3,\\ldots,a_n$。\n\n\n接下来 $q$ 行，每行为上述操作中的一种。", "outputFormat": "对于 $op=1$ 的操作，输出两个区间是否本质相同，如果是输出 `YES`，否则输出 `NO`。", "hint": "\n\n- Subtask1 （$25$ pts）：$1\\leq n,q \\leq 1000$。\n\n- Subtask2 （$25$ pts）：$1\\leq n,q \\leq 10^5$，$0\\leq a_i,y\\leq 100$。\n\n- Subtask3 （$25$ pts）：$1\\leq n,q \\leq 10^5$。\n\n- Subtask4 （$25$ pts）：无特殊限制。\n\n你只有通过 subtask 中的所有测试点才能获得该 subtask 的分数。\n\n对于所有数据满足：$1\\leq n,q \\leq 10^6$，$1\\leq x \\leq n$，$0\\leq a_i,y \\leq  10^6$ 。且对于所有 $l,r$ 有 $1\\leq l\\leq r\\leq n$。\n\n", "locale": "zh-CN"}}}
{"pid": "P6689", "type": "P", "difficulty": 6, "samples": [["2 2", "499122177"], ["4 2 ", "873463811"], ["1919 810", "488346634"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "洛谷原创", "洛谷月赛"], "title": "序列", "background": "", "description": "小 C 想出关于括号序列的一道题，但是他不怎么会造数据，所以他采取了随机的方式。\n\n小 C 钦定了括号序列 $S$ 的长度 $N$。$S$ 初始时全为 `(`。\n\n他初始设定了一个参数 $K$，并按照如下流程随机，直到 $K=0$：\n\n1. 在 $[1,N]$ 的范围内**均匀随机**一个整数，把 $S$ 这一位上的括号取反（左括号变右括号，右括号变左括号）。\n2. 如果本次操作使得 `(` 的数量减少了，使 $K$ 的值减 $1$。\n\n现在数据造好了，题也就出完了。\n\n小 C 想请你求出，在经过上述操作后，$S$ 中**最长合法括号子序列**（不要求连续）在模 $998244353$ 意义下期望有多长。\n", "inputFormat": "输入第一行，为两个正整数 $N,K$，含义题面已给出。", "outputFormat": "输出共一行，一个非负整数，表示你所求得的答案对 $998244353$ 取模的结果。", "hint": "**样例解释1**\n\n最终括号序列只有 $3$ 种，`))`，`()`，`)(`。其对应的概率分别为 $\\frac{1}{2}$，$\\frac{1}{4}$，$\\frac{1}{4}$。\n\n它们对应的最长合法括号子序列长度分别为 $0,2,0$。所以最终答案为 $\\frac{1}{2}$，也即 $499122177$。\n\n**数据规模：**\n\n对于前 $5\\%$ 的数据，$N=1$；  \n另有 $5\\%$ 的数据，$N=2$；  \n另有 $5\\%$ 的数据，$N\\le 7$，$K\\le 5$；  \n另有 $15\\%$ 的数据，$N\\le 15$，$K\\le 500$；  \n另有 $ 15\\%$ 的数据，$N\\le 50$，$K\\le 50$；  \n另有 $ 15\\%$ 的数据，$N\\le 500$，$K\\le 100$；  \n对于全部的数据，保证 $1\\le N,K\\le 5000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "序列", "background": "", "description": "小 C 想出关于括号序列的一道题，但是他不怎么会造数据，所以他采取了随机的方式。\n\n小 C 钦定了括号序列 $S$ 的长度 $N$。$S$ 初始时全为 `(`。\n\n他初始设定了一个参数 $K$，并按照如下流程随机，直到 $K=0$：\n\n1. 在 $[1,N]$ 的范围内**均匀随机**一个整数，把 $S$ 这一位上的括号取反（左括号变右括号，右括号变左括号）。\n2. 如果本次操作使得 `(` 的数量减少了，使 $K$ 的值减 $1$。\n\n现在数据造好了，题也就出完了。\n\n小 C 想请你求出，在经过上述操作后，$S$ 中**最长合法括号子序列**（不要求连续）在模 $998244353$ 意义下期望有多长。\n", "inputFormat": "输入第一行，为两个正整数 $N,K$，含义题面已给出。", "outputFormat": "输出共一行，一个非负整数，表示你所求得的答案对 $998244353$ 取模的结果。", "hint": "**样例解释1**\n\n最终括号序列只有 $3$ 种，`))`，`()`，`)(`。其对应的概率分别为 $\\frac{1}{2}$，$\\frac{1}{4}$，$\\frac{1}{4}$。\n\n它们对应的最长合法括号子序列长度分别为 $0,2,0$。所以最终答案为 $\\frac{1}{2}$，也即 $499122177$。\n\n**数据规模：**\n\n对于前 $5\\%$ 的数据，$N=1$；  \n另有 $5\\%$ 的数据，$N=2$；  \n另有 $5\\%$ 的数据，$N\\le 7$，$K\\le 5$；  \n另有 $15\\%$ 的数据，$N\\le 15$，$K\\le 500$；  \n另有 $ 15\\%$ 的数据，$N\\le 50$，$K\\le 50$；  \n另有 $ 15\\%$ 的数据，$N\\le 500$，$K\\le 100$；  \n对于全部的数据，保证 $1\\le N,K\\le 5000$。", "locale": "zh-CN"}}}
{"pid": "P6690", "type": "P", "difficulty": 7, "samples": [["1 997 603 648\n200 61\n", "1\n1 140787\n"], ["1 953 712 307\n534 750\n", "-1\n"], ["3 7 6 5\n3 4\n5 6\n4 6\n", "2\n2 5\n1 20\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2020", "原根", "洛谷原创", "Special Judge", "O2优化", "扩展欧几里德算法", "构造", "洛谷月赛", "大步小步算法 BSGS"], "title": "一次函数", "background": "", "description": "给定 $n$ 个一次函数 $f_i(x) = a_ix + b_i$，其中 $x$ 为形式幂级数的占位符。\n\n从这 $n$ 个中选出 $k$ 个 $g_i(x)$ （$1\\leq i \\leq k$），定义集合 $H$ 为 $g_i$ 的若干次幂的乘积模 $x^2$ 的值所构成的集合。即：\n\n$$H=\\left\\{\\prod_{i=1}^k g_i(x)^j\\bmod x^2\\middle|0 \\leq a, b < p \\right\\}$$\n\n其中 $j$ 是任意非负整数且对于每个 $i$ 可以有不同的 $j$。\n\n需要注意的是，$0\\cdot x+1$ 始终在集合 $H$ 中（而非 $0 \\cdot x + 0$），即使 $k = 0$ 也是如此。\n\n给定 $A, B$，求出所有满足 $Ax+B\\in H$ 的集合 $H$ 的 $k$ 的最小值。\n\n若不存在 $H$ 使得 $Ax+B\\in H$，输出 `-1`。\n\n所有运算均在模 $p$ 意义下进行。", "inputFormat": "第一行四个整数 $n, p, A, B$。\n\n接下来 $n$ 行，每行两个整数 $a_i, b_i$。", "outputFormat": "第一行一个整数 $k$，表示答案。\n\n若存在方案，接下来 $k$ 行，每行两个整数 $a, b$，需满足\n$$\\left(\\prod f_a(x)^b\\right)\\bmod x^2=Ax + B$$\n\n$a$ 的顺序可任意。", "hint": "**另有两组大样例与 checker，下载地址见附件。**\n\n要测试你某个测试点的答案，你需要在你本题目录下的命令行中执行：\n\n``<checker> <input‐file> <output‐file> <answer‐file> [<report‐file>]``\n\n其中：\n\n* ``<checker>`` 表示校验器可执行文件；\n* ``<input‐file>`` 表示该测试点的输入文件，如 ``func1.in``；\n* ``<output‐file>`` 表示该测试点你的答案，如 ``func1.out``；\n* ``<answer‐file>`` 表示该测试点的答案文件（只需要提供输出的第一行），如 ``func1.ans``；\n* ``<report‐file>`` 为可选参数，如果没有给定该参数，校验器将输出至终端；否则将输出至该文件，如 ``report1.txt``。\n\n对于所有数据，$2\\leq p\\leq 10^9$，保证 $p$ 为质数，$1\\leq n \\leq 5 \\times 10^3$，$0\\leq a_i, A < p$，$1\\leq b_i, B < p$。\n\n详细的数据限制及约定如下（留空表示和上述所有数据的约定相同）：\n\n| 子任务编号 | 分值 | $n$ | $p$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $=1$ | $\\leq 1000$ |  |\n| $2$ | $5$ | $\\leq 3$ | $=7$ |  |\n| $3$ | $15$ | $\\leq 100$ | $=31$ |  |\n| $4$ | $20$ | |  | $A=B=1$ |\n| $5$ | $25$ | $\\leq 20$ |  |  |\n| $6$ | $15$ | $\\leq 500$ |  |  |\n| $7$ | $15$ | |  |  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "一次函数", "background": "", "description": "给定 $n$ 个一次函数 $f_i(x) = a_ix + b_i$，其中 $x$ 为形式幂级数的占位符。\n\n从这 $n$ 个中选出 $k$ 个 $g_i(x)$ （$1\\leq i \\leq k$），定义集合 $H$ 为 $g_i$ 的若干次幂的乘积模 $x^2$ 的值所构成的集合。即：\n\n$$H=\\left\\{\\prod_{i=1}^k g_i(x)^j\\bmod x^2\\middle|0 \\leq a, b < p \\right\\}$$\n\n其中 $j$ 是任意非负整数且对于每个 $i$ 可以有不同的 $j$。\n\n需要注意的是，$0\\cdot x+1$ 始终在集合 $H$ 中（而非 $0 \\cdot x + 0$），即使 $k = 0$ 也是如此。\n\n给定 $A, B$，求出所有满足 $Ax+B\\in H$ 的集合 $H$ 的 $k$ 的最小值。\n\n若不存在 $H$ 使得 $Ax+B\\in H$，输出 `-1`。\n\n所有运算均在模 $p$ 意义下进行。", "inputFormat": "第一行四个整数 $n, p, A, B$。\n\n接下来 $n$ 行，每行两个整数 $a_i, b_i$。", "outputFormat": "第一行一个整数 $k$，表示答案。\n\n若存在方案，接下来 $k$ 行，每行两个整数 $a, b$，需满足\n$$\\left(\\prod f_a(x)^b\\right)\\bmod x^2=Ax + B$$\n\n$a$ 的顺序可任意。", "hint": "**另有两组大样例与 checker，下载地址见附件。**\n\n要测试你某个测试点的答案，你需要在你本题目录下的命令行中执行：\n\n``<checker> <input‐file> <output‐file> <answer‐file> [<report‐file>]``\n\n其中：\n\n* ``<checker>`` 表示校验器可执行文件；\n* ``<input‐file>`` 表示该测试点的输入文件，如 ``func1.in``；\n* ``<output‐file>`` 表示该测试点你的答案，如 ``func1.out``；\n* ``<answer‐file>`` 表示该测试点的答案文件（只需要提供输出的第一行），如 ``func1.ans``；\n* ``<report‐file>`` 为可选参数，如果没有给定该参数，校验器将输出至终端；否则将输出至该文件，如 ``report1.txt``。\n\n对于所有数据，$2\\leq p\\leq 10^9$，保证 $p$ 为质数，$1\\leq n \\leq 5 \\times 10^3$，$0\\leq a_i, A < p$，$1\\leq b_i, B < p$。\n\n详细的数据限制及约定如下（留空表示和上述所有数据的约定相同）：\n\n| 子任务编号 | 分值 | $n$ | $p$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $=1$ | $\\leq 1000$ |  |\n| $2$ | $5$ | $\\leq 3$ | $=7$ |  |\n| $3$ | $15$ | $\\leq 100$ | $=31$ |  |\n| $4$ | $20$ | |  | $A=B=1$ |\n| $5$ | $25$ | $\\leq 20$ |  |  |\n| $6$ | $15$ | $\\leq 500$ |  |  |\n| $7$ | $15$ | |  |  |", "locale": "zh-CN"}}}
{"pid": "P6691", "type": "P", "difficulty": 3, "samples": [["4\n2 1\n4 0\n1 1\n2 0", "2\n3\n1"], ["10\n4 1\n7 0\n2 0\n3 1\n7 1\n5 0\n9 1\n10 1\n8 0\n1 1", "No answer"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2020", "并查集", "O2优化", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "选择题", "background": "小 L 喜欢逻辑推理。\n\n一天，他在一本由英国哲士沃·协德编写的《我也不知道为什么要叫这个名字的一本有关逻辑学的书》中翻到了一道奇特的问题，但他并不会做。他知道你善于用程序解决问题，于是决定让你来帮助他完成这些问题。", "description": "这是一道有 $n$ 个选项的选择题，每个选项的内容都很独特。第 $i$ 个选项的内容的形式如下：\n\n+ 第 $a_i$ 个选项是正确/错误的\n\n小 L 认为这种题目的答案不一定是唯一的，所以他想问题这道题有多少种合法的答案（可以全部正确或全部错误）。他还想问你这么多答案中，正确选项最多和最少的答案分别有多少个正确选项。\n\n当然，如果这道题不存在合法的答案，你可以直接回答小 L `No answer`。", "inputFormat": "第一行有一个正整数 $n$，表示选项个数。\n\n接下来 $n$ 行，每行有两个整数 $a_i,opt_i$，描述一个选项。其中当 $opt_i=1$ 时，表示这个选项的内容为 **第 $a_i$ 个选项是正确的**；当 $opt_i=0$ 时，表示这个选项的内容为 **第 $a_i$ 个选项是错误的**。", "outputFormat": "如果没有答案满足这道选择题，输出`No answer`。\n\n否则输出三行，每行一个正整数，分别为合法答案数及正确选项最多和最少的答案分别有多少个正确选项。其中合法答案数要对 $998244353$ 取模。", "hint": "对于样例一，一共有下面 $2$ 种正确答案：\n\n+ 第 $1,2,3$ 个选项是正确的。\n+ 第 $4$ 个选项是正确的。\n\n其中正确选项最多的答案有 $3$ 个选项正确，正确选项最少的答案有 $1$ 个选项正确。\n\n### 数据范围\n对于 $10\\%$ 的数据，$n\\leq 10$。  \n对于 $30\\%$ 的数据，$n\\leq 100$。  \n对于 $60\\%$ 的数据，$n\\leq 10^3$。  \n对于 $100\\%$ 的数据，$n\\leq 10^6,1\\leq a_i\\leq n,i\\neq a_i,opt_i\\in\\{0,1\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "选择题", "background": "小 L 喜欢逻辑推理。\n\n一天，他在一本由英国哲士沃·协德编写的《我也不知道为什么要叫这个名字的一本有关逻辑学的书》中翻到了一道奇特的问题，但他并不会做。他知道你善于用程序解决问题，于是决定让你来帮助他完成这些问题。", "description": "这是一道有 $n$ 个选项的选择题，每个选项的内容都很独特。第 $i$ 个选项的内容的形式如下：\n\n+ 第 $a_i$ 个选项是正确/错误的\n\n小 L 认为这种题目的答案不一定是唯一的，所以他想问题这道题有多少种合法的答案（可以全部正确或全部错误）。他还想问你这么多答案中，正确选项最多和最少的答案分别有多少个正确选项。\n\n当然，如果这道题不存在合法的答案，你可以直接回答小 L `No answer`。", "inputFormat": "第一行有一个正整数 $n$，表示选项个数。\n\n接下来 $n$ 行，每行有两个整数 $a_i,opt_i$，描述一个选项。其中当 $opt_i=1$ 时，表示这个选项的内容为 **第 $a_i$ 个选项是正确的**；当 $opt_i=0$ 时，表示这个选项的内容为 **第 $a_i$ 个选项是错误的**。", "outputFormat": "如果没有答案满足这道选择题，输出`No answer`。\n\n否则输出三行，每行一个正整数，分别为合法答案数及正确选项最多和最少的答案分别有多少个正确选项。其中合法答案数要对 $998244353$ 取模。", "hint": "对于样例一，一共有下面 $2$ 种正确答案：\n\n+ 第 $1,2,3$ 个选项是正确的。\n+ 第 $4$ 个选项是正确的。\n\n其中正确选项最多的答案有 $3$ 个选项正确，正确选项最少的答案有 $1$ 个选项正确。\n\n### 数据范围\n对于 $10\\%$ 的数据，$n\\leq 10$。  \n对于 $30\\%$ 的数据，$n\\leq 100$。  \n对于 $60\\%$ 的数据，$n\\leq 10^3$。  \n对于 $100\\%$ 的数据，$n\\leq 10^6,1\\leq a_i\\leq n,i\\neq a_i,opt_i\\in\\{0,1\\}$。", "locale": "zh-CN"}}}
{"pid": "P6692", "type": "P", "difficulty": 4, "samples": [["3 3 2\n2 1\n3 3\n", "42"], ["9 8 8\n3 2\n4 6\n7 3\n9 5\n3 7\n2 2\n1 6\n6 4\n", "11552"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2020", "O2优化", "容斥原理"], "title": "出生点", "background": "小 L、小 W 和小 H 在一起van♂游戏。\n\n~~由于小 L 太菜了所以导致他一直在看着小 W 和小 H 打游戏。~~", "description": "这款游戏的地图可以抽象成一张有 $n$ 行 $m$ 列的网格图，网格图上有 $k$ 个障碍点，相邻两点间边长为 $1$。游戏开始时~~小 L~~、小 W 和小 H 会**各自**随机出生在一个点。当然，他们**不会出生在障碍点**。\n\n~~经常开局死的~~小 L 看着小 W 和小 H 每次在地图上汇合时经过的路径，很想知道他们每次出生后两个人之间的期望距离。（这里的距离指两点间[曼哈顿距离](https://www.luogu.com.cn/blog/xuxing/Distance-Algorithm)，即 $\\left|x_1-x_2\\right|+\\left|y_1-y_2\\right|$）\n\n由于小 L 可以非常容易算出有多少种出生点安排方案，所以你实际上**只需要告诉他所有情况中他们两人距离之和**。\n\n**注意**：小 W 出生在点 $A$，小 H 出生在点 $B$，跟小 W 出生在点 $B$，小 H 出生在点 $A$，这两种情况**视作同一种情况**。", "inputFormat": "第一行有三个整数 $n,m,k$，分别表示地图行数、列数以及障碍物点数。\n\n接下来有 $k$ 行，第 $i$ 行有两个正整数 $x_i,y_i$，表示第 $i$ 个障碍物的位置。", "outputFormat": "一个整数，表示**所有情况中小 W 和小 H 两人出生点距离之和**。\n\n由于小 L 十分无聊，所以他让你将答案对 $10^9+7$ 取模。", "hint": "对于样例一，地图样式如下（其中蓝点为障碍点，红点为可能的出生点）：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/3bq78rx7.png)\n\n+ 出生点为 $(1,1)$ 和 $(1,1)$，距离为 $0$。\n+ 出生点为 $(1,1)$ 和 $(1,2)$，距离为 $1$。\n+ 出生点为 $(1,1)$ 和 $(1,3)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(2,2)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(2,3)$，距离为 $3$。\n+ 出生点为 $(1,1)$ 和 $(3,1)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(3,2)$，距离为 $3$。\n+ 出生点为 $(1,2)$ 和 $(1,2)$，距离为 $0$。\n+ 出生点为 $(1,2)$ 和 $(1,3)$，距离为 $1$。\n+ 出生点为 $(1,2)$ 和 $(2,2)$，距离为 $1$。\n+ 出生点为 $(1,2)$ 和 $(2,3)$，距离为 $2$。\n+ 出生点为 $(1,2)$ 和 $(3,1)$，距离为 $3$。\n+ 出生点为 $(1,2)$ 和 $(3,2)$，距离为 $2$。\n+ 出生点为 $(1,3)$ 和 $(1,3)$，距离为 $0$。\n+ 出生点为 $(1,3)$ 和 $(2,2)$，距离为 $2$。\n+ 出生点为 $(1,3)$ 和 $(2,3)$，距离为 $1$。\n+ 出生点为 $(1,3)$ 和 $(3,1)$，距离为 $4$。\n+ 出生点为 $(1,3)$ 和 $(3,2)$，距离为 $3$。\n+ 出生点为 $(2,2)$ 和 $(2,2)$，距离为 $0$。\n+ 出生点为 $(2,2)$ 和 $(2,3)$，距离为 $1$。\n+ 出生点为 $(2,2)$ 和 $(3,1)$，距离为 $2$。\n+ 出生点为 $(2,2)$ 和 $(3,2)$，距离为 $1$。\n+ 出生点为 $(2,3)$ 和 $(2,3)$，距离为 $0$。\n+ 出生点为 $(2,3)$ 和 $(3,1)$，距离为 $3$。\n+ 出生点为 $(2,3)$ 和 $(3,2)$，距离为 $2$。\n+ 出生点为 $(3,1)$ 和 $(3,1)$，距离为 $0$。\n+ 出生点为 $(3,1)$ 和 $(3,2)$，距离为 $1$。\n+ 出生点为 $(3,2)$ 和 $(3,2)$，距离为 $0$。\n\n总和为 $42$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n+ Subtask 1( $10\\%$ )：$n,m\\leq 80$。\n+ Subtask 2( $20\\%$ )：$n,m\\leq 5000$。\n+ Subtask 3( $15\\%$ )：$k=0$。\n+ Subtask 4( $15\\%$ )：$m=1$。\n+ Subtask 5( $40\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^9,1\\leq x_i\\leq n,1\\leq y_i\\leq m,0\\leq k\\leq 5\\times 10^5,k<n\\times m$，**保证所有障碍点各不相同**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "出生点", "background": "小 L、小 W 和小 H 在一起van♂游戏。\n\n~~由于小 L 太菜了所以导致他一直在看着小 W 和小 H 打游戏。~~", "description": "这款游戏的地图可以抽象成一张有 $n$ 行 $m$ 列的网格图，网格图上有 $k$ 个障碍点，相邻两点间边长为 $1$。游戏开始时~~小 L~~、小 W 和小 H 会**各自**随机出生在一个点。当然，他们**不会出生在障碍点**。\n\n~~经常开局死的~~小 L 看着小 W 和小 H 每次在地图上汇合时经过的路径，很想知道他们每次出生后两个人之间的期望距离。（这里的距离指两点间[曼哈顿距离](https://www.luogu.com.cn/blog/xuxing/Distance-Algorithm)，即 $\\left|x_1-x_2\\right|+\\left|y_1-y_2\\right|$）\n\n由于小 L 可以非常容易算出有多少种出生点安排方案，所以你实际上**只需要告诉他所有情况中他们两人距离之和**。\n\n**注意**：小 W 出生在点 $A$，小 H 出生在点 $B$，跟小 W 出生在点 $B$，小 H 出生在点 $A$，这两种情况**视作同一种情况**。", "inputFormat": "第一行有三个整数 $n,m,k$，分别表示地图行数、列数以及障碍物点数。\n\n接下来有 $k$ 行，第 $i$ 行有两个正整数 $x_i,y_i$，表示第 $i$ 个障碍物的位置。", "outputFormat": "一个整数，表示**所有情况中小 W 和小 H 两人出生点距离之和**。\n\n由于小 L 十分无聊，所以他让你将答案对 $10^9+7$ 取模。", "hint": "对于样例一，地图样式如下（其中蓝点为障碍点，红点为可能的出生点）：  \n![](https://cdn.luogu.com.cn/upload/image_hosting/3bq78rx7.png)\n\n+ 出生点为 $(1,1)$ 和 $(1,1)$，距离为 $0$。\n+ 出生点为 $(1,1)$ 和 $(1,2)$，距离为 $1$。\n+ 出生点为 $(1,1)$ 和 $(1,3)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(2,2)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(2,3)$，距离为 $3$。\n+ 出生点为 $(1,1)$ 和 $(3,1)$，距离为 $2$。\n+ 出生点为 $(1,1)$ 和 $(3,2)$，距离为 $3$。\n+ 出生点为 $(1,2)$ 和 $(1,2)$，距离为 $0$。\n+ 出生点为 $(1,2)$ 和 $(1,3)$，距离为 $1$。\n+ 出生点为 $(1,2)$ 和 $(2,2)$，距离为 $1$。\n+ 出生点为 $(1,2)$ 和 $(2,3)$，距离为 $2$。\n+ 出生点为 $(1,2)$ 和 $(3,1)$，距离为 $3$。\n+ 出生点为 $(1,2)$ 和 $(3,2)$，距离为 $2$。\n+ 出生点为 $(1,3)$ 和 $(1,3)$，距离为 $0$。\n+ 出生点为 $(1,3)$ 和 $(2,2)$，距离为 $2$。\n+ 出生点为 $(1,3)$ 和 $(2,3)$，距离为 $1$。\n+ 出生点为 $(1,3)$ 和 $(3,1)$，距离为 $4$。\n+ 出生点为 $(1,3)$ 和 $(3,2)$，距离为 $3$。\n+ 出生点为 $(2,2)$ 和 $(2,2)$，距离为 $0$。\n+ 出生点为 $(2,2)$ 和 $(2,3)$，距离为 $1$。\n+ 出生点为 $(2,2)$ 和 $(3,1)$，距离为 $2$。\n+ 出生点为 $(2,2)$ 和 $(3,2)$，距离为 $1$。\n+ 出生点为 $(2,3)$ 和 $(2,3)$，距离为 $0$。\n+ 出生点为 $(2,3)$ 和 $(3,1)$，距离为 $3$。\n+ 出生点为 $(2,3)$ 和 $(3,2)$，距离为 $2$。\n+ 出生点为 $(3,1)$ 和 $(3,1)$，距离为 $0$。\n+ 出生点为 $(3,1)$ 和 $(3,2)$，距离为 $1$。\n+ 出生点为 $(3,2)$ 和 $(3,2)$，距离为 $0$。\n\n总和为 $42$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n+ Subtask 1( $10\\%$ )：$n,m\\leq 80$。\n+ Subtask 2( $20\\%$ )：$n,m\\leq 5000$。\n+ Subtask 3( $15\\%$ )：$k=0$。\n+ Subtask 4( $15\\%$ )：$m=1$。\n+ Subtask 5( $40\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^9,1\\leq x_i\\leq n,1\\leq y_i\\leq m,0\\leq k\\leq 5\\times 10^5,k<n\\times m$，**保证所有障碍点各不相同**。", "locale": "zh-CN"}}}
{"pid": "P6693", "type": "P", "difficulty": 5, "samples": [["3 4\nabc\nbacb\n", "74"], ["7 9\nadcbbde\nbdaegbcba\n", "2128"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2020", "O2优化", "前缀和"], "title": "谷歌翻(sheng)译(cao)机", "background": "小 L 最近沉迷用谷歌生草机生草一些奇奇怪怪的东西。\n\n小 L 在生草出了各式各样的作品后便开始考虑这样一个问题。", "description": "**注：为了方便描述，下文所有字符串起始位置都为 $1$，即都从 $1$ 开始标号。**\n\n小 L 将每次生草前的原文和生草后的结果看作两个**仅由小写字母组成**的两个字符串 $A$ 和 $B$。\n\n我们按如下方式定义「分割数列」和「分割串」：\n\n- 对于一个长度为 $n$ 的字符串，定义它的一条「分割数列」为：存在长度为 $k+2$ 的数列 $p$，使得 $0=p_0<p_1<p_2<...<p_k<p_{k+1}=n+1$。对于一条「分割数列」，定义其「分割串」为 $p_i+1$ 到 $p_{i+1}-1$ 之间字符构成的子串（$i \\in[0,k]$，可以为空串）。显然，对于一条长度为 $k+2$ 的分割数列，一共有 $k+1$ 个分割串。\n\n- 对于同一个字符串，两条分割数列（$p$ 和 $q$）不同**当且仅当两条数列长度不同（$k_1\\neq k_2$）**，或**存在 $i$ 使得 $p_i\\neq q_i$**。\n\n不同人对于同样的原文和结果，他们的理解方式都是不同的。我们按如下方式定义一种理解方式：\n\n- 对于字符串 $A$ 和 $B$，我们为这两个字符串各找一条分割数列（$p$ 和 $q$），这两个分割数列满足以下要求：\n1. 两个分割数列长度相等（$k_1=k_2$）。\n1. 对于任意 $i$，有 $A[p_i]=B[q_i]$，即 **$A$ 第 $p_i$ 个位置的字符与 $B$ 第 $q_i$ 个位置的字符相同**。\n\n- 定义这种理解方式的「生草程度」为**此时两个字符串的所有分割串长度的平方和**，即 $\\sum\\limits_{i=0}^{k_1}(p_{i+1}-p_i-1)^2+\\sum\\limits_{i=0}^{k_2}(q_{i+1}-q_i-1)^2$。\n\n- 两种理解方式不同**当且仅当**两种理解方式的 $p$ 不同，或两种理解方式的 $q$ 不同。\n\n小 L 想要知道所有理解方式的生草程度之和的结果。由于他不喜欢 $10^9+7$ 这个数，他不希望你告诉他的结果会是这个数，所以你要将结果对 $10^9+7$ 取模。", "inputFormat": "第一行有两个正整数 $n,m$ 分别为 $A$ 和 $B$ 的长度。\n\n接下来一行有一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n接下来一行有一个长度为 $m$ 的字符串，表示字符串 $B$。", "outputFormat": "一行，一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "对于样例一，一共有以下理解方式：\n+ $p=\\{0,4\\},q=\\{0,5\\}$，生草程度为 $25$。\n+ $p=\\{0,1,4\\},q=\\{0,2,5\\}$，生草程度为 $9$。\n+ $p=\\{0,2,4\\},q=\\{0,1,5\\}$，生草程度为 $11$。\n+ $p=\\{0,2,4\\},q=\\{0,4,5\\}$，生草程度为 $11$。\n+ $p=\\{0,3,4\\},q=\\{0,3,5\\}$，生草程度为 $9$。\n+ $p=\\{0,1,2,4\\},q=\\{0,2,4,5\\}$，生草程度为 $3$。\n+ $p=\\{0,1,3,4\\},q=\\{0,2,3,5\\}$，生草程度为 $3$。\n+ $p=\\{0,2,3,4\\},q=\\{0,1,3,5\\}$，生草程度为 $3$。\n\n总生草程度为 $74$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1( $20\\%$ )：$n,m\\leq 50$。\n- Subtask 2( $30\\%$ )：$n,m\\leq 200$。\n- Subtask 3( $50\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$n,m\\leq 3000$，$A$ 和 $B$ **仅包含小写字母**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "谷歌翻(sheng)译(cao)机", "background": "小 L 最近沉迷用谷歌生草机生草一些奇奇怪怪的东西。\n\n小 L 在生草出了各式各样的作品后便开始考虑这样一个问题。", "description": "**注：为了方便描述，下文所有字符串起始位置都为 $1$，即都从 $1$ 开始标号。**\n\n小 L 将每次生草前的原文和生草后的结果看作两个**仅由小写字母组成**的两个字符串 $A$ 和 $B$。\n\n我们按如下方式定义「分割数列」和「分割串」：\n\n- 对于一个长度为 $n$ 的字符串，定义它的一条「分割数列」为：存在长度为 $k+2$ 的数列 $p$，使得 $0=p_0<p_1<p_2<...<p_k<p_{k+1}=n+1$。对于一条「分割数列」，定义其「分割串」为 $p_i+1$ 到 $p_{i+1}-1$ 之间字符构成的子串（$i \\in[0,k]$，可以为空串）。显然，对于一条长度为 $k+2$ 的分割数列，一共有 $k+1$ 个分割串。\n\n- 对于同一个字符串，两条分割数列（$p$ 和 $q$）不同**当且仅当两条数列长度不同（$k_1\\neq k_2$）**，或**存在 $i$ 使得 $p_i\\neq q_i$**。\n\n不同人对于同样的原文和结果，他们的理解方式都是不同的。我们按如下方式定义一种理解方式：\n\n- 对于字符串 $A$ 和 $B$，我们为这两个字符串各找一条分割数列（$p$ 和 $q$），这两个分割数列满足以下要求：\n1. 两个分割数列长度相等（$k_1=k_2$）。\n1. 对于任意 $i$，有 $A[p_i]=B[q_i]$，即 **$A$ 第 $p_i$ 个位置的字符与 $B$ 第 $q_i$ 个位置的字符相同**。\n\n- 定义这种理解方式的「生草程度」为**此时两个字符串的所有分割串长度的平方和**，即 $\\sum\\limits_{i=0}^{k_1}(p_{i+1}-p_i-1)^2+\\sum\\limits_{i=0}^{k_2}(q_{i+1}-q_i-1)^2$。\n\n- 两种理解方式不同**当且仅当**两种理解方式的 $p$ 不同，或两种理解方式的 $q$ 不同。\n\n小 L 想要知道所有理解方式的生草程度之和的结果。由于他不喜欢 $10^9+7$ 这个数，他不希望你告诉他的结果会是这个数，所以你要将结果对 $10^9+7$ 取模。", "inputFormat": "第一行有两个正整数 $n,m$ 分别为 $A$ 和 $B$ 的长度。\n\n接下来一行有一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n接下来一行有一个长度为 $m$ 的字符串，表示字符串 $B$。", "outputFormat": "一行，一个整数，表示答案对 $10^9+7$ 取模的结果。", "hint": "对于样例一，一共有以下理解方式：\n+ $p=\\{0,4\\},q=\\{0,5\\}$，生草程度为 $25$。\n+ $p=\\{0,1,4\\},q=\\{0,2,5\\}$，生草程度为 $9$。\n+ $p=\\{0,2,4\\},q=\\{0,1,5\\}$，生草程度为 $11$。\n+ $p=\\{0,2,4\\},q=\\{0,4,5\\}$，生草程度为 $11$。\n+ $p=\\{0,3,4\\},q=\\{0,3,5\\}$，生草程度为 $9$。\n+ $p=\\{0,1,2,4\\},q=\\{0,2,4,5\\}$，生草程度为 $3$。\n+ $p=\\{0,1,3,4\\},q=\\{0,2,3,5\\}$，生草程度为 $3$。\n+ $p=\\{0,2,3,4\\},q=\\{0,1,3,5\\}$，生草程度为 $3$。\n\n总生草程度为 $74$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1( $20\\%$ )：$n,m\\leq 50$。\n- Subtask 2( $30\\%$ )：$n,m\\leq 200$。\n- Subtask 3( $50\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$n,m\\leq 3000$，$A$ 和 $B$ **仅包含小写字母**。", "locale": "zh-CN"}}}
{"pid": "P6694", "type": "P", "difficulty": 6, "samples": [["4\n1 1 1 1", "665496238"], ["13\n1 1 4 5 1 4 1 9 1 9 8 1 0", "748867567"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2020", "O2优化", "生成函数", "快速数论变换 NTT"], "title": "强迫症", "background": "小 L 是一个严重的强迫症患者。\n\n由于他严重的强迫症，所以他画图时总是要把点画在一个圆上。", "description": "一天，他问了小 H 和小 W 这样一个问题：\n\n如果在一个圆上有 $n$ 个不同的点，依次标号为 $1$ 到 $n$，有多少种方案能把它们连成一棵树？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果**连边不能相交**呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果把「树」换成「图」呢呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果给每个点一个权值 $a_i$，连接 $(i,j)$ 的边权值为 $a_i\\times a_j$，求**满足上面**的图的**期望所有边权值之和**呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L 见自己辛苦做了许久都没写出的题目被 dalao 轻松秒杀后十分郁闷。为了安慰他，你需要帮他做出这个问题。\n\n**注意**：\n1. 两条边在端点处**不视作相交**。\n1. **没有边的图（即只有 $n$ 个点，之间没有边相连）也合法**\n1. 点**按顺时针从 $1$ 到 $n$** 编号。\n1. 图中**不能有自环和重边**", "inputFormat": "第一行一个正整数 $n$，意义如上。\n\n接下来一行 $n$ 个非负整数，第 $i$ 个数为 $a_i$，表示第 $i$ 个点的点权。", "outputFormat": "一个正整数，表示结果。答案对 $998244353$ 取模。", "hint": "对于样例一，全部 $64$ 张图如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/zfa8hs0v.png)\n\n其中左侧 $48$ 张图合法，右侧 $16$ 张图不合法，所有边的权值均为 $1$。\n\n期望边权和为 $\\dfrac{8}{3}$，模 $998244353$ 意义下结果为 $665496238$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1( $10\\%$ )：$n\\leq 6$。\n- Subtask 2( $30\\%$ )：$n\\leq 3000$。\n- Subtask 3( $60\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^5,0\\leq a_i\\leq10^6$。\n\nSubtask 1 和 Subtask 2 时限 $1s$，Subtask 3 时限 $2s$。\n\n------------\n如果你不知道如何对一个有理数取模，请自行百度「乘法逆元」", "locale": "zh-CN", "translations": {"zh-CN": {"title": "强迫症", "background": "小 L 是一个严重的强迫症患者。\n\n由于他严重的强迫症，所以他画图时总是要把点画在一个圆上。", "description": "一天，他问了小 H 和小 W 这样一个问题：\n\n如果在一个圆上有 $n$ 个不同的点，依次标号为 $1$ 到 $n$，有多少种方案能把它们连成一棵树？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果**连边不能相交**呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果把「树」换成「图」呢呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L：那如果给每个点一个权值 $a_i$，连接 $(i,j)$ 的边权值为 $a_i\\times a_j$，求**满足上面**的图的**期望所有边权值之和**呢？\n\n小 H & 小 W：这不是sb题吗？\n\n小 L 见自己辛苦做了许久都没写出的题目被 dalao 轻松秒杀后十分郁闷。为了安慰他，你需要帮他做出这个问题。\n\n**注意**：\n1. 两条边在端点处**不视作相交**。\n1. **没有边的图（即只有 $n$ 个点，之间没有边相连）也合法**\n1. 点**按顺时针从 $1$ 到 $n$** 编号。\n1. 图中**不能有自环和重边**", "inputFormat": "第一行一个正整数 $n$，意义如上。\n\n接下来一行 $n$ 个非负整数，第 $i$ 个数为 $a_i$，表示第 $i$ 个点的点权。", "outputFormat": "一个正整数，表示结果。答案对 $998244353$ 取模。", "hint": "对于样例一，全部 $64$ 张图如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/zfa8hs0v.png)\n\n其中左侧 $48$ 张图合法，右侧 $16$ 张图不合法，所有边的权值均为 $1$。\n\n期望边权和为 $\\dfrac{8}{3}$，模 $998244353$ 意义下结果为 $665496238$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1( $10\\%$ )：$n\\leq 6$。\n- Subtask 2( $30\\%$ )：$n\\leq 3000$。\n- Subtask 3( $60\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\leq n\\leq 10^5,0\\leq a_i\\leq10^6$。\n\nSubtask 1 和 Subtask 2 时限 $1s$，Subtask 3 时限 $2s$。\n\n------------\n如果你不知道如何对一个有理数取模，请自行百度「乘法逆元」", "locale": "zh-CN"}}}
{"pid": "P6695", "type": "P", "difficulty": 7, "samples": [["3 4 2\nabc\nbacb\n", "74"], ["7 8 5\nccbbacb\nbbbdadba", "337322"], ["3 4 1000000\nabc\nbacb\n", "424285944"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": [], "title": "谷歌翻(sheng)译(cao)机（加强版）", "background": "本题由@[wolfind](https://www.luogu.com.cn/user/104593)提供。\n\n[原题链接](https://www.luogu.com.cn/problem/P6693)（注意原题与加强版**有且仅有**`理解方式`中的**式子不同**、**模数不同**、**数据范围不同**）。", "description": "**注：为了方便描述，下文所有字符串起始位置都为 $1$，即都从 $1$ 开始标号。**\n\n小 L 将每次生草前的原文和生草后的结果看作两个**仅由小写字母组成**的两个字符串 $A$ 和 $B$。\n\n我们按如下方式定义「分割数列」和「分割串」：\n\n- 对于一个长度为 $n$ 的字符串，定义它的一条「分割数列」为：存在长度为 $k+2$ 的数列 $p$，使得 $0=p_0<p_1<p_2<...<p_k<p_{k+1}=n+1$。对于一条「分割数列」，定义其「分割串」为 $p_i+1$ 到 $p_{i+1}-1$ 之间字符构成的子串（$i \\in[0,k]$）（可以为空串）。显然，对于一条长度为 $k+2$ 的分割数列，一共有 $k+1$ 个分割串。\n\n- 对于同一个字符串，两条分割数列（$p$ 和 $q$）不同**当且仅当两条数列长度不同（$k_1\\neq k_2$）**，或**存在 $i$ 使得 $p_i\\neq q_i$**。\n\n不同人对于同样的原文和结果，他们的理解方式都是不同的。我们按如下方式定义一种理解方式：\n\n- 对于字符串 $A$ 和 $B$，我们为这两个字符串各找一条分割数列（$p$ 和 $q$），这两个分割数列满足以下要求：\n1. 两个分割数列长度相等（$k_1=k_2$）。\n1. 对于任意 $i$，有 $A[p_i]=B[q_i]$，即 **$A$ 第 $p_i$ 个位置的字符与 $B$ 第 $q_i$ 个位置的字符相同**。\n\n- 定义这种理解方式的「生草程度」为**此时两个字符串的所有分割串长度的 $t$ 次方和**，即 $\\sum\\limits_{i=0}^{k_1}(p_{i+1}-p_i-1)^t+\\sum\\limits_{i=0}^{k_2}(q_{i+1}-q_i-1)^t$。\n\n- 两种理解方式不同**当且仅当**两种理解方式的 $p$ 不同，或两种理解方式的 $q$ 不同。\n\n小 L 想要知道所有理解方式的生草程度之和的结果。由于他（也）不喜欢 $998244353$ 这个数，他不希望你告诉他的结果会是这个数，所以你要将结果对 $998244353$ 取模。", "inputFormat": "第一行有三个正整数 $n,m,t$。\n\n接下来一行有一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n接下来一行有一个长度为 $m$ 的字符串，表示字符串 $B$。", "outputFormat": "一行，一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "对于样例一，一共有以下理解方式：\n+ $p=\\{0,4\\},q=\\{0,5\\}$，生草程度为 $25$。\n+ $p=\\{0,1,4\\},q=\\{0,2,5\\}$，生草程度为 $9$。\n+ $p=\\{0,2,4\\},q=\\{0,1,5\\}$，生草程度为 $11$。\n+ $p=\\{0,2,4\\},q=\\{0,4,5\\}$，生草程度为 $11$。\n+ $p=\\{0,3,4\\},q=\\{0,3,5\\}$，生草程度为 $9$。\n+ $p=\\{0,1,2,4\\},q=\\{0,2,4,5\\}$，生草程度为 $3$。\n+ $p=\\{0,1,3,4\\},q=\\{0,2,3,5\\}$，生草程度为 $3$。\n+ $p=\\{0,2,3,4\\},q=\\{0,1,3,5\\}$，生草程度为 $3$。\n\n总生草程度为 $74$。\n\n### 数据范围\n\n「本题采用捆绑测试」\n\n- Subtask 1( $20\\%$ )：$n,m\\leq 50,t\\leq 2$。\n- Subtask 2( $30\\%$ )：$n,m\\leq 200,t\\leq 2$。\n- Subtask 3( $20\\%$ )：$t\\leq 10$。\n- Subtask 4( $30\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$n,m\\leq 1000,t\\leq 1000000$，$A$ 和 $B$ **仅包含小写字母**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "谷歌翻(sheng)译(cao)机（加强版）", "background": "本题由@[wolfind](https://www.luogu.com.cn/user/104593)提供。\n\n[原题链接](https://www.luogu.com.cn/problem/P6693)（注意原题与加强版**有且仅有**`理解方式`中的**式子不同**、**模数不同**、**数据范围不同**）。", "description": "**注：为了方便描述，下文所有字符串起始位置都为 $1$，即都从 $1$ 开始标号。**\n\n小 L 将每次生草前的原文和生草后的结果看作两个**仅由小写字母组成**的两个字符串 $A$ 和 $B$。\n\n我们按如下方式定义「分割数列」和「分割串」：\n\n- 对于一个长度为 $n$ 的字符串，定义它的一条「分割数列」为：存在长度为 $k+2$ 的数列 $p$，使得 $0=p_0<p_1<p_2<...<p_k<p_{k+1}=n+1$。对于一条「分割数列」，定义其「分割串」为 $p_i+1$ 到 $p_{i+1}-1$ 之间字符构成的子串（$i \\in[0,k]$）（可以为空串）。显然，对于一条长度为 $k+2$ 的分割数列，一共有 $k+1$ 个分割串。\n\n- 对于同一个字符串，两条分割数列（$p$ 和 $q$）不同**当且仅当两条数列长度不同（$k_1\\neq k_2$）**，或**存在 $i$ 使得 $p_i\\neq q_i$**。\n\n不同人对于同样的原文和结果，他们的理解方式都是不同的。我们按如下方式定义一种理解方式：\n\n- 对于字符串 $A$ 和 $B$，我们为这两个字符串各找一条分割数列（$p$ 和 $q$），这两个分割数列满足以下要求：\n1. 两个分割数列长度相等（$k_1=k_2$）。\n1. 对于任意 $i$，有 $A[p_i]=B[q_i]$，即 **$A$ 第 $p_i$ 个位置的字符与 $B$ 第 $q_i$ 个位置的字符相同**。\n\n- 定义这种理解方式的「生草程度」为**此时两个字符串的所有分割串长度的 $t$ 次方和**，即 $\\sum\\limits_{i=0}^{k_1}(p_{i+1}-p_i-1)^t+\\sum\\limits_{i=0}^{k_2}(q_{i+1}-q_i-1)^t$。\n\n- 两种理解方式不同**当且仅当**两种理解方式的 $p$ 不同，或两种理解方式的 $q$ 不同。\n\n小 L 想要知道所有理解方式的生草程度之和的结果。由于他（也）不喜欢 $998244353$ 这个数，他不希望你告诉他的结果会是这个数，所以你要将结果对 $998244353$ 取模。", "inputFormat": "第一行有三个正整数 $n,m,t$。\n\n接下来一行有一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n接下来一行有一个长度为 $m$ 的字符串，表示字符串 $B$。", "outputFormat": "一行，一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "对于样例一，一共有以下理解方式：\n+ $p=\\{0,4\\},q=\\{0,5\\}$，生草程度为 $25$。\n+ $p=\\{0,1,4\\},q=\\{0,2,5\\}$，生草程度为 $9$。\n+ $p=\\{0,2,4\\},q=\\{0,1,5\\}$，生草程度为 $11$。\n+ $p=\\{0,2,4\\},q=\\{0,4,5\\}$，生草程度为 $11$。\n+ $p=\\{0,3,4\\},q=\\{0,3,5\\}$，生草程度为 $9$。\n+ $p=\\{0,1,2,4\\},q=\\{0,2,4,5\\}$，生草程度为 $3$。\n+ $p=\\{0,1,3,4\\},q=\\{0,2,3,5\\}$，生草程度为 $3$。\n+ $p=\\{0,2,3,4\\},q=\\{0,1,3,5\\}$，生草程度为 $3$。\n\n总生草程度为 $74$。\n\n### 数据范围\n\n「本题采用捆绑测试」\n\n- Subtask 1( $20\\%$ )：$n,m\\leq 50,t\\leq 2$。\n- Subtask 2( $30\\%$ )：$n,m\\leq 200,t\\leq 2$。\n- Subtask 3( $20\\%$ )：$t\\leq 10$。\n- Subtask 4( $30\\%$ )：无特殊限制。\n\n对于 $100\\%$ 的数据，$n,m\\leq 1000,t\\leq 1000000$，$A$ 和 $B$ **仅包含小写字母**。", "locale": "zh-CN"}}}
{"pid": "P6696", "type": "P", "difficulty": 4, "samples": [["4 4\n1 2 1\n2 3 2\n1 3 2\n3 4 1", "YES\n0.5 0.5 1.5 -0.5\n"], ["2 1\n1 2 1\n", "YES\n0.3 0.7"], ["3 2\n1 2 2\n2 3 2\n", "YES\n0 2 0"], ["3 4\n1 2 2\n2 2 1\n2 1 1\n1 2 2\n", "NO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2020] 图 (Day2)", "background": "", "description": "你有一个无向图，每条边都有一种颜色：红或者黑。\n\n你要做的就是为每个节点配一个实数点权，使得：\n\n- 对于每条黑色边，两个端点的点权之和为 $1$\n- 对于每条红色边，两个端点的点权之和为 $2$\n- 所有点权的绝对值之和是最小的\n\n求一种点权的分配方案。", "inputFormat": "第一行两个整数 $N,M$ 代表点数和边数。     \n所有点的编号为 $1$ 到 $N$。         \n接下来 $M$ 行每行三个整数 $a,b,c$ 描述一条边端点为 $a$ 和 $b$，如果 $c$ 是 $1$ 那么这条边是黑色边，如果 $c$ 是 $2$ 那么这条边是红色边。", "outputFormat": "如果有解，首先第一行输出 `YES`，然后第二行 $N$ 个整数代表可能的一组点权。       \n多组解输出任意一组即可。        \n如果无解，一行一个字符串 `NO`。", "hint": "#### 评测方式\n\n您的输出被评判为正确，当且仅当：\n\n- 每条边所连两点的点权和与该边要求的点权间的误差不超过 $10^{-6}$。\n- 所有点权的绝对值之和与标准答案误差不超过 $10^{-6}$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N \\le 5$，$M \\le 14$。     \n- Subtask 2（12 pts）：$N \\le 100$。\n- Subtask 3（17 pts）：$N \\le 1000$。\n- Subtask 4（24 pts）：$N \\le 10^4$。\n- Subtask 5（42 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$0 \\le M \\le 2 \\times 10^5$。\n\n**本题使用 Special Judge。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2020] 图 (Day2)", "background": "", "description": "你有一个无向图，每条边都有一种颜色：红或者黑。\n\n你要做的就是为每个节点配一个实数点权，使得：\n\n- 对于每条黑色边，两个端点的点权之和为 $1$\n- 对于每条红色边，两个端点的点权之和为 $2$\n- 所有点权的绝对值之和是最小的\n\n求一种点权的分配方案。", "inputFormat": "第一行两个整数 $N,M$ 代表点数和边数。     \n所有点的编号为 $1$ 到 $N$。         \n接下来 $M$ 行每行三个整数 $a,b,c$ 描述一条边端点为 $a$ 和 $b$，如果 $c$ 是 $1$ 那么这条边是黑色边，如果 $c$ 是 $2$ 那么这条边是红色边。", "outputFormat": "如果有解，首先第一行输出 `YES`，然后第二行 $N$ 个整数代表可能的一组点权。       \n多组解输出任意一组即可。        \n如果无解，一行一个字符串 `NO`。", "hint": "#### 评测方式\n\n您的输出被评判为正确，当且仅当：\n\n- 每条边所连两点的点权和与该边要求的点权间的误差不超过 $10^{-6}$。\n- 所有点权的绝对值之和与标准答案误差不超过 $10^{-6}$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$N \\le 5$，$M \\le 14$。     \n- Subtask 2（12 pts）：$N \\le 100$。\n- Subtask 3（17 pts）：$N \\le 1000$。\n- Subtask 4（24 pts）：$N \\le 10^4$。\n- Subtask 5（42 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$0 \\le M \\le 2 \\times 10^5$。\n\n**本题使用 Special Judge。**", "locale": "zh-CN"}}}
{"pid": "P6697", "type": "P", "difficulty": 6, "samples": [["4\n1 2\n2 3\n3 4", "4 8\n2 1 4 3\n4 3 2 1"], ["7\n4 2\n5 7\n3 4\n6 3\n1 3\n4 5", "8 18\n6 4 1 2 7 3 5\n7 3 4 1 2 5 6"]], "limits": {"time": [750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2020] 村庄 (Day2)", "background": "# 请用 C++14/C++17 提交以避免不必要的 CE", "description": "村庄有 $N$ 个房子，之间有 $N-1$ 条道路连接，每条道路长度为 $1$。\n\n在最开始，第 $i$ 个村民就在第 $i$ 号房子里，房子从 $1$ 到 $N$ 编号。\n\n有一天，村民们突然突发奇想，想搬到别的房子中，村民们希望，在搬迁过后，不存在一位村民住在他原来居住的房子中。\n\n求所有村民在新旧房屋之间的最小总距离值和最大总距离值。", "inputFormat": "第一行一个整数 $N$ 代表房子数。     \n接下来 $N-1$ 行每行两个整数 $a,b$ 代表一条道路连接 $a$ 号房子和 $b$ 号房子。", "outputFormat": "第一行两个整数代表所有村民在新旧房屋之间的最小总距离值和最大总距离值。  \n第二行 $N$ 个整数，给出一种达成最小总距离和的方案。其中第 $i$ 个整数 $v_i$ 代表第 $i$ 个村民要从 $i$ 号房子迁移到 $v_i$ 号房子。  \n第三行 $N$ 个整数，给出一种达成最大总距离和的方案。输出方式和上一行相同。  \n要保证 $v_i\\ne i$。     \n如果有多组解，输出任意一组合法方案即可。", "hint": "#### 评分方式\n\n本题分为两个任务：\n\n- 求解最小距离和，并给出一种相应的合法方案；\n- 求解最大距离和，并给出一种相应的合法方案；\n\n每成功完成一个任务，您就可以获得该测试点 $50\\%$ 的分数。\n\n您在一个子任务的得分，等于你在该子任务所有测试点的最低得分。\n\n请注意，即使您不会求解某个子任务，也请按照要求的输出格式进行输出，否则 checker 将无法正确评分。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（12 pts）：$N \\le 10$。\n- Subtask 2（38 pts）：$N \\le 1000$。\n- Subtask 3（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le a,b \\le N$。\n\n**本题使用 Special Judge。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2020] 村庄 (Day2)", "background": "# 请用 C++14/C++17 提交以避免不必要的 CE", "description": "村庄有 $N$ 个房子，之间有 $N-1$ 条道路连接，每条道路长度为 $1$。\n\n在最开始，第 $i$ 个村民就在第 $i$ 号房子里，房子从 $1$ 到 $N$ 编号。\n\n有一天，村民们突然突发奇想，想搬到别的房子中，村民们希望，在搬迁过后，不存在一位村民住在他原来居住的房子中。\n\n求所有村民在新旧房屋之间的最小总距离值和最大总距离值。", "inputFormat": "第一行一个整数 $N$ 代表房子数。     \n接下来 $N-1$ 行每行两个整数 $a,b$ 代表一条道路连接 $a$ 号房子和 $b$ 号房子。", "outputFormat": "第一行两个整数代表所有村民在新旧房屋之间的最小总距离值和最大总距离值。  \n第二行 $N$ 个整数，给出一种达成最小总距离和的方案。其中第 $i$ 个整数 $v_i$ 代表第 $i$ 个村民要从 $i$ 号房子迁移到 $v_i$ 号房子。  \n第三行 $N$ 个整数，给出一种达成最大总距离和的方案。输出方式和上一行相同。  \n要保证 $v_i\\ne i$。     \n如果有多组解，输出任意一组合法方案即可。", "hint": "#### 评分方式\n\n本题分为两个任务：\n\n- 求解最小距离和，并给出一种相应的合法方案；\n- 求解最大距离和，并给出一种相应的合法方案；\n\n每成功完成一个任务，您就可以获得该测试点 $50\\%$ 的分数。\n\n您在一个子任务的得分，等于你在该子任务所有测试点的最低得分。\n\n请注意，即使您不会求解某个子任务，也请按照要求的输出格式进行输出，否则 checker 将无法正确评分。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（12 pts）：$N \\le 10$。\n- Subtask 2（38 pts）：$N \\le 1000$。\n- Subtask 3（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le a,b \\le N$。\n\n**本题使用 Special Judge。**", "locale": "zh-CN"}}}
{"pid": "P6698", "type": "P", "difficulty": 7, "samples": [["6 6 2\n2 2 0 1\n3 3 2 0 0\n3 2 1 3\n4 4 0 3 1 2\n5 2 2 1\n5 1 5\n2 1 1\n5 0 0 1 0 0", "NO 2\nNO 4\nNO 9\nYES"]], "limits": {"time": [750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750, 750], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "O2优化", "BalticOI（波罗的海）"], "title": "[BalticOI 2020] 病毒 (Day2)", "background": "", "description": "给定一种病毒，为了方便，我们用 $0$ 到 $G-1$ 的整数描述他的基因序列。\n\n现在这个病毒可以进行变异，有一些变异规则，每个变异规则可以让基因序列上的某个数变成某个片段，如果用变异规则让基因序列变成了全部为 $0$ 和 $1$ 的序列，那么这个病毒就变异完成了。\n\n病毒可以通过抗体进行检测，比如 $01011$ 就可以检测到 $0101110$，但不能检测到 $110110$。\n\n对于从 $2$ 到 $G-1$ 中的基因，科学家想知道，是否能通过任意一组给定的抗体检测到这个基因变异形成的其他所有基因，不能的话，那么求不能检测到的基因中的最短长度。", "inputFormat": "第一行三个整数 $G,N,M$ 代表基因数，变异规则数和抗体数。        \n接下来 $N$ 行每行首先两个整数 $a,k$，然后接着 $k$ 个整数 $b_i$，代表 $a$ 可以通过这个变异规则变为 $b_1,b_2,\\cdots,b_k$ 这个片段，保证 $2$ 和 $G-1$ 都至少在每个规则中的 $a$ 中出现一次。       \n接下来 $M$ 行每行首先一个整数 $l$ 代表抗体长度，接下来 $l$ 个整数 $c_i$ 描述这个抗体。", "outputFormat": "$G-2$ 行第 $i$ 行代表 $i$ 基因以及其所有变异到的基因是否都可以被任意一组抗体检测到，如果可以，输出一个字符串 `YES`，如果不可以，首先一个字符串 `NO`，接下来一个整数代表不能检测到的基因中的最短长度。保证对于所有数据，该值小于 $2^{63}$。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$M=0$。\n- Subtask 2（14 pts）：$N = G-2$。\n- Subtask 3（25 pts）：$M=1$。\n- Subtask 4（32 pts）：$\\sum l \\le 10$。\n- Subtask 5（18 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$G > 2$，$N \\ge G-2$，$M \\ge 0$。$2 \\le a <G$，$k \\ge 1$，$0 \\le b_i<G$，$\\sum k \\le 100$，$l \\ge 1$，$0 \\le c_i \\le 1$，$\\sum l\\le 50$。\n\n**本题强制 $O2$ 优化。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2020] 病毒 (Day2)", "background": "", "description": "给定一种病毒，为了方便，我们用 $0$ 到 $G-1$ 的整数描述他的基因序列。\n\n现在这个病毒可以进行变异，有一些变异规则，每个变异规则可以让基因序列上的某个数变成某个片段，如果用变异规则让基因序列变成了全部为 $0$ 和 $1$ 的序列，那么这个病毒就变异完成了。\n\n病毒可以通过抗体进行检测，比如 $01011$ 就可以检测到 $0101110$，但不能检测到 $110110$。\n\n对于从 $2$ 到 $G-1$ 中的基因，科学家想知道，是否能通过任意一组给定的抗体检测到这个基因变异形成的其他所有基因，不能的话，那么求不能检测到的基因中的最短长度。", "inputFormat": "第一行三个整数 $G,N,M$ 代表基因数，变异规则数和抗体数。        \n接下来 $N$ 行每行首先两个整数 $a,k$，然后接着 $k$ 个整数 $b_i$，代表 $a$ 可以通过这个变异规则变为 $b_1,b_2,\\cdots,b_k$ 这个片段，保证 $2$ 和 $G-1$ 都至少在每个规则中的 $a$ 中出现一次。       \n接下来 $M$ 行每行首先一个整数 $l$ 代表抗体长度，接下来 $l$ 个整数 $c_i$ 描述这个抗体。", "outputFormat": "$G-2$ 行第 $i$ 行代表 $i$ 基因以及其所有变异到的基因是否都可以被任意一组抗体检测到，如果可以，输出一个字符串 `YES`，如果不可以，首先一个字符串 `NO`，接下来一个整数代表不能检测到的基因中的最短长度。保证对于所有数据，该值小于 $2^{63}$。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$M=0$。\n- Subtask 2（14 pts）：$N = G-2$。\n- Subtask 3（25 pts）：$M=1$。\n- Subtask 4（32 pts）：$\\sum l \\le 10$。\n- Subtask 5（18 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$G > 2$，$N \\ge G-2$，$M \\ge 0$。$2 \\le a <G$，$k \\ge 1$，$0 \\le b_i<G$，$\\sum k \\le 100$，$l \\ge 1$，$0 \\le c_i \\le 1$，$\\sum l\\le 50$。\n\n**本题强制 $O2$ 优化。**", "locale": "zh-CN"}}}
{"pid": "P6699", "type": "P", "difficulty": 7, "samples": [["7 20\n5 7 9\n3 7 4\n3 6 6\n2 5 8\n5 1 9\n1 3 6\n6 5 1\n2 7 4\n2 3 5\n6 4 2\n7 1 5\n5 4 4\n4 1 3\n5 3 9\n7 6 4\n2 1 3\n4 3 9\n6 2 7\n4 2 8\n6 1 10", "28\n6 0 4 3 7 1 5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "模板题"], "title": "【模板】一般图最大权匹配", "background": "模板题，无背景。", "description": "给定一张有 $n$ 个顶点的无向带权图，有 $m$ 条带权边。\n\n求一种匹配的方案，使得最终匹配边的边权之和最大。", "inputFormat": "第一行两个数，$n$ 和 $m$。\n\n接下来 $m$ 行，每行 $3$ 个数：$u$，$v$，$w$，表示点 $u$ 与点 $v$ 之间有一条边权为 $w$ 的边。", "outputFormat": "第一行一个数，最大边权和。\n\n接下来一行 $n$ 个整数，描述一组最优方案。第 $v$ 个整数表示点 $v$ 匹配的点的编号。如果 $v$ 号点没有匹配，请输出 0。", "hint": "$1 \\le n \\le 400$，$1 \\le m \\le 79800$，$1 \\le w \\le 5\\times10^8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】一般图最大权匹配", "background": "模板题，无背景。", "description": "给定一张有 $n$ 个顶点的无向带权图，有 $m$ 条带权边。\n\n求一种匹配的方案，使得最终匹配边的边权之和最大。", "inputFormat": "第一行两个数，$n$ 和 $m$。\n\n接下来 $m$ 行，每行 $3$ 个数：$u$，$v$，$w$，表示点 $u$ 与点 $v$ 之间有一条边权为 $w$ 的边。", "outputFormat": "第一行一个数，最大边权和。\n\n接下来一行 $n$ 个整数，描述一组最优方案。第 $v$ 个整数表示点 $v$ 匹配的点的编号。如果 $v$ 号点没有匹配，请输出 0。", "hint": "$1 \\le n \\le 400$，$1 \\le m \\le 79800$，$1 \\le w \\le 5\\times10^8$。", "locale": "zh-CN"}}}
{"pid": "P6700", "type": "P", "difficulty": 7, "samples": [["5 2\naaabc\nbbbaa", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2015", "图论建模", "基环树", "PA（波兰）", "状压 DP"], "title": "[PA 2015 Final] Edycja", "background": "", "description": "给定两个长度为 $n$ 的等长的小写字母串 A 和 B，你可以做以下两种操作：\n1. 把 A 中某个位置上的字符修改成另一个字符，用时 1 秒。比如：```ababc``` 变成 ```ababa```。\n2. 把 A 中某种字符全部修改成另一个种字符，用时 $c$ 秒。比如：```ababc``` 变成 ```acacc```。\n\n同一时间只能做一个操作，求把 A 变成 B 的最小总耗时。", "inputFormat": "第一行包含两个正整数 $n,c$，分别表示串长和操作 2 的代价。\n\n第二行包含一个长度为 $n$ 的小写字母串 A。\n\n第三行包含一个长度为 $n$ 的小写字母串 B。", "outputFormat": "输出一个整数，即把 A 变成 B 的最小总耗时。", "hint": "#### 样例解释   \n先把所有的 a 都修改成 b，然后再把第 4 个位置的 b 和第 5 个位置的 c 都修改为 a。\n\n#### 数据范围\n对于所有数据，满足 $1\\le c\\le n\\le10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2015 Final] Edycja", "background": "", "description": "给定两个长度为 $n$ 的等长的小写字母串 A 和 B，你可以做以下两种操作：\n1. 把 A 中某个位置上的字符修改成另一个字符，用时 1 秒。比如：```ababc``` 变成 ```ababa```。\n2. 把 A 中某种字符全部修改成另一个种字符，用时 $c$ 秒。比如：```ababc``` 变成 ```acacc```。\n\n同一时间只能做一个操作，求把 A 变成 B 的最小总耗时。", "inputFormat": "第一行包含两个正整数 $n,c$，分别表示串长和操作 2 的代价。\n\n第二行包含一个长度为 $n$ 的小写字母串 A。\n\n第三行包含一个长度为 $n$ 的小写字母串 B。", "outputFormat": "输出一个整数，即把 A 变成 B 的最小总耗时。", "hint": "#### 样例解释   \n先把所有的 a 都修改成 b，然后再把第 4 个位置的 b 和第 5 个位置的 c 都修改为 a。\n\n#### 数据范围\n对于所有数据，满足 $1\\le c\\le n\\le10^6$。", "locale": "zh-CN"}}}
{"pid": "P6701", "type": "P", "difficulty": 5, "samples": [["6\nSAB\nSBC\nSAA\nACA\nBCC\nCBC\n3\nABBCAAABCA\nCCC\nBA", "3\n1\nNIE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["1997", "POI（波兰）", "区间 DP"], "title": "[POI 1997] Genotype", "background": "Genotype 是一个独特的基因串。", "description": "我们可以用大写英文字母 `A`-`Z` 来描述 Genotype，每个字母就代表一个基因。\n\n规定一种「分裂」规则，由三个大写字母 $A_1A_2A_3$ 组成，代表 $A_1$ 可以「分裂」为 $A_2A_3$。\n\n现在给定 $n$ 个「分裂」规则和 $k$ 个 Genotype，判断这些 Genotype 是否能从一个特定的 **只包含大写字母 `S` 的** 串通过「分裂」规则得到，如果可以的话输出特定的串的长度的最小值，如果不可以的话输出 `NIE`。", "inputFormat": "第一行一个整数 $n$ 代表「分裂」规则数。     \n接下来 $n$ 行每行三个大写字母 $A_1,A_2,A_3$ 代表一个「分裂」规则。         \n接下来一行一个整数 $k$ 代表给定的 Genotype 数。     \n接下来 $k$ 行每行若干个大写字母表示一个 Genotype。", "outputFormat": "$k$ 行：\n\n- 如果没有特定的串通过「分裂」规则得到这个 Genotype，输出 `NIE`。\n- 如果有特定的串通过「分裂」规则得到这个 Genotype，输出这个特定的串的最小长度。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 2000$，Genotype 的长度最大为 $100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 1997] Genotype", "background": "Genotype 是一个独特的基因串。", "description": "我们可以用大写英文字母 `A`-`Z` 来描述 Genotype，每个字母就代表一个基因。\n\n规定一种「分裂」规则，由三个大写字母 $A_1A_2A_3$ 组成，代表 $A_1$ 可以「分裂」为 $A_2A_3$。\n\n现在给定 $n$ 个「分裂」规则和 $k$ 个 Genotype，判断这些 Genotype 是否能从一个特定的 **只包含大写字母 `S` 的** 串通过「分裂」规则得到，如果可以的话输出特定的串的长度的最小值，如果不可以的话输出 `NIE`。", "inputFormat": "第一行一个整数 $n$ 代表「分裂」规则数。     \n接下来 $n$ 行每行三个大写字母 $A_1,A_2,A_3$ 代表一个「分裂」规则。         \n接下来一行一个整数 $k$ 代表给定的 Genotype 数。     \n接下来 $k$ 行每行若干个大写字母表示一个 Genotype。", "outputFormat": "$k$ 行：\n\n- 如果没有特定的串通过「分裂」规则得到这个 Genotype，输出 `NIE`。\n- 如果有特定的串通过「分裂」规则得到这个 Genotype，输出这个特定的串的最小长度。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 2000$，Genotype 的长度最大为 $100$。", "locale": "zh-CN"}}}
{"pid": "P6702", "type": "P", "difficulty": 2, "samples": [["4\n", "-1"], ["9\n", "3"], ["18\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2010", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7] ŠEĆER", "background": "Mirko 在制糖厂当送货员。", "description": "Mirko 需要向某地的一家糖果店运送 $n$ 颗糖。\n\nMirko 可以使用两种类型的包装盒子：       \n- 一种是可以装 $3$ 颗糖的 $1$ 号包装；           \n- 另一种是可以装 $5$ 颗糖的 $2$ 号包装。 \n\nMirko 想让包装盒尽可能少。例如，他要运送 $18$ 颗糖，则可以使用 $6$ 个 $1$ 号包装。但是，最优策略是 $3$ 个 $2$ 号包装和 $1$ 个 $1$ 号包装。这样总共有 $4$ 个包装。 \n\n请你帮助 Mirko 找到需要包装盒最少的方案。\n\n", "inputFormat": "输入数据共一行。\n\n第一行一个正整数 $n$，表示糖果颗数。", "outputFormat": "输出数据共一行。\n\n第一行，一个正整数表示需要包装盒最少的方案数的包装盒数，如果不可能用这 $2$ 种包装盒运 $n$ 颗糖，输出 `-1`。\n", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$3 \\le  n \\le 5000$。\n\n#### 说明\n\n本题满分 $30$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T1 ŠEĆER", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7] ŠEĆER", "background": "Mirko 在制糖厂当送货员。", "description": "Mirko 需要向某地的一家糖果店运送 $n$ 颗糖。\n\nMirko 可以使用两种类型的包装盒子：       \n- 一种是可以装 $3$ 颗糖的 $1$ 号包装；           \n- 另一种是可以装 $5$ 颗糖的 $2$ 号包装。 \n\nMirko 想让包装盒尽可能少。例如，他要运送 $18$ 颗糖，则可以使用 $6$ 个 $1$ 号包装。但是，最优策略是 $3$ 个 $2$ 号包装和 $1$ 个 $1$ 号包装。这样总共有 $4$ 个包装。 \n\n请你帮助 Mirko 找到需要包装盒最少的方案。\n\n", "inputFormat": "输入数据共一行。\n\n第一行一个正整数 $n$，表示糖果颗数。", "outputFormat": "输出数据共一行。\n\n第一行，一个正整数表示需要包装盒最少的方案数的包装盒数，如果不可能用这 $2$ 种包装盒运 $n$ 颗糖，输出 `-1`。\n", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$3 \\le  n \\le 5000$。\n\n#### 说明\n\n本题满分 $30$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T1 ŠEĆER", "locale": "zh-CN"}}}
{"pid": "P6703", "type": "P", "difficulty": 2, "samples": [["3 3\n1 A\n2 B\n3 C\n", "!"], ["5 6\n1 A\n2 B\n5 B\n1 C\n2 A\n2 B\n", "B?A?C"], ["8 8\n4 V\n3 I\n7 T\n7 A\n6 R\n5 N\n1 O\n9 H\n", "HONITAVR"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7] KOLO", "background": "", "description": "Mirko 最近购买了一个命运之轮。 他在每个扇形上写了一个大写英文字母，像这样（比如样例 $3$）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c6x5106c.png)\n\n\n轮中没有字母重复出现，而且轮沿顺时针方向旋转。 \n\n轮旋转时，有一个指针停留在同一位置（上图中指向 `H`）。 当我们旋转盘时，指针所指向的字母相应地发生变化。\n\nMirko 连续旋转了 $k$ 次，每次都记录了箭头指向的字母改变了多少次，以及旋转结束时所指的字母。\n\nSlavko 找到了那张纸，她想知道 Mirko 在车轮的扇形上写了些什么。另外，扇形的总数是已知的。", "inputFormat": "输入数据共 $k+1$ 行。\n\n第一行，$2$ 个正整数 $n$，表示车轮上的楔子数，以及 $k$，表示旋转数。\n\n接下来 $k$ 行表示 Mirko 为每次旋转记录的顺序描述。 每行包含一个整数 $s$ 和一个大写字母 $c$，表示该旋转期间指向的字母发生更改的次数，$c$ 表示指针停止处的大写字母。", "outputFormat": "如果没有满足上述要求的盘，则输出 $\\texttt !$。\n\n否则，盘上的字母，从最后一次旋转结束时的尖头字母开始，然后顺时针方向输出。如果无法确定某些字母，则在对应的位置输出 $\\texttt ?$。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 25, 1 \\le k \\le 100, 1 \\le s \\le 100$。\n\n#### 说明\n\n本题满分 $50$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T2 KOLO", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7] KOLO", "background": "", "description": "Mirko 最近购买了一个命运之轮。 他在每个扇形上写了一个大写英文字母，像这样（比如样例 $3$）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c6x5106c.png)\n\n\n轮中没有字母重复出现，而且轮沿顺时针方向旋转。 \n\n轮旋转时，有一个指针停留在同一位置（上图中指向 `H`）。 当我们旋转盘时，指针所指向的字母相应地发生变化。\n\nMirko 连续旋转了 $k$ 次，每次都记录了箭头指向的字母改变了多少次，以及旋转结束时所指的字母。\n\nSlavko 找到了那张纸，她想知道 Mirko 在车轮的扇形上写了些什么。另外，扇形的总数是已知的。", "inputFormat": "输入数据共 $k+1$ 行。\n\n第一行，$2$ 个正整数 $n$，表示车轮上的楔子数，以及 $k$，表示旋转数。\n\n接下来 $k$ 行表示 Mirko 为每次旋转记录的顺序描述。 每行包含一个整数 $s$ 和一个大写字母 $c$，表示该旋转期间指向的字母发生更改的次数，$c$ 表示指针停止处的大写字母。", "outputFormat": "如果没有满足上述要求的盘，则输出 $\\texttt !$。\n\n否则，盘上的字母，从最后一次旋转结束时的尖头字母开始，然后顺时针方向输出。如果无法确定某些字母，则在对应的位置输出 $\\texttt ?$。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 25, 1 \\le k \\le 100, 1 \\le s \\le 100$。\n\n#### 说明\n\n本题满分 $50$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T2 KOLO", "locale": "zh-CN"}}}
{"pid": "P6704", "type": "P", "difficulty": 2, "samples": [["5 15\n2 8\n2 10\n2 12\n2 10\n2 5", "7"], ["7 15\n1 5\n2 3\n2 5\n2 7\n2 4\n1 5\n1 3", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2010", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7] GITARA", "background": "Darko 有一个想象的外星朋友，他有十亿根手指。外星人快速拿起吉他，在网上找到一段简单的旋律并开始弹奏。\n\n这个吉他像寻常一样有六根弦，令其用 $1$ 到 $6$ 表示。每根弦被分成 $P$ 段，令其用 $1$ 到 $P$ 表示。\n\n旋律是一串的音调，每一个音调都是由按下特定的一根弦上的一段而产生的（如按第 $4$ 弦第 $8$ 段）。如果在一根弦上同时按在几段上，产生的音调是段数最大的那一段所能产生的音调。\n\n例：对于第 $3$ 根弦，第 $5$ 段已经被按，若你要弹出第 $7$ 段对应音调，只需把按住第 $7$ 段，而不需放开第 $5$ 段，因为只有最后的一段才会影响该弦产生的音调(在这个例子中是第 $7$ 段)。类似，如果现在你要弹出第 $2$ 段对应音调，你必须把第 $5$ 段和第 $7$ 段都释放。\n\n请你编写一个程序，计算外星人在弹出给定的旋律情况下，手指运动的最小次数。", "description": "你有一个 $6 \\times P$ 的矩阵 $A$，初始状态皆为 $0$。\n\n对于所有要求 $(i,j)$，你需要满足要求：\n\n1. 此时 $A_{i,j}$ 状态为 $1$；\n\n2. 对于 $A_{i,j+k}\\ (k>0)$ 状态为 $0$。\n\n你需要求在满足要求的情况下状态转换最小次数。", "inputFormat": "第一行包含两个正整数 $n,P$。它们分别指旋律中音调的数量及每根弦的段数。\n\n接下来 $n$ 行，每行两个正整数 $i,j$，分别表示能弹出对应音调的位置——弦号和段号，其为外星人弹奏的顺序。", "outputFormat": "一个非负整数表示外星人手指运动次数最小值。", "hint": "#### 样例 1 解释\n所有的音调都是由第二根弦产生的。首先按顺序按 $8,10,12$（$count=3$）。然后释放第 $12$ 段（$count=4$）。最后，按下第 $5$ 段，释放第 $8,10$ 段（$count=7$）。\n\n#### 样例 2 解释 \n对于每个操作，分别需要 $1,1,1,1,3,0,2$ 次手指运动。\n\n#### 数据规模及约定\n\n\n按下或释放一段弦各计一次手指运动。弹弦不算手指的移动，而是一个弹吉他的动作。（指你不需要管他怎么弹的，只需要按就是啦，说不定他可以用超能力呀）\n\n对于 $100\\%$ 的数据，$n \\le 5 \\times 10^5$ ，$2 \\le P \\le 3 \\times 10^5$。\n\n#### 说明\n\n本题满分 $70$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T3 GITARA", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7] GITARA", "background": "Darko 有一个想象的外星朋友，他有十亿根手指。外星人快速拿起吉他，在网上找到一段简单的旋律并开始弹奏。\n\n这个吉他像寻常一样有六根弦，令其用 $1$ 到 $6$ 表示。每根弦被分成 $P$ 段，令其用 $1$ 到 $P$ 表示。\n\n旋律是一串的音调，每一个音调都是由按下特定的一根弦上的一段而产生的（如按第 $4$ 弦第 $8$ 段）。如果在一根弦上同时按在几段上，产生的音调是段数最大的那一段所能产生的音调。\n\n例：对于第 $3$ 根弦，第 $5$ 段已经被按，若你要弹出第 $7$ 段对应音调，只需把按住第 $7$ 段，而不需放开第 $5$ 段，因为只有最后的一段才会影响该弦产生的音调(在这个例子中是第 $7$ 段)。类似，如果现在你要弹出第 $2$ 段对应音调，你必须把第 $5$ 段和第 $7$ 段都释放。\n\n请你编写一个程序，计算外星人在弹出给定的旋律情况下，手指运动的最小次数。", "description": "你有一个 $6 \\times P$ 的矩阵 $A$，初始状态皆为 $0$。\n\n对于所有要求 $(i,j)$，你需要满足要求：\n\n1. 此时 $A_{i,j}$ 状态为 $1$；\n\n2. 对于 $A_{i,j+k}\\ (k>0)$ 状态为 $0$。\n\n你需要求在满足要求的情况下状态转换最小次数。", "inputFormat": "第一行包含两个正整数 $n,P$。它们分别指旋律中音调的数量及每根弦的段数。\n\n接下来 $n$ 行，每行两个正整数 $i,j$，分别表示能弹出对应音调的位置——弦号和段号，其为外星人弹奏的顺序。", "outputFormat": "一个非负整数表示外星人手指运动次数最小值。", "hint": "#### 样例 1 解释\n所有的音调都是由第二根弦产生的。首先按顺序按 $8,10,12$（$count=3$）。然后释放第 $12$ 段（$count=4$）。最后，按下第 $5$ 段，释放第 $8,10$ 段（$count=7$）。\n\n#### 样例 2 解释 \n对于每个操作，分别需要 $1,1,1,1,3,0,2$ 次手指运动。\n\n#### 数据规模及约定\n\n\n按下或释放一段弦各计一次手指运动。弹弦不算手指的移动，而是一个弹吉他的动作。（指你不需要管他怎么弹的，只需要按就是啦，说不定他可以用超能力呀）\n\n对于 $100\\%$ 的数据，$n \\le 5 \\times 10^5$ ，$2 \\le P \\le 3 \\times 10^5$。\n\n#### 说明\n\n本题满分 $70$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T3 GITARA", "locale": "zh-CN"}}}
{"pid": "P6705", "type": "P", "difficulty": 3, "samples": [["2\nP.\n.K\n2 1\n3 2", "0"], ["3\nP..\n.KK\n...\n3 2 4\n7 4 2\n2 3 1", "2"], ["3\nK.P\n...\nK.K\n3 3 4\n9 5 9\n8 3 7", "5"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2010", "二分", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7] POŠTAR", "background": "Mirko 在一个山中小镇里得到了一个邮递员的差事。这个小镇可以用一个 $n \\times n$ 的矩阵表示。每个区域有三种状态：用 $\\texttt{K}$ 表示房屋，用 $\\texttt{P}$ 表示邮局或用 $\\texttt{.}$ 表示牧场。此外，每个区域被分配一个高度。\n\n每天早晨，Mirko 都给镇上的每户人家送邮件。他从用 $\\texttt{P}$ 表示的区域开始。Mirko 只能水平、垂直或斜向移动到相邻的区域。他一旦送完最后一封邮件，就必须返回邮局。\n\nMirko 不知道他的工作会有多无聊。令 Mirko 在投递邮件时所到的最高处和最低处的高度之差等于他的疲劳度。帮他找出疲劳度最小的方式，让 Mirko 投递所有的邮件。", "description": "给定一个 $n \\times n$ 的矩阵。\n\n每个位置可能有 $\\texttt{K}$ $\\texttt{P}$ $\\texttt{.}$ 三种可能状态，此外还有一个高度 $h_{i,j}$。\n\n你需要从状态为 $\\texttt{P}$ 的位置开始，水平、垂直或斜向移动，经过所有状态为 $\\texttt{K}$ 的位置，最终回到起点。\n\n在这路程中，你需要让经过的位置的 $max_h-min_h$ 最小化。\n\n请你求出最小化的值。", "inputFormat": "第一行包含一个整数 $n$。\n\n下面的 $n$ 行每行 $n$ 个字符表示矩阵。\n\n下面的 $n$ 行每行 $n$ 个正整数，表示区域高度。", "outputFormat": "一个非负整数表示最小疲劳度。", "hint": "#### 样例 1 解释\n\n从邮局开始，Mirko 可以直接移动到房屋，然后再回到邮局。因为这两个区域高度相同，所以 Mirko的疲劳等于  $0$。\n\n#### 数据规模及约定\n\n\n对于矩阵，其中 $\\texttt{P}$ 将正好出现一次，而 $\\texttt{K}$ 将至少出现一次。\n\n对于 $100\\%$ 的数据 $2 \\le n \\le 50$\n\n#### 说明\n\n本题满分 $100$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T4 POŠTAR\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7] POŠTAR", "background": "Mirko 在一个山中小镇里得到了一个邮递员的差事。这个小镇可以用一个 $n \\times n$ 的矩阵表示。每个区域有三种状态：用 $\\texttt{K}$ 表示房屋，用 $\\texttt{P}$ 表示邮局或用 $\\texttt{.}$ 表示牧场。此外，每个区域被分配一个高度。\n\n每天早晨，Mirko 都给镇上的每户人家送邮件。他从用 $\\texttt{P}$ 表示的区域开始。Mirko 只能水平、垂直或斜向移动到相邻的区域。他一旦送完最后一封邮件，就必须返回邮局。\n\nMirko 不知道他的工作会有多无聊。令 Mirko 在投递邮件时所到的最高处和最低处的高度之差等于他的疲劳度。帮他找出疲劳度最小的方式，让 Mirko 投递所有的邮件。", "description": "给定一个 $n \\times n$ 的矩阵。\n\n每个位置可能有 $\\texttt{K}$ $\\texttt{P}$ $\\texttt{.}$ 三种可能状态，此外还有一个高度 $h_{i,j}$。\n\n你需要从状态为 $\\texttt{P}$ 的位置开始，水平、垂直或斜向移动，经过所有状态为 $\\texttt{K}$ 的位置，最终回到起点。\n\n在这路程中，你需要让经过的位置的 $max_h-min_h$ 最小化。\n\n请你求出最小化的值。", "inputFormat": "第一行包含一个整数 $n$。\n\n下面的 $n$ 行每行 $n$ 个字符表示矩阵。\n\n下面的 $n$ 行每行 $n$ 个正整数，表示区域高度。", "outputFormat": "一个非负整数表示最小疲劳度。", "hint": "#### 样例 1 解释\n\n从邮局开始，Mirko 可以直接移动到房屋，然后再回到邮局。因为这两个区域高度相同，所以 Mirko的疲劳等于  $0$。\n\n#### 数据规模及约定\n\n\n对于矩阵，其中 $\\texttt{P}$ 将正好出现一次，而 $\\texttt{K}$ 将至少出现一次。\n\n对于 $100\\%$ 的数据 $2 \\le n \\le 50$\n\n#### 说明\n\n本题满分 $100$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T4 POŠTAR\n", "locale": "zh-CN"}}}
{"pid": "P6706", "type": "P", "difficulty": 4, "samples": [["3\n2 3 1\n7\n1 1\n1 2\n2 1\n1 2\n1 1\n2 2\n1 2", "CIKLUS\nCIKLUS\n1\n1\n2"], ["5\n0 3 5 3 4\n6\n1 1\n1 2\n2 4\n1 2\n2 3\n1 2", "1\nCIKLUS\n4\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2010", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7]  KUGLICE", "background": "Mirko 和 Slavko 喜欢玩弹珠。 在一个激动人心的星期五，Mirko 发明了一个关于弹珠的游戏，他想向 Slavko 展示。\n\n在游戏中，Mirko 构造了一个有向图，其中每个点出度不超过 $1$。然后他在其中一个点上放了一个弹珠，只要弹珠在某个顶点 $X$ 上，弹珠就会移动到由一条边连接的相邻顶点（没有就算了）。弹珠的运动一直持续到弹珠到达一个没有出度的点为止。弹珠也有可能因没有出度为 $0$ 的点而无限遍历图。为了确保 Slavko 能理解游戏规则，Mirko 会问一系列问题。\n\n询问类型如下:\n\n1. `1 X`：除非弹珠卡在一个循环，求弹珠被放在 $X$ 后最后的终止点序号。\n\n2. `2 X`：删除顶点 $X$ 的出边。（保证存在）\n\n注意：查询有序。", "description": "给定一个有向图，其中每个点出度为 $0$ 或 $1$。\n\n有如下询问：\n\n1. `1 X`：给定弹珠起始点 $X$，求弹珠运动的终止点。\n\n2. `2 X`：删除 $X$ 点出边。（保证存在）\n\n弹珠运动规则：\n\n从初始点沿着出边走直到一点出度为 $0$。", "inputFormat": "第一行一个正整数 $n$，指图中顶点数。\n\n第二行 $n$ 个正整数，其中第 $i$ 个数表示 $i$\n的出边指向点序号，若 $0$ 则指不存在。\n\n下面一行一个正整数 $Q$，指查询数目。\n\n下面 $Q$ 行每行包含一个上述格式的查询。", "outputFormat": "对于每个类型 $1$ 的查询，按照顺序，每行输出弹珠停止点序号。\n\n如果弹珠永不停止，则输出 $\\texttt{CIKLUS}$。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据 $1 \\le n,Q \\le 3 \\times 10^5$。\n\n#### 说明\n\n本题满分 $120$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T5 KUGLICE。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7]  KUGLICE", "background": "Mirko 和 Slavko 喜欢玩弹珠。 在一个激动人心的星期五，Mirko 发明了一个关于弹珠的游戏，他想向 Slavko 展示。\n\n在游戏中，Mirko 构造了一个有向图，其中每个点出度不超过 $1$。然后他在其中一个点上放了一个弹珠，只要弹珠在某个顶点 $X$ 上，弹珠就会移动到由一条边连接的相邻顶点（没有就算了）。弹珠的运动一直持续到弹珠到达一个没有出度的点为止。弹珠也有可能因没有出度为 $0$ 的点而无限遍历图。为了确保 Slavko 能理解游戏规则，Mirko 会问一系列问题。\n\n询问类型如下:\n\n1. `1 X`：除非弹珠卡在一个循环，求弹珠被放在 $X$ 后最后的终止点序号。\n\n2. `2 X`：删除顶点 $X$ 的出边。（保证存在）\n\n注意：查询有序。", "description": "给定一个有向图，其中每个点出度为 $0$ 或 $1$。\n\n有如下询问：\n\n1. `1 X`：给定弹珠起始点 $X$，求弹珠运动的终止点。\n\n2. `2 X`：删除 $X$ 点出边。（保证存在）\n\n弹珠运动规则：\n\n从初始点沿着出边走直到一点出度为 $0$。", "inputFormat": "第一行一个正整数 $n$，指图中顶点数。\n\n第二行 $n$ 个正整数，其中第 $i$ 个数表示 $i$\n的出边指向点序号，若 $0$ 则指不存在。\n\n下面一行一个正整数 $Q$，指查询数目。\n\n下面 $Q$ 行每行包含一个上述格式的查询。", "outputFormat": "对于每个类型 $1$ 的查询，按照顺序，每行输出弹珠停止点序号。\n\n如果弹珠永不停止，则输出 $\\texttt{CIKLUS}$。", "hint": "#### 数据规模及约定\n\n对于 $100\\%$ 的数据 $1 \\le n,Q \\le 3 \\times 10^5$。\n\n#### 说明\n\n本题满分 $120$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T5 KUGLICE。", "locale": "zh-CN"}}}
{"pid": "P6707", "type": "P", "difficulty": 6, "samples": [["5 5\n1 2 3 4 5\n1 5 5 0\n4 4 5\n4 5 5\n2 1 5 1\n4 1 5", "4\n0\n25"], ["1 7\n100\n3 1 17\n3 2 27\n3 4 37\n4 1 1\n4 2 2\n4 3 3\n4 4 4", "17\n27\n100\n37"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "分块", "COCI（克罗地亚）"], "title": "[COCI 2010/2011 #7] UPIT", "background": "Mirko 厌倦了为了各种任务去实现各种数据结构。所以，他决定写一个终极数据结构去操纵他最喜欢的数字序列。\n\n快来帮助他吧！\n\nMirko 会给你他的数列，以及一系列你必须执行的操作。每个询问要么询问关于数列的信息，要么修改现有的数列。下面列出了所有可能的操作类型。\n\n查询种类|描述|例子|\n:-:|:-:|:-:\n`1 A B X`|将 $[A,B]$ 中所有元素值更改为 $X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)\\to$ $1$ $3$ $5$ $0$ $\\to$ $(9, 8, 0, 0, 0, 4, 3, 2, 1)$\n`2 A B X`|将 $[A,B]$ 中所有元素增加一数，第 $A+k$ 位增加 $(k+1) \\times X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)\\to$ $2$ $3$ $5$ $2$ $\\to (9, 8, 9, 10, 11, 4, 3, 2, 1)$\n`3 C X`|在原来的第 $C$ 位前插入一个数，数值为 $X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)$ $\\to$ $3$ $4$ $100$ $\\to$ $(9, 8, 7, 100, 6, 5, 4, 3, 2, 1)$\n`4 A B`|查询 $[A,B]$ 的数值和|$(2, 18, 7, 6, 1, 4, 7, 7, 2)$ $\\to$ $4$ $6$ $7$ $\\to$ $result: 11$", "description": "给定一个数列 $f$ ，有以下操作。\n\n设数列当前长度为 $n$。\n\n|查询种类|描述|\n|:-:|:-:|\n`1 A B X`| $f_i=X(A \\le i \\le B)$\n`2 A B X`| $f_i+=(i-A+1) \\times X(A \\le i \\le B)$\n`3 C X`| $f_{i+1}=f_i(C \\le i \\le n)$ $f_C=X$\n`4 A B`| 求$\\sum^B_{i=A}f_i$", "inputFormat": "第一行两个正整数 $n$ , $Q$，分别表示数列初始长度和操作数量。\n\n第二行 $n$ 个非负整数表示初始数列。\n\n接下来 $Q$ 行每行各包含一个如上询问。", "outputFormat": "对于每一个 $4$ 号操作，输出一行答案。", "hint": "#### 数据规模及约定\n\n\n设当前数列长 $t$。\n\n对于 $100\\%$ 的数据 $1 \\le n$ , $Q \\le 1 \\times 10^5$ , $f_i \\le 1 \\times 10^5$ , $1 \\le X \\le 100$ , $1 \\le A \\le B \\le t$ , $1 \\le C \\le t + 1$。\n\n#### 说明\n\n本题满分 $130$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T6 UPIT。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2010/2011 #7] UPIT", "background": "Mirko 厌倦了为了各种任务去实现各种数据结构。所以，他决定写一个终极数据结构去操纵他最喜欢的数字序列。\n\n快来帮助他吧！\n\nMirko 会给你他的数列，以及一系列你必须执行的操作。每个询问要么询问关于数列的信息，要么修改现有的数列。下面列出了所有可能的操作类型。\n\n查询种类|描述|例子|\n:-:|:-:|:-:\n`1 A B X`|将 $[A,B]$ 中所有元素值更改为 $X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)\\to$ $1$ $3$ $5$ $0$ $\\to$ $(9, 8, 0, 0, 0, 4, 3, 2, 1)$\n`2 A B X`|将 $[A,B]$ 中所有元素增加一数，第 $A+k$ 位增加 $(k+1) \\times X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)\\to$ $2$ $3$ $5$ $2$ $\\to (9, 8, 9, 10, 11, 4, 3, 2, 1)$\n`3 C X`|在原来的第 $C$ 位前插入一个数，数值为 $X$|$(9, 8, 7, 6, 5, 4, 3, 2, 1)$ $\\to$ $3$ $4$ $100$ $\\to$ $(9, 8, 7, 100, 6, 5, 4, 3, 2, 1)$\n`4 A B`|查询 $[A,B]$ 的数值和|$(2, 18, 7, 6, 1, 4, 7, 7, 2)$ $\\to$ $4$ $6$ $7$ $\\to$ $result: 11$", "description": "给定一个数列 $f$ ，有以下操作。\n\n设数列当前长度为 $n$。\n\n|查询种类|描述|\n|:-:|:-:|\n`1 A B X`| $f_i=X(A \\le i \\le B)$\n`2 A B X`| $f_i+=(i-A+1) \\times X(A \\le i \\le B)$\n`3 C X`| $f_{i+1}=f_i(C \\le i \\le n)$ $f_C=X$\n`4 A B`| 求$\\sum^B_{i=A}f_i$", "inputFormat": "第一行两个正整数 $n$ , $Q$，分别表示数列初始长度和操作数量。\n\n第二行 $n$ 个非负整数表示初始数列。\n\n接下来 $Q$ 行每行各包含一个如上询问。", "outputFormat": "对于每一个 $4$ 号操作，输出一行答案。", "hint": "#### 数据规模及约定\n\n\n设当前数列长 $t$。\n\n对于 $100\\%$ 的数据 $1 \\le n$ , $Q \\le 1 \\times 10^5$ , $f_i \\le 1 \\times 10^5$ , $1 \\le X \\le 100$ , $1 \\le A \\le B \\le t$ , $1 \\le C \\le t + 1$。\n\n#### 说明\n\n本题满分 $130$ 分。\n\n译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T6 UPIT。\n", "locale": "zh-CN"}}}
{"pid": "P6708", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n", "0.5"], ["7\n1 2 3 1 1 2 3", "0.57142857"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2020", "Special Judge", "CCC（加拿大）", "期望"], "title": "[CCC 2020] Josh's Double Bacon Deluxe", "background": "Josh 和 $N-1$ 个人去吃汉堡。", "description": "这个汉堡店共有 $M$ 种汉堡。\n\n第 $i$ 个人最喜欢吃的汉堡为第 $b_i$ 种汉堡。\n\n这 $N$ 个人都会选他最喜欢吃的汉堡。\n\n现在，这 $N$ 个人排队去取汉堡，不幸的是，第一个人忘记了他最喜欢的汉堡，于是他随便拿了一个汉堡。\n\n接下来的 $N-2$ 个人会按如下规则拿汉堡：\n- 如果有他最喜欢的汉堡，就直接拿走。\n- 否则，他会随便拿一个。\n\n您需要求出，**排在最后**的 Josh 拿到他最喜欢汉堡的概率。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来 $N$ 行，一行一个整数 $b_i$。", "outputFormat": "一行一个小数，表示**排在最后**的 Josh 拿到他最喜欢汉堡的概率。", "hint": "#### 样例 1 解释\n| 第一个人的选择 | 第二个人的选择 | Josh 的选择 | 概率 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $3$ | $\\frac{1}{3}$ |\n| $2$ | $1$ | $3$ | $\\frac{1}{3}\\times \\frac{1}{2}=\\frac{1}{6}$ |\n| $2$ | $3$ | $1$ | $\\frac{1}{6}$ |\n| $3$ | $2$ | $1$ | $\\frac{1}{3}$ |\n\nJosh 拿到他最喜欢汉堡的概率为 $\\frac{1}{3}+\\frac{1}{6}=\\frac{1}{2}$。\n\n#### SPJ 计分标准\n设正确答案为 $C$，你的答案为 $P$，若 $\\lvert P-C\\rvert <10^{-6}$，则您得该测试点的满分，否则，您得零分。\n\n#### 子任务\n**本题采用捆绑测试，且本题的 Subtask 分数有微调。**\n- Subtask 1（$27$ 分）：保证 $N\\le 10^5$，$M\\le 10^3$。\n- Subtask 2（$33$ 分）：保证 $M\\le 10^3$。\n- Subtask 3（$40$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $3\\le N\\le 10^6$，$1\\le b_i\\le M\\le 5\\times 10^5$。\n\n#### 说明\n本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/seniorEF.pdf) T5 Josh's Double Bacon Deluxe。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020] Josh's Double Bacon Deluxe", "background": "Josh 和 $N-1$ 个人去吃汉堡。", "description": "这个汉堡店共有 $M$ 种汉堡。\n\n第 $i$ 个人最喜欢吃的汉堡为第 $b_i$ 种汉堡。\n\n这 $N$ 个人都会选他最喜欢吃的汉堡。\n\n现在，这 $N$ 个人排队去取汉堡，不幸的是，第一个人忘记了他最喜欢的汉堡，于是他随便拿了一个汉堡。\n\n接下来的 $N-2$ 个人会按如下规则拿汉堡：\n- 如果有他最喜欢的汉堡，就直接拿走。\n- 否则，他会随便拿一个。\n\n您需要求出，**排在最后**的 Josh 拿到他最喜欢汉堡的概率。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来 $N$ 行，一行一个整数 $b_i$。", "outputFormat": "一行一个小数，表示**排在最后**的 Josh 拿到他最喜欢汉堡的概率。", "hint": "#### 样例 1 解释\n| 第一个人的选择 | 第二个人的选择 | Josh 的选择 | 概率 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $2$ | $3$ | $\\frac{1}{3}$ |\n| $2$ | $1$ | $3$ | $\\frac{1}{3}\\times \\frac{1}{2}=\\frac{1}{6}$ |\n| $2$ | $3$ | $1$ | $\\frac{1}{6}$ |\n| $3$ | $2$ | $1$ | $\\frac{1}{3}$ |\n\nJosh 拿到他最喜欢汉堡的概率为 $\\frac{1}{3}+\\frac{1}{6}=\\frac{1}{2}$。\n\n#### SPJ 计分标准\n设正确答案为 $C$，你的答案为 $P$，若 $\\lvert P-C\\rvert <10^{-6}$，则您得该测试点的满分，否则，您得零分。\n\n#### 子任务\n**本题采用捆绑测试，且本题的 Subtask 分数有微调。**\n- Subtask 1（$27$ 分）：保证 $N\\le 10^5$，$M\\le 10^3$。\n- Subtask 2（$33$ 分）：保证 $M\\le 10^3$。\n- Subtask 3（$40$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $3\\le N\\le 10^6$，$1\\le b_i\\le M\\le 5\\times 10^5$。\n\n#### 说明\n本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/seniorEF.pdf) T5 Josh's Double Bacon Deluxe。", "locale": "zh-CN"}}}
{"pid": "P6709", "type": "P", "difficulty": 4, "samples": [["BABCBCACCA", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2020", "CCC（加拿大）"], "title": "[CCC 2020]  Swapping Seats", "background": "", "description": "有 $N$ 个人坐在一张**圆**桌旁。\n\n共有三个派别，每一个人属于一个派别。\n\n现在，您想使属于同一派别的人坐到一起。\n\n您可以每次将两个人交换位置，输出最小的交换次数。", "inputFormat": "仅一行一个长度为 $N$ 的字符串 $s$，为顺时针所有人的派别。\n\n如果 $s_i$ 为 `A`，则说明第 $i$ 个人为第一个派别的，以此类推。", "outputFormat": "仅一行一个整数，表示最小的交换次数。", "hint": "#### 样例解释\n$\\texttt{BABCBCACCA}\\to\\texttt{AABCBCBCCA}\\to\\texttt{AABBBCCCCA}$。\n\n#### 子任务\n**本题采用捆绑测试，且本题的 Subtask 分数有微调。**\n- Subtask 1（$26$ 分）：$s_i\\in\\{$`A`$,$`B`$\\}$ 且 $N\\le 5\\times 10^3$。\n- Subtask 2（$27$ 分）：$s_i\\in\\{$`A`$,$`B`$\\}$。\n- Subtask 3（$27$ 分）：$N\\le 5\\times 10^3$。\n- Subtask 4（$20$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $s_i\\in\\{$`A`$,$`B`$,$`C`$\\}$，$1\\le N\\le 10^6$。\n\n#### 说明\n本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/seniorEF.pdf) T4 Swapping Seats。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCC 2020]  Swapping Seats", "background": "", "description": "有 $N$ 个人坐在一张**圆**桌旁。\n\n共有三个派别，每一个人属于一个派别。\n\n现在，您想使属于同一派别的人坐到一起。\n\n您可以每次将两个人交换位置，输出最小的交换次数。", "inputFormat": "仅一行一个长度为 $N$ 的字符串 $s$，为顺时针所有人的派别。\n\n如果 $s_i$ 为 `A`，则说明第 $i$ 个人为第一个派别的，以此类推。", "outputFormat": "仅一行一个整数，表示最小的交换次数。", "hint": "#### 样例解释\n$\\texttt{BABCBCACCA}\\to\\texttt{AABCBCBCCA}\\to\\texttt{AABBBCCCCA}$。\n\n#### 子任务\n**本题采用捆绑测试，且本题的 Subtask 分数有微调。**\n- Subtask 1（$26$ 分）：$s_i\\in\\{$`A`$,$`B`$\\}$ 且 $N\\le 5\\times 10^3$。\n- Subtask 2（$27$ 分）：$s_i\\in\\{$`A`$,$`B`$\\}$。\n- Subtask 3（$27$ 分）：$N\\le 5\\times 10^3$。\n- Subtask 4（$20$ 分）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $s_i\\in\\{$`A`$,$`B`$,$`C`$\\}$，$1\\le N\\le 10^6$。\n\n#### 说明\n本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/seniorEF.pdf) T4 Swapping Seats。", "locale": "zh-CN"}}}
{"pid": "P6710", "type": "P", "difficulty": 4, "samples": [["1 1 1 1\na** ", "105"], ["1 1 1 1\nb*i ", "0"], ["1 2 1 2\nancient ", "1"], ["4 4 4 4\nman****ipt ", "261870"], ["2 2 2 2\n*boi* ", "546"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2005", "枚举", "BalticOI（波罗的海）"], "title": "[BalticOI 2005] Ancient Manuscript (Day2)", "background": null, "description": "给定 Baltic 字符串的定义为：\n\n- 全部为小写字母；\n- 最多只能有 $V_C$ 个连续的元音；\n- 最多只能有 $C_C$ 个连续的辅音；\n- 最多只能有 $V_E$ 个连续的元音相等；\n- 最多只能有 $C_E$ 个连续的辅音相等。\n\n`aeiou` 为元音，除了这五个字母之外的 21 个字母为辅音。\n\n现在给定一个字符串，一些字符为小写字母一些字符为 `*`，您可以把 `*` 替换成任意一个小写字母。\n\n求通过替换能使得这个字符串得到的不同的 Baltic 字符串的种类数。", "inputFormat": "第一行四个整数 $V_E,V_C,C_E,C_C$，具体含义见题面描述。\n\n第二行一个字符串，具体含义见题目描述。", "outputFormat": "一行一个整数代表通过替换能使得这个字符串得到的不同的 Baltic 字符串的种类数。\n\n保证答案在 $64$ 位有符号整数范围内。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le V_E \\le V_C \\le 4$，$1 \\le C_E \\le C_C \\le 4$，$1 \\le$ 字符串的长度 $\\le 15$。\n\n#### 说明\n\n翻译自 [BalticOI 2005 Day2 A Ancient Manuscript](https://boi.cses.fi/files/boi2005_day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2005] Ancient Manuscript (Day2)", "background": null, "description": "给定 Baltic 字符串的定义为：\n\n- 全部为小写字母；\n- 最多只能有 $V_C$ 个连续的元音；\n- 最多只能有 $C_C$ 个连续的辅音；\n- 最多只能有 $V_E$ 个连续的元音相等；\n- 最多只能有 $C_E$ 个连续的辅音相等。\n\n`aeiou` 为元音，除了这五个字母之外的 21 个字母为辅音。\n\n现在给定一个字符串，一些字符为小写字母一些字符为 `*`，您可以把 `*` 替换成任意一个小写字母。\n\n求通过替换能使得这个字符串得到的不同的 Baltic 字符串的种类数。", "inputFormat": "第一行四个整数 $V_E,V_C,C_E,C_C$，具体含义见题面描述。\n\n第二行一个字符串，具体含义见题目描述。", "outputFormat": "一行一个整数代表通过替换能使得这个字符串得到的不同的 Baltic 字符串的种类数。\n\n保证答案在 $64$ 位有符号整数范围内。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le V_E \\le V_C \\le 4$，$1 \\le C_E \\le C_C \\le 4$，$1 \\le$ 字符串的长度 $\\le 15$。\n\n#### 说明\n\n翻译自 [BalticOI 2005 Day2 A Ancient Manuscript](https://boi.cses.fi/files/boi2005_day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6711", "type": "P", "difficulty": 5, "samples": [["4\n7\n4\n5\n4 ", "0.5 2.5\n7.5 2.5\n4.5 6.5\n0.5 6.5 "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["计算几何", "2005", "二分", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2005] Polygon (Day2)", "background": null, "description": "给定一个凸包的每条边的长度，求这个凸包。", "inputFormat": "第一行一个整数 $N$ 代表点数。\n\n接下来 $N$ 行，每行一个整数 $a_i$ 代表一条边的长度，其中 $a_i\\ (i<n)$ 代表第 $i$ 个点与第 $i+1$ 个点之间的边的长度，$a_i\\ (i=n)$ 代表第 $n$ 个点与第 $1$ 个点之间的边的长度。", "outputFormat": "$N$ 行每行两个实数 $x_i,y_i$ 代表一个点的坐标。（需要满足 $|x_i|,|y_i| \\le 10^7$）\n\n如果有多组解任意输出一组即可。\n\n如果无解输出 `NO SOLUTION`。\n\n#### 在洛谷上评测的要求\n\n**注意请按照逆时针输出输出凸包上的点。**\n\n虽然原题说顺时针或逆时针顺序输出皆可，但是在本题中**请严格按照逆时针方向输出**。\n\n不一定必须按照编号的顺序输出，比如说点 $P_1\\to P_2 \\to P_3$ 是逆时针顺序，那么按照 $P_2 \\to P_3 \\to P_1$ 也可。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7bbhlpom.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$3 \\le N \\le 1000$，$1 \\le a_i \\le 10^4$。\n\n**本题使用 Special Judge。**\n\n感谢 spj 作者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n#### 说明\n\n翻译自 [BalticOI 2005 Day2 C Polygon](https://boi.cses.fi/files/boi2005_day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2005] Polygon (Day2)", "background": null, "description": "给定一个凸包的每条边的长度，求这个凸包。", "inputFormat": "第一行一个整数 $N$ 代表点数。\n\n接下来 $N$ 行，每行一个整数 $a_i$ 代表一条边的长度，其中 $a_i\\ (i<n)$ 代表第 $i$ 个点与第 $i+1$ 个点之间的边的长度，$a_i\\ (i=n)$ 代表第 $n$ 个点与第 $1$ 个点之间的边的长度。", "outputFormat": "$N$ 行每行两个实数 $x_i,y_i$ 代表一个点的坐标。（需要满足 $|x_i|,|y_i| \\le 10^7$）\n\n如果有多组解任意输出一组即可。\n\n如果无解输出 `NO SOLUTION`。\n\n#### 在洛谷上评测的要求\n\n**注意请按照逆时针输出输出凸包上的点。**\n\n虽然原题说顺时针或逆时针顺序输出皆可，但是在本题中**请严格按照逆时针方向输出**。\n\n不一定必须按照编号的顺序输出，比如说点 $P_1\\to P_2 \\to P_3$ 是逆时针顺序，那么按照 $P_2 \\to P_3 \\to P_1$ 也可。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7bbhlpom.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$3 \\le N \\le 1000$，$1 \\le a_i \\le 10^4$。\n\n**本题使用 Special Judge。**\n\n感谢 spj 作者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n#### 说明\n\n翻译自 [BalticOI 2005 Day2 C Polygon](https://boi.cses.fi/files/boi2005_day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6712", "type": "P", "difficulty": 7, "samples": [["2 3 3\n1\n10\n100\n1000\n998244245\n100000\n1000000\n10000000\n0 1\n0 1\n1 233", "2\n2202003\n444957911"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2019", "THUPC"], "title": "[THUPC 2019] 摆家具", "background": "", "description": "你有 $k$ 件不同的家具，需要摆放在 $n$ 个不同的房间中。假设每个房间足够大，并且只考虑每件家具处于哪个房间（而不考虑房间内部如何摆放），那么总共有 $n^k$ 种不同的摆放方式（注意，不是 $k^n$）。\n\n摆放家具也算一门学问了，至少不太好乱摆的吧？对于每种摆放方式，我们可以给这种方式打分。例如，某个方案把餐桌放到了卫生间，或是一个卧室放了两张床而另一个卧室没有床，就会获得比较低的分数。由于这个分数关于每件家具、每个房间不是独立的，我们会输入所有 $n^k$ 种摆放方式的分数。\n\n你现在心血来潮，想换一换房间的布局。给出一种初始时的摆放方式，你会重复 $T$ 次下述操作：每次，你会任选一件家具，然后将这件家具移动到任意一个其他房间中。每一轮有 $k(n-1)$ 种决策（选择家具的方案数乘以选择另一个房间的方案数），所以总共有 $k^T(n-1)^T$ 种决策。你需要计算这每一种决策后的摆放方式的得分之和。\n\n不仅如此，我们会给出 $q$ 次询问，每次输入初始时的摆放方式与 $T$，你需要**在线地**回答 $k^T(n-1)^T$ 种决策后的得分之和（取模）。详见输入与输出格式。\n\n我们如下定义一种摆放方式的编号：\n\n我们将家具用 0 到 $k-1$ 的不同整数编号，房间用 $0$ 到 $n-1$ 的不同整数编号。设在某种摆放方式下，第 $i$ 号家具被放在了 $p_i$ 号房间中，则定义这种摆放方式的编号为 $\\sum_{i=0}^{k-1} p_i n^i$。可以发现，所有的 $n^k$ 种摆放方式的编号恰好是 $0$ 到 $n^k -1$ 的不同整数。\n\n另外，设 $P=998244353$。", "inputFormat": "第一行输入三个正整数 $n, k, q$。\n\n接下来 $n^k$ 行，每行输入一个小于 $P$ 的正整数，依次表示编号为 $0, 1, \\dots, n^k - 1$ 的摆放方式的得分。\n\n接下来 $q$ 行，每行输入两个非负整数。设某行的输入为 $a, b$（保证 $0 \\leq a < n^k, 0 \\leq b < P$），则此次询问的初始摆放方式的编号为 $a$，而 $T=b \\cdot r \\bmod P$，其中 $r$ 是你上一个输出的数（对于第一次询问为 $1$）。\n\n同一行内输入的相邻两个数之间以一个空格隔开。\n\n保证 $n \\geq 2$，$k \\geq 1$；$n^k \\leq 10^6$；$q \\leq 5 \\times 10^5$", "outputFormat": "对于每次询问输出一行，包含一个非负整数，表示该询问的得分之和对 $P$ 取模的结果。", "hint": "#### 样例解释\n第一次询问中，初始摆放方式的编号为 $0$，$T=1$。\n\n初始时，$0$ 号家具放在 $0$ 号房间，$1$ 号家具放在 $0$ 号房间，$2$ 号家具放在 $0$ 号房间。经过 $1$ 次操作后，可能的情况有：\n\n* 将 $0$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $1$，得分为 $10$；\n* 将 $1$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $2$，得分为 $100$；\n* 将 $2$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $4$，得分为 $998244245$。\n\n所以，所有情况的总得分为 $998244355$，对 $P$ 取模后为 $2$。\n\n第二次询问中，初始摆放方式的编号为 $0$，$T=2$。\n\n初始时，$0$ 号家具放在 $0$ 号房间，$1$ 号家具放在 $0$ 号房间，$2$ 号家具放在 $0$ 号房间。经过 $2$ 次操作后，可能的情况有：\n\n* 将 $0$ 号家具移动到 $1$ 号房间，然后将 $0$ 号家具移动到 $0$ 号房间，此后的摆放方式编号为 $0$，得分为 $1$；\n* 将 $0$ 号家具移动到 $1$ 号房间，然后将 $1$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $3$，得分为 $1000$；\n* 将 $0$ 号家具移动到 $1$ 号房间，然后将 $2$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $5$，得分为 $100000$；\n* 将 $1$ 号家具移动到 $1$ 号房间，然后将 $0$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $3$，得分为 $1000$；\n* 将 $1$ 号家具移动到 $1$ 号房间，然后将 $1$ 号家具移动到 $0$ 号房间，此后的摆放方式编号为 $0$，得分为 $1$；\n* 将 $1$ 号家具移动到 $1$ 号房间，然后将 $2$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $6$，得分为 $1000000$；\n* 将 $2$ 号家具移动到 $1$ 号房间，然后将 $0$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $5$，得分为 $100000$；\n* 将 $2$ 号家具移动到 $1$ 号房间，然后将 $1$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $6$，得分为 $1000000$；\n* 将 $2$ 号家具移动到 $1$ 号房间，然后将 $2$ 号家具移动到 $0$ 号房间，此后的摆放方式编号为 $0$，得分为 $1$。\n\n所以，所有情况的总得分为 $2202003$，对 $P$ 取模后为 $2202003$。\n\n第三次询问中，初始摆放方式的编号为 $1$，$T=513066699$。初始时，$0$ 号家具放在 $1$ 号房间，$1$ 号家具放在 $0$ 号房间，$2$ 号家具放在 $0$ 号房间。\n\n……（省略至少 $3^{513066699}$ 行）\n\n#### 版权信息\n来自 THUPC（THU Programming Contest，清华大学程序设计竞赛）2019。\n\n题解等资源可在 https://github.com/wangyurzee7/THUPC2019 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2019] 摆家具", "background": "", "description": "你有 $k$ 件不同的家具，需要摆放在 $n$ 个不同的房间中。假设每个房间足够大，并且只考虑每件家具处于哪个房间（而不考虑房间内部如何摆放），那么总共有 $n^k$ 种不同的摆放方式（注意，不是 $k^n$）。\n\n摆放家具也算一门学问了，至少不太好乱摆的吧？对于每种摆放方式，我们可以给这种方式打分。例如，某个方案把餐桌放到了卫生间，或是一个卧室放了两张床而另一个卧室没有床，就会获得比较低的分数。由于这个分数关于每件家具、每个房间不是独立的，我们会输入所有 $n^k$ 种摆放方式的分数。\n\n你现在心血来潮，想换一换房间的布局。给出一种初始时的摆放方式，你会重复 $T$ 次下述操作：每次，你会任选一件家具，然后将这件家具移动到任意一个其他房间中。每一轮有 $k(n-1)$ 种决策（选择家具的方案数乘以选择另一个房间的方案数），所以总共有 $k^T(n-1)^T$ 种决策。你需要计算这每一种决策后的摆放方式的得分之和。\n\n不仅如此，我们会给出 $q$ 次询问，每次输入初始时的摆放方式与 $T$，你需要**在线地**回答 $k^T(n-1)^T$ 种决策后的得分之和（取模）。详见输入与输出格式。\n\n我们如下定义一种摆放方式的编号：\n\n我们将家具用 0 到 $k-1$ 的不同整数编号，房间用 $0$ 到 $n-1$ 的不同整数编号。设在某种摆放方式下，第 $i$ 号家具被放在了 $p_i$ 号房间中，则定义这种摆放方式的编号为 $\\sum_{i=0}^{k-1} p_i n^i$。可以发现，所有的 $n^k$ 种摆放方式的编号恰好是 $0$ 到 $n^k -1$ 的不同整数。\n\n另外，设 $P=998244353$。", "inputFormat": "第一行输入三个正整数 $n, k, q$。\n\n接下来 $n^k$ 行，每行输入一个小于 $P$ 的正整数，依次表示编号为 $0, 1, \\dots, n^k - 1$ 的摆放方式的得分。\n\n接下来 $q$ 行，每行输入两个非负整数。设某行的输入为 $a, b$（保证 $0 \\leq a < n^k, 0 \\leq b < P$），则此次询问的初始摆放方式的编号为 $a$，而 $T=b \\cdot r \\bmod P$，其中 $r$ 是你上一个输出的数（对于第一次询问为 $1$）。\n\n同一行内输入的相邻两个数之间以一个空格隔开。\n\n保证 $n \\geq 2$，$k \\geq 1$；$n^k \\leq 10^6$；$q \\leq 5 \\times 10^5$", "outputFormat": "对于每次询问输出一行，包含一个非负整数，表示该询问的得分之和对 $P$ 取模的结果。", "hint": "#### 样例解释\n第一次询问中，初始摆放方式的编号为 $0$，$T=1$。\n\n初始时，$0$ 号家具放在 $0$ 号房间，$1$ 号家具放在 $0$ 号房间，$2$ 号家具放在 $0$ 号房间。经过 $1$ 次操作后，可能的情况有：\n\n* 将 $0$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $1$，得分为 $10$；\n* 将 $1$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $2$，得分为 $100$；\n* 将 $2$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $4$，得分为 $998244245$。\n\n所以，所有情况的总得分为 $998244355$，对 $P$ 取模后为 $2$。\n\n第二次询问中，初始摆放方式的编号为 $0$，$T=2$。\n\n初始时，$0$ 号家具放在 $0$ 号房间，$1$ 号家具放在 $0$ 号房间，$2$ 号家具放在 $0$ 号房间。经过 $2$ 次操作后，可能的情况有：\n\n* 将 $0$ 号家具移动到 $1$ 号房间，然后将 $0$ 号家具移动到 $0$ 号房间，此后的摆放方式编号为 $0$，得分为 $1$；\n* 将 $0$ 号家具移动到 $1$ 号房间，然后将 $1$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $3$，得分为 $1000$；\n* 将 $0$ 号家具移动到 $1$ 号房间，然后将 $2$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $5$，得分为 $100000$；\n* 将 $1$ 号家具移动到 $1$ 号房间，然后将 $0$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $3$，得分为 $1000$；\n* 将 $1$ 号家具移动到 $1$ 号房间，然后将 $1$ 号家具移动到 $0$ 号房间，此后的摆放方式编号为 $0$，得分为 $1$；\n* 将 $1$ 号家具移动到 $1$ 号房间，然后将 $2$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $6$，得分为 $1000000$；\n* 将 $2$ 号家具移动到 $1$ 号房间，然后将 $0$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $5$，得分为 $100000$；\n* 将 $2$ 号家具移动到 $1$ 号房间，然后将 $1$ 号家具移动到 $1$ 号房间，此后的摆放方式编号为 $6$，得分为 $1000000$；\n* 将 $2$ 号家具移动到 $1$ 号房间，然后将 $2$ 号家具移动到 $0$ 号房间，此后的摆放方式编号为 $0$，得分为 $1$。\n\n所以，所有情况的总得分为 $2202003$，对 $P$ 取模后为 $2202003$。\n\n第三次询问中，初始摆放方式的编号为 $1$，$T=513066699$。初始时，$0$ 号家具放在 $1$ 号房间，$1$ 号家具放在 $0$ 号房间，$2$ 号家具放在 $0$ 号房间。\n\n……（省略至少 $3^{513066699}$ 行）\n\n#### 版权信息\n来自 THUPC（THU Programming Contest，清华大学程序设计竞赛）2019。\n\n题解等资源可在 https://github.com/wangyurzee7/THUPC2019 查看。", "locale": "zh-CN"}}}
{"pid": "P6713", "type": "P", "difficulty": 3, "samples": [["1\nW\n2\nW\n3", "0"], ["4\nWLLW\n1 2 3 4\nLWWL\n6 5 3 2", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "CCO（加拿大）"], "title": "[CCO 2018] Geese vs. Hawks", "background": "本题题面来自 [LOJ](https://loj.ac/p/3514)。", "description": "Troy 和 JP 是冰球迷。这个赛季每个冰球队会进行 $N$ 场比赛。每场比赛在两个队之间进行，得分更高者胜。并且不会出现平局的情况。\n\nTroy 最喜欢的队伍是滑铁卢野鹅队，他记录了这个队每场比赛的结果。比赛结果记作一个字符串 $S$。如果野鹅队赢下了第 $i$ 场比赛，则 $S_i=\\texttt{W}$，否则 $S_i=\\texttt{L}$。他同时记下了在第 $i$ 场比赛，他们获得了 $A_i$ 分。\n\nJP 最喜欢的队伍是劳里埃金鹰队，他也记录了这个队每场比赛的结果。比赛结果记作一个字符串 $T$。如果金鹰队赢下了第 $j$ 场比赛，则 $T_j=\\texttt{W}$，否则 $T_j=\\texttt{L}$。他同时记下了在第 $j$ 场比赛，他们获得了 $B_j$ 分。\n\nTroy 和 JP 均按顺序记录了他们喜欢的队伍每场比赛的结果和分数。\n\n一次同城德比是指一场滑铁卢野鹅对劳里埃金鹰的比赛（因为两队主场均在滑铁卢）。因为 Tory 和 JP 都没有记录他们最喜欢的球队在比赛中的对手，所以他们不能确定有没有同城德比，也确定不了哪些场比赛是同城德比。他们想知道，根据他们记录的信息推算，在所有同城德比中，两队取得分数总和的最大值是多少。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含一个长为 $N$ 的字符串 $S$，保证字符串 $S$ 中只包含 $\\texttt{W}$ 和 $\\texttt{L}$。\n\n第三行包含 $N$ 个整数 $A_1,\\ldots ,A_N$。\n\n第四行包含一个长为 $N$ 的字符串 $T$，保证字符串 $T$ 中只包含 $\\texttt{W}$ 和 $\\texttt{L}$。\n\n第五行包含 $N$ 个整数 $B_1,\\ldots ,B_N$。", "outputFormat": "输出一行一个整数，表示在所有同城德比中，两队取得分数总和的最大值。", "hint": "#### 样例解释\n#### 样例 1 解释\n因为两队都赢了比赛，因此不会出现同城德比。\n#### 样例 2 解释\n两队各自进行的第四场比赛可能是同城德比，野鹅队得 $4$ 分，金鹰队得 $2$ 分。野鹅队进行的第三场比赛和金鹰队进行的第二场比赛可能是同城德比，金鹰队得 $5$ 分，野鹅队得 $3$ 分。两队得分总和为 $4 + 2 + 5 + 3 = 14$，并且是得分总和最大的情况。\n\n注意野鹅队的第一场比赛赢了，并且得了 $1$ 分，这场比赛不可能是对金鹰的，因为金鹰队没有得 $0$ 分的比赛。同时，金鹰队的第一场比赛也不可能是同城德比，因为金鹰队第一场比赛输了，并且得了 $6$ 分，野鹅队没有打出过获得至少 $7$ 分的比赛。\n\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^3$，$1\\le A_i,B_i\\le 10^6$，$S_i,T_i\\in\\{$`W`，`L`$\\}$。\n- Subtask 1（$40$ 分）：保证 $N\\le 10$。\n- Subtask 2（$60$ 分）：无特殊限制。\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2018/) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day1.pdf) T1 Geese vs. Hawks。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2018] Geese vs. Hawks", "background": "本题题面来自 [LOJ](https://loj.ac/p/3514)。", "description": "Troy 和 JP 是冰球迷。这个赛季每个冰球队会进行 $N$ 场比赛。每场比赛在两个队之间进行，得分更高者胜。并且不会出现平局的情况。\n\nTroy 最喜欢的队伍是滑铁卢野鹅队，他记录了这个队每场比赛的结果。比赛结果记作一个字符串 $S$。如果野鹅队赢下了第 $i$ 场比赛，则 $S_i=\\texttt{W}$，否则 $S_i=\\texttt{L}$。他同时记下了在第 $i$ 场比赛，他们获得了 $A_i$ 分。\n\nJP 最喜欢的队伍是劳里埃金鹰队，他也记录了这个队每场比赛的结果。比赛结果记作一个字符串 $T$。如果金鹰队赢下了第 $j$ 场比赛，则 $T_j=\\texttt{W}$，否则 $T_j=\\texttt{L}$。他同时记下了在第 $j$ 场比赛，他们获得了 $B_j$ 分。\n\nTroy 和 JP 均按顺序记录了他们喜欢的队伍每场比赛的结果和分数。\n\n一次同城德比是指一场滑铁卢野鹅对劳里埃金鹰的比赛（因为两队主场均在滑铁卢）。因为 Tory 和 JP 都没有记录他们最喜欢的球队在比赛中的对手，所以他们不能确定有没有同城德比，也确定不了哪些场比赛是同城德比。他们想知道，根据他们记录的信息推算，在所有同城德比中，两队取得分数总和的最大值是多少。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含一个长为 $N$ 的字符串 $S$，保证字符串 $S$ 中只包含 $\\texttt{W}$ 和 $\\texttt{L}$。\n\n第三行包含 $N$ 个整数 $A_1,\\ldots ,A_N$。\n\n第四行包含一个长为 $N$ 的字符串 $T$，保证字符串 $T$ 中只包含 $\\texttt{W}$ 和 $\\texttt{L}$。\n\n第五行包含 $N$ 个整数 $B_1,\\ldots ,B_N$。", "outputFormat": "输出一行一个整数，表示在所有同城德比中，两队取得分数总和的最大值。", "hint": "#### 样例解释\n#### 样例 1 解释\n因为两队都赢了比赛，因此不会出现同城德比。\n#### 样例 2 解释\n两队各自进行的第四场比赛可能是同城德比，野鹅队得 $4$ 分，金鹰队得 $2$ 分。野鹅队进行的第三场比赛和金鹰队进行的第二场比赛可能是同城德比，金鹰队得 $5$ 分，野鹅队得 $3$ 分。两队得分总和为 $4 + 2 + 5 + 3 = 14$，并且是得分总和最大的情况。\n\n注意野鹅队的第一场比赛赢了，并且得了 $1$ 分，这场比赛不可能是对金鹰的，因为金鹰队没有得 $0$ 分的比赛。同时，金鹰队的第一场比赛也不可能是同城德比，因为金鹰队第一场比赛输了，并且得了 $6$ 分，野鹅队没有打出过获得至少 $7$ 分的比赛。\n\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^3$，$1\\le A_i,B_i\\le 10^6$，$S_i,T_i\\in\\{$`W`，`L`$\\}$。\n- Subtask 1（$40$ 分）：保证 $N\\le 10$。\n- Subtask 2（$60$ 分）：无特殊限制。\n#### 说明\n本题译自 [Canadian Computing Olympiad 2020](https://cemc.math.uwaterloo.ca/contests/computing/2018/) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day1.pdf) T1 Geese vs. Hawks。", "locale": "zh-CN"}}}
{"pid": "P6714", "type": "P", "difficulty": 5, "samples": [["", "5\n1 2 3 4\n10 9 8\n7 6\n5\n"]], "limits": {"time": [1000], "memory": [131072]}, "tags": ["2018", "提交答案", "Special Judge", "CCO（加拿大）"], "title": "[CCO 2018] Wrong Answer", "background": null, "description": "在一场比赛中，您遇到了一道题：\n> 有一个含 $N$ 个点的完全图，边有边权，您可以操作两个人从第一个点去遍历每个点，仅能从编号较小的点到达编号较大的点，求最小的边权和。\n\n您一看，这不是宝宝题吗，于是您秒了它。\n\n但是，此时一名选手的 Python 提交记录吸引了您的注意：\n```python\ndef Solve(N, A):\n    # A[i][j] is cost of moving from level i to level j\n    # N is the number of levels\n    x, y, sx, sy = 1, 1, 0, 0 # Initialize x and y to 1, sx and sy to 0\n    for i in range(2, N + 1): # loop from 2 to N\n        if sx + A[x][i] < sy + A[y][i]:\n            sx += A[x][i]\n            x = i\n        else:\n            sy += A[y][i]\n            y = i\n    return sx + sy\n```\n您一眼就看出了这是个错解，于是您决定 Hack 它。", "inputFormat": "无需输入。", "outputFormat": "第一行为一个整数 $N$。\n\n接下来 $N-1$ 行，第 $i$ 行有 $N-i$ 个数，分别为 $A_{i,i+1},A_{i,i+2}\\ldots A_{i,n}$，$A_{i,j}$ 表示 $i$ 到 $j$ 的边权。", "hint": "#### SPJ 计分标准\n您需要保证 $2\\le N\\le 100$，$1\\le A_{i,j}\\le 100$，否则，不得分。\n\n您需要保证输出格式正确，否则，您不得分。\n\n如果这份错误代码返回 $X$，而正解是 $Y$，则您将会得到 $\\lceil\\min(25,\\frac{X}{4\\times Y})\\rceil$ 的分数。\n\n译者提醒：为方便计分，SPJ 计分请使用 $100$ 分作为满分。\n\n#### 样例解释\n标解为一个人去第二个点，另一个人去剩下的点，边权和为 $1+2+7+5=15$，而错误代码所返回 $18$，所以可得 $\\lceil \\frac{18}{4\\times 15}\\rceil=1$ 分。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2018](https://cemc.math.uwaterloo.ca/contests/computing/2018) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day1.pdf) T2 Wrong Answer。\n\n感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的 SPJ。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2018] Wrong Answer", "background": null, "description": "在一场比赛中，您遇到了一道题：\n> 有一个含 $N$ 个点的完全图，边有边权，您可以操作两个人从第一个点去遍历每个点，仅能从编号较小的点到达编号较大的点，求最小的边权和。\n\n您一看，这不是宝宝题吗，于是您秒了它。\n\n但是，此时一名选手的 Python 提交记录吸引了您的注意：\n```python\ndef Solve(N, A):\n    # A[i][j] is cost of moving from level i to level j\n    # N is the number of levels\n    x, y, sx, sy = 1, 1, 0, 0 # Initialize x and y to 1, sx and sy to 0\n    for i in range(2, N + 1): # loop from 2 to N\n        if sx + A[x][i] < sy + A[y][i]:\n            sx += A[x][i]\n            x = i\n        else:\n            sy += A[y][i]\n            y = i\n    return sx + sy\n```\n您一眼就看出了这是个错解，于是您决定 Hack 它。", "inputFormat": "无需输入。", "outputFormat": "第一行为一个整数 $N$。\n\n接下来 $N-1$ 行，第 $i$ 行有 $N-i$ 个数，分别为 $A_{i,i+1},A_{i,i+2}\\ldots A_{i,n}$，$A_{i,j}$ 表示 $i$ 到 $j$ 的边权。", "hint": "#### SPJ 计分标准\n您需要保证 $2\\le N\\le 100$，$1\\le A_{i,j}\\le 100$，否则，不得分。\n\n您需要保证输出格式正确，否则，您不得分。\n\n如果这份错误代码返回 $X$，而正解是 $Y$，则您将会得到 $\\lceil\\min(25,\\frac{X}{4\\times Y})\\rceil$ 的分数。\n\n译者提醒：为方便计分，SPJ 计分请使用 $100$ 分作为满分。\n\n#### 样例解释\n标解为一个人去第二个点，另一个人去剩下的点，边权和为 $1+2+7+5=15$，而错误代码所返回 $18$，所以可得 $\\lceil \\frac{18}{4\\times 15}\\rceil=1$ 分。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2018](https://cemc.math.uwaterloo.ca/contests/computing/2018) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day1.pdf) T2 Wrong Answer。\n\n感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的 SPJ。", "locale": "zh-CN"}}}
{"pid": "P6715", "type": "P", "difficulty": 7, "samples": [["2\n20\n5 5", "19"], ["2\n20\n5 20", "24\n"], ["7\n7\n2 8\n6 6\n1 1\n2 4\n2 8\n7 8\n", "23"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "CCO（加拿大）"], "title": "[CCO 2018] Fun Palace", "background": "", "description": "有一个含 $N$ 个点的链，每个点有一个权值。\n\n对于任何 $1\\le i\\le N-1$，都有一条边连接 $(i,i+1)$。\n\n您可以在链中的任意一些节点放置一些生物。\n\n对于第 $i$ 条边，若点 $i$ 至少有 $a_i$ 个生物或点 $i+1$ 至少有 $b_i$ 生物，则该边可以打开。\n\n链是有出口的，如果在 $1$ 号点有 $e$ 个生物，则出口会被打开。\n\n您要确定，至多放置多少个生物，可以使得生物不会打开出口。\n\n**打开了不一定能走过去。**", "inputFormat": "第一行为一个整数 $N$。\n\n第二行为一个整数 $e$。\n\n接下来 $N-1$ 行，一行两个数 $a_i,b_i$。", "outputFormat": "仅一行一个数，表示至多放置多少个生物，可以使得生物不会逃出出口。", "hint": "#### 样例解释\n#### 样例 1 解释\n如果超过 $19$ 个生物，出口就会被打开。\n#### 样例 2 解释\n假设我们放 $24$ 个生物在 $2$ 号点，有 $4$ 个生物就会去到 $1$ 号点，但仍然无法打开出口。\n#### 样例 3 解释\n$9$ 个生物放在 $2$ 号点，$14$ 个生物放在 $7$ 号点。\n\n#### 数据范围及限制\n| 子任务编号 | 分值 | 特殊限制 |\n| :-: | :-: | :-: |\n| 1 | $12$ | $1\\le e\\le 200$，$a_i=b_i=1$ |\n| 2 | $20$ | $1\\le e,a_i,b_i\\le 2$ |\n| 3 | $48$ | $1\\le N,e,a_i,b_i\\le 200$ |\n| 4 | $20$ | 无 |\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^3$，$1\\le e,a_i,b_i\\le 10^4$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2018](https://cemc.math.uwaterloo.ca/contests/computing/2018) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day1.pdf) T3 Fun Palace。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2018] Fun Palace", "background": "", "description": "有一个含 $N$ 个点的链，每个点有一个权值。\n\n对于任何 $1\\le i\\le N-1$，都有一条边连接 $(i,i+1)$。\n\n您可以在链中的任意一些节点放置一些生物。\n\n对于第 $i$ 条边，若点 $i$ 至少有 $a_i$ 个生物或点 $i+1$ 至少有 $b_i$ 生物，则该边可以打开。\n\n链是有出口的，如果在 $1$ 号点有 $e$ 个生物，则出口会被打开。\n\n您要确定，至多放置多少个生物，可以使得生物不会打开出口。\n\n**打开了不一定能走过去。**", "inputFormat": "第一行为一个整数 $N$。\n\n第二行为一个整数 $e$。\n\n接下来 $N-1$ 行，一行两个数 $a_i,b_i$。", "outputFormat": "仅一行一个数，表示至多放置多少个生物，可以使得生物不会逃出出口。", "hint": "#### 样例解释\n#### 样例 1 解释\n如果超过 $19$ 个生物，出口就会被打开。\n#### 样例 2 解释\n假设我们放 $24$ 个生物在 $2$ 号点，有 $4$ 个生物就会去到 $1$ 号点，但仍然无法打开出口。\n#### 样例 3 解释\n$9$ 个生物放在 $2$ 号点，$14$ 个生物放在 $7$ 号点。\n\n#### 数据范围及限制\n| 子任务编号 | 分值 | 特殊限制 |\n| :-: | :-: | :-: |\n| 1 | $12$ | $1\\le e\\le 200$，$a_i=b_i=1$ |\n| 2 | $20$ | $1\\le e,a_i,b_i\\le 2$ |\n| 3 | $48$ | $1\\le N,e,a_i,b_i\\le 200$ |\n| 4 | $20$ | 无 |\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^3$，$1\\le e,a_i,b_i\\le 10^4$。\n\n#### 说明\n本题译自 [Canadian Computing Olympiad 2018](https://cemc.math.uwaterloo.ca/contests/computing/2018) [Day 1](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day1.pdf) T3 Fun Palace。", "locale": "zh-CN"}}}
{"pid": "P6716", "type": "P", "difficulty": 5, "samples": [["1 10 90 3\n1 2\n1 4\n1 10\n", ""], ["5 4 170 4\n2 3\n2 3\n4 3\n5 1\n", ""]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "二分", "交互题", "Special Judge", "CCO（加拿大）"], "title": "[CCO 2018] Gradient Descent", "background": "**本题为交互题。**", "description": "Troy 要和您一起玩游戏，他的游戏要用一个 $R \\times C$ 的棋盘。\n\n现在给定 $N$ 个棋子（从 $1$ 编号到 $N$），第 $i$ 个棋子放置在 $(X_i,Y_i)$ 处，**同一格可能有多个棋子**。\n\nTroy 可以在一秒内将一个棋子移动到与其垂直或水平相邻的格子中，格子的分数就被 Troy 定义为将这 $N$ 个棋子挪到这个格子的秒数的最小值，您要做的就是找棋盘中格子里的分数的最小值。\n\nTroy 不会告诉您 $N$ 的值和每个棋子的位置，但是您可以问 Troy 最多 $K$ 个问题：格子 $(p,q)$ 的分数。\n\n#### 交互策略\n\n**本题为交互题。**\n\n首先，读入三个整数 $R,C,K$ 代表整个棋盘的大小，和您最多能问多少个问题。\n\n读入完这一行后，您的程序将会对提出关于 $(p,q)$ 的分数的问题（格式为 `? p q`），然后您就会得到一个整数 $s$ 带包这个格子的分数。\n\n一旦您的程序确定了棋盘中的格子的分数的最小值，那么就会输出 `! Z` 并终止程序，$Z$ 就代表最终结果。\n\n在输出每一行后，都应刷新缓冲区：\n\n- C/C++：`fflush(stdout)` or `cout << endl `\n- Java：`System.out.flush() `\n- Pascal：`flush(output)`\n\n如果您输出的格式有误，或者提出的问题超过了 $K$ 个，您的答案就是错误的。", "inputFormat": "None", "outputFormat": "None", "hint": "#### 样例说明\n\n对于样例 $1$\n\n|请求|回答|\n|:-:|:-:|\n||`1 10 90`|\n|`? 1 3`|`9`|\n|`? 1 7`|`11`|\n|`? 1 4`|`8`|\n|`! 8`||\n\n棋子的位置应该在 $(1,2)$，$(1,4)$ 和 $(1,10)$，所以我们得到的所有棋盘上的分数的最小值为 $8$（格子 $(1,4)$ 的分数）。\n\n对于样例 $2$\n\n|请求|回答|\n|:-:|:-:|\n||`5 4 170`|\n|`? 2 4`|`11`|\n|`? 1 4`|`15`|\n|`? 3 3`|`7`|\n|`! 7`||\n\n棋子的位置应该在 $(2,3)$，$(2,3)$，$(4,3)$，$(5,1)$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le R,C \\le 10^7$，$1 \\le K \\le 170$，$1 \\le p\\le R$，$1 \\le q \\le C$，$0 \\le s \\le 2 \\times 10^9$，$1 \\le N \\le 100$，$1 \\le X_i \\le R$，$1 \\le Y_i \\le C$。           \n对于 $20\\%$ 的数据，$R=1$，$C \\le 90$，$K=90$。     \n对于另外 $20\\%$ 的数据，$R=1$，$K=90$。        \n对于另外 $20\\%$ 的数据，$K = 170$。       \n对于另外 $20\\%$ 的数据，$K = 100$。          \n对于另外 $20\\%$ 的数据，$K=75$。\n\nspj 和交互库见附加文件。\n\n#### 说明\n\n翻译自 [Canadian Computing Olympiad 2018](https://cemc.math.uwaterloo.ca/contests/computing/2018/) Day 2 [A Gradient Descent](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day2.pdf)。\n\nspj 作者：@[FZzzz](https://www.luogu.com.cn/user/174045)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2018] Gradient Descent", "background": "**本题为交互题。**", "description": "Troy 要和您一起玩游戏，他的游戏要用一个 $R \\times C$ 的棋盘。\n\n现在给定 $N$ 个棋子（从 $1$ 编号到 $N$），第 $i$ 个棋子放置在 $(X_i,Y_i)$ 处，**同一格可能有多个棋子**。\n\nTroy 可以在一秒内将一个棋子移动到与其垂直或水平相邻的格子中，格子的分数就被 Troy 定义为将这 $N$ 个棋子挪到这个格子的秒数的最小值，您要做的就是找棋盘中格子里的分数的最小值。\n\nTroy 不会告诉您 $N$ 的值和每个棋子的位置，但是您可以问 Troy 最多 $K$ 个问题：格子 $(p,q)$ 的分数。\n\n#### 交互策略\n\n**本题为交互题。**\n\n首先，读入三个整数 $R,C,K$ 代表整个棋盘的大小，和您最多能问多少个问题。\n\n读入完这一行后，您的程序将会对提出关于 $(p,q)$ 的分数的问题（格式为 `? p q`），然后您就会得到一个整数 $s$ 带包这个格子的分数。\n\n一旦您的程序确定了棋盘中的格子的分数的最小值，那么就会输出 `! Z` 并终止程序，$Z$ 就代表最终结果。\n\n在输出每一行后，都应刷新缓冲区：\n\n- C/C++：`fflush(stdout)` or `cout << endl `\n- Java：`System.out.flush() `\n- Pascal：`flush(output)`\n\n如果您输出的格式有误，或者提出的问题超过了 $K$ 个，您的答案就是错误的。", "inputFormat": "None", "outputFormat": "None", "hint": "#### 样例说明\n\n对于样例 $1$\n\n|请求|回答|\n|:-:|:-:|\n||`1 10 90`|\n|`? 1 3`|`9`|\n|`? 1 7`|`11`|\n|`? 1 4`|`8`|\n|`! 8`||\n\n棋子的位置应该在 $(1,2)$，$(1,4)$ 和 $(1,10)$，所以我们得到的所有棋盘上的分数的最小值为 $8$（格子 $(1,4)$ 的分数）。\n\n对于样例 $2$\n\n|请求|回答|\n|:-:|:-:|\n||`5 4 170`|\n|`? 2 4`|`11`|\n|`? 1 4`|`15`|\n|`? 3 3`|`7`|\n|`! 7`||\n\n棋子的位置应该在 $(2,3)$，$(2,3)$，$(4,3)$，$(5,1)$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le R,C \\le 10^7$，$1 \\le K \\le 170$，$1 \\le p\\le R$，$1 \\le q \\le C$，$0 \\le s \\le 2 \\times 10^9$，$1 \\le N \\le 100$，$1 \\le X_i \\le R$，$1 \\le Y_i \\le C$。           \n对于 $20\\%$ 的数据，$R=1$，$C \\le 90$，$K=90$。     \n对于另外 $20\\%$ 的数据，$R=1$，$K=90$。        \n对于另外 $20\\%$ 的数据，$K = 170$。       \n对于另外 $20\\%$ 的数据，$K = 100$。          \n对于另外 $20\\%$ 的数据，$K=75$。\n\nspj 和交互库见附加文件。\n\n#### 说明\n\n翻译自 [Canadian Computing Olympiad 2018](https://cemc.math.uwaterloo.ca/contests/computing/2018/) Day 2 [A Gradient Descent](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day2.pdf)。\n\nspj 作者：@[FZzzz](https://www.luogu.com.cn/user/174045)。", "locale": "zh-CN"}}}
{"pid": "P6717", "type": "P", "difficulty": 6, "samples": [["4 3 1\n6 1 2 4\n1 3", "8\n6"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "CCO（加拿大）"], "title": "[CCO 2018] Boring Lectures", "background": "", "description": "有一个长为 $N$ 的数列，第 $i$ 个数为 $a_i$。\n\n有 $Q$ 次修改，第 $j$ 次会将第 $i_j$ 个数改成 $x_j$。\n\n您需要求出在最初和每次修改之后连续的的 $K$ 个元素中，最大值与次大值的和最大是多少。", "inputFormat": "第一行三个整数 $N,K,Q$ 见题目描述。        \n第二行 $N$ 个整数 $a_i$ 为这个序列。    \n接下来 $Q$ 行每行两个整数 $i_j,x_j$ 代表一次更改。", "outputFormat": "$Q+1$ 行第 $j$ 行代表第 $j-1$ 次修改后得到的答案，第一行就代表未修改前得到的答案。", "hint": "#### 样例说明\n\n对于样例 $1$\n\n- 还未修改时，我们选定 $[1,3]$，得到的和为 $6+2=8$\n- 进行第一次修改时，我们选定 $[2,4]$，得到的和为 $2+4=6$\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 10^6$，$2 \\le K \\le N$，$0 \\le Q \\le 10^5$，$0 \\le a_i \\le 10^9$，$1 \\le i_j \\le N$，$0 \\le x_j \\le 10^9$。           \n对于 $20\\%$ 的数据，$Q=0$。             \n对于另外 $40\\%$ 的数据，$N \\le 10^4$。\n\n#### 说明\n\n翻译自 [Canadian Computing Olympiad 2018](https://cemc.math.uwaterloo.ca/contests/computing/2018/) Day 2 [B Boring Lectures](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2018] Boring Lectures", "background": "", "description": "有一个长为 $N$ 的数列，第 $i$ 个数为 $a_i$。\n\n有 $Q$ 次修改，第 $j$ 次会将第 $i_j$ 个数改成 $x_j$。\n\n您需要求出在最初和每次修改之后连续的的 $K$ 个元素中，最大值与次大值的和最大是多少。", "inputFormat": "第一行三个整数 $N,K,Q$ 见题目描述。        \n第二行 $N$ 个整数 $a_i$ 为这个序列。    \n接下来 $Q$ 行每行两个整数 $i_j,x_j$ 代表一次更改。", "outputFormat": "$Q+1$ 行第 $j$ 行代表第 $j-1$ 次修改后得到的答案，第一行就代表未修改前得到的答案。", "hint": "#### 样例说明\n\n对于样例 $1$\n\n- 还未修改时，我们选定 $[1,3]$，得到的和为 $6+2=8$\n- 进行第一次修改时，我们选定 $[2,4]$，得到的和为 $2+4=6$\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 10^6$，$2 \\le K \\le N$，$0 \\le Q \\le 10^5$，$0 \\le a_i \\le 10^9$，$1 \\le i_j \\le N$，$0 \\le x_j \\le 10^9$。           \n对于 $20\\%$ 的数据，$Q=0$。             \n对于另外 $40\\%$ 的数据，$N \\le 10^4$。\n\n#### 说明\n\n翻译自 [Canadian Computing Olympiad 2018](https://cemc.math.uwaterloo.ca/contests/computing/2018/) Day 2 [B Boring Lectures](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6718", "type": "P", "difficulty": 6, "samples": [["6\n1 3 5 6 4 2\n1 2 3 4 5 6", "4\n2 3\n3 6\n2 5\n4 5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2018", "Special Judge", "CCO（加拿大）"], "title": "[CCO 2018] Flop Sorting", "background": "", "description": "Robert 创建了一道线段树题，题目是：\n\n给定长为 $N$ 的排列 $a_i$，我们规定一个翻牌操作为将一个区间的最小值与最大值交换。现在给定您 $Q$ 个翻牌操作，每次对 $[l,r]$ 执行翻牌操作，求进行 $Q$ 次翻牌操作后的最终序列。\n\n搞好了题目描述，接下来要搞数据了。\n\n现在给定了 $N$，初始序列 $a_i$ 和最终序列，求中间要进行的翻牌操作。", "inputFormat": "第一行一个整数代表序列长度 $N$。         \n第二行 $N$ 个整数代表初始序列 $a_i$。    \n第三行 $N$ 个整数代表最终序列。", "outputFormat": "首先第一行一个整数 $Q$ 代表要进行的翻牌操作的次数。    \n接下来 $Q$ 行每行两个整数 $l,r$ 代表对 $[l,r]$ 进行翻牌操作。", "hint": "#### 样例说明\n\n对于样例 $1$，执行的 $4$ 次翻牌操作为：\n\n- 对 $[2,3]$ 进行翻牌操作，交换 $3$ 和 $5$\n- 对 $[3,6]$ 进行翻牌操作，交换 $6$ 和 $2$\n- 对 $[2,5]$ 进行翻牌操作，交换 $5$ 和 $2$\n- 对 $[4,5]$ 进行翻牌操作，交换 $5$ 和 $4$\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le a_i \\le N \\le 4096$，$1 \\le Q \\le 3 \\times 10^5$，$1 \\le l\\le r \\le N$。      \n对于其中 $20\\%$ 的数据，$N \\le 100$。          \n对于另外 $40\\%$ 的数据，$N \\le 2048$。\n\n#### 说明\n\n翻译自 [Canadian Computing Olympiad 2018](https://cemc.math.uwaterloo.ca/contests/computing/2018/) Day 2 [C Flop Shorting](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2018] Flop Sorting", "background": "", "description": "Robert 创建了一道线段树题，题目是：\n\n给定长为 $N$ 的排列 $a_i$，我们规定一个翻牌操作为将一个区间的最小值与最大值交换。现在给定您 $Q$ 个翻牌操作，每次对 $[l,r]$ 执行翻牌操作，求进行 $Q$ 次翻牌操作后的最终序列。\n\n搞好了题目描述，接下来要搞数据了。\n\n现在给定了 $N$，初始序列 $a_i$ 和最终序列，求中间要进行的翻牌操作。", "inputFormat": "第一行一个整数代表序列长度 $N$。         \n第二行 $N$ 个整数代表初始序列 $a_i$。    \n第三行 $N$ 个整数代表最终序列。", "outputFormat": "首先第一行一个整数 $Q$ 代表要进行的翻牌操作的次数。    \n接下来 $Q$ 行每行两个整数 $l,r$ 代表对 $[l,r]$ 进行翻牌操作。", "hint": "#### 样例说明\n\n对于样例 $1$，执行的 $4$ 次翻牌操作为：\n\n- 对 $[2,3]$ 进行翻牌操作，交换 $3$ 和 $5$\n- 对 $[3,6]$ 进行翻牌操作，交换 $6$ 和 $2$\n- 对 $[2,5]$ 进行翻牌操作，交换 $5$ 和 $2$\n- 对 $[4,5]$ 进行翻牌操作，交换 $5$ 和 $4$\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le a_i \\le N \\le 4096$，$1 \\le Q \\le 3 \\times 10^5$，$1 \\le l\\le r \\le N$。      \n对于其中 $20\\%$ 的数据，$N \\le 100$。          \n对于另外 $40\\%$ 的数据，$N \\le 2048$。\n\n#### 说明\n\n翻译自 [Canadian Computing Olympiad 2018](https://cemc.math.uwaterloo.ca/contests/computing/2018/) Day 2 [C Flop Shorting](https://cemc.math.uwaterloo.ca/contests/computing/2018/stage%202/day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6719", "type": "P", "difficulty": 6, "samples": [["4\n0 0\n1 0\n1 1\n0 1\n", "0.293 "], ["4\n0 0\n3 0\n3 1\n0 1\n", "0.500"], ["6\n0 0\n8 0\n8 6\n4 8\n2 8\n0 4\n", "2.189"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2011", "Special Judge", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2011] 2circles", "background": "", "description": "在平面直角坐标系上有一个含 $N$ 个点的凸多边形，现在想在里面放入两个半径为 $R$ 的圆，使两个圆不重合，求 $R$ 的最大值。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来 $N$ 行，一行两个整数 $x_i,y_i$，表示该多边形第 $i$ 个点的坐标。 ", "outputFormat": "仅一个实数 $R$。", "hint": "#### 样例 1 解释\n将两个圆心放在该正方形的对角线上的时候，半径最长，如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xd9hqgbp.png)\n\n半径为 $\\frac{\\sqrt{2}}{2\\times (1+\\sqrt{2})}\\approx 0.293$。\n#### SPJ 计分标准\n若您的答案与标准答案误差不超过 $0.001$，您就会 AC。\n#### 数据范围及限制\n- 对于 $10\\%$ 的数据，保证 $N=3$。\n- 对于 $40\\%$ 的数据，保证 $N\\le 250$。\n- 对于 $100\\%$ 的数据，保证 $3\\le N\\le 5\\times 10^4$，$-10^7\\le x_i,y_i\\le 10^7$，这些点按逆时针方向给出。\n\n#### 说明\n本题译自 [Balkan Olympiad in Informatics 2011](http://www.boi2011.ro/boi2011/) [Day 1](http://www.boi2011.ro/boi2011/?pagina=probleme) [T1 2circles](http://www.boi2011.ro/resurse/tasks/2circles.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2011] 2circles", "background": "", "description": "在平面直角坐标系上有一个含 $N$ 个点的凸多边形，现在想在里面放入两个半径为 $R$ 的圆，使两个圆不重合，求 $R$ 的最大值。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来 $N$ 行，一行两个整数 $x_i,y_i$，表示该多边形第 $i$ 个点的坐标。 ", "outputFormat": "仅一个实数 $R$。", "hint": "#### 样例 1 解释\n将两个圆心放在该正方形的对角线上的时候，半径最长，如图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xd9hqgbp.png)\n\n半径为 $\\frac{\\sqrt{2}}{2\\times (1+\\sqrt{2})}\\approx 0.293$。\n#### SPJ 计分标准\n若您的答案与标准答案误差不超过 $0.001$，您就会 AC。\n#### 数据范围及限制\n- 对于 $10\\%$ 的数据，保证 $N=3$。\n- 对于 $40\\%$ 的数据，保证 $N\\le 250$。\n- 对于 $100\\%$ 的数据，保证 $3\\le N\\le 5\\times 10^4$，$-10^7\\le x_i,y_i\\le 10^7$，这些点按逆时针方向给出。\n\n#### 说明\n本题译自 [Balkan Olympiad in Informatics 2011](http://www.boi2011.ro/boi2011/) [Day 1](http://www.boi2011.ro/boi2011/?pagina=probleme) [T1 2circles](http://www.boi2011.ro/resurse/tasks/2circles.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6720", "type": "P", "difficulty": 0, "samples": [], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2011", "交互题", "Special Judge", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2011] decrypt", "background": "这是一道 **IO 交互题**。", "description": "我们随机了三个数 $R_0,R_1,R_2$，并按以下规则生成了整个 $R$ 序列：\n\n$$R_n=R_{n-2}\\oplus R_{n-1}$$\n\n其中 $\\oplus$ 为异或运算。\n\n此外我们有一个函数 $M$，其是一个双射，即我们保证对于 $x\\not=y$，$M(x)\\not=M(y)$。\n\n您的目标是，经过多次询问后，确定 $R_0,R_1,R_2,M(0),M(1),\\ldots,M(255)$。\n\n#### 交互方式\n你的程序应从标准输入中读入，向标准输出中输出。\n\n您可以向标准输出中输出一个整数 $A$，如果这是您的第 $N$ 次询问，您将会读入：\n\n$$M(A\\oplus R_{N-1})$$\n\n如果您已经得到了所有答案，请输出一行字符串 `SOLUTION`，然后输出 $259$ 行，分别是 $R_0,R_1,R_2,M(0),M(1),\\ldots,M(255)$。\n\n**记得在输出每一行后清空缓冲区！**", "inputFormat": "", "outputFormat": "", "hint": "#### 样例\n（因为样例组不好表示所以放到这里）\n\n我们人为规定 $R_0=0,R_1=1,R_2=3,M(i)=(i+1)\\bmod 256$。\n\n可得 $R_3=1$。\n\n| 输出 | 输入 | 解释 |\n| :-: | :-: | :-: |\n| $10$ | $11$ | $M(10\\oplus 0)=M(10)=11$ |\n| $10$ | $12$ | $M(10\\oplus 1)=M(11)=12$ |\n| $11$ | $9$ | $M(11\\oplus 3)=M(8)=9$ |\n| $12$ | $14$ | $M(12\\oplus 1)=M(13)=14$ |\n| … |  | 省略了一部分输出 |\n| ``SOLUTION`` |  | 省略了一部分输出 |\n\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证输入的数、输出的数、$R$ 数组、$M(x)$ 中的 $x$ 与 $M(x)$ 均 $\\ge 0$ 且 $\\le 255$。\n\n#### 计分策略\n如果您输出的数并不在上述范围内，您保龄。\n\n您的询问次数需要少于 $320$，否则，您保龄。\n\n#### 提示\n清空缓冲区的方法：\n\nC：\n\n```c\nprintf(\"%d\\n\", q);\nfflush(stdout); \n```\n\nC++：\n```cpp\ncout<<q<< '\\n';\ncout.flush();\n```\n\nPascal：\n```pascal\nwriteln(q);\nflush(output);\n```\n\n#### 说明\n本题译自 [Balkan Olympiad in Informatics 2011](http://www.boi2011.ro/boi2011/) [Day 1](http://www.boi2011.ro/boi2011/?pagina=probleme) [T2 decrypt](http://www.boi2011.ro/resurse/tasks/decrypt.pdf)。\n\n感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的交互库。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2011] decrypt", "background": "这是一道 **IO 交互题**。", "description": "我们随机了三个数 $R_0,R_1,R_2$，并按以下规则生成了整个 $R$ 序列：\n\n$$R_n=R_{n-2}\\oplus R_{n-1}$$\n\n其中 $\\oplus$ 为异或运算。\n\n此外我们有一个函数 $M$，其是一个双射，即我们保证对于 $x\\not=y$，$M(x)\\not=M(y)$。\n\n您的目标是，经过多次询问后，确定 $R_0,R_1,R_2,M(0),M(1),\\ldots,M(255)$。\n\n#### 交互方式\n你的程序应从标准输入中读入，向标准输出中输出。\n\n您可以向标准输出中输出一个整数 $A$，如果这是您的第 $N$ 次询问，您将会读入：\n\n$$M(A\\oplus R_{N-1})$$\n\n如果您已经得到了所有答案，请输出一行字符串 `SOLUTION`，然后输出 $259$ 行，分别是 $R_0,R_1,R_2,M(0),M(1),\\ldots,M(255)$。\n\n**记得在输出每一行后清空缓冲区！**", "inputFormat": "", "outputFormat": "", "hint": "#### 样例\n（因为样例组不好表示所以放到这里）\n\n我们人为规定 $R_0=0,R_1=1,R_2=3,M(i)=(i+1)\\bmod 256$。\n\n可得 $R_3=1$。\n\n| 输出 | 输入 | 解释 |\n| :-: | :-: | :-: |\n| $10$ | $11$ | $M(10\\oplus 0)=M(10)=11$ |\n| $10$ | $12$ | $M(10\\oplus 1)=M(11)=12$ |\n| $11$ | $9$ | $M(11\\oplus 3)=M(8)=9$ |\n| $12$ | $14$ | $M(12\\oplus 1)=M(13)=14$ |\n| … |  | 省略了一部分输出 |\n| ``SOLUTION`` |  | 省略了一部分输出 |\n\n#### 数据范围及限制\n对于 $100\\%$ 的数据，保证输入的数、输出的数、$R$ 数组、$M(x)$ 中的 $x$ 与 $M(x)$ 均 $\\ge 0$ 且 $\\le 255$。\n\n#### 计分策略\n如果您输出的数并不在上述范围内，您保龄。\n\n您的询问次数需要少于 $320$，否则，您保龄。\n\n#### 提示\n清空缓冲区的方法：\n\nC：\n\n```c\nprintf(\"%d\\n\", q);\nfflush(stdout); \n```\n\nC++：\n```cpp\ncout<<q<< '\\n';\ncout.flush();\n```\n\nPascal：\n```pascal\nwriteln(q);\nflush(output);\n```\n\n#### 说明\n本题译自 [Balkan Olympiad in Informatics 2011](http://www.boi2011.ro/boi2011/) [Day 1](http://www.boi2011.ro/boi2011/?pagina=probleme) [T2 decrypt](http://www.boi2011.ro/resurse/tasks/decrypt.pdf)。\n\n感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的交互库。", "locale": "zh-CN"}}}
{"pid": "P6721", "type": "P", "difficulty": 4, "samples": [["5\n1 3 3 4 5\n", "1 9 3 2 4 8 7 5 6"]], "limits": {"time": [300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2011", "Special Judge", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2011] medians", "background": "", "description": "设 $A$ 为 $1,2,3,\\ldots,2\\times N-1$ 的任意一种排列。\n\n我们定义 $A$ 的前缀中位数为一个长度为 $N$ 的数列 $B$，$B_i$ 为 $A_1,A_2,\\ldots,A_{2\\times i-1}$ 的中位数。\n\n我们将会给出 $B$ 数列，请构造一个数列 $A$，使得其前缀中位数为 $B$。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行 $N$ 个整数，表示数列 $B$。", "outputFormat": "仅一行 $2\\times N+1$ 个整数，表示您构造的数列 $A$。\n\n数据一定有解，您只需要输出其中一种。", "hint": "#### 数据范围及限制\n- 对于 $60\\%$ 的数据，保证 $N\\le 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^5$，$1\\le A_i,B_i\\le 2\\times N-1$，数据一定有解。\n\n#### 说明\n本题译自 [Balkan Olympiad in Informatics 2011](http://www.boi2011.ro/boi2011/) [Day 1](http://www.boi2011.ro/boi2011/?pagina=probleme) [T3 medians](http://www.boi2011.ro/resurse/tasks/medians.pdf)。\n\n感谢 @[using](https://www.luogu.com.cn/user/193198) 提供的 SPJ。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2011] medians", "background": "", "description": "设 $A$ 为 $1,2,3,\\ldots,2\\times N-1$ 的任意一种排列。\n\n我们定义 $A$ 的前缀中位数为一个长度为 $N$ 的数列 $B$，$B_i$ 为 $A_1,A_2,\\ldots,A_{2\\times i-1}$ 的中位数。\n\n我们将会给出 $B$ 数列，请构造一个数列 $A$，使得其前缀中位数为 $B$。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行 $N$ 个整数，表示数列 $B$。", "outputFormat": "仅一行 $2\\times N+1$ 个整数，表示您构造的数列 $A$。\n\n数据一定有解，您只需要输出其中一种。", "hint": "#### 数据范围及限制\n- 对于 $60\\%$ 的数据，保证 $N\\le 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^5$，$1\\le A_i,B_i\\le 2\\times N-1$，数据一定有解。\n\n#### 说明\n本题译自 [Balkan Olympiad in Informatics 2011](http://www.boi2011.ro/boi2011/) [Day 1](http://www.boi2011.ro/boi2011/?pagina=probleme) [T3 medians](http://www.boi2011.ro/resurse/tasks/medians.pdf)。\n\n感谢 @[using](https://www.luogu.com.cn/user/193198) 提供的 SPJ。", "locale": "zh-CN"}}}
{"pid": "P6722", "type": "P", "difficulty": 4, "samples": [["5\n5 2\n1 2 1\n2 3 1\n3 4 1\n4 5 1\n5 3\n1 2 1\n2 3 1\n3 4 1\n4 5 1\n5 8\n1 3 3\n1 2 1\n2 4 6\n2 5 2\n5 2\n1 3 3\n1 2 1\n2 4 6\n2 5 2\n7 4\n1 2 3\n1 3 3\n2 5 3\n2 6 3\n3 7 3\n2 4 2", "Baka Chino\nYes\nYes\nBaka Chino\nBaka Chino"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "搜索", "图论", "二分图", "树的直径"], "title": "「MCOI-01」Village 村庄", "background": "今天，珂爱善良的0x3喵酱骑着一匹小马来到了一个村庄。\n\n“诶，这个村庄的布局 ……”   \n“好像之前我玩 Ciste 的地方啊 qwq”\n\n0x3喵酱有一个地图，地图有着这个村庄的信息。\n\n然后0x3喵酱要通过这张地图来判断 Ciste 有解无解啦 ~\n\n注：Ciste 是《请问您今天要来点兔子吗》中的一种藏宝图游戏", "description": "村庄被简化为一个 $n$ 个节点（编号为 $1$ 到 $n$）和 $n-1$ 条边构成的无向连通图。\n\n0x3喵酱认为这个无向图里的信息跟满足以下条件的新图有关：\n\n- 新图的点集与原图相同\n- 在新图中 $u,v$ 之间有无向边 是 在原图中 $dis(u,v) \\ge k$ 的**充分必要条件** （$k$ 为给定常量，$dis(u,v)$ 表示编号为 $u$ 的点到编号为 $v$ 的点最短路的长度）\n\n0x3喵酱还认为这个\"新图\"如果为二分图，则 Ciste \"有解\"，如果\"新图\"不是二分图这个 Ciste \"无解\"。（如果您不知道二分图请翻到提示）\n\n那么0x3喵酱想请您判断一下这个 Ciste 是否\"有解\"。", "inputFormat": "第一行包含一个正整数 $ T $，表示有 $ T $ 组数据。  \n对于每组数据第一行包含两个正整数 $ n,k $。接下来 $ n-1 $ 行，每行包含三个正整数 $ x,y,v $ 表示编号为 $ x $ 的点到编号为 $ y $ 的点有一条边权为 $ v $  的无向边。  \n输入数据保证合法。\n", "outputFormat": "对于每一组数据包含一行，如果“有解”输出 `Yes`，否则输出 `Baka Chino`。", "hint": "#### 样例解析\n\n对于样例中的 **第一组** 数据：\n\n原图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9f9zh4b2.png)\n新图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dg4es91e.png)\n\n新图不为二分图，故输出 `Baka Chino`。\n\n对于 **第三组** 数据：\n\n原图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mku4v6uo.png)\n\n新图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/15o3x3zz.png)\n\n新图为二分图，故输出 `Yes`。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n- Subtask 1（16 pts）$\\ $ ：$n \\le 10$。\n- Subtask 2（24 pts）$\\ $ ：$n \\le 100$。\n- Subtask 3（8 pts）$\\ $ ：$n \\le 1000$。\n- Subtask 4（28 pts）：图退化成一条链。\n- Subtask 5（24 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$n \\le 10^5$，$T \\le 10$，$v \\le 1000$，$k \\le 1000000$。\n\n本题数据使用 [CYaRon](https://www.luogu.org/discuss/show?postid=11410) 生成。\n\n#### 提示\n\n\n**二分图** 又称作二部图，是图论中的一种特殊模型。设 $G=(V,E)$ 是一个无向图，如果顶点 $V$ 可分割为两个互不相交的子集 $(A,B)$，并且图中的每条边 $(i,j)$ 所关联的两个顶点 $i$ 和 $j$ 分别属于这两个不同的顶点集 $(i \\in A,j \\in B)$，则称图 $G$ 为一个二分图。（摘自[百度百科](https://baike.baidu.com/item/%E4%BA%8C%E5%88%86%E5%9B%BE/9089095?fr=aladdin)）\n\n#### 说明\n\nMinecraft OI Round 1 A\n\n- Idea：0x3喵酱\n- Solution/Std：0x3喵酱\n- Data：0x3喵酱\n- Tester：tarjin", "locale": "zh-CN", "translations": {"en": {"title": "\"MCOI-01\" Village", "background": "Today, the kind and lovely 0x3 Miaojang rode a little pony to a village.\n\n“Eh, the layout of this village...”\n“Feels like the place where I played Ciste before, qwq.”\n\n0x3 Miaojang has a map that contains information about this village.\n\nThen 0x3 Miaojang wants to use this map to determine whether Ciste has a solution or not.\n\nNote: Ciste is a treasure-map game in *Is the Order a Rabbit?*.", "description": "The village is simplified into an undirected connected graph with $n$ nodes (numbered from $1$ to $n$) and $n-1$ edges.\n\n0x3 Miaojang thinks the information in this undirected graph is related to a new graph that satisfies the following conditions:\n\n- The vertex set of the new graph is the same as that of the original graph.\n- In the new graph, there is an undirected edge between $u$ and $v$ if and only if $dis(u,v) \\ge k$ in the original graph ($k$ is a given constant, and $dis(u,v)$ is the length of the shortest path from node $u$ to node $v$).\n\n0x3 Miaojang also believes that if this \"new graph\" is a bipartite graph, then Ciste \"has a solution\"; if this \"new graph\" is not a bipartite graph, then this Ciste \"has no solution\". (If you do not know what a bipartite graph is, please see the Hint.)\n\nSo 0x3 Miaojang would like you to determine whether this Ciste \"has a solution\".", "inputFormat": "The first line contains a positive integer $T$, meaning there are $T$ test cases.  \nFor each test case, the first line contains two positive integers $n,k$. Then follow $n-1$ lines, each containing three positive integers $x,y,v$, meaning there is an undirected edge of weight $v$ between node $x$ and node $y$.  \nThe input is guaranteed to be valid.", "outputFormat": "For each test case, output one line: if it \"has a solution\", output `Yes`, otherwise output `Baka Chino`.", "hint": "#### Sample Explanation\n\nFor the **first** test case in the samples:\n\nOriginal graph:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9f9zh4b2.png)\nNew graph:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dg4es91e.png)\n\nThe new graph is not bipartite, so output `Baka Chino`.\n\nFor the **third** test case in the samples:\n\nOriginal graph:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mku4v6uo.png)\n\nNew graph:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/15o3x3zz.png)\n\nThe new graph is bipartite, so output `Yes`.\n\n#### Constraints\n\n**This problem uses bundled testdata**.\n\n- Subtask 1 (16 pts): $n \\le 10$.\n- Subtask 2 (24 pts): $n \\le 100$.\n- Subtask 3 (8 pts): $n \\le 1000$.\n- Subtask 4 (28 pts): the graph degenerates into a chain.\n- Subtask 5 (24 pts): no special restrictions.\n\nFor $100\\%$ of the testdata, $n \\le 10^5$, $T \\le 10$, $v \\le 1000$, $k \\le 1000000$.\n\nThe testdata of this problem is generated using [CYaRon](https://www.luogu.org/discuss/show?postid=11410).\n\n#### Hint\n\nA **bipartite graph** (also called a bipartite graph / \"erbufen tu\") is a special model in graph theory. Let $G=(V,E)$ be an undirected graph. If the vertex set $V$ can be divided into two disjoint subsets $(A,B)$, and every edge $(i,j)$ in the graph connects two vertices $i$ and $j$ that belong to these two different sets respectively $(i \\in A,j \\in B)$, then the graph $G$ is called a bipartite graph. (Quoted from [Baidu Baike](https://baike.baidu.com/item/%E4%BA%8C%E5%88%86%E5%9B%BE/9089095?fr=aladdin).)\n\n#### Notes\n\nMinecraft OI Round 1 A\n\n- Idea: 0x3 Miaojang.\n- Solution/Std: 0x3 Miaojang.\n- Data: 0x3 Miaojang.\n- Tester: tarjin.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "「MCOI-01」Village 村庄", "background": "今天，珂爱善良的0x3喵酱骑着一匹小马来到了一个村庄。\n\n“诶，这个村庄的布局 ……”   \n“好像之前我玩 Ciste 的地方啊 qwq”\n\n0x3喵酱有一个地图，地图有着这个村庄的信息。\n\n然后0x3喵酱要通过这张地图来判断 Ciste 有解无解啦 ~\n\n注：Ciste 是《请问您今天要来点兔子吗》中的一种藏宝图游戏", "description": "村庄被简化为一个 $n$ 个节点（编号为 $1$ 到 $n$）和 $n-1$ 条边构成的无向连通图。\n\n0x3喵酱认为这个无向图里的信息跟满足以下条件的新图有关：\n\n- 新图的点集与原图相同\n- 在新图中 $u,v$ 之间有无向边 是 在原图中 $dis(u,v) \\ge k$ 的**充分必要条件** （$k$ 为给定常量，$dis(u,v)$ 表示编号为 $u$ 的点到编号为 $v$ 的点最短路的长度）\n\n0x3喵酱还认为这个\"新图\"如果为二分图，则 Ciste \"有解\"，如果\"新图\"不是二分图这个 Ciste \"无解\"。（如果您不知道二分图请翻到提示）\n\n那么0x3喵酱想请您判断一下这个 Ciste 是否\"有解\"。", "inputFormat": "第一行包含一个正整数 $ T $，表示有 $ T $ 组数据。  \n对于每组数据第一行包含两个正整数 $ n,k $。接下来 $ n-1 $ 行，每行包含三个正整数 $ x,y,v $ 表示编号为 $ x $ 的点到编号为 $ y $ 的点有一条边权为 $ v $  的无向边。  \n输入数据保证合法。\n", "outputFormat": "对于每一组数据包含一行，如果“有解”输出 `Yes`，否则输出 `Baka Chino`。", "hint": "#### 样例解析\n\n对于样例中的 **第一组** 数据：\n\n原图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9f9zh4b2.png)\n新图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dg4es91e.png)\n\n新图不为二分图，故输出 `Baka Chino`。\n\n对于 **第三组** 数据：\n\n原图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mku4v6uo.png)\n\n新图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/15o3x3zz.png)\n\n新图为二分图，故输出 `Yes`。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n- Subtask 1（16 pts）$\\ $ ：$n \\le 10$。\n- Subtask 2（24 pts）$\\ $ ：$n \\le 100$。\n- Subtask 3（8 pts）$\\ $ ：$n \\le 1000$。\n- Subtask 4（28 pts）：图退化成一条链。\n- Subtask 5（24 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$n \\le 10^5$，$T \\le 10$，$v \\le 1000$，$k \\le 1000000$。\n\n本题数据使用 [CYaRon](https://www.luogu.org/discuss/show?postid=11410) 生成。\n\n#### 提示\n\n\n**二分图** 又称作二部图，是图论中的一种特殊模型。设 $G=(V,E)$ 是一个无向图，如果顶点 $V$ 可分割为两个互不相交的子集 $(A,B)$，并且图中的每条边 $(i,j)$ 所关联的两个顶点 $i$ 和 $j$ 分别属于这两个不同的顶点集 $(i \\in A,j \\in B)$，则称图 $G$ 为一个二分图。（摘自[百度百科](https://baike.baidu.com/item/%E4%BA%8C%E5%88%86%E5%9B%BE/9089095?fr=aladdin)）\n\n#### 说明\n\nMinecraft OI Round 1 A\n\n- Idea：0x3喵酱\n- Solution/Std：0x3喵酱\n- Data：0x3喵酱\n- Tester：tarjin", "locale": "zh-CN"}}}
{"pid": "P6723", "type": "P", "difficulty": 1, "samples": [["1\n100\n4", "4\n40"], ["100\n500\n12", "129\n480"], ["1\n10000\n1", "1\n10000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #5] ZAMKA", "background": "", "description": "给定三个整数 $L,D,X$，你需要找到两个整数 $N,M$，使得：\n\n- $N$ 为满足条件的最小整数，$L\\le N\\le D$ 且 $N$ 的各位数字之和为 $X$；\n- $M$ 为满足条件的最大整数，$L\\le M\\le D$ 且 $M$ 的各位数字之和为 $X$。\n\n保证 $N,M$ 一定存在。", "inputFormat": "输入共三行。\n\n第一行一个整数 $L$，第二行一个整数 $D$，第三行一个整数 $X$。", "outputFormat": "输出共两行。\n\n第一行为一个整数 $N$，第二行为一个整数 $M$。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le L\\le D\\le 10^4$，$1\\le X\\le 36$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T1 ZAMKA***。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #5] ZAMKA", "background": "", "description": "给定三个整数 $L,D,X$，你需要找到两个整数 $N,M$，使得：\n\n- $N$ 为满足条件的最小整数，$L\\le N\\le D$ 且 $N$ 的各位数字之和为 $X$；\n- $M$ 为满足条件的最大整数，$L\\le M\\le D$ 且 $M$ 的各位数字之和为 $X$。\n\n保证 $N,M$ 一定存在。", "inputFormat": "输入共三行。\n\n第一行一个整数 $L$，第二行一个整数 $D$，第三行一个整数 $X$。", "outputFormat": "输出共两行。\n\n第一行为一个整数 $N$，第二行为一个整数 $M$。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le L\\le D\\le 10^4$，$1\\le X\\le 36$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T1 ZAMKA***。", "locale": "zh-CN"}}}
{"pid": "P6724", "type": "P", "difficulty": 2, "samples": [["aaaa", "a"], ["ab ", "-1"], ["bbabab", "bba"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #5] MULTIGRAM", "background": "", "description": "定义由多个相同的单词首尾相连组成的字符串为复词，定义组成这个字符串的单词为词根。你需要判断它是否为复词。如果是，你需要找到其中第一个出现的词根。如果有多种可能的词根，请输出长度最短的。不是复词则输出 `-1`。\n\n**注意：如果两个字符串经过字母顺序的改变后能够完全相同，则认作同一个单词。**", "inputFormat": "输入一行一个由小写字母组成的字符串。", "outputFormat": "如果给定的字符串不是复词，则输出 `-1`。\n\n否则输出第一个出现的长度最短的词根。", "hint": "#### 样例解释\n\n##### 样例 $1$\n\n注意到 `aa` 也是第一个出现的词根，但 `a` 是最短的。\n\n##### 样例 $2$\n\n这个字符串仅由单词 `ab` 构成，不是复词。\n\n##### 样例 $3$\n\n字符串由两个相同的单词 `bba` 和`bab` 组成，第一个出现的为 `bba`。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，字符串的长度不超过 $10^5$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T2 MULTIGRAM***。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #5] MULTIGRAM", "background": "", "description": "定义由多个相同的单词首尾相连组成的字符串为复词，定义组成这个字符串的单词为词根。你需要判断它是否为复词。如果是，你需要找到其中第一个出现的词根。如果有多种可能的词根，请输出长度最短的。不是复词则输出 `-1`。\n\n**注意：如果两个字符串经过字母顺序的改变后能够完全相同，则认作同一个单词。**", "inputFormat": "输入一行一个由小写字母组成的字符串。", "outputFormat": "如果给定的字符串不是复词，则输出 `-1`。\n\n否则输出第一个出现的长度最短的词根。", "hint": "#### 样例解释\n\n##### 样例 $1$\n\n注意到 `aa` 也是第一个出现的词根，但 `a` 是最短的。\n\n##### 样例 $2$\n\n这个字符串仅由单词 `ab` 构成，不是复词。\n\n##### 样例 $3$\n\n字符串由两个相同的单词 `bba` 和`bab` 组成，第一个出现的为 `bba`。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，字符串的长度不超过 $10^5$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T2 MULTIGRAM***。", "locale": "zh-CN"}}}
{"pid": "P6725", "type": "P", "difficulty": 3, "samples": [["5 3\n2 4 2 3 4", "39"], ["5 1\n1 0 1 1 1", "4"], ["5 2\n3 3 4 0 0", "31"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #5] PERICA", "background": "", "description": "给定一个长度为 $N$ 的序列 $a_1,a_2,\\dots,a_N$。\n\n请你求出所有 $K$ 个数的组合中最大数之和 $\\bmod\\ 10^9+7$ 的结果。", "inputFormat": "输入第一行两个整数 $N,K$。\n\n第二行一个长度为 $N$ 的序列 $a_1,a_2,\\dots, a_N$。", "outputFormat": "输出一行一个整数，为所有 $K$ 个数的组合中最大数之和 $\\bmod\\ 10^9+7$ 的结果。", "hint": "#### 样例解释\n\n##### 样例 $1$\n\n所有的 $K$ 个数的组合为：$[2, 4, 2], [2, 4, 3], [2, 4, 4], [2, 2, 3], [2, 2, 4], [2, 3,\n4], [4, 2, 3], [4, 2, 4], [4, 3, 4], [2, 3, 4]$。\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，$N\\le 10^3$；  \n对于 $100\\%$ 的数据，$1\\le N\\le 10^5$，$1\\le K\\le 50$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T3 PERICA***。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #5] PERICA", "background": "", "description": "给定一个长度为 $N$ 的序列 $a_1,a_2,\\dots,a_N$。\n\n请你求出所有 $K$ 个数的组合中最大数之和 $\\bmod\\ 10^9+7$ 的结果。", "inputFormat": "输入第一行两个整数 $N,K$。\n\n第二行一个长度为 $N$ 的序列 $a_1,a_2,\\dots, a_N$。", "outputFormat": "输出一行一个整数，为所有 $K$ 个数的组合中最大数之和 $\\bmod\\ 10^9+7$ 的结果。", "hint": "#### 样例解释\n\n##### 样例 $1$\n\n所有的 $K$ 个数的组合为：$[2, 4, 2], [2, 4, 3], [2, 4, 4], [2, 2, 3], [2, 2, 4], [2, 3,\n4], [4, 2, 3], [4, 2, 4], [4, 3, 4], [2, 3, 4]$。\n\n#### 数据规模与约定\n\n对于 $40\\%$ 的数据，$N\\le 10^3$；  \n对于 $100\\%$ 的数据，$1\\le N\\le 10^5$，$1\\le K\\le 50$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T3 PERICA***。", "locale": "zh-CN"}}}
{"pid": "P6726", "type": "P", "difficulty": 3, "samples": [["3 1", "3 1 2"], ["4 1", "4 3 1 2"], ["8 17", "6 2 3 1 8 4 5 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2015", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #5] POPLAVA", "background": "", "description": "有一个由 $N$ 列组成的柱状图，从左至右的柱子高度分别为 $h_1,h_2,\\dots,h_N$。\n\n现在你需要向其中储水，柱状图的容量定义为使得水的结构“稳定”时最多所能储水的量。即水在重力作用下不会流动。下图为一个稳定的例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7tnaf06j.png)\n\n具体来说，我们设从左至右每一列上水的高度为 $v_1,v_2,\\dots,v_N$。记 $s_i=h_i+v_i$ ，当满足下列条件时为稳定状态：\n\n- 对于任意的 $i\\geq2$，当$v_i>0$ 时，有$s_i\\le s_{i-1}$；\n\n- 对于任意的 $i\\le N-1$，当$v_i>0$ 时，有$s_i\\le s_{i+1}$；\n\n- $v_1=v_N=0$。\n\n现在你需要选择一个 $1\\sim N$ 的排列作为柱子 $h_1,h_2,\\dots,h_N$ 的高度，使得柱状图的容量为 $X$。如果不存在，则输出 `-1`。如果有多种方案，输出任意一种即可。\n\n", "inputFormat": "输入一行两个整数 $N,X$。", "outputFormat": "如果方案不存在，输出 `-1`；\n\n否则输出一行 $N$个整数，为 $h_1,h_2,\\dots,h_N$。**输出任意一种方案即可，本题使用 SPJ。**", "hint": "#### 样例解释\n\n##### 样例 $1$\n\n$v_1=0,v_2=1,v_3=0$。\n\n##### 样例 $2$\n\n$v_1=0,v_2=0,v_3=1,v_4=0$。\n\n##### 样例 $3$\n\n此样例与题图所对应。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le N\\le 10^6$，$1\\le X\\le 10^{15}$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T4 POPLAVA***。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #5] POPLAVA", "background": "", "description": "有一个由 $N$ 列组成的柱状图，从左至右的柱子高度分别为 $h_1,h_2,\\dots,h_N$。\n\n现在你需要向其中储水，柱状图的容量定义为使得水的结构“稳定”时最多所能储水的量。即水在重力作用下不会流动。下图为一个稳定的例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7tnaf06j.png)\n\n具体来说，我们设从左至右每一列上水的高度为 $v_1,v_2,\\dots,v_N$。记 $s_i=h_i+v_i$ ，当满足下列条件时为稳定状态：\n\n- 对于任意的 $i\\geq2$，当$v_i>0$ 时，有$s_i\\le s_{i-1}$；\n\n- 对于任意的 $i\\le N-1$，当$v_i>0$ 时，有$s_i\\le s_{i+1}$；\n\n- $v_1=v_N=0$。\n\n现在你需要选择一个 $1\\sim N$ 的排列作为柱子 $h_1,h_2,\\dots,h_N$ 的高度，使得柱状图的容量为 $X$。如果不存在，则输出 `-1`。如果有多种方案，输出任意一种即可。\n\n", "inputFormat": "输入一行两个整数 $N,X$。", "outputFormat": "如果方案不存在，输出 `-1`；\n\n否则输出一行 $N$个整数，为 $h_1,h_2,\\dots,h_N$。**输出任意一种方案即可，本题使用 SPJ。**", "hint": "#### 样例解释\n\n##### 样例 $1$\n\n$v_1=0,v_2=1,v_3=0$。\n\n##### 样例 $2$\n\n$v_1=0,v_2=0,v_3=1,v_4=0$。\n\n##### 样例 $3$\n\n此样例与题图所对应。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le N\\le 10^6$，$1\\le X\\le 10^{15}$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T4 POPLAVA***。", "locale": "zh-CN"}}}
{"pid": "P6727", "type": "P", "difficulty": 6, "samples": [["3 3\naaa\nabc\naba\na*a\naaa*\n*aaa", "2\n1\n1"], ["5 3\needecc\nebdecb\neaba\nebcddc\neb\ne*\n*dca\ne*c", "5\n0\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2015", "O2优化", "哈希 hashing", "扫描线", "字典树 Trie", "AC 自动机", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #5] OOP", "background": null, "description": "给定 $N$ 个单词和 $Q$ 个模板，一个模板由一个 `*` 和一些小写字母组成。一个模板覆盖了一个单词当且仅当将 `*` 替换为某个字符串（**可以为空**）后，模板和单词能够完全重合。对于每个模板，求出它能够覆盖多少个单词。", "inputFormat": "输入第一行两个整数 $N,Q$。\n\n接下来的 $N$ 行，每行一个小写字母组成的单词。\n\n接下来的 $Q$ 行，每行一个模板。\n\n以上读入的字符总数少于 $3\\times 10^6$。", "outputFormat": "输出共 $Q$ 行。表示每个模板能够覆盖的单词的个数。", "hint": "#### 数据规模与约定\n对于 $40\\%$ 的数据，$1\\le N,Q\\le 10^3$；  \n对于 $100\\%$ 的数据，$1\\le N,Q\\le 10^5$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T5 OOP***。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #5] OOP", "background": null, "description": "给定 $N$ 个单词和 $Q$ 个模板，一个模板由一个 `*` 和一些小写字母组成。一个模板覆盖了一个单词当且仅当将 `*` 替换为某个字符串（**可以为空**）后，模板和单词能够完全重合。对于每个模板，求出它能够覆盖多少个单词。", "inputFormat": "输入第一行两个整数 $N,Q$。\n\n接下来的 $N$ 行，每行一个小写字母组成的单词。\n\n接下来的 $Q$ 行，每行一个模板。\n\n以上读入的字符总数少于 $3\\times 10^6$。", "outputFormat": "输出共 $Q$ 行。表示每个模板能够覆盖的单词的个数。", "hint": "#### 数据规模与约定\n对于 $40\\%$ 的数据，$1\\le N,Q\\le 10^3$；  \n对于 $100\\%$ 的数据，$1\\le N,Q\\le 10^5$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T5 OOP***。", "locale": "zh-CN"}}}
{"pid": "P6728", "type": "P", "difficulty": 6, "samples": [["2 3 1 5\n1 2", "1\n3\n2"], ["3 4 2 3\n1 3 1", "1\n1\n0\n2"], ["5 6 23 1000\n1 2 4 2 3", "1\n25\n25\n577\n274\n578"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "2015", "倍增", "有限状态自动机", "COCI（克罗地亚）"], "title": "[COCI 2015/2016 #5] PODNIZOVI", "background": "", "description": "给定一个长度为 $N$ 的数组 $a_1,a_2,\\dots,a_N$。令 $s_1,s_2,\\dots,s_q$ 为这个数组所有的非空子序列，且 $q=2^n-1$。\n\n关于字典序：如果两个数组 $A$ 和 $B$ 的第一个不相同的位置为 $i$，且 $A_i<B_i$；或 $A$ 是 $B$ 的严格前缀（即不能相等），则 $A$ 的字典序小于 $B$。\n\n我们将由 $v_1,v_2,\\dots,v_p$ 组成的数组的 hash 值定义为：\n\n$$h(s)=(v_1\\times B^{p-1}+v_2\\times B^{p-2}+\\dots +v_{p-1}\\times B+v_p) \\bmod M$$\n\n其中 $B,M$ 是给定的整数。\n\n对于给定的整数 $K$，求 $h(s_1),h(s_2),\\dots,h(s_K)$ 的值。", "inputFormat": "第一行四个整数 $N,K,B,M$。\n\n第二行 $N$ 个整数 $a_1,a_2,\\dots,a_N$。\n\n", "outputFormat": "输出共 $K$ 行，第 $i$ 行为 $h(s_i)$ 的值。", "hint": "#### 样例解释\n\n##### 样例 $1$\n\n$s_1 = [1], s_2 = [1, 2], s_3 = [2]$。\n\n$h(s_1) = 1 \\bmod 5 = 1, h(s_2) =(1 + 2) \\bmod 5 = 3, h(s_3) = 2 \\bmod 5 = 2$。\n\n##### 样例 $2$\n\n$s_1 = [1], s_2 = [1], s_3 = [1, 1], s_4 = [1, 3]$。\n\n$h(s1) = 1 \\bmod 3 = 1,h(s_2) = 1 \\bmod 3 = 1, h(s_3) = (1 \\times 2 + 1) \\bmod 3 = 0, h(s_4) = (1 \\times 2 + 3) \\bmod 3 = 2$。\n\n\n\n#### 数据规模与约定\n对于 $60\\%$ 的数据，$1\\le a_i\\le 30$；  \n对于 $100\\%$ 的数据，$1\\le N,K,a_i\\le 10^5$，$1\\le B,M\\le 10^6$，$K\\le 2^N-1$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T6 PODNIZOVI***。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2015/2016 #5] PODNIZOVI", "background": "", "description": "给定一个长度为 $N$ 的数组 $a_1,a_2,\\dots,a_N$。令 $s_1,s_2,\\dots,s_q$ 为这个数组所有的非空子序列，且 $q=2^n-1$。\n\n关于字典序：如果两个数组 $A$ 和 $B$ 的第一个不相同的位置为 $i$，且 $A_i<B_i$；或 $A$ 是 $B$ 的严格前缀（即不能相等），则 $A$ 的字典序小于 $B$。\n\n我们将由 $v_1,v_2,\\dots,v_p$ 组成的数组的 hash 值定义为：\n\n$$h(s)=(v_1\\times B^{p-1}+v_2\\times B^{p-2}+\\dots +v_{p-1}\\times B+v_p) \\bmod M$$\n\n其中 $B,M$ 是给定的整数。\n\n对于给定的整数 $K$，求 $h(s_1),h(s_2),\\dots,h(s_K)$ 的值。", "inputFormat": "第一行四个整数 $N,K,B,M$。\n\n第二行 $N$ 个整数 $a_1,a_2,\\dots,a_N$。\n\n", "outputFormat": "输出共 $K$ 行，第 $i$ 行为 $h(s_i)$ 的值。", "hint": "#### 样例解释\n\n##### 样例 $1$\n\n$s_1 = [1], s_2 = [1, 2], s_3 = [2]$。\n\n$h(s_1) = 1 \\bmod 5 = 1, h(s_2) =(1 + 2) \\bmod 5 = 3, h(s_3) = 2 \\bmod 5 = 2$。\n\n##### 样例 $2$\n\n$s_1 = [1], s_2 = [1], s_3 = [1, 1], s_4 = [1, 3]$。\n\n$h(s1) = 1 \\bmod 3 = 1,h(s_2) = 1 \\bmod 3 = 1, h(s_3) = (1 \\times 2 + 1) \\bmod 3 = 0, h(s_4) = (1 \\times 2 + 3) \\bmod 3 = 2$。\n\n\n\n#### 数据规模与约定\n对于 $60\\%$ 的数据，$1\\le a_i\\le 30$；  \n对于 $100\\%$ 的数据，$1\\le N,K,a_i\\le 10^5$，$1\\le B,M\\le 10^6$，$K\\le 2^N-1$。\n\n#### 说明\n\n**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T6 PODNIZOVI***。", "locale": "zh-CN"}}}
{"pid": "P6729", "type": "P", "difficulty": 7, "samples": [["5\n1 2\n1 3\n1 4\n2 5\n5\n1 4\n1 1\n1 2\n1 5\n2 2", "1\n1\n1\n2\n1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "WC"], "title": "[WC2020] 有根树", "background": "", "description": "给定一棵包含 $n$ 个结点的有根树，结点从 $1\\sim n$ 编号，1 号点为根结点。小明有一个结点集合 $S$，对于 $S$ 中的结点 $u$，他定义 $w_u$ 的值为 $u$ 的子树中（包括 $u$ 本身）被包含在集合 $S$ 内的结点数，为了方便叙述，对于不在 $S$ 中的结点，我们认为其 $w_u=0$。\n\n接下来，小明需要你选择一个包含根结点的连通块 $C$。记 $a$ 表示连通块 $C$ 中被包含在集合 $S$ 内的结点数，$b$ 表示不在连通块 $C$ 中的结点的 $w$ 值最大值，若不存在不在 $C$ 中的结点，则 $b = 0$，小明希望你能最小化 $\\max(a,b)$。\n\n小明觉得这个问题还比较简单，所以还给出了 $q$ 次操作，每次会令集合 $S$ 加入或删除一个结点，请你对每次操作后的集合 $S$ 给出 $\\max(a,b)$ 的最小值。", "inputFormat": "第一行一个正整数 $n$ 表示结点数。\n\n接下来 $n-1$ 行，每行两个整数 $x,y$，表示树上的一条边 $(x,y)$。\n\n接下来一行一个正整数 $q$ 表示操作数。\n\n接下来 $q$ 行，每行两个数 $t,v$ 表示一次操作。若 $t=1$ 则该操作为将结点 $v$ 加入 $S$，保证操作前 $v \\notin S$。若 $t=2$ 则该操作为将结点 $v$ 从 $S$ 中删去，保证操作前 $v\\in S$。\n初始时 $S$ 为空集。", "outputFormat": "每次操作后，输出一行一个整数表示答案。", "hint": "#### 样例解释\n\n第一次操作后 $S=\\{4\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=0,b=1$。\n\n第二次操作后 $S=\\{1,4\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=1,b=1$。\n\n第三次操作后 $S=\\{1,2,4\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=1,b=1$。\n\n第四次操作后 $S=\\{1,2,4,5\\}$，一个选择方案为 $C=\\{1,2\\}$，此时 $a=2,b=1$。\n\n第五次操作后 $S=\\{1,4,5\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=1,b=1$。\n\n#### 数据范围\n\n对于所有测试点：$1\\le n\\le 5\\times 10^5$，$1\\le q\\le 10^6$，$1\\le x,y,v\\le n$，$t\\in \\{1,2\\}$。\n\n| 测试点编号  | $n\\leq$        | $q\\leq$        | 特殊限制 |\n| ----------- | -------------- | -------------- | -------- |\n| $1\\sim 2$   | $100$          | $500$          | 无       |\n| $3\\sim 4$   | $2\\times 10^4$ | $2\\times 10^4$ |    无|\n| $5\\sim 6$   | $10^5$         | $2\\times 10^5$ | A        |\n| $7\\sim 8$   | $2\\times 10^5$ | $4\\times 10^5$ | B        |\n| $9\\sim 11$  | $2\\times 10^5$ | $4\\times 10^5$       | C              | \n| $12\\sim 16$ | $2\\times 10^5$ | $4\\times 10^5$ | 无             | \n| $17\\sim 20$ | $5\\times 10^5$ | $10^6$         |         无 |\n\n\n表格中特殊限制一栏符号的含义为：\n\nA：任意时刻集合 $S$ 的大小不超过 50。\n\nB：树的形态是一条链且 1 号结点度数为 1。\n\nC：树上每个结点的双亲结点编号小于它本身，$n=q$ 且第 $i$ 次操作为将 $i$ 号点加入 $S$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2020] 有根树", "background": "", "description": "给定一棵包含 $n$ 个结点的有根树，结点从 $1\\sim n$ 编号，1 号点为根结点。小明有一个结点集合 $S$，对于 $S$ 中的结点 $u$，他定义 $w_u$ 的值为 $u$ 的子树中（包括 $u$ 本身）被包含在集合 $S$ 内的结点数，为了方便叙述，对于不在 $S$ 中的结点，我们认为其 $w_u=0$。\n\n接下来，小明需要你选择一个包含根结点的连通块 $C$。记 $a$ 表示连通块 $C$ 中被包含在集合 $S$ 内的结点数，$b$ 表示不在连通块 $C$ 中的结点的 $w$ 值最大值，若不存在不在 $C$ 中的结点，则 $b = 0$，小明希望你能最小化 $\\max(a,b)$。\n\n小明觉得这个问题还比较简单，所以还给出了 $q$ 次操作，每次会令集合 $S$ 加入或删除一个结点，请你对每次操作后的集合 $S$ 给出 $\\max(a,b)$ 的最小值。", "inputFormat": "第一行一个正整数 $n$ 表示结点数。\n\n接下来 $n-1$ 行，每行两个整数 $x,y$，表示树上的一条边 $(x,y)$。\n\n接下来一行一个正整数 $q$ 表示操作数。\n\n接下来 $q$ 行，每行两个数 $t,v$ 表示一次操作。若 $t=1$ 则该操作为将结点 $v$ 加入 $S$，保证操作前 $v \\notin S$。若 $t=2$ 则该操作为将结点 $v$ 从 $S$ 中删去，保证操作前 $v\\in S$。\n初始时 $S$ 为空集。", "outputFormat": "每次操作后，输出一行一个整数表示答案。", "hint": "#### 样例解释\n\n第一次操作后 $S=\\{4\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=0,b=1$。\n\n第二次操作后 $S=\\{1,4\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=1,b=1$。\n\n第三次操作后 $S=\\{1,2,4\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=1,b=1$。\n\n第四次操作后 $S=\\{1,2,4,5\\}$，一个选择方案为 $C=\\{1,2\\}$，此时 $a=2,b=1$。\n\n第五次操作后 $S=\\{1,4,5\\}$，一个选择方案为 $C=\\{1\\}$，此时 $a=1,b=1$。\n\n#### 数据范围\n\n对于所有测试点：$1\\le n\\le 5\\times 10^5$，$1\\le q\\le 10^6$，$1\\le x,y,v\\le n$，$t\\in \\{1,2\\}$。\n\n| 测试点编号  | $n\\leq$        | $q\\leq$        | 特殊限制 |\n| ----------- | -------------- | -------------- | -------- |\n| $1\\sim 2$   | $100$          | $500$          | 无       |\n| $3\\sim 4$   | $2\\times 10^4$ | $2\\times 10^4$ |    无|\n| $5\\sim 6$   | $10^5$         | $2\\times 10^5$ | A        |\n| $7\\sim 8$   | $2\\times 10^5$ | $4\\times 10^5$ | B        |\n| $9\\sim 11$  | $2\\times 10^5$ | $4\\times 10^5$       | C              | \n| $12\\sim 16$ | $2\\times 10^5$ | $4\\times 10^5$ | 无             | \n| $17\\sim 20$ | $5\\times 10^5$ | $10^6$         |         无 |\n\n\n表格中特殊限制一栏符号的含义为：\n\nA：任意时刻集合 $S$ 的大小不超过 50。\n\nB：树的形态是一条链且 1 号结点度数为 1。\n\nC：树上每个结点的双亲结点编号小于它本身，$n=q$ 且第 $i$ 次操作为将 $i$ 号点加入 $S$。", "locale": "zh-CN"}}}
{"pid": "P6730", "type": "P", "difficulty": 7, "samples": [["4 7\n1 3 4 6\n", "17"], ["8 9\n1 2 3 4 5 6 7 8", "532"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "WC"], "title": "[WC2020] 猜数游戏", "background": "", "description": "黑板上写有 $n$ 个互不相等且都小于 $p$ 的正整数 $a_1, a_2, \\cdots, a_n$。小 J 想用这些数字和小 M 玩一个猜数游戏。\n\n游戏规则十分简单：游戏开始时，小 J 会从这些数字中随机选择若干个让小 M 来猜，而小 M 则可以通过若干次**询问**来确定小 J 选择了哪些数字。\n\n每一次**询问**的模式如下：小 M 可以任意指定一个数字 $a_k$，若它是小 J 所选择的数字之一，则小 J 会告诉小 M 他所选择的数字中所有能表示成 $(a_k)^m \\bmod p$ 的数，其中 $m$ 是任意正整数，$\\bmod$ 表示求二者做带余除法后的余数。反之，若 $a_k$ 没有被小 J 选中，则小 J 只会告诉小 M $a_k$ 没有被选中。\n\n游戏会在小 M 确定小 J 所选中的所有数字后立刻结束。\n\n例如，若 $n=4$，$p=7$，数字 $\\{a_n\\}$ 按下标顺序依次为 $\\{1, 3, 4, 6\\}$，小 J 选定的数字为 $\\{1, 4, 6\\}$，一种可能的游戏进行的过程（并非是最优过程）如下：\n\n| 小 M 的询问 | 小 J 的反馈                           |\n| ----------- | ------------------------------------- |\n| $a_2 = 3$   | $a_2$ 没有被选中                      |\n| $a_4 = 6$   | $6(= 6^1 \\bmod 7)$，$1(=6^2 \\bmod 7)$ |\n| $a_3 = 4$   | $4(= 4^1 \\bmod 7)$，$1(=4^3 \\bmod 7)$ |\n\n$3$ 次询问后小 J 所选出的所有数都已被小 M 确定，游戏结束。\n\n小 M 还有作业没有写完，因此他需要对游戏进行的时间进行评估。他想知道为了使游戏结束，他所需要做出询问的最小次数的期望 $S$ 是多少。\n\n为了避免精度误差，你需要输出答案乘 $(2^n - 1)$ 后模 $998244353$ 的余数。在本题中，你可以认为小 J 每次在选数时会在集合 $\\{a_1, a_2, \\cdots, a_n\\}$ 的全部**非空子集**中等概率地选择一个，在这个前提下可以证明 $(2^n - 1) \\times S$ 一定是一个整数。", "inputFormat": "第一行两个正整数 $n$ 和 $p$。\n\n第二行 $n$ 个正整数，依次表示 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "#### 样例1解释\n\n下表给出了小 J 所选的子集与小 M 最小询问次数的关系：\n\n| 小 J 所选的子集                                              | 最优的询问集合 |\n| ------------------------------------------------------------ | -------------- |\n| $\\{1\\}$                                                      | $\\{1\\}$        |\n| $\\{3\\}, \\{3, 4\\}, \\{3, 6\\}, \\{3, 4, 6\\}, \\{1, 3\\}, \\{1, 3, 4\\}, \\{1, 3, 6\\}, \\{1, 3, 4, 6\\}$ | $\\{3\\}$        |\n| $\\{4\\}, \\{1, 4\\}$                                            | $\\{4\\}$        |\n| $\\{6\\}, \\{1, 6\\}$                                            | $\\{6\\}$        |\n| $\\{4, 6\\}, \\{1, 4, 6\\}$                                      | $\\{4,6\\}$      |\n\n因此最小询问次数的期望 $S = \\frac{17}{15}$。\n\n#### 数据范围\n\n对于所有测试点：$1 \\leq n \\leq 5000$，$3 \\leq p \\leq 10^8$，$1 \\leq a_i < p\\ (1 \\leq i \\leq n)$ 且 $a_i$ 两两不同。\n\n对于所有编号为奇数的测试点，保证 $p$ 是一个素数；对于所有编号为偶数的测试点，保证存在奇素数 $q$ 和正整数 $k > 1$ 使得 $p = q^k$。\n\n| 测试点编号 | $n\\leq$ | $p\\le$ | 特殊性质 | 测试点编号 | $n\\leq$ | $p\\le$ | 特殊性质 |\n| ---------- | ------- | ------ | -------- | ---------- | ------- | ------ | -------- |\n| $1$        | $10$    | $100$  | 无       | $2$        | $10$    | $100$  | 无       |\n| $3$   |$10$|$100$|无| $4$|$10$|$100$|无|\n| $5$        | $200$   | $5000$|无 | $6$      | $200$      | $5000$  |     无   | \n| $7$        | $300$   | $10^6$ |无| $8$      | $300$      | $10^6$  | 无|\n| $9$|$300$ |$10^6$  | A| $10$   | $300$   | $10^6$ |B|\n| $11$       | $5000$  | $10^7$ |A| $12$     | $5000$     | $10^7$  | 无     | \n| $13$|$5000$|$10^7$  | 无     | $14$   | $5000$|$10^7$| 无|\n| $15$|$5000$  | $10^8$  | A      | $16$     | $5000$|$10^8$     | B|\n| $17$       | $5000$|$10^8$|无      | $18$ |$5000$|$10^8$| 无       | \n| $19$       | $5000$|$10^8$|无      | $20$ |$5000$|$10^8$| 无       | \n\n特殊性质 A：在模 $p$ 意义下 $3^i\\ (1 \\leq i \\leq p - 1)$ 两两不同余。\n\n特殊性质 B：对所有的 $1 \\leq i \\leq n$ 都有 $(a_i, p) > 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2020] 猜数游戏", "background": "", "description": "黑板上写有 $n$ 个互不相等且都小于 $p$ 的正整数 $a_1, a_2, \\cdots, a_n$。小 J 想用这些数字和小 M 玩一个猜数游戏。\n\n游戏规则十分简单：游戏开始时，小 J 会从这些数字中随机选择若干个让小 M 来猜，而小 M 则可以通过若干次**询问**来确定小 J 选择了哪些数字。\n\n每一次**询问**的模式如下：小 M 可以任意指定一个数字 $a_k$，若它是小 J 所选择的数字之一，则小 J 会告诉小 M 他所选择的数字中所有能表示成 $(a_k)^m \\bmod p$ 的数，其中 $m$ 是任意正整数，$\\bmod$ 表示求二者做带余除法后的余数。反之，若 $a_k$ 没有被小 J 选中，则小 J 只会告诉小 M $a_k$ 没有被选中。\n\n游戏会在小 M 确定小 J 所选中的所有数字后立刻结束。\n\n例如，若 $n=4$，$p=7$，数字 $\\{a_n\\}$ 按下标顺序依次为 $\\{1, 3, 4, 6\\}$，小 J 选定的数字为 $\\{1, 4, 6\\}$，一种可能的游戏进行的过程（并非是最优过程）如下：\n\n| 小 M 的询问 | 小 J 的反馈                           |\n| ----------- | ------------------------------------- |\n| $a_2 = 3$   | $a_2$ 没有被选中                      |\n| $a_4 = 6$   | $6(= 6^1 \\bmod 7)$，$1(=6^2 \\bmod 7)$ |\n| $a_3 = 4$   | $4(= 4^1 \\bmod 7)$，$1(=4^3 \\bmod 7)$ |\n\n$3$ 次询问后小 J 所选出的所有数都已被小 M 确定，游戏结束。\n\n小 M 还有作业没有写完，因此他需要对游戏进行的时间进行评估。他想知道为了使游戏结束，他所需要做出询问的最小次数的期望 $S$ 是多少。\n\n为了避免精度误差，你需要输出答案乘 $(2^n - 1)$ 后模 $998244353$ 的余数。在本题中，你可以认为小 J 每次在选数时会在集合 $\\{a_1, a_2, \\cdots, a_n\\}$ 的全部**非空子集**中等概率地选择一个，在这个前提下可以证明 $(2^n - 1) \\times S$ 一定是一个整数。", "inputFormat": "第一行两个正整数 $n$ 和 $p$。\n\n第二行 $n$ 个正整数，依次表示 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "#### 样例1解释\n\n下表给出了小 J 所选的子集与小 M 最小询问次数的关系：\n\n| 小 J 所选的子集                                              | 最优的询问集合 |\n| ------------------------------------------------------------ | -------------- |\n| $\\{1\\}$                                                      | $\\{1\\}$        |\n| $\\{3\\}, \\{3, 4\\}, \\{3, 6\\}, \\{3, 4, 6\\}, \\{1, 3\\}, \\{1, 3, 4\\}, \\{1, 3, 6\\}, \\{1, 3, 4, 6\\}$ | $\\{3\\}$        |\n| $\\{4\\}, \\{1, 4\\}$                                            | $\\{4\\}$        |\n| $\\{6\\}, \\{1, 6\\}$                                            | $\\{6\\}$        |\n| $\\{4, 6\\}, \\{1, 4, 6\\}$                                      | $\\{4,6\\}$      |\n\n因此最小询问次数的期望 $S = \\frac{17}{15}$。\n\n#### 数据范围\n\n对于所有测试点：$1 \\leq n \\leq 5000$，$3 \\leq p \\leq 10^8$，$1 \\leq a_i < p\\ (1 \\leq i \\leq n)$ 且 $a_i$ 两两不同。\n\n对于所有编号为奇数的测试点，保证 $p$ 是一个素数；对于所有编号为偶数的测试点，保证存在奇素数 $q$ 和正整数 $k > 1$ 使得 $p = q^k$。\n\n| 测试点编号 | $n\\leq$ | $p\\le$ | 特殊性质 | 测试点编号 | $n\\leq$ | $p\\le$ | 特殊性质 |\n| ---------- | ------- | ------ | -------- | ---------- | ------- | ------ | -------- |\n| $1$        | $10$    | $100$  | 无       | $2$        | $10$    | $100$  | 无       |\n| $3$   |$10$|$100$|无| $4$|$10$|$100$|无|\n| $5$        | $200$   | $5000$|无 | $6$      | $200$      | $5000$  |     无   | \n| $7$        | $300$   | $10^6$ |无| $8$      | $300$      | $10^6$  | 无|\n| $9$|$300$ |$10^6$  | A| $10$   | $300$   | $10^6$ |B|\n| $11$       | $5000$  | $10^7$ |A| $12$     | $5000$     | $10^7$  | 无     | \n| $13$|$5000$|$10^7$  | 无     | $14$   | $5000$|$10^7$| 无|\n| $15$|$5000$  | $10^8$  | A      | $16$     | $5000$|$10^8$     | B|\n| $17$       | $5000$|$10^8$|无      | $18$ |$5000$|$10^8$| 无       | \n| $19$       | $5000$|$10^8$|无      | $20$ |$5000$|$10^8$| 无       | \n\n特殊性质 A：在模 $p$ 意义下 $3^i\\ (1 \\leq i \\leq p - 1)$ 两两不同余。\n\n特殊性质 B：对所有的 $1 \\leq i \\leq n$ 都有 $(a_i, p) > 1$。", "locale": "zh-CN"}}}
{"pid": "P6731", "type": "P", "difficulty": 7, "samples": [["1 10\n1 1\n1 1\n0", "-1\n"], ["3 10\n5 4\n1 30\n1 30\n2 3\n2 3\n3 30\n6 6\n1 1\n1 30\n2 1\n2 30\n3 9\n3 10\n1 0\n1 10\n1\n1 1 5 2 6 35 ", "10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "O2优化", "WC"], "title": "[WC2020] 选课", "background": "### 提醒：\n\n本题目前的官方数据有部分与数据范围不符。\n\n**令 $P$ 为限制涉及到的课程数目，保证 $P\\leq12$。**\n\n**有一个测试点不满足 $T \\geq \\sum s_i$。**", "description": "随着期末考试的结束，一年一度的选课环节又拉开了帷幕。\n\n小 C 是一个热爱学习的好学生，他给自己定了一个小目标：在新的学期至少修够 $T$ 学分。从教务处给出的公告上看，本次可供选择的课程一共有 $m$ 种分类，第 $i$ 种分类中有 $n_i$ 门课程。小 C 根据公告的内容，提高了自己的学习目标：在所有课程至少修满 $T$ 学分的基础上，第 $i$ 种分类（$i=1,2,\\cdots,m$）至少修够 $s_i$ 的学分。同时，聪明的小 C 凭借自己的经验，计算出了学习每门课程所能得到的学分和所需要消耗的脑力值。不仅如此，他还发现，有些课程之间存在特殊的关系：同时学习某两门内容相似的课程，可能会减少脑力值的消耗；同时学习某两门十分硬核的课，可能会增加脑力值的消耗；某两门课程时间冲突，则无法同时学习。\n\n小 C 希望能够花费最少的脑力值来达到他的目标。你能帮小 C 计算出达到目标所需要的最小脑力值吗？", "inputFormat": "第一行两个正整数 $m,T$，表示分类种数和总共需要修够的学分数。\n\n接下来 $m$ 段输入，对于第 $i$ 段输入：\n\n第一行有两个非负整数 $n_i,s_i$，表示第 $i$ 种分类的所有课程数和需要修够的学分。\n\n第 $j+1$（$1\\le j\\le n_i$）行有两个正整数 $w_{i,j},c_{i,j}$，表示选修第 $i$ 种分类中的第 $j$ 门课能获得的学分和需要消耗的脑力。\n\n$m$ 段输入之后，有一个非负整数 $p$，表示关系的条数。\n\n接下来 $p$ 行每行一条关系，每一条关系可表示为以下 3 种形式之一（以下所有输入数据均为正整数）：\n\n$1\\ x_1\\ y_1\\ x_2\\ y_2\\ c$，表示同时修第 $x_1$ 种分类中的第 $y_1$ 门课和第 $x_2$ 种分类中的第 $y_2$ 门课，可以减少 $c$ 的消耗。\n\n$2\\ x_1\\ y_1\\ x_2\\ y_2\\ c$，表示同时修第 $x_1$ 种分类中的第 $y_1$ 门课和第 $x_2$ 种分类中的第 $y_2$ 门课，需要增加 $c$ 的消耗。\n\n$3\\ x_1\\ y_1\\ x_2\\ y_2$，表示第 $x_1$ 种分类中的第 $y_1$ 门课和第 $x_2$ 种分类中的第 $y_2$ 门课不能同时修。", "outputFormat": "输出文件只有一行，包含一个整数，表示达到目标所需要的最小脑力值。如果无法达到小 C 的目标，请输出 `-1`。", "hint": "#### 样例1解释\n\n即使学习所有课程，总学分仍无法达到小 C 的要求，故输出 `-1`。\n\n#### 样例2解释\n\n一种可能的选法为：第一种分类中选择第 4、5 门课，第二种分类选择第 1、3、6 门课，第3种分类不选课程（选法不唯一）。\n\n#### 数据范围\n\n设 $N=\\sum_{i=1}^{m} n_i$，$M$ 为消耗脑力值的最大值（包括有关系的课程中增加或减少的消耗）。\n\n对于 $5\\%$ 的数据：$N\\le 5$。\n\n对于 $10\\%$ 的数据：$N\\le 15$。\n\n有另外 $10\\%$ 的数据：$N\\le 1000$，$p=0$。\n\n有另外 $10\\%$ 的数据：$w_i=1$，$p=0$。\n\n有另外 $10\\%$ 的数据：$T=\\sum_{i=1}^{m} s_i$，$p=0$。\n\n有另外 $10\\%$ 的数据：$N\\le 10^4$，$M\\le 50$，且有关系的课程在同一分类中。\n\n有另外 $10\\%$ 的数据：$N\\le 5\\times 10^4$，$M\\le 50$。\n\n对于 $100\\%$ 的数据：$N\\le 5\\times 10^5$，$M\\le 200$，$0\\le T-\\sum_{i=1}^{m} s_i\\le 40$，$m\\le 5\\times 10^4$，$p\\le 12$，$w_{i,j}\\in\\{1,2,3\\}$。\n\n**官方数据有误，经测试，$p$ 最大为 $66$**\n\n数据保证任意两种课程至多只有一种关系。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[WC2020] 选课", "background": "### 提醒：\n\n本题目前的官方数据有部分与数据范围不符。\n\n**令 $P$ 为限制涉及到的课程数目，保证 $P\\leq12$。**\n\n**有一个测试点不满足 $T \\geq \\sum s_i$。**", "description": "随着期末考试的结束，一年一度的选课环节又拉开了帷幕。\n\n小 C 是一个热爱学习的好学生，他给自己定了一个小目标：在新的学期至少修够 $T$ 学分。从教务处给出的公告上看，本次可供选择的课程一共有 $m$ 种分类，第 $i$ 种分类中有 $n_i$ 门课程。小 C 根据公告的内容，提高了自己的学习目标：在所有课程至少修满 $T$ 学分的基础上，第 $i$ 种分类（$i=1,2,\\cdots,m$）至少修够 $s_i$ 的学分。同时，聪明的小 C 凭借自己的经验，计算出了学习每门课程所能得到的学分和所需要消耗的脑力值。不仅如此，他还发现，有些课程之间存在特殊的关系：同时学习某两门内容相似的课程，可能会减少脑力值的消耗；同时学习某两门十分硬核的课，可能会增加脑力值的消耗；某两门课程时间冲突，则无法同时学习。\n\n小 C 希望能够花费最少的脑力值来达到他的目标。你能帮小 C 计算出达到目标所需要的最小脑力值吗？", "inputFormat": "第一行两个正整数 $m,T$，表示分类种数和总共需要修够的学分数。\n\n接下来 $m$ 段输入，对于第 $i$ 段输入：\n\n第一行有两个非负整数 $n_i,s_i$，表示第 $i$ 种分类的所有课程数和需要修够的学分。\n\n第 $j+1$（$1\\le j\\le n_i$）行有两个正整数 $w_{i,j},c_{i,j}$，表示选修第 $i$ 种分类中的第 $j$ 门课能获得的学分和需要消耗的脑力。\n\n$m$ 段输入之后，有一个非负整数 $p$，表示关系的条数。\n\n接下来 $p$ 行每行一条关系，每一条关系可表示为以下 3 种形式之一（以下所有输入数据均为正整数）：\n\n$1\\ x_1\\ y_1\\ x_2\\ y_2\\ c$，表示同时修第 $x_1$ 种分类中的第 $y_1$ 门课和第 $x_2$ 种分类中的第 $y_2$ 门课，可以减少 $c$ 的消耗。\n\n$2\\ x_1\\ y_1\\ x_2\\ y_2\\ c$，表示同时修第 $x_1$ 种分类中的第 $y_1$ 门课和第 $x_2$ 种分类中的第 $y_2$ 门课，需要增加 $c$ 的消耗。\n\n$3\\ x_1\\ y_1\\ x_2\\ y_2$，表示第 $x_1$ 种分类中的第 $y_1$ 门课和第 $x_2$ 种分类中的第 $y_2$ 门课不能同时修。", "outputFormat": "输出文件只有一行，包含一个整数，表示达到目标所需要的最小脑力值。如果无法达到小 C 的目标，请输出 `-1`。", "hint": "#### 样例1解释\n\n即使学习所有课程，总学分仍无法达到小 C 的要求，故输出 `-1`。\n\n#### 样例2解释\n\n一种可能的选法为：第一种分类中选择第 4、5 门课，第二种分类选择第 1、3、6 门课，第3种分类不选课程（选法不唯一）。\n\n#### 数据范围\n\n设 $N=\\sum_{i=1}^{m} n_i$，$M$ 为消耗脑力值的最大值（包括有关系的课程中增加或减少的消耗）。\n\n对于 $5\\%$ 的数据：$N\\le 5$。\n\n对于 $10\\%$ 的数据：$N\\le 15$。\n\n有另外 $10\\%$ 的数据：$N\\le 1000$，$p=0$。\n\n有另外 $10\\%$ 的数据：$w_i=1$，$p=0$。\n\n有另外 $10\\%$ 的数据：$T=\\sum_{i=1}^{m} s_i$，$p=0$。\n\n有另外 $10\\%$ 的数据：$N\\le 10^4$，$M\\le 50$，且有关系的课程在同一分类中。\n\n有另外 $10\\%$ 的数据：$N\\le 5\\times 10^4$，$M\\le 50$。\n\n对于 $100\\%$ 的数据：$N\\le 5\\times 10^5$，$M\\le 200$，$0\\le T-\\sum_{i=1}^{m} s_i\\le 40$，$m\\le 5\\times 10^4$，$p\\le 12$，$w_{i,j}\\in\\{1,2,3\\}$。\n\n**官方数据有误，经测试，$p$ 最大为 $66$**\n\n数据保证任意两种课程至多只有一种关系。", "locale": "zh-CN"}}}
{"pid": "P6732", "type": "P", "difficulty": 4, "samples": [["1\n1.0 1.0\n2.0 2.0\n1.0 2.0\n2.0 1.0\n0.0 0.0\n-0.5 -0.5\n0.0 -1.0\n0.5 -0.5", "0.0 1.0 0.5"]], "limits": {"time": [1000, 1000, 1000], "memory": [131072, 131072, 131072]}, "tags": ["计算几何", "2020", "Special Judge", "枚举"], "title": "「Wdsr-2」方分", "background": "", "description": "平面直角坐标系上有两个相离的正方形 $A$ 和 $B$。请找到任意一条直线把它们分隔到直线的两侧。\n\n**注意：这条直线不应该和正方形有公共点。**", "inputFormat": "**输入包含多组数据**。\n\n第一行输入一个正整数 $T$ ，代表数据组数。\n\n对于每组数据，共有 $8$ 行，每行 $2$ 个实数，描述一个点的 $x$ 轴坐标和 $y$ 轴坐标。前四行表示正方形 $A$ 四个顶点的坐标，后四行表示正方形 $B$ 四个顶点的坐标。\n\n保证这四个顶点坐标一定能构成一个正方形，但顺序可以是任意的。两个正方形一定是相离的。\n\n**没有**保证正方形的边和坐标轴平行！", "outputFormat": "对于每组数据，输出一行三个实数 $a,b,c$，表示你找到的直线方程是 $ax+by=c$。", "hint": "$1\\le T\\le 10000$。\n\n输入的坐标绝对值不超过 $10^3$，小数点后最多有 $3$ 位数字。\n\n**SPJ 使用双精度浮点数计算验证你的答案，请尽可能地避免精度误差。**\n\n避免精度误差的方式有：不要输出绝对值过大或过小的数字，输出尽可能多的小数点后位数，比较大小时使用 eps，等等。\n\n赛后已加入 Hack 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-2」方分", "background": "", "description": "平面直角坐标系上有两个相离的正方形 $A$ 和 $B$。请找到任意一条直线把它们分隔到直线的两侧。\n\n**注意：这条直线不应该和正方形有公共点。**", "inputFormat": "**输入包含多组数据**。\n\n第一行输入一个正整数 $T$ ，代表数据组数。\n\n对于每组数据，共有 $8$ 行，每行 $2$ 个实数，描述一个点的 $x$ 轴坐标和 $y$ 轴坐标。前四行表示正方形 $A$ 四个顶点的坐标，后四行表示正方形 $B$ 四个顶点的坐标。\n\n保证这四个顶点坐标一定能构成一个正方形，但顺序可以是任意的。两个正方形一定是相离的。\n\n**没有**保证正方形的边和坐标轴平行！", "outputFormat": "对于每组数据，输出一行三个实数 $a,b,c$，表示你找到的直线方程是 $ax+by=c$。", "hint": "$1\\le T\\le 10000$。\n\n输入的坐标绝对值不超过 $10^3$，小数点后最多有 $3$ 位数字。\n\n**SPJ 使用双精度浮点数计算验证你的答案，请尽可能地避免精度误差。**\n\n避免精度误差的方式有：不要输出绝对值过大或过小的数字，输出尽可能多的小数点后位数，比较大小时使用 eps，等等。\n\n赛后已加入 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P6733", "type": "P", "difficulty": 4, "samples": [["5 1\n1 5\n4 2\n5 3\n2 3\n1 4", "4.500"]], "limits": {"time": [1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "二分", "Special Judge", "O2优化", "排序", "双指针 two-pointer"], "title": "「Wdsr-2」间歇泉", "background": "**Problem Number:** $\\textit{08}$", "description": "有一个间歇泉，冒出了 $n$ 杯水，由于一些原因，每杯水的温度、体积不同。第 $i$ 杯水的温度为 $c_i$，体积为 $a_i$。\n\n现在混合任意**两**杯水，每混合两杯水都会得到一个新的温度值，求可能得到的第 $k$ 高的温度值（不计热量损失）。\n\n**你的答案建议至少保留小数点后 $\\bm3$ 位（与标准答案之差在 $\\bm{10^{-2}}$ 以内即视为通过）。**", "inputFormat": "第一行一个数 $n,k$，意义如题述。\n\n接下来 $n$ 行，每行两个数 $a_i,c_i$。", "outputFormat": "一行一个实数，表示混合后的水的第 $k$ 高温度。", "hint": "#### 样例 1 说明\n\n第 $1$ 和第 $5$ 杯水混合，得到 $4.5$ 的温度值。可以发现，这是可能得到的最高水温。\n\n#### 样例 2\n\n见题目附件中 $\\textbf{\\textit{pour2.in/pour2.ans}}$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- $\\textbf{Subtask 1}\\text{ (10 pts)}$：$1\\le n\\le 10$。\n- $\\textbf{Subtask 2}\\text{ (40 pts)}$：保证 $k=1$。\n- $\\textbf{Subtask 3}\\text{ (50 pts)}$：无特殊限制。\n- $\\textbf{Subtask 4}\\text{ (0 pts)}$：Hack 数据。\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^5$，$1\\le k\\le \\dfrac{n \\times (n - 1)}{2}$，$1\\le a_i,c_i\\le 10^9$。\n\n子任务 2/3/4 时限 $\\text{2 s}$，子任务 1 时限 $\\text{1 s}$。\n\n#### 前置知识\n\n对于两杯体积、温度分别为 $(a_i,c_i),(a_j,c_j)$ 的水，混合后温度为：\n\n$$\nT=\\dfrac{a_ic_i+a_jc_j}{a_i+a_j}\n$$\n\n#### 说明\n\n本题数据采用 [SvRan](https://github.com/Sept0913/SvRan) 生成，仅用时 $3\\min$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-2」间歇泉", "background": "**Problem Number:** $\\textit{08}$", "description": "有一个间歇泉，冒出了 $n$ 杯水，由于一些原因，每杯水的温度、体积不同。第 $i$ 杯水的温度为 $c_i$，体积为 $a_i$。\n\n现在混合任意**两**杯水，每混合两杯水都会得到一个新的温度值，求可能得到的第 $k$ 高的温度值（不计热量损失）。\n\n**你的答案建议至少保留小数点后 $\\bm3$ 位（与标准答案之差在 $\\bm{10^{-2}}$ 以内即视为通过）。**", "inputFormat": "第一行一个数 $n,k$，意义如题述。\n\n接下来 $n$ 行，每行两个数 $a_i,c_i$。", "outputFormat": "一行一个实数，表示混合后的水的第 $k$ 高温度。", "hint": "#### 样例 1 说明\n\n第 $1$ 和第 $5$ 杯水混合，得到 $4.5$ 的温度值。可以发现，这是可能得到的最高水温。\n\n#### 样例 2\n\n见题目附件中 $\\textbf{\\textit{pour2.in/pour2.ans}}$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- $\\textbf{Subtask 1}\\text{ (10 pts)}$：$1\\le n\\le 10$。\n- $\\textbf{Subtask 2}\\text{ (40 pts)}$：保证 $k=1$。\n- $\\textbf{Subtask 3}\\text{ (50 pts)}$：无特殊限制。\n- $\\textbf{Subtask 4}\\text{ (0 pts)}$：Hack 数据。\n\n对于 $100\\%$ 的数据，有 $1\\le n\\le 10^5$，$1\\le k\\le \\dfrac{n \\times (n - 1)}{2}$，$1\\le a_i,c_i\\le 10^9$。\n\n子任务 2/3/4 时限 $\\text{2 s}$，子任务 1 时限 $\\text{1 s}$。\n\n#### 前置知识\n\n对于两杯体积、温度分别为 $(a_i,c_i),(a_j,c_j)$ 的水，混合后温度为：\n\n$$\nT=\\dfrac{a_ic_i+a_jc_j}{a_i+a_j}\n$$\n\n#### 说明\n\n本题数据采用 [SvRan](https://github.com/Sept0913/SvRan) 生成，仅用时 $3\\min$。", "locale": "zh-CN"}}}
{"pid": "P6734", "type": "P", "difficulty": 6, "samples": [["4 0", "5"], ["4 1\n1 1", "3"], ["20 10\n5 1\n12 0\n17 0\n3 1\n7 1\n13 0\n8 1\n18 1\n2 1\n19 0", "344"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数学", "2020", "矩阵运算", "洛谷原创", "分治", "动态规划优化", "矩阵加速", "矩阵乘法"], "title": "「Wdsr-2」阴阳玉", "background": "博丽灵梦有一块好大好大的阴阳玉，它是是博丽灵梦的主要武器之一。\n\n但是阴阳玉的能量来源，源自主人的灵力聚集力量，因此，灵梦在平时总是需要对其进行保养。简单来说，灵梦会使用灵力，来获取阴阳玉所需的能量。\n\n", "description": "灵力有阴阳之分。初始的时候，灵梦只有两个阳灵力，它们围成了一个圈。每次，灵梦可以进行以下两种操作：\n\n- 在两个灵力直接加入一个阳灵力。\n\n- 移走一个阳灵力。\n\n为了保持稳定，任何时候这个圈上的灵力都**不应该少于两个**。\n\n由于灵力的阴阳并不稳定，因此一旦某个灵力周围发生改变（多出一个灵力，或减少一个灵力），它就会从阳变成阴，或从阴变成阳。不过，如果只是周边灵力的性质改变，那么它就不会发生变化。\n\n灵梦会不断调节灵力，直到它**最终**变成 $n$ 个（中途可能多于 $n$ 个）。然后，灵梦会从某个点**依次**按照顺时针或逆时针取下每个灵力。它会形成一条链。灵梦会用链上的能量，来加强她的阴阳玉。\n\n做到这一点非常容易。但是灵梦非常好奇，一共可能形成多少种不同的**链**。\n\n由于灵梦的偏好，她可能会有 $m$ 个限制条件。第 $i$ 个条件 $(p_i,c_i)$ ，规定了链上第 $p_i$ 个灵力应该为何种灵力。若 $c_i=0$ ，则应该为阴灵力；否则为阳。\n\n由于可能结果太大，灵梦只需要得到答案对 $998244353$ 取模的结果。\n\n两个链不同，当且仅当存在一个位置的点颜色不同。", "inputFormat": "第一行为一个正整数 $n$ 和一个非负整数 $m$ 。\n\n当 $m=0$ 时无约束条件。否则接下来会有 $m$ 行，每行两个非负整数 $p_i,c_i$ ，含义如上。", "outputFormat": "一行，一个非负整数，表示所有链的可能种类总数对 $998244353$ 取模的值。", "hint": "#### 样例解释\n\n对于样例一，可能存在以下两种构造方式：\n\n![pic3.JPG/The \"2\"-th of the \"1\"-st.](https://i.loli.net/2020/07/17/VQn8MB7fxJsA1Rr.jpg)\n\n其中， $\\tt ADD$ 表示增加一个阳灵力，$\\tt RMV$ 表示移走一个阳灵力。\n\n将得到的两个环分别拆开，一共可以得到以下五种链：\n\n- 环一：**阳—阳—阳—阳**。\n\n- 环二：**阳—阳—阴—阴**，**阳—阴—阴—阳**，**阴—阴—阳—阳**，**阴—阳—阳—阴**。\n\n因此答案为 $5$ 。\n\n对于样例二，我们限定了链上第一个灵力为阳。因此结果为 $3$ 。\n\n#### 数据范围\n\n$$\\def\\t{\\text}\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & n\\t{ 的范围} & m\\t{ 的范围} & \\t{分值}\\cr\\hline\n1 & n\\le 16 & m\\le 16 & 15 \\cr \\hline\n2 & n\\le 10^6 &  m\\le 5\\times 10^3 & 40 \\cr \\hline\n3 & n\\le 10^{18} & m=0 & 15 \\cr \\hline\n4 & n\\le 10^{18} & m\\le 5\\times 10^3 & 30 \\cr \\hline\n\\end{array}$$\n\n此外，对于全部数据，有 $1\\le p_i\\le n,c_i\\in \\{0,1\\}, 0\\le m\\le n$ 且 $p_i$ 各不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-2」阴阳玉", "background": "博丽灵梦有一块好大好大的阴阳玉，它是是博丽灵梦的主要武器之一。\n\n但是阴阳玉的能量来源，源自主人的灵力聚集力量，因此，灵梦在平时总是需要对其进行保养。简单来说，灵梦会使用灵力，来获取阴阳玉所需的能量。\n\n", "description": "灵力有阴阳之分。初始的时候，灵梦只有两个阳灵力，它们围成了一个圈。每次，灵梦可以进行以下两种操作：\n\n- 在两个灵力直接加入一个阳灵力。\n\n- 移走一个阳灵力。\n\n为了保持稳定，任何时候这个圈上的灵力都**不应该少于两个**。\n\n由于灵力的阴阳并不稳定，因此一旦某个灵力周围发生改变（多出一个灵力，或减少一个灵力），它就会从阳变成阴，或从阴变成阳。不过，如果只是周边灵力的性质改变，那么它就不会发生变化。\n\n灵梦会不断调节灵力，直到它**最终**变成 $n$ 个（中途可能多于 $n$ 个）。然后，灵梦会从某个点**依次**按照顺时针或逆时针取下每个灵力。它会形成一条链。灵梦会用链上的能量，来加强她的阴阳玉。\n\n做到这一点非常容易。但是灵梦非常好奇，一共可能形成多少种不同的**链**。\n\n由于灵梦的偏好，她可能会有 $m$ 个限制条件。第 $i$ 个条件 $(p_i,c_i)$ ，规定了链上第 $p_i$ 个灵力应该为何种灵力。若 $c_i=0$ ，则应该为阴灵力；否则为阳。\n\n由于可能结果太大，灵梦只需要得到答案对 $998244353$ 取模的结果。\n\n两个链不同，当且仅当存在一个位置的点颜色不同。", "inputFormat": "第一行为一个正整数 $n$ 和一个非负整数 $m$ 。\n\n当 $m=0$ 时无约束条件。否则接下来会有 $m$ 行，每行两个非负整数 $p_i,c_i$ ，含义如上。", "outputFormat": "一行，一个非负整数，表示所有链的可能种类总数对 $998244353$ 取模的值。", "hint": "#### 样例解释\n\n对于样例一，可能存在以下两种构造方式：\n\n![pic3.JPG/The \"2\"-th of the \"1\"-st.](https://i.loli.net/2020/07/17/VQn8MB7fxJsA1Rr.jpg)\n\n其中， $\\tt ADD$ 表示增加一个阳灵力，$\\tt RMV$ 表示移走一个阳灵力。\n\n将得到的两个环分别拆开，一共可以得到以下五种链：\n\n- 环一：**阳—阳—阳—阳**。\n\n- 环二：**阳—阳—阴—阴**，**阳—阴—阴—阳**，**阴—阴—阳—阳**，**阴—阳—阳—阴**。\n\n因此答案为 $5$ 。\n\n对于样例二，我们限定了链上第一个灵力为阳。因此结果为 $3$ 。\n\n#### 数据范围\n\n$$\\def\\t{\\text}\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & n\\t{ 的范围} & m\\t{ 的范围} & \\t{分值}\\cr\\hline\n1 & n\\le 16 & m\\le 16 & 15 \\cr \\hline\n2 & n\\le 10^6 &  m\\le 5\\times 10^3 & 40 \\cr \\hline\n3 & n\\le 10^{18} & m=0 & 15 \\cr \\hline\n4 & n\\le 10^{18} & m\\le 5\\times 10^3 & 30 \\cr \\hline\n\\end{array}$$\n\n此外，对于全部数据，有 $1\\le p_i\\le n,c_i\\in \\{0,1\\}, 0\\le m\\le n$ 且 $p_i$ 各不相同。", "locale": "zh-CN"}}}
{"pid": "P6735", "type": "P", "difficulty": 6, "samples": [["4 2 0\n", "20\n"], ["4 2 1\n1 1 1 1\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["动态规划 DP", "2020", "区间 DP", "组合数学"], "title": "「Wdsr-2」环", "background": "", "description": "Kagamine Rin 有一个圆环，上面均匀分布着 $n$ 个点，这些点之间连接着 $m$ 条线段。\n\n突然有一天，这些线段全都不见了。\n\nRin 想要找回这些线段，但是她不记得线段的分布。她只记得，这些线段中任意两条都不相交。\n\n**注意：只在端点处相交不算相交；重合不算相交。** 下面的样例解释有助于理解本题中的定义。\n\nRin 有时还会记得一些额外的信息，她可能还会告诉你每个点上连接的线段数。\n\n现在 Rin 想要知道，符合她的记忆的方案数有多少种。由于结果可能很大，你只需要输出答案对 $1000000007$ 取模的结果（模数是一个质数）。\n", "inputFormat": "第一行输入三个整数 $n,m,type$。\n\n如果 $type=1$，接下来一行输入 $n$ 个整数，第 $i$ 个整数 $a_i$ 表示第 $i$ 个点上连接的线段数。数据保证 $\\sum_{i=1}^na_i=2m$。\n", "outputFormat": "输出只有一个整数，表示合法的方案数对 $1000000007$ 取模的结果。\n", "hint": "样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/82pgikk2.png)\n\n**Update：上图第二行第三个画错了，它的竖应该在右边**\n\n\n如上图，有 $20$ 种方案满足样例 $1$ 的要求，而只有最后两种方案满足样例 $2$ 的要求。\n\n------\n\n**本题采用捆绑测试**，数据范围遵守如下约定：\n\nsubtask | $n\\le$ | $m\\le$ | $type$ | 分数\n:-:|:-:|:-:|:-:|:-:\n$0$ | $8$ | $8$ | $0$ | $10$\n$1$ | $50$ | $50$ | $0$ | $10$\n$2$ | $4000$ | $4000$ | $0$ | $15$\n$3$ | $8$ | $8$ | $1$ | $10$\n$4$ | $50$ | $50$ | $1$ | $15$\n$5$ | $600$ | $600$ | $1$ | $20$\n$6$ | $4000$ | $4000$ | $1$ | $20$\n\n对于所有数据，有 $2\\le n\\le 4000,1\\le m\\le 4000,type\\in \\{0,1\\}, a_i \\ge 0$。若 $type=1$ 则保证 $\\sum_{i=1}^na_i=2m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-2」环", "background": "", "description": "Kagamine Rin 有一个圆环，上面均匀分布着 $n$ 个点，这些点之间连接着 $m$ 条线段。\n\n突然有一天，这些线段全都不见了。\n\nRin 想要找回这些线段，但是她不记得线段的分布。她只记得，这些线段中任意两条都不相交。\n\n**注意：只在端点处相交不算相交；重合不算相交。** 下面的样例解释有助于理解本题中的定义。\n\nRin 有时还会记得一些额外的信息，她可能还会告诉你每个点上连接的线段数。\n\n现在 Rin 想要知道，符合她的记忆的方案数有多少种。由于结果可能很大，你只需要输出答案对 $1000000007$ 取模的结果（模数是一个质数）。\n", "inputFormat": "第一行输入三个整数 $n,m,type$。\n\n如果 $type=1$，接下来一行输入 $n$ 个整数，第 $i$ 个整数 $a_i$ 表示第 $i$ 个点上连接的线段数。数据保证 $\\sum_{i=1}^na_i=2m$。\n", "outputFormat": "输出只有一个整数，表示合法的方案数对 $1000000007$ 取模的结果。\n", "hint": "样例解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/82pgikk2.png)\n\n**Update：上图第二行第三个画错了，它的竖应该在右边**\n\n\n如上图，有 $20$ 种方案满足样例 $1$ 的要求，而只有最后两种方案满足样例 $2$ 的要求。\n\n------\n\n**本题采用捆绑测试**，数据范围遵守如下约定：\n\nsubtask | $n\\le$ | $m\\le$ | $type$ | 分数\n:-:|:-:|:-:|:-:|:-:\n$0$ | $8$ | $8$ | $0$ | $10$\n$1$ | $50$ | $50$ | $0$ | $10$\n$2$ | $4000$ | $4000$ | $0$ | $15$\n$3$ | $8$ | $8$ | $1$ | $10$\n$4$ | $50$ | $50$ | $1$ | $15$\n$5$ | $600$ | $600$ | $1$ | $20$\n$6$ | $4000$ | $4000$ | $1$ | $20$\n\n对于所有数据，有 $2\\le n\\le 4000,1\\le m\\le 4000,type\\in \\{0,1\\}, a_i \\ge 0$。若 $type=1$ 则保证 $\\sum_{i=1}^na_i=2m$。", "locale": "zh-CN"}}}
{"pid": "P6736", "type": "P", "difficulty": 6, "samples": [["3\n2 1 1 3\n3 1 2 7\n7 1 2 4", "0\n2\n-1"], ["3\n2 2 4 7\n3 2 4 6\n5 2 1 3", "2\n-1\n0"], ["3\n4 3 5 8\n2 3 9 11\n6 3 1 5", "-1\n3\n0"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "递归", "数论", "洛谷原创", "O2优化", "哈希 hashing", "欧拉降幂", "大步小步算法 BSGS"], "title": "「Wdsr-2」白泽教育", "background": "上白泽慧音在给雾之湖的妖精们讲课。\n\n某天，慧音在上数学课时，提到了一种非常有趣的记号：**高德纳箭号表示法**。它可以用来描述非常巨大的数字。~~比如紫的年龄。~~\n\n对于非负整数 $a, b$ 和正整数 $n$，高德纳箭号表示法的定义为：\n\n$$a \\uparrow^n b = \\begin{cases}\n1\\ (b = 0) \\\\\na^b\\ (n = 1\\ \\operatorname{and}\\ b > 0) \\\\\na \\uparrow^{n - 1} (a \\uparrow^n (b - 1))\\ (n > 1\\ \\operatorname{and}\\ b > 0)\n\\end{cases}$$\n\n一些简单的例子：\n\n- $2 \\uparrow 31 = 2^{31} = 2147483648$\n\n- $2 \\uparrow \\uparrow 4 = 2^{2^{2^2}} = 2^{2^4} = 2^{16} = 65536$\n\n注：\n1. $a \\uparrow b$ 与 $a \\uparrow^1 b$ 相同；\n\n2. $a \\uparrow \\uparrow b$ 与 $a \\uparrow^2 b$ 相同；\n\n3. 请注意幂运算的顺序。", "description": "慧音希望琪露诺解决以下关于 $x$ 的方程：\n\n$$a \\uparrow^n x \\equiv b \\pmod p$$\n\n其中，$a, n, b, p$ 为已知的常数，$x$ 为未知数。\n\n琪露诺被高德纳箭号表示法搞得云里雾里的，但是她不想被头槌。你能帮帮她吗？", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行，四个整数 $a, n, b, p$。", "outputFormat": "对于每组数据，输出一行，一个整数，如果原方程有解，输出该方程的最小非负整数解；否则，输出 $-1$。", "hint": "**本题开启捆绑测试。**\n\n| Subtask | $n$ | $p$ | $T$ | 分值 | 时限 |\n| :------: | :------: | :------: | :------: | :------: | :------: |\n| $1$ | $n = 1$ | $2 \\leq p \\leq 10^9$ 且 $p$ 为质数 | $1 \\leq T \\leq 100$ | $15 \\operatorname{pts}$ | $2.00 \\operatorname{s}$ |\n| $2$ | $n = 2$ | 无特殊限制 | $1 \\leq T \\leq 5 \\times 10^3$ | $25 \\operatorname{pts}$ | $1.00 \\operatorname{s}$ |\n| $3$ | $n = 3$ | 无特殊限制 | 无特殊限制 | $60 \\operatorname{pts}$ | $2.00 \\operatorname{s}$ |\n\n对于 $100\\%$ 的数据，$1 \\leq a \\leq 10^9$，$1 \\leq n \\leq 3$，$0 \\leq b < p \\leq 10^9$，$1 \\leq T \\leq 2 \\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdsr-2」白泽教育", "background": "上白泽慧音在给雾之湖的妖精们讲课。\n\n某天，慧音在上数学课时，提到了一种非常有趣的记号：**高德纳箭号表示法**。它可以用来描述非常巨大的数字。~~比如紫的年龄。~~\n\n对于非负整数 $a, b$ 和正整数 $n$，高德纳箭号表示法的定义为：\n\n$$a \\uparrow^n b = \\begin{cases}\n1\\ (b = 0) \\\\\na^b\\ (n = 1\\ \\operatorname{and}\\ b > 0) \\\\\na \\uparrow^{n - 1} (a \\uparrow^n (b - 1))\\ (n > 1\\ \\operatorname{and}\\ b > 0)\n\\end{cases}$$\n\n一些简单的例子：\n\n- $2 \\uparrow 31 = 2^{31} = 2147483648$\n\n- $2 \\uparrow \\uparrow 4 = 2^{2^{2^2}} = 2^{2^4} = 2^{16} = 65536$\n\n注：\n1. $a \\uparrow b$ 与 $a \\uparrow^1 b$ 相同；\n\n2. $a \\uparrow \\uparrow b$ 与 $a \\uparrow^2 b$ 相同；\n\n3. 请注意幂运算的顺序。", "description": "慧音希望琪露诺解决以下关于 $x$ 的方程：\n\n$$a \\uparrow^n x \\equiv b \\pmod p$$\n\n其中，$a, n, b, p$ 为已知的常数，$x$ 为未知数。\n\n琪露诺被高德纳箭号表示法搞得云里雾里的，但是她不想被头槌。你能帮帮她吗？", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n一行，四个整数 $a, n, b, p$。", "outputFormat": "对于每组数据，输出一行，一个整数，如果原方程有解，输出该方程的最小非负整数解；否则，输出 $-1$。", "hint": "**本题开启捆绑测试。**\n\n| Subtask | $n$ | $p$ | $T$ | 分值 | 时限 |\n| :------: | :------: | :------: | :------: | :------: | :------: |\n| $1$ | $n = 1$ | $2 \\leq p \\leq 10^9$ 且 $p$ 为质数 | $1 \\leq T \\leq 100$ | $15 \\operatorname{pts}$ | $2.00 \\operatorname{s}$ |\n| $2$ | $n = 2$ | 无特殊限制 | $1 \\leq T \\leq 5 \\times 10^3$ | $25 \\operatorname{pts}$ | $1.00 \\operatorname{s}$ |\n| $3$ | $n = 3$ | 无特殊限制 | 无特殊限制 | $60 \\operatorname{pts}$ | $2.00 \\operatorname{s}$ |\n\n对于 $100\\%$ 的数据，$1 \\leq a \\leq 10^9$，$1 \\leq n \\leq 3$，$0 \\leq b < p \\leq 10^9$，$1 \\leq T \\leq 2 \\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P6737", "type": "P", "difficulty": 5, "samples": [["2\n3 3 1\n4 7 2", "###\n#.x\n#o#\n\n.o.####\n.#..x.#\n...##.#\n###o..."]], "limits": {"time": [5000], "memory": [512000]}, "tags": ["贪心", "2016", "提交答案", "Special Judge", "构造", "BalticOI（波罗的海）"], "title": "[BalticOI 2016] 迷宫 (Day2)", "background": "", "description": "您看到了一道题\n\n> 给定一个迷宫，迷宫中有四种方块：\n> \n> - `.` 地板，可以走\n> - `#` 墙壁，不可以走，也不可以穿过\n> - `x` 基地\n> - `o` 硬币\n>\n> 您的任务就是求从基地开始，可以向上，向下，向左，向右走，最后回到基地得到的硬币数的最大值。\n\n您想知道，给定迷宫的大小为 $n \\times m$，并且给定答案为 $k$，能构造出的一个迷宫。\n\n因为您创造了 $t$ 道这样的题，所以您要构造 $t$ 个迷宫。", "inputFormat": "第一行一个整数 $t$ 代表要构造的迷宫数。     \n接下来 $t$ 行每行三个整数 $n,m,k$ 代表迷宫大小和最终答案。", "outputFormat": "对于每个要构造的数据，输出 $n$ 行，每行 $m$ 个字符代表这个迷宫。      \n两个迷宫之间要有一个空行。", "hint": "#### 数据说明与评分策略\n\n**本题为提交答案题**，输入数据请从附加文件中获取。\n\n一共有 $1$ 组 $t=50$ 的输入输出文件，您提交答案的答案包里的文件应为 `maze.out`。\n\n我们定义：\n\n- 您得到的迷宫的难度 $x$ 为从基地开始获取所有金币的最短路长度。\n- 官方得到的迷宫的难度 $d$ 为从基地开始获取所有金币的最短路长度。\n\n**本题采用 Special Judge**。于每个构造出的迷宫，您可以得到\n\n$$\\max(0,100-3(d-x))$$\n\n的分数。\n\n感谢 spj 提供者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n#### 说明\n\n翻译自 [BalticOI 2016 Day2 B Maze](https://boi.cses.fi/files/boi2016_day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2016] 迷宫 (Day2)", "background": "", "description": "您看到了一道题\n\n> 给定一个迷宫，迷宫中有四种方块：\n> \n> - `.` 地板，可以走\n> - `#` 墙壁，不可以走，也不可以穿过\n> - `x` 基地\n> - `o` 硬币\n>\n> 您的任务就是求从基地开始，可以向上，向下，向左，向右走，最后回到基地得到的硬币数的最大值。\n\n您想知道，给定迷宫的大小为 $n \\times m$，并且给定答案为 $k$，能构造出的一个迷宫。\n\n因为您创造了 $t$ 道这样的题，所以您要构造 $t$ 个迷宫。", "inputFormat": "第一行一个整数 $t$ 代表要构造的迷宫数。     \n接下来 $t$ 行每行三个整数 $n,m,k$ 代表迷宫大小和最终答案。", "outputFormat": "对于每个要构造的数据，输出 $n$ 行，每行 $m$ 个字符代表这个迷宫。      \n两个迷宫之间要有一个空行。", "hint": "#### 数据说明与评分策略\n\n**本题为提交答案题**，输入数据请从附加文件中获取。\n\n一共有 $1$ 组 $t=50$ 的输入输出文件，您提交答案的答案包里的文件应为 `maze.out`。\n\n我们定义：\n\n- 您得到的迷宫的难度 $x$ 为从基地开始获取所有金币的最短路长度。\n- 官方得到的迷宫的难度 $d$ 为从基地开始获取所有金币的最短路长度。\n\n**本题采用 Special Judge**。于每个构造出的迷宫，您可以得到\n\n$$\\max(0,100-3(d-x))$$\n\n的分数。\n\n感谢 spj 提供者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n#### 说明\n\n翻译自 [BalticOI 2016 Day2 B Maze](https://boi.cses.fi/files/boi2016_day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6738", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "交互题", "Special Judge", "O2优化", "BalticOI（波罗的海）"], "title": "[BalticOI 2014] Cop and Robber (Day1)", "background": "**本题为交互题。**\n\n### 请使用 C++14/C++17 提交以避免不必要的 CE。\n\n### 你需要将你的函数包裹在 `extern \"C\" { }` 中，具体的，一种包裹方式如下：\n\n```cpp\nextern \"C\" {\n\tconst int N = 500;\n\tint start(int n, bool a[N][N]) {\n\t\t// ...\n\t}\n\tint nextMove(int x) {\n\t\t// ...\n\t}\n}\n```", "description": "警察抓小偷，每名警察会选择一个街角进行把守，每次警察可以选择不动或者挪动到相邻的角落，小偷初始也在一个街角，因为他知道地图，所以他会选择最好的策略进行移动，但是小偷不能原地不动。\n\n每一轮先是警察进行移动，然后是小偷进行移动，有下面两种结局：\n\n1. 小偷能够一直躲避警察\n2. 在一个街角上，小偷和警察相遇了，小偷被逮捕了\n\n求警察能不能抓到小偷，能的话输出最小轮数。\n\n您的代码必须以小偷一方为优胜策略方。\n\n#### 交互策略\n\n你需要写两个函数与交互器进行交互，函数原型分别为：\n\n```cpp\nint start(int N, bool A[MAX_N][MAX_N]);\nint nextMove(int R);\n```\n\n - 其中 `start(N, A)`传入以下参数：\n\n   - $N$——街角的数量（街角以 $0$ 到 $N - 1$ 编号）；\n\n   - $A$——一个二维数组描述小巷：对于所有的 $0 \\le i,\\,j \\le N-1$，若 $i$ 与 $j$ 不连通，则 $A[i,j]=\\texttt{false}$，否则 $A[i,j]=\\texttt{true}$\n\n    所有小巷都是双向的（即对于所有 $i$ 和 $j$，$A[i,j]=A[j,i]$），并且不会出现自环（即对于所有 $i$，$A[i,i]=\\texttt{false}$）。此外，你可以假设警察总能从其他街角通过小巷到达一个街角。\n\n 如果警察可能在由参数描述的地图上抓到强盗，函数`start`应该返回警察与强盗相遇的街角编号。否则返回 $-1$。\n\n - 而 `nextMove(R)` 传入参数 $R$，表示当前强盗的所在的街角编号。该函数应返回这次移动之后警察所在的街角编号。\n\n函数 `start` 必定会在第一次调用函数 `nextMove` 调用一次。如果 `start` 返回了 $-1$，那么 `nextMove` 将不会被调用。否则，`nextMove` 会被反复调用直到追捕行动结束。更确切地说，只要满足以下情况之一，程序必须终止：\n\n - `nextMove` 返回了一个不合法的移动；\n\n - 强盗能够一直躲避警察；\n\n - 强盗被抓住了。", "inputFormat": "None", "outputFormat": "None", "hint": "#### 样例说明\n\n对于样例 $1$，图如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bfbwyie4.png)\n\n函数调用过程如下：\n\n|函数调用|函数返回|\n|:-:|:-:|\n|`start(4, [[0, 1, 1, 1], [1, 0, 0, 0], [1, 0, 0, 0], [1, 0, 0, 0]])`|`3`|\n|`nextMove(1)`|`3`|\n|`nextMove(0)`|`0`|\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（16 pts）：无重边。\n- Subtask 2（14 pts）：地图为网格形，如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/be35kglq.png)\n\n- Subtask 3（30 pts）：$2 \\le N \\le 100$。\n- Subtask 4（40 pts）：$2 \\le N$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 500$。\n\n感谢交互库和 spj 作者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n**本题强制 $O2$ 优化。**\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day1 A Cop and Robber](https://boi.cses.fi/files/boi2014_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2014] Cop and Robber (Day1)", "background": "**本题为交互题。**\n\n### 请使用 C++14/C++17 提交以避免不必要的 CE。\n\n### 你需要将你的函数包裹在 `extern \"C\" { }` 中，具体的，一种包裹方式如下：\n\n```cpp\nextern \"C\" {\n\tconst int N = 500;\n\tint start(int n, bool a[N][N]) {\n\t\t// ...\n\t}\n\tint nextMove(int x) {\n\t\t// ...\n\t}\n}\n```", "description": "警察抓小偷，每名警察会选择一个街角进行把守，每次警察可以选择不动或者挪动到相邻的角落，小偷初始也在一个街角，因为他知道地图，所以他会选择最好的策略进行移动，但是小偷不能原地不动。\n\n每一轮先是警察进行移动，然后是小偷进行移动，有下面两种结局：\n\n1. 小偷能够一直躲避警察\n2. 在一个街角上，小偷和警察相遇了，小偷被逮捕了\n\n求警察能不能抓到小偷，能的话输出最小轮数。\n\n您的代码必须以小偷一方为优胜策略方。\n\n#### 交互策略\n\n你需要写两个函数与交互器进行交互，函数原型分别为：\n\n```cpp\nint start(int N, bool A[MAX_N][MAX_N]);\nint nextMove(int R);\n```\n\n - 其中 `start(N, A)`传入以下参数：\n\n   - $N$——街角的数量（街角以 $0$ 到 $N - 1$ 编号）；\n\n   - $A$——一个二维数组描述小巷：对于所有的 $0 \\le i,\\,j \\le N-1$，若 $i$ 与 $j$ 不连通，则 $A[i,j]=\\texttt{false}$，否则 $A[i,j]=\\texttt{true}$\n\n    所有小巷都是双向的（即对于所有 $i$ 和 $j$，$A[i,j]=A[j,i]$），并且不会出现自环（即对于所有 $i$，$A[i,i]=\\texttt{false}$）。此外，你可以假设警察总能从其他街角通过小巷到达一个街角。\n\n 如果警察可能在由参数描述的地图上抓到强盗，函数`start`应该返回警察与强盗相遇的街角编号。否则返回 $-1$。\n\n - 而 `nextMove(R)` 传入参数 $R$，表示当前强盗的所在的街角编号。该函数应返回这次移动之后警察所在的街角编号。\n\n函数 `start` 必定会在第一次调用函数 `nextMove` 调用一次。如果 `start` 返回了 $-1$，那么 `nextMove` 将不会被调用。否则，`nextMove` 会被反复调用直到追捕行动结束。更确切地说，只要满足以下情况之一，程序必须终止：\n\n - `nextMove` 返回了一个不合法的移动；\n\n - 强盗能够一直躲避警察；\n\n - 强盗被抓住了。", "inputFormat": "None", "outputFormat": "None", "hint": "#### 样例说明\n\n对于样例 $1$，图如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bfbwyie4.png)\n\n函数调用过程如下：\n\n|函数调用|函数返回|\n|:-:|:-:|\n|`start(4, [[0, 1, 1, 1], [1, 0, 0, 0], [1, 0, 0, 0], [1, 0, 0, 0]])`|`3`|\n|`nextMove(1)`|`3`|\n|`nextMove(0)`|`0`|\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（16 pts）：无重边。\n- Subtask 2（14 pts）：地图为网格形，如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/be35kglq.png)\n\n- Subtask 3（30 pts）：$2 \\le N \\le 100$。\n- Subtask 4（40 pts）：$2 \\le N$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 500$。\n\n感谢交互库和 spj 作者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n**本题强制 $O2$ 优化。**\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day1 A Cop and Robber](https://boi.cses.fi/files/boi2014_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6739", "type": "P", "difficulty": 4, "samples": [["7\nABXCABC", "ABC"], ["6\nABCDEF", "NOT POSSIBLE"], ["9\nABABABABA", "NOT UNIQUE"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "哈希 hashing", "BalticOI（波罗的海）"], "title": "[BalticOI 2014] Three Friends (Day1)", "background": "", "description": "有一个字符串 $S$，对他进行操作：\n\n1. 将 $S$ 复制为两份，存在字符串 $T$ 中\n2. 在 $T$ 的某一位置上插入一个字符，得到字符串 $U$\n\n现在给定 $U$，求 $S$。", "inputFormat": "第一行一个整数 $N$ 代表 $U$ 的长度。   \n第二行 $N$ 个字符代表字符串 $U$。", "outputFormat": "- 如果不能通过上述的步骤从 $S$ 推到 $U$，输出 `NOT POSSIBLE`。\n- 如果从 $U$ 得到的 $S$ 不是唯一的，输出 `NOT UNIQUE`。\n- 否则，输出一个字符串 $S$。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（35 pts）：$N \\le 2001$。\n- Subtask 2（65 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 2 \\times 10^6+1$，保证 $U$ 中只包含大写字母。\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day1 B Three Friends](https://boi.cses.fi/files/boi2014_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2014] Three Friends (Day1)", "background": "", "description": "有一个字符串 $S$，对他进行操作：\n\n1. 将 $S$ 复制为两份，存在字符串 $T$ 中\n2. 在 $T$ 的某一位置上插入一个字符，得到字符串 $U$\n\n现在给定 $U$，求 $S$。", "inputFormat": "第一行一个整数 $N$ 代表 $U$ 的长度。   \n第二行 $N$ 个字符代表字符串 $U$。", "outputFormat": "- 如果不能通过上述的步骤从 $S$ 推到 $U$，输出 `NOT POSSIBLE`。\n- 如果从 $U$ 得到的 $S$ 不是唯一的，输出 `NOT UNIQUE`。\n- 否则，输出一个字符串 $S$。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（35 pts）：$N \\le 2001$。\n- Subtask 2（65 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2 \\le N \\le 2 \\times 10^6+1$，保证 $U$ 中只包含大写字母。\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day1 B Three Friends](https://boi.cses.fi/files/boi2014_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6740", "type": "P", "difficulty": 6, "samples": [["6\n7 8 9 5 1 2", "47"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "O2优化", "BalticOI（波罗的海）"], "title": "[BalticOI 2014] Sequence (Day1)", "background": "", "description": "现在有 $K$ 个连续正整数，每个整数你只能看见其中一位数字，求最开始的数 $N$ 的最小值。", "inputFormat": "第一行一个整数 $K$ 代表数列长度。      \n第二行 $K$ 的整数代表你能看见的数字。", "outputFormat": "一行一个整数代表 $N$ 的最小值。", "hint": "#### 样例说明\n\n对于样例 $1$，使得 $N$ 最小的数列为 $47,48,49,50,51,52$，$N$ 的最小值为 $47$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（9 pts）：$N,K \\le 1000$。\n- Subtask 2（33 pts）：$K \\le 1000$。\n- Subtask 3（25 pts）：给定的数位都相等。\n- Subtask 4（33 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le K \\le 10^5$。\n\n**本题强制 O2 优化。**\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day1 C Sequence](http://www.boi2014.lmio.lt/tasks/sequence-en.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2014] Sequence (Day1)", "background": "", "description": "现在有 $K$ 个连续正整数，每个整数你只能看见其中一位数字，求最开始的数 $N$ 的最小值。", "inputFormat": "第一行一个整数 $K$ 代表数列长度。      \n第二行 $K$ 的整数代表你能看见的数字。", "outputFormat": "一行一个整数代表 $N$ 的最小值。", "hint": "#### 样例说明\n\n对于样例 $1$，使得 $N$ 最小的数列为 $47,48,49,50,51,52$，$N$ 的最小值为 $47$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（9 pts）：$N,K \\le 1000$。\n- Subtask 2（33 pts）：$K \\le 1000$。\n- Subtask 3（25 pts）：给定的数位都相等。\n- Subtask 4（33 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le K \\le 10^5$。\n\n**本题强制 O2 优化。**\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day1 C Sequence](http://www.boi2014.lmio.lt/tasks/sequence-en.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6741", "type": "P", "difficulty": 5, "samples": [["10\n0 0\n1 0\n1 1\n3 1\n3 5\n2 5\n2 3\n1 3\n1 2\n0 2", "1 2 3 2"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2014] Demarcation (Day2)", "background": "", "description": "给定一个多边形，求画一条线段将这个多边形分为两个全等的多边形。\n\n需要保证这条线段与坐标轴平行。", "inputFormat": "第一行一个整数 $N$ 代表这个多边形由 $N$ 个点组成。  \n接下来 $N$ 行每行两个整数 $X_i,Y_i$ 代表多边形的一个点 $(X_i,Y_i)$。", "outputFormat": "如果不可以分为两个全等的多边形，输出一个字符串 `NO`。  \n如果可以，输出四个整数 $x_1,y_1,x_2,y_2$ 代表线段 $(x_1,y_1)\\to (x_2,y_2)$。", "hint": "#### 样例说明\n\n对于样例 $1$，如下图所示，可以分成两个全等的多边形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4ueohtd3.png)\n\n同理，输出 `3 2 1 2` 也可。\n\n对于样例 $2$，如下图所示，不可以分为两个全等的多边形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yl64yxp9.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（12 pts）：保证有解。\n- Subtask 2（15 pts）：$N \\le 200$。\n- Subtask 3（23 pts）：$N \\le 2000$。\n- Subtask 4（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$4 \\le N \\le 10^5$。\n\n**本题采用 Special Judge。**\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day2 A Demarcation](https://boi.cses.fi/files/boi2014_day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2014] Demarcation (Day2)", "background": "", "description": "给定一个多边形，求画一条线段将这个多边形分为两个全等的多边形。\n\n需要保证这条线段与坐标轴平行。", "inputFormat": "第一行一个整数 $N$ 代表这个多边形由 $N$ 个点组成。  \n接下来 $N$ 行每行两个整数 $X_i,Y_i$ 代表多边形的一个点 $(X_i,Y_i)$。", "outputFormat": "如果不可以分为两个全等的多边形，输出一个字符串 `NO`。  \n如果可以，输出四个整数 $x_1,y_1,x_2,y_2$ 代表线段 $(x_1,y_1)\\to (x_2,y_2)$。", "hint": "#### 样例说明\n\n对于样例 $1$，如下图所示，可以分成两个全等的多边形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4ueohtd3.png)\n\n同理，输出 `3 2 1 2` 也可。\n\n对于样例 $2$，如下图所示，不可以分为两个全等的多边形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yl64yxp9.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（12 pts）：保证有解。\n- Subtask 2（15 pts）：$N \\le 200$。\n- Subtask 3（23 pts）：$N \\le 2000$。\n- Subtask 4（50 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$4 \\le N \\le 10^5$。\n\n**本题采用 Special Judge。**\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day2 A Demarcation](https://boi.cses.fi/files/boi2014_day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6742", "type": "P", "difficulty": 5, "samples": [["4 4\n.#.C\n.#.#\n....\nS...", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2014", "O2优化", "BalticOI（波罗的海）"], "title": "[BalticOI 2014] Portals (Day2)", "background": "", "description": "给定一个 $R\\times C$ 的迷宫，每个格子都有一种方块：\n\n- `#` 墙，不可以走，不可以穿过\n- `.` 路，可以走\n- `S` 出生点，玩家从这里开始走，只有一个\n- `C` 终点，玩家要到达这里，只有一个\n\n现在要对迷宫进行扩容，周围要增加一个方块 `#`，变成 $(R+2)\\times (C+2)$ 的迷宫。\n\n并且在任何时候，它都可以向上、左、下、右四个方向中的一个发射传送门。当一个传送门被发射，它会一直向发射的方向飞行，直到碰触到墙壁。这时，传送门会被放置在这堵墙上。\n\n走一格需要 $1$ 的时间，穿梭传送门也需要 $1$ 的时间。\n\n求从出生点到终点最少需要多少时间。\n\n如果很难理解题意，请配合样例进行理解。", "inputFormat": "第一行两个整数 $R,C$ 代表迷宫大小。     \n接下来 $R$ 行每行 $C$ 个字符代表迷宫。", "outputFormat": "一行一个整数代表到达终点的最小时间。", "hint": "#### 样例说明\n\n对于样例 $1$，我们把迷宫模拟出来并且在周围加上 `#` 之后，如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5d381oik.png)\n\n人形物体为 `S`，蛋糕形物体为 `C`。\n\n如图所示，至少需要 $4$ 的时间。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$R,C \\le 10$。\n- Subtask 2（20 pts）：$R,C \\le 50$。\n- Subtask 3（20 pts）：$R,C \\le 200$，每个 `.` 周围都至少有一个 `#`。\n- Subtask 4（19 pts）：$R,C  \\le 200$。\n- Subtask 5（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le R,C \\le 1000$。\n\n**本题强制 $O2$ 优化。**\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day2 B Portals](https://boi.cses.fi/files/boi2014_day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2014] Portals (Day2)", "background": "", "description": "给定一个 $R\\times C$ 的迷宫，每个格子都有一种方块：\n\n- `#` 墙，不可以走，不可以穿过\n- `.` 路，可以走\n- `S` 出生点，玩家从这里开始走，只有一个\n- `C` 终点，玩家要到达这里，只有一个\n\n现在要对迷宫进行扩容，周围要增加一个方块 `#`，变成 $(R+2)\\times (C+2)$ 的迷宫。\n\n并且在任何时候，它都可以向上、左、下、右四个方向中的一个发射传送门。当一个传送门被发射，它会一直向发射的方向飞行，直到碰触到墙壁。这时，传送门会被放置在这堵墙上。\n\n走一格需要 $1$ 的时间，穿梭传送门也需要 $1$ 的时间。\n\n求从出生点到终点最少需要多少时间。\n\n如果很难理解题意，请配合样例进行理解。", "inputFormat": "第一行两个整数 $R,C$ 代表迷宫大小。     \n接下来 $R$ 行每行 $C$ 个字符代表迷宫。", "outputFormat": "一行一个整数代表到达终点的最小时间。", "hint": "#### 样例说明\n\n对于样例 $1$，我们把迷宫模拟出来并且在周围加上 `#` 之后，如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5d381oik.png)\n\n人形物体为 `S`，蛋糕形物体为 `C`。\n\n如图所示，至少需要 $4$ 的时间。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（11 pts）：$R,C \\le 10$。\n- Subtask 2（20 pts）：$R,C \\le 50$。\n- Subtask 3（20 pts）：$R,C \\le 200$，每个 `.` 周围都至少有一个 `#`。\n- Subtask 4（19 pts）：$R,C  \\le 200$。\n- Subtask 5（30 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le R,C \\le 1000$。\n\n**本题强制 $O2$ 优化。**\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day2 B Portals](https://boi.cses.fi/files/boi2014_day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6743", "type": "P", "difficulty": 5, "samples": [["10 15\n1 3\n5 1\n2 3\n9 2\n3 4\n6 3\n4 5\n7 4\n4 8\n5 7\n8 5\n6 7\n7 8\n8 10\n10 9", "2 3 4 5 8 10 9\n7 8 4\n1 5 7 6 3"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["搜索", "2014", "Special Judge", "深度优先搜索 DFS", "BalticOI（波罗的海）"], "title": "[BalticOI 2014] Senior Postmen (Day2)", "background": "", "description": "给定一张 $N$ 点 $M$ 边的连通无向图，求从中找出若干个简单环，使得：\n\n- 这些环没有重复的边。\n- 这些环覆盖了所有的点和边。\n\n简单环即为不重复经过点的环。\n\n保证图无重边，保证有解。", "inputFormat": "第一行两个整数 $N,M$ 代表点数和边数。       \n接下来 $M$ 行每行两个整数 $u,v$ 代表一条边。", "outputFormat": "若干行每行若干个整数代表一个简单环。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z5q8d4du.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（38 pts）：$N \\le 2000$，$M \\le 10^5$。\n- Subtask 2（17 pts）：$N,M \\le 10^5$。\n- Subtask 3（45 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$3 \\le N,M \\le 5 \\times 10^5$。\n\n**本题使用 Special Judge。**\n\n感谢 spj 提供者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day2 C Senior Postmen](https://boi.cses.fi/files/boi2014_day2.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2014] Senior Postmen (Day2)", "background": "", "description": "给定一张 $N$ 点 $M$ 边的连通无向图，求从中找出若干个简单环，使得：\n\n- 这些环没有重复的边。\n- 这些环覆盖了所有的点和边。\n\n简单环即为不重复经过点的环。\n\n保证图无重边，保证有解。", "inputFormat": "第一行两个整数 $N,M$ 代表点数和边数。       \n接下来 $M$ 行每行两个整数 $u,v$ 代表一条边。", "outputFormat": "若干行每行若干个整数代表一个简单环。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z5q8d4du.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（38 pts）：$N \\le 2000$，$M \\le 10^5$。\n- Subtask 2（17 pts）：$N,M \\le 10^5$。\n- Subtask 3（45 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$3 \\le N,M \\le 5 \\times 10^5$。\n\n**本题使用 Special Judge。**\n\n感谢 spj 提供者 @[tiger2005](https://www.luogu.com.cn/user/60864)。\n\n#### 说明\n\n翻译自 [BalticOI 2014 Day2 C Senior Postmen](https://boi.cses.fi/files/boi2014_day2.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6744", "type": "P", "difficulty": 0, "samples": [["7\n1 3 1 9\n4 7 2 8\n11 15 4 12\n10 12 15 19\n16 23 16 22\n20 22 13 25\n30 31 30 31", "3 8"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2011", "Special Judge", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2011] trapezoid", "background": "", "description": "考虑两条水平的直线，这两条线之间会有 $N$ 个梯形。\n\n如果两个梯形不相交，则称他们在一个独立集内。\n\n您需要求出最大的独立集大小和这种独立集的个数。\n\n由于独立集的个数可能很多，请输出其 $\\bmod\\ 30013$ 的值。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来 $N$ 行，每行四个整数 $a_i,b_i,c_i,d_i$，分别表示第 $i$ 个梯形的左上，右上，左下和右下顶点。", "outputFormat": "仅一行两个整数，表示最大的独立集大小和这种独立集的个数。\n\n由于独立集的个数可能很多，请输出其 $\\bmod\\ 30013$ 的值。", "hint": "#### 样例解释\n下面这个图不怎么准确，但是应该够用：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tlwnkrg6.png)\n\n#### 数据范围及限制\n- 对于 $50\\%$ 的数据，保证 $N\\le 5\\times 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^5$，$1\\le a_i,b_i,c_i,d_i\\le 10^9$，没有两个梯形具有相同的顶点。\n\n#### SPJ 计分标准\n如果您只回答对了第一个问题，得该测试点 $40\\%$ 的分数。\n\n所以，如果您只会第一个问题，也请在第二个问题瞎输出一点。\n\n#### 说明\n本题译自 [Balkan Olympiad in Informatics 2011](http://www.boi2011.ro/boi2011/) [Day 2](http://www.boi2011.ro/boi2011/?pagina=probleme) [T3 trapezoid](http://www.boi2011.ro/resurse/tasks/trapezoid.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2011] trapezoid", "background": "", "description": "考虑两条水平的直线，这两条线之间会有 $N$ 个梯形。\n\n如果两个梯形不相交，则称他们在一个独立集内。\n\n您需要求出最大的独立集大小和这种独立集的个数。\n\n由于独立集的个数可能很多，请输出其 $\\bmod\\ 30013$ 的值。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来 $N$ 行，每行四个整数 $a_i,b_i,c_i,d_i$，分别表示第 $i$ 个梯形的左上，右上，左下和右下顶点。", "outputFormat": "仅一行两个整数，表示最大的独立集大小和这种独立集的个数。\n\n由于独立集的个数可能很多，请输出其 $\\bmod\\ 30013$ 的值。", "hint": "#### 样例解释\n下面这个图不怎么准确，但是应该够用：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tlwnkrg6.png)\n\n#### 数据范围及限制\n- 对于 $50\\%$ 的数据，保证 $N\\le 5\\times 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1\\le N\\le 10^5$，$1\\le a_i,b_i,c_i,d_i\\le 10^9$，没有两个梯形具有相同的顶点。\n\n#### SPJ 计分标准\n如果您只回答对了第一个问题，得该测试点 $40\\%$ 的分数。\n\n所以，如果您只会第一个问题，也请在第二个问题瞎输出一点。\n\n#### 说明\n本题译自 [Balkan Olympiad in Informatics 2011](http://www.boi2011.ro/boi2011/) [Day 2](http://www.boi2011.ro/boi2011/?pagina=probleme) [T3 trapezoid](http://www.boi2011.ro/resurse/tasks/trapezoid.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6745", "type": "P", "difficulty": 1, "samples": [["9 7", "1000000007"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "字符串", "洛谷月赛"], "title": "『MdOI R3』Number", "background": "", "description": "生活中我们会碰到一些特殊数字，这些数字使用一些特殊表达方式后会方便记忆和使用。比如说，$10^9+7$ 就非常常见——它相比于 $1000000007$，更方便选手看清数字而不必数 $0$，而且没有科学计数法的精度损失。\n\n你现在有一个形如 $10^{k}+x$ 的数字，请还原成一般写法。", "inputFormat": "一行两个整数 $k,x$。", "outputFormat": "一行一个整数表示 $10^k+x$。", "hint": "【样例解释】   \n\n$10^9+7=1000000007$。\n\n更多样例请[到这里](https://www.luogu.com.cn/paste/8lbtjwuk)领取。\n\n【数据范围】   \n\n**本题采用捆绑测试**，换言之，你只有通过一个子任务的所有测试点，才可以拿到该子任务对应分数。\n|子任务编号|$x<$|$k\\le$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|:-:|\n|1|$10$|$9$||12|\n|2|$10$|$500$||15|\n|3|$10^{18}$|$18$||8|\n|4|$10^{18}$|$500$|$k\\ge18$|25|\n|5|$10^{18}$|$500$||40|\n\n对于所有数据，$0\\le x<10^{18}$，$0\\leq k\\leq 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R3』Number", "background": "", "description": "生活中我们会碰到一些特殊数字，这些数字使用一些特殊表达方式后会方便记忆和使用。比如说，$10^9+7$ 就非常常见——它相比于 $1000000007$，更方便选手看清数字而不必数 $0$，而且没有科学计数法的精度损失。\n\n你现在有一个形如 $10^{k}+x$ 的数字，请还原成一般写法。", "inputFormat": "一行两个整数 $k,x$。", "outputFormat": "一行一个整数表示 $10^k+x$。", "hint": "【样例解释】   \n\n$10^9+7=1000000007$。\n\n更多样例请[到这里](https://www.luogu.com.cn/paste/8lbtjwuk)领取。\n\n【数据范围】   \n\n**本题采用捆绑测试**，换言之，你只有通过一个子任务的所有测试点，才可以拿到该子任务对应分数。\n|子任务编号|$x<$|$k\\le$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|:-:|\n|1|$10$|$9$||12|\n|2|$10$|$500$||15|\n|3|$10^{18}$|$18$||8|\n|4|$10^{18}$|$500$|$k\\ge18$|25|\n|5|$10^{18}$|$500$||40|\n\n对于所有数据，$0\\le x<10^{18}$，$0\\leq k\\leq 500$。", "locale": "zh-CN"}}}
{"pid": "P6746", "type": "P", "difficulty": 2, "samples": [["9 36 1 3", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["数学", "贪心", "洛谷月赛"], "title": "『MdOI R3』Operations", "background": "这是这场比赛唯一一道没有题目背景的题，这就是本题的题目背景。", "description": "给定非负整数 $a,b$，有两种操作：\n\n1. 任意选择一个正整数 $x$，将两数都减去 $x$，执行一次该操作的代价为 $c$；\n2. 任意选择一个正整数 $x$，将两数其中一个数乘以 $x$，另一个除以 $x$ 后向下取整，执行一次该操作的代价为 $d$。\n\n在这里，向下取整指使一个数变为**不大于它的最大的整数**，比如 $3.5$ 向下取整为 $3$，$-0.07$ 向下取整为 $-1$。\n\n选择的 $x$ 可以为任意正整数。在操作的过程中，可以把 $a,b$ 变为负数。\n\n你可以任意多次对这两个数操作，求将 $a,b$ 都变成 $0$ 的代价最小值。", "inputFormat": "一行四个整数 $a,b,c,d$，用空格隔开，分别表示 $a,b$ 的初始值和两种操作的代价。", "outputFormat": "一行一个整数，表示代价的最小值。", "hint": "【样例解释】\n\n先使用一次 $2$ 操作，选择 $x=2$，将 $a$ 乘 $2$，将 $b$ 除以 $2$，得 $a=18,b=18$。  \n再使用一次 $1$ 操作，选择 $x=18$，将两个数都减去 $18$，得 $a=0,b=0$。  \n可以证明没有比上述操作代价更小的方案。\n\n更多样例请[到这里](https://www.luogu.com.cn/paste/fnvd95y2)领取。\n\n【数据范围】  \n\n**本题采用捆绑测试**，换言之，你只有通过一个子任务的所有测试点，才可以拿到该子任务对应分数。\n| 子任务编号 | $a=0$ | $b=0$ | $a=b$ | $c=1,d\\geq 10^5$ | $c \\geq 10^5,d=1$ | 分值 |\n| :--------: | :------: | :------: | :--------: | :----------------: | :----------------: | :--: |\n|     $1$      |    $\\surd$     |    $\\surd$     |            |                    |                    |  10  |\n|     $2$      |    $\\surd$     |          |            |                    |                    |  10  |\n|     $3$      |          |          |     $\\surd$      |         $\\surd$          |                    |  10  |\n|     $4$      |          |          |          | $\\surd$ |                  |  10  |\n|     $5$      |          |          | $\\surd$ |                  | $\\surd$ |  10  |\n|     $6$      |          |          |            |                    |         $\\surd$   |  10  |\n|     $7$      |          |          |            |                    |                    |  40  |\n\n特殊性质如上所示，其中，$\\surd$ 表示保证有该特殊性质，空格表示不保证有该性质。\n\n对于所有数据，$0\\leq a,b,c,d \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R3』Operations", "background": "这是这场比赛唯一一道没有题目背景的题，这就是本题的题目背景。", "description": "给定非负整数 $a,b$，有两种操作：\n\n1. 任意选择一个正整数 $x$，将两数都减去 $x$，执行一次该操作的代价为 $c$；\n2. 任意选择一个正整数 $x$，将两数其中一个数乘以 $x$，另一个除以 $x$ 后向下取整，执行一次该操作的代价为 $d$。\n\n在这里，向下取整指使一个数变为**不大于它的最大的整数**，比如 $3.5$ 向下取整为 $3$，$-0.07$ 向下取整为 $-1$。\n\n选择的 $x$ 可以为任意正整数。在操作的过程中，可以把 $a,b$ 变为负数。\n\n你可以任意多次对这两个数操作，求将 $a,b$ 都变成 $0$ 的代价最小值。", "inputFormat": "一行四个整数 $a,b,c,d$，用空格隔开，分别表示 $a,b$ 的初始值和两种操作的代价。", "outputFormat": "一行一个整数，表示代价的最小值。", "hint": "【样例解释】\n\n先使用一次 $2$ 操作，选择 $x=2$，将 $a$ 乘 $2$，将 $b$ 除以 $2$，得 $a=18,b=18$。  \n再使用一次 $1$ 操作，选择 $x=18$，将两个数都减去 $18$，得 $a=0,b=0$。  \n可以证明没有比上述操作代价更小的方案。\n\n更多样例请[到这里](https://www.luogu.com.cn/paste/fnvd95y2)领取。\n\n【数据范围】  \n\n**本题采用捆绑测试**，换言之，你只有通过一个子任务的所有测试点，才可以拿到该子任务对应分数。\n| 子任务编号 | $a=0$ | $b=0$ | $a=b$ | $c=1,d\\geq 10^5$ | $c \\geq 10^5,d=1$ | 分值 |\n| :--------: | :------: | :------: | :--------: | :----------------: | :----------------: | :--: |\n|     $1$      |    $\\surd$     |    $\\surd$     |            |                    |                    |  10  |\n|     $2$      |    $\\surd$     |          |            |                    |                    |  10  |\n|     $3$      |          |          |     $\\surd$      |         $\\surd$          |                    |  10  |\n|     $4$      |          |          |          | $\\surd$ |                  |  10  |\n|     $5$      |          |          | $\\surd$ |                  | $\\surd$ |  10  |\n|     $6$      |          |          |            |                    |         $\\surd$   |  10  |\n|     $7$      |          |          |            |                    |                    |  40  |\n\n特殊性质如上所示，其中，$\\surd$ 表示保证有该特殊性质，空格表示不保证有该性质。\n\n对于所有数据，$0\\leq a,b,c,d \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P6747", "type": "P", "difficulty": 4, "samples": [["3\n1 2 3 \n2 \n10 \n1", "3\n-1"], ["1\n0\n1\n1073741824000000", "1073741824000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "洛谷月赛"], "title": "『MdOI R3』Teleport", "background": "凯瑞甘从帝国的围攻下，击毁了大天使号，乘着雷诺的飞船逃了出来，到了休伯利安号上。\n\n“吉米？”凯瑞甘着急地四处寻找着。\n\n“很抱歉，我们没能救出他”马特·霍纳向凯瑞甘走来。\n\n“你丢下了他？”凯瑞甘回想起曾经的自己被蒙斯克丢下，便起了杀心，用灵能将马特抓了起来。\n\n“不是的，凯瑞甘，我们受到了帝国的伏击，现在必须，马上离开，过会可以回头来找他”马特解释道。\n\n“这里没有我们！你走吧，我自己去找他。”凯瑞甘放下了马特，回头坐着雷诺的回到了星球上。\n\n“警告，警告，敌军突破能量场。”帝国的舰队突破了马特舰队设下的能量场，控制着钢铁舰队折越到了这里，并对休伯利安号发起猛烈的攻击。\n\n“立即进行折越，我们必须马上离开！”马特·霍纳下令道。", "description": "马特·霍纳想要控制休伯利安号进行折越，想要进行折越，就要激活休伯利安号上的所有 $n$ 个位点。\n\n休伯利安号上有 $n$ 个位点，每个位点有 $a_i$ 点能量，为了激活，马特·霍纳会消耗 $k\\times n$ 点地嗪，这 $k\\times n$ 点地嗪会平均分给 $n$ 个位点，每个位点在接受 $k$ 点地嗪后会激发，得到 $a_i \\operatorname{xor} k$ 点高能，所有位点的高能总和为这次折越的消耗 $S$。\n\n为了能够快速的进行折越，马特·霍纳决定用最多的 $k\\times n$ 点地嗪，但可惜的是，如果地嗪使用太多，使得消耗 $S$ 超过限制值 $m$ ，那么休伯利安号就会不堪重负，最终爆炸。\n\n现在，你的任务是帮助马特·霍纳找到这个最大的 $k$ ，使得休伯利安号能在安全的前提下尽可能快的折越走。如果任何情况下都不能安全的折越走，则输出 $-1$ 。\n\n这里的 $\\operatorname{xor}$ 表示的是位运算中的按位异或运算。", "inputFormat": "第一行一个整数 $n$ 表示位点数量。  \n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个位点拥有的能量。   \n\n第三行一个数 $q$ 表示询问次数。\n\n接下来 $q$ 行表示 $q$ 次询问，每行一个数 $m$。", "outputFormat": "对于每次询问输出一行一个非负整数，表示最大的 $k$。若无解，输出 $-1$ 。", "hint": "对于第一个询问，最大的 $k$ 为 $3$ ，此时 $S=2+1+0=3 \\le 10$ ，可证没有更大的 $k$ 满足条件。\n\n对于第二个询问，没有任何 $k$ 满足条件。\n|数据点  |$n$  |$a_i$  | $m$ | $q$ |\n| :------: | :------: | :-------: | :-------: | :----------: |\n|$1$|$\\le 10$|$\\le 2^{20}$| $\\le 2^{20}$| $=1$ |\n|$2$| $\\le 10^3$|$\\le10^3$|$\\le10^3$|$\\le 10^3$|\n|$3$|$\\le 10^3$  | $\\le 2^{30}$ | $\\le 10^3$ | $\\le 10^3$ |\n|$4\\sim 6$| $\\le 10^5$| $\\le 2^{20}$ | $\\le 10^6$ | $\\le 10^5$ |\n|$7\\sim 10$| $\\le 10^5$ | $\\le 2^{30}$ | $\\le 2^{30}\\times10^6$ | $\\le 10^5$ |\n**本题不进行捆绑测试。**\n\n所有测试点的数据范围如上所示。对于所有数据，$0<n,q\\leq 10^5,\\ 0\\leq a_i\\leq 2^{30},\\ 0\\leq m\\leq 2^{30}\\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R3』Teleport", "background": "凯瑞甘从帝国的围攻下，击毁了大天使号，乘着雷诺的飞船逃了出来，到了休伯利安号上。\n\n“吉米？”凯瑞甘着急地四处寻找着。\n\n“很抱歉，我们没能救出他”马特·霍纳向凯瑞甘走来。\n\n“你丢下了他？”凯瑞甘回想起曾经的自己被蒙斯克丢下，便起了杀心，用灵能将马特抓了起来。\n\n“不是的，凯瑞甘，我们受到了帝国的伏击，现在必须，马上离开，过会可以回头来找他”马特解释道。\n\n“这里没有我们！你走吧，我自己去找他。”凯瑞甘放下了马特，回头坐着雷诺的回到了星球上。\n\n“警告，警告，敌军突破能量场。”帝国的舰队突破了马特舰队设下的能量场，控制着钢铁舰队折越到了这里，并对休伯利安号发起猛烈的攻击。\n\n“立即进行折越，我们必须马上离开！”马特·霍纳下令道。", "description": "马特·霍纳想要控制休伯利安号进行折越，想要进行折越，就要激活休伯利安号上的所有 $n$ 个位点。\n\n休伯利安号上有 $n$ 个位点，每个位点有 $a_i$ 点能量，为了激活，马特·霍纳会消耗 $k\\times n$ 点地嗪，这 $k\\times n$ 点地嗪会平均分给 $n$ 个位点，每个位点在接受 $k$ 点地嗪后会激发，得到 $a_i \\operatorname{xor} k$ 点高能，所有位点的高能总和为这次折越的消耗 $S$。\n\n为了能够快速的进行折越，马特·霍纳决定用最多的 $k\\times n$ 点地嗪，但可惜的是，如果地嗪使用太多，使得消耗 $S$ 超过限制值 $m$ ，那么休伯利安号就会不堪重负，最终爆炸。\n\n现在，你的任务是帮助马特·霍纳找到这个最大的 $k$ ，使得休伯利安号能在安全的前提下尽可能快的折越走。如果任何情况下都不能安全的折越走，则输出 $-1$ 。\n\n这里的 $\\operatorname{xor}$ 表示的是位运算中的按位异或运算。", "inputFormat": "第一行一个整数 $n$ 表示位点数量。  \n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$ 表示每个位点拥有的能量。   \n\n第三行一个数 $q$ 表示询问次数。\n\n接下来 $q$ 行表示 $q$ 次询问，每行一个数 $m$。", "outputFormat": "对于每次询问输出一行一个非负整数，表示最大的 $k$。若无解，输出 $-1$ 。", "hint": "对于第一个询问，最大的 $k$ 为 $3$ ，此时 $S=2+1+0=3 \\le 10$ ，可证没有更大的 $k$ 满足条件。\n\n对于第二个询问，没有任何 $k$ 满足条件。\n|数据点  |$n$  |$a_i$  | $m$ | $q$ |\n| :------: | :------: | :-------: | :-------: | :----------: |\n|$1$|$\\le 10$|$\\le 2^{20}$| $\\le 2^{20}$| $=1$ |\n|$2$| $\\le 10^3$|$\\le10^3$|$\\le10^3$|$\\le 10^3$|\n|$3$|$\\le 10^3$  | $\\le 2^{30}$ | $\\le 10^3$ | $\\le 10^3$ |\n|$4\\sim 6$| $\\le 10^5$| $\\le 2^{20}$ | $\\le 10^6$ | $\\le 10^5$ |\n|$7\\sim 10$| $\\le 10^5$ | $\\le 2^{30}$ | $\\le 2^{30}\\times10^6$ | $\\le 10^5$ |\n**本题不进行捆绑测试。**\n\n所有测试点的数据范围如上所示。对于所有数据，$0<n,q\\leq 10^5,\\ 0\\leq a_i\\leq 2^{30},\\ 0\\leq m\\leq 2^{30}\\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P6748", "type": "P", "difficulty": 5, "samples": [["7 100\n50 25 25 12 12 12 12\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7", "148"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "贪心", "O2优化", "洛谷月赛"], "title": "『MdOI R3』Fallen Lord", "background": "统治着世界，统治着寂寞。", "description": "L 国有 $n$ 个城市，它们之间有 $n-1$ 条道路，形成了一棵树的结构。\n\n国王 L 派遣了一些军队来驻守这些道路，驻守每一条道路的军队战斗力都可以被量化为 $[1,m]$ 中的整数。\n\n每个城市都有一个城主，第 $i$ 个城主有一个忍耐度 $a_i$。如果国王 L 在与第 $i$ 个城市相连的所有道路上驻守的军队战斗力的**中位数**超过了**城主**的忍耐度，那么**城主**就会认为国王不信任他而产生谋反的心理。\n\n国王 L 当然不希望有人造反，但他又想使驻守道路的军队的总战斗力**最大**来保证国防安全。现在他找到了 L 国最强的 OIer —— 您，去来帮助他解决这个问题。\n\n如果无论如何安排军队都会有人想要造反，那么输出 `-1`。\n\n**注：对于任意 $k$ 个数，它们的中位数是将这些数从小到大排序后第 $\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+1$ 个数。**", "inputFormat": "第一行两个正整数，表示 $n,m$。\n\n第二行 $n$ 个整数，第 $i$ 个数表示 $a_i$。\n\n接下来 $n-1$ 行，每行两个数 $u_i,v_i$，表示一条直接连接城市 $u_i$ 与城市 $v_i$ 的道路。\n\n**输入数据保证构成一棵树**。", "outputFormat": "一行一个整数，表示最大的总战斗力。", "hint": "更多样例请[到这里](https://www.luogu.com.cn/paste/0wcdzik5)领取。\n\n对于所有数据，$1\\le u_i,v_i \\le n\\le 5\\times 10^5$，$n\\ge 2$，$1\\le a_i\\le m\\le 10^9$。  \n\n|子任务编号|$n\\leq$|$m\\leq$|其他性质|分值|\n|:-:|:-:|:-:|:-:|:-:|\n|1|$8$|$8$|无|$5$|\n|2||$1$|无|$1$|\n|3|||树的形态为一条链|$10$|\n|4|||存在度数为 $n-1$ 的节点|$12$|\n|5|$10^5$||每个节点度数 $\\le 6$|$17$|\n|6|$5\\times 10^3$||无|$20$|\n|7|||无|$35$|\n\n其中，留空的表示和 $100\\%$ 的数据范围限制相同。\n### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/ipkyy6az.png)\n\n如图驻守 $n-1=6$ 条道路的军队战斗力（按照输入中的顺序）依次为 $50,50,12,12,12,12$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R3』Fallen Lord", "background": "统治着世界，统治着寂寞。", "description": "L 国有 $n$ 个城市，它们之间有 $n-1$ 条道路，形成了一棵树的结构。\n\n国王 L 派遣了一些军队来驻守这些道路，驻守每一条道路的军队战斗力都可以被量化为 $[1,m]$ 中的整数。\n\n每个城市都有一个城主，第 $i$ 个城主有一个忍耐度 $a_i$。如果国王 L 在与第 $i$ 个城市相连的所有道路上驻守的军队战斗力的**中位数**超过了**城主**的忍耐度，那么**城主**就会认为国王不信任他而产生谋反的心理。\n\n国王 L 当然不希望有人造反，但他又想使驻守道路的军队的总战斗力**最大**来保证国防安全。现在他找到了 L 国最强的 OIer —— 您，去来帮助他解决这个问题。\n\n如果无论如何安排军队都会有人想要造反，那么输出 `-1`。\n\n**注：对于任意 $k$ 个数，它们的中位数是将这些数从小到大排序后第 $\\left\\lfloor\\dfrac{k}{2}\\right\\rfloor+1$ 个数。**", "inputFormat": "第一行两个正整数，表示 $n,m$。\n\n第二行 $n$ 个整数，第 $i$ 个数表示 $a_i$。\n\n接下来 $n-1$ 行，每行两个数 $u_i,v_i$，表示一条直接连接城市 $u_i$ 与城市 $v_i$ 的道路。\n\n**输入数据保证构成一棵树**。", "outputFormat": "一行一个整数，表示最大的总战斗力。", "hint": "更多样例请[到这里](https://www.luogu.com.cn/paste/0wcdzik5)领取。\n\n对于所有数据，$1\\le u_i,v_i \\le n\\le 5\\times 10^5$，$n\\ge 2$，$1\\le a_i\\le m\\le 10^9$。  \n\n|子任务编号|$n\\leq$|$m\\leq$|其他性质|分值|\n|:-:|:-:|:-:|:-:|:-:|\n|1|$8$|$8$|无|$5$|\n|2||$1$|无|$1$|\n|3|||树的形态为一条链|$10$|\n|4|||存在度数为 $n-1$ 的节点|$12$|\n|5|$10^5$||每个节点度数 $\\le 6$|$17$|\n|6|$5\\times 10^3$||无|$20$|\n|7|||无|$35$|\n\n其中，留空的表示和 $100\\%$ 的数据范围限制相同。\n### 样例解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/ipkyy6az.png)\n\n如图驻守 $n-1=6$ 条道路的军队战斗力（按照输入中的顺序）依次为 $50,50,12,12,12,12$。", "locale": "zh-CN"}}}
{"pid": "P6749", "type": "P", "difficulty": 7, "samples": [["3 3\n3 2 1 \n2 \n1 1 3 1 \n2 ", "3 \n0 "]], "limits": {"time": [1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["线段树", "颜色段均摊（珂朵莉树 ODT）", "O2优化", "树套树", "分块", "洛谷月赛"], "title": "『MdOI R3』Yoshino", "background": "\n\n『变成了精灵确实是遭遇了许多难过的事情，也遭遇了许多悲伤的事情。但是——我也得到了比这些难过和悲伤多得多的快乐与开心。』\n\n『——我觉得，虽然澪小姐想要使用我的生命，但是作为交换，她不是也让我活了更长的时间了吗？』\n\n『对了——差点忘了。四糸奈，……稍微一会儿，可以吗。』\n\n『那么，正式介绍一下呢，——妈妈。』\n\n『这位是七罪小姐，我——最重要的朋友。』\n\n『这位是士道先生，是我——最喜欢的人。』\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v7zfroxm.png)", "description": "Yoshino 给了你一个长度为 $n$ 的序列，第 $i$ 项为 $a_i$。\n\n现在 Yoshino 会对数列进行 $m$ 次操作。\n\n操作分成两种：\n\n - $1\\  l\\  r\\  x$ Yoshino 把数列下标在 $[l,r]$ 区间内的数修改为了一个从 $x$ 开始公差为 $1$ 的等差数列。\n\n - $2$ Yoshino 需要查询整个数列中的逆序对个数。逆序对的定义为数对 $(i,j)$ 满足 $i<j$ 且 $a_i>a_j$。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $a_i$。\n\n接下来 $m$ 行，每行代表一个操作，含义见上。", "outputFormat": "对于每次询问，一行一个整数输出答案。", "hint": "【样例解释】 \n\n第一次操作为询问操作，此时有 $(1,3),(2,3),(1,2)$ 三组逆序对，答案为 $3$。\n\n第二次操作修改完成后，数列变为 $1\\ 2\\ 3$。\n\n第三次操作为询问操作，此时数列中没有逆序对，故答案为 $0$。\n\n更多样例请[到这里](https://www.luogu.com.cn/paste/j4nq14ov)领取。\n\n---\n\n【数据范围】\n\n**本题采用捆绑测试**\n\n| 子任务编号 | $n,m\\le$       | 特殊条件                               | 分值  | 时限  |\n| ---------- | -------------- | -------------------------------------- | ----- | ----- |\n| $1$        | $500$          | 无                                     | $10 $ | $1s$  |\n| $2$        | $3\\times 10^3$ | 无                                     | $10$  | $1s $ |\n| $3$        | $3\\times 10^4$ | 修改长度为 $1$                         | $15$  | $2s $ |\n| $4$        | $3\\times 10^4$ | 保证任何时刻序列中的最大值不超过 $15$ | $20 $ | $2s $ |\n| $5$        | $3\\times 10^4$ | 保证第奇数次操作 $1$ 为 $1\\ 1\\ n\\ 1$   | $20$  | $ 2s$ |\n| $6$        | $3\\times 10^4$ | 无特殊限制                             | $25 $ | $2s$  |\n\n对于所有的数据，$1\\le n,m,a_i\\le 3\\times 10^4$，$1\\le l\\le r\\le n$，$1\\le x\\le 3\\times 10^4-r+l$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R3』Yoshino", "background": "\n\n『变成了精灵确实是遭遇了许多难过的事情，也遭遇了许多悲伤的事情。但是——我也得到了比这些难过和悲伤多得多的快乐与开心。』\n\n『——我觉得，虽然澪小姐想要使用我的生命，但是作为交换，她不是也让我活了更长的时间了吗？』\n\n『对了——差点忘了。四糸奈，……稍微一会儿，可以吗。』\n\n『那么，正式介绍一下呢，——妈妈。』\n\n『这位是七罪小姐，我——最重要的朋友。』\n\n『这位是士道先生，是我——最喜欢的人。』\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v7zfroxm.png)", "description": "Yoshino 给了你一个长度为 $n$ 的序列，第 $i$ 项为 $a_i$。\n\n现在 Yoshino 会对数列进行 $m$ 次操作。\n\n操作分成两种：\n\n - $1\\  l\\  r\\  x$ Yoshino 把数列下标在 $[l,r]$ 区间内的数修改为了一个从 $x$ 开始公差为 $1$ 的等差数列。\n\n - $2$ Yoshino 需要查询整个数列中的逆序对个数。逆序对的定义为数对 $(i,j)$ 满足 $i<j$ 且 $a_i>a_j$。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $a_i$。\n\n接下来 $m$ 行，每行代表一个操作，含义见上。", "outputFormat": "对于每次询问，一行一个整数输出答案。", "hint": "【样例解释】 \n\n第一次操作为询问操作，此时有 $(1,3),(2,3),(1,2)$ 三组逆序对，答案为 $3$。\n\n第二次操作修改完成后，数列变为 $1\\ 2\\ 3$。\n\n第三次操作为询问操作，此时数列中没有逆序对，故答案为 $0$。\n\n更多样例请[到这里](https://www.luogu.com.cn/paste/j4nq14ov)领取。\n\n---\n\n【数据范围】\n\n**本题采用捆绑测试**\n\n| 子任务编号 | $n,m\\le$       | 特殊条件                               | 分值  | 时限  |\n| ---------- | -------------- | -------------------------------------- | ----- | ----- |\n| $1$        | $500$          | 无                                     | $10 $ | $1s$  |\n| $2$        | $3\\times 10^3$ | 无                                     | $10$  | $1s $ |\n| $3$        | $3\\times 10^4$ | 修改长度为 $1$                         | $15$  | $2s $ |\n| $4$        | $3\\times 10^4$ | 保证任何时刻序列中的最大值不超过 $15$ | $20 $ | $2s $ |\n| $5$        | $3\\times 10^4$ | 保证第奇数次操作 $1$ 为 $1\\ 1\\ n\\ 1$   | $20$  | $ 2s$ |\n| $6$        | $3\\times 10^4$ | 无特殊限制                             | $25 $ | $2s$  |\n\n对于所有的数据，$1\\le n,m,a_i\\le 3\\times 10^4$，$1\\le l\\le r\\le n$，$1\\le x\\le 3\\times 10^4-r+l$。", "locale": "zh-CN"}}}
{"pid": "P6750", "type": "P", "difficulty": 7, "samples": [["1 2 0 19260817", "9"], ["2 2 0 19260817", "36"], ["1 2 1 19260817\n1 1 2 1", "4"], ["3 3 1 19260817\n1 2 1 1", "190"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "数学", "单调队列", "O2优化", "前缀和", "二项式定理", "生成函数", "快速数论变换 NTT", "洛谷月赛"], "title": "『MdOI R3』Pekka Bridge Spam", "background": "JohnVictor 比较喜欢玩 Clash Royale。\n\n他喜欢玩一套叫做 Pekka Bridge Spam 的卡组，然而这卡组被削弱了。现在他天梯已经掉了很多分了，不会玩了，只能在竞技场上给他的攻城锤安排地方了。\n\n于是就有了这道题。", "description": "JohnVictor 的皇室竞技场是一个 $2n \\times 2m$（$2n$ 行，$2m$ 列）的方格表，他要在上面放 $n\\times m$ 个 $1 \\times 2$ 的攻城锤，使得任意两个攻城锤不相交。\n\n然而攻城锤里面的野蛮人靠太近会打架，所以他要求任意一个 $2 \\times 2$ 的正方形中有两个相邻的格子没有被任何攻城锤占有。\n\n现在已经摆好了 $k$ 个攻城锤了，JohnVictor 想要知道有多少种方法能摆放这些攻城锤，注意，攻城锤两两之间没有区别。\n\n由于这个答案实在是太大了，JohnVictor 只想知道这个答案对素数 $p$ 取模后的余数。**保证取模前的真实答案大于 $0$**。\n\n为了避免玩过皇室的参赛者对题目理解产生问题，这里的攻城锤看做一个 $1 \\times 2$ 的多米诺，翻转后也与自身一样。如果还是不理解可以参考样例。\n\n**由于本题数据范围较大，使用 C++ 的选手可以使用以下代码来加快取模速度。**\n\n代码出自 [KATCL](https://github.com/kth-competitive-programming/kactl/blob/master/content/various/FastMod.h) 。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef unsigned long long ull;\ntypedef __uint128_t L;\nstruct FastMod {\n    ull b, m;\n    FastMod(ull b) : b(b), m(ull((L(1) << 64) / b)) {}\n    ull reduce(ull a) {\n        ull q = (ull)((L(m) * a) >> 64);\n        ull r = a - q * b; // can be proven that 0 <= r < 2*b\n        return r >= b ? r - b : r;\n    }\n};\nFastMod F(2);\n\nint main() {\n    int M = 1000000007; F = FastMod(M);\n    ull x = 10ULL*M+3; \n    cout << x << \" \" << F.reduce(x) << \"\\n\"; // 10000000073 3\n}\n```\n\n使用方法：\n\n假设当前程序中需要取模的数为 $p$，那么就在 `main` 函数开头处调用 `F = FastMod(p);`。\n\n计算 $a\\bmod p$ 的时候调用\n`\nF.reduce(a);\n`，\n返回值就是 $a\\bmod p$ 的值。", "inputFormat": "第一行为四个整数 $n,m,k,p$。\n\n接下来 $k$ 行，每行四个整数 $x_{1i},y_{1i},x_{2i},y_{2i}(1 \\le i \\le k)$，代表一块攻城锤的位置。\n\n注意这里 $x,y$ 坐标表示的是在第 $x$ 行第 $y$ 列，并不是横纵坐标。", "outputFormat": "一行一个整数，输出答案对 $p$ 取模后的值。", "hint": "【样例 1 解释】   \n$9$ 种情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0s4px806.png)\n\n【样例 2 解释】   \n我有一种绝妙的解释方法，可惜这里位置太小，我写不下。\n\n【样例 3 解释】  \n上图中第一行的第 $1,2$ 幅和第二行的第 $1,2$ 幅图就是要求的 $4$ 种情况。\n\n更多样例请[到这里](https://www.luogu.com.cn/paste/b2ad2hoy)领取。\n\n【数据范围】\n\n本题采用捆绑测试，共有 $7$ 个子任务。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 9 \\times 10^3$，$1 \\le m \\le 10^{18}$，$0 \\le k \\le  10^5$，$|x_{1i}-x_{2i}|+|y_{1i}-y_{2i}|=1$，$1 \\le x_{1i},x_{2i} \\le 2n$，$1 \\le y_{1i},y_{2i} \\le 2m$，$10^7\\le p \\le 10^9 + 9 $，**输入数据保证有解且 $p$ 为素数**。\n\n|子任务编号|$n\\leq$|$m\\leq$|其他性质|分值|时间限制|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|1|$3$|$3$||$5$|$1.0s$|\n|2|$10$|$10$|$k=0$|$10$|$1.0s$|\n|3|$5 \\times 10^3$|$5 \\times 10^3$||$13$|$2.0s$|\n|4|$80$|||$17$|$1.0s$|\n|5|$2\\times 10^3$||$p=998244353$|$20$|$3.0s$|\n|6||||$35$|$3.0s$|\n【温馨提示】\n\n为了确保卡掉小常数的错解本题开大了数据范围，请注意常数因子对程序运行效率的影响。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『MdOI R3』Pekka Bridge Spam", "background": "JohnVictor 比较喜欢玩 Clash Royale。\n\n他喜欢玩一套叫做 Pekka Bridge Spam 的卡组，然而这卡组被削弱了。现在他天梯已经掉了很多分了，不会玩了，只能在竞技场上给他的攻城锤安排地方了。\n\n于是就有了这道题。", "description": "JohnVictor 的皇室竞技场是一个 $2n \\times 2m$（$2n$ 行，$2m$ 列）的方格表，他要在上面放 $n\\times m$ 个 $1 \\times 2$ 的攻城锤，使得任意两个攻城锤不相交。\n\n然而攻城锤里面的野蛮人靠太近会打架，所以他要求任意一个 $2 \\times 2$ 的正方形中有两个相邻的格子没有被任何攻城锤占有。\n\n现在已经摆好了 $k$ 个攻城锤了，JohnVictor 想要知道有多少种方法能摆放这些攻城锤，注意，攻城锤两两之间没有区别。\n\n由于这个答案实在是太大了，JohnVictor 只想知道这个答案对素数 $p$ 取模后的余数。**保证取模前的真实答案大于 $0$**。\n\n为了避免玩过皇室的参赛者对题目理解产生问题，这里的攻城锤看做一个 $1 \\times 2$ 的多米诺，翻转后也与自身一样。如果还是不理解可以参考样例。\n\n**由于本题数据范围较大，使用 C++ 的选手可以使用以下代码来加快取模速度。**\n\n代码出自 [KATCL](https://github.com/kth-competitive-programming/kactl/blob/master/content/various/FastMod.h) 。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef unsigned long long ull;\ntypedef __uint128_t L;\nstruct FastMod {\n    ull b, m;\n    FastMod(ull b) : b(b), m(ull((L(1) << 64) / b)) {}\n    ull reduce(ull a) {\n        ull q = (ull)((L(m) * a) >> 64);\n        ull r = a - q * b; // can be proven that 0 <= r < 2*b\n        return r >= b ? r - b : r;\n    }\n};\nFastMod F(2);\n\nint main() {\n    int M = 1000000007; F = FastMod(M);\n    ull x = 10ULL*M+3; \n    cout << x << \" \" << F.reduce(x) << \"\\n\"; // 10000000073 3\n}\n```\n\n使用方法：\n\n假设当前程序中需要取模的数为 $p$，那么就在 `main` 函数开头处调用 `F = FastMod(p);`。\n\n计算 $a\\bmod p$ 的时候调用\n`\nF.reduce(a);\n`，\n返回值就是 $a\\bmod p$ 的值。", "inputFormat": "第一行为四个整数 $n,m,k,p$。\n\n接下来 $k$ 行，每行四个整数 $x_{1i},y_{1i},x_{2i},y_{2i}(1 \\le i \\le k)$，代表一块攻城锤的位置。\n\n注意这里 $x,y$ 坐标表示的是在第 $x$ 行第 $y$ 列，并不是横纵坐标。", "outputFormat": "一行一个整数，输出答案对 $p$ 取模后的值。", "hint": "【样例 1 解释】   \n$9$ 种情况如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0s4px806.png)\n\n【样例 2 解释】   \n我有一种绝妙的解释方法，可惜这里位置太小，我写不下。\n\n【样例 3 解释】  \n上图中第一行的第 $1,2$ 幅和第二行的第 $1,2$ 幅图就是要求的 $4$ 种情况。\n\n更多样例请[到这里](https://www.luogu.com.cn/paste/b2ad2hoy)领取。\n\n【数据范围】\n\n本题采用捆绑测试，共有 $7$ 个子任务。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 9 \\times 10^3$，$1 \\le m \\le 10^{18}$，$0 \\le k \\le  10^5$，$|x_{1i}-x_{2i}|+|y_{1i}-y_{2i}|=1$，$1 \\le x_{1i},x_{2i} \\le 2n$，$1 \\le y_{1i},y_{2i} \\le 2m$，$10^7\\le p \\le 10^9 + 9 $，**输入数据保证有解且 $p$ 为素数**。\n\n|子任务编号|$n\\leq$|$m\\leq$|其他性质|分值|时间限制|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|1|$3$|$3$||$5$|$1.0s$|\n|2|$10$|$10$|$k=0$|$10$|$1.0s$|\n|3|$5 \\times 10^3$|$5 \\times 10^3$||$13$|$2.0s$|\n|4|$80$|||$17$|$1.0s$|\n|5|$2\\times 10^3$||$p=998244353$|$20$|$3.0s$|\n|6||||$35$|$3.0s$|\n【温馨提示】\n\n为了确保卡掉小常数的错解本题开大了数据范围，请注意常数因子对程序运行效率的影响。", "locale": "zh-CN"}}}
{"pid": "P6751", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2019", "IOI", "交互题", "Special Judge"], "title": "[IOI 2019] 视觉程序", "background": "[评测方式](https://www.luogu.com.cn/paste/5z13bn4l)\n\n[一些说明~~和扯淡~~](https://www.luogu.com.cn/paste/l6kcccs4)", "description": "你在给机器人编写一个视觉程序。每次机器人的摄像头拍下一张照片时，图像将以黑白图像的形式存储在机器人的内存中。每张图像是由像素构成的 $H\\times W$ 网格。图像的行从 $0$ 到 $H-1$ 编号，列从 $0$ 到 $W-1$ 编号。每张图像含有**恰好两个**黑色像素，其他像素均为白色。\n\n机器人可以用简单指令构成的程序来处理图像。给出 $H$，$W$ 和一个正整数 $K$ 的值，你的目标是要编写一个函数，用来为机器人生成程序。该程序需要判定图像中两个黑色像素的距离是否正好为 $K$。这里，在第 $r_1$ 行及第 $c_1$ 列上的像素与第 $r_2$ 行及第 $c_2$ 列上的像素之间的距离定义为 $|r_1-r_2|+|c_1-c_2|$。 在这个式子中，$|x|$ 表示 $x$ 的绝对值，即当 $x\\ge0$ 时，其值为 $x$，而当 $x<0$ 时，其值为 $-x$。\n\n下面描述机器人是如何运作的。\n\n机器人的内存有足够多的存储单元，从 $0$ 开始编号。每个存储单元可以保存 $0$ 或 $1$，且它的内容一旦设置后就不可更改。图像一行接一行地保存在存储单元里，这些存储单元的编号从 $0$ 到 $H\\cdot W-1$。第一行保存在存储单元 $0$ 到 $W-1$ 里，最后一行保存在存储单元 $(H-1)W$ 到 $H\\cdot W-1$ 里。特别地，如果位于第 $i$ 行第 $j$ 列上的那个像素是黑色的，则保存在存储单元 $i\\cdot W+j$ 里的值为 $1$，否则为 $0$。\n\n机器人的程序是一个**指令**的序列，这些指令用从 $0$ 开始的连续整数进行编号。在程序运行时，指令将一条一条地被执行。每条指令读取一个或多个存储单元的值（我们将这些值称为指令的**输入**），同时产生一个 $0$ 或 $1$ 的值（我们称之为指令的**输出**）。指令 $i$ 的输出将会保存在存储单元 $H\\cdot W+i$ 中。指令 $i$ 的输入只能是保存图像的存储单元，或者是保存之前指令输出的存储单元，也就是编号为从 $0$ 到 $H\\cdot W+i-1$ 的存储单元。\n\n机器人共有四种指令：\n- `NOT`：有唯一一个输入。若输入为 $0$ 时，其输出为 $1$，否则为 $0$。\n- `AND`：有一个或多个输入。其输出为 $1$ 当且仅当输入**全部**为 $1$。\n- `OR`：有一个或多个输入。其输出为 $1$ 当且仅当输入中**至少有一个** $1$。\n- `XOR`：有一个或多个输入。其输出为 $1$ 当且仅当输入中 $1$ 的个数是**奇数**。\n\n如果两个黑色像素之间的距离正好为 $K$，则最后一条指令的输出应为 $1$，否则输出应为 $0$。\n#### 实现细节\n你需要实现以下函数：\n```plain\nvoid construct_network(int H, int W, int K)\n```\n- $H$，$W$：机器人摄像头所拍到的图像的尺寸\n- $K$：一个正整数\n- 这个函数需要生成一个机器人的程序。对于机器人摄像头所拍到的每幅图像，该程序应判定图像中两个黑色像素之间的距离是否正好为 $K$。\n\n该程序应当通过调用以下函数将指令追加到机器人的程序中（最初机器人的程序是空的）：\n```plain\nint add_not(int N)\nint add_and(int[] Ns)\nint add_or(int[] Ns)\nint add_xor(int[] Ns)\n```\n- 分别追加一条 `NOT`，`AND`，`OR` 或 `XOR` 指令。\n- $N$（对于 `add_not` 而言）：要追加的 `NOT` 指令的输入存储单元编号\n- $Ns$（对于 `add_and`，`add_or`，`add_xor` 而言）：要追加的 `AND`，`OR` 或 `XOR` 指令的输入存储单元的编号的数组\n- 每次函数调用都会返回追加指令的输出存储单位的编号。对这些函数的连续调用将会返回从 $H\\cdot W$ 开始的连续整数。\n\n机器人的程序最多可以包含 $10^4$ 条指令。这些指令一共最多只能读入 $10^6$ 个值。换句话说，所有 `add_and`，`add_or` 及 `add_xor` 调用中的 $Ns$ 数组的长度总和再加上 `add_not` 调用的次数不得超过 $10^6$。\n\n\n当追加完最后一条指令后，函数 `construct_network` 必须返回。所产生的机器人程序会在一些图像上进行评测。对于一幅图像，程序最后一条指令的输出是 $1$ 当且仅当两个黑色像素之间的距离正好为 $K$。如果对测试点中的每幅图像，你的解答所产生的程序都可以正确地输出结果，那就通过了该测试点。\n\n评测程序在评测你的程序时可能会出现以下错误信息：\n- `Instruction with no inputs`：一个空数组被作为 `add_and`，`add_or` 或 `add_xor` 的输入。\n- `Invalid index`：给 `add_not`，`add_or` 或 `add_xor` 提供了不正确（可能是负数）的存储单元编号作为输入。\n- `Too many instructions`：你的函数尝试添加多于 $10^4$ 条的指令。\n- `Too many inputs`：程序中的指令一共读取了多于 $10^6$ 个值。\n#### 评测程序示例\n评测程序示例读取下述格式的输入：\n- 第 $1$ 行：$H$，$W$，$K$\n- 第 $2+i$ 行（$i\\ge0$）：$r1_i$，$c1_i$，$r2_i$，$c2_i$\n- 最后一行：$-1$\n\n除第一行和最后一行外，每一行都表示了一幅含有两个黑色像素的图像。记第 $2+i$ 行上的图像为图像 $i$。该图像中，一个黑色像素位于第 $r_1[i]$ 行及第 $c_1[i]$ 列上，令一个黑色像素位于第 $r_2[i]$ 行及第 $c_2[i]$ 列上。\n\n评测程序首先调用 `construct_network(H, W, K)`。若 `construct_network` 违反了题目描述中的限制条件，评测程序示例将会输出在实现细节一节末尾所列举的某条错误信息并退出。\n\n否则，评测程序示例将输出两部分内容。\n\n首先，评测程序示例会以下列格式输出机器人程序所产生的输出：\n- 第 $1+i$ 行（$0\\le i$）：对于图像 $i$，机器人程序最后一条指令的输出（$1$ 或 $0$）。\n\n其次，评测程序示例会以下列格式输出到当前目录下一个名为 `log.txt` 的文件中：\n- 第 $1+i$ 行（$0\\le i$）：$m_{i,0}$，$m_{i,1}$，$\\dots$，$m_{i,c-1}$\n\n在第 $1+i$ 行上的序列描述以图像 $i$ 作为输入时，在机器人程序运行结束后放在内存中的数据。具体来说，$m_{i,j}$ 是保存在存储单元 $j$ 里面的值。注意，$c$ 的值（序列长度）等于 $H\\cdot W$ 再加上机器人程序的指令数。", "inputFormat": "", "outputFormat": "", "hint": "#### 样例\n假设 $H=2$，$W=3$，$K=3$。在此情况下，两个黑色像素之间的距离为 $3$ 的图像只有两种。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9fec7n4k.png)\n\n- 情况一：黑色像素是 $0$ 和 $5$。\n- 情况二：黑色像素是 $2$ 和 $3$。\n\n一种可行的方案是通过以下调用来构造机器人程序：\n1. `add_and([0, 5])`，将加入一条指令，当且仅当图像符合情况一时其输出为 $1$。输出结果将保存在存储单元 $6$ 里。\n1. `add_and([2, 3])`，将加入一条指令，当且仅当图像符合情况二时其输出为 $1$。输出结果将保存在存储单元 $7$ 里。\n1. `add_or([6, 7])`，将加入一条指令，当且仅当上述两种情况之一成立时其输出为 $1$。\n#### 数据范围\n对于所有数据：\n- $1\\le H,W\\le200$；\n- $2\\le H\\cdot W$；\n- $1\\le K\\le H+W-2$。\n\n详细子任务附加限制与分值如下表：\n| 子任务编号 |                           附加限制                           | 分值 |\n| :--------: | :----------------------------------------------------------: | :--: |\n|    $1$     |                     $\\max(H,W) \\le 3$                        | $10$ |\n|    $2$     |                     $\\max(H,W) \\le 10$                       | $11$ |\n|    $3$     |                     $\\max(H,W) \\le 30$                       | $11$ |\n|    $4$     |                     $\\max(H,W) \\le 100$                      | $15$ |\n|    $5$     |                       $\\min(H,W) = 1$                        | $12$ |\n|    $6$     |     每幅图像上位于第 $0$ 行且位于第 $0$ 列的那个像素是黑色的         | $8$ |\n|    $7$     |                           $K = 1$                            | $14$ |\n|    $8$     |                      没有任何附加限制                           | $19$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2019] 视觉程序", "background": "[评测方式](https://www.luogu.com.cn/paste/5z13bn4l)\n\n[一些说明~~和扯淡~~](https://www.luogu.com.cn/paste/l6kcccs4)", "description": "你在给机器人编写一个视觉程序。每次机器人的摄像头拍下一张照片时，图像将以黑白图像的形式存储在机器人的内存中。每张图像是由像素构成的 $H\\times W$ 网格。图像的行从 $0$ 到 $H-1$ 编号，列从 $0$ 到 $W-1$ 编号。每张图像含有**恰好两个**黑色像素，其他像素均为白色。\n\n机器人可以用简单指令构成的程序来处理图像。给出 $H$，$W$ 和一个正整数 $K$ 的值，你的目标是要编写一个函数，用来为机器人生成程序。该程序需要判定图像中两个黑色像素的距离是否正好为 $K$。这里，在第 $r_1$ 行及第 $c_1$ 列上的像素与第 $r_2$ 行及第 $c_2$ 列上的像素之间的距离定义为 $|r_1-r_2|+|c_1-c_2|$。 在这个式子中，$|x|$ 表示 $x$ 的绝对值，即当 $x\\ge0$ 时，其值为 $x$，而当 $x<0$ 时，其值为 $-x$。\n\n下面描述机器人是如何运作的。\n\n机器人的内存有足够多的存储单元，从 $0$ 开始编号。每个存储单元可以保存 $0$ 或 $1$，且它的内容一旦设置后就不可更改。图像一行接一行地保存在存储单元里，这些存储单元的编号从 $0$ 到 $H\\cdot W-1$。第一行保存在存储单元 $0$ 到 $W-1$ 里，最后一行保存在存储单元 $(H-1)W$ 到 $H\\cdot W-1$ 里。特别地，如果位于第 $i$ 行第 $j$ 列上的那个像素是黑色的，则保存在存储单元 $i\\cdot W+j$ 里的值为 $1$，否则为 $0$。\n\n机器人的程序是一个**指令**的序列，这些指令用从 $0$ 开始的连续整数进行编号。在程序运行时，指令将一条一条地被执行。每条指令读取一个或多个存储单元的值（我们将这些值称为指令的**输入**），同时产生一个 $0$ 或 $1$ 的值（我们称之为指令的**输出**）。指令 $i$ 的输出将会保存在存储单元 $H\\cdot W+i$ 中。指令 $i$ 的输入只能是保存图像的存储单元，或者是保存之前指令输出的存储单元，也就是编号为从 $0$ 到 $H\\cdot W+i-1$ 的存储单元。\n\n机器人共有四种指令：\n- `NOT`：有唯一一个输入。若输入为 $0$ 时，其输出为 $1$，否则为 $0$。\n- `AND`：有一个或多个输入。其输出为 $1$ 当且仅当输入**全部**为 $1$。\n- `OR`：有一个或多个输入。其输出为 $1$ 当且仅当输入中**至少有一个** $1$。\n- `XOR`：有一个或多个输入。其输出为 $1$ 当且仅当输入中 $1$ 的个数是**奇数**。\n\n如果两个黑色像素之间的距离正好为 $K$，则最后一条指令的输出应为 $1$，否则输出应为 $0$。\n#### 实现细节\n你需要实现以下函数：\n```plain\nvoid construct_network(int H, int W, int K)\n```\n- $H$，$W$：机器人摄像头所拍到的图像的尺寸\n- $K$：一个正整数\n- 这个函数需要生成一个机器人的程序。对于机器人摄像头所拍到的每幅图像，该程序应判定图像中两个黑色像素之间的距离是否正好为 $K$。\n\n该程序应当通过调用以下函数将指令追加到机器人的程序中（最初机器人的程序是空的）：\n```plain\nint add_not(int N)\nint add_and(int[] Ns)\nint add_or(int[] Ns)\nint add_xor(int[] Ns)\n```\n- 分别追加一条 `NOT`，`AND`，`OR` 或 `XOR` 指令。\n- $N$（对于 `add_not` 而言）：要追加的 `NOT` 指令的输入存储单元编号\n- $Ns$（对于 `add_and`，`add_or`，`add_xor` 而言）：要追加的 `AND`，`OR` 或 `XOR` 指令的输入存储单元的编号的数组\n- 每次函数调用都会返回追加指令的输出存储单位的编号。对这些函数的连续调用将会返回从 $H\\cdot W$ 开始的连续整数。\n\n机器人的程序最多可以包含 $10^4$ 条指令。这些指令一共最多只能读入 $10^6$ 个值。换句话说，所有 `add_and`，`add_or` 及 `add_xor` 调用中的 $Ns$ 数组的长度总和再加上 `add_not` 调用的次数不得超过 $10^6$。\n\n\n当追加完最后一条指令后，函数 `construct_network` 必须返回。所产生的机器人程序会在一些图像上进行评测。对于一幅图像，程序最后一条指令的输出是 $1$ 当且仅当两个黑色像素之间的距离正好为 $K$。如果对测试点中的每幅图像，你的解答所产生的程序都可以正确地输出结果，那就通过了该测试点。\n\n评测程序在评测你的程序时可能会出现以下错误信息：\n- `Instruction with no inputs`：一个空数组被作为 `add_and`，`add_or` 或 `add_xor` 的输入。\n- `Invalid index`：给 `add_not`，`add_or` 或 `add_xor` 提供了不正确（可能是负数）的存储单元编号作为输入。\n- `Too many instructions`：你的函数尝试添加多于 $10^4$ 条的指令。\n- `Too many inputs`：程序中的指令一共读取了多于 $10^6$ 个值。\n#### 评测程序示例\n评测程序示例读取下述格式的输入：\n- 第 $1$ 行：$H$，$W$，$K$\n- 第 $2+i$ 行（$i\\ge0$）：$r1_i$，$c1_i$，$r2_i$，$c2_i$\n- 最后一行：$-1$\n\n除第一行和最后一行外，每一行都表示了一幅含有两个黑色像素的图像。记第 $2+i$ 行上的图像为图像 $i$。该图像中，一个黑色像素位于第 $r_1[i]$ 行及第 $c_1[i]$ 列上，令一个黑色像素位于第 $r_2[i]$ 行及第 $c_2[i]$ 列上。\n\n评测程序首先调用 `construct_network(H, W, K)`。若 `construct_network` 违反了题目描述中的限制条件，评测程序示例将会输出在实现细节一节末尾所列举的某条错误信息并退出。\n\n否则，评测程序示例将输出两部分内容。\n\n首先，评测程序示例会以下列格式输出机器人程序所产生的输出：\n- 第 $1+i$ 行（$0\\le i$）：对于图像 $i$，机器人程序最后一条指令的输出（$1$ 或 $0$）。\n\n其次，评测程序示例会以下列格式输出到当前目录下一个名为 `log.txt` 的文件中：\n- 第 $1+i$ 行（$0\\le i$）：$m_{i,0}$，$m_{i,1}$，$\\dots$，$m_{i,c-1}$\n\n在第 $1+i$ 行上的序列描述以图像 $i$ 作为输入时，在机器人程序运行结束后放在内存中的数据。具体来说，$m_{i,j}$ 是保存在存储单元 $j$ 里面的值。注意，$c$ 的值（序列长度）等于 $H\\cdot W$ 再加上机器人程序的指令数。", "inputFormat": "", "outputFormat": "", "hint": "#### 样例\n假设 $H=2$，$W=3$，$K=3$。在此情况下，两个黑色像素之间的距离为 $3$ 的图像只有两种。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9fec7n4k.png)\n\n- 情况一：黑色像素是 $0$ 和 $5$。\n- 情况二：黑色像素是 $2$ 和 $3$。\n\n一种可行的方案是通过以下调用来构造机器人程序：\n1. `add_and([0, 5])`，将加入一条指令，当且仅当图像符合情况一时其输出为 $1$。输出结果将保存在存储单元 $6$ 里。\n1. `add_and([2, 3])`，将加入一条指令，当且仅当图像符合情况二时其输出为 $1$。输出结果将保存在存储单元 $7$ 里。\n1. `add_or([6, 7])`，将加入一条指令，当且仅当上述两种情况之一成立时其输出为 $1$。\n#### 数据范围\n对于所有数据：\n- $1\\le H,W\\le200$；\n- $2\\le H\\cdot W$；\n- $1\\le K\\le H+W-2$。\n\n详细子任务附加限制与分值如下表：\n| 子任务编号 |                           附加限制                           | 分值 |\n| :--------: | :----------------------------------------------------------: | :--: |\n|    $1$     |                     $\\max(H,W) \\le 3$                        | $10$ |\n|    $2$     |                     $\\max(H,W) \\le 10$                       | $11$ |\n|    $3$     |                     $\\max(H,W) \\le 30$                       | $11$ |\n|    $4$     |                     $\\max(H,W) \\le 100$                      | $15$ |\n|    $5$     |                       $\\min(H,W) = 1$                        | $12$ |\n|    $6$     |     每幅图像上位于第 $0$ 行且位于第 $0$ 列的那个像素是黑色的         | $8$ |\n|    $7$     |                           $K = 1$                            | $14$ |\n|    $8$     |                      没有任何附加限制                           | $19$ |", "locale": "zh-CN"}}}
{"pid": "P6752", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [1000], "memory": [17408]}, "tags": ["2011", "交互题", "Special Judge", "进制", "其它技巧", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2011] cmp", "background": "You must design an algorithm for an ancient computer whose memory is just an array of $10240$ bits.The memory is initialized to zero, after which you may write and read a single bit at a time.\n\nYou must implement two operations on this computer:\n\n$\\operatorname{remember}(a)$: $a$ is an integer between $0$ and $4095$\n- The implementation of this operation may call:\n- - $\\operatorname{bit\\_set}(address)$: $\\ \\ \\ \\ $ $address$ is an integer between $1$ and $10240$\n- - The memory bit at position address will be set to $1$\n\n$\\operatorname{compare}(b)$: $b$ is an integer between $0$ and $4095$\n- if $b < a$, it should return $-1$\n- if $b = a$, it should return $0$\n- if $b > a$, it should return $1$\n- The implementation of this operation may call:\n- - $\\operatorname{bit\\_get}(address)$ Returns the memory bit at position $address$: $1$ if it was set through $\\operatorname{bit\\_set}()$ during the $\\operatorname{remember}(a)$ operation, and $0$ otherwise.", "description": "Implement $\\operatorname{remember}()$ and $\\operatorname{compare}()$ to minimize the total number of memory accesses ($\\operatorname{bit\\_set}()$\nand $\\operatorname{bit\\_get}()$) in the worst-case for all possible values of $a$ and $b$.\n\nYour solution will be evaluated exhaustively:\n\n```\ndefine AllMemory = array [0..4095][1..10240] of bits\nset AllMemory to zeros\nfor a = 0..4095:\n    define bit_set(address): AllMemory[a][address] = 1\n    remember(a)\nlet maxA= the maximum number of bit_set() calls executed for any a\nfor (a,b) ∈ {0..4095}×{0..4095} in random order (i.e. all valid pairs (a,b) are considered, in some random order)\n    define bit_get(address): return AllMemory[a][address]\n    answer =compare(b)\n    if answer for comparing a and b is incorrect : your score = 0; exit\nlet maxB = the maximum number of bit_get() calls executed for any (a,b) pair\nT=maxA + maxB\nIf (T>20): your score = 0; exit\nelse your score = 1 + 9 * (21– T); exit\n```", "inputFormat": "", "outputFormat": "", "hint": "### Description of implementation\n\n**Actually many things are here. BUT, If YOU ARE GOING TO SUBMIT ON LUOGU, You Should Use C++, YOUR CODE MUSTN'T INCLUDE `cmp.h`.**\n\n**Here is an example code to submit on Luogu.**\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n// Your codes here\nextern\"C\" void bit_set(int);\nextern\"C\" int bit_get(int);\nextern\"C\" void remember(int a){\n    // Your codes here\n}\nextern\"C\" int compare(int b){\n    // Your codes here\n}\n```\n\n### Constraints\n- You may be disqualified for any attempt to interact with the memory of our grading code.\n- If your solution does not obey the protocol defined above (e.g. calling $\\operatorname{bit\\_set}()$ during $\\operatorname{compare}()$ or with an invalid address), you will receive zero points.\n- Time limit: your implementation must execute $4096$ calls to $\\operatorname{remember}()$ and $4096\\times 4096$\ncalls to $\\operatorname{compare}()$ in under $10$ seconds.\n\nFrom [Balkan Olympiad in Informatics 2011](http://www.boi2011.ro/boi2011/) [Day 2](http://www.boi2011.ro/boi2011/?pagina=probleme) [T1 cmp](http://www.boi2011.ro/resurse/tasks/cmp.zip).", "locale": "en", "translations": {"en": {"title": "[BalkanOI 2011] cmp", "background": "You must design an algorithm for an ancient computer whose memory is just an array of $10240$ bits.The memory is initialized to zero, after which you may write and read a single bit at a time.\n\nYou must implement two operations on this computer:\n\n$\\operatorname{remember}(a)$: $a$ is an integer between $0$ and $4095$\n- The implementation of this operation may call:\n- - $\\operatorname{bit\\_set}(address)$: $\\ \\ \\ \\ $ $address$ is an integer between $1$ and $10240$\n- - The memory bit at position address will be set to $1$\n\n$\\operatorname{compare}(b)$: $b$ is an integer between $0$ and $4095$\n- if $b < a$, it should return $-1$\n- if $b = a$, it should return $0$\n- if $b > a$, it should return $1$\n- The implementation of this operation may call:\n- - $\\operatorname{bit\\_get}(address)$ Returns the memory bit at position $address$: $1$ if it was set through $\\operatorname{bit\\_set}()$ during the $\\operatorname{remember}(a)$ operation, and $0$ otherwise.", "description": "Implement $\\operatorname{remember}()$ and $\\operatorname{compare}()$ to minimize the total number of memory accesses ($\\operatorname{bit\\_set}()$\nand $\\operatorname{bit\\_get}()$) in the worst-case for all possible values of $a$ and $b$.\n\nYour solution will be evaluated exhaustively:\n\n```\ndefine AllMemory = array [0..4095][1..10240] of bits\nset AllMemory to zeros\nfor a = 0..4095:\n    define bit_set(address): AllMemory[a][address] = 1\n    remember(a)\nlet maxA= the maximum number of bit_set() calls executed for any a\nfor (a,b) ∈ {0..4095}×{0..4095} in random order (i.e. all valid pairs (a,b) are considered, in some random order)\n    define bit_get(address): return AllMemory[a][address]\n    answer =compare(b)\n    if answer for comparing a and b is incorrect : your score = 0; exit\nlet maxB = the maximum number of bit_get() calls executed for any (a,b) pair\nT=maxA + maxB\nIf (T>20): your score = 0; exit\nelse your score = 1 + 9 * (21– T); exit\n```", "inputFormat": "", "outputFormat": "", "hint": "### Description of implementation\n\n**Actually many things are here. BUT, If YOU ARE GOING TO SUBMIT ON LUOGU, You Should Use C++, YOUR CODE MUSTN'T INCLUDE `cmp.h`.**\n\n**Here is an example code to submit on Luogu.**\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n// Your codes here\nextern\"C\" void bit_set(int);\nextern\"C\" int bit_get(int);\nextern\"C\" void remember(int a){\n    // Your codes here\n}\nextern\"C\" int compare(int b){\n    // Your codes here\n}\n```\n\n### Constraints\n- You may be disqualified for any attempt to interact with the memory of our grading code.\n- If your solution does not obey the protocol defined above (e.g. calling $\\operatorname{bit\\_set}()$ during $\\operatorname{compare}()$ or with an invalid address), you will receive zero points.\n- Time limit: your implementation must execute $4096$ calls to $\\operatorname{remember}()$ and $4096\\times 4096$\ncalls to $\\operatorname{compare}()$ in under $10$ seconds.\n\nFrom [Balkan Olympiad in Informatics 2011](http://www.boi2011.ro/boi2011/) [Day 2](http://www.boi2011.ro/boi2011/?pagina=probleme) [T1 cmp](http://www.boi2011.ro/resurse/tasks/cmp.zip).", "locale": "en"}, "zh-CN": {"title": "[BalkanOI 2011] cmp", "background": "这是一道 **Grader 交互题**。\n\n本题时限 10s，空限除交互库所用内存仅 16MB。\n\n本题分数最高 $190$，但标解所选择的方案可得 $100$ 分。\n\n#### 测评注意事项\n- 你的代码中不应包含 `cmp.h`，而应该在开头包含下面两个函数的声明：\n   - `void bit_set(int);`\n   - `int bit_get(int);`\n- 你的代码中应该实现两个函数 ：\n   - `void remember(int a);`\n   - `int compare(int b);`\n\n换句话说，您可以在如下的代码模板中编写程序：\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ndo something...\nextern \"C\" void bit_set(int);\nextern \"C\" int bit_get(int);\nextern \"C\" void remember(int a) {\n    do something...\n}\nextern \"C\" int compare(int b) {\n    do something...\n}\n```", "description": "我们有一个第一维长度为 $4096$，第二维长度为 $10240$ 的二维 $01$ 数组 $mem$，初始时所有值为 $0$。\n\n您需要编写在 $01$ 数组上执行的两个操作 `void remember(int a)` 和 `int compare(int b)`。\n\n#### 实现细节\n\n`void remember(int a)` ：\n\n- 保证 $0\\le a\\le 4095$。\n- 您可以调用 `void bit_set(int ad)`，其中您需要保证 $1\\le ad \\le 10240$。\n  - 这会导致 $mem_{a,ad}=1$。\n\n`int compare(int b)`：\n\n- 保证 $0\\le b\\le 4095$。\n- 您需要将 $a$ 与  $b$ 进行比较，其中 $a$ 未知：\n  -  若 $b<a$，请返回 $-1$。\n  - 若 $b=a$，请返回 $0$。\n  - 若 $b>a$，请返回 $1$。\n- 您可以调用 `int bit_get(int ad)`，其中您需要保证 $1\\le ad \\le 10240$。\n  - 这会返回 $mem_{a,ad}$ 的值\n\n#### 任务\n\n您应该实现上述两个函数 `void remember(int a)` 和 `int compare(int b)` 在最大程度上减少 `void bit_set(int ad)` 和 `int bit_get(int ad)` 的调用次数。\n\n您的得分由以下伪代码计算：\n\n```\ndefine AllMemory = array [0..4095][1..10240] of bits\nset AllMemory to zeros\nfor a = 0..4095:\n    define bit_set(address): AllMemory[a][address] = 1\n    remember(a)\nlet maxA= the maximum number of bit_set() calls executed for any a\nfor (a,b) ∈ {0..4095}×{0..4095} in random order (i.e. all valid pairs (a,b) are considered, in some random order)\n    define bit_get(address): return AllMemory[a][address]\n    answer =compare(b)\n    if answer for comparing a and b is incorrect : your score = 0; exit\nlet maxB = the maximum number of bit_get() calls executed for any (a,b) pair\nT=maxA + maxB\nIf (T>20): your score = 0; exit\nelse your score = 1 + 9 * (21– T); exit\n```", "inputFormat": null, "outputFormat": null, "hint": "#### 限制\n\n- 如果您的解决方案不遵守上面的实现细节部分，您保龄。\n\n- 您的解决方案必须可以在 10s 内调用 $4096$ 次  `void remember(int a)`  和 $4096\\times 4096$ 次 `int compare(int b)`。\n#### 说明\n本题译自 [Balkan Olympiad in Informatics 2011](http://www.boi2011.ro/boi2011/) [Day 2](http://www.boi2011.ro/boi2011/?pagina=probleme) [T1 cmp](http://www.boi2011.ro/resurse/tasks/cmp.zip)。\n\n感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的交互库。", "locale": "zh-CN"}}}
{"pid": "P6753", "type": "P", "difficulty": 4, "samples": [["8 4\n0\n1\n2\n2\n3\n3\n4\n6\n1 8\n2 5\n2 7\n2 8", "1\n3\n2\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2013", "倍增", "BalticOI（波罗的海）"], "title": "[BalticOI 2013] Ball Machine (Day1)", "background": null, "description": "给定一棵树，在根节点放一些球，如果下方有空位，那么它就会往下滚到下面的节点，如果有多个节点选择，它会选择 **以其（即后文中提到的儿子节点）为根节点的子树中标号最小值最小** 的儿子节点。每个位置最多只能有一个球，如果已经有球了，则该位置的空位被占用。\n\n从一个位置上拿走球，上面的球也会滚下来。\n\n每次给定一些操作，分别为在根节点放若干个球，和把某个节点的球拿走，求最后的结果。", "inputFormat": "第一行两个整数 $N,Q$ 代表树的节点数和操作数。      \n这 $N$ 个节点编号为 $1$ 到 $N$。       \n接下来 $N$ 行每行一个整数第 $i$ 行代表第 $i$ 个节点的父节点。   \n接下来 $Q$ 行每行两个整数 $opt,num$：\n\n- 如果 $opt=1$，代表在根节点放 $num$ 个球。\n- 如果 $opt=2$，代表撤掉 $num$ 节点的球。", "outputFormat": "每次操作后都需要输出一个结果：\n\n- 如果 $opt=1$，输出最后一个球落到了哪里。\n- 如果 $opt=2$，输出撤掉那个球会有多少个球滚下来。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le N,Q \\le 10^5$。     \n对于其中 $25\\%$ 的数据，每个节点的儿子节点数只可能为 $0$ 个或 $2$ 个，且所有叶子节点到根节点的距离相同。     \n对于另外 $30\\%$ 的数据，$opt=2$ 的操作输出的总为 $0$。  \n对于另外 $40\\%$ 的数据，只有一个 $opt=1$ 的操作。\n\n#### 说明\n\n翻译自 [BalticOI 2013 Day1 A Ball Machine](https://boi.cses.fi/files/boi2013_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2013] Ball Machine (Day1)", "background": null, "description": "给定一棵树，在根节点放一些球，如果下方有空位，那么它就会往下滚到下面的节点，如果有多个节点选择，它会选择 **以其（即后文中提到的儿子节点）为根节点的子树中标号最小值最小** 的儿子节点。每个位置最多只能有一个球，如果已经有球了，则该位置的空位被占用。\n\n从一个位置上拿走球，上面的球也会滚下来。\n\n每次给定一些操作，分别为在根节点放若干个球，和把某个节点的球拿走，求最后的结果。", "inputFormat": "第一行两个整数 $N,Q$ 代表树的节点数和操作数。      \n这 $N$ 个节点编号为 $1$ 到 $N$。       \n接下来 $N$ 行每行一个整数第 $i$ 行代表第 $i$ 个节点的父节点。   \n接下来 $Q$ 行每行两个整数 $opt,num$：\n\n- 如果 $opt=1$，代表在根节点放 $num$ 个球。\n- 如果 $opt=2$，代表撤掉 $num$ 节点的球。", "outputFormat": "每次操作后都需要输出一个结果：\n\n- 如果 $opt=1$，输出最后一个球落到了哪里。\n- 如果 $opt=2$，输出撤掉那个球会有多少个球滚下来。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le N,Q \\le 10^5$。     \n对于其中 $25\\%$ 的数据，每个节点的儿子节点数只可能为 $0$ 个或 $2$ 个，且所有叶子节点到根节点的距离相同。     \n对于另外 $30\\%$ 的数据，$opt=2$ 的操作输出的总为 $0$。  \n对于另外 $40\\%$ 的数据，只有一个 $opt=1$ 的操作。\n\n#### 说明\n\n翻译自 [BalticOI 2013 Day1 A Ball Machine](https://boi.cses.fi/files/boi2013_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6754", "type": "P", "difficulty": 6, "samples": [["123 321", "153"], ["123456789 987654321", "167386971"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2013", "数位 DP", "BalticOI（波罗的海）"], "title": "[BalticOI 2013] Palindrome-Free Numbers (Day1)", "background": "", "description": "我们定义回文串为正着读反着读都一样的数字串，如果一个数字串的一个长度大于 $1$ 的子串也为回文串的话，那么我们也定义这个数字串为回文串。\n\n顾名思义，不是回文串的数字串为非回文串。\n\n给定 $a,b$，求区间 $[a,b]$ 中有多少个数字串为非回文串。", "inputFormat": "一行两个整数 $a,b$ 代表这个区间。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$0 \\le a \\le b \\le 10^{18}$。    \n对于其中的 $25\\%$ 的数据，$b-a \\le 10^5$。\n\n#### 说明\n\n翻译自 [BalticOI 2013 Day1 B Palindrome-Free Numbers](https://boi.cses.fi/files/boi2013_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2013] Palindrome-Free Numbers (Day1)", "background": "", "description": "我们定义回文串为正着读反着读都一样的数字串，如果一个数字串的一个长度大于 $1$ 的子串也为回文串的话，那么我们也定义这个数字串为回文串。\n\n顾名思义，不是回文串的数字串为非回文串。\n\n给定 $a,b$，求区间 $[a,b]$ 中有多少个数字串为非回文串。", "inputFormat": "一行两个整数 $a,b$ 代表这个区间。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$0 \\le a \\le b \\le 10^{18}$。    \n对于其中的 $25\\%$ 的数据，$b-a \\le 10^5$。\n\n#### 说明\n\n翻译自 [BalticOI 2013 Day1 B Palindrome-Free Numbers](https://boi.cses.fi/files/boi2013_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6755", "type": "P", "difficulty": 6, "samples": [["4 3\n-1\n1\n-3\n1\n1 2\n1 3\n1 4", "2\n-6\n2"], ["4 5\n1\n2\n1\n2\n1 2\n2 3\n3 4\n4 1\n1 3", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "图论", "2013", "BalticOI（波罗的海）"], "title": "[BalticOI 2013] Pipes (Day1)", "background": "", "description": "给定一个 $N$ 点 $M$ 边的无向图，**保证图连通**。现在每个点都有一定量的水，现在可以在一条边上进行操作：\n\n- 让水流出：给定 $d$，假设长度为 $m$，流的时间为 $s$，那么总共失水速度为 $\\dfrac{2dm^3}{s}$，这条边两边的每个点的失水速度为 $\\dfrac{dm^3}{s}$。\n- 让水流进：给定 $p$，假设长度为 $m$，流的时间为 $s$，那么总共得水速度为 $\\dfrac{2pm^3}{s}$，这条边两边的每个点的得水速度为 $\\dfrac{pm^3}{s}$。\n\n现在给定这个图，和每个点的水量的变化速度，求每条边的水量的变化速度的构造方案。", "inputFormat": "第一行两个整数 $N,M$ 代表点数和边数。     \n这 $N$ 个点编号为 $1$ 到 $N$。   \n接下来 $N$ 行每行一个整数 $c_i$ 代表这个点的水量变化速度，正数为得水，负数为失水。     \n接下来 $M$ 行每行两个整数代表一条边。", "outputFormat": "如果不存在这样的构造方案或者有多解，只输出一个整数 `0`。   \n如果存在这样的方案，输出 $M$ 行，每行一个整数代表每条边的水量变化速度。     \n得水为正数，失水为负数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le M \\le 5 \\times 10^5$，$-10^9 \\le c_i \\le 10^9$，如果有解且唯一解，每个答案在 $[-10^9,10^9]$ 的范围内。     \n对于其中 $30\\%$ 的数据，该图为一棵树。\n\n#### 说明\n\n翻译自 [BalticOI 2013 Day1 C Pipes](https://boi.cses.fi/files/boi2013_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2013] Pipes (Day1)", "background": "", "description": "给定一个 $N$ 点 $M$ 边的无向图，**保证图连通**。现在每个点都有一定量的水，现在可以在一条边上进行操作：\n\n- 让水流出：给定 $d$，假设长度为 $m$，流的时间为 $s$，那么总共失水速度为 $\\dfrac{2dm^3}{s}$，这条边两边的每个点的失水速度为 $\\dfrac{dm^3}{s}$。\n- 让水流进：给定 $p$，假设长度为 $m$，流的时间为 $s$，那么总共得水速度为 $\\dfrac{2pm^3}{s}$，这条边两边的每个点的得水速度为 $\\dfrac{pm^3}{s}$。\n\n现在给定这个图，和每个点的水量的变化速度，求每条边的水量的变化速度的构造方案。", "inputFormat": "第一行两个整数 $N,M$ 代表点数和边数。     \n这 $N$ 个点编号为 $1$ 到 $N$。   \n接下来 $N$ 行每行一个整数 $c_i$ 代表这个点的水量变化速度，正数为得水，负数为失水。     \n接下来 $M$ 行每行两个整数代表一条边。", "outputFormat": "如果不存在这样的构造方案或者有多解，只输出一个整数 `0`。   \n如果存在这样的方案，输出 $M$ 行，每行一个整数代表每条边的水量变化速度。     \n得水为正数，失水为负数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^5$，$1 \\le M \\le 5 \\times 10^5$，$-10^9 \\le c_i \\le 10^9$，如果有解且唯一解，每个答案在 $[-10^9,10^9]$ 的范围内。     \n对于其中 $30\\%$ 的数据，该图为一棵树。\n\n#### 说明\n\n翻译自 [BalticOI 2013 Day1 C Pipes](https://boi.cses.fi/files/boi2013_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6756", "type": "P", "difficulty": 5, "samples": [["2 2\n2 3\n5\n6", "3\noo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "BalticOI（波罗的海）"], "title": "[BalticOI 2013] Brunhilda’s Birthday", "background": "", "description": "有一个整数 $n$ 以及一个长度为 $m$ 的素数表 $p$。\n\n您可以进行任意多次操作，每一次操作时，您选择一个素数 $p_i$，这会使得 $n\\to \\lfloor \\frac{n}{p_i}\\rfloor\\times p_i$。\n\n您的目标是求出使得 $n$ 变为 $0$ 的最小操作数，如果不可能变为 $0$，请输出 `oo`。\n\n为了增加难度，您需要回答 $Q$ 组 $n$。 ", "inputFormat": "第一行为两个整数 $m,Q$。\n\n接下来一行 $m$ 个整数 $p$。\n\n接下来 $Q$ 行，一行一个整数 $n$，表示每一次询问给出的 $n$。", "outputFormat": "对于每一个询问，求出使得 $n$ 变为 $0$ 的最小操作数，如果不可能变为 $0$，请输出 `oo`。", "hint": "#### 数据范围及限制\n- 对于 $20$ 分的数据，保证 $m,n,Q\\le 10^4$。\n- 对于另外 $20$ 分的数据，保证 $Q=1$。\n- 对于 $100\\%$ 的数据，保证 $1\\le m,Q\\le 10^5$，$2\\le p_i\\le 10^7$ 且 $p_i$ 为素数，$1\\le n\\le 10^7$。\n\n#### 说明\n本题译自 [Baltic Olympiad in Informatics 2013](https://boi.cses.fi/tasks.php) [Day 2](https://boi.cses.fi/files/boi2013_day2.pdf) T1 Brunhilda’s Birthday。\n\n因为译题人找不到合适的设置，所以本题满分 $110$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2013] Brunhilda’s Birthday", "background": "", "description": "有一个整数 $n$ 以及一个长度为 $m$ 的素数表 $p$。\n\n您可以进行任意多次操作，每一次操作时，您选择一个素数 $p_i$，这会使得 $n\\to \\lfloor \\frac{n}{p_i}\\rfloor\\times p_i$。\n\n您的目标是求出使得 $n$ 变为 $0$ 的最小操作数，如果不可能变为 $0$，请输出 `oo`。\n\n为了增加难度，您需要回答 $Q$ 组 $n$。 ", "inputFormat": "第一行为两个整数 $m,Q$。\n\n接下来一行 $m$ 个整数 $p$。\n\n接下来 $Q$ 行，一行一个整数 $n$，表示每一次询问给出的 $n$。", "outputFormat": "对于每一个询问，求出使得 $n$ 变为 $0$ 的最小操作数，如果不可能变为 $0$，请输出 `oo`。", "hint": "#### 数据范围及限制\n- 对于 $20$ 分的数据，保证 $m,n,Q\\le 10^4$。\n- 对于另外 $20$ 分的数据，保证 $Q=1$。\n- 对于 $100\\%$ 的数据，保证 $1\\le m,Q\\le 10^5$，$2\\le p_i\\le 10^7$ 且 $p_i$ 为素数，$1\\le n\\le 10^7$。\n\n#### 说明\n本题译自 [Baltic Olympiad in Informatics 2013](https://boi.cses.fi/tasks.php) [Day 2](https://boi.cses.fi/files/boi2013_day2.pdf) T1 Brunhilda’s Birthday。\n\n因为译题人找不到合适的设置，所以本题满分 $110$ 分。", "locale": "zh-CN"}}}
{"pid": "P6757", "type": "P", "difficulty": 4, "samples": [["5 8\nFFR.....\n.FRRR...\n.FFFFF..\n..RRRFFR\n.....FFF", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "2013", "并查集", "广度优先搜索 BFS", "BalticOI（波罗的海）"], "title": "[BalticOI 2013] Tracks in the Snow", "background": "", "description": "有一个含 $H$ 行，$W$ 列的字符矩阵，初始全为 `.`。\n\n有两种动物，狐狸和兔子，将会从左上角走到右下角，狐狸会留下 `F` 的痕迹，兔子会留下 `R` 的痕迹。\n\n痕迹会相互覆盖。\n\n走路规则如下：\n- 可以往返走；\n- 不可以走对角线；\n- 不可以跳格子；\n- 不可能有两只动物一起走。\n\n现在您得到了这个被动物们走过的矩阵，请求出至少有几个动物走过了该矩阵。", "inputFormat": "第一行为两个整数 $H,W$。\n\n接下来 $H$ 行，一行 $W$ 个字符，表示整个字符矩阵。", "outputFormat": "仅一行一个整数，表示至少有几个动物走过了该矩阵。", "hint": "#### 数据范围及限制\n- 对于 $30$ 分的数据，保证答案 $\\le 200$，$H,W\\le 500$。\n- 对于 $100\\%$ 的数据，保证 $1\\le H,W\\le 4\\times 10^3$，答案 $\\ge 1$，读入的字符只会是 `.` 或 `R` 或 `F`。\n\n#### 说明\n本题译自 [Baltic Olympiad in Informatics 2013](https://boi.cses.fi/tasks.php) [Day 2](https://boi.cses.fi/files/boi2013_day2.pdf) T2 Tracks in the Snow。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2013] Tracks in the Snow", "background": "", "description": "有一个含 $H$ 行，$W$ 列的字符矩阵，初始全为 `.`。\n\n有两种动物，狐狸和兔子，将会从左上角走到右下角，狐狸会留下 `F` 的痕迹，兔子会留下 `R` 的痕迹。\n\n痕迹会相互覆盖。\n\n走路规则如下：\n- 可以往返走；\n- 不可以走对角线；\n- 不可以跳格子；\n- 不可能有两只动物一起走。\n\n现在您得到了这个被动物们走过的矩阵，请求出至少有几个动物走过了该矩阵。", "inputFormat": "第一行为两个整数 $H,W$。\n\n接下来 $H$ 行，一行 $W$ 个字符，表示整个字符矩阵。", "outputFormat": "仅一行一个整数，表示至少有几个动物走过了该矩阵。", "hint": "#### 数据范围及限制\n- 对于 $30$ 分的数据，保证答案 $\\le 200$，$H,W\\le 500$。\n- 对于 $100\\%$ 的数据，保证 $1\\le H,W\\le 4\\times 10^3$，答案 $\\ge 1$，读入的字符只会是 `.` 或 `R` 或 `F`。\n\n#### 说明\n本题译自 [Baltic Olympiad in Informatics 2013](https://boi.cses.fi/tasks.php) [Day 2](https://boi.cses.fi/files/boi2013_day2.pdf) T2 Tracks in the Snow。", "locale": "zh-CN"}}}
{"pid": "P6758", "type": "P", "difficulty": 7, "samples": [["35\nchefeddiefedjeffeachbigagedegghehad", "36\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2013", "BalticOI（波罗的海）"], "title": "[BalticOI 2013] Vim", "background": "", "description": "给定一个长度为 $N$ 的字符串 $S$，Victor 的目标是将其中的 `e` 全部删除，而不删除其他字符。最开始光标在第一个字符处。\n\nVictor 使用 `Vim` 来解决这个问题。\n\n然而，Victor 并不熟悉 `Vim`，他只知道这里面的三个指令：\n- `x`：删除光标处的字符，光标位置不变，不可以在最后的字符处使用这个命令。\n- `h`：将光标向左移动一格，如果光标位于第一个位置，则光标不动。\n- `f`：其后接一个字符 $c$，其将会将光标移至其右边的第一个字符 $c$，$c\\not =$ `e`。\n\n请计算将其中的 `e` 全部删除，而不删除其他字符的最小**按键**数。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行一个字符串 $S$。", "outputFormat": "仅一行一个整数，表示将其中的 `e` 全部删除，而不删除其他字符的最小**按键**数。", "hint": "#### 样例解释\n`fdhxhhxffhxfahxhhhxhhhxfdhxfghxfahhx` 为最优解。\n#### 数据范围及限制\n- 对于 $50$ 分的数据，保证 $N\\le 500$。\n- 对于另外 $10$ 分的数据，保证 $N\\le 5\\times 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1\\le N\\le 7\\times 10^4$，$S_i\\in\\{$ `a` $\\sim$ `j` $\\}$，$S_1,S_N\\not=$ `e`。\n\n**译者提醒：实在是搞不懂怎样设置了，所以按洛谷默认的来。**\n#### 说明\n本题译自 [Baltic Olympiad in Informatics 2013](https://boi.cses.fi/tasks.php) [Day 2](https://boi.cses.fi/files/boi2013_day2.pdf) T3 Vim。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2013] Vim", "background": "", "description": "给定一个长度为 $N$ 的字符串 $S$，Victor 的目标是将其中的 `e` 全部删除，而不删除其他字符。最开始光标在第一个字符处。\n\nVictor 使用 `Vim` 来解决这个问题。\n\n然而，Victor 并不熟悉 `Vim`，他只知道这里面的三个指令：\n- `x`：删除光标处的字符，光标位置不变，不可以在最后的字符处使用这个命令。\n- `h`：将光标向左移动一格，如果光标位于第一个位置，则光标不动。\n- `f`：其后接一个字符 $c$，其将会将光标移至其右边的第一个字符 $c$，$c\\not =$ `e`。\n\n请计算将其中的 `e` 全部删除，而不删除其他字符的最小**按键**数。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行一个字符串 $S$。", "outputFormat": "仅一行一个整数，表示将其中的 `e` 全部删除，而不删除其他字符的最小**按键**数。", "hint": "#### 样例解释\n`fdhxhhxffhxfahxhhhxhhhxfdhxfghxfahhx` 为最优解。\n#### 数据范围及限制\n- 对于 $50$ 分的数据，保证 $N\\le 500$。\n- 对于另外 $10$ 分的数据，保证 $N\\le 5\\times 10^3$。\n- 对于 $100\\%$ 的数据，保证 $1\\le N\\le 7\\times 10^4$，$S_i\\in\\{$ `a` $\\sim$ `j` $\\}$，$S_1,S_N\\not=$ `e`。\n\n**译者提醒：实在是搞不懂怎样设置了，所以按洛谷默认的来。**\n#### 说明\n本题译自 [Baltic Olympiad in Informatics 2013](https://boi.cses.fi/tasks.php) [Day 2](https://boi.cses.fi/files/boi2013_day2.pdf) T3 Vim。", "locale": "zh-CN"}}}
{"pid": "P6759", "type": "P", "difficulty": 2, "samples": [["4\n13\n9\n19\n3\n0\n10\n20\n3\n4\n0\n11\n2\n1\n15\n0\n12\n5\n5\n13\n0", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2006", "USACO"], "title": "[USACO06OPEN] 县集市 The County Fair", "background": null, "description": "每年，FJ 都喜欢去参加县集市，集市上有 $n$ 个展位，每个摊位 $i$ 都会在当天的特定时间 $p_i$ 发放精美的礼品。FJ 已经听说了这一点，他希望能收集尽可能多的礼品和他的奶牛们一起分享。要想获得摊位 $i$ 发放的礼品，FJ 必须确保时间点 $p_i$ 时位于摊位 $i$。\n\n为了获得尽可能多的礼品，FJ 进行了一番详细的调查，通过调查FJ确定了从摊位 $i$ 到摊位 $j$ 所花费的时间 $t_{i,j}$。集市的布局很不寻常，这会导致，FJ如果在从 $i$ 到 $j$ 的过程中选择从其他摊位绕行，可能会比直接从 $i$ 到 $j$ 所花费的时间更少，然而我们耿直的 FJ 从来不这么做，如果他想从摊位 $i$ 到摊位 $j$，他一定会花 $t_{i,j}$ 的时间从 $i$ 走到 $j$。另外由于集市所在地崎岖不平，所以 $t_{i,j}$ 可能与 $t_{j,i}$ 不相同。\n\nFJ 在时间 $0$ 时，位于 $1$ 号摊位，请计算他最多可以收集多少奖品。", "inputFormat": "第 $1$ 行：一个整数 $n$，表示摊位的数量。\n\n第 $2$ 行：共 $n$ 个整数，其中第 $i+1$ 的正数 $p_i$ 表示摊位 $i$ 发放礼品的时间。\n\n第 $n+2$ 到第 $n^2+n+1$ 行：共 $n^2$ 行，第一个 $n$ 行描述了 FJ 从摊位 $1$ 走到到摊位 $1$...$n$ 所需时间（$t_{1,1},t_{1,2}, ...t_{1,n}$），接下来的 $n$ 行描述了 FJ 从摊位 $2$ 走到摊位 $1$...$n$ 所需时间（$t_{2,1},t_{2,2}, ...t_{2,n}$），以此类推，最后的 $n$ 行描述了 FJ 从摊位 $n$ 走到摊位 $1$...$n$ 所需要的时间 $t_{n,1},t_{n,2}, ...t_{n,n}$。对于任意摊位 $i$，$t_{i,i}=0$。", "outputFormat": "一行：一个整数，表示 FJ 最多可以领取到的奖品数量。", "hint": "#### 样例说明\n\n样例中集市上共有 $4$ 个摊位。$1$ 号摊位在时间 $13$ 发放礼品，$2$ 号摊位在时间 $9$ 发放礼品，$3$ 号摊位在时间 $19$ 发放礼品，$4$ 号摊位在时间 $3$ 发放礼品。\n\nFJ 首先从 $1$ 号摊位走到 $4$ 号摊位，用时 $3$，并在时间 $3$ 到达，正好可以领取到奖品，接着他从摊位 $4$ 走到摊位 $2$ ，用时 $5$，并在时间 $8$ 到达，在等待 $1$ 个时间点后可以领取 $2$ 号摊位的礼品，接着他从 $2$ 号摊位走到 $1$ 号摊位，用时 $4$，并在时间 $13$ 到达，从而可以收集到第 $3$ 个礼品。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le 400$，$0\\le p_i\\le 10^9$，$1\\le t_{i,j}\\le 10^6$。\n\n数据来自 darkbzoj。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO06OPEN] 县集市 The County Fair", "background": null, "description": "每年，FJ 都喜欢去参加县集市，集市上有 $n$ 个展位，每个摊位 $i$ 都会在当天的特定时间 $p_i$ 发放精美的礼品。FJ 已经听说了这一点，他希望能收集尽可能多的礼品和他的奶牛们一起分享。要想获得摊位 $i$ 发放的礼品，FJ 必须确保时间点 $p_i$ 时位于摊位 $i$。\n\n为了获得尽可能多的礼品，FJ 进行了一番详细的调查，通过调查FJ确定了从摊位 $i$ 到摊位 $j$ 所花费的时间 $t_{i,j}$。集市的布局很不寻常，这会导致，FJ如果在从 $i$ 到 $j$ 的过程中选择从其他摊位绕行，可能会比直接从 $i$ 到 $j$ 所花费的时间更少，然而我们耿直的 FJ 从来不这么做，如果他想从摊位 $i$ 到摊位 $j$，他一定会花 $t_{i,j}$ 的时间从 $i$ 走到 $j$。另外由于集市所在地崎岖不平，所以 $t_{i,j}$ 可能与 $t_{j,i}$ 不相同。\n\nFJ 在时间 $0$ 时，位于 $1$ 号摊位，请计算他最多可以收集多少奖品。", "inputFormat": "第 $1$ 行：一个整数 $n$，表示摊位的数量。\n\n第 $2$ 行：共 $n$ 个整数，其中第 $i+1$ 的正数 $p_i$ 表示摊位 $i$ 发放礼品的时间。\n\n第 $n+2$ 到第 $n^2+n+1$ 行：共 $n^2$ 行，第一个 $n$ 行描述了 FJ 从摊位 $1$ 走到到摊位 $1$...$n$ 所需时间（$t_{1,1},t_{1,2}, ...t_{1,n}$），接下来的 $n$ 行描述了 FJ 从摊位 $2$ 走到摊位 $1$...$n$ 所需时间（$t_{2,1},t_{2,2}, ...t_{2,n}$），以此类推，最后的 $n$ 行描述了 FJ 从摊位 $n$ 走到摊位 $1$...$n$ 所需要的时间 $t_{n,1},t_{n,2}, ...t_{n,n}$。对于任意摊位 $i$，$t_{i,i}=0$。", "outputFormat": "一行：一个整数，表示 FJ 最多可以领取到的奖品数量。", "hint": "#### 样例说明\n\n样例中集市上共有 $4$ 个摊位。$1$ 号摊位在时间 $13$ 发放礼品，$2$ 号摊位在时间 $9$ 发放礼品，$3$ 号摊位在时间 $19$ 发放礼品，$4$ 号摊位在时间 $3$ 发放礼品。\n\nFJ 首先从 $1$ 号摊位走到 $4$ 号摊位，用时 $3$，并在时间 $3$ 到达，正好可以领取到奖品，接着他从摊位 $4$ 走到摊位 $2$ ，用时 $5$，并在时间 $8$ 到达，在等待 $1$ 个时间点后可以领取 $2$ 号摊位的礼品，接着他从 $2$ 号摊位走到 $1$ 号摊位，用时 $4$，并在时间 $13$ 到达，从而可以收集到第 $3$ 个礼品。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le 400$，$0\\le p_i\\le 10^9$，$1\\le t_{i,j}\\le 10^6$。\n\n数据来自 darkbzoj。", "locale": "zh-CN"}}}
{"pid": "P6760", "type": "P", "difficulty": 6, "samples": [["3\n3 1 2 3\n3 3 4 5\n2 4 2", "4\n7\n7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "2019", "THUPC"], "title": "[THUPC 2019] 大碗宽面", "background": "", "description": "Yazid 喜欢吃大碗宽面。现有 $m$ 碗宽面，其中第 $i$ 碗宽面（$1 \\le i \\le m$）共包含 $n_i$ 根面条，它们的宽度分别为 $A_{i,1},A_{i,2},\\cdots,A_{i,n}$。\n\n记 $f(u,v)$ 表示若混合第 $u$ 碗宽面和第 $v$ 碗宽面，将得到的超大碗宽面的第 $\\left\\lfloor\\dfrac{n_u +n_v +1}{2}\\right\\rfloor$ 小的面条宽度（$\\lfloor x \\rfloor$ 表示不超过 $x$ 的最大整数）。\n\nYazid 想求出所有 $f(u,v)$，但为了节省你的输出时间，你只需要对所有 $1 \\le u \\le m$ 求出：\n\n- $R(u)=\\mathop{\\rm xor}\\limits_{v=1}^{m} {(f(u,v)+u+v)}$（$\\rm xor$ 指异或运算，在 C++ 语言中对应 `^` 运算符）。", "inputFormat": "第一行一个正整数 $m$，表示宽面碗数。\n\n接下来 $m$ 行，每行若干个用单个空格隔开的整数描述一碗宽面：这部分的第 $i$ 行的第一个正整数为 $n_i$，表示第 $i$ 碗宽面包含的面条数；接下来 $n_i$ 个非负整数 $A_{i,j}$ 描述各面条的宽度。", "outputFormat": "输出 $n$ 行，每行一个整数，其中第 $i$ 行的整数为 $R(i)$。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n- $\\def\\x{\\operatorname{xor}} R(1) = {(f(1,1)+2)}\\x{(f(1,2)+3)}\\x{(f(1,3)+4)} = 4\\x6\\x6 = 4$\n- $\\def\\x{\\operatorname{xor}} R(2) = {(f(2,1)+3)}\\x{(f(2,2)+4)}\\x{(f(2,3)+5)} = 6\\x8\\x9 = 7$\n- $\\def\\x{\\operatorname{xor}} R(3) = {(f(3,1)+4)}\\x{(f(3,2)+5)}\\x{(f(3,3)+6)} = 6\\x9\\x8 = 7$\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$m \\le 10^4$，$n_i \\le 500$，$0 \\le A_{i,j} \\le 10^9$。\n\n#### 说明\n\n来自 THUPC（THU Programming Contest，清华大学程序设计竞赛）2019。\n\n题解等资源可在 https://github.com/wangyurzee7/THUPC2019 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2019] 大碗宽面", "background": "", "description": "Yazid 喜欢吃大碗宽面。现有 $m$ 碗宽面，其中第 $i$ 碗宽面（$1 \\le i \\le m$）共包含 $n_i$ 根面条，它们的宽度分别为 $A_{i,1},A_{i,2},\\cdots,A_{i,n}$。\n\n记 $f(u,v)$ 表示若混合第 $u$ 碗宽面和第 $v$ 碗宽面，将得到的超大碗宽面的第 $\\left\\lfloor\\dfrac{n_u +n_v +1}{2}\\right\\rfloor$ 小的面条宽度（$\\lfloor x \\rfloor$ 表示不超过 $x$ 的最大整数）。\n\nYazid 想求出所有 $f(u,v)$，但为了节省你的输出时间，你只需要对所有 $1 \\le u \\le m$ 求出：\n\n- $R(u)=\\mathop{\\rm xor}\\limits_{v=1}^{m} {(f(u,v)+u+v)}$（$\\rm xor$ 指异或运算，在 C++ 语言中对应 `^` 运算符）。", "inputFormat": "第一行一个正整数 $m$，表示宽面碗数。\n\n接下来 $m$ 行，每行若干个用单个空格隔开的整数描述一碗宽面：这部分的第 $i$ 行的第一个正整数为 $n_i$，表示第 $i$ 碗宽面包含的面条数；接下来 $n_i$ 个非负整数 $A_{i,j}$ 描述各面条的宽度。", "outputFormat": "输出 $n$ 行，每行一个整数，其中第 $i$ 行的整数为 $R(i)$。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n- $\\def\\x{\\operatorname{xor}} R(1) = {(f(1,1)+2)}\\x{(f(1,2)+3)}\\x{(f(1,3)+4)} = 4\\x6\\x6 = 4$\n- $\\def\\x{\\operatorname{xor}} R(2) = {(f(2,1)+3)}\\x{(f(2,2)+4)}\\x{(f(2,3)+5)} = 6\\x8\\x9 = 7$\n- $\\def\\x{\\operatorname{xor}} R(3) = {(f(3,1)+4)}\\x{(f(3,2)+5)}\\x{(f(3,3)+6)} = 6\\x9\\x8 = 7$\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$m \\le 10^4$，$n_i \\le 500$，$0 \\le A_{i,j} \\le 10^9$。\n\n#### 说明\n\n来自 THUPC（THU Programming Contest，清华大学程序设计竞赛）2019。\n\n题解等资源可在 https://github.com/wangyurzee7/THUPC2019 查看。", "locale": "zh-CN"}}}
{"pid": "P6761", "type": "P", "difficulty": 5, "samples": [["3 3\n3\n1 0 3 0\n0 0 0 3\n3 0 3 1", "1"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "二分", "BalticOI（波罗的海）"], "title": "[BalticOI 2010] BEARs (Day1)", "background": "本题中的 $(a,b) \\to (c,d)$ 代表一条从 $(a,b)$ 连向 $(c,d)$ 的线段。", "description": "给定 $N$ 条长度为 $1$ 的线段，定义他们为「标记线」。\n\n现在在点 $(A,B)$ 处有一个强盗，他要前往 $(0,0)$，警察们可以任意选择一个点，关闭他四周的任意一条线段。比如选择点 $(0,0)$，线段 $(-1,1) \\to (1,1)$，$(-1,1)\\to (-1,-1)$，$(-1,-1) \\to (1,-1)$，$(1,-1) \\to (1,1)$ 其中之一将会被关闭，但是关闭的线段中不能有与标记线 **直接相连** 的线段。比如 $(0,0) \\to (0,2)$ 与 $(0,1) \\to (0,3)$ 是直接相连的，但是 $(-1,1) \\to (1,1)$ 与 $(0,0) \\to (0,3)$ 不是。\n\n强盗可以到达关闭的线段上的点，但是不能通过关闭的线段离开。\n\n求强盗离 $(0,0)$ 的最近的距离的最大值 $D$。", "inputFormat": "第一行两个整数 $A,B$ 代表强盗初始在 $(A,B)$。     \n第二行一个整数 $N$ 代表标记线数。    \n接下来 $N$ 行每行两个整数 $X_1,Y_1,X_2,Y_2$ 代表一条标记线 $(X_1,Y_1) \\to (X_2,Y_2)$。", "outputFormat": "一行一个整数代表强盗离 $(0,0)$ 的最近的距离的最大值 $D$。", "hint": "#### 样例说明\n\n对于样例 $1$，如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cqukdqmc.png)\n\n选择的点为 $(0,0)$，关闭的线段为 $(1,1) \\to (1,-1)$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$|A|,|B|,|X_1|,|Y_1|,|X_2|,|Y_2| \\le 10^6$，$0 \\le N \\le 500$，保证每条标记线 $X_1=X_2$ 或者 $Y_1=Y_2$。\n\n#### 说明\n\n翻译自 [BalticOI 2010 Day1 A BEARs](https://boi.cses.fi/files/boi2010_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2010] BEARs (Day1)", "background": "本题中的 $(a,b) \\to (c,d)$ 代表一条从 $(a,b)$ 连向 $(c,d)$ 的线段。", "description": "给定 $N$ 条长度为 $1$ 的线段，定义他们为「标记线」。\n\n现在在点 $(A,B)$ 处有一个强盗，他要前往 $(0,0)$，警察们可以任意选择一个点，关闭他四周的任意一条线段。比如选择点 $(0,0)$，线段 $(-1,1) \\to (1,1)$，$(-1,1)\\to (-1,-1)$，$(-1,-1) \\to (1,-1)$，$(1,-1) \\to (1,1)$ 其中之一将会被关闭，但是关闭的线段中不能有与标记线 **直接相连** 的线段。比如 $(0,0) \\to (0,2)$ 与 $(0,1) \\to (0,3)$ 是直接相连的，但是 $(-1,1) \\to (1,1)$ 与 $(0,0) \\to (0,3)$ 不是。\n\n强盗可以到达关闭的线段上的点，但是不能通过关闭的线段离开。\n\n求强盗离 $(0,0)$ 的最近的距离的最大值 $D$。", "inputFormat": "第一行两个整数 $A,B$ 代表强盗初始在 $(A,B)$。     \n第二行一个整数 $N$ 代表标记线数。    \n接下来 $N$ 行每行两个整数 $X_1,Y_1,X_2,Y_2$ 代表一条标记线 $(X_1,Y_1) \\to (X_2,Y_2)$。", "outputFormat": "一行一个整数代表强盗离 $(0,0)$ 的最近的距离的最大值 $D$。", "hint": "#### 样例说明\n\n对于样例 $1$，如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cqukdqmc.png)\n\n选择的点为 $(0,0)$，关闭的线段为 $(1,1) \\to (1,-1)$。\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$|A|,|B|,|X_1|,|Y_1|,|X_2|,|Y_2| \\le 10^6$，$0 \\le N \\le 500$，保证每条标记线 $X_1=X_2$ 或者 $Y_1=Y_2$。\n\n#### 说明\n\n翻译自 [BalticOI 2010 Day1 A BEARs](https://boi.cses.fi/files/boi2010_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6762", "type": "P", "difficulty": 7, "samples": [["2\nWWGG..\n.BB.WW\n.WGG..\nWWGG..", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "搜索", "2010", "BalticOI（波罗的海）", "状压 DP"], "title": "[BalticOI 2010] Lego (Day1)", "background": "", "description": "给定一些 $2 \\times 2$ 的乐高方块，分别有白色（W），灰色（G）和黑色（B）。现在您要往 $6 \\times 6$ 的底板上放置方块，需要保证不能有完全浮空的方块（即四个方格均无放置的地方）也不能超出 $6 \\times 6$ 的底板。\n\n现在给定一个放置完方块的底板的一面的示意图，和这一面逆时针旋转 $90^\\circ$ 后的一面的示意图，求有多少种放置方块的方法数。", "inputFormat": "第一行一个整数 $H$ 代表这种放置方块的高度。    \n接下来 $H$ 行每行六个字符，代表从这一面看到的示意图。    \n接下来 $H$ 行每行六个字符，代表从上一面逆时针旋转 $90^\\circ$ 后的示意图。   \n只能从前面，后面，左面，右面看，不能从上面，下面看。", "outputFormat": "一行一个整数代表答案。          \n答案保证在 64 位有符号整数内。", "hint": "#### 样例 1 解释\n\n如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/njr2rk9l.png)\n\n第一个是从 $A$ 面观察到的示意图。    \n第二个是从 $B$ 面（$A$ 面逆时针旋转 $90^\\circ$）观察到的示意图。\n\n下面是这 $6$ 种情况（感谢 Vonov 提供的图片！）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wymozlif.png)         \n![](https://cdn.luogu.com.cn/upload/image_hosting/1vw0fu3t.png)         \n![](https://cdn.luogu.com.cn/upload/image_hosting/umn2hync.png)             \n![](https://cdn.luogu.com.cn/upload/image_hosting/pykojvay.png)           \n![](https://cdn.luogu.com.cn/upload/image_hosting/9z9wvzxp.png)          \n![](https://cdn.luogu.com.cn/upload/image_hosting/hkp3tjfp.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le H \\le 6$。\n\n#### 说明\n\n翻译自 [BalticOI 2010 Day1 B Lego](https://boi.cses.fi/files/boi2010_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2010] Lego (Day1)", "background": "", "description": "给定一些 $2 \\times 2$ 的乐高方块，分别有白色（W），灰色（G）和黑色（B）。现在您要往 $6 \\times 6$ 的底板上放置方块，需要保证不能有完全浮空的方块（即四个方格均无放置的地方）也不能超出 $6 \\times 6$ 的底板。\n\n现在给定一个放置完方块的底板的一面的示意图，和这一面逆时针旋转 $90^\\circ$ 后的一面的示意图，求有多少种放置方块的方法数。", "inputFormat": "第一行一个整数 $H$ 代表这种放置方块的高度。    \n接下来 $H$ 行每行六个字符，代表从这一面看到的示意图。    \n接下来 $H$ 行每行六个字符，代表从上一面逆时针旋转 $90^\\circ$ 后的示意图。   \n只能从前面，后面，左面，右面看，不能从上面，下面看。", "outputFormat": "一行一个整数代表答案。          \n答案保证在 64 位有符号整数内。", "hint": "#### 样例 1 解释\n\n如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/njr2rk9l.png)\n\n第一个是从 $A$ 面观察到的示意图。    \n第二个是从 $B$ 面（$A$ 面逆时针旋转 $90^\\circ$）观察到的示意图。\n\n下面是这 $6$ 种情况（感谢 Vonov 提供的图片！）：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wymozlif.png)         \n![](https://cdn.luogu.com.cn/upload/image_hosting/1vw0fu3t.png)         \n![](https://cdn.luogu.com.cn/upload/image_hosting/umn2hync.png)             \n![](https://cdn.luogu.com.cn/upload/image_hosting/pykojvay.png)           \n![](https://cdn.luogu.com.cn/upload/image_hosting/9z9wvzxp.png)          \n![](https://cdn.luogu.com.cn/upload/image_hosting/hkp3tjfp.png)\n\n#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le H \\le 6$。\n\n#### 说明\n\n翻译自 [BalticOI 2010 Day1 B Lego](https://boi.cses.fi/files/boi2010_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6763", "type": "P", "difficulty": 5, "samples": [["2\n1 1\n3 3", "1"], ["2\n1 3\n3 1", "2"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "BalticOI（波罗的海）"], "title": "[BalticOI 2010] Printed Circuit Board (Day1)", "background": "", "description": "你现在有无数个平面直角坐标系，给定 $N$ 条线段，每条线段连接 $(X_{i,1},0)$ 和 $(X_{i,2},H)$（$H$ 是一个正数，不过并不给定，解题也并不需要），要求将这些线段放置在平面直角坐标系上，不能有任意两条线段相交。\n\n求最小需要多少平面直角坐标系才能容纳这些线段。", "inputFormat": "第一行一个整数 $N$ 代表线段数。     \n接下来 $N$ 行每行两个整数 $X_{i,1},X_{i,2}$ 代表一条线段。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le N\\le 10^5$，$0 \\le X_{i,1},X_{i,2} \\le 10^6$。所有的 $X_{i, 1}$ 互不相同，所有的 $X_{i,2}$ 互不相同。也即，没有两个端点在同一位置。\n\n#### 说明\n\n翻译自 [BalticOI 2010 Day1 C Printed Circuit Board](https://boi.cses.fi/files/boi2010_day1.pdf)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2010] Printed Circuit Board (Day1)", "background": "", "description": "你现在有无数个平面直角坐标系，给定 $N$ 条线段，每条线段连接 $(X_{i,1},0)$ 和 $(X_{i,2},H)$（$H$ 是一个正数，不过并不给定，解题也并不需要），要求将这些线段放置在平面直角坐标系上，不能有任意两条线段相交。\n\n求最小需要多少平面直角坐标系才能容纳这些线段。", "inputFormat": "第一行一个整数 $N$ 代表线段数。     \n接下来 $N$ 行每行两个整数 $X_{i,1},X_{i,2}$ 代表一条线段。", "outputFormat": "一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\le N\\le 10^5$，$0 \\le X_{i,1},X_{i,2} \\le 10^6$。所有的 $X_{i, 1}$ 互不相同，所有的 $X_{i,2}$ 互不相同。也即，没有两个端点在同一位置。\n\n#### 说明\n\n翻译自 [BalticOI 2010 Day1 C Printed Circuit Board](https://boi.cses.fi/files/boi2010_day1.pdf)。", "locale": "zh-CN"}}}
{"pid": "P6764", "type": "P", "difficulty": 6, "samples": [["8 3 5\n3 3 1 3 4 4 2 2\n3 0 1 2\n2 2 3\n2 3 4\n", "3\n"], ["5 4 4\n1 0 1 2 2\n2 0 1\n1 1\n1 2\n1 3\n", "-1\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "APIO", "交互题", "Special Judge", "O2优化"], "title": "[APIO2020] 粉刷墙壁", "background": "本题仅支持 C++ 系列语言，提交时**不需要**包含 `paint.h` 头文件。\n\n如果交互库存在其他问题，请私信 mrsrz。", "description": "距离上一次 Pak Dengklek 在他的家中粉刷墙壁已经过了一段时间，所以他想重新粉刷一次。他家的墙壁由 $N$ 段组成，它们从 $0$ 到 $N - 1$ 编号。本题中我们假设存在 $K$ 种不同的颜色，颜色用从 $0$ 到 $K - 1$ 的整数表示（例如，红色用 $0$ 表示, 蓝色用 $1$ 表示，以此类推）。Pak Dengklek 希望用第 $C[i]$ 种颜色来粉刷第 $i$ 段的墙壁。\n\n为了粉刷墙壁，Pak Dengklek 雇用了一家有 $M$ 个承包商的承包商公司，承包商从 $0$ 到 $M - 1$ 编号。对 Pak Dengklek 来说不幸的是，承包商只愿意粉刷他们自己喜欢的\n颜色。具体来说，第 $j$ 个承包商喜欢 $A[j]$ 种颜色，并且只想用下列颜色来粉刷墙壁：第 $B[j][0]$ 种颜色，第 $B[j][1]$ 种颜色，$\\dots$，或第 $B[j][A[j] − 1]$ 种颜色。\n\nPak Dengklek 可以给承包商公司提出一些要求。在单个要求中，Pak Dengklek 将给出两个参数 $x$ 和 $y$， 其中 $0 \\leq x < M$，$0 \\leq y \\leq N - M$。承包商公司将会指派第 $((x + l) \\mod M)$ 个承包商粉刷第 $(y + l)$ 段墙壁，其中 $0 \\leq l < M$。如果存在一个 $l$ 使\n得第 $((x + l) \\mod M)$ 个承包商不喜欢第 $C[y + l]$ 种颜色，那么该要求将无效。\n\nPak Dengklek 需要为每个要求付费，因此他想知道为了使墙壁中每个段都能用自己预期的颜色粉刷，他至少要提出多少个要求，或是确认他的预期无法达到。每一段墙壁可以被粉刷多次，但必须保证每次粉刷的颜色都是 Pak Dengklek 所预期的。\n\n你必须实现 `minimumInstructions` 函数：\n\n- `minimumInstructions(N, M, K, C, A, B)` - 该函数将被评测库恰好调用一次。\n\t- $N$：一个整数表示墙壁的段数。\n\t- $M$：一个整数表示承包商的数量。\n\t- $K$：一个整数表示颜色的种数。\n\t- $C$：一个长度为 $N$ 的整数序列，表示每段墙壁预期的颜色。\n\t- $A$：一个长度为 $M$ 的整数序列，表示承包商喜欢的颜色数。\n\t- $B$：一个长度为 $M$ 的每个元素为序列的序列，表示承包商喜欢的具体颜色。\n\t- 该函数必须返回一个整数，表示 Pak Dengklek 为了让墙壁按预期粉刷所需要提出的最小要求数；若预期无法达到则返回 $-1$。", "inputFormat": "样例评测库将读入以下格式的数据：\n```\nN M K\nC[0] C[1] ... C[N-1]\nA[0] B[0][0] B[0][1] ... B[0][A[0]-1]\nA[1] B[1][0] B[1][1] ... B[1][A[1]-1]\n.\n.\n.\nA[M-1] B[M-1][0] B[M-1][1] ... B[M-1][A[M-1]-1]\n```", "outputFormat": "样例评测库将输出函数 `minimumInstructions` 的返回值", "hint": "在第一个样例中， $N = 8$，$M = 3$，$K = 5$，$C = [3, 3, 1, 3, 4, 4, 2, 2]$，$A = [3, 2, 2]$，$B = [[0, 1, 2], [2, 3], [3, 4]]$。Pak Dengklek 可以提出下列的要求。\n\n1. $x = 1$，$y = 0$。这是一个有效的要求，第一个承包商可以粉刷第零段墙壁，第二个承包商可以粉刷第一段墙壁，第零个承包商可以粉刷第二段墙壁。\n2. $x = 0$，$y = 2$。 这是一个有效的要求，第零个承包商可以粉刷第二段墙壁，第一个承包商可以粉刷第三段墙壁，第二个承包商可以粉刷第四段墙壁。\n3. $x = 2$，$y = 5$。 这是一个有效的要求，第二个承包商可以粉刷第五段墙壁，第零个承包商可以粉刷第六段墙壁，第一个承包商可以粉刷第七段墙壁。\n\n容易看出 Pak Dengklek 不能用少于 $3$ 个的要求来达到预期，因此 `minimumInstructions(8, 3, 5, [3, 3, 1, 3, 4, 4, 2, 2], [3, 2, 2], [[0, 1, 2], [2, 3], [3,\n4]])` 应该返回 $3$。\n\n在第二个样例中，$N = 5$，$M = 4$，$K = 4$，$C = [1, 0, 1, 2, 2]$，$A = [2, 1, 1, 1]$，$B =\n[[0, 1], [1], [2], [3]]$。由于第三个承包商只喜欢第 $3$ 种颜色但没有任何一段墙壁能被该颜色粉刷，Pak Dengklek 无法给出任何有效指令。因此`minimumInstructions(5, 4, 4,[1, 0, 1, 2, 2], [2, 1, 1, 1], [[0, 1], [1], [2], [3]])` 应该返回 $-1$。\n\n对于 $0 \\leq k < K$, 令 $f(k)$ 表示喜欢第 $k$ 种颜色的承包商数量。\n\n【条件限制】\n\n- $1 \\leq N \\leq 10^5$。\n- $1 \\leq M \\leq \\min(N, 5 \\times 10^4)$。\n- $1 \\leq K \\leq 10^5$。\n- $0 \\leq C[i] < K$。\n- $1 \\leq A[j] \\leq K$。\n- $0 \\leq B[j][0] < B[j][1] < \\dots < B[j][A[j] − 1] < K$。\n- $\\sum f(k)^2 \\leq 4\\times 10^5$。\n\n【子任务 $1$（$12$ 分）】\n\n- $f(k) \\leq 1$。\n\n【子任务 $2$（$15$ 分）】\n\n- $N \\leq 500$。\n- $M \\leq \\min(N, 200)$。\n- $\\sum f(k)^2 \\leq 1 000$。\n\n【子任务 $3$（$13$ 分）】\n\n- $N \\leq 500$。\n- $M \\leq \\min(N, 200)$。\n\n【子任务 $4$（$23$ 分）】\n\n- $N \\leq 20 000$。\n- $M \\leq \\min(N, 2 000)$。\n\n【子任务 $5$（$37$ 分）】\n\n- 无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APIO2020] 粉刷墙壁", "background": "本题仅支持 C++ 系列语言，提交时**不需要**包含 `paint.h` 头文件。\n\n如果交互库存在其他问题，请私信 mrsrz。", "description": "距离上一次 Pak Dengklek 在他的家中粉刷墙壁已经过了一段时间，所以他想重新粉刷一次。他家的墙壁由 $N$ 段组成，它们从 $0$ 到 $N - 1$ 编号。本题中我们假设存在 $K$ 种不同的颜色，颜色用从 $0$ 到 $K - 1$ 的整数表示（例如，红色用 $0$ 表示, 蓝色用 $1$ 表示，以此类推）。Pak Dengklek 希望用第 $C[i]$ 种颜色来粉刷第 $i$ 段的墙壁。\n\n为了粉刷墙壁，Pak Dengklek 雇用了一家有 $M$ 个承包商的承包商公司，承包商从 $0$ 到 $M - 1$ 编号。对 Pak Dengklek 来说不幸的是，承包商只愿意粉刷他们自己喜欢的\n颜色。具体来说，第 $j$ 个承包商喜欢 $A[j]$ 种颜色，并且只想用下列颜色来粉刷墙壁：第 $B[j][0]$ 种颜色，第 $B[j][1]$ 种颜色，$\\dots$，或第 $B[j][A[j] − 1]$ 种颜色。\n\nPak Dengklek 可以给承包商公司提出一些要求。在单个要求中，Pak Dengklek 将给出两个参数 $x$ 和 $y$， 其中 $0 \\leq x < M$，$0 \\leq y \\leq N - M$。承包商公司将会指派第 $((x + l) \\mod M)$ 个承包商粉刷第 $(y + l)$ 段墙壁，其中 $0 \\leq l < M$。如果存在一个 $l$ 使\n得第 $((x + l) \\mod M)$ 个承包商不喜欢第 $C[y + l]$ 种颜色，那么该要求将无效。\n\nPak Dengklek 需要为每个要求付费，因此他想知道为了使墙壁中每个段都能用自己预期的颜色粉刷，他至少要提出多少个要求，或是确认他的预期无法达到。每一段墙壁可以被粉刷多次，但必须保证每次粉刷的颜色都是 Pak Dengklek 所预期的。\n\n你必须实现 `minimumInstructions` 函数：\n\n- `minimumInstructions(N, M, K, C, A, B)` - 该函数将被评测库恰好调用一次。\n\t- $N$：一个整数表示墙壁的段数。\n\t- $M$：一个整数表示承包商的数量。\n\t- $K$：一个整数表示颜色的种数。\n\t- $C$：一个长度为 $N$ 的整数序列，表示每段墙壁预期的颜色。\n\t- $A$：一个长度为 $M$ 的整数序列，表示承包商喜欢的颜色数。\n\t- $B$：一个长度为 $M$ 的每个元素为序列的序列，表示承包商喜欢的具体颜色。\n\t- 该函数必须返回一个整数，表示 Pak Dengklek 为了让墙壁按预期粉刷所需要提出的最小要求数；若预期无法达到则返回 $-1$。", "inputFormat": "样例评测库将读入以下格式的数据：\n```\nN M K\nC[0] C[1] ... C[N-1]\nA[0] B[0][0] B[0][1] ... B[0][A[0]-1]\nA[1] B[1][0] B[1][1] ... B[1][A[1]-1]\n.\n.\n.\nA[M-1] B[M-1][0] B[M-1][1] ... B[M-1][A[M-1]-1]\n```", "outputFormat": "样例评测库将输出函数 `minimumInstructions` 的返回值", "hint": "在第一个样例中， $N = 8$，$M = 3$，$K = 5$，$C = [3, 3, 1, 3, 4, 4, 2, 2]$，$A = [3, 2, 2]$，$B = [[0, 1, 2], [2, 3], [3, 4]]$。Pak Dengklek 可以提出下列的要求。\n\n1. $x = 1$，$y = 0$。这是一个有效的要求，第一个承包商可以粉刷第零段墙壁，第二个承包商可以粉刷第一段墙壁，第零个承包商可以粉刷第二段墙壁。\n2. $x = 0$，$y = 2$。 这是一个有效的要求，第零个承包商可以粉刷第二段墙壁，第一个承包商可以粉刷第三段墙壁，第二个承包商可以粉刷第四段墙壁。\n3. $x = 2$，$y = 5$。 这是一个有效的要求，第二个承包商可以粉刷第五段墙壁，第零个承包商可以粉刷第六段墙壁，第一个承包商可以粉刷第七段墙壁。\n\n容易看出 Pak Dengklek 不能用少于 $3$ 个的要求来达到预期，因此 `minimumInstructions(8, 3, 5, [3, 3, 1, 3, 4, 4, 2, 2], [3, 2, 2], [[0, 1, 2], [2, 3], [3,\n4]])` 应该返回 $3$。\n\n在第二个样例中，$N = 5$，$M = 4$，$K = 4$，$C = [1, 0, 1, 2, 2]$，$A = [2, 1, 1, 1]$，$B =\n[[0, 1], [1], [2], [3]]$。由于第三个承包商只喜欢第 $3$ 种颜色但没有任何一段墙壁能被该颜色粉刷，Pak Dengklek 无法给出任何有效指令。因此`minimumInstructions(5, 4, 4,[1, 0, 1, 2, 2], [2, 1, 1, 1], [[0, 1], [1], [2], [3]])` 应该返回 $-1$。\n\n对于 $0 \\leq k < K$, 令 $f(k)$ 表示喜欢第 $k$ 种颜色的承包商数量。\n\n【条件限制】\n\n- $1 \\leq N \\leq 10^5$。\n- $1 \\leq M \\leq \\min(N, 5 \\times 10^4)$。\n- $1 \\leq K \\leq 10^5$。\n- $0 \\leq C[i] < K$。\n- $1 \\leq A[j] \\leq K$。\n- $0 \\leq B[j][0] < B[j][1] < \\dots < B[j][A[j] − 1] < K$。\n- $\\sum f(k)^2 \\leq 4\\times 10^5$。\n\n【子任务 $1$（$12$ 分）】\n\n- $f(k) \\leq 1$。\n\n【子任务 $2$（$15$ 分）】\n\n- $N \\leq 500$。\n- $M \\leq \\min(N, 200)$。\n- $\\sum f(k)^2 \\leq 1 000$。\n\n【子任务 $3$（$13$ 分）】\n\n- $N \\leq 500$。\n- $M \\leq \\min(N, 200)$。\n\n【子任务 $4$（$23$ 分）】\n\n- $N \\leq 20 000$。\n- $M \\leq \\min(N, 2 000)$。\n\n【子任务 $5$（$37$ 分）】\n\n- 无附加限制。", "locale": "zh-CN"}}}
{"pid": "P6765", "type": "P", "difficulty": 6, "samples": [["5 6\n0 1 4\n0 2 4\n1 2 1\n1 3 2\n1 4 10\n2 3 3\n3\n1 2\n2 4\n0 1\n", "3\n10\n4\n"], ["3 2\n0 1 5\n0 2 5\n1\n1 2\n", "-1\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "APIO", "交互题", "Special Judge"], "title": "[APIO2020] 交换城市", "background": "本题仅支持 C++ 系列语言，提交时**不需要**包含 `swap.h` 头文件。\n\n由于交互库本身的性能问题，本题的时间限制上调为 $3$ 秒。如果交互库存在其他问题，请私信 mrsrz。", "description": "印度尼西亚有 $N$ 个城市以及 $M$ 条双向道路，城市从 $0$ 到 $N - 1$ 编号，道路从 $0$ 到 $M - 1$ 编号。每条道路连接着两个不同的城市，第 $i$ 条道路连接第 $U[i]$ 个城市与第 $V[i]$ 个城市，汽车行驶这条道路将耗费 $W[i]$ 个单位汽油。通过这些道路，任意两个城市间能够互相到达。\n\n接下来的 $Q$ 天中, 每天会有一对城市希望建立政治关系。具体来说，第 $j$ 天，第 $X[j]$ 个城市想要和第 $Y[j]$ 个城市建立政治关系。为此，第 $X[j]$ 个城市将会派一名代表坐汽车前往第 $Y[j]$ 个城市。同样地，第 $Y[j]$ 个城市也会派一名代表坐汽车前往第 $X[j]$ 个城市。\n\n为了避免拥塞，两辆车不应在任何时间点碰面。更具体地，两辆车不能在同一个时间点出现在同一个城市。同样地，两辆车也不应该沿相反的方向同时行驶过同一条道路。另外，汽车行驶过一条道路时必须完整经过道路并到达道路另一端的城市（换句话说，汽车不允许在道路中间掉转方向）。但是，汽车可以多次到达一个城市或是多次经过一条道路。此外，汽车可以在任何时间在任何城市等候。\n\n由于高燃料容量汽车的价格昂贵，两个城市都分别希望选择一条路线，使得两辆汽车所需的最大单位汽油容量最小。每个城市中都有加油站并且供油量是无限的，因此汽车所需的单位汽油容量实际上就是行驶过的道路中最大的单位汽油消耗量。\n\n你必须实现 `init` 和 `getMinimumFuelCapacity` 函数。\n\n- `init(N, M, U, V, W)` - 该函数将在所有 `getMinimumFuelCapacity` 的调用前被评测库恰好调用一次。\n\t- $N$： 一个整数表示城市数。\n\t- $M$： 一个整数表示道路数。\n\t- $U$： 一个长为 $M$ 的整数序列表示道路的第一个端点城市。\n\t- $V$： 一个长为 $M$ 的整数序列表示道路的第二个端点城市。\n\t- $W$： 一个长为 $M$ 的整数序列表示道路的汽油消耗。\n\n- `getMinimumFuelCapacity(X, Y)` - 该函数将被评测库调用恰好 $Q$ 次。\n\t- $X$： 一个整数表示第一个城市。\n\t- $Y$： 一个整数表示第二个城市。\n\t- 该函数必须返回一个整数，表示根据题目描述中的规则，两辆分别从第 $X$ 个城市与第 $Y$ 个城市出发要到达彼此城市的车，它们的单位汽油容量最大值的最小值。若无法满足题目规则则返回 $−1$。", "inputFormat": "样例评测库将读入以下格式的数据： \n\n```\nN M\nU[0] V[0] W[0]\nU[1] V[1] W[1]\n.\n.\n.\nU[M-1] V[M-1] W[M-1]\nQ\nX[0] Y[0]\nX[1] Y[1]\n.\n.\n.\nX[Q-1] Y[Q-1]\n```", "outputFormat": "对每个 `getMinimumFuelCapacity` 的调用，样例评测库会输出该函数的返回值", "hint": "第一个样例中, $N = 5$，$M = 6$，$U = [0, 0, 1, 1, 1, 2]$，$V = [1, 2, 2, 3, 4, 3]$，$W =\n[4, 4, 1, 2, 10, 3]$，$Q = 3$，$X = [1, 2, 0]$，$Y = [2, 4, 1]$。如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j3x1idy8.png)\n\n评测库初始时将调用 `init(5, 6, [0, 0, 1, 1, 1, 2], [1, 2, 2, 3, 4, 3],[4, 4, 1, 2, 10, 3])`。之后，评测库将进行如下函数调用：\n\n- `getMinimumFuelCapacity(1, 2)`。首先，从第一个城市出发的汽车可以行驶到第三个城市。接着，从第二个城市出发的汽车可以行驶到第一个城市，并且在第三个城市的汽车可以行驶到第二个城市。因此，最大的单位汽油容量为 $3$ （从第三个城市到第二个城市需要花费 $3$ 个单位汽油）。没有其他更优的路线方案，因此该函数应该返回 $3$。\n\n- `getMinimumFuelCapacity(2, 4)`。任何从第四个城市出发或要到达第四个城市的汽车都需要耗费 $10$ 个单位汽油，因此该函数应该返回 $10$。\n\n- `getMinimumFuelCapacity(0, 1)`。该函数应该返回 $4$。\n\n第二个样例中，$N = 3$，$M = 2$，$U = [0, 0]$，$V = [1, 2]$，$W = [5, 5]$，$Q = 1$，$X = [1]$，$Y = [2]$。 如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3df9k1og.png)\n\n评测库初始时将调用 `init(3, 2, [0, 0], [1, 2], [5, 5])`，之后，评测库将进行如下函数调用：\n\n- `getMinimumFuelCapacity(1, 2)`。两辆车无法满足不在同一时间点碰面的要求，所以该函数应该返回 $-1$。\n\n【条件限制】\n\n- $2 \\leq N \\leq 100 000$。\n- $N - 1 \\leq M \\leq 200 000$。\n- $0 \\leq U[i] < V [i] < N$。\n- 任意两个城市间至多存在一条道路直接相连。\n- 任意两个城市经过道路可以互相到达。\n- $1 \\leq W[i] \\leq 10^9$。\n- $1 \\leq Q \\leq 200 000$。\n- $0 \\leq X[j] < Y [j] < N$。\n\n【子任务 $1$（$6$ 分）】\n\n- 每个城市至多是两条道路的一个端点。\n\n【子任务 $2$（$7$ 分）】\n\n- $M = N - 1$。\n- $U[i] = 0$。\n\n【子任务 $3$（$17$ 分）】\n\n- $Q \\leq 5$。\n- $N \\leq 1 000$。\n- $M \\leq 2 000$。\n\n【子任务 $4$（$20$ 分）】\n\n- $Q \\leq 5$。\n\n【子任务 $5$（$23$ 分）】\n\n- $M = N - 1$。\n\n【子任务 $6$（$27$ 分）】\n\n- 无附加限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APIO2020] 交换城市", "background": "本题仅支持 C++ 系列语言，提交时**不需要**包含 `swap.h` 头文件。\n\n由于交互库本身的性能问题，本题的时间限制上调为 $3$ 秒。如果交互库存在其他问题，请私信 mrsrz。", "description": "印度尼西亚有 $N$ 个城市以及 $M$ 条双向道路，城市从 $0$ 到 $N - 1$ 编号，道路从 $0$ 到 $M - 1$ 编号。每条道路连接着两个不同的城市，第 $i$ 条道路连接第 $U[i]$ 个城市与第 $V[i]$ 个城市，汽车行驶这条道路将耗费 $W[i]$ 个单位汽油。通过这些道路，任意两个城市间能够互相到达。\n\n接下来的 $Q$ 天中, 每天会有一对城市希望建立政治关系。具体来说，第 $j$ 天，第 $X[j]$ 个城市想要和第 $Y[j]$ 个城市建立政治关系。为此，第 $X[j]$ 个城市将会派一名代表坐汽车前往第 $Y[j]$ 个城市。同样地，第 $Y[j]$ 个城市也会派一名代表坐汽车前往第 $X[j]$ 个城市。\n\n为了避免拥塞，两辆车不应在任何时间点碰面。更具体地，两辆车不能在同一个时间点出现在同一个城市。同样地，两辆车也不应该沿相反的方向同时行驶过同一条道路。另外，汽车行驶过一条道路时必须完整经过道路并到达道路另一端的城市（换句话说，汽车不允许在道路中间掉转方向）。但是，汽车可以多次到达一个城市或是多次经过一条道路。此外，汽车可以在任何时间在任何城市等候。\n\n由于高燃料容量汽车的价格昂贵，两个城市都分别希望选择一条路线，使得两辆汽车所需的最大单位汽油容量最小。每个城市中都有加油站并且供油量是无限的，因此汽车所需的单位汽油容量实际上就是行驶过的道路中最大的单位汽油消耗量。\n\n你必须实现 `init` 和 `getMinimumFuelCapacity` 函数。\n\n- `init(N, M, U, V, W)` - 该函数将在所有 `getMinimumFuelCapacity` 的调用前被评测库恰好调用一次。\n\t- $N$： 一个整数表示城市数。\n\t- $M$： 一个整数表示道路数。\n\t- $U$： 一个长为 $M$ 的整数序列表示道路的第一个端点城市。\n\t- $V$： 一个长为 $M$ 的整数序列表示道路的第二个端点城市。\n\t- $W$： 一个长为 $M$ 的整数序列表示道路的汽油消耗。\n\n- `getMinimumFuelCapacity(X, Y)` - 该函数将被评测库调用恰好 $Q$ 次。\n\t- $X$： 一个整数表示第一个城市。\n\t- $Y$： 一个整数表示第二个城市。\n\t- 该函数必须返回一个整数，表示根据题目描述中的规则，两辆分别从第 $X$ 个城市与第 $Y$ 个城市出发要到达彼此城市的车，它们的单位汽油容量最大值的最小值。若无法满足题目规则则返回 $−1$。", "inputFormat": "样例评测库将读入以下格式的数据： \n\n```\nN M\nU[0] V[0] W[0]\nU[1] V[1] W[1]\n.\n.\n.\nU[M-1] V[M-1] W[M-1]\nQ\nX[0] Y[0]\nX[1] Y[1]\n.\n.\n.\nX[Q-1] Y[Q-1]\n```", "outputFormat": "对每个 `getMinimumFuelCapacity` 的调用，样例评测库会输出该函数的返回值", "hint": "第一个样例中, $N = 5$，$M = 6$，$U = [0, 0, 1, 1, 1, 2]$，$V = [1, 2, 2, 3, 4, 3]$，$W =\n[4, 4, 1, 2, 10, 3]$，$Q = 3$，$X = [1, 2, 0]$，$Y = [2, 4, 1]$。如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j3x1idy8.png)\n\n评测库初始时将调用 `init(5, 6, [0, 0, 1, 1, 1, 2], [1, 2, 2, 3, 4, 3],[4, 4, 1, 2, 10, 3])`。之后，评测库将进行如下函数调用：\n\n- `getMinimumFuelCapacity(1, 2)`。首先，从第一个城市出发的汽车可以行驶到第三个城市。接着，从第二个城市出发的汽车可以行驶到第一个城市，并且在第三个城市的汽车可以行驶到第二个城市。因此，最大的单位汽油容量为 $3$ （从第三个城市到第二个城市需要花费 $3$ 个单位汽油）。没有其他更优的路线方案，因此该函数应该返回 $3$。\n\n- `getMinimumFuelCapacity(2, 4)`。任何从第四个城市出发或要到达第四个城市的汽车都需要耗费 $10$ 个单位汽油，因此该函数应该返回 $10$。\n\n- `getMinimumFuelCapacity(0, 1)`。该函数应该返回 $4$。\n\n第二个样例中，$N = 3$，$M = 2$，$U = [0, 0]$，$V = [1, 2]$，$W = [5, 5]$，$Q = 1$，$X = [1]$，$Y = [2]$。 如下图：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3df9k1og.png)\n\n评测库初始时将调用 `init(3, 2, [0, 0], [1, 2], [5, 5])`，之后，评测库将进行如下函数调用：\n\n- `getMinimumFuelCapacity(1, 2)`。两辆车无法满足不在同一时间点碰面的要求，所以该函数应该返回 $-1$。\n\n【条件限制】\n\n- $2 \\leq N \\leq 100 000$。\n- $N - 1 \\leq M \\leq 200 000$。\n- $0 \\leq U[i] < V [i] < N$。\n- 任意两个城市间至多存在一条道路直接相连。\n- 任意两个城市经过道路可以互相到达。\n- $1 \\leq W[i] \\leq 10^9$。\n- $1 \\leq Q \\leq 200 000$。\n- $0 \\leq X[j] < Y [j] < N$。\n\n【子任务 $1$（$6$ 分）】\n\n- 每个城市至多是两条道路的一个端点。\n\n【子任务 $2$（$7$ 分）】\n\n- $M = N - 1$。\n- $U[i] = 0$。\n\n【子任务 $3$（$17$ 分）】\n\n- $Q \\leq 5$。\n- $N \\leq 1 000$。\n- $M \\leq 2 000$。\n\n【子任务 $4$（$20$ 分）】\n\n- $Q \\leq 5$。\n\n【子任务 $5$（$23$ 分）】\n\n- $M = N - 1$。\n\n【子任务 $6$（$27$ 分）】\n\n- 无附加限制。\n", "locale": "zh-CN"}}}
{"pid": "P6766", "type": "P", "difficulty": 6, "samples": [["7 400000\n0 1\n0 5\n0 6\n1 2\n1 4\n2 3\n", "3 6 4 5 2 0 1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "APIO", "交互题", "Special Judge", "O2优化"], "title": "[APIO2020] 有趣的旅途", "background": "本题仅支持 C++ 系列语言，提交时**不需要**包含 `fun.h` 头文件，但需要在程序开头声明 `int hoursRequired(int,int)` 以及 `int attractionsBehind(int,int)`。如果您不明白这是什么意思，也可以直接将 `fun.h` 中的内容粘贴到程序的开头。\n\n交互库在程序非正常结束时可能会返回一些奇怪的信息。\n\n如果交互库存在其他问题，请私信 mrsrz。", "description": "雅加达最大的主题公园中有 $N$ 个景点，它们从 $0$ 到 $N -1$ 编号。这些景点由 $N-1$ 条双向道路连接，任意两个景点间经由这些道路将存在唯一一条简单路径。道路从 $0$ 到 $N - 2$ 编号。第 $i$ 条道路连接第 $A[i]$ 个景点与第 $B[i]$ 个景点，经过这条道路需要花费一个小时。为了避免拥塞，每个景点将至多与三条道路相连。\n\n你想寻找一条游玩路线并使得每个景点都被参观一次。你认为从一个景点走到下一个景点时经过太多道路是十分无聊的。为了寻找一条有趣的路线，你打算安排景点的参观顺序，使得参观下一个景点所花费的时间不超过参观之前景点所花费的时间。换句话说，你想找到一个序列 $P[0], P[1],\\dots, P[N - 1]$ 使其包含 $0$ 到 $N - 1$ 中的所有整数恰好一次，并且从第 $P[i]$ 个景点到达第 $P[i + 1]$ 个景点所需的时间不超过从第 $P[i - 1]$ 个景点到达第 $P[i]$ 个景点所需的时间，其中 $0 < i < N - 1$。\n\n你手上没有景点的完整地图，因此你必须向信息中心进行若干次询问才能找到一条有趣路线。你最多能进行 $Q$ 次询问，每次询问需要提供两个参数 $X$ 和 $Y$ ，其中 $0 \\leq X, Y < N$。每次询问是以下任意一种：\n\n- 从第 $X$ 个景点到第 $Y$ 个景点需要花费多少个小时。特别地，若 $X = Y$ 则回答将是 $0$。\n\n- 有多少个景点 $Z$ 满足，当你想从第 $X$ 个景点到达第 $Z$ 个景点时一定会经过第 $Y$ 个景点。第 $Y$ 个景点将会被计算在内，特别地，若 $X = Y$ 则回答将是 $N$。\n\n你必须实现 `createFunTour` 函数：\n\n- `createFunTour(N, Q)` - 该函数将被评测库恰好调用一次。\n\t- $N$：一个整数表示景点的数量。\n\t- $Q$：一个整数表示询问次数的最大值。\n\t- 该函数可以调用以下两个交互函数：\n    \t- `hoursRequired(X, Y)`\n        \t- $X$：一个整数表示第一个景点的编号。\n\t\t\t- $Y$：一个整数表示第二个景点的编号。\n\t\t\t- 该函数将返回一个整数表示从第 $X$ 个景点到第 $Y$ 个景点需要花费的小时数。\n\t\t\t- 如果 $X$ 或 $Y$ 的值不在 $0$ 到 $N - 1$ 的范围内，该测试点将视为答案错误。\n\t\t- `attractionsBehind(X, Y)`\n\t\t\t- $X$：一个整数表示第一个景点的编号。\n            - $Y$：一个整数表示第二个景点的编号。\n\t\t\t- 该函数将返回一个整数表示有多少个景点 $Z$ 满足，当你想从第 $X$ 个景点到达第 $Z$ 个景点时一定会经过第 $Y$ 个景点。\n\t\t\t- 如果 $X$ 或 $Y$ 的值不在 $0$ 到 $N - 1$ 的范围内，该测试点将视为答案错误。\n\t- 该函数必须返回一个长为 $N$ 的整数序列，表示你找到的景点参观顺序。", "inputFormat": "样例评测库将读入以下格式的数据：\n\n```\nN Q\nA[0] B[0]\nA[1] B[1]\n.\n.\n.\nA[N-2] B[N-2]\n```", "outputFormat": "如果 `createFunTour` 正确返回了一个满足题意的序列，并且 `hoursRequired` 和 `attractionsBehind` 的调用次数总和不超过 $Q$，那么样例评测库将会输出 `createFunTour` 得到的序列。其他情况下样例评测库将会输出错误信息", "hint": "在下图的例子中 $N = 7$，$Q = 400 000$，$A = [0, 0, 0, 1, 1, 2]$，$B = [1, 5, 6, 2, 4, 3]$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j8tmoxuo.png)\n\n评测库将调用 `createFunTour(7, 400000)`。\n- 如果你询问 `hoursRequired(3, 5)`，函数将返回 $4$。\n- 如果你询问 `hoursRequired(5, 4)`，函数将返回 $3$。\n- 如果你询问 `attractionsBehind(5, 1)`，函数将返回 $4$。从第五个景点到第一、二、三、四个景点将一定会经过第一个景点。\n- 如果你询问 `attractionsBehind(1, 5)`，函数将返回 $1$。\n- 一个符合要求的返回序列为 $[3, 6, 4, 5, 2, 0, 1]$，到达下一个参观景点所需的时间按顺序分别为 $[4, 3, 3, 3, 2, 1]$。\n\n【条件限制】\n\n- $2 \\leq N \\leq 100 000$。\n- $Q = 400 000$。\n- 任意两个景点间可以通过双向道路互相到达。\n- 每个景点至多连接着三条道路。\n\n【子任务 $1$（$10$ 分）】\n\n- $N \\leq 17$。\n\n【子任务 $2$（$16$ 分）】\n\n- $N \\leq 500$。\n\n【子任务 $3$（$21$ 分）】\n\n- 对所有的 $1 \\leq i < N$，有一条连接着第 $i$ 个景点与第 $\\lfloor \\dfrac{i-1}{2} \\rfloor$\n个景点的双向道路。\n\n【子任务 $4$（$19$ 分）】\n\n存在至少一个景点 $T$ 使得对于所有 $0 \\leq i < N$，`hoursRequired(T, i)` $<30$ 并且存在一个整数区间 $[L[i], R[i]](0 \\leq L[i] \\leq i \\leq R[i] < N)$ 满足下列条件：\n\n- 从第 $T$ 个景点到达第 $j$ 个景点必须经过第 $i$ 个景点当且仅当 $L[i] \\leq j \\leq R[i]$。\n\n- 若 $L[i] < i$，则恰有一个景点 $X$ 满足：\n\t- $L[i] \\leq X < i$。\n\t- 有一条连接第 $i$ 个景点与第 $X$ 个景点的道路。   \n- 若 $i < R[i]$，则恰有一个景点 $Y$ 满足：\n\t- $i < Y \\leq R[i]$。\n\t- 有一条连接第 $i$ 个景点与第 $Y$ 个景点的道路。\n\n【子任务 $5$（$34$ 分）】\n- 无附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[APIO2020] 有趣的旅途", "background": "本题仅支持 C++ 系列语言，提交时**不需要**包含 `fun.h` 头文件，但需要在程序开头声明 `int hoursRequired(int,int)` 以及 `int attractionsBehind(int,int)`。如果您不明白这是什么意思，也可以直接将 `fun.h` 中的内容粘贴到程序的开头。\n\n交互库在程序非正常结束时可能会返回一些奇怪的信息。\n\n如果交互库存在其他问题，请私信 mrsrz。", "description": "雅加达最大的主题公园中有 $N$ 个景点，它们从 $0$ 到 $N -1$ 编号。这些景点由 $N-1$ 条双向道路连接，任意两个景点间经由这些道路将存在唯一一条简单路径。道路从 $0$ 到 $N - 2$ 编号。第 $i$ 条道路连接第 $A[i]$ 个景点与第 $B[i]$ 个景点，经过这条道路需要花费一个小时。为了避免拥塞，每个景点将至多与三条道路相连。\n\n你想寻找一条游玩路线并使得每个景点都被参观一次。你认为从一个景点走到下一个景点时经过太多道路是十分无聊的。为了寻找一条有趣的路线，你打算安排景点的参观顺序，使得参观下一个景点所花费的时间不超过参观之前景点所花费的时间。换句话说，你想找到一个序列 $P[0], P[1],\\dots, P[N - 1]$ 使其包含 $0$ 到 $N - 1$ 中的所有整数恰好一次，并且从第 $P[i]$ 个景点到达第 $P[i + 1]$ 个景点所需的时间不超过从第 $P[i - 1]$ 个景点到达第 $P[i]$ 个景点所需的时间，其中 $0 < i < N - 1$。\n\n你手上没有景点的完整地图，因此你必须向信息中心进行若干次询问才能找到一条有趣路线。你最多能进行 $Q$ 次询问，每次询问需要提供两个参数 $X$ 和 $Y$ ，其中 $0 \\leq X, Y < N$。每次询问是以下任意一种：\n\n- 从第 $X$ 个景点到第 $Y$ 个景点需要花费多少个小时。特别地，若 $X = Y$ 则回答将是 $0$。\n\n- 有多少个景点 $Z$ 满足，当你想从第 $X$ 个景点到达第 $Z$ 个景点时一定会经过第 $Y$ 个景点。第 $Y$ 个景点将会被计算在内，特别地，若 $X = Y$ 则回答将是 $N$。\n\n你必须实现 `createFunTour` 函数：\n\n- `createFunTour(N, Q)` - 该函数将被评测库恰好调用一次。\n\t- $N$：一个整数表示景点的数量。\n\t- $Q$：一个整数表示询问次数的最大值。\n\t- 该函数可以调用以下两个交互函数：\n    \t- `hoursRequired(X, Y)`\n        \t- $X$：一个整数表示第一个景点的编号。\n\t\t\t- $Y$：一个整数表示第二个景点的编号。\n\t\t\t- 该函数将返回一个整数表示从第 $X$ 个景点到第 $Y$ 个景点需要花费的小时数。\n\t\t\t- 如果 $X$ 或 $Y$ 的值不在 $0$ 到 $N - 1$ 的范围内，该测试点将视为答案错误。\n\t\t- `attractionsBehind(X, Y)`\n\t\t\t- $X$：一个整数表示第一个景点的编号。\n            - $Y$：一个整数表示第二个景点的编号。\n\t\t\t- 该函数将返回一个整数表示有多少个景点 $Z$ 满足，当你想从第 $X$ 个景点到达第 $Z$ 个景点时一定会经过第 $Y$ 个景点。\n\t\t\t- 如果 $X$ 或 $Y$ 的值不在 $0$ 到 $N - 1$ 的范围内，该测试点将视为答案错误。\n\t- 该函数必须返回一个长为 $N$ 的整数序列，表示你找到的景点参观顺序。", "inputFormat": "样例评测库将读入以下格式的数据：\n\n```\nN Q\nA[0] B[0]\nA[1] B[1]\n.\n.\n.\nA[N-2] B[N-2]\n```", "outputFormat": "如果 `createFunTour` 正确返回了一个满足题意的序列，并且 `hoursRequired` 和 `attractionsBehind` 的调用次数总和不超过 $Q$，那么样例评测库将会输出 `createFunTour` 得到的序列。其他情况下样例评测库将会输出错误信息", "hint": "在下图的例子中 $N = 7$，$Q = 400 000$，$A = [0, 0, 0, 1, 1, 2]$，$B = [1, 5, 6, 2, 4, 3]$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j8tmoxuo.png)\n\n评测库将调用 `createFunTour(7, 400000)`。\n- 如果你询问 `hoursRequired(3, 5)`，函数将返回 $4$。\n- 如果你询问 `hoursRequired(5, 4)`，函数将返回 $3$。\n- 如果你询问 `attractionsBehind(5, 1)`，函数将返回 $4$。从第五个景点到第一、二、三、四个景点将一定会经过第一个景点。\n- 如果你询问 `attractionsBehind(1, 5)`，函数将返回 $1$。\n- 一个符合要求的返回序列为 $[3, 6, 4, 5, 2, 0, 1]$，到达下一个参观景点所需的时间按顺序分别为 $[4, 3, 3, 3, 2, 1]$。\n\n【条件限制】\n\n- $2 \\leq N \\leq 100 000$。\n- $Q = 400 000$。\n- 任意两个景点间可以通过双向道路互相到达。\n- 每个景点至多连接着三条道路。\n\n【子任务 $1$（$10$ 分）】\n\n- $N \\leq 17$。\n\n【子任务 $2$（$16$ 分）】\n\n- $N \\leq 500$。\n\n【子任务 $3$（$21$ 分）】\n\n- 对所有的 $1 \\leq i < N$，有一条连接着第 $i$ 个景点与第 $\\lfloor \\dfrac{i-1}{2} \\rfloor$\n个景点的双向道路。\n\n【子任务 $4$（$19$ 分）】\n\n存在至少一个景点 $T$ 使得对于所有 $0 \\leq i < N$，`hoursRequired(T, i)` $<30$ 并且存在一个整数区间 $[L[i], R[i]](0 \\leq L[i] \\leq i \\leq R[i] < N)$ 满足下列条件：\n\n- 从第 $T$ 个景点到达第 $j$ 个景点必须经过第 $i$ 个景点当且仅当 $L[i] \\leq j \\leq R[i]$。\n\n- 若 $L[i] < i$，则恰有一个景点 $X$ 满足：\n\t- $L[i] \\leq X < i$。\n\t- 有一条连接第 $i$ 个景点与第 $X$ 个景点的道路。   \n- 若 $i < R[i]$，则恰有一个景点 $Y$ 满足：\n\t- $i < Y \\leq R[i]$。\n\t- 有一条连接第 $i$ 个景点与第 $Y$ 个景点的道路。\n\n【子任务 $5$（$34$ 分）】\n- 无附加限制。", "locale": "zh-CN"}}}
{"pid": "P6767", "type": "P", "difficulty": 4, "samples": [["5 1 4 3 6", "12"], ["22 2 3 10 14", "31"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2012", "2020", "枚举", "最大公约数 gcd", "BalticOI（波罗的海）"], "title": "[BalticOI 2012/2020] 玫瑰 (Day0)", "background": "因为特殊原因，本题目另外 $24$ 组数据请在 [这里](https://www.luogu.com.cn/problem/U127462) 提交。\n\nValentine 是人赢。", "description": "现在 Valentine 要给他的 $N$ 个妹子买玫瑰花，现在 Valentine 面前有两家店，每一家店有无数朵玫瑰花，但是他们按束卖。第一家店一束花里有 $A$ 朵，每一束花要用 $B$ 块钱。第二家店一束花里有 $C$ 朵，每一束花要用 $D$ 块钱。\n\n求 Valentine 至少买 $N$ 朵花最少需要花多少钱。\n\n至少可以这么理解，假如 $M>N$，但是买 $M$ 朵花的钱比买 $N$ 朵花的少，Valentine 就会买 $M$ 朵花，并把多出来的花给其他妹子，没错，Valentine 很花心。", "inputFormat": "一行五个整数 $N,A,B,C,D$，意义见题目所述。", "outputFormat": "一行一个整数代表最小花费。", "hint": "#### 样例说明\n\n对于样例 $1$，Valentine 可以选择在第二家店买 $2$ 束花。\n\n对于样例 $2$，Valentine 可以选择在第一家店买 $1$ 束花，在第二家店买 $2$ 束花。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$N,A,B,C,D \\le 1000$。\n- Subtask 2（80 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^{15}$，$1 \\le A,B,C,D \\le 10^5$，保证答案不超过 $10^{18}$。\n\n#### 说明\n\n翻译自 [BalticOI 2020 Day0 B Roses](http://www.boi2020.lv/data/tasks/en/day0/roses.pdf)。\n\n与 BalticOI 2012 Day0 A 内容一致。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2012/2020] 玫瑰 (Day0)", "background": "因为特殊原因，本题目另外 $24$ 组数据请在 [这里](https://www.luogu.com.cn/problem/U127462) 提交。\n\nValentine 是人赢。", "description": "现在 Valentine 要给他的 $N$ 个妹子买玫瑰花，现在 Valentine 面前有两家店，每一家店有无数朵玫瑰花，但是他们按束卖。第一家店一束花里有 $A$ 朵，每一束花要用 $B$ 块钱。第二家店一束花里有 $C$ 朵，每一束花要用 $D$ 块钱。\n\n求 Valentine 至少买 $N$ 朵花最少需要花多少钱。\n\n至少可以这么理解，假如 $M>N$，但是买 $M$ 朵花的钱比买 $N$ 朵花的少，Valentine 就会买 $M$ 朵花，并把多出来的花给其他妹子，没错，Valentine 很花心。", "inputFormat": "一行五个整数 $N,A,B,C,D$，意义见题目所述。", "outputFormat": "一行一个整数代表最小花费。", "hint": "#### 样例说明\n\n对于样例 $1$，Valentine 可以选择在第二家店买 $2$ 束花。\n\n对于样例 $2$，Valentine 可以选择在第一家店买 $1$ 束花，在第二家店买 $2$ 束花。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$N,A,B,C,D \\le 1000$。\n- Subtask 2（80 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^{15}$，$1 \\le A,B,C,D \\le 10^5$，保证答案不超过 $10^{18}$。\n\n#### 说明\n\n翻译自 [BalticOI 2020 Day0 B Roses](http://www.boi2020.lv/data/tasks/en/day0/roses.pdf)。\n\n与 BalticOI 2012 Day0 A 内容一致。", "locale": "zh-CN"}}}
{"pid": "P6768", "type": "P", "difficulty": 5, "samples": [["3 4\n7 2\n0 4\n2 6\n1 2 40\n3 2 70\n2 3 90\n1 3 120\n", "110"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2005", "二分", "USACO", "最短路"], "title": "[USACO05MAR] Ombrophobic Bovines 发抖的牛", "background": "", "description": "FJ 的牛们非常害怕淋雨，那会使他们瑟瑟发抖。他们打算安装一个下雨报警器，并且安排了一个撤退计划。他们需要计算最少的让所有牛进入雨棚的时间。  \n牛们在农场的 $F$ 个田地上吃草。有 $P$ 条双向路连接着这些田地。路很宽，无限量的牛可以通过。田地上有雨棚，雨棚有一定的容量，牛们可以瞬间从这块田地进入这块田地上的雨棚。  \n请计算最少的时间，让每只牛都进入雨棚。", "inputFormat": "第 $1$ 行：两个整数 $F$ 和 $P$；  \n第 $2$ 到 $F+1$ 行：第 $i+1$ 行有两个整数描述第 $i$ 个田地，第一个表示田地上的牛数，第二个表示田地上的雨棚容量。两个整数都在 $0$ 和 $1000$ 之间。  \n第 $F+2$ 到 $F+P+1$ 行：每行三个整数描述一条路，分别是起点终点，及通过这条路所需的时间（在 $1$ 和 $10^9$ 之间）。", "outputFormat": "一个整数，表示最少的时间。如果无法使牛们全部进入雨棚，输出 $-1$。", "hint": "对于 $100\\%$ 的数据：$1\\le F\\le 200$，$1\\le P\\le 1500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO05MAR] Ombrophobic Bovines 发抖的牛", "background": "", "description": "FJ 的牛们非常害怕淋雨，那会使他们瑟瑟发抖。他们打算安装一个下雨报警器，并且安排了一个撤退计划。他们需要计算最少的让所有牛进入雨棚的时间。  \n牛们在农场的 $F$ 个田地上吃草。有 $P$ 条双向路连接着这些田地。路很宽，无限量的牛可以通过。田地上有雨棚，雨棚有一定的容量，牛们可以瞬间从这块田地进入这块田地上的雨棚。  \n请计算最少的时间，让每只牛都进入雨棚。", "inputFormat": "第 $1$ 行：两个整数 $F$ 和 $P$；  \n第 $2$ 到 $F+1$ 行：第 $i+1$ 行有两个整数描述第 $i$ 个田地，第一个表示田地上的牛数，第二个表示田地上的雨棚容量。两个整数都在 $0$ 和 $1000$ 之间。  \n第 $F+2$ 到 $F+P+1$ 行：每行三个整数描述一条路，分别是起点终点，及通过这条路所需的时间（在 $1$ 和 $10^9$ 之间）。", "outputFormat": "一个整数，表示最少的时间。如果无法使牛们全部进入雨棚，输出 $-1$。", "hint": "对于 $100\\%$ 的数据：$1\\le F\\le 200$，$1\\le P\\le 1500$。", "locale": "zh-CN"}}}
{"pid": "P6770", "type": "P", "difficulty": 3, "samples": [["7 6 5 8\n1 4 2\n1 2 1\n2 3 6\n3 5 5\n5 4 6\n1 7 9\n1\n4\n5\n3\n7", "4\n1\n2\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2005", "USACO", "最短路"], "title": "[USACO05MAR] Checking an Alibi 不在场的证明", "background": null, "description": "谷仓里发现谷物被盗！FJ 正试图从 $C$ 只奶牛里找出那个偷谷物的罪犯。幸运的是，一个恰好路过的卫星拍下谷物被盗前 $M$ 秒的农场的图片。这样约翰就能通过牛们的位置来判断谁有足够的时间来盗窃谷物。\n\n约翰农场有 $F$ 片草地，标号 $1$ 到 $F$，还有 $P$ 条双向路连接着它们。通过这些路需要的时间在 $1$ 到 $7\\times 10^4$ 秒的范围内。草地 $1$ 上建有那个被盗的谷仓。给出农场地图，以及卫星照片里每只牛所在的位置，请判断哪些牛有可能犯罪。\n\n请注意：数据里可能存在重边（起点和终点相同的边）。\n\n题目中所说的“可能犯罪的牛”指的是在 $M$ 秒内能从照片内的位置到达 $1$ 号草地的牛。", "inputFormat": "第 $1$ 行：四个以空格分隔的整数：$F,P,C$ 和 $M$。\n\n第 $2$ 行至 $P+1$ 行：三个以空格分隔的整数，描述一个路径。连接 $F_1$ 和 $F_2$ 的路径需要 $T$ 秒。\n\n第 $P+2$ 行至 $P+C+1$ 行：每行一个整数，是一头牛的位置。", "outputFormat": "第 $1$ 行输出嫌疑犯的数目，接下来每一行输出一只嫌疑犯的编号，按编号从小到大排序。", "hint": "#### 数据约定\n\n对于 $100\\%$ 的数据：$1 \\le M \\le 7\\times 10^4$，$1 \\le C \\le 100$，$1 \\le P \\le 1000$，$1 \\le F \\le 500$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO05MAR] Checking an Alibi 不在场的证明", "background": null, "description": "谷仓里发现谷物被盗！FJ 正试图从 $C$ 只奶牛里找出那个偷谷物的罪犯。幸运的是，一个恰好路过的卫星拍下谷物被盗前 $M$ 秒的农场的图片。这样约翰就能通过牛们的位置来判断谁有足够的时间来盗窃谷物。\n\n约翰农场有 $F$ 片草地，标号 $1$ 到 $F$，还有 $P$ 条双向路连接着它们。通过这些路需要的时间在 $1$ 到 $7\\times 10^4$ 秒的范围内。草地 $1$ 上建有那个被盗的谷仓。给出农场地图，以及卫星照片里每只牛所在的位置，请判断哪些牛有可能犯罪。\n\n请注意：数据里可能存在重边（起点和终点相同的边）。\n\n题目中所说的“可能犯罪的牛”指的是在 $M$ 秒内能从照片内的位置到达 $1$ 号草地的牛。", "inputFormat": "第 $1$ 行：四个以空格分隔的整数：$F,P,C$ 和 $M$。\n\n第 $2$ 行至 $P+1$ 行：三个以空格分隔的整数，描述一个路径。连接 $F_1$ 和 $F_2$ 的路径需要 $T$ 秒。\n\n第 $P+2$ 行至 $P+C+1$ 行：每行一个整数，是一头牛的位置。", "outputFormat": "第 $1$ 行输出嫌疑犯的数目，接下来每一行输出一只嫌疑犯的编号，按编号从小到大排序。", "hint": "#### 数据约定\n\n对于 $100\\%$ 的数据：$1 \\le M \\le 7\\times 10^4$，$1 \\le C \\le 100$，$1 \\le P \\le 1000$，$1 \\le F \\le 500$。", "locale": "zh-CN"}}}
{"pid": "P6771", "type": "P", "difficulty": 3, "samples": [["3\n7 40 3\n5 23 8\n2 52 6\n", "48\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "2005", "USACO"], "title": "[USACO05MAR] Space Elevator 太空电梯", "background": "", "description": "奶牛们要去太空了！它们打算用方块建造一座太空电梯。现在它们有 $N$ 种方块，第 $i$ 种方块有一个特定的高度 $h_i$，一定的数量 $c_i$。为了防止宇宙射线破坏方块，第 $i$ 种方块的任何部分不能超过高度 $a_i$。\\\n请用这些方块堆出最高的太空电梯。", "inputFormat": "第一行，一个整数 $N$；\\\n第二行到 $N+1$ 行，第 $i+1$ 行三个整数 $h_i,a_i,c_i$，数字之间用空格分隔。", "outputFormat": "共一行，一个整数，为太空电梯的高度。", "hint": "对于 $100\\%$ 的数据：$1\\le N\\le 400$，$1\\le h_i \\le 100$，$1\\le c_i\\le 10$，$1\\le a_i\\le 4\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO05MAR] Space Elevator 太空电梯", "background": "", "description": "奶牛们要去太空了！它们打算用方块建造一座太空电梯。现在它们有 $N$ 种方块，第 $i$ 种方块有一个特定的高度 $h_i$，一定的数量 $c_i$。为了防止宇宙射线破坏方块，第 $i$ 种方块的任何部分不能超过高度 $a_i$。\\\n请用这些方块堆出最高的太空电梯。", "inputFormat": "第一行，一个整数 $N$；\\\n第二行到 $N+1$ 行，第 $i+1$ 行三个整数 $h_i,a_i,c_i$，数字之间用空格分隔。", "outputFormat": "共一行，一个整数，为太空电梯的高度。", "hint": "对于 $100\\%$ 的数据：$1\\le N\\le 400$，$1\\le h_i \\le 100$，$1\\le c_i\\le 10$，$1\\le a_i\\le 4\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P6772", "type": "P", "difficulty": 6, "samples": [["3 4 11 0\n1 3 4\n1 2 1\n2 1 3\n2 3 2\n3 1 4", "13"], ["4 8 16 3\n3 1 2 4\n1 2 1\n1 3 1\n1 3 2\n3 4 3\n2 3 2\n3 2 1\n4 2 1\n4 1 5\n3 3 5\n1 2 5\n5 4 20", "39"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2020", "NOI", "O2优化", "动态规划优化", "矩阵加速"], "title": "[NOI2020] 美食家", "background": "", "description": "坐落在 Bzeroth 大陆上的精灵王国击退地灾军团的入侵后，经过十余年的休养生息，重新成为了一片欣欣向荣的乐土，吸引着八方游客。小 W 是一位游历过世界各地的著名美食家，现在也慕名来到了精灵王国。\n\n精灵王国共有 $n$ 座城市，城市从 $1$ 到 $n$ 编号，其中城市 $i$ 的美食能为小 W 提供 $c_i$ 的愉悦值。精灵王国的城市通过 $m$ 条**单向道路**连接，道路从 $1$ 到 $m$ 编号，其中道路 $i$ 的起点为城市 $u_i$ ，终点为城市 $v_i$，沿它通行需要花费 $w_i$ 天。也就是说，若小 W 在第 $d$ 天从城市 $u_i$ 沿道路 $i$ 通行，那么他会在第 $d + w_i$ 天到达城市 $v_i$。\n\n小 W 计划在精灵王国进行一场为期 $T$ 天的旅行，更具体地：他会在第 $0$ 天从城市 $1$ 出发，经过 $T$ 天的旅行，最终在**恰好第 $T$ 天**回到城市 $1$ 结束旅行。由于小 W 是一位美食家，每当他到达一座城市时（包括第 $0$ 天和第 $T$ 天的城市 $1$），他都会品尝该城市的美食并获得其所提供的愉悦值，若小 W 多次到达同一座城市，他将**获得多次愉悦值**。注意旅行途中小 W **不能在任何城市停留**，即当他到达一座城市且还未结束旅行时，他当天必须立即从该城市出发前往其他城市。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2svum9ge.png)\n\n对于上图，小 W 一种为期 $11$ 天的可行旅游方案为 $1 \\to 2 \\to 1 \\to 2 \\to 3 \\to 1$：\n- 第 $0$ 天，小 W 从城市 $1$ 开始旅行，获得愉悦值 $1$ 并向城市 $2$ 出发。\n- 第 $1$ 天，小 W 到达城市 $2$，获得愉悦值 $3$ 并向城市 $1$ 出发。\n- 第 $4$ 天，小 W 到达城市 $1$，获得愉悦值 $1$ 并向城市 $2$ 出发。\n- 第 $5$ 天，小 W 到达城市 $2$，获得愉悦值 $3$ 并向城市 $3$ 出发。\n- 第 $7$ 天，小 W 到达城市 $3$，获得愉悦值 $4$ 并向城市 $1$ 出发。\n- 第 $11$ 天，小 W 到达城市 $1$，获得愉悦值 $1$ 并结束旅行。\n- 小 W 在该旅行中获得的愉悦值之和为 $13$。\n\n此外，精灵王国会在**不同**的时间举办 $k$ 次美食节。具体来说，第 $i$ 次美食节将于第 $t_i$ 天在城市 $x_i$ 举办，若小 W 第 $t_i$ 天时恰好在城市 $x_i$，那么他在品尝城市 $x_i$ 的美食时会**额外得到** $y_i$ 的愉悦值。现在小 W 想请作为精灵王国接待使者的你帮他算出，他在旅行中能获得的愉悦值之和的**最大值**。", "inputFormat": "从标准输入中读入数据。\n\n第一行四个整数 $n, m, T, k$，依次表示城市数、道路条数、旅行天数与美食节次数。\n\n第二行 $n$ 个整数 $c_i$，表示每座城市的美食所能提供的愉悦值。接下来 $m$ 行每行三个整数 $u_i, v_i, w_i$，依次表示每条道路的起点、终点与通行天数。\n\n最后 $k$ 行每行三个整数 $t_i, x_i, y_i$，依次表示每次美食节的举办时间、举办城市与提供的额外愉悦值。\n\n本题中数据保证：\n- 对所有 $1 \\leq i \\leq m$，有 $u_i\\neq v_i$。但数据中可能存在路线重复的单向道路，即可能存在 $1 \\leq i < j \\leq m，使得 u_i = u_j, v_i = v_j$。\n- 对每座城市都满足：至少存在一条以该该城市为起点的单向道路。\n- 每次美食节的举办时间 $t_i$ 互不相同。", "outputFormat": "输出到标准输出中。\n\n仅一行一个整数，表示小 W 通过旅行能获得的愉悦值之和的最大值。\n\n**若小 W 无法在第 $T$ 天回到城市 $1$，则输出 $-1$**。", "hint": "#### 样例 1 解释\n\n该样例为题目描述中的例子，最优旅行方案见题目描述。\n\n#### 样例 2 解释\n\n最优方案为 $1 \\to 3 \\to 4 \\to 2 \\to 3 \\to 4 \\to 1$。\n- 第 $0$ 天，小 W 从城市 $1$ 开始旅行，获得愉悦值 $3$ 并沿道路 $3$ 通行。\n- 第 $2$ 天，小 W 到达城市 $3$，获得愉悦值 $2$ 并沿道路 $4$ 通行。\n- 第 $5$ 天，小 W 到达城市 $4$，由于美食节获得愉悦值 $20 + 4$ 并沿道路 $7$ 通行。\n- 第 $6$ 天，小 W 到达城市 $2$，获得愉悦值 $1$ 并沿道路 $5$ 通行。\n- 第 $8$ 天，小 W 到达城市 $3$，获得愉悦值 $2$ 并沿道路 $4$ 通行。\n- 第 $11$ 天，小 W 到达城市 $4$，获得愉悦值 $4$ 并沿道路 $8$ 通行。\n- 第 $16$ 天，小 W 到达城市 $1$，获得愉悦值 $3$ 并结束旅行。\n- 小 W 获得的愉悦值之和为 $39$。\n\n#### 样例 3\n\n见选手目录下的 delicacy/delicacy3.in 与 delicacy/delicacy3.ans。\n\n该样例满足 $k=0$\n\n---\n\n### 测试点约束\n\n对于所有测试点：\n\n$1 \\leq n \\leq 50$，$n \\leq m \\leq 501$，$0 \\leq k \\leq 200$，$1 \\leq t_i \\leq T \\leq 10^9$。\n\n$1 \\leq w_i \\leq 5$，$1 \\leq c_i \\leq 52501$，$1 \\leq u_i, v_i, x_i \\leq n$，$1 \\leq y_i \\leq 10^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 |  $n$ |  $m$ |  $T$ | 特殊限制 |\n| :-: | :-:| :-: |:-:| :-:|\n|  $1\\sim 4$ |  $\\le 5$ |  $\\le 50$ |  $\\le 5$ | 无 |\n|  $5\\sim 8$ |  $\\le 50$ |  $\\le 50$ |  $\\le 52501$ | 无 |\n|  $9\\sim 10$ |  $\\le 50$ |  $\\le 50$ |  $\\le 10^9$ | A | \n|  $11\\sim 13$ |  $\\le 50$ |  $\\le 50$ |  $\\le 10^9$ |  $k=0$ |\n|  $14\\sim 15$ |  $\\le 50$ |  $\\le 50$ |  $\\le 10^9$ |  $k\\le 10$ |\n|  $16\\sim 17$ |  $\\le 50$ |  $\\le 50$ |  $\\le 10^9$ | 无 |\n|  $18\\sim 20$ |  $\\le 50$ |  $\\le 501$ |  $\\le 10^9$ | 无 |\n\n特殊限制 A：$n = m$ 且 $u_i = i,v_i = (i \\bmod n) + 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2020] 美食家", "background": "", "description": "坐落在 Bzeroth 大陆上的精灵王国击退地灾军团的入侵后，经过十余年的休养生息，重新成为了一片欣欣向荣的乐土，吸引着八方游客。小 W 是一位游历过世界各地的著名美食家，现在也慕名来到了精灵王国。\n\n精灵王国共有 $n$ 座城市，城市从 $1$ 到 $n$ 编号，其中城市 $i$ 的美食能为小 W 提供 $c_i$ 的愉悦值。精灵王国的城市通过 $m$ 条**单向道路**连接，道路从 $1$ 到 $m$ 编号，其中道路 $i$ 的起点为城市 $u_i$ ，终点为城市 $v_i$，沿它通行需要花费 $w_i$ 天。也就是说，若小 W 在第 $d$ 天从城市 $u_i$ 沿道路 $i$ 通行，那么他会在第 $d + w_i$ 天到达城市 $v_i$。\n\n小 W 计划在精灵王国进行一场为期 $T$ 天的旅行，更具体地：他会在第 $0$ 天从城市 $1$ 出发，经过 $T$ 天的旅行，最终在**恰好第 $T$ 天**回到城市 $1$ 结束旅行。由于小 W 是一位美食家，每当他到达一座城市时（包括第 $0$ 天和第 $T$ 天的城市 $1$），他都会品尝该城市的美食并获得其所提供的愉悦值，若小 W 多次到达同一座城市，他将**获得多次愉悦值**。注意旅行途中小 W **不能在任何城市停留**，即当他到达一座城市且还未结束旅行时，他当天必须立即从该城市出发前往其他城市。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2svum9ge.png)\n\n对于上图，小 W 一种为期 $11$ 天的可行旅游方案为 $1 \\to 2 \\to 1 \\to 2 \\to 3 \\to 1$：\n- 第 $0$ 天，小 W 从城市 $1$ 开始旅行，获得愉悦值 $1$ 并向城市 $2$ 出发。\n- 第 $1$ 天，小 W 到达城市 $2$，获得愉悦值 $3$ 并向城市 $1$ 出发。\n- 第 $4$ 天，小 W 到达城市 $1$，获得愉悦值 $1$ 并向城市 $2$ 出发。\n- 第 $5$ 天，小 W 到达城市 $2$，获得愉悦值 $3$ 并向城市 $3$ 出发。\n- 第 $7$ 天，小 W 到达城市 $3$，获得愉悦值 $4$ 并向城市 $1$ 出发。\n- 第 $11$ 天，小 W 到达城市 $1$，获得愉悦值 $1$ 并结束旅行。\n- 小 W 在该旅行中获得的愉悦值之和为 $13$。\n\n此外，精灵王国会在**不同**的时间举办 $k$ 次美食节。具体来说，第 $i$ 次美食节将于第 $t_i$ 天在城市 $x_i$ 举办，若小 W 第 $t_i$ 天时恰好在城市 $x_i$，那么他在品尝城市 $x_i$ 的美食时会**额外得到** $y_i$ 的愉悦值。现在小 W 想请作为精灵王国接待使者的你帮他算出，他在旅行中能获得的愉悦值之和的**最大值**。", "inputFormat": "从标准输入中读入数据。\n\n第一行四个整数 $n, m, T, k$，依次表示城市数、道路条数、旅行天数与美食节次数。\n\n第二行 $n$ 个整数 $c_i$，表示每座城市的美食所能提供的愉悦值。接下来 $m$ 行每行三个整数 $u_i, v_i, w_i$，依次表示每条道路的起点、终点与通行天数。\n\n最后 $k$ 行每行三个整数 $t_i, x_i, y_i$，依次表示每次美食节的举办时间、举办城市与提供的额外愉悦值。\n\n本题中数据保证：\n- 对所有 $1 \\leq i \\leq m$，有 $u_i\\neq v_i$。但数据中可能存在路线重复的单向道路，即可能存在 $1 \\leq i < j \\leq m，使得 u_i = u_j, v_i = v_j$。\n- 对每座城市都满足：至少存在一条以该该城市为起点的单向道路。\n- 每次美食节的举办时间 $t_i$ 互不相同。", "outputFormat": "输出到标准输出中。\n\n仅一行一个整数，表示小 W 通过旅行能获得的愉悦值之和的最大值。\n\n**若小 W 无法在第 $T$ 天回到城市 $1$，则输出 $-1$**。", "hint": "#### 样例 1 解释\n\n该样例为题目描述中的例子，最优旅行方案见题目描述。\n\n#### 样例 2 解释\n\n最优方案为 $1 \\to 3 \\to 4 \\to 2 \\to 3 \\to 4 \\to 1$。\n- 第 $0$ 天，小 W 从城市 $1$ 开始旅行，获得愉悦值 $3$ 并沿道路 $3$ 通行。\n- 第 $2$ 天，小 W 到达城市 $3$，获得愉悦值 $2$ 并沿道路 $4$ 通行。\n- 第 $5$ 天，小 W 到达城市 $4$，由于美食节获得愉悦值 $20 + 4$ 并沿道路 $7$ 通行。\n- 第 $6$ 天，小 W 到达城市 $2$，获得愉悦值 $1$ 并沿道路 $5$ 通行。\n- 第 $8$ 天，小 W 到达城市 $3$，获得愉悦值 $2$ 并沿道路 $4$ 通行。\n- 第 $11$ 天，小 W 到达城市 $4$，获得愉悦值 $4$ 并沿道路 $8$ 通行。\n- 第 $16$ 天，小 W 到达城市 $1$，获得愉悦值 $3$ 并结束旅行。\n- 小 W 获得的愉悦值之和为 $39$。\n\n#### 样例 3\n\n见选手目录下的 delicacy/delicacy3.in 与 delicacy/delicacy3.ans。\n\n该样例满足 $k=0$\n\n---\n\n### 测试点约束\n\n对于所有测试点：\n\n$1 \\leq n \\leq 50$，$n \\leq m \\leq 501$，$0 \\leq k \\leq 200$，$1 \\leq t_i \\leq T \\leq 10^9$。\n\n$1 \\leq w_i \\leq 5$，$1 \\leq c_i \\leq 52501$，$1 \\leq u_i, v_i, x_i \\leq n$，$1 \\leq y_i \\leq 10^9$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 |  $n$ |  $m$ |  $T$ | 特殊限制 |\n| :-: | :-:| :-: |:-:| :-:|\n|  $1\\sim 4$ |  $\\le 5$ |  $\\le 50$ |  $\\le 5$ | 无 |\n|  $5\\sim 8$ |  $\\le 50$ |  $\\le 50$ |  $\\le 52501$ | 无 |\n|  $9\\sim 10$ |  $\\le 50$ |  $\\le 50$ |  $\\le 10^9$ | A | \n|  $11\\sim 13$ |  $\\le 50$ |  $\\le 50$ |  $\\le 10^9$ |  $k=0$ |\n|  $14\\sim 15$ |  $\\le 50$ |  $\\le 50$ |  $\\le 10^9$ |  $k\\le 10$ |\n|  $16\\sim 17$ |  $\\le 50$ |  $\\le 50$ |  $\\le 10^9$ | 无 |\n|  $18\\sim 20$ |  $\\le 50$ |  $\\le 501$ |  $\\le 10^9$ | 无 |\n\n特殊限制 A：$n = m$ 且 $u_i = i,v_i = (i \\bmod n) + 1$。", "locale": "zh-CN"}}}
{"pid": "P6773", "type": "P", "difficulty": 7, "samples": [["5\n1 2\n2 3\n3 4\n3 5\n2\n1 3\n2 5", "10"], ["15\n2 1\n3 1\n4 3\n5 2\n6 3\n7 6\n8 4\n9 5\n10 7\n11 5\n12 10\n13 3\n14 9\n15 8\n6\n3 12\n5 11\n2 5\n3 13\n8 15\n1 13", "960"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "NOI", "O2优化"], "title": "[NOI2020] 命运", "background": "", "description": "**提示**：我们在题目描述的最后一段提供了一份简要的、形式化描述的题面。\n\n在遥远的未来，物理学家终于发现了时间和因果的自然规律。即使在一个人出生前，我们也可以通过理论分析知晓他或她人生的一些信息，换言之，物理学允许我们从一定程度上“预言”一个人的“命运”。\n\n简单来说，一个人的命运是一棵由时间点构成的有根树 $T$：树的根结点代表着出生，而叶结点代表着死亡。每个非叶结点 $u$ 都有一个或多个孩子 $v_1, v_2,\\dots , v_{c_u}$，表示这个人在 $u$ 所代表的时间点做出的 $c_u$ 个不同的选择可以导向的不同的可能性。形式化的，一个选择就是树上的一条边 $(u, v_i)$，其中 $u$ 是 $v_i$ 的父结点。\n\n一个人的一生是从出生（即根结点）到死亡（即某一个叶子结点）的一条不经过重复结点的路径，这条路径上任何一个包含至少一条边的子路径都是这个人的一段**人生经历**，而他或她以所有可能的方式度过一生，从而拥有的所有人生经历，都被称为**潜在的人生经历**。换言之，所有潜在的人生经历就是所有 $u$ 到 $v$ 的路径，满足 $u, v \\in T$，$u \\neq v$，并且 $u$ 是 $v$ 的祖先。在数学上，这样一个潜在的人生经历被记作有序对 $(u, v)$，树 $T$ 所有潜在的人生经历的集合记作 $\\mathcal P_T$。\n\n物理理论不仅允许我们观测代表命运的树，还能让我们分析一些潜在的人生经历是否是“重要”的。一个人所作出的每一个选择——即树上的每一条边——都可能是**重要**或**不重要**的。一段潜在的人生经历被称为重要的，当且仅当其对应的路径上存在一条边是重要的。我们可以观测到一些潜在的人生经历是重要的：换言之，我们可以观测得到一个集合 $\\mathcal Q \\subseteq \\mathcal P_T$，满足其中的所有潜在的人生经历 $(u, v) \\in \\mathcal Q$ 都是重要的。\n\n树 $T$ 的形态早已被计算确定，集合 $\\mathcal Q$ 也早已被观测得到，一个人命运的不确定性已经大大降低了。但不确定性仍然是巨大的——来计算一下吧，对于给定的树 $T$ 和集合 $\\mathcal Q$，存在多少种不同的方案确定每条边是否是重要的，使之满足所观测到的 $\\mathcal Q$ 所对应的限制：即对于任意 $(u, v) \\in \\mathcal Q$，都存在一条 $u$ 到 $v$ 路径上的边被确定为重要的。\n\n**形式化的**：给定一棵树 $T = (V, E)$ 和点对集合 $\\mathcal Q \\subseteq V \\times V$ ，满足对于所有 $(u, v) \\in \\mathcal Q$，都有 $u \\neq v$，并且 $u$ 是 $v$ 在树 $T$ 上的祖先。其中 $V$ 和 $E$ 分别代表树 $T$ 的结点集和边集。求有多少个不同的函数 $f$ : $E \\to \\{0, 1\\}$（将每条边 $e \\in E$ 的 $f(e)$ 值置为 $0$ 或 $1$），满足对于任何 $(u, v) \\in \\mathcal Q$，都存在 $u$ 到 $v$ 路径上的一条边 $e$ 使得 $f(e) = 1$。由于答案可能非常大，你只需要输出结果对 $998,244,353$（一个素数）取模的结果。\n", "inputFormat": "从标准输入读入数据。\n\n第一行包含一个正整数 $n$，表示树 $T$ 的大小，树上结点从 $1$ 到 $n$ 编号，$1$ 号结点为根结点；\n\n接下来 $n - 1$ 行每行包含空格隔开的两个数 $x_i, y_i$，满足 $1 \\leq x_i, y_i \\leq n$，表示树上的结点 $x_i$ 和 $y_i$ 之间存在一条边，但并不保证这条边的方向；\n\n接下来一行包含一个非负整数 $m$，表示所观测得到信息的条数。\n\n接下来 $m$ 行每行包含空格隔开的两个数 $u_i, v_i$，表示 $(u_i, v_i) \\in \\mathcal Q$。**请注意**：输入数据可能包含重复的信息，换言之可能存在 $i \\neq j$，满足 $u_i = u_j$ 且 $v_i = v_j$。\n\n输入数据规模和限制参见本题末尾的表格。", "outputFormat": "输出到标准输出中。\n\n输出仅一行一个整数，表示方案数对 $998, 244, 353$ 取模的结果。", "hint": "#### 样例 1 解释\n\n共有 $16$ 种方案，其中不满足题意的方案有以下 $6$ 种：\n\n- $(1, 2),(2, 3),(3, 5)$ 确定为不重要，$(3, 4)$ 确定为重要：集合 $\\mathcal Q$ 中没有限制被满足。\n- $(1, 2),(2, 3),(3, 4),(3, 5)$ 确定为不重要：集合 $\\mathcal Q$ 中没有限制被满足。\n- $(1, 2),(2, 3)$ 确定为不重要，$(3, 4),(3, 5)$ 确定为重要：集合 $\\mathcal Q$ 中 $(1, 3)$ 没被满足。\n- $(1, 2),(2, 3),(3, 4)$ 确定为不重要，$(3, 5)$ 确定为重要：集合 $\\mathcal Q$ 中 $(1, 3)$ 没被满足。\n- $(2, 3),(3, 5)$ 确定为不重要，$(1, 2),(3, 4)$ 确定为重要：集合 $\\mathcal Q$ 中 $(2, 5)$ 没被满足。\n- $(2, 3),(3, 4),(3, 5)$ 确定为不重要，$(1, 2)$ 确定为重要：集合 $\\mathcal Q$ 中 $(2, 5)$ 没被满足。\n- 其他方案下，集合 $\\mathcal Q$ 中的限制都被满足了。\n\n\n#### 样例 3\n\n见选手目录下的 destiny/destiny3.in 与 destiny/destiny3.ans。\n\n#### 样例 4\n\n见选手目录下的 destiny/destiny4.in 与 destiny/destiny4.ans。\n\n| 测试点编号 |  $n$ |  $m$ |  $T$ 为完全二叉树 |\n| :-: | :-:| :-: |:-:|\n|  $1\\sim 4$ |  $\\le 10$ |  $\\le 10$ | 否 |\n|  $5$ |  $\\le 500$ |  $\\le 15$ | 否 |\n|  $6$ |  $\\le 10^4$ |  $\\le 10$ | 否 | \n|  $7$ |  $\\le 10^5$ |  $\\le 16$ | 否 |\n|  $8$ |  $\\le 5\\times 10^5$ |  $\\le 16$ | 否 |\n|  $9$ |  $\\le 10^5$ |  $\\le 22$ | 否 |\n|  $10$ |  $\\le 5\\times 10^5$ |  $\\le 22$ | 否 |\n|  $11$ |  $\\le 600$ |  $\\le 600$ | 否 |\n|  $12$ |  $\\le 10^3$ |  $\\le 10^3$ | 否 |\n|  $13\\sim 14$ |  $\\le 2\\times 10^3$ |  $\\le 5\\times 10^5$ | 否 |\n|  $15\\sim 16$ |  $\\le 5\\times 10^5$ |  $\\le 2\\times 10^3$ | 否 |\n|  $17\\sim 18$ |  $\\le 10^5$ |  $\\le 10^5$ | 是 |\n|  $19$ |  $\\le 5\\times 10^4$ |  $\\le 10^5$ | 否 |\n|  $20$ |  $\\le 8\\times 10^4$ |  $\\le 10^5$ | 否 |\n|  $21\\sim 22$ |  $\\le 10^5$ |  $\\le 5\\times 10^5$ | 否 |\n|  $23\\sim 25$ |  $\\le 5\\times 10^5$ |  $\\le 5\\times 10^5$ | 否 |\n\n---\n\n### 测试点约束\n\n**全部数据满足**：$n \\leq 5 \\times 10^5$，$m \\leq 5 \\times 10^5$。输入构成一棵树，并且对于 $1 \\leq i \\leq m$，$u_i$ 始终为 $v_i$ 的祖先结点。\n\n**完全二叉树**：在本题中，每个非叶结点都有左右子结点，且所有叶子结点深度相同的树称为满二叉树；将满二叉树中的结点按照从上到下、从左向右的顺序编号，编号最小的若干个结点形成的树称为完全二叉树。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2020] 命运", "background": "", "description": "**提示**：我们在题目描述的最后一段提供了一份简要的、形式化描述的题面。\n\n在遥远的未来，物理学家终于发现了时间和因果的自然规律。即使在一个人出生前，我们也可以通过理论分析知晓他或她人生的一些信息，换言之，物理学允许我们从一定程度上“预言”一个人的“命运”。\n\n简单来说，一个人的命运是一棵由时间点构成的有根树 $T$：树的根结点代表着出生，而叶结点代表着死亡。每个非叶结点 $u$ 都有一个或多个孩子 $v_1, v_2,\\dots , v_{c_u}$，表示这个人在 $u$ 所代表的时间点做出的 $c_u$ 个不同的选择可以导向的不同的可能性。形式化的，一个选择就是树上的一条边 $(u, v_i)$，其中 $u$ 是 $v_i$ 的父结点。\n\n一个人的一生是从出生（即根结点）到死亡（即某一个叶子结点）的一条不经过重复结点的路径，这条路径上任何一个包含至少一条边的子路径都是这个人的一段**人生经历**，而他或她以所有可能的方式度过一生，从而拥有的所有人生经历，都被称为**潜在的人生经历**。换言之，所有潜在的人生经历就是所有 $u$ 到 $v$ 的路径，满足 $u, v \\in T$，$u \\neq v$，并且 $u$ 是 $v$ 的祖先。在数学上，这样一个潜在的人生经历被记作有序对 $(u, v)$，树 $T$ 所有潜在的人生经历的集合记作 $\\mathcal P_T$。\n\n物理理论不仅允许我们观测代表命运的树，还能让我们分析一些潜在的人生经历是否是“重要”的。一个人所作出的每一个选择——即树上的每一条边——都可能是**重要**或**不重要**的。一段潜在的人生经历被称为重要的，当且仅当其对应的路径上存在一条边是重要的。我们可以观测到一些潜在的人生经历是重要的：换言之，我们可以观测得到一个集合 $\\mathcal Q \\subseteq \\mathcal P_T$，满足其中的所有潜在的人生经历 $(u, v) \\in \\mathcal Q$ 都是重要的。\n\n树 $T$ 的形态早已被计算确定，集合 $\\mathcal Q$ 也早已被观测得到，一个人命运的不确定性已经大大降低了。但不确定性仍然是巨大的——来计算一下吧，对于给定的树 $T$ 和集合 $\\mathcal Q$，存在多少种不同的方案确定每条边是否是重要的，使之满足所观测到的 $\\mathcal Q$ 所对应的限制：即对于任意 $(u, v) \\in \\mathcal Q$，都存在一条 $u$ 到 $v$ 路径上的边被确定为重要的。\n\n**形式化的**：给定一棵树 $T = (V, E)$ 和点对集合 $\\mathcal Q \\subseteq V \\times V$ ，满足对于所有 $(u, v) \\in \\mathcal Q$，都有 $u \\neq v$，并且 $u$ 是 $v$ 在树 $T$ 上的祖先。其中 $V$ 和 $E$ 分别代表树 $T$ 的结点集和边集。求有多少个不同的函数 $f$ : $E \\to \\{0, 1\\}$（将每条边 $e \\in E$ 的 $f(e)$ 值置为 $0$ 或 $1$），满足对于任何 $(u, v) \\in \\mathcal Q$，都存在 $u$ 到 $v$ 路径上的一条边 $e$ 使得 $f(e) = 1$。由于答案可能非常大，你只需要输出结果对 $998,244,353$（一个素数）取模的结果。\n", "inputFormat": "从标准输入读入数据。\n\n第一行包含一个正整数 $n$，表示树 $T$ 的大小，树上结点从 $1$ 到 $n$ 编号，$1$ 号结点为根结点；\n\n接下来 $n - 1$ 行每行包含空格隔开的两个数 $x_i, y_i$，满足 $1 \\leq x_i, y_i \\leq n$，表示树上的结点 $x_i$ 和 $y_i$ 之间存在一条边，但并不保证这条边的方向；\n\n接下来一行包含一个非负整数 $m$，表示所观测得到信息的条数。\n\n接下来 $m$ 行每行包含空格隔开的两个数 $u_i, v_i$，表示 $(u_i, v_i) \\in \\mathcal Q$。**请注意**：输入数据可能包含重复的信息，换言之可能存在 $i \\neq j$，满足 $u_i = u_j$ 且 $v_i = v_j$。\n\n输入数据规模和限制参见本题末尾的表格。", "outputFormat": "输出到标准输出中。\n\n输出仅一行一个整数，表示方案数对 $998, 244, 353$ 取模的结果。", "hint": "#### 样例 1 解释\n\n共有 $16$ 种方案，其中不满足题意的方案有以下 $6$ 种：\n\n- $(1, 2),(2, 3),(3, 5)$ 确定为不重要，$(3, 4)$ 确定为重要：集合 $\\mathcal Q$ 中没有限制被满足。\n- $(1, 2),(2, 3),(3, 4),(3, 5)$ 确定为不重要：集合 $\\mathcal Q$ 中没有限制被满足。\n- $(1, 2),(2, 3)$ 确定为不重要，$(3, 4),(3, 5)$ 确定为重要：集合 $\\mathcal Q$ 中 $(1, 3)$ 没被满足。\n- $(1, 2),(2, 3),(3, 4)$ 确定为不重要，$(3, 5)$ 确定为重要：集合 $\\mathcal Q$ 中 $(1, 3)$ 没被满足。\n- $(2, 3),(3, 5)$ 确定为不重要，$(1, 2),(3, 4)$ 确定为重要：集合 $\\mathcal Q$ 中 $(2, 5)$ 没被满足。\n- $(2, 3),(3, 4),(3, 5)$ 确定为不重要，$(1, 2)$ 确定为重要：集合 $\\mathcal Q$ 中 $(2, 5)$ 没被满足。\n- 其他方案下，集合 $\\mathcal Q$ 中的限制都被满足了。\n\n\n#### 样例 3\n\n见选手目录下的 destiny/destiny3.in 与 destiny/destiny3.ans。\n\n#### 样例 4\n\n见选手目录下的 destiny/destiny4.in 与 destiny/destiny4.ans。\n\n| 测试点编号 |  $n$ |  $m$ |  $T$ 为完全二叉树 |\n| :-: | :-:| :-: |:-:|\n|  $1\\sim 4$ |  $\\le 10$ |  $\\le 10$ | 否 |\n|  $5$ |  $\\le 500$ |  $\\le 15$ | 否 |\n|  $6$ |  $\\le 10^4$ |  $\\le 10$ | 否 | \n|  $7$ |  $\\le 10^5$ |  $\\le 16$ | 否 |\n|  $8$ |  $\\le 5\\times 10^5$ |  $\\le 16$ | 否 |\n|  $9$ |  $\\le 10^5$ |  $\\le 22$ | 否 |\n|  $10$ |  $\\le 5\\times 10^5$ |  $\\le 22$ | 否 |\n|  $11$ |  $\\le 600$ |  $\\le 600$ | 否 |\n|  $12$ |  $\\le 10^3$ |  $\\le 10^3$ | 否 |\n|  $13\\sim 14$ |  $\\le 2\\times 10^3$ |  $\\le 5\\times 10^5$ | 否 |\n|  $15\\sim 16$ |  $\\le 5\\times 10^5$ |  $\\le 2\\times 10^3$ | 否 |\n|  $17\\sim 18$ |  $\\le 10^5$ |  $\\le 10^5$ | 是 |\n|  $19$ |  $\\le 5\\times 10^4$ |  $\\le 10^5$ | 否 |\n|  $20$ |  $\\le 8\\times 10^4$ |  $\\le 10^5$ | 否 |\n|  $21\\sim 22$ |  $\\le 10^5$ |  $\\le 5\\times 10^5$ | 否 |\n|  $23\\sim 25$ |  $\\le 5\\times 10^5$ |  $\\le 5\\times 10^5$ | 否 |\n\n---\n\n### 测试点约束\n\n**全部数据满足**：$n \\leq 5 \\times 10^5$，$m \\leq 5 \\times 10^5$。输入构成一棵树，并且对于 $1 \\leq i \\leq m$，$u_i$ 始终为 $v_i$ 的祖先结点。\n\n**完全二叉树**：在本题中，每个非叶结点都有左右子结点，且所有叶子结点深度相同的树称为满二叉树；将满二叉树中的结点按照从上到下、从左向右的顺序编号，编号最小的若干个结点形成的树称为完全二叉树。\n", "locale": "zh-CN"}}}
{"pid": "P6774", "type": "P", "difficulty": 7, "samples": [["9 9\n9 8 7 6 2 4 5 3 1\n4 9 3 6\n2 9 1 8\n3 8 2 4\n3 9 2 7\n2 8 1 6\n1 9 1 9\n1 3 5 7\n2 3 3 3\n6 6 6 6", "1\n4\n2\n4\n4\n4\n0\n0\n0"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "NOI", "O2优化"], "title": "[NOI2020] 时代的眼泪", "background": "", "description": "小 L 喜欢与智者交流讨论，而智者也经常为小 L 出些思考题。\n\n这天智者又为小 L 构思了一个问题。智者首先将时空抽象为了一个二维平面，进而将一个事件抽象为该平面上的一个点，将一个时代抽象为该平面上的一个矩形。\n\n为了方便，下面记 $(a, b) \\leq (c, d)$ 表示平面上两个点 $(a, b),(c, d)$ 满足 $a \\leq c$，$b \\leq d$。\n\n更具体地，智者给定了 $n$ 个**事件**，他们用平面上 $n$ 个不同的点 $\\{(x_i, y_i)\\}^n_{i=1}$ 来表示；智者还给定了 $m$ 个**时代**，每个时代用平面上一个矩形 $(r_{i,1}, r_{i,2}, c_{i,1}, c_{i,2})$ 来表示，其中 $(r_{i,1}, c_{i,1})$ 是矩形的左下角，$(r_{i,2}, c_{i,2})$ 是矩形的右上角，保证 $(r_{i,1}, c_{i,1}) \\leq (r_{i,2}, c_{i,2})$。我们称时代 $i$ 包含了事件 $j$ 当且仅当 $(r_{i,1}, c_{i,1}) \\leq (x_j, y_j ) \\leq (r_{i,2}, c_{i,2})$。\n\n智者认为若两个事件 $i, j$ 满足 $(x_i, y_i) \\leq (x_j, y_j)$，则这两个事件形成了一次**遗憾**。而对一个时代内包含的所有事件，它们所形成的遗憾被称为这个**时代的眼泪**，而形成的遗憾次数则称为该时代的眼泪的大小。现在智者想要小 L 计算**每个时代的眼泪的大小**。\n\n小 L 明白，如果他回答不了这个问题，他也将成为时代的眼泪，请你帮帮他。\n", "inputFormat": "从标准输入中读入数据。\n\n第一行两个整数 $n, m$，分别表示事件数与时代数。\n\n第二行 $n$ 个整数 $p_i$，其中第 $i$ 个数表示事件 $i$ 在平面上的坐标为 $(i, p_i)$。保证 $p_i$ 为一个 $1$ 到 $n$ 的排列。\n\n之后 $m$ 行，每行四个整数 $r_{i,1}, r_{i,2}, c_{i,1}, c_{i,2}$，表示每个时代对应的矩形。\n", "outputFormat": "输出到文件标准输出中。\n\n输出 $m$ 行，每行包含一个整数，第 $i$ 行输出第 $i$ 个时代的眼泪的大小。", "hint": "#### 样例 1 解释\n\n对于时代 $1$，包含的遗憾有 $(6, 7)$（即事件 $6$ 与事件 $7$ 形成的遗憾，下同）。\n\n对于时代 $2$，包含的遗憾有 $(5, 6),(6, 7),(5, 7),(5, 8)$。\n\n对于时代 $3$，包含的遗憾有 $(5, 6),(5, 8)$。\n\n对于时代 $4$，包含的遗憾有 $(5, 6),(6, 7),(5, 7),(5, 8)$。\n\n对于时代 $5$，包含的遗憾有 $(5, 6),(6, 7),(5, 7),(5, 8)$。\n\n对于时代 $6$，包含的遗憾有 $(5, 6),(6, 7),(5, 7),(5, 8)$。\n\n对于时代 $7, 8, 9$，它们均不包含任何遗憾。\n\n\n#### 样例 2\n\n见选手目录下的 tears/tears2.in 与 tears/tears2.ans。\n\n该样例满足特殊限制 A（具体限制见测试点约束）。\n\n\n#### 样例 3\n\n见选手目录下的 tears/tears3.in 与 tears/tears3.ans。\n\n该样例满足特殊限制 B（具体限制见测试点约束）。\n\n对于所有测试点：$1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\leq r_{i,1}, r_{i,2}, c_{i,1}, c_{i,2} \\leq n$。\n\n---\n\n### 测试点约束\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 |  $n\\le $ |  $m\\le $ | 特殊限制 |\n| :-: | :-: | :-: | :-: |\n|  $1\\sim 3$ |  $10$ |  $10$ | 无 |\n|  $4$ |  $3\\times 10^3$ |  $3\\times 10^3$ | 无 |\n|  $5$ |  $4\\times 10^3$ |  $4\\times 10^3$ | 无 |\n|  $6$ |  $5\\times 10^3$ |  $5\\times 10^3$ | 无 |\n|  $7$ |  $2.5\\times 10^4$ |  $5\\times 10^4$ |  $\\text{A}$ |\n|  $8$ |  $5\\times 10^4$ |  $10^5$ |  $\\text{A}$ |\n|  $9$ |  $7.5\\times 10^4$ |  $1.5\\times 10^5$ |  $\\text{A}$ |\n|  $10$ |  $10^5$ |  $2\\times 10^5$ |  $\\text{A}$ |\n|  $11$ |  $6\\times 10^4$ |  $1.2\\times 10^5$ |  $\\text{B}$ |\n|  $12$ |  $8\\times 10^4$ |  $1.6\\times 10^5$ |  $\\text{B}$ |\n|  $13$ |  $10^5$ |  $2\\times 10^5$ |  $\\text{B}$ |\n|  $14$ |  $2\\times 10^4$ |  $4\\times 10^4$ | 无 |\n|  $15$ |  $3\\times 10^4$ |  $6\\times 10^4$ | 无 |\n|  $16$ |  $4\\times 10^4$ |  $8\\times 10^4$ | 无 |\n|  $17$ |  $5\\times 10^4$ |  $10^5$ | 无 |\n|  $18$ |  $6\\times 10^4$ |  $1.2\\times 10^5$ | 无 |\n|  $19$ |  $7\\times 10^4$ |  $1.4\\times 10^5$ | 无 |\n|  $20\\sim 22$ |  $10^5$ |  $2\\times 10^5$ |  $\\text{C}$ |\n|  $23\\sim 25$ |  $10^5$ |  $2\\times 10^5$ | 无 |\n\n特殊限制 A：对于所有时代 $i$ 有 $c_{i,1} = 1, c_{i,2} = n$。\n\n特殊限制 B：任意两个不同时代所代表的矩形，它们要么是包含关系（一个矩形在另一个矩形内，边界允许重合），要么是相离关系（两矩形不包含共同点，边界不允许重合）。\n\n特殊限制 C：最多有 $50$ 对事件 $(i, j)(1 \\leq i < j \\leq n)$ 不满足 $(i, p_i) \\leq (j, p_j)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2020] 时代的眼泪", "background": "", "description": "小 L 喜欢与智者交流讨论，而智者也经常为小 L 出些思考题。\n\n这天智者又为小 L 构思了一个问题。智者首先将时空抽象为了一个二维平面，进而将一个事件抽象为该平面上的一个点，将一个时代抽象为该平面上的一个矩形。\n\n为了方便，下面记 $(a, b) \\leq (c, d)$ 表示平面上两个点 $(a, b),(c, d)$ 满足 $a \\leq c$，$b \\leq d$。\n\n更具体地，智者给定了 $n$ 个**事件**，他们用平面上 $n$ 个不同的点 $\\{(x_i, y_i)\\}^n_{i=1}$ 来表示；智者还给定了 $m$ 个**时代**，每个时代用平面上一个矩形 $(r_{i,1}, r_{i,2}, c_{i,1}, c_{i,2})$ 来表示，其中 $(r_{i,1}, c_{i,1})$ 是矩形的左下角，$(r_{i,2}, c_{i,2})$ 是矩形的右上角，保证 $(r_{i,1}, c_{i,1}) \\leq (r_{i,2}, c_{i,2})$。我们称时代 $i$ 包含了事件 $j$ 当且仅当 $(r_{i,1}, c_{i,1}) \\leq (x_j, y_j ) \\leq (r_{i,2}, c_{i,2})$。\n\n智者认为若两个事件 $i, j$ 满足 $(x_i, y_i) \\leq (x_j, y_j)$，则这两个事件形成了一次**遗憾**。而对一个时代内包含的所有事件，它们所形成的遗憾被称为这个**时代的眼泪**，而形成的遗憾次数则称为该时代的眼泪的大小。现在智者想要小 L 计算**每个时代的眼泪的大小**。\n\n小 L 明白，如果他回答不了这个问题，他也将成为时代的眼泪，请你帮帮他。\n", "inputFormat": "从标准输入中读入数据。\n\n第一行两个整数 $n, m$，分别表示事件数与时代数。\n\n第二行 $n$ 个整数 $p_i$，其中第 $i$ 个数表示事件 $i$ 在平面上的坐标为 $(i, p_i)$。保证 $p_i$ 为一个 $1$ 到 $n$ 的排列。\n\n之后 $m$ 行，每行四个整数 $r_{i,1}, r_{i,2}, c_{i,1}, c_{i,2}$，表示每个时代对应的矩形。\n", "outputFormat": "输出到文件标准输出中。\n\n输出 $m$ 行，每行包含一个整数，第 $i$ 行输出第 $i$ 个时代的眼泪的大小。", "hint": "#### 样例 1 解释\n\n对于时代 $1$，包含的遗憾有 $(6, 7)$（即事件 $6$ 与事件 $7$ 形成的遗憾，下同）。\n\n对于时代 $2$，包含的遗憾有 $(5, 6),(6, 7),(5, 7),(5, 8)$。\n\n对于时代 $3$，包含的遗憾有 $(5, 6),(5, 8)$。\n\n对于时代 $4$，包含的遗憾有 $(5, 6),(6, 7),(5, 7),(5, 8)$。\n\n对于时代 $5$，包含的遗憾有 $(5, 6),(6, 7),(5, 7),(5, 8)$。\n\n对于时代 $6$，包含的遗憾有 $(5, 6),(6, 7),(5, 7),(5, 8)$。\n\n对于时代 $7, 8, 9$，它们均不包含任何遗憾。\n\n\n#### 样例 2\n\n见选手目录下的 tears/tears2.in 与 tears/tears2.ans。\n\n该样例满足特殊限制 A（具体限制见测试点约束）。\n\n\n#### 样例 3\n\n见选手目录下的 tears/tears3.in 与 tears/tears3.ans。\n\n该样例满足特殊限制 B（具体限制见测试点约束）。\n\n对于所有测试点：$1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\leq r_{i,1}, r_{i,2}, c_{i,1}, c_{i,2} \\leq n$。\n\n---\n\n### 测试点约束\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 |  $n\\le $ |  $m\\le $ | 特殊限制 |\n| :-: | :-: | :-: | :-: |\n|  $1\\sim 3$ |  $10$ |  $10$ | 无 |\n|  $4$ |  $3\\times 10^3$ |  $3\\times 10^3$ | 无 |\n|  $5$ |  $4\\times 10^3$ |  $4\\times 10^3$ | 无 |\n|  $6$ |  $5\\times 10^3$ |  $5\\times 10^3$ | 无 |\n|  $7$ |  $2.5\\times 10^4$ |  $5\\times 10^4$ |  $\\text{A}$ |\n|  $8$ |  $5\\times 10^4$ |  $10^5$ |  $\\text{A}$ |\n|  $9$ |  $7.5\\times 10^4$ |  $1.5\\times 10^5$ |  $\\text{A}$ |\n|  $10$ |  $10^5$ |  $2\\times 10^5$ |  $\\text{A}$ |\n|  $11$ |  $6\\times 10^4$ |  $1.2\\times 10^5$ |  $\\text{B}$ |\n|  $12$ |  $8\\times 10^4$ |  $1.6\\times 10^5$ |  $\\text{B}$ |\n|  $13$ |  $10^5$ |  $2\\times 10^5$ |  $\\text{B}$ |\n|  $14$ |  $2\\times 10^4$ |  $4\\times 10^4$ | 无 |\n|  $15$ |  $3\\times 10^4$ |  $6\\times 10^4$ | 无 |\n|  $16$ |  $4\\times 10^4$ |  $8\\times 10^4$ | 无 |\n|  $17$ |  $5\\times 10^4$ |  $10^5$ | 无 |\n|  $18$ |  $6\\times 10^4$ |  $1.2\\times 10^5$ | 无 |\n|  $19$ |  $7\\times 10^4$ |  $1.4\\times 10^5$ | 无 |\n|  $20\\sim 22$ |  $10^5$ |  $2\\times 10^5$ |  $\\text{C}$ |\n|  $23\\sim 25$ |  $10^5$ |  $2\\times 10^5$ | 无 |\n\n特殊限制 A：对于所有时代 $i$ 有 $c_{i,1} = 1, c_{i,2} = n$。\n\n特殊限制 B：任意两个不同时代所代表的矩形，它们要么是包含关系（一个矩形在另一个矩形内，边界允许重合），要么是相离关系（两矩形不包含共同点，边界不允许重合）。\n\n特殊限制 C：最多有 $50$ 对事件 $(i, j)(1 \\leq i < j \\leq n)$ 不满足 $(i, p_i) \\leq (j, p_j)$。", "locale": "zh-CN"}}}
{"pid": "P6775", "type": "P", "difficulty": 7, "samples": [["4\n1 1 10\n10\n4 3 100\n80 30 90 100\n5 3 1000\n200 400 500 900 1000\n6 4 100\n25 30 50 80 95 120", "1 10\n1 80 2 20\n2 10 3 90\n4 100\n-1\n1 5 5 95\n1 20 4 80\n2 30 6 70\n3 50 6 50"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "NOI", "Special Judge", "O2优化"], "title": "[NOI2020] 制作菜品", "background": "", "description": "厨师准备给小朋友们制作 $m$ 道菜，每道菜均使用 $k$ 克原材料。为此，厨师购入了 $n$ 种原材料，原材料从 $1$ 到 $n$ 编号，第 $i$ 种原材料的质量为 $d_i$ 克。$n$ 种原材料的**质量之和恰好为 $m \\times k$ 克**，其中 $d_i$ 与 $k$ 都是**正整数**。\n\n制作菜品时，一种原材料可以被用于多道菜，但为了让菜品的味道更纯粹，厨师打算每道菜**至多使用 $2$ 种**原材料。现在请你判断是否存在一种满足要求的制作方案。更具体地，方案应满足下列要求：\n- 共做出 $m$ 道菜。\n- 每道菜至多使用 $2$ 种原材料。\n- 每道菜恰好使用 $k$ 克原材料。\n- 每道菜使用的每种原材料的质量都为正整数克。\n- $n$ 种原材料都被恰好用完。\n\n若存在满足要求的制作方案，你还应该给出一种具体的制作方案。", "inputFormat": "**本题单个测试点包含多组测试数据**。\n\n第一行一个整数 $T$ 表示数据组数。对于每组数据：\n- 第一行三个正整数 $n, m, k$ 分别表示原材料种数、需要制作的菜品道数、每道菜品需使用的原材料的质量。\n- 第二行 $n$ 个整数，第 $i$ 个整数表示第 $i$ 种原材料的质量 $d_i$。", "outputFormat": "对于每组测试数据：\n- **若不存在满足要求的制作方案，则输出一行一个整数 $-1$**;\n- 否则你需要输出 $m$ 行，每行表示一道菜品的制作方案，根据使用的原材料种数，格式为下列两种之一：\n  - 依次输出一行两个整数 $i$ 和 $x$，表示该道菜使用 $x$ 克第 $i$ 种原材料制作。你应保证 $1 \\leq i \\leq n$，$x = k$。\n  - 依次输出一行四个整数 $i$、$x$、$j$ 和 $y$，表示该道菜使用 $x$ 克第 $i$ 种原材料与 $y$ 克第 $j$ 种原材料制作。你应保证$1 \\leq i, j \\leq n$，$i \\not= j$，$x + y = k$，$x, y > 0$。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。\n\n你应保证方案输出的格式正确，且同一行中相邻的两个数使用单个空格分隔，除此之外你的输出中**不应包含其他多余字符**。", "hint": "#### 样例 1 解释\n\n对于第二组数据，一种满足要求的制作方案为：\n- 使用 $80$ 克原材料 $1$ 与 $20$ 克原材料 $2$ 做第一道菜。\n- 使用 $10$ 克原材料 $2$ 与 $90$ 克原材料 $3$ 做第二道菜。\n- 使用 $100$ 克原材料 $4$ 做第三道菜。\n\n#### 样例 2\n\n见选手目录下的 dish/dish2.in 与 dish/dish2.ans。\n\n#### 样例 3\n\n见选手目录下的 dish/dish3.in 与 dish/dish3.ans。\n\n---\n\n### 测试点约束\n\n对于所有测试点：\n$1 \\leq T \\leq 10$，$1 \\leq n \\leq 500$，$n - 2 \\leq m \\leq 5000$，$m \\geq 1$，$1 \\leq k \\leq 5000$，$\\sum_{i=1}^{n}d_i = m \\times k$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 |  $n$ |  $m$ |  $k$ |\n| :-: | :-: | :-: | :-: |\n|  $1\\sim 3$ |  $\\le 4$ |  $\\le 4$ |  $\\le 50$ |\n|  $4\\sim 5$ |  $\\le 10$ |  $\\le 10$ |  $\\le 5\\times 10^3$ |\n|  $6\\sim 7$ |  $\\le 500$ |  $=n-1$ |  $\\le 5\\times 10^3$ |\n|  $8\\sim 9$ |  $\\le 500$ |  $n-1\\le m\\le 5\\times 10^3$ |  $\\le 5\\times 10^3$ |\n|  $10$ |  $\\le 25$ |  $\\le 5\\times 10^3$ |  $\\le 5\\times 10^3$ |\n|  $11\\sim 12$ |  $\\le 25$ |  $\\le 5\\times 10^3$ |  $\\le 500$ |\n|  $13\\sim 14$ |  $\\le 50$ |  $\\le 5\\times 10^3$ |  $\\le 500$ |\n|  $15\\sim 17$ |  $\\le 100$ |  $\\le 5\\times 10^3$ |  $\\le 5\\times 10^3$ |\n|  $18\\sim 20$ |  $\\le 500$ | $\\le 5\\times 10^3$ |  $\\le 5\\times 10^3$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2020] 制作菜品", "background": "", "description": "厨师准备给小朋友们制作 $m$ 道菜，每道菜均使用 $k$ 克原材料。为此，厨师购入了 $n$ 种原材料，原材料从 $1$ 到 $n$ 编号，第 $i$ 种原材料的质量为 $d_i$ 克。$n$ 种原材料的**质量之和恰好为 $m \\times k$ 克**，其中 $d_i$ 与 $k$ 都是**正整数**。\n\n制作菜品时，一种原材料可以被用于多道菜，但为了让菜品的味道更纯粹，厨师打算每道菜**至多使用 $2$ 种**原材料。现在请你判断是否存在一种满足要求的制作方案。更具体地，方案应满足下列要求：\n- 共做出 $m$ 道菜。\n- 每道菜至多使用 $2$ 种原材料。\n- 每道菜恰好使用 $k$ 克原材料。\n- 每道菜使用的每种原材料的质量都为正整数克。\n- $n$ 种原材料都被恰好用完。\n\n若存在满足要求的制作方案，你还应该给出一种具体的制作方案。", "inputFormat": "**本题单个测试点包含多组测试数据**。\n\n第一行一个整数 $T$ 表示数据组数。对于每组数据：\n- 第一行三个正整数 $n, m, k$ 分别表示原材料种数、需要制作的菜品道数、每道菜品需使用的原材料的质量。\n- 第二行 $n$ 个整数，第 $i$ 个整数表示第 $i$ 种原材料的质量 $d_i$。", "outputFormat": "对于每组测试数据：\n- **若不存在满足要求的制作方案，则输出一行一个整数 $-1$**;\n- 否则你需要输出 $m$ 行，每行表示一道菜品的制作方案，根据使用的原材料种数，格式为下列两种之一：\n  - 依次输出一行两个整数 $i$ 和 $x$，表示该道菜使用 $x$ 克第 $i$ 种原材料制作。你应保证 $1 \\leq i \\leq n$，$x = k$。\n  - 依次输出一行四个整数 $i$、$x$、$j$ 和 $y$，表示该道菜使用 $x$ 克第 $i$ 种原材料与 $y$ 克第 $j$ 种原材料制作。你应保证$1 \\leq i, j \\leq n$，$i \\not= j$，$x + y = k$，$x, y > 0$。\n\n本题使用**自定义校验器**检验你的答案是否正确，因此若有多种满足条件的方案，你只需要输出**任意一种**。\n\n你应保证方案输出的格式正确，且同一行中相邻的两个数使用单个空格分隔，除此之外你的输出中**不应包含其他多余字符**。", "hint": "#### 样例 1 解释\n\n对于第二组数据，一种满足要求的制作方案为：\n- 使用 $80$ 克原材料 $1$ 与 $20$ 克原材料 $2$ 做第一道菜。\n- 使用 $10$ 克原材料 $2$ 与 $90$ 克原材料 $3$ 做第二道菜。\n- 使用 $100$ 克原材料 $4$ 做第三道菜。\n\n#### 样例 2\n\n见选手目录下的 dish/dish2.in 与 dish/dish2.ans。\n\n#### 样例 3\n\n见选手目录下的 dish/dish3.in 与 dish/dish3.ans。\n\n---\n\n### 测试点约束\n\n对于所有测试点：\n$1 \\leq T \\leq 10$，$1 \\leq n \\leq 500$，$n - 2 \\leq m \\leq 5000$，$m \\geq 1$，$1 \\leq k \\leq 5000$，$\\sum_{i=1}^{n}d_i = m \\times k$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 |  $n$ |  $m$ |  $k$ |\n| :-: | :-: | :-: | :-: |\n|  $1\\sim 3$ |  $\\le 4$ |  $\\le 4$ |  $\\le 50$ |\n|  $4\\sim 5$ |  $\\le 10$ |  $\\le 10$ |  $\\le 5\\times 10^3$ |\n|  $6\\sim 7$ |  $\\le 500$ |  $=n-1$ |  $\\le 5\\times 10^3$ |\n|  $8\\sim 9$ |  $\\le 500$ |  $n-1\\le m\\le 5\\times 10^3$ |  $\\le 5\\times 10^3$ |\n|  $10$ |  $\\le 25$ |  $\\le 5\\times 10^3$ |  $\\le 5\\times 10^3$ |\n|  $11\\sim 12$ |  $\\le 25$ |  $\\le 5\\times 10^3$ |  $\\le 500$ |\n|  $13\\sim 14$ |  $\\le 50$ |  $\\le 5\\times 10^3$ |  $\\le 500$ |\n|  $15\\sim 17$ |  $\\le 100$ |  $\\le 5\\times 10^3$ |  $\\le 5\\times 10^3$ |\n|  $18\\sim 20$ |  $\\le 500$ | $\\le 5\\times 10^3$ |  $\\le 5\\times 10^3$ |", "locale": "zh-CN"}}}
{"pid": "P6776", "type": "P", "difficulty": 7, "samples": [["1\n1\n1\n0 0", "Almost Complete"], ["1\n3\n3\n2 3\n0 0\n0 0\n2\n2 0\n0 0\n2\n0 2\n0 0", "Almost Complete"], ["1\n2\n3\n2 3\n0 0\n0 0\n2\n2 0\n0 0", "No"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "NOI", "O2优化"], "title": "[NOI2020] 超现实树", "background": "下课铃声响起，机房里的两位女生从座位上站起来。（下面用 $\\mathbf{X1}$, $\\mathbf{X2}$ 代指两人）\n\n$\\mathbf{X2}$：省选前的集训真难熬啊…… 听课、考试、讲评、补题 —— 对于现在的我来说，即使在梦里想到一道数据结构题，也会不由自主地开始思考吧。\n\n$\\mathbf{X1}$：重复训练对我来说似乎并不是什么负担，但我确实感觉到解决题目带来的愉悦感在最近逐渐减弱了。也许我们需要一些精神上的 “刺激”：一些不拘泥于繁复技术的智力游戏，来让我们找回对于数学和算法的兴趣。\n\n$\\mathbf{X2}$：咦，我好像收到了一封用英文写的短信，似乎是…… 数学书上的一些片段。", "description": "$\\mathbf{X1}$：我来翻译一下短信的内容。\n\n> 定义：本文所述的树是归纳定义的：单独的结点构成一棵树，以一棵树作为左（或右）孩子可以构成一棵树，以两棵树分别作为左、右孩子也可以构成一棵树。仅由以上规则用有限步生成的所有结构被称为树。\n\n$\\mathbf{X2}$：也就是说，这里所说的树是指**非空、有根、区分左右孩子的二叉树**。\n\n$\\mathbf{X1}$：的确如此。接下来书上定义了两棵树的同构。\n\n> 定义：称两棵树 $T$, $T^{\\prime}$ 同构，记做 $T \\equiv T^{\\prime}$，由以下四条规则定义：\n> 1. 由单独结点构成的树是彼此同构的；\n> 2. 如果两棵树的根结点均只有左子树，并且它们的左子树同构，那么这两棵树是同构的；\n> 3. 如果两棵树的根结点均只有右子树，并且它们的右子树同构，那么这两棵树是同构的；\n> 4. 如果两棵树的根结点均有左、右子树，并且它们的左、右子树分别对应同构，那么这两棵树是同构的。\n> \n> 很明显，同构关系构成了所有树上的一个等价关系。为了方便，我们将同构的树看作相同的树。\n\n$\\mathbf{X2}$：将同构的树看成相同的树就是说树的结点是彼此相同的。简单地说，两棵树同构当且仅当**他们在结点无标号、区分左右孩子的意义下相同**；我们说两棵树不同，当且仅当它们不同构。\n\n$\\mathbf{X1}$：书里还定义了树的**叶子**：和通常的定义一样，叶子指**没有任何孩子的结点**。\n\n$\\mathbf{X2}$：这和我们熟悉的定义完全一致。嘛，数学家真是有点啰嗦…… 恐怕只有 $\\mathbf{X3}$ 那种家伙会喜欢这种做派吧。\n\n$\\mathbf{X1}$：我倒是对此不太反感 —— 比起基于经验的 “直觉”，准确的定义和严谨的证明还是更加让人安心。你看，下一个定义就没有那么直观了。\n\n> 定义：称一棵树 $T$ **单步替换**成为 $T^{\\prime}$，如果将 $T$ 的某一**叶子结点**替换为另一棵树 $T^{\\prime \\prime}$ 得到的树与 $T^{\\prime}$ 同构，记做 $T \\rightarrow T^{\\prime}$；称一棵树 $T$ **替换**成为 $T^{\\prime}$，记做 $T \\rightarrow^{\\star} T^{\\prime}$，如果存在自然数 $n \\geq 1$ 和树 $T_{1}, T_{2}, \\ldots, T_{n}$，使得 $T \\equiv T_{1} \\rightarrow T_{2} \\rightarrow \\cdots \\rightarrow T_{n} \\equiv T^{\\prime}$。\n\n$\\mathbf{X2}$：我来想想…… 所谓替换，就是删掉某个叶子结点并在对应的位置放入另一棵树，就像那个叶子结点 “长出了” 一个更大的子树一样；一棵树替换成为另一棵树，说明它可以经由**零次、一次或多次**单步替换得到那棵树。哦…… 我明白了！举例来说，任何一棵树都可以替换成它本身，换言之对于树 $T$，都有 $T \\rightarrow^{\\star} T^{\\prime}$。下面这个图片可以帮助理解单步替换和替换的含义。\n\n![img](https://cdn.luogu.com.cn/upload/image_hosting/0o4pfqui.png)\n\n$\\mathbf{X1}$：你说得对。特别地，任何一棵树都可以替换得到无穷多棵不同的树，并且仅有一个结点构成的树可以替换得到任意其他的树。书上也有定义这样的东西。\n\n> 定义：对于一棵树 $T$，定义 $\\operatorname{grow}(T)$ 表示 T 所能替换构成的树的集合，即 $\\operatorname{grow}(T)=\\left\\{T^{\\prime} \\mid T \\rightarrow^{\\star} T^{\\prime}\\right\\}$。更近一步，如果 $\\mathscr{T}=\\left\\{T_{1}, T_{2}, \\ldots, T_{n}\\right\\}$ 是一个树的有限集合，定义 $\\operatorname{grow}(\\mathscr{T})$ 为所有 $\\operatorname{grow}\\left(T_{i}\\right)$ 的并集，其中 $i=1,2, \\ldots, n$。即 \n> $$\\operatorname{grow}(\\mathscr{T})=\\bigcup_{T_{i} \\in \\mathscr{T}} \\operatorname{grow}\\left(T_{i}\\right)$$\n\n$\\mathbf{X2}$：我们把 $\\operatorname{grow}(\\mathscr{T})$ 称作树的集合 $\\mathscr{T}$ **所生长得到的集合**吧 —— 也就是说，树的集合 $\\mathscr{T}$ 所生长得到的集合包含所有可以被某个 $T \\in \\mathscr{T}$ 替换得到的树。不妨把树的集合叫做**树林**。不太严谨地说，一个树林所生长得到的新树林就是其中所有树、以所有可能的方式生长得到的树林。显而易见，一个非空树林所生长得到的树林都是无穷树林。但这个无穷树林，或者说 $\\operatorname{grow}(\\mathscr{T})$，并不一定包含所有的树 —— 更进一步，它甚至不一定包含 “几乎所有” 的树。\n\n$\\mathbf{X1}$：让我来补充一下：我们称一个树林是**几乎完备**的（或称**几乎包含了所有的树**），如果仅有有限多的树不在其中。对于一个有限树林 $\\mathscr{T}$，$\\operatorname{grow}(\\mathscr{T})$ 要么包含了所有的树，要么包含了几乎所有的树，要么存在无穷多棵树不在其中。如果这是一道 OI 题，出题人一定会**在样例中给出三种情况的例子**吧。书上的关键定理也用了和我们相同的定义。\n\n> **定理**（**几乎完备的可判定性**）：一个树的集合是**几乎完备**的，如果仅有有限棵树不在其中。那么，对于一个给定的树的有限集合 $\\mathscr{T}$，存在高效的算法判定 $\\operatorname{grow}(\\mathscr{T})$ 是否是几乎完备的。\n\n$\\mathbf{X2}$：这个问题变成一个纯粹的 OI 题目了！让我用我们的语言来重述一下题意：**给定一个有限大小的树林 $\\mathscr{T}$，判定 $\\operatorname{grow}(\\mathscr{T})$ 是否是几乎完备的，即是否仅有有限棵树不能被树林中所包含的树生长得到**。\n\n$\\mathbf{X1}$：也就是说，给定一个有限的树的集合 $\\mathscr{T}$，判定是否仅有有限个树 $T$，满足 $T \\notin \\operatorname{grow}(\\mathscr{T})$。所谓 $T \\notin \\operatorname{grow}(\\mathscr{T})$，就是说不存在 $T^{\\prime} \\in \\mathscr{T}$，使得 $T^{\\prime} \\rightarrow^{\\star} T$。这和通常的 OI 题目的确非常不同：我甚至没有想到这个问题的一个算法。\n\n$\\mathbf{X2}$：我也一样，不过我很久没有感受到这种解决未知问题的冲动了。", "inputFormat": "本题有多组测试数据，输入文件的第一行包含一个正整数 $N$，表示测试数据的组数。接下来包含恰好 $N$ 组测试数据，每组测试数据具有以下的格式：\n\n第一行是一个正整数 $m$，表示树的集合中树的个数。接下来按照以下格式输入 $m$ 棵树：\n- 首先是一个正整数 $n$，表示树中的结点个数，结点编号为 $1,2, \\ldots, n$；\n- 接下来 $n$ 行每行两个非负整数，其中第 $i$ 行从左到右包含用空格隔开的 $l_i$ 和 $r_i$，分别表示 $i$ 号结点左、右孩子结点的编号。如果左（或右）孩子不存在，那么 $l_i$（或 $r_i$）为 $0$。当然，叶结点一定满足 $l_i = r_i = 0$。\n- 输入数据保证构成一棵以 $1$ 号结点作为根结点的树。**请注意**：结点的编号只是为了方便输入，任何同构的树都被视为是相同的。\n\n所输入的 $m$ 棵树中可能存在彼此同构的树；如果去除这些重复的树（即每种同构的树只留下一个），它们可以构成一个树的集合 $\\mathscr{T}$。你需要判定这一树的集合所生长得到的集合 $\\operatorname{grow}(\\mathscr{T})$ 是否是几乎完备的。", "outputFormat": "输出包含 $N$ 行，分别表示 $N$ 组测试数据的答案。其中，第 $i$ 行输出一个字符串：如果第 $i$ 组测试数据所输入的树的集合所生长得到的集合是几乎完备的（换言之，仅有有限棵树不能被其生长得到），那么输出 `Almost Complete`；否则输出 `No`。**请注意输出字符串的拼写和大小写**。", "hint": "#### 样例 2 解释\n这一样例仅包含一组测试数据，其中树的集合 $\\mathscr{T}$ 包含三棵树，如下图所示。容易发现，仅有单个结点构成的树不在 $\\operatorname{grow}(\\mathscr{T})$ 中，其包含了几乎所有树，因而是几乎完备的。\n\n![img2](https://cdn.luogu.com.cn/upload/image_hosting/394s081s.png)\n\n#### 样例 3 解释\n这一样例仅包含一组测试数据，其中树的集合 $\\mathscr{T}$ 包含两棵树。容易发现，对于所有的 $n \\geq 2$，包含 $n$ 个结点，每个非叶结点仅有右孩子的链状树都不在 $\\operatorname{grow}(\\mathscr{T})$ 中，因而存在无穷多棵树不在 $\\operatorname{grow}(\\mathscr{T})$ 中，$\\mathscr{T}$ 不是几乎完备的。\n\n#### 样例 4\n见选手目录下的 surreal/surreal4.in 与 surreal/surreal4.ans。\n\n---\n\n### 测试点约束\n\n**全部数据满足**：$\\sum n \\leq 2 \\times 10^{6}$， $\\sum m \\leq 2 \\times 10^{6}$， $\\max h \\leq 2 \\times 10^{6}$， $N \\leq 10^{2}$。其中，$\\sum n$ 表示这一测试点所有测试数据中所出现的所有树的结点个数之和；$\\sum m$ 表示这一测试点中所有测试数据中所出现的树的个数；$\\max h$ 表示这一测试点中所出现的所有树的最高高度（仅包含一个结点的树高度为 $1$）。下表中的表项 $\\sum n$，$\\sum m$ 和 $\\max h$ 含义与上面相同，描述了每一组测试点的数据范围。\n\n**特殊性质**：下面是下表中会涉及的四种特殊性质的解释。\n- 特殊性质 $1$：对于这一测试点中的每一组测试数据，都有 $m \\leq 4$，即树的集合中包括不超过 $4$ 棵树；\n- 特殊性质 $2$：对于这一测试点中的每一组测试数据，树的集合中所有的树具有相同的高度；\n- 特殊性质 $3$：对于这一测试点中的每一组测试数据，树的集合仅包含链（换言之，每个非叶结点仅包含一个孩子）；\n- 特殊性质 $4$：对于这一测试点中的每一组测试数据，树的集合仅包含满足以下两个条件之一的树：\n  - 每个非叶结点仅包含一个孩子；\n  - 恰好有两个叶结点，它们具有相同的父结点，并且除这三个结点外，其余结点均有且仅有一个孩子。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 |  $N$ |  $\\sum n$ |  $\\sum m$ |  $\\max h$ | 特殊性质 |\n| :-: | :-: | :-: | :-: | :-: |:-:  |\n|  $1$ |  $100$ |  $\\le 10^3$ |  $\\le 10^3$ |  $\\le 1$ | 无 |\n|  $2\\sim 3$ |  $100$ |  $\\le 10^3$ |  $\\le 10^3$ |  $\\le 2$ | 性质  $1$ |\n|  $4$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 4$ | 无 | \n|  $5$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 5$ | 性质  $2$ | \n|  $6$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 8$ | 无 | \n|  $7$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 9$ | 性质  $2$ | \n|  $8$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 10$ | 无 | \n|  $9$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 10^6$ | 性质  $3$ | \n|  $10$ |  $20$ |  $\\le 10^3$ |  $\\le 100$ |  $\\le 10^3$ | 性质  $4$ | \n|  $11$ |  $20$ |  $\\le 2\\times 10^3$ |  $\\le 2\\times 10^3$ |  $\\le 2\\times 10^3$ | 性质  $4$ | \n|  $12$ |  $20$ |  $\\le 10^5$ |  $\\le 10^5$ |  $\\le 10^5$ | 性质  $4$ | \n|  $13$ |  $20$ |  $\\le 2\\times 10^5$ |  $\\le 2\\times 10^5$ |  $\\le 2\\times 10^5$ | 性质  $4$ | \n|  $14$ |  $20$ |  $\\le 800$ |  $\\le 200$ |  $\\le 800$ | 无 |\n|  $15$ |  $20$ |  $\\le 10^3$ |  $\\le 100$ |  $\\le 10^3$ | 无 |\n|  $16$ |  $20$ |  $\\le 2\\times 10^3$ |  $\\le 2\\times 10^3$ |  $\\le 2\\times 10^3$ | 无 |\n|  $17$ |  $40$ |  $\\le 3\\times 10^5$ |  $\\le 3\\times 10^5$ |  $\\le 3\\times 10^5$ | 无 |\n|  $18$ |  $40$ |  $\\le 6\\times 10^5$ |  $\\le 6\\times 10^5$ |  $\\le 6\\times 10^5$ | 无 |\n|  $19$ |  $40$ |  $\\le 9\\times 10^5$ |  $\\le 9\\times 10^5$ |  $\\le 9\\times 10^5$ | 无 |\n|  $20$ |  $40$ |  $\\le 1.2\\times 10^6$ |  $\\le 1.2\\times 10^6$ |  $\\le 1.2\\times 10^6$ | 无 |\n|  $21$ |  $40$ |  $\\le 1.5\\times 10^6$ |  $\\le 1.5\\times 10^6$ |  $\\le 1.5\\times 10^6$ | 无 |\n|  $22\\sim 25$ |  $40$ |  $\\le 2\\times 10^6$ |  $\\le 2\\times 10^6$ |  $\\le 2\\times 10^6$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2020] 超现实树", "background": "下课铃声响起，机房里的两位女生从座位上站起来。（下面用 $\\mathbf{X1}$, $\\mathbf{X2}$ 代指两人）\n\n$\\mathbf{X2}$：省选前的集训真难熬啊…… 听课、考试、讲评、补题 —— 对于现在的我来说，即使在梦里想到一道数据结构题，也会不由自主地开始思考吧。\n\n$\\mathbf{X1}$：重复训练对我来说似乎并不是什么负担，但我确实感觉到解决题目带来的愉悦感在最近逐渐减弱了。也许我们需要一些精神上的 “刺激”：一些不拘泥于繁复技术的智力游戏，来让我们找回对于数学和算法的兴趣。\n\n$\\mathbf{X2}$：咦，我好像收到了一封用英文写的短信，似乎是…… 数学书上的一些片段。", "description": "$\\mathbf{X1}$：我来翻译一下短信的内容。\n\n> 定义：本文所述的树是归纳定义的：单独的结点构成一棵树，以一棵树作为左（或右）孩子可以构成一棵树，以两棵树分别作为左、右孩子也可以构成一棵树。仅由以上规则用有限步生成的所有结构被称为树。\n\n$\\mathbf{X2}$：也就是说，这里所说的树是指**非空、有根、区分左右孩子的二叉树**。\n\n$\\mathbf{X1}$：的确如此。接下来书上定义了两棵树的同构。\n\n> 定义：称两棵树 $T$, $T^{\\prime}$ 同构，记做 $T \\equiv T^{\\prime}$，由以下四条规则定义：\n> 1. 由单独结点构成的树是彼此同构的；\n> 2. 如果两棵树的根结点均只有左子树，并且它们的左子树同构，那么这两棵树是同构的；\n> 3. 如果两棵树的根结点均只有右子树，并且它们的右子树同构，那么这两棵树是同构的；\n> 4. 如果两棵树的根结点均有左、右子树，并且它们的左、右子树分别对应同构，那么这两棵树是同构的。\n> \n> 很明显，同构关系构成了所有树上的一个等价关系。为了方便，我们将同构的树看作相同的树。\n\n$\\mathbf{X2}$：将同构的树看成相同的树就是说树的结点是彼此相同的。简单地说，两棵树同构当且仅当**他们在结点无标号、区分左右孩子的意义下相同**；我们说两棵树不同，当且仅当它们不同构。\n\n$\\mathbf{X1}$：书里还定义了树的**叶子**：和通常的定义一样，叶子指**没有任何孩子的结点**。\n\n$\\mathbf{X2}$：这和我们熟悉的定义完全一致。嘛，数学家真是有点啰嗦…… 恐怕只有 $\\mathbf{X3}$ 那种家伙会喜欢这种做派吧。\n\n$\\mathbf{X1}$：我倒是对此不太反感 —— 比起基于经验的 “直觉”，准确的定义和严谨的证明还是更加让人安心。你看，下一个定义就没有那么直观了。\n\n> 定义：称一棵树 $T$ **单步替换**成为 $T^{\\prime}$，如果将 $T$ 的某一**叶子结点**替换为另一棵树 $T^{\\prime \\prime}$ 得到的树与 $T^{\\prime}$ 同构，记做 $T \\rightarrow T^{\\prime}$；称一棵树 $T$ **替换**成为 $T^{\\prime}$，记做 $T \\rightarrow^{\\star} T^{\\prime}$，如果存在自然数 $n \\geq 1$ 和树 $T_{1}, T_{2}, \\ldots, T_{n}$，使得 $T \\equiv T_{1} \\rightarrow T_{2} \\rightarrow \\cdots \\rightarrow T_{n} \\equiv T^{\\prime}$。\n\n$\\mathbf{X2}$：我来想想…… 所谓替换，就是删掉某个叶子结点并在对应的位置放入另一棵树，就像那个叶子结点 “长出了” 一个更大的子树一样；一棵树替换成为另一棵树，说明它可以经由**零次、一次或多次**单步替换得到那棵树。哦…… 我明白了！举例来说，任何一棵树都可以替换成它本身，换言之对于树 $T$，都有 $T \\rightarrow^{\\star} T^{\\prime}$。下面这个图片可以帮助理解单步替换和替换的含义。\n\n![img](https://cdn.luogu.com.cn/upload/image_hosting/0o4pfqui.png)\n\n$\\mathbf{X1}$：你说得对。特别地，任何一棵树都可以替换得到无穷多棵不同的树，并且仅有一个结点构成的树可以替换得到任意其他的树。书上也有定义这样的东西。\n\n> 定义：对于一棵树 $T$，定义 $\\operatorname{grow}(T)$ 表示 T 所能替换构成的树的集合，即 $\\operatorname{grow}(T)=\\left\\{T^{\\prime} \\mid T \\rightarrow^{\\star} T^{\\prime}\\right\\}$。更近一步，如果 $\\mathscr{T}=\\left\\{T_{1}, T_{2}, \\ldots, T_{n}\\right\\}$ 是一个树的有限集合，定义 $\\operatorname{grow}(\\mathscr{T})$ 为所有 $\\operatorname{grow}\\left(T_{i}\\right)$ 的并集，其中 $i=1,2, \\ldots, n$。即 \n> $$\\operatorname{grow}(\\mathscr{T})=\\bigcup_{T_{i} \\in \\mathscr{T}} \\operatorname{grow}\\left(T_{i}\\right)$$\n\n$\\mathbf{X2}$：我们把 $\\operatorname{grow}(\\mathscr{T})$ 称作树的集合 $\\mathscr{T}$ **所生长得到的集合**吧 —— 也就是说，树的集合 $\\mathscr{T}$ 所生长得到的集合包含所有可以被某个 $T \\in \\mathscr{T}$ 替换得到的树。不妨把树的集合叫做**树林**。不太严谨地说，一个树林所生长得到的新树林就是其中所有树、以所有可能的方式生长得到的树林。显而易见，一个非空树林所生长得到的树林都是无穷树林。但这个无穷树林，或者说 $\\operatorname{grow}(\\mathscr{T})$，并不一定包含所有的树 —— 更进一步，它甚至不一定包含 “几乎所有” 的树。\n\n$\\mathbf{X1}$：让我来补充一下：我们称一个树林是**几乎完备**的（或称**几乎包含了所有的树**），如果仅有有限多的树不在其中。对于一个有限树林 $\\mathscr{T}$，$\\operatorname{grow}(\\mathscr{T})$ 要么包含了所有的树，要么包含了几乎所有的树，要么存在无穷多棵树不在其中。如果这是一道 OI 题，出题人一定会**在样例中给出三种情况的例子**吧。书上的关键定理也用了和我们相同的定义。\n\n> **定理**（**几乎完备的可判定性**）：一个树的集合是**几乎完备**的，如果仅有有限棵树不在其中。那么，对于一个给定的树的有限集合 $\\mathscr{T}$，存在高效的算法判定 $\\operatorname{grow}(\\mathscr{T})$ 是否是几乎完备的。\n\n$\\mathbf{X2}$：这个问题变成一个纯粹的 OI 题目了！让我用我们的语言来重述一下题意：**给定一个有限大小的树林 $\\mathscr{T}$，判定 $\\operatorname{grow}(\\mathscr{T})$ 是否是几乎完备的，即是否仅有有限棵树不能被树林中所包含的树生长得到**。\n\n$\\mathbf{X1}$：也就是说，给定一个有限的树的集合 $\\mathscr{T}$，判定是否仅有有限个树 $T$，满足 $T \\notin \\operatorname{grow}(\\mathscr{T})$。所谓 $T \\notin \\operatorname{grow}(\\mathscr{T})$，就是说不存在 $T^{\\prime} \\in \\mathscr{T}$，使得 $T^{\\prime} \\rightarrow^{\\star} T$。这和通常的 OI 题目的确非常不同：我甚至没有想到这个问题的一个算法。\n\n$\\mathbf{X2}$：我也一样，不过我很久没有感受到这种解决未知问题的冲动了。", "inputFormat": "本题有多组测试数据，输入文件的第一行包含一个正整数 $N$，表示测试数据的组数。接下来包含恰好 $N$ 组测试数据，每组测试数据具有以下的格式：\n\n第一行是一个正整数 $m$，表示树的集合中树的个数。接下来按照以下格式输入 $m$ 棵树：\n- 首先是一个正整数 $n$，表示树中的结点个数，结点编号为 $1,2, \\ldots, n$；\n- 接下来 $n$ 行每行两个非负整数，其中第 $i$ 行从左到右包含用空格隔开的 $l_i$ 和 $r_i$，分别表示 $i$ 号结点左、右孩子结点的编号。如果左（或右）孩子不存在，那么 $l_i$（或 $r_i$）为 $0$。当然，叶结点一定满足 $l_i = r_i = 0$。\n- 输入数据保证构成一棵以 $1$ 号结点作为根结点的树。**请注意**：结点的编号只是为了方便输入，任何同构的树都被视为是相同的。\n\n所输入的 $m$ 棵树中可能存在彼此同构的树；如果去除这些重复的树（即每种同构的树只留下一个），它们可以构成一个树的集合 $\\mathscr{T}$。你需要判定这一树的集合所生长得到的集合 $\\operatorname{grow}(\\mathscr{T})$ 是否是几乎完备的。", "outputFormat": "输出包含 $N$ 行，分别表示 $N$ 组测试数据的答案。其中，第 $i$ 行输出一个字符串：如果第 $i$ 组测试数据所输入的树的集合所生长得到的集合是几乎完备的（换言之，仅有有限棵树不能被其生长得到），那么输出 `Almost Complete`；否则输出 `No`。**请注意输出字符串的拼写和大小写**。", "hint": "#### 样例 2 解释\n这一样例仅包含一组测试数据，其中树的集合 $\\mathscr{T}$ 包含三棵树，如下图所示。容易发现，仅有单个结点构成的树不在 $\\operatorname{grow}(\\mathscr{T})$ 中，其包含了几乎所有树，因而是几乎完备的。\n\n![img2](https://cdn.luogu.com.cn/upload/image_hosting/394s081s.png)\n\n#### 样例 3 解释\n这一样例仅包含一组测试数据，其中树的集合 $\\mathscr{T}$ 包含两棵树。容易发现，对于所有的 $n \\geq 2$，包含 $n$ 个结点，每个非叶结点仅有右孩子的链状树都不在 $\\operatorname{grow}(\\mathscr{T})$ 中，因而存在无穷多棵树不在 $\\operatorname{grow}(\\mathscr{T})$ 中，$\\mathscr{T}$ 不是几乎完备的。\n\n#### 样例 4\n见选手目录下的 surreal/surreal4.in 与 surreal/surreal4.ans。\n\n---\n\n### 测试点约束\n\n**全部数据满足**：$\\sum n \\leq 2 \\times 10^{6}$， $\\sum m \\leq 2 \\times 10^{6}$， $\\max h \\leq 2 \\times 10^{6}$， $N \\leq 10^{2}$。其中，$\\sum n$ 表示这一测试点所有测试数据中所出现的所有树的结点个数之和；$\\sum m$ 表示这一测试点中所有测试数据中所出现的树的个数；$\\max h$ 表示这一测试点中所出现的所有树的最高高度（仅包含一个结点的树高度为 $1$）。下表中的表项 $\\sum n$，$\\sum m$ 和 $\\max h$ 含义与上面相同，描述了每一组测试点的数据范围。\n\n**特殊性质**：下面是下表中会涉及的四种特殊性质的解释。\n- 特殊性质 $1$：对于这一测试点中的每一组测试数据，都有 $m \\leq 4$，即树的集合中包括不超过 $4$ 棵树；\n- 特殊性质 $2$：对于这一测试点中的每一组测试数据，树的集合中所有的树具有相同的高度；\n- 特殊性质 $3$：对于这一测试点中的每一组测试数据，树的集合仅包含链（换言之，每个非叶结点仅包含一个孩子）；\n- 特殊性质 $4$：对于这一测试点中的每一组测试数据，树的集合仅包含满足以下两个条件之一的树：\n  - 每个非叶结点仅包含一个孩子；\n  - 恰好有两个叶结点，它们具有相同的父结点，并且除这三个结点外，其余结点均有且仅有一个孩子。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 |  $N$ |  $\\sum n$ |  $\\sum m$ |  $\\max h$ | 特殊性质 |\n| :-: | :-: | :-: | :-: | :-: |:-:  |\n|  $1$ |  $100$ |  $\\le 10^3$ |  $\\le 10^3$ |  $\\le 1$ | 无 |\n|  $2\\sim 3$ |  $100$ |  $\\le 10^3$ |  $\\le 10^3$ |  $\\le 2$ | 性质  $1$ |\n|  $4$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 4$ | 无 | \n|  $5$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 5$ | 性质  $2$ | \n|  $6$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 8$ | 无 | \n|  $7$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 9$ | 性质  $2$ | \n|  $8$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 10$ | 无 | \n|  $9$ |  $100$ |  $\\le 10^6$ |  $\\le 10^6$ |  $\\le 10^6$ | 性质  $3$ | \n|  $10$ |  $20$ |  $\\le 10^3$ |  $\\le 100$ |  $\\le 10^3$ | 性质  $4$ | \n|  $11$ |  $20$ |  $\\le 2\\times 10^3$ |  $\\le 2\\times 10^3$ |  $\\le 2\\times 10^3$ | 性质  $4$ | \n|  $12$ |  $20$ |  $\\le 10^5$ |  $\\le 10^5$ |  $\\le 10^5$ | 性质  $4$ | \n|  $13$ |  $20$ |  $\\le 2\\times 10^5$ |  $\\le 2\\times 10^5$ |  $\\le 2\\times 10^5$ | 性质  $4$ | \n|  $14$ |  $20$ |  $\\le 800$ |  $\\le 200$ |  $\\le 800$ | 无 |\n|  $15$ |  $20$ |  $\\le 10^3$ |  $\\le 100$ |  $\\le 10^3$ | 无 |\n|  $16$ |  $20$ |  $\\le 2\\times 10^3$ |  $\\le 2\\times 10^3$ |  $\\le 2\\times 10^3$ | 无 |\n|  $17$ |  $40$ |  $\\le 3\\times 10^5$ |  $\\le 3\\times 10^5$ |  $\\le 3\\times 10^5$ | 无 |\n|  $18$ |  $40$ |  $\\le 6\\times 10^5$ |  $\\le 6\\times 10^5$ |  $\\le 6\\times 10^5$ | 无 |\n|  $19$ |  $40$ |  $\\le 9\\times 10^5$ |  $\\le 9\\times 10^5$ |  $\\le 9\\times 10^5$ | 无 |\n|  $20$ |  $40$ |  $\\le 1.2\\times 10^6$ |  $\\le 1.2\\times 10^6$ |  $\\le 1.2\\times 10^6$ | 无 |\n|  $21$ |  $40$ |  $\\le 1.5\\times 10^6$ |  $\\le 1.5\\times 10^6$ |  $\\le 1.5\\times 10^6$ | 无 |\n|  $22\\sim 25$ |  $40$ |  $\\le 2\\times 10^6$ |  $\\le 2\\times 10^6$ |  $\\le 2\\times 10^6$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P6777", "type": "P", "difficulty": 7, "samples": [["4 5\n1 2 1\n2 3 1\n3 4 1\n1 3 5\n2 4 6\n1 4\n", "6"], ["2 1\n1 2 1\n1 2\n", "-1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2020", "NOI", "O2优化", "弦图"], "title": "[NOI2020] 翻修道路【数据有误】", "background": "本题官方数据有误。正确的解法见 [Shortest non-separating st-path on chordal graphs](https://arxiv.org/abs/2101.03519)。", "description": "C 国中包含 $n$ 座城市，这些城市通过 $m$ 条双向道路连接。城市从 $1$ 到 $n$ 编号，道路从 $1$ 到 $m$ 编号，$i$ 号道路两端连接着城市 $u_i$ 与城市 $v_i$，它的长度为 $w_i$ 米。经由这些道路，从 C 国中任意一个城市出发，均能到达其他所有城市。\n\nC 国人民喜欢环路旅程，但又不喜欢经过太多条道路，为此 C 国的道路被建造得非常特殊。更具体地，对于一条经过 $l$ 条道路的简单环路（即除起点城市外**不经过重复城市**的环路），它可以表示为 $c_{1} \\rightarrow c_{2} \\rightarrow \\cdots \\rightarrow c_{l} \\rightarrow c_{1}$（其中对于所有 $1 \\leq i<l$，城市 $c_i$ 与城市 $c_{i+1}$ 有道路相连；城市 $c_l$ 与城市 $c_1$ 有道路相连；对于所有 $1 \\leq i<j \\leq l$，有 $c_{i} \\neq c_{j}$），若 $l > 3$，则 C 国的道路将满足下列条件：\n  - 存在两个在该环路上**不相邻**的城市 $u$, $v$，满足两个城市间有道路直接相连。即：存在 $1 \\leq u<v \\leq l$，使得 $v-u \\geq 2$，$u$ 和 $v$ 不同时为 $1$ 和 $l$，并且城市 $c_u$ 与城市 $c_v$ 间有道路直接相连。\n\n现在 C 国有了新的翻修计划，需要在城市 $s$ 与城市 $t$ 间寻找一条路径进行翻修。翻修时路径中包含的所有道路将无法通行，为了保障人民的日常生活，C 国希望在翻修这条路径时，经由**剩余**的道路（即没被包含在翻修路径内的道路）依然能满足：**从 C 国中任意一个城市出发，均能到达其他所有城市**。\n\nC 国找到了身为工程大师的你，请你帮助 C 国找出一条满足上述要求的翻修路径，并使得这条路径的总长**尽量小**。", "inputFormat": "第一行两个整数 $n$, $m$ 分别表示城市个数与道路条数。\n\n接下来 $m$ 行每行三个整数 $u_i$, $v_i$, $w_i$，依次表示每条道路的两个端点与它的长度。\n\n数据保证每条道路都一定连接两个不同城市，即 $u_i \\not= v_i$。\n\n最后一行两个整数 $s$, $t$，分别表示需要翻修的路径的两个端点。", "outputFormat": "仅一行一个整数，表示满足题目要求的情况下，翻修路径的总长的最小值。\n\n**如果不存在满足题目要求的路径，输出一行一个整数$-1$。**", "hint": "#### 样例 1 解释\n\n路径 $(1,2,1),(2,3,1),(3,4,1)$ 是城市 $1$ 和城市 $4$ 间总长最小的路径，但不符合要求。\n\n路径 $(1,3,5),(3,4,1)$ 符合要求，长度为 $6$。\n\n路径 $(1,2,1),(2,4,6)$ 符合要求，长度为 $7$。\n\n除上述两条路径外，没有其他满足要求的路径。\n\n#### 样例 3\n\n见选手目录下的 road/road3.in 与 road/road3.ans。该样例与测试点 $1 \\sim 6$ 限制相同。\n\n#### 样例 4\n\n见选手目录下的 road/road4.in 与 road/road4.ans。该样例与测试点 $7 \\sim 10$ 限制相同。\n\n#### 样例 5\n\n见选手目录下的 road/road5.in 与 road/road5.ans。该样例与测试点 $11 \\sim 15$ 限制相同。\n\n#### 样例 6\n\n见选手目录下的 road/road6.in 与 road/road6.ans。该样例与测试点 $16 \\sim 20$ 限制相同。\n\n---\n\n### 测试点约束\n\n对于所有测试点：$2 \\leq n \\leq 5 \\times 10^{5}$，$2 \\leq m \\leq 10^{6}$，$s \\neq t$。\n\n$1 \\leq u_{i}, v_{i} \\leq n$，$u_{i} \\neq v_{i}$，$1 \\leq w_{i} \\leq 10^{9}$，保证任意两条道路它们的端点不全相同。\n\n保证给出的道路满足题面描述第二段中的性质。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 |  $n\\le $ |  $m\\le $ | 特殊限制 |\n| :-: | :-: | :-:| :-: |\n|  $1\\sim 6$ |  $2\\times 10^3$ |  $4\\times 10^3$ | 无 |\n|  $7\\sim 10$ |  $5\\times 10^5$ |  $10^6$ |  $\\text{A}$ |\n|  $11\\sim 15$ |  $5\\times 10^5$ |  $10^6$ |  $\\text{B}$ |\n|  $16\\sim 20$ |  $5\\times 10^5$ |  $10^6$ | 无 |\n\n特殊限制 A：所有道路的长度均相等。\n\n特殊限制 B：所有 $w_i = 1$ 的道路恰好构成 $s$ 到 $t$ 的一条路径，且其他 $w_i \\not= 1$ 的道路的两条端点在这条路径上距离为 $2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOI2020] 翻修道路【数据有误】", "background": "本题官方数据有误。正确的解法见 [Shortest non-separating st-path on chordal graphs](https://arxiv.org/abs/2101.03519)。", "description": "C 国中包含 $n$ 座城市，这些城市通过 $m$ 条双向道路连接。城市从 $1$ 到 $n$ 编号，道路从 $1$ 到 $m$ 编号，$i$ 号道路两端连接着城市 $u_i$ 与城市 $v_i$，它的长度为 $w_i$ 米。经由这些道路，从 C 国中任意一个城市出发，均能到达其他所有城市。\n\nC 国人民喜欢环路旅程，但又不喜欢经过太多条道路，为此 C 国的道路被建造得非常特殊。更具体地，对于一条经过 $l$ 条道路的简单环路（即除起点城市外**不经过重复城市**的环路），它可以表示为 $c_{1} \\rightarrow c_{2} \\rightarrow \\cdots \\rightarrow c_{l} \\rightarrow c_{1}$（其中对于所有 $1 \\leq i<l$，城市 $c_i$ 与城市 $c_{i+1}$ 有道路相连；城市 $c_l$ 与城市 $c_1$ 有道路相连；对于所有 $1 \\leq i<j \\leq l$，有 $c_{i} \\neq c_{j}$），若 $l > 3$，则 C 国的道路将满足下列条件：\n  - 存在两个在该环路上**不相邻**的城市 $u$, $v$，满足两个城市间有道路直接相连。即：存在 $1 \\leq u<v \\leq l$，使得 $v-u \\geq 2$，$u$ 和 $v$ 不同时为 $1$ 和 $l$，并且城市 $c_u$ 与城市 $c_v$ 间有道路直接相连。\n\n现在 C 国有了新的翻修计划，需要在城市 $s$ 与城市 $t$ 间寻找一条路径进行翻修。翻修时路径中包含的所有道路将无法通行，为了保障人民的日常生活，C 国希望在翻修这条路径时，经由**剩余**的道路（即没被包含在翻修路径内的道路）依然能满足：**从 C 国中任意一个城市出发，均能到达其他所有城市**。\n\nC 国找到了身为工程大师的你，请你帮助 C 国找出一条满足上述要求的翻修路径，并使得这条路径的总长**尽量小**。", "inputFormat": "第一行两个整数 $n$, $m$ 分别表示城市个数与道路条数。\n\n接下来 $m$ 行每行三个整数 $u_i$, $v_i$, $w_i$，依次表示每条道路的两个端点与它的长度。\n\n数据保证每条道路都一定连接两个不同城市，即 $u_i \\not= v_i$。\n\n最后一行两个整数 $s$, $t$，分别表示需要翻修的路径的两个端点。", "outputFormat": "仅一行一个整数，表示满足题目要求的情况下，翻修路径的总长的最小值。\n\n**如果不存在满足题目要求的路径，输出一行一个整数$-1$。**", "hint": "#### 样例 1 解释\n\n路径 $(1,2,1),(2,3,1),(3,4,1)$ 是城市 $1$ 和城市 $4$ 间总长最小的路径，但不符合要求。\n\n路径 $(1,3,5),(3,4,1)$ 符合要求，长度为 $6$。\n\n路径 $(1,2,1),(2,4,6)$ 符合要求，长度为 $7$。\n\n除上述两条路径外，没有其他满足要求的路径。\n\n#### 样例 3\n\n见选手目录下的 road/road3.in 与 road/road3.ans。该样例与测试点 $1 \\sim 6$ 限制相同。\n\n#### 样例 4\n\n见选手目录下的 road/road4.in 与 road/road4.ans。该样例与测试点 $7 \\sim 10$ 限制相同。\n\n#### 样例 5\n\n见选手目录下的 road/road5.in 与 road/road5.ans。该样例与测试点 $11 \\sim 15$ 限制相同。\n\n#### 样例 6\n\n见选手目录下的 road/road6.in 与 road/road6.ans。该样例与测试点 $16 \\sim 20$ 限制相同。\n\n---\n\n### 测试点约束\n\n对于所有测试点：$2 \\leq n \\leq 5 \\times 10^{5}$，$2 \\leq m \\leq 10^{6}$，$s \\neq t$。\n\n$1 \\leq u_{i}, v_{i} \\leq n$，$u_{i} \\neq v_{i}$，$1 \\leq w_{i} \\leq 10^{9}$，保证任意两条道路它们的端点不全相同。\n\n保证给出的道路满足题面描述第二段中的性质。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 |  $n\\le $ |  $m\\le $ | 特殊限制 |\n| :-: | :-: | :-:| :-: |\n|  $1\\sim 6$ |  $2\\times 10^3$ |  $4\\times 10^3$ | 无 |\n|  $7\\sim 10$ |  $5\\times 10^5$ |  $10^6$ |  $\\text{A}$ |\n|  $11\\sim 15$ |  $5\\times 10^5$ |  $10^6$ |  $\\text{B}$ |\n|  $16\\sim 20$ |  $5\\times 10^5$ |  $10^6$ | 无 |\n\n特殊限制 A：所有道路的长度均相等。\n\n特殊限制 B：所有 $w_i = 1$ 的道路恰好构成 $s$ 到 $t$ 的一条路径，且其他 $w_i \\not= 1$ 的道路的两条端点在这条路径上距离为 $2$。", "locale": "zh-CN"}}}
{"pid": "P6778", "type": "P", "difficulty": 7, "samples": [["6 6\n2 1 1\n5 1 1\n3 1 3\n4 5 1\n6 3 3\n2 5\n1 5\n1 4\n3 6\n2 6\n1 1", "19\n26\n18\n28\n44\n0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "莫队", "O2优化", "分块", "Ynoi"], "title": "[Ynoi2009] rpdq", "background": "", "description": "给定一棵 $n$ 个节点的无根，有边权的树，每个点有个编号，编号为一个 $1 \\sim n$ 的排列。\n\n共 $m$ 组询问，每次询问给出 $l,r$，求所有点编号的二元组 $(i,j)$ 满足 $l \\le i<j \\le r$ 在树上的距离的和，两个点的距离定义为连接其的简单路径上的所有边的边权和。", "inputFormat": "第一行两个空格隔开的数 $n$ $m$。\n\n之后 $n-1$ 行，每行三个空格隔开的数 $u$ $v$ $d$ 表示一条 $u$ 和 $v$ 之间边权为 $d$ 的边。\n\n之后 $m$ 行，每行两个空格隔开的数 $l$ $r$ 表示一次询问。", "outputFormat": "共 $m$ 行，表示每个询问对应的答案，答案对 $2^{32}$ 取模。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：zx2003，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，$1\\le n,m,d\\le 2\\cdot 10^5$，所有数值均为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2009] rpdq", "background": "", "description": "给定一棵 $n$ 个节点的无根，有边权的树，每个点有个编号，编号为一个 $1 \\sim n$ 的排列。\n\n共 $m$ 组询问，每次询问给出 $l,r$，求所有点编号的二元组 $(i,j)$ 满足 $l \\le i<j \\le r$ 在树上的距离的和，两个点的距离定义为连接其的简单路径上的所有边的边权和。", "inputFormat": "第一行两个空格隔开的数 $n$ $m$。\n\n之后 $n-1$ 行，每行三个空格隔开的数 $u$ $v$ $d$ 表示一条 $u$ 和 $v$ 之间边权为 $d$ 的边。\n\n之后 $m$ 行，每行两个空格隔开的数 $l$ $r$ 表示一次询问。", "outputFormat": "共 $m$ 行，表示每个询问对应的答案，答案对 $2^{32}$ 取模。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：zx2003，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，$1\\le n,m,d\\le 2\\cdot 10^5$，所有数值均为整数。", "locale": "zh-CN"}}}
{"pid": "P6779", "type": "P", "difficulty": 7, "samples": [["5 6 2\n3 2 2\n5 3 3\n1 2 4\n4 2 3\n3 3 3 1 2\n2 1 1\n2 2 3\n2 4 5\n1 2 3\n1 4 4\n2 1 2", "2\n2\n0\n0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2009", "O2优化", "Ynoi"], "title": "[Ynoi2009] rla1rmdq", "background": "", "description": "给定一棵 $n$ 个节点的树，树有边权，与一个长为 $n$ 的序列 $a$。\n\n定义节点 $x$ 的父亲为 $fa(x)$，根 $rt$ 满足 $fa(rt)=rt$。\n\n定义节点 $x$ 的深度 $dep(x)$ 为其到根简单路径上所有边权和。\n\n有 $m$ 次操作：\n\n`1 l r`：对于 $l \\le i \\le r$， $a_i := fa(a_i)$ 。 \n\n`2 l r `：查询对于 $l \\le i \\le r$，最小的 $dep(a_i)$。", "inputFormat": "第一行三个空格隔开的数 $n$ $m$ $rt$，其中 $rt$ 表示根节点的编号。\n\n之后 $n-1$ 行，每行三个空格隔开的数 $u,v,w$ 表示一条 $u$ 与 $v$ 之间，边权为 $w$ 的边。\n\n之后一行 $n$ 个空格隔开的数表示这个序列。\n\n之后 $m$ 行，每行三个用空格隔开的数，表示一次操作。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示其对应的答案。", "hint": "Idea：yummy，Solution：nzhtl1477&memset0，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\cdot 10^5$，$1\\le a_i\\le n$，边权在 $[0,10^9]$ 之间。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2009] rla1rmdq", "background": "", "description": "给定一棵 $n$ 个节点的树，树有边权，与一个长为 $n$ 的序列 $a$。\n\n定义节点 $x$ 的父亲为 $fa(x)$，根 $rt$ 满足 $fa(rt)=rt$。\n\n定义节点 $x$ 的深度 $dep(x)$ 为其到根简单路径上所有边权和。\n\n有 $m$ 次操作：\n\n`1 l r`：对于 $l \\le i \\le r$， $a_i := fa(a_i)$ 。 \n\n`2 l r `：查询对于 $l \\le i \\le r$，最小的 $dep(a_i)$。", "inputFormat": "第一行三个空格隔开的数 $n$ $m$ $rt$，其中 $rt$ 表示根节点的编号。\n\n之后 $n-1$ 行，每行三个空格隔开的数 $u,v,w$ 表示一条 $u$ 与 $v$ 之间，边权为 $w$ 的边。\n\n之后一行 $n$ 个空格隔开的数表示这个序列。\n\n之后 $m$ 行，每行三个用空格隔开的数，表示一次操作。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示其对应的答案。", "hint": "Idea：yummy，Solution：nzhtl1477&memset0，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\cdot 10^5$，$1\\le a_i\\le n$，边权在 $[0,10^9]$ 之间。", "locale": "zh-CN"}}}
{"pid": "P6780", "type": "P", "difficulty": 7, "samples": [["5 10 2\n0 -5 -3 8 -3\n1 5 -1\n1 2 3\n1 5 -6\n1 2 9\n2 5 5\n2 3 3\n1 1 -3\n2 4 4\n1 1 4\n1 3 3\n", "0\n0\n8\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2009", "O2优化", "Ynoi"], "title": "[Ynoi2009] pmrllcsrms", "background": "", "description": "给你一个长度为 $n$ 的整数序列 $a$，和一个常数 $c$ 。\n\n\n有 $m$ 次操作：\n\n`1 x y`：将位置 $x$ 的值修改为 $y$。\n\n`2 l r`：表示询问区间 $[l,r]$ 中 $\\max\\left(\\max_{l \\leq l' \\leq r' \\leq r\\atop r'-l'+1\\leq c}  ~~ \\left(\\sum_{i=l'} ^{r'} a_i\\right), 0\\right)$。", "inputFormat": "第一行三个正整数 $n,m,c$ ，分别表示序列长度，操作次数，以及给定的常数。\n\n之后一行 $n$ 个整数 $a_1,\\dots,a_n$ 表示序列 $a$ 。\n\n之后 $m$ 行，每行三个数表示一次操作，意义如上述。", "outputFormat": "对每个询问，输出一行一个数表示答案。", "hint": "Idea：chenkuowen&nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，$1 \\le n\\le 10^6, 1\\le  m\\le 2\\times10^6, 1\\le x,c\\le n, 1\\le l\\le r\\le n, -10^9 \\le a_i,y \\le 10^9$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2009] pmrllcsrms", "background": "", "description": "给你一个长度为 $n$ 的整数序列 $a$，和一个常数 $c$ 。\n\n\n有 $m$ 次操作：\n\n`1 x y`：将位置 $x$ 的值修改为 $y$。\n\n`2 l r`：表示询问区间 $[l,r]$ 中 $\\max\\left(\\max_{l \\leq l' \\leq r' \\leq r\\atop r'-l'+1\\leq c}  ~~ \\left(\\sum_{i=l'} ^{r'} a_i\\right), 0\\right)$。", "inputFormat": "第一行三个正整数 $n,m,c$ ，分别表示序列长度，操作次数，以及给定的常数。\n\n之后一行 $n$ 个整数 $a_1,\\dots,a_n$ 表示序列 $a$ 。\n\n之后 $m$ 行，每行三个数表示一次操作，意义如上述。", "outputFormat": "对每个询问，输出一行一个数表示答案。", "hint": "Idea：chenkuowen&nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，$1 \\le n\\le 10^6, 1\\le  m\\le 2\\times10^6, 1\\le x,c\\le n, 1\\le l\\le r\\le n, -10^9 \\le a_i,y \\le 10^9$ 。", "locale": "zh-CN"}}}
{"pid": "P6781", "type": "P", "difficulty": 7, "samples": [["10 10\n0 1\n1 9\n1 2\n0 5\n1 1\n0 6\n1 1\n0 4\n0 8\n1 7\n2 5 7\n3 1 10\n1 1 3\n2 1 3\n3 2 9\n3 4 10\n3 7 8\n1 10 2\n3 3 4\n2 5 7", "4294967295\n4294967284\n4294967281"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2008", "O2优化", "Ynoi"], "title": "[Ynoi2008] rupq", "background": "", "description": "给定一个长为 $n$ 的括号序列，每个位置有一个括号 $a_i$，其中 $a_i=1$ 代表是左括号 $'('$，$a_i=0$ 代表是右括号 $')'$。 $a_i$ 位置的括号有一个权值 $b_i$。\n\n对任意括号序列，通过不断删除形如 $'()'$ 的子段直到无法操作，最终可以得到一个唯一的序列，这个序列称为不匹配括号，如 $a_1=')',a_2='(',a_3='(',a_4=')',a_5='('$，这个括号序列的不匹配括号序列为 $')(('$，其不匹配括号对应位置为 $1,2,5$，其不匹配括号对应位置的 $b$ 为 $b_1,b_2,b_5$。\n\n有 $m$ 次操作，操作有以下三类：\n\n`1 x y`：进行单点修改，即 $a_x:=1-a_x; b_x:=y$。\n\n`2 l r`：求 $a[l..r]$ 中不匹配括号对应位置的 $b$ 从左到右的 $\\texttt {NAND}$ （$32$ 位的按位与非，可以见 https://en.wikipedia.org/wiki/NAND_logic ）， $\\texttt {max}$（最大值） ，将二者 $\\texttt {xor}$ 后输出。如果不匹配括号为空序列，则 $\\texttt {NAND}$ 的答案为 $2^{32}-1$， $\\texttt {max}$ 的答案为 $0$。\n\n$\\texttt {NAND}$ 即以 $c_0=2^{32}-1$ 为初值，然后依次 $c_i=\\texttt {NAND}(c_{i-1},b_i)$，对于一个 $n$ 个值的序列 $b$，最后答案为 $c_n$。\n\n`3 l r`：将 $a[l..r]$ 和 $a[r+1..n]$ 交换位置，$b$ 也做同样的操作。\n", "inputFormat": "第一行用空格隔开的两个数 $n,m$。\n\n之后 $n$ 行每行用空格隔开的两个数，第 $i$ 行为 $a_i,b_i$。\n\n之后 $m$ 行，每行表示一个操作。", "outputFormat": "对每个操作 $2$ 输出一行表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，\n\n$0 \\le a[i] \\le 1$。\n\n$0 \\le b[i] \\le 10^9$。\n\n$1 \\le n \\le 2\\times10^6,1 \\le m \\le 2\\times10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2008] rupq", "background": "", "description": "给定一个长为 $n$ 的括号序列，每个位置有一个括号 $a_i$，其中 $a_i=1$ 代表是左括号 $'('$，$a_i=0$ 代表是右括号 $')'$。 $a_i$ 位置的括号有一个权值 $b_i$。\n\n对任意括号序列，通过不断删除形如 $'()'$ 的子段直到无法操作，最终可以得到一个唯一的序列，这个序列称为不匹配括号，如 $a_1=')',a_2='(',a_3='(',a_4=')',a_5='('$，这个括号序列的不匹配括号序列为 $')(('$，其不匹配括号对应位置为 $1,2,5$，其不匹配括号对应位置的 $b$ 为 $b_1,b_2,b_5$。\n\n有 $m$ 次操作，操作有以下三类：\n\n`1 x y`：进行单点修改，即 $a_x:=1-a_x; b_x:=y$。\n\n`2 l r`：求 $a[l..r]$ 中不匹配括号对应位置的 $b$ 从左到右的 $\\texttt {NAND}$ （$32$ 位的按位与非，可以见 https://en.wikipedia.org/wiki/NAND_logic ）， $\\texttt {max}$（最大值） ，将二者 $\\texttt {xor}$ 后输出。如果不匹配括号为空序列，则 $\\texttt {NAND}$ 的答案为 $2^{32}-1$， $\\texttt {max}$ 的答案为 $0$。\n\n$\\texttt {NAND}$ 即以 $c_0=2^{32}-1$ 为初值，然后依次 $c_i=\\texttt {NAND}(c_{i-1},b_i)$，对于一个 $n$ 个值的序列 $b$，最后答案为 $c_n$。\n\n`3 l r`：将 $a[l..r]$ 和 $a[r+1..n]$ 交换位置，$b$ 也做同样的操作。\n", "inputFormat": "第一行用空格隔开的两个数 $n,m$。\n\n之后 $n$ 行每行用空格隔开的两个数，第 $i$ 行为 $a_i,b_i$。\n\n之后 $m$ 行，每行表示一个操作。", "outputFormat": "对每个操作 $2$ 输出一行表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，\n\n$0 \\le a[i] \\le 1$。\n\n$0 \\le b[i] \\le 10^9$。\n\n$1 \\le n \\le 2\\times10^6,1 \\le m \\le 2\\times10^5$。", "locale": "zh-CN"}}}
{"pid": "P6782", "type": "P", "difficulty": 6, "samples": [["10 10 7\n4 2\n10 4\n3 2\n6 10\n9 2\n7 3\n1 4\n8 2\n5 3\n8 10 10\n2 6 2\n3 6 2\n4 6 4\n3 10 2\n8 8 10\n3 10 4\n2 3 2\n2 6 4\n1 7 10", "0\n2\n0\n1\n7\n0\n2\n0\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2008", "莫队", "O2优化", "分块", "Ynoi", "根号分治"], "title": "[Ynoi2008] rplexq", "background": "", "description": "给定一棵 $n$ 个节点的有根树，第 $i$ 个点的编号是 $i$。\n\n有 $m$ 次询问，每次询问给出 $l,r,x$，求有多少点编号的二元组 $(i,j)$ 满足 $l \\le i < j \\le r$ 且 $i$ 和 $j$ 的最近公共祖先是节点 $x$。", "inputFormat": "第一行三个数 $n$ $m$ $rt$，其中 $rt$ 表示根节点的编号。\n\n之后 $n-1$ 行，每行两个数 $u$ $v$ 表示一条边。\n\n之后 $m$ 行，每行三个数 $l$ $r$ $x$ 表示一次询问。", "outputFormat": "共 $m$ 行，表示每个询问对应的答案", "hint": "Idea：Ynoi，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\cdot 10^5$，$1 \\le l,r,x \\le n$。\n\n#### 样例解释 ####\n\n`2 6 2`：符合条件的有 $(2,4)$，$(2,6)$。\n\n`4 6 4`：符合条件的有 $(4,6)$ 。\n\n`3 10 2`：符合条件的有 $(4,8)$ ，$(4,9)$，$(6,8)$，$(6,9)$，$(8,9)$，$(8,10)$，$(9,10)$。\n\n`3 10 4`：符合条件的有 $(4,6)$，$(4,10)$。\n\n`2 6 4`：符合条件的有 $(4,6)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2008] rplexq", "background": "", "description": "给定一棵 $n$ 个节点的有根树，第 $i$ 个点的编号是 $i$。\n\n有 $m$ 次询问，每次询问给出 $l,r,x$，求有多少点编号的二元组 $(i,j)$ 满足 $l \\le i < j \\le r$ 且 $i$ 和 $j$ 的最近公共祖先是节点 $x$。", "inputFormat": "第一行三个数 $n$ $m$ $rt$，其中 $rt$ 表示根节点的编号。\n\n之后 $n-1$ 行，每行两个数 $u$ $v$ 表示一条边。\n\n之后 $m$ 行，每行三个数 $l$ $r$ $x$ 表示一次询问。", "outputFormat": "共 $m$ 行，表示每个询问对应的答案", "hint": "Idea：Ynoi，Solution：nzhtl1477，Code：nzhtl1477，Data：nzhtl1477\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 2\\cdot 10^5$，$1 \\le l,r,x \\le n$。\n\n#### 样例解释 ####\n\n`2 6 2`：符合条件的有 $(2,4)$，$(2,6)$。\n\n`4 6 4`：符合条件的有 $(4,6)$ 。\n\n`3 10 2`：符合条件的有 $(4,8)$ ，$(4,9)$，$(6,8)$，$(6,9)$，$(8,9)$，$(8,10)$，$(9,10)$。\n\n`3 10 4`：符合条件的有 $(4,6)$，$(4,10)$。\n\n`2 6 4`：符合条件的有 $(4,6)$。", "locale": "zh-CN"}}}
{"pid": "P6783", "type": "P", "difficulty": 7, "samples": [["10\n6 4\n2 3\n4 3\n10 8\n8 8\n9 9\n7 3\n1 9\n5 7\n3 7\n10\n1 3 2 5\n3 7 8 10\n3 4 3 6\n3 4 5 7\n6 8 1 8\n4 9 6 9\n1 5 6 9\n4 9 2 7\n1 1 1 5\n1 1 4 9\n10\n2 6\n7 8\n2 8\n6 9\n9 10\n4 5\n5 6\n3 7\n7 10\n1 2", "40\n22\n51\n31\n4\n12\n29\n36\n22\n31"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2008", "O2优化", "洛谷月赛", "Ynoi"], "title": "[Ynoi2008] rrusq", "background": "", "description": "给定一个二维平面，有 $n$ 个关键点，$m$ 个矩形，以及 $q$ 个询问，每个关键点有一个权值 $a_i$。\n\n定义一个左下角为 $(x_i,y_i)$，右上角为 $(x'_i,y'_i)$ 的矩形包含一个点 $a,b$，当且仅当 $x_i\\le a\\le x'_i$ 且 $y_i\\le b\\le y'_i$。\n\n每次询问给定 $[l,r]$，对于一个关键点 $i$ ，如果点 $i$ 在编号在 $[l,r]$ 内的任意一个矩形中，则认为 $i$ 被区间 $[l,r]$ 的矩形并包含，输出区间 $[l,r]$ 的矩形并包含的所有关键点的权值和。", "inputFormat": "第一行一个数 $n$。\n\n之后 $n$ 行每行两个元素 $p_i,a_i$，表示第 $i$ 个关键点 $(i,p_i)$，权值为 $a_i$，保证 $p$ 为一个 $1$ 到 $n$ 的排列。\n\n之后一行一个数 $m$。\n\n之后 $m$ 行每行四个元素 $x_i,x'_i,y_i,y'_i$，表示第 $i$ 个矩形左下角为 $(x_i,y_i)$，右上角为 $(x'_i,y'_i)$。\n\n之后一行一个数 $q$。\n\n之后 $q$ 行每行两个元素 $l,r$，表示一次对区间 $[l,r]$ 的询问。", "outputFormat": "对于每次询问，输出一行一个数表示答案。", "hint": "Idea：nzhtl1477&ccz181078，Solution：zx2003，Code：ccz181078，Data：nzhtl1477\n\n注意：本题采用**捆绑测试**，只有当你通过一个 subtask 中的所有测试点后，你才能拿到这个 subtask 的分数。\n\n对于其中 $5\\%$ 的数据，为样例 1。\n\n对于另外 $14\\%$ 的数据，$q=1$。\n\n对于另外 $19\\%$ 的数据，$n,m,q\\leq 500$。\n\n对于另外 $19\\%$ 的数据，$n,m\\leq 500$。\n\n对于另外 $19\\%$ 的数据，$n,m,q\\leq 2000$。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$1\\leq q \\leq 10^6$。\n\n$1\\leq a_i \\leq 10000$，$1\\leq x_i\\leq x_i'\\leq n$，$1\\leq y_i\\leq y_i'\\leq n$，$1\\leq l\\leq r\\leq m$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2008] rrusq", "background": "", "description": "给定一个二维平面，有 $n$ 个关键点，$m$ 个矩形，以及 $q$ 个询问，每个关键点有一个权值 $a_i$。\n\n定义一个左下角为 $(x_i,y_i)$，右上角为 $(x'_i,y'_i)$ 的矩形包含一个点 $a,b$，当且仅当 $x_i\\le a\\le x'_i$ 且 $y_i\\le b\\le y'_i$。\n\n每次询问给定 $[l,r]$，对于一个关键点 $i$ ，如果点 $i$ 在编号在 $[l,r]$ 内的任意一个矩形中，则认为 $i$ 被区间 $[l,r]$ 的矩形并包含，输出区间 $[l,r]$ 的矩形并包含的所有关键点的权值和。", "inputFormat": "第一行一个数 $n$。\n\n之后 $n$ 行每行两个元素 $p_i,a_i$，表示第 $i$ 个关键点 $(i,p_i)$，权值为 $a_i$，保证 $p$ 为一个 $1$ 到 $n$ 的排列。\n\n之后一行一个数 $m$。\n\n之后 $m$ 行每行四个元素 $x_i,x'_i,y_i,y'_i$，表示第 $i$ 个矩形左下角为 $(x_i,y_i)$，右上角为 $(x'_i,y'_i)$。\n\n之后一行一个数 $q$。\n\n之后 $q$ 行每行两个元素 $l,r$，表示一次对区间 $[l,r]$ 的询问。", "outputFormat": "对于每次询问，输出一行一个数表示答案。", "hint": "Idea：nzhtl1477&ccz181078，Solution：zx2003，Code：ccz181078，Data：nzhtl1477\n\n注意：本题采用**捆绑测试**，只有当你通过一个 subtask 中的所有测试点后，你才能拿到这个 subtask 的分数。\n\n对于其中 $5\\%$ 的数据，为样例 1。\n\n对于另外 $14\\%$ 的数据，$q=1$。\n\n对于另外 $19\\%$ 的数据，$n,m,q\\leq 500$。\n\n对于另外 $19\\%$ 的数据，$n,m\\leq 500$。\n\n对于另外 $19\\%$ 的数据，$n,m,q\\leq 2000$。\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 10^5$，$1\\leq q \\leq 10^6$。\n\n$1\\leq a_i \\leq 10000$，$1\\leq x_i\\leq x_i'\\leq n$，$1\\leq y_i\\leq y_i'\\leq n$，$1\\leq l\\leq r\\leq m$。\n", "locale": "zh-CN"}}}
{"pid": "P6784", "type": "P", "difficulty": 2, "samples": [["1 2 3", "2"], ["1 5 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "贪心", "2020", "洛谷原创", "枚举", "洛谷月赛"], "title": "「EZEC-3」造房子", "background": "pigstd 要去造房子了。", "description": "pigstd 有 $a$ 个 A 材料和 $b$ 个 B 材料，造**第** $i$ 层楼需要 $i$ 个 A 材料与 $i$ 个 B 材料。\n\n但是 pigstd 觉得房子不够高，于是他拿出了 $c$ 块钱，每块钱都可以用来买 $1$ 个 A 材料或者 $1$ 个 B 材料。\n\n现在 pigstd 想知道，他最多能建多少层楼的房子。", "inputFormat": "第一行三个整数 $a,b,c$。", "outputFormat": "一行一个整数，表示 pigstd 最多能建多少层楼的房子。", "hint": "**【样例 1 说明】**\n\npigstd 买 $2$ 个 A 材料和 $1$ 个 B 材料后就有 $3$ 个 A 材料和 $3$ 个 B 材料，最多可以建 $2$ 层楼的房子。\n\n（花费 $1+2$ 个 A 材料和 $1+2$ 个 B 材料）\n\n**【样例 2 说明】**\n\npigstd 买 $3$ 个 A 材料后就有 $4$ 个 A 材料和 $5$ 个 B 材料，最多可以建 $2$ 层楼的房子。\n\n（花费 $1+2$ 个 A 材料和 $1+2$ 个 B 材料）\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$0 \\le a,b,c \\le 10^{12}$。\n\n| 数据点编号 | 满足的条件 |\n| :----------: | :----------: |\n|$1-4,22$| $c = 0$ |\n|$5-8,21$| $a,b,c \\le 10^{3}$ |\n|$9-12$| $a,b,c \\le 10^{6}$ |\n|$13-20$| $a,b,c \\le 10^{12}$ | ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-3」造房子", "background": "pigstd 要去造房子了。", "description": "pigstd 有 $a$ 个 A 材料和 $b$ 个 B 材料，造**第** $i$ 层楼需要 $i$ 个 A 材料与 $i$ 个 B 材料。\n\n但是 pigstd 觉得房子不够高，于是他拿出了 $c$ 块钱，每块钱都可以用来买 $1$ 个 A 材料或者 $1$ 个 B 材料。\n\n现在 pigstd 想知道，他最多能建多少层楼的房子。", "inputFormat": "第一行三个整数 $a,b,c$。", "outputFormat": "一行一个整数，表示 pigstd 最多能建多少层楼的房子。", "hint": "**【样例 1 说明】**\n\npigstd 买 $2$ 个 A 材料和 $1$ 个 B 材料后就有 $3$ 个 A 材料和 $3$ 个 B 材料，最多可以建 $2$ 层楼的房子。\n\n（花费 $1+2$ 个 A 材料和 $1+2$ 个 B 材料）\n\n**【样例 2 说明】**\n\npigstd 买 $3$ 个 A 材料后就有 $4$ 个 A 材料和 $5$ 个 B 材料，最多可以建 $2$ 层楼的房子。\n\n（花费 $1+2$ 个 A 材料和 $1+2$ 个 B 材料）\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$0 \\le a,b,c \\le 10^{12}$。\n\n| 数据点编号 | 满足的条件 |\n| :----------: | :----------: |\n|$1-4,22$| $c = 0$ |\n|$5-8,21$| $a,b,c \\le 10^{3}$ |\n|$9-12$| $a,b,c \\le 10^{6}$ |\n|$13-20$| $a,b,c \\le 10^{12}$ | ", "locale": "zh-CN"}}}
{"pid": "P6785", "type": "P", "difficulty": 3, "samples": [["4 3 \n1 5\n2 4\n3 3\n0 2", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "2020", "洛谷原创", "洛谷月赛"], "title": "「EZEC-3」排列", "background": "", "description": "pigstd 有一堆数，他想在这么多数中选出若干个数排成一列，记为 $x_{1},x_{2},\\cdots,x_{p}$（$p$ 为数的个数）。\n\n这一列数合法**当且仅当**满足以下条件：\n\n- $p \\ge 2$。\n- 令 $y_{i} = x_{i + 1} - x_{i}$（特别的，$y_{p}=x_{1}-x_{p}$），如果把 $y_{1}$ 到 $y_{p}$ 按 $y_1,y_2,\\cdots,y_p$ 的顺序排成**一圈**，那么每两个相邻的数互为相反数且绝对值都为 $k$。\n\npigstd 想知道，在所有合法的数列中，所有在这个数列中的数之和**最大**是多少。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n$ 行，每行两个整数 $a_{i},b_{i}$，表示 pigstd 有 $b_{i}$ 个 $a_{i}$。\n\n**不保证 $a_{i}$ 互不相同，若有 $a_{i}$ 相同则累加其个数计算。**", "outputFormat": "一行一个整数，表示在每一种排列中，所有在这个排列中的数的**最大**的和。\n\n**若没有合法的排列，则只输出 $\\texttt{NO}$。**", "hint": "**【样例 1 说明】**\n\n当 pigstd 的排列为：$0,3,0,3$ 或 $3,0,3,0$ 时，总和最大，为 $6$。\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$，$0 \\le k,a_{i} \\le 10^6$，$1 \\le b_{i} \\le 10^6$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 points）：保证无合法的数列；\n- Subtask 2（15 points）：$k = 0$；\n- Subtask 3（5 points）：$n = 1$；\n- Subtask 4（5 points）：$n = 2$；\n- Subtask 5（30 points）：$n,k,a_i,b_i \\le 10^3$；\n- Subtask 6（40 points）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-3」排列", "background": "", "description": "pigstd 有一堆数，他想在这么多数中选出若干个数排成一列，记为 $x_{1},x_{2},\\cdots,x_{p}$（$p$ 为数的个数）。\n\n这一列数合法**当且仅当**满足以下条件：\n\n- $p \\ge 2$。\n- 令 $y_{i} = x_{i + 1} - x_{i}$（特别的，$y_{p}=x_{1}-x_{p}$），如果把 $y_{1}$ 到 $y_{p}$ 按 $y_1,y_2,\\cdots,y_p$ 的顺序排成**一圈**，那么每两个相邻的数互为相反数且绝对值都为 $k$。\n\npigstd 想知道，在所有合法的数列中，所有在这个数列中的数之和**最大**是多少。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $n$ 行，每行两个整数 $a_{i},b_{i}$，表示 pigstd 有 $b_{i}$ 个 $a_{i}$。\n\n**不保证 $a_{i}$ 互不相同，若有 $a_{i}$ 相同则累加其个数计算。**", "outputFormat": "一行一个整数，表示在每一种排列中，所有在这个排列中的数的**最大**的和。\n\n**若没有合法的排列，则只输出 $\\texttt{NO}$。**", "hint": "**【样例 1 说明】**\n\n当 pigstd 的排列为：$0,3,0,3$ 或 $3,0,3,0$ 时，总和最大，为 $6$。\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^6$，$0 \\le k,a_{i} \\le 10^6$，$1 \\le b_{i} \\le 10^6$。\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 points）：保证无合法的数列；\n- Subtask 2（15 points）：$k = 0$；\n- Subtask 3（5 points）：$n = 1$；\n- Subtask 4（5 points）：$n = 2$；\n- Subtask 5（30 points）：$n,k,a_i,b_i \\le 10^3$；\n- Subtask 6（40 points）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P6786", "type": "P", "difficulty": 4, "samples": [["4\n4 3 2 1", "5"], ["10\n6 7 18 4 17 10 9 1 3 8", "19"], ["3\n123456789 234567890 123456789", "246913578"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数学", "2020", "洛谷原创", "O2优化", "枚举", "洛谷月赛"], "title": "「SWTR-6」GCD & LCM", "background": "", "description": "小 A 有一个长度为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$。\n\n他想从这些数中选出一些数 $b_1,b_2,\\cdots,b_k$ 满足：对于所有 $i\\ (1\\leq i\\leq k)$，$b_i$ 要么是序列 $b$ 中的最大值，要么存在一个位置 $j$ 使得 $b_j>b_i$ 且 $b_i+b_j+\\gcd(b_i,b_j)=\\mathrm{lcm}(b_i,b_j)$。\n\n- 如果你不知道 $\\gcd$ 和 $\\mathrm{lcm}$ 是什么，可以点击最底部的「帮助/提示」部分的链接。\n\n小 A 想让选出的数之和尽量大。请求出这个最大值。", "inputFormat": "第一行一个整数 $n$，表示序列的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "**「样例 1 说明」**\n\n可以选择 $b=\\{2,3\\}$，因为 $2+3+\\gcd(2,3)=\\mathrm{lcm}(2,3)$。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 points）：$n\\leq2$；\n- Subtask 2（20 points）：$n\\leq 17$；\n- Subtask 3（15 points）：$a_i\\leq 2\\times 10^3$；\n- Subtask 4（15 points）：$n\\leq 2\\times 10^3$；\n- Subtask 5（10 points）：$n\\leq 5\\times 10^4$；\n- Subtask 6（10 points）：$a_i\\leq 10^7$；\n- Subtask 7（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 3\\times 10^5$，$1\\leq a_i\\leq 10^9$。\n\n**「帮助/提示」**\n\n$\\gcd$ 表示[最大公约数](https://baike.baidu.com/item/%E6%9C%80%E5%A4%A7%E5%85%AC%E7%BA%A6%E6%95%B0/869308?fr=aladdin)，$\\mathrm{lcm}$ 表示[最小公倍数](https://baike.baidu.com/item/%E6%9C%80%E5%B0%8F%E5%85%AC%E5%80%8D%E6%95%B0/6192375?fr=aladdin)。\n\n**「来源」**\n\n[【LGR-075】洛谷 8 月月赛 II Div.2 & SWTR-06 & EZEC Round 3](https://www.luogu.com.cn/contest/33190)。\n\nidea & solution & data by [Alex_Wei](https://www.luogu.com.cn/user/123294)。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-6」GCD & LCM", "background": "", "description": "小 A 有一个长度为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$。\n\n他想从这些数中选出一些数 $b_1,b_2,\\cdots,b_k$ 满足：对于所有 $i\\ (1\\leq i\\leq k)$，$b_i$ 要么是序列 $b$ 中的最大值，要么存在一个位置 $j$ 使得 $b_j>b_i$ 且 $b_i+b_j+\\gcd(b_i,b_j)=\\mathrm{lcm}(b_i,b_j)$。\n\n- 如果你不知道 $\\gcd$ 和 $\\mathrm{lcm}$ 是什么，可以点击最底部的「帮助/提示」部分的链接。\n\n小 A 想让选出的数之和尽量大。请求出这个最大值。", "inputFormat": "第一行一个整数 $n$，表示序列的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "**「样例 1 说明」**\n\n可以选择 $b=\\{2,3\\}$，因为 $2+3+\\gcd(2,3)=\\mathrm{lcm}(2,3)$。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 points）：$n\\leq2$；\n- Subtask 2（20 points）：$n\\leq 17$；\n- Subtask 3（15 points）：$a_i\\leq 2\\times 10^3$；\n- Subtask 4（15 points）：$n\\leq 2\\times 10^3$；\n- Subtask 5（10 points）：$n\\leq 5\\times 10^4$；\n- Subtask 6（10 points）：$a_i\\leq 10^7$；\n- Subtask 7（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 3\\times 10^5$，$1\\leq a_i\\leq 10^9$。\n\n**「帮助/提示」**\n\n$\\gcd$ 表示[最大公约数](https://baike.baidu.com/item/%E6%9C%80%E5%A4%A7%E5%85%AC%E7%BA%A6%E6%95%B0/869308?fr=aladdin)，$\\mathrm{lcm}$ 表示[最小公倍数](https://baike.baidu.com/item/%E6%9C%80%E5%B0%8F%E5%85%AC%E5%80%8D%E6%95%B0/6192375?fr=aladdin)。\n\n**「来源」**\n\n[【LGR-075】洛谷 8 月月赛 II Div.2 & SWTR-06 & EZEC Round 3](https://www.luogu.com.cn/contest/33190)。\n\nidea & solution & data by [Alex_Wei](https://www.luogu.com.cn/user/123294)。", "locale": "zh-CN"}}}
{"pid": "P6787", "type": "P", "difficulty": 5, "samples": [["4\n1 4 2 3\n3 -1 -1 2", "4\n3 2\n1 4"], ["4\n5 7 1 3\n-1 -1 1 1", "7\n1 2\n3 4"], ["4\n1 9 4 5\n4 -1 4 2", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2020", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「SWTR-6」Snow Mountain", "background": "**题目背景与解题无关。**\n\n**题目描述最下方有简化版题意。**\n\n天空中飘着雪，放眼望去白茫茫一片。小 A 拿着地图，四处探寻着。\n\n突然，只见前方有一个洞穴。出于好奇心，小 A 走了进去。\n\n洞穴里黑漆漆一片，一眼望不到尽头。道路的两旁尽是白骨，显然，这是曾经来这里探险的人们的残骸。小 A 打了一个冷颤。\n\n这时，小 A 留意到了地上的一张纸片。打开来一看，上面竟写着：\n\n$$\\texttt{Please contact lydsy2012@163.com!}$$", "description": "> 洞穴里有一些水晶，每个水晶有一个能量值 $a_i$。**能量值有大有小，但不会相同。** 这些神秘的水晶上附着邪恶势力的灵魂。现在你的任务是摧毁这些水晶，并让它们释放出的邪恶能量能量尽可能小。\n> \n> 你可以选择两个未被摧毁的水晶 $i,j$，将它们摧毁并释放出 $\\min(a_i,a_j)\\times k$ 的邪恶能量。其中 $k$ 表示这是第 $k$ 次摧毁。\n> \n> 不过有一些**无序**水晶对 $(x,y)$，如果你将它们一并摧毁，就会发生强大的共振导致山洞倒塌，使你葬身其中！\n\n带着这张纸片，小 A 来到了山洞的尽头，果然发现了 $n$ 个水晶（$n$ 为偶数）。正如纸片上所说，每个水晶都有一个能量值 $a_i$。\n\n对这些水晶进行一番观察，小 A 发现了一个规律：每个水晶 $i$ 在**所有能量值比它大**的水晶中，只会和**最多一个**发生共振，记其编号为 $x_i$。\n\n现在小 A 知道了 $a_i,x_i$，你能帮助他求出摧毁这些水晶释放出邪恶能量之和的最小值吗？无法摧毁输出 $\\texttt{-1}$。否则先输出最小值，再输出摧毁方案。\n\n若摧毁方案有多种，输出任意一种即可。\n\n- 需要注意的是，摧毁后水晶编号不会发生改变。\n\n---\n\n简化版题意：\n\n给定两个长为 $n\\ (2|n)$ 的序列 $a,x$，满足 $a_i$ 互不相同且如果 $x_i \\neq -1$，那么 $a_{x_i}>a_i$。\n\n现在需要进行 $\\frac{n}{2}$ 次删除操作：选择两个未被删除的数 $a_i,a_j$ 满足 $x_i\\neq j$ 且 $x_j\\neq i$，并用 $\\min(a_i,a_j)\\times k$ 的代价将这两个数从序列 $a$ 中删去（删除后剩余元素下标不变），其中 $k$ 表示这是第 $k$ 次删除。\n\n求删除所有数的最小代价与方案。无解输出 $\\texttt{-1}$。若方案有多种，输出任意一种即可。", "inputFormat": "第一行一个整数 $n$，保证 $n$ 是偶数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，保证 $a_i$ 互不相同。\n\n接下来一行 $n$ 个整数 $x_i$，如果 $x_i=-1$ 则表示第 $i$ 个水晶不与能量值比它大的水晶发生共振；否则保证 $a_{x_i}>a_i$。\n\n**题目输入量较大，建议使用 `scanf`。**", "outputFormat": "若题目无解，输出一行 $\\texttt{-1}$。\n\n否则首先输出一行一个整数，表示释放出邪恶能量之和的最小值。\n\n接下来 $\\dfrac{n}{2}$ 行每行两个由空格隔开的整数，表示被摧毁的水晶对。\n\n**题目输出量较大，建议使用 `printf`。**", "hint": "**「样例 3 说明」**\n\n无法摧毁所有水晶，因为水晶 $4$ 无法被摧毁。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 points）：$n=2$；\n- Subtask 2（20 points）：$n \\leq 10$；\n- Subtask 3（15 points）：$x_i=-1$；\n- Subtask 4（20 points）：$n\\leq 3\\times 10^3$；\n- Subtask 5（15 points）：$a_i$ 升序排列，即 $a_i<a_{i+1}\\ (1\\leq i<n)$；\n- Subtask 6（24 points）：无特殊限制。\n- Subtask 7（1 point）：hack 数据。\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 5 \\times 10^5$，$1 \\leq a_i \\leq 10^9$。  \n保证 $n$ 为偶数且 $a_i$ 互不相同。  \n保证答案不超过 $2^{63}-1$。\n\n**「帮助/提示」**\n\n请注意 IO 优化。\n\n**「Special Judge」**\n\n**本题使用 SPJ。**\n\n**请认真阅读输出格式。** 输出格式有误可能导致 UKE。\n\n若你的输出的第一行与答案的第一行不同，你将获得本测试点的 $0\\%$ 分数。\n\n若无解且第一行相同，你将获得本测试点的 $100\\%$ 分数。\n\n若有解且第一行相同，但方案有误，你将获得本测试点的 $60\\%$ 分数。\n\n若有解且第一行相同，方案正确，你将获得本测试点的 $100\\%$ 分数。\n\n另附 `checker` 与 `testlib.h`。\n\n百度网盘链接：[link](https://pan.baidu.com/s/1Tk-8-UiLzCpOuPVuoCcbbQ)，提取码：b7eg。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SWTR-6」Snow Mountain", "background": "**题目背景与解题无关。**\n\n**题目描述最下方有简化版题意。**\n\n天空中飘着雪，放眼望去白茫茫一片。小 A 拿着地图，四处探寻着。\n\n突然，只见前方有一个洞穴。出于好奇心，小 A 走了进去。\n\n洞穴里黑漆漆一片，一眼望不到尽头。道路的两旁尽是白骨，显然，这是曾经来这里探险的人们的残骸。小 A 打了一个冷颤。\n\n这时，小 A 留意到了地上的一张纸片。打开来一看，上面竟写着：\n\n$$\\texttt{Please contact lydsy2012@163.com!}$$", "description": "> 洞穴里有一些水晶，每个水晶有一个能量值 $a_i$。**能量值有大有小，但不会相同。** 这些神秘的水晶上附着邪恶势力的灵魂。现在你的任务是摧毁这些水晶，并让它们释放出的邪恶能量能量尽可能小。\n> \n> 你可以选择两个未被摧毁的水晶 $i,j$，将它们摧毁并释放出 $\\min(a_i,a_j)\\times k$ 的邪恶能量。其中 $k$ 表示这是第 $k$ 次摧毁。\n> \n> 不过有一些**无序**水晶对 $(x,y)$，如果你将它们一并摧毁，就会发生强大的共振导致山洞倒塌，使你葬身其中！\n\n带着这张纸片，小 A 来到了山洞的尽头，果然发现了 $n$ 个水晶（$n$ 为偶数）。正如纸片上所说，每个水晶都有一个能量值 $a_i$。\n\n对这些水晶进行一番观察，小 A 发现了一个规律：每个水晶 $i$ 在**所有能量值比它大**的水晶中，只会和**最多一个**发生共振，记其编号为 $x_i$。\n\n现在小 A 知道了 $a_i,x_i$，你能帮助他求出摧毁这些水晶释放出邪恶能量之和的最小值吗？无法摧毁输出 $\\texttt{-1}$。否则先输出最小值，再输出摧毁方案。\n\n若摧毁方案有多种，输出任意一种即可。\n\n- 需要注意的是，摧毁后水晶编号不会发生改变。\n\n---\n\n简化版题意：\n\n给定两个长为 $n\\ (2|n)$ 的序列 $a,x$，满足 $a_i$ 互不相同且如果 $x_i \\neq -1$，那么 $a_{x_i}>a_i$。\n\n现在需要进行 $\\frac{n}{2}$ 次删除操作：选择两个未被删除的数 $a_i,a_j$ 满足 $x_i\\neq j$ 且 $x_j\\neq i$，并用 $\\min(a_i,a_j)\\times k$ 的代价将这两个数从序列 $a$ 中删去（删除后剩余元素下标不变），其中 $k$ 表示这是第 $k$ 次删除。\n\n求删除所有数的最小代价与方案。无解输出 $\\texttt{-1}$。若方案有多种，输出任意一种即可。", "inputFormat": "第一行一个整数 $n$，保证 $n$ 是偶数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，保证 $a_i$ 互不相同。\n\n接下来一行 $n$ 个整数 $x_i$，如果 $x_i=-1$ 则表示第 $i$ 个水晶不与能量值比它大的水晶发生共振；否则保证 $a_{x_i}>a_i$。\n\n**题目输入量较大，建议使用 `scanf`。**", "outputFormat": "若题目无解，输出一行 $\\texttt{-1}$。\n\n否则首先输出一行一个整数，表示释放出邪恶能量之和的最小值。\n\n接下来 $\\dfrac{n}{2}$ 行每行两个由空格隔开的整数，表示被摧毁的水晶对。\n\n**题目输出量较大，建议使用 `printf`。**", "hint": "**「样例 3 说明」**\n\n无法摧毁所有水晶，因为水晶 $4$ 无法被摧毁。\n\n**「数据范围与约定」**\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 points）：$n=2$；\n- Subtask 2（20 points）：$n \\leq 10$；\n- Subtask 3（15 points）：$x_i=-1$；\n- Subtask 4（20 points）：$n\\leq 3\\times 10^3$；\n- Subtask 5（15 points）：$a_i$ 升序排列，即 $a_i<a_{i+1}\\ (1\\leq i<n)$；\n- Subtask 6（24 points）：无特殊限制。\n- Subtask 7（1 point）：hack 数据。\n\n对于 $100\\%$ 的数据，$2 \\leq n \\leq 5 \\times 10^5$，$1 \\leq a_i \\leq 10^9$。  \n保证 $n$ 为偶数且 $a_i$ 互不相同。  \n保证答案不超过 $2^{63}-1$。\n\n**「帮助/提示」**\n\n请注意 IO 优化。\n\n**「Special Judge」**\n\n**本题使用 SPJ。**\n\n**请认真阅读输出格式。** 输出格式有误可能导致 UKE。\n\n若你的输出的第一行与答案的第一行不同，你将获得本测试点的 $0\\%$ 分数。\n\n若无解且第一行相同，你将获得本测试点的 $100\\%$ 分数。\n\n若有解且第一行相同，但方案有误，你将获得本测试点的 $60\\%$ 分数。\n\n若有解且第一行相同，方案正确，你将获得本测试点的 $100\\%$ 分数。\n\n另附 `checker` 与 `testlib.h`。\n\n百度网盘链接：[link](https://pan.baidu.com/s/1Tk-8-UiLzCpOuPVuoCcbbQ)，提取码：b7eg。", "locale": "zh-CN"}}}
{"pid": "P6788", "type": "P", "difficulty": 6, "samples": [["4 998244353", "648735108"], ["10 1000000007", "872041698"]], "limits": {"time": [900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900, 900], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "2020", "洛谷原创", "O2优化", "素数判断,质数,筛法", "洛谷月赛"], "title": "「EZEC-3」四月樱花", "background": "$$又到樱花曼舞的春日，$$\n\n$$花蕾，像无数星星闪烁在枝头含春嬉戏，$$\n\n$$心有灵犀；$$\n\n$$又是为花吹雪的季节，$$\n\n$$花蕊，引万千蜂蝶赶树梢抱春絮语，$$\n\n$$心有念想。$$\n\n$$开了，一夜乍起，$$\n\n$$火树樱花汇聚开遍山野好似茫茫沧海；$$\n\n$$大地樱花，$$\n\n$$赏心悦目怒放层林尽染好似朵朵云霞；$$\n\n$$纵有三千烦恼，$$\n\n$$不过灿烂阳光下释然地娓娓一笑；$$\n\n$$纵有万般郁闷，$$\n\n$$不如和煦暖风里淡淡地悠悠一了；$$\n\n\n\n[——《四月樱花》](http://music.163.com/song?id=1355079681&userid=587823498)\n\n![樱花](https://cdn.luogu.com.cn/upload/image_hosting/g5m4h8a3.png)", "description": "在樱花盛开的四月，```Muxii``` 望着满天飘落的樱花，向身旁的 ```ZZH``` 问道：\n\n“究竟有多少朵樱花在这个四月飘落？”\n\n```ZZH``` 答道：“樱花飘落的朵数 $s$ 与时间 $t$ 有如下关系：\n\n$$s=\\prod_{x=1}^t\\prod_{y|x}\\frac{y^{d(y)}}{\\prod_{z|y}(z+1)^2}$$\n\n其中 $d(y)$ 表示 $y$ 的约数个数。”\n\n但作为一个~~文科生~~萌新，```Muxii``` 显然无法清楚地知道具体的数目，因此他只好继续向 ```ZZH``` 询问这个问题的答案。\n\n由于数量可能很大，所以你只需要替 ```ZZH``` 告诉 ```Muxii``` 他所需要的答案对 $p$ 取模的结果就好了。", "inputFormat": "两个正整数 $t$ 和 $p$，分别表示 ```Muxii``` 询问的时间、模数。", "outputFormat": "输出一个正整数 $s$，表示樱花飘落的朵数。答案对 $p$ 取模。", "hint": "**「样例 1 说明」**\n\n代入计算可得答案为 $\\frac1{2073600}$，由于 $2073600$ 在模 $998244353$ 意义下的逆元为 $648735108$，故最终答案为 $1×648735108\\bmod998244353 = 648735108$。\n\n**「数据范围与约定」**\n\n**数据保证答案的最简表示中分母不含 $p$ 和 $p$ 的倍数。**\n\n对于所有数据，保证 $1\\leq t\\leq 2.5×10^9$，$9.9×10^8<p<1.1×10^9$ 且 $p$ 为质数。\n|子任务编号|$t≤$|分值|\n|:-:|:-:|:-:|\n|$1$|$10^3$|$5$|\n|$2$|$10^4$|$5$|\n|$3$|$2×10^5$|$10$|\n|$4$|$2×10^6$|$20$|\n|$5$|$10^7$|$20$|\n|$6$|$10^8$|$20$|\n|$7$|$2.5×10^9$|$20$|\n\n注：本题采用**捆绑测试**，即必须通过单个子任务的所有测试点才可获得该子任务的分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「EZEC-3」四月樱花", "background": "$$又到樱花曼舞的春日，$$\n\n$$花蕾，像无数星星闪烁在枝头含春嬉戏，$$\n\n$$心有灵犀；$$\n\n$$又是为花吹雪的季节，$$\n\n$$花蕊，引万千蜂蝶赶树梢抱春絮语，$$\n\n$$心有念想。$$\n\n$$开了，一夜乍起，$$\n\n$$火树樱花汇聚开遍山野好似茫茫沧海；$$\n\n$$大地樱花，$$\n\n$$赏心悦目怒放层林尽染好似朵朵云霞；$$\n\n$$纵有三千烦恼，$$\n\n$$不过灿烂阳光下释然地娓娓一笑；$$\n\n$$纵有万般郁闷，$$\n\n$$不如和煦暖风里淡淡地悠悠一了；$$\n\n\n\n[——《四月樱花》](http://music.163.com/song?id=1355079681&userid=587823498)\n\n![樱花](https://cdn.luogu.com.cn/upload/image_hosting/g5m4h8a3.png)", "description": "在樱花盛开的四月，```Muxii``` 望着满天飘落的樱花，向身旁的 ```ZZH``` 问道：\n\n“究竟有多少朵樱花在这个四月飘落？”\n\n```ZZH``` 答道：“樱花飘落的朵数 $s$ 与时间 $t$ 有如下关系：\n\n$$s=\\prod_{x=1}^t\\prod_{y|x}\\frac{y^{d(y)}}{\\prod_{z|y}(z+1)^2}$$\n\n其中 $d(y)$ 表示 $y$ 的约数个数。”\n\n但作为一个~~文科生~~萌新，```Muxii``` 显然无法清楚地知道具体的数目，因此他只好继续向 ```ZZH``` 询问这个问题的答案。\n\n由于数量可能很大，所以你只需要替 ```ZZH``` 告诉 ```Muxii``` 他所需要的答案对 $p$ 取模的结果就好了。", "inputFormat": "两个正整数 $t$ 和 $p$，分别表示 ```Muxii``` 询问的时间、模数。", "outputFormat": "输出一个正整数 $s$，表示樱花飘落的朵数。答案对 $p$ 取模。", "hint": "**「样例 1 说明」**\n\n代入计算可得答案为 $\\frac1{2073600}$，由于 $2073600$ 在模 $998244353$ 意义下的逆元为 $648735108$，故最终答案为 $1×648735108\\bmod998244353 = 648735108$。\n\n**「数据范围与约定」**\n\n**数据保证答案的最简表示中分母不含 $p$ 和 $p$ 的倍数。**\n\n对于所有数据，保证 $1\\leq t\\leq 2.5×10^9$，$9.9×10^8<p<1.1×10^9$ 且 $p$ 为质数。\n|子任务编号|$t≤$|分值|\n|:-:|:-:|:-:|\n|$1$|$10^3$|$5$|\n|$2$|$10^4$|$5$|\n|$3$|$2×10^5$|$10$|\n|$4$|$2×10^6$|$20$|\n|$5$|$10^7$|$20$|\n|$6$|$10^8$|$20$|\n|$7$|$2.5×10^9$|$20$|\n\n注：本题采用**捆绑测试**，即必须通过单个子任务的所有测试点才可获得该子任务的分数。", "locale": "zh-CN"}}}
{"pid": "P6789", "type": "P", "difficulty": 7, "samples": [["4 6\n2 3 294405877\n3 4 340909188\n1 2 7718822\n2 4 340754548\n1 4 209906514\n1 3 810986947\n", "121593921\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化", "洛谷月赛"], "title": "寒妖王", "background": "寒冷的保加利亚小屋里，你发现了寒妖王给你提出的一个问题。", "description": "给定一张 $n$ 个点 $m$ 条边的图，保证无重边与自环。第 $i$ 条边有权值 $w _i$。\n\n定义一个边集是好的，当且仅当将这些边和与这些边相连的点取出来形成的图没有两个或以上处在同一个连通块的不同的环（两个环不同指的是构成环的边集不能完全相同）。同时定义一个边集的权值为边集中所有边的边权之和。\n\n现在，每条边均有 $50\\%$ 的概率消失。求在消失过程完成后，图中权值最大的好边集的权值的期望。\n\n输出该期望值对一个大质数 $998244353$ 取模的结果。\n\n可以知道这里的期望值是一个有理数。其对 $998244353$ 取模的结果相当于是将其写为最简分数形式 $\\frac x y$（其中 $x$ 与 $y$ 互质）后 $x \\times y ^{998244351}$ 对 $998244353$ 取模的结果。", "inputFormat": "第一行两个正整数 $n, m$，表示该图的点数和边数。\n\n接下来 $m$ 行，每行三个整数 $u _i, v _i, w_i$，分别描述了图中第 $i$ 条边的两个端点与这条边的权值。", "outputFormat": "一行一个正整数表示答案。", "hint": "**「数据范围与约定」**\n\n- 对于前 $20\\%$ 的数据，保证 $n \\le 10$，$m \\le 20$；\n- 对于前 $40\\%$ 的数据，保证 $n \\le 10$，$m \\le 30$；\n- 对于另外 $30\\%$ 的数据，保证所有边的权值均相等；\n- 对于所有数据，保证 $1 \\le n \\le 15$，$1 \\le m \\le 60$，$1 \\le u _i, v _i \\le n$，$0 \\le w _i < 998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "寒妖王", "background": "寒冷的保加利亚小屋里，你发现了寒妖王给你提出的一个问题。", "description": "给定一张 $n$ 个点 $m$ 条边的图，保证无重边与自环。第 $i$ 条边有权值 $w _i$。\n\n定义一个边集是好的，当且仅当将这些边和与这些边相连的点取出来形成的图没有两个或以上处在同一个连通块的不同的环（两个环不同指的是构成环的边集不能完全相同）。同时定义一个边集的权值为边集中所有边的边权之和。\n\n现在，每条边均有 $50\\%$ 的概率消失。求在消失过程完成后，图中权值最大的好边集的权值的期望。\n\n输出该期望值对一个大质数 $998244353$ 取模的结果。\n\n可以知道这里的期望值是一个有理数。其对 $998244353$ 取模的结果相当于是将其写为最简分数形式 $\\frac x y$（其中 $x$ 与 $y$ 互质）后 $x \\times y ^{998244351}$ 对 $998244353$ 取模的结果。", "inputFormat": "第一行两个正整数 $n, m$，表示该图的点数和边数。\n\n接下来 $m$ 行，每行三个整数 $u _i, v _i, w_i$，分别描述了图中第 $i$ 条边的两个端点与这条边的权值。", "outputFormat": "一行一个正整数表示答案。", "hint": "**「数据范围与约定」**\n\n- 对于前 $20\\%$ 的数据，保证 $n \\le 10$，$m \\le 20$；\n- 对于前 $40\\%$ 的数据，保证 $n \\le 10$，$m \\le 30$；\n- 对于另外 $30\\%$ 的数据，保证所有边的权值均相等；\n- 对于所有数据，保证 $1 \\le n \\le 15$，$1 \\le m \\le 60$，$1 \\le u _i, v _i \\le n$，$0 \\le w _i < 998244353$。", "locale": "zh-CN"}}}
{"pid": "P6790", "type": "P", "difficulty": 7, "samples": [["4 5\n1 2\n1 3\n2 3\n2 4\n3 4", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["树形数据结构", "2020", "各省省选", "陕西", "组合数学", "广义串并联图"], "title": "[SNOI2020] 生成树", "background": "", "description": "给定无向连通图 $G$，已知 $G$ 在删掉一条边后是一颗仙人掌（仙人掌：不存在两个拥有公共边的简单环的无向联通图），求 $G$ 的生成树个数。结果对 $998244353$ 取模。", "inputFormat": "第一行两个整数 $n,m$，表示图 $G$ 的点数和边数。\n\n接下来 $m$ 行，每行两个用空格分隔的正整数 $u,v(1 \\le u,v  \\le n)$，表示边 $(u,v)\\in G$。", "outputFormat": "输出一行一个整数，表示图 $G$ 的生成树个数对 $998244353$ 取模的结果。", "hint": "对于所有数据，$1 \\le n \\le m \\le2 \\times 10^5$。\n\n- 对于 $10\\%$ 的数据，$1 \\le n=m \\le 2000$。\n- 对于另外 $40\\%$ 的数据，$1 \\le n,m \\le 10^5$ 且 $G$ 本身是仙人掌。\n- 对于余下 $50\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2020] 生成树", "background": "", "description": "给定无向连通图 $G$，已知 $G$ 在删掉一条边后是一颗仙人掌（仙人掌：不存在两个拥有公共边的简单环的无向联通图），求 $G$ 的生成树个数。结果对 $998244353$ 取模。", "inputFormat": "第一行两个整数 $n,m$，表示图 $G$ 的点数和边数。\n\n接下来 $m$ 行，每行两个用空格分隔的正整数 $u,v(1 \\le u,v  \\le n)$，表示边 $(u,v)\\in G$。", "outputFormat": "输出一行一个整数，表示图 $G$ 的生成树个数对 $998244353$ 取模的结果。", "hint": "对于所有数据，$1 \\le n \\le m \\le2 \\times 10^5$。\n\n- 对于 $10\\%$ 的数据，$1 \\le n=m \\le 2000$。\n- 对于另外 $40\\%$ 的数据，$1 \\le n,m \\le 10^5$ 且 $G$ 本身是仙人掌。\n- 对于余下 $50\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P6791", "type": "P", "difficulty": 7, "samples": [["3\n1 5\n2 5\n1 10", "2\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "博弈论", "2020", "各省省选", "陕西"], "title": "[SNOI2020] 取石子", "background": "", "description": "甲乙两个人玩取石子游戏。他们面前有一堆共 $n$ 个石子，然后由甲先手，两人轮流从中取走石子：甲第一次取走的个数不能超过 $k$，接下来每个人取走的个数不能超过上一个人刚刚取走个数的 $2$ 倍。每人每次必须至少取一个石子。取走最后一个石子的人失败，另一方获胜。现在已知 $k$，请你求出在 $1$ 到 $N$ 中有多少整数 $n$ 使得甲在 $n$ 颗石子的游戏中有必胜策略。", "inputFormat": "**多组数据。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n接下来 $T$ 行每行两个用空格隔开的整数 $k,N$，表示一组询问。", "outputFormat": "输出 $T$ 行，按照输入顺序，每行一个整数表示答案。", "hint": "#### 样例说明\n\n对于样例 $1$，当 $k=1$ 时：\n\n- 如果 $n=1$，甲只能取走唯一一颗石子从而失败。\n- 如果 $n=2$，甲取走一颗石子，乙只能取走最后一颗石子，甲获胜。\n- 如果 $n=3$，甲只能取走一颗石子，乙再取走一颗石子，甲只能取走最后一颗石子从而失败。\n- 如果 $n=4$，甲只能取走一颗石子，乙再取走两颗石子，甲只能取走最后一颗石子从而失败。\n- 如果 $n=5$，甲只能取走一颗石子，乙只能取走一颗或两颗石子，甲总能再留给乙留下最后一颗石子从而获胜。\n\n#### 数据说明与提示\n\n对于所有数据，$1 \\le T \\le 10^5,k,N \\le 10^{18}$。\n\n- 对于 $10\\%$ 的数据，$T,N \\le 500$。\n- 对于另外 $20\\%$ 的数据，$T,N \\le 10^5$。\n- 对于另外 $20\\%$ 的数据，$T \\le 3,N \\le 3 \\times 10^6$。\n- 对于另外 $20\\%$ 的数据，$k=1$。\n- 对于余下 $30\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2020] 取石子", "background": "", "description": "甲乙两个人玩取石子游戏。他们面前有一堆共 $n$ 个石子，然后由甲先手，两人轮流从中取走石子：甲第一次取走的个数不能超过 $k$，接下来每个人取走的个数不能超过上一个人刚刚取走个数的 $2$ 倍。每人每次必须至少取一个石子。取走最后一个石子的人失败，另一方获胜。现在已知 $k$，请你求出在 $1$ 到 $N$ 中有多少整数 $n$ 使得甲在 $n$ 颗石子的游戏中有必胜策略。", "inputFormat": "**多组数据。**\n\n第一行一个正整数 $T$ 表示数据组数。\n\n接下来 $T$ 行每行两个用空格隔开的整数 $k,N$，表示一组询问。", "outputFormat": "输出 $T$ 行，按照输入顺序，每行一个整数表示答案。", "hint": "#### 样例说明\n\n对于样例 $1$，当 $k=1$ 时：\n\n- 如果 $n=1$，甲只能取走唯一一颗石子从而失败。\n- 如果 $n=2$，甲取走一颗石子，乙只能取走最后一颗石子，甲获胜。\n- 如果 $n=3$，甲只能取走一颗石子，乙再取走一颗石子，甲只能取走最后一颗石子从而失败。\n- 如果 $n=4$，甲只能取走一颗石子，乙再取走两颗石子，甲只能取走最后一颗石子从而失败。\n- 如果 $n=5$，甲只能取走一颗石子，乙只能取走一颗或两颗石子，甲总能再留给乙留下最后一颗石子从而获胜。\n\n#### 数据说明与提示\n\n对于所有数据，$1 \\le T \\le 10^5,k,N \\le 10^{18}$。\n\n- 对于 $10\\%$ 的数据，$T,N \\le 500$。\n- 对于另外 $20\\%$ 的数据，$T,N \\le 10^5$。\n- 对于另外 $20\\%$ 的数据，$T \\le 3,N \\le 3 \\times 10^6$。\n- 对于另外 $20\\%$ 的数据，$k=1$。\n- 对于余下 $30\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P6792", "type": "P", "difficulty": 7, "samples": [["5 7\n2 -4 6 -5 5\n1 1 5\n0 1 5 -4\n1 1 5\n0 3 4 -1\n1 1 5\n0 1 3 -1\n1 1 5", "6\n7\n10\n11"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "线段树", "各省省选", "O2优化", "陕西", "吉司机线段树 segment tree beats"], "title": "[SNOI2020] 区间和", "background": "", "description": "有一个长度为 $n$ 的整数数列 $a_1,a_2,\\cdots,a_n$（可能含有负数）。现在对其进行 $q$ 次操作，每次操作是以下二者之一：\n\n- `0 l r x` 表示对于 $[l,r]$，将 $a_i$ 赋值为 $\\max(a_i,x)$；\n- `1 l r` 求区间 $[l,r]$ 的最大子段和。即：$\\max(0, \\max_{l\\le u\\le v\\le r} (\\sum_{i=u}^v a_i))$。", "inputFormat": "第一行两个正整数 $n,q$，分别表示序列长度和操作次数；\n\n第二行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$ 表示初始的序列；\n\n接下来 $q$ 行，每行形如 `0 l r x` 或 `1 l r` 表示一次操作。", "outputFormat": "对于每个形如 `1 l r` 的操作，输出一行一个整数表示答案。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n- 第 $1$ 次询问时序列为 $2,-4,6,-5,5$，最大子段和为 $6$；\n- 第 $2$ 次询问时序列为 $2,-4,6,-4,5$，最大子段和为 $7$；\n- 第 $3$ 次询问时序列为 $2,-4,6,-1,5$，最大子段和为 $10$；\n- 第 $4$ 次询问时序列为 $2,-1,6,-1,5$，最大子段和为 $11$。\n\n#### 数据规模与约定\n\n对于所有数据，$1\\le n\\le10^5, 1\\le q\\le 2\\times 10^5, |a_i|, |x|\\le 10^9$。\n\n- 对于 $10\\%$ 的数据，$n,q \\le 200$；\n- 对于另外 $10\\%$ 的数据，$n,q \\le 2000$；\n- 对于另外 $25\\%$ 的数据，每次操作 $0$ 均满足 $l=r$（即，只有单点修改）；\n- 对于另外 $20\\%$ 的数据，每次操作 $1$ 均满足 $l=1,r=n$（即，只有全局询问）；\n- 对于余下 $35\\%$ 的数据，无特殊限制。\n\n**有来自出题人的 3 个 hack 数据点**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2020] 区间和", "background": "", "description": "有一个长度为 $n$ 的整数数列 $a_1,a_2,\\cdots,a_n$（可能含有负数）。现在对其进行 $q$ 次操作，每次操作是以下二者之一：\n\n- `0 l r x` 表示对于 $[l,r]$，将 $a_i$ 赋值为 $\\max(a_i,x)$；\n- `1 l r` 求区间 $[l,r]$ 的最大子段和。即：$\\max(0, \\max_{l\\le u\\le v\\le r} (\\sum_{i=u}^v a_i))$。", "inputFormat": "第一行两个正整数 $n,q$，分别表示序列长度和操作次数；\n\n第二行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$ 表示初始的序列；\n\n接下来 $q$ 行，每行形如 `0 l r x` 或 `1 l r` 表示一次操作。", "outputFormat": "对于每个形如 `1 l r` 的操作，输出一行一个整数表示答案。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n- 第 $1$ 次询问时序列为 $2,-4,6,-5,5$，最大子段和为 $6$；\n- 第 $2$ 次询问时序列为 $2,-4,6,-4,5$，最大子段和为 $7$；\n- 第 $3$ 次询问时序列为 $2,-4,6,-1,5$，最大子段和为 $10$；\n- 第 $4$ 次询问时序列为 $2,-1,6,-1,5$，最大子段和为 $11$。\n\n#### 数据规模与约定\n\n对于所有数据，$1\\le n\\le10^5, 1\\le q\\le 2\\times 10^5, |a_i|, |x|\\le 10^9$。\n\n- 对于 $10\\%$ 的数据，$n,q \\le 200$；\n- 对于另外 $10\\%$ 的数据，$n,q \\le 2000$；\n- 对于另外 $25\\%$ 的数据，每次操作 $0$ 均满足 $l=r$（即，只有单点修改）；\n- 对于另外 $20\\%$ 的数据，每次操作 $1$ 均满足 $l=1,r=n$（即，只有全局询问）；\n- 对于余下 $35\\%$ 的数据，无特殊限制。\n\n**有来自出题人的 3 个 hack 数据点**", "locale": "zh-CN"}}}
{"pid": "P6793", "type": "P", "difficulty": 6, "samples": [["5 3\naabaa\nababa", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "2020", "各省省选", "后缀自动机 SAM", "树形 DP", "陕西", "后缀数组 SA"], "title": "[SNOI2020] 字符串", "background": "", "description": "有两个长度为 $n$ 的由小写字母组成的字符串 $a,b$，取出他们所有长为 $k$ 的子串（各有 $n-k+1$ 个），这些子串分别组成集合 $A,B$。现在要修改 $A$ 中的串，使得 $A$ 和 $B$ 完全相同。可以任意次选择修改 $A$ 中一个串的一段后缀，花费为这段后缀的长度。总花费为每次修改花费之和，求总花费的最小值。", "inputFormat": "第一行两个整数 $n,k$ 表示字符串长度和子串长度；   \n第二行一个小写字母字符串 $a$；   \n第三行一个小写字母字符串 $b$。", "outputFormat": "输出一行一个整数表示总花费的最小值。", "hint": "#### 样例说明\n\n对于样例 $1$，所有子串为：$A = \\{aab,aba,baa\\}, B = \\{aba, bab, aba\\}$。可以看出有一对 $aba$ 是相同的，另外要把 $aab$ 改成 $aba$（花费 $2$），$baa$ 改成 $bab$（花费 $1$），总花费为 $3$。\n\n#### 数据规模与约定\n\n对于所有数据，$1\\le k\\le n\\le 1.5\\times 10^5$。\n\n- 对于 $10\\%$ 的数据，$n \\le 11$；\n- 对于另外 $20\\%$ 的数据，$n \\le 200$；\n- 对于另外 $20\\%$ 的数据，$n \\le 2000$；\n- 对于另外 $10\\%$ 的数据，字符串的每一位在小写字母中均匀随机；\n- 对于余下 $40\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2020] 字符串", "background": "", "description": "有两个长度为 $n$ 的由小写字母组成的字符串 $a,b$，取出他们所有长为 $k$ 的子串（各有 $n-k+1$ 个），这些子串分别组成集合 $A,B$。现在要修改 $A$ 中的串，使得 $A$ 和 $B$ 完全相同。可以任意次选择修改 $A$ 中一个串的一段后缀，花费为这段后缀的长度。总花费为每次修改花费之和，求总花费的最小值。", "inputFormat": "第一行两个整数 $n,k$ 表示字符串长度和子串长度；   \n第二行一个小写字母字符串 $a$；   \n第三行一个小写字母字符串 $b$。", "outputFormat": "输出一行一个整数表示总花费的最小值。", "hint": "#### 样例说明\n\n对于样例 $1$，所有子串为：$A = \\{aab,aba,baa\\}, B = \\{aba, bab, aba\\}$。可以看出有一对 $aba$ 是相同的，另外要把 $aab$ 改成 $aba$（花费 $2$），$baa$ 改成 $bab$（花费 $1$），总花费为 $3$。\n\n#### 数据规模与约定\n\n对于所有数据，$1\\le k\\le n\\le 1.5\\times 10^5$。\n\n- 对于 $10\\%$ 的数据，$n \\le 11$；\n- 对于另外 $20\\%$ 的数据，$n \\le 200$；\n- 对于另外 $20\\%$ 的数据，$n \\le 2000$；\n- 对于另外 $10\\%$ 的数据，字符串的每一位在小写字母中均匀随机；\n- 对于余下 $40\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P6794", "type": "P", "difficulty": 7, "samples": [["4 9\n1 3 2\n0 0 4 2\n3 1 1\n0 2 4 3\n3 3 1\n0 4 4 4\n3 5 1\n2 6 1 4\n1 7 4\n3 8 1", "0\n0\n4\n4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "线段树", "各省省选", "陕西", "可持久化线段树", "可持久化"], "title": "[SNOI2020] 水池", "background": null, "description": "有一个长条形的水池，可以划分成 $n$ 格。其中第 $i$ 格和 $i+1$ 格之间相邻，由一块高度为 $h_i$ 的可调节挡板隔开。第 $1$ 格左侧和第 $n$ 格右侧是无限高的池壁。初始时水池中没有水。现在进行 $q$ 次操作，操作有以下四种：\n\n- `0 i x h` 在第 $x$ 格灌水直到该格的水面高度不低于 $h$（若当前水面高度已经达到 $h$ 则无事发生）；\n- `1 i x` 打开第 $x$ 格底部的排水口直到该格的水流干，再关闭排水口；\n- `2 i x h` 将第 $x$ 格右侧的挡板高度增加到 $h$（不改变现有水面，保证挡板高度不会下降）；\n- `3 i x` 查询第 $x$ 格的水面高度。\n\n其中，$i$ 表示这次操作是基于第 $i$ 次操作之后的情况，$i=0$ 表示基于初始状态。也就是说，这个问题要求对操作可持久化。", "inputFormat": "第一行两个自然数 $n,q$，表示水池格数和操作次数。   \n接下来一行 $n - 1$ 个正整数 $h_i$ 表示挡板的初始高度。   \n接下来 $q$ 行每行一个正整数表示一次操作。", "outputFormat": "对每个操作 $3$ 输出一行一个整数表示答案。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0zot45nm.png)\n\n#### 数据规模与约定\n\n对于所有数据，$1\\le n,q\\le 2\\times 10^5, 0\\le h_i\\le 10^9$。\n\n- 对于 $10\\%$ 的数据，$n \\le 500$；\n- 对于另外 $20\\%$，没有操作 $1$，且 $i$ 从 $0$ 开始连续增长（不需要可持久化）；\n-  对于另外 $20\\%$，没有操作 $1$；\n- 对于另外 $20\\%$，且 $i$ 从 $0$ 开始连续增长（不需要可持久化）；\n- 对于余下 $30\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2020] 水池", "background": null, "description": "有一个长条形的水池，可以划分成 $n$ 格。其中第 $i$ 格和 $i+1$ 格之间相邻，由一块高度为 $h_i$ 的可调节挡板隔开。第 $1$ 格左侧和第 $n$ 格右侧是无限高的池壁。初始时水池中没有水。现在进行 $q$ 次操作，操作有以下四种：\n\n- `0 i x h` 在第 $x$ 格灌水直到该格的水面高度不低于 $h$（若当前水面高度已经达到 $h$ 则无事发生）；\n- `1 i x` 打开第 $x$ 格底部的排水口直到该格的水流干，再关闭排水口；\n- `2 i x h` 将第 $x$ 格右侧的挡板高度增加到 $h$（不改变现有水面，保证挡板高度不会下降）；\n- `3 i x` 查询第 $x$ 格的水面高度。\n\n其中，$i$ 表示这次操作是基于第 $i$ 次操作之后的情况，$i=0$ 表示基于初始状态。也就是说，这个问题要求对操作可持久化。", "inputFormat": "第一行两个自然数 $n,q$，表示水池格数和操作次数。   \n接下来一行 $n - 1$ 个正整数 $h_i$ 表示挡板的初始高度。   \n接下来 $q$ 行每行一个正整数表示一次操作。", "outputFormat": "对每个操作 $3$ 输出一行一个整数表示答案。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0zot45nm.png)\n\n#### 数据规模与约定\n\n对于所有数据，$1\\le n,q\\le 2\\times 10^5, 0\\le h_i\\le 10^9$。\n\n- 对于 $10\\%$ 的数据，$n \\le 500$；\n- 对于另外 $20\\%$，没有操作 $1$，且 $i$ 从 $0$ 开始连续增长（不需要可持久化）；\n-  对于另外 $20\\%$，没有操作 $1$；\n- 对于另外 $20\\%$，且 $i$ 从 $0$ 开始连续增长（不需要可持久化）；\n- 对于余下 $30\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P6795", "type": "P", "difficulty": 7, "samples": [["4 1\n2", "8\n2 1 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "2020", "各省省选", "Special Judge", "陕西", "构造"], "title": "[SNOI2020] 排列", "background": "", "description": "有一个 $n$ 阶排列 $p$，其前 $k$ 位 $p_1,p_2,\\cdots,p_k$ 已经确定了。\n\n定义排列 $p$ 中，$[l,r]$ 是一个值域连续段当且仅当：\n\n$$\\max(p_l, p_{l+1}, \\dots, p_r) - \\min(p_l, p_{l+1}, \\dots, p_r) = r-l$$\n\n$p$ 中值域连续段个数即所有 $1 \\le l \\le r \\le n$ 中值域连续段的总数。\n\n请你求出：所有可能的排列 $p$ 中，值域连续段个数的最大值，以及任意一种方案。", "inputFormat": "第一行两个整数 $n,k$，分别表示排列的阶数和以及确定的位数。    \n接下来一行由空格分隔的 $k$ 个正整数 $p_i$，表示排列一直的部分。（$k=0$ 则此行为空）", "outputFormat": "输出第一行一个整数表示值域连续段个数的最大值。    \n第二行 $n$ 个正整数表示任意一种方案。", "hint": "#### 样例说明\n\n对于样例 $1$，最优解为 $2,1,3,4$，有 $8$ 个值域连续段（$[1], [2], [3], [4], [1,2], [3,4], [1,3], [1,4]$）。$2,3,4,1$ 为另一个最优解。\n\n#### 数据规模与约定\n\n对于所有数据，$1\\le n\\le 2\\times 10^5, 0\\le k\\le n$。\n\n- 对于 $10\\%$ 的数据，$n \\le 10$；\n- 对于另外 $20\\%$ 的数据，$n \\le 22$；\n- 对于另外 $10\\%$ 的数据，$k \\le 1$；\n- 对于另外 $20\\%$ 的数据，$k=n$；\n- 对于余下 $40\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2020] 排列", "background": "", "description": "有一个 $n$ 阶排列 $p$，其前 $k$ 位 $p_1,p_2,\\cdots,p_k$ 已经确定了。\n\n定义排列 $p$ 中，$[l,r]$ 是一个值域连续段当且仅当：\n\n$$\\max(p_l, p_{l+1}, \\dots, p_r) - \\min(p_l, p_{l+1}, \\dots, p_r) = r-l$$\n\n$p$ 中值域连续段个数即所有 $1 \\le l \\le r \\le n$ 中值域连续段的总数。\n\n请你求出：所有可能的排列 $p$ 中，值域连续段个数的最大值，以及任意一种方案。", "inputFormat": "第一行两个整数 $n,k$，分别表示排列的阶数和以及确定的位数。    \n接下来一行由空格分隔的 $k$ 个正整数 $p_i$，表示排列一直的部分。（$k=0$ 则此行为空）", "outputFormat": "输出第一行一个整数表示值域连续段个数的最大值。    \n第二行 $n$ 个正整数表示任意一种方案。", "hint": "#### 样例说明\n\n对于样例 $1$，最优解为 $2,1,3,4$，有 $8$ 个值域连续段（$[1], [2], [3], [4], [1,2], [3,4], [1,3], [1,4]$）。$2,3,4,1$ 为另一个最优解。\n\n#### 数据规模与约定\n\n对于所有数据，$1\\le n\\le 2\\times 10^5, 0\\le k\\le n$。\n\n- 对于 $10\\%$ 的数据，$n \\le 10$；\n- 对于另外 $20\\%$ 的数据，$n \\le 22$；\n- 对于另外 $10\\%$ 的数据，$k \\le 1$；\n- 对于另外 $20\\%$ 的数据，$k=n$；\n- 对于余下 $40\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P6796", "type": "P", "difficulty": 5, "samples": [["3\n1 + 2 * 3", "22"], ["6\n1 * 1 * 4 * 5 * 1 * 4", "414"], ["3\n16 + 750 + 7", "3069"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP"], "title": "「StOI-2」好多表达式", "background": "本题为 [StOI](https://www.luogu.com.cn/team/24701) 第二场公开赛 [StOI Round2](https://www.luogu.com.cn/contest/32483) 之第一题.\n\n__注意:如果这个数是一个多位数，不会将它拆开__ By LHQing ,14:09\n\n:)", "description": "给定一个仅由数字、`+`、`*` 组成的表达式，请求出它的所有子表达式运算值之和对 $998,244,353$ 取模的结果。\n\n一个表达式的子表达式定义为 `一段连续的数字与其中的运算符构成的表达式` 。\n\n如果您仍然无法理解，**可以参看样例解释**。", "inputFormat": "第一行一个正整数 $n$ ，表示表达式中数字的个数。\n\n接下来一行是这个由 $n$ 个正整数与 $n-1$ 个运算符组成的表达式，其中数字与运算符中间有空格隔开。", "outputFormat": "输出一个数，表示最终的答案。", "hint": "## 样例解释\n\n所给定的表达式共有六个子表达式：\n$1$、$2$、$3$、$1+2$、$2 \\times 3$、$1+2 \\times 3$ ，值分别为 $1$、$2$、$3$、$3$、$6$、$7$ ，和为 $22$ 。\n\n---\n\n## 数据范围\n\n对于 $20\\%$ 的数据：$1 \\leq n \\leq 1000$ 。   \n对于另 $20\\%$ 的数据：不存在 `+` 。  \n对于另 $20\\%$ 的数据：仅存在一个 `+` 。   \n对于另 $20\\%$ 的数据：仅存在一个 `*` 。   \n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^{5}$ ，所有数字均不大于 $10^{9}$ ，运算符只包含 `+` 、`*` 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「StOI-2」好多表达式", "background": "本题为 [StOI](https://www.luogu.com.cn/team/24701) 第二场公开赛 [StOI Round2](https://www.luogu.com.cn/contest/32483) 之第一题.\n\n__注意:如果这个数是一个多位数，不会将它拆开__ By LHQing ,14:09\n\n:)", "description": "给定一个仅由数字、`+`、`*` 组成的表达式，请求出它的所有子表达式运算值之和对 $998,244,353$ 取模的结果。\n\n一个表达式的子表达式定义为 `一段连续的数字与其中的运算符构成的表达式` 。\n\n如果您仍然无法理解，**可以参看样例解释**。", "inputFormat": "第一行一个正整数 $n$ ，表示表达式中数字的个数。\n\n接下来一行是这个由 $n$ 个正整数与 $n-1$ 个运算符组成的表达式，其中数字与运算符中间有空格隔开。", "outputFormat": "输出一个数，表示最终的答案。", "hint": "## 样例解释\n\n所给定的表达式共有六个子表达式：\n$1$、$2$、$3$、$1+2$、$2 \\times 3$、$1+2 \\times 3$ ，值分别为 $1$、$2$、$3$、$3$、$6$、$7$ ，和为 $22$ 。\n\n---\n\n## 数据范围\n\n对于 $20\\%$ 的数据：$1 \\leq n \\leq 1000$ 。   \n对于另 $20\\%$ 的数据：不存在 `+` 。  \n对于另 $20\\%$ 的数据：仅存在一个 `+` 。   \n对于另 $20\\%$ 的数据：仅存在一个 `*` 。   \n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^{5}$ ，所有数字均不大于 $10^{9}$ ，运算符只包含 `+` 、`*` 。", "locale": "zh-CN"}}}
{"pid": "P6797", "type": "P", "difficulty": 5, "samples": [["4 4 3 1\n1 2 3 3\n3 2 1 4\n2 1 3 3\n3 4 2 1\n3 4 2 4\n1 4 1 2\n1 2 2 4", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400, 358400]}, "tags": ["动态规划 DP", "线段树", "堆", "O2优化"], "title": "「StOI-2」不朽的逃亡者", "background": null, "description": "巴尔博亚要逃遁到不朽的事业——发现太平洋。\n\n现在巴尔博亚在一个矩阵的 $(1,1)$ 位置，太平洋在 $(n,m)$ ， $(i,j)$ 位置的危险值为 $d_{i,j}$ 。他现在抓到了 $k$ 个印第安人，第 $i$ 个人对 $[ax_i,ay_i]  [bx_i,by_i]$ 的**范围**（ 以 $(ax_i,ay_i)$ 为左上角坐标，以 $(bx_i,by_i)$ 为右下角坐标的矩形 ）有了解，如果带上这个人，这一范围不会有危险。\n\n由于时间紧迫，巴尔博亚走四联通方向，必须只走 $n+m-1$ 个位置到达太平洋。\n\n现在巴尔博亚希望最多带上的人数不超过 $w$ ，同时使危险值之和最小，求最小值。", "inputFormat": "第一行 $4$ 个正整数，$n$ , $m$ , $k$ , $w$ , 含义如题。\n\n接下来是一个 $n$ 行 $m$ 列的矩阵，含义如题。\n\n接下来 $k$ 行，每行 $4$ 个正整数，分别是 $ax_i$ ，$bx_i$ ， $ay_i$ , $by_i$ ，含义如题。", "outputFormat": "一个正整数，表示最小值。", "hint": "## 样例解释\n\n选择第二人。\n\n路径：`(1,1)->(2,1)->(3,1)->(4,1)->(4,2)->(4,3)->(4,4)`\n\n危险值: 没有受到保护的 `(4,3)`与`(4,4)` ，为 $2+1=3$。\n\n## 数据范围\n\n#### 本题采用捆绑测试。\n子任务 $1$（$10$ 分）：$1 \\leq n,m,k,w \\leq 4$。   \n子任务 $2$（$20$ 分） : $1 \\leq n,m,k,w \\leq 20$。  \n子任务 $3$（$20$ 分）：$1 \\leq n,m,k,w \\leq 50$。  \n子任务 $4$（$20$ 分）：所有 $d_{i,j}$ 均相同。  \n子任务 $5$（$30$ 分） : 无特殊性质。 \n\n对于所有数据：$1\\leq n,m,k \\leq 200$，$1 \\leq w \\leq 100$，$0 \\leq d_{i,j} \\leq 10^8$，$1 \\leq ax_i \\leq bx_i \\leq n$ ，$1\\leq ay_i \\leq by_i \\leq m$ 。\n\n\n注意：输入顺序与题目略有不同", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「StOI-2」不朽的逃亡者", "background": null, "description": "巴尔博亚要逃遁到不朽的事业——发现太平洋。\n\n现在巴尔博亚在一个矩阵的 $(1,1)$ 位置，太平洋在 $(n,m)$ ， $(i,j)$ 位置的危险值为 $d_{i,j}$ 。他现在抓到了 $k$ 个印第安人，第 $i$ 个人对 $[ax_i,ay_i]  [bx_i,by_i]$ 的**范围**（ 以 $(ax_i,ay_i)$ 为左上角坐标，以 $(bx_i,by_i)$ 为右下角坐标的矩形 ）有了解，如果带上这个人，这一范围不会有危险。\n\n由于时间紧迫，巴尔博亚走四联通方向，必须只走 $n+m-1$ 个位置到达太平洋。\n\n现在巴尔博亚希望最多带上的人数不超过 $w$ ，同时使危险值之和最小，求最小值。", "inputFormat": "第一行 $4$ 个正整数，$n$ , $m$ , $k$ , $w$ , 含义如题。\n\n接下来是一个 $n$ 行 $m$ 列的矩阵，含义如题。\n\n接下来 $k$ 行，每行 $4$ 个正整数，分别是 $ax_i$ ，$bx_i$ ， $ay_i$ , $by_i$ ，含义如题。", "outputFormat": "一个正整数，表示最小值。", "hint": "## 样例解释\n\n选择第二人。\n\n路径：`(1,1)->(2,1)->(3,1)->(4,1)->(4,2)->(4,3)->(4,4)`\n\n危险值: 没有受到保护的 `(4,3)`与`(4,4)` ，为 $2+1=3$。\n\n## 数据范围\n\n#### 本题采用捆绑测试。\n子任务 $1$（$10$ 分）：$1 \\leq n,m,k,w \\leq 4$。   \n子任务 $2$（$20$ 分） : $1 \\leq n,m,k,w \\leq 20$。  \n子任务 $3$（$20$ 分）：$1 \\leq n,m,k,w \\leq 50$。  \n子任务 $4$（$20$ 分）：所有 $d_{i,j}$ 均相同。  \n子任务 $5$（$30$ 分） : 无特殊性质。 \n\n对于所有数据：$1\\leq n,m,k \\leq 200$，$1 \\leq w \\leq 100$，$0 \\leq d_{i,j} \\leq 10^8$，$1 \\leq ax_i \\leq bx_i \\leq n$ ，$1\\leq ay_i \\leq by_i \\leq m$ 。\n\n\n注意：输入顺序与题目略有不同", "locale": "zh-CN"}}}
{"pid": "P6798", "type": "P", "difficulty": 7, "samples": [["5 3 0\n5 3 4 2 1\n1 2\n1 3\n2 4\n2 5\n1 3 5\n2 4 1\n1 3 4", "42\n48\n52"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["数学", "倍增", "前缀和"], "title": "「StOI-2」简单的树", "background": "", "description": "给定一棵以 $1$ 为根，由 $n$ 个点组成的有根树，每个点有点权 $c_{i}$ 。\n\n定义每个点的 $val$ 值为：以它为根的子树内所有 $c_{i}$ 的最大值。\n\n定义函数 $f(x,y)$ 表示将 $c_{x}$ 改为 $y$ 后整棵树的 $val$ 值之和。\n\n现在请您回答 $q$ 组询问，每次询问给定 $3$ 个量 $(l,r,a)$ ，请求出 $\\sum\\limits_{i=l}^{r}{f(a,i)}$ 对 $998,244,353$ 取模的结果。", "inputFormat": "**本题强制在线**\n\n第一行三个正整数，$n$、$q$ 和 $opt$，分别表示树的点数、询问数和控制强制在线的量。\n\n第二行 $n$ 个正整数，表示每个点的点权。\n\n接下来 $n-1$ 行，每行两个正整数 $u_{i}$ 和 $v_{i}$，表示树的每一条边。\n\n接下来 $q$ 行，每行三个正整数 $l',r',a'$ ，请计算出真实的 $l,r,a$ 后完成询问。\n\n- $l = (( l' + opt \\times lastans )\\bmod n )$ $+ 1$\n- $r = (( r' + opt \\times lastans )\\bmod n )$ $+ 1$\n- $a = (( a' + opt \\times lastans )\\bmod n )$ $+ 1$\n\n其中 $lastans$ 表示上一组询问的答案，初始为 $0$ 。\n\n如果此时出现 $l > r$ 的情况，请交换 $l$ 和 $r$ 。", "outputFormat": "对于每组询问，输出最终的答案。", "hint": "## 样例解释\n\n真实的 $(l,r,a)$ 为：\n\n- $(2,4,1)$\n- $(3,5,2)$\n- $(2,4,5)$\n\n---\n\n## 数据范围\n\n对于 $10\\%$ 的数据：$1 \\leq n,q \\leq 100 $ 。   \n对于 $20\\%$ 的数据：$1 \\leq n,q \\leq 3000 $ 。   \n对于另 $20\\%$ 的数据：$1 \\leq l',r',c_{i} \\leq 2 $ 。   \n对于另 $20\\%$ 的数据：$l'=r'$ 。   \n对于前 $80\\%$ 的数据：$opt=0$ 。   \n对于 $100\\%$ 的数据：$1 \\leq n,q \\leq 5 \\times 10^{5} ，1 \\leq c_{i} , a' , l' , r' \\leq n$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「StOI-2」简单的树", "background": "", "description": "给定一棵以 $1$ 为根，由 $n$ 个点组成的有根树，每个点有点权 $c_{i}$ 。\n\n定义每个点的 $val$ 值为：以它为根的子树内所有 $c_{i}$ 的最大值。\n\n定义函数 $f(x,y)$ 表示将 $c_{x}$ 改为 $y$ 后整棵树的 $val$ 值之和。\n\n现在请您回答 $q$ 组询问，每次询问给定 $3$ 个量 $(l,r,a)$ ，请求出 $\\sum\\limits_{i=l}^{r}{f(a,i)}$ 对 $998,244,353$ 取模的结果。", "inputFormat": "**本题强制在线**\n\n第一行三个正整数，$n$、$q$ 和 $opt$，分别表示树的点数、询问数和控制强制在线的量。\n\n第二行 $n$ 个正整数，表示每个点的点权。\n\n接下来 $n-1$ 行，每行两个正整数 $u_{i}$ 和 $v_{i}$，表示树的每一条边。\n\n接下来 $q$ 行，每行三个正整数 $l',r',a'$ ，请计算出真实的 $l,r,a$ 后完成询问。\n\n- $l = (( l' + opt \\times lastans )\\bmod n )$ $+ 1$\n- $r = (( r' + opt \\times lastans )\\bmod n )$ $+ 1$\n- $a = (( a' + opt \\times lastans )\\bmod n )$ $+ 1$\n\n其中 $lastans$ 表示上一组询问的答案，初始为 $0$ 。\n\n如果此时出现 $l > r$ 的情况，请交换 $l$ 和 $r$ 。", "outputFormat": "对于每组询问，输出最终的答案。", "hint": "## 样例解释\n\n真实的 $(l,r,a)$ 为：\n\n- $(2,4,1)$\n- $(3,5,2)$\n- $(2,4,5)$\n\n---\n\n## 数据范围\n\n对于 $10\\%$ 的数据：$1 \\leq n,q \\leq 100 $ 。   \n对于 $20\\%$ 的数据：$1 \\leq n,q \\leq 3000 $ 。   \n对于另 $20\\%$ 的数据：$1 \\leq l',r',c_{i} \\leq 2 $ 。   \n对于另 $20\\%$ 的数据：$l'=r'$ 。   \n对于前 $80\\%$ 的数据：$opt=0$ 。   \n对于 $100\\%$ 的数据：$1 \\leq n,q \\leq 5 \\times 10^{5} ，1 \\leq c_{i} , a' , l' , r' \\leq n$ 。", "locale": "zh-CN"}}}
{"pid": "P6799", "type": "P", "difficulty": 6, "samples": [["5 3\n1 2\n2 3\n2 4\n1 5\n1 5\n2 3\n2 4", "6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "树状数组", "O2优化"], "title": "「StOI-2」独立集", "background": "", "description": "一棵由 $n$ 个点组成的无根树，给定 $m$ 条树上的路径，请求出由这 $m$ 条路径组成的`独立集`方案总数。\n\n由于这个答案可能很大，您只需求出它对 $998,244,353$ 取模的结果即可。\n\n所谓`独立集`，就是一个路径集合，满足这个集合中**不存在**一对在树上有交点的路径。特殊的，空集和只包括一条路径的集合也是独立集。\n\n", "inputFormat": "第一行两个正整数，$n$ 和 $m$ ，表示点数和路径数。    \n接下来 $n-1$ 行，每行两个正整数 $u_{i}$ 和 $v_{i}$ ，表示树的每条边。   \n接下来 $m$ 行，每行两个正整数 $a_{i}$ 和 $b_{i}$ ，表示给定的每条路径。", "outputFormat": "输出一个正整数，表示最终的答案。", "hint": "**请注意常数因子对程序执行效率的影响**\n\n## 样例解释\n\n\n总共有 $2^3=8$ 个集合。\n\n有两个集合 { {2,3} ，{2,4} } 与 { {1,5} ，{2,3} ，{2,4} } 不符合要求。\n\n故样例答案为 $8-2=6$ 。\n\n## 数据范围\n\n对于 $10\\%$ 的数据：$1 \\leq n \\leq 10$ ，$1 \\leq m \\leq 10$。   \n对于 $20\\%$ 的数据：$1 \\leq n \\leq 100$ ，$1 \\leq m \\leq 100$ 。   \n对于另 $30\\%$ 的数据：$1 \\leq m \\leq 15$ 。   \n对于另 $10\\%$ 的数据：$1 \\leq n,m \\leq 10^{5}$。    \n对于另 $20\\%$ 的数据：$u_{i}=i,v_{i}=i+1$。   \n对于 $100\\%$ 的数据：$1\\leq n,m \\leq 5 \\times 10^{5}$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「StOI-2」独立集", "background": "", "description": "一棵由 $n$ 个点组成的无根树，给定 $m$ 条树上的路径，请求出由这 $m$ 条路径组成的`独立集`方案总数。\n\n由于这个答案可能很大，您只需求出它对 $998,244,353$ 取模的结果即可。\n\n所谓`独立集`，就是一个路径集合，满足这个集合中**不存在**一对在树上有交点的路径。特殊的，空集和只包括一条路径的集合也是独立集。\n\n", "inputFormat": "第一行两个正整数，$n$ 和 $m$ ，表示点数和路径数。    \n接下来 $n-1$ 行，每行两个正整数 $u_{i}$ 和 $v_{i}$ ，表示树的每条边。   \n接下来 $m$ 行，每行两个正整数 $a_{i}$ 和 $b_{i}$ ，表示给定的每条路径。", "outputFormat": "输出一个正整数，表示最终的答案。", "hint": "**请注意常数因子对程序执行效率的影响**\n\n## 样例解释\n\n\n总共有 $2^3=8$ 个集合。\n\n有两个集合 { {2,3} ，{2,4} } 与 { {1,5} ，{2,3} ，{2,4} } 不符合要求。\n\n故样例答案为 $8-2=6$ 。\n\n## 数据范围\n\n对于 $10\\%$ 的数据：$1 \\leq n \\leq 10$ ，$1 \\leq m \\leq 10$。   \n对于 $20\\%$ 的数据：$1 \\leq n \\leq 100$ ，$1 \\leq m \\leq 100$ 。   \n对于另 $30\\%$ 的数据：$1 \\leq m \\leq 15$ 。   \n对于另 $10\\%$ 的数据：$1 \\leq n,m \\leq 10^{5}$。    \n对于另 $20\\%$ 的数据：$u_{i}=i,v_{i}=i+1$。   \n对于 $100\\%$ 的数据：$1\\leq n,m \\leq 5 \\times 10^{5}$ 。", "locale": "zh-CN"}}}
{"pid": "P6800", "type": "P", "difficulty": 6, "samples": [["3 3 3\n3 3 3", "9 39 273"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "模板题"], "title": "【模板】Chirp Z-Transform", "background": "", "description": "给定一个 $n$ 项多项式 $P(x)$ 以及 $c, m$，请计算 $P(c^0),P(c^1),\\dots,P(c^{m-1})$。所有答案都对 $998244353$ 取模。", "inputFormat": "第一行三个正整数 $n,c,m$。  \n第二行 $n$ 个非负整数 $a_0,a_1,\\dots,a_{n-1}$，由低到高表示 $P(x)$ 的系数。\n", "outputFormat": "一行 $m$ 个正整数，第 $i$ 个数表示 $P(c^{i-1})$。", "hint": "对于 $100\\%$ 的数据，$1\\le n,m\\le 10^6,0\\le c,a_i<998244353$.", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】Chirp Z-Transform", "background": "", "description": "给定一个 $n$ 项多项式 $P(x)$ 以及 $c, m$，请计算 $P(c^0),P(c^1),\\dots,P(c^{m-1})$。所有答案都对 $998244353$ 取模。", "inputFormat": "第一行三个正整数 $n,c,m$。  \n第二行 $n$ 个非负整数 $a_0,a_1,\\dots,a_{n-1}$，由低到高表示 $P(x)$ 的系数。\n", "outputFormat": "一行 $m$ 个正整数，第 $i$ 个数表示 $P(c^{i-1})$。", "hint": "对于 $100\\%$ 的数据，$1\\le n,m\\le 10^6,0\\le c,a_i<998244353$.", "locale": "zh-CN"}}}
{"pid": "P6801", "type": "P", "difficulty": 4, "samples": [["2\n1 2\n1 2", "12"]], "limits": {"time": [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2020", "CEOI（中欧）", "扫描线", "单调栈"], "title": "[CEOI 2020] 花式围栏", "background": "0.1s，32MB", "description": "众所周知，Balázs 拥有整个城镇中最漂亮的围栏。围栏由 $N$ 个部分组成，每个部分均为矩形，且相邻的两个部分间均紧密相连。第 $i$ 部分矩形的高度为 $h_i$，宽度为 $w_i$，我们需要找到满足如下条件的花式矩形：\n\n- 矩形的每条边均是水平的或竖直的，且每条边的长度为整数。\n- 矩形与地面的距离为整数。\n- 矩形与围栏第一部分的左侧边的距离为整数。\n- 矩形完整包含在围栏中。\n\n现在你需要求出花式矩形的总数。因为这个数字可能很大，请输出其对 $10^9+7$ 取模后的结果。", "inputFormat": "输入第一行包含一个整数 $N$，代表围栏由 $N$ 部分组成。\n\n第二行 $N$ 个整数，第 $i$ 个整数为第 $i$ 个矩形的高度 $h_i$。\n\n第三行 $N$ 个整数，第 $i$ 个整数为第 $i$ 个矩形的宽度 $w_i$。", "outputFormat": "输出花式矩形数对 $10^9+7$ 取模后的结果。", "hint": "### 样例解释 1\n\n围栏形状如下所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o0w99om5.png)\n\n形状如下的矩形有 $5$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qvrh1vbs.png)\n\n形状如下的矩形有 $3$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hx15etpn.png)\n\n形状如下的矩形有 $1$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s01bhzfn.png)\n\n形状如下的矩形有 $2$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ee3kec7y.png)\n\n形状如下的矩形有 $1$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n26e8gyi.png)\n\n### 样例 2\n\n见附加文件。\n\n### 子任务\n\n所有测试点均满足：$1 \\leq N \\leq 10^5$，$1 \\leq h_i,w_i \\leq 10^9$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                                                         |\n| ---------- | ---- | ------------------------------------------------------------ |\n| $1$        | $0$  | 样例                                                         |\n| $2$        | $12$ | $N \\leq 50$，且 $\\forall i \\in [1,N]$，$h_i \\leq 50$ 且 $w_i=1$ |\n| $3$        | $13$ | $\\forall i \\in [1,N]$，$h_i=1$ 或 $h_i=2$                    |\n| $4$        | $15$ | 所有的 $h_i$ 均相等                                          |\n| $5$        | $15$ | $\\forall i \\in [1,N-1]$，$h_i \\leq h_{i+1}$                  |\n| $6$        | $18$ | $N \\leq 1000$                                                |\n| $7$        | $27$ | 无特殊约束                                                   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2020] 花式围栏", "background": "0.1s，32MB", "description": "众所周知，Balázs 拥有整个城镇中最漂亮的围栏。围栏由 $N$ 个部分组成，每个部分均为矩形，且相邻的两个部分间均紧密相连。第 $i$ 部分矩形的高度为 $h_i$，宽度为 $w_i$，我们需要找到满足如下条件的花式矩形：\n\n- 矩形的每条边均是水平的或竖直的，且每条边的长度为整数。\n- 矩形与地面的距离为整数。\n- 矩形与围栏第一部分的左侧边的距离为整数。\n- 矩形完整包含在围栏中。\n\n现在你需要求出花式矩形的总数。因为这个数字可能很大，请输出其对 $10^9+7$ 取模后的结果。", "inputFormat": "输入第一行包含一个整数 $N$，代表围栏由 $N$ 部分组成。\n\n第二行 $N$ 个整数，第 $i$ 个整数为第 $i$ 个矩形的高度 $h_i$。\n\n第三行 $N$ 个整数，第 $i$ 个整数为第 $i$ 个矩形的宽度 $w_i$。", "outputFormat": "输出花式矩形数对 $10^9+7$ 取模后的结果。", "hint": "### 样例解释 1\n\n围栏形状如下所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o0w99om5.png)\n\n形状如下的矩形有 $5$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qvrh1vbs.png)\n\n形状如下的矩形有 $3$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hx15etpn.png)\n\n形状如下的矩形有 $1$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s01bhzfn.png)\n\n形状如下的矩形有 $2$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ee3kec7y.png)\n\n形状如下的矩形有 $1$ 个：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n26e8gyi.png)\n\n### 样例 2\n\n见附加文件。\n\n### 子任务\n\n所有测试点均满足：$1 \\leq N \\leq 10^5$，$1 \\leq h_i,w_i \\leq 10^9$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                                                         |\n| ---------- | ---- | ------------------------------------------------------------ |\n| $1$        | $0$  | 样例                                                         |\n| $2$        | $12$ | $N \\leq 50$，且 $\\forall i \\in [1,N]$，$h_i \\leq 50$ 且 $w_i=1$ |\n| $3$        | $13$ | $\\forall i \\in [1,N]$，$h_i=1$ 或 $h_i=2$                    |\n| $4$        | $15$ | 所有的 $h_i$ 均相等                                          |\n| $5$        | $15$ | $\\forall i \\in [1,N-1]$，$h_i \\leq h_{i+1}$                  |\n| $6$        | $18$ | $N \\leq 1000$                                                |\n| $7$        | $27$ | 无特殊约束                                                   |", "locale": "zh-CN"}}}
{"pid": "P6802", "type": "P", "difficulty": 6, "samples": [["5\n1 3 3 6\n5 1 5 3\n3 3 6 5\n2 1 4 1\n2 3 4 2", "2 1 1 3\n2 3 2 1\n3 3 2 3\n5 1 4 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2020", "Special Judge", "O2优化", "CEOI（中欧）"], "title": "[CEOI 2020] 道路", "background": "0.3s，32MB", "description": "Treeland 政府准备建立一个全新的道路网。Treeland 共有 $2N$ 个城市，目前已经修建了 $N$ 条道路，每条道路都是一条连接两个城市的线段。这 $N$ 条道路两两没有交点（包括端点处）。你现在需要再修建 $N-1$ 条道路，要求：\n\n1. 每条道路都是一条连接两个城市的线段。\n2. 道路只能在端点处相交。\n3. 对于任意两个城市，均能通过该路网相互抵达。", "inputFormat": "输入第一行包含一个整数 $N$。\n\n接下来 $N$ 行，每行包含四个整数 $x_1,y_1,x_2,y_2$，表示 $(x_1,y_1)$ 和 $(x_2,y_2)$ 两座城市间存在一条道路直接相连。", "outputFormat": "输出 $N-1$ 行。\n\n每行包含四个整数 $x_1,y_1,x_2,y_2$，代表新修一条连接 $(x_1,y_1)$ 和 $(x_2,y_2)$ 两座城市间的道路。\n\n如果存在多种方案，任意输出一种即可。", "hint": "### 样例解释\n\n下图中，实线表示已经修建的道路，虚线代表新修道路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qxnetdvo.png)\n\n### 子任务\n\n所有数据均满足：$2 \\leq N \\leq 10^5$，$-10^7 \\leq x_1,y_1,x_2,y_2 \\leq 10^7$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                                 |\n| ---------- | ---- | ------------------------------------ |\n| $1$        | $0$  | 样例                                 |\n| $2$        | $15$ | 输入的所有线段均为竖直线段           |\n| $3$        | $15$ | 任意两条输入线段互相平行             |\n| $4$        | $15$ | 输入的所有线段均为水平线段或竖直线段 |\n| $5$        | $15$ | $N \\leq 10^4$                        |\n| $6$        | $40$ | 无特殊约束                           |\n\n注意实际评测分值分配与上述约定不同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2020] 道路", "background": "0.3s，32MB", "description": "Treeland 政府准备建立一个全新的道路网。Treeland 共有 $2N$ 个城市，目前已经修建了 $N$ 条道路，每条道路都是一条连接两个城市的线段。这 $N$ 条道路两两没有交点（包括端点处）。你现在需要再修建 $N-1$ 条道路，要求：\n\n1. 每条道路都是一条连接两个城市的线段。\n2. 道路只能在端点处相交。\n3. 对于任意两个城市，均能通过该路网相互抵达。", "inputFormat": "输入第一行包含一个整数 $N$。\n\n接下来 $N$ 行，每行包含四个整数 $x_1,y_1,x_2,y_2$，表示 $(x_1,y_1)$ 和 $(x_2,y_2)$ 两座城市间存在一条道路直接相连。", "outputFormat": "输出 $N-1$ 行。\n\n每行包含四个整数 $x_1,y_1,x_2,y_2$，代表新修一条连接 $(x_1,y_1)$ 和 $(x_2,y_2)$ 两座城市间的道路。\n\n如果存在多种方案，任意输出一种即可。", "hint": "### 样例解释\n\n下图中，实线表示已经修建的道路，虚线代表新修道路。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qxnetdvo.png)\n\n### 子任务\n\n所有数据均满足：$2 \\leq N \\leq 10^5$，$-10^7 \\leq x_1,y_1,x_2,y_2 \\leq 10^7$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                                 |\n| ---------- | ---- | ------------------------------------ |\n| $1$        | $0$  | 样例                                 |\n| $2$        | $15$ | 输入的所有线段均为竖直线段           |\n| $3$        | $15$ | 任意两条输入线段互相平行             |\n| $4$        | $15$ | 输入的所有线段均为水平线段或竖直线段 |\n| $5$        | $15$ | $N \\leq 10^4$                        |\n| $6$        | $40$ | 无特殊约束                           |\n\n注意实际评测分值分配与上述约定不同。", "locale": "zh-CN"}}}
{"pid": "P6803", "type": "P", "difficulty": 6, "samples": [["3 1\n1 2\n2 3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "CEOI（中欧）", "矩阵加速", "树形 DP"], "title": "[CEOI 2020] 星际迷航", "background": "原时空限制：0.2s，32m", "description": "星际联邦由 $N$ 颗行星组成，分别编号为 $1 \\sim N$。一些行星间由星际通道相连。通过这些星际通道，飞船可以在短时间内往返于各星球之间。整个星际联邦中恰好有 $N-1$ 条星际通道，并且通过这些星际通道，任意两颗行星之间均能相互抵达。\n\n除了我们所处的宇宙之外，还有 $D$ 个平行宇宙，这些平行宇宙是我们的宇宙的完全复刻，它们的行星，星际通道都和我们的完全相同。我们将这些平行宇宙编号为 $1 \\sim D$（我们的宇宙编号为 $0$），记第 $i$ 个宇宙的第 $x$ 颗行星为 $P_{x}^i$。通过星门，我们可以在这些平行宇宙间穿梭。$\\forall i \\in [0,D)$，我们将选择一个 $A_i$ 和一个 $B_i$（要求 $1 \\leq A_i,B_i \\leq N$），在 $P_{A_i}^i$ 和 $P_{B_i}^{i+1}$ 之间搭建一个**单向**（只能从 $P_{A_i}^i$ 前往 $P_{B_i}^{i+1}$）星门。\n\n当所有的星门都准备就绪后，联邦星舰 Batthyány 号将会开始它的处女航，它目前正环绕着 $P_1^0$ 行星。Ágnes 舰长准备和 Gábor 中尉玩这样一个游戏：两个人交替选择星舰接下来前往的目的地，要求该目的地可以通过星际通道或星门直接抵达。他们希望每次前往的星球都是之前未抵达过的。即，如果星舰抵达了 $P_{x}^i$，他们将不再经过这个星球（但是可以抵达 $x$ 在其他平行宇宙中的相应星球）。由 Ágnes 舰长作为先手开始游戏，Gábor 中尉作为后手，当一位玩家在他的回合中，不能选择一个合法的目的地时，他就输掉了游戏。\n\n舰长和中尉都是绝对聪明的，他们知道所有星际通道和星门的排布方案，并且他们每次都按照最优方案行动。你需要求出，有多少种布置星门的方案，使得作为先手的 Ágnes 舰长必胜？两种布置星门的方案是不同的，当且仅当存在一个整数 $i$，使得 $A_i$ 或 $B_i$ 不同。", "inputFormat": "第一行两个整数 $N,D$，分别代表星际联邦拥有的行星数和平行宇宙的数量。\n\n接下来 $N-1$ 行，每行两个整数 $u,v$，表示 $\\forall i \\in [0,D]$，$P_u^i,P_v^i$ 之间有星际通道相连。", "outputFormat": "输出能使舰长必胜的星门布置方案数对 $10^9+7$ 取模的结果。", "hint": "### 样例解释\n\n共有 $3 \\times 3=9$ 种本质不同的布置星门的方案，下面列出四种舰长必胜的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vblsc4g6.png)\n\n### 子任务\n\n所有数据均满足：$1 \\leq N \\leq 10^5$，$1 \\leq D \\leq 10^{18}$，$1 \\leq u,v \\leq N$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                         |\n| ---------- | ---- | ---------------------------- |\n| $1$        | $0$  | 样例                         |\n| $2$        | $7$  | $N=2$                        |\n| $3$        | $8$  | $N \\leq 100$，$D=1$          |\n| $4$        | $15$ | $N \\leq 1000$，$D=1$         |\n| $5$        | $15$ | $D=1$                        |\n| $6$        | $20$ | $N \\leq 1000$，$D \\leq 10^5$ |\n| $7$        | $20$ | $D \\leq 10^5$                |\n| $8$        | $15$ | 无特殊约束                   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2020] 星际迷航", "background": "原时空限制：0.2s，32m", "description": "星际联邦由 $N$ 颗行星组成，分别编号为 $1 \\sim N$。一些行星间由星际通道相连。通过这些星际通道，飞船可以在短时间内往返于各星球之间。整个星际联邦中恰好有 $N-1$ 条星际通道，并且通过这些星际通道，任意两颗行星之间均能相互抵达。\n\n除了我们所处的宇宙之外，还有 $D$ 个平行宇宙，这些平行宇宙是我们的宇宙的完全复刻，它们的行星，星际通道都和我们的完全相同。我们将这些平行宇宙编号为 $1 \\sim D$（我们的宇宙编号为 $0$），记第 $i$ 个宇宙的第 $x$ 颗行星为 $P_{x}^i$。通过星门，我们可以在这些平行宇宙间穿梭。$\\forall i \\in [0,D)$，我们将选择一个 $A_i$ 和一个 $B_i$（要求 $1 \\leq A_i,B_i \\leq N$），在 $P_{A_i}^i$ 和 $P_{B_i}^{i+1}$ 之间搭建一个**单向**（只能从 $P_{A_i}^i$ 前往 $P_{B_i}^{i+1}$）星门。\n\n当所有的星门都准备就绪后，联邦星舰 Batthyány 号将会开始它的处女航，它目前正环绕着 $P_1^0$ 行星。Ágnes 舰长准备和 Gábor 中尉玩这样一个游戏：两个人交替选择星舰接下来前往的目的地，要求该目的地可以通过星际通道或星门直接抵达。他们希望每次前往的星球都是之前未抵达过的。即，如果星舰抵达了 $P_{x}^i$，他们将不再经过这个星球（但是可以抵达 $x$ 在其他平行宇宙中的相应星球）。由 Ágnes 舰长作为先手开始游戏，Gábor 中尉作为后手，当一位玩家在他的回合中，不能选择一个合法的目的地时，他就输掉了游戏。\n\n舰长和中尉都是绝对聪明的，他们知道所有星际通道和星门的排布方案，并且他们每次都按照最优方案行动。你需要求出，有多少种布置星门的方案，使得作为先手的 Ágnes 舰长必胜？两种布置星门的方案是不同的，当且仅当存在一个整数 $i$，使得 $A_i$ 或 $B_i$ 不同。", "inputFormat": "第一行两个整数 $N,D$，分别代表星际联邦拥有的行星数和平行宇宙的数量。\n\n接下来 $N-1$ 行，每行两个整数 $u,v$，表示 $\\forall i \\in [0,D]$，$P_u^i,P_v^i$ 之间有星际通道相连。", "outputFormat": "输出能使舰长必胜的星门布置方案数对 $10^9+7$ 取模的结果。", "hint": "### 样例解释\n\n共有 $3 \\times 3=9$ 种本质不同的布置星门的方案，下面列出四种舰长必胜的情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vblsc4g6.png)\n\n### 子任务\n\n所有数据均满足：$1 \\leq N \\leq 10^5$，$1 \\leq D \\leq 10^{18}$，$1 \\leq u,v \\leq N$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                         |\n| ---------- | ---- | ---------------------------- |\n| $1$        | $0$  | 样例                         |\n| $2$        | $7$  | $N=2$                        |\n| $3$        | $8$  | $N \\leq 100$，$D=1$          |\n| $4$        | $15$ | $N \\leq 1000$，$D=1$         |\n| $5$        | $15$ | $D=1$                        |\n| $6$        | $20$ | $N \\leq 1000$，$D \\leq 10^5$ |\n| $7$        | $20$ | $D \\leq 10^5$                |\n| $8$        | $15$ | 无特殊约束                   |", "locale": "zh-CN"}}}
{"pid": "P6804", "type": "P", "difficulty": 6, "samples": [["6 5 11 4\n2 42 1000 54 68 234\n0 1\n2 0\n3 4\n3 5\n3 5\n1 3\n5 3\n0 5\n3 0\n1 3\n3 5\n0 3 4\n3 0 8\n0 5 5\n3 0 11", "26\n0\n1000000000\n14"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "交互题", "Special Judge", "CEOI（中欧）"], "title": "[CEOI 2020] 权力药水", "background": "3s，256MB", "description": "很久以前，在萨满之岛上，所有人都住在一个如天一样高的豆茎上。每位萨满都有一个独一无二的编号，编号的范围在 $0$ 和 $N-1$ 之间。第 $i$ 位萨满居住的高度用 $H_i$ 表示。定义两位萨满间的距离为其高度差的绝对值。\n\n所有的萨满之间本来和谐共处，直到一天权力药水的配方被盗。为了掩盖他的行径，那位小偷给整座岛施加了诅咒，大多数居民不再彼此信任了。\n\n虽然情况非常复杂，但是经过调查，某组织还是获得了如下信息：\n\n- 诅咒刚生效时，所有的萨满停止彼此信任。\n- 诅咒本身是不稳定的，在每天将要结束时（准确来说是午夜），某一对萨满将会建立信任或是停止信任。\n- 不幸地是，一位萨满在任意时刻最多信任 $D$ 位萨满。\n\n该组织还重建了萨满间的信任变化日志，该日志记录了在每个半夜，哪对萨满的信任关系发生了变化（从不信任到信任，或是从信任到不信任）。\n\n该组织的成员相信，小偷还向一位邪恶的萨满通过隔空传话的方式泄露了配方。为了避免被发现，他们俩都各自拜访了一位信任的萨满的家，在拜访的过程中，小偷透过窗户向邪恶的萨满泄露配方。需要注意的是，那位信任的朋友当时不必在家中，事实上，两位萨满可能互相前往对方的家。毕竟萨满都很奇怪。\n\n幸运的是，因为萨满们的听力有限，声音并不能传出太远，这意味着两位朋友（小偷的朋友和邪恶的萨满的朋友）之间的距离必须尽可能近。\n\n现在该组织决定让你来协助调查。他们想要验证自己的猜想：当小偷为 $x$，邪恶的萨满为 $y$，泄露配方的日子为 $v$ 时，隔空传话的声音需要行进的最小值是多少？也即，你需要在第 $v$ 天时，在 $x$ 信任的所有萨满中找到一位萨满 $x'$，在 $y$ 信任的所有萨满中找到一位萨满 $y'$，使 $x'$ 和 $y'$ 间的距离最小。\n\n你已经获得了求出答案所需的所有信息，但你需要**实时**回答每一组询问。", "inputFormat": "**仅提供 IO 交互**。\n\n输入第一行包含四个整数 $N,D,U,Q$，分别代表萨满的数量，一位萨满最多信任的朋友数，日志包含的天数，以及需要回答的询问数。\n\n下一行包含 $N$ 个整数，两两间以一个空格隔开。其中第 $i$ 个整数代表第 $i-1$ 只萨满居住的高度 $H_{i-1}$。\n\n接下来 $U$ 行，第 $i$ 行包含两个整数 $A_i,B_i$，代表编号为 $A_i$ 和 $B_i$ 的萨满在第 $i-1$ 天结束的时候，他们之间的信任状态发生了变化。即，如果 $A_i$ 和 $B_i$ 在第 $i-1$ 天互相信任，则他们自第 $i$ 天起不再互相信任，反之同理。\n\n接下来你需要回答 $Q$ 组询问。询问必须实时回答，即你必须回答完一组询问后才能读入下一组询问。\n\n每组询问包含三个整数 $x,y,v$，代表小偷为 $x$，邪恶的萨满为 $y$，泄露配方的日子为第 $v$ 天。", "outputFormat": "对于每组询问，你需要在第 $v$ 天时，在 $x$ 信任的所有萨满中找到一位萨满 $x'$，在 $y$ 信任的所有萨满中找到一位萨满 $y'$，使 $x'$ 和 $y'$ 间的距离最小，并输出这个最小值。\n\n特别地，\n\n- 若存在一位萨满同时被 $x$ 和 $y$ 信任，输出 $0$。\n- 若 $x$ 或 $y$ 在第 $v$ 天无信任的朋友，输出 $1000000000$（$10^9$）。\n\n在回答完一组询问后，你需要立刻刷新缓冲区。\n\n对于 C++ 选手，可以通过 `fflush(stdout);` 或 `cout.flush()` 来刷新缓冲区。", "hint": "### 样例解释\n\n下面是询问的情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gdrha1bp.png)\n\n下面是每一天时信任关系的变化情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uulqejgp.png)\n\n### 子任务\n\n所有数据均满足：$2 \\leq N \\leq 10^5$，$1 \\leq D \\leq 500$，$0 \\leq U \\leq 2 \\times 10^5$，$1 \\leq Q \\leq 5 \\times 10^4$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                                    |\n| ---------- | ---- | --------------------------------------- |\n| $1$        | $0$  | 样例                                    |\n| $2$        | $17$ | $Q,U \\leq 10^3$                         |\n| $3$        | $14$ | 所有询问均满足 $v=U$                  |\n| $4$        | $18$ | $\\forall i \\in [0,N)$，$H_i\\in \\{0,1\\}$ |\n| $5$        | $21$ | $U,N \\leq 10^4$                         |\n| $6$        | $30$ | 无特殊约束                              |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2020] 权力药水", "background": "3s，256MB", "description": "很久以前，在萨满之岛上，所有人都住在一个如天一样高的豆茎上。每位萨满都有一个独一无二的编号，编号的范围在 $0$ 和 $N-1$ 之间。第 $i$ 位萨满居住的高度用 $H_i$ 表示。定义两位萨满间的距离为其高度差的绝对值。\n\n所有的萨满之间本来和谐共处，直到一天权力药水的配方被盗。为了掩盖他的行径，那位小偷给整座岛施加了诅咒，大多数居民不再彼此信任了。\n\n虽然情况非常复杂，但是经过调查，某组织还是获得了如下信息：\n\n- 诅咒刚生效时，所有的萨满停止彼此信任。\n- 诅咒本身是不稳定的，在每天将要结束时（准确来说是午夜），某一对萨满将会建立信任或是停止信任。\n- 不幸地是，一位萨满在任意时刻最多信任 $D$ 位萨满。\n\n该组织还重建了萨满间的信任变化日志，该日志记录了在每个半夜，哪对萨满的信任关系发生了变化（从不信任到信任，或是从信任到不信任）。\n\n该组织的成员相信，小偷还向一位邪恶的萨满通过隔空传话的方式泄露了配方。为了避免被发现，他们俩都各自拜访了一位信任的萨满的家，在拜访的过程中，小偷透过窗户向邪恶的萨满泄露配方。需要注意的是，那位信任的朋友当时不必在家中，事实上，两位萨满可能互相前往对方的家。毕竟萨满都很奇怪。\n\n幸运的是，因为萨满们的听力有限，声音并不能传出太远，这意味着两位朋友（小偷的朋友和邪恶的萨满的朋友）之间的距离必须尽可能近。\n\n现在该组织决定让你来协助调查。他们想要验证自己的猜想：当小偷为 $x$，邪恶的萨满为 $y$，泄露配方的日子为 $v$ 时，隔空传话的声音需要行进的最小值是多少？也即，你需要在第 $v$ 天时，在 $x$ 信任的所有萨满中找到一位萨满 $x'$，在 $y$ 信任的所有萨满中找到一位萨满 $y'$，使 $x'$ 和 $y'$ 间的距离最小。\n\n你已经获得了求出答案所需的所有信息，但你需要**实时**回答每一组询问。", "inputFormat": "**仅提供 IO 交互**。\n\n输入第一行包含四个整数 $N,D,U,Q$，分别代表萨满的数量，一位萨满最多信任的朋友数，日志包含的天数，以及需要回答的询问数。\n\n下一行包含 $N$ 个整数，两两间以一个空格隔开。其中第 $i$ 个整数代表第 $i-1$ 只萨满居住的高度 $H_{i-1}$。\n\n接下来 $U$ 行，第 $i$ 行包含两个整数 $A_i,B_i$，代表编号为 $A_i$ 和 $B_i$ 的萨满在第 $i-1$ 天结束的时候，他们之间的信任状态发生了变化。即，如果 $A_i$ 和 $B_i$ 在第 $i-1$ 天互相信任，则他们自第 $i$ 天起不再互相信任，反之同理。\n\n接下来你需要回答 $Q$ 组询问。询问必须实时回答，即你必须回答完一组询问后才能读入下一组询问。\n\n每组询问包含三个整数 $x,y,v$，代表小偷为 $x$，邪恶的萨满为 $y$，泄露配方的日子为第 $v$ 天。", "outputFormat": "对于每组询问，你需要在第 $v$ 天时，在 $x$ 信任的所有萨满中找到一位萨满 $x'$，在 $y$ 信任的所有萨满中找到一位萨满 $y'$，使 $x'$ 和 $y'$ 间的距离最小，并输出这个最小值。\n\n特别地，\n\n- 若存在一位萨满同时被 $x$ 和 $y$ 信任，输出 $0$。\n- 若 $x$ 或 $y$ 在第 $v$ 天无信任的朋友，输出 $1000000000$（$10^9$）。\n\n在回答完一组询问后，你需要立刻刷新缓冲区。\n\n对于 C++ 选手，可以通过 `fflush(stdout);` 或 `cout.flush()` 来刷新缓冲区。", "hint": "### 样例解释\n\n下面是询问的情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gdrha1bp.png)\n\n下面是每一天时信任关系的变化情况：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uulqejgp.png)\n\n### 子任务\n\n所有数据均满足：$2 \\leq N \\leq 10^5$，$1 \\leq D \\leq 500$，$0 \\leq U \\leq 2 \\times 10^5$，$1 \\leq Q \\leq 5 \\times 10^4$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                                    |\n| ---------- | ---- | --------------------------------------- |\n| $1$        | $0$  | 样例                                    |\n| $2$        | $17$ | $Q,U \\leq 10^3$                         |\n| $3$        | $14$ | 所有询问均满足 $v=U$                  |\n| $4$        | $18$ | $\\forall i \\in [0,N)$，$H_i\\in \\{0,1\\}$ |\n| $5$        | $21$ | $U,N \\leq 10^4$                         |\n| $6$        | $30$ | 无特殊约束                              |", "locale": "zh-CN"}}}
{"pid": "P6805", "type": "P", "difficulty": 6, "samples": [["7 3\n1 2\n2 4\n4 5\n5 6\n5 7\n3 4\n1 4\n2 2 4\n1 1", "-1\n10\n8"]], "limits": {"time": [300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "CEOI（中欧）"], "title": "[CEOI 2020] 春季大扫除", "background": "0.3s，128MB", "description": "春季大扫除也许是我们一生中最无聊的事情之一。当然，对于 Flóra 和她的母亲而言，今年的春季大扫除要有意思得多。因为她们在地毯下发现了一张已被灰尘覆盖的树形地图。\n\n这棵树有 $N$ 个节点，节点从 $1$ 到 $N$ 进行编号，这 $N$ 个点通过 $N-1$ 条边相连。这些边上都积累了过多的灰尘，因此 Flóra 的母亲准备对这棵树进行清理。\n\n清理这棵树的过程是这样的：Flóra 的母亲每次在这棵树上选择两个叶子节点（定义一棵树的叶子节点为只与恰好一个点直接相连的点），并对这两个叶子点路径上的所有边进行清理。如果这条路径上有 $d$ 条边，则清理的费用为 $d$。当这棵树上的所有边都被清理后，这棵树的清理过程就完成了。清理这棵树的总费用即为各次清理的费用之和。\n\n因为她想保护这棵树的叶子节点，因此对于每个叶子节点，她最多只会选择一次。\n\nFlóra 认为原来的树过于简单，她决定对原始的树进行一些改造。在第 $i$ 次改造中，她在原始的树的基础上添加了 $D_i$ 个叶子节点。具体来说，她会在原始的树上选择一个节点，并在该点与新的叶子节点之间连接一条边。需要注意的是，在添加新的叶子节点的过程中，原来的一些节点将不再是叶子节点。\n\n现在你需要帮助 Flóra 求出清理改造后的树的最小费用。", "inputFormat": "输入第一行包含两个数 $N,Q$，分别代表原始的树上的节点数，以及 Flóra 准备对原始的树进行的改造次数。\n\n接下来 $N-1$ 行，每行两个整数 $u,v$，表示在原始的树上 $u,v$ 两个节点间有一条边相连。\n\n接下来 $Q$ 行，每行第一个整数 $D_i$，表示 Flóra 准备在第 $i$ 次改造中添加 $D_i$ 个叶子节点。接下来 $D_i$ 个整数，第 $j$ 个整数 $a_j$ 表示 Flóra 准备在 $a_j$ 号点上添加一个叶子节点。同一个点上可能会添加多个叶子节点。\n\n每次改造过程是独立的，即在一轮改造后，Flóra 会在原始的树上重新开始改造过程。", "outputFormat": "对于每次改造，你需要输出一个整数，表示清理这棵改造后的树的最小费用。\n\n特别地，若这棵树不能被完全清理，输出 $-1$。", "hint": "### 样例解释\n\n下面展示的是第二次改造后的树：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9rj8iovq.png)\n\n一种最优的清理方案是清理 $1-6$，$A-7$，$B-3$ 这三条路径上的所有边。\n\n### 子任务\n\n所有测试点均满足：$3 \\leq N \\leq 10^5$，$1 \\leq Q \\leq 10^5$，$\\sum D_i \\leq 10^5$，$1 \\leq u,v \\leq N$，$1 \\leq a_j \\leq N$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                                                         |\n| ---------- | ---- | ------------------------------------------------------------ |\n| $1$        | $0$  | 样例                                                         |\n| $2$        | $9$  | $Q=1$，$\\forall i \\in [2,N]$，都存在一条连接 $1$ 和 $i$ 的边，且 Flóra 不会在 $1$ 号点上添加叶子节点 |\n| $3$        | $9$  | $Q=1$，$\\forall i \\in [1,N)$，$i$ 和 $i+1$ 之间有边相连，且 Flóra 不会在 $1$ 号点或 $N$ 号点上添加叶子节点 |\n| $4$        | $16$ | $N \\leq 2 \\times 10^4$，$Q \\leq 300$                         |\n| $5$        | $19$ | 原始的树是一棵以 $1$ 号点为根的满二叉树，即每个非叶子节点均有恰好两个子节点，且各叶子节点到根节点间的距离相等 |\n| $6$        | $17$ | $\\forall i \\in [1,Q]$，$D_i=1$                               |\n| $7$        | $30$ | 无特殊约束                                                   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2020] 春季大扫除", "background": "0.3s，128MB", "description": "春季大扫除也许是我们一生中最无聊的事情之一。当然，对于 Flóra 和她的母亲而言，今年的春季大扫除要有意思得多。因为她们在地毯下发现了一张已被灰尘覆盖的树形地图。\n\n这棵树有 $N$ 个节点，节点从 $1$ 到 $N$ 进行编号，这 $N$ 个点通过 $N-1$ 条边相连。这些边上都积累了过多的灰尘，因此 Flóra 的母亲准备对这棵树进行清理。\n\n清理这棵树的过程是这样的：Flóra 的母亲每次在这棵树上选择两个叶子节点（定义一棵树的叶子节点为只与恰好一个点直接相连的点），并对这两个叶子点路径上的所有边进行清理。如果这条路径上有 $d$ 条边，则清理的费用为 $d$。当这棵树上的所有边都被清理后，这棵树的清理过程就完成了。清理这棵树的总费用即为各次清理的费用之和。\n\n因为她想保护这棵树的叶子节点，因此对于每个叶子节点，她最多只会选择一次。\n\nFlóra 认为原来的树过于简单，她决定对原始的树进行一些改造。在第 $i$ 次改造中，她在原始的树的基础上添加了 $D_i$ 个叶子节点。具体来说，她会在原始的树上选择一个节点，并在该点与新的叶子节点之间连接一条边。需要注意的是，在添加新的叶子节点的过程中，原来的一些节点将不再是叶子节点。\n\n现在你需要帮助 Flóra 求出清理改造后的树的最小费用。", "inputFormat": "输入第一行包含两个数 $N,Q$，分别代表原始的树上的节点数，以及 Flóra 准备对原始的树进行的改造次数。\n\n接下来 $N-1$ 行，每行两个整数 $u,v$，表示在原始的树上 $u,v$ 两个节点间有一条边相连。\n\n接下来 $Q$ 行，每行第一个整数 $D_i$，表示 Flóra 准备在第 $i$ 次改造中添加 $D_i$ 个叶子节点。接下来 $D_i$ 个整数，第 $j$ 个整数 $a_j$ 表示 Flóra 准备在 $a_j$ 号点上添加一个叶子节点。同一个点上可能会添加多个叶子节点。\n\n每次改造过程是独立的，即在一轮改造后，Flóra 会在原始的树上重新开始改造过程。", "outputFormat": "对于每次改造，你需要输出一个整数，表示清理这棵改造后的树的最小费用。\n\n特别地，若这棵树不能被完全清理，输出 $-1$。", "hint": "### 样例解释\n\n下面展示的是第二次改造后的树：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9rj8iovq.png)\n\n一种最优的清理方案是清理 $1-6$，$A-7$，$B-3$ 这三条路径上的所有边。\n\n### 子任务\n\n所有测试点均满足：$3 \\leq N \\leq 10^5$，$1 \\leq Q \\leq 10^5$，$\\sum D_i \\leq 10^5$，$1 \\leq u,v \\leq N$，$1 \\leq a_j \\leq N$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                                                         |\n| ---------- | ---- | ------------------------------------------------------------ |\n| $1$        | $0$  | 样例                                                         |\n| $2$        | $9$  | $Q=1$，$\\forall i \\in [2,N]$，都存在一条连接 $1$ 和 $i$ 的边，且 Flóra 不会在 $1$ 号点上添加叶子节点 |\n| $3$        | $9$  | $Q=1$，$\\forall i \\in [1,N)$，$i$ 和 $i+1$ 之间有边相连，且 Flóra 不会在 $1$ 号点或 $N$ 号点上添加叶子节点 |\n| $4$        | $16$ | $N \\leq 2 \\times 10^4$，$Q \\leq 300$                         |\n| $5$        | $19$ | 原始的树是一棵以 $1$ 号点为根的满二叉树，即每个非叶子节点均有恰好两个子节点，且各叶子节点到根节点间的距离相等 |\n| $6$        | $17$ | $\\forall i \\in [1,Q]$，$D_i=1$                               |\n| $7$        | $30$ | 无特殊约束                                                   |", "locale": "zh-CN"}}}
{"pid": "P6806", "type": "P", "difficulty": 7, "samples": [["8 8 5\nP 1 2\nR 4 8\nQ 2 3\nB 3 6\nK 5 5", "0 0\n2 2\n2 5\n2 2\n7 393"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2020", "CEOI（中欧）"], "title": "[CEOI 2020] 象棋世界", "background": "1.3s，64MB", "description": "象棋世界是一个 $R$ 行 $C$ 列的棋盘，其中 $R \\geq C$。所有的行依此编号为 $1$ 到 $R$，所有的列依此编号为 $1$ 到 $C$。\n\n在象棋世界里，共有五种棋子：兵，车，象，后，王。与现实世界不同的是，骑士精神在象棋世界中已经死亡，因此象棋世界里找不到马。\n\n象棋世界里，每种棋子可以按如下规则进行一步移动：\n\n- 兵只能向行号增大的方向走一步（从第 $r$ 行到第 $r+1$ 行），且其所处的列不变。\n- 车只能沿水平方向或竖直方向移动。\n- 象只能沿对角线方向移动。\n- 后可以沿水平方向，竖直方向，或对角线方向移动。\n- 王可以向与之相邻的八个格子移动。\n\n为了方便你理解，我们在下图给出了每种棋子的合法移动范围。其中 X 代表该棋子能移动到的位置。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wgweh8tf.png)\n\n最近一段时间，象棋世界发生了不少诡异的事情：某些棋子可能会被不明来源的力量所劫持，随后从象棋世界中消失。在这种情况下，所有棋子都希望能尽快前往他们想要到达的目的地，他们还想知道，在走的步数最少的前提下，到达目的地的方案数有多少。两种方案是不同的，当且仅当这两种方案中有一步经过的格子不同。\n\n在本题中，你需要解决下面这个问题：某个棋子将从第 $1$ 行的第 $c_1$ 列出发，到达第 $R$ 行的第 $c_R$ 列。现在给出这个棋子的类型，以及 $c_1,c_R$ 的值，你需要求出，这个棋子最少需要走多少步，以及在步数最少的前提下，行走方案有多少种。", "inputFormat": "第一行包含三个整数 $R,C,Q$，表示象棋世界中棋盘的行数，列数，以及需要回答的询问数。\n\n接下来 $Q$ 行，包含一个字母 $T$，代表棋子种类，以及两个整数 $c_1,c_R$，代表起点为第 $1$ 行的第 $c_1$ 列，终点为第 $R$ 行的第 $c_R$ 列。\n\n各字母与棋子种类对应关系如下所示：\n\n| 字母         | 棋子种类 |\n| ------------ | -------- |\n| $\\texttt{P}$ | 兵       |\n| $\\texttt{R}$ | 车       |\n| $\\texttt{B}$ | 象       |\n| $\\texttt{Q}$ | 后       |\n| $\\texttt{K}$ | 王       |", "outputFormat": "对于每个询问，输出两个整数，第一个整数代表从起点到终点需要走的最少步数，第二个整数代表在步数最少的前提下，从起点到终点的方案数。\n\n因为方案数可能很大，请输出其对 $10^9+7$ 取模后的结果。\n\n特别地，若无法从起点到达终点，请输出一行 `0 0`。", "hint": "所有测试点均满足：$1 \\leq Q \\leq 1000$，$2 \\leq C \\leq 1000$，$C \\leq R \\leq 10^9$，$T \\in \\{\\texttt{P},\\texttt{R},\\texttt{Q},\\texttt{B},\\texttt{K}\\}$，$1 \\leq c_1,c_R \\leq C$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                                         |\n| ---------- | ---- | -------------------------------------------- |\n| $1$        | $0$  | 样例                                         |\n| $2$        | $8$  | $T \\in \\{\\texttt{P},\\texttt{R},\\texttt{Q}\\}$ |\n| $3$        | $15$ | $T=\\texttt{B}$，$C,R \\leq 100$               |\n| $4$        | $22$ | $T=\\texttt{B}$                               |\n| $5$        | $5$  | $T=\\texttt{K}$，$C,R \\leq 100$，$Q \\leq 50$  |\n| $6$        | $8$  | $T=\\texttt{K}$，$C,R \\leq 100$               |\n| $7$        | $15$ | $T=\\texttt{K}$，$C \\leq 100$                 |\n| $8$        | $20$ | $T=\\texttt{K}$                               |\n| $9$        | $7$  | 无特殊约束                                   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2020] 象棋世界", "background": "1.3s，64MB", "description": "象棋世界是一个 $R$ 行 $C$ 列的棋盘，其中 $R \\geq C$。所有的行依此编号为 $1$ 到 $R$，所有的列依此编号为 $1$ 到 $C$。\n\n在象棋世界里，共有五种棋子：兵，车，象，后，王。与现实世界不同的是，骑士精神在象棋世界中已经死亡，因此象棋世界里找不到马。\n\n象棋世界里，每种棋子可以按如下规则进行一步移动：\n\n- 兵只能向行号增大的方向走一步（从第 $r$ 行到第 $r+1$ 行），且其所处的列不变。\n- 车只能沿水平方向或竖直方向移动。\n- 象只能沿对角线方向移动。\n- 后可以沿水平方向，竖直方向，或对角线方向移动。\n- 王可以向与之相邻的八个格子移动。\n\n为了方便你理解，我们在下图给出了每种棋子的合法移动范围。其中 X 代表该棋子能移动到的位置。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wgweh8tf.png)\n\n最近一段时间，象棋世界发生了不少诡异的事情：某些棋子可能会被不明来源的力量所劫持，随后从象棋世界中消失。在这种情况下，所有棋子都希望能尽快前往他们想要到达的目的地，他们还想知道，在走的步数最少的前提下，到达目的地的方案数有多少。两种方案是不同的，当且仅当这两种方案中有一步经过的格子不同。\n\n在本题中，你需要解决下面这个问题：某个棋子将从第 $1$ 行的第 $c_1$ 列出发，到达第 $R$ 行的第 $c_R$ 列。现在给出这个棋子的类型，以及 $c_1,c_R$ 的值，你需要求出，这个棋子最少需要走多少步，以及在步数最少的前提下，行走方案有多少种。", "inputFormat": "第一行包含三个整数 $R,C,Q$，表示象棋世界中棋盘的行数，列数，以及需要回答的询问数。\n\n接下来 $Q$ 行，包含一个字母 $T$，代表棋子种类，以及两个整数 $c_1,c_R$，代表起点为第 $1$ 行的第 $c_1$ 列，终点为第 $R$ 行的第 $c_R$ 列。\n\n各字母与棋子种类对应关系如下所示：\n\n| 字母         | 棋子种类 |\n| ------------ | -------- |\n| $\\texttt{P}$ | 兵       |\n| $\\texttt{R}$ | 车       |\n| $\\texttt{B}$ | 象       |\n| $\\texttt{Q}$ | 后       |\n| $\\texttt{K}$ | 王       |", "outputFormat": "对于每个询问，输出两个整数，第一个整数代表从起点到终点需要走的最少步数，第二个整数代表在步数最少的前提下，从起点到终点的方案数。\n\n因为方案数可能很大，请输出其对 $10^9+7$ 取模后的结果。\n\n特别地，若无法从起点到达终点，请输出一行 `0 0`。", "hint": "所有测试点均满足：$1 \\leq Q \\leq 1000$，$2 \\leq C \\leq 1000$，$C \\leq R \\leq 10^9$，$T \\in \\{\\texttt{P},\\texttt{R},\\texttt{Q},\\texttt{B},\\texttt{K}\\}$，$1 \\leq c_1,c_R \\leq C$。\n\n各子任务的约束条件如下：\n\n| 子任务编号 | 分值 | 约束                                         |\n| ---------- | ---- | -------------------------------------------- |\n| $1$        | $0$  | 样例                                         |\n| $2$        | $8$  | $T \\in \\{\\texttt{P},\\texttt{R},\\texttt{Q}\\}$ |\n| $3$        | $15$ | $T=\\texttt{B}$，$C,R \\leq 100$               |\n| $4$        | $22$ | $T=\\texttt{B}$                               |\n| $5$        | $5$  | $T=\\texttt{K}$，$C,R \\leq 100$，$Q \\leq 50$  |\n| $6$        | $8$  | $T=\\texttt{K}$，$C,R \\leq 100$               |\n| $7$        | $15$ | $T=\\texttt{K}$，$C \\leq 100$                 |\n| $8$        | $20$ | $T=\\texttt{K}$                               |\n| $9$        | $7$  | 无特殊约束                                   |", "locale": "zh-CN"}}}
{"pid": "P6807", "type": "P", "difficulty": 3, "samples": [["5 10\n2 2 1 4 3 2 5 4 2 3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "BalticOI（波罗的海）"], "title": "[BalticOI 2010] Matching Bins (Day2)", "background": "", "description": "给定一行 $N$ 个整数 $A_1,A_2,\\dots,A_N$。 $M=\\max\\{A_1,A_2,\\dots A_N\\}$。\n\n你需要找到一个最大的整数 $K$，使得从左至右共 $K$ 个数都小于接下来的 $K$ 个数。", "inputFormat": "输入第一行两个整数 $M,N$，表示数列中的最大数和数的个数。\n\n第二行 $N$ 个整数 $A_1,A_2,\\dots,A_N$。", "outputFormat": "输出一行一个整数，为最大的 $K$。", "hint": "对于 $100\\%$ 的数据，保证 $1\\le M\\le 2\\times 10^3$，$1\\le N\\le 2\\times 10^4$，$1\\le A_i\\le M$。\n\n----\n\n**题目译自 [BalticOI 2010](https://www.luogu.com.cn/problem/U125995) [Day2](https://boi.cses.fi/files/boi2010_day2.pdf) *T1 Matching Bins***。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2010] Matching Bins (Day2)", "background": "", "description": "给定一行 $N$ 个整数 $A_1,A_2,\\dots,A_N$。 $M=\\max\\{A_1,A_2,\\dots A_N\\}$。\n\n你需要找到一个最大的整数 $K$，使得从左至右共 $K$ 个数都小于接下来的 $K$ 个数。", "inputFormat": "输入第一行两个整数 $M,N$，表示数列中的最大数和数的个数。\n\n第二行 $N$ 个整数 $A_1,A_2,\\dots,A_N$。", "outputFormat": "输出一行一个整数，为最大的 $K$。", "hint": "对于 $100\\%$ 的数据，保证 $1\\le M\\le 2\\times 10^3$，$1\\le N\\le 2\\times 10^4$，$1\\le A_i\\le M$。\n\n----\n\n**题目译自 [BalticOI 2010](https://www.luogu.com.cn/problem/U125995) [Day2](https://boi.cses.fi/files/boi2010_day2.pdf) *T1 Matching Bins***。", "locale": "zh-CN"}}}
{"pid": "P6808", "type": "P", "difficulty": 5, "samples": [["4\n1 3 4 4", "4 9"], ["5\n3 3 3 3 3", "3 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "BalticOI（波罗的海）"], "title": "[BalticOI 2010] Candies (Day2)", "background": null, "description": "给定一个长度为 $N$ 的序列 $B_1,B_2,\\dots,B_N$。\n\n一个整数 $M$ 能够被表示出来当且仅当从序列中任取 $K$ 个数 $A_1,A_2,\\dots,A_K$，使得 $\\sum_{i=1}^{K}A_i=M$。\n\n你需要修改序列中的一个数 $P$，使得尽可能多的整数能够被表示出来。", "inputFormat": "输入第一行一个整数 $N$。\n\n第二行 $N$ 个整数 $B_1,B_2,\\dots,B_N$。", "outputFormat": "输出一行两个整数 $P,Q$，以一个空格隔开。\n\n表示序列中的一个数字 $P$ 修改成 $Q$。\n\n如果有多种方案，则输出的 $P$ 尽可能小。 $P$ 最小时如有多种方案，则输出的 $Q$ 尽可能小。", "hint": "对于 $100\\%$ 的数据，保证 $2\\le N\\le 100$，$1\\le B_i\\le 7000$。\n\n\n**题目译自 [BalticOI 2010](https://www.luogu.com.cn/problem/U126003) [Day2](https://boi.cses.fi/files/boi2010_day2.pdf) *T2 Candies***。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2010] Candies (Day2)", "background": null, "description": "给定一个长度为 $N$ 的序列 $B_1,B_2,\\dots,B_N$。\n\n一个整数 $M$ 能够被表示出来当且仅当从序列中任取 $K$ 个数 $A_1,A_2,\\dots,A_K$，使得 $\\sum_{i=1}^{K}A_i=M$。\n\n你需要修改序列中的一个数 $P$，使得尽可能多的整数能够被表示出来。", "inputFormat": "输入第一行一个整数 $N$。\n\n第二行 $N$ 个整数 $B_1,B_2,\\dots,B_N$。", "outputFormat": "输出一行两个整数 $P,Q$，以一个空格隔开。\n\n表示序列中的一个数字 $P$ 修改成 $Q$。\n\n如果有多种方案，则输出的 $P$ 尽可能小。 $P$ 最小时如有多种方案，则输出的 $Q$ 尽可能小。", "hint": "对于 $100\\%$ 的数据，保证 $2\\le N\\le 100$，$1\\le B_i\\le 7000$。\n\n\n**题目译自 [BalticOI 2010](https://www.luogu.com.cn/problem/U126003) [Day2](https://boi.cses.fi/files/boi2010_day2.pdf) *T2 Candies***。", "locale": "zh-CN"}}}
{"pid": "P6809", "type": "P", "difficulty": 7, "samples": [["3 5\n24531\n46631\n34310", ".XXX.\n.XX..\nXX...\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "提交答案", "Special Judge", "BalticOI（波罗的海）"], "title": "[BalticOI 2010] Mines (Day2)", "background": "**本题为提交答案题，输入公开，请见题目附件。**", "description": "给定一个 $H\\times W$ 的矩阵 A，矩阵 A 中的每个数都等于矩阵 B 中相同位置四周八个方向的 `X` 加上该位置的 `X` 的个数。\n\n请构造任意一种由 `.` 和 `X` 组成的满足题意的 $H\\times W$ 的矩阵 B.", "inputFormat": "输入第一行一个整数 $H,W$，表示矩阵的规格。\n\n接下来的 $H$ 行，每行 $W$ 个整数，表示矩阵 A。", "outputFormat": "输出共 $H$ 行，每行 $W$ 个字符 `.` 或 `X`，表示一种满足条件的矩阵 B。**本题使用 SPJ。**", "hint": "对于 $100\\%$ 的数据，保证 $1\\le H,W\\le 600$，始终有方案存在。\n\n**题目译自 [BalticOI 2010](https://www.luogu.com.cn/problem/U126003) [Day2](https://boi.cses.fi/files/boi2010_day2.pdf) *T3 Mines***。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2010] Mines (Day2)", "background": "**本题为提交答案题，输入公开，请见题目附件。**", "description": "给定一个 $H\\times W$ 的矩阵 A，矩阵 A 中的每个数都等于矩阵 B 中相同位置四周八个方向的 `X` 加上该位置的 `X` 的个数。\n\n请构造任意一种由 `.` 和 `X` 组成的满足题意的 $H\\times W$ 的矩阵 B.", "inputFormat": "输入第一行一个整数 $H,W$，表示矩阵的规格。\n\n接下来的 $H$ 行，每行 $W$ 个整数，表示矩阵 A。", "outputFormat": "输出共 $H$ 行，每行 $W$ 个字符 `.` 或 `X`，表示一种满足条件的矩阵 B。**本题使用 SPJ。**", "hint": "对于 $100\\%$ 的数据，保证 $1\\le H,W\\le 600$，始终有方案存在。\n\n**题目译自 [BalticOI 2010](https://www.luogu.com.cn/problem/U126003) [Day2](https://boi.cses.fi/files/boi2010_day2.pdf) *T3 Mines***。", "locale": "zh-CN"}}}
{"pid": "P6810", "type": "P", "difficulty": 5, "samples": [["5 7 9", "5"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "数论", "洛谷原创", "最大公约数 gcd"], "title": "「MCOI-02」Convex Hull 凸包", "background": "一场比赛需要一道签到题。", "description": "Leasier 玩 MC 被逮到了，所以他只好算出下面这个式子的值。\n\n$$\\displaystyle\\sum_{i = 1}^n \\sum_{j = 1}^m \\tau(i) \\tau(j) \\tau(\\gcd(i, j))$$\n\n由于结果可能很大，所以你只需要求出结果对 $p$ 取模的值。\n\n如果您对本题的数学符号有疑问，请到「提示」区查看提示。", "inputFormat": "一行，三个整数 $n, m, p$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "#### 数据规模和约定\n**本题开启捆绑测试。**\n\n| Subtask | $n, m$ | 分值 |\n| :------: | :------: | :------: |\n| $1$ | $1 \\leq n, m \\leq 10^3$ | $15 \\operatorname{pts}$ |\n| $2$ | $1 \\leq n, m \\leq 10^5$ | $25 \\operatorname{pts}$ |\n| $3$ | $1 \\leq n, m \\leq 10^6$ | $30 \\operatorname{pts}$ |\n| $4$ | 无特殊限制 | $30 \\operatorname{pts}$ |\n\n对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 2 \\times 10^6$，$1 \\leq p \\leq 10^9$。\n#### 提示\n作为对萌新友好的签到题，肯定是要给提示的。\n\n- $\\sum$ 为求和符号，比如 $\\displaystyle\\sum_{i = 1}^n i$ 代表 $1 + 2 + \\cdots + n$。\n- $\\tau$ 表示约数个数，比如 $\\tau(6) = 4$。\n- $\\gcd$ 是最大公约数，比如 $\\gcd(12, 15) = 3$。\n#### 说明\nMinecraft OI Round 2 A\n\n- Maker：Leasier\n- Tester：happydef", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-02」Convex Hull 凸包", "background": "一场比赛需要一道签到题。", "description": "Leasier 玩 MC 被逮到了，所以他只好算出下面这个式子的值。\n\n$$\\displaystyle\\sum_{i = 1}^n \\sum_{j = 1}^m \\tau(i) \\tau(j) \\tau(\\gcd(i, j))$$\n\n由于结果可能很大，所以你只需要求出结果对 $p$ 取模的值。\n\n如果您对本题的数学符号有疑问，请到「提示」区查看提示。", "inputFormat": "一行，三个整数 $n, m, p$。", "outputFormat": "一行，一个整数，表示所求的值。", "hint": "#### 数据规模和约定\n**本题开启捆绑测试。**\n\n| Subtask | $n, m$ | 分值 |\n| :------: | :------: | :------: |\n| $1$ | $1 \\leq n, m \\leq 10^3$ | $15 \\operatorname{pts}$ |\n| $2$ | $1 \\leq n, m \\leq 10^5$ | $25 \\operatorname{pts}$ |\n| $3$ | $1 \\leq n, m \\leq 10^6$ | $30 \\operatorname{pts}$ |\n| $4$ | 无特殊限制 | $30 \\operatorname{pts}$ |\n\n对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 2 \\times 10^6$，$1 \\leq p \\leq 10^9$。\n#### 提示\n作为对萌新友好的签到题，肯定是要给提示的。\n\n- $\\sum$ 为求和符号，比如 $\\displaystyle\\sum_{i = 1}^n i$ 代表 $1 + 2 + \\cdots + n$。\n- $\\tau$ 表示约数个数，比如 $\\tau(6) = 4$。\n- $\\gcd$ 是最大公约数，比如 $\\gcd(12, 15) = 3$。\n#### 说明\nMinecraft OI Round 2 A\n\n- Maker：Leasier\n- Tester：happydef", "locale": "zh-CN"}}}
{"pid": "P6811", "type": "P", "difficulty": 6, "samples": [["10 6\n1 1 4 5 1 4", "11\n11\n833\n944\n11\n833"], ["1000000 1\n114514", "945636198"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数学"], "title": "「MCOI-02」Build Battle 建筑大师", "background": "WAPER 爱玩 hypixel（世界上最大的 Minecraft 小游戏服务器） 建筑大师！\n\n提示：在本题中，羊毛属于一种方块。", "description": "现在 WAPER 准备玩 $q$ 局建筑大师。在第 $i$ 局游戏的开始，WAPER 会选定一个参数 $m_i$，并 **按顺序** 放置 $n$ 个有颜色的羊毛，羊毛颜色的排列如下：\n\n$$1,\\ 2,\\ ...\\ ,\\ m_i-1,\\ m_i,\\ 1,\\ 2,\\ ...\\ ,m_i-1\\ ,m_i\\ ,\\ ...\\ (n-1) \\ \\bmod \\  m_i+1$$\n\n例如 $n=7,m=3$ 时，颜色排列如下：\n\n$$1\\ ,2,\\ 3,\\ 1,\\ 2,\\ 3,\\ 1$$\n\n现在 WAPER 准备打破一些方块（可以一个也不打破，也可以全部打破），WAPER 想知道这样可以产生多少种不同的颜色序列。（两个颜色序列不同当且仅当其长度不同或某一位置的羊毛颜色不同）\n\n因为答案太大，所以输出答案对 $10^9+7$ 取模的结果。\n\n（其实就是询问这个序列本质不同的子序列对 $10^9+7$ 取模的结果）", "inputFormat": "第一行两个整数 $n$ 和 $q$ 代表羊毛数和局数。       \n第二行 $q$ 个整数 $m_i$ 代表参数。", "outputFormat": "$q$ 行，每行一个整数代表答案。    \n答案对 $10^9+7$ 取模。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）$\\ \\ $：$n \\le 20$，$q=1$。\n- Subtask 2（15 pts）：$n \\le 10^3$，$q=1$。\n- Subtask 3（15 pts）：$\\max\\{m_i\\} \\le 20$，$q=1$。\n- Subtask 4（25 pts）：$q=1$。\n- Subtask 5（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,q \\le 10^6$，$1 \\le m_i \\le n$。\n\n#### 说明\n\nMinecraft OI Round 2 B\n\n- Maker：WAPER420\n- Tester：灵空\n\n$样例不是出题人写的！！！！！！！！$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-02」Build Battle 建筑大师", "background": "WAPER 爱玩 hypixel（世界上最大的 Minecraft 小游戏服务器） 建筑大师！\n\n提示：在本题中，羊毛属于一种方块。", "description": "现在 WAPER 准备玩 $q$ 局建筑大师。在第 $i$ 局游戏的开始，WAPER 会选定一个参数 $m_i$，并 **按顺序** 放置 $n$ 个有颜色的羊毛，羊毛颜色的排列如下：\n\n$$1,\\ 2,\\ ...\\ ,\\ m_i-1,\\ m_i,\\ 1,\\ 2,\\ ...\\ ,m_i-1\\ ,m_i\\ ,\\ ...\\ (n-1) \\ \\bmod \\  m_i+1$$\n\n例如 $n=7,m=3$ 时，颜色排列如下：\n\n$$1\\ ,2,\\ 3,\\ 1,\\ 2,\\ 3,\\ 1$$\n\n现在 WAPER 准备打破一些方块（可以一个也不打破，也可以全部打破），WAPER 想知道这样可以产生多少种不同的颜色序列。（两个颜色序列不同当且仅当其长度不同或某一位置的羊毛颜色不同）\n\n因为答案太大，所以输出答案对 $10^9+7$ 取模的结果。\n\n（其实就是询问这个序列本质不同的子序列对 $10^9+7$ 取模的结果）", "inputFormat": "第一行两个整数 $n$ 和 $q$ 代表羊毛数和局数。       \n第二行 $q$ 个整数 $m_i$ 代表参数。", "outputFormat": "$q$ 行，每行一个整数代表答案。    \n答案对 $10^9+7$ 取模。", "hint": "#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）$\\ \\ $：$n \\le 20$，$q=1$。\n- Subtask 2（15 pts）：$n \\le 10^3$，$q=1$。\n- Subtask 3（15 pts）：$\\max\\{m_i\\} \\le 20$，$q=1$。\n- Subtask 4（25 pts）：$q=1$。\n- Subtask 5（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,q \\le 10^6$，$1 \\le m_i \\le n$。\n\n#### 说明\n\nMinecraft OI Round 2 B\n\n- Maker：WAPER420\n- Tester：灵空\n\n$样例不是出题人写的！！！！！！！！$", "locale": "zh-CN"}}}
{"pid": "P6812", "type": "P", "difficulty": 4, "samples": [["7 5\n1 9 1 9 8 1 0\n2 1 3\n1 3 4 9\n2 1 4\n1 5 6 11\n2 2 6", "No\nYes\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "O2优化"], "title": "「MCOI-02」Ancestor 先辈", "background": "这题跟 MC 有关的就是题目背景出现了三次 MC，提示说明出现了一次 MC。\n\n```\n           ▃▆█▇▄▖\n       ▟◤▖　　　  ◥█  \n   ◢◤ 　  ◢▐　　     ▐▉\n ▗◤　  　   ▂ ▗▖　 ▕ █▎\n ◤　▗▅▖ ◥▄　 ▀▀▀◣　█▊\n▐　▕▎  ◥▖◣◤　 　　◢██\n█◣　◥▅█▀　     　▐███◤\n▐█▙▂　　　      ◢███◤\n　◥██◣　　　　 ◢▄◤\n　　　▀██▅▇▀▎▇\n```", "description": "对于两个序列 $a,b$，如果满足：\n\n$$ \\forall i \\leq \\min(n,m),s.t.\\ a_i \\leq b_i $$\n\n那么我们称 $a$ 比 $b$ 屑（$n$ 为 $a$ 的长度，$m$ 为 $b$ 的长度）。\n\n如果对于一个序列 $a$，它比它的所有后缀都屑，那么我们称这个序列为先辈。\n\n给定一个长为 $n$ 的序列 $a_i$，共有 $k$ 次操作，包括以下两种：\n\n- `1 l r x` 区间 $[l,r]$ 加上 $x$。\n- `2 l r` 查询区间 $[l,r]$ 是不是先辈。", "inputFormat": "第一行两个整数 $n,k$ 代表序列长度与操作数。     \n第二行 $n$ 个整数 $a_i$ 代表数列每一项的值。    \n接下来 $k$ 行每行首先三个整数 $opt,l,r$：\n\n- 如果 $opt=1$，接下来一个整数 $x$ 代表操作 $1$。\n- 如果 $opt=2$，代表操作 $2$。\n\n**由于数据故障，$r$ 可能取到 $n+1$，请在这类情况下自行令 $r=n$，谢谢。**", "outputFormat": "对于每个操作 $2$，输出询问结果。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n1. 询问区间 $[1,3]$ 是否为先辈，不是，输出 `No`。\n2. 区间 $[3,4]$ 加上 $9$，现在序列为 $\\{1,9,10,18,8,1,0\\}$。\n3. 询问区间 $[1,4]$ 是否为先辈，是，输出 `Yes`。\n4. 区间 $[5,6]$ 加上 $11$，现在序列为 $\\{1,9,10,18,19,12,0\\}$。\n5. 询问区间 $[2,6]$ 是否为先辈，不是，输出 `No`。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（1 pts）$\\ \\ $：询问操作的区间长度均为 $1$。\n- Subtask 2（9 pts）$\\ \\ $：$n,k \\le 10^3$。\n- Subtask 3（10 pts）：$n,k\\le 5\\times 10^3$。\n- Subtask 4（10 pts）：只有查询操作。\n- Subtask 5（10 pts）：修改操作的数量不超过 $100$。\n- Subtask 6（20 pts）：$n,k \\le 10^5$。\n- Subtask 7（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 10^6$，$|a_i|,|x| \\le 10^9$。\n\n**本题强制 $O2$ 优化。**\n\n#### 说明\n\nMinecraft OI Round 2 C\n\n- Maker：happydef\n- Tester：tarjin", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-02」Ancestor 先辈", "background": "这题跟 MC 有关的就是题目背景出现了三次 MC，提示说明出现了一次 MC。\n\n```\n           ▃▆█▇▄▖\n       ▟◤▖　　　  ◥█  \n   ◢◤ 　  ◢▐　　     ▐▉\n ▗◤　  　   ▂ ▗▖　 ▕ █▎\n ◤　▗▅▖ ◥▄　 ▀▀▀◣　█▊\n▐　▕▎  ◥▖◣◤　 　　◢██\n█◣　◥▅█▀　     　▐███◤\n▐█▙▂　　　      ◢███◤\n　◥██◣　　　　 ◢▄◤\n　　　▀██▅▇▀▎▇\n```", "description": "对于两个序列 $a,b$，如果满足：\n\n$$ \\forall i \\leq \\min(n,m),s.t.\\ a_i \\leq b_i $$\n\n那么我们称 $a$ 比 $b$ 屑（$n$ 为 $a$ 的长度，$m$ 为 $b$ 的长度）。\n\n如果对于一个序列 $a$，它比它的所有后缀都屑，那么我们称这个序列为先辈。\n\n给定一个长为 $n$ 的序列 $a_i$，共有 $k$ 次操作，包括以下两种：\n\n- `1 l r x` 区间 $[l,r]$ 加上 $x$。\n- `2 l r` 查询区间 $[l,r]$ 是不是先辈。", "inputFormat": "第一行两个整数 $n,k$ 代表序列长度与操作数。     \n第二行 $n$ 个整数 $a_i$ 代表数列每一项的值。    \n接下来 $k$ 行每行首先三个整数 $opt,l,r$：\n\n- 如果 $opt=1$，接下来一个整数 $x$ 代表操作 $1$。\n- 如果 $opt=2$，代表操作 $2$。\n\n**由于数据故障，$r$ 可能取到 $n+1$，请在这类情况下自行令 $r=n$，谢谢。**", "outputFormat": "对于每个操作 $2$，输出询问结果。", "hint": "#### 样例说明\n\n对于样例 $1$：\n\n1. 询问区间 $[1,3]$ 是否为先辈，不是，输出 `No`。\n2. 区间 $[3,4]$ 加上 $9$，现在序列为 $\\{1,9,10,18,8,1,0\\}$。\n3. 询问区间 $[1,4]$ 是否为先辈，是，输出 `Yes`。\n4. 区间 $[5,6]$ 加上 $11$，现在序列为 $\\{1,9,10,18,19,12,0\\}$。\n5. 询问区间 $[2,6]$ 是否为先辈，不是，输出 `No`。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（1 pts）$\\ \\ $：询问操作的区间长度均为 $1$。\n- Subtask 2（9 pts）$\\ \\ $：$n,k \\le 10^3$。\n- Subtask 3（10 pts）：$n,k\\le 5\\times 10^3$。\n- Subtask 4（10 pts）：只有查询操作。\n- Subtask 5（10 pts）：修改操作的数量不超过 $100$。\n- Subtask 6（20 pts）：$n,k \\le 10^5$。\n- Subtask 7（40 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1 \\le n,k \\le 10^6$，$|a_i|,|x| \\le 10^9$。\n\n**本题强制 $O2$ 优化。**\n\n#### 说明\n\nMinecraft OI Round 2 C\n\n- Maker：happydef\n- Tester：tarjin", "locale": "zh-CN"}}}
{"pid": "P6813", "type": "P", "difficulty": 5, "samples": [["5\n1 2 1 2 1\n1 5 1\n1 2 2\n2 3 1\n2 4 2", "256"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": [], "title": "「MCOI-02」Glass 玻璃", "background": "小 S 进入了一个服务器，这个服务器有一个游戏叫“树上的玻璃”。", "description": "首先给定一棵树，每个点上有 $V_i$ 个玻璃，每条边上有权值 $W_i$。\n\n每次操作小 S 可以选择两个节点 $u,v(u\\ne v)$，从节点 $u$ 到节点 $v$ 的唯一路径上，**边和** 为路径上所有边的权值和，即 $\\sum W_i$，**点和** 为路径上所有点（包括 $u,v$）的玻璃数和，即 $\\sum V_i$。小 S 将可以获得 **边和** 和 **点和** 的乘积的分数，即 $\\sum W_i\\times\\sum V_i$。\n\n任意两次操作不能完全相同，$(u,v)$ 和 $(v,u)$ 被看作是两种操作。\n\n但是有时候这颗树太过庞大，小 S 需要你的帮助。他需要你告诉他，经过 $N(N-1)$ 次操作后，总共能得到多少分。结果可能很大，你只需要输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行一个整数 $N$ 表示树的节点数。      \n第二行 $N$ 个整数，第 $i$ 个数 $V_i$ 表示节点 $i$ 的玻璃数。   \n接下来 $N-1$ 行，每行三个数 $x,y,z$，表示节点 $x,y$ 之间连有一条权值为 $z$ 的树边。", "outputFormat": "一个整数，即总共能得到的分对 $998244353$ 取模。", "hint": "#### 样例说明\n\n对于样例 $1$，树的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4yfdr3b6.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n|子任务编号  | $N$ | $V_i,W_i$ | 特殊性质 | 分值 |时限|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $\\le200$ | $\\lt 2^3$ |  | $3$ |$\\rm 1s$|\n| 2 | $\\le10^3$ | $\\lt2^3$ |  | $6$ |$\\rm 1s$|\n| 3 | $\\le6\\times10^3$ | $\\lt2^8$ |  | $11$ |$\\rm 1s$|\n| 4 | $\\le2\\times 10^5$ | $\\lt 2^8$ | 存在度数为 $N-1$ 的节点 | $12$ |$\\rm 1s$|\n| 5 | $\\le2\\times10^5$ |  | 树的形态为一条链 | $13$ |$\\rm 1s$|\n| 6 | $\\le2\\times10^5$ |  |  | $21$ |$\\rm 1s$|\n| 7 | $\\le2\\times10^6$ |  |  | $34$ |$\\rm 2s$|\n\n对于 $100\\%$ 的数据，$0\\le V_i,W_i\\lt2^\n{16}$，$1 \\le N\\le2\\times10^6$。\n\n#### 说明\n\nMinecraft OI Round 2 D\n\n- Maker：Inf_Voltage\n- Tester：tarjin\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-02」Glass 玻璃", "background": "小 S 进入了一个服务器，这个服务器有一个游戏叫“树上的玻璃”。", "description": "首先给定一棵树，每个点上有 $V_i$ 个玻璃，每条边上有权值 $W_i$。\n\n每次操作小 S 可以选择两个节点 $u,v(u\\ne v)$，从节点 $u$ 到节点 $v$ 的唯一路径上，**边和** 为路径上所有边的权值和，即 $\\sum W_i$，**点和** 为路径上所有点（包括 $u,v$）的玻璃数和，即 $\\sum V_i$。小 S 将可以获得 **边和** 和 **点和** 的乘积的分数，即 $\\sum W_i\\times\\sum V_i$。\n\n任意两次操作不能完全相同，$(u,v)$ 和 $(v,u)$ 被看作是两种操作。\n\n但是有时候这颗树太过庞大，小 S 需要你的帮助。他需要你告诉他，经过 $N(N-1)$ 次操作后，总共能得到多少分。结果可能很大，你只需要输出答案对 $998244353$ 取模的结果。", "inputFormat": "第一行一个整数 $N$ 表示树的节点数。      \n第二行 $N$ 个整数，第 $i$ 个数 $V_i$ 表示节点 $i$ 的玻璃数。   \n接下来 $N-1$ 行，每行三个数 $x,y,z$，表示节点 $x,y$ 之间连有一条权值为 $z$ 的树边。", "outputFormat": "一个整数，即总共能得到的分对 $998244353$ 取模。", "hint": "#### 样例说明\n\n对于样例 $1$，树的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4yfdr3b6.png)\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n|子任务编号  | $N$ | $V_i,W_i$ | 特殊性质 | 分值 |时限|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | $\\le200$ | $\\lt 2^3$ |  | $3$ |$\\rm 1s$|\n| 2 | $\\le10^3$ | $\\lt2^3$ |  | $6$ |$\\rm 1s$|\n| 3 | $\\le6\\times10^3$ | $\\lt2^8$ |  | $11$ |$\\rm 1s$|\n| 4 | $\\le2\\times 10^5$ | $\\lt 2^8$ | 存在度数为 $N-1$ 的节点 | $12$ |$\\rm 1s$|\n| 5 | $\\le2\\times10^5$ |  | 树的形态为一条链 | $13$ |$\\rm 1s$|\n| 6 | $\\le2\\times10^5$ |  |  | $21$ |$\\rm 1s$|\n| 7 | $\\le2\\times10^6$ |  |  | $34$ |$\\rm 2s$|\n\n对于 $100\\%$ 的数据，$0\\le V_i,W_i\\lt2^\n{16}$，$1 \\le N\\le2\\times10^6$。\n\n#### 说明\n\nMinecraft OI Round 2 D\n\n- Maker：Inf_Voltage\n- Tester：tarjin\n", "locale": "zh-CN"}}}
{"pid": "P6814", "type": "P", "difficulty": 7, "samples": [["3\n9 2 3\n3 8\n2 5 6\n6 2 2\n5 6\n2 4\n7 1 1\n3\n4", "C\nB\nR"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "PA（波兰）"], "title": "[PA 2009] Circular Game", "background": "", "description": "一个大小为 $m$ 的轮盘，上面有 $a$ 个白棋子，$b$ 个黑棋子。\n\n白棋先行，每次可以走到一个中间没有任何棋子的位。\n\n例如下图中，$8$ 号棋子可以走到 $1、7、9$ 中任意一个位置。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u9d5ifjt.png?x-oss-process=image/resize,m_lfit,h_300,w_300)", "inputFormat": "输入的第一行包含一个整数 $t$，表示数据组数。\n\n对于每组数据的第一行有三个整数 $m$，$a$ 和 $b$ ，表示棋盘的长度、白色棋子的数量和黑色棋子的数量。\n\n对于每组数据的第二行，有一个递增的整数序列，代表白色棋子的位置。\n\n对于每组数据的第三行有一个递增的整数序列，代表黑子的位置。", "outputFormat": "对于每组数据输出一个单一的字符：$B$ 、$C$ 或 $R$。\n\n若白棋胜输出 $B$，若黑棋胜输出 $C$，\n若永不结束，输出 $R$。", "hint": "$1\\leq m \\leq 10^9,1\\leq \\sum a+ b \\leq 10^6 $", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2009] Circular Game", "background": "", "description": "一个大小为 $m$ 的轮盘，上面有 $a$ 个白棋子，$b$ 个黑棋子。\n\n白棋先行，每次可以走到一个中间没有任何棋子的位。\n\n例如下图中，$8$ 号棋子可以走到 $1、7、9$ 中任意一个位置。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u9d5ifjt.png?x-oss-process=image/resize,m_lfit,h_300,w_300)", "inputFormat": "输入的第一行包含一个整数 $t$，表示数据组数。\n\n对于每组数据的第一行有三个整数 $m$，$a$ 和 $b$ ，表示棋盘的长度、白色棋子的数量和黑色棋子的数量。\n\n对于每组数据的第二行，有一个递增的整数序列，代表白色棋子的位置。\n\n对于每组数据的第三行有一个递增的整数序列，代表黑子的位置。", "outputFormat": "对于每组数据输出一个单一的字符：$B$ 、$C$ 或 $R$。\n\n若白棋胜输出 $B$，若黑棋胜输出 $C$，\n若永不结束，输出 $R$。", "hint": "$1\\leq m \\leq 10^9,1\\leq \\sum a+ b \\leq 10^6 $", "locale": "zh-CN"}}}
{"pid": "P6815", "type": "P", "difficulty": 5, "samples": [["5 7\n1 5 3 4 2\n1 2\n2 3\n5 2\n4 3\n3 1\n1 4\n5 1", "14"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2009", "枚举", "根号分治", "PA（波兰）"], "title": "[PA 2009] Cakes", "background": null, "description": "全国各地的糕点师都来到了蛋糕大会上来。在一个大会上，有一个为 $3$ 个糕点师共同制作蛋糕的比赛。每个团队（三个糕点师）最多可以制作一个蛋糕，一个糕点师可以属于多个团队。不幸的是有一些糕点师们互相不认可对方，他们并不会与对方合作。\n\n我们知道每个糕点师需要多重的面粉来烘烤蛋糕。对于一个三人团队，需要的面粉是其成员中需要面粉的最大值。比赛需要保证每个可能的三人团队都可以做一个蛋糕。你的任务是计算比赛期间所使用的总面粉量。", "inputFormat": "第一行：两个整数 $n$ 和 $m$（$1 \\le n \\le 10^5$，$1 \\le m \\le 2.5\\times 10^5$）表示糕点师的数量和互相认可的糕点师对的数量。\n\n第二行：$n$ 个整数 $p_1, p_2, \\dots, p_n$（$1 \\le p_i \\le 10^6$）表示每个糕点师的面粉需求。\n\n接下来的 $m$ 行：每行包含两个不同的整数 $a_i, b_i$（$1 \\le a_i, b_i \\le n$，$a_i \\ne b_i$）表示 $a_i$ 和 $b_i$ 两个糕点师互相认可。没有一对互相认可的糕点师出现超过一次。", "outputFormat": "一行一个整数，表示所有比赛期间使用的总面粉量。", "hint": "#### 样例解释\n\n有如下团队：$(1,2,3),(1,2,5),(1,3,4)$，分别需要 $5,5,4$ 的面粉，总共需要 $5+5+4=14$ 的面粉。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2009] Cakes", "background": null, "description": "全国各地的糕点师都来到了蛋糕大会上来。在一个大会上，有一个为 $3$ 个糕点师共同制作蛋糕的比赛。每个团队（三个糕点师）最多可以制作一个蛋糕，一个糕点师可以属于多个团队。不幸的是有一些糕点师们互相不认可对方，他们并不会与对方合作。\n\n我们知道每个糕点师需要多重的面粉来烘烤蛋糕。对于一个三人团队，需要的面粉是其成员中需要面粉的最大值。比赛需要保证每个可能的三人团队都可以做一个蛋糕。你的任务是计算比赛期间所使用的总面粉量。", "inputFormat": "第一行：两个整数 $n$ 和 $m$（$1 \\le n \\le 10^5$，$1 \\le m \\le 2.5\\times 10^5$）表示糕点师的数量和互相认可的糕点师对的数量。\n\n第二行：$n$ 个整数 $p_1, p_2, \\dots, p_n$（$1 \\le p_i \\le 10^6$）表示每个糕点师的面粉需求。\n\n接下来的 $m$ 行：每行包含两个不同的整数 $a_i, b_i$（$1 \\le a_i, b_i \\le n$，$a_i \\ne b_i$）表示 $a_i$ 和 $b_i$ 两个糕点师互相认可。没有一对互相认可的糕点师出现超过一次。", "outputFormat": "一行一个整数，表示所有比赛期间使用的总面粉量。", "hint": "#### 样例解释\n\n有如下团队：$(1,2,3),(1,2,5),(1,3,4)$，分别需要 $5,5,4$ 的面粉，总共需要 $5+5+4=14$ 的面粉。", "locale": "zh-CN"}}}
{"pid": "P6816", "type": "P", "difficulty": 7, "samples": [["aaaabaabaaaba", "10\naabaa"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2009", "PA（波兰）"], "title": "[PA 2009] Quasi-template", "background": "", "description": "定义一个串 $s$ 能匹配 $S$ 当且仅当 $s$ 能可超出头尾地覆盖\n$S$ 且长度不超过 $S$，且 $s$ 必须是 $S$ 的子串。\n\n如下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gpq807qg.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n给定 $S$ ，求不同的 $s$ 的个数以及长度最短的 $s$，如有多解，输出字典序最小的。", "inputFormat": "一行一个字符串 $S$。", "outputFormat": "第一行一个整数表示方案数。\n\n第二行一个字符串，表示长度最短的 $s$，如有多解，输出字典序最小的。", "hint": "符合条件的串：\naaaabaabaaab, aaaabaabaaaba, aaabaaba, aaabaabaa, aaabaabaaa, aaabaabaaaba, aabaa, aabaabaa, aabaabaaa, abaabaaa.\n\n$S$ 的长度 $\\leq 2\\times 10^5$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2009] Quasi-template", "background": "", "description": "定义一个串 $s$ 能匹配 $S$ 当且仅当 $s$ 能可超出头尾地覆盖\n$S$ 且长度不超过 $S$，且 $s$ 必须是 $S$ 的子串。\n\n如下图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gpq807qg.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n给定 $S$ ，求不同的 $s$ 的个数以及长度最短的 $s$，如有多解，输出字典序最小的。", "inputFormat": "一行一个字符串 $S$。", "outputFormat": "第一行一个整数表示方案数。\n\n第二行一个字符串，表示长度最短的 $s$，如有多解，输出字典序最小的。", "hint": "符合条件的串：\naaaabaabaaab, aaaabaabaaaba, aaabaaba, aaabaabaa, aaabaabaaa, aaabaabaaaba, aabaa, aabaabaa, aabaabaaa, abaabaaa.\n\n$S$ 的长度 $\\leq 2\\times 10^5$", "locale": "zh-CN"}}}
{"pid": "P6817", "type": "P", "difficulty": 6, "samples": [["6\n7 4 10 8 7 1", "5 3"]], "limits": {"time": [1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2013", "PA（波兰）"], "title": "[PA 2013] Filary", "background": "", "description": "给定长度为 $n$ 的数列 $a$，从中选取 $k$ 个数使得这 $k$ 个数模 $m$ 相等，其中 $m\\geq 2$。\n\n求出 $k$ 的最大值，并在 $k$ 最大的前提下最大化 $m$。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数，表示数列 $a$。", "outputFormat": "一行两个数 $k,m$。", "hint": "$2\\leq n\\leq 10^5$，$1\\leq a_i\\leq 10^7$，保证有解，且不存在所有 $a_i$ 都相等的情况。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2013] Filary", "background": "", "description": "给定长度为 $n$ 的数列 $a$，从中选取 $k$ 个数使得这 $k$ 个数模 $m$ 相等，其中 $m\\geq 2$。\n\n求出 $k$ 的最大值，并在 $k$ 最大的前提下最大化 $m$。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数，表示数列 $a$。", "outputFormat": "一行两个数 $k,m$。", "hint": "$2\\leq n\\leq 10^5$，$1\\leq a_i\\leq 10^7$，保证有解，且不存在所有 $a_i$ 都相等的情况。", "locale": "zh-CN"}}}
{"pid": "P6818", "type": "P", "difficulty": 7, "samples": [["9 7\n1 1\n1 3\n3 3\n3 1\n6 5\n6 6\n7 3\n3\n0 4 0 4\n2 7 0 7\n3 7 3 6", "4.0\n10.0\n6.0"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "PA（波兰）"], "title": "[PA 2013] Działka", "background": "", "description": "给定 $k\\times k$ 平面中的 $n$ 个点，$m$ 次询问，每次询问一个边平行于坐标轴的矩形内部（包含边界）的点构成的凸包面积。", "inputFormat": "第一行两个正整数 $k,n$。\n\n接下来 $n$ 行，第 $i$ 行包含两个整数 $x_i,y_i$ 表示第 $i$ 个点的坐标。\n\n之后一行一个数 $m$。\n\n之后 $m$ 行，第 $i$ 行包含四个数 $a_i,b_i,c_i,d_i)$，表示询问左下角为 $(a_i,c_i)$，右上角为 $(b_i,d_i)$ 的矩形。\n", "outputFormat": "对于每个询问输出一行表示面积。保留小数点后一位。", "hint": "$1\\leq k\\leq 10^6$，$3\\leq n\\leq 3\\times 10^3$，$1\\leq m\\leq 10^6$，$0\\leq x_i,y_i,a_i,b_i,c_i,d_i\\leq k，a_i<c_i,b_i<d_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2013] Działka", "background": "", "description": "给定 $k\\times k$ 平面中的 $n$ 个点，$m$ 次询问，每次询问一个边平行于坐标轴的矩形内部（包含边界）的点构成的凸包面积。", "inputFormat": "第一行两个正整数 $k,n$。\n\n接下来 $n$ 行，第 $i$ 行包含两个整数 $x_i,y_i$ 表示第 $i$ 个点的坐标。\n\n之后一行一个数 $m$。\n\n之后 $m$ 行，第 $i$ 行包含四个数 $a_i,b_i,c_i,d_i)$，表示询问左下角为 $(a_i,c_i)$，右上角为 $(b_i,d_i)$ 的矩形。\n", "outputFormat": "对于每个询问输出一行表示面积。保留小数点后一位。", "hint": "$1\\leq k\\leq 10^6$，$3\\leq n\\leq 3\\times 10^3$，$1\\leq m\\leq 10^6$，$0\\leq x_i,y_i,a_i,b_i,c_i,d_i\\leq k，a_i<c_i,b_i<d_i$。", "locale": "zh-CN"}}}
{"pid": "P6819", "type": "P", "difficulty": 6, "samples": [["2", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2012", "PA（波兰）"], "title": "[PA 2012] Binary Dodgeball", "background": "PA 2012 Round 6。", "description": "有 $n$ 个盒子，开始时每个盒子中有一个棋子。\n\n\n两位选手轮流操作，每次可以选择一个 $i$ 号盒子中的棋子和一个正整数 $p$，将棋子移到编号为 $2^p\\times i$ 的盒子中。若编号为 $2^p\\times i$ 的盒子中已有棋子了，则这两个棋子都会被移出盒子。不能移动者输。\n\n求第 $k$ 小的 $n$，使得**后**手能赢得游戏。", "inputFormat": "仅一行，包含一个正整数 $k$。", "outputFormat": "仅一行，包含一个正整数 $n$。", "hint": "对于 $100\\%$ 的数据，$1\\le k<10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2012] Binary Dodgeball", "background": "PA 2012 Round 6。", "description": "有 $n$ 个盒子，开始时每个盒子中有一个棋子。\n\n\n两位选手轮流操作，每次可以选择一个 $i$ 号盒子中的棋子和一个正整数 $p$，将棋子移到编号为 $2^p\\times i$ 的盒子中。若编号为 $2^p\\times i$ 的盒子中已有棋子了，则这两个棋子都会被移出盒子。不能移动者输。\n\n求第 $k$ 小的 $n$，使得**后**手能赢得游戏。", "inputFormat": "仅一行，包含一个正整数 $k$。", "outputFormat": "仅一行，包含一个正整数 $n$。", "hint": "对于 $100\\%$ 的数据，$1\\le k<10^9$。", "locale": "zh-CN"}}}
