{"pid": "P1441", "type": "P", "difficulty": 4, "samples": [["3 1\n1 2 2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "福建省历届夏令营"], "title": "砝码称重", "background": "", "description": "现有 $n$ 个砝码，重量分别为 $a_i$，在去掉 $m$ 个砝码后，问最多能称量出多少不同的重量（不包括 $0$）。\n\n请注意，砝码只能放在其中一边。", "inputFormat": "第 $1$ 行为有两个整数 $n$ 和 $m$，用空格分隔。\n\n第 $2$ 行有 $n$ 个正整数 $a_1, a_2, a_3,\\ldots , a_n$，表示每个砝码的重量。\n", "outputFormat": "仅包括 $1$ 个整数，为最多能称量出的重量数量。\n", "hint": "【样例说明】\n\n在去掉一个重量为 $2$ 的砝码后，能称量出 $1, 2, 3$ 共 $3$ 种重量。\n\n\n【数据规模】\n\n对于 $20\\%$ 的数据，$m=0$。\n\n对于 $50\\%$ 的数据，$m\\leq 1$。\n\n对于 $50\\%$ 的数据，$n\\leq 10$。\n\n对于 $100\\%$ 的数据，$n\\leq 20$， $m\\leq 4$，$m < n$，$a_i\\leq 100$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Weighing with Weights", "background": "", "description": "There are $n$ weights with masses $a_i$. After removing exactly $m$ weights, ask for the maximum number of different measurable weights (excluding $0$).\n\nNote that weights can only be placed on one side of the balance.", "inputFormat": "The first line contains two integers $n$ and $m$, separated by a space.\n\nThe second line contains $n$ positive integers $a_1, a_2, a_3, \\ldots, a_n$, representing each weight’s mass.", "outputFormat": "Output a single integer: the maximum number of different measurable weights.", "hint": "[Sample Explanation]\n\nAfter removing one weight of $2$, you can measure $1, 2, 3$, for a total of $3$ distinct weights.\n\n[Constraints]\n\n- For $20\\%$ of the testdata, $m = 0$.\n- For $50\\%$ of the testdata, $m \\leq 1$.\n- For $50\\%$ of the testdata, $n \\leq 10$.\n- For $100\\%$ of the testdata, $n \\leq 20$, $m \\leq 4$, $m < n$, $a_i \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "砝码称重", "background": "", "description": "现有 $n$ 个砝码，重量分别为 $a_i$，在去掉 $m$ 个砝码后，问最多能称量出多少不同的重量（不包括 $0$）。\n\n请注意，砝码只能放在其中一边。", "inputFormat": "第 $1$ 行为有两个整数 $n$ 和 $m$，用空格分隔。\n\n第 $2$ 行有 $n$ 个正整数 $a_1, a_2, a_3,\\ldots , a_n$，表示每个砝码的重量。\n", "outputFormat": "仅包括 $1$ 个整数，为最多能称量出的重量数量。\n", "hint": "【样例说明】\n\n在去掉一个重量为 $2$ 的砝码后，能称量出 $1, 2, 3$ 共 $3$ 种重量。\n\n\n【数据规模】\n\n对于 $20\\%$ 的数据，$m=0$。\n\n对于 $50\\%$ 的数据，$m\\leq 1$。\n\n对于 $50\\%$ 的数据，$n\\leq 10$。\n\n对于 $100\\%$ 的数据，$n\\leq 20$， $m\\leq 4$，$m < n$，$a_i\\leq 100$。\n", "locale": "zh-CN"}}}
{"pid": "P1442", "type": "P", "difficulty": 5, "samples": [["5 3\n6 10\n5 2 4\n9 3 9\n6 7 10\n2 1 5\n3 8 11\n", "15"], ["10 156\n84 139\n63 22 50\n79 96 100\n87 77 98\n60 24 53\n47 1 29\n62 55 89\n68 68 78\n10 5 85\n85 67 71\n73 57 61\n", "155\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "线段树", "颜色段均摊（珂朵莉树 ODT）", "O2优化", "最短路"], "title": "铁球落地", "background": "", "description": "在二维坐标系内有 $n$ 个平台（定义平台是一条两端点纵坐标相同的开线段，开线段指线段两个端点不算做线段本身）和一个铁球，铁球如果下面没有物体，则每秒会下落一个单位长度。\n\n球每次落到某个平台上后，游戏者可以选择水平向左或水平向右滚，球滚动速度是每秒 $1$ 个单位长度。由于铁球的质量不太好，每次落下的高度不能超过 $h$。\n\n设计一种策略，使得球尽快落到地面而不被摔碎。\n\n假设地面高度为 $0$，且无限宽。球体积相对平台极小，可以看作一个质点。**请注意，球滚动至平台的一个端点处即可下落，不需要滚动至下一个格子**。例如下图，小球在 $(9,9)$ 处已经开始下落。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b19ucru5.png)", "inputFormat": "第一行有两个整数，分别代表平台个数 $n$ 和最大下落高度 $h$。\n\n第二行有两个整数 $x, y$，表示铁球起始时在坐标为 $(x, y)$ 的位置。\n\n第 $3$ 到第 $(n + 2)$ 行，每行三个整数，第 $(i + 2)$ 行的整数 $h_i, l_i, r_i$ 分别代表第 $i$ 个平台的端点纵坐标 $h_i$ 和左右端点的横坐标 $l_i,r_i$。\n", "outputFormat": "输出一行一个整数表示最小的坠落时间。", "hint": "#### 数据规模与约定 \n\n对于全部的测试点，保证：\n\n- $1 \\leq n \\leq 10^5$。\n- $1 \\leq x, y, h, h_i, l_i, r_i \\leq 10^9$，$l_i \\leq r_i$。\n- 对于所有的 $h_i$，保证互不相同，$l_i$ 与 $r_i$ 也互不相同，且对于任意 $i \\neq j$，保证 $l_i \\neq r_j$ 。\n- 数据保证有解，最终答案不超过 $10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Falling Iron Ball", "background": "", "description": "In a 2D coordinate system, there are $n$ platforms (a platform is defined as a horizontal open line segment whose two endpoints share the same $y$-coordinate; an open line segment means its two endpoints are not part of the segment itself) and one iron ball. If there is no object directly below, the ball falls $1$ unit length per second.\n\nEach time the ball lands on a platform, the player may choose to roll horizontally to the left or to the right. The rolling speed is $1$ unit length per second. Because the iron ball is fragile, the height of each single drop must not exceed $h$.\n\nDesign a strategy to make the ball reach the ground as quickly as possible without breaking.\n\nAssume the ground has height $0$ and is infinitely wide. The ball’s size is negligible compared to the platforms and can be treated as a point mass. Please note: the ball begins to fall as soon as it reaches an endpoint of a platform; it does not need to roll into the next cell. For example, in the figure below, the ball at $(9, 9)$ has already started to fall.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b19ucru5.png)", "inputFormat": "The first line contains two integers representing the number of platforms $n$ and the maximum allowed drop height $h$.\n\nThe second line contains two integers $x, y$, indicating that the iron ball starts at position $(x, y)$.\n\nLines $3$ to $n + 2$: each line contains three integers. On line $i + 2$, the integers $h_i, l_i, r_i$ denote the $y$-coordinate $h_i$ of the $i$-th platform and the $x$-coordinates $l_i, r_i$ of its left and right endpoints, respectively.", "outputFormat": "Output one line with a single integer: the minimum total time to reach the ground.", "hint": "Constraints and Conventions\n\nFor all test points, it is guaranteed that:\n\n- $1 \\leq n \\leq 10^5$.\n- $1 \\leq x, y, h, h_i, l_i, r_i \\leq 10^9$, $l_i \\leq r_i$.\n- All $h_i$ are pairwise distinct; all $l_i$ and $r_i$ are also pairwise distinct; and for any $i \\neq j$, it holds that $l_i \\neq r_j$.\n- The testdata guarantees there is a solution, and the final answer does not exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "铁球落地", "background": "", "description": "在二维坐标系内有 $n$ 个平台（定义平台是一条两端点纵坐标相同的开线段，开线段指线段两个端点不算做线段本身）和一个铁球，铁球如果下面没有物体，则每秒会下落一个单位长度。\n\n球每次落到某个平台上后，游戏者可以选择水平向左或水平向右滚，球滚动速度是每秒 $1$ 个单位长度。由于铁球的质量不太好，每次落下的高度不能超过 $h$。\n\n设计一种策略，使得球尽快落到地面而不被摔碎。\n\n假设地面高度为 $0$，且无限宽。球体积相对平台极小，可以看作一个质点。**请注意，球滚动至平台的一个端点处即可下落，不需要滚动至下一个格子**。例如下图，小球在 $(9,9)$ 处已经开始下落。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b19ucru5.png)", "inputFormat": "第一行有两个整数，分别代表平台个数 $n$ 和最大下落高度 $h$。\n\n第二行有两个整数 $x, y$，表示铁球起始时在坐标为 $(x, y)$ 的位置。\n\n第 $3$ 到第 $(n + 2)$ 行，每行三个整数，第 $(i + 2)$ 行的整数 $h_i, l_i, r_i$ 分别代表第 $i$ 个平台的端点纵坐标 $h_i$ 和左右端点的横坐标 $l_i,r_i$。\n", "outputFormat": "输出一行一个整数表示最小的坠落时间。", "hint": "#### 数据规模与约定 \n\n对于全部的测试点，保证：\n\n- $1 \\leq n \\leq 10^5$。\n- $1 \\leq x, y, h, h_i, l_i, r_i \\leq 10^9$，$l_i \\leq r_i$。\n- 对于所有的 $h_i$，保证互不相同，$l_i$ 与 $r_i$ 也互不相同，且对于任意 $i \\neq j$，保证 $l_i \\neq r_j$ 。\n- 数据保证有解，最终答案不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P1443", "type": "P", "difficulty": 3, "samples": [["3 3 1 1\n", "0 3 2    \n3 -1 1    \n2 1 4    "]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "Special Judge", "广度优先搜索 BFS", "队列"], "title": "马的遍历", "background": "", "description": "有一个 $n \\times m$ 的棋盘，在某个点 $(x, y)$ 上有一个马，要求你计算出马到达棋盘上任意一个点最少要走几步。\n", "inputFormat": "输入只有一行四个整数，分别为 $n, m, x, y$。\n", "outputFormat": "一个 $n \\times m$ 的矩阵，代表马到达某个点最少要走几步（不能到达则输出 $-1$）。\n", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq x \\leq n \\leq 400$，$1 \\leq y \\leq m \\leq 400$。\n\n2022 年 8 月之后，本题去除了对输出保留场宽的要求。为了与之兼容，本题的输出以空格或者合理的场宽分割每个整数都将判作正确。", "locale": "zh-CN", "translations": {"en": {"title": "Knight's Traversal", "background": "", "description": "There is an $n \\times m$ chessboard. A knight is at $(x, y)$. Compute, for every square on the board, the minimum number of moves the knight needs to reach it.", "inputFormat": "A single line containing four integers $n, m, x, y$.", "outputFormat": "An $n \\times m$ matrix where each entry is the minimum number of moves for the knight to reach that square (output $-1$ if it is unreachable).", "hint": "Constraints and Conventions\n\nFor all test points, it is guaranteed that $1 \\leq x \\leq n \\leq 400$, $1 \\leq y \\leq m \\leq 400$.\n\nAfter August 2022, the requirement on fixed field width in the output was removed. For compatibility, outputs where each integer is separated by spaces or by reasonable field widths will both be judged correct.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "马的遍历", "background": "", "description": "有一个 $n \\times m$ 的棋盘，在某个点 $(x, y)$ 上有一个马，要求你计算出马到达棋盘上任意一个点最少要走几步。\n", "inputFormat": "输入只有一行四个整数，分别为 $n, m, x, y$。\n", "outputFormat": "一个 $n \\times m$ 的矩阵，代表马到达某个点最少要走几步（不能到达则输出 $-1$）。\n", "hint": "### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq x \\leq n \\leq 400$，$1 \\leq y \\leq m \\leq 400$。\n\n2022 年 8 月之后，本题去除了对输出保留场宽的要求。为了与之兼容，本题的输出以空格或者合理的场宽分割每个整数都将判作正确。", "locale": "zh-CN"}}}
{"pid": "P1444", "type": "P", "difficulty": 3, "samples": [["4\n0 0\n1 0\n1 1\n0 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "USACO", "枚举"], "title": "[USACO1.3] 虫洞 wormhole", "background": "", "description": "Farmer John 周末进行高能物理实验的结果却适得其反，导致 $n$ 个虫洞出现在农场上，农场是一个二维平面，没有两个虫洞处于同一位置。\n\n根据他的计算，FJ 知道他的虫洞两两配对，形成 $\\dfrac{n}{2}$ 对配对。例如，如果 $A$ 和 $B$ 的虫洞连接成一对，进入虫洞 $A$ 的任何物体将从虫洞 $B$ 出去，方向不变；反之亦然。  \n\n然而这可能发生相当令人不快的后果。例如，假设有两个成对的虫洞 $A(1,1)$ 和 $B(3,1)$，Bessie 从 $(2,1)$ 开始朝着 $x$ 正方向移动。Bessie 将进入虫洞 $B(3,1)$，从 $A(1,1)$ 出去，然后再次进入 $B$，困在一个无限循环中！\n\nFJ 知道他的农场里每个虫洞的确切位置。他知道 Bessie 总是向 $x$ 正方向走进来，虽然他不记得贝茜的当前位置。  \n\n请帮助 FJ 计算有多少种虫洞配对方案，使得存在一个位置，使得 Bessie 从该位置出发，会被困在一个无限循环中。", "inputFormat": "第一行一个正整数 $n$，表示虫洞数量。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个虫洞的坐标。", "outputFormat": "输出一行一个整数表示答案。\n", "hint": "### 数据范围\n对于 $100\\%$ 的数据，$2\\le n \\le 12$，$0 \\le x,y \\le 10^9$。  \n保证 $n$ 为偶数。\n\n### 样例解释\n\n将虫洞编号为 $1 \\sim 4$，然后通过将 $1,2$ 和 $3,4$ 匹配，如果 Bessie 从 $(0,0)$ 到 $(1,0)$ 之间的任意位置出发，她会陷入无限循环中。\n\n相似的，在相同的起始点，如果配对是 $1,3$ 和 $2,4$，贝茜也会陷入循环。（如果贝西从 $3$ 进去，$1$ 出来，她会走向 $2$ ，然后被传送到 $4$，最后又回到 $3$）\n\n仅有 $1,4$ 和 $2,3$ 的配对允许贝茜从任何二维平面上的点向 $x$ 正方向走，而不出现无限循环。\n\n题面翻译摘自 NOCOW", "locale": "zh-CN", "translations": {"en": {"title": "[USACO1.3] Wormhole", "background": "", "description": "Farmer John's high-energy physics experiment over the weekend backfired, causing $n$ wormholes to appear on the farm, which is a two-dimensional plane. No two wormholes are at the same position.\n\nAccording to his calculations, FJ knows the wormholes are paired up, forming $\\dfrac{n}{2}$ pairs. For example, if wormholes $A$ and $B$ form a pair, any object entering wormhole $A$ will exit from wormhole $B$ with its direction unchanged, and vice versa.\n\nHowever, this can lead to a rather unpleasant consequence. For instance, suppose there are two paired wormholes $A(1,1)$ and $B(3,1)$, and Bessie starts at $(2,1)$ moving in the positive $x$ direction. Bessie will enter wormhole $B(3,1)$, exit from $A(1,1)$, then enter $B$ again, getting trapped in an infinite loop!\n\nFJ knows the exact position of every wormhole on his farm. He knows Bessie always moves in the positive $x$ direction, although he does not remember Bessie's current position.\n\nPlease help FJ count how many pairing schemes of wormholes have the property that there exists a position such that if Bessie starts there, she will be trapped in an infinite loop.", "inputFormat": "The first line contains a positive integer $n$, the number of wormholes.\n\nEach of the next $n$ lines contains two integers $x, y$, the coordinates of a wormhole.", "outputFormat": "Output a single integer, the answer.", "hint": "### Constraints\nFor 100% of the testdata, $2 \\le n \\le 12$, $0 \\le x,y \\le 10^9$.  \nIt is guaranteed that $n$ is even.\n\n### Sample Explanation\nNumber the wormholes $1$ to $4$. If we pair $1,2$ and $3,4$, then if Bessie starts anywhere between $(0,0)$ and $(1,0)$, she will fall into an infinite loop.\n\nSimilarly, with the same starting point, if the pairings are $1,3$ and $2,4$, Bessie will also be trapped in a loop. (If Bessie enters through $3$ and exits from $1$, she will move toward $2$, then be teleported to $4$, and finally return to $3$.)\n\nOnly the pairing $1,4$ and $2,3$ allows Bessie to walk in the positive $x$ direction from any point in the plane without entering an infinite loop.\n\nProblem statement translation from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO1.3] 虫洞 wormhole", "background": "", "description": "Farmer John 周末进行高能物理实验的结果却适得其反，导致 $n$ 个虫洞出现在农场上，农场是一个二维平面，没有两个虫洞处于同一位置。\n\n根据他的计算，FJ 知道他的虫洞两两配对，形成 $\\dfrac{n}{2}$ 对配对。例如，如果 $A$ 和 $B$ 的虫洞连接成一对，进入虫洞 $A$ 的任何物体将从虫洞 $B$ 出去，方向不变；反之亦然。  \n\n然而这可能发生相当令人不快的后果。例如，假设有两个成对的虫洞 $A(1,1)$ 和 $B(3,1)$，Bessie 从 $(2,1)$ 开始朝着 $x$ 正方向移动。Bessie 将进入虫洞 $B(3,1)$，从 $A(1,1)$ 出去，然后再次进入 $B$，困在一个无限循环中！\n\nFJ 知道他的农场里每个虫洞的确切位置。他知道 Bessie 总是向 $x$ 正方向走进来，虽然他不记得贝茜的当前位置。  \n\n请帮助 FJ 计算有多少种虫洞配对方案，使得存在一个位置，使得 Bessie 从该位置出发，会被困在一个无限循环中。", "inputFormat": "第一行一个正整数 $n$，表示虫洞数量。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个虫洞的坐标。", "outputFormat": "输出一行一个整数表示答案。\n", "hint": "### 数据范围\n对于 $100\\%$ 的数据，$2\\le n \\le 12$，$0 \\le x,y \\le 10^9$。  \n保证 $n$ 为偶数。\n\n### 样例解释\n\n将虫洞编号为 $1 \\sim 4$，然后通过将 $1,2$ 和 $3,4$ 匹配，如果 Bessie 从 $(0,0)$ 到 $(1,0)$ 之间的任意位置出发，她会陷入无限循环中。\n\n相似的，在相同的起始点，如果配对是 $1,3$ 和 $2,4$，贝茜也会陷入循环。（如果贝西从 $3$ 进去，$1$ 出来，她会走向 $2$ ，然后被传送到 $4$，最后又回到 $3$）\n\n仅有 $1,4$ 和 $2,3$ 的配对允许贝茜从任何二维平面上的点向 $x$ 正方向走，而不出现无限循环。\n\n题面翻译摘自 NOCOW", "locale": "zh-CN"}}}
{"pid": "P1445", "type": "P", "difficulty": 5, "samples": [["2\n", "3"], ["1439\n", "102426508"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "洛谷原创"], "title": "[Violet] 樱花", "background": "又到了一年樱花盛开的时节。Vani 和妹子一起去看樱花的时候，找到了一棵大大的樱花树，上面开满了粉红色的樱花。Vani 粗略估计了一下，一共有足足 $n!$ 片花瓣。\n\n\n\nVani 轻柔地对她说：“你知道吗？这里面的一片花瓣代表着你，我从里面随机摘一片，能和你相遇的概率只有 $1/n!$ 那么小。我该是多么的幸运，才让你今天这么近地站在我面前。相信我，我一定会把这亿万分之一的缘分变为永远。”\n\n粉红的樱花漫天飞舞，妹子瞬间被 Vani 感动了。她轻轻地牵起了他的手，和他相依而坐。这时，她突然看到田野的尽头也长着两棵樱花树，于是慢慢地把头靠在 Vani 的肩上，在他耳边低语：“看到夕阳里的那两棵樱花树了吗？其中一棵树上的一片花瓣是你，另一棵树上的一片花瓣是我，如果有人从这棵摘下一片，从那棵采下一瓣，我们相遇的概率会不会正好是 $1/n!$ 呢？”\n\nVani 的大脑飞速运作了一下，立即算出了答案。正要告诉妹子，她突然又轻轻地说：“以前你总是说我数学不好，但是这种简单的题我还是会算的。你看假如左边那棵树上有 $x$ 片花瓣，右边那个有 $y$ 片花瓣，那么我们相遇的概率不就是 $1/x+1/y$ 么，不过有多少种情况能使它正好可以等于 $1/n!$ 呢？这个你就帮我算一下吧～”\n\n显然，面对天然呆的可爱妹子，Vani 不但不能吐槽她的渣数学，而且还要老老实实地 帮她算出答案哦。\n", "description": "求方程：\n\n$$\\dfrac{1}{x} + \\dfrac{1}{y} = \\dfrac{1}{n!}$$ \n\n的正整数解的组数，答案对 $10^9+7$ 取模。", "inputFormat": "输入只有一行一个整数，表示 $n$。", "outputFormat": "输出一行一个整数表示正整数解的组数模 $10^9+7$ 的值。", "hint": "#### 样例 1 解释\n\n共有三个数对 $(x,y)$ 满足条件，分别是 $(3,6),(4,4)$ 和 $(6,3)$。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 100$ 。\n- 对于 $100\\%$ 的数据，保证 $1 \\le n\\le 10^6$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[Violet] Sakura", "background": "It is the season when cherry blossoms bloom again. When Vani and the girl went to see the cherry blossoms, they found a big cherry tree full of pink blossoms. Vani roughly estimated that there were $n!$ petals.\n\nVani gently said to her: \"Do you know? One petal among them represents you. If I randomly pick one, the probability that I meet you is only $1/n!$. How lucky I must be to have you standing so close in front of me today. Believe me, I will turn this one-in-hundreds-of-millions fate into forever.\"\n\nPink cherry blossoms fluttered all over the sky, and the girl was instantly touched by Vani. She gently held his hand, and they sat close together. At this moment, she suddenly saw two cherry trees at the end of the field, then slowly leaned her head on Vani’s shoulder and whispered in his ear: \"Do you see those two cherry trees in the sunset? One petal on one tree is you, and one petal on the other tree is me. If someone picks one petal from this tree and one from that tree, will the probability that we meet happen to be $1/n!$?\"\n\nVani’s brain ran fast, and he immediately got the answer. Just as he was about to tell the girl, she softly said again: \"You used to say I’m bad at math, but I can still do this simple problem. Look, if the tree on the left has $x$ petals and the one on the right has $y$ petals, then the probability that we meet is just $1/x + 1/y$, but how many cases make it exactly equal to $1/n!$? Please help me figure this out~\"\n\nObviously, facing the adorably airheaded girl, Vani not only cannot complain about her math, but also has to honestly compute the answer for her.", "description": "Find the number of ordered positive integer solutions to the equation:\n$$\\dfrac{1}{x} + \\dfrac{1}{y} = \\dfrac{1}{n!}$$\nOutput the answer modulo $10^9+7$.", "inputFormat": "The input consists of a single integer $n$.", "outputFormat": "Output a single integer: the number of ordered positive integer pairs $(x, y)$ modulo $10^9+7$.", "hint": "#### Sample 1 Explanation\n\nThere are three pairs $(x, y)$ that satisfy the condition: $(3,6)$, $(4,4)$, and $(6,3)$.\n\n#### Constraints\n\n- For $30\\%$ of the testdata, it is guaranteed that $n \\le 100$.\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\le n \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[Violet] 樱花", "background": "又到了一年樱花盛开的时节。Vani 和妹子一起去看樱花的时候，找到了一棵大大的樱花树，上面开满了粉红色的樱花。Vani 粗略估计了一下，一共有足足 $n!$ 片花瓣。\n\n\n\nVani 轻柔地对她说：“你知道吗？这里面的一片花瓣代表着你，我从里面随机摘一片，能和你相遇的概率只有 $1/n!$ 那么小。我该是多么的幸运，才让你今天这么近地站在我面前。相信我，我一定会把这亿万分之一的缘分变为永远。”\n\n粉红的樱花漫天飞舞，妹子瞬间被 Vani 感动了。她轻轻地牵起了他的手，和他相依而坐。这时，她突然看到田野的尽头也长着两棵樱花树，于是慢慢地把头靠在 Vani 的肩上，在他耳边低语：“看到夕阳里的那两棵樱花树了吗？其中一棵树上的一片花瓣是你，另一棵树上的一片花瓣是我，如果有人从这棵摘下一片，从那棵采下一瓣，我们相遇的概率会不会正好是 $1/n!$ 呢？”\n\nVani 的大脑飞速运作了一下，立即算出了答案。正要告诉妹子，她突然又轻轻地说：“以前你总是说我数学不好，但是这种简单的题我还是会算的。你看假如左边那棵树上有 $x$ 片花瓣，右边那个有 $y$ 片花瓣，那么我们相遇的概率不就是 $1/x+1/y$ 么，不过有多少种情况能使它正好可以等于 $1/n!$ 呢？这个你就帮我算一下吧～”\n\n显然，面对天然呆的可爱妹子，Vani 不但不能吐槽她的渣数学，而且还要老老实实地 帮她算出答案哦。\n", "description": "求方程：\n\n$$\\dfrac{1}{x} + \\dfrac{1}{y} = \\dfrac{1}{n!}$$ \n\n的正整数解的组数，答案对 $10^9+7$ 取模。", "inputFormat": "输入只有一行一个整数，表示 $n$。", "outputFormat": "输出一行一个整数表示正整数解的组数模 $10^9+7$ 的值。", "hint": "#### 样例 1 解释\n\n共有三个数对 $(x,y)$ 满足条件，分别是 $(3,6),(4,4)$ 和 $(6,3)$。\n\n#### 数据规模与约定\n\n- 对于 $30\\%$ 的数据，保证 $n\\le 100$ 。\n- 对于 $100\\%$ 的数据，保证 $1 \\le n\\le 10^6$。\n", "locale": "zh-CN"}}}
{"pid": "P1446", "type": "P", "difficulty": 6, "samples": [["1 1 1 2 7\n2 3 1\n3 1 2\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数学", "2008", "各省省选", "湖南", "置换", "逆元"], "title": "[HNOI2008] Cards", "background": null, "description": "小春现在很清闲，面对书桌上的 $n$ 张牌，他决定给每张牌染色，目前小春拥有 $3$ 种颜色：红色，蓝色，绿色。他询问 Sun 有多少种染色方案，Sun 很快就给出了答案。\n\n进一步，小春要求染出 $S_r$ 张红色，$S_b$ 张蓝色，$S_g$ 张绿色。他又询问有多少种方案，Sun 想了一下，又给出了正确答案。最后小春发明了 $m$ 种不同的洗牌法，这里他又问 Sun 有多少种不同的染色方案。两种染色方法相同当且仅当其中一种可以通过任意的洗牌法（即可以使用多种洗牌法，而每种方法可以使用多次）洗成另一种。\n\nSun 发现这个问题有点难度，决定交给你，由于答案可能很大，你只需要求出答案对于 $P$ 取模的结果。 保证 $P$ 为一个质数。", "inputFormat": "第一行输入 $5$ 个整数，依次表示：$S_r,S_b,S_g,m,P$（$m\\le 60,m+1<P<100$）。其中，题面所提及的 $n$ 为 $S_r+S_b+S_g$，即 $n=S_r+S_b+S_g$。\n\n接下来 $m$ 行，每行描述一种洗牌法，每行有 $n$ 个用空格隔开的整数 $X_1X_2...X_n$，保证其为 $1$ 到 $n$ 的一个排列，表示使用这种洗牌法，第 $i$ 位变为原来的 $X_i$ 位的牌。输入数据保证任意多次洗牌都可用这 $m$ 种洗牌法中的一种代替，且对每种洗牌法，都存在一种洗牌法使得能回到原状态。\n\n同时，对于 $100\\%$ 的数据满足 $\\max\\{S_r,S_b,S_g\\}\\le 20$ 。", "outputFormat": "不同的染色方法对 $P$ 取模的结果。", "hint": "有 $2$ 种本质上不同的染色法：`RGB` 和 `RBG`，使用洗牌法 `231` 一次，可得 `GBR` 和 `BGR`，使用洗牌法 `312` 一次，可得 `BRG` 和 `GRB`。", "locale": "zh-CN", "translations": {"en": {"title": "[HNOI2008] Cards", "background": "# Description\n\nXiaochun is quite idle. Facing $n$ cards on the desk, he decides to color each card. He currently has $3$ colors: red, blue, and green. He asks Sun how many colorings there are, and Sun quickly gives the answer.\n\nFurthermore, Xiaochun requires exactly $S_r$ red, $S_b$ blue, and $S_g$ green cards. He asks again how many colorings there are; Sun thinks for a moment and gives the correct answer. Finally, Xiaochun invents $m$ different shuffles. He asks Sun how many essentially different colorings there are now. Two colorings are considered the same if and only if one can be transformed into the other by applying arbitrary shuffles (that is, you may use multiple shuffles, and each shuffle may be used multiple times).\n\nSun finds this problem somewhat challenging and decides to leave it to you. Since the answer may be large, you only need to output the result modulo $P$. It is guaranteed that $P$ is a prime.", "description": "Xiaochun is quite idle. Facing $n$ cards on the desk, he decides to color each card. He currently has $3$ colors: red, blue, and green. He asks Sun how many colorings there are, and Sun quickly gives the answer.\n\nFurthermore, Xiaochun requires exactly $S_r$ red, $S_b$ blue, and $S_g$ green cards. He asks again how many colorings there are; Sun thinks for a moment and gives the correct answer. Finally, Xiaochun invents $m$ different shuffles. He asks Sun how many essentially different colorings there are now. Two colorings are considered the same if and only if one can be transformed into the other by applying arbitrary shuffles (that is, you may use multiple shuffles, and each shuffle may be used multiple times).\n\nSun finds this problem somewhat challenging and decides to leave it to you. Since the answer may be large, you only need to output the result modulo $P$. It is guaranteed that $P$ is a prime.\n\n# Description", "inputFormat": "The first line contains $5$ integers: $S_r, S_b, S_g, m, P$ (with $m \\le 60, m+1 < P < 100$). Here, the $n$ mentioned in the statement is $S_r + S_b + S_g$, i.e., $n = S_r + S_b + S_g$.\n\nThe next $m$ lines each describe a shuffle. Each line has $n$ space-separated integers $X_1, X_2, \\dots, X_n$, guaranteed to be a permutation of $1$ to $n$, meaning that when using this shuffle, position $i$ becomes the card that was originally at position $X_i$. The input guarantees that any number of shuffles can be replaced by one of these $m$ shuffles, and that for every shuffle, there exists a shuffle that brings you back to the original state.\n\nAlso, for $100\\%$ of the testdata, $\\max\\{S_r, S_b, S_g\\} \\le 20$.", "outputFormat": "Output the number of distinct colorings modulo $P$.", "hint": "There are $2$ essentially different colorings: `RGB` and `RBG`. Using shuffle `231` once gives `GBR` and `BGR`; using shuffle `312` once gives `BRG` and `GRB`.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HNOI2008] Cards", "background": null, "description": "小春现在很清闲，面对书桌上的 $n$ 张牌，他决定给每张牌染色，目前小春拥有 $3$ 种颜色：红色，蓝色，绿色。他询问 Sun 有多少种染色方案，Sun 很快就给出了答案。\n\n进一步，小春要求染出 $S_r$ 张红色，$S_b$ 张蓝色，$S_g$ 张绿色。他又询问有多少种方案，Sun 想了一下，又给出了正确答案。最后小春发明了 $m$ 种不同的洗牌法，这里他又问 Sun 有多少种不同的染色方案。两种染色方法相同当且仅当其中一种可以通过任意的洗牌法（即可以使用多种洗牌法，而每种方法可以使用多次）洗成另一种。\n\nSun 发现这个问题有点难度，决定交给你，由于答案可能很大，你只需要求出答案对于 $P$ 取模的结果。 保证 $P$ 为一个质数。", "inputFormat": "第一行输入 $5$ 个整数，依次表示：$S_r,S_b,S_g,m,P$（$m\\le 60,m+1<P<100$）。其中，题面所提及的 $n$ 为 $S_r+S_b+S_g$，即 $n=S_r+S_b+S_g$。\n\n接下来 $m$ 行，每行描述一种洗牌法，每行有 $n$ 个用空格隔开的整数 $X_1X_2...X_n$，保证其为 $1$ 到 $n$ 的一个排列，表示使用这种洗牌法，第 $i$ 位变为原来的 $X_i$ 位的牌。输入数据保证任意多次洗牌都可用这 $m$ 种洗牌法中的一种代替，且对每种洗牌法，都存在一种洗牌法使得能回到原状态。\n\n同时，对于 $100\\%$ 的数据满足 $\\max\\{S_r,S_b,S_g\\}\\le 20$ 。", "outputFormat": "不同的染色方法对 $P$ 取模的结果。", "hint": "有 $2$ 种本质上不同的染色法：`RGB` 和 `RBG`，使用洗牌法 `231` 一次，可得 `GBR` 和 `BGR`，使用洗牌法 `312` 一次，可得 `BRG` 和 `GRB`。", "locale": "zh-CN"}}}
{"pid": "P1447", "type": "P", "difficulty": 5, "samples": [["5 4\n", "36\n"], ["3 4", "20\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2010", "NOI", "最大公约数 gcd", "莫比乌斯反演", "整除分块"], "title": "[NOI2010] 能量采集", "background": "", "description": "栋栋有一块长方形的地，他在地上种了一种能量植物，这种植物可以采集太阳光的能量。在这些植物采集能量后，栋栋再使用一个能量汇集机器把这些植物采集到的能量汇集到一起。\n\n栋栋的植物种得非常整齐，一共有 $n$ 列，每列有 $m$ 棵，植物的横竖间距都一样，因此对于每一棵植物，栋栋可以用一个坐标 $(x, y)$ 来表示，其中 $x$ 的范围是 $1$ 至 $n$，$y$ 的范围是 $1$ 至 $m$，表示是在第 $x$ 列的第 $y$ 棵。\n\n由于能量汇集机器较大，不便移动，栋栋将它放在了一个角上，坐标正好是 $(0, 0)$。\n\n能量汇集机器在汇集的过程中有一定的能量损失。如果一棵植物与能量汇集机器连接而成的线段上有 $k$ 棵植物，则能量的损失为 $2k + 1$。例如，当能量汇集机器收集坐标为 $(2, 4)$ 的植物时，由于连接线段上存在一棵植物 $(1, 2)$，会产生 $3$ 的能量损失。注意，如果一棵植物与能量汇集机器连接的线段上没有植物，则能量损失为 $1$。现在要计算总的能量损失。\n\n下面给出了一个能量采集的例子，其中 $n = 5$，$m = 4$，一共有 $20$ 棵植物，在每棵植物上标明了能量汇集机器收集它的能量时产生的能量损失。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fhzpmm7b.png)\n\n在这个例子中，总共产生了 $36$ 的能量损失。", "inputFormat": "一行两个整数 $n,m$。", "outputFormat": "仅包含一个整数，表示总共产生的能量损失。\n", "hint": "- 对于 $10\\%$ 的数据：$n, m \\leq 10$；\n- 对于 $50\\%$ 的数据：$n, m \\leq 100$；\n- 对于 $80\\%$ 的数据：$n, m \\leq 10^3$；\n- 对于 $90\\%$ 的数据：$n, m \\leq 10^4$；\n- 对于 $100\\%$ 的数据：$1 \\leq n, m \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2010] Energy Collection", "background": "", "description": "Dongdong has a rectangular field where he planted an energy plant that can harvest energy from sunlight. After these plants harvest energy, Dongdong uses an energy aggregation machine to gather all the energy collected by the plants.\n\nDongdong planted the plants in a very neat grid: there are $n$ columns, and each column has $m$ plants, with equal spacing both horizontally and vertically. Therefore, for each plant, Dongdong can denote it by a coordinate $(x, y)$, where $x$ ranges from $1$ to $n$ and $y$ ranges from $1$ to $m$, meaning it is the $y$-th plant in column $x$.\n\nBecause the energy aggregation machine is large and not easy to move, Dongdong placed it at a corner, exactly at the coordinate $(0, 0)$.\n\nThere is some energy loss during the aggregation process. If the line segment connecting a plant and the energy aggregation machine contains $k$ plants, then the energy loss is $2k + 1$. For example, when the machine collects energy from the plant at $(2, 4)$, since there is a plant at $(1, 2)$ on the connecting segment, the loss is $3$. Note that if there are no plants on the line segment connecting the plant and the machine, then the energy loss is $1$. Now compute the total energy loss.\n\nBelow is an example of energy collection with $n = 5$ and $m = 4$, for a total of $20$ plants. Each plant is labeled with the energy loss incurred when the machine collects its energy.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fhzpmm7b.png)\n\nIn this example, the total energy loss is $36$.", "inputFormat": "One line with two integers $n, m$.", "outputFormat": "Output a single integer representing the total energy loss.", "hint": "- For 10% of the testdata: $n, m \\le 10$.\n- For 50% of the testdata: $n, m \\le 100$.\n- For 80% of the testdata: $n, m \\le 10^3$.\n- For 90% of the testdata: $n, m \\le 10^4$.\n- For 100% of the testdata: $1 \\le n, m \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2010] 能量采集", "background": "", "description": "栋栋有一块长方形的地，他在地上种了一种能量植物，这种植物可以采集太阳光的能量。在这些植物采集能量后，栋栋再使用一个能量汇集机器把这些植物采集到的能量汇集到一起。\n\n栋栋的植物种得非常整齐，一共有 $n$ 列，每列有 $m$ 棵，植物的横竖间距都一样，因此对于每一棵植物，栋栋可以用一个坐标 $(x, y)$ 来表示，其中 $x$ 的范围是 $1$ 至 $n$，$y$ 的范围是 $1$ 至 $m$，表示是在第 $x$ 列的第 $y$ 棵。\n\n由于能量汇集机器较大，不便移动，栋栋将它放在了一个角上，坐标正好是 $(0, 0)$。\n\n能量汇集机器在汇集的过程中有一定的能量损失。如果一棵植物与能量汇集机器连接而成的线段上有 $k$ 棵植物，则能量的损失为 $2k + 1$。例如，当能量汇集机器收集坐标为 $(2, 4)$ 的植物时，由于连接线段上存在一棵植物 $(1, 2)$，会产生 $3$ 的能量损失。注意，如果一棵植物与能量汇集机器连接的线段上没有植物，则能量损失为 $1$。现在要计算总的能量损失。\n\n下面给出了一个能量采集的例子，其中 $n = 5$，$m = 4$，一共有 $20$ 棵植物，在每棵植物上标明了能量汇集机器收集它的能量时产生的能量损失。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fhzpmm7b.png)\n\n在这个例子中，总共产生了 $36$ 的能量损失。", "inputFormat": "一行两个整数 $n,m$。", "outputFormat": "仅包含一个整数，表示总共产生的能量损失。\n", "hint": "- 对于 $10\\%$ 的数据：$n, m \\leq 10$；\n- 对于 $50\\%$ 的数据：$n, m \\leq 100$；\n- 对于 $80\\%$ 的数据：$n, m \\leq 10^3$；\n- 对于 $90\\%$ 的数据：$n, m \\leq 10^4$；\n- 对于 $100\\%$ 的数据：$1 \\leq n, m \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P1448", "type": "P", "difficulty": 5, "samples": [["5\n5\n3 2\n4 1\n4 4\n5 4\n5 2", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "动态规划 DP", "1998", "NOI"], "title": "[NOI1998] 围巾裁剪", "background": "NOI1998 Day2 T1", "description": "裁缝有一块非常珍贵的丝绸围巾。可惜的是，围巾的某些部分已经被蛀虫给咬坏了。裁缝当然不愿意就这么把围巾给丢了，于是，他想把围巾给裁成两块小围巾送给他的两个女儿。自然，两块小围巾的面积之和越大越好。\n\n这块围巾是一个正三角形，三条边被均匀地分成了 $N$ 段，即这个正三角形被均匀地分成了 $N^2$ 个单元，每个单元是一个面积为 $1$ 的正三角形。\n\n如图所示为一个 $N=5$ 的围巾，图中带阴影的单元表示被蛀虫咬坏的部分。  \n从上往下看，围巾被分成了 $N$ 行：\n- 第一行有 $1$ 个单元。\n- 第二行有 $3$ 个单元，其中有 $2$ 个是形如 $\\Delta$ 的，有 $1$ 个是形如 $\\nabla$ 的（这两种三角形我们认为是形状相同的）。\n- 第三行有 $5$ 个单元，其中有 $3$ 个是形如 $\\Delta$ 的，有 $2$ 个是形如 $\\nabla$ 的……\n\n用坐标 $(X,Y)$ 给每个单元定位，第一行的单元的坐标为 $(1,1)$；第二行从左到右的三个单元的坐标依次为 $(2,1)$、$(2,2)$、$(2,3)$；……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rwklebsy.png)\n\n围巾的剪裁条件如下：  \n  1. 裁成的两块小围巾形状与原来的大围巾完全相同，都是正三角形；\n  2. 每一块小围巾里都不存在被蛀虫咬坏的部分；\n  3. 裁剪时必须沿着单元的边界裁剪；\n  4. 要求两块小围巾的面积的总和最大。\n\n图中，最优的裁剪方法已经用粗线画了出来，面积和为 $4+9=13$。  \n现在需要你编一个程序来帮助裁缝解决这个问题。", "inputFormat": "- 输入的第一行为一个整数 $N$（$1\\leq N\\leq100$），表示这块围巾总共被分成了 $N^2$ 个单元。\n- 第二行为一个整数 $M$（$1\\leq M\\leq N^2-2$），表示这块围巾共有 $M$ 个单元被蛀虫咬坏了。\n- 接下来的 $M$ 行，每一行有两个正整数 $X$ 和 $Y$，为这 $M$ 个被蛀虫咬坏的单元的坐标。\n\n输入文件中同一行相邻两项之间用一个或多个空格隔开。", "outputFormat": "输出文件仅含一个整数，为你所找到的裁出两块小围巾面积总和的最大值。", "hint": "**【样例解释】**\n\n如「题目描述」中图所示，两块小围巾面积总和的最大值为 $4+9=13$。\n\n**【数据范围】**\n\n- 对于 $50\\%$ 的数据，$1\\leq N\\leq50$；\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq100$，$0\\leq M\\leq N^2-2$，$1\\leq X\\leq N$，$1\\leq Y\\leq 2\\times N-1$。\n\n本题数据为 Windows（CRLF）格式。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI1998] Scarf Cutting", "background": "NOI1998 Day 2 T1.", "description": "A tailor has a very precious silk scarf. Unfortunately, some parts of the scarf have been eaten by moths. The tailor certainly does not want to throw it away, so he plans to cut the scarf into two small scarves for his two daughters. Naturally, the larger the sum of the areas of the two small scarves, the better.\n\nThe scarf is an equilateral triangle, and each of its three sides is evenly divided into $N$ segments, that is, the equilateral triangle is evenly divided into $N^2$ cells, each of which is an equilateral triangle of area $1$.\n\nAs shown in the figure for $N=5$, the shaded cells represent the parts eaten by moths.  \nFrom top to bottom, the scarf is divided into $N$ rows:\n- The first row has $1$ cell.\n- The second row has $3$ cells, among which $2$ are of the shape $\\Delta$ and $1$ is of the shape $\\nabla$ (we consider these two triangles to be the same shape).\n- The third row has $5$ cells, among which $3$ are of the shape $\\Delta$ and $2$ are of the shape $\\nabla$, and so on.\n\nWe use coordinates $(X, Y)$ to locate each cell. The cell in the first row has coordinates $(1, 1)$; for the second row, from left to right, the three cells have coordinates $(2, 1)$, $(2, 2)$, $(2, 3)$; and so on.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rwklebsy.png)\n\nThe cutting conditions for the scarf are as follows:  \n  1. The two small scarves must be exactly the same shape as the original large scarf, i.e., equilateral triangles.\n  2. There must be no moth-eaten parts within either small scarf.\n  3. Cutting must follow the cell boundaries.\n  4. The total area of the two small scarves must be maximized.\n\nIn the figure, the optimal cutting method has been drawn with bold lines, and the sum of areas is $4+9=13$.  \nNow you need to write a program to help the tailor solve this problem.", "inputFormat": "- The first line contains an integer $N$ ($1 \\leq N \\leq 100$), indicating that the scarf is divided into $N^2$ cells in total.\n- The second line contains an integer $M$ ($1 \\leq M \\leq N^2 - 2$), indicating that $M$ cells of the scarf have been eaten by moths.\n- The next $M$ lines each contain two positive integers $X$ and $Y$, which are the coordinates of the $M$ moth-eaten cells.\n\nAdjacent items on the same line in the input file are separated by one or more spaces.", "outputFormat": "Output a single integer, the maximum total area of the two small scarves you can cut out.", "hint": "- Sample explanation: As shown in the figure in the Description, the maximum total area of the two small scarves is $4+9=13$.\n- Constraints:\n  - For $50\\%$ of the testdata, $1 \\leq N \\leq 50$.\n  - For $100\\%$ of the testdata, $1 \\leq N \\leq 100$, $0 \\leq M \\leq N^2 - 2$, $1 \\leq X \\leq N$, $1 \\leq Y \\leq 2 \\times N - 1$.\n\nThe testdata are in Windows (CRLF) format.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI1998] 围巾裁剪", "background": "NOI1998 Day2 T1", "description": "裁缝有一块非常珍贵的丝绸围巾。可惜的是，围巾的某些部分已经被蛀虫给咬坏了。裁缝当然不愿意就这么把围巾给丢了，于是，他想把围巾给裁成两块小围巾送给他的两个女儿。自然，两块小围巾的面积之和越大越好。\n\n这块围巾是一个正三角形，三条边被均匀地分成了 $N$ 段，即这个正三角形被均匀地分成了 $N^2$ 个单元，每个单元是一个面积为 $1$ 的正三角形。\n\n如图所示为一个 $N=5$ 的围巾，图中带阴影的单元表示被蛀虫咬坏的部分。  \n从上往下看，围巾被分成了 $N$ 行：\n- 第一行有 $1$ 个单元。\n- 第二行有 $3$ 个单元，其中有 $2$ 个是形如 $\\Delta$ 的，有 $1$ 个是形如 $\\nabla$ 的（这两种三角形我们认为是形状相同的）。\n- 第三行有 $5$ 个单元，其中有 $3$ 个是形如 $\\Delta$ 的，有 $2$ 个是形如 $\\nabla$ 的……\n\n用坐标 $(X,Y)$ 给每个单元定位，第一行的单元的坐标为 $(1,1)$；第二行从左到右的三个单元的坐标依次为 $(2,1)$、$(2,2)$、$(2,3)$；……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rwklebsy.png)\n\n围巾的剪裁条件如下：  \n  1. 裁成的两块小围巾形状与原来的大围巾完全相同，都是正三角形；\n  2. 每一块小围巾里都不存在被蛀虫咬坏的部分；\n  3. 裁剪时必须沿着单元的边界裁剪；\n  4. 要求两块小围巾的面积的总和最大。\n\n图中，最优的裁剪方法已经用粗线画了出来，面积和为 $4+9=13$。  \n现在需要你编一个程序来帮助裁缝解决这个问题。", "inputFormat": "- 输入的第一行为一个整数 $N$（$1\\leq N\\leq100$），表示这块围巾总共被分成了 $N^2$ 个单元。\n- 第二行为一个整数 $M$（$1\\leq M\\leq N^2-2$），表示这块围巾共有 $M$ 个单元被蛀虫咬坏了。\n- 接下来的 $M$ 行，每一行有两个正整数 $X$ 和 $Y$，为这 $M$ 个被蛀虫咬坏的单元的坐标。\n\n输入文件中同一行相邻两项之间用一个或多个空格隔开。", "outputFormat": "输出文件仅含一个整数，为你所找到的裁出两块小围巾面积总和的最大值。", "hint": "**【样例解释】**\n\n如「题目描述」中图所示，两块小围巾面积总和的最大值为 $4+9=13$。\n\n**【数据范围】**\n\n- 对于 $50\\%$ 的数据，$1\\leq N\\leq50$；\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq100$，$0\\leq M\\leq N^2-2$，$1\\leq X\\leq N$，$1\\leq Y\\leq 2\\times N-1$。\n\n本题数据为 Windows（CRLF）格式。", "locale": "zh-CN"}}}
{"pid": "P1449", "type": "P", "difficulty": 2, "samples": [["3.5.2.-*7.+@", "16"], ["10.28.30./*7.-@", "-7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "线性数据结构", "栈"], "title": "后缀表达式", "background": "", "description": "所谓后缀表达式是指这样的一个表达式：式中不再引用括号，运算符号放在两个运算对象之后，所有计算按运算符号出现的顺序，严格地由左而右新进行（不用考虑运算符的优先级）。\n\n本题中运算符仅包含 $\\texttt{+-*/}$。保证对于 $\\texttt{/}$ 运算除数不为 0。特别地，其中 $\\texttt{/}$ 运算的结果需要**向 0 取整**（即与 C++ `/` 运算的规则一致）。\n\n如：$\\texttt{3*(5-2)+7}$ 对应的后缀表达式为：$\\texttt{3.5.2.-*7.+@}$。在该式中，`@` 为表达式的结束符号。`.` 为操作数的结束符号。\n", "inputFormat": "输入一行一个字符串 $s$，表示后缀表达式。\n", "outputFormat": "输出一个整数，表示表达式的值。", "hint": "数据保证，$1 \\leq |s| \\leq 50$，答案和计算过程中的每一个值的绝对值不超过 $10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Postfix Expression", "background": "", "description": "A postfix expression is an expression in which parentheses are not used, operators are placed after their two operands, and all computations are performed strictly from left to right in the order in which the operators appear (operator precedence does not need to be considered).\n\nIn this problem, the operators include only $\\texttt{+-*/}$. It is guaranteed that for the $\\texttt{/}$ operation the divisor is not 0. In particular, the result of the $\\texttt{/}$ operation should be truncated toward 0 (i.e., the same rule as C++ `/`).\n\nFor example: $\\texttt{3*(5-2)+7}$ corresponds to the postfix expression $\\texttt{3.5.2.-*7.+@}$. In this expression, `@` is the end marker for the expression. `.` is the end marker for an operand.", "inputFormat": "Input a single line containing a string $s$, denoting the postfix expression.", "outputFormat": "Output a single integer, the value of the expression.", "hint": "It is guaranteed that $1 \\leq |s| \\leq 50$, and the absolute value of the answer and of every intermediate value during computation does not exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "后缀表达式", "background": "", "description": "所谓后缀表达式是指这样的一个表达式：式中不再引用括号，运算符号放在两个运算对象之后，所有计算按运算符号出现的顺序，严格地由左而右新进行（不用考虑运算符的优先级）。\n\n本题中运算符仅包含 $\\texttt{+-*/}$。保证对于 $\\texttt{/}$ 运算除数不为 0。特别地，其中 $\\texttt{/}$ 运算的结果需要**向 0 取整**（即与 C++ `/` 运算的规则一致）。\n\n如：$\\texttt{3*(5-2)+7}$ 对应的后缀表达式为：$\\texttt{3.5.2.-*7.+@}$。在该式中，`@` 为表达式的结束符号。`.` 为操作数的结束符号。\n", "inputFormat": "输入一行一个字符串 $s$，表示后缀表达式。\n", "outputFormat": "输出一个整数，表示表达式的值。", "hint": "数据保证，$1 \\leq |s| \\leq 50$，答案和计算过程中的每一个值的绝对值不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P1450", "type": "P", "difficulty": 5, "samples": [["1 2 5 10 2\n3 2 3 1 10\n1000 2 2 2 900\n", "4\n27\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2008", "河南", "各省省选", "单调队列", "背包 DP", "容斥原理"], "title": "[HAOI2008] 硬币购物", "background": "", "description": "共有 $4$ 种硬币。面值分别为 $c_1,c_2,c_3,c_4$。\n\n某人去商店买东西，去了 $n$ 次，对于每次购买，他带了 $d_i$ 枚 $i$ 种硬币，想购买 $s$ 的价值的东西。请问每次有多少种付款方法。", "inputFormat": "输入的第一行是五个整数，分别代表 $c_1,c_2,c_3,c_4, n$。\n\n接下来 $n$ 行，每行有五个整数，描述一次购买，分别代表 $d_1, d_2, d_3, d_4,s$。", "outputFormat": "对于每次购买，输出一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n* 对于 $100\\%$ 的数据，保证 $1 \\leq c_i, d_i, s \\leq 10^5$，$1 \\leq n \\leq 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "[HAOI2008] Coin Shopping", "background": "", "description": "There are $4$ types of coins with face values $c_1, c_2, c_3, c_4$.\n\nA person goes shopping $n$ times. For each purchase, they carry $d_i$ coins of type $i$ and want to buy items worth an amount of $s$. For each purchase, how many payment methods are there?", "inputFormat": "The first line contains five integers, representing $c_1, c_2, c_3, c_4, n$.\n\nThe next $n$ lines each contain five integers describing one purchase, representing $d_1, d_2, d_3, d_4, s$.", "outputFormat": "For each purchase, output one line with a single integer representing the answer.", "hint": "- Constraints  \n  For $100\\%$ of the testdata, $1 \\leq c_i, d_i, s \\leq 10^5$, $1 \\leq n \\leq 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[HAOI2008] 硬币购物", "background": "", "description": "共有 $4$ 种硬币。面值分别为 $c_1,c_2,c_3,c_4$。\n\n某人去商店买东西，去了 $n$ 次，对于每次购买，他带了 $d_i$ 枚 $i$ 种硬币，想购买 $s$ 的价值的东西。请问每次有多少种付款方法。", "inputFormat": "输入的第一行是五个整数，分别代表 $c_1,c_2,c_3,c_4, n$。\n\n接下来 $n$ 行，每行有五个整数，描述一次购买，分别代表 $d_1, d_2, d_3, d_4,s$。", "outputFormat": "对于每次购买，输出一行一个整数代表答案。", "hint": "#### 数据规模与约定\n\n* 对于 $100\\%$ 的数据，保证 $1 \\leq c_i, d_i, s \\leq 10^5$，$1 \\leq n \\leq 1000$。", "locale": "zh-CN"}}}
{"pid": "P1451", "type": "P", "difficulty": 2, "samples": [["4 10\n0234500067\n1034560500\n2045600671\n0000000089\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "求细胞数量", "background": "", "description": "一矩形阵列由数字 $0$ 到 $9$ 组成，数字 $1$ 到 $9$ 代表细胞，细胞的定义为沿细胞数字上下左右若还是细胞数字则为同一细胞，求给定矩形阵列的细胞个数。", "inputFormat": "第一行两个整数代表矩阵大小 $n$ 和 $m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的只含字符 `0` 到 `9` 的字符串，代表这个 $n \\times m$ 的矩阵。\n", "outputFormat": "一行一个整数代表细胞个数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\le n,m \\le 100$。", "locale": "zh-CN", "translations": {"en": {"title": "Count the Number of Cells", "background": "", "description": "A rectangular array consists of digits $0$ to $9$. Digits $1$ to $9$ denote cells. Two positions belong to the same cell if, moving up, down, left, or right through positions with cell digits, they are connected. Given the array, count the number of cells.", "inputFormat": "The first line contains two integers $n$ and $m$.\n\nThe next $n$ lines each contain a string of length $m$ consisting only of characters `0` to `9`, representing the $n \\times m$ matrix.", "outputFormat": "Output a single integer, the number of cells.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, $1 \\le n, m \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "求细胞数量", "background": "", "description": "一矩形阵列由数字 $0$ 到 $9$ 组成，数字 $1$ 到 $9$ 代表细胞，细胞的定义为沿细胞数字上下左右若还是细胞数字则为同一细胞，求给定矩形阵列的细胞个数。", "inputFormat": "第一行两个整数代表矩阵大小 $n$ 和 $m$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的只含字符 `0` 到 `9` 的字符串，代表这个 $n \\times m$ 的矩阵。\n", "outputFormat": "一行一个整数代表细胞个数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\le n,m \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P1452", "type": "P", "difficulty": 6, "samples": [["4\n0 0\n0 1\n1 1\n1 0\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "2003", "USACO", "枚举", "凸包", "旋转卡壳", "模板题"], "title": "【模板】旋转卡壳 / [USACO03FALL] Beauty Contest G", "background": null, "description": "给定平面上 $n$ 个点，求凸包直径。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个点的坐标。保证所有点的坐标两两不同。", "outputFormat": "输出一行一个整数，表示答案的平方。", "hint": "### 数据范围  \n对于 $100\\%$ 的数据，$2\\le n\\le 5\\times 10^4$，$|x|,|y|\\le 10^4$。\n\n---\n\n$\\text{upd 2022.7.22}$：新增加四组 Hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "[Template] Rotating Calipers / [USACO03FALL] Beauty Contest G", "background": "", "description": "Given $n$ points on the plane, find the diameter of the convex hull.", "inputFormat": "The first line contains a positive integer $n$.\nThe next $n$ lines each contain two integers $x, y$, representing the coordinates of a point. All point coordinates are pairwise distinct.", "outputFormat": "Output one line with a single integer, the square of the answer.", "hint": "### Constraints\nFor $100\\%$ of the testdata, $2 \\le n \\le 5 \\times 10^4$, $|x|, |y| \\le 10^4$.\n\n---\n\n$\\text{upd 2022.7.22}$: Four new Hack testdata have been added.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【模板】旋转卡壳 / [USACO03FALL] Beauty Contest G", "background": null, "description": "给定平面上 $n$ 个点，求凸包直径。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来 $n$ 行，每行两个整数 $x,y$，表示一个点的坐标。保证所有点的坐标两两不同。", "outputFormat": "输出一行一个整数，表示答案的平方。", "hint": "### 数据范围  \n对于 $100\\%$ 的数据，$2\\le n\\le 5\\times 10^4$，$|x|,|y|\\le 10^4$。\n\n---\n\n$\\text{upd 2022.7.22}$：新增加四组 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P1453", "type": "P", "difficulty": 5, "samples": [["4\n1 2 1 5\n0 1\n0 2\n1 2\n1 3\n2\n", "12.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "图论", "树形 DP", "基环树"], "title": "城市环路", "background": "", "description": "一座城市，往往会被人们划分为几个区域，例如住宅区、商业区、工业区等等。\n\nB 市就被分为了以下的两个区域——城市中心和城市郊区。在这两个区域的中间是一条围绕 B 市的环路，环路之内便是 B 市中心。\n\n\n整个城市可以看做一个 $n$ 个点，$n$ 条边的单圈图（保证图连通），唯一的环便是绕城的环路。保证环上任意两点有且只有 $2$ 条简单路径互通。图中的其它部分皆隶属城市郊区。\n\n现在，有一位名叫 Jim 的同学想在 B 市开店，但是任意一条边的 $2$ 个点不能同时开店，每个点都有一定的人流量，第 $i$ 个点的人流量是 $p_i$，在该点开店的利润就等于 $p_i×k$，其中 $k$ 是一个常数。\n\nJim 想尽量多的赚取利润，请问他应该在哪些地方开店？\n", "inputFormat": "第一行一个整数 $n$，代表城市中点的个数。城市中的 $n$ 个点由 $0 \\sim n-1$ 编号。\n\n第二行有 $n$ 个整数，第 $(i + 1)$ 个整数表示第 $i$ 个点的人流量 $p_i$。\n\n接下来 $n$ 行，每行有两个整数 $u, v$，代表存在一条连接 $u$ 和 $v$ 的道路。\n\n最后一行有一个实数，代表常数 $k$。\n", "outputFormat": "输出一行一个实数代表答案，结果保留一位小数。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\leq 100$。\n- 另有 $20\\%$ 的数据，保证环上的点不超过 $2000$ 个。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq p_i \\leq 10^4$，$0 \\leq u, v < n$，$0 \\leq k \\leq 10^4$，$k$ 的小数点后最多有 $6$ 位数字。", "locale": "zh-CN", "translations": {"en": {"title": "City Ring Road", "background": "", "description": "A city is often divided into several zones, such as residential, commercial, and industrial.\n\nCity B is divided into two zones—the city center and the suburbs. Between these two zones lies a ring road encircling City B; the area inside the ring is the city center.\n\nThe whole city can be modeled as a connected unicyclic graph with $n$ vertices and $n$ edges. The unique cycle is the ring road. For any two vertices on the cycle, there are exactly $2$ simple paths between them. All other parts of the graph belong to the suburbs.\n\nJim wants to open shops in City B. However, the two endpoints of any edge cannot both have shops. Each vertex $i$ has a foot traffic $p_i$, and opening a shop at that vertex yields a profit of $p_i \\times k$, where $k$ is a constant.\n\nFind the maximum total profit Jim can earn.", "inputFormat": "- The first line contains an integer $n$, the number of vertices in the city. The $n$ vertices are numbered $0 \\sim n-1$.\n- The second line contains $n$ integers. The $(i + 1)$-th integer is $p_i$, the foot traffic of vertex $i$.\n- The next $n$ lines each contain two integers $u, v$, indicating that there is a road between $u$ and $v$.\n- The last line contains a real number, the constant $k$.", "outputFormat": "Output one line containing a real number representing the answer, rounded to one decimal place.", "hint": "#### Constraints\n\n- For $20\\%$ of the testdata, $n \\leq 100$.\n- For another $20\\%$ of the testdata, the number of vertices on the cycle does not exceed $2000$.\n- For $100\\%$ of the testdata, $1 \\leq n \\leq 10^5$, $1 \\leq p_i \\leq 10^4$, $0 \\leq u, v < n$, $0 \\leq k \\leq 10^4$, and $k$ has at most $6$ digits after the decimal point.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "城市环路", "background": "", "description": "一座城市，往往会被人们划分为几个区域，例如住宅区、商业区、工业区等等。\n\nB 市就被分为了以下的两个区域——城市中心和城市郊区。在这两个区域的中间是一条围绕 B 市的环路，环路之内便是 B 市中心。\n\n\n整个城市可以看做一个 $n$ 个点，$n$ 条边的单圈图（保证图连通），唯一的环便是绕城的环路。保证环上任意两点有且只有 $2$ 条简单路径互通。图中的其它部分皆隶属城市郊区。\n\n现在，有一位名叫 Jim 的同学想在 B 市开店，但是任意一条边的 $2$ 个点不能同时开店，每个点都有一定的人流量，第 $i$ 个点的人流量是 $p_i$，在该点开店的利润就等于 $p_i×k$，其中 $k$ 是一个常数。\n\nJim 想尽量多的赚取利润，请问他应该在哪些地方开店？\n", "inputFormat": "第一行一个整数 $n$，代表城市中点的个数。城市中的 $n$ 个点由 $0 \\sim n-1$ 编号。\n\n第二行有 $n$ 个整数，第 $(i + 1)$ 个整数表示第 $i$ 个点的人流量 $p_i$。\n\n接下来 $n$ 行，每行有两个整数 $u, v$，代表存在一条连接 $u$ 和 $v$ 的道路。\n\n最后一行有一个实数，代表常数 $k$。\n", "outputFormat": "输出一行一个实数代表答案，结果保留一位小数。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\leq 100$。\n- 另有 $20\\%$ 的数据，保证环上的点不超过 $2000$ 个。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq p_i \\leq 10^4$，$0 \\leq u, v < n$，$0 \\leq k \\leq 10^4$，$k$ 的小数点后最多有 $6$ 位数字。", "locale": "zh-CN"}}}
{"pid": "P1454", "type": "P", "difficulty": 2, "samples": [["19 48\n------------------------------------------------\n---####-----#-----#----------------------####---\n--######----#-----#---------------------######--\n-########--#-#---#-#####--#-##-##---#--########-\n-###--###--#-#---#-#----#-##-##--#--#--###--###-\n-###--###--#--#-#--######-#--#---#-#---###--###-\n-########--#--#-#--#------#--#----##---########-\n--######---#---#---######-#--#-----#----######--\n---####----------------------------#-----####---\n----------------------------------#-------------\n------------------------------------------------\n---###--#--------#------#-----------------------\n--#---#-#---------------#-----------------------\n-#------#-##--#-##--##-###-#-##-###--###-#--##--\n-#------##--#-##-#-#----#--##--#---##---##-#----\n-#------#---#-#--#--#---#--#---#---##----#--#---\n--#---#-#---#-#--#---#--#--#---#---##---##---#--\n---###--#---#-#--#-##---#--#---#---#-###-#-##---\n------------------------------------------------", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索"], "title": "圣诞夜的极光", "background": "圣诞夜系列~~\n", "description": "圣诞老人回到了北极圣诞区，已经快到 12 点了。也就是说极光表演要开始了。这里的极光不是极地特有的自然极光景象。而是圣诞老人主持的人造极光。\n\n轰隆隆 …… 烟花响起（来自中国的浏阳花炮之乡）。接下来就是极光表演了。\n\n人造极光其实就是空中的一幅幅 $n\\times m$ 的点阵图像。只是因为特别明亮而吸引了很多很多小精灵的目光，也成为了圣诞夜最美丽的一刻。\n\n然而在每幅 $n \\times m$ 的点阵图像中，每一个点只有发光和不发光两种状态。对于所有的发光的点，在空中就形成了美丽的图画。而这个图画是以若干个（$s$ 个）图案组成的。对于图案，圣诞老人有着严格的定义：对于两个发光的点，如果他们的曼哈顿距离（对于 $A(x_1, y_1)$ 和 $B(x_2, y_2)$ ，$A$ 和 $B$ 之间的曼哈顿距离为 $|x_1-x_2|+|y_1-y_2|$ ）小于等于 $2$。那么这两个点就属于一个图案 …… 小精灵们一边欣赏着极光，一边数着每一幅极光图像中的图案数。伴着歌声和舞蹈，度过了美丽的圣诞之夜。^_^", "inputFormat": "第一行，两个数 $n$ 和 $m$ 。\n\n接下来一共 $n$ 行，每行 $m$ 个字符。对于第 $i$ 行第 $j$ 个字符，如果其为 `-`\n ，那么表示该点不发光，如果其为 `#` ，那么表示该点发光。不可能出现其他的字符。", "outputFormat": "第一行，一个数 $s$。\n", "hint": "$1 \\le n,m \\le 100$。\n\nDFS~~", "locale": "zh-CN", "translations": {"en": {"title": "Aurora on Christmas Night", "background": "Christmas Night series.", "description": "Santa Claus has returned to the Arctic Christmas Zone; it is almost 12 o'clock, which means the aurora show is about to begin. Here the aurora is not the natural polar lights but a man-made display directed by Santa.\n\nBoom... fireworks go off (from Liuyang, the hometown of fireworks in China). Then comes the aurora show.\n\nThe man-made aurora is actually a series of $n \\times m$ dot-matrix images in the sky. Each point has only two states: lit or unlit. The lit points together form beautiful pictures. Each picture consists of several (exactly $s$) “patterns”. Santa defines a “pattern” strictly as follows: view lit points as vertices of a graph where two lit points are adjacent if their Manhattan distance is at most $2$. For $A(x_1, y_1)$ and $B(x_2, y_2)$, the Manhattan distance between $A$ and $B$ is $|x_1 - x_2| + |y_1 - y_2|$. A “pattern” is a connected component of this graph. The elves watch the aurora and count the number of patterns in each image, singing and dancing through a beautiful Christmas night. ^_^", "inputFormat": "The first line contains two integers $n$ and $m$.\n\nThe next $n$ lines each contain $m$ characters. In the $i$-th line, the $j$-th character is `-` if the point is unlit, or `#` if the point is lit. No other characters appear.", "outputFormat": "Output one integer $s$ on a single line.", "hint": "Constraints: $1 \\le n, m \\le 100$.\n\nHint: DFS.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "圣诞夜的极光", "background": "圣诞夜系列~~\n", "description": "圣诞老人回到了北极圣诞区，已经快到 12 点了。也就是说极光表演要开始了。这里的极光不是极地特有的自然极光景象。而是圣诞老人主持的人造极光。\n\n轰隆隆 …… 烟花响起（来自中国的浏阳花炮之乡）。接下来就是极光表演了。\n\n人造极光其实就是空中的一幅幅 $n\\times m$ 的点阵图像。只是因为特别明亮而吸引了很多很多小精灵的目光，也成为了圣诞夜最美丽的一刻。\n\n然而在每幅 $n \\times m$ 的点阵图像中，每一个点只有发光和不发光两种状态。对于所有的发光的点，在空中就形成了美丽的图画。而这个图画是以若干个（$s$ 个）图案组成的。对于图案，圣诞老人有着严格的定义：对于两个发光的点，如果他们的曼哈顿距离（对于 $A(x_1, y_1)$ 和 $B(x_2, y_2)$ ，$A$ 和 $B$ 之间的曼哈顿距离为 $|x_1-x_2|+|y_1-y_2|$ ）小于等于 $2$。那么这两个点就属于一个图案 …… 小精灵们一边欣赏着极光，一边数着每一幅极光图像中的图案数。伴着歌声和舞蹈，度过了美丽的圣诞之夜。^_^", "inputFormat": "第一行，两个数 $n$ 和 $m$ 。\n\n接下来一共 $n$ 行，每行 $m$ 个字符。对于第 $i$ 行第 $j$ 个字符，如果其为 `-`\n ，那么表示该点不发光，如果其为 `#` ，那么表示该点发光。不可能出现其他的字符。", "outputFormat": "第一行，一个数 $s$。\n", "hint": "$1 \\le n,m \\le 100$。\n\nDFS~~", "locale": "zh-CN"}}}
{"pid": "P1455", "type": "P", "difficulty": 3, "samples": [["5 3 10\n3 10\n3 10\n3 10\n5 100\n10 1\n1 3\n3 2\n4 2\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["并查集", "背包 DP", "强连通分量"], "title": "搭配购买", "background": "", "description": "明天就是母亲节了，电脑组的小朋友们在忙碌的课业之余挖空心思想着该送什么礼物来表达自己的心意呢？听说在某个网站上有卖云朵的，小朋友们决定一同前往去看看这种神奇的商品，这个店里有 $n$ 朵云，云朵已经被老板编号为 $1,2,3,...,n$，并且每朵云都有一个价值，但是商店的老板是个很奇怪的人，他会告诉你一些云朵要搭配起来买才卖，也就是说买一朵云则与这朵云有搭配的云都要买，电脑组的你觉得这礼物实在是太新奇了，但是你的钱是有限的，所以你肯定是想用现有的钱买到尽量多价值的云。", "inputFormat": "第一行输入三个整数，$n,m,w$，表示有 $n$ 朵云，$m$ 个搭配和你现有的钱的数目。\n\n第二行至 $n+1$ 行，每行有两个整数， $c_i,d_i$，表示第 $i$ 朵云的价钱和价值。\n\n第 $n+2$ 至 $n+1+m$ 行 ，每行有两个整数 $u_i,v_i$。表示买第 $u_i$ 朵云就必须买第 $v_i$ 朵云,同理，如果买第 $v_i$ 朵就必须买第 $u_i$ 朵。", "outputFormat": "一行，表示可以获得的最大价值。", "hint": "- 对于 $30\\%$ 的数据，满足 $1 \\le n \\le 100$；\n- 对于 $50\\%$ 的数据，满足 $1 \\le n, w,c_i,d_i \\le 10^3$，$1 \\le m \\le 100$；\n- 对于 $100\\%$ 的数据，满足 $1 \\le n, w,c_i,d_i \\le 10^4$，$0 \\le m \\le 5 \\times 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "Bundled Purchase", "background": "", "description": "Mother's Day is tomorrow, and the kids in the computer club are racking their brains about what gift to give to express their feelings. They heard that a certain website sells clouds, so they decided to check out this magical product together. The store has $n$ clouds, labeled $1,2,3,...,n$, and each cloud has a value. However, the shop owner is a peculiar person: he will tell you that some clouds must be bought together as a bundle. In other words, if you buy one cloud, then all clouds paired with it must also be bought. You find this gift idea very novel, but your money is limited, so you want to use your budget to buy clouds with the maximum total value.", "inputFormat": "- The first line contains three integers $n,m,w$, meaning there are $n$ clouds, $m$ bundling relations, and your current amount of money $w$.\n- From the second line to line $n+1$, each line contains two integers $c_i,d_i$, representing the price and value of the $i$-th cloud.\n- From line $n+2$ to line $n+1+m$, each line contains two integers $u_i,v_i$, meaning if you buy cloud $u_i$, you must also buy cloud $v_i$. Similarly, if you buy cloud $v_i$, you must also buy cloud $u_i$.", "outputFormat": "Output one line: the maximum total value you can obtain.", "hint": "Constraints:\n- For $30\\%$ of the testdata, $1 \\le n \\le 100$.\n- For $50\\%$ of the testdata, $1 \\le n, w \\le 10^3$, $1 \\le m \\le 100$.\n- For $100\\%$ of the testdata, $1 \\le n, w \\le 10^4$, $0 \\le m \\le 5 \\times 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "搭配购买", "background": "", "description": "明天就是母亲节了，电脑组的小朋友们在忙碌的课业之余挖空心思想着该送什么礼物来表达自己的心意呢？听说在某个网站上有卖云朵的，小朋友们决定一同前往去看看这种神奇的商品，这个店里有 $n$ 朵云，云朵已经被老板编号为 $1,2,3,...,n$，并且每朵云都有一个价值，但是商店的老板是个很奇怪的人，他会告诉你一些云朵要搭配起来买才卖，也就是说买一朵云则与这朵云有搭配的云都要买，电脑组的你觉得这礼物实在是太新奇了，但是你的钱是有限的，所以你肯定是想用现有的钱买到尽量多价值的云。", "inputFormat": "第一行输入三个整数，$n,m,w$，表示有 $n$ 朵云，$m$ 个搭配和你现有的钱的数目。\n\n第二行至 $n+1$ 行，每行有两个整数， $c_i,d_i$，表示第 $i$ 朵云的价钱和价值。\n\n第 $n+2$ 至 $n+1+m$ 行 ，每行有两个整数 $u_i,v_i$。表示买第 $u_i$ 朵云就必须买第 $v_i$ 朵云,同理，如果买第 $v_i$ 朵就必须买第 $u_i$ 朵。", "outputFormat": "一行，表示可以获得的最大价值。", "hint": "- 对于 $30\\%$ 的数据，满足 $1 \\le n \\le 100$；\n- 对于 $50\\%$ 的数据，满足 $1 \\le n, w,c_i,d_i \\le 10^3$，$1 \\le m \\le 100$；\n- 对于 $100\\%$ 的数据，满足 $1 \\le n, w,c_i,d_i \\le 10^4$，$0 \\le m \\le 5 \\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P1456", "type": "P", "difficulty": 5, "samples": [["5\n20\n16\n10\n10\n4\n5\n2 3\n3 4\n3 5\n4 5\n1 5\n", "8\n5\n5\n-1\n10\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["可并堆", "启发式合并"], "title": "Monkey King", "background": "", "description": "Once in a forest, there lived N aggressive monkeys. At the beginning, they each does things in its own way and none of them knows each other. But monkeys can't avoid quarrelling, and it only happens between two monkeys who does not know each other. And when it happens, both the two monkeys will invite the strongest friend of them, and duel. Of course, after the duel, the two monkeys and all of their friends will know each other, and the quarrel above will no longer happen among these monkeys even if they have ever conflicted.\n\n\nAssume that every money has a strongness value, which will be reduced to only half of the original after a duel(that is, 10 will be reduced to 5 and 5 will be reduced to 2).\n\n\nAnd we also assume that every monkey knows himself. That is, when he is the strongest one in all of his friends, he himself will go to duel.", "inputFormat": "There are several test cases, and each case consists of two parts.\n\n\nFirst part: The first line contains an integer N(N<=100,000), which indicates the number of monkeys. And then N lines follows. There is one number on each line, indicating the strongness value of ith monkey(<=32768).\n\n\nSecond part: The first line contains an integer M(M<=100,000), which indicates there are M conflicts happened. And then M lines follows, each line of which contains two integers x and y, indicating that there is a conflict between the Xth monkey and Yth.", "outputFormat": "For each of the conflict, output -1 if the two monkeys know each other, otherwise output the strength value of the strongest monkey among all of its friends after the duel.", "hint": "题目可能有多组数据\n\n题目来源 ZOJ 3rd Anniversary Contest", "locale": "en", "translations": {"en": {"title": "Monkey King", "background": "", "description": "Once in a forest, there lived N aggressive monkeys. At the beginning, they each does things in its own way and none of them knows each other. But monkeys can't avoid quarrelling, and it only happens between two monkeys who does not know each other. And when it happens, both the two monkeys will invite the strongest friend of them, and duel. Of course, after the duel, the two monkeys and all of their friends will know each other, and the quarrel above will no longer happen among these monkeys even if they have ever conflicted.\n\n\nAssume that every money has a strongness value, which will be reduced to only half of the original after a duel(that is, 10 will be reduced to 5 and 5 will be reduced to 2).\n\n\nAnd we also assume that every monkey knows himself. That is, when he is the strongest one in all of his friends, he himself will go to duel.", "inputFormat": "There are several test cases, and each case consists of two parts.\n\n\nFirst part: The first line contains an integer N(N<=100,000), which indicates the number of monkeys. And then N lines follows. There is one number on each line, indicating the strongness value of ith monkey(<=32768).\n\n\nSecond part: The first line contains an integer M(M<=100,000), which indicates there are M conflicts happened. And then M lines follows, each line of which contains two integers x and y, indicating that there is a conflict between the Xth monkey and Yth.", "outputFormat": "For each of the conflict, output -1 if the two monkeys know each other, otherwise output the strength value of the strongest monkey among all of its friends after the duel.", "hint": "题目可能有多组数据\n\n题目来源 ZOJ 3rd Anniversary Contest", "locale": "en"}, "zh-CN": {"title": "Monkey King", "background": "", "description": "曾经在一个森林中居住着 $N$ 只好斗的猴子。在最初他们我行我素，互不认识。但是猴子们不能避免争吵，且两只猴子只会在不认识对方时发生争吵，当争吵发生时，双方会邀请它们各自最强壮的朋友并发起决斗（决斗的为各自最强壮的朋友）。当然，在决斗之后两只猴子和他们各自的伙伴都认识对方了（成为朋友），虽然他们曾经有过冲突，但是他们之间绝不会再发生争吵了。\n\n假设每只猴子有一个强壮值，强壮值将在一场决斗后减少为原先的一半（例如  $10$ 会减少到  $5$，而  $5$ 会减少到  $2$，即向下取整）。\n\n我们也假设每只猴子都认识它自己（是自己的朋友）。即当他是他朋友中最强壮的，他自己就会去决斗。", "inputFormat": "有多组数据，每一组数据有两部分。\n\n第一部分：第一行包含一个整数 $N$ 表示猴子的数量。后为 $N$ 行，每行一个数字为第 $i$ 只猴子的强壮值  $s_{i}$。\n\n第二部分：第一行包含一个整数 $M$ 表示发生了 $M$ 次冲突。后为 $M$ 行，每行两个整数 $x$ 和 $y$，表示第 $x$ 只猴子和第 $y$ 只猴子之间发生了冲突。", "outputFormat": "对于每次冲突，如果两只猴子认识对方，输出 `-1`，否则输出决斗后他们朋友中最强壮的猴子的强壮值。", "hint": "$N,M\\leq 100000$，$s_{i}\\leq 32768$", "locale": "zh-CN"}}}
{"pid": "P1457", "type": "P", "difficulty": 3, "samples": [["7 4\n11 6 11 6 3 10 6\n7 9 6 13 5 15 5\n1 10 12 7 13 7 5\n13 11 10 8 10 12 13", "5\n9\n16\n4 1 E"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO", "枚举", "连通块"], "title": "[USACO2.1] 城堡 The Castle", "background": "我们憨厚的 USACO 主人公农夫约翰（Farmer John）以无法想象的运气,在他生日那天收到了一份特别的礼物：一张“幸运爱尔兰”（一种彩票）。结果这张彩票让他获得了这次比赛唯一的奖品——坐落于爱尔兰郊外的一座梦幻般的城堡！", "description": "喜欢吹嘘的农夫约翰立刻回到有着吹嘘传统的威斯康辛老家开始吹嘘了, 农夫约翰想要告诉他的奶牛们关于他城堡的一切。他需要做一些吹嘘前的准备工作：比如说知道城堡有多少个房间，每个房间有多大。  \n\n另外，农夫约翰想要把一面单独的墙（指两个单位间的墙）拆掉以形成一个更大的房间。 你的工作就是帮农夫约翰做以上的准备，算出房间数与房间的大小。\n\n城堡的平面图被划分成 $n \\times m$ 个正方形的单位，一个这样的单位可以有 $0 \\sim 4 $ 面墙环绕。城堡周围一定有外墙环绕以遮风挡雨。（就是说平面图的四周一定是墙。）\n\n请仔细研究下面这个有注解的城堡平面图：\n\n```plain\n     1   2   3   4   5   6   7\n   #############################\n 1 #   |   #   |   #   |   |   #\n   #####---#####---#---#####---#\n 2 #   #   |   #   #   #   #   #\n   #---#####---#####---#####---#\n 3 #   |   |   #   #   #   #   #\n   #---#########---#####---#---#\n 4 # ->#   |   |   |   |   #   #\n   #############################\n```\n\n- $\\verb!#!$ 表示墙壁；\n- $\\verb!|!$ 和 $\\verb!-!$ 表示没有墙壁；\n- $\\verb!->!$ 指向了一面墙，移除了这面墙我们就有一间最大的新房间。\n\n友情提示，这个城堡的平面图是 $4 \\times 7$ 个单位的。一个“房间”的是平面图中一个由 `#`、`-`、`|` 围成的格子（就是图里面的那一个个的格子）。比如说这个样例就有 $5$ 个房间。（大小分别为 $9,7,3,1,8$ 个单位（排名不分先后））\n\n移去箭头所指的那面墙，可以使 $2$ 个房间合为一个新房间，且比移去其他墙所形成的房间都大。\n\n城堡保证至少有 $2$ 个房间，而且一定有一面墙可以被移走。\n", "inputFormat": "第一行两个正整数 $m,n$，表示城堡有 $n$ 行 $m$ 列。 \n\n每一个单位的数字告诉我们这个单位的东西南北是否有墙存在。每个数字是由以下四个整数中的任意个加起来的。\n\n$1$: 在西面有墙\n\n$2$: 在北面有墙\n\n$4$: 在东面有墙\n\n$8$: 在南面有墙\n\n城堡内部的墙会被规定两次。比如说 $(1,1)$ 南面的墙，亦会被标记为 $(2,1)$ 北面的墙。\n", "outputFormat": "输出包含如下四行:\n\n第一行：城堡的房间数目。\n\n第二行：最大的房间的大小\n\n第三行：移除一面墙能得到的最大的房间的大小\n\n第四行：移除哪面墙可以得到面积最大的新房间。\n\n选择最佳的墙来推倒。有多解时选最靠西的，仍然有多解时选最靠南的。同一格子北边的墙比东边的墙更优先。\n\n用该墙的南邻单位的北墙或西邻单位的东墙来表示这面墙，方法是输出邻近单位的行数、列数和墙的方位（ `N`（北）或者 `E`（东））。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n,m \\le 50$。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.1] The Castle", "background": "Our honest USACO protagonist, Farmer John, received a special birthday gift with unbelievable luck: a “Lucky Ireland” lottery ticket. It won him the only prize of the contest — a dreamlike castle located in the Irish countryside!", "description": "Boastful Farmer John immediately returned to his hometown in Wisconsin, where boasting is a tradition, to brag about everything regarding his castle. He needs to prepare before boasting: for example, how many rooms the castle has and how large each room is.\n\nIn addition, Farmer John wants to remove a single wall (a wall between two unit squares) to form a larger room. Your job is to help him prepare by computing the number of rooms and the size of each room.\n\nThe castle floor plan is divided into $n \\times m$ unit squares. Each unit square may have $0 \\sim 4$ surrounding walls. The entire castle is enclosed by exterior walls to keep out wind and rain. (That is, the outer boundary of the floor plan is certainly walled.)\n\nPlease study carefully the annotated floor plan of a castle below:\n\n```plain\n     1   2   3   4   5   6   7\n   #############################\n 1 #   |   #   |   #   |   |   #\n   #####---#####---#---#####---#\n 2 #   #   |   #   #   #   #   #\n   #---#####---#####---#####---#\n 3 #   |   |   #   #   #   #   #\n   #---#########---#####---#---#\n 4 # ->#   |   |   |   |   #   #\n   #############################\n```\n\n- $\\verb!#!$ denotes a wall.\n- $\\verb!|!$ and $\\verb!-!$ denote the absence of a wall.\n- $\\verb!->!$ points to a wall; removing this wall yields the largest possible new room.\n\nA friendly reminder: this castle floor plan has $4 \\times 7$ unit squares. A “room” is a maximal set of unit squares connected through openings (i.e., adjacent squares without a wall between them). For example, this sample has $5$ rooms (with sizes $9,7,3,1,8$ units, in no particular order).\n\nRemoving the wall indicated by the arrow merges $2$ rooms into one new room that is larger than any room obtained by removing any other single wall.\n\nThe castle is guaranteed to have at least $2$ rooms, and there is always at least one wall that can be removed.", "inputFormat": "The first line contains two positive integers $m,n$, meaning the castle has $n$ rows and $m$ columns.\n\nThe next $n$ lines each contain $m$ integers. Each integer for a unit square tells whether there are walls to its west, north, east, and south. Each number is the sum of any subset of the following four integers:\n\n$1$: a wall to the west.\n\n$2$: a wall to the north.\n\n$4$: a wall to the east.\n\n$8$: a wall to the south.\n\nInterior walls are specified twice. For example, the south wall of $(1,1)$ is also specified as the north wall of $(2,1)$.", "outputFormat": "Output four lines:\n\n- The first line: the number of rooms in the castle.\n- The second line: the size of the largest room.\n- The third line: the largest room size obtainable by removing one wall.\n- The fourth line: which wall to remove to obtain the largest possible new room.\n\nChoose the best wall to remove. If there are multiple choices, pick the westernmost one. If there is still a tie, pick the southernmost one. For the same cell, prefer the north wall over the east wall.\n\nRepresent the wall by outputting the row number, column number, and the wall’s direction ($N$ for north or $E$ for east). That is, identify a wall by the cell whose north or east wall is to be removed.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n,m \\le 50$.\n\nUSACO 2.1\n\nTranslated from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.1] 城堡 The Castle", "background": "我们憨厚的 USACO 主人公农夫约翰（Farmer John）以无法想象的运气,在他生日那天收到了一份特别的礼物：一张“幸运爱尔兰”（一种彩票）。结果这张彩票让他获得了这次比赛唯一的奖品——坐落于爱尔兰郊外的一座梦幻般的城堡！", "description": "喜欢吹嘘的农夫约翰立刻回到有着吹嘘传统的威斯康辛老家开始吹嘘了, 农夫约翰想要告诉他的奶牛们关于他城堡的一切。他需要做一些吹嘘前的准备工作：比如说知道城堡有多少个房间，每个房间有多大。  \n\n另外，农夫约翰想要把一面单独的墙（指两个单位间的墙）拆掉以形成一个更大的房间。 你的工作就是帮农夫约翰做以上的准备，算出房间数与房间的大小。\n\n城堡的平面图被划分成 $n \\times m$ 个正方形的单位，一个这样的单位可以有 $0 \\sim 4 $ 面墙环绕。城堡周围一定有外墙环绕以遮风挡雨。（就是说平面图的四周一定是墙。）\n\n请仔细研究下面这个有注解的城堡平面图：\n\n```plain\n     1   2   3   4   5   6   7\n   #############################\n 1 #   |   #   |   #   |   |   #\n   #####---#####---#---#####---#\n 2 #   #   |   #   #   #   #   #\n   #---#####---#####---#####---#\n 3 #   |   |   #   #   #   #   #\n   #---#########---#####---#---#\n 4 # ->#   |   |   |   |   #   #\n   #############################\n```\n\n- $\\verb!#!$ 表示墙壁；\n- $\\verb!|!$ 和 $\\verb!-!$ 表示没有墙壁；\n- $\\verb!->!$ 指向了一面墙，移除了这面墙我们就有一间最大的新房间。\n\n友情提示，这个城堡的平面图是 $4 \\times 7$ 个单位的。一个“房间”的是平面图中一个由 `#`、`-`、`|` 围成的格子（就是图里面的那一个个的格子）。比如说这个样例就有 $5$ 个房间。（大小分别为 $9,7,3,1,8$ 个单位（排名不分先后））\n\n移去箭头所指的那面墙，可以使 $2$ 个房间合为一个新房间，且比移去其他墙所形成的房间都大。\n\n城堡保证至少有 $2$ 个房间，而且一定有一面墙可以被移走。\n", "inputFormat": "第一行两个正整数 $m,n$，表示城堡有 $n$ 行 $m$ 列。 \n\n每一个单位的数字告诉我们这个单位的东西南北是否有墙存在。每个数字是由以下四个整数中的任意个加起来的。\n\n$1$: 在西面有墙\n\n$2$: 在北面有墙\n\n$4$: 在东面有墙\n\n$8$: 在南面有墙\n\n城堡内部的墙会被规定两次。比如说 $(1,1)$ 南面的墙，亦会被标记为 $(2,1)$ 北面的墙。\n", "outputFormat": "输出包含如下四行:\n\n第一行：城堡的房间数目。\n\n第二行：最大的房间的大小\n\n第三行：移除一面墙能得到的最大的房间的大小\n\n第四行：移除哪面墙可以得到面积最大的新房间。\n\n选择最佳的墙来推倒。有多解时选最靠西的，仍然有多解时选最靠南的。同一格子北边的墙比东边的墙更优先。\n\n用该墙的南邻单位的北墙或西邻单位的东墙来表示这面墙，方法是输出邻近单位的行数、列数和墙的方位（ `N`（北）或者 `E`（东））。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n,m \\le 50$。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN"}}}
{"pid": "P1458", "type": "P", "difficulty": 2, "samples": [["5\n", "0/1\n1/5\n1/4\n1/3\n2/5\n1/2\n3/5\n2/3\n3/4\n4/5\n1/1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "数学", "USACO", "枚举", "排序"], "title": "[USACO2.1] 顺序的分数 Ordered Fractions", "background": "", "description": "输入一个自然数 $n$，对于一个最简分数 $a/b$（分子和分母互质的分数），满足 $1 \\le b \\le n,0 \\le a/b \\le 1$，请找出所有满足条件的分数。\n\n这有一个例子，当 $n=5$ 时，所有解为：\n\n$$\\frac01,\\frac15,\\frac14,\\frac13,\\frac25,\\frac12,\\frac35,\\frac23,\\frac34 ,\\frac45,\\frac11$$\n\n给定一个自然数 $n$，请编程按分数值递增的顺序输出所有解。\n \n注：   \n1、$0$ 和任意自然数的最大公约数就是那个自然数。    \n2、互质指最大公约数等于1的两个自然数。\n", "inputFormat": "单独的一行一个自然数 $n$\n", "outputFormat": "每个分数单独占一行，按照大小次序排列\n", "hint": "【数据范围】    \n对于 $100\\%$ 的数据，$1\\le n \\le 160$。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.1] Ordered Fractions", "background": "", "description": "Input a natural number $n$. For a reduced fraction $a/b$ (a fraction whose numerator and denominator are coprime) that satisfies $1 \\le b \\le n, 0 \\le a/b \\le 1$, find all fractions meeting the conditions.\n\nHere is an example. When $n=5$, all solutions are:\n\n$$\\frac01,\\frac15,\\frac14,\\frac13,\\frac25,\\frac12,\\frac35,\\frac23,\\frac34 ,\\frac45,\\frac11$$\n\nGiven a natural number $n$, write a program to output all solutions in increasing order of their values.\n\nNote:\n1. The greatest common divisor of $0$ and any natural number is that natural number.\n2. “Coprime” means the greatest common divisor of the two natural numbers equals $1$.", "inputFormat": "A single line containing a natural number $n$.", "outputFormat": "Each fraction occupies one line, in increasing order.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 160$.\n\nUSACO 2.1\n\nTranslation from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.1] 顺序的分数 Ordered Fractions", "background": "", "description": "输入一个自然数 $n$，对于一个最简分数 $a/b$（分子和分母互质的分数），满足 $1 \\le b \\le n,0 \\le a/b \\le 1$，请找出所有满足条件的分数。\n\n这有一个例子，当 $n=5$ 时，所有解为：\n\n$$\\frac01,\\frac15,\\frac14,\\frac13,\\frac25,\\frac12,\\frac35,\\frac23,\\frac34 ,\\frac45,\\frac11$$\n\n给定一个自然数 $n$，请编程按分数值递增的顺序输出所有解。\n \n注：   \n1、$0$ 和任意自然数的最大公约数就是那个自然数。    \n2、互质指最大公约数等于1的两个自然数。\n", "inputFormat": "单独的一行一个自然数 $n$\n", "outputFormat": "每个分数单独占一行，按照大小次序排列\n", "hint": "【数据范围】    \n对于 $100\\%$ 的数据，$1\\le n \\le 160$。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN"}}}
{"pid": "P1459", "type": "P", "difficulty": 2, "samples": [["9\n2\n2\n1\n3\n3\n3\n2\n3\n1", "4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "USACO", "IOI", "排序", "1996"], "title": "[IOI 1996 / USACO2.1] 三值的排序 Sorting a Three-Valued Sequence", "background": null, "description": "排序是一种很频繁的计算任务。现在考虑最多只有三值的排序问题。一个实际的例子是，当我们给某项竞赛的优胜者按金银铜牌排序的时候。在这个任务中可能的值只有三种 $1,2,3$。我们用交换的方法把他排成升序的。\n\n写一个程序计算出，给定的一个 $1,2,3$ 组成的数字序列，排成升序所需的最少交换次数。", "inputFormat": "第一行一个正整数 $n$，表示奖牌个数。\n\n接下来 $n$ 行，每行一个 $[1,3]$ 内的整数，表示奖牌。", "outputFormat": "输出一行一个整数，表示排成升序所需的最少交换次数。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 1000$。\n\n翻译来自 NOCOW。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 1996 / USACO2.1] Sorting a Three-Valued Sequence", "background": "", "description": "Sorting is a frequent computational task. Now consider sorting when there are at most three possible values. A practical example is ranking winners of a competition by gold, silver, and bronze medals. In this task, the possible values are only $1,2,3$. We use swaps to arrange the sequence in ascending order.\n\nWrite a program to compute the minimum number of swaps needed to sort a given sequence consisting only of $1,2,3$ into ascending order.", "inputFormat": "The first line contains a positive integer $n$, the number of medals.\n\nEach of the next $n$ lines contains an integer in $[1,3]$, representing a medal.", "outputFormat": "Output a single integer, the minimum number of swaps needed to sort the sequence in ascending order.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 1996 / USACO2.1] 三值的排序 Sorting a Three-Valued Sequence", "background": null, "description": "排序是一种很频繁的计算任务。现在考虑最多只有三值的排序问题。一个实际的例子是，当我们给某项竞赛的优胜者按金银铜牌排序的时候。在这个任务中可能的值只有三种 $1,2,3$。我们用交换的方法把他排成升序的。\n\n写一个程序计算出，给定的一个 $1,2,3$ 组成的数字序列，排成升序所需的最少交换次数。", "inputFormat": "第一行一个正整数 $n$，表示奖牌个数。\n\n接下来 $n$ 行，每行一个 $[1,3]$ 内的整数，表示奖牌。", "outputFormat": "输出一行一个整数，表示排成升序所需的最少交换次数。", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 1000$。\n\n翻译来自 NOCOW。", "locale": "zh-CN"}}}
{"pid": "P1460", "type": "P", "difficulty": 2, "samples": [["4\n100 200 300 400\n3\n50  50  50  50\n200 300 200 300\n900 150 389 399", "2 1 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "USACO", "广度优先搜索 BFS", "深度优先搜索 DFS"], "title": "[USACO2.1] 健康的荷斯坦奶牛 Healthy Holsteins", "background": "", "description": "农民 John 以拥有世界上最健康的奶牛为傲。他知道每种饲料中所包含的牛所需的最低的维他命量是多少。请你帮助农夫喂养他的牛，以保持它们的健康，使喂给牛的饲料的种数最少。\n\n给出牛所需的最低的维他命量，输出喂给牛需要哪些种类的饲料，且所需的饲料剂量最少。\n\n维他命量以整数表示，每种饲料最多只能对牛使用一次，数据保证存在解。\n", "inputFormat": "第一行一个整数 $v$，表示需要的维他命的种类数。  \n第二行 $v$ 个整数，表示牛每天需要的每种维他命的最小量。\n\n第三行一个整数 $g$，表示可用来喂牛的饲料的种数。   \n下面 $g$ 行，第 $n$ 行表示编号为 $n$ 饲料包含的各种维他命的量的多少。\n", "outputFormat": "输出文件只有一行，包括牛必需的最小的饲料种数 $p$；后面有 $p$ 个数，表示所选择的饲料编号（按从小到大排列）。\n\n如果有多个解，输出饲料序号最小的（即字典序最小）。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le v \\le 25$，$1\\le g \\le 15$。  \n输入的所有整数在 $[1,1000]$ 范围内。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO2.1] Healthy Holsteins", "background": "", "description": "Farmer John prides himself on having the healthiest cows in the world. He knows the minimum amount of each vitamin that the cows need from different feeds. Please help him feed his cows to keep them healthy while minimizing the number of feed types used.\n\nGiven the cows’ minimum vitamin requirements, output which types of feed to use so that the total number of feeds is minimized.\n\nVitamin amounts are integers. Each type of feed can be used at most once. It is guaranteed that a solution exists.", "inputFormat": "The first line contains an integer $v$, the number of vitamin types required.\nThe second line contains $v$ integers, the minimum daily amount required for each vitamin.\n\nThe third line contains an integer $g$, the number of available feed types.\nEach of the next $g$ lines contains $v$ integers; the $n$-th of these lines gives the amounts of each vitamin contained in feed number $n$.", "outputFormat": "Output a single line containing the minimum number of feed types $p$, followed by $p$ integers: the chosen feed indices in increasing order.\n\nIf there are multiple solutions, output the one with the smallest sequence of feed indices (i.e., lexicographically smallest).", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1\\le v \\le 25$, $1\\le g \\le 15$.  \nAll integers in the input are in the range $[1,1000]$.\n\nUSACO 2.1\n\nTranslation from NOCOW.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO2.1] 健康的荷斯坦奶牛 Healthy Holsteins", "background": "", "description": "农民 John 以拥有世界上最健康的奶牛为傲。他知道每种饲料中所包含的牛所需的最低的维他命量是多少。请你帮助农夫喂养他的牛，以保持它们的健康，使喂给牛的饲料的种数最少。\n\n给出牛所需的最低的维他命量，输出喂给牛需要哪些种类的饲料，且所需的饲料剂量最少。\n\n维他命量以整数表示，每种饲料最多只能对牛使用一次，数据保证存在解。\n", "inputFormat": "第一行一个整数 $v$，表示需要的维他命的种类数。  \n第二行 $v$ 个整数，表示牛每天需要的每种维他命的最小量。\n\n第三行一个整数 $g$，表示可用来喂牛的饲料的种数。   \n下面 $g$ 行，第 $n$ 行表示编号为 $n$ 饲料包含的各种维他命的量的多少。\n", "outputFormat": "输出文件只有一行，包括牛必需的最小的饲料种数 $p$；后面有 $p$ 个数，表示所选择的饲料编号（按从小到大排列）。\n\n如果有多个解，输出饲料序号最小的（即字典序最小）。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le v \\le 25$，$1\\le g \\le 15$。  \n输入的所有整数在 $[1,1000]$ 范围内。\n\nUSACO 2.1\n\n翻译来自NOCOW\n", "locale": "zh-CN"}}}
