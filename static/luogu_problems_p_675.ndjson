{"pid": "P14686", "type": "P", "difficulty": 6, "samples": [["3 1 1", "2"], ["3 3 2", "4"], ["3 3 1", "1"], ["2025 1207 64", "660312977"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "ICPC", "横浜"], "title": "[ICPC 2025 Yokohama R] Charity Raffle", "background": "", "description": "You are joining a charity raffle in which several types of prizes can be won. The raffle is held in a somewhat unusual way: with one draw using a single draw ticket, two prizes of different types are randomly picked up. However, you don't win both of them; you should choose one out of the two.\n\nYou have a certain number of draw tickets. You will use all of them and win the same number of prizes. As you don't want too many prizes of the same type, when choosing out of the two prizes, you choose the one that you have won fewer so far. You may have won the same number of the two prize types, including cases where both are zero. The prize types are sequentially numbered, and you choose the one with the lower type number in that case.\n\nDespite the above strategy, it is not certain that you can avoid winning too many prizes of the same type. You feel **unhappy** if there is a prize type for which the number of prizes you win exceeds a certain limit. You want to know how many possible combinations of prizes you may get that do not make you unhappy after using up all of your draw tickets. Two combinations of prizes are considered different when they differ in the count of at least one type of prize. You may assume that there is an unlimited supply of any type of prize.", "inputFormat": "The input consists of a single test case of the following format.\n\n$$\nn\\ k\\ m\n$$\n\nThe first integer $n$ ($2 \\le n \\le 10^6$) is the number of different types of prizes. The second integer $k$ ($1 \\le k \\le 10^6$) is the number of draw tickets you have. The third integer $m$ ($1 \\le m \\le k$) is the maximum number of prizes of a single type that does not make you unhappy.\n", "outputFormat": "Output the number of possible combinations of prizes that do not make you unhappy, modulo $998\\ 244\\ 353$, which is a prime number.", "hint": "In Sample Input 1, you will win either the first or the second type of prize, but not the third.\n\nIn Sample Input 2, the following four combinations of prizes are possible. In any of these, the number of prizes of any single type is no more than $m = 2$, and thus, you are not **unhappy**.\n\n- Two prizes of the first type and one prize of the second type\n- Two prizes of the first type and one prize of the third type\n- Two prizes of the second type and one prize of the third type\n- One prize of each of the three types\n\nIn Sample Input 3, only the last one of the four combinations above does not contain more than one prize of any single type.\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 Yokohama R] Charity Raffle", "background": "", "description": "You are joining a charity raffle in which several types of prizes can be won. The raffle is held in a somewhat unusual way: with one draw using a single draw ticket, two prizes of different types are randomly picked up. However, you don't win both of them; you should choose one out of the two.\n\nYou have a certain number of draw tickets. You will use all of them and win the same number of prizes. As you don't want too many prizes of the same type, when choosing out of the two prizes, you choose the one that you have won fewer so far. You may have won the same number of the two prize types, including cases where both are zero. The prize types are sequentially numbered, and you choose the one with the lower type number in that case.\n\nDespite the above strategy, it is not certain that you can avoid winning too many prizes of the same type. You feel **unhappy** if there is a prize type for which the number of prizes you win exceeds a certain limit. You want to know how many possible combinations of prizes you may get that do not make you unhappy after using up all of your draw tickets. Two combinations of prizes are considered different when they differ in the count of at least one type of prize. You may assume that there is an unlimited supply of any type of prize.", "inputFormat": "The input consists of a single test case of the following format.\n\n$$\nn\\ k\\ m\n$$\n\nThe first integer $n$ ($2 \\le n \\le 10^6$) is the number of different types of prizes. The second integer $k$ ($1 \\le k \\le 10^6$) is the number of draw tickets you have. The third integer $m$ ($1 \\le m \\le k$) is the maximum number of prizes of a single type that does not make you unhappy.\n", "outputFormat": "Output the number of possible combinations of prizes that do not make you unhappy, modulo $998\\ 244\\ 353$, which is a prime number.", "hint": "In Sample Input 1, you will win either the first or the second type of prize, but not the third.\n\nIn Sample Input 2, the following four combinations of prizes are possible. In any of these, the number of prizes of any single type is no more than $m = 2$, and thus, you are not **unhappy**.\n\n- Two prizes of the first type and one prize of the second type\n- Two prizes of the first type and one prize of the third type\n- Two prizes of the second type and one prize of the third type\n- One prize of each of the three types\n\nIn Sample Input 3, only the last one of the four combinations above does not contain more than one prize of any single type.\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 Yokohama R] Charity Raffle", "background": "", "description": "你正在参加一场慈善抽奖，其中可以赢得几种不同类型的奖品。抽奖以一种略显不同寻常的方式进行：用一张抽奖券进行一次抽奖时，会随机抽取两种不同类型的奖品。然而，你并不会赢得两者；你需要在两者中选择其一。\n\n你拥有一定数量的抽奖券。你将使用所有抽奖券，并赢得相同数量的奖品。由于你不想获得太多相同类型的奖品，因此在两种奖品中进行选择时，你会选择迄今为止赢得数量较少的那种。如果两种奖品类型你赢得的数量相同（包括两者均为零的情况），由于奖品类型是按顺序编号的，你会选择编号较小的那种。\n\n尽管有上述策略，你仍不能保证一定能避免赢得过多相同类型的奖品。如果存在某种奖品类型，你赢得该类型奖品的数量超过了某个特定限制，你会感到**不悦**。你想知道在使用完所有抽奖券后，可能获得的不令你感到不悦的奖品组合有多少种。当至少一种奖品类型的数量不同时，两种奖品组合被视为不同。你可以假设任何类型的奖品供应都是无限的。", "inputFormat": "输入由单个测试用例组成，格式如下。\n\n$$\nn\\ k\\ m\n$$\n\n第一个整数 $n$ ($2 \\le n \\le 10^6$) 是不同奖品类型的数量。第二个整数 $k$ ($1 \\le k \\le 10^6$) 是你拥有的抽奖券数量。第三个整数 $m$ ($1 \\le m \\le k$) 是单一类型奖品的最大数量，超过这个数量会让你感到不悦。", "outputFormat": "输出可能的不令你感到不悦的奖品组合数量，结果对质数 $998\\ 244\\ 353$ 取模。\n", "hint": "在样例输入 1 中，你将赢得第一种或第二种类型的奖品，但不会赢得第三种。\n\n在样例输入 2 中，可能产生以下四种奖品组合。在这些组合中，任何单一类型的奖品数量都不超过 $m = 2$，因此你不会感到**不悦**。\n\n- 两个第一种类型的奖品和一个第二种类型的奖品\n- 两个第一种类型的奖品和一个第三种类型的奖品\n- 两个第二种类型的奖品和一个第三种类型的奖品\n- 三种类型各一个奖品\n\n在样例输入 3 中，上述四种组合中只有最后一种不包含超过一个的任何单一类型的奖品。\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14687", "type": "P", "difficulty": 3, "samples": [["1\n10 10 5\n..........\n..........\n....#####.\n..#.#.#.#.\n..#.#.#.#.\n..#.#.#.#.\n..#.#.#.#.\n..#####...\n..........\n..........", "yes"], ["2\n5 21 5\n.#...##...###....##..\n.#..#..#..#..#..#..#.\n.#..#.....###...#....\n.#..#..#..#.....#..#.\n.#...##...#......##..\n6 14 6\n.############.\n.#..........#.\n.#..........#.\n.#..........#.\n.#..........#.\n.############.", "no\nyes"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "ICPC", "横浜"], "title": "[ICPC 2025 Yokohama R] U-Shaped Panels", "background": "", "description": "A rectangular pond is in the backyard of your house. As the length and width of the pond are integer multiples of one meter, the pond can be considered to consist of one-meter-square sections.\n\nYou always feel the pond is too large, and you want to cover some of its sections using the panels kept in the barn. All of these panels have the same size and the same shape, consisting of one-meter-square boards arranged in a U shape. The overall size of the panels is $k$ meters by $k$ meters, and $3k - 2$ boards are on the three edges of that square. The rest, the $(k - 2) \\times (k - 1)$ rectangular area, is void. Figure H.1 illustrates a panel of size $k = 5$.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/anxzu6nh.png)\n\nFigure H.1. A panel of size $k = 5$ (left) and its top view (right)\n:::\n\nYou plan to cover certain one-meter-square sections of the pond with the panels and leave the rest uncovered. Panels should be placed so that each of their boards fits exactly one section. As long as this is satisfied, orientations of the panels can be arbitrarily chosen. Panels should not overlap one another nor stick out of the pond.\n\nDetermine whether your plan is feasible or not.", "inputFormat": "The input contains one or more test cases. The first line of the input contains an integer $t$ ($1 \\le t \\le 10$), which is the number of test cases. The descriptions of the $t$ test cases follow, each in the following format.\n\n$$\nn\\ m\\ k\n$$\n$$\ns_1\n$$\n$$\n\\vdots\n$$\n$$\ns_n\n$$\n\nThe first line contains three integers $n$, $m$, and $k$. The integers $n$ and $m$ denote the length and the width of the pond, respectively ($5 \\le n \\le 1000$, $5 \\le m \\le 1000$). The integer $k$ denotes the size of the U-shaped panels ($5 \\le k \\le 1000$). The following $n$ lines represent your plan. The $i$-th of them contains a string $s_i$ of length $m$ consisting of the characters '#' and '.'. Let us say a one-meter-square section is at $(r, c)$ if it lies between $r - 1$ meters and $r$ meters from the front edge, and between $c - 1$ meters and $c$ meters from the left edge. For each $i$ and $j$, if the $j$-th character of $s_i$ is '#', the section at $(i, j)$ should be fully covered with a board of a panel. Otherwise, the section should remain fully uncovered.\n\nThe sum of $n$'s over all the test cases does not exceed 1000. The same applies to $m$.", "outputFormat": "For each test case, output in a line yes if your plan is feasible; no otherwise.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 Yokohama R] U-Shaped Panels", "background": "", "description": "A rectangular pond is in the backyard of your house. As the length and width of the pond are integer multiples of one meter, the pond can be considered to consist of one-meter-square sections.\n\nYou always feel the pond is too large, and you want to cover some of its sections using the panels kept in the barn. All of these panels have the same size and the same shape, consisting of one-meter-square boards arranged in a U shape. The overall size of the panels is $k$ meters by $k$ meters, and $3k - 2$ boards are on the three edges of that square. The rest, the $(k - 2) \\times (k - 1)$ rectangular area, is void. Figure H.1 illustrates a panel of size $k = 5$.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/anxzu6nh.png)\n\nFigure H.1. A panel of size $k = 5$ (left) and its top view (right)\n:::\n\nYou plan to cover certain one-meter-square sections of the pond with the panels and leave the rest uncovered. Panels should be placed so that each of their boards fits exactly one section. As long as this is satisfied, orientations of the panels can be arbitrarily chosen. Panels should not overlap one another nor stick out of the pond.\n\nDetermine whether your plan is feasible or not.", "inputFormat": "The input contains one or more test cases. The first line of the input contains an integer $t$ ($1 \\le t \\le 10$), which is the number of test cases. The descriptions of the $t$ test cases follow, each in the following format.\n\n$$\nn\\ m\\ k\n$$\n$$\ns_1\n$$\n$$\n\\vdots\n$$\n$$\ns_n\n$$\n\nThe first line contains three integers $n$, $m$, and $k$. The integers $n$ and $m$ denote the length and the width of the pond, respectively ($5 \\le n \\le 1000$, $5 \\le m \\le 1000$). The integer $k$ denotes the size of the U-shaped panels ($5 \\le k \\le 1000$). The following $n$ lines represent your plan. The $i$-th of them contains a string $s_i$ of length $m$ consisting of the characters '#' and '.'. Let us say a one-meter-square section is at $(r, c)$ if it lies between $r - 1$ meters and $r$ meters from the front edge, and between $c - 1$ meters and $c$ meters from the left edge. For each $i$ and $j$, if the $j$-th character of $s_i$ is '#', the section at $(i, j)$ should be fully covered with a board of a panel. Otherwise, the section should remain fully uncovered.\n\nThe sum of $n$'s over all the test cases does not exceed 1000. The same applies to $m$.", "outputFormat": "For each test case, output in a line yes if your plan is feasible; no otherwise.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 Yokohama R] U-Shaped Panels", "background": "", "description": "你家后院有一个长方形的池塘。由于池塘的长和宽都是 $1$ 米的整数倍，因此可以将池塘看作由 $1$ 米见方的方格组成。\n\n你总觉得池塘太大了，想用存放在谷仓里的面板覆盖池塘的一部分方格。这些面板尺寸和形状都相同，由排列成 U 形的 $1$ 米见方的木板组成。面板的整体尺寸为 $k$ 米 × $k$ 米，该正方形的三条边上共有 $3k - 2$ 块木板。其余部分，即 $(k - 2) \\times (k - 1)$ 的长方形区域，是空的。图 H.1 展示了一个尺寸为 $k = 5$ 的面板。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/anxzu6nh.png)\n\n图 H.1. 尺寸为 $k = 5$ 的面板（左）及其俯视图（右）\n:::\n\n你计划用这些面板覆盖池塘的某些 $1$ 米见方的方格，其余部分则不覆盖。面板的放置必须使每块木板恰好覆盖一个方格。只要满足这一点，面板的方向可以任意选择。面板之间不能相互重叠，也不能超出池塘范围。\n\n判断你的计划是否可行。", "inputFormat": "输入包含一个或多个测试用例。输入的第一行包含一个整数 $t$ ($1 \\le t \\le 10$)，表示测试用例的数量。接下来是 $t$ 个测试用例的描述，每个用例的格式如下。\n\n$$\nn\\ m\\ k\n$$\n$$\ns_1\n$$\n$$\n\\vdots\n$$\n$$\ns_n\n$$\n\n第一行包含三个整数 $n$、$m$ 和 $k$。整数 $n$ 和 $m$ 分别表示池塘的长度和宽度 ($5 \\le n \\le 1000$, $5 \\le m \\le 1000$)。整数 $k$ 表示 U 形面板的尺寸 ($5 \\le k \\le 1000$)。接下来的 $n$ 行表示你的计划。其中第 $i$ 行包含一个长度为 $m$ 的字符串 $s_i$，由字符 '#' 和 '.' 组成。假设一个 $1$ 米见方的方格位于 $(r, c)$，如果它距离前边 $r-1$ 米到 $r$ 米，距离左边 $c-1$ 米到 $c$ 米。对于每个 $i$ 和 $j$，如果 $s_i$ 的第 $j$ 个字符是 '#'，则位于 $(i, j)$ 的方格应被一块面板木板完全覆盖。否则，该方格应保持完全不被覆盖。\n\n所有测试用例的 $n$ 之和不超过 $1000$。$m$ 也满足相同条件。", "outputFormat": "对于每个测试用例，如果你的计划可行，则输出一行 yes；否则输出 no。\n", "hint": "翻译由 DeepSeek V3 完成\n", "locale": "zh-CN"}}}
{"pid": "P14688", "type": "P", "difficulty": 4, "samples": [["3\n2\n..\n3\n.a.\n4\nab..", "bob\nbob\nalice"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "ICPC", "横浜"], "title": "[ICPC 2025 Yokohama R] Game of Names", "background": "", "description": "Alice and Bob are playing a game on a board with a certain number of cells in a single row. Some (possibly none) of the cells have a player's name written in them, either \"Alice\" or \"Bob\". Other cells are initially blank.\n\nStarting with Alice, the two players alternately take moves. In one move, the player in turn chooses a blank cell that does not have an adjacent cell with the player's own name, and then writes the player's name in the chosen blank cell. Note that the opponent's name in an adjacent cell does not matter.\n\nThe player who cannot make a move loses the game. Given the initial state of the board, determine which of Alice and Bob will win when they play their best.\n", "inputFormat": "The input contains one or more test cases. The first line of the input contains an integer $t$ ($1 \\le t \\le 2 \\times 10^5$), which is the number of test cases. The descriptions of the $t$ test cases follow, each in the following format.\n\n$$\nn\n$$\n$$\ns\n$$\n\nThe integer $n$ represents the number of cells on the board ($1 \\le n \\le 2 \\times 10^5$). The initial state of the board is given as a string $s$ of length $n$.\n\nFor each $i$ ($1 \\le i \\le n$), the $i$-th character $s_i$ of $s$ is either 'a', 'b', or '.', and represents the initial state of the $i$-th cell from the left. Here, $s_i$ is 'a' if the $i$-th cell contains the name Alice, 'b' if it contains the name Bob, and '.' if it is blank.\n\nIt is guaranteed that the initial board does not contain two adjacent cells with the same name.\n\nThe sum of $n$'s over all the test cases does not exceed $2 \\times 10^5$.", "outputFormat": "For each test case, output alice if Alice wins and bob if Bob wins, in one line.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 Yokohama R] Game of Names", "background": "", "description": "Alice and Bob are playing a game on a board with a certain number of cells in a single row. Some (possibly none) of the cells have a player's name written in them, either \"Alice\" or \"Bob\". Other cells are initially blank.\n\nStarting with Alice, the two players alternately take moves. In one move, the player in turn chooses a blank cell that does not have an adjacent cell with the player's own name, and then writes the player's name in the chosen blank cell. Note that the opponent's name in an adjacent cell does not matter.\n\nThe player who cannot make a move loses the game. Given the initial state of the board, determine which of Alice and Bob will win when they play their best.\n", "inputFormat": "The input contains one or more test cases. The first line of the input contains an integer $t$ ($1 \\le t \\le 2 \\times 10^5$), which is the number of test cases. The descriptions of the $t$ test cases follow, each in the following format.\n\n$$\nn\n$$\n$$\ns\n$$\n\nThe integer $n$ represents the number of cells on the board ($1 \\le n \\le 2 \\times 10^5$). The initial state of the board is given as a string $s$ of length $n$.\n\nFor each $i$ ($1 \\le i \\le n$), the $i$-th character $s_i$ of $s$ is either 'a', 'b', or '.', and represents the initial state of the $i$-th cell from the left. Here, $s_i$ is 'a' if the $i$-th cell contains the name Alice, 'b' if it contains the name Bob, and '.' if it is blank.\n\nIt is guaranteed that the initial board does not contain two adjacent cells with the same name.\n\nThe sum of $n$'s over all the test cases does not exceed $2 \\times 10^5$.", "outputFormat": "For each test case, output alice if Alice wins and bob if Bob wins, in one line.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 Yokohama R] Game of Names", "background": "", "description": "Alice 和 Bob 正在一个单行、有一定数量格子的棋盘上玩游戏。一些格子（可能为零）中写有玩家的名字，要么是 \"Alice\"，要么是 \"Bob\"。其他格子最初是空白的。\n\n游戏从 Alice 开始，两位玩家轮流操作。在一次操作中，轮到行动的玩家选择一个空白格子，该格子不能与写有该玩家自己名字的格子相邻，然后在该选定的空白格子中写下自己的名字。请注意，相邻格子中对手的名字没有影响。\n\n无法进行操作的玩家输掉游戏。给定棋盘的初始状态，确定当 Alice 和 Bob 都采取最优策略时，谁会获胜。", "inputFormat": "输入包含一个或多个测试用例。输入的第一行包含一个整数 $t$ ($1 \\le t \\le 2 \\times 10^5$)，表示测试用例的数量。接下来是 $t$ 个测试用例的描述，每个用例的格式如下。\n\n$$\nn\n$$\n$$\ns\n$$\n\n整数 $n$ 表示棋盘上的格子数量 ($1 \\le n \\le 2 \\times 10^5$)。棋盘的初始状态由一个长度为 $n$ 的字符串 $s$ 给出。\n\n对于每个 $i$ ($1 \\le i \\le n$)，$s$ 的第 $i$ 个字符 $s_i$ 是 'a'、'b' 或 '.' 之一，表示从左数第 $i$ 个格子的初始状态。其中，如果第 $i$ 个格子包含名字 Alice，则 $s_i$ 为 'a'；如果包含名字 Bob，则为 'b'；如果是空白，则为 '.'。\n\n保证初始棋盘不会包含两个相邻且名字相同的格子。\n\n所有测试用例的 $n$ 之和不超过 $2 \\times 10^5$。", "outputFormat": "对于每个测试用例，输出一行：如果 Alice 获胜则输出 alice，如果 Bob 获胜则输出 bob。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14689", "type": "P", "difficulty": 4, "samples": [["3\n5 7\nI?I?I?I\n?P?P?P?\nI?I?I?I\n?P?P?P?\nI?I?I?I\n4 4\nICPC\nCPCI\nICPC\nCPCI\n2 2\n??\n??", "yes\nICICICI\nCPCPCPC\nICICICI\nCPCPCPC\nICICICI\nno\nyes\nIC\nPC"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "Special Judge", "ICPC", "横浜"], "title": "[ICPC 2025 Yokohama R] ICPC Board", "background": "", "description": "As an archaeologist, you have discovered a rectangular wooden board in the ruins of an ancient city. The board is divided into a grid, and each grid cell appears to have been engraved originally with one of the letters 'C', 'I', and 'P'. However, due to decay over time, some of the letters are now indistinguishable.\n\nDuring your investigation, you made the following hypothesis: any square of $2 \\times 2$ cells on the board originally had two 'C's, one 'I', and one 'P'.\n\nYou now want to check whether this hypothesis is consistent with the discovered board. If it is, show one possibility of the original arrangement of the letters that aligns with the hypothesis.", "inputFormat": "The input contains one or more test cases. The first line of the input contains an integer $t$ ($1 \\le t \\le 500$), which is the number of test cases. The descriptions of the $t$ test cases follow, each in the following format.\n\n$$\nn\\ m\n$$\n$$\nc_{1,1}\\ c_{1,2}\\ \\cdots\\ c_{1,m}\n$$\n$$\nc_{2,1}\\ c_{2,2}\\ \\cdots\\ c_{2,m}\n$$\n$$\n\\vdots\n$$\n$$\nc_{n,1}\\ c_{n,2}\\ \\cdots\\ c_{n,m}\n$$\n\nThe first line of a test case contains two integers $n$ and $m$ ($2 \\le n \\le 1000$, $2 \\le m \\le 1000$). They represent the number of rows and columns of the board, respectively. The next $n$ lines, each containing $m$ characters, describe the discovered board. The $j$-th character of the $i$-th line, $c_{i,j}$, is one of 'C', 'I', 'P', and '?'. If $c_{i,j}$ is 'C', 'I', or 'P', the cell in row $i$ and column $j$ is identifiable as having that letter. If $c_{i,j}$ is '?', the letter in that cell is indistinguishable.\n\nThe sum of $n$'s over all the test cases does not exceed 1000. The same applies to $m$.", "outputFormat": "For each test case, if the hypothesis is not consistent with the discovered board, output $no$ in a single line. Otherwise, output $yes$ in the first line, followed by $n$ lines representing one possibility of the original arrangement of the letters that aligns with the hypothesis. Each of these $n$ lines should contain $m$ characters. The $j$-th character of the $i$-th line should be the letter in the cell in row $i$ and column $j$. If there are multiple possible arrangements, you may output any of them.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 Yokohama R] ICPC Board", "background": "", "description": "As an archaeologist, you have discovered a rectangular wooden board in the ruins of an ancient city. The board is divided into a grid, and each grid cell appears to have been engraved originally with one of the letters 'C', 'I', and 'P'. However, due to decay over time, some of the letters are now indistinguishable.\n\nDuring your investigation, you made the following hypothesis: any square of $2 \\times 2$ cells on the board originally had two 'C's, one 'I', and one 'P'.\n\nYou now want to check whether this hypothesis is consistent with the discovered board. If it is, show one possibility of the original arrangement of the letters that aligns with the hypothesis.", "inputFormat": "The input contains one or more test cases. The first line of the input contains an integer $t$ ($1 \\le t \\le 500$), which is the number of test cases. The descriptions of the $t$ test cases follow, each in the following format.\n\n$$\nn\\ m\n$$\n$$\nc_{1,1}\\ c_{1,2}\\ \\cdots\\ c_{1,m}\n$$\n$$\nc_{2,1}\\ c_{2,2}\\ \\cdots\\ c_{2,m}\n$$\n$$\n\\vdots\n$$\n$$\nc_{n,1}\\ c_{n,2}\\ \\cdots\\ c_{n,m}\n$$\n\nThe first line of a test case contains two integers $n$ and $m$ ($2 \\le n \\le 1000$, $2 \\le m \\le 1000$). They represent the number of rows and columns of the board, respectively. The next $n$ lines, each containing $m$ characters, describe the discovered board. The $j$-th character of the $i$-th line, $c_{i,j}$, is one of 'C', 'I', 'P', and '?'. If $c_{i,j}$ is 'C', 'I', or 'P', the cell in row $i$ and column $j$ is identifiable as having that letter. If $c_{i,j}$ is '?', the letter in that cell is indistinguishable.\n\nThe sum of $n$'s over all the test cases does not exceed 1000. The same applies to $m$.", "outputFormat": "For each test case, if the hypothesis is not consistent with the discovered board, output $no$ in a single line. Otherwise, output $yes$ in the first line, followed by $n$ lines representing one possibility of the original arrangement of the letters that aligns with the hypothesis. Each of these $n$ lines should contain $m$ characters. The $j$-th character of the $i$-th line should be the letter in the cell in row $i$ and column $j$. If there are multiple possible arrangements, you may output any of them.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 Yokohama R] ICPC Board", "background": "", "description": "作为一名考古学家，你在一个古城的遗址中发现了一块长方形的木制板。木板被划分为一个网格，每个网格单元格最初似乎都刻有字母 'C'、'I' 或 'P' 中的一个。然而，由于年代久远，部分字母现已无法辨识。\n\n在你的调查过程中，你提出了以下假设：木板上任何一个 $2 \\times 2$ 的方格原本都包含两个 'C'、一个 'I' 和一个 'P'。\n\n你现在想检验这个假设是否与已发现的木板相符。如果相符，请展示一种符合该假设的原始字母排列的可能性。\n", "inputFormat": "输入包含一个或多个测试用例。输入的第一行包含一个整数 $t$ ($1 \\le t \\le 500$)，表示测试用例的数量。接下来是 $t$ 个测试用例的描述，每个用例的格式如下。\n\n$$\nn\\ m\n$$\n$$\nc_{1,1}\\ c_{1,2}\\ \\cdots\\ c_{1,m}\n$$\n$$\nc_{2,1}\\ c_{2,2}\\ \\cdots\\ c_{2,m}\n$$\n$$\n\\vdots\n$$\n$$\nc_{n,1}\\ c_{n,2}\\ \\cdots\\ c_{n,m}\n$$\n\n一个测试用例的第一行包含两个整数 $n$ 和 $m$ ($2 \\le n \\le 1000$, $2 \\le m \\le 1000$)。它们分别表示木板的行数和列数。接下来的 $n$ 行，每行包含 $m$ 个字符，描述了已发现的木板。第 $i$ 行的第 $j$ 个字符 $c_{i,j}$ 是 'C'、'I'、'P' 或 '?' 中的一个。如果 $c_{i,j}$ 是 'C'、'I' 或 'P'，则表示第 $i$ 行第 $j$ 列的单元格可以识别为刻有该字母。如果 $c_{i,j}$ 是 '?'，则表示该单元格的字母无法辨识。\n\n所有测试用例的 $n$ 之和不超过 $1000$。$m$ 也满足相同条件。", "outputFormat": "对于每个测试用例，如果该假设与已发现的木板不符，则单独输出一行 $no$。否则，第一行输出 $yes$，然后输出 $n$ 行，表示一种符合该假设的原始字母排列的可能性。这 $n$ 行中的每一行应包含 $m$ 个字符。第 $i$ 行的第 $j$ 个字符应为第 $i$ 行第 $j$ 列单元格中的字母。如果有多种可能的排列，你可以输出其中任意一种。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14690", "type": "P", "difficulty": 7, "samples": [["3\n2\nrecommend 1 2\nnot-recommend 1 2\n2\nrecommend 1 2\nrecommend 2 1\n3\nintersection 1 2 2\nrecommend 1 3\nnot-recommend 2 3", "no\nno\nno"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "ICPC", "横浜"], "title": "[ICPC 2025 Yokohama R] Membership Structure of a Secret Society", "background": "", "description": "A secret society with an undisclosed name was established in the year 1899 by a single founder, whose name is also kept secret. Subsequent members have joined the society through recommendations of existing members.\n\nOne unique rule for joining the society has been strictly enforced: Recommendations can be made by one or more existing members, but the same member group can recommend only one new member. For example, if a member was allowed to join upon the recommendation by a group of existing members $\\{A, B, C\\}$, no other persons can be allowed by the same recommender group. It is perfectly acceptable, however, for a group $\\{A, B\\}$ to recommend another new member. Although the set $\\{A, B\\}$ is a subset of $\\{A, B, C\\}$, they are distinct sets. For consistency, the group of recommenders of the founder is considered to be the empty set.\n\nThrough investigation of this secret society, you have obtained several information fragments representing some part of the membership structure of the society. Each information fragment takes one of the following forms of statements, in which the symbols $a$, $b$ and $c$ are integers designating certain members of the society.\n\n- **recommend** $a$ $b$  \n  meaning that the member $a$ belongs to the group that recommended the member $b$ to join.\n\n- **not-recommend** $a$ $b$  \n  meaning that the member $a$ does **not** belong to the group that recommended the member $b$ to join.\n\n- **intersection** $a$ $b$ $c$  \n  meaning that the group of the recommenders of the member $a$ is the set intersection of recommender group of $b$ and that of $c$. In other words, all of those who recommended $a$ also recommended both $b$ and $c$, and all of those who recommended both $b$ and $c$ also recommended $a$.\n\nTwo or more occurrences of the same integer mean the same member, even in different statements. On the other hand, two or more different integers may be aliases of the same person, even in a single statement.\n\nThe obtained information may be partial, that is, the recommendations of some members may be missing, and, moreover, there may be some members not mentioned in any of the statements.\n\nAs the information sources are not necessarily reliable, some false information might have crept in. You would like to know whether these statements are consistent, that is, whether there can be a recommendation relationship consistent with all of these statements.", "inputFormat": "The input contains one or more test cases. The first line of the input contains an integer $t$ ($1 \\le t \\le 3000$), which is the number of test cases. The descriptions of the $t$ test cases follow, each in the following format.\n\n$$\nn\n$$\n$$\ns_1\n$$\n$$\n\\vdots\n$$\n$$\ns_n\n$$\n\nThe first line contains a single integer $n$, the number of statements ($1 \\le n \\le 3000$). Each of the following $n$ lines is in either of the formats \"recommend $a$ $b$\", \"not-recommend $a$ $b$\", or \"intersection $a$ $b$ $c$\", with all of $a$, $b$, and $c$ being integers between 1 and $3n$, inclusive.\n\nThe sum of $n$'s over all the test cases does not exceed 3000.", "outputFormat": "For each test case, output $yes$ in one line if the situation described in the statements is possible, and output $no$, otherwise.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 Yokohama R] Membership Structure of a Secret Society", "background": "", "description": "A secret society with an undisclosed name was established in the year 1899 by a single founder, whose name is also kept secret. Subsequent members have joined the society through recommendations of existing members.\n\nOne unique rule for joining the society has been strictly enforced: Recommendations can be made by one or more existing members, but the same member group can recommend only one new member. For example, if a member was allowed to join upon the recommendation by a group of existing members $\\{A, B, C\\}$, no other persons can be allowed by the same recommender group. It is perfectly acceptable, however, for a group $\\{A, B\\}$ to recommend another new member. Although the set $\\{A, B\\}$ is a subset of $\\{A, B, C\\}$, they are distinct sets. For consistency, the group of recommenders of the founder is considered to be the empty set.\n\nThrough investigation of this secret society, you have obtained several information fragments representing some part of the membership structure of the society. Each information fragment takes one of the following forms of statements, in which the symbols $a$, $b$ and $c$ are integers designating certain members of the society.\n\n- **recommend** $a$ $b$  \n  meaning that the member $a$ belongs to the group that recommended the member $b$ to join.\n\n- **not-recommend** $a$ $b$  \n  meaning that the member $a$ does **not** belong to the group that recommended the member $b$ to join.\n\n- **intersection** $a$ $b$ $c$  \n  meaning that the group of the recommenders of the member $a$ is the set intersection of recommender group of $b$ and that of $c$. In other words, all of those who recommended $a$ also recommended both $b$ and $c$, and all of those who recommended both $b$ and $c$ also recommended $a$.\n\nTwo or more occurrences of the same integer mean the same member, even in different statements. On the other hand, two or more different integers may be aliases of the same person, even in a single statement.\n\nThe obtained information may be partial, that is, the recommendations of some members may be missing, and, moreover, there may be some members not mentioned in any of the statements.\n\nAs the information sources are not necessarily reliable, some false information might have crept in. You would like to know whether these statements are consistent, that is, whether there can be a recommendation relationship consistent with all of these statements.", "inputFormat": "The input contains one or more test cases. The first line of the input contains an integer $t$ ($1 \\le t \\le 3000$), which is the number of test cases. The descriptions of the $t$ test cases follow, each in the following format.\n\n$$\nn\n$$\n$$\ns_1\n$$\n$$\n\\vdots\n$$\n$$\ns_n\n$$\n\nThe first line contains a single integer $n$, the number of statements ($1 \\le n \\le 3000$). Each of the following $n$ lines is in either of the formats \"recommend $a$ $b$\", \"not-recommend $a$ $b$\", or \"intersection $a$ $b$ $c$\", with all of $a$, $b$, and $c$ being integers between 1 and $3n$, inclusive.\n\nThe sum of $n$'s over all the test cases does not exceed 3000.", "outputFormat": "For each test case, output $yes$ in one line if the situation described in the statements is possible, and output $no$, otherwise.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 Yokohama R] Membership Structure of a Secret Society", "background": "", "description": "一个名称未公开的秘密社团成立于 1899 年，由一位创始人所创立，其名字同样保密。后续的成员通过现有成员的推荐加入该社团。\n\n该社团有一条独特的加入规则被严格执行：推荐可以由一个或多个现有成员进行，但同一个成员小组只能推荐一位新成员。例如，如果一名成员因现有成员小组 $\\{A, B, C\\}$ 的推荐而被允许加入，那么其他任何人都不能被同一个推荐人小组允许加入。然而，小组 $\\{A, B\\}$ 推荐另一位新成员是完全允许的。尽管集合 $\\{A, B\\}$ 是 $\\{A, B, C\\}$ 的子集，但它们是不同的集合。为保持一致性，创始人的推荐人小组被视为空集。\n\n通过对这个秘密社团的调查，你获得了若干信息片段，它们代表了社团成员结构的某些部分。每个信息片段采用以下形式的陈述之一，其中符号 $a$、$b$ 和 $c$ 是指定社团中某些成员的整数。\n\n- **recommend** $a$ $b$  \n  表示成员 $a$ 属于推荐成员 $b$ 加入的那个小组。\n\n- **not-recommend** $a$ $b$  \n  表示成员 $a$ **不**属于推荐成员 $b$ 加入的那个小组。\n\n- **intersection** $a$ $b$ $c$  \n  表示成员 $a$ 的推荐人小组是成员 $b$ 的推荐人小组与成员 $c$ 的推荐人小组的交集。换句话说，所有推荐了 $a$ 的人也同时推荐了 $b$ 和 $c$，并且所有同时推荐了 $b$ 和 $c$ 的人也推荐了 $a$。\n\n即使在不同的陈述中，相同的整数也代表同一个成员。另一方面，即使在同一陈述中，不同的整数也可能是同一个人的别名。\n\n获得的信息可能是不完整的，也就是说，某些成员的推荐信息可能缺失，而且可能存在一些在陈述中未被提及的成员。\n\n由于信息来源不一定可靠，可能混入了一些错误信息。你想知道这些陈述是否一致，即是否存在一种推荐关系与所有这些陈述一致。", "inputFormat": "输入包含一个或多个测试用例。输入的第一行包含一个整数 $t$ ($1 \\le t \\le 3000$)，表示测试用例的数量。接下来是 $t$ 个测试用例的描述，每个用例的格式如下。\n\n$$\nn\n$$\n$$\ns_1\n$$\n$$\n\\vdots\n$$\n$$\ns_n\n$$\n\n第一行包含一个整数 $n$，表示陈述的数量 ($1 \\le n \\le 3000$)。接下来的 $n$ 行格式为 \"recommend $a$ $b$\"、\"not-recommend $a$ $b$\" 或 \"intersection $a$ $b$ $c$\" 之一，其中 $a$、$b$ 和 $c$ 均为 $1$ 到 $3n$（含）之间的整数。\n\n所有测试用例的 $n$ 之和不超过 $3000$。", "outputFormat": "对于每个测试用例，如果陈述中描述的情况是可能的，则输出一行 yes；否则输出 no。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14691", "type": "P", "difficulty": 6, "samples": [["4\n90 0\n90 0\n45 0\n135 0\n0 -200\n0 100\n30 0\n150 0\n120 100\n120 75\n30 50\n30 -100\n178 -132\n144 -83\n165 199\n19 31", "0\n86.602540378444\nno\n173.814220263386"]], "limits": {"time": [2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152]}, "tags": ["2025", "Special Judge", "ICPC", "横浜"], "title": "[ICPC 2025 Yokohama R] Common Tangent Lines", "background": "", "description": "It is well known that two disks on a plane have four distinct common tangent lines when they are disjoint (neither overlapping nor touching).\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/t3qpawuy.png)\n:::\n\nYou are given four lines on the $xy$-plane. Your objective is to apply parallel translations to these lines so that they become four distinct common tangent lines of some pair of disjoint disks with positive radii. You want to do this with a $cost$ as low as possible, where the cost is defined as the sum of the translation distances. The translation distance for a line is the distance between the lines before and after the translation.\n\nEach line is specified by two parameters, $a$ and $d$, and is defined by\n$$\nx \\cos\\left(\\frac{\\pi a}{180}\\right) + y \\sin\\left(\\frac{\\pi a}{180}\\right) = d.\n$$\nFor example, the line with $(a, d) = (60, 1)$ represents $x/2 + \\sqrt{3}y/2 = 1$, since $\\cos(\\pi/3) = 1/2$ and $\\sin(\\pi/3) = \\sqrt{3}/2$.\n\nFirst, determine whether the objective is achievable. If it is, determine the **minimum required cost**, defined as follows: the minimum value $c$ such that the objective is achievable with a cost at most $c + \\varepsilon$ for any positive real $\\varepsilon$. The objective does not have to be achievable with the cost exactly equal to $c$.", "inputFormat": "The input contains one or more test cases. The first line of the input contains an integer $t$ ($1 \\le t \\le 1000$), which is the number of test cases. The descriptions of the $t$ test cases follow, each in the following format.\n\n$$\na_1\\ d_1\n$$\n$$\n\\vdots\n$$\n$$\na_4\\ d_4\n$$\n\nFor $i = 1, \\ldots, 4$, two integers $a_i$ and $d_i$ are the parameters that specify the $i$-th line ($0 \\le a_i < 180$, $-1000 \\le d_i \\le 1000$). Two or more lines may be identical before translations.\n", "outputFormat": "For each test case, if the objective is not achievable, output $no$ in a line. Otherwise, output the minimum required cost described above in a line. The absolute or relative error of the output must be less than or equal to $10^{-7}$.", "hint": "In the first test case of Sample Input 1, you have to move at least one of the first two identical lines (Figure L.1 (a)). For $\\varepsilon > 0$, translating one line by $\\varepsilon/2$ in the positive $y$-direction and the other by $\\varepsilon/2$ in the negative $y$-direction achieves the objective with cost $\\varepsilon$. This results in four tangent lines for disks with radii $\\varepsilon/2$ (Figure L.1 (b)). Since $\\varepsilon$ can be arbitrarily small, the minimum required cost is $0$. The remaining cases are illustrated in Figures L.1 (c) to (e).\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/y7dgbtdr.png)\n\nFigure L.1. Illustration of Sample Input 1\n:::", "locale": "en", "translations": {"en": {"title": "[ICPC 2025 Yokohama R] Common Tangent Lines", "background": "", "description": "It is well known that two disks on a plane have four distinct common tangent lines when they are disjoint (neither overlapping nor touching).\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/t3qpawuy.png)\n:::\n\nYou are given four lines on the $xy$-plane. Your objective is to apply parallel translations to these lines so that they become four distinct common tangent lines of some pair of disjoint disks with positive radii. You want to do this with a $cost$ as low as possible, where the cost is defined as the sum of the translation distances. The translation distance for a line is the distance between the lines before and after the translation.\n\nEach line is specified by two parameters, $a$ and $d$, and is defined by\n$$\nx \\cos\\left(\\frac{\\pi a}{180}\\right) + y \\sin\\left(\\frac{\\pi a}{180}\\right) = d.\n$$\nFor example, the line with $(a, d) = (60, 1)$ represents $x/2 + \\sqrt{3}y/2 = 1$, since $\\cos(\\pi/3) = 1/2$ and $\\sin(\\pi/3) = \\sqrt{3}/2$.\n\nFirst, determine whether the objective is achievable. If it is, determine the **minimum required cost**, defined as follows: the minimum value $c$ such that the objective is achievable with a cost at most $c + \\varepsilon$ for any positive real $\\varepsilon$. The objective does not have to be achievable with the cost exactly equal to $c$.", "inputFormat": "The input contains one or more test cases. The first line of the input contains an integer $t$ ($1 \\le t \\le 1000$), which is the number of test cases. The descriptions of the $t$ test cases follow, each in the following format.\n\n$$\na_1\\ d_1\n$$\n$$\n\\vdots\n$$\n$$\na_4\\ d_4\n$$\n\nFor $i = 1, \\ldots, 4$, two integers $a_i$ and $d_i$ are the parameters that specify the $i$-th line ($0 \\le a_i < 180$, $-1000 \\le d_i \\le 1000$). Two or more lines may be identical before translations.\n", "outputFormat": "For each test case, if the objective is not achievable, output $no$ in a line. Otherwise, output the minimum required cost described above in a line. The absolute or relative error of the output must be less than or equal to $10^{-7}$.", "hint": "In the first test case of Sample Input 1, you have to move at least one of the first two identical lines (Figure L.1 (a)). For $\\varepsilon > 0$, translating one line by $\\varepsilon/2$ in the positive $y$-direction and the other by $\\varepsilon/2$ in the negative $y$-direction achieves the objective with cost $\\varepsilon$. This results in four tangent lines for disks with radii $\\varepsilon/2$ (Figure L.1 (b)). Since $\\varepsilon$ can be arbitrarily small, the minimum required cost is $0$. The remaining cases are illustrated in Figures L.1 (c) to (e).\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/y7dgbtdr.png)\n\nFigure L.1. Illustration of Sample Input 1\n:::", "locale": "en"}, "zh-CN": {"title": "[ICPC 2025 Yokohama R] Common Tangent Lines", "background": "", "description": "众所周知，平面上两个不相交（既不重叠也不相切）的圆有 **四条不同的公切线**。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/t3qpawuy.png)\n:::\n\n给定 $xy$ 平面上的四条直线。你的目标是：对这些直线施加**平行移动**，使得它们成为**某对半径为正且不相交的圆**的四条不同的公切线。你希望以尽可能低的 **成本** 完成此操作，其中成本定义为平移距离的总和。一条直线的平移距离是其平移前后两直线之间的距离。\n\n每条直线由两个参数 $a$ 和 $d$ 指定，并由以下方程定义：\n$$\nx \\cos\\left(\\frac{\\pi a}{180}\\right) + y \\sin\\left(\\frac{\\pi a}{180}\\right) = d.\n$$\n例如，参数为 $(a, d) = (60, 1)$ 的直线代表 $x/2 + \\sqrt{3}y/2 = 1$，因为 $\\cos(\\pi/3) = 1/2$ 且 $\\sin(\\pi/3) = \\sqrt{3}/2$。\n\n首先，判断目标是否可达。如果可达，确定 **最小所需成本**，其定义如下：最小的值 $c$，使得对于任意正实数 $\\varepsilon$，都能以不超过 $c + \\varepsilon$ 的成本实现目标。目标不必以恰好等于 $c$ 的成本实现。", "inputFormat": "输入包含一个或多个测试用例。输入的第一行包含一个整数 $t$ ($1 \\le t \\le 1000$)，表示测试用例的数量。接下来是 $t$ 个测试用例的描述，每个用例的格式如下。\n\n$$\na_1\\ d_1\n$$\n$$\n\\vdots\n$$\n$$\na_4\\ d_4\n$$\n\n对于 $i = 1, \\ldots, 4$，两个整数 $a_i$ 和 $d_i$ 是用于指定第 $i$ 条直线的参数 ($0 \\le a_i < 180$， $-1000 \\le d_i \\le 1000$)。在平移之前，两条或多条直线可能相同。\n", "outputFormat": "对于每个测试用例，如果目标不可达，则输出一行 $no$。否则，输出一行上述定义的最小所需成本。输出的绝对或相对误差必须小于等于 $10^{-7}$。", "hint": "在样例输入 1 的第一个测试用例中，你至少需要移动前两条相同的直线之一（图 L.1 (a)）。对于任意 $\\varepsilon > 0$，将其中一条直线沿 $y$ 轴正方向平移 $\\varepsilon/2$，另一条沿 $y$ 轴负方向平移 $\\varepsilon/2$，即可在成本为 $\\varepsilon$ 的情况下实现目标。这将产生半径为 $\\varepsilon/2$ 的圆的四条公切线（图 L.1 (b)）。由于 $\\varepsilon$ 可以任意小，最小所需成本为 $0$。其余情况如图 L.1 (c) 至 (e) 所示。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/y7dgbtdr.png)\n\n图 L.1. 样例输入 1 图示\n:::\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14692", "type": "P", "difficulty": 1, "samples": [["150\n200\n95\n130", "Pomegranates"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "ICPC"], "title": "[ICPC 2024 Tehran R] Yalda", "background": "", "description": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6aq5uws.png)\n:::\n\n**Yalda** is an ancient Persian celebration that marks the longest night of the year, corresponding to the winter solstice. The word Yalda originates from the Syriac language and means **birth**, signifying the rebirth of the sun as days gradually grow longer after the solstice.\n\nOn Yalda night, Iranian families come together to spend the night sharing stories, reading poetry (especially works of Persian poets like Hafez), and enjoying each other's company. The celebration is accompanied by traditional items, including:\n\n- **Watermelon**: Representing the warmth of summer and warding off winter's chill.\n- **Pomegranates**: Symbolizing the cycle of life and prosperity.\n- **Nuts**: A treat that embodies abundance and blessings.\n\nMahya, busy organizing the ICPC regional contest, has missed celebrating Yalda night with her family. However, she doesn't want to miss out entirely and plans to celebrate with her friends at the university. To make the gathering more festive, Mahya wants to buy **exactly one** traditional item for the celebration. Due to her limited budget, she needs to carefully decide which item to buy.\n\nThe items should be selected based on their price and her preferences. Watermelon is the first choice, pomegranates are the second choice, and nuts are the third choice. If Mahya's budget does not allow her to buy any of the items, she will skip the purchase entirely.", "inputFormat": "The input consists of the following:\n\n- The first line contains an integer $ b $ ($ 0 \\leq b \\leq 10^6 $), representing Mahya's budget in Rials.\n- The next three lines contain the prices of watermelon, pomegranates, and nuts, respectively, each as a non-negative integer not exceeding $ 10^6 $.", "outputFormat": "Print the name of the first item Mahya can afford from her preference list: \"Watermelon\", \"Pomegranates\", or \"Nuts\". If her budget is not sufficient for any of the items, output \"Nothing\".", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Tehran R] Yalda", "background": "", "description": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6aq5uws.png)\n:::\n\n**Yalda** is an ancient Persian celebration that marks the longest night of the year, corresponding to the winter solstice. The word Yalda originates from the Syriac language and means **birth**, signifying the rebirth of the sun as days gradually grow longer after the solstice.\n\nOn Yalda night, Iranian families come together to spend the night sharing stories, reading poetry (especially works of Persian poets like Hafez), and enjoying each other's company. The celebration is accompanied by traditional items, including:\n\n- **Watermelon**: Representing the warmth of summer and warding off winter's chill.\n- **Pomegranates**: Symbolizing the cycle of life and prosperity.\n- **Nuts**: A treat that embodies abundance and blessings.\n\nMahya, busy organizing the ICPC regional contest, has missed celebrating Yalda night with her family. However, she doesn't want to miss out entirely and plans to celebrate with her friends at the university. To make the gathering more festive, Mahya wants to buy **exactly one** traditional item for the celebration. Due to her limited budget, she needs to carefully decide which item to buy.\n\nThe items should be selected based on their price and her preferences. Watermelon is the first choice, pomegranates are the second choice, and nuts are the third choice. If Mahya's budget does not allow her to buy any of the items, she will skip the purchase entirely.", "inputFormat": "The input consists of the following:\n\n- The first line contains an integer $ b $ ($ 0 \\leq b \\leq 10^6 $), representing Mahya's budget in Rials.\n- The next three lines contain the prices of watermelon, pomegranates, and nuts, respectively, each as a non-negative integer not exceeding $ 10^6 $.", "outputFormat": "Print the name of the first item Mahya can afford from her preference list: \"Watermelon\", \"Pomegranates\", or \"Nuts\". If her budget is not sufficient for any of the items, output \"Nothing\".", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Tehran R] Yalda", "background": "", "description": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6aq5uws.png)\n:::\n\n**雅尔达节** 是一个古老的波斯庆典，标志着一年中最长的夜晚，对应于冬至。雅尔达一词起源于叙利亚语，意为 **诞生**，象征着冬至后白昼渐长，太阳的重生。\n\n在雅尔达之夜，伊朗家庭会聚在一起，通宵分享故事、朗诵诗歌（尤其是哈菲兹等波斯诗人的作品），并享受彼此的陪伴。庆典伴随着传统物品，包括：\n\n- **西瓜**：代表夏日的温暖，驱散冬日的寒冷。\n- **石榴**：象征生命的循环与繁荣。\n- **坚果**：一种体现丰饶与祝福的美食。\n\n忙于组织 ICPC 区域赛的 Mahya 错过了与家人共度雅尔达之夜。然而，她不想完全错过，计划与大学的朋友们一起庆祝。为了让聚会更有节日气氛，Mahya 想为庆祝活动购买**恰好一样**传统物品。由于预算有限，她需要仔细决定购买哪样物品。\n\n物品应根据其价格和她的喜好来选择。西瓜是第一选择，石榴是第二选择，坚果是第三选择。如果 Mahya 的预算不足以购买任何物品，她将完全放弃购买。", "inputFormat": "输入包含以下内容：\n\n- 第一行包含一个整数 $b$ ($0 \\leq b \\leq 10^6$)，表示 Mahya 的预算，单位为里亚尔。\n- 接下来的三行分别包含西瓜、石榴和坚果的价格，每个价格均为不超过 $10^6$ 的非负整数。", "outputFormat": "输出 Mahya 根据其偏好列表能够负担得起的第一个物品的名称：\"Watermelon\"、\"Pomegranates\" 或 \"Nuts\"。如果她的预算不足以购买任何物品，则输出 \"Nothing\"。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14693", "type": "P", "difficulty": 2, "samples": [["3\n500 10 0\n200 190 15\n10000 150 20", "5,000\n44,500\n1,700,000"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152]}, "tags": ["模拟", "2024", "ICPC"], "title": "[ICPC 2024 Tehran R] Divar' s Salaries", "background": "", "description": "Amin works in the financial department of Divar company. As part of his responsibilities, he needs to prepare the salary payment list for the company's employees. The salary of each employee is calculated based on a base hourly rate of $ x $ Rials. However, the actual pay rate varies depending on the type of working hours:\n\n- **Normal Working Hours**: Paid at the standard rate of $ x $ Rials per hour.\n- **Overtime Hours**: Any hours worked beyond the standard 140 hours per month are compensated at 1.5 times the base rate.\n- **Holiday Hours**: Hours worked on recognized holidays are paid at twice the base rate, regardless of whether they fall within or beyond the standard 140 hours.\n\nHoliday hours always take precedence, and employees are compensated at the doubled rate for these hours, irrespective of the standard working hour limits.\n\nAmin's task is to calculate the total monthly salary for each employee, taking into account their normal hours, overtime hours, and holiday hours. Help Amin determine the payment for all the employees in the company.\n", "inputFormat": "The first line of input contains a single integer $ n $ ($ 1 \\leq n \\leq 1000 $), representing the number of employees in the company. The following $ n $ lines each provide three integers $ x $, $ k $ and $ h $, which describe the details for each employee:\n\n- $ x $ ($ 100 \\leq x \\leq 10^6 $): The hourly wage in Rials, which is always a multiple of 10.\n- $ k $ ($ 0 \\leq k \\leq 480 $): The total number of hours worked during the current month.\n- $ h $ ($ 0 \\leq h \\leq k $): The number of holiday hours worked.", "outputFormat": "In the output, print the total monthly payment for each employee on a separate line. The payment must be formatted with commas separating every three digits, starting from the right.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Tehran R] Divar' s Salaries", "background": "", "description": "Amin works in the financial department of Divar company. As part of his responsibilities, he needs to prepare the salary payment list for the company's employees. The salary of each employee is calculated based on a base hourly rate of $ x $ Rials. However, the actual pay rate varies depending on the type of working hours:\n\n- **Normal Working Hours**: Paid at the standard rate of $ x $ Rials per hour.\n- **Overtime Hours**: Any hours worked beyond the standard 140 hours per month are compensated at 1.5 times the base rate.\n- **Holiday Hours**: Hours worked on recognized holidays are paid at twice the base rate, regardless of whether they fall within or beyond the standard 140 hours.\n\nHoliday hours always take precedence, and employees are compensated at the doubled rate for these hours, irrespective of the standard working hour limits.\n\nAmin's task is to calculate the total monthly salary for each employee, taking into account their normal hours, overtime hours, and holiday hours. Help Amin determine the payment for all the employees in the company.\n", "inputFormat": "The first line of input contains a single integer $ n $ ($ 1 \\leq n \\leq 1000 $), representing the number of employees in the company. The following $ n $ lines each provide three integers $ x $, $ k $ and $ h $, which describe the details for each employee:\n\n- $ x $ ($ 100 \\leq x \\leq 10^6 $): The hourly wage in Rials, which is always a multiple of 10.\n- $ k $ ($ 0 \\leq k \\leq 480 $): The total number of hours worked during the current month.\n- $ h $ ($ 0 \\leq h \\leq k $): The number of holiday hours worked.", "outputFormat": "In the output, print the total monthly payment for each employee on a separate line. The payment must be formatted with commas separating every three digits, starting from the right.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Tehran R] Divar' s Salaries", "background": "", "description": "Amin 在 Divar 公司的财务部门工作。作为职责的一部分，他需要准备公司员工的工资支付清单。每位员工的工资基于 $x$ 里亚尔的时薪基础费率计算。然而，实际支付费率取决于工作时间的类型：\n\n- **正常工作时间**：按标准费率 $x$ 里亚尔/小时支付。\n- **加班时间**：每月超过标准 $140$ 小时的任何工作小时，按基础费率的 $1.5$ 倍补偿。\n- **节假日工作时间**：在法定节假日工作的小时，按基础费率的 $2$ 倍支付，无论这些小时是否在标准 $140$ 小时之内。\n\n节假日工作时间始终优先，员工在这些小时的补偿均按双倍费率计算，不受标准工作小时限制的影响。\n\nAmin 的任务是计算每位员工的月总工资，需要考虑其正常工作时间、加班时间和节假日工作时间。请帮助 Amin 确定公司所有员工的支付金额。", "inputFormat": "输入的第一行包含一个整数 $n$ ($1 \\leq n \\leq 1000$)，代表公司员工的数量。接下来的 $n$ 行每行提供三个整数 $x$、$k$ 和 $h$，用于描述每位员工的详细信息：\n\n- $x$ ($100 \\leq x \\leq 10^6$)：每小时工资，单位为里亚尔，且总是 $10$ 的倍数。\n- $k$ ($0 \\leq k \\leq 480$)：当月工作总小时数。\n- $h$ ($0 \\leq h \\leq k$)：节假日工作小时数。", "outputFormat": "在输出中，每行打印一位员工的月总支付金额。金额格式必须用逗号分隔，从右侧开始每三位数字用一个逗号分隔。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14694", "type": "P", "difficulty": 3, "samples": [["11\nThe (International Collegiate Programming\nContest) \\(`ICPC`\\) is\n a global [competi\ntive programming contest\n]\n focusing on algorithm\nic problem-solving and teamwork. [Le\nt's] test `some` (more) Darkdown (elemen\nts) here. Visit the Of\nficial ICPC Website\\: \\(https\\://i\ncpc.global\\) for more info! :rocket:\n10 20 30 40 50 60 70 80 90 100 110", "10"], ["2\nl ML5g( RsXFVBdO R)(`gwkz MV\n`)\n10 1000", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["模拟", "字符串", "2024", "ICPC", "分类讨论"], "title": "[ICPC 2024 Tehran R] GPT DarkDown", "background": "", "description": "Mahdieh is a developer working on a chatbot for Divar's open platform (Kenar Divar). She wants to use ChatGPT's API for her chatbot. This means the chatbot receives messages from ChatGPT and forwards them to the user. When the chatbot asks ChatGPT to generate a message, ChatGPT sends the message in chunks to the chatbot. So for each chunk, there is a time when Mahdieh's chatbot receives it, and there is a string it contains.\n\nFor a smooth user experience, Mahdieh wants her chatbot to simulate continuous typing, outputting 1 character per millisecond. Obviously, no character can be typed before it is received, so Mahdieh must ensure that the current typing character is available for her chatbot before typing it. To make the perfect smooth user experience she wants to see in her chatbot, the chatbot waits for a while without typing anything, and then starts typing non-stop. Now Mahdieh has all the chunks' information from a hypothetical message, and she needs your help to tell her the first time the chatbot can start to type.\n\nHowever, ChatGPT (and therefore Mahdieh's chatbot) applies **Darkdown** formatting to the chunks of text, which includes **bold**, *italic*, `inline code`, and even emojis! 😊\n\nSo, there are formatting characters in the received message from ChatGPT that will not be rendered in the final text. You need to determine only the (visible) rendered content for smooth typing. For example, the Darkdown text \"[Let's] (Code!) :rocket:\" consists of 24 characters, but its rendered text is only 13 characters long: \"*Let's* **Code!** 🚀\".\n\nYour task is to determine the earliest time Mahdieh can start typing the rendered output for a smooth experience.", "inputFormat": "The input starts with a line containing a single integer $ k $, as the number of chunks ($ 1 \\leq k \\leq 10^5 $). The next $ k $ lines contain the complete input message, where every line represents a non-empty chunk. You can assume the ChatGPT message does not contain newline characters, and the chunks could start or end with spaces. It is guaranteed that the total number of characters in all the chunks combined will not exceed $ 10^5 $, and the final rendered message will not be empty. The last line contains $ k $ space-separated integers, $ t_1, t_2, \\ldots, t_k $, where $ t_i $ is the time the chatbot receives the $ i $-th chunk from ChatGPT ($ 1 \\leq t_1 < t_2 < \\cdots < t_k \\leq 10^9 $).\n\nThe ChatGPT message has the following **Darkdown** formatting:\n\n- **Inline Code Blocks**:\n  - Inline code is given inside a pair of backtick characters, e.g. `code`. The backtick characters themselves are not rendered in the final output. You can assume there is no backtick characters inside the inline code.\n  - Formatting markers inside inline code blocks (like `(` or `\\`) are rendered as literal characters and are not parsed as formatting.\n\n- **Special Characters**:\n  - In order to render the special characters (`(`, `)`, `[`, `]`, `:`, `\\`, `` ` ``), it is sufficient to escape them by preceding them with a backslash character (e.g. `\\(`, `\\)`, `\\[`, `\\]`, `\\:`, `\\\\`, ``\\``).\n\n- Double backslashes (\\\\\\\\) are rendered as a single literal backslash in the visible output.\n- It is guaranteed that every backslash in the input is followed by a special character, except in inline codes and after an escaped backslash (\\\\).\n\n- **Bold and Italic Formatting**:\n  - Bold formatting can be applied by enclosing the text with parentheses: (bold).\n  - Italic formatting can be applied by enclosing the text with square brackets: [italic].\n  - It is not permitted to have nested blocks of bold or italic text. Also, a block of text cannot be simultaneously bold and italic. For example, it is not allowed to have [(bold and italic) italic] or ((superbold) bold).\n  - Inline codes or emojis are allowed inside a bold or italic text.\n\n- **Emojis**:\n  - An emoji is given as a non-empty string of lowercase English letters enclosed within a pair of colons (e.g. ::smile:, ::rocket:).\n\n- **Punctuation and Spaces**:\n  - All standard punctuation marks (., ,, !, ?, ', -, /) and space characters are rendered normally.\n\nIt is guaranteed that the input adheres strictly to the Darkdown formatting rules described above, and the final rendered text is unique.\n\nIn order to find the answer, you have to consider only the visible (rendered) characters, which include:\n\n- **Plain text**: All letters, numbers, spaces, escaped special characters, and standard punctuation marks not part of any formatting.\n- **Emojis**: Represented as a single conceptual character. For example, ::smile:: is rendered as 😊. Note that the conceptual character for an emoji is ready for typing when the chatbot has received its ending colon (:).\n- **Inline Code**: The content inside backtick characters.\n", "outputFormat": "Output the earliest time Mahdieh's chatbot can start typing the message such that the chatbot prints the whole text smoothly.", "hint": "For better understanding, these are the final visible rendered messages of the example inputs:\n\n**Sample 1**:\n\nThe **International Collegiate Programming Contest** (`ICPC`) is a global *competitive programming* contest focusing on algorithmic problem-solving and teamwork. *Let's* test `some` **more** Darkdown *elements* here. Visit the Official ICPC Website: (https://icpc.global) for more info! 🚀\n\n**Sample 2**:\n\n1 ML5g **RsXFVBdO R**`gwkz MV`", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Tehran R] GPT DarkDown", "background": "", "description": "Mahdieh is a developer working on a chatbot for Divar's open platform (Kenar Divar). She wants to use ChatGPT's API for her chatbot. This means the chatbot receives messages from ChatGPT and forwards them to the user. When the chatbot asks ChatGPT to generate a message, ChatGPT sends the message in chunks to the chatbot. So for each chunk, there is a time when Mahdieh's chatbot receives it, and there is a string it contains.\n\nFor a smooth user experience, Mahdieh wants her chatbot to simulate continuous typing, outputting 1 character per millisecond. Obviously, no character can be typed before it is received, so Mahdieh must ensure that the current typing character is available for her chatbot before typing it. To make the perfect smooth user experience she wants to see in her chatbot, the chatbot waits for a while without typing anything, and then starts typing non-stop. Now Mahdieh has all the chunks' information from a hypothetical message, and she needs your help to tell her the first time the chatbot can start to type.\n\nHowever, ChatGPT (and therefore Mahdieh's chatbot) applies **Darkdown** formatting to the chunks of text, which includes **bold**, *italic*, `inline code`, and even emojis! 😊\n\nSo, there are formatting characters in the received message from ChatGPT that will not be rendered in the final text. You need to determine only the (visible) rendered content for smooth typing. For example, the Darkdown text \"[Let's] (Code!) :rocket:\" consists of 24 characters, but its rendered text is only 13 characters long: \"*Let's* **Code!** 🚀\".\n\nYour task is to determine the earliest time Mahdieh can start typing the rendered output for a smooth experience.", "inputFormat": "The input starts with a line containing a single integer $ k $, as the number of chunks ($ 1 \\leq k \\leq 10^5 $). The next $ k $ lines contain the complete input message, where every line represents a non-empty chunk. You can assume the ChatGPT message does not contain newline characters, and the chunks could start or end with spaces. It is guaranteed that the total number of characters in all the chunks combined will not exceed $ 10^5 $, and the final rendered message will not be empty. The last line contains $ k $ space-separated integers, $ t_1, t_2, \\ldots, t_k $, where $ t_i $ is the time the chatbot receives the $ i $-th chunk from ChatGPT ($ 1 \\leq t_1 < t_2 < \\cdots < t_k \\leq 10^9 $).\n\nThe ChatGPT message has the following **Darkdown** formatting:\n\n- **Inline Code Blocks**:\n  - Inline code is given inside a pair of backtick characters, e.g. `code`. The backtick characters themselves are not rendered in the final output. You can assume there is no backtick characters inside the inline code.\n  - Formatting markers inside inline code blocks (like `(` or `\\`) are rendered as literal characters and are not parsed as formatting.\n\n- **Special Characters**:\n  - In order to render the special characters (`(`, `)`, `[`, `]`, `:`, `\\`, `` ` ``), it is sufficient to escape them by preceding them with a backslash character (e.g. `\\(`, `\\)`, `\\[`, `\\]`, `\\:`, `\\\\`, ``\\``).\n\n- Double backslashes (\\\\\\\\) are rendered as a single literal backslash in the visible output.\n- It is guaranteed that every backslash in the input is followed by a special character, except in inline codes and after an escaped backslash (\\\\).\n\n- **Bold and Italic Formatting**:\n  - Bold formatting can be applied by enclosing the text with parentheses: (bold).\n  - Italic formatting can be applied by enclosing the text with square brackets: [italic].\n  - It is not permitted to have nested blocks of bold or italic text. Also, a block of text cannot be simultaneously bold and italic. For example, it is not allowed to have [(bold and italic) italic] or ((superbold) bold).\n  - Inline codes or emojis are allowed inside a bold or italic text.\n\n- **Emojis**:\n  - An emoji is given as a non-empty string of lowercase English letters enclosed within a pair of colons (e.g. ::smile:, ::rocket:).\n\n- **Punctuation and Spaces**:\n  - All standard punctuation marks (., ,, !, ?, ', -, /) and space characters are rendered normally.\n\nIt is guaranteed that the input adheres strictly to the Darkdown formatting rules described above, and the final rendered text is unique.\n\nIn order to find the answer, you have to consider only the visible (rendered) characters, which include:\n\n- **Plain text**: All letters, numbers, spaces, escaped special characters, and standard punctuation marks not part of any formatting.\n- **Emojis**: Represented as a single conceptual character. For example, ::smile:: is rendered as 😊. Note that the conceptual character for an emoji is ready for typing when the chatbot has received its ending colon (:).\n- **Inline Code**: The content inside backtick characters.\n", "outputFormat": "Output the earliest time Mahdieh's chatbot can start typing the message such that the chatbot prints the whole text smoothly.", "hint": "For better understanding, these are the final visible rendered messages of the example inputs:\n\n**Sample 1**:\n\nThe **International Collegiate Programming Contest** (`ICPC`) is a global *competitive programming* contest focusing on algorithmic problem-solving and teamwork. *Let's* test `some` **more** Darkdown *elements* here. Visit the Official ICPC Website: (https://icpc.global) for more info! 🚀\n\n**Sample 2**:\n\n1 ML5g **RsXFVBdO R**`gwkz MV`", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Tehran R] GPT DarkDown", "background": "", "description": "Mahdieh 是一名开发人员，正在为 Divar 的开放平台 (Kenar Divar) 开发一个聊天机器人。她想在自己的聊天机器人中使用 ChatGPT 的 API。这意味着聊天机器人从 ChatGPT 接收消息，并将其转发给用户。当聊天机器人要求 ChatGPT 生成一条消息时，ChatGPT 会将消息分块发送给聊天机器人。因此，对于每个数据块，都有聊天机器人接收它的时间以及它包含的字符串。\n\n为了提供流畅的用户体验，Mahdieh 希望她的聊天机器人模拟连续打字的效果，每毫秒输出 1 个字符。显然，任何字符都不能在收到之前被输出，因此 Mahdieh 必须确保聊天机器人在输出当前字符之前已经收到了该字符。为了实现她期望的完美流畅用户体验，聊天机器人会等待一段时间而不输出任何内容，然后开始不间断地输出。现在，Mahdieh 拥有一条假设消息的所有数据块信息，她需要你的帮助来告诉她聊天机器人可以开始输出的最早时间。\n\n然而，ChatGPT（因此也包括 Mahdieh 的聊天机器人）对文本块应用了 **Darkdown** 格式化，包括**粗体**、*斜体*、`行内代码`，甚至表情符号！😊\n\n因此，从 ChatGPT 接收的消息中包含的格式化字符不会在最终文本中渲染。你只需要为流畅输出确定（可见的）渲染后的内容。例如，Darkdown 文本 \"[Let's] (Code!) :rocket:\" 由 $24$ 个字符组成，但其渲染后的文本只有 $13$ 个字符长：\"*Let's* **Code!** 🚀\"。\n\n你的任务是确定 Mahdieh 为了流畅体验可以开始输出渲染后内容的最早时间。", "inputFormat": "输入的第一行包含一个整数 $k$，表示数据块的数量 ($1 \\leq k \\leq 10^5$)。接下来的 $k$ 行包含完整的输入消息，其中每一行代表一个非空的数据块。你可以假设 ChatGPT 消息不包含换行符，且数据块可能以空格开头或结尾。保证所有数据块的总字符数不超过 $10^5$，且最终渲染后的消息不为空。最后一行包含 $k$ 个用空格分隔的整数 $t_1, t_2, \\ldots, t_k$，其中 $t_i$ 是聊天机器人从 ChatGPT 接收到第 $i$ 个数据块的时间 ($1 \\leq t_1 < t_2 < \\cdots < t_k \\leq 10^9$)。\n\nChatGPT 消息采用以下 **Darkdown** 格式化规则：\n\n- **行内代码块**：\n  - 行内代码由一对反引号字符包裹，例如 `code`。反引号字符本身不会在最终输出中渲染。你可以假设行内代码内部没有反引号字符。\n  - 行内代码块内的格式化标记（如 `(` 或 `\\`）会被渲染为字面字符，不会被解析为格式化。\n\n- **特殊字符**：\n  - 为了渲染特殊字符 (`(`, `)`, `[`, `]`, `:`, `\\`, `` ` ``)，只需在其前面加上反斜杠字符进行转义（例如 `\\(`, `\\)`, `\\[`, `\\]`, `\\:`, `\\\\`, ``\\``）。\n\n- 双反斜杠 (\\\\\\\\\\\\\\\\) 在可见输出中被渲染为单个字面反斜杠。\n- 保证输入中的每个反斜杠（除了行内代码内以及转义反斜杠之后的情况）后面都跟着一个特殊字符。\n\n- **粗体和斜体格式化**：\n  - 粗体格式化可通过将文本用括号包裹来实现：(粗体)。\n  - 斜体格式化可通过将文本用方括号包裹来实现：[斜体]。\n  - 不允许粗体或斜体文本块嵌套。同时，一个文本块不能同时是粗体和斜体。例如，不允许出现 [(粗体且斜体) 斜体] 或 ((超级粗体) 粗体)。\n  - 允许在粗体或斜体文本中包含行内代码或表情符号。\n\n- **表情符号**：\n  - 表情符号由一对冒号包裹的小写英文字母非空字符串表示（例如：::smile:, ::rocket:）。\n\n- **标点符号和空格**：\n  - 所有标准标点符号 (., ,, !, ?, ', -, /) 和空格字符都会被正常渲染。\n\n保证输入严格遵守上述 Darkdown 格式化规则，且最终渲染后的文本是唯一的。\n\n为了找到答案，你只需要考虑可见（渲染后）的字符，这些字符包括：\n\n- **纯文本**：所有字母、数字、空格、转义后的特殊字符以及不属于任何格式化的标准标点符号。\n- **表情符号**：被视为一个概念性字符。例如，::smile:: 被渲染为 😊。请注意，表情符号的概念性字符在聊天机器人收到其结束冒号 (:) 时才准备好输出。\n- **行内代码**：反引号字符内的内容。", "outputFormat": "输出 Mahdieh 的聊天机器人可以开始输出消息的最早时间，使得聊天机器人能够流畅地输出整个文本。\n", "hint": "为了更好地理解，以下是样例输入的最终可见渲染消息：\n\n**样例 1**：\n\nThe **International Collegiate Programming Contest** (`ICPC`) is a global *competitive programming* contest focusing on algorithmic problem-solving and teamwork. *Let's* test `some` **more** Darkdown *elements* here. Visit the Official ICPC Website: (https://icpc.global) for more info! 🚀\n\n**样例 2**：\n\n1 ML5g **RsXFVBdO R**`gwkz MV`\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14695", "type": "P", "difficulty": 6, "samples": [["5 8 2\n1 1\n1 5\n5 4\n4 2\n3 4\n1 2\n2 3\n3 4\n4 1\n5 1\n5 2\n5 3\n5 4\n1 2 4 5\n2 3 3 4", "No\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "ICPC"], "title": "[ICPC 2024 Tehran R] Electromagnetic Attacks", "background": "The official time limit of this problem is unknown.", "description": "In Barareh, a Point-to-Point (P2P) wireless network is used to connect base stations for private data services. In a P2P wireless network, each base station uses some directional antennas to connect with the other base stations. If base stations are modeled as points and communication links are modeled as line segments, the P2P network in Barareh surprisingly has some geometric properties. Specifically, the network is a planar graph whose outer boundary is a convex polygon and all interior faces are triangles.\n\nIn the recent world conflicts, an important question has occupied the mind of Khorzukhan, the Minister of Information and Communications Technology (ICT) of Barareh. He wants to know how resilient the network is to electromagnetic attacks. In an electromagnetic attack, noise is created in a certain region (so-called attack region), disrupting all communications passing through that region. The remaining network consists of every base station and every communication link that were strictly outside of the attack region. Specifically, Khorzukhan wants to know if the remaining network remains connected. To achieve this, he has instructed his ministry to simulate multiple electromagnetic attacks separately, testing the network's tolerance to interference and reporting whether the remaining network stays connected after each simulation.", "inputFormat": "The first line of input contains $n$, $m$, and $k$ ($3 \\leq n \\leq 10^5$, $3 \\leq m \\leq 3 \\cdot 10^5$, $1 \\leq k \\leq 10^5$), which are the number of base stations, the number of communication links, and the number of attack simulations, respectively.\n\nIn the next $n$ lines, the $i^{th}$ line contains the $x$ and $y$ coordinates of the $i^{th}$ base station, both of which are non-negative integers ($0 \\leq x, y \\leq 10^9$). It is guaranteed that not all base stations are collinear.\n\nEach of the next $m$ lines represents a communication link. Each line contains two integers $i$ and $j$ ($1 \\leq i, j \\leq n$), representing a communication link as a straight line segment between the $i^{th}$ and $j^{th}$ base station. The $m$ communication links form a planar graph. The outer boundary is a convex polygon and interior faces are all triangles.\n\nAt the end, the attack regions come in $k$ lines. Each attack region is a non-empty rectangle, represented by the coordinates $x_1, y_1, x_2, y_2$ of its lower-left and upper-right corners ($0 \\leq x_1 < x_2 \\leq 10^9$, $0 \\leq y_1 < y_2 \\leq 10^9$). The sides of all rectangles are parallel to the coordinate axes. Note that if a base station or some part (even one point) of a link lies inside the attack region (including the boundary), it is not usable during the attack.\n", "outputFormat": "In $k$ lines, for each attack simulation, print **Yes** if the remaining network resulting from the attack is connected; otherwise print **No**. If all base stations are within the attack region, the remaining network becomes empty and is still considered connected.", "hint": "In the first attack simulation, the first and third base stations are outside the attack region; however, they are not connected to each other.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/dgv9u6cj.png)\n:::", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Tehran R] Electromagnetic Attacks", "background": "The official time limit of this problem is unknown.", "description": "In Barareh, a Point-to-Point (P2P) wireless network is used to connect base stations for private data services. In a P2P wireless network, each base station uses some directional antennas to connect with the other base stations. If base stations are modeled as points and communication links are modeled as line segments, the P2P network in Barareh surprisingly has some geometric properties. Specifically, the network is a planar graph whose outer boundary is a convex polygon and all interior faces are triangles.\n\nIn the recent world conflicts, an important question has occupied the mind of Khorzukhan, the Minister of Information and Communications Technology (ICT) of Barareh. He wants to know how resilient the network is to electromagnetic attacks. In an electromagnetic attack, noise is created in a certain region (so-called attack region), disrupting all communications passing through that region. The remaining network consists of every base station and every communication link that were strictly outside of the attack region. Specifically, Khorzukhan wants to know if the remaining network remains connected. To achieve this, he has instructed his ministry to simulate multiple electromagnetic attacks separately, testing the network's tolerance to interference and reporting whether the remaining network stays connected after each simulation.", "inputFormat": "The first line of input contains $n$, $m$, and $k$ ($3 \\leq n \\leq 10^5$, $3 \\leq m \\leq 3 \\cdot 10^5$, $1 \\leq k \\leq 10^5$), which are the number of base stations, the number of communication links, and the number of attack simulations, respectively.\n\nIn the next $n$ lines, the $i^{th}$ line contains the $x$ and $y$ coordinates of the $i^{th}$ base station, both of which are non-negative integers ($0 \\leq x, y \\leq 10^9$). It is guaranteed that not all base stations are collinear.\n\nEach of the next $m$ lines represents a communication link. Each line contains two integers $i$ and $j$ ($1 \\leq i, j \\leq n$), representing a communication link as a straight line segment between the $i^{th}$ and $j^{th}$ base station. The $m$ communication links form a planar graph. The outer boundary is a convex polygon and interior faces are all triangles.\n\nAt the end, the attack regions come in $k$ lines. Each attack region is a non-empty rectangle, represented by the coordinates $x_1, y_1, x_2, y_2$ of its lower-left and upper-right corners ($0 \\leq x_1 < x_2 \\leq 10^9$, $0 \\leq y_1 < y_2 \\leq 10^9$). The sides of all rectangles are parallel to the coordinate axes. Note that if a base station or some part (even one point) of a link lies inside the attack region (including the boundary), it is not usable during the attack.\n", "outputFormat": "In $k$ lines, for each attack simulation, print **Yes** if the remaining network resulting from the attack is connected; otherwise print **No**. If all base stations are within the attack region, the remaining network becomes empty and is still considered connected.", "hint": "In the first attack simulation, the first and third base stations are outside the attack region; however, they are not connected to each other.\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/dgv9u6cj.png)\n:::", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Tehran R] Electromagnetic Attacks", "background": "本题的官方时限未知。", "description": "在 Barareh，一个点对点（P2P）无线网络被用于连接基站，以提供私有数据服务。在 P2P 无线网络中，每个基站使用一些定向天线来与其他基站连接。如果将基站建模为点，通信链路建模为线段，那么 Barareh 的 P2P 网络出人意料地具有一些几何特性。具体来说，该网络是一个平面图，其外部边界是一个凸多边形，且所有内部面都是三角形。\n\n在近期的世界冲突中，一个重要问题困扰着 Barareh 的信息与通信技术（ICT）部长 Khorzukhan。他想知道该网络对电磁攻击的韧性如何。在一次电磁攻击中，噪声会在某个区域（即攻击区域）产生，从而破坏所有穿过该区域的通信。剩余网络由所有严格位于攻击区域外的基站和通信链路组成。具体来说，Khorzukhan 想知道剩余网络是否保持连通。为此，他已指示其部门分别模拟多次电磁攻击，测试网络对干扰的容忍度，并报告每次模拟后剩余网络是否保持连通。", "inputFormat": "输入的第一行包含 $n$、$m$ 和 $k$ ($3 \\leq n \\leq 10^5$， $3 \\leq m \\leq 3 \\cdot 10^5$， $1 \\leq k \\leq 10^5$)，分别表示基站的数量、通信链路的数量和攻击模拟的次数。\n\n接下来的 $n$ 行中，第 $i$ 行包含第 $i$ 个基站的 $x$ 和 $y$ 坐标，两者均为非负整数 ($0 \\leq x, y \\leq 10^9$)。保证并非所有基站共线。\n\n接下来的 $m$ 行中的每一行代表一条通信链路。每行包含两个整数 $i$ 和 $j$ ($1 \\leq i, j \\leq n$)，表示一条连接第 $i$ 个和第 $j$ 个基站的直线段。这 $m$ 条通信链路构成一个平面图。外部边界是一个凸多边形，且内部面均为三角形。\n\n最后，攻击区域信息在接下来的 $k$ 行中给出。每个攻击区域是一个非空矩形，由其左下角和右上角的坐标 $x_1, y_1, x_2, y_2$ 表示 ($0 \\leq x_1 < x_2 \\leq 10^9$， $0 \\leq y_1 < y_2 \\leq 10^9$)。所有矩形的边都平行于坐标轴。请注意，如果一个基站或一条链路的部分（即使是一个点）位于攻击区域内（包括边界），则在攻击期间该基站或链路不可用。", "outputFormat": "输出 $k$ 行。对于每次攻击模拟，如果攻击导致的剩余网络是连通的，则输出 **Yes**；否则输出 **No**。如果所有基站都位于攻击区域内，剩余网络变为空，但仍被视为连通。", "hint": "在第一次攻击模拟中，第一个和第三个基站在攻击区域外；然而，它们彼此不连通。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/dgv9u6cj.png)\n:::\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14696", "type": "P", "difficulty": 6, "samples": [["5 5 2\n2\n4\n3 2\n5 4", "1 2"], ["10 10 5\n9\n6\n2\n8\n1\n2 3\n5 8\n3 8\n4 8\n1 2", "2 4 5 3 1"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "Special Judge", "ICPC"], "title": "[ICPC 2024 Tehran R] PCB", "background": "", "description": "In designing a printed circuit board (PCB), each consumer must be connected to a power supply via conductive wires. The PCB is a rectangle of width $W$ and height $H$. It is represented as a grid of integer coordinates from $(0,0)$ to $(W+1,H+1)$.\n\nThere are $n$ power supplies along the left edge of the board and $n$ consumers each located somewhere inside the board. The $i^{th}$ power supply is located at position $(0,h_i)$ and the $i^{th}$ consumer is located at position $(x_i,y_i)$. Each power supply must connect to exactly one consumer and vice versa.\n\nEach wire must run along the grid lines, bending at most once. i.e., each wire is either a straight vertical or horizontal line or makes exactly one 90-degree turn, forming an \"L\" shape. Wires cannot cross or overlap with each other anywhere along their paths.\n\nYour task is to determine a matching between power supplies and consumers such that the total length of all wires is minimized.", "inputFormat": "The input consists of several lines:\n\n- The first line contains three integers $W$, $H$ and $n$ ($1 \\leq W,H \\leq 10^8$; $1 \\leq n \\leq 10^6$).\n- Each of the next $n$ lines contains an integer $h_i$ ($1 \\leq h_i \\leq H$).\n- Each of the next $n$ lines contains two integers $x_i$ and $y_i$ ($1 \\leq x_i \\leq W$; $1 \\leq y_i \\leq H$).\n\nIt is guaranteed that each point in the board contains at most one power supply or consumer. Moreover, no two consumers $i$ and $j$ exist where $x_i = x_j$.\n", "outputFormat": "If it is not possible to find such a matching under the given constraints, output a single line containing $-1$.\n\nOtherwise, output a single line containing $n$ space-separated integers. The $i^{th}$ integer describes $p_i$, indicating that power supply $i$ is connected to consumer $p_i$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Tehran R] PCB", "background": "", "description": "In designing a printed circuit board (PCB), each consumer must be connected to a power supply via conductive wires. The PCB is a rectangle of width $W$ and height $H$. It is represented as a grid of integer coordinates from $(0,0)$ to $(W+1,H+1)$.\n\nThere are $n$ power supplies along the left edge of the board and $n$ consumers each located somewhere inside the board. The $i^{th}$ power supply is located at position $(0,h_i)$ and the $i^{th}$ consumer is located at position $(x_i,y_i)$. Each power supply must connect to exactly one consumer and vice versa.\n\nEach wire must run along the grid lines, bending at most once. i.e., each wire is either a straight vertical or horizontal line or makes exactly one 90-degree turn, forming an \"L\" shape. Wires cannot cross or overlap with each other anywhere along their paths.\n\nYour task is to determine a matching between power supplies and consumers such that the total length of all wires is minimized.", "inputFormat": "The input consists of several lines:\n\n- The first line contains three integers $W$, $H$ and $n$ ($1 \\leq W,H \\leq 10^8$; $1 \\leq n \\leq 10^6$).\n- Each of the next $n$ lines contains an integer $h_i$ ($1 \\leq h_i \\leq H$).\n- Each of the next $n$ lines contains two integers $x_i$ and $y_i$ ($1 \\leq x_i \\leq W$; $1 \\leq y_i \\leq H$).\n\nIt is guaranteed that each point in the board contains at most one power supply or consumer. Moreover, no two consumers $i$ and $j$ exist where $x_i = x_j$.\n", "outputFormat": "If it is not possible to find such a matching under the given constraints, output a single line containing $-1$.\n\nOtherwise, output a single line containing $n$ space-separated integers. The $i^{th}$ integer describes $p_i$, indicating that power supply $i$ is connected to consumer $p_i$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Tehran R] PCB", "background": "", "description": "在设计印刷电路板（PCB）时，每个用电设备必须通过导电导线连接到电源。PCB 是一个宽度为 $W$、高度为 $H$ 的矩形。它被表示为一个从 $(0,0)$ 到 $(W+1,H+1)$ 的整数坐标网格。\n\n电路板左边缘有 $n$ 个电源，板内还有 $n$ 个用电设备。第 $i$ 个电源位于位置 $(0,h_i)$，第 $i$ 个用电设备位于位置 $(x_i,y_i)$。每个电源必须恰好连接到一个用电设备，反之亦然。\n\n每条导线必须沿着网格线走线，最多只能弯曲一次。即，每条导线要么是一条垂直或水平的直线，要么恰好形成一个 $90$ 度的转弯，构成一个“L”形。导线在路径上的任何位置都不能相互交叉或重叠。\n\n你的任务是确定电源与用电设备之间的一种匹配方案，使得所有导线的总长度最小。", "inputFormat": "输入由以下几行组成：\n\n- 第一行包含三个整数 $W$、$H$ 和 $n$ ($1 \\leq W,H \\leq 10^8$; $1 \\leq n \\leq 10^6$)。\n- 接下来的 $n$ 行每行包含一个整数 $h_i$ ($1 \\leq h_i \\leq H$)。\n- 接下来的 $n$ 行每行包含两个整数 $x_i$ 和 $y_i$ ($1 \\leq x_i \\leq W$; $1 \\leq y_i \\leq H$)。\n\n保证电路板上的每个点最多有一个电源或用电设备。此外，不存在两个用电设备 $i$ 和 $j$ 使得 $x_i = x_j$。", "outputFormat": "如果在给定约束下无法找到这样的匹配方案，则输出一行，包含 $-1$。\n\n否则，输出一行，包含 $n$ 个用空格分隔的整数。第 $i$ 个整数表示 $p_i$，即电源 $i$ 连接到用电设备 $p_i$。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14697", "type": "P", "difficulty": 4, "samples": [["0912 358 8908\n0872 -3344567,0989112 -2345\n9899988782\n#\ngo 0\npick 0 3\nnext 4\nforward 12\nnext 2\nbackward 2\npick 0 1\ngo 3\npick 0 1\ndelete 1", "0912091287090"], ["09242424024\n00188990376\n#\ngo 2\nnext 4\ndelete 1", "MISS ME!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "ICPC"], "title": "[ICPC 2024 Tehran R] I am Sherlocked", "background": "", "description": "Detectives of Scotland Yard, the headquarters of the Metropolitan Police, informed Sherlock Holmes about a cyber attack on the Central Bank by James Moriarty. They have also found that there is a secret code that can stop the attack. According to their top Agent, Moriarty has hidden the code in one of his clients' phonebook. Interestingly, Sherlock has access to this mysterious client!\n\nIt is known that each correct phone number has 11 digits and starts with a leading zero digit. Moriarty's client may separate the digits of each phone number with hyphen (\"-\") or space characters. Even the leading zero digit might be missing for some phone numbers in the notebook. For example, phone number \"09163264128\" might be written like \"916 32 64 128\", or even \"- 0916-16-32--64 - 128-\". Sherlock is not aware of the exact content of the phonebook, but due to his previous knowledge, he knows how the owner writes phone numbers.\n\nSherlock arranged a friendly conversation with the owner of the phonebook in a cafe. Meanwhile, Dr. John Watson, Sherlock's colleague, took the phonebook sneakily. Sherlock instructed Dr. Watson to clean up the phonebook into a new cleaned sequence $C$ of numerical characters in his computer. The sequence is zero-indexed, i.e. the index of the first element is zero. To this end, Dr. Watson should type the phone numbers consecutively (without any non-digit/separating characters) into his computer, in the same order of appearance as in the phonebook. In order to clean the phone numbers, he should remove all non-digit characters and add the leading zero if necessary.\n\nAccording to their plan, Sherlock is supposed to have an informal conversation with the mysterious client. As soon as he finds any information about the code, he is going to text it to Dr. Watson. To this end, Dr. Watson has already prepared the cleaned sequence $C$ and has put the cursor at the beginning character. This cursor can be placed before any character of $C$. He should wait for Sherlock's instructions to produce the output sequence $S$.\n\nSherlock assumes that Dr. Watson has made the cleaned sequence $C$ and send one of the following instructions based on that:\n\n1. **go** $i$: Move the cursor to the beginning of the $i^{th}$ cleaned phone number in $C$. For example, to jump to the first phone number in $C$ he would use \"go 0\".\n2. **forward** $i$: Move the cursor forward by $i$ digits.\n3. **backward** $i$: Move the cursor backward by $i$ digits.\n4. **next** $i$: Write the next $i$ digits starting at the current position into $S$. More specifically, if Dr. Watson's cursor is before position $c$, he should pick digits $c, c+1, \\ldots, c+i-1$ but the position of the cursor remains unchanged.\n5. **pick** $i$ $j$: If $i < j$, write digits into $S$ from the position $i$ to $j$ ($i, i+1, \\ldots, j$) of the current phone number, which is the one that the digit after the cursor belongs to. Otherwise he should write $(i, i-1, \\ldots, j)$. Again, the position of the cursor remains the same. Note that $0 \\leq i, j \\leq 10$ and \"pick 0 0\" will pick the first digit.\n\nFor the sake of any correction, Sherlock may also send the following instruction:\n\n- **delete** $i$: Delete the last $i$ digits from the end of $S$.", "inputFormat": "The input consists of the phonebook's content and Sherlock's instructions. The phonebook contains $n$ phone numbers ($1 \\leq n \\leq 1000$), separated by commas or newlines. Each phone number in the phonebook is a string, consisting of 10 or 11 digits (0-9) and possibly hyphens (\"-\") and/or spaces characters. The size of the phonebook, i.e. the number of characters in the phonebook, will not exceed $10^6$ characters. The list of the phone numbers terminates with a line containing the single character \"#\".\n\nEach of the rest of the following lines contains one of Sherlock's instructions. He will send at most 10000 instructions. All instruction's arguments are non-negative integers not greater than 20000. It is guaranteed that all Sherlock's texts are in the form of one of the six mentioned instructions.\n", "outputFormat": "Print the extracted secret code (possibly empty), which is a string of digits. If the extracted secret code has more than 10000 digits, just print the first 10000 first digits. Sherlock might lose his attention and send malfunctioning instruction. He might jump to a non-existing phone number (with \"go\") or send an invalid argument for \"forward\", \"backward\", \"next\", \"pick\", and \"delete\" i.e. the instruction refers to a digit or phone that doesn't exist in cleaned sequence $C$. In such cases you find that Moriarty has succeeded and print **MISS ME!** with capital letters.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Tehran R] I am Sherlocked", "background": "", "description": "Detectives of Scotland Yard, the headquarters of the Metropolitan Police, informed Sherlock Holmes about a cyber attack on the Central Bank by James Moriarty. They have also found that there is a secret code that can stop the attack. According to their top Agent, Moriarty has hidden the code in one of his clients' phonebook. Interestingly, Sherlock has access to this mysterious client!\n\nIt is known that each correct phone number has 11 digits and starts with a leading zero digit. Moriarty's client may separate the digits of each phone number with hyphen (\"-\") or space characters. Even the leading zero digit might be missing for some phone numbers in the notebook. For example, phone number \"09163264128\" might be written like \"916 32 64 128\", or even \"- 0916-16-32--64 - 128-\". Sherlock is not aware of the exact content of the phonebook, but due to his previous knowledge, he knows how the owner writes phone numbers.\n\nSherlock arranged a friendly conversation with the owner of the phonebook in a cafe. Meanwhile, Dr. John Watson, Sherlock's colleague, took the phonebook sneakily. Sherlock instructed Dr. Watson to clean up the phonebook into a new cleaned sequence $C$ of numerical characters in his computer. The sequence is zero-indexed, i.e. the index of the first element is zero. To this end, Dr. Watson should type the phone numbers consecutively (without any non-digit/separating characters) into his computer, in the same order of appearance as in the phonebook. In order to clean the phone numbers, he should remove all non-digit characters and add the leading zero if necessary.\n\nAccording to their plan, Sherlock is supposed to have an informal conversation with the mysterious client. As soon as he finds any information about the code, he is going to text it to Dr. Watson. To this end, Dr. Watson has already prepared the cleaned sequence $C$ and has put the cursor at the beginning character. This cursor can be placed before any character of $C$. He should wait for Sherlock's instructions to produce the output sequence $S$.\n\nSherlock assumes that Dr. Watson has made the cleaned sequence $C$ and send one of the following instructions based on that:\n\n1. **go** $i$: Move the cursor to the beginning of the $i^{th}$ cleaned phone number in $C$. For example, to jump to the first phone number in $C$ he would use \"go 0\".\n2. **forward** $i$: Move the cursor forward by $i$ digits.\n3. **backward** $i$: Move the cursor backward by $i$ digits.\n4. **next** $i$: Write the next $i$ digits starting at the current position into $S$. More specifically, if Dr. Watson's cursor is before position $c$, he should pick digits $c, c+1, \\ldots, c+i-1$ but the position of the cursor remains unchanged.\n5. **pick** $i$ $j$: If $i < j$, write digits into $S$ from the position $i$ to $j$ ($i, i+1, \\ldots, j$) of the current phone number, which is the one that the digit after the cursor belongs to. Otherwise he should write $(i, i-1, \\ldots, j)$. Again, the position of the cursor remains the same. Note that $0 \\leq i, j \\leq 10$ and \"pick 0 0\" will pick the first digit.\n\nFor the sake of any correction, Sherlock may also send the following instruction:\n\n- **delete** $i$: Delete the last $i$ digits from the end of $S$.", "inputFormat": "The input consists of the phonebook's content and Sherlock's instructions. The phonebook contains $n$ phone numbers ($1 \\leq n \\leq 1000$), separated by commas or newlines. Each phone number in the phonebook is a string, consisting of 10 or 11 digits (0-9) and possibly hyphens (\"-\") and/or spaces characters. The size of the phonebook, i.e. the number of characters in the phonebook, will not exceed $10^6$ characters. The list of the phone numbers terminates with a line containing the single character \"#\".\n\nEach of the rest of the following lines contains one of Sherlock's instructions. He will send at most 10000 instructions. All instruction's arguments are non-negative integers not greater than 20000. It is guaranteed that all Sherlock's texts are in the form of one of the six mentioned instructions.\n", "outputFormat": "Print the extracted secret code (possibly empty), which is a string of digits. If the extracted secret code has more than 10000 digits, just print the first 10000 first digits. Sherlock might lose his attention and send malfunctioning instruction. He might jump to a non-existing phone number (with \"go\") or send an invalid argument for \"forward\", \"backward\", \"next\", \"pick\", and \"delete\" i.e. the instruction refers to a digit or phone that doesn't exist in cleaned sequence $C$. In such cases you find that Moriarty has succeeded and print **MISS ME!** with capital letters.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Tehran R] I am Sherlocked", "background": "", "description": "苏格兰场（伦敦警察厅总部）的侦探们告知夏洛克·福尔摩斯，詹姆斯·莫里亚蒂对中央银行发动了一次网络攻击。他们还发现存在一个可以阻止攻击的密码。根据他们的顶级特工的情报，莫里亚蒂将这个密码隐藏在他的一位客户的电话簿中。有趣的是，夏洛克可以接触到这位神秘的客户！\n\n据了解，每个正确的电话号码都有 $11$ 位数字，并且以数字 $0$ 开头。莫里亚蒂的客户可能在每个电话号码的数字之间使用连字符（\"-\"）或空格字符进行分隔。甚至对于电话簿中的某些电话号码，开头的数字 $0$ 可能缺失。例如，电话号码 \"09163264128\" 可能被写成 \"916 32 64 128\"，甚至 \"- 0916-16-32--64 - 128-\"。夏洛克并不清楚电话簿的确切内容，但根据他以往的知识，他知道电话簿主人是如何书写电话号码的。\n\n夏洛克与电话簿的主人安排了一次在咖啡馆的友好交谈。与此同时，夏洛克的同事约翰·华生医生偷偷拿走了电话簿。夏洛克指示华生医生将电话簿清理成一个新的、由数字字符组成的清理后序列 $C$，存入他的电脑。该序列是零索引的，即第一个元素的索引为零。为此，华生医生应将电话号码按其在电话簿中出现的顺序连续地（不带任何非数字/分隔字符）输入电脑。为了清理电话号码，他应删除所有非数字字符，并在必要时添加开头的 $0$。\n\n根据计划，夏洛克将与这位神秘客户进行一次非正式交谈。一旦他获得关于密码的任何信息，他就会发送给华生医生。为此，华生医生已经准备好了清理后的序列 $C$，并将光标置于开头字符处。这个光标可以放置在 $C$ 的任何字符之前。他需要等待夏洛克的指令来生成输出序列 $S$。\n\n夏洛克假设华生医生已经制作好了清理后的序列 $C$，并基于此发送以下指令之一：\n\n1. **go** $i$：将光标移动到 $C$ 中第 $i$ 个清理后的电话号码的开头。例如，要跳转到 $C$ 中的第一个电话号码，他会使用 \"go 0\"。\n2. **forward** $i$：将光标向前移动 $i$ 位数字。\n3. **backward** $i$：将光标向后移动 $i$ 位数字。\n4. **next** $i$：从当前位置开始，将接下来的 $i$ 位数字写入 $S$。更具体地说，如果华生医生的光标在位置 $c$ 之前，他应该选取数字 $c, c+1, \\ldots, c+i-1$，但光标位置保持不变。\n5. **pick** $i$ $j$：如果 $i < j$，则从当前电话号码（即光标后数字所属的电话号码）的位置 $i$ 到 $j$ ($i, i+1, \\ldots, j$) 将数字写入 $S$。否则，他应该写入 $(i, i-1, \\ldots, j)$。同样，光标位置保持不变。注意 $0 \\leq i, j \\leq 10$，且 \"pick 0 0\" 将选取第一个数字。\n\n为了进行可能的修正，夏洛克也可能发送以下指令：\n\n- **delete** $i$：从 $S$ 的末尾删除最后 $i$ 位数字。", "inputFormat": "输入由电话簿的内容和夏洛克的指令组成。电话簿包含 $n$ 个电话号码 ($1 \\leq n \\leq 1000$)，由逗号或换行符分隔。电话簿中的每个电话号码是一个字符串，由 $10$ 或 $11$ 位数字 (0-9) 以及可能的连字符（\"-\"）和/或空格字符组成。电话簿的大小（即电话簿中的字符数）不超过 $10^6$ 个字符。电话号码列表以单独一行包含单个字符 \"#\" 结束。\n\n接下来的每一行包含夏洛克的一条指令。他最多会发送 $10000$ 条指令。所有指令的参数都是不大于 $20000$ 的非负整数。保证夏洛克的所有短信都是上述六种指令形式之一。", "outputFormat": "输出提取出的秘密密码（可能为空），它是一个数字字符串。如果提取出的秘密密码超过 $10000$ 位数字，则仅输出前 $10000$ 位数字。夏洛克可能会分心并发送有故障的指令。他可能会跳转到一个不存在的电话号码（使用 \"go\"），或者为 \"forward\"、\"backward\"、\"next\"、\"pick\" 和 \"delete\" 发送无效参数，即指令引用了清理后序列 $C$ 中不存在的数字或电话号码。在这种情况下，你认为莫里亚蒂已经成功，并输出大写的 **MISS ME!**。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14698", "type": "P", "difficulty": 6, "samples": [["3 5 1\n1 2\n2 3\n1 2 4\n1 2 4", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "ICPC"], "title": "[ICPC 2024 Tehran R] Double Radars", "background": "", "description": "Ali recently found a treasure and has arranged the coins from the treasure around a circle. There are $k$ houses around the circle with equal distances. Houses are numbered 1 through $k$ consecutively in the clockwise direction. The treasure contains $n$ coins, where the $i^{th}$ coin (for $1 \\leq i \\leq n$) has the value $w_i$ and is located at the house $x_i$.\n\nTo protect the treasure, Ali has installed two radars stationed at the center of the circle, monitoring its circumference. Radar $i$ (for $i \\in \\{1,2\\}$) starts by monitoring house $r_i$ and moves $\\frac{1}{v_i}$ houses per minute. More intuitively, every $v_i$ minutes, the Radar $i$ goes one house forward. Initially, the first radar moves clockwise, and the second radar moves counterclockwise. Whenever the two radars meet, they both reverse their directions. Note that this can happen in the area between two adjacent houses.\n\nGholi, who wants to steal as many coins as possible, plans to start at an arbitrary house on the circle and move at most $\\frac{1}{v}$ houses per minute in either direction (clockwise or counterclockwise). He starts moving at the time zero. He can reverse his direction anytime or stay still for a while. If Gholi crosses paths with one of the radars at any moment, he will be immediately caught and sent to jail. He cannot steal a coin if this happens at a house.\n\nHelp Gholi to maximize the total value of the coins he can steal before being detected by the radars.", "inputFormat": "The first line contains three integers, $n$ ($1 \\leq n \\leq 10^5$) number of coins, $k$ ($1 \\leq k \\leq 10^9$) number of houses around the circle, and $v$ ($1 \\leq v \\leq 10^4$) speed of Gholi.\n\nThe second line contains the starting monitoring house $r_1$ and speed $v_1$ of the first radar ($1 \\leq r_1 \\leq k$, $1 \\leq v_1 \\leq 10^4$).\n\nThe third line contains the starting monitoring house $r_2$ and speed $v_2$ of the second radar ($1 \\leq r_2 \\leq k$, $1 \\leq v_2 \\leq 10^4$). It is guaranteed that $r_1 \\neq r_2$.\n\nThe fourth line contains $n$ distinct integers, $x_1, x_2, \\ldots, x_n$, representing the houses where the coins are located ($1 \\leq x_i \\leq k$).\n\nThe fifth line contains $n$ integers, $w_1, w_2, \\ldots, w_n$, representing the value of each coin ($1 \\leq w_i \\leq 10^9$).\n", "outputFormat": "Output the maximum total value of coins Gholi can steal before being detected by the radars.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Tehran R] Double Radars", "background": "", "description": "Ali recently found a treasure and has arranged the coins from the treasure around a circle. There are $k$ houses around the circle with equal distances. Houses are numbered 1 through $k$ consecutively in the clockwise direction. The treasure contains $n$ coins, where the $i^{th}$ coin (for $1 \\leq i \\leq n$) has the value $w_i$ and is located at the house $x_i$.\n\nTo protect the treasure, Ali has installed two radars stationed at the center of the circle, monitoring its circumference. Radar $i$ (for $i \\in \\{1,2\\}$) starts by monitoring house $r_i$ and moves $\\frac{1}{v_i}$ houses per minute. More intuitively, every $v_i$ minutes, the Radar $i$ goes one house forward. Initially, the first radar moves clockwise, and the second radar moves counterclockwise. Whenever the two radars meet, they both reverse their directions. Note that this can happen in the area between two adjacent houses.\n\nGholi, who wants to steal as many coins as possible, plans to start at an arbitrary house on the circle and move at most $\\frac{1}{v}$ houses per minute in either direction (clockwise or counterclockwise). He starts moving at the time zero. He can reverse his direction anytime or stay still for a while. If Gholi crosses paths with one of the radars at any moment, he will be immediately caught and sent to jail. He cannot steal a coin if this happens at a house.\n\nHelp Gholi to maximize the total value of the coins he can steal before being detected by the radars.", "inputFormat": "The first line contains three integers, $n$ ($1 \\leq n \\leq 10^5$) number of coins, $k$ ($1 \\leq k \\leq 10^9$) number of houses around the circle, and $v$ ($1 \\leq v \\leq 10^4$) speed of Gholi.\n\nThe second line contains the starting monitoring house $r_1$ and speed $v_1$ of the first radar ($1 \\leq r_1 \\leq k$, $1 \\leq v_1 \\leq 10^4$).\n\nThe third line contains the starting monitoring house $r_2$ and speed $v_2$ of the second radar ($1 \\leq r_2 \\leq k$, $1 \\leq v_2 \\leq 10^4$). It is guaranteed that $r_1 \\neq r_2$.\n\nThe fourth line contains $n$ distinct integers, $x_1, x_2, \\ldots, x_n$, representing the houses where the coins are located ($1 \\leq x_i \\leq k$).\n\nThe fifth line contains $n$ integers, $w_1, w_2, \\ldots, w_n$, representing the value of each coin ($1 \\leq w_i \\leq 10^9$).\n", "outputFormat": "Output the maximum total value of coins Gholi can steal before being detected by the radars.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Tehran R] Double Radars", "background": "", "description": "Ali 最近发现了一处宝藏，并将宝藏中的硬币沿一个圆圈摆放。圆圈周围有 $k$ 栋房子，它们之间的距离相等。房子按顺时针方向从 $1$ 到 $k$ 连续编号。宝藏包含 $n$ 枚硬币，其中第 $i$ 枚硬币（$1 \\leq i \\leq n$）的价值为 $w_i$，位于房子 $x_i$ 处。\n\n为了保护宝藏，Ali 在圆心处安装了两个雷达，监控着圆周。雷达 $i$（$i \\in \\{1,2\\}$）从监控房子 $r_i$ 开始，以每分钟 $\\frac{1}{v_i}$ 栋房子的速度移动。更直观地说，每过 $v_i$ 分钟，雷达 $i$ 就前进一栋房子。初始时，第一个雷达顺时针移动，第二个雷达逆时针移动。每当两个雷达相遇时，它们都会反转方向。注意，这可能发生在相邻两栋房子之间的区域。\n\n想要偷走尽可能多硬币的 Gholi 计划从圆圈上的任意一栋房子出发，以最多每分钟 $\\frac{1}{v}$ 栋房子的速度向任一方向（顺时针或逆时针）移动。他在时间零开始移动。他可以随时反转方向或停留一会儿。如果 Gholi 在任何时刻与其中一个雷达路径相交，他将立即被抓住并送进监狱。如果这种情况发生在一栋房子处，他就不能偷走该处的硬币。\n\n请帮助 Gholi 最大化在被雷达探测到之前他能偷走的硬币总价值。", "inputFormat": "第一行包含三个整数：$n$ ($1 \\leq n \\leq 10^5$) 表示硬币数量，$k$ ($1 \\leq k \\leq 10^9$) 表示圆圈周围的房子数量，$v$ ($1 \\leq v \\leq 10^4$) 表示 Gholi 的速度。\n\n第二行包含第一个雷达的起始监控房子 $r_1$ 和速度 $v_1$ ($1 \\leq r_1 \\leq k$， $1 \\leq v_1 \\leq 10^4$)。\n\n第三行包含第二个雷达的起始监控房子 $r_2$ 和速度 $v_2$ ($1 \\leq r_2 \\leq k$， $1 \\leq v_2 \\leq 10^4$)。保证 $r_1 \\neq r_2$。\n\n第四行包含 $n$ 个不同的整数 $x_1, x_2, \\ldots, x_n$，表示硬币所在的房子 ($1 \\leq x_i \\leq k$)。\n\n第五行包含 $n$ 个整数 $w_1, w_2, \\ldots, w_n$，表示每枚硬币的价值 ($1 \\leq w_i \\leq 10^9$)。", "outputFormat": "输出 Gholi 在被雷达探测到之前能偷走的硬币的最大总价值。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14699", "type": "P", "difficulty": 5, "samples": [["3 4 3\n0 0\n10 20\n20 20\n30 30\n5 5 9\n16 16 14\n25 25 5", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "ICPC"], "title": "[ICPC 2024 Tehran R] Anti-Missile", "background": "", "description": "We want to execute a strategic missile strike against an enemy's critical resources. The enemy has deployed air defence systems to protect these resources. However, their defence setup has certain vulnerabilities, and your mission is to exploit them effectively.\n\nEach air defence system can protect all strategic resources and air defence systems within its radius of operation, but cannot defend itself. Due to technical limitations, each critical resource or air defence system is protected by at most one other air defence system.\n\nMissiles can be used to destroy either an undefended strategic resource or an air defence system.\n\nA resource is considered undefended if no active air defence system protects it. When an air defence system is destroyed, it can no longer protect any resources or other air defence systems. Your goal is to maximize the number of strategic resources destroyed.", "inputFormat": "The input consists of the following:\n\nThe first line contains three integers $m$ (number of missiles), $n$ (number of strategic resources), and $d$ (number of air defence systems), where ($0 \\leq m, n, d \\leq 5000$).\n\nThe next $n$ lines contain two integers $x_i$ and $y_i$ ($0 \\leq x_i, y_i \\leq 10^9$) the coordinates of the $i^{th}$ strategic resource.\n\nThe following $d$ lines each contain three integers $x_j$, $y_j$ and $r_j$ ($0 \\leq x_j, y_j \\leq 10^9$; $0 \\leq r_j \\leq 10^9$) the coordinates of the $j^{th}$ air defence system and its radius of protection.\n", "outputFormat": "Output the maximum number of strategic resources that can be destroyed.", "hint": "The example test case is depicted by the figure below:\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/eue948ii.png)\n:::", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Tehran R] Anti-Missile", "background": "", "description": "We want to execute a strategic missile strike against an enemy's critical resources. The enemy has deployed air defence systems to protect these resources. However, their defence setup has certain vulnerabilities, and your mission is to exploit them effectively.\n\nEach air defence system can protect all strategic resources and air defence systems within its radius of operation, but cannot defend itself. Due to technical limitations, each critical resource or air defence system is protected by at most one other air defence system.\n\nMissiles can be used to destroy either an undefended strategic resource or an air defence system.\n\nA resource is considered undefended if no active air defence system protects it. When an air defence system is destroyed, it can no longer protect any resources or other air defence systems. Your goal is to maximize the number of strategic resources destroyed.", "inputFormat": "The input consists of the following:\n\nThe first line contains three integers $m$ (number of missiles), $n$ (number of strategic resources), and $d$ (number of air defence systems), where ($0 \\leq m, n, d \\leq 5000$).\n\nThe next $n$ lines contain two integers $x_i$ and $y_i$ ($0 \\leq x_i, y_i \\leq 10^9$) the coordinates of the $i^{th}$ strategic resource.\n\nThe following $d$ lines each contain three integers $x_j$, $y_j$ and $r_j$ ($0 \\leq x_j, y_j \\leq 10^9$; $0 \\leq r_j \\leq 10^9$) the coordinates of the $j^{th}$ air defence system and its radius of protection.\n", "outputFormat": "Output the maximum number of strategic resources that can be destroyed.", "hint": "The example test case is depicted by the figure below:\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/eue948ii.png)\n:::", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Tehran R] Anti-Missile", "background": "", "description": "我们计划对敌方的关键资源进行一次战略导弹打击。敌方已部署防空系统来保护这些资源。然而，他们的防御配置存在某些漏洞，你的任务是有效地利用这些漏洞。\n\n每个防空系统可以保护其作战半径内的所有战略资源和防空系统，但无法保护其自身。由于技术限制，每个关键资源或防空系统最多只受另一个防空系统的保护。\n\n导弹可用于摧毁未被保护的战略资源或防空系统。\n\n如果一个战略资源没有被任何活动的防空系统保护，则被视为未被保护。当一个防空系统被摧毁时，它将不再保护任何资源或其他防空系统。你的目标是最大化被摧毁的战略资源数量。", "inputFormat": "输入包含以下内容：\n\n第一行包含三个整数 $m$（导弹数量）、$n$（战略资源数量）和 $d$（防空系统数量），其中 ($0 \\leq m, n, d \\leq 5000$)。\n\n接下来的 $n$ 行每行包含两个整数 $x_i$ 和 $y_i$ ($0 \\leq x_i, y_i \\leq 10^9$)，表示第 $i$ 个战略资源的坐标。\n\n接下来的 $d$ 行每行包含三个整数 $x_j$、$y_j$ 和 $r_j$ ($0 \\leq x_j, y_j \\leq 10^9$； $0 \\leq r_j \\leq 10^9$)，表示第 $j$ 个防空系统的坐标及其保护半径。", "outputFormat": "输出可以被摧毁的战略资源的最大数量。", "hint": "样例测试用例如下图所示：\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/eue948ii.png)\n:::\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14700", "type": "P", "difficulty": 5, "samples": [["3 2\n0 1 1 2\n2 0 1 3\n4 2 0 4\n4 3 2 0", "4\n0\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "Special Judge", "ICPC"], "title": "[ICPC 2024 Tehran R] Conference Rides", "background": "", "description": "There are $n$ attendees in a conference, numbered 1 through $n$. Each of the first $m$ attendees (numbered 1 through $m$) has a car to drive home after the event. The remaining $n - m$ attendees who do not have a car, are going to get a ride to their homes with the help of the first $m$ attendees. Each of the first $m$ attendees can pick up at most one other attendee (from attendees $m+1$ to $n$) and drive them to their house before going to their own home. You are given the distance matrix $D$ of the $n+1$ locations (the conference hall and $n$ attendees' homes). Find a way for attendees with cars to drive the attendees without cars home, such that the time it takes for all attendees to arrive at their homes is minimized. The distance matrix $D$ is an $(n+1) \\times (n+1)$ matrix where $D[i][j]$ denotes the estimated time of transportation from location $i$ to location $j$. Location $i$ (for $1 \\leq i \\leq n$) denotes the home of the $i^{th}$ attendee and the conference hall is positioned at location $n+1$.", "inputFormat": "The input starts with a line containing two integers $n$ and $m$, ($1 \\leq n \\leq 500$ and $1 \\leq m \\leq n$). It is guaranteed that $2m \\geq n$.\n\nThe following $n+1$ lines specify the distance matrix $D$, each containing $n+1$ integers. The $j^{th}$ number from the $i+1^{th}$ line of the input (for $1 \\leq i, j \\leq n+1$) specifies $D[i][j]$ ($0 \\leq D[i][j] \\leq 10^8$). It is guaranteed that $D[i][k] \\leq D[i][j] + D[j][k]$ for any $1 \\leq i, j, k \\leq n+1$, and also $D[i][j] = 0$ for $i = j$, but $D[i][j]$ is not necessarily equal to $D[j][i]$.\n", "outputFormat": "In the first line of output, print the minimum time it takes for all attendees to arrive at their homes. In the next $m$ lines, each line $i$ (for $1 \\leq i \\leq m$) should contain a single non-negative integer $t_i$, denoting the driving schedule of the $i^{th}$ attendee. If $t_i = 0$, the attendee drives directly to their home without picking up any other attendees. Otherwise ($t_i > 0$), the $i^{th}$ attendee picks up the attendee $t_i$ and takes them to their home before driving to their own home. Each attendee must be transferred by exactly one car.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Tehran R] Conference Rides", "background": "", "description": "There are $n$ attendees in a conference, numbered 1 through $n$. Each of the first $m$ attendees (numbered 1 through $m$) has a car to drive home after the event. The remaining $n - m$ attendees who do not have a car, are going to get a ride to their homes with the help of the first $m$ attendees. Each of the first $m$ attendees can pick up at most one other attendee (from attendees $m+1$ to $n$) and drive them to their house before going to their own home. You are given the distance matrix $D$ of the $n+1$ locations (the conference hall and $n$ attendees' homes). Find a way for attendees with cars to drive the attendees without cars home, such that the time it takes for all attendees to arrive at their homes is minimized. The distance matrix $D$ is an $(n+1) \\times (n+1)$ matrix where $D[i][j]$ denotes the estimated time of transportation from location $i$ to location $j$. Location $i$ (for $1 \\leq i \\leq n$) denotes the home of the $i^{th}$ attendee and the conference hall is positioned at location $n+1$.", "inputFormat": "The input starts with a line containing two integers $n$ and $m$, ($1 \\leq n \\leq 500$ and $1 \\leq m \\leq n$). It is guaranteed that $2m \\geq n$.\n\nThe following $n+1$ lines specify the distance matrix $D$, each containing $n+1$ integers. The $j^{th}$ number from the $i+1^{th}$ line of the input (for $1 \\leq i, j \\leq n+1$) specifies $D[i][j]$ ($0 \\leq D[i][j] \\leq 10^8$). It is guaranteed that $D[i][k] \\leq D[i][j] + D[j][k]$ for any $1 \\leq i, j, k \\leq n+1$, and also $D[i][j] = 0$ for $i = j$, but $D[i][j]$ is not necessarily equal to $D[j][i]$.\n", "outputFormat": "In the first line of output, print the minimum time it takes for all attendees to arrive at their homes. In the next $m$ lines, each line $i$ (for $1 \\leq i \\leq m$) should contain a single non-negative integer $t_i$, denoting the driving schedule of the $i^{th}$ attendee. If $t_i = 0$, the attendee drives directly to their home without picking up any other attendees. Otherwise ($t_i > 0$), the $i^{th}$ attendee picks up the attendee $t_i$ and takes them to their home before driving to their own home. Each attendee must be transferred by exactly one car.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Tehran R] Conference Rides", "background": "", "description": "某会议有 $n$ 名参会者，编号为 $1$ 到 $n$。前 $m$ 名参会者（编号 $1$ 到 $m$）每人拥有一辆车，可以在活动结束后驾车回家。其余 $n - m$ 名没有车的参会者将借助前 $m$ 名参会者的帮助搭车回家。前 $m$ 名参会者每人最多可以搭载另一名参会者（从编号 $m+1$ 到 $n$ 的参会者中选择），并在返回自己家之前先将该人送回家。已知 $n+1$ 个地点（会议厅和 $n$ 名参会者的家）的距离矩阵 $D$。请为有车的参会者安排搭载无车参会者回家的方案，使得所有参会者到达各自家的时间最短。距离矩阵 $D$ 是一个 $(n+1) \\times (n+1)$ 的矩阵，其中 $D[i][j]$ 表示从地点 $i$ 到地点 $j$ 的预估运输时间。地点 $i$（$1 \\leq i \\leq n$）表示第 $i$ 名参会者的家，会议厅位于地点 $n+1$。\n", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$（$1 \\leq n \\leq 500$ 且 $1 \\leq m \\leq n$）。保证 $2m \\geq n$。\n\n接下来的 $n+1$ 行描述了距离矩阵 $D$，每行包含 $n+1$ 个整数。输入的第 $i+1$ 行（$1 \\leq i, j \\leq n+1$）的第 $j$ 个数指定了 $D[i][j]$（$0 \\leq D[i][j] \\leq 10^8$）。保证对于任意 $1 \\leq i, j, k \\leq n+1$，有 $D[i][k] \\leq D[i][j] + D[j][k]$，且当 $i = j$ 时 $D[i][j] = 0$，但 $D[i][j]$ 不一定等于 $D[j][i]$。\n", "outputFormat": "输出的第一行应打印所有参会者到达各自家的最短时间。接下来的 $m$ 行中，每行 $i$（$1 \\leq i \\leq m$）应包含一个非负整数 $t_i$，表示第 $i$ 名参会者的驾驶安排。如果 $t_i = 0$，则表示该参会者直接驾车回家，不搭载任何其他人。否则（$t_i > 0$），表示第 $i$ 名参会者搭载参会者 $t_i$，并在驾车回自己家之前先将该人送回家。每位无车参会者必须恰好由一辆车运送。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14701", "type": "P", "difficulty": 5, "samples": [["2 3\n1 2 5\n3 4 6", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "ICPC"], "title": "[ICPC 2024 Tehran R] Parking Theory", "background": "", "description": "Sharif University has a rectangular parking lot with $n \\times m$ spaces for cars. Each row and column of the parking lot has entrances at both ends.\n\nThe parking lot is full, and the order in which the cars entered is given for each parking space. Specifically, a cell with the number 1 is the first car that entered the parking lot, and a cell with the number $n \\cdot m$ is the last one to enter.\n\nAbolfazl has a theory about how cars park in this lot. He believes that any car entering the parking lot from a specific side (row or column) moves straight until it finds its parking spot and never changes direction. Moreover, a car cannot pass through a cell that already contains a parked car.\n\nAbolfazl wants to count the number of subgrids in the parking lot that satisfy this condition. A subgrid is valid if all cars in that subgrid can park without violating the above rules, considering only the cars within the subgrid.\n\nHelp Abolfazl determine the number of such valid subgrids.\n", "inputFormat": "The first line of input contains two integers $n$ and $m$ ($1 \\leq n, m \\leq 500$), the number of rows and columns of the parking lot. Each of the following $n$ lines contains $m$ integers, indicating the order of entry of the cars. It is guaranteed that numbers are different between 1 and $n \\cdot m$.\n", "outputFormat": "Print a single integer, the number of valid subgrids in the parking lot.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Tehran R] Parking Theory", "background": "", "description": "Sharif University has a rectangular parking lot with $n \\times m$ spaces for cars. Each row and column of the parking lot has entrances at both ends.\n\nThe parking lot is full, and the order in which the cars entered is given for each parking space. Specifically, a cell with the number 1 is the first car that entered the parking lot, and a cell with the number $n \\cdot m$ is the last one to enter.\n\nAbolfazl has a theory about how cars park in this lot. He believes that any car entering the parking lot from a specific side (row or column) moves straight until it finds its parking spot and never changes direction. Moreover, a car cannot pass through a cell that already contains a parked car.\n\nAbolfazl wants to count the number of subgrids in the parking lot that satisfy this condition. A subgrid is valid if all cars in that subgrid can park without violating the above rules, considering only the cars within the subgrid.\n\nHelp Abolfazl determine the number of such valid subgrids.\n", "inputFormat": "The first line of input contains two integers $n$ and $m$ ($1 \\leq n, m \\leq 500$), the number of rows and columns of the parking lot. Each of the following $n$ lines contains $m$ integers, indicating the order of entry of the cars. It is guaranteed that numbers are different between 1 and $n \\cdot m$.\n", "outputFormat": "Print a single integer, the number of valid subgrids in the parking lot.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Tehran R] Parking Theory", "background": "", "description": "设拉子大学有一个长方形的停车场，拥有 $n \\times m$ 个停车位。停车场的每一行和每一列的两端都有入口。\n\n停车场已停满，每个停车位上的汽车进入顺序已给出。具体而言，标有数字 $1$ 的单元格是第一个进入停车场的汽车，标有数字 $n \\cdot m$ 的单元格是最后一个进入的。\n\nAbolfazl 有一个关于汽车如何在该停车场停放的理论。他认为，任何从特定一侧（行或列）进入停车场的汽车都会直线行驶，直到找到其停车位，并且从不改变方向。此外，汽车不能穿过已停有汽车的单元格。\n\nAbolfazl 想要计算停车场中满足此条件的子网格数量。一个子网格是有效的，如果仅考虑该子网格内的汽车，它们都能在不违反上述规则的情况下停放。\n\n请帮助 Abolfazl 确定这样的有效子网格的数量。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$ ($1 \\leq n, m \\leq 500$)，表示停车场的行数和列数。接下来的 $n$ 行每行包含 $m$ 个整数，表示汽车的进入顺序。保证数字是 $1$ 到 $n \\cdot m$ 之间的不同整数。\n", "outputFormat": "输出一个整数，表示停车场中有效子网格的数量。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14702", "type": "P", "difficulty": 2, "samples": [["3 7\n1 3 4", "3"], ["3 4\n2 3 4", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["模拟", "贪心", "2024", "ICPC"], "title": "[ICPC 2024 Tehran R] Boat", "background": "", "description": "A river separates Upper Barareh from Lower Barareh. To transport people between these two towns, a **two-seater** (a boat that can carry at most two people) with a certain weight capacity has been provided. This boat must be steered by at least one person. i.e. it can not move across the river without any passengers.\n\nThe National Barareh Festival is scheduled to be held in Upper Barareh. All Lower Barareh residents want to participate in this celebration and need to move to Upper Barareh as quickly as possible. Your task is to help them move to Upper Barareh with the minimum number of boat trips across the river.", "inputFormat": "The first line of the input contains two integers $n$ and $w$, where $n$ is the number of Lower Barareh residents ($1 \\leq n \\leq 1000$), and $w$ is the maximum weight the boat can carry ($1 \\leq w \\leq 10^6$). The next line contains $n$ space-separated integers, describing the weights of the residents of Lower Barareh. All the weights are positive integers not exceeding $10^6$.\n", "outputFormat": "If it is not possible to transfer all the residents of Lower Barareh, print a single line containing $-1$ in the output. Otherwise, print the minimum number of times the boat must travel between Lower Barareh and Upper Barareh (in both directions) in order to transfer all residents of Lower Barareh to Upper Barareh.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2024 Tehran R] Boat", "background": "", "description": "A river separates Upper Barareh from Lower Barareh. To transport people between these two towns, a **two-seater** (a boat that can carry at most two people) with a certain weight capacity has been provided. This boat must be steered by at least one person. i.e. it can not move across the river without any passengers.\n\nThe National Barareh Festival is scheduled to be held in Upper Barareh. All Lower Barareh residents want to participate in this celebration and need to move to Upper Barareh as quickly as possible. Your task is to help them move to Upper Barareh with the minimum number of boat trips across the river.", "inputFormat": "The first line of the input contains two integers $n$ and $w$, where $n$ is the number of Lower Barareh residents ($1 \\leq n \\leq 1000$), and $w$ is the maximum weight the boat can carry ($1 \\leq w \\leq 10^6$). The next line contains $n$ space-separated integers, describing the weights of the residents of Lower Barareh. All the weights are positive integers not exceeding $10^6$.\n", "outputFormat": "If it is not possible to transfer all the residents of Lower Barareh, print a single line containing $-1$ in the output. Otherwise, print the minimum number of times the boat must travel between Lower Barareh and Upper Barareh (in both directions) in order to transfer all residents of Lower Barareh to Upper Barareh.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2024 Tehran R] Boat", "background": "", "description": "一条河将上巴雷与下巴雷分隔开来。为了在这两个城镇之间运送人员，人们提供了一艘**双人船**（一艘最多可载两人的船），并具有一定的载重能力。这艘船必须由至少一人驾驶，即，它不能在没有任何乘客的情况下过河。\n\n全国巴雷节计划在上巴雷举行。所有下巴雷的居民都希望参加这次庆祝活动，并需要尽快转移到上巴雷。你的任务是帮助他们以最少的渡河次数转移到上巴雷。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $w$，其中 $n$ 是下巴雷居民的数量 ($1 \\leq n \\leq 1000$)，$w$ 是船的最大载重量 ($1 \\leq w \\leq 10^6$)。第二行包含 $n$ 个用空格分隔的整数，描述了下巴雷居民的体重。所有体重都是不超过 $10^6$ 的正整数。\n", "outputFormat": "如果无法转移所有下巴雷居民，则输出一行，包含 $-1$。否则，输出将下巴雷所有居民转移到上巴雷所需的最少渡河次数（往返两个方向均计入）。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14703", "type": "P", "difficulty": 1, "samples": [["5", "0"], ["18", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "ICPC"], "title": "[ICPC 2023 Tehran R] Micromasters", "background": "", "description": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/hdjr0vdq.png)\n:::\n\nThe Department of Computer Engineering at Sharif University of Technology has recently initiated a professional education program known as Micromasters. This program offers a set of courses designed to empower students with specialized knowledge and skills in various domains of computer science and engineering. As an incentive to promote the program, the department has introduced a referral system wherein individuals who refer other students to the Micromasters program receive a 10% discount for each referred student on their own course registrations.\n\nMina is a talented student who is passionate about spreading the benefits of the Micromasters program. With each referral, Mina's list of discounts grows, and now the following question arises: given the number of students who are referred by Mina, how many courses can she enroll in for free?\n", "inputFormat": "The input consists of a single line containing a single integer $n$ ($0 \\leq n \\leq 1000$), which represents the number of students that Mina has referred.\n", "outputFormat": "Print a single line, containing the number of courses Mina can enroll in for free using the discounts.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2023 Tehran R] Micromasters", "background": "", "description": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/hdjr0vdq.png)\n:::\n\nThe Department of Computer Engineering at Sharif University of Technology has recently initiated a professional education program known as Micromasters. This program offers a set of courses designed to empower students with specialized knowledge and skills in various domains of computer science and engineering. As an incentive to promote the program, the department has introduced a referral system wherein individuals who refer other students to the Micromasters program receive a 10% discount for each referred student on their own course registrations.\n\nMina is a talented student who is passionate about spreading the benefits of the Micromasters program. With each referral, Mina's list of discounts grows, and now the following question arises: given the number of students who are referred by Mina, how many courses can she enroll in for free?\n", "inputFormat": "The input consists of a single line containing a single integer $n$ ($0 \\leq n \\leq 1000$), which represents the number of students that Mina has referred.\n", "outputFormat": "Print a single line, containing the number of courses Mina can enroll in for free using the discounts.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2023 Tehran R] Micromasters", "background": "", "description": ":::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/hdjr0vdq.png)\n:::\n\n设拉子理工大学计算机工程系最近启动了一个名为微硕士的专业教育项目。该项目提供一系列课程，旨在使学生掌握计算机科学与工程各领域的专业知识和技能。为了推广该项目，系里引入了推荐系统：推荐其他学生参加微硕士项目的人，每推荐一位学生，就能在自己的课程注册中获得 $10\\%$ 的折扣。\n\nMina 是一位有才华的学生，她热衷于传播微硕士项目的好处。随着每次推荐，Mina 的折扣清单不断增长，现在出现了以下问题：给定 Mina 推荐的学生数量，她可以免费注册多少门课程？", "inputFormat": "输入仅包含一行，包含一个整数 $n$ ($0 \\leq n \\leq 1000$)，表示 Mina 推荐的学生数量。\n", "outputFormat": "输出一行，表示 Mina 使用这些折扣可以免费注册的课程数量。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14704", "type": "P", "difficulty": 1, "samples": [["5\n1 1 2 1 2", "5"], ["8\n1 2 3 2 2 5 4 2", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "ICPC"], "title": "[ICPC 2023 Tehran R] Hezardastan' s Annual Report", "background": "", "description": "Hezardastan, a giant among Iranian IT holding groups, houses several innovative companies such as Cafebazaar, Divar, and Balad. The annual report of the holding consists of $n$ chapters, each dedicated to a company under Hezardastan's umbrella. The chapters in the report vary in length and occupy a certain number of pages. We want to compile all $n$ chapters into a PDF document that will be printed double-sided on A4 paper sheets. However, for aesthetic reasons, we want to avoid having pages from two different chapters printed on the same paper sheet. To ensure each chapter begins on a fresh, odd-numbered page, we plan to strategically insert an extra blank page after each chapter that has an odd number of pages. Now, we need to know the minimum number of A4 paper sheets needed to print the entire holding company report?", "inputFormat": "The input consists of two lines. The first line contains a single integer $n$ ($1 \\leq n \\leq 100$), the number of chapters in the report. The second line contains $n$ space-separated integers, denoting the number of pages in each chapter. All numbers in the input are positive integers and are at most 100.\n", "outputFormat": "The output should consist of a single line containing the total number of A4 paper sheets needed to print the entire annual report.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2023 Tehran R] Hezardastan' s Annual Report", "background": "", "description": "Hezardastan, a giant among Iranian IT holding groups, houses several innovative companies such as Cafebazaar, Divar, and Balad. The annual report of the holding consists of $n$ chapters, each dedicated to a company under Hezardastan's umbrella. The chapters in the report vary in length and occupy a certain number of pages. We want to compile all $n$ chapters into a PDF document that will be printed double-sided on A4 paper sheets. However, for aesthetic reasons, we want to avoid having pages from two different chapters printed on the same paper sheet. To ensure each chapter begins on a fresh, odd-numbered page, we plan to strategically insert an extra blank page after each chapter that has an odd number of pages. Now, we need to know the minimum number of A4 paper sheets needed to print the entire holding company report?", "inputFormat": "The input consists of two lines. The first line contains a single integer $n$ ($1 \\leq n \\leq 100$), the number of chapters in the report. The second line contains $n$ space-separated integers, denoting the number of pages in each chapter. All numbers in the input are positive integers and are at most 100.\n", "outputFormat": "The output should consist of a single line containing the total number of A4 paper sheets needed to print the entire annual report.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2023 Tehran R] Hezardastan' s Annual Report", "background": "", "description": "Hezardastan 是伊朗 IT 控股集团中的巨头，旗下拥有多家创新公司，如 Cafebazaar、Divar 和 Balad。该集团的年度报告包含 $n$ 个章节，每个章节专门介绍 Hezardastan 旗下的一家公司。报告中的章节长度不一，占据一定数量的页面。我们希望将所有 $n$ 个章节汇编成一份 PDF 文档，该文档将在 A4 纸张上进行双面打印。然而，出于美观考虑，我们希望避免将两个不同章节的页面打印在同一张纸上。为了确保每个章节都从一个崭新的奇数页码开始，我们计划在页数为奇数的每个章节后策略性地插入一个额外的空白页。现在，我们需要知道打印整份集团年度报告所需的最少 A4 纸张数量是多少？\n", "inputFormat": "输入由两行组成。第一行包含一个整数 $n$ ($1 \\leq n \\leq 100$)，表示报告中的章节数量。第二行包含 $n$ 个用空格分隔的整数，表示每个章节的页数。输入中的所有数字均为正整数且不超过 $100$。", "outputFormat": "输出应包含一行，表示打印整份年度报告所需的总 A4 纸张数量。", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14705", "type": "P", "difficulty": 6, "samples": [["10\n0 3\n0 2\n5 -2\n4 1\n0 -2\n5 2\n7 3\n3 2\n10 5\n12 20", "1\n5\n4\n6\n5\n7\n9\n10\n16\n22"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "ICPC"], "title": "[ICPC 2023 Tehran R] Moderation in all things", "background": "", "description": "Initially, we have an array of length 1 containing only the number 0. All natural numbers are listed in ascending order in the \"reservation list\" (the first number in the list is 1). The array undergoes $q$ operations. The $i^{th}$ operation, is one of the following:\n\n- **Insert**$(p, x)$: Insert the first $x$ numbers from the reservation list after the number $p$ in the array, in ascending order. These numbers are removed from the reservation list.\n- **Remove**$(p, x)$: Remove the next $x$ numbers after number $p$ in the array. These numbers are not returned to the reservation list.\n\nYou are given information about $q$ operations, and you are asked to determine the number written in the middle of the array after each operation. If the length of the array after the $i^{th}$ operation is $n$, you should find the $\\left\\lfloor \\frac{n}{2} \\right\\rfloor^{th}$ element of the array. Note that the indexing of the array starts from 1.", "inputFormat": "The first line contains an integer $q$ ($1 \\leq q \\leq 5 \\cdot 10^5$), which represents the number of operations. Each of the next $q$ lines contains two integers: $p_i$ ($1 \\leq p_i \\leq 2 \\cdot 10^9$), and $k_i$ ($1 \\leq |k_i| \\leq 2 \\cdot 10^9$).\n\nIf $k_i = +x$, operation **Insert**$(p_i, x)$ is executed. If $k_i = -x$, operation **Remove**$(p_i, x)$ is executed. It is guaranteed that all operations are valid, and no impossible operation is performed on the array. Additionally, at most $2 \\cdot 10^9$ numbers are moved from the reservation list into the array.\n", "outputFormat": "Output $q$ lines. In the $i^{th}$ line, print the middle element of the array after performing the $i^{th}$ operation.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2023 Tehran R] Moderation in all things", "background": "", "description": "Initially, we have an array of length 1 containing only the number 0. All natural numbers are listed in ascending order in the \"reservation list\" (the first number in the list is 1). The array undergoes $q$ operations. The $i^{th}$ operation, is one of the following:\n\n- **Insert**$(p, x)$: Insert the first $x$ numbers from the reservation list after the number $p$ in the array, in ascending order. These numbers are removed from the reservation list.\n- **Remove**$(p, x)$: Remove the next $x$ numbers after number $p$ in the array. These numbers are not returned to the reservation list.\n\nYou are given information about $q$ operations, and you are asked to determine the number written in the middle of the array after each operation. If the length of the array after the $i^{th}$ operation is $n$, you should find the $\\left\\lfloor \\frac{n}{2} \\right\\rfloor^{th}$ element of the array. Note that the indexing of the array starts from 1.", "inputFormat": "The first line contains an integer $q$ ($1 \\leq q \\leq 5 \\cdot 10^5$), which represents the number of operations. Each of the next $q$ lines contains two integers: $p_i$ ($1 \\leq p_i \\leq 2 \\cdot 10^9$), and $k_i$ ($1 \\leq |k_i| \\leq 2 \\cdot 10^9$).\n\nIf $k_i = +x$, operation **Insert**$(p_i, x)$ is executed. If $k_i = -x$, operation **Remove**$(p_i, x)$ is executed. It is guaranteed that all operations are valid, and no impossible operation is performed on the array. Additionally, at most $2 \\cdot 10^9$ numbers are moved from the reservation list into the array.\n", "outputFormat": "Output $q$ lines. In the $i^{th}$ line, print the middle element of the array after performing the $i^{th}$ operation.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2023 Tehran R] Moderation in all things", "background": "", "description": "初始时，我们有一个长度为 $1$ 的数组，其中仅包含数字 $0$。所有自然数按升序列在“预约列表”中（列表中的第一个数字是 $1$）。该数组将经历 $q$ 次操作。第 $i$ 次操作是以下两种之一：\n\n- **Insert**$(p, x)$：将预约列表中的前 $x$ 个数字按升序插入到数组中数字 $p$ 之后。这些数字将从预约列表中移除。\n- **Remove**$(p, x)$：删除数组中数字 $p$ 之后的接下来 $x$ 个数字。这些数字不会返回到预约列表。\n\n给定 $q$ 次操作的信息，你需要确定每次操作后数组中间的数字。如果在第 $i$ 次操作后数组的长度为 $n$，则应找到数组的第 $\\left\\lfloor \\frac{n}{2} \\right\\rfloor$ 个元素。注意数组的索引从 $1$ 开始。", "inputFormat": "第一行包含一个整数 $q$ ($1 \\leq q \\leq 5 \\cdot 10^5$)，表示操作的数量。接下来的 $q$ 行每行包含两个整数：$p_i$ ($1 \\leq p_i \\leq 2 \\cdot 10^9$) 和 $k_i$ ($1 \\leq |k_i| \\leq 2 \\cdot 10^9$)。\n\n如果 $k_i = +x$，则执行操作 **Insert**$(p_i, x)$。如果 $k_i = -x$，则执行操作 **Remove**$(p_i, x)$。保证所有操作都是有效的，且不会在数组上执行不可能的操作。此外，最多有 $2 \\cdot 10^9$ 个数字从预约列表移入数组。\n", "outputFormat": "输出 $q$ 行。在第 $i$ 行中，输出执行第 $i$ 次操作后数组的中间元素。\n", "hint": "翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
