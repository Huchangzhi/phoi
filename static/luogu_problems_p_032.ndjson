{"pid": "P9113", "type": "P", "difficulty": 6, "samples": [["4 100\n5 1000\n10 100\n8 10\n20 1\n", "2\n2\n3\n"], ["3 4\n1 2\n1 3\n1 3\n", "3\n1\n2\n3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "IOI", "Special Judge", "O2优化"], "title": "[IOI 2009] Hiring", "background": "IOI2009 D1T2", "description": "你需要为一个建设项目雇佣一些工人。现在有 $N$ 位候选工人，标号为 $1\\sim N$。第 $k$ 个工人要求如果自己被雇佣，则必须得到至少 $S_k$ 美元的工资。每个工人有能力值 $Q_k$。建筑业监管局规定，你必须按工人们的能力值的比例分配他们的工资。例如，如果 $Q_A = 3Q_B$，则你付给 $A$ 的工资必须恰为 $B$ 的三倍。你可以付给你的工人们任意非负实数金额的工资。\n\n你的手上有 $W$ 美元，你想用这些钱雇佣最大数量的工人。你可以决定选用哪些工人以及付给他们的工资，但必须满足每个工人的最低工资要求以及监管局的分配规定，并保证工资总额不超过 $W$。\n\n工人们的能力值和你的项目无关，因此你只想最大化雇佣工人的数量，而不关心他们的能力值。尽管如此，你仍希望最小化你的支出，即如果存在多种方案，则你需要选择支付给工人们的工资总额最小的那一个。如果仍存在多种方案，任意一个都是满足要求的。\n\n**任务**：编写一个程序，给定每个工人的工资要求和能力值，以及你拥有的资金，计算出具体雇佣哪些工人。你必须在最大化工人的数量的前提下最小化支出，并满足上文提到的监管局的要求。", "inputFormat": "第一行包含两个由空格隔开的整数 $N, W$，分别表示候选工人数和你拥有的资金。\n\n接下来 $N$ 行，每行描述一个候选工人。其中第 $k$ 行描述第 $k$ 个候选工人，包含两个由空格隔开的整数 $S_k, Q_k$。", "outputFormat": "第一行一个整数 $H$，表示你雇佣的工人数量。\n\n接下来 $H$ 行，每行一个整数，表示你雇佣的所有工人的编号（互不相同），以任意顺序排列。", "hint": "### 样例解释\n\n- 样例 1：选择工人 $2$ 和 $3$ 是唯一符合所有要求且雇佣了两个工人的方案。你可以分别付给他们 $80$ 美元和 $8$ 美元，满足 $100$ 美元的预算。\n\n- 样例 2：你可以雇佣三个工人。你可以分别付给他们 $1$ 美元，$1.5$ 美元和 $1.5$ 美元。\n\n### 数据范围与约定\n\n对于任意测试点，如果你的方案满足了所有要求和你的目标，你将获得该测试点的满分。**否则**，如果你的第一行是正确的，即你输出了正确的工人数量 $H$，无论你接下来的输出是否符合格式，你都将获得该测试点 $50\\%$ 的分数。\n\n注意，在实际评测中，只有你的输出符合格式，才能获得测试点 $50\\%$ 或 $100\\%$ 的分数。\n\n- 对于 $50\\%$ 的数据，$N\\leq 5000$。\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 5\\times 10 ^ 5$，$1\\leq S_k, Q_k\\leq 2\\times 10 ^ 4$，$1\\leq W\\leq 10 ^ {10}$。\n\n注意，$W$ 超出了 $32$ 位整形变量的存储范围。你需要使用 $64$ 位整型变量存储 $W$，例如 C/C++ 中的 `long long` 或 Pascal 中的 `int64`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2009] Hiring", "background": "IOI2009 D1T2", "description": "你需要为一个建设项目雇佣一些工人。现在有 $N$ 位候选工人，标号为 $1\\sim N$。第 $k$ 个工人要求如果自己被雇佣，则必须得到至少 $S_k$ 美元的工资。每个工人有能力值 $Q_k$。建筑业监管局规定，你必须按工人们的能力值的比例分配他们的工资。例如，如果 $Q_A = 3Q_B$，则你付给 $A$ 的工资必须恰为 $B$ 的三倍。你可以付给你的工人们任意非负实数金额的工资。\n\n你的手上有 $W$ 美元，你想用这些钱雇佣最大数量的工人。你可以决定选用哪些工人以及付给他们的工资，但必须满足每个工人的最低工资要求以及监管局的分配规定，并保证工资总额不超过 $W$。\n\n工人们的能力值和你的项目无关，因此你只想最大化雇佣工人的数量，而不关心他们的能力值。尽管如此，你仍希望最小化你的支出，即如果存在多种方案，则你需要选择支付给工人们的工资总额最小的那一个。如果仍存在多种方案，任意一个都是满足要求的。\n\n**任务**：编写一个程序，给定每个工人的工资要求和能力值，以及你拥有的资金，计算出具体雇佣哪些工人。你必须在最大化工人的数量的前提下最小化支出，并满足上文提到的监管局的要求。", "inputFormat": "第一行包含两个由空格隔开的整数 $N, W$，分别表示候选工人数和你拥有的资金。\n\n接下来 $N$ 行，每行描述一个候选工人。其中第 $k$ 行描述第 $k$ 个候选工人，包含两个由空格隔开的整数 $S_k, Q_k$。", "outputFormat": "第一行一个整数 $H$，表示你雇佣的工人数量。\n\n接下来 $H$ 行，每行一个整数，表示你雇佣的所有工人的编号（互不相同），以任意顺序排列。", "hint": "### 样例解释\n\n- 样例 1：选择工人 $2$ 和 $3$ 是唯一符合所有要求且雇佣了两个工人的方案。你可以分别付给他们 $80$ 美元和 $8$ 美元，满足 $100$ 美元的预算。\n\n- 样例 2：你可以雇佣三个工人。你可以分别付给他们 $1$ 美元，$1.5$ 美元和 $1.5$ 美元。\n\n### 数据范围与约定\n\n对于任意测试点，如果你的方案满足了所有要求和你的目标，你将获得该测试点的满分。**否则**，如果你的第一行是正确的，即你输出了正确的工人数量 $H$，无论你接下来的输出是否符合格式，你都将获得该测试点 $50\\%$ 的分数。\n\n注意，在实际评测中，只有你的输出符合格式，才能获得测试点 $50\\%$ 或 $100\\%$ 的分数。\n\n- 对于 $50\\%$ 的数据，$N\\leq 5000$。\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 5\\times 10 ^ 5$，$1\\leq S_k, Q_k\\leq 2\\times 10 ^ 4$，$1\\leq W\\leq 10 ^ {10}$。\n\n注意，$W$ 超出了 $32$ 位整形变量的存储范围。你需要使用 $64$ 位整型变量存储 $W$，例如 C/C++ 中的 `long long` 或 Pascal 中的 `int64`。", "locale": "zh-CN"}}}
{"pid": "P9114", "type": "P", "difficulty": 2, "samples": [["5 3 2\n0 0 1\n1 1 0\n1 0 0\n1 1 0\n1 1 0\n", "3 2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2009", "IOI", "O2优化"], "title": "[IOI 2009] POI", "background": "IOI2009 D1T3", "description": "普罗夫迪夫信息学奥林匹克竞赛（Plovdiv Olympiad in Informatics, POI）正在举行。有 $N$ 个选手和 $T$ 道题目。每道题目只有一组测试数据，因此对于每个选手和每道题目，要么这个选手解决了这道题目，要么没有解决。没有部分分。\n\n比赛结束后，每道题目的分数为没有解决这道题目的选手数量。每个选手的得分为他解决的每道题目的得分之和。\n\nPhilip 参加了这场比赛，但他被复杂的计分规则搞糊涂了。他看着比赛结果，无法计算出他的最终排名。写一个程序帮助 Philip 计算他的分数和排名。\n\n在比赛开始之前，每个选手从 $1$ 到 $N$ 编号。Philip 的编号为 $P$。最终的排行榜将所有选手按分数降序列出。为避免平局，在得分相同的选手中，按解决题目数量降序排序（解决题目数量多的选手排在解决数量题目少的选手之前）。如果仍存在平局，则按编号升序排序。\n\n**任务**：编写一个程序，给定每个选手的解题情况，计算出 Philip 的分数和他在最终排行榜上的排名。", "inputFormat": "第一行包含三个整数 $N, T, P$，分别由一个空格隔开，分别表示选手数，题目数和 Philip 的编号。\n\n接下来 $N$ 行描述了每名选手的解题情况。其中第 $k$ 行描述了编号为 $k$ 的选手的解题情况，包含 $T$ 个由空格隔开的 $0$ 或 $1$。第 $i$ 个数字描述了编号为 $k$ 的选手是（对应 $1$）否（对应 $0$）解决了第 $i$ 道题。", "outputFormat": "输出一行两个由空格隔开的整数，分别表示 Philip 在 POI 竞赛中的得分和他在最终排行榜上的排名。排名用 $1\\sim N$ 的整数描述，其中 $1$ 表示选手排在排行榜顶部，$N$ 表示选手排在排行榜底部。", "hint": "### 样例解释\n\n第一道题目只有一个选手没有解决，所以它值 $1$ 分。第二道题目有两个选手没有解决，所以它值 $2$ 分。第三道题目有四个选手没有解决，所以它值 $4$ 分。因此编号为 $1$ 的选手得 $4$ 分，编号为 $2, 4, 5$ 的选手得 $3$ 分，编号为 $3$ 的选手得 $1$ 分。根据平局规则，编号为 $2$ 的选手（Philip）排在编号为 $4, 5$ 的选手之前，因此 Philip 的最终排名为 $2$，仅在编号为 $1$ 的选手下面。\n\n### 数据范围与约定\n\n- 对于 $35\\%$ 的数据，没有选手得分和 Philip 相同。\n- 对于 $100\\%$ 的数据，$1\\leq N, T\\leq 2000$，$1\\leq P\\leq N$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2009] POI", "background": "IOI2009 D1T3", "description": "普罗夫迪夫信息学奥林匹克竞赛（Plovdiv Olympiad in Informatics, POI）正在举行。有 $N$ 个选手和 $T$ 道题目。每道题目只有一组测试数据，因此对于每个选手和每道题目，要么这个选手解决了这道题目，要么没有解决。没有部分分。\n\n比赛结束后，每道题目的分数为没有解决这道题目的选手数量。每个选手的得分为他解决的每道题目的得分之和。\n\nPhilip 参加了这场比赛，但他被复杂的计分规则搞糊涂了。他看着比赛结果，无法计算出他的最终排名。写一个程序帮助 Philip 计算他的分数和排名。\n\n在比赛开始之前，每个选手从 $1$ 到 $N$ 编号。Philip 的编号为 $P$。最终的排行榜将所有选手按分数降序列出。为避免平局，在得分相同的选手中，按解决题目数量降序排序（解决题目数量多的选手排在解决数量题目少的选手之前）。如果仍存在平局，则按编号升序排序。\n\n**任务**：编写一个程序，给定每个选手的解题情况，计算出 Philip 的分数和他在最终排行榜上的排名。", "inputFormat": "第一行包含三个整数 $N, T, P$，分别由一个空格隔开，分别表示选手数，题目数和 Philip 的编号。\n\n接下来 $N$ 行描述了每名选手的解题情况。其中第 $k$ 行描述了编号为 $k$ 的选手的解题情况，包含 $T$ 个由空格隔开的 $0$ 或 $1$。第 $i$ 个数字描述了编号为 $k$ 的选手是（对应 $1$）否（对应 $0$）解决了第 $i$ 道题。", "outputFormat": "输出一行两个由空格隔开的整数，分别表示 Philip 在 POI 竞赛中的得分和他在最终排行榜上的排名。排名用 $1\\sim N$ 的整数描述，其中 $1$ 表示选手排在排行榜顶部，$N$ 表示选手排在排行榜底部。", "hint": "### 样例解释\n\n第一道题目只有一个选手没有解决，所以它值 $1$ 分。第二道题目有两个选手没有解决，所以它值 $2$ 分。第三道题目有四个选手没有解决，所以它值 $4$ 分。因此编号为 $1$ 的选手得 $4$ 分，编号为 $2, 4, 5$ 的选手得 $3$ 分，编号为 $3$ 的选手得 $1$ 分。根据平局规则，编号为 $2$ 的选手（Philip）排在编号为 $4, 5$ 的选手之前，因此 Philip 的最终排名为 $2$，仅在编号为 $1$ 的选手下面。\n\n### 数据范围与约定\n\n- 对于 $35\\%$ 的数据，没有选手得分和 Philip 相同。\n- 对于 $100\\%$ 的数据，$1\\leq N, T\\leq 2000$，$1\\leq P\\leq N$。", "locale": "zh-CN"}}}
{"pid": "P9115", "type": "P", "difficulty": 3, "samples": [["3 4\n2\n3\n5\n200\n100\n300\n800\n3\n2\n-3\n1\n4\n-4\n-2\n-1\n", "5300\n"], ["2 4\n5\n2\n100\n500\n1000\n2000\n3\n1\n2\n4\n-1\n-3\n-2\n-4\n", "16200"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2009", "IOI", "O2优化"], "title": "[IOI 2009] Garage", "background": "IOI2009 D2T1", "description": "一个停车场有 $N$ 个停车位，依次编号为 $1$ 到 $N$。每天早上，停车场的所有停车位都是空的。当一辆车到达停车场时，服务员检查是否有空的停车位。如果没有，则这辆车将在入口处等待，直到有新的停车位。如果有，则这辆车将停在编号最小的空的停车位上。如果多辆车在入口处等待，则它们会按照到达的顺序排成队列，当出现空的停车位时，队列中的第一辆车（最早到达的车辆）将停在该停车位上。\n\n每辆车的停车费是它的重量乘以对应停车位的特定比率，和它在停车场停了多久无关。\n\n停车场管理员得知今天将有 $M$ 辆车前来停车，以及它们到达和离开的顺序。帮他计算今天的收入。\n\n**任务**：编写一个程序，给定每个停车位的特定比率，每辆车的重量和所有车辆到达和离开的顺序，求出车库的总收入。", "inputFormat": "第一行包含两个由空格隔开的整数 $N, M$，分别表示停车位数和车辆数。\n\n接下来 $N$ 行描述了停车位的收费率。其中第 $s$ 行包含一个整数 $R_s$，表示编号为 $s$ 的停车位每千克收费的价格。\n\n接下来 $M$ 行描述了车辆的重量。车辆从 $1$ 到 $M$ 编号，其中第 $k$ 行包含一个整数 $W_k$，表示编号为 $k$ 的车辆的重量，单位千克。\n\n接下来 $2M$ 行描述了所有车辆到达和离开的时间顺序。一个正数 $i$ 表示编号为 $i$ 的车辆到达停车场。一个负数 $-i$ 表示编号为 $i$ 的车离开停车场。没有车辆会在到达之前离开停车场，且 $1\\sim M$ 每辆车会在序列中出现恰好两次，一次到达，一次离开。此外，没有车辆会在停入停车场之前离开，也就是说，不会有队列中的车辆离开。", "outputFormat": "一行一个整数，表示停车场管理员今天的收入。", "hint": "### 样例解释\n\n- 样例 1：\n  - 车辆 $3$ 停在车位 $1$，支付 $300\\times 2 = 600$ 美元。\n  - 车辆 $2$ 停在车位 $2$，支付 $100\\times 3 = 300$ 美元。\n  - 车辆 $1$ 停在车位 $1$（车辆 $3$ 空出的停车位），支付 $200\\times 2 = 400$ 美元。\n  - 车辆 $4$ 停在车位 $3$，支付 $800\\times 5 = 4000$ 美元。\n\n- 样例 2：\n  - 车辆 $3$ 停在车位 $1$，支付 $1000\\times 5 = 5000$ 美元。\n  - 车辆 $1$ 停在车位 $2$，支付 $100\\times 2 = 200$ 美元。\n  - 车辆 $2$ 到达并在入口处等待。\n  - 车辆 $4$ 到达并在入口处等待，排在车辆 $2$ 之后。\n  - 当车辆 $1$ 离开时，车辆 $2$ 停在空出的车位 $2$，支付 $500\\times 2 = 1000$ 美元。\n  - 当车辆 $3$ 离开时，车辆 $4$ 停在空出的车位 $1$，支付 $2000\\times 5 = 10000$ 美元。\n\n### 数据范围与约定\n\n- 对于 $40\\%$ 的数据，没有车辆会在停车场等待。\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 100$，$1\\leq M\\leq 2000$，$1\\leq R_s\\leq 100$，$1\\leq W_k\\leq 10 ^ 4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2009] Garage", "background": "IOI2009 D2T1", "description": "一个停车场有 $N$ 个停车位，依次编号为 $1$ 到 $N$。每天早上，停车场的所有停车位都是空的。当一辆车到达停车场时，服务员检查是否有空的停车位。如果没有，则这辆车将在入口处等待，直到有新的停车位。如果有，则这辆车将停在编号最小的空的停车位上。如果多辆车在入口处等待，则它们会按照到达的顺序排成队列，当出现空的停车位时，队列中的第一辆车（最早到达的车辆）将停在该停车位上。\n\n每辆车的停车费是它的重量乘以对应停车位的特定比率，和它在停车场停了多久无关。\n\n停车场管理员得知今天将有 $M$ 辆车前来停车，以及它们到达和离开的顺序。帮他计算今天的收入。\n\n**任务**：编写一个程序，给定每个停车位的特定比率，每辆车的重量和所有车辆到达和离开的顺序，求出车库的总收入。", "inputFormat": "第一行包含两个由空格隔开的整数 $N, M$，分别表示停车位数和车辆数。\n\n接下来 $N$ 行描述了停车位的收费率。其中第 $s$ 行包含一个整数 $R_s$，表示编号为 $s$ 的停车位每千克收费的价格。\n\n接下来 $M$ 行描述了车辆的重量。车辆从 $1$ 到 $M$ 编号，其中第 $k$ 行包含一个整数 $W_k$，表示编号为 $k$ 的车辆的重量，单位千克。\n\n接下来 $2M$ 行描述了所有车辆到达和离开的时间顺序。一个正数 $i$ 表示编号为 $i$ 的车辆到达停车场。一个负数 $-i$ 表示编号为 $i$ 的车离开停车场。没有车辆会在到达之前离开停车场，且 $1\\sim M$ 每辆车会在序列中出现恰好两次，一次到达，一次离开。此外，没有车辆会在停入停车场之前离开，也就是说，不会有队列中的车辆离开。", "outputFormat": "一行一个整数，表示停车场管理员今天的收入。", "hint": "### 样例解释\n\n- 样例 1：\n  - 车辆 $3$ 停在车位 $1$，支付 $300\\times 2 = 600$ 美元。\n  - 车辆 $2$ 停在车位 $2$，支付 $100\\times 3 = 300$ 美元。\n  - 车辆 $1$ 停在车位 $1$（车辆 $3$ 空出的停车位），支付 $200\\times 2 = 400$ 美元。\n  - 车辆 $4$ 停在车位 $3$，支付 $800\\times 5 = 4000$ 美元。\n\n- 样例 2：\n  - 车辆 $3$ 停在车位 $1$，支付 $1000\\times 5 = 5000$ 美元。\n  - 车辆 $1$ 停在车位 $2$，支付 $100\\times 2 = 200$ 美元。\n  - 车辆 $2$ 到达并在入口处等待。\n  - 车辆 $4$ 到达并在入口处等待，排在车辆 $2$ 之后。\n  - 当车辆 $1$ 离开时，车辆 $2$ 停在空出的车位 $2$，支付 $500\\times 2 = 1000$ 美元。\n  - 当车辆 $3$ 离开时，车辆 $4$ 停在空出的车位 $1$，支付 $2000\\times 5 = 10000$ 美元。\n\n### 数据范围与约定\n\n- 对于 $40\\%$ 的数据，没有车辆会在停车场等待。\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 100$，$1\\leq M\\leq 2000$，$1\\leq R_s\\leq 100$，$1\\leq W_k\\leq 10 ^ 4$。", "locale": "zh-CN"}}}
{"pid": "P9116", "type": "P", "difficulty": 5, "samples": [["7 3\nTTTTTTT\nTGGGGGT\nTGGGGGT\nMGGGGGD\nTGGGGGT\nTGGGGGT\nTHHHHHT\n", "1\n"], ["7 3\nTTTTTTT\nTGGGGGT\nTGGGGGT\nMGGGGGD\nTGGGGGT\nTGGGGGT\nTGHHGGT\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2009", "IOI", "O2优化"], "title": "[IOI 2009] Mecho", "background": "IOI2009 D2T2", "description": "小熊 Mecho 发现了一个宝藏 —— 蜜蜂的秘密蜜罐，里面装满了蜂蜜！他高兴地吃着他的新发现的宝藏，直到突然有一只蜜蜂看到了他，并发出了警报。他知道就在这个时刻，成群的蜜蜂会从蜂巢里出来，开始四处蔓延，试图抓住他。他知道他必须离开蜜罐，尽快回家，但蜂蜜太甜了， Mecho 不想太早离开。帮 Mecho 确定他最晚什么时候可以离开。\n\nMecho 所在的森林是 $N\\times N$ 的正方形网格，其两侧平行于南北和东西方向。每个格子由一棵树、一小块草、一个蜂巢或 Mecho 的家占据。如果两个格子中的一个与另一个的北、南、东或西相邻（但不在对角线上），则认为这两个格子相邻。Mecho 是一只笨拙的熊，所以每次它走一步，都只能移动至相邻的格子。Mecho 只能在草地上行走，不能穿过树木或蜂巢，而且他每分钟最多能走 $S$ 步。\n\n当蜜蜂警报响起的那一刻， Mecho 在装有蜜罐的草格子里，而蜜蜂则在每个包含蜂巢的格子里（森林里可能有不止一个蜂巢）。接下来的每一分钟内，以下事件按顺序发生:\n\n1. 如果 Mecho 还在吃蜂蜜，他会决定是继续吃还是离开。如果它继续吃东西，就会一动不动。否则，他会立即离开，并像上面描述的那样移动至多 $S$ 步。 Mecho 不能带任何蜂蜜，所以一旦他移动了，他就不能再吃蜂蜜了。\n\n2. 当 Mecho 吃完或移动了整整一分钟后，蜜蜂在网格中进一步扩散了一个单位，只移动到草格子中。具体地，蜂群扩散到每一个与任何已经有蜜蜂的格子相邻的草格子。此外，一旦一个格子有蜜蜂，它将永远有蜜蜂（也就是说，蜂群不移动，但它生长）。\n\n换句话说，蜜蜂的分布如下：当蜜蜂警报响起时，蜜蜂只占据蜂巢所在的格子。在第一分钟结束时，它们占据了蜂巢附近所有长满草的格子（以及原本的所有蜂巢）。在第二分钟结束时，它们又占据了和 “与蜂巢相邻的草格子” 相邻的草格子，以此类推。只要有足够的时间，这些蜜蜂就会同时占据森林中它们能到达的所有草格子。\n\nMecho 和蜜蜂都不能走出森林。另外，根据上面的规则，Mecho 总是吃整数分钟的蜂蜜。\n\n如果 Mecho 发现自己在一个被蜜蜂占据的格子里，蜜蜂就会抓住 Mecho。\n\n**任务**：编写一个程序，给定一张森林地图，计算出  Mecho 可以在最初的位置继续吃蜂蜜的最长时间，同时还能在任何蜜蜂抓到他之前回到他的家。", "inputFormat": "第一行包含两个由空格隔开的整数 $N, S$，分别表示地图大小和 Mecho 每分钟最多移动的步数。\n\n接下来 $N$ 行描述了森林地图。其中每一行包含 $N$ 个字符，每个字符表示一个格子。可能的字符及其含义如下: \n\n- `T` 表示树。\n- `G` 表示草格子。\n- `M` 表示 Mecho 的初始位置，也是蜜罐的位置。这是一个草格子，蜜蜂可以进入。\n- `D` 表示 Mecho 的家。Mecho 可以进入这个格子，但蜜蜂不可以。\n- `H` 表示蜂巢。\n\n**注意**：保证地图恰好包含一个字母 `M`，恰好一个字母 `D` 和至少一个字母 `H`。保证存在相邻的字母 `G` 形成的路径连接 Mecho 和它的家，以及相邻的字母 `G` 形成的路径连接蜜罐（即 Mecho 最初的位置）和至少一个蜂巢。这些序列可能长度为零，如 Mecho 的家或蜂巢和 Mecho 的初始位置相邻。另外，蜜蜂不能通过或飞过 Mecho 的家。对它们来说，Mecho 的家就像一棵树。", "outputFormat": "输出一行一个整数，表示 Mecho 最多还能在初始位置吃多少分钟蜂蜜，并安全地回家。\n\n如果 Mecho 不可能在蜜蜂抓住它之前回家，输出 $-1$。", "hint": "### 样例解释\n\n- 样例 1：吃了一分钟蜂蜜后，Mecho 可以沿着最短的路径直接往右走，再过两分钟他就可以安全到家了。\n\n- 样例 2：吃了两分钟蜂蜜后，Mecho 可以在第三分钟向右，向上，向右走；在第四分钟向右走三步；在第五分钟向下，向右走。\n\n### 数据范围与约定\n\n- 对于 $40\\%$ 的数据，$N\\leq 60$。\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 800$，$1\\leq S\\leq 1000$。\n\n注意在实际评测中，部分分和以上描述有出入。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IOI 2009] Mecho", "background": "IOI2009 D2T2", "description": "小熊 Mecho 发现了一个宝藏 —— 蜜蜂的秘密蜜罐，里面装满了蜂蜜！他高兴地吃着他的新发现的宝藏，直到突然有一只蜜蜂看到了他，并发出了警报。他知道就在这个时刻，成群的蜜蜂会从蜂巢里出来，开始四处蔓延，试图抓住他。他知道他必须离开蜜罐，尽快回家，但蜂蜜太甜了， Mecho 不想太早离开。帮 Mecho 确定他最晚什么时候可以离开。\n\nMecho 所在的森林是 $N\\times N$ 的正方形网格，其两侧平行于南北和东西方向。每个格子由一棵树、一小块草、一个蜂巢或 Mecho 的家占据。如果两个格子中的一个与另一个的北、南、东或西相邻（但不在对角线上），则认为这两个格子相邻。Mecho 是一只笨拙的熊，所以每次它走一步，都只能移动至相邻的格子。Mecho 只能在草地上行走，不能穿过树木或蜂巢，而且他每分钟最多能走 $S$ 步。\n\n当蜜蜂警报响起的那一刻， Mecho 在装有蜜罐的草格子里，而蜜蜂则在每个包含蜂巢的格子里（森林里可能有不止一个蜂巢）。接下来的每一分钟内，以下事件按顺序发生:\n\n1. 如果 Mecho 还在吃蜂蜜，他会决定是继续吃还是离开。如果它继续吃东西，就会一动不动。否则，他会立即离开，并像上面描述的那样移动至多 $S$ 步。 Mecho 不能带任何蜂蜜，所以一旦他移动了，他就不能再吃蜂蜜了。\n\n2. 当 Mecho 吃完或移动了整整一分钟后，蜜蜂在网格中进一步扩散了一个单位，只移动到草格子中。具体地，蜂群扩散到每一个与任何已经有蜜蜂的格子相邻的草格子。此外，一旦一个格子有蜜蜂，它将永远有蜜蜂（也就是说，蜂群不移动，但它生长）。\n\n换句话说，蜜蜂的分布如下：当蜜蜂警报响起时，蜜蜂只占据蜂巢所在的格子。在第一分钟结束时，它们占据了蜂巢附近所有长满草的格子（以及原本的所有蜂巢）。在第二分钟结束时，它们又占据了和 “与蜂巢相邻的草格子” 相邻的草格子，以此类推。只要有足够的时间，这些蜜蜂就会同时占据森林中它们能到达的所有草格子。\n\nMecho 和蜜蜂都不能走出森林。另外，根据上面的规则，Mecho 总是吃整数分钟的蜂蜜。\n\n如果 Mecho 发现自己在一个被蜜蜂占据的格子里，蜜蜂就会抓住 Mecho。\n\n**任务**：编写一个程序，给定一张森林地图，计算出  Mecho 可以在最初的位置继续吃蜂蜜的最长时间，同时还能在任何蜜蜂抓到他之前回到他的家。", "inputFormat": "第一行包含两个由空格隔开的整数 $N, S$，分别表示地图大小和 Mecho 每分钟最多移动的步数。\n\n接下来 $N$ 行描述了森林地图。其中每一行包含 $N$ 个字符，每个字符表示一个格子。可能的字符及其含义如下: \n\n- `T` 表示树。\n- `G` 表示草格子。\n- `M` 表示 Mecho 的初始位置，也是蜜罐的位置。这是一个草格子，蜜蜂可以进入。\n- `D` 表示 Mecho 的家。Mecho 可以进入这个格子，但蜜蜂不可以。\n- `H` 表示蜂巢。\n\n**注意**：保证地图恰好包含一个字母 `M`，恰好一个字母 `D` 和至少一个字母 `H`。保证存在相邻的字母 `G` 形成的路径连接 Mecho 和它的家，以及相邻的字母 `G` 形成的路径连接蜜罐（即 Mecho 最初的位置）和至少一个蜂巢。这些序列可能长度为零，如 Mecho 的家或蜂巢和 Mecho 的初始位置相邻。另外，蜜蜂不能通过或飞过 Mecho 的家。对它们来说，Mecho 的家就像一棵树。", "outputFormat": "输出一行一个整数，表示 Mecho 最多还能在初始位置吃多少分钟蜂蜜，并安全地回家。\n\n如果 Mecho 不可能在蜜蜂抓住它之前回家，输出 $-1$。", "hint": "### 样例解释\n\n- 样例 1：吃了一分钟蜂蜜后，Mecho 可以沿着最短的路径直接往右走，再过两分钟他就可以安全到家了。\n\n- 样例 2：吃了两分钟蜂蜜后，Mecho 可以在第三分钟向右，向上，向右走；在第四分钟向右走三步；在第五分钟向下，向右走。\n\n### 数据范围与约定\n\n- 对于 $40\\%$ 的数据，$N\\leq 60$。\n- 对于 $100\\%$ 的数据，$1\\leq N\\leq 800$，$1\\leq S\\leq 1000$。\n\n注意在实际评测中，部分分和以上描述有出入。", "locale": "zh-CN"}}}
{"pid": "P9117", "type": "P", "difficulty": 2, "samples": [["2\n5 5 9\n1 5 1\n0 4 0\n1 4 1\n0 3 0\n1 3 1\n0 2 0\n1 2 1\n0 1 0\n1 1 1\n3 3 3\n0 1 2\n0 3 1\n1 1 3", "1 0 0 0 0\n1 1 0 0 0\n1 1 1 0 0\n1 1 1 1 0\n1 1 1 1 1\n3 2 2\n3 0 0\n3 1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2023", "NOIP 提高组", "O2优化"], "title": "[春季测试 2023] 涂色游戏", "background": "", "description": "有一天，小 D 在刷朋友圈时看到了一段游戏视频。\n\n这个游戏的名字叫涂色游戏，视频中的游戏界面是一个 $n$ 行 $m$ 列的网格，初始时每一个格子都是白色（用数字 $0$ 表示）。其中每一行的左侧、每一列的上方都有一把带颜色的刷子。玩家点击某个刷子后，这个刷子会将其右侧（或下方）的一整行（或一整列）涂上同一种颜色，**该行（或该列）格子原有的颜色都会被覆盖成新涂上的颜色。**\n\n下图展示的情况可以通过先将第一列涂成红色，然后将第一行涂成蓝色得到，若此时选择将第三列涂成绿色，则图中绿色方框中的格子都会变成绿色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dc71alkw.png)\n\n小 D 想用他自己编写的程序来进行视频中的游戏。在编程的过程中，小 D 在涂色逻辑的实现上却遇到了一些困难，于是他向你求助，希望你能帮他完成实现涂色逻辑部分的代码。\n\n首先，小 D 会给你网格的行数和列数 $n, m$，然后给出 $q$ 次操作，每次操作用三个整数 $opt_i, x_i, c_i$ 表示：\n\n- 如果 $opt_i=0$，那么这次操作会将第 $x_i$ **行**涂成颜色 $c_i$。\n- 如果 $opt_i=1$，那么这次操作会将第 $x_i$ **列**涂成颜色 $c_i$。\n\n在所有涂色操作结束以后，你需要输出网格中每个位置的颜色是什么。", "inputFormat": "**本题有多组测试数据。**\n\n第一行包含一个正整数 $T$，表示数据组数。\n\n接下来一共 $T$ 组数据，每组数据格式如下：\n\n第一行包含三个整数 $n, m, q$，分别表示涂色板的行数、列数，以及小 D 进行涂色操作的次数。\n\n接下来 $q$ 行，每行包含三个整数 $opt_i, x_i, c_i$，表示一次操作。\n\n", "outputFormat": "对于每组数据，输出 $n$ 行，每行 $m$ 个由单个空格隔开的整数。\n\n其中第 $i$ 行第 $j$ 个整数表示涂色完成后网格中第 $i$ 行第 $j$ 列的方格是什么颜色。", "hint": "**【样例 1 解释】**\n\n注意当一个格子没有被涂色时，其颜色为白色，用数字 $0$ 表示。\n\n**【样例 2】**\n\n见选手目录下的 paint/paint2.in 与 paint/paint2.ans。\n\n**【数据范围】**\n\n对于所有数据，保证：\n\n- $1 \\leq T \\leq 10$，$1 \\leq n,m \\leq 10^5$，$0 \\leq q \\leq 10^5$，$0 \\leq c_i \\leq 10^9$。\n- 若 $opt_i=0$，则 $1 \\leq x_i \\leq n$；若 $opt_i=1$，则 $1 \\leq x_i \\leq m$。\n- 单个测试点中所有数据的 $n \\cdot m$ 的总和不超过 $10^6$，$q$ 的总和不超过 $10^6$。\n\n|测试点|$n \\le$|$m \\le$|$q \\le$|性质 A|性质 B|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|1|$1$|$1$|$0$|√|√|\n|2|$1$|$1$|$1$|√|√|\n|3|$1$|$10$|$20$|√|√|\n|4|$1$|$10^5$|$10^5$|×|√|\n|5|$1$|$10^5$|$10^5$|×|√|\n|6|$1$|$10^5$|$10^5$|×|×|\n|7|$10$|$10$|$20$|√|√|\n|8|$50$|$50$|$100$|√|√|\n|9|$50$|$50$|$100$|√|×|\n|10|$1000$|$1000$|$2000$|×|√|\n|11|$1000$|$1000$|$2000$|×|×|\n|12|$1000$|$1000$|$2000$|×|×|\n|13|$1000$|$1000$|$10^5$|×|×|\n|14|$1000$|$1000$|$10^5$|×|×|\n|15|$10^5$|$10^5$|$10^5$|√|√|\n|16|$10^5$|$10^5$|$10^5$|√|√|\n|17|$10^5$|$10^5$|$10^5$|√|×|\n|18|$10^5$|$10^5$|$10^5$|√|×|\n|19|$10^5$|$10^5$|$10^5$|×|×|\n|20|$10^5$|$10^5$|$10^5$|×|×|\n\n特殊性质 A：保证测试点中所有的 $q \\cdot \\max(n, m)$ 之和不超过 $10^7$。\n\n特殊性质 B：保证 $opt_i = 1$。\n\n**【提示】**\n\n数据千万条，清空第一条。多测不清空，爆零两行泪。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[春季测试 2023] 涂色游戏", "background": "", "description": "有一天，小 D 在刷朋友圈时看到了一段游戏视频。\n\n这个游戏的名字叫涂色游戏，视频中的游戏界面是一个 $n$ 行 $m$ 列的网格，初始时每一个格子都是白色（用数字 $0$ 表示）。其中每一行的左侧、每一列的上方都有一把带颜色的刷子。玩家点击某个刷子后，这个刷子会将其右侧（或下方）的一整行（或一整列）涂上同一种颜色，**该行（或该列）格子原有的颜色都会被覆盖成新涂上的颜色。**\n\n下图展示的情况可以通过先将第一列涂成红色，然后将第一行涂成蓝色得到，若此时选择将第三列涂成绿色，则图中绿色方框中的格子都会变成绿色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dc71alkw.png)\n\n小 D 想用他自己编写的程序来进行视频中的游戏。在编程的过程中，小 D 在涂色逻辑的实现上却遇到了一些困难，于是他向你求助，希望你能帮他完成实现涂色逻辑部分的代码。\n\n首先，小 D 会给你网格的行数和列数 $n, m$，然后给出 $q$ 次操作，每次操作用三个整数 $opt_i, x_i, c_i$ 表示：\n\n- 如果 $opt_i=0$，那么这次操作会将第 $x_i$ **行**涂成颜色 $c_i$。\n- 如果 $opt_i=1$，那么这次操作会将第 $x_i$ **列**涂成颜色 $c_i$。\n\n在所有涂色操作结束以后，你需要输出网格中每个位置的颜色是什么。", "inputFormat": "**本题有多组测试数据。**\n\n第一行包含一个正整数 $T$，表示数据组数。\n\n接下来一共 $T$ 组数据，每组数据格式如下：\n\n第一行包含三个整数 $n, m, q$，分别表示涂色板的行数、列数，以及小 D 进行涂色操作的次数。\n\n接下来 $q$ 行，每行包含三个整数 $opt_i, x_i, c_i$，表示一次操作。\n\n", "outputFormat": "对于每组数据，输出 $n$ 行，每行 $m$ 个由单个空格隔开的整数。\n\n其中第 $i$ 行第 $j$ 个整数表示涂色完成后网格中第 $i$ 行第 $j$ 列的方格是什么颜色。", "hint": "**【样例 1 解释】**\n\n注意当一个格子没有被涂色时，其颜色为白色，用数字 $0$ 表示。\n\n**【样例 2】**\n\n见选手目录下的 paint/paint2.in 与 paint/paint2.ans。\n\n**【数据范围】**\n\n对于所有数据，保证：\n\n- $1 \\leq T \\leq 10$，$1 \\leq n,m \\leq 10^5$，$0 \\leq q \\leq 10^5$，$0 \\leq c_i \\leq 10^9$。\n- 若 $opt_i=0$，则 $1 \\leq x_i \\leq n$；若 $opt_i=1$，则 $1 \\leq x_i \\leq m$。\n- 单个测试点中所有数据的 $n \\cdot m$ 的总和不超过 $10^6$，$q$ 的总和不超过 $10^6$。\n\n|测试点|$n \\le$|$m \\le$|$q \\le$|性质 A|性质 B|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|1|$1$|$1$|$0$|√|√|\n|2|$1$|$1$|$1$|√|√|\n|3|$1$|$10$|$20$|√|√|\n|4|$1$|$10^5$|$10^5$|×|√|\n|5|$1$|$10^5$|$10^5$|×|√|\n|6|$1$|$10^5$|$10^5$|×|×|\n|7|$10$|$10$|$20$|√|√|\n|8|$50$|$50$|$100$|√|√|\n|9|$50$|$50$|$100$|√|×|\n|10|$1000$|$1000$|$2000$|×|√|\n|11|$1000$|$1000$|$2000$|×|×|\n|12|$1000$|$1000$|$2000$|×|×|\n|13|$1000$|$1000$|$10^5$|×|×|\n|14|$1000$|$1000$|$10^5$|×|×|\n|15|$10^5$|$10^5$|$10^5$|√|√|\n|16|$10^5$|$10^5$|$10^5$|√|√|\n|17|$10^5$|$10^5$|$10^5$|√|×|\n|18|$10^5$|$10^5$|$10^5$|√|×|\n|19|$10^5$|$10^5$|$10^5$|×|×|\n|20|$10^5$|$10^5$|$10^5$|×|×|\n\n特殊性质 A：保证测试点中所有的 $q \\cdot \\max(n, m)$ 之和不超过 $10^7$。\n\n特殊性质 B：保证 $opt_i = 1$。\n\n**【提示】**\n\n数据千万条，清空第一条。多测不清空，爆零两行泪。\n", "locale": "zh-CN"}}}
{"pid": "P9118", "type": "P", "difficulty": 4, "samples": [["99 1", "99"], ["99 3", "7"], ["99 2", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "2023", "NOIP 提高组", "O2优化", "枚举", "容斥原理"], "title": "[春季测试 2023] 幂次", "background": null, "description": "小 Ω 在小学数学课上学到了“幂次”的概念：$\\forall a, b \\in \\N^+$，定义 $a^b$ 为 $b$ 个 $a$ 相乘。\n\n她很好奇有多少正整数可以被表示为上述 $a^b$ 的形式？由于所有正整数 $m \\in \\N^+$ 总是可以被表示为 $m^1$ 的形式，因此她要求上述的表示中，必须有 $b \\geq k$，其中 $k$ 是她事先选取好的一个正整数。\n\n因此她想知道在 $1$ 到 $n$ 中，有多少正整数 $x$ 可以被表示为 $x = a^b$ 的形式，其中 $a, b$ 都是正整数，且 $b \\geq k$？", "inputFormat": "第一行包含两个正整数 $n, k$，意义如上所述。", "outputFormat": "输出一行包含一个非负整数表示对应的答案。", "hint": "**【样例 2 解释】**\n\n以下是全部 $7$ 组符合题意的正整数及对应的一种合法的表示方法。\n\n$1 = 1^3, 8 = 2^3, 16 = 2^4, 27 = 3^3, 32 = 2^5, 64 = 4^3, 81 = 3^4$。\n\n注意某些正整数可能有多种合法的表示方法，例如 $64$ 还可以表示为 $64 = 2^6$。\n\n但根据题意，同一个数的不同的合法表示方法只会被计入一次。\n\n**【样例 3 解释】**\n\n以下是全部 $12$ 组符合题意的正整数及对应的一种合法的表示方法。\n\n$1 = 1^2, 4 = 2^2, 8 = 2^3, 9 = 3^2, 16 = 4^2, 25 = 5^2, 27 = 3^3, 32 = 2^5, 36 = 6^2, 49 = 7^2, 64 = 8^2, 81 = 9^2$。\n\n**【样例 4】**\n\n见选手目录下的 power/power4.in 与 power/power4.ans。\n\n**【样例 5】**\n\n见选手目录下的 power/power5.in 与 power/power5.ans。\n\n**【样例 6】**\n\n见选手目录下的 power/power6.in 与 power/power6.ans。\n\n\n**【数据范围】**\n\n对于所有数据，保证 $1 \\leq n \\leq 10^{18}$，$1 \\leq k \\leq 100$。\n\n|测试点编号|$n \\le$|$k$|\n|:-:|:-:|:-:|\n|1|$10^2$|$=1$|\n|2|$10^2$|$\\ge 2$|\n|3|$10^4$|$\\ge 3$|\n|4|$10^4$|$\\ge 2$|\n|5|$10^6$|$\\ge 3$|\n|6|$10^6$|$\\ge 2$|\n|7|$10^8$|$\\ge 3$|\n|8|$10^8$|$\\ge 2$|\n|9|$10^{10}$|$\\ge 3$|\n|10|$10^{10}$|$\\ge 2$|\n|11|$10^{12}$|$\\ge 3$|\n|12|$10^{12}$|$\\ge 2$|\n|13|$10^{14}$|$\\ge 3$|\n|14|$10^{14}$|$\\ge 2$|\n|15|$10^{16}$|$\\ge 3$|\n|16|$10^{16}$|$\\ge 2$|\n|17|$10^{18}$|$\\ge 3$|\n|18|$10^{18}$|$\\ge 2$|\n|19|$10^{18}$|$\\ge 2$|\n|20|$10^{18}$|$\\ge 2$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[春季测试 2023] 幂次", "background": null, "description": "小 Ω 在小学数学课上学到了“幂次”的概念：$\\forall a, b \\in \\N^+$，定义 $a^b$ 为 $b$ 个 $a$ 相乘。\n\n她很好奇有多少正整数可以被表示为上述 $a^b$ 的形式？由于所有正整数 $m \\in \\N^+$ 总是可以被表示为 $m^1$ 的形式，因此她要求上述的表示中，必须有 $b \\geq k$，其中 $k$ 是她事先选取好的一个正整数。\n\n因此她想知道在 $1$ 到 $n$ 中，有多少正整数 $x$ 可以被表示为 $x = a^b$ 的形式，其中 $a, b$ 都是正整数，且 $b \\geq k$？", "inputFormat": "第一行包含两个正整数 $n, k$，意义如上所述。", "outputFormat": "输出一行包含一个非负整数表示对应的答案。", "hint": "**【样例 2 解释】**\n\n以下是全部 $7$ 组符合题意的正整数及对应的一种合法的表示方法。\n\n$1 = 1^3, 8 = 2^3, 16 = 2^4, 27 = 3^3, 32 = 2^5, 64 = 4^3, 81 = 3^4$。\n\n注意某些正整数可能有多种合法的表示方法，例如 $64$ 还可以表示为 $64 = 2^6$。\n\n但根据题意，同一个数的不同的合法表示方法只会被计入一次。\n\n**【样例 3 解释】**\n\n以下是全部 $12$ 组符合题意的正整数及对应的一种合法的表示方法。\n\n$1 = 1^2, 4 = 2^2, 8 = 2^3, 9 = 3^2, 16 = 4^2, 25 = 5^2, 27 = 3^3, 32 = 2^5, 36 = 6^2, 49 = 7^2, 64 = 8^2, 81 = 9^2$。\n\n**【样例 4】**\n\n见选手目录下的 power/power4.in 与 power/power4.ans。\n\n**【样例 5】**\n\n见选手目录下的 power/power5.in 与 power/power5.ans。\n\n**【样例 6】**\n\n见选手目录下的 power/power6.in 与 power/power6.ans。\n\n\n**【数据范围】**\n\n对于所有数据，保证 $1 \\leq n \\leq 10^{18}$，$1 \\leq k \\leq 100$。\n\n|测试点编号|$n \\le$|$k$|\n|:-:|:-:|:-:|\n|1|$10^2$|$=1$|\n|2|$10^2$|$\\ge 2$|\n|3|$10^4$|$\\ge 3$|\n|4|$10^4$|$\\ge 2$|\n|5|$10^6$|$\\ge 3$|\n|6|$10^6$|$\\ge 2$|\n|7|$10^8$|$\\ge 3$|\n|8|$10^8$|$\\ge 2$|\n|9|$10^{10}$|$\\ge 3$|\n|10|$10^{10}$|$\\ge 2$|\n|11|$10^{12}$|$\\ge 3$|\n|12|$10^{12}$|$\\ge 2$|\n|13|$10^{14}$|$\\ge 3$|\n|14|$10^{14}$|$\\ge 2$|\n|15|$10^{16}$|$\\ge 3$|\n|16|$10^{16}$|$\\ge 2$|\n|17|$10^{18}$|$\\ge 3$|\n|18|$10^{18}$|$\\ge 2$|\n|19|$10^{18}$|$\\ge 2$|\n|20|$10^{18}$|$\\ge 2$|", "locale": "zh-CN"}}}
{"pid": "P9119", "type": "P", "difficulty": 5, "samples": [["3\n0.000000000 0.000000000\n3.000000000 0.000000000\n1.000000000 1.000000000\n", "3 1 2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "贪心", "2023", "NOIP 提高组", "Special Judge", "O2优化", "区间 DP"], "title": "[春季测试 2023] 圣诞树", "background": "", "description": "众所周知，3202 年的圣诞节快要到了，因此小 Ω 买了一棵圣诞树和一根挂满了彩灯的电线，并打算把这根电线缠绕在圣诞树上。\n\n圣诞树可以视作一个二维平面上有 $n$ 个顶点的**凸多边形**。这 $n$ 个顶点可以用于固定电线，且按**逆时针顺序**依次编号为 $1, \\ldots, n$。其中第 $i$ 个顶点的坐标为 $(x_i, y_i)$，记其中 **$y$ 坐标最大**的顶点的编号为 $k$（若有多个满足条件的顶点，则取**编号最小**的）。不保证编号为 $1$ 的顶点的 $x$ 坐标最小。\n\n下图左侧展示了一棵圣诞树的轮廓，其中 **$y$ 坐标最大**的顶点的编号为 $k = 5$。\n\n![图 2：一棵圣诞树及一种可能的挂电线的方案](https://cdn.luogu.com.cn/upload/image_hosting/ayjegrhj.png)\n\n小 Ω 希望用挂满了彩灯的电线装饰这棵圣诞树。出于美观性考虑，她希望这根电线**经过所有顶点恰好一次**；为了连接电源，这根电线需要**从 $(x_k, y_k)$ 出发**。形式化地，她需要决定一个 $1, \\cdots, n$ 的**排列** $p_1, \\cdots, p_n$，满足 $p_1 = k$，随后这根电线从 $(x_{p_1}, y_{p_1})$ 出发，依次经过 $(x_{p_2}, y_{p_2}), \\cdots, (x_{p_n}, y_{p_n})$。此时，电线长度为 $\\sum_{i=1}^{n-1}{\\operatorname{d}((x_{p_i}, y_{p_i}), (x_{p_{i+1}}, y_{p_{i+1}}))}$。\n\n- 其中 $\\operatorname{d}$ 为平面上的**欧几里得距离**，即 $\\operatorname{d}((x, y), (x', y')) = \\sqrt{(x - x')^2 + (y - y')^2}$。\n\n上图右侧展示了一种可能的方案，此时对应的排列为 $5, 4, 8, 6, 3, 9, 1, 7, 2$。\n\n为了节省成本，她希望你能在所有可能的方案中，给出一种使电线长度**最短**的方案。如果使电线长度最短的方案不唯一，你只需要求出其中**任意**一种。\n\n**考虑到浮点数产生的误差，你输出的方案与最优方案的线段长度的相对误差或绝对误差不超过 $10^{-10}$ 时即认为答案正确**。\n", "inputFormat": "第一行包含一个正整数 $n$，表示圣诞树的顶点数。\n\n接下来 $n$ 行，其中第 $i$ 行包含两个精确到小数点后 $9$ 位的实数 $x_i, y_i$ 表示编号为 $i$ 的顶点的坐标。\n\n数据保证这 $n$ 个点**两两不同**，并且依次连接 $(x_1, y_1), (x_2, y_2), \\cdots, (x_n, y_n)$ 将形成一个**凸多边形**。\n", "outputFormat": "输出一行包含 $n$ 个由单个空格隔开的正整数 $p_1, p_2, \\cdots, p_n$，表示一个 $1, \\cdots, n$ 的排列，满足 $p_1 = k$，且电线的长度 $\\sum_{i=1}^{n-1}{\\operatorname{d}((x_{p_i}, y_{p_i}), (x_{p_{i+1}}, y_{p_{i+1}}))}$ 在所有可能的方案中**最短**。如果这样的方案不唯一，请输出其中任意一种方案。\n", "hint": "**【样例 1 解释】**\n\n这一样例中只有下图所示的两种方案，对应排列分别为 $3, 1, 2$ 或 $3, 2, 1$，电线长度分别为 $3 + \\sqrt{2}$ 和 $3 + \\sqrt{5}$，而 $3 + \\sqrt{2} < 3 + \\sqrt{5}$。\n\n因此答案对应的排列为 $3, 1, 2$。\n\n![图 3：样例 1 的全部两种可能的方案](https://cdn.luogu.com.cn/upload/image_hosting/tcwvp72y.png)\n\n**【数据范围】**\n\n对于所有数据，保证 $3 \\le n \\le 1000$；$|x_i|, |y_i| \\le 10^7$。\n\n|测试点编号|$n \\le$|特殊性质|\n|:-:|:-:|:-:|\n|1, 2|$4$|无|\n|3, 4, 5, 6|$9$|无|\n|7, 8, 9, 10, 11, 12|$18$|无|\n|13, 14|$10^3$|A|\n|15, 16|$10^3$|B|\n|17, 18, 19, 20|$10^3$|无|\n\n特殊性质 A：保证存在正整数 $m \\ge n$，使得输入的 $n$ 个顶点对应正 $m$ 边形中连续的一段顶点。\n\n特殊性质 B：保证 $x_1 < x_2 < \\cdots < x_n$，且 $y_1 > y_2 > \\cdots > y_n$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[春季测试 2023] 圣诞树", "background": "", "description": "众所周知，3202 年的圣诞节快要到了，因此小 Ω 买了一棵圣诞树和一根挂满了彩灯的电线，并打算把这根电线缠绕在圣诞树上。\n\n圣诞树可以视作一个二维平面上有 $n$ 个顶点的**凸多边形**。这 $n$ 个顶点可以用于固定电线，且按**逆时针顺序**依次编号为 $1, \\ldots, n$。其中第 $i$ 个顶点的坐标为 $(x_i, y_i)$，记其中 **$y$ 坐标最大**的顶点的编号为 $k$（若有多个满足条件的顶点，则取**编号最小**的）。不保证编号为 $1$ 的顶点的 $x$ 坐标最小。\n\n下图左侧展示了一棵圣诞树的轮廓，其中 **$y$ 坐标最大**的顶点的编号为 $k = 5$。\n\n![图 2：一棵圣诞树及一种可能的挂电线的方案](https://cdn.luogu.com.cn/upload/image_hosting/ayjegrhj.png)\n\n小 Ω 希望用挂满了彩灯的电线装饰这棵圣诞树。出于美观性考虑，她希望这根电线**经过所有顶点恰好一次**；为了连接电源，这根电线需要**从 $(x_k, y_k)$ 出发**。形式化地，她需要决定一个 $1, \\cdots, n$ 的**排列** $p_1, \\cdots, p_n$，满足 $p_1 = k$，随后这根电线从 $(x_{p_1}, y_{p_1})$ 出发，依次经过 $(x_{p_2}, y_{p_2}), \\cdots, (x_{p_n}, y_{p_n})$。此时，电线长度为 $\\sum_{i=1}^{n-1}{\\operatorname{d}((x_{p_i}, y_{p_i}), (x_{p_{i+1}}, y_{p_{i+1}}))}$。\n\n- 其中 $\\operatorname{d}$ 为平面上的**欧几里得距离**，即 $\\operatorname{d}((x, y), (x', y')) = \\sqrt{(x - x')^2 + (y - y')^2}$。\n\n上图右侧展示了一种可能的方案，此时对应的排列为 $5, 4, 8, 6, 3, 9, 1, 7, 2$。\n\n为了节省成本，她希望你能在所有可能的方案中，给出一种使电线长度**最短**的方案。如果使电线长度最短的方案不唯一，你只需要求出其中**任意**一种。\n\n**考虑到浮点数产生的误差，你输出的方案与最优方案的线段长度的相对误差或绝对误差不超过 $10^{-10}$ 时即认为答案正确**。\n", "inputFormat": "第一行包含一个正整数 $n$，表示圣诞树的顶点数。\n\n接下来 $n$ 行，其中第 $i$ 行包含两个精确到小数点后 $9$ 位的实数 $x_i, y_i$ 表示编号为 $i$ 的顶点的坐标。\n\n数据保证这 $n$ 个点**两两不同**，并且依次连接 $(x_1, y_1), (x_2, y_2), \\cdots, (x_n, y_n)$ 将形成一个**凸多边形**。\n", "outputFormat": "输出一行包含 $n$ 个由单个空格隔开的正整数 $p_1, p_2, \\cdots, p_n$，表示一个 $1, \\cdots, n$ 的排列，满足 $p_1 = k$，且电线的长度 $\\sum_{i=1}^{n-1}{\\operatorname{d}((x_{p_i}, y_{p_i}), (x_{p_{i+1}}, y_{p_{i+1}}))}$ 在所有可能的方案中**最短**。如果这样的方案不唯一，请输出其中任意一种方案。\n", "hint": "**【样例 1 解释】**\n\n这一样例中只有下图所示的两种方案，对应排列分别为 $3, 1, 2$ 或 $3, 2, 1$，电线长度分别为 $3 + \\sqrt{2}$ 和 $3 + \\sqrt{5}$，而 $3 + \\sqrt{2} < 3 + \\sqrt{5}$。\n\n因此答案对应的排列为 $3, 1, 2$。\n\n![图 3：样例 1 的全部两种可能的方案](https://cdn.luogu.com.cn/upload/image_hosting/tcwvp72y.png)\n\n**【数据范围】**\n\n对于所有数据，保证 $3 \\le n \\le 1000$；$|x_i|, |y_i| \\le 10^7$。\n\n|测试点编号|$n \\le$|特殊性质|\n|:-:|:-:|:-:|\n|1, 2|$4$|无|\n|3, 4, 5, 6|$9$|无|\n|7, 8, 9, 10, 11, 12|$18$|无|\n|13, 14|$10^3$|A|\n|15, 16|$10^3$|B|\n|17, 18, 19, 20|$10^3$|无|\n\n特殊性质 A：保证存在正整数 $m \\ge n$，使得输入的 $n$ 个顶点对应正 $m$ 边形中连续的一段顶点。\n\n特殊性质 B：保证 $x_1 < x_2 < \\cdots < x_n$，且 $y_1 > y_2 > \\cdots > y_n$。\n", "locale": "zh-CN"}}}
{"pid": "P9120", "type": "P", "difficulty": 6, "samples": [["2 3\n3\n1 2 1\n2 3 2\n3 1 3\n2\n1 2\n2 1\n1 2", "0\n1"], ["见选手目录下的 lock/lock2.in。", "见选手目录下的 lock/lock2.ans。"], ["见选手目录下的 lock/lock3.in。", "见选手目录下的 lock/lock3.ans。"], ["见选手目录下的 lock/lock4.in。", "见选手目录下的 lock/lock4.ans。"], ["见选手目录下的 lock/lock5.in。", "见选手目录下的 lock/lock5.ans。"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "二分", "并查集", "2023", "NOIP 提高组", "O2优化"], "title": "[春季测试 2023] 密码锁", "background": "", "description": "寒假过后，小 I 回到学校，发现自己忘记了自行车锁的密码，于是请你帮忙。\n\n小 I 自行车上的密码锁有 $n$ 个拨圈，每个拨圈有 $k$（$k \\leq 4$）格。密码锁上的每一格都包含一个正整数，其中第 $j$ 个拨圈的第 $i$ 格上的正整数为 $a _ {i, j}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0owivo0l.png)\n\n（一个锁的例子，其中 $k = n = 3$，每列表示一个拨圈，拨圈的格子从上往下编号。）\n\n你可以对每个拨圈拨若干次（也可以不拨），每拨一次拨圈，它的格子就会进行一次轮换。形式化地，拨第 $j$ 个拨圈一次，则会让第 $j$ 个拨圈上第 $i$ 格的数字移动到第 $((i \\bmod k) + 1)$ 格，其他拨圈不动。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9d3g6b74.png)\n\n（一个拨动拨圈的例子，对左侧的锁拨一次第二个拨圈得到右侧的锁。）\n\n为了方便记忆，小 I 设定密码时要求同一行上的数字尽可能靠近。\n形式化地，对于 $1 \\leq i \\leq k$，定义密码锁第 $i$ 行的松散度为\n\n$$\nc(i) = \\max \\limits _ {j = 1} ^ n a _ {i, j} - \\min \\limits _ {j = 1} ^ n a _ {i, j} \n$$\n\n同时定义整个密码锁的松散度为\n\n$$\nC = \\max \\limits _ {1 \\leq i \\leq k} c(i)\n$$\n\n因为能开锁的状态满足 $C$ 尽可能小，因此小 I 希望你找出最小的 $C$ 值。", "inputFormat": "**本题有多组测试数据，题目保证一个测试点中所有测试数据的 $k$ 相同。**\n\n第一行包含两个正整数 $T, k$，分别表示测试数据组数和密码锁拨圈上的格数。\n\n接下来一共 $T$ 组数据，每组数据格式如下：\n\n第一行包含一个正整数 $n$，表示拨圈数。\n\n接下来 $k$ 行，每行包含 $n$ 个正整数，其中第 $i$ 行第 $j$ 个整数 $a _ {i,j}$ 表示密码锁第 $j$ 个拨圈上第 $i$ 格对应的数字。\n\n**注意输入的矩阵中每一列对应一个拨圈，而非每一行对应一个拨圈。**", "outputFormat": "对于每组数据，输出一行包含一个整数，表示所有方案中 $C$ 的最小值。", "hint": "**【样例 1 解释】**\n\n第一组样例对应题目描述中的例子。\n在拨第二个拨圈一次后，每个拨圈都是 $\\{1, 2, 3\\}$，此时松散度为 $0$。\n容易证明无论如何松散度都不可能小于 $0$，因此输出 $0$。\n\n以下四个样例分别对应 $k = 1, 2, 3, 4$ 的情况，且样例中 $n$ 的取值有一定梯度。\n\n**【数据范围】**\n\n设 $\\sum n$ 为一个测试点中所有测试数据的 $n$ 的和。\n\n对于所有数据，保证 $1 \\leq T$，$1 \\leq k \\leq 4$，$1 \\leq a _ {i ,j} \\leq  3 \\times 10 ^ 4$。\n\n\n本题分为两类测试点。\n\n\n第一类测试点共有十二个，保证 $k \\leq 3$，$n \\leq 5 \\times 10 ^ 4$，$\\sum n \\leq 1.5 \\times 10 ^ 5$。\n\n| 测试点编号 | $n \\leq$ | $\\sum n \\leq $ | $k = $ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $100$ | $1$ |\n| $2$ | $5 \\times 10 ^ 4$ | $1.5 \\times 10 ^ 5$ | $1$ |\n| $3$ | $20$ | $100$ | $2$ |\n| $4$ | $100$ | $1000$ | $2$ |\n| $5$ | $2000$ | $10 ^ 4$ | $2$ |\n| $6$ | $5 \\times 10 ^ 4$ | $1.5 \\times 10 ^ 5$ | $2$ |\n| $7$ | $10$ | $50$ | $3$ |\n| $8$ | $50$ | $500$ | $3$ |\n| $9$ | $300$ | $3000$ | $3$ |\n| $10$ | $3000$ | $2 \\times 10 ^ 4$ | $3$ |\n| $11$ | $3 \\times 10 ^ 4$ | $1.2 \\times 10 ^ 5$ | $3$ |\n| $12$ | $5 \\times 10 ^ 4$ | $1.5 \\times 10 ^ 5$ | $3$ |\n\n第二类测试点共有八个，保证 $k = 4$，$n \\leq 10 ^ 4$，\n$\\sum n \\leq 3 \\times 10 ^ 4$。\n\n| 测试点编号 | $n \\leq$ | $\\sum n \\leq $ | $k = $ |\n| :----------: | :----------: | :----------: | :----------: |\n| $13$ | $10$ | $50$ | $4$ |\n| $14$ | $50$ | $500$ | $4$ |\n| $15$ | $200$ | $2000$ | $4$ |\n| $16$ | $500$ | $4000$ | $4$ |\n| $17$ | $2500$ | $10 ^ 4$ | $4$ |\n| $18$ | $5000$ | $2 \\times 10 ^ 4$ | $4$ |\n| $19$ | $10 ^ 4$ | $3 \\times 10 ^ 4$ | $4$ |\n| $20$ | $10 ^ 4$ | $3 \\times 10 ^ 4$ | $4$ |\n\n**【后记】**\n\n你花了九牛二虎之力算出 $C$ 的值之后，小 I 却告诉你他已经找开锁师傅用锤子暴力破解了。在你的百般劝说下，小 I 承诺以后锁车不用有大于等于一万个拨圈的密码锁。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[春季测试 2023] 密码锁", "background": "", "description": "寒假过后，小 I 回到学校，发现自己忘记了自行车锁的密码，于是请你帮忙。\n\n小 I 自行车上的密码锁有 $n$ 个拨圈，每个拨圈有 $k$（$k \\leq 4$）格。密码锁上的每一格都包含一个正整数，其中第 $j$ 个拨圈的第 $i$ 格上的正整数为 $a _ {i, j}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0owivo0l.png)\n\n（一个锁的例子，其中 $k = n = 3$，每列表示一个拨圈，拨圈的格子从上往下编号。）\n\n你可以对每个拨圈拨若干次（也可以不拨），每拨一次拨圈，它的格子就会进行一次轮换。形式化地，拨第 $j$ 个拨圈一次，则会让第 $j$ 个拨圈上第 $i$ 格的数字移动到第 $((i \\bmod k) + 1)$ 格，其他拨圈不动。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9d3g6b74.png)\n\n（一个拨动拨圈的例子，对左侧的锁拨一次第二个拨圈得到右侧的锁。）\n\n为了方便记忆，小 I 设定密码时要求同一行上的数字尽可能靠近。\n形式化地，对于 $1 \\leq i \\leq k$，定义密码锁第 $i$ 行的松散度为\n\n$$\nc(i) = \\max \\limits _ {j = 1} ^ n a _ {i, j} - \\min \\limits _ {j = 1} ^ n a _ {i, j} \n$$\n\n同时定义整个密码锁的松散度为\n\n$$\nC = \\max \\limits _ {1 \\leq i \\leq k} c(i)\n$$\n\n因为能开锁的状态满足 $C$ 尽可能小，因此小 I 希望你找出最小的 $C$ 值。", "inputFormat": "**本题有多组测试数据，题目保证一个测试点中所有测试数据的 $k$ 相同。**\n\n第一行包含两个正整数 $T, k$，分别表示测试数据组数和密码锁拨圈上的格数。\n\n接下来一共 $T$ 组数据，每组数据格式如下：\n\n第一行包含一个正整数 $n$，表示拨圈数。\n\n接下来 $k$ 行，每行包含 $n$ 个正整数，其中第 $i$ 行第 $j$ 个整数 $a _ {i,j}$ 表示密码锁第 $j$ 个拨圈上第 $i$ 格对应的数字。\n\n**注意输入的矩阵中每一列对应一个拨圈，而非每一行对应一个拨圈。**", "outputFormat": "对于每组数据，输出一行包含一个整数，表示所有方案中 $C$ 的最小值。", "hint": "**【样例 1 解释】**\n\n第一组样例对应题目描述中的例子。\n在拨第二个拨圈一次后，每个拨圈都是 $\\{1, 2, 3\\}$，此时松散度为 $0$。\n容易证明无论如何松散度都不可能小于 $0$，因此输出 $0$。\n\n以下四个样例分别对应 $k = 1, 2, 3, 4$ 的情况，且样例中 $n$ 的取值有一定梯度。\n\n**【数据范围】**\n\n设 $\\sum n$ 为一个测试点中所有测试数据的 $n$ 的和。\n\n对于所有数据，保证 $1 \\leq T$，$1 \\leq k \\leq 4$，$1 \\leq a _ {i ,j} \\leq  3 \\times 10 ^ 4$。\n\n\n本题分为两类测试点。\n\n\n第一类测试点共有十二个，保证 $k \\leq 3$，$n \\leq 5 \\times 10 ^ 4$，$\\sum n \\leq 1.5 \\times 10 ^ 5$。\n\n| 测试点编号 | $n \\leq$ | $\\sum n \\leq $ | $k = $ |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $20$ | $100$ | $1$ |\n| $2$ | $5 \\times 10 ^ 4$ | $1.5 \\times 10 ^ 5$ | $1$ |\n| $3$ | $20$ | $100$ | $2$ |\n| $4$ | $100$ | $1000$ | $2$ |\n| $5$ | $2000$ | $10 ^ 4$ | $2$ |\n| $6$ | $5 \\times 10 ^ 4$ | $1.5 \\times 10 ^ 5$ | $2$ |\n| $7$ | $10$ | $50$ | $3$ |\n| $8$ | $50$ | $500$ | $3$ |\n| $9$ | $300$ | $3000$ | $3$ |\n| $10$ | $3000$ | $2 \\times 10 ^ 4$ | $3$ |\n| $11$ | $3 \\times 10 ^ 4$ | $1.2 \\times 10 ^ 5$ | $3$ |\n| $12$ | $5 \\times 10 ^ 4$ | $1.5 \\times 10 ^ 5$ | $3$ |\n\n第二类测试点共有八个，保证 $k = 4$，$n \\leq 10 ^ 4$，\n$\\sum n \\leq 3 \\times 10 ^ 4$。\n\n| 测试点编号 | $n \\leq$ | $\\sum n \\leq $ | $k = $ |\n| :----------: | :----------: | :----------: | :----------: |\n| $13$ | $10$ | $50$ | $4$ |\n| $14$ | $50$ | $500$ | $4$ |\n| $15$ | $200$ | $2000$ | $4$ |\n| $16$ | $500$ | $4000$ | $4$ |\n| $17$ | $2500$ | $10 ^ 4$ | $4$ |\n| $18$ | $5000$ | $2 \\times 10 ^ 4$ | $4$ |\n| $19$ | $10 ^ 4$ | $3 \\times 10 ^ 4$ | $4$ |\n| $20$ | $10 ^ 4$ | $3 \\times 10 ^ 4$ | $4$ |\n\n**【后记】**\n\n你花了九牛二虎之力算出 $C$ 的值之后，小 I 却告诉你他已经找开锁师傅用锤子暴力破解了。在你的百般劝说下，小 I 承诺以后锁车不用有大于等于一万个拨圈的密码锁。", "locale": "zh-CN"}}}
{"pid": "P9121", "type": "P", "difficulty": 2, "samples": [["1 5\n1 2", "2"], ["2 5\n1 2\n5 10", "3"], ["2 5\n1 10\n5 10", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "贪心", "USACO", "2023"], "title": "[USACO23FEB] Hungry Cow B", "background": "", "description": "Bessie is a hungry cow. Each day, for dinner, if there is a haybale in the barn, she will eat one haybale. Farmer John does not want Bessie to starve, so some days he sends a delivery of haybales, which arrive in the morning (before dinner). In particular, on day $d_i$, Farmer John sends a delivery of $b_i$ haybales $(1 \\le d_i \\le 10^{14}, 1 \\le b_i \\le 10^9)$.\n\nCompute the total number of haybales Bessie will eat during the first $T$ days.", "inputFormat": "The first line contains $N$ and $T$ $(1 \\le N \\le 10^5, 1 \\le T \\le 10^{14})$.\n\nThe next $N$ lines each contain $d_i$ and $b_i$. It is additionally guaranteed that $1 \\le d_1<d_2<\\cdots <d_N \\le T$. ", "outputFormat": "Output the number of haybales that Bessie will eat during the first $T$ days.\n\nNote that the large size of integers involved in this problem may require the use of 64-bit integer data types (e.g., a \"long long\" in C/C++). ", "hint": "### Explanation for Sample 1\n\nTwo haybales arrive on the morning of day $1$. Bessie eats one haybale for dinner on day $1$ and another haybale on day $2$. On days $3 \\cdots 5$, there are no more haybales for Bessie to eat. In total, Bessie eats $2$ haybales during the first $5$ days. \n\n### Explanation for Sample 2\n\nTwo haybales arrive on the morning of day $1$. Bessie eats one haybale on days $1$ and $2$. There are no haybales for Bessie to eat on days $3$ and $4$. On the morning of day $5$, $10$ haybales arrive. Bessie eats one haybale for dinner on day $5$. In total, Bessie eats $3$ haybales during the first $5$ days.\n\n### Explanation for Sample 3\n\n10 haybales arrive on the morning of day $1$. Bessie eats one haybale on days $1 \\cdots 4$. On the morning of day $5$, another $10$ haybales arrive, meaning there are $16$ haybales in the barn. For dinner on day $5$, Bessie eats another haybale. In total, Bessie eats $5$ haybales during the first $5$ days. \n\n### SCORING\n\n - Inputs $4-7$: $T \\le 10^5$\n - Inputs $8-13$: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Hungry Cow B", "background": "", "description": "Bessie is a hungry cow. Each day, for dinner, if there is a haybale in the barn, she will eat one haybale. Farmer John does not want Bessie to starve, so some days he sends a delivery of haybales, which arrive in the morning (before dinner). In particular, on day $d_i$, Farmer John sends a delivery of $b_i$ haybales $(1 \\le d_i \\le 10^{14}, 1 \\le b_i \\le 10^9)$.\n\nCompute the total number of haybales Bessie will eat during the first $T$ days.", "inputFormat": "The first line contains $N$ and $T$ $(1 \\le N \\le 10^5, 1 \\le T \\le 10^{14})$.\n\nThe next $N$ lines each contain $d_i$ and $b_i$. It is additionally guaranteed that $1 \\le d_1<d_2<\\cdots <d_N \\le T$. ", "outputFormat": "Output the number of haybales that Bessie will eat during the first $T$ days.\n\nNote that the large size of integers involved in this problem may require the use of 64-bit integer data types (e.g., a \"long long\" in C/C++). ", "hint": "### Explanation for Sample 1\n\nTwo haybales arrive on the morning of day $1$. Bessie eats one haybale for dinner on day $1$ and another haybale on day $2$. On days $3 \\cdots 5$, there are no more haybales for Bessie to eat. In total, Bessie eats $2$ haybales during the first $5$ days. \n\n### Explanation for Sample 2\n\nTwo haybales arrive on the morning of day $1$. Bessie eats one haybale on days $1$ and $2$. There are no haybales for Bessie to eat on days $3$ and $4$. On the morning of day $5$, $10$ haybales arrive. Bessie eats one haybale for dinner on day $5$. In total, Bessie eats $3$ haybales during the first $5$ days.\n\n### Explanation for Sample 3\n\n10 haybales arrive on the morning of day $1$. Bessie eats one haybale on days $1 \\cdots 4$. On the morning of day $5$, another $10$ haybales arrive, meaning there are $16$ haybales in the barn. For dinner on day $5$, Bessie eats another haybale. In total, Bessie eats $5$ haybales during the first $5$ days. \n\n### SCORING\n\n - Inputs $4-7$: $T \\le 10^5$\n - Inputs $8-13$: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Hungry Cow B", "background": "", "description": "Bessie 是一头饥饿的奶牛。每天晚餐时，如果谷仓中有干草，她会吃掉一捆干草。为了防止 Bessie 挨饿，有些天 Farmer John 会在早晨（晚餐之前）送来一些干草。具体地说，在第 $d_i$ 天，Farmer John 送来了 $b_i$ 捆干草（$1 \\leq d_i \\leq 10^{14}, 1 \\leq b_i \\leq 10^9$）。\n\n请计算 Bessie 在前 $T$ 天内共吃掉了多少捆干草。", "inputFormat": "第一行包含两个整数 $N$ 和 $T$（$1 \\leq N \\leq 10^5, 1 \\leq T \\leq 10^{14}$）。\n\n接下来的 $N$ 行每行包含两个整数 $d_i$ 和 $b_i$。保证 $1 \\leq d_1 < d_2 < \\cdots < d_N \\leq T$。", "outputFormat": "输出 Bessie 在前 $T$ 天内吃掉的干草总数。\n\n注意，本题中涉及的整数可能非常大，可能需要使用 64 位整数类型（例如 C/C++ 中的 \"long long\"）。\n\n### 样例 1 的解释\n\n第 $1$ 天早晨到达 $2$ 捆干草。Bessie 在第 $1$ 天晚餐时吃掉 $1$ 捆，在第 $2$ 天晚餐时吃掉 $1$ 捆。在第 $3 \\cdots 5$ 天，没有干草供 Bessie 吃。在前 $5$ 天中，Bessie 共吃掉 $2$ 捆干草。\n\n### 样例 2 的解释\n\n第 $1$ 天早晨到达 $2$ 捆干草。Bessie 在第 $1$ 天和第 $2$ 天各吃掉 $1$ 捆。在第 $3$ 天和第 $4$ 天，没有干草供 Bessie 吃。第 $5$ 天早晨到达 $10$ 捆干草。Bessie 在第 $5$ 天晚餐时吃掉 $1$ 捆。在前 $5$ 天中，Bessie 共吃掉 $3$ 捆干草。\n\n### 样例 3 的解释\n\n第 $1$ 天早晨到达 $10$ 捆干草。Bessie 在第 $1 \\cdots 4$ 天各吃掉 $1$ 捆。第 $5$ 天早晨又到达 $10$ 捆干草，此时谷仓中共有 $16$ 捆干草。Bessie 在第 $5$ 天晚餐时再吃掉 $1$ 捆。在前 $5$ 天中，Bessie 共吃掉 $5$ 捆干草。\n\n### 评分\n\n- 输入 $4-7$：$T \\leq 10^5$\n- 输入 $8-13$：无额外限制。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9122", "type": "P", "difficulty": 2, "samples": [["4\n\n2\n**\n*.\n1\n*\n\n3\n.**\n.**\n***\n2\n.*\n**\n\n3\n...\n.*.\n...\n3\n.*.\n...\n...\n\n3\n**.\n.**\n..*\n2\n.*\n*.", "YES\nYES\nNO\nYES"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2023"], "title": "[USACO23FEB] Stamp Grid B", "background": "", "description": "A **stamp painting** is a black and white painting on an $N \\times N$ canvas, where certain cells are inked while others are blank. It can be described by an $N \\times N$ array of characters $(1 \\le N \\le 20)$. The $i$-th entry of the $j$-th column of the array is equal to `*` if the canvas contains ink at that square and `.` otherwise.\n\nBessie has a stamp painting that she would like to create, so Farmer John has lent her a single $K \\times K(1 \\le K \\le N)$ stamp to do this and an empty $N \\times N$ canvas. Bessie can repeatedly rotate the stamp clockwise by $90^{\\circ}$ and stamp anywhere on the grid as long as the stamp is entirely inside the grid. Formally, to stamp, Bessie chooses integers $i,j$ such that $i \\in [1,N−K+1]$ and $j \\in [1,N−K+1]$; for each $(i^{\\prime},j^{\\prime})$ such that $1 \\le i^{\\prime},j^{\\prime} \\le K$, canvas cell $(i+i^{\\prime}−1,j+j^{\\prime}−1)$ is painted black if the stamp has ink at $(i^{\\prime},j^{\\prime})$. Bessie can rotate the stamp at any time between stampings. Once a canvas cell is painted black, it remains black.\n\nFarmer John is wondering whether it's possible for Bessie to create her desired stamp painting with his stamp. For each of $T(1 \\le T \\le 100)$ test cases, help Farmer John answer this question. ", "inputFormat": "The first line of input contains $T$, the number of test cases.\n\nEach test case starts with an integer $N$ followed by $N$ lines, each containing a string of `*`s and `.`s, representing Bessie's desired stamp painting. The next line contains $K$ and is followed by $K$ lines, each containing a string of `*`s and `.`s, representing Farmer John's stamp.\n\nConsecutive test cases are separated by newlines. ", "outputFormat": "For each test case, output `YES` or `NO` on separate lines. ", "hint": "### Explanation for Sample 1\n\nIn the first test case, Bessie can perform the following sequence of stampings:\n\n1. Stamp at $(1,1)$\n2. Stamp at $(1,2)$\n3. Stamp at $(2,1)$\n\nIn the second test case, Bessie can perform the following sequence of stampings:\n\n1. Stamp at $(2,2)$\n2. Stamp at $(2,1)$\n3. Rotate $90^{\\circ}$\n4. Rotate $90^{\\circ}$\n5. Stamp at $(1,2)$\n\nIn the third test case, it is impossible to paint the middle cell.\n\nIn the fourth test case, Bessie can perform the following sequence of stampings:\n\n1. Rotate $90^{\\circ}$\n2. Stamp at $(1,1)$\n3. Stamp at $(1,2)$\n4. Stamp at $(2,2)$", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Stamp Grid B", "background": "", "description": "A **stamp painting** is a black and white painting on an $N \\times N$ canvas, where certain cells are inked while others are blank. It can be described by an $N \\times N$ array of characters $(1 \\le N \\le 20)$. The $i$-th entry of the $j$-th column of the array is equal to `*` if the canvas contains ink at that square and `.` otherwise.\n\nBessie has a stamp painting that she would like to create, so Farmer John has lent her a single $K \\times K(1 \\le K \\le N)$ stamp to do this and an empty $N \\times N$ canvas. Bessie can repeatedly rotate the stamp clockwise by $90^{\\circ}$ and stamp anywhere on the grid as long as the stamp is entirely inside the grid. Formally, to stamp, Bessie chooses integers $i,j$ such that $i \\in [1,N−K+1]$ and $j \\in [1,N−K+1]$; for each $(i^{\\prime},j^{\\prime})$ such that $1 \\le i^{\\prime},j^{\\prime} \\le K$, canvas cell $(i+i^{\\prime}−1,j+j^{\\prime}−1)$ is painted black if the stamp has ink at $(i^{\\prime},j^{\\prime})$. Bessie can rotate the stamp at any time between stampings. Once a canvas cell is painted black, it remains black.\n\nFarmer John is wondering whether it's possible for Bessie to create her desired stamp painting with his stamp. For each of $T(1 \\le T \\le 100)$ test cases, help Farmer John answer this question. ", "inputFormat": "The first line of input contains $T$, the number of test cases.\n\nEach test case starts with an integer $N$ followed by $N$ lines, each containing a string of `*`s and `.`s, representing Bessie's desired stamp painting. The next line contains $K$ and is followed by $K$ lines, each containing a string of `*`s and `.`s, representing Farmer John's stamp.\n\nConsecutive test cases are separated by newlines. ", "outputFormat": "For each test case, output `YES` or `NO` on separate lines. ", "hint": "### Explanation for Sample 1\n\nIn the first test case, Bessie can perform the following sequence of stampings:\n\n1. Stamp at $(1,1)$\n2. Stamp at $(1,2)$\n3. Stamp at $(2,1)$\n\nIn the second test case, Bessie can perform the following sequence of stampings:\n\n1. Stamp at $(2,2)$\n2. Stamp at $(2,1)$\n3. Rotate $90^{\\circ}$\n4. Rotate $90^{\\circ}$\n5. Stamp at $(1,2)$\n\nIn the third test case, it is impossible to paint the middle cell.\n\nIn the fourth test case, Bessie can perform the following sequence of stampings:\n\n1. Rotate $90^{\\circ}$\n2. Stamp at $(1,1)$\n3. Stamp at $(1,2)$\n4. Stamp at $(2,2)$", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Stamp Grid B", "background": "", "description": "盖章绘画是一幅黑白画，绘制在一个 $N \\times N$ 的画布上，其中某些格子被涂黑，而其他格子为空白。它可以用一个 $N \\times N$ 的字符数组表示（$1 \\leq N \\leq 20$）。如果数组的第 $i$ 行第 $j$ 列的值为 `*`，说明该格子被涂黑；如果为 `.`，则说明该格子为空白。\n\nBessie 想要完成一幅盖章绘画，因此 Farmer John 借给了她一块 $K \\times K$（$1 \\leq K \\leq N$）的盖章，以及一块空的 $N \\times N$ 画布。Bessie 可以将盖章顺时针旋转 $90^\\circ$，并在画布上的任意位置盖章，只要盖章完全在画布范围内即可。形式化地说，盖章时，Bessie 选择整数 $i,j$，满足 $i \\in [1,N-K+1]$ 且 $j \\in [1,N-K+1]$；对于每个 $(i',j')$，其中 $1 \\leq i',j' \\leq K$，画布上的格子 $(i+i'-1,j+j'-1)$ 会被涂黑，如果盖章在 $(i',j')$ 处有墨迹。Bessie 可以在每次盖章之前旋转盖章。一旦画布上的某个格子被涂黑，就会保持涂黑状态。\n\nFarmer John 想知道，Bessie 是否可以用他的盖章完成她想要的盖章绘画。对于每个 $T$（$1 \\leq T \\leq 100$）个测试用例，帮助 Farmer John 回答这个问题。", "inputFormat": "第一行包含一个整数 $T$，表示测试用例的数量。\n\n每个测试用例以一个整数 $N$ 开始，接下来是 $N$ 行，每行包含由 `*` 和 `.` 构成的字符串，表示 Bessie 想要的盖章绘画。接下来的行包含一个整数 $K$，随后是 $K$ 行，每行包含由 `*` 和 `.` 构成的字符串，表示 Farmer John 的盖章。\n\n相邻的测试用例之间用空行分隔。", "outputFormat": "对于每个测试用例，输出一行 `YES` 或 `NO`。\n\n### 样例 1 的解释\n\n在第一个测试用例中，Bessie 可以按以下顺序完成盖章：\n\n1. 在 $(1,1)$ 处盖章  \n2. 在 $(1,2)$ 处盖章  \n3. 在 $(2,1)$ 处盖章  \n\n在第二个测试用例中，Bessie 可以按以下顺序完成盖章：\n\n1. 在 $(2,2)$ 处盖章  \n2. 在 $(2,1)$ 处盖章  \n3. 顺时针旋转 $90^\\circ$  \n4. 顺时针旋转 $90^\\circ$  \n5. 在 $(1,2)$ 处盖章  \n\n在第三个测试用例中，无法涂黑中间格子，因此无法完成绘画。\n\n在第四个测试用例中，Bessie 可以按以下顺序完成盖章：\n\n1. 顺时针旋转 $90^\\circ$  \n2. 在 $(1,1)$ 处盖章  \n3. 在 $(1,2)$ 处盖章  \n4. 在 $(2,2)$ 处盖章", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9123", "type": "P", "difficulty": 2, "samples": [["2 4\n7 9", "7"], ["2 3\n1 10", "8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2023"], "title": "[USACO23FEB] Watching Mooloo B", "background": "", "description": "Bessie likes to watch shows on Mooloo. Because Bessie is a busy cow, she has planned a schedule for the next $N (1 \\le N \\le 10^5)$ days that she will watch Mooloo. Because Mooloo is a paid subscription service, she now needs to decide how to minimize the amount of money she needs to pay.\n\nMooloo has an interesting subscription system: it costs $d+K(1 \\le K \\le 10^9)$ moonies to subscribe to Mooloo for d consecutive days. You can start a subscription at any time, and you can start a new subscription as many times as you desire if your current subscription expires. Given this, figure out the minimum amount of moonies Bessie needs to pay to fulfill her schedule. ", "inputFormat": "The first line contains integers $N$ and $K$.\n\nThe second line contains $N$ integers describing the days Bessie will watch Mooloo: $1 \\le d_1<d_2< \\cdots <d_N \\le 10^{14}$. ", "outputFormat": "**Note that the large size of integers involved in this problem may require the use of 64-bit integer data types (e.g., a \"long long\" in C/C++).**", "hint": "### Explanation for Sample 1\n\nBessie buys a three-day subscription on day $7$, spending $d+K=3+4=7$ moonies.\n\n### Explanation for Sample 2\n\nBessie first buys a one-day subscription on day $1$, spending $d+K=1+3=4$ moonies. Bessie also buys a one-day subscription on day $10$, spending $d+K=1+3=4$ moonies. In total, Bessie spends $8$ moonies.\n\n### SCORING\n\n - Inputs $3-5$: $N \\le 10$\n - Inputs $6-12$: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Watching Mooloo B", "background": "", "description": "Bessie likes to watch shows on Mooloo. Because Bessie is a busy cow, she has planned a schedule for the next $N (1 \\le N \\le 10^5)$ days that she will watch Mooloo. Because Mooloo is a paid subscription service, she now needs to decide how to minimize the amount of money she needs to pay.\n\nMooloo has an interesting subscription system: it costs $d+K(1 \\le K \\le 10^9)$ moonies to subscribe to Mooloo for d consecutive days. You can start a subscription at any time, and you can start a new subscription as many times as you desire if your current subscription expires. Given this, figure out the minimum amount of moonies Bessie needs to pay to fulfill her schedule. ", "inputFormat": "The first line contains integers $N$ and $K$.\n\nThe second line contains $N$ integers describing the days Bessie will watch Mooloo: $1 \\le d_1<d_2< \\cdots <d_N \\le 10^{14}$. ", "outputFormat": "**Note that the large size of integers involved in this problem may require the use of 64-bit integer data types (e.g., a \"long long\" in C/C++).**", "hint": "### Explanation for Sample 1\n\nBessie buys a three-day subscription on day $7$, spending $d+K=3+4=7$ moonies.\n\n### Explanation for Sample 2\n\nBessie first buys a one-day subscription on day $1$, spending $d+K=1+3=4$ moonies. Bessie also buys a one-day subscription on day $10$, spending $d+K=1+3=4$ moonies. In total, Bessie spends $8$ moonies.\n\n### SCORING\n\n - Inputs $3-5$: $N \\le 10$\n - Inputs $6-12$: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Watching Mooloo B", "background": "", "description": "贝茜喜欢看 Mooloo 的演出。因为她是一只忙碌的奶牛，她计划在接下来的 $N (1 \\le N \\le 10^5)$ 天去看演出。因为 Mooloo 提供了订阅服务，她想要使她花费的钱最少。\n\nMooloo 有一个有趣的订阅服务系统：若要在此之后的连续 $d$ 天看演出，则在订阅时需要花费 $d+K(1 \\le K \\le 10^9)$ 个单位价格。你可以随时订阅；若本次订阅已经过期，你可以根据需要订阅多次。基于以上条件，请计算出贝茜最少要花费多少个单位价格，才能完成她的计划。", "inputFormat": "第一行输入两个正整数 $N$ 和 $K$。\n\n第二行输入 $N$ 个正整数，表示在这些天里，贝茜会看 Mooloo 的演出：$1 \\le d_1<d_2<\\cdots<d_N \\le 10^{14}$。", "outputFormat": "**请注意，此问题中可能需要使用 64 位整数数据类型（如 C 或 C++ 中的 long long）。**\n\n### 样例 #1 解释\n\n贝茜在第 $7$ 天时，购买了 $3$ 天的订阅，共花费 $d+K=3+4=7$ 个单位价格。\n\n### 样例 #2 解释\n\n贝茜在第 $1$ 天时，购买了 $1$ 天的订阅，花费 $d+K=1+3=4$ 个单位价格；在第 $10$ 天时，也购买了 $1$ 天的订阅，花费 $d+K=1+3=4$ 个单位价格。贝茜一共花费了 $8$ 个单位价格。\n\ntranslated by [liyuanchen2021](https://www.luogu.com.cn/user/557680)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9124", "type": "P", "difficulty": 4, "samples": [["2\n\n3 7 9\n4 3 18\n2 4 19\n1 1 6\n\n5 7 3\n5 9 45\n5 2 31\n6 4 28\n4 1 8\n5 2 22", "11\n6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "二分", "USACO", "2023"], "title": "[USACO23FEB] Bakery S", "background": "", "description": "Bessie has opened a bakery!\n\nIn her bakery, Bessie has an oven that can produce a cookie in $t_C$\n units of time or a muffin in $t_M$\n units of time $(1\\le t_C,t_M\\le 10^9)$. Due to space constraints, Bessie can only produce one pastry at a time, so to produce $A$ cookies and $B$ muffins, it takes $A \\cdot t_C+B \\cdot t_M$ units of time.\n\nBessie's $N (1\\le N\\le 100)$ friends would each like to visit the bakery one by one. The $i$-th friend will order $a_i(1 \\le a_i \\le 10^9)$ cookies and $b_i(1 \\le b_i \\le 10^9)$ muffins immediately upon entering. Bessie doesn't have space to store pastries, so she only starts making pastries upon receiving an order. Furthermore, Bessie's friends are very busy, so the $i$-th friend is only willing to wait $c_i(a_i+b_i \\le c_i \\le 2 \\cdot 10^{18})$ units of time before getting sad and leaving.\n\nBessie really does not want her friends to be sad. With one mooney, she can upgrade her oven so that it takes one less unit of time to produce a cookie or one less unit of time to produce a muffin. She can't upgrade her oven a fractional amount of times, but she can choose to upgrade her oven as many times as she needs before her friends arrive, as long as the time needed to produce a cookie and to produce a muffin both remain strictly positive.\n\nFor each of $T(1 \\le T \\le 100)$ test cases, please help Bessie find out the minimum amount of moonies that Bessie must spend so that her bakery can satisfy all of her friends.", "inputFormat": "The first line contains $T$, the number of test cases.\n\nEach test case starts with one line containing $N$\n, $t_C$, $t_M$. Then, the next $N$ lines each contain three integers $a_i,b_i,c_i$.\n\nConsecutive test cases are separated by newlines. ", "outputFormat": "The minimum amount of moonies that Bessie needs to spend for each test case, on separate lines. ", "hint": "### Explanation for Sample 1\n\nIn the first test case, Bessie can pay $11$ moonies to decrease the time required to produce a cookie by $4$ and a muffin by $7$, so that her oven produces cookies in $3$ units of time and muffins in $2$ units of time. Then she can satisfy the first friend in $18$ units of time, the second friend in $14$ units of time, and the third friend in $5$ units of time, so none of them will get sad and leave.\n\nIn the second test case, Bessie should decrease the time required to produce a cookie by $6$ and a muffin by $0$. \n\n### SCORING\n\n - Inputs $2-4$: $N \\le 10,t_C,t_M \\le 1000$\n - Inputs $5-11$: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Bakery S", "background": "", "description": "Bessie has opened a bakery!\n\nIn her bakery, Bessie has an oven that can produce a cookie in $t_C$\n units of time or a muffin in $t_M$\n units of time $(1\\le t_C,t_M\\le 10^9)$. Due to space constraints, Bessie can only produce one pastry at a time, so to produce $A$ cookies and $B$ muffins, it takes $A \\cdot t_C+B \\cdot t_M$ units of time.\n\nBessie's $N (1\\le N\\le 100)$ friends would each like to visit the bakery one by one. The $i$-th friend will order $a_i(1 \\le a_i \\le 10^9)$ cookies and $b_i(1 \\le b_i \\le 10^9)$ muffins immediately upon entering. Bessie doesn't have space to store pastries, so she only starts making pastries upon receiving an order. Furthermore, Bessie's friends are very busy, so the $i$-th friend is only willing to wait $c_i(a_i+b_i \\le c_i \\le 2 \\cdot 10^{18})$ units of time before getting sad and leaving.\n\nBessie really does not want her friends to be sad. With one mooney, she can upgrade her oven so that it takes one less unit of time to produce a cookie or one less unit of time to produce a muffin. She can't upgrade her oven a fractional amount of times, but she can choose to upgrade her oven as many times as she needs before her friends arrive, as long as the time needed to produce a cookie and to produce a muffin both remain strictly positive.\n\nFor each of $T(1 \\le T \\le 100)$ test cases, please help Bessie find out the minimum amount of moonies that Bessie must spend so that her bakery can satisfy all of her friends.", "inputFormat": "The first line contains $T$, the number of test cases.\n\nEach test case starts with one line containing $N$\n, $t_C$, $t_M$. Then, the next $N$ lines each contain three integers $a_i,b_i,c_i$.\n\nConsecutive test cases are separated by newlines. ", "outputFormat": "The minimum amount of moonies that Bessie needs to spend for each test case, on separate lines. ", "hint": "### Explanation for Sample 1\n\nIn the first test case, Bessie can pay $11$ moonies to decrease the time required to produce a cookie by $4$ and a muffin by $7$, so that her oven produces cookies in $3$ units of time and muffins in $2$ units of time. Then she can satisfy the first friend in $18$ units of time, the second friend in $14$ units of time, and the third friend in $5$ units of time, so none of them will get sad and leave.\n\nIn the second test case, Bessie should decrease the time required to produce a cookie by $6$ and a muffin by $0$. \n\n### SCORING\n\n - Inputs $2-4$: $N \\le 10,t_C,t_M \\le 1000$\n - Inputs $5-11$: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Bakery S", "background": "", "description": "Bessie 开了一家面包店!\n\n在她的面包店里，Bessie 有一个烤箱，可以在 $t_C$ 的时间内生产一块饼干或在 $t_M$ 单位时间内生产一块松糕。\n$(1 \\le t_C,t_M \\le 10^9)$。由于空间限制，Bessie 一次只能生产一种糕点，所以要生产 $A$ 块饼干和 $B$ 块松饼，需要 $A\\cdot t_C+B\\cdot t_M$ 单位的时间。\n\nBessie的 $N (1\\le N\\le 100)$ 朋友都想一个一个地去面包店。第 $i$ 个朋友一进门就会点 $a_i(1 \\le a_i \\le 10^9)$ 块饼干和 $b_i(1 \\le b_i \\le 10^9)$ 块松饼。Bessie 没有空间来储存糕点，所以她只有在接到订单后才开始制作糕点。此外，Bessie 的朋友都很忙，所以第 $i$ 个朋友只愿意等 $c_i(a_i+b_i \\le c_i \\le 2 \\cdot 10^{18})$ 个单位的时间，然后就伤心地离开。\n\nBessie 真的不希望她的朋友们伤心，她可以用一块钱升级她的烤箱，让它少花一个单位的时间来生产一块饼干或少花一个单位的时间来生产一个松饼。她不能将她的烤箱升级到花费小于等于 $0$ 的时间，但她可以选择在她的朋友到来之前将她的烤箱升级多少次，只要生产一块饼干和生产一个松饼所需的时间都严格保持为正数。\n\n对于每一个 $T(1\\le T\\le 100)$ 的测试案例，请帮助 Bessie 找出她必须花费的最小的钱数量，以便她的面包店能够满足所有的朋友。", "inputFormat": "第一行包含 $T$，测试案例的数量。\n\n每个测试用例都以一行开始，包含 $N$\n,$t_C$,$t_M$。然后，接下来的 $N$ 行各包含三个整数 $a_i,b_i,c_i$。\n\n测试案例用换行符隔开。", "outputFormat": "Bessie 需要为每个测试案例花费的最少钱数，每行一个。\n\n### 样例解释 1\n\n在第一个测试案例中，贝西可以支付 $11$ 元来减少 $4$ 单位生产一块饼干所需的 时间和 $7$ 单位生产一块松饼所需的时间，从而使她的烤箱在 $3$ 单位的时间内生产饼干，在 $2$ 单位的时间内生产松饼。那么她可以在 $18$ 单位的时间内满足第一个朋友，在 $14$ 单位的时间内满足第二个朋友，在 $5$ 单位的时间内满足第三个朋友，所以他们都不会伤心而离开。\n\n在第二个测试案例中，贝西应该把生产一块饼干的时间减少 $6$ 单位，把生产一块松饼的时间减少 $0$ 单位。\n\n### 数据规模与约定\n\n - 输入 $2-4$：$N\\le 10,t_C,t_M \\le 1000$\n - 输入 $5-11$，没有额外的约束。\n \n翻译 @ \\_\\_11jiang08\\_\\_", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9125", "type": "P", "difficulty": 3, "samples": [["2 4\n0 0 100\n50 0 200\n0 50 50\n1000 1000 0\n50 0 200\n10 0 170", "2"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["二分", "USACO", "2023"], "title": "[USACO23FEB] Cow-libi S", "background": "", "description": "**Note: The time limit for this problem is 4s, two times the default.**\n\nSomebody has been grazing in Farmer John's $G(1 \\le G \\le 10^5)$ private gardens! Using his expert forensic knowledge, FJ has been able to determine the precise time each garden was grazed. He has also determined that there was a single cow that was responsible for every grazing incident. \n\nIn response to these crimes each of FJ's $N(1 \\le N \\le 10^5)$ cows have provided an alibi that proves the cow was in a specific location at a specific time. Help FJ test whether each of these alibis demonstrates the cow's innocence. \n\nA cow can be determined to be innocent if it is impossible for her to have travelled between all of the grazings and her alibi. Cows travel at a rate of $1$ unit distance per unit time. ", "inputFormat": "The first line of input will contain $G$ and $N$ separated by a space.\n\nThe next $G$ lines contain the integers $x, y$, and $t (−10^9 \\le x,y \\le 10^9;0 \\le t \\le 10^9)$\n\nseparated by a space describing the location and time of the grazing. It will always be possible for a single cow to travel between all grazings.\n\nThe next $N$ lines contain $x$, $y$, and $t(−10^9 \\le x,y \\le 10^9;0 \\le t \\le 10^9)$ separated by a space describing the location and time of each cow's alibi. ", "outputFormat": "Output a single integer: the number of cows with alibis that prove their innocence. ", "hint": "### Explanation for Sample 1\n\nThere were two grazings; the first at $(0,0)$ at time 100 and the second at $(50,0)$ at time $200$.\n\nThe first cow's alibi does not prove her innocence. She has just enough time to arrive at the first grazing.\n\nThe second cow's alibi does prove her innocence. She is nowhere near any of the grazings.\n\nUnfortunately for the third cow, being at the scene of the crime does not prove innocence.\n\nFinally, the fourth cow is innocent because it's impossible to make it from her alibi to the final grazing in time. \n\n### SCORING\n\n - Inputs $2-4$: $1 \\le G,N \\le 10^3$. Also, for both the fields and alibis, $−10^6 \\le x,y \\le 10^6$ and $0 \\le t \\le 10^6$.\n - Inputs $5-11$: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Cow-libi S", "background": "", "description": "**Note: The time limit for this problem is 4s, two times the default.**\n\nSomebody has been grazing in Farmer John's $G(1 \\le G \\le 10^5)$ private gardens! Using his expert forensic knowledge, FJ has been able to determine the precise time each garden was grazed. He has also determined that there was a single cow that was responsible for every grazing incident. \n\nIn response to these crimes each of FJ's $N(1 \\le N \\le 10^5)$ cows have provided an alibi that proves the cow was in a specific location at a specific time. Help FJ test whether each of these alibis demonstrates the cow's innocence. \n\nA cow can be determined to be innocent if it is impossible for her to have travelled between all of the grazings and her alibi. Cows travel at a rate of $1$ unit distance per unit time. ", "inputFormat": "The first line of input will contain $G$ and $N$ separated by a space.\n\nThe next $G$ lines contain the integers $x, y$, and $t (−10^9 \\le x,y \\le 10^9;0 \\le t \\le 10^9)$\n\nseparated by a space describing the location and time of the grazing. It will always be possible for a single cow to travel between all grazings.\n\nThe next $N$ lines contain $x$, $y$, and $t(−10^9 \\le x,y \\le 10^9;0 \\le t \\le 10^9)$ separated by a space describing the location and time of each cow's alibi. ", "outputFormat": "Output a single integer: the number of cows with alibis that prove their innocence. ", "hint": "### Explanation for Sample 1\n\nThere were two grazings; the first at $(0,0)$ at time 100 and the second at $(50,0)$ at time $200$.\n\nThe first cow's alibi does not prove her innocence. She has just enough time to arrive at the first grazing.\n\nThe second cow's alibi does prove her innocence. She is nowhere near any of the grazings.\n\nUnfortunately for the third cow, being at the scene of the crime does not prove innocence.\n\nFinally, the fourth cow is innocent because it's impossible to make it from her alibi to the final grazing in time. \n\n### SCORING\n\n - Inputs $2-4$: $1 \\le G,N \\le 10^3$. Also, for both the fields and alibis, $−10^6 \\le x,y \\le 10^6$ and $0 \\le t \\le 10^6$.\n - Inputs $5-11$: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Cow-libi S", "background": "", "description": "注意：本题的时间限制为 4 秒，是默认限制的两倍。\n\n有人在 Farmer John 的 $G(1 \\leq G \\leq 10^5)$ 个私人花园里偷吃了庄稼！通过他的专业法医知识，Farmer John 确定了每个花园被偷吃的具体时间。他还发现，这些事件的罪魁祸首是一头单独的奶牛。\n\n为了回应这些犯罪行为，Farmer John 的 $N(1 \\leq N \\leq 10^5)$ 头奶牛每头都提供了一个不在作案现场的证明（即“不在场证明”），表明奶牛在特定时间出现在特定位置。请帮助 Farmer John 判断这些“不在场证明”中哪些能够证明奶牛的清白。\n\n如果一头奶牛无法在她的“不在场证明”位置与所有被偷吃地点之间往返，则可以确定这头奶牛是清白的。奶牛的移动速度为每单位时间 $1$ 单位距离。本题中提到的距离均为欧几里得距离。", "inputFormat": "第一行包含两个用空格分隔的整数 $G$ 和 $N$。\n\n接下来的 $G$ 行，每行包含三个用空格分隔的整数 $x, y, t$（$-10^9 \\leq x, y \\leq 10^9; 0 \\leq t \\leq 10^9$），描述某次偷吃事件的地点和时间。可以保证单独一头奶牛可以在所有被偷吃地点之间往返。\n\n接下来的 $N$ 行，每行包含 $x, y, t$（$-10^9 \\leq x, y \\leq 10^9; 0 \\leq t \\leq 10^9$），描述某头奶牛的“不在场证明”中提到的位置和时间。", "outputFormat": "输出一个整数，表示能够证明清白的奶牛的数量。\n\n### 样例 1 的解释\n\n共有两次偷吃事件，第一次发生在 $(0,0)$，时间为 $100$；第二次发生在 $(50,0)$，时间为 $200$。\n\n- 第一头奶牛的“不在场证明”无法证明她的清白。她刚好有足够的时间到达第一次偷吃事件的地点。\n- 第二头奶牛的“不在场证明”能够证明她的清白。她远离任何偷吃事件的地点。\n- 不幸的是，第三头奶牛在偷吃事件的现场，这并不能证明她的清白。\n- 最后，第四头奶牛是清白的，因为她不可能在时间限制内从她的“不在场证明”地点赶到最后一次偷吃事件的地点。\n\n### 评分标准\n\n- 测试点 $2-4$：$1 \\leq G, N \\leq 10^3$。此外，对于偷吃地点和“不在场证明”，$-10^6 \\leq x, y \\leq 10^6$ 且 $0 \\leq t \\leq 10^6$。\n- 测试点 $5-11$：无额外限制。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9126", "type": "P", "difficulty": 4, "samples": [["3 3\n1 0 2 10\n2 11 2 0\n2 1 3 20\n10 1 10", "0\n0\n20"], ["3 3\n1 0 2 10\n2 10 2 0\n2 1 3 20\n10 1 10", "0\n10\n-1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["图论", "USACO", "2023", "图论建模", "最短路"], "title": "[USACO23FEB] Moo Route II S", "background": "", "description": "**Note: The time limit for this problem is 4s, twice the default.**\n\nBessie is on vacation! Due to some recent technological advances, Bessie will travel via technologically sophisticated flights, which can even time travel. Furthermore, there are no issues if two \"parallel\" versions of Bessie ever meet.\n\nIn the country there are $N$ airports numbered $1,2,\\cdots ,N$ and $M$ time-traveling flights $(1 \\le N,M \\le 200000)$. Flight $j$ leaves airport $c_j$ at time $r_j$, and arrives in airport $d_j$ at time $s_j (0 \\le rj,sj \\le 10^9$, $s_j<r_j$ is possible$)$. In addition, she must leave $a_i$ time for a layover at airport $i (1 \\le a_i \\le 10^9)$. (That is to say, if Bessie takes a flight arriving in airport $i$ at time $s$, she can then transfer to a flight leaving the airport at time $r$ if $r \\ge s+a_i$. The layovers do not affect when Bessie arrives at an airport.)\n\nBessie starts at city $1$ at time $0$. For each airport from $1$ to $N$, what is the earliest time when Bessie can get to at it? ", "inputFormat": "The first line of input contains $N$ and $M$.\n\nThe next $M$ lines describe flights. The $j$-th of these lines contains $c_j, r_j, d_j, s_j$ in that order. $(1 \\le c_j,d_j \\le N, 0 \\le r_j,s_j \\le 10^9)$\n\nThe next line describes airports. It contains $N$\nspace separated integers, $a_1, \\cdots ,a_N$. ", "outputFormat": "There are $N$ lines of output. Line $i$ contains the earliest time when Bessie can get to airport $i$, or $-1$ if it is not possible for Bessie to get to that airport. ", "hint": "### Explanation for Sample 1\n\nBessie can take the $3$ flights in the listed order, which allows her to arrive at airports $1$ and $2$ at time $0$, and airport $3$ at time $20$.\n\nNote that this route passes through airport $2$ twice, first from time $10-11$ and then from time $0-1$.\n\n### Explanation for Sample 2\n\nIn this case, Bessie can take flight $1$, arriving at airport $2$ at time $10$. However, she does not arrive in time to also take flight $2$, since the departure time is $10$ and she cannot make a $1$ time-unit layover. \n\n### SCORING\n\n - Inputs $3-5$: $r_j<s_j$ for all $j$, i.e. all flights arrive after they depart.\n - Inputs $6-10$: $N,M \\le 5000$\n - Inputs $11-20$: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Moo Route II S", "background": "", "description": "**Note: The time limit for this problem is 4s, twice the default.**\n\nBessie is on vacation! Due to some recent technological advances, Bessie will travel via technologically sophisticated flights, which can even time travel. Furthermore, there are no issues if two \"parallel\" versions of Bessie ever meet.\n\nIn the country there are $N$ airports numbered $1,2,\\cdots ,N$ and $M$ time-traveling flights $(1 \\le N,M \\le 200000)$. Flight $j$ leaves airport $c_j$ at time $r_j$, and arrives in airport $d_j$ at time $s_j (0 \\le rj,sj \\le 10^9$, $s_j<r_j$ is possible$)$. In addition, she must leave $a_i$ time for a layover at airport $i (1 \\le a_i \\le 10^9)$. (That is to say, if Bessie takes a flight arriving in airport $i$ at time $s$, she can then transfer to a flight leaving the airport at time $r$ if $r \\ge s+a_i$. The layovers do not affect when Bessie arrives at an airport.)\n\nBessie starts at city $1$ at time $0$. For each airport from $1$ to $N$, what is the earliest time when Bessie can get to at it? ", "inputFormat": "The first line of input contains $N$ and $M$.\n\nThe next $M$ lines describe flights. The $j$-th of these lines contains $c_j, r_j, d_j, s_j$ in that order. $(1 \\le c_j,d_j \\le N, 0 \\le r_j,s_j \\le 10^9)$\n\nThe next line describes airports. It contains $N$\nspace separated integers, $a_1, \\cdots ,a_N$. ", "outputFormat": "There are $N$ lines of output. Line $i$ contains the earliest time when Bessie can get to airport $i$, or $-1$ if it is not possible for Bessie to get to that airport. ", "hint": "### Explanation for Sample 1\n\nBessie can take the $3$ flights in the listed order, which allows her to arrive at airports $1$ and $2$ at time $0$, and airport $3$ at time $20$.\n\nNote that this route passes through airport $2$ twice, first from time $10-11$ and then from time $0-1$.\n\n### Explanation for Sample 2\n\nIn this case, Bessie can take flight $1$, arriving at airport $2$ at time $10$. However, she does not arrive in time to also take flight $2$, since the departure time is $10$ and she cannot make a $1$ time-unit layover. \n\n### SCORING\n\n - Inputs $3-5$: $r_j<s_j$ for all $j$, i.e. all flights arrive after they depart.\n - Inputs $6-10$: $N,M \\le 5000$\n - Inputs $11-20$: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Moo Route II S", "background": "", "description": "注意：本题的时间限制为 4 秒，是默认限制的两倍。\n\nBessie 正在度假！由于最近的技术进步，Bessie 可以通过先进的航班旅行，这些航班甚至可以进行时间旅行。此外，即使存在多个“平行”的 Bessie 同时出现也不会有任何问题。\n\n在这个国家，有 $N$ 个机场，编号为 $1,2,\\cdots,N$，以及 $M$ 条时间旅行航班（$1 \\leq N,M \\leq 200000$）。第 $j$ 条航班从机场 $c_j$ 在时间 $r_j$ 起飞，并在时间 $s_j$ 抵达机场 $d_j$（$0 \\leq r_j,s_j \\leq 10^9$，$s_j < r_j$ 是可能的）。此外，Bessie 在机场 $i$ 需要停留 $a_i$ 时间（$1 \\leq a_i \\leq 10^9$）。也就是说，如果 Bessie 乘坐一趟航班在时间 $s$ 抵达机场 $i$，她可以转乘一趟从该机场出发的航班，只要该航班的起飞时间 $r \\geq s + a_i$。需要注意的是，停留时间不会影响 Bessie 抵达某机场的实际时间。\n\nBessie 从城市 $1$ 出发，起始时间为 $0$。对于从 $1$ 到 $N$ 的每个机场，求出 Bessie 最早可以到达该机场的时间。", "inputFormat": "第一行输入包含两个整数 $N$ 和 $M$。\n\n接下来的 $M$ 行描述航班信息。其中第 $j$ 行包含 $c_j, r_j, d_j, s_j$，依次表示航班的起飞机场、起飞时间、降落机场和降落时间。$(1 \\leq c_j,d_j \\leq N, 0 \\leq r_j,s_j \\leq 10^9)$\n\n接下来的 $1$ 行描述每个机场的停留时间。该行包含 $N$ 个用空格分隔的整数，分别为 $a_1,\\cdots,a_N$。", "outputFormat": "输出共 $N$ 行。第 $i$ 行输出 Bessie 最早到达机场 $i$ 的时间；如果无法到达该机场，输出 $-1$。\n\n### 样例 1 的解释\n\nBessie 可以按照给定的顺序乘坐第 $3$ 班航班，这使她可以在时间 $0$ 到达机场 $1$ 和机场 $2$，以及在时间 $20$ 到达机场 $3$。\n\n\n注意，这条路线会两次经过机场 $2$，第一次是在时间 $10-11$，第二次是在时间 $0-1$。\n\n### 样例 2 的解释\n\n在这个例子中，Bessie 可以乘坐第 $1$ 班航班，在时间 $10$ 抵达机场 $2$。但是，她无法及时赶上第 $2$ 班航班，因为该航班的起飞时间为 $10$，而她需要至少 $1$ 个时间单位来完成停留。\n\n### 评分标准\n\n - 测试点 $3-5$：对于每个 $j$，$r_j < s_j$，也就是说所有航班的到达时间晚于起飞时间。\n - 测试点 $6-10$：$N,M \\leq 5000$\n - 测试点 $11-20$：无额外限制。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9127", "type": "P", "difficulty": 4, "samples": [["2\n2 -3", "2\n3"], ["3\n3 -10 4", "1\n6\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2023", "排序", "线性递推"], "title": "[USACO23FEB] Equal Sum Subarrays G", "background": "", "description": "**Note: The time limit for this problem is 3s, 1.5x the default.** \n\nFJ gave Bessie an array $a$ of length $N(2 \\le N \\le 500,−10^{15} \\le a_i \\le 10^{15})$ with all $\\dfrac{N(N+1)}{2}$ contiguous subarray sums distinct. For each index $i \\in [1,N]$, help Bessie compute the minimum amount it suffices to change ai by so that there are two different contiguous subarrays of a with equal sum. ", "inputFormat": "The first line contains $N$.\n\nThe next line contains $a_1, \\cdots ,a_N$\n(the elements of $a$, in order). ", "outputFormat": "One line for each index $i \\in [1,N]$. ", "hint": "### Explanation for Sample 1\n\nDecreasing $a_1$ by $2$ would result in $a_1+a_2=a_2$. Similarly, increasing $a_2$ by $3$ would result in $a_1+a_2=a_1$. \n\n### Explanation for Sample 2\n\nIncreasing a1 or decreasing $a_3$ by $1$ would result in $a_1=a_3$. Increasing $a_2$ by $6$ would result in $a_1=a_1+a_2+a_3$. \n\n### SCORING\n\n - Input $3$: $N \\le 40$\n - Input $4$: $N \\le 80$\n - Inputs $5-7$: $N \\le 200$\n - Inputs 8-16: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Equal Sum Subarrays G", "background": "", "description": "**Note: The time limit for this problem is 3s, 1.5x the default.** \n\nFJ gave Bessie an array $a$ of length $N(2 \\le N \\le 500,−10^{15} \\le a_i \\le 10^{15})$ with all $\\dfrac{N(N+1)}{2}$ contiguous subarray sums distinct. For each index $i \\in [1,N]$, help Bessie compute the minimum amount it suffices to change ai by so that there are two different contiguous subarrays of a with equal sum. ", "inputFormat": "The first line contains $N$.\n\nThe next line contains $a_1, \\cdots ,a_N$\n(the elements of $a$, in order). ", "outputFormat": "One line for each index $i \\in [1,N]$. ", "hint": "### Explanation for Sample 1\n\nDecreasing $a_1$ by $2$ would result in $a_1+a_2=a_2$. Similarly, increasing $a_2$ by $3$ would result in $a_1+a_2=a_1$. \n\n### Explanation for Sample 2\n\nIncreasing a1 or decreasing $a_3$ by $1$ would result in $a_1=a_3$. Increasing $a_2$ by $6$ would result in $a_1=a_1+a_2+a_3$. \n\n### SCORING\n\n - Input $3$: $N \\le 40$\n - Input $4$: $N \\le 80$\n - Inputs $5-7$: $N \\le 200$\n - Inputs 8-16: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Equal Sum Subarrays G", "background": "", "description": "注意：本题的时间限制为 3 秒，为默认时间的 1.5 倍。\n\nFJ 给了 Bessie 一个长度为 $N$ 的数组 $a$（$2 \\leq N \\leq 500, -10^{15} \\leq a_i \\leq 10^{15}$），其中所有 $\\dfrac{N(N+1)}{2}$ 个连续子数组的和都是不同的。对于每个下标 $i \\in [1,N]$，帮助 Bessie 计算最小的改变量，使得数组中存在两个不同的连续子数组的和相等。", "inputFormat": "第一行包含一个整数 $N$，表示数组的长度。\n\n第二行包含 $a_1,\\cdots,a_N$，即数组 $a$ 的元素，按顺序给出。", "outputFormat": "对于每个下标 $i \\in [1,N]$，输出一行一个整数，表示改变 $a_i$ 的最小改变量。\n\n### 样例 1 的解释\n\n将 $a_1$ 减少 $2$，可以使得 $a_1+a_2=a_2$。类似地，将 $a_2$ 增加 $3$，可以使得 $a_1+a_2=a_1$。\n\n### 样例 2 的解释\n\n将 $a_1$ 增加 $1$ 或将 $a_3$ 减少 $1$，可以使得 $a_1=a_3$。将 $a_2$ 增加 $6$，可以使得 $a_1=a_1+a_2+a_3$。\n\n### 评分标准\n\n- 测试点 $3$：$N \\leq 40$\n- 测试点 $4$：$N \\leq 80$\n- 测试点 $5-7$：$N \\leq 200$\n- 测试点 $8-16$：无额外限制。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9128", "type": "P", "difficulty": 6, "samples": [["5 0\n1 1\n1 2\n3 1\n3 4", "8 21"], ["5 1\n1 1\n1 2\n3 1\n3 4", "6 29"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "USACO", "2023", "排序"], "title": "[USACO23FEB] Fertilizing Pastures G", "background": "", "description": "There are $N$ pastures $(2 \\le N \\le 2 \\cdot 10^5)$, connected by $N−1$ roads, such that they form a tree. Every road takes $1$ second to cross. Each pasture starts out with $0$ grass, and the ith pasture's grass grows at a rate of $a_i (1 \\le a_i \\le 10^8)$ units per second. Farmer John is in pasture $1$ at the start, and needs to drive around and fertilize the grass in every pasture. If he visits a pasture with $x$ units of grass, it will need $x$ amount of fertilizer. A pasture only needs to be fertilized the first time it is visited, and fertilizing a pasture takes $0$ time.\n\nThe input contains an additional parameter $T \\in \\{0,1\\}$.\n\n - If $T=0$, Farmer John must end at pasture $1$.\n - If $T=1$, Farmer John may end at any pasture.\n\nCompute the minimum amount of time it will take to fertilize every pasture and the minimum amount of fertilizer needed to finish in that amount of time. ", "inputFormat": "The first line contains $N$ and $T$.\n\nThen for each $i$ from $2$ to $N$, there is a line containing $p_i$ and $a_i$, meaning that there is a road connecting pastures $p_i$ and $i$. It is guaranteed that $1 \\le p_i<i$. ", "outputFormat": " The minimum amount of time and the minimum amount of fertilizer, separated by spaces. ", "hint": "### Explanation for Sample 1\n\nThe optimal route for Farmer John is as follows: \n\n - At time $1$, move to node $3$, which now has $1 \\cdot 2=2$ grass and so needs $2$ fertilizer.\n - At time $2$, move to node $5$, which now has $2 \\cdot 4=8$ grass and so needs $8$ fertilizer.\n - At time $3$, move back to node $3$, which we already fertilized and so don't need to fertilize again.\n - At time $4$, move to node $4$, which now has $4 \\cdot 1=4$ grass and so needs $4$ fertilizer.\n - At time $5$, move back to node $3$, which we already fertilized.\n - At time $6$, move back to node $1$.\n - At time $7$, move to node $2$, which now has $7 \\cdot 1=7$ grass and so needs $7$ fertilizer.\n - At time $8$, return to node $1$. \n\nThis route takes $8$ time and uses $2+8+4+7=21$ fertilizer. It can be shown that $8$ is the least possible amount of time for any route that returns to node $1$ at the end and $21$ is the least possible fertilizer used for any route that returns to node $1$ and takes $8$ time.\n\n### Explanation for Sample 2\n\nThe optimal route for Farmer John is as follows:\n\n - At time $1$, move to node $2$, which now has $1 \\cdot 1=1$ grass and so needs $1$ fertilizer.\n - At time $2$, move back to node $1$.\n - At time $3$, move to node $3$, which now has $3 \\cdot 2=6$ grass and so needs $6$ fertilizer.\n - At time $4$, move to node $5$, which now has $4 \\cdot 4=16$ grass and so needs $16$ fertilizer.\n - At time $5$, move back to node $3$, which we already fertilized and so don't need to fertilize again.\n - At time $6$, move to node $4$, which now has $6 \\cdot 1=6$ grass and so needs $6$ fertilizer.\n\nThis route takes $6$ time and uses $1+6+16+6=29$ fertilizer. It can be shown that $6$ is the least possible amount of time for any route and $29$ is the least possible fertilizer used for any route that takes $6$ time.\n\n### SCORING\n\n - Inputs $3-10$: $T=0$\n - Inputs $11-22$: $T=1$\n - Inputs $3-6$ and $11-14$: No pasture is adjacent to more than three roads.", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Fertilizing Pastures G", "background": "", "description": "There are $N$ pastures $(2 \\le N \\le 2 \\cdot 10^5)$, connected by $N−1$ roads, such that they form a tree. Every road takes $1$ second to cross. Each pasture starts out with $0$ grass, and the ith pasture's grass grows at a rate of $a_i (1 \\le a_i \\le 10^8)$ units per second. Farmer John is in pasture $1$ at the start, and needs to drive around and fertilize the grass in every pasture. If he visits a pasture with $x$ units of grass, it will need $x$ amount of fertilizer. A pasture only needs to be fertilized the first time it is visited, and fertilizing a pasture takes $0$ time.\n\nThe input contains an additional parameter $T \\in \\{0,1\\}$.\n\n - If $T=0$, Farmer John must end at pasture $1$.\n - If $T=1$, Farmer John may end at any pasture.\n\nCompute the minimum amount of time it will take to fertilize every pasture and the minimum amount of fertilizer needed to finish in that amount of time. ", "inputFormat": "The first line contains $N$ and $T$.\n\nThen for each $i$ from $2$ to $N$, there is a line containing $p_i$ and $a_i$, meaning that there is a road connecting pastures $p_i$ and $i$. It is guaranteed that $1 \\le p_i<i$. ", "outputFormat": " The minimum amount of time and the minimum amount of fertilizer, separated by spaces. ", "hint": "### Explanation for Sample 1\n\nThe optimal route for Farmer John is as follows: \n\n - At time $1$, move to node $3$, which now has $1 \\cdot 2=2$ grass and so needs $2$ fertilizer.\n - At time $2$, move to node $5$, which now has $2 \\cdot 4=8$ grass and so needs $8$ fertilizer.\n - At time $3$, move back to node $3$, which we already fertilized and so don't need to fertilize again.\n - At time $4$, move to node $4$, which now has $4 \\cdot 1=4$ grass and so needs $4$ fertilizer.\n - At time $5$, move back to node $3$, which we already fertilized.\n - At time $6$, move back to node $1$.\n - At time $7$, move to node $2$, which now has $7 \\cdot 1=7$ grass and so needs $7$ fertilizer.\n - At time $8$, return to node $1$. \n\nThis route takes $8$ time and uses $2+8+4+7=21$ fertilizer. It can be shown that $8$ is the least possible amount of time for any route that returns to node $1$ at the end and $21$ is the least possible fertilizer used for any route that returns to node $1$ and takes $8$ time.\n\n### Explanation for Sample 2\n\nThe optimal route for Farmer John is as follows:\n\n - At time $1$, move to node $2$, which now has $1 \\cdot 1=1$ grass and so needs $1$ fertilizer.\n - At time $2$, move back to node $1$.\n - At time $3$, move to node $3$, which now has $3 \\cdot 2=6$ grass and so needs $6$ fertilizer.\n - At time $4$, move to node $5$, which now has $4 \\cdot 4=16$ grass and so needs $16$ fertilizer.\n - At time $5$, move back to node $3$, which we already fertilized and so don't need to fertilize again.\n - At time $6$, move to node $4$, which now has $6 \\cdot 1=6$ grass and so needs $6$ fertilizer.\n\nThis route takes $6$ time and uses $1+6+16+6=29$ fertilizer. It can be shown that $6$ is the least possible amount of time for any route and $29$ is the least possible fertilizer used for any route that takes $6$ time.\n\n### SCORING\n\n - Inputs $3-10$: $T=0$\n - Inputs $11-22$: $T=1$\n - Inputs $3-6$ and $11-14$: No pasture is adjacent to more than three roads.", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Fertilizing Pastures G", "background": "", "description": "有 $N$ 个顶点的树，经过节点之间的每一条边都需要 $1s$。每个顶点一开始的权值均为 $0$，第 $i$ 个点的权值的增长速率为 $a_i/s$。FJ 从 $1$ 号顶点出发遍历整棵树。当 FJ 走到某个节点时，若该节点的权值为 $x$，则需要支出大小为 $x$ 的费用。（当然，只需在第一次经过该节点时需要支出。）\n\n给出一个参数 $T$:\n\n+ **若 $T=0$，FJ 必须回到 $1$ 号节点**。\n\n+ **若 $T=1$，FJ 可以在任意节点结束他的遍历**。\n\n求遍历所有节点的最小时间和此时需要付出的最小的费用。", "inputFormat": "第一行包括 $N$ 和 $T$。\n\n第 $2$ 行到第 $N$ 行，包含两个整数 $p_i$ 和 $a_i$,$a_i$ 的含义见上文。$p_i$ 则表示节点 $i$ 和 $p_i$ 之间有一条边相连。", "outputFormat": "两个整数：遍历所有节点的最小时间和此时需要付出的最小的费用。\n\n$2 \\le N \\le 2 \\times 10^5,T \\in \\{0,1\\},1 \\le a_i \\le 10^8, 1 \\le p_i < i$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9129", "type": "P", "difficulty": 6, "samples": [["5 13 327\n1 2 3 4 5\n3\n1 2\n1 3\n2 5", "2\n18\n34"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2023", "数位 DP", "区间 DP"], "title": "[USACO23FEB] Piling Papers G", "background": "", "description": "Farmer John wrote down $N (1 \\le N \\le 300)$ digits on pieces of paper. For each $i \\in [1,N]$, the ith piece of paper contains digit $a_i (1 \\le a_i \\le 9)$.\n\nThe cows have two favorite integers $A$ and $B(1 \\le A \\le B<10^{18})$, and would like you to answer $Q (1 \\le Q \\le 5⋅10^4)$ queries. For the $i$-th query, the cows will move left to right across papers $l_i \\cdots r_i (1 \\le l_i \\le r_i \\le N)$, maintaining an initially empty pile of papers. For each paper, they will either add it to the top of the pile, to the bottom of the pile, or neither. In the end, they will read the papers in the pile from top to bottom, forming an integer. Over all $3 ^ {r_i−l_i+1}$ ways for the cows to make choices during this process, count the number of ways that result in the cows reading an integer in $[A,B]$ inclusive, and output this number modulo $10^9+7$. ", "inputFormat": "The first line contains three space-separated integers $N, A$, and $B$.\n\nThe second line contains $N$ space-separated digits $a_1,a_2, \\cdots ,a_N$.\n\nThe third line contains an integer $Q$, the number of queries.\n\nThe next $Q$ lines each contain two space-separated integers $l_i$ and $r_i$. ", "outputFormat": "For each query, a single line containing the answer. ", "hint": "### Explanation for Sample 1\n\nFor the first query, there are nine ways Bessie can stack papers when reading the interval $[1,2]$:\n\n - Bessie can ignore $1$ then ignore $2$, getting $0$.\n - Bessie can ignore $1$ then add $2$ to the top of the stack, getting $2$.\n - Bessie can ignore $1$ then add $2$ to the bottom of the stack, getting $2$.\n - Bessie can add $1$ to the top of the stack then ignore $2$, getting $1$.\n - Bessie can add $1$ to the top of the stack then add $2$ to the top of the stack, getting $21$.\n - Bessie can add $1$ to the top of the stack then add $2$ to the bottom of the stack, getting $12$.\n - Bessie can add $1$ to the bottom of the stack then ignore $2$, getting $1$.\n - Bessie can add $1$ to the bottom of the stack then add $2$ to the top of the stack, getting $21$.\n - Bessie can add $1$ to the bottom of the stack then add $2$ to the bottom of the stack, getting $12$. \n\nOnly the $2$ ways that give $21$ yield a number between $13$ and $327$, so the answer is $2$.\n\n### SCORING\n\n - Inputs $2-3$: $B<100$\n - Inputs $4-5$: $A=B$\n - Inputs $6-13$: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Piling Papers G", "background": "", "description": "Farmer John wrote down $N (1 \\le N \\le 300)$ digits on pieces of paper. For each $i \\in [1,N]$, the ith piece of paper contains digit $a_i (1 \\le a_i \\le 9)$.\n\nThe cows have two favorite integers $A$ and $B(1 \\le A \\le B<10^{18})$, and would like you to answer $Q (1 \\le Q \\le 5⋅10^4)$ queries. For the $i$-th query, the cows will move left to right across papers $l_i \\cdots r_i (1 \\le l_i \\le r_i \\le N)$, maintaining an initially empty pile of papers. For each paper, they will either add it to the top of the pile, to the bottom of the pile, or neither. In the end, they will read the papers in the pile from top to bottom, forming an integer. Over all $3 ^ {r_i−l_i+1}$ ways for the cows to make choices during this process, count the number of ways that result in the cows reading an integer in $[A,B]$ inclusive, and output this number modulo $10^9+7$. ", "inputFormat": "The first line contains three space-separated integers $N, A$, and $B$.\n\nThe second line contains $N$ space-separated digits $a_1,a_2, \\cdots ,a_N$.\n\nThe third line contains an integer $Q$, the number of queries.\n\nThe next $Q$ lines each contain two space-separated integers $l_i$ and $r_i$. ", "outputFormat": "For each query, a single line containing the answer. ", "hint": "### Explanation for Sample 1\n\nFor the first query, there are nine ways Bessie can stack papers when reading the interval $[1,2]$:\n\n - Bessie can ignore $1$ then ignore $2$, getting $0$.\n - Bessie can ignore $1$ then add $2$ to the top of the stack, getting $2$.\n - Bessie can ignore $1$ then add $2$ to the bottom of the stack, getting $2$.\n - Bessie can add $1$ to the top of the stack then ignore $2$, getting $1$.\n - Bessie can add $1$ to the top of the stack then add $2$ to the top of the stack, getting $21$.\n - Bessie can add $1$ to the top of the stack then add $2$ to the bottom of the stack, getting $12$.\n - Bessie can add $1$ to the bottom of the stack then ignore $2$, getting $1$.\n - Bessie can add $1$ to the bottom of the stack then add $2$ to the top of the stack, getting $21$.\n - Bessie can add $1$ to the bottom of the stack then add $2$ to the bottom of the stack, getting $12$. \n\nOnly the $2$ ways that give $21$ yield a number between $13$ and $327$, so the answer is $2$.\n\n### SCORING\n\n - Inputs $2-3$: $B<100$\n - Inputs $4-5$: $A=B$\n - Inputs $6-13$: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Piling Papers G", "background": "", "description": "农夫约翰在纸片上写下了 $N (1 \\le N \\le 300)$ 个数字。对于每个 $i \\in [1,N]$，第 $i$ 张纸片上写着数字 $a_i (1 \\le a_i \\le 9)$。\n\n奶牛们有两个最喜欢的整数 $A$ 和 $B(1 \\le A \\le B<10^{18})$，希望你回答 $Q (1 \\le Q \\le 5 \\times 10^4)$ 个查询。对于第 $i$ 个查询，奶牛们将从左到右移动穿过纸片 $l_i \\cdots r_i (1 \\le l_i \\le r_i \\le N)$，保持一个最初为空的纸片堆。对于每张纸片，它们可以选择将其添加到堆的顶部、底部，或者不添加。最后，它们将从顶部到底部读取堆中的纸片，形成一个整数。在奶牛们在此过程中做选择的所有 $3 ^ {r_i-l_i+1}$ 种方式中，计算出结果在 $[A,B]$ 范围内的方式数量，并输出这个数量对 $10^9+7$ 取模的结果。", "inputFormat": "第一行包含三个用空格分隔的整数 $N, A$ 和 $B$。\n\n第二行包含 $N$ 个用空格分隔的数字 $a_1,a_2, \\cdots ,a_N$。\n\n第三行包含一个整数 $Q$，表示查询的数量。\n\n接下来的 $Q$ 行每行包含两个用空格分隔的整数 $l_i$ 和 $r_i$。", "outputFormat": "对于每个查询，输出一个单独的答案。", "hint": "### 示例 1 的解释\n\n对于第一个查询，Bessie 在读取区间 $[1,2]$ 时有九种方式堆叠纸片：\n\n- Bessie 可以忽略 $1$ 然后忽略 $2$，得到 $0$。\n- Bessie 可以忽略 $1$ 然后将 $2$ 添加到堆的顶部，得到 $2$。\n- Bessie 可以忽略 $1$ 然后将 $2$ 添加到堆的底部，得到 $2$。\n- Bessie 可以将 $1$ 添加到堆的顶部然后忽略 $2$，得到 $1$。\n- Bessie 可以将 $1$ 添加到堆的顶部然后将 $2$ 添加到堆的顶部，得到 $21$。\n- Bessie 可以将 $1$ 添加到堆的顶部然后将 $2$ 添加到堆的底部，得到 $12$。\n- Bessie 可以将 $1$ 添加到堆的底部然后忽略 $2$，得到 $1$。\n- Bessie 可以将 $1$ 添加到堆的底部然后将 $2$ 添加到堆的顶部，得到 $21$。\n- Bessie 可以将 $1$ 添加到堆的底部然后将 $2$ 添加到堆的底部，得到 $12$。\n\n只有 $2$ 种方式得到的数字在 $13$ 和 $327$ 之间，所以答案是 $2$。\n\n### 评分\n\n- 输入 $2-3$：$B<100$\n- 输入 $4-5$：$A=B$\n- 输入 $6-13$：无额外约束。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9130", "type": "P", "difficulty": 6, "samples": [["3\n4 3\n1 5\n1 2", "15\n36\n18"], ["9\n1 89\n30 7\n101 26\n1 24\n5 1\n60 4\n5 10\n101 0\n1 200", "4005\n4656\n7607\n3482\n3507\n3753\n4058\n1107\n24531"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "USACO", "2023", "分治"], "title": "[USACO23FEB] Hungry Cow P", "background": "", "description": "**Note: The time limit for this problem is 6s, three times the default. The memory limit for this problem is 512MB, twice the default.** \n\nBessie is a hungry cow. Each day, for dinner, if there is a haybale in the barn, she will eat one haybale. Farmer John does not want Bessie to starve, so some days he sends a delivery of haybales, which arrive in the morning (before dinner). In particular, on day $d_i$, Farmer John sends a delivery of $b_i$ haybales $(1 \\le d_i \\le 10^{14}, 0 \\le b_i \\le 10^9)$.\n\nProcess $U(1 \\le U \\le 10^5)$ updates as follows: Given a pair $(d,b)$, update the number of haybales arriving on day $d$ to $b$. After each update, output the sum of all days on which Bessie eats haybales modulo $10^9+7$. ", "inputFormat": "$U$, followed by $U$ lines containing the updates. ", "outputFormat": "The sum after each update modulo $10^9+7$. ", "hint": "### Explanation for Sample 1\n\nAnswers after each update:\n\n$4+5+6=15$  \n$1+2+3+4+5+6+7+8=36$  \n$1+2+4+5+6=18$\n\n### SCORING\n\n - Input $3$: $U \\le 5000$\n - Inputs $4-10$: Updates only increase the number of haybales arriving on day $d$.\n - Inputs 11-22: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Hungry Cow P", "background": "", "description": "**Note: The time limit for this problem is 6s, three times the default. The memory limit for this problem is 512MB, twice the default.** \n\nBessie is a hungry cow. Each day, for dinner, if there is a haybale in the barn, she will eat one haybale. Farmer John does not want Bessie to starve, so some days he sends a delivery of haybales, which arrive in the morning (before dinner). In particular, on day $d_i$, Farmer John sends a delivery of $b_i$ haybales $(1 \\le d_i \\le 10^{14}, 0 \\le b_i \\le 10^9)$.\n\nProcess $U(1 \\le U \\le 10^5)$ updates as follows: Given a pair $(d,b)$, update the number of haybales arriving on day $d$ to $b$. After each update, output the sum of all days on which Bessie eats haybales modulo $10^9+7$. ", "inputFormat": "$U$, followed by $U$ lines containing the updates. ", "outputFormat": "The sum after each update modulo $10^9+7$. ", "hint": "### Explanation for Sample 1\n\nAnswers after each update:\n\n$4+5+6=15$  \n$1+2+3+4+5+6+7+8=36$  \n$1+2+4+5+6=18$\n\n### SCORING\n\n - Input $3$: $U \\le 5000$\n - Inputs $4-10$: Updates only increase the number of haybales arriving on day $d$.\n - Inputs 11-22: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Hungry Cow P", "background": "", "description": "**注意：本题的时间限制为 6 秒，是默认的三倍。内存限制为 512MB，是默认的两倍。**\n\nBessie 是一头饥饿的奶牛。每天晚餐时，如果谷仓里有干草，她就会吃掉一捆干草。农夫 John 不想让 Bessie 挨饿，所以有些天他会送来干草，这些干草会在早上（晚餐前）到达。特别地，在第 $d_i$ 天，农夫 John 会送来 $b_i$ 捆干草 $(1 \\le d_i \\le 10^{14}, 0 \\le b_i \\le 10^9)$。\n\n处理 $U(1 \\le U \\le 10^5)$ 次更新如下：给定一对 $(d,b)$，更新第 $d$ 天到达的干草数量为 $b$。每次更新后，输出 Bessie 吃干草的所有天数之和，结果对 $10^9+7$ 取模。", "inputFormat": "$U$，接下来是 $U$ 行，包含更新。", "outputFormat": "每次更新后的和，对 $10^9+7$ 取模。", "hint": "### 示例 1 的解释\n\n每次更新后的答案：\n\n$4+5+6=15$  \n$1+2+3+4+5+6+7+8=36$  \n$1+2+4+5+6=18$\n\n### 评分\n\n- 输入 3：$U \\le 5000$\n- 输入 4-10：更新只会增加第 $d$ 天到达的干草数量。\n- 输入 11-22：无额外约束。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9131", "type": "P", "difficulty": 6, "samples": [["3 1\nEHE", "9"], ["10 6\nEHEEEHHEEH\nEHHHEEHHHE\nEHEHEHEEHH\nHEHEEEHEEE\nHHEEHEEEHE\nEHHEEEEEHE", "33"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["USACO", "2023", "快速沃尔什变换 FWT", "状压 DP"], "title": "[USACO23FEB] Problem Setting P", "background": "", "description": "**Note: The memory limit for this problem is 512MB, twice the default.**\n\nFarmer John created $N(1 \\le N \\le 10^5)$ problems. He then recruited $M (1 \\le M \\le 20)$ test-solvers, each of which rated every problem as \"easy\" or \"hard.\"\n\nHis goal is now to create a problemset arranged in increasing order of difficulty, consisting of some subset of his $N$ problems arranged in some order. There must exist no pair of problems such that some test-solver thinks the problem later in the order is easy but the problem earlier in the order is hard.\n\nCount the number of distinct nonempty problemsets he can form, modulo $10^9+7$. ", "inputFormat": "The first line contains $N$ and $M$.\n\nThe next $M$ lines each contain a string of length $N$. The $i$-th character of this string is `E` if the test-solver thinks the ith problem is easy, or `H` otherwise. ", "outputFormat": "The number of distinct problemsets FJ can form, modulo $10^9+7$. ", "hint": "### Explanation for Sample 1\n\nThe nine possible problemsets are as follows:\n\n$[1]$  \n$[1,2]$  \n$[1,3]$  \n$[1,3,2]$  \n$[2]$  \n$[3]$  \n$[3,1]$  \n$[3,2]$  \n$[3,1,2]$  \n\nNote that the order of the problems within the problemset matters. \n\n### SCORING\n\n - Inputs $3-4$: $M=1$\n - Inputs $5-14$: $M \\le 16$\n - Inputs $15-22$: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Problem Setting P", "background": "", "description": "**Note: The memory limit for this problem is 512MB, twice the default.**\n\nFarmer John created $N(1 \\le N \\le 10^5)$ problems. He then recruited $M (1 \\le M \\le 20)$ test-solvers, each of which rated every problem as \"easy\" or \"hard.\"\n\nHis goal is now to create a problemset arranged in increasing order of difficulty, consisting of some subset of his $N$ problems arranged in some order. There must exist no pair of problems such that some test-solver thinks the problem later in the order is easy but the problem earlier in the order is hard.\n\nCount the number of distinct nonempty problemsets he can form, modulo $10^9+7$. ", "inputFormat": "The first line contains $N$ and $M$.\n\nThe next $M$ lines each contain a string of length $N$. The $i$-th character of this string is `E` if the test-solver thinks the ith problem is easy, or `H` otherwise. ", "outputFormat": "The number of distinct problemsets FJ can form, modulo $10^9+7$. ", "hint": "### Explanation for Sample 1\n\nThe nine possible problemsets are as follows:\n\n$[1]$  \n$[1,2]$  \n$[1,3]$  \n$[1,3,2]$  \n$[2]$  \n$[3]$  \n$[3,1]$  \n$[3,2]$  \n$[3,1,2]$  \n\nNote that the order of the problems within the problemset matters. \n\n### SCORING\n\n - Inputs $3-4$: $M=1$\n - Inputs $5-14$: $M \\le 16$\n - Inputs $15-22$: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Problem Setting P", "background": "", "description": "**注意：本题的内存限制为 512MB，是默认值的两倍。**\n\n农夫约翰创建了 $N(1 \\le N \\le 10^5)$ 个问题。然后他招募了 $M (1 \\le M \\le 20)$ 个测试解答者，每个解答者将每个问题评为“简单”或“困难”。\n\n他的目标是创建一个按难度递增顺序排列的问题集，该问题集由他的 $N$ 个问题的某个子集按某种顺序排列而成。必须不存在这样的一对问题，使得某个测试解答者认为顺序中后面的那个问题简单，而前面的那个问题困难。\n\n计算他可以形成的不同非空问题集的数量，结果对 $10^9+7$ 取模。", "inputFormat": "第一行包含 $N$ 和 $M$。\n\n接下来的 $M$ 行每行包含一个长度为 $N$ 的字符串。如果测试解答者认为第 $i$ 个问题简单，则该字符串的第 $i$ 个字符为 `E`，否则为 `H`。", "outputFormat": "FJ 可以形成的不同问题集的数量，对 $10^9+7$ 取模。", "hint": "### 样例 1 的解释\n\n九个可能的问题集如下：\n\n$[1]$  \n$[1,2]$  \n$[1,3]$  \n$[1,3,2]$  \n$[2]$  \n$[3]$  \n$[3,1]$  \n$[3,2]$  \n$[3,1,2]$  \n\n注意问题集内问题的顺序很重要。\n\n### 评分\n\n- 输入 $3-4$：$M=1$\n- 输入 $5-14$：$M \\le 16$\n- 输入 $15-22$：无额外限制。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9132", "type": "P", "difficulty": 6, "samples": [["5\n10001\n1 2\n2 3\n3 4\n4 5", "4\n6\n8\n9\n10"], ["7\n0001010\n7 4\n5 6\n7 2\n5 1\n6 3\n2 5", "4\n6\n8\n9\n10\n11\n12"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2023", "树形 DP", "虚树", "根号分治"], "title": "[USACO23FEB] Watching Cowflix P", "background": "", "description": "**Note: The time limit for this problem is 3s, 1.5x the default.**\n\nBessie likes to watch shows on Cowflix, and she watches them in different places. Farmer John's farm can be represented as a tree with $N(2 \\le N \\le 2 \\cdot 10^5)$ nodes, and for each node, either Bessie watches Cowflix there or she doesn't. It is guaranteed that Bessie watches Cowflix in at least one node.\n\nUnfortunately, Cowflix is introducing a new subscription model to combat password sharing. In their new model, you can choose a connected component of size $d$ in the farm, and then you need to pay $d+k$ moonies for an account that you can use in that connected component. Formally, you need to choose a set of disjoint connected components $c_1,c_2, \\cdots ,c_C$ so that every node where Bessie watches Cowflix must be contained within some $c_i$. The cost of the set of components is $\\sum\\limits^{C}_{i=1}(|c_i|+k)$, where $|c_i|$ is the number of nodes in component $c_i$. Nodes where Bessie does not watch Cowflix do not have to be in any $c_i$.\n\nBessie is worried that the new subscription model may be too expensive for her given all the places she visits and is thinking of switching to Mooloo. To aid her decision-making, calculate the minimum amount she would need to pay to Cowflix to maintain her viewing habits. Because Cowflix has not announced the value of $k$, calculate it for all integer values of $k$ from $1$ to $N$. ", "inputFormat": "The first line contains $N$.\n\nThe second line contains a bit string $s_1s_2s_3\\cdots s_N$ where $s_i=1$ if Bessie watches Cowflix at node $i$.\n\nThen $N - 1$ lines follow, each containing two integers $a$ and $b (1 \\le a,b \\le N)$, which denotes an edge between $a$ and $b$ in the tree.", "outputFormat": "The answers for each $k$ from $1$ to $N$ on separate lines. ", "hint": "### Explanation for Sample 1\n\nFor $k \\le 3$, it's optimal to have two accounts: $c_1=\\{1\\},c_2=\\{5\\}$. For $k \\ge 3$, it's optimal to have one account: $c_1=\\{1,2,3,4,5\\}$.\n\n### SCORING\n\n - Inputs $3-5$: $N \\le 5000$\n - Inputs $6-8$: $i$ is connected to $i+1$ for all $i \\in [1,N)$.\n - Inputs $9-19$: $N \\le 10^5$\n - Inputs $20-24$: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23FEB] Watching Cowflix P", "background": "", "description": "**Note: The time limit for this problem is 3s, 1.5x the default.**\n\nBessie likes to watch shows on Cowflix, and she watches them in different places. Farmer John's farm can be represented as a tree with $N(2 \\le N \\le 2 \\cdot 10^5)$ nodes, and for each node, either Bessie watches Cowflix there or she doesn't. It is guaranteed that Bessie watches Cowflix in at least one node.\n\nUnfortunately, Cowflix is introducing a new subscription model to combat password sharing. In their new model, you can choose a connected component of size $d$ in the farm, and then you need to pay $d+k$ moonies for an account that you can use in that connected component. Formally, you need to choose a set of disjoint connected components $c_1,c_2, \\cdots ,c_C$ so that every node where Bessie watches Cowflix must be contained within some $c_i$. The cost of the set of components is $\\sum\\limits^{C}_{i=1}(|c_i|+k)$, where $|c_i|$ is the number of nodes in component $c_i$. Nodes where Bessie does not watch Cowflix do not have to be in any $c_i$.\n\nBessie is worried that the new subscription model may be too expensive for her given all the places she visits and is thinking of switching to Mooloo. To aid her decision-making, calculate the minimum amount she would need to pay to Cowflix to maintain her viewing habits. Because Cowflix has not announced the value of $k$, calculate it for all integer values of $k$ from $1$ to $N$. ", "inputFormat": "The first line contains $N$.\n\nThe second line contains a bit string $s_1s_2s_3\\cdots s_N$ where $s_i=1$ if Bessie watches Cowflix at node $i$.\n\nThen $N - 1$ lines follow, each containing two integers $a$ and $b (1 \\le a,b \\le N)$, which denotes an edge between $a$ and $b$ in the tree.", "outputFormat": "The answers for each $k$ from $1$ to $N$ on separate lines. ", "hint": "### Explanation for Sample 1\n\nFor $k \\le 3$, it's optimal to have two accounts: $c_1=\\{1\\},c_2=\\{5\\}$. For $k \\ge 3$, it's optimal to have one account: $c_1=\\{1,2,3,4,5\\}$.\n\n### SCORING\n\n - Inputs $3-5$: $N \\le 5000$\n - Inputs $6-8$: $i$ is connected to $i+1$ for all $i \\in [1,N)$.\n - Inputs $9-19$: $N \\le 10^5$\n - Inputs $20-24$: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23FEB] Watching Cowflix P", "background": "", "description": "**注意：本题的时间限制为 3 秒，是默认时间的 1.5 倍。**\n\nBessie 喜欢在 Cowflix 上观看节目，并且她在不同的地方观看。Farmer John's 农场可以表示为一个有 $N(2 \\le N \\le 2 \\cdot 10^5)$ 个节点的树，对于每个节点，Bessie 要么在该节点观看 Cowflix，要么不观看。保证 Bessie 至少在一个节点上观看 Cowflix。\n\n不幸的是，Cowflix 正在引入一种新的订阅模式以打击密码共享。在他们的新模式中，你可以在农场中选择一个大小为 $d$ 的连通分量，然后你需要支付 $d+k$ moonies 来获得一个可以在该连通分量中使用的账户。正式地，你需要选择一组不相交的连通分量 $c_1,c_2, \\cdots ,c_C$，使得每个 Bessie 观看 Cowflix 的节点必须包含在某个 $c_i$ 中。组件集的成本为 $\\sum\\limits^{C}_{i=1}(|c_i|+k)$，其中 $|c_i|$ 是组件 $c_i$ 中的节点数。Bessie 不观看 Cowflix 的节点不必包含在任何 $c_i$ 中。\n\nBessie 担心新的订阅模式可能对她来说太贵，因为她访问的地方很多，因此她考虑转向 Mooloo。为了帮助她做出决定，计算她需要支付给 Cowflix 的最低金额以维持她的观看习惯。因为 Cowflix 尚未公布 $k$ 的值，所以计算从 $1$ 到 $N$ 的所有整数值的 $k$。", "inputFormat": "第一行包含 $N$。\n\n第二行包含一个位字符串 $s_1s_2s_3\\cdots s_N$，其中 $s_i=1$ 表示 Bessie 在节点 $i$ 观看 Cowflix。\n\n接下来有 $N - 1$ 行，每行包含两个整数 $a$ 和 $b (1 \\le a,b \\le N)$，表示树中 $a$ 和 $b$ 之间的一条边。", "outputFormat": "对于每个从 $1$ 到 $N$ 的 $k$，在单独的行中输出答案。", "hint": "### 示例 1 的解释\n\n对于 $k \\le 3$，最优方案是拥有两个账户：$c_1=\\{1\\},c_2=\\{5\\}$。对于 $k \\ge 3$，最优方案是拥有一个账户：$c_1=\\{1,2,3,4,5\\}$。\n\n### 评分\n\n- 输入 $3-5$：$N \\le 5000$\n- 输入 $6-8$：$i$ 与 $i+1$ 连接，对于所有 $i \\in [1,N)$。\n- 输入 $9-19$：$N \\le 10^5$\n- 输入 $20-24$：无额外限制。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9133", "type": "P", "difficulty": 5, "samples": [["7\n0 0 1 0 0 0 0\n1 1 2 2 3 3\n", "2"], ["见附件中的 2.in", "见附件中的 2.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "博弈论", "2023", "O2优化", "THUPC"], "title": "[THUPC 2023 初赛] 大富翁", "background": "有一天，小 W 和小 H 在玩大富翁。", "description": "这版大富翁的游戏规则比较独特。它的地图是一棵 $n$ 个节点的有根树，其中 $1$ 号节点为根。树上每个节点都有一个价格，第 $x$ 号节点的价格记为 $w_x$。\n\n对于树上两个不同的节点 $x,y$，若 $x$ 是 $y$ 的祖先节点（即，$x$ 在 $1$ 号点到 $y$ 号点的简单路径上），则称 $x$ **支配** $y$。\n\n游戏过程中，小 W 和小 H 轮流**购买**树上的一个未被人购买过的节点，直到树上的 $n$ 个节点都被小 W 或小 H 购买。（游戏开始前，树上的所有节点都没有被购买。）\n\n对于一次购买，假设买方购买了 $x$ 号节点，那么他首先要向系统支付 $w_x$ 个游戏币。假设此时 $x$ 支配着 $n_1$ 个已被买方的对手购买了的节点，同时又被 $n_2$ 个已被对手购买了的节点支配。若 $n_1>n_2$，那么对手要向买方支付 $n_1-n_2$ 个游戏币，若 $n_1<n_2$，那么买方要向对手支付 $n_2-n_1$ 个游戏币。\n\n小 W 和小 H 都是绝顶聪明的人，他们都会在游戏中采用最优策略，来使自己赚到尽量多的游戏币。现在，小 W 想考考你：如果他先手，他最终能赚到多少个游戏币？（即，在整个游戏过程中，小 W 从小 H 手中获得的游戏币个数减去他支付给系统和小 H 的游戏币个数。你可以认为，游戏开始前，小 H 和小 W 手中都有足够数量的游戏币。注意：答案可能为负数。）", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个非负整数，第 $i$ 个整数为 $i$ 号节点的价格 $w_i$。\n\n第三行 $n-1$ 个正整数，第 $i$ 个正整数表示第 $i+1$ 号节点的父亲编号。", "outputFormat": "一行一个整数表示答案。", "hint": "#### 样例解释 1\n\n一个可能的游戏过程是：\n\n- 第一次购买：小 W 购买 $1$ 号节点，向系统支付 $0$ 个游戏币。\n- 第二次购买：小 H 购买 $2$ 号节点，向系统支付 $0$ 个游戏币，并向小 W 支付 $1$ 个游戏币。\n- 第三次购买：小 W 购买 $3$ 号节点，向系统支付 $1$ 个游戏币。\n- 第四次购买：小 H 购买 $4$ 号节点，向系统支付 $0$ 个游戏币，并向小 W 支付 $1$ 个游戏币。\n- 第五次购买：小 W 购买 $6$ 号节点，向系统支付 $0$ 个游戏币。\n- 第六次购买：小 H 购买 $5$ 号节点，向系统支付 $0$ 个游戏币，并向小 W 支付 $1$ 个游戏币。\n- 第七次购买：小 W 购买 $7$ 号节点，向系统支付 $0$ 个游戏币。\n\n#### 子任务\n\n对于所有测试数据，$1\\leq n\\leq 2\\times 10^5$，$0\\leq w_x\\leq 2\\times 10^5$。保证输入的图为一棵以 $1$ 号节点为根的有根树。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 大富翁", "background": "有一天，小 W 和小 H 在玩大富翁。", "description": "这版大富翁的游戏规则比较独特。它的地图是一棵 $n$ 个节点的有根树，其中 $1$ 号节点为根。树上每个节点都有一个价格，第 $x$ 号节点的价格记为 $w_x$。\n\n对于树上两个不同的节点 $x,y$，若 $x$ 是 $y$ 的祖先节点（即，$x$ 在 $1$ 号点到 $y$ 号点的简单路径上），则称 $x$ **支配** $y$。\n\n游戏过程中，小 W 和小 H 轮流**购买**树上的一个未被人购买过的节点，直到树上的 $n$ 个节点都被小 W 或小 H 购买。（游戏开始前，树上的所有节点都没有被购买。）\n\n对于一次购买，假设买方购买了 $x$ 号节点，那么他首先要向系统支付 $w_x$ 个游戏币。假设此时 $x$ 支配着 $n_1$ 个已被买方的对手购买了的节点，同时又被 $n_2$ 个已被对手购买了的节点支配。若 $n_1>n_2$，那么对手要向买方支付 $n_1-n_2$ 个游戏币，若 $n_1<n_2$，那么买方要向对手支付 $n_2-n_1$ 个游戏币。\n\n小 W 和小 H 都是绝顶聪明的人，他们都会在游戏中采用最优策略，来使自己赚到尽量多的游戏币。现在，小 W 想考考你：如果他先手，他最终能赚到多少个游戏币？（即，在整个游戏过程中，小 W 从小 H 手中获得的游戏币个数减去他支付给系统和小 H 的游戏币个数。你可以认为，游戏开始前，小 H 和小 W 手中都有足够数量的游戏币。注意：答案可能为负数。）", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个非负整数，第 $i$ 个整数为 $i$ 号节点的价格 $w_i$。\n\n第三行 $n-1$ 个正整数，第 $i$ 个正整数表示第 $i+1$ 号节点的父亲编号。", "outputFormat": "一行一个整数表示答案。", "hint": "#### 样例解释 1\n\n一个可能的游戏过程是：\n\n- 第一次购买：小 W 购买 $1$ 号节点，向系统支付 $0$ 个游戏币。\n- 第二次购买：小 H 购买 $2$ 号节点，向系统支付 $0$ 个游戏币，并向小 W 支付 $1$ 个游戏币。\n- 第三次购买：小 W 购买 $3$ 号节点，向系统支付 $1$ 个游戏币。\n- 第四次购买：小 H 购买 $4$ 号节点，向系统支付 $0$ 个游戏币，并向小 W 支付 $1$ 个游戏币。\n- 第五次购买：小 W 购买 $6$ 号节点，向系统支付 $0$ 个游戏币。\n- 第六次购买：小 H 购买 $5$ 号节点，向系统支付 $0$ 个游戏币，并向小 W 支付 $1$ 个游戏币。\n- 第七次购买：小 W 购买 $7$ 号节点，向系统支付 $0$ 个游戏币。\n\n#### 子任务\n\n对于所有测试数据，$1\\leq n\\leq 2\\times 10^5$，$0\\leq w_x\\leq 2\\times 10^5$。保证输入的图为一棵以 $1$ 号节点为根的有根树。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9134", "type": "P", "difficulty": 6, "samples": [["3 2\n", "2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "高精度", "2023", "O2优化", "THUPC"], "title": "[THUPC 2023 初赛] 拧螺丝", "background": "张华考上了北京大学；李萍进了中等技术学校；~~小 E 在工地搬砖~~：他们都有光明的前途。\n\n由于搬砖太累，小 E 决定进厂拧螺丝。但是小 E 遇到了一个各种刁难人的老板。", "description": "加工一个模块需要拧 $n$ 个螺丝。但是，每隔 $10$ 分钟，小 E 的老板就会到小 E 的工位上收走一个未完工的模块。在这期间，只够小 E 拧 $k$ 个螺丝。\n\n小 E 的老板刚刚离开。问老板接下来第几次来的时候小 E 才可能有一个完工的模块？假设小 E 的老板极力不想让小 E 达成这件事。", "inputFormat": "一行两个正整数，$n,k$。", "outputFormat": "如果小 E 无论如何也不能有一个完工的模块，那么输出一行 `Poor E.S.!`。\n\n否则输出一行一个正整数，表示答案。", "hint": "#### 样例解释 1\n\n小 E 先选择两个模块各拧上一个螺丝，然后老板来了拿走一个。接下来小 E 只需要在剩下的那个零件上面拧两个螺丝就可以完工了。所以老板第二次来的时候小 E 就有了一个完工的模块。注意小 E 在老板来的时候不能有只拧上了一半的螺丝，不然老板看到了会说小 E 加工不合格。\n\n#### 子任务\n\n保证 $1\\le k \\le n \\le 10^5$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 拧螺丝", "background": "张华考上了北京大学；李萍进了中等技术学校；~~小 E 在工地搬砖~~：他们都有光明的前途。\n\n由于搬砖太累，小 E 决定进厂拧螺丝。但是小 E 遇到了一个各种刁难人的老板。", "description": "加工一个模块需要拧 $n$ 个螺丝。但是，每隔 $10$ 分钟，小 E 的老板就会到小 E 的工位上收走一个未完工的模块。在这期间，只够小 E 拧 $k$ 个螺丝。\n\n小 E 的老板刚刚离开。问老板接下来第几次来的时候小 E 才可能有一个完工的模块？假设小 E 的老板极力不想让小 E 达成这件事。", "inputFormat": "一行两个正整数，$n,k$。", "outputFormat": "如果小 E 无论如何也不能有一个完工的模块，那么输出一行 `Poor E.S.!`。\n\n否则输出一行一个正整数，表示答案。", "hint": "#### 样例解释 1\n\n小 E 先选择两个模块各拧上一个螺丝，然后老板来了拿走一个。接下来小 E 只需要在剩下的那个零件上面拧两个螺丝就可以完工了。所以老板第二次来的时候小 E 就有了一个完工的模块。注意小 E 在老板来的时候不能有只拧上了一半的螺丝，不然老板看到了会说小 E 加工不合格。\n\n#### 子任务\n\n保证 $1\\le k \\le n \\le 10^5$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9135", "type": "P", "difficulty": 6, "samples": [["3\n2 3 4\n", "40\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "数论", "O2优化", "快速傅里叶变换 FFT", "THUPC"], "title": "[THUPC 2023 初赛] 快速 LCM 变换", "background": "", "description": "小 I 今天学习了快速最小公倍数变换（Fast Least-Common-Multiple Transform, FLT），于是他想考考你。\n\n给定一个长度为 $n$ 的正整数序列 $r_1,r_2,\\cdots,r_n$。你需要做以下操作恰好一次：\n\n- 选择整数 $i,j$ 使得 $1 \\le i < j \\le n$。在序列末尾加入 $(r_i+r_j)$，并将 $r_i$ 和 $r_j$ 从序列中删除。\n\n可以注意到总共有 $\\frac{n(n-1)}{2}$ 种可能的操作，每种操作会得到一个长度为 $n-1$ 的序列。\n\n你需要对所有的这 $\\frac{n(n-1)}{2}$ 个序列，求出序列中所有元素的最小公倍数，并给出它们的和模 $998244353$ 的值。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示序列的长度。接下来一行 $n$ 个正整数 $r_1,r_2,\\cdots,r_n$，描述初始序列。", "outputFormat": "输出一行一个整数，表示所有序列的最小公倍数的和模 $998244353$ 的值。", "hint": "#### 样例解释 1\n\n- $i=1,j=2$ 时，得到的序列为 $\\{4,5\\}$，最小公倍数为 $20$；\n- $i=1,j=3$ 时，得到的序列为 $\\{3,6\\}$，最小公倍数为 $6$；\n- $i=2,j=3$ 时，得到的序列为 $\\{2,7\\}$，最小公倍数为 $14$。\n\n因此输出为 $20+6+14=40$。\n\n#### 子任务\n\n对于所有测试数据，$2 \\le n \\le 5 \\times 10^5, 1 \\le r_1,r_2,\\cdots,r_n \\le 10^6$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 快速 LCM 变换", "background": "", "description": "小 I 今天学习了快速最小公倍数变换（Fast Least-Common-Multiple Transform, FLT），于是他想考考你。\n\n给定一个长度为 $n$ 的正整数序列 $r_1,r_2,\\cdots,r_n$。你需要做以下操作恰好一次：\n\n- 选择整数 $i,j$ 使得 $1 \\le i < j \\le n$。在序列末尾加入 $(r_i+r_j)$，并将 $r_i$ 和 $r_j$ 从序列中删除。\n\n可以注意到总共有 $\\frac{n(n-1)}{2}$ 种可能的操作，每种操作会得到一个长度为 $n-1$ 的序列。\n\n你需要对所有的这 $\\frac{n(n-1)}{2}$ 个序列，求出序列中所有元素的最小公倍数，并给出它们的和模 $998244353$ 的值。", "inputFormat": "输入的第一行包含一个正整数 $n$，表示序列的长度。接下来一行 $n$ 个正整数 $r_1,r_2,\\cdots,r_n$，描述初始序列。", "outputFormat": "输出一行一个整数，表示所有序列的最小公倍数的和模 $998244353$ 的值。", "hint": "#### 样例解释 1\n\n- $i=1,j=2$ 时，得到的序列为 $\\{4,5\\}$，最小公倍数为 $20$；\n- $i=1,j=3$ 时，得到的序列为 $\\{3,6\\}$，最小公倍数为 $6$；\n- $i=2,j=3$ 时，得到的序列为 $\\{2,7\\}$，最小公倍数为 $14$。\n\n因此输出为 $20+6+14=40$。\n\n#### 子任务\n\n对于所有测试数据，$2 \\le n \\le 5 \\times 10^5, 1 \\le r_1,r_2,\\cdots,r_n \\le 10^6$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9136", "type": "P", "difficulty": 7, "samples": [["5 6\n1 3 3 2 2\n1 2\n1 3\n2 4\n2 5\n4 3 4 2\n3 2 6 2\n4 0 7 1\n1 5 6 1\n2 2 7\n4 0 3 0\n", "3\n4\n2\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "分块", "THUPC"], "title": "[THUPC 2023 初赛] 种苹果", "background": "", "description": "农夫种了一棵苹果树，树上结满了大大小小的苹果。夏天正是果树生长发育的大好时节，树上不断抽出新的枝条、结出新的苹果，已有的苹果也在不断长大。\n\n为了观察和记录苹果的生长状况，以便对未来收获的行情有大致的估计，农夫进行了长时间仔细的观察和研究。在整个记录周期的最开始，树上一共结有 $n$ 个苹果，农夫将其编号为 $1\\sim n$ ，有 $n-1$ 条树枝连接这些苹果，每条树枝的两端都恰好挂有一个苹果，使得整个苹果树成为一个名副其实的树形结构。农夫对每个苹果进行了一番价值估计，第 $i$ 个苹果的初始价值为 $a_i$ ，表示农夫此时摘下它并卖出的净收益，考虑到成本因素， $a_i$ 可能为负。\n\n在整个记录周期中，共发生了 $m$ 件值得记录的事件，所有的事件共分为以下几种类型：\n\n$1\\ u\\ v\\ w$：树上原本连接苹果 $u$ 和苹果 $v$ 的树枝中间结出了一个新的苹果。设原先树上共有 $k$ 个苹果，则此时变为 $k+1$ 个，农夫将新长出的苹果编号为 $k+1$ ，其价值为 $w$ 。原先连接苹果 $u$ 和 $v$ 的树枝也因此分裂成两条，一条连接苹果 $u$ 和 $k+1$ ，另一条连接苹果 $k+1$ 和 $v$；\n\n$2\\ u\\ w$：树上长出了一条新树枝和一个新苹果。设原先树上共有 $k$ 个苹果，则此时变为 $k+1$ 个，农夫将新长出的苹果编号为 $k+1$，其价值为 $w$。新树枝连接苹果 $u$ 和 $k+1$。\n\n$3\\ u\\ v\\ w$：树上一部分苹果的价值发生了变化。树上连接苹果 $u$ 和 $v$ 的一整段枝条（即树形结构上连接 $u$ 和 $v$ 的最短路径，包括 $u$ 和 $v$ 本身）上的所有苹果的价值均增加了 $w$ 。考虑到价值的变化也可能是由于营养不足或病虫害引起的，因此 $w$ 可能为负。\n\n$4\\ u\\ v\\ w$：农夫想在树上进行一次抽样调查来研究自己的可能收益。他定义价值不小于 $w$ 的苹果为“优质苹果”，并选择了树上连接苹果 $u$ 和 $v$ 的一整段枝条（含义同上），想统计一下这段枝条上的苹果中有多少个“优质苹果”。\n\n但由于苹果的数量是在太多了，农夫数不过来，便只好请你来帮忙。注意：由于农夫不能预测未来，因此你帮农夫时必须**强制在线**地回答问题。", "inputFormat": "第 $1$ 行： $2$ 个正整数 $n,m$。\n\n第 $2$ 行： $n$ 个整数 $a_i$。\n\n接下来 $n-1$ 行：每行两个正整数 $u_i,v_i$，依次描述初始时树上的所有树枝。\n\n接下来 $m$ 行，每行 $3$ 或 $4$ 个整数，按照时间顺序描述所有的事件，格式如题目描述中所述。\n\n为了体现强制在线性，设上一次 $4$ 事件的答案是 $lastans$ （最开始时 $lastans=0$），则所有事件中输入的 $u,v,w$ 都需要异或上 $lastans$ 才是真正的 $u,v,w$。", "outputFormat": "对于每个 $4$ 事件输出一行，一个非负整数，表示农夫此次调查的“优质苹果”数量。", "hint": "#### 样例解释 1\n\n对于这组样例，去除强制在线后的数据如下：\n\n```\n5 6\n1 3 3 2 2\n1 2\n1 3\n2 4\n2 5\n4 3 4 2\n3 1 5 1\n4 3 4 2\n1 1 2 5\n2 6 3\n4 4 7 4\n```\n\n#### 数据范围\n\n对于所有数据， $n,m \\leq 2 \\times 10^5$，$|a_i|, |w|\\leq 10^9$，保证任意时刻涉及到的苹果编号均有意义，保证初始的 $n-1$ 条树枝构成树形结构，所有 $1$ 事件保证连接苹果 $u$ 和 $v$ 的树枝在事件发生时存在。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 种苹果", "background": "", "description": "农夫种了一棵苹果树，树上结满了大大小小的苹果。夏天正是果树生长发育的大好时节，树上不断抽出新的枝条、结出新的苹果，已有的苹果也在不断长大。\n\n为了观察和记录苹果的生长状况，以便对未来收获的行情有大致的估计，农夫进行了长时间仔细的观察和研究。在整个记录周期的最开始，树上一共结有 $n$ 个苹果，农夫将其编号为 $1\\sim n$ ，有 $n-1$ 条树枝连接这些苹果，每条树枝的两端都恰好挂有一个苹果，使得整个苹果树成为一个名副其实的树形结构。农夫对每个苹果进行了一番价值估计，第 $i$ 个苹果的初始价值为 $a_i$ ，表示农夫此时摘下它并卖出的净收益，考虑到成本因素， $a_i$ 可能为负。\n\n在整个记录周期中，共发生了 $m$ 件值得记录的事件，所有的事件共分为以下几种类型：\n\n$1\\ u\\ v\\ w$：树上原本连接苹果 $u$ 和苹果 $v$ 的树枝中间结出了一个新的苹果。设原先树上共有 $k$ 个苹果，则此时变为 $k+1$ 个，农夫将新长出的苹果编号为 $k+1$ ，其价值为 $w$ 。原先连接苹果 $u$ 和 $v$ 的树枝也因此分裂成两条，一条连接苹果 $u$ 和 $k+1$ ，另一条连接苹果 $k+1$ 和 $v$；\n\n$2\\ u\\ w$：树上长出了一条新树枝和一个新苹果。设原先树上共有 $k$ 个苹果，则此时变为 $k+1$ 个，农夫将新长出的苹果编号为 $k+1$，其价值为 $w$。新树枝连接苹果 $u$ 和 $k+1$。\n\n$3\\ u\\ v\\ w$：树上一部分苹果的价值发生了变化。树上连接苹果 $u$ 和 $v$ 的一整段枝条（即树形结构上连接 $u$ 和 $v$ 的最短路径，包括 $u$ 和 $v$ 本身）上的所有苹果的价值均增加了 $w$ 。考虑到价值的变化也可能是由于营养不足或病虫害引起的，因此 $w$ 可能为负。\n\n$4\\ u\\ v\\ w$：农夫想在树上进行一次抽样调查来研究自己的可能收益。他定义价值不小于 $w$ 的苹果为“优质苹果”，并选择了树上连接苹果 $u$ 和 $v$ 的一整段枝条（含义同上），想统计一下这段枝条上的苹果中有多少个“优质苹果”。\n\n但由于苹果的数量是在太多了，农夫数不过来，便只好请你来帮忙。注意：由于农夫不能预测未来，因此你帮农夫时必须**强制在线**地回答问题。", "inputFormat": "第 $1$ 行： $2$ 个正整数 $n,m$。\n\n第 $2$ 行： $n$ 个整数 $a_i$。\n\n接下来 $n-1$ 行：每行两个正整数 $u_i,v_i$，依次描述初始时树上的所有树枝。\n\n接下来 $m$ 行，每行 $3$ 或 $4$ 个整数，按照时间顺序描述所有的事件，格式如题目描述中所述。\n\n为了体现强制在线性，设上一次 $4$ 事件的答案是 $lastans$ （最开始时 $lastans=0$），则所有事件中输入的 $u,v,w$ 都需要异或上 $lastans$ 才是真正的 $u,v,w$。", "outputFormat": "对于每个 $4$ 事件输出一行，一个非负整数，表示农夫此次调查的“优质苹果”数量。", "hint": "#### 样例解释 1\n\n对于这组样例，去除强制在线后的数据如下：\n\n```\n5 6\n1 3 3 2 2\n1 2\n1 3\n2 4\n2 5\n4 3 4 2\n3 1 5 1\n4 3 4 2\n1 1 2 5\n2 6 3\n4 4 7 4\n```\n\n#### 数据范围\n\n对于所有数据， $n,m \\leq 2 \\times 10^5$，$|a_i|, |w|\\leq 10^9$，保证任意时刻涉及到的苹果编号均有意义，保证初始的 $n-1$ 条树枝构成树形结构，所有 $1$ 事件保证连接苹果 $u$ 和 $v$ 的树枝在事件发生时存在。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9137", "type": "P", "difficulty": 5, "samples": [["3\n1 3 3\n", "3\n2 1 2\n"], ["1\n1", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "O2优化", "构造", "THUPC"], "title": "[THUPC 2023 初赛] 速战速决", "background": "", "description": "小 I 与小 J 正在玩一个叫做“开火车”，又称作“拖板车”和“小猫钓鱼”的扑克游戏。游戏规则如下，注意其与一般玩法可能有不同：\n\n- 有 $2n$ 张牌，其中对于整数 $1 \\le i \\le n$，牌面为 $i$ 的牌恰好有 $2$ 张。\n- 游戏开始时，小 I 和小 J 各拿其中 $n$ 张牌组成双方的初始手牌。\n- 维护一个公共牌堆（可以将其看作一个栈），初始没有牌。小 I 与小 J 依次行动，小 I 先手。一次行动时，行动方依次进行以下操作：\n  1. 将手牌中的一张牌放在公共牌堆顶；\n  2. 若此时公共牌堆中有两张相同的牌，则这两张相同的牌以及在这两张牌之间的所有牌从公共牌堆移到当前行动方手牌中；\n  3. 若此时当前行动方没有手牌，则当前行动方失败，另一方胜利。\n\n小 J 是扑克萌新，所以会按照以下策略行动：\n\n- 维护一个队列，初始将 $n$ 张手牌按照一定顺序放入队列中；\n- 每次行动时，将队列开头的牌放在公共牌堆顶；\n- 若小 J 放入某张牌后公共牌堆中有两张相同的牌，则按照在公共牌堆中自顶到底的顺序将获得的牌放入队列尾。\n\n小 I 通过偷看得到了小 J 的策略以及队列中牌的顺序。现在小 I 不仅想获胜，还想速战速决，用**最少**的行动次数获胜，但他也是扑克萌新。所以给定小 J 队列中的 $n$ 张牌以及它们的顺序，你需要给出小 I 的策略，使得小 I 能够获胜，同时行动次数最少，或者告诉他这是不可能的。", "inputFormat": "每组数据的第一行一个整数 $n$ 表示牌面的种数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，从队头到队尾的顺序依次描述小 J 队列中的牌。\n\n得到小 J 的 $n$ 张手牌也就得到了小 I 的 $n$ 张手牌，因此不会输入小 I 的手牌。", "outputFormat": "如果小 I 不可能获胜，只需要输出一个整数 `-1`；否则第一行输出一个整数 $s$，表示你给出的策略中小 I 的行动次数。接下来一行 $s$ 个整数，依次描述每次行动时小 I 从手牌中放入公共牌堆的牌的牌面，两个数之间以一个空格分隔。**注意你给出的策略要满足 $s$ 最小。**", "hint": "#### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m1asrjdd.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x5w65xlc.png)\n\n#### 子任务\n\n对于所有测试数据，$1 \\le n \\le 3 \\times 10^5$，$1 \\le a_1,a_2,\\cdots, a_n \\le n$，且每个整数在序列 $a$ 中至多出现两次。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 速战速决", "background": "", "description": "小 I 与小 J 正在玩一个叫做“开火车”，又称作“拖板车”和“小猫钓鱼”的扑克游戏。游戏规则如下，注意其与一般玩法可能有不同：\n\n- 有 $2n$ 张牌，其中对于整数 $1 \\le i \\le n$，牌面为 $i$ 的牌恰好有 $2$ 张。\n- 游戏开始时，小 I 和小 J 各拿其中 $n$ 张牌组成双方的初始手牌。\n- 维护一个公共牌堆（可以将其看作一个栈），初始没有牌。小 I 与小 J 依次行动，小 I 先手。一次行动时，行动方依次进行以下操作：\n  1. 将手牌中的一张牌放在公共牌堆顶；\n  2. 若此时公共牌堆中有两张相同的牌，则这两张相同的牌以及在这两张牌之间的所有牌从公共牌堆移到当前行动方手牌中；\n  3. 若此时当前行动方没有手牌，则当前行动方失败，另一方胜利。\n\n小 J 是扑克萌新，所以会按照以下策略行动：\n\n- 维护一个队列，初始将 $n$ 张手牌按照一定顺序放入队列中；\n- 每次行动时，将队列开头的牌放在公共牌堆顶；\n- 若小 J 放入某张牌后公共牌堆中有两张相同的牌，则按照在公共牌堆中自顶到底的顺序将获得的牌放入队列尾。\n\n小 I 通过偷看得到了小 J 的策略以及队列中牌的顺序。现在小 I 不仅想获胜，还想速战速决，用**最少**的行动次数获胜，但他也是扑克萌新。所以给定小 J 队列中的 $n$ 张牌以及它们的顺序，你需要给出小 I 的策略，使得小 I 能够获胜，同时行动次数最少，或者告诉他这是不可能的。", "inputFormat": "每组数据的第一行一个整数 $n$ 表示牌面的种数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，从队头到队尾的顺序依次描述小 J 队列中的牌。\n\n得到小 J 的 $n$ 张手牌也就得到了小 I 的 $n$ 张手牌，因此不会输入小 I 的手牌。", "outputFormat": "如果小 I 不可能获胜，只需要输出一个整数 `-1`；否则第一行输出一个整数 $s$，表示你给出的策略中小 I 的行动次数。接下来一行 $s$ 个整数，依次描述每次行动时小 I 从手牌中放入公共牌堆的牌的牌面，两个数之间以一个空格分隔。**注意你给出的策略要满足 $s$ 最小。**", "hint": "#### 样例解释 1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/m1asrjdd.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x5w65xlc.png)\n\n#### 子任务\n\n对于所有测试数据，$1 \\le n \\le 3 \\times 10^5$，$1 \\le a_1,a_2,\\cdots, a_n \\le n$，且每个整数在序列 $a$ 中至多出现两次。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9138", "type": "P", "difficulty": 6, "samples": [["2 4\n1 2", "0.687500000000000000\n"], ["见附件中的 2.in", "见附件中的 2.out"], ["见附件中的 3.in", "见附件中的 3.out"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "博弈论", "倍增", "2023", "Special Judge", "O2优化", "THUPC"], "title": "[THUPC 2023 初赛] 公平合作", "background": "", "description": "在大地的尽头，一座灰白的灯塔矗立在漫长的海岸线上。这一片海域海流复杂、礁石嶙峋，却又是不少航线的必经之路。若没有如此高耸而明亮的灯塔为过路的船只照亮航路，或许会有更多不幸的生命葬身海底。为了看管好这一座海上明灯，一批训练有素的守望人轮流值守于此。日复一日的工作枯燥乏味却又不能有丝毫闪失，紧绷的神经直到下一班守望人到来才得以放松。\n\n在电力普及之前，灯塔通常使用煤油灯为过往的水手指引前行的方向。每次为这座灯塔添加燃油时，需要两位守望人各自搬运一个容积为 $L$ 的油桶；而每次轮到 Y 和 S 所在的班组照料这座灯塔时，总是由 Y 和 S 负责为灯塔加油。将煤油搬运至灯室时，如果不装满油桶，对灯塔的正常运转也没有太大影响，无非是需要多来回搬运几趟。但是，如果两位守望人都想着偷懒，问题恐怕就不只是多几趟那么简单。Y 和 S 想到了一个好办法：互相为对方的油桶装油。\n\n灯塔里有 $N$ 个用于将储存的煤油转移到油桶中的容器，其中第 $i$ 个容器的容积为 $a_i$。Y 和 S 先想办法决定由谁先装油。两人先后装油；轮到其中一位守望人装油时，这位守望人每次从所有容器中等概率地随机选出一个容器，将其装满油，并全部倒入对方的油桶中。两位守望人都可以在操作任意多次（可以是 0 次）后结束装油，但后手必须等先手结束后才能开始装油。Y 和 S 先后装完煤油后，两人会比一下谁把对方的油桶装得更满，再各自把自己的油桶搬运到灯室。但是，如果有谁某次选出一个容器后，把对方的油桶装满了，但容器里还有没倒出的煤油，那么这位倒霉的守望人就必须把两个油桶都独自搬到灯室——这也算是为单调的生活平添了几分乐趣。显然，如果先手某次随机选中的容器会使得油桶溢出，那么后手可以往先手的油桶里面装任意量的煤油，然后幸灾乐祸；因此我们约定：当先手溢出时，必定由先手搬两个油桶。\n\n现在只剩下了一个问题：当 Y 和 S 都采取最优策略，使得对方搬的煤油尽可能地比自己多的时候，先手搬的煤油不多于后手的概率是多大？", "inputFormat": "输入的第一行包括两个正整数 $N$ 和 $L$，分别表示转移用的容器数量和油桶的容积。\n\n输入的第二行包括 $N$ 个正整数 $a_1, \\cdots, a_N$，分别表示每个转移用的容器的容积。", "outputFormat": "输出一个实数，表示先手搬的煤油不多于后手的概率。当你的输出与标准输出的绝对误差不超过 $10^{-6}$ 时，我们认为你的输出是正确的。", "hint": "#### 样例解释 1\n\n可以证明，此时先手的策略一定是装满对方的油桶，且装满时必胜。经过若干次随机抽取后，能恰好将对方的油桶装满的概率为：\n\n$$\n\\left(\\frac{1}{2}\\right)^2 + \\binom{3}{1}\\left(\\frac{1}{2}\\right)^3 + \\left(\\frac{1}{2}\\right)^4 = \\frac{11}{16}=0.6875\n$$\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 2\\times 10^3$，$1\\le L\\le 10^9$，$1\\le a_i\\le 2\\times 10^3$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 公平合作", "background": "", "description": "在大地的尽头，一座灰白的灯塔矗立在漫长的海岸线上。这一片海域海流复杂、礁石嶙峋，却又是不少航线的必经之路。若没有如此高耸而明亮的灯塔为过路的船只照亮航路，或许会有更多不幸的生命葬身海底。为了看管好这一座海上明灯，一批训练有素的守望人轮流值守于此。日复一日的工作枯燥乏味却又不能有丝毫闪失，紧绷的神经直到下一班守望人到来才得以放松。\n\n在电力普及之前，灯塔通常使用煤油灯为过往的水手指引前行的方向。每次为这座灯塔添加燃油时，需要两位守望人各自搬运一个容积为 $L$ 的油桶；而每次轮到 Y 和 S 所在的班组照料这座灯塔时，总是由 Y 和 S 负责为灯塔加油。将煤油搬运至灯室时，如果不装满油桶，对灯塔的正常运转也没有太大影响，无非是需要多来回搬运几趟。但是，如果两位守望人都想着偷懒，问题恐怕就不只是多几趟那么简单。Y 和 S 想到了一个好办法：互相为对方的油桶装油。\n\n灯塔里有 $N$ 个用于将储存的煤油转移到油桶中的容器，其中第 $i$ 个容器的容积为 $a_i$。Y 和 S 先想办法决定由谁先装油。两人先后装油；轮到其中一位守望人装油时，这位守望人每次从所有容器中等概率地随机选出一个容器，将其装满油，并全部倒入对方的油桶中。两位守望人都可以在操作任意多次（可以是 0 次）后结束装油，但后手必须等先手结束后才能开始装油。Y 和 S 先后装完煤油后，两人会比一下谁把对方的油桶装得更满，再各自把自己的油桶搬运到灯室。但是，如果有谁某次选出一个容器后，把对方的油桶装满了，但容器里还有没倒出的煤油，那么这位倒霉的守望人就必须把两个油桶都独自搬到灯室——这也算是为单调的生活平添了几分乐趣。显然，如果先手某次随机选中的容器会使得油桶溢出，那么后手可以往先手的油桶里面装任意量的煤油，然后幸灾乐祸；因此我们约定：当先手溢出时，必定由先手搬两个油桶。\n\n现在只剩下了一个问题：当 Y 和 S 都采取最优策略，使得对方搬的煤油尽可能地比自己多的时候，先手搬的煤油不多于后手的概率是多大？", "inputFormat": "输入的第一行包括两个正整数 $N$ 和 $L$，分别表示转移用的容器数量和油桶的容积。\n\n输入的第二行包括 $N$ 个正整数 $a_1, \\cdots, a_N$，分别表示每个转移用的容器的容积。", "outputFormat": "输出一个实数，表示先手搬的煤油不多于后手的概率。当你的输出与标准输出的绝对误差不超过 $10^{-6}$ 时，我们认为你的输出是正确的。", "hint": "#### 样例解释 1\n\n可以证明，此时先手的策略一定是装满对方的油桶，且装满时必胜。经过若干次随机抽取后，能恰好将对方的油桶装满的概率为：\n\n$$\n\\left(\\frac{1}{2}\\right)^2 + \\binom{3}{1}\\left(\\frac{1}{2}\\right)^3 + \\left(\\frac{1}{2}\\right)^4 = \\frac{11}{16}=0.6875\n$$\n\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 2\\times 10^3$，$1\\le L\\le 10^9$，$1\\le a_i\\le 2\\times 10^3$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9139", "type": "P", "difficulty": 7, "samples": [["2\n1 1 2 1 2 2 1 2", "Yes\n10000111\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "O2优化", "2-SAT", "可持久化线段树", "构造", "THUPC"], "title": "[THUPC 2023 初赛] 喵了个喵 II", "background": "本来这题的题面和《喵了个喵》有关的。但是听说有人嫌题面长，就少说点好了。", "description": "给定一个长为 $4n$ 的序列，其中 $1\\sim n$ 各出现 $4$ 次。问是否能够将其划分为两个相等的子序列。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $4n$ 个正整数，表示序列。保证 $1\\sim n$ 各出现 $4$ 次。", "outputFormat": "如果不能划分为两个相等的子序列，输出一行 `No`。\n\n否则第一行输出 `Yes`。第二行输出一个长为 $4n$ 的 `01` 串。其中第 $i$ 位表示原序列的第 $i$ 个数被划分到第几个子序列。你需要保证你划分出来的两个子序列完全相等。", "hint": "#### 样例解释 1\n\n两个子序列均为 $(1,2,1,2)$。\n\n#### 子任务\n\n保证 $1\\le n \\le 5\\times10^4$。\n\n保证序列中 $1\\sim n$ 各出现 $4$ 次。\n\n#### 评分方式\n\n你的输出的第一行需要与标准答案一致。若为 `Yes`，输出任意一种合法的划分均算正确。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。\n\nBy E.Space：由于考场上数据太弱，本题数据已加强。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 喵了个喵 II", "background": "本来这题的题面和《喵了个喵》有关的。但是听说有人嫌题面长，就少说点好了。", "description": "给定一个长为 $4n$ 的序列，其中 $1\\sim n$ 各出现 $4$ 次。问是否能够将其划分为两个相等的子序列。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $4n$ 个正整数，表示序列。保证 $1\\sim n$ 各出现 $4$ 次。", "outputFormat": "如果不能划分为两个相等的子序列，输出一行 `No`。\n\n否则第一行输出 `Yes`。第二行输出一个长为 $4n$ 的 `01` 串。其中第 $i$ 位表示原序列的第 $i$ 个数被划分到第几个子序列。你需要保证你划分出来的两个子序列完全相等。", "hint": "#### 样例解释 1\n\n两个子序列均为 $(1,2,1,2)$。\n\n#### 子任务\n\n保证 $1\\le n \\le 5\\times10^4$。\n\n保证序列中 $1\\sim n$ 各出现 $4$ 次。\n\n#### 评分方式\n\n你的输出的第一行需要与标准答案一致。若为 `Yes`，输出任意一种合法的划分均算正确。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。\n\nBy E.Space：由于考场上数据太弱，本题数据已加强。", "locale": "zh-CN"}}}
{"pid": "P9140", "type": "P", "difficulty": 6, "samples": [["2 2\n6 10\n8 15\n100000000001\n100000000002\n", "-1\n187500000000\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2023", "O2优化", "最短路", "THUPC"], "title": "[THUPC 2023 初赛] 背包", "background": "", "description": "本题中，你需要解决完全背包问题。\n\n有 $n$ 种物品，第 $i$ 种物品单个体积为 $v_i$、价值为 $c_i$。\n\n$q$ 次询问，每次给出背包的容积 $V$，你需要选择若干个物品，每种物品可以选择任意多个（也可以不选），在选出物品的体积的和**恰好**为 $V$ 的前提下最大化选出物品的价值的和。你需要给出这个最大的价值和，或报告不存在体积和恰好为 $V$ 的方案。\n\n为了体现你解决 NP-Hard 问题的能力，$V$ 会远大于 $v_i$，详见数据范围部分。", "inputFormat": "第一行两个整数 $n,q$，表示物品种数和询问次数。\n\n接下来 $n$ 行每行两个整数 $v_i,c_i$ 描述一种物品。\n\n接下来 $q$ 行每行一个整数 $V$ 描述一次询问中背包的体积。", "outputFormat": "对于每组询问输出一行一个整数。若不存在体积和恰好为 $V$ 的方案，输出 `-1`；否则输出最大的选出物品的价值和。", "hint": "#### 样例解释 1\n\n第二组询问的最优方案为：选择 $3$ 个物品 $1$ 和 $12499999998$ 个物品 $2$。\n\n#### 子任务\n\n对于所有测试数据，$1 \\le n \\le 50, 1 \\le v_i \\le 10^5, 1 \\le c_i \\le 10^6, 1 \\le q \\le 10^5, 10^{11} \\le V \\le 10^{12}$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 背包", "background": "", "description": "本题中，你需要解决完全背包问题。\n\n有 $n$ 种物品，第 $i$ 种物品单个体积为 $v_i$、价值为 $c_i$。\n\n$q$ 次询问，每次给出背包的容积 $V$，你需要选择若干个物品，每种物品可以选择任意多个（也可以不选），在选出物品的体积的和**恰好**为 $V$ 的前提下最大化选出物品的价值的和。你需要给出这个最大的价值和，或报告不存在体积和恰好为 $V$ 的方案。\n\n为了体现你解决 NP-Hard 问题的能力，$V$ 会远大于 $v_i$，详见数据范围部分。", "inputFormat": "第一行两个整数 $n,q$，表示物品种数和询问次数。\n\n接下来 $n$ 行每行两个整数 $v_i,c_i$ 描述一种物品。\n\n接下来 $q$ 行每行一个整数 $V$ 描述一次询问中背包的体积。", "outputFormat": "对于每组询问输出一行一个整数。若不存在体积和恰好为 $V$ 的方案，输出 `-1`；否则输出最大的选出物品的价值和。", "hint": "#### 样例解释 1\n\n第二组询问的最优方案为：选择 $3$ 个物品 $1$ 和 $12499999998$ 个物品 $2$。\n\n#### 子任务\n\n对于所有测试数据，$1 \\le n \\le 50, 1 \\le v_i \\le 10^5, 1 \\le c_i \\le 10^6, 1 \\le q \\le 10^5, 10^{11} \\le V \\le 10^{12}$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9141", "type": "P", "difficulty": 7, "samples": [["1 1\n0 0 0\n1 0 0 0 0 1\n1 1 1 4 1 1\n1 3 1 1 1 1\n8 0 0\n-1 0 0 0 0 1\n1 1 1 4 1 1\n1 3 1 1 1 1\n", "0 0 1\n2 1 2\n"], ["1 4\n0 0 0\n1 0 0 0 0 1\n1 1 1 3 1 1\n1 15 3 2 1 10\n60 0 0\n-1 0 0 0 0 1\n1 1 1 3 1 1\n1 15 3 2 1 10\n", "0 0 0\n0 0 0\n0 0 0\n0 2 0\n1 1 2\n2 1 1\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "计算几何", "2023", "O2优化", "THUPC"], "title": "[THUPC 2023 初赛] 乱西星上的空战", "background": "众所周知，在乱西星的现代战争中，制空权是很重要的。为此，人们发展出了无人机技术——遗憾的是，由于乱西星的算法水平和各种意义上的通讯水平实在太落后了，所以这些无人机只能采用各自独立的傻瓜式战斗模式，这些模式不含任何随机因素，因此一场傻瓜式无人机空战总是几乎能在开始前就被预测到结果。\n\n总而言之，乱西星上正在相互战争的 |\\\\| 国和 () 国的傻瓜式无人机战斗机编队在其边境交界处的空域遭遇了，现在两国军方希望你能预测这一空战的结果。", "description": "### 空域与时刻\n\n由于乱西星的神秘物理法则，乱西星的时间和空间并不是连续的；若认为遭遇战开始的时刻是第 $1$ 时刻，那么对于任意的第 $k\\in \\N$ 个时刻，在这一时刻开始和结束时，一个物体（无人机或导弹）只能在形如 $(x,y,z)\\in\\mathbb Z^3$ 的位置（即空域内的整点）上。\n\n### 无人机\n\n由于空域相比无人机要大得多，因此我们可以将无人机视为一个质点（尽管他们实际上长得和地球上的一般意义上的飞机十分相似）。\n\n#### 飞行状态\n\n在每个时刻，一架无人机的飞行状态可以用以下三组参数描述：\n\n1. 当前时刻所在的坐标 $\\vec p=(x,y,z)\\in\\mathbb Z^3$；\n2. 当前时刻的飞行方向向量 $\\vec{d},\\|\\vec d\\|=1$；\n   - 其中， $\\|\\vec{v}\\|$ 表示向量 $\\vec v$ 的长度：设 $\\vec{v}=(v_x,v_y,v_z)$，则 $\\|\\vec{v}\\|=\\sqrt{v_x^2+v_y^2+v_z^2}$。\n   - 你可以简单地将 $\\vec d$ 理解为机头指向的方向。\n3. 当前时刻的无人机升力线方向 $\\vec u,\\|\\vec u\\|=1,\\vec u\\bot \\vec d$；\n   - 你可以简单的将 $\\vec u$ 理解为飞机所在平面的、从机腹指向机背的单位法向量。\n   - 此时，$\\vec d$ 和 $\\vec u$ 可以唯一确定一个“左手向” $\\vec l=\\vec u\\times \\vec d$。\n\n#### 飞行性能\n\n不严格地讲，一般而言，一架飞机通常有三个操作轴，即俯仰、滚转和偏航：俯(负杆)和仰(正杆)分别对应飞机机头向下和向上（即保持 $\\vec l$ 不变）；滚转即飞机以飞行方向为中轴线旋转（即保持 $\\vec d$ 不变）；偏航则为飞机机头向左或者向右（即保持 $\\vec u$ 不变）。由于无人机的特殊设计，其**没有偏航**轴，只能进行俯仰和滚转——容易看出，即使仅进行俯仰和滚转，一架无人机也能随意地改变 $\\vec d$ 和 $\\vec u$ （在保持 $\\|\\vec u\\|=\\|\\vec d\\|=1,\\vec u\\bot \\vec d$ 的前提下）。\n\n以上的俯仰(正杆或负杆)、滚转操作，以及直线飞行，及其复合统称“机动”。\n\n由于无人机型号差异，一架无人机的飞行性能可以用以下三组参数描述（为方便起见，在本节中，对进行一次机动前的飞行状态对应参数为 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$，进行一次机动后的飞行状态对应的参数为 $\\vec p'=(x',y',z'),\\vec d',\\vec u',\\vec l'$）：\n\n1. 正杆率 $\\theta_u\\in(\\dfrac\\pi4,\\dfrac\\pi2)$ 和负杆率 $\\theta_d\\in(\\dfrac\\pi4,\\dfrac \\pi2)$；\n   - 若无人机**仅进行正杆**机动，则必须有 $\\vec p=\\vec p',\\vec l=\\vec l',\\vec u\\cdot \\vec d'\\ge 0$；此时，进行一次这样的机动花费的时间是 $\\dfrac{\\angle(\\vec d,\\vec d')}{\\theta_u}$。\n   - 若无人机**仅进行负杆**机动，则必须有 $\\vec p=\\vec p',\\vec l=\\vec l',\\vec u\\cdot \\vec d'\\le 0$；此时，进行一次这样的机动花费的时间是 $\\dfrac{\\angle(\\vec d,\\vec d')}{\\theta_d}$。\n2. 滚转率 $\\gamma\\in(\\dfrac\\pi4,\\dfrac \\pi 2)$；\n   - 若无人机**仅进行滚转**机动，则必须有 $\\vec p=\\vec p',\\vec d=\\vec d'$；此时，进行一次这样的机动花费的时间是 $\\dfrac{\\angle(\\vec u,\\vec u')}{\\gamma}$。\n3. 飞行极速 $v_{m}>0$；\n   - 若无人机**仅进行直线飞行**，则必须有 $\\vec d=\\vec d',\\vec u=\\vec u'$；此时，花费的时间是 $\\dfrac{\\|\\vec p'-\\vec p\\|}{v_m}$。\n\n#### 合法位移\n\n在每个时刻，若一架无人机可以从 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 这一飞行状态，严格按照**滚转**、**俯仰**(正杆或负杆)和**直线飞行**的顺序进行机动，使飞行状态变为 $\\vec p'=(x',y',z')\\not=\\vec p,\\vec d',\\vec u',\\vec l'$，满足 $\\vec d'//(\\vec p'-\\vec p)$，并且各机动花费的时间之和不超过 $1$，则称这是一次(无人机的)合法的综合机动。\n\n如果一架无人机可以从 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 通过一次合法的综合机动，使飞行状态变为 $\\vec p'=(x',y',z')\\not=\\vec p,\\vec d',\\vec u',\\vec l'$，并且在所有使飞行状态变为 $\\vec p''=\\vec p',\\vec d'',\\vec u'',\\vec l''$ 的合法综合机动中，总用时是最短的，则称之为一次（无人机的）合法位移（或称该位移合法）。此时，无人机会沿直线从 $\\vec p$ 移动到 $\\vec p'$。如无特殊指明，下文中“位移”均默认(应当为)合法位移。\n\n#### 眼镜蛇机动\n\n在每个时刻，无论无人机飞行性能如何，无人机总是可以通过眼镜蛇机动，从 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 这一飞行状态，变为 $\\vec p'=\\vec p,\\vec d'=\\vec u,\\vec u'=-\\vec d,\\vec l'=\\vec l$ 这一飞行状态。注意，这种机动不被视为合法机动。\n\n#### 其它参数\n\n除此之外，一架无人机还具有以下参数：\n\n1. 无人机编号（简称“编号”）；\n   - 保证任意两架无人机编号不同。\n2. 所在阵营（简称“阵营”）；\n   - 所在阵营必须是|\\\\| 国或者是 () 国中之一，并且双方互称敌方阵营。\n\n#### 坠毁\n\n一架无人机坠毁，当且仅当其符合下列条件之一：\n\n1. 在某激活的导弹位移过程中，与该导弹的距离不大于导弹的空爆距离（详见下文）。\n2. 在某导弹位移结束后，与该导弹位置重合（从而导弹直接命中无人机导致坠毁，下同）。\n3. 在无人机位移过程中，存在至少一枚激活的导弹，与其距离不大于该导弹的空爆距离。\n4. 在无人机位移结束后，存在至少一枚导弹所在位置与其位置重合。\n5. 在无人机位移结束后，存在另一架无人机与其坐标相同（从而发生碰撞导致双双坠毁）。\n\n无人机坠毁后将立即消失，此后不会发射导弹，也不会导致其它无人机坠毁。但无人机已经发射的导弹不会立刻消失或爆炸。\n\n此时也称无人机被摧毁。\n\n### 空空红外制导导弹\n\n类似的，一枚空空红外制导导弹（下文简称“导弹”）也可视为一质点，并且同样可以描述其飞行状态和飞行性能。\n\n#### 飞行状态\n\n由于导弹无所谓上下左右，因此仅需要以下两组参数以描述一个导弹的飞行状态：\n\n1. 当前时刻所在的坐标 $\\vec p=(x,y,z)\\in\\Z^3$；\n2. 当前时刻的飞行方向向量 $\\vec{d},\\|\\vec d\\|=1$；\n   - 你可以简单地将 $\\vec d$ 理解为导弹弹头指向的方向。\n\n#### 飞行性能\n\n同样由于一枚导弹无所谓上下左右，因此其不存在俯仰、滚转和偏航轴，其向各个方向改变 $\\vec d$ 的性能是相同的，此时统称仅改变 $\\vec d$ 的操作为 \"偏航\"。其与直线飞行及复合统称“机动”。\n\n因此一枚导弹的飞行性能可以用以下两组参数描述（为方便起见，在本节中，对进行一次机动前的飞行状态对应参数为 $\\vec p=(x,y,z),\\vec d$，进行一次机动后的飞行状态对应的参数为 $\\vec p'=(x',y',z'),\\vec d'$）：\n\n1. 偏航率 $\\theta_r\\in(\\dfrac\\pi4,\\dfrac\\pi2)$；\n   - 若导弹**仅进行偏航**机动，则必须有 $\\vec p=\\vec p'$；此时，进行一次这样的机动花费的时间是 $\\dfrac{\\angle(\\vec d,\\vec d')}{\\theta_r}$；\n2. 飞行极速 $v_m>0$；\n   - 若导弹**仅进行直线飞行**，则必须有 $\\vec d=\\vec d'$；此时，花费的时间是 $\\dfrac{\\|\\vec p'-\\vec p\\|}{v_m}$。\n\n#### 合法位移\n\n在每个时刻，若一枚导弹可以从 $\\vec p=(x,y,z),\\vec d$ 这一飞行状态，严格按照**偏航**和**直线飞行**的顺序进行机动，使飞行状态变为 $\\vec p'=(x',y',z')\\not=\\vec p,\\vec d'$，满足 $\\vec d//(\\vec p'-\\vec p)$，并且各机动花费的时间之和不超过 $1$，则称这是一次(导弹的)合法位移（或称该位移合法）。此时，导弹会沿直线从 $\\vec p$ 移动到 $\\vec p'$。如无特殊指明，下文中“位移”均（应当）默认为合法位移。\n\n#### 其它参数\n\n除此之外，一枚导弹还具有以下参数：\n\n1. 保险距离 $d_s>0$ 和激活状态；\n   - 导弹被发射后立即处于未激活状态。\n   - 每个时刻结束时，若导弹处于未激活状态，并且发射该导弹的无人机已坠毁，或者与发射该导弹的无人机的距离大于保险距离 $d_s$ 时，进入激活状态。此后将保持激活状态，并称该导弹被激活，或称其为一枚激活的导弹。\n2. 空爆距离 $d_p>0$；\n   - 每次导弹位移过程中，当一枚激活的导弹与任一无人机（包括发射该导弹的无人机）距离不大于 $d_p$ 时，该导弹会进入可空爆状态（详见下文“可空爆”）。\n   - 每次无人机位移过程中，若存在一无人机与一枚激活的导弹距离不大于 $d_p$ 时，该导弹也会进入可空爆状态。\n3. 最大锁定角 $\\beta_s\\in(\\dfrac\\pi4,\\dfrac\\pi2)$；\n   - 任意时刻，一枚飞行状态为 $\\vec p=(x,y,z),\\vec d$、最大锁定角的导弹能锁定到 $\\vec p'$ 处的无人机，当且仅当 $\\vec d\\cdot(\\vec p'-\\vec p)>0$，并且 $\\angle(\\vec d,\\vec p'-\\vec p)\\le \\beta_s$。\n   - 此时称该无人机能被该导弹锁定，或称其在导弹的锁定范围内。\n   - 称 $\\angle(\\vec d,\\vec p'-\\vec p)$ 为锁定角。\n4. 制导时长 $t_z>0$；\n   - 若导弹在第 $k$ 个时刻被发射，则到第 $k+t_z$ 个时刻结束时，若导弹仍未爆炸，则导弹会立刻消失（见“爆炸、消失与可空爆”）。此时称导弹超过制导时长。\n\n#### 爆炸、消失与可空爆\n\n一枚导弹在符合下列全部条件时，会立刻爆炸并消失：\n\n1. 在导弹位移开始前，导弹处于激活状态；\n\n2. 符合以下条件之一：\n   \n   1. 在该导弹位移过程中，存在一架位于 $\\vec q$ 的无人机，使 $\\min_{\\lambda\\in[0,1]}\\|\\lambda \\vec p+(1-\\lambda)\\vec p'-\\vec q\\|\\le d_p$，其中  $\\vec p,\\vec p'$ 为导弹本次位移的起点和终点。\n      \n      - 此时，所有这样的无人机都会被该导弹摧毁。同时，一架无人机可能同时被若干枚导弹摧毁。\n   \n   2. 在无人机位移过程中，存在一架无人机，记其从位置 $\\vec q$ 位移到 $\\vec q'$ ，满足 $\\min_{\\lambda\\in[0,1]}\\|\\lambda \\vec q+(1-\\lambda)\\vec q'-\\vec p\\|\\le d_p$，其中 $\\vec p$ 为导弹此时的位置。\n      \n      - 此时，所有这样的无人机都会被该导弹摧毁。同时，该导弹也可能同时摧毁若干这样的无人机。\n\n此时，称该导弹可空爆，或该导弹进入可空爆状态。\n\n一枚导弹在符合下列条件之一时，不会发生爆炸，但是会在当前时刻结束时消失：\n\n1. 导弹脱锁（见下文“导弹脱锁”），并且在当前时刻开始时已被激活；\n\n2. 导弹超过制导时长；\n\n3. 导弹未激活，并且导弹位移结束后与一无人机位置重合；\n   \n   - 此时，该无人机会被这枚导弹摧毁。同时，一架无人机可能同时被若干枚导弹摧毁。\n\n4. 导弹未激活，无人机位移结束后，该导弹与一无人机位置重合。\n   \n   - 此时，该无人机会被这枚导弹摧毁。同时，一枚导弹可能同时摧毁若干这样的无人机。\n\n### 无人机视野、雷达搜索与导弹锁定\n\n#### 无人机视野\n\n任意时刻，一架飞行状态为 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 的无人机能够发现一架位于 $\\vec p'=(x',y',z')$ 的无人机，当且仅当 $\\vec d\\cdot(\\vec p'-\\vec p)> 0$；此时称 $\\vec p'$ 处的无人机在 $\\vec p$ 处无人机的视野内。\n\n#### 无人机机载雷达搜索范围\n\n一架无人机的机载雷达（下文简称“雷达”）的扫描范围可以用以下两个参数描述：\n\n1. 水平扫描范围 $L_x\\in\\N^+$ 和垂直扫描范围 $H_y\\in\\N^+$；\n   - 任意时刻，一架飞行状态为 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 、雷达扫描范围为 $L_x,H_y$ 的无人机的能够扫描到一架位于 $\\vec p'$ 的无人机，当且仅当，$\\vec d\\cdot(\\vec p'-\\vec p)>0$ 并且 $\\exist x,y,s.t.\\ |x|\\le L_x,|y|\\le H_y$ 且 $[\\vec p'-(\\vec p+x\\vec l+y\\vec u)]//\\vec d$。\n   - 即若以 $\\vec p$ 为原点、以 $\\vec l$ 和 $\\vec u$ 为 $X,Y$ 轴建一平面 $\\alpha=\\alpha(\\vec p;\\vec l,\\vec u)$，则  $\\vec p'$ 在这一平面上的投影 $\\vec r=P(\\vec p';\\alpha)$ 应当落在 $[-L_x,L_x]\\times [-H_y,H_y]$ 中。\n   - 此时称 $\\vec p'$ 处的无人机在 $\\vec p$ 处无人机雷达扫描范围内。\n\n#### 导弹脱锁\n\n当无人机位移结束后，若一枚导弹选定的目标已坠毁，或其不能被该导弹锁定，则称该导弹脱锁，或处于脱锁状态。\n\n此后将一直保持脱锁状态，无论是否此前选定的无人机是否重新可以被导弹锁定。\n\n### 无人机选定目标策略\n\n任意时刻，无人机（简称\"本机\"，下同）按下述策略选择目标无人机。\n\n1. 若本机视野内无敌方阵营无人机（简称“敌机”，下同），则本机无选定目标；\n2. 否则，若上一时刻本机选择的无人机仍位于本机视野内，则本机仍选定该目标；\n3. 否则，若存在至少一架敌机处于本机雷达扫描范围内，则选取其中与本机距离最近的；若与本机距离最近的敌机不唯一，则选取编号最小的。\n4. 否则，对视野内的处于 $\\vec p'$ 的敌机，记 $\\alpha=\\alpha(\\vec p;\\vec l,\\vec u),\\vec r=P(\\vec p';\\alpha)=(r_x,r_y)$，则选取 $\\min\\{|r_x-L_x|,|r_x+L_x|\\}+\\min\\{|r_y-H_y|,|r_y+H_y|\\}$ 最小的。若有多个最小值，则同样选择编号最小的。\n\n### 飞行策略\n\n#### 无人机飞行策略\n\n设无人机飞行状态是 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$，其飞行极速为 $v_m$，机载雷达扫描范围为 $L_x,H_y$。\n\n1. 若无人机有位于 $\\vec p'$ 的选定目标：\n   1. 若无人机能够合法地位移到某个位置，使敌机现在的位置 $\\vec p'$ 仍处于本机的视野内，则无人机会合法地移动到飞行状态 $\\vec q=(x_q,y_q,z_q),\\vec d_q,\\vec u_q,\\vec l_q$，使敌机现在的位置 $\\vec p'$ 仍处于本机视野内，且 $\\|\\vec p'-\\vec q\\|$ 最小。\n      1. 若有多个这样的位置，记 $\\alpha_q=\\alpha(\\vec q;\\vec l_q,\\vec u_q),\\vec r_q=P(\\vec p';\\alpha_q)=(r_{qx},r_{qy})$，则优先选取使 $\\vec r_q=(r_{qx},r_{qy})\\in[-L_x,L_x]\\times [-H_y,H_y]$ 的位置；\n         1. 若仍有多个这样的位置，则选取使 $\\|\\vec r_q\\|=\\sqrt{r_{qx}^2+r_{qy}^2}$ 最小的；\n         2. 若仍有多个这样的位置，则选取 $\\vec q$ 字典序最小的。\n      2. 若不存在这样的 $\\vec r_q$，则选取使 $\\min\\{|r_{qx}-L_x|,|r_{qx}+L_x|\\}+\\min\\{|r_{qy}-H_y|,|r_{qy}+H_y|\\}$ 最小的；\n         1. 若仍有多个这样的位置，则选取 $\\vec q$ 字典序最小的。\n   2. 否则，无人机会合法地移动到某个位置 $\\vec q$，使 $\\|\\vec q-\\vec p-v_m\\vec d\\|$ 最小；\n      1. 若有多个这样的位置，则选取 $\\vec q$ 字典序最小的。\n2. 否则，无人机通过眼镜蛇机动，将飞行状态变为 $\\vec p=(x,y,z),\\vec u,-\\vec d,\\vec l$。\n\n保证在上述1.的情况下，无人机总能合法地移动到某个位置。\n\n#### 导弹飞行策略\n\n设导弹当前时刻飞行状态 $\\vec p,\\vec d$，其选定的敌机飞行状态为 $\\vec p',\\vec d',\\vec u',\\vec l'$；\n\n若上一时刻结束时，导弹未脱锁，则记 $\\vec q'$ 为敌机根据其飞行策略，下一时刻会移动到的位置。\n\n若导弹能合法位移到 $\\vec q'$，则导弹会直接位移到 $\\vec q'$。\n\n否则，导弹会合法地位移到能使敌机位移后的位置 $\\vec q'$ 处于锁定范围内的位置 $\\vec q$ ，且 $\\|\\vec q-\\vec q'\\|$ 最小。\n\n1. 若有多个这样的 $\\vec q$，则选取位移后锁定角最小的；\n2. 若仍有多种可能，则选取 $\\vec q$ 字典序最小的。\n\n若不存在这样的位置，或者上个时刻结束时，导弹已经脱锁，则导弹会合法地位移到某个位置 $\\vec q$，使 $\\|\\vec q-\\vec p-v_m\\vec d\\|$ 最小。\n\n保证导弹总能合法地移动到某个位置。\n\n### 无人机发射导弹规则\n\n一飞行状态为 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 的无人机（简称\"本机\"）向**被本机选定**的、处于 $\\vec p'$ 的目标无人机（简称“敌机”）发射导弹的规则为：\n\n在每个时刻开始时，若选定的敌机已处于本机雷达扫描范围内，且当前不存在由本机发射且未爆炸（或消失）的导弹，则向敌机发射一初始飞行状态为 $\\vec p,\\vec d=\\dfrac{\\vec p'-\\vec p}{\\|\\vec p'-\\vec p\\|}$ 的未激活的导弹，该导弹选定敌机。\n\n### 同一时刻内各事件发生顺序\n\n1. 所有无人机选定目标，并确定当前时刻内的飞行策略；\n2. 所有能发射导弹的无人机发射导弹；\n3. 所有导弹确定飞行策略并位移，该过程中部分无人机可能被摧毁；\n4. 所有可空爆的导弹爆炸并消失；\n5. 所有无人机按 1. 中确定的飞行策略位移，该过程中部分无人机可能被摧毁；\n6. 所有可空爆的导弹爆炸并消失；\n7. 所有位置相同的无人机发生碰撞并坠毁。\n8. 所有超过制导时长和脱锁且已激活的导弹消失。\n9. 所有可激活的导弹被激活。\n\n### 任务\n\n给定空域开始时（即第 $1$ 时刻开始时），各无人机的飞行性能与状态、导弹的飞行性能，假定这场空战会持续 $T$ 个时刻，双方指挥官希望你能按时间顺序依次给出每个时刻发生的所有重要事件。", "inputFormat": "第一行两个正整数 $n,T$ ，表示共有 $2n$ 架无人机，模拟前 $T$ 个时刻。其中，前 $n$ 架阵营是 |\\\\| 国，后 $n$ 架阵营是 () 国。\n\n接下来有 $2n$ 组数据，每一组包含若干行，其中第 $i$ 组描述了编号为 $i$ 的无人机。\n\n在每组数据中：\n\n第一行三个整数表示 $\\vec p\\in\\mathbb Z^3$；保证所有的 $\\vec p$ 两两不同，且坐标的绝对值不超过 $100$。\n\n第二行六个整数依次表示无人机的 $\\vec d,\\vec u$，保证 $\\vec d,\\vec u\\in S_v$；\n\n- 其中， $S_v=\\{(1,0,0),(-1,0,0),(0,1,0),(0,-1,0),(0,0,1),(0,0,-1)\\}$；\n\n第三行六个实数依次表示无人机的 $\\theta_u,\\theta_d,\\gamma,v_m,L_x,H_y$；\n\n第四行五个实数和一个正整数依次表示导弹的 $\\theta_r,v_m,d_s,d_p,\\beta_s,t_z$。", "outputFormat": "输出 $T$ 组数据，第 $i$ 组数据表示第 $i$ 个时刻发生的重要事件。\n\n在每组数据中：\n\n第一行三个非负整数 $p_1,p_2,p_3$ ，表示在这个时刻的导弹位移过程中被摧毁的无人机数量、在这个时刻的无人机位移过程中被摧毁的无人机数量、这个时刻结束时，有多少组无人机因位置相同而两两碰撞坠毁。\n\n接下来 $p_1$ 行，每行形如 $id_0\\ k\\ id_1\\ id_2\\ \\cdots\\ id_k$，表示编号为 $id_0$ 的无人机在这个时刻的导弹位移过程中被摧毁，并且在该过程中摧毁该无人机的导弹共有 $k$ 枚，分别来自编号为 $id_1,id_2,\\cdots,id_k$ 的无人机。\n\n为保证输出唯一，这 $p_1$ 行中的每一行内，$id_1,\\dots,id_k$ 应当从小到大输出，行之间按 $id_0$ 从小到大输出。\n\n接下来 $p_2$ 行，每行形如 $id_0\\ k\\ id_1\\ id_2\\ \\cdots\\ id_k$，表示编号为 $id_0$ 的无人机在这个时刻的无人机位移过程中被摧毁，并且在该过程中摧毁该无人机的导弹共有 $k$ 枚，分别来自编号为 $id_1,id_2,\\cdots,id_k$ 的无人机。\n\n为保证输出唯一，这 $p_2$ 行中的每一行内，$id_1,\\dots,id_k$ 应当从小到大输出，行之间按 $id_0$ 从小到大输出。\n\n接下来 $p_3$ 行，每行形如 $k\\ id_1\\ id_2\\ \\dots id_k$，表示该时刻结束时，有 $k$ 架无人机位置相同 ，它们的编号是 $id_1,...,id_n$。\n\n为保证输出唯一，这 $p_3$ 行中的每一行内，$id_1,\\dots,id_k$ 应当从小到大输出，行之间按 $id_1$ 从小到大输出，并且每个编号出现至多一次。", "hint": "#### 样例解释 1\n\n在第 $1$ 时刻，两架飞机于 $(4,0,0)$ 处相撞。\n\n#### 样例解释 2\n\n在第 $4$ 时刻，两枚导弹分别摧毁了敌机。\n\n#### 数据范围\n\n$T,n\\le 100,3\\le v_m\\le 20$；\n\n$v_m>10$ 的无人机和导弹总数不超过 $10$；\n\n$\\theta_u,\\theta_d,\\gamma,\\theta_r,\\beta_s\\in(\\dfrac\\pi4,\\dfrac\\pi2)$；\n\n$1\\le d_s,d_p\\le 20,1\\le t_z\\le 100$；\n\n$|x|,|y|,|z|\\le 100$；\n\n$1\\le L_x,H_y\\le 100$。\n\n所有输入的实数精确到小数点后不超过 $6$ 位。\n\n最初时，$\\vec p$ 两两不同。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 乱西星上的空战", "background": "众所周知，在乱西星的现代战争中，制空权是很重要的。为此，人们发展出了无人机技术——遗憾的是，由于乱西星的算法水平和各种意义上的通讯水平实在太落后了，所以这些无人机只能采用各自独立的傻瓜式战斗模式，这些模式不含任何随机因素，因此一场傻瓜式无人机空战总是几乎能在开始前就被预测到结果。\n\n总而言之，乱西星上正在相互战争的 |\\\\| 国和 () 国的傻瓜式无人机战斗机编队在其边境交界处的空域遭遇了，现在两国军方希望你能预测这一空战的结果。", "description": "### 空域与时刻\n\n由于乱西星的神秘物理法则，乱西星的时间和空间并不是连续的；若认为遭遇战开始的时刻是第 $1$ 时刻，那么对于任意的第 $k\\in \\N$ 个时刻，在这一时刻开始和结束时，一个物体（无人机或导弹）只能在形如 $(x,y,z)\\in\\mathbb Z^3$ 的位置（即空域内的整点）上。\n\n### 无人机\n\n由于空域相比无人机要大得多，因此我们可以将无人机视为一个质点（尽管他们实际上长得和地球上的一般意义上的飞机十分相似）。\n\n#### 飞行状态\n\n在每个时刻，一架无人机的飞行状态可以用以下三组参数描述：\n\n1. 当前时刻所在的坐标 $\\vec p=(x,y,z)\\in\\mathbb Z^3$；\n2. 当前时刻的飞行方向向量 $\\vec{d},\\|\\vec d\\|=1$；\n   - 其中， $\\|\\vec{v}\\|$ 表示向量 $\\vec v$ 的长度：设 $\\vec{v}=(v_x,v_y,v_z)$，则 $\\|\\vec{v}\\|=\\sqrt{v_x^2+v_y^2+v_z^2}$。\n   - 你可以简单地将 $\\vec d$ 理解为机头指向的方向。\n3. 当前时刻的无人机升力线方向 $\\vec u,\\|\\vec u\\|=1,\\vec u\\bot \\vec d$；\n   - 你可以简单的将 $\\vec u$ 理解为飞机所在平面的、从机腹指向机背的单位法向量。\n   - 此时，$\\vec d$ 和 $\\vec u$ 可以唯一确定一个“左手向” $\\vec l=\\vec u\\times \\vec d$。\n\n#### 飞行性能\n\n不严格地讲，一般而言，一架飞机通常有三个操作轴，即俯仰、滚转和偏航：俯(负杆)和仰(正杆)分别对应飞机机头向下和向上（即保持 $\\vec l$ 不变）；滚转即飞机以飞行方向为中轴线旋转（即保持 $\\vec d$ 不变）；偏航则为飞机机头向左或者向右（即保持 $\\vec u$ 不变）。由于无人机的特殊设计，其**没有偏航**轴，只能进行俯仰和滚转——容易看出，即使仅进行俯仰和滚转，一架无人机也能随意地改变 $\\vec d$ 和 $\\vec u$ （在保持 $\\|\\vec u\\|=\\|\\vec d\\|=1,\\vec u\\bot \\vec d$ 的前提下）。\n\n以上的俯仰(正杆或负杆)、滚转操作，以及直线飞行，及其复合统称“机动”。\n\n由于无人机型号差异，一架无人机的飞行性能可以用以下三组参数描述（为方便起见，在本节中，对进行一次机动前的飞行状态对应参数为 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$，进行一次机动后的飞行状态对应的参数为 $\\vec p'=(x',y',z'),\\vec d',\\vec u',\\vec l'$）：\n\n1. 正杆率 $\\theta_u\\in(\\dfrac\\pi4,\\dfrac\\pi2)$ 和负杆率 $\\theta_d\\in(\\dfrac\\pi4,\\dfrac \\pi2)$；\n   - 若无人机**仅进行正杆**机动，则必须有 $\\vec p=\\vec p',\\vec l=\\vec l',\\vec u\\cdot \\vec d'\\ge 0$；此时，进行一次这样的机动花费的时间是 $\\dfrac{\\angle(\\vec d,\\vec d')}{\\theta_u}$。\n   - 若无人机**仅进行负杆**机动，则必须有 $\\vec p=\\vec p',\\vec l=\\vec l',\\vec u\\cdot \\vec d'\\le 0$；此时，进行一次这样的机动花费的时间是 $\\dfrac{\\angle(\\vec d,\\vec d')}{\\theta_d}$。\n2. 滚转率 $\\gamma\\in(\\dfrac\\pi4,\\dfrac \\pi 2)$；\n   - 若无人机**仅进行滚转**机动，则必须有 $\\vec p=\\vec p',\\vec d=\\vec d'$；此时，进行一次这样的机动花费的时间是 $\\dfrac{\\angle(\\vec u,\\vec u')}{\\gamma}$。\n3. 飞行极速 $v_{m}>0$；\n   - 若无人机**仅进行直线飞行**，则必须有 $\\vec d=\\vec d',\\vec u=\\vec u'$；此时，花费的时间是 $\\dfrac{\\|\\vec p'-\\vec p\\|}{v_m}$。\n\n#### 合法位移\n\n在每个时刻，若一架无人机可以从 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 这一飞行状态，严格按照**滚转**、**俯仰**(正杆或负杆)和**直线飞行**的顺序进行机动，使飞行状态变为 $\\vec p'=(x',y',z')\\not=\\vec p,\\vec d',\\vec u',\\vec l'$，满足 $\\vec d'//(\\vec p'-\\vec p)$，并且各机动花费的时间之和不超过 $1$，则称这是一次(无人机的)合法的综合机动。\n\n如果一架无人机可以从 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 通过一次合法的综合机动，使飞行状态变为 $\\vec p'=(x',y',z')\\not=\\vec p,\\vec d',\\vec u',\\vec l'$，并且在所有使飞行状态变为 $\\vec p''=\\vec p',\\vec d'',\\vec u'',\\vec l''$ 的合法综合机动中，总用时是最短的，则称之为一次（无人机的）合法位移（或称该位移合法）。此时，无人机会沿直线从 $\\vec p$ 移动到 $\\vec p'$。如无特殊指明，下文中“位移”均默认(应当为)合法位移。\n\n#### 眼镜蛇机动\n\n在每个时刻，无论无人机飞行性能如何，无人机总是可以通过眼镜蛇机动，从 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 这一飞行状态，变为 $\\vec p'=\\vec p,\\vec d'=\\vec u,\\vec u'=-\\vec d,\\vec l'=\\vec l$ 这一飞行状态。注意，这种机动不被视为合法机动。\n\n#### 其它参数\n\n除此之外，一架无人机还具有以下参数：\n\n1. 无人机编号（简称“编号”）；\n   - 保证任意两架无人机编号不同。\n2. 所在阵营（简称“阵营”）；\n   - 所在阵营必须是|\\\\| 国或者是 () 国中之一，并且双方互称敌方阵营。\n\n#### 坠毁\n\n一架无人机坠毁，当且仅当其符合下列条件之一：\n\n1. 在某激活的导弹位移过程中，与该导弹的距离不大于导弹的空爆距离（详见下文）。\n2. 在某导弹位移结束后，与该导弹位置重合（从而导弹直接命中无人机导致坠毁，下同）。\n3. 在无人机位移过程中，存在至少一枚激活的导弹，与其距离不大于该导弹的空爆距离。\n4. 在无人机位移结束后，存在至少一枚导弹所在位置与其位置重合。\n5. 在无人机位移结束后，存在另一架无人机与其坐标相同（从而发生碰撞导致双双坠毁）。\n\n无人机坠毁后将立即消失，此后不会发射导弹，也不会导致其它无人机坠毁。但无人机已经发射的导弹不会立刻消失或爆炸。\n\n此时也称无人机被摧毁。\n\n### 空空红外制导导弹\n\n类似的，一枚空空红外制导导弹（下文简称“导弹”）也可视为一质点，并且同样可以描述其飞行状态和飞行性能。\n\n#### 飞行状态\n\n由于导弹无所谓上下左右，因此仅需要以下两组参数以描述一个导弹的飞行状态：\n\n1. 当前时刻所在的坐标 $\\vec p=(x,y,z)\\in\\Z^3$；\n2. 当前时刻的飞行方向向量 $\\vec{d},\\|\\vec d\\|=1$；\n   - 你可以简单地将 $\\vec d$ 理解为导弹弹头指向的方向。\n\n#### 飞行性能\n\n同样由于一枚导弹无所谓上下左右，因此其不存在俯仰、滚转和偏航轴，其向各个方向改变 $\\vec d$ 的性能是相同的，此时统称仅改变 $\\vec d$ 的操作为 \"偏航\"。其与直线飞行及复合统称“机动”。\n\n因此一枚导弹的飞行性能可以用以下两组参数描述（为方便起见，在本节中，对进行一次机动前的飞行状态对应参数为 $\\vec p=(x,y,z),\\vec d$，进行一次机动后的飞行状态对应的参数为 $\\vec p'=(x',y',z'),\\vec d'$）：\n\n1. 偏航率 $\\theta_r\\in(\\dfrac\\pi4,\\dfrac\\pi2)$；\n   - 若导弹**仅进行偏航**机动，则必须有 $\\vec p=\\vec p'$；此时，进行一次这样的机动花费的时间是 $\\dfrac{\\angle(\\vec d,\\vec d')}{\\theta_r}$；\n2. 飞行极速 $v_m>0$；\n   - 若导弹**仅进行直线飞行**，则必须有 $\\vec d=\\vec d'$；此时，花费的时间是 $\\dfrac{\\|\\vec p'-\\vec p\\|}{v_m}$。\n\n#### 合法位移\n\n在每个时刻，若一枚导弹可以从 $\\vec p=(x,y,z),\\vec d$ 这一飞行状态，严格按照**偏航**和**直线飞行**的顺序进行机动，使飞行状态变为 $\\vec p'=(x',y',z')\\not=\\vec p,\\vec d'$，满足 $\\vec d//(\\vec p'-\\vec p)$，并且各机动花费的时间之和不超过 $1$，则称这是一次(导弹的)合法位移（或称该位移合法）。此时，导弹会沿直线从 $\\vec p$ 移动到 $\\vec p'$。如无特殊指明，下文中“位移”均（应当）默认为合法位移。\n\n#### 其它参数\n\n除此之外，一枚导弹还具有以下参数：\n\n1. 保险距离 $d_s>0$ 和激活状态；\n   - 导弹被发射后立即处于未激活状态。\n   - 每个时刻结束时，若导弹处于未激活状态，并且发射该导弹的无人机已坠毁，或者与发射该导弹的无人机的距离大于保险距离 $d_s$ 时，进入激活状态。此后将保持激活状态，并称该导弹被激活，或称其为一枚激活的导弹。\n2. 空爆距离 $d_p>0$；\n   - 每次导弹位移过程中，当一枚激活的导弹与任一无人机（包括发射该导弹的无人机）距离不大于 $d_p$ 时，该导弹会进入可空爆状态（详见下文“可空爆”）。\n   - 每次无人机位移过程中，若存在一无人机与一枚激活的导弹距离不大于 $d_p$ 时，该导弹也会进入可空爆状态。\n3. 最大锁定角 $\\beta_s\\in(\\dfrac\\pi4,\\dfrac\\pi2)$；\n   - 任意时刻，一枚飞行状态为 $\\vec p=(x,y,z),\\vec d$、最大锁定角的导弹能锁定到 $\\vec p'$ 处的无人机，当且仅当 $\\vec d\\cdot(\\vec p'-\\vec p)>0$，并且 $\\angle(\\vec d,\\vec p'-\\vec p)\\le \\beta_s$。\n   - 此时称该无人机能被该导弹锁定，或称其在导弹的锁定范围内。\n   - 称 $\\angle(\\vec d,\\vec p'-\\vec p)$ 为锁定角。\n4. 制导时长 $t_z>0$；\n   - 若导弹在第 $k$ 个时刻被发射，则到第 $k+t_z$ 个时刻结束时，若导弹仍未爆炸，则导弹会立刻消失（见“爆炸、消失与可空爆”）。此时称导弹超过制导时长。\n\n#### 爆炸、消失与可空爆\n\n一枚导弹在符合下列全部条件时，会立刻爆炸并消失：\n\n1. 在导弹位移开始前，导弹处于激活状态；\n\n2. 符合以下条件之一：\n   \n   1. 在该导弹位移过程中，存在一架位于 $\\vec q$ 的无人机，使 $\\min_{\\lambda\\in[0,1]}\\|\\lambda \\vec p+(1-\\lambda)\\vec p'-\\vec q\\|\\le d_p$，其中  $\\vec p,\\vec p'$ 为导弹本次位移的起点和终点。\n      \n      - 此时，所有这样的无人机都会被该导弹摧毁。同时，一架无人机可能同时被若干枚导弹摧毁。\n   \n   2. 在无人机位移过程中，存在一架无人机，记其从位置 $\\vec q$ 位移到 $\\vec q'$ ，满足 $\\min_{\\lambda\\in[0,1]}\\|\\lambda \\vec q+(1-\\lambda)\\vec q'-\\vec p\\|\\le d_p$，其中 $\\vec p$ 为导弹此时的位置。\n      \n      - 此时，所有这样的无人机都会被该导弹摧毁。同时，该导弹也可能同时摧毁若干这样的无人机。\n\n此时，称该导弹可空爆，或该导弹进入可空爆状态。\n\n一枚导弹在符合下列条件之一时，不会发生爆炸，但是会在当前时刻结束时消失：\n\n1. 导弹脱锁（见下文“导弹脱锁”），并且在当前时刻开始时已被激活；\n\n2. 导弹超过制导时长；\n\n3. 导弹未激活，并且导弹位移结束后与一无人机位置重合；\n   \n   - 此时，该无人机会被这枚导弹摧毁。同时，一架无人机可能同时被若干枚导弹摧毁。\n\n4. 导弹未激活，无人机位移结束后，该导弹与一无人机位置重合。\n   \n   - 此时，该无人机会被这枚导弹摧毁。同时，一枚导弹可能同时摧毁若干这样的无人机。\n\n### 无人机视野、雷达搜索与导弹锁定\n\n#### 无人机视野\n\n任意时刻，一架飞行状态为 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 的无人机能够发现一架位于 $\\vec p'=(x',y',z')$ 的无人机，当且仅当 $\\vec d\\cdot(\\vec p'-\\vec p)> 0$；此时称 $\\vec p'$ 处的无人机在 $\\vec p$ 处无人机的视野内。\n\n#### 无人机机载雷达搜索范围\n\n一架无人机的机载雷达（下文简称“雷达”）的扫描范围可以用以下两个参数描述：\n\n1. 水平扫描范围 $L_x\\in\\N^+$ 和垂直扫描范围 $H_y\\in\\N^+$；\n   - 任意时刻，一架飞行状态为 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 、雷达扫描范围为 $L_x,H_y$ 的无人机的能够扫描到一架位于 $\\vec p'$ 的无人机，当且仅当，$\\vec d\\cdot(\\vec p'-\\vec p)>0$ 并且 $\\exist x,y,s.t.\\ |x|\\le L_x,|y|\\le H_y$ 且 $[\\vec p'-(\\vec p+x\\vec l+y\\vec u)]//\\vec d$。\n   - 即若以 $\\vec p$ 为原点、以 $\\vec l$ 和 $\\vec u$ 为 $X,Y$ 轴建一平面 $\\alpha=\\alpha(\\vec p;\\vec l,\\vec u)$，则  $\\vec p'$ 在这一平面上的投影 $\\vec r=P(\\vec p';\\alpha)$ 应当落在 $[-L_x,L_x]\\times [-H_y,H_y]$ 中。\n   - 此时称 $\\vec p'$ 处的无人机在 $\\vec p$ 处无人机雷达扫描范围内。\n\n#### 导弹脱锁\n\n当无人机位移结束后，若一枚导弹选定的目标已坠毁，或其不能被该导弹锁定，则称该导弹脱锁，或处于脱锁状态。\n\n此后将一直保持脱锁状态，无论是否此前选定的无人机是否重新可以被导弹锁定。\n\n### 无人机选定目标策略\n\n任意时刻，无人机（简称\"本机\"，下同）按下述策略选择目标无人机。\n\n1. 若本机视野内无敌方阵营无人机（简称“敌机”，下同），则本机无选定目标；\n2. 否则，若上一时刻本机选择的无人机仍位于本机视野内，则本机仍选定该目标；\n3. 否则，若存在至少一架敌机处于本机雷达扫描范围内，则选取其中与本机距离最近的；若与本机距离最近的敌机不唯一，则选取编号最小的。\n4. 否则，对视野内的处于 $\\vec p'$ 的敌机，记 $\\alpha=\\alpha(\\vec p;\\vec l,\\vec u),\\vec r=P(\\vec p';\\alpha)=(r_x,r_y)$，则选取 $\\min\\{|r_x-L_x|,|r_x+L_x|\\}+\\min\\{|r_y-H_y|,|r_y+H_y|\\}$ 最小的。若有多个最小值，则同样选择编号最小的。\n\n### 飞行策略\n\n#### 无人机飞行策略\n\n设无人机飞行状态是 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$，其飞行极速为 $v_m$，机载雷达扫描范围为 $L_x,H_y$。\n\n1. 若无人机有位于 $\\vec p'$ 的选定目标：\n   1. 若无人机能够合法地位移到某个位置，使敌机现在的位置 $\\vec p'$ 仍处于本机的视野内，则无人机会合法地移动到飞行状态 $\\vec q=(x_q,y_q,z_q),\\vec d_q,\\vec u_q,\\vec l_q$，使敌机现在的位置 $\\vec p'$ 仍处于本机视野内，且 $\\|\\vec p'-\\vec q\\|$ 最小。\n      1. 若有多个这样的位置，记 $\\alpha_q=\\alpha(\\vec q;\\vec l_q,\\vec u_q),\\vec r_q=P(\\vec p';\\alpha_q)=(r_{qx},r_{qy})$，则优先选取使 $\\vec r_q=(r_{qx},r_{qy})\\in[-L_x,L_x]\\times [-H_y,H_y]$ 的位置；\n         1. 若仍有多个这样的位置，则选取使 $\\|\\vec r_q\\|=\\sqrt{r_{qx}^2+r_{qy}^2}$ 最小的；\n         2. 若仍有多个这样的位置，则选取 $\\vec q$ 字典序最小的。\n      2. 若不存在这样的 $\\vec r_q$，则选取使 $\\min\\{|r_{qx}-L_x|,|r_{qx}+L_x|\\}+\\min\\{|r_{qy}-H_y|,|r_{qy}+H_y|\\}$ 最小的；\n         1. 若仍有多个这样的位置，则选取 $\\vec q$ 字典序最小的。\n   2. 否则，无人机会合法地移动到某个位置 $\\vec q$，使 $\\|\\vec q-\\vec p-v_m\\vec d\\|$ 最小；\n      1. 若有多个这样的位置，则选取 $\\vec q$ 字典序最小的。\n2. 否则，无人机通过眼镜蛇机动，将飞行状态变为 $\\vec p=(x,y,z),\\vec u,-\\vec d,\\vec l$。\n\n保证在上述1.的情况下，无人机总能合法地移动到某个位置。\n\n#### 导弹飞行策略\n\n设导弹当前时刻飞行状态 $\\vec p,\\vec d$，其选定的敌机飞行状态为 $\\vec p',\\vec d',\\vec u',\\vec l'$；\n\n若上一时刻结束时，导弹未脱锁，则记 $\\vec q'$ 为敌机根据其飞行策略，下一时刻会移动到的位置。\n\n若导弹能合法位移到 $\\vec q'$，则导弹会直接位移到 $\\vec q'$。\n\n否则，导弹会合法地位移到能使敌机位移后的位置 $\\vec q'$ 处于锁定范围内的位置 $\\vec q$ ，且 $\\|\\vec q-\\vec q'\\|$ 最小。\n\n1. 若有多个这样的 $\\vec q$，则选取位移后锁定角最小的；\n2. 若仍有多种可能，则选取 $\\vec q$ 字典序最小的。\n\n若不存在这样的位置，或者上个时刻结束时，导弹已经脱锁，则导弹会合法地位移到某个位置 $\\vec q$，使 $\\|\\vec q-\\vec p-v_m\\vec d\\|$ 最小。\n\n保证导弹总能合法地移动到某个位置。\n\n### 无人机发射导弹规则\n\n一飞行状态为 $\\vec p=(x,y,z),\\vec d,\\vec u,\\vec l$ 的无人机（简称\"本机\"）向**被本机选定**的、处于 $\\vec p'$ 的目标无人机（简称“敌机”）发射导弹的规则为：\n\n在每个时刻开始时，若选定的敌机已处于本机雷达扫描范围内，且当前不存在由本机发射且未爆炸（或消失）的导弹，则向敌机发射一初始飞行状态为 $\\vec p,\\vec d=\\dfrac{\\vec p'-\\vec p}{\\|\\vec p'-\\vec p\\|}$ 的未激活的导弹，该导弹选定敌机。\n\n### 同一时刻内各事件发生顺序\n\n1. 所有无人机选定目标，并确定当前时刻内的飞行策略；\n2. 所有能发射导弹的无人机发射导弹；\n3. 所有导弹确定飞行策略并位移，该过程中部分无人机可能被摧毁；\n4. 所有可空爆的导弹爆炸并消失；\n5. 所有无人机按 1. 中确定的飞行策略位移，该过程中部分无人机可能被摧毁；\n6. 所有可空爆的导弹爆炸并消失；\n7. 所有位置相同的无人机发生碰撞并坠毁。\n8. 所有超过制导时长和脱锁且已激活的导弹消失。\n9. 所有可激活的导弹被激活。\n\n### 任务\n\n给定空域开始时（即第 $1$ 时刻开始时），各无人机的飞行性能与状态、导弹的飞行性能，假定这场空战会持续 $T$ 个时刻，双方指挥官希望你能按时间顺序依次给出每个时刻发生的所有重要事件。", "inputFormat": "第一行两个正整数 $n,T$ ，表示共有 $2n$ 架无人机，模拟前 $T$ 个时刻。其中，前 $n$ 架阵营是 |\\\\| 国，后 $n$ 架阵营是 () 国。\n\n接下来有 $2n$ 组数据，每一组包含若干行，其中第 $i$ 组描述了编号为 $i$ 的无人机。\n\n在每组数据中：\n\n第一行三个整数表示 $\\vec p\\in\\mathbb Z^3$；保证所有的 $\\vec p$ 两两不同，且坐标的绝对值不超过 $100$。\n\n第二行六个整数依次表示无人机的 $\\vec d,\\vec u$，保证 $\\vec d,\\vec u\\in S_v$；\n\n- 其中， $S_v=\\{(1,0,0),(-1,0,0),(0,1,0),(0,-1,0),(0,0,1),(0,0,-1)\\}$；\n\n第三行六个实数依次表示无人机的 $\\theta_u,\\theta_d,\\gamma,v_m,L_x,H_y$；\n\n第四行五个实数和一个正整数依次表示导弹的 $\\theta_r,v_m,d_s,d_p,\\beta_s,t_z$。", "outputFormat": "输出 $T$ 组数据，第 $i$ 组数据表示第 $i$ 个时刻发生的重要事件。\n\n在每组数据中：\n\n第一行三个非负整数 $p_1,p_2,p_3$ ，表示在这个时刻的导弹位移过程中被摧毁的无人机数量、在这个时刻的无人机位移过程中被摧毁的无人机数量、这个时刻结束时，有多少组无人机因位置相同而两两碰撞坠毁。\n\n接下来 $p_1$ 行，每行形如 $id_0\\ k\\ id_1\\ id_2\\ \\cdots\\ id_k$，表示编号为 $id_0$ 的无人机在这个时刻的导弹位移过程中被摧毁，并且在该过程中摧毁该无人机的导弹共有 $k$ 枚，分别来自编号为 $id_1,id_2,\\cdots,id_k$ 的无人机。\n\n为保证输出唯一，这 $p_1$ 行中的每一行内，$id_1,\\dots,id_k$ 应当从小到大输出，行之间按 $id_0$ 从小到大输出。\n\n接下来 $p_2$ 行，每行形如 $id_0\\ k\\ id_1\\ id_2\\ \\cdots\\ id_k$，表示编号为 $id_0$ 的无人机在这个时刻的无人机位移过程中被摧毁，并且在该过程中摧毁该无人机的导弹共有 $k$ 枚，分别来自编号为 $id_1,id_2,\\cdots,id_k$ 的无人机。\n\n为保证输出唯一，这 $p_2$ 行中的每一行内，$id_1,\\dots,id_k$ 应当从小到大输出，行之间按 $id_0$ 从小到大输出。\n\n接下来 $p_3$ 行，每行形如 $k\\ id_1\\ id_2\\ \\dots id_k$，表示该时刻结束时，有 $k$ 架无人机位置相同 ，它们的编号是 $id_1,...,id_n$。\n\n为保证输出唯一，这 $p_3$ 行中的每一行内，$id_1,\\dots,id_k$ 应当从小到大输出，行之间按 $id_1$ 从小到大输出，并且每个编号出现至多一次。", "hint": "#### 样例解释 1\n\n在第 $1$ 时刻，两架飞机于 $(4,0,0)$ 处相撞。\n\n#### 样例解释 2\n\n在第 $4$ 时刻，两枚导弹分别摧毁了敌机。\n\n#### 数据范围\n\n$T,n\\le 100,3\\le v_m\\le 20$；\n\n$v_m>10$ 的无人机和导弹总数不超过 $10$；\n\n$\\theta_u,\\theta_d,\\gamma,\\theta_r,\\beta_s\\in(\\dfrac\\pi4,\\dfrac\\pi2)$；\n\n$1\\le d_s,d_p\\le 20,1\\le t_z\\le 100$；\n\n$|x|,|y|,|z|\\le 100$；\n\n$1\\le L_x,H_y\\le 100$。\n\n所有输入的实数精确到小数点后不超过 $6$ 位。\n\n最初时，$\\vec p$ 两两不同。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9142", "type": "P", "difficulty": 5, "samples": [["1\n", "665496236 332748118\n332748118 665496236\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["递推", "博弈论", "2023", "O2优化", "THUPC"], "title": "[THUPC 2023 初赛] 欺诈游戏", "background": "在《LIAR GAME》中，小 E 看到了一个有趣的游戏。", "description": "这个游戏名叫《走私游戏》。游戏规则大概是这样的：一名玩家扮演走私者，一名玩家扮演检察官。走私者可以将 $x$ 日元（$x$ 为 $[0,n]$ 内的整数，由走私者决定）秘密放入箱子中，而检查官需要猜测箱子中的金额。假设检察官猜了 $y$（$y$ 也必须是整数）。如果 $x=y$，则走私失败，走私者一分钱也拿不到。如果 $x>y$，则走私成功，走私者可以从检查官那里拿走 $x$ 日元。如果 $x<y$，则走私失败，但是由于冤枉检察官需要赔付给走私者 $y/2$ 日元。游戏分有限回合进行。双方轮流做走私者和检察官。\n\n可以证明，最优情况下每个回合走私者会采用同一种策略，检察官也会采用同一种策略。小 E 想知道在一个回合中，双方的最优策略分别是什么。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "输出两行，每行 $n+1$ 个数，其中第 $i$ 个表示放/猜 $i-1$ 日元的概率。\n\n第一行输出走私者的策略，第二行输出检察官的策略。\n\n你需要保证，在一方的策略不变的情况下，另一方无论如何改变自己的策略，都不能使自己的期望收益比原来多。\n\n可以证明，这样的策略是唯一的。\n\n答案对 $998244353$ 取模。", "hint": "#### 样例解释 1\n\n这 $4$ 个数分别为 $2/3,1/3,1/3,2/3$。\n\n#### 子任务\n\n保证 $1\\le n \\le 400000$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 欺诈游戏", "background": "在《LIAR GAME》中，小 E 看到了一个有趣的游戏。", "description": "这个游戏名叫《走私游戏》。游戏规则大概是这样的：一名玩家扮演走私者，一名玩家扮演检察官。走私者可以将 $x$ 日元（$x$ 为 $[0,n]$ 内的整数，由走私者决定）秘密放入箱子中，而检查官需要猜测箱子中的金额。假设检察官猜了 $y$（$y$ 也必须是整数）。如果 $x=y$，则走私失败，走私者一分钱也拿不到。如果 $x>y$，则走私成功，走私者可以从检查官那里拿走 $x$ 日元。如果 $x<y$，则走私失败，但是由于冤枉检察官需要赔付给走私者 $y/2$ 日元。游戏分有限回合进行。双方轮流做走私者和检察官。\n\n可以证明，最优情况下每个回合走私者会采用同一种策略，检察官也会采用同一种策略。小 E 想知道在一个回合中，双方的最优策略分别是什么。", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "输出两行，每行 $n+1$ 个数，其中第 $i$ 个表示放/猜 $i-1$ 日元的概率。\n\n第一行输出走私者的策略，第二行输出检察官的策略。\n\n你需要保证，在一方的策略不变的情况下，另一方无论如何改变自己的策略，都不能使自己的期望收益比原来多。\n\n可以证明，这样的策略是唯一的。\n\n答案对 $998244353$ 取模。", "hint": "#### 样例解释 1\n\n这 $4$ 个数分别为 $2/3,1/3,1/3,2/3$。\n\n#### 子任务\n\n保证 $1\\le n \\le 400000$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9143", "type": "P", "difficulty": 3, "samples": [["3\n1 3 2", "17"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2023", "O2优化", "THUPC"], "title": "[THUPC 2023 初赛] 众数", "background": "", "description": "你有若干个 $[1,n]$ 内的正整数：对于 $1 \\le i \\le n$，你有 $a_i$ 个整数 $i$。设 $S = \\sum_{i=1}^n a_i$。\n\n对于一个序列 $p_1,p_2,\\cdots,p_l$，定义其众数 $\\text{maj}(p_1,p_2,\\cdots,p_l)$ 为出现次数最多的数。若有多个数出现次数最多，则其中最大的数为其众数。\n\n现在你需要把这 $S$ 个数排成一个序列 $b_1,b_2,\\cdots,b_S$，使得 $\\sum_{i=1}^S \\text{maj}(b_1,b_2,\\cdots,b_i)$ 最大。输出该最大值。", "inputFormat": "第一行一个整数 $n$，表示值域。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$，表示每种数的个数。", "outputFormat": "输出一行一个正整数表示 $\\sum_{i=1}^S \\text{maj}(b_1,b_2,\\cdots,b_i)$ 的最大值。", "hint": "#### 样例解释 1\n\n一个达到最大值的序列为 $(3,2,3,1,2,2)$。\n\n#### 数据范围\n\n对于所有测试数据，$1 \\le n \\leq 10^5$，$1 \\le a_1,a_2,\\cdots,a_n \\le 10^5$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 众数", "background": "", "description": "你有若干个 $[1,n]$ 内的正整数：对于 $1 \\le i \\le n$，你有 $a_i$ 个整数 $i$。设 $S = \\sum_{i=1}^n a_i$。\n\n对于一个序列 $p_1,p_2,\\cdots,p_l$，定义其众数 $\\text{maj}(p_1,p_2,\\cdots,p_l)$ 为出现次数最多的数。若有多个数出现次数最多，则其中最大的数为其众数。\n\n现在你需要把这 $S$ 个数排成一个序列 $b_1,b_2,\\cdots,b_S$，使得 $\\sum_{i=1}^S \\text{maj}(b_1,b_2,\\cdots,b_i)$ 最大。输出该最大值。", "inputFormat": "第一行一个整数 $n$，表示值域。\n\n接下来一行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$，表示每种数的个数。", "outputFormat": "输出一行一个正整数表示 $\\sum_{i=1}^S \\text{maj}(b_1,b_2,\\cdots,b_i)$ 的最大值。", "hint": "#### 样例解释 1\n\n一个达到最大值的序列为 $(3,2,3,1,2,2)$。\n\n#### 数据范围\n\n对于所有测试数据，$1 \\le n \\leq 10^5$，$1 \\le a_1,a_2,\\cdots,a_n \\le 10^5$。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9144", "type": "P", "difficulty": 6, "samples": [["2 8 50\n3 4 0 1 1 0 1 1\n4 5 1 2 1 1 1 2\n", "0.125000000000000000 0.140625000000000000 0.515625000000000000 0.564453125000000000 0.135009765625000000 0.328369140625000000 0.548858642578125000 0.625278472900390625\n"], ["见附件中的 2.in", "见附件中的 2.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "二分", "2023", "Special Judge", "O2优化", "THUPC"], "title": "[THUPC 2023 初赛] 最后的活动", "background": "各位亲爱的《La Lumière: Scarlet Intense Flame》玩家：\n\n感谢您一直给予《La Lumière: Scarlet Intense Flame》的支持与厚爱。我们非常遗憾地宣布，《La Lumière: Scarlet Intense Flame》将于 2023 年 3 月 5 日 16:00 停止运营服务。\n\n停止运营相关时间表如下：\n\n……", "description": "元老级二次元手游《La Lumière: Scarlet Intense Flame》将于今年 3 月停止运营服务。作为这款游戏的忠实玩家，小 S 希望能在游戏的最后一次活动中刷到一个特殊的分数，以此为近十年来与这款游戏共度的难忘时光画上一个圆满的句号。\n\n《La Lumière: Scarlet Intense Flame》中的每种活动都有其独特的规则，而最后一次活动是 Chase Festival。在 Chase Festival 中，玩家需要多次攻略每次随机生成的多层迷宫，每次退出迷宫时根据在迷宫中各层击杀怪物的评价独立结算本次随机迷宫的分数。每次挑战迷宫时的流程简化如下：\n\n1. 选择挑战的随机迷宫的难度。小 S 是这款游戏的资深玩家，因此在本题中假定小 S 总是挑战最高难度的迷宫。最高难度的迷宫最深为 $N$ 层。确定难度后，从随机生成的迷宫的第 1 层开始挑战。\n\n2. 进行第 $i$ 层的挑战。挑战第 $i$ 层时，小 S 有可能挑战失败，挑战成功并获得普通评价，或者挑战成功并获得高评价。如果小 S 选择保守的挑战策略，则有 $p_{i,0}$ 的概率挑战失败，有 $p_{i,1}$ 的概率挑战成功并获得普通评价，有 $p_{i,2}$ 的概率挑战成功并获得高评价；如果小 S 选择激进的挑战策略，则有 $q_{i,0}$ 的概率挑战失败，有 $q_{i,1}$  的概率挑战成功并获得普通评价，有 $q_{i, 2}$ 的概率挑战成功并获得高评价。\n   \n   - 获得普通评价时，在当前层获得 $s_{i,1}$ 的分数；获得高评价时，在当前层获得 $s_{i,2}$ 的分数。这部分获得的分数**不会直接加算**到玩家的总分数中，而是**在退出迷宫时结算**。如果挑战成功，且当前不是最后一层（$i<N$），则跳转到第 3 步，选择是否继续挑战；否则（$i=N$），退出迷宫并跳转到第 4 步进行结算。\n   \n   - 如果挑战失败，则强制退出迷宫，跳转到第 4 步。\n\n3. 如果当前不是最后一层，玩家可以选择是否继续挑战下一层。如果选择继续，则返回第 2 步；否则退出当前迷宫，跳转到第 4 步进行结算。\n\n4. 本次迷宫的分数结算：如果因为失败而强制退出，则当前层不获得任何奖励，且**本次迷宫中之前各层**累积的分数需要乘上惩罚系数 $c$（为了使最终分数为整数，游戏会对惩罚后的分数先求和再下取整）；除了强制退出之外，玩家主动退出或者通关迷宫后退出都可以获得全部尚未结算的分数。\n\n小 S 想得到的目标分数是一个比较大的分数，因此小 S 需要先大量刷最高难度的迷宫，再在接近目标分数时根据当前剩余的分数选择相对稳定的策略，以确保活动结束时能恰好获得目标分数。小 S 不会编程，因此小 S 找到了你，希望你能帮忙计算当剩余分数在 $1$ 至 $M$ 分之间，仅按照上述的流程挑战迷宫，并采用最佳策略时，最终能够恰好达到目标分数的最大概率。", "inputFormat": "输入的第一行包含三个整数 $N, M, c'$，其中 $N$ 和 $M$ 的含义与题面相同，$c'=100c$。保证 $1\\le N\\le 6$，$1\\le M\\le 10000$，$0\\le c'\\le 100$。\n\n接下来 $N$ 行，每行输入八个整数 $s_{i,1},s_{i,2},u_{i,0},u_{i,1},u_{i,2}, v_{i,0}, v_{i,1}, v_{i,2}$，其中 $s_{i,1}$ 与 $s_{i,2}$ 分别表示挑战时普通评价和高评价对应的分数；$u_{i,j}$ 和 $v_{i,j}$ 分别表示使用保守的挑战策略及激进的挑战策略时，对应结果的概率权重：$p_{i,j}=\\dfrac{u_{i,j}}{u_{i,0}+u_{i,1}+u_{i,2}}$，$q_{i,j}=\\dfrac{v_{i,j}}{v_{i,0}+v_{i,1}+v_{i,2}}$。保证 $1\\le s_{i, 1} \\le s_{i, 2}\\le 10000$，$0\\le u_{i,j}, v_{i,j}\\le 10000$ 且 $u_{i,1}+u_{i,2}\\ge 1$，$v_{i,1}+v_{i,2}\\ge 1$。", "outputFormat": "输出一行 $M$ 个实数，其中第 $i$ （$1\\le i\\le M$）个实数表示当距离目标分数恰好还剩 $i$ 分时，在最优策略下能够恰好获得 $i$ 分的最大概率。 当你输出中的每个实数与相应标准输出的绝对误差不超过 $10^{-6}$ 时，我们认为你的输出是正确的。", "hint": "#### 子任务\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 6$，$1\\le M\\le 10000$，$0\\le c'\\le 100$，$1\\le s_{i,1}\\le s_{i, 2}\\le 10000$，$0\\le u_{i, 0}, u_{i, 1}, u_{i, 2}, v_{i, 0}, v_{i, 1}, v_{i, 2}\\le 10000$，$u_{i,1}+u_{i,2}\\ge 1$，$v_{i,1}+v_{i,2}\\ge 1$。\n\n#### 提示\n\n《La Lumière: Scarlet Intense Flame 2》将于 2023 年春暖花开的时节与大家相见！\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 最后的活动", "background": "各位亲爱的《La Lumière: Scarlet Intense Flame》玩家：\n\n感谢您一直给予《La Lumière: Scarlet Intense Flame》的支持与厚爱。我们非常遗憾地宣布，《La Lumière: Scarlet Intense Flame》将于 2023 年 3 月 5 日 16:00 停止运营服务。\n\n停止运营相关时间表如下：\n\n……", "description": "元老级二次元手游《La Lumière: Scarlet Intense Flame》将于今年 3 月停止运营服务。作为这款游戏的忠实玩家，小 S 希望能在游戏的最后一次活动中刷到一个特殊的分数，以此为近十年来与这款游戏共度的难忘时光画上一个圆满的句号。\n\n《La Lumière: Scarlet Intense Flame》中的每种活动都有其独特的规则，而最后一次活动是 Chase Festival。在 Chase Festival 中，玩家需要多次攻略每次随机生成的多层迷宫，每次退出迷宫时根据在迷宫中各层击杀怪物的评价独立结算本次随机迷宫的分数。每次挑战迷宫时的流程简化如下：\n\n1. 选择挑战的随机迷宫的难度。小 S 是这款游戏的资深玩家，因此在本题中假定小 S 总是挑战最高难度的迷宫。最高难度的迷宫最深为 $N$ 层。确定难度后，从随机生成的迷宫的第 1 层开始挑战。\n\n2. 进行第 $i$ 层的挑战。挑战第 $i$ 层时，小 S 有可能挑战失败，挑战成功并获得普通评价，或者挑战成功并获得高评价。如果小 S 选择保守的挑战策略，则有 $p_{i,0}$ 的概率挑战失败，有 $p_{i,1}$ 的概率挑战成功并获得普通评价，有 $p_{i,2}$ 的概率挑战成功并获得高评价；如果小 S 选择激进的挑战策略，则有 $q_{i,0}$ 的概率挑战失败，有 $q_{i,1}$  的概率挑战成功并获得普通评价，有 $q_{i, 2}$ 的概率挑战成功并获得高评价。\n   \n   - 获得普通评价时，在当前层获得 $s_{i,1}$ 的分数；获得高评价时，在当前层获得 $s_{i,2}$ 的分数。这部分获得的分数**不会直接加算**到玩家的总分数中，而是**在退出迷宫时结算**。如果挑战成功，且当前不是最后一层（$i<N$），则跳转到第 3 步，选择是否继续挑战；否则（$i=N$），退出迷宫并跳转到第 4 步进行结算。\n   \n   - 如果挑战失败，则强制退出迷宫，跳转到第 4 步。\n\n3. 如果当前不是最后一层，玩家可以选择是否继续挑战下一层。如果选择继续，则返回第 2 步；否则退出当前迷宫，跳转到第 4 步进行结算。\n\n4. 本次迷宫的分数结算：如果因为失败而强制退出，则当前层不获得任何奖励，且**本次迷宫中之前各层**累积的分数需要乘上惩罚系数 $c$（为了使最终分数为整数，游戏会对惩罚后的分数先求和再下取整）；除了强制退出之外，玩家主动退出或者通关迷宫后退出都可以获得全部尚未结算的分数。\n\n小 S 想得到的目标分数是一个比较大的分数，因此小 S 需要先大量刷最高难度的迷宫，再在接近目标分数时根据当前剩余的分数选择相对稳定的策略，以确保活动结束时能恰好获得目标分数。小 S 不会编程，因此小 S 找到了你，希望你能帮忙计算当剩余分数在 $1$ 至 $M$ 分之间，仅按照上述的流程挑战迷宫，并采用最佳策略时，最终能够恰好达到目标分数的最大概率。", "inputFormat": "输入的第一行包含三个整数 $N, M, c'$，其中 $N$ 和 $M$ 的含义与题面相同，$c'=100c$。保证 $1\\le N\\le 6$，$1\\le M\\le 10000$，$0\\le c'\\le 100$。\n\n接下来 $N$ 行，每行输入八个整数 $s_{i,1},s_{i,2},u_{i,0},u_{i,1},u_{i,2}, v_{i,0}, v_{i,1}, v_{i,2}$，其中 $s_{i,1}$ 与 $s_{i,2}$ 分别表示挑战时普通评价和高评价对应的分数；$u_{i,j}$ 和 $v_{i,j}$ 分别表示使用保守的挑战策略及激进的挑战策略时，对应结果的概率权重：$p_{i,j}=\\dfrac{u_{i,j}}{u_{i,0}+u_{i,1}+u_{i,2}}$，$q_{i,j}=\\dfrac{v_{i,j}}{v_{i,0}+v_{i,1}+v_{i,2}}$。保证 $1\\le s_{i, 1} \\le s_{i, 2}\\le 10000$，$0\\le u_{i,j}, v_{i,j}\\le 10000$ 且 $u_{i,1}+u_{i,2}\\ge 1$，$v_{i,1}+v_{i,2}\\ge 1$。", "outputFormat": "输出一行 $M$ 个实数，其中第 $i$ （$1\\le i\\le M$）个实数表示当距离目标分数恰好还剩 $i$ 分时，在最优策略下能够恰好获得 $i$ 分的最大概率。 当你输出中的每个实数与相应标准输出的绝对误差不超过 $10^{-6}$ 时，我们认为你的输出是正确的。", "hint": "#### 子任务\n\n对于 $100\\%$ 的数据，保证 $1\\le N\\le 6$，$1\\le M\\le 10000$，$0\\le c'\\le 100$，$1\\le s_{i,1}\\le s_{i, 2}\\le 10000$，$0\\le u_{i, 0}, u_{i, 1}, u_{i, 2}, v_{i, 0}, v_{i, 1}, v_{i, 2}\\le 10000$，$u_{i,1}+u_{i,2}\\ge 1$，$v_{i,1}+v_{i,2}\\ge 1$。\n\n#### 提示\n\n《La Lumière: Scarlet Intense Flame 2》将于 2023 年春暖花开的时节与大家相见！\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9145", "type": "P", "difficulty": 0, "samples": [], "limits": {"time": [1000], "memory": [524288]}, "tags": ["2023", "O2优化", "THUPC"], "title": "[THUPC 2023 初赛] 世界杯", "background": "", "description": "2022 年卡塔尔世界杯已于 12 月 18 日落下帷幕，作为一项始于 1930 年的悠久赛事，迄今已走过 22 届，四年一度的足球盛宴，是陪伴全世界无数足球运动员和爱好者成长的荣耀时光和青春记忆。\n\n作为一个新球迷，小 M 在这届世界杯前对足球几乎一无所知，但受到身边小伙伴的带动，他也决定加入到球迷的大家庭中。赛前，小 M 对世界杯进行了一定的了解，得知世界杯正赛共分为小组赛和淘汰赛，其中淘汰赛尤为刺激，16 强、8 强、半决赛、决赛，只要输一场便立刻淘汰出局，唯有全胜者方能捧得桂冠。因此，小 M 心想，夺得世界杯冠军当然是无可争议的世界巅峰，而能否从小组赛出线杀入淘汰赛、以及在淘汰赛阶段走得多远，也同样是衡量一支队伍强弱的重要指标。\n\n世界杯正赛共有 32 支球队参加，而遗憾落选的队伍则更多。全世界这么多支球队，对于萌新小 M 来说，逐一去了解难免是一个浩大的工作。因此，小 M 决定先从联合国五常来入手，对应的 5 支球队分别为：中国队（`China`）、英格兰队（`England`）、法国队（`France`）、俄罗斯队（`Russia`）和美国队（`United States`）。值得一提的是，苏格兰队和威尔士队也曾打进过世界杯正赛，但以小 M 的知识水平来说，显然忽略了它们。\n\n随后，小 M 仔细调查了这 5 支球队的历届世界杯战绩：英格兰队、法国队和美国队在近 30 年来均有至少 4 次杀入世界杯淘汰赛的经历，其中法国队收获了 1998、2018 世界杯的冠军，虽也有过小组赛 2 败出局的经历，但已足够向世界展示其强大；英格兰队唯一的世界杯冠军在 1966 年，近年来最好战绩为四强，而美国队近年来最好战绩为八强，这两支队伍的实力也都不容小觑；俄罗斯队近 30 年来的前 3 次世界杯之旅都不顺利，在小组赛阶段便早早接连失利并被淘汰，但 2018 年以东道主的身份打入淘汰赛并杀入八强；而中国队则实力稍逊，唯一一次打入世界杯正赛是在 2002 年，但小组赛三战全败，只得遗憾出局。\n\n正像无数球迷心中都有一支“主队”，小 M 也希望从这 5 支球队中选出一支“最强球队”，作为他今后支持的对象。在他进一步了解后，也知道了评价一支球队有各项指标，这几支球队也似乎各有所长。到底该怎样衡量“最强”呢？小 M 思来想去，决定以“世界杯正赛中输球总场数最少”作为衡量依据。又经过了细致的查找资料和分析，他心中的“最强球队”已经呼之欲出。\n\n此时，他想考考屏幕前的你：能猜出他心中的“最强球队”是哪一支吗？", "inputFormat": "无输入。", "outputFormat": "输出一个字符串，一定是 `China`，`England`，`France`，`Russia`，`United States` 中的一个，表示小 M 心中的“最强球队”。", "hint": "#### 提示\n\n题面所述信息已经足以推断出问题的答案，无需任何额外的足球知识。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2023 初赛] 世界杯", "background": "", "description": "2022 年卡塔尔世界杯已于 12 月 18 日落下帷幕，作为一项始于 1930 年的悠久赛事，迄今已走过 22 届，四年一度的足球盛宴，是陪伴全世界无数足球运动员和爱好者成长的荣耀时光和青春记忆。\n\n作为一个新球迷，小 M 在这届世界杯前对足球几乎一无所知，但受到身边小伙伴的带动，他也决定加入到球迷的大家庭中。赛前，小 M 对世界杯进行了一定的了解，得知世界杯正赛共分为小组赛和淘汰赛，其中淘汰赛尤为刺激，16 强、8 强、半决赛、决赛，只要输一场便立刻淘汰出局，唯有全胜者方能捧得桂冠。因此，小 M 心想，夺得世界杯冠军当然是无可争议的世界巅峰，而能否从小组赛出线杀入淘汰赛、以及在淘汰赛阶段走得多远，也同样是衡量一支队伍强弱的重要指标。\n\n世界杯正赛共有 32 支球队参加，而遗憾落选的队伍则更多。全世界这么多支球队，对于萌新小 M 来说，逐一去了解难免是一个浩大的工作。因此，小 M 决定先从联合国五常来入手，对应的 5 支球队分别为：中国队（`China`）、英格兰队（`England`）、法国队（`France`）、俄罗斯队（`Russia`）和美国队（`United States`）。值得一提的是，苏格兰队和威尔士队也曾打进过世界杯正赛，但以小 M 的知识水平来说，显然忽略了它们。\n\n随后，小 M 仔细调查了这 5 支球队的历届世界杯战绩：英格兰队、法国队和美国队在近 30 年来均有至少 4 次杀入世界杯淘汰赛的经历，其中法国队收获了 1998、2018 世界杯的冠军，虽也有过小组赛 2 败出局的经历，但已足够向世界展示其强大；英格兰队唯一的世界杯冠军在 1966 年，近年来最好战绩为四强，而美国队近年来最好战绩为八强，这两支队伍的实力也都不容小觑；俄罗斯队近 30 年来的前 3 次世界杯之旅都不顺利，在小组赛阶段便早早接连失利并被淘汰，但 2018 年以东道主的身份打入淘汰赛并杀入八强；而中国队则实力稍逊，唯一一次打入世界杯正赛是在 2002 年，但小组赛三战全败，只得遗憾出局。\n\n正像无数球迷心中都有一支“主队”，小 M 也希望从这 5 支球队中选出一支“最强球队”，作为他今后支持的对象。在他进一步了解后，也知道了评价一支球队有各项指标，这几支球队也似乎各有所长。到底该怎样衡量“最强”呢？小 M 思来想去，决定以“世界杯正赛中输球总场数最少”作为衡量依据。又经过了细致的查找资料和分析，他心中的“最强球队”已经呼之欲出。\n\n此时，他想考考屏幕前的你：能猜出他心中的“最强球队”是哪一支吗？", "inputFormat": "无输入。", "outputFormat": "输出一个字符串，一定是 `China`，`England`，`France`，`Russia`，`United States` 中的一个，表示小 M 心中的“最强球队”。", "hint": "#### 提示\n\n题面所述信息已经足以推断出问题的答案，无需任何额外的足球知识。\n\n#### 题目来源\n\n来自 2023 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2023）初赛。\n\n题解等资源可在 <https://github.com/THUSAAC/THUPC2023-Pre> 查看。", "locale": "zh-CN"}}}
{"pid": "P9147", "type": "P", "difficulty": 3, "samples": [["5\n1 4 2 2 3\n", "3\n"], ["5\n1 2 3 2 1\n", "4\n"], ["5\n1 2 3 1 5\n", "5\n"], ["6\n8 2 3 1 4 5\n", "4\n"], ["6\n7 2 9 4 5 6\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "签到题", "background": "著名的【数据删除】是一个热爱旅游的人！这一天他来到了神秘的 ZYL 国度。\n\n入海关的时候他被问到了一个题目，如果答对他就可以顺利到达 ZYL 的首都 ZY 了！身为堂堂【数据删除】，他居然还花了 $10^{-233}$ 秒才想出来做法，实在是有点难的！于是他决定拿来考考你。", "description": "给定长度为 $n$ 的序列 $a$，保证 $a_i$ 是**正整数**。你需要选择一个位置 $i$ 并将 $a_i$ 修改为一个**任意的整数**。最大化最长**严格**上升子串的长度。\n\n所谓严格上升子串，就是从序列中选出位置**连续**的若干个数字，满足后一个数字比前一个大（而不能相等或小于）。\n\n如序列 $[1,4,2,3,5]$ 中，子序列 $[2,3,5]$ 就是严格上升子串，而 $[4,2,3]$（不上升）和 $[1,2,3]$（不连续）则不是。", "inputFormat": "第一行，一个正整数 $n$，表示序列的长度。\n\n第二行，$n$ 个正整数 $a_1, a_2, \\ldots, a_n$，表示序列 $a$。", "outputFormat": "输出一行一个整数，表示修改后，你最大化的最长严格上升子串的长度。", "hint": "**【样例解释 \\#1】**\n\n对于样例 \\#1，我们可以将序列 $[1,4,2,2,3]$ 中的第三个位置修改为 $5$，得到新序列 $[1,4,5,2,3]$。这个序列的最长严格上升子串是 $[1,4,5]$，长度为 $3$。\n\n容易证明，不存在一种修改方案使得修改后的序列的最长严格上升子串的长度大于 $3$。\n\n---\n\n**【样例解释 \\#4】**\n\n对于样例 \\#4，我们可以将序列 $[8,2,3,1,4,5]$ 中的第三个位置修改为 $0$，得到新序列 $[8,2,0,1,4,5]$。这个序列的最长严格上升子串是 $[0,1,4,5]$，长度为 $4$。\n\n容易证明，不存在一种修改方案使得修改后的序列的最长严格上升子串的长度大于 $4$。\n\n---\n\n**【数据范围】**\n\n对于前 $20\\%$ 的数据，满足 $n \\le 5$，$a_i \\le 5$。  \n对于前 $40\\%$ 的数据，满足 $n \\le 10$，$a_i \\le 10$。  \n对于前 $70\\%$ 的数据，满足 $n \\le 300$。  \n对于 $100 \\%$ 的数据，满足 $1 \\le n \\le {10}^6$，$1 \\le a_i \\le {10}^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "签到题", "background": "著名的【数据删除】是一个热爱旅游的人！这一天他来到了神秘的 ZYL 国度。\n\n入海关的时候他被问到了一个题目，如果答对他就可以顺利到达 ZYL 的首都 ZY 了！身为堂堂【数据删除】，他居然还花了 $10^{-233}$ 秒才想出来做法，实在是有点难的！于是他决定拿来考考你。", "description": "给定长度为 $n$ 的序列 $a$，保证 $a_i$ 是**正整数**。你需要选择一个位置 $i$ 并将 $a_i$ 修改为一个**任意的整数**。最大化最长**严格**上升子串的长度。\n\n所谓严格上升子串，就是从序列中选出位置**连续**的若干个数字，满足后一个数字比前一个大（而不能相等或小于）。\n\n如序列 $[1,4,2,3,5]$ 中，子序列 $[2,3,5]$ 就是严格上升子串，而 $[4,2,3]$（不上升）和 $[1,2,3]$（不连续）则不是。", "inputFormat": "第一行，一个正整数 $n$，表示序列的长度。\n\n第二行，$n$ 个正整数 $a_1, a_2, \\ldots, a_n$，表示序列 $a$。", "outputFormat": "输出一行一个整数，表示修改后，你最大化的最长严格上升子串的长度。", "hint": "**【样例解释 \\#1】**\n\n对于样例 \\#1，我们可以将序列 $[1,4,2,2,3]$ 中的第三个位置修改为 $5$，得到新序列 $[1,4,5,2,3]$。这个序列的最长严格上升子串是 $[1,4,5]$，长度为 $3$。\n\n容易证明，不存在一种修改方案使得修改后的序列的最长严格上升子串的长度大于 $3$。\n\n---\n\n**【样例解释 \\#4】**\n\n对于样例 \\#4，我们可以将序列 $[8,2,3,1,4,5]$ 中的第三个位置修改为 $0$，得到新序列 $[8,2,0,1,4,5]$。这个序列的最长严格上升子串是 $[0,1,4,5]$，长度为 $4$。\n\n容易证明，不存在一种修改方案使得修改后的序列的最长严格上升子串的长度大于 $4$。\n\n---\n\n**【数据范围】**\n\n对于前 $20\\%$ 的数据，满足 $n \\le 5$，$a_i \\le 5$。  \n对于前 $40\\%$ 的数据，满足 $n \\le 10$，$a_i \\le 10$。  \n对于前 $70\\%$ 的数据，满足 $n \\le 300$。  \n对于 $100 \\%$ 的数据，满足 $1 \\le n \\le {10}^6$，$1 \\le a_i \\le {10}^9$。", "locale": "zh-CN"}}}
{"pid": "P9148", "type": "P", "difficulty": 4, "samples": [["4\n1 2 3 4\n", "36\n"], ["6\n8 6 4 2 10 15\n", "268\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "洛谷原创", "O2优化", "组合数学", "前缀和", "洛谷月赛"], "title": "除法题", "background": "", "description": "给定大小为 $n$ 的集合 $a$，保证其中元素互不相同且均为正整数。\n\n如果我们从中**按顺序**取出三个元素 $a, b, c$，则共有 $n \\cdot (n-1) \\cdot (n-2)$ 种不同的选择方案。\n\n现在对于一种选择方案 $(a,b,c)$，定义其权值为 $\\Bigl\\lfloor\\dfrac{a}{b}\\Bigr\\rfloor\\Bigl\\lfloor\\dfrac{a}{c}\\Bigr\\rfloor\\Bigl\\lfloor\\dfrac{b}{c}\\Bigr\\rfloor$。\n\n你需要对所有的选择方案计算权值的总和，你只需输出这个总和对 $2^{32}$ 取模的结果。\n\n注：$\\lfloor a\\rfloor$ 表示不大于 $a$ 的最大整数。如 $\\lfloor 2.4\\rfloor=2$、$\\lfloor 5\\rfloor=5$。", "inputFormat": "第一行，一个正整数 $n$，表示序列的长度。\n\n第二行，$n$ 个正整数 $a_1, a_2, \\ldots, a_n$，每个数描述了集合 $a$ 的一个元素，这些数互不相同。", "outputFormat": "输出一行一个整数，表示答案对 $2^{32}$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n对于样例 \\#1，权值不为 $0$ 的选择方案只有以下几种：\n\n- $(3,2,1)$，权值为 $6$。\n- $(4,2,1)$，权值为 $16$。\n- $(4,3,1)$，权值为 $12$。\n- $(4,3,2)$，权值为 $2$。\n\n因此，样例 \\#1 的答案为 $6+16+12+2=36$。\n\n---\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\le n, a_i \\le 5000$。\n\n**本题采用捆绑测试。**\n\n|子任务|$n$|特殊性质|分值|\n|-|-|-|-|\n|1|$=3$||$10$|\n|2|$\\le 300$||$20$|\n|3|$\\le 2000$||$20$|\n|4||A|$20$|\n|5|||$30$|\n\n特殊性质 A：保证 $a_i=i$。\n\n---\n\n**【提示】**\n\n本题中大部分算法都拥有较小的常数，请相信你的复杂度。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "除法题", "background": "", "description": "给定大小为 $n$ 的集合 $a$，保证其中元素互不相同且均为正整数。\n\n如果我们从中**按顺序**取出三个元素 $a, b, c$，则共有 $n \\cdot (n-1) \\cdot (n-2)$ 种不同的选择方案。\n\n现在对于一种选择方案 $(a,b,c)$，定义其权值为 $\\Bigl\\lfloor\\dfrac{a}{b}\\Bigr\\rfloor\\Bigl\\lfloor\\dfrac{a}{c}\\Bigr\\rfloor\\Bigl\\lfloor\\dfrac{b}{c}\\Bigr\\rfloor$。\n\n你需要对所有的选择方案计算权值的总和，你只需输出这个总和对 $2^{32}$ 取模的结果。\n\n注：$\\lfloor a\\rfloor$ 表示不大于 $a$ 的最大整数。如 $\\lfloor 2.4\\rfloor=2$、$\\lfloor 5\\rfloor=5$。", "inputFormat": "第一行，一个正整数 $n$，表示序列的长度。\n\n第二行，$n$ 个正整数 $a_1, a_2, \\ldots, a_n$，每个数描述了集合 $a$ 的一个元素，这些数互不相同。", "outputFormat": "输出一行一个整数，表示答案对 $2^{32}$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n对于样例 \\#1，权值不为 $0$ 的选择方案只有以下几种：\n\n- $(3,2,1)$，权值为 $6$。\n- $(4,2,1)$，权值为 $16$。\n- $(4,3,1)$，权值为 $12$。\n- $(4,3,2)$，权值为 $2$。\n\n因此，样例 \\#1 的答案为 $6+16+12+2=36$。\n\n---\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\le n, a_i \\le 5000$。\n\n**本题采用捆绑测试。**\n\n|子任务|$n$|特殊性质|分值|\n|-|-|-|-|\n|1|$=3$||$10$|\n|2|$\\le 300$||$20$|\n|3|$\\le 2000$||$20$|\n|4||A|$20$|\n|5|||$30$|\n\n特殊性质 A：保证 $a_i=i$。\n\n---\n\n**【提示】**\n\n本题中大部分算法都拥有较小的常数，请相信你的复杂度。", "locale": "zh-CN"}}}
{"pid": "P9149", "type": "P", "difficulty": 5, "samples": [["2\n4 2 3 1\n1 1 2 1\n1 1\n8 3 4 1\n1 2 3 1 2 3 1 2\n1 2 1\n", "3\n2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "数学", "洛谷原创", "O2优化", "组合数学", "KMP 算法", "洛谷月赛"], "title": "串串题", "background": "", "description": "给定长度分别为 $n,m$ 的整数序列 $A,B$ 和常数 $W,d$，序列从 $1$ 开始标号，保证 $A_i,B_i \\in [1,W]$。\n\n容易发现，我们有 $\\binom{W}{d}$ 种方案选择 $[1,W]$ 中的 $d$ 个互不相同的整数。\n\n对于每一种选择的方案，我们删去 $A$ 中出现的对应的 $d$ 种整数，令此时序列 $B$ 在序列 $A$ 中的出现次数为这次选择方案的权值。\n\n你需要求所有的选择方案的权值和，对 ${10}^9+7$ 取模。\n\n若对题意有疑问，请阅读样例及样例解释。\n\n注：$\\binom{a}{b}$ 表示组合数，含义为在 $a$ 个物品中**无序**地选择出 $b$ 个物品的方案数。\n\n**请注意：我们并不会删除序列 $\\bm{B}$ 中出现的对应整数。**", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n第一行，四个正整数 $n, m, W, d$，保证 $d \\le W$。\n\n第二行，$n$ 个正整数 $A_1, A_2, \\ldots, A_n$，表示序列 $A$。\n\n第三行，$m$ 个正整数 $B_1, B_2, \\ldots, B_m$，表示序列 $B$。", "outputFormat": "对于每组数据，输出一个整数表示答案对 ${10}^9+7$ 取模的结果。", "hint": "**【样例解释】**\n\n在样例的第一组数据中：\n\n1. 如果我们选择删去 $A$ 中的字符 $1$，$A$ 将变为 $\\{2\\}$，此时 $B$ 在 $A$ 中的出现次数为 $0$。\n1. 如果我们选择删去 $A$ 中的字符 $2$，$A$ 将变为 $\\{1,1,1\\}$，此时 $B$ 在 $A$ 中的出现次数为 $2$。\n1. 如果我们选择删去 $A$ 中的字符 $3$，$A$ 将变为 $\\{1,1,2,1\\}$，此时 $B$ 在 $A$ 中的出现次数为 $1$。\n\n因此，第一组数据的答案为 $0+2+1=3$。\n\n**再次提醒：我们并不会删除序列 $\\bm{B}$ 中出现的对应整数。**\n\n---\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\le n,m,W \\le {10}^6$，$1 \\le d, A_i, B_j \\le W$，$1 \\le T \\le 5$。\n\n**本题采用捆绑测试且开启子任务依赖！**\n\n| 子任务 | $n \\le$ | $m \\le$ | $W \\le$ | 特殊性质 | 分数 | 依赖 |\n| - | - | - | - | - | - | - |\n| 1 | $10$ | $10$ | $5$ | | $10$ | \\ |\n| 2 | $1000$ | $1000$ | $5$ | | $20$ | 子任务 1 |\n| 3 |  | | | A | $15$ | \\ |\n| 4 |  | | | B | $25$ | \\ |\n| 5 | | | | | $30$ | 子任务 1、2、3、4 |\n\n特殊性质 A：保证 $d=1$。\n\n特殊性质 B：令 $c$ 表示仅在序列 $A$ 中出现，而不在序列 $B$ 中出现的数字总数。保证 $c \\le 5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "串串题", "background": "", "description": "给定长度分别为 $n,m$ 的整数序列 $A,B$ 和常数 $W,d$，序列从 $1$ 开始标号，保证 $A_i,B_i \\in [1,W]$。\n\n容易发现，我们有 $\\binom{W}{d}$ 种方案选择 $[1,W]$ 中的 $d$ 个互不相同的整数。\n\n对于每一种选择的方案，我们删去 $A$ 中出现的对应的 $d$ 种整数，令此时序列 $B$ 在序列 $A$ 中的出现次数为这次选择方案的权值。\n\n你需要求所有的选择方案的权值和，对 ${10}^9+7$ 取模。\n\n若对题意有疑问，请阅读样例及样例解释。\n\n注：$\\binom{a}{b}$ 表示组合数，含义为在 $a$ 个物品中**无序**地选择出 $b$ 个物品的方案数。\n\n**请注意：我们并不会删除序列 $\\bm{B}$ 中出现的对应整数。**", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n第一行，四个正整数 $n, m, W, d$，保证 $d \\le W$。\n\n第二行，$n$ 个正整数 $A_1, A_2, \\ldots, A_n$，表示序列 $A$。\n\n第三行，$m$ 个正整数 $B_1, B_2, \\ldots, B_m$，表示序列 $B$。", "outputFormat": "对于每组数据，输出一个整数表示答案对 ${10}^9+7$ 取模的结果。", "hint": "**【样例解释】**\n\n在样例的第一组数据中：\n\n1. 如果我们选择删去 $A$ 中的字符 $1$，$A$ 将变为 $\\{2\\}$，此时 $B$ 在 $A$ 中的出现次数为 $0$。\n1. 如果我们选择删去 $A$ 中的字符 $2$，$A$ 将变为 $\\{1,1,1\\}$，此时 $B$ 在 $A$ 中的出现次数为 $2$。\n1. 如果我们选择删去 $A$ 中的字符 $3$，$A$ 将变为 $\\{1,1,2,1\\}$，此时 $B$ 在 $A$ 中的出现次数为 $1$。\n\n因此，第一组数据的答案为 $0+2+1=3$。\n\n**再次提醒：我们并不会删除序列 $\\bm{B}$ 中出现的对应整数。**\n\n---\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1 \\le n,m,W \\le {10}^6$，$1 \\le d, A_i, B_j \\le W$，$1 \\le T \\le 5$。\n\n**本题采用捆绑测试且开启子任务依赖！**\n\n| 子任务 | $n \\le$ | $m \\le$ | $W \\le$ | 特殊性质 | 分数 | 依赖 |\n| - | - | - | - | - | - | - |\n| 1 | $10$ | $10$ | $5$ | | $10$ | \\ |\n| 2 | $1000$ | $1000$ | $5$ | | $20$ | 子任务 1 |\n| 3 |  | | | A | $15$ | \\ |\n| 4 |  | | | B | $25$ | \\ |\n| 5 | | | | | $30$ | 子任务 1、2、3、4 |\n\n特殊性质 A：保证 $d=1$。\n\n特殊性质 B：令 $c$ 表示仅在序列 $A$ 中出现，而不在序列 $B$ 中出现的数字总数。保证 $c \\le 5$。", "locale": "zh-CN"}}}
{"pid": "P9150", "type": "P", "difficulty": 6, "samples": [["3\n4 5\n2 3 4 1\n1 2\n2 3\n3 1\n1 4\n4 3\n5 6\n2 3 4 5 1\n1 2\n2 3\n3 4\n4 5\n5 2\n4 1\n3 2\n2 3 1\n1 2\n1 3\n", "4 4\n2 1\n1 1\n1 1\n5 5\n5 5\n3 1\n2 1\n1 1\n2 1\n1 1\n1 1\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "洛谷原创", "O2优化", "强连通分量", "洛谷月赛", "均摊分析"], "title": "邮箱题", "background": "邮箱，一种历史悠久的接信箱子。西方的邮箱以红色为主，东方的邮箱以绿色为主。", "description": "有一张 $n$ 个点和 $m$ 条边构成的**有向**图。每个点内都有一把另一个点的钥匙，$i$ 号点内有 $k_i$ 号点的钥匙。你能进入一个点当且仅当你有该点的钥匙。保证 $k_i$ 构成排列。\n\n只要进入了一个点，就获得了这个点内有的钥匙。一旦获得钥匙就不会被消耗。\n\n现在你拿到了 $i$ 号点的钥匙并到了 $i$ 号点。你需要对每个 $i$ 求出：\n\n1. 有多少点能被你到达。\n2. 有多少点能被你到达并返回起点 $i$。\n\n**请注意：给出的边均是有向边！**", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，表示数据的组数。对于每组数据：\n\n第一行，两个整数 $n,m$，表示图的点数和边数。\n\n第二行，$n$ 个整数 $k_1, k_2, \\ldots, k_n$，表示 $i$ 号点内有 $k_i$ 号点的钥匙。保证 $k_i$ 构成排列。\n\n接下来 $m$ 行，每行两个整数 $x, y$，表示图上的一条从 $x$ 指向 $y$ 的有向边。保证不含重边或自环。", "outputFormat": "对于每组数据，输出 $n$ 行，每行两个整数，第 $i$ 行的整数分别表示从 $i$ 号点出发，能到达的点数和能到达并返回起点的点数。", "hint": "**【样例解释】**\n\n以下是第一组数据的解释：（图中括号内的内容为点上的钥匙编号）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hrserkw2.png)\n\n1. $1$ 能到达的结点集合为 $\\{1,2,3,4\\}$，$1$ 能到达且能返回 $1$ 的结点集合为 $\\{1,2,3,4\\}$；\n2. $2$ 能到达的结点集合为 $\\{2,3\\}$，$2$ 能到达且能返回 $2$ 的结点集合为 $\\{2\\}$；\n3. $3$ 能到达的结点集合为 $\\{3\\}$，$3$ 能到达且能返回 $3$ 的结点集合为 $\\{3\\}$；\n4. $4$ 能到达的结点集合为 $\\{4\\}$，$4$ 能到达且能返回 $4$ 的结点集合为 $\\{4\\}$。\n\n这是一个合法的遍历过程：从 $1$ 开始，初始钥匙为 $2$，到达结点 $2$ 并获得钥匙 $3$，到达结点 $3$ 并获得钥匙 $4$，回到结点 $1$，到达结点 $4$ 并获得钥匙 $1$，到达结点 $3$，回到结点 $1$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，满足 $n \\ge 3$，$m\\ge 0$，$\\sum n\\le 1.5\\times{10}^6$，$\\sum m\\le 3\\times{10}^6$，$1 \\le T\\le 2\\times{10}^4$，$1 \\le x, y \\le n$，保证图中不含重边或自环。\n\n**本题采用捆绑测试且开启子任务依赖！**\n\n|子任务|对 $n$ 的约束|对 $m$ 的约束|分值|依赖|\n|-|-|-|-|-|\n|1|$n\\le 6$|$m\\le 12$|$20$|\\ |\n|2|$\\sum n^3\\le {10}^7$|$\\sum m^3\\le 2\\times {10}^7$|$25$|\\ |\n|3|$\\sum n^2\\le {10}^8$|$\\sum m^2\\le {10}^8$|$25$|子任务 1、2|\n|4|||$30$|子任务 1、2、3|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "邮箱题", "background": "邮箱，一种历史悠久的接信箱子。西方的邮箱以红色为主，东方的邮箱以绿色为主。", "description": "有一张 $n$ 个点和 $m$ 条边构成的**有向**图。每个点内都有一把另一个点的钥匙，$i$ 号点内有 $k_i$ 号点的钥匙。你能进入一个点当且仅当你有该点的钥匙。保证 $k_i$ 构成排列。\n\n只要进入了一个点，就获得了这个点内有的钥匙。一旦获得钥匙就不会被消耗。\n\n现在你拿到了 $i$ 号点的钥匙并到了 $i$ 号点。你需要对每个 $i$ 求出：\n\n1. 有多少点能被你到达。\n2. 有多少点能被你到达并返回起点 $i$。\n\n**请注意：给出的边均是有向边！**", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，表示数据的组数。对于每组数据：\n\n第一行，两个整数 $n,m$，表示图的点数和边数。\n\n第二行，$n$ 个整数 $k_1, k_2, \\ldots, k_n$，表示 $i$ 号点内有 $k_i$ 号点的钥匙。保证 $k_i$ 构成排列。\n\n接下来 $m$ 行，每行两个整数 $x, y$，表示图上的一条从 $x$ 指向 $y$ 的有向边。保证不含重边或自环。", "outputFormat": "对于每组数据，输出 $n$ 行，每行两个整数，第 $i$ 行的整数分别表示从 $i$ 号点出发，能到达的点数和能到达并返回起点的点数。", "hint": "**【样例解释】**\n\n以下是第一组数据的解释：（图中括号内的内容为点上的钥匙编号）\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hrserkw2.png)\n\n1. $1$ 能到达的结点集合为 $\\{1,2,3,4\\}$，$1$ 能到达且能返回 $1$ 的结点集合为 $\\{1,2,3,4\\}$；\n2. $2$ 能到达的结点集合为 $\\{2,3\\}$，$2$ 能到达且能返回 $2$ 的结点集合为 $\\{2\\}$；\n3. $3$ 能到达的结点集合为 $\\{3\\}$，$3$ 能到达且能返回 $3$ 的结点集合为 $\\{3\\}$；\n4. $4$ 能到达的结点集合为 $\\{4\\}$，$4$ 能到达且能返回 $4$ 的结点集合为 $\\{4\\}$。\n\n这是一个合法的遍历过程：从 $1$ 开始，初始钥匙为 $2$，到达结点 $2$ 并获得钥匙 $3$，到达结点 $3$ 并获得钥匙 $4$，回到结点 $1$，到达结点 $4$ 并获得钥匙 $1$，到达结点 $3$，回到结点 $1$。\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，满足 $n \\ge 3$，$m\\ge 0$，$\\sum n\\le 1.5\\times{10}^6$，$\\sum m\\le 3\\times{10}^6$，$1 \\le T\\le 2\\times{10}^4$，$1 \\le x, y \\le n$，保证图中不含重边或自环。\n\n**本题采用捆绑测试且开启子任务依赖！**\n\n|子任务|对 $n$ 的约束|对 $m$ 的约束|分值|依赖|\n|-|-|-|-|-|\n|1|$n\\le 6$|$m\\le 12$|$20$|\\ |\n|2|$\\sum n^3\\le {10}^7$|$\\sum m^3\\le 2\\times {10}^7$|$25$|\\ |\n|3|$\\sum n^2\\le {10}^8$|$\\sum m^2\\le {10}^8$|$25$|子任务 1、2|\n|4|||$30$|子任务 1、2、3|", "locale": "zh-CN"}}}
{"pid": "P9151", "type": "P", "difficulty": 7, "samples": [["4\n1001\n111000\n101010\n111000101010\n", "3\n7\n3\n25\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "数学", "洛谷原创", "O2优化", "组合数学", "洛谷月赛"], "title": "计数题", "background": "[Easy Counting Problem](https://atcoder.jp/contests/agc022/tasks/agc022_e)\n\n> 身のうさを思ひしらでややみなまし そむくならひのなき世なりせば", "description": "给定长度为 $N$ 的 $01$ 串 $S$，你可以做若干个操作，形如将长度为 $3$ 的子串变成它们的中位数（注意是变成一个数字），问可以得到多少个不同的串。\n\n答案对 $998244353$ 取模。", "inputFormat": "本题有多组数据。第一行输入数据组数 $T$。\n\n对于每组数据，仅输入一个字符串 $S$ 表示给定的 $01$ 串。", "outputFormat": "对每组数据输出一行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**【样例解释】**\n\n可以证明，$1001$ 仅能通过操作获得串 $10,01,1001$ ，因此样例第一组数据的答案为 $3$。\n\n---\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，满足 $1\\le N \\le 5\\times {10}^6$，$S_i\\in\\{0,1\\}$，$1 \\le T \\le 5$。\n\n| 子任务 | $N \\le$ | 特殊性质 | 分数 |\n| - | - | - | - |\n| 1 | $10$ | | $5$ |\n| 2 | $50$ | | $10$ |\n| 3 | $300$ | | $10$ |\n| 4 | $2000$ | | $15$ |\n| 5 | | A | $5$ |\n| 6 | | B | $5$ |\n| 7 | ${10}^5$ | | $20$ |\n| 8 | | | $30$ |\n\n特殊性质 A：保证 $S_i=0$。\n\n特殊性质 B：保证 $S_{2k}=0$、$S_{2k+1}=1$。\n\n**字符串下标的编号从 $1$ 开始。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "计数题", "background": "[Easy Counting Problem](https://atcoder.jp/contests/agc022/tasks/agc022_e)\n\n> 身のうさを思ひしらでややみなまし そむくならひのなき世なりせば", "description": "给定长度为 $N$ 的 $01$ 串 $S$，你可以做若干个操作，形如将长度为 $3$ 的子串变成它们的中位数（注意是变成一个数字），问可以得到多少个不同的串。\n\n答案对 $998244353$ 取模。", "inputFormat": "本题有多组数据。第一行输入数据组数 $T$。\n\n对于每组数据，仅输入一个字符串 $S$ 表示给定的 $01$ 串。", "outputFormat": "对每组数据输出一行一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**【样例解释】**\n\n可以证明，$1001$ 仅能通过操作获得串 $10,01,1001$ ，因此样例第一组数据的答案为 $3$。\n\n---\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，满足 $1\\le N \\le 5\\times {10}^6$，$S_i\\in\\{0,1\\}$，$1 \\le T \\le 5$。\n\n| 子任务 | $N \\le$ | 特殊性质 | 分数 |\n| - | - | - | - |\n| 1 | $10$ | | $5$ |\n| 2 | $50$ | | $10$ |\n| 3 | $300$ | | $10$ |\n| 4 | $2000$ | | $15$ |\n| 5 | | A | $5$ |\n| 6 | | B | $5$ |\n| 7 | ${10}^5$ | | $20$ |\n| 8 | | | $30$ |\n\n特殊性质 A：保证 $S_i=0$。\n\n特殊性质 B：保证 $S_{2k}=0$、$S_{2k+1}=1$。\n\n**字符串下标的编号从 $1$ 开始。**", "locale": "zh-CN"}}}
{"pid": "P9152", "type": "P", "difficulty": 7, "samples": [["5 3\n2 4 5 1 3\n3 5\n1 5\n1 4\n", "5\n12\n6\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["洛谷原创", "O2优化", "分块", "洛谷月赛", "笛卡尔树"], "title": "待黑白分明", "background": "", "description": "[Shiro](https://www.bilibili.com/video/BV1jb411k7wa) 所在的城市可以看成数轴上 $n$ 个坐标连续的点，其中 $i$  号点的高度为 $p_i$，保证 $p$ 是一个 $\\{1,2,\\ldots,n\\}$ 的排列。\n\n3202 年的科技非常发达，发展出了虫洞列车技术。共有 $n$ 种列车，第 $i$ 种列车会经过所有高度大于等于 $i$ 的位置，每种列车线路都是双向的，也就是说可以乘列车从左到右，也可以从右到左。\n\nShiro 想在城市里转转，她定义一个位置集合 $S$ 合法，当且仅当我们将 $S$ 中的位置**按照高度排序**后，相邻的城市可以通过乘坐**一种**列车在中途不停靠的情况下直达。\n\n她会给你 $q$ 次询问，每次给定 $l,r$，你需要告诉 Shiro 所有位置的**高度**均在 $[l,r]$ 内的合法集合 $T$ 的数量对 $998244353$ 取模的结果。", "inputFormat": "第一行，两个正整数 $n,q$。\n\n第二行，$n$ 个正整数，表示 $p_{1,2,\\ldots,n}$。\n\n接下来 $q$ 行，第 $i$ 行两个正整数 $l_i, r_i$，表示第 $i$ 次询问的高度区间。", "outputFormat": "输出 $q$ 行，每行一个非负整数，表示答案。", "hint": "**【样例解释】**\n\n第一组询问解释：\n\n合法的高度集合有：$\\{3\\},\\{4\\},\\{5\\},\\{3,5\\},\\{4,5\\}$。\n\n---\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$1\\le n,q\\le 2\\times {10}^5$，保证 $p$ 是一个排列，且 $1\\le l_i \\le r_i \\le n$。\n\n|子任务|$n\\le$|$q\\le$|特殊性质|分值|\n|-|-|-|-|-|\n|1|$15$|$1000$||$10$|\n|2|$1000$|$1000$||$15$|\n|3|||A|$5$|\n|4|||B|$30$|\n|5|$5\\times{10}^4$|$5\\times{10}^4$||$20$|\n|6||||$20$|\n\n特殊性质 A：$p_i=i$。\n\n特殊性质 B：$p$ 在所有长度为 $n$ 的排列中随机选取。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "待黑白分明", "background": "", "description": "[Shiro](https://www.bilibili.com/video/BV1jb411k7wa) 所在的城市可以看成数轴上 $n$ 个坐标连续的点，其中 $i$  号点的高度为 $p_i$，保证 $p$ 是一个 $\\{1,2,\\ldots,n\\}$ 的排列。\n\n3202 年的科技非常发达，发展出了虫洞列车技术。共有 $n$ 种列车，第 $i$ 种列车会经过所有高度大于等于 $i$ 的位置，每种列车线路都是双向的，也就是说可以乘列车从左到右，也可以从右到左。\n\nShiro 想在城市里转转，她定义一个位置集合 $S$ 合法，当且仅当我们将 $S$ 中的位置**按照高度排序**后，相邻的城市可以通过乘坐**一种**列车在中途不停靠的情况下直达。\n\n她会给你 $q$ 次询问，每次给定 $l,r$，你需要告诉 Shiro 所有位置的**高度**均在 $[l,r]$ 内的合法集合 $T$ 的数量对 $998244353$ 取模的结果。", "inputFormat": "第一行，两个正整数 $n,q$。\n\n第二行，$n$ 个正整数，表示 $p_{1,2,\\ldots,n}$。\n\n接下来 $q$ 行，第 $i$ 行两个正整数 $l_i, r_i$，表示第 $i$ 次询问的高度区间。", "outputFormat": "输出 $q$ 行，每行一个非负整数，表示答案。", "hint": "**【样例解释】**\n\n第一组询问解释：\n\n合法的高度集合有：$\\{3\\},\\{4\\},\\{5\\},\\{3,5\\},\\{4,5\\}$。\n\n---\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$1\\le n,q\\le 2\\times {10}^5$，保证 $p$ 是一个排列，且 $1\\le l_i \\le r_i \\le n$。\n\n|子任务|$n\\le$|$q\\le$|特殊性质|分值|\n|-|-|-|-|-|\n|1|$15$|$1000$||$10$|\n|2|$1000$|$1000$||$15$|\n|3|||A|$5$|\n|4|||B|$30$|\n|5|$5\\times{10}^4$|$5\\times{10}^4$||$20$|\n|6||||$20$|\n\n特殊性质 A：$p_i=i$。\n\n特殊性质 B：$p$ 在所有长度为 $n$ 的排列中随机选取。", "locale": "zh-CN"}}}
{"pid": "P9153", "type": "P", "difficulty": 6, "samples": [["1\n3\n4 1 3\n4 7 7\n9 10 3\n", "31\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["欧拉回路"], "title": "「SvR-2」1+2=3（加强版）", "background": null, "description": "你有一些木棒，每个木棒左边有一个数，右边有一个数，数是 $[0,c)$ 的自然数，你要将所有木棒拼起来，使相邻的数和为 $c$ 的对数最大。\n\n例如，$c=3$，$1\\text{ - }2$ 和 $1\\text{ - }0$ 两个木棒，如果按 $1\\text{ - }0,1\\text{ - }2$ 这样拼，相邻的数和为 $3$ 的对数是 $0$；而按 $1\\text{ - }\\textcolor{red}{\\underline{\\textbf 2}},\\textcolor{red}{\\underline{\\textbf 1}}\\text{ - }0$ 这样拼相邻的数和为 $3$ 的对数是 $1$，因为 $2+1=3$。", "inputFormat": "**本题有多组数据。**\n\n输入的第一行一个正整数表示数据组数 $T$。\n\n对于每组数据，第一行输入一个正整数 $c$，之后 $c$ 行，每行 $c$ 个整数，第 $i$ 行第 $j$ 个整数 $a_{i,j}$ 为 $(i-1)\\text{ - }(j-1)$ 型木棒的个数。", "outputFormat": "共 $T$ 行，每行一个整数表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le T\\le10^5$，$1\\le a_{i,j}\\le10^9$，$3\\le c\\le10^3$，$\\sum c^2\\le5\\times10^6$。\n\n**注：本题数据较弱，如有 hack 欢迎告知出题人。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SvR-2」1+2=3（加强版）", "background": null, "description": "你有一些木棒，每个木棒左边有一个数，右边有一个数，数是 $[0,c)$ 的自然数，你要将所有木棒拼起来，使相邻的数和为 $c$ 的对数最大。\n\n例如，$c=3$，$1\\text{ - }2$ 和 $1\\text{ - }0$ 两个木棒，如果按 $1\\text{ - }0,1\\text{ - }2$ 这样拼，相邻的数和为 $3$ 的对数是 $0$；而按 $1\\text{ - }\\textcolor{red}{\\underline{\\textbf 2}},\\textcolor{red}{\\underline{\\textbf 1}}\\text{ - }0$ 这样拼相邻的数和为 $3$ 的对数是 $1$，因为 $2+1=3$。", "inputFormat": "**本题有多组数据。**\n\n输入的第一行一个正整数表示数据组数 $T$。\n\n对于每组数据，第一行输入一个正整数 $c$，之后 $c$ 行，每行 $c$ 个整数，第 $i$ 行第 $j$ 个整数 $a_{i,j}$ 为 $(i-1)\\text{ - }(j-1)$ 型木棒的个数。", "outputFormat": "共 $T$ 行，每行一个整数表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le T\\le10^5$，$1\\le a_{i,j}\\le10^9$，$3\\le c\\le10^3$，$\\sum c^2\\le5\\times10^6$。\n\n**注：本题数据较弱，如有 hack 欢迎告知出题人。**", "locale": "zh-CN"}}}
{"pid": "P9154", "type": "P", "difficulty": 2, "samples": [["2\n12\n2", "4\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「GLR-R4」立夏", "background": "&emsp;&emsp;「芳菲歇去何须恨，夏木阴阴正可人」\n\n---\n\n&emsp;&emsp;和老 V 说好的赛后团建终于举行啦！\n\n&emsp;&emsp;难得和学弟学妹们在一起，天依和阿绫自然不会错过这次良好的机会，更不会放过早就想 rua 的狐狸座的耳朵！\n\n&emsp;&emsp;“那个……天依……”\n\n&emsp;&emsp;天依和腿上的狐狸座同时歪过头看向某个叫阿绫的醋坛子。\n\n&emsp;&emsp;“绫姐绫姐，疼！”\n\n&emsp;&emsp;于是在天依给小狐狸扎头发的时候，小狐狸的耳朵已经被揉蔫啦！\n\n---\n\n&emsp;&emsp;**立夏**&emsp;「三步并两步　就发现　如期而至的透明夏日章节」", "description": "&emsp;&emsp;**本题提供简要题意。**\n\n&emsp;&emsp;天依给狐狸座准备的纱质发绳由**白色**和**紫色**的小格子组成，相同大小的小格子连成了一条足够长的带子。我们不妨把天依的手正捏着的位置标为第 $0$ 格，向右依次是第 $1$ 格、第 $2$ 格，等等；向左依次是第 $-1$ 格，第 $-2$ 格，等等；天依将发绳对折起来，此时第 $-1$ 格将于第 $1$ 格重合，第 $-2$ 格将于第 $2$ 格重合……第 $-k$ 格将与第 $k$ 格重合（$k$ 为正整数）。**特别地**，我们认为第 $0$ 格保持原样，没有和其他格子重合，也没有和自己重合。\n\n&emsp;&emsp;由于发绳是半透光的，所以对折起来的发绳上的格子将可能出现三种颜色：**白色**、**浅紫色**和**深紫色**。两个白色的格子重合呈现白色，一个紫色和一个白色的格子重合呈现浅紫色，两个紫色的格子重合呈现深紫色。**特别地**，若第 $0$ 格原来为白色，则折叠后也为白色，否则第 $0$ 格原来为紫色，则折叠后为浅紫色。\n\n&emsp;&emsp;如果把白色记作 $0$，浅紫色记作 $1$，深紫色记作 $2$，以折叠后的第 $0$ 格作为最低位，依次将每个格子颜色对应的数字记录下来，我们将得到一个长长的三进制数整数，记为 $x$。现在，天依告诉你了 $x$ 的值，你能算出**对折之前的发绳**有多少种不同的样式吗？称两条发绳颜色不同，当且仅当存在一个整数 $k$，使得两条发绳的第 $k$ 格上的颜色不相同。\n\n&emsp;&emsp;发绳款式丰富多样，你需要对 $T$ 个 $x$ 分别求出答案。\n\n### 简要题意\n\n&emsp;&emsp;对于一个包含整数的集合 $S$，定义其权值为 $\\sum_{a\\in S}3^{|a|}$（即，枚举 $S$ 的元素 $a$，计算 $3^{|a|}$ 并求和）。给出非负整数 $x$，计算有多少个集合的权值为 $x$。注意集合不能包含重复元素。", "inputFormat": "第一行一个整数 $T$，表示你需要分别处理的数据组数。\n\n接下来 $T$ 行，每行一个整数 $x$，表示对折后发绳颜色所对应的三进制数。注意 $x$ 是以十进制输入的。", "outputFormat": "输出 $T$ 行，第 $i$ 行一个整数，表示给出的第 $i$ 个 $x$ 对应的方案数。", "hint": "#### 样例 #1 解释\n\n$x=12$ 时，有四种可能的发绳样式，它们的紫色格子位置分别是 $\\{-1,-2\\}$，$\\{-1,2\\}$，$\\{1,-2\\}$，$\\{1,2\\}$。\n\n$x=2$ 时，不存在任何满足条件的发绳样式，此时输出 $0$ 即可。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5, 0 \\leq x \\leq 10^{18}$。\n\n对于不同的测试点，作如下约定：\n\n| 测试点编号 |       $x$        | 特殊性质 |\n| :--------: | :--------------: | :--------: |\n|    $1\\sim3$     |      $\\leq 3^{10}$      |   无   |\n|    $4$     |  $\\leq 10^{18}$ |   $x \\bmod 3 = 1$    |\n|    $5$     |    $\\leq 10^{18}$     |  $x \\bmod 3=2$   |\n|    $6$     |   $\\leq 10^{18}$   |  $x \\bmod 3 =0$   |\n|    $7\\sim10$     |   $\\leq 10^{18}$   |  无  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」立夏", "background": "&emsp;&emsp;「芳菲歇去何须恨，夏木阴阴正可人」\n\n---\n\n&emsp;&emsp;和老 V 说好的赛后团建终于举行啦！\n\n&emsp;&emsp;难得和学弟学妹们在一起，天依和阿绫自然不会错过这次良好的机会，更不会放过早就想 rua 的狐狸座的耳朵！\n\n&emsp;&emsp;“那个……天依……”\n\n&emsp;&emsp;天依和腿上的狐狸座同时歪过头看向某个叫阿绫的醋坛子。\n\n&emsp;&emsp;“绫姐绫姐，疼！”\n\n&emsp;&emsp;于是在天依给小狐狸扎头发的时候，小狐狸的耳朵已经被揉蔫啦！\n\n---\n\n&emsp;&emsp;**立夏**&emsp;「三步并两步　就发现　如期而至的透明夏日章节」", "description": "&emsp;&emsp;**本题提供简要题意。**\n\n&emsp;&emsp;天依给狐狸座准备的纱质发绳由**白色**和**紫色**的小格子组成，相同大小的小格子连成了一条足够长的带子。我们不妨把天依的手正捏着的位置标为第 $0$ 格，向右依次是第 $1$ 格、第 $2$ 格，等等；向左依次是第 $-1$ 格，第 $-2$ 格，等等；天依将发绳对折起来，此时第 $-1$ 格将于第 $1$ 格重合，第 $-2$ 格将于第 $2$ 格重合……第 $-k$ 格将与第 $k$ 格重合（$k$ 为正整数）。**特别地**，我们认为第 $0$ 格保持原样，没有和其他格子重合，也没有和自己重合。\n\n&emsp;&emsp;由于发绳是半透光的，所以对折起来的发绳上的格子将可能出现三种颜色：**白色**、**浅紫色**和**深紫色**。两个白色的格子重合呈现白色，一个紫色和一个白色的格子重合呈现浅紫色，两个紫色的格子重合呈现深紫色。**特别地**，若第 $0$ 格原来为白色，则折叠后也为白色，否则第 $0$ 格原来为紫色，则折叠后为浅紫色。\n\n&emsp;&emsp;如果把白色记作 $0$，浅紫色记作 $1$，深紫色记作 $2$，以折叠后的第 $0$ 格作为最低位，依次将每个格子颜色对应的数字记录下来，我们将得到一个长长的三进制数整数，记为 $x$。现在，天依告诉你了 $x$ 的值，你能算出**对折之前的发绳**有多少种不同的样式吗？称两条发绳颜色不同，当且仅当存在一个整数 $k$，使得两条发绳的第 $k$ 格上的颜色不相同。\n\n&emsp;&emsp;发绳款式丰富多样，你需要对 $T$ 个 $x$ 分别求出答案。\n\n### 简要题意\n\n&emsp;&emsp;对于一个包含整数的集合 $S$，定义其权值为 $\\sum_{a\\in S}3^{|a|}$（即，枚举 $S$ 的元素 $a$，计算 $3^{|a|}$ 并求和）。给出非负整数 $x$，计算有多少个集合的权值为 $x$。注意集合不能包含重复元素。", "inputFormat": "第一行一个整数 $T$，表示你需要分别处理的数据组数。\n\n接下来 $T$ 行，每行一个整数 $x$，表示对折后发绳颜色所对应的三进制数。注意 $x$ 是以十进制输入的。", "outputFormat": "输出 $T$ 行，第 $i$ 行一个整数，表示给出的第 $i$ 个 $x$ 对应的方案数。", "hint": "#### 样例 #1 解释\n\n$x=12$ 时，有四种可能的发绳样式，它们的紫色格子位置分别是 $\\{-1,-2\\}$，$\\{-1,2\\}$，$\\{1,-2\\}$，$\\{1,2\\}$。\n\n$x=2$ 时，不存在任何满足条件的发绳样式，此时输出 $0$ 即可。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq T \\leq 10^5, 0 \\leq x \\leq 10^{18}$。\n\n对于不同的测试点，作如下约定：\n\n| 测试点编号 |       $x$        | 特殊性质 |\n| :--------: | :--------------: | :--------: |\n|    $1\\sim3$     |      $\\leq 3^{10}$      |   无   |\n|    $4$     |  $\\leq 10^{18}$ |   $x \\bmod 3 = 1$    |\n|    $5$     |    $\\leq 10^{18}$     |  $x \\bmod 3=2$   |\n|    $6$     |   $\\leq 10^{18}$   |  $x \\bmod 3 =0$   |\n|    $7\\sim10$     |   $\\leq 10^{18}$   |  无  |", "locale": "zh-CN"}}}
{"pid": "P9155", "type": "P", "difficulty": 3, "samples": [["2\n2\n1\n2 0\n5\n1\n2 1\n2 2\n1\n2 6", "0\n1100"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「GLR-R4」小满", "background": "&emsp;&emsp;「树阴满地日当午，梦觉流莺时一声」\n\n---\n\n&emsp;&emsp;乐队训练之余，锻炼时间可是必不可少的，可是就算几个女孩子撒开蹄子跑，也不可能在高三打球狂人的统治下抢到一块羽毛球场的。经过了数周从训练室冲到球场，再从球场灰心地踱回训练室的循环后，阿绫绝望地向大家宣布了一个坏消息：“只能打野球了。”\n\n&emsp;&emsp;“还有几个月了哟……”\n\n&emsp;&emsp;“老 V 你又来了！”才回训练室的阿绫扶着门抱怨着。\n\n&emsp;&emsp;“所以你们打球得抓紧时间啦！”\n\n---\n\n&emsp;&emsp;**小满**&emsp;「生活一圈圈日子一年年　总是这样重复一遍又一遍」", "description": "&emsp;&emsp;野场羽毛球，在生态环境良好的校园里，可是经常遭遇不测的——\n\n&emsp;&emsp;“天依！怎么球又被挂树上啦！”\n\n&emsp;&emsp;如阿绫所见，她们仅剩的一颗可怜的羽毛球被天依用吃包子的劲儿抡到树上去了。为了避免找别人的排球或者篮球来砸树的尴尬，阿绫这次特意准备了一根折叠杆。\n\n&emsp;&emsp;折叠杆初始时处于完全收缩状态，我们认为它的长度 $\\ell=0$。完全展开折叠杆需要 $n$ 步，每步为以下两种情况之一：\n\n1.  将杆末端的折叠处展开。此操作没有额外参数，操作完成后 $\\ell\\gets 2\\ell$，即杆的长度变为原来的两倍。\n\n2.  将杆末端的伸缩处展开。此操作将给出额外可变参数 $d$，操作完成后 $\\ell\\gets \\ell+d$，即杆的长度增加 $d$。\n\n&emsp;&emsp;树上球的高度、杆最终的高度和天依吃包子的劲儿可能都是庞大的，所以阿绫需要你来计算一下杆最终的长度 $\\ell$。你需要回答阿绫 $n$ 次操作依次完成后，**$\\ell$ 的二进制表示**。", "inputFormat": "第一行一个整数 $T$ ，表示你需要分别处理的数据组数。\n\n对于每组数据：\n\n- 第一行一个整数 $n$，表示将进行的操作次数；\n\n- 接下来 $n$ 行，每行格式形如 `1` 或 `2 d`，分别描述两类操作。其中整数 $d$ 用十进制表示。", "outputFormat": "对于每组测试数据，输出最终的 $\\ell$ 的二进制表示。**你的答案不应包含多余的前导零**。", "hint": "#### 样例 #1 解释\n\n对于第一组测试数据：$\\ell$ 的变化过程为：$0 \\rightarrow 0 \\rightarrow 0$，而 $(0)_{10}=(0)_2$。\n\n对于第二组测试数据：$\\ell$ 的变化过程为：$0 \\rightarrow 0 \\rightarrow 1 \\rightarrow 3 \\rightarrow 6 \\rightarrow 12$，而 $(12)_{10}=(1100)_2$。  \n\n### 数据规模与约定  \n\n对于 $100\\%$ 的数据，$1\\leq T \\leq 5$，$1\\leq  n \\leq 10^5$，$0\\leq d < 2^{16}$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |     $n$     | 特殊性质 | 子任务分值 |\n| :--------: | :---------: | :------: | :--------: |\n|    $1$     |  $\\leq 20$  |    无    |    $10$    |\n|    $2$     | $\\leq 10^5$ |    有    |    $20$    |\n|    $3$     | $\\leq 10^3$ |    无    |    $40$    |\n|    $4$     | $\\leq 10^5$ |    无    |    $30$    |\n  \n- 特殊性质：仅存在第二种操作。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」小满", "background": "&emsp;&emsp;「树阴满地日当午，梦觉流莺时一声」\n\n---\n\n&emsp;&emsp;乐队训练之余，锻炼时间可是必不可少的，可是就算几个女孩子撒开蹄子跑，也不可能在高三打球狂人的统治下抢到一块羽毛球场的。经过了数周从训练室冲到球场，再从球场灰心地踱回训练室的循环后，阿绫绝望地向大家宣布了一个坏消息：“只能打野球了。”\n\n&emsp;&emsp;“还有几个月了哟……”\n\n&emsp;&emsp;“老 V 你又来了！”才回训练室的阿绫扶着门抱怨着。\n\n&emsp;&emsp;“所以你们打球得抓紧时间啦！”\n\n---\n\n&emsp;&emsp;**小满**&emsp;「生活一圈圈日子一年年　总是这样重复一遍又一遍」", "description": "&emsp;&emsp;野场羽毛球，在生态环境良好的校园里，可是经常遭遇不测的——\n\n&emsp;&emsp;“天依！怎么球又被挂树上啦！”\n\n&emsp;&emsp;如阿绫所见，她们仅剩的一颗可怜的羽毛球被天依用吃包子的劲儿抡到树上去了。为了避免找别人的排球或者篮球来砸树的尴尬，阿绫这次特意准备了一根折叠杆。\n\n&emsp;&emsp;折叠杆初始时处于完全收缩状态，我们认为它的长度 $\\ell=0$。完全展开折叠杆需要 $n$ 步，每步为以下两种情况之一：\n\n1.  将杆末端的折叠处展开。此操作没有额外参数，操作完成后 $\\ell\\gets 2\\ell$，即杆的长度变为原来的两倍。\n\n2.  将杆末端的伸缩处展开。此操作将给出额外可变参数 $d$，操作完成后 $\\ell\\gets \\ell+d$，即杆的长度增加 $d$。\n\n&emsp;&emsp;树上球的高度、杆最终的高度和天依吃包子的劲儿可能都是庞大的，所以阿绫需要你来计算一下杆最终的长度 $\\ell$。你需要回答阿绫 $n$ 次操作依次完成后，**$\\ell$ 的二进制表示**。", "inputFormat": "第一行一个整数 $T$ ，表示你需要分别处理的数据组数。\n\n对于每组数据：\n\n- 第一行一个整数 $n$，表示将进行的操作次数；\n\n- 接下来 $n$ 行，每行格式形如 `1` 或 `2 d`，分别描述两类操作。其中整数 $d$ 用十进制表示。", "outputFormat": "对于每组测试数据，输出最终的 $\\ell$ 的二进制表示。**你的答案不应包含多余的前导零**。", "hint": "#### 样例 #1 解释\n\n对于第一组测试数据：$\\ell$ 的变化过程为：$0 \\rightarrow 0 \\rightarrow 0$，而 $(0)_{10}=(0)_2$。\n\n对于第二组测试数据：$\\ell$ 的变化过程为：$0 \\rightarrow 0 \\rightarrow 1 \\rightarrow 3 \\rightarrow 6 \\rightarrow 12$，而 $(12)_{10}=(1100)_2$。  \n\n### 数据规模与约定  \n\n对于 $100\\%$ 的数据，$1\\leq T \\leq 5$，$1\\leq  n \\leq 10^5$，$0\\leq d < 2^{16}$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |     $n$     | 特殊性质 | 子任务分值 |\n| :--------: | :---------: | :------: | :--------: |\n|    $1$     |  $\\leq 20$  |    无    |    $10$    |\n|    $2$     | $\\leq 10^5$ |    有    |    $20$    |\n|    $3$     | $\\leq 10^3$ |    无    |    $40$    |\n|    $4$     | $\\leq 10^5$ |    无    |    $30$    |\n  \n- 特殊性质：仅存在第二种操作。\n", "locale": "zh-CN"}}}
{"pid": "P9156", "type": "P", "difficulty": 5, "samples": [["4\n1 0\n2 1\n2 2\n3 3", "1.000000\n1.333333\n1.000000\n1.500000"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "Special Judge", "O2优化", "概率论", "期望", "洛谷月赛"], "title": "「GLR-R4」芒种", "background": "&emsp;&emsp;「晴云轻漾，熏风无浪，开樽避暑争相向」\n\n---\n\n&emsp;&emsp;“高考周啊……”\n\n&emsp;&emsp;今天倒是没有抢场的压力，不过甚至没人敢出训练室，毕竟对面教学楼就是正在进行高考的考场。\n\n&emsp;&emsp;“我们明年说不定就在对面了。”虽然下午的训练结束，但今天食堂安排特殊，天依和阿绫还得在休息室里腻歪好一会儿。\n\n&emsp;&emsp;“阿绫，饿……”像是听不见食物以外的话题，天依躺在沙发上，手指绕着头发——绕着阿绫的头发，抱怨着。\n\n&emsp;&emsp;“来玩个游戏吧。”\n\n\n---\n\n&emsp;&emsp;**芒种**&emsp;「冰苏打烦躁气泡都融化\n　慵懒的风快趁虚而入吧」", "description": "&emsp;&emsp;*双重神经衰弱* 是一个极其考验记忆力的卡牌游戏，其规则如下。\n\n&emsp;&emsp;有 $n$ 种不同类型的卡牌，每种两张，初始时这 $2n$ 张牌全部倒扣在桌面上。两位玩家轮流操作，每次操作选择两张**不同的**牌**同时**翻起，这两张牌将对双方展示，此后：\n\n- 若两张牌类型相同，则操作者得 $1$ 分，将这两张牌拿走。下一次操作由**当前操作者**继续进行。\n\n- 否则，操作者将这两张牌扣回。下一次操作轮到**对方**进行。\n\n&emsp;&emsp;当所有牌全部被拿走时，游戏结束。\n\n&emsp;&emsp;两位玩家的目标都是最大化自己的最终得分。此外，在**双方同意**的情况下，两人可以选择和局。设和局时还剩下 $2n'$ 张牌，则双方各获得 $n'/2$ 分，游戏结束。为避免游戏无法结束的情况，我们认为：当选择和局同时是双方的最优选择**之一**时，双方会立即和局。\n\n---\n\n&emsp;&emsp;现在，阿绫和天依想来玩玩这个游戏。因为太饿，负责摆牌的天依不小心把 $2n$ 张牌中的 $m$ 张牌牌面朝上地摆放了，**这 $m$ 张牌的的类型恰好两两不同**，双方悄悄记住了它们的类型和位置，并将它们扣回，然后开始游戏。我们假定天依和阿绫过目不忘且聪明绝顶，能够记住所有被展示过的牌（包括最初 $m$ 张牌）的类型和位置，也都会采取最优策略最大化自己的期望得分。作为先手方的阿绫想要知道自己的期望得分，你可以帮帮她吗？\n\n&emsp;&emsp;由于她们真的要在休息室腻歪好一会儿，所以你需要对 $T$ 组的 $(n,m)$ 分别求出答案。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行两个整数 $n,m$，分别表示该轮游戏中卡牌的类型数和双方预先翻起并扣回的卡牌张数。", "outputFormat": "输出 $T$ 行，每行一个实数，表示该组数据的答案。当且仅当你的输出与标准答案的相对误差或绝对误差不超过 $10^{-6}$ 时，被视为正确。", "hint": "#### 样例 #1 解释\n\n对于第一组数据，先手翻起的一对牌类型必然相同，将其拿走，游戏结束。先手期望得分为 $1$。\n\n对于第三组数据，可以证明，双方会在游戏开始时同意和局。先后手期望得分都是 $1$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^3$，$0\\le m\\le n$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |      $n,m$       |       $T$        | 特殊性质 | 子任务分值 |\n| :--------: | :--------------: | :--------------: | :------: | :--------: |\n|    $1$     |      $\\le2$      |      $\\le5$      |    无    |    $10$    |\n|    $2$     |      $\\le8$      |     $\\le44$      |    无    |    $20$    |\n|    $3$     | $\\le5\\times10^3$ | $\\le5\\times10^3$ |    有    |    $10$    |\n|    $4$     | $\\le5\\times10^3$ |       $=1$       |    无    |    $20$    |\n|    $5$     | $\\le5\\times10^3$ | $\\le5\\times10^3$ |    无    |    $40$    |\n\n-   特殊性质：$n=m$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」芒种", "background": "&emsp;&emsp;「晴云轻漾，熏风无浪，开樽避暑争相向」\n\n---\n\n&emsp;&emsp;“高考周啊……”\n\n&emsp;&emsp;今天倒是没有抢场的压力，不过甚至没人敢出训练室，毕竟对面教学楼就是正在进行高考的考场。\n\n&emsp;&emsp;“我们明年说不定就在对面了。”虽然下午的训练结束，但今天食堂安排特殊，天依和阿绫还得在休息室里腻歪好一会儿。\n\n&emsp;&emsp;“阿绫，饿……”像是听不见食物以外的话题，天依躺在沙发上，手指绕着头发——绕着阿绫的头发，抱怨着。\n\n&emsp;&emsp;“来玩个游戏吧。”\n\n\n---\n\n&emsp;&emsp;**芒种**&emsp;「冰苏打烦躁气泡都融化\n　慵懒的风快趁虚而入吧」", "description": "&emsp;&emsp;*双重神经衰弱* 是一个极其考验记忆力的卡牌游戏，其规则如下。\n\n&emsp;&emsp;有 $n$ 种不同类型的卡牌，每种两张，初始时这 $2n$ 张牌全部倒扣在桌面上。两位玩家轮流操作，每次操作选择两张**不同的**牌**同时**翻起，这两张牌将对双方展示，此后：\n\n- 若两张牌类型相同，则操作者得 $1$ 分，将这两张牌拿走。下一次操作由**当前操作者**继续进行。\n\n- 否则，操作者将这两张牌扣回。下一次操作轮到**对方**进行。\n\n&emsp;&emsp;当所有牌全部被拿走时，游戏结束。\n\n&emsp;&emsp;两位玩家的目标都是最大化自己的最终得分。此外，在**双方同意**的情况下，两人可以选择和局。设和局时还剩下 $2n'$ 张牌，则双方各获得 $n'/2$ 分，游戏结束。为避免游戏无法结束的情况，我们认为：当选择和局同时是双方的最优选择**之一**时，双方会立即和局。\n\n---\n\n&emsp;&emsp;现在，阿绫和天依想来玩玩这个游戏。因为太饿，负责摆牌的天依不小心把 $2n$ 张牌中的 $m$ 张牌牌面朝上地摆放了，**这 $m$ 张牌的的类型恰好两两不同**，双方悄悄记住了它们的类型和位置，并将它们扣回，然后开始游戏。我们假定天依和阿绫过目不忘且聪明绝顶，能够记住所有被展示过的牌（包括最初 $m$ 张牌）的类型和位置，也都会采取最优策略最大化自己的期望得分。作为先手方的阿绫想要知道自己的期望得分，你可以帮帮她吗？\n\n&emsp;&emsp;由于她们真的要在休息室腻歪好一会儿，所以你需要对 $T$ 组的 $(n,m)$ 分别求出答案。", "inputFormat": "第一行一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行两个整数 $n,m$，分别表示该轮游戏中卡牌的类型数和双方预先翻起并扣回的卡牌张数。", "outputFormat": "输出 $T$ 行，每行一个实数，表示该组数据的答案。当且仅当你的输出与标准答案的相对误差或绝对误差不超过 $10^{-6}$ 时，被视为正确。", "hint": "#### 样例 #1 解释\n\n对于第一组数据，先手翻起的一对牌类型必然相同，将其拿走，游戏结束。先手期望得分为 $1$。\n\n对于第三组数据，可以证明，双方会在游戏开始时同意和局。先后手期望得分都是 $1$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le5\\times10^3$，$0\\le m\\le n$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |      $n,m$       |       $T$        | 特殊性质 | 子任务分值 |\n| :--------: | :--------------: | :--------------: | :------: | :--------: |\n|    $1$     |      $\\le2$      |      $\\le5$      |    无    |    $10$    |\n|    $2$     |      $\\le8$      |     $\\le44$      |    无    |    $20$    |\n|    $3$     | $\\le5\\times10^3$ | $\\le5\\times10^3$ |    有    |    $10$    |\n|    $4$     | $\\le5\\times10^3$ |       $=1$       |    无    |    $20$    |\n|    $5$     | $\\le5\\times10^3$ | $\\le5\\times10^3$ |    无    |    $40$    |\n\n-   特殊性质：$n=m$。\n", "locale": "zh-CN"}}}
{"pid": "P9157", "type": "P", "difficulty": 7, "samples": [["2 2 64", "9"], ["5 5 64 ", "213"], ["1234 1234 12", "673319736"], ["30000 10000000 2", "836094021"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "洛谷原创", "O2优化", "素数判断,质数,筛法", "莫比乌斯反演", "容斥原理", "洛谷月赛"], "title": "「GLR-R4」夏至", "background": "&emsp;&emsp;「柳庭风静人眠昼，昼眠人静风庭柳」\n\n---\n\n&emsp;&emsp;老 V 说为大家准备了特别的粽子，所以天依来了；\n\n&emsp;&emsp;天依来了，所以阿绫来了；\n\n&emsp;&emsp;阿绫来了，龙牙也不敢不来；\n\n&emsp;&emsp;到了快一半了，于是剩下的大家都来了……\n\n&emsp;&emsp;所以，为什么要在模拟演出训练结束后来补文化课啊！\n\n&emsp;&emsp;“天依，这数学老师真的在讲数学？”\n\n&emsp;&emsp;“摩柯，我和阿绫就靠你了！”天依戳戳前排摩柯的肩膀。\n\n&emsp;&emsp;“要推出来了，要推出来了……”，摩柯大概是第一次把草稿纸写得快满，“我知道我很急，但我先别急……这像是在做噩梦一样。”\n\n---\n\n&emsp;&emsp;**夏至**&emsp;「允许我这一次片刻逃离　偶尔也试着用背影　去面对未来不确定」", "description": "&emsp;&emsp;为了鉴定摩柯是不是在做噩梦，请你来解决黑板上的一道简单的数学问题吧！\n\n&emsp;&emsp;令积性函数 $f(n)$ 满足 $f(p^c)=p^{\\gcd(c,k)}$，其中 $k$ 为给定常数，$p$ 为素数，$c$ 为正整数。现在，给定 $n,m,k$，请求出\n$$\n\\left(\\sum_{i=1}^n\\sum_{j=1}^mf(i\\cdot j)\\right)\\bmod(10^9+7).\n$$\n\n&emsp;&emsp;对于积性函数的定义，请参考「题意解释」。\n", "inputFormat": "输入只有一行包含三个整数，分别表示 $n,m,k$。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模后的值。", "hint": "#### 题意解释\n\n&emsp;&emsp;对于数论函数 $f(n)$ 和任意两个互素的正整数 $x,y$，若恒有 $f(xy)=f(x)f(y)$，则称 $f(n)$ 为积性函数。\n\n&emsp;&emsp;当已知积性函数 $f(n)$ 在所有素数幂处的取值时，我们可以计算任意正整数的函数值。具体地，对于 $n>1$，设 $n$ 的**唯一分解**形式为 $n=p_1^{\\alpha_1}p_2^{\\alpha_2}\\cdots p_k^{\\alpha_k}$，则有 $f(n)=f(p_1^{\\alpha_1})f(p_2^{\\alpha_2})\\cdots f(p_k^{\\alpha_k})$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，$1\\le m\\le 10^{10}$，$1\\le k\\le 10^{9}$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |        $n$         |      $m$      |     $k$      | 子任务分值 |\n| :--------: | :----------------: | :-----------: | :----------: | :--------: |\n|    $1$     |     $\\le 10^3$     |  $\\le 10^3$   | $\\le 10^{3}$ |    $5$     |\n|    $2$     |        $=1$        | $\\le 10^{10}$ |  $\\le 10^9$  |    $15$    |\n|    $3$     |     $\\le 10^5$     |  $\\le 10^5$   |  $\\le 10^9$  |    $15$    |\n|    $4$     |     $\\le 500$      |  $\\le 10^9$   |  $\\le 10^9$  |    $10$    |\n|    $5$     |     $\\le10^5$      | $\\le 10^{10}$ |     $=1$     |    $15$    |\n|    $6$     | $\\le 5\\times 10^3$ |  $\\le 10^9$   |  $\\le 10^9$  |    $15$    |\n|    $7$     | $\\le 5\\times 10^4$ |  $\\le 10^8$   |  $\\le 10^9$  |    $15$    |\n|    $8$     |     $\\le 10^5$     | $\\le 10^{10}$ |  $\\le 10^9$  |    $10$    |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」夏至", "background": "&emsp;&emsp;「柳庭风静人眠昼，昼眠人静风庭柳」\n\n---\n\n&emsp;&emsp;老 V 说为大家准备了特别的粽子，所以天依来了；\n\n&emsp;&emsp;天依来了，所以阿绫来了；\n\n&emsp;&emsp;阿绫来了，龙牙也不敢不来；\n\n&emsp;&emsp;到了快一半了，于是剩下的大家都来了……\n\n&emsp;&emsp;所以，为什么要在模拟演出训练结束后来补文化课啊！\n\n&emsp;&emsp;“天依，这数学老师真的在讲数学？”\n\n&emsp;&emsp;“摩柯，我和阿绫就靠你了！”天依戳戳前排摩柯的肩膀。\n\n&emsp;&emsp;“要推出来了，要推出来了……”，摩柯大概是第一次把草稿纸写得快满，“我知道我很急，但我先别急……这像是在做噩梦一样。”\n\n---\n\n&emsp;&emsp;**夏至**&emsp;「允许我这一次片刻逃离　偶尔也试着用背影　去面对未来不确定」", "description": "&emsp;&emsp;为了鉴定摩柯是不是在做噩梦，请你来解决黑板上的一道简单的数学问题吧！\n\n&emsp;&emsp;令积性函数 $f(n)$ 满足 $f(p^c)=p^{\\gcd(c,k)}$，其中 $k$ 为给定常数，$p$ 为素数，$c$ 为正整数。现在，给定 $n,m,k$，请求出\n$$\n\\left(\\sum_{i=1}^n\\sum_{j=1}^mf(i\\cdot j)\\right)\\bmod(10^9+7).\n$$\n\n&emsp;&emsp;对于积性函数的定义，请参考「题意解释」。\n", "inputFormat": "输入只有一行包含三个整数，分别表示 $n,m,k$。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模后的值。", "hint": "#### 题意解释\n\n&emsp;&emsp;对于数论函数 $f(n)$ 和任意两个互素的正整数 $x,y$，若恒有 $f(xy)=f(x)f(y)$，则称 $f(n)$ 为积性函数。\n\n&emsp;&emsp;当已知积性函数 $f(n)$ 在所有素数幂处的取值时，我们可以计算任意正整数的函数值。具体地，对于 $n>1$，设 $n$ 的**唯一分解**形式为 $n=p_1^{\\alpha_1}p_2^{\\alpha_2}\\cdots p_k^{\\alpha_k}$，则有 $f(n)=f(p_1^{\\alpha_1})f(p_2^{\\alpha_2})\\cdots f(p_k^{\\alpha_k})$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5$，$1\\le m\\le 10^{10}$，$1\\le k\\le 10^{9}$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |        $n$         |      $m$      |     $k$      | 子任务分值 |\n| :--------: | :----------------: | :-----------: | :----------: | :--------: |\n|    $1$     |     $\\le 10^3$     |  $\\le 10^3$   | $\\le 10^{3}$ |    $5$     |\n|    $2$     |        $=1$        | $\\le 10^{10}$ |  $\\le 10^9$  |    $15$    |\n|    $3$     |     $\\le 10^5$     |  $\\le 10^5$   |  $\\le 10^9$  |    $15$    |\n|    $4$     |     $\\le 500$      |  $\\le 10^9$   |  $\\le 10^9$  |    $10$    |\n|    $5$     |     $\\le10^5$      | $\\le 10^{10}$ |     $=1$     |    $15$    |\n|    $6$     | $\\le 5\\times 10^3$ |  $\\le 10^9$   |  $\\le 10^9$  |    $15$    |\n|    $7$     | $\\le 5\\times 10^4$ |  $\\le 10^8$   |  $\\le 10^9$  |    $15$    |\n|    $8$     |     $\\le 10^5$     | $\\le 10^{10}$ |  $\\le 10^9$  |    $10$    |\n\n", "locale": "zh-CN"}}}
{"pid": "P9158", "type": "P", "difficulty": 7, "samples": [["5 10\n2 10 1 10 3\n1 2 3 2\n2 1 3\n1 3\n1 5\n2 3 5\n2 3 2\n1 5\n2 5 6\n1 3\n2 5 -1\n2 3 0", "10\n3\n3\n10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "洛谷原创", "O2优化", "树链剖分", "动态树 LCT", "洛谷月赛"], "title": "「GLR-R4」小暑", "background": "&emsp;&emsp;「长养薰风拂晓吹，浅开荷芰落蔷薇」\n\n---\n\n&emsp;&emsp;在校内的最后一次试演出！\n\n&emsp;&emsp;从[第一次登台](https://www.luogu.com.cn/problem/P7245)至今，从以往约定的放学后空无一人的操场到如今日夜挥汗的训练室，他们与彼此的约定是否改变呢？\n\n&emsp;&emsp;“肩上的吉他和小小梦想，要为它们长出坚强的翅膀！”\n\n---\n\n&emsp;&emsp;**小暑**&emsp;「Can you hear me now?　我会从此成为你的骄傲　现在就要出发　一切刚刚好」", "description": "&emsp;&emsp;[还记得吗？](https://www.luogu.com.cn/problem/P8476)你可是天依他们的专业分析师。除了演出者的表现，观众们的情感波动也是重要的分析对象。经过不懈努力，你提出了以下这些指标（出题人已经被你消灭啦，但还是请你耐心读题）：\n\n&emsp;&emsp;「情绪」&emsp;我们用强烈度 $v\\in\\mathbb N^\\star$ 来表达一个情绪。\n\n&emsp;&emsp;「心境」&emsp;一系列情绪共同组成一个心境，我们将心境描述为一个二元组 $M=(s,f)$，其中 $s,f\\in\\mathbb N^\\star$，其中 $s$ 为所含情绪的强烈度之和，$f$ 为某个特征情绪的强烈度。\n\n&emsp;&emsp;「共鸣」&emsp;两个心境可以通过共鸣而融合得到新的心境。我们将 $M_2=(s_2,f_2)$ 融合向 $M_1=(s_1,f_1)$ 的共鸣记作 $M_1+M_2$，共鸣的结果是一个新的心境 $M=M_1+M_2=(s_1+s_2,f_1)$。注意此时**不一定满足** $M_1+M_2=M_2+M_1$。\n\n&emsp;&emsp;「心路」&emsp;在一棵有根树上，沿**树形关系**共鸣心境的过程称为心路。对于以 $r$ 为根的子树，其心路历程可以描述如下：\n\n1.  初始时，$A_r\\gets M_r$，其中 $A_x$ 表示以 $x$ 为根的子树心路完成后的最终心境，$M_x$ 为 $x$ 结点上的初始心境。\n\n2.  **按编号升序地**枚举 $r$ 的孩子结点 $x$：\n\n    -   递归完成 $x$ 子树的心路，得到 $A_x$。此时，设 $A_r=(s_r,f_r)$，$A_x=(s_x,f_x)$。\n\n    -   若 $s_r\\ge s_x$，则令 $A_r\\gets A_r+A_x$，否则令 $A_r\\gets A_x+A_r$。\n\n&emsp;&emsp;最终的 $A_r$ 即为以 $r$ 为根的子树心路完成后的最终心境。\n\n---\n\n&emsp;&emsp;为研究特定观众的心理变化情况，你需要时刻监控其上述指标。现给定一棵含有 $n$ 个结点，以 $1$ 为根结点的有根树，结点 $x$ 上初始有心境 $M_x=(a_x,a_x)$。此后进行 $q$ 次操作，每次操作有以下两类：\n\n1.  给出结点 $x$，询问 $A_x=(s_x,f_x)$ 中 $f_x$ 的值，其中 $A_x$ 应当在每次询问时，依据当前的信息重新计算。\n\n2.  给出结点 $x$ 和变化量 $d$，令 $a_x\\gets a_x+d$，并修改对应的 $M_x$。注意 $d$ **可能为负数**，但保证操作前后都有 $a_x>0$。\n\n&emsp;&emsp;请你对于每个询问操作，计算出相应的答案。", "inputFormat": "第一行两个整数 $n,q$，分别表示树的大小和操作次数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，其中 $a_i$ 表示结点 $i$ 的初始权值。\n\n第三行 $n-1$ 个整数 $p_2,p_3,\\cdots,p_n$，其中 $p_i$ 表示以结点 $1$ 为根时，结点 $i$ 的父亲。\n\n接下来 $q$ 行，每行格式形如 `1 x` 或 `2 x d`，分别对应题目描述中的两种操作。", "outputFormat": "对于每个类型为 $1$ 的操作，输出一行一个整数，表示所求答案。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le2\\times10^5$，$1\\le p_i<i$；操作给出的 $x\\in[1,n]$，$d\\in[-10^{18},10^{18}]$；在任意时刻 $a_x\\ge 1$ 且 $\\sum_{x=1}^na_x\\le10^{18}$。\n\n对于不同的子任务，作如下约定：\n\n|   子任务编号    |   $n$    |  $q$  | 特殊性质 | 子任务分值 |\n| :---------: | :--------: | :----:  | :----: | :-: |\n|  $1$  |  $\\leq 10 ^ 3$  | $\\leq 10 ^ 3$  | 无 | $10$|\n|  $2$  | $\\leq 2 \\times 10 ^ 5$ | $\\leq 2 \\times 10 ^ 5$ | $\\textbf A$| $20$|\n|  $3$  | $\\le 2 \\times 10 ^ 5$ | $\\le 2 \\times 10 ^ 5$| $\\textbf B$ | $20$|\n|  $4$  | $\\le 2 \\times 10 ^ 5$ | $\\leq 2 \\times 10 ^ 5$ | 无 | $50$|\n\n- 特殊性质 $\\textbf A$：对于 $i\\in[2,n]$，$p_i=i-1$。\n\n- 特殊性质 $\\textbf B$：保证当 $1$ 为根时，原树是一棵二叉树。且对于 $i\\in[2,n]$，存在一条从 $1$ 到 $i$，经过边数不超过 $20$ 的树上路径。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」小暑", "background": "&emsp;&emsp;「长养薰风拂晓吹，浅开荷芰落蔷薇」\n\n---\n\n&emsp;&emsp;在校内的最后一次试演出！\n\n&emsp;&emsp;从[第一次登台](https://www.luogu.com.cn/problem/P7245)至今，从以往约定的放学后空无一人的操场到如今日夜挥汗的训练室，他们与彼此的约定是否改变呢？\n\n&emsp;&emsp;“肩上的吉他和小小梦想，要为它们长出坚强的翅膀！”\n\n---\n\n&emsp;&emsp;**小暑**&emsp;「Can you hear me now?　我会从此成为你的骄傲　现在就要出发　一切刚刚好」", "description": "&emsp;&emsp;[还记得吗？](https://www.luogu.com.cn/problem/P8476)你可是天依他们的专业分析师。除了演出者的表现，观众们的情感波动也是重要的分析对象。经过不懈努力，你提出了以下这些指标（出题人已经被你消灭啦，但还是请你耐心读题）：\n\n&emsp;&emsp;「情绪」&emsp;我们用强烈度 $v\\in\\mathbb N^\\star$ 来表达一个情绪。\n\n&emsp;&emsp;「心境」&emsp;一系列情绪共同组成一个心境，我们将心境描述为一个二元组 $M=(s,f)$，其中 $s,f\\in\\mathbb N^\\star$，其中 $s$ 为所含情绪的强烈度之和，$f$ 为某个特征情绪的强烈度。\n\n&emsp;&emsp;「共鸣」&emsp;两个心境可以通过共鸣而融合得到新的心境。我们将 $M_2=(s_2,f_2)$ 融合向 $M_1=(s_1,f_1)$ 的共鸣记作 $M_1+M_2$，共鸣的结果是一个新的心境 $M=M_1+M_2=(s_1+s_2,f_1)$。注意此时**不一定满足** $M_1+M_2=M_2+M_1$。\n\n&emsp;&emsp;「心路」&emsp;在一棵有根树上，沿**树形关系**共鸣心境的过程称为心路。对于以 $r$ 为根的子树，其心路历程可以描述如下：\n\n1.  初始时，$A_r\\gets M_r$，其中 $A_x$ 表示以 $x$ 为根的子树心路完成后的最终心境，$M_x$ 为 $x$ 结点上的初始心境。\n\n2.  **按编号升序地**枚举 $r$ 的孩子结点 $x$：\n\n    -   递归完成 $x$ 子树的心路，得到 $A_x$。此时，设 $A_r=(s_r,f_r)$，$A_x=(s_x,f_x)$。\n\n    -   若 $s_r\\ge s_x$，则令 $A_r\\gets A_r+A_x$，否则令 $A_r\\gets A_x+A_r$。\n\n&emsp;&emsp;最终的 $A_r$ 即为以 $r$ 为根的子树心路完成后的最终心境。\n\n---\n\n&emsp;&emsp;为研究特定观众的心理变化情况，你需要时刻监控其上述指标。现给定一棵含有 $n$ 个结点，以 $1$ 为根结点的有根树，结点 $x$ 上初始有心境 $M_x=(a_x,a_x)$。此后进行 $q$ 次操作，每次操作有以下两类：\n\n1.  给出结点 $x$，询问 $A_x=(s_x,f_x)$ 中 $f_x$ 的值，其中 $A_x$ 应当在每次询问时，依据当前的信息重新计算。\n\n2.  给出结点 $x$ 和变化量 $d$，令 $a_x\\gets a_x+d$，并修改对应的 $M_x$。注意 $d$ **可能为负数**，但保证操作前后都有 $a_x>0$。\n\n&emsp;&emsp;请你对于每个询问操作，计算出相应的答案。", "inputFormat": "第一行两个整数 $n,q$，分别表示树的大小和操作次数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，其中 $a_i$ 表示结点 $i$ 的初始权值。\n\n第三行 $n-1$ 个整数 $p_2,p_3,\\cdots,p_n$，其中 $p_i$ 表示以结点 $1$ 为根时，结点 $i$ 的父亲。\n\n接下来 $q$ 行，每行格式形如 `1 x` 或 `2 x d`，分别对应题目描述中的两种操作。", "outputFormat": "对于每个类型为 $1$ 的操作，输出一行一个整数，表示所求答案。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le2\\times10^5$，$1\\le p_i<i$；操作给出的 $x\\in[1,n]$，$d\\in[-10^{18},10^{18}]$；在任意时刻 $a_x\\ge 1$ 且 $\\sum_{x=1}^na_x\\le10^{18}$。\n\n对于不同的子任务，作如下约定：\n\n|   子任务编号    |   $n$    |  $q$  | 特殊性质 | 子任务分值 |\n| :---------: | :--------: | :----:  | :----: | :-: |\n|  $1$  |  $\\leq 10 ^ 3$  | $\\leq 10 ^ 3$  | 无 | $10$|\n|  $2$  | $\\leq 2 \\times 10 ^ 5$ | $\\leq 2 \\times 10 ^ 5$ | $\\textbf A$| $20$|\n|  $3$  | $\\le 2 \\times 10 ^ 5$ | $\\le 2 \\times 10 ^ 5$| $\\textbf B$ | $20$|\n|  $4$  | $\\le 2 \\times 10 ^ 5$ | $\\leq 2 \\times 10 ^ 5$ | 无 | $50$|\n\n- 特殊性质 $\\textbf A$：对于 $i\\in[2,n]$，$p_i=i-1$。\n\n- 特殊性质 $\\textbf B$：保证当 $1$ 为根时，原树是一棵二叉树。且对于 $i\\in[2,n]$，存在一条从 $1$ 到 $i$，经过边数不超过 $20$ 的树上路径。", "locale": "zh-CN"}}}
{"pid": "P9159", "type": "P", "difficulty": 7, "samples": [["3", "384"], ["4", "40344945"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「GLR-R4」大暑", "background": "&emsp;&emsp;「时见疏星落画檐，几点流萤小」\n\n---\n\n&emsp;&emsp;全国音乐祭，在天依一行人抵达之时，芙城早已翻涌这狂欢的气氛，汇聚于此的某些紧张青年人们倒显得有些格格不入。\n\n&emsp;&emsp;“总之，这里一定是终点站吧。”\n\n&emsp;&emsp;排练又一次随着弦音结束。又开始，结束。\n\n&emsp;&emsp;“阿绫，我们出去走走吧。”\n\n---\n\n&emsp;&emsp;**大暑**&emsp;「为所有视线涂抹上　一片蔚蓝的颜色　融化了苦涩」", "description": "&emsp;&emsp;“阿绫，你看这宣传册上这幅画，好奇怪呀。”\n\n&emsp;&emsp;在宣传册中“融艺术与科技为一体”的巨幅画作的制作过程如下：\n\n&emsp;&emsp;首先，工作人员画出 $n!$ 个 $n\\times2$ 的点阵图，任意两个点阵图间互相远离，在后续的制作过程中**互相独立**。对于第 $i$ 个点阵图，令其左下角坐标为 $(0,0)$，该点阵的点集为 $X_i\\cup Y_i$，其中 $X_i=\\{(0,y)\\mid y\\in[0,n)\\cap\\mathbb N\\}$，$Y_i=\\{(1,y)\\mid y\\in[0,n)\\cap\\mathbb N\\}$。\n\n&emsp;&emsp;接着，设集合 $\\Sigma=\\{\\sigma_i\\}_{i=1}^{n!}$ 包含 $\\{0,1,\\dots,n-1\\}$ 的所有 $n$ 阶排列，对于第 $i$ 个点阵图，工作人员将用字典序第 $i$ 小的排列 $\\sigma_i$ 为 $X_i,Y_i$ 连线配对：对于点 $P(0,y)\\in X_i$，作一条线段将其与点 $Q(1,\\sigma_{i,y})\\in Y_i$ 相连。\n\n&emsp;&emsp;最后，是激动人心的上色步骤。对于第 $i$ 个点阵图中的每个 $P(0,y)\\in X_i$，从 $P$ 出发，沿着上一步骤中作出的线段，走**任意线段或折线**，到达 $Y_i$ 中的任意一点，并为这条线段或折线染上第 $y$ 种颜色。此外，为了避免不同颜色混在一起，需要保证，在所有 $n!$ 个点阵图中，被多余一种颜色染过的线段长度之和为 $0$。\n\n&emsp;&emsp;呈现在天依一行人眼前的这幅画的上色明显很敷衍，所以天依想知道到底有多少种可供选择的上色方案。定义两种上色方案不同，当且仅当存在编号 $i\\in[1,n!]$ 和任意一点 $P$，使得两个上色方案各自完成后，第 $i$ 个点阵图中染过点 $P$ 的颜色集合不同。\n\n&emsp;&emsp;你只需要告诉天依答案对 $p=335~544~323$ 取模后的结果。*天依可是为了简化你的计算，精挑细选了一个有趣的模数呢。*\n\n&emsp;&emsp;（请参考样例 #1 解释确认题意。）", "inputFormat": "输入一行一个整数 $n$，表示作画过程的参数。", "outputFormat": "输出一行一个非负整数，表示上色方案数对 $p$ 取模的结果。", "hint": "#### 样例 #1 解释\n\n在完成前两步后，画作的全貌如下。$(A,B,C,D,E,F)$ 构成一组 $n\\times2$ 的点阵图，不同点阵图的相对位置并不重要。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6xaw4brz.png)\n\n以下是一种可供选择的染色方案。红、黄、蓝依次对应第 $0,1,2$ 种颜色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ma3r8yit.png)\n\n#### 样例 #2 解释\n\n答案的真实值为 $996~124~179~980~315~787~264$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$n\\le10^6$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |       $n$        | 子任务分值 |\n| :--------: | :--------------: | :--------: |\n|    $1$     |      $\\le9$      |    $10$    |\n|    $2$     |     $\\le100$     |    $10$    |\n|    $3$     |     $\\le500$     |    $15$    |\n|    $4$     | $\\le5\\times10^3$ |    $20$    |\n|    $5$     |    $\\le10^5$     |    $20$    |\n|    $6$     |    $\\le10^6$     |    $25$    |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GLR-R4」大暑", "background": "&emsp;&emsp;「时见疏星落画檐，几点流萤小」\n\n---\n\n&emsp;&emsp;全国音乐祭，在天依一行人抵达之时，芙城早已翻涌这狂欢的气氛，汇聚于此的某些紧张青年人们倒显得有些格格不入。\n\n&emsp;&emsp;“总之，这里一定是终点站吧。”\n\n&emsp;&emsp;排练又一次随着弦音结束。又开始，结束。\n\n&emsp;&emsp;“阿绫，我们出去走走吧。”\n\n---\n\n&emsp;&emsp;**大暑**&emsp;「为所有视线涂抹上　一片蔚蓝的颜色　融化了苦涩」", "description": "&emsp;&emsp;“阿绫，你看这宣传册上这幅画，好奇怪呀。”\n\n&emsp;&emsp;在宣传册中“融艺术与科技为一体”的巨幅画作的制作过程如下：\n\n&emsp;&emsp;首先，工作人员画出 $n!$ 个 $n\\times2$ 的点阵图，任意两个点阵图间互相远离，在后续的制作过程中**互相独立**。对于第 $i$ 个点阵图，令其左下角坐标为 $(0,0)$，该点阵的点集为 $X_i\\cup Y_i$，其中 $X_i=\\{(0,y)\\mid y\\in[0,n)\\cap\\mathbb N\\}$，$Y_i=\\{(1,y)\\mid y\\in[0,n)\\cap\\mathbb N\\}$。\n\n&emsp;&emsp;接着，设集合 $\\Sigma=\\{\\sigma_i\\}_{i=1}^{n!}$ 包含 $\\{0,1,\\dots,n-1\\}$ 的所有 $n$ 阶排列，对于第 $i$ 个点阵图，工作人员将用字典序第 $i$ 小的排列 $\\sigma_i$ 为 $X_i,Y_i$ 连线配对：对于点 $P(0,y)\\in X_i$，作一条线段将其与点 $Q(1,\\sigma_{i,y})\\in Y_i$ 相连。\n\n&emsp;&emsp;最后，是激动人心的上色步骤。对于第 $i$ 个点阵图中的每个 $P(0,y)\\in X_i$，从 $P$ 出发，沿着上一步骤中作出的线段，走**任意线段或折线**，到达 $Y_i$ 中的任意一点，并为这条线段或折线染上第 $y$ 种颜色。此外，为了避免不同颜色混在一起，需要保证，在所有 $n!$ 个点阵图中，被多余一种颜色染过的线段长度之和为 $0$。\n\n&emsp;&emsp;呈现在天依一行人眼前的这幅画的上色明显很敷衍，所以天依想知道到底有多少种可供选择的上色方案。定义两种上色方案不同，当且仅当存在编号 $i\\in[1,n!]$ 和任意一点 $P$，使得两个上色方案各自完成后，第 $i$ 个点阵图中染过点 $P$ 的颜色集合不同。\n\n&emsp;&emsp;你只需要告诉天依答案对 $p=335~544~323$ 取模后的结果。*天依可是为了简化你的计算，精挑细选了一个有趣的模数呢。*\n\n&emsp;&emsp;（请参考样例 #1 解释确认题意。）", "inputFormat": "输入一行一个整数 $n$，表示作画过程的参数。", "outputFormat": "输出一行一个非负整数，表示上色方案数对 $p$ 取模的结果。", "hint": "#### 样例 #1 解释\n\n在完成前两步后，画作的全貌如下。$(A,B,C,D,E,F)$ 构成一组 $n\\times2$ 的点阵图，不同点阵图的相对位置并不重要。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6xaw4brz.png)\n\n以下是一种可供选择的染色方案。红、黄、蓝依次对应第 $0,1,2$ 种颜色。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ma3r8yit.png)\n\n#### 样例 #2 解释\n\n答案的真实值为 $996~124~179~980~315~787~264$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$n\\le10^6$。\n\n对于不同的子任务，作如下约定：\n\n| 子任务编号 |       $n$        | 子任务分值 |\n| :--------: | :--------------: | :--------: |\n|    $1$     |      $\\le9$      |    $10$    |\n|    $2$     |     $\\le100$     |    $10$    |\n|    $3$     |     $\\le500$     |    $15$    |\n|    $4$     | $\\le5\\times10^3$ |    $20$    |\n|    $5$     |    $\\le10^5$     |    $20$    |\n|    $6$     |    $\\le10^6$     |    $25$    |\n", "locale": "zh-CN"}}}
{"pid": "P9160", "type": "P", "difficulty": 2, "samples": [["4\n4 5 1 4", "3 10"], ["6\n1 4 2 8 5 7", "5 19"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "multiset", "background": "ZHY 有很多集合。集合多了，也就成了多重集合。", "description": "给定一个 **多重集合**（集合中元素可重复）$S$，请求出一个最大的多重集合 $T$，满足 $T$ 是 $S$ 的一个 **真子集**，且对于 $T$ 中的每一个元素 $i$，要么 $i$ 在 $S$ 中没有前驱，要么 $i$ 在 $S$ 中的前驱 $\\in T$。若有多个大小相同的集合满足条件，则 $T$ 为所有元素之和最大的一个。请输出 $T$ 的大小和其中元素之和。\n\n---\n\n一个数 $x$ 在一个集合 $S$ 中的前驱的定义为所有在 $S$ 中且 $<x$ 的元素 $y$ 的最大值。", "inputFormat": "第一行一个正整数 $n$，表示 $S$ 的大小。\n\n第二行 $n$ 个正整数，表示 $S$ 中的元素。", "outputFormat": "一行两个整数。第一个数表示 $T$ 的大小，第二个数表示 $T$ 的所有元素之和。", "hint": "**样例 $1$ 解释**\n\n$T$ 为 $\\{5,1,4\\}$。\n\n**样例 $2$ 解释**\n\n$T$ 为 $\\{1,4,2,5,7\\}$。\n\n### 数据范围\n\n对于 $30\\%$ 的数据，$n \\le 15$。\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5$，$1 \\le S$ 中的元素 $\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "multiset", "background": "ZHY 有很多集合。集合多了，也就成了多重集合。", "description": "给定一个 **多重集合**（集合中元素可重复）$S$，请求出一个最大的多重集合 $T$，满足 $T$ 是 $S$ 的一个 **真子集**，且对于 $T$ 中的每一个元素 $i$，要么 $i$ 在 $S$ 中没有前驱，要么 $i$ 在 $S$ 中的前驱 $\\in T$。若有多个大小相同的集合满足条件，则 $T$ 为所有元素之和最大的一个。请输出 $T$ 的大小和其中元素之和。\n\n---\n\n一个数 $x$ 在一个集合 $S$ 中的前驱的定义为所有在 $S$ 中且 $<x$ 的元素 $y$ 的最大值。", "inputFormat": "第一行一个正整数 $n$，表示 $S$ 的大小。\n\n第二行 $n$ 个正整数，表示 $S$ 中的元素。", "outputFormat": "一行两个整数。第一个数表示 $T$ 的大小，第二个数表示 $T$ 的所有元素之和。", "hint": "**样例 $1$ 解释**\n\n$T$ 为 $\\{5,1,4\\}$。\n\n**样例 $2$ 解释**\n\n$T$ 为 $\\{1,4,2,5,7\\}$。\n\n### 数据范围\n\n对于 $30\\%$ 的数据，$n \\le 15$。\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5$，$1 \\le S$ 中的元素 $\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9161", "type": "P", "difficulty": 4, "samples": [["3 1\n1 2\n2 3", "5"], ["5 2\n1 2\n1 3\n2 4\n2 5", "103"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "O2优化", "树形 DP"], "title": "Trees", "background": "ZHY 有很多树，每个树上都有很多点，每个点上都有一个数，但他忘记了每个点上写的数是什么了。", "description": "ZHY 拥有 $m$ 棵树，每棵树形态相同，且均有 $n$ 个点。定义 $(i,j)$ 是第 $i$ 棵树上的第 $j$ 个点，你需要为每个点 $(i,j)$ 赋一个值 $a_{(i,j)}$，且满足以下条件：\n\n- 对于 $\\forall i \\in [1,m],\\forall j \\in [1,n]$，有 $a_{(i,j)}\\in\\{0,1\\}$。\n\n- 对于 $\\forall i \\in [1,n]$，有 $\\sum_{j=1}^m a_{(j,i)}\\le 1$。\n\n- 对于任意的一条边 $(u,v)$ 和 $i \\in [1,m]$，有 $a_{(i,u)}+a_{(i,v)}\\le 1$。\n\n请你计算有多少种赋值方式，对 $10^9+7$ 取模。注意这 $m$ 棵树是有序的。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示这 $m$ 棵树中每棵树都有一条从 $u$ 到 $v$ 的无向边。保证数据可以构成一棵树。", "outputFormat": "输出一行表示答案。", "hint": "**本题使用捆绑数据。**\n\n对于所有的数据，$1 \\le n \\le 10^6$，$1 \\le m \\le 10^9$。\n\n- Subtask 0（10 pts）：$n,m \\le 4$。\n- Subtask 1（30 pts）：$n,m \\le 10^3$。\n- Subtask 2（15 pts）：$n \\le 10^3$。\n- Subtask 3（25 pts）：$m=1$。\n- Subtask 4（20 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Trees", "background": "ZHY 有很多树，每个树上都有很多点，每个点上都有一个数，但他忘记了每个点上写的数是什么了。", "description": "ZHY 拥有 $m$ 棵树，每棵树形态相同，且均有 $n$ 个点。定义 $(i,j)$ 是第 $i$ 棵树上的第 $j$ 个点，你需要为每个点 $(i,j)$ 赋一个值 $a_{(i,j)}$，且满足以下条件：\n\n- 对于 $\\forall i \\in [1,m],\\forall j \\in [1,n]$，有 $a_{(i,j)}\\in\\{0,1\\}$。\n\n- 对于 $\\forall i \\in [1,n]$，有 $\\sum_{j=1}^m a_{(j,i)}\\le 1$。\n\n- 对于任意的一条边 $(u,v)$ 和 $i \\in [1,m]$，有 $a_{(i,u)}+a_{(i,v)}\\le 1$。\n\n请你计算有多少种赋值方式，对 $10^9+7$ 取模。注意这 $m$ 棵树是有序的。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示这 $m$ 棵树中每棵树都有一条从 $u$ 到 $v$ 的无向边。保证数据可以构成一棵树。", "outputFormat": "输出一行表示答案。", "hint": "**本题使用捆绑数据。**\n\n对于所有的数据，$1 \\le n \\le 10^6$，$1 \\le m \\le 10^9$。\n\n- Subtask 0（10 pts）：$n,m \\le 4$。\n- Subtask 1（30 pts）：$n,m \\le 10^3$。\n- Subtask 2（15 pts）：$n \\le 10^3$。\n- Subtask 3（25 pts）：$m=1$。\n- Subtask 4（20 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9162", "type": "P", "difficulty": 6, "samples": [["3\n2 1 3", "80"], ["4\n4 1 3 2", "1244"], ["5\n1 2 3 2 1", "444"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "variance", "background": "", "description": "给定序列 $a_1,a_2,\\cdots,a_n$，定义 $f(l,r)=(a_l\\oplus a_{l+1}\\oplus \\cdots \\oplus a_r)+(a_l\\vee a_{l+1}\\vee \\cdots \\vee a_r)$，其中 $\\oplus$ 表示 **按位异或** 运算，$\\vee$ 表示 **按位或** 运算。\n\n你需要求出所有满足 $1\\le l \\le r \\le n$ 的 $f(l,r)$ 的方差 $v$。为避免精度误差，以及答案可能很大，请输出 $(v\\times \\frac{n^2\\times (n+1)^2}{4}) \\kern{3pt}\\mathrm {mod}\\kern{3pt} 998244353$。\n\n**注意：运算过程中不取模，仅将结果取模。**", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "输出一个整数 $(v\\times \\frac{n^2\\times (n+1)^2}{4}) \\kern{3pt}\\mathrm {mod}\\kern{3pt} 998244353$。", "hint": "方差的定义：对于 $n$ 个数 $a_1,a_2,\\cdots,a_n$，它们的方差是：\n\n$$\n\\frac 1 n\\sum_{i=1}^n (a_i-\\bar{a})^2\n$$\n\n其中 $\\bar{a}$ 为 $a_1,a_2,\\cdots,a_n$ 的平均数，即 $\\dfrac {1} {n} \\displaystyle\\sum\\limits_{i=1}^n a_i$。\n\n----\n\n对于 $10\\%$ 的数据，$n \\le 50$。\n\n对于 $30\\%$ 的数据，$n \\le 5000$。\n\n对于另 $20\\%$ 的数据，$a_i \\le 100$。  \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5,1\\le a_i < 2^{31}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "variance", "background": "", "description": "给定序列 $a_1,a_2,\\cdots,a_n$，定义 $f(l,r)=(a_l\\oplus a_{l+1}\\oplus \\cdots \\oplus a_r)+(a_l\\vee a_{l+1}\\vee \\cdots \\vee a_r)$，其中 $\\oplus$ 表示 **按位异或** 运算，$\\vee$ 表示 **按位或** 运算。\n\n你需要求出所有满足 $1\\le l \\le r \\le n$ 的 $f(l,r)$ 的方差 $v$。为避免精度误差，以及答案可能很大，请输出 $(v\\times \\frac{n^2\\times (n+1)^2}{4}) \\kern{3pt}\\mathrm {mod}\\kern{3pt} 998244353$。\n\n**注意：运算过程中不取模，仅将结果取模。**", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "输出一个整数 $(v\\times \\frac{n^2\\times (n+1)^2}{4}) \\kern{3pt}\\mathrm {mod}\\kern{3pt} 998244353$。", "hint": "方差的定义：对于 $n$ 个数 $a_1,a_2,\\cdots,a_n$，它们的方差是：\n\n$$\n\\frac 1 n\\sum_{i=1}^n (a_i-\\bar{a})^2\n$$\n\n其中 $\\bar{a}$ 为 $a_1,a_2,\\cdots,a_n$ 的平均数，即 $\\dfrac {1} {n} \\displaystyle\\sum\\limits_{i=1}^n a_i$。\n\n----\n\n对于 $10\\%$ 的数据，$n \\le 50$。\n\n对于 $30\\%$ 的数据，$n \\le 5000$。\n\n对于另 $20\\%$ 的数据，$a_i \\le 100$。  \n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^5,1\\le a_i < 2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P9163", "type": "P", "difficulty": 5, "samples": [["1\n3\n-1 0 2 2 2 0 3 0\n1 2 3 2 1 1 3 1\n1 3 2 3 2 1 -2 0", "No"], ["1\n3\n-1 0 2 0 2 2 3 0\n1 1 3 1 1 2 3 2\n1 3 2 1 2 3 -2 0", "Yes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「INOH」Round 1 - 纽结", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/edc1559k.png)  \n\n上图是两个结的平面投影图。  \n\n我们发现一个结可以由基本的重叠点描述，并且每一个重叠点都是二重点。  \n\n也就是说我们可以用**一个点表示重叠点，重叠点之间用不同属性的边来连接**。  \n\n可以发现**一个点有四个出口，出口与出口相连**，这四条中有**两条在上，两条在下**。  \n\n我们用一个二元组 $(u,d)$ 表示这样一个出口。  \n\n其中 $u$ 为这个点，$d \\in [ 0, 3 ] $，同时**钦定 $0$ 和 $1$ 为两条上边，$2$ 和 $3$ 为两条下边**。  \n\n又发现一个结有两端，这两端一定可以与外界相连，为了方便，用 **$(-1,0)$ 和 $(-2,0)$ 表示这两端**。  \n\n现在给您一个这样的结，您需要回答，当我们手捏两端，然后用力拉，这是个活结还是死结？  \n\n如果是活结请输出 `Yes`，如果是死结请输出 `No`。\n", "inputFormat": "第一行为数据组数 $T$。\n\n每组数据第一行 $n$，表示结点数。\n\n之后 $n$ 行，第 $i$ 行有 $ u_0, d_0, u_1, d_1, u_2, d_2, u_3, d_3 $ 共八个数分别为第 $i$ 个点的 $0$ 到 $3$ 号出口连向的对应出口。\n\n第 $i$ 行的第 0 组 $(u_0,d_0)$ 指第 $i$ 个点的 $0$ 号出口与第 $u_0$ 个点的 $d_0$ 号出口相连，以此类推。", "outputFormat": "一共 $T$ 行，每行为 `Yes` 或 `No`。", "hint": "### 数据范围\n**本题采用捆绑测试**。  \n- Subtask 0（20pts）：$T = 3$，$1 \\le n \\le 10$。  \n- Subtask 1（20pts）：$T = 10^3$，$1 \\le n \\le 10$。  \n- Subtask 2（10pts）：$T = 10$，$1 \\le n \\le 10^5$，且保证数据随机生成。  \n- Subtask 3（50pts）：$T = 10$，$1 \\le n \\le 10^5$。  \n\n### 样例解释：\n\n样例一为左图，它是死结。\n\n样例二为右图，它是活结。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zkq4wmsn.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「INOH」Round 1 - 纽结", "background": "", "description": "![](https://cdn.luogu.com.cn/upload/image_hosting/edc1559k.png)  \n\n上图是两个结的平面投影图。  \n\n我们发现一个结可以由基本的重叠点描述，并且每一个重叠点都是二重点。  \n\n也就是说我们可以用**一个点表示重叠点，重叠点之间用不同属性的边来连接**。  \n\n可以发现**一个点有四个出口，出口与出口相连**，这四条中有**两条在上，两条在下**。  \n\n我们用一个二元组 $(u,d)$ 表示这样一个出口。  \n\n其中 $u$ 为这个点，$d \\in [ 0, 3 ] $，同时**钦定 $0$ 和 $1$ 为两条上边，$2$ 和 $3$ 为两条下边**。  \n\n又发现一个结有两端，这两端一定可以与外界相连，为了方便，用 **$(-1,0)$ 和 $(-2,0)$ 表示这两端**。  \n\n现在给您一个这样的结，您需要回答，当我们手捏两端，然后用力拉，这是个活结还是死结？  \n\n如果是活结请输出 `Yes`，如果是死结请输出 `No`。\n", "inputFormat": "第一行为数据组数 $T$。\n\n每组数据第一行 $n$，表示结点数。\n\n之后 $n$ 行，第 $i$ 行有 $ u_0, d_0, u_1, d_1, u_2, d_2, u_3, d_3 $ 共八个数分别为第 $i$ 个点的 $0$ 到 $3$ 号出口连向的对应出口。\n\n第 $i$ 行的第 0 组 $(u_0,d_0)$ 指第 $i$ 个点的 $0$ 号出口与第 $u_0$ 个点的 $d_0$ 号出口相连，以此类推。", "outputFormat": "一共 $T$ 行，每行为 `Yes` 或 `No`。", "hint": "### 数据范围\n**本题采用捆绑测试**。  \n- Subtask 0（20pts）：$T = 3$，$1 \\le n \\le 10$。  \n- Subtask 1（20pts）：$T = 10^3$，$1 \\le n \\le 10$。  \n- Subtask 2（10pts）：$T = 10$，$1 \\le n \\le 10^5$，且保证数据随机生成。  \n- Subtask 3（50pts）：$T = 10$，$1 \\le n \\le 10^5$。  \n\n### 样例解释：\n\n样例一为左图，它是死结。\n\n样例二为右图，它是活结。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zkq4wmsn.png)", "locale": "zh-CN"}}}
{"pid": "P9164", "type": "P", "difficulty": 6, "samples": [["5\n11221", "200"], ["13\n1122121212212", "400201782"]], "limits": {"time": [2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333, 2333], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "「INOH」Round 1 - 狂气", "background": "", "description": "有一个无限长的序列 $\\{a\\}$，**数组下标从 $1$ 开始**，初始 $a_1=1$，其余位置均为 $0$。\n\n$m$ 次操作：\n1. 对于所有**奇数** $i$，令 $a_{i+1}\\gets a_{i+1}+a_i$。\n2. 对于所有**偶数** $i$，令 $a_{i+1}\\gets a_{i+1}+a_i$。\n\n你需要求出所有操作进行完之后的序列。\n\n为了方便输出，你只需要输出 $( \\displaystyle\\prod_{i = 1}^{m} (a_i + 1))\\bmod 998244353$ 的值即可。  ", "inputFormat": "第一行一个正整数 $m$。\n\n第二行一个长度为 $m$ 的字符串，表示操作序列。  ", "outputFormat": "一行，表示 $( \\displaystyle\\prod_{i = 1}^{m} (a_i + 1)) \\bmod 998244353$ 的值。  ", "hint": "**样例 1 解释**  \n\n经过 5 次操作之后，序列前五项：  \n$a_1 = 1$，$a_2 = 3$，$a_3 = 4$，$a_4 = 4$，$a_5 = 0$。\n\n**本题采用捆绑测试**。 \n\n- Subtask 0（10pts）：$1 \\le m \\le 1000$。  \n- Subtask 1（20pts）：操作序列形如 $\\tt121212\\dots$。\n- Subtask 2（20pts）：操作序列随机生成。  \n- Subtask 3（50pts）：无特殊限制。  \n\n对于 $100\\%$ 的数据，有 $1 \\le m \\le 2 \\times 10^5$。  \n\n**请选手注意常数因子对运行效率的影响**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「INOH」Round 1 - 狂气", "background": "", "description": "有一个无限长的序列 $\\{a\\}$，**数组下标从 $1$ 开始**，初始 $a_1=1$，其余位置均为 $0$。\n\n$m$ 次操作：\n1. 对于所有**奇数** $i$，令 $a_{i+1}\\gets a_{i+1}+a_i$。\n2. 对于所有**偶数** $i$，令 $a_{i+1}\\gets a_{i+1}+a_i$。\n\n你需要求出所有操作进行完之后的序列。\n\n为了方便输出，你只需要输出 $( \\displaystyle\\prod_{i = 1}^{m} (a_i + 1))\\bmod 998244353$ 的值即可。  ", "inputFormat": "第一行一个正整数 $m$。\n\n第二行一个长度为 $m$ 的字符串，表示操作序列。  ", "outputFormat": "一行，表示 $( \\displaystyle\\prod_{i = 1}^{m} (a_i + 1)) \\bmod 998244353$ 的值。  ", "hint": "**样例 1 解释**  \n\n经过 5 次操作之后，序列前五项：  \n$a_1 = 1$，$a_2 = 3$，$a_3 = 4$，$a_4 = 4$，$a_5 = 0$。\n\n**本题采用捆绑测试**。 \n\n- Subtask 0（10pts）：$1 \\le m \\le 1000$。  \n- Subtask 1（20pts）：操作序列形如 $\\tt121212\\dots$。\n- Subtask 2（20pts）：操作序列随机生成。  \n- Subtask 3（50pts）：无特殊限制。  \n\n对于 $100\\%$ 的数据，有 $1 \\le m \\le 2 \\times 10^5$。  \n\n**请选手注意常数因子对运行效率的影响**", "locale": "zh-CN"}}}
{"pid": "P9165", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [5000, 5000, 5000], "memory": [2048, 2048, 2048]}, "tags": ["交互题", "Special Judge", "O2优化", "通信题"], "title": "「INOH」Round 1 - 意外", "background": "**这是一道通信题。**\n\n**由于一些原因，本题有特殊的时空限制，且只有三个测试点。**\n\n**您的得分是三个测试点得分的最小值。**\n\n**请选手注意不要用 `C++14 (GCC 9)` 提交。**", "description": "通信中的意外是不可避免的。\n\nA 程序从交互程序获得一个长度为 $10^2$ 的数组，其元素值域为 $ \\lbrack 0, 998244353 ) $，A 程序对其进行编码，即 `Encode` 操作，生成一个长度任意，元素值域为 $\\lbrack 0, 998244353 )$ 的数组，然后将其返回给交互程序。\n\n交互程序会对编码生成的数组进行如下操作：\n\n- 对于每一个元素，有 $50\\%$ 概率，将其赋成在 $ \\lbrack 0, 998244353 ) $ 内的一个随机的数，有 $50\\%$ 概率不变。\n\n之后 B 程序会从交互程序获得操作后的数组，B 程序需要对其进行解码，即 `Decode` 操作，根据数组信息还原出最初 A 程序从交互程序获得的数组。\n\n### 实现细节\n\n由于无法实现通信，本题以交互的形式运行。\n\n你不需要，也不应该实现主函数，你只需要实现下面两个函数\n\n1. `vector <int> Encode ( vector <int> vec );`\n- 该函数传入一个长度为 $10^2$ 的 `vector`，返回一个任意长度的 `vector`。\n2. `vector <int> Decode ( vector <int> vec );`\n- 该函数传入一个任意长度的 `vector`，返回一个长度为 $10^2$ 的 `vector`。\n\n**交互库会调用 `Encode` 不超过 $3 \\times 10^4$ 次，调用 `Decode` 不超过 $1 \\times 10^4$ 次。**  \n\n**下发的交互库**的实现是固定的测试数据组数，随机一个数组，并立即对其 `Encode` 和 `Decode`，即仅用于简单检验程序。  \n\n使用时，你可以**直接将实现好的 `Encode` 和 `Decode` 函数放到交互库代码里**，编译运行即可。\n\n如果交互库输出 `Illegaled operation`，你将获得 $0$ 分。可能的原因包括未还原原数组、返回的数组不合法。\n\n否则交互库会输出一个整数，表示你的分数。\n\n**评测交互库**不一定在 `Encode` 后立即 `Decode`，即可能会先对若干个数组进行编码，再逐一解码。\n\n所有的数应均在 $ \\lbrack 0, 998244353 ) $ 范围内。\n\n### 评分方式\n\n设您 `Encode` 返回的最大长度为 $Len$，则得分为 $ \\min( 100, \\lfloor \\frac{1500}{ \\lceil \\frac{Len}{50} \\rceil } \\rfloor ) $。", "inputFormat": "无", "outputFormat": "无", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「INOH」Round 1 - 意外", "background": "**这是一道通信题。**\n\n**由于一些原因，本题有特殊的时空限制，且只有三个测试点。**\n\n**您的得分是三个测试点得分的最小值。**\n\n**请选手注意不要用 `C++14 (GCC 9)` 提交。**", "description": "通信中的意外是不可避免的。\n\nA 程序从交互程序获得一个长度为 $10^2$ 的数组，其元素值域为 $ \\lbrack 0, 998244353 ) $，A 程序对其进行编码，即 `Encode` 操作，生成一个长度任意，元素值域为 $\\lbrack 0, 998244353 )$ 的数组，然后将其返回给交互程序。\n\n交互程序会对编码生成的数组进行如下操作：\n\n- 对于每一个元素，有 $50\\%$ 概率，将其赋成在 $ \\lbrack 0, 998244353 ) $ 内的一个随机的数，有 $50\\%$ 概率不变。\n\n之后 B 程序会从交互程序获得操作后的数组，B 程序需要对其进行解码，即 `Decode` 操作，根据数组信息还原出最初 A 程序从交互程序获得的数组。\n\n### 实现细节\n\n由于无法实现通信，本题以交互的形式运行。\n\n你不需要，也不应该实现主函数，你只需要实现下面两个函数\n\n1. `vector <int> Encode ( vector <int> vec );`\n- 该函数传入一个长度为 $10^2$ 的 `vector`，返回一个任意长度的 `vector`。\n2. `vector <int> Decode ( vector <int> vec );`\n- 该函数传入一个任意长度的 `vector`，返回一个长度为 $10^2$ 的 `vector`。\n\n**交互库会调用 `Encode` 不超过 $3 \\times 10^4$ 次，调用 `Decode` 不超过 $1 \\times 10^4$ 次。**  \n\n**下发的交互库**的实现是固定的测试数据组数，随机一个数组，并立即对其 `Encode` 和 `Decode`，即仅用于简单检验程序。  \n\n使用时，你可以**直接将实现好的 `Encode` 和 `Decode` 函数放到交互库代码里**，编译运行即可。\n\n如果交互库输出 `Illegaled operation`，你将获得 $0$ 分。可能的原因包括未还原原数组、返回的数组不合法。\n\n否则交互库会输出一个整数，表示你的分数。\n\n**评测交互库**不一定在 `Encode` 后立即 `Decode`，即可能会先对若干个数组进行编码，再逐一解码。\n\n所有的数应均在 $ \\lbrack 0, 998244353 ) $ 范围内。\n\n### 评分方式\n\n设您 `Encode` 返回的最大长度为 $Len$，则得分为 $ \\min( 100, \\lfloor \\frac{1500}{ \\lceil \\frac{Len}{50} \\rceil } \\rfloor ) $。", "inputFormat": "无", "outputFormat": "无", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9166", "type": "P", "difficulty": 4, "samples": [["7 5 4\n3 4\n4 6\n1 3\n5 7\n4 6\n", "1 3 6 7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2023", "O2优化", "差分"], "title": "[省选联考 2023] 火车站", "background": "", "description": "有 $n$ 个火车站排成一条直线，从 $1$ 到 $n$ 编号。一共有 $m$ 条火车轨道，每条轨道覆盖一段火车站区间 $[l_i, r_i]$。\n\n对于一个被多条火车轨道覆盖的火车站，火车在经过这里的时候，可以在此处改变轨道。但是火车无法掉头，只能朝着一个方向运行（即只能一直往 $1$ 的方向开或者一直往 $n$ 的方向开）。\n\n小 A 从火车站 $x$ 出发，即搭上了经过 $x$ 的任意一列火车（这列火车也可能是从车站 $x$ 出发）。这列火车可能行驶在火车站 $x$ 所处的任一条轨道上，其运行方向既可能是往 $1$ 的方向开，也可能是往 $n$ 的方向开。小 A 上车后就开始昏睡，直到乘坐的火车到达某条线路的终点站停下，他才醒过来。问小 A 最后可能到达的车站。\n\n注意：火车应运行至少一个车站，且火车切换轨道后不会立刻停下来，而是会继续沿着当前轨道前进。\n", "inputFormat": "输入的第一行包含三个正整数 $n, m, x$，分别表示火车站的数量，火车轨道的数量以及小 A 初始的起点。\n\n接下来 $m$ 行，每行包含两个正整数 $l_i, r_i$，表示一条火车轨道运行的区间。\n", "outputFormat": "输出一行，包含若干个用单个空格分隔的正整数，表示小 A 最后可能到达的车站，按照车站编号升序排序输出。\n", "hint": "**【样例 1 解释】**\n\n火车从车站 $4$ 出发，沿着第一条轨道可以运行到终点 $3$，也可以接着沿第三条轨道运行到终点 $1$。\n\n火车从车站 $4$ 出发，沿着第二条轨道可以运行到终点 $6$，也可以在车站 $5$ 换到第四条轨道运行到终点 $7$。\n\n所以最终按顺序输出 $1, 3, 6, 7$。\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le n, m \\le 2 \\times 10^5$，$1 \\le x \\le n$，$1 \\le l_i < r_i \\le n$。\n\n|测试点|$n, m \\le$|特殊性质|\n|:-:|:-:|:-:|\n|1|$50$|无|\n|2|$50$|无|\n|3|$5000$|无|\n|4|$5000$|无|\n|5|$5000$|无|\n|6|$2 \\times 10^5$|A|\n|7|$2 \\times 10^5$|A|\n|8|$2 \\times 10^5$|无|\n|9|$2 \\times 10^5$|无|\n|10|$2 \\times 10^5$|无|\n\n特殊性质 A：保证 $x = 1$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 火车站", "background": "", "description": "有 $n$ 个火车站排成一条直线，从 $1$ 到 $n$ 编号。一共有 $m$ 条火车轨道，每条轨道覆盖一段火车站区间 $[l_i, r_i]$。\n\n对于一个被多条火车轨道覆盖的火车站，火车在经过这里的时候，可以在此处改变轨道。但是火车无法掉头，只能朝着一个方向运行（即只能一直往 $1$ 的方向开或者一直往 $n$ 的方向开）。\n\n小 A 从火车站 $x$ 出发，即搭上了经过 $x$ 的任意一列火车（这列火车也可能是从车站 $x$ 出发）。这列火车可能行驶在火车站 $x$ 所处的任一条轨道上，其运行方向既可能是往 $1$ 的方向开，也可能是往 $n$ 的方向开。小 A 上车后就开始昏睡，直到乘坐的火车到达某条线路的终点站停下，他才醒过来。问小 A 最后可能到达的车站。\n\n注意：火车应运行至少一个车站，且火车切换轨道后不会立刻停下来，而是会继续沿着当前轨道前进。\n", "inputFormat": "输入的第一行包含三个正整数 $n, m, x$，分别表示火车站的数量，火车轨道的数量以及小 A 初始的起点。\n\n接下来 $m$ 行，每行包含两个正整数 $l_i, r_i$，表示一条火车轨道运行的区间。\n", "outputFormat": "输出一行，包含若干个用单个空格分隔的正整数，表示小 A 最后可能到达的车站，按照车站编号升序排序输出。\n", "hint": "**【样例 1 解释】**\n\n火车从车站 $4$ 出发，沿着第一条轨道可以运行到终点 $3$，也可以接着沿第三条轨道运行到终点 $1$。\n\n火车从车站 $4$ 出发，沿着第二条轨道可以运行到终点 $6$，也可以在车站 $5$ 换到第四条轨道运行到终点 $7$。\n\n所以最终按顺序输出 $1, 3, 6, 7$。\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le n, m \\le 2 \\times 10^5$，$1 \\le x \\le n$，$1 \\le l_i < r_i \\le n$。\n\n|测试点|$n, m \\le$|特殊性质|\n|:-:|:-:|:-:|\n|1|$50$|无|\n|2|$50$|无|\n|3|$5000$|无|\n|4|$5000$|无|\n|5|$5000$|无|\n|6|$2 \\times 10^5$|A|\n|7|$2 \\times 10^5$|A|\n|8|$2 \\times 10^5$|无|\n|9|$2 \\times 10^5$|无|\n|10|$2 \\times 10^5$|无|\n\n特殊性质 A：保证 $x = 1$。\n", "locale": "zh-CN"}}}
{"pid": "P9167", "type": "P", "difficulty": 7, "samples": [["4 4 1\n1 2\n2 3\n1 3\n3 4\n", "2\n"], ["见附件中的 cities/cities2.in", "见附件中的 cities/cities2.ans"], ["见附件中的 cities/cities3.in", "见附件中的 cities/cities3.ans"], ["见附件中的 cities/cities4.in", "见附件中的 cities/cities4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2023", "O2优化"], "title": "[省选联考 2023] 城市建造", "background": "", "description": "在这个国度里面有 $n$ 座城市，一开始城市之间修有若干条双向道路，导致这些城市形成了 $t \\ge 2$ 个连通块，特别的，这些连通块之间两两大小差的绝对值不超过 $0 \\le k \\le 1$。为了方便城市建设与发展，$n$ 座城市中的某 $t$ 座城市**在这 $t$ 座城市之间**额外修建了至少一条双向道路，使得所有城市连通。\n\n现在已经知道额外修建后的所有道路，你需要算出有哪些双向道路集合 $E'$，满足这些道路有可能是后来额外修建的，请输出答案对 $998,244,353$ 取模的结果。\n\n即给定一张 $n$ 个点 $m$ 条边的**无向连通**图 $G = (V, E)$，询问有多少该图的子图 $G' = (V', E')$，满足 $E' \\ne \\varnothing$ 且 $G - E'$ 中恰好有 $|V'|$ 个连通块，且任意两个连通块大小之差不超过 $k$，保证 $0 \\le k \\le 1$，请输出答案对 $998,244,353$ 取模的结果。\n", "inputFormat": "输入的第一行包含三个正整数 $n, m, k$，分别表示城市数、修建后的道路数以及任意两个连通块大小之差的上限。\n\n接下来 $m$ 行每行包含两个正整数 $u, v$，表示城市 $u$ 和 $v$ 之间存在一条双向道路，保证 $u \\ne v$。\n", "outputFormat": "输出一个数表示答案对 $998,244,353$ 取模后的结果。\n", "hint": "**【样例 1 解释】**\n\n有以下两种情况：\n\n- 本来只有 $(3, 4)$ 这一条道路，此时有三个连通块，分别为 $\\{1\\}, \\{2\\}, \\{3, 4\\}$；后来城市 $1, 2, 3$ 决定在它们三座城市中额外修建了 $(1, 2), (2, 3), (1, 3)$ 这三条道路，使得所有城市连通。\n- 本来没有任何道路，此时有四个连通块，分别为 $\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}$；后来城市 $1, 2, 3, 4$ 决定在它们四座城市中额外修建了 $(1, 2), (2, 3), (1, 3), (3, 4)$ 这四条道路，使得所有城市连通。\n\n**【数据范围】**\n\n对于所有的数据，保证：$3 \\le n \\le 10^5$，$n - 1 \\le m \\le 2 \\times 10^5$，$0 \\le k \\le 1$。\n\n|测试点|$n$|$m$|$k$|\n|:-:|:-:|:-:|:-:|\n|1, 2|$\\le 15$|$\\le 20$|$= 0$|\n|3 ~ 5|$\\le 20$|$\\le 50$|$= 1$|\n|6, 7|$\\le 200$|$\\le 300$|$= 0$|\n|8, 9|$\\le 2,000$|$= n - 1$|$= 1$|\n|10, 11|$\\le 2,000$|$\\le 3,000$|$= 0$|\n|12, 13|$\\le 2,000$|$\\le 3,000$|$= 1$|\n|14, 15|$\\le 10^5$|$= n - 1$|$= 1$|\n|16, 17|$\\le 10^5$|$\\le 2 \\times 10^5$|$= 0$|\n|18 ~ 20|$\\le 10^5$|$\\le 2 \\times 10^5$|$= 1$|\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 城市建造", "background": "", "description": "在这个国度里面有 $n$ 座城市，一开始城市之间修有若干条双向道路，导致这些城市形成了 $t \\ge 2$ 个连通块，特别的，这些连通块之间两两大小差的绝对值不超过 $0 \\le k \\le 1$。为了方便城市建设与发展，$n$ 座城市中的某 $t$ 座城市**在这 $t$ 座城市之间**额外修建了至少一条双向道路，使得所有城市连通。\n\n现在已经知道额外修建后的所有道路，你需要算出有哪些双向道路集合 $E'$，满足这些道路有可能是后来额外修建的，请输出答案对 $998,244,353$ 取模的结果。\n\n即给定一张 $n$ 个点 $m$ 条边的**无向连通**图 $G = (V, E)$，询问有多少该图的子图 $G' = (V', E')$，满足 $E' \\ne \\varnothing$ 且 $G - E'$ 中恰好有 $|V'|$ 个连通块，且任意两个连通块大小之差不超过 $k$，保证 $0 \\le k \\le 1$，请输出答案对 $998,244,353$ 取模的结果。\n", "inputFormat": "输入的第一行包含三个正整数 $n, m, k$，分别表示城市数、修建后的道路数以及任意两个连通块大小之差的上限。\n\n接下来 $m$ 行每行包含两个正整数 $u, v$，表示城市 $u$ 和 $v$ 之间存在一条双向道路，保证 $u \\ne v$。\n", "outputFormat": "输出一个数表示答案对 $998,244,353$ 取模后的结果。\n", "hint": "**【样例 1 解释】**\n\n有以下两种情况：\n\n- 本来只有 $(3, 4)$ 这一条道路，此时有三个连通块，分别为 $\\{1\\}, \\{2\\}, \\{3, 4\\}$；后来城市 $1, 2, 3$ 决定在它们三座城市中额外修建了 $(1, 2), (2, 3), (1, 3)$ 这三条道路，使得所有城市连通。\n- 本来没有任何道路，此时有四个连通块，分别为 $\\{1\\}, \\{2\\}, \\{3\\}, \\{4\\}$；后来城市 $1, 2, 3, 4$ 决定在它们四座城市中额外修建了 $(1, 2), (2, 3), (1, 3), (3, 4)$ 这四条道路，使得所有城市连通。\n\n**【数据范围】**\n\n对于所有的数据，保证：$3 \\le n \\le 10^5$，$n - 1 \\le m \\le 2 \\times 10^5$，$0 \\le k \\le 1$。\n\n|测试点|$n$|$m$|$k$|\n|:-:|:-:|:-:|:-:|\n|1, 2|$\\le 15$|$\\le 20$|$= 0$|\n|3 ~ 5|$\\le 20$|$\\le 50$|$= 1$|\n|6, 7|$\\le 200$|$\\le 300$|$= 0$|\n|8, 9|$\\le 2,000$|$= n - 1$|$= 1$|\n|10, 11|$\\le 2,000$|$\\le 3,000$|$= 0$|\n|12, 13|$\\le 2,000$|$\\le 3,000$|$= 1$|\n|14, 15|$\\le 10^5$|$= n - 1$|$= 1$|\n|16, 17|$\\le 10^5$|$\\le 2 \\times 10^5$|$= 0$|\n|18 ~ 20|$\\le 10^5$|$\\le 2 \\times 10^5$|$= 1$|\n", "locale": "zh-CN"}}}
{"pid": "P9168", "type": "P", "difficulty": 7, "samples": [["1\n3 2 1\n1 1\n2 1\n1 3\n1 2 2\n", "4 5\n"], ["见附件中的 transfer/transfer2.in", "见附件中的 transfer/transfer2.ans"], ["见附件中的 transfer/transfer3.in", "见附件中的 transfer/transfer3.ans"], ["见附件中的 transfer/transfer4.in", "见附件中的 transfer/transfer4.ans"], ["见附件中的 transfer/transfer5.in", "见附件中的 transfer/transfer5.ans"], ["见附件中的 transfer/transfer6.in", "见附件中的 transfer/transfer6.ans"], ["见附件中的 transfer/transfer7.in", "见附件中的 transfer/transfer7.ans"], ["见附件中的 transfer/transfer8.in", "见附件中的 transfer/transfer8.ans"], ["见附件中的 transfer/transfer9.in", "见附件中的 transfer/transfer9.ans"], ["见附件中的 transfer/transfer10.in", "见附件中的 transfer/transfer10.ans"], ["见附件中的 transfer/transfer11.in", "见附件中的 transfer/transfer11.ans"], ["见附件中的 transfer/transfer12.in", "见附件中的 transfer/transfer12.ans"], ["见附件中的 transfer/transfer13.in", "见附件中的 transfer/transfer13.ans"], ["见附件中的 transfer/transfer14.in", "见附件中的 transfer/transfer14.ans"], ["见附件中的 transfer/transfer15.in", "见附件中的 transfer/transfer15.ans"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2023", "O2优化"], "title": "[省选联考 2023] 人员调度", "background": "**滥用本题评测将封号**。", "description": "众所周知，一个公司的 $n$ 个部门可以组织成一个树形结构。形式化地，假设这些部门依次编号为 $1, \\ldots, n$，那么除了 $1$ 号部门以外，第 $i \\in [2, n]$ 个部门**有且仅有**一个上级部门 $p_i \\in [1, i - 1]$。这样，这家公司的 $n$ 个部门可以视为一个以 $1$ 为根的树。如果 $i$ 是 $j$ 子树中的点，那么称部门 $i$ 是部门 $j$ 的子部门。\n\n该公司初始时有 $k$ 名优秀员工，编号依次为 $1 \\ldots k$。第 $i$ 名优秀员工初始时在第 $x_i$ 个部门工作，并且其有一个能力值 $v_i > 0$。\n\n为了最大化公司的运作效率，公司老板 0/\\\\/\\G 决定进行一些人员调动。具体来说，可以将编号为 $i$ 的优秀员工调动到 $x_i$ 的一个子部门，或者不调度（此时该员工在 $x_i$ 部门）。随后，优秀员工们会在其所在的部门竞选部门领导——能力值最高者将担任这一职位，并给公司带来等同于其能力值的贡献。如果一个部门一个优秀员工也没有，那么就无法选出部门领导，从而对公司的贡献将是 $0$。此时，公司的业绩被定义为公司各部门的贡献之和。\n\n公司老板 0/\\\\/\\G 自然想知道，该如何进行人员调动，使公司的业绩最大？\n\n这当然难不倒他，然而，公司优秀员工的数量也会发生变化；具体来说，会依次发生 $m$ 个事件，每个事件形如：\n\n- `1 x v`：先令 $k = k + 1$，然后新增一位编号为 $k$、初始部门为 $x$、能力值为 $v$ 的优秀员工；\n- `2 id`：编号为 $\\mathit{id}$ 的优秀员工将被辞退。\n\n公司老板 0/\\\\/\\G 希望你能在最开始和每个事件发生后，告诉他公司的业绩最大可能是多少？\n\n注意，每次人员调动都是独立的，也就是每次计算公司的最大可能业绩时，每个优秀员工都会回到其所在的初始部门。\n", "inputFormat": "输入的第一行包含一个正整数 $\\mathit{sid}$，表示该测试点对应的数据范围以及特殊性质，详见后表；\n\n输入的第二行包含三个整数 $n, k, m$，分别表示部门数，初始优秀员工数和事件数。\n\n输入的第三行包含 $n - 1$ 个正整数 $p_2, \\ldots, p_n$，表示每个部门的上级部门。\n\n接下来 $k$ 行，每行包含两个正整数 $x_i, v_i$，表示优秀员工的初始部门和能力值。\n\n接下来 $m$ 行，每行形如 `1 x v` 或 `2 id` 表示一次事件。\n", "outputFormat": "输出一行包含 $m + 1$ 个由单个空格隔开的非负整数，依次表示最开始和每个事件发生后，公司的业绩可能的最大值。\n", "hint": "**【数据范围】**\n\n对于所有的数据，保证：$1 \\le \\mathit{sid} \\le 15$，$1 \\le n, k \\le 10^5$，$0 \\le m \\le 10^5$，$1 \\le p_i < i$，$1 \\le x_i, x \\le n$，$1 \\le v_i, v \\le 10^5$。\n\n对于事件 2，保证：$1 \\le \\mathit{id} \\le k$ 且编号为 $\\mathit{id}$ 的员工在此事件发生时仍在工作。\n\n|测试点编号|$\\mathit{sid}$|$n \\le$|$k \\le$|$m \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|1|$1$|$6$|$6$|$6$|无|\n|2, 3|$2$|$9$|$6$|$6$|无|\n|4, 5|$3$|$16$|$66$|$66$|无|\n|6 ~ 8|$4$|$66$|$66$|$0$|无|\n|9 ~ 11|$5$|$2,333$|$2,333$|$0$|无|\n|12 ~ 14|$6$|$10^5$|$10^5$|$0$|B|\n|15 ~ 18|$7$|$10^5$|$10^5$|$0$|无|\n|19 ~ 21|$8$|$2,333$|$2,333$|$2,333$|A|\n|22 ~ 24|$9$|$10^5$|$10^5$|$10^5$|AB|\n|25 ~ 28|$10$|$10^5$|$10^5$|$10^5$|A|\n|29 ~ 31|$11$|$2,333$|$2,333$|$2,333$|无|\n|32 ~ 34|$12$|$10^5$|$10^5$|$10^5$|C|\n|35 ~ 38|$13$|$10^5$|$10^5$|$10^5$|B|\n|39 ~ 44|$14$|$66,666$|$66,666$|$66,666$|无|\n|45 ~ 50|$15$|$10^5$|$10^5$|$10^5$|无|\n\n特殊性质 A：无事件 2；\n\n特殊性质 B：$p_i = i - 1$；\n\n特殊性质 C：$v_i = v = 1$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 人员调度", "background": "**滥用本题评测将封号**。", "description": "众所周知，一个公司的 $n$ 个部门可以组织成一个树形结构。形式化地，假设这些部门依次编号为 $1, \\ldots, n$，那么除了 $1$ 号部门以外，第 $i \\in [2, n]$ 个部门**有且仅有**一个上级部门 $p_i \\in [1, i - 1]$。这样，这家公司的 $n$ 个部门可以视为一个以 $1$ 为根的树。如果 $i$ 是 $j$ 子树中的点，那么称部门 $i$ 是部门 $j$ 的子部门。\n\n该公司初始时有 $k$ 名优秀员工，编号依次为 $1 \\ldots k$。第 $i$ 名优秀员工初始时在第 $x_i$ 个部门工作，并且其有一个能力值 $v_i > 0$。\n\n为了最大化公司的运作效率，公司老板 0/\\\\/\\G 决定进行一些人员调动。具体来说，可以将编号为 $i$ 的优秀员工调动到 $x_i$ 的一个子部门，或者不调度（此时该员工在 $x_i$ 部门）。随后，优秀员工们会在其所在的部门竞选部门领导——能力值最高者将担任这一职位，并给公司带来等同于其能力值的贡献。如果一个部门一个优秀员工也没有，那么就无法选出部门领导，从而对公司的贡献将是 $0$。此时，公司的业绩被定义为公司各部门的贡献之和。\n\n公司老板 0/\\\\/\\G 自然想知道，该如何进行人员调动，使公司的业绩最大？\n\n这当然难不倒他，然而，公司优秀员工的数量也会发生变化；具体来说，会依次发生 $m$ 个事件，每个事件形如：\n\n- `1 x v`：先令 $k = k + 1$，然后新增一位编号为 $k$、初始部门为 $x$、能力值为 $v$ 的优秀员工；\n- `2 id`：编号为 $\\mathit{id}$ 的优秀员工将被辞退。\n\n公司老板 0/\\\\/\\G 希望你能在最开始和每个事件发生后，告诉他公司的业绩最大可能是多少？\n\n注意，每次人员调动都是独立的，也就是每次计算公司的最大可能业绩时，每个优秀员工都会回到其所在的初始部门。\n", "inputFormat": "输入的第一行包含一个正整数 $\\mathit{sid}$，表示该测试点对应的数据范围以及特殊性质，详见后表；\n\n输入的第二行包含三个整数 $n, k, m$，分别表示部门数，初始优秀员工数和事件数。\n\n输入的第三行包含 $n - 1$ 个正整数 $p_2, \\ldots, p_n$，表示每个部门的上级部门。\n\n接下来 $k$ 行，每行包含两个正整数 $x_i, v_i$，表示优秀员工的初始部门和能力值。\n\n接下来 $m$ 行，每行形如 `1 x v` 或 `2 id` 表示一次事件。\n", "outputFormat": "输出一行包含 $m + 1$ 个由单个空格隔开的非负整数，依次表示最开始和每个事件发生后，公司的业绩可能的最大值。\n", "hint": "**【数据范围】**\n\n对于所有的数据，保证：$1 \\le \\mathit{sid} \\le 15$，$1 \\le n, k \\le 10^5$，$0 \\le m \\le 10^5$，$1 \\le p_i < i$，$1 \\le x_i, x \\le n$，$1 \\le v_i, v \\le 10^5$。\n\n对于事件 2，保证：$1 \\le \\mathit{id} \\le k$ 且编号为 $\\mathit{id}$ 的员工在此事件发生时仍在工作。\n\n|测试点编号|$\\mathit{sid}$|$n \\le$|$k \\le$|$m \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|1|$1$|$6$|$6$|$6$|无|\n|2, 3|$2$|$9$|$6$|$6$|无|\n|4, 5|$3$|$16$|$66$|$66$|无|\n|6 ~ 8|$4$|$66$|$66$|$0$|无|\n|9 ~ 11|$5$|$2,333$|$2,333$|$0$|无|\n|12 ~ 14|$6$|$10^5$|$10^5$|$0$|B|\n|15 ~ 18|$7$|$10^5$|$10^5$|$0$|无|\n|19 ~ 21|$8$|$2,333$|$2,333$|$2,333$|A|\n|22 ~ 24|$9$|$10^5$|$10^5$|$10^5$|AB|\n|25 ~ 28|$10$|$10^5$|$10^5$|$10^5$|A|\n|29 ~ 31|$11$|$2,333$|$2,333$|$2,333$|无|\n|32 ~ 34|$12$|$10^5$|$10^5$|$10^5$|C|\n|35 ~ 38|$13$|$10^5$|$10^5$|$10^5$|B|\n|39 ~ 44|$14$|$66,666$|$66,666$|$66,666$|无|\n|45 ~ 50|$15$|$10^5$|$10^5$|$10^5$|无|\n\n特殊性质 A：无事件 2；\n\n特殊性质 B：$p_i = i - 1$；\n\n特殊性质 C：$v_i = v = 1$。\n", "locale": "zh-CN"}}}
{"pid": "P9169", "type": "P", "difficulty": 6, "samples": [["0 5\n4 5\n...#O\n.#..#\n#O#..\n.#..X\n3 3\n#.#\nO.O\n.X.\n3 3\nO..\n.#X\n.O.\n5 5\n.....\n.....\n..O..\n#..#.\nO#.X.\n9 9\n...######\n.#.......\n.#######.\n.#.#.....\n.#O#.####\n.#.#.....\n.#######.\n.#X......\n.O.......\n", "Black 0\nBlack 2\nBlack 2\nTie\nRed 75\n"], ["见附件中的 zu/zu2.in", "见附件中的 zu/zu2.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["博弈论", "各省省选", "2023", "O2优化", "广度优先搜索 BFS", "拓扑排序"], "title": "[省选联考 2023] 过河卒", "background": "棋盘上有一个过河卒，需要走到底线。卒行走的规则是可以向左移动一格，向右移动一格或者向前移动一格。同时在棋盘上有两个另一方的棋子，需要拦截这个卒走到底线。这两个棋子的走法和帅一致，可以走到前后左右四个方向上相邻的格子。因此本题可以称为“帅拦过河卒”。", "description": "有一个 $n$ 行 $m$ 列的棋盘。我们用 $(i,j)$ 表示第 $i$ 行第 $j$ 列的位置。棋盘上有一些障碍，还有一个黑棋子和两个红棋子。\n\n游戏的规则是这样的：红方先走，黑方后走，双方轮流走棋。红方每次可以选择一个红棋子，向棋盘的相邻一格走一步。具体而言，假设红方选择的这个棋子位置在 $(i,j)$，那么它可以走到 $(i-1,j),(i+1,j),(i,j-1),(i,j+1)$ 中的一个，只要这个目的地在棋盘内且没有障碍且没有红方的另一个棋子。\n\n黑方每次可以将自己的棋子向三个方向之一移动一格。具体地，假设这个黑棋子位置在 $(i,j)$，那么它可以走到 $(i-1,j),(i,j-1),(i,j+1)$ 这三个格子中的一个，只要这个目的地在棋盘内且没有障碍。\n\n在一方行动之前，如果发生以下情况之一，则立即结束游戏，按照如下的规则判断胜负（列在前面的优先）：\n\n- 黑棋子位于第一行。此时黑方胜。\n\n- 黑棋子和其中一个红棋子在同一个位置上。此时进行上一步移动的玩家胜。\n\n- 当前玩家不能进行任何合法操作。此时对方胜。\n\n现在假设双方采用最优策略，不会进行不利于自己的移动。也就是说:\n\n- 若存在必胜策略，则会选择所有必胜策略中，不论对方如何操作，本方后续获胜所需步数最大值最少的操作。\n- 若不存在必胜策略，但存在不论对方如何行动，自己都不会落败的策略，则会选择任意一种不败策略。\n- 若不存在不败策略，则会选择在所有策略中，不论对方如何操作，对方后续获胜所需步数最小值最大的操作。\n\n如果在 $100^{100^{100}}$ 个回合之后仍不能分出胜负，则认为游戏平局。请求出游戏结束时双方一共移动了多少步，或者判断游戏平局。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含两个整数 $\\text{id},T$，分别表示测试点编号和数据组数。特别地，样例的 $\\text{id}$ 为 $0$。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含两个正整数 $n,m$，表示棋盘的行数和列数。\n\n接下来 $n$ 行，每行包含一个长度为 $m$ 的字符串，其中第 $i$ 行的第 $j$ 个字符表示棋盘上 $(i,j)$ 这个位置的状态。\n\n在这些字符中：$\\texttt{'.'}$ 表示空位；$\\texttt{'\\#'}$ 表示障碍物；$\\texttt{'X'}$ 表示黑棋；$\\texttt{'O'}$ 表示红棋。\n\n保证黑棋恰好有一个，红棋恰好有两个，且黑棋不在第一行。", "outputFormat": "对于每组数据，输出一行字符串。\n\n如果游戏平局，请输出一行 $\\texttt{\"Tie\"}$。\n\n如果红方胜，请输出一行 $\\texttt{\"Red t\"}$。其中 $\\texttt{t}$ 为游戏结束时双方移动的步数之和。显然这应该是一个奇数。\n\n如果黑方胜，请输出一行 $\\texttt{\"Black t\"}$。其中 $\\texttt{t}$ 为游戏结束时双方移动的步数之和。显然这应该是一个偶数。\n\n注意，请输出双引号内的字符串，不包含双引号。", "hint": "**【样例 1 解释】**\n\n第一组数据，红方第一步没有可行的移动，所以黑方胜。\n\n第二组数据，无论第一步红方怎么移动，黑方都可以在下一步让黑棋子与红棋子在同一个位置。\n\n第三组数据，无论第一步红方怎么移动，黑方都可以将自己的棋子往上移动一枚来达成胜利。\n\n第四组数据，有一个红棋子不能动。另一个红棋子可以在第三行移动来防止黑棋子进入第一行。黑棋子也可以一直在第五行移动。如果红棋子到达第五行，黑棋子可以选择从另一边逃走。\n\n第五组数据，在最后一行的那个红棋子可以从左边绕一圈抓住黑棋子。注意另一个红棋子可以移动。\n\n**【样例 2 解释】**\n\n这个样例中的每一组数据都满足测试点 $5$ 到 $13$ 中某一个测试点的限制。\n\n**【子任务】**\n\n对于所有的数据，保证：$1 \\leq T \\leq 10$，$2 \\leq n \\leq 10$，$1 \\leq m \\leq 10$，$\\text{id}$ 等于测试点编号。\n\n对于每组数据保证：棋盘上的黑棋恰好有一个，红棋恰好有两个，且黑棋不在第一 行。\n\n- 测试点 $1 \\sim 4$：保证要么平局，要么红方在开始时无法移动。\n\n- 测试点 $5 \\sim 6$：保证 $n \\geq 4$ 。保证棋盘上第 $n-1$ 行的每一个格子都是障碍物，且 棋盘上其他行没有障碍物。保证黑棋在前 $n-2$ 行，有一个红棋在前 $n-2$ 行，另一个红棋在第 $n$ 行。\n\n- 测试点 $7 \\sim 9$：保证 $m=1$。\n\n- 测试点 $10 \\sim 13$：保证要么平局，要么存在策略可以在 $9$ 步之内结束游戏。\n\n- 测试点 $14 \\sim 20$：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 过河卒", "background": "棋盘上有一个过河卒，需要走到底线。卒行走的规则是可以向左移动一格，向右移动一格或者向前移动一格。同时在棋盘上有两个另一方的棋子，需要拦截这个卒走到底线。这两个棋子的走法和帅一致，可以走到前后左右四个方向上相邻的格子。因此本题可以称为“帅拦过河卒”。", "description": "有一个 $n$ 行 $m$ 列的棋盘。我们用 $(i,j)$ 表示第 $i$ 行第 $j$ 列的位置。棋盘上有一些障碍，还有一个黑棋子和两个红棋子。\n\n游戏的规则是这样的：红方先走，黑方后走，双方轮流走棋。红方每次可以选择一个红棋子，向棋盘的相邻一格走一步。具体而言，假设红方选择的这个棋子位置在 $(i,j)$，那么它可以走到 $(i-1,j),(i+1,j),(i,j-1),(i,j+1)$ 中的一个，只要这个目的地在棋盘内且没有障碍且没有红方的另一个棋子。\n\n黑方每次可以将自己的棋子向三个方向之一移动一格。具体地，假设这个黑棋子位置在 $(i,j)$，那么它可以走到 $(i-1,j),(i,j-1),(i,j+1)$ 这三个格子中的一个，只要这个目的地在棋盘内且没有障碍。\n\n在一方行动之前，如果发生以下情况之一，则立即结束游戏，按照如下的规则判断胜负（列在前面的优先）：\n\n- 黑棋子位于第一行。此时黑方胜。\n\n- 黑棋子和其中一个红棋子在同一个位置上。此时进行上一步移动的玩家胜。\n\n- 当前玩家不能进行任何合法操作。此时对方胜。\n\n现在假设双方采用最优策略，不会进行不利于自己的移动。也就是说:\n\n- 若存在必胜策略，则会选择所有必胜策略中，不论对方如何操作，本方后续获胜所需步数最大值最少的操作。\n- 若不存在必胜策略，但存在不论对方如何行动，自己都不会落败的策略，则会选择任意一种不败策略。\n- 若不存在不败策略，则会选择在所有策略中，不论对方如何操作，对方后续获胜所需步数最小值最大的操作。\n\n如果在 $100^{100^{100}}$ 个回合之后仍不能分出胜负，则认为游戏平局。请求出游戏结束时双方一共移动了多少步，或者判断游戏平局。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含两个整数 $\\text{id},T$，分别表示测试点编号和数据组数。特别地，样例的 $\\text{id}$ 为 $0$。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含两个正整数 $n,m$，表示棋盘的行数和列数。\n\n接下来 $n$ 行，每行包含一个长度为 $m$ 的字符串，其中第 $i$ 行的第 $j$ 个字符表示棋盘上 $(i,j)$ 这个位置的状态。\n\n在这些字符中：$\\texttt{'.'}$ 表示空位；$\\texttt{'\\#'}$ 表示障碍物；$\\texttt{'X'}$ 表示黑棋；$\\texttt{'O'}$ 表示红棋。\n\n保证黑棋恰好有一个，红棋恰好有两个，且黑棋不在第一行。", "outputFormat": "对于每组数据，输出一行字符串。\n\n如果游戏平局，请输出一行 $\\texttt{\"Tie\"}$。\n\n如果红方胜，请输出一行 $\\texttt{\"Red t\"}$。其中 $\\texttt{t}$ 为游戏结束时双方移动的步数之和。显然这应该是一个奇数。\n\n如果黑方胜，请输出一行 $\\texttt{\"Black t\"}$。其中 $\\texttt{t}$ 为游戏结束时双方移动的步数之和。显然这应该是一个偶数。\n\n注意，请输出双引号内的字符串，不包含双引号。", "hint": "**【样例 1 解释】**\n\n第一组数据，红方第一步没有可行的移动，所以黑方胜。\n\n第二组数据，无论第一步红方怎么移动，黑方都可以在下一步让黑棋子与红棋子在同一个位置。\n\n第三组数据，无论第一步红方怎么移动，黑方都可以将自己的棋子往上移动一枚来达成胜利。\n\n第四组数据，有一个红棋子不能动。另一个红棋子可以在第三行移动来防止黑棋子进入第一行。黑棋子也可以一直在第五行移动。如果红棋子到达第五行，黑棋子可以选择从另一边逃走。\n\n第五组数据，在最后一行的那个红棋子可以从左边绕一圈抓住黑棋子。注意另一个红棋子可以移动。\n\n**【样例 2 解释】**\n\n这个样例中的每一组数据都满足测试点 $5$ 到 $13$ 中某一个测试点的限制。\n\n**【子任务】**\n\n对于所有的数据，保证：$1 \\leq T \\leq 10$，$2 \\leq n \\leq 10$，$1 \\leq m \\leq 10$，$\\text{id}$ 等于测试点编号。\n\n对于每组数据保证：棋盘上的黑棋恰好有一个，红棋恰好有两个，且黑棋不在第一 行。\n\n- 测试点 $1 \\sim 4$：保证要么平局，要么红方在开始时无法移动。\n\n- 测试点 $5 \\sim 6$：保证 $n \\geq 4$ 。保证棋盘上第 $n-1$ 行的每一个格子都是障碍物，且 棋盘上其他行没有障碍物。保证黑棋在前 $n-2$ 行，有一个红棋在前 $n-2$ 行，另一个红棋在第 $n$ 行。\n\n- 测试点 $7 \\sim 9$：保证 $m=1$。\n\n- 测试点 $10 \\sim 13$：保证要么平局，要么存在策略可以在 $9$ 步之内结束游戏。\n\n- 测试点 $14 \\sim 20$：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9170", "type": "P", "difficulty": 7, "samples": [["1\n3 4\n1 3\n2 1 2\n2 3 4\n2 1 2\n2 2 3\n2 3 4\n", "1\n"], ["见附件中的 game/game2.in", "见附件中的 game/game2.ans"], ["见附件中的 game/game3.in", "见附件中的 game/game3.ans"], ["见附件中的 game/game4.in", "见附件中的 game/game4.ans"], ["见附件中的 game/game5.in", "见附件中的 game/game5.ans"], ["见附件中的 game/game6.in", "见附件中的 game/game6.ans"], ["见附件中的 game/game7.in", "见附件中的 game/game7.ans"], ["见附件中的 game/game8.in", "见附件中的 game/game8.ans"], ["见附件中的 game/game9.in", "见附件中的 game/game9.ans"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2023", "O2优化"], "title": "[省选联考 2023] 填数游戏", "background": "", "description": "众所周知，Alice 和 Bob 是一对好朋友。今天，他们约好一起玩游戏。\n\n一开始，他们各自有一张空白的纸条。接下来，他们会在纸条上依次写 $n$ 个 $[1,m]$ 范围内的正整数。等 Alice 写完，Bob **在看到 Alice 写的纸条之后开始写他的纸条**。\n\nAlice 需要保证她写下的第 $i$ 个数在集合 $S_{i}$ 中，Bob 需要保证他写下的第 $i$ 个数在集合 $T_{i}$ 中。**题目保证** $1 \\leq\\left|S_{i}\\right|,\\left|T_{i}\\right| \\leq 2$ 。\n\nAlice 喜欢相同，因此，她希望她写下的数与 Bob 写下的数对应位置相同的个数尽量多。Bob 喜欢不同，因此，他希望他写下的 $n$ 个数 $b_{1}, \\ldots, b_{n}$ 互不相同。在此基础上，Bob 希望他写下的数与 Alice 写下的数对应位置相同的个数尽量少。\n\n即设 Alice 写下的数为 $a_{1}, \\ldots, a_{n}$，Bob 写下的数为 $b_{1}, \\ldots, b_{n}$，记 $X$ 为满足 $1 \\leq i \\leq n, a_{i}=b_{i}$ 的下标 $i$ 的个数，则\n\n- Alice 希望最大化 $X,$\n- Bob 在**保证 $b_{1}, \\ldots, b_{n}$ 互不相同的前提下**希望最小化 $X$。\n\n你首先想知道 Bob 能否保证他写下的 $n$ 个数互不相同。如果 Bob 能够做到，你想知道**在双方均采取最优策略的前提下** $X$ 的值会是多少。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含两个正整数 $n,m$，表示纸条上需要写的数的个数和数的值域。\n\n接下来 $n$ 行，每行输入的第一个整数为 $\\left|S_{i}\\right|$ 表示集合 $S_{i}$ 的元素个数，接下来输入 $\\left|S_{i}\\right|$ 个正整数描述 $S_{i}$ 中的元素。\n\n接下来 $n$ 行，每行输入的第一个整数为 $\\left|T_{i}\\right|$ 表示集合 $T_{i}$ 的元素个数，接下来输入 $\\left|T_{i}\\right|$ 个正整数描述 $T_{i}$ 中的元素。", "outputFormat": "对于每组测试数据输出一行：若 Bob 无法做到他写下的 $n$ 个数互不相同，输出 `-1`；否则输出在双方均予取最优策略的前提下 $X$ 的值。", "hint": "**【样例 1 解释】**\n\n在这组样例中，$S_{1}=\\{3\\}, S_{2}=T_{1}=\\{1,2\\}, S_{3}=T_{3}=\\{3,4\\}, T_{2}=\\{2,3\\}$。Alice 的填法有 $4$ 种，列举如下：\n\n第一种：$a_{1}=3,a_{2}=1,a_{3}=3$。\n\n第二种：$a_{1}=3,a_{2}=1,a_{3}=4$。\n\n第三种：$a_{1}=3,a_{2}=2,a_{3}=3$。\n\n第四种：$a_{1}=3,a_{2}=2,a_{3}=4$。\n\n由于 Bob 必须保证他所填的数互不相同，所以他有以下填法:\n\n第一种：$b_{1}=1,b_{2}=2,b_{3}=3$。\n\n第二种：$b_{1}=2,b_{3}=3,b_{3}=4$。\n\n第三种：$b_{1}=1,b_{2}=2,b_{3}=4$。\n\n第四种：$b_{1}=1,b_{2}=3,b_{3}=4$。\n\n若 Alice 选择第一种填法，则 Bob 为最小化 $X$，选择第二种填法，得到 $X=0$。\n\n若 Alice 选择第二种填法，则 Bob 为最小化 $X$，选择第一种填法，得到 $X=0$。\n\n若 Alice 选择第三种填法，则 Bob 为最小化 $X$，选择第一种填法，得到 $X=0$。\n\n若 Alice 选择第四种填法，则 Bob 无论选择哪种填法，$X$ 均不小于 $1$。\n\n因此，Alice 为最大化 $X$ 的值，她会选择第四种填法。\n\n**【子任务】**\n\n表格中 $\\sum n,\\sum m$ 分别表示同个测试点内所有测试数据的 $n$ 总和和 $m$ 总和。 $\\sum n^{2}, \\sum m^{2}, \\sum n^{3}, \\sum m^{3}$ 的含义类似。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nbt12df0.png)\n\n特殊性质 A：对于任何 $1 \\leq i \\leq n,S_i$ 和 $T_i$ 互不相交，即 $S_i \\cap T_i=\\emptyset$。\n\n特殊性质 B：$n \\geq 3$，且对于任何 $1 \\leq i<n, T_{1} =\\{i,i+1\\}$，且 $T_{n}=\\{n,1\\}$。\n\n特殊性质 C：对于任何 $1 \\leq i \\leq n,|S_i|=1$。\n\n特殊性质 D：对于任何 $1 \\leq i \\leq n,S_{i}=T_{i}$。\n\n**【提示】**\n\n本题部分测试点读入规模较大，我们建议你采取效率较高的读入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 填数游戏", "background": "", "description": "众所周知，Alice 和 Bob 是一对好朋友。今天，他们约好一起玩游戏。\n\n一开始，他们各自有一张空白的纸条。接下来，他们会在纸条上依次写 $n$ 个 $[1,m]$ 范围内的正整数。等 Alice 写完，Bob **在看到 Alice 写的纸条之后开始写他的纸条**。\n\nAlice 需要保证她写下的第 $i$ 个数在集合 $S_{i}$ 中，Bob 需要保证他写下的第 $i$ 个数在集合 $T_{i}$ 中。**题目保证** $1 \\leq\\left|S_{i}\\right|,\\left|T_{i}\\right| \\leq 2$ 。\n\nAlice 喜欢相同，因此，她希望她写下的数与 Bob 写下的数对应位置相同的个数尽量多。Bob 喜欢不同，因此，他希望他写下的 $n$ 个数 $b_{1}, \\ldots, b_{n}$ 互不相同。在此基础上，Bob 希望他写下的数与 Alice 写下的数对应位置相同的个数尽量少。\n\n即设 Alice 写下的数为 $a_{1}, \\ldots, a_{n}$，Bob 写下的数为 $b_{1}, \\ldots, b_{n}$，记 $X$ 为满足 $1 \\leq i \\leq n, a_{i}=b_{i}$ 的下标 $i$ 的个数，则\n\n- Alice 希望最大化 $X,$\n- Bob 在**保证 $b_{1}, \\ldots, b_{n}$ 互不相同的前提下**希望最小化 $X$。\n\n你首先想知道 Bob 能否保证他写下的 $n$ 个数互不相同。如果 Bob 能够做到，你想知道**在双方均采取最优策略的前提下** $X$ 的值会是多少。", "inputFormat": "**本题有多组测试数据**。\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n接下来包含 $T$ 组数据，每组数据的格式如下：\n\n第一行包含两个正整数 $n,m$，表示纸条上需要写的数的个数和数的值域。\n\n接下来 $n$ 行，每行输入的第一个整数为 $\\left|S_{i}\\right|$ 表示集合 $S_{i}$ 的元素个数，接下来输入 $\\left|S_{i}\\right|$ 个正整数描述 $S_{i}$ 中的元素。\n\n接下来 $n$ 行，每行输入的第一个整数为 $\\left|T_{i}\\right|$ 表示集合 $T_{i}$ 的元素个数，接下来输入 $\\left|T_{i}\\right|$ 个正整数描述 $T_{i}$ 中的元素。", "outputFormat": "对于每组测试数据输出一行：若 Bob 无法做到他写下的 $n$ 个数互不相同，输出 `-1`；否则输出在双方均予取最优策略的前提下 $X$ 的值。", "hint": "**【样例 1 解释】**\n\n在这组样例中，$S_{1}=\\{3\\}, S_{2}=T_{1}=\\{1,2\\}, S_{3}=T_{3}=\\{3,4\\}, T_{2}=\\{2,3\\}$。Alice 的填法有 $4$ 种，列举如下：\n\n第一种：$a_{1}=3,a_{2}=1,a_{3}=3$。\n\n第二种：$a_{1}=3,a_{2}=1,a_{3}=4$。\n\n第三种：$a_{1}=3,a_{2}=2,a_{3}=3$。\n\n第四种：$a_{1}=3,a_{2}=2,a_{3}=4$。\n\n由于 Bob 必须保证他所填的数互不相同，所以他有以下填法:\n\n第一种：$b_{1}=1,b_{2}=2,b_{3}=3$。\n\n第二种：$b_{1}=2,b_{3}=3,b_{3}=4$。\n\n第三种：$b_{1}=1,b_{2}=2,b_{3}=4$。\n\n第四种：$b_{1}=1,b_{2}=3,b_{3}=4$。\n\n若 Alice 选择第一种填法，则 Bob 为最小化 $X$，选择第二种填法，得到 $X=0$。\n\n若 Alice 选择第二种填法，则 Bob 为最小化 $X$，选择第一种填法，得到 $X=0$。\n\n若 Alice 选择第三种填法，则 Bob 为最小化 $X$，选择第一种填法，得到 $X=0$。\n\n若 Alice 选择第四种填法，则 Bob 无论选择哪种填法，$X$ 均不小于 $1$。\n\n因此，Alice 为最大化 $X$ 的值，她会选择第四种填法。\n\n**【子任务】**\n\n表格中 $\\sum n,\\sum m$ 分别表示同个测试点内所有测试数据的 $n$ 总和和 $m$ 总和。 $\\sum n^{2}, \\sum m^{2}, \\sum n^{3}, \\sum m^{3}$ 的含义类似。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nbt12df0.png)\n\n特殊性质 A：对于任何 $1 \\leq i \\leq n,S_i$ 和 $T_i$ 互不相交，即 $S_i \\cap T_i=\\emptyset$。\n\n特殊性质 B：$n \\geq 3$，且对于任何 $1 \\leq i<n, T_{1} =\\{i,i+1\\}$，且 $T_{n}=\\{n,1\\}$。\n\n特殊性质 C：对于任何 $1 \\leq i \\leq n,|S_i|=1$。\n\n特殊性质 D：对于任何 $1 \\leq i \\leq n,S_{i}=T_{i}$。\n\n**【提示】**\n\n本题部分测试点读入规模较大，我们建议你采取效率较高的读入方式。", "locale": "zh-CN"}}}
{"pid": "P9171", "type": "P", "difficulty": 7, "samples": [["5\n6 10 6\n1 9 3 4 7 6\n5 8 4\n1 7 2 6\n9 10 2\n3 6\n6 11 6\n1 7 5 8 3 9\n9 10 5\n5 10 6 4 7\n", "1 63\n8 245\n29378 1267731\n1 17\n78 1820\n"], ["见附件中的 color/color2.in", "见附件中的 color/color2.ans"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2023", "Special Judge", "O2优化", "组合数学"], "title": "[省选联考 2023] 染色数组", "background": "", "description": "给定一个长度为 $n$ 的正整数数组 $A$，其中每个数都在 $1$ 到 $m$ 之间，从左到右排成一排。现在要将每个数字染成红色或者绿色，我们定义一个染色方案为优秀的染色方案，当且仅当它满足：\n\n1. 每个数 $A_{i}$ 要么被染成红色，要么被染成绿色。\n2. 红色的数从左到右依次严格递增，绿色的数从左到右依次严格递减。\n\n例如：$1\\;9\\;3\\;4\\;7\\;6$ 中，将 $1\\;3\\;4\\;7$ 染成红色，$9\\;6$ 染成绿色是优秀的染色方案（$\\color{red}1\\color{green}9\\color{red}347\\color{green}6$）；$1\\;3\\;4\\;6$ 染成红色，$9\\;7$ 染成绿色也是优秀的染色方案（$\\color{red}1\\color{green}9\\color{red}34\\color{green}7\\color{red}6$）。但是将 $1\\;4\\;7\\;6$ 染成红色，$9\\;3$ 染成绿色则**不是**优秀的染色方案，因为 $1\\;4\\;7\\;6$ 不是递增的。$1\\;9\\;5\\;5$ 中，将 $1$ 和任意一个 $5$ 染色红色，$9$ 和另一个 $5$ 染成绿色，也是优秀的染色方案（其中一种是 $\\color{red}1\\color{green}95\\color{red}5$）。\n\n如果一个数组**至少存在两个不同的**优秀的染色方案，那么称这个数组是**完美**的。（两个染色方案不同当且仅当至少存在一个位置上的数字被染成不同的颜色）。\n\n例如，$1\\;9\\;3\\;4\\;7\\;6$ 和 $1\\;9\\;5\\;5$ 都是完美的，因为上面已经分别给出了 $2$ 种优秀的染色方案。而 $2\\;3\\;3\\;3$ 则不是完美的，因为找不到任何一种优秀的染色方案。同时 $1\\;5\\;3\\;6\\;4$ 也不是完美的，因为仅存在一种优秀的染色方案（$\\color{red}1\\color{green}5\\color{red}36\\color{green}4$）。\n\n补充说明：如果红色的数只有 $0$ 个或者 $1$ 个，我们也认为它严格递增；同理如果绿色的数只有 $0$ 个或者 $1$ 个，我们也认为它严格递减。例如 $\\color{red}123$，$\\color{red}1\\color{green}2\\color{red}3$ 都是优秀的的染色方案，因此 $1\\;2\\;3$ 是完美的数组。\n\n我们定义一种给染色方案打分的方式。\n\n对于每个的有序元素对 $A_{i}, A_{j}(i<j)$ :\n\n1. 如果 $A_{j}$ 染成红色，且 $A_{j}<A_{i}$，则该元素对得 $m-A_{j}+1$ 分;\n2. 如果 $A_{j}$ 染成绿色，且 $A_{j}>A_{i}$，则该元素对得 $A_{j}$ 分;\n3. 不满足 1 或 2 ，则该元素对得 $0$ 分。\n\n则一个染色方案的得分为所有有序元素对的得分和。\n\n一个完美的数组的得分为它所有优秀的染色方案的得分的最大值。\n\n现在确定数组 $A$ 的前 $t$ 个数 $A_{1}, A_{2}, \\ldots, A_{t}$, 你需要回答以下两个问题:\n\n- 第一问：有多少种确定 $A$ 中后 $n-t$ 个数的方案使得 $A$ 是一个完美数组？\n- 第二问：所有可能的完美数组的得分和是多少？\n\n由于答案太大，你只需要输出答案在模 $998244353$ 下的结果即可。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $C$，表示数据组数。\n\n接下来包含 $C$ 组数据，每组数据的格式如下：\n\n第一行包含三个整数 $n, m, t$，分别表示数组长度，数组内数字的最大值和确定的前缀长度。\n\n第二行包含 $t$ 个正整数 $A_{1} \\ldots A_{t}$，表示已经确定的前缀。", "outputFormat": "对于每组测试数据输出一行包含两个用单个空格隔开的整数。\n\n- 第一个整数表示优秀数组的数量模 $998244353$ 的值；\n\n- 第二个整数表示优秀数组的得分之和模 $998244353$ 的值。", "hint": "**【评分方式】**\n\n每个测试点 $5$ 分。\n\n每一行应按顺序输出两问的答案，不符合输出格式的输出得 $0$ 分。\n\n程序仅回答对第一问得 $1$ 分，仅回答对第二问得 $4$ 分，两问都答对得 $5$ 分。\n\n如果你不回答第一问或第二问，也需要在对应位置上输出任意一个整数以满足输出格式。\n\n**【子任务】**\n\n对于所有的数据，保证： $1 \\leq C \\leq 5$；$2 \\leq n \\leq 50$；$1 \\leq t \\leq n$；$1 \\leq m \\leq 200$；$1 \\leq A_{i} \\leq m$ 。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/swc3o5bm.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2023] 染色数组", "background": "", "description": "给定一个长度为 $n$ 的正整数数组 $A$，其中每个数都在 $1$ 到 $m$ 之间，从左到右排成一排。现在要将每个数字染成红色或者绿色，我们定义一个染色方案为优秀的染色方案，当且仅当它满足：\n\n1. 每个数 $A_{i}$ 要么被染成红色，要么被染成绿色。\n2. 红色的数从左到右依次严格递增，绿色的数从左到右依次严格递减。\n\n例如：$1\\;9\\;3\\;4\\;7\\;6$ 中，将 $1\\;3\\;4\\;7$ 染成红色，$9\\;6$ 染成绿色是优秀的染色方案（$\\color{red}1\\color{green}9\\color{red}347\\color{green}6$）；$1\\;3\\;4\\;6$ 染成红色，$9\\;7$ 染成绿色也是优秀的染色方案（$\\color{red}1\\color{green}9\\color{red}34\\color{green}7\\color{red}6$）。但是将 $1\\;4\\;7\\;6$ 染成红色，$9\\;3$ 染成绿色则**不是**优秀的染色方案，因为 $1\\;4\\;7\\;6$ 不是递增的。$1\\;9\\;5\\;5$ 中，将 $1$ 和任意一个 $5$ 染色红色，$9$ 和另一个 $5$ 染成绿色，也是优秀的染色方案（其中一种是 $\\color{red}1\\color{green}95\\color{red}5$）。\n\n如果一个数组**至少存在两个不同的**优秀的染色方案，那么称这个数组是**完美**的。（两个染色方案不同当且仅当至少存在一个位置上的数字被染成不同的颜色）。\n\n例如，$1\\;9\\;3\\;4\\;7\\;6$ 和 $1\\;9\\;5\\;5$ 都是完美的，因为上面已经分别给出了 $2$ 种优秀的染色方案。而 $2\\;3\\;3\\;3$ 则不是完美的，因为找不到任何一种优秀的染色方案。同时 $1\\;5\\;3\\;6\\;4$ 也不是完美的，因为仅存在一种优秀的染色方案（$\\color{red}1\\color{green}5\\color{red}36\\color{green}4$）。\n\n补充说明：如果红色的数只有 $0$ 个或者 $1$ 个，我们也认为它严格递增；同理如果绿色的数只有 $0$ 个或者 $1$ 个，我们也认为它严格递减。例如 $\\color{red}123$，$\\color{red}1\\color{green}2\\color{red}3$ 都是优秀的的染色方案，因此 $1\\;2\\;3$ 是完美的数组。\n\n我们定义一种给染色方案打分的方式。\n\n对于每个的有序元素对 $A_{i}, A_{j}(i<j)$ :\n\n1. 如果 $A_{j}$ 染成红色，且 $A_{j}<A_{i}$，则该元素对得 $m-A_{j}+1$ 分;\n2. 如果 $A_{j}$ 染成绿色，且 $A_{j}>A_{i}$，则该元素对得 $A_{j}$ 分;\n3. 不满足 1 或 2 ，则该元素对得 $0$ 分。\n\n则一个染色方案的得分为所有有序元素对的得分和。\n\n一个完美的数组的得分为它所有优秀的染色方案的得分的最大值。\n\n现在确定数组 $A$ 的前 $t$ 个数 $A_{1}, A_{2}, \\ldots, A_{t}$, 你需要回答以下两个问题:\n\n- 第一问：有多少种确定 $A$ 中后 $n-t$ 个数的方案使得 $A$ 是一个完美数组？\n- 第二问：所有可能的完美数组的得分和是多少？\n\n由于答案太大，你只需要输出答案在模 $998244353$ 下的结果即可。", "inputFormat": "**本题有多组测试数据。**\n\n输入的第一行包含一个正整数 $C$，表示数据组数。\n\n接下来包含 $C$ 组数据，每组数据的格式如下：\n\n第一行包含三个整数 $n, m, t$，分别表示数组长度，数组内数字的最大值和确定的前缀长度。\n\n第二行包含 $t$ 个正整数 $A_{1} \\ldots A_{t}$，表示已经确定的前缀。", "outputFormat": "对于每组测试数据输出一行包含两个用单个空格隔开的整数。\n\n- 第一个整数表示优秀数组的数量模 $998244353$ 的值；\n\n- 第二个整数表示优秀数组的得分之和模 $998244353$ 的值。", "hint": "**【评分方式】**\n\n每个测试点 $5$ 分。\n\n每一行应按顺序输出两问的答案，不符合输出格式的输出得 $0$ 分。\n\n程序仅回答对第一问得 $1$ 分，仅回答对第二问得 $4$ 分，两问都答对得 $5$ 分。\n\n如果你不回答第一问或第二问，也需要在对应位置上输出任意一个整数以满足输出格式。\n\n**【子任务】**\n\n对于所有的数据，保证： $1 \\leq C \\leq 5$；$2 \\leq n \\leq 50$；$1 \\leq t \\leq n$；$1 \\leq m \\leq 200$；$1 \\leq A_{i} \\leq m$ 。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/swc3o5bm.png)", "locale": "zh-CN"}}}
{"pid": "P9172", "type": "P", "difficulty": 2, "samples": [["15 0\nkrokodkrokodkrk", "79"], ["5 1\nrokod", "17"], ["8 2\nddkkoorr", "35"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "枚举", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #4] 7Krokods", "background": "[加强版](/problem/U382344) [二次加强版](/problem/U502888)", "description": "Krokod 喜欢和 Paula 玩棋盘游戏。他想玩 7Krokods 游戏，但 Paula 不喜欢复杂的游戏，所以 Krokod 决定他们只用绿卡和鳄鱼卡来玩。\n\nPaula 有 $n$ 张绿色卡片，每张卡片上都写有以下字母之一：$d,k,o,r$。\n\n她的总得分被定义为以下部分的总和。\n\n- 对于每个字母，她得到的分数与写有该字母的卡片数量的平方相同。例如，如果她有 $6$ 张写有字母 $k$ 的卡片，她可以得到 $36$ 分。\n- 每凑成一个单词 `krokod`，她就能得到额外的 $7$ 分。\n\nPaula 也有 $m$ 张鳄鱼卡。她可以用任何一张鳄鱼卡代替一张绿卡，绿卡上有她选择的字母。\n\n请计算她的牌能得到的最大分数。", "inputFormat": "第一行两个整数 $n$ 和 $m(0\\leq n\\leq 100，0\\leq m\\leq 10)$，表示绿卡的数量和鳄鱼卡的数量。\n\n第二行包含一个 $n$ 个字符的序列，其中第 $i$ 个字符代表第 $i$ 张绿卡上的字母。该序列仅由字符 $d,k,o,r$ 组成。", "outputFormat": "一行一个整数，输出 Paula 的最大可能得分。", "hint": "样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bwk9d3gv.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\nPaula 有 $2$ 个字母 $d（2\\times 2=4$ 分），$6$ 个字母 $k（6\\times 6=36$ 分），$4$ 个字母 $o（4\\times 4=16$ 分）和 $3$ 个字母 $r（3\\times 3 = 9$ 分）。单词 krokod 可以拼写 $2$ 次（$7\\times 2=14$ 分）。她的总分是 \n$79$。（$4 + 36 + 16 + 9 + 14 = 79$）。\n\n样例 $2$ 解释：\n\nPaula 可以把她的鳄鱼卡换成一张上面写着字母\n $k$ 的绿卡。\n \n |子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ |\t$m=1$ | $17$ |\n| $2$ |\t$m=2$ | $26$ |\n| $3$ |\t无附加限制 | $7$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #4] 7Krokods", "background": "[加强版](/problem/U382344) [二次加强版](/problem/U502888)", "description": "Krokod 喜欢和 Paula 玩棋盘游戏。他想玩 7Krokods 游戏，但 Paula 不喜欢复杂的游戏，所以 Krokod 决定他们只用绿卡和鳄鱼卡来玩。\n\nPaula 有 $n$ 张绿色卡片，每张卡片上都写有以下字母之一：$d,k,o,r$。\n\n她的总得分被定义为以下部分的总和。\n\n- 对于每个字母，她得到的分数与写有该字母的卡片数量的平方相同。例如，如果她有 $6$ 张写有字母 $k$ 的卡片，她可以得到 $36$ 分。\n- 每凑成一个单词 `krokod`，她就能得到额外的 $7$ 分。\n\nPaula 也有 $m$ 张鳄鱼卡。她可以用任何一张鳄鱼卡代替一张绿卡，绿卡上有她选择的字母。\n\n请计算她的牌能得到的最大分数。", "inputFormat": "第一行两个整数 $n$ 和 $m(0\\leq n\\leq 100，0\\leq m\\leq 10)$，表示绿卡的数量和鳄鱼卡的数量。\n\n第二行包含一个 $n$ 个字符的序列，其中第 $i$ 个字符代表第 $i$ 张绿卡上的字母。该序列仅由字符 $d,k,o,r$ 组成。", "outputFormat": "一行一个整数，输出 Paula 的最大可能得分。", "hint": "样例 $1$ 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bwk9d3gv.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\nPaula 有 $2$ 个字母 $d（2\\times 2=4$ 分），$6$ 个字母 $k（6\\times 6=36$ 分），$4$ 个字母 $o（4\\times 4=16$ 分）和 $3$ 个字母 $r（3\\times 3 = 9$ 分）。单词 krokod 可以拼写 $2$ 次（$7\\times 2=14$ 分）。她的总分是 \n$79$。（$4 + 36 + 16 + 9 + 14 = 79$）。\n\n样例 $2$ 解释：\n\nPaula 可以把她的鳄鱼卡换成一张上面写着字母\n $k$ 的绿卡。\n \n |子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ |\t$m=1$ | $17$ |\n| $2$ |\t$m=2$ | $26$ |\n| $3$ |\t无附加限制 | $7$ |", "locale": "zh-CN"}}}
{"pid": "P9173", "type": "P", "difficulty": 3, "samples": [["0\n4 1 0 1 1", "5"], ["4 0 1 0 1\n4 1 0 0 1", "9"], ["5 0 1 0 0 1\n4 0 0 0 1", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #4] Zrinka", "background": "", "description": "给你两个长度分别为 $n$ 和 $m$ 的数组，它们只由 $0$ 和 $1$ 组成。\n\n你的任务是用偶数替换每个 $0$，用奇数替换每个 $1$。\n\n替换之后，两个数组都应该是单调递增的且所有元素均大于 $0$，并且你最多可以使用每个正整数一次，使用的最大数字要尽可能的小。", "inputFormat": "第一行由 $n+1$ 个整数组成，第一个是 $n(n\\leq 5000)$，其他是描述第一个数组的。\n\n第二行由 $m+1$ 个整数组成，第一个是 $m(m\\leq 5000)$，其他是描述第二个数组的。", "outputFormat": "一行一个正整数，即最大数字。", "hint": "样例 $1$ 解释：\n\n一组可行解：$(\\varnothing),(1,2,3,5)$\n\n样例 $2$ 解释：\n\n一组可行解：$(2,3,4,5),(1,6,8,9)$。\n\n样例 $3$ 解释：\n\n一组可行解：$(2, 3, 6, 8, 9),(4,10,12,13)$。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ |\t$n=0$ | $15$ |\n| $2$ |\t第一个数组只包括 $0$ | $20$ |\n| $3$ |\t$n,m\\leq 500$ | $20$ |\n| $4$ |\t无附加限制 | $7$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #4] Zrinka", "background": "", "description": "给你两个长度分别为 $n$ 和 $m$ 的数组，它们只由 $0$ 和 $1$ 组成。\n\n你的任务是用偶数替换每个 $0$，用奇数替换每个 $1$。\n\n替换之后，两个数组都应该是单调递增的且所有元素均大于 $0$，并且你最多可以使用每个正整数一次，使用的最大数字要尽可能的小。", "inputFormat": "第一行由 $n+1$ 个整数组成，第一个是 $n(n\\leq 5000)$，其他是描述第一个数组的。\n\n第二行由 $m+1$ 个整数组成，第一个是 $m(m\\leq 5000)$，其他是描述第二个数组的。", "outputFormat": "一行一个正整数，即最大数字。", "hint": "样例 $1$ 解释：\n\n一组可行解：$(\\varnothing),(1,2,3,5)$\n\n样例 $2$ 解释：\n\n一组可行解：$(2,3,4,5),(1,6,8,9)$。\n\n样例 $3$ 解释：\n\n一组可行解：$(2, 3, 6, 8, 9),(4,10,12,13)$。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ |\t$n=0$ | $15$ |\n| $2$ |\t第一个数组只包括 $0$ | $20$ |\n| $3$ |\t$n,m\\leq 500$ | $20$ |\n| $4$ |\t无附加限制 | $7$ |", "locale": "zh-CN"}}}
{"pid": "P9174", "type": "P", "difficulty": 5, "samples": [["2 1 2", "500000004"], ["10 2 5", "1"], ["3 141592653589793 2", "468261332"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2022", "矩阵加速", "状态合并", "COCI（克罗地亚）", "状压 DP"], "title": "[COCI 2022/2023 #4] Bojanje", "background": "", "description": "Oliver 是一只不仅能找出 bug 并且喜欢画画的小黄鸭。他最新的画有 $n$ 个部分，每部分用一种不同的颜色涂色。在此之后他得到了很多批评，因为他的画太可预测了。他决定用 $t$ 次迭代修改他的画。在每次迭代中他将做以下操作：\n\nOliver 会均匀随机选择一个下标 $i\\ (1\\le i\\le n)$，然后记住画中第 $i$ 部分的颜色。\nOliver 会再均匀随机选择一个下标 $j\\ (1\\le j\\le n)$。他会把画中第 $j$ 部分涂成和第 $i$ 部分一样的颜色。如果第 $j$ 部分的颜色和第 $i$ 部分相同，那么不会有任何改变。注意 $i$ 可以等于 $j$。\n现在，Oliver 害怕他的画会变得十分单调或者无聊。他认为一幅画是好的，如果画上至少有 $k$ 种不同的颜色。请帮他计算最后这幅画是好的这个事件的概率。", "inputFormat": "第一行包含三个整数 $n,t,k\\ (2\\le k\\le n\\le 10,1\\le t\\le 10^{18})$，意义如题目描述。", "outputFormat": "输出一行一个数，表示答案对 $10^9+7$ 取模后的值。\n\n形式化地，令 $m=10^9+7$。可以知道答案可以用不可约分数  $\\frac{p}{q}$ 表示，其中 $p$ 和 $q$ 是整数，$q\\not\\equiv 0 \\pmod m$。输出 $p\\cdot q^{-1}\\bmod m$。换句话说，输出满足 $0\\le x<m$ 且 $x\\cdot q\\equiv p\\pmod m$ 的整数 $x$。", "hint": "样例 $1$ 解释：画上有两种颜色，所以一次迭代后画和未操作之前相同的概率是 $\\frac{1}{2}$。\n\n样例 $2$ 解释：在两次迭代后，不同的颜色数不可能从 $10$ 变为小于 $5$，所以在任何情况下这幅画都会有至少 $5$ 种不同的颜色。\n \n| 子任务编号 | 附加限制 | 分值 |\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ |\t$k=n$ | $28$ |\n| $2$ |\t$t\\le 1000$ | $36$ |\n| $3$ |\t无附加限制 | $36$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #4] Bojanje", "background": "", "description": "Oliver 是一只不仅能找出 bug 并且喜欢画画的小黄鸭。他最新的画有 $n$ 个部分，每部分用一种不同的颜色涂色。在此之后他得到了很多批评，因为他的画太可预测了。他决定用 $t$ 次迭代修改他的画。在每次迭代中他将做以下操作：\n\nOliver 会均匀随机选择一个下标 $i\\ (1\\le i\\le n)$，然后记住画中第 $i$ 部分的颜色。\nOliver 会再均匀随机选择一个下标 $j\\ (1\\le j\\le n)$。他会把画中第 $j$ 部分涂成和第 $i$ 部分一样的颜色。如果第 $j$ 部分的颜色和第 $i$ 部分相同，那么不会有任何改变。注意 $i$ 可以等于 $j$。\n现在，Oliver 害怕他的画会变得十分单调或者无聊。他认为一幅画是好的，如果画上至少有 $k$ 种不同的颜色。请帮他计算最后这幅画是好的这个事件的概率。", "inputFormat": "第一行包含三个整数 $n,t,k\\ (2\\le k\\le n\\le 10,1\\le t\\le 10^{18})$，意义如题目描述。", "outputFormat": "输出一行一个数，表示答案对 $10^9+7$ 取模后的值。\n\n形式化地，令 $m=10^9+7$。可以知道答案可以用不可约分数  $\\frac{p}{q}$ 表示，其中 $p$ 和 $q$ 是整数，$q\\not\\equiv 0 \\pmod m$。输出 $p\\cdot q^{-1}\\bmod m$。换句话说，输出满足 $0\\le x<m$ 且 $x\\cdot q\\equiv p\\pmod m$ 的整数 $x$。", "hint": "样例 $1$ 解释：画上有两种颜色，所以一次迭代后画和未操作之前相同的概率是 $\\frac{1}{2}$。\n\n样例 $2$ 解释：在两次迭代后，不同的颜色数不可能从 $10$ 变为小于 $5$，所以在任何情况下这幅画都会有至少 $5$ 种不同的颜色。\n \n| 子任务编号 | 附加限制 | 分值 |\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ |\t$k=n$ | $28$ |\n| $2$ |\t$t\\le 1000$ | $36$ |\n| $3$ |\t无附加限制 | $36$ |", "locale": "zh-CN"}}}
{"pid": "P9175", "type": "P", "difficulty": 6, "samples": [["6\n1 2 5 7 10\n1 3 4 8 9\n3 4 7 1 15\n3 5 6 3 11\n3 6 5 6 8\n3\n2 4 15\n6 4 5\n3 5 10", "7\n5\n11"], ["4\n1 2 5 5 8\n2 3 4 6 9\n3 4 6 10 7\n4\n1 4 16\n2 4 16\n1 4 10\n3 4 10", "6\n7\n5\n7"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "可持久化线段树", "整体二分", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #4] Mreža", "background": "### 卡评测封号。", "description": "市长 Mirko 住在一个有 $n$ 个社区的城市里，这 $n$ 个社区用 $n-1$ 条双向道路连接，满足从任何社区出发都可以到达任意其他社区。\n\nMirko 想升级一些道路以疏导交通。对于每条路，我们知道目前在这条路上汽车的行驶速度 $v_i$，升级所需花费 $c_i$ 和升级后在这条路上汽车的行驶速度 $s_i$。\n\n有 $q$ 个不满意的市民来见 Mirko。每个人都有他们自己的升级建议。第 $i$ 个市民的建议是：「我们应该在升级社区 $a_i$ 和 $b_i$ 之间的道路上投资 $e_i$ 欧元。」\n\n对于每个建议，Mirko 感兴趣的是，如果他的目标是使社区 $a_i$ 和 $b_i$ 之间的最低驾驶速度最大化，那么他在升级道路上最多花费 $e_i$ 欧元的话这个最低驾驶速度是多少。\n\nMirko 瞬间意识到这个问题不简单，并且他雇佣你来帮助他！\n", "inputFormat": "第一行包含一个整数 $n\\ (2\\le n\\le 10^5)$，表示社区总数。\n\n接下来 $n-1$ 行，每行五个整数 $x_i,y_i,v_i,c_i,s_i\\ (1\\le x_i,y_i\\le n,1\\le v_i<s_i\\le 10^9,1\\le c_i\\le 10^9)$，表示社区 $x_i$ 和 $y_i$ 之间有一条路相连，目前在这条路上汽车的行驶速度为 $v_i$，升级所需花费为 $c_i$，升级后在这条路上汽车的行驶速度为 $s_i$。\n\n接下来一行一个整数 $q\\ (1\\le q\\le 10^5)$，表示不满意的市民总数。\n\n接下来 $q$ 行，每行三个整数 $a_i,b_i,e_i\\ (1\\le a_i,b_i\\le n,a_i\\neq b_i,1\\le e_i\\le 10^{18})$，意义如题目描述。", "outputFormat": "输出 $q$ 行，表示对每个市民建议的答案。", "hint": "样例解释 $1$：下图展示了这个城市和社区。边上写的分别是目前汽车的行驶速度，升级花费和升级后的汽车行驶速度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/umum0365.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\n如果我们升级 $1$ 和 $2$，$1$ 和 $3$ 之间的道路，从 $2$ 到 $4$ 的行驶速度将变成 $10,9,7$。最小为 $7$。\n\n如果我们升级 $4$ 和 $3$ 之间的道路，从 $6$ 到 $4$ 的行驶速度将变成 $5,15$。最小为 $5$。\n\n如果我们升级 $3$ 和 $5$ 之间的道路，从 $5$ 到 $3$ 的行驶速度将变成 $11$。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ | $n,q\\le 1000$ |\t$19$ |\n| $2$ |\t每个社区最多与两个其他社区相连 | $26$ |\n| $3$ |\t无附加限制 | $55$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #4] Mreža", "background": "### 卡评测封号。", "description": "市长 Mirko 住在一个有 $n$ 个社区的城市里，这 $n$ 个社区用 $n-1$ 条双向道路连接，满足从任何社区出发都可以到达任意其他社区。\n\nMirko 想升级一些道路以疏导交通。对于每条路，我们知道目前在这条路上汽车的行驶速度 $v_i$，升级所需花费 $c_i$ 和升级后在这条路上汽车的行驶速度 $s_i$。\n\n有 $q$ 个不满意的市民来见 Mirko。每个人都有他们自己的升级建议。第 $i$ 个市民的建议是：「我们应该在升级社区 $a_i$ 和 $b_i$ 之间的道路上投资 $e_i$ 欧元。」\n\n对于每个建议，Mirko 感兴趣的是，如果他的目标是使社区 $a_i$ 和 $b_i$ 之间的最低驾驶速度最大化，那么他在升级道路上最多花费 $e_i$ 欧元的话这个最低驾驶速度是多少。\n\nMirko 瞬间意识到这个问题不简单，并且他雇佣你来帮助他！\n", "inputFormat": "第一行包含一个整数 $n\\ (2\\le n\\le 10^5)$，表示社区总数。\n\n接下来 $n-1$ 行，每行五个整数 $x_i,y_i,v_i,c_i,s_i\\ (1\\le x_i,y_i\\le n,1\\le v_i<s_i\\le 10^9,1\\le c_i\\le 10^9)$，表示社区 $x_i$ 和 $y_i$ 之间有一条路相连，目前在这条路上汽车的行驶速度为 $v_i$，升级所需花费为 $c_i$，升级后在这条路上汽车的行驶速度为 $s_i$。\n\n接下来一行一个整数 $q\\ (1\\le q\\le 10^5)$，表示不满意的市民总数。\n\n接下来 $q$ 行，每行三个整数 $a_i,b_i,e_i\\ (1\\le a_i,b_i\\le n,a_i\\neq b_i,1\\le e_i\\le 10^{18})$，意义如题目描述。", "outputFormat": "输出 $q$ 行，表示对每个市民建议的答案。", "hint": "样例解释 $1$：下图展示了这个城市和社区。边上写的分别是目前汽车的行驶速度，升级花费和升级后的汽车行驶速度。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/umum0365.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)\n\n如果我们升级 $1$ 和 $2$，$1$ 和 $3$ 之间的道路，从 $2$ 到 $4$ 的行驶速度将变成 $10,9,7$。最小为 $7$。\n\n如果我们升级 $4$ 和 $3$ 之间的道路，从 $6$ 到 $4$ 的行驶速度将变成 $5,15$。最小为 $5$。\n\n如果我们升级 $3$ 和 $5$ 之间的道路，从 $5$ 到 $3$ 的行驶速度将变成 $11$。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ | $n,q\\le 1000$ |\t$19$ |\n| $2$ |\t每个社区最多与两个其他社区相连 | $26$ |\n| $3$ |\t无附加限制 | $55$ |", "locale": "zh-CN"}}}
{"pid": "P9176", "type": "P", "difficulty": 4, "samples": [["3\n2 1\n3 1\n1 1", "2\n2\n2"], ["4\n17 2\n23 5\n11 4\n9 5", "17\n23\n17\n11"], ["3\n10 20\n100 5\n1000 5", "10\n10\n10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #4] Vrsta", "background": "", "description": "Domagoj 最喜欢的课是体育课。每节体育课都以热身运动开始。体育老师有一个有趣的方法来选择带领其他同学做热身运动的学生。学生们按身高从低到高的顺序站成一排，老师会选择站在队伍中间的学生。如果有两个学生在中间，他将选择较矮的那个。例如：如果学生的身高为 $1, 3, 5, 7, 11$，身高为 $5$ 的学生将带领其他同学做热身运动。\n\nDomagoj 记不住他同学的身高。幸运的是，站在他旁边的 Lovro 十分擅长估计他人的身高。他给了 Domagoj $n$ 条信息：「有 $a_i$ 个身高为 $v_i$ 的学生进入了体育馆。」在 Lovro 说完每条信息之后，Domagoj 都对带领其他同学做热身运动的那个同学的身高感兴趣。假定所有进入体育馆的同学都是来上体育课的。请帮他回答他的问题！", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 200\\ 000)$，表示 Lovro 的信息条数。\n\n接下来 $n$ 行包含两个整数 $v_i,a_i\\ (1\\le v_i,a_i\\le 10^9)$，表示 Lovro 所给信息中的身高和人数。", "outputFormat": "输出 $n$ 行，表示在 Lovro 给出第 $i$ 条信息后，对 Domagoj 问题的回答。", "hint": "|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ | $n,v_i\\le 1000$ | $17$ |\n| $2$ | $a_1=a_2=\\ldots=a_n=1$ | $24$ |\n| $3$ | $v_1<v_2<\\ldots <v_n$ |\t$26$ |\n| $4$ |\t无附加限制 |\t$33$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #4] Vrsta", "background": "", "description": "Domagoj 最喜欢的课是体育课。每节体育课都以热身运动开始。体育老师有一个有趣的方法来选择带领其他同学做热身运动的学生。学生们按身高从低到高的顺序站成一排，老师会选择站在队伍中间的学生。如果有两个学生在中间，他将选择较矮的那个。例如：如果学生的身高为 $1, 3, 5, 7, 11$，身高为 $5$ 的学生将带领其他同学做热身运动。\n\nDomagoj 记不住他同学的身高。幸运的是，站在他旁边的 Lovro 十分擅长估计他人的身高。他给了 Domagoj $n$ 条信息：「有 $a_i$ 个身高为 $v_i$ 的学生进入了体育馆。」在 Lovro 说完每条信息之后，Domagoj 都对带领其他同学做热身运动的那个同学的身高感兴趣。假定所有进入体育馆的同学都是来上体育课的。请帮他回答他的问题！", "inputFormat": "第一行一个整数 $n\\ (1\\le n\\le 200\\ 000)$，表示 Lovro 的信息条数。\n\n接下来 $n$ 行包含两个整数 $v_i,a_i\\ (1\\le v_i,a_i\\le 10^9)$，表示 Lovro 所给信息中的身高和人数。", "outputFormat": "输出 $n$ 行，表示在 Lovro 给出第 $i$ 条信息后，对 Domagoj 问题的回答。", "hint": "|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n| $0$ | 是样例 | $0$ |\n| $1$ | $n,v_i\\le 1000$ | $17$ |\n| $2$ | $a_1=a_2=\\ldots=a_n=1$ | $24$ |\n| $3$ | $v_1<v_2<\\ldots <v_n$ |\t$26$ |\n| $4$ |\t无附加限制 |\t$33$ |", "locale": "zh-CN"}}}
{"pid": "P9177", "type": "P", "difficulty": 1, "samples": [["31 3", "+---------------------+\n|........1..2..3..4..5|\n|..6..7..8..9.10.11.12|\n|.13.14.15.16.17.18.19|\n|.20.21.22.23.24.25.26|\n|.27.28.29.30.31......|\n+---------------------+"], ["1 5", "+---------------------+\n|..............1......|\n+---------------------+"], ["28 7", "+---------------------+\n|....................1|\n|..2..3..4..5..6..7..8|\n|..9.10.11.12.13.14.15|\n|.16.17.18.19.20.21.22|\n|.23.24.25.26.27.28...|\n+---------------------+"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #5] Kalendar", "background": "", "description": "Magdalena 喜欢日历，她为每个月制作自己的日历。\n\n每月的每一天都正好用三个字符表示：\n\n- 如果天数是一位数，则表示为 `..X`。例如：数字 $7$ 被表示为 `..7`。\n- 如果天数是两位数，那么它表示为 `.XY`。例如：数字 $17$ 被表示为 `.17`。\n\n日历的每一行代表一个星期，每个星期由 $7$ 天组成。如果\n一周没有所有的 $7$ 天（因为有可能这个月不是从星期一开始的，或者不是在星期日结束的），那么缺失的日子就用 `...` 表示。\n\nMagdalena 也希望她的日历是漂亮的。她将用以下方式来装饰它：\n她将在上下两边填上 `-`（ASCII 45），左右两边填上 `|`（ASCII 124），而四个角落用 `+`（ASCII 43）。\n\n你的任务是确定 Magdalena 日历的格式，如果它有 $n$ 天，并且每月的第一天是一周的第 $x$ 天。例如，如果 $x=1$，这个月就从星期一开始，如果 $x=5$，就从星期五开始。\n\n我们假设一周的第一天是星期一。", "inputFormat": "一行，包含整数 $n$ 和 $x(1\\leq n\\leq 99,1\\leq x\\leq 7)$，表示该月的天数，以及该月的起始日。", "outputFormat": "输出 Magdalena 日历的样子。", "hint": "| Subtask | $pts$ | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 是样例 |\n| $1$ | $7$ | $n+x\\leq 8$ |\n| $2$ | $19$ | $x=1$ |\n| $3$ | $24$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #5] Kalendar", "background": "", "description": "Magdalena 喜欢日历，她为每个月制作自己的日历。\n\n每月的每一天都正好用三个字符表示：\n\n- 如果天数是一位数，则表示为 `..X`。例如：数字 $7$ 被表示为 `..7`。\n- 如果天数是两位数，那么它表示为 `.XY`。例如：数字 $17$ 被表示为 `.17`。\n\n日历的每一行代表一个星期，每个星期由 $7$ 天组成。如果\n一周没有所有的 $7$ 天（因为有可能这个月不是从星期一开始的，或者不是在星期日结束的），那么缺失的日子就用 `...` 表示。\n\nMagdalena 也希望她的日历是漂亮的。她将用以下方式来装饰它：\n她将在上下两边填上 `-`（ASCII 45），左右两边填上 `|`（ASCII 124），而四个角落用 `+`（ASCII 43）。\n\n你的任务是确定 Magdalena 日历的格式，如果它有 $n$ 天，并且每月的第一天是一周的第 $x$ 天。例如，如果 $x=1$，这个月就从星期一开始，如果 $x=5$，就从星期五开始。\n\n我们假设一周的第一天是星期一。", "inputFormat": "一行，包含整数 $n$ 和 $x(1\\leq n\\leq 99,1\\leq x\\leq 7)$，表示该月的天数，以及该月的起始日。", "outputFormat": "输出 Magdalena 日历的样子。", "hint": "| Subtask | $pts$ | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 是样例 |\n| $1$ | $7$ | $n+x\\leq 8$ |\n| $2$ | $19$ | $x=1$ |\n| $3$ | $24$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P9178", "type": "P", "difficulty": 4, "samples": [["4 4\n9 12 9 11\n", "2 3 2 3"], ["4 4\n5 7 3 9", "2 3 2 3\n"], ["4 4\n3 4 6 10\n", "3 3 2 3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2022", "位运算", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #5] Diskurs", "background": null, "description": "给你 $n$ 个非负整数 $a_1, a_2, \\cdots a\n_n$，任何一个都小于 $2^m$。\n\n对于其中的每一个数，你都要找出它与数组中其他元素之间的最大哈明距离。\n\n两个非负整数的哈明距离被定义为在这些数字的二进制表示中，它们之间有多少个不同的位置（如果有必要，加上前导零）。\n\n形式上，对于每个 $i$ 求：\n\n$$\\max\\limits_{1\\leq j\\leq n} \\operatorname{hamming}(a_i,a_j)$$", "inputFormat": "第一行包含两个整数 $n$ 和 $m(1\\leq n\\leq 2^\nm,1\\leq m\\leq 20)$。\n第二行包含 $n$ 个数字 $a_i(0 \\leq a_i < 2^\nm)$。", "outputFormat": "一行 $n$ 个数，第 $i$ 个数表示 $a_i$ 与数组中其他元素之间的最大哈明距离。", "hint": "| Subatask | $\\text{pts}$ | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 是样例 |\n| $1$ | $20$ | $m\\leq 10$ |\n| $2$ | $25$ | $m\\leq 16$ |\n| $3$ | $25$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #5] Diskurs", "background": null, "description": "给你 $n$ 个非负整数 $a_1, a_2, \\cdots a\n_n$，任何一个都小于 $2^m$。\n\n对于其中的每一个数，你都要找出它与数组中其他元素之间的最大哈明距离。\n\n两个非负整数的哈明距离被定义为在这些数字的二进制表示中，它们之间有多少个不同的位置（如果有必要，加上前导零）。\n\n形式上，对于每个 $i$ 求：\n\n$$\\max\\limits_{1\\leq j\\leq n} \\operatorname{hamming}(a_i,a_j)$$", "inputFormat": "第一行包含两个整数 $n$ 和 $m(1\\leq n\\leq 2^\nm,1\\leq m\\leq 20)$。\n第二行包含 $n$ 个数字 $a_i(0 \\leq a_i < 2^\nm)$。", "outputFormat": "一行 $n$ 个数，第 $i$ 个数表示 $a_i$ 与数组中其他元素之间的最大哈明距离。", "hint": "| Subatask | $\\text{pts}$ | 限制 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 是样例 |\n| $1$ | $20$ | $m\\leq 10$ |\n| $2$ | $25$ | $m\\leq 16$ |\n| $3$ | $25$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P9179", "type": "P", "difficulty": 4, "samples": [["6 6\n1\n2\n3\n4\n5\n6\n", "-1\n2\n1\n2\n0\n1\n"], ["20 5\n7\n8\n2\n19\n12\n", "1\n9\n9\n0\n5\n"], ["10000 4\n1234\n2345\n3456\n7890\n", "15\n148\n3332\n37\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2022", "素数判断,质数,筛法", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #5] Logaritam", "background": "", "description": "定义对数序列为一个长为 $n$ 的对数序列 $(a_1,a_2,\\ldots,a_n)$，满足对于所有正整数 $x,y$ 且 $xy\\le n$，有 $a_{xy}=a_x+a_y$。一个长为 $6$ 的对数序列例子为 $0,1,\\pi,2,0.7,1+\\pi$。\n\n有 $q$ 个长度为 $n$ 的对数序列，但是现在每个序列都恰好有一个元素被改掉了。给你序列个数 $q$，序列长度 $n$ 和每个序列被改动的元素位置 $x_i$，对于每个序列，输出在不改动已经更改的元素的情况下，至少要修改序列中多少个位置的元素才能使这个序列仍然是对数序列。\n\n注：可以证明对于任意的初始对数序列，改动同一位置后，在不改动这个位置的情况下将序列变为对数序列的最小改动数都是相等的。", "inputFormat": "第一行两个正整数 $n,q\\ (1\\le n\\le 10^8,1\\le q\\le 10^4)$，分别表示序列长度和序列个数。\n\n接下来 $q$ 行，第 $i$ 行一个正整数 $x_i\\ (1\\le x_i\\le n)$，表示第 $i$ 个序列中修改的元素下标。", "outputFormat": "如果第 $i$ 个序列无法在不改动已经更改的元素的情况下，将原序列变为对数序列，则输出 `-1`，否则输出最少更改元素个数。", "hint": "样例 $1$ 解释：\n\n假设初始序列是 $0,1,\\pi,2,0.7,1+\\pi$，修改第四个元素为 8，那就可以把第二个元素改为 $4$，把第六个元素改为 $4+\\pi$，这样序列变成 $0,4,\\pi,8,0.7,4+\\pi$，又变成了对数序列。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|$0$|\t是样例\t|$0$|\n|$1$|\t$n\\le 20,q\\le 20$\t|$17$|\n|$2$|\t$q\\le 8$\t|$24$|\n|$3$|\t$n\\le 10^4$\t|$26$|\n|$4$|\t无附加限制\t|$33$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #5] Logaritam", "background": "", "description": "定义对数序列为一个长为 $n$ 的对数序列 $(a_1,a_2,\\ldots,a_n)$，满足对于所有正整数 $x,y$ 且 $xy\\le n$，有 $a_{xy}=a_x+a_y$。一个长为 $6$ 的对数序列例子为 $0,1,\\pi,2,0.7,1+\\pi$。\n\n有 $q$ 个长度为 $n$ 的对数序列，但是现在每个序列都恰好有一个元素被改掉了。给你序列个数 $q$，序列长度 $n$ 和每个序列被改动的元素位置 $x_i$，对于每个序列，输出在不改动已经更改的元素的情况下，至少要修改序列中多少个位置的元素才能使这个序列仍然是对数序列。\n\n注：可以证明对于任意的初始对数序列，改动同一位置后，在不改动这个位置的情况下将序列变为对数序列的最小改动数都是相等的。", "inputFormat": "第一行两个正整数 $n,q\\ (1\\le n\\le 10^8,1\\le q\\le 10^4)$，分别表示序列长度和序列个数。\n\n接下来 $q$ 行，第 $i$ 行一个正整数 $x_i\\ (1\\le x_i\\le n)$，表示第 $i$ 个序列中修改的元素下标。", "outputFormat": "如果第 $i$ 个序列无法在不改动已经更改的元素的情况下，将原序列变为对数序列，则输出 `-1`，否则输出最少更改元素个数。", "hint": "样例 $1$ 解释：\n\n假设初始序列是 $0,1,\\pi,2,0.7,1+\\pi$，修改第四个元素为 8，那就可以把第二个元素改为 $4$，把第六个元素改为 $4+\\pi$，这样序列变成 $0,4,\\pi,8,0.7,4+\\pi$，又变成了对数序列。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|$0$|\t是样例\t|$0$|\n|$1$|\t$n\\le 20,q\\le 20$\t|$17$|\n|$2$|\t$q\\le 8$\t|$24$|\n|$3$|\t$n\\le 10^4$\t|$26$|\n|$4$|\t无附加限制\t|$33$|", "locale": "zh-CN"}}}
{"pid": "P9180", "type": "P", "difficulty": 5, "samples": [["5 6\n1 2 3 4 5\n1 1\n1 2\n1 3\n1 4\n1 6\n1 5\n", "4"], ["5 3\n1 3 2 2 1\n3 1\n1 3\n2 2\n", "2"], ["9 5\n1 3 2 5 1 4 6 2 1\n3 2\n2 3\n1 1\n1 2\n1 1\n", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2022", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #5] Slastičarnica", "background": null, "description": "有一列数 $a_1,\\ldots,a_n$ 和 $q$ 次操作，每次操作形如「删掉长为 $d_i$ 的前缀或后缀，且需要保证这个前缀和后缀中所有元素都大于等于 $s_i$。」每次操作前，你可以选择长度任意的前缀或后缀（可以为空，且两端可同时选择），并删除它。如果某次操作无法进行，则停止这次和之后的所有操作。问最多可以进行多少次操作。", "inputFormat": "第一行两个正整数 $n,q\\ (1\\le n\\le 5\\ 000,1\\le q\\le 2\\cdot 10^5)$，表示序列长度和操作次数。\n\n第二行 $n$ 个正整数 $a_i\\ (1\\le a_i\\le 10^9)$，表示这个数列。\n\n接下来 $q$ 行，每行两个整数 $d_i,s_i\\ (1\\le d_i\\le n,1\\le s_i\\le 10^9)$，表示一次操作。", "outputFormat": "输出一行一个整数，表示最多能进行多少次操作。", "hint": "样例 $3$ 解释：\n\n首先删除前缀 $(1)$，之后进行第一次操作，删除前缀 $(3,2,5)$。此时序列变为 $(1,4,6,2,1)$。\n\n然后删除前缀 $(1)$，之后进行第二次操作，删除前缀 $(4,6)$，此时序列变为 $(2,1)$。\n\n然后不删除任何前缀或后缀，之后进行第三次操作，删除后缀 $(1)$，此时序列变为 $(2)$。\n\n然后不删除任何前缀或后缀，之后进行第四次操作，删除唯一剩余的 $(2)$，此时序列变为空序列。\n\n最后一次操作由于序列为空无法完成，操作停止。\n\n因此一共进行了四次操作。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|$0$|\t是样例|\t$0$|\n|$1$|\t$n,q\\le 100$|\t$19$|\n|$2$|\t$d_1=d_2=\\ldots=d_q=1$|\t$28$|\n|$3$|\t无附加限制|\t$53$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #5] Slastičarnica", "background": null, "description": "有一列数 $a_1,\\ldots,a_n$ 和 $q$ 次操作，每次操作形如「删掉长为 $d_i$ 的前缀或后缀，且需要保证这个前缀和后缀中所有元素都大于等于 $s_i$。」每次操作前，你可以选择长度任意的前缀或后缀（可以为空，且两端可同时选择），并删除它。如果某次操作无法进行，则停止这次和之后的所有操作。问最多可以进行多少次操作。", "inputFormat": "第一行两个正整数 $n,q\\ (1\\le n\\le 5\\ 000,1\\le q\\le 2\\cdot 10^5)$，表示序列长度和操作次数。\n\n第二行 $n$ 个正整数 $a_i\\ (1\\le a_i\\le 10^9)$，表示这个数列。\n\n接下来 $q$ 行，每行两个整数 $d_i,s_i\\ (1\\le d_i\\le n,1\\le s_i\\le 10^9)$，表示一次操作。", "outputFormat": "输出一行一个整数，表示最多能进行多少次操作。", "hint": "样例 $3$ 解释：\n\n首先删除前缀 $(1)$，之后进行第一次操作，删除前缀 $(3,2,5)$。此时序列变为 $(1,4,6,2,1)$。\n\n然后删除前缀 $(1)$，之后进行第二次操作，删除前缀 $(4,6)$，此时序列变为 $(2,1)$。\n\n然后不删除任何前缀或后缀，之后进行第三次操作，删除后缀 $(1)$，此时序列变为 $(2)$。\n\n然后不删除任何前缀或后缀，之后进行第四次操作，删除唯一剩余的 $(2)$，此时序列变为空序列。\n\n最后一次操作由于序列为空无法完成，操作停止。\n\n因此一共进行了四次操作。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|$0$|\t是样例|\t$0$|\n|$1$|\t$n,q\\le 100$|\t$19$|\n|$2$|\t$d_1=d_2=\\ldots=d_q=1$|\t$28$|\n|$3$|\t无附加限制|\t$53$|", "locale": "zh-CN"}}}
{"pid": "P9181", "type": "P", "difficulty": 6, "samples": [["2 3\n4 5\n", "6.5200982141\n"], ["1 6\n10\n", "24.0000000000\n"], ["4 7\n5 5 6 6\n", "18.5706715170\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "COCI（克罗地亚）"], "title": "[COCI 2022/2023 #5] Zastave", "background": "", "description": "有 $n$ 个直角三角形，第 $i$ 个直角三角形的斜边长度为 $r_i$，这些直角三角形的高度和不超过 $S$。求这 $n$ 个直角三角形的最大面积和。", "inputFormat": "第一行两个整数 $n,S\\ (1\\le n\\le 10^5,1\\le S\\le 10^{10})$，表示三角形个数和这些三角形的高度之和的最大值。\n\n第二行 $n$ 个整数 $r_i\\ (1\\le r_i\\le 10^5)$。", "outputFormat": "输出这 $n$ 个直角三角形的最大面积和（保留 $10$ 位小数）。如果你的输出与答案的绝对误差或相对误差不超过 $10^{-6}$ 则认为你的输出正确。", "hint": "样例 $2$ 解释：\n\n最大可能的情况是这个三角形的三边长为 $6,8,10$，面积为 $24$。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|$0$|\t是样例|\t$0$|\n|$1$|\t$n\\le 100$|\t$37$|\n|$2$|\t$n\\le 1000$|\t$20$|\n|$3$|\t无附加限制|\t$43$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2022/2023 #5] Zastave", "background": "", "description": "有 $n$ 个直角三角形，第 $i$ 个直角三角形的斜边长度为 $r_i$，这些直角三角形的高度和不超过 $S$。求这 $n$ 个直角三角形的最大面积和。", "inputFormat": "第一行两个整数 $n,S\\ (1\\le n\\le 10^5,1\\le S\\le 10^{10})$，表示三角形个数和这些三角形的高度之和的最大值。\n\n第二行 $n$ 个整数 $r_i\\ (1\\le r_i\\le 10^5)$。", "outputFormat": "输出这 $n$ 个直角三角形的最大面积和（保留 $10$ 位小数）。如果你的输出与答案的绝对误差或相对误差不超过 $10^{-6}$ 则认为你的输出正确。", "hint": "样例 $2$ 解释：\n\n最大可能的情况是这个三角形的三边长为 $6,8,10$，面积为 $24$。\n\n|子任务编号|\t附加限制|\t分值|\n|:-:|:-:|:-:|\n|$0$|\t是样例|\t$0$|\n|$1$|\t$n\\le 100$|\t$37$|\n|$2$|\t$n\\le 1000$|\t$20$|\n|$3$|\t无附加限制|\t$43$|", "locale": "zh-CN"}}}
{"pid": "P9183", "type": "P", "difficulty": 4, "samples": [["4\nBEEF\n", "2\n1\n2\n"], ["9\nFEBFEBFEB\n", "2\n2\n3"], ["10\nBFFFFFEBFE", "3\n2\n4\n6"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "USACO", "2023", "分类讨论"], "title": "[USACO23OPEN] FEB B", "background": "", "description": "Bessie and Elsie are plotting to overthrow Farmer John at last! They plan it out\nover $N$ text messages. Their conversation can be\nrepresented by a string $S$ of length $N$ where $S_i$ is either `B` or `E`,\nmeaning the $i$ th message was sent by Bessie or Elsie, respectively. \n\nHowever, Farmer John hears of the plan and attempts to intercept their\nconversation. Thus, some letters of $S$ are `F`, meaning Farmer John obfuscated\nthe message and the sender is unknown.\n\nThe  **excitement level** of a non-obfuscated conversation is the number of\ntimes a cow double-sends - that is, the number of occurrences of substring `BB`\nor `EE` in $S$. You want to find the excitement level of the original message,\nbut you don’t know which of Farmer John’s messages were actually Bessie’s\n/ Elsie’s. Over all possibilities, output all possible excitement levels of\n$S$.", "inputFormat": "The first line will consist of one integer $N$.\n\nThe next line contains $S$.", "outputFormat": "First output $K$, the number of distinct excitement levels possible. On the next\n$K$ lines, output the excitement levels, in increasing order.", "hint": "$1\\le N\\le 2\\cdot 10^5$.\n\n- Inputs 4-8: $N\\le 10$.\n- Inputs 9-20: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] FEB B", "background": "", "description": "Bessie and Elsie are plotting to overthrow Farmer John at last! They plan it out\nover $N$ text messages. Their conversation can be\nrepresented by a string $S$ of length $N$ where $S_i$ is either `B` or `E`,\nmeaning the $i$ th message was sent by Bessie or Elsie, respectively. \n\nHowever, Farmer John hears of the plan and attempts to intercept their\nconversation. Thus, some letters of $S$ are `F`, meaning Farmer John obfuscated\nthe message and the sender is unknown.\n\nThe  **excitement level** of a non-obfuscated conversation is the number of\ntimes a cow double-sends - that is, the number of occurrences of substring `BB`\nor `EE` in $S$. You want to find the excitement level of the original message,\nbut you don’t know which of Farmer John’s messages were actually Bessie’s\n/ Elsie’s. Over all possibilities, output all possible excitement levels of\n$S$.", "inputFormat": "The first line will consist of one integer $N$.\n\nThe next line contains $S$.", "outputFormat": "First output $K$, the number of distinct excitement levels possible. On the next\n$K$ lines, output the excitement levels, in increasing order.", "hint": "$1\\le N\\le 2\\cdot 10^5$.\n\n- Inputs 4-8: $N\\le 10$.\n- Inputs 9-20: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] FEB B", "background": "", "description": "贝西和埃尔希正在密谋最终推翻他们的主人——农夫约翰！他们通过 $N$ 条短信进行计划。他们的对话可以用一个长度为 $N$ 的字符串 $S$ 来表示。     \n其中 $S_i$ 是字母 ```B``` 或 ```E```，这意味着第 $i$ 条消息分别由贝西或埃尔希发送的。\n\n\n然而，农夫约翰听说了这个消息，并试图拦截他们的谈话。因此，字符串 $S$ 的一些字母是 ```F```，这意味着农夫约翰混淆了信息，发件人未知（贝西、埃尔希都有可能）。   \n**注：约翰没有发送信息！他只是在干扰奶牛间的通话！**\n\n\n未混淆对话的兴奋程度是**一只奶牛重复发送信息的次数**。也就是说，子串 ```BB``` 或 ```EE``` 在 $S$ 中出现的次数。你想找到原始信息的兴奋程度，但你不知道约翰的信息中哪一条实际上是贝西或埃尔希的。在所有可能的情况下，**从小到大输出**所有可能的兴奋程度。", "inputFormat": "第一行：一个整数 $N$（通话长度）。       \n第二行：一个字符串 $S$（通话内容）。", "outputFormat": "第一行：输出一个整数 $K$，为**不同**兴奋程度的可能数量。   \n随后 $K$ 行：每行一个整数，为每种兴奋程度。**注意按照从小到大的顺序输出。**", "hint": "$1 \\le N \\le 2 \\times 10^5$。\n- 测试点 4~8：$N \\le 10$\n- 测试点 9~20：无额外限制。", "locale": "zh-CN"}}}
{"pid": "P9184", "type": "P", "difficulty": 4, "samples": [["3\n1 1 1\nbessie noun\n10 5 4\nbessie noun\ntaught transitive-verb\nflew intransitive-verb\nelsie noun\nfarmer noun\njohn noun\nand conjunction\nand conjunction\nnhoj noun\nmooed intransitive-verb\n24 5 4\nbut conjunction\nbessie noun\ntaught transitive-verb\nflew intransitive-verb\nelsie noun\nfarmer noun\njohn noun\nand conjunction\nand conjunction\nnhoj noun\nmooed intransitive-verb\nbob noun\nimpressed transitive-verb\ncow noun\nimpressed transitive-verb\nleaped intransitive-verb\nelsie noun\nbella noun\nbuttercup noun\npushed transitive-verb\nmooed intransitive-verb\nenvy noun\njohn noun\nnhoj noun\n", "0\n\n9\nnhoj mooed. farmer taught elsie, bessie and john flew.\n23\nnhoj mooed. nhoj impressed john, farmer, elsie, bessie and cow impressed bob. bella pushed elsie and buttercup flew. envy mooed but john leaped."]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "字符串", "贪心", "USACO", "2023", "Special Judge"], "title": "[USACO23OPEN] Moo Language B", "background": "Farmer John is interested in better interacting with his fellow cows, so he\ndecided he will learn the moo language!", "description": "Moo language is actually quite similar to English, but more minimalistic. There\nare only four types of words: nouns, transitive verbs, intransitive verbs, and\nconjunctions. Every two consecutive words must be separated by a space.  There\nare also only two types of punctuation: periods and commas.  When a period or\ncomma appears after a word, it appears directly after the word, and is then\nfollowed  by a space if another word appears next.\n\nA sentence needs to follow one of the following formats:\n- Type 1: noun + intransitive verb.\n- Type 2: noun + transitive verb + noun(s). Specifically, at least one noun\nmust follow the transitive verb, and there must be a comma in front of every \nfollowing noun besides the first following noun.\n\nTwo sentences may be joined into a compound sentence if a conjunction is placed\nin between them.  The resulting compound sentence cannot be further joined with\nother sentences or other compound sentences.  Every sentence (or compound\nsentence, if two sentences are joined) must end with a period.\n\nFarmer John has a word bank of $N$ words, $C$ commas, and $P$ periods. He may only use a word or punctuation mark as\nmany times as it appears in the word bank. Help him output a sequence of\nsentences containing the maximum possible number of words.\n\nEach input file contains $T$ independent instances of this\nproblem.\n", "inputFormat": "The first line contains $T$, the number of instances. Each instance is specified\nas follows:\n\nThe first line consists of three integers $N, C$ and $P$.\n\nThe $N$ following lines will consist of two strings. The first string will be\nthe word itself that FJ can use (a string of at least $1$ and at most $10$ lowercase\nletters), and the second string will be either one of the following: noun,\ntransitive-verb, intransitive-verb, or conjunction, denoting the type of the\nword. It is possible the same word occurs more than once in FJ's word bank, but\nit will always have the same type each time it appears.", "outputFormat": "In the first line, output the maximum possible number of words.\n\nIn the second line, output any sequence of sentences with the maximum possible\nnumber of words. Any valid sequence will be accepted.\n\n**The grader is sensitive to whitespace, so make sure not to output any\nextraneous spaces, particularly at the end of each line.**", "hint": "$1\\le T\\le 100$，$1 \\leq P,C\\le N \\leq 10^3$.\n\n- Inputs 2-6: $N\\le 10$.\n- Inputs 7-11: $N\\le 100$.\n- Inputs 12-16: $N\\le 1000$.\n- Inputs with remainder 2 when divided by 5: There are no transitive\nverbs.\n- Inputs with remainder 3 when divided by 5: There are no intransitive\nverbs.\n- Inputs with remainder 4 when divided by 5: There are no conjunctions.", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] Moo Language B", "background": "Farmer John is interested in better interacting with his fellow cows, so he\ndecided he will learn the moo language!", "description": "Moo language is actually quite similar to English, but more minimalistic. There\nare only four types of words: nouns, transitive verbs, intransitive verbs, and\nconjunctions. Every two consecutive words must be separated by a space.  There\nare also only two types of punctuation: periods and commas.  When a period or\ncomma appears after a word, it appears directly after the word, and is then\nfollowed  by a space if another word appears next.\n\nA sentence needs to follow one of the following formats:\n- Type 1: noun + intransitive verb.\n- Type 2: noun + transitive verb + noun(s). Specifically, at least one noun\nmust follow the transitive verb, and there must be a comma in front of every \nfollowing noun besides the first following noun.\n\nTwo sentences may be joined into a compound sentence if a conjunction is placed\nin between them.  The resulting compound sentence cannot be further joined with\nother sentences or other compound sentences.  Every sentence (or compound\nsentence, if two sentences are joined) must end with a period.\n\nFarmer John has a word bank of $N$ words, $C$ commas, and $P$ periods. He may only use a word or punctuation mark as\nmany times as it appears in the word bank. Help him output a sequence of\nsentences containing the maximum possible number of words.\n\nEach input file contains $T$ independent instances of this\nproblem.\n", "inputFormat": "The first line contains $T$, the number of instances. Each instance is specified\nas follows:\n\nThe first line consists of three integers $N, C$ and $P$.\n\nThe $N$ following lines will consist of two strings. The first string will be\nthe word itself that FJ can use (a string of at least $1$ and at most $10$ lowercase\nletters), and the second string will be either one of the following: noun,\ntransitive-verb, intransitive-verb, or conjunction, denoting the type of the\nword. It is possible the same word occurs more than once in FJ's word bank, but\nit will always have the same type each time it appears.", "outputFormat": "In the first line, output the maximum possible number of words.\n\nIn the second line, output any sequence of sentences with the maximum possible\nnumber of words. Any valid sequence will be accepted.\n\n**The grader is sensitive to whitespace, so make sure not to output any\nextraneous spaces, particularly at the end of each line.**", "hint": "$1\\le T\\le 100$，$1 \\leq P,C\\le N \\leq 10^3$.\n\n- Inputs 2-6: $N\\le 10$.\n- Inputs 7-11: $N\\le 100$.\n- Inputs 12-16: $N\\le 1000$.\n- Inputs with remainder 2 when divided by 5: There are no transitive\nverbs.\n- Inputs with remainder 3 when divided by 5: There are no intransitive\nverbs.\n- Inputs with remainder 4 when divided by 5: There are no conjunctions.", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] Moo Language B", "background": "", "description": "### 题目背景\n\nFJ 对与奶牛更好地互动感兴趣，所以他决定学习 moo 语言！\n\n\nmoo 语言与英语相似，但更为简单。单词只有四种类型：名词、及物动词、不及物动词和连词，每两个单词之间必须用空格隔开。标点符号仅包含逗号和句号，它会跟在单词后面，若该标点符号后面存在单词，则需要隔一个空格再放单词。\n\n对于每个句子，都需要遵循以下格式中的一条：\n\n1. 名词+不及物动词。\n2. 名词+及物动词+名词（可以有多个）。及物动词后面必须有至少一个名词。除及物动词后面的第一个名词外，后面的每个名词前面都必须加一个逗号。\n\n也可以在两个句子之间加一个连词，形成复合句，复合句不能与其他句子用连词连接。每一个句子（包括复合句）都必须以句号结尾。\n\nFJ 的词库中有 $N$ 个单词、$C$ 个逗号和 $P$ 个句号。每个单词的使用次数不能超过这个单词在词库中出现的次数。现在，你要帮他输出几个符合以上要求的句子，使总单词数尽量多。\n\n每个输入文件中共包含 $T$ 组样例。", "inputFormat": "第一行输入 $T$，表示样例组数。对于每组样例，格式如下：\n\n第一行输入三个正整数 $N$、$C$ 和 $P$。\n\n在接下来的 $N$ 行，每行输入两个字符串。第一个字符串输入一个 FJ 可以用的单词（全为小写字母，长度为 $1$ 至 $10$），第二个字符串为以下字符串中的任意一个，表示该单词的类型：\n\n- `noun`（名词）；\n- `transitive-verb`（及物动词）；\n- `intransitive-verb`（不及物动词）；\n- `conjunction`（连词）。\n\n同一个单词可能在词库中出现多次，但是每次出现时它们的类型都相同。", "outputFormat": "第一行输出组成符合以上要求的句子序列的最大单词数。\n\n在第二行中，输出句子序列，使单词数最多。本题开启 SPJ，任何符合以上要求的句子序列均可通过。\n\n**请不要输出多余的空格，尤其是在每行末尾。**", "hint": "$1 \\leq T \\leq 100$，$1 \\leq P, C \\leq N \\leq 10^3$。\n\n- 输入 2-6：$N \\leq 10$。\n- 输入 7-11：$N \\leq 100$。\n- 输入 12-16：$N \\leq 1000$。\n- 输入编号除以 5 余 2 的测试点：没有及物动词。\n- 输入编号除以 5 余 3 的测试点：没有不及物动词。\n- 输入编号除以 5 余 4 的测试点：没有连词。\n\ntranslated by [liyuanchen2021](https://www.luogu.com.cn/user/557680)", "locale": "zh-CN"}}}
{"pid": "P9185", "type": "P", "difficulty": 4, "samples": [["5 3 4\n0 2 3\n", "1 2 3 4 0\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "数学", "倍增", "USACO", "2023"], "title": "[USACO23OPEN] Rotate and Shift B", "background": "", "description": "**Note: The time limit for this problem is 4s, 2x the default.**\n\nTo celebrate the start of spring, Farmer John's $N$ cows have invented an intriguing new dance, where they stand in a circle and re-order themselves in a predictable way.\n\nSpecifically, there are $N$ positions around the circle, numbered sequentially from $0$ to $N-1$, with position $0$ following position $N-1$.  A cow resides at each position.  The cows are also numbered sequentially from $0$ to $N-1$.  Initially, cow $i$ starts in position $i$.  You are told a set of $K$ positions $0=A_1<A_2<\\dots<A_K<N$ that are \"active\", meaning the cows in these positions are the next to move.\n\nIn each minute of the dance, two things happen.  First, the cows in the active positions rotate: the cow at position $A_1$ moves to position $A_2$, the cow at position $A_2$ moves to position $A_3$, and so on, with the cow at position $A_K$ moving to position $A_1$.  All of these $K$ moves happen simultaneously, so the after the rotation is complete, all of the active positions still contain exactly one cow.  Next, the active positions themselves shift:\n$A_1$ becomes $A_1+1$, $A_2$ becomes $A_2+1$, and so on (if $A_i = N-1$ for some active position, then $A_i$ circles back around to $0$).\n\nPlease calculate the order of the cows after $T$ minutes of the dance.", "inputFormat": "The first line contains three integers $N, K$ and $T$.\n\nThe second line contains $K$ integers representing the initial set of active positions\n$A_1,A_2, \\dots, A_K$.  Recall that $A_1 = 0$ and that these are given in increasing order.", "outputFormat": "Output the order of the cows after $T$ minutes, starting with the cow in position $0$, separated by\nspaces.", "hint": "For the example above, here are the cow orders and $A$ for the first four timesteps:\n```\nInitial, T = 0: order = [0 1 2 3 4], A = [0 2 3]\nT = 1: order = [3 1 0 2 4]\nT = 1: A = [1 3 4]\nT = 2: order = [3 4 0 1 2]\nT = 2: A = [2 4 0]\nT = 3: order = [2 4 3 1 0]\nT = 3: A = [3 0 1]\nT = 4: order = [1 2 3 4 0]\n```\n\n$1 \\leq K \\leq N \\leq 2 \\cdot 10^5$, $1\\le T\\le 10^9$.\n\n- Inputs 2-7: $N \\leq 1000, T \\leq 10000$.\n- Inputs 8-13: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] Rotate and Shift B", "background": "", "description": "**Note: The time limit for this problem is 4s, 2x the default.**\n\nTo celebrate the start of spring, Farmer John's $N$ cows have invented an intriguing new dance, where they stand in a circle and re-order themselves in a predictable way.\n\nSpecifically, there are $N$ positions around the circle, numbered sequentially from $0$ to $N-1$, with position $0$ following position $N-1$.  A cow resides at each position.  The cows are also numbered sequentially from $0$ to $N-1$.  Initially, cow $i$ starts in position $i$.  You are told a set of $K$ positions $0=A_1<A_2<\\dots<A_K<N$ that are \"active\", meaning the cows in these positions are the next to move.\n\nIn each minute of the dance, two things happen.  First, the cows in the active positions rotate: the cow at position $A_1$ moves to position $A_2$, the cow at position $A_2$ moves to position $A_3$, and so on, with the cow at position $A_K$ moving to position $A_1$.  All of these $K$ moves happen simultaneously, so the after the rotation is complete, all of the active positions still contain exactly one cow.  Next, the active positions themselves shift:\n$A_1$ becomes $A_1+1$, $A_2$ becomes $A_2+1$, and so on (if $A_i = N-1$ for some active position, then $A_i$ circles back around to $0$).\n\nPlease calculate the order of the cows after $T$ minutes of the dance.", "inputFormat": "The first line contains three integers $N, K$ and $T$.\n\nThe second line contains $K$ integers representing the initial set of active positions\n$A_1,A_2, \\dots, A_K$.  Recall that $A_1 = 0$ and that these are given in increasing order.", "outputFormat": "Output the order of the cows after $T$ minutes, starting with the cow in position $0$, separated by\nspaces.", "hint": "For the example above, here are the cow orders and $A$ for the first four timesteps:\n```\nInitial, T = 0: order = [0 1 2 3 4], A = [0 2 3]\nT = 1: order = [3 1 0 2 4]\nT = 1: A = [1 3 4]\nT = 2: order = [3 4 0 1 2]\nT = 2: A = [2 4 0]\nT = 3: order = [2 4 3 1 0]\nT = 3: A = [3 0 1]\nT = 4: order = [1 2 3 4 0]\n```\n\n$1 \\leq K \\leq N \\leq 2 \\cdot 10^5$, $1\\le T\\le 10^9$.\n\n- Inputs 2-7: $N \\leq 1000, T \\leq 10000$.\n- Inputs 8-13: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] Rotate and Shift B", "background": "", "description": "**注意：本题的时间限制为 4 秒，是默认时间限制的 2 倍。**\n\n为了庆祝春天的到来，Farmer John 的 $N$ 头奶牛发明了一种有趣的舞蹈，她们围成一个圆圈，并以一种可预测的方式重新排列自己。\n\n具体来说，圆圈上有 $N$ 个位置，编号从 $0$ 到 $N-1$，其中位置 $0$ 紧接着位置 $N-1$。每个位置上有一头奶牛。奶牛的编号也从 $0$ 到 $N-1$。初始时，奶牛 $i$ 位于位置 $i$。你会被告知一组 $K$ 个“活跃”位置 $0 = A_1 < A_2 < \\dots < A_K < N$，这意味着这些位置上的奶牛是下一批要移动的。\n\n在舞蹈的每一分钟，会发生两件事。首先，活跃位置上的奶牛会旋转：位置 $A_1$ 的奶牛移动到位置 $A_2$，位置 $A_2$ 的奶牛移动到位置 $A_3$，依此类推，位置 $A_K$ 的奶牛移动到位置 $A_1$。所有这些 $K$ 次移动同时发生，因此在旋转完成后，所有活跃位置仍然恰好有一头奶牛。接下来，活跃位置本身会移动：$A_1$ 变为 $A_1 + 1$，$A_2$ 变为 $A_2 + 1$，依此类推（如果某个活跃位置 $A_i = N-1$，则 $A_i$ 会循环回到 $0$）。\n\n请计算舞蹈进行 $T$ 分钟后奶牛的顺序。", "inputFormat": "第一行包含三个整数 $N$、$K$ 和 $T$。\n\n第二行包含 $K$ 个整数，表示初始的活跃位置 $A_1, A_2, \\dots, A_K$。注意 $A_1 = 0$，并且这些位置是按递增顺序给出的。", "outputFormat": "输出 $T$ 分钟后奶牛的顺序，从位置 $0$ 的奶牛开始，用空格分隔。", "hint": "对于上述样例，以下是前四个时间步的奶牛顺序和活跃位置 $A$：\n```\n初始，T = 0：顺序 = [0 1 2 3 4]，A = [0 2 3]\nT = 1：顺序 = [3 1 0 2 4]\nT = 1：A = [1 3 4]\nT = 2：顺序 = [3 4 0 1 2]\nT = 2：A = [2 4 0]\nT = 3：顺序 = [2 4 3 1 0]\nT = 3：A = [3 0 1]\nT = 4：顺序 = [1 2 3 4 0]\n```\n\n$1 \\leq K \\leq N \\leq 2 \\cdot 10^5$，$1 \\leq T \\leq 10^9$。\n\n- 输入 2-7：$N \\leq 1000$，$T \\leq 10000$。\n- 输入 8-13：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9186", "type": "P", "difficulty": 4, "samples": [["5\n1 10 4 2 6\n3\n2 1\n2 8\n4 5\n", "55\n81\n98\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "二分", "USACO", "2023", "前缀和"], "title": "[USACO23OPEN] Milk Sum S", "background": "", "description": "**Note: The time limit for this problem is 4s, 2x the default.**\n\nFarmer John's $N$ cows have integer milk production\nvalues $a_1,\\dots,a_N$.  That is, the $i$ th cow produces $a_i$ units of milk per\nminute.  \n\nEach morning, Farmer John starts with all $N$ cows hooked up to his milking\nmachine in the barn.  He is required to unhook them one by one, sending them out\nfor their daily exercise routine.  The first cow he sends out is unhooked after\njust 1 minute of milking, the second cow he sends out is unhooked after another\nminute of milking, and so on.  Since the first cow (say, cow $x$) only spends\none minute on the milking machine, she contributes only $a_x$ units of total\nmilk.  The second cow (say, cow $y$) spends two total minutes on the milking\nmachine, and therefore contributes $2a_y$ units of total milk.  The third cow\n(say, cow $z$) contributes $3a_z$ total units, and so on.  Let $T$ represent the\nmaximum possible amount of milk, in total, that Farmer John can collect, if he\nunhooks his cows in an optimal order.\n\nFarmer John is curious how $T$ would be affected if some of the milk production\nvalues in his herd were different.  For each of $Q$ queries,\neach specified by two integers $i$ and $j$, please calculate what would be the \nnew value of $T$ if $a_i$ were set to $j$.  Note that\neach query is considering a temporary potential change independent of all other\nqueries; that is, $a_i$ reverts back to its original value before the next query\nis considered.\n\n", "inputFormat": "The first line contains $N$. \n\nThe second line contains $a_1\\dots a_N$.\n\nThe third line contains $Q$.\n\nThe next $Q$ lines each contain two space-separated integers $i$ and $j$.", "outputFormat": "Please print the value of $T$ for each of the $Q$ queries on separate lines.\n", "hint": "For the first query, $a$ would become $[1,1,4,2,6]$, and\n$T =\n1 \\cdot 1 + 2 \\cdot 1 + 3 \\cdot 2 + 4 \\cdot 4 + 5 \\cdot 6 = 55$.\n\nFor the second query, $a$ would become $[1,8,4,2,6]$, and\n$T =\n1 \\cdot 1 + 2 \\cdot 2 + 3 \\cdot 4 + 4 \\cdot 6 + 5 \\cdot 8 = 81$.\n\nFor the third query, $a$ would become $[1,10,4,5,6]$, and\n$T =\n1 \\cdot 1 + 2 \\cdot 4 + 3 \\cdot 5 + 4 \\cdot 6 + 5 \\cdot 10 = 98$.\n\n$1\\le N\\le 1.5\\cdot 10^5$, $0 \\leq a_i \\leq 10^8$,$1\\le Q\\le 1.5\\cdot 10^5$，$0 \\leq j \\leq 10^8$.\n\n- Inputs 2-4: $N,Q\\le 1000$.\n- Inputs 5-11: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] Milk Sum S", "background": "", "description": "**Note: The time limit for this problem is 4s, 2x the default.**\n\nFarmer John's $N$ cows have integer milk production\nvalues $a_1,\\dots,a_N$.  That is, the $i$ th cow produces $a_i$ units of milk per\nminute.  \n\nEach morning, Farmer John starts with all $N$ cows hooked up to his milking\nmachine in the barn.  He is required to unhook them one by one, sending them out\nfor their daily exercise routine.  The first cow he sends out is unhooked after\njust 1 minute of milking, the second cow he sends out is unhooked after another\nminute of milking, and so on.  Since the first cow (say, cow $x$) only spends\none minute on the milking machine, she contributes only $a_x$ units of total\nmilk.  The second cow (say, cow $y$) spends two total minutes on the milking\nmachine, and therefore contributes $2a_y$ units of total milk.  The third cow\n(say, cow $z$) contributes $3a_z$ total units, and so on.  Let $T$ represent the\nmaximum possible amount of milk, in total, that Farmer John can collect, if he\nunhooks his cows in an optimal order.\n\nFarmer John is curious how $T$ would be affected if some of the milk production\nvalues in his herd were different.  For each of $Q$ queries,\neach specified by two integers $i$ and $j$, please calculate what would be the \nnew value of $T$ if $a_i$ were set to $j$.  Note that\neach query is considering a temporary potential change independent of all other\nqueries; that is, $a_i$ reverts back to its original value before the next query\nis considered.\n\n", "inputFormat": "The first line contains $N$. \n\nThe second line contains $a_1\\dots a_N$.\n\nThe third line contains $Q$.\n\nThe next $Q$ lines each contain two space-separated integers $i$ and $j$.", "outputFormat": "Please print the value of $T$ for each of the $Q$ queries on separate lines.\n", "hint": "For the first query, $a$ would become $[1,1,4,2,6]$, and\n$T =\n1 \\cdot 1 + 2 \\cdot 1 + 3 \\cdot 2 + 4 \\cdot 4 + 5 \\cdot 6 = 55$.\n\nFor the second query, $a$ would become $[1,8,4,2,6]$, and\n$T =\n1 \\cdot 1 + 2 \\cdot 2 + 3 \\cdot 4 + 4 \\cdot 6 + 5 \\cdot 8 = 81$.\n\nFor the third query, $a$ would become $[1,10,4,5,6]$, and\n$T =\n1 \\cdot 1 + 2 \\cdot 4 + 3 \\cdot 5 + 4 \\cdot 6 + 5 \\cdot 10 = 98$.\n\n$1\\le N\\le 1.5\\cdot 10^5$, $0 \\leq a_i \\leq 10^8$,$1\\le Q\\le 1.5\\cdot 10^5$，$0 \\leq j \\leq 10^8$.\n\n- Inputs 2-4: $N,Q\\le 1000$.\n- Inputs 5-11: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] Milk Sum S", "background": "", "description": "**注意：本题的时间限制为 4 秒，是默认时间限制的 2 倍。**\n\nFarmer John 的 $N$ 头奶牛的产奶量为整数 $a_1, \\dots, a_N$。也就是说，第 $i$ 头奶牛每分钟产 $a_i$ 单位的牛奶。\n\n每天早上，Farmer John 会将所有 $N$ 头奶牛连接到谷仓的挤奶机上。他需要依次断开连接，将奶牛送去进行日常锻炼。第一头奶牛在挤奶 1 分钟后被断开连接，第二头奶牛在再挤奶 1 分钟后被断开连接，依此类推。由于第一头奶牛（假设是奶牛 $x$）只在挤奶机上停留了 1 分钟，她总共贡献了 $a_x$ 单位的牛奶。第二头奶牛（假设是奶牛 $y$）在挤奶机上停留了总共 2 分钟，因此贡献了 $2a_y$ 单位的牛奶。第三头奶牛（假设是奶牛 $z$）贡献了 $3a_z$ 单位的牛奶，依此类推。设 $T$ 表示 Farmer John 以最优顺序断开奶牛连接时，可以收集到的最大总牛奶量。\n\nFarmer John 很好奇，如果某些奶牛的产奶量发生变化，$T$ 会如何变化。对于每个由两个整数 $i$ 和 $j$ 指定的 $Q$ 个查询，请计算如果将 $a_i$ 设置为 $j$，新的 $T$ 值会是多少。注意，每个查询都是独立的临时变化，即在考虑下一个查询之前，$a_i$ 会恢复为原始值。", "inputFormat": "第一行包含 $N$。\n\n第二行包含 $a_1 \\dots a_N$。\n\n第三行包含 $Q$。\n\n接下来的 $Q$ 行，每行包含两个用空格分隔的整数 $i$ 和 $j$。", "outputFormat": "请为每个查询输出一行，表示对应的 $T$ 值。", "hint": "对于第一个查询，$a$ 将变为 $[1,1,4,2,6]$，此时 $T = 1 \\cdot 1 + 2 \\cdot 1 + 3 \\cdot 2 + 4 \\cdot 4 + 5 \\cdot 6 = 55$。\n\n对于第二个查询，$a$ 将变为 $[1,8,4,2,6]$，此时 $T = 1 \\cdot 1 + 2 \\cdot 2 + 3 \\cdot 4 + 4 \\cdot 6 + 5 \\cdot 8 = 81$。\n\n对于第三个查询，$a$ 将变为 $[1,10,4,5,6]$，此时 $T = 1 \\cdot 1 + 2 \\cdot 4 + 3 \\cdot 5 + 4 \\cdot 6 + 5 \\cdot 10 = 98$。\n\n$1 \\leq N \\leq 1.5 \\cdot 10^5$，$0 \\leq a_i \\leq 10^8$，$1 \\leq Q \\leq 1.5 \\cdot 10^5$，$0 \\leq j \\leq 10^8$。\n\n- 输入 2-4：$N, Q \\leq 1000$。\n- 输入 5-11：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9187", "type": "P", "difficulty": 4, "samples": [["5 3\nGHGGH\nGHHHH\nHGHHG", "5\n3\n5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "数学", "USACO", "2023", "位运算"], "title": "[USACO23OPEN] Field Day S", "background": "", "description": "**Note: The time limit for this problem in Python is 15s.  Other languages have the default time limit of 2s.**\n\nEach of Farmer John's $N$ barns has selected a team of $C$ \ncows to participate in field day. The breed of every cow is\neither a Guernsey or a Holstein.  \n\nThe difference between two teams is defined to be the number of positions $i$\n($1 \\leq i \\leq C$) at which the breeds of the cows in the $i$ th positions\ndiffer. For every team $t$ from $1 \\ldots N$, please compute the maximum\ndifference between team $t$ and any other team.", "inputFormat": "The first line contains $C$ and $N$.\n\nThe next $N$ lines each contain a string of length $C$ of `G`s and `H`s.  Each line\ncorresponds to a team.", "outputFormat": "For each team, print the maximum difference.\n", "hint": "The first and third teams differ by $5$. The second and third teams differ by\n$3$.\n\n$2\\le N\\le 10^5$, $1\\le C\\le 18$.\n\n- Inputs 2-5: $C = 10$.\n- Inputs 6-9: All answers are at least $C-3$.\n- Inputs 10-20: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] Field Day S", "background": "", "description": "**Note: The time limit for this problem in Python is 15s.  Other languages have the default time limit of 2s.**\n\nEach of Farmer John's $N$ barns has selected a team of $C$ \ncows to participate in field day. The breed of every cow is\neither a Guernsey or a Holstein.  \n\nThe difference between two teams is defined to be the number of positions $i$\n($1 \\leq i \\leq C$) at which the breeds of the cows in the $i$ th positions\ndiffer. For every team $t$ from $1 \\ldots N$, please compute the maximum\ndifference between team $t$ and any other team.", "inputFormat": "The first line contains $C$ and $N$.\n\nThe next $N$ lines each contain a string of length $C$ of `G`s and `H`s.  Each line\ncorresponds to a team.", "outputFormat": "For each team, print the maximum difference.\n", "hint": "The first and third teams differ by $5$. The second and third teams differ by\n$3$.\n\n$2\\le N\\le 10^5$, $1\\le C\\le 18$.\n\n- Inputs 2-5: $C = 10$.\n- Inputs 6-9: All answers are at least $C-3$.\n- Inputs 10-20: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] Field Day S", "background": "", "description": "**提示：本题的 Python 时限为 15s。其它语言默认 2s。**\n\nFarmer John 的 $N$ 个牛棚都会选出包含 $C$ 只奶牛的队伍去参加户外聚会。所有奶牛的品种都只可能是根西牛（`G`）或荷斯坦奶牛（`H`）。\n\n我们将两个奶牛队伍中，同一位置对应的两头奶牛品种不同的所有位置 $i(1 \\leq i \\leq C)$ 的个数，定义为的两个奶牛队伍的差异。对于编号 $1...N$ 的每个奶牛队伍 $t$，请计算出 $t$ 和其它所有队伍的差异的最大值。", "inputFormat": "第一行包含两个整数 $C$ 与 $N$。\n\n接下来 $N$ 行，每行有一个长度为 $C$ 的，仅包含字母 `G` 和 `H` 的字符串，每行对应一支奶牛队伍。", "outputFormat": "对于每个队伍，输出差异最大值。", "hint": "第一个和第三个队伍的差异为 $5$。第二个和第三个队伍的差异为 $3$。\n\n$2 \\leq N \\leq 10^5,1 \\leq C \\leq 18$。\n\n- 对于测试点 2-5：$C = 10$。\n- 对于测试点 6-9：所有答案最少为 $C - 3$。\n- 对于测试点 10-20：没有额外条件。", "locale": "zh-CN"}}}
{"pid": "P9188", "type": "P", "difficulty": 4, "samples": [["bessiebessie\n", "14\n"], ["abcdefghssijebessie\n", "28\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2023"], "title": "[USACO23OPEN] Pareidolia S", "background": "**Note: The time limit for this problem is 4s, 2x the default.**\n\nPareidolia is the phenomenon where your eyes tend to see familiar patterns in\nimages where none really exist -- for example seeing a face in a cloud.  As you\nmight imagine, with Farmer John's constant proximity to cows, he often sees\ncow-related patterns in everyday objects.  For example, if he looks at the\nstring \"bqessiyexbesszieb\", Farmer John's  eyes ignore some of the letters and\nall he sees is \"bessiebessie\".  ", "description": "Given a string $s$, let $B(s)$ represent the maximum number of repeated copies\nof \"bessie\" one can form by deleting zero or more of the characters from $s$. \nIn the example above, $B(\\text{``bqessiyexbesszieb\"}) = 2$.\n\nComputing $B(s)$ is an interesting challenge, but Farmer John is interested in\nsolving a challenge that is even more interesting: Given a string $t$ of length\nat most $3\\cdot 10^5$ consisting only of characters a-z, compute the sum of\n$B(s)$ over all contiguous substrings $s$ of $t$.", "inputFormat": "The input consists of a nonempty string of length at most $3\\cdot 10^5$ whose\ncharacters are all lowercase English letters.", "outputFormat": "Output a single number, the total number of bessies that can be made across all\nsubstrings of the input string.", "hint": "For the first sample, twelve substrings contain exactly $1$ \"bessie\", and $1$ string contains exactly $2$ \"bessie\"s, so the total is $12\\cdot 1+1\\cdot 2=14$.\n\n- Inputs 3-5: The string has length at most $5000$.\n- Inputs 6-12: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] Pareidolia S", "background": "**Note: The time limit for this problem is 4s, 2x the default.**\n\nPareidolia is the phenomenon where your eyes tend to see familiar patterns in\nimages where none really exist -- for example seeing a face in a cloud.  As you\nmight imagine, with Farmer John's constant proximity to cows, he often sees\ncow-related patterns in everyday objects.  For example, if he looks at the\nstring \"bqessiyexbesszieb\", Farmer John's  eyes ignore some of the letters and\nall he sees is \"bessiebessie\".  ", "description": "Given a string $s$, let $B(s)$ represent the maximum number of repeated copies\nof \"bessie\" one can form by deleting zero or more of the characters from $s$. \nIn the example above, $B(\\text{``bqessiyexbesszieb\"}) = 2$.\n\nComputing $B(s)$ is an interesting challenge, but Farmer John is interested in\nsolving a challenge that is even more interesting: Given a string $t$ of length\nat most $3\\cdot 10^5$ consisting only of characters a-z, compute the sum of\n$B(s)$ over all contiguous substrings $s$ of $t$.", "inputFormat": "The input consists of a nonempty string of length at most $3\\cdot 10^5$ whose\ncharacters are all lowercase English letters.", "outputFormat": "Output a single number, the total number of bessies that can be made across all\nsubstrings of the input string.", "hint": "For the first sample, twelve substrings contain exactly $1$ \"bessie\", and $1$ string contains exactly $2$ \"bessie\"s, so the total is $12\\cdot 1+1\\cdot 2=14$.\n\n- Inputs 3-5: The string has length at most $5000$.\n- Inputs 6-12: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] Pareidolia S", "background": "", "description": "### 题目背景\n\n**注意：本题的时间限制为 4 秒，是默认时间限制的 2 倍。**\n\nPareidolia 是一种现象，指的是人们倾向于在并不真正存在的地方看到熟悉的图案——例如在云中看到一张脸。可以想象，由于农夫 John 经常与奶牛接触，他常常在日常物品中看到与奶牛相关的图案。例如，如果他看到字符串 \"bqessiyexbesszieb\"，农夫 John 的眼睛会忽略其中的一些字母，而他看到的只是 \"bessiebessie\"。\n\n\n给定一个字符串 $s$，令 $B(s)$ 表示通过删除 $s$ 中的零个或多个字符后，能够形成的 \"bessie\" 的最大重复次数。在上面的例子中，$B(\\text{``bqessiyexbesszieb\"}) = 2$。\n\n计算 $B(s)$ 是一个有趣的挑战，但农夫 John 对解决一个更有趣的挑战感兴趣：给定一个长度不超过 $3 \\cdot 10^5$ 的字符串 $t$，且仅由字符 a-z 组成，计算所有连续子串 $s$ 的 $B(s)$ 之和。", "inputFormat": "输入由一个非空字符串组成，长度不超过 $3 \\cdot 10^5$，且所有字符均为小写英文字母。", "outputFormat": "输出一个数字，表示输入字符串的所有子串中能够形成的 \"bessie\" 的总数。", "hint": "对于第一个样例，有 12 个子串恰好包含 $1$ 个 \"bessie\"，有 $1$ 个子串恰好包含 $2$ 个 \"bessie\"，因此总数为 $12 \\cdot 1 + 1 \\cdot 2 = 14$。\n\n- 输入 3-5：字符串长度不超过 $5000$。\n- 输入 6-12：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9189", "type": "P", "difficulty": 5, "samples": [["2\n\n5 5\n4 3 2 4 3\n3 4 3 4 2\n2 3 4 4 3\n1 2\n2 3\n3 1\n4 1\n4 5\n\n4 3\n3 2 4 1\n2 3 4 4\n4 2 3 4\n4 2\n4 1\n4 3\n", "YES\nNO\n"], ["5\n\n2 0\n1 2\n2 2\n2 2\n\n2 1\n1 1\n2 1\n2 1\n1 2\n\n2 1\n1 1\n2 1\n1 2\n1 2\n\n2 1\n1 1\n1 2\n2 1\n1 2\n\n5 4\n1 2 3 4 4\n2 3 5 4 2\n5 3 2 4 2\n1 2\n1 3\n1 4\n4 5\n", "YES\nYES\nNO\nYES\nNO\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "图论", "USACO", "2023"], "title": "[USACO23OPEN] Custodial Cleanup G", "background": "", "description": "Due to the disorganized structure of his mootels (much like motels but with\nbovine rather than human guests), Farmer John has decided to take up the role of\nthe mootel custodian to restore order to the stalls.\n\nEach mootel has $N$ stalls labeled $1$ through $N$ and $M$ corridors that connect pairs of stalls to each other\nbidirectionally. The $i$ th stall is painted with color $C_i$ and initially has a\nsingle key of color $S_i$ in it. FJ will have to rearrange the keys to appease\nthe cows and restore order to the stalls.\n\nFJ starts out in stall $1$ without holding any keys and is allowed to repeatedly\ndo one of the following moves:\n- Pick up a key in the stall he is currently in. FJ can hold multiple keys at\na time.\n- Place down a key he is holding into the stall he is currently\nin. A stall may hold multiple keys at a time.\n- Enter stall $1$ by\nmoving through a corridor.\n- Enter a stall other than stall $1$ by\nmoving through a corridor. He can only do this if he currently holds a key that\nis the same color as the stall he is entering.\n\nUnfortunately, it seems that the keys are not in their intended locations. To\nrestore order to FJ's mootel, the $i$th stall requires that a single key of\ncolor $F_i$ is in it. It is guaranteed that $S$ is a permutation of $F$.\n\nFor $T$ different mootels, FJ starts in stall $1$ and needs\nto place every key in its appropriate location, ending back in stall $1$. For\neach of the $T$ mootels, please answer if it is possible to do this.", "inputFormat": "The first line contains $T$, the number of mootels (test cases).\n\nEach test case will be preceded by a blank line. Then, the first line \nof each test case contains two integers $N$ and $M$.\n\nThe second line of each test case contains $N$ integers. The $i$-th integer on\nthis line $C_i$ means that stall $i$ has color $C_i$.\n\nThe third line of each test case contains $N$ integers. The $i$-th integer on\nthis line $S_i$ means that stall $i$ initially holds a key of color $S_i$.\n\nThe fourth line of each test case contains $N$ integers. The $i$-th integer on\nthis line $F_i$ means that stall $i$ needs to have a key of color $F_i$ in it.\n\nThe next $M$ lines of each test case follow. The $i$-th of these lines contains\ntwo distinct integers $u_i$ and $v_i$. This represents\nthat a corridor exists between stalls $u_i$ and $v_i$. No corridors are\nrepeated.\n", "outputFormat": "For each mootel, output `YES` on a new line if there exists a way for FJ to return\na key of color $F_i$ to each stall $i$ and end back in stall $1$. Otherwise,\noutput `NO` on a new line.", "hint": "For the first test case of the first sample, here is a possible sequence of moves:\n\n```\nCurrent stall: 1. Keys held: []. Keys in stalls: [3, 4, 3, 4, 2]\n(pick up key of color 3)\nCurrent stall: 1. Keys held: [3]. Keys in stalls: [x, 4, 3, 4, 2]\n(move from stall 1 to 2, allowed since we have a key of color C_2=3)\nCurrent stall: 2. Keys held: [3]. Keys in stalls: [x, 4, 3, 4, 2]\n(pick up key of color 4)\nCurrent stall: 2. Keys held: [3, 4]. Keys in stalls: [x, x, 3, 4, 2]\n(move from stall 2 to 1 to 4 to 5, allowed since we have keys of colors C_4=4 and C_5=3)\nCurrent stall: 5. Keys held: [3, 4]. Keys in stalls: [x, x, 3, 4, 2]\n(pick up key of color 2 and place key of color 3)\nCurrent stall: 5. Keys held: [2, 4]. Keys in stalls: [x, x, 3, 4, 3]\n(move from stall 5 to 4 to 1 to 3, allowed since we have keys of colors C_4=4 and C_3=2)\nCurrent stall: 3. Keys held: [2, 4]. Keys in stalls: [x, x, 3, 4, 3]\n(pick up key of color 3 and place key of color 4)\nCurrent stall: 3. Keys held: [2, 3]. Keys in stalls: [x, x, 4, 4, 3]\n(move from stall 3 to stall 2 and place key of color 3)\nCurrent stall: 2. Keys held: [2]. Keys in stalls: [x, 3, 4, 4, 3]\n(move from stall 2 to stall 1 and place key of color 2)\nCurrent stall: 1. Keys held: []. Keys in stalls: [2, 3, 4, 4, 3]\n```\n\nFor the second test case of the first sample, there exists no way for FJ to return a key of color\n$F_i$ to each stall $i$ and end back at stall $1$.\n\n$0 \\le M \\le 10^5$, $1 \\le C_i, S_i, F_i, u_i, v_i \\le N \\le 10^5$.   \n$1 \\le T \\le 100$, $1 \\le \\sum N \\le 10^5$, $1 \\le \\sum M \\le 2\\cdot 10^5$.\n\n- Test cases 3-6 satisfy $N,M\\le 8$.\n- Test cases 7-10 satisfy $C_i=F_i$.\n- Test cases 11-18 satisfy no additional constraints.\n", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] Custodial Cleanup G", "background": "", "description": "Due to the disorganized structure of his mootels (much like motels but with\nbovine rather than human guests), Farmer John has decided to take up the role of\nthe mootel custodian to restore order to the stalls.\n\nEach mootel has $N$ stalls labeled $1$ through $N$ and $M$ corridors that connect pairs of stalls to each other\nbidirectionally. The $i$ th stall is painted with color $C_i$ and initially has a\nsingle key of color $S_i$ in it. FJ will have to rearrange the keys to appease\nthe cows and restore order to the stalls.\n\nFJ starts out in stall $1$ without holding any keys and is allowed to repeatedly\ndo one of the following moves:\n- Pick up a key in the stall he is currently in. FJ can hold multiple keys at\na time.\n- Place down a key he is holding into the stall he is currently\nin. A stall may hold multiple keys at a time.\n- Enter stall $1$ by\nmoving through a corridor.\n- Enter a stall other than stall $1$ by\nmoving through a corridor. He can only do this if he currently holds a key that\nis the same color as the stall he is entering.\n\nUnfortunately, it seems that the keys are not in their intended locations. To\nrestore order to FJ's mootel, the $i$th stall requires that a single key of\ncolor $F_i$ is in it. It is guaranteed that $S$ is a permutation of $F$.\n\nFor $T$ different mootels, FJ starts in stall $1$ and needs\nto place every key in its appropriate location, ending back in stall $1$. For\neach of the $T$ mootels, please answer if it is possible to do this.", "inputFormat": "The first line contains $T$, the number of mootels (test cases).\n\nEach test case will be preceded by a blank line. Then, the first line \nof each test case contains two integers $N$ and $M$.\n\nThe second line of each test case contains $N$ integers. The $i$-th integer on\nthis line $C_i$ means that stall $i$ has color $C_i$.\n\nThe third line of each test case contains $N$ integers. The $i$-th integer on\nthis line $S_i$ means that stall $i$ initially holds a key of color $S_i$.\n\nThe fourth line of each test case contains $N$ integers. The $i$-th integer on\nthis line $F_i$ means that stall $i$ needs to have a key of color $F_i$ in it.\n\nThe next $M$ lines of each test case follow. The $i$-th of these lines contains\ntwo distinct integers $u_i$ and $v_i$. This represents\nthat a corridor exists between stalls $u_i$ and $v_i$. No corridors are\nrepeated.\n", "outputFormat": "For each mootel, output `YES` on a new line if there exists a way for FJ to return\na key of color $F_i$ to each stall $i$ and end back in stall $1$. Otherwise,\noutput `NO` on a new line.", "hint": "For the first test case of the first sample, here is a possible sequence of moves:\n\n```\nCurrent stall: 1. Keys held: []. Keys in stalls: [3, 4, 3, 4, 2]\n(pick up key of color 3)\nCurrent stall: 1. Keys held: [3]. Keys in stalls: [x, 4, 3, 4, 2]\n(move from stall 1 to 2, allowed since we have a key of color C_2=3)\nCurrent stall: 2. Keys held: [3]. Keys in stalls: [x, 4, 3, 4, 2]\n(pick up key of color 4)\nCurrent stall: 2. Keys held: [3, 4]. Keys in stalls: [x, x, 3, 4, 2]\n(move from stall 2 to 1 to 4 to 5, allowed since we have keys of colors C_4=4 and C_5=3)\nCurrent stall: 5. Keys held: [3, 4]. Keys in stalls: [x, x, 3, 4, 2]\n(pick up key of color 2 and place key of color 3)\nCurrent stall: 5. Keys held: [2, 4]. Keys in stalls: [x, x, 3, 4, 3]\n(move from stall 5 to 4 to 1 to 3, allowed since we have keys of colors C_4=4 and C_3=2)\nCurrent stall: 3. Keys held: [2, 4]. Keys in stalls: [x, x, 3, 4, 3]\n(pick up key of color 3 and place key of color 4)\nCurrent stall: 3. Keys held: [2, 3]. Keys in stalls: [x, x, 4, 4, 3]\n(move from stall 3 to stall 2 and place key of color 3)\nCurrent stall: 2. Keys held: [2]. Keys in stalls: [x, 3, 4, 4, 3]\n(move from stall 2 to stall 1 and place key of color 2)\nCurrent stall: 1. Keys held: []. Keys in stalls: [2, 3, 4, 4, 3]\n```\n\nFor the second test case of the first sample, there exists no way for FJ to return a key of color\n$F_i$ to each stall $i$ and end back at stall $1$.\n\n$0 \\le M \\le 10^5$, $1 \\le C_i, S_i, F_i, u_i, v_i \\le N \\le 10^5$.   \n$1 \\le T \\le 100$, $1 \\le \\sum N \\le 10^5$, $1 \\le \\sum M \\le 2\\cdot 10^5$.\n\n- Test cases 3-6 satisfy $N,M\\le 8$.\n- Test cases 7-10 satisfy $C_i=F_i$.\n- Test cases 11-18 satisfy no additional constraints.\n", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] Custodial Cleanup G", "background": "", "description": "由于他的“牛旅馆”（类似于汽车旅馆，但以牛为客人）的结构混乱，农夫约翰决定担任牛旅馆管理员的角色，以恢复牛舍的秩序。\n\n每个牛旅馆有 $N$ 个牛舍，标记为 $1$ 到 $N$，以及 $M$ 条双向连接牛舍的走廊。第 $i$ 个牛舍被涂上颜色 $C_i$，并且最初有一个颜色为 $S_i$ 的钥匙。FJ 需要重新安排钥匙以安抚奶牛并恢复牛舍的秩序。\n\nFJ 从牛舍 $1$ 开始，没有持有任何钥匙，并且可以反复执行以下操作之一：\n- 拿起他当前所在牛舍的钥匙。FJ 可以同时持有多个钥匙。\n- 将他持有的钥匙放入他当前所在的牛舍。一个牛舍可以同时容纳多个钥匙。\n- 通过走廊进入牛舍 $1$。\n- 通过走廊进入除牛舍 $1$ 以外的牛舍。只有当他当前持有的钥匙与他要进入的牛舍颜色相同时，他才能这样做。\n\n不幸的是，钥匙似乎不在它们预定的位置。为了恢复 FJ 的牛旅馆的秩序，第 $i$ 个牛舍需要有一个颜色为 $F_i$ 的钥匙。保证 $S$ 是 $F$ 的一个排列。\n\n对于 $T$ 个不同的牛旅馆，FJ 从牛舍 $1$ 开始，需要将每个钥匙放到其适当的位置，最后回到牛舍 $1$。对于每个 $T$ 个牛旅馆，请回答是否可以做到这一点。", "inputFormat": "第一行包含 $T$，表示牛旅馆的数量（测试用例）。\n\n每个测试用例前都有一个空行。然后，每个测试用例的第一行包含两个整数 $N$ 和 $M$。\n\n每个测试用例的第二行包含 $N$ 个整数。第 $i$ 个整数 $C_i$ 表示牛舍 $i$ 的颜色为 $C_i$。\n\n每个测试用例的第三行包含 $N$ 个整数。第 $i$ 个整数 $S_i$ 表示牛舍 $i$ 最初持有一个颜色为 $S_i$ 的钥匙。\n\n每个测试用例的第四行包含 $N$ 个整数。第 $i$ 个整数 $F_i$ 表示牛舍 $i$ 需要有一个颜色为 $F_i$ 的钥匙。\n\n每个测试用例接下来的 $M$ 行中，第 $i$ 行包含两个不同的整数 $u_i$ 和 $v_i$。这表示在牛舍 $u_i$ 和 $v_i$ 之间存在一条走廊。没有重复的走廊。", "outputFormat": "对于每个牛旅馆，如果存在一种方法可以让 FJ 将颜色为 $F_i$ 的钥匙返回到每个牛舍 $i$ 并最终回到牛舍 $1$，则在新行中输出 `YES`。否则，在新行中输出 `NO`。", "hint": "对于第一个样例的第一个测试用例，这里是一个可能的移动序列：\n\n```\n当前牛舍：1。持有的钥匙：[]。牛舍中的钥匙：[3, 4, 3, 4, 2]\n（拿起颜色为 3 的钥匙）\n当前牛舍：1。持有的钥匙：[3]。牛舍中的钥匙：[x, 4, 3, 4, 2]\n（从牛舍 1 移动到 2，因为我们有颜色为 $C_2=3$ 的钥匙）\n当前牛舍：2。持有的钥匙：[3]。牛舍中的钥匙：[x, 4, 3, 4, 2]\n（拿起颜色为 4 的钥匙）\n当前牛舍：2。持有的钥匙：[3, 4]。牛舍中的钥匙：[x, x, 3, 4, 2]\n（从牛舍 2 移动到 1 到 4 到 5，因为我们有颜色为 $C_4=4$ 和 $C_5=3$ 的钥匙）\n当前牛舍：5。持有的钥匙：[3, 4]。牛舍中的钥匙：[x, x, 3, 4, 2]\n（拿起颜色为 2 的钥匙并放下颜色为 3 的钥匙）\n当前牛舍：5。持有的钥匙：[2, 4]。牛舍中的钥匙：[x, x, 3, 4, 3]\n（从牛舍 5 移动到 4 到 1 到 3，因为我们有颜色为 $C_4=4$ 和 $C_3=2$ 的钥匙）\n当前牛舍：3。持有的钥匙：[2, 4]。牛舍中的钥匙：[x, x, 3, 4, 3]\n（拿起颜色为 3 的钥匙并放下颜色为 4 的钥匙）\n当前牛舍：3。持有的钥匙：[2, 3]。牛舍中的钥匙：[x, x, 4, 4, 3]\n（从牛舍 3 移动到牛舍 2 并放下颜色为 3 的钥匙）\n当前牛舍：2。持有的钥匙：[2]。牛舍中的钥匙：[x, 3, 4, 4, 3]\n（从牛舍 2 移动到牛舍 1 并放下颜色为 2 的钥匙）\n当前牛舍：1。持有的钥匙：[]。牛舍中的钥匙：[2, 3, 4, 4, 3]\n```\n\n对于第一个样例的第二个测试用例，没有办法让 FJ 将颜色为 $F_i$ 的钥匙返回到每个牛舍 $i$ 并最终回到牛舍 $1$。\n\n$0 \\le M \\le 10^5$, $1 \\le C_i, S_i, F_i, u_i, v_i \\le N \\le 10^5$。\n$1 \\le T \\le 100$, $1 \\le \\sum N \\le 10^5$, $1 \\le \\sum M \\le 2\\cdot 10^5$。\n\n- 测试用例 3-6 满足 $N,M\\le 8$。\n- 测试用例 7-10 满足 $C_i=F_i$。\n- 测试用例 11-18 不满足任何附加约束。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9190", "type": "P", "difficulty": 5, "samples": [["besssie\n1 1 5 4 6 1 1\n", "1\n4\n"], ["bebesconsiete\n6 5 2 3 6 5 7 9 8 1 4 5 1\n", "1\n21\n"], ["besgiraffesiebessibessie\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n", "2\n7\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["字符串", "动态规划 DP", "USACO", "2023"], "title": "[USACO23OPEN] Pareidolia G", "background": "Pareidolia is the phenomenon where your eyes tend to see familiar patterns in\nimages where none really exist -- for example seeing a face in a cloud.  As you\nmight imagine, with Farmer John's constant proximity to cows, he often sees\ncow-related patterns in everyday objects.  For example, if he looks at the\nstring \"bqessiyexbesszieb\", Farmer John's eyes ignore some of the letters and\nall he sees is \"bessiexbessieb\" -- a string that has contains two contiguous\nsubstrings equal to \"bessie\". ", "description": "Given a string of length at most $2\\cdot 10^5$ consisting only of characters\na-z, where each character has an associated deletion cost, compute the maximum\nnumber of contiguous substrings that equal \"bessie\" you can form by deleting\nzero or more characters from it, and the minimum total cost of the characters you need to\ndelete in order to do this.", "inputFormat": "The first line contains the string. The second line contains the deletion cost\nassociated with each character (an integer in the range $\\left[1,1000\\right]$).", "outputFormat": "The maximum number of occurrences, and the minimum cost to produce this number\nof occurrences.", "hint": "For the first sample, by deleting the 's' at position 4 we can make the whole string \"bessie\". The\ncharacter at position 4 has a cost of $4$, so our answer is cost $4$ for $1$\ninstance of \"bessie\", which is the best we can do.\n\nFor the second sample, by deleting the \"con\" at positions 5-7, we can make the string \"bebessiete\"\nwhich has \"bessie\" in the middle. Characters 5-7 have costs $5 + 7 + 9 = 21$, so\nour answer is cost $21$ for $1$ instance of \"bessie\", which is the best we can\ndo.\n\nFor the third sample, by deleting the \"giraffe\" at positions 4-10, we can make the string\n\"bessiebessibessie\", which has \"bessie\" at the beginning and the end. \"giraffe\"\nhas 7 characters and all characters have cost $1$, so our answer is cost $7$ for\n$2$ instances of \"bessie\", which is the best we can do. This sample satisfies the constraints for the second subtask.\n\n- Inputs 4-5: $N\\le 2000$.\n- Inputs 6-8: All costs are $1$.\n- Inputs 9-17: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] Pareidolia G", "background": "Pareidolia is the phenomenon where your eyes tend to see familiar patterns in\nimages where none really exist -- for example seeing a face in a cloud.  As you\nmight imagine, with Farmer John's constant proximity to cows, he often sees\ncow-related patterns in everyday objects.  For example, if he looks at the\nstring \"bqessiyexbesszieb\", Farmer John's eyes ignore some of the letters and\nall he sees is \"bessiexbessieb\" -- a string that has contains two contiguous\nsubstrings equal to \"bessie\". ", "description": "Given a string of length at most $2\\cdot 10^5$ consisting only of characters\na-z, where each character has an associated deletion cost, compute the maximum\nnumber of contiguous substrings that equal \"bessie\" you can form by deleting\nzero or more characters from it, and the minimum total cost of the characters you need to\ndelete in order to do this.", "inputFormat": "The first line contains the string. The second line contains the deletion cost\nassociated with each character (an integer in the range $\\left[1,1000\\right]$).", "outputFormat": "The maximum number of occurrences, and the minimum cost to produce this number\nof occurrences.", "hint": "For the first sample, by deleting the 's' at position 4 we can make the whole string \"bessie\". The\ncharacter at position 4 has a cost of $4$, so our answer is cost $4$ for $1$\ninstance of \"bessie\", which is the best we can do.\n\nFor the second sample, by deleting the \"con\" at positions 5-7, we can make the string \"bebessiete\"\nwhich has \"bessie\" in the middle. Characters 5-7 have costs $5 + 7 + 9 = 21$, so\nour answer is cost $21$ for $1$ instance of \"bessie\", which is the best we can\ndo.\n\nFor the third sample, by deleting the \"giraffe\" at positions 4-10, we can make the string\n\"bessiebessibessie\", which has \"bessie\" at the beginning and the end. \"giraffe\"\nhas 7 characters and all characters have cost $1$, so our answer is cost $7$ for\n$2$ instances of \"bessie\", which is the best we can do. This sample satisfies the constraints for the second subtask.\n\n- Inputs 4-5: $N\\le 2000$.\n- Inputs 6-8: All costs are $1$.\n- Inputs 9-17: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] Pareidolia G", "background": "", "description": "### 题目背景\n\nPareidolia 是一种现象，指的是人们倾向于在并不真正存在的地方看到熟悉的图案——例如在云中看到一张脸。可以想象，由于农夫 John 经常与奶牛接触，他常常在日常物品中看到与奶牛相关的图案。例如，如果他看到字符串 \"bqessiyexbesszieb\"，农夫 John 的眼睛会忽略其中的一些字母，而他看到的只是 \"bessiexbessieb\"——一个包含两个连续子串等于 \"bessie\" 的字符串。\n\n\n给定一个长度不超过 $2 \\cdot 10^5$ 的字符串，且仅由字符 a-z 组成，其中每个字符都有一个相关的删除成本。计算通过删除零个或多个字符后，能够形成的等于 \"bessie\" 的连续子串的最大数量，以及为了实现这一目标所需删除字符的最小总成本。", "inputFormat": "第一行包含字符串。第二行包含每个字符的删除成本（一个在 $\\left[1,1000\\right]$ 范围内的整数）。", "outputFormat": "输出最大数量的 \"bessie\" 出现次数，以及实现这一数量所需的最小成本。", "hint": "对于第一个样例，通过删除位置 4 的 's'，我们可以使整个字符串变为 \"bessie\"。位置 4 的字符成本为 $4$，因此我们的答案是成本 $4$ 得到 $1$ 个 \"bessie\"，这是我们可以做到的最佳结果。\n\n对于第二个样例，通过删除位置 5-7 的 \"con\"，我们可以使字符串变为 \"bebessiete\"，其中包含中间的 \"bessie\"。位置 5-7 的字符成本为 $5 + 7 + 9 = 21$，因此我们的答案是成本 $21$ 得到 $1$ 个 \"bessie\"，这是我们可以做到的最佳结果。\n\n对于第三个样例，通过删除位置 4-10 的 \"giraffe\"，我们可以使字符串变为 \"bessiebessibessie\"，其中包含开头和结尾的 \"bessie\"。\"giraffe\" 有 7 个字符，且所有字符的成本均为 $1$，因此我们的答案是成本 $7$ 得到 $2$ 个 \"bessie\"，这是我们可以做到的最佳结果。此样例满足第二个子任务的约束条件。\n\n- 输入 4-5：$N \\le 2000$。\n- 输入 6-8：所有成本均为 $1$。\n- 输入 9-17：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9191", "type": "P", "difficulty": 5, "samples": [["1\n8\n7 5\n2 1\n4 2\n5 1\n3 2\n8 5\n6 2\n4\n8 5\n5 1\n6 5\n", "4\n2 5\n4 8\n3 8\n7 8\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "USACO", "2023", "Special Judge", "构造"], "title": "[USACO23OPEN] Tree Merging G", "background": "", "description": "Having just completed a course in graph algorithms, Bessie the cow has begun\ncoding her very own graph visualizer! Currently, her graph visualizer is only\ncapable of visualizing rooted trees with nodes of distinct values, and it can\nonly perform one kind of operation: merging.\n\nIn particular, a merging operation takes any two distinct nodes in a tree with\nthe same parent and merges them into one node, with value equal to the maximum\nof the values of the two nodes merged, and children a union of all the children\nof the nodes merged (if any).\n\nUnfortunately, after Bessie performed some merging operations on a tree, her\nprogram crashed, losing the history of the merging operations she performed. All\nBessie remembers is the tree she started with and the tree she ended with after\nshe performed all her merging operations. \n\nGiven her initial and final trees, please determine a sequence of merging\noperations Bessie could have performed. It is guaranteed that a sequence exists.\n\nEach input consists of $T$ independent test cases. It is\nguaranteed that the sum of $N$  over all test cases does not exceed $1000$.", "inputFormat": "The first line contains $T$, the number of independent test cases. Each test\ncase is formatted as follows.\n\nThe first line of each test case contains the number of nodes $N$ in Bessie's initial tree, which have values $1\\dots N$. \n\nEach of the next $N-1$ lines contains two space-separated node values $v_i$ and\n$p_i$ indicating that the node with value $v_i$ is a\nchild node of the node with value $p_i$ in Bessie's initial tree.\n\nThe next line contains the number of nodes $M$ in Bessie's\nfinal tree. \n\nEach of the next $M-1$ lines contains two space-separated node values $v_i$ and\n$p_i$ indicating that the node with value $v_i$ is a\nchild node of the node with value $p_i$ in Bessie's final tree.", "outputFormat": "For each test case, output the number of merging operations, followed by an\nordered sequence of merging operations of that length, one per line. \n\nEach merging operation should be formatted as two distinct space-separated\nintegers: the values of the two nodes to merge in any order. \n\nIf there are multiple solutions, output any.", "hint": "$1\\le T\\le 100$, $2 \\leq N \\leq 1000$, $1 \\leq v_i, p_i \\leq N$,$2 \\leq M \\leq N$.\n\n- Inputs 2-6: The initial and final trees have the same number of leaves.\n- Inputs 7-16: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] Tree Merging G", "background": "", "description": "Having just completed a course in graph algorithms, Bessie the cow has begun\ncoding her very own graph visualizer! Currently, her graph visualizer is only\ncapable of visualizing rooted trees with nodes of distinct values, and it can\nonly perform one kind of operation: merging.\n\nIn particular, a merging operation takes any two distinct nodes in a tree with\nthe same parent and merges them into one node, with value equal to the maximum\nof the values of the two nodes merged, and children a union of all the children\nof the nodes merged (if any).\n\nUnfortunately, after Bessie performed some merging operations on a tree, her\nprogram crashed, losing the history of the merging operations she performed. All\nBessie remembers is the tree she started with and the tree she ended with after\nshe performed all her merging operations. \n\nGiven her initial and final trees, please determine a sequence of merging\noperations Bessie could have performed. It is guaranteed that a sequence exists.\n\nEach input consists of $T$ independent test cases. It is\nguaranteed that the sum of $N$  over all test cases does not exceed $1000$.", "inputFormat": "The first line contains $T$, the number of independent test cases. Each test\ncase is formatted as follows.\n\nThe first line of each test case contains the number of nodes $N$ in Bessie's initial tree, which have values $1\\dots N$. \n\nEach of the next $N-1$ lines contains two space-separated node values $v_i$ and\n$p_i$ indicating that the node with value $v_i$ is a\nchild node of the node with value $p_i$ in Bessie's initial tree.\n\nThe next line contains the number of nodes $M$ in Bessie's\nfinal tree. \n\nEach of the next $M-1$ lines contains two space-separated node values $v_i$ and\n$p_i$ indicating that the node with value $v_i$ is a\nchild node of the node with value $p_i$ in Bessie's final tree.", "outputFormat": "For each test case, output the number of merging operations, followed by an\nordered sequence of merging operations of that length, one per line. \n\nEach merging operation should be formatted as two distinct space-separated\nintegers: the values of the two nodes to merge in any order. \n\nIf there are multiple solutions, output any.", "hint": "$1\\le T\\le 100$, $2 \\leq N \\leq 1000$, $1 \\leq v_i, p_i \\leq N$,$2 \\leq M \\leq N$.\n\n- Inputs 2-6: The initial and final trees have the same number of leaves.\n- Inputs 7-16: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] Tree Merging G", "background": "", "description": "刚刚完成了一门图算法课程的奶牛 Bessie 开始编写她自己的图可视化工具！目前，她的图可视化工具只能可视化具有不同节点值的有根树，并且只能执行一种操作：合并。\n\n具体来说，合并操作会选取树中具有相同父节点的任意两个不同节点，并将它们合并为一个节点，新节点的值等于被合并的两个节点值的最大值，而新节点的子节点是被合并节点的所有子节点的并集（如果有的话）。\n\n不幸的是，在 Bessie 对一棵树执行了一些合并操作后，她的程序崩溃了，丢失了她执行的所有合并操作的历史记录。Bessie 只记得她最初开始的树以及执行完所有合并操作后得到的最终树。\n\n给定她的初始树和最终树，请确定 Bessie 可能执行的一系列合并操作。保证存在这样的操作序列。\n\n每个输入包含 $T$ 个独立的测试用例。保证所有测试用例的 $N$ 之和不超过 $1000$。", "inputFormat": "第一行包含 $T$，表示独立测试用例的数量。每个测试用例的格式如下。\n\n每个测试用例的第一行包含 Bessie 初始树中的节点数 $N$，节点值为 $1 \\dots N$。\n\n接下来的 $N-1$ 行，每行包含两个以空格分隔的节点值 $v_i$ 和 $p_i$，表示在 Bessie 的初始树中，值为 $v_i$ 的节点是值为 $p_i$ 的节点的子节点。\n\n接下来的一行包含 Bessie 最终树中的节点数 $M$。\n\n接下来的 $M-1$ 行，每行包含两个以空格分隔的节点值 $v_i$ 和 $p_i$，表示在 Bessie 的最终树中，值为 $v_i$ 的节点是值为 $p_i$ 的节点的子节点。", "outputFormat": "对于每个测试用例，首先输出合并操作的数量，然后按顺序输出相应数量的合并操作，每行一个操作。\n\n每个合并操作应格式化为两个以空格分隔的不同整数：被合并的两个节点的值（顺序任意）。\n\n如果有多个解，输出任意一个即可。", "hint": "$1 \\le T \\le 100$，$2 \\leq N \\leq 1000$，$1 \\leq v_i, p_i \\leq N$，$2 \\leq M \\leq N$。\n\n- 输入 2-6：初始树和最终树的叶子节点数量相同。\n- 输入 7-16：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9192", "type": "P", "difficulty": 6, "samples": [["bessiebessie\n3\n3 l\n7 s\n3 s", "14\n7\n1\n7"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "USACO", "2023", "矩阵加速"], "title": "[USACO23OPEN] Pareidolia P", "background": "", "description": "Pareidolia is the phenomenon where your eyes tend to see familiar patterns in images where none really exist -- for example seeing a face in a cloud. As you might imagine, with Farmer John's constant proximity to cows, he often sees cow-related patterns in everyday objects. For example, if he looks at the string `bqessiyexbesszieb`, Farmer John's eyes ignore some of the letters and all he sees is `bessiebessie`.\n\nGiven a string $s$, let $B(s)$ represent the maximum number of repeated copies of `bessie` one can form by deleting zero or more of the characters from $s$. In the example above, $B(bqessiyexbesszieb)=2$. Furthermore, given a string $t$, let $A(t)$ represent the sum of $B(s)$ over all contiguous substrings $s$ of $t$.\n\nFarmer John has a string t of length at most $2\\times10^5$ consisting only of characters a-z. Please compute A(t), and how A(t) would change after $U (1\\le U\\le2\\times10^5)$ updates, each changing a character of t. Updates are cumulative.", "inputFormat": "The first line of input contains $t$.\n\nThe next line contains $U$, followed by $U$ lines each containing a position $p$ $(1\\le p\\le N)$ and a character $c$ in the range a-z, meaning that the pth character of $t$ is changed to $c$.", "outputFormat": "Output $U+1$ lines, the total number of bessies that can be made across all substrings of $t$ before any updates and after each update.", "hint": "Before any updates, twelve substrings contain exactly $1$ `bessie` and $1$ string contains exactly $2$ `bessie`s, so the total number of bessies is $12⋅1+1⋅2=14$.\n\nAfter one update, $t$ is `belsiebessie`. Seven substrings contain exactly one `bessie`.\n\nAfter two updates, $t$ is `belsiesessie`. Only the entire string contains `bessie`.\n\n\nInput $2$: $|t|,U\\le300$;\n\nInputs $3-5$: $U\\le10$;\n\nInputs $6-13$: $|t|,U\\le10^5$;\n\nInputs $14-21$: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] Pareidolia P", "background": "", "description": "Pareidolia is the phenomenon where your eyes tend to see familiar patterns in images where none really exist -- for example seeing a face in a cloud. As you might imagine, with Farmer John's constant proximity to cows, he often sees cow-related patterns in everyday objects. For example, if he looks at the string `bqessiyexbesszieb`, Farmer John's eyes ignore some of the letters and all he sees is `bessiebessie`.\n\nGiven a string $s$, let $B(s)$ represent the maximum number of repeated copies of `bessie` one can form by deleting zero or more of the characters from $s$. In the example above, $B(bqessiyexbesszieb)=2$. Furthermore, given a string $t$, let $A(t)$ represent the sum of $B(s)$ over all contiguous substrings $s$ of $t$.\n\nFarmer John has a string t of length at most $2\\times10^5$ consisting only of characters a-z. Please compute A(t), and how A(t) would change after $U (1\\le U\\le2\\times10^5)$ updates, each changing a character of t. Updates are cumulative.", "inputFormat": "The first line of input contains $t$.\n\nThe next line contains $U$, followed by $U$ lines each containing a position $p$ $(1\\le p\\le N)$ and a character $c$ in the range a-z, meaning that the pth character of $t$ is changed to $c$.", "outputFormat": "Output $U+1$ lines, the total number of bessies that can be made across all substrings of $t$ before any updates and after each update.", "hint": "Before any updates, twelve substrings contain exactly $1$ `bessie` and $1$ string contains exactly $2$ `bessie`s, so the total number of bessies is $12⋅1+1⋅2=14$.\n\nAfter one update, $t$ is `belsiebessie`. Seven substrings contain exactly one `bessie`.\n\nAfter two updates, $t$ is `belsiesessie`. Only the entire string contains `bessie`.\n\n\nInput $2$: $|t|,U\\le300$;\n\nInputs $3-5$: $U\\le10$;\n\nInputs $6-13$: $|t|,U\\le10^5$;\n\nInputs $14-21$: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] Pareidolia P", "background": "", "description": "Pareidolia 是一种现象，指的是人们倾向于在并不真正存在的地方看到熟悉的图案——例如在云中看到一张脸。可以想象，由于农夫 John 经常与奶牛接触，他常常在日常物品中看到与奶牛相关的图案。例如，如果他看到字符串 `bqessiyexbesszieb`，农夫 John 的眼睛会忽略其中的一些字母，而他看到的只是 `bessiebessie`。\n\n给定一个字符串 $s$，令 $B(s)$ 表示通过删除 $s$ 中的零个或多个字符后，能够形成的 `bessie` 的最大重复次数。在上面的例子中，$B(bqessiyexbesszieb)=2$。此外，给定一个字符串 $t$，令 $A(t)$ 表示所有连续子串 $s$ 的 $B(s)$ 之和。\n\n农夫 John 有一个长度不超过 $2 \\times 10^5$ 的字符串 $t$，且仅由字符 a-z 组成。请计算 $A(t)$，以及在 $U (1 \\le U \\le 2 \\times 10^5)$ 次更新后 $A(t)$ 的变化情况，每次更新会修改 $t$ 中的一个字符。更新是累积的。", "inputFormat": "第一行输入包含 $t$。\n\n接下来的一行包含 $U$，随后是 $U$ 行，每行包含一个位置 $p$ $(1 \\le p \\le N)$ 和一个字符 $c$（范围为 a-z），表示将 $t$ 的第 $p$ 个字符修改为 $c$。", "outputFormat": "输出 $U+1$ 行，分别表示在没有任何更新之前以及每次更新后，$t$ 的所有子串中能够形成的 `bessie` 的总数。", "hint": "在没有任何更新之前，有 12 个子串恰好包含 $1$ 个 `bessie`，有 $1$ 个子串恰好包含 $2$ 个 `bessie`，因此 `bessie` 的总数为 $12 \\cdot 1 + 1 \\cdot 2 = 14$。\n\n第一次更新后，$t$ 变为 `belsiebessie`。有 7 个子串恰好包含一个 `bessie`。\n\n第二次更新后，$t$ 变为 `belsiesessie`。只有整个字符串包含 `bessie`。\n\n输入 $2$：$|t|, U \\le 300$；\n\n输入 $3-5$：$U \\le 10$；\n\n输入 $6-13$：$|t|, U \\le 10^5$；\n\n输入 $14-21$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9193", "type": "P", "difficulty": 6, "samples": [["6\n1 1\n3 5\n4 7\n8 20\n4 10\n27 21\n", "1\n5\n7\n10\n6\n13"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["递推", "USACO", "2023", "O2优化", "向量"], "title": "[USACO23OPEN] Good Bitstrings P", "background": "", "description": "For any two positive integers $a$ and $b$, define the function `gen_string(a,b)` by the following Python code:\n\n```\ndef gen_string(a: int, b: int):\n\tres = \"\"\n\tia, ib = 0, 0\n\twhile ia + ib < a + b:\n\t\tif ia * b <= ib * a:\n\t\t\tres += '0'\n\t\t\tia += 1\n\t\telse:\n\t\t\tres += '1'\n\t\t\tib += 1\n\treturn res\n```\n\nEquivalent C++ code:\n\n```\nstring gen_string(int64_t a, int64_t b) {\n\tstring res;\n\tint ia = 0, ib = 0;\n\twhile (ia + ib < a + b) {\n\t\tif ((__int128)ia * b <= (__int128)ib * a) {\n\t\t\tres += '0';\n\t\t\tia++;\n\t\t} else {\n\t\t\tres += '1';\n\t\t\tib++;\n\t\t}\n\t}\n\treturn res;\n}\n```\n\n$ia$ will equal $a$ and $ib$ will equal $b$ when the loop terminates, so this function returns a bitstring of length $a+b$ with exactly $a$ zeroes and $b$ ones. For example, `gen_string(4,10)=01110110111011`.\n\nCall $a$ bitstring $s$ **good** if there exist positive integers $x$ and $y$ such that s=`gen_string(x,y)`. Given two positive integers $A$ and $B$ $(1\\le A,B\\le10^{18})$, your job is to compute the number of good prefixes of `gen_string(A,B)`. For example, there are $6$ good prefixes of `gen_string(4,10)`:\n\n```\nx = 1 | y = 1 | gen_string(x, y) = 01\nx = 1 | y = 2 | gen_string(x, y) = 011\nx = 1 | y = 3 | gen_string(x, y) = 0111\nx = 2 | y = 5 | gen_string(x, y) = 0111011\nx = 3 | y = 7 | gen_string(x, y) = 0111011011\nx = 4 | y = 10 | gen_string(x, y) = 01110110111011\n```", "inputFormat": "The first line contains $T$ $(1\\le T\\le10)$, the number of independent test cases.\n\nEach of the next $T$ lines contains two integers $A$ and $B$.", "outputFormat": "The answer for each test case on a new line.", "hint": "Input $2$: $A,B\\le100$;\\\nInput $3$: $A,B\\le1000$;\\\nInputs $4-7$: $A,B\\le10^6$;\\\nInputs $8-13$: All answers are at most $10^5$.\\\nInputs $14-21$: No additional constraints.", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] Good Bitstrings P", "background": "", "description": "For any two positive integers $a$ and $b$, define the function `gen_string(a,b)` by the following Python code:\n\n```\ndef gen_string(a: int, b: int):\n\tres = \"\"\n\tia, ib = 0, 0\n\twhile ia + ib < a + b:\n\t\tif ia * b <= ib * a:\n\t\t\tres += '0'\n\t\t\tia += 1\n\t\telse:\n\t\t\tres += '1'\n\t\t\tib += 1\n\treturn res\n```\n\nEquivalent C++ code:\n\n```\nstring gen_string(int64_t a, int64_t b) {\n\tstring res;\n\tint ia = 0, ib = 0;\n\twhile (ia + ib < a + b) {\n\t\tif ((__int128)ia * b <= (__int128)ib * a) {\n\t\t\tres += '0';\n\t\t\tia++;\n\t\t} else {\n\t\t\tres += '1';\n\t\t\tib++;\n\t\t}\n\t}\n\treturn res;\n}\n```\n\n$ia$ will equal $a$ and $ib$ will equal $b$ when the loop terminates, so this function returns a bitstring of length $a+b$ with exactly $a$ zeroes and $b$ ones. For example, `gen_string(4,10)=01110110111011`.\n\nCall $a$ bitstring $s$ **good** if there exist positive integers $x$ and $y$ such that s=`gen_string(x,y)`. Given two positive integers $A$ and $B$ $(1\\le A,B\\le10^{18})$, your job is to compute the number of good prefixes of `gen_string(A,B)`. For example, there are $6$ good prefixes of `gen_string(4,10)`:\n\n```\nx = 1 | y = 1 | gen_string(x, y) = 01\nx = 1 | y = 2 | gen_string(x, y) = 011\nx = 1 | y = 3 | gen_string(x, y) = 0111\nx = 2 | y = 5 | gen_string(x, y) = 0111011\nx = 3 | y = 7 | gen_string(x, y) = 0111011011\nx = 4 | y = 10 | gen_string(x, y) = 01110110111011\n```", "inputFormat": "The first line contains $T$ $(1\\le T\\le10)$, the number of independent test cases.\n\nEach of the next $T$ lines contains two integers $A$ and $B$.", "outputFormat": "The answer for each test case on a new line.", "hint": "Input $2$: $A,B\\le100$;\\\nInput $3$: $A,B\\le1000$;\\\nInputs $4-7$: $A,B\\le10^6$;\\\nInputs $8-13$: All answers are at most $10^5$.\\\nInputs $14-21$: No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] Good Bitstrings P", "background": "", "description": "对于任意两个正整数 $a$ 和 $b$，定义函数 `gen_string(a,b)` 如下 Python 代码所示：\n\n```python\ndef gen_string(a: int, b: int):\n\tres = \"\"\n\tia, ib = 0, 0\n\twhile ia + ib < a + b:\n\t\tif ia * b <= ib * a:\n\t\t\tres += '0'\n\t\t\tia += 1\n\t\telse:\n\t\t\tres += '1'\n\t\t\tib += 1\n\treturn res\n```\n\n等效的 C++ 代码如下：\n\n```cpp\nstring gen_string(int64_t a, int64_t b) {\n\tstring res;\n\tint ia = 0, ib = 0;\n\twhile (ia + ib < a + b) {\n\t\tif ((__int128)ia * b <= (__int128)ib * a) {\n\t\t\tres += '0';\n\t\t\tia++;\n\t\t} else {\n\t\t\tres += '1';\n\t\t\tib++;\n\t\t}\n\t}\n\treturn res;\n}\n```\n\n当循环结束时，$ia$ 将等于 $a$，$ib$ 将等于 $b$，因此该函数返回一个长度为 $a+b$ 的比特串，其中恰好包含 $a$ 个零和 $b$ 个一。例如，`gen_string(4,10)=01110110111011`。\n\n称一个 $0/1$ 串 $s$ 是**好的**，如果存在正整数 $x$ 和 $y$，使得 $s = \\text{gen\\_string}(x,y)$。给定两个正整数 $A$ 和 $B$ $(1 \\le A, B \\le 10^{18})$，你的任务是计算 `gen_string(A,B)` 的所有好前缀的数量。例如，`gen_string(4,10)` 有 $6$ 个好前缀：\n\n```\nx = 1 | y = 1 | gen_string(x, y) = 01\nx = 1 | y = 2 | gen_string(x, y) = 011\nx = 1 | y = 3 | gen_string(x, y) = 0111\nx = 2 | y = 5 | gen_string(x, y) = 0111011\nx = 3 | y = 7 | gen_string(x, y) = 0111011011\nx = 4 | y = 10 | gen_string(x, y) = 01110110111011\n```", "inputFormat": "第一行包含 $T$ $(1 \\le T \\le 10)$，表示独立测试用例的数量。\n\n接下来的 $T$ 行，每行包含两个整数 $A$ 和 $B$。", "outputFormat": "每个测试用例的答案单独占一行。", "hint": "输入 $2$：$A, B \\le 100$；\\\n输入 $3$：$A, B \\le 1000$；\\\n输入 $4-7$：$A, B \\le 10^6$；\\\n输入 $8-13$：所有答案不超过 $10^5$；\\\n输入 $14-21$：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9194", "type": "P", "difficulty": 7, "samples": [["3\n1 2\n2 3\n", "2\n0\n0\n"], ["4\n1 2\n1 3\n1 4\n", "6\n6\n0\n0\n"], ["5\n3 5\n5 1\n1 4\n1 2\n", "8\n10\n2\n0\n0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "并查集", "2023", "仙人掌", "圆方树"], "title": "[USACO23OPEN] Triples of Cows P", "background": "", "description": "There are initially $N-1$ pairs of friends among FJ's $N$ cows labeled $1\\dots N$, forming a tree. The cows are\nleaving the farm for vacation one by one. On day $i$, the $i$ th cow leaves the\nfarm, and then all pairs of the $i$ th cow's friends still present on the farm\nbecome friends. \n\nFor each $i$ from $1$ to $N$, just before the $i$ th cow leaves,  how many\nordered triples of distinct cows $(a,b,c)$ are there such that none of $a,b,c$\nare on vacation, $a$ is friends with $b$, and $b$ is friends with $c$?", "inputFormat": "The first line contains $N$.\n\nThe next $N-1$ lines contain two integers $u_i$ and $v_i$ denoting that cows\n$u_i$ and $v_i$ are initially friends.", "outputFormat": "The answers for $i$ from $1$ to $N$ on separate lines.", "hint": "For the first sample:  \n$(1,2,3)$ and $(3,2,1)$ are the triples just before cow $1$ leaves.  \nAfter cow\n$1$ leaves, there are less than $3$ cows left, so no triples are possible.\n\nFor the second sample:  \nAt the beginning, cow $1$ is friends with all other cows, and no other pairs of\ncows are friends, so the triples are $(a, 1, c)$ where $a, c$ are different cows\nfrom $\\{2, 3, 4\\}$, which gives $3 \\cdot 2 = 6$ triples.  \nAfter cow $1$ leaves, the remaining three cows are all friends, so the triples\nare just those three cows in any of the $3! = 6$ possible orders.  \nAfter cow $2$ leaves, there are less than $3$ cows left, so no triples are\npossible.  \n\n$2\\le N\\le 2\\cdot 10^5$, $1\\le u_i,v_i\\le N$.\n\n- Inputs 4-5: $N\\le 500$.\n- Inputs 6-10: $N\\le 5000$.\n- Inputs 11-20: No additional constraints.\n", "locale": "en", "translations": {"en": {"title": "[USACO23OPEN] Triples of Cows P", "background": "", "description": "There are initially $N-1$ pairs of friends among FJ's $N$ cows labeled $1\\dots N$, forming a tree. The cows are\nleaving the farm for vacation one by one. On day $i$, the $i$ th cow leaves the\nfarm, and then all pairs of the $i$ th cow's friends still present on the farm\nbecome friends. \n\nFor each $i$ from $1$ to $N$, just before the $i$ th cow leaves,  how many\nordered triples of distinct cows $(a,b,c)$ are there such that none of $a,b,c$\nare on vacation, $a$ is friends with $b$, and $b$ is friends with $c$?", "inputFormat": "The first line contains $N$.\n\nThe next $N-1$ lines contain two integers $u_i$ and $v_i$ denoting that cows\n$u_i$ and $v_i$ are initially friends.", "outputFormat": "The answers for $i$ from $1$ to $N$ on separate lines.", "hint": "For the first sample:  \n$(1,2,3)$ and $(3,2,1)$ are the triples just before cow $1$ leaves.  \nAfter cow\n$1$ leaves, there are less than $3$ cows left, so no triples are possible.\n\nFor the second sample:  \nAt the beginning, cow $1$ is friends with all other cows, and no other pairs of\ncows are friends, so the triples are $(a, 1, c)$ where $a, c$ are different cows\nfrom $\\{2, 3, 4\\}$, which gives $3 \\cdot 2 = 6$ triples.  \nAfter cow $1$ leaves, the remaining three cows are all friends, so the triples\nare just those three cows in any of the $3! = 6$ possible orders.  \nAfter cow $2$ leaves, there are less than $3$ cows left, so no triples are\npossible.  \n\n$2\\le N\\le 2\\cdot 10^5$, $1\\le u_i,v_i\\le N$.\n\n- Inputs 4-5: $N\\le 500$.\n- Inputs 6-10: $N\\le 5000$.\n- Inputs 11-20: No additional constraints.\n", "locale": "en"}, "zh-CN": {"title": "[USACO23OPEN] Triples of Cows P", "background": "", "description": "最初，农夫 John 的 $N$ 头编号为 $1 \\dots N$ 的奶牛中有 $N-1$ 对朋友关系，形成一棵树。奶牛们依次离开农场去度假。在第 $i$ 天，第 $i$ 头奶牛离开农场，然后所有仍在农场中的第 $i$ 头奶牛的朋友之间会成为朋友。\n\n对于每个 $i$ 从 $1$ 到 $N$，在第 $i$ 头奶牛离开之前，有多少个有序三元组 $(a, b, c)$ 满足以下条件：$a, b, c$ 均未离开农场，$a$ 与 $b$ 是朋友，且 $b$ 与 $c$ 是朋友？", "inputFormat": "第一行包含 $N$。\n\n接下来的 $N-1$ 行，每行包含两个整数 $u_i$ 和 $v_i$，表示奶牛 $u_i$ 和 $v_i$ 最初是朋友。", "outputFormat": "输出 $N$ 行，第 $i$ 行表示在第 $i$ 头奶牛离开之前的答案。", "hint": "对于第一个样例：  \n- 在第 $1$ 头奶牛离开之前，三元组为 $(1, 2, 3)$ 和 $(3, 2, 1)$。  \n- 在第 $1$ 头奶牛离开后，剩下的奶牛少于 $3$ 头，因此没有三元组。\n\n对于第二个样例：  \n- 最初，奶牛 $1$ 与所有其他奶牛是朋友，而其他奶牛之间没有朋友关系，因此三元组为 $(a, 1, c)$，其中 $a, c$ 是 $\\{2, 3, 4\\}$ 中的不同奶牛，共有 $3 \\cdot 2 = 6$ 个三元组。  \n- 在第 $1$ 头奶牛离开后，剩下的三头奶牛彼此都是朋友，因此三元组为这三头奶牛的任意排列，共有 $3! = 6$ 个三元组。  \n- 在第 $2$ 头奶牛离开后，剩下的奶牛少于 $3$ 头，因此没有三元组。  \n\n$2 \\le N \\le 2 \\cdot 10^5$，$1 \\le u_i, v_i \\le N$。\n\n- 输入 4-5：$N \\le 500$。\n- 输入 6-10：$N \\le 5000$。\n- 输入 11-20：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9195", "type": "P", "difficulty": 6, "samples": [["4 2\n1\n0\n1\n2", "4\n2 2\n1 1\n2 3\n1 2"], ["3 2\n2\n0\n1", "3\n1 2\n1 3\n2 1"], ["2 2\n0\n1", "-1"], ["5 3\n1\n0\n1\n0\n1", "9\n1 4\n1 5\n2 1\n2 1\n2 2\n1 1\n1 2\n2 3\n2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2016", "Special Judge", "构造", "JOI（日本）"], "title": "[JOI Open 2016] JOIRIS", "background": "**译自 [JOI Open 2016](https://contests.ioi-jp.org/open-2016/index.html) T1 「JOIRIS」**", "description": "JOIRIS 的游戏区域名叫「井」，是一个宽度为 $N$，高度足够大的矩形网格。位于左数第 $i$ 列，从下往上数第 $j$ 列的格子记作 $(i,j)$。游戏过程中，每个格子要不有一个方块，要不没有方块。\n\n开始时，在第 $i$ 列有且仅有 $(i,1), (i,2),\\cdots, (i, A_i)$ 有方块。\n\n接下来，$10^4$ 个 $1 \\times K$ 的骨牌一个个下落，玩家要依次放置骨牌。每次放置骨牌按照如下方式进行：\n\n玩家先选择骨牌是横向放置还是纵向放置。  \n- 若选择纵向，玩家还需再选择一个整数 $x$（$1 \\le x \\le N$）。一个骨牌会下落到第 $x$ 列最上方方块的上面一行。若第 $x$ 列没有方块，骨牌会下落到井底。  \n- 若选择横向，玩家还需再选择一个整数 $x$（$1 \\le x \\le N-K+1$）。一个骨牌会下落到第 $x$ 列至第 $x+K-1$ 列最上方方块的上面一行。若第 $x$ 列至第 $x+K-1$ 列没有方块，骨牌会下落到井底。\n\n每个骨牌停止下落后，系统将从井底往上逐行检查，如果有一行格子被方块填满，该行的所有方块都会消失，且上方的所有方块向下移动 $1$ 格。\n\n此时检查井中是否有方块，如果井中没有方块，游戏结束，玩家胜利，否则玩家开始放置下一个骨牌。\n\n保证开始时最底下一行没有被方块填满。请判断玩家能否胜利，如果可能，则输出一种方案。", "inputFormat": "输入共 $N + 1$ 行。\n\n第一行含有两个整数 $N,K$。  \n在接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）有一个整数 $A_i$。", "outputFormat": "如果玩家无法胜利，请输出一行一个 $-1$。\n\n否则请输出 $X+1$ 行，其中 $X$ 表示消去所有棋子所需要的步数：\n\n第一行包含一个整数 $X$。接下来第 $i$ 行（$1 \\le i \\le X$）表示你的方案。\n\n- 如果第 $i$ 个下落的骨牌纵向放置，输出两个整数，第一个整数为 $1$，第二个整数 $x$ 表示玩家放置零件的位置（如题目描述中所述）。\n- 如果第 $i$ 个下落的骨牌横向放置，输出两个整数，第一个整数为 $2$，第二个整数 $x$ 表示玩家放置零件的位置（如题目描述中所述）。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zi0vapef.png)\n\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n对于所有数据，$2\\le N\\le 50$，$1\\le K\\le N$，$0\\le A_i \\le 50$。\n\n- Subtask 1（15 points）：$K=2$ 且 $N$ 为奇数。\n- Subtask 2（15 points）：$K=2$ 且 $N$ 为偶数。\n- Subtask 3（15 points）：$K$ 能够整除 $N$。\n- Subtask 4（55 points）：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2016] JOIRIS", "background": "**译自 [JOI Open 2016](https://contests.ioi-jp.org/open-2016/index.html) T1 「JOIRIS」**", "description": "JOIRIS 的游戏区域名叫「井」，是一个宽度为 $N$，高度足够大的矩形网格。位于左数第 $i$ 列，从下往上数第 $j$ 列的格子记作 $(i,j)$。游戏过程中，每个格子要不有一个方块，要不没有方块。\n\n开始时，在第 $i$ 列有且仅有 $(i,1), (i,2),\\cdots, (i, A_i)$ 有方块。\n\n接下来，$10^4$ 个 $1 \\times K$ 的骨牌一个个下落，玩家要依次放置骨牌。每次放置骨牌按照如下方式进行：\n\n玩家先选择骨牌是横向放置还是纵向放置。  \n- 若选择纵向，玩家还需再选择一个整数 $x$（$1 \\le x \\le N$）。一个骨牌会下落到第 $x$ 列最上方方块的上面一行。若第 $x$ 列没有方块，骨牌会下落到井底。  \n- 若选择横向，玩家还需再选择一个整数 $x$（$1 \\le x \\le N-K+1$）。一个骨牌会下落到第 $x$ 列至第 $x+K-1$ 列最上方方块的上面一行。若第 $x$ 列至第 $x+K-1$ 列没有方块，骨牌会下落到井底。\n\n每个骨牌停止下落后，系统将从井底往上逐行检查，如果有一行格子被方块填满，该行的所有方块都会消失，且上方的所有方块向下移动 $1$ 格。\n\n此时检查井中是否有方块，如果井中没有方块，游戏结束，玩家胜利，否则玩家开始放置下一个骨牌。\n\n保证开始时最底下一行没有被方块填满。请判断玩家能否胜利，如果可能，则输出一种方案。", "inputFormat": "输入共 $N + 1$ 行。\n\n第一行含有两个整数 $N,K$。  \n在接下来的 $N$ 行中，第 $i$ 行（$1 \\le i \\le N$）有一个整数 $A_i$。", "outputFormat": "如果玩家无法胜利，请输出一行一个 $-1$。\n\n否则请输出 $X+1$ 行，其中 $X$ 表示消去所有棋子所需要的步数：\n\n第一行包含一个整数 $X$。接下来第 $i$ 行（$1 \\le i \\le X$）表示你的方案。\n\n- 如果第 $i$ 个下落的骨牌纵向放置，输出两个整数，第一个整数为 $1$，第二个整数 $x$ 表示玩家放置零件的位置（如题目描述中所述）。\n- 如果第 $i$ 个下落的骨牌横向放置，输出两个整数，第一个整数为 $2$，第二个整数 $x$ 表示玩家放置零件的位置（如题目描述中所述）。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zi0vapef.png)\n\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n对于所有数据，$2\\le N\\le 50$，$1\\le K\\le N$，$0\\le A_i \\le 50$。\n\n- Subtask 1（15 points）：$K=2$ 且 $N$ 为奇数。\n- Subtask 2（15 points）：$K=2$ 且 $N$ 为偶数。\n- Subtask 3（15 points）：$K$ 能够整除 $N$。\n- Subtask 4（55 points）：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9196", "type": "P", "difficulty": 6, "samples": [["2 3\nAUGC\nAGC\nG C\nAU C\nA C", "0\n1\n2"], ["3 3\nAA\nAA\nAGA\nAA AA\nAG GA\nAG GA", "2\n1\n1"], ["8 7\nGCGCUACCCCAACACAAGGCAAGAUAUA\nG\nGGAC\nGCGG\nU\nGCGCUACCCCAACACAAGGCAAGAUGGUC\nGCCG\nGCGCUGA\nGCGCUACCC A\nGCGCUACCCC AC\nGCG C\nGCGC A\nG G\nG C\nG GGA", "1\n0\n1\n2\n3\n2\n0"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2016", "字典树 Trie", "AC 自动机", "JOI（日本）"], "title": "[JOI Open 2016] 销售基因链 / Selling RNA Strands", "background": "**译自 [JOI Open 2016](https://contests.ioi-jp.org/open-2016/index.html) T2 「RNA 鎖の販売 / Selling RNA Strands」**", "description": "基因库中有 $N$ 个字符串，这些字符串仅由 `A`，`G`，`U`，`C` 组成（保证每个字符串都仅包含这四种字母）。\n\n有 $M$ 组查询，每组查询包含两个字符串 $P,Q$，试求：基因库中有多少个字符串同时存在前缀 $P$ 和后缀 $Q$。\n\n举个例子，`GAC` 存在前缀 `G`、`GA`、`GAC`，存在后缀 `C`、`AC`、`GAC`，那么我们可以说：`GAC` 同时存在前缀 `GA` 和后缀 `AC`。", "inputFormat": "输入共 $N + M + 1$ 行。\n\n第一行有两个整数 $N, M$。  \n在接下来的 $N$ 行中，每行一个字符串 $S_i$，表示基因库中的一个字符串。  \n在接下来的 $M$ 行中，每行有两个用空格分隔的字符串，表示一组查询。", "outputFormat": "输出共 $M$ 行，每行一个整数，表示符合查询条件的字符串的数量。", "hint": "### 样例 1 解释\n\n第一组查询：无法找到；  \n第二组查询：`AUGC` 满足条件；  \n第三组查询：`AUGC` 和 `AGC` 满足条件。\n\n### 样例 2 解释\n\n注意基因库中的字符串可以重复。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n对于所有数据，$1\\le N, M \\leq 10 ^ 5$，$1 \\leq |S_i|, |P_j|, |Q_j| \\le 10^5$，$1\\le\\sum |S_i|, \\sum |P_j|, \\sum |Q_j| \\le 2\\times 10^6$。\n\n- Subtask 1（10 points）：$N, M, |S_i|, |P_j|, |Q_j| \\le 100$。\n- Subtask 2（25 points）：$N, M\\le 5000$。\n- Subtask 3（25 points）：$\\sum |S_i|, \\sum|P_j|, \\sum |Q_j| \\le 10^5$。\n- Subtask 4（40 points）：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2016] 销售基因链 / Selling RNA Strands", "background": "**译自 [JOI Open 2016](https://contests.ioi-jp.org/open-2016/index.html) T2 「RNA 鎖の販売 / Selling RNA Strands」**", "description": "基因库中有 $N$ 个字符串，这些字符串仅由 `A`，`G`，`U`，`C` 组成（保证每个字符串都仅包含这四种字母）。\n\n有 $M$ 组查询，每组查询包含两个字符串 $P,Q$，试求：基因库中有多少个字符串同时存在前缀 $P$ 和后缀 $Q$。\n\n举个例子，`GAC` 存在前缀 `G`、`GA`、`GAC`，存在后缀 `C`、`AC`、`GAC`，那么我们可以说：`GAC` 同时存在前缀 `GA` 和后缀 `AC`。", "inputFormat": "输入共 $N + M + 1$ 行。\n\n第一行有两个整数 $N, M$。  \n在接下来的 $N$ 行中，每行一个字符串 $S_i$，表示基因库中的一个字符串。  \n在接下来的 $M$ 行中，每行有两个用空格分隔的字符串，表示一组查询。", "outputFormat": "输出共 $M$ 行，每行一个整数，表示符合查询条件的字符串的数量。", "hint": "### 样例 1 解释\n\n第一组查询：无法找到；  \n第二组查询：`AUGC` 满足条件；  \n第三组查询：`AUGC` 和 `AGC` 满足条件。\n\n### 样例 2 解释\n\n注意基因库中的字符串可以重复。\n\n### 数据规模与约定\n\n**本题采用捆绑测试**。\n\n对于所有数据，$1\\le N, M \\leq 10 ^ 5$，$1 \\leq |S_i|, |P_j|, |Q_j| \\le 10^5$，$1\\le\\sum |S_i|, \\sum |P_j|, \\sum |Q_j| \\le 2\\times 10^6$。\n\n- Subtask 1（10 points）：$N, M, |S_i|, |P_j|, |Q_j| \\le 100$。\n- Subtask 2（25 points）：$N, M\\le 5000$。\n- Subtask 3（25 points）：$\\sum |S_i|, \\sum|P_j|, \\sum |Q_j| \\le 10^5$。\n- Subtask 4（40 points）：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9197", "type": "P", "difficulty": 6, "samples": [["4 10\n3 6 2 9", "6"], ["8 35\n3 7 1 5 10 2 11 6", "31384"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2016", "JOI（日本）"], "title": "[JOI Open 2016] 摩天大楼 / Skyscraper", "background": "**译自 [JOI Open 2016](https://contests.ioi-jp.org/open-2016/index.html) T3 「高層ビル街 / Skyscraper」**", "description": "将互不相同的 $N$ 个整数 $A_1, A_2, \\cdots, A_N$ 按照一定顺序排列。\n\n假设排列为 $f_1, f_2, \\cdots, f_N$，要求：$| f_1 - f_2| + | f_2 - f_3| + \\cdots + | f_{N-1} - f_N| \\leq L$。\n\n求满足题意的排列的方案数对 $10^9+7$ 取模后的结果。", "inputFormat": "输入共两行。\n\n第一行有两个整数 $N, L$。  \n第二行有 $N$ 个整数 $A_1, A_2, \\cdots, A_N$。", "outputFormat": "输出共一行一个整数，表示方案数对 $10^9+7$ 取模后的结果。", "hint": "### 样例 1 解释\n\n满足条件的六种方案分别为：\n$$\n\\begin{matrix}\n2\\ 3\\ 6\\ 9,& |2 - 3| + |3 - 6| + |6 - 9| &=& 7 \\\\\n2\\ 3\\ 9\\ 6,& |2 - 3| + |3 - 9| + |9 - 6| &=& 10 \\\\\n3\\ 2\\ 6\\ 9,& |3 - 2| + |2 - 6| + |6 - 9| &=& 8 \\\\\n6\\ 9\\ 3\\ 2,& |6 - 9| + |9 - 3| + |3 - 2| &=& 10 \\\\\n9\\ 6\\ 2\\ 3,& |9 - 6| + |6 - 2| + |2 - 3| &=& 8 \\\\\n9\\ 6\\ 3\\ 2,& |9 - 6| + |6 - 3| + |3 - 2| &=& 7 \\\\\n\\end{matrix}\n$$\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n对于所有数据，$1\\le N\\le 100$，$1\\le L\\le 1000$，$1\\le A_i\\le 1000$。\n\n- Subtask 1（5 points）：$N\\le 8$。\n- Subtask 2（15 points）：$N\\le 14$，$L\\le 100$。\n- Subtask 3（80 points）：没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[JOI Open 2016] 摩天大楼 / Skyscraper", "background": "**译自 [JOI Open 2016](https://contests.ioi-jp.org/open-2016/index.html) T3 「高層ビル街 / Skyscraper」**", "description": "将互不相同的 $N$ 个整数 $A_1, A_2, \\cdots, A_N$ 按照一定顺序排列。\n\n假设排列为 $f_1, f_2, \\cdots, f_N$，要求：$| f_1 - f_2| + | f_2 - f_3| + \\cdots + | f_{N-1} - f_N| \\leq L$。\n\n求满足题意的排列的方案数对 $10^9+7$ 取模后的结果。", "inputFormat": "输入共两行。\n\n第一行有两个整数 $N, L$。  \n第二行有 $N$ 个整数 $A_1, A_2, \\cdots, A_N$。", "outputFormat": "输出共一行一个整数，表示方案数对 $10^9+7$ 取模后的结果。", "hint": "### 样例 1 解释\n\n满足条件的六种方案分别为：\n$$\n\\begin{matrix}\n2\\ 3\\ 6\\ 9,& |2 - 3| + |3 - 6| + |6 - 9| &=& 7 \\\\\n2\\ 3\\ 9\\ 6,& |2 - 3| + |3 - 9| + |9 - 6| &=& 10 \\\\\n3\\ 2\\ 6\\ 9,& |3 - 2| + |2 - 6| + |6 - 9| &=& 8 \\\\\n6\\ 9\\ 3\\ 2,& |6 - 9| + |9 - 3| + |3 - 2| &=& 10 \\\\\n9\\ 6\\ 2\\ 3,& |9 - 6| + |6 - 2| + |2 - 3| &=& 8 \\\\\n9\\ 6\\ 3\\ 2,& |9 - 6| + |6 - 3| + |3 - 2| &=& 7 \\\\\n\\end{matrix}\n$$\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n对于所有数据，$1\\le N\\le 100$，$1\\le L\\le 1000$，$1\\le A_i\\le 1000$。\n\n- Subtask 1（5 points）：$N\\le 8$。\n- Subtask 2（15 points）：$N\\le 14$，$L\\le 100$。\n- Subtask 3（80 points）：没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9198", "type": "P", "difficulty": 1, "samples": [["6 6 9\n1 2 3 4\n5 6 3 4\n1 5 3 4\n5 1 3 4\n1 3 2 260\n1 4 2 4\n2 2 3 5\n2 5 3 7\n2 2 3 258", "No\nNo\nNo\nYes\nNo\nYes\nNo\nNo\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「GMOI R2-T1」轴对称", "background": "", "description": "你有一个 $n$ 行 $m$ 列的图片（矩阵），该图片的像素为 $n\\times m$。\n\n初始时，所有像素块均为黑色，RGB 是 $(0,0,0)$。每一次操作可以将一个像素块的 RGB 中的一个数字改变。\n\n在每次操作过后，请你输出图片是否左右对称？\n\n左右对称：即对于任何的 $i,j$，总满足第 $i$ 行第 $j$ 列的像素与第 $i$ 行第 $m-j+1$ 列的像素的 RGB 值相等。 ", "inputFormat": "第一行三个整数 $n,m,q$，$q$ 代表操作次数。\n\n接下来 $q$ 行，每行输入四个整数 $i,j,t,c$，表示将第 $i$ 行第 $j$ 列的格子的 RGB 值的第 $t$ 个数增加 $c$，任何一个 RGB 值的任何一个数如果超出 $255$ 则自动对 $256$ 取模。", "outputFormat": "每次操作过后，如果图片左右对称，输出 `Yes`，否则输出 `No`。每组询问的输出之间用换行隔开。", "hint": "**本题使用 Subtask 捆绑测试。**\n\n| Subtask | $n\\le$ | $m\\le$ | $q\\le$ | $t\\le$ | $c\\le$ | 对应测试点 | 总分 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | $2$ | $50$ | $1$ | $255$ | $1\\sim2$ | $10$ |\n| $1$ | $100$ | $2$ | $500$ | $3$ | $10^9$ | $3\\sim4$ | $15$ |\n| $2$ | $100$ | $100$ | $500$ | $3$ | $10^9$ | $5\\sim6$ | $15$ |\n| $3$ | $100$ | $100$ | $1$ | $3$ | $10^9$ | $7\\sim9$ | $15$ |\n| $4$ | $100$ | $100$ | $500$ | $3$ | $10^9$ | $10\\sim12$ | $45$ |\n\n**对于 Subtask 2**，保证每个变量等概率随机生成。\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 100$，$1\\le q\\le 500$，$1\\le i\\le n$，$1\\le j\\le m$，$t\\in \\{1,2,3\\}$，$1\\le c\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GMOI R2-T1」轴对称", "background": "", "description": "你有一个 $n$ 行 $m$ 列的图片（矩阵），该图片的像素为 $n\\times m$。\n\n初始时，所有像素块均为黑色，RGB 是 $(0,0,0)$。每一次操作可以将一个像素块的 RGB 中的一个数字改变。\n\n在每次操作过后，请你输出图片是否左右对称？\n\n左右对称：即对于任何的 $i,j$，总满足第 $i$ 行第 $j$ 列的像素与第 $i$ 行第 $m-j+1$ 列的像素的 RGB 值相等。 ", "inputFormat": "第一行三个整数 $n,m,q$，$q$ 代表操作次数。\n\n接下来 $q$ 行，每行输入四个整数 $i,j,t,c$，表示将第 $i$ 行第 $j$ 列的格子的 RGB 值的第 $t$ 个数增加 $c$，任何一个 RGB 值的任何一个数如果超出 $255$ 则自动对 $256$ 取模。", "outputFormat": "每次操作过后，如果图片左右对称，输出 `Yes`，否则输出 `No`。每组询问的输出之间用换行隔开。", "hint": "**本题使用 Subtask 捆绑测试。**\n\n| Subtask | $n\\le$ | $m\\le$ | $q\\le$ | $t\\le$ | $c\\le$ | 对应测试点 | 总分 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $10$ | $2$ | $50$ | $1$ | $255$ | $1\\sim2$ | $10$ |\n| $1$ | $100$ | $2$ | $500$ | $3$ | $10^9$ | $3\\sim4$ | $15$ |\n| $2$ | $100$ | $100$ | $500$ | $3$ | $10^9$ | $5\\sim6$ | $15$ |\n| $3$ | $100$ | $100$ | $1$ | $3$ | $10^9$ | $7\\sim9$ | $15$ |\n| $4$ | $100$ | $100$ | $500$ | $3$ | $10^9$ | $10\\sim12$ | $45$ |\n\n**对于 Subtask 2**，保证每个变量等概率随机生成。\n\n对于 $100\\%$ 的数据，$1\\le n,m\\le 100$，$1\\le q\\le 500$，$1\\le i\\le n$，$1\\le j\\le m$，$t\\in \\{1,2,3\\}$，$1\\le c\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9199", "type": "P", "difficulty": 3, "samples": [["5 2\n1 0 1 3 0", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "洛谷原创", "O2优化", "构造", "洛谷月赛"], "title": "「GMOI R2-T2」猫耳小", "background": "**本题与 [加强版](https://www.luogu.com.cn/problem/P9202) 的区别在于数据范围和输出格式。在这一版本中，$n\\le 5\\times 10^3$，值域为 $5\\times 10^3$，你不需要给出构造。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r8a6ylx3.png)", "description": "小 R 是一个可爱的猫耳女孩子，她喜欢研究数列的 $\\operatorname{mex}\\text{*}$。\n\n现在她有一个长度为 $n$ 的数列 $a$。她讨厌整数 $k$，因此她希望修改数列 $a$ 的若干个元素为任意**自然数**，使得 $a$ 的任意**连续非空子串**的 $\\operatorname{mex}$ 都不等于 $k$。\n\n请你求出最少需要修改多少个元素。\n\n$\\text{*}$ 本题中，数列的 $\\operatorname{mex}$ 被定义为数列中最小未出现的**自然数**，例如：\n\n- $\\operatorname{mex}\\{1,2,3\\}=0$，因为 $0$ 是自然数。\n- $\\operatorname{mex}\\{0,1,3\\}=2$。\n- $\\operatorname{mex}\\{0,1,2\\}=3$。", "inputFormat": "第一行两个整数 $n,k$，表示数列长度和小 R 讨厌的数。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $a_i$，表示这个数列的第 $i$ 项。", "outputFormat": "一行一个整数，表示最少需要修改的元素个数。", "hint": "**样例解释**\n\n一种方案是将 $\\{1,0,1,3,0\\}$ 改为 $\\{1,1,1,3,2\\}$，共改动两个元素。\n\n可以证明不存在更优的方案。\n\n---\n\n**本题使用 Subtask 捆绑测试。**\n\n| Subtask | $n\\le$ | $k\\le$ | $a_i\\le$ | 特殊性质 | 对应测试点 | 总分 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $6$ | $6$ | $6$ | $-$ | $1\\sim 2$ | $10$ |\n| $1$ | $100$ | $5\\times 10^3$ | $5\\times 10^3$ | $-$ | $3\\sim 5$ | $20$ |\n| $2$ | $5\\times 10^3$ | $1$ | $5\\times 10^3$ | $-$ | $6\\sim 10$ | $20$ |\n| $3$ | $5\\times 10^3$ | $5\\times 10^3$ | $5\\times 10^3$ | $\\bf A$ | $11\\sim 15$ | $20$ |\n| $4$ | $5\\times 10^3$ | $5\\times 10^3$ | $5\\times 10^3$ | $-$ | $16\\sim 20$ | $30$ |\n\n特殊性质 $\\bf A$：保证 $a_i < k$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^3$，$0\\le k,a_i\\le 5\\times 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GMOI R2-T2」猫耳小", "background": "**本题与 [加强版](https://www.luogu.com.cn/problem/P9202) 的区别在于数据范围和输出格式。在这一版本中，$n\\le 5\\times 10^3$，值域为 $5\\times 10^3$，你不需要给出构造。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r8a6ylx3.png)", "description": "小 R 是一个可爱的猫耳女孩子，她喜欢研究数列的 $\\operatorname{mex}\\text{*}$。\n\n现在她有一个长度为 $n$ 的数列 $a$。她讨厌整数 $k$，因此她希望修改数列 $a$ 的若干个元素为任意**自然数**，使得 $a$ 的任意**连续非空子串**的 $\\operatorname{mex}$ 都不等于 $k$。\n\n请你求出最少需要修改多少个元素。\n\n$\\text{*}$ 本题中，数列的 $\\operatorname{mex}$ 被定义为数列中最小未出现的**自然数**，例如：\n\n- $\\operatorname{mex}\\{1,2,3\\}=0$，因为 $0$ 是自然数。\n- $\\operatorname{mex}\\{0,1,3\\}=2$。\n- $\\operatorname{mex}\\{0,1,2\\}=3$。", "inputFormat": "第一行两个整数 $n,k$，表示数列长度和小 R 讨厌的数。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $a_i$，表示这个数列的第 $i$ 项。", "outputFormat": "一行一个整数，表示最少需要修改的元素个数。", "hint": "**样例解释**\n\n一种方案是将 $\\{1,0,1,3,0\\}$ 改为 $\\{1,1,1,3,2\\}$，共改动两个元素。\n\n可以证明不存在更优的方案。\n\n---\n\n**本题使用 Subtask 捆绑测试。**\n\n| Subtask | $n\\le$ | $k\\le$ | $a_i\\le$ | 特殊性质 | 对应测试点 | 总分 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $6$ | $6$ | $6$ | $-$ | $1\\sim 2$ | $10$ |\n| $1$ | $100$ | $5\\times 10^3$ | $5\\times 10^3$ | $-$ | $3\\sim 5$ | $20$ |\n| $2$ | $5\\times 10^3$ | $1$ | $5\\times 10^3$ | $-$ | $6\\sim 10$ | $20$ |\n| $3$ | $5\\times 10^3$ | $5\\times 10^3$ | $5\\times 10^3$ | $\\bf A$ | $11\\sim 15$ | $20$ |\n| $4$ | $5\\times 10^3$ | $5\\times 10^3$ | $5\\times 10^3$ | $-$ | $16\\sim 20$ | $30$ |\n\n特殊性质 $\\bf A$：保证 $a_i < k$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5\\times 10^3$，$0\\le k,a_i\\le 5\\times 10^3$。", "locale": "zh-CN"}}}
{"pid": "P9200", "type": "P", "difficulty": 6, "samples": [["3\n1 3 2 2\n3 -5 1", "9"], ["12\n4 7 7 8 8 4 5 5 9 10 1 1 10 \n0 -5 7 8 1 -1 -6 8 2 4 10 8 ", "509"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "线段树", "二分", "树状数组", "洛谷原创", "O2优化", "枚举", "洛谷月赛"], "title": "「GMOI R2-T3」粒子环游", "background": "热爱珂学的小 Z 正在进行一项无聊的实验。", "description": "实验室中有一个由 $n$ 个实验腔连接而成的环形轨道，其中第 $i$ 个实验腔顺时针连向第 $i+1$ 个实验腔（特别的，第 $n$ 个实验腔连向第 $1$ 个实验腔）。同时还有一个标号为 $n+1$ 的新建实验腔要接入这个环形轨道。它可以接在任意两个原本相连的实验腔之间。\n\n第 $i$ 个实验腔可以将带电荷量为 $Q$ 的粒子运输到它的下一个实验腔，这个过程花费的能量为 $\\vert Q \\vert \\times c_i$。除此之外，第 $i$ 个实验腔本身就存储了量为 $e_i$ 的电荷（电荷量有正负）。由于众所周知的电荷守恒定律，第 $n+1$ 个实验腔储存的电荷量与前 $n$ 个实验腔储存的总电荷量的代数和为 $0$。\n\n小 Z 有一个原本不带电的粒子。等到第 $n+1$ 个实验腔接入轨道后，他要任选一个实验腔（包括第 $n+1$ 个）作为出发点，将粒子放入，并使之在实验腔的能量驱动下顺时针环游一周回到出发点。粒子每到达一个实验腔（包括出发点），它所带电荷量就会变成原来所带的电荷量和这个实验腔所储存的电荷量的代数和。\n\n**注意：电荷量会先加上实验腔所含电荷量，再计算能量贡献。**\n\n现在，小 Z 想知道，在所有接入新建实验腔并选定出发点的方案中，粒子环游一周所需的能量最少为多少？", "inputFormat": "第一行为一个正整数 $n$ ，表示环形轨道原有实验腔数。\n\n第二行有 $n+1$ 个非负整数，依次表示 $c_1,c_2,...,c_{n+1}$。\n\n第三行有 $n$ 个整数，依次表示 $e_1,e_2,...,e_{n}$。", "outputFormat": "输出共一行，包括一个数，表示粒子环游一周所需的最少能量。", "hint": "样例 $1$ 解释：一种最优方案为将 $4$ 号实验腔接在 $3$ 号实验腔与 $1$ 号实验腔之间，以 $4$ 号实验腔为出发点，花费能量为 $ 1\\times 2\\ +\\ 4\\times 1\\ + \\vert -1 \\vert \\times 3 \\ +\\ 0 \\times 2 =9$。\n\n**本题采用 Subtask 捆绑测试。**\n\n| Subtask | $n\\le$ | $c_i\\le$ | $\\vert e_i\\vert$ | 特殊性质 | 对应测试点 | 总分 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $300$ | $100$ | $100$ | $-$ | $1\\sim 5$ | $10$ |\n| $1$ | $10^3$ | $10^3$ | $10^3$ | $\\bf A$ | $6\\sim 7$ | $5$ |\n| $2$ | $10^4$ | $10^4$ | $10^4$ | $-$ | $8\\sim12$ | $15$ |\n| $3$ | $10^5$ | $10^5$ | $10^5$ | $\\bf B$ | $13\\sim 16$ | $10$ |\n| $4$ | $2.5\\times 10^5$ | $10^5$ |$10^5$ | $-$ | $17\\sim 25$ | $60$ |\n\n特殊性质 $\\bf A$：对于所有的 $i\\in[1,n+1](i\\in \\Z)$，满足 $c_i=0$。\n\n特殊性质 $\\bf B$：对于所有的 $i\\in[1,n+1](i\\in \\Z)$，满足 $c_i=1$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2.5\\times 10^5$，$0\\le c_i\\le 10^5$，$0\\le |e_i|\\le 10^5$。\n\n保证答案在 long long 范围内。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GMOI R2-T3」粒子环游", "background": "热爱珂学的小 Z 正在进行一项无聊的实验。", "description": "实验室中有一个由 $n$ 个实验腔连接而成的环形轨道，其中第 $i$ 个实验腔顺时针连向第 $i+1$ 个实验腔（特别的，第 $n$ 个实验腔连向第 $1$ 个实验腔）。同时还有一个标号为 $n+1$ 的新建实验腔要接入这个环形轨道。它可以接在任意两个原本相连的实验腔之间。\n\n第 $i$ 个实验腔可以将带电荷量为 $Q$ 的粒子运输到它的下一个实验腔，这个过程花费的能量为 $\\vert Q \\vert \\times c_i$。除此之外，第 $i$ 个实验腔本身就存储了量为 $e_i$ 的电荷（电荷量有正负）。由于众所周知的电荷守恒定律，第 $n+1$ 个实验腔储存的电荷量与前 $n$ 个实验腔储存的总电荷量的代数和为 $0$。\n\n小 Z 有一个原本不带电的粒子。等到第 $n+1$ 个实验腔接入轨道后，他要任选一个实验腔（包括第 $n+1$ 个）作为出发点，将粒子放入，并使之在实验腔的能量驱动下顺时针环游一周回到出发点。粒子每到达一个实验腔（包括出发点），它所带电荷量就会变成原来所带的电荷量和这个实验腔所储存的电荷量的代数和。\n\n**注意：电荷量会先加上实验腔所含电荷量，再计算能量贡献。**\n\n现在，小 Z 想知道，在所有接入新建实验腔并选定出发点的方案中，粒子环游一周所需的能量最少为多少？", "inputFormat": "第一行为一个正整数 $n$ ，表示环形轨道原有实验腔数。\n\n第二行有 $n+1$ 个非负整数，依次表示 $c_1,c_2,...,c_{n+1}$。\n\n第三行有 $n$ 个整数，依次表示 $e_1,e_2,...,e_{n}$。", "outputFormat": "输出共一行，包括一个数，表示粒子环游一周所需的最少能量。", "hint": "样例 $1$ 解释：一种最优方案为将 $4$ 号实验腔接在 $3$ 号实验腔与 $1$ 号实验腔之间，以 $4$ 号实验腔为出发点，花费能量为 $ 1\\times 2\\ +\\ 4\\times 1\\ + \\vert -1 \\vert \\times 3 \\ +\\ 0 \\times 2 =9$。\n\n**本题采用 Subtask 捆绑测试。**\n\n| Subtask | $n\\le$ | $c_i\\le$ | $\\vert e_i\\vert$ | 特殊性质 | 对应测试点 | 总分 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $300$ | $100$ | $100$ | $-$ | $1\\sim 5$ | $10$ |\n| $1$ | $10^3$ | $10^3$ | $10^3$ | $\\bf A$ | $6\\sim 7$ | $5$ |\n| $2$ | $10^4$ | $10^4$ | $10^4$ | $-$ | $8\\sim12$ | $15$ |\n| $3$ | $10^5$ | $10^5$ | $10^5$ | $\\bf B$ | $13\\sim 16$ | $10$ |\n| $4$ | $2.5\\times 10^5$ | $10^5$ |$10^5$ | $-$ | $17\\sim 25$ | $60$ |\n\n特殊性质 $\\bf A$：对于所有的 $i\\in[1,n+1](i\\in \\Z)$，满足 $c_i=0$。\n\n特殊性质 $\\bf B$：对于所有的 $i\\in[1,n+1](i\\in \\Z)$，满足 $c_i=1$。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2.5\\times 10^5$，$0\\le c_i\\le 10^5$，$0\\le |e_i|\\le 10^5$。\n\n保证答案在 long long 范围内。", "locale": "zh-CN"}}}
{"pid": "P9201", "type": "P", "difficulty": 7, "samples": [["4 3\n1 010\n2 001\n3 000\n3 001", "52"], ["5 4\n1 1000\n4 0100\n1 0000\n2 0001\n2 0000", "128"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "动态树 LCT", "扫描线", "基环树", "洛谷月赛", "分类讨论"], "title": "「GMOI R2-T4」电子木鱼", "background": "运营电子资本，招聘赛博佛祖，积累虚拟功德。\n\n功德无量，随喜赞叹。\n\n111", "description": "给你 $n$，表示一共有 $n$ 位赛博佛祖，编号依次为 $1 \\sim n$。\n\n第 $i\\ (1 \\leq i \\leq n)$ 位赛博佛祖可以对应为一个二元组 $\\langle S_i, d_i \\rangle$，其中 $S$ 在任意时刻均为 $\\{1, 2, 3, \\dots, m\\}$ 的一个子集（可以为空），而 $d_i$ 为 $1 \\sim m$ 间的整数。\n\n如果在某一时刻，存在一位赛博佛祖的 $S_i$ 为空集，佛祖会感到很开心而给你加功德。具体地，他会敲响第 $d_i$ 个木鱼，并 **在下一时刻同时** 影响所有的 $n$ 位赛博佛祖（包括他自己）。对第 $j(1 \\leq j \\leq n)$ 位赛博佛祖，如果 $d_i \\in S_j$，那么将从 $S_j$ 内删去 $d_i$；否则向 $S_j$ 内加入 $d_i$。如果有多位赛博佛祖的 $S_i$ 为空集，取编号最小的 $i$ 为你加功德。\n\n现在作为电子资本家的你，想要功德无量。你想知道，最少再请来几位赛博佛祖，可以使得你的这些佛祖们 **源源不断地** 为你加功德。假设这个答案是 $s$（可以为 $0$），那么新的佛祖们的编号依次为 $(n+1) \\sim (n+s)$。\n\n**因为你是个资本家，有时候你不想请那么多佛祖**。所以你有许多组询问，对于一组 $l, r$，设 $f(l, r)$ 表示如果初始只有 $[l, r]$ 之间的佛祖，答案将会是多少，注意，每组询问相互独立，上一次添加的佛祖不会延续到以后的询问中。\n\n为了避免太多的输出，你只需要输出： \n\n$$\\sum\\limits_{l=1}^n\\sum\\limits_{r=l}^n f(l,r)\\times2^l$$\n\n即可，答案对 $10^9 + 7$ 取模。", "inputFormat": "第一行，两个整数 $n, m$。\n\n接下来 $n$ 行，第 $i$ 行首先一个整数描述 $d_i$，接着一个长度为 $m$ 的 $\\texttt{01}$ 字符串表示 $S_i$。如果第 $j$ 个字符为 $1$，表示 $j \\in S_i$；否则 $j \\notin S_i$。", "outputFormat": "一行，表示最终答案取模后的值。", "hint": "### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（10 pts）：$n \\leq 10$，$m \\leq 5$。\n- Subtask 1（10 pts）：$n \\leq 300$，$m \\leq 10$。\n- Subtask 2（15 pts）：$n \\leq 1024$，$m \\leq 10$。保证每个 $S_i$ 均不同。\n- Subtask 3（15 pts）：$n \\leq 10^4$。\n- Subtask 4（10 pts）：每个 $S_i$ 均在 $2^m$ 种情况中等概率随机生成，$d_i$ 均在 $m$ 种情况中等概率随机生成。\n- Subtask 5（40 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 17$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GMOI R2-T4」电子木鱼", "background": "运营电子资本，招聘赛博佛祖，积累虚拟功德。\n\n功德无量，随喜赞叹。\n\n111", "description": "给你 $n$，表示一共有 $n$ 位赛博佛祖，编号依次为 $1 \\sim n$。\n\n第 $i\\ (1 \\leq i \\leq n)$ 位赛博佛祖可以对应为一个二元组 $\\langle S_i, d_i \\rangle$，其中 $S$ 在任意时刻均为 $\\{1, 2, 3, \\dots, m\\}$ 的一个子集（可以为空），而 $d_i$ 为 $1 \\sim m$ 间的整数。\n\n如果在某一时刻，存在一位赛博佛祖的 $S_i$ 为空集，佛祖会感到很开心而给你加功德。具体地，他会敲响第 $d_i$ 个木鱼，并 **在下一时刻同时** 影响所有的 $n$ 位赛博佛祖（包括他自己）。对第 $j(1 \\leq j \\leq n)$ 位赛博佛祖，如果 $d_i \\in S_j$，那么将从 $S_j$ 内删去 $d_i$；否则向 $S_j$ 内加入 $d_i$。如果有多位赛博佛祖的 $S_i$ 为空集，取编号最小的 $i$ 为你加功德。\n\n现在作为电子资本家的你，想要功德无量。你想知道，最少再请来几位赛博佛祖，可以使得你的这些佛祖们 **源源不断地** 为你加功德。假设这个答案是 $s$（可以为 $0$），那么新的佛祖们的编号依次为 $(n+1) \\sim (n+s)$。\n\n**因为你是个资本家，有时候你不想请那么多佛祖**。所以你有许多组询问，对于一组 $l, r$，设 $f(l, r)$ 表示如果初始只有 $[l, r]$ 之间的佛祖，答案将会是多少，注意，每组询问相互独立，上一次添加的佛祖不会延续到以后的询问中。\n\n为了避免太多的输出，你只需要输出： \n\n$$\\sum\\limits_{l=1}^n\\sum\\limits_{r=l}^n f(l,r)\\times2^l$$\n\n即可，答案对 $10^9 + 7$ 取模。", "inputFormat": "第一行，两个整数 $n, m$。\n\n接下来 $n$ 行，第 $i$ 行首先一个整数描述 $d_i$，接着一个长度为 $m$ 的 $\\texttt{01}$ 字符串表示 $S_i$。如果第 $j$ 个字符为 $1$，表示 $j \\in S_i$；否则 $j \\notin S_i$。", "outputFormat": "一行，表示最终答案取模后的值。", "hint": "### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（10 pts）：$n \\leq 10$，$m \\leq 5$。\n- Subtask 1（10 pts）：$n \\leq 300$，$m \\leq 10$。\n- Subtask 2（15 pts）：$n \\leq 1024$，$m \\leq 10$。保证每个 $S_i$ 均不同。\n- Subtask 3（15 pts）：$n \\leq 10^4$。\n- Subtask 4（10 pts）：每个 $S_i$ 均在 $2^m$ 种情况中等概率随机生成，$d_i$ 均在 $m$ 种情况中等概率随机生成。\n- Subtask 5（40 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 17$。", "locale": "zh-CN"}}}
{"pid": "P9202", "type": "P", "difficulty": 4, "samples": [["5 2\n1 0 1 3 0", "2\n1 1 1 3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「GMOI R2-T2」猫耳小（加强版）", "background": "**本题与 [原题](https://www.luogu.com.cn/problem/P9199) 的区别在于数据范围和输出格式。在这一版本中，$n\\le 10^6$，值域为 $10^9$，你需要给出构造。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r8a6ylx3.png)", "description": "小 R 是一个可爱的猫耳女孩子，她喜欢研究数列的 $\\operatorname{mex}\\text{*}$。\n\n现在她有一个长度为 $n$ 的数列 $a$。她讨厌整数 $k$，因此她希望修改数列 $a$ 的若干个元素为任意**自然数**，使得 $a$ 的任意**连续非空子串**的 $\\operatorname{mex}$ 都不等于 $k$。\n\n请你求出最少需要修改多少个元素，并给出方案。\n\n$\\text{*}$ 本题中，数列的 $\\operatorname{mex}$ 被定义为数列中最小未出现的**自然数**，例如：\n\n- $\\operatorname{mex}\\{1,2,3\\}=0$，因为 $0$ 是自然数。\n- $\\operatorname{mex}\\{0,1,3\\}=2$。\n- $\\operatorname{mex}\\{0,1,2\\}=3$。", "inputFormat": "第一行两个整数 $n,k$，表示数列长度和小 R 讨厌的数。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $a_i$，表示这个数列的第 $i$ 项。", "outputFormat": "第一行一个整数，表示最少需要修改的元素个数。\n\n第二行 $n$ 个整数，表示修改后的数列。你需要保证修改后的数列的每个数在 $[0,10^9]\\cap\\Z$ 的范围内。", "hint": "**样例解释**\n\n一种方案是将 $\\{1,0,1,3,0\\}$ 改为 $\\{1,1,1,3,2\\}$，共改动两个元素。\n\n可以证明不存在更优的方案。\n\n---\n\n**评分方式**\n\n本题采用自定义校验器（Special Judge）进行评测。\n\n对于每个测试点，如果你的最小步数正确，可以得到 $30\\%$ 的分数。在此基础上，如果方案也正确，可以得到满分。\n\n请注意：即使你不会给出方案，也请按照输出格式在第二行输出 $n$ 个整数。\n\n---\n\n**本题采用捆绑测试，数据无梯度。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$0\\le k,a_i\\le 10^9$。\n\n本题读写量较大，建议使用效率较高的读写方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「GMOI R2-T2」猫耳小（加强版）", "background": "**本题与 [原题](https://www.luogu.com.cn/problem/P9199) 的区别在于数据范围和输出格式。在这一版本中，$n\\le 10^6$，值域为 $10^9$，你需要给出构造。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r8a6ylx3.png)", "description": "小 R 是一个可爱的猫耳女孩子，她喜欢研究数列的 $\\operatorname{mex}\\text{*}$。\n\n现在她有一个长度为 $n$ 的数列 $a$。她讨厌整数 $k$，因此她希望修改数列 $a$ 的若干个元素为任意**自然数**，使得 $a$ 的任意**连续非空子串**的 $\\operatorname{mex}$ 都不等于 $k$。\n\n请你求出最少需要修改多少个元素，并给出方案。\n\n$\\text{*}$ 本题中，数列的 $\\operatorname{mex}$ 被定义为数列中最小未出现的**自然数**，例如：\n\n- $\\operatorname{mex}\\{1,2,3\\}=0$，因为 $0$ 是自然数。\n- $\\operatorname{mex}\\{0,1,3\\}=2$。\n- $\\operatorname{mex}\\{0,1,2\\}=3$。", "inputFormat": "第一行两个整数 $n,k$，表示数列长度和小 R 讨厌的数。\n\n第二行 $n$ 个整数，第 $i$ 个整数为 $a_i$，表示这个数列的第 $i$ 项。", "outputFormat": "第一行一个整数，表示最少需要修改的元素个数。\n\n第二行 $n$ 个整数，表示修改后的数列。你需要保证修改后的数列的每个数在 $[0,10^9]\\cap\\Z$ 的范围内。", "hint": "**样例解释**\n\n一种方案是将 $\\{1,0,1,3,0\\}$ 改为 $\\{1,1,1,3,2\\}$，共改动两个元素。\n\n可以证明不存在更优的方案。\n\n---\n\n**评分方式**\n\n本题采用自定义校验器（Special Judge）进行评测。\n\n对于每个测试点，如果你的最小步数正确，可以得到 $30\\%$ 的分数。在此基础上，如果方案也正确，可以得到满分。\n\n请注意：即使你不会给出方案，也请按照输出格式在第二行输出 $n$ 个整数。\n\n---\n\n**本题采用捆绑测试，数据无梯度。**\n\n对于 $100\\%$ 的数据，$1\\le n\\le 10^6$，$0\\le k,a_i\\le 10^9$。\n\n本题读写量较大，建议使用效率较高的读写方式。", "locale": "zh-CN"}}}
{"pid": "P9203", "type": "P", "difficulty": 1, "samples": [["100.000000000000 999999.000000000000\n", "YES"], ["114.123456789000 514.123456789000\n", "YES"], ["0.333333333333 0.333333333334\n", "NO"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "传智杯"], "title": "时效「月岩笠的诅咒」", "background": "蓬莱之药，被诅咒的不死之药。\n\n奉命将蓬莱之药投入富士山中销毁的月岩笠，最终打算把蓬莱之药改投入八岳销毁。在下山途中妹红将其踹下山，抢到了蓬莱之药。\n\n那已经是千年前的事情了。", "description": "时间节点上发生过的两件事情的时间可被看作两实数 $a,b$。我们称两个事件满足「周年」关系，当且仅当可以通过执行以下两种操作（可以 $0$ 次）使其相等：\n\n- 将 $a$ 加上 $1$，即 $a\\gets a+1$；\n- 将 $b$ 加上 $1$，即 $b\\gets b+1$。\n\n现在给定实数 $a,b$，询问它们是否满足「周年」。", "inputFormat": "输入共一行两个实数 $a,b$。输入保留到小数点后 $12$ 位。", "outputFormat": "输出共一行。如果存在合法方案，输出 $\\verb!YES!$，否则输出 $\\verb!NO!$。", "hint": "对于全部数据，保证 $0<a,b\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "时效「月岩笠的诅咒」", "background": "蓬莱之药，被诅咒的不死之药。\n\n奉命将蓬莱之药投入富士山中销毁的月岩笠，最终打算把蓬莱之药改投入八岳销毁。在下山途中妹红将其踹下山，抢到了蓬莱之药。\n\n那已经是千年前的事情了。", "description": "时间节点上发生过的两件事情的时间可被看作两实数 $a,b$。我们称两个事件满足「周年」关系，当且仅当可以通过执行以下两种操作（可以 $0$ 次）使其相等：\n\n- 将 $a$ 加上 $1$，即 $a\\gets a+1$；\n- 将 $b$ 加上 $1$，即 $b\\gets b+1$。\n\n现在给定实数 $a,b$，询问它们是否满足「周年」。", "inputFormat": "输入共一行两个实数 $a,b$。输入保留到小数点后 $12$ 位。", "outputFormat": "输出共一行。如果存在合法方案，输出 $\\verb!YES!$，否则输出 $\\verb!NO!$。", "hint": "对于全部数据，保证 $0<a,b\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9204", "type": "P", "difficulty": 2, "samples": [["2 7 5 2", "9"], ["2 2 3 2", "-1\n"], ["0 0 1000000000 1000000000\n", "2000000000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "传智杯"], "title": "不死「火鸟　−凤翼天翔−」", "background": "拥有了「不死」的能力的藤原妹红，同时获得了操纵火焰的力量，是不死鸟的化身。\n\n不死鸟，和凤凰是同一种生物吗？", "description": "妹红可以操纵火鸟。火鸟可以看作在边长**无限大**的棋盘上放置着的一枚棋子 $A$，$A$ 位于 $(x_1,y_1)$ 处。$A$ 以如下规则移动：\n\n- 在奇数次移动时，$A$ 只能向右上或者左下移动一格，如下图红色箭头；\n- 在偶数次移动时，$A$ 只能向右下或者左上移动一格，如下图蓝色箭头。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rk4bjeya.png)\n\n由于棋盘无限大，因此 $x,y$ 的取值可以为负数。\n\n每一步行动时 $A$ 不能待在原地不移动。现在需要把 $A$ 移动到坐标为 $(x_2,y_2)$ 的 $B$ 位置，最少要多少步？特别地，若不存在这样的方案，输出 $-1$。\n\n如下图所示是 $A=(2,7)$，$B=(5,2)$ 的情况。一种移动次数最小的方案已在图上标出，需要 $9$ 步。红色线段表示奇数次的移动，蓝色线段表示偶数次的移动。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mzwrv7q0.png)", "inputFormat": "输入共一行四个整数 $x_1,y_1,x_2,y_2$，描述 $A,B$ 的坐标。", "outputFormat": "输出共一行一个整数。如果存在一条从 $A$ 到 $B$ 的移动方案，输出移动的最小步数；否则输出 $-1$。", "hint": "### 数据范围及约定\n\n对于全部数据，保证 $0\\le x_1,y_1,x_2,y_2\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "不死「火鸟　−凤翼天翔−」", "background": "拥有了「不死」的能力的藤原妹红，同时获得了操纵火焰的力量，是不死鸟的化身。\n\n不死鸟，和凤凰是同一种生物吗？", "description": "妹红可以操纵火鸟。火鸟可以看作在边长**无限大**的棋盘上放置着的一枚棋子 $A$，$A$ 位于 $(x_1,y_1)$ 处。$A$ 以如下规则移动：\n\n- 在奇数次移动时，$A$ 只能向右上或者左下移动一格，如下图红色箭头；\n- 在偶数次移动时，$A$ 只能向右下或者左上移动一格，如下图蓝色箭头。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rk4bjeya.png)\n\n由于棋盘无限大，因此 $x,y$ 的取值可以为负数。\n\n每一步行动时 $A$ 不能待在原地不移动。现在需要把 $A$ 移动到坐标为 $(x_2,y_2)$ 的 $B$ 位置，最少要多少步？特别地，若不存在这样的方案，输出 $-1$。\n\n如下图所示是 $A=(2,7)$，$B=(5,2)$ 的情况。一种移动次数最小的方案已在图上标出，需要 $9$ 步。红色线段表示奇数次的移动，蓝色线段表示偶数次的移动。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mzwrv7q0.png)", "inputFormat": "输入共一行四个整数 $x_1,y_1,x_2,y_2$，描述 $A,B$ 的坐标。", "outputFormat": "输出共一行一个整数。如果存在一条从 $A$ 到 $B$ 的移动方案，输出移动的最小步数；否则输出 $-1$。", "hint": "### 数据范围及约定\n\n对于全部数据，保证 $0\\le x_1,y_1,x_2,y_2\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9205", "type": "P", "difficulty": 2, "samples": [["3 2 1\n1 0\n1 0\n0 1\n", "3\n\n"], ["15 8 4\n9 0\n9 1\n9 1\n8 1\n8 2\n8 3\n7 3\n6 3\n5 3\n4 3\n3 3\n2 4\n2 5\n1 6\n0 7\n", "24\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "传智杯"], "title": "藤原「灭罪寺院伤」", "background": "藤原氏，权倾一时的重臣。凭借着炙手可热的权势，杀害了政敌长屋王而触碰到了最高的权力。\n\n是天谴吗？即使修缮寺庙积德行善，藤原四兄弟最终覆灭在了天花之下。", "description": "环环相扣的因果报应可看成平面上的 $n$ 个小正方形，它们的边长分别为 $1,2,3,\\cdots,n$。初始时，编号较小的正方形被编号较大的正方形完全包含：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w5f6nucw.png)\n\n为了方便记录正方形的位置，我们取正方形左上角的坐标 $(x_i,y_i)$ 为正方形的坐标。此时可以唯一确定该正方形。\n\n现在需要将最小的正方形的位置移动到 $(x_{\\rm end},y_{\\rm end})$，移动过程满足：\n\n- 每次**最多移动一个**正方形，可以往上下左右四个方向之一移动一个单位长度。\n- 在移动过程中，需要保证**较小正方形会被较大的正方形包含**。\n\n请求出最少次数。", "inputFormat": "第一行有三个整数 $n, x_{\\mathrm{end}},y_{\\mathrm{end}}$，含义如题面所示。\n\n接下来 $n$ 行，每行有两个整数 $x_i,y_i$，描述第 $i$ 小的正方形左上角的坐标。", "outputFormat": "输出共一行一个整数，表示最小的操作步数。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dcghf89y.png)\n\n### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 10^5$，$0\\le x_i,y_i,x_{\\mathrm{end}},y_{\\mathrm{end}}\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "藤原「灭罪寺院伤」", "background": "藤原氏，权倾一时的重臣。凭借着炙手可热的权势，杀害了政敌长屋王而触碰到了最高的权力。\n\n是天谴吗？即使修缮寺庙积德行善，藤原四兄弟最终覆灭在了天花之下。", "description": "环环相扣的因果报应可看成平面上的 $n$ 个小正方形，它们的边长分别为 $1,2,3,\\cdots,n$。初始时，编号较小的正方形被编号较大的正方形完全包含：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/w5f6nucw.png)\n\n为了方便记录正方形的位置，我们取正方形左上角的坐标 $(x_i,y_i)$ 为正方形的坐标。此时可以唯一确定该正方形。\n\n现在需要将最小的正方形的位置移动到 $(x_{\\rm end},y_{\\rm end})$，移动过程满足：\n\n- 每次**最多移动一个**正方形，可以往上下左右四个方向之一移动一个单位长度。\n- 在移动过程中，需要保证**较小正方形会被较大的正方形包含**。\n\n请求出最少次数。", "inputFormat": "第一行有三个整数 $n, x_{\\mathrm{end}},y_{\\mathrm{end}}$，含义如题面所示。\n\n接下来 $n$ 行，每行有两个整数 $x_i,y_i$，描述第 $i$ 小的正方形左上角的坐标。", "outputFormat": "输出共一行一个整数，表示最小的操作步数。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dcghf89y.png)\n\n### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 10^5$，$0\\le x_i,y_i,x_{\\mathrm{end}},y_{\\mathrm{end}}\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9206", "type": "P", "difficulty": 2, "samples": [["10 1\n3 2 6 4 1 1 3 8 7 3\n1\n", "27\n1 1 2 3 3 3 4 6 7 8 \n"], ["15 1\n15 14 13 12 10 11 9 8 7 4 5 6 3 2 1\n1\n", "116\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\n"], ["15 3\n15 14 13 12 10 11 9 8 7 4 5 6 3 2 1      \n9 3 1", "68\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "排序", "传智杯"], "title": "不死「徐福时空」", "background": "徐福是秦朝齐地方士。\n\n奉秦皇之命，徐福率三千童男童女踏上了寻找传说中的「蓬莱之药」的征途。但最后再也没有回来。\n\n徐福最终去了哪里？有没有找到蓬莱之药？这些问题已经无关紧要了。", "description": "时间的流逝可以抽象成对数字序列进行排序所花费的时间。不同排序策略花费的时间是不同的。这里介绍一种人类探索排序过程中具有里程碑意义的一种排序算法：希尔排序。\n\n希尔排序可以被视为一种对插入排序的优化。为了研究希尔排序的运行效率，我们希望你实现一个简单的希尔排序的过程。在这之前，我们会规范插入排序的具体流程以及评价一个插入排序的过程的「代价」。\n\n### 插入排序\n\n对于一个长度为 $n$ 的数组 $a=[a_1,a_2,\\cdots,a_n]$，插入排序的思想是，从前到后枚举每一个元素，将其插入到正确的位置上去：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bzr46ykp.png)\n\n如图所示是一个典型的插入排序的过程。在第 $i$ 轮中我们把下标为 $i$ 的元素插入到了**排好序的部分中第一个比 $\\bm{a_i}$ 大的元素之前**。假设 $a_i$ 最终被插入到了 $b_i$ 位置，那么我们称这一轮的代价为 $|a_i-b_i|+1$，整个插入排序的过程的代价就是每一轮的代价之和。\n\n### 希尔排序\n\n为了减小插入排序的代价，我们引入了希尔排序。希尔排序将整个排序过程分成了若干轮，每一轮会按照一定的间隔把元素分组，对每一组内的元素分别进行排序。在最后一轮，希尔排序会对整个数组进行一次最终的插入排序。\n\n具体的分组方式是，选定一个整数 $d$，划分为如下组别：\n\n- 下标为 $1,1+d,1+2d,\\cdots$ 的元素；\n- 下标为 $2,2+d,2+2d,\\cdots$ 的元素；\n- 下标为 $3,3+d,3+2d,\\cdots$ 的元素；\n- ……\n- 下标为 $d,2d,3d,\\cdots$ 的元素。\n\n下面是**一轮**希尔排序的过程。我们选定 $d=3$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ladynhmo.png)\n\n希尔排序每一轮分别选取 $d$，并且在最后一轮取 $d=1$，每一轮都进行这样的排序，最终得到一个有序的数组。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/msa25yb1.png)\n\n虽然看上去进行了很多轮插入排序，但是最终每一轮插入排序的代价之和可能会远小于对整个数组进行单次插入排序的代价（上述例子中体现得并不明显，可以参考样例 $2,3$ 给出的例子）。\n\n事实上，希尔排序是人类发现的第一个最坏复杂度低于 $\\Theta (n^2)$ 的排序算法。例如，当取 $d=2^k-1,\\ k=\\lfloor\\log_2 n\\rfloor,\\lfloor\\log_2 n\\rfloor-1,\\lfloor\\log_2 n\\rfloor-2,\\cdots,1$ 时，整个过程的最坏时间复杂度为 $\\mathcal \\Theta(n^{3/2})$。", "inputFormat": "第一行有两个整数 $n,m$，分别表示待排序的数组的长度以及希尔排序进行的轮数。\n\n第二行有 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，描述数组里的元素。\n\n第三行有 $m$ 个整数 $d_1,d_2,\\cdots,d_m$，描述每一轮选取的 $d$ 的值。数据保证 $d_m=1$。", "outputFormat": "第一行输出一个整数 $\\mathrm{cost}$，表示整个希尔排序过程中插入排序产生的代价之和。\n\n第二行输出 $n$ 个整数，表示数组 $a$ 排序后的结果。", "hint": "### 数据范围及约定\n\n对于全部数据，保证 $1\\le n\\le 10^5$，$1\\le m\\le 100$，$\\mathrm{cost}\\le 5\\times 10^7$，$1\\le a_i\\le 10^9$，$1\\le d_i\\le n$，$d_m=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "不死「徐福时空」", "background": "徐福是秦朝齐地方士。\n\n奉秦皇之命，徐福率三千童男童女踏上了寻找传说中的「蓬莱之药」的征途。但最后再也没有回来。\n\n徐福最终去了哪里？有没有找到蓬莱之药？这些问题已经无关紧要了。", "description": "时间的流逝可以抽象成对数字序列进行排序所花费的时间。不同排序策略花费的时间是不同的。这里介绍一种人类探索排序过程中具有里程碑意义的一种排序算法：希尔排序。\n\n希尔排序可以被视为一种对插入排序的优化。为了研究希尔排序的运行效率，我们希望你实现一个简单的希尔排序的过程。在这之前，我们会规范插入排序的具体流程以及评价一个插入排序的过程的「代价」。\n\n### 插入排序\n\n对于一个长度为 $n$ 的数组 $a=[a_1,a_2,\\cdots,a_n]$，插入排序的思想是，从前到后枚举每一个元素，将其插入到正确的位置上去：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bzr46ykp.png)\n\n如图所示是一个典型的插入排序的过程。在第 $i$ 轮中我们把下标为 $i$ 的元素插入到了**排好序的部分中第一个比 $\\bm{a_i}$ 大的元素之前**。假设 $a_i$ 最终被插入到了 $b_i$ 位置，那么我们称这一轮的代价为 $|a_i-b_i|+1$，整个插入排序的过程的代价就是每一轮的代价之和。\n\n### 希尔排序\n\n为了减小插入排序的代价，我们引入了希尔排序。希尔排序将整个排序过程分成了若干轮，每一轮会按照一定的间隔把元素分组，对每一组内的元素分别进行排序。在最后一轮，希尔排序会对整个数组进行一次最终的插入排序。\n\n具体的分组方式是，选定一个整数 $d$，划分为如下组别：\n\n- 下标为 $1,1+d,1+2d,\\cdots$ 的元素；\n- 下标为 $2,2+d,2+2d,\\cdots$ 的元素；\n- 下标为 $3,3+d,3+2d,\\cdots$ 的元素；\n- ……\n- 下标为 $d,2d,3d,\\cdots$ 的元素。\n\n下面是**一轮**希尔排序的过程。我们选定 $d=3$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ladynhmo.png)\n\n希尔排序每一轮分别选取 $d$，并且在最后一轮取 $d=1$，每一轮都进行这样的排序，最终得到一个有序的数组。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/msa25yb1.png)\n\n虽然看上去进行了很多轮插入排序，但是最终每一轮插入排序的代价之和可能会远小于对整个数组进行单次插入排序的代价（上述例子中体现得并不明显，可以参考样例 $2,3$ 给出的例子）。\n\n事实上，希尔排序是人类发现的第一个最坏复杂度低于 $\\Theta (n^2)$ 的排序算法。例如，当取 $d=2^k-1,\\ k=\\lfloor\\log_2 n\\rfloor,\\lfloor\\log_2 n\\rfloor-1,\\lfloor\\log_2 n\\rfloor-2,\\cdots,1$ 时，整个过程的最坏时间复杂度为 $\\mathcal \\Theta(n^{3/2})$。", "inputFormat": "第一行有两个整数 $n,m$，分别表示待排序的数组的长度以及希尔排序进行的轮数。\n\n第二行有 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，描述数组里的元素。\n\n第三行有 $m$ 个整数 $d_1,d_2,\\cdots,d_m$，描述每一轮选取的 $d$ 的值。数据保证 $d_m=1$。", "outputFormat": "第一行输出一个整数 $\\mathrm{cost}$，表示整个希尔排序过程中插入排序产生的代价之和。\n\n第二行输出 $n$ 个整数，表示数组 $a$ 排序后的结果。", "hint": "### 数据范围及约定\n\n对于全部数据，保证 $1\\le n\\le 10^5$，$1\\le m\\le 100$，$\\mathrm{cost}\\le 5\\times 10^7$，$1\\le a_i\\le 10^9$，$1\\le d_i\\le n$，$d_m=1$。", "locale": "zh-CN"}}}
{"pid": "P9207", "type": "P", "difficulty": 3, "samples": [["3 3\n1 2 3\n", "2\n"], ["10 4\n-3 5 6 -4 5 3 -4 1 -1 0", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "传智杯"], "title": "灭罪「正直者之死」", "background": "正直的人，坚强不屈的人，刚正不阿的人。\n\n大约这样的人会处处吃亏吧，不过这样的观点大约是从欺骗者的眼光里看到的。正直的人，即使是在死后，也是最为人尊敬的吧。", "description": "有一台计算器，使用 $k$ 位的带符号整型来对数字进行存储。也就是说，一个变量能够表示的范围是 $[-2^{k-1},2^{k-1})$。现在我们希望使用该计算器计算一系列数 $a_1,a_2,\\cdots,a_n$ 的和。计算的伪代码如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7p0loptk.png)\n\n由于奇怪的特性，如果两个变量在相加时得到的结果在 $[-2^{k-1},2^{k-1})$ 之外，即发生了溢出，那么这台计算器就会卡死，再也无法进行计算了。\n\n为了防止这样的事情发生，一个变通的方法是**更改 $a_i$ 的排列顺序**。容易发现这样不会改变计算出的和的值。\n\n不过，可能不存在一种方案，使得计算出这 $n$ 个数并且计算机不爆炸。但我们还是希望，计算出**尽量多**的数字的和。", "inputFormat": "第一行有两个整数 $n,k$，分别表示元素个数和整型位数。\n\n第二行有 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "共一行一个整数，表示最多能将多少个数字计算出和。", "hint": "### 样例解释\n\n- 对于样例 $1$，一种最优的方案是 $[a_1,a_2,a_3]$，这样可以在计算出前两个数的情况下不溢出。\n- 对于样例 $2$，一种最优的方案是 $[a_{10},a_1,a_2,a_5,a_4,a_7,a_6,a_8,a_9,a_3]$，这样可以在计算前 $9$ 个数的情况下不溢出。\n\n### 数据范围及约定\n\n对于全部数据，保证 $1\\le n\\le 500$，$1< k\\le 8$，$-2^{k-1}\\le a_i<2^{k-1}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "灭罪「正直者之死」", "background": "正直的人，坚强不屈的人，刚正不阿的人。\n\n大约这样的人会处处吃亏吧，不过这样的观点大约是从欺骗者的眼光里看到的。正直的人，即使是在死后，也是最为人尊敬的吧。", "description": "有一台计算器，使用 $k$ 位的带符号整型来对数字进行存储。也就是说，一个变量能够表示的范围是 $[-2^{k-1},2^{k-1})$。现在我们希望使用该计算器计算一系列数 $a_1,a_2,\\cdots,a_n$ 的和。计算的伪代码如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7p0loptk.png)\n\n由于奇怪的特性，如果两个变量在相加时得到的结果在 $[-2^{k-1},2^{k-1})$ 之外，即发生了溢出，那么这台计算器就会卡死，再也无法进行计算了。\n\n为了防止这样的事情发生，一个变通的方法是**更改 $a_i$ 的排列顺序**。容易发现这样不会改变计算出的和的值。\n\n不过，可能不存在一种方案，使得计算出这 $n$ 个数并且计算机不爆炸。但我们还是希望，计算出**尽量多**的数字的和。", "inputFormat": "第一行有两个整数 $n,k$，分别表示元素个数和整型位数。\n\n第二行有 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "共一行一个整数，表示最多能将多少个数字计算出和。", "hint": "### 样例解释\n\n- 对于样例 $1$，一种最优的方案是 $[a_1,a_2,a_3]$，这样可以在计算出前两个数的情况下不溢出。\n- 对于样例 $2$，一种最优的方案是 $[a_{10},a_1,a_2,a_5,a_4,a_7,a_6,a_8,a_9,a_3]$，这样可以在计算前 $9$ 个数的情况下不溢出。\n\n### 数据范围及约定\n\n对于全部数据，保证 $1\\le n\\le 500$，$1< k\\le 8$，$-2^{k-1}\\le a_i<2^{k-1}$。", "locale": "zh-CN"}}}
{"pid": "P9208", "type": "P", "difficulty": 4, "samples": [["3 998244853\n1 2\n1 3\n2 1 2\n1 2 2", "10"], ["5 998244353\n1 2\n1 3\n1 4\n4 5\n5 5 5 2 3\n6 6 1 5 3", "4656"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["树形数据结构", "前缀和", "传智杯"], "title": "虚人「无」", "background": "一点也不美丽的不死鸟。\n\n那双锐爪，沾染了无辜的鲜血。", "description": "给定二元序列 $\\{(v_i,c_i)\\}$ 和一棵以 $1$ 为根的有根树。第 $i$ 个点的点权是 $(v_i,c_i)$。\n\n- 定义一个非根节点的权值为其子树内的 $c$ 的积乘上其子树补的 $v$ 的积。\n- 定义一个根节点的权值为其子树内的 $c$ 的积。\n\n形式化的讲，若 $u$ 不为根节点，则 $u$ 的权值 $f_u$ 为：\n\n$$f_u=\\prod\\limits_{v\\in \\operatorname{substree}(u)} c_v\\times \\prod\\limits_{v\\notin \\operatorname{substree}(u)} v_v$$\n\n否则，其权值 $f_u$ 为：\n\n$$f_u=\\prod\\limits_{v=1}^n c_v$$\n\n试求整棵树**所有节点的权值之和**，答案对 $m$ 取模。请注意：**保证 $\\bm m$ 是质数**。\n\n\n", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n-1$ 行，每行两个数 $u,v$，表示 $u,v$ 之间有一条边。\n\n接下来一行 $n$ 个数，表示 $c_{1, 2, \\dots, n}$。\n\n接下来一行 $n$ 个数，表示 $v_{1, 2, \\dots, n}$。\n", "outputFormat": "输出一个数，表示答案对 $m$ 取模后的结果。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/olehwn2w.png)\n\n（图片有误，应该交换 $v,c$ 的权值。）\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\leq 3\\times 10^5$，$1\\leq v_i,c_i,m\\leq 10^9$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "虚人「无」", "background": "一点也不美丽的不死鸟。\n\n那双锐爪，沾染了无辜的鲜血。", "description": "给定二元序列 $\\{(v_i,c_i)\\}$ 和一棵以 $1$ 为根的有根树。第 $i$ 个点的点权是 $(v_i,c_i)$。\n\n- 定义一个非根节点的权值为其子树内的 $c$ 的积乘上其子树补的 $v$ 的积。\n- 定义一个根节点的权值为其子树内的 $c$ 的积。\n\n形式化的讲，若 $u$ 不为根节点，则 $u$ 的权值 $f_u$ 为：\n\n$$f_u=\\prod\\limits_{v\\in \\operatorname{substree}(u)} c_v\\times \\prod\\limits_{v\\notin \\operatorname{substree}(u)} v_v$$\n\n否则，其权值 $f_u$ 为：\n\n$$f_u=\\prod\\limits_{v=1}^n c_v$$\n\n试求整棵树**所有节点的权值之和**，答案对 $m$ 取模。请注意：**保证 $\\bm m$ 是质数**。\n\n\n", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n-1$ 行，每行两个数 $u,v$，表示 $u,v$ 之间有一条边。\n\n接下来一行 $n$ 个数，表示 $c_{1, 2, \\dots, n}$。\n\n接下来一行 $n$ 个数，表示 $v_{1, 2, \\dots, n}$。\n", "outputFormat": "输出一个数，表示答案对 $m$ 取模后的结果。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/olehwn2w.png)\n\n（图片有误，应该交换 $v,c$ 的权值。）\n\n### 数据范围及约定\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\leq 3\\times 10^5$，$1\\leq v_i,c_i,m\\leq 10^9$。\n", "locale": "zh-CN"}}}
{"pid": "P9209", "type": "P", "difficulty": 4, "samples": [["3\n18 20 22\n1 2 3\n1 4 3", "54"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "传智杯"], "title": "不灭「不死鸟之尾」", "background": "不死鸟之尾，一种量产型的羽毛。可用作药品。\n\n虽说是量产型，可是从哪里可以得到这种万能之药呢？", "description": "有一个包含 $n$ 个停车位的停车场，里面的停车位排成了一排，最左边和最右边都是墙壁。\n\n有 $n$ 辆车要按顺序依次停入这个停车场，在停入第 $i$ 辆车时，这辆车要停入的位置左右两边的空位越多，停进去需要的时间也就会越少，具体地，如果其左边连续的空位数量为 $l$，其右边连续的空位数量为 $r$，那么停入该辆车所需时间为 $W_i-L_i\\cdot l-R_i\\cdot r$，其中 $W_i,L_i,R_i$ 会给出（特别的，停车所需要的时间不会是负数，所以我们保证 $W_i\\ge L_i\\cdot n+R_i\\cdot n$）。\n\n对于连续空位的解释：例如，下图中箭头所指位置左边连续空位为 $1$，右边连续空位为 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s1zpjfnq.png)\n\n请依次确定每一辆车停入的位置，使得停入所有车所需时间最小。", "inputFormat": "输入第一行一个整数 $n$。\n\n接下来三行，每行 $n$ 个整数：第一行第 $i$ 个数给出 $W_i$，第二行第 $i$ 个数给出 $L_i$，第三行第 $i$ 个数给出 $R_i$。保证 $W_i\\ge L_i\\cdot n+R_i\\cdot n$，$L_i,R_i\\ge 0$。", "outputFormat": "输出一个数表示所需要的最少时间。", "hint": "#### 样例解释 1\n\n第 $1$ 辆车停入从左往右数第 $3$ 个停车位，此时该停车位左边有 $2$ 个连续空位，右边没有连续空位，所需时间 $18-1\\times 2-1\\times 0=16$。\n\n第 $2$ 辆车停入从左往右数第 $1$ 个停车位，此时该停车位左边没有连续空位，右边有 $1$ 个连续空位，所需时间 $20-2\\times 0-4\\times 1=16$。\n\n第 $3$ 辆车停入从左往右数第 $2$ 个停车位，此时该停车位左右都没有连续空位，所需时间 $22-3\\times 0-3\\times 0=22$。\n\n停入所有车需要时间 $16+16+22=54$。\n\n#### 数据范围\n\n对于所有数据，保证 $1\\le n\\le 10^5$，$0\\le L_i,R_i\\le 10^5$，$nL_i+nR_i\\le W_i\\le 2\\times 10^{10}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "不灭「不死鸟之尾」", "background": "不死鸟之尾，一种量产型的羽毛。可用作药品。\n\n虽说是量产型，可是从哪里可以得到这种万能之药呢？", "description": "有一个包含 $n$ 个停车位的停车场，里面的停车位排成了一排，最左边和最右边都是墙壁。\n\n有 $n$ 辆车要按顺序依次停入这个停车场，在停入第 $i$ 辆车时，这辆车要停入的位置左右两边的空位越多，停进去需要的时间也就会越少，具体地，如果其左边连续的空位数量为 $l$，其右边连续的空位数量为 $r$，那么停入该辆车所需时间为 $W_i-L_i\\cdot l-R_i\\cdot r$，其中 $W_i,L_i,R_i$ 会给出（特别的，停车所需要的时间不会是负数，所以我们保证 $W_i\\ge L_i\\cdot n+R_i\\cdot n$）。\n\n对于连续空位的解释：例如，下图中箭头所指位置左边连续空位为 $1$，右边连续空位为 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s1zpjfnq.png)\n\n请依次确定每一辆车停入的位置，使得停入所有车所需时间最小。", "inputFormat": "输入第一行一个整数 $n$。\n\n接下来三行，每行 $n$ 个整数：第一行第 $i$ 个数给出 $W_i$，第二行第 $i$ 个数给出 $L_i$，第三行第 $i$ 个数给出 $R_i$。保证 $W_i\\ge L_i\\cdot n+R_i\\cdot n$，$L_i,R_i\\ge 0$。", "outputFormat": "输出一个数表示所需要的最少时间。", "hint": "#### 样例解释 1\n\n第 $1$ 辆车停入从左往右数第 $3$ 个停车位，此时该停车位左边有 $2$ 个连续空位，右边没有连续空位，所需时间 $18-1\\times 2-1\\times 0=16$。\n\n第 $2$ 辆车停入从左往右数第 $1$ 个停车位，此时该停车位左边没有连续空位，右边有 $1$ 个连续空位，所需时间 $20-2\\times 0-4\\times 1=16$。\n\n第 $3$ 辆车停入从左往右数第 $2$ 个停车位，此时该停车位左右都没有连续空位，所需时间 $22-3\\times 0-3\\times 0=22$。\n\n停入所有车需要时间 $16+16+22=54$。\n\n#### 数据范围\n\n对于所有数据，保证 $1\\le n\\le 10^5$，$0\\le L_i,R_i\\le 10^5$，$nL_i+nR_i\\le W_i\\le 2\\times 10^{10}$。", "locale": "zh-CN"}}}
{"pid": "P9210", "type": "P", "difficulty": 5, "samples": [["10\n1 2\n2 3\n3 4\n3 5\n2 6\n6 7\n1 8\n8 9\n8 10", "9"], ["17\n1 2\n2 3\n3 4\n4 5\n4 6\n3 7\n7 8\n7 9\n7 10\n2 11\n2 12\n1 13\n13 14\n14 15\n14 16\n13 17", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["树形 DP", "传智杯", "单调栈"], "title": "蓬莱「凯风快晴　−富士火山−」", "background": "富士山，被当地人称为「神山」。这是一座休眠火山，最近一次喷发在 $300$ 年前。\n\n向这样的山中投入不死之药，想必会直接喷发吧。如此便理解为什么月岩笠最终抗命。", "description": "所谓的山，是一种上细下粗的结构。能不能在「树」里也找到这样的结构呢？\n\n给定一个以 $1$ 为根的大小为 $n$ 的有根树 $T$。你需要找到满足宽度单调不减的**导出子树**中最大的一棵：\n\n- 记该导出子树为 $T_0$，共有 $k$ 层。\n- 记 $T_0$ 的根节点的深度为 $1$，计算出 $T_0$ 中每个结点的深度 $d_i$。由此定义 $T_0$ 第 $i$ 层的宽度 $w_i$ 为「所有深度为 $i$ 的节点的个数」。\n- 你需要使得 $w_i$ 单调不减。即，$w_1\\le w_2\\le \\cdots \\le w_k$。\n\n记原树的点集和边集分别为 $V,E$。导出子树是原树的一个**连通块**，它的点集 $V_0\\subseteq V$，边集 $E_0$ 是 $E$ 当中所有端点均在 $V_0$ 内的边。导出子树的根，是组成它的所有节点中**在原树内深度最浅的那一个**。$T$ 也可以被认为是自身的一棵导出子树。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wcbeo1a0.png)\n\n如图所示，绿色的区域和橙色的区域分别是原树的导出子树。它们的根分别为 $2$ 和 $13$。\n\n**注意**：导出子树的定义略微不同于子树的定义。请不要将两者混淆。\n\n请找到最大的符合条件的导出子树的大小。", "inputFormat": "第一行一个正整数 $n$，表示整棵树的大小。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，描述树上的一条边。", "outputFormat": "输出共一行一个整数，表示最大的符合条件的导出子树的大小。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pzq47a3e.png)\n\n如图所示，标灰的节点是两个样例中选出来的导出子树。\n\n- 样例 $1$ 找到的导出子树，每一层的宽度分别为 $\\{1,2,3,3\\}$。\n- 样例 $2$ 找到的导出子树，每一层的宽度分别为 $\\{1,2,4,4,5\\}$。\n### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 5\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "蓬莱「凯风快晴　−富士火山−」", "background": "富士山，被当地人称为「神山」。这是一座休眠火山，最近一次喷发在 $300$ 年前。\n\n向这样的山中投入不死之药，想必会直接喷发吧。如此便理解为什么月岩笠最终抗命。", "description": "所谓的山，是一种上细下粗的结构。能不能在「树」里也找到这样的结构呢？\n\n给定一个以 $1$ 为根的大小为 $n$ 的有根树 $T$。你需要找到满足宽度单调不减的**导出子树**中最大的一棵：\n\n- 记该导出子树为 $T_0$，共有 $k$ 层。\n- 记 $T_0$ 的根节点的深度为 $1$，计算出 $T_0$ 中每个结点的深度 $d_i$。由此定义 $T_0$ 第 $i$ 层的宽度 $w_i$ 为「所有深度为 $i$ 的节点的个数」。\n- 你需要使得 $w_i$ 单调不减。即，$w_1\\le w_2\\le \\cdots \\le w_k$。\n\n记原树的点集和边集分别为 $V,E$。导出子树是原树的一个**连通块**，它的点集 $V_0\\subseteq V$，边集 $E_0$ 是 $E$ 当中所有端点均在 $V_0$ 内的边。导出子树的根，是组成它的所有节点中**在原树内深度最浅的那一个**。$T$ 也可以被认为是自身的一棵导出子树。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wcbeo1a0.png)\n\n如图所示，绿色的区域和橙色的区域分别是原树的导出子树。它们的根分别为 $2$ 和 $13$。\n\n**注意**：导出子树的定义略微不同于子树的定义。请不要将两者混淆。\n\n请找到最大的符合条件的导出子树的大小。", "inputFormat": "第一行一个正整数 $n$，表示整棵树的大小。\n\n接下来 $n-1$ 行，每行两个整数 $u,v$，描述树上的一条边。", "outputFormat": "输出共一行一个整数，表示最大的符合条件的导出子树的大小。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pzq47a3e.png)\n\n如图所示，标灰的节点是两个样例中选出来的导出子树。\n\n- 样例 $1$ 找到的导出子树，每一层的宽度分别为 $\\{1,2,3,3\\}$。\n- 样例 $2$ 找到的导出子树，每一层的宽度分别为 $\\{1,2,4,4,5\\}$。\n### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9211", "type": "P", "difficulty": 6, "samples": [["25 8 5 10\naaacdaabbbaabccaabcdaabcd\n", "5\naaacd"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["字符串", "Special Judge", "随机化", "传智杯"], "title": "「不死鸟附体」", "background": "死而复生，生而复死。所谓的不死鸟就是这样的一种生物，在无尽的时间里无尽地循环往复。\n\n果然最好还是别获得不老不死的能力吧。", "description": "不死鸟的「一生」可以被看成一个长度不超过 $l_{\\max}$ 的字符串 $S_0$。在无尽的轮回后形成了一个无限长的字符串 $S_{\\mathrm{inf}}=S_0+S_0+S_0+\\cdots$。现在截取 $S_{\\mathrm{inf}}$ 前 $l$ 个字符，作为可观测时间里不死鸟的生命 $S_{\\mathrm{fin}}$。\n\n然而所谓的轮回并不是机械死板的循环往复。因此，$S_\\mathrm{fin}$ 当中会有**不超过 $n$ 个字符**被修改成了别的字符，变成了 $S_{\\mathrm{real}}$。\n\n现在观测到了 $S_{\\mathrm{real}}$，我们希望找到这轮回的周期 $S_0$。然而由于不死鸟的轮回太过漫长，我们只希望找到这样一个 $S_0'$，使得由它生成的 $S_\\mathrm{fin}'$ 修改**不超过 $m$ 个字符**后就可以变成 $S_{\\mathrm{real}}$。\n", "inputFormat": "第一行有四个正整数 $l,l_{\\max},n,m$。\n\n第二行描述观测到的长度为 $l$ 的字符串 $S_{\\mathrm{real}}$。", "outputFormat": "第一行输出一个正整数 $l_0$，表示你所找到的 $S_0$ 的长度。你应当保证 $1\\le l_0\\le l_{\\max}$。\n\n第二行输出一个长度为 $l_0$ 的字符串 $S_0$，表示你所找到的字符串。", "hint": "### 样例解释\n\n样例仅供理解题意，**不符合数据范围的约束**。具体约束请参见「数据范围及约定」。\n\n生成 $S_{\\mathrm{real}}$ 所用的 $S_0=\\verb!aabcd!$。\n\n- 由此生成 $S_{\\mathrm{inf}}=\\verb!aabcdaabcdaabcdaabcdaabcd!\\cdots$；\n- 由此生成 $S_{\\mathrm{fin}}=\\verb!aabcdaabcdaabcdaabcdaabcd!$；\n- 由此生成 $S_{\\mathrm{real}\\kern{-2.5pt}}=\\verb!aaacdaabbbaabccaabcdaabcd!$。\n\n样例输出给出了一个可能的 $S_0'=\\verb!aaacd!$。由此计算出 $S_{\\mathrm{fin}}'$ 与 $S_{\\mathrm{real}}$ 的差距：\n\n$$\\begin{aligned}\nS_{\\mathrm{fin}}'=&\\texttt{aaacdaa\\textcolor{red}a\\textcolor{red}c\\textcolor{red}daa\\textcolor{red}ac\\textcolor{red}daa\\textcolor{red}acdaa\\textcolor{red}acd}\\cr\nS_{\\mathrm{real}}=&\\texttt{aaacdaabbbaabccaabcdaabcd}\\cr\n\\end{aligned}$$\n\n相差为 $7$，不超过 $m=10$，可以被接受。\n\n### 数据范围及约定\n\n对于全部数据，保证 $l=3\\times 10^5$，$n=3\\times 10^3$，$m=10^4$，$1\\le l_{\\max} \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「不死鸟附体」", "background": "死而复生，生而复死。所谓的不死鸟就是这样的一种生物，在无尽的时间里无尽地循环往复。\n\n果然最好还是别获得不老不死的能力吧。", "description": "不死鸟的「一生」可以被看成一个长度不超过 $l_{\\max}$ 的字符串 $S_0$。在无尽的轮回后形成了一个无限长的字符串 $S_{\\mathrm{inf}}=S_0+S_0+S_0+\\cdots$。现在截取 $S_{\\mathrm{inf}}$ 前 $l$ 个字符，作为可观测时间里不死鸟的生命 $S_{\\mathrm{fin}}$。\n\n然而所谓的轮回并不是机械死板的循环往复。因此，$S_\\mathrm{fin}$ 当中会有**不超过 $n$ 个字符**被修改成了别的字符，变成了 $S_{\\mathrm{real}}$。\n\n现在观测到了 $S_{\\mathrm{real}}$，我们希望找到这轮回的周期 $S_0$。然而由于不死鸟的轮回太过漫长，我们只希望找到这样一个 $S_0'$，使得由它生成的 $S_\\mathrm{fin}'$ 修改**不超过 $m$ 个字符**后就可以变成 $S_{\\mathrm{real}}$。\n", "inputFormat": "第一行有四个正整数 $l,l_{\\max},n,m$。\n\n第二行描述观测到的长度为 $l$ 的字符串 $S_{\\mathrm{real}}$。", "outputFormat": "第一行输出一个正整数 $l_0$，表示你所找到的 $S_0$ 的长度。你应当保证 $1\\le l_0\\le l_{\\max}$。\n\n第二行输出一个长度为 $l_0$ 的字符串 $S_0$，表示你所找到的字符串。", "hint": "### 样例解释\n\n样例仅供理解题意，**不符合数据范围的约束**。具体约束请参见「数据范围及约定」。\n\n生成 $S_{\\mathrm{real}}$ 所用的 $S_0=\\verb!aabcd!$。\n\n- 由此生成 $S_{\\mathrm{inf}}=\\verb!aabcdaabcdaabcdaabcdaabcd!\\cdots$；\n- 由此生成 $S_{\\mathrm{fin}}=\\verb!aabcdaabcdaabcdaabcdaabcd!$；\n- 由此生成 $S_{\\mathrm{real}\\kern{-2.5pt}}=\\verb!aaacdaabbbaabccaabcdaabcd!$。\n\n样例输出给出了一个可能的 $S_0'=\\verb!aaacd!$。由此计算出 $S_{\\mathrm{fin}}'$ 与 $S_{\\mathrm{real}}$ 的差距：\n\n$$\\begin{aligned}\nS_{\\mathrm{fin}}'=&\\texttt{aaacdaa\\textcolor{red}a\\textcolor{red}c\\textcolor{red}daa\\textcolor{red}ac\\textcolor{red}daa\\textcolor{red}acdaa\\textcolor{red}acd}\\cr\nS_{\\mathrm{real}}=&\\texttt{aaacdaabbbaabccaabcdaabcd}\\cr\n\\end{aligned}$$\n\n相差为 $7$，不超过 $m=10$，可以被接受。\n\n### 数据范围及约定\n\n对于全部数据，保证 $l=3\\times 10^5$，$n=3\\times 10^3$，$m=10^4$，$1\\le l_{\\max} \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9212", "type": "P", "difficulty": 6, "samples": [["10 5\n4 3 2 5 8 5 3 3 1 2\n1 10 3 7 6\n4 10 5 5 4\n2 7 1 2 9\n5 9 3 4 7\n1 3 5 1 8", "4\n0\n6\n3\n2\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "分块", "根号分治", "传智杯"], "title": "「蓬莱人形」", "background": "不老不死的妹红，还能称之为「人类」吗？\n\n超脱了生死的人类，本来就是不可思议的啊。", "description": "为了证明人类的可能性，你需要解决一个问题。\n\n给定序列 $a=[a_1,a_2,\\cdots,a_n]$。现在有 $q$ 次询问：\n\n- 每次给定二元组 $(x,y)$、模数 $m$，以及一个区间 $[l,r]$。求出有多少 $i\\in [l,r]$ 满足 $(a_i+x)\\bmod m<(a_i+y)\\bmod m$。", "inputFormat": "第一行有两个正整数 $n, q$，表示序列长度及询问次数。\n\n第二行有 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$，描述序列 $a$。\n\n接下来 $q$ 行，每行有五个整数 $l_i,r_i,x_i,y_i,m_i$，描述一组询问。", "outputFormat": "输出共 $q$ 行。第 $i$ 行输出第 $i$ 次询问的结果。", "hint": "### 样例解释\n\n- 对于第一组询问，符合条件的元素的下标为 $1, 2, 7, 8$；\n- 对于第二组询问，没有符合条件的元素；\n- 对于第三组询问，符合条件的元素的下标为 $2, 3, 4, 5, 6, 7$；\n- 对于第四组询问，符合条件的元素的下标为 $5, 6, 9$；\n- 对于第五组询问，符合条件的元素的下标为 $1, 2$。\n\n### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 10^5$，$1\\le q\\le 5\\times 10^5$，$1\\le a_i,x_i,y_i,m_i\\le 10^5$，$1\\le l_i\\le r_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「蓬莱人形」", "background": "不老不死的妹红，还能称之为「人类」吗？\n\n超脱了生死的人类，本来就是不可思议的啊。", "description": "为了证明人类的可能性，你需要解决一个问题。\n\n给定序列 $a=[a_1,a_2,\\cdots,a_n]$。现在有 $q$ 次询问：\n\n- 每次给定二元组 $(x,y)$、模数 $m$，以及一个区间 $[l,r]$。求出有多少 $i\\in [l,r]$ 满足 $(a_i+x)\\bmod m<(a_i+y)\\bmod m$。", "inputFormat": "第一行有两个正整数 $n, q$，表示序列长度及询问次数。\n\n第二行有 $n$ 个正整数 $a_1,a_2,\\cdots,a_n$，描述序列 $a$。\n\n接下来 $q$ 行，每行有五个整数 $l_i,r_i,x_i,y_i,m_i$，描述一组询问。", "outputFormat": "输出共 $q$ 行。第 $i$ 行输出第 $i$ 次询问的结果。", "hint": "### 样例解释\n\n- 对于第一组询问，符合条件的元素的下标为 $1, 2, 7, 8$；\n- 对于第二组询问，没有符合条件的元素；\n- 对于第三组询问，符合条件的元素的下标为 $2, 3, 4, 5, 6, 7$；\n- 对于第四组询问，符合条件的元素的下标为 $5, 6, 9$；\n- 对于第五组询问，符合条件的元素的下标为 $1, 2$。\n\n### 数据范围及约定\n\n对于全部数据，$1\\le n\\le 10^5$，$1\\le q\\le 5\\times 10^5$，$1\\le a_i,x_i,y_i,m_i\\le 10^5$，$1\\le l_i\\le r_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9213", "type": "P", "difficulty": 2, "samples": [["1\n8 2 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "O2优化", "语言月赛"], "title": "[入门赛 #11] 移植柳树 (Hard Version)", "background": "**本题与 Easy Version 题意完全相同，不同的地方仅在于数据范围和单个测试点内含有的测试组数量。**\n\nHG 在上学的路上无聊的走着，看着这马路边的一排柳树，他的脑子里突然冒出了个奇怪的问题……", "description": "假设总共有 $n$ 棵柳树，每一棵间隔都为 $x$。\n\n现在他需要对这些树做一些操作，使得在「这 $n$ 棵树的起点不变」的同时，任意两棵树的间隔都为 $y$（$y > x$）。\n\n他被允许做的操作如下；\n\n\n- 移植树木：将一个位置的树木移到另一个位置上。\n\n如果对「起点不变」这个概念有疑惑，可以参照「样例解释」中的图例。\n\n显然操作是需要体力的，HG 想要让尽可能多的树维持原状。现在 HG 想知道，为了达成「任意两棵树的间隔都为 $y$」这个目标，他最多可以让多少棵树保持在原来的位置。\n\n请你帮帮他吧！", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n输入共 $T + 1$ 行。\n\n第一行为一个整数 $T$，代表测试数据组数。  \n接下来 $T$ 行，每行三个整数 $n, x, y$，依次表示柳树的数量，未调整前每棵的间隔，想要达成的每棵的间隔。", "outputFormat": "输出共 $T$ 行，每行一个整数，表示对于对应的输入数据，为了达成「任意两棵树的间隔都为 $y$」的目标， HG 最多可以让多少棵树保持在原来的位置。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6uguqush.png)\n\n图中的方块代表树。第一行为调整前，第二行为调整后的情况。标出的三个绿色的方块是不需要移动的树，除此之外其他树都需要移动。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq T \\leq 10 ^ 5$，$1 \\leq n \\leq 10 ^ {18}$，$1 \\leq x < y \\leq 10 ^ 9$。  ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #11] 移植柳树 (Hard Version)", "background": "**本题与 Easy Version 题意完全相同，不同的地方仅在于数据范围和单个测试点内含有的测试组数量。**\n\nHG 在上学的路上无聊的走着，看着这马路边的一排柳树，他的脑子里突然冒出了个奇怪的问题……", "description": "假设总共有 $n$ 棵柳树，每一棵间隔都为 $x$。\n\n现在他需要对这些树做一些操作，使得在「这 $n$ 棵树的起点不变」的同时，任意两棵树的间隔都为 $y$（$y > x$）。\n\n他被允许做的操作如下；\n\n\n- 移植树木：将一个位置的树木移到另一个位置上。\n\n如果对「起点不变」这个概念有疑惑，可以参照「样例解释」中的图例。\n\n显然操作是需要体力的，HG 想要让尽可能多的树维持原状。现在 HG 想知道，为了达成「任意两棵树的间隔都为 $y$」这个目标，他最多可以让多少棵树保持在原来的位置。\n\n请你帮帮他吧！", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n输入共 $T + 1$ 行。\n\n第一行为一个整数 $T$，代表测试数据组数。  \n接下来 $T$ 行，每行三个整数 $n, x, y$，依次表示柳树的数量，未调整前每棵的间隔，想要达成的每棵的间隔。", "outputFormat": "输出共 $T$ 行，每行一个整数，表示对于对应的输入数据，为了达成「任意两棵树的间隔都为 $y$」的目标， HG 最多可以让多少棵树保持在原来的位置。", "hint": "### 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6uguqush.png)\n\n图中的方块代表树。第一行为调整前，第二行为调整后的情况。标出的三个绿色的方块是不需要移动的树，除此之外其他树都需要移动。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq T \\leq 10 ^ 5$，$1 \\leq n \\leq 10 ^ {18}$，$1 \\leq x < y \\leq 10 ^ 9$。  ", "locale": "zh-CN"}}}
{"pid": "P9214", "type": "P", "difficulty": 2, "samples": [["5 10\n13 50 90 38 60 64 60 77 6 24", "1 6\n2 8\n3\n4 7\n5 9 10"], ["12 7\n85 99 82 90 14 11 15", "1\n2\n3\n4\n5\n6\n7\n0\n0\n0\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "O2优化", "语言月赛"], "title": "[入门赛 #11] 洛谷评测机模拟器 (Hard Version)", "background": "**本题与 Easy Version 题意完全相同，不同的地方在于数据范围。**\n\n现在假装你是洛谷评测机。这一天，洛谷同时进行了 PION 自测、SCP 自测、ION 自测等等比赛。成千上万的评测落到了你的身上！", "description": "现在已经知道你有 $n$ 个相同性能的评测节点，它们被分别标号为 $1, 2, \\cdots, n$。一个评测节点在同一时间只能处理一个评测任务。\n\n在某一时刻，$m$ 个评测任务同时涌入了你。我们将这些任务分别标号为 $1, 2, \\cdots, m$。这些评测任务需要的评测时间分别为 $t _ 1 , t _ 2, \\cdots, t _ m$。每个评测任务**需要且仅需要一个**评测节点来运行，因此你会按照如下方式按照 $1 \\sim m$ 的顺序依次将这些评测任务分配到评测节点上：\n\n对于某个耗时 $t _ i$ 的评测任务，你需要找到目前**累积评测时间**最小的评测节点将任务放入。如果有多个评测节点**累积评测时间**相同且最小，则找一个**标号最小**的节点将任务放入。\n\n> 「累积评测时间」定义：假设对于某个评测节点，其被分配了 $a _ 1, a _ 2, \\cdots, a _ k$ 共 $k$ 个任务。那么这个评测节点的「累积评测时间」就是 $t _ {a _ 1} + t _ {a _ 2} + \\cdots + t _ {a _ k}$。显然的，如果某个评测节点从未被分配过这 $m$ 个任务中的任何一个，那么这个评测节点的「累积评测时间」是 $0$。\n\n现在，你需要统计出，你的这 $n$ 个评测节点分别接受了哪一些评测任务。", "inputFormat": "输入共两行。\n\n第一行为两个整数 $n, m$，代表评测节点数量和评测任务数量。  \n第二行为 $m$ 个整数 $t _ 1, t _ 2, \\cdots, t _ m$，依次代表这 $m$ 个评测任务的所需时间。", "outputFormat": "输出共 $n$ 行，每行若干个整数，两两之间以一个空格隔开。\n\n对于第 $i$ 行，输出第 $i$ 个评测节点接受的评测任务编号从小到大排序后的结果。如果第 $i$ 个评测节点没有被分配任务，那么输出一行一个 $0$。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 5 \\times 10 ^ 5$，$0 \\leq t _ i \\leq 10 ^ 9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #11] 洛谷评测机模拟器 (Hard Version)", "background": "**本题与 Easy Version 题意完全相同，不同的地方在于数据范围。**\n\n现在假装你是洛谷评测机。这一天，洛谷同时进行了 PION 自测、SCP 自测、ION 自测等等比赛。成千上万的评测落到了你的身上！", "description": "现在已经知道你有 $n$ 个相同性能的评测节点，它们被分别标号为 $1, 2, \\cdots, n$。一个评测节点在同一时间只能处理一个评测任务。\n\n在某一时刻，$m$ 个评测任务同时涌入了你。我们将这些任务分别标号为 $1, 2, \\cdots, m$。这些评测任务需要的评测时间分别为 $t _ 1 , t _ 2, \\cdots, t _ m$。每个评测任务**需要且仅需要一个**评测节点来运行，因此你会按照如下方式按照 $1 \\sim m$ 的顺序依次将这些评测任务分配到评测节点上：\n\n对于某个耗时 $t _ i$ 的评测任务，你需要找到目前**累积评测时间**最小的评测节点将任务放入。如果有多个评测节点**累积评测时间**相同且最小，则找一个**标号最小**的节点将任务放入。\n\n> 「累积评测时间」定义：假设对于某个评测节点，其被分配了 $a _ 1, a _ 2, \\cdots, a _ k$ 共 $k$ 个任务。那么这个评测节点的「累积评测时间」就是 $t _ {a _ 1} + t _ {a _ 2} + \\cdots + t _ {a _ k}$。显然的，如果某个评测节点从未被分配过这 $m$ 个任务中的任何一个，那么这个评测节点的「累积评测时间」是 $0$。\n\n现在，你需要统计出，你的这 $n$ 个评测节点分别接受了哪一些评测任务。", "inputFormat": "输入共两行。\n\n第一行为两个整数 $n, m$，代表评测节点数量和评测任务数量。  \n第二行为 $m$ 个整数 $t _ 1, t _ 2, \\cdots, t _ m$，依次代表这 $m$ 个评测任务的所需时间。", "outputFormat": "输出共 $n$ 行，每行若干个整数，两两之间以一个空格隔开。\n\n对于第 $i$ 行，输出第 $i$ 个评测节点接受的评测任务编号从小到大排序后的结果。如果第 $i$ 个评测节点没有被分配任务，那么输出一行一个 $0$。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n, m \\leq 5 \\times 10 ^ 5$，$0 \\leq t _ i \\leq 10 ^ 9$。", "locale": "zh-CN"}}}
{"pid": "P9215", "type": "P", "difficulty": 4, "samples": [["5\n1\n1\n14\n1\n514\n2\n1234\n1\n123456\n6", "9\n8\n516\n7\n877777"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "O2优化", "构造", "语言月赛"], "title": "[入门赛 #11] [yLOI2021] 扶苏与 1 (Hard Version)", "background": "**本题与 Easy Version 的区别是：$x$ 的范围不同，$y$ 的长度限制不同**。\n\n**请注意 Easy Version 和 Hard Version 不是严格的包含关系。**\n\n扶苏在 ICPC2022 EC Final 的比赛里，开局不到五分钟，就读假了一道题，把一道数位 DP 开成了简单签到，狠狠地演了队友一把。\n\n为了不让读假了的题被浪费，所以这道题出现在了这里。", "description": "扶苏给了你一个数字 $x$，你需要给她一个数字 $y$，使得在列竖式计算 $x + y$ 时，能恰好产生 $k$ 个进位。\n\n**你给出的 $y$ 的长度不能超过 $x$ 的长度。**（注意，这条要求与 Easy Version 不同）\n\n**进位**的含义是：在进行竖式加法运算时，如果位于同一列上的数字之和（加上低位向上可能存在的进位）比 $9$ 大，则在结果的这一列上只保留这个和的个位数字，同时称这一位向它的高位产生了一个**进位**。\n\n下图是一个竖式加法的例子，结果中标红的两位都向上产生了进位。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sxkzrk4i.png)", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n第一行为一个整数 $T$，代表测试数据组数。  \n接下来 $T$ 组数据，每组数据只有两行，每行一个整数。  \n第一行的整数表示 $x$。  \n第二行的整数表示 $k$。", "outputFormat": "**本题采用 special judge 进行判题**。\n\n对每组数据，输出一行一个整数，表示你给出的 $y$。\n\n如果有多个满足要求的 $y$，你可以输出任何一个。但是必须保证如下三条限制：\n- $y$ 是正整数。\n- $y$ 不含前导 $0$。\n- $y$ 的长度不超过 $x$ 的长度。\n\n特别的，如果这样的 $y$ 不存在，请你输出一行一个 $\\texttt{-1}$。", "hint": "### 数据规模与约定\n\n对全部的测试点，保证 $0 \\leq x < 10^{(10^4)}$，$1 \\leq T \\leq 5000$，$1 \\leq k \\leq 1+\\log_{10}\\max(1,x)$。输入的 $x$ 不含前导 $0$。\n\n### 提示\n\n输入的 $x$ 可能会很大。如果说 $x < 10^t$，则输入 $x$ 的**长度**不会超过 $t$。数据规模中式子 $k \\leq 1 + \\log_{10}\\max(1,x) $ 的含义是：$k$ 不会超过 $x$ 的长度。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #11] [yLOI2021] 扶苏与 1 (Hard Version)", "background": "**本题与 Easy Version 的区别是：$x$ 的范围不同，$y$ 的长度限制不同**。\n\n**请注意 Easy Version 和 Hard Version 不是严格的包含关系。**\n\n扶苏在 ICPC2022 EC Final 的比赛里，开局不到五分钟，就读假了一道题，把一道数位 DP 开成了简单签到，狠狠地演了队友一把。\n\n为了不让读假了的题被浪费，所以这道题出现在了这里。", "description": "扶苏给了你一个数字 $x$，你需要给她一个数字 $y$，使得在列竖式计算 $x + y$ 时，能恰好产生 $k$ 个进位。\n\n**你给出的 $y$ 的长度不能超过 $x$ 的长度。**（注意，这条要求与 Easy Version 不同）\n\n**进位**的含义是：在进行竖式加法运算时，如果位于同一列上的数字之和（加上低位向上可能存在的进位）比 $9$ 大，则在结果的这一列上只保留这个和的个位数字，同时称这一位向它的高位产生了一个**进位**。\n\n下图是一个竖式加法的例子，结果中标红的两位都向上产生了进位。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sxkzrk4i.png)", "inputFormat": "**本题单测试点内有多组测试数据**。\n\n第一行为一个整数 $T$，代表测试数据组数。  \n接下来 $T$ 组数据，每组数据只有两行，每行一个整数。  \n第一行的整数表示 $x$。  \n第二行的整数表示 $k$。", "outputFormat": "**本题采用 special judge 进行判题**。\n\n对每组数据，输出一行一个整数，表示你给出的 $y$。\n\n如果有多个满足要求的 $y$，你可以输出任何一个。但是必须保证如下三条限制：\n- $y$ 是正整数。\n- $y$ 不含前导 $0$。\n- $y$ 的长度不超过 $x$ 的长度。\n\n特别的，如果这样的 $y$ 不存在，请你输出一行一个 $\\texttt{-1}$。", "hint": "### 数据规模与约定\n\n对全部的测试点，保证 $0 \\leq x < 10^{(10^4)}$，$1 \\leq T \\leq 5000$，$1 \\leq k \\leq 1+\\log_{10}\\max(1,x)$。输入的 $x$ 不含前导 $0$。\n\n### 提示\n\n输入的 $x$ 可能会很大。如果说 $x < 10^t$，则输入 $x$ 的**长度**不会超过 $t$。数据规模中式子 $k \\leq 1 + \\log_{10}\\max(1,x) $ 的含义是：$k$ 不会超过 $x$ 的长度。", "locale": "zh-CN"}}}
{"pid": "P9216", "type": "P", "difficulty": 4, "samples": [["4 5\n2 1 2\n2 3 4\n4 1 2 3 4\n4 1 2 3 3\n1 1 2\n2 2 3\n2 3 4\n2 2 4\n2 3 2", "7"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "O2优化", "语言月赛"], "title": "[入门赛 #11] 写大作业 (Hard Version)", "background": "**本题与 Easy Version 的区别在于：输入的是数列而不是字符串，输入输出格式不同，数据规模不同**。\n", "description": "扶苏为了写计算理论大作业已经 $36$ 小时没有合眼了。\n\n为了能快点睡觉，扶苏找到了 $n$ 份文献，第 $i$ 份文献是一数列 $a_i$，她打算把这些文献组合起来。\n\n具体来说，一共有两种操作：\n\n- `1 x y`：把文献 $a_x$ 整体拼接到 $a_y$ 的后面，然后删除 $a_x$。\n- `2 x y`：查询 $a_x$ 和 $a_y$ 是否**相似**。\n\n我们保证在 `1 x y` 操作出现后，数列 $a_x$ **不会**出现在接下来的任何操作中。这就是说，操作 $1$ 至多有 $n-1$ 次。\n\n**相似**的定义是：对两个数列 $a_x$ 和 $a_y$，如果存在一种重新排列 $a_x$ 的方法，使得重排后的 $a_x$ 和 $a_y$ 相等，则称 $a_x$ 和 $a_y$ **相似**。\n\n例如，假设 $a_1 = 1,2$, $a_2 = 3,4$，$a_3 = 1,2,3,4$，则执行 `1 1 2` 后，$a_1$ 被删除，$a_2 = 3,4,1,2$，$s_3 = 1,2,3,4$；继续执行 `2 2 3` 后，因为可以把 $a_2$ 重排为 $1,2,3,4$，所以 $a_2$ 和 $a_3$ 相似。\n\n注意，操作 $2$ 不会对数列做出实际修改。", "inputFormat": "第一行是两个整数，分别表示文献的数量 $n$ 和操作的数量 $q$。  \n接下来 $n$ 行，每行描述一个数列。第 $i$ 行描述 $a_i$：   \n每行第一个数是 $m_i$，表示数列 $a_i$ 的长度，接下来有 $m_i$ 个数，描述数列 $a_i$。  \n接下来 $q$ 行，每行三个整数 $op, x, y$，其含义见『题目描述』。", "outputFormat": "为了避免输出过大，请你输出一行一个整数，表示所有答案为**两数列相似**的询问的**操作编号**的按位异或和。\n\n操作的编号从 $1$ 开始，两种操作均会令编号增加 $1$。你可以参考样例解释来理解输出格式。", "hint": "### 样例解释\n\n共有五次操作，它们的编号和回答情况如下：\n| 编号 | 操作 | 回答 |\n| :-: | :-: | :-: |\n| $1$ | `1 1 2` | 不是查询操作|\n| $2$ | `2 2 3` | 相似 |\n| $3$ | `2 3 4` | 不相似 |\n| $4$ | `2 2 4` | 不相似 |\n| $5$ | `2 2 3` | 相似 |\n\n可以看到，回答为**两数列相似**的询问的操作编号为 $2$ 和 $5$。它们的按位异或和是 $7$。故输出为 $7$。\n\n### 数据规模与约定\n\n对全部的测试点，保证 $1 \\leq n \\leq 10^5$，$1 \\leq q \\leq 5 \\times 10^6$，$1 \\leq m_i \\leq 10^5$，$\\sum_{i = 1}^n m_i \\leq 5 \\times 10^5$。数列里的元素都是不超过 $10^9$ 的非负整数。\n\n数据保证数列元素的生成方式是：对一个数列，限定一个该数列元素大小的上界 $k$，然后在 $[0, k]$ 内均匀随机地生成 $m_i$ 个整数作为数列 $a_i$。注意，$k$ 不一定是 $10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #11] 写大作业 (Hard Version)", "background": "**本题与 Easy Version 的区别在于：输入的是数列而不是字符串，输入输出格式不同，数据规模不同**。\n", "description": "扶苏为了写计算理论大作业已经 $36$ 小时没有合眼了。\n\n为了能快点睡觉，扶苏找到了 $n$ 份文献，第 $i$ 份文献是一数列 $a_i$，她打算把这些文献组合起来。\n\n具体来说，一共有两种操作：\n\n- `1 x y`：把文献 $a_x$ 整体拼接到 $a_y$ 的后面，然后删除 $a_x$。\n- `2 x y`：查询 $a_x$ 和 $a_y$ 是否**相似**。\n\n我们保证在 `1 x y` 操作出现后，数列 $a_x$ **不会**出现在接下来的任何操作中。这就是说，操作 $1$ 至多有 $n-1$ 次。\n\n**相似**的定义是：对两个数列 $a_x$ 和 $a_y$，如果存在一种重新排列 $a_x$ 的方法，使得重排后的 $a_x$ 和 $a_y$ 相等，则称 $a_x$ 和 $a_y$ **相似**。\n\n例如，假设 $a_1 = 1,2$, $a_2 = 3,4$，$a_3 = 1,2,3,4$，则执行 `1 1 2` 后，$a_1$ 被删除，$a_2 = 3,4,1,2$，$s_3 = 1,2,3,4$；继续执行 `2 2 3` 后，因为可以把 $a_2$ 重排为 $1,2,3,4$，所以 $a_2$ 和 $a_3$ 相似。\n\n注意，操作 $2$ 不会对数列做出实际修改。", "inputFormat": "第一行是两个整数，分别表示文献的数量 $n$ 和操作的数量 $q$。  \n接下来 $n$ 行，每行描述一个数列。第 $i$ 行描述 $a_i$：   \n每行第一个数是 $m_i$，表示数列 $a_i$ 的长度，接下来有 $m_i$ 个数，描述数列 $a_i$。  \n接下来 $q$ 行，每行三个整数 $op, x, y$，其含义见『题目描述』。", "outputFormat": "为了避免输出过大，请你输出一行一个整数，表示所有答案为**两数列相似**的询问的**操作编号**的按位异或和。\n\n操作的编号从 $1$ 开始，两种操作均会令编号增加 $1$。你可以参考样例解释来理解输出格式。", "hint": "### 样例解释\n\n共有五次操作，它们的编号和回答情况如下：\n| 编号 | 操作 | 回答 |\n| :-: | :-: | :-: |\n| $1$ | `1 1 2` | 不是查询操作|\n| $2$ | `2 2 3` | 相似 |\n| $3$ | `2 3 4` | 不相似 |\n| $4$ | `2 2 4` | 不相似 |\n| $5$ | `2 2 3` | 相似 |\n\n可以看到，回答为**两数列相似**的询问的操作编号为 $2$ 和 $5$。它们的按位异或和是 $7$。故输出为 $7$。\n\n### 数据规模与约定\n\n对全部的测试点，保证 $1 \\leq n \\leq 10^5$，$1 \\leq q \\leq 5 \\times 10^6$，$1 \\leq m_i \\leq 10^5$，$\\sum_{i = 1}^n m_i \\leq 5 \\times 10^5$。数列里的元素都是不超过 $10^9$ 的非负整数。\n\n数据保证数列元素的生成方式是：对一个数列，限定一个该数列元素大小的上界 $k$，然后在 $[0, k]$ 内均匀随机地生成 $m_i$ 个整数作为数列 $a_i$。注意，$k$ 不一定是 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P9217", "type": "P", "difficulty": 3, "samples": [["3 1 3 2\n1 2 3", "1\n3.888889"], ["3 1 3 2\n1 2 3", "2\n554580200"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "排序", "期望"], "title": "「TAOI-1」拼凑的断音", "background": "> flick tap flick tap 面を滑って \\\n> swipe tap swipe tap 「A.R→T」\\\n> flick tap flick tap 開いて叩いて \\\n> swipe swipe swipe swipe …もう嫌だな \\\n> ズルズル 糸が呟く", "description": "你的面前有 $n$ 个音符，它们的动听程度由数列 $\\{a_n\\}$ 描述。\n\n现在有 $n$ 种魔法，第 $i$ 种魔法会让 $a_i$ 增加 $s(s \\gt 0)$。每种魔法的成功几率都为 $\\dfrac{p}{q}$，并且彼此独立。\n\n求在施加魔法情况下，最终最动听的音符的动听程度（即，$\\max\\limits_{i=1}^n a_i$）的期望。\n\n**本题目有 Special Judge，你可以用两种不同的方式输出答案，具体见【输出格式】处**。", "inputFormat": "第一行为四个整数 $n, p, q, s$。\n\n第二行为 $n$ 个整数 $a_i$，由空格隔开。", "outputFormat": "**本题有两种不同的输出格式**。\n\n- 第一种输出格式：\n\n  请在第一行输出 `1`。\n  \n  接着，在第二行输出所求的期望，它应当是一个实数。\n  \n  如果您的答案与标准答案相差不超过 $10^{-4}$，则判定为正确。但由于众所周知的浮点数的误差，不保证评测结果百分百准确。如果您确信自己的程序正确但无法 AC，可以尝试使用第二种输出方式。\n\n- 第二种输出格式：\n  \n  请在第一行输出 `2`。\n  \n  接下来，若你求出的期望是 $\\dfrac{m}{n}$（显然期望为一个有理数），则请在第二行输出它对 $998244353$ 取模的结果，即一个 $[0, 998244353)$ 的整数 $x$，使得 $xn \\equiv m \\pmod {998244353}$。", "hint": "### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20 points）：$n \\leq 15$。\n- Subtask 2（15 points）：保证 $\\forall i \\in [1, n), a_i \\leq a_{i+1}$，$a_n \\geq a_{n-1}+s$。\n- Subtask 3（15 points）：保证 $\\forall i,j\\in[1,n], a_i = a_j$。\n- Subtask 4（50 points）：无特殊限制。\n\n对于所有测试数据，$1 \\leq n \\leq 10^5$，$1 \\leq p \\lt q \\leq 10^7$，$1 \\leq a_i,s \\leq 10^7$。\n\n### 样例解释\n\n注意到两个样例的输入相同，区别仅在于输出格式不同。\n\n以下列举了所有可能的魔法施加情况和其对应的最大值以及出现概率：\n\n| 魔法情况 | 动听度最大值 | 出现概率 | 对期望的贡献 |\n| :------: | :----------: | :------: | :----------: |\n|${\\color{black}1},{\\color{black}2},{\\color{black}3}$|$3$|$\\dfrac{8}{27}$|$\\dfrac{8}{9}$|\n|${\\color{red}3},{\\color{black}2},{\\color{black}3}$|$3$|$\\dfrac{4}{27}$|$\\dfrac{4}{9}$|\n|${\\color{black}1},{\\color{red}4},{\\color{black}3}$|$4$|$\\dfrac{4}{27}$|$\\dfrac{16}{27}$|\n|${\\color{black}1},{\\color{black}2},{\\color{red}5}$|$5$|$\\dfrac{4}{27}$|$\\dfrac{20}{27}$|\n|${\\color{red}3},{\\color{red}4},{\\color{black}3}$|$4$|$\\dfrac{2}{27}$|$\\dfrac{8}{27}$|\n|${\\color{red}3},{\\color{black}2},{\\color{red}5}$|$5$|$\\dfrac{2}{27}$|$\\dfrac{10}{27}$|\n|${\\color{black}1},{\\color{red}4},{\\color{red}5}$|$5$|$\\dfrac{2}{27}$|$\\dfrac{10}{27}$|\n|${\\color{red}3},{\\color{red}4},{\\color{red}5}$|$5$|$\\dfrac{1}{27}$|$\\dfrac{5}{27}$|\n\n可得，最终的答案为 $\\dfrac{35}{9}$。\n\n+ 若使用第一种输出方式，它的值约为 $3.888889$。\n+ 若使用第二种输出方式，可以发现 $554580200 \\times 9 \\equiv 35 \\pmod {998244353}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TAOI-1」拼凑的断音", "background": "> flick tap flick tap 面を滑って \\\n> swipe tap swipe tap 「A.R→T」\\\n> flick tap flick tap 開いて叩いて \\\n> swipe swipe swipe swipe …もう嫌だな \\\n> ズルズル 糸が呟く", "description": "你的面前有 $n$ 个音符，它们的动听程度由数列 $\\{a_n\\}$ 描述。\n\n现在有 $n$ 种魔法，第 $i$ 种魔法会让 $a_i$ 增加 $s(s \\gt 0)$。每种魔法的成功几率都为 $\\dfrac{p}{q}$，并且彼此独立。\n\n求在施加魔法情况下，最终最动听的音符的动听程度（即，$\\max\\limits_{i=1}^n a_i$）的期望。\n\n**本题目有 Special Judge，你可以用两种不同的方式输出答案，具体见【输出格式】处**。", "inputFormat": "第一行为四个整数 $n, p, q, s$。\n\n第二行为 $n$ 个整数 $a_i$，由空格隔开。", "outputFormat": "**本题有两种不同的输出格式**。\n\n- 第一种输出格式：\n\n  请在第一行输出 `1`。\n  \n  接着，在第二行输出所求的期望，它应当是一个实数。\n  \n  如果您的答案与标准答案相差不超过 $10^{-4}$，则判定为正确。但由于众所周知的浮点数的误差，不保证评测结果百分百准确。如果您确信自己的程序正确但无法 AC，可以尝试使用第二种输出方式。\n\n- 第二种输出格式：\n  \n  请在第一行输出 `2`。\n  \n  接下来，若你求出的期望是 $\\dfrac{m}{n}$（显然期望为一个有理数），则请在第二行输出它对 $998244353$ 取模的结果，即一个 $[0, 998244353)$ 的整数 $x$，使得 $xn \\equiv m \\pmod {998244353}$。", "hint": "### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20 points）：$n \\leq 15$。\n- Subtask 2（15 points）：保证 $\\forall i \\in [1, n), a_i \\leq a_{i+1}$，$a_n \\geq a_{n-1}+s$。\n- Subtask 3（15 points）：保证 $\\forall i,j\\in[1,n], a_i = a_j$。\n- Subtask 4（50 points）：无特殊限制。\n\n对于所有测试数据，$1 \\leq n \\leq 10^5$，$1 \\leq p \\lt q \\leq 10^7$，$1 \\leq a_i,s \\leq 10^7$。\n\n### 样例解释\n\n注意到两个样例的输入相同，区别仅在于输出格式不同。\n\n以下列举了所有可能的魔法施加情况和其对应的最大值以及出现概率：\n\n| 魔法情况 | 动听度最大值 | 出现概率 | 对期望的贡献 |\n| :------: | :----------: | :------: | :----------: |\n|${\\color{black}1},{\\color{black}2},{\\color{black}3}$|$3$|$\\dfrac{8}{27}$|$\\dfrac{8}{9}$|\n|${\\color{red}3},{\\color{black}2},{\\color{black}3}$|$3$|$\\dfrac{4}{27}$|$\\dfrac{4}{9}$|\n|${\\color{black}1},{\\color{red}4},{\\color{black}3}$|$4$|$\\dfrac{4}{27}$|$\\dfrac{16}{27}$|\n|${\\color{black}1},{\\color{black}2},{\\color{red}5}$|$5$|$\\dfrac{4}{27}$|$\\dfrac{20}{27}$|\n|${\\color{red}3},{\\color{red}4},{\\color{black}3}$|$4$|$\\dfrac{2}{27}$|$\\dfrac{8}{27}$|\n|${\\color{red}3},{\\color{black}2},{\\color{red}5}$|$5$|$\\dfrac{2}{27}$|$\\dfrac{10}{27}$|\n|${\\color{black}1},{\\color{red}4},{\\color{red}5}$|$5$|$\\dfrac{2}{27}$|$\\dfrac{10}{27}$|\n|${\\color{red}3},{\\color{red}4},{\\color{red}5}$|$5$|$\\dfrac{1}{27}$|$\\dfrac{5}{27}$|\n\n可得，最终的答案为 $\\dfrac{35}{9}$。\n\n+ 若使用第一种输出方式，它的值约为 $3.888889$。\n+ 若使用第二种输出方式，可以发现 $554580200 \\times 9 \\equiv 35 \\pmod {998244353}$。", "locale": "zh-CN"}}}
{"pid": "P9218", "type": "P", "difficulty": 4, "samples": [["5\n11.4514\n11.4778\n11.1338\n11.1236\n11.4789", "10\n11\n9\n9\n11"], ["8\n1.1145\n1.114\n1.1145\n1.514\n1.19198\n1.1154\n1.114\n1.1145", "24\n21\n24\n10\n18\n22\n21\n24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "最近公共祖先 LCA", "进制", "字典树 Trie", "单调栈"], "title": "「TAOI-1」Apollo", "background": "Execution.\n\n这题原来叫 `std::cout << std::fixed << std::setprecision(1) << 6.5 << '\\n';`。\n\n[被当事人删掉的图片.jpg]\n\n**【Upd 2023/04/15 21:42】添加了一组 Hack 数据位于 Subtask 2，#13。现在所有赛时的 $\\bm{50}$ 分提交理论上均只能获得 $\\bm{30}$ 分。**", "description": "给出 $n$ 个十进制小数 $a_1 \\dots a_n$。\n\n对于一个 **数** $a$，定义其精度 $f(a)$ 表示最小的非负整数 $k$ 使得 $10^k\\times a$ 为整数；对于整数 $a$，定义 $f(a) = 0$。对于两个十进制小数 $a, b$，定义 $g(a, b)$ 为对于所有 **数** $c \\in [\\min(a,b), \\max(a,b)]$ 的 $f(c)$ 的最小值。\n\n对于所有 $1 \\leq i \\leq n$，你需要求出 $\\sum\\limits_{j=1}^ng(a_i, a_j)$ 的值并输出。\n\n定义十进制小数是一个含有整数部分和小数部分的数，其小数部分不为 $0$。之所以描述得这么愚蠢是因为保证输入的每个数都有小数点，但是好像无论什么写法都会有人提出不满，真是抱歉了。~~所以还是得看看被当事人删掉的图片。所以我在这里写闲话有人看得到吗。~~", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行一个十进制小数 $a_i$。", "outputFormat": "$n$ 行，每行一个整数，分别表示 $i = 1 \\dots n$ 对应的答案。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n令 $\\sum\\limits_{i=1}^n f(a_i) = t$。\n\n- Subtask 1（15 points）：$a_i \\leq 10$，$n \\leq 5$，$t \\leq 10$。\n- Subtask 2（15 points）：$a_i \\leq 10$，$n \\leq 100$，$t \\leq 1000$。\n- Subtask 3（20 points）：$n \\leq 1722$。\n- Subtask 4（15 points）：$a_i \\leq 1$。\n- Subtask 5（35 points）：无特殊限制。\n\n对于所有数据，$0 \\lt a_i \\lt 10^9$，$1 \\leq n \\leq 10^5$，$1 \\leq t \\leq 3 \\times 10^6$，**保证 $\\bm{a_i}$ 没有后导 [$\\color{black}\\bm 0$](https://cdn.luogu.com.cn/upload/image_hosting/pg66fm1z.png)，不保证 $\\bm{a_i}$ 互不相同**。\n\n### 样例解释\n\n以 $i = 1$ 为例：\n\n+ $j = 1$：取 $c = 11.4514$，$f(c) = 4$；\n+ $j = 2$：取 $c = 11.46$，$f(c) = 2$；\n+ $j = 3$：取 $c = 11.2$，$f(c) = 1$；\n+ $j = 4$：取 $c = 11.3$，$f(c) = 1$；\n+ $j = 5$：取 $c = 11.47$，$f(c) = 2$。\n\n故 $\\sum\\limits_{j=1}^n g(a_1, a_j) = 4 + 2 + 1 + 1 + 2 = 10$。对于同一个 $j$，上文给出的所有 $c$，都可能有其它的不同的 $c$ 满足 $f(c)$ 同样最小。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TAOI-1」Apollo", "background": "Execution.\n\n这题原来叫 `std::cout << std::fixed << std::setprecision(1) << 6.5 << '\\n';`。\n\n[被当事人删掉的图片.jpg]\n\n**【Upd 2023/04/15 21:42】添加了一组 Hack 数据位于 Subtask 2，#13。现在所有赛时的 $\\bm{50}$ 分提交理论上均只能获得 $\\bm{30}$ 分。**", "description": "给出 $n$ 个十进制小数 $a_1 \\dots a_n$。\n\n对于一个 **数** $a$，定义其精度 $f(a)$ 表示最小的非负整数 $k$ 使得 $10^k\\times a$ 为整数；对于整数 $a$，定义 $f(a) = 0$。对于两个十进制小数 $a, b$，定义 $g(a, b)$ 为对于所有 **数** $c \\in [\\min(a,b), \\max(a,b)]$ 的 $f(c)$ 的最小值。\n\n对于所有 $1 \\leq i \\leq n$，你需要求出 $\\sum\\limits_{j=1}^ng(a_i, a_j)$ 的值并输出。\n\n定义十进制小数是一个含有整数部分和小数部分的数，其小数部分不为 $0$。之所以描述得这么愚蠢是因为保证输入的每个数都有小数点，但是好像无论什么写法都会有人提出不满，真是抱歉了。~~所以还是得看看被当事人删掉的图片。所以我在这里写闲话有人看得到吗。~~", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行一个十进制小数 $a_i$。", "outputFormat": "$n$ 行，每行一个整数，分别表示 $i = 1 \\dots n$ 对应的答案。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n令 $\\sum\\limits_{i=1}^n f(a_i) = t$。\n\n- Subtask 1（15 points）：$a_i \\leq 10$，$n \\leq 5$，$t \\leq 10$。\n- Subtask 2（15 points）：$a_i \\leq 10$，$n \\leq 100$，$t \\leq 1000$。\n- Subtask 3（20 points）：$n \\leq 1722$。\n- Subtask 4（15 points）：$a_i \\leq 1$。\n- Subtask 5（35 points）：无特殊限制。\n\n对于所有数据，$0 \\lt a_i \\lt 10^9$，$1 \\leq n \\leq 10^5$，$1 \\leq t \\leq 3 \\times 10^6$，**保证 $\\bm{a_i}$ 没有后导 [$\\color{black}\\bm 0$](https://cdn.luogu.com.cn/upload/image_hosting/pg66fm1z.png)，不保证 $\\bm{a_i}$ 互不相同**。\n\n### 样例解释\n\n以 $i = 1$ 为例：\n\n+ $j = 1$：取 $c = 11.4514$，$f(c) = 4$；\n+ $j = 2$：取 $c = 11.46$，$f(c) = 2$；\n+ $j = 3$：取 $c = 11.2$，$f(c) = 1$；\n+ $j = 4$：取 $c = 11.3$，$f(c) = 1$；\n+ $j = 5$：取 $c = 11.47$，$f(c) = 2$。\n\n故 $\\sum\\limits_{j=1}^n g(a_1, a_j) = 4 + 2 + 1 + 1 + 2 = 10$。对于同一个 $j$，上文给出的所有 $c$，都可能有其它的不同的 $c$ 满足 $f(c)$ 同样最小。", "locale": "zh-CN"}}}
{"pid": "P9219", "type": "P", "difficulty": 4, "samples": [["1\n3 114514\n\n3\n\n2\n\n1\n", "\n\n? 1 2\n\n? 1 3\n\n? 2 3\n\n! 1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["交互题", "Special Judge", "O2优化"], "title": "「TAOI-1」Antipathy World", "background": "> 簡単なことも解らないわ \\\n> あたしって何だっけ \\\n> それすら夜の手に絆されて \\\n> 愛のように 消える 消える \\\n> さようならも言えぬ儘泣いた フォニイ フォニイ フォニイ \\\n> 嘘に絡まっているあたしはフォニイ \\\n> **ANTIPATHY WORLD**", "description": "**这是一道 IO 交互题。**\n\n可不有 $n$ 朵花，每朵花有一个正整数美丽度。\n\n她发现，有一朵花的美丽度不小于其它任何一朵花的美丽度的两倍。\n\n你想知道这朵花是哪一朵，于是你可以进行至多 $k$ 次询问，每次询问你给出两个正整数 $i,j \\in [1, n]$，可不会告诉你第 $i$ 朵和第 $j$ 朵花的美丽度之差的绝对值。\n\n你想运用这些询问的答案，得到最美丽的花是第几朵。\n\n### 交互格式\n\n**本题有多组数据**。\n\n第一行交互库给出一个整数 $T$，表示数据组数。\n\n对于每组数据，第一行输入两个正整数 $n,k$。\n\n对于你的每组询问，你输出 `? i j`，交互库会返回一个非负整数，表示第 $i$ 朵和第 $j$ 朵花的美丽度之差。\n\n如果你已经得到答案，输出 `! i` 代表你得到第 $i$ 朵花为最美丽的花。在此之后你应该开始对下一组数据的处理。\n\n每次你输出之后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "样例中给出了一种可能的交互方式，其中花的美丽度为 $\\{4,1,2\\}$。\n\n---\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20 points）：$k=\\dfrac{n(n-1)}{2}$，$n \\le 200$。\n- Subtask 2（30 points）：$k=n$。\n- Subtask 3（50 points）：$k=\\left\\lfloor\\dfrac{n}{2}\\right\\rfloor+2$。\n\n对于所有测试数据，设所有花的美丽度为 $a_i$，$1 \\le T \\le 25$，$3 \\le n \\le 5 \\times 10^4$，$1 \\le a_i \\le 10^8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TAOI-1」Antipathy World", "background": "> 簡単なことも解らないわ \\\n> あたしって何だっけ \\\n> それすら夜の手に絆されて \\\n> 愛のように 消える 消える \\\n> さようならも言えぬ儘泣いた フォニイ フォニイ フォニイ \\\n> 嘘に絡まっているあたしはフォニイ \\\n> **ANTIPATHY WORLD**", "description": "**这是一道 IO 交互题。**\n\n可不有 $n$ 朵花，每朵花有一个正整数美丽度。\n\n她发现，有一朵花的美丽度不小于其它任何一朵花的美丽度的两倍。\n\n你想知道这朵花是哪一朵，于是你可以进行至多 $k$ 次询问，每次询问你给出两个正整数 $i,j \\in [1, n]$，可不会告诉你第 $i$ 朵和第 $j$ 朵花的美丽度之差的绝对值。\n\n你想运用这些询问的答案，得到最美丽的花是第几朵。\n\n### 交互格式\n\n**本题有多组数据**。\n\n第一行交互库给出一个整数 $T$，表示数据组数。\n\n对于每组数据，第一行输入两个正整数 $n,k$。\n\n对于你的每组询问，你输出 `? i j`，交互库会返回一个非负整数，表示第 $i$ 朵和第 $j$ 朵花的美丽度之差。\n\n如果你已经得到答案，输出 `! i` 代表你得到第 $i$ 朵花为最美丽的花。在此之后你应该开始对下一组数据的处理。\n\n每次你输出之后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。", "inputFormat": "见「交互格式」。", "outputFormat": "见「交互格式」。", "hint": "样例中给出了一种可能的交互方式，其中花的美丽度为 $\\{4,1,2\\}$。\n\n---\n\n**本题采用捆绑测试**。\n\n- Subtask 1（20 points）：$k=\\dfrac{n(n-1)}{2}$，$n \\le 200$。\n- Subtask 2（30 points）：$k=n$。\n- Subtask 3（50 points）：$k=\\left\\lfloor\\dfrac{n}{2}\\right\\rfloor+2$。\n\n对于所有测试数据，设所有花的美丽度为 $a_i$，$1 \\le T \\le 25$，$3 \\le n \\le 5 \\times 10^4$，$1 \\le a_i \\le 10^8$。", "locale": "zh-CN"}}}
{"pid": "P9220", "type": "P", "difficulty": 5, "samples": [["2\n2 1\n1 0\n2 1\n3 2\n1 0 1\n1 2\n2 3", "AN"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["博弈论", "O2优化", "拓扑排序", "强连通分量", "Tarjan"], "title": "「TAOI-1」椎名真昼", "background": "**请注意赛后题目添加了多测。因此请将您的赛时代码进行修改后再提交。**", "description": "你正在看轻小说，突然你的家长走了进来，于是你假装在写 OI 题目。\n\nAlice 和 Bob 正在玩一款游戏，给定一个有向图，每个点初始有一个颜色（黑或白）。\n\n双方轮流进行操作，Alice 先手，每次操作选定一个节点，将所有从该点开始，能到达的点（包括自身）颜色翻转。如果某次操作后所有节点都变为白色，则进行该次操作的人胜利。\n\n假如双方都采用最优策略使得自己胜利，或者如果自己无法胜利，使得对方无法胜利。\n\n给你节点的初始状态，请你求出最终的胜者，亦或者，没有胜者。\n\n---\n\n定义点 $u$ 能到达点 $v$，当且仅当存在数列 $(a_1,a_2,a_3,\\cdots,a_k)$，其中 $k \\ge 1$，使得 $\\forall i \\in [1,k)$，存在有向边 $a_i \\to a_{i+1}$，且 $a_1=u$，$a_k=v$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个正整数 $T$，代表数据组数。\n\n对于每组测试数据：\n\n第一行两个整数 $n, m$，代表图的点数，边数。\n\n第二行 $n$ 个整数，代表每个点开始时的颜色。$1$ 代表黑色，$0$ 代表白色。\n\n接下来 $m$ 行，每行两个整数 $u, v$ 代表一条从 $u \\to v$ 的边。", "outputFormat": "对于每组测试数据：\n\n如果最后 Alice 胜利，输出 `A`。\n\n如果最后 Bob 胜利，输出 `B`。\n\n如果双方（在对方的阻止下）都无法胜利，输出 `N`。\n\n您无需输出空格或换行符。", "hint": "### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 1（5 points）：$n \\leq 2$，$m \\leq 1$，$T=1$。\n- Subtask 2（15 points）：$n \\leq 5$，$m \\leq 8$，$T=1$。\n- Subtask 3（25 points）：保证所有点的初始颜色相同。\n- Subtask 4（55 points）：无特殊限制。\n\n对于所有测试数据，$1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\le T \\le 15$。\n\n### 样例解释\n\n在第一组数据中，Alice 可以先手对节点 $1$ 进行操作。操作后所有节点变为白色。\n\n在第二组数据中，双方都没有必胜的方法，因此双方会互相拖延对方阻止对方获胜。\n\n---\n\n「据说如果无论如何都输出 `N` 的话，有 $45\\%$ 的几率能够得到正确答案？」\n\n「怎么可能，不会真的有人造出这么蠢的数据吧……」", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TAOI-1」椎名真昼", "background": "**请注意赛后题目添加了多测。因此请将您的赛时代码进行修改后再提交。**", "description": "你正在看轻小说，突然你的家长走了进来，于是你假装在写 OI 题目。\n\nAlice 和 Bob 正在玩一款游戏，给定一个有向图，每个点初始有一个颜色（黑或白）。\n\n双方轮流进行操作，Alice 先手，每次操作选定一个节点，将所有从该点开始，能到达的点（包括自身）颜色翻转。如果某次操作后所有节点都变为白色，则进行该次操作的人胜利。\n\n假如双方都采用最优策略使得自己胜利，或者如果自己无法胜利，使得对方无法胜利。\n\n给你节点的初始状态，请你求出最终的胜者，亦或者，没有胜者。\n\n---\n\n定义点 $u$ 能到达点 $v$，当且仅当存在数列 $(a_1,a_2,a_3,\\cdots,a_k)$，其中 $k \\ge 1$，使得 $\\forall i \\in [1,k)$，存在有向边 $a_i \\to a_{i+1}$，且 $a_1=u$，$a_k=v$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个正整数 $T$，代表数据组数。\n\n对于每组测试数据：\n\n第一行两个整数 $n, m$，代表图的点数，边数。\n\n第二行 $n$ 个整数，代表每个点开始时的颜色。$1$ 代表黑色，$0$ 代表白色。\n\n接下来 $m$ 行，每行两个整数 $u, v$ 代表一条从 $u \\to v$ 的边。", "outputFormat": "对于每组测试数据：\n\n如果最后 Alice 胜利，输出 `A`。\n\n如果最后 Bob 胜利，输出 `B`。\n\n如果双方（在对方的阻止下）都无法胜利，输出 `N`。\n\n您无需输出空格或换行符。", "hint": "### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 1（5 points）：$n \\leq 2$，$m \\leq 1$，$T=1$。\n- Subtask 2（15 points）：$n \\leq 5$，$m \\leq 8$，$T=1$。\n- Subtask 3（25 points）：保证所有点的初始颜色相同。\n- Subtask 4（55 points）：无特殊限制。\n\n对于所有测试数据，$1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\le T \\le 15$。\n\n### 样例解释\n\n在第一组数据中，Alice 可以先手对节点 $1$ 进行操作。操作后所有节点变为白色。\n\n在第二组数据中，双方都没有必胜的方法，因此双方会互相拖延对方阻止对方获胜。\n\n---\n\n「据说如果无论如何都输出 `N` 的话，有 $45\\%$ 的几率能够得到正确答案？」\n\n「怎么可能，不会真的有人造出这么蠢的数据吧……」", "locale": "zh-CN"}}}
{"pid": "P9221", "type": "P", "difficulty": 5, "samples": [["2 3 2\n1 1\n2 1", "8"], ["4 4 4\n1 1\n2 2\n3 3\n4 4", "0"], ["6 5 4\n1 3\n3 1\n3 4\n5 2", "2000"], ["100000000 100000000 0", "103866487"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "线段树", "颜色段均摊（珂朵莉树 ODT）", "O2优化"], "title": "「TAOI-1」Pentiment", "background": "近日（存疑），一款名为闊靛緥婧愮偣的游戏更新了它的 4.0 版本。在这个版本中某谱面中的大直角蛇给玩家们留下了深刻的印象……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qbdvtftu.png)", "description": "我们规定，在 $n$ 行 $m$ 列的网格中，“直角蛇”是这样一条路径：\n\n- 从最下方（第一行）的某个格子的中心开始，在最上方（第 $n$ 行）的某个格子的中心结束。\n- 每次可以向上、向右或向左移动一格，每次移动后都到达某个格子的中心（**不能向下移动**）。\n- 不能重复经过同一个格子。\n\n特别地，为了给你增加一些考验，我们规定有一些格子是“直角蛇”不能经过的。\n\n请你统计在给定的网格中存在多少种这样的“直角蛇”。答案对 $998244353$ 取模。", "inputFormat": "第一行三个整数 $n, m, q$，代表网格的行数和列数，以及限制的数量。\n\n接下来的 $q$ 行，每行两个整数 $x_i, y_i$，代表第 $x_i$ 行第 $y_i$ 列的格子不能经过。保证同一个格子至多出现一次。保证所有格子按照 $x_i$ 为第一关键字，$y_i$ 为第二关键字，从小到大排序后给出。（我们规定最下方的格子的行数为 $1$，最左侧格子的列数为 $1$）", "outputFormat": "共一行一个整数，代表符合条件的“直角蛇”数量对 $998244353$ 取模的结果。", "hint": "### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 1（10 points）：$n \\leq 10^6$，$m \\leq 2$。\n- Subtask 2（10 points）：$q=0$。\n- Subtask 3（15 points）：$n,m \\leq 10^4$。\n- Subtask 4（20 points）：$n \\leq 10^4$。\n- Subtask 5（20 points）：$m \\leq 10^4$。\n- Subtask 6（25 points）：无特殊限制。\n\n对于所有测试数据，$2 \\leq n \\leq 10^9$，$1 \\leq m \\leq 10^9$，$0 \\leq q \\leq 10^5$，$1 \\leq x_i \\leq n$，$1 \\leq y_i \\leq m$。\n\n### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dkyhh41q.png)\n\n如图，样例一中共有八种满足条件的“直角蛇”。\n\n对于样例二，不存在满足条件的“直角蛇”。\n\n---\n\n在寂若死灰中屈服。\n\n在飘忽不定中屈服。\n\n在功亏一篑中屈服。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「TAOI-1」Pentiment", "background": "近日（存疑），一款名为闊靛緥婧愮偣的游戏更新了它的 4.0 版本。在这个版本中某谱面中的大直角蛇给玩家们留下了深刻的印象……\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qbdvtftu.png)", "description": "我们规定，在 $n$ 行 $m$ 列的网格中，“直角蛇”是这样一条路径：\n\n- 从最下方（第一行）的某个格子的中心开始，在最上方（第 $n$ 行）的某个格子的中心结束。\n- 每次可以向上、向右或向左移动一格，每次移动后都到达某个格子的中心（**不能向下移动**）。\n- 不能重复经过同一个格子。\n\n特别地，为了给你增加一些考验，我们规定有一些格子是“直角蛇”不能经过的。\n\n请你统计在给定的网格中存在多少种这样的“直角蛇”。答案对 $998244353$ 取模。", "inputFormat": "第一行三个整数 $n, m, q$，代表网格的行数和列数，以及限制的数量。\n\n接下来的 $q$ 行，每行两个整数 $x_i, y_i$，代表第 $x_i$ 行第 $y_i$ 列的格子不能经过。保证同一个格子至多出现一次。保证所有格子按照 $x_i$ 为第一关键字，$y_i$ 为第二关键字，从小到大排序后给出。（我们规定最下方的格子的行数为 $1$，最左侧格子的列数为 $1$）", "outputFormat": "共一行一个整数，代表符合条件的“直角蛇”数量对 $998244353$ 取模的结果。", "hint": "### 数据范围\n\n**本题采用捆绑测试**。\n\n- Subtask 1（10 points）：$n \\leq 10^6$，$m \\leq 2$。\n- Subtask 2（10 points）：$q=0$。\n- Subtask 3（15 points）：$n,m \\leq 10^4$。\n- Subtask 4（20 points）：$n \\leq 10^4$。\n- Subtask 5（20 points）：$m \\leq 10^4$。\n- Subtask 6（25 points）：无特殊限制。\n\n对于所有测试数据，$2 \\leq n \\leq 10^9$，$1 \\leq m \\leq 10^9$，$0 \\leq q \\leq 10^5$，$1 \\leq x_i \\leq n$，$1 \\leq y_i \\leq m$。\n\n### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dkyhh41q.png)\n\n如图，样例一中共有八种满足条件的“直角蛇”。\n\n对于样例二，不存在满足条件的“直角蛇”。\n\n---\n\n在寂若死灰中屈服。\n\n在飘忽不定中屈服。\n\n在功亏一篑中屈服。", "locale": "zh-CN"}}}
{"pid": "P9222", "type": "P", "difficulty": 2, "samples": [["7\n11:30 12:20\n12:20 5:00\n11:45 1:04\n12:10 12:59\n1:09 8:01\n12:00 1:00\n12:00 12:00", "Yes\nNo\nYes\nNo\nNo\nNo\nNo"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「PEOI Rd1」Morning or Afternoon", "background": "", "description": "有一个可用转盘显示日期的指针闹钟，我从一个时刻观测到了另一个时刻（闭区间），现在我想知道我是否一定可以通过判断这期间日期的变化情况来推断出现在是上午还是下午。\n\n闹钟在上午 $12:00$ 准时更新日期。\n\n上午/下午 $11:59$ 后的时刻为 下午/上午 $12:00$，上午/下午 $12:59$ 后的时刻为 上午/下午 $1:00$。", "inputFormat": "第一行输入一个正整数 $T$ 表示数据组数。\n\n接下来 $T$ 行每行两个时刻以空格隔开，表示起始观测和终止观测的时刻。注意观测时间区间是闭区间。\n\n时刻以 $\\texttt{(a)b:cd}$ 的形式给出，其中 $\\texttt{ab}$ 表示小时数，$\\texttt{cd}$ 表示分钟数。如果 $\\tt a$ 位不省略，那么 ${\\tt a}\\not=0$。保证 $\\\\texttt{ab}\\in[1,12]$，$\\texttt{cd}\\in[0,59]$。", "outputFormat": "对于每组数据输出一行，如果一定可以判断，输出 `Yes`，否则输出 `No`。", "hint": "### 样例解释#1\n因为我从 $11:30$ 看到了 $12:20$（假设 $12:20$ 是第一次观测到；后面的 $12:20$ 的上下午情况可以根据现在的情况推出，因为我知道右端点的 $12:20$ 是第几次观测到），我可以通过判断这期间日期有没有变化来判断这个时刻是上午还是下午。比如，我看到这段时间里闹钟更新了日期，那么 $12:20$ 一定是上午；反之 $12:20$ 一定是下午。\n\n样例#3 同理。\n### 样例解释#2\n有可能是上午 $12:20$ 到上午 $5:00$，也有可能是下午 $12:20$ 到下午 $5:00$，这两种情况日期都不可能发生改变，所以我无法判断。\n\n### 数据范围\n对于 $18\\%$ 分数的数据，所有时刻保证不会出现 小时数 $=12$ 的情况（即不会出现 `12:25` 类型的时刻）。\n\n对于另外 $9\\%$ 分数的数据有 $T=1$。$\\color{#fff}\\sout\\text{不可以，总司令！}$\n\n对于 $100\\%$ 的数据 $T\\leqslant 100$，$\\overline\\texttt{ab}\\in[1,12]$，$\\overline\\texttt{cd}\\in[0,59]$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PEOI Rd1」Morning or Afternoon", "background": "", "description": "有一个可用转盘显示日期的指针闹钟，我从一个时刻观测到了另一个时刻（闭区间），现在我想知道我是否一定可以通过判断这期间日期的变化情况来推断出现在是上午还是下午。\n\n闹钟在上午 $12:00$ 准时更新日期。\n\n上午/下午 $11:59$ 后的时刻为 下午/上午 $12:00$，上午/下午 $12:59$ 后的时刻为 上午/下午 $1:00$。", "inputFormat": "第一行输入一个正整数 $T$ 表示数据组数。\n\n接下来 $T$ 行每行两个时刻以空格隔开，表示起始观测和终止观测的时刻。注意观测时间区间是闭区间。\n\n时刻以 $\\texttt{(a)b:cd}$ 的形式给出，其中 $\\texttt{ab}$ 表示小时数，$\\texttt{cd}$ 表示分钟数。如果 $\\tt a$ 位不省略，那么 ${\\tt a}\\not=0$。保证 $\\\\texttt{ab}\\in[1,12]$，$\\texttt{cd}\\in[0,59]$。", "outputFormat": "对于每组数据输出一行，如果一定可以判断，输出 `Yes`，否则输出 `No`。", "hint": "### 样例解释#1\n因为我从 $11:30$ 看到了 $12:20$（假设 $12:20$ 是第一次观测到；后面的 $12:20$ 的上下午情况可以根据现在的情况推出，因为我知道右端点的 $12:20$ 是第几次观测到），我可以通过判断这期间日期有没有变化来判断这个时刻是上午还是下午。比如，我看到这段时间里闹钟更新了日期，那么 $12:20$ 一定是上午；反之 $12:20$ 一定是下午。\n\n样例#3 同理。\n### 样例解释#2\n有可能是上午 $12:20$ 到上午 $5:00$，也有可能是下午 $12:20$ 到下午 $5:00$，这两种情况日期都不可能发生改变，所以我无法判断。\n\n### 数据范围\n对于 $18\\%$ 分数的数据，所有时刻保证不会出现 小时数 $=12$ 的情况（即不会出现 `12:25` 类型的时刻）。\n\n对于另外 $9\\%$ 分数的数据有 $T=1$。$\\color{#fff}\\sout\\text{不可以，总司令！}$\n\n对于 $100\\%$ 的数据 $T\\leqslant 100$，$\\overline\\texttt{ab}\\in[1,12]$，$\\overline\\texttt{cd}\\in[0,59]$。", "locale": "zh-CN"}}}
{"pid": "P9223", "type": "P", "difficulty": 3, "samples": [["2\n2 2\n3 3", "6\n12"], ["2\n4 8\n8 9", "144\n420"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化"], "title": "「PEOI Rd1」异或（xor）", "background": "", "description": "给定两个正整数 $n,m$，求：\n\n$$\\sum_{i=1}^{n}\\sum_{j=1}^{m}\\left(i \\oplus j\\right) $$\n\n其中，$\\oplus$ 表示按位异或运算（即 C++ 中的 `^` 符号）。答案对 $998244353$ 取模。", "inputFormat": "本题包含多组数据。\n\n第一行输入一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行输入两个整数 $n,m$。", "outputFormat": "输出共 $T$ 行，每行一个整数，表示每组询问的答案。", "hint": "#### 样例解释\n\n第一个样例第一组数据：\n\n$\\begin{aligned}&(1 \\oplus 1)+(1 \\oplus 2)+(2 \\oplus 1)+(2 \\oplus 2)\\\\=\\ &0+3+3+0\\\\=\\ &6\\end{aligned}$\n\n第二组数据：\n\n$\\begin{aligned}&(1 \\oplus 1)+(1 \\oplus 2)+(1 \\oplus 3)+(2 \\oplus 1)+(2 \\oplus 2)+(2 \\oplus 3)+(3 \\oplus 1)+(3 \\oplus 2)+(3 \\oplus 3)\\\\=\\ &0+3+2+3+0+1+2+1+0\\\\=\\ &12\\end{aligned}$\n\n---\n\n#### 数据范围\n\n|子任务|$n,m \\leq$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|\n|$1$|$10^3$|无|$10$|\n|$2$|$10^6$|无|$20$|\n|$3$|$10^{16}$|A|$20$|\n|$4$|$10^{16}$|无|$50$|\n\n- 特殊性质 A：保证 $n=2^p-1$，$m=2^q-1$，其中 $p,q\\in\\mathbb Z$。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n,m \\leq 10^{16}$，$1 \\leq T \\leq 50$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PEOI Rd1」异或（xor）", "background": "", "description": "给定两个正整数 $n,m$，求：\n\n$$\\sum_{i=1}^{n}\\sum_{j=1}^{m}\\left(i \\oplus j\\right) $$\n\n其中，$\\oplus$ 表示按位异或运算（即 C++ 中的 `^` 符号）。答案对 $998244353$ 取模。", "inputFormat": "本题包含多组数据。\n\n第一行输入一个整数 $T$，表示数据组数。\n\n接下来 $T$ 行，每行输入两个整数 $n,m$。", "outputFormat": "输出共 $T$ 行，每行一个整数，表示每组询问的答案。", "hint": "#### 样例解释\n\n第一个样例第一组数据：\n\n$\\begin{aligned}&(1 \\oplus 1)+(1 \\oplus 2)+(2 \\oplus 1)+(2 \\oplus 2)\\\\=\\ &0+3+3+0\\\\=\\ &6\\end{aligned}$\n\n第二组数据：\n\n$\\begin{aligned}&(1 \\oplus 1)+(1 \\oplus 2)+(1 \\oplus 3)+(2 \\oplus 1)+(2 \\oplus 2)+(2 \\oplus 3)+(3 \\oplus 1)+(3 \\oplus 2)+(3 \\oplus 3)\\\\=\\ &0+3+2+3+0+1+2+1+0\\\\=\\ &12\\end{aligned}$\n\n---\n\n#### 数据范围\n\n|子任务|$n,m \\leq$|特殊性质|分值|\n|:-:|:-:|:-:|:-:|\n|$1$|$10^3$|无|$10$|\n|$2$|$10^6$|无|$20$|\n|$3$|$10^{16}$|A|$20$|\n|$4$|$10^{16}$|无|$50$|\n\n- 特殊性质 A：保证 $n=2^p-1$，$m=2^q-1$，其中 $p,q\\in\\mathbb Z$。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n,m \\leq 10^{16}$，$1 \\leq T \\leq 50$。", "locale": "zh-CN"}}}
{"pid": "P9224", "type": "P", "difficulty": 5, "samples": [["3 2\n1 1 1\n1 1 1", "2\n1 2"], ["6 1\n2 1 2 1 1 2", "2\n2 5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["O2优化"], "title": "「PEOI Rd1」k 叉堆（heap）", "background": "**数据范围较赛时加强**。\n\n- 2023.04.25：发现 1.50s 时限过于卡常，扩大到 2.00s。", "description": "给定一个 $1 \\sim n$ 的序列，每个位置 $i$ 有 $k$ 个参数 $a_{i,1},a_{i,2},\\dots,a_{i,k}$。已知这个序列是一个按照大根堆的 bfs 序得到的序列。\n\nbfs 序，即按照下图中**红色数字编号的顺序**：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/73ot5iox.png)\n\n一个大根堆满足条件，当且仅当所有子节点的**所有** $k$ 个权值都小于等于父节点，即 $\\forall u\\in[1,n],\\forall v\\in son(u),\\forall j \\in [1,k],a_{v,j} \\leq a_{u,j}$。\n\n假设这个大根堆是**完全 $m$ 叉树**，求所有 $m \\in [1,n-1]$，使得这个 $m$ 叉堆**满足条件**的 $m$ 的取值。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $k$ 行，每行 $n$ 个整数，表示给定的序列。其中，第 $i+1$ 行第 $j$ 列表示的是 $a_{j,i}$。\n\n可以理解为，分成 $k$ 行给出了所有位置的 $k$ 个参数。", "outputFormat": "第一行一个整数 $A$，表示所有可能的 $m$ 的取值数量。\n\n接下来一行 $A$ 个整数，表示所有的可能的 $m$ 的取值。", "hint": "#### 样例解释\n\n样例 $1$ 中，$1,2$ 叉堆显然都符合条件。\n\n---\n\n#### 数据范围\n\n|子任务编号|$n \\leq$|分值|\n|:-:|:-:|:-:|\n|$1$|$10^3$|$20$|\n|$2$|$5 \\times 10^4$|$20$|\n|$3$|$2 \\times 10^5$|$60$|\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq k \\leq 8$，$-10^7 \\leq a_{i,j} \\leq 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PEOI Rd1」k 叉堆（heap）", "background": "**数据范围较赛时加强**。\n\n- 2023.04.25：发现 1.50s 时限过于卡常，扩大到 2.00s。", "description": "给定一个 $1 \\sim n$ 的序列，每个位置 $i$ 有 $k$ 个参数 $a_{i,1},a_{i,2},\\dots,a_{i,k}$。已知这个序列是一个按照大根堆的 bfs 序得到的序列。\n\nbfs 序，即按照下图中**红色数字编号的顺序**：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/73ot5iox.png)\n\n一个大根堆满足条件，当且仅当所有子节点的**所有** $k$ 个权值都小于等于父节点，即 $\\forall u\\in[1,n],\\forall v\\in son(u),\\forall j \\in [1,k],a_{v,j} \\leq a_{u,j}$。\n\n假设这个大根堆是**完全 $m$ 叉树**，求所有 $m \\in [1,n-1]$，使得这个 $m$ 叉堆**满足条件**的 $m$ 的取值。", "inputFormat": "第一行两个整数 $n,k$。\n\n接下来 $k$ 行，每行 $n$ 个整数，表示给定的序列。其中，第 $i+1$ 行第 $j$ 列表示的是 $a_{j,i}$。\n\n可以理解为，分成 $k$ 行给出了所有位置的 $k$ 个参数。", "outputFormat": "第一行一个整数 $A$，表示所有可能的 $m$ 的取值数量。\n\n接下来一行 $A$ 个整数，表示所有的可能的 $m$ 的取值。", "hint": "#### 样例解释\n\n样例 $1$ 中，$1,2$ 叉堆显然都符合条件。\n\n---\n\n#### 数据范围\n\n|子任务编号|$n \\leq$|分值|\n|:-:|:-:|:-:|\n|$1$|$10^3$|$20$|\n|$2$|$5 \\times 10^4$|$20$|\n|$3$|$2 \\times 10^5$|$60$|\n\n对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 2 \\times 10^5$，$1 \\leq k \\leq 8$，$-10^7 \\leq a_{i,j} \\leq 10^7$。", "locale": "zh-CN"}}}
{"pid": "P9225", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n3 2 1", "3"], ["3\n1 2 100\n1 2 1", "5"], ["4\n1 2 100 100\n1 2 1 1", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "O2优化", "斜率优化"], "title": "「PEOI Rd1」寻宝（treasure）", "background": "", "description": "有一天 wrzSama 在寻宝，突然他掉到了一个神奇的房间里。这个房间里有 $n$ 个机器，第 $i$ 个机器可以生产 $2^i$ 个钻石。\n\n具体地，wrzSama 可以用 $a_i$ 的时间开动第 $i$ 个机器，让它生产 $2^i$ 个钻石。这些机器有个很特殊的性质，每当他用一次第 $i$ 个机器后，会让它的开动时间 $a_i$ 加上 $b_i$。这意味着当他要第二次得到这 $2^i$ 个钻石时就需要 $a_i + b_i$ 的时间，每次不断累加，第 $x$ 次开动就需要 $a_i+(x-1)b_i$ 的时间。\n\nwrzSama 需要得到至少 $2^n$ 个钻石来得到宝藏，请问他最少需要多长时间。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数，表示 $a_1,a_2,\\dots,a_n$。\n\n第三行 $n$ 个正整数，表示 $b_1,b_2,\\dots,b_n$。", "outputFormat": "一行一个正整数，即为答案。", "hint": "#### 样例解释\n\n样例 1 解释：直接获得 $2^3$，花费 3 的时间。\n\n样例 2 解释：获得 2 个 $2^1$，花费 3 的时间，然后再花 2 的时间获得一个 $2^2$，这样 wrzSama 就可以得到 $2 \\times 2^1 + 2^2 = 8 = 2^n$ 了。\n\n样例 3 解释：获得 2 个 $2^1$ 和 3 个 $2^2$。\n\n---\n#### 数据范围\n\n**本题采用捆绑测试。**\n\n|子任务|分值|特殊限制|\n|:-:|:-:|:-:|\n|$1$|$16$|$1 \\leq n \\leq 10$|\n|$2$|$16$|$1 \\leq n \\leq 20$|\n|$3$|$24$|$1 \\leq a_i \\leq 3 \\times 10^3$|\n|$4$|$44$|无|\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^3$，$1 \\le a_i,b_i \\le 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PEOI Rd1」寻宝（treasure）", "background": "", "description": "有一天 wrzSama 在寻宝，突然他掉到了一个神奇的房间里。这个房间里有 $n$ 个机器，第 $i$ 个机器可以生产 $2^i$ 个钻石。\n\n具体地，wrzSama 可以用 $a_i$ 的时间开动第 $i$ 个机器，让它生产 $2^i$ 个钻石。这些机器有个很特殊的性质，每当他用一次第 $i$ 个机器后，会让它的开动时间 $a_i$ 加上 $b_i$。这意味着当他要第二次得到这 $2^i$ 个钻石时就需要 $a_i + b_i$ 的时间，每次不断累加，第 $x$ 次开动就需要 $a_i+(x-1)b_i$ 的时间。\n\nwrzSama 需要得到至少 $2^n$ 个钻石来得到宝藏，请问他最少需要多长时间。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个正整数，表示 $a_1,a_2,\\dots,a_n$。\n\n第三行 $n$ 个正整数，表示 $b_1,b_2,\\dots,b_n$。", "outputFormat": "一行一个正整数，即为答案。", "hint": "#### 样例解释\n\n样例 1 解释：直接获得 $2^3$，花费 3 的时间。\n\n样例 2 解释：获得 2 个 $2^1$，花费 3 的时间，然后再花 2 的时间获得一个 $2^2$，这样 wrzSama 就可以得到 $2 \\times 2^1 + 2^2 = 8 = 2^n$ 了。\n\n样例 3 解释：获得 2 个 $2^1$ 和 3 个 $2^2$。\n\n---\n#### 数据范围\n\n**本题采用捆绑测试。**\n\n|子任务|分值|特殊限制|\n|:-:|:-:|:-:|\n|$1$|$16$|$1 \\leq n \\leq 10$|\n|$2$|$16$|$1 \\leq n \\leq 20$|\n|$3$|$24$|$1 \\leq a_i \\leq 3 \\times 10^3$|\n|$4$|$44$|无|\n\n对于 $100\\%$ 的数据，保证 $1 \\le n \\le 10^3$，$1 \\le a_i,b_i \\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P9226", "type": "P", "difficulty": 1, "samples": [["10 3", "2"], ["16 4", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "洛谷月赛"], "title": "糖果", "background": "", "description": "三年级七班共有 $n$ 名同学。体育课开始，他们从左到右站成了一排，准备进行报数分组。\n\n体育老师口袋里有很多袋装的糖果（一个袋子里有很多糖果），他准备在分组的过程中顺便将这些袋装糖果分给同学们。\n\n具体地，在从左到右报数的过程中，每报数 $k$ 名同学，体育老师就会将这 $k$ 名同学划为一组，同时给予这 $k$ 名同学中的最后一名一袋糖果，让这最后一名同学来负责分发给组内的同学。也就是说，体育老师会依次给从左到右第 $k,2k,\\cdots$ 名同学一袋糖果。\n\n恰巧，三年级六班的同学听到了三年级七班发糖果的消息，于是他们打算混入队伍的末尾（即队伍最右侧），企图白嫖到一袋糖果。\n\n三年级六班的同学想知道，他们**至少**需要向队伍末尾混入多少人。", "inputFormat": "一行两个整数 $n, k$。", "outputFormat": "一行一个整数，表示答案。", "hint": "### 样例 1 解释\n\n此时每 $3$ 人分一组。三年级六班只需要向队伍中混入 $2$ 名同学，就可以和原来三年级七班的最后 $1$ 名同学一同凑成一组。\n\n由于混入的这 $2$ 名同学在队伍的末尾，因此这一组中的最后一名同学一定是隔壁班的同学，因此隔壁班的同学可以白嫖到一袋糖果。\n\n### 样例 2 解释\n\n此时每 $4$ 人分一组。三年级七班的所有同学都已经分好了组，因此三年级六班需要完整地向队伍中混入 $4$ 名同学凑成一组，才能白嫖到一袋糖果。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10 ^ {9}$，$2 \\leq k \\leq 10 ^ 9$。\n\n| 测试点编号 | $n$ | $k$ |\n| :-----------: | :-----------: | :-----------: |\n| $1 \\sim 2$ | $\\leq 10$ | $= 2$ |\n| $3 \\sim 5$ | $\\leq 10$ | $\\leq 10$ |\n| $6 \\sim 10$ | $\\leq 1000$ | $\\leq 1000$ |\n| $11 \\sim 14$ | $\\leq 10 ^ 9$ | $= 2$ |\n| $15 \\sim 20$ | $\\leq 10 ^ 9$ | $\\leq 10 ^ 9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "糖果", "background": "", "description": "三年级七班共有 $n$ 名同学。体育课开始，他们从左到右站成了一排，准备进行报数分组。\n\n体育老师口袋里有很多袋装的糖果（一个袋子里有很多糖果），他准备在分组的过程中顺便将这些袋装糖果分给同学们。\n\n具体地，在从左到右报数的过程中，每报数 $k$ 名同学，体育老师就会将这 $k$ 名同学划为一组，同时给予这 $k$ 名同学中的最后一名一袋糖果，让这最后一名同学来负责分发给组内的同学。也就是说，体育老师会依次给从左到右第 $k,2k,\\cdots$ 名同学一袋糖果。\n\n恰巧，三年级六班的同学听到了三年级七班发糖果的消息，于是他们打算混入队伍的末尾（即队伍最右侧），企图白嫖到一袋糖果。\n\n三年级六班的同学想知道，他们**至少**需要向队伍末尾混入多少人。", "inputFormat": "一行两个整数 $n, k$。", "outputFormat": "一行一个整数，表示答案。", "hint": "### 样例 1 解释\n\n此时每 $3$ 人分一组。三年级六班只需要向队伍中混入 $2$ 名同学，就可以和原来三年级七班的最后 $1$ 名同学一同凑成一组。\n\n由于混入的这 $2$ 名同学在队伍的末尾，因此这一组中的最后一名同学一定是隔壁班的同学，因此隔壁班的同学可以白嫖到一袋糖果。\n\n### 样例 2 解释\n\n此时每 $4$ 人分一组。三年级七班的所有同学都已经分好了组，因此三年级六班需要完整地向队伍中混入 $4$ 名同学凑成一组，才能白嫖到一袋糖果。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10 ^ {9}$，$2 \\leq k \\leq 10 ^ 9$。\n\n| 测试点编号 | $n$ | $k$ |\n| :-----------: | :-----------: | :-----------: |\n| $1 \\sim 2$ | $\\leq 10$ | $= 2$ |\n| $3 \\sim 5$ | $\\leq 10$ | $\\leq 10$ |\n| $6 \\sim 10$ | $\\leq 1000$ | $\\leq 1000$ |\n| $11 \\sim 14$ | $\\leq 10 ^ 9$ | $= 2$ |\n| $15 \\sim 20$ | $\\leq 10 ^ 9$ | $\\leq 10 ^ 9$ |", "locale": "zh-CN"}}}
{"pid": "P9227", "type": "P", "difficulty": 2, "samples": [["1\n4 1\n1 2 3 4", "5 6 7 0"], ["1\n4 2\n0 0 0 1", "0 0 0 1"], ["见附件中的 samples/xor3.in", "见附件中的 samples/xor3.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2023", "O2优化", "位运算", "洛谷月赛"], "title": "异或积", "background": "$\\texttt{id: 4d7e}$\n\n小 H 在课堂上学习了异或运算。\n\n对于两个非负整数 $x,y$，它们的**异或**是指，将它们作为二进制数，对二进制表示中的每一位进行如下运算得到的结果：\n\n- $x$ 和 $y$ 的这一位上不同时，结果的这一位为 $1$；\n- $x$ 和 $y$ 的这一位上相同时，结果的这一位为 $0$。\n\n$x$ 和 $y$ 的异或被记为 $x \\operatorname{xor} y$ 或 $x \\oplus y$。\n\n在 C++ 中，你可以用 `x ^ y` 得到 $x$ 与 $y$ 的异或值。\n\n另外，若干个数的异或称之为**异或和**。", "description": "小 H 还了解到，一个长度为 $n$ 的数列 $a$ 的**异或积**是一个等长的数列 $b$，其中 $b_i$ 等于数列 $a$ 中除了 $a_i$ 以外其他元素的异或和，即\n\t\n$$b_i = \\bigoplus \\limits_{j = 1}^{n} [j\\ne i] a_j$$\n\t\n例如，数列 $\\{1, 2, 3, 4\\}$ 的异或积为 $\\{5, 6, 7, 0\\}$。\n\t\n**异或积变换**是指将一个数列用它的异或积替换的过程，由于异或积变换之后数列长度不变，所以异或积变换可以连续进行多次。\n\t\n现在，小 H 有一个长度为 $n$ 的数列 $a$，他想请你帮他计算出 $a$ 经过 $k$ 次异或积变换之后得到的序列。", "inputFormat": "**本题单个测试点内有多组测试数据**。\n\n第一行一个整数 $T$，表示测试数据组数。\n\t\n对于每一组测试数据：\n\t\n第一行两个整数 $n,k$。\n\t\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "对于每一组测试数据：\n\t\n一行 $n$ 个整数，表示数列 $a$ 经过 $k$ 次异或积变换之后得到的数列。", "hint": "### 样例 1 解释\n\n此样例即为题目描述中的例子。\n\n### 样例 2 解释\n\n第 $1$ 次异或积变换：$\\{0,0,0,1\\}\\to\\{1,1,1,0\\}$；\n\n第 $2$ 次异或积变换：$\\{1,1,1,0\\}\\to\\{0,0,0,1\\}$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的测试数据，$1 \\le T \\le 10$，$2 \\le n \\le 10^5$，$1 \\le k \\le 10^{18}$，$0 \\le a_i < 2^{32}$。\n\n| 测试点编号 | $n\\leq$  | $k \\leq$  |特殊性质|\n| :----------: | :----------: | :----------: | :-----------: |\n| $1 \\sim 3$ | $100$ | $100$ | |\n| $4 \\sim 5$ | $1000$ | $1000$ | |\n| $6 \\sim 7$ | $3$ | $10^{18}$ | |\n| $8 \\sim 10$ | $10^5$ | $3$ | |\n| $11 \\sim 13$ | $10^5$ | $10^{18}$ | $a$ 中所有数的异或和为 $0$ |\n| $14 \\sim 15$ | $10^5$ | $10^{18}$ | $n$ 为奇数 |\n| $16 \\sim 17$ | $10^5$ | $10^{18}$ | $n$ 为偶数 |\n| $18 \\sim 20$ | $10^5$ | $10^{18}$ | |\n\n### 提示\n\n在 C++ 中，对于数据范围 $0\\le x<2^{32}$，你可以：\n\n- 使用 `unsigned int x` 来定义；\n- 使用 `cin >> x` 或 `scanf(\"%u\", &x)` 来输入；\n- 使用 `cout << x` 或 `printf(\"%u\", x)` 来输出。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "异或积", "background": "$\\texttt{id: 4d7e}$\n\n小 H 在课堂上学习了异或运算。\n\n对于两个非负整数 $x,y$，它们的**异或**是指，将它们作为二进制数，对二进制表示中的每一位进行如下运算得到的结果：\n\n- $x$ 和 $y$ 的这一位上不同时，结果的这一位为 $1$；\n- $x$ 和 $y$ 的这一位上相同时，结果的这一位为 $0$。\n\n$x$ 和 $y$ 的异或被记为 $x \\operatorname{xor} y$ 或 $x \\oplus y$。\n\n在 C++ 中，你可以用 `x ^ y` 得到 $x$ 与 $y$ 的异或值。\n\n另外，若干个数的异或称之为**异或和**。", "description": "小 H 还了解到，一个长度为 $n$ 的数列 $a$ 的**异或积**是一个等长的数列 $b$，其中 $b_i$ 等于数列 $a$ 中除了 $a_i$ 以外其他元素的异或和，即\n\t\n$$b_i = \\bigoplus \\limits_{j = 1}^{n} [j\\ne i] a_j$$\n\t\n例如，数列 $\\{1, 2, 3, 4\\}$ 的异或积为 $\\{5, 6, 7, 0\\}$。\n\t\n**异或积变换**是指将一个数列用它的异或积替换的过程，由于异或积变换之后数列长度不变，所以异或积变换可以连续进行多次。\n\t\n现在，小 H 有一个长度为 $n$ 的数列 $a$，他想请你帮他计算出 $a$ 经过 $k$ 次异或积变换之后得到的序列。", "inputFormat": "**本题单个测试点内有多组测试数据**。\n\n第一行一个整数 $T$，表示测试数据组数。\n\t\n对于每一组测试数据：\n\t\n第一行两个整数 $n,k$。\n\t\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。", "outputFormat": "对于每一组测试数据：\n\t\n一行 $n$ 个整数，表示数列 $a$ 经过 $k$ 次异或积变换之后得到的数列。", "hint": "### 样例 1 解释\n\n此样例即为题目描述中的例子。\n\n### 样例 2 解释\n\n第 $1$ 次异或积变换：$\\{0,0,0,1\\}\\to\\{1,1,1,0\\}$；\n\n第 $2$ 次异或积变换：$\\{1,1,1,0\\}\\to\\{0,0,0,1\\}$。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的测试数据，$1 \\le T \\le 10$，$2 \\le n \\le 10^5$，$1 \\le k \\le 10^{18}$，$0 \\le a_i < 2^{32}$。\n\n| 测试点编号 | $n\\leq$  | $k \\leq$  |特殊性质|\n| :----------: | :----------: | :----------: | :-----------: |\n| $1 \\sim 3$ | $100$ | $100$ | |\n| $4 \\sim 5$ | $1000$ | $1000$ | |\n| $6 \\sim 7$ | $3$ | $10^{18}$ | |\n| $8 \\sim 10$ | $10^5$ | $3$ | |\n| $11 \\sim 13$ | $10^5$ | $10^{18}$ | $a$ 中所有数的异或和为 $0$ |\n| $14 \\sim 15$ | $10^5$ | $10^{18}$ | $n$ 为奇数 |\n| $16 \\sim 17$ | $10^5$ | $10^{18}$ | $n$ 为偶数 |\n| $18 \\sim 20$ | $10^5$ | $10^{18}$ | |\n\n### 提示\n\n在 C++ 中，对于数据范围 $0\\le x<2^{32}$，你可以：\n\n- 使用 `unsigned int x` 来定义；\n- 使用 `cin >> x` 或 `scanf(\"%u\", &x)` 来输入；\n- 使用 `cout << x` 或 `printf(\"%u\", x)` 来输出。 ", "locale": "zh-CN"}}}
{"pid": "P9228", "type": "P", "difficulty": 3, "samples": [["6 7 3\n1 1 4 5 1 4\n1 9 1 9 8 1 0\n", "67\n"], ["5 3 5\n1 4 2 8 5\n7 1 4\n", "50"], ["1 1 0\n2\n3\n", "7\n"], ["见附件中的 samples/genshin4.in", "见附件中的 samples/genshin4.ans"], ["见附件中的 samples/genshin5.in", "见附件中的 samples/genshin5.ans"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2023", "O2优化", "洛谷月赛"], "title": "原神", "background": "## 提示：题目背景与题目无关。\n\n\n你说的对，但是《原神》是由米哈游自主研发的一款全新开放世界冒险游戏。游戏发生在一个被称作「提瓦特」的幻想世界，在这里，被神选中的人将被授予「神之眼」，导引元素之力。你将扮演一位名为「旅行者」的神秘角色，在自由的旅行中邂逅性格各异、能力独特的同伴们，和他们一起击败强敌，找回失散的亲人——同时，逐步发掘「原神」的真相。\n\n因为你的素养很差，我现在每天玩原神都能赚 150 原石，每个月差不多 5000 原石的收入， 也就是现实生活中每个月 5000 美元的收入水平，换算过来最少也 30000 人民币，虽然我 只有 14 岁，但是已经超越了中国绝大多数人（包括你）的水平，这便是原神给我的骄傲的资本。\n\n毫不夸张地说，《原神》是 miHoYo 迄今为止规模最为宏大，也是最具野心的一部作品。即便在经历了 8700 个小时的艰苦战斗后，游戏还有许多尚未发现的秘密，错过的武器与装备，以及从未使用过的法术和技能。\n\n尽管游戏中的战斗体验和我们之前在烧机系列游戏所见到的没有多大差别，但游戏中各类精心设计的敌人以及 Boss 战已然将战斗抬高到了一个全新的水平。就和几年前的《塞尔达传说》一样，《原神》也是一款能够推动同类游戏向前发展的优秀作品。", "description": "原神中有一个魔法师，她可以打出 $ n $ 次火元素攻击魔法和 $ m $ 次冰元素攻击魔法，每次攻击的伤害分别为 $ a_1,a_2,\\cdots, a_n $ 和 $ b_1,b_2,\\cdots, b_m $。\n\n元素攻击之间存在如下反应规则：\n\n- 每次元素攻击可以给**没有元素附着**的怪物附着相应的元素，初始时怪物没有元素附着；\n\n- 如果用火元素攻击打到冰元素附着的怪物身上，那么本次伤害将 $ \\times 2 $，**并清空元素附着**；\n\n- 如果用冰元素攻击打到火元素附着的怪物身上，那么本次伤害将 $ +k $，**并清空元素附着**。\n\n现在魔法师可以任意安排攻击顺序，也就是说，每次攻击过后，魔法师可以从自己没有使用过的魔法中任意挑选一种使用。她希望最大化总伤害，请问**最大总伤害**是多少。", "inputFormat": "第一行三个整数 $ n,m,k $。\n\n第二行 $ n $ 个整数 $ a_1,a_2,\\cdots, a_n $。\n\n第三行 $ m $ 个整数 $ b_1,b_2,\\cdots, b_m $。", "outputFormat": "一行一个整数，表示答案。", "hint": "### 样例 1 解释\n\n攻击采用 $a_1\\rightarrow b_4\\rightarrow a_2\\rightarrow b_3\\rightarrow a_5\\rightarrow b_5\\rightarrow b_7 \\rightarrow b_1\\rightarrow a_3 \\rightarrow b_2\\rightarrow a_4\\rightarrow b_6 \\rightarrow a_6 $，每次的实际伤害为 $1,12,1,4,1,11,0,1,8,9,10,1,8$，总伤害为 $ 67 $。\n\n### 样例 2 解释\n\n攻击采用 $a_5\\rightarrow b_1\\rightarrow b_2\\rightarrow a_4\\rightarrow a_3\\rightarrow b_3\\rightarrow a_2\\rightarrow a_1$，每次的实际伤害为 $5,12,1,16,2,9,4,1$，总伤害为 $50 $。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 10^6 $，$ 0 \\leq a_i,b_i,k \\leq 10^9 $。\n\n| 测试点编号 | $n,m \\leq$  |特殊性质|\n| :----------: | :----------: | :-----------: |\n| $1 \\sim 5$ | $10$ | |\n| $6 \\sim  10$ | $1000$ | |\n| $11 \\sim 12$ | $10 ^6 $ | $k=0$ |\n| $13 \\sim 14$ | $10 ^6 $ | $k>\\max(\\max_{i=1}^n\\{a_i\\},\\max_{i=1}^m\\{b_i\\})$ |\n| $15 \\sim 16$ | $10 ^6 $ | $n=m$ | \n| $17 \\sim 25$ | $10 ^6 $ | |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "原神", "background": "## 提示：题目背景与题目无关。\n\n\n你说的对，但是《原神》是由米哈游自主研发的一款全新开放世界冒险游戏。游戏发生在一个被称作「提瓦特」的幻想世界，在这里，被神选中的人将被授予「神之眼」，导引元素之力。你将扮演一位名为「旅行者」的神秘角色，在自由的旅行中邂逅性格各异、能力独特的同伴们，和他们一起击败强敌，找回失散的亲人——同时，逐步发掘「原神」的真相。\n\n因为你的素养很差，我现在每天玩原神都能赚 150 原石，每个月差不多 5000 原石的收入， 也就是现实生活中每个月 5000 美元的收入水平，换算过来最少也 30000 人民币，虽然我 只有 14 岁，但是已经超越了中国绝大多数人（包括你）的水平，这便是原神给我的骄傲的资本。\n\n毫不夸张地说，《原神》是 miHoYo 迄今为止规模最为宏大，也是最具野心的一部作品。即便在经历了 8700 个小时的艰苦战斗后，游戏还有许多尚未发现的秘密，错过的武器与装备，以及从未使用过的法术和技能。\n\n尽管游戏中的战斗体验和我们之前在烧机系列游戏所见到的没有多大差别，但游戏中各类精心设计的敌人以及 Boss 战已然将战斗抬高到了一个全新的水平。就和几年前的《塞尔达传说》一样，《原神》也是一款能够推动同类游戏向前发展的优秀作品。", "description": "原神中有一个魔法师，她可以打出 $ n $ 次火元素攻击魔法和 $ m $ 次冰元素攻击魔法，每次攻击的伤害分别为 $ a_1,a_2,\\cdots, a_n $ 和 $ b_1,b_2,\\cdots, b_m $。\n\n元素攻击之间存在如下反应规则：\n\n- 每次元素攻击可以给**没有元素附着**的怪物附着相应的元素，初始时怪物没有元素附着；\n\n- 如果用火元素攻击打到冰元素附着的怪物身上，那么本次伤害将 $ \\times 2 $，**并清空元素附着**；\n\n- 如果用冰元素攻击打到火元素附着的怪物身上，那么本次伤害将 $ +k $，**并清空元素附着**。\n\n现在魔法师可以任意安排攻击顺序，也就是说，每次攻击过后，魔法师可以从自己没有使用过的魔法中任意挑选一种使用。她希望最大化总伤害，请问**最大总伤害**是多少。", "inputFormat": "第一行三个整数 $ n,m,k $。\n\n第二行 $ n $ 个整数 $ a_1,a_2,\\cdots, a_n $。\n\n第三行 $ m $ 个整数 $ b_1,b_2,\\cdots, b_m $。", "outputFormat": "一行一个整数，表示答案。", "hint": "### 样例 1 解释\n\n攻击采用 $a_1\\rightarrow b_4\\rightarrow a_2\\rightarrow b_3\\rightarrow a_5\\rightarrow b_5\\rightarrow b_7 \\rightarrow b_1\\rightarrow a_3 \\rightarrow b_2\\rightarrow a_4\\rightarrow b_6 \\rightarrow a_6 $，每次的实际伤害为 $1,12,1,4,1,11,0,1,8,9,10,1,8$，总伤害为 $ 67 $。\n\n### 样例 2 解释\n\n攻击采用 $a_5\\rightarrow b_1\\rightarrow b_2\\rightarrow a_4\\rightarrow a_3\\rightarrow b_3\\rightarrow a_2\\rightarrow a_1$，每次的实际伤害为 $5,12,1,16,2,9,4,1$，总伤害为 $50 $。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1 \\leq n,m \\leq 10^6 $，$ 0 \\leq a_i,b_i,k \\leq 10^9 $。\n\n| 测试点编号 | $n,m \\leq$  |特殊性质|\n| :----------: | :----------: | :-----------: |\n| $1 \\sim 5$ | $10$ | |\n| $6 \\sim  10$ | $1000$ | |\n| $11 \\sim 12$ | $10 ^6 $ | $k=0$ |\n| $13 \\sim 14$ | $10 ^6 $ | $k>\\max(\\max_{i=1}^n\\{a_i\\},\\max_{i=1}^m\\{b_i\\})$ |\n| $15 \\sim 16$ | $10 ^6 $ | $n=m$ | \n| $17 \\sim 25$ | $10 ^6 $ | |", "locale": "zh-CN"}}}
{"pid": "P9229", "type": "P", "difficulty": 5, "samples": [["3\n011\n", "6\n"], ["8\n00000001\n", "341\n"], ["见附件中的 samples/rings3.in", "见附件中的 samples/rings3.ans"], ["见附件中的 samples/rings4.in", "见附件中的 samples/rings4.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2023", "O2优化", "洛谷月赛"], "title": "简单九连环", "background": "**提示：此题有大样例。**\n\n**提示：本题中的九连环与传统九连环不同。**\n\n九连环是一种源于中国的传统智力游戏。如图所示，九个的圆环套在一把“剑”上，并且互相牵连。\n\n![](https://cdn.luogu.com.cn/upload/pic/17568.png)\n\n在传统的九连环中，第 $k(k\\ge 2)$ 个环可以装上“剑”（记为 $1$）或拆下“剑”（记为 $0$），当且仅当第 $k-1$ 个环在剑上，且再之前的环不在剑上；特别地，第 $1$ 个环可以任意上下。\n\n本题中我们将会讨论更一般的情形，虽然这种简单九连环不一定可以在物理意义上造出。", "description": "一个简单九连环，可以看作两个 `01` 串——规则串 $s$ 和状态串 $t$，满足 $|s|=|t|-1$。其中 $t_i = \\texttt 1$ 表示第 $i$ 个环是装上的，$t_i = \\texttt 0$ 表示第 $i$ 个环是拆下的。\n\n$s$ 在同一局游戏中是不变的，而 $t$ 每步会变化一个位置上的值（从 `0` 变成 `1` 或从 `1` 变成 `0`）。简单九连环被拆下，当且仅当 $t_i$ 全是 `0`；简单九连环被装上，当且仅当 $t_i$ 全是 `1`。\n\n简单九连环规定，$t_i$ 可以变化，当且仅当 $t_{1\\sim i-1}$ 是 $s$ 的一个**后缀**。可以看出，传统的九连环就是 $s$ 为 `00...01` 的特殊情形。\n\n给出一个 $s$，问从拆下状态到装上状态至少需要几步，答案对 $10^9+7$ 取模。", "inputFormat": "第一行一个整数 $n$，表示 $s$ 的长度。**注意不是环的数量。**\n\n第二行一个 `01` 串 $s$。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模后的值。", "hint": "### 样例 1 解释\n\n初始时刻所有环都不在简单九连环的剑上，状态串 $t$ 为 `0000`。\n\n第 1 步装上第 $1$ 个环，$t$ 变成 `1000`。\n\n第 2 步装上第 $2$ 个环，$t$ 变成 `1100`。\n\n第 3 步装上第 $3$ 个环，$t$ 变成 `1110`。\n\n接下来你不能直接装上第 $4$ 个环，因为 `111` 并不是规则串 $s$ `011` 的后缀。因此第 4 步应拆下第 $1$ 个环，$t$ 变成 `0110`。\n\n然后第 5 步装上第 $4$ 个环，$t$ 变成 `0111`。\n\n最后一步装上第 $1$ 个环，$t$ 变成 `1111`，完成目标。\n\n### 样例 2 解释\n\n这就是传统的九连环，且恰好有 $9$ 个环。\n\n### 样例 3 解释\n\n样例 3 满足测试点 $7$ 的限制。\n\n### 样例 4 解释\n\n样例 4 满足测试点 $15$ 的限制。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2000$，$s_i\\in\\{\\texttt 0,\\texttt 1\\}$。\n\n|测试点编号|$\\vert s\\vert\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 3$|$3$||\n|$4\\sim 6$|$15$||\n|$7\\sim 11$|$300$||\n|$12\\sim 13$|$1000$||\n|$14$|$2000$|$s_i$ 全为 `0`|\n|$15\\sim 17$|$2000$|$s$ 末尾为 `1`，其余位置为 `0`|\n|$18\\sim 25$|$2000$||", "locale": "zh-CN", "translations": {"zh-CN": {"title": "简单九连环", "background": "**提示：此题有大样例。**\n\n**提示：本题中的九连环与传统九连环不同。**\n\n九连环是一种源于中国的传统智力游戏。如图所示，九个的圆环套在一把“剑”上，并且互相牵连。\n\n![](https://cdn.luogu.com.cn/upload/pic/17568.png)\n\n在传统的九连环中，第 $k(k\\ge 2)$ 个环可以装上“剑”（记为 $1$）或拆下“剑”（记为 $0$），当且仅当第 $k-1$ 个环在剑上，且再之前的环不在剑上；特别地，第 $1$ 个环可以任意上下。\n\n本题中我们将会讨论更一般的情形，虽然这种简单九连环不一定可以在物理意义上造出。", "description": "一个简单九连环，可以看作两个 `01` 串——规则串 $s$ 和状态串 $t$，满足 $|s|=|t|-1$。其中 $t_i = \\texttt 1$ 表示第 $i$ 个环是装上的，$t_i = \\texttt 0$ 表示第 $i$ 个环是拆下的。\n\n$s$ 在同一局游戏中是不变的，而 $t$ 每步会变化一个位置上的值（从 `0` 变成 `1` 或从 `1` 变成 `0`）。简单九连环被拆下，当且仅当 $t_i$ 全是 `0`；简单九连环被装上，当且仅当 $t_i$ 全是 `1`。\n\n简单九连环规定，$t_i$ 可以变化，当且仅当 $t_{1\\sim i-1}$ 是 $s$ 的一个**后缀**。可以看出，传统的九连环就是 $s$ 为 `00...01` 的特殊情形。\n\n给出一个 $s$，问从拆下状态到装上状态至少需要几步，答案对 $10^9+7$ 取模。", "inputFormat": "第一行一个整数 $n$，表示 $s$ 的长度。**注意不是环的数量。**\n\n第二行一个 `01` 串 $s$。", "outputFormat": "一行一个整数，表示答案对 $10^9+7$ 取模后的值。", "hint": "### 样例 1 解释\n\n初始时刻所有环都不在简单九连环的剑上，状态串 $t$ 为 `0000`。\n\n第 1 步装上第 $1$ 个环，$t$ 变成 `1000`。\n\n第 2 步装上第 $2$ 个环，$t$ 变成 `1100`。\n\n第 3 步装上第 $3$ 个环，$t$ 变成 `1110`。\n\n接下来你不能直接装上第 $4$ 个环，因为 `111` 并不是规则串 $s$ `011` 的后缀。因此第 4 步应拆下第 $1$ 个环，$t$ 变成 `0110`。\n\n然后第 5 步装上第 $4$ 个环，$t$ 变成 `0111`。\n\n最后一步装上第 $1$ 个环，$t$ 变成 `1111`，完成目标。\n\n### 样例 2 解释\n\n这就是传统的九连环，且恰好有 $9$ 个环。\n\n### 样例 3 解释\n\n样例 3 满足测试点 $7$ 的限制。\n\n### 样例 4 解释\n\n样例 4 满足测试点 $15$ 的限制。\n\n### 数据规模与约定\n\n对于 $100\\%$ 的数据，$1\\le n\\le 2000$，$s_i\\in\\{\\texttt 0,\\texttt 1\\}$。\n\n|测试点编号|$\\vert s\\vert\\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1\\sim 3$|$3$||\n|$4\\sim 6$|$15$||\n|$7\\sim 11$|$300$||\n|$12\\sim 13$|$1000$||\n|$14$|$2000$|$s_i$ 全为 `0`|\n|$15\\sim 17$|$2000$|$s$ 末尾为 `1`，其余位置为 `0`|\n|$18\\sim 25$|$2000$||", "locale": "zh-CN"}}}
{"pid": "P9230", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [500, 500], "memory": [131072, 131072]}, "tags": ["2023", "提交答案", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 A] 填空问题", "background": "", "description": "## A. 幸运数\n\n小蓝认为如果一个数含有偶数个数位，并且前面一半的数位之和等于后面一半的数位之和，则这个数是他的幸运数字。例如 $2314$ 是一个幸运数字，因为它有 $4$ 个数位，并且 $2+3=1+4$。现在请你帮他计算从 $1$ 至 $100000000$ 之间共有多少个不同的幸运数字。\n\n## B. 有奖问答\n\n小蓝正在参与一个现场问答的节目。活动中一共有 $30$ 道题目，每题只有答对和答错两种情况，每答对一题得 $10$ 分，答错一题分数归零。\n\n小蓝可以在任意时刻结束答题并获得目前分数对应的奖项，之后不能再答任何题目。最高奖项需要 $100$ 分，所以到达 $100$ 分时小蓝会直接停止答题。请注意小蓝也可能在不到 $100$ 分时停止答题 $^{[1]}$。\n\n已知小蓝最终实际获得了 $70$ 分对应的奖项，请问小蓝所有可能的答题情况有多少种？\n\n${[1]}$：这一句并未在蓝桥杯原题写明，具体的情况请参考 [这个讨论帖](https://www.luogu.com.cn/discuss/1070210)。", "inputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n\n您可以通过提交答案文件的方式进行提交。你需要将你的答案放在 `1.out` 和 `2.out` 中，其中 `1.out` 对应 A 题的答案，`2.out` 对应 B 题的答案。\n\n输入文件包含一个字符，代表题目编号（`A` 或 `B`），你需要输出对应的答案。\n\n以下模板供参考：\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nchar pid;\nint main() {\n    cin >> pid;\n    if(pid == 'A')\n        puts(\"Answer for Problem A\");\n    else\n        puts(\"Answer for Problem B\");\n    return 0;\n}\n```", "outputFormat": "", "hint": "第十四届蓝桥杯大赛软件赛省赛 C/C++ 大学 A 组 A-B", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 A] 填空问题", "background": "", "description": "## A. 幸运数\n\n小蓝认为如果一个数含有偶数个数位，并且前面一半的数位之和等于后面一半的数位之和，则这个数是他的幸运数字。例如 $2314$ 是一个幸运数字，因为它有 $4$ 个数位，并且 $2+3=1+4$。现在请你帮他计算从 $1$ 至 $100000000$ 之间共有多少个不同的幸运数字。\n\n## B. 有奖问答\n\n小蓝正在参与一个现场问答的节目。活动中一共有 $30$ 道题目，每题只有答对和答错两种情况，每答对一题得 $10$ 分，答错一题分数归零。\n\n小蓝可以在任意时刻结束答题并获得目前分数对应的奖项，之后不能再答任何题目。最高奖项需要 $100$ 分，所以到达 $100$ 分时小蓝会直接停止答题。请注意小蓝也可能在不到 $100$ 分时停止答题 $^{[1]}$。\n\n已知小蓝最终实际获得了 $70$ 分对应的奖项，请问小蓝所有可能的答题情况有多少种？\n\n${[1]}$：这一句并未在蓝桥杯原题写明，具体的情况请参考 [这个讨论帖](https://www.luogu.com.cn/discuss/1070210)。", "inputFormat": "这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n\n您可以通过提交答案文件的方式进行提交。你需要将你的答案放在 `1.out` 和 `2.out` 中，其中 `1.out` 对应 A 题的答案，`2.out` 对应 B 题的答案。\n\n输入文件包含一个字符，代表题目编号（`A` 或 `B`），你需要输出对应的答案。\n\n以下模板供参考：\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nchar pid;\nint main() {\n    cin >> pid;\n    if(pid == 'A')\n        puts(\"Answer for Problem A\");\n    else\n        puts(\"Answer for Problem B\");\n    return 0;\n}\n```", "outputFormat": "", "hint": "第十四届蓝桥杯大赛软件赛省赛 C/C++ 大学 A 组 A-B", "locale": "zh-CN"}}}
{"pid": "P9231", "type": "P", "difficulty": 2, "samples": [["1 5", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 A] 平方差", "background": "", "description": "给定 $L,R$，问 $L \\leq x \\leq R$ 中有多少个数 $x$ 满足存在整数 $y,z$ 使得 $x=y^2-z^2$。", "inputFormat": "输入一行包含两个整数 $L,R$，用一个空格分隔。", "outputFormat": "输出一行包含一个整数满足题目给定条件的 $x$ 的数量。", "hint": "#### 【样例说明】\n\n* $1=1^2-0^2$\n* $3=2^2-1^2$\n* $4=2^2-0^2$\n* $5=3^2-2^2$\n\n#### 【评测用例规模与约定】\n\n对于 $40 \\%$ 的评测用例，$L,R \\leq 5000$；\n\n对于所有评测用例，$1 \\leq L \\leq R \\leq 10^9$。\n\n第十四届蓝桥杯大赛软件赛省赛 C/C++ 大学 A 组 C", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 A] 平方差", "background": "", "description": "给定 $L,R$，问 $L \\leq x \\leq R$ 中有多少个数 $x$ 满足存在整数 $y,z$ 使得 $x=y^2-z^2$。", "inputFormat": "输入一行包含两个整数 $L,R$，用一个空格分隔。", "outputFormat": "输出一行包含一个整数满足题目给定条件的 $x$ 的数量。", "hint": "#### 【样例说明】\n\n* $1=1^2-0^2$\n* $3=2^2-1^2$\n* $4=2^2-0^2$\n* $5=3^2-2^2$\n\n#### 【评测用例规模与约定】\n\n对于 $40 \\%$ 的评测用例，$L,R \\leq 5000$；\n\n对于所有评测用例，$1 \\leq L \\leq R \\leq 10^9$。\n\n第十四届蓝桥杯大赛软件赛省赛 C/C++ 大学 A 组 C", "locale": "zh-CN"}}}
{"pid": "P9232", "type": "P", "difficulty": 3, "samples": [["210102", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "枚举", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 A] 更小的数", "background": "", "description": "![image](https://cdn.luogu.com.cn/upload/image_hosting/y1rd2iun.png)\n\n小蓝有一个长度均为 $n$ 且仅由数字字符 $0 \\sim 9$ 组成的字符串，下标从 $0$ 到 $n-1$，你可以将其视作是一个具有 $n$ 位的十进制数字 $num$，小蓝可以从 $num$ 中选出一段连续的子串并将子串进行反转，最多反转一次。小蓝想要将选出的子串进行反转后再放入原位置处得到的新的数字 $num_{new}$ 满足条件 $num_{new}<num$，请你帮他计算下一共有多少种不同的子串选择方案，只要两个子串在 $num$ 中的位置不完全相同我们就视作是不同的方案。\n\n注意，我们允许前导零的存在，即数字的最高位可以是 $0$，这是合法的。", "inputFormat": "输入一行包含一个长度为 $n$ 的字符串表示 $num$（仅包含数字字符 $0 \\sim 9$），从左至右下标依次为 $0 \\sim n-1$。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "#### 【样例说明】\n\n一共有 $8$ 种不同的方案：\n\n1. 所选择的子串下标为 $0\\sim1$，反转后的 $num_{new} = 120102 < 210102$；\n2. 所选择的子串下标为 $0\\sim2$，反转后的 $num_{new} =  012102 < 210102$；\n3. 所选择的子串下标为 $0\\sim3$，反转后的 $num_{new} =  101202 < 210102$；\n4. 所选择的子串下标为 $0\\sim4$，反转后的 $num_{new} =  010122 < 210102$；\n5. 所选择的子串下标为 $0\\sim5$，反转后的 $num_{new} =  201012 < 210102$；\n6. 所选择的子串下标为 $1\\sim2$，反转后的 $num_{new} =  201102 < 210102$；\n7. 所选择的子串下标为 $1\\sim4$，反转后的 $num_{new} =  201012 < 210102$；\n8. 所选择的子串下标为 $3\\sim4$，反转后的 $num_{new} =  210012 < 210102$。\n\n#### 【评测用例规模与约定】\n\n对于 $20\\%$ 的评测用例，$1 \\le n \\le 100$；\n\n对于 $40\\%$ 的评测用例，$1 \\le n \\le 1000$；\n\n对于所有评测用例，$1 \\le n \\le 5000$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 A] 更小的数", "background": "", "description": "![image](https://cdn.luogu.com.cn/upload/image_hosting/y1rd2iun.png)\n\n小蓝有一个长度均为 $n$ 且仅由数字字符 $0 \\sim 9$ 组成的字符串，下标从 $0$ 到 $n-1$，你可以将其视作是一个具有 $n$ 位的十进制数字 $num$，小蓝可以从 $num$ 中选出一段连续的子串并将子串进行反转，最多反转一次。小蓝想要将选出的子串进行反转后再放入原位置处得到的新的数字 $num_{new}$ 满足条件 $num_{new}<num$，请你帮他计算下一共有多少种不同的子串选择方案，只要两个子串在 $num$ 中的位置不完全相同我们就视作是不同的方案。\n\n注意，我们允许前导零的存在，即数字的最高位可以是 $0$，这是合法的。", "inputFormat": "输入一行包含一个长度为 $n$ 的字符串表示 $num$（仅包含数字字符 $0 \\sim 9$），从左至右下标依次为 $0 \\sim n-1$。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "#### 【样例说明】\n\n一共有 $8$ 种不同的方案：\n\n1. 所选择的子串下标为 $0\\sim1$，反转后的 $num_{new} = 120102 < 210102$；\n2. 所选择的子串下标为 $0\\sim2$，反转后的 $num_{new} =  012102 < 210102$；\n3. 所选择的子串下标为 $0\\sim3$，反转后的 $num_{new} =  101202 < 210102$；\n4. 所选择的子串下标为 $0\\sim4$，反转后的 $num_{new} =  010122 < 210102$；\n5. 所选择的子串下标为 $0\\sim5$，反转后的 $num_{new} =  201012 < 210102$；\n6. 所选择的子串下标为 $1\\sim2$，反转后的 $num_{new} =  201102 < 210102$；\n7. 所选择的子串下标为 $1\\sim4$，反转后的 $num_{new} =  201012 < 210102$；\n8. 所选择的子串下标为 $3\\sim4$，反转后的 $num_{new} =  210012 < 210102$。\n\n#### 【评测用例规模与约定】\n\n对于 $20\\%$ 的评测用例，$1 \\le n \\le 100$；\n\n对于 $40\\%$ 的评测用例，$1 \\le n \\le 1000$；\n\n对于所有评测用例，$1 \\le n \\le 5000$。\n", "locale": "zh-CN"}}}
{"pid": "P9233", "type": "P", "difficulty": 5, "samples": [["6\n2 0\n2 1\n1 2\n3 3\n3 4\n1 4", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["树上启发式合并", "2023", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 A] 颜色平衡树", "background": "", "description": "给定一棵树，结点由 $1$ 至 $n$ 编号，其中结点 $1$ 是树根。树的每个点有一个颜色 $C_i$。\n\n如果一棵树中存在的每种颜色的结点个数都相同，则我们称它是一棵颜色平衡树。\n\n求出这棵树中有多少个子树是颜色平衡树。", "inputFormat": "输入的第一行包含一个整数 $n$，表示树的结点数。\n\n接下来 $n$ 行，每行包含两个整数 $C_i,F_i$，用一个空格分隔，表示第 $i$ 个结点的颜色和父亲结点编号。\n\n特别地，输入数据保证 $F_1$ 为 $0$，也即 $1$ 号点没有父亲结点。保证输入数据是一棵树。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "#### 【样例说明】\n\n编号为 $1,3,5,6$ 的 $4$ 个结点对应的子树为颜色平衡树。\n\n#### 【评测用例规模与约定】\n\n对于 $30 \\%$ 的评测用例，$n \\leq 200$，$C_i \\leq 200$；\n\n对于 $60 \\%$ 的评测用例，$n \\leq 5000$，$C_i \\leq 5000$；\n\n对于所有评测用例，$1 \\leq n \\leq 2\\times 10 ^ 5$，$1 \\leq C_i \\leq 2\\times 10 ^ 5$，$0 \\leq F_i<i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 A] 颜色平衡树", "background": "", "description": "给定一棵树，结点由 $1$ 至 $n$ 编号，其中结点 $1$ 是树根。树的每个点有一个颜色 $C_i$。\n\n如果一棵树中存在的每种颜色的结点个数都相同，则我们称它是一棵颜色平衡树。\n\n求出这棵树中有多少个子树是颜色平衡树。", "inputFormat": "输入的第一行包含一个整数 $n$，表示树的结点数。\n\n接下来 $n$ 行，每行包含两个整数 $C_i,F_i$，用一个空格分隔，表示第 $i$ 个结点的颜色和父亲结点编号。\n\n特别地，输入数据保证 $F_1$ 为 $0$，也即 $1$ 号点没有父亲结点。保证输入数据是一棵树。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "#### 【样例说明】\n\n编号为 $1,3,5,6$ 的 $4$ 个结点对应的子树为颜色平衡树。\n\n#### 【评测用例规模与约定】\n\n对于 $30 \\%$ 的评测用例，$n \\leq 200$，$C_i \\leq 200$；\n\n对于 $60 \\%$ 的评测用例，$n \\leq 5000$，$C_i \\leq 5000$；\n\n对于所有评测用例，$1 \\leq n \\leq 2\\times 10 ^ 5$，$1 \\leq C_i \\leq 2\\times 10 ^ 5$，$0 \\leq F_i<i$。", "locale": "zh-CN"}}}
{"pid": "P9234", "type": "P", "difficulty": 4, "samples": [["3 10\n1 3 13", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "O2优化", "蓝桥杯省赛", "折半搜索 meet in the middle"], "title": "[蓝桥杯 2023 省 A] 买瓜", "background": "", "description": "小蓝正在一个瓜摊上买瓜。瓜摊上共有 $n$ 个瓜，每个瓜的重量为 $A_i$。小蓝刀功了得，他可以把任何瓜劈成完全等重的两份，不过每个瓜只能劈一刀。\n\n小蓝希望买到的瓜的重量的和恰好为 $m$。\n\n请问小蓝至少要劈多少个瓜才能买到重量恰好为 $m$ 的瓜。如果无论怎样小蓝都无法得到总重恰好为 $m$ 的瓜，请输出 $-1$。", "inputFormat": "输入的第一行包含两个整数 $n,m$，用一个空格分隔，分别表示瓜的个数和小蓝想买到的瓜的总重量。\n\n第二行包含 $n$ 个整数 $A_i$，相邻整数之间使用一个空格分隔，分别表示每个瓜的重量。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "#### 【评测用例规模与约定】\n\n对于 $20 \\%$ 的评测用例，$n \\leq 10$;\n\n对于 $60 \\%$ 的评测用例，$n \\leq 20$;\n\n对于所有评测用例，$1 \\leq n \\leq 30$，$1 \\leq A_i \\leq 10^9$，$1 \\leq m \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 A] 买瓜", "background": "", "description": "小蓝正在一个瓜摊上买瓜。瓜摊上共有 $n$ 个瓜，每个瓜的重量为 $A_i$。小蓝刀功了得，他可以把任何瓜劈成完全等重的两份，不过每个瓜只能劈一刀。\n\n小蓝希望买到的瓜的重量的和恰好为 $m$。\n\n请问小蓝至少要劈多少个瓜才能买到重量恰好为 $m$ 的瓜。如果无论怎样小蓝都无法得到总重恰好为 $m$ 的瓜，请输出 $-1$。", "inputFormat": "输入的第一行包含两个整数 $n,m$，用一个空格分隔，分别表示瓜的个数和小蓝想买到的瓜的总重量。\n\n第二行包含 $n$ 个整数 $A_i$，相邻整数之间使用一个空格分隔，分别表示每个瓜的重量。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "#### 【评测用例规模与约定】\n\n对于 $20 \\%$ 的评测用例，$n \\leq 10$;\n\n对于 $60 \\%$ 的评测用例，$n \\leq 20$;\n\n对于所有评测用例，$1 \\leq n \\leq 30$，$1 \\leq A_i \\leq 10^9$，$1 \\leq m \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9235", "type": "P", "difficulty": 5, "samples": [["5 4 3\n1 2 5\n2 3 6\n3 4 1\n1 4 3\n1 5\n2 4\n1 3", "-1\n3\n5"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["图论", "贪心", "并查集", "2023", "生成树", "最近公共祖先 LCA", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 A] 网络稳定性", "background": "", "description": "有一个局域网，由 $n$ 个设备和 $m$ 条物理连接组成，第 $i$ 条连接的稳定性为 $w_i$。\n\n对于从设备 $A$ 到设备 $B$ 的一条经过了若干个物理连接的路径，我们记这条路径的稳定性为其经过所有连接中稳定性最低的那个。\n\n我们记设备 $A$ 到设备 $B$ 之间通信的稳定性为 $A$ 至 $B$ 的所有可行路径的稳定性中最高的那一条。\n\n给定局域网中的设备的物理连接情况，求出若干组设备 $x_i$ 和 $y_i$ 之间的通信稳定性。如果两台设备之间不存在任何路径，请输出 $-1$。", "inputFormat": "输入的第一行包含三个整数 $n,m,q$，分别表示设备数、物理连接数和询问数。\n\n接下来 $m$ 行，每行包含三个整数 $u_i,v_i,w_i$，分别表示 $u_i$ 和 $v_i$ 之间有一条稳定性为 $w_i$ 的物理连接。\n\n接下来 $q$ 行，每行包含两个整数 $x_i,y_i$，表示查询 $x_i$ 和 $y_i$ 之间的通信稳定性。", "outputFormat": "输出 $q$ 行，每行包含一个整数依次表示每个询问的答案。", "hint": "【评测用例规模与约定】\n\n对于 $30 \\%$ 的评测用例，$n,q \\leq 500$，$m \\leq 1000$；\n\n对于 $60 \\%$ 的评测用例，$n,q \\leq 5000$，$m \\leq 10000$；\n\n对于所有评测用例，$2 \\leq n,q \\leq 10^5$，$1 \\leq m \\leq 3 \\times 10^5$，$1 \\leq u_i,v_i,x_i,y_i \\leq n$，$\n1 \\leq w_i \\leq 10^6$，$u_i \\neq v_i$，$x_i \\neq y_i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 A] 网络稳定性", "background": "", "description": "有一个局域网，由 $n$ 个设备和 $m$ 条物理连接组成，第 $i$ 条连接的稳定性为 $w_i$。\n\n对于从设备 $A$ 到设备 $B$ 的一条经过了若干个物理连接的路径，我们记这条路径的稳定性为其经过所有连接中稳定性最低的那个。\n\n我们记设备 $A$ 到设备 $B$ 之间通信的稳定性为 $A$ 至 $B$ 的所有可行路径的稳定性中最高的那一条。\n\n给定局域网中的设备的物理连接情况，求出若干组设备 $x_i$ 和 $y_i$ 之间的通信稳定性。如果两台设备之间不存在任何路径，请输出 $-1$。", "inputFormat": "输入的第一行包含三个整数 $n,m,q$，分别表示设备数、物理连接数和询问数。\n\n接下来 $m$ 行，每行包含三个整数 $u_i,v_i,w_i$，分别表示 $u_i$ 和 $v_i$ 之间有一条稳定性为 $w_i$ 的物理连接。\n\n接下来 $q$ 行，每行包含两个整数 $x_i,y_i$，表示查询 $x_i$ 和 $y_i$ 之间的通信稳定性。", "outputFormat": "输出 $q$ 行，每行包含一个整数依次表示每个询问的答案。", "hint": "【评测用例规模与约定】\n\n对于 $30 \\%$ 的评测用例，$n,q \\leq 500$，$m \\leq 1000$；\n\n对于 $60 \\%$ 的评测用例，$n,q \\leq 5000$，$m \\leq 10000$；\n\n对于所有评测用例，$2 \\leq n,q \\leq 10^5$，$1 \\leq m \\leq 3 \\times 10^5$，$1 \\leq u_i,v_i,x_i,y_i \\leq n$，$\n1 \\leq w_i \\leq 10^6$，$u_i \\neq v_i$，$x_i \\neq y_i$。", "locale": "zh-CN"}}}
{"pid": "P9236", "type": "P", "difficulty": 4, "samples": [["5\n1 2 3 4 5", "39"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "前缀和", "位运算", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 A] 异或和之和", "background": "", "description": "给定一个数组 $A_i$，分别求其每个子段的异或和，并求出它们的和。或者说，对于每组满足 $1 \\leq L \\leq R \\leq n$ 的 $L,R$，求出数组中第 $L$ 至第 $R$ 个元素的异或和。然后输出每组 $L,R$ 得到的结果加起来的值。", "inputFormat": "输入的第一行包含一个整数 $n$ 。\n\n第二行包含 $n$ 个整数 $A_i$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "#### 【评测用例规模与约定】\n\n对于 $30 \\%$ 的评测用例，$n \\leq 300$；\n\n对于 $60 \\%$ 的评测用例，$n \\leq 5000$;\n\n对于所有评测用例，$1 \\leq n \\leq 10^5$，$0 \\leq A_i \\leq 2^{20}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 A] 异或和之和", "background": "", "description": "给定一个数组 $A_i$，分别求其每个子段的异或和，并求出它们的和。或者说，对于每组满足 $1 \\leq L \\leq R \\leq n$ 的 $L,R$，求出数组中第 $L$ 至第 $R$ 个元素的异或和。然后输出每组 $L,R$ 得到的结果加起来的值。", "inputFormat": "输入的第一行包含一个整数 $n$ 。\n\n第二行包含 $n$ 个整数 $A_i$，相邻整数之间使用一个空格分隔。", "outputFormat": "输出一行包含一个整数表示答案。", "hint": "#### 【评测用例规模与约定】\n\n对于 $30 \\%$ 的评测用例，$n \\leq 300$；\n\n对于 $60 \\%$ 的评测用例，$n \\leq 5000$;\n\n对于所有评测用例，$1 \\leq n \\leq 10^5$，$0 \\leq A_i \\leq 2^{20}$。", "locale": "zh-CN"}}}
{"pid": "P9237", "type": "P", "difficulty": 6, "samples": [["6 8\n_1__5_1_\n1_4__42_\n3__6__5_\n___56___\n_688___4\n_____6__", "00011000\n00111100\n01000010\n11111111\n01011110\n01111110"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "O2优化", "轮廓线 DP", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 A] 像素放置", "background": "", "description": "小蓝最近迷上了一款名为《像素放置》的游戏，游戏在一个 $n \\times m$ 的网格棋盘上进行，棋盘含有 $n$ 行，每行包含 $m$ 个方格。玩家的任务就是需要对这 $n \\times m$ 个方格进行像素填充，填充颜色只有黑色或白色两种。有些方格中会出现一个整数数字 $x(0 \\leq x \\leq 9)$，这表示当前方格加上周围八个方向上相邻的方格（分别是上方、下方、左方、右方、左上方、右上方、左下方、右下方）共九个方格内有且仅有 $x$ 个方格需要用黑色填充。\n\n玩家需要在满足所有数字约束下对网格进行像素填充，请你帮助小蓝来完成。题目保证所有数据都有解并且解是唯一的。", "inputFormat": "输入的第一行包含两个整数 $n,m$，用一个空格分隔，表示棋盘大小。\n\n接下来 $n$ 行，每行包含 $m$ 个字符，表示棋盘布局。字符可能是数字 $0 \\sim 9$，这表示网格上的数字；字符还有可能是下划线（$\\text{ASCII}$ 码为 $95$），表示一个不带有数字的普通网格。", "outputFormat": "输出 $n$ 行，每行包含 $m$ 个字符，表示答案。如果网格填充白色则用字符 $0$ 表示，如果网格填充黑色则用字符 $1$ 表示。", "hint": "#### 【样例说明】\n\n![image](https://cdn.luogu.com.cn/upload/image_hosting/v8u2zzne.png)\n\n上图左是样例数据对应的棋盘布局，上图右是此局游戏的解。例如第 $3$ 行第 $1$ 列处的方格中有一个数字 $3$，它周围有且仅有 $3$ 个格子被黑色填充，分别是第 $3$ 行第 $2$ 列、第 $4$ 行第 $1$ 列和第 $4$ 行第 $2$ 列的方格。\n\n#### 【评测用例规模与约定】\n\n对于 $50 \\%$ 的评测用例，$1 \\leq n,m \\leq 5$；\n\n对于所有评测用例，$1 \\leq n,m \\leq 10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 A] 像素放置", "background": "", "description": "小蓝最近迷上了一款名为《像素放置》的游戏，游戏在一个 $n \\times m$ 的网格棋盘上进行，棋盘含有 $n$ 行，每行包含 $m$ 个方格。玩家的任务就是需要对这 $n \\times m$ 个方格进行像素填充，填充颜色只有黑色或白色两种。有些方格中会出现一个整数数字 $x(0 \\leq x \\leq 9)$，这表示当前方格加上周围八个方向上相邻的方格（分别是上方、下方、左方、右方、左上方、右上方、左下方、右下方）共九个方格内有且仅有 $x$ 个方格需要用黑色填充。\n\n玩家需要在满足所有数字约束下对网格进行像素填充，请你帮助小蓝来完成。题目保证所有数据都有解并且解是唯一的。", "inputFormat": "输入的第一行包含两个整数 $n,m$，用一个空格分隔，表示棋盘大小。\n\n接下来 $n$ 行，每行包含 $m$ 个字符，表示棋盘布局。字符可能是数字 $0 \\sim 9$，这表示网格上的数字；字符还有可能是下划线（$\\text{ASCII}$ 码为 $95$），表示一个不带有数字的普通网格。", "outputFormat": "输出 $n$ 行，每行包含 $m$ 个字符，表示答案。如果网格填充白色则用字符 $0$ 表示，如果网格填充黑色则用字符 $1$ 表示。", "hint": "#### 【样例说明】\n\n![image](https://cdn.luogu.com.cn/upload/image_hosting/v8u2zzne.png)\n\n上图左是样例数据对应的棋盘布局，上图右是此局游戏的解。例如第 $3$ 行第 $1$ 列处的方格中有一个数字 $3$，它周围有且仅有 $3$ 个格子被黑色填充，分别是第 $3$ 行第 $2$ 列、第 $4$ 行第 $1$ 列和第 $4$ 行第 $2$ 列的方格。\n\n#### 【评测用例规模与约定】\n\n对于 $50 \\%$ 的评测用例，$1 \\leq n,m \\leq 5$；\n\n对于所有评测用例，$1 \\leq n,m \\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P9238", "type": "P", "difficulty": 6, "samples": [["7", "6"], ["1131796", "688042"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2023", "O2优化", "素数判断,质数,筛法", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 A] 翻转硬币", "background": "", "description": "给定 $n$ 个按顺序摆好的硬币，一开始只有第 $1$ 个硬币朝下，其他硬币均朝上。你每次操作可以选择任何一个整数 $i$ 并将所有满足 $j \\bmod i=0$ 的位置 $j$ 的硬币翻转。\n\n求最少需要多少次操作可以让所有硬币都朝上。", "inputFormat": "输入一行包含一个整数 $n$。", "outputFormat": "输出一行包含一个整数表示最少需要的操作次数。", "hint": "#### 【评测用例规模与约定】\n\n对于 $30 \\%$ 的评测用例，$n \\leq 5 \\times 10^6$；\n\n对于 $70 \\%$ 的评测用例，$n \\leq 10^9$；\n\n对于所有评测用例，$1 \\leq n \\leq 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 A] 翻转硬币", "background": "", "description": "给定 $n$ 个按顺序摆好的硬币，一开始只有第 $1$ 个硬币朝下，其他硬币均朝上。你每次操作可以选择任何一个整数 $i$ 并将所有满足 $j \\bmod i=0$ 的位置 $j$ 的硬币翻转。\n\n求最少需要多少次操作可以让所有硬币都朝上。", "inputFormat": "输入一行包含一个整数 $n$。", "outputFormat": "输出一行包含一个整数表示最少需要的操作次数。", "hint": "#### 【评测用例规模与约定】\n\n对于 $30 \\%$ 的评测用例，$n \\leq 5 \\times 10^6$；\n\n对于 $70 \\%$ 的评测用例，$n \\leq 10^9$；\n\n对于所有评测用例，$1 \\leq n \\leq 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P9239", "type": "P", "difficulty": 2, "samples": [], "limits": {"time": [1000, 1000], "memory": [524288, 524288]}, "tags": ["模拟", "2023", "提交答案", "枚举", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 B] 填空问题", "background": "", "description": "## 试题 A：日期统计\n\n### 【问题描述】\n\n小蓝现在有一个长度为 $100$ 的数组，数组中的每个元素的值都在 $0$ 到 $9$ 的范围之内。数组中的元素从左至右如下所示:\n\n```\n5 6 8 6 9 1 6 1 2 4 9 1 9 8 2 3 6 4 7 7 5 9 5 0 3 8 7 5 8 1 5 8 6 1 8 3 0 3 7 9 2 7 0 5 8 8 5 7 0 9 9 1 9 4 4 6 8 6 3 3 8 5 1 6 3 4 6 7 0 7 8 2 7 6 8 9 5 6 5 6 1 4 0 1 0 0 9 4 8 0 9 1 2 8 5 0 2 5 3 3\n```\n现在他想要从这个数组中寻找一些满足以下条件的子序列：\n\n1. 子序列的长度为 $8$;\n\n2. 这个子序列可以按照下标顺序组成一个 `yyyymmdd` 格式的日期，并且要求这个日期是 2023 年中的某一天的日期，例如 $20230902$，$20231223$。`yyyy` 表示年份，`mm` 表示月份，`dd` 表示天数，当月份或者天数的长度只有一位时需要一个前导零补充。\n\n请你帮小蓝计算下按上述条件一共能找到多少个**不同**的 2023 年的日期。对于相同的日期你只需要统计一次即可。\n\n### 【答案提交】\n\n这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n\n## 试题 B：01 串的熵\n\n### 【问题描述】\n\n对于一个长度为 $n$ 的 01 串 $S=x_{1} x_{2} x_{3} \\ldots x_{n}$，香农信息熵的定义为 $H(S)=-\\sum_{i=1}^{n} p\\left(x_{i}\\right) \\log_{2}\\left(p\\left(x_{i}\\right)\\right)$，其中 $p(0),p(1)$ 表示在这个 01 串中 0 和 1 出现的占比。\n\n比如，对于 $S=100$ 来说，信息熵 $H(S)=-\\frac{1}{3}\\log _{2}\\left(\\frac{1}{3}\\right)-\\frac{2}{3} \\log _{2}\\left(\\frac{2}{3}\\right)-\\frac{2}{3} \\log _{2}\\left(\\frac{2}{3}\\right)=1.3083$。对于一个长度为 $23333333$ 的 01 串，如果其信息熵为 $11625907.5798$，且 0 出现次数比 1 少，那么这个 01 串中 0 出现了多少次？\n\n### 【答案提交】\n\n这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。 ", "inputFormat": "输入格式输入一个大写字母，表示第几个问题。", "outputFormat": "根据所输入的问题编号，输出对应问题的答案。", "hint": "答题模板，可供参考。\n\n```cpp\n#include<iostream>\nusing namespace std;\nint main() {\n    string ans [] = {\n        \"The answer of task A\", // 双引号中替换为 A 题的答案\n        \"The answer of task B\", // 双引号中替换为 B 题的答案\n    };\n    char T;\n    cin >> T;\n    cout << ans[T - 'A'] << endl;\n    return 0;\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 B] 填空问题", "background": "", "description": "## 试题 A：日期统计\n\n### 【问题描述】\n\n小蓝现在有一个长度为 $100$ 的数组，数组中的每个元素的值都在 $0$ 到 $9$ 的范围之内。数组中的元素从左至右如下所示:\n\n```\n5 6 8 6 9 1 6 1 2 4 9 1 9 8 2 3 6 4 7 7 5 9 5 0 3 8 7 5 8 1 5 8 6 1 8 3 0 3 7 9 2 7 0 5 8 8 5 7 0 9 9 1 9 4 4 6 8 6 3 3 8 5 1 6 3 4 6 7 0 7 8 2 7 6 8 9 5 6 5 6 1 4 0 1 0 0 9 4 8 0 9 1 2 8 5 0 2 5 3 3\n```\n现在他想要从这个数组中寻找一些满足以下条件的子序列：\n\n1. 子序列的长度为 $8$;\n\n2. 这个子序列可以按照下标顺序组成一个 `yyyymmdd` 格式的日期，并且要求这个日期是 2023 年中的某一天的日期，例如 $20230902$，$20231223$。`yyyy` 表示年份，`mm` 表示月份，`dd` 表示天数，当月份或者天数的长度只有一位时需要一个前导零补充。\n\n请你帮小蓝计算下按上述条件一共能找到多少个**不同**的 2023 年的日期。对于相同的日期你只需要统计一次即可。\n\n### 【答案提交】\n\n这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。\n\n## 试题 B：01 串的熵\n\n### 【问题描述】\n\n对于一个长度为 $n$ 的 01 串 $S=x_{1} x_{2} x_{3} \\ldots x_{n}$，香农信息熵的定义为 $H(S)=-\\sum_{i=1}^{n} p\\left(x_{i}\\right) \\log_{2}\\left(p\\left(x_{i}\\right)\\right)$，其中 $p(0),p(1)$ 表示在这个 01 串中 0 和 1 出现的占比。\n\n比如，对于 $S=100$ 来说，信息熵 $H(S)=-\\frac{1}{3}\\log _{2}\\left(\\frac{1}{3}\\right)-\\frac{2}{3} \\log _{2}\\left(\\frac{2}{3}\\right)-\\frac{2}{3} \\log _{2}\\left(\\frac{2}{3}\\right)=1.3083$。对于一个长度为 $23333333$ 的 01 串，如果其信息熵为 $11625907.5798$，且 0 出现次数比 1 少，那么这个 01 串中 0 出现了多少次？\n\n### 【答案提交】\n\n这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。 ", "inputFormat": "输入格式输入一个大写字母，表示第几个问题。", "outputFormat": "根据所输入的问题编号，输出对应问题的答案。", "hint": "答题模板，可供参考。\n\n```cpp\n#include<iostream>\nusing namespace std;\nint main() {\n    string ans [] = {\n        \"The answer of task A\", // 双引号中替换为 A 题的答案\n        \"The answer of task B\", // 双引号中替换为 B 题的答案\n    };\n    char T;\n    cin >> T;\n    cout << ans[T - 'A'] << endl;\n    return 0;\n}\n```", "locale": "zh-CN"}}}
{"pid": "P9240", "type": "P", "difficulty": 2, "samples": [["3\n75 3\n53 2\n59 2", "20 25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2023", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 B] 冶炼金属", "background": "", "description": "小蓝有一个神奇的炉子用于将普通金属 O 冶炼成为一种特殊金属 X。这个炉子有一个称作转换率的属性 $V$，$V$ 是一个正整数，这意味着消耗 $V$ 个普通金属 O 恰好可以冶炼出一个特殊金属 X，当普通金属 O 的数目不足 $V$ 时，无法继续冶炼。\n\n现在给出了 $N$ 条冶炼记录，每条记录中包含两个整数 $A$ 和 $B$，这表示本次投入了 $A$ 个普通金属 O，最终冶炼出了 $B$ 个特殊金属 X。每条记录都是独立的，这意味着上一次没消耗完的普通金属 O 不会累加到下一次的冶炼当中。\n\n根据这 $N$ 条冶炼记录，请你推测出转换率 $V$ 的最小值和最大值分别可能是多少，题目保证评测数据不存在无解的情况。\n", "inputFormat": "第一行一个整数 $N$，表示冶炼记录的数目。\n\n接下来输入 $N$ 行，每行两个整数 $A,B$，含义如题目所述。", "outputFormat": "输出两个整数，分别表示 $V$ 可能的最小值和最大值，中间用空格分开。\n", "hint": "**【样例说明】**\n\n当 $V=20$ 时，有：$\\left\\lfloor\\frac{75}{20}\\right\\rfloor=3,\\left\\lfloor\\frac{53}{20}\\right\\rfloor=2,\\left\\lfloor\\frac{59}{20}\\right\\rfloor=2$，可以看到符合所有冶炼记录。\n\n当 $V=25$ 时，有：$\\left\\lfloor\\frac{75}{25}\\right\\rfloor=3,\\left\\lfloor\\frac{53}{25}\\right\\rfloor=2,\\left\\lfloor\\frac{59}{25}\\right\\rfloor=2$，可以看到符合所有冶炼记录。\n\n且再也找不到比 $20$ 更小或者比 $25$ 更大的符合条件的 $V$ 值了。\n\n**【评测用例规模与约定】**\n\n对于 $30 \\%$ 的评测用例，$1 \\leq N \\leq 10^{2}$。\n\n对于 $60 \\%$ 的评测用例，$1 \\leq N \\leq 10^{3}$。\n\n对于 $100 \\%$ 的评测用例，$1 \\leq N \\leq 10^{4}$，$1 \\leq B \\leq A \\leq 10^{9}$。 \n\n蓝桥杯 2023 省赛 B 组 C 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 B] 冶炼金属", "background": "", "description": "小蓝有一个神奇的炉子用于将普通金属 O 冶炼成为一种特殊金属 X。这个炉子有一个称作转换率的属性 $V$，$V$ 是一个正整数，这意味着消耗 $V$ 个普通金属 O 恰好可以冶炼出一个特殊金属 X，当普通金属 O 的数目不足 $V$ 时，无法继续冶炼。\n\n现在给出了 $N$ 条冶炼记录，每条记录中包含两个整数 $A$ 和 $B$，这表示本次投入了 $A$ 个普通金属 O，最终冶炼出了 $B$ 个特殊金属 X。每条记录都是独立的，这意味着上一次没消耗完的普通金属 O 不会累加到下一次的冶炼当中。\n\n根据这 $N$ 条冶炼记录，请你推测出转换率 $V$ 的最小值和最大值分别可能是多少，题目保证评测数据不存在无解的情况。\n", "inputFormat": "第一行一个整数 $N$，表示冶炼记录的数目。\n\n接下来输入 $N$ 行，每行两个整数 $A,B$，含义如题目所述。", "outputFormat": "输出两个整数，分别表示 $V$ 可能的最小值和最大值，中间用空格分开。\n", "hint": "**【样例说明】**\n\n当 $V=20$ 时，有：$\\left\\lfloor\\frac{75}{20}\\right\\rfloor=3,\\left\\lfloor\\frac{53}{20}\\right\\rfloor=2,\\left\\lfloor\\frac{59}{20}\\right\\rfloor=2$，可以看到符合所有冶炼记录。\n\n当 $V=25$ 时，有：$\\left\\lfloor\\frac{75}{25}\\right\\rfloor=3,\\left\\lfloor\\frac{53}{25}\\right\\rfloor=2,\\left\\lfloor\\frac{59}{25}\\right\\rfloor=2$，可以看到符合所有冶炼记录。\n\n且再也找不到比 $20$ 更小或者比 $25$ 更大的符合条件的 $V$ 值了。\n\n**【评测用例规模与约定】**\n\n对于 $30 \\%$ 的评测用例，$1 \\leq N \\leq 10^{2}$。\n\n对于 $60 \\%$ 的评测用例，$1 \\leq N \\leq 10^{3}$。\n\n对于 $100 \\%$ 的评测用例，$1 \\leq N \\leq 10^{4}$，$1 \\leq B \\leq A \\leq 10^{9}$。 \n\n蓝桥杯 2023 省赛 B 组 C 题。", "locale": "zh-CN"}}}
{"pid": "P9241", "type": "P", "difficulty": 3, "samples": [["2\n3\n0 100 10\n10 10 10\n0 2 20\n3\n0 10 20\n10 10 20\n20 10 20", "YES\nNO"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "2023", "枚举", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 B] 飞机降落", "background": "", "description": "$N$ 架飞机准备降落到某个只有一条跑道的机场。其中第 $i$ 架飞机在 $T_{i}$ 时刻到达机场上空，到达时它的剩余油料还可以继续盘旋 $D_{i}$ 个单位时间，即它最早可以于 $T_{i}$ 时刻开始降落，最晩可以于 $T_{i}+D_{i}$ 时刻开始降落。降落过程需要 $L_{i}$ 个单位时间。\n\n一架飞机降落完毕时，另一架飞机可以立即在同一时刻开始降落，但是不能在前一架飞机完成降落前开始降落。\n\n请你判断 $N$ 架飞机是否可以全部安全降落。", "inputFormat": "输入包含多组数据。\n\n第一行包含一个整数 $T$，代表测试数据的组数。\n\n对于每组数据，第一行包含一个整数 $N$。\n\n以下 $N$ 行，每行包含三个整数 $T_{i},D_{i},L_{i}$。", "outputFormat": "对于每组数据，输出 `YES` 或者 `NO`，代表是否可以全部安全降落。\n", "hint": "**【样例说明】**\n\n对于第一组数据，可以安排第 3 架飞机于 0 时刻开始降落，20 时刻完成降落。安排第 2 架飞机于 20 时刻开始降落，30 时刻完成降落。安排第 1 架飞机于 30 时刻开始降落，40 时刻完成降落。\n\n对于第二组数据，无论如何安排，都会有飞机不能及时降落。\n\n**【评测用例规模与约定】**\n\n对于 $30 \\%$ 的数据，$N \\leq 2$。\n\n对于 $100 \\%$ 的数据，$1 \\leq T \\leq 10$，$1 \\leq N \\leq 10$，$0 \\leq T_{i},D_{i},L_{i} \\leq 10^{5}$。 \n\n蓝桥杯 2023 省赛 B 组 D 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 B] 飞机降落", "background": "", "description": "$N$ 架飞机准备降落到某个只有一条跑道的机场。其中第 $i$ 架飞机在 $T_{i}$ 时刻到达机场上空，到达时它的剩余油料还可以继续盘旋 $D_{i}$ 个单位时间，即它最早可以于 $T_{i}$ 时刻开始降落，最晩可以于 $T_{i}+D_{i}$ 时刻开始降落。降落过程需要 $L_{i}$ 个单位时间。\n\n一架飞机降落完毕时，另一架飞机可以立即在同一时刻开始降落，但是不能在前一架飞机完成降落前开始降落。\n\n请你判断 $N$ 架飞机是否可以全部安全降落。", "inputFormat": "输入包含多组数据。\n\n第一行包含一个整数 $T$，代表测试数据的组数。\n\n对于每组数据，第一行包含一个整数 $N$。\n\n以下 $N$ 行，每行包含三个整数 $T_{i},D_{i},L_{i}$。", "outputFormat": "对于每组数据，输出 `YES` 或者 `NO`，代表是否可以全部安全降落。\n", "hint": "**【样例说明】**\n\n对于第一组数据，可以安排第 3 架飞机于 0 时刻开始降落，20 时刻完成降落。安排第 2 架飞机于 20 时刻开始降落，30 时刻完成降落。安排第 1 架飞机于 30 时刻开始降落，40 时刻完成降落。\n\n对于第二组数据，无论如何安排，都会有飞机不能及时降落。\n\n**【评测用例规模与约定】**\n\n对于 $30 \\%$ 的数据，$N \\leq 2$。\n\n对于 $100 \\%$ 的数据，$1 \\leq T \\leq 10$，$1 \\leq N \\leq 10$，$0 \\leq T_{i},D_{i},L_{i} \\leq 10^{5}$。 \n\n蓝桥杯 2023 省赛 B 组 D 题。", "locale": "zh-CN"}}}
{"pid": "P9242", "type": "P", "difficulty": 3, "samples": [["5\n11 121 22 12 2023", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2023", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 B] 接龙数列", "background": "", "description": "对于一个长度为 $K$ 的整数数列：$A_{1},A_{2},\\ldots,A_{K}$，我们称之为接龙数列当且仅当 $A_{i}$ 的首位数字恰好等于 $A_{i-1}$ 的末位数字（$2 \\leq i \\leq K$）。\n\n例如 $12,23,35,56,61,11$ 是接龙数列；$12,23,34,56$ 不是接龙数列，因为 $56$ 的首位数字不等于 $34$ 的末位数字。所有长度为 $1$ 的整数数列都是接龙数列。\n\n现在给定一个长度为 $N$ 的数列 $A_{1},A_{2},\\ldots,A_{N}$，请你计算最少从中删除多少 个数，可以使剩下的序列是接龙序列？", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个整数 $A_{1},A_{2},\\ldots,A_{N}$。", "outputFormat": "一个整数代表答案。", "hint": "**【样例说明】**\n\n删除 $22$，剩余 $11,121,12,2023$ 是接龙数列。 \n\n**【评测用例规模与约定】**\n\n对于 $20 \\%$ 的数据，$1 \\leq N \\leq 20$。\n\n对于 $50 \\%$ 的数据，$1 \\leq N \\leq 10^4$。\n\n对于 $100 \\%$ 的数据，$1 \\leq N \\leq 10^{5}$，$1 \\leq A_{i} \\leq 10^{9}$。所有 $A_{i}$ 保证不包含前导 0。\n\n蓝桥杯 2023 省赛 B 组 E 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 B] 接龙数列", "background": "", "description": "对于一个长度为 $K$ 的整数数列：$A_{1},A_{2},\\ldots,A_{K}$，我们称之为接龙数列当且仅当 $A_{i}$ 的首位数字恰好等于 $A_{i-1}$ 的末位数字（$2 \\leq i \\leq K$）。\n\n例如 $12,23,35,56,61,11$ 是接龙数列；$12,23,34,56$ 不是接龙数列，因为 $56$ 的首位数字不等于 $34$ 的末位数字。所有长度为 $1$ 的整数数列都是接龙数列。\n\n现在给定一个长度为 $N$ 的数列 $A_{1},A_{2},\\ldots,A_{N}$，请你计算最少从中删除多少 个数，可以使剩下的序列是接龙序列？", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个整数 $A_{1},A_{2},\\ldots,A_{N}$。", "outputFormat": "一个整数代表答案。", "hint": "**【样例说明】**\n\n删除 $22$，剩余 $11,121,12,2023$ 是接龙数列。 \n\n**【评测用例规模与约定】**\n\n对于 $20 \\%$ 的数据，$1 \\leq N \\leq 20$。\n\n对于 $50 \\%$ 的数据，$1 \\leq N \\leq 10^4$。\n\n对于 $100 \\%$ 的数据，$1 \\leq N \\leq 10^{5}$，$1 \\leq A_{i} \\leq 10^{9}$。所有 $A_{i}$ 保证不包含前导 0。\n\n蓝桥杯 2023 省赛 B 组 E 题。", "locale": "zh-CN"}}}
{"pid": "P9243", "type": "P", "difficulty": 3, "samples": [["2\n5 5\n01111\n11001\n10101\n10001\n11111\n5 6\n111111\n100001\n010101\n100001\n111111\n", "1\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["搜索", "2023", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 B] 岛屿个数", "background": "", "description": "小蓝得到了一副大小为 $M \\times N$ 的格子地图，可以将其视作一个只包含字符 `0`（代表海水）和 `1`（代表陆地）的二维数组，地图之外可以视作全部是海水，每个岛屿由在上/下/左/右四个方向上相邻的 `1` 相连接而形成。\n\n在岛屿 $A$ 所占据的格子中，如果可以从中选出 $k$ 个不同的格子，使得他们的坐标能够组成一个这样的排列：$\\left(x_{0},y_{0}\\right),\\left(x_{1},y_{1}\\right),\\ldots,\\left(x_{k-1},y_{k-1}\\right)$，其中 $\\left(x_{(i+1) \\bmod k},y_{(i+1) \\bmod k}\\right)$ 是由 $\\left(x_{i},y_{i}\\right)$ 通过上/下/左/右移动一次得来的（$0 \\leq i \\leq k-1$），此时这 $k$ 个格子就构成了一个「环」。如果另一个岛屿 $B$ 所占据的格子全部位于这个「环」内部，此时我们将岛屿 $B$ 视作是岛屿 $A$ 的子岛屿。若 $B$ 是 $A$ 的子岛屿，$C$ 又是 $B$ 的子岛屿，那 $C$ 也是 $A$ 的子岛屿。\n\n请问这个地图上共有多少个岛屿？在进行统计时不需要统计子岛屿的数目。", "inputFormat": "第一行一个整数 $T$，表示有 $T$ 组测试数据。\n\n接下来输入 $T$ 组数据。对于每组数据，第一行包含两个用空格分隔的整数 $M, N$ 表示地图大小；接下来输入 $M$ 行，每行包含 $N$ 个字符，字符只可能是 `0` 或 `1`。\n", "outputFormat": "对于每组数据，输出一行，包含一个整数表示答案。", "hint": "**【样例说明】**\n\n对于第一组数据，包含两个岛屿，下面用不同的数字进行了区分：\n```\n01111\n11001\n10201\n10001\n11111\n```\n岛屿 2 在岛屿 1 的「环」内部，所以岛屿 2 是岛屿 1 的子岛屿，答案为 $1$。\n\n对于第二组数据，包含三个岛屿，下面用不同的数字进行了区分：\n```\n111111\n100001\n020301\n100001\n111111\n```\n注意岛屿 3 并不是岛屿 1 或者岛屿 2 的子岛屿，因为岛屿 1 和岛屿 2 中均没有「环」。\n\n**【评测用例规模与约定】**\n\n对于 $30 \\%$ 的评测用例，$1 \\leq M,N \\leq 10$。\n\n对于 $100 \\%$ 的评测用例，$1 \\leq T \\leq 10$，$1 \\leq M,N \\leq 50$ 。  \n\n蓝桥杯 2023 省赛 B 组 F 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 B] 岛屿个数", "background": "", "description": "小蓝得到了一副大小为 $M \\times N$ 的格子地图，可以将其视作一个只包含字符 `0`（代表海水）和 `1`（代表陆地）的二维数组，地图之外可以视作全部是海水，每个岛屿由在上/下/左/右四个方向上相邻的 `1` 相连接而形成。\n\n在岛屿 $A$ 所占据的格子中，如果可以从中选出 $k$ 个不同的格子，使得他们的坐标能够组成一个这样的排列：$\\left(x_{0},y_{0}\\right),\\left(x_{1},y_{1}\\right),\\ldots,\\left(x_{k-1},y_{k-1}\\right)$，其中 $\\left(x_{(i+1) \\bmod k},y_{(i+1) \\bmod k}\\right)$ 是由 $\\left(x_{i},y_{i}\\right)$ 通过上/下/左/右移动一次得来的（$0 \\leq i \\leq k-1$），此时这 $k$ 个格子就构成了一个「环」。如果另一个岛屿 $B$ 所占据的格子全部位于这个「环」内部，此时我们将岛屿 $B$ 视作是岛屿 $A$ 的子岛屿。若 $B$ 是 $A$ 的子岛屿，$C$ 又是 $B$ 的子岛屿，那 $C$ 也是 $A$ 的子岛屿。\n\n请问这个地图上共有多少个岛屿？在进行统计时不需要统计子岛屿的数目。", "inputFormat": "第一行一个整数 $T$，表示有 $T$ 组测试数据。\n\n接下来输入 $T$ 组数据。对于每组数据，第一行包含两个用空格分隔的整数 $M, N$ 表示地图大小；接下来输入 $M$ 行，每行包含 $N$ 个字符，字符只可能是 `0` 或 `1`。\n", "outputFormat": "对于每组数据，输出一行，包含一个整数表示答案。", "hint": "**【样例说明】**\n\n对于第一组数据，包含两个岛屿，下面用不同的数字进行了区分：\n```\n01111\n11001\n10201\n10001\n11111\n```\n岛屿 2 在岛屿 1 的「环」内部，所以岛屿 2 是岛屿 1 的子岛屿，答案为 $1$。\n\n对于第二组数据，包含三个岛屿，下面用不同的数字进行了区分：\n```\n111111\n100001\n020301\n100001\n111111\n```\n注意岛屿 3 并不是岛屿 1 或者岛屿 2 的子岛屿，因为岛屿 1 和岛屿 2 中均没有「环」。\n\n**【评测用例规模与约定】**\n\n对于 $30 \\%$ 的评测用例，$1 \\leq M,N \\leq 10$。\n\n对于 $100 \\%$ 的评测用例，$1 \\leq T \\leq 10$，$1 \\leq M,N \\leq 50$ 。  \n\n蓝桥杯 2023 省赛 B 组 F 题。", "locale": "zh-CN"}}}
{"pid": "P9244", "type": "P", "difficulty": 2, "samples": [["4\nabababdb a b", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "枚举", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 B] 子串简写", "background": "", "description": "程序猿圈子里正在流行一种很新的简写方法：对于一个字符串，只保留首尾字符，将首尾字符之间的所有字符用这部分的长度代替。例如 `internationalization` 简写成 `i18n`，`Kubernetes`（注意连字符不是字符串的一部分）简写成 `K8s`，`Lanqiao` 简写成 `L5o` 等。\n\n在本题中，我们规定长度大于等于 $K$ 的字符串都可以采用这种简写方法(长度小于 $K$ 的字符串不配使用这种简写)。\n\n给定一个字符串 $S$ 和两个字符 $c_{1}$ 和 $c_{2}$，请你计算 $S$ 有多少个以 $c_{1}$ 开头 $c_{2}$ 结尾的子串可以采用这种简写？", "inputFormat": "第一行包含一个整数 $K$。\n\n第二行包含一个字符串 $S$ 和两个字符 $c_{1}$ 和 $c_{2}$。", "outputFormat": "一个整数代表答案。", "hint": "**【样例说明】**\n\n符合条件的子串如下所示，中括号内是该子串：\n```plain\n[abab]abdb\n[ababab]db\n[abababdb]\nab[abab]db\nab[ababdb]\nabab[abdb]\n```\n\n**【评测用例规模与约定】**\n\n对于 $20 \\%$ 的数据，$2 \\leq K \\leq|S| \\leq 10^4$。\n\n对于 $100 \\%$ 的数据，$2 \\leq K \\leq|S| \\leq 5 \\times 10^{5}$。$S$ 只包含小写字母。$c_{1}$ 和 $c_{2}$ 都是小写字母。\n\n$|S|$ 代表字符串 $S$ 的长度。 \n\n蓝桥杯 2023 省赛 B 组 G 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 B] 子串简写", "background": "", "description": "程序猿圈子里正在流行一种很新的简写方法：对于一个字符串，只保留首尾字符，将首尾字符之间的所有字符用这部分的长度代替。例如 `internationalization` 简写成 `i18n`，`Kubernetes`（注意连字符不是字符串的一部分）简写成 `K8s`，`Lanqiao` 简写成 `L5o` 等。\n\n在本题中，我们规定长度大于等于 $K$ 的字符串都可以采用这种简写方法(长度小于 $K$ 的字符串不配使用这种简写)。\n\n给定一个字符串 $S$ 和两个字符 $c_{1}$ 和 $c_{2}$，请你计算 $S$ 有多少个以 $c_{1}$ 开头 $c_{2}$ 结尾的子串可以采用这种简写？", "inputFormat": "第一行包含一个整数 $K$。\n\n第二行包含一个字符串 $S$ 和两个字符 $c_{1}$ 和 $c_{2}$。", "outputFormat": "一个整数代表答案。", "hint": "**【样例说明】**\n\n符合条件的子串如下所示，中括号内是该子串：\n```plain\n[abab]abdb\n[ababab]db\n[abababdb]\nab[abab]db\nab[ababdb]\nabab[abdb]\n```\n\n**【评测用例规模与约定】**\n\n对于 $20 \\%$ 的数据，$2 \\leq K \\leq|S| \\leq 10^4$。\n\n对于 $100 \\%$ 的数据，$2 \\leq K \\leq|S| \\leq 5 \\times 10^{5}$。$S$ 只包含小写字母。$c_{1}$ 和 $c_{2}$ 都是小写字母。\n\n$|S|$ 代表字符串 $S$ 的长度。 \n\n蓝桥杯 2023 省赛 B 组 G 题。", "locale": "zh-CN"}}}
{"pid": "P9245", "type": "P", "difficulty": 4, "samples": [["6 4\n1 2 1\n1 3 1\n3 4 2\n3 5 2\n4 6 3\n2 6 5 1", "10 7 13 14\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "最近公共祖先 LCA", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 B] 景区导游", "background": "", "description": "某景区一共有 $N$ 个景点，编号 $1$ 到 $N$。景点之间共有 $N-1$ 条双向的摆渡车线路相连，形成一棵树状结构。在景点之间往返只能通过这些摆渡车进行，需要花费一定的时间。\n\n小明是这个景区的资深导游，他每天都要按固定顺序带客人游览其中 $K$ 个景点：$A_{1},A_{2},\\ldots,A_{K}$。今天由于时间原因，小明决定跳过其中一个景点，只带游客按顺序游览其中 $K-1$ 个景点。具体来说，如果小明选择跳过 $A_{i}$，那么他会按顺序带游客游览 $A_{1},A_{2},\\ldots,A_{i-1},A_{i+1},\\ldots,A_{K}(1 \\leq i \\leq K)$。\n\n请你对任意一个 $A_{i}$，计算如果跳过这个景点，小明需要花费多少时间在景点之间的摆渡车上？", "inputFormat": "第一行包含 $2$ 个整数 $N$ 和 $K$。\n\n以下 $N-1$ 行，每行包含 $3$ 个整数 $u，v, t$，代表景点 $u$ 和 $v$ 之间有摆渡车线路，花费 $t$ 个单位时间。\n\n最后一行包含 $K$ 个整数 $A_{1},A_{2},\\ldots,A_{K}$ 代表原定游览线路。", "outputFormat": "输出 $K$ 个整数，其中第 $i$ 个代表跳过 $A_{i}$ 之后，花费在摆渡车上的时间。", "hint": "**【样例说明】**\n\n原路线是 $2 \\rightarrow 6 \\rightarrow 5 \\rightarrow 1$。\n\n当跳过 $2$ 时，路线是 $6 \\rightarrow 5 \\rightarrow 1$，其中 $6 \\rightarrow 5$ 花费时间 $3+2+2=7$，$5 \\rightarrow 1$ 花费时间 $2+1=3$，总时间花费 $10$。\n\n当跳过 $6$ 时，路线是 $2 \\rightarrow 5 \\rightarrow 1$，其中 $2 \\rightarrow 5$ 花费时间 $1+1+2=4$，$5 \\rightarrow 1$ 花费时间 $2+1=3$，总时间花费 $7$。\n\n当跳过 $5$ 时，路线是 $2 \\rightarrow 6 \\rightarrow 1$，其中 $2 \\rightarrow 6$ 花费时间 $1+1+2+3=7$，$6 \\rightarrow 1$ 花费时间 $3+2+1=6$ ，总时间花费 $13$。\n\n当跳过 $1$ 时，路线时 $2 \\rightarrow 6 \\rightarrow 5$，其中 $2 \\rightarrow 6$ 花费时间 $1+1+2+3=7$，$6 \\rightarrow 5$ 花费时间 $3+2+2=7$ ，总时间花费 $14$。\n\n\n**【评测用例规模与约定】**\n\n对于 $20 \\%$ 的数据，$2 \\leq K \\leq N \\leq 100$。\n\n对于 $40 \\%$ 的数据，$2 \\leq K \\leq N \\leq 10^{4}$。\n\n对于 $100 \\%$ 的数据，$2 \\leq K \\leq N \\leq 10^{5}$，$1 \\leq u,v,A_{i} \\leq N$，$1 \\leq t \\leq 10^{5}$。保证 $A_{i}$ 两两不同。 \n\n蓝桥杯 2023 省赛 B 组 I 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 B] 景区导游", "background": "", "description": "某景区一共有 $N$ 个景点，编号 $1$ 到 $N$。景点之间共有 $N-1$ 条双向的摆渡车线路相连，形成一棵树状结构。在景点之间往返只能通过这些摆渡车进行，需要花费一定的时间。\n\n小明是这个景区的资深导游，他每天都要按固定顺序带客人游览其中 $K$ 个景点：$A_{1},A_{2},\\ldots,A_{K}$。今天由于时间原因，小明决定跳过其中一个景点，只带游客按顺序游览其中 $K-1$ 个景点。具体来说，如果小明选择跳过 $A_{i}$，那么他会按顺序带游客游览 $A_{1},A_{2},\\ldots,A_{i-1},A_{i+1},\\ldots,A_{K}(1 \\leq i \\leq K)$。\n\n请你对任意一个 $A_{i}$，计算如果跳过这个景点，小明需要花费多少时间在景点之间的摆渡车上？", "inputFormat": "第一行包含 $2$ 个整数 $N$ 和 $K$。\n\n以下 $N-1$ 行，每行包含 $3$ 个整数 $u，v, t$，代表景点 $u$ 和 $v$ 之间有摆渡车线路，花费 $t$ 个单位时间。\n\n最后一行包含 $K$ 个整数 $A_{1},A_{2},\\ldots,A_{K}$ 代表原定游览线路。", "outputFormat": "输出 $K$ 个整数，其中第 $i$ 个代表跳过 $A_{i}$ 之后，花费在摆渡车上的时间。", "hint": "**【样例说明】**\n\n原路线是 $2 \\rightarrow 6 \\rightarrow 5 \\rightarrow 1$。\n\n当跳过 $2$ 时，路线是 $6 \\rightarrow 5 \\rightarrow 1$，其中 $6 \\rightarrow 5$ 花费时间 $3+2+2=7$，$5 \\rightarrow 1$ 花费时间 $2+1=3$，总时间花费 $10$。\n\n当跳过 $6$ 时，路线是 $2 \\rightarrow 5 \\rightarrow 1$，其中 $2 \\rightarrow 5$ 花费时间 $1+1+2=4$，$5 \\rightarrow 1$ 花费时间 $2+1=3$，总时间花费 $7$。\n\n当跳过 $5$ 时，路线是 $2 \\rightarrow 6 \\rightarrow 1$，其中 $2 \\rightarrow 6$ 花费时间 $1+1+2+3=7$，$6 \\rightarrow 1$ 花费时间 $3+2+1=6$ ，总时间花费 $13$。\n\n当跳过 $1$ 时，路线时 $2 \\rightarrow 6 \\rightarrow 5$，其中 $2 \\rightarrow 6$ 花费时间 $1+1+2+3=7$，$6 \\rightarrow 5$ 花费时间 $3+2+2=7$ ，总时间花费 $14$。\n\n\n**【评测用例规模与约定】**\n\n对于 $20 \\%$ 的数据，$2 \\leq K \\leq N \\leq 100$。\n\n对于 $40 \\%$ 的数据，$2 \\leq K \\leq N \\leq 10^{4}$。\n\n对于 $100 \\%$ 的数据，$2 \\leq K \\leq N \\leq 10^{5}$，$1 \\leq u,v,A_{i} \\leq N$，$1 \\leq t \\leq 10^{5}$。保证 $A_{i}$ 两两不同。 \n\n蓝桥杯 2023 省赛 B 组 I 题。", "locale": "zh-CN"}}}
{"pid": "P9246", "type": "P", "difficulty": 4, "samples": [["6 2\n1 2\n2 3\n4 3\n2 5\n6 5\n3 6\n4 5\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "最近公共祖先 LCA", "蓝桥杯省赛"], "title": "[蓝桥杯 2023 省 B] 砍树", "background": "", "description": "给定一棵由 $n$ 个结点组成的树以及 $m$ 个不重复的无序数对 $\\left(a_{1},b_{1}\\right),\\left(a_{2},b_{2}\\right),\\ldots,\\left(a_{m},b_{m}\\right)$，其中 $a_{i}$ 互不相同，$b_{i}$ 互不相同，$a_{i} \\neq b_{j}(1 \\leq i,j \\leq m)$。\n\n小明想知道是否能够选择一条树上的边砍断，使得对于每个 $\\left(a_{i},b_{i}\\right)$ 满足 $a_{i}$ 和 $b_{i}$ 不连通，如果可以则输出应该断掉的边的编号 (编号按输入顺序从 $1$ 开始)，否则输出 `-1`。\n", "inputFormat": "输入共 $n+m$ 行，第一行为两个正整数 $n,m$。\n\n后面 $n-1$ 行，每行两个正整数 $x_{i},y_{i}$ 表示第 $i$ 条边的两个端点。\n\n后面 $m$ 行，每行两个正整数 $a_{i},b_{i}$。", "outputFormat": "一行一个整数，表示答案，如有多个答案，输出编号最大的一个。\n", "hint": "**【样例说明】**\n\n断开第 $2$ 条边后形成两个连通块：$\\{3,4\\},\\{1,2,5,6\\}$，满足 $3$ 和 $6$ 不连通，$4$ 和 $5$ 不连通。\n\n断开第 $4$ 条边后形成两个连通块：$\\{1,2,3,4\\},\\{5,6\\}$，同样满足 $3$ 和 $6$ 不连通，$4$ 和 $5$ 不连通。\n\n$4$ 编号更大，因此答案为 $4$。\n\n**【评测用例规模与约定】**\n\n对于 $30 \\%$ 的数据，保证 $1<n \\leq 10^3$。\n\n对于 $100 \\%$ 的数据，保证 $1<n \\leq 10^{5}$，$1 \\leq m \\leq \\frac{n}{2}$。\n\n蓝桥杯 2023 省赛 B 组 J 题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[蓝桥杯 2023 省 B] 砍树", "background": "", "description": "给定一棵由 $n$ 个结点组成的树以及 $m$ 个不重复的无序数对 $\\left(a_{1},b_{1}\\right),\\left(a_{2},b_{2}\\right),\\ldots,\\left(a_{m},b_{m}\\right)$，其中 $a_{i}$ 互不相同，$b_{i}$ 互不相同，$a_{i} \\neq b_{j}(1 \\leq i,j \\leq m)$。\n\n小明想知道是否能够选择一条树上的边砍断，使得对于每个 $\\left(a_{i},b_{i}\\right)$ 满足 $a_{i}$ 和 $b_{i}$ 不连通，如果可以则输出应该断掉的边的编号 (编号按输入顺序从 $1$ 开始)，否则输出 `-1`。\n", "inputFormat": "输入共 $n+m$ 行，第一行为两个正整数 $n,m$。\n\n后面 $n-1$ 行，每行两个正整数 $x_{i},y_{i}$ 表示第 $i$ 条边的两个端点。\n\n后面 $m$ 行，每行两个正整数 $a_{i},b_{i}$。", "outputFormat": "一行一个整数，表示答案，如有多个答案，输出编号最大的一个。\n", "hint": "**【样例说明】**\n\n断开第 $2$ 条边后形成两个连通块：$\\{3,4\\},\\{1,2,5,6\\}$，满足 $3$ 和 $6$ 不连通，$4$ 和 $5$ 不连通。\n\n断开第 $4$ 条边后形成两个连通块：$\\{1,2,3,4\\},\\{5,6\\}$，同样满足 $3$ 和 $6$ 不连通，$4$ 和 $5$ 不连通。\n\n$4$ 编号更大，因此答案为 $4$。\n\n**【评测用例规模与约定】**\n\n对于 $30 \\%$ 的数据，保证 $1<n \\leq 10^3$。\n\n对于 $100 \\%$ 的数据，保证 $1<n \\leq 10^{5}$，$1 \\leq m \\leq \\frac{n}{2}$。\n\n蓝桥杯 2023 省赛 B 组 J 题。", "locale": "zh-CN"}}}
{"pid": "P9247", "type": "P", "difficulty": 7, "samples": [["3 3\n1 2 3\n1 2 1\n2 3 2\n1 3 3", "1\n2\n2"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2018", "集训队互测", "O2优化", "分块"], "title": "[集训队互测 2018] 完美的队列", "background": "", "description": "小 D 有 $n$ 个 `std::queue<int>`，他把它们编号为 $1$ 到 $n$。\n\n小 D 对每个队列有不同的喜爱程度，如果有他不怎么喜欢的队列占用了太大的内存，小 D 就会不开心。\n\n具体地说，如果第 $i$ 个队列的 `size()` 大于 $a_i$，小 D 就会对这个队列一直执行 `pop()` 直到其 `size()` 小等于 $a_i$。\n\n现在这些队列都是空的，小 D 觉得太单调了，于是他决定做一些操作。\n\n每次操作都可以用 `l r x` 来描述，表示对编号在 $[l,r]$ 内的所有队列执行 `push(x)` 操作。当然，每次操作结束后，小 D 都会用之前提到的方法来避免这些队列占用太大的内存。\n\n小 D 的队列很神奇，所以他能用 $O(1)$ 的时间执行每次操作。\n\n相信大家的队列都能做到，于是小 D 把这道题出给大家送分。\n\n为了证明你确实执行了这些操作，你需要在每次操作后输出目前还在队列内的权值种数。", "inputFormat": "第一行两个正整数 $n,m$，分别表示队列个数和操作个数。\n\n第二行 $n$ 个正整数，第 $i$ 个表示 $a_i$。\n\n接下来 $m$ 行，每行三个正整数 `l r x`，其中第 $i$ 行表示第 $i$ 次操作。", "outputFormat": "输出共 $m$ 行，每行一个非负整数，表示第 $i$ 次操作结束后所有队列中的权值种数。", "hint": "### 样例解释\n\n第一次操作后，队列变成 $\\{1\\}\\{1\\}\\{\\}$，还在队列内的权值有 $1$，共 $1$ 种。\n\n第二次操作后，队列变成 $\\{1\\}\\{1,2\\}\\{2\\}$，还在队列内的权值 $1,2$，共 $2$ 种。\n\n第三次操作后，队列变成 $\\{3\\}\\{2,3\\}\\{2,3\\}$，还在队列内的权值有 $2,3$，共 $2$ 种。\n\n### 数据范围\n\n对于所有数据，$n,m,a_i,x\\leq 10^5$，$l\\leq r$。\n\n共 $20$ 个测试点，每个测试点 $5$ 分，其中第 $k$ 个测试点满足 $n,m,a_i,x\\leq 5000k$。\n\n特别地，以下几个测试点满足一些特殊性质：\n\n测试点 $5$：$a_i=1$；  \n测试点 $7$：$a_i=2$；  \n测试点 $9$：$a_i=10$；  \n测试点 $11$：$a_i\\leq 10$；  \n测试点 $13,15$：$\\sum a_i\\leq 10^6$。\n\n对于每个测试点，你需要通过满足该点数据范围及性质的所有数据才能获得该点的分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] 完美的队列", "background": "", "description": "小 D 有 $n$ 个 `std::queue<int>`，他把它们编号为 $1$ 到 $n$。\n\n小 D 对每个队列有不同的喜爱程度，如果有他不怎么喜欢的队列占用了太大的内存，小 D 就会不开心。\n\n具体地说，如果第 $i$ 个队列的 `size()` 大于 $a_i$，小 D 就会对这个队列一直执行 `pop()` 直到其 `size()` 小等于 $a_i$。\n\n现在这些队列都是空的，小 D 觉得太单调了，于是他决定做一些操作。\n\n每次操作都可以用 `l r x` 来描述，表示对编号在 $[l,r]$ 内的所有队列执行 `push(x)` 操作。当然，每次操作结束后，小 D 都会用之前提到的方法来避免这些队列占用太大的内存。\n\n小 D 的队列很神奇，所以他能用 $O(1)$ 的时间执行每次操作。\n\n相信大家的队列都能做到，于是小 D 把这道题出给大家送分。\n\n为了证明你确实执行了这些操作，你需要在每次操作后输出目前还在队列内的权值种数。", "inputFormat": "第一行两个正整数 $n,m$，分别表示队列个数和操作个数。\n\n第二行 $n$ 个正整数，第 $i$ 个表示 $a_i$。\n\n接下来 $m$ 行，每行三个正整数 `l r x`，其中第 $i$ 行表示第 $i$ 次操作。", "outputFormat": "输出共 $m$ 行，每行一个非负整数，表示第 $i$ 次操作结束后所有队列中的权值种数。", "hint": "### 样例解释\n\n第一次操作后，队列变成 $\\{1\\}\\{1\\}\\{\\}$，还在队列内的权值有 $1$，共 $1$ 种。\n\n第二次操作后，队列变成 $\\{1\\}\\{1,2\\}\\{2\\}$，还在队列内的权值 $1,2$，共 $2$ 种。\n\n第三次操作后，队列变成 $\\{3\\}\\{2,3\\}\\{2,3\\}$，还在队列内的权值有 $2,3$，共 $2$ 种。\n\n### 数据范围\n\n对于所有数据，$n,m,a_i,x\\leq 10^5$，$l\\leq r$。\n\n共 $20$ 个测试点，每个测试点 $5$ 分，其中第 $k$ 个测试点满足 $n,m,a_i,x\\leq 5000k$。\n\n特别地，以下几个测试点满足一些特殊性质：\n\n测试点 $5$：$a_i=1$；  \n测试点 $7$：$a_i=2$；  \n测试点 $9$：$a_i=10$；  \n测试点 $11$：$a_i\\leq 10$；  \n测试点 $13,15$：$\\sum a_i\\leq 10^6$。\n\n对于每个测试点，你需要通过满足该点数据范围及性质的所有数据才能获得该点的分数。", "locale": "zh-CN"}}}
{"pid": "P9248", "type": "P", "difficulty": 7, "samples": [["7 3 2 4\n1 1 2 2 1 2 2\n1 1 1 2 1 2 2\n1 2 1\n1 3 2\n1 4 2\n2 5 1\n2 6 2\n4 7 3", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "递推", "2018", "集训队互测", "多项式", "O2优化", "背包 DP"], "title": "[集训队互测 2018] 完美的集合", "background": "", "description": "小 A 有一棵 $N$ 个点的带边权的树，树的每个节点有重量 $w_i$ 和价值 $v_i$。\n\n现在小 A 要从中选出若干个节点形成一个集合 $S$，满足这些节点重量之和 $\\leq M$ 并且构成一个连通块。小 A 是一个完美主义者，因此他只会选择节点价值之和最大的那些 $S$。我们称这样的集合 $S$ 为完美的集合。\n\n现在小 $A$ 要从所有完美的集合中选出 $K$ 个，并对这 $K$ 个完美的集合分别进行测试。在这 $K$ 次测试开始前，小 A 首先需要一个点 $x$ 来放置他的测试装置，这个测试装置的最大功率为 $Max$。\n\n接下来的每次测试，小 A 会对测试对象 $S$ 中的所有点进行一次能量传输，对一个点 $y$ 进行能量传输需要的功率为 $dist(x,y)\\times v_y$，其中 $dist(x,y)$ 表示点 $x,y$ 在树上的最短路长度。因此，如果 $S$ 中存在一个点 $y$，满足 $dist(x,y)\\times v_y>Max$，测试就会失败。同时，为了保证能量传输的稳定性，测试装置所在的点 $x$ 需要在集合 $S$ 中，否则测试也会失败。\n\n现在小 A 想知道，有多少种从所有完美的集合选出 $K$ 个的方法，使得他能找到一个放置测试装置的点，来完成他的测试呢？\n\n你只需要输出方案数对 $11920928955078125$ 取模的结果。", "inputFormat": "第一行四个正整数，表示 $N,M,K,Max$。\n\n接下来一行 $N$ 个正整数，表示 $w_1,\\dots,w_N$。\n\n接下来一行 $N$ 个**非负**整数，表示 $v_1,\\dots,v_N$。\n\n接下来 $N-1$ 行，每行三个正整数 $A_i,B_i,C_i$，表示树上存在一条长度为 $C_i$ 的边连接节点 $A_i,B_i$。", "outputFormat": "一个数，表示方案数第 $11920928955078125$ 取模的结果。", "hint": "### 样例解释\n\n完美的集合有 $\\{1,2,5\\},\\{1,4\\},\\{2,6\\}$。\n\n从中选出 $K$ 个且能完成测试的方案为选择 $\\{1,2,5\\},\\{1,4\\}$ 或选择 $\\{1,2,5\\},\\{2,6\\}$。\n\n### 数据范围\n\n|子任务编号\t|\t$N\\leq$\t|\t$M\\leq$\t|\t$K\\leq$\t|\t\t特殊性质\t\t\t|\t分值\t\t|\n|:----------------:|:----------------:|:----------------:|:----------------:|:-----------------------------------:|:----------------:|\n|\t$1$\t\t|\t$17$\t|\t$150$\t|\t$10^9$\t|\t\t\t\t\t\t|\t$13$\t|\n|\t$2$\t\t|\t$60$\t|\t$10000$\t|\t$1$\t\t|\t\t\t\t\t\t|\t$11$\t|\n|\t$3$\t\t|\t$60$\t|\t$2$\t\t|\t$10^4$\t|\t$w_1=\\dots=w_N=1$\t|\t$19$\t|\n|\t$4$\t\t|\t$40$\t|\t$1200$\t|\t$10^9$\t|\t\t\t\t\t\t|\t$20$\t|\n|\t$5$\t\t|\t$60$\t|\t$10000$\t|\t$10^4$\t|\t\t\t\t\t\t|\t$15$\t|\n|\t$6$\t\t|\t$60$\t|\t$10000$\t|\t$10^9$\t|\t\t\t\t\t\t|\t$22$\t|\n\n对于 $100\\%$ 的数据，$N\\leq 60$，$M\\leq 10000$，$C_i\\leq 10000$，$K,w_i,v_i\\leq 10^9$，$Max\\leq 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] 完美的集合", "background": "", "description": "小 A 有一棵 $N$ 个点的带边权的树，树的每个节点有重量 $w_i$ 和价值 $v_i$。\n\n现在小 A 要从中选出若干个节点形成一个集合 $S$，满足这些节点重量之和 $\\leq M$ 并且构成一个连通块。小 A 是一个完美主义者，因此他只会选择节点价值之和最大的那些 $S$。我们称这样的集合 $S$ 为完美的集合。\n\n现在小 $A$ 要从所有完美的集合中选出 $K$ 个，并对这 $K$ 个完美的集合分别进行测试。在这 $K$ 次测试开始前，小 A 首先需要一个点 $x$ 来放置他的测试装置，这个测试装置的最大功率为 $Max$。\n\n接下来的每次测试，小 A 会对测试对象 $S$ 中的所有点进行一次能量传输，对一个点 $y$ 进行能量传输需要的功率为 $dist(x,y)\\times v_y$，其中 $dist(x,y)$ 表示点 $x,y$ 在树上的最短路长度。因此，如果 $S$ 中存在一个点 $y$，满足 $dist(x,y)\\times v_y>Max$，测试就会失败。同时，为了保证能量传输的稳定性，测试装置所在的点 $x$ 需要在集合 $S$ 中，否则测试也会失败。\n\n现在小 A 想知道，有多少种从所有完美的集合选出 $K$ 个的方法，使得他能找到一个放置测试装置的点，来完成他的测试呢？\n\n你只需要输出方案数对 $11920928955078125$ 取模的结果。", "inputFormat": "第一行四个正整数，表示 $N,M,K,Max$。\n\n接下来一行 $N$ 个正整数，表示 $w_1,\\dots,w_N$。\n\n接下来一行 $N$ 个**非负**整数，表示 $v_1,\\dots,v_N$。\n\n接下来 $N-1$ 行，每行三个正整数 $A_i,B_i,C_i$，表示树上存在一条长度为 $C_i$ 的边连接节点 $A_i,B_i$。", "outputFormat": "一个数，表示方案数第 $11920928955078125$ 取模的结果。", "hint": "### 样例解释\n\n完美的集合有 $\\{1,2,5\\},\\{1,4\\},\\{2,6\\}$。\n\n从中选出 $K$ 个且能完成测试的方案为选择 $\\{1,2,5\\},\\{1,4\\}$ 或选择 $\\{1,2,5\\},\\{2,6\\}$。\n\n### 数据范围\n\n|子任务编号\t|\t$N\\leq$\t|\t$M\\leq$\t|\t$K\\leq$\t|\t\t特殊性质\t\t\t|\t分值\t\t|\n|:----------------:|:----------------:|:----------------:|:----------------:|:-----------------------------------:|:----------------:|\n|\t$1$\t\t|\t$17$\t|\t$150$\t|\t$10^9$\t|\t\t\t\t\t\t|\t$13$\t|\n|\t$2$\t\t|\t$60$\t|\t$10000$\t|\t$1$\t\t|\t\t\t\t\t\t|\t$11$\t|\n|\t$3$\t\t|\t$60$\t|\t$2$\t\t|\t$10^4$\t|\t$w_1=\\dots=w_N=1$\t|\t$19$\t|\n|\t$4$\t\t|\t$40$\t|\t$1200$\t|\t$10^9$\t|\t\t\t\t\t\t|\t$20$\t|\n|\t$5$\t\t|\t$60$\t|\t$10000$\t|\t$10^4$\t|\t\t\t\t\t\t|\t$15$\t|\n|\t$6$\t\t|\t$60$\t|\t$10000$\t|\t$10^9$\t|\t\t\t\t\t\t|\t$22$\t|\n\n对于 $100\\%$ 的数据，$N\\leq 60$，$M\\leq 10000$，$C_i\\leq 10000$，$K,w_i,v_i\\leq 10^9$，$Max\\leq 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P9249", "type": "P", "difficulty": 7, "samples": [["2 3\n1 2\n3 4", "1770"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "图论", "2018", "集训队互测", "多项式", "矩阵加速", "生成函数"], "title": "[集训队互测 2018] 完美的旅行", "background": "", "description": "小 A 有一张 $n$ 个点的图，点的标号为 $0$ 到 $n-1$。点 $i$ 到点 $j$ 有 $A_{i,j}$ 条有向边。可能有自环。\n\n现在小 A 要在图上进行若干次旅行。每次旅行都是选任意一个起点，走至少一步，走到任意一个终点。定义一次旅行的愉悦值为起点与终点编号按位与的值。\n\n好奇的小 B 想要知道：对于所有 $x \\in [1,m]$ 和 $y \\in [0,n)$，小 A 进行了若干次旅行，总共走了 $x$ 步，且所有旅行的愉悦值的按位与为 $y$ 的方案数。\n\n两种方案不同当且仅当旅行次数不同或某一次旅行不完全相同。\n\n为了防止输出过多，你只需要输出这 $n\\times m$ 个数对 $998244353$ 取模后的结果的按位异或值。\n\n为方便起见，保证 $n$ 是 $2$ 的幂次。", "inputFormat": "第一行两个数 $n,m$。\n\n后面一个 $n\\times n$ 的矩阵，第 $i$ 行第 $j$ 列的数表示点 $i-1$ 到点 $j-1$ 的有向边的数量。", "outputFormat": "输出一个数表示 $n\\times m$ 个答案取模后的异或值。", "hint": "### 样例解释\n\n走 $1$ 步，愉悦值的按位与 $=0,1$ 的方案数分别为 $6,4$。\n\n走 $2$ 步的方案数分别为 $116,38$。\n\n走 $3$ 步的方案数分别为 $2012,358$。\n\n异或值为 $1770$。\n\n### 数据范围\n\n对于所有数据，$2 \\leq n \\leq 64$，$1 \\leq m \\leq 20000$，$0 \\leq A_{i,j} < 998244353$，保证 $n$ 是 $2$ 的幂。\n\n|子任务编号\t|\t分值\t\t|\t$n \\leq$\t|\t$m \\leq$\t|\t\t特殊限制\t\t\t\t\t\t\t\t\t|\n|:----------------:|:----------------:|:----------------:|:----------------:|:-------------------------------------------------------------------------:|\n|\t$1$\t\t|\t$15$\t|\t$16$\t|\t$2000$\t|\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t$2$\t\t|\t$15 $\t|\t$32$\t|\t$10000$\t|\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t$3$\t\t|\t$35$\t|\t$64$\t|\t$20000$\t|$A_{i,j}=i\\otimes j$，其中 $\\otimes$ 表示按位异或运算\t|\n|\t$4$\t\t|\t$35 $\t|\t$64$\t|\t$20000$\t|\t\t\t\t\t\t\t\t\t\t\t\t|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2018] 完美的旅行", "background": "", "description": "小 A 有一张 $n$ 个点的图，点的标号为 $0$ 到 $n-1$。点 $i$ 到点 $j$ 有 $A_{i,j}$ 条有向边。可能有自环。\n\n现在小 A 要在图上进行若干次旅行。每次旅行都是选任意一个起点，走至少一步，走到任意一个终点。定义一次旅行的愉悦值为起点与终点编号按位与的值。\n\n好奇的小 B 想要知道：对于所有 $x \\in [1,m]$ 和 $y \\in [0,n)$，小 A 进行了若干次旅行，总共走了 $x$ 步，且所有旅行的愉悦值的按位与为 $y$ 的方案数。\n\n两种方案不同当且仅当旅行次数不同或某一次旅行不完全相同。\n\n为了防止输出过多，你只需要输出这 $n\\times m$ 个数对 $998244353$ 取模后的结果的按位异或值。\n\n为方便起见，保证 $n$ 是 $2$ 的幂次。", "inputFormat": "第一行两个数 $n,m$。\n\n后面一个 $n\\times n$ 的矩阵，第 $i$ 行第 $j$ 列的数表示点 $i-1$ 到点 $j-1$ 的有向边的数量。", "outputFormat": "输出一个数表示 $n\\times m$ 个答案取模后的异或值。", "hint": "### 样例解释\n\n走 $1$ 步，愉悦值的按位与 $=0,1$ 的方案数分别为 $6,4$。\n\n走 $2$ 步的方案数分别为 $116,38$。\n\n走 $3$ 步的方案数分别为 $2012,358$。\n\n异或值为 $1770$。\n\n### 数据范围\n\n对于所有数据，$2 \\leq n \\leq 64$，$1 \\leq m \\leq 20000$，$0 \\leq A_{i,j} < 998244353$，保证 $n$ 是 $2$ 的幂。\n\n|子任务编号\t|\t分值\t\t|\t$n \\leq$\t|\t$m \\leq$\t|\t\t特殊限制\t\t\t\t\t\t\t\t\t|\n|:----------------:|:----------------:|:----------------:|:----------------:|:-------------------------------------------------------------------------:|\n|\t$1$\t\t|\t$15$\t|\t$16$\t|\t$2000$\t|\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t$2$\t\t|\t$15 $\t|\t$32$\t|\t$10000$\t|\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t$3$\t\t|\t$35$\t|\t$64$\t|\t$20000$\t|$A_{i,j}=i\\otimes j$，其中 $\\otimes$ 表示按位异或运算\t|\n|\t$4$\t\t|\t$35 $\t|\t$64$\t|\t$20000$\t|\t\t\t\t\t\t\t\t\t\t\t\t|", "locale": "zh-CN"}}}
{"pid": "P9250", "type": "P", "difficulty": 7, "samples": [["1\n2\n1\n1", "0\n1\n2"], ["5\n1 2\n2 3\n3 4\n4 5\n5\n4\n6\n1\n1\n7", "4\n6\n7\n8\n10\n11"], ["14\n1 2\n1 3\n2 4\n1 5\n2 6\n1 7\n1 8\n2 9\n2 10\n2 11\n2 12\n2 13\n1 14\n12\n1\n1\n2\n2\n2\n2\n2\n2\n2\n2\n1\n2", "35\n41\n48\n53\n58\n64\n70\n77\n84\n92\n100\n108\n117"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2019", "平衡树", "集训队互测", "树链剖分", "动态树 LCT"], "title": "[集训队作业 2019] 蜀道难", "background": "", "description": "「蜀道之难，难于上青天……」\n\n一边背着新学的语文课文，A 与 B 走出北校门口。现在距离七点的放学时间已过很久，与十点四十五分晚自习后的人潮却还有些距离，巷里的行人稀稀落落的。\n\n「明天早上就考试了呀。」A 小声而僵硬地说道。\n\n「嗯……背这样的课文，还真有种文人墨客的潇洒豪气。」B 回应着。\n\n「嗨，得了，我们学了什么『文』么？天天坐机房敲代码刷题，触景生情时也就靠语文课学的两三句诗过活了。」\n\n「人艰不拆……你说，三千年前的古蜀国人真要凭『天梯石栈相勾连』往来吗？」\n\n「人家住在四川盆地、天府之土好吗。住山里的，那是苗蛮，部落山野之人，怎么会天天翻山越岭走栈道呢？栈道那是几百年后，秦国经略蜀地才大规模修筑的。」\n\n「那这前边的人，就跟黄土高原一样，说话靠吼么。」\n\n「兴许他们是鸡犬之声相闻，老死不相往来，根本不用如此交流吧。」\n\n「比起如此，我到更希望他们真有『地崩山摧壮士死』的英雄。」\n\n「几千年前的事，谁又说得准呐。」\n\n「不能这么说……我宁愿相信信息是守恒的，历史的一切都会留下痕迹。」\n\n「那您考古嘞。」\n\n「可你知道混沌吧。」\n\n一时语塞的 A 带着两人在那棵槐树下停止了脚步。\n\n突然他字正腔圆，有板有眼地念着：\n\n「上有六龙回日之高标——下有冲波逆折之回川。黄鹤之飞——尚不得过，猿猱欲度，愁攀援。」\n\n「青泥何盘盘，百步九折萦岩峦。扪参历井仰胁息，以手抚膺坐长叹。」正望着树干出神的 B 也轻声应和。\n\n然后，一如往日，那名女孩也从树干背后现身了，仍是一袭白衣，头戴花冠，浅笑嫣然，缄口不言。A 仍是微微低头把玩衣角，B 也照常微笑。\n\n她抚摸着他们的头，A 和 B 也没有再拨打 110 报警。倏忽间闪过恍惚。\n\n面对眼前的高峰幽谷、连山绝壑，A 不禁想起了初中所学郦道元的「重岩叠嶂，隐天蔽日，自非亭午夜分，不见曦月。」刚刚讽刺 B 的，书到用时方恨少的发言，反而沁入自己的心脾了。远处的水滨石室隐约可见，似有人烟；山顶处则现出房屋的剪影。\n\n突然手被 B 握住。陶醉在猿啼鸟鸣中的 A 这才惊觉，自己身处 LCR 带来的梦境。\n\n「这好像是我们刚刚所讨论《蜀道难》的内容啊。」\n\nA 也想到了，但他并未看到栈道的影子，看来这是比秦王更早的「苗蛮」了。\n\n「那我们实际观察一下刚刚的问题吧。没有栈道的人如何交流。」\n\n最直接的方法，当属攀藤附葛，翻山越岭而至，这也是靠山吃山的先民们固有的技能——但技艺的熟练并不能抵消山中蛇虫和失足的危险。如此传递信息，未免得不偿失。B 相信存在更专业的手段。\n\n山谷渐渐明亮起来，眼尖的 A 注意到树木遮掩的山壁有些不寻常。二人攀援而至，多亏是梦境，他们并未费力。原来，山间绵延着一根被劈开的，用细小竹片固定的，宽约尺余的竹筒。泉水从中流过，大概是山民们引水的设施。\n\n「不对啊。山下的人有峪中河水可取。何况要输送水流，应该用完整而不是劈开的管道才对。」\n\n接着，一支系绳的小竹筒从他们面前流着泉水的槽中滑过。\n\n「这是……」\n\n「是了！这小筒是山上山下交流少量物品——包括信息载体——的工具。流水是为了清除淤尘。劈开而非封闭的竹筒也是为了防止卡住。」\n\n「可是，小筒不是很容易从仅仅一半的槽中滑落吗？」\n\n「仔细观察，小筒是两节的结构，这样就能在存贮信息的时候接受水。泉水同样起了引流的作用。并且上面的绳子也能回收——这意味着交流是双向的，尽管发起者总在高处，但只需等待便可解决相反方向的问题。」\n\n「大概如此，不过这是 LCR 带来的世界，不知我们的先辈是否真的在秦巴山区中如此做过。」\n\n「若有一泓稳定的清泉，这应该可行。」\n\n「这样的创意，」B 说，「表明先民们懂得技术胜过科学。」\n\n接着他突然沉默了。「真的是这样吗？」\n\n接着二人飘飞了起来——提醒着他们身处梦境的现实。\n\nA 注意到，在这座山附近，这样流水传物的「信道」有许多，它们构成了一张树状的大网。\n\n「他们不仅发明了这样的方法，还做了符合科学原理的，充满智慧的规划。」\n\n「瞧瞧吧。他们用最少段数的路线连接了所有的聚落，他们的所有聚落的高度排序后恰好等差，他们的任意两个聚落之间只需经不超过一个聚落的转达即可互相通信，他们的管道高差最为节省。」\n\n不知是谁在说呢。\n\n……\n\nA 思考了一会，说道：\n\n「也就是说，尽管聚落的位置受自然条件限制是无法转移的，但他们在管道连接方案上做出了最明智的选择。」\n\nB 答道：\n\n「是啊。刚刚 LCR 的意思，以我们学的 OI 来描述大概是这样的：管道可以看作两个聚落之间的边。\n\n1. 它们以最小代价联通聚落，即构成一棵树；\n2. 同一个聚落处的管道是互联的且有人管理，也即两个聚落只要满足其间的管道的高度方向是单调的——聚落高度一直递增或一直递减——就可以直接通信。\n3. 任意两个聚落通信至多需要转发一次；\n4. 所有聚落的高度排序后恰是等差数列；\n5. 管道的代价正比与两端聚落的高差，而高差形成的代价和恰巧是所有聚落高度排列方式中最小的；」\n\n「但聚落的高度并不是人决定的。」\n\n「所以，这一点是数学的美，是大自然的巧合和人的智慧共同的结晶。没有什么比这更浪漫了。」\n\n「很好……但如果新加入一个聚落的话，事情就被破坏了。」\n\n「幸运的是，这是梦境世界。我们也许可以做做救世主，改变一下聚落的高度。」\n\n「那该怎么做呢？」\n\n**「首先是抽象。我们把聚落看成一棵 $n$ 个点的树，树的点被标号为 $1$ 到 $n$，一条边的边权为两端点标号的差的绝对值。整棵树的权值为所有边权和。另外树必须满足一个条件：任意两点，要么它们之间（包括端点）的路径的标号是单调（递增或递减）的，要么存在第三点分别与这两点满足此条件。**\n\n**那么我们的任务是对于给定形态的树求出，在这些前提下通过改变点标号方法能得到的整棵树最小的权值。**\n\n**并且，还需要在加入新的叶子后维护这一点。」**\n\n……\n\n十一点钟声即将敲响，学生们陆续经过那棵槐树。没有人能注意到，两小时前两名同学在树下酣眠的梦游。\n\n请你完成 B 的设想。\n\n---\n\n#### 题意\n\n对于一棵有标号有根树 $T=(V,E)$，标号 $p:v\\rightarrow p(v),v\\in V,p(v)\\in [1,|V|]\\cap \\mathbb{Z}$ 是一个一一映射。令一条边 $e = (u,v),e\\in E$ 的边权为：$w:e\\rightarrow w(e) = \\lvert p(u)-p(v) \\rvert,e\\in E,w(e)\\in \\mathbb{Z}$。令整棵树的权为：$W:T=(V,E)\\rightarrow W(T)=\\sum_{e\\in E}w(e)$。\n\n另外定义一个图 $G(T)=(V,E')$，其中 $(u,v)\\in E'$ 当且仅当在 $T$ 中 $u$ 到 $v$ 路径上点的标号 $p_1,p_2,\\cdots , p_l$，要么单调递增，要么单调递减。则 $p$ 必须使得 $G(T)$ 的直径不超过 $2$，即 $\\mathop{\\max}_{i,j\\in V}SP(i,j)\\le 2$，其中 $SP(i,j)$ 表示 $G(T)$ 中 $i,j$ 的最短路经过的边数。\n\n现在给定 $T$，求 $M(T)=\\mathop{\\min}_{p}W(T)$。\n\n并且有若干次操作：在 $T$ 中加入一个新的叶子 $v$（$V\\gets V\\cup \\{v\\}$，$E\\gets E\\cup \\{(x,v)\\}$，$x\\in V_{old}$），每次操作后也要求 $M(T)$。这些操作是一脉相承的。\n", "inputFormat": "第一行一个正整数 $n$ 表示初始的 $\\lvert V\\rvert$，这些点在接下来的格式中将以 $1$ 到 $n$ 的整数表示，请不要将其与待定的标号 $p$ 混淆；  \n接下来 $n-1$ 行中，第 $i$ 行两个正整数 $u_i,v_i$，表示初始的 $E=\\{(u_i,v_i):i=1,2,\\dots ,n-1\\}$，保证 $u_i < v_i = i+1$；  \n接下来一行一个非负整数 $q$ 表示修改次数；  \n接下来 $q$ 行中，第 $i$ 行一个正整数 $f_i$，表示添加一个点（用 $n+i$ 表示）和一条新边 $(f_i,n+i)$。", "outputFormat": "共 $q+1$ 行，每行一个非负整数，依次表示初始和每次修改之后的 $M(T)$。\n", "hint": "### 样例解释 $\\mathbf{1}$\n\n这棵树每次都是一条链（`1`、`1-2`、`3-1-2`），令 $p(i)$ 等于 $i$ 到链输入时间较晚的一端的点数即可。\n\n### 数据范围\n\n对于所有数据，$1\\le n\\le 10^5$，$0\\le q\\le 10^5$，$1\\le n+q\\le 10^5$。\n\n每个子任务详细的数据限制及约定如下（留空表示和上述所有数据的约定相同）：\n\n|子任务编号|分数|$n$|$q$|性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$5$|$\\le 10$|$\\le 10$|-|\n|$2$|$10$|$\\le 18$|$\\le 18$|-|\n|$3$|$10$|$\\le 100$|$=0$|-|\n|$4$|$10$|$\\le 2000$|$=0$|-|\n|$5$|$10$| |$=0$|-|\n|$6$|$10$| | |一|\n|$7$|$10$| | |二|\n|$8$|$15$| | |三|\n|$9$|$20$| | |-|\n\n性质一：$\\forall i,u_i,f_i\\le 2$。\n\n性质二：$\\forall i,u_i,f_i\\le 20$。\n\n性质三：$\\forall i,u_i$ 在 $1,2, \\dots ,i-1$ 中均匀随机；$\\forall i,f_i$ 在 $1,2, \\dots ,n+i-1$ 中均匀随机。\n\n**注：本题 Subtask #10 为 $\\mathbf{0}$ 分的 hack 数据，不计入总分，但如果错误则不予通过。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队作业 2019] 蜀道难", "background": "", "description": "「蜀道之难，难于上青天……」\n\n一边背着新学的语文课文，A 与 B 走出北校门口。现在距离七点的放学时间已过很久，与十点四十五分晚自习后的人潮却还有些距离，巷里的行人稀稀落落的。\n\n「明天早上就考试了呀。」A 小声而僵硬地说道。\n\n「嗯……背这样的课文，还真有种文人墨客的潇洒豪气。」B 回应着。\n\n「嗨，得了，我们学了什么『文』么？天天坐机房敲代码刷题，触景生情时也就靠语文课学的两三句诗过活了。」\n\n「人艰不拆……你说，三千年前的古蜀国人真要凭『天梯石栈相勾连』往来吗？」\n\n「人家住在四川盆地、天府之土好吗。住山里的，那是苗蛮，部落山野之人，怎么会天天翻山越岭走栈道呢？栈道那是几百年后，秦国经略蜀地才大规模修筑的。」\n\n「那这前边的人，就跟黄土高原一样，说话靠吼么。」\n\n「兴许他们是鸡犬之声相闻，老死不相往来，根本不用如此交流吧。」\n\n「比起如此，我到更希望他们真有『地崩山摧壮士死』的英雄。」\n\n「几千年前的事，谁又说得准呐。」\n\n「不能这么说……我宁愿相信信息是守恒的，历史的一切都会留下痕迹。」\n\n「那您考古嘞。」\n\n「可你知道混沌吧。」\n\n一时语塞的 A 带着两人在那棵槐树下停止了脚步。\n\n突然他字正腔圆，有板有眼地念着：\n\n「上有六龙回日之高标——下有冲波逆折之回川。黄鹤之飞——尚不得过，猿猱欲度，愁攀援。」\n\n「青泥何盘盘，百步九折萦岩峦。扪参历井仰胁息，以手抚膺坐长叹。」正望着树干出神的 B 也轻声应和。\n\n然后，一如往日，那名女孩也从树干背后现身了，仍是一袭白衣，头戴花冠，浅笑嫣然，缄口不言。A 仍是微微低头把玩衣角，B 也照常微笑。\n\n她抚摸着他们的头，A 和 B 也没有再拨打 110 报警。倏忽间闪过恍惚。\n\n面对眼前的高峰幽谷、连山绝壑，A 不禁想起了初中所学郦道元的「重岩叠嶂，隐天蔽日，自非亭午夜分，不见曦月。」刚刚讽刺 B 的，书到用时方恨少的发言，反而沁入自己的心脾了。远处的水滨石室隐约可见，似有人烟；山顶处则现出房屋的剪影。\n\n突然手被 B 握住。陶醉在猿啼鸟鸣中的 A 这才惊觉，自己身处 LCR 带来的梦境。\n\n「这好像是我们刚刚所讨论《蜀道难》的内容啊。」\n\nA 也想到了，但他并未看到栈道的影子，看来这是比秦王更早的「苗蛮」了。\n\n「那我们实际观察一下刚刚的问题吧。没有栈道的人如何交流。」\n\n最直接的方法，当属攀藤附葛，翻山越岭而至，这也是靠山吃山的先民们固有的技能——但技艺的熟练并不能抵消山中蛇虫和失足的危险。如此传递信息，未免得不偿失。B 相信存在更专业的手段。\n\n山谷渐渐明亮起来，眼尖的 A 注意到树木遮掩的山壁有些不寻常。二人攀援而至，多亏是梦境，他们并未费力。原来，山间绵延着一根被劈开的，用细小竹片固定的，宽约尺余的竹筒。泉水从中流过，大概是山民们引水的设施。\n\n「不对啊。山下的人有峪中河水可取。何况要输送水流，应该用完整而不是劈开的管道才对。」\n\n接着，一支系绳的小竹筒从他们面前流着泉水的槽中滑过。\n\n「这是……」\n\n「是了！这小筒是山上山下交流少量物品——包括信息载体——的工具。流水是为了清除淤尘。劈开而非封闭的竹筒也是为了防止卡住。」\n\n「可是，小筒不是很容易从仅仅一半的槽中滑落吗？」\n\n「仔细观察，小筒是两节的结构，这样就能在存贮信息的时候接受水。泉水同样起了引流的作用。并且上面的绳子也能回收——这意味着交流是双向的，尽管发起者总在高处，但只需等待便可解决相反方向的问题。」\n\n「大概如此，不过这是 LCR 带来的世界，不知我们的先辈是否真的在秦巴山区中如此做过。」\n\n「若有一泓稳定的清泉，这应该可行。」\n\n「这样的创意，」B 说，「表明先民们懂得技术胜过科学。」\n\n接着他突然沉默了。「真的是这样吗？」\n\n接着二人飘飞了起来——提醒着他们身处梦境的现实。\n\nA 注意到，在这座山附近，这样流水传物的「信道」有许多，它们构成了一张树状的大网。\n\n「他们不仅发明了这样的方法，还做了符合科学原理的，充满智慧的规划。」\n\n「瞧瞧吧。他们用最少段数的路线连接了所有的聚落，他们的所有聚落的高度排序后恰好等差，他们的任意两个聚落之间只需经不超过一个聚落的转达即可互相通信，他们的管道高差最为节省。」\n\n不知是谁在说呢。\n\n……\n\nA 思考了一会，说道：\n\n「也就是说，尽管聚落的位置受自然条件限制是无法转移的，但他们在管道连接方案上做出了最明智的选择。」\n\nB 答道：\n\n「是啊。刚刚 LCR 的意思，以我们学的 OI 来描述大概是这样的：管道可以看作两个聚落之间的边。\n\n1. 它们以最小代价联通聚落，即构成一棵树；\n2. 同一个聚落处的管道是互联的且有人管理，也即两个聚落只要满足其间的管道的高度方向是单调的——聚落高度一直递增或一直递减——就可以直接通信。\n3. 任意两个聚落通信至多需要转发一次；\n4. 所有聚落的高度排序后恰是等差数列；\n5. 管道的代价正比与两端聚落的高差，而高差形成的代价和恰巧是所有聚落高度排列方式中最小的；」\n\n「但聚落的高度并不是人决定的。」\n\n「所以，这一点是数学的美，是大自然的巧合和人的智慧共同的结晶。没有什么比这更浪漫了。」\n\n「很好……但如果新加入一个聚落的话，事情就被破坏了。」\n\n「幸运的是，这是梦境世界。我们也许可以做做救世主，改变一下聚落的高度。」\n\n「那该怎么做呢？」\n\n**「首先是抽象。我们把聚落看成一棵 $n$ 个点的树，树的点被标号为 $1$ 到 $n$，一条边的边权为两端点标号的差的绝对值。整棵树的权值为所有边权和。另外树必须满足一个条件：任意两点，要么它们之间（包括端点）的路径的标号是单调（递增或递减）的，要么存在第三点分别与这两点满足此条件。**\n\n**那么我们的任务是对于给定形态的树求出，在这些前提下通过改变点标号方法能得到的整棵树最小的权值。**\n\n**并且，还需要在加入新的叶子后维护这一点。」**\n\n……\n\n十一点钟声即将敲响，学生们陆续经过那棵槐树。没有人能注意到，两小时前两名同学在树下酣眠的梦游。\n\n请你完成 B 的设想。\n\n---\n\n#### 题意\n\n对于一棵有标号有根树 $T=(V,E)$，标号 $p:v\\rightarrow p(v),v\\in V,p(v)\\in [1,|V|]\\cap \\mathbb{Z}$ 是一个一一映射。令一条边 $e = (u,v),e\\in E$ 的边权为：$w:e\\rightarrow w(e) = \\lvert p(u)-p(v) \\rvert,e\\in E,w(e)\\in \\mathbb{Z}$。令整棵树的权为：$W:T=(V,E)\\rightarrow W(T)=\\sum_{e\\in E}w(e)$。\n\n另外定义一个图 $G(T)=(V,E')$，其中 $(u,v)\\in E'$ 当且仅当在 $T$ 中 $u$ 到 $v$ 路径上点的标号 $p_1,p_2,\\cdots , p_l$，要么单调递增，要么单调递减。则 $p$ 必须使得 $G(T)$ 的直径不超过 $2$，即 $\\mathop{\\max}_{i,j\\in V}SP(i,j)\\le 2$，其中 $SP(i,j)$ 表示 $G(T)$ 中 $i,j$ 的最短路经过的边数。\n\n现在给定 $T$，求 $M(T)=\\mathop{\\min}_{p}W(T)$。\n\n并且有若干次操作：在 $T$ 中加入一个新的叶子 $v$（$V\\gets V\\cup \\{v\\}$，$E\\gets E\\cup \\{(x,v)\\}$，$x\\in V_{old}$），每次操作后也要求 $M(T)$。这些操作是一脉相承的。\n", "inputFormat": "第一行一个正整数 $n$ 表示初始的 $\\lvert V\\rvert$，这些点在接下来的格式中将以 $1$ 到 $n$ 的整数表示，请不要将其与待定的标号 $p$ 混淆；  \n接下来 $n-1$ 行中，第 $i$ 行两个正整数 $u_i,v_i$，表示初始的 $E=\\{(u_i,v_i):i=1,2,\\dots ,n-1\\}$，保证 $u_i < v_i = i+1$；  \n接下来一行一个非负整数 $q$ 表示修改次数；  \n接下来 $q$ 行中，第 $i$ 行一个正整数 $f_i$，表示添加一个点（用 $n+i$ 表示）和一条新边 $(f_i,n+i)$。", "outputFormat": "共 $q+1$ 行，每行一个非负整数，依次表示初始和每次修改之后的 $M(T)$。\n", "hint": "### 样例解释 $\\mathbf{1}$\n\n这棵树每次都是一条链（`1`、`1-2`、`3-1-2`），令 $p(i)$ 等于 $i$ 到链输入时间较晚的一端的点数即可。\n\n### 数据范围\n\n对于所有数据，$1\\le n\\le 10^5$，$0\\le q\\le 10^5$，$1\\le n+q\\le 10^5$。\n\n每个子任务详细的数据限制及约定如下（留空表示和上述所有数据的约定相同）：\n\n|子任务编号|分数|$n$|$q$|性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$1$|$5$|$\\le 10$|$\\le 10$|-|\n|$2$|$10$|$\\le 18$|$\\le 18$|-|\n|$3$|$10$|$\\le 100$|$=0$|-|\n|$4$|$10$|$\\le 2000$|$=0$|-|\n|$5$|$10$| |$=0$|-|\n|$6$|$10$| | |一|\n|$7$|$10$| | |二|\n|$8$|$15$| | |三|\n|$9$|$20$| | |-|\n\n性质一：$\\forall i,u_i,f_i\\le 2$。\n\n性质二：$\\forall i,u_i,f_i\\le 20$。\n\n性质三：$\\forall i,u_i$ 在 $1,2, \\dots ,i-1$ 中均匀随机；$\\forall i,f_i$ 在 $1,2, \\dots ,n+i-1$ 中均匀随机。\n\n**注：本题 Subtask #10 为 $\\mathbf{0}$ 分的 hack 数据，不计入总分，但如果错误则不予通过。**", "locale": "zh-CN"}}}
{"pid": "P9251", "type": "P", "difficulty": 3, "samples": [["abbaaab\n", "2"], ["ab", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Palindrom", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda próbna [Palindrom](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/pal/)**\n\nBytie 参加了计算机俱乐部，因此知道了什么是回文串。回文串是从左向右读和从右向左读一样的单词。比如 `oko`，`kajak`，`kobyłamamałybok` 和 `ababbaba` 都是回文串，但是 `kajaki`，`zoo`，`alamakota` 和 `abaababa` 都不是回文串。\n\n他迅速打开了笔记本并写下了一个只包含 `a` 和 `b` 两个字母的单词。然而在回忆了一会儿后，他想起这个单词不一定是一个回文串，因此他决定修改一下！在一秒内，它可以选择两个相邻的字母并交换他们的位置。他是否可以通过有限次操作（或者什么也不做）把这个字符串变成一个回文串？如果可以的话，最少要多少秒才可以？请帮他写一个程序计算这个最小时间。", "inputFormat": "输入一行一个字符串，表示 Bytie 所写的单词。这个字符串仅包含 `a` 和 `b` 两种字母。", "outputFormat": "输出一行一个整数，如果可以通过有限次操作将这个字符串变为回文串，输出最小时间，否则输出 $-1$。", "hint": "对于 $100\\%$ 的数据，满足：\n\n字符串长度不超过 $2 \\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Palindrom", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda próbna [Palindrom](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/pal/)**\n\nBytie 参加了计算机俱乐部，因此知道了什么是回文串。回文串是从左向右读和从右向左读一样的单词。比如 `oko`，`kajak`，`kobyłamamałybok` 和 `ababbaba` 都是回文串，但是 `kajaki`，`zoo`，`alamakota` 和 `abaababa` 都不是回文串。\n\n他迅速打开了笔记本并写下了一个只包含 `a` 和 `b` 两个字母的单词。然而在回忆了一会儿后，他想起这个单词不一定是一个回文串，因此他决定修改一下！在一秒内，它可以选择两个相邻的字母并交换他们的位置。他是否可以通过有限次操作（或者什么也不做）把这个字符串变成一个回文串？如果可以的话，最少要多少秒才可以？请帮他写一个程序计算这个最小时间。", "inputFormat": "输入一行一个字符串，表示 Bytie 所写的单词。这个字符串仅包含 `a` 和 `b` 两种字母。", "outputFormat": "输出一行一个整数，如果可以通过有限次操作将这个字符串变为回文串，输出最小时间，否则输出 $-1$。", "hint": "对于 $100\\%$ 的数据，满足：\n\n字符串长度不超过 $2 \\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9252", "type": "P", "difficulty": 6, "samples": [["5 3\nNNCCZ\n3 N\n2 Z\n1 Z\n", "3\n5\n3\n1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Wielki Zderzacz Termionów", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 1 [Wielki Zderzacz Termionów](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/wzt/)**\n\nAlbert Bynstein 教授发现了一种新的基本粒子：热离子。如果他的实验成功，就可以在他的帮助下修建一个发电站，这样就可以解决 Byteland 的能源问题了。\n\n这些粒子有三种类型，用红色，绿色和蓝色表示。这个名称与粒子实际的颜色或者光的波长无关，只是 Bynstein 教授用这些颜色的马克笔标记这些粒子。\n\n红色和绿色的热离子可以发生反应，但只与另一个相同颜色的粒子发生反应。当两个红色热离子碰撞时，产生一个绿色热离子，并释放 $1$ 字节焦耳的能量。如果两个绿色热离子发生碰撞，就会产生一个红色热离子，同时释放 $1$ 字节焦耳的能量。\n\n蓝色热离子不与其他热离子反应，但是它们是不稳定的。产生蓝热离子 $72$ 小时后，它会随机变成红热离子或绿热离子中的一个，变成任何离子都不会释放能量。\n\n教授正在准备一个受控的实验反应。为此，他在实验室里准备了排成一排的 $n$ 个热离子。几天后，他打算把这些离子带到目前正在首都地下建造的大型热离子对撞机。到那时，所有的蓝色热离子都将变成红色或绿色热离子。\n\n在对撞实验中，教授想进行一连串的反应，以产生 $n-1$ 字节焦耳的能量，并最后只留下一个热离子。每次反应可以选择相邻的两个热离子。所产生的热离子与左边和右边的热离子相邻，并能与它们发生进一步的反应。\n\n问题是，当所有的蓝色热离子都发生变化时，有多大概率存在一个可行的反应序列。\n\n你的任务是计算蓝色热离子有多少种变化方式（对 $10^9+7$ 取模）能使完整的反应序列进行下去。\n\n此外，教授还会在他的实验室里对热离子的位置进行改变，每次都把一个热离子换成另一个（也许不会改变其类型）。在每一次这样的变化之后，也要计算出结果。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$ 分别表示热离子个数和改变次数。\n\n第二行一个长为 $n$ 的字符串，表示初始时热离子的排列情况。字符串只包含 `C`，`Z` 和 `N` 三种字符，分别表示红色，绿色和蓝色热离子。左起第 $k$ 个字符表示第 $k$ 个热离子的颜色。\n\n接下来 $q$ 行表示对上述字符串的修改。每行包含一个数字 $k_i$ 和一个字符（`C`，`Z` 和 `N` 之一）。表示第 $i$ 步中，教授将第 $k_i$ 个粒子换成了这个字符所表示的新粒子。", "outputFormat": "输出 $q+1$ 行，第 $i+1$ 行输出一个整数，表示经过前 $i$ 个修改后的答案。\n\n输出蓝色热离子有多少种变化方式（对 $10^9+7$ 取模）能使完整的反应序列进行下去，生成 $n-1$ 字节焦耳能量。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 2 \\times 10 ^ 5, 0\\le q\\le 10 ^ 5, 1\\le k_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Wielki Zderzacz Termionów", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 1 [Wielki Zderzacz Termionów](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/wzt/)**\n\nAlbert Bynstein 教授发现了一种新的基本粒子：热离子。如果他的实验成功，就可以在他的帮助下修建一个发电站，这样就可以解决 Byteland 的能源问题了。\n\n这些粒子有三种类型，用红色，绿色和蓝色表示。这个名称与粒子实际的颜色或者光的波长无关，只是 Bynstein 教授用这些颜色的马克笔标记这些粒子。\n\n红色和绿色的热离子可以发生反应，但只与另一个相同颜色的粒子发生反应。当两个红色热离子碰撞时，产生一个绿色热离子，并释放 $1$ 字节焦耳的能量。如果两个绿色热离子发生碰撞，就会产生一个红色热离子，同时释放 $1$ 字节焦耳的能量。\n\n蓝色热离子不与其他热离子反应，但是它们是不稳定的。产生蓝热离子 $72$ 小时后，它会随机变成红热离子或绿热离子中的一个，变成任何离子都不会释放能量。\n\n教授正在准备一个受控的实验反应。为此，他在实验室里准备了排成一排的 $n$ 个热离子。几天后，他打算把这些离子带到目前正在首都地下建造的大型热离子对撞机。到那时，所有的蓝色热离子都将变成红色或绿色热离子。\n\n在对撞实验中，教授想进行一连串的反应，以产生 $n-1$ 字节焦耳的能量，并最后只留下一个热离子。每次反应可以选择相邻的两个热离子。所产生的热离子与左边和右边的热离子相邻，并能与它们发生进一步的反应。\n\n问题是，当所有的蓝色热离子都发生变化时，有多大概率存在一个可行的反应序列。\n\n你的任务是计算蓝色热离子有多少种变化方式（对 $10^9+7$ 取模）能使完整的反应序列进行下去。\n\n此外，教授还会在他的实验室里对热离子的位置进行改变，每次都把一个热离子换成另一个（也许不会改变其类型）。在每一次这样的变化之后，也要计算出结果。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$ 分别表示热离子个数和改变次数。\n\n第二行一个长为 $n$ 的字符串，表示初始时热离子的排列情况。字符串只包含 `C`，`Z` 和 `N` 三种字符，分别表示红色，绿色和蓝色热离子。左起第 $k$ 个字符表示第 $k$ 个热离子的颜色。\n\n接下来 $q$ 行表示对上述字符串的修改。每行包含一个数字 $k_i$ 和一个字符（`C`，`Z` 和 `N` 之一）。表示第 $i$ 步中，教授将第 $k_i$ 个粒子换成了这个字符所表示的新粒子。", "outputFormat": "输出 $q+1$ 行，第 $i+1$ 行输出一个整数，表示经过前 $i$ 个修改后的答案。\n\n输出蓝色热离子有多少种变化方式（对 $10^9+7$ 取模）能使完整的反应序列进行下去，生成 $n-1$ 字节焦耳能量。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 2 \\times 10 ^ 5, 0\\le q\\le 10 ^ 5, 1\\le k_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9253", "type": "P", "difficulty": 2, "samples": [["5\n4 1 3 3 1\n", "1"], ["4\n-1000000 -1000000 -1000000 -1000000\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Ornitolog 2", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 1 [Ornitolog 2](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/orn/)**\n\n交替鹡鸰（*Motacilla alterna*）是鹡鸰属的一种鸟类。它因其独特的鸟鸣而与众不同，这种鸟的鸟鸣中，连续的音高交替地增加和减少。例如，如果我们用整数来表示音高，那么，鸟鸣可以是 $[2, 1, 3]$ 和 $[4, 5, -6, -5]$，但不能是 $[1, 2, 3, 2]$ 或 $[6, 5, 5, 4]$。为了记录这种迷人的生物，鸟类学家 Byteasar 将他的录音笔留在森林中数天。他现在想知道录到的声音是否与鹡鸰的鸟鸣相似。\n\n写一个程序，给定音高序列，确定最少将音高序列中多少个整数改成 $[-10^9,10^9]$ 区间内的任意整数，才能使得这个序列成为交替鹡鸰鸟鸣的音高序列。", "inputFormat": "第一行一个整数 $n$，表示这个音高序列的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$，表示这个音高序列。", "outputFormat": "输出最少要修改多少整数才能使这个序列成为交替鹡鸰鸟鸣的音高序列。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$3\\le n\\le 5 \\times 10^4, -10^6\\le a_i\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Ornitolog 2", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 1 [Ornitolog 2](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/orn/)**\n\n交替鹡鸰（*Motacilla alterna*）是鹡鸰属的一种鸟类。它因其独特的鸟鸣而与众不同，这种鸟的鸟鸣中，连续的音高交替地增加和减少。例如，如果我们用整数来表示音高，那么，鸟鸣可以是 $[2, 1, 3]$ 和 $[4, 5, -6, -5]$，但不能是 $[1, 2, 3, 2]$ 或 $[6, 5, 5, 4]$。为了记录这种迷人的生物，鸟类学家 Byteasar 将他的录音笔留在森林中数天。他现在想知道录到的声音是否与鹡鸰的鸟鸣相似。\n\n写一个程序，给定音高序列，确定最少将音高序列中多少个整数改成 $[-10^9,10^9]$ 区间内的任意整数，才能使得这个序列成为交替鹡鸰鸟鸣的音高序列。", "inputFormat": "第一行一个整数 $n$，表示这个音高序列的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$，表示这个音高序列。", "outputFormat": "输出最少要修改多少整数才能使这个序列成为交替鹡鸰鸟鸣的音高序列。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$3\\le n\\le 5 \\times 10^4, -10^6\\le a_i\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9254", "type": "P", "difficulty": 1, "samples": [["20\nTTNNTTNTNTNNNNNNNNTT\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Liczenie punktów", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 1 [Liczenie punktów](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/pun/)**\n\nPA 的裁判们已经厌倦了不断计算所有提交代码的得分。请帮助他们实现这一过程的自动化。\n\n对于每道题，一次提交可以得 $0$ 到 $10$ 分。一道题中有 $n$ 组测试数据，其中 $n$ 可以被 $10$ 整除。如果这个代码可以通过前 $\\frac{n}{10}$ 组数据，那么会得一分，如果代码可以通过接下来的 $\\frac{n}{10}$ 组数据，就会再得一分。一次提交可以因为全部通过了一个测试点内所有 $\\frac{n}{10}$ 组数据而独立地获得一分。如果在一个测试点内的某组数据出现错误，那么这次提交就拿不到这个测试点的分数。\n\n注意：\n\n1. 为了简单，我们假设每个测试点中都有相同组的测试数据，但是实际的算法竞赛中并不是这样。\n2. 任何你写过的代码都可能拿来妨碍你（宇航员笑话）。", "inputFormat": "第一行一个整数 $n$，其中 $n$ 是 $10$ 的倍数，表示测试数据组数。\n\n接下来一行长度为 $n$ 的字符串，字符串中仅包含 `T` 和 `N` 两种字符，表示测试点的通过情况。其中 `T` 表示该测试点通过，`N` 表示该测试点未通过。", "outputFormat": "输出一行一个整数，表示该提交的得分。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$10\\le n\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Liczenie punktów", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 1 [Liczenie punktów](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/pun/)**\n\nPA 的裁判们已经厌倦了不断计算所有提交代码的得分。请帮助他们实现这一过程的自动化。\n\n对于每道题，一次提交可以得 $0$ 到 $10$ 分。一道题中有 $n$ 组测试数据，其中 $n$ 可以被 $10$ 整除。如果这个代码可以通过前 $\\frac{n}{10}$ 组数据，那么会得一分，如果代码可以通过接下来的 $\\frac{n}{10}$ 组数据，就会再得一分。一次提交可以因为全部通过了一个测试点内所有 $\\frac{n}{10}$ 组数据而独立地获得一分。如果在一个测试点内的某组数据出现错误，那么这次提交就拿不到这个测试点的分数。\n\n注意：\n\n1. 为了简单，我们假设每个测试点中都有相同组的测试数据，但是实际的算法竞赛中并不是这样。\n2. 任何你写过的代码都可能拿来妨碍你（宇航员笑话）。", "inputFormat": "第一行一个整数 $n$，其中 $n$ 是 $10$ 的倍数，表示测试数据组数。\n\n接下来一行长度为 $n$ 的字符串，字符串中仅包含 `T` 和 `N` 两种字符，表示测试点的通过情况。其中 `T` 表示该测试点通过，`N` 表示该测试点未通过。", "outputFormat": "输出一行一个整数，表示该提交的得分。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$10\\le n\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P9255", "type": "P", "difficulty": 4, "samples": [["6 3\n3 5 4 8 3 7\n", "TAK\n3 5\n"], ["4 2\n2 3 2 3\n", "NIE\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "PA（波兰）"], "title": "[PA 2022] Podwyżki", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 2 [Podwyżki](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/pod/)**\n\n对于 Bytecorp 来说，2022 年是艰难的一年。商业决策失误，再加上不景气的市场状况，意味着公司无力为员工涨薪。为了准备应对员工提出的不舒服的问题，人资部门发明了一种方法来证明员工不值得涨薪。\n\n根据一个雇员在连续几天内产生的总收益，可以将一年（在 Byteotia，一年不一定是 365 天）划分为若干区间，这将表明该雇员工作不投入。更确切地说，人资部门希望将收入序列划分为 $k$ 个连续区间，使得序列中的每个元素都恰好属于一个区间。如果**不可能**从每个区间选择一个元素，使所选元素形成严格的升序，那么这种划分是正确的。\n\nBytecorp 的未来在你手上。写一个程序读入某个雇员产生的收益序列和一个整数 $k$，并根据人资部门的要求把序列分成 $k$ 段，或者判断无法分成这样的 $k$ 段。", "inputFormat": "输入的第一行包含两个整数 $n,k$，表示序列长度和要分成的段数。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\ldots,a_n$，表示收益序列。", "outputFormat": "如果这个序列不能按如上方法分割，输出一行一个字符串 `NIE`。\n\n否则输出两行，第一行一个字符串 `TAK`，第二行输出 $k-1$ 个整数 $v_1,\\ldots,v_{k-1}$，表示正确的划分中除最后一个区间外，每个连续区间的右端点，最后一个区间的右端点一定是 $n$。\n\n如果有多个正确答案，可以输出任意一个。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$2\\le k\\le n\\le 5 \\times 10 ^ 5, 1\\le a_i\\le 10^9, 1\\le v_i<n,v_i<v_{i+1}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Podwyżki", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 2 [Podwyżki](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/pod/)**\n\n对于 Bytecorp 来说，2022 年是艰难的一年。商业决策失误，再加上不景气的市场状况，意味着公司无力为员工涨薪。为了准备应对员工提出的不舒服的问题，人资部门发明了一种方法来证明员工不值得涨薪。\n\n根据一个雇员在连续几天内产生的总收益，可以将一年（在 Byteotia，一年不一定是 365 天）划分为若干区间，这将表明该雇员工作不投入。更确切地说，人资部门希望将收入序列划分为 $k$ 个连续区间，使得序列中的每个元素都恰好属于一个区间。如果**不可能**从每个区间选择一个元素，使所选元素形成严格的升序，那么这种划分是正确的。\n\nBytecorp 的未来在你手上。写一个程序读入某个雇员产生的收益序列和一个整数 $k$，并根据人资部门的要求把序列分成 $k$ 段，或者判断无法分成这样的 $k$ 段。", "inputFormat": "输入的第一行包含两个整数 $n,k$，表示序列长度和要分成的段数。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\ldots,a_n$，表示收益序列。", "outputFormat": "如果这个序列不能按如上方法分割，输出一行一个字符串 `NIE`。\n\n否则输出两行，第一行一个字符串 `TAK`，第二行输出 $k-1$ 个整数 $v_1,\\ldots,v_{k-1}$，表示正确的划分中除最后一个区间外，每个连续区间的右端点，最后一个区间的右端点一定是 $n$。\n\n如果有多个正确答案，可以输出任意一个。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$2\\le k\\le n\\le 5 \\times 10 ^ 5, 1\\le a_i\\le 10^9, 1\\le v_i<n,v_i<v_{i+1}$。", "locale": "zh-CN"}}}
{"pid": "P9256", "type": "P", "difficulty": 3, "samples": [["3", "2\n3 1\n"], ["10", "6\n7 5 4 3 2 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Muzyka pop 2", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 2 [Muzyka pop 2](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/muz/)**\n\n你可能还记得，Matthew 喜欢流行音乐。他刚刚编好一首新歌，就差给这首歌谱一个结尾了。\n\nMatthew 想让这个结尾包含一些非空的音符，这些音符用其响度表示，响度是一个正整数。Matthew 可以使用任何响度的音符，但结尾的任务是逐渐淡出整首歌——出于这个原因，结尾的音符响度必须形成一个严格递减的序列。\n\n你可能知道或记得，流行音乐中好的节拍是很重要的。这次 Matthew 发现响度为 $x$ 的音符的节拍值为 $x$ 的二进制形式中 $1$ 的个数。考虑这首歌的剩余部分，他想让这个结尾所有音符的节拍值之和恰好为 $n$。\n\n帮他找到这个正确的音符响度序列。可以证明总存在至少一个满足条件的序列，因此你的任务是输出字典序最小的序列。\n\n注：如果对于两个数字序列 $A$ 和 $B$，在两序列第一个不同的位置，$A$ 序列中这个位置包含的整数比 $B$ 序列的小，我们称数字序列 $A$ 的字典序比 $B$ 的字典序小。如果不存在这个位置，则称更短的那个数字序列字典序更小。例如，序列 $[1, 10000000]$ 的字典序小于序列 $[2,2]$，序列 $[4, 2, 20, 30, 40]$ 的字典序小于 $[4, 2, 100, 1]$，并且序列 $[5,4,3,2]$ 的字典序小于序列 $[5,4,3,2,1]$。", "inputFormat": "输入一行一个整数 $n$，表示要求的序列中音符的节拍值之和。", "outputFormat": "输出第一行包含一个整数 $k$，表示找到的这个序列的长度。\n\n第二行包含 $k$ 个正整数，表示找到的这个序列。这个序列应该是字典序最小且严格递减的，并且这些正整数的二进制表示中 $1$ 的个数和应恰好是 $n$。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 10 ^ 6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Muzyka pop 2", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 2 [Muzyka pop 2](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/muz/)**\n\n你可能还记得，Matthew 喜欢流行音乐。他刚刚编好一首新歌，就差给这首歌谱一个结尾了。\n\nMatthew 想让这个结尾包含一些非空的音符，这些音符用其响度表示，响度是一个正整数。Matthew 可以使用任何响度的音符，但结尾的任务是逐渐淡出整首歌——出于这个原因，结尾的音符响度必须形成一个严格递减的序列。\n\n你可能知道或记得，流行音乐中好的节拍是很重要的。这次 Matthew 发现响度为 $x$ 的音符的节拍值为 $x$ 的二进制形式中 $1$ 的个数。考虑这首歌的剩余部分，他想让这个结尾所有音符的节拍值之和恰好为 $n$。\n\n帮他找到这个正确的音符响度序列。可以证明总存在至少一个满足条件的序列，因此你的任务是输出字典序最小的序列。\n\n注：如果对于两个数字序列 $A$ 和 $B$，在两序列第一个不同的位置，$A$ 序列中这个位置包含的整数比 $B$ 序列的小，我们称数字序列 $A$ 的字典序比 $B$ 的字典序小。如果不存在这个位置，则称更短的那个数字序列字典序更小。例如，序列 $[1, 10000000]$ 的字典序小于序列 $[2,2]$，序列 $[4, 2, 20, 30, 40]$ 的字典序小于 $[4, 2, 100, 1]$，并且序列 $[5,4,3,2]$ 的字典序小于序列 $[5,4,3,2,1]$。", "inputFormat": "输入一行一个整数 $n$，表示要求的序列中音符的节拍值之和。", "outputFormat": "输出第一行包含一个整数 $k$，表示找到的这个序列的长度。\n\n第二行包含 $k$ 个正整数，表示找到的这个序列。这个序列应该是字典序最小且严格递减的，并且这些正整数的二进制表示中 $1$ 的个数和应恰好是 $n$。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 10 ^ 6$。", "locale": "zh-CN"}}}
{"pid": "P9257", "type": "P", "difficulty": 7, "samples": [["4\n3 2 7\n1 2\n2 3\n3 3 7\n1 2\n2 3\n1 3\n5 3 1\n1 5\n2 4\n1 5\n5 2 2\n2 4\n1 5\n", "1 1\n2\n2 3\n1 2 3\n-1\n2 4\n1 2 4 5\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Mędrcy", "background": "", "description": "### 警告：滥用本题卡评测者将被封号。\n\n**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 3 [Mędrcy](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/med/)**\n\n几个世纪以来，神奇的 Bitoland 一直是 $n$ 个贤者和 $m$ 条咒语的家园。根据古老的魔法法则，每条咒语恰好被 $n-2$ 个贤者知道。所有的贤者都知道每条咒语都被他们中的一些确定的人所知，但他们不知道到底有多少条咒语存在。每个贤者，对于他所知道的每一条咒语，都清楚地知道其他哪些贤者知道它。然而，贤者不知道存在多少他不知道的咒语。特别的，一个贤者可能不知道任何咒语——在这种情况下，他不知道是否存在咒语（但他仍然知道，如果存在咒语，则正好有 $n-2$ 个贤者会知道它们）。\n\n贤者每天中午都会在 Stumegabyte 森林里聚会，但他们在那里不会互相交流，他们只是各自问候对方并进行冥想，晚上他们都回到自己的小屋。贤者除了在见面时看到对方之外，并没有其他任何方式的交流。他们这样做是因为他们害怕约束他们的古老传统，其中规定，如果一个贤者发现有他不知道的咒语，他必须在当天午夜神不知鬼不觉地离开这里，并且永远不能回到 Bitoland。\n\n有一天，一个流浪者来到了 Bitoland。在观察了几天这些贤者之后，他决定去见他们，在那里他不明智地对所有贤者宣布：「我已经注意到，你们中至少有一个贤者知道至少一条咒语！」\n\n流浪者将在 Bitoland 再停留 $k$ 天（最多一个月），每天观察聚会情况，但不会再多说什么。在这段时间里，会不会有一天，一些贤者不会在聚会上出现？\n\n我们假设贤者的推断是完美的，也就是说，如果他们中的任何一个人能够从流浪者宣布的内容和他们所掌握的关于咒语的信息中推断出什么，那么现实情况一定是这样的，并且他们会这么做。", "inputFormat": "第一行一个正整数 $t$，表示测试点个数。\n\n对于每个测试点，第一行包含三个整数 $n,m,k$，分别表示贤者人数，咒语个数和流浪者会观察会议的天数。贤者从 $1$ 到 $n$ 编号。\n\n接下来 $m$ 行，每行两个整数 $a_i,b_i\\ $，表示除了贤者 $a_i$ 和 $b_i$ 之外其他所有贤者都知道这条咒语。\n\n", "outputFormat": "对于每组数据，如果接下来 $k$ 天的每一天，所有贤者都会来参加聚会，则输出一行 $-1$。否则输出两行。第一行包含两个整数 $d$ 和 $c$，其中 $d$ 表示有贤者没来聚会的最早的一次，$c$ 表示这一次没来聚会的贤者个数。第二行包含 $c$ 个整数，表示没来聚会的贤者编号，按从小到大的顺序输出。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$3\\le n,1\\le m,1\\le k\\le 30, 1\\le a_i<b_i\\le n$,\n\n一组数据中所有测试点的 $n$ 之和不超过 $10 ^ 3$，所有 $m$ 之和不超过 $3 \\times 10 ^ 3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Mędrcy", "background": "", "description": "### 警告：滥用本题卡评测者将被封号。\n\n**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 3 [Mędrcy](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/med/)**\n\n几个世纪以来，神奇的 Bitoland 一直是 $n$ 个贤者和 $m$ 条咒语的家园。根据古老的魔法法则，每条咒语恰好被 $n-2$ 个贤者知道。所有的贤者都知道每条咒语都被他们中的一些确定的人所知，但他们不知道到底有多少条咒语存在。每个贤者，对于他所知道的每一条咒语，都清楚地知道其他哪些贤者知道它。然而，贤者不知道存在多少他不知道的咒语。特别的，一个贤者可能不知道任何咒语——在这种情况下，他不知道是否存在咒语（但他仍然知道，如果存在咒语，则正好有 $n-2$ 个贤者会知道它们）。\n\n贤者每天中午都会在 Stumegabyte 森林里聚会，但他们在那里不会互相交流，他们只是各自问候对方并进行冥想，晚上他们都回到自己的小屋。贤者除了在见面时看到对方之外，并没有其他任何方式的交流。他们这样做是因为他们害怕约束他们的古老传统，其中规定，如果一个贤者发现有他不知道的咒语，他必须在当天午夜神不知鬼不觉地离开这里，并且永远不能回到 Bitoland。\n\n有一天，一个流浪者来到了 Bitoland。在观察了几天这些贤者之后，他决定去见他们，在那里他不明智地对所有贤者宣布：「我已经注意到，你们中至少有一个贤者知道至少一条咒语！」\n\n流浪者将在 Bitoland 再停留 $k$ 天（最多一个月），每天观察聚会情况，但不会再多说什么。在这段时间里，会不会有一天，一些贤者不会在聚会上出现？\n\n我们假设贤者的推断是完美的，也就是说，如果他们中的任何一个人能够从流浪者宣布的内容和他们所掌握的关于咒语的信息中推断出什么，那么现实情况一定是这样的，并且他们会这么做。", "inputFormat": "第一行一个正整数 $t$，表示测试点个数。\n\n对于每个测试点，第一行包含三个整数 $n,m,k$，分别表示贤者人数，咒语个数和流浪者会观察会议的天数。贤者从 $1$ 到 $n$ 编号。\n\n接下来 $m$ 行，每行两个整数 $a_i,b_i\\ $，表示除了贤者 $a_i$ 和 $b_i$ 之外其他所有贤者都知道这条咒语。\n\n", "outputFormat": "对于每组数据，如果接下来 $k$ 天的每一天，所有贤者都会来参加聚会，则输出一行 $-1$。否则输出两行。第一行包含两个整数 $d$ 和 $c$，其中 $d$ 表示有贤者没来聚会的最早的一次，$c$ 表示这一次没来聚会的贤者个数。第二行包含 $c$ 个整数，表示没来聚会的贤者编号，按从小到大的顺序输出。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$3\\le n,1\\le m,1\\le k\\le 30, 1\\le a_i<b_i\\le n$,\n\n一组数据中所有测试点的 $n$ 之和不超过 $10 ^ 3$，所有 $m$ 之和不超过 $3 \\times 10 ^ 3$。", "locale": "zh-CN"}}}
{"pid": "P9258", "type": "P", "difficulty": 6, "samples": [["4\nLLPLPP\nPPLP\nLLP\nP\n", "29 9 8 5\n8 2 2 1\n11 4 3 2\n4 1 1 0\n"]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Drybling Bajtessiego", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 3 [Drybling Bajtessiego](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/baj/)**\n\nBytessi 因是世界足坛最好的锋线（和球员）而广为人知。为了即将到来的世界杯，他编制了一份 $n$ 种运球方式的清单，其中每次运球可以用一串字母 `L` 和 `P` 来描述，表示他用左脚和右脚触球的顺序。\n\n如果一个球员用左脚和右脚触球次数相等，我们就称这种运球方式是**平衡的**。此外，如果对于给定的这种运球方式，如果任意一个初始部分（前缀），满足左脚触球次数不少于右脚触球次数，就称这种运球方式是**左利脚的**。由于 Bytessi 是左利脚，他认为如果一种运球方式即平衡又左利脚，那么这种运球方式是**极佳的**。\n\n世界杯是一个特殊的比赛，世界上最好的球员都会来参赛。出于这个原因，Bytessi 需要准备更多的运球方式。他决定使用一种简单的方式把运球方式增加到 $n^2$ 种——对于初始列表中每一对运球方式（可以相同），新的运球方式用这两种运球方式直接相连来描述。换句话说，他会先使用第一种运球方式运球，然后接着用第二种运球方式运球。\n\n在激烈的比赛中，很容易忘记一些本应进行的触球，所以 Bytessi 最后的运球方式将是他最初想的运球方式的一个非空的子序列。换句话说，最后的运球方式将通过删除他想进行的运球方式中的一些（也许没有，但不是全部）字母来得到。其余字母的顺序必须保持不变。\n\n最终采用的运球方式将是极佳的，如果这样的话 Bytessi 会非常高兴。他现在想知道，对于新清单中的每一种运球方式，他可以意外地进行多少种可能的极佳运球方式。由于这个数字可能非常大，Bytessi 只需要知道将这个数字除以 $10^9+7$ 的余数。请帮 Bytessi 解决这个问题。\n\n注意：Bytessi 感兴趣的是其原始运球方式的子序列可以得到多少种不同的极佳运球，而不是从原始运球的描述中划掉字母而得到极佳运球的方法的数量。", "inputFormat": "第一行一个整数 $n$，表示 Bytessi 准备的运球方式种数。\n\n接下来 $n$ 行描述 Bytessi 的运球方式。第 $i$ 行包含一个由 `L` 和 `P` 组成的非空串，描述第 $i$ 种运球方式。", "outputFormat": "输出 $n$ 行，每行 $n$ 个整数。第 $i$ 行第 $j$ 个整数表示如果把第 $i$ 种和第 $j$ 种运球方式相连，新的运球方式中有多少子序列是极佳的，结果对 $10^9+7$ 取模。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 600$，\n\n每种运球方式的长度不超过 $600$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Drybling Bajtessiego", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 3 [Drybling Bajtessiego](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/baj/)**\n\nBytessi 因是世界足坛最好的锋线（和球员）而广为人知。为了即将到来的世界杯，他编制了一份 $n$ 种运球方式的清单，其中每次运球可以用一串字母 `L` 和 `P` 来描述，表示他用左脚和右脚触球的顺序。\n\n如果一个球员用左脚和右脚触球次数相等，我们就称这种运球方式是**平衡的**。此外，如果对于给定的这种运球方式，如果任意一个初始部分（前缀），满足左脚触球次数不少于右脚触球次数，就称这种运球方式是**左利脚的**。由于 Bytessi 是左利脚，他认为如果一种运球方式即平衡又左利脚，那么这种运球方式是**极佳的**。\n\n世界杯是一个特殊的比赛，世界上最好的球员都会来参赛。出于这个原因，Bytessi 需要准备更多的运球方式。他决定使用一种简单的方式把运球方式增加到 $n^2$ 种——对于初始列表中每一对运球方式（可以相同），新的运球方式用这两种运球方式直接相连来描述。换句话说，他会先使用第一种运球方式运球，然后接着用第二种运球方式运球。\n\n在激烈的比赛中，很容易忘记一些本应进行的触球，所以 Bytessi 最后的运球方式将是他最初想的运球方式的一个非空的子序列。换句话说，最后的运球方式将通过删除他想进行的运球方式中的一些（也许没有，但不是全部）字母来得到。其余字母的顺序必须保持不变。\n\n最终采用的运球方式将是极佳的，如果这样的话 Bytessi 会非常高兴。他现在想知道，对于新清单中的每一种运球方式，他可以意外地进行多少种可能的极佳运球方式。由于这个数字可能非常大，Bytessi 只需要知道将这个数字除以 $10^9+7$ 的余数。请帮 Bytessi 解决这个问题。\n\n注意：Bytessi 感兴趣的是其原始运球方式的子序列可以得到多少种不同的极佳运球，而不是从原始运球的描述中划掉字母而得到极佳运球的方法的数量。", "inputFormat": "第一行一个整数 $n$，表示 Bytessi 准备的运球方式种数。\n\n接下来 $n$ 行描述 Bytessi 的运球方式。第 $i$ 行包含一个由 `L` 和 `P` 组成的非空串，描述第 $i$ 种运球方式。", "outputFormat": "输出 $n$ 行，每行 $n$ 个整数。第 $i$ 行第 $j$ 个整数表示如果把第 $i$ 种和第 $j$ 种运球方式相连，新的运球方式中有多少子序列是极佳的，结果对 $10^9+7$ 取模。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 600$，\n\n每种运球方式的长度不超过 $600$。", "locale": "zh-CN"}}}
{"pid": "P9259", "type": "P", "difficulty": 4, "samples": [["5\n1670\n2011\n1560\n1232\n1447\n", "1\n5\n2 1 3 4 5\n"], ["6\n1556\n1449\n1863\n2014\n1333\n1220\n", "2\n5\n5 6 1 4 3\n4\n1 2 3 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "PA（波兰）"], "title": "[PA 2022] Fotografia", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 3 [Fotografia](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/fot/)**\n\n字节科技学校（*Bajtockiej Szkoły Technicznej*, BST）的毕业生们聚集在学校前面的广场上拍摄纪念照。他们排成一排，其位置从左到右编号为 $1$ 至 $n$，其中 $n$ 是今年毕业生的人数。\n\n摄影师决定重新安排这些人的位置，让他们按身高升序排列。最矮的人在最左边，最高的人在最右边。幸运的是，今年的毕业生中没有任意两人身高相同。\n\n为了避免混乱，安排位置将按一定方式进行。在一次操作中，摄影师将喊出一串位置编号。在这些位置上的人将按所喊到的顺序出列并走到广场中间。然后，摄影师将重复同样的数字列表。广场中间的人将他们出列顺序的**逆序**，依次回到摄影师所喊出的位置。\n\n我们希望用尽可能少的操作将所有毕业生按身高的升序排列。你的工作是规划重新安排的方案，并告诉摄影师在第几次操作让哪些毕业生出列。", "inputFormat": "第一行一个整数 $n$，表示毕业生人数。\n\n接下来 $n$ 行是一个整数序列 $h_1,h_2,\\ldots,h_n$，每行一个整数，表示站成一排的人的身高。所有身高两两不同。", "outputFormat": "输出第一行包含一个整数 $r$，表示把所有人按身高升序排列所用的最少操作次数。\n\n接下来 $2r$ 行包含对这些操作的描述。描述第一行包含一个整数 $p_i\\ ()$，表示这一轮出列的人数，第二行 $p_i$ 个整数，表示按输出顺序喊出人的位置编号。在一次操作中喊出的人不能重复。\n\n如果有多种操作次数最少的方案，输出任意一种即可。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 3 \\times 10 ^ 3, 1\\le h_i\\le 3 \\times 10 ^ 3, 1\\le p_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Fotografia", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 3 [Fotografia](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/fot/)**\n\n字节科技学校（*Bajtockiej Szkoły Technicznej*, BST）的毕业生们聚集在学校前面的广场上拍摄纪念照。他们排成一排，其位置从左到右编号为 $1$ 至 $n$，其中 $n$ 是今年毕业生的人数。\n\n摄影师决定重新安排这些人的位置，让他们按身高升序排列。最矮的人在最左边，最高的人在最右边。幸运的是，今年的毕业生中没有任意两人身高相同。\n\n为了避免混乱，安排位置将按一定方式进行。在一次操作中，摄影师将喊出一串位置编号。在这些位置上的人将按所喊到的顺序出列并走到广场中间。然后，摄影师将重复同样的数字列表。广场中间的人将他们出列顺序的**逆序**，依次回到摄影师所喊出的位置。\n\n我们希望用尽可能少的操作将所有毕业生按身高的升序排列。你的工作是规划重新安排的方案，并告诉摄影师在第几次操作让哪些毕业生出列。", "inputFormat": "第一行一个整数 $n$，表示毕业生人数。\n\n接下来 $n$ 行是一个整数序列 $h_1,h_2,\\ldots,h_n$，每行一个整数，表示站成一排的人的身高。所有身高两两不同。", "outputFormat": "输出第一行包含一个整数 $r$，表示把所有人按身高升序排列所用的最少操作次数。\n\n接下来 $2r$ 行包含对这些操作的描述。描述第一行包含一个整数 $p_i\\ ()$，表示这一轮出列的人数，第二行 $p_i$ 个整数，表示按输出顺序喊出人的位置编号。在一次操作中喊出的人不能重复。\n\n如果有多种操作次数最少的方案，输出任意一种即可。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 3 \\times 10 ^ 3, 1\\le h_i\\le 3 \\times 10 ^ 3, 1\\le p_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9260", "type": "P", "difficulty": 7, "samples": [["5\n8 1 0 4 6\n2 4 2\n3 1 9\n2 5 5\n2 1 2\n", "4 1 1 4 2\n"]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["点分治", "2022", "拓扑排序", "强连通分量", "Tarjan", "分块", "线段树合并", "PA（波兰）", "bitset"], "title": "[PA 2022] Miny", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 4 [Miny](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/min/)**\n\n给定一棵树（无向无环图），树上每条边有一个确定的长度。每个点上都有一颗地雷，每个地雷有一个确定的爆炸半径。如果一个地雷爆炸了，所有距离这颗地雷不超过其爆炸半径的地雷都会爆炸。我们定义两个点之间的距离是这两个点之间简单路径上边的长度和。对于每颗地雷，如果手动引爆它，确定有多少地雷会爆炸。注意对于每颗地雷，我们认为手动引爆它与手动引爆其他地雷互相独立。", "inputFormat": "第一行包含一个整数 $n$，表示树的节点数（也是地雷个数）。树节点编号是从 $1$ 到 $n$ 的整数。\n\n第二行 $n$ 个整数 $r_1,r_2,\\ldots,r_n$，第 $i$ 个整数为位于节点 $i$ 的地雷的爆炸半径。\n\n接下来 $n-1$ 行，每行三个整数 $a_i,b_i,c_i$，表示一条长 $c_i$ 的边连接节点 $a_i$ 和 $b_i$。\n\n保证输入可以正确表示一棵树。", "outputFormat": "对于 $100\\%$ 的数据，满足：\n\n输出一行 $n$ 个整数，第 $i$ 个整数表示如果我们手动引爆在节点 $i$ 上的地雷，有多少地雷会爆炸。", "hint": "$1\\le n\\le 10 ^ 5, 0\\le r_i\\le 10^{18}, 1\\le a_i,b_i\\le n,1\\le c_i\\le 10^{12}$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Miny", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 4 [Miny](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/min/)**\n\n给定一棵树（无向无环图），树上每条边有一个确定的长度。每个点上都有一颗地雷，每个地雷有一个确定的爆炸半径。如果一个地雷爆炸了，所有距离这颗地雷不超过其爆炸半径的地雷都会爆炸。我们定义两个点之间的距离是这两个点之间简单路径上边的长度和。对于每颗地雷，如果手动引爆它，确定有多少地雷会爆炸。注意对于每颗地雷，我们认为手动引爆它与手动引爆其他地雷互相独立。", "inputFormat": "第一行包含一个整数 $n$，表示树的节点数（也是地雷个数）。树节点编号是从 $1$ 到 $n$ 的整数。\n\n第二行 $n$ 个整数 $r_1,r_2,\\ldots,r_n$，第 $i$ 个整数为位于节点 $i$ 的地雷的爆炸半径。\n\n接下来 $n-1$ 行，每行三个整数 $a_i,b_i,c_i$，表示一条长 $c_i$ 的边连接节点 $a_i$ 和 $b_i$。\n\n保证输入可以正确表示一棵树。", "outputFormat": "对于 $100\\%$ 的数据，满足：\n\n输出一行 $n$ 个整数，第 $i$ 个整数表示如果我们手动引爆在节点 $i$ 上的地雷，有多少地雷会爆炸。", "hint": "$1\\le n\\le 10 ^ 5, 0\\le r_i\\le 10^{18}, 1\\le a_i,b_i\\le n,1\\le c_i\\le 10^{12}$", "locale": "zh-CN"}}}
{"pid": "P9261", "type": "P", "difficulty": 6, "samples": [["3 2\n1 5 3\n4 2 6\n", "12 9\n"], ["5 3\n1 3 5 7 9\n2 6 4 8 10\n", "40 14 1\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Płótno", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 4 [Płótno](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/plo/)**\n\n由于圣诞节，Bytie 从父母那里得到了一块大画布，画布被分成 $2n$ 个方格，排列成两行 $n$ 列的矩形。为了方便在上面画画，这块画布被包在在一个很低很宽的圆柱体的侧面上，这样，画布的第一列就与最后一列相邻。如果画布上的两个方格有一条公共边，则认为它们是相邻的。即它们要么在同一列，要么在同一行的相邻列。\n\n数学上，我们可以用一个有序数对 $(y,x)$ 表示画布上的每个方格，其中 $1\\le y\\le 2,1\\le x\\le n$。两个方格 $(y_1,x_1)$ 和 $(y_2,x_2)$ 相邻，如果满足：\n\n- 它们在同一行，即 $y_1=y_2$，并且列相邻，即 $x_1+1\\equiv x_2 \\pmod n$ 或 $x_2+1\\equiv x_1\\pmod n$，或者\n- 它们在同一列，即 $x_1=x_2$。\n\nBytie 一到画布前，就把 $2n$ 个方格的每一个都画成了**不同**的颜色。为简单起见，我们用 $1$ 到 $2n$ 的整数来表示颜色。\n\n每个看到这个孩子的劳动成果的人都对这么小的孩子能够创造出如此宏伟的作品而感到非常惊讶。这甚至吸引了著名的艺术评论家 Bytona Bitego。他决定亲眼看看是什么让人们如此着迷，他将用自己特别准备的方法评估他的画，其方法如下：\n\n我们选择一个特定的颜色区间 $[l, r]$，然后只考虑颜色在这个区间内的方格。我们称这个颜色区间的好奇值等于这些方格形成的连通区域的数量。如果存在一连串颜色在 $[l, r]$ 中的相邻方格使得两个颜色在 $[l,r]$ 的方格连通，那么这两个方格就在一个区域内。\n\nBytona Bitego 想知道对于每个 $v\\in \\{1,2,\\ldots,k\\}$，有多少区间的好奇值为 $v$。你的任务就是回答他的问题。", "inputFormat": "第一行包含两个整数 $n,k$，分别表示画布的宽度和 Bajtona Bitego 想知道的最大好奇值。\n\n第二行包含 $n$ 个整数，表示画布第一行方格的颜色。从左到右按列编号递增顺序给出。\n\n类似地，第三行包含 $n$ 个整数，表示画布第二行方格的颜色，顺序与第一行相同。\n\n第二行和第三行的数字合起来形成了一个 $1$ 到 $2n$ 的整数排列。", "outputFormat": "输出一行 $k$ 个整数，第 $v$ 个整数表示有多少个区间的好奇值为 $v$。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$2\\le n\\le 10 ^ 5, 1\\le k\\le 10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Płótno", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 4 [Płótno](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/plo/)**\n\n由于圣诞节，Bytie 从父母那里得到了一块大画布，画布被分成 $2n$ 个方格，排列成两行 $n$ 列的矩形。为了方便在上面画画，这块画布被包在在一个很低很宽的圆柱体的侧面上，这样，画布的第一列就与最后一列相邻。如果画布上的两个方格有一条公共边，则认为它们是相邻的。即它们要么在同一列，要么在同一行的相邻列。\n\n数学上，我们可以用一个有序数对 $(y,x)$ 表示画布上的每个方格，其中 $1\\le y\\le 2,1\\le x\\le n$。两个方格 $(y_1,x_1)$ 和 $(y_2,x_2)$ 相邻，如果满足：\n\n- 它们在同一行，即 $y_1=y_2$，并且列相邻，即 $x_1+1\\equiv x_2 \\pmod n$ 或 $x_2+1\\equiv x_1\\pmod n$，或者\n- 它们在同一列，即 $x_1=x_2$。\n\nBytie 一到画布前，就把 $2n$ 个方格的每一个都画成了**不同**的颜色。为简单起见，我们用 $1$ 到 $2n$ 的整数来表示颜色。\n\n每个看到这个孩子的劳动成果的人都对这么小的孩子能够创造出如此宏伟的作品而感到非常惊讶。这甚至吸引了著名的艺术评论家 Bytona Bitego。他决定亲眼看看是什么让人们如此着迷，他将用自己特别准备的方法评估他的画，其方法如下：\n\n我们选择一个特定的颜色区间 $[l, r]$，然后只考虑颜色在这个区间内的方格。我们称这个颜色区间的好奇值等于这些方格形成的连通区域的数量。如果存在一连串颜色在 $[l, r]$ 中的相邻方格使得两个颜色在 $[l,r]$ 的方格连通，那么这两个方格就在一个区域内。\n\nBytona Bitego 想知道对于每个 $v\\in \\{1,2,\\ldots,k\\}$，有多少区间的好奇值为 $v$。你的任务就是回答他的问题。", "inputFormat": "第一行包含两个整数 $n,k$，分别表示画布的宽度和 Bajtona Bitego 想知道的最大好奇值。\n\n第二行包含 $n$ 个整数，表示画布第一行方格的颜色。从左到右按列编号递增顺序给出。\n\n类似地，第三行包含 $n$ 个整数，表示画布第二行方格的颜色，顺序与第一行相同。\n\n第二行和第三行的数字合起来形成了一个 $1$ 到 $2n$ 的整数排列。", "outputFormat": "输出一行 $k$ 个整数，第 $v$ 个整数表示有多少个区间的好奇值为 $v$。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$2\\le n\\le 10 ^ 5, 1\\le k\\le 10$。", "locale": "zh-CN"}}}
{"pid": "P9262", "type": "P", "difficulty": 6, "samples": [["4 5\n.....\n.B.C.\n..C..\n...B.\n3\nGLP\n", "..BCC\n....B\n.....\n.....\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Łamigłówka", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 4 [Łamigłówka](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/lam/)**\n\nByteasar 在玩拼图。它是一个由单元格组成的 $n\\times m$ 大小的矩形。每个单元格可能是空的，也可能包含一个黑色或白色的方块。\n\n在每次操作中，这个玩具可以向平行于矩形边的四个方向之一倾斜。然后所有的方块会朝那个方向滑动到最远可以所处的位置，而不超出矩形范围或重叠。\n\nByteasar 倾斜了多次，请给出倾斜最后一次后整个拼图的状态。", "inputFormat": "第一行两个整数 $n,m$，表示这个矩形的大小。\n\n接下来 $n$ 行，每行一个长为 $m$ 的字符串，表示初始状态。字符串中仅包含三种字符：`.` 表示这个单元格是空的，`B` 表示这个单元格中有一个白色方块，`C` 表示这个单元格中有一个黑色方块。\n\n接下来一行一个整数 $k$，表示 Byteasar 倾斜的次数。\n\n最后一行包含一个长为 $k$ 的字符串，表示 Byteasar 每次的倾斜方向。字符串中仅包含 `G`，`D`，`L`，`P` 四种字符，分别表示向上，向下，向左和向右倾斜。", "outputFormat": "输出这个玩具的最终状态，输出格式与输入的初始状态格式相同，输出 $n$ 行，每行一个长度为 $m$ 的字符串，字符串中仅包含 `.`，`B`，`C` 三种字符。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n,m\\le 500, 1\\le k\\le 5 \\times 10 ^ 5$。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Łamigłówka", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 4 [Łamigłówka](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/lam/)**\n\nByteasar 在玩拼图。它是一个由单元格组成的 $n\\times m$ 大小的矩形。每个单元格可能是空的，也可能包含一个黑色或白色的方块。\n\n在每次操作中，这个玩具可以向平行于矩形边的四个方向之一倾斜。然后所有的方块会朝那个方向滑动到最远可以所处的位置，而不超出矩形范围或重叠。\n\nByteasar 倾斜了多次，请给出倾斜最后一次后整个拼图的状态。", "inputFormat": "第一行两个整数 $n,m$，表示这个矩形的大小。\n\n接下来 $n$ 行，每行一个长为 $m$ 的字符串，表示初始状态。字符串中仅包含三种字符：`.` 表示这个单元格是空的，`B` 表示这个单元格中有一个白色方块，`C` 表示这个单元格中有一个黑色方块。\n\n接下来一行一个整数 $k$，表示 Byteasar 倾斜的次数。\n\n最后一行包含一个长为 $k$ 的字符串，表示 Byteasar 每次的倾斜方向。字符串中仅包含 `G`，`D`，`L`，`P` 四种字符，分别表示向上，向下，向左和向右倾斜。", "outputFormat": "输出这个玩具的最终状态，输出格式与输入的初始状态格式相同，输出 $n$ 行，每行一个长度为 $m$ 的字符串，字符串中仅包含 `.`，`B`，`C` 三种字符。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n,m\\le 500, 1\\le k\\le 5 \\times 10 ^ 5$。 ", "locale": "zh-CN"}}}
{"pid": "P9263", "type": "P", "difficulty": 7, "samples": [["4 5\nO...O\n?OO.?\n.OOO.\n?..O.\n", "5/2\n"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Bakterie", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Bakterie](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/bak/)**\n\nAlbert Bynstein 教授目前正在研究一种新发现的细菌菌株，他给它起了一个代号叫 *Algorithmic Proeliis*。在他的下一个实验中，他准备了一个大的矩形实验台，他将其分为 $n\\cdot m$ 个区域，排列成 $n$ 行，每行 $m$ 个区域。\n\n然后对于每个区域，教授将从三个选项中选择一个：要么他一定会在其中放置一个培养皿，要么他一定不放培养皿，要么他将抛出一枚均匀的硬币来决定放不放培养皿。一旦培养皿放置完毕，为了进行实验就需要选择一个正整数 $k$，并在每个培养皿里放置恰好 $k$ 个细菌。\n\n这种细菌的特点是十分敌视其他菌落，因此实验过程如下：只要有一对相邻的、非空的培养皿，就会随机选出一对这样的培养皿（概率分布相等），之后两个培养皿中各有一个细菌死亡。我们假定，当且仅当两个培养皿所处的区域有一条公共边时，两区域相邻。\n\n考虑到抛硬币决定将培养皿放在某些区域里的随机性，和选择相邻培养皿并让其中的细菌死亡的随机性，令 $f(k)$ 表示在整个实验中存活的细菌的期望数量。显然，当不再有一对相邻的培养皿各含有至少一个细菌时，实验就会结束。\n\n一次在培养皿里放几个细菌很难，但一次性放置很多细菌就会容易得多。为此，教授沉思了一下，然后在黑板上写下了如下表达式：\n$$\n\\lim_{k\\to \\infty}\\frac{f(k)}{k}\n$$\n你作为他的助手，任务是计算上述极限的值。可以证明这个值总是一个可测的数字，所以你需要用一个不可约分数的形式表达这个值。", "inputFormat": "输入第一行包含两个整数 $n,m$，表示这个矩形实验台的大小。\n\n接下来 $n$ 行描述试验台。第 $i$ 行包含 $m$ 个字符，第 $j$ 个字符记为 $a_{i,j}$。如果 $a_{i,j}$ 是 `.`，则第 $i$ 行的第 $j$ 个区域一定不放培养皿。如果 $a_{i,j}$ 是 `O`（大写的 `o`），则第 $i$ 行的第 $j$ 个区域一定放培养皿。如果 $a_{i,j}$ 是 `?`，则第 $i$ 行的第 $j$ 个区域会用投硬币的方式决定放不放培养皿。", "outputFormat": "输出一行，表示对教授问题的回答。按 $a/b$ 的形式输出，其中 $b\\ge 1$ 且 $\\gcd(a,b)=1$。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n,m\\le 200$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Bakterie", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Bakterie](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/bak/)**\n\nAlbert Bynstein 教授目前正在研究一种新发现的细菌菌株，他给它起了一个代号叫 *Algorithmic Proeliis*。在他的下一个实验中，他准备了一个大的矩形实验台，他将其分为 $n\\cdot m$ 个区域，排列成 $n$ 行，每行 $m$ 个区域。\n\n然后对于每个区域，教授将从三个选项中选择一个：要么他一定会在其中放置一个培养皿，要么他一定不放培养皿，要么他将抛出一枚均匀的硬币来决定放不放培养皿。一旦培养皿放置完毕，为了进行实验就需要选择一个正整数 $k$，并在每个培养皿里放置恰好 $k$ 个细菌。\n\n这种细菌的特点是十分敌视其他菌落，因此实验过程如下：只要有一对相邻的、非空的培养皿，就会随机选出一对这样的培养皿（概率分布相等），之后两个培养皿中各有一个细菌死亡。我们假定，当且仅当两个培养皿所处的区域有一条公共边时，两区域相邻。\n\n考虑到抛硬币决定将培养皿放在某些区域里的随机性，和选择相邻培养皿并让其中的细菌死亡的随机性，令 $f(k)$ 表示在整个实验中存活的细菌的期望数量。显然，当不再有一对相邻的培养皿各含有至少一个细菌时，实验就会结束。\n\n一次在培养皿里放几个细菌很难，但一次性放置很多细菌就会容易得多。为此，教授沉思了一下，然后在黑板上写下了如下表达式：\n$$\n\\lim_{k\\to \\infty}\\frac{f(k)}{k}\n$$\n你作为他的助手，任务是计算上述极限的值。可以证明这个值总是一个可测的数字，所以你需要用一个不可约分数的形式表达这个值。", "inputFormat": "输入第一行包含两个整数 $n,m$，表示这个矩形实验台的大小。\n\n接下来 $n$ 行描述试验台。第 $i$ 行包含 $m$ 个字符，第 $j$ 个字符记为 $a_{i,j}$。如果 $a_{i,j}$ 是 `.`，则第 $i$ 行的第 $j$ 个区域一定不放培养皿。如果 $a_{i,j}$ 是 `O`（大写的 `o`），则第 $i$ 行的第 $j$ 个区域一定放培养皿。如果 $a_{i,j}$ 是 `?`，则第 $i$ 行的第 $j$ 个区域会用投硬币的方式决定放不放培养皿。", "outputFormat": "输出一行，表示对教授问题的回答。按 $a/b$ 的形式输出，其中 $b\\ge 1$ 且 $\\gcd(a,b)=1$。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n,m\\le 200$。", "locale": "zh-CN"}}}
{"pid": "P9264", "type": "P", "difficulty": 7, "samples": [["4\n1 2 3 4\n", "24\n"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Drzewa rozpinające", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Drzewa rozpinające](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/drz/)**\n\n给定一个长为 $n$ 的整数序列 $a_1,a_2,\\ldots,a_n$。根据这个序列你可以生成一个 $n$ 个节点的无向图：节点 $i$ 和 $j$ 之间（对于 $i\\neq j$）有 $\\gcd(a_i,a_j)$ 条可区分的边将这两个节点相连。你的任务是计算这个图的生成树数量。如果对于两棵树，其中一棵树包含另一棵树中不存在的边，那么就认为这两棵树不同。因为生成树数量很大，请输出它对 $10^9+7$ 取模后的值。", "inputFormat": "输入第一行一个整数 $n$，表示整数序列的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$，表示这个整数序列。", "outputFormat": "输出一行一个整数，表示生成的图的生成树个数，对 $10^9+7$ 取模。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 5000, 1\\le a_i\\le 5000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Drzewa rozpinające", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Drzewa rozpinające](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/drz/)**\n\n给定一个长为 $n$ 的整数序列 $a_1,a_2,\\ldots,a_n$。根据这个序列你可以生成一个 $n$ 个节点的无向图：节点 $i$ 和 $j$ 之间（对于 $i\\neq j$）有 $\\gcd(a_i,a_j)$ 条可区分的边将这两个节点相连。你的任务是计算这个图的生成树数量。如果对于两棵树，其中一棵树包含另一棵树中不存在的边，那么就认为这两棵树不同。因为生成树数量很大，请输出它对 $10^9+7$ 取模后的值。", "inputFormat": "输入第一行一个整数 $n$，表示整数序列的长度。\n\n第二行 $n$ 个整数 $a_1,a_2,\\ldots,a_n$，表示这个整数序列。", "outputFormat": "输出一行一个整数，表示生成的图的生成树个数，对 $10^9+7$ 取模。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 5000, 1\\le a_i\\le 5000$。", "locale": "zh-CN"}}}
{"pid": "P9265", "type": "P", "difficulty": 7, "samples": [["7\n2 1 4 7 3 6 5\n", "1 1 9 5 6 7 7\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Chodzenie po linie", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Chodzenie po linie](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/lin/)**\n\nByteasar 是世界著名的马戏团演员，他擅长走钢丝，并在钢丝之间穿行。在他著名的表演中，马戏团帐篷的天花板下拉了 $n$ 条钢丝。如果我们俯瞰帐篷，并将其放置在坐标系中，第 $i\\ (i=1,2,\\ldots,n)$ 条钢丝连接点 $(i,0)$ 和点 $(p_i,1)$，其中序列 $p_1,p_2,\\ldots,p_n$ 是 $1$ 到 $n$ 整数的一个排列。\n\nByteasar 站在其中一条钢丝上开始表演，并让观众给他一些钢丝的编号。他的目标是站在观众所说的那条钢丝上面。Byteasar 非常善于沿钢丝移动，但从一条钢丝移动到另一条钢丝是相当复杂的。因为他非常勇敢，但并不愚蠢，只有两条钢丝相交时，他才能从一条钢丝移到另一条钢丝上。所有的钢丝都悬挂在相似的高度，所以这样的移动总能成功，但这是相当累人的。出于这个原因，Byteasar 将选择一条不同钢丝之间交点个数最少的路线。唯一的例外是当以这种方式不可能到达目标钢丝的情况——在这种情况下，Byteasar 将礼貌地感谢观众并回到后台，从而不进行任何穿越。\n\n然而，Byteasar 不确定他应该从哪根钢丝开始他的表演。对于这些钢丝的每一根，他都想知道对于观众所有可能的选择，他最少经过交点个数的和。帮他写一个程序来计算这些值。", "inputFormat": "输入第一行一个整数 $n$，表示钢丝数量。\n\n第二行 $n$ 个整数 $p_1,p_2,\\ldots,p_n$，，意义如题目描述。", "outputFormat": "输出一行 $n$ 个整数，第 $i$ 个整数表示如果 Byteasar 从第 $i$ 根钢丝出发，对于观众所有可能的选择，他最少经过交点个数的和。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 2 \\times 10 ^ 5, 1\\le p_i\\le n$，\n\n保证对于任意 $i,j\\ (i\\neq j)$，满足 $p_i\\neq p_j$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Chodzenie po linie", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Chodzenie po linie](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/lin/)**\n\nByteasar 是世界著名的马戏团演员，他擅长走钢丝，并在钢丝之间穿行。在他著名的表演中，马戏团帐篷的天花板下拉了 $n$ 条钢丝。如果我们俯瞰帐篷，并将其放置在坐标系中，第 $i\\ (i=1,2,\\ldots,n)$ 条钢丝连接点 $(i,0)$ 和点 $(p_i,1)$，其中序列 $p_1,p_2,\\ldots,p_n$ 是 $1$ 到 $n$ 整数的一个排列。\n\nByteasar 站在其中一条钢丝上开始表演，并让观众给他一些钢丝的编号。他的目标是站在观众所说的那条钢丝上面。Byteasar 非常善于沿钢丝移动，但从一条钢丝移动到另一条钢丝是相当复杂的。因为他非常勇敢，但并不愚蠢，只有两条钢丝相交时，他才能从一条钢丝移到另一条钢丝上。所有的钢丝都悬挂在相似的高度，所以这样的移动总能成功，但这是相当累人的。出于这个原因，Byteasar 将选择一条不同钢丝之间交点个数最少的路线。唯一的例外是当以这种方式不可能到达目标钢丝的情况——在这种情况下，Byteasar 将礼貌地感谢观众并回到后台，从而不进行任何穿越。\n\n然而，Byteasar 不确定他应该从哪根钢丝开始他的表演。对于这些钢丝的每一根，他都想知道对于观众所有可能的选择，他最少经过交点个数的和。帮他写一个程序来计算这些值。", "inputFormat": "输入第一行一个整数 $n$，表示钢丝数量。\n\n第二行 $n$ 个整数 $p_1,p_2,\\ldots,p_n$，，意义如题目描述。", "outputFormat": "输出一行 $n$ 个整数，第 $i$ 个整数表示如果 Byteasar 从第 $i$ 根钢丝出发，对于观众所有可能的选择，他最少经过交点个数的和。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 2 \\times 10 ^ 5, 1\\le p_i\\le n$，\n\n保证对于任意 $i,j\\ (i\\neq j)$，满足 $p_i\\neq p_j$。", "locale": "zh-CN"}}}
{"pid": "P9266", "type": "P", "difficulty": 7, "samples": [["15 2\n())(()())()(())\n", "6\n"], ["15 3\n())(()())()(())\n", "3\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Nawiasowe podziały", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Nawiasowe podziały](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/naw/)**\n\n我确信你是知道括号序列的，但是以防万一，并且作为回顾，让我们回忆一下它的定义：\n\n- `()` 是一个合法的括号序列。\n- 如果 $S$ 是一个合法的括号序列，那么 `(S)` 也是一个合法的括号序列。\n- 如果 $S_1$ 和 $S_2$ 都是合法的括号序列，那么 $S_1S_2$ 也是一个合法的括号序列。\n- 不符合上述规则的括号序列都不是合法的括号序列。\n\n给出一个长度为 $n$ 且仅由字符 `(` 和 `)` 组成的字符串，以及一个数字 $k$，这个字符串不一定是合法的括号序列。你的任务是把它分成 $k$ 个非空段（每个字符必须恰好属于一段内），使得每段中是合法括号序列的子串个数之和最小。", "inputFormat": "第一行两个整数 $n,k$，分别表示字符串长度和要分成的段数。\n\n第二行一个长度为 $n$ 的字符串，保证字符串仅由 `(` 和 `)` 组成。", "outputFormat": "输出一行一个整数，表示所有段中是合法括号序列的子串个数之和的最小值。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le k\\le n\\le 10 ^ 5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Nawiasowe podziały", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Nawiasowe podziały](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/naw/)**\n\n我确信你是知道括号序列的，但是以防万一，并且作为回顾，让我们回忆一下它的定义：\n\n- `()` 是一个合法的括号序列。\n- 如果 $S$ 是一个合法的括号序列，那么 `(S)` 也是一个合法的括号序列。\n- 如果 $S_1$ 和 $S_2$ 都是合法的括号序列，那么 $S_1S_2$ 也是一个合法的括号序列。\n- 不符合上述规则的括号序列都不是合法的括号序列。\n\n给出一个长度为 $n$ 且仅由字符 `(` 和 `)` 组成的字符串，以及一个数字 $k$，这个字符串不一定是合法的括号序列。你的任务是把它分成 $k$ 个非空段（每个字符必须恰好属于一段内），使得每段中是合法括号序列的子串个数之和最小。", "inputFormat": "第一行两个整数 $n,k$，分别表示字符串长度和要分成的段数。\n\n第二行一个长度为 $n$ 的字符串，保证字符串仅由 `(` 和 `)` 组成。", "outputFormat": "输出一行一个整数，表示所有段中是合法括号序列的子串个数之和的最小值。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le k\\le n\\le 10 ^ 5$。", "locale": "zh-CN"}}}
{"pid": "P9267", "type": "P", "difficulty": 4, "samples": [["7\n3 2 3 5\n2 3 6\n3 5 6 7\n1 6\n1 7\n0\n0\n", "6\n"], ["3\n0\n1 3\n0\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "PA（波兰）"], "title": "[PA 2022] Walizki", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Walizki](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/wal/)**\n\n有没有想过，你在机场办理完了登机手续，你的行李箱会去哪里？就在它们消失的帘子后面，有一个巨大的大厅，里面布满了错综复杂的平台和传送带，对你的行李进行相应的分类。\n\nByteasar 负责评估新规划的 Byteburg Bitom 机场的行李大厅的设计。根据规划，大厅里将有 $n$ 个平台，用 $1$ 到 $n$ 的整数编号，每个行李箱最初都要运输到第一个平台。一些单向传送带可以从平台出发，连接到编号严格更大的平台。如果一个平台没有传送带出口，在这个平台的行李箱将由机场工作人员手动拿走并转移到相应的飞机上。另一方面，如果平台接有多条出口传送带，那么传送带的顺序就很重要——第一个行李箱遇到这样的平台，就会从第一条传送带上离开，第二个就会从第二条上离开，以此类推。当行李箱从最后一条传送带离开平台时，下一个行李箱又会从第一条传送带离开，如此循环往复。\n\n一旦一个行李箱被送到第一个平台，它在传送带上的运输和工作人员的收集都在下一个行李箱放在第一个平台之前进行。换句话说，在任何时候，最多只有一个行李箱在传送带上运输。\n\n可以想见，在处理了一定数量的行李箱后，这个行李系统会「复位」，即回到对于每个有出口传送带的平台，行李箱到达平台后都从第一条出口传送带离开的状态。Byteasar 想知道最少处理多少行李箱之后，系统将自我复位。请帮他计算出这个值！", "inputFormat": "第一行一个整数 $n$，表示平台个数。\n\n接下来 $n$ 行描述平台。第 $i$ 行开头一个非负整数 $r_i$，表示从第 $i$ 个平台离开的传送带条数。如果 $r_i=0$，表示工作人员从这个平台取行李。如果 $r_i>0$，这一行接着有 $r_i$ 个整数 $l_{i,1},l_{i,2},\\ldots,l_{i,r_i}$，按顺序表示出口传送带连接的平台编号（到达的平台编号也同样是递增的）。", "outputFormat": "输出一行一个整数，表示最少处理多少行李箱之后，系统将自我复位。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 100, i<l_{i,1}<l_{i,2}<\\ldots<l_{i,r_i}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Walizki", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Walizki](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/wal/)**\n\n有没有想过，你在机场办理完了登机手续，你的行李箱会去哪里？就在它们消失的帘子后面，有一个巨大的大厅，里面布满了错综复杂的平台和传送带，对你的行李进行相应的分类。\n\nByteasar 负责评估新规划的 Byteburg Bitom 机场的行李大厅的设计。根据规划，大厅里将有 $n$ 个平台，用 $1$ 到 $n$ 的整数编号，每个行李箱最初都要运输到第一个平台。一些单向传送带可以从平台出发，连接到编号严格更大的平台。如果一个平台没有传送带出口，在这个平台的行李箱将由机场工作人员手动拿走并转移到相应的飞机上。另一方面，如果平台接有多条出口传送带，那么传送带的顺序就很重要——第一个行李箱遇到这样的平台，就会从第一条传送带上离开，第二个就会从第二条上离开，以此类推。当行李箱从最后一条传送带离开平台时，下一个行李箱又会从第一条传送带离开，如此循环往复。\n\n一旦一个行李箱被送到第一个平台，它在传送带上的运输和工作人员的收集都在下一个行李箱放在第一个平台之前进行。换句话说，在任何时候，最多只有一个行李箱在传送带上运输。\n\n可以想见，在处理了一定数量的行李箱后，这个行李系统会「复位」，即回到对于每个有出口传送带的平台，行李箱到达平台后都从第一条出口传送带离开的状态。Byteasar 想知道最少处理多少行李箱之后，系统将自我复位。请帮他计算出这个值！", "inputFormat": "第一行一个整数 $n$，表示平台个数。\n\n接下来 $n$ 行描述平台。第 $i$ 行开头一个非负整数 $r_i$，表示从第 $i$ 个平台离开的传送带条数。如果 $r_i=0$，表示工作人员从这个平台取行李。如果 $r_i>0$，这一行接着有 $r_i$ 个整数 $l_{i,1},l_{i,2},\\ldots,l_{i,r_i}$，按顺序表示出口传送带连接的平台编号（到达的平台编号也同样是递增的）。", "outputFormat": "输出一行一个整数，表示最少处理多少行李箱之后，系统将自我复位。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n\\le 100, i<l_{i,1}<l_{i,2}<\\ldots<l_{i,r_i}$。", "locale": "zh-CN"}}}
{"pid": "P9268", "type": "P", "difficulty": 4, "samples": [["1 5\nO....\n\n....O\n", "0.25"], ["2 2\nO.\n.O\n\nOO\n..\n", "0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "PA（波兰）"], "title": "[PA 2022] Wieczór gier", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Wieczór gier](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/wie/)**\n\nBytie 喜欢在晚上玩他最喜欢的棋盘游戏。幸运的是，这个游戏是单人游戏，Bytie 不需要和朋友一起玩这个游戏。\n\n棋盘共 $n$ 行，每行有 $m$ 个方格，整个棋盘共有 $nm$ 个方格。棋盘上有 $k$ 个无法区分的棋子，最多只有 $8$ 个。 棋盘的边缘有装饰性的标记，这些标记表明了棋盘的上下左右方位。每个方格可能是空的，也可能放有一个棋子，但棋盘上总是至少有一个棋子，而且至少有一个方格是空的。换句话说，满足 $1\\le k\\le nm-1$。游戏中一步棋指的是选择一个包含棋子的方格和与之相邻的另一个不包含棋子的方格，然后将棋子从这个方格移到相邻的空方格中。\n\nBytie 喜欢这个不复杂但令人兴奋的规则，他可以花几个小时来移动棋子。一天晚上，他坐在棋盘前，在棋盘上摆了 $k$ 个棋子，并想到了一种棋子的排布方式，这种排布方式也许与开始时不同。他说，每次他要走一步棋时，他都会确定现在所有棋子的所有可能走法，并从这些走法中随机选出他要怎么走棋。例如，如果棋盘上有两个棋子，第一个棋子有一种走法，第二个棋子有两种走法，那么 Bytie 将以 $\\frac{1}{3}$ 的概率从这三种走法中选出一种来走下一步棋。\n\nBytie（正如我们已经提到的）非常喜欢玩这个游戏，所以他已经确定他会正好走 $100^{100^{100^{100}}}$ 步棋。在走了这么多步之后，棋盘上的棋子排布和目标排布相同的概率是多少？", "inputFormat": "第一行两个整数 $n,m$，分别表示棋盘的行数和列数。\n\n接下来 $n$ 行，每行 $m$ 个字符，表示初始的棋盘排布。如果第 $i$ 行第 $j$ 个字符是 `.`，那么棋盘第 $i$ 行第 $j$ 列的方格是空的。否则，这个字符将是 `O`（大写的 `o`），表示第 $i$ 行第 $j$ 列的方格中有一个棋子。\n\n接下来空一行，再接下来 $n$ 行描述目标状态，格式如初始状态。\n\n保证两个棋盘上的棋子个数相同，并且这个个数属于区间 $[1,nm-1]$。此外，保证棋子数不超过 $8$。", "outputFormat": "输出一行一个实数，表示在恰好走了 $100^{100^{100^{100}}}$ 步棋后，棋盘上的棋子排布和目标排布相同的概率。如果输出与答案的**绝对**误差不超过 $10^{-13}$，那么输出将被认为是正确的。\n\n注意：由于技术原因，输出小数点后位数多于 $18$ 位，或输出科学计数法形式的小数均将被判为「答案错误」。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n,m\\le 8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2022] Wieczór gier", "background": "", "description": "**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 5 [Wieczór gier](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/wie/)**\n\nBytie 喜欢在晚上玩他最喜欢的棋盘游戏。幸运的是，这个游戏是单人游戏，Bytie 不需要和朋友一起玩这个游戏。\n\n棋盘共 $n$ 行，每行有 $m$ 个方格，整个棋盘共有 $nm$ 个方格。棋盘上有 $k$ 个无法区分的棋子，最多只有 $8$ 个。 棋盘的边缘有装饰性的标记，这些标记表明了棋盘的上下左右方位。每个方格可能是空的，也可能放有一个棋子，但棋盘上总是至少有一个棋子，而且至少有一个方格是空的。换句话说，满足 $1\\le k\\le nm-1$。游戏中一步棋指的是选择一个包含棋子的方格和与之相邻的另一个不包含棋子的方格，然后将棋子从这个方格移到相邻的空方格中。\n\nBytie 喜欢这个不复杂但令人兴奋的规则，他可以花几个小时来移动棋子。一天晚上，他坐在棋盘前，在棋盘上摆了 $k$ 个棋子，并想到了一种棋子的排布方式，这种排布方式也许与开始时不同。他说，每次他要走一步棋时，他都会确定现在所有棋子的所有可能走法，并从这些走法中随机选出他要怎么走棋。例如，如果棋盘上有两个棋子，第一个棋子有一种走法，第二个棋子有两种走法，那么 Bytie 将以 $\\frac{1}{3}$ 的概率从这三种走法中选出一种来走下一步棋。\n\nBytie（正如我们已经提到的）非常喜欢玩这个游戏，所以他已经确定他会正好走 $100^{100^{100^{100}}}$ 步棋。在走了这么多步之后，棋盘上的棋子排布和目标排布相同的概率是多少？", "inputFormat": "第一行两个整数 $n,m$，分别表示棋盘的行数和列数。\n\n接下来 $n$ 行，每行 $m$ 个字符，表示初始的棋盘排布。如果第 $i$ 行第 $j$ 个字符是 `.`，那么棋盘第 $i$ 行第 $j$ 列的方格是空的。否则，这个字符将是 `O`（大写的 `o`），表示第 $i$ 行第 $j$ 列的方格中有一个棋子。\n\n接下来空一行，再接下来 $n$ 行描述目标状态，格式如初始状态。\n\n保证两个棋盘上的棋子个数相同，并且这个个数属于区间 $[1,nm-1]$。此外，保证棋子数不超过 $8$。", "outputFormat": "输出一行一个实数，表示在恰好走了 $100^{100^{100^{100}}}$ 步棋后，棋盘上的棋子排布和目标排布相同的概率。如果输出与答案的**绝对**误差不超过 $10^{-13}$，那么输出将被认为是正确的。\n\n注意：由于技术原因，输出小数点后位数多于 $18$ 位，或输出科学计数法形式的小数均将被判为「答案错误」。", "hint": "对于 $100\\%$ 的数据，满足：\n\n$1\\le n,m\\le 8$。", "locale": "zh-CN"}}}
{"pid": "P9269", "type": "P", "difficulty": 5, "samples": [["2\n0\n1\n2", "1 1 1 1\n1 2 1 2\n2 1 2 2\nEND\n01\n11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "交互题", "Special Judge", "CEOI（中欧）", "前缀和"], "title": "[CEOI 2013] 新宝岛 / Treasure", "background": "翻译自 [CEOI 2013 Day 1](https://ceoi2013.hsin.hr/tasks/tasks_day1.pdf)。\n\n**这是一道 IO 交互题。**\n\n一次地震过后，亚得里亚海出现了一座新岛。在岛上发现了一个特殊装置，名叫“神谕”。尽管没有说明手册，但考古学家和计算机专家的队伍成功地理解了它的行为。\n\n神谕提供了一些有关该岛宝藏位置的信息。该岛被分为一个 $N$ 行 $N$ 列的网格，其中行和列都从 $1$ 到 $N$ 编号。网格中的一些单元格包含宝藏。神谕只会回答以下形式的问题：“给定网格中的一个矩形，在这个矩形中，有多少个单元格包含宝藏？”\n\n**尽管神谕可以回答所有大小的矩形问题，但发现请求的信息越具体（矩形越小），神谕在回答时消耗的能量越多**。更精确地说，如果一个矩形包含 $S$ 个单元格，则神谕将使用 $1 + N \\times N - S$ 个单位的能量来回答。", "description": "编写一个程序，通过与神谕交互的方式，确定该岛上所有含有宝藏的单元格的位置。我们不希望在此过程中使用过多的能量，能量使用越少越好。但是也不要求使用的能量数量是最小的，具体得分规则见最后的“说明/提示”。\n\n这是一个交互式任务。您的程序使用标准输出向神谕提问，并通过读取标准输入来获得答案。\n\n- 在程序开始时，它应该读取一个整数 $N$（$2 \\leq N \\leq 100$），表示网格的大小。\n- 要向神谕提问，您的程序应输出一行包含 $4$ 个整数 $R_1$、$C_1$、$R_2$ 和 $C_2$，它们之间由空格分隔，使得 $1 \\leq R_1 \\leq R_2 \\leq N$ 和 $1 \\leq C_1 \\leq C_2 \\leq N$ 成立。如果条件不成立或行格式不正确，则您的程序在该测试运行中将得零分。\n- 神谕将响应一个包含单个整数的行 - 包含宝藏的矩形中提供的单元格数。更确切地说，是 $R_1 \\leq R \\leq R_2$ 且 $C_1 \\leq C \\leq C_2$ 且位于行 $R$、列 $C$ 的单元格包含宝藏的单元格数（$R$，$C$）。\n- 当程序完成提问（已经确定所有宝藏的位置）后，它应在新的一行上输出 `END`。然后，再输出 $N$ 行，每行包含 $N$ 个 `0` 或 `1` 字符的字符串。第 $R$ 行中的第 $C$ 个字符是 `1`，如果该行中列 $C$ 的单元格中有宝藏，则为 `0`，如果没有，则为 `1`。行从顶部到底部编号为 $1$ 到 $N$，列从左到右编号。一旦您的程序输出解决方案，程序的执行将会自动终止。\n\n为了与评分器正确交互，需要在每个问题和写出解决方案后**刷新标准输出**，这是交互题的惯例。\n\n在每个测试运行中，可以假定神谕必然正确回答问题，并且在交互之前宝藏的位置是确定的。换句话说，答案不会取决于程序先前问的问题（不会根据你问的问题来改变答案），它在每个测试点都是固定的。", "inputFormat": "该任务是一个交互式任务。要成功完成任务，需要编写一个程序以最大化降低向神谕提问的次数和使用的能量。在程序开始时，输入岛屿的大小 $N$。", "outputFormat": "通过输出行号和列号的方式向神谕询问包含宝藏的单元格数量。每当程序获得答案后，就要输出 `END`，然后将宝藏位置汇总并输出。最终得分将由程序使用的能量数量确定。具体评分标准在题目的最后面，具体格式可见输入输出的一组样例。", "hint": "[样例解释](https://www.luogu.com.cn/paste/tpzc0qdt)\n\n每个测试用例得分为 $10$ 分。如果程序的输出不正确，则该测试用例得零分。否则，根据神谕使用的总能量单位 $K$ 来确定分数。\n\n具体而言:\n- 如果 $K ≤ \\frac{7}{16} N^4 + N^2$，则得 $10$ 分。\n- 否则，如果 $K ≤ \\frac{7}{16} N^4 + 2N^3$，则得 $8$ 分。\n- 否则，如果 $K ≤ \\frac{3}{4} N^4$，则得 $4$ 分。\n- 否则，如果 $K ≤ N^4$，则得 $1$ 分。\n- 否则，得 $0$ 分。\n\n此外，在至少占总分 $40\\%$ 的测试数据中，$N$ 将最多为 $20$。\n\n总而言之，**花费的能量越少，你的得分就越高**。\n\n交互库/SPJ 提供者：@[Sprague_Garundy](https://www.luogu.com.cn/user/764746) 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2013] 新宝岛 / Treasure", "background": "翻译自 [CEOI 2013 Day 1](https://ceoi2013.hsin.hr/tasks/tasks_day1.pdf)。\n\n**这是一道 IO 交互题。**\n\n一次地震过后，亚得里亚海出现了一座新岛。在岛上发现了一个特殊装置，名叫“神谕”。尽管没有说明手册，但考古学家和计算机专家的队伍成功地理解了它的行为。\n\n神谕提供了一些有关该岛宝藏位置的信息。该岛被分为一个 $N$ 行 $N$ 列的网格，其中行和列都从 $1$ 到 $N$ 编号。网格中的一些单元格包含宝藏。神谕只会回答以下形式的问题：“给定网格中的一个矩形，在这个矩形中，有多少个单元格包含宝藏？”\n\n**尽管神谕可以回答所有大小的矩形问题，但发现请求的信息越具体（矩形越小），神谕在回答时消耗的能量越多**。更精确地说，如果一个矩形包含 $S$ 个单元格，则神谕将使用 $1 + N \\times N - S$ 个单位的能量来回答。", "description": "编写一个程序，通过与神谕交互的方式，确定该岛上所有含有宝藏的单元格的位置。我们不希望在此过程中使用过多的能量，能量使用越少越好。但是也不要求使用的能量数量是最小的，具体得分规则见最后的“说明/提示”。\n\n这是一个交互式任务。您的程序使用标准输出向神谕提问，并通过读取标准输入来获得答案。\n\n- 在程序开始时，它应该读取一个整数 $N$（$2 \\leq N \\leq 100$），表示网格的大小。\n- 要向神谕提问，您的程序应输出一行包含 $4$ 个整数 $R_1$、$C_1$、$R_2$ 和 $C_2$，它们之间由空格分隔，使得 $1 \\leq R_1 \\leq R_2 \\leq N$ 和 $1 \\leq C_1 \\leq C_2 \\leq N$ 成立。如果条件不成立或行格式不正确，则您的程序在该测试运行中将得零分。\n- 神谕将响应一个包含单个整数的行 - 包含宝藏的矩形中提供的单元格数。更确切地说，是 $R_1 \\leq R \\leq R_2$ 且 $C_1 \\leq C \\leq C_2$ 且位于行 $R$、列 $C$ 的单元格包含宝藏的单元格数（$R$，$C$）。\n- 当程序完成提问（已经确定所有宝藏的位置）后，它应在新的一行上输出 `END`。然后，再输出 $N$ 行，每行包含 $N$ 个 `0` 或 `1` 字符的字符串。第 $R$ 行中的第 $C$ 个字符是 `1`，如果该行中列 $C$ 的单元格中有宝藏，则为 `0`，如果没有，则为 `1`。行从顶部到底部编号为 $1$ 到 $N$，列从左到右编号。一旦您的程序输出解决方案，程序的执行将会自动终止。\n\n为了与评分器正确交互，需要在每个问题和写出解决方案后**刷新标准输出**，这是交互题的惯例。\n\n在每个测试运行中，可以假定神谕必然正确回答问题，并且在交互之前宝藏的位置是确定的。换句话说，答案不会取决于程序先前问的问题（不会根据你问的问题来改变答案），它在每个测试点都是固定的。", "inputFormat": "该任务是一个交互式任务。要成功完成任务，需要编写一个程序以最大化降低向神谕提问的次数和使用的能量。在程序开始时，输入岛屿的大小 $N$。", "outputFormat": "通过输出行号和列号的方式向神谕询问包含宝藏的单元格数量。每当程序获得答案后，就要输出 `END`，然后将宝藏位置汇总并输出。最终得分将由程序使用的能量数量确定。具体评分标准在题目的最后面，具体格式可见输入输出的一组样例。", "hint": "[样例解释](https://www.luogu.com.cn/paste/tpzc0qdt)\n\n每个测试用例得分为 $10$ 分。如果程序的输出不正确，则该测试用例得零分。否则，根据神谕使用的总能量单位 $K$ 来确定分数。\n\n具体而言:\n- 如果 $K ≤ \\frac{7}{16} N^4 + N^2$，则得 $10$ 分。\n- 否则，如果 $K ≤ \\frac{7}{16} N^4 + 2N^3$，则得 $8$ 分。\n- 否则，如果 $K ≤ \\frac{3}{4} N^4$，则得 $4$ 分。\n- 否则，如果 $K ≤ N^4$，则得 $1$ 分。\n- 否则，得 $0$ 分。\n\n此外，在至少占总分 $40\\%$ 的测试数据中，$N$ 将最多为 $20$。\n\n总而言之，**花费的能量越少，你的得分就越高**。\n\n交互库/SPJ 提供者：@[Sprague_Garundy](https://www.luogu.com.cn/user/764746) 。", "locale": "zh-CN"}}}
{"pid": "P9270", "type": "P", "difficulty": 4, "samples": [["3 7\nE\nE\nE\nL 2\nE\nL 1\nE", "1 1\n3 2\n1 2\n3 1\n1 1"], ["13 9\nE\nE\nE\nE\nE\nE\nE\nE\nE", "1 1\n13 2\n7 1\n4 2\n10 1\n2 2\n3 1\n5 1\n6 2"], ["10 9\nE\nE\nE\nE\nL 3\nE\nE\nL 6\nE", "1 1\n10 2\n5 2\n7 1\n4 2\n2 2\n4 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "CEOI（中欧）"], "title": "[CEOI 2013] 有轨电车 / Tram", "background": "翻译自 [CEOI 2013 Day 1](https://ceoi2013.hsin.hr/tasks/tasks_day1.pdf)。\n\n在萨格勒布运营的电车的座位就像一个 $n$ 行 $2$ 列的网格，两个座位之间的距离，是相应网格正方形中心之间的欧几里得距离（直线距离）。\n\n\n大多数乘客在使用公共交通工具时会社恐，也就是说，当乘客进入电车时，会选择一个没有人坐的座位，并且该座位与最近的座位的距离尽可能大。如果有多个这样的座位，他们总是会选择一个行号较小的座位（因为这样他不需要走太远）。如果仍然有多个这种座位，他们会选择列号较小（即列号为 $1$）的座位。乘客选择座位后，会一直坐在那里，直到他离开电车。如果电车是空的，进入的乘客将始终选择第 $1$ 排第 $1$ 列的座位。", "description": "给定一系列事件，每个事件都是乘客进入或离开电车。你需要输出这位乘客进入时他会坐在哪里。电车一开始是空的。\n\n输入中有 $m$ 个事件，按事件发生的顺序编号为 $1$ 到 $m$。有两种事件：`E` 类事件表示乘客进入有轨电车，而 `L` 类事件则表示乘客离开有轨电车。对于类型为 `L` 的事件，还给出了一个整数 $p$，它表示在该事件中离开的乘客是在**事件** $p$ 中进入的乘客。\n\n测试数据确保每当乘客试图进入电车时，电车中至少有一个空位。", "inputFormat": "第一行输入包含两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，其中第 $i$ 行表示事件 $i$ 的内容，首先输入一个字符 `E` 或 `L`，当字符是 `L` 时再输入一个数 $p_i$，保证事件 $p_i$ 的类型一定是 `E`。", "outputFormat": "输出中的行数应等于输入中 `E` 类事件的数量。对于第 $i$ 个类型为 `E` 的事件，在第 $i$ 行上输出该乘客选择的座位号 $r,c$（行和列），中间用一个空格隔开。", "hint": "对于 $25\\%$ 的数据，$n,m\\le150$。\n\n对于 $45\\%$ 的数据，$n\\le1500$。\n\n对于 $65\\%$ 的数据，$m\\le1500$。\n\n对于 $100\\%$ 的数据，$n\\le150000,m\\le30000$。\n\n前三个测试点是样例。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2013] 有轨电车 / Tram", "background": "翻译自 [CEOI 2013 Day 1](https://ceoi2013.hsin.hr/tasks/tasks_day1.pdf)。\n\n在萨格勒布运营的电车的座位就像一个 $n$ 行 $2$ 列的网格，两个座位之间的距离，是相应网格正方形中心之间的欧几里得距离（直线距离）。\n\n\n大多数乘客在使用公共交通工具时会社恐，也就是说，当乘客进入电车时，会选择一个没有人坐的座位，并且该座位与最近的座位的距离尽可能大。如果有多个这样的座位，他们总是会选择一个行号较小的座位（因为这样他不需要走太远）。如果仍然有多个这种座位，他们会选择列号较小（即列号为 $1$）的座位。乘客选择座位后，会一直坐在那里，直到他离开电车。如果电车是空的，进入的乘客将始终选择第 $1$ 排第 $1$ 列的座位。", "description": "给定一系列事件，每个事件都是乘客进入或离开电车。你需要输出这位乘客进入时他会坐在哪里。电车一开始是空的。\n\n输入中有 $m$ 个事件，按事件发生的顺序编号为 $1$ 到 $m$。有两种事件：`E` 类事件表示乘客进入有轨电车，而 `L` 类事件则表示乘客离开有轨电车。对于类型为 `L` 的事件，还给出了一个整数 $p$，它表示在该事件中离开的乘客是在**事件** $p$ 中进入的乘客。\n\n测试数据确保每当乘客试图进入电车时，电车中至少有一个空位。", "inputFormat": "第一行输入包含两个整数 $n$ 和 $m$。\n\n接下来 $m$ 行，其中第 $i$ 行表示事件 $i$ 的内容，首先输入一个字符 `E` 或 `L`，当字符是 `L` 时再输入一个数 $p_i$，保证事件 $p_i$ 的类型一定是 `E`。", "outputFormat": "输出中的行数应等于输入中 `E` 类事件的数量。对于第 $i$ 个类型为 `E` 的事件，在第 $i$ 行上输出该乘客选择的座位号 $r,c$（行和列），中间用一个空格隔开。", "hint": "对于 $25\\%$ 的数据，$n,m\\le150$。\n\n对于 $45\\%$ 的数据，$n\\le1500$。\n\n对于 $65\\%$ 的数据，$m\\le1500$。\n\n对于 $100\\%$ 的数据，$n\\le150000,m\\le30000$。\n\n前三个测试点是样例。", "locale": "zh-CN"}}}
{"pid": "P9271", "type": "P", "difficulty": 6, "samples": [["Po|Px|Sxo#Soo#|o#Soo#|o#", "3\nPo|Px|Sxo#Sox#|o#Soo#|o#"], ["Po|SPo|oo|o#Px|oo|o##Po|Sxo#Po|ox|o#|o#|o#", "7\nPo|SPo|xx|o#Px|ox|o##Po|Sxx#Po|ox|o#|o#|o#"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "Special Judge", "CEOI（中欧）"], "title": "[CEOI 2013] 停车场 / Splot", "background": "翻译自 [CEOI 2013 Day 1](https://ceoi2013.hsin.hr/tasks/tasks_day1.pdf)。\n\n亚得里亚海沿岸和岛屿都有各种形状和大小的美丽沙滩。然而，许多沙滩无法通过汽车到达。为了满足不断增长的需求，沿海附近的一片巨大空地被改建成停车场。\n\n由于参与设计的所有建筑师都具有电气工程背景，想着怎么着自己学过的专业也得用上，于是停车场的布局就类似于在设计电路时常用的串并联图。\n\n停车场由停车位和连接它们的双向道路组成。每条道路连接两个不同的停车位，每一对停车位之间最多只能通过一条道路连接。每个停车位在任何时刻最多只能停放一辆汽车。其他车辆不能通过被占用的停车位行驶。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j207s329.png)\n$$\\text{图 1：构建停车图的规则，对应下面的三点}$$\n\n串并联停车场（也称为 splot，下文称为停车图）是一种由称为源点和终点的两个特定停车位构成的停车场，它是通过使用串并联组合规则从单个停车位构建而成的。每个停车图可以通过编码来指定其结构和停放车辆的位置，编码是一个描述其结构的字符序列。有效的停车图及其编码按照以下递归方式定义：\n\n1. 只包含一个停车位且没有道路的停车场是一个有效的停车图。这个单个停车位既是停车图的源点也是终点。如果停车位为空，则该停车图的编码为小写字母 `o`，如果停车位被汽车占用，则编码为小写字母`x`。\n   - ![](https://cdn.luogu.com.cn/upload/image_hosting/x6vficzn.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n2. 如果 $G_1$ 和 $G_2$ 是两个有效的停车图，它们的串联组合 $G$ 也是一个停车图。串联组合是通过在 $G_1$ 的终点和 $G_2$ 的源点之间添加一条道路来获得的。新获得的停车图 $G$ 的源点是 $G_1$ 的源点，而终点是 $G_2$ 的终点。如果 $E_1$ 和 $E_2$ 分别是停车图 $G_1$ 和 $G_2$ 的编码，则 $G$ 的编码为 `SE1E2#`。换句话说，编码是通过连接大写字母 `S`、组成它的停车图的编码和井号 `#` 获得的。\n   - ![](https://cdn.luogu.com.cn/upload/image_hosting/bzrozfho.png?x-oss-process=image/resize,m_lfit,h_340,w_450)\n\n3. 如果 $G_1$ 和 $G_2$ 是两个有效的停车图，它们的并联组合 $G$ 也是一个有效的停车图。并联组合是通过添加两个新的停车位 $s$ 和 $t$，添加从 $s$ 到 $G_1$ 和 $G_2$ 的源之间的道路，以及从 $t$ 到 $G_1$ 和 $G_2$ 的终端之间的道路得到的。新获得的停车图G的源是新添加的停车位 $s$，而 $G$ 的终端是新添加的停车位 $t$。如果 $E_1$ 和 $E_2$ 分别是停车图 $G_1$ 和 $G_2$ 的编码，而 $E_s$ 和 $E_t$ 是源 $s$ 和终端 $t$ 的编码（如果相应的空间为空，则为小写字母 `o`，否则为小写字母 `x`），则 $G$ 的编码为 `PEs|E1E2|Et#`。换句话说，编码是通过连接大写字母 `P`，源停车位的编码，竖线符号 `|`，被组合的停车图的编码，另一个竖线符号 `|`，终端停车位的编码，最后是井号 `#` 得到的。\n   - ![](https://cdn.luogu.com.cn/upload/image_hosting/czj2m8t8.png?x-oss-process=image/resize,m_lfit,h_340,w_450)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6gyst5bp.png)\n$$\\text{图2：与下面第一个测试示例对应的停车图}$$\n\n例如，上图中给出的停车图的编码是 `Po|Px|Sxo#Soo#|o#Soo#|o#`（译者注：`{Po|[Px|(Sxo#)(Soo#)|o#](Soo#)|o#}`）。请注意，停车图 $G$ 的编码中小写字母（`o` 或 `x`）的数量始终与 $G$ 中的停车位数量相同，并且停车图中的停车位与其编码中的小写字母之间存在一一对应关系。停车场只有一个出口，它就在整个停车图的**源停车位**。如果车辆可以通过一些道路和空的停车位到达源停车位，即它可以离开这个停车图，则我们称该车辆未被阻挡。例如，在上面的停车图中，两辆车都没有被阻挡，但是如果我们将一辆车停在停车图的终端（最右边的节点）上，则其中一辆车将被阻挡。允许将车停在停车图的源停车位上（但是如果这样做，停车图中的所有其他车辆都将被阻挡）。", "description": "停车场的运营商希望以一种方式安排进站的车辆，让图中没有车辆被阻挡。\n\n编写一个程序，计算可以停放在给定停车场的最大汽车总数，（**包括已经在那里的汽车**），使它没有任何汽车被阻挡，也不会移动任何已经在那里的车。此外，程序应该**找到一种方法**来安排停车图中最大数量的汽车。", "inputFormat": "输入一行，包含一个至少 $1$ 个、最多 $10$ 万个字符的序列，表示给定的 splot 的编码。序列中只会出现大写字母 `P` 和 `S`，小写字母 `o` 和 `x`，以及字符 `#`（`ASCII 35`）和 `|`（`ASCII 124`）。根据上面的规则，输入将是一个 splot 的编码。输入保证已经在停车场的汽车都不会被阻挡。", "outputFormat": "输出应包含 $2$ 行。第一行应该包含一个整数 $m$，表示可以停放在 splot 中的最大汽车数量。\n\n第二行应该包含一个字符序列，表示最终将车停放进 splot 的最佳方案。该序列应恰好包含 $m$ 个字母 `x`，并且是通过将原来的一些字母 `o` 替换为 `x` 得来的。\n\n可能有多个最佳安排，程序可以输出其中的任何一个。", "hint": "样例解释见题目描述最后一趴。\n\n如果输出不正确或不完整，但第一行输出（最大汽车数量）是正确的，你将获得相应测试点 $80\\%$ 的分数。\n\n在 $30\\%$ 的测试点中，splot 中的停车位总数最多为 $20$ 个。\n\n在另外 $40\\%$ 的测试点中，splot 为空，即输入不包含字母 `x`。\n\n对于 $100\\%$ 的数据，给定的 splot 的编码最多包含 $10$ 万个字符。\n\nSPJ 提供者：@[cff_0102](https://www.luogu.com.cn/user/542457) 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2013] 停车场 / Splot", "background": "翻译自 [CEOI 2013 Day 1](https://ceoi2013.hsin.hr/tasks/tasks_day1.pdf)。\n\n亚得里亚海沿岸和岛屿都有各种形状和大小的美丽沙滩。然而，许多沙滩无法通过汽车到达。为了满足不断增长的需求，沿海附近的一片巨大空地被改建成停车场。\n\n由于参与设计的所有建筑师都具有电气工程背景，想着怎么着自己学过的专业也得用上，于是停车场的布局就类似于在设计电路时常用的串并联图。\n\n停车场由停车位和连接它们的双向道路组成。每条道路连接两个不同的停车位，每一对停车位之间最多只能通过一条道路连接。每个停车位在任何时刻最多只能停放一辆汽车。其他车辆不能通过被占用的停车位行驶。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j207s329.png)\n$$\\text{图 1：构建停车图的规则，对应下面的三点}$$\n\n串并联停车场（也称为 splot，下文称为停车图）是一种由称为源点和终点的两个特定停车位构成的停车场，它是通过使用串并联组合规则从单个停车位构建而成的。每个停车图可以通过编码来指定其结构和停放车辆的位置，编码是一个描述其结构的字符序列。有效的停车图及其编码按照以下递归方式定义：\n\n1. 只包含一个停车位且没有道路的停车场是一个有效的停车图。这个单个停车位既是停车图的源点也是终点。如果停车位为空，则该停车图的编码为小写字母 `o`，如果停车位被汽车占用，则编码为小写字母`x`。\n   - ![](https://cdn.luogu.com.cn/upload/image_hosting/x6vficzn.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n2. 如果 $G_1$ 和 $G_2$ 是两个有效的停车图，它们的串联组合 $G$ 也是一个停车图。串联组合是通过在 $G_1$ 的终点和 $G_2$ 的源点之间添加一条道路来获得的。新获得的停车图 $G$ 的源点是 $G_1$ 的源点，而终点是 $G_2$ 的终点。如果 $E_1$ 和 $E_2$ 分别是停车图 $G_1$ 和 $G_2$ 的编码，则 $G$ 的编码为 `SE1E2#`。换句话说，编码是通过连接大写字母 `S`、组成它的停车图的编码和井号 `#` 获得的。\n   - ![](https://cdn.luogu.com.cn/upload/image_hosting/bzrozfho.png?x-oss-process=image/resize,m_lfit,h_340,w_450)\n\n3. 如果 $G_1$ 和 $G_2$ 是两个有效的停车图，它们的并联组合 $G$ 也是一个有效的停车图。并联组合是通过添加两个新的停车位 $s$ 和 $t$，添加从 $s$ 到 $G_1$ 和 $G_2$ 的源之间的道路，以及从 $t$ 到 $G_1$ 和 $G_2$ 的终端之间的道路得到的。新获得的停车图G的源是新添加的停车位 $s$，而 $G$ 的终端是新添加的停车位 $t$。如果 $E_1$ 和 $E_2$ 分别是停车图 $G_1$ 和 $G_2$ 的编码，而 $E_s$ 和 $E_t$ 是源 $s$ 和终端 $t$ 的编码（如果相应的空间为空，则为小写字母 `o`，否则为小写字母 `x`），则 $G$ 的编码为 `PEs|E1E2|Et#`。换句话说，编码是通过连接大写字母 `P`，源停车位的编码，竖线符号 `|`，被组合的停车图的编码，另一个竖线符号 `|`，终端停车位的编码，最后是井号 `#` 得到的。\n   - ![](https://cdn.luogu.com.cn/upload/image_hosting/czj2m8t8.png?x-oss-process=image/resize,m_lfit,h_340,w_450)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6gyst5bp.png)\n$$\\text{图2：与下面第一个测试示例对应的停车图}$$\n\n例如，上图中给出的停车图的编码是 `Po|Px|Sxo#Soo#|o#Soo#|o#`（译者注：`{Po|[Px|(Sxo#)(Soo#)|o#](Soo#)|o#}`）。请注意，停车图 $G$ 的编码中小写字母（`o` 或 `x`）的数量始终与 $G$ 中的停车位数量相同，并且停车图中的停车位与其编码中的小写字母之间存在一一对应关系。停车场只有一个出口，它就在整个停车图的**源停车位**。如果车辆可以通过一些道路和空的停车位到达源停车位，即它可以离开这个停车图，则我们称该车辆未被阻挡。例如，在上面的停车图中，两辆车都没有被阻挡，但是如果我们将一辆车停在停车图的终端（最右边的节点）上，则其中一辆车将被阻挡。允许将车停在停车图的源停车位上（但是如果这样做，停车图中的所有其他车辆都将被阻挡）。", "description": "停车场的运营商希望以一种方式安排进站的车辆，让图中没有车辆被阻挡。\n\n编写一个程序，计算可以停放在给定停车场的最大汽车总数，（**包括已经在那里的汽车**），使它没有任何汽车被阻挡，也不会移动任何已经在那里的车。此外，程序应该**找到一种方法**来安排停车图中最大数量的汽车。", "inputFormat": "输入一行，包含一个至少 $1$ 个、最多 $10$ 万个字符的序列，表示给定的 splot 的编码。序列中只会出现大写字母 `P` 和 `S`，小写字母 `o` 和 `x`，以及字符 `#`（`ASCII 35`）和 `|`（`ASCII 124`）。根据上面的规则，输入将是一个 splot 的编码。输入保证已经在停车场的汽车都不会被阻挡。", "outputFormat": "输出应包含 $2$ 行。第一行应该包含一个整数 $m$，表示可以停放在 splot 中的最大汽车数量。\n\n第二行应该包含一个字符序列，表示最终将车停放进 splot 的最佳方案。该序列应恰好包含 $m$ 个字母 `x`，并且是通过将原来的一些字母 `o` 替换为 `x` 得来的。\n\n可能有多个最佳安排，程序可以输出其中的任何一个。", "hint": "样例解释见题目描述最后一趴。\n\n如果输出不正确或不完整，但第一行输出（最大汽车数量）是正确的，你将获得相应测试点 $80\\%$ 的分数。\n\n在 $30\\%$ 的测试点中，splot 中的停车位总数最多为 $20$ 个。\n\n在另外 $40\\%$ 的测试点中，splot 为空，即输入不包含字母 `x`。\n\n对于 $100\\%$ 的数据，给定的 splot 的编码最多包含 $10$ 万个字符。\n\nSPJ 提供者：@[cff_0102](https://www.luogu.com.cn/user/542457) 。", "locale": "zh-CN"}}}
{"pid": "P9272", "type": "P", "difficulty": 5, "samples": [["7\n1 7\n7 5\n4 5\n4 8\n6 6\n6 1\n2 3", "16\n11\n12\n11\n12\n16\n8"], ["4\n1 1\n2 3\n3 2\n4 4", "3\n4\n4\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "CEOI（中欧）"], "title": "[CEOI 2013] 千岛之国 / Adritic", "background": "翻译自 [CEOI 2013 Day 2](https://ceoi2013.hsin.hr/tasks/tasks_day2.pdf)。\n\n“千岛之国”是克罗地亚旅游业在二十世纪九十年代中期的官方口号。虽然这个口号实际上不准确（克罗地亚的岛屿数量略多于 $1000$ 个），但“跳岛旅游”（从一个岛屿航行到另一个岛屿）是一个受欢迎的夏季活动。亚得里亚海的地图是由组成 $2500$ 行和 $2500$ 列的单位正方形组成的网格。行编号从北到南为 $1$ 到 $2500$，而列编号从西到东为 $1$ 到 $2500$。海中有 $N$ 个岛屿，编号为 $1$ 到 $N$，每个岛屿都位于网格的某个单位正方形内。岛屿 $K$ 的位置由相应的网格方格的坐标确定——其行号 $R_K$ 和列号 $C_K$。没有两个岛屿的位置相同。\n\n由于风和海流的影响，只有当岛屿 $B$ 对于 $A$ 来说位于大致的西北或东南方向时才能直接从一个岛屿航行到另一个岛屿。更准确地说，只有在 $R_A < R_B$ 和 $C_A < C_B$ 都成立，或 $R_A > R_B$ 和 $C_A > C_B$ 都成立时，才可以从岛屿 $A$ “跳”到岛屿 $B$。请注意，两个岛屿之间的距离或其他岛屿的存在并不影响从一个岛屿跳到另一个岛屿的可能性。如果无法直接从 $A$ 跳到 $B$，则可能通过其他岛屿使用一些“跳跃”序列从 $A$ 到 $B$ 进行航行。从 $A$ 到 $B$ 的航行距离定义为从 $A$ 到 $B$ 所需的最少“跳跃”次数。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hdqlicpn.png)\n\n例如，在上面的图中，从位于第 $2$ 行第 $3$ 列的岛屿开始，我们可以跳到另外四个岛屿，而剩下的两个岛屿的航行距离为两个跳跃次数。", "description": "一次帆船大会正在计划，组织者正在考虑每个岛屿作为大会的可能场地。在考虑候选岛屿时，他们想知道：如果每个其他岛屿都派出一艘帆船，为了使所有帆船都到达候选岛屿，需要的最小跳数是多少，或者等效地说，从所有其他岛屿到候选岛屿的航行距离之和是多少。\n\n编写一个程序，对于给定 $N$ 个岛屿的位置，对于每个岛屿 $K$，计算所有其他岛屿到岛屿 $K$ 的航行距离之和。测试数据保证，对于所有岛屿 $A$ 和 $B$，可以使用一些跳跃序列从 $A$ 到 $B$ 航行。", "inputFormat": "第一行包含一个整数 $N$（$1\\le N\\le250000$），表示岛屿的数量。接下来的 $N$ 行包含岛屿的位置。每个位置用一对整数表示，它们介于 $1$ 和 $2500$ 之间（包括 $1$ 和 $2500$），分别表示行和列号。", "outputFormat": "输出应包含 $N$ 行。对于每个岛屿，按照它们在输入中给出的顺序，输出从所有其他岛屿到该岛屿的航行距离之和，每个岛屿输出一行。", "hint": "在 $25\\%$ 的测试用例中，$N$ 最多为 $100$。\n\n在 $50\\%$ 的测试用例中，$N$ 最多为 $1500$。\n\n在 $60\\%$ 的测试用例中，$N$ 最多为 $5000$。\n\n在 $80\\%$ 的测试用例中，$N$ 最多为 $25000$。\n\n在 $100\\%$ 的测试用例中，$1\\le N\\le250000$。\n\n**注意：$N$ 可以是 $1$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2013] 千岛之国 / Adritic", "background": "翻译自 [CEOI 2013 Day 2](https://ceoi2013.hsin.hr/tasks/tasks_day2.pdf)。\n\n“千岛之国”是克罗地亚旅游业在二十世纪九十年代中期的官方口号。虽然这个口号实际上不准确（克罗地亚的岛屿数量略多于 $1000$ 个），但“跳岛旅游”（从一个岛屿航行到另一个岛屿）是一个受欢迎的夏季活动。亚得里亚海的地图是由组成 $2500$ 行和 $2500$ 列的单位正方形组成的网格。行编号从北到南为 $1$ 到 $2500$，而列编号从西到东为 $1$ 到 $2500$。海中有 $N$ 个岛屿，编号为 $1$ 到 $N$，每个岛屿都位于网格的某个单位正方形内。岛屿 $K$ 的位置由相应的网格方格的坐标确定——其行号 $R_K$ 和列号 $C_K$。没有两个岛屿的位置相同。\n\n由于风和海流的影响，只有当岛屿 $B$ 对于 $A$ 来说位于大致的西北或东南方向时才能直接从一个岛屿航行到另一个岛屿。更准确地说，只有在 $R_A < R_B$ 和 $C_A < C_B$ 都成立，或 $R_A > R_B$ 和 $C_A > C_B$ 都成立时，才可以从岛屿 $A$ “跳”到岛屿 $B$。请注意，两个岛屿之间的距离或其他岛屿的存在并不影响从一个岛屿跳到另一个岛屿的可能性。如果无法直接从 $A$ 跳到 $B$，则可能通过其他岛屿使用一些“跳跃”序列从 $A$ 到 $B$ 进行航行。从 $A$ 到 $B$ 的航行距离定义为从 $A$ 到 $B$ 所需的最少“跳跃”次数。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hdqlicpn.png)\n\n例如，在上面的图中，从位于第 $2$ 行第 $3$ 列的岛屿开始，我们可以跳到另外四个岛屿，而剩下的两个岛屿的航行距离为两个跳跃次数。", "description": "一次帆船大会正在计划，组织者正在考虑每个岛屿作为大会的可能场地。在考虑候选岛屿时，他们想知道：如果每个其他岛屿都派出一艘帆船，为了使所有帆船都到达候选岛屿，需要的最小跳数是多少，或者等效地说，从所有其他岛屿到候选岛屿的航行距离之和是多少。\n\n编写一个程序，对于给定 $N$ 个岛屿的位置，对于每个岛屿 $K$，计算所有其他岛屿到岛屿 $K$ 的航行距离之和。测试数据保证，对于所有岛屿 $A$ 和 $B$，可以使用一些跳跃序列从 $A$ 到 $B$ 航行。", "inputFormat": "第一行包含一个整数 $N$（$1\\le N\\le250000$），表示岛屿的数量。接下来的 $N$ 行包含岛屿的位置。每个位置用一对整数表示，它们介于 $1$ 和 $2500$ 之间（包括 $1$ 和 $2500$），分别表示行和列号。", "outputFormat": "输出应包含 $N$ 行。对于每个岛屿，按照它们在输入中给出的顺序，输出从所有其他岛屿到该岛屿的航行距离之和，每个岛屿输出一行。", "hint": "在 $25\\%$ 的测试用例中，$N$ 最多为 $100$。\n\n在 $50\\%$ 的测试用例中，$N$ 最多为 $1500$。\n\n在 $60\\%$ 的测试用例中，$N$ 最多为 $5000$。\n\n在 $80\\%$ 的测试用例中，$N$ 最多为 $25000$。\n\n在 $100\\%$ 的测试用例中，$1\\le N\\le250000$。\n\n**注意：$N$ 可以是 $1$。**", "locale": "zh-CN"}}}
{"pid": "P9273", "type": "P", "difficulty": 3, "samples": [["2 2\n.....|.....\n.....|.....\n...#.|.....\n.....|.....\n.....|.....\n-----+-----\n.....|.....\n.....|.....\n.....|.....\n.....|.....\n.....|.....", "aaacc|dxxxa\nbbbce|dyyya\nddd#e|dzzza\nccbae|fccbb\ncbbaa|ffcdb\n-----+---_-\nssrrr|tttdd\nsaaax_xxeee\nyxbbb|zdaaa\nyxccc|zdbbb\nyxddd|zdccc"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2013", "提交答案", "Special Judge", "CEOI（中欧）"], "title": "[CEOI 2013] 灌水 / Watering", "background": "upd on 2023/11/01: 本题部分分已修复。\n\n翻译自 [CEOI 2013 Day 2](https://ceoi2013.hsin.hr/tasks/tasks_day2.pdf)。\n\nSara 是一位专注的农民，拥有一块大的长方形土地。她的土地被分成网格状的若干个单元格，共有 $5\\times R$ 行和 $5\\times C$ 列。此外，每隔五行有一道横向的围栏，每隔五列有一道纵向的围栏。这些围栏将土地划分成了 $R\\times C$ 个大小为 $5\\times5$ 的区域，称为田地。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1d5z6e4a.png)\n\n这块农田两个最常见的问题是鸟害和旱灾。为了对抗鸟害，有些田地安置了稻草人。稻草人（如果有的话）占据一个单元格，每个 $5\\times5$ 的田地最多只能有一个稻草人。\n\n在干旱期，可能会持续数月时间，Sara 使用洒水器来浇灌她的庄稼。每个洒水器都有三个喷嘴：一个主喷嘴和两个侧喷嘴。它正好占据三个单元格，并浇灌所有这些单元格。侧喷嘴总是占据紧邻主喷嘴（上、下、左或右）的两个单元格。因此，单个洒水器可以浇灌到的三个单元格如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mkdmixtp.png)\n\nSara 要在未被稻草人占据的每个单元格上恰好放置一个洒水器。含有稻草人的单元格不能包含洒水器喷嘴。此外，喷嘴不能放置在 Sara 的土地之外。被单个洒水器浇灌的三个单元格不一定属于同一 $5\\times5$ 领域：它们也可以属于相邻的领域。在这种情况下，Sara 必须在两个由同一洒水器浇灌的相邻领域之间的栅栏上钻一个洞。", "description": "**这是一个提交答案题。您将获得 $10$ 个输入文件，只需提交相应的输出文件即可。您可以从附件里的 `watering.in.zip` 中下载输入文件。**\n\n提交一个可行的浇灌方案，使得它满足所有的要求。\n\n如果存在多个解决方案，可以提交任何一个。", "inputFormat": "输入的第一行包含一对整数 $R$ 和 $C$（$1≤R,C≤100$），它们表示 Sara 的土地的大小。\n\n\n接下来的 $6\\times R-1$ 行，每行包含一个长度为 $6\\times C-1$ 的字符序列。它们代表 Sara 的田地和它们之间的围栏。即使围栏实际上是无限薄的，它也用字符表示。\n\n\n一个单元格用一个字符表示。点字符 `.` 表示空单元格，而 `#` 字符表示稻草人。垂直围栏用 `|` 字符表示，水平围栏用 `-` 字符表示。交叉点用 `+` 字符表示。", "outputFormat": "输出文件应该包含采用与输入文件相同格式的文本表示具有有效喷水器排列的字段。栅栏中的每个孔应该由下划线字符 `_` 表示。输入文件中的所有空单元格（点）都应替换为小写字母 `a` - `z` ，以满足以下规则：\n\n1. 由同一喷水器浇灌的任何三个单元格都由相同的字母表示，即使它们不全部在同一个 $5\\times5$ 的农田中。\n2. 如果同一块田中相邻的两个单元格由不同的喷水器浇灌，则它们必须用不同的字母表示。\n3. 如果不同农田中的两个相邻单元格由不同的喷水器浇灌，并且它们之间有一个栅栏孔，则它们必须用不同的字母表示（但是这样钻孔的意义何在）。\n4. 允许将属于不同农田的相邻单元格表示为相同的字母，只要满足所有先前的规则。", "hint": "每个测试点的分值为 $10$ 分。如果输出方案无效，该测试点将获得零分。如果方案有效，则将按以下方式进行评分：\n- 如果栅栏上的孔的数量不超过 $R\\times C$，则得分为 $10$ 分。\n- 否则，得分为 $5$ 分。\n\n\n在 $10$ 个测试输入中的 $4$ 个中，每个田地都有一个稻草人。\n\nSPJ 提供者：@[cff_0102](https://www.luogu.com.cn/user/542457) 。注：附件中的文件请用记事本/写字板打开。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2013] 灌水 / Watering", "background": "upd on 2023/11/01: 本题部分分已修复。\n\n翻译自 [CEOI 2013 Day 2](https://ceoi2013.hsin.hr/tasks/tasks_day2.pdf)。\n\nSara 是一位专注的农民，拥有一块大的长方形土地。她的土地被分成网格状的若干个单元格，共有 $5\\times R$ 行和 $5\\times C$ 列。此外，每隔五行有一道横向的围栏，每隔五列有一道纵向的围栏。这些围栏将土地划分成了 $R\\times C$ 个大小为 $5\\times5$ 的区域，称为田地。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1d5z6e4a.png)\n\n这块农田两个最常见的问题是鸟害和旱灾。为了对抗鸟害，有些田地安置了稻草人。稻草人（如果有的话）占据一个单元格，每个 $5\\times5$ 的田地最多只能有一个稻草人。\n\n在干旱期，可能会持续数月时间，Sara 使用洒水器来浇灌她的庄稼。每个洒水器都有三个喷嘴：一个主喷嘴和两个侧喷嘴。它正好占据三个单元格，并浇灌所有这些单元格。侧喷嘴总是占据紧邻主喷嘴（上、下、左或右）的两个单元格。因此，单个洒水器可以浇灌到的三个单元格如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mkdmixtp.png)\n\nSara 要在未被稻草人占据的每个单元格上恰好放置一个洒水器。含有稻草人的单元格不能包含洒水器喷嘴。此外，喷嘴不能放置在 Sara 的土地之外。被单个洒水器浇灌的三个单元格不一定属于同一 $5\\times5$ 领域：它们也可以属于相邻的领域。在这种情况下，Sara 必须在两个由同一洒水器浇灌的相邻领域之间的栅栏上钻一个洞。", "description": "**这是一个提交答案题。您将获得 $10$ 个输入文件，只需提交相应的输出文件即可。您可以从附件里的 `watering.in.zip` 中下载输入文件。**\n\n提交一个可行的浇灌方案，使得它满足所有的要求。\n\n如果存在多个解决方案，可以提交任何一个。", "inputFormat": "输入的第一行包含一对整数 $R$ 和 $C$（$1≤R,C≤100$），它们表示 Sara 的土地的大小。\n\n\n接下来的 $6\\times R-1$ 行，每行包含一个长度为 $6\\times C-1$ 的字符序列。它们代表 Sara 的田地和它们之间的围栏。即使围栏实际上是无限薄的，它也用字符表示。\n\n\n一个单元格用一个字符表示。点字符 `.` 表示空单元格，而 `#` 字符表示稻草人。垂直围栏用 `|` 字符表示，水平围栏用 `-` 字符表示。交叉点用 `+` 字符表示。", "outputFormat": "输出文件应该包含采用与输入文件相同格式的文本表示具有有效喷水器排列的字段。栅栏中的每个孔应该由下划线字符 `_` 表示。输入文件中的所有空单元格（点）都应替换为小写字母 `a` - `z` ，以满足以下规则：\n\n1. 由同一喷水器浇灌的任何三个单元格都由相同的字母表示，即使它们不全部在同一个 $5\\times5$ 的农田中。\n2. 如果同一块田中相邻的两个单元格由不同的喷水器浇灌，则它们必须用不同的字母表示。\n3. 如果不同农田中的两个相邻单元格由不同的喷水器浇灌，并且它们之间有一个栅栏孔，则它们必须用不同的字母表示（但是这样钻孔的意义何在）。\n4. 允许将属于不同农田的相邻单元格表示为相同的字母，只要满足所有先前的规则。", "hint": "每个测试点的分值为 $10$ 分。如果输出方案无效，该测试点将获得零分。如果方案有效，则将按以下方式进行评分：\n- 如果栅栏上的孔的数量不超过 $R\\times C$，则得分为 $10$ 分。\n- 否则，得分为 $5$ 分。\n\n\n在 $10$ 个测试输入中的 $4$ 个中，每个田地都有一个稻草人。\n\nSPJ 提供者：@[cff_0102](https://www.luogu.com.cn/user/542457) 。注：附件中的文件请用记事本/写字板打开。", "locale": "zh-CN"}}}
{"pid": "P9274", "type": "P", "difficulty": 4, "samples": [["3\nassembler 0.50\nfurnace 0.50\nmining_well 0.55\n6\niron_plate furnace 3.20\n1\niron_ore 1\ncopper_plate furnace 3.20\n1\ncopper_ore 1\niron_ore mining_well 1.00\n0\ncopper_ore mining_well 1.00\n0\ncopper_cable assembler 0.50\n1\ncopper_plate 1\nelectronic_circuit assembler 0.50\n2\niron_plate 1\ncopper_cable 3\n1\nelectronic_circuit 10", "iron_plate furnace 64\ncopper_plate furnace 192\niron_ore mining_well 19\ncopper_ore mining_well 55\ncopper_cable assembler 30\nelectronic_circuit assembler 10"], ["3\nassembler 0.50\nfurnace 0.50\nmining_well 0.55\n4\niron_plate furnace 3.20\n1\niron_ore 1\niron_ore mining_well 1.00\n0\niron_gear assembler 0.50\n1\niron_plate 2\ntransport_belt assembler 0.50\n2\niron_plate 1\niron_gear 1\n1\ntransport_belt 7", "iron_plate furnace 135\niron_ore mining_well 39\niron_gear assembler 7\ntransport_belt assembler 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] 建设计划", "background": "", "description": "一组工程师正在计划建造一座新工厂。为了使他们的工厂可靠，他们希望以恒定且可靠的单位每秒速率创建各种物品。他们可以使用不同的机器来制作这些材料。每个机器都有自己的速度，影响制作过程。每种材料都有自己的制作配方，必须在特定的机器执行。\n\n您将获得每个机器的描述以及您需要的每种材料和中间材料的配方。你也会得到一份材料清单，你必须以一定的速度生产，这样你的工厂是可靠的。\n\n我们认为一种机器配置是最优的，当且仅当如果从配置中移除任意一台机器，至少有一种材料的生产速率小于所需的速率。\n\n你需要找到一种最优的配置。", "inputFormat": "输入的第一行将包含一个整数 $M(1≤M≤100)$，表示我们拥有的机器类型的数量。在接下来的 $M$ 行中，每一行都有一个字符串 $n(1≤|n|≤30)$ 和一个数字 $s(0.01≤s≤100)$，表示一台机器的名称和速度。\n\n下面一行输入将包含一个整数 $N(1≤N≤100)$，表示配方的数量。\n\n接下来输入 $n$ 组配方。对于每组配方，在配方的第一行，字符串 $p(1≤|p|≤30)$ 表示要制作的材料的名称，字符串 $l(1≤|l|≤30)$ 表示制作过程中使用的机器名称，数字 $t(0.01≤t≤100)$ 表示以正常速度制作材料所需的时间(以秒为单位)。在下一行中，有一个数字 $k(0≤k≤15)$，表示生产当前这个材料过程中所需另外材料的种类数。下面的 $k$ 行中，每一行包含一个字符串 $n(1≤|n|≤30)$ ，表示所需材料的名称，一个整数 $c(1≤c≤10)$，表示所需的相应材料的单位数。\n\n下一行将包含一个整数 $Q(1≤Q≤100)$，表示需求的数量。\n\n下面的每一条 $Q$ 行都包含一个字符串 $m(1≤|m|≤30)$，表示需要这个需求下生产的材料的名称，以及一个整数 $c(1≤c≤10)$，表示每秒需要生产的该材料的单位数。\n\n$s$ 和 $t$ 都是有两个小数点的浮点数。保证存在最优配置。保证最优解中每种材料的生产速率不超过每秒 $10^9$个单位，每种材料都可以使用独特的配方制作。并且保证配方的需求关系不存在环。", "outputFormat": "总共 $n$ 行，在第 $n$ 行，输出 $p_i,l_i,r_i$，其中 $r_i$ 表示用来执行第 $i$ 个配方的机器数量。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] 建设计划", "background": "", "description": "一组工程师正在计划建造一座新工厂。为了使他们的工厂可靠，他们希望以恒定且可靠的单位每秒速率创建各种物品。他们可以使用不同的机器来制作这些材料。每个机器都有自己的速度，影响制作过程。每种材料都有自己的制作配方，必须在特定的机器执行。\n\n您将获得每个机器的描述以及您需要的每种材料和中间材料的配方。你也会得到一份材料清单，你必须以一定的速度生产，这样你的工厂是可靠的。\n\n我们认为一种机器配置是最优的，当且仅当如果从配置中移除任意一台机器，至少有一种材料的生产速率小于所需的速率。\n\n你需要找到一种最优的配置。", "inputFormat": "输入的第一行将包含一个整数 $M(1≤M≤100)$，表示我们拥有的机器类型的数量。在接下来的 $M$ 行中，每一行都有一个字符串 $n(1≤|n|≤30)$ 和一个数字 $s(0.01≤s≤100)$，表示一台机器的名称和速度。\n\n下面一行输入将包含一个整数 $N(1≤N≤100)$，表示配方的数量。\n\n接下来输入 $n$ 组配方。对于每组配方，在配方的第一行，字符串 $p(1≤|p|≤30)$ 表示要制作的材料的名称，字符串 $l(1≤|l|≤30)$ 表示制作过程中使用的机器名称，数字 $t(0.01≤t≤100)$ 表示以正常速度制作材料所需的时间(以秒为单位)。在下一行中，有一个数字 $k(0≤k≤15)$，表示生产当前这个材料过程中所需另外材料的种类数。下面的 $k$ 行中，每一行包含一个字符串 $n(1≤|n|≤30)$ ，表示所需材料的名称，一个整数 $c(1≤c≤10)$，表示所需的相应材料的单位数。\n\n下一行将包含一个整数 $Q(1≤Q≤100)$，表示需求的数量。\n\n下面的每一条 $Q$ 行都包含一个字符串 $m(1≤|m|≤30)$，表示需要这个需求下生产的材料的名称，以及一个整数 $c(1≤c≤10)$，表示每秒需要生产的该材料的单位数。\n\n$s$ 和 $t$ 都是有两个小数点的浮点数。保证存在最优配置。保证最优解中每种材料的生产速率不超过每秒 $10^9$个单位，每种材料都可以使用独特的配方制作。并且保证配方的需求关系不存在环。", "outputFormat": "总共 $n$ 行，在第 $n$ 行，输出 $p_i,l_i,r_i$，其中 $r_i$ 表示用来执行第 $i$ 个配方的机器数量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9275", "type": "P", "difficulty": 5, "samples": [["10\n10 9 8 7 6 5 4 3 2 1\n8\n1 2\n1 3\n1 10\n9 10\n1 4\n3 4\n2 3\n1 4", "90\n90\n90\n2\n90\n56\n72\n90"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] DrahSort", "background": "", "description": "给定一个长度为 $N$ 的序列 $A$，接下来进行 $Q$ 次询问。\n\n- 每次询问 $[l,r]\\ (l\\leq r)$，输出：如果对这个区间进行冒泡排序，那么交换的相邻两个数的乘积的最大值。\n\n", "inputFormat": "输入的第一行将包含一个整数 $N(1≤N≤2\\times 10^5)$，表示数组的元素个数。\n\n第二行输入将包含 $N$ 个整数 $(0≤A[i]≤10^9,1≤i≤N)$，即数组的元素。\n\n第三行输入将包含一个整数 $Q(1≤Q≤2\\times10^5)$，表示操作次数。\n\n下面的每 $Q$ 行都包含一个题目中描述的询问。", "outputFormat": "$Q$ 行，对每一次询问输出答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] DrahSort", "background": "", "description": "给定一个长度为 $N$ 的序列 $A$，接下来进行 $Q$ 次询问。\n\n- 每次询问 $[l,r]\\ (l\\leq r)$，输出：如果对这个区间进行冒泡排序，那么交换的相邻两个数的乘积的最大值。\n\n", "inputFormat": "输入的第一行将包含一个整数 $N(1≤N≤2\\times 10^5)$，表示数组的元素个数。\n\n第二行输入将包含 $N$ 个整数 $(0≤A[i]≤10^9,1≤i≤N)$，即数组的元素。\n\n第三行输入将包含一个整数 $Q(1≤Q≤2\\times10^5)$，表示操作次数。\n\n下面的每 $Q$ 行都包含一个题目中描述的询问。", "outputFormat": "$Q$ 行，对每一次询问输出答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9276", "type": "P", "difficulty": 5, "samples": [["2 2\n1 6\n7 1\n5 1\n1 3\n1\n1\n2 1", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] 麦田", "background": "", "description": "最近，你从你的曾曾祖父那里继承了一块地。这块地是一个矩形，有 $N$ 行 $M$ 列。你想继续你的高曾祖父的遗产，并开始种植两种植物：小麦和向日葵。\n\n在田地的每个格子里，你可以放两种植物种子中的一种。在细胞 $(i,j)$ 种植小麦可以获得 $A[i][j]$ 欧元，而在同一细胞 $(i,j)$ 种植向日葵可以获得 $B[i][j]$ 欧元。\n\n不幸的是，你很快就会发现，如果你在相邻的细胞中种植不同类型的植物，它们的根会缠在一起，这需要你花一大笔钱来修复。\n\n你现在急切地想知道，如果你在每个细胞中只种植两种植物种子中的一种，你能获得的最大金钱是多少。", "inputFormat": "输入的第一行包含两个整数 $N(1≤N≤70)$ 和 $M(1≤M≤70)$，表示行数和列数。\n\n接下来的 $N$ 行包含 $M$ 个整数 $(1≤A[i][j]≤10^5)$。\n\n接下来的 $N$ 行包含 $M$ 个整数 $(1≤B[i][j]≤10^5)$。\n\n接下来的 $N$ 行将包含 $M−1$ 个整数 $(1≤C_1[i][j]≤10^5)$，表示在细胞 $(i,j)$ 和 $(i,j+1)$ 中播种不同种子的损失。\n\n接下来的 $N-1$ 行将包含 $M$ 个整数 $(1≤C_2[i][j]≤10^5)$，表示在细胞 $(i,j)$ 和 $(i+1,j)$ 中播种不同种子的损失。", "outputFormat": "输出一个数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] 麦田", "background": "", "description": "最近，你从你的曾曾祖父那里继承了一块地。这块地是一个矩形，有 $N$ 行 $M$ 列。你想继续你的高曾祖父的遗产，并开始种植两种植物：小麦和向日葵。\n\n在田地的每个格子里，你可以放两种植物种子中的一种。在细胞 $(i,j)$ 种植小麦可以获得 $A[i][j]$ 欧元，而在同一细胞 $(i,j)$ 种植向日葵可以获得 $B[i][j]$ 欧元。\n\n不幸的是，你很快就会发现，如果你在相邻的细胞中种植不同类型的植物，它们的根会缠在一起，这需要你花一大笔钱来修复。\n\n你现在急切地想知道，如果你在每个细胞中只种植两种植物种子中的一种，你能获得的最大金钱是多少。", "inputFormat": "输入的第一行包含两个整数 $N(1≤N≤70)$ 和 $M(1≤M≤70)$，表示行数和列数。\n\n接下来的 $N$ 行包含 $M$ 个整数 $(1≤A[i][j]≤10^5)$。\n\n接下来的 $N$ 行包含 $M$ 个整数 $(1≤B[i][j]≤10^5)$。\n\n接下来的 $N$ 行将包含 $M−1$ 个整数 $(1≤C_1[i][j]≤10^5)$，表示在细胞 $(i,j)$ 和 $(i,j+1)$ 中播种不同种子的损失。\n\n接下来的 $N-1$ 行将包含 $M$ 个整数 $(1≤C_2[i][j]≤10^5)$，表示在细胞 $(i,j)$ 和 $(i+1,j)$ 中播种不同种子的损失。", "outputFormat": "输出一个数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9277", "type": "P", "difficulty": 4, "samples": [["2 5 1\n0 31", "1 0"], ["4 2 2\n0 0 2 2", "4 0\n3 0"], ["5 6 4\n63 15 0 10 5\n", "5 5\n4 5\n4 4\n5 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] 反转", "background": "", "description": "给定长度为 $N$ 的序列 $a$ 满足每个数都小于 $2^K$。你需要执行恰好 $P$ 次操作，每次操作是把其中一个数的某一个二进制位反转。最终你需要使得 \n\n$$\\sum_i\\sum_j a_i\\oplus a_j(i<j)$$\n\n最大，其中 $\\oplus$ 为按位异或运算。", "inputFormat": "第一行包含整数 $N、K、P$，保证 $1≤N≤10^5,1≤K≤30,1≤P≤N\\times K$。\n\n下一行包含 $N$ 个整数，即序列 $a$。对于所有 $1≤i≤N$，保证 $0≤a_i<2^K$。", "outputFormat": "$P$ 行，每行包含两个整数 $i$ 和 $j$，满足 $1≤i≤N, 0≤j<K$，表示数字 $a_i$ 的第 $j$ 位反转。即 $a_i\\leftarrow a_i \\oplus 2^j$。\n\n**你可以多次反转同一个位。如果有多个使总和最大化的解输出任意一个即可。**", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] 反转", "background": "", "description": "给定长度为 $N$ 的序列 $a$ 满足每个数都小于 $2^K$。你需要执行恰好 $P$ 次操作，每次操作是把其中一个数的某一个二进制位反转。最终你需要使得 \n\n$$\\sum_i\\sum_j a_i\\oplus a_j(i<j)$$\n\n最大，其中 $\\oplus$ 为按位异或运算。", "inputFormat": "第一行包含整数 $N、K、P$，保证 $1≤N≤10^5,1≤K≤30,1≤P≤N\\times K$。\n\n下一行包含 $N$ 个整数，即序列 $a$。对于所有 $1≤i≤N$，保证 $0≤a_i<2^K$。", "outputFormat": "$P$ 行，每行包含两个整数 $i$ 和 $j$，满足 $1≤i≤N, 0≤j<K$，表示数字 $a_i$ 的第 $j$ 位反转。即 $a_i\\leftarrow a_i \\oplus 2^j$。\n\n**你可以多次反转同一个位。如果有多个使总和最大化的解输出任意一个即可。**", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9278", "type": "P", "difficulty": 3, "samples": [["3\n2 2 2", "Charlie\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] 另一个游戏", "background": "", "description": "Charlie 和 Dan 在 $N$ 堆从左到右从 $1$ 到 $N$ 编号的石子堆上玩游戏。每一堆都有正数个石头。\n\n两人轮流执行操作。Charlie 先手。\n\n每回合，玩家从最左边的非空堆中取出正数个石头，并将它们移到相邻的右边的石头堆中。如果在该玩家的回合中，唯一的非空堆是第 $N$ 堆，该玩家将输掉游戏。\n\n如果双方都以最优策略玩这场游戏，谁会赢得这场游戏?", "inputFormat": "输入的第一行将包含整数 $N(2≤N≤10^3)$，即堆数。\n\n下一行包含 $N$ 个整数 $v_1,v_2,v_3,...,v_n(1≤v_i≤10^9)$ 表示每堆石子的数量。", "outputFormat": "输出获得胜利的玩家的名字。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] 另一个游戏", "background": "", "description": "Charlie 和 Dan 在 $N$ 堆从左到右从 $1$ 到 $N$ 编号的石子堆上玩游戏。每一堆都有正数个石头。\n\n两人轮流执行操作。Charlie 先手。\n\n每回合，玩家从最左边的非空堆中取出正数个石头，并将它们移到相邻的右边的石头堆中。如果在该玩家的回合中，唯一的非空堆是第 $N$ 堆，该玩家将输掉游戏。\n\n如果双方都以最优策略玩这场游戏，谁会赢得这场游戏?", "inputFormat": "输入的第一行将包含整数 $N(2≤N≤10^3)$，即堆数。\n\n下一行包含 $N$ 个整数 $v_1,v_2,v_3,...,v_n(1≤v_i≤10^9)$ 表示每堆石子的数量。", "outputFormat": "输出获得胜利的玩家的名字。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9279", "type": "P", "difficulty": 6, "samples": [["2 1 12\n1 1 100\n1 500 1000\n8 0 1 1000\n1 0\n2 800 900\n8 0 1 1000\n7 0 1\n3 0 0\n8 0 1 1000\n4 0 200 400\n8 0 1 1000\n5 0 1\n6 0 95 499\n8 0 1 1000\n", "1000\n799\n399\n198\n1000\n"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] IPs", "background": "Mike 刚在当地的互联网服务提供商 DNS 找到了一份实习工作。他们知道 Mike 对 IPs 很熟悉，所以请他为他们的客户实现一个支持一些操作的管理系统。其中一些操作是特定于客户端的，而另一些是特定于 DNS(公司) 的。Mike 其实对 IPs 不太了解，所以他向你寻求帮助。", "description": "IPs 的取值范围是 $0$ 到 $10^9$，所有客户端最初都可以使用。有 $N$ 个国家（编号从 $0$ 到 $N−1$）。每个国家都有自己的 ip 集，形式上可以表示成若干个区间的并集。\n\n有 $M$ 个客户端（编号从 $0$ 到 $M−1$）需要 Mike 帮助，有 $Q$ 个操作，有以下形式:\n\n1.将一个国家列入所有客户端的黑名单。将一个国家列入黑名单，将阻止该国家及其与其合并的国家对应的所有 ip。\n\n2.将所有客户端的 ip 段 $[X,Y]$ 加入黑名单。\n\n3.为特定客户端将某个国家及其与其合并的国家列入黑名单。\n\n4.将特定客户端的 ip 段 $[X,Y]$ 加入黑名单。\n\n5.为特定客户端将某个国家及其与其合并的国家列入白名单。将一个国家加入白名单，将该国家及其合并国家对应的所有 ip 都加入白名单。请注意，白名单的优先级高于此客户端的任何先前或将来的黑名单。也就是说如果一个 ip 在某个客户端被列入白名单，那么永远不会被适用与接下来以及之前的所有黑名单操作。\n\n6.为特定客户端将 ip 段 $[X,Y]$ 列入白名单。请注意，白名单的优先级高于此客户端的任何先前或将来的黑名单。也就是说如果一个 ip 在某个客户端被列入白名单，那么永远不会被适用与接下来以及之前的所有黑名单操作。\n\n7.国家 $X$ 和 $Y$ 合并在一起。\n\n8.查询某个客户端在 ip 段 $[X, Y]$ 内可以访问多少个 ip ？", "inputFormat": "第一行三个数 $N,M,Q$。保证 $1\\leq N\\leq 10^4,1\\leq M\\leq 10,1\\leq Q\\leq 10^5$。\n\n接下来 $N$ 行，每行第一个数 $N_i$ 表示第 $i$ 个国家的 ip 集由 $N_i$ 个区间的并集。接下来 $2\\times N_i$ 个数，表示每个区间，这些数在 $0$ 到 $10^9$ 之间。保证 $\\sum N_i\\leq 10^5$。\n\n接下来 $Q$ 行，每行第一个数表示操作的种类，接下来对于每种操作输入对应的参数：\n\n1：$countryIdx$，保证 $0≤countryIdx<N$。\n\n2：$X, Y$，保证 $0≤X≤Y≤10^9$。\n\n3：$clientIdx, countryIdx$，保证 $0≤clientIdx<M, 0≤countryIdx<N$。\n\n4：$clientIdx,X, Y$，保证 $0≤clientIdx<M, 0≤X≤Y≤10^9$。\n\n5：$clientIdx, countryIdx$，保证 $0≤clientIdx<M, 0≤countryIdx<N$。\n\n6：$clientIdx,X, Y$，保证 $0≤clientIdx<M, 0≤X≤Y≤10^9$。\n\n7：$countryIdx1, countryIdx2$，保证 $0≤countryIdx1<N, 0≤countryIdx2<N$。\n\n8：$clientIdx,X,Y$，保证 $0≤clientIdx<M, 0≤X≤Y≤10^9$。\n", "outputFormat": "对于每次询问输出一行表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] IPs", "background": "Mike 刚在当地的互联网服务提供商 DNS 找到了一份实习工作。他们知道 Mike 对 IPs 很熟悉，所以请他为他们的客户实现一个支持一些操作的管理系统。其中一些操作是特定于客户端的，而另一些是特定于 DNS(公司) 的。Mike 其实对 IPs 不太了解，所以他向你寻求帮助。", "description": "IPs 的取值范围是 $0$ 到 $10^9$，所有客户端最初都可以使用。有 $N$ 个国家（编号从 $0$ 到 $N−1$）。每个国家都有自己的 ip 集，形式上可以表示成若干个区间的并集。\n\n有 $M$ 个客户端（编号从 $0$ 到 $M−1$）需要 Mike 帮助，有 $Q$ 个操作，有以下形式:\n\n1.将一个国家列入所有客户端的黑名单。将一个国家列入黑名单，将阻止该国家及其与其合并的国家对应的所有 ip。\n\n2.将所有客户端的 ip 段 $[X,Y]$ 加入黑名单。\n\n3.为特定客户端将某个国家及其与其合并的国家列入黑名单。\n\n4.将特定客户端的 ip 段 $[X,Y]$ 加入黑名单。\n\n5.为特定客户端将某个国家及其与其合并的国家列入白名单。将一个国家加入白名单，将该国家及其合并国家对应的所有 ip 都加入白名单。请注意，白名单的优先级高于此客户端的任何先前或将来的黑名单。也就是说如果一个 ip 在某个客户端被列入白名单，那么永远不会被适用与接下来以及之前的所有黑名单操作。\n\n6.为特定客户端将 ip 段 $[X,Y]$ 列入白名单。请注意，白名单的优先级高于此客户端的任何先前或将来的黑名单。也就是说如果一个 ip 在某个客户端被列入白名单，那么永远不会被适用与接下来以及之前的所有黑名单操作。\n\n7.国家 $X$ 和 $Y$ 合并在一起。\n\n8.查询某个客户端在 ip 段 $[X, Y]$ 内可以访问多少个 ip ？", "inputFormat": "第一行三个数 $N,M,Q$。保证 $1\\leq N\\leq 10^4,1\\leq M\\leq 10,1\\leq Q\\leq 10^5$。\n\n接下来 $N$ 行，每行第一个数 $N_i$ 表示第 $i$ 个国家的 ip 集由 $N_i$ 个区间的并集。接下来 $2\\times N_i$ 个数，表示每个区间，这些数在 $0$ 到 $10^9$ 之间。保证 $\\sum N_i\\leq 10^5$。\n\n接下来 $Q$ 行，每行第一个数表示操作的种类，接下来对于每种操作输入对应的参数：\n\n1：$countryIdx$，保证 $0≤countryIdx<N$。\n\n2：$X, Y$，保证 $0≤X≤Y≤10^9$。\n\n3：$clientIdx, countryIdx$，保证 $0≤clientIdx<M, 0≤countryIdx<N$。\n\n4：$clientIdx,X, Y$，保证 $0≤clientIdx<M, 0≤X≤Y≤10^9$。\n\n5：$clientIdx, countryIdx$，保证 $0≤clientIdx<M, 0≤countryIdx<N$。\n\n6：$clientIdx,X, Y$，保证 $0≤clientIdx<M, 0≤X≤Y≤10^9$。\n\n7：$countryIdx1, countryIdx2$，保证 $0≤countryIdx1<N, 0≤countryIdx2<N$。\n\n8：$clientIdx,X,Y$，保证 $0≤clientIdx<M, 0≤X≤Y≤10^9$。\n", "outputFormat": "对于每次询问输出一行表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9280", "type": "P", "difficulty": 3, "samples": [["5\n4 3 3 3 3\n", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] Monty Hall", "background": "", "description": "Monty Hall 是一个节目主持人，这一天，他决定推出一个新游戏。\n\n总共有 $n$ 扇门围成一个圈，玩家现在站在第 1 扇门前，每个回合玩家会执行以下操作：选择一个数 $i$，花费 $C_i$ 的代价选择往右移动 $i$ 步，然后玩家打开他所在位置的门。特别地，保证 $C_i\\geq C_{i+1}(1\\leq i<n)$。\n\n玩家想知道打开所有的门最少需要花费多少代价。", "inputFormat": "第一行一个整数 $N(1\\leq N\\leq 10^5)$。\n\n接下来 $N$ 个整数表示 $C_i(1\\leq C_i\\leq 10^5)$。\n\n", "outputFormat": "一个整数，表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] Monty Hall", "background": "", "description": "Monty Hall 是一个节目主持人，这一天，他决定推出一个新游戏。\n\n总共有 $n$ 扇门围成一个圈，玩家现在站在第 1 扇门前，每个回合玩家会执行以下操作：选择一个数 $i$，花费 $C_i$ 的代价选择往右移动 $i$ 步，然后玩家打开他所在位置的门。特别地，保证 $C_i\\geq C_{i+1}(1\\leq i<n)$。\n\n玩家想知道打开所有的门最少需要花费多少代价。", "inputFormat": "第一行一个整数 $N(1\\leq N\\leq 10^5)$。\n\n接下来 $N$ 个整数表示 $C_i(1\\leq C_i\\leq 10^5)$。\n\n", "outputFormat": "一个整数，表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9281", "type": "P", "difficulty": 6, "samples": [["6\n1 GBIOOYBIOOYBB\n2 R\n3 O\n1 OOO\n2 R\n3 O", "OOYBB\n3\nOOO\n6\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] Nădlac", "background": "", "description": "在草原上，一群绵羊排成一队。这些绵羊的毛共有 $7$ 种颜色，按照你对颜色喜欢的程度排列分别是：\n\n$$\nred>orange>yellow>green>blue>indigo>violet$$\n\n接下来会发生以下三种事件：\n\n1：有若干个绵羊依次排到了队尾。\n\n2：给定一个颜色序列 $T$，找到目前的绵羊序列中，所有本质不同的子串中按照喜欢程度写成数字（比如 red 是 $7$,violet 是 $1$），字典序小于等于 $T$ 中字典序最大的一个子串。\n\n3：给定一个颜色集合 $C$，求目前的绵羊序列中，本质不同的只由 C 中的颜色组成的子串的长度的和。", "inputFormat": "输入的第一行将包含一个整数 $Q (1≤Q≤500)$，表示发生的事件数。\n\n接下来的 $Q$ 行每行先输入一个数表示事件的种类，然后：\n\n1：输入绵羊序列 $S(1≤|S|≤10^5)$。 保证 $∑|S|≤10^5$。\n\n2：输入颜色序列 $T(1≤|T|≤10^5)$。\n\n3：输入颜色集合 $C(1≤|C|≤7)$。\n\n其中每个颜色由单词的第一个字母的大写形式表示。\n", "outputFormat": "对每个事件 2 与事件 3 输出答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] Nădlac", "background": "", "description": "在草原上，一群绵羊排成一队。这些绵羊的毛共有 $7$ 种颜色，按照你对颜色喜欢的程度排列分别是：\n\n$$\nred>orange>yellow>green>blue>indigo>violet$$\n\n接下来会发生以下三种事件：\n\n1：有若干个绵羊依次排到了队尾。\n\n2：给定一个颜色序列 $T$，找到目前的绵羊序列中，所有本质不同的子串中按照喜欢程度写成数字（比如 red 是 $7$,violet 是 $1$），字典序小于等于 $T$ 中字典序最大的一个子串。\n\n3：给定一个颜色集合 $C$，求目前的绵羊序列中，本质不同的只由 C 中的颜色组成的子串的长度的和。", "inputFormat": "输入的第一行将包含一个整数 $Q (1≤Q≤500)$，表示发生的事件数。\n\n接下来的 $Q$ 行每行先输入一个数表示事件的种类，然后：\n\n1：输入绵羊序列 $S(1≤|S|≤10^5)$。 保证 $∑|S|≤10^5$。\n\n2：输入颜色序列 $T(1≤|T|≤10^5)$。\n\n3：输入颜色集合 $C(1≤|C|≤7)$。\n\n其中每个颜色由单词的第一个字母的大写形式表示。\n", "outputFormat": "对每个事件 2 与事件 3 输出答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9282", "type": "P", "difficulty": 6, "samples": [["4 3\nbbab\n", "5 1 0 \n"], ["3 3\nbbb\n", "3 2 1 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] 回文", "background": "", "description": "定义一个关于一个字符串 $x$ 的函数 $f(x)$ 如下：\n\n- 如果 $x$ 长度为 $1$，$f(x)=1$。\n- 如果 $x$ 不是回文串，$f(x)=0$。\n- 如果 $x$ 是回文串，那么假设 $y$ 是 $x$ 的前 $\\frac{|x|+1}{2}$ 个字符组成的字符串 $f(x)=f(y)+1$。\n\n给你一个字符串 $s$ 与一个数 $k$，求它每个非空子串中 $f$ 等于 $1\\sim k$ 的分别有多少个。", "inputFormat": "第一行两个数 $N(1\\leq N\\leq 10^5)$，$k(1\\leq k\\leq 30)$。\n\n接下来一行一个长度为 $N$ 的字符串 $s$。保证由小写字母组成。", "outputFormat": "对于 $1\\sim k$ 的每个数输出答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] 回文", "background": "", "description": "定义一个关于一个字符串 $x$ 的函数 $f(x)$ 如下：\n\n- 如果 $x$ 长度为 $1$，$f(x)=1$。\n- 如果 $x$ 不是回文串，$f(x)=0$。\n- 如果 $x$ 是回文串，那么假设 $y$ 是 $x$ 的前 $\\frac{|x|+1}{2}$ 个字符组成的字符串 $f(x)=f(y)+1$。\n\n给你一个字符串 $s$ 与一个数 $k$，求它每个非空子串中 $f$ 等于 $1\\sim k$ 的分别有多少个。", "inputFormat": "第一行两个数 $N(1\\leq N\\leq 10^5)$，$k(1\\leq k\\leq 30)$。\n\n接下来一行一个长度为 $N$ 的字符串 $s$。保证由小写字母组成。", "outputFormat": "对于 $1\\sim k$ 的每个数输出答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9283", "type": "P", "difficulty": 6, "samples": [["30 6\n3 1\n6 2\n11 3\n14 2\n17 3\n27 1\n4\n1 24 1\n2 24\n1 23 1\n1 29 2\n", "Bob\nAlice\nAlice\nBob\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] 棋子游戏", "background": "", "description": "Alice 和 Bob 在一个 $1\\times N$ 的矩阵上玩游戏。\n\n有 $M$ 个棋子放在不同的格子上，棋子具有各种各样的颜色。 \n\n每回合选手可以挑选一个棋子，并将这个棋子与后面的跟他不同颜色的棋子（下一个同色棋子之前的棋子）一起往左移动正数距离，移动过程中不能跨过或者重叠前面的那个格子。Alice 先手，谁不能移谁就输了。\n\n接下来有 $Q$ 次操作，每次操作有以下形式：\n\n1：在 $pos$ 位置上放置一个颜色为 $col$ 的棋子。\n\n2：删除位置 $pos$ 上的棋子。\n\n每次操作后输出当前局面的赢家是谁。", "inputFormat": "第一行输入两个数 $N,M(1\\leq N\\leq 10^9,1\\leq M\\leq 10^5)$。\n\n接下来输入 $M$ 行，每行两个数 $pos(1\\leq pos\\leq n),col(1\\leq col\\leq 5)$ 表示初始 $pos$ 位置上有一个 $col$ 颜色的棋子。\n\n接下来输入 $Q$ 行，每行两或三个数 $opt(1\\leq opt\\leq 2)$ 表示操作种类，$pos(1\\leq pos\\leq n)$。若 $opt=1$ 则还要读入 $col(1\\leq col\\leq 5)$。", "outputFormat": "$Q$ 行，每行输出 Alice 或者 Bob。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] 棋子游戏", "background": "", "description": "Alice 和 Bob 在一个 $1\\times N$ 的矩阵上玩游戏。\n\n有 $M$ 个棋子放在不同的格子上，棋子具有各种各样的颜色。 \n\n每回合选手可以挑选一个棋子，并将这个棋子与后面的跟他不同颜色的棋子（下一个同色棋子之前的棋子）一起往左移动正数距离，移动过程中不能跨过或者重叠前面的那个格子。Alice 先手，谁不能移谁就输了。\n\n接下来有 $Q$ 次操作，每次操作有以下形式：\n\n1：在 $pos$ 位置上放置一个颜色为 $col$ 的棋子。\n\n2：删除位置 $pos$ 上的棋子。\n\n每次操作后输出当前局面的赢家是谁。", "inputFormat": "第一行输入两个数 $N,M(1\\leq N\\leq 10^9,1\\leq M\\leq 10^5)$。\n\n接下来输入 $M$ 行，每行两个数 $pos(1\\leq pos\\leq n),col(1\\leq col\\leq 5)$ 表示初始 $pos$ 位置上有一个 $col$ 颜色的棋子。\n\n接下来输入 $Q$ 行，每行两或三个数 $opt(1\\leq opt\\leq 2)$ 表示操作种类，$pos(1\\leq pos\\leq n)$。若 $opt=1$ 则还要读入 $col(1\\leq col\\leq 5)$。", "outputFormat": "$Q$ 行，每行输出 Alice 或者 Bob。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9284", "type": "P", "difficulty": 5, "samples": [["5 5\n3\n2 1 2 2\n2 2 3 3\n3 4 5 4\n5\n1 2 1 3\n1 2 1 4\n2 1 3 5\n1 3 2 4\n2 2 1 5\n", "SUNK\nHIT\nMISS\nSUNK\nHIT\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] 海盗", "background": "", "description": "海盗们处于一个 $N$ 行 $M$ 列的矩形海域。\n\n接下来有会有 $B$ 个炸弹，每个炸弹轰炸的范围是一个矩形。\n\n海盗们有 $S$ 艘船，船要么是一行若干列的，要么是若干行一列的。你需要对每艘船输出：\n\n`MISS` 船没有被炸弹覆盖到；\n\n`HIT` 船被炸弹覆盖到，但没有完全覆盖；\n\n`SUNK` 船被炸弹完全覆盖；\n", "inputFormat": "第一行两个正整数 $N,M(1\\leq N,M\\leq 10^5)$。\n\n接下来一行一个数 $B(1\\leq B\\leq 2\\times 10^5)$。\n\n接下来 $B$ 行每行四个正整数 $x1,y1,x2,y2(1\\leq x1\\leq x2\\leq N,1\\leq y1\\leq y2\\leq M)$，表示炸弹覆盖范围。\n\n接下来一行一个数 $S(1\\leq S\\leq 2\\times 10^5)$。\n\n接下来 $S$ 行每行四个正整数 $opt,c,l,r$，若 $opt=1$ 则表示第 $i$ 艘船是由第 $c$ 行的第 $l$ 到 $r$ 列组成，否则若 $opt=2$ 则表示第 $c$ 列的第 $l$ 到 $r$ 行。\n\n**船与船之间或炸弹与炸弹之间可能相交。**\n\n", "outputFormat": "$S$ 行，对每艘船输出答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] 海盗", "background": "", "description": "海盗们处于一个 $N$ 行 $M$ 列的矩形海域。\n\n接下来有会有 $B$ 个炸弹，每个炸弹轰炸的范围是一个矩形。\n\n海盗们有 $S$ 艘船，船要么是一行若干列的，要么是若干行一列的。你需要对每艘船输出：\n\n`MISS` 船没有被炸弹覆盖到；\n\n`HIT` 船被炸弹覆盖到，但没有完全覆盖；\n\n`SUNK` 船被炸弹完全覆盖；\n", "inputFormat": "第一行两个正整数 $N,M(1\\leq N,M\\leq 10^5)$。\n\n接下来一行一个数 $B(1\\leq B\\leq 2\\times 10^5)$。\n\n接下来 $B$ 行每行四个正整数 $x1,y1,x2,y2(1\\leq x1\\leq x2\\leq N,1\\leq y1\\leq y2\\leq M)$，表示炸弹覆盖范围。\n\n接下来一行一个数 $S(1\\leq S\\leq 2\\times 10^5)$。\n\n接下来 $S$ 行每行四个正整数 $opt,c,l,r$，若 $opt=1$ 则表示第 $i$ 艘船是由第 $c$ 行的第 $l$ 到 $r$ 列组成，否则若 $opt=2$ 则表示第 $c$ 列的第 $l$ 到 $r$ 行。\n\n**船与船之间或炸弹与炸弹之间可能相交。**\n\n", "outputFormat": "$S$ 行，对每艘船输出答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9285", "type": "P", "difficulty": 6, "samples": [["10\n10 9 8 7 6 5 4 3 2 1\n11\n1 1 2\n2 1 2\n2 1 3\n2 1 10\n2 9 10\n1 3 4\n2 1 4\n2 3 4\n2 2 3\n1 1 4\n2 1 4\n", "0\n80\n80\n2\n80\n0\n70\n0\n"]], "limits": {"time": [6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "AGM"], "title": "[AGM 2023 资格赛] YsaeSort", "background": "", "description": "给定一个长度为 $N$ 的序列 $A$，接下来进行 $Q$ 次操作：\n\n* $1\\ l\\ r(1\\leq l\\leq r\\leq N)$ 表示对 $[l,r]$ 这个区间排序。\n\n* $2\\ l\\ r(1\\leq l\\leq r\\leq N)$ 查询：如果对这个区间进行冒泡排序，那么交换的相邻两个数的乘积的最大值。\n\n保证 $1$ 操作排序的区间两两不交或包含。", "inputFormat": "输入的第一行将包含一个整数 $N(1≤N≤5\\times 10^4)$，表示数组的元素个数。\n\n第二行输入将包含 $N$ 个整数 $(0≤A[i]≤10^9,1≤i≤N)$，即数组的元素。\n\n第三行输入将包含一个整数 $Q(1≤Q≤5\\times10^4)$，表示操作次数。\n\n下面的每 $Q$ 行都包含一个题目中描述的询问。", "outputFormat": "$Q$ 行，对每一次询问输出答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AGM 2023 资格赛] YsaeSort", "background": "", "description": "给定一个长度为 $N$ 的序列 $A$，接下来进行 $Q$ 次操作：\n\n* $1\\ l\\ r(1\\leq l\\leq r\\leq N)$ 表示对 $[l,r]$ 这个区间排序。\n\n* $2\\ l\\ r(1\\leq l\\leq r\\leq N)$ 查询：如果对这个区间进行冒泡排序，那么交换的相邻两个数的乘积的最大值。\n\n保证 $1$ 操作排序的区间两两不交或包含。", "inputFormat": "输入的第一行将包含一个整数 $N(1≤N≤5\\times 10^4)$，表示数组的元素个数。\n\n第二行输入将包含 $N$ 个整数 $(0≤A[i]≤10^9,1≤i≤N)$，即数组的元素。\n\n第三行输入将包含一个整数 $Q(1≤Q≤5\\times10^4)$，表示操作次数。\n\n下面的每 $Q$ 行都包含一个题目中描述的询问。", "outputFormat": "$Q$ 行，对每一次询问输出答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9286", "type": "P", "difficulty": 3, "samples": [["2 3 3\n1 4 3\n6 5 2\n2 2 9\n1 3 5\n2 2 10", "1\n2\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2018", "分类讨论", "ROI（俄罗斯）"], "title": "[ROI 2018] Extraction of radium", "background": "译自 [ROI 2018 Day1](https://neerc.ifmo.ru/school/archive/2017-2018.html) T1. [Добыча радия](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day1.pdf) ([Extraction of radium](http://codeforces.com/gym/102147/problem/A))。 ", "description": "给一个 $n\\times m$ 的矩阵 $a$，矩阵中的数互不相同。\n接下来有 $q$ 次修改，每次修改会将某个值修改为一个更大的值。保证修改后矩阵中的数仍互不相同。\n每次修改后，请求出：矩阵中有多少个数，既是它所在行的最大值，又是它所在列的最大值。", "inputFormat": "第一行三个整数 $n$，$m$，$q$ ，表示矩阵的大小与修改操作的次数。\n接下来 $n$ 行，每行 $m$ 个整数，表示该矩阵。\n接下来 $q$ 行，每行三个整数 $x$，$y$，$t$，表示将该矩阵第 $x$ 行，第 $y$ 列的元素改为 $t$。 ", "outputFormat": "$q$ 行，每行一个整数，表示每次修改后，矩阵中有多少个数满足条件。", "hint": "对于所有数据，$1\\leq a(i,j) \\leq 10^7$，$1\\leq t\\leq 10^7$，$1 \\leq n,m,q \\leq 2 \\times 10^5$。\n\n| 子任务编号 | $n,m$ | $q$ |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1 \\leq n \\times m \\leq 100$ | $1 \\leq q \\leq 100$ |\n| $2$ | $1 \\leq n \\times m \\leq 5000$ | $1\\leq q \\leq 5000$ |\n| $3$ | $1 \\leq n,m \\leq 400$ | $1 \\leq q \\leq 2 \\times 10^5$ |\n| $4$ | $1 \\leq n \\times m \\leq 2 \\times 10^5$ | $1 \\leq q \\leq 2 \\times 10^5$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2018] Extraction of radium", "background": "译自 [ROI 2018 Day1](https://neerc.ifmo.ru/school/archive/2017-2018.html) T1. [Добыча радия](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day1.pdf) ([Extraction of radium](http://codeforces.com/gym/102147/problem/A))。 ", "description": "给一个 $n\\times m$ 的矩阵 $a$，矩阵中的数互不相同。\n接下来有 $q$ 次修改，每次修改会将某个值修改为一个更大的值。保证修改后矩阵中的数仍互不相同。\n每次修改后，请求出：矩阵中有多少个数，既是它所在行的最大值，又是它所在列的最大值。", "inputFormat": "第一行三个整数 $n$，$m$，$q$ ，表示矩阵的大小与修改操作的次数。\n接下来 $n$ 行，每行 $m$ 个整数，表示该矩阵。\n接下来 $q$ 行，每行三个整数 $x$，$y$，$t$，表示将该矩阵第 $x$ 行，第 $y$ 列的元素改为 $t$。 ", "outputFormat": "$q$ 行，每行一个整数，表示每次修改后，矩阵中有多少个数满足条件。", "hint": "对于所有数据，$1\\leq a(i,j) \\leq 10^7$，$1\\leq t\\leq 10^7$，$1 \\leq n,m,q \\leq 2 \\times 10^5$。\n\n| 子任务编号 | $n,m$ | $q$ |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1 \\leq n \\times m \\leq 100$ | $1 \\leq q \\leq 100$ |\n| $2$ | $1 \\leq n \\times m \\leq 5000$ | $1\\leq q \\leq 5000$ |\n| $3$ | $1 \\leq n,m \\leq 400$ | $1 \\leq q \\leq 2 \\times 10^5$ |\n| $4$ | $1 \\leq n \\times m \\leq 2 \\times 10^5$ | $1 \\leq q \\leq 2 \\times 10^5$ |", "locale": "zh-CN"}}}
{"pid": "P9287", "type": "P", "difficulty": 3, "samples": [["2\n1 2\n2 1\n1", "2\n1 2"], ["4\n3 2 4 1\n1 4 2 3\n3 1 2 4\n1 4 2 3\n1", "1\n3"], ["4\n3 2 4 1\n1 4 2 3\n3 1 2 4\n1 4 2 3\n2", "3\n1 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "贪心", "2018", "ROI（俄罗斯）"], "title": "[ROI 2018] Viruses", "background": "译自 [ROI 2018 Day1](https://neerc.ifmo.ru/school/archive/2017-2018.html) T2. [Вирусы](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day1.pdf) ([Viruses](https://codeforces.com/gym/102147/problem/D))。", "description": "现在有 $n$ 只细胞与 $n$ 个病毒，$i$ 号细胞的初始病毒的序号也为 $i$，每个细胞心中对每位病毒都有一定的易感染度。\n\n细胞之间可以互相攻击，如果细胞甲攻击了细胞乙，且乙「对甲现在的病毒的易感染度」比「对自家病毒的易感染度」高，那么乙就会被甲的病毒感染（成为甲的病毒的细胞）。\n\n细胞们可以任意安排攻击顺序。当且仅当没有细胞可以被任意一名病毒感染时，游戏宣告结束。\n\n如果存在一种攻击顺序，使得病毒 $i$ 最终拥有一只或以上的细胞，那么我们则称病毒 $i$ 为「可行的病毒」。\n如果对于任意一种攻击顺序，都使得病毒 $i$ 最终拥有一只或以上的细胞，那么我们则称病毒 $i$ 为「稳定的病毒」。\n\n现在病毒们想知道，有多少个可行的病毒与稳定的病毒。", "inputFormat": "第一行一个正整数 $n$，表示细胞与病毒的数量。\n\n下面 $n$ 行，每行 $n$ 个正整数，表示每名病毒按当前细胞心中的易感染度降序排列后的病毒编号序列。\n\n比如输入了 `2 1 3`，则表示该细胞对 $2$ 号病毒的易感染度最高，对 $1$ 号病毒的易感染度第二高，对 $3$ 号病毒的易感染度最差。\n\n最后一行一个整数 $p$。", "outputFormat": "第一行，一个整数 $x$。如果 $p=1$，输出稳定的病毒数量；如果 $p=2$，输出可行的病毒的数量。\n\n接下来一行， $x$ 个整数，表示这 $x$ 个病毒的编号，按升序排列。", "hint": "对于所有的数据，$1 \\leq n \\leq 500$。\n\n| 子任务编号 | $n$ | $p$ |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1 \\leq n \\leq 5$ | $p = 1$ |\n| $2$ | $1 \\leq n \\leq 500$ | $p = 1$ |\n| $3$ | $1 \\leq n \\leq 5$ | $p = 1,2$ |\n| $4$ | $1 \\leq n \\leq 50$ | $p = 1,2$ |\n| $5$ | $1 \\leq n \\leq 500$ | $p = 1,2$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2018] Viruses", "background": "译自 [ROI 2018 Day1](https://neerc.ifmo.ru/school/archive/2017-2018.html) T2. [Вирусы](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day1.pdf) ([Viruses](https://codeforces.com/gym/102147/problem/D))。", "description": "现在有 $n$ 只细胞与 $n$ 个病毒，$i$ 号细胞的初始病毒的序号也为 $i$，每个细胞心中对每位病毒都有一定的易感染度。\n\n细胞之间可以互相攻击，如果细胞甲攻击了细胞乙，且乙「对甲现在的病毒的易感染度」比「对自家病毒的易感染度」高，那么乙就会被甲的病毒感染（成为甲的病毒的细胞）。\n\n细胞们可以任意安排攻击顺序。当且仅当没有细胞可以被任意一名病毒感染时，游戏宣告结束。\n\n如果存在一种攻击顺序，使得病毒 $i$ 最终拥有一只或以上的细胞，那么我们则称病毒 $i$ 为「可行的病毒」。\n如果对于任意一种攻击顺序，都使得病毒 $i$ 最终拥有一只或以上的细胞，那么我们则称病毒 $i$ 为「稳定的病毒」。\n\n现在病毒们想知道，有多少个可行的病毒与稳定的病毒。", "inputFormat": "第一行一个正整数 $n$，表示细胞与病毒的数量。\n\n下面 $n$ 行，每行 $n$ 个正整数，表示每名病毒按当前细胞心中的易感染度降序排列后的病毒编号序列。\n\n比如输入了 `2 1 3`，则表示该细胞对 $2$ 号病毒的易感染度最高，对 $1$ 号病毒的易感染度第二高，对 $3$ 号病毒的易感染度最差。\n\n最后一行一个整数 $p$。", "outputFormat": "第一行，一个整数 $x$。如果 $p=1$，输出稳定的病毒数量；如果 $p=2$，输出可行的病毒的数量。\n\n接下来一行， $x$ 个整数，表示这 $x$ 个病毒的编号，按升序排列。", "hint": "对于所有的数据，$1 \\leq n \\leq 500$。\n\n| 子任务编号 | $n$ | $p$ |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1 \\leq n \\leq 5$ | $p = 1$ |\n| $2$ | $1 \\leq n \\leq 500$ | $p = 1$ |\n| $3$ | $1 \\leq n \\leq 5$ | $p = 1,2$ |\n| $4$ | $1 \\leq n \\leq 50$ | $p = 1,2$ |\n| $5$ | $1 \\leq n \\leq 500$ | $p = 1,2$ |", "locale": "zh-CN"}}}
{"pid": "P9288", "type": "P", "difficulty": 7, "samples": [["5\n80 20\n60 50\n40 40\n15 10\n70 30", "220"], ["1\n50 0", "50"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "线段树", "分块", "凸包", "扫描线", "ROI（俄罗斯）"], "title": "[ROI 2018] Innophone", "background": "译自 [ROI 2018 Day1](https://neerc.ifmo.ru/school/archive/2017-2018.html) T3. [Иннофон](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day1.pdf) ([Innophone](http://codeforces.com/gym/102147/problem/B))。 ", "description": "有一个二元函数 $f(x,y)$，它是这么定义的：\n\n $f(x,y)=\\left\\{\n\\begin{array}{rcl}\na, & & {\\text{if} \\quad \\quad \\ \\ \\ a \\leq x}\\\\\nb, & & {\\text{else if} \\quad b \\leq y}\\\\\n0, & & {\\text{else}}\n\\end{array} \\right.$\n\n其中 $a,b$ 为常数。现在给定 $n$ 组 $x,y$，你需要选择合适的 $a,b$，使得 $\\sum_{i=1}^{n} f(x_i,y_i)$ 最大。", "inputFormat": "第一行一个整数 $n$，表示 $x$，$y$ 的组数。\n\n后面 $n$ 行，每行两个数 $x_i$，$y_i$。", "outputFormat": "一行，一个数，输出 $\\max(\\sum_{i=1}^{n} f(x_i,y_i))$。", "hint": "对于 $100\\%$ 的数据，$0\\leq y_i\\leq x_i\\leq 10^9$，$1 \\leq n \\leq 1.5 \\times 10^5$。\n\n| 子任务编号 | $n$ | $x,y$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $1 \\leq n \\leq 100$ | $0 \\leq y_i \\leq x_i \\leq 100$ |\n| $2$ | $1 \\leq n \\leq 300$ | $0\\leq y_i\\leq x_i\\leq 10^9$ |\n| $3$ | $1 \\leq n \\leq 3000$ | $0\\leq y_i\\leq x_i\\leq 10^9$ |\n| $4$ | $1 \\leq n \\leq 10^5$ | $y_i = 0$ |\n| $5$ | $1 \\leq n \\leq 10^5$ | $x_i = y_i$ |\n| $6$ | $1 \\leq n \\leq 50000$ | $0\\leq y_i\\leq x_i\\leq 10^9$ | \n| $7$ | $1 \\leq n \\leq 75000$ | $0\\leq y_i\\leq x_i\\leq 10^9$ | \n| $8$ | $1 \\leq n \\leq 10^5$ | $0\\leq y_i\\leq x_i\\leq 10^9$ | \n| $9$ | $1 \\leq n \\leq 1.25 \\times 10^5$ | $0\\leq y_i\\leq x_i\\leq 10^9$ | \n| $10$ | $1 \\leq n \\leq 1.5 \\times 10^5$ | $0\\leq y_i\\leq x_i\\leq 10^9$ | \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2018] Innophone", "background": "译自 [ROI 2018 Day1](https://neerc.ifmo.ru/school/archive/2017-2018.html) T3. [Иннофон](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day1.pdf) ([Innophone](http://codeforces.com/gym/102147/problem/B))。 ", "description": "有一个二元函数 $f(x,y)$，它是这么定义的：\n\n $f(x,y)=\\left\\{\n\\begin{array}{rcl}\na, & & {\\text{if} \\quad \\quad \\ \\ \\ a \\leq x}\\\\\nb, & & {\\text{else if} \\quad b \\leq y}\\\\\n0, & & {\\text{else}}\n\\end{array} \\right.$\n\n其中 $a,b$ 为常数。现在给定 $n$ 组 $x,y$，你需要选择合适的 $a,b$，使得 $\\sum_{i=1}^{n} f(x_i,y_i)$ 最大。", "inputFormat": "第一行一个整数 $n$，表示 $x$，$y$ 的组数。\n\n后面 $n$ 行，每行两个数 $x_i$，$y_i$。", "outputFormat": "一行，一个数，输出 $\\max(\\sum_{i=1}^{n} f(x_i,y_i))$。", "hint": "对于 $100\\%$ 的数据，$0\\leq y_i\\leq x_i\\leq 10^9$，$1 \\leq n \\leq 1.5 \\times 10^5$。\n\n| 子任务编号 | $n$ | $x,y$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $1 \\leq n \\leq 100$ | $0 \\leq y_i \\leq x_i \\leq 100$ |\n| $2$ | $1 \\leq n \\leq 300$ | $0\\leq y_i\\leq x_i\\leq 10^9$ |\n| $3$ | $1 \\leq n \\leq 3000$ | $0\\leq y_i\\leq x_i\\leq 10^9$ |\n| $4$ | $1 \\leq n \\leq 10^5$ | $y_i = 0$ |\n| $5$ | $1 \\leq n \\leq 10^5$ | $x_i = y_i$ |\n| $6$ | $1 \\leq n \\leq 50000$ | $0\\leq y_i\\leq x_i\\leq 10^9$ | \n| $7$ | $1 \\leq n \\leq 75000$ | $0\\leq y_i\\leq x_i\\leq 10^9$ | \n| $8$ | $1 \\leq n \\leq 10^5$ | $0\\leq y_i\\leq x_i\\leq 10^9$ | \n| $9$ | $1 \\leq n \\leq 1.25 \\times 10^5$ | $0\\leq y_i\\leq x_i\\leq 10^9$ | \n| $10$ | $1 \\leq n \\leq 1.5 \\times 10^5$ | $0\\leq y_i\\leq x_i\\leq 10^9$ | \n", "locale": "zh-CN"}}}
{"pid": "P9289", "type": "P", "difficulty": 7, "samples": [["4 5 3\n1 1\n2 3\n4 5", "3\n1 2 3"], ["5 6 9\n1 1\n4 3\n4 6\n2 5\n3 1\n3 3\n3 6\n5 4\n5 6", "5\n1 6 2 8 9 "]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2018] Quantum teleportation", "background": "译自 [ROI 2018 Day1](https://neerc.ifmo.ru/school/archive/2017-2018.html)  T4. [Квантовая телепортация ](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day1.pdf)([Quantum teleportation](https://codeforces.com/gym/102147/problem/C))。 ", "description": "在一个平面直角坐标系上有编号为 $1\\dots k$ 的 $k$ 块 CPU。\n\n每块 CPU 的位置可以用平面上的坐标来表示。$1$ 号 CPU 位于 $(1,1)$，$k$ 号 CPU 位于 $(n,m)$。保证所有 CPU 均位于整点上，且对于每块 CPU 的坐标 $(x_i, y_i)$，保证 $1 \\le x_i \\le n, 1 \\le y_i \\le m$。\n\n$i$ 号 CPU 通过总线将一笔数据传输到 $j$ 号 CPU 的耗时为 ${2^{\\max(|x_{{i}}-x_{{j}}|,|y_{{i}}-y_{{j}}|)}}$ 个单位时间。\n\n试求：要将数据从 $1$ 号 CPU 传送到 $k$ 号 CPU，至少需要多久，并给出一组方案。", "inputFormat": "第一行三个整数 $n,m,k$。\n\n以下 $k$ 行，每行两个整数 $x_i,y_i$。", "outputFormat": "第一行一个整数 $L$，表示最快的方案中要经过多少块 CPU。\n\n第二行 $L$ 个整数，表示依次经过的 CPU。\n\n如果存在多组路径使耗时最少，输出任意一种即可。", "hint": "对于所有的数据，$2 \\leq n,m,k \\leq 10000$。\n\n| 子任务编号 | $n,m,k$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $2 \\leq n,m,k \\leq 20$ | 无 |\n| $2$ | $2 \\leq n,m,k \\leq 500$ | 无 |\n| $3$ | $2 \\leq n,m,k \\leq 10000$ | 每行、每列只有一个 CPU |\n| $4$ | $2 \\leq n,m,k \\leq 10000$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2018] Quantum teleportation", "background": "译自 [ROI 2018 Day1](https://neerc.ifmo.ru/school/archive/2017-2018.html)  T4. [Квантовая телепортация ](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day1.pdf)([Quantum teleportation](https://codeforces.com/gym/102147/problem/C))。 ", "description": "在一个平面直角坐标系上有编号为 $1\\dots k$ 的 $k$ 块 CPU。\n\n每块 CPU 的位置可以用平面上的坐标来表示。$1$ 号 CPU 位于 $(1,1)$，$k$ 号 CPU 位于 $(n,m)$。保证所有 CPU 均位于整点上，且对于每块 CPU 的坐标 $(x_i, y_i)$，保证 $1 \\le x_i \\le n, 1 \\le y_i \\le m$。\n\n$i$ 号 CPU 通过总线将一笔数据传输到 $j$ 号 CPU 的耗时为 ${2^{\\max(|x_{{i}}-x_{{j}}|,|y_{{i}}-y_{{j}}|)}}$ 个单位时间。\n\n试求：要将数据从 $1$ 号 CPU 传送到 $k$ 号 CPU，至少需要多久，并给出一组方案。", "inputFormat": "第一行三个整数 $n,m,k$。\n\n以下 $k$ 行，每行两个整数 $x_i,y_i$。", "outputFormat": "第一行一个整数 $L$，表示最快的方案中要经过多少块 CPU。\n\n第二行 $L$ 个整数，表示依次经过的 CPU。\n\n如果存在多组路径使耗时最少，输出任意一种即可。", "hint": "对于所有的数据，$2 \\leq n,m,k \\leq 10000$。\n\n| 子任务编号 | $n,m,k$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $2 \\leq n,m,k \\leq 20$ | 无 |\n| $2$ | $2 \\leq n,m,k \\leq 500$ | 无 |\n| $3$ | $2 \\leq n,m,k \\leq 10000$ | 每行、每列只有一个 CPU |\n| $4$ | $2 \\leq n,m,k \\leq 10000$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P9290", "type": "P", "difficulty": 4, "samples": [["5\n5 4 3 2 1", "5"], ["4\n1 3 2 4", "1"], ["6\n2 3 1 1 5 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2018", "线段树", "分治", "单调栈", "ROI（俄罗斯）"], "title": "[ROI 2018]  Decryption", "background": "译自 [ROI 2018 Day2](https://neerc.ifmo.ru/school/archive/2017-2018.html) T1. [Расшифровка](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day2.pdf) ([Decryption](https://codeforces.com/gym/102154/problem/B))。", "description": "研究表明，汉字的顺序并不一定能影响阅读。科学家们对数列进行了类似的研究。\n\n给一个正整数数列，若数列首项为数列中所有数的最小值，末项为数列中的最大值，则我们称这是个正确的数列。例如，序列 $[1, 3, 2, 4]$ 和 $[1, 2, 1, 2]$ 是正确的，但序列 \n$[1, 3, 2]$ 不是。\n\n给出长度为 $n$ 的序列 $[a_1, a_2, \\ldots, a_n]$。对于该序列的某个片段 $[a_l, a_{l+1}, \\ldots, a_r]$, 若该片段的首项为该片段中的最小值，末项为该片段中的最大值，则我们称这是个正确的片段。\n\n对于给定的序列，请求出该序列至少需要被分成多少段，才能使得每个片段均为正确的片段。序列 $[2, 3, 1, 1, 5, 1]$ 可以分为三个正确的段：$[2, 3]$ 和 $[1, 1, 5]$ 和 $[1]$。\n\n需要编写一个程序，该程序按给定的顺序确定可以划分的最小正确段数。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个数，分别为 $a_1,a_2,\\ldots,a_n$。", "outputFormat": "输出可以划分的最小正确段数。", "hint": "- 子任务 1（30 分），$1 \\leq n \\leq 500$。\n- 子任务 2（30 分），$1 \\leq n \\leq 5000$。\n- 子任务 3（40 分），$1 \\leq n \\leq3 \\times 10^5$。\n\n对于所有数据，$1 \\leq n \\leq3 \\times 10^5$，$1\\leq a_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2018]  Decryption", "background": "译自 [ROI 2018 Day2](https://neerc.ifmo.ru/school/archive/2017-2018.html) T1. [Расшифровка](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day2.pdf) ([Decryption](https://codeforces.com/gym/102154/problem/B))。", "description": "研究表明，汉字的顺序并不一定能影响阅读。科学家们对数列进行了类似的研究。\n\n给一个正整数数列，若数列首项为数列中所有数的最小值，末项为数列中的最大值，则我们称这是个正确的数列。例如，序列 $[1, 3, 2, 4]$ 和 $[1, 2, 1, 2]$ 是正确的，但序列 \n$[1, 3, 2]$ 不是。\n\n给出长度为 $n$ 的序列 $[a_1, a_2, \\ldots, a_n]$。对于该序列的某个片段 $[a_l, a_{l+1}, \\ldots, a_r]$, 若该片段的首项为该片段中的最小值，末项为该片段中的最大值，则我们称这是个正确的片段。\n\n对于给定的序列，请求出该序列至少需要被分成多少段，才能使得每个片段均为正确的片段。序列 $[2, 3, 1, 1, 5, 1]$ 可以分为三个正确的段：$[2, 3]$ 和 $[1, 1, 5]$ 和 $[1]$。\n\n需要编写一个程序，该程序按给定的顺序确定可以划分的最小正确段数。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个数，分别为 $a_1,a_2,\\ldots,a_n$。", "outputFormat": "输出可以划分的最小正确段数。", "hint": "- 子任务 1（30 分），$1 \\leq n \\leq 500$。\n- 子任务 2（30 分），$1 \\leq n \\leq 5000$。\n- 子任务 3（40 分），$1 \\leq n \\leq3 \\times 10^5$。\n\n对于所有数据，$1 \\leq n \\leq3 \\times 10^5$，$1\\leq a_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9291", "type": "P", "difficulty": 6, "samples": [["5\n3 1 4 2 5", "1\n1 5"], ["8\n2 4 1 5 3 6 7 8", "2\n2 6\n1 2\n"], ["2\n2 1", "3\n1 1\n2 2\n1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2018] Quick sort", "background": "译自 [ROI 2018 Day2](https://neerc.ifmo.ru/school/archive/2017-2018.html) T2. [Быстрая сортировка\n](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day2.pdf)([Quick sort](http://codeforces.com/gym/102154/problem/C))。", "description": "给一个包含 $n$ 个元素的排列 $[a_1,a_2,\\ldots,a_n]$。\n定义操作 $S(l,r),$ 表示：将数列的片段 $[a_l,a_{l+1},\\ldots,a_r]$ 重排成 $[a_{l+1},a_{l+3},\\ldots,a_l,a_{l+2},\\ldots]$。\n举个例子：$[2, 4, 1, 5, 3, 6, 7, 8]\\xrightarrow{S(2,6)} [2, 1, 3, 4, 5, 6, 7, 8]$， 其中子串 $[4, 1, 5, 3, 6]$ 被重排成了 $[1, 3, 4, 5, 6]$。\n给定一个排列，试求经过多少次操作能使排列变成递增顺序，并输出任意一组方案，$不$要求方案的操作次数最少，但要求操作次数 $\\leq 15000$。", "inputFormat": "第一行一个数 $n$。\n\n第二行 $n$ 个数，表示排列 $a$。", "outputFormat": "第一行一个整数 $k$，表示你的操作次数。 需要满足 $0 \\leq k \\leq 15000$。\n接下来 $k$ 行，你需要按照操作顺序描述你的操作。对于每一步操作，输出两个数 $L$, $R$，表示你对片段 $a_L,a_{L+1},\\ldots, a_R$ 执行了一次操作。 需满足 $1 \\leq L \\leq R \\le n$。\n注意，你**不**需要最小化。你只需保证 $0 \\le k \\leq 15000$ 即可。保证存在这样的 $k$。 ", "hint": "此处设 $k_0$ 表示最小操作次数。\n\n对于所有数据，$1\\leq n\\leq 3000$，$0\\leq k_0\\leq 15000$，$1\\leq a_i\\leq n$，且 $a_i$ 互不相同。\n\n| 子任务编号 | $n$ | 特殊性质 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1 \\leq n \\leq 100$ | $k_0 = 1$ |\n| $2$ | $1 \\leq n \\leq 100$ | 无 |\n| $3$ | $1 \\leq n \\leq 1000$ | 无 |\n| $4$ | $1 \\leq n \\leq 3000$ | 无 |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2018] Quick sort", "background": "译自 [ROI 2018 Day2](https://neerc.ifmo.ru/school/archive/2017-2018.html) T2. [Быстрая сортировка\n](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day2.pdf)([Quick sort](http://codeforces.com/gym/102154/problem/C))。", "description": "给一个包含 $n$ 个元素的排列 $[a_1,a_2,\\ldots,a_n]$。\n定义操作 $S(l,r),$ 表示：将数列的片段 $[a_l,a_{l+1},\\ldots,a_r]$ 重排成 $[a_{l+1},a_{l+3},\\ldots,a_l,a_{l+2},\\ldots]$。\n举个例子：$[2, 4, 1, 5, 3, 6, 7, 8]\\xrightarrow{S(2,6)} [2, 1, 3, 4, 5, 6, 7, 8]$， 其中子串 $[4, 1, 5, 3, 6]$ 被重排成了 $[1, 3, 4, 5, 6]$。\n给定一个排列，试求经过多少次操作能使排列变成递增顺序，并输出任意一组方案，$不$要求方案的操作次数最少，但要求操作次数 $\\leq 15000$。", "inputFormat": "第一行一个数 $n$。\n\n第二行 $n$ 个数，表示排列 $a$。", "outputFormat": "第一行一个整数 $k$，表示你的操作次数。 需要满足 $0 \\leq k \\leq 15000$。\n接下来 $k$ 行，你需要按照操作顺序描述你的操作。对于每一步操作，输出两个数 $L$, $R$，表示你对片段 $a_L,a_{L+1},\\ldots, a_R$ 执行了一次操作。 需满足 $1 \\leq L \\leq R \\le n$。\n注意，你**不**需要最小化。你只需保证 $0 \\le k \\leq 15000$ 即可。保证存在这样的 $k$。 ", "hint": "此处设 $k_0$ 表示最小操作次数。\n\n对于所有数据，$1\\leq n\\leq 3000$，$0\\leq k_0\\leq 15000$，$1\\leq a_i\\leq n$，且 $a_i$ 互不相同。\n\n| 子任务编号 | $n$ | 特殊性质 |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1 \\leq n \\leq 100$ | $k_0 = 1$ |\n| $2$ | $1 \\leq n \\leq 100$ | 无 |\n| $3$ | $1 \\leq n \\leq 1000$ | 无 |\n| $4$ | $1 \\leq n \\leq 3000$ | 无 |\n\n", "locale": "zh-CN"}}}
{"pid": "P9292", "type": "P", "difficulty": 5, "samples": [["5 1\n8 5 5 7 7", "3\n1\n1\n2\n1"], ["5 2\n8 5 5 7 7", "5\n3\n2\n4\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树形数据结构", "2018", "线段树", "树状数组", "扫描线", "ROI（俄罗斯）"], "title": "[ROI 2018] Robomarathon", "background": "译自 [ROI 2018 Day2](https://neerc.ifmo.ru/school/archive/2017-2018.html) T3. [Робомарафон](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day2.pdf) ([Robomarathon](https://codeforces.com/gym/102154/problem/D))。", "description": "有 $N$ 名机器人选手参加马拉松，选手的编号分别为 $1\\ldots N$。跑道包含 $N$ 条分道，编号分别为 $1\\ldots N$。每位选手占据一条分道，$i$ 号选手（简称 $i$ 号）占据编号为 $i$ 的分道（简称 $i$ 道）。每条分道从起点到终点的路程均相同。已知 $i$ 号跑完全程需要 $a_i$ 秒。\n\n每条分道的起始点有一个发令喇叭，不过不是播声音的。裁判皮了一下，把有些分道上的发令喇叭关掉了。\n\n时辰一到，所有开着的发令喇叭会同时发出起跑信号（下文简称发炮）。如果 $i$ 道上发炮，$i$ 号会立即起跑。\n\n发令信号的传递速度为每秒钟 $1$ 道。举个例子，如果有且只有四道上发炮，那么一秒后三号和五号会收到信号并立即起跑；两秒后二号和六号会收到信号并立即起跑。假设 $i$ 号在第 $x_i$ 秒起跑，则他会在第 $f_i = a_i + x_i$ 秒冲线。\n\n我们按照冲线顺序给选手排名。比如，如果 $n=3$， $f_1= f_2= 4$，$f_3= 5$, 那么一号和二号并列第一，三号屈居第三。\n\n可见，选手的排名取决于发令喇叭的开关状态。请求出每位选手的最好名次或最差名次。", "inputFormat": "第一行：$n$，$p$。\n\n接下来一行 $n$ 个数，表示 $a_1$，$a_2 \\ldots a_n$。", "outputFormat": "如果 $p=1$，输出最好名次。\n\n如果 $p=2$， 输出最差名次。", "hint": "对于所有数据，$1 \\leq n \\leq 4 \\times 10^5$，$0\\leq a_i \\leq 10^9$。\n\n| 子任务编号 | $n$ | $p$ |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1 \\leq n \\leq 20$ | $p = 1$ |\n| $2$ | $1 \\leq n \\leq 20$ | $p = 2$ |\n| $3$ | $1 \\leq n \\leq 4 \\times 10^5$ | $p = 1$ |\n| $4$ | $1 \\leq n \\leq 4 \\times 10^5$ | $p = 2$ | \n\n其中，Subtask 3 和 4 内的每个测试点 1 分，加和计算。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2018] Robomarathon", "background": "译自 [ROI 2018 Day2](https://neerc.ifmo.ru/school/archive/2017-2018.html) T3. [Робомарафон](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day2.pdf) ([Robomarathon](https://codeforces.com/gym/102154/problem/D))。", "description": "有 $N$ 名机器人选手参加马拉松，选手的编号分别为 $1\\ldots N$。跑道包含 $N$ 条分道，编号分别为 $1\\ldots N$。每位选手占据一条分道，$i$ 号选手（简称 $i$ 号）占据编号为 $i$ 的分道（简称 $i$ 道）。每条分道从起点到终点的路程均相同。已知 $i$ 号跑完全程需要 $a_i$ 秒。\n\n每条分道的起始点有一个发令喇叭，不过不是播声音的。裁判皮了一下，把有些分道上的发令喇叭关掉了。\n\n时辰一到，所有开着的发令喇叭会同时发出起跑信号（下文简称发炮）。如果 $i$ 道上发炮，$i$ 号会立即起跑。\n\n发令信号的传递速度为每秒钟 $1$ 道。举个例子，如果有且只有四道上发炮，那么一秒后三号和五号会收到信号并立即起跑；两秒后二号和六号会收到信号并立即起跑。假设 $i$ 号在第 $x_i$ 秒起跑，则他会在第 $f_i = a_i + x_i$ 秒冲线。\n\n我们按照冲线顺序给选手排名。比如，如果 $n=3$， $f_1= f_2= 4$，$f_3= 5$, 那么一号和二号并列第一，三号屈居第三。\n\n可见，选手的排名取决于发令喇叭的开关状态。请求出每位选手的最好名次或最差名次。", "inputFormat": "第一行：$n$，$p$。\n\n接下来一行 $n$ 个数，表示 $a_1$，$a_2 \\ldots a_n$。", "outputFormat": "如果 $p=1$，输出最好名次。\n\n如果 $p=2$， 输出最差名次。", "hint": "对于所有数据，$1 \\leq n \\leq 4 \\times 10^5$，$0\\leq a_i \\leq 10^9$。\n\n| 子任务编号 | $n$ | $p$ |\n| :-----------: | :-----------: | :-----------: |\n| $1$ | $1 \\leq n \\leq 20$ | $p = 1$ |\n| $2$ | $1 \\leq n \\leq 20$ | $p = 2$ |\n| $3$ | $1 \\leq n \\leq 4 \\times 10^5$ | $p = 1$ |\n| $4$ | $1 \\leq n \\leq 4 \\times 10^5$ | $p = 2$ | \n\n其中，Subtask 3 和 4 内的每个测试点 1 分，加和计算。\n", "locale": "zh-CN"}}}
{"pid": "P9293", "type": "P", "difficulty": 7, "samples": [["2\n10\n10", "110"], ["2\n10100\n1001", "11101"], ["3\n1\n1\n110", "1011"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "ROI（俄罗斯）"], "title": "[ROI 2018] Addition without carry", "background": "译自 [ROI 2018 Day2](https://neerc.ifmo.ru/school/archive/2017-2018.html) T4. [Сложение без переносов ](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day2.pdf)([Addition without carry](https://codeforces.com/gym/102154/problem/A))。", "description": "对于一个只含自然数的集合，如果集合中所有数之和 = 集合中所有数的 $\\mathtt{OR}$ 和，那么我们称之为「美丽的集合」。\n\n给出 $a_1\\ldots a_n$, 存在一个由数列 $b_1\\ldots b_n$ 组成的「美丽的集合」，且满足：\n\n$\\forall i=1\\ldots n$， $b_i\\geq a_i$, 且\n$\\sum b_i$ 最小。\n\n试求出新数列的 $\\sum b_i$。\n\n为了简便起见，我们给出的 $a_i$ 均为二进制形式，你的答案也应是二进制形式。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，一行一个二进制数 $a_i$。", "outputFormat": "输出得出的二进制的 $\\sum b_i$。", "hint": "对于所有的数据，$1 \\leq n \\leq 3 \\times 10^5$。\n\n（在二进制下）$a_i$ 的位数不超过 $3 \\times 10^5$，并且所有 $a_i$ 的位数之和不超过 $3\\times 10^5$。\n\n子任务依赖仅供参考，洛谷评测时无子任务依赖。\n\n| 子任务 | 分值 | $n$ | $\\max L$ | 必须通过的子任务 |\n|:------:|:----:|:---:|:--------:|:----------------:|\n| 1      | 4    | $n=2$ | $\\max L \\le 10$ |    |\n| 2      | 2    | $n=2$ | $\\max L \\le 20$ | 1  |\n| 3      | 2    | $n=2$ | $\\max L \\le 100$ | 1,2 |\n| 4      | 2    | $n=2$ | $\\max L \\le 1000$ | 1--3 |\n| 5      | 2    | $n=2$ | $\\max L \\le 300\\,000$ | 1--4 |\n| 6      | 4    | $n \\le 100$ | $\\max L \\le 100$ |    |\n| 7      | 4    | $n \\le 1000$ | $\\max L \\le 1000$ | 6  |\n| 8      | 4    | $n \\le 300\\,000$ | $\\max L \\le 300\\,000$ | 6,7 |\n| 9      | 4    | $n \\le 5$ | $\\max L \\le 5$ | U  |\n| 10     | 4    | $n \\le 5$ | $\\max L \\le 1\\,000$ | U,1--4,9 |\n| 11     | 4    | $n \\le 1\\,000$ | $\\max L \\le 5$ | U,9 |\n| 12     | 4    | $n \\le 10$ | $\\max L \\le 10$ | U,1,9 |\n| 13     | 4    | $n \\le 50$ | $\\max L \\le 50$ | U,1,2,9,12 |\n| 14     | 7    | $n \\le 100$ | $\\max L \\le 100$ | U,1--3,6,9,12,13 |\n| 15     | 7    | $n \\le 300$ | $\\max L \\le 300$ | U,1--3,6,9,12--14 |\n| 16     | 8    | $n \\le 1000$ | $\\max L \\le 1000$ | U,1--4,6,7,9--15 |\n| 17     | 8    | $n \\le 3000$ | $\\max L \\le 3000$ | U,1--4,6,7,9--16 |\n| 18     | 6    | $n \\le 10\\,000$ | $\\max L \\le 10\\,000$ | U,1--4,6,7,9--17 |\n| 19     | 7    | $n \\le 30\\,000$ | $\\max L \\le 30\\,000$ | U,1--4,6,7,9--18 |\n| 20     | 7    | $n \\le 100\\,000$ | $\\max L \\le 100\\,000$ | U,1--4,6,7,9--19 |\n| 21     | 6    | $n \\le 300\\,000$ | $\\max L \\le 300\\,000$ | U,1--20 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2018] Addition without carry", "background": "译自 [ROI 2018 Day2](https://neerc.ifmo.ru/school/archive/2017-2018.html) T4. [Сложение без переносов ](https://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-roi-2018-day2.pdf)([Addition without carry](https://codeforces.com/gym/102154/problem/A))。", "description": "对于一个只含自然数的集合，如果集合中所有数之和 = 集合中所有数的 $\\mathtt{OR}$ 和，那么我们称之为「美丽的集合」。\n\n给出 $a_1\\ldots a_n$, 存在一个由数列 $b_1\\ldots b_n$ 组成的「美丽的集合」，且满足：\n\n$\\forall i=1\\ldots n$， $b_i\\geq a_i$, 且\n$\\sum b_i$ 最小。\n\n试求出新数列的 $\\sum b_i$。\n\n为了简便起见，我们给出的 $a_i$ 均为二进制形式，你的答案也应是二进制形式。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，一行一个二进制数 $a_i$。", "outputFormat": "输出得出的二进制的 $\\sum b_i$。", "hint": "对于所有的数据，$1 \\leq n \\leq 3 \\times 10^5$。\n\n（在二进制下）$a_i$ 的位数不超过 $3 \\times 10^5$，并且所有 $a_i$ 的位数之和不超过 $3\\times 10^5$。\n\n子任务依赖仅供参考，洛谷评测时无子任务依赖。\n\n| 子任务 | 分值 | $n$ | $\\max L$ | 必须通过的子任务 |\n|:------:|:----:|:---:|:--------:|:----------------:|\n| 1      | 4    | $n=2$ | $\\max L \\le 10$ |    |\n| 2      | 2    | $n=2$ | $\\max L \\le 20$ | 1  |\n| 3      | 2    | $n=2$ | $\\max L \\le 100$ | 1,2 |\n| 4      | 2    | $n=2$ | $\\max L \\le 1000$ | 1--3 |\n| 5      | 2    | $n=2$ | $\\max L \\le 300\\,000$ | 1--4 |\n| 6      | 4    | $n \\le 100$ | $\\max L \\le 100$ |    |\n| 7      | 4    | $n \\le 1000$ | $\\max L \\le 1000$ | 6  |\n| 8      | 4    | $n \\le 300\\,000$ | $\\max L \\le 300\\,000$ | 6,7 |\n| 9      | 4    | $n \\le 5$ | $\\max L \\le 5$ | U  |\n| 10     | 4    | $n \\le 5$ | $\\max L \\le 1\\,000$ | U,1--4,9 |\n| 11     | 4    | $n \\le 1\\,000$ | $\\max L \\le 5$ | U,9 |\n| 12     | 4    | $n \\le 10$ | $\\max L \\le 10$ | U,1,9 |\n| 13     | 4    | $n \\le 50$ | $\\max L \\le 50$ | U,1,2,9,12 |\n| 14     | 7    | $n \\le 100$ | $\\max L \\le 100$ | U,1--3,6,9,12,13 |\n| 15     | 7    | $n \\le 300$ | $\\max L \\le 300$ | U,1--3,6,9,12--14 |\n| 16     | 8    | $n \\le 1000$ | $\\max L \\le 1000$ | U,1--4,6,7,9--15 |\n| 17     | 8    | $n \\le 3000$ | $\\max L \\le 3000$ | U,1--4,6,7,9--16 |\n| 18     | 6    | $n \\le 10\\,000$ | $\\max L \\le 10\\,000$ | U,1--4,6,7,9--17 |\n| 19     | 7    | $n \\le 30\\,000$ | $\\max L \\le 30\\,000$ | U,1--4,6,7,9--18 |\n| 20     | 7    | $n \\le 100\\,000$ | $\\max L \\le 100\\,000$ | U,1--4,6,7,9--19 |\n| 21     | 6    | $n \\le 300\\,000$ | $\\max L \\le 300\\,000$ | U,1--20 |", "locale": "zh-CN"}}}
{"pid": "P9294", "type": "P", "difficulty": 3, "samples": [["5\n5 1 1\n0 3 4\n1 4 3\n4 0 0\n0 0 0", "9"], ["3\n1 1 2\n2 1 1\n1 1 2", "7"], ["5\n5 5 5\n5 5 5\n5 5 5\n5 5 5\n5 5 5", "50"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "POI（波兰）"], "title": "[POI 2020/2021 R1] Cukiernia / 糕点店", "background": "**题目译自 [XXVIII Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi28-1/dashboard/) [Cukiernia](https://sio2.mimuw.edu.pl/c/oi28-1/p/cuk/)。**", "description": "Bajtuś 面包店售卖蛋糕，甜甜圈和羊角面包三种食物。在面包店中，有 $n$ 个橱窗，在正常情况下，每个货架上只应该放置一种食物。但一天早上，面包店老板 Bajtazara 的儿子 Bajtuś 偷偷进入了面包店，将所有的食物摆放得乱七八糟。\n\n面包店马上就要开门了，Bajtazara 急切地想要重新摆放食物，使得每个货架上只有一种食物（特别地，一个货架上没有食物也是允许的）。请你帮助他求出，至少需要移动多少次食物才能达成目标。", "inputFormat": "第一行一个整数 $n$，代表面包店中货架的数量。\n\n接下来 $n$ 行，第 $i$ 行三个整数 $d_i,p_i,r_i$，分别代表该货架上现有的蛋糕数，甜甜圈数和羊角面包数。数据保证面包店中至少有一份食物。", "outputFormat": "输出一个整数，表示需要移动食物的最小次数。", "hint": "【样例解释#1】：\n\n一种合法的移动方案如下：\n\n1. 将一个甜甜圈从货架 $1$ 移动至货架 $3$，将一个羊角面包从货架 $1$ 移动至货架 $2$；\n2. 将三个甜甜圈从货架 $2$ 移动至货架 $3$；\n3. 将一个蛋糕从货架 $3$ 移动至货架 $1$，将三个羊角面包从货架 $3$ 移动至货架 $2$；\n\n在此之后，货架 $1$ 只有蛋糕，货架 $2$ 只有羊角面包，货架 $3$ 只有甜甜圈，货架 $4$ 只有蛋糕，货架 $5$ 是空的。\n\n【数据范围】：\n\n所有测试点均满足：$3 \\leq n \\leq 3 \\times 10^5$，$0 \\leq d_i,p_i,r_i \\leq 10^9$。\n\n| 子任务编号 | $n \\leq$        | 分值 |\n| :----------: | :---------------: | :----: |\n| $1$        | $10$            | $15$ |\n| $2$        | $5 \\times 10^3$ | $35$ |\n| $3$        | $3 \\times 10^5$ | $50$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R1] Cukiernia / 糕点店", "background": "**题目译自 [XXVIII Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi28-1/dashboard/) [Cukiernia](https://sio2.mimuw.edu.pl/c/oi28-1/p/cuk/)。**", "description": "Bajtuś 面包店售卖蛋糕，甜甜圈和羊角面包三种食物。在面包店中，有 $n$ 个橱窗，在正常情况下，每个货架上只应该放置一种食物。但一天早上，面包店老板 Bajtazara 的儿子 Bajtuś 偷偷进入了面包店，将所有的食物摆放得乱七八糟。\n\n面包店马上就要开门了，Bajtazara 急切地想要重新摆放食物，使得每个货架上只有一种食物（特别地，一个货架上没有食物也是允许的）。请你帮助他求出，至少需要移动多少次食物才能达成目标。", "inputFormat": "第一行一个整数 $n$，代表面包店中货架的数量。\n\n接下来 $n$ 行，第 $i$ 行三个整数 $d_i,p_i,r_i$，分别代表该货架上现有的蛋糕数，甜甜圈数和羊角面包数。数据保证面包店中至少有一份食物。", "outputFormat": "输出一个整数，表示需要移动食物的最小次数。", "hint": "【样例解释#1】：\n\n一种合法的移动方案如下：\n\n1. 将一个甜甜圈从货架 $1$ 移动至货架 $3$，将一个羊角面包从货架 $1$ 移动至货架 $2$；\n2. 将三个甜甜圈从货架 $2$ 移动至货架 $3$；\n3. 将一个蛋糕从货架 $3$ 移动至货架 $1$，将三个羊角面包从货架 $3$ 移动至货架 $2$；\n\n在此之后，货架 $1$ 只有蛋糕，货架 $2$ 只有羊角面包，货架 $3$ 只有甜甜圈，货架 $4$ 只有蛋糕，货架 $5$ 是空的。\n\n【数据范围】：\n\n所有测试点均满足：$3 \\leq n \\leq 3 \\times 10^5$，$0 \\leq d_i,p_i,r_i \\leq 10^9$。\n\n| 子任务编号 | $n \\leq$        | 分值 |\n| :----------: | :---------------: | :----: |\n| $1$        | $10$            | $15$ |\n| $2$        | $5 \\times 10^3$ | $35$ |\n| $3$        | $3 \\times 10^5$ | $50$ |", "locale": "zh-CN"}}}
{"pid": "P9295", "type": "P", "difficulty": 6, "samples": [["6 3 5\n1 2 3\n1 3 2\n3 4 3\n5 3 1\n6 4 2\nZ 5\nZ 6\nB 2 1\nZ 5\nZ 6", "2\n2\n1\n3"], ["8 4 20\n1 2 3\n8 2 4\n6 4 2\n1 6 1\n3 4 3\n4 5 2\n7 4 1\nZ 2\nZ 3\nZ 4\nZ 5\nZ 6\nZ 7\nZ 8\nB 4 4\nB 3 3\nB 7 4\nB 2 3\nZ 2\nZ 3\nZ 4\nZ 5\nZ 6\nZ 7\nZ 8\nB 3 4\nZ 7", "1\n3\n2\n2\n1\n2\n2\n1\n2\n2\n3\n1\n2\n1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2020", "POI（波兰）"], "title": "[POI 2020/2021 R1] Gang Biciaków / 布茨帮", "background": "**题目译自 [XXVIII Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi28-1/dashboard/) [Gang Biciaków](https://sio2.mimuw.edu.pl/c/oi28-1/p/gan/)。**", "description": "Bajtazar 在一家货运公司工作，他目前的工作是将建筑材料从 Bajtocji 的首都运输到附近城镇的商店。在 Bajtocji，有 $n$ 座城市（编号从 $1$ 到 $n$），这些城市通过 $n-1$ 条道路相互连接。每条道路上都有一个加油站。\n\nBajtazar 一天的工作是这样的：他从首都（编号为 $1$ 的城市）出发，沿着最短路径到达城市 $x$，再原路返回。\n\nBajtazara 的儿子 Bitek 非常喜欢加油站里卖的玩具狗。玩具狗一共有 $m$ 种（编号从 $1$ 到 $m$），但每个加油站只提供一种玩具狗，因此收集玩具狗并非一件轻松的事情。\n\n现在给出 Bajtazara 每天前往的目的地，他想要知道他的儿子这天能够获得多少种玩具狗。麻烦的是，每个加油站里售卖的玩具狗的种类会发生变化，你能帮助他解决这个难题吗？\n", "inputFormat": "输入第一行三个整数 $n,m,z$，分别代表 Bajtocji 的城市数，玩具狗的种类数，查询的次数。\n\n接下来 $n-1$ 行，第 $i$ 行三个整数 $a_i,b_i,c_i$，代表第 $i$ 条道路连接城市 $a_i$ 和城市 $b_i$（$1 \\leq a_i,b_i \\leq n$），该道路上的加油站售卖的玩具狗种类为 $c_i$（$1 \\leq c_i \\leq m$）。\n\n接下来 $z$ 行，每行描述一个询问或修改操作，格式如下：\n\n- 询问操作：$\\texttt{Z}\\ x$ 表示 Bajtazara 想要知道，从首都出发到城市 $x$（$2 \\leq x \\leq n$），能收集到多少种玩具狗。\n- 修改操作：$\\texttt{B}\\ i\\ c$ 表示将第 $i$ 条道路上加油站售卖的玩具狗的类型改为 $c$（$1 \\leq c \\leq m$，注意如果该加油站本来就售卖 $c$ 类型玩具狗，执行该操作后将不会有任何影响）。", "outputFormat": "对于每个 $\\texttt{Z}$ 操作，输出一行一个整数，代表这一天 Bajtazara 的儿子能获得的玩具狗的种类数。", "hint": "【样例解释1】：\n\n![pp5XLWV.png](https://s1.ax1x.com/2023/04/05/pp5XLWV.png)\n\n注意该样例中存在一次修改操作，使得第二条道路上的加油站售卖的玩具狗的种类从 $2$ 变成了 $1$。\n\n【数据范围】：\n\n所有测试点均满足：$2 \\leq n \\leq 10^5$，$1 \\leq m,z \\leq 1.5 \\times 10^5$，且至少存在一个 $\\texttt{Z}$ 操作。\n\n| 子任务编号 | 约束| 分值|\n|:-:|:-:| :-: |\n| $1$| $n,m,z \\leq 100$| $7$  |\n| $2$| $n,z \\leq 2 \\times 10^3$| $9$  |\n|$3$ | 只有 $\\texttt{Z}$ 类型操作| $9 $  |\n| $4$| $m \\leq 15$|$15$|\n|$5$|道路 $i$ 连接城市 $i$ 和城市 $i+1$| $11$ |\n| $6$ | 刚开始时，每个加油站售卖的玩具狗类型都是 $1$，在后续的 $\\texttt{B}$ 类型操作中，玩具狗的类型会被更改为除 $1$ 之外的任意类型 | $13$ |\n| $7$| 无附加约束| $36$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R1] Gang Biciaków / 布茨帮", "background": "**题目译自 [XXVIII Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi28-1/dashboard/) [Gang Biciaków](https://sio2.mimuw.edu.pl/c/oi28-1/p/gan/)。**", "description": "Bajtazar 在一家货运公司工作，他目前的工作是将建筑材料从 Bajtocji 的首都运输到附近城镇的商店。在 Bajtocji，有 $n$ 座城市（编号从 $1$ 到 $n$），这些城市通过 $n-1$ 条道路相互连接。每条道路上都有一个加油站。\n\nBajtazar 一天的工作是这样的：他从首都（编号为 $1$ 的城市）出发，沿着最短路径到达城市 $x$，再原路返回。\n\nBajtazara 的儿子 Bitek 非常喜欢加油站里卖的玩具狗。玩具狗一共有 $m$ 种（编号从 $1$ 到 $m$），但每个加油站只提供一种玩具狗，因此收集玩具狗并非一件轻松的事情。\n\n现在给出 Bajtazara 每天前往的目的地，他想要知道他的儿子这天能够获得多少种玩具狗。麻烦的是，每个加油站里售卖的玩具狗的种类会发生变化，你能帮助他解决这个难题吗？\n", "inputFormat": "输入第一行三个整数 $n,m,z$，分别代表 Bajtocji 的城市数，玩具狗的种类数，查询的次数。\n\n接下来 $n-1$ 行，第 $i$ 行三个整数 $a_i,b_i,c_i$，代表第 $i$ 条道路连接城市 $a_i$ 和城市 $b_i$（$1 \\leq a_i,b_i \\leq n$），该道路上的加油站售卖的玩具狗种类为 $c_i$（$1 \\leq c_i \\leq m$）。\n\n接下来 $z$ 行，每行描述一个询问或修改操作，格式如下：\n\n- 询问操作：$\\texttt{Z}\\ x$ 表示 Bajtazara 想要知道，从首都出发到城市 $x$（$2 \\leq x \\leq n$），能收集到多少种玩具狗。\n- 修改操作：$\\texttt{B}\\ i\\ c$ 表示将第 $i$ 条道路上加油站售卖的玩具狗的类型改为 $c$（$1 \\leq c \\leq m$，注意如果该加油站本来就售卖 $c$ 类型玩具狗，执行该操作后将不会有任何影响）。", "outputFormat": "对于每个 $\\texttt{Z}$ 操作，输出一行一个整数，代表这一天 Bajtazara 的儿子能获得的玩具狗的种类数。", "hint": "【样例解释1】：\n\n![pp5XLWV.png](https://s1.ax1x.com/2023/04/05/pp5XLWV.png)\n\n注意该样例中存在一次修改操作，使得第二条道路上的加油站售卖的玩具狗的种类从 $2$ 变成了 $1$。\n\n【数据范围】：\n\n所有测试点均满足：$2 \\leq n \\leq 10^5$，$1 \\leq m,z \\leq 1.5 \\times 10^5$，且至少存在一个 $\\texttt{Z}$ 操作。\n\n| 子任务编号 | 约束| 分值|\n|:-:|:-:| :-: |\n| $1$| $n,m,z \\leq 100$| $7$  |\n| $2$| $n,z \\leq 2 \\times 10^3$| $9$  |\n|$3$ | 只有 $\\texttt{Z}$ 类型操作| $9 $  |\n| $4$| $m \\leq 15$|$15$|\n|$5$|道路 $i$ 连接城市 $i$ 和城市 $i+1$| $11$ |\n| $6$ | 刚开始时，每个加油站售卖的玩具狗类型都是 $1$，在后续的 $\\texttt{B}$ 类型操作中，玩具狗的类型会被更改为除 $1$ 之外的任意类型 | $13$ |\n| $7$| 无附加约束| $36$ |", "locale": "zh-CN"}}}
{"pid": "P9296", "type": "P", "difficulty": 5, "samples": [["3 9 3\n1 6\n2 3 8\n2 5 7\n3\n2\n1", "1\n1\n0"], ["5 20 5\n1 16\n3 7 15 18\n3 6 9 14\n3 3 8 11\n2 2 5\n1\n2\n3\n4\n5", "0\n0\n0\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2020", "POI（波兰）"], "title": "[POI 2020/2021 R1] Gra platformowa / 平台游戏", "background": "**题目译自 [XXVIII Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi28-1/dashboard/) [Gra platformowa](https://sio2.mimuw.edu.pl/c/oi28-1/p/gra/)。**", "description": "Bajtazar 正在他的新电脑上玩游戏。\n\n在这个游戏里，有 $n$ 层平台，自上而下分别编号为 $1$ 至 $n$，玩家需要在这些平台之间移动。每层平台的长度为 $X$，因此可以用数对 $(i,x)$ 描述玩家当前的位置，其中 $i$ 表示玩家在第几层平台，$x$ 表示玩家在当前平台的位置（最左端为 $1$，最右端为 $X$）。\n\n玩家从某个平台的最左端开始，游戏的目标是到达任意一个平台的最右端，且玩家只能向右移动。为了增大难度，在平台的一些地方会有洞，这种情况下，玩家可以选择跳跃操作，直接跳过这个洞，也可以通过该洞前往上面或下面的平台，保证不存在两个在水平方向上或竖直方向上相邻的洞。\n\n更具体地说，假如玩家当前的位置为 $(i,x)$，玩家可以执行如下几种操作：\n\n- $\\texttt{F}$ 操作：当 $(i,x+1)$ 没有洞时，玩家将会移动到 $(i,x+1)$；否则，玩家将会移动到 $(i+1,x+1)$。\n- $\\texttt{A}$ 操作：当 $(i,x+1)$ 有洞时，玩家将会移动到 $(i,x+2)$。\n- $\\texttt{B}$ 操作：当 $(i-1,x)$ 有洞时，玩家将会移动到 $(i-1,x+1)$。\n\n现在 Bajtazar 希望执行最少的跳跃操作（即 $\\texttt{A}$ 操作和 $\\texttt{B}$ 操作）完成游戏。你能帮他完成这个任务吗？", "inputFormat": "输入第一行三个整数 $n,X,z$，表示一共有 $n$ 层平台，每层平台的长度为 $X$，询问的次数为 $z$。\n\n接下来 $n$ 行，第 $i$ 行描述第 $i$ 层平台的信息。每行开头一个整数 $k_i$，表示该层平台有 $k_i$ 个洞。接下来 $k_i$ 个递增的整数，给出该层每个洞的位置。数据保证任何一个平台的最左端和最右端不存在洞，且不存在两个在水平方向上或竖直方向上相邻的洞。\n\n接下来 $z$ 行，每行包含一个整数 $p_j$，表示在第 $j$ 组询问中，玩家需要从第 $p_j$ 层平台的最左端出发。", "outputFormat": "对于第 $j$ 组询问，请在第 $j$ 行输出一个整数，表示从 $(p_j,1)$ 出发，抵达任意一个平台的最右端需要执行的 $\\texttt{A}$ 操作和 $\\texttt{B}$ 操作的最小次数。", "hint": "【样例解释1】：\n\n![pp5jnwd.png](https://s1.ax1x.com/2023/04/05/pp5jnwd.png)\n\n上图给出了样例 $1$ 的第一个询问对应的最优方案：玩家先执行两次 $\\texttt{F}$ 操作到达 $(3,3)$，再执行一次 $\\texttt{B}$ 操作到达 $(2,4)$，再执行五次 $\\texttt{F}$ 操作到达 $(3,9)$。\n\n对于第二个询问，最优方案是执行一次 $\\texttt{F}$ 操作，再执行一次 $\\texttt{A}$ 操作，最后执行五次 $\\texttt{F}$ 操作。\n\n对于第三个询问，最优方案是连续执行八次 $\\texttt{F}$ 操作。\n\n【数据范围】：\n\n所有测试点均满足：$1 \\leq n \\leq 10^5$，$1 \\leq X \\leq 10^9$，$1 \\leq z \\leq 10^5$，$\\sum k\\le 2\\times 10^6$。\n\n| 子任务编号 | 约束 | 分值 |\n| :-: | :-: | :-: |\n|$0$|样例|$0$|\n| $1$| $z \\leq 5$，$n\\times X \\leq 10^6$ | $30$ |\n| $2$| $z \\leq 5$| $50$ |\n|$3$| 无附加约束|$20$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R1] Gra platformowa / 平台游戏", "background": "**题目译自 [XXVIII Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi28-1/dashboard/) [Gra platformowa](https://sio2.mimuw.edu.pl/c/oi28-1/p/gra/)。**", "description": "Bajtazar 正在他的新电脑上玩游戏。\n\n在这个游戏里，有 $n$ 层平台，自上而下分别编号为 $1$ 至 $n$，玩家需要在这些平台之间移动。每层平台的长度为 $X$，因此可以用数对 $(i,x)$ 描述玩家当前的位置，其中 $i$ 表示玩家在第几层平台，$x$ 表示玩家在当前平台的位置（最左端为 $1$，最右端为 $X$）。\n\n玩家从某个平台的最左端开始，游戏的目标是到达任意一个平台的最右端，且玩家只能向右移动。为了增大难度，在平台的一些地方会有洞，这种情况下，玩家可以选择跳跃操作，直接跳过这个洞，也可以通过该洞前往上面或下面的平台，保证不存在两个在水平方向上或竖直方向上相邻的洞。\n\n更具体地说，假如玩家当前的位置为 $(i,x)$，玩家可以执行如下几种操作：\n\n- $\\texttt{F}$ 操作：当 $(i,x+1)$ 没有洞时，玩家将会移动到 $(i,x+1)$；否则，玩家将会移动到 $(i+1,x+1)$。\n- $\\texttt{A}$ 操作：当 $(i,x+1)$ 有洞时，玩家将会移动到 $(i,x+2)$。\n- $\\texttt{B}$ 操作：当 $(i-1,x)$ 有洞时，玩家将会移动到 $(i-1,x+1)$。\n\n现在 Bajtazar 希望执行最少的跳跃操作（即 $\\texttt{A}$ 操作和 $\\texttt{B}$ 操作）完成游戏。你能帮他完成这个任务吗？", "inputFormat": "输入第一行三个整数 $n,X,z$，表示一共有 $n$ 层平台，每层平台的长度为 $X$，询问的次数为 $z$。\n\n接下来 $n$ 行，第 $i$ 行描述第 $i$ 层平台的信息。每行开头一个整数 $k_i$，表示该层平台有 $k_i$ 个洞。接下来 $k_i$ 个递增的整数，给出该层每个洞的位置。数据保证任何一个平台的最左端和最右端不存在洞，且不存在两个在水平方向上或竖直方向上相邻的洞。\n\n接下来 $z$ 行，每行包含一个整数 $p_j$，表示在第 $j$ 组询问中，玩家需要从第 $p_j$ 层平台的最左端出发。", "outputFormat": "对于第 $j$ 组询问，请在第 $j$ 行输出一个整数，表示从 $(p_j,1)$ 出发，抵达任意一个平台的最右端需要执行的 $\\texttt{A}$ 操作和 $\\texttt{B}$ 操作的最小次数。", "hint": "【样例解释1】：\n\n![pp5jnwd.png](https://s1.ax1x.com/2023/04/05/pp5jnwd.png)\n\n上图给出了样例 $1$ 的第一个询问对应的最优方案：玩家先执行两次 $\\texttt{F}$ 操作到达 $(3,3)$，再执行一次 $\\texttt{B}$ 操作到达 $(2,4)$，再执行五次 $\\texttt{F}$ 操作到达 $(3,9)$。\n\n对于第二个询问，最优方案是执行一次 $\\texttt{F}$ 操作，再执行一次 $\\texttt{A}$ 操作，最后执行五次 $\\texttt{F}$ 操作。\n\n对于第三个询问，最优方案是连续执行八次 $\\texttt{F}$ 操作。\n\n【数据范围】：\n\n所有测试点均满足：$1 \\leq n \\leq 10^5$，$1 \\leq X \\leq 10^9$，$1 \\leq z \\leq 10^5$，$\\sum k\\le 2\\times 10^6$。\n\n| 子任务编号 | 约束 | 分值 |\n| :-: | :-: | :-: |\n|$0$|样例|$0$|\n| $1$| $z \\leq 5$，$n\\times X \\leq 10^6$ | $30$ |\n| $2$| $z \\leq 5$| $50$ |\n|$3$| 无附加约束|$20$|", "locale": "zh-CN"}}}
{"pid": "P9297", "type": "P", "difficulty": 6, "samples": [["5 6\n7341\n0150\nS 3\nW 3 0\nS 3\nZ 1 9\nS 1\nS 3", "4\n1\n0\n2"], ["10 100\n627280304\n679703557\nZ 9 9\nZ 2 5\nS 3\nS 3\nW 6 2\nW 9 6\nZ 6 2\nZ 3 9\nS 7\nZ 5 9\nS 3\nS 6\nS 8\nZ 3 2\nW 5 1\nZ 4 5\nW 5 8\nS 1\nW 4 7\nW 8 7\nS 9\nZ 5 7\nS 8\nW 5 5\nS 6\nW 9 9\nW 8 0\nS 1\nS 8\nW 8 7\nS 9\nW 2 4\nW 5 7\nS 4\nZ 6 0\nZ 8 2\nW 8 2\nS 2\nW 5 7\nW 4 7\nW 1 4\nW 2 9\nS 3\nW 8 3\nW 5 2\nZ 4 2\nW 5 9\nW 8 3\nW 6 6\nS 6\nW 6 8\nZ 7 4\nS 5\nW 9 9\nW 9 6\nS 10\nW 7 8\nZ 1 5\nZ 3 4\nS 5\nS 2\nW 9 9\nW 3 0\nZ 9 4\nZ 1 1\nZ 5 9\nW 7 2\nS 3\nS 5\nW 3 6\nZ 4 7\nS 7\nZ 5 4\nS 7\nS 1\nW 2 8\nZ 1 7\nW 3 6\nW 8 4\nS 7\nZ 8 8\nZ 5 0\nW 8 9\nW 7 1\nS 2\nW 2 7\nS 2\nW 2 5\nZ 5 0\nW 9 8\nW 4 5\nZ 2 8\nS 5\nS 2\nZ 2 7\nS 1\nS 1\nW 8 1\nW 4 8\nZ 7 2", "8\n8\n6\n2\n5\n0\n1\n6\n5\n5\n1\n8\n9\n2\n0\n6\n7\n6\n1\n6\n4\n5\n8\n6\n6\n5\n6\n4\n3\n0\n4\n1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "POI（波兰）"], "title": "[POI 2020/2021 R1] Licznik długu / 债务计数器", "background": "**题目译自 [XXVIII Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi28-1/dashboard/) [Licznik długu](https://sio2.mimuw.edu.pl/c/oi28-1/p/lic/)。**", "description": "Bajterowicza 教授指出，Bajtocji 的经济形势现在不容乐观。为了警示民众，他让 Bajtazara 公司在 Bajtocji 首都的市中心安装一块大型显示屏，用来显示 Bajtocji 现在的公共债务是多少。\n\nBajtocji 的公共债务由两部分组成：国内债务和国际债务。国内债务和国际债务最多可由 $n-1$ 个十进制数组成。而在显示屏上显示的是两部分债务的总和。\n\n随着时间推移，Bajtocji 的债务状况也在不断变化。你现在需要帮助 Bajtazara 公司完成显示软件的编辑工作。\n\n这个软件需要执行如下三种操作：\n\n- 更改国内债务数值在某一位上的值。\n- 更改国际债务数值在某一位上的值。\n- 输出总公共债务在某一位上的值。", "inputFormat": "输入第一行两个整数 $n,z$，分别代表显示器能显示的数字位数和操作次数。\n\n第二行包含一个长度 $n-1$ 的数字，代表 Bajtocji 最初的国内债务的值，这个数字可能有前导零。\n\n第三行包含一个长度 $n-1$ 的数字，代表 Bajtocji 最初的国际债务的值，这个数字可能有前导零。\n\n接下来 $z$ 行，每行描述一个询问操作：\n\n- $\\texttt{W}\\ i \\ c$ 表示将国内债务的第 $i$ 位的值更改为 $c$（$1 \\leq i \\leq n-1$，$0 \\leq c \\leq 9$）。\n- $\\texttt{Z}\\ i \\ c$ 表示将国际债务的第 $i$ 位的值更改为 $c$（$1 \\leq i \\leq n-1$，$0 \\leq c \\leq 9$）。\n- $\\texttt{S}\\ i$ 表示输出总公共债务第 $i$ 位的值（$1 \\leq i \\leq n-1$）。", "outputFormat": "对于每个 $\\texttt{S}$ 操作，输出一行一个整数表示结果。", "hint": "【样例解释#1】：\n\n最初公共债务总额为 $7341+150=7491$，因此第三位上的值为 $4$。\n\n在操作 $2$ 后，公共债务总额为 $7041+150=7191$，因此第三位上的值为 $1$。\n\n在操作 $4$ 后，公共债务总额为 $7041+159=7200$，因此第一位上的值为 $0$，第三位上的值为 $2$。\n\n【数据范围】：\n\n所有测试点均满足：$2 \\leq n \\leq 10^5$，$1 \\leq z \\leq 10^5$。\n\n|子任务编号|约束|分值|\n|:-:|:-:|:-:|\n|$1$|$n,z\\leq5\\times10^3$|$30$|\n| $2$|任何时刻，国内债务和国际债务的每个位上的数字都是 $0$ 或 $5$|$20$|\n| $3$|无附加约束|$50$|\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R1] Licznik długu / 债务计数器", "background": "**题目译自 [XXVIII Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi28-1/dashboard/) [Licznik długu](https://sio2.mimuw.edu.pl/c/oi28-1/p/lic/)。**", "description": "Bajterowicza 教授指出，Bajtocji 的经济形势现在不容乐观。为了警示民众，他让 Bajtazara 公司在 Bajtocji 首都的市中心安装一块大型显示屏，用来显示 Bajtocji 现在的公共债务是多少。\n\nBajtocji 的公共债务由两部分组成：国内债务和国际债务。国内债务和国际债务最多可由 $n-1$ 个十进制数组成。而在显示屏上显示的是两部分债务的总和。\n\n随着时间推移，Bajtocji 的债务状况也在不断变化。你现在需要帮助 Bajtazara 公司完成显示软件的编辑工作。\n\n这个软件需要执行如下三种操作：\n\n- 更改国内债务数值在某一位上的值。\n- 更改国际债务数值在某一位上的值。\n- 输出总公共债务在某一位上的值。", "inputFormat": "输入第一行两个整数 $n,z$，分别代表显示器能显示的数字位数和操作次数。\n\n第二行包含一个长度 $n-1$ 的数字，代表 Bajtocji 最初的国内债务的值，这个数字可能有前导零。\n\n第三行包含一个长度 $n-1$ 的数字，代表 Bajtocji 最初的国际债务的值，这个数字可能有前导零。\n\n接下来 $z$ 行，每行描述一个询问操作：\n\n- $\\texttt{W}\\ i \\ c$ 表示将国内债务的第 $i$ 位的值更改为 $c$（$1 \\leq i \\leq n-1$，$0 \\leq c \\leq 9$）。\n- $\\texttt{Z}\\ i \\ c$ 表示将国际债务的第 $i$ 位的值更改为 $c$（$1 \\leq i \\leq n-1$，$0 \\leq c \\leq 9$）。\n- $\\texttt{S}\\ i$ 表示输出总公共债务第 $i$ 位的值（$1 \\leq i \\leq n-1$）。", "outputFormat": "对于每个 $\\texttt{S}$ 操作，输出一行一个整数表示结果。", "hint": "【样例解释#1】：\n\n最初公共债务总额为 $7341+150=7491$，因此第三位上的值为 $4$。\n\n在操作 $2$ 后，公共债务总额为 $7041+150=7191$，因此第三位上的值为 $1$。\n\n在操作 $4$ 后，公共债务总额为 $7041+159=7200$，因此第一位上的值为 $0$，第三位上的值为 $2$。\n\n【数据范围】：\n\n所有测试点均满足：$2 \\leq n \\leq 10^5$，$1 \\leq z \\leq 10^5$。\n\n|子任务编号|约束|分值|\n|:-:|:-:|:-:|\n|$1$|$n,z\\leq5\\times10^3$|$30$|\n| $2$|任何时刻，国内债务和国际债务的每个位上的数字都是 $0$ 或 $5$|$20$|\n| $3$|无附加约束|$50$|\n\n", "locale": "zh-CN"}}}
{"pid": "P9298", "type": "P", "difficulty": 2, "samples": [["2 3 3\n1 2 2 2\n1 1 2 1\n1 2 1 3", "2\n1\n3"], ["4 4 16\n1 1 1 1\n1 2 1 2\n1 3 1 3\n1 4 1 4\n2 1 2 1\n2 2 2 2\n2 3 2 3\n2 4 2 4\n3 1 3 1\n3 2 3 2\n3 3 3 3\n3 4 3 4\n4 1 4 1\n4 2 4 2\n4 3 4 3\n4 4 4 4", "1\n1\n1\n1\n3\n3\n3\n1\n3\n3\n3\n1\n3\n3\n3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2020", "POI（波兰）"], "title": "[POI 2020/2021 R1] Tablica binarna / 01 矩阵", "background": "**题目译自 [XXVIII Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi28-1/dashboard/) [Tablica binarna](https://sio2.mimuw.edu.pl/c/oi28-1/p/tab/)。**", "description": "矩阵 $A$ 有 $n$ 行 $m$ 列，行自上到下编号为 $1$ 至 $n$，列自左到右编号为 $1$ 到 $m$，因此可以用 $(i,j)$ 表示矩阵的第 $i$ 行第 $j$ 列的元素。且矩阵 $A$ 中每个元素的值为 $0$ 或 $1$。\n\n最初，矩阵内的所有元素的值均为 $0$。接下来可以对该矩阵执行 $q$ 次修改操作。每次操作将给出四个参数 $i_1,j_1,i_2,j_2$，表示将以 $(i_1,j_1)$ 为左上角，$(i_2,j_2)$ 为右下角的矩形内的所有元素的值翻转（从 $0$ 变成 $1$，或从 $1$ 变为 $0$）。\n\n如果一次操作中，矩形的左上角与矩阵的左上角重合（即 $i_1=j_1=1$），则称这次修改操作是**简单的**。\n\n现在你想要知道，在每次对矩阵执行修改操作后，需要执行至少多少次**简单的**修改操作，使得矩阵内所有元素的值全部变为 $0$。", "inputFormat": "输入第一行三个整数 $n,m,q$，分别代表矩阵的行数，列数，操作的次数。\n\n接下来 $q$ 行，每行四个整数 $i_1,j_1,i_2,j_2$，描述一次修改操作。保证 $1 \\leq i_1 \\leq i_2 \\leq n$，$1 \\leq j_1 \\leq j_2 \\leq m$。", "outputFormat": "输出 $q$ 行。第 $i$ 行输出一个整数，表示在第 $i$ 次修改过后，需要执行至少多少次**简单的**修改操作，使得矩阵内所有元素的值全部变为 $0$。", "hint": "【样例解释1】：\n\n![](https://s1.ax1x.com/2023/04/04/pp4jI2T.png)\n\n【数据范围】：\n\n所有测试点均满足：$1 \\leq n,m \\leq 10^3$，$1 \\leq q \\leq 10^5$。\n\n| 子任务编号 | 约束          | 分值 |\n| :----------: | :-------------: | :----: |\n| $1$        | $n,m \\leq 2$  | $14$ |\n| $2$        | $q=1$         | $16$ |\n| $3$        | $n=1$         | $21$ |\n| $4$        | $n,m \\leq 10$ | $9$  |\n| $5$        | $n,m \\leq 80$ | $10$ |\n| $6$        | 无附加约束    | $30$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2020/2021 R1] Tablica binarna / 01 矩阵", "background": "**题目译自 [XXVIII Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi28-1/dashboard/) [Tablica binarna](https://sio2.mimuw.edu.pl/c/oi28-1/p/tab/)。**", "description": "矩阵 $A$ 有 $n$ 行 $m$ 列，行自上到下编号为 $1$ 至 $n$，列自左到右编号为 $1$ 到 $m$，因此可以用 $(i,j)$ 表示矩阵的第 $i$ 行第 $j$ 列的元素。且矩阵 $A$ 中每个元素的值为 $0$ 或 $1$。\n\n最初，矩阵内的所有元素的值均为 $0$。接下来可以对该矩阵执行 $q$ 次修改操作。每次操作将给出四个参数 $i_1,j_1,i_2,j_2$，表示将以 $(i_1,j_1)$ 为左上角，$(i_2,j_2)$ 为右下角的矩形内的所有元素的值翻转（从 $0$ 变成 $1$，或从 $1$ 变为 $0$）。\n\n如果一次操作中，矩形的左上角与矩阵的左上角重合（即 $i_1=j_1=1$），则称这次修改操作是**简单的**。\n\n现在你想要知道，在每次对矩阵执行修改操作后，需要执行至少多少次**简单的**修改操作，使得矩阵内所有元素的值全部变为 $0$。", "inputFormat": "输入第一行三个整数 $n,m,q$，分别代表矩阵的行数，列数，操作的次数。\n\n接下来 $q$ 行，每行四个整数 $i_1,j_1,i_2,j_2$，描述一次修改操作。保证 $1 \\leq i_1 \\leq i_2 \\leq n$，$1 \\leq j_1 \\leq j_2 \\leq m$。", "outputFormat": "输出 $q$ 行。第 $i$ 行输出一个整数，表示在第 $i$ 次修改过后，需要执行至少多少次**简单的**修改操作，使得矩阵内所有元素的值全部变为 $0$。", "hint": "【样例解释1】：\n\n![](https://s1.ax1x.com/2023/04/04/pp4jI2T.png)\n\n【数据范围】：\n\n所有测试点均满足：$1 \\leq n,m \\leq 10^3$，$1 \\leq q \\leq 10^5$。\n\n| 子任务编号 | 约束          | 分值 |\n| :----------: | :-------------: | :----: |\n| $1$        | $n,m \\leq 2$  | $14$ |\n| $2$        | $q=1$         | $16$ |\n| $3$        | $n=1$         | $21$ |\n| $4$        | $n,m \\leq 10$ | $9$  |\n| $5$        | $n,m \\leq 80$ | $10$ |\n| $6$        | 无附加约束    | $30$ |", "locale": "zh-CN"}}}
{"pid": "P9299", "type": "P", "difficulty": 1, "samples": [["5\n2", "730"], ["0\n10", "-100"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "CCC（加拿大）"], "title": "[CCC 2023 J1] Deliv-e-droid", "background": "", "description": "In the game, Deliv-e-droid, a robot droid has to deliver packages while avoiding obstacles.\n\nAt the end of the game, the final score is calculated based on the following point system:\n- Gain $50$ points for every package delivered.\n- Lose $10$ points for every collision with an obstacle.\n- Earn a bonus $500$ points if the number of packages delivered is greater than the number of collisions with obstacles.\n\nYour job is to determine the final score at the end of a game.\n", "inputFormat": "The input will consist of two lines. The first line will contain a non-negative integer $P$,representing the number of packages delivered. The second line will contain a non-negative integer $C$,representing the number of collisions with obstacles.", "outputFormat": "The output will consist of a single integer $F$,representing the final score.", "hint": "", "locale": "en", "translations": {"en": {"title": "[CCC 2023 J1] Deliv-e-droid", "background": "", "description": "In the game, Deliv-e-droid, a robot droid has to deliver packages while avoiding obstacles.\n\nAt the end of the game, the final score is calculated based on the following point system:\n- Gain $50$ points for every package delivered.\n- Lose $10$ points for every collision with an obstacle.\n- Earn a bonus $500$ points if the number of packages delivered is greater than the number of collisions with obstacles.\n\nYour job is to determine the final score at the end of a game.\n", "inputFormat": "The input will consist of two lines. The first line will contain a non-negative integer $P$,representing the number of packages delivered. The second line will contain a non-negative integer $C$,representing the number of collisions with obstacles.", "outputFormat": "The output will consist of a single integer $F$,representing the final score.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[CCC 2023 J1] Deliv-e-droid", "background": "", "description": "在游戏 Deliv-e-droid 中，一个机器人需要在避开障碍物的同时递送包裹。\n\n在游戏结束时，最终得分根据以下积分系统计算：\n- 每递送一个包裹获得 50 分。\n- 每次与障碍物碰撞扣除 10 分。\n- 如果递送的包裹数量大于与障碍物碰撞的次数，则获得额外的 500 分奖励。\n\n你的任务是确定游戏结束时的最终得分。", "inputFormat": "输入由两行组成。第一行包含一个非负整数 $P$，表示递送的包裹数量。第二行包含一个非负整数 $C$，表示与障碍物碰撞的次数。", "outputFormat": "输出由一个整数 $F$ 组成，表示最终得分。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9300", "type": "P", "difficulty": 1, "samples": [["4\nPoblano\nCayenne\nThai\nPoblano", "118000"]], "limits": {"time": [3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288]}, "tags": ["2023", "CCC（加拿大）"], "title": "[CCC 2023 J2] Chili Peppers", "background": "", "description": "Ron is cooking chili using an assortment of peppers.\n\nThe spiciness of a pepper is measured in Scolville Heat Units (SHU).Ron's chili is currently not spicy at all, but each time Ron adds a pepper, the total spiciness of the chili increases by the SHU value of that pepper.\nThe SHU values of the peppers available to Ron are shown in the following table:\n\n| Pepper Name | Scolville Heat Units |\n| :----------: | :----------: |\n| Poblano | $1500$ |\n| Mirasol | $6000$ |\n| Serrano | $15500$ |\n| Cayenne | $40000$ |\n| Thai | $75000$ |\n| Habanero | $125000$ |\n\nYour job is to determine the total spiciness of Ron's chili after he has finished adding peppers.", "inputFormat": "The first line of input will contain a positive integer $N$, representing the number of peppers Ron adds to his chili. The next $N$ lines will each contain the name of a pepper Ron has added. Each pepper name will exactly match a name that appears in the table above. Note that more than one pepper of the same name can be added.", "outputFormat": "The output will consist of a positive integer $T$, representing the total spiciness of Ron's chili.", "hint": "", "locale": "en", "translations": {"en": {"title": "[CCC 2023 J2] Chili Peppers", "background": "", "description": "Ron is cooking chili using an assortment of peppers.\n\nThe spiciness of a pepper is measured in Scolville Heat Units (SHU).Ron's chili is currently not spicy at all, but each time Ron adds a pepper, the total spiciness of the chili increases by the SHU value of that pepper.\nThe SHU values of the peppers available to Ron are shown in the following table:\n\n| Pepper Name | Scolville Heat Units |\n| :----------: | :----------: |\n| Poblano | $1500$ |\n| Mirasol | $6000$ |\n| Serrano | $15500$ |\n| Cayenne | $40000$ |\n| Thai | $75000$ |\n| Habanero | $125000$ |\n\nYour job is to determine the total spiciness of Ron's chili after he has finished adding peppers.", "inputFormat": "The first line of input will contain a positive integer $N$, representing the number of peppers Ron adds to his chili. The next $N$ lines will each contain the name of a pepper Ron has added. Each pepper name will exactly match a name that appears in the table above. Note that more than one pepper of the same name can be added.", "outputFormat": "The output will consist of a positive integer $T$, representing the total spiciness of Ron's chili.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[CCC 2023 J2] Chili Peppers", "background": null, "description": "Ron 正在用各种辣椒烹饪辣椒酱。\n\n辣椒的辣度以斯科维尔辣度单位（SHU）来衡量。Ron 的辣椒酱目前一点都不辣，但每次 Ron 加入一个辣椒时，辣椒酱的总辣度就会增加该辣椒的 SHU 值。Ron 可用的辣椒的 SHU 值如下表所示：\n\n| 辣椒名称 | 斯科维尔辣度单位 |\n| :----------: | :----------: |\n| Poblano | $1500$ |\n| Mirasol | $6000$ |\n| Serrano | $15500$ |\n| Cayenne | $40000$ |\n| Thai | $75000$ |\n| Habanero | $125000$ |\n\n你的任务是确定 Ron 加完辣椒后，他的辣椒酱的总辣度。", "inputFormat": "输入的第一行包含一个正整数 $N$（$1 \\le N \\le 10$），表示 Ron 加入辣椒酱中的辣椒数量。接下来的 $N$ 行中，每行包含 Ron 加入的一个辣椒的名称。每个辣椒名称将与上表中出现的名称完全匹配。注意，可以加入多个同名的辣椒。", "outputFormat": "输出将由一个正整数 $T$ 组成，表示 Ron 的辣椒酱的总辣度。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9301", "type": "P", "difficulty": 1, "samples": [["3\nYY.Y.\n...Y.\n.YYY.", "4"], ["5\nYY..Y\n.YY.Y\n.Y.Y.\n.YY.Y\nY...Y", "2,5"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "CCC（加拿大）"], "title": "[CCC 2023 J3] Special Event", "background": "", "description": "You are trying to schedule a special event on one of five possible days.\n\nYour job is to determine on which day you should schedule the event, so that the largest number of interested people are able to attend.", "inputFormat": "The first line of input will contain a positive integer $N$, representing the number of people interested in attending your event. The next $N$ lines will each contain one person's availability using one character for each of Day 1, Day 2, Day 3, Day 4, and Day 5(in that order).\n\nThe character `Y` means the person is able to attend and a period (`.`) means the person is\nnot able to attend.\n\nThe following table shows how the available 15 marks are distributed:\n| Marks | Description |\n| :----------: | :----------: |\n| 6 | There will be exactly one day on which every person will be able to attend. |\n| 6 | There will be exactly one day on which the largest number of people will be able to attend. |\n| 3 | There might be more than one day on which the largest number of people will be able to attend. |\n", "outputFormat": "The output will consist of one line listing the day number(s) on which the largest number of\ninterested people are able to attend.\n\nIf there is more than one day on which the largest number of people are able to attend,output all of these day numbers in increasing order and separated by commas (without spaces).", "hint": "**本题采用捆绑测试**。\n\n- Subtask $1$（$6$ points）：有且只有一天全部人都可以开会。\n- Subtask $2$（$6$ points）：有且只有一天开会人数最多。\n- Subtask $3$（$3$ points）：有可能有多天满足条件。\n", "locale": "en", "translations": {"en": {"title": "[CCC 2023 J3] Special Event", "background": "", "description": "You are trying to schedule a special event on one of five possible days.\n\nYour job is to determine on which day you should schedule the event, so that the largest number of interested people are able to attend.", "inputFormat": "The first line of input will contain a positive integer $N$, representing the number of people interested in attending your event. The next $N$ lines will each contain one person's availability using one character for each of Day 1, Day 2, Day 3, Day 4, and Day 5(in that order).\n\nThe character `Y` means the person is able to attend and a period (`.`) means the person is\nnot able to attend.\n\nThe following table shows how the available 15 marks are distributed:\n| Marks | Description |\n| :----------: | :----------: |\n| 6 | There will be exactly one day on which every person will be able to attend. |\n| 6 | There will be exactly one day on which the largest number of people will be able to attend. |\n| 3 | There might be more than one day on which the largest number of people will be able to attend. |\n", "outputFormat": "The output will consist of one line listing the day number(s) on which the largest number of\ninterested people are able to attend.\n\nIf there is more than one day on which the largest number of people are able to attend,output all of these day numbers in increasing order and separated by commas (without spaces).", "hint": "**本题采用捆绑测试**。\n\n- Subtask $1$（$6$ points）：有且只有一天全部人都可以开会。\n- Subtask $2$（$6$ points）：有且只有一天开会人数最多。\n- Subtask $3$（$3$ points）：有可能有多天满足条件。\n", "locale": "en"}, "zh-CN": {"title": "[CCC 2023 J3] Special Event", "background": null, "description": "你正在尝试在五个可能的日子之一安排一个特别活动。你的任务是确定在哪一天安排活动，以便最多的感兴趣的人能够参加。", "inputFormat": "输入的第一行包含一个正整数 $N$，表示有兴趣参加活动的人数。接下来的 $N$ 行将分别包含一个人的可用性，使用一个字符表示第 1 天、第 2 天、第 3 天、第 4 天和第 5 天（按顺序）。字符 `Y` 表示该人可以参加，而句号（`.`）表示该人不能参加。下表显示了可用的 15 分的分配方式：\n|分数 |描述        |\n|:-:|:--------:|\n|6  |将会有且只有一天，所有人都可以参加。|\n|6  |将会有且只有一天，最多的人可以参加。|\n|3  |可能会有多天，最多的人可以参加。|", "outputFormat": "输出将由一行组成，列出最多感兴趣的人能够参加的日子编号。如果有多天最多的人能够参加，输出所有这些天的编号，按升序排列，并用逗号分隔（不加空格）。", "hint": "**本题采用捆绑测试**。\n- 子任务 $1$（$6$ 分）：有且只有一天全部人都可以开会。\n- 子任务 $2$（$6$ 分）：有且只有一天开会人数最多。\n- 子任务 $3$（$3$ 分）：有可能有多天满足条件。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9302", "type": "P", "difficulty": 2, "samples": [["5\n1 0 1 0 1\n0 0 0 0 0", "9"], ["7\n0 0 1 1 0 1 0\n0 0 1 0 1 0 0", "11"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "CCC（加拿大）"], "title": "[CCC 2023 J4/S1] Trianglane", "background": "", "description": "Bocchi the Builder just finished constructing her latest project: a laneway consisting of two rows of white equilateral triangular tiles. However, at the last moment, disaster struck! She accidentally spilled black paint on some of the tiles. Now, some of the tiles are wet and the other tiles are dry. Bocchi must place warning tape around the perimeters of all wet areas. Can you help her determine how many metres of tape she needs?\n\nThe first triangular tile will point upwards. Each pair of adjacent tiles (that is, tiles that share a common side) will point in opposite directions. Each tile has a side length of $1$ metre.", "inputFormat": "The first line of input will consist of one positive integer $C$, representing the number of columns.\n\nThe next two lines will each consist of $C$ integers separated by spaces. Each integer represents\nthe colour of a tile along the laneway, with `1` indicating that the tile is black (wet) and `0` indicating that the tile is white (dry).\n\nThe following table shows how the available 15 marks are distributed:\n\n| Marks | Description | Bound |\n| :----------: | :---------- | :----------: |\n| 3 | The laneway is not very long, black tiles are never adjacent and the second row is fully white. | $C \\le 2 \\times 10^3$ |\n| 3 | The laneway is not very long, black tiles may be adjacent and the second row is fully white. | $C \\le 2 \\times 10^3$ |\n| 5 | The laneway is not very long, black tiles may be adjacent and may appear in the second row. | $C \\le 2 \\times 10^3$ |\n| 4 | The laneway may be very long, black tiles may be adjacent and may appear in the second row. | $C \\le 2 \\times 10^5$ |\n", "outputFormat": "Output a single integer representing the length of tape Bocchi needs,in metres.", "hint": "**本题采用捆绑测试**。\n\n- Subtask $1$（$3$ points）：$C \\leq 2 \\times 10^3$，黑色三角形不相邻，第二行全部为白色三角形。\n- Subtask $2$（$3$ points）：$C \\leq 2 \\times 10^3$，黑色三角形可能相邻，第二行全部为白色三角形。\n- Subtask $3$（$5$ points）：$C \\leq 2 \\times 10^3$，黑色三角形可能相邻，第二行可能有黑色三角形。\n- Subtask $4$（$4$ points）：$C \\leq 2 \\times 10^5$，黑色三角形可能相邻，第二行可能有黑色三角形。\n\n样例 $1$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5tfc7u5b.png)\n\n样例 $2$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4e22mx61.png)", "locale": "en", "translations": {"en": {"title": "[CCC 2023 J4/S1] Trianglane", "background": "", "description": "Bocchi the Builder just finished constructing her latest project: a laneway consisting of two rows of white equilateral triangular tiles. However, at the last moment, disaster struck! She accidentally spilled black paint on some of the tiles. Now, some of the tiles are wet and the other tiles are dry. Bocchi must place warning tape around the perimeters of all wet areas. Can you help her determine how many metres of tape she needs?\n\nThe first triangular tile will point upwards. Each pair of adjacent tiles (that is, tiles that share a common side) will point in opposite directions. Each tile has a side length of $1$ metre.", "inputFormat": "The first line of input will consist of one positive integer $C$, representing the number of columns.\n\nThe next two lines will each consist of $C$ integers separated by spaces. Each integer represents\nthe colour of a tile along the laneway, with `1` indicating that the tile is black (wet) and `0` indicating that the tile is white (dry).\n\nThe following table shows how the available 15 marks are distributed:\n\n| Marks | Description | Bound |\n| :----------: | :---------- | :----------: |\n| 3 | The laneway is not very long, black tiles are never adjacent and the second row is fully white. | $C \\le 2 \\times 10^3$ |\n| 3 | The laneway is not very long, black tiles may be adjacent and the second row is fully white. | $C \\le 2 \\times 10^3$ |\n| 5 | The laneway is not very long, black tiles may be adjacent and may appear in the second row. | $C \\le 2 \\times 10^3$ |\n| 4 | The laneway may be very long, black tiles may be adjacent and may appear in the second row. | $C \\le 2 \\times 10^5$ |\n", "outputFormat": "Output a single integer representing the length of tape Bocchi needs,in metres.", "hint": "**本题采用捆绑测试**。\n\n- Subtask $1$（$3$ points）：$C \\leq 2 \\times 10^3$，黑色三角形不相邻，第二行全部为白色三角形。\n- Subtask $2$（$3$ points）：$C \\leq 2 \\times 10^3$，黑色三角形可能相邻，第二行全部为白色三角形。\n- Subtask $3$（$5$ points）：$C \\leq 2 \\times 10^3$，黑色三角形可能相邻，第二行可能有黑色三角形。\n- Subtask $4$（$4$ points）：$C \\leq 2 \\times 10^5$，黑色三角形可能相邻，第二行可能有黑色三角形。\n\n样例 $1$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5tfc7u5b.png)\n\n样例 $2$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4e22mx61.png)", "locale": "en"}, "zh-CN": {"title": "[CCC 2023 J4/S1] Trianglane", "background": "", "description": "Bocchi the Builder 刚刚完成了她的最新项目：一条由两排白色等边三角形瓷砖组成的小巷。然而，在最后一刻，灾难降临了！她不小心把黑色油漆洒在了一些瓷砖上。现在，一些瓷砖是湿的，其他瓷砖是干的。Bocchi 必须在所有湿的区域周围放置警示胶带。你能帮她确定她需要多少米的胶带吗？\n\n第一个三角形瓷砖将指向上方。每对相邻的瓷砖（即共享一条边的瓷砖）将指向相反的方向。每块瓷砖的边长为 1 米。", "inputFormat": "输入的第一行将包含一个正整数 $C$，表示列数。\n\n接下来的两行每行将包含 $C$ 个用空格分隔的整数。每个整数表示沿小巷的一个瓷砖的颜色，`1` 表示瓷砖是黑色（湿的），`0` 表示瓷砖是白色（干的）。\n\n下表显示了可用的 15 分数是如何分配的：\n\n| Marks | Description | Bound |\n| :----------: | :---------- | :----------: |\n| 3 | 小巷不太长，黑色瓷砖从不相邻，第二行完全是白色。 | $C \\le 2 \\times 10^3$ |\n| 3 | 小巷不太长，黑色瓷砖可能相邻，第二行完全是白色。 | $C \\le 2 \\times 10^3$ |\n| 5 | 小巷不太长，黑色瓷砖可能相邻，第二行可能有黑色瓷砖。 | $C \\le 2 \\times 10^3$ |\n| 4 | 小巷可能很长，黑色瓷砖可能相邻，第二行可能有黑色瓷砖。 | $C \\le 2 \\times 10^5$ |", "outputFormat": "输出一个整数，表示 Bocchi 需要的胶带长度，以米为单位。", "hint": "**本题采用捆绑测试**。\n\n- 子任务 $1$（$3$ 分）：$C \\leq 2 \\times 10^3$，黑色三角形不相邻，第二行全部为白色三角形。\n- 子任务 $2$（$3$ 分）：$C \\leq 2 \\times 10^3$，黑色三角形可能相邻，第二行全部为白色三角形。\n- 子任务 $3$（$5$ 分）：$C \\leq 2 \\times 10^3$，黑色三角形可能相邻，第二行可能有黑色三角形。\n- 子任务 $4$（$4$ 分）：$C \\leq 2 \\times 10^5$，黑色三角形可能相邻，第二行可能有黑色三角形。\n\n样例 $1$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5tfc7u5b.png)\n\n样例 $2$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4e22mx61.png)\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9303", "type": "P", "difficulty": 3, "samples": [["MENU\n5\n7\nF T R U B L K\nP M N A X C U\nA E R C N E O\nM N E U A R M\nM U N E M N S", "3"], ["NATURE\n6\n9\nN A T S F E G Q N\nS A I B M R H F A\nC F T J C U C L T\nK B H U P T A N U\nD P R R R J D I R\nI E E K M E G B E", "4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "CCC（加拿大）"], "title": "[CCC 2023 J5] CCC Word Hunt", "background": "", "description": "In the CCC Word Hunt, words are hidden in a grid of letters. The letters of a hidden word always appear in order on horizontal, vertical, or diagonal line segments in one of two ways.One way is for the letters of a word to appear on one line segment. The other way is for the letters of a word to appear on one line segment up to some letter and then on a second line segment that forms a right angle at this letter.\n\nGiven a grid of letters and a single word to search for, your job is to determine the number of times that particular word is hidden in the grid.", "inputFormat": "The first line of input will contain a string of distinct uppercase letters $W$,representing the word you are to search for in the grid. The length of $W$ will be at least two. The second line of input will be an integer $R(1 \\le R \\le 100)$, where $R$ is the number of rows in the grid.The third line of input will be an integer $C(1 \\le C \\le 100)$, where $C$ is the number of columns in the grid.\n\nThe remaining input will provide the letters in the grid. It will consist of $R$ lines, where each line contains $C$ uppercase letters separated by single spaces.", "outputFormat": "The following table shows how the available 15 marks are distributed:\n\n| Marks | Word Placement |\n| :----------: | :---------- |\n| $2$ | On one horizontal line segment |\n| $2$ | On one horizontal or vertical line segment |\n| $2$ | On one horizontal, vertical, or diagonal line segment |\n| $9$ | On one line segment or two perpendicular line segments |\n\nThe output will consist of a single non-negative integer $H$, representing the number of times the word is hidden in the grid.", "hint": "**本题采用捆绑测试**。\n\n- Subtask $1$（$2$ points）：隐藏字符串一定在一条水平线段上。\n- Subtask $2$（$2$ points）：隐藏字符串一定在一个水平或垂直线段上。\n- Subtask $3$（$2$ points）：隐藏字符串一定在一个水平、垂直或对角线线段上。\n- Subtask $4$（$9$ points）：隐藏字符串一定在一个线段或两个互相垂直的线段上。\n\n样例 $1$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wqo2un8k.png)\n\n样例 $2$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v082p2qr.png)", "locale": "en", "translations": {"en": {"title": "[CCC 2023 J5] CCC Word Hunt", "background": "", "description": "In the CCC Word Hunt, words are hidden in a grid of letters. The letters of a hidden word always appear in order on horizontal, vertical, or diagonal line segments in one of two ways.One way is for the letters of a word to appear on one line segment. The other way is for the letters of a word to appear on one line segment up to some letter and then on a second line segment that forms a right angle at this letter.\n\nGiven a grid of letters and a single word to search for, your job is to determine the number of times that particular word is hidden in the grid.", "inputFormat": "The first line of input will contain a string of distinct uppercase letters $W$,representing the word you are to search for in the grid. The length of $W$ will be at least two. The second line of input will be an integer $R(1 \\le R \\le 100)$, where $R$ is the number of rows in the grid.The third line of input will be an integer $C(1 \\le C \\le 100)$, where $C$ is the number of columns in the grid.\n\nThe remaining input will provide the letters in the grid. It will consist of $R$ lines, where each line contains $C$ uppercase letters separated by single spaces.", "outputFormat": "The following table shows how the available 15 marks are distributed:\n\n| Marks | Word Placement |\n| :----------: | :---------- |\n| $2$ | On one horizontal line segment |\n| $2$ | On one horizontal or vertical line segment |\n| $2$ | On one horizontal, vertical, or diagonal line segment |\n| $9$ | On one line segment or two perpendicular line segments |\n\nThe output will consist of a single non-negative integer $H$, representing the number of times the word is hidden in the grid.", "hint": "**本题采用捆绑测试**。\n\n- Subtask $1$（$2$ points）：隐藏字符串一定在一条水平线段上。\n- Subtask $2$（$2$ points）：隐藏字符串一定在一个水平或垂直线段上。\n- Subtask $3$（$2$ points）：隐藏字符串一定在一个水平、垂直或对角线线段上。\n- Subtask $4$（$9$ points）：隐藏字符串一定在一个线段或两个互相垂直的线段上。\n\n样例 $1$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wqo2un8k.png)\n\n样例 $2$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v082p2qr.png)", "locale": "en"}, "zh-CN": {"title": "[CCC 2023 J5] CCC Word Hunt", "background": "", "description": "在 CCC 单词搜索游戏中，单词隐藏在一个字母网格中。隐藏单词的字母总是以顺序出现在水平、垂直或对角线段上，有两种方式。一种方式是单词的字母出现在一条线段上。另一种方式是单词的字母出现在一条线段上直到某个字母，然后在该字母处形成直角的第二条线段上。给定一个字母网格和一个要搜索的单词，你的任务是确定该特定单词在网格中隐藏的次数。", "inputFormat": "输入的第一行将包含一个由不同的大写字母组成的字符串 $W$，表示你要在网格中搜索的单词。$W$ 的长度至少为 2。输入的第二行将是一个整数 $R(1 \\le R \\le 100)$，其中 $R$ 是网格中的行数。输入的第三行将是一个整数 $C(1 \\le C \\le 100)$，其中 $C$ 是网格中的列数。剩下的输入将提供网格中的字母。它将由 $R$ 行组成，每行包含 $C$ 个用单个空格分隔的大写字母。", "outputFormat": "下表显示了可用的 15 分是如何分配的：\n\n| Marks | Word Placement |\n| :----------: | :---------- |\n| $2$ | 在一条水平线段上 |\n| $2$ | 在一条水平或垂直线段上 |\n| $2$ | 在一条水平、垂直或对角线段上 |\n| $9$ | 在一条线段或两个互相垂直的线段上 |\n\n输出将由一个非负整数 $H$ 组成，表示单词在网格中隐藏的次数。", "hint": "**本题采用捆绑测试**。\n\n- 子任务 $1$（$2$ 分）：隐藏字符串一定在一条水平线段上。\n- 子任务 $2$（$2$ 分）：隐藏字符串一定在一个水平或垂直线段上。\n- 子任务 $3$（$2$ 分）：隐藏字符串一定在一个水平、垂直或对角线段上。\n- 子任务 $4$（$9$ 分）：隐藏字符串一定在一个线段或两个互相垂直的线段上。\n\n样例 $1$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wqo2un8k.png)\n\n样例 $2$ 图解：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v082p2qr.png)\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9304", "type": "P", "difficulty": 3, "samples": [["5\n1 2\n1 3\n2 4\n2 5", "0\n1\n2\n4\n6"], ["见下发的 hope/hope2.in", "见下发的 hope/hope2.ans"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["树形数据结构", "O2优化", "深度优先搜索 DFS", "树的遍历"], "title": "「DTOI-5」3-1", "background": "——『太阳』这种东西，以前似乎是存在的。\n\n传说是这么讲的——白色的火焰发出闪耀的光芒，天空则是清澄无比的蔚蓝。\n\n据说诸神与其创造物所掀起的『大战』，使得大地化为焦土，灰烬遮蔽了苍穹。\n\n灰烬冲击到天上流动的星辰之力——精灵回廊，发出了光芒，将天空染成红色。\n\n而那样的红色，覆盖了仍然持续着互相残杀的每一块土地。\n\n或者那是这个星球本身发出的悲鸣与流出的鲜血吧……\n\n血色的天空上，只有——蓝色的灰飘然落下。\n\n~~回来吧3579，我最骄傲的信仰/ll~~", "description": "里克在视线可及的范围内发现了一颗古老的「神树」。\n\n神树是一颗树，树上有 $n$ 个含有魔法装置的位置。经过初步「考察」，有 $n - 1$ 条魔法连接，第 $i(1 \\leq i \\leq n - 1)$ 条连接 $u_i, v_i$ 两个魔法装置，保证 $u_i \\neq v_i$ 且 $1\\leq u_i,v_i\\leq n$。这两个装置可以相互**双向地**在 $1$ 单位时间内通行，保证仅由这 $n - 1$ 条连接，每个魔法装置都可以相互到达。\n\n此外，有 $n - 1$ 条特殊连接，对于每个魔法装置 $i \\in [2, n]$，可以**瞬间**传送到第 $1$ 个魔法装置，花费 $0$ 单位时间。**特殊连接总共只能使用一次**。\n\n里克初始在魔法装置 $1$ 处。现在，给出这棵「神树」的结构，里克想要在若干时间内研究尽可能多的魔法装置。我们假定，研究一个魔法装置只需要到达该装置处，并且不需要花费额外时间。\n\n里克想让你尽快计算出，对所有 $k \\in [1, n]$，如果要恰好研究 $k$ 个不同的魔法装置，**并且随之返回魔法装置 $\\bm 1$**，最少应花费多少时间。", "inputFormat": "第一行，一个整数 $n$。\n\n接下来 $n - 1$ 行，每行两个整数 $u_i, v_i$。", "outputFormat": "共 $n$ 行，第 $i$ 行一个整数表示 $k = i$ 的答案。", "hint": "**【样例解释 $\\bm 1$】**\n\n+ $k = 1$ 时，里克只需要呆在装置 $1$ 处。\n+ $k = 2$ 时，里克的路径可以是 $1 \\rightarrow 2 \\Rightarrow 1$。\n+ $k = 3$ 时，里克的路径可以是 $1 \\rightarrow 2 \\rightarrow 4 \\Rightarrow 1$。\n+ $k = 4$ 时，里克的路径可以是 $1 \\rightarrow 2 \\rightarrow 4 \\Rightarrow 1 \\rightarrow 3\\rightarrow 1$。\n+ $k = 5$ 时，里克的路径可以是 $1 \\rightarrow 3\\rightarrow 1 \\rightarrow 2 \\rightarrow 5 \\rightarrow 2 \\rightarrow 4 \\Rightarrow 1$。\n\n**【样例解释 $\\bm 2$】**\n\n这组数据满足测试点编号 $13 \\sim 20$ 的性质。\n\n**【数据规模与约定】**\n\n| 测试点编号 | 特殊限制 |\n| :--------: | :------: |\n| $1 \\sim 2$ | $n = 3$ |\n| $3 \\sim 4$ | $n = 5$ |\n| $5 \\sim 6$ | $n = 100$ |\n| $7 \\sim 8$ | $n = 1000$ |\n| $9 \\sim 10$ | $u_i = 1, v_i = i + 1$ |\n| $11 \\sim 12$ | $u_i = i, v_i = i + 1$ |\n| $13 \\sim 20$ | 无特殊限制 |\n\n对于所有数据，$1 \\leq n \\leq 10^5$，$1 \\leq u_i, v_i \\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DTOI-5」3-1", "background": "——『太阳』这种东西，以前似乎是存在的。\n\n传说是这么讲的——白色的火焰发出闪耀的光芒，天空则是清澄无比的蔚蓝。\n\n据说诸神与其创造物所掀起的『大战』，使得大地化为焦土，灰烬遮蔽了苍穹。\n\n灰烬冲击到天上流动的星辰之力——精灵回廊，发出了光芒，将天空染成红色。\n\n而那样的红色，覆盖了仍然持续着互相残杀的每一块土地。\n\n或者那是这个星球本身发出的悲鸣与流出的鲜血吧……\n\n血色的天空上，只有——蓝色的灰飘然落下。\n\n~~回来吧3579，我最骄傲的信仰/ll~~", "description": "里克在视线可及的范围内发现了一颗古老的「神树」。\n\n神树是一颗树，树上有 $n$ 个含有魔法装置的位置。经过初步「考察」，有 $n - 1$ 条魔法连接，第 $i(1 \\leq i \\leq n - 1)$ 条连接 $u_i, v_i$ 两个魔法装置，保证 $u_i \\neq v_i$ 且 $1\\leq u_i,v_i\\leq n$。这两个装置可以相互**双向地**在 $1$ 单位时间内通行，保证仅由这 $n - 1$ 条连接，每个魔法装置都可以相互到达。\n\n此外，有 $n - 1$ 条特殊连接，对于每个魔法装置 $i \\in [2, n]$，可以**瞬间**传送到第 $1$ 个魔法装置，花费 $0$ 单位时间。**特殊连接总共只能使用一次**。\n\n里克初始在魔法装置 $1$ 处。现在，给出这棵「神树」的结构，里克想要在若干时间内研究尽可能多的魔法装置。我们假定，研究一个魔法装置只需要到达该装置处，并且不需要花费额外时间。\n\n里克想让你尽快计算出，对所有 $k \\in [1, n]$，如果要恰好研究 $k$ 个不同的魔法装置，**并且随之返回魔法装置 $\\bm 1$**，最少应花费多少时间。", "inputFormat": "第一行，一个整数 $n$。\n\n接下来 $n - 1$ 行，每行两个整数 $u_i, v_i$。", "outputFormat": "共 $n$ 行，第 $i$ 行一个整数表示 $k = i$ 的答案。", "hint": "**【样例解释 $\\bm 1$】**\n\n+ $k = 1$ 时，里克只需要呆在装置 $1$ 处。\n+ $k = 2$ 时，里克的路径可以是 $1 \\rightarrow 2 \\Rightarrow 1$。\n+ $k = 3$ 时，里克的路径可以是 $1 \\rightarrow 2 \\rightarrow 4 \\Rightarrow 1$。\n+ $k = 4$ 时，里克的路径可以是 $1 \\rightarrow 2 \\rightarrow 4 \\Rightarrow 1 \\rightarrow 3\\rightarrow 1$。\n+ $k = 5$ 时，里克的路径可以是 $1 \\rightarrow 3\\rightarrow 1 \\rightarrow 2 \\rightarrow 5 \\rightarrow 2 \\rightarrow 4 \\Rightarrow 1$。\n\n**【样例解释 $\\bm 2$】**\n\n这组数据满足测试点编号 $13 \\sim 20$ 的性质。\n\n**【数据规模与约定】**\n\n| 测试点编号 | 特殊限制 |\n| :--------: | :------: |\n| $1 \\sim 2$ | $n = 3$ |\n| $3 \\sim 4$ | $n = 5$ |\n| $5 \\sim 6$ | $n = 100$ |\n| $7 \\sim 8$ | $n = 1000$ |\n| $9 \\sim 10$ | $u_i = 1, v_i = i + 1$ |\n| $11 \\sim 12$ | $u_i = i, v_i = i + 1$ |\n| $13 \\sim 20$ | 无特殊限制 |\n\n对于所有数据，$1 \\leq n \\leq 10^5$，$1 \\leq u_i, v_i \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P9305", "type": "P", "difficulty": 4, "samples": [["2 1\n7\n3 3 2 2 114 4 7\n3 5 19 6 19 7 514\n0\n0\n0\n0\n0\n\n11\n5 2 4 3 9 8 1 9 7 11 10\n0\n3 4 8 5 3 7 2\n0\n1 6 6\n0\n0\n0\n1 10 5\n0\n0", "33\n2"], ["2 2\n7\n3 3 2 2 114 4 7\n3 5 19 6 19 7 514\n0\n0\n0\n0\n0\n\n11\n5 2 4 3 9 8 1 9 7 11 10\n0\n3 4 8 5 3 7 2\n0\n1 6 6\n0\n0\n0\n1 10 5\n0\n0", "33 38 0 0 0 0 0\n2 0 6 0 0 0 0 0 0 0 0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "二分", "O2优化", "深度优先搜索 DFS"], "title": "「DTOI-5」校门外的枯树", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/6ouay5j8.png)\n\n校门内的枯树，25/02/24\n\n---\n\n某天放学，你走出了校门，发现校门外又双叒叕出现了一排树。只不过因为正值寒冬时节，树的叶子都掉光了，树们在寒风中瑟瑟发抖，让人担心它们会不会在某一时刻失去平衡，然后倒下来。", "description": "给定校门外的一排 $T$ 棵无向有根树（每棵树的根节点编号均为 $1$），每棵树的每条边有其重量 $m_i$，现在请你算出每棵树的不平衡度 **或** 该树的**每个节点的子树**的不平衡度，好让校方帮忙加固。$\\color{white}\\sout{\\text{不要问我为什么重量的字母是 }m\\text。}$\n\n注意这里的**树的边是有顺序的**，~~你总不可能把树枝掰断然后嫁接到另一个地方吧，这可是枯树啊喂~~。\n\n---\n\n对于一颗有根树，定义其不平衡度为该树被在根节点与某一叶子节点的一条最短路径分割为左右两部分（两个边集）后（两个边集均不含该最短路径中的边）两部分的边的总重之差的最小值。特别地，**单个点作为树的不平衡度为 $0$**；空边集内边的总重为 $0$。", "inputFormat": "最开始一行读入两个正整数 $T,k$，$T$ 表示数据组数（即树的总数）。在每组测试数据中，如果 $k=1$，那么你只需要算出整个树的不平衡度即可；如果 $k=2$，**你需要分别对每个节点计算出其子树的不平衡度**。\n\n对于每棵树，第一行读入一个正整数 $n$，$n$ 表示该树内的节点数。\n\n后 $n$ 行，第 $u$ 行描述一个节点，该节点编号为 $u$：\n- 第一个正整数，表示该点的儿子个数，记为 $x$。\n- 后有 $2x$ 个正整数，第 $2i-1$ 个数表示 $u$ 点**从左往右**第 $i$ 个儿子 $v$，第 $2i$ 个数表示连接 $u$ 与 $v$ 的边的重量 $m_{u\\leftrightarrow v}$。", "outputFormat": "输出 $T$ 行：\n- 如果 $k=1$，第 $i$ 行仅输出一个非负整数表示第 $i$ 棵树的不平衡度。\n- 如果 $k=2$，第 $i$ 行输出 $n$ 个非负整数，第 $j$ 个数表示第 $i$ 棵树中的第 $j$ 号节点的子树的不平衡度。", "hint": "**【数据范围】**\n\n**不捆绑测试**，同一 $\\text{Subtask}$ 内每个测试点等分。\n\n$$\n%\\def\\or{\\operatorname{or}}\n%这 arraystretch 咋老是拼错/oh\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask}&\\sum n\\leqslant&k=&\\textbf{Special Constraints}&\\textbf{Score}\\cr\\hline\n\\sf1&2\\times10^5&1&\\bf A&1\\cr\\hline\n\\sf2&20&1&T=1&5\\cr\\hline\n\\sf3&5000&1&&5\\cr\\hline\n\\sf4&10^5&2&\\bf B&15\\cr\\hline\n\\sf5&3\\times10^5&1&&30\\cr\\hline\n\\sf6&2\\times10^5&2&\\bf A'&4\\cr\\hline\n\\sf7&3\\times10^5&2&&40\\cr\\hline\n\\end{array}\n$$\n- 特殊性质 $\\bf A$ ~~限宽 2.6m~~：保证每棵树只有一个叶子节点（$n\\geqslant2$）。\n- 特殊性质 $\\bf B$ ~~限高 4.5m~~：保证每棵树都为菊花图（根节点有 $n-1$ 个儿子）。\n- 特殊性质 $\\bf A'$：保证每棵树都是链（每个节点的度数不超过 $2$）。\n\n关于 $\\bf A$ 和 $\\bf A'$ 的区别：$\\bf A'$ 中有可能树的根的度数为 $2$，而 $\\bf A$ 中根的度数显然为 $1$。\n\n对于 $100\\%$ 的数据，$T \\leqslant 4000$，${\\color{red}\\textbf1}\\leqslant n\\leqslant 10^5$，$\\sum n\\leqslant 3\\times10^5$，$1 \\leqslant m_i \\leqslant10^4$，$1\\leqslant u, v\\leqslant n$，$k\\in\\{1,2\\}$。\n\n---\n叶子节点为没有儿子的节点，即除根节点以外在树中的度为 $1$ 的点。\n\n样例输入中为方便阅读加上了空行，实际数据中没有空行。\n\n\n**【样例 $\\bm1-\\bm1$ 解释】**\n\n\n该树如下图所示，边权即边的重量。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h5t1mz7x.png)\n\n最优解为选择 $1\\to2\\to7$ 作为分割路径，不平衡度为 ${\\large\\vert}(2+19+19)-7{\\large\\vert}=33$。\n\n如果选择 $1\\to2\\to6$ 作为分割路径，那么两部分的边的总重之差为 ${\\large\\vert}(2+19)-(7+514){\\large\\vert}=500$，不为最小值。\n\n$\\color{transparent}\\sout{注意到：\\begin{cases}114+2+19+19=154\\\\114+514+19+19=666\\end{cases}}$\n\n**【样例 $\\bm1-\\bm2$ 解释】**\n\n该树如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/14a0rhpe.png)\n\n最优解为选择 $1\\to3\\to7$ 作为分割路径，不平衡度为 ${\\large\\vert}(4+8+3+6)-(1+7+5+10){\\large\\vert}=2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DTOI-5」校门外的枯树", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/6ouay5j8.png)\n\n校门内的枯树，25/02/24\n\n---\n\n某天放学，你走出了校门，发现校门外又双叒叕出现了一排树。只不过因为正值寒冬时节，树的叶子都掉光了，树们在寒风中瑟瑟发抖，让人担心它们会不会在某一时刻失去平衡，然后倒下来。", "description": "给定校门外的一排 $T$ 棵无向有根树（每棵树的根节点编号均为 $1$），每棵树的每条边有其重量 $m_i$，现在请你算出每棵树的不平衡度 **或** 该树的**每个节点的子树**的不平衡度，好让校方帮忙加固。$\\color{white}\\sout{\\text{不要问我为什么重量的字母是 }m\\text。}$\n\n注意这里的**树的边是有顺序的**，~~你总不可能把树枝掰断然后嫁接到另一个地方吧，这可是枯树啊喂~~。\n\n---\n\n对于一颗有根树，定义其不平衡度为该树被在根节点与某一叶子节点的一条最短路径分割为左右两部分（两个边集）后（两个边集均不含该最短路径中的边）两部分的边的总重之差的最小值。特别地，**单个点作为树的不平衡度为 $0$**；空边集内边的总重为 $0$。", "inputFormat": "最开始一行读入两个正整数 $T,k$，$T$ 表示数据组数（即树的总数）。在每组测试数据中，如果 $k=1$，那么你只需要算出整个树的不平衡度即可；如果 $k=2$，**你需要分别对每个节点计算出其子树的不平衡度**。\n\n对于每棵树，第一行读入一个正整数 $n$，$n$ 表示该树内的节点数。\n\n后 $n$ 行，第 $u$ 行描述一个节点，该节点编号为 $u$：\n- 第一个正整数，表示该点的儿子个数，记为 $x$。\n- 后有 $2x$ 个正整数，第 $2i-1$ 个数表示 $u$ 点**从左往右**第 $i$ 个儿子 $v$，第 $2i$ 个数表示连接 $u$ 与 $v$ 的边的重量 $m_{u\\leftrightarrow v}$。", "outputFormat": "输出 $T$ 行：\n- 如果 $k=1$，第 $i$ 行仅输出一个非负整数表示第 $i$ 棵树的不平衡度。\n- 如果 $k=2$，第 $i$ 行输出 $n$ 个非负整数，第 $j$ 个数表示第 $i$ 棵树中的第 $j$ 号节点的子树的不平衡度。", "hint": "**【数据范围】**\n\n**不捆绑测试**，同一 $\\text{Subtask}$ 内每个测试点等分。\n\n$$\n%\\def\\or{\\operatorname{or}}\n%这 arraystretch 咋老是拼错/oh\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask}&\\sum n\\leqslant&k=&\\textbf{Special Constraints}&\\textbf{Score}\\cr\\hline\n\\sf1&2\\times10^5&1&\\bf A&1\\cr\\hline\n\\sf2&20&1&T=1&5\\cr\\hline\n\\sf3&5000&1&&5\\cr\\hline\n\\sf4&10^5&2&\\bf B&15\\cr\\hline\n\\sf5&3\\times10^5&1&&30\\cr\\hline\n\\sf6&2\\times10^5&2&\\bf A'&4\\cr\\hline\n\\sf7&3\\times10^5&2&&40\\cr\\hline\n\\end{array}\n$$\n- 特殊性质 $\\bf A$ ~~限宽 2.6m~~：保证每棵树只有一个叶子节点（$n\\geqslant2$）。\n- 特殊性质 $\\bf B$ ~~限高 4.5m~~：保证每棵树都为菊花图（根节点有 $n-1$ 个儿子）。\n- 特殊性质 $\\bf A'$：保证每棵树都是链（每个节点的度数不超过 $2$）。\n\n关于 $\\bf A$ 和 $\\bf A'$ 的区别：$\\bf A'$ 中有可能树的根的度数为 $2$，而 $\\bf A$ 中根的度数显然为 $1$。\n\n对于 $100\\%$ 的数据，$T \\leqslant 4000$，${\\color{red}\\textbf1}\\leqslant n\\leqslant 10^5$，$\\sum n\\leqslant 3\\times10^5$，$1 \\leqslant m_i \\leqslant10^4$，$1\\leqslant u, v\\leqslant n$，$k\\in\\{1,2\\}$。\n\n---\n叶子节点为没有儿子的节点，即除根节点以外在树中的度为 $1$ 的点。\n\n样例输入中为方便阅读加上了空行，实际数据中没有空行。\n\n\n**【样例 $\\bm1-\\bm1$ 解释】**\n\n\n该树如下图所示，边权即边的重量。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h5t1mz7x.png)\n\n最优解为选择 $1\\to2\\to7$ 作为分割路径，不平衡度为 ${\\large\\vert}(2+19+19)-7{\\large\\vert}=33$。\n\n如果选择 $1\\to2\\to6$ 作为分割路径，那么两部分的边的总重之差为 ${\\large\\vert}(2+19)-(7+514){\\large\\vert}=500$，不为最小值。\n\n$\\color{transparent}\\sout{注意到：\\begin{cases}114+2+19+19=154\\\\114+514+19+19=666\\end{cases}}$\n\n**【样例 $\\bm1-\\bm2$ 解释】**\n\n该树如下图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/14a0rhpe.png)\n\n最优解为选择 $1\\to3\\to7$ 作为分割路径，不平衡度为 ${\\large\\vert}(4+8+3+6)-(1+7+5+10){\\large\\vert}=2$。", "locale": "zh-CN"}}}
{"pid": "P9306", "type": "P", "difficulty": 3, "samples": [["5\n1 5 2 4 3\n1 4 2 5 3", "3 48"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "洛谷原创", "O2优化", "排列组合", "构造"], "title": "「DTOI-5」进行一个排的重 (Minimum Version)", "background": "**本题与 Maximum Version 的区别是所求最值和数据范围不同。**\n\n小 L 热衷于重排数列使之规整。", "description": "小 L 有一个长为 $n$ 的序列 $a$，其中每一项 $a_i$ 都是一个 pair $(p_i, q_i)$。\n\n为了让 $a$ 看起来规整一些，他钦定 $p, q$ 分别均为长为 $n$ 的排列。\n\n为了对 $a$ 的规整程度进行量化计算，他给出了一个权值函数 $f(a) = \\displaystyle\\sum_{i = 1}^n ([p_i > \\max_{j = 1}^{i - 1} p_j] + [q_i > \\max_{j = 1}^{i - 1} q_j])$。**注意 $i = 1$ 时两个方括号都能取到值，因为我们认为 $\\displaystyle\\max_{j = 1}^0 p_j = \\displaystyle\\max_{j = 1}^0 q_j = -\\infty$。**\n\n为了让 $a$ 看起来更加规整，他决定分别以某种方式重排 $a$ 得到 $a'$ 使得 $f(a')$ 最小。**注意重排时必须将 $a'_i = (p'_i, q'_i)$ 视为整体。**\n\n他希望你求出 $f(a')_{\\min}$ 的值，以及分别有多少个 $a'$ 可以取到 $f(a')_{\\min}$。\n\n由于方案数可能很大，你只需要求出结果对 $998244353$ 取模的值。", "inputFormat": "第一行，一个整数 $n$；\n\n第二行，$n$ 个整数 $p_1, p_2, \\cdots, p_n$；\n\n第三行，$n$ 个整数 $q_1, q_2, \\cdots, q_n$。", "outputFormat": "一行，两个整数，表示所求的值。", "hint": "**【数据范围】**\n\n$$\n\\def\\or{\\operatorname{or}}\n%\\def\\arrayscretch{1.5}\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Subtask}&n\\le &\\textbf{Points}\\cr\\hline\n\\sf1&10&10 \\operatorname{pts}\\cr\\hline\n\\sf2&500&20 \\operatorname{pts}\\cr\\hline\n\\sf3&5\\times10^3&20 \\operatorname{pts}\\cr\\hline\n\\sf4&10^5&20 \\operatorname{pts}\\cr\\hline\n\\sf5&5\\times10^5&30 \\operatorname{pts}\\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 5 \\times 10^5$，$1 \\leq p_i, q_i \\leq n$，保证 $p, q$ 均为**排列**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DTOI-5」进行一个排的重 (Minimum Version)", "background": "**本题与 Maximum Version 的区别是所求最值和数据范围不同。**\n\n小 L 热衷于重排数列使之规整。", "description": "小 L 有一个长为 $n$ 的序列 $a$，其中每一项 $a_i$ 都是一个 pair $(p_i, q_i)$。\n\n为了让 $a$ 看起来规整一些，他钦定 $p, q$ 分别均为长为 $n$ 的排列。\n\n为了对 $a$ 的规整程度进行量化计算，他给出了一个权值函数 $f(a) = \\displaystyle\\sum_{i = 1}^n ([p_i > \\max_{j = 1}^{i - 1} p_j] + [q_i > \\max_{j = 1}^{i - 1} q_j])$。**注意 $i = 1$ 时两个方括号都能取到值，因为我们认为 $\\displaystyle\\max_{j = 1}^0 p_j = \\displaystyle\\max_{j = 1}^0 q_j = -\\infty$。**\n\n为了让 $a$ 看起来更加规整，他决定分别以某种方式重排 $a$ 得到 $a'$ 使得 $f(a')$ 最小。**注意重排时必须将 $a'_i = (p'_i, q'_i)$ 视为整体。**\n\n他希望你求出 $f(a')_{\\min}$ 的值，以及分别有多少个 $a'$ 可以取到 $f(a')_{\\min}$。\n\n由于方案数可能很大，你只需要求出结果对 $998244353$ 取模的值。", "inputFormat": "第一行，一个整数 $n$；\n\n第二行，$n$ 个整数 $p_1, p_2, \\cdots, p_n$；\n\n第三行，$n$ 个整数 $q_1, q_2, \\cdots, q_n$。", "outputFormat": "一行，两个整数，表示所求的值。", "hint": "**【数据范围】**\n\n$$\n\\def\\or{\\operatorname{or}}\n%\\def\\arrayscretch{1.5}\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Subtask}&n\\le &\\textbf{Points}\\cr\\hline\n\\sf1&10&10 \\operatorname{pts}\\cr\\hline\n\\sf2&500&20 \\operatorname{pts}\\cr\\hline\n\\sf3&5\\times10^3&20 \\operatorname{pts}\\cr\\hline\n\\sf4&10^5&20 \\operatorname{pts}\\cr\\hline\n\\sf5&5\\times10^5&30 \\operatorname{pts}\\cr\\hline\n\\end{array}\n$$\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 5 \\times 10^5$，$1 \\leq p_i, q_i \\leq n$，保证 $p, q$ 均为**排列**。", "locale": "zh-CN"}}}
{"pid": "P9307", "type": "P", "difficulty": 5, "samples": [["5\n1 5 2 4 3\n1 4 2 5 3", "9 2"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200, 819200]}, "tags": ["动态规划 DP", "2023", "洛谷原创", "O2优化", "排列组合", "前缀和", "构造"], "title": "「DTOI-5」进行一个排的重 (Maximum Version)", "background": "**本题与 Minimum Version 的区别是所求最值和数据范围不同。**\n\n小 L 热衷于重排数列使之规整。", "description": "小 L 有一个长为 $n$ 的序列 $a$，其中每一项 $a_i$ 都是一个 pair $(p_i, q_i)$。\n\n为了让 $a$ 看起来规整一些，他钦定 $p, q$ 分别均为长为 $n$ 的排列。\n\n为了对 $a$ 的规整程度进行量化计算，他给出了一个权值函数 $f(a) = \\displaystyle\\sum_{i = 1}^n ([p_i > \\max_{j = 1}^{i - 1} p_j] + [q_i > \\max_{j = 1}^{i - 1} q_j])$。**注意 $i = 1$ 时两个方括号都能取到值，因为我们认为 $\\displaystyle\\max_{j = 1}^0 p_j = \\displaystyle\\max_{j = 1}^0 q_j = -\\infty$。**\n\n为了让 $a$ 看起来更加规整，他决定分别以某种方式重排 $a$ 得到 $a'$ 使得 $f(a')$ 最大。**注意重排时必须将 $a'_i = (p'_i, q'_i)$ 视为整体。**\n\n他希望你求出 $f(a')_{\\max}$ 的值，以及分别有多少个 $a'$ 可以取到 $f(a')_{\\max}$。\n\n由于方案数可能很大，你只需要求出结果对 $998244353$ 取模的值。", "inputFormat": "第一行，一个整数 $n$；\n\n第二行，$n$ 个整数 $p_1, p_2, \\cdots, p_n$；\n\n第三行，$n$ 个整数 $q_1, q_2, \\cdots, q_n$。", "outputFormat": "一行，两个整数，表示所求的值。", "hint": "**【数据范围】**\n\n$$\n\\def\\or{\\operatorname{or}}\n%\\def\\arrayscretch{1.5}\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Subtask}&n\\le &\\textbf{Points}\\cr\\hline\n\\sf1&10&10 \\operatorname{pts}\\cr\\hline\n\\sf2&50&20 \\operatorname{pts}\\cr\\hline\n\\sf3&500&20 \\operatorname{pts}\\cr\\hline\n\\sf4&2\\times 10^3&20 \\operatorname{pts}\\cr\\hline\n\\sf5&/&30 \\operatorname{pts}\\cr\\hline\n\\end{array}\n$$\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^4$，$1 \\leq p_i, q_i \\leq n$，保证 $p, q$ 均为**排列**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DTOI-5」进行一个排的重 (Maximum Version)", "background": "**本题与 Minimum Version 的区别是所求最值和数据范围不同。**\n\n小 L 热衷于重排数列使之规整。", "description": "小 L 有一个长为 $n$ 的序列 $a$，其中每一项 $a_i$ 都是一个 pair $(p_i, q_i)$。\n\n为了让 $a$ 看起来规整一些，他钦定 $p, q$ 分别均为长为 $n$ 的排列。\n\n为了对 $a$ 的规整程度进行量化计算，他给出了一个权值函数 $f(a) = \\displaystyle\\sum_{i = 1}^n ([p_i > \\max_{j = 1}^{i - 1} p_j] + [q_i > \\max_{j = 1}^{i - 1} q_j])$。**注意 $i = 1$ 时两个方括号都能取到值，因为我们认为 $\\displaystyle\\max_{j = 1}^0 p_j = \\displaystyle\\max_{j = 1}^0 q_j = -\\infty$。**\n\n为了让 $a$ 看起来更加规整，他决定分别以某种方式重排 $a$ 得到 $a'$ 使得 $f(a')$ 最大。**注意重排时必须将 $a'_i = (p'_i, q'_i)$ 视为整体。**\n\n他希望你求出 $f(a')_{\\max}$ 的值，以及分别有多少个 $a'$ 可以取到 $f(a')_{\\max}$。\n\n由于方案数可能很大，你只需要求出结果对 $998244353$ 取模的值。", "inputFormat": "第一行，一个整数 $n$；\n\n第二行，$n$ 个整数 $p_1, p_2, \\cdots, p_n$；\n\n第三行，$n$ 个整数 $q_1, q_2, \\cdots, q_n$。", "outputFormat": "一行，两个整数，表示所求的值。", "hint": "**【数据范围】**\n\n$$\n\\def\\or{\\operatorname{or}}\n%\\def\\arrayscretch{1.5}\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{Subtask}&n\\le &\\textbf{Points}\\cr\\hline\n\\sf1&10&10 \\operatorname{pts}\\cr\\hline\n\\sf2&50&20 \\operatorname{pts}\\cr\\hline\n\\sf3&500&20 \\operatorname{pts}\\cr\\hline\n\\sf4&2\\times 10^3&20 \\operatorname{pts}\\cr\\hline\n\\sf5&/&30 \\operatorname{pts}\\cr\\hline\n\\end{array}\n$$\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^4$，$1 \\leq p_i, q_i \\leq n$，保证 $p, q$ 均为**排列**。", "locale": "zh-CN"}}}
{"pid": "P9308", "type": "P", "difficulty": 6, "samples": [["10", "0 0 1 4 11 20 42 60 100 134"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "「DTOI-5」#1f1e33", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/9pyd7oxa.png)\n\nIn the middle of night.", "description": "定义函数 $f(n) = \\displaystyle\\sum_{i = 1}^n \\sum_{j = 1}^n \\sum_{k = 1}^n [i + j + k = n] \\operatorname{lcm}(i, \\gcd(j, k))$\n\n给定 $n$，对于所有 $1 \\leq i \\leq n$，**求出所有** $f(i) \\bmod 998244353$ 的值。", "inputFormat": "一行，一个整数 $n$。", "outputFormat": "一行，$n$ 个整数，表示所有 $f(i) \\bmod 998244353$ 的值。", "hint": "**【数据范围】**\n\n$$\n\\def\\or{\\operatorname{or}}\n%\\def\\arrayscretch{1.5}\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{测试点编号}&n= &\\textbf{Points}\\cr\\hline\n\\sf1&100&10 \\operatorname{pts}\\cr\\hline\n\\sf2&10^3&10 \\operatorname{pts}\\cr\\hline\n\\sf3&10^4&20 \\operatorname{pts}\\cr\\hline\n\\sf4&10^5&20 \\operatorname{pts}\\cr\\hline\n\\sf5&/&40 \\operatorname{pts}\\cr\\hline\n\\end{array}\n$$\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「DTOI-5」#1f1e33", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/9pyd7oxa.png)\n\nIn the middle of night.", "description": "定义函数 $f(n) = \\displaystyle\\sum_{i = 1}^n \\sum_{j = 1}^n \\sum_{k = 1}^n [i + j + k = n] \\operatorname{lcm}(i, \\gcd(j, k))$\n\n给定 $n$，对于所有 $1 \\leq i \\leq n$，**求出所有** $f(i) \\bmod 998244353$ 的值。", "inputFormat": "一行，一个整数 $n$。", "outputFormat": "一行，$n$ 个整数，表示所有 $f(i) \\bmod 998244353$ 的值。", "hint": "**【数据范围】**\n\n$$\n\\def\\or{\\operatorname{or}}\n%\\def\\arrayscretch{1.5}\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|}\\hline\n\\textbf{测试点编号}&n= &\\textbf{Points}\\cr\\hline\n\\sf1&100&10 \\operatorname{pts}\\cr\\hline\n\\sf2&10^3&10 \\operatorname{pts}\\cr\\hline\n\\sf3&10^4&20 \\operatorname{pts}\\cr\\hline\n\\sf4&10^5&20 \\operatorname{pts}\\cr\\hline\n\\sf5&/&40 \\operatorname{pts}\\cr\\hline\n\\end{array}\n$$\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9309", "type": "P", "difficulty": 3, "samples": [["1 6", "1"], ["10 11", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2021", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2021] Number of Zeros / 零的个数", "background": "Day 1 Problem A.\n\n题面译自 [EGOI2021 zeros](https://stats.egoi.org/media/task_description/2021_zeros_en.pdf)。", "description": "圣诞老人已经在准备 $2021$ 年圣诞节。他希望买正整数个礼物，使得可以平均分给所有不淘气的孩子。然而，他不知道具体有多少不淘气的孩子，只知道数量一定在 $a$ 和 $b$ 之间。他希望买最少的正整数个礼物，使得可以被任何 $x\\in\\{a,a+1,\\ldots,b\\}$ 个孩子平分。\n\n他已经计算出这（可能很大的）礼物数量，但他不确定计算是否正确，希望你可以进行一些基本的正确性检查。你可以告诉他答案的后导零个数吗？", "inputFormat": "一行，两个整数 $a,b$。", "outputFormat": "一行，一个整数，表示答案的后导零个数。", "hint": "**样例 $1$ 解释**\n\n如果可能有 $1$ 至 $6$ 个不淘气的孩子，圣诞老人至少需要 $60$ 个礼物（这是最小的能被 $1,2,3,4,5,6$ 整除的正整数），而 $60$ 有一个后导零。\n\n---\n\n**样例 $2$ 解释**\n\n如果可能有 $10$ 或 $11$ 个不淘气的孩子，圣诞老人会买 $110$ 个礼物。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le a\\le b\\le 10^{18}$。\n\n- 子任务一（$6$ 分）：$b\\le 16$。\n- 子任务二（$7$ 分）：$b\\le 40$。\n- 子任务三（$9$ 分）：$a=1$，$b\\le 200$。\n- 子任务四（$12$ 分）：$b-a\\le 10^6$。\n- 子任务五（$17$ 分）：$a=1$。\n- 子任务六（$49$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2021] Number of Zeros / 零的个数", "background": "Day 1 Problem A.\n\n题面译自 [EGOI2021 zeros](https://stats.egoi.org/media/task_description/2021_zeros_en.pdf)。", "description": "圣诞老人已经在准备 $2021$ 年圣诞节。他希望买正整数个礼物，使得可以平均分给所有不淘气的孩子。然而，他不知道具体有多少不淘气的孩子，只知道数量一定在 $a$ 和 $b$ 之间。他希望买最少的正整数个礼物，使得可以被任何 $x\\in\\{a,a+1,\\ldots,b\\}$ 个孩子平分。\n\n他已经计算出这（可能很大的）礼物数量，但他不确定计算是否正确，希望你可以进行一些基本的正确性检查。你可以告诉他答案的后导零个数吗？", "inputFormat": "一行，两个整数 $a,b$。", "outputFormat": "一行，一个整数，表示答案的后导零个数。", "hint": "**样例 $1$ 解释**\n\n如果可能有 $1$ 至 $6$ 个不淘气的孩子，圣诞老人至少需要 $60$ 个礼物（这是最小的能被 $1,2,3,4,5,6$ 整除的正整数），而 $60$ 有一个后导零。\n\n---\n\n**样例 $2$ 解释**\n\n如果可能有 $10$ 或 $11$ 个不淘气的孩子，圣诞老人会买 $110$ 个礼物。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le a\\le b\\le 10^{18}$。\n\n- 子任务一（$6$ 分）：$b\\le 16$。\n- 子任务二（$7$ 分）：$b\\le 40$。\n- 子任务三（$9$ 分）：$a=1$，$b\\le 200$。\n- 子任务四（$12$ 分）：$b-a\\le 10^6$。\n- 子任务五（$17$ 分）：$a=1$。\n- 子任务六（$49$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9310", "type": "P", "difficulty": 5, "samples": [["3\n3 1 2 1 2 3", "4"], ["5\n5 1 2 3 2 3 1 4 5 4", "7"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "线段树", "树状数组", "2021", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2021] Luna likes Love / 卢娜爱磕 cp", "background": "Day 1 Problem B.\n\n题面译自 [EGOI2021 luna](https://stats.egoi.org/media/task_description/2021_luna_en.pdf)。", "description": "卢娜想出了一个不同寻常的点子。她让 $2n$ 个朋友排成一条长队，并给他们每人一个 $1\\sim n$ 的整数。每个整数恰好出现两次。每一对有相同数字的朋友组成一对情侣。\n\n卢娜希望让每一对情侣去一次约会。然而，并没有这么简单。为了让一对情侣去约会，双方在队伍中必须互相紧挨着，也就是说不能有任何人站在他们中间。\n\n卢娜可以进行两种操作：\n\n- 她可以让任意两个紧挨着的人交换位置。\n- 如果一对情侣互相紧挨着，卢娜可以让他们去约会。这一对情侣将从队伍中离开，后面的人会补上他们的位置。\n\n所有操作可以以任意的顺序进行。例如，她可以交换几次，然后让几对情侣去约会，再交换几次。\n\n请求出让所有人去约会的最少操作次数。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $2n$ 个整数 $a_i$，依次表示队伍中朋友拿到的数字。", "outputFormat": "一行，一个整数，表示最少操作次数。", "hint": "**样例 $1$ 解释**\n\n卢娜先让第三个人和第四个人交换位置，得到 $3,1,1,2,2,3$。\n\n然后她可以让数字 $1$ 和 $2$ 的情侣去约会。之后，数字 $3$ 的情侣会互相紧挨着，卢娜可以让他们也去约会。\n\n综上，共需要 $4$ 次操作：一次交换和三次让情侣去约会。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n\\le 5\\times 10^5$，$1\\le a_i\\le n$。\n\n- 子任务一（$7$ 分）：任意一对情侣都紧挨着，$n\\le 100$。\n- 子任务二（$8$ 分）：任意一对情侣之间至多有一个人，$n\\le 100$。\n- 子任务三（$11$ 分）：前 $n$ 个人的数字构成一个 $1\\sim n$ 的排列，$n\\le 3\\times 10^3$。\n- 子任务四（$16$ 分）：前 $n$ 个人的数字构成一个 $1\\sim n$ 的排列。\n- 子任务五（$22$ 分）：$n\\le 3\\times 10^3$。\n- 子任务六（$36$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2021] Luna likes Love / 卢娜爱磕 cp", "background": "Day 1 Problem B.\n\n题面译自 [EGOI2021 luna](https://stats.egoi.org/media/task_description/2021_luna_en.pdf)。", "description": "卢娜想出了一个不同寻常的点子。她让 $2n$ 个朋友排成一条长队，并给他们每人一个 $1\\sim n$ 的整数。每个整数恰好出现两次。每一对有相同数字的朋友组成一对情侣。\n\n卢娜希望让每一对情侣去一次约会。然而，并没有这么简单。为了让一对情侣去约会，双方在队伍中必须互相紧挨着，也就是说不能有任何人站在他们中间。\n\n卢娜可以进行两种操作：\n\n- 她可以让任意两个紧挨着的人交换位置。\n- 如果一对情侣互相紧挨着，卢娜可以让他们去约会。这一对情侣将从队伍中离开，后面的人会补上他们的位置。\n\n所有操作可以以任意的顺序进行。例如，她可以交换几次，然后让几对情侣去约会，再交换几次。\n\n请求出让所有人去约会的最少操作次数。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $2n$ 个整数 $a_i$，依次表示队伍中朋友拿到的数字。", "outputFormat": "一行，一个整数，表示最少操作次数。", "hint": "**样例 $1$ 解释**\n\n卢娜先让第三个人和第四个人交换位置，得到 $3,1,1,2,2,3$。\n\n然后她可以让数字 $1$ 和 $2$ 的情侣去约会。之后，数字 $3$ 的情侣会互相紧挨着，卢娜可以让他们也去约会。\n\n综上，共需要 $4$ 次操作：一次交换和三次让情侣去约会。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n\\le 5\\times 10^5$，$1\\le a_i\\le n$。\n\n- 子任务一（$7$ 分）：任意一对情侣都紧挨着，$n\\le 100$。\n- 子任务二（$8$ 分）：任意一对情侣之间至多有一个人，$n\\le 100$。\n- 子任务三（$11$ 分）：前 $n$ 个人的数字构成一个 $1\\sim n$ 的排列，$n\\le 3\\times 10^3$。\n- 子任务四（$16$ 分）：前 $n$ 个人的数字构成一个 $1\\sim n$ 的排列。\n- 子任务五（$22$ 分）：$n\\le 3\\times 10^3$。\n- 子任务六（$36$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9311", "type": "P", "difficulty": 4, "samples": [["1\n13\n7\n31\n12\n5\n3", "? 13\n? 7\n? 31\n? 12\n? 5\n? 3\n! 2 3\n7 13\n12 5 3"], ["2\n7\n2\n5", "? 3 7\n? 2 8\n? 1 5\n! 2 1\n2 5\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "交互题", "Special Judge", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2021] Twin Cookies / 姐妹分饼干", "background": "Day 1 Problem C.\n\n题面译自 [EGOI2021 twincookies](https://stats.egoi.org/media/task_description/2021_twincookies_en.pdf)。\n\n本题官方没给交互库，由于交互库实现原因，数据可能较弱。如果您会写自适应交互库，可以与 rui_er 取得联系。", "description": "**本题是一道 I/O 交互题。**\n\n索菲在准备她们姐妹的生日派对。她们都喜欢饼干。这次生日，她们准备尝试一些新东西：不同饼干口味公司（UCTC）生产的饼干。\n\nUCTC 生产的每一个饼干都有一个在 $1$ 到 $10^{16}$ 之间的整数美味度。索菲姐妹会嫉妒彼此，因此她们收到的饼干的总美味度必须相同。\n\nUCTC 只接受**恰好 $n$ 个**饼干的订单。在每个订单中，顾客详细说明他们想要的每个饼干的美味度。\n\n顾名思义，不同饼干口味公司拒绝为同一个顾客生产两块美味度相同的饼干。索菲必须确保她从不订购同一种美味度两次——不管是同一个订单或者两个不同的订单。索菲以前从来没有从 UCTC 订购过，所以她可以购买每种口味的饼干最多一次。\n\n还有一件事阻碍着索菲：众所周知 UCTC 的物流服务极为糟糕。当一个顾客订购 $n$ 个饼干，只有其中一个会被送达。其余的饼干都被物流的员工偷吃了。顾客无法决定到底哪块饼干会被送达。\n\n鉴于生日临近，索菲只有时间订购至多 $101$ 次。你的任务是帮助她。\n\n具体地，你需要做的事情如下：\n\n1. 首先，订购饼干。你可以订购至多 $101$ 次，每次包含恰好 $n$ 个想要的美味度。你可以分多次订购。**在每笔订单发出后，你会立刻知道送达的饼干的美味度。**\n\n    请记住你不能多次订购同一个美味度的饼干，即使在不同订单中也不行。（特别地，如果你订购了一些美味度的饼干但没有送达，你也**不能**重复订购同一美味度的饼干。）\n\n2. 然后，分饼干。当你收到足够多饼干的时候，你应该给姐妹分配**一些**饼干。每个人应该收到至少一个饼干，并且她们收到的饼干的总美味度应该相同。**你不需要分配所有送达的饼干。**", "inputFormat": "", "outputFormat": "你的程序每次输出后，你必须**刷新输出流**。为了保证交互库立即得到你的输出，这是必须的。\n\n一些例子：\n\n- 在 C++ 语言中，有多种选择：\n    - `fflush(stdout);`\n    - `std::cout << std::flush;`\n    - `std::cout << std::endl;`（注意这会打印一个换行）\n    - 从 `std::cin` 读入也会刷新输出流。\n- 在 Java 语言中，你可以使用 `System.out.flush()`\n- 在 Python 语言中，你可以使用 `sys.stdout.flush()`\n\n---\n\n**交互方式**\n\n你的程序应该进行如下的若干操作：\n\n1. 从标准输入读入 $n$。\n2. 至多 $101$ 次：\n    1. 首先，向标准输出打印一行描述 $n$ 个饼干的一个订单。\n    2. 然后，输入送达的饼干美味度。\n    \n        保证这个数在当前订单的 $n$ 个美味度当中。\n3. 输出三行，描述一种给姐妹分配一些饼干的方式。\n\n交互库会在每一行写一个整数。\n\n为了订购饼干，输出一行，以 `?` 打头并跟着 $n$ 个整数：订购的饼干美味度。在每个整数之前输出一个空格。\n\n请记住你可以订购至多 $101$ 次，并且不被允许多次订购相同美味度的饼干。\n\n当你订购了足够多的饼干的时候，输出最后三行描述分配方式。\n\n第一行的格式是 `! m k`，其中 $m,k>0$：两个人分别分到饼干的数量。\n\n第二行包含 $m$ 个正整数，用一个空格隔开：第一个人收到的饼干美味度。\n\n第三行包含 $k$ 个正整数，用一个空格隔开：第二个人收到的饼干美味度。\n\n输出必须满足以下要求：\n\n1. 每个人至少收到一个饼干。\n2. 每个人收到饼干的总美味度相同。\n3. 你只能使用送达的饼干。\n4. 每个饼干只能分给至多一个人。\n\n任何符合要求的输出都将被判为 AC。特别地，你可以以任意顺序输出选择的饼干。\n\n在你输出完最后三行后，最后刷新一次输出流，并正常结束程序。", "hint": "**提示**\n\n样例输入输出应该一行一行阅读。你的程序交替从标准输入读一个整数以及向标准输出打印一行（或最后三行）。\n\n交互库任意地选择送达的饼干。这意味着在某些测试点中，交互库可能是自适应的；但在另一些测试点中，交互库可能随机选择。特别地，对于 $n=2$，如果你跟样例 $2$ 输出相同的订单，你可能得到不同的结果。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n\\le 5\\times 10^3$。\n\n- 子任务一（$8$ 分）：$n=1$。\n- 子任务二（$9$ 分）：$n\\le 2$。\n- 子任务三（$18$ 分）：$n\\le 25$。\n- 子任务四（$16$ 分）：$n\\le 200$。\n- 子任务五（$13$ 分）：$n\\le 10^3$。\n- 子任务六（$36$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2021] Twin Cookies / 姐妹分饼干", "background": "Day 1 Problem C.\n\n题面译自 [EGOI2021 twincookies](https://stats.egoi.org/media/task_description/2021_twincookies_en.pdf)。\n\n本题官方没给交互库，由于交互库实现原因，数据可能较弱。如果您会写自适应交互库，可以与 rui_er 取得联系。", "description": "**本题是一道 I/O 交互题。**\n\n索菲在准备她们姐妹的生日派对。她们都喜欢饼干。这次生日，她们准备尝试一些新东西：不同饼干口味公司（UCTC）生产的饼干。\n\nUCTC 生产的每一个饼干都有一个在 $1$ 到 $10^{16}$ 之间的整数美味度。索菲姐妹会嫉妒彼此，因此她们收到的饼干的总美味度必须相同。\n\nUCTC 只接受**恰好 $n$ 个**饼干的订单。在每个订单中，顾客详细说明他们想要的每个饼干的美味度。\n\n顾名思义，不同饼干口味公司拒绝为同一个顾客生产两块美味度相同的饼干。索菲必须确保她从不订购同一种美味度两次——不管是同一个订单或者两个不同的订单。索菲以前从来没有从 UCTC 订购过，所以她可以购买每种口味的饼干最多一次。\n\n还有一件事阻碍着索菲：众所周知 UCTC 的物流服务极为糟糕。当一个顾客订购 $n$ 个饼干，只有其中一个会被送达。其余的饼干都被物流的员工偷吃了。顾客无法决定到底哪块饼干会被送达。\n\n鉴于生日临近，索菲只有时间订购至多 $101$ 次。你的任务是帮助她。\n\n具体地，你需要做的事情如下：\n\n1. 首先，订购饼干。你可以订购至多 $101$ 次，每次包含恰好 $n$ 个想要的美味度。你可以分多次订购。**在每笔订单发出后，你会立刻知道送达的饼干的美味度。**\n\n    请记住你不能多次订购同一个美味度的饼干，即使在不同订单中也不行。（特别地，如果你订购了一些美味度的饼干但没有送达，你也**不能**重复订购同一美味度的饼干。）\n\n2. 然后，分饼干。当你收到足够多饼干的时候，你应该给姐妹分配**一些**饼干。每个人应该收到至少一个饼干，并且她们收到的饼干的总美味度应该相同。**你不需要分配所有送达的饼干。**", "inputFormat": "", "outputFormat": "你的程序每次输出后，你必须**刷新输出流**。为了保证交互库立即得到你的输出，这是必须的。\n\n一些例子：\n\n- 在 C++ 语言中，有多种选择：\n    - `fflush(stdout);`\n    - `std::cout << std::flush;`\n    - `std::cout << std::endl;`（注意这会打印一个换行）\n    - 从 `std::cin` 读入也会刷新输出流。\n- 在 Java 语言中，你可以使用 `System.out.flush()`\n- 在 Python 语言中，你可以使用 `sys.stdout.flush()`\n\n---\n\n**交互方式**\n\n你的程序应该进行如下的若干操作：\n\n1. 从标准输入读入 $n$。\n2. 至多 $101$ 次：\n    1. 首先，向标准输出打印一行描述 $n$ 个饼干的一个订单。\n    2. 然后，输入送达的饼干美味度。\n    \n        保证这个数在当前订单的 $n$ 个美味度当中。\n3. 输出三行，描述一种给姐妹分配一些饼干的方式。\n\n交互库会在每一行写一个整数。\n\n为了订购饼干，输出一行，以 `?` 打头并跟着 $n$ 个整数：订购的饼干美味度。在每个整数之前输出一个空格。\n\n请记住你可以订购至多 $101$ 次，并且不被允许多次订购相同美味度的饼干。\n\n当你订购了足够多的饼干的时候，输出最后三行描述分配方式。\n\n第一行的格式是 `! m k`，其中 $m,k>0$：两个人分别分到饼干的数量。\n\n第二行包含 $m$ 个正整数，用一个空格隔开：第一个人收到的饼干美味度。\n\n第三行包含 $k$ 个正整数，用一个空格隔开：第二个人收到的饼干美味度。\n\n输出必须满足以下要求：\n\n1. 每个人至少收到一个饼干。\n2. 每个人收到饼干的总美味度相同。\n3. 你只能使用送达的饼干。\n4. 每个饼干只能分给至多一个人。\n\n任何符合要求的输出都将被判为 AC。特别地，你可以以任意顺序输出选择的饼干。\n\n在你输出完最后三行后，最后刷新一次输出流，并正常结束程序。", "hint": "**提示**\n\n样例输入输出应该一行一行阅读。你的程序交替从标准输入读一个整数以及向标准输出打印一行（或最后三行）。\n\n交互库任意地选择送达的饼干。这意味着在某些测试点中，交互库可能是自适应的；但在另一些测试点中，交互库可能随机选择。特别地，对于 $n=2$，如果你跟样例 $2$ 输出相同的订单，你可能得到不同的结果。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n\\le 5\\times 10^3$。\n\n- 子任务一（$8$ 分）：$n=1$。\n- 子任务二（$9$ 分）：$n\\le 2$。\n- 子任务三（$18$ 分）：$n\\le 25$。\n- 子任务四（$16$ 分）：$n\\le 200$。\n- 子任务五（$13$ 分）：$n\\le 10^3$。\n- 子任务六（$36$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9312", "type": "P", "difficulty": 7, "samples": [["7 8\n4 2 3 1 5 6 7\n3 1 2 4\n1 2 1 3\n4 4 1 7\n6 10 1 7\n6 20 6 6\n6 30 5 5\n7 40 1 6\n7 50 7 7", "7\n-1\n4\n10\n30\n-1\n-1\n-1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2021] Lanterns / 灯笼", "background": "Day 1 Problem D.\n\n题面译自 [EGOI2021 lantern](https://stats.egoi.org/media/task_description/2021_lantern_en.pdf)。", "description": "农夫约翰带着他的奶牛群在阿尔卑斯山进行了一次徒步旅行！一段时间后，天色转暗，旅行结束了。然而，一些奶牛仍然被困在山脉的各个地方，现在约翰需要营救它们！\n\n现在牛群正在穿越的山脉用平面直角坐标系中的 $n$ 个点表示。我们称这些点为“山峰”。山峰被依次编号为 $1\\sim n$。第 $i$ 座山峰的坐标为 $(i,h_i)$。值 $h_i$ 代表第 $i$ 座山峰的**海拔高度**。保证 $h_1,h_2,\\ldots h_n$ 构成一个 $1\\sim n$ 的排列。\n\n山峰 $i$ 和山峰 $i+1$ 用一条线段相连。\n\n由于现在是晚上，约翰必须携带至少一盏正常工作的灯笼才能上山。幸运的是，有 $k$ 个灯笼可供购买。第 $j$ 个灯笼可以在山峰 $p_j$ 以 $c_j$ 法郎的价格购买。\n\n不幸的是，第 $j$ 个灯笼只有在约翰的海拔在 $[a_j,b_j]$ 时才能正常工作。换句话说，如果约翰的海拔严格低于 $a_j$ 或严格高于 $b_j$，第 $j$ 个灯笼不会正常工作。需要注意的是，灯笼在离开海拔范围时不会损坏。例如，当约翰的海拔超过 $b_j$ 时，第 $j$ 个灯笼会停止工作，但只要约翰返回到海拔 $b_j$，灯笼会重新开始工作。\n\n如果约翰现在在山峰 $p$，他可以执行以下三种操作之一：\n\n- 他可以买一个在 $p$ 处售卖的灯笼。购买灯笼后，他可以永久使用。\n- 如果 $p > 1$，他可以走到山峰 $p-1$。\n- 如果 $p < n$，他可以走到山峰 $p+1$。\n\n约翰在没有正常工作的灯笼时不能移动。他必须保证每个时刻都有至少一盏灯笼正常工作，才能在两座山峰间移动。（在行走过程中不必是同一盏灯笼。）\n\n例如，假设农夫约翰目前在海拔为 $4$ 的山峰上，希望走到高度为 $1$ 的相邻山峰。如果约翰有海拔范围为 $[1,3]$ 和 $[3,4]$ 的两盏灯笼，他可以从一个山峰走到另一个山峰。\n\n但是，如果约翰只有海拔范围为 $[1,1]$ 和 $[2,5]$ 的两盏灯笼，他无法在这两座山峰间行走：例如，他没有灯笼能在海拔 $1.47$ 处正常工作。\n\n你需要给出多个独立问题的答案。\n\n对于每个满足 $a_j\\le h_{p_j}\\le b_j$ 的 $1\\le j\\le k$，假设约翰一开始在山峰 $p_j$ 并买下第 $j$ 个灯笼。为了搜索整个山脉，他必须重复执行上面提到的三种操作。对于每个 $j$，求出约翰至少需要花几法郎，才能搜索整个山脉。（这个花费包括初始时买的第 $j$ 个灯笼。）", "inputFormat": "第一行两个整数 $n,k$——山峰个数和灯笼个数。\n\n第二行 $n$ 个整数 $h_1,h_2,\\ldots,h_n$：每座山峰的海拔。保证 $h_i$ 构成一个 $1\\sim n$ 的排列。\n\n接下来 $k$ 行，每行四个整数 $p_j,c_j,a_j,b_j$——第 $j$ 个灯笼的售卖位置、价格和海拔范围。", "outputFormat": "对于每个 $1\\le j\\le k$，输出一行：\n\n- 若 $h_{p_j}$ 不在 $[a_j,b_j]$ 内，输出 $-1$。\n- 否则，如果约翰一开始购买第 $j$ 个灯笼，无法搜索整个山脉，输出 $-1$。\n- 否则，输出此时的最少花费。", "hint": "**样例解释**\n\n如果约翰从第 $3$ 座山峰开始，购买第 $1$ 个灯笼，他可以如下操作：\n\n- 向左走两次，到达山峰 $1$。\n- 购买灯笼 $2$。\n- 向右走到山峰 $4$。\n- 购买灯笼 $3$。\n- 向右走到山峰 $7$。\n\n此时，约翰到达了每座山峰至少一次，花费了 $1+2+4=7$ 法郎。\n\n约翰不能从购买灯笼 $2,6,7$ 开始，因为它们在购买的海拔处不工作。因此，它们的答案为 $-1$。\n\n如果约翰从购买灯笼 $3,4$ 开始，他不用购买其他灯笼就可以访问每座山峰。\n\n如果约翰从购买灯笼 $5$ 开始，他必须购买灯笼 $4$。\n\n如果约翰从购买灯笼 $8$ 开始，他会被困在山峰 $7$。即使他购买了灯笼 $7$，他依然无法从山峰 $7$ 走到山峰 $6$。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n,k\\le 2\\times 10^3$，$1\\le h_i\\le n$ 且 $h_i$ 构成一个 $1\\sim n$ 的排列，$1\\le p_j\\le n$，$1\\le c_j\\le 10^6$，$1\\le a_j\\le b_j\\le n$。\n\n- 子任务一（$9$ 分）：$n\\le 20$，$k\\le 6$。\n- 子任务二（$12$ 分）：$n,k\\le 70$。\n- 子任务三（$23$ 分）：$n,k\\le 300$，$h_i=i$。\n- 子任务四（$16$ 分）：$n,k\\le 300$。\n- 子任务五（$40$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2021] Lanterns / 灯笼", "background": "Day 1 Problem D.\n\n题面译自 [EGOI2021 lantern](https://stats.egoi.org/media/task_description/2021_lantern_en.pdf)。", "description": "农夫约翰带着他的奶牛群在阿尔卑斯山进行了一次徒步旅行！一段时间后，天色转暗，旅行结束了。然而，一些奶牛仍然被困在山脉的各个地方，现在约翰需要营救它们！\n\n现在牛群正在穿越的山脉用平面直角坐标系中的 $n$ 个点表示。我们称这些点为“山峰”。山峰被依次编号为 $1\\sim n$。第 $i$ 座山峰的坐标为 $(i,h_i)$。值 $h_i$ 代表第 $i$ 座山峰的**海拔高度**。保证 $h_1,h_2,\\ldots h_n$ 构成一个 $1\\sim n$ 的排列。\n\n山峰 $i$ 和山峰 $i+1$ 用一条线段相连。\n\n由于现在是晚上，约翰必须携带至少一盏正常工作的灯笼才能上山。幸运的是，有 $k$ 个灯笼可供购买。第 $j$ 个灯笼可以在山峰 $p_j$ 以 $c_j$ 法郎的价格购买。\n\n不幸的是，第 $j$ 个灯笼只有在约翰的海拔在 $[a_j,b_j]$ 时才能正常工作。换句话说，如果约翰的海拔严格低于 $a_j$ 或严格高于 $b_j$，第 $j$ 个灯笼不会正常工作。需要注意的是，灯笼在离开海拔范围时不会损坏。例如，当约翰的海拔超过 $b_j$ 时，第 $j$ 个灯笼会停止工作，但只要约翰返回到海拔 $b_j$，灯笼会重新开始工作。\n\n如果约翰现在在山峰 $p$，他可以执行以下三种操作之一：\n\n- 他可以买一个在 $p$ 处售卖的灯笼。购买灯笼后，他可以永久使用。\n- 如果 $p > 1$，他可以走到山峰 $p-1$。\n- 如果 $p < n$，他可以走到山峰 $p+1$。\n\n约翰在没有正常工作的灯笼时不能移动。他必须保证每个时刻都有至少一盏灯笼正常工作，才能在两座山峰间移动。（在行走过程中不必是同一盏灯笼。）\n\n例如，假设农夫约翰目前在海拔为 $4$ 的山峰上，希望走到高度为 $1$ 的相邻山峰。如果约翰有海拔范围为 $[1,3]$ 和 $[3,4]$ 的两盏灯笼，他可以从一个山峰走到另一个山峰。\n\n但是，如果约翰只有海拔范围为 $[1,1]$ 和 $[2,5]$ 的两盏灯笼，他无法在这两座山峰间行走：例如，他没有灯笼能在海拔 $1.47$ 处正常工作。\n\n你需要给出多个独立问题的答案。\n\n对于每个满足 $a_j\\le h_{p_j}\\le b_j$ 的 $1\\le j\\le k$，假设约翰一开始在山峰 $p_j$ 并买下第 $j$ 个灯笼。为了搜索整个山脉，他必须重复执行上面提到的三种操作。对于每个 $j$，求出约翰至少需要花几法郎，才能搜索整个山脉。（这个花费包括初始时买的第 $j$ 个灯笼。）", "inputFormat": "第一行两个整数 $n,k$——山峰个数和灯笼个数。\n\n第二行 $n$ 个整数 $h_1,h_2,\\ldots,h_n$：每座山峰的海拔。保证 $h_i$ 构成一个 $1\\sim n$ 的排列。\n\n接下来 $k$ 行，每行四个整数 $p_j,c_j,a_j,b_j$——第 $j$ 个灯笼的售卖位置、价格和海拔范围。", "outputFormat": "对于每个 $1\\le j\\le k$，输出一行：\n\n- 若 $h_{p_j}$ 不在 $[a_j,b_j]$ 内，输出 $-1$。\n- 否则，如果约翰一开始购买第 $j$ 个灯笼，无法搜索整个山脉，输出 $-1$。\n- 否则，输出此时的最少花费。", "hint": "**样例解释**\n\n如果约翰从第 $3$ 座山峰开始，购买第 $1$ 个灯笼，他可以如下操作：\n\n- 向左走两次，到达山峰 $1$。\n- 购买灯笼 $2$。\n- 向右走到山峰 $4$。\n- 购买灯笼 $3$。\n- 向右走到山峰 $7$。\n\n此时，约翰到达了每座山峰至少一次，花费了 $1+2+4=7$ 法郎。\n\n约翰不能从购买灯笼 $2,6,7$ 开始，因为它们在购买的海拔处不工作。因此，它们的答案为 $-1$。\n\n如果约翰从购买灯笼 $3,4$ 开始，他不用购买其他灯笼就可以访问每座山峰。\n\n如果约翰从购买灯笼 $5$ 开始，他必须购买灯笼 $4$。\n\n如果约翰从购买灯笼 $8$ 开始，他会被困在山峰 $7$。即使他购买了灯笼 $7$，他依然无法从山峰 $7$ 走到山峰 $6$。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n,k\\le 2\\times 10^3$，$1\\le h_i\\le n$ 且 $h_i$ 构成一个 $1\\sim n$ 的排列，$1\\le p_j\\le n$，$1\\le c_j\\le 10^6$，$1\\le a_j\\le b_j\\le n$。\n\n- 子任务一（$9$ 分）：$n\\le 20$，$k\\le 6$。\n- 子任务二（$12$ 分）：$n,k\\le 70$。\n- 子任务三（$23$ 分）：$n,k\\le 300$，$h_i=i$。\n- 子任务四（$16$ 分）：$n,k\\le 300$。\n- 子任务五（$40$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9313", "type": "P", "difficulty": 3, "samples": [["7 10\n300 200 200 300 100 300 200", "1090"], ["3 20\n1000 500 100", "1280"], ["4 0\n200 100 300 200", "600"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2021", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2021] Shopping Fever / 购物热", "background": "Day 2 Problem A.\n\n题面译自 [EGOI2021 shoppingfever](https://stats.egoi.org/media/task_description/2021_shoppingfever_en.pdf)。", "description": "海蒂在一个大商店中。她希望购买 $n$ 个商品。\n\n今天是她的幸运日。商店正在进行促销活动：对于每笔账单，顾客获得以下两种优惠之一：\n\n1. 如果买了至少 $3$ 件商品，最便宜的一个免费。\n2. 如果买了少于 $3$ 件商品，这笔账单获得 $q\\%$ 的折扣。\n\n海蒂希望不重复地买所有 $n$ 件商品。她可以分成任意笔账单购买。对于每笔账单，将会按照对应的优惠政策打折。\n\n她买所有 $n$ 件商品至少需要多少钱？", "inputFormat": "第一行两个整数 $n,q$——商品数和买少于 $3$ 件时的折扣比例。\n\n第二行 $n$ 个整数 $p_i$——商品的价格。\n\n另外，保证商品价格可以被 $100$ 整除。因此，每笔账单折扣的价格永远为整数。", "outputFormat": "一行，一个整数——至少需要的钱数。", "hint": "**样例 $1$ 解释**\n\n海蒂先购买三个价格为 $200$ 元的商品，花费 $400$ 元（免费获得了一个商品）。再购买三个价格为 $300$ 元的商品，花费 $600$ 元（同样免费获得一个）。最后，她购买剩余的价格为 $100$ 元的商品，获得 $10\\%$ 的折扣。\n\n---\n\n**样例 $2$ 解释**\n\n如果海蒂用一笔账单购买三个商品，她获得 $100$ 元的折扣。然而，如果她分三次购买三个商品，获得的折扣变为 $(1000+500+100)\\cdot\\frac{20}{100}=320$ 元。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n\\le 10^5$，$0\\le q\\le 100$，$100\\le p_i\\le 10^5$ 且 $100\\mid p_i$。\n\n- 子任务一（$8$ 分）：$n=3$，$100\\le p_i\\le 10^3$。\n- 子任务二（$18$ 分）：$q=0$。\n- 子任务三（$16$ 分）：$q=40$。\n- 子任务四（$22$ 分）：$100\\le p_i\\le 10^3$。\n- 子任务五（$36$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2021] Shopping Fever / 购物热", "background": "Day 2 Problem A.\n\n题面译自 [EGOI2021 shoppingfever](https://stats.egoi.org/media/task_description/2021_shoppingfever_en.pdf)。", "description": "海蒂在一个大商店中。她希望购买 $n$ 个商品。\n\n今天是她的幸运日。商店正在进行促销活动：对于每笔账单，顾客获得以下两种优惠之一：\n\n1. 如果买了至少 $3$ 件商品，最便宜的一个免费。\n2. 如果买了少于 $3$ 件商品，这笔账单获得 $q\\%$ 的折扣。\n\n海蒂希望不重复地买所有 $n$ 件商品。她可以分成任意笔账单购买。对于每笔账单，将会按照对应的优惠政策打折。\n\n她买所有 $n$ 件商品至少需要多少钱？", "inputFormat": "第一行两个整数 $n,q$——商品数和买少于 $3$ 件时的折扣比例。\n\n第二行 $n$ 个整数 $p_i$——商品的价格。\n\n另外，保证商品价格可以被 $100$ 整除。因此，每笔账单折扣的价格永远为整数。", "outputFormat": "一行，一个整数——至少需要的钱数。", "hint": "**样例 $1$ 解释**\n\n海蒂先购买三个价格为 $200$ 元的商品，花费 $400$ 元（免费获得了一个商品）。再购买三个价格为 $300$ 元的商品，花费 $600$ 元（同样免费获得一个）。最后，她购买剩余的价格为 $100$ 元的商品，获得 $10\\%$ 的折扣。\n\n---\n\n**样例 $2$ 解释**\n\n如果海蒂用一笔账单购买三个商品，她获得 $100$ 元的折扣。然而，如果她分三次购买三个商品，获得的折扣变为 $(1000+500+100)\\cdot\\frac{20}{100}=320$ 元。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n\\le 10^5$，$0\\le q\\le 100$，$100\\le p_i\\le 10^5$ 且 $100\\mid p_i$。\n\n- 子任务一（$8$ 分）：$n=3$，$100\\le p_i\\le 10^3$。\n- 子任务二（$18$ 分）：$q=0$。\n- 子任务三（$16$ 分）：$q=40$。\n- 子任务四（$22$ 分）：$100\\le p_i\\le 10^3$。\n- 子任务五（$36$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9314", "type": "P", "difficulty": 3, "samples": [["100 2 1 4\n20 50\n30 60\n120\n30 100 200 250", "NO"], ["1000 1 1 1\n600\n700\n100\n400", "YES"], ["1000 1 1 1\n600\n700\n100\n300", "NO"], ["1000 1 1 1\n600\n700\n100\n500", "NO"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2021] Railway / 瑞士铁路", "background": "Day 2 Problem B.\n\n题面译自 [EGOI2021 railway](https://stats.egoi.org/media/task_description/2021_railway_en.pdf)。", "description": "有一条连接苏黎世和卢加诺的长度为 $s$ 千米的铁路。铁路穿过了美丽的阿尔卑斯山，造就了旅程中壮观的景色。由于一些山口对铁路来说太高了，在线路上修剪了 $t$ 条隧道。第 $i$ 条隧道在距离苏黎世 $a_i$ 千米处开始，在 $b_i$ 千米处结束。（因此，第 $i$ 条隧道的长度为 $b_i-a_i$。）\n\n你有一份两地之间的列车时刻表。从苏黎世到卢加诺有 $m$ 班列车，第 $j$ 班列车在 $c_j$ 分钟发车；从卢加诺到苏黎世有 $n$ 班列车，第 $k$ 班列车在 $d_k$ 分钟发车。所有运行中的列车，无论其方向和是否在隧道内，速度均恒为 $1$ 千米每分钟。路程中没有车站，列车也不会在信号灯处停车。因此，每班列车恰好花费 $s$ 分钟到达终点站。\n\n与铁路的长度相比，列车的长度可以忽略不计，所以在本题中，**请假设每班列车是一个沿铁路移动的点**。\n\n通常情况下，铁路有两条轨道：两个方向各有一条。唯一的例外是隧道。每个隧道只有一条轨道，可以从任何方向通行。\n\n无论何时，只要两班反向运行的列车在隧道外相遇时，他们总是可以安全地经过对方。这包括列车正好在隧道的端点处相遇。但另一方面，如果两班反向运行的列车在隧道内严格$^\\dagger$相遇，就会发生碰撞。\n\n已知隧道信息和列车时刻表，请判断是否会发生碰撞。\n\n$^\\dagger$严格：原文如此（strictly）。", "inputFormat": "第一行四个整数 $s,t,m,n$——铁路长度、隧道个数、从苏黎世和卢加诺发车的列车数量。\n\n第二行 $t$ 个整数 $a_i$——每个隧道的起点。\n\n第三行 $t$ 个整数 $b_i$——每个隧道的终点。\n\n第四行 $m$ 个整数 $c_j$——从苏黎世发车的时间。\n\n第五行 $n$ 个整数 $d_k$——从卢加诺发车的时间。", "outputFormat": "一行，一个为 `YES` 或 `NO` 的字符串，代表是否会发生碰撞。", "hint": "**样例 $1$ 解释**\n\n在长度为 $100$ 千米的铁路上，有两条隧道：距离苏黎世 $20\\sim 30$ 千米处和 $50\\sim 60$ 千米处。唯一一班从苏黎世发车的列车避开了所有从卢加诺发车的列车，如下：\n\n- 与第一班车在距离苏黎世 $5$ 千米处相遇。\n- 与第二班车在两个隧道间相遇。\n- 与第三班车在距离卢加诺 $10$ 千米处相遇。\n- 第四班车在该班车到站后很久才发车。\n\n---\n\n**样例 $2$ 解释**\n\n两班列车在唯一的隧道中间相撞。\n\n---\n\n**样例 $3$ 解释**\n\n两班列车在隧道靠近苏黎世的一端相遇。\n\n---\n\n**样例 $4$ 解释**\n\n两班列车在隧道靠近卢加诺的一端相遇。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le s\\le 10^9$，$0\\le t\\le 10^5$，$0\\le m,n\\le 2\\times 10^3$，$0\\le a_i < s$，$0 < b_i\\le s$，$a_i < b_i$，$b_i < a_{i+1}$，$0\\le c_j,d_k\\le 10^9$，$c_j < c_{j+1}$，$d_k < d_{k+1}$。\n\n在前三个子任务中，保证 $s,c_j,d_k$ 均为偶数。\n\n- 子任务一（$14$ 分）：$t,m,n\\le 100$，$s\\le 5\\times 10^3$。\n- 子任务二（$16$ 分）：$t\\le 5\\times 10^3$，$s\\le 10^6$。\n- 子任务三（$41$ 分）：无特殊限制。\n- 子任务四（$29$ 分）：无特殊限制。另外，$s,c_j,d_k$ 不一定是偶数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2021] Railway / 瑞士铁路", "background": "Day 2 Problem B.\n\n题面译自 [EGOI2021 railway](https://stats.egoi.org/media/task_description/2021_railway_en.pdf)。", "description": "有一条连接苏黎世和卢加诺的长度为 $s$ 千米的铁路。铁路穿过了美丽的阿尔卑斯山，造就了旅程中壮观的景色。由于一些山口对铁路来说太高了，在线路上修剪了 $t$ 条隧道。第 $i$ 条隧道在距离苏黎世 $a_i$ 千米处开始，在 $b_i$ 千米处结束。（因此，第 $i$ 条隧道的长度为 $b_i-a_i$。）\n\n你有一份两地之间的列车时刻表。从苏黎世到卢加诺有 $m$ 班列车，第 $j$ 班列车在 $c_j$ 分钟发车；从卢加诺到苏黎世有 $n$ 班列车，第 $k$ 班列车在 $d_k$ 分钟发车。所有运行中的列车，无论其方向和是否在隧道内，速度均恒为 $1$ 千米每分钟。路程中没有车站，列车也不会在信号灯处停车。因此，每班列车恰好花费 $s$ 分钟到达终点站。\n\n与铁路的长度相比，列车的长度可以忽略不计，所以在本题中，**请假设每班列车是一个沿铁路移动的点**。\n\n通常情况下，铁路有两条轨道：两个方向各有一条。唯一的例外是隧道。每个隧道只有一条轨道，可以从任何方向通行。\n\n无论何时，只要两班反向运行的列车在隧道外相遇时，他们总是可以安全地经过对方。这包括列车正好在隧道的端点处相遇。但另一方面，如果两班反向运行的列车在隧道内严格$^\\dagger$相遇，就会发生碰撞。\n\n已知隧道信息和列车时刻表，请判断是否会发生碰撞。\n\n$^\\dagger$严格：原文如此（strictly）。", "inputFormat": "第一行四个整数 $s,t,m,n$——铁路长度、隧道个数、从苏黎世和卢加诺发车的列车数量。\n\n第二行 $t$ 个整数 $a_i$——每个隧道的起点。\n\n第三行 $t$ 个整数 $b_i$——每个隧道的终点。\n\n第四行 $m$ 个整数 $c_j$——从苏黎世发车的时间。\n\n第五行 $n$ 个整数 $d_k$——从卢加诺发车的时间。", "outputFormat": "一行，一个为 `YES` 或 `NO` 的字符串，代表是否会发生碰撞。", "hint": "**样例 $1$ 解释**\n\n在长度为 $100$ 千米的铁路上，有两条隧道：距离苏黎世 $20\\sim 30$ 千米处和 $50\\sim 60$ 千米处。唯一一班从苏黎世发车的列车避开了所有从卢加诺发车的列车，如下：\n\n- 与第一班车在距离苏黎世 $5$ 千米处相遇。\n- 与第二班车在两个隧道间相遇。\n- 与第三班车在距离卢加诺 $10$ 千米处相遇。\n- 第四班车在该班车到站后很久才发车。\n\n---\n\n**样例 $2$ 解释**\n\n两班列车在唯一的隧道中间相撞。\n\n---\n\n**样例 $3$ 解释**\n\n两班列车在隧道靠近苏黎世的一端相遇。\n\n---\n\n**样例 $4$ 解释**\n\n两班列车在隧道靠近卢加诺的一端相遇。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le s\\le 10^9$，$0\\le t\\le 10^5$，$0\\le m,n\\le 2\\times 10^3$，$0\\le a_i < s$，$0 < b_i\\le s$，$a_i < b_i$，$b_i < a_{i+1}$，$0\\le c_j,d_k\\le 10^9$，$c_j < c_{j+1}$，$d_k < d_{k+1}$。\n\n在前三个子任务中，保证 $s,c_j,d_k$ 均为偶数。\n\n- 子任务一（$14$ 分）：$t,m,n\\le 100$，$s\\le 5\\times 10^3$。\n- 子任务二（$16$ 分）：$t\\le 5\\times 10^3$，$s\\le 10^6$。\n- 子任务三（$41$ 分）：无特殊限制。\n- 子任务四（$29$ 分）：无特殊限制。另外，$s,c_j,d_k$ 不一定是偶数。", "locale": "zh-CN"}}}
{"pid": "P9316", "type": "P", "difficulty": 7, "samples": [["3 4\n1 3\n2 2\n3 2\n1 3", "4 12"], ["2 0", "4 4"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2021] Double Move / 二选一游戏", "background": "Day 2 Problem D.\n\n题面译自 [EGOI2021 doublemove](https://stats.egoi.org/media/task_description/2021_doublemove_en.pdf)。", "description": "爱丽丝和鲍勃在玩游戏，克莱尔在帮助他们。共有 $n$ 颗石子，编号从 $1$ 到 $n$。游戏分为三个阶段。\n\n在第一阶段，爱丽丝和鲍勃轮流操作，爱丽丝先手。在每次操作中，玩家宣布他们要拿的石头，但不直接说出拿哪一个，而是给出两个选项。两个选项可能是相同的。也有可能说出已经说过的石头。第一阶段不取石子——玩家只是宣布他们在第二阶段的意图。第一阶段在宣布 $n+1$ 次后结束。\n\n下面是 $n=3$ 的第一阶段的例子：\n\n1. 爱丽丝：“我会取走 $1$ 或 $3$”\n2. 鲍勃：“我会取走 $2$ 或 $2$”\n3. 爱丽丝：“我会取走 $3$ 或 $2$”\n4. 鲍勃：“我会取走 $1$ 或 $3$”\n\n在第二阶段，对于 $n+1$ 次宣布的每一个，克莱尔用说“前者”或“后者”的方式从两个选项中选择一个。我们称克莱尔做出的 $n+1$ 次选择的序列为一个*方案*。可以发现，恰好有 $2\\cdot 2\\cdot 2\\cdot\\cdots\\cdot 2=2^{n+1}$ 种可能的方案。（即使在一些宣布中，两个选项是完全相同的，我们认为“前者”“后者”选择不同为不同的方案。）\n\n下面是克莱尔可能选择的 $16$ 种方案之一：\n\n1. “前者”：爱丽丝将取 $1$。\n2. “前者”：鲍勃将取 $2$。\n3. “后者”：爱丽丝将取 $2$。\n4. “前者”：鲍勃将取 $1$。\n\n在第三阶段，爱丽丝和鲍勃根据克莱尔的选择开始取石子。第一个无法做出要求的操作的人——因为那个石子已经被取走——输掉游戏。注意到有 $n$ 个石子和 $n+1$ 次操作，一个玩家必然最终输掉游戏。\n\n在上面的例子中，爱丽丝先取走 $1$。鲍勃接着取走 $2$。爱丽丝希望继续取走 $2$，但它已经被取走了，所以爱丽丝输掉了游戏，鲍勃因此获胜。\n\n你已知整数 $n$，和第一阶段某一时刻的游戏状态：一个长度为 $k$ 的已经做出的宣布序列。这些宣布可以是完全随意的。\n\n从此时开始，爱丽丝和鲍勃会以最优方式玩游戏，也就是说：\n\n无论爱丽丝和鲍勃怎么玩，克莱尔都均匀随机地从 $2^{n+1}$ 种可能的方案中选择一个。爱丽丝和鲍勃知道这一点，因此当以最优方式玩游戏时，他们都尽力最小化他们输的方案数。\n\n假设爱丽丝和鲍勃会按照上面描述的方式继续游戏。请分别求出两个人赢得游戏的方案数。", "inputFormat": "第一行两个整数 $n,k$：石头数和已经做出的宣布数。\n\n接下来 $k$ 行，每行按照顺序描述一次宣布。每行两个整数：两个石头的编号（在 $1\\sim n$ 且不一定不同）。\n\n注意到当 $k < n+1$ 时，下一个做出宣布的玩家由 $k$ 的奇偶性决定。", "outputFormat": "一行，两个整数：爱丽丝赢的方案数、鲍勃赢的方案数，假设他们都按照上面描述的方式继续玩游戏。\n\n注意到这两个整数的和应当为 $2^{n+1}$。", "hint": "**样例 $1$ 解释**\n\n这个样例与【题目描述】中给出的相同。不需要做出更多的宣布了，因此我们只需要计算多少种方案会导致爱丽丝赢，多少种方案会导致鲍勃赢。爱丽丝赢当且仅当克莱尔在第一步选择了 $1$，且在第三步选择了 $3$。其他方案都会导致爱丽丝输。\n\n---\n\n**样例 $2$ 解释**\n\n如果爱丽丝先宣布 $(1,1)$，鲍勃会宣布 $(2,2)$，无论爱丽丝接下来宣布什么，她都会输，因为克莱尔会在第一步选择 $1$，在第二步选择 $2$，第三步就没有剩下的石头给爱丽丝取了。然而，这不是爱丽丝第一步的最优方案：她应该首先宣布 $(1,2)$。然后，无论鲍勃和爱丽丝在后两步如何宣布，他们都会赢 $8$ 种方案中的 $4$ 种。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n\\le 35$，$0\\le k\\le n+1$。\n\n- 子任务一（$15$ 分）：$n\\le 4$。\n- 子任务二（$34$ 分）：$n\\le 10$。\n- 子任务三（$20$ 分）：$n\\le 25$。\n- 子任务四（$10$ 分）：$k=0$。\n- 子任务五（$21$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2021] Double Move / 二选一游戏", "background": "Day 2 Problem D.\n\n题面译自 [EGOI2021 doublemove](https://stats.egoi.org/media/task_description/2021_doublemove_en.pdf)。", "description": "爱丽丝和鲍勃在玩游戏，克莱尔在帮助他们。共有 $n$ 颗石子，编号从 $1$ 到 $n$。游戏分为三个阶段。\n\n在第一阶段，爱丽丝和鲍勃轮流操作，爱丽丝先手。在每次操作中，玩家宣布他们要拿的石头，但不直接说出拿哪一个，而是给出两个选项。两个选项可能是相同的。也有可能说出已经说过的石头。第一阶段不取石子——玩家只是宣布他们在第二阶段的意图。第一阶段在宣布 $n+1$ 次后结束。\n\n下面是 $n=3$ 的第一阶段的例子：\n\n1. 爱丽丝：“我会取走 $1$ 或 $3$”\n2. 鲍勃：“我会取走 $2$ 或 $2$”\n3. 爱丽丝：“我会取走 $3$ 或 $2$”\n4. 鲍勃：“我会取走 $1$ 或 $3$”\n\n在第二阶段，对于 $n+1$ 次宣布的每一个，克莱尔用说“前者”或“后者”的方式从两个选项中选择一个。我们称克莱尔做出的 $n+1$ 次选择的序列为一个*方案*。可以发现，恰好有 $2\\cdot 2\\cdot 2\\cdot\\cdots\\cdot 2=2^{n+1}$ 种可能的方案。（即使在一些宣布中，两个选项是完全相同的，我们认为“前者”“后者”选择不同为不同的方案。）\n\n下面是克莱尔可能选择的 $16$ 种方案之一：\n\n1. “前者”：爱丽丝将取 $1$。\n2. “前者”：鲍勃将取 $2$。\n3. “后者”：爱丽丝将取 $2$。\n4. “前者”：鲍勃将取 $1$。\n\n在第三阶段，爱丽丝和鲍勃根据克莱尔的选择开始取石子。第一个无法做出要求的操作的人——因为那个石子已经被取走——输掉游戏。注意到有 $n$ 个石子和 $n+1$ 次操作，一个玩家必然最终输掉游戏。\n\n在上面的例子中，爱丽丝先取走 $1$。鲍勃接着取走 $2$。爱丽丝希望继续取走 $2$，但它已经被取走了，所以爱丽丝输掉了游戏，鲍勃因此获胜。\n\n你已知整数 $n$，和第一阶段某一时刻的游戏状态：一个长度为 $k$ 的已经做出的宣布序列。这些宣布可以是完全随意的。\n\n从此时开始，爱丽丝和鲍勃会以最优方式玩游戏，也就是说：\n\n无论爱丽丝和鲍勃怎么玩，克莱尔都均匀随机地从 $2^{n+1}$ 种可能的方案中选择一个。爱丽丝和鲍勃知道这一点，因此当以最优方式玩游戏时，他们都尽力最小化他们输的方案数。\n\n假设爱丽丝和鲍勃会按照上面描述的方式继续游戏。请分别求出两个人赢得游戏的方案数。", "inputFormat": "第一行两个整数 $n,k$：石头数和已经做出的宣布数。\n\n接下来 $k$ 行，每行按照顺序描述一次宣布。每行两个整数：两个石头的编号（在 $1\\sim n$ 且不一定不同）。\n\n注意到当 $k < n+1$ 时，下一个做出宣布的玩家由 $k$ 的奇偶性决定。", "outputFormat": "一行，两个整数：爱丽丝赢的方案数、鲍勃赢的方案数，假设他们都按照上面描述的方式继续玩游戏。\n\n注意到这两个整数的和应当为 $2^{n+1}$。", "hint": "**样例 $1$ 解释**\n\n这个样例与【题目描述】中给出的相同。不需要做出更多的宣布了，因此我们只需要计算多少种方案会导致爱丽丝赢，多少种方案会导致鲍勃赢。爱丽丝赢当且仅当克莱尔在第一步选择了 $1$，且在第三步选择了 $3$。其他方案都会导致爱丽丝输。\n\n---\n\n**样例 $2$ 解释**\n\n如果爱丽丝先宣布 $(1,1)$，鲍勃会宣布 $(2,2)$，无论爱丽丝接下来宣布什么，她都会输，因为克莱尔会在第一步选择 $1$，在第二步选择 $2$，第三步就没有剩下的石头给爱丽丝取了。然而，这不是爱丽丝第一步的最优方案：她应该首先宣布 $(1,2)$。然后，无论鲍勃和爱丽丝在后两步如何宣布，他们都会赢 $8$ 种方案中的 $4$ 种。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n\\le 35$，$0\\le k\\le n+1$。\n\n- 子任务一（$15$ 分）：$n\\le 4$。\n- 子任务二（$34$ 分）：$n\\le 10$。\n- 子任务三（$20$ 分）：$n\\le 25$。\n- 子任务四（$10$ 分）：$k=0$。\n- 子任务五（$21$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9317", "type": "P", "difficulty": 3, "samples": [["2\n4\n0 3 0 3\n5\n4 1 0 2 0", "4\n10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2022] SubsetMex / 子集 mex", "background": "Day 1 Problem A.\n\n题面译自 [EGOI2022 subsetmex](https://stats.egoi.org/media/task_description/2022_subsetmex_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "一个*可重集*是元素可以重复出现的集合。例如，$\\{0,0,1,2,2,5,5,5,8\\}$ 是一个可重集。\n\n给定一个可重集 $S$，值域为 $\\N$，和一个目标自然数 $n$（$n\\notin S$），你的目标是通过重复进行若干次以下的操作，使得 $n\\in S$：\n\n1. 选择一个（可以为空的）子集 $T\\subseteq S$，其中 $T$ 不包含重复元素。\n2. 在 $S$ 中删除 $T$ 中的元素。（重复元素只删除一个。）\n3. 将 $\\operatorname{mex}(T)$ 插入 $S$，其中 $\\operatorname{mex}(T)$ 是最小的不在 $T$ 中的自然数。$\\operatorname{mex}$ 意味着“最小不包含”的值。\n\n你需要求出最少的能使得 $n\\in S$ 的操作次数。\n\n由于 $|S|$ 可能很大，它将以一个大小为 $n$ 的列表 $(f_0,\\ldots f_{n-1})$ 的形式给出，其中 $f_i$ 代表 $i$ 在 $S$ 中的出现次数。（请回忆 $n$ 是我们想要插入 $S$ 的元素。）", "inputFormat": "第一行一个整数 $t$——数据组数。之后每两行描述一组数据：\n\n- 每组数据的第一行一个整数 $n$，表示要插入 $S$ 的元素。\n- 每组数据的第二行 $n$ 个整数 $f_0,f_1,\\ldots,f_{n-1}$，按照上述方式描述了集合 $S$。", "outputFormat": "对于每组数据，输出一行一个整数，表示最少操作次数。", "hint": "**样例 $1$ 解释**\n\n初始 $S=\\{1,1,1,3,3,3\\}$，目标是使得 $4\\in S$。我们如下操作：\n\n1. 令 $T=\\varnothing$，则 $S=\\{0,1,1,1,3,3,3\\}$。\n2. 令 $T=\\{0,1,3\\}$，则 $S=\\{1,1,2,3,3\\}$。\n3. 令 $T=\\{1\\}$，则 $S=\\{0,1,2,3,3\\}$。\n4. 令 $T=\\{0,1,2,3\\}$，则 $S=\\{3,4\\}$。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le t\\le 200$，$1\\le n\\le 50$，$0\\le f_i\\le 10^{16}$。\n\n- 子任务一（$5$ 分）：$n\\le 2$。\n- 子任务二（$17$ 分）：$n\\le 20$。\n- 子任务三（$7$ 分）：$f_i=0$。\n- 子任务四（$9$ 分）：$f_i\\le 1$。\n- 子任务五（$20$ 分）：$f_i\\le 2\\times 10^3$。\n- 子任务六（$9$ 分）：$f_0\\le 10^{16}$ 且 $\\forall j\\ne 0,f_j=0$。\n- 子任务七（$10$ 分）：$\\exists i,f_i\\le 10^{16}$ 且 $\\forall j\\ne i,f_j=0$。\n- 子任务八（$23$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2022] SubsetMex / 子集 mex", "background": "Day 1 Problem A.\n\n题面译自 [EGOI2022 subsetmex](https://stats.egoi.org/media/task_description/2022_subsetmex_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "一个*可重集*是元素可以重复出现的集合。例如，$\\{0,0,1,2,2,5,5,5,8\\}$ 是一个可重集。\n\n给定一个可重集 $S$，值域为 $\\N$，和一个目标自然数 $n$（$n\\notin S$），你的目标是通过重复进行若干次以下的操作，使得 $n\\in S$：\n\n1. 选择一个（可以为空的）子集 $T\\subseteq S$，其中 $T$ 不包含重复元素。\n2. 在 $S$ 中删除 $T$ 中的元素。（重复元素只删除一个。）\n3. 将 $\\operatorname{mex}(T)$ 插入 $S$，其中 $\\operatorname{mex}(T)$ 是最小的不在 $T$ 中的自然数。$\\operatorname{mex}$ 意味着“最小不包含”的值。\n\n你需要求出最少的能使得 $n\\in S$ 的操作次数。\n\n由于 $|S|$ 可能很大，它将以一个大小为 $n$ 的列表 $(f_0,\\ldots f_{n-1})$ 的形式给出，其中 $f_i$ 代表 $i$ 在 $S$ 中的出现次数。（请回忆 $n$ 是我们想要插入 $S$ 的元素。）", "inputFormat": "第一行一个整数 $t$——数据组数。之后每两行描述一组数据：\n\n- 每组数据的第一行一个整数 $n$，表示要插入 $S$ 的元素。\n- 每组数据的第二行 $n$ 个整数 $f_0,f_1,\\ldots,f_{n-1}$，按照上述方式描述了集合 $S$。", "outputFormat": "对于每组数据，输出一行一个整数，表示最少操作次数。", "hint": "**样例 $1$ 解释**\n\n初始 $S=\\{1,1,1,3,3,3\\}$，目标是使得 $4\\in S$。我们如下操作：\n\n1. 令 $T=\\varnothing$，则 $S=\\{0,1,1,1,3,3,3\\}$。\n2. 令 $T=\\{0,1,3\\}$，则 $S=\\{1,1,2,3,3\\}$。\n3. 令 $T=\\{1\\}$，则 $S=\\{0,1,2,3,3\\}$。\n4. 令 $T=\\{0,1,2,3\\}$，则 $S=\\{3,4\\}$。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le t\\le 200$，$1\\le n\\le 50$，$0\\le f_i\\le 10^{16}$。\n\n- 子任务一（$5$ 分）：$n\\le 2$。\n- 子任务二（$17$ 分）：$n\\le 20$。\n- 子任务三（$7$ 分）：$f_i=0$。\n- 子任务四（$9$ 分）：$f_i\\le 1$。\n- 子任务五（$20$ 分）：$f_i\\le 2\\times 10^3$。\n- 子任务六（$9$ 分）：$f_0\\le 10^{16}$ 且 $\\forall j\\ne 0,f_j=0$。\n- 子任务七（$10$ 分）：$\\exists i,f_i\\le 10^{16}$ 且 $\\forall j\\ne i,f_j=0$。\n- 子任务八（$23$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9318", "type": "P", "difficulty": 6, "samples": [["2 2", "3"], ["3 3", "12"], ["5 7", "1436232"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2022] Lego Wall / 乐高墙", "background": "Day 1 Problem B.\n\n题面译自 [EGOI2022 legowall](https://stats.egoi.org/media/task_description/2022_legowall_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)\n", "description": "有两种乐高积木，大小分别为 $1\\times 1\\times 1$ 和 $2\\times 1\\times 1$（宽、高、长）。两种积木你都有无限个，每种积木的所有积木块没有任何区别。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1y2rwj59.png)\n\n一个积木块总是以正确的方向使用。四周的面是用同一种材料制成的，除了大小以外没有区别。\n\n我们称两个积木块**锁死**，当且仅当一个块在另一个块的正上方。称两个积木块 $b_0$ 和 $b_k$ **连通**，当且仅当存在一个积木块序列 $b_0,b_1,\\ldots,b_k$，使得任意相邻积木块 $b_{i-1}$ 和 $b_i$ 锁死。我们称一组积木块**连通**，当且仅当组内的每一对积木块都连通。\n\n你希望搭建一个大小为 $w\\times h\\times 1$ 的积木墙，使得这面墙**没有洞**且**连通**。以下是 $4\\times 3\\times 1$ 的积木墙的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ehrcz8d7.png)\n\n另一方面，下面的 $4\\times 3\\times 1$ 的积木墙不连通，因此不被需要：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/twsqgt8x.png)\n\n有多少种搭建**没有洞**且**连通**的积木墙的方案呢？答案可能很大，请输出它对 $10^9+7$ 取模的结果。\n\n注意一个积木墙的镜像版本（旋转 $180^\\circ$）和原来的版本被认为不同，除非他们看起来一模一样。", "inputFormat": "一行，两个整数 $w,h$——积木墙的宽度和高度。", "outputFormat": "一行，一个整数，表示方案数对 $10^9+7$ 取模的结果。", "hint": "**样例 $1$ 解释**\n\n三种方案如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yi7xhw9f.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le w\\le 2.5\\times 10^5$，$2\\le h\\le 2.5\\times 10^5$，$w\\times h\\le 5\\times 10^5$。\n\n- 子任务一（$14$ 分）：$w=2$。\n- 子任务二（$12$ 分）：$h=2$。\n- 子任务三（$18$ 分）：$w,h\\le 100$。\n- 子任务四（$30$ 分）：$w\\le 700$。\n- 子任务五（$20$ 分）：$h\\le 700$。\n- 子任务六（$6$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2022] Lego Wall / 乐高墙", "background": "Day 1 Problem B.\n\n题面译自 [EGOI2022 legowall](https://stats.egoi.org/media/task_description/2022_legowall_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)\n", "description": "有两种乐高积木，大小分别为 $1\\times 1\\times 1$ 和 $2\\times 1\\times 1$（宽、高、长）。两种积木你都有无限个，每种积木的所有积木块没有任何区别。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1y2rwj59.png)\n\n一个积木块总是以正确的方向使用。四周的面是用同一种材料制成的，除了大小以外没有区别。\n\n我们称两个积木块**锁死**，当且仅当一个块在另一个块的正上方。称两个积木块 $b_0$ 和 $b_k$ **连通**，当且仅当存在一个积木块序列 $b_0,b_1,\\ldots,b_k$，使得任意相邻积木块 $b_{i-1}$ 和 $b_i$ 锁死。我们称一组积木块**连通**，当且仅当组内的每一对积木块都连通。\n\n你希望搭建一个大小为 $w\\times h\\times 1$ 的积木墙，使得这面墙**没有洞**且**连通**。以下是 $4\\times 3\\times 1$ 的积木墙的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ehrcz8d7.png)\n\n另一方面，下面的 $4\\times 3\\times 1$ 的积木墙不连通，因此不被需要：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/twsqgt8x.png)\n\n有多少种搭建**没有洞**且**连通**的积木墙的方案呢？答案可能很大，请输出它对 $10^9+7$ 取模的结果。\n\n注意一个积木墙的镜像版本（旋转 $180^\\circ$）和原来的版本被认为不同，除非他们看起来一模一样。", "inputFormat": "一行，两个整数 $w,h$——积木墙的宽度和高度。", "outputFormat": "一行，一个整数，表示方案数对 $10^9+7$ 取模的结果。", "hint": "**样例 $1$ 解释**\n\n三种方案如图所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/yi7xhw9f.png)\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le w\\le 2.5\\times 10^5$，$2\\le h\\le 2.5\\times 10^5$，$w\\times h\\le 5\\times 10^5$。\n\n- 子任务一（$14$ 分）：$w=2$。\n- 子任务二（$12$ 分）：$h=2$。\n- 子任务三（$18$ 分）：$w,h\\le 100$。\n- 子任务四（$30$ 分）：$w\\le 700$。\n- 子任务五（$20$ 分）：$h\\le 700$。\n- 子任务六（$6$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9319", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "交互题", "Special Judge", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2022] Social Engineering / 社会工程", "background": "Day 1 Problem C.\n\n题面译自 [EGOI2022 socialengineering](https://stats.egoi.org/media/task_description/2022_socialengineering_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)\n\n**本题是一道 Grader 交互题。**\n\n本题只支持 C++ 提交，提交时不需要包含 `socialengineering.h` 头文件，但需要在代码中包含 `GetMove` 和 `MakeMove` 函数的声明（见【交互方式】部分）。\n\n请使用 C++14、C++17 等语言，**而不是 C++14 (GCC 9)**，因为一些未知原因这个语言下 SPJ 会 CE。\n\n感谢 @[FFTotoro](https://www.luogu.com.cn/user/556366) 提供交互库和测试数据。", "description": "一个社交网络是一个 $n$ 点 $m$ 边的无向连通图组成，其中每个点代表一个人，如果两个人之间有边相连，他们就是朋友。\n\n玛丽亚是这个社交网络的成员。她喜欢以各种事情挑战她的朋友。这意味着，她首先执行一些简单的任务，然后挑战她的一个朋友做同样的事情。这个朋友随后会挑战他的一个朋友，而被挑战的朋友会接着挑战他的另一个朋友，以此类推。同一个人可能会被挑战多次，但每一个无序朋友对最多进行一次挑战。（一旦 A 挑战了 B，那么 A 和 B 都不能再次挑战对方。）换句话说，挑战可以看作图中的一条路径，其中一条边至多经过一次。\n\n如果轮到一个人，而他又不能挑战任何朋友，那么这个人就输了。挑战总是由玛丽亚开始，她很少输。现在其他 $n-1$ 人决定合作，以使玛丽亚输掉下一次挑战，请你帮助他们完成目标。\n\n---\n\n**交互方式**\n\n你必须实现一个函数：\n\n```cpp\nvoid SocialEngineering(int n, int m, vector<pair<int,int>> edges);\n```\n\n这个函数在 $n$ 点 $m$ 边的图上玩该游戏。这个函数会被交互库调用恰好一次。列表 `edges` 包含恰好 $m$ 对整数 $(u,v)$，表示有一条连接点 $u$ 和点 $v$ 的边。节点编号从 $1$ 到 $n$。玛丽亚永远是节点 $1$。你的函数可以调用以下函数：\n\n```cpp\nint GetMove();\n```\n\n这个函数应当在玛丽亚的回合被调用，例如游戏的最开始。如果你在不是玛丽亚的回合调用这个函数，你会 WA。这个函数可以返回以下值之一：\n\n- 一个整数 $v$，其中 $2\\le v\\le n$。这意味着玛丽亚挑战编号为 $v$ 的人。保证这一步一定合法。\n- $0$，如果玛丽亚认输。当玛丽亚没有合法操作时，她就会认输。当这发生时，你的程序应当使 `SocialEngineering` 函数返回，然后你会 AC。\n\n```cpp\nvoid MakeMove(int v);\n```\n\n这个函数应当在不是玛丽亚的回合被调用。这意味着当前回合的人挑战第 $v$ 个人。如果这一步不合法，或者在玛丽亚的回合调用这个函数，你会 WA。如果在游戏开始时，玛丽亚有必胜策略，你的程序应当在第一次调用 `GetMove()` 前使 `SocialEngineering` 函数返回，然后你会 AC。", "inputFormat": "见【交互方式】部分。", "outputFormat": "见【交互方式】部分。", "hint": "**样例交互过程 $1$**\n\n|你的操作|交互库的操作|解释说明|\n|:-|:-|:-|\n||`SocialEngineering(5, 6, {{1,4}, {1,5}, {2,4}, {2,5}, {2,3}, {3,5}})`|`SocialEngineering` 被调用，参数为一个 $5$ 点 $6$ 边的图。|\n|`GetMove()`|返回 $4$|玛丽亚挑战第 $4$ 个人。|\n|`MakeMove(2)`||第 $4$ 个人挑战第 $2$ 个人。|\n|`MakeMove(5)`||第 $2$ 个人挑战第 $5$ 个人。|\n|`MakeMove(1)`||第 $5$ 个人挑战玛丽亚。|\n|`GetMove()`|返回 $0$|玛丽亚没有合法操作，所以她认输。|\n|返回||你赢了游戏，应当使 `SocialEngineering` 函数返回。|\n\n---\n\n**样例交互过程 $2$**\n\n|你的操作|交互库的操作|解释说明|\n|:-|:-|:-|\n||`SocialEngineering(5, 1, {{1,2}})`|`SocialEngineering` 被调用，参数为一个 $2$ 点 $1$ 边的图。|\n|返回||玛丽亚有必胜策略，你的程序应当在未调用 `GetMove()` 前使 `SocialEngineering` 函数返回以认输。|\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le n\\le 2\\times 10^5$，$1\\le m\\le 4\\times 10^5$。保证图连通，每对无序点对至多作为边出现一次，每条边连接两个不同节点。\n\n当玛丽亚有必胜策略时，她会完美地执行必胜策略。如果她没有必胜策略，她会试图以各种聪明的手段引诱你的程序犯错误。除子任务三外，只有当玛丽亚没有合法操作时，她才会认输。\n\n- 子任务一（$15$ 分）：$n,m\\le 10$。\n- 子任务二（$15$ 分）：除玛丽亚外，每个人至多有 $2$ 个朋友。\n- 子任务三（$20$ 分）：除非玛丽亚有必胜策略，否则她会立即认输。\n- 子任务四（$25$ 分）：$n,m\\le 100$。\n- 子任务五（$25$ 分）：无特殊限制。\n\n---\n\n感谢 @[FFTotoro](https://www.luogu.com.cn/user/556366) 提供交互库和测试数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2022] Social Engineering / 社会工程", "background": "Day 1 Problem C.\n\n题面译自 [EGOI2022 socialengineering](https://stats.egoi.org/media/task_description/2022_socialengineering_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)\n\n**本题是一道 Grader 交互题。**\n\n本题只支持 C++ 提交，提交时不需要包含 `socialengineering.h` 头文件，但需要在代码中包含 `GetMove` 和 `MakeMove` 函数的声明（见【交互方式】部分）。\n\n请使用 C++14、C++17 等语言，**而不是 C++14 (GCC 9)**，因为一些未知原因这个语言下 SPJ 会 CE。\n\n感谢 @[FFTotoro](https://www.luogu.com.cn/user/556366) 提供交互库和测试数据。", "description": "一个社交网络是一个 $n$ 点 $m$ 边的无向连通图组成，其中每个点代表一个人，如果两个人之间有边相连，他们就是朋友。\n\n玛丽亚是这个社交网络的成员。她喜欢以各种事情挑战她的朋友。这意味着，她首先执行一些简单的任务，然后挑战她的一个朋友做同样的事情。这个朋友随后会挑战他的一个朋友，而被挑战的朋友会接着挑战他的另一个朋友，以此类推。同一个人可能会被挑战多次，但每一个无序朋友对最多进行一次挑战。（一旦 A 挑战了 B，那么 A 和 B 都不能再次挑战对方。）换句话说，挑战可以看作图中的一条路径，其中一条边至多经过一次。\n\n如果轮到一个人，而他又不能挑战任何朋友，那么这个人就输了。挑战总是由玛丽亚开始，她很少输。现在其他 $n-1$ 人决定合作，以使玛丽亚输掉下一次挑战，请你帮助他们完成目标。\n\n---\n\n**交互方式**\n\n你必须实现一个函数：\n\n```cpp\nvoid SocialEngineering(int n, int m, vector<pair<int,int>> edges);\n```\n\n这个函数在 $n$ 点 $m$ 边的图上玩该游戏。这个函数会被交互库调用恰好一次。列表 `edges` 包含恰好 $m$ 对整数 $(u,v)$，表示有一条连接点 $u$ 和点 $v$ 的边。节点编号从 $1$ 到 $n$。玛丽亚永远是节点 $1$。你的函数可以调用以下函数：\n\n```cpp\nint GetMove();\n```\n\n这个函数应当在玛丽亚的回合被调用，例如游戏的最开始。如果你在不是玛丽亚的回合调用这个函数，你会 WA。这个函数可以返回以下值之一：\n\n- 一个整数 $v$，其中 $2\\le v\\le n$。这意味着玛丽亚挑战编号为 $v$ 的人。保证这一步一定合法。\n- $0$，如果玛丽亚认输。当玛丽亚没有合法操作时，她就会认输。当这发生时，你的程序应当使 `SocialEngineering` 函数返回，然后你会 AC。\n\n```cpp\nvoid MakeMove(int v);\n```\n\n这个函数应当在不是玛丽亚的回合被调用。这意味着当前回合的人挑战第 $v$ 个人。如果这一步不合法，或者在玛丽亚的回合调用这个函数，你会 WA。如果在游戏开始时，玛丽亚有必胜策略，你的程序应当在第一次调用 `GetMove()` 前使 `SocialEngineering` 函数返回，然后你会 AC。", "inputFormat": "见【交互方式】部分。", "outputFormat": "见【交互方式】部分。", "hint": "**样例交互过程 $1$**\n\n|你的操作|交互库的操作|解释说明|\n|:-|:-|:-|\n||`SocialEngineering(5, 6, {{1,4}, {1,5}, {2,4}, {2,5}, {2,3}, {3,5}})`|`SocialEngineering` 被调用，参数为一个 $5$ 点 $6$ 边的图。|\n|`GetMove()`|返回 $4$|玛丽亚挑战第 $4$ 个人。|\n|`MakeMove(2)`||第 $4$ 个人挑战第 $2$ 个人。|\n|`MakeMove(5)`||第 $2$ 个人挑战第 $5$ 个人。|\n|`MakeMove(1)`||第 $5$ 个人挑战玛丽亚。|\n|`GetMove()`|返回 $0$|玛丽亚没有合法操作，所以她认输。|\n|返回||你赢了游戏，应当使 `SocialEngineering` 函数返回。|\n\n---\n\n**样例交互过程 $2$**\n\n|你的操作|交互库的操作|解释说明|\n|:-|:-|:-|\n||`SocialEngineering(5, 1, {{1,2}})`|`SocialEngineering` 被调用，参数为一个 $2$ 点 $1$ 边的图。|\n|返回||玛丽亚有必胜策略，你的程序应当在未调用 `GetMove()` 前使 `SocialEngineering` 函数返回以认输。|\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le n\\le 2\\times 10^5$，$1\\le m\\le 4\\times 10^5$。保证图连通，每对无序点对至多作为边出现一次，每条边连接两个不同节点。\n\n当玛丽亚有必胜策略时，她会完美地执行必胜策略。如果她没有必胜策略，她会试图以各种聪明的手段引诱你的程序犯错误。除子任务三外，只有当玛丽亚没有合法操作时，她才会认输。\n\n- 子任务一（$15$ 分）：$n,m\\le 10$。\n- 子任务二（$15$ 分）：除玛丽亚外，每个人至多有 $2$ 个朋友。\n- 子任务三（$20$ 分）：除非玛丽亚有必胜策略，否则她会立即认输。\n- 子任务四（$25$ 分）：$n,m\\le 100$。\n- 子任务五（$25$ 分）：无特殊限制。\n\n---\n\n感谢 @[FFTotoro](https://www.luogu.com.cn/user/556366) 提供交互库和测试数据。", "locale": "zh-CN"}}}
{"pid": "P9320", "type": "P", "difficulty": 6, "samples": [["8 4 11\n1 4 8 1\n6 4\n6 3\n3 7\n6 5\n5 1\n1 2\n1 8\nq 4\nt 3 4 5\nt 2 2 7\nq 4\ne 5 10\ne 1 5\nq 4\nt 1 1 5\nt 2 2 1\nq 1\nq 2", "0\n-1\n9\n4\n-7"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2022] Tourists / 乌托邦旅行团", "background": "Day 1 Problem D.\n\n题面译自 [EGOI2022 tourists](https://stats.egoi.org/media/task_description/2022_tourists_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "乌托邦有 $n$ 个城市，编号从 $1$ 到 $n$，还有 $n-1$ 条双向公路连接这些城市。只需使用这些道路就可以在每对城市之间旅行。由于乌托邦非常美丽，目前有 $m$ 个游客，编号从 $1$ 到 $m$，正在访问这个国家。最初，第 $i$ 个游客正在访问城市 $a_i$。多个游客可能在同一个城市；也就是说，对于 $i\\ne j$，可能有 $a_i=a_j$。\n\n每个游客都有一个关于他们目前在乌托邦的游览有多有趣的评分，用一个数字表示，初始的评分均为 $0$。为了鼓励游客进一步游览，乌托邦政$ $府希望通过在选定的城市组织活动来提高游客的评分。当一个活动在城市 $c$ 举行时，所有目前在那里的游客的评分将增加 $d$，其中 $d$ 是一个取决于活动类型的值。\n\n一些游客计划在乌托邦逗留期间在各城市之间旅行。尽管从一个城市到另一个城市几乎不需要花时间（由于高效的乌托邦道路），但它仍然是一种不便，从而导致游客评分的降低。具体地，一个游客如果走了一条由 $k$ 条道路组成的路径，他们的评分会降低 $k$（游客总是会选择两个城市之间最短的路径）。\n\n乌托邦政$ $府要求你记录下游客们旅行时的评分。作为要求的一部分，你将得到 $q$ 个查询作为输入的一部分。你应该按照输入的顺序回答所有的询问。", "inputFormat": "第一行三个整数 $n,m,q$——城市数、游客数、询问数。\n\n第二行 $m$ 个整数 $a_1,a_2,\\ldots,a_m$，其中 $a_i$ 为第 $i$ 个游客初始所在的城市。\n\n接下来 $n-1$ 行，每行两个整数 $v,w$，表示 $v,w$ 之间有一条双向边。\n\n接下来 $q$ 行，每行描述一个询问。每行的格式是以下三种之一：\n\n- 首先一个字母 `t`，接着三个整数 $f_i,g_i,c_i$：所有编号在 $[f_i,g_i]$ 的游客都前往城市 $c_i$。\n- 首先一个字母 `e`，接着两个整数 $c_i,d_i$：城市 $c_i$ 举办一个给评分增加 $d$ 的活动。\n- 首先一个字母 `q`，接着一个整数 $v_i$：询问现在游客 $v_i$ 的评分。\n\n保证输入中至少有一个操作 `q`。", "outputFormat": "对于所有操作 `q` 输出一行一个整数。", "hint": "**数据范围**\n\n对于全部数据，$2\\le n\\le 2\\times 10^5$，$1\\le m,q\\le 2\\times 10^5$，$1\\le a_i\\le n$，保证输入构成一棵树。操作 `t` 中，$1\\le f_i\\le g_i\\le m$，$1\\le c_i\\le n$。操作 `e` 中，$1\\le c_i\\le n$，$0\\le d_i\\le 10^9$。操作 `q` 中，$1\\le v_i\\le m$。\n\n- 子任务一（$10$ 分）：$n,m,q\\le 200$。\n- 子任务二（$15$ 分）：$n,m,q\\le 2\\times 10^3$。\n- 子任务三（$25$ 分）：$m,q\\le 2\\times 10^3$。\n- 子任务四（$25$ 分）：不存在操作 `e`。\n- 子任务五（$25$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2022] Tourists / 乌托邦旅行团", "background": "Day 1 Problem D.\n\n题面译自 [EGOI2022 tourists](https://stats.egoi.org/media/task_description/2022_tourists_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "乌托邦有 $n$ 个城市，编号从 $1$ 到 $n$，还有 $n-1$ 条双向公路连接这些城市。只需使用这些道路就可以在每对城市之间旅行。由于乌托邦非常美丽，目前有 $m$ 个游客，编号从 $1$ 到 $m$，正在访问这个国家。最初，第 $i$ 个游客正在访问城市 $a_i$。多个游客可能在同一个城市；也就是说，对于 $i\\ne j$，可能有 $a_i=a_j$。\n\n每个游客都有一个关于他们目前在乌托邦的游览有多有趣的评分，用一个数字表示，初始的评分均为 $0$。为了鼓励游客进一步游览，乌托邦政$ $府希望通过在选定的城市组织活动来提高游客的评分。当一个活动在城市 $c$ 举行时，所有目前在那里的游客的评分将增加 $d$，其中 $d$ 是一个取决于活动类型的值。\n\n一些游客计划在乌托邦逗留期间在各城市之间旅行。尽管从一个城市到另一个城市几乎不需要花时间（由于高效的乌托邦道路），但它仍然是一种不便，从而导致游客评分的降低。具体地，一个游客如果走了一条由 $k$ 条道路组成的路径，他们的评分会降低 $k$（游客总是会选择两个城市之间最短的路径）。\n\n乌托邦政$ $府要求你记录下游客们旅行时的评分。作为要求的一部分，你将得到 $q$ 个查询作为输入的一部分。你应该按照输入的顺序回答所有的询问。", "inputFormat": "第一行三个整数 $n,m,q$——城市数、游客数、询问数。\n\n第二行 $m$ 个整数 $a_1,a_2,\\ldots,a_m$，其中 $a_i$ 为第 $i$ 个游客初始所在的城市。\n\n接下来 $n-1$ 行，每行两个整数 $v,w$，表示 $v,w$ 之间有一条双向边。\n\n接下来 $q$ 行，每行描述一个询问。每行的格式是以下三种之一：\n\n- 首先一个字母 `t`，接着三个整数 $f_i,g_i,c_i$：所有编号在 $[f_i,g_i]$ 的游客都前往城市 $c_i$。\n- 首先一个字母 `e`，接着两个整数 $c_i,d_i$：城市 $c_i$ 举办一个给评分增加 $d$ 的活动。\n- 首先一个字母 `q`，接着一个整数 $v_i$：询问现在游客 $v_i$ 的评分。\n\n保证输入中至少有一个操作 `q`。", "outputFormat": "对于所有操作 `q` 输出一行一个整数。", "hint": "**数据范围**\n\n对于全部数据，$2\\le n\\le 2\\times 10^5$，$1\\le m,q\\le 2\\times 10^5$，$1\\le a_i\\le n$，保证输入构成一棵树。操作 `t` 中，$1\\le f_i\\le g_i\\le m$，$1\\le c_i\\le n$。操作 `e` 中，$1\\le c_i\\le n$，$0\\le d_i\\le 10^9$。操作 `q` 中，$1\\le v_i\\le m$。\n\n- 子任务一（$10$ 分）：$n,m,q\\le 200$。\n- 子任务二（$15$ 分）：$n,m,q\\le 2\\times 10^3$。\n- 子任务三（$25$ 分）：$m,q\\le 2\\times 10^3$。\n- 子任务四（$25$ 分）：不存在操作 `e`。\n- 子任务五（$25$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9321", "type": "P", "difficulty": 3, "samples": [["5 4\n20 12 10 15 18\n3 4\n4 1\n1 3\n4 2", "11 10 10 9 8"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2022] Data Centers / 数据中心", "background": "Day 2 Problem A.\n\n题面译自 [EGOI2022 datacenters](https://stats.egoi.org/media/task_description/2022_datacenters_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "贡卡软件（贡软）是一家互联网公司，经营许多服务，在全球有 $n$ 个数据中心。每个数据中心都有一些可用的机器。出于安全和冗余的原因，每个服务都有一个或多个副本同时运行。每个副本在一个不同的数据中心运行，并需要一些机器来运行。一个服务的所有副本需要相同数量的机器。\n\n当贡软计划推出一项需要 $c_i$ 个副本，每个副本在 $m$ 台机器上运行的新的服务 $i$ 时，它按照当前可用机器对数据中心降序排序，然后在前 $c_i$ 个数据中心各使用 $m$ 台机器。\n\n请求出在推出 $s$ 个服务后，每个数据中心剩余的机器数量。", "inputFormat": "第一行两个整数 $n,s$，表示数据中心数和服务数。\n\n第二行 $n$ 个整数 $a_i$，表示每个数据中心初始可用机器数。\n\n接下来 $s$ 行，每行两个整数 $m_i,c_i$，表示需要的机器数、副本数。", "outputFormat": "一行，**降序排列**的 $n$ 个整数，表示每个数据中心剩余的机器数。", "hint": "**样例解释**\n\n|步骤|剩余机器数|操作|\n|:-|:-|:-|\n|初始|$[20,12,10,15,18]$||\n|服务 $1$ 前|$[20,18,15,12,10]$|数据中心降序排序|\n|服务 $1$ 后|$[17,15,12,9,10]$|前 $4$ 个数据中心各使用 $3$ 台机器|\n|服务 $2$ 前|$[17,15,12,10,9]$|数据中心降序排序|\n|服务 $2$ 后|$[13,15,12,10,9]$|第 $1$ 个数据中心使用 $4$ 台机器|\n|服务 $3$ 前|$[15,13,12,10,9]$|数据中心降序排序|\n|服务 $3$ 后|$[14,12,11,10,9]$|前 $3$ 个数据中心各使用 $1$ 台机器|\n|服务 $4$ 前|$[14,12,11,10,9]$|数据中心降序排序|\n|服务 $4$ 后|$[10,8,11,10,9]$|前 $2$ 个数据中心各使用 $4$ 台机器|\n|结束|$[11,10,10,9,8]$|数据中心降序排序|\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n\\le 10^5$，$0\\le s\\le 5\\times 10^3$，$0\\le a_i\\le 10^9$，$1\\le m_i\\le 10^9$，$1\\le c_i\\le n$，保证任意时刻任意数据中心可用机器数非负。\n\n- 子任务一（$12$ 分）：$n\\le 100$，$s=0$。\n- 子任务二（$12$ 分）：$n\\le 100$，$s\\le 10$。\n- 子任务三（$9$ 分）：$n\\le 5\\times 10^4$，$s\\le 100$。\n- 子任务四（$26$ 分）：$a_i\\le 10^3$。\n- 子任务五（$18$ 分）：$c_i=1$。\n- 子任务六（$23$ 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2022] Data Centers / 数据中心", "background": "Day 2 Problem A.\n\n题面译自 [EGOI2022 datacenters](https://stats.egoi.org/media/task_description/2022_datacenters_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "贡卡软件（贡软）是一家互联网公司，经营许多服务，在全球有 $n$ 个数据中心。每个数据中心都有一些可用的机器。出于安全和冗余的原因，每个服务都有一个或多个副本同时运行。每个副本在一个不同的数据中心运行，并需要一些机器来运行。一个服务的所有副本需要相同数量的机器。\n\n当贡软计划推出一项需要 $c_i$ 个副本，每个副本在 $m$ 台机器上运行的新的服务 $i$ 时，它按照当前可用机器对数据中心降序排序，然后在前 $c_i$ 个数据中心各使用 $m$ 台机器。\n\n请求出在推出 $s$ 个服务后，每个数据中心剩余的机器数量。", "inputFormat": "第一行两个整数 $n,s$，表示数据中心数和服务数。\n\n第二行 $n$ 个整数 $a_i$，表示每个数据中心初始可用机器数。\n\n接下来 $s$ 行，每行两个整数 $m_i,c_i$，表示需要的机器数、副本数。", "outputFormat": "一行，**降序排列**的 $n$ 个整数，表示每个数据中心剩余的机器数。", "hint": "**样例解释**\n\n|步骤|剩余机器数|操作|\n|:-|:-|:-|\n|初始|$[20,12,10,15,18]$||\n|服务 $1$ 前|$[20,18,15,12,10]$|数据中心降序排序|\n|服务 $1$ 后|$[17,15,12,9,10]$|前 $4$ 个数据中心各使用 $3$ 台机器|\n|服务 $2$ 前|$[17,15,12,10,9]$|数据中心降序排序|\n|服务 $2$ 后|$[13,15,12,10,9]$|第 $1$ 个数据中心使用 $4$ 台机器|\n|服务 $3$ 前|$[15,13,12,10,9]$|数据中心降序排序|\n|服务 $3$ 后|$[14,12,11,10,9]$|前 $3$ 个数据中心各使用 $1$ 台机器|\n|服务 $4$ 前|$[14,12,11,10,9]$|数据中心降序排序|\n|服务 $4$ 后|$[10,8,11,10,9]$|前 $2$ 个数据中心各使用 $4$ 台机器|\n|结束|$[11,10,10,9,8]$|数据中心降序排序|\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le n\\le 10^5$，$0\\le s\\le 5\\times 10^3$，$0\\le a_i\\le 10^9$，$1\\le m_i\\le 10^9$，$1\\le c_i\\le n$，保证任意时刻任意数据中心可用机器数非负。\n\n- 子任务一（$12$ 分）：$n\\le 100$，$s=0$。\n- 子任务二（$12$ 分）：$n\\le 100$，$s\\le 10$。\n- 子任务三（$9$ 分）：$n\\le 5\\times 10^4$，$s\\le 100$。\n- 子任务四（$26$ 分）：$a_i\\le 10^3$。\n- 子任务五（$18$ 分）：$c_i=1$。\n- 子任务六（$23$ 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9322", "type": "P", "difficulty": 5, "samples": [["2\nNKP\n3 3 5 1\nNKP\n2 6 5 3", "2\n2"], ["2\nB\n2 8 3 6\nB\n2 8 5 5", "-1\n1"], ["2\nQ\n3 3 4 5\nQR\n4 1 1 4", "2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2022] Superpiece / 超级棋子", "background": "Day 2 Problem B.\n\n题面译自 [EGOI2022 superpiece](https://stats.egoi.org/media/task_description/2022_superpiece_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "你有一个无限大的棋盘。在本题中，棋盘是一个无限大的二维方格，每个方格用 $(r,c)$ 表示，分别代表行和列。目前棋盘上有唯一一个棋子，叫做**超级棋子**。你有你的超级棋子的合法移动列表，它是一个非空字符串，是 `QRBNKP` 的子序列。在每个回合中，超级棋子可以作为给定的棋子之一移动。超级棋子初始位于 $(a,b)$，请求出到达 $(c,d)$ 的最少移动次数。\n\n在本题中可能用到的国际象棋规则如下：\n\n共有六种棋子：皇后、车、象、马、国王、兵。他们的移动方式如下：\n\n- **皇后**（`Q`）可以移动到同行、同列、同对角线的方格。形式化地，对于任意整数 $k\\ne 0$，皇后可以从 $(a,b)$ 移动到 $(a+k,b),(a,b+k),(a+k,b+k),(a+k,b-k)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1e4lh43e.png)\n\n- **车**（`R`）可以移动到同行、同列的方格。形式化地，对于任意整数 $k\\ne 0$，车可以从 $(a,b)$ 移动到 $(a+k,b),(a,b+k)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mwo8ut9o.png)\n\n- **象**（`B`）可以移动到同对角线的方格。形式化地，对于任意整数 $k\\ne 0$，象可以从 $(a,b)$ 移动到 $(a+k,b+k),(a+k,b-k)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dhfo04af.png)\n\n- **马**（`N`）可以移动一个 `L` 形，也就是：先在一个方向移动两格，再在与之垂直的方向移动一格。形式化地，马可以从 $(a,b)$ 移动到 $(a+1,b+2),(a+1,b-2),(a+2,b+1),(a+2,b-1),(a-2,b+1),(a-2,b-1),(a-1,b+2),(a-1,b-2)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jyxiv4s0.png)\n\n- **国王**（`K`）可以移动到相邻的八个格子。形式化地，国王可以从 $(a,b)$ 移动到 $(a,b+1),(a,b-1),(a+1,b),(a-1,b),(a+1,b+1),(a+1,b-1),(a-1,b+1),(a-1,b-1)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qhzd2gzf.png)\n\n- **兵**（`P`）可以向上移动一格。形式化地，兵可以从 $(a,b)$ 移动到 $(a+1,b)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g0dhy9au.png)\n\n请注意，你可能知道的关于国际象棋的其他规则并不适用于本题；请只使用上面列出的那些规则。", "inputFormat": "第一行一个整数 $q$，表示数据组数。之后每两行描述一组数据：\n\n- 每组数据的第一行一个非空字符串，是超级棋子的合法移动列表。这个字符串是 `QRBNKP` 的一个子集，所有字符**按相同顺序**出现。换句话说，它是 `QRBNKP` 的一个子序列。\n- 每组数据的第二行四个整数 $a,b,c,d$——超级棋子的初始和目标位置。保证 $(a,b)\\ne (c,d)$，也就是初始位置和目标位置不同。", "outputFormat": "对于每组数据，输出一行一个整数 $m$，表示最少移动次数。如果不可能到达目标位置，输出 $-1$。", "hint": "**样例 $1$ 解释**\n\n在第一组数据中，我们需要从 $(3,3)$ 走到 $(5,1)$，合法移动有马、国王、兵。有很多种需要两次移动的方案，例如：\n\n- 兵走到 $(4,3)$，马走到 $(5,1)$。\n- 马走到 $(5,2)$，国王走到 $(5,1)$。\n- 国王走到 $(4,2)$，国王走到 $(5,1)$。\n\n不存在少于两次移动的方案——我们需要象或者皇后才能做到。\n\n在第二组数据中，我们需要从 $(2,6)$ 走到 $(5,3)$。同样地，最优方案需要两次移动。此时，每一步都必须是马，利用 $(4,5)$ 或 $(3,4)$ 作为中转站。\n\n---\n\n**样例 $2$ 解释**\n\n在第一组数据中，我们需要从 $(2,8)$ 走到 $(3,6)$。只能按照象的方式走棋，这是不可能的。\n\n在第二组数据中，我们需要从 $(2,8)$ 走到 $(5,5)$，只能按照象的方式走棋。可以在两次移动内实现，例如，利用 $(4,4)$ 作为中转站。\n\n---\n\n**样例 $3$ 解释**\n\n在第一组数据中，我们需要从 $(3,3)$ 走到 $(4,5)$，只能按照皇后的方式走棋。可以利用 $(4,4)$ 为中转站两次移动到达。\n\n在第二组数据中，我们需要从 $(4,1)$ 走到 $(1,4)$，只能按照皇后和车的方式走棋。可以一次移动到达。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le q\\le 10^3$，$-10^8\\le a,b,c,d\\le 10^8$。\n\n- 子任务一（$12$ 分）：保证存在 `Q`，保证不存在 `N`。\n- 子任务二（$9$ 分）：保证存在 `QN`。\n- 子任务三（$13$ 分）：保证存在 `R`，保证不存在 `Q`。\n- 子任务四（$8$ 分）：保证只存在 `B`。\n- 子任务五（$6$ 分）：保证存在 `B`，保证不存在 `QR`。\n- 子任务六（$31$ 分）：保证只存在 `N`。\n- 子任务七（$8$ 分）：保证存在 `N`，保证不存在 `QRB`。\n- 子任务八（$7$ 分）：保证存在 `K`，保证不存在 `QRBN`。\n- 子任务九（$6$ 分）：保证只存在 `P`。\n\n注意子任务**并不**按难度顺序排序。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2022] Superpiece / 超级棋子", "background": "Day 2 Problem B.\n\n题面译自 [EGOI2022 superpiece](https://stats.egoi.org/media/task_description/2022_superpiece_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "你有一个无限大的棋盘。在本题中，棋盘是一个无限大的二维方格，每个方格用 $(r,c)$ 表示，分别代表行和列。目前棋盘上有唯一一个棋子，叫做**超级棋子**。你有你的超级棋子的合法移动列表，它是一个非空字符串，是 `QRBNKP` 的子序列。在每个回合中，超级棋子可以作为给定的棋子之一移动。超级棋子初始位于 $(a,b)$，请求出到达 $(c,d)$ 的最少移动次数。\n\n在本题中可能用到的国际象棋规则如下：\n\n共有六种棋子：皇后、车、象、马、国王、兵。他们的移动方式如下：\n\n- **皇后**（`Q`）可以移动到同行、同列、同对角线的方格。形式化地，对于任意整数 $k\\ne 0$，皇后可以从 $(a,b)$ 移动到 $(a+k,b),(a,b+k),(a+k,b+k),(a+k,b-k)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1e4lh43e.png)\n\n- **车**（`R`）可以移动到同行、同列的方格。形式化地，对于任意整数 $k\\ne 0$，车可以从 $(a,b)$ 移动到 $(a+k,b),(a,b+k)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mwo8ut9o.png)\n\n- **象**（`B`）可以移动到同对角线的方格。形式化地，对于任意整数 $k\\ne 0$，象可以从 $(a,b)$ 移动到 $(a+k,b+k),(a+k,b-k)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dhfo04af.png)\n\n- **马**（`N`）可以移动一个 `L` 形，也就是：先在一个方向移动两格，再在与之垂直的方向移动一格。形式化地，马可以从 $(a,b)$ 移动到 $(a+1,b+2),(a+1,b-2),(a+2,b+1),(a+2,b-1),(a-2,b+1),(a-2,b-1),(a-1,b+2),(a-1,b-2)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jyxiv4s0.png)\n\n- **国王**（`K`）可以移动到相邻的八个格子。形式化地，国王可以从 $(a,b)$ 移动到 $(a,b+1),(a,b-1),(a+1,b),(a-1,b),(a+1,b+1),(a+1,b-1),(a-1,b+1),(a-1,b-1)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qhzd2gzf.png)\n\n- **兵**（`P`）可以向上移动一格。形式化地，兵可以从 $(a,b)$ 移动到 $(a+1,b)$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g0dhy9au.png)\n\n请注意，你可能知道的关于国际象棋的其他规则并不适用于本题；请只使用上面列出的那些规则。", "inputFormat": "第一行一个整数 $q$，表示数据组数。之后每两行描述一组数据：\n\n- 每组数据的第一行一个非空字符串，是超级棋子的合法移动列表。这个字符串是 `QRBNKP` 的一个子集，所有字符**按相同顺序**出现。换句话说，它是 `QRBNKP` 的一个子序列。\n- 每组数据的第二行四个整数 $a,b,c,d$——超级棋子的初始和目标位置。保证 $(a,b)\\ne (c,d)$，也就是初始位置和目标位置不同。", "outputFormat": "对于每组数据，输出一行一个整数 $m$，表示最少移动次数。如果不可能到达目标位置，输出 $-1$。", "hint": "**样例 $1$ 解释**\n\n在第一组数据中，我们需要从 $(3,3)$ 走到 $(5,1)$，合法移动有马、国王、兵。有很多种需要两次移动的方案，例如：\n\n- 兵走到 $(4,3)$，马走到 $(5,1)$。\n- 马走到 $(5,2)$，国王走到 $(5,1)$。\n- 国王走到 $(4,2)$，国王走到 $(5,1)$。\n\n不存在少于两次移动的方案——我们需要象或者皇后才能做到。\n\n在第二组数据中，我们需要从 $(2,6)$ 走到 $(5,3)$。同样地，最优方案需要两次移动。此时，每一步都必须是马，利用 $(4,5)$ 或 $(3,4)$ 作为中转站。\n\n---\n\n**样例 $2$ 解释**\n\n在第一组数据中，我们需要从 $(2,8)$ 走到 $(3,6)$。只能按照象的方式走棋，这是不可能的。\n\n在第二组数据中，我们需要从 $(2,8)$ 走到 $(5,5)$，只能按照象的方式走棋。可以在两次移动内实现，例如，利用 $(4,4)$ 作为中转站。\n\n---\n\n**样例 $3$ 解释**\n\n在第一组数据中，我们需要从 $(3,3)$ 走到 $(4,5)$，只能按照皇后的方式走棋。可以利用 $(4,4)$ 为中转站两次移动到达。\n\n在第二组数据中，我们需要从 $(4,1)$ 走到 $(1,4)$，只能按照皇后和车的方式走棋。可以一次移动到达。\n\n---\n\n**数据范围**\n\n对于全部数据，$1\\le q\\le 10^3$，$-10^8\\le a,b,c,d\\le 10^8$。\n\n- 子任务一（$12$ 分）：保证存在 `Q`，保证不存在 `N`。\n- 子任务二（$9$ 分）：保证存在 `QN`。\n- 子任务三（$13$ 分）：保证存在 `R`，保证不存在 `Q`。\n- 子任务四（$8$ 分）：保证只存在 `B`。\n- 子任务五（$6$ 分）：保证存在 `B`，保证不存在 `QR`。\n- 子任务六（$31$ 分）：保证只存在 `N`。\n- 子任务七（$8$ 分）：保证存在 `N`，保证不存在 `QRB`。\n- 子任务八（$7$ 分）：保证存在 `K`，保证不存在 `QRBN`。\n- 子任务九（$6$ 分）：保证只存在 `P`。\n\n注意子任务**并不**按难度顺序排序。", "locale": "zh-CN"}}}
{"pid": "P9323", "type": "P", "difficulty": 5, "samples": [], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "交互题", "Special Judge", "O2优化", "EGOI（欧洲/女生）"], "title": "[EGOI 2022] Toy Design / 玩具设计", "background": "Day 2 Problem C.\n\n题面译自 [EGOI2022 toydesign](https://stats.egoi.org/media/task_description/2022_toydesign_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "**本题是一道 Grader 交互题。**\n\n你在一个设计玩具的公司工作。一个将被制作的玩具如下：有 $n$ 个大头针，编号从 $1$ 到 $n$，从盒子中伸出。几对大头针被铁丝在盒子中相连。（换句话说，大头针和铁丝组成了一个无向图，其中大头针是节点、铁丝是边。）铁丝无法从盒子外部看到，唯一获得关于他们的信息的方法是对大头针使用一个**检测器**：我们选择两个大头针 $i,j$（$i\\ne j$），检测器会告诉你这两个大头针是否连通，包括直接和间接。（因此，检测器告诉你图中这两个大头针之间是否有一条路径。）\n\n我们称一组连接方式为玩具的**设计方案**。\n\n你正在使用一个专用的软件来查询和进行设计。软件工作方式如下：从某个称为“$0$ 号方案”的设计方案开始。他不会告诉你盒子内部的铁丝是什么样的。你需要重复进行以下的三步操作：\n\n1. 选择一个设计方案 $a$ 和两个大头针 $i,j$（$i\\ne j$）。\n2. 软件告诉你对这两个大头针使用检测器的结果。换句话说，它告诉你在设计方案 $a$ 中 $i$ 与 $j$ 是否（直接或间接地）连通。\n3. 同时，如果这两个大头针在设计方案 $a$ 中没有被直接或间接地连接，它会创建一个新的设计方案，包含设计方案 $a$ 中的所有铁丝，同时添加一个直接连接 $i,j$ 的铁丝。这个设计方案的编号为下一个可用的编号。（所以，第一个创建的设计方案是 $1$ 号方案，然后是 $2$ 号，以此类推。）请注意这不会修改设计方案 $a$，只会新建一个设计方案包含新的铁丝。\n\n你的目标是使用这种操作获取尽可能多的 $0$ 号方案的信息。\n\n请注意并不总是可能求出 $0$ 号方案的准确的铁丝连接方式，因为无法区分直接和间接的连接。例如，考虑如下的两种 $n=3$ 的设计方案：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7vwojkw8.png)\n\n检测器会认为两种方案中任意一对大头针都连通，所以我们无法利用上述软件区分它们。\n\n你的目标是求出任何一种设计方案，使得它与 $0$ 号方案等价。两种设计方案**等价**当且仅当对于任意一对大头针，检测器在两种方案中都返回相同结果。", "inputFormat": "", "outputFormat": "**交互方式**\n\n你需要实现一个函数：\n\n```cpp\nvoid ToyDesign(int n, int max_ops);\n```\n\n作用是给出一种与 $0$ 号方案*等价*的设计方案。你可以调用以下两个函数来实现这一点。你可以调用的第一个函数为：\n\n```cpp\nint Connected(int a, int i, int j);\n```\n\n其中 $1\\le i,j\\le n$，$i\\ne j$，$a\\ge 0$，且 $a$ 不能超过目前已有的设计方案数。如果在设计方案 $a$ 中，大头针 $i,j$ 是（直接或间接地）连通的，它的返回值是 $a$。否则，它的返回值是已有的设计方案数加一，就是包含 $a$ 的所有铁丝以及一根连接 $i,j$ 的铁丝的新的设计方案的编号。函数 `Connected` 可以被调用最多 `max_ops` 次。\n\n当你的程序完成了需要的 `Connected` 调用，它应该描述一种等价于 $0$ 号方案的设计方案。为了描述一个方案，程序应当调用：\n\n```cpp\nvoid DescribeDesign(std::vector<std::pair<int, int>> result);\n```\n\n参数 `result` 是整数对的向量，描述大头针之间的直接铁丝连接。每对数描述一根铁丝，包含被连接的两个大头针的编号。在任意一对（无序的）大头针对之间必须只有至多一根铁丝，且不能有铁丝连接一个大头针和它自己。一旦调用这个函数，你的程序将被终止。", "hint": "**样例交互过程**\n\n|选手程序|Grader|解释|\n|:-|:-|:-|\n||`ToyDesign(4, 20)`|玩具中有 $4$ 个大头针。你需要在 $20$ 次 `Connected` 调用内，给出任何一种等价于 $0$ 号方案的设计方案。|\n|`Connected(0, 1, 2)`|返回 $1$。|大头针 $1,2$ 在 $0$ 号方案中不直接或间接地连通。新的设计方案是 $1$ 号。|\n|`Connected(1, 3, 2)`|返回 $2$。|大头针 $3,2$ 在 $1$ 号方案中不直接或间接地连通。新的设计方案是 $2$ 号。|\n|`Connected(0, 3, 4)`|返回 $0$。|大头针 $3,4$ 在 $0$ 号方案中直接或间接地连通。没有新的设计方案。|\n|`DescribeDesign({{3, 4}})`||描述一个只有一根铁丝的设计方案：连接大头针 $3,4$。|\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le n\\le 200$。\n\n- 子任务一（$10$ 分）：$n\\le 200$，`max_ops` 为 $20000$。\n- 子任务二（$20$ 分）：$n\\le 8$，`max_ops` 为 $20$。\n- 子任务三（$35$ 分）：$n\\le 200$，`max_ops` 为 $2000$。\n- 子任务四（$35$ 分）：$n\\le 200$，`max_ops` 为 $1350$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[EGOI 2022] Toy Design / 玩具设计", "background": "Day 2 Problem C.\n\n题面译自 [EGOI2022 toydesign](https://stats.egoi.org/media/task_description/2022_toydesign_en.pdf)。\n\n[![CC BY-SA 3.0](https://licensebuttons.net/l/by-sa/3.0/80x15.png)](https://creativecommons.org/licenses/by-sa/3.0/)", "description": "**本题是一道 Grader 交互题。**\n\n你在一个设计玩具的公司工作。一个将被制作的玩具如下：有 $n$ 个大头针，编号从 $1$ 到 $n$，从盒子中伸出。几对大头针被铁丝在盒子中相连。（换句话说，大头针和铁丝组成了一个无向图，其中大头针是节点、铁丝是边。）铁丝无法从盒子外部看到，唯一获得关于他们的信息的方法是对大头针使用一个**检测器**：我们选择两个大头针 $i,j$（$i\\ne j$），检测器会告诉你这两个大头针是否连通，包括直接和间接。（因此，检测器告诉你图中这两个大头针之间是否有一条路径。）\n\n我们称一组连接方式为玩具的**设计方案**。\n\n你正在使用一个专用的软件来查询和进行设计。软件工作方式如下：从某个称为“$0$ 号方案”的设计方案开始。他不会告诉你盒子内部的铁丝是什么样的。你需要重复进行以下的三步操作：\n\n1. 选择一个设计方案 $a$ 和两个大头针 $i,j$（$i\\ne j$）。\n2. 软件告诉你对这两个大头针使用检测器的结果。换句话说，它告诉你在设计方案 $a$ 中 $i$ 与 $j$ 是否（直接或间接地）连通。\n3. 同时，如果这两个大头针在设计方案 $a$ 中没有被直接或间接地连接，它会创建一个新的设计方案，包含设计方案 $a$ 中的所有铁丝，同时添加一个直接连接 $i,j$ 的铁丝。这个设计方案的编号为下一个可用的编号。（所以，第一个创建的设计方案是 $1$ 号方案，然后是 $2$ 号，以此类推。）请注意这不会修改设计方案 $a$，只会新建一个设计方案包含新的铁丝。\n\n你的目标是使用这种操作获取尽可能多的 $0$ 号方案的信息。\n\n请注意并不总是可能求出 $0$ 号方案的准确的铁丝连接方式，因为无法区分直接和间接的连接。例如，考虑如下的两种 $n=3$ 的设计方案：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7vwojkw8.png)\n\n检测器会认为两种方案中任意一对大头针都连通，所以我们无法利用上述软件区分它们。\n\n你的目标是求出任何一种设计方案，使得它与 $0$ 号方案等价。两种设计方案**等价**当且仅当对于任意一对大头针，检测器在两种方案中都返回相同结果。", "inputFormat": "", "outputFormat": "**交互方式**\n\n你需要实现一个函数：\n\n```cpp\nvoid ToyDesign(int n, int max_ops);\n```\n\n作用是给出一种与 $0$ 号方案*等价*的设计方案。你可以调用以下两个函数来实现这一点。你可以调用的第一个函数为：\n\n```cpp\nint Connected(int a, int i, int j);\n```\n\n其中 $1\\le i,j\\le n$，$i\\ne j$，$a\\ge 0$，且 $a$ 不能超过目前已有的设计方案数。如果在设计方案 $a$ 中，大头针 $i,j$ 是（直接或间接地）连通的，它的返回值是 $a$。否则，它的返回值是已有的设计方案数加一，就是包含 $a$ 的所有铁丝以及一根连接 $i,j$ 的铁丝的新的设计方案的编号。函数 `Connected` 可以被调用最多 `max_ops` 次。\n\n当你的程序完成了需要的 `Connected` 调用，它应该描述一种等价于 $0$ 号方案的设计方案。为了描述一个方案，程序应当调用：\n\n```cpp\nvoid DescribeDesign(std::vector<std::pair<int, int>> result);\n```\n\n参数 `result` 是整数对的向量，描述大头针之间的直接铁丝连接。每对数描述一根铁丝，包含被连接的两个大头针的编号。在任意一对（无序的）大头针对之间必须只有至多一根铁丝，且不能有铁丝连接一个大头针和它自己。一旦调用这个函数，你的程序将被终止。", "hint": "**样例交互过程**\n\n|选手程序|Grader|解释|\n|:-|:-|:-|\n||`ToyDesign(4, 20)`|玩具中有 $4$ 个大头针。你需要在 $20$ 次 `Connected` 调用内，给出任何一种等价于 $0$ 号方案的设计方案。|\n|`Connected(0, 1, 2)`|返回 $1$。|大头针 $1,2$ 在 $0$ 号方案中不直接或间接地连通。新的设计方案是 $1$ 号。|\n|`Connected(1, 3, 2)`|返回 $2$。|大头针 $3,2$ 在 $1$ 号方案中不直接或间接地连通。新的设计方案是 $2$ 号。|\n|`Connected(0, 3, 4)`|返回 $0$。|大头针 $3,4$ 在 $0$ 号方案中直接或间接地连通。没有新的设计方案。|\n|`DescribeDesign({{3, 4}})`||描述一个只有一根铁丝的设计方案：连接大头针 $3,4$。|\n\n---\n\n**数据范围**\n\n对于全部数据，$2\\le n\\le 200$。\n\n- 子任务一（$10$ 分）：$n\\le 200$，`max_ops` 为 $20000$。\n- 子任务二（$20$ 分）：$n\\le 8$，`max_ops` 为 $20$。\n- 子任务三（$35$ 分）：$n\\le 200$，`max_ops` 为 $2000$。\n- 子任务四（$35$ 分）：$n\\le 200$，`max_ops` 为 $1350$。", "locale": "zh-CN"}}}
{"pid": "P9325", "type": "P", "difficulty": 3, "samples": [["7\n3 1 4 1 5 9 2", "0 2 0 5 2 10 10"], ["4\n1 3 5 6", "0 1 3 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2023", "枚举", "CCC（加拿大）", "区间 DP", "双指针 two-pointer"], "title": "[CCC 2023 S2] Symmetric Mountains", "background": "", "description": "Rebecca is a tour guide and is trying to market the Rocky Mountains for her magazine. She recently took a beautiful picture consisting of $N$ mountains where the $i\\text{-th}$ mountain from the left has a height $h_i$. She will crop this picture for her magazine, by possibly removing some mountains from the left side of the picture and possibly removing some mountains from the right side of the picture. That is, a crop consists of consecutive mountains starting from the $l\\text{-th}$ to the $r\\text{-th}$ mountain where $l \\leq r$. To please her magazine readers, Rebecca will try to find the most symmetric crop.\n\nWe will measure the $asymmetric\\ value$ of a crop as the sum of the absolute difference for every pair of mountains equidistant from the midpoint of the crop. To help understand that definition, note that the absolute value of $a$ number $v$, written as $|v|$, is the non-negative value of v: for example $\\lvert -6 \\rvert = 6$ and $|14| = 14$. The asymmetric value of a crop is the sum of all $|h_{l+i} - h_{r-i}|$ for $0 \\leq i \\leq \\frac{r-l}{2}$. To put that formula in a different way, we pair up the mountains working from the outside in toward the centre, calculate the absolute difference in height of each of these pairs, and sum them up.\n\nBecause Rebecca does not know how wide the picture needs to be, for all possible crop lengths, find the asymmetric value of the most symmetric crop (the crop with the minimum asymmetric value).", "inputFormat": "The first line consists of an integer $N$, representing the number of mountains in the picture.\n\nThe second line consists of $N$ space-separated integers, where the $i\\text{-th}$ integer from the left represents $h_i$.\n\nThe following table shows how the available 15 marks are distributed:\n\n| Marks | Bounds on $N$ | Bounds on $h_i$ | Additional Constraints |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $5$ | $1 \\leq N \\leq 300$ | $0 \\leq h_i \\leq 10^5$ | None. |\n| $5$ | $1 \\leq N \\leq 5000$ | $0 \\leq h_i \\leq 10^5$ | Height of mountains are in non-decreasing order from left to right. |\n| $5$ | $1 \\leq N \\leq 5000$ | $0 \\leq h_i \\leq 10^5$ | None. |\n", "outputFormat": "Output on one line $N$ space-separated integers, where the $i\\text{-th}$ integer from the left is the asymmetric value of the most symmetric picture of crops of length $i$.", "hint": "Explanation of Output for Sample Input $1$:\n\nWe will show why the fifth value from the left is $2$.Let us try to compute all the asymmetric values of crops with length $5$.\n\nThe height of the mountains in the first crop is $[3, 1, 4, 1, 5]$. The asymmetric value of this crop is $|3 - 5| + |1 - 1| + |4 - 4| = 2$.\n\nThe height of the mountains in the second crop is $[1, 4, 1, 5, 9]$. The asymmetric value of this crop is $|1 - 9| + |4 - 5| + |1 - 1| = 9$.\n\nThe height of the mountains in the last crop is $[4, 1, 5, 9, 2]$. The asymmetric value of this crop is $|4 - 2| + |1 - 9| + |5 - 5| = 10$.\n\nHence, the most symmetric crop of length $5$ is $2$.\n\nExplanation of Output for Sample Input $2$:\n\nThis sample satisfies the second subtask. Note that the only crop of length $4$ is $[1, 3, 5, 6]$ which has asymmetric value of $|1 - 6| + |3 - 5| = 7$.\n\n**本题采用捆绑测试**：\n\n- Subtask 1（5 points）：$1\\leq N \\leq 300$，$0\\leq h_i \\leq 10^5$。\n\n- Subtask 2（5 points）：$1 \\leq N \\leq 5000$，$0 \\leq h_i \\leq 10^5$，保证山的高度从左到右单调不减。\n\n- Subtask 3（5 points）：$1\\leq N\\leq 5000$，$0 \\leq h_i \\leq 10^5$。", "locale": "en", "translations": {"en": {"title": "[CCC 2023 S2] Symmetric Mountains", "background": "", "description": "Rebecca is a tour guide and is trying to market the Rocky Mountains for her magazine. She recently took a beautiful picture consisting of $N$ mountains where the $i\\text{-th}$ mountain from the left has a height $h_i$. She will crop this picture for her magazine, by possibly removing some mountains from the left side of the picture and possibly removing some mountains from the right side of the picture. That is, a crop consists of consecutive mountains starting from the $l\\text{-th}$ to the $r\\text{-th}$ mountain where $l \\leq r$. To please her magazine readers, Rebecca will try to find the most symmetric crop.\n\nWe will measure the $asymmetric\\ value$ of a crop as the sum of the absolute difference for every pair of mountains equidistant from the midpoint of the crop. To help understand that definition, note that the absolute value of $a$ number $v$, written as $|v|$, is the non-negative value of v: for example $\\lvert -6 \\rvert = 6$ and $|14| = 14$. The asymmetric value of a crop is the sum of all $|h_{l+i} - h_{r-i}|$ for $0 \\leq i \\leq \\frac{r-l}{2}$. To put that formula in a different way, we pair up the mountains working from the outside in toward the centre, calculate the absolute difference in height of each of these pairs, and sum them up.\n\nBecause Rebecca does not know how wide the picture needs to be, for all possible crop lengths, find the asymmetric value of the most symmetric crop (the crop with the minimum asymmetric value).", "inputFormat": "The first line consists of an integer $N$, representing the number of mountains in the picture.\n\nThe second line consists of $N$ space-separated integers, where the $i\\text{-th}$ integer from the left represents $h_i$.\n\nThe following table shows how the available 15 marks are distributed:\n\n| Marks | Bounds on $N$ | Bounds on $h_i$ | Additional Constraints |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $5$ | $1 \\leq N \\leq 300$ | $0 \\leq h_i \\leq 10^5$ | None. |\n| $5$ | $1 \\leq N \\leq 5000$ | $0 \\leq h_i \\leq 10^5$ | Height of mountains are in non-decreasing order from left to right. |\n| $5$ | $1 \\leq N \\leq 5000$ | $0 \\leq h_i \\leq 10^5$ | None. |\n", "outputFormat": "Output on one line $N$ space-separated integers, where the $i\\text{-th}$ integer from the left is the asymmetric value of the most symmetric picture of crops of length $i$.", "hint": "Explanation of Output for Sample Input $1$:\n\nWe will show why the fifth value from the left is $2$.Let us try to compute all the asymmetric values of crops with length $5$.\n\nThe height of the mountains in the first crop is $[3, 1, 4, 1, 5]$. The asymmetric value of this crop is $|3 - 5| + |1 - 1| + |4 - 4| = 2$.\n\nThe height of the mountains in the second crop is $[1, 4, 1, 5, 9]$. The asymmetric value of this crop is $|1 - 9| + |4 - 5| + |1 - 1| = 9$.\n\nThe height of the mountains in the last crop is $[4, 1, 5, 9, 2]$. The asymmetric value of this crop is $|4 - 2| + |1 - 9| + |5 - 5| = 10$.\n\nHence, the most symmetric crop of length $5$ is $2$.\n\nExplanation of Output for Sample Input $2$:\n\nThis sample satisfies the second subtask. Note that the only crop of length $4$ is $[1, 3, 5, 6]$ which has asymmetric value of $|1 - 6| + |3 - 5| = 7$.\n\n**本题采用捆绑测试**：\n\n- Subtask 1（5 points）：$1\\leq N \\leq 300$，$0\\leq h_i \\leq 10^5$。\n\n- Subtask 2（5 points）：$1 \\leq N \\leq 5000$，$0 \\leq h_i \\leq 10^5$，保证山的高度从左到右单调不减。\n\n- Subtask 3（5 points）：$1\\leq N\\leq 5000$，$0 \\leq h_i \\leq 10^5$。", "locale": "en"}, "zh-CN": {"title": "[CCC 2023 S2] Symmetric Mountains", "background": "", "description": "Rebecca 是一名导游，正在为她的杂志推广落基山脉。她最近拍了一张包含 $N$ 座山的美丽照片，其中从左到右第 $i$ 座山的高度为 $h_i$。她将为她的杂志裁剪这张照片，可能会从照片的左侧移除一些山，也可能会从照片的右侧移除一些山。也就是说，裁剪包括从第 $l$ 座山到第 $r$ 座山的连续山峰，其中 $l \\leq r$。为了取悦她的杂志读者，Rebecca 将尝试找到最对称的裁剪。\n\n我们将裁剪的不对称值定义为从裁剪的中点开始，每对等距山峰的高度差的绝对值之和。为了帮助理解这个定义，注意到一个数 $v$ 的绝对值，记为 $|v|$，是 $v$ 的非负值：例如 $|-6| = 6$ 和 $|14| = 14$。裁剪的不对称值是所有 $|h_{l+i} - h_{r-i}|$ 的和，其中 $0 \\leq i \\leq \\frac{r-l}{2}$。换句话说，我们从外向内配对山峰，计算每对山峰高度差的绝对值，并将它们相加。\n\n因为 Rebecca 不知道照片需要多宽，所以对于所有可能的裁剪长度，找到不对称值最小的裁剪（即最对称的裁剪）。", "inputFormat": "第一行由一个整数 $N$ 组成，表示照片中山的数量。\n\n第二行由 $N$ 个以空格分隔的整数组成，其中从左到右第 $i$ 个整数表示 $h_i$。\n\n下表显示了可用的 15 分的分配方式：\n\n| 分数 | $N$ 的范围 | $h_i$ 的范围 | 额外限制 |\n| :-----------: | :-----------: | :-----------: | :-----------: |\n| $5$ | $1 \\leq N \\leq 300$ | $0 \\leq h_i \\leq 10^5$ | 无。 |\n| $5$ | $1 \\leq N \\leq 5000$ | $0 \\leq h_i \\leq 10^5$ | 山的高度从左到右单调不减。 |\n| $5$ | $1 \\leq N \\leq 5000$ | $0 \\leq h_i \\leq 10^5$ | 无。 |", "outputFormat": "输出一行 $N$ 个以空格分隔的整数，其中从左到右第 $i$ 个整数是长度为 $i$ 的裁剪中最对称的裁剪的不对称值。", "hint": "对样例输入 1 的输出解释：\n\n我们将展示为什么从左数第五个值是 2。让我们尝试计算所有长度为 5 的裁剪的不对称值。\n\n第一个裁剪中山的高度是 $[3, 1, 4, 1, 5]$。这个裁剪的不对称值是 $|3 - 5| + |1 - 1| + |4 - 4| = 2$。\n\n第二个裁剪中山的高度是 $[1, 4, 1, 5, 9]$。这个裁剪的不对称值是 $|1 - 9| + |4 - 5| + |1 - 1| = 9$。\n\n最后一个裁剪中山的高度是 $[4, 1, 5, 9, 2]$。这个裁剪的不对称值是 $|4 - 2| + |1 - 9| + |5 - 5| = 10$。\n\n因此，长度为 5 的最对称裁剪是不对称值为 2 的裁剪。\n\n对样例输入 2 的输出解释：\n\n这个样例满足第二个子任务。注意，唯一长度为 4 的裁剪是 $[1, 3, 5, 6]$，其不对称值为 $|1 - 6| + |3 - 5| = 7$。\n\n**本题采用捆绑测试**：\n\n- 子任务 1（5 分）：$1\\leq N \\leq 300$，$0\\leq h_i \\leq 10^5$。\n\n- 子任务 2（5 分）：$1 \\leq N \\leq 5000$，$0 \\leq h_i \\leq 10^5$，保证山的高度从左到右单调不减。\n\n- 子任务 3（5 分）：$1\\leq N\\leq 5000$，$0 \\leq h_i \\leq 10^5$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9326", "type": "P", "difficulty": 4, "samples": [["4 5 1 2", "union\nradar\nbadge\nanime"], ["2 2 2 1", "IMPOSSIBLE"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "字符串", "2023", "Special Judge", "CCC（加拿大）", "构造", "分类讨论"], "title": "[CCC 2023 S3] Palindromic Poster", "background": "", "description": "Ryo and Kita are designing a new poster for Kessoku Band. After some furious brainstorming, they came to the conclusion that the poster should come in the form of a $2\\text{-D}$ grid of lowercase English letters (i.e. `a` to `z`), with $N$ rows and $M$ columns.\n\nFurthermore, it is known that Ryo and Kita both have peculiar tastes in palindromes. Ryo will only be satisfied with the poster if exactly $R$ of its rows are palindromes, and Kita will only be satisfied with the poster if exactly $C$ of its columns are palindromes. Can you design a poster that will satisfy both Ryo and Kita, or determine that it is impossible to do so?\n\n**Note**: A string is considered a palindrome if it is the same when read forwards and backwards. For example, `kayak` and `bb` are palindromes, whereas `guitar` and `live` are not.\n", "inputFormat": "The first and only line of input consists of $4$ space-separated integers $N, M, R$, and $C$.\n\nThe following table shows how the available $15$ marks are distributed.\n\n| Marks | Bounds on $N$ | Bounds on $M$ | Bounds on $R$ | Bounds on $C$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $2$ marks | $2 \\leq N \\leq 2000$ | $2 \\leq M \\leq 2000$ | $R = 1$ | $C = 1$ |\n| $2$ marks | $N = 2$ | $M = 2$ | $0 \\leq R \\leq N$ | $0 \\leq C \\leq M$ |\n| $4$ marks | $N = 2$ | $2 \\leq M \\leq 2000$ | $0 \\leq R \\leq N$ | $0 \\leq C \\leq M$ |\n| $7$ marks | $2 \\leq N \\leq 2000$ | $2 \\leq M \\leq 2000$ | $0 \\leq R \\leq N$ | $0 \\leq C \\leq M$ |\n\n", "outputFormat": "If it is impossible to design a poster that will satisfy both Ryo and Kita, output `IMPOSSIBLE` on a single line.\n\nOtherwise, your output should contain $N$ lines, each consisting of $M$ lowercase English letters, representing your poster design. If there are multiple possible designs, output any ofthem.", "hint": "Explanation of Output for Sample Input $1$：\n\nIn the given design, only the second row (namely `radar`) and the second and third columns (namely `naan` and `iddi`) are palindromes. Since exactly $R = 1$ of the rows and $C = 2$ of the\ncolumns are palindromes, this is an acceptable design.\n\nExplanation of Output for Sample Input $2$：\n\nIn this case, it can be proven that it is impossible to satisfy both Ryo and Kita.\n\n**本题采用捆绑测试**：\n\n- Subtask 1（2 points）：数据保证 $2 \\leq N \\leq 2000$，$2\\leq M\\leq 2000$，$R = 1$，$C = 1$。\n\n- Subtask 2（2 points）：数据保证 $N = 2$，$M = 2$，$0\\leq R\\leq N$，$0\\leq C\\leq M$。\n\n- Subtask 3（4 points）：数据保证 $N = 2$，$2\\leq M \\leq2000$，$0\\leq R\\leq N$，$0\\leq C\\leq M$。\n\n- Subtask 4（7 points）：数据保证 $2\\leq N\\leq 2000$，$2\\leq M \\leq2000$，$0\\leq R\\leq N$，$0\\leq C\\leq M$。", "locale": "en", "translations": {"en": {"title": "[CCC 2023 S3] Palindromic Poster", "background": "", "description": "Ryo and Kita are designing a new poster for Kessoku Band. After some furious brainstorming, they came to the conclusion that the poster should come in the form of a $2\\text{-D}$ grid of lowercase English letters (i.e. `a` to `z`), with $N$ rows and $M$ columns.\n\nFurthermore, it is known that Ryo and Kita both have peculiar tastes in palindromes. Ryo will only be satisfied with the poster if exactly $R$ of its rows are palindromes, and Kita will only be satisfied with the poster if exactly $C$ of its columns are palindromes. Can you design a poster that will satisfy both Ryo and Kita, or determine that it is impossible to do so?\n\n**Note**: A string is considered a palindrome if it is the same when read forwards and backwards. For example, `kayak` and `bb` are palindromes, whereas `guitar` and `live` are not.\n", "inputFormat": "The first and only line of input consists of $4$ space-separated integers $N, M, R$, and $C$.\n\nThe following table shows how the available $15$ marks are distributed.\n\n| Marks | Bounds on $N$ | Bounds on $M$ | Bounds on $R$ | Bounds on $C$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $2$ marks | $2 \\leq N \\leq 2000$ | $2 \\leq M \\leq 2000$ | $R = 1$ | $C = 1$ |\n| $2$ marks | $N = 2$ | $M = 2$ | $0 \\leq R \\leq N$ | $0 \\leq C \\leq M$ |\n| $4$ marks | $N = 2$ | $2 \\leq M \\leq 2000$ | $0 \\leq R \\leq N$ | $0 \\leq C \\leq M$ |\n| $7$ marks | $2 \\leq N \\leq 2000$ | $2 \\leq M \\leq 2000$ | $0 \\leq R \\leq N$ | $0 \\leq C \\leq M$ |\n\n", "outputFormat": "If it is impossible to design a poster that will satisfy both Ryo and Kita, output `IMPOSSIBLE` on a single line.\n\nOtherwise, your output should contain $N$ lines, each consisting of $M$ lowercase English letters, representing your poster design. If there are multiple possible designs, output any ofthem.", "hint": "Explanation of Output for Sample Input $1$：\n\nIn the given design, only the second row (namely `radar`) and the second and third columns (namely `naan` and `iddi`) are palindromes. Since exactly $R = 1$ of the rows and $C = 2$ of the\ncolumns are palindromes, this is an acceptable design.\n\nExplanation of Output for Sample Input $2$：\n\nIn this case, it can be proven that it is impossible to satisfy both Ryo and Kita.\n\n**本题采用捆绑测试**：\n\n- Subtask 1（2 points）：数据保证 $2 \\leq N \\leq 2000$，$2\\leq M\\leq 2000$，$R = 1$，$C = 1$。\n\n- Subtask 2（2 points）：数据保证 $N = 2$，$M = 2$，$0\\leq R\\leq N$，$0\\leq C\\leq M$。\n\n- Subtask 3（4 points）：数据保证 $N = 2$，$2\\leq M \\leq2000$，$0\\leq R\\leq N$，$0\\leq C\\leq M$。\n\n- Subtask 4（7 points）：数据保证 $2\\leq N\\leq 2000$，$2\\leq M \\leq2000$，$0\\leq R\\leq N$，$0\\leq C\\leq M$。", "locale": "en"}, "zh-CN": {"title": "[CCC 2023 S3] Palindromic Poster", "background": "", "description": "Ryo 和 Kita 正在为 Kessoku Band 设计一张新海报。经过一番激烈的头脑风暴，他们得出结论，海报应该以一个 $2\\text{-D}$ 的小写英文字母网格（即 `a` 到 `z`）的形式出现，具有 $N$ 行和 $M$ 列。\n\n此外，已知 Ryo 和 Kita 都对回文有独特的品味。Ryo 只有在海报的行中恰好有 $R$ 行是回文时才会满意，而 Kita 只有在海报的列中恰好有 $C$ 列是回文时才会满意。你能设计出一张同时满足 Ryo 和 Kita 的海报，或者确定这是不可能的吗？\n\n**注意**：如果一个字符串正反读都是一样的，则认为它是回文。例如，`kayak` 和 `bb` 是回文，而 `guitar` 和 `live` 不是。", "inputFormat": "输入的第一行包含 $4$ 个用空格分隔的整数 $N, M, R$ 和 $C$。\n\n下表显示了可用的 $15$ 分是如何分配的。\n\n| Marks | Bounds on $N$ | Bounds on $M$ | Bounds on $R$ | Bounds on $C$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $2$ marks | $2 \\leq N \\leq 2000$ | $2 \\leq M \\leq 2000$ | $R = 1$ | $C = 1$ |\n| $2$ marks | $N = 2$ | $M = 2$ | $0 \\leq R \\leq N$ | $0 \\leq C \\leq M$ |\n| $4$ marks | $N = 2$ | $2 \\leq M \\leq 2000$ | $0 \\leq R \\leq N$ | $0 \\leq C \\leq M$ |\n| $7$ marks | $2 \\leq N \\leq 2000$ | $2 \\leq M \\leq 2000$ | $0 \\leq R \\leq N$ | $0 \\leq C \\leq M$ |", "outputFormat": "如果不可能设计出一张同时满足 Ryo 和 Kita 的海报，则在一行中输出 `IMPOSSIBLE`。\n\n否则，输出应包含 $N$ 行，每行由 $M$ 个小写英文字母组成，表示你的海报设计。如果有多种可能的设计，输出其中任意一种。", "hint": "对于样例输入 $1$ 的输出解释：\n\n在给定的设计中，只有第二行（即 `radar`）和第二、第三列（即 `naan` 和 `iddi`）是回文。由于恰好有 $R = 1$ 行和 $C = 2$ 列是回文，这是一种可接受的设计。\n\n对于样例输入 $2$ 的输出解释：\n\n在这种情况下，可以证明不可能同时满足 Ryo 和 Kita。\n\n**本题采用捆绑测试**：\n\n- 子任务 1（2 分）：数据保证 $2 \\leq N \\leq 2000$，$2\\leq M\\leq 2000$，$R = 1$，$C = 1$。\n\n- 子任务 2（2 分）：数据保证 $N = 2$，$M = 2$，$0\\leq R\\leq N$，$0\\leq C\\leq M$。\n\n- 子任务 3（4 分）：数据保证 $N = 2$，$2\\leq M \\leq2000$，$0\\leq R\\leq N$，$0\\leq C\\leq M$。\n\n- 子任务 4（7 分）：数据保证 $2\\leq N\\leq 2000$，$2\\leq M \\leq2000$，$0\\leq R\\leq N$，$0\\leq C\\leq M$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9327", "type": "P", "difficulty": 4, "samples": [["5 7\n1 2 15 1\n2 4 9 9\n5 2 5 6\n4 5 4 4\n4 3 3 7\n1 3 2 7\n1 4 2 1", "25"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "CCC（加拿大）", "最短路"], "title": "[CCC 2023 S4] Minimum Cost Roads", "background": "", "description": "As the newly elected mayor of Kitchener, Alanna's first job is to improve the city's road plan.\n\nKitchener's current road plan can be represented as a collection of $N$ intersections with $M$ roads, where the $i\\text{-th}$ road has length $l_i$ meters, costs $c_i$ dollars per year to maintain, and connects intersections $u_i$ and $v_i$. To create a plan, Alanna must select some subset of the $M$ roads to keep and maintain, and that plan's cost is the sum of maintenance costs of all roads in that subset.\n\nTo lower the city's annual spending, Alanna would like to minimize the plan's cost. However, the city also requires that she minimizes travel distances between intersections and will reject any plan that does not conform to those rules. Formally, for any pair of intersections $(i, j)$, if there exists a path from $i$ to $j$ taking $l$ meters on the existing road plan, Alanna's plan must also include a path between those intersections that is at most $l$ meters.", "inputFormat": "The first line contains the integers $N$ and $M$.\n\nEach of the next $M$ lines contains the integers $u_i,v_i,l_i$ and $c_i$, meaning that there currently exists a road from intersection $u_i$ to intersection $v_i$ with length $l_i$ and cost $c_i$$(1 \\leq u_i, v_i \\leq N, u_i \\neq v_i)$.\n\nThe following table shows how the available 15 marks are distributed.\n\n| Marks | Bounds on $N$ and $M$ | Bounds on $l_i$ | Bounds on $c_i$ | Additional Constraints |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $3$ marks | $1 \\leq N\\leq 2000$, $1\\leq M \\leq 2000$ | $l_i = 0$ | $1 \\leq c_i \\leq 10^9$ | None. |\n| $6$ marks | $1 \\leq N\\leq 2000$, $1\\leq M \\leq 2000$ | $1 \\leq l_i \\leq 10^9$ | $1 \\leq c_i \\leq 10^9$ | There is at most one road between any unordered pair of intersections. |\n| $6$ marks | $1 \\leq N\\leq 2000$, $1\\leq M \\leq 2000$ | $0 \\leq l_i \\leq 10^9$ | $1 \\leq c_i \\leq 10^9$ | None. |\n", "outputFormat": "Output one integer, the minimum possible cost of a road plan that meets the requirements.", "hint": "Explanation of Output for Sample Input：\n\nHere is a diagram of the intersections along with a valid road plan with minimum cost.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2astpvkm.png)\n\nEach edge is labeled with a pair $(l, c)$ denoting that it has length $l$ meters and cost $c$ dollars.\n\nAdditionally, the roads that are part of the plan are highlighted in blue, with a total cost of $7 + 1 + 6 + 7 + 4 = 25$.\n\nIt can be shown that we cannot create a cheaper plan that also respects the city’s requirements.\n\n**本题采用捆绑测试**：\n\n- Subtask 1（3 points）：数据保证 $1\\leq N \\leq 2000$，$1\\leq M \\leq 2000$，$l_i = 0$，$1\\leq c_i \\leq 10^9$。\n\n- Subtask 2（6 points）：数据保证 $1\\leq N\\leq 2000$，$1\\leq M \\leq 2000$，$1\\leq l_i \\leq 10^9$，$1\\leq c_i \\leq 10^9$，且在任何一对十字路口之间最多只有一条路。\n\n- Subtask 3（6 points）：数据保证 $1\\leq N\\leq 2000$，$1\\leq M \\leq 2000$，$0\\leq l_i \\leq 10^9$，$1\\leq c_i \\leq 10^9$。", "locale": "en", "translations": {"en": {"title": "[CCC 2023 S4] Minimum Cost Roads", "background": "", "description": "As the newly elected mayor of Kitchener, Alanna's first job is to improve the city's road plan.\n\nKitchener's current road plan can be represented as a collection of $N$ intersections with $M$ roads, where the $i\\text{-th}$ road has length $l_i$ meters, costs $c_i$ dollars per year to maintain, and connects intersections $u_i$ and $v_i$. To create a plan, Alanna must select some subset of the $M$ roads to keep and maintain, and that plan's cost is the sum of maintenance costs of all roads in that subset.\n\nTo lower the city's annual spending, Alanna would like to minimize the plan's cost. However, the city also requires that she minimizes travel distances between intersections and will reject any plan that does not conform to those rules. Formally, for any pair of intersections $(i, j)$, if there exists a path from $i$ to $j$ taking $l$ meters on the existing road plan, Alanna's plan must also include a path between those intersections that is at most $l$ meters.", "inputFormat": "The first line contains the integers $N$ and $M$.\n\nEach of the next $M$ lines contains the integers $u_i,v_i,l_i$ and $c_i$, meaning that there currently exists a road from intersection $u_i$ to intersection $v_i$ with length $l_i$ and cost $c_i$$(1 \\leq u_i, v_i \\leq N, u_i \\neq v_i)$.\n\nThe following table shows how the available 15 marks are distributed.\n\n| Marks | Bounds on $N$ and $M$ | Bounds on $l_i$ | Bounds on $c_i$ | Additional Constraints |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $3$ marks | $1 \\leq N\\leq 2000$, $1\\leq M \\leq 2000$ | $l_i = 0$ | $1 \\leq c_i \\leq 10^9$ | None. |\n| $6$ marks | $1 \\leq N\\leq 2000$, $1\\leq M \\leq 2000$ | $1 \\leq l_i \\leq 10^9$ | $1 \\leq c_i \\leq 10^9$ | There is at most one road between any unordered pair of intersections. |\n| $6$ marks | $1 \\leq N\\leq 2000$, $1\\leq M \\leq 2000$ | $0 \\leq l_i \\leq 10^9$ | $1 \\leq c_i \\leq 10^9$ | None. |\n", "outputFormat": "Output one integer, the minimum possible cost of a road plan that meets the requirements.", "hint": "Explanation of Output for Sample Input：\n\nHere is a diagram of the intersections along with a valid road plan with minimum cost.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2astpvkm.png)\n\nEach edge is labeled with a pair $(l, c)$ denoting that it has length $l$ meters and cost $c$ dollars.\n\nAdditionally, the roads that are part of the plan are highlighted in blue, with a total cost of $7 + 1 + 6 + 7 + 4 = 25$.\n\nIt can be shown that we cannot create a cheaper plan that also respects the city’s requirements.\n\n**本题采用捆绑测试**：\n\n- Subtask 1（3 points）：数据保证 $1\\leq N \\leq 2000$，$1\\leq M \\leq 2000$，$l_i = 0$，$1\\leq c_i \\leq 10^9$。\n\n- Subtask 2（6 points）：数据保证 $1\\leq N\\leq 2000$，$1\\leq M \\leq 2000$，$1\\leq l_i \\leq 10^9$，$1\\leq c_i \\leq 10^9$，且在任何一对十字路口之间最多只有一条路。\n\n- Subtask 3（6 points）：数据保证 $1\\leq N\\leq 2000$，$1\\leq M \\leq 2000$，$0\\leq l_i \\leq 10^9$，$1\\leq c_i \\leq 10^9$。", "locale": "en"}, "zh-CN": {"title": "[CCC 2023 S4] Minimum Cost Roads", "background": "", "description": "作为新当选的基奇纳市市长，Alanna 的首要任务是改善城市的道路规划。\n\n基奇纳当前的道路规划可以表示为 $N$ 个交叉路口和 $M$ 条道路的集合，其中第 $i$ 条道路的长度为 $l_i$ 米，每年维护费用为 $c_i$ 美元，并连接交叉路口 $u_i$ 和 $v_i$。为了制定计划，Alanna 必须选择保留和维护的 $M$ 条道路的一个子集，该计划的费用是该子集中所有道路的维护费用之和。\n\n为了降低城市的年度支出，Alanna 希望将计划的费用最小化。然而，城市还要求她最小化交叉路口之间的旅行距离，并拒绝任何不符合这些规则的计划。正式地，对于任何交叉路口对 $(i, j)$，如果在现有道路规划中存在从 $i$ 到 $j$ 的路径，且路径长度为 $l$ 米，则 Alanna 的计划中也必须包含一条长度不超过 $l$ 米的路径。", "inputFormat": "第一行包含整数 $N$ 和 $M$。\n\n接下来的 $M$ 行中的每一行包含整数 $u_i, v_i, l_i$ 和 $c_i$，表示当前存在一条从交叉路口 $u_i$ 到交叉路口 $v_i$ 的道路，长度为 $l_i$，费用为 $c_i$（$1 \\leq u_i, v_i \\leq N, u_i \neq v_i$）。\n\n下表显示了可用的 15 分数的分布。\n\n| 分数 | $N$ 和 $M$ 的界限 | $l_i$ 的界限 | $c_i$ 的界限 | 额外约束 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $3$ 分 | $1 \\leq N\\leq 2000$, $1\\leq M \\leq 2000$ | $l_i = 0$ | $1 \\leq c_i \\leq 10^9$ | 无。 |\n| $6$ 分 | $1 \\leq N\\leq 2000$, $1\\leq M \\leq 2000$ | $1 \\leq l_i \\leq 10^9$ | $1 \\leq c_i \\leq 10^9$ | 在任意一对交叉路口之间最多只有一条道路。 |\n| $6$ 分 | $1 \\leq N\\leq 2000$, $1\\leq M \\leq 2000$ | $0 \\leq l_i \\leq 10^9$ | $1 \\leq c_i \\leq 10^9$ | 无。 |", "outputFormat": "输出一个整数，表示满足要求的道路规划的最小可能费用。", "hint": "样例输入的输出解释：\n\n这是交叉路口的图示，以及一个具有最小费用的有效道路规划。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2astpvkm.png)\n\n每条边都标有一个对 $(l, c)$，表示其长度为 $l$ 米，费用为 $c$ 美元。\n\n此外，计划中的道路用蓝色突出显示，总费用为 $7 + 1 + 6 + 7 + 4 = 25$。\n\n可以证明，我们无法创建一个更便宜且符合城市要求的计划。\n\n**本题采用捆绑测试**：\n\n- 子任务 1（3 分）：数据保证 $1\\leq N \\leq 2000$，$1\\leq M \\leq 2000$，$l_i = 0$，$1\\leq c_i \\leq 10^9$。\n\n- 子任务 2（6 分）：数据保证 $1\\leq N\\leq 2000$，$1\\leq M \\leq 2000$，$1\\leq l_i \\leq 10^9$，$1\\leq c_i \\leq 10^9$，且在任何一对十字路口之间最多只有一条路。\n\n- 子任务 3（6 分）：数据保证 $1\\leq N\\leq 2000$，$1\\leq M \\leq 2000$，$0\\leq l_i \\leq 10^9$，$1\\leq c_i \\leq 10^9$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9328", "type": "P", "difficulty": 5, "samples": [["12", "0\n1\n3\n4\n8\n9\n11\n12"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "CCC（加拿大）"], "title": "[CCC 2023 S5] The Filter", "background": "", "description": "Alice, the mathematician, likes to study real numbers that are between $0$ and $1$. Her favourite tool is the filter.\n\nA filter covers part of the number line. When a number reaches a filter, two events can happen. If a number is not covered by the filter, the number will pass through. If a number is covered, the number will be removed.\n\nAlice has infinitely many filters. Her first $3$ filters look like this:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2rm8ihzn.png)\n\nIn general, the $k\\text{-th}$ filter can be defined as follows:\n\n- Consider the number line from $0$ to $1$.\n\n- Split this number line into $3^k$ equal-sized pieces. There are $3^k + 1$ points and $3^k$ intervals.\n\n- The $k\\text{-th}$ filter consists of the $2^{\\text{nd}}$ interval, $5^{\\text{th}}$ interval, $8^{\\text{th}}$ interval, and in general, the $(3i-1)^{\\text{th}}$ interval. The points are **not** part of the $k\\text{-th}$ filter.\n\nAlice has instructions for constructing the Cantor set. Start with the number line from $0$ to $1$. Apply all filters on the number line, and remove the numbers that are covered. The remaining numbers form the Cantor set.\n\nAlice wants to research the Cantor set, and she came to you for help. Given an integer $N$, Alice would like to know which fractions $\\frac{x}{N}$ are in the Cantor set.", "inputFormat": "The first line contains the integer $N$.\n\nThe following table shows how the available $15$ marks are distributed.\n\n| Marks | Bounds on $N$ | Additional Constraints |\n| :----------: | :----------: | :----------: |\n| $3$ marks | $3 \\leq N \\leq 3^{18}$ | $N$ is a power of $3$. |\n| $4$ marks | $2 \\leq N \\leq 2 \\times 10^5$ | None. |\n| $8$ marks | $2 \\leq N \\leq 2 \\times 10^9$ | None. |\n", "outputFormat": "Output all integers $x$ where $0 \\leq x \\leq N$ and $\\frac{x}{N}$ is in the Cantor set.\n\nOutput the answers in increasing order. The number of answers will not exceed $10^6$.\n", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/jy3xb2rz.png)\n\n$\\frac{5}{12},\\frac{6}{12},\\frac{7}{12}$ are not in the Cantor set because they were covered by the 1st filter.\nFurthermore, $\\frac{2}{12}$ and $\\frac{10}{12}$\nare not in the Cantor set because they were covered by the $2^{\\text{nd}}$ filter.\n\nIt can be shown that the remaining fractions will pass through all filters.\n\n**本题采用捆绑测试**：\n\n- Subtask 1（3 points）：$3 \\leq N \\leq 3 ^{18}$，$N$ 是 $3$ 的整数次幂。\n\n- Subtask 2（4 points）：$2 \\leq N \\leq 2\\times 10^5$。\n\n- Subtask 3（8 points）：$2 \\leq N \\leq 2 \\times 10^9$。", "locale": "en", "translations": {"en": {"title": "[CCC 2023 S5] The Filter", "background": "", "description": "Alice, the mathematician, likes to study real numbers that are between $0$ and $1$. Her favourite tool is the filter.\n\nA filter covers part of the number line. When a number reaches a filter, two events can happen. If a number is not covered by the filter, the number will pass through. If a number is covered, the number will be removed.\n\nAlice has infinitely many filters. Her first $3$ filters look like this:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2rm8ihzn.png)\n\nIn general, the $k\\text{-th}$ filter can be defined as follows:\n\n- Consider the number line from $0$ to $1$.\n\n- Split this number line into $3^k$ equal-sized pieces. There are $3^k + 1$ points and $3^k$ intervals.\n\n- The $k\\text{-th}$ filter consists of the $2^{\\text{nd}}$ interval, $5^{\\text{th}}$ interval, $8^{\\text{th}}$ interval, and in general, the $(3i-1)^{\\text{th}}$ interval. The points are **not** part of the $k\\text{-th}$ filter.\n\nAlice has instructions for constructing the Cantor set. Start with the number line from $0$ to $1$. Apply all filters on the number line, and remove the numbers that are covered. The remaining numbers form the Cantor set.\n\nAlice wants to research the Cantor set, and she came to you for help. Given an integer $N$, Alice would like to know which fractions $\\frac{x}{N}$ are in the Cantor set.", "inputFormat": "The first line contains the integer $N$.\n\nThe following table shows how the available $15$ marks are distributed.\n\n| Marks | Bounds on $N$ | Additional Constraints |\n| :----------: | :----------: | :----------: |\n| $3$ marks | $3 \\leq N \\leq 3^{18}$ | $N$ is a power of $3$. |\n| $4$ marks | $2 \\leq N \\leq 2 \\times 10^5$ | None. |\n| $8$ marks | $2 \\leq N \\leq 2 \\times 10^9$ | None. |\n", "outputFormat": "Output all integers $x$ where $0 \\leq x \\leq N$ and $\\frac{x}{N}$ is in the Cantor set.\n\nOutput the answers in increasing order. The number of answers will not exceed $10^6$.\n", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/jy3xb2rz.png)\n\n$\\frac{5}{12},\\frac{6}{12},\\frac{7}{12}$ are not in the Cantor set because they were covered by the 1st filter.\nFurthermore, $\\frac{2}{12}$ and $\\frac{10}{12}$\nare not in the Cantor set because they were covered by the $2^{\\text{nd}}$ filter.\n\nIt can be shown that the remaining fractions will pass through all filters.\n\n**本题采用捆绑测试**：\n\n- Subtask 1（3 points）：$3 \\leq N \\leq 3 ^{18}$，$N$ 是 $3$ 的整数次幂。\n\n- Subtask 2（4 points）：$2 \\leq N \\leq 2\\times 10^5$。\n\n- Subtask 3（8 points）：$2 \\leq N \\leq 2 \\times 10^9$。", "locale": "en"}, "zh-CN": {"title": "[CCC 2023 S5] The Filter", "background": "", "description": "数学家 Alice 喜欢研究介于 $0$ 和 $1$ 之间的实数。她最喜欢的工具是滤器。\n\n滤器覆盖数轴的一部分。当一个数字到达滤器时，会发生两种情况。如果一个数字没有被滤器覆盖，则该数字将通过。如果一个数字被覆盖，则该数字将被移除。\n\nAlice 有无数个滤器。她的前三个滤器如下所示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2rm8ihzn.png)\n\n一般来说，第 $k$ 个滤器可以定义如下：\n\n- 考虑从 $0$ 到 $1$ 的数轴。\n\n- 将这个数轴分成 $3^k$ 个等大小的部分。有 $3^k + 1$ 个点和 $3^k$ 个区间。\n\n- 第 $k$ 个滤器由第 $2$ 个区间、第 $5$ 个区间、第 $8$ 个区间组成，一般来说，是第 $(3i-1)$ 个区间。这些点**不**是第 $k$ 个滤器的一部分。\n\nAlice 有构造 Cantor 集合的说明。首先从 $0$ 到 $1$ 的数轴开始。对数轴应用所有滤器，并移除被覆盖的数字。剩下的数字形成 Cantor 集合。\n\nAlice 想研究 Cantor 集合，她来找你帮忙。给定一个整数 $N$，Alice 想知道哪些分数 $\\frac{x}{N}$ 在 Cantor 集合中。", "inputFormat": "第一行包含整数 $N$。\n\n下表显示了可用的 $15$ 分的分布情况。\n\n| 分数 | $N$ 的范围 | 额外约束 |\n| :----------: | :----------: | :----------: |\n| $3$ 分 | $3 \\leq N \\leq 3^{18}$ | $N$ 是 $3$ 的幂。 |\n| $4$ 分 | $2 \\leq N \\leq 2 \\times 10^5$ | 无。 |\n| $8$ 分 | $2 \\leq N \\leq 2 \\times 10^9$ | 无。 |", "outputFormat": "输出所有整数 $x$，其中 $0 \\leq x \\leq N$ 且 $\\frac{x}{N}$ 在 Cantor 集合中。\n\n按递增顺序输出答案。答案的数量不会超过 $10^6$。", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/jy3xb2rz.png)\n\n$\\frac{5}{12},\\frac{6}{12},\\frac{7}{12}$ 不在 Cantor 集合中，因为它们被第一个滤器覆盖。此外，$\\frac{2}{12}$ 和 $\\frac{10}{12}$ 不在 Cantor 集合中，因为它们被第二个滤器覆盖。\n\n可以证明，剩下的分数将通过所有滤器。\n\n**本题采用捆绑测试**：\n\n- 子任务 1（3 分）：$3 \\leq N \\leq 3 ^{18}$，$N$ 是 $3$ 的整数次幂。\n\n- 子任务 2（4 分）：$2 \\leq N \\leq 2\\times 10^5$。\n\n- 子任务 3（8 分）：$2 \\leq N \\leq 2 \\times 10^9$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9329", "type": "P", "difficulty": 6, "samples": [["5 4 3\n1 2\n1 3\n2 4\n2 5\n2 9\n2 4\n3 5\n4 7\n3 4 2 11\n5 3 4 5\n2 3 1 1\n", "1\n2\n-1\n"], ["10 7 9\n1 8\n6 3\n5 9\n7 9\n3 1\n3 4\n10 1\n2 6\n5 6\n9 4\n7 4\n7 4\n2 4\n7 4\n7 4\n1 4\n8 6 5 3\n3 9 8 0\n4 7 6 15\n7 4 9 3\n6 4 8 0\n9 10 5 16\n5 3 2 4\n2 8 4 3\n6 1 3 3\n", "3\n6\n6\n7\n7\n3\n1\n2\n2\n"], ["8 7 11\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n4 4\n3 7\n2 10\n5 2\n4 1\n4 4\n5 6\n6 3 7 69\n7 1 5 55\n3 1 6 8\n8 2 5 45\n4 6 4 45\n6 1 3 33\n2 1 0 19\n3 7 2 31\n7 1 2 31\n7 2 4 58\n8 3 5 63\n", "7\n5\n5\n5\n4\n2\n0\n2\n1\n4\n5\n"], ["8 7 11\n1 8\n1 4\n3 1\n3 6\n6 7\n2 1\n5 2\n5 5\n5 8\n4 7\n6 6\n4 1\n6 4\n1 7\n4 7 2 18\n2 4 5 1\n4 2 1 32\n1 5 7 21\n2 5 0 50\n8 4 4 33\n1 7 6 16\n4 8 7 18\n1 2 8 13\n5 4 10 42\n7 1 6 40\n", "1\n3\n1\n7\n0\n4\n5\n7\n8\n10\n6"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2023] 两种货币 / Two Currencies", "background": "", "description": "在 JOI 王国中，有 $n$ 个城市，编号从 $1$ 到 $n$。JOI 王国有 $n−1$ 条双向道路，编号从 $1$ 到 $n−1$。第 $i$ 条道路连接城市 $a_i$ 和城市 $b_i$。\n\n在 JOI 王国中，一些道路上放有检查站。有 $m$ 个检查站，编号从 $1$ 到 $m$。第 $j$ 个检查站位于道路 $p_j$ 上。通过该检查站需要支付 $1$ 枚金币或 $c_j$ 枚银币。\n\n在 JOI 王国有 $q$ 名公民，编号从 $1$ 到 $q$。第 $k$ 名公民持有 $x_k$ 枚金币和 $y_k$ 枚银币，并希望从城市 $s_k$ 前往城市 $t_k$。由于金币具有较高的价值，所有公民都希望尽可能多地保留金币。\n\n编写一个程序，给定 JOI 王国中的城市、道路、检查站和公民信息，对于每个 $k (1≤k≤q)$，判断公民 $k$ 是否能够从城市 $s_k$ 前往城市 $t_k$，并在此条件成立时计算公民 $k$ 所能保留的最多金币数。", "inputFormat": "从标准输入读入以下数据。\n> $N \\ M \\ Q$\n>\n> $A_1 \\ B_1$\n>\n> $A_2 \\ B_2$\n>\n> $\\vdots$\n>\n> $A_{N - 1} \\ B_{N - 1}$\n>\n> $P_1 \\ C_1$\n>\n> $P_2 \\ C_2$\n>\n> $\\vdots$\n>\n> $P_M \\ C_M$\n>\n> $S_1 \\ T_1 \\ X_1 \\ Y_1$\n>\n> $S_2 \\ T_2 \\ X_2 \\ Y_2$\n>\n> $\\vdots$\n>\n> $S_Q \\ T_Q \\ X_Q \\ Y_Q$", "outputFormat": "向标准输出打印 $q$ 行。在第 $k$ 行 $(1≤k≤q)$ 中，如果公民 $k$ 可以从城市 $s_k$ 前往城市 $t_k$，请输出公民 $k$ 可以保留的最多金币数。否则，在第 $k$ 行中输出 $−1$。\n\nTranslate by @[ZeXic_B](https://www.luogu.com.cn/user/661274)", "hint": "数据范围：$2\\le N\\le 10^5$，$1\\le M,Q\\le 10^5$，$1\\le A_i,B_i\\le N$，$1\\le P_i\\le N-1$，$1\\le C_j\\le 10^9$，$1\\le S_k,T_k\\le N$，$S_k\\neq T_k$，$0\\le X_k\\le 10^9$，$0\\le Y_k\\le 10^{18}$，所有数都是整数，所有城市连通。\n\nSubtasks：\n- Subtask 1（10 分）：$N,M,Q\\le 2000$。\n- Subtask 2（28 分）：$C_1=C_2=\\cdots=C_M$。\n- Subtask 3（30 分）：$A_i=i$，$B_i=i+1$。\n- Subtask 4（32 分）：无特殊限制。", "locale": "zh-CN", "translations": {"en": {"title": "[JOIST 2023] Two Currencies", "background": null, "description": "There are $N$ cities in JOI Kingdom, numbered from $1$ to $N$. There are $N - 1$ roads in JOI Kingdom, numbered from $1$ to $N - 1$. The road $i \\ (1 \\le i \\le N - 1)$ connects the city $A_i$ and the city $B_i$ bi-directionally. It is possible to travel from any city to any other city by passing through some of the roads.\n\nThere are checkpoints on some of the roads in JOI Kingdom. There are $M$ checkpoints, numbered from $1$ to $M$. The checkpoint $j \\ (1 \\le j \\le M)$ is located on the road $P_j$. In order to pass through it, you need to pay either one gold coin or $C_j$ silver coins.\n\nThere are $Q$ citizens in JOI Kingdom, numbered from $1$ to $Q$. The citizen $k \\ (1 \\le k \\le Q)$ has $X_k$ gold coins and $Y_k$ silver coins, and wants to travel from the city $S_k$ to the city $T_k$. Since gold coins are valuable, all the citizens want to keep as many gold coins as possible.\n\nWrite a program which, given information of the cities, the roads, the checkpoints, and the citizens in JOI Kingdom, for each $k \\ (1 \\le k \\le Q)$, determines whether it is possible for the citizen $k$ to travel from the city $S_k$ to the city $T_k$, and, if it is possible, calculates the maximum possible number of gold coins the citizen $k$ can keep.", "inputFormat": "Read the following data from the standard input.\n\n> $N \\ M \\ Q$\n>\n> $A_1 \\ B_1$\n>\n> $A_2 \\ B_2$\n>\n> $\\vdots$\n>\n> $A_{N - 1} \\ B_{N - 1}$\n>\n> $P_1 \\ C_1$\n>\n> $P_2 \\ C_2$\n>\n> $\\vdots$\n>\n> $P_M \\ C_M$\n>\n> $S_1 \\ T_1 \\ X_1 \\ Y_1$\n>\n> $S_2 \\ T_2 \\ X_2 \\ Y_2$\n>\n> $\\vdots$\n>\n> $S_Q \\ T_Q \\ X_Q \\ Y_Q$", "outputFormat": "Write $Q$ lines to the standard output. In the $k$-th line $(1 \\le k \\le Q)$, if the citizen $k$ can travel from the city $S_k$ to the city $T_k$, output the maximum possible number of gold coins the citizen $k$ can keep. Otherwise, output $-1$ in the $k$-th line.", "hint": "**【样例解释 #1】**\n\nThe citizen $1$ can travel from the city $3$ to the city $4$ as follows. After the travel, the citizen $1$ keeps one gold coin.\n\n1.  The citizen $1$ travels from the city $3$ to the city $1$ by passing through the road $2$. There are the checkpoints $1, 2$ on the road $2$. The citizen $1$ pays one gold coin at the checkpoint $1$ and passes through it, and $4$ silver coins at the checkpoint $2$ and passes through it, respectively. After that, the citizen $1$ keeps one gold coin and $7$ silver coins.\n2. The citizen $1$ travels from the city $1$ to the city $2$ by passing through the road $1$. Since there is no checkpoint on the road $1$, the citizen $1$ keeps one gold coin and $7$ silver coins.\n3. The citizen $1$ travels from the city $2$ to the city $4$ by passing through the road $3$. There is the checkpoint $3$ on the road $3$. The citizen $1$ pays $5$ silver coins at the checkpoint $3$ and passes through it. After that, the citizen $1$ keeps one gold coin and $2$ silver coins.\n\nSince it is impossible for the citizen $1$ to travel by finally keeping more than or equal to $2$ gold coins, output $1$ in the first line.\n\nThe citizen $2$ can travel from the city $5$ to the city $3$ as follows. After the travel, the citizen $2$ keeps two gold coins.\n\n1. The citizen $2$ travels from the city $5$ to the city $2$ by passing through the road $4$. There is the checkpoint $4$ on the road $4$. The citizen $2$ pays one gold coin at the checkpoint $4$ and passes through it. After that, the citizen $2$ keeps $3$ gold coins and $5$ silver coins.\n2. The citizen $2$ travels from the city $2$ to the city $1$ by passing through the road $1$. Since there is no checkpoint on the road $1$, the citizen $2$ keeps $3$ gold coins and $5$ silver coins.\n3. The citizen $2$ travels from the city $1$ to the city $3$ by passing through the road $2$. On the road $2$, there are the checkpoints $1, 2$. The citizen $2$ pays one gold coin at the checkpoint $1$ and passes through it, and $4$ silver coins at the checkpoint $2$ and passes through it, respectively. After that, the citizen $2$ keeps $2$ gold coins and one silver coin.\n\nSince it is impossible for the citizen $2$ to travel by finally keeping more than or equal to $3$ gold coins, output $2$ in the second line.\n\nSince it is impossible for the citizen $3$ to travel from the city $2$ to the city $3$, output $-1$ in the third line.\n\n该样例满足子任务 $1, 4$ 的限制。\n\n**【样例解释 #2】**\n\n该样例满足子任务 $1, 2, 4$ 的限制。\n\n**【样例解释 #3】**\n\n该样例满足子任务 $1, 3, 4$ 的限制。\n\n**【样例解释 #4】**\n\n该样例满足子任务 $1, 4$ 的限制。\n\n\n**【数据范围】**\n\n对于所有测试数据，满足 $2 \\le N \\le 10 ^ 5$，$1 \\le M, Q \\le 10 ^ 5$，$1 \\le A_i, B_i \\le N$，$1 \\le P_j \\le N - 1$，$1 \\le C_j \\le 10 ^ 9$，$1 \\le S_k, T_k \\le N$，$S_k \\ne T_k$，$0 \\le X_k \\le 10 ^ 9$，$0 \\le Y_k \\le 10 ^ {18}$，保证给定的道路使所有城市连通，保证所有输入均为整数。\n\n|子任务编号|分值|限制|\n|:-:|:-:|:-:|\n|$1$|$10$|$N, M, Q \\le 2000$|\n|$2$|$28$|$C_1 = C_2 = \\dots = C_M$|\n|$3$|$30$|$A_i = i$，$B_i = i + 1$|\n|$4$|$32$|无|", "locale": "en"}, "zh-CN": {"title": "[JOIST 2023] 两种货币 / Two Currencies", "background": "", "description": "在 JOI 王国中，有 $n$ 个城市，编号从 $1$ 到 $n$。JOI 王国有 $n−1$ 条双向道路，编号从 $1$ 到 $n−1$。第 $i$ 条道路连接城市 $a_i$ 和城市 $b_i$。\n\n在 JOI 王国中，一些道路上放有检查站。有 $m$ 个检查站，编号从 $1$ 到 $m$。第 $j$ 个检查站位于道路 $p_j$ 上。通过该检查站需要支付 $1$ 枚金币或 $c_j$ 枚银币。\n\n在 JOI 王国有 $q$ 名公民，编号从 $1$ 到 $q$。第 $k$ 名公民持有 $x_k$ 枚金币和 $y_k$ 枚银币，并希望从城市 $s_k$ 前往城市 $t_k$。由于金币具有较高的价值，所有公民都希望尽可能多地保留金币。\n\n编写一个程序，给定 JOI 王国中的城市、道路、检查站和公民信息，对于每个 $k (1≤k≤q)$，判断公民 $k$ 是否能够从城市 $s_k$ 前往城市 $t_k$，并在此条件成立时计算公民 $k$ 所能保留的最多金币数。", "inputFormat": "从标准输入读入以下数据。\n> $N \\ M \\ Q$\n>\n> $A_1 \\ B_1$\n>\n> $A_2 \\ B_2$\n>\n> $\\vdots$\n>\n> $A_{N - 1} \\ B_{N - 1}$\n>\n> $P_1 \\ C_1$\n>\n> $P_2 \\ C_2$\n>\n> $\\vdots$\n>\n> $P_M \\ C_M$\n>\n> $S_1 \\ T_1 \\ X_1 \\ Y_1$\n>\n> $S_2 \\ T_2 \\ X_2 \\ Y_2$\n>\n> $\\vdots$\n>\n> $S_Q \\ T_Q \\ X_Q \\ Y_Q$", "outputFormat": "向标准输出打印 $q$ 行。在第 $k$ 行 $(1≤k≤q)$ 中，如果公民 $k$ 可以从城市 $s_k$ 前往城市 $t_k$，请输出公民 $k$ 可以保留的最多金币数。否则，在第 $k$ 行中输出 $−1$。\n\nTranslate by @[ZeXic_B](https://www.luogu.com.cn/user/661274)", "hint": "数据范围：$2\\le N\\le 10^5$，$1\\le M,Q\\le 10^5$，$1\\le A_i,B_i\\le N$，$1\\le P_i\\le N-1$，$1\\le C_j\\le 10^9$，$1\\le S_k,T_k\\le N$，$S_k\\neq T_k$，$0\\le X_k\\le 10^9$，$0\\le Y_k\\le 10^{18}$，所有数都是整数，所有城市连通。\n\nSubtasks：\n- Subtask 1（10 分）：$N,M,Q\\le 2000$。\n- Subtask 2（28 分）：$C_1=C_2=\\cdots=C_M$。\n- Subtask 3（30 分）：$A_i=i$，$B_i=i+1$。\n- Subtask 4（32 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9330", "type": "P", "difficulty": 7, "samples": [["3 100000007\n", "2\n"], ["4 100000007\n", "28\n"], ["15 999999937\n", "935834920\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2023] JOI 国的节日 2 / Festivals in JOI Kingdom 2", "background": null, "description": "在 JOI 王国，每年都会举行一次全国性的节日。在节日期间，总共有 $N$ 个活动。每个活动的时间表已经固定。$N$ 个活动的时间表由长度为 $N$ 的序列 $a, b$ 描述，满足以下条件：\n\n- 从 $1$ 到 $2N$ 之间的每个整数都出现在 $a$ 或 $b$ 中。\n- $a_i < b_i \\ (1 \\le i \\le N)$。\n- $a_i < a_{i + 1} \\ (1 \\le i \\le N - 1)$。\n\n第 $i$ 个活动将在节日开始后的 $a_i$ 分钟开始，并在节日开始后的 $b_i$ 分钟结束。\n\n节日的参与者可以选择参加任意活动。然而，不允许参加时间表重叠的两个活动。（注意，活动的开始时间和结束时间彼此不同。）\n\nJOI-kun 想参加尽可能多的活动。直到去年，他通过计算机使用以下程序选择参加的活动：\n\n> 对于 $i = 1, 2, \\dots, N$，按以下顺序进行。\n> > 如果第 $i$ 个活动的时间表与他已经选择参加的其他活动的时间表不重叠，他将参加第 $i$ 个活动。否则，他将不参加第 $i$ 个活动。\n\n然而，在学习了计算机科学之后，JOI-kun 注意到上述算法并不一定能最大化他参加的活动数量。从今年开始，JOI-kun 将使用改进的算法。使用改进的算法，JOI-kun 将能够最大化他参加的活动数量。\n\nJOI-kun 想知道使用改进算法时，产生更多活动数量的情况数。\n\n编写一个程序，给定整数 $N$ 和一个大质数 $P$，计算出描述 $N$ 个活动时间表的序列 $a, b$ 的对数，其中改进的算法产生更多的活动数量。由于答案可能非常大，程序应输出答案除以 $P$ 的余数。", "inputFormat": "从标准输入读取以下数据。\n\n> $N \\ P$", "outputFormat": "向标准输出写入一行。输出应包含答案的余数，即描述 $N$ 个活动时间表的序列 $a, b$ 的对数，其中改进的算法产生更多的活动数量，除以 $P$ 的余数。", "hint": "**【样例解释 #1】**\n\n例如，考虑 $a = (1, 2, 4)$ 和 $b = (6, 3, 5)$ 的情况。如果 JOI-kun 使用去年使用的算法，他将只参加第一个活动。另一方面，如果他使用正确的算法来最大化活动数量，他将参加第二个和第三个活动。因此，他将参加两个活动。在这种情况下，改进的算法产生了更多的活动数量。\n\n以下是改进的算法产生更多活动数量的序列对 $a, b$：\n\n- $a = (1, 2, 4), b = (6, 3, 5)$\n- $a = (1, 2, 4), b = (5, 3, 6)$\n\n因此，输出 $2$，这是 $2$ 除以 $100000007$ 的余数。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n有 $28$ 对序列 $a, b$ 满足条件。因此，输出 $28$，这是 $28$ 除以 $100000007$ 的余数。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n有 $5295044602247148$ 对序列 $a, b$ 满足条件。因此，输出 $935834920$，这是 $5295044602247148$ 除以 $999999937$ 的余数。\n\n该样例满足子任务 $3 \\sim 6$ 的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\le N \\le 2 \\times 10 ^ 4$，$10 ^ 8 < P < 10 ^ 9$，保证 $P$ 是质数，保证所有输入均为整数。\n\n|子任务编号|分值|$N \\le$|\n|:-:|:-:|:-:|\n|$1$|$5$|$5$|\n|$2$|$5$|$8$|\n|$3$|$27$|$30$|\n|$4$|$14$|$300$|\n|$5$|$36$|$3000$|\n|$6$|$13$|$2 \\times 10 ^ 4$|\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN", "translations": {"en": {"title": "[JOISC 2023] Festivals in JOI Kingdom 2", "background": "", "description": "In JOI Kingdom, a national festival is held once a year. During the period of the festival, there are $N$ events in total. The schedule for each event is already fixed. The schedule of the $N$ events are described by sequences $a, b$ of length $N$ satisfying the following conditions.\n\n- Every integer between $1$ and $2N$, inclusive, appears as an element of $a$ or $b$.\n- $a_i < b_i \\ (1 \\le i \\le N)$.\n- $a_i < a_{i + 1} \\ (1 \\le i \\le N - 1)$.\n\nThe $i$-th event will start at $a_i$ minutes after the beginning of the festival, and end at $b_i$ minutes after the beginning of the festival.\n\nParticipants of the festival may choose any events in which they will participate. However, it is not allowed to participate in two events whose schedules overlap. (Note that the starting times and the ending times of the events are different from each other.)\n\nJOI-kun wants to participate in as many events as possible. Until last year, he chose the events in which he participated by the following procedures on a computer.\n\n> For $i = 1, 2, \\dots, N$，the following are done in this order.\n> > If the schedule of the $i$-th event does not overlap the schedules of the other events in which he already chose to participate, he will participate in the $i$-th event. Otherwise, he will not participate in the $i$-th event.\n\nHowever, after studying computer science, JOI-kun noticed that the above algorithm does not necessarily maximize the number of events in which JOI-kun will participate. From this year, JOI-kun will use an improved algorithm. Using the improved algorithm, JOI-kun will be able to maximize the number of events in which JOI-kun will participate.\n\nJOI-kun wants to know the number of cases where the improved algorithm produces a larger number of events.\n\nWrite a program which, given the integer $N$ and a large prime number $P$, calculates the number of pairs of sequences $a, b$ describing the schedules of the $N$ events for which the improved algorithm produces a larger number of events. Since the answer can be very large, your program should output the remainder of the answer when divided by $P$.", "inputFormat": "Read the following data from the standard input.\n\n> $N \\ P$", "outputFormat": "Write one line to the standard output. The output should contain the remainder of the answer, the number of pairs of sequences $a, b$ describing the schedules of the $N$ events for which the improved algorithm produces a larger number of events, when divided by $P$.", "hint": "**【样例解释 #1】**\n\nFor example, consider the case where $a = (1, 2, 4)$ and $b = (6, 3, 5)$. If JOI-kun uses the algorithm used until last year, he will participate in the first event only. On the other hand, if he uses a correct algorithm to maximize the number of events, he will participate in the second event and the third event. Thus, he will participate in two events. In this case, the improved algorithm produces a larger number of events.\n\nThe following are the pair of sequences $a, b$ for which the improved algorithm produces a larger number of events.\n\n- $a = (1, 2, 4), b = (6, 3, 5)$\n- $a = (1, 2, 4), b = (5, 3, 6)$\n\nTherefore, output $2$, which is the remainder of $2$ when divided by $100000007$.\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\nThere are $28$ pairs of sequences $a, b$ satisfying the condition. Therefore, output $28$, which is the remainder of $28$ when divided by $100000007$.\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\nThere are $5295044602247148$ pairs of sequences $a, b$ satisfying the condition. Therefore, output $935834920$, which is the remainder of $5295044602247148$ when divided by $999999937$.\n\n该样例满足子任务 $3 \\sim 6$ 的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\le N \\le 2 \\times 10 ^ 4$，$10 ^ 8 < P < 10 ^ 9$，保证 $P$ 是质数，保证所有输入均为整数。\n\n|子任务编号|分值|$N \\le$|\n|:-:|:-:|:-:|\n|$1$|$5$|$5$|\n|$2$|$5$|$8$|\n|$3$|$27$|$30$|\n|$4$|$14$|$300$|\n|$5$|$36$|$3000$|\n|$6$|$13$|$2 \\times 10 ^ 4$|", "locale": "en"}, "zh-CN": {"title": "[JOIST 2023] JOI 国的节日 2 / Festivals in JOI Kingdom 2", "background": null, "description": "在 JOI 王国，每年都会举行一次全国性的节日。在节日期间，总共有 $N$ 个活动。每个活动的时间表已经固定。$N$ 个活动的时间表由长度为 $N$ 的序列 $a, b$ 描述，满足以下条件：\n\n- 从 $1$ 到 $2N$ 之间的每个整数都出现在 $a$ 或 $b$ 中。\n- $a_i < b_i \\ (1 \\le i \\le N)$。\n- $a_i < a_{i + 1} \\ (1 \\le i \\le N - 1)$。\n\n第 $i$ 个活动将在节日开始后的 $a_i$ 分钟开始，并在节日开始后的 $b_i$ 分钟结束。\n\n节日的参与者可以选择参加任意活动。然而，不允许参加时间表重叠的两个活动。（注意，活动的开始时间和结束时间彼此不同。）\n\nJOI-kun 想参加尽可能多的活动。直到去年，他通过计算机使用以下程序选择参加的活动：\n\n> 对于 $i = 1, 2, \\dots, N$，按以下顺序进行。\n> > 如果第 $i$ 个活动的时间表与他已经选择参加的其他活动的时间表不重叠，他将参加第 $i$ 个活动。否则，他将不参加第 $i$ 个活动。\n\n然而，在学习了计算机科学之后，JOI-kun 注意到上述算法并不一定能最大化他参加的活动数量。从今年开始，JOI-kun 将使用改进的算法。使用改进的算法，JOI-kun 将能够最大化他参加的活动数量。\n\nJOI-kun 想知道使用改进算法时，产生更多活动数量的情况数。\n\n编写一个程序，给定整数 $N$ 和一个大质数 $P$，计算出描述 $N$ 个活动时间表的序列 $a, b$ 的对数，其中改进的算法产生更多的活动数量。由于答案可能非常大，程序应输出答案除以 $P$ 的余数。", "inputFormat": "从标准输入读取以下数据。\n\n> $N \\ P$", "outputFormat": "向标准输出写入一行。输出应包含答案的余数，即描述 $N$ 个活动时间表的序列 $a, b$ 的对数，其中改进的算法产生更多的活动数量，除以 $P$ 的余数。", "hint": "**【样例解释 #1】**\n\n例如，考虑 $a = (1, 2, 4)$ 和 $b = (6, 3, 5)$ 的情况。如果 JOI-kun 使用去年使用的算法，他将只参加第一个活动。另一方面，如果他使用正确的算法来最大化活动数量，他将参加第二个和第三个活动。因此，他将参加两个活动。在这种情况下，改进的算法产生了更多的活动数量。\n\n以下是改进的算法产生更多活动数量的序列对 $a, b$：\n\n- $a = (1, 2, 4), b = (6, 3, 5)$\n- $a = (1, 2, 4), b = (5, 3, 6)$\n\n因此，输出 $2$，这是 $2$ 除以 $100000007$ 的余数。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n有 $28$ 对序列 $a, b$ 满足条件。因此，输出 $28$，这是 $28$ 除以 $100000007$ 的余数。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n有 $5295044602247148$ 对序列 $a, b$ 满足条件。因此，输出 $935834920$，这是 $5295044602247148$ 除以 $999999937$ 的余数。\n\n该样例满足子任务 $3 \\sim 6$ 的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\le N \\le 2 \\times 10 ^ 4$，$10 ^ 8 < P < 10 ^ 9$，保证 $P$ 是质数，保证所有输入均为整数。\n\n|子任务编号|分值|$N \\le$|\n|:-:|:-:|:-:|\n|$1$|$5$|$5$|\n|$2$|$5$|$8$|\n|$3$|$27$|$30$|\n|$4$|$14$|$300$|\n|$5$|$36$|$3000$|\n|$6$|$13$|$2 \\times 10 ^ 4$|\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9331", "type": "P", "difficulty": 6, "samples": [["4\n1 3\n2 4\n2 3\n4 4\n1\n1\n", "2\n"], ["5\n1 5\n2 4\n2 3\n3 5\n1 5\n1\n3\n", "4\n"], ["5\n1 1\n2 3\n1 5\n3 4\n5 5\n5\n1\n2\n3\n4\n5\n", "-1\n2\n1\n2\n-1\n"], ["4\n1 2\n1 2\n3 4\n3 4\n4\n1\n2\n3\n4\n", "-1\n-1\n-1\n-1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2023", "O2优化", "最短路", "JOISC/JOIST（日本）"], "title": "[JOIST 2023] 护照 / Passport", "background": null, "description": "护照是旅行家进入他国时使用的证件。\n\n在一个星球上有 $N$ 个国家，从 $1$ 到 $N$ 编号。每个国家都签发一种护照。当旅行家获得由国家$i \\ (1 \\le i \\le N)$ 签发的护照后，他能够进入国家 $L_i, L_i + 1, \\dots, R_i$。**这里保证旅行家能够进入其签证的签发国。形式上地说, $L_i \\le i \\le R_i$ 必然成立。**\n\n你有一个爱旅行的朋友。即使他奢望能环游世界，但他最初一种护照也没有。因此，他想通过一下重复以下两项行为来环游这 $N$ 个国家。\n\n- 获得他当前所在国家签发的护照。\n- 用他现有的护照进入某个国家。\n\n知道他的计划后，你想知道这个计划的是否可行，和如果可行的话，他最少需要的护照数量。因为你并不清楚他现在身处何国，所以你预测了 $Q$ 个他可能正居住在那的国家 $X_1, X_2, \\dots, X_Q$。\n\n现在给定各国护照的信息 $L_i, R_i$ 和他可能居住的 $Q$ 个国家，您需要写一个程序，对于每一个可能居住的国家，判断他是否可能环游这 $N$ 个国家，如果可能的话，计算出他需要的最少护照种数。", "inputFormat": "从标准输入读入：\n\n> $N$\n>\n> $L_1 \\ R_1$\n>\n> $L_2 \\ R_2$\n>\n> $\\vdots$\n>\n> $L_N \\ R_N$\n>\n> $Q$\n>\n> $X_1$\n>\n> $X_2$\n>\n> $\\vdots$\n>\n> $X_Q$", "outputFormat": "输出 $Q$ 行至标准输出，第 $j \\ (1 \\le j \\le Q)$ 行一个整数代表若你的朋友位于国家 $X_j$ 的答案。若他能环游这 $N$ 个国家，则输出他需要的最少护照种数，否则输出 $-1$。", "hint": "**【数据范围】**\n\n对于所有测试数据，满足 $2 \\le N \\le 2 \\times 10 ^ 5$，$1 \\le L_i \\le i \\le R_i \\le N$，$1 \\le Q \\le N$，$1 \\le X_1 < X_2 < \\dots < X_Q \\le N$，保证所有输入均为整数。\n\n|子任务编号|分值|限制|\n|:-:|:-:|:-:|\n|$1$|$6$|$Q = 1$，$X_1 = 1$|\n|$2$|$16$|$N \\le 300$，$Q = 1$|\n|$3$|$24$|$N \\le 2500$，$Q = 1$|\n|$4$|$8$|$N \\le 2500$|\n|$5$|$46$|无|\n\n**【样例解释 #1】**\n\n假设你的朋友居住在国家 $X_1 = 1$，一种可行的方式如下，最后他获得了 $2$ 种护照：\n\n1. 获得国家 $1$ 签发的护照。\n2. 用国家 $1$ 签发的护照去国家 $2$ 旅行。\n3. 获得国家 $2$ 签发的护照。\n4. 用国家 $1$ 签发的护照去国家 $3$ 旅行。\n5. 用国家 $2$ 签发的护照去国家 $4$ 旅行。\n\n可以证明不存在使用护照种数更小的方案，故输出 $2$。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n假设你的朋友居住在国家 $X_1 = 3$。一种可行的方式如下，最后他获得了 $4$ 种护照：\n\n1. 获得国家 $3$ 签发的护照。\n2. 用国家 $3$ 签发的护照去国家 $2$ 旅行。\n3. 获得国家 $2$ 签发的护照。\n4. 用国家 $2$ 签发的护照去国家 $4$ 旅行。\n5. 获得国家 $4$ 签发的护照。\n6. 用国家 $4$ 签发的护照去国家 $5$ 旅行。\n7. 获得国家 $5$ 签发的护照。\n8. 用国家 $5$ 签发的护照去国家 $1$ 旅行。\n\n可以证明不存在使用护照种数更小的方案，故输出 $4$。\n\n该样例满足子任务 $2 \\sim 5$ 的限制。\n\n**【样例解释 #3】**\n\n例如，如果你的朋友居住在 $X_3 = 3$，一种可行的方案书获得国家 $3$ 签发的护照，并用它来依次去国家 $1, 2, 4, 5$ 旅行。故第三行输出 $3$。\n\n但如果你的朋友居住在国家 $X_5 = 5$，即使他获得了国家 $5$ 签发的护照，他也不可能进入任何其他国家，因此，他无法实现自己的旅行计划。故第五行输出 $-1$。\n\n该样例满足子任务 $4 \\sim 5$ 的限制。\n\n**【样例解释 #4】**\n\n该样例满足子任务 $4 \\sim 5$ 的限制。", "locale": "zh-CN", "translations": {"en": {"title": "[JOIST 2023] Passport", "background": null, "description": "Passport is a certificate which is used worldwide when a traveler enters foreign countries.\n\nIn a planet, there are $N$ countries, numbered from $1$ to $N$. Each country issues a passport. When a traveler has a passport issued by the country $i \\ (1 \\le i \\le N)$, the traveler can enter the countries $L_i, L_i + 1, \\dots, R_i$. **Here, it is guaranteed that the traveler can enter the country where the passport was issued. Namely, $L_i \\le i \\le R_i$ is satisfied.**\n\nYou have a friend who likes traveling. Although he dreams of traveling around the world, he does not have a passport in the beginning. Thus, he plans to visit all of the $N$ countries by repeating the following two actions.\n\n- He gets a passport issued by the country where he is currently staying.\n- He moves to a country where he can enter using a passport he currently has.\n\nWhen you hear about his plan, you are wondering whether it is possible to realize the plan, and, if it is possible, what is the minimum number of passports he needs to get. Since you do not know where he lives, you consider $Q$ possible countries $X_1, X_2, \\dots, X_Q$ where he lives.\n\nWrite a program which, given information of the passports and the possibilities of his living place, for each possibility, determines whether it is possible for him to visit all of the $N$ countries, and, if it is possible, calculates the minimum number of passports he needs to get.", "inputFormat": "Read the following data from the standard input.\n\n> $N$\n>\n> $L_1 \\ R_1$\n>\n> $L_2 \\ R_2$\n>\n> $\\vdots$\n>\n> $L_N \\ R_N$\n>\n> $Q$\n>\n> $X_1$\n>\n> $X_2$\n>\n> $\\vdots$\n>\n> $X_Q$", "outputFormat": "Write $Q$ lines to the standard output. The $j$-th line $(1 \\le j \\le Q)$ corresponds to the case where your friend lives in the country $X_j$. If it is possible for him to visit all of the $N$ countries, this line should contain the minimum number of passports he needs to get. Otherwise, this line should contain $-1$.", "hint": "**【样例解释 #1】**\n\nAssume that your friend lives in the country $X_1 = 1$. It is possible for him to visit all of the $4$ countries if he acts in the following way. Then, he gets $2$ passports.\n\n1. He gets a passport issued by the country $1$.\n2. Using the passport issued by the country $1$, he moves to the country $2$.\n3. He gets a passport issued by the country $2$.\n4. Using the passport issued by the country $1$, he moves to the country $3$.\n5. Using the passport issued by the country $2$, he moves to the country $44.\n\nSince it is impossible to realize the plan if he gets less than or equal to $1$ passport, output $2$.\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\nAssume that your friend lives in the country $X_1 = 3$. It is possible for him to visit all of the $5$ countries if he acts in the following way. Then, he gets $4$ passports.\n1. He gets a passport issued by the country $3$.\n2. Using the passport issued by the country $3$, he moves to the country $2$.\n3. He gets a passport issued by the country $2$.\n4. Using the passport issued by the country $2$, he moves to the country $4$.\n5. He gets a passport issued by the country $4$.\n6. Using the passport issued by the country $4$, he moves to the country $5$.\n7. He gets a passport issued by the country $5$.\n8. Using the passport issued by the country $5$, he moves to the country $1$.\n\nSince it is impossible to realize the plan if he gets less than or equal to $3$ passports, output $4$.\n\n该样例满足子任务 $2 \\sim 5$ 的限制。\n\n**【样例解释 #3】**\n\nFor example, if your friend lives in the country $X_3 = 3$, it is possible to realize the plan if he gets a passport issued by the country $3$, and uses it to visit the countries $1, 2, 4, 5$ in this order. Therefore, output $1$ in the third line.\n\nOn the other hand, if your friend lives in the country $X_5 = 5$, it is impossible for him to enter other countries even if he gets a passport issued by the country $5$. Thus, he cannot realize the plan. Therefore, output $-1$ in the fifth line.\n\n该样例满足子任务 $4 \\sim 5$ 的限制。\n\n**【样例解释 #4】**\n\n该样例满足子任务 $4 \\sim 5$ 的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $2 \\le N \\le 2 \\times 10 ^ 5$，$1 \\le L_i \\le i \\le R_i \\le N$，$1 \\le Q \\le N$，$1 \\le X_1 < X_2 < \\dots < X_Q \\le N$，保证所有输入均为整数。\n\n|子任务编号|分值|限制|\n|:-:|:-:|:-:|\n|$1$|$6$|$Q = 1$，$X_1 = 1$|\n|$2$|$16$|$N \\le 300$，$Q = 1$|\n|$3$|$24$|$N \\le 2500$，$Q = 1$|\n|$4$|$8$|$N \\le 2500$|\n|$5$|$46$|无|", "locale": "en"}, "zh-CN": {"title": "[JOIST 2023] 护照 / Passport", "background": null, "description": "护照是旅行家进入他国时使用的证件。\n\n在一个星球上有 $N$ 个国家，从 $1$ 到 $N$ 编号。每个国家都签发一种护照。当旅行家获得由国家$i \\ (1 \\le i \\le N)$ 签发的护照后，他能够进入国家 $L_i, L_i + 1, \\dots, R_i$。**这里保证旅行家能够进入其签证的签发国。形式上地说, $L_i \\le i \\le R_i$ 必然成立。**\n\n你有一个爱旅行的朋友。即使他奢望能环游世界，但他最初一种护照也没有。因此，他想通过一下重复以下两项行为来环游这 $N$ 个国家。\n\n- 获得他当前所在国家签发的护照。\n- 用他现有的护照进入某个国家。\n\n知道他的计划后，你想知道这个计划的是否可行，和如果可行的话，他最少需要的护照数量。因为你并不清楚他现在身处何国，所以你预测了 $Q$ 个他可能正居住在那的国家 $X_1, X_2, \\dots, X_Q$。\n\n现在给定各国护照的信息 $L_i, R_i$ 和他可能居住的 $Q$ 个国家，您需要写一个程序，对于每一个可能居住的国家，判断他是否可能环游这 $N$ 个国家，如果可能的话，计算出他需要的最少护照种数。", "inputFormat": "从标准输入读入：\n\n> $N$\n>\n> $L_1 \\ R_1$\n>\n> $L_2 \\ R_2$\n>\n> $\\vdots$\n>\n> $L_N \\ R_N$\n>\n> $Q$\n>\n> $X_1$\n>\n> $X_2$\n>\n> $\\vdots$\n>\n> $X_Q$", "outputFormat": "输出 $Q$ 行至标准输出，第 $j \\ (1 \\le j \\le Q)$ 行一个整数代表若你的朋友位于国家 $X_j$ 的答案。若他能环游这 $N$ 个国家，则输出他需要的最少护照种数，否则输出 $-1$。", "hint": "**【数据范围】**\n\n对于所有测试数据，满足 $2 \\le N \\le 2 \\times 10 ^ 5$，$1 \\le L_i \\le i \\le R_i \\le N$，$1 \\le Q \\le N$，$1 \\le X_1 < X_2 < \\dots < X_Q \\le N$，保证所有输入均为整数。\n\n|子任务编号|分值|限制|\n|:-:|:-:|:-:|\n|$1$|$6$|$Q = 1$，$X_1 = 1$|\n|$2$|$16$|$N \\le 300$，$Q = 1$|\n|$3$|$24$|$N \\le 2500$，$Q = 1$|\n|$4$|$8$|$N \\le 2500$|\n|$5$|$46$|无|\n\n**【样例解释 #1】**\n\n假设你的朋友居住在国家 $X_1 = 1$，一种可行的方式如下，最后他获得了 $2$ 种护照：\n\n1. 获得国家 $1$ 签发的护照。\n2. 用国家 $1$ 签发的护照去国家 $2$ 旅行。\n3. 获得国家 $2$ 签发的护照。\n4. 用国家 $1$ 签发的护照去国家 $3$ 旅行。\n5. 用国家 $2$ 签发的护照去国家 $4$ 旅行。\n\n可以证明不存在使用护照种数更小的方案，故输出 $2$。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n假设你的朋友居住在国家 $X_1 = 3$。一种可行的方式如下，最后他获得了 $4$ 种护照：\n\n1. 获得国家 $3$ 签发的护照。\n2. 用国家 $3$ 签发的护照去国家 $2$ 旅行。\n3. 获得国家 $2$ 签发的护照。\n4. 用国家 $2$ 签发的护照去国家 $4$ 旅行。\n5. 获得国家 $4$ 签发的护照。\n6. 用国家 $4$ 签发的护照去国家 $5$ 旅行。\n7. 获得国家 $5$ 签发的护照。\n8. 用国家 $5$ 签发的护照去国家 $1$ 旅行。\n\n可以证明不存在使用护照种数更小的方案，故输出 $4$。\n\n该样例满足子任务 $2 \\sim 5$ 的限制。\n\n**【样例解释 #3】**\n\n例如，如果你的朋友居住在 $X_3 = 3$，一种可行的方案书获得国家 $3$ 签发的护照，并用它来依次去国家 $1, 2, 4, 5$ 旅行。故第三行输出 $3$。\n\n但如果你的朋友居住在国家 $X_5 = 5$，即使他获得了国家 $5$ 签发的护照，他也不可能进入任何其他国家，因此，他无法实现自己的旅行计划。故第五行输出 $-1$。\n\n该样例满足子任务 $4 \\sim 5$ 的限制。\n\n**【样例解释 #4】**\n\n该样例满足子任务 $4 \\sim 5$ 的限制。", "locale": "zh-CN"}}}
{"pid": "P9332", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "交互题", "Special Judge", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2023] 传送带 / Belt Conveyor", "background": "不要 $\\texttt{\\#include \"conveyor.h\"}$。请使用 $\\texttt{C++\\,20}$ 提交。\n\n提交前请将以下内容粘贴到代码前面：\n\n```cpp\n#include <vector>\n\nvoid Solve(int N, std::vector<int> A, std::vector<int> B);\n\nstd::vector<int> Query(std::vector<int> x, std::vector<int> y);\nvoid Answer(std::vector<int> a);\n```", "description": "在 JOI 有限公司的工厂里，有 $N$ 张桌子，从 $0$ 到 $N-1$ 编号。工厂里有 $N-1$ 条皮带输送机，从 $0$ 到 $N-2$ 编号。第 $i$ 条 $(0 \\le i \\le N-2)$ 皮带输送机连接桌子 $A_i$ 和桌子 $B_i$。它将产品从一张桌子运输到另一张桌子。然而，我们**不知道**运输的方向。\n\n\nIOI-kun 是工厂的经理。由于他忘记了每条皮带输送机的运输方向，他将多次按照以下顺序执行操作。\n1. 选择几条输送带，并反转所选输送带的运输方向。\n2. 选择几张桌子，并在每张选定的桌子上放一件商品。\n3. 每当把产品放在一张桌子上时，就会发生以下情况之一。\n\n- 如果没有输送带将产品从该桌子运走，则不会发生任何事情。\n- 如果有输送带将产品从该桌子运走，则桌子上的产品将由其中一条输送带运输。产品将在输送带的目的地停止，并且产品将不再移动。\n4. IOI-kun 会确认每张桌子上是否有产品。如果有产品在桌子上，IOI-kun 会把它们全部拿走。\n5. 对于每个在操作 1 中改变了方向的皮带输送机，IOI-kun 都会将其方向恢复到原来的方向。IOI-kun 希望通过最多执行 $30$ 次上述顺序操作来为每个皮带输送机指定原始方向。\n\n请编写一个程序，根据皮带输送机之间的连接表，实现 IOI-kun 的策略，以通过最多执行 $30$ 次上述顺序操作来为每个皮带输送机指定原始方向。\n\n### 实现细节\n\n你需要实现一份 C++ 程序，提交时**不需要**包含 `conveyor.h`。\n\n你应该实现以下函数。\n\n```cpp\nvoid Solve(int N, std::vector<int> A, std::vector<int> B)\n```\n\n\n该函数仅在每个测试用例中被调用一次：\n\n- 参数 $N$：传送带连接的桌子的数量。\n- 参数 $A$ 和 $B$ 是长度为 $N - 1$ 的数组，描述由皮带输送机连接的桌子。\n\n您的程序可以调用以下函数：\n\n```cpp\nstd::vector<int> Query(std::vector<int> x, std::vector<int> y)\n```\n\n\n使用这个函数，IOI-kun 在工厂中执行操作。\n\n- 参数 $x$ 是一个长度为 $N - 1$ 的数组。对于 $0\\le i\\le N - 2$，如果 $x_i = 1$，IOI-kun 将反转第 $i$ 个传送带的方向，否则不反转该传送带的方向。\n- 参数 $y$ 是一个长度为 $N$ 的数组。对于 $0 \\le j \\le N - 1$，如果 $y_j = 1$，IOI-kun 将在第 $j$ 个桌子上放置一个产品，否则不会在该桌子上放置产品。\n- 设 $z$ 是该函数的返回值。它是一个长度为 $N$ 的数组。对于 $0 \\le j \\le N - 1$，如果 $z_j = 1$，则第 $j$ 个桌子上有产品，如果 $z_j = 0$，则第 $j$ 个桌子上没有产品。\n- 数组 $x$ 的长度应等于 $N - 1$。如果不满足此条件，您的程序将被评为 `Wrong Answer[1]`。\n- 数组 $x$ 中的每个元素都应为 $0$ 或 $1$。如果不满足此条件，您的程序将被评为 `Wrong Answer[2]`。\n- 数组 $y$ 的长度应等于 $N$。如果不满足此条件，您的程序将被评为 `Wrong Answer[3]`。\n- 数组 $y$ 中的每个元素都应为 $0$ 或 $1$。如果不满足上述条件，您的程序将被评为 `Wrong Answer[4]`。\n- 函数 Query 最多只能被调用 $30$ 次。如果被调用次数超过 $30$ 次，您的程序将被评为 `Wrong Answer[5]`。\n\n```cpp\nvoid Answer(std::vector<int> a)\n```\n\n使用这个函数，IOI-kun 会报告每个输送带的原始方向。\n\n- 参数 $a$ 是一个长度为 $N - 1$ 的数组。对于 $0 \\le i \\le N - 2$，如果 $a_i = 0$，则输送带 $i$ 将产品从 $A_i$ 运输到 $B_i$，如果 $a_i = 1$，则将产品从 $B_i$ 运输到 $A_i$。\n- 数组 $a$ 的长度必须等于 $N - 1$。如果条件不满足，您的程序将被评为 `Wrong Answer[6]`。\n- 数组 $a$ 中的每个元素都必须为 $0$ 或 $1$。如果条件不满足，您的程序将被评为 `Wrong Answer[7]`。\n- 如果 IOI-kun 报告了输送带的错误方向，您的程序将被评为 `Wrong Answer[8]`。\n- 函数 `Answer` 必须被**恰好调用一次**。如果函数 `Answer` 被调用多次，您的程序将被评为 `Wrong Answer[9]`。当函数 `Solve` 结束时，如果函数 `Answer` 尚未被调用，您的程序将被评为 `Wrong Answer[10]`。", "inputFormat": "样例评测库将读入以下格式的数据：\n```\nN\nA[0] A[1] ... A[N - 2]\nB[0] B[1] ... B[N - 2]\nC[0] C[1] ... C[N - 2]\n```\n对于 $0\\le i\\le N - 2$，如果第 $i$ 条传送带会将产品从 $A_i$ 运输至 $B_i$，那么 $C_i$ 为 $0$，否则 $C_i$ 为 $1$。", "outputFormat": "样例评测库将以下信息输出到 stdout。\n\n-如果你的程序被判断为正确，它报告的函数 `Query` 调用的数量为 `Accepted: 22` 。\n\n-如果你的程序被判定为任何类型的错误答案，样例评分员将其类型写为 `Wrong Answer[4]`。\n\n\n\n如果您的程序满足几种类型的错误答案的条件，则样例评测库只报告其中一种。\n\n### 输入输出样例\n#### 样例 #1\n```plain\n3\n0 2\n2 1\n1 0\n```", "hint": "|函数调用|函数调用|返回值|\n|:-|:-|:-|\n|`Solve(3, [0, 2], [2, 1])`|||\n||`Query([0, 0], [0, 0, 1])`|`[1, 0, 0]`|\n||`Query([1, 0], [1, 0, 1])`|`[0, 1, 1]`|\n||`Query([1, 1], [0, 0, 1])`|`[0, 0, 1]`|\n||`Query([0, 1], [1, 1, 1])`|`[1, 0, 1]`|\n||`Answer([1, 0])`||\n\n对于对 `Query` 的第一次调用，另一个可能的返回值是 `[0,1,0]`。\n\n\n\n对于对 `Query` 的第二次调用，位置为 $0$ 上的产品通过传送带 $0$ 被传送到位置 $2$，并停在那里。请注意，该产品不会被传送带 $1$ 输送到位置 $1$。\n\n\n\n注意，这个示例输入**不满足任何子任务**的限制条件。\n\n\n\n下发文件中，`sample-02.txt` 满足 Subtask $1$ 的限制条件，`sample-03.txt` 满足 Subtask $2$ 的限制条件。\n\n对于某些测试用例，实际的评测程序**是自适应的**。这意味着评测程序在开始时没有固定的答案，并根据先前对 `Query` 函数的调用进行响应。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $0 \\le A_i, B_i \\le N - 1$，保证忽略所有传送带的方向后所有机器连通，保证所有输入均为整数。\n\n|子任务编号|分值|$N =$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$1$|$2$|无|\n|$2$|$14$|$30$|无|\n|$3$|$10$|$10 ^ 5$|$A_i = i$，$B_i = i + 1$|\n|$4$|$75$|$10 ^ 5$|无|\n\nTranslate by @[tbdsh](/user/752485).", "locale": "zh-CN", "translations": {"en": {"title": "[JOIST 2023] Belt Conveyor", "background": "**This is an interactive task. **\nPlease paste the following content in front of the code before submission:\n\n```cpp\n#include <vector>\n\nvoid Solve(int N, std::vector<int> A, std::vector<int> B);\n\nstd::vector<int> Query(std::vector<int> x, std::vector<int> y);\nvoid Answer(std::vector<int> a);\n```", "description": "**【题目描述】**\n\nIn the factory of JOI Co., Ltd., there are $N$ tables, numbered from $0$ to $N - 1$. In the factory, there are $N - 1$ belt conveyors, numbered from $0$ to $N - 2$. The belt conveyor $i \\ (0 \\le i \\le N - 2)$ connects the table $A_i$ and the table $B_i$. It transports products from one table to the other table. However, we cannot see the direction of transportation. If we ignore the directions of the belt conveyors, every pair of tables is connected by a number of belt conveyors.\n\nIOI-kun is the director of the factory. Since he forgets the direction of transportation of every belt conveyor, he will perform the following sequential operations several times.\n\n1. He chooses a number of belt conveyors, and reverses the directions of transportation of the chosen belt conveyors.\n2. He chooses a number of tables, and puts a product on each chosen table.\n3. For every table where a product is put, one of the following happens simultaneously.\n    - If there is no belt conveyor transporting products from it, nothing happens.\n    - If there are belt conveyors transporting products from it, the product on the table is transported by one of such belt conveyors. The product stops at the destination of the belt conveyor. The product will not move anymore.\n4. IOI-kun confirms whether there are one or more products on each table. If there are products on a table, IOI-kun takes all of them.\n5. For every belt conveyor whose direction is reversed in the operation 1., IOI-kun reverts its direction. Its direction becomes the original direction.\n\nIOI-kun wants to specify the original direction of every belt conveyor by performing the above sequential operations at most $30$ times.\n\nWrite a program which, given information of the tables connected by the belt conveyors, implements IOI-kun’s strategy to specify the original direction of every belt conveyor by performing the above sequential operations at most $30$ times.\n\n**【实现细节】**\n\nYou need to submit one file.\n\nThe file is `conveyor.cpp`. It should implement the following function. The program should include `conveyor.h` using the preprocessing directive `#include`.\n\nIn `conveyor.cpp`, the following function should be implemented.\n\n```cpp\nvoid Solve(int N, std::vector<int> A, std::vector<int> B)\n```\n\nThis function is called only once for each test case.\n\n- The parameter `N` is the number of tables $N$.\n- The parameters `A，B` are arrays of length $N - 1$, describing the tables connected by the belt conveyors.\n\nYour program can call the following function.\n\n```cpp\nstd::vector<int> Query(std::vector<int> x, std::vector<int> y)\n```\n\nUsing this function, IOI-kun performs the operations in the factory.\n\n- The parameter `x` is an array of length $N - 1$. For $0 \\le \\texttt{i} \\le N - 2$, IOI-kun reverses the direction of the belt conveyor `i` if `x[i] = 1`, and does not reverses the direction of the belt conveyor `i` if `x[i] = 0`.\n- The parameter `y` is an array of length $$. For $0 \\le \\texttt{j} \\le N - 1$, IOI-kun puts a product on the table `j` if `y[j] = 1`, and does not put a product on the table `j` if `y[j] = 0`.\n- Let `z` be the return value of this function. It is an array of length $N$. For $0 \\le \\texttt{j} \\le N - 1$, there are one or more products on the table `j` if `z[j] = 1`, and there is no product on the table `j` if `z[j] = 0`.\n- The length of the array `x` should be equal to $N - 1$. If this condition is not satisfied, your program is judged as `Wrong Answer [1]`.\n- Every element of the array `x` should be `0` or `1`. If this condition is not satisfied, your program is judged as `Wrong Answer [2]`.\n- The length of the array `y` should be equal to $N$. If this condition is not satisfied, your program is judged as `Wrong Answer [3]`.\n- Every element of the array `y` should be `0` or `1`. If this condition is not satisfied, your program is judged as `Wrong Answer [4]`.\n- The function Query should not be called more than $30$ times. If it is called more than $30$ times, your program is judged as `Wrong Answer [5]`.\n\n```cpp\nvoid Answer(std::vector<int> a)\n```\n\nUsing this function, IOI-kun reports the original direction of each belt conveyor.\n\n- The parameter `a` is an array of length $N - 1$. For $0 \\le \\texttt{i} \\le N - 2$, the belt conveyor `i` transports products from $A_i$ to $B_i$ if `a[i] = 0`, and it transports products from $B_i$ to $A_i$ if `a[i] = 1`.\n- The length of the array `a` should be equal to $N - 1$. If this condition is not satisfied, your program is judged as `Wrong Answer [6]`.\n- Every element of the array `a` should be `0` or `1`. If this condition is not satisfied, your program is judged as `Wrong Answer [7]`.\n- If IOI-kun reports wrong direction of a belt conveyor, your program is judged as `Wrong Answer [8]`.\n- The function `Answer` should be called exactly once. If the function `Answer` is called more than once, your program is judged as `Wrong Answer [9]`. When the function `Solve` terminates, if the function `Answer` is not called, your program is judged as `Wrong Answer [10]`.\n\n#### Important Notices\n\n- Your program can implement other functions for internal use, or use global variables.\n- Your program must not use the standard input and the standard output. Your program must not communicate with other files by any methods. However, your program may output debugging information to the standard error.\n\n**【评测方式】**\n\nYou can download an archive file from the contest webpage which contains the sample grader to test your program. The archive file also contains a sample source file of your program.\n\nThe sample grader is the file `grader.cpp`. In order to test your program, put `grader.cpp`, `conveyor.cpp`, `conveyor.h` in the same directory, and run the following command to compile your programs. Instead, you may run `compile.sh` contained in the archive file.\n\n```plain\ng++ -std=gnu++17 -O2 -o grader grader.cpp conveyor.cpp\n```\n\nWhen the compilation succeeds, the executable file `grader` is generated.\n\nNote that the actual grader is different from the sample grader. The sample grader will be executed as a single process, which will read input data from the standard input and write the results to the standard output.", "inputFormat": "The sample grader reads the following data from the standard input.\n\n> $N$\n>\n> $A_0 \\ A_1 \\ \\cdots \\ A_{N - 2}$\n>\n> $B_0 \\ B_1 \\ \\cdots \\ B_{N - 2}$\n>\n> $C_0 \\ C_1 \\ \\cdots \\ C_{N - 2}$\n\nFor $0 \\le i \\le N - 2$, we have $C_i = 0$ if the belt conveyor $i$ transports products from the table $A_i$ to the table $B_i$. Otherwise, we have $C_i = 1$.", "outputFormat": "The sample grader outputs the following information to the standard output (quotes for clarity).\n\n- If your program is judged as correct, it reports the number of function calls to `Query` as `Accepted: 22`.\n- If your program is judged as any type of Wrong Answer, the sample grader writes its type as `Wrong Answer [4]`.\n\nIf your program satisfies the conditions of several types of Wrong Answer, the sample grader reports only one of them.\n\nIn sample grader, among the belt conveyors transporting products from the table where a product is put, the belt conveyor transporting the product is chosen uniformly and randomly determined by pseudorandom numbers whose results do not change for different executions. In order to change the seed of pseudorandom numbers, run the sample grader with the first integer argument as follows.\n\n```plain\n./grader 2023\n```", "hint": "**【评测程序示例】**\n\nHere is a sample input for the sample grader and corresponding function calls.\n\n**Sample Input 1:**\n\n```plain\n3\n0 2\n2 1\n1 0\n```\n\n|Function Calls|Function Calls|Return Values|\n|:-|:-|:-|\n|`Solve(3, [0, 2], [2, 1])`|||\n||`Query([0, 0], [0, 0, 1])`|`[1, 0, 0]`|\n||`Query([1, 0], [1, 0, 1])`|`[0, 1, 1]`|\n||`Query([1, 1], [0, 0, 1])`|`[0, 0, 1]`|\n||`Query([0, 1], [1, 1, 1])`|`[1, 0, 1]`|\n||`Answer([1, 0])`||\n\nFor the first function call to `Query`, another possible return value is `[0, 1, 0]` other than `[1, 0, 0]`.\n\nFor the second function call to `Query`, the product on the table $0$ is transported to the table $2$ by passing through the belt conveyor $0$, and stops there. Note that this product will not be transported to the table $1$ by passing through the belt conveyor $1$.\n\nNote that this sample input **does not satisfy the constraints of any subtask**.\n\nAmong the files which can be obtained from the contest webpage, `sample-02.txt` satisfies the constraints of Subtask $1$, and `sample-03.txt` satisfies the constraints of Subtask $2$.\n\n#### Notices for Grading\n\nFor some of the test cases, the actual grader is adaptive. This means the grader does not have a fixed answer in the beginning, and responds according to previous function calls to Query. It is guaranteed that there is at least one answer which does not contradict all the responses of the the grader.\n\n**【数据范围】**\n\n对于所有测试数据，满足 $0 \\le A_i, B_i \\le N - 1$，保证忽略所有传送带的方向后所有机器连通，保证所有输入均为整数。\n\n|子任务编号|分值|$N =$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$1$|$2$|无|\n|$2$|$14$|$30$|无|\n|$3$|$10$|$10 ^ 5$|$A_i = i$，$B_i = i + 1$|\n|$4$|$75$|$10 ^ 5$|无|", "locale": "en"}, "zh-CN": {"title": "[JOIST 2023] 传送带 / Belt Conveyor", "background": "不要 $\\texttt{\\#include \"conveyor.h\"}$。请使用 $\\texttt{C++\\,20}$ 提交。\n\n提交前请将以下内容粘贴到代码前面：\n\n```cpp\n#include <vector>\n\nvoid Solve(int N, std::vector<int> A, std::vector<int> B);\n\nstd::vector<int> Query(std::vector<int> x, std::vector<int> y);\nvoid Answer(std::vector<int> a);\n```", "description": "在 JOI 有限公司的工厂里，有 $N$ 张桌子，从 $0$ 到 $N-1$ 编号。工厂里有 $N-1$ 条皮带输送机，从 $0$ 到 $N-2$ 编号。第 $i$ 条 $(0 \\le i \\le N-2)$ 皮带输送机连接桌子 $A_i$ 和桌子 $B_i$。它将产品从一张桌子运输到另一张桌子。然而，我们**不知道**运输的方向。\n\n\nIOI-kun 是工厂的经理。由于他忘记了每条皮带输送机的运输方向，他将多次按照以下顺序执行操作。\n1. 选择几条输送带，并反转所选输送带的运输方向。\n2. 选择几张桌子，并在每张选定的桌子上放一件商品。\n3. 每当把产品放在一张桌子上时，就会发生以下情况之一。\n\n- 如果没有输送带将产品从该桌子运走，则不会发生任何事情。\n- 如果有输送带将产品从该桌子运走，则桌子上的产品将由其中一条输送带运输。产品将在输送带的目的地停止，并且产品将不再移动。\n4. IOI-kun 会确认每张桌子上是否有产品。如果有产品在桌子上，IOI-kun 会把它们全部拿走。\n5. 对于每个在操作 1 中改变了方向的皮带输送机，IOI-kun 都会将其方向恢复到原来的方向。IOI-kun 希望通过最多执行 $30$ 次上述顺序操作来为每个皮带输送机指定原始方向。\n\n请编写一个程序，根据皮带输送机之间的连接表，实现 IOI-kun 的策略，以通过最多执行 $30$ 次上述顺序操作来为每个皮带输送机指定原始方向。\n\n### 实现细节\n\n你需要实现一份 C++ 程序，提交时**不需要**包含 `conveyor.h`。\n\n你应该实现以下函数。\n\n```cpp\nvoid Solve(int N, std::vector<int> A, std::vector<int> B)\n```\n\n\n该函数仅在每个测试用例中被调用一次：\n\n- 参数 $N$：传送带连接的桌子的数量。\n- 参数 $A$ 和 $B$ 是长度为 $N - 1$ 的数组，描述由皮带输送机连接的桌子。\n\n您的程序可以调用以下函数：\n\n```cpp\nstd::vector<int> Query(std::vector<int> x, std::vector<int> y)\n```\n\n\n使用这个函数，IOI-kun 在工厂中执行操作。\n\n- 参数 $x$ 是一个长度为 $N - 1$ 的数组。对于 $0\\le i\\le N - 2$，如果 $x_i = 1$，IOI-kun 将反转第 $i$ 个传送带的方向，否则不反转该传送带的方向。\n- 参数 $y$ 是一个长度为 $N$ 的数组。对于 $0 \\le j \\le N - 1$，如果 $y_j = 1$，IOI-kun 将在第 $j$ 个桌子上放置一个产品，否则不会在该桌子上放置产品。\n- 设 $z$ 是该函数的返回值。它是一个长度为 $N$ 的数组。对于 $0 \\le j \\le N - 1$，如果 $z_j = 1$，则第 $j$ 个桌子上有产品，如果 $z_j = 0$，则第 $j$ 个桌子上没有产品。\n- 数组 $x$ 的长度应等于 $N - 1$。如果不满足此条件，您的程序将被评为 `Wrong Answer[1]`。\n- 数组 $x$ 中的每个元素都应为 $0$ 或 $1$。如果不满足此条件，您的程序将被评为 `Wrong Answer[2]`。\n- 数组 $y$ 的长度应等于 $N$。如果不满足此条件，您的程序将被评为 `Wrong Answer[3]`。\n- 数组 $y$ 中的每个元素都应为 $0$ 或 $1$。如果不满足上述条件，您的程序将被评为 `Wrong Answer[4]`。\n- 函数 Query 最多只能被调用 $30$ 次。如果被调用次数超过 $30$ 次，您的程序将被评为 `Wrong Answer[5]`。\n\n```cpp\nvoid Answer(std::vector<int> a)\n```\n\n使用这个函数，IOI-kun 会报告每个输送带的原始方向。\n\n- 参数 $a$ 是一个长度为 $N - 1$ 的数组。对于 $0 \\le i \\le N - 2$，如果 $a_i = 0$，则输送带 $i$ 将产品从 $A_i$ 运输到 $B_i$，如果 $a_i = 1$，则将产品从 $B_i$ 运输到 $A_i$。\n- 数组 $a$ 的长度必须等于 $N - 1$。如果条件不满足，您的程序将被评为 `Wrong Answer[6]`。\n- 数组 $a$ 中的每个元素都必须为 $0$ 或 $1$。如果条件不满足，您的程序将被评为 `Wrong Answer[7]`。\n- 如果 IOI-kun 报告了输送带的错误方向，您的程序将被评为 `Wrong Answer[8]`。\n- 函数 `Answer` 必须被**恰好调用一次**。如果函数 `Answer` 被调用多次，您的程序将被评为 `Wrong Answer[9]`。当函数 `Solve` 结束时，如果函数 `Answer` 尚未被调用，您的程序将被评为 `Wrong Answer[10]`。", "inputFormat": "样例评测库将读入以下格式的数据：\n```\nN\nA[0] A[1] ... A[N - 2]\nB[0] B[1] ... B[N - 2]\nC[0] C[1] ... C[N - 2]\n```\n对于 $0\\le i\\le N - 2$，如果第 $i$ 条传送带会将产品从 $A_i$ 运输至 $B_i$，那么 $C_i$ 为 $0$，否则 $C_i$ 为 $1$。", "outputFormat": "样例评测库将以下信息输出到 stdout。\n\n-如果你的程序被判断为正确，它报告的函数 `Query` 调用的数量为 `Accepted: 22` 。\n\n-如果你的程序被判定为任何类型的错误答案，样例评分员将其类型写为 `Wrong Answer[4]`。\n\n\n\n如果您的程序满足几种类型的错误答案的条件，则样例评测库只报告其中一种。\n\n### 输入输出样例\n#### 样例 #1\n```plain\n3\n0 2\n2 1\n1 0\n```", "hint": "|函数调用|函数调用|返回值|\n|:-|:-|:-|\n|`Solve(3, [0, 2], [2, 1])`|||\n||`Query([0, 0], [0, 0, 1])`|`[1, 0, 0]`|\n||`Query([1, 0], [1, 0, 1])`|`[0, 1, 1]`|\n||`Query([1, 1], [0, 0, 1])`|`[0, 0, 1]`|\n||`Query([0, 1], [1, 1, 1])`|`[1, 0, 1]`|\n||`Answer([1, 0])`||\n\n对于对 `Query` 的第一次调用，另一个可能的返回值是 `[0,1,0]`。\n\n\n\n对于对 `Query` 的第二次调用，位置为 $0$ 上的产品通过传送带 $0$ 被传送到位置 $2$，并停在那里。请注意，该产品不会被传送带 $1$ 输送到位置 $1$。\n\n\n\n注意，这个示例输入**不满足任何子任务**的限制条件。\n\n\n\n下发文件中，`sample-02.txt` 满足 Subtask $1$ 的限制条件，`sample-03.txt` 满足 Subtask $2$ 的限制条件。\n\n对于某些测试用例，实际的评测程序**是自适应的**。这意味着评测程序在开始时没有固定的答案，并根据先前对 `Query` 函数的调用进行响应。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $0 \\le A_i, B_i \\le N - 1$，保证忽略所有传送带的方向后所有机器连通，保证所有输入均为整数。\n\n|子任务编号|分值|$N =$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1$|$1$|$2$|无|\n|$2$|$14$|$30$|无|\n|$3$|$10$|$10 ^ 5$|$A_i = i$，$B_i = i + 1$|\n|$4$|$75$|$10 ^ 5$|无|\n\nTranslate by @[tbdsh](/user/752485).", "locale": "zh-CN"}}}
{"pid": "P9333", "type": "P", "difficulty": 6, "samples": [["3 3\n1 0 0\n1 1 0\n1 1 1\n", "3\n3\n2\n"], ["4 12\n1 1 1 0 1 1 0 1 0 1 1 0\n1 1 0 1 1 0 1 1 1 1 1 0\n0 0 1 1 1 0 0 0 0 0 1 1\n1 0 0 0 1 1 1 1 1 0 0 0\n", "5\n4\n6\n6\n"], ["16 4\n0 0 0 0\n0 0 0 1\n0 0 1 0\n0 0 1 1\n0 1 0 0\n0 1 0 1\n0 1 1 0\n0 1 1 1\n1 0 0 0\n1 0 0 1\n1 0 1 0\n1 0 1 1\n1 1 0 0\n1 1 0 1\n1 1 1 0\n1 1 1 1\n", "3\n3\n3\n2\n3\n2\n2\n1\n3\n2\n2\n1\n2\n1\n1\n0\n"], ["4 2\n1 0\n0 1\n1 1\n1 1\n", "2\n2\n1\n1\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2023] 议会 / Council", "background": "本题子任务编号如果为 0 表示样例，如果是非 0 的一位数表示满足对应的子任务，如果是两位数表示同时满足这两个子任务。", "description": "#### 题目翻译\n\n在 JOI 市议会中，有 $N$ 名议员，编号从 $1$ 到 $N$。议会将召开会议，议员们将对 $M$ 项提案进行表决，编号为 $1$ 到 $M$。如果 $A_{i,j}=1$，则议员 $i (1≤i≤N)$ 将对提案 $j (1≤j≤M)$ 表决肯定票。如果 $A_{i,j}=0$，则议员 $i$ 将对提案 $j$ 表决否定票。\n\nJOI 市议会的程序如下所示。\n\n+ 在 $N$ 名议员中，通过抽签随机选择主席。\n\n+ 主席将在除了主席以外的其他 $N−1$ 名议员中选择副主席。\n\n+ 将对 $M$ 项提案进行表决。除了主席和副主席以外的其他 $N−2$ 名议员，每人对每个提案均投票支持或反对。如果大多数议员（即肯定票大于等于 $⌊\\dfrac{N}{2}⌋$）投票赞成，则议会将批准该提案。其中 $⌊x⌋$ 表示不超过 $x$ 的最大整数。\n\n市长 K 希望议会尽可能地批准更多的提案。市长 K 收集了议员的信息并知道每个议员在每个提案上的表决结果。\n\n请编写程序，在给定议员投票信息的情况下，计算每个议员作为主席时议会可以批准的提案数量的最大可能值。", "inputFormat": "从标准输入读取以下数据。\n\n> $N \\ M$\n>\n> $A_{1, 1} \\ A_{1, 2} \\ \\cdots \\ A_{1, M}$\n>\n> $A_{2, 1} \\ A_{2, 2} \\ \\cdots \\ A_{2, M}$\n>\n> $\\vdots$\n>\n> $A_{N, 1} \\ A_{N, 2} \\ \\cdots \\ A_{N, M}$", "outputFormat": "输出 $N$ 行。输出的第 $i$ 行（$1≤i≤N$）应包含议员 $i$ 作为主席时议会可以批准的提案数量的最大可能值。", "hint": "该样例满足子任务 $1, 2, 4, 5, 6, 7$ 的限制。\n\n**【样例解释 #2】**\n\n该样例满足子任务 $1, 2, 5, 6, 7$ 的限制。\n\n**【样例解释 #3】**\n\n该样例满足子任务 $1, 2, 4, 5, 6, 7$ 的限制。\n\n**【样例解释 #4】**\n\n该样例满足所有子任务的限制。\n\n**【数据范围】**\n\n对于所有测试数据，$3 \\le N \\le 3 \\times 10 ^ 5$，$1 \\le M \\le 20$，$0 \\le A_{i, j} \\le 1$，保证所有输入均为整数。\n\n|子任务编号|分值|限制|\n|:-:|:-:|:-:|\n|$1$|$8$|$N \\le 300$|\n|$2$|$8$|$N \\le 3000$|\n|$3$|$6$|$M \\le 2$|\n|$4$|$19$|$M \\le 10$|\n|$5$|$15$|$M \\le 14$|\n|$6$|$22$|$M \\le 17$|\n|$7$|$22$|无|", "locale": "zh-CN", "translations": {"en": {"title": "[JOIST 2023] Council", "background": null, "description": "In the council of JOI City, there are $N$ assembly members, numbered from $1$ to $N$. The council will open a meeting, and the assembly members will take votes on $M$ proposed ordinances, numbered from $1$ to $M$. If $A_{i, j} = 1$, the assembly member $i \\ (1 \\le i \\le N)$ will cast an affirmative vote on the proposed ordinance $j \\ (1 \\le j \\le M)$. If $A_{i, j} = 0$, the assembly member $i$ will cast a negative vote on the proposed ordinance $j$.\n\nThe council of JOI City will be performed as follows.\n\n1. Among the $N$ assembly members, they will randomly choose a chairperson by drawing lots.\n2. The chairperson will choose a deputy chairperson among the $N - 1$ assembly members except for the chairperson.\n3. The votes will be taken on $M$ proposed ordinances. Each of the $N - 2$ assembly members except for the chairperson and the deputy chairperson will cast an affirmative vote or a negative vote on each proposed ordinance. The council will approve a proposed ordinance if a majority of the assembly members (i.e., more than or equal to $\\lfloor \\frac{N}{2} \\rfloor$ assembly members) cast affirmative votes on it. Here, $\\lfloor x \\rfloor$ is the largest integer not exceeding $x$.\n\nMayor K, the mayor of JOI City, wants the council to approve as many proposed ordinances as possible. Mayor K collected information on assembly members. Mayor K knows, on each proposed ordinance, who will cast an affirmative vote and who will cast a negative vote.\n\nWrite a program which, given information of the votes of the assembly members, calculates, for each assembly member, the maximum possible number of proposed ordinances approved by the council if that assembly member is chosen as the chairperson.", "inputFormat": "Read the following data from the standard input.\n\n> $N \\ M$\n>\n> $A_{1, 1} \\ A_{1, 2} \\ \\cdots \\ A_{1, M}$\n>\n> $A_{2, 1} \\ A_{2, 2} \\ \\cdots \\ A_{2, M}$\n>\n> $\\vdots$\n>\n> $A_{N, 1} \\ A_{N, 2} \\ \\cdots \\ A_{N, M}$", "outputFormat": "Write $N$ lines to the standard output. The $i$-th line $(1 \\le i \\le N)$ of output should contain the maximum possible number of proposed ordinances approved by the council if the assembly member $i$ is chosen as the chairperson.", "hint": "**【样例解释 #1】**\n\n- Let’s consider the case where the assembly member $1$ is chosen as the chairperson. If the assembly member $2$ is chosen as the deputy chairperson, the council will approve three proposed ordinances, i.e., the proposed ordinances $1, 2, 3$. If the assembly member $3$ is chosen as the deputy chairperson, the council will approve two proposed ordinances, i.e., the proposed ordinances $1, 2$. Therefore, the maximum number of proposed ordinances approved by the council is $3$. Output $3$ in the first line.\n- Let’s consider the case where the assembly member $2$ is chosen as the chairperson. If the assembly member $1$ is chosen as the deputy chairperson, the council will approve three proposed ordinances, i.e., the proposed ordinances $1, 2, 3$. If the assembly member $3$ is chosen as the deputy chairperson, the\ncouncil will approve one proposed ordinance, i.e., the proposed ordinance $1$. Therefore, the maximum number of proposed ordinances approved by the council is $3$. Output $3$ in the second line.\n- Let’s consider the case where the assembly member $3$ is chosen as the chairperson. If the assembly member $1$ is chosen as the deputy chairperson, the council will approve two proposed ordinances, i.e., the proposed ordinances $1, 2$. If the assembly member $2$ is chosen as the deputy chairperson, the council will approve one proposed ordinance, i.e., the proposed ordinance $1$. Therefore, the maximum number of proposed ordinances approved by the council is $2$. Output $2$ in the third line.\n\n该样例满足子任务 $1, 2, 4, 5, 6, 7$ 的限制。\n\n**【样例解释 #2】**\n\n该样例满足子任务 $1, 2, 5, 6, 7$ 的限制。\n\n**【样例解释 #3】**\n\n该样例满足子任务 $1, 2, 4, 5, 6, 7$ 的限制。\n\n**【样例解释 #4】**\n\n该样例满足所有子任务的限制。\n\n**【数据范围】**\n\n对于所有测试数据，$3 \\le N \\le 3 \\times 10 ^ 5$，$1 \\le M \\le 20$，$0 \\le A_{i, j} \\le 1$，保证所有输入均为整数。\n\n|子任务编号|分值|限制|\n|:-:|:-:|:-:|\n|$1$|$8$|$N \\le 300$|\n|$2$|$8$|$N \\le 3000$|\n|$3$|$6$|$M \\le 2$|\n|$4$|$19$|$M \\le 10$|\n|$5$|$15$|$M \\le 14$|\n|$6$|$22$|$M \\le 17$|\n|$7$|$22$|无|", "locale": "en"}, "zh-CN": {"title": "[JOIST 2023] 议会 / Council", "background": "本题子任务编号如果为 0 表示样例，如果是非 0 的一位数表示满足对应的子任务，如果是两位数表示同时满足这两个子任务。", "description": "#### 题目翻译\n\n在 JOI 市议会中，有 $N$ 名议员，编号从 $1$ 到 $N$。议会将召开会议，议员们将对 $M$ 项提案进行表决，编号为 $1$ 到 $M$。如果 $A_{i,j}=1$，则议员 $i (1≤i≤N)$ 将对提案 $j (1≤j≤M)$ 表决肯定票。如果 $A_{i,j}=0$，则议员 $i$ 将对提案 $j$ 表决否定票。\n\nJOI 市议会的程序如下所示。\n\n+ 在 $N$ 名议员中，通过抽签随机选择主席。\n\n+ 主席将在除了主席以外的其他 $N−1$ 名议员中选择副主席。\n\n+ 将对 $M$ 项提案进行表决。除了主席和副主席以外的其他 $N−2$ 名议员，每人对每个提案均投票支持或反对。如果大多数议员（即肯定票大于等于 $⌊\\dfrac{N}{2}⌋$）投票赞成，则议会将批准该提案。其中 $⌊x⌋$ 表示不超过 $x$ 的最大整数。\n\n市长 K 希望议会尽可能地批准更多的提案。市长 K 收集了议员的信息并知道每个议员在每个提案上的表决结果。\n\n请编写程序，在给定议员投票信息的情况下，计算每个议员作为主席时议会可以批准的提案数量的最大可能值。", "inputFormat": "从标准输入读取以下数据。\n\n> $N \\ M$\n>\n> $A_{1, 1} \\ A_{1, 2} \\ \\cdots \\ A_{1, M}$\n>\n> $A_{2, 1} \\ A_{2, 2} \\ \\cdots \\ A_{2, M}$\n>\n> $\\vdots$\n>\n> $A_{N, 1} \\ A_{N, 2} \\ \\cdots \\ A_{N, M}$", "outputFormat": "输出 $N$ 行。输出的第 $i$ 行（$1≤i≤N$）应包含议员 $i$ 作为主席时议会可以批准的提案数量的最大可能值。", "hint": "该样例满足子任务 $1, 2, 4, 5, 6, 7$ 的限制。\n\n**【样例解释 #2】**\n\n该样例满足子任务 $1, 2, 5, 6, 7$ 的限制。\n\n**【样例解释 #3】**\n\n该样例满足子任务 $1, 2, 4, 5, 6, 7$ 的限制。\n\n**【样例解释 #4】**\n\n该样例满足所有子任务的限制。\n\n**【数据范围】**\n\n对于所有测试数据，$3 \\le N \\le 3 \\times 10 ^ 5$，$1 \\le M \\le 20$，$0 \\le A_{i, j} \\le 1$，保证所有输入均为整数。\n\n|子任务编号|分值|限制|\n|:-:|:-:|:-:|\n|$1$|$8$|$N \\le 300$|\n|$2$|$8$|$N \\le 3000$|\n|$3$|$6$|$M \\le 2$|\n|$4$|$19$|$M \\le 10$|\n|$5$|$15$|$M \\le 14$|\n|$6$|$22$|$M \\le 17$|\n|$7$|$22$|无|", "locale": "zh-CN"}}}
{"pid": "P9334", "type": "P", "difficulty": 7, "samples": [["6\n5 6 8 7 4 9\n1\n6 9 0 5\n", "3\n"], ["4\n6 2 3 6\n3\n3 2 1 3\n4 5 1 4\n1 1 0 4\n", "1\n2\n3\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2023] 水羊羹 2 / Mizuyokan 2", "background": null, "description": "水羊羹是一种用红豆沙制成的日式点心，将红豆沙与琼脂混合，并用矩形模具定型，这样就可以做成水羊羹了。\n\n现在 JOI 君有一台 **水羊羹机器**。使用它，JOI 君可以制作一个横向的矩形水羊羹，其上有 $N-1$ 条垂直切割线。水羊羹的长度和切割线位置由机器上设置的 $N$ 个参数 $d_1,d_2,\\ldots,d_N$ 确定。水羊羹的长度为 $d_1+d_2+\\ldots+d_N$。从左到右第 $(i-1)\\ (1\\le i\\le N)$ 条切割线与第 $i$ 条切割线之间的距离为 $d_i$。这里，我们考虑水羊羹的最左边为第 $0$ 条切割线，水羊羹的最右边为第 $N$ 条切割线。最初，水羊羹机器的参数满足 $d_i=L_i\\ (1\\le i\\le N)$。\n\nJOI 君计划组织 $Q$ 次茶会。第 $j\\ (1\\le j\\le Q)$ 次茶会由整数 $X_j,Y_j,A_j,B_j$ 表示。茶会按如下方式进行：\n\n- 水羊羹机器的参数 $d_{X_j}$ 被更新，并设置为 $Y_j$。\n- JOI 君用水羊羹机器只做了一个新的水羊羹。他把水羊羹在第 $A_j$ 条切割线和第 $B_j$ 条切割线之间的部分取出，用于茶会。他吃掉了剩余部分。\n- JOI 君沿一些切割线来切为茶会准备的水羊羹。他会将水羊羹切为一或更多块。在这个过程中应满足以下条件：如果这些切好的水羊羹块按最初的位置从左到右排列，那么这些水羊羹块的长度序列应该是 **锯齿形** 的。\n\n这里，如果序列中元素交替上升和下降，就称这个序列是锯齿形的。例如，序列 $(2,9,2,7),(7,1,9,4,6),(5),(2,1)$ 是锯齿形的，但序列 $(1,2,3),(7,1,4,4,6),(2,2)$ 不是锯齿形的。准确地说，一个序列 $(x_1,x_2,\\ldots,x_m)$ 被称为锯齿形的，当且仅当以下条件中至少一个被满足：\n\n- 对于 $k=1,2,\\ldots,m-1$，当 $k$ 为奇数时满足不等式 $x_k < x_{k+1}$，当 $k$ 为偶数时满足不等式 $x_k > x_{k+1}$。\n- 对于 $k=1,2,\\ldots,m-1$，当 $k$ 为奇数时满足不等式 $x_k > x_{k+1}$，当 $k$ 为偶数时满足不等式 $x_k < x_{k+1}$。\n\n因为 JOI 君想要把水羊羹给尽可能多的朋友们，他想最大化步骤 $3$ 中得到的水羊羹数。\n\n给定初始水羊羹机器的参数和茶会计划，写一个程序计算对于每次茶会，在满足条件的情况下最多能得到的最大水羊羹数。注意，在本题的限制下，满足条件的水羊羹切分方法必然存在。", "inputFormat": "从标准输入中读入以下数据：\n\n> $N$\n>\n> $L_1 \\ L_2 \\ \\cdots \\ L_N$\n>\n> $Q$\n>\n> $X_1 \\ Y_1 \\ A_1 \\ B_1$\n>\n> $X_2 \\ Y_2 \\ A_2 \\ B_2$\n>\n> $\\vdots$\n>\n> $X_Q \\ Y_Q \\ A_Q \\ B_Q$", "outputFormat": "程序应该在标准输出中输出 $Q$ 行。第 $j$ 行 $(1≤j≤Q)$ 应当包含第 $j$ 场茶会中的所选小片的最大数量。", "hint": "对于所有输入数据，满足：\n\n- $1\\le N \\le 2.5\\times 10^5$\n- $1\\le L_i \\le 10^9$\n- $1\\le Q\\le5\\times10^4$\n- $1\\le X_j\\le N,1\\le Y_j\\le 10^9$\n- $0\\le A_j < B_j \\le N$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务编号|附加限制|分值 |\n|:---:|:--------:|:-:|\n|$1$|$N\\le 200,Q\\le 10$| $6$|\n|$2$|$N\\le 2\\space000,Q\\le 10$| $9$|\n|$3$|$Q\\le10$|$13$|\n|$4$|$Y_j=L_{X_j}$|$32$|\n|$5$|$L_i,Y_j\\le 1.2\\times10^5$|$29$|\n|$6$|无附加限制|$11$|", "locale": "zh-CN", "translations": {"en": {"title": "[JOIST 2023] Mizuyokan 2", "background": null, "description": "Mizuyokan is a Japanese confectionery made of azuki beans paste. It was made by cooking azuki beans paste with agar, and solidifying them in a rectangular-shaped form.\n\nNow, JOI-kun has a mizuyokan machine. Using it, JOI-kun can make a horizontally long rectangular-shaped mizuyokan with $N - 1$ vertical cutlines. The length of the mizuyokan and the positions of the cutlines are determined by the $N$ parameters $d_1, d_2, \\dots, d_N$ set on the machine. The length of the mizuyokan is $d_1 + d_2 + \\dots + d_N$. The distance between the $(i - 1)$-th cutline $(1 \\le i \\le N)$ from the left and the $i$-th cutline from the left is $d_i$. Here, we consider the leftmost edge of the mizuyokan as the $0$-th cutline, and the rightmost edge of the mizuyokan as the $N$-th cutline. In the beginning, the parameters of the mizuyokan machine satisfy $d_i = L_i \\ (1 \\le i \\le N)$.\n\nJOI-kun has a plan to organize $Q$ tea parties. The $j$-th tea party $(1 \\le j \\le Q)$ is described by the integers $X_j, Y_j, A_j, B_j$. It proceeds as follows.\n\n1. The parameter $d_{X_j}$ of the mizuyokan machine is updated, and it is set as $Y_j$.\n2. JOI-kun makes a new mizuyokan using the mizuyokan machine. He takes the part of the mizuyokan 0between the $A_j$-th cutline and the $B_j$-th cutline, and uses it for the tea party. He eats the rest.\n3. JOI-kun cuts the part of the mizuyokan for the tea party along some of the cutlines. He cuts the part of the mizuyokan into one or more pieces. In this process, the following condition should be satisfied: if the pieces are ordered from the left as in the original positions, the sequence of the lengths of the pieces is **zigzag**.\n\nHere, a sequence is called zigzag if the elements of the sequence increase and decrease alternately. For example, the sequences $(2, 9, 2, 7), (7, 1, 9, 4, 6), (5), (2, 1)$ are zigzag, but the sequences $(1, 2, 3), (7, 1, 4, 4, 6), (2, 2)$ are not zigzag. Precisely, a sequence $(x_1, x_2, \\dots, x_m)$ is called zigzag if one (or the both) of the following conditions are satisfied:\n\n- For $k = 1, 2, \\dots, m - 1$, the inequality $x_k < x_{k + 1}$ is satisfied if $k$ is odd, and the inequality $x_k > x_{k + 1}$ is satisfied if $k$ is even.\n- For $k = 1, 2, \\dots, m - 1$, the inequality $x_k > x_{k + 1}$ is satisfied if $k$ is odd, and the inequality $x_k < x_{k + 1}$ is satisfied if $k$ is even.\n\nSince JOI-kun wants to give mizuyokan to as many friends as possible, he wants to maximize the number of pieces obtained by the procedure 3. of the tea party.\n\nWrite a program which, given information of the initial parameters of the mizuyokan machine and the plan of the tea parties, calculates, for each tea party, the maximum possible number of pieces obtained by cutting the part of the mizuyokan so that the condition is satisfied. Note that, under the constraints of this task, it is always possible to cut the part of the mizuyokan so that the condition is satisfied.", "inputFormat": "Read the following data from the standard input.\n\n> $N$\n>\n> $L_1 \\ L_2 \\ \\cdots \\ L_N$\n>\n> $Q$\n>\n> $X_1 \\ Y_1 \\ A_1 \\ B_1$\n>\n> $X_2 \\ Y_2 \\ A_2 \\ B_2$\n>\n> $\\vdots$\n>\n> $X_Q \\ Y_Q \\ A_Q \\ B_Q$", "outputFormat": "Write $Q$ lines to the standard output. The $j$-th line $(1 \\le j \\le Q)$ of output corresponds to the $j$-th tea party. It contains the maximum possible number of pieces obtained by cutting the part of the mizuyokan in the $j$-th tea party so that the condition is satisfied.", "hint": "**【样例解释 #1】**\n\nIn the first tea party, the parameters of the mizuyokan machine is set as $(d_1, d_2, d_3, d_4, d_5, d_6) = (5, 6, 8, 7, 4, 9)$.\n\nJOI-kun uses the part of the mizuyokan between the $0$-th cutline and the $5$-th cutline as in Figure 1.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/52j3fpkl.png)\n\nFor example, JOI-kun can cut the part of the mizuyokan as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/phx1owbf.png)\n\nIn Method 1, the lengths of the pieces are $5, 14, 7, 4$. Since this sequence is not zigzag, it does not satisfy the condition. On the other hand, in Method 2, the lengths of the pieces are $11, 8, 11$. Since this sequence is zigzag, it satisfies the condition. In Method 3, the length of the piece is $30$. Since this sequence is zigzag, it also satisfies the condition.\n\nIf JOI-kun cuts the part of the mizuyokan by Method 2, he gets $3$ pieces. Since it is not possible for him to cut the part of the mizuyokan so that the condition is satisfied and he gets more than or equal to $4$ pieces, output $3$ in the first line.\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\nIn the first tea party, the length of the part of the mizuyokan for the tea party is $4$. There is a cutline whose distance is $2$ from the leftmost edge. If JOI-kun uses the mizuyokan without cutting it, he gets one piece. The sequence of the lengths of the pieces is $(4)$, which is zigzag. Since he cannot obtain more than one pieces, output $1$.\n\nIn the second tea party, the length of the part of the mizuyokan for the tea party is $9$. There are two cutlines whose distances are $2, 4$ from the leftmost edge. If JOI-kun cuts the mizuyokan at the cutline whose distance is $4$ from the leftmost edge, he gets two pieces. The sequence of the lengths of the pieces is $(4, 5)$, which is zigzag. Since he cannot obtain more than two pieces, output $2$.\n\nIn the third tea party, the length of the part of the mizuyokan for the tea party is $10$. There are three cutlines whose distances are $1, 3, 5$ from the leftmost edge. If JOI-kun cuts the mizuyokan at the cutlines whose distances are $3, 5$ from the leftmost edge, he gets three pieces. The sequence of the lengths of the pieces is $(3, 2, 5)$, which is zigzag. Since he cannot obtain more than three pieces, output $3$.\n\n该样例满足子任务 $1, 2, 3, 5, 6$ 的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\le N \\le 2.5 \\times 10 ^ 5$，$1 \\le L_i \\le 10 ^ 9$，$1 \\le Q \\le 5 \\times 10 ^ 4$，$1 \\le X_j \\le N$，$1 \\le Y_j \\le 10 ^ 9$，$0 \\le A_j < B_j \\le N$，保证所有输入均为整数。\n\n|子任务编号|分值|限制|\n|:-:|:-:|:-:|\n|$1$|$6$|$N \\le 200$，$Q \\le 10$|\n|$2$|$9$|$N \\le 2000$，$Q \\le 10$|\n|$3$|$13$|$Q \\le 10$|\n|$4$|$32$|$Y_j = L_{X_j}$|\n|$5$|$29$|$L_i, Y_j \\le 1.2 \\times 10 ^ 5$|\n|$6$|$11$|无|", "locale": "en"}, "zh-CN": {"title": "[JOIST 2023] 水羊羹 2 / Mizuyokan 2", "background": null, "description": "水羊羹是一种用红豆沙制成的日式点心，将红豆沙与琼脂混合，并用矩形模具定型，这样就可以做成水羊羹了。\n\n现在 JOI 君有一台 **水羊羹机器**。使用它，JOI 君可以制作一个横向的矩形水羊羹，其上有 $N-1$ 条垂直切割线。水羊羹的长度和切割线位置由机器上设置的 $N$ 个参数 $d_1,d_2,\\ldots,d_N$ 确定。水羊羹的长度为 $d_1+d_2+\\ldots+d_N$。从左到右第 $(i-1)\\ (1\\le i\\le N)$ 条切割线与第 $i$ 条切割线之间的距离为 $d_i$。这里，我们考虑水羊羹的最左边为第 $0$ 条切割线，水羊羹的最右边为第 $N$ 条切割线。最初，水羊羹机器的参数满足 $d_i=L_i\\ (1\\le i\\le N)$。\n\nJOI 君计划组织 $Q$ 次茶会。第 $j\\ (1\\le j\\le Q)$ 次茶会由整数 $X_j,Y_j,A_j,B_j$ 表示。茶会按如下方式进行：\n\n- 水羊羹机器的参数 $d_{X_j}$ 被更新，并设置为 $Y_j$。\n- JOI 君用水羊羹机器只做了一个新的水羊羹。他把水羊羹在第 $A_j$ 条切割线和第 $B_j$ 条切割线之间的部分取出，用于茶会。他吃掉了剩余部分。\n- JOI 君沿一些切割线来切为茶会准备的水羊羹。他会将水羊羹切为一或更多块。在这个过程中应满足以下条件：如果这些切好的水羊羹块按最初的位置从左到右排列，那么这些水羊羹块的长度序列应该是 **锯齿形** 的。\n\n这里，如果序列中元素交替上升和下降，就称这个序列是锯齿形的。例如，序列 $(2,9,2,7),(7,1,9,4,6),(5),(2,1)$ 是锯齿形的，但序列 $(1,2,3),(7,1,4,4,6),(2,2)$ 不是锯齿形的。准确地说，一个序列 $(x_1,x_2,\\ldots,x_m)$ 被称为锯齿形的，当且仅当以下条件中至少一个被满足：\n\n- 对于 $k=1,2,\\ldots,m-1$，当 $k$ 为奇数时满足不等式 $x_k < x_{k+1}$，当 $k$ 为偶数时满足不等式 $x_k > x_{k+1}$。\n- 对于 $k=1,2,\\ldots,m-1$，当 $k$ 为奇数时满足不等式 $x_k > x_{k+1}$，当 $k$ 为偶数时满足不等式 $x_k < x_{k+1}$。\n\n因为 JOI 君想要把水羊羹给尽可能多的朋友们，他想最大化步骤 $3$ 中得到的水羊羹数。\n\n给定初始水羊羹机器的参数和茶会计划，写一个程序计算对于每次茶会，在满足条件的情况下最多能得到的最大水羊羹数。注意，在本题的限制下，满足条件的水羊羹切分方法必然存在。", "inputFormat": "从标准输入中读入以下数据：\n\n> $N$\n>\n> $L_1 \\ L_2 \\ \\cdots \\ L_N$\n>\n> $Q$\n>\n> $X_1 \\ Y_1 \\ A_1 \\ B_1$\n>\n> $X_2 \\ Y_2 \\ A_2 \\ B_2$\n>\n> $\\vdots$\n>\n> $X_Q \\ Y_Q \\ A_Q \\ B_Q$", "outputFormat": "程序应该在标准输出中输出 $Q$ 行。第 $j$ 行 $(1≤j≤Q)$ 应当包含第 $j$ 场茶会中的所选小片的最大数量。", "hint": "对于所有输入数据，满足：\n\n- $1\\le N \\le 2.5\\times 10^5$\n- $1\\le L_i \\le 10^9$\n- $1\\le Q\\le5\\times10^4$\n- $1\\le X_j\\le N,1\\le Y_j\\le 10^9$\n- $0\\le A_j < B_j \\le N$\n\n详细子任务附加限制及分值如下表所示。\n\n|子任务编号|附加限制|分值 |\n|:---:|:--------:|:-:|\n|$1$|$N\\le 200,Q\\le 10$| $6$|\n|$2$|$N\\le 2\\space000,Q\\le 10$| $9$|\n|$3$|$Q\\le10$|$13$|\n|$4$|$Y_j=L_{X_j}$|$32$|\n|$5$|$L_i,Y_j\\le 1.2\\times10^5$|$29$|\n|$6$|无附加限制|$11$|", "locale": "zh-CN"}}}
{"pid": "P9335", "type": "P", "difficulty": 7, "samples": [["5 3\n3 3 1 1 1\n2 1 3 2 2\n4 5 3 4 4\n1 2\n2 5\n4 5\n", "48\n63\n24\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2001", "O2优化", "Ynoi"], "title": "[Ynoi2001] 雪に咲く花", "background": "&emsp;何もいらない   \n&emsp;不再奢求什么   \n&emsp;あなたがいればいい   \n&emsp;只要有相伴   \n&emsp;そっと橫顏 息を殺す   \n&emsp;悄悄地侧着脸 屏住呼吸   \n&emsp;まばたきすれば   \n&emsp;似乎一眨眼   \n&emsp;消えてしまいそうで   \n&emsp;就会突然消失一般   \n&emsp;凝視(みつ)めさせて 好きだよ   \n&emsp;凝视着我喜欢的你   \n\n&emsp;あぁ 木々が震え 降り出した雪   \n&emsp;啊啊 树影摇曳 落雪纷纷   \n&emsp;足跡 ふたつ 白く   \n&emsp;唯留两行白色的足迹   \n&emsp;時よ 積もれ   \n&emsp;时光 点点堆积   \n&emsp;時よ 積もれ   \n&emsp;时光 点点堆积   \n&emsp;髪に 胸に ふたりだけの夢に   \n&emsp;在发间 在心中 只属于你我的梦中   \n&emsp;咲けない花の種は   \n&emsp;无法开出花朵的种子   \n&emsp;雪に抱かれ 寄り添うの   \n&emsp;在雪的怀抱中 相依相偎   \n&emsp;靜かに忘れられたい   \n&emsp;只想静静地被遗忘   \n![](https://cdn.luogu.com.cn/upload/image_hosting/g60pi7fc.png)", "description": "给序列 $a_1,\\dots,a_n$，$b_1,\\dots,b_n$，$c_1,\\dots,c_n$，\n\n定义区间 $[l,r]$ 的价值为 $a_l,\\dots,a_r$ 按位与，$b_l,\\dots,b_r$ 按位或，$c_l,\\dots,c_r$ 的最大公因数，这三者的乘积；\n\n$m$ 次查询，每次查询给出区间 $[l,r]$，查询满足 $l\\le l'\\le r'\\le r$ 的 $[l',r']$ 的价值之和。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数 $b_1,\\dots,b_n$；\n\n第四行 $n$ 个整数 $c_1,\\dots,c_n$；\n\n接下来 $m$ 行，每行两个整数 $l,r$ 表示一次查询。\n", "outputFormat": "共 $m$ 行，每行一个整数，表示对应的答案，答案对 $2^{32}$ 取模后输出。\n", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足\n\n$1\\le n\\le 10^6$\n\n$1\\le m\\le 5\\times 10^6$\n\n$1\\le a_i,b_i,c_i\\le n$\n\n$1\\le l\\le r\\le n$\n\n建议使用高效的输入输出方式。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2001] 雪に咲く花", "background": "&emsp;何もいらない   \n&emsp;不再奢求什么   \n&emsp;あなたがいればいい   \n&emsp;只要有相伴   \n&emsp;そっと橫顏 息を殺す   \n&emsp;悄悄地侧着脸 屏住呼吸   \n&emsp;まばたきすれば   \n&emsp;似乎一眨眼   \n&emsp;消えてしまいそうで   \n&emsp;就会突然消失一般   \n&emsp;凝視(みつ)めさせて 好きだよ   \n&emsp;凝视着我喜欢的你   \n\n&emsp;あぁ 木々が震え 降り出した雪   \n&emsp;啊啊 树影摇曳 落雪纷纷   \n&emsp;足跡 ふたつ 白く   \n&emsp;唯留两行白色的足迹   \n&emsp;時よ 積もれ   \n&emsp;时光 点点堆积   \n&emsp;時よ 積もれ   \n&emsp;时光 点点堆积   \n&emsp;髪に 胸に ふたりだけの夢に   \n&emsp;在发间 在心中 只属于你我的梦中   \n&emsp;咲けない花の種は   \n&emsp;无法开出花朵的种子   \n&emsp;雪に抱かれ 寄り添うの   \n&emsp;在雪的怀抱中 相依相偎   \n&emsp;靜かに忘れられたい   \n&emsp;只想静静地被遗忘   \n![](https://cdn.luogu.com.cn/upload/image_hosting/g60pi7fc.png)", "description": "给序列 $a_1,\\dots,a_n$，$b_1,\\dots,b_n$，$c_1,\\dots,c_n$，\n\n定义区间 $[l,r]$ 的价值为 $a_l,\\dots,a_r$ 按位与，$b_l,\\dots,b_r$ 按位或，$c_l,\\dots,c_r$ 的最大公因数，这三者的乘积；\n\n$m$ 次查询，每次查询给出区间 $[l,r]$，查询满足 $l\\le l'\\le r'\\le r$ 的 $[l',r']$ 的价值之和。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数 $b_1,\\dots,b_n$；\n\n第四行 $n$ 个整数 $c_1,\\dots,c_n$；\n\n接下来 $m$ 行，每行两个整数 $l,r$ 表示一次查询。\n", "outputFormat": "共 $m$ 行，每行一个整数，表示对应的答案，答案对 $2^{32}$ 取模后输出。\n", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足\n\n$1\\le n\\le 10^6$\n\n$1\\le m\\le 5\\times 10^6$\n\n$1\\le a_i,b_i,c_i\\le n$\n\n$1\\le l\\le r\\le n$\n\n建议使用高效的输入输出方式。\n", "locale": "zh-CN"}}}
{"pid": "P9336", "type": "P", "difficulty": 7, "samples": [["5 10\n2 10 1 10 3\n1 2 3 2\n2 1 3\n1 3\n1 5\n2 3 5\n2 3 2\n1 5\n2 5 6\n1 3\n2 5 -1\n2 3 0", "10\n3\n3\n10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2001", "O2优化", "Ynoi"], "title": "[Ynoi2001] 梦想歌", "background": "&emsp;子供の頃の夢は   \n&emsp;孩童时期的梦想   \n&emsp;色褪せない落書きで   \n&emsp;是永不褪色的涂鸦  \n&emsp;いつまでも描き続けられた   \n&emsp;无论何时都不停描绘着   \n&emsp;願う未来へとつながる   \n&emsp;与理想中的未来紧紧相连   \n&emsp;鐘が鳴る音  \n&emsp;钟声鸣响   \n&emsp;遠くから聞こえてくる  \n&emsp;即使在远方也听得见  \n&emsp;素直な心に    \n&emsp;传达到坦率的内心之中  \n&emsp;届いては響いてる  \n&emsp;随之回响  \n&emsp;光りは  \n&emsp;化作七彩的  \n&emsp;七色に変わって  \n&emsp;光芒\n![](https://tuchuangs.com/imgs/2023/03/19/e23d3bd048e193de.jpg)", "description": "给定树上 $n$ 个点，每个点有一个点权 $v_i$。\n\n在此题面中，启发式合并指，递归地进行从底往上的集合合并，每一次以集合的点权和为键值，将权值和更小的集合中的点加入更大的权值和的集合中，初始时每个点集合为该点本身。\n\n同时我们钦定如下的枚举顺序：假设已经递归进行了所有子树的合并，合并当前层节点时从子树的根开始，将儿子们按编号大小从小到大排序，每一次合并两两集合得到子树的集合。\n\n同时，若两个集合的权值和相同，以集合中最小节点深度为第二关键字进行比较（深度大的向深度小的合并）。\n\n钦定该树的根为 $1$。给出以下查询和修改操作：\n\n```1 x``` 表示查询当前以 $x$ 为根的子树进行启发式合并后，没有进行「合并入另外一个集合」操作的节点权值。\n\n```2 x d```将第 $x$ 个点的节点权值加 $d$。\n\n", "inputFormat": "第一行两个整数 $n,q$，分别表示树的大小和操作次数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，其中 $a_i$ 表示结点 $i$ 的初始权值。\n\n第三行 $n-1$ 个整数 $p_2,p_3,\\cdots,p_n$，其中 $p_i$ 表示以结点 $1$ 为根时，结点 $i$ 的父亲。\n\n接下来 $q$ 行，每行格式形如 `1 x` 或 `2 x d`，分别对应题目描述中的两种操作。", "outputFormat": "对于每个类型为 $1$ 的操作，输出一行一个整数，表示所求答案。", "hint": "Idea：FutaRimeWoawaSete，Solution：zhoukangyang，Code：Rainybunny，Data：FutaRimeWoawaSete/Rainybunny\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le2\\times10^5$，$1\\le p_i<i$；操作给出的 $x\\in[1,n]$，$d\\in[-10^{18},10^{18}]$；在任意时刻 $a_x\\ge 1$ 且 $\\sum_{x=1}^na_x\\le10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2001] 梦想歌", "background": "&emsp;子供の頃の夢は   \n&emsp;孩童时期的梦想   \n&emsp;色褪せない落書きで   \n&emsp;是永不褪色的涂鸦  \n&emsp;いつまでも描き続けられた   \n&emsp;无论何时都不停描绘着   \n&emsp;願う未来へとつながる   \n&emsp;与理想中的未来紧紧相连   \n&emsp;鐘が鳴る音  \n&emsp;钟声鸣响   \n&emsp;遠くから聞こえてくる  \n&emsp;即使在远方也听得见  \n&emsp;素直な心に    \n&emsp;传达到坦率的内心之中  \n&emsp;届いては響いてる  \n&emsp;随之回响  \n&emsp;光りは  \n&emsp;化作七彩的  \n&emsp;七色に変わって  \n&emsp;光芒\n![](https://tuchuangs.com/imgs/2023/03/19/e23d3bd048e193de.jpg)", "description": "给定树上 $n$ 个点，每个点有一个点权 $v_i$。\n\n在此题面中，启发式合并指，递归地进行从底往上的集合合并，每一次以集合的点权和为键值，将权值和更小的集合中的点加入更大的权值和的集合中，初始时每个点集合为该点本身。\n\n同时我们钦定如下的枚举顺序：假设已经递归进行了所有子树的合并，合并当前层节点时从子树的根开始，将儿子们按编号大小从小到大排序，每一次合并两两集合得到子树的集合。\n\n同时，若两个集合的权值和相同，以集合中最小节点深度为第二关键字进行比较（深度大的向深度小的合并）。\n\n钦定该树的根为 $1$。给出以下查询和修改操作：\n\n```1 x``` 表示查询当前以 $x$ 为根的子树进行启发式合并后，没有进行「合并入另外一个集合」操作的节点权值。\n\n```2 x d```将第 $x$ 个点的节点权值加 $d$。\n\n", "inputFormat": "第一行两个整数 $n,q$，分别表示树的大小和操作次数。\n\n第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n$，其中 $a_i$ 表示结点 $i$ 的初始权值。\n\n第三行 $n-1$ 个整数 $p_2,p_3,\\cdots,p_n$，其中 $p_i$ 表示以结点 $1$ 为根时，结点 $i$ 的父亲。\n\n接下来 $q$ 行，每行格式形如 `1 x` 或 `2 x d`，分别对应题目描述中的两种操作。", "outputFormat": "对于每个类型为 $1$ 的操作，输出一行一个整数，表示所求答案。", "hint": "Idea：FutaRimeWoawaSete，Solution：zhoukangyang，Code：Rainybunny，Data：FutaRimeWoawaSete/Rainybunny\n\n对于 $100\\%$ 的数据，$1\\le n,q\\le2\\times10^5$，$1\\le p_i<i$；操作给出的 $x\\in[1,n]$，$d\\in[-10^{18},10^{18}]$；在任意时刻 $a_x\\ge 1$ 且 $\\sum_{x=1}^na_x\\le10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P9337", "type": "P", "difficulty": 7, "samples": [["3 4\n1 1 3\n2 3 1\n1 2\n1 3\n2 3\n1 1", "0\n1\n1\n0"]], "limits": {"time": [9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000, 9000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2001", "O2优化", "Ynoi"], "title": "[Ynoi2001] 冷たい部屋、一人", "background": "&emsp;冷たい部屋の隅に 射し込んできた夕陽だったら   \n&emsp;冰冷房间的角落 洒满夕阳的光辉   \n&emsp;近づいてみても感情は無くて 裏切りも無い   \n&emsp;再怎么接近也没有感情 没有变化   \n\n&emsp;今日も明日も一人で きっとそれが普通のことで   \n&emsp;就算今后都是一个人 也只是很平常的事   \n&emsp;交わす言葉も無く 一日を終える時   \n&emsp;交谈也无法改变 这一天的终结   \n\n&emsp;例えば 優しさはどれくらいの   \n&emsp;例如 温柔究竟是怎样的   \n&emsp;ぬくもりかも知らないで   \n&emsp;连获取温暖都不知道   \n&emsp;そんなにそんなに簡単じゃない   \n&emsp;那么那样不是很简单吗   \n&emsp;心の距離   \n&emsp;心的距离   \n\n&emsp;冷たい部屋の隅に 小さくなったまま   \n&emsp;冰冷房间的角落 就这样变小吧   \n![](https://cdn.luogu.com.cn/upload/image_hosting/6uukzjeq.png)", "description": "给定 $n,m$，以及序列 $a_1,a_2,\\dots,a_n$ 和 $1,2,\\dots,n$ 的排列 $y_1,y_2,\\dots,y_n$，你需要回答 $m$ 个询问。\n\n对每个询问，给定 $l,r$，查询：\n\n$\\sum\\limits_{i=1}^n\\sum\\limits_{j=i+1}^n [a_i=a_j]\\cdot\\prod_{k=i}^j [l\\le y_k\\le r]$；\n\n其中 $[\\mathrm{cond}]$ 在条件 $\\mathrm{cond}$ 为真时值为 $1$，否则值为 $0$。", "inputFormat": "第一行两个数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数 $y_1,\\dots,y_n$；\n\n接下来 $m$ 行，每行两个数 $l,r$ 表示一个询问。", "outputFormat": "$m$ 行，每行一个整数，表示相应的答案。", "hint": "Idea：Ynoi&nzhtl1477，Solution：Ynoi&ccz181078，Code：ccz181078，Data：ccz181078&Terry2022\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 5\\times 10^5$；$1\\le a_i\\le n$；$1\\le y_i\\le n$，$y_i$ 互不相同；对每个询问，$1\\le l\\le r\\le n$。\n\n对于 $20\\%$ 的数据，满足 $n,m\\le 100$。\n\n对于 $40\\%$ 的数据，$n,m\\le 5000$\n\n对于 $60\\%$ 的数据，$n,m\\le 2\\times 10^5$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2001] 冷たい部屋、一人", "background": "&emsp;冷たい部屋の隅に 射し込んできた夕陽だったら   \n&emsp;冰冷房间的角落 洒满夕阳的光辉   \n&emsp;近づいてみても感情は無くて 裏切りも無い   \n&emsp;再怎么接近也没有感情 没有变化   \n\n&emsp;今日も明日も一人で きっとそれが普通のことで   \n&emsp;就算今后都是一个人 也只是很平常的事   \n&emsp;交わす言葉も無く 一日を終える時   \n&emsp;交谈也无法改变 这一天的终结   \n\n&emsp;例えば 優しさはどれくらいの   \n&emsp;例如 温柔究竟是怎样的   \n&emsp;ぬくもりかも知らないで   \n&emsp;连获取温暖都不知道   \n&emsp;そんなにそんなに簡単じゃない   \n&emsp;那么那样不是很简单吗   \n&emsp;心の距離   \n&emsp;心的距离   \n\n&emsp;冷たい部屋の隅に 小さくなったまま   \n&emsp;冰冷房间的角落 就这样变小吧   \n![](https://cdn.luogu.com.cn/upload/image_hosting/6uukzjeq.png)", "description": "给定 $n,m$，以及序列 $a_1,a_2,\\dots,a_n$ 和 $1,2,\\dots,n$ 的排列 $y_1,y_2,\\dots,y_n$，你需要回答 $m$ 个询问。\n\n对每个询问，给定 $l,r$，查询：\n\n$\\sum\\limits_{i=1}^n\\sum\\limits_{j=i+1}^n [a_i=a_j]\\cdot\\prod_{k=i}^j [l\\le y_k\\le r]$；\n\n其中 $[\\mathrm{cond}]$ 在条件 $\\mathrm{cond}$ 为真时值为 $1$，否则值为 $0$。", "inputFormat": "第一行两个数 $n,m$；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$；\n\n第三行 $n$ 个整数 $y_1,\\dots,y_n$；\n\n接下来 $m$ 行，每行两个数 $l,r$ 表示一个询问。", "outputFormat": "$m$ 行，每行一个整数，表示相应的答案。", "hint": "Idea：Ynoi&nzhtl1477，Solution：Ynoi&ccz181078，Code：ccz181078，Data：ccz181078&Terry2022\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 5\\times 10^5$；$1\\le a_i\\le n$；$1\\le y_i\\le n$，$y_i$ 互不相同；对每个询问，$1\\le l\\le r\\le n$。\n\n对于 $20\\%$ 的数据，满足 $n,m\\le 100$。\n\n对于 $40\\%$ 的数据，$n,m\\le 5000$\n\n对于 $60\\%$ 的数据，$n,m\\le 2\\times 10^5$", "locale": "zh-CN"}}}
{"pid": "P9338", "type": "P", "difficulty": 7, "samples": [["5 2\nAABABABBAB", "2\n"], ["5 3\nAABABABBAB", "0"], ["3 1\nBBBAAA", "9"], ["10 3\nABABBBBABBABABABAAAA", "37"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2023", "O2优化", "斜率优化", "凸完全单调性（wqs 二分）", "JOISC/JOIST（日本）"], "title": "[JOIST 2023] 合唱 / Chorus", "background": "", "description": "在舞台上，有 $2N$ 只海狸排成一列。它们是合唱团的成员。每只海狸唱着高音部或低音部。这些信息由一个字符串 $S$ 给出。具体地，如果 $S$ 的第 $i$ 个字符是 $A$，编号为 $i$ 的海狸（从右边看台来看）唱高音。如果 $S$ 的第 $i$ 个字符是 $B$，编号为 $i$ 的海狸唱低音。有 $N$ 只海狸唱高音，有 $N$ 只海狸唱低音。\n\n从现在起，这些海狸将要演唱 $K$ 首歌。然而，因为所有歌曲非常复杂，每只海狸只唱一首歌曲，不会唱其他歌曲。此外，为了使歌声更加美妙，每首歌曲必须满足以下条件：\n\n+ 至少有一只海狸唱这首歌。\n\n+ 唱这首歌的唱高音和唱低音的海狸数量应当相等。\n\n+ 如果只考虑唱这首歌的海狸，所有唱高音的海狸都在唱低音的海狸的右边。\n\n指挥家 Bitaro 想找到一种方案，给出哪些海狸唱哪首歌，满足以上所有条件。由于 Bitaro 特别聪明，他注意到这可能无法实现。为了应对这个问题，Bitaro 将交换相邻两只海狸的位置多次，以便有一种方式可以调配海狸，从而满足上述条件。\n\n由于 Bitaro 认为效率很重要，所以他想最小化要执行的操作数。然而，这是一个非常困难的问题。由于您是一位出色的程序员，Bitaro 请求您解决此问题。\n\n编写一份程序，在给出合唱与演唱歌曲数量 $K$ 的信息时，计算 Bitaro 需要执行的最小操作数。请注意，在本任务的限制下，可以执行操作多次，以便有一种方式可以在海狸之间分配歌曲，满足上述条件。", "inputFormat": "从标准输入读取以下数据:\n\n> $N\\ K$\n> \n> $S$", "outputFormat": "向标准输出写入一行。输出应该包含 Bitaro 需要执行的最小操作数。", "hint": "**【样例解释 #1】**\n\n在该样例输入中，例如 Bitaro 可以进行如下操作。下划线表示被交换的两个海狸的位置。\n\n1. 交换从舞台右侧数第 3 个和第 4 个海狸。  \n   操作后，表示海狸部件分布的字符串变为 $\\text{`\\texttt{AA\\underline{AB}BABBAB}'}$。\n2. 交换从舞台右侧数第 8 个和第 9 个海狸。  \n   操作后，字符串变为 $\\text{`\\texttt{AAABBAB\\underline{AB}B}'}$。\n\n操作完成后，Bitaro 可以按如下方式分配歌曲：\n- 从舞台右侧数第 1, 2, 3, 4, 5, 7 个海狸演唱第一首歌\n- 从舞台右侧数第 6, 8, 9, 10 个海狸演唱第二首歌\n\n这种分配方式满足条件。若操作次数少于 2 次，则不存在满足条件的分配方式。因此输出 2。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n不进行任何操作时，Bitaro 可以按如下方式分配歌曲：\n- 从舞台右侧数第 1, 2, 3, 5 个海狸演唱第一首歌\n- 从舞台右侧数第 4, 6, 7, 8 个海狸演唱第二首歌  \n- 从舞台右侧数第 9, 10 个海狸演唱第三首歌\n\n这种分配方式满足条件。因此输出 0。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #4】**\n\n该样例满足所有子任务的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\le N \\le 10^6$，$1 \\le K \\le N$，$S$ 是长度为 $2N$ 的字符串，且其中字符 $\\verb!A!$ 和 $\\verb!B!$ 各出现 $N$ 次。保证 $N,K$ 均为整数。\n\n| 子任务编号 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $16$ | $N \\le 10$ |\n| $2$ | $24$ | $N \\le 500$ |\n| $3$ | $21$ | $N \\le 5000$ |\n| $4$ | $26$ | $N \\le 10^5$ |\n| $5$ | $13$ | 无 |\n\n提示说明部分，翻译由 DeepSeek R1 完成", "locale": "zh-CN", "translations": {"en": {"title": "[JOIST 2023] Chorus", "background": null, "description": "On the stage, $2N$ beavers are standing in a row. They are members of the chorus. Each beaver sings either the alto part or the bass part of the chorus. This information is given by a string $S$. Precisely, the $i$-th beaver ($1\\le i\\le 2N$) from the stage right (i.e., from left when seen from the audience seats) sings the alto part if the $i$-th character of $S$ is $\\text{`\\texttt{A}'}$. The $i$-th beaver sings the bass part if the $i$-th character of S is $\\text{`\\texttt{B}'}$. There are $N$ beavers singing the alto part, and $N$ beavers singing the bass part.\n\nFrom now, the beavers will sing $K$ songs. However, since all the songs are very difficult, each beaver sings exactly one song only, and does not sing other songs. Moreover, in order to make singing voice more beautiful, for every song, the following conditions should be satisfied.\n\n- At least one beaver sings the song.\n- The number of beavers singing the alto part of the song is equal to the number of beavers singing the bass part of the song.\n- If we consider the beavers singing the song only, every alto beaver stands the stage right of every bass beaver.\n\nBitaro, the conductor, tried to find a way to allot songs to beavers which satisfies the conditions. Since Bitaro is bright, he notices that it might be impossible to allot songs to beavers.\n\nIn order to cope with this issue, Bitaro will perform the following operation several times so that there is a way to allot songs to beavers which satisfies the conditions.\n\n- Swap the position of two adjacent beavers.\n\nSince Bitaro thinks efficiency is important, he wants to minimize the number of operations. However, it turns out to be a surprisingly difficult problem. Since you are a brilliant programmer, Bitaro asks you to solve this problem.\n\nWrite a program which, given information of the chorus and the number of songs $K$, calculates the minimum\nnumber of operations Bitaro needs to perform. Note that, under the constraints of this task, it is possible to perform the operations several times so that there is a way to allot songs to beavers which satisfies the conditions.", "inputFormat": "Read the following data from the standard input.\n\n> $N\\ K$\n> \n> $S$", "outputFormat": "Write one line to the standard output. The output should contain the minimum number of operations Bitaro needs to perform.", "hint": "**【样例解释 #1】**\n\nIn this sample input, for example, Bitaro can perform the following operations. Here, the underline denotes the positions of the two beavers swapped by Bitaro.\n\n1. Swap the third beaver and the fourth beaver from the stage right.  \n  After this operation, the string which denotes the parts of the beavers from the stage right becomes\n$\\text{`\\texttt{AA\\underline{AB}BABBAB}'}$.\n2. Swap the eighth beaver and the ninth beaver from the stage right.  \n  After this operation, the string which denotes the parts of the beavers from the stage right becomes\n$\\text{`\\texttt{AAABBAB\\underline{AB}B}'}$.  \n\nAfter these operations, Bitaro can allot songs to beavers as follows.\n\n- From the stage right, the $1, 2, 3, 4, 5, 7$-th beavers sing the first song.\n- From the stage right, the $6, 8, 9, 10$-th beavers sing the second song.\n\nThis way to allot songs to beavers satisfies the conditions.\n\nIf the number of operations is less than $2$, there does not exist a way to allot songs to beavers which satisfies the conditions. Therefore, output $2$.\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\nWithout performing operations, Bitaro can allot songs to beavers as follows.\n\n- From the stage right, the $1, 2, 3, 5$-th beavers sing the first song.\n- From the stage right, the $4, 6, 7, 8$-th beavers sing the second song.\n- From the stage right, the $9, 10$-th beavers sing the third song.\n\nThis way to allot songs to beavers satisfies the conditions. Therefore, output $0$.\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #4】**\n\n该样例满足所有子任务的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1\\le N\\le 10^6$，$1\\le K\\le N$，$S$ 是一个长度为 $2N$ 的字符串，且在 $S$ 中，字母 $\\verb!A!$ 和 $\\verb!B!$ 均出现了 $N$ 次。保证 $N,K$ 均为整数。\n\n| 子任务编号 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $16$ | $N\\le 10$ |\n| $2$ | $24$ | $N\\le 500$ |\n| $3$ | $21$ | $N\\le 5000$ |\n| $4$ | $26$ | $N\\le 10^5$ |\n| $5$ | $13$ | 无 |\n", "locale": "en"}, "zh-CN": {"title": "[JOIST 2023] 合唱 / Chorus", "background": "", "description": "在舞台上，有 $2N$ 只海狸排成一列。它们是合唱团的成员。每只海狸唱着高音部或低音部。这些信息由一个字符串 $S$ 给出。具体地，如果 $S$ 的第 $i$ 个字符是 $A$，编号为 $i$ 的海狸（从右边看台来看）唱高音。如果 $S$ 的第 $i$ 个字符是 $B$，编号为 $i$ 的海狸唱低音。有 $N$ 只海狸唱高音，有 $N$ 只海狸唱低音。\n\n从现在起，这些海狸将要演唱 $K$ 首歌。然而，因为所有歌曲非常复杂，每只海狸只唱一首歌曲，不会唱其他歌曲。此外，为了使歌声更加美妙，每首歌曲必须满足以下条件：\n\n+ 至少有一只海狸唱这首歌。\n\n+ 唱这首歌的唱高音和唱低音的海狸数量应当相等。\n\n+ 如果只考虑唱这首歌的海狸，所有唱高音的海狸都在唱低音的海狸的右边。\n\n指挥家 Bitaro 想找到一种方案，给出哪些海狸唱哪首歌，满足以上所有条件。由于 Bitaro 特别聪明，他注意到这可能无法实现。为了应对这个问题，Bitaro 将交换相邻两只海狸的位置多次，以便有一种方式可以调配海狸，从而满足上述条件。\n\n由于 Bitaro 认为效率很重要，所以他想最小化要执行的操作数。然而，这是一个非常困难的问题。由于您是一位出色的程序员，Bitaro 请求您解决此问题。\n\n编写一份程序，在给出合唱与演唱歌曲数量 $K$ 的信息时，计算 Bitaro 需要执行的最小操作数。请注意，在本任务的限制下，可以执行操作多次，以便有一种方式可以在海狸之间分配歌曲，满足上述条件。", "inputFormat": "从标准输入读取以下数据:\n\n> $N\\ K$\n> \n> $S$", "outputFormat": "向标准输出写入一行。输出应该包含 Bitaro 需要执行的最小操作数。", "hint": "**【样例解释 #1】**\n\n在该样例输入中，例如 Bitaro 可以进行如下操作。下划线表示被交换的两个海狸的位置。\n\n1. 交换从舞台右侧数第 3 个和第 4 个海狸。  \n   操作后，表示海狸部件分布的字符串变为 $\\text{`\\texttt{AA\\underline{AB}BABBAB}'}$。\n2. 交换从舞台右侧数第 8 个和第 9 个海狸。  \n   操作后，字符串变为 $\\text{`\\texttt{AAABBAB\\underline{AB}B}'}$。\n\n操作完成后，Bitaro 可以按如下方式分配歌曲：\n- 从舞台右侧数第 1, 2, 3, 4, 5, 7 个海狸演唱第一首歌\n- 从舞台右侧数第 6, 8, 9, 10 个海狸演唱第二首歌\n\n这种分配方式满足条件。若操作次数少于 2 次，则不存在满足条件的分配方式。因此输出 2。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n不进行任何操作时，Bitaro 可以按如下方式分配歌曲：\n- 从舞台右侧数第 1, 2, 3, 5 个海狸演唱第一首歌\n- 从舞台右侧数第 4, 6, 7, 8 个海狸演唱第二首歌  \n- 从舞台右侧数第 9, 10 个海狸演唱第三首歌\n\n这种分配方式满足条件。因此输出 0。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #3】**\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #4】**\n\n该样例满足所有子任务的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\le N \\le 10^6$，$1 \\le K \\le N$，$S$ 是长度为 $2N$ 的字符串，且其中字符 $\\verb!A!$ 和 $\\verb!B!$ 各出现 $N$ 次。保证 $N,K$ 均为整数。\n\n| 子任务编号 | 分值 | 限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $16$ | $N \\le 10$ |\n| $2$ | $24$ | $N \\le 500$ |\n| $3$ | $21$ | $N \\le 5000$ |\n| $4$ | $26$ | $N \\le 10^5$ |\n| $5$ | $13$ | 无 |\n\n提示说明部分，翻译由 DeepSeek R1 完成", "locale": "zh-CN"}}}
{"pid": "P9339", "type": "P", "difficulty": 7, "samples": [["7\n1 1 1 1 1 1 1\n3\n1 2 3", "3\n2 1 7\n2 2 6\n3 3 4 5"], ["5\n5 3 1 2 4\n1\n4", "-1"], ["7\n5 4 4 2 1 1 1\n2\n2 6", "7\n6 1 2 3 4 5 6\n2 2 1\n2 3 1\n2 4 1\n2 7 1\n2 3 2\n2 3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "O2优化", "背包 DP", "二分图", "bitset", "JOISC/JOIST（日本）"], "title": "[JOIST 2023] 曲奇 / Cookies", "background": "", "description": "莉婕喜欢做饼干。她制作了 $N$ 种饼干。第 $i$ 种饼干有 $A_i$ 个。为了出售她制作的饼干，她将它们装入盒子中。但是，应该满足以下条件。\n\n+ 对于每个盒子，其中的饼干种类应不同。\n\n+ 对于每个盒子，其中的饼干数量应等于以下 $M$ 个数字之一：$B_1,B_2,⋯ ,B_M$。\n\n编写一个程序，给出莉婕制作的饼干信息和将饼干装箱的条件，确定是否可能将所有饼干包装到盒子中。此外，如果可以将所有饼干包装在盒子中，则您的程序应输出最少的盒子数量。", "inputFormat": "从标准输入读取以下数据。\n> $N$  \n> $A _ 1 \\ A _ 2 \\ \\cdots \\ A _ N$  \n> $M$  \n> $B _ 1 \\ B _ 2 \\ \\cdots \\ B _ M$", "outputFormat": "如果可以将所有的饼干装入盒子并且满足上述条件，则设 $x$ 是所需的盒子数，$c_k$ 是第 $k$ 个盒子中的饼干数 $(1≤k≤x)$，$v_{k,1},v_{k,2},⋯ ,v_{k,c_k}$ 是第 $k$ 个盒子中的饼干种类。请将这些数字按以下格式编写到标准输出。\n> $x$  \n> $c _ 1 \\ v _ {1, 1} \\ v _ {1, 2} \\ \\cdots \\ v _ {1, c _ 1}$  \n> $c _ 2 \\ v _ {2, 1} \\ v _ {2, 2} \\ \\cdots \\ v _ {2, c _ 2}$  \n> $\\vdots$  \n> $c _ x \\ v _ {x, 1} \\ v _ {x, 2} \\ \\cdots \\ v _ {x, c _ x}$ \n\n在此，使用的盒子数量 $x$ 应该是可能的最小数量。如果有多种方式可以满足条件地将饼干装入盒子，请输出其中任何一种方法。\n\n如果无法将所有饼干包装在盒子中以满足条件，输出 $-1$。", "hint": "#### 【样例解释 #1】\n\n对于该样例输入，可以按照以下方式将 $7$ 个饼干装入 $3$ 个盒子中满足条件：\n\n+ 将第 $1$ 类和第 $7$ 类的饼干装入第一个盒子中。每种类型放 $1$ 个。\n+ 将第 $2$ 类和第 $6$ 类的饼干装入第二个盒子中。每种类型放 $1$ 个。\n+ 将第 $3$ 类、第 $4$ 类和第 $5$ 类的饼干装入第三个盒子中。每种类型放 $1$ 个。\n\n因为不能用少于或等于 $2$ 个盒子来包装 $7$ 个饼干，所以以上方法是正确的。判断为正确答案。还有其他正确方法。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\leq N \\leq 15 000$，$A _ i \\geq 1$（$1 \\leq i \\leq n$），$A _ 1 + A _ 2 + \\cdots + A _ N \\leq 15 000$，$1 \\leq M \\leq N$，$1 \\leq B _ j \\leq N$（$1 \\leq j \\leq M$），$B _ j < B _ {j + 1}$（$1 \\leq j \\leq M - 1$），保证所有输入均为整数。\n\n| **子任务编号** | **分值** | **限制** |\n| :----------: | :----------: | :----------: |\n| $1$ | $6$ | $N \\leq 500$，$A _ i = 1$（$1 \\leq i \\leq N$） |\n| $2$ | $7$ | $N \\leq 500$，$M = 1$ |\n| $3$ | $12$ | $A _ 1 + A _ 2 + \\cdots + A _ N \\leq 15$ |\n| $4$ | $45$ | $A _ 1 + A _ 2 + \\cdots + A _ N \\leq 500$ |\n| $5$ | $15$ | $A _ 1 + A _ 2 + \\cdots + A _ N \\leq 3000$ |\n| $6$ | $15$ | 没有额外的限制 |\n\nTranslate by @[ZeXic_B](https://www.luogu.com.cn/user/661274)", "locale": "zh-CN", "translations": {"en": {"title": "[JOISC 2023] Cookies", "background": null, "description": "Rie likes to make cookies. She made $N$ types of cookies. She made $A _ i$ cookies of type $i(1 \\leq i \\leq N)$. In order to sell the cookies made by her, she will pack them into boxes. However, the following conditions should be satisfied.\n\n- For every box, the types of the cookies in it should be different.\n- For every box, the number of cookies in it should be equal to one of the following $M$ numbers: $B _ 1, B _ 2, \\cdots, B _ M$.\n\nWrite a program which, given information of cookies made by Rie and the conditions to pack the cookies into boxes, determines whether it is possible to pack all the cookies into boxes. Moreover, if it is possible to pack all the cookies into boxes, your program should output a way to pack the cookies into the minimum number of boxes.", "inputFormat": "Read the following data from the standard input.\n\n> $N$  \n> $A _ 1 \\ A _ 2 \\ \\cdots \\ A _ N$  \n> $M$  \n> $B _ 1 \\ B _ 2 \\ \\cdots \\ B _ M$", "outputFormat": "If it is possible to pack all the cookies into boxes so that the conditions are satisfied, let $x$ be the number of used boxes, $c _ k$ be the number of cookies in the $k$-th box ($1\\leq k \\leq x$), and $v _ {k, 1}, v _ {k, 2}, \\cdots, v _ {k, c _ k}$ be the types of the cookies in the $k$-th box. Write these numbers to the standard output as in the following format.\n\n> $x$  \n> $c _ 1 \\ v _ {1, 1} \\ v _ {1, 2} \\ \\cdots \\ v _ {1, c _ 1}$  \n> $c _ 2 \\ v _ {2, 1} \\ v _ {2, 2} \\ \\cdots \\ v _ {2, c _ 2}$  \n> $\\vdots$  \n> $c _ x \\ v _ {x, 1} \\ v _ {x, 2} \\ \\cdots \\ v _ {x, c _ x}$  \n\nHere, the number of used boxes $x$ should be the minimum possible number. If there are several ways to pack the cookies into boxes satisfying the conditions, output any one of them.\n\nIf it is impossible to pack all the cookies into boxes so that the conditions are satisfied, write $-1$ to the standard output.", "hint": "**【样例解释 #1】**\n\nIn this sample input, it is possible to pack the $7$ cookies into $3$ boxes so that the conditions are satisfied as follows.\n\n- Pack cookies of types $1, 7$ into the first box. Pack one cookie for each type.\n- Pack cookies of types $2, 6$ into the second box. Pack one cookie for each type.\n- Pack cookies of types $3, 4, 5$ into the third box. Pack one cookie for each type.\n\nYour program is judged as correct if it outputs the above way to pack the cookies because it is impossible to pack the $7$ cookies into less than or equal to $2$ boxes so that the conditions are satisfied. There are other ways to pack the cookies which are judged as correct.\n\nThis sample input satisfies the constraints of Subtasks 1, 3, 4, 5, 6.\n\n**【样例解释 #2】**\n\nIn this sample input, it is impossible to pack the $15$ cookies into boxes so that the conditions are satisfied.\n\nTherefore, output $-1$.\n\nThis sample input satisfies the constraints of Subtasks 2, 3, 4, 5, 6.\n\n**【样例解释 #3】**\n\nThis sample input satisfies the constraints of Subtasks 4, 5, 6.\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\leq N \\leq 15 000$，$A _ i \\geq 1$（$1 \\leq i \\leq n$），$A _ 1 + A _ 2 + \\cdots + A _ N \\leq 15 000$，$1 \\leq M \\leq N$，$1 \\leq B _ j \\leq N$（$1 \\leq j \\leq M$），$B _ j < B _ {j + 1}$（$1 \\leq j \\leq M - 1$），保证所有输入均为整数。\n\n| **子任务编号** | **分值** | **限制** |\n| :----------: | :----------: | :----------: |\n| $1$ | $6$ | $N \\leq 500$，$A _ i = 1$（$1 \\leq i \\leq N$） |\n| $2$ | $7$ | $N \\leq 500$，$M = 1$ |\n| $3$ | $12$ | $A _ 1 + A _ 2 + \\cdots + A _ N \\leq 15$ |\n| $4$ | $45$ | $A _ 1 + A _ 2 + \\cdots + A _ N \\leq 500$ |\n| $5$ | $15$ | $A _ 1 + A _ 2 + \\cdots + A _ N \\leq 3000$ |\n| $6$ | $15$ | 没有额外的限制 |\n", "locale": "en"}, "zh-CN": {"title": "[JOIST 2023] 曲奇 / Cookies", "background": "", "description": "莉婕喜欢做饼干。她制作了 $N$ 种饼干。第 $i$ 种饼干有 $A_i$ 个。为了出售她制作的饼干，她将它们装入盒子中。但是，应该满足以下条件。\n\n+ 对于每个盒子，其中的饼干种类应不同。\n\n+ 对于每个盒子，其中的饼干数量应等于以下 $M$ 个数字之一：$B_1,B_2,⋯ ,B_M$。\n\n编写一个程序，给出莉婕制作的饼干信息和将饼干装箱的条件，确定是否可能将所有饼干包装到盒子中。此外，如果可以将所有饼干包装在盒子中，则您的程序应输出最少的盒子数量。", "inputFormat": "从标准输入读取以下数据。\n> $N$  \n> $A _ 1 \\ A _ 2 \\ \\cdots \\ A _ N$  \n> $M$  \n> $B _ 1 \\ B _ 2 \\ \\cdots \\ B _ M$", "outputFormat": "如果可以将所有的饼干装入盒子并且满足上述条件，则设 $x$ 是所需的盒子数，$c_k$ 是第 $k$ 个盒子中的饼干数 $(1≤k≤x)$，$v_{k,1},v_{k,2},⋯ ,v_{k,c_k}$ 是第 $k$ 个盒子中的饼干种类。请将这些数字按以下格式编写到标准输出。\n> $x$  \n> $c _ 1 \\ v _ {1, 1} \\ v _ {1, 2} \\ \\cdots \\ v _ {1, c _ 1}$  \n> $c _ 2 \\ v _ {2, 1} \\ v _ {2, 2} \\ \\cdots \\ v _ {2, c _ 2}$  \n> $\\vdots$  \n> $c _ x \\ v _ {x, 1} \\ v _ {x, 2} \\ \\cdots \\ v _ {x, c _ x}$ \n\n在此，使用的盒子数量 $x$ 应该是可能的最小数量。如果有多种方式可以满足条件地将饼干装入盒子，请输出其中任何一种方法。\n\n如果无法将所有饼干包装在盒子中以满足条件，输出 $-1$。", "hint": "#### 【样例解释 #1】\n\n对于该样例输入，可以按照以下方式将 $7$ 个饼干装入 $3$ 个盒子中满足条件：\n\n+ 将第 $1$ 类和第 $7$ 类的饼干装入第一个盒子中。每种类型放 $1$ 个。\n+ 将第 $2$ 类和第 $6$ 类的饼干装入第二个盒子中。每种类型放 $1$ 个。\n+ 将第 $3$ 类、第 $4$ 类和第 $5$ 类的饼干装入第三个盒子中。每种类型放 $1$ 个。\n\n因为不能用少于或等于 $2$ 个盒子来包装 $7$ 个饼干，所以以上方法是正确的。判断为正确答案。还有其他正确方法。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\leq N \\leq 15 000$，$A _ i \\geq 1$（$1 \\leq i \\leq n$），$A _ 1 + A _ 2 + \\cdots + A _ N \\leq 15 000$，$1 \\leq M \\leq N$，$1 \\leq B _ j \\leq N$（$1 \\leq j \\leq M$），$B _ j < B _ {j + 1}$（$1 \\leq j \\leq M - 1$），保证所有输入均为整数。\n\n| **子任务编号** | **分值** | **限制** |\n| :----------: | :----------: | :----------: |\n| $1$ | $6$ | $N \\leq 500$，$A _ i = 1$（$1 \\leq i \\leq N$） |\n| $2$ | $7$ | $N \\leq 500$，$M = 1$ |\n| $3$ | $12$ | $A _ 1 + A _ 2 + \\cdots + A _ N \\leq 15$ |\n| $4$ | $45$ | $A _ 1 + A _ 2 + \\cdots + A _ N \\leq 500$ |\n| $5$ | $15$ | $A _ 1 + A _ 2 + \\cdots + A _ N \\leq 3000$ |\n| $6$ | $15$ | 没有额外的限制 |\n\nTranslate by @[ZeXic_B](https://www.luogu.com.cn/user/661274)", "locale": "zh-CN"}}}
{"pid": "P9340", "type": "P", "difficulty": 6, "samples": [["7 6 2\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n2 3 6 4 5 7\n1 3\n4 6", "4\n6"], ["8 8 9\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 6 4 3 5 2 4 7\n3 5\n4 6\n6 8\n1 4\n2 3\n6 8\n5 5\n2 8\n1 2", "3\n4\n6\n6\n3\n6\n1\n6\n3"], ["10 7 9\n6 5\n3 6\n9 3\n8 3\n7 8\n7 1\n2 5\n7 10\n8 4\n9 4 10 1 10 7 6\n4 4\n1 3\n1 3\n6 7\n3 6\n3 3\n1 5\n2 5\n1 2", "1\n6\n6\n4\n3\n1\n7\n5\n4"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2023] 旅行 / Tourism", "background": null, "description": "JOI 王国是一个由 $N$ 个岛屿组成的岛国，编号从 $1$ 到 $N$。这些岛屿通过 $N - 1$ 座桥相连，编号从 $1$ 到 $N - 1$。桥 $i\\ (1 \\leq i \\leq N - 1)$ 双向连接岛屿 $A_i$ 和岛屿 $B_i$。可以通过若干座桥从任意一个岛屿到达另一个岛屿。在 JOI 王国，有 $M$ 个观光景点，编号从 $1$ 到 $M$。观光景点 $j\\ (1 \\leq j \\leq M)$ 位于岛屿 $C_j$。有 $Q$ 位旅行者，他们计划参观 JOI 王国的观光景点。旅行者编号从 $1$ 到 $Q$。每位旅行者按以下方式旅行。\n\n1. 旅行者选择一个岛屿 $x\\ (1 \\leq x \\leq N)$。乘坐飞机，旅行者到达岛屿 $x$。\n2. 旅行者进行若干次以下动作。动作的顺序和种类是任意的。\n\n    - 旅行者选择当前岛屿上的一个观光景点，并参观。\n    - 旅行者通过桥梁移动到另一个岛屿。\n\n3. 乘坐飞机，旅行者离开 JOI 王国。旅行者 $k\\ (1 \\leq k \\leq Q)$ 想要参观所有的观光景点 $L_k, L_k+1, \\ldots, R_k$。然而，由于预算有限，旅行者 $k$ 希望最小化至少访问一次的岛屿数量。", "inputFormat": "从标准输入读取以下数据。\n\n> $N\\ M\\ Q$\n\n> \n\n> $A_1\\ B_1$\n\n> \n\n> $A_2\\ B_2$\n\n> \n\n> $\\vdots$\n\n> \n\n> $A_{N-1}\\ B_{N-1}$\n\n> \n\n> $C_1\\ C_2\\ \\cdots\\ C_M$\n\n> \n\n> $L_1\\ R_1$\n\n> \n\n> $L_2\\ R_2$\n\n> \n\n> $\\vdots$\n\n> \n\n> $L_Q\\ R_Q$", "outputFormat": "向标准输出写入 $Q$ 行。输出的第 $k$ 行 $(1 \\leq k \\leq Q)$ 应包含旅行者 $k$ 至少访问一次的岛屿的最小可能数量。", "hint": "**【样例解释 #1】**\n\n旅行者 1 按以下方式旅行，并参观所有的观光景点 1, 2, 3。\n1. 旅行者 1 到达岛屿 2。\n2. 旅行者 1 参观岛屿 2 上的观光景点 1。\n3. 旅行者 1 通过桥梁 1 从岛屿 2 移动到岛屿 1。\n4. 旅行者 1 通过桥梁 2 从岛屿 1 移动到岛屿 3。\n5. 旅行者 1 参观岛屿 3 上的观光景点 2。\n6. 旅行者 1 通过桥梁 5 从岛屿 3 移动到岛屿 6。\n7. 旅行者 1 参观岛屿 6 上的观光景点 3。\n8. 旅行者 1 从岛屿 6 出发，离开 JOI 王国。\n\n岛屿 1, 2, 3, 6 是旅行者 1 至少访问一次的四个岛屿。如果旅行者 1 至少访问一次的岛屿数量小于或等于 3，则不可能参观所有的观光景点 1, 2, 3。因此，第一行输出 4。旅行者 2 按以下方式旅行，并参观所有的观光景点 4, 5, 6。\n1. 旅行者 2 到达岛屿 3。\n2. 旅行者 2 通过桥梁 6 从岛屿 3 移动到岛屿 7。\n3. 旅行者 2 参观岛屿 7 上的观光景点 6。\n4. 旅行者 2 通过桥梁 6 从岛屿 7 移动到岛屿 3。\n5. 旅行者 2 通过桥梁 2 从岛屿 3 移动到岛屿 1。\n6. 旅行者 2 通过桥梁 1 从岛屿 1 移动到岛屿 2。\n7. 旅行者 2 通过桥梁 3 从岛屿 2 移动到岛屿 4。\n8. 旅行者 2 参观岛屿 4 上的观光景点 4。\n9. 旅行者 2 通过桥梁 3 从岛屿 4 移动到岛屿 2。\n10. 旅行者 2 通过桥梁 4 从岛屿 2 移动到岛屿 5。\n11. 旅行者 2 参观岛屿 5 上的观光景点 5。\n12. 旅行者 2 从岛屿 5 出发，离开 JOI 王国。\n\n岛屿 1, 2, 3, 4, 5, 7 是旅行者 2 至少访问一次的六个岛屿。如果旅行者 2 至少访问一次的岛屿数量小于或等于 5，则不可能参观所有的观光景点 4, 5, 6。因此，第二行输出 6。此样例输入满足子任务 1, 2, 4, 5, 6 的约束。\n\n岛屿 1, 2, 3, 4, 5, 7 是旅行者 2 至少访问一次的六个岛屿。如果旅行者 2 至少访问一次的岛屿数量小于或等于 5，则不可能参观所有的观光景点 4, 5, 6。因此，第二行输出 6。\n\n此样例输入满足子任务 1, 2, 4, 5, 6 的约束。\n\n**【样例解释 #2】**\n\n此样例输入满足子任务 1, 2, 3, 6 的约束。\n\n**【样例解释 #3】**\n\n此样例输入满足子任务 1, 2, 6 的约束。\n\n**【数据范围】**\n\n- $1 \\leq N \\leq 100 000$。\n- $1 \\leq M \\leq 100 000$。\n- $1 \\leq Q \\leq 100 000$。\n- $1 \\leq A_i \\leq N\\ (1 \\leq i \\leq N - 1)$。\n- $1 \\leq B_i \\leq N\\ (1 \\leq i \\leq N - 1)$。\n- 可以通过若干座桥从任意一个岛屿到达另一个岛屿。\n- $1 \\leq C_j \\leq N\\ (1 \\leq j \\leq M)$。\n- $1 \\leq L_k \\leq R_k \\leq M\\ (1 \\leq k \\leq Q)$。\n- 给定的值都是整数。\n\n**【子任务】**\n\n1. (5 分) $N \\leq 300, M \\leq 300, Q \\leq 300$。\n2. (5 分) $N \\leq 2 000, M \\leq 2 000, Q \\leq 2 000$。\n3. (7 分) $A_i = i, B_i = i + 1\\ (1 \\leq i \\leq N - 1)$。\n4. (18 分) $L_1 = 1, R_{k} + 1 = L_{k+1}\\ (1 \\leq k \\leq Q - 1), R_Q = M$。\n5. (24 分) $A_i = \\lfloor\\frac{i+1}2\\rfloor, B_i = i + 1\\ (1 \\leq i \\leq N-1)$。这里，$\\lfloor x\\rfloor$ 是不超过 x 的最大整数。\n6. (41 分) 无额外约束。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN", "translations": {"en": {"title": "[JOIST 2023] Tourism", "background": null, "description": "JOI Kingdom is an insular country consisting of $N$ islands, numbered from $1$ to $N$. The islands are connected by $N − 1$ bridges, numbered from $1$ to $N − 1$. The bridge $i\\ (1 ≤ i ≤ N − 1)$ connects the island $A_i$ and the island $B_i$ bidirectionally. It is possible to travel from any island to any other island by passing through a number of\nbridges.\nIn JOI Kingdom, there are $M$ sightseeing spots, numbered from $1$ to $M$. The sightseeing spot $j\\ (1 ≤ j ≤ M)$ is located in the island $C_j$.\nThere are $Q$ travelers. They plan to visit sightseeing spots in JOI Kingdom. The travelers are numbered from $1$ to $Q$. Each traveler makes a trip in the following way.\n\n1. The traveler chooses an island $x\\ (1 ≤ x ≤ N)$. Taking an airplane, the traveler arrives at the island $x$.\n2. The traveler takes the following actions a number of times. The order and the kinds of actions are arbitrary.\n\n    - The traveler chooses a sightseeing spot in the current island, and visits there.\n    - The traveler moves to another island by passing through a bridge.\n\n3. Taking an airplane, the traveler leaves JOI Kingdom.\n    The traveler $k\\ (1 ≤ k ≤ Q)$ wants to visit all of the sightseeing spots $L_k, L_k+1, . . . , R_k$. However, since the budget is limited, the traveler $k$ wants to minimize the number of islands where the traveler $k$ visits at least once.\n\nWrite a program which, given information of JOI Kingdom and the travelers, calculates, for each $k\\ (1 ≤ k ≤ Q)$, the minimum possible number of islands where the traveler $k​$ visits at least once.", "inputFormat": "Read the following data from the standard input.\n\n> $N\\ M\\ Q$\n> \n> $A_1\\ B_1$\n> \n> $A_2\\ B_2$\n> \n> $\\vdots$\n> \n> $A_{N−1}\\ B_{N−1}$\n> \n> $C_1\\ C_2\\ · · ·\\ C_M$\n> \n> $L_1\\ R_1$\n> \n> $L_2\\ R_2$\n> \n> $\\vdots$\n> \n> $L_Q\\ R_Q$", "outputFormat": "Write $Q$ lines to the standard output. The $k$-th line $(1 ≤ k ≤ Q)$ of output should contain the minimum possible number of islands where the traveler $k$ visits at least once.", "hint": "**【样例解释 #1】**\n\nThe traveler 1 makes a trip in the following way, and visits all of the sightseeing spots 1, 2, 3.\n1. The traveler 1 arrives at the island 2.\n2. The traveler 1 visits the sightseeing spot 1 in the island 2.\n3. The traveler 1 moves from the island 2 to the island 1 by passing through the bridge 1.\n4. The traveler 1 moves from the island 1 to the island 3 by passing through the bridge 2.\n5. The traveler 1 visits the sightseeing spot 2 in the island 3.\n6. The traveler 1 moves from the island 3 to the island 6 by passing through the bridge 5.\n7. The traveler 1 visits the sightseeing spot 3 in the island 6.\n8. The traveler 1 departs from the island 6 and leaves JOI Kingdom.\n\nThe islands 1, 2, 3, 6 are the four islands where the traveler 1 visits at least once. If the number of islands traveler 1 visits at least once is less than or equal to 3, it is impossible to visit all of the sightseeing spots 1, 2, 3.\nTherefore, output 4 in the first line.\nThe traveler 2 makes a trip in the following way, and visits all of the sightseeing spots 4, 5, 6.\n1. The traveler 2 arrives at the island 3.\n2. The traveler 2 moves from the island 3 to the island 7 by passing through the bridge 6.\n3. The traveler 2 visits the sightseeing spot 6 in the island 7.\n4. The traveler 2 moves from the island 7 to the island 3 by passing through the bridge 6.\n5. The traveler 2 moves from the island 3 to the island 1 by passing through the bridge 2.\n6. The traveler 2 moves from the island 1 to the island 2 by passing through the bridge 1.\n7. The traveler 2 moves from the island 2 to the island 4 by passing through the bridge 3.\n8. The traveler 2 visits the sightseeing spot 4 in the island 4.\n9. The traveler 2 moves from the island 4 to the island 2 by passing through the bridge 3.\n10. The traveler 2 moves from the island 2 to the island 5 by passing through the bridge 4.\n11. The traveler 2 visits the sightseeing spot 5 in the island 5.\n12. The traveler 2 departs from the island 5 and leaves JOI Kingdom.\n\nThe islands 1, 2, 3, 4, 5, 7 are the six islands where the traveler 2 visits at least once. If the number of islands\ntraveler 2 visits at least once is less than or equal to 5, it is impossible to visit all of the sightseeing spots 4, 5, 6.\nTherefore, output 6 in the second line.\nThis sample input satisfies the constraints of Subtasks 1, 2, 4, 5, 6.\n\nThe islands 1, 2, 3, 4, 5, 7 are the six islands where the traveler 2 visits at least once. If the number of islands\ntraveler 2 visits at least once is less than or equal to 5, it is impossible to visit all of the sightseeing spots 4, 5, 6.\nTherefore, output 6 in the second line.\n\nThis sample input satisfies the constraints of Subtasks 1, 2, 4, 5, 6.\n\n**【样例解释 #2】**\n\nThis sample input satisfies the constraints of Subtasks 1, 2, 3, 6.\n\n**【样例解释 #3】**\n\nThis sample input satisfies the constraints of Subtasks 1, 2, 6.\n\n**【数据范围】**\n\n- $1 ≤ N ≤ 100 000$.\n- $1 ≤ M ≤ 100 000$.\n- $1 ≤ Q ≤ 100 000$.\n- $1 ≤ A_i ≤ N\\ (1 ≤ i ≤ N − 1)$.\n- $1 ≤ B_i ≤ N\\ (1 ≤ i ≤ N − 1)$.\n- It is possible to travel from any island to any other island by passing through a number of bridges.\n- $1 ≤ C_j ≤ N\\ (1 ≤ j ≤ M)$.\n- $1 ≤ L_k ≤ R_k ≤ M\\ (1 ≤ k ≤ Q)$.\n- Given values are all integers.\n\n**【子任务】**\n\n1. (5 points) $N ≤ 300, M ≤ 300, Q ≤ 300$.\n2. (5 points) $N ≤ 2 000, M ≤ 2 000, Q ≤ 2 000$.\n3. (7 points) $A_i = i, B_i = i + 1\\ (1 ≤ i ≤ N − 1)$.\n4. (18 points) $L_1 = 1, R_{k} + 1 = L_{k+1}\\ (1 ≤ k ≤ Q − 1), R_Q = M$.\n5. (24 points) $A_i = \\lfloor\\frac{i+1}2\\rfloor, B_i = i + 1\\ (1 ≤ i ≤ N−1)$. Here, $⌊x⌋$ is the largest integer not exceeding x.\n6. (41 points) No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[JOIST 2023] 旅行 / Tourism", "background": null, "description": "JOI 王国是一个由 $N$ 个岛屿组成的岛国，编号从 $1$ 到 $N$。这些岛屿通过 $N - 1$ 座桥相连，编号从 $1$ 到 $N - 1$。桥 $i\\ (1 \\leq i \\leq N - 1)$ 双向连接岛屿 $A_i$ 和岛屿 $B_i$。可以通过若干座桥从任意一个岛屿到达另一个岛屿。在 JOI 王国，有 $M$ 个观光景点，编号从 $1$ 到 $M$。观光景点 $j\\ (1 \\leq j \\leq M)$ 位于岛屿 $C_j$。有 $Q$ 位旅行者，他们计划参观 JOI 王国的观光景点。旅行者编号从 $1$ 到 $Q$。每位旅行者按以下方式旅行。\n\n1. 旅行者选择一个岛屿 $x\\ (1 \\leq x \\leq N)$。乘坐飞机，旅行者到达岛屿 $x$。\n2. 旅行者进行若干次以下动作。动作的顺序和种类是任意的。\n\n    - 旅行者选择当前岛屿上的一个观光景点，并参观。\n    - 旅行者通过桥梁移动到另一个岛屿。\n\n3. 乘坐飞机，旅行者离开 JOI 王国。旅行者 $k\\ (1 \\leq k \\leq Q)$ 想要参观所有的观光景点 $L_k, L_k+1, \\ldots, R_k$。然而，由于预算有限，旅行者 $k$ 希望最小化至少访问一次的岛屿数量。", "inputFormat": "从标准输入读取以下数据。\n\n> $N\\ M\\ Q$\n\n> \n\n> $A_1\\ B_1$\n\n> \n\n> $A_2\\ B_2$\n\n> \n\n> $\\vdots$\n\n> \n\n> $A_{N-1}\\ B_{N-1}$\n\n> \n\n> $C_1\\ C_2\\ \\cdots\\ C_M$\n\n> \n\n> $L_1\\ R_1$\n\n> \n\n> $L_2\\ R_2$\n\n> \n\n> $\\vdots$\n\n> \n\n> $L_Q\\ R_Q$", "outputFormat": "向标准输出写入 $Q$ 行。输出的第 $k$ 行 $(1 \\leq k \\leq Q)$ 应包含旅行者 $k$ 至少访问一次的岛屿的最小可能数量。", "hint": "**【样例解释 #1】**\n\n旅行者 1 按以下方式旅行，并参观所有的观光景点 1, 2, 3。\n1. 旅行者 1 到达岛屿 2。\n2. 旅行者 1 参观岛屿 2 上的观光景点 1。\n3. 旅行者 1 通过桥梁 1 从岛屿 2 移动到岛屿 1。\n4. 旅行者 1 通过桥梁 2 从岛屿 1 移动到岛屿 3。\n5. 旅行者 1 参观岛屿 3 上的观光景点 2。\n6. 旅行者 1 通过桥梁 5 从岛屿 3 移动到岛屿 6。\n7. 旅行者 1 参观岛屿 6 上的观光景点 3。\n8. 旅行者 1 从岛屿 6 出发，离开 JOI 王国。\n\n岛屿 1, 2, 3, 6 是旅行者 1 至少访问一次的四个岛屿。如果旅行者 1 至少访问一次的岛屿数量小于或等于 3，则不可能参观所有的观光景点 1, 2, 3。因此，第一行输出 4。旅行者 2 按以下方式旅行，并参观所有的观光景点 4, 5, 6。\n1. 旅行者 2 到达岛屿 3。\n2. 旅行者 2 通过桥梁 6 从岛屿 3 移动到岛屿 7。\n3. 旅行者 2 参观岛屿 7 上的观光景点 6。\n4. 旅行者 2 通过桥梁 6 从岛屿 7 移动到岛屿 3。\n5. 旅行者 2 通过桥梁 2 从岛屿 3 移动到岛屿 1。\n6. 旅行者 2 通过桥梁 1 从岛屿 1 移动到岛屿 2。\n7. 旅行者 2 通过桥梁 3 从岛屿 2 移动到岛屿 4。\n8. 旅行者 2 参观岛屿 4 上的观光景点 4。\n9. 旅行者 2 通过桥梁 3 从岛屿 4 移动到岛屿 2。\n10. 旅行者 2 通过桥梁 4 从岛屿 2 移动到岛屿 5。\n11. 旅行者 2 参观岛屿 5 上的观光景点 5。\n12. 旅行者 2 从岛屿 5 出发，离开 JOI 王国。\n\n岛屿 1, 2, 3, 4, 5, 7 是旅行者 2 至少访问一次的六个岛屿。如果旅行者 2 至少访问一次的岛屿数量小于或等于 5，则不可能参观所有的观光景点 4, 5, 6。因此，第二行输出 6。此样例输入满足子任务 1, 2, 4, 5, 6 的约束。\n\n岛屿 1, 2, 3, 4, 5, 7 是旅行者 2 至少访问一次的六个岛屿。如果旅行者 2 至少访问一次的岛屿数量小于或等于 5，则不可能参观所有的观光景点 4, 5, 6。因此，第二行输出 6。\n\n此样例输入满足子任务 1, 2, 4, 5, 6 的约束。\n\n**【样例解释 #2】**\n\n此样例输入满足子任务 1, 2, 3, 6 的约束。\n\n**【样例解释 #3】**\n\n此样例输入满足子任务 1, 2, 6 的约束。\n\n**【数据范围】**\n\n- $1 \\leq N \\leq 100 000$。\n- $1 \\leq M \\leq 100 000$。\n- $1 \\leq Q \\leq 100 000$。\n- $1 \\leq A_i \\leq N\\ (1 \\leq i \\leq N - 1)$。\n- $1 \\leq B_i \\leq N\\ (1 \\leq i \\leq N - 1)$。\n- 可以通过若干座桥从任意一个岛屿到达另一个岛屿。\n- $1 \\leq C_j \\leq N\\ (1 \\leq j \\leq M)$。\n- $1 \\leq L_k \\leq R_k \\leq M\\ (1 \\leq k \\leq Q)$。\n- 给定的值都是整数。\n\n**【子任务】**\n\n1. (5 分) $N \\leq 300, M \\leq 300, Q \\leq 300$。\n2. (5 分) $N \\leq 2 000, M \\leq 2 000, Q \\leq 2 000$。\n3. (7 分) $A_i = i, B_i = i + 1\\ (1 \\leq i \\leq N - 1)$。\n4. (18 分) $L_1 = 1, R_{k} + 1 = L_{k+1}\\ (1 \\leq k \\leq Q - 1), R_Q = M$。\n5. (24 分) $A_i = \\lfloor\\frac{i+1}2\\rfloor, B_i = i + 1\\ (1 \\leq i \\leq N-1)$。这里，$\\lfloor x\\rfloor$ 是不超过 x 的最大整数。\n6. (41 分) 无额外约束。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9341", "type": "P", "difficulty": 7, "samples": [["4 3 0\n2 1 3 2\n1 2\n2 3\n3 4\n", "7\n"], ["4 3 1\n2 1 3 2\n1 2\n2 3\n3 4\n", "7\n5\n"], ["3 3 0\n1 1 1\n1 2\n1 3\n2 3\n", "2\n"], ["8 7 0\n2 2 2 2 2 2 2 2\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n", "14"], ["8 7 0\n16 39 36 23 15 48 23 56\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n7 8\n", "245"], ["10 13 4\n314 159 265 358 979 323 846 264 338 327\n1 2\n1 4\n2 3\n2 5\n3 6\n4 5\n4 7\n5 6\n5 8\n6 9\n7 8\n8 9\n9 10\n", "3139\n2901\n2722\n2567\n2461\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "JOISC/JOIST（日本）"], "title": "[JOIST 2023] 警卫 / Security Guard", "background": "", "description": "在 JOI 王国，有 $N$ 个岛屿，编号从 $1$ 到 $N$。每个岛屿都有一个不安全等级。岛屿 $i\\ (1 \\le i \\le N)$ 的不安全等级是 $S_i$。\n\n在 JOI 王国，岛屿之间的船只是主要的交通方式。有 $M$ 艘船，编号从 $1$ 到 $M$。船 $j\\ (1 \\le j \\le M)$ 连接岛屿 $A_j$ 和岛屿 $B_j$。我们可以在需要时运行船只。可以通过多次乘船从任何岛屿到达其他岛屿。\n\n在 JOI 王国，有计划引入新的船只。我们可以选择任何一对岛屿来连接新引入的船只。\n\n有一天，发生了一起事件。一艘停泊的船遭到了攻击。JOI 王国的总理 K 决定引入新的船只。他还要求 JOI 王国的船只满足以下**安全条件**。\n\n- 当船停泊在岛屿 $i\\ (1 \\le i \\le N)$ 时，船上的保安人数必须大于或等于 $S_i$。\n\n然而，由于雇佣保安很昂贵，我们希望最小化雇佣保安的人数。只要满足“可以通过多次乘船从任何岛屿到达其他岛屿”的条件，就可以废除当前运行的船只。\n\n因此，我们将按如下方式运行船只。这里，$k$ 是新引入的船只数量。\n\n1. 对于每艘新引入的船，我们选择它连接的两个岛屿。\n2. 我们选择若干（大于或等于 $0$）船只，并废除它们。允许废除新引入的船只。\n3. 对于每艘船，我们将其停泊在它连接的两个岛屿之一。我们让若干保安登船。此外，必须满足以下条件。\n\n*条件* 对于每对岛屿 $u, v\\ (1 \\le u \\le N, 1 \\le v \\le N)$，可以通过多次重复以下操作将乘客从岛屿 $u$ 运输到岛屿 $v$。在此过程中，安全条件必须始终得到满足。\n\n- 我们让乘客或保安登上停泊在乘客或保安所在岛屿的船。\n- 我们让乘客或保安在船当前停泊的岛屿下船。\n- 我们将船从当前停泊的岛屿移动到船连接的另一个岛屿。\n\n由于预算有限，我们最多可以引入 $Q$ 艘新船。对于每个 $k\\ (0 \\le k \\le Q)$，总理 K 想知道如果新引入的船只数量为 $k$ 时，雇佣保安的最小可能人数。\n\n编写一个程序，给定岛屿的信息、船只的航线以及我们可以引入的新船数量，计算每个 $k$ 的雇佣保安的最小可能人数。", "inputFormat": "从标准输入读取以下数据。\n\n> $N\\ M\\ Q$\n>\n> $S_1\\ S_2\\ \\cdots\\ S_N$\n>\n> $A_1\\ B_1$\n>\n> $A_2\\ B_2$\n>\n> $\\vdots$\n>\n> $A_M\\ B_M$", "outputFormat": "向标准输出写入 $Q+1$ 行。输出的第 $(k+1)$ 行 $(0 \\le k \\le Q)$ 应包含如果新引入的船只数量为 $k$ 时雇佣保安的最小可能人数。", "hint": "#### 【样例解释 #1】\n\n如果新引入的船只数量为 $0$，我们需要 $7$ 名保安。例如，如果我们按如下方式分配船只和 $7$ 名保安，则条件得到满足。\n\n- 船 $1$ 最初停泊在岛屿 $2$，并有两名保安登上船 $1$。\n- 船 $2$ 最初停泊在岛屿 $2$，并有两名保安登上船 $2$。\n- 船 $3$ 最初停泊在岛屿 $4$，并有三名保安登上船 $3$。\n\n让我们解释如何在以下两种情况下运输乘客。\n\n- 我们将乘客从岛屿 $1$ 运输到岛屿 $4$。\n- 我们将乘客从岛屿 $3$ 运输到岛屿 $2$。\n\n我们可以按如下方式将乘客从岛屿 $1$ 运输到岛屿 $4$。船 $1, 2, 3$ 停泊的岛屿，以及船 $1, 2, 3$ 上的保安人数按此顺序写出。岛屿 $1, 2, 3, 4$ 上的保安人数按此顺序写出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/itac2gkr.png)\n\n我们可以按如下方式将乘客从岛屿 $3$ 运输到岛屿 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cooaz7e1.png)\n\n由于如果保安人数小于或等于 $6$，则无法满足条件，因此输出 $7$。\n\n此样例输入满足子任务 $2, 3, 4, 5, 6, 7$ 的约束。\n\n#### 【样例解释 #2】\n\n如果新引入的船只数量为 $0$，与样例输入 $1$ 类似，我们需要 $7$ 名保安。\n\n如果新引入的船只数量为 $1$，我们需要 $5$ 名保安。例如，如果我们按如下方式分配船只和 $5$ 名保安，则条件得到满足。\n\n- 我们引入一艘连接岛屿 $2$ 和岛屿 $4$ 的新船。（在下文中，我们称之为船 $4$。）\n- 我们废除船 $3$。\n- 我们最初将船 $1$ 停泊在岛屿 $2$，并让两名保安登上船 $1$。\n- 我们最初将船 $2$ 停泊在岛屿 $2$，并让一名保安登上船 $2$。\n- 我们最初将船 $4$ 停泊在岛屿 $2$，并让两名保安登上船 $4$。\n\n此样例输入满足子任务 $5, 6, 7$ 的约束。\n\n#### 【样例解释 #3】\n\n如果新引入的船只数量为 $0$，我们需要 $2$ 名保安。例如，如果我们按如下方式分配船只和 $2$ 名保安，则条件得到满足。\n\n- 我们废除船 $3$。\n- 我们最初将船 $1$ 停泊在岛屿 $1$，并让一名保安登上船 $1$。\n- 我们最初将船 $2$ 停泊在岛屿 $1$，并让一名保安登上船 $2$。\n\n此样例输入满足子任务 $4, 5, 6, 7$ 的约束。\n\n#### 【样例解释 #4】\n\n此样例输入满足所有子任务的约束。\n\n#### 【样例解释 #5】\n\n此样例输入满足子任务 $3, 4, 5, 6, 7$ 的约束。\n\n#### 【样例解释 #6】\n\n此样例输入满足子任务 $5, 6, 7$ 的约束。\n\n#### 【数据范围】\n\n对于所有测试数据，满足：\n\n- $2 \\le N \\le 2\\times 10 ^ 5$；\n- $N - 1 \\le M \\le 4\\times 10 ^ 5$；\n- $0 \\le Q \\le 2\\times 10 ^ 5$；\n- $1 \\le S_i \\le 10 ^ 9\\ (1 \\le i \\le N)$；\n- $1 \\le A_j < B_j \\le N\\ (1 \\le j \\le M)$；\n- $(A_x, B_x) \neq (A_y, B_y)\\ (1 \\le x < y \\le M)$；\n- 可以通过多次乘船从任何岛屿到达其他岛屿；\n- 给定值均为整数。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $12$ | $M = N - 1$，$Q = 0$，$S_i \\le 2\\ (1 \\le i \\le N)$，$A_j = j$，$B_j = j + 1\\ (1 \\le j \\le M)$ |\n| $2$ | $13$ | $M = N - 1$，$Q = 0$，$A_j = j$，$B_j = j + 1\\ (1 \\le j \\le M)$ |\n| $3$ | $12$ | $M = N - 1$，$Q = 0$ |\n| $4$ | $13$ | $Q = 0$ |\n| $5$ | $8$ | $N \\le 16$ |\n| $6$ | $18$ | $N \\le 3 000$ |\n| $7$ | $24$ | 无 |\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN", "translations": {"en": {"title": "[JOIST 2023] Security Guard", "background": null, "description": "In JOI Kingdom, there are $N$ islands, numbered from $1$ to $N$. Each island has the insecurity level. The insecurity level of the island $i\\ (1 \\le i \\le N)$ is $S_i$.\n\nIn JOI Kingdom, ships between pairs of islands are mostly used as the methods of transportations. There are $M$ ships, numbered from $1$ to $M$. The ship $j\\ (1 \\le j \\le M)$ connects the island $A_j$ and the island $B_j$. We can run ships when necessary. It is possible to travel from any island to any other island by taking a number of ships.\n\nIn JOI Kingdom, there is a plan to introduce new ships. We can choose any pairs of islands where newly introduced ships connect.\n\nOne day, an incident occurred. A ship at anchor was attacked. Prime minister K of JOI Kingdom decided to introduce new ships. He also demands that ships in JOI Kingdom should satisfy the following **Security\nCondition**.\n\n- When a ship is anchored at the island $i\\ (1 \\le i \\le N)$, the number of security guards on the ship is greater than or equal to $S_i$.\n\nHowever, since it is expensive to hire security guards, we want to minimize the number of hired security guards. As long as the condition “it is possible to travel from any island to any other island by taking a number of ships” is satisfied, it is possible to abolish ships which are currently running.\n\nTherefore, we will run ships as follows. Here, $k$ is the number of newly introduced ships.\n\n1. For each of the $k$ newly introduced ships, we choose two islands where it connects.\n2. We choose a number of (more than or equal to $0$) ships, and we abolish them. It is allowed to abolish newly introduced ships.\n3. For each of the ships, we anchor it at one of the two islands where it connects. We make a number of security guards get on it. Moreover, the following conditions should be satisfied.\n\n*Condition* &nbsp; &nbsp; For every pair $u, v\\ (1 \\le u \\le N, 1 \\le v \\le N)$ of islands, it is possible to transport a passenger from the island $u$ to the island $v$ by repeating the following operations a number of times. In the process, Security Condition should be satisfied all the time.\n\n -  We make a passenger or security guards get on a ship which is anchored at the island where the passenger or security guards are staying.\n- We make a passenger or security guards get off a ship at the island where the ship is currently anchored.\n- We move a ship from the island where the ship is currently anchored to the other island where the ship connects.\n\nSince the budget is limited, we can introduce at most $Q$ new ships. For each $k\\ (0 \\le k \\le Q)$, Prime minister K wants to know the minimum possible number of hired security guards if the number of newly introduced ships is $k$.\nWrite a program which, given the information of islands and the routes of the ships and the number of new ships we can introduce, calculates the minimum possible number of hired security guards for each $k$.", "inputFormat": "Read the following data from the standard input.\n\n> $N\\ M\\ Q$\n>\n> $S_1\\ S_2\\ \\cdots\\ S_N$\n>\n> $A_1\\ B_1$\n>\n> $A_2\\ B_2$\n>\n> $\\vdots$\n>\n> $A_M\\ B_M$", "outputFormat": "Write $Q+1$ lines to the standard output. The $(k+1)$-th line $(0 \\le k \\le Q)$ of output should contain the minimum possible number of hired security guards if the number of newly introduced ships is $k$.\n", "hint": "#### 【样例解释 #1】\n\nIf the number of newly introduced ships is $0$, we need $7$ security guards. For example, the conditions are satisfied if we allocate the ships and $7$ security guards as follows.\n\n- The ship $1$ is initially anchored at the island $2$, and two security guards get on the ship $1$.\n- The ship $2$ is initially anchored at the island $2$, and two security guards get on the ship $2$.\n- The ship $3$ is initially anchored at the island $4$, and three security guards get on the ship $3$.\n\nLet us explain how to transport a passenger in the following two cases.\n\n- We transport a passenger from the island $1$ to the island $4$.\n- We transport a passenger from the island $3$ to the island $2$.\n\nWe can transport a passenger from the island $1$ to the island $4$ as follows. The islands where the ships $1, 2, 3$ are anchored, and the numbers of security guards on the ships $1, 2, 3$ are written in this order. The numbers of security guards on the islands $1, 2, 3, 4$ are written in this order.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/itac2gkr.png)\n\nWe can transport a passenger from the island $3$ to the island $2$ as follows.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cooaz7e1.png)\n\nSince it is impossible to satisfy the conditions if the number of security guards is less than or equal to $6$, output $7$.\n\nThis sample input satisfies the constraints of Subtasks $2, 3, 4, 5, 6, 7$.\n\n#### 【样例解释 #2】\n\nIf the number of newly introduced ships is $0$, similarly as Sample Input $1$, we need $7$ security guards.\n\nIf the number of newly introduced ships is $1$, we need $5$ security guards. For example, the conditions are satisfied if we allocate the ships and $5$ security guards as follows.\n\n- We introduce a new ship connecting the island $2$ and the island $4$. (In the following, we call it the ship $4$.)\n- We abolish the ship $3$.\n- We initially anchor the ship $1$ at the island $2$, and make two security guards get on the ship $1$.\n- We initially anchor the ship $2$ at the island $2$, and make one security guard get on the ship $2$.\n- We initially anchor the ship $4$ at the island $2$, and make two security guards get on the ship $4$.\n\nThis sample input satisfies the constraints of Subtasks $5, 6, 7$.\n\n#### 【样例解释 #3】\n\nIf the number of newly introduced ships is $0$, we need $2$ security guards. For example, the conditions are satisfied if we allocate the ships and $2$ security guards as follows.\n\n- We abolish the ship $3$.\n- We initially anchor the ship $1$ at the island $1$, and make one security guard get on the ship $1$.\n- We initially anchor the ship $2$ at the island $1$, and make one security guard get on the ship $2$.\n\nThis sample input satisfies the constraints of Subtasks $4, 5, 6, 7$.\n\n#### 【样例解释 #4】\n\nThis sample input satisfies the constraints of all the subtasks.\n\n#### 【样例解释 #5】\n\nThis sample input satisfies the constraints of Subtasks $3, 4, 5, 6, 7$.\n\n#### 【样例解释 #6】\n\nThis sample input satisfies the constraints of Subtasks $5, 6, 7$.\n\n#### 【数据范围】\n\n对于所有测试数据，满足：\n\n- $2 \\le N \\le 2\\times 10 ^ 5$;\n- $N - 1 \\le M \\le 4\\times 10 ^ 5$;\n- $0 \\le Q \\le 2\\times 10 ^ 5$;\n- $1 \\le S_i \\le 10 ^ 9\\ (1 \\le i \\le N)$;\n- $1 \\le A_j < B_j \\le N\\ (1 \\le j \\le M)$;\n- $(A_x, B_x) \\neq (A_y, B_y)\\ (1 \\le x < y \\le M)$;\n- It is possible to travel from any island to any other island by taking a number of ships;\n- Given values are all integers.\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $12$ | $M = N - 1$，$Q = 0$，$S_i \\le 2\\ (1 \\le i \\le N)$，$A_j = j$，$B_j = j + 1\\ (1 \\le j \\le M)$ |\n| $2$ | $13$ | $M = N - 1$，$Q = 0$，$A_j = j$，$B_j = j + 1\\ (1 \\le j \\le M)$ |\n| $3$ | $12$ | $M = N - 1$，$Q = 0$ |\n| $4$ | $13$ | $Q = 0$ |\n| $5$ | $8$ | $N \\le 16$ |\n| $6$ | $18$ | $N \\le 3 000$ |\n| $7$ | $24$ | 无 |\n\n", "locale": "en"}, "zh-CN": {"title": "[JOIST 2023] 警卫 / Security Guard", "background": "", "description": "在 JOI 王国，有 $N$ 个岛屿，编号从 $1$ 到 $N$。每个岛屿都有一个不安全等级。岛屿 $i\\ (1 \\le i \\le N)$ 的不安全等级是 $S_i$。\n\n在 JOI 王国，岛屿之间的船只是主要的交通方式。有 $M$ 艘船，编号从 $1$ 到 $M$。船 $j\\ (1 \\le j \\le M)$ 连接岛屿 $A_j$ 和岛屿 $B_j$。我们可以在需要时运行船只。可以通过多次乘船从任何岛屿到达其他岛屿。\n\n在 JOI 王国，有计划引入新的船只。我们可以选择任何一对岛屿来连接新引入的船只。\n\n有一天，发生了一起事件。一艘停泊的船遭到了攻击。JOI 王国的总理 K 决定引入新的船只。他还要求 JOI 王国的船只满足以下**安全条件**。\n\n- 当船停泊在岛屿 $i\\ (1 \\le i \\le N)$ 时，船上的保安人数必须大于或等于 $S_i$。\n\n然而，由于雇佣保安很昂贵，我们希望最小化雇佣保安的人数。只要满足“可以通过多次乘船从任何岛屿到达其他岛屿”的条件，就可以废除当前运行的船只。\n\n因此，我们将按如下方式运行船只。这里，$k$ 是新引入的船只数量。\n\n1. 对于每艘新引入的船，我们选择它连接的两个岛屿。\n2. 我们选择若干（大于或等于 $0$）船只，并废除它们。允许废除新引入的船只。\n3. 对于每艘船，我们将其停泊在它连接的两个岛屿之一。我们让若干保安登船。此外，必须满足以下条件。\n\n*条件* 对于每对岛屿 $u, v\\ (1 \\le u \\le N, 1 \\le v \\le N)$，可以通过多次重复以下操作将乘客从岛屿 $u$ 运输到岛屿 $v$。在此过程中，安全条件必须始终得到满足。\n\n- 我们让乘客或保安登上停泊在乘客或保安所在岛屿的船。\n- 我们让乘客或保安在船当前停泊的岛屿下船。\n- 我们将船从当前停泊的岛屿移动到船连接的另一个岛屿。\n\n由于预算有限，我们最多可以引入 $Q$ 艘新船。对于每个 $k\\ (0 \\le k \\le Q)$，总理 K 想知道如果新引入的船只数量为 $k$ 时，雇佣保安的最小可能人数。\n\n编写一个程序，给定岛屿的信息、船只的航线以及我们可以引入的新船数量，计算每个 $k$ 的雇佣保安的最小可能人数。", "inputFormat": "从标准输入读取以下数据。\n\n> $N\\ M\\ Q$\n>\n> $S_1\\ S_2\\ \\cdots\\ S_N$\n>\n> $A_1\\ B_1$\n>\n> $A_2\\ B_2$\n>\n> $\\vdots$\n>\n> $A_M\\ B_M$", "outputFormat": "向标准输出写入 $Q+1$ 行。输出的第 $(k+1)$ 行 $(0 \\le k \\le Q)$ 应包含如果新引入的船只数量为 $k$ 时雇佣保安的最小可能人数。", "hint": "#### 【样例解释 #1】\n\n如果新引入的船只数量为 $0$，我们需要 $7$ 名保安。例如，如果我们按如下方式分配船只和 $7$ 名保安，则条件得到满足。\n\n- 船 $1$ 最初停泊在岛屿 $2$，并有两名保安登上船 $1$。\n- 船 $2$ 最初停泊在岛屿 $2$，并有两名保安登上船 $2$。\n- 船 $3$ 最初停泊在岛屿 $4$，并有三名保安登上船 $3$。\n\n让我们解释如何在以下两种情况下运输乘客。\n\n- 我们将乘客从岛屿 $1$ 运输到岛屿 $4$。\n- 我们将乘客从岛屿 $3$ 运输到岛屿 $2$。\n\n我们可以按如下方式将乘客从岛屿 $1$ 运输到岛屿 $4$。船 $1, 2, 3$ 停泊的岛屿，以及船 $1, 2, 3$ 上的保安人数按此顺序写出。岛屿 $1, 2, 3, 4$ 上的保安人数按此顺序写出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/itac2gkr.png)\n\n我们可以按如下方式将乘客从岛屿 $3$ 运输到岛屿 $2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cooaz7e1.png)\n\n由于如果保安人数小于或等于 $6$，则无法满足条件，因此输出 $7$。\n\n此样例输入满足子任务 $2, 3, 4, 5, 6, 7$ 的约束。\n\n#### 【样例解释 #2】\n\n如果新引入的船只数量为 $0$，与样例输入 $1$ 类似，我们需要 $7$ 名保安。\n\n如果新引入的船只数量为 $1$，我们需要 $5$ 名保安。例如，如果我们按如下方式分配船只和 $5$ 名保安，则条件得到满足。\n\n- 我们引入一艘连接岛屿 $2$ 和岛屿 $4$ 的新船。（在下文中，我们称之为船 $4$。）\n- 我们废除船 $3$。\n- 我们最初将船 $1$ 停泊在岛屿 $2$，并让两名保安登上船 $1$。\n- 我们最初将船 $2$ 停泊在岛屿 $2$，并让一名保安登上船 $2$。\n- 我们最初将船 $4$ 停泊在岛屿 $2$，并让两名保安登上船 $4$。\n\n此样例输入满足子任务 $5, 6, 7$ 的约束。\n\n#### 【样例解释 #3】\n\n如果新引入的船只数量为 $0$，我们需要 $2$ 名保安。例如，如果我们按如下方式分配船只和 $2$ 名保安，则条件得到满足。\n\n- 我们废除船 $3$。\n- 我们最初将船 $1$ 停泊在岛屿 $1$，并让一名保安登上船 $1$。\n- 我们最初将船 $2$ 停泊在岛屿 $1$，并让一名保安登上船 $2$。\n\n此样例输入满足子任务 $4, 5, 6, 7$ 的约束。\n\n#### 【样例解释 #4】\n\n此样例输入满足所有子任务的约束。\n\n#### 【样例解释 #5】\n\n此样例输入满足子任务 $3, 4, 5, 6, 7$ 的约束。\n\n#### 【样例解释 #6】\n\n此样例输入满足子任务 $5, 6, 7$ 的约束。\n\n#### 【数据范围】\n\n对于所有测试数据，满足：\n\n- $2 \\le N \\le 2\\times 10 ^ 5$；\n- $N - 1 \\le M \\le 4\\times 10 ^ 5$；\n- $0 \\le Q \\le 2\\times 10 ^ 5$；\n- $1 \\le S_i \\le 10 ^ 9\\ (1 \\le i \\le N)$；\n- $1 \\le A_j < B_j \\le N\\ (1 \\le j \\le M)$；\n- $(A_x, B_x) \neq (A_y, B_y)\\ (1 \\le x < y \\le M)$；\n- 可以通过多次乘船从任何岛屿到达其他岛屿；\n- 给定值均为整数。\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :----------: | :----------: | :----------: |\n| $1$ | $12$ | $M = N - 1$，$Q = 0$，$S_i \\le 2\\ (1 \\le i \\le N)$，$A_j = j$，$B_j = j + 1\\ (1 \\le j \\le M)$ |\n| $2$ | $13$ | $M = N - 1$，$Q = 0$，$A_j = j$，$B_j = j + 1\\ (1 \\le j \\le M)$ |\n| $3$ | $12$ | $M = N - 1$，$Q = 0$ |\n| $4$ | $13$ | $Q = 0$ |\n| $5$ | $8$ | $N \\le 16$ |\n| $6$ | $18$ | $N \\le 3 000$ |\n| $7$ | $24$ | 无 |\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9342", "type": "P", "difficulty": 5, "samples": [["5\n0 5 6 7 9\n1\n7\n", "15"], ["10\n1 2 3 4 5 6 7 8 9 10\n10\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n", "9\n10\n11\n12\n13\n14\n15\n16\n17\n9\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "JOISC/JOIST（日本）"], "title": "[JOIST 2023] 比太郎之旅 / Bitaro's Travel", "background": "", "description": "在 JOI 市有一条很长的道路，可以看作是实数轴。道路上的一个位置由一个实数坐标表示。在 JOI 市，沿着这条道路有 $N$ 个观光景点，按坐标递增的顺序编号为 $1$ 到 $N$。第 $i$ 个观光景点 $(1 \\le i \\le N)$ 的坐标为 $X_i$。\n\nBitaro 将参观 JOI 市的所有观光景点。由于“贪婪”是他生活的口号，他将重复以下步骤，直到参观完所有的观光景点。\n\n- 设 $x$ 为 Bitaro 当前的坐标。在他尚未参观的观光景点中，选择一个景点 $i$，使得从 Bitaro 当前坐标到该景点的距离 $|x - X_i|$ 最小。然后 Bitaro 移动到景点 $i$ 的位置，并参观它。如果有多个这样的观光景点，他会移动到坐标较小的那个景点。这里，$|t|$ 是 $t$ 的绝对值。\n\n然而，由于多年的经验，Bitaro 知道如果他通过重复上述步骤来移动，总旅行距离可能会比他预期的要长。由于总旅行距离会根据起始坐标的不同而变化，他想知道如果从 $Q$ 个起始坐标候选 $S_1, S_2, \\dots, S_Q$ 中的每一个开始，直到参观完所有观光景点的总旅行距离。\n\n为了帮助 Bitaro，编写一个程序，计算如果他从每个起始坐标候选开始的总旅行距离，给定 JOI 市的信息和起始坐标候选。", "inputFormat": "从标准输入读取以下数据。\n\n> $N$\n> \n> $X_1\\ X_2\\cdots X_N$\n> \n> $Q$\n> \n> $S_1$\n> \n> $S_2$\n> \n> $\\vdots$\n> \n> $S_Q$", "outputFormat": "向标准输出写入 $Q$ 行。输出的第 $j$ 行 $(1 \\le j \\le Q)$ 应包含如果 Bitaro 从坐标 $S_j$ 开始的总旅行距离。", "hint": "**【样例解释 #1】**\n\n如果 Bitaro 从坐标 $7$ 开始，他将按如下方式参观所有观光景点。\n1. 他尚未参观的观光景点有 $1, 2, 3, 4, 5$，从 Bitaro 当前坐标到这些景点的距离分别为 $7, 2, 1, 0, 2$。由于观光景点 $4$ 是离 Bitaro 最近的景点，他停留在坐标 $7$ 并参观观光景点 $4$。\n2. 他尚未参观的观光景点有 $1, 2, 3, 5$，从 Bitaro 当前坐标到这些景点的距离分别为 $7, 2, 1, 2$。由于观光景点 $3$ 是离 Bitaro 最近的景点，他从坐标 $7$ 移动到坐标 $6$ 并参观观光景点 $3$。\n3. 他尚未参观的观光景点有 $1, 2, 5$，从 Bitaro 当前坐标到这些景点的距离分别为 $6, 1, 3$。由于观光景点 $2$ 是离 Bitaro 最近的景点，他从坐标 $6$ 移动到坐标 $5$ 并参观观光景点 $2$。\n4. 他尚未参观的观光景点有 $1, 5$，从 Bitaro 当前坐标到这些景点的距离分别为 $5, 4$。由于观光景点 $5$ 是离 Bitaro 最近的景点，他从坐标 $5$ 移动到坐标 $9$ 并参观观光景点 $5$。\n5. 他尚未参观的观光景点有 $1$。由于观光景点 $1$ 是离 Bitaro 最近的景点，他从坐标 $9$ 移动到坐标 $0$ 并参观观光景点 $1$。\n\n由于 Bitaro 的总旅行距离是 $15$，输出 $15$。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n该样例满足子任务 $3, 4$ 的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\le N, Q \\le 2 \\times 10^5$，$0 \\le X_i \\le 10^9$，$X_i < X_{i+1}$，$0 \\le S_j \\le 10^9$，保证所有输入均为整数。\n\n|子任务编号|分值|限制|\n|:-:|:-:|:-:|\n|$1$|$5$|$Q=1, N \\le 2 \\times 10^3$|\n|$2$|$10$|$Q=1$|\n|$3$|$30$|$X_{i+1} - X_i \\le 100$|\n|$4$|$55$|无|\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN", "translations": {"en": {"title": "[JOIST 2023] Bitaro's Travel", "background": null, "description": "There is a very long road in JOI City, which can be considered as the real number line. A position on the road is represented by a real number coordinate. In JOI City, there are $N$ sightseeing spots along the road, numbered from $1$ to $N$ in ascending order of the coordinates. The coordinate of the $i$-th sightseeing spot $(1\\le i\\le N)$ is $X_i$.\n\nBitaro will visit all the sightseeing spots in JOI City. Since \"greedy\" is the slogan of his life, he will repeat the following procedures until he visits all the sightseeing spots.\n\n- Let $x$ be Bitaro’s current coordinate. Among the sightseeing spots he has not yet visited, take the sightseeing spot $i$ where the distance $|x − X_i|$ from Bitaro's current position takes a minimum value. Then Bitaro moves to the position of the sightseeing spot $i$, and visits it. If there are more than one such sightseeing spots, he moves to the sightseeing spot whose coordinate is smaller than the others. Here, $|t|$ is the absolute value of $t$.\n\nHowever, thanks to long years of experience, Bitaro knows that if he moves by repeating the above procedures, the total traveling distance may be longer than he expected. Since the total traveling distance varies according to the starting coordinate, he wants to know the total traveling distance until he visits all the sightseeing spots if he starts from each of $Q$ candidates of starting coordinates $S_1, S_2,\\dots, S_Q$.\n\nTo help Bitaro, write a program which calculates the total traveling distance if he starts from each of the candidates of starting coordinates, given information of JOI City and candidates of starting coordinates.", "inputFormat": "Read the following data from the standard input.\n\n> $N$\n>\n> $X_1\\ X_2\\cdots X_N$\n>\n> $Q$\n>\n> $S_1$\n>\n> $S_2$\n>\n> $\\vdots$\n>\n> $S_Q$", "outputFormat": "Write $Q$ lines to the standard output. The $j$-th line $(1 \\le j \\le Q)$ of output should contain the total traveling distance if Bitaro starts from the coordinate $S_j$.", "hint": "**【样例解释 #1】**\n\nIf Bitaro starts from the coordinate $7$, he visits all the sightseeing spots as follows.\n1. He has not yet visited the sightseeing spots $1, 2, 3, 4, 5$, and the distances from Bitaro’s current position are $7, 2, 1, 0, 2$, respectively. Since the sightseeing spot $4$ is the nearest sightseeing spot from Bitaro, he stays at the coordinate $7$ and visits the sightseeing spot $4$.\n2. He has not yet visited the sightseeing spots $1, 2, 3, 5$, and the distances from Bitaro’s current position are $7, 2, 1, 2$, respectively. Since the sightseeing spot $3$ is the nearest sightseeing spot from Bitaro, he moves from the coordinate $7$ to the coordinate $6$ and visits the sightseeing spot $3$.\n3. He has not yet visited the sightseeing spots $1, 2, 5$, and the distances from Bitaro’s current position are $6, 1, 3$, respectively. Since the sightseeing spot $2$ is the nearest sightseeing spot from Bitaro, he moves from the coordinate $6$ to the coordinate $5$ and visits the sightseeing spot $2$.\n4. He has not yet visited the sightseeing spots $1, 5$, and the distances from Bitaro’s current position are $5, 4$, respectively. Since the sightseeing spot $5$ is the nearest sightseeing spot from Bitaro, he moves from the coordinate $5$ to the coordinate $9$ and visits the sightseeing spot $5$.\n5. He has not yet visited the sightseeing spot $1$. Since the sightseeing spot $1$ is the nearest sightseeing spot from Bitaro, he moves from the coordinate $9$ to the coordinate $0$ and visits the sightseeing spot $1$.\n\nSince Bitaro’s total traveling distance is $15$, output $15$.\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n该样例满足子任务 $3, 4$ 的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1\\le N,Q\\le2\\times10^5$，$0\\le X_i\\le10^9$，$X_i<X_{i+1}$，$0\\le S_j\\le10^9$，保证所有输入均为整数。\n\n|子任务编号|分值|限制|\n|:-:|:-:|:-:|\n|$1$|$5$|$Q=1,N\\le2\\times10^3$|\n|$2$|$10$|$Q=1$|\n|$3$|$30$|$X_{i+1}-X_i\\le100$|\n|$4$|$55$|无|", "locale": "en"}, "zh-CN": {"title": "[JOIST 2023] 比太郎之旅 / Bitaro's Travel", "background": "", "description": "在 JOI 市有一条很长的道路，可以看作是实数轴。道路上的一个位置由一个实数坐标表示。在 JOI 市，沿着这条道路有 $N$ 个观光景点，按坐标递增的顺序编号为 $1$ 到 $N$。第 $i$ 个观光景点 $(1 \\le i \\le N)$ 的坐标为 $X_i$。\n\nBitaro 将参观 JOI 市的所有观光景点。由于“贪婪”是他生活的口号，他将重复以下步骤，直到参观完所有的观光景点。\n\n- 设 $x$ 为 Bitaro 当前的坐标。在他尚未参观的观光景点中，选择一个景点 $i$，使得从 Bitaro 当前坐标到该景点的距离 $|x - X_i|$ 最小。然后 Bitaro 移动到景点 $i$ 的位置，并参观它。如果有多个这样的观光景点，他会移动到坐标较小的那个景点。这里，$|t|$ 是 $t$ 的绝对值。\n\n然而，由于多年的经验，Bitaro 知道如果他通过重复上述步骤来移动，总旅行距离可能会比他预期的要长。由于总旅行距离会根据起始坐标的不同而变化，他想知道如果从 $Q$ 个起始坐标候选 $S_1, S_2, \\dots, S_Q$ 中的每一个开始，直到参观完所有观光景点的总旅行距离。\n\n为了帮助 Bitaro，编写一个程序，计算如果他从每个起始坐标候选开始的总旅行距离，给定 JOI 市的信息和起始坐标候选。", "inputFormat": "从标准输入读取以下数据。\n\n> $N$\n> \n> $X_1\\ X_2\\cdots X_N$\n> \n> $Q$\n> \n> $S_1$\n> \n> $S_2$\n> \n> $\\vdots$\n> \n> $S_Q$", "outputFormat": "向标准输出写入 $Q$ 行。输出的第 $j$ 行 $(1 \\le j \\le Q)$ 应包含如果 Bitaro 从坐标 $S_j$ 开始的总旅行距离。", "hint": "**【样例解释 #1】**\n\n如果 Bitaro 从坐标 $7$ 开始，他将按如下方式参观所有观光景点。\n1. 他尚未参观的观光景点有 $1, 2, 3, 4, 5$，从 Bitaro 当前坐标到这些景点的距离分别为 $7, 2, 1, 0, 2$。由于观光景点 $4$ 是离 Bitaro 最近的景点，他停留在坐标 $7$ 并参观观光景点 $4$。\n2. 他尚未参观的观光景点有 $1, 2, 3, 5$，从 Bitaro 当前坐标到这些景点的距离分别为 $7, 2, 1, 2$。由于观光景点 $3$ 是离 Bitaro 最近的景点，他从坐标 $7$ 移动到坐标 $6$ 并参观观光景点 $3$。\n3. 他尚未参观的观光景点有 $1, 2, 5$，从 Bitaro 当前坐标到这些景点的距离分别为 $6, 1, 3$。由于观光景点 $2$ 是离 Bitaro 最近的景点，他从坐标 $6$ 移动到坐标 $5$ 并参观观光景点 $2$。\n4. 他尚未参观的观光景点有 $1, 5$，从 Bitaro 当前坐标到这些景点的距离分别为 $5, 4$。由于观光景点 $5$ 是离 Bitaro 最近的景点，他从坐标 $5$ 移动到坐标 $9$ 并参观观光景点 $5$。\n5. 他尚未参观的观光景点有 $1$。由于观光景点 $1$ 是离 Bitaro 最近的景点，他从坐标 $9$ 移动到坐标 $0$ 并参观观光景点 $1$。\n\n由于 Bitaro 的总旅行距离是 $15$，输出 $15$。\n\n该样例满足所有子任务的限制。\n\n**【样例解释 #2】**\n\n该样例满足子任务 $3, 4$ 的限制。\n\n**【数据范围】**\n\n对于所有测试数据，满足 $1 \\le N, Q \\le 2 \\times 10^5$，$0 \\le X_i \\le 10^9$，$X_i < X_{i+1}$，$0 \\le S_j \\le 10^9$，保证所有输入均为整数。\n\n|子任务编号|分值|限制|\n|:-:|:-:|:-:|\n|$1$|$5$|$Q=1, N \\le 2 \\times 10^3$|\n|$2$|$10$|$Q=1$|\n|$3$|$30$|$X_{i+1} - X_i \\le 100$|\n|$4$|$55$|无|\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9343", "type": "P", "difficulty": 2, "samples": [["2\n3 3\n1 1\n1 2\n1 3\n3 2\n1 1\n2 2", "3\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "洛谷原创", "O2优化", "洛谷月赛"], "title": "一曲新词酒一杯", "background": "昨夜勾栏听曲，一壶浊酒，与明月凭栏相望，想起如今的处境，却没有怅然若失，仍然醉心于宴饮涵咏之乐，把酒临风之际，想起一种酒桌上的游戏，便和好友玩起来。", "description": "酒桌上共有 $n$ 杯酒，标号为 $1\\sim n$。桌旁有许多写有“酒”字的红色纸片。\n\n接下来对这 $n$ 杯酒**依次**进行 $m$ 次操作。\n\n操作共分为 $2$ 种：\n\n- `1 x`：给 $x$ 号酒贴上 $1$ 张红纸。\n- `2 x`：给除了 $x$ 号酒的其它 $n-1$ 杯酒分别贴上 $1$ 张红纸。\n\n问在**至少**几次操作后，每杯酒上至少有一张红纸？\n", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行两个整数 $n,m$。\n- 后 $m$ 行每行两个整数 $o_i,x_i$，表示第 $i$ 次操作。", "outputFormat": "对于每组测试数据：\n\n- 若在 $m$ 次操作后至少有一杯酒没有红纸，输出一行 `-1`；\n- 否则输出一行一个整数表示答案。", "hint": "**【样例 1 解释】**\n\n对于第一组数据：\n\n- 第 $1$ 次操作后，$1$ 号酒有 $1$ 张红纸，$2$ 号酒有 $0$ 张红纸，$3$ 号酒有 $0$ 张红纸。\n- 第 $2$ 次操作后，$1$ 号酒有 $1$ 张红纸，$2$ 号酒有 $1$ 张红纸，$3$ 号酒有 $0$ 张红纸。\n- 第 $3$ 次操作后，$1$ 号酒有 $1$ 张红纸，$2$ 号酒有 $1$ 张红纸，$3$ 号酒有 $1$ 张红纸。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（20 points）：$o_i=1$。\n-  Subtask 2（20 points）：$o_i=2$。\n-  Subtask 3（20 points）：所有 $x_i$ 均相等。\n-  Subtask 4（20 points）：$\\sum n,\\sum m\\le 3\\times 10^3$。\n-  Subtask 5（20 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T,n,m,\\sum n,\\sum m\\le 2\\times 10^5$，$o_i\\in \\{1,2\\}$，$1\\le x_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "一曲新词酒一杯", "background": "昨夜勾栏听曲，一壶浊酒，与明月凭栏相望，想起如今的处境，却没有怅然若失，仍然醉心于宴饮涵咏之乐，把酒临风之际，想起一种酒桌上的游戏，便和好友玩起来。", "description": "酒桌上共有 $n$ 杯酒，标号为 $1\\sim n$。桌旁有许多写有“酒”字的红色纸片。\n\n接下来对这 $n$ 杯酒**依次**进行 $m$ 次操作。\n\n操作共分为 $2$ 种：\n\n- `1 x`：给 $x$ 号酒贴上 $1$ 张红纸。\n- `2 x`：给除了 $x$ 号酒的其它 $n-1$ 杯酒分别贴上 $1$ 张红纸。\n\n问在**至少**几次操作后，每杯酒上至少有一张红纸？\n", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行两个整数 $n,m$。\n- 后 $m$ 行每行两个整数 $o_i,x_i$，表示第 $i$ 次操作。", "outputFormat": "对于每组测试数据：\n\n- 若在 $m$ 次操作后至少有一杯酒没有红纸，输出一行 `-1`；\n- 否则输出一行一个整数表示答案。", "hint": "**【样例 1 解释】**\n\n对于第一组数据：\n\n- 第 $1$ 次操作后，$1$ 号酒有 $1$ 张红纸，$2$ 号酒有 $0$ 张红纸，$3$ 号酒有 $0$ 张红纸。\n- 第 $2$ 次操作后，$1$ 号酒有 $1$ 张红纸，$2$ 号酒有 $1$ 张红纸，$3$ 号酒有 $0$ 张红纸。\n- 第 $3$ 次操作后，$1$ 号酒有 $1$ 张红纸，$2$ 号酒有 $1$ 张红纸，$3$ 号酒有 $1$ 张红纸。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（20 points）：$o_i=1$。\n-  Subtask 2（20 points）：$o_i=2$。\n-  Subtask 3（20 points）：所有 $x_i$ 均相等。\n-  Subtask 4（20 points）：$\\sum n,\\sum m\\le 3\\times 10^3$。\n-  Subtask 5（20 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T,n,m,\\sum n,\\sum m\\le 2\\times 10^5$，$o_i\\in \\{1,2\\}$，$1\\le x_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9344", "type": "P", "difficulty": 3, "samples": [["2\n6\n1 1 4 5 1 4\n1 0 0 1 0 1\n8\n3 1 4 1 5 9 2 6\n1 0 1 0 1 0 1 0", "5\n13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "贪心", "2023", "洛谷原创", "O2优化", "洛谷月赛"], "title": "去年天气旧亭台", "background": "依旧是过往的天气，过往的楼台烟雨。时间悄悄流逝着，山河仍在，人却已不是过去的人……", "description": "登上楼台，旧时满面沉灰的地板映入眼帘。\n\n共有 $n$ 块地板，地板分为两类，第 $i$ 块地板的类别用 $c_i$ 表示，积灰程度用 $a_i$ 表示。**注意 $c_i$ 为 $0$ 或 $1$。**\n\n现在要清理这些地板上的灰尘。每次操作中，你可以：\n\n+ 选择两个下标 $i,j$，满足 $1\\leq i\\leq j\\leq n$， $c_i=c_j$，**且第 $i$ 块和第 $j$ 块地板上的灰尘均未被清理过**；\n+ 花费 $a_i+a_j$ 的能量清理**第 $i$ 块到第 $j$ 块所有地板**上的灰尘。\n\n求清理完所有地板上的灰尘至少要多少能量。", "inputFormat": "**本题有多组测试数据**。\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行一个整数 $n$。\n- 第二行 $n$ 个整数 $a_1,a_2,\\dots,a_n$。\n- 第三行 $n$ 个整数 $c_1,c_2,\\dots,c_n$。", "outputFormat": "对于每组测试数据，一行一个整数表示最小能量。", "hint": "**【样例 1 解释】**\n\n- 对于第一组数据，直接花费 $a_1+a_6=5$ 的能量清理所有灰尘。\n- 对于第二组数据，先花费 $a_1+a_1=6$ 的能量清理第一个地板上的灰尘，再花费 $a_2+a_8=7$ 的能量清理剩余灰尘。\n\n**【数据规模与约定】**\n\n对于 $10\\%$ 的数据，保证 $T\\le 10$，$n\\le 10$；\n\n对于 $40\\%$ 的数据，保证 $T\\le 20$，$n\\le 10^3$；\n\n另有 $10\\%$ 的数据，保证 $c_i=1$；\n\n对于 $100\\%$ 的数据，保证 $1 \\le T \\le 10^5$，$1 \\le n,\\sum n\\le 2 \\times 10^6$，$c_i \\in \\{0,1\\}$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "去年天气旧亭台", "background": "依旧是过往的天气，过往的楼台烟雨。时间悄悄流逝着，山河仍在，人却已不是过去的人……", "description": "登上楼台，旧时满面沉灰的地板映入眼帘。\n\n共有 $n$ 块地板，地板分为两类，第 $i$ 块地板的类别用 $c_i$ 表示，积灰程度用 $a_i$ 表示。**注意 $c_i$ 为 $0$ 或 $1$。**\n\n现在要清理这些地板上的灰尘。每次操作中，你可以：\n\n+ 选择两个下标 $i,j$，满足 $1\\leq i\\leq j\\leq n$， $c_i=c_j$，**且第 $i$ 块和第 $j$ 块地板上的灰尘均未被清理过**；\n+ 花费 $a_i+a_j$ 的能量清理**第 $i$ 块到第 $j$ 块所有地板**上的灰尘。\n\n求清理完所有地板上的灰尘至少要多少能量。", "inputFormat": "**本题有多组测试数据**。\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行一个整数 $n$。\n- 第二行 $n$ 个整数 $a_1,a_2,\\dots,a_n$。\n- 第三行 $n$ 个整数 $c_1,c_2,\\dots,c_n$。", "outputFormat": "对于每组测试数据，一行一个整数表示最小能量。", "hint": "**【样例 1 解释】**\n\n- 对于第一组数据，直接花费 $a_1+a_6=5$ 的能量清理所有灰尘。\n- 对于第二组数据，先花费 $a_1+a_1=6$ 的能量清理第一个地板上的灰尘，再花费 $a_2+a_8=7$ 的能量清理剩余灰尘。\n\n**【数据规模与约定】**\n\n对于 $10\\%$ 的数据，保证 $T\\le 10$，$n\\le 10$；\n\n对于 $40\\%$ 的数据，保证 $T\\le 20$，$n\\le 10^3$；\n\n另有 $10\\%$ 的数据，保证 $c_i=1$；\n\n对于 $100\\%$ 的数据，保证 $1 \\le T \\le 10^5$，$1 \\le n,\\sum n\\le 2 \\times 10^6$，$c_i \\in \\{0,1\\}$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9345", "type": "P", "difficulty": 4, "samples": [["3\n7 1\n6 5\n11 4\n", "Yes\n1 2 3 4 5 6 7\nNo\nYes\n1 11 9 3 6 7 8 2 5 10 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "夕阳西下几时回", "background": "随着夕阳从山间落下，最后一丝余晖逐渐暗淡；美丽的晚霞，终究还是化作一片黑夜。在这番景象中，一阵又一阵的乡愁涌上心头；远离家乡的游子，就算不是病死他乡，又何时能回还？", "description": "夕阳可以被视作由 $n$ 种不同颜色组成的一副图，其中第 $i$ 种的颜色为 $a_i$，满足 $a$ 是长度为 $n$ 的排列。\n\n定义一个排列的乡愁度为：\n\n+ 对于所有 $1\\le i\\le n$，记 $b_i=\\gcd(a_i,a_{i+1})$。特别地，我们认为 $a_{n+1}=a_1$。\n+ 排列 $a$ 的乡愁度为序列 $b$ 中**不同**元素的个数。\n\n求是否有一个长度为 $n$，乡愁度为 $k$ 的排列 $p$。若有解，请输出任意一个排列。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，一行两个整数 $n,k$。", "outputFormat": "对于每组测试数据：\n\n- 如果不存在这样的排列，输出一行一个字符串 `No`；\n- 否则，输出一行一个字符串 `Yes`，然后输出一行 $n$ 个正整数 $p_1,p_2,\\dots,p_n$，表示你找到的排列。\n\n校验器忽略字符串大小写，例如，`YES`，`yEs`，`yes` 都会被视作答案存在。", "hint": "**【提示】**\n\n一个长度为 $n$ 的排列是一个满足 $1$ 到 $n$ 中的所有正整数恰好出现 $1$ 次的数组。例如，$[3,1,2]$ 是一个长度为 $3$ 的排列，而 $[5,5,1,2,3]$ 不是一个排列。\n\n**【样例 1 解释】**\n\n- 对于第一组数据，$b=[1,1,1,1,1,1,1]$，故 $p$ 的乡愁度为 $1$。\n- 对于第二组数据，可以证明不存在这样的序列。\n- 对于第三组数据，$b=[1,1,3,3,1,1,2,1,5,2,1]$，包含 $4$ 个不同的元素 — $1,2,3$ 和 $5$，故 $p$ 的乡愁度为 $4$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（4 points）：$n\\le 9$，$\\sum n\\le 100$。\n-  Subtask 2（5 points）：$k=1$。\n-  Subtask 3（13 points）：$\\sum n\\le 200$。\n-  Subtask 4（30 points）：对于所有测试数据，保证有解。\n-  Subtask 5（48 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$3\\le n\\le 3\\times 10^5$，$1\\le k\\le n$，$\\sum n \\le 6\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "夕阳西下几时回", "background": "随着夕阳从山间落下，最后一丝余晖逐渐暗淡；美丽的晚霞，终究还是化作一片黑夜。在这番景象中，一阵又一阵的乡愁涌上心头；远离家乡的游子，就算不是病死他乡，又何时能回还？", "description": "夕阳可以被视作由 $n$ 种不同颜色组成的一副图，其中第 $i$ 种的颜色为 $a_i$，满足 $a$ 是长度为 $n$ 的排列。\n\n定义一个排列的乡愁度为：\n\n+ 对于所有 $1\\le i\\le n$，记 $b_i=\\gcd(a_i,a_{i+1})$。特别地，我们认为 $a_{n+1}=a_1$。\n+ 排列 $a$ 的乡愁度为序列 $b$ 中**不同**元素的个数。\n\n求是否有一个长度为 $n$，乡愁度为 $k$ 的排列 $p$。若有解，请输出任意一个排列。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，一行两个整数 $n,k$。", "outputFormat": "对于每组测试数据：\n\n- 如果不存在这样的排列，输出一行一个字符串 `No`；\n- 否则，输出一行一个字符串 `Yes`，然后输出一行 $n$ 个正整数 $p_1,p_2,\\dots,p_n$，表示你找到的排列。\n\n校验器忽略字符串大小写，例如，`YES`，`yEs`，`yes` 都会被视作答案存在。", "hint": "**【提示】**\n\n一个长度为 $n$ 的排列是一个满足 $1$ 到 $n$ 中的所有正整数恰好出现 $1$ 次的数组。例如，$[3,1,2]$ 是一个长度为 $3$ 的排列，而 $[5,5,1,2,3]$ 不是一个排列。\n\n**【样例 1 解释】**\n\n- 对于第一组数据，$b=[1,1,1,1,1,1,1]$，故 $p$ 的乡愁度为 $1$。\n- 对于第二组数据，可以证明不存在这样的序列。\n- 对于第三组数据，$b=[1,1,3,3,1,1,2,1,5,2,1]$，包含 $4$ 个不同的元素 — $1,2,3$ 和 $5$，故 $p$ 的乡愁度为 $4$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（4 points）：$n\\le 9$，$\\sum n\\le 100$。\n-  Subtask 2（5 points）：$k=1$。\n-  Subtask 3（13 points）：$\\sum n\\le 200$。\n-  Subtask 4（30 points）：对于所有测试数据，保证有解。\n-  Subtask 5（48 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$3\\le n\\le 3\\times 10^5$，$1\\le k\\le n$，$\\sum n \\le 6\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9346", "type": "P", "difficulty": 5, "samples": [["4\n1 2 2", "1"], ["5\n1 1 2 2", "739246082"], ["19\n1 2 3 4 5 6 1 8 9 10 11 12 1 14 15 16 17 18", "246415365"], ["49\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 3 11 13 13 15 1 21 7 20 16 4 3 11 11 24 24 31 33 29 24 21 22 12 27 18 37 25 28 26 22 36 38 29", "587033383"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "背包 DP", "树形 DP", "组合数学", "洛谷月赛"], "title": "无可奈何花落去", "background": "天上下起了蒙蒙小雨，回家已是傍晚，推开院门，一地花瓣映入眼帘，随着最近几天花瓣的凋落，树上的花瓣已所剩无几。从地上捡起一片花瓣，干涩的双眼立刻充满了泪水，它顺着脸颊滑下。落到花上的，不知是雨还是泪......", "description": "望向树上的花朵：一朵花有 $n$ 瓣花瓣，花瓣之间有 $n-1$ 条边连接，所有的花瓣都是连通的。\n\n树上的花瓣随着春天的离开而凋落。具体地，每一天，都会在未断开的边中均匀随机地选择一条边断开。\n\n当每个花瓣的度数均不超过 $2$ 时，我们称这朵花凋零了。\n\n一朵花期望会在几天后凋零呢？", "inputFormat": "第一行一个正整数 $n$，表示花瓣的数量。\n\n第二行 $n-1$ 个正整数 $f_2,\\dots,f_n$，表示花瓣 $f_i$ 与花瓣 $i$ 之间有一条边。", "outputFormat": "一行，一个正整数，表示一朵花的期望凋零时间，对 $985661441$（是个质数捏）取模。\n\n如果你不会分数取模，请参考[此题](https://www.luogu.com.cn/problem/P2613)。", "hint": "**【样例 1 解释】**\n\n可以发现第一次不管断开哪条边，均会使这朵花凋零，故期望凋零时间为 $1$。\n\n**【样例 2 解释】**\n\n第一次断开 $(1,2)$ 或 $(2,4)$ 或 $(2,5)$，凋零时间为 $1$；第一次断开 $(1,3)$，凋零时间为 $2$。故期望凋零时间为 $\\frac{3}{4}\\times 1+\\frac{1}{4}\\times 2=\\frac{5}{4}$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（1 point）：$f_i=i-1$。\n-  Subtask 2（12 points）：$n\\leq 8$。\n-  Subtask 3（12 points）：$n\\leq 18$。\n-  Subtask 4（8 points）：$f_i=1$。\n-  Subtask 5（16 points）：有且仅有 $1$ 号点度数大于 $2$。\n-  Subtask 6（13 points）：$n\\leq 50$。\n-  Subtask 7（13 points）：$n\\leq 100$。\n-  Subtask 8（13 points）：$n\\leq 500$。\n-  Subtask 9（12 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\leq 5\\times 10^3$，$f_i<i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "无可奈何花落去", "background": "天上下起了蒙蒙小雨，回家已是傍晚，推开院门，一地花瓣映入眼帘，随着最近几天花瓣的凋落，树上的花瓣已所剩无几。从地上捡起一片花瓣，干涩的双眼立刻充满了泪水，它顺着脸颊滑下。落到花上的，不知是雨还是泪......", "description": "望向树上的花朵：一朵花有 $n$ 瓣花瓣，花瓣之间有 $n-1$ 条边连接，所有的花瓣都是连通的。\n\n树上的花瓣随着春天的离开而凋落。具体地，每一天，都会在未断开的边中均匀随机地选择一条边断开。\n\n当每个花瓣的度数均不超过 $2$ 时，我们称这朵花凋零了。\n\n一朵花期望会在几天后凋零呢？", "inputFormat": "第一行一个正整数 $n$，表示花瓣的数量。\n\n第二行 $n-1$ 个正整数 $f_2,\\dots,f_n$，表示花瓣 $f_i$ 与花瓣 $i$ 之间有一条边。", "outputFormat": "一行，一个正整数，表示一朵花的期望凋零时间，对 $985661441$（是个质数捏）取模。\n\n如果你不会分数取模，请参考[此题](https://www.luogu.com.cn/problem/P2613)。", "hint": "**【样例 1 解释】**\n\n可以发现第一次不管断开哪条边，均会使这朵花凋零，故期望凋零时间为 $1$。\n\n**【样例 2 解释】**\n\n第一次断开 $(1,2)$ 或 $(2,4)$ 或 $(2,5)$，凋零时间为 $1$；第一次断开 $(1,3)$，凋零时间为 $2$。故期望凋零时间为 $\\frac{3}{4}\\times 1+\\frac{1}{4}\\times 2=\\frac{5}{4}$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（1 point）：$f_i=i-1$。\n-  Subtask 2（12 points）：$n\\leq 8$。\n-  Subtask 3（12 points）：$n\\leq 18$。\n-  Subtask 4（8 points）：$f_i=1$。\n-  Subtask 5（16 points）：有且仅有 $1$ 号点度数大于 $2$。\n-  Subtask 6（13 points）：$n\\leq 50$。\n-  Subtask 7（13 points）：$n\\leq 100$。\n-  Subtask 8（13 points）：$n\\leq 500$。\n-  Subtask 9（12 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\leq 5\\times 10^3$，$f_i<i$。", "locale": "zh-CN"}}}
{"pid": "P9347", "type": "P", "difficulty": 6, "samples": [["1\n4 4\n4 2 1 3", "2\n1 3 4\n2 3 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "排序", "构造", "洛谷月赛", "分类讨论"], "title": "似曾相识燕归来", "background": "春雨将过，忽而燕鸣轻唤，唤起春波荡漾。春波荡漾，漾起去年的回忆。回忆生香，香满檐下。檐下燕巢残旧，不禁落泪，抬头望归来之燕，心中一动，却是旧时相识……", "description": "$n$ 只燕在夕阳中飞过。按从前到后的顺序，第 $i$ 只燕的大小为 $p_i$，且 $p$ 是一个长度为 $n$ 的排列。\n\n现在可以进行**至多 $L$ 次**如下操作：\n\n- 选定三个整数 $i,j,k$ 满足 $1\\le i<j<k\\le n$，如果 $p_i>p_k$，交换第 $i,j$ 只燕；否则交换第 $j,k$ 只燕。\n\n为了使队形整齐，我们希望燕是从前到后升序排列的，即 $\\forall 1\\le i\\le n$ 都有 $p_i=i$。\n\n问是否可以达成目标。若可以，请构造一组符合要求的操作。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行两个整数 $n,L$。\n- 第二行 $n$ 个整数 $p_1,p_2,\\ldots,p_n$。", "outputFormat": "对于每组测试数据：\n\n- 若无法用至多 $L$ 次操作使得 $p$ 升序排列，仅输出一行 `-1`；\n- 否则第一行输出一个整数表示操作次数 $x$，后 $x$ 行每行输出三个整数 $i,j,k$ 表示进行的操作。你需要保证 $0\\le x\\le L$，$1\\le i<j<k\\le n$。", "hint": "**【提示】**\n\n一个长度为 $n$ 的排列是一个满足 $1$ 到 $n$ 中的所有正整数恰好出现 $1$ 次的数组。例如，$[3,1,2]$ 是一个长度为 $3$ 的排列，而 $[5,5,1,2,3]$ 不是一个排列。\n\n**【样例 1 解释】**\n\n- 第一次操作中，$i=1,j=3,k=4$，由于 $p_1>p_4$，我们交换 $p_1,p_3$，此时 $p=[1,2,4,3]$；\n- 第二次操作中，$i=2,j=3,k=4$，由于 $p_2<p_4$，我们交换 $p_3,p_4$，此时 $p=[1,2,3,4]$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$n\\le 3$。\n-  Subtask 2（5 points）：$n\\le 4$。\n-  Subtask 3（5 points）：$T\\le 50$，$n\\le 8$。\n-  Subtask 4（10 points）：$n\\le 8$。\n-  Subtask 5（25 points）：$L=n+2$。\n-  Subtask 6（25 points）：$L=n+1$。\n-  Subtask 7（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le n,\\sum n\\le 2\\times 10^6$，$n\\le L\\le n+2$，$p$ 为一个 $1\\sim n$ 的排列。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "似曾相识燕归来", "background": "春雨将过，忽而燕鸣轻唤，唤起春波荡漾。春波荡漾，漾起去年的回忆。回忆生香，香满檐下。檐下燕巢残旧，不禁落泪，抬头望归来之燕，心中一动，却是旧时相识……", "description": "$n$ 只燕在夕阳中飞过。按从前到后的顺序，第 $i$ 只燕的大小为 $p_i$，且 $p$ 是一个长度为 $n$ 的排列。\n\n现在可以进行**至多 $L$ 次**如下操作：\n\n- 选定三个整数 $i,j,k$ 满足 $1\\le i<j<k\\le n$，如果 $p_i>p_k$，交换第 $i,j$ 只燕；否则交换第 $j,k$ 只燕。\n\n为了使队形整齐，我们希望燕是从前到后升序排列的，即 $\\forall 1\\le i\\le n$ 都有 $p_i=i$。\n\n问是否可以达成目标。若可以，请构造一组符合要求的操作。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行两个整数 $n,L$。\n- 第二行 $n$ 个整数 $p_1,p_2,\\ldots,p_n$。", "outputFormat": "对于每组测试数据：\n\n- 若无法用至多 $L$ 次操作使得 $p$ 升序排列，仅输出一行 `-1`；\n- 否则第一行输出一个整数表示操作次数 $x$，后 $x$ 行每行输出三个整数 $i,j,k$ 表示进行的操作。你需要保证 $0\\le x\\le L$，$1\\le i<j<k\\le n$。", "hint": "**【提示】**\n\n一个长度为 $n$ 的排列是一个满足 $1$ 到 $n$ 中的所有正整数恰好出现 $1$ 次的数组。例如，$[3,1,2]$ 是一个长度为 $3$ 的排列，而 $[5,5,1,2,3]$ 不是一个排列。\n\n**【样例 1 解释】**\n\n- 第一次操作中，$i=1,j=3,k=4$，由于 $p_1>p_4$，我们交换 $p_1,p_3$，此时 $p=[1,2,4,3]$；\n- 第二次操作中，$i=2,j=3,k=4$，由于 $p_2<p_4$，我们交换 $p_3,p_4$，此时 $p=[1,2,3,4]$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$n\\le 3$。\n-  Subtask 2（5 points）：$n\\le 4$。\n-  Subtask 3（5 points）：$T\\le 50$，$n\\le 8$。\n-  Subtask 4（10 points）：$n\\le 8$。\n-  Subtask 5（25 points）：$L=n+2$。\n-  Subtask 6（25 points）：$L=n+1$。\n-  Subtask 7（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le n,\\sum n\\le 2\\times 10^6$，$n\\le L\\le n+2$，$p$ 为一个 $1\\sim n$ 的排列。", "locale": "zh-CN"}}}
{"pid": "P9348", "type": "P", "difficulty": 7, "samples": [["2\nababdca\ndcbcadb", "aaabbdc\nabbcdcd"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "贪心", "洛谷原创", "后缀自动机 SAM", "O2优化", "后缀数组 SA", "洛谷月赛"], "title": "小园香径独徘徊", "background": "徘徊在一条幽深的小径上，拾起记忆的碎片，将它们放入两个长长的口袋中。\n\n将它们收集完倒出来后，会拼成什么样的故事呢？", "description": "有两个字符串 $S,T$，一开始给定 $S$，$T$ 为空串。每次你可以执行以下三种操作，直到 $S$ 变为空串：\n\n1. 删去 $S$ 的第一个字符，并将这个字符插入 $T$ 的开头；\n1. 删去 $S$ 的第一个字符，并将这个字符插入 $T$ 的末尾；\n1. 删去 $S$ 的最后一个字符，并将这个字符插入 $T$ 的开头。\n\na3 想知道，$S$ 变为空串后，可以构成的字典序最小的 $T$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $Q$，表示测试数据组数。\n\n对于每组测试数据，一行一个字符串 $S$。", "outputFormat": "对于每组测试数据，一行一个字符串，表示可以构成的字典序最小的 $T$。", "hint": "**【样例 1 解释】**\n\n- 对于 $\\texttt{ababdca}$，依次进行第 $1,2,1,2,2,2,1$ 种操作，即可得到 $\\texttt{aaabbdc}$。\n- 对于 $\\texttt{dcbcadb}$，依次进行第 $1,1,1,2,3,1,2$ 种操作，即可得到 $\\texttt{abbcdcd}$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$S$ 由至多两种字符构成。\n-  Subtask 2（10 points）：$\\sum |S|\\le 12$。\n-  Subtask 3（15 points）：$\\sum |S|\\le 100$。\n-  Subtask 4（25 points）：$\\sum |S|\\le 3\\times 10^3$。\n-  Subtask 5（20 points）：$\\sum |S|\\le 2\\times 10^5$。\n-  Subtask 6（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le Q\\le 3\\times 10^5$，$1\\le |S|\\le 10^6$，$1\\le \\sum |S|\\le 2\\times 10^6$，$S$ 仅由小写字母构成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小园香径独徘徊", "background": "徘徊在一条幽深的小径上，拾起记忆的碎片，将它们放入两个长长的口袋中。\n\n将它们收集完倒出来后，会拼成什么样的故事呢？", "description": "有两个字符串 $S,T$，一开始给定 $S$，$T$ 为空串。每次你可以执行以下三种操作，直到 $S$ 变为空串：\n\n1. 删去 $S$ 的第一个字符，并将这个字符插入 $T$ 的开头；\n1. 删去 $S$ 的第一个字符，并将这个字符插入 $T$ 的末尾；\n1. 删去 $S$ 的最后一个字符，并将这个字符插入 $T$ 的开头。\n\na3 想知道，$S$ 变为空串后，可以构成的字典序最小的 $T$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $Q$，表示测试数据组数。\n\n对于每组测试数据，一行一个字符串 $S$。", "outputFormat": "对于每组测试数据，一行一个字符串，表示可以构成的字典序最小的 $T$。", "hint": "**【样例 1 解释】**\n\n- 对于 $\\texttt{ababdca}$，依次进行第 $1,2,1,2,2,2,1$ 种操作，即可得到 $\\texttt{aaabbdc}$。\n- 对于 $\\texttt{dcbcadb}$，依次进行第 $1,1,1,2,3,1,2$ 种操作，即可得到 $\\texttt{abbcdcd}$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n-  Subtask 1（5 points）：$S$ 由至多两种字符构成。\n-  Subtask 2（10 points）：$\\sum |S|\\le 12$。\n-  Subtask 3（15 points）：$\\sum |S|\\le 100$。\n-  Subtask 4（25 points）：$\\sum |S|\\le 3\\times 10^3$。\n-  Subtask 5（20 points）：$\\sum |S|\\le 2\\times 10^5$。\n-  Subtask 6（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le Q\\le 3\\times 10^5$，$1\\le |S|\\le 10^6$，$1\\le \\sum |S|\\le 2\\times 10^6$，$S$ 仅由小写字母构成。", "locale": "zh-CN"}}}
{"pid": "P9349", "type": "P", "difficulty": 4, "samples": [["6\n1\n2\n1\n2\n3\n2\n", "1\n1\n1\n2\n2\n2\n"], ["10\n1\n1\n2\n2\n1\n2\n2\n1\n1\n2\n", "1\n1\n1\n1\n1\n1\n1\n1\n1\n2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["模拟", "线段树", "2023", "JOI（日本）"], "title": "[JOI 2023 Final] 石子排列 2 / Stone Arranging 2", "background": "", "description": "JOI-kun has $N$ go stones. The stones are numbered from $1$ to $N$. The color of each stone is an integer between $1$ and $10^9$, inclusive. In the beginning, the color of Stone $i$ ($1 \\le i \\le N$) is $A_i$.\n\nFrom now, JOI-kun will perform $N$ operations. He will put the stones on the table in a line. The operation $i$ ($1 \\le i \\le N$) will be performed as follows:\n\n1. JOI-kun will put Stone $i$ on the immediate right of Stone $i - 1$. However, when $i = 1$, JOI-kun will put Stone 1 on the table.\n2. If there is a stone among Stones $1,2,\\cdots,i-1$ whose current color is the same as Stone $i$, let $j$ be the maximum index of such stones, and JOI-kun will paint all of Stones $j+1,j+2,\\cdots,i-1$ with the color $A_i$.\n\nIn order to confirm whether the operations are correctly performed, JOI-kun wants to know in advance the colors of the stones after all the operations are performed.\n\nGiven information of the go stones, write a program which determines the colors of the stones after the $N$ operations are performed.", "inputFormat": "Read the following data from the standard input.\n\n> $N$  \n> $A_1$  \n> $A_2$  \n> $\\vdots$  \n> $A_N$", "outputFormat": "Write $N$ lines to the standard output. The $i$-th line ($1 \\le i \\le N$) should contain the color of Stone $i$ after the $N$ operations are performed.", "hint": "## Samples\n\n### Sample 1\n\nThe operations are performed as in the following table.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0newqhzt.png)\n\nFinally, the colors of Stones 1, 2, 3, 4, 5, 6 will be 1, 1, 1, 2, 2, 2, respectively.\n\nThis sample input satisfies the constraints of Subtasks 1, 3.\n\n### Sample 2\n\nThis sample input satisfies the constraints of all the subtasks.\n\n## Constraints\n\n- $1 \\le N \\le 2\\times 10^5$.\n- $1 \\le A_i \\le 10^9$ ($1 \\le i \\le N$).\n- Given values are all integers.\n\n## Subtasks\n\n1. (25 points) $N \\le 2 000$.\n2. (35 points) $A_i \\le 2$ ($1 \\le i \\le N$).\n3. (40 points) No additional constraints.", "locale": "en", "translations": {"en": {"title": "[JOI 2023 Final] 石子排列 2 / Stone Arranging 2", "background": "", "description": "JOI-kun has $N$ go stones. The stones are numbered from $1$ to $N$. The color of each stone is an integer between $1$ and $10^9$, inclusive. In the beginning, the color of Stone $i$ ($1 \\le i \\le N$) is $A_i$.\n\nFrom now, JOI-kun will perform $N$ operations. He will put the stones on the table in a line. The operation $i$ ($1 \\le i \\le N$) will be performed as follows:\n\n1. JOI-kun will put Stone $i$ on the immediate right of Stone $i - 1$. However, when $i = 1$, JOI-kun will put Stone 1 on the table.\n2. If there is a stone among Stones $1,2,\\cdots,i-1$ whose current color is the same as Stone $i$, let $j$ be the maximum index of such stones, and JOI-kun will paint all of Stones $j+1,j+2,\\cdots,i-1$ with the color $A_i$.\n\nIn order to confirm whether the operations are correctly performed, JOI-kun wants to know in advance the colors of the stones after all the operations are performed.\n\nGiven information of the go stones, write a program which determines the colors of the stones after the $N$ operations are performed.", "inputFormat": "Read the following data from the standard input.\n\n> $N$  \n> $A_1$  \n> $A_2$  \n> $\\vdots$  \n> $A_N$", "outputFormat": "Write $N$ lines to the standard output. The $i$-th line ($1 \\le i \\le N$) should contain the color of Stone $i$ after the $N$ operations are performed.", "hint": "## Samples\n\n### Sample 1\n\nThe operations are performed as in the following table.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0newqhzt.png)\n\nFinally, the colors of Stones 1, 2, 3, 4, 5, 6 will be 1, 1, 1, 2, 2, 2, respectively.\n\nThis sample input satisfies the constraints of Subtasks 1, 3.\n\n### Sample 2\n\nThis sample input satisfies the constraints of all the subtasks.\n\n## Constraints\n\n- $1 \\le N \\le 2\\times 10^5$.\n- $1 \\le A_i \\le 10^9$ ($1 \\le i \\le N$).\n- Given values are all integers.\n\n## Subtasks\n\n1. (25 points) $N \\le 2 000$.\n2. (35 points) $A_i \\le 2$ ($1 \\le i \\le N$).\n3. (40 points) No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[JOI 2023 Final] 石子排列 2 / Stone Arranging 2", "background": "", "description": "JOI 君有 $N$ 颗围棋子。这些棋子从 $1$ 到 $N$ 编号。每颗棋子的颜色是一个介于 $1$ 和 $10^9$ 之间的整数（包含 $1$ 和 $10^9$）。一开始，第 $i$ 颗棋子（$1 \\le i \\le N$）的颜色是 $A_i$。\n\n接下来，JOI 君将进行 $N$ 次操作。他会将棋子排成一行放在桌子上。第 $i$ 次操作（$1 \\le i \\le N$）将按如下方式进行：\n\n1. JOI 君将第 $i$ 颗棋子放在第 $i-1$ 颗棋子的右边。但是，当 $i = 1$ 时，JOI 君会将第 1 颗棋子放在桌子上。\n2. 如果在第 $1, 2, \\cdots, i-1$ 颗棋子中有一颗棋子的当前颜色与第 $i$ 颗棋子的颜色相同，设 $j$ 为此类棋子的最大索引，JOI 君将用颜色 $A_i$ 涂色第 $j+1, j+2, \\cdots, i-1$ 颗棋子。\n\n为了确认操作是否正确执行，JOI 君想提前知道所有操作执行后棋子的颜色。\n\n给定围棋子的相关信息，编写一个程序来确定 $N$ 次操作后棋子的颜色。", "inputFormat": "从标准输入读取以下数据。\n\n> $N$  \n> $A_1$  \n> $A_2$  \n> $\\vdots$  \n> $A_N$", "outputFormat": "向标准输出写入 $N$ 行。第 $i$ 行（$1 \\le i \\le N$）应包含第 $i$ 颗棋子在 $N$ 次操作后颜色。", "hint": "## 样例\n\n### 样例 1\n\n操作按下表执行。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0newqhzt.png)\n\n最终，第 1, 2, 3, 4, 5, 6 颗棋子的颜色分别为 1, 1, 1, 2, 2, 2。\n\n此样例输入满足子任务 1, 3 的约束。\n\n### 样例 2\n\n此样例输入满足所有子任务的约束。\n\n## 约束\n\n- $1 \\le N \\le 2 \\times 10^5$。\n- $1 \\le A_i \\le 10^9$ ($1 \\le i \\le N$)。\n- 给定的值都是整数。\n\n## 子任务\n\n1. (25 分) $N \\le 2 000$。\n2. (35 分) $A_i \\le 2$ ($1 \\le i \\le N$)。\n3. (40 分) 无额外约束。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9350", "type": "P", "difficulty": 4, "samples": [["4\n4 2\n2 3\n3 4\n6 5\n", "2\n"], ["3\n7 10\n10 10\n7 10\n", "2\n"], ["10\n31447678 204745778\n430226982 292647686\n327782937 367372305\n843320852 822224390\n687565054 738216211\n970840050 766211141\n563662348 742939240\n103739645 854320982\n294864525 601612333\n375952316 469655019\n", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2023", "离散化", "扫描线", "JOI（日本）"], "title": "[JOI 2023 Final] 宣传 2 / Advertisement 2", "background": "", "description": "There are $N$ residents in JOI Kingdom, numbered from $1$ to $N$. Resident $i$ ($1\\le i\\le N$) lives at the coordinate $X_i$ on the real line, and its **power of influence** is $E_i$. It may be the case that more than one residents live at the same coordinate. A resident with a large power of influence has a high advertising potential. But such a resident is careful in buying books.\n\nRie published a book on informatics. In order to encourage many people to buy copies of the book, she can donate copies of the book to some residents. If she donates a copy of the book to Resident $i$ ($1\\le i\\le N$), Resident $i$ will get a copy of Rie’s book. Moreover, among the residents who did not yet get copies of the book, every resident $j$ ($1\\le j\\le N$) satisfying the following condition will buy a copy of the book and get it.\n\n-  The distance between Resident $i$ and Resident $j$ on the real line is less than or equal to $E_i - E_j$. In other words, $|X_i − X_j| \\le E_i − E_j$ is satisfied.\n\nIf all the residents read Rie’s book, the Olympiads in Informatics will be greatly recognized. Write a program which calculates the minimum number of residents who will be donated copies of Rie’s book so that all the residents in JOI Kingdom will get copies of Rie’s book.", "inputFormat": "Read the following data from the standard input.\n\n> $N$  \n> $X_1$ $E_1$  \n> $X_2$ $E_2$  \n> $\\vdots$  \n> $X_N$ $E_N$", "outputFormat": "Write one line to the standard output. The output should contain the minimum number of residents who will be donated copies of Rie’s book.", "hint": "## Samples\n\n### Sample 1\n\nFor example, if Rie donates copies of the book in the following way, all the residents in JOI Kingdom will get copies of Rie’s book.\n\n- Rie donates a copy of the book to Resident 3.\n  - Since $|X_3 - X_1| = 1$ and $E_3 - E_1 = 2$, Resident 1 will buy a copy of Rie’s book and get it.\n  - Since $|X_3 - X_2| = 1$ and $E_3 - E_2 = 1$, Resident 2 will buy a copy of Rie’s book and get it.\n  - Since $|X_3 - X_4| = 3$ and $E_3 - E_4 = -1$, Resident 4 will not buy a copy of Rie’s book.\n  Therefore, Residents 1, 2, 3 will get copies of Rie’s book.\n- Rie donates a copy of the book to Resident 4. Since all the residents except Resident 4 already got copies of Rie’s book, all the residents in JOI Kingdom finally get copies of Rie’s book.\n\nSince it is impossible to donate copies of the book to less than two residents so that all the residents in JOI Kingdom will get copies of Rie’s book, output 2.\n\nThis sample input satisfies the constraints of Subtasks 2, 3, 4.\n\n### Sample 2\n\nThis sample input satisfies the constraints of all the subtasks.\n\n### Sample 3\n\nThis sample input satisfies the constraints of Subtasks 2, 3, 4.\n\n## Constraints\n\n- $1\\le N\\le 5\\times 10^5$.\n- $1\\le X_i\\le 10^9$ ($1\\le i\\le N$).\n- $1\\le E_i\\le 10^9$ ($1\\le i\\le N$).\n- Given values are all integers.\n\n## Subtasks\n\n1. (10 points) $E_1=E_2=\\cdots=E_N$.\n2. (23 points) $N\\le 16$.\n3. (36 points) $N\\le 10^3$.\n4. (31 points) No additional constraints.\n", "locale": "en", "translations": {"en": {"title": "[JOI 2023 Final] 宣传 2 / Advertisement 2", "background": "", "description": "There are $N$ residents in JOI Kingdom, numbered from $1$ to $N$. Resident $i$ ($1\\le i\\le N$) lives at the coordinate $X_i$ on the real line, and its **power of influence** is $E_i$. It may be the case that more than one residents live at the same coordinate. A resident with a large power of influence has a high advertising potential. But such a resident is careful in buying books.\n\nRie published a book on informatics. In order to encourage many people to buy copies of the book, she can donate copies of the book to some residents. If she donates a copy of the book to Resident $i$ ($1\\le i\\le N$), Resident $i$ will get a copy of Rie’s book. Moreover, among the residents who did not yet get copies of the book, every resident $j$ ($1\\le j\\le N$) satisfying the following condition will buy a copy of the book and get it.\n\n-  The distance between Resident $i$ and Resident $j$ on the real line is less than or equal to $E_i - E_j$. In other words, $|X_i − X_j| \\le E_i − E_j$ is satisfied.\n\nIf all the residents read Rie’s book, the Olympiads in Informatics will be greatly recognized. Write a program which calculates the minimum number of residents who will be donated copies of Rie’s book so that all the residents in JOI Kingdom will get copies of Rie’s book.", "inputFormat": "Read the following data from the standard input.\n\n> $N$  \n> $X_1$ $E_1$  \n> $X_2$ $E_2$  \n> $\\vdots$  \n> $X_N$ $E_N$", "outputFormat": "Write one line to the standard output. The output should contain the minimum number of residents who will be donated copies of Rie’s book.", "hint": "## Samples\n\n### Sample 1\n\nFor example, if Rie donates copies of the book in the following way, all the residents in JOI Kingdom will get copies of Rie’s book.\n\n- Rie donates a copy of the book to Resident 3.\n  - Since $|X_3 - X_1| = 1$ and $E_3 - E_1 = 2$, Resident 1 will buy a copy of Rie’s book and get it.\n  - Since $|X_3 - X_2| = 1$ and $E_3 - E_2 = 1$, Resident 2 will buy a copy of Rie’s book and get it.\n  - Since $|X_3 - X_4| = 3$ and $E_3 - E_4 = -1$, Resident 4 will not buy a copy of Rie’s book.\n  Therefore, Residents 1, 2, 3 will get copies of Rie’s book.\n- Rie donates a copy of the book to Resident 4. Since all the residents except Resident 4 already got copies of Rie’s book, all the residents in JOI Kingdom finally get copies of Rie’s book.\n\nSince it is impossible to donate copies of the book to less than two residents so that all the residents in JOI Kingdom will get copies of Rie’s book, output 2.\n\nThis sample input satisfies the constraints of Subtasks 2, 3, 4.\n\n### Sample 2\n\nThis sample input satisfies the constraints of all the subtasks.\n\n### Sample 3\n\nThis sample input satisfies the constraints of Subtasks 2, 3, 4.\n\n## Constraints\n\n- $1\\le N\\le 5\\times 10^5$.\n- $1\\le X_i\\le 10^9$ ($1\\le i\\le N$).\n- $1\\le E_i\\le 10^9$ ($1\\le i\\le N$).\n- Given values are all integers.\n\n## Subtasks\n\n1. (10 points) $E_1=E_2=\\cdots=E_N$.\n2. (23 points) $N\\le 16$.\n3. (36 points) $N\\le 10^3$.\n4. (31 points) No additional constraints.\n", "locale": "en"}, "zh-CN": {"title": "[JOI 2023 Final] 宣传 2 / Advertisement 2", "background": "", "description": "JOI 王国有 $N$ 位居民，编号从 $1$ 到 $N$。居民 $i$ ($1 \\le i \\le N$) 住在实数轴上的坐标 $X_i$ 处，其**影响力**为 $E_i$。可能有多个居民住在同一坐标处。拥有较大影响力的居民具有较高的广告潜力，但这样的居民在购买书籍时很谨慎。\n\nRie 出版了一本信息学的书。为了鼓励更多人购买这本书，她可以向一些居民赠送这本书的副本。如果她向居民 $i$ ($1 \\le i \\le N$) 赠送了一本书，居民 $i$ 将获得 Rie 的书。此外，在尚未获得书的居民中，满足以下条件的每位居民 $j$ ($1 \\le j \\le N$) 都会购买一本书并获得它。\n\n- 居民 $i$ 和居民 $j$ 在实数轴上的距离小于或等于 $E_i - E_j$。换句话说，满足 $|X_i - X_j| \\le E_i - E_j$。\n\n如果所有居民都阅读了 Rie 的书，信息学奥林匹克将得到极大的认可。编写一个程序，计算需要向多少位居民赠送 Rie 的书，才能使 JOI 王国的所有居民都获得 Rie 的书。", "inputFormat": "从标准输入读取以下数据。\n\n> $N$  \n> $X_1$ $E_1$  \n> $X_2$ $E_2$  \n> $\\vdots$  \n> $X_N$ $E_N$", "outputFormat": "向标准输出写入一行。输出应包含需要赠送 Rie 的书的最少居民数量，以便 JOI 王国的所有居民都获得 Rie 的书。", "hint": "## 样例\n\n### 样例 1\n\n例如，如果 Rie 按以下方式赠送书，JOI 王国的所有居民将获得 Rie 的书。\n\n- Rie 向居民 3 赠送了一本书。\n  - 因为 $|X_3 - X_1| = 1$ 且 $E_3 - E_1 = 2$，居民 1 会购买一本 Rie 的书并获得它。\n  - 因为 $|X_3 - X_2| = 1$ 且 $E_3 - E_2 = 1$，居民 2 会购买一本 Rie 的书并获得它。\n  - 因为 $|X_3 - X_4| = 3$ 且 $E_3 - E_4 = -1$，居民 4 不会购买 Rie 的书。\n  因此，居民 1、2、3 将获得 Rie 的书。\n- Rie 向居民 4 赠送了一本书。由于除了居民 4 之外的所有居民都已经获得了 Rie 的书，最终 JOI 王国的所有居民都获得了 Rie 的书。\n\n由于不可能向少于两位居民赠送书以使 JOI 王国的所有居民都获得 Rie 的书，因此输出 2。\n\n此样例输入满足子任务 2、3、4 的约束。\n\n### 样例 2\n\n此样例输入满足所有子任务的约束。\n\n### 样例 3\n\n此样例输入满足子任务 2、3、4 的约束。\n\n## 约束\n\n- $1 \\le N \\le 5 \\times 10^5$。\n- $1 \\le X_i \\le 10^9$ ($1 \\le i \\le N$)。\n- $1 \\le E_i \\le 10^9$ ($1 \\le i \\le N$)。\n- 给定值均为整数。\n\n## 子任务\n\n1. (10 分) $E_1=E_2=\\cdots=E_N$。\n2. (23 分) $N \\le 16$。\n3. (36 分) $N \\le 10^3$。\n4. (31 分) 无额外约束。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9351", "type": "P", "difficulty": 6, "samples": [["2 4 2\n1 1\n2 4\n.###\n###.\n", "1\n"], ["6 6 1\n1 6\n6 1\n..#.#.\n##.###\n####.#\n...###\n##.##.\n.#.###\n", "4\n"], ["6 7 6\n6 4\n3 1\n..#.#.#\n##.##..\n.######\n#..#.#.\n.######\n..#.##.\n", "1\n"], ["1 15 1\n1 15\n1 1\n...............\n", "0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2023", "O2优化", "JOI（日本）"], "title": "[JOI 2023 Final] 迷宫 / Maze", "background": "", "description": "President K loves solving mazes. He found cells from which he may create a maze. The cells are rectangular grid with $R$ horizontal rows and $C$ vertical columns. Each cell is colored either white or black. The cell in the $i$-th row ($1 \\leqslant i \\leqslant R$) from the top and the $j$-th column ($1 \\leqslant j \\leqslant C$) from the left is called Cell $(i, j)$.\n\nPresident K will solve the maze under the condition that he can pass the white cells, but he cannot pass the black cells. More precisely, he will solve the maze in the following way.\n\n1. Among the white cells, he will choose Cell $(S_r, S_c)$, which is the starting cell of the maze, and Cell $(G_r, G_c)$, which is the goal cell of the maze.\n2. It is possible to move from one cell to another white cell which is adjacent to the current cell in one of the four directions (top, bottom, left, or right). By repeating this, he will find a path from the starting cell to the goal cell.\n\nPresident K already fixed the starting cell and the goal cell. However, he noticed that in some situations of the colors of the cells, there might not be a path from the starting cell to the goal cell consisting of white cells only. He has a stamp of size $N \\times N$. He will perform the following **Operations** several times so that there will be a path from the starting cell to the goal cell consisting of white cells only.\n\n**Operation.** He chooses a square region of $N \\times N$ cells, and paint the cells in the region white. More precisely, he chooses integers $a, b$ satisfying $1 \\leqslant a \\leqslant R - N + 1$ and $1 \\leqslant b \\leqslant C − N + 1$, and for every pair $(i, j)$ of integers satisfying $a \\leqslant i \\leqslant a + N − 1$ and $b \\leqslant j \\leqslant b + N − 1$, he paints Cell $(i, j)$ white.\n\nSince his hands becomes dirty if he uses the stamp, he wants to minimize the number of operations. Given\ninformation of the colors of the cells, the size of the stamp, and the locations of the starting cell and the goal cell, write a program which calculates the minimum number of operations he has to perform so that there will be a path from the starting cell to the goal cell consisting of white cells only.", "inputFormat": "Read the following data from the standard input.\n\n> $R$ $C$ $N$  \n$S_r$ $S_c$  \n$G_r$ $G_c$  \n$A_1$  \n$A_2$  \n$.$  \n$.$  \n$.$  \n$A_R$\n\n$A_i (1 \\leqslant i \\leqslant R)$ is a string of length $C$ consisting of `.` or `#`. The $j$-th character ($1 \\leqslant j \\leqslant C$) of $A_i$ represents the color of Cell $(i, j)$. Its color is white if the character is `.`, and its color is black if the character is `#`.", "outputFormat": "Write one line to the standard output. The output should contain the minimum number of operations President\nK has to perform so that there will be a path from the starting cell to the goal cell consisting of white cells only.", "hint": "#### 【样例解释 #1】\n\nIf he chooses $(a, b) = (1, 2)$ and perform an operation, Cells $(1, 2), (1, 3), (2, 2), (2, 3)$ become white. Then there will be a path from the starting cell to the goal cell consisting of white cells only. For example, the path $(1, 1) → (1, 2) → (1, 3) → (2, 3) → (2, 4)$ satisfies the condition.\n\nIf he does not perform an operation, there is no path from the starting cell to the goal cell consisting of white cells only. Therefore, output $1$.\n\n该样例满足子任务 $2, 3, 4, 5, 6, 7, 8$ 的限制。\n\n#### 【样例解释 #2】\n\n该样例满足所有子任务的限制。\n\n#### 【样例解释 #3】\n\n该样例满足子任务 $2, 3, 4, 5, 6, 7, 8$ 的限制。\n\n#### 【样例解释 #4】\n\nEven if he does not perform an operation, there might be a path from the starting cell to the goal cell consisting of white cells only.\n\n该样例满足所有子任务的限制。\n\n#### 【数据范围】\n\n对于所有测试数据，满足 $1 ≤ N ≤ R ≤ C$, $R × C ≤ 6 \\times 10^6$, $1 ≤ S_r ≤ R$, $1 ≤ S_c ≤ C$, $1 ≤ G_r ≤ R$, $1 ≤ G_c ≤ C$, $(S_r, S_c) \\neq (G_r, G_c)$.\n\n保证 $A_i (1 ≤ i ≤ R)$ 是一个长为 $C$ 且只由 `.` 或 `#` 构成的字符串。保证格子 $(S_r, S_c)$ 与格子 $(G_r, G_c)$ 均为白色。\n\n保证 $R, C, N, S_r, S_c, G_r, G_c$ 均为整数。\n\n| 子任务编号 | 分值 | 限制 |\n| :-: | :-: | :-: |\n| $1$ | $8$ | $N = 1, R × C ≤ 1.5 \\times 10^6$ |\n| $2$ | $19$ | $R × C ≤ 10^3$ |\n| $3$ | $16$ | 答案不超过 $10$, $R × C ≤ 1.5 \\times 10^6$ |\n| $4$ | $19$ | $R × C ≤ 6 \\times 10^4$ |\n| $5$ | $5$ | $R × C ≤ 1.5 \\times 10^5$ |\n| $6$ | $19$ | $R × C ≤ 1.5 \\times 10^6$ |\n| $7$ | $8$ | $R × C ≤ 3 \\times 10^6$ |\n| $8$ | $6$ | 无 |", "locale": "en", "translations": {"en": {"title": "[JOI 2023 Final] 迷宫 / Maze", "background": "", "description": "President K loves solving mazes. He found cells from which he may create a maze. The cells are rectangular grid with $R$ horizontal rows and $C$ vertical columns. Each cell is colored either white or black. The cell in the $i$-th row ($1 \\leqslant i \\leqslant R$) from the top and the $j$-th column ($1 \\leqslant j \\leqslant C$) from the left is called Cell $(i, j)$.\n\nPresident K will solve the maze under the condition that he can pass the white cells, but he cannot pass the black cells. More precisely, he will solve the maze in the following way.\n\n1. Among the white cells, he will choose Cell $(S_r, S_c)$, which is the starting cell of the maze, and Cell $(G_r, G_c)$, which is the goal cell of the maze.\n2. It is possible to move from one cell to another white cell which is adjacent to the current cell in one of the four directions (top, bottom, left, or right). By repeating this, he will find a path from the starting cell to the goal cell.\n\nPresident K already fixed the starting cell and the goal cell. However, he noticed that in some situations of the colors of the cells, there might not be a path from the starting cell to the goal cell consisting of white cells only. He has a stamp of size $N \\times N$. He will perform the following **Operations** several times so that there will be a path from the starting cell to the goal cell consisting of white cells only.\n\n**Operation.** He chooses a square region of $N \\times N$ cells, and paint the cells in the region white. More precisely, he chooses integers $a, b$ satisfying $1 \\leqslant a \\leqslant R - N + 1$ and $1 \\leqslant b \\leqslant C − N + 1$, and for every pair $(i, j)$ of integers satisfying $a \\leqslant i \\leqslant a + N − 1$ and $b \\leqslant j \\leqslant b + N − 1$, he paints Cell $(i, j)$ white.\n\nSince his hands becomes dirty if he uses the stamp, he wants to minimize the number of operations. Given\ninformation of the colors of the cells, the size of the stamp, and the locations of the starting cell and the goal cell, write a program which calculates the minimum number of operations he has to perform so that there will be a path from the starting cell to the goal cell consisting of white cells only.", "inputFormat": "Read the following data from the standard input.\n\n> $R$ $C$ $N$  \n$S_r$ $S_c$  \n$G_r$ $G_c$  \n$A_1$  \n$A_2$  \n$.$  \n$.$  \n$.$  \n$A_R$\n\n$A_i (1 \\leqslant i \\leqslant R)$ is a string of length $C$ consisting of `.` or `#`. The $j$-th character ($1 \\leqslant j \\leqslant C$) of $A_i$ represents the color of Cell $(i, j)$. Its color is white if the character is `.`, and its color is black if the character is `#`.", "outputFormat": "Write one line to the standard output. The output should contain the minimum number of operations President\nK has to perform so that there will be a path from the starting cell to the goal cell consisting of white cells only.", "hint": "#### 【样例解释 #1】\n\nIf he chooses $(a, b) = (1, 2)$ and perform an operation, Cells $(1, 2), (1, 3), (2, 2), (2, 3)$ become white. Then there will be a path from the starting cell to the goal cell consisting of white cells only. For example, the path $(1, 1) → (1, 2) → (1, 3) → (2, 3) → (2, 4)$ satisfies the condition.\n\nIf he does not perform an operation, there is no path from the starting cell to the goal cell consisting of white cells only. Therefore, output $1$.\n\n该样例满足子任务 $2, 3, 4, 5, 6, 7, 8$ 的限制。\n\n#### 【样例解释 #2】\n\n该样例满足所有子任务的限制。\n\n#### 【样例解释 #3】\n\n该样例满足子任务 $2, 3, 4, 5, 6, 7, 8$ 的限制。\n\n#### 【样例解释 #4】\n\nEven if he does not perform an operation, there might be a path from the starting cell to the goal cell consisting of white cells only.\n\n该样例满足所有子任务的限制。\n\n#### 【数据范围】\n\n对于所有测试数据，满足 $1 ≤ N ≤ R ≤ C$, $R × C ≤ 6 \\times 10^6$, $1 ≤ S_r ≤ R$, $1 ≤ S_c ≤ C$, $1 ≤ G_r ≤ R$, $1 ≤ G_c ≤ C$, $(S_r, S_c) \\neq (G_r, G_c)$.\n\n保证 $A_i (1 ≤ i ≤ R)$ 是一个长为 $C$ 且只由 `.` 或 `#` 构成的字符串。保证格子 $(S_r, S_c)$ 与格子 $(G_r, G_c)$ 均为白色。\n\n保证 $R, C, N, S_r, S_c, G_r, G_c$ 均为整数。\n\n| 子任务编号 | 分值 | 限制 |\n| :-: | :-: | :-: |\n| $1$ | $8$ | $N = 1, R × C ≤ 1.5 \\times 10^6$ |\n| $2$ | $19$ | $R × C ≤ 10^3$ |\n| $3$ | $16$ | 答案不超过 $10$, $R × C ≤ 1.5 \\times 10^6$ |\n| $4$ | $19$ | $R × C ≤ 6 \\times 10^4$ |\n| $5$ | $5$ | $R × C ≤ 1.5 \\times 10^5$ |\n| $6$ | $19$ | $R × C ≤ 1.5 \\times 10^6$ |\n| $7$ | $8$ | $R × C ≤ 3 \\times 10^6$ |\n| $8$ | $6$ | 无 |", "locale": "en"}, "zh-CN": {"title": "[JOI 2023 Final] 迷宫 / Maze", "background": "", "description": "总统 K 喜欢解迷宫。他找到了可以用来创建迷宫的格子。这些格子是一个有 $R$ 行和 $C$ 列的矩形网格。每个格子要么是白色，要么是黑色。位于从上到下第 $i$ 行（$1 \\leqslant i \\leqslant R$）和从左到右第 $j$ 列（$1 \\leqslant j \\leqslant C$）的格子称为格子 $(i, j)$。\n\n总统 K 将在可以通过白色格子而不能通过黑色格子的条件下解迷宫。更具体地，他将按以下方式解迷宫。\n\n1. 在白色格子中，他将选择格子 $(S_r, S_c)$ 作为迷宫的起始格子，以及格子 $(G_r, G_c)$ 作为迷宫的目标格子。\n2. 可以从一个格子移动到相邻的白色格子，方向可以是四个方向之一（上、下、左或右）。通过重复这个过程，他将找到从起始格子到目标格子的路径。\n\n总统 K 已经固定了起始格子和目标格子。然而，他注意到在某些格子的颜色情况下，可能不存在一条仅由白色格子组成的从起始格子到目标格子的路径。他有一个大小为 $N \\times N$ 的印章。他将多次执行以下**操作**，以便存在一条仅由白色格子组成的从起始格子到目标格子的路径。\n\n**操作。** 他选择一个 $N \\times N$ 的正方形区域，并将该区域内的格子涂成白色。更具体地，他选择整数 $a, b$ 满足 $1 \\leqslant a \\leqslant R - N + 1$ 和 $1 \\leqslant b \\leqslant C - N + 1$，对于每对整数 $(i, j)$ 满足 $a \\leqslant i \\leqslant a + N - 1$ 和 $b \\leqslant j \\leqslant b + N - 1$，他将格子 $(i, j)$ 涂成白色。\n\n由于使用印章会弄脏他的手，他希望最小化操作次数。给定格子的颜色信息、印章的大小以及起始格子和目标格子的位置，编写一个程序计算他必须执行的最小操作次数，以便存在一条仅由白色格子组成的从起始格子到目标格子的路径。", "inputFormat": "从标准输入读取以下数据。\n\n> $R$ $C$ $N$  \n$S_r$ $S_c$  \n$G_r$ $G_c$  \n$A_1$  \n$A_2$  \n$.$  \n$.$  \n$.$  \n$A_R$\n\n$A_i (1 \\leqslant i \\leqslant R)$ 是一个长度为 $C$ 的字符串，由 `.` 或 `#` 组成。$A_i$ 的第 $j$ 个字符（$1 \\leqslant j \\leqslant C$）表示格子 $(i, j)$ 的颜色。如果字符是 `.`，则颜色为白色；如果字符是 `#`，则颜色为黑色。", "outputFormat": "向标准输出写入一行。输出应包含总统 K 必须执行的最小操作次数，以便存在一条仅由白色格子组成的从起始格子到目标格子的路径。", "hint": "#### 【样例解释 #1】\n\n如果他选择 $(a, b) = (1, 2)$ 并执行一次操作，格子 $(1, 2), (1, 3), (2, 2), (2, 3)$ 变成白色。然后将存在一条仅由白色格子组成的从起始格子到目标格子的路径。例如，路径 $(1, 1) \\to (1, 2) \\to (1, 3) \\to (2, 3) \\to (2, 4)$ 满足条件。\n\n如果他不执行任何操作，则不存在一条仅由白色格子组成的从起始格子到目标格子的路径。因此，输出 $1$。\n\n该样例满足子任务 $2, 3, 4, 5, 6, 7, 8$ 的限制。\n\n#### 【样例解释 #2】\n\n该样例满足所有子任务的限制。\n\n#### 【样例解释 #3】\n\n该样例满足子任务 $2, 3, 4, 5, 6, 7, 8$ 的限制。\n\n#### 【样例解释 #4】\n\n即使他不执行任何操作，也可能存在一条仅由白色格子组成的从起始格子到目标格子的路径。\n\n该样例满足所有子任务的限制。\n\n#### 【数据范围】\n\n对于所有测试数据，满足 $1 \\leqslant N \\leqslant R \\leqslant C$，$R \\times C \\leqslant 6 \\times 10^6$，$1 \\leqslant S_r \\leqslant R$，$1 \\leqslant S_c \\leqslant C$，$1 \\leqslant G_r \\leqslant R$，$1 \\leqslant G_c \\leqslant C$，$(S_r, S_c) \neq (G_r, G_c)$。\n\n保证 $A_i (1 \\leqslant i \\leqslant R)$ 是一个长度为 $C$ 且只由 `.` 或 `#` 构成的字符串。保证格子 $(S_r, S_c)$ 和格子 $(G_r, G_c)$ 均为白色。\n\n保证 $R, C, N, S_r, S_c, G_r, G_c$ 均为整数。\n\n| 子任务编号 | 分值 | 限制 |\n| :-: | :-: | :-: |\n| $1$ | $8$ | $N = 1, R \\times C \\leqslant 1.5 \\times 10^6$ |\n| $2$ | $19$ | $R \\times C \\leqslant 10^3$ |\n| $3$ | $16$ | 答案不超过 $10$，$R \\times C \\leqslant 1.5 \\times 10^6$ |\n| $4$ | $19$ | $R \\times C \\leqslant 6 \\times 10^4$ |\n| $5$ | $5$ | $R \\times C \\leqslant 1.5 \\times 10^5$ |\n| $6$ | $19$ | $R \\times C \\leqslant 1.5 \\times 10^6$ |\n| $7$ | $8$ | $R \\times C \\leqslant 3 \\times 10^6$ |\n| $8$ | $6$ | 无 |\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9352", "type": "P", "difficulty": 5, "samples": [["4\n3 4 1 2\n1 2\n2 3\n3 4\n", "3\n"], ["7\n3 2 7 1 5 4 6\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n", "7\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "并查集", "2023", "最近公共祖先 LCA", "JOI（日本）", "笛卡尔树"], "title": "[JOI 2023 Final] 训猫 / Cat Exercise", "background": null, "description": "There are $N$ cat towers, numbered from $1$ to $N$. The height of Tower $i$ ($1 \\le i \\le N$) is $P_i$. The heights of the towers are distinct integers between $1$ and $N$, inclusive. There are $N - 1$ adjacent pairs of towers. For each $j$ ($1 \\le j \\le N - 1$), Tower $A_j$ and Tower $B_j$ are adjacent to each other. In the beginning, it is possible to travel from a tower to any other tower by repeating moves from towers to adjacent towers.\n\nIn the beginning, a cat stays in a tower of height $N$.\n\nThen we perform **cat exercises**. In cat exercises, we repeatedly choose a tower and put an obstacle on it. However, we cannot put an obstacle on a tower where we already put an obstacle on it. During the process, the following will happen.\n\n- If the cat does not stay in the chosen tower, nothing will happen.\n- If the cat stays in the chosen tower and there is an obstacle on every tower which is adjacent to the chosen tower, the cat exercises will finish.\n- Otherwise, among the towers where the cat can arrive by repeating moves from towers to adjacent towers without obstacles, the cat will move to the highest tower except for the current tower by repeating moves from towers to adjacent towers. In this process, the cat takes the route where the number of moves from towers to adjacent towers becomes minimum.\n\nGiven information of the heights of the towers and pairs of adjacent towers, write a program which calculates the maximum possible sum of the number of moves of the cat from towers to adjacent towers if we put obstacles suitably.", "inputFormat": "Read the following data from the standard input.\n\n> $N$  \n> $P_1$ $P_2$ $\\cdots$ $P_N$  \n> $A_1$ $B_1$  \n> $A_2$ $B_2$  \n> $\\vdots$    \n> $A_{N-1}$ $B_{N-1}$", "outputFormat": "Write one line to the standard output. The output should contain the maximum possible sum of the number of moves of the cat from towers to adjacent towers.", "hint": "## Samples\n\n### Sample 1\n\nIf we perform the cat exercises in the following way, the cat moves 3 times in total.\n\n- We put an obstacle on Tower 1. The cat does not move.\n- We put an obstacle on Tower 2. The cat moves from Tower 2 to Tower 3. Then, the cat moves from Tower 3 to Tower 4.\n- We put an obstacle on Tower 4. The cat moves from Tower 4 to Tower 3.\n- We put an obstacle on Tower 3. Then the cat exercises finish.\n\nSince there is no way to perform cat exercises where the cat moves more than or equal to 4 times from towers to adjacent towers, output 3.\n\nThis sample input satisfies the constraints of Subtasks 1, 2, 3, 4, 5, 7.\n\n### Sample 2\n\nThis sample input satisfies the constraints of Subtasks 4, 6, 7.\n\n## Constraints\n\n- $2 \\le N \\le 2\\times 10^5$.\n- $1 \\le P_i \\le N$ ($1 \\le i \\le N$).\n- $P_i \\neq P_j$ ($1 \\le i < j \\le N$).\n- $1 \\le A_j < B_j \\le N$ ($1 \\le j \\le N - 1$).\n- In the beginning, it is possible to travel from a tower to any other tower by repeating moves from towers to adjacent towers.\n- Given values are all integers.\n\n## Subtasks\n\n1. (7 points) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$), $N \\le 16$．\n2. (7 points) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$), $N \\le 300$．\n3. (7 points) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$), $N \\le 5 000$．\n4. (10 points) $N \\le 5 000$．\n5. (20 points) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$)．\n6. (23 points) $A_i =\\left\\lfloor\\frac{i+1}2\\right\\rfloor, B_i = i + 1$ ($1 \\le i \\le N - 1$). Here $\\lfloor x \\rfloor$ is the largest integer which is smaller than or equal to $x$.\n7. (26 points) No additional constraints.", "locale": "en", "translations": {"en": {"title": "[JOI 2023 Final] 训猫 / Cat Exercise", "background": null, "description": "There are $N$ cat towers, numbered from $1$ to $N$. The height of Tower $i$ ($1 \\le i \\le N$) is $P_i$. The heights of the towers are distinct integers between $1$ and $N$, inclusive. There are $N - 1$ adjacent pairs of towers. For each $j$ ($1 \\le j \\le N - 1$), Tower $A_j$ and Tower $B_j$ are adjacent to each other. In the beginning, it is possible to travel from a tower to any other tower by repeating moves from towers to adjacent towers.\n\nIn the beginning, a cat stays in a tower of height $N$.\n\nThen we perform **cat exercises**. In cat exercises, we repeatedly choose a tower and put an obstacle on it. However, we cannot put an obstacle on a tower where we already put an obstacle on it. During the process, the following will happen.\n\n- If the cat does not stay in the chosen tower, nothing will happen.\n- If the cat stays in the chosen tower and there is an obstacle on every tower which is adjacent to the chosen tower, the cat exercises will finish.\n- Otherwise, among the towers where the cat can arrive by repeating moves from towers to adjacent towers without obstacles, the cat will move to the highest tower except for the current tower by repeating moves from towers to adjacent towers. In this process, the cat takes the route where the number of moves from towers to adjacent towers becomes minimum.\n\nGiven information of the heights of the towers and pairs of adjacent towers, write a program which calculates the maximum possible sum of the number of moves of the cat from towers to adjacent towers if we put obstacles suitably.", "inputFormat": "Read the following data from the standard input.\n\n> $N$  \n> $P_1$ $P_2$ $\\cdots$ $P_N$  \n> $A_1$ $B_1$  \n> $A_2$ $B_2$  \n> $\\vdots$    \n> $A_{N-1}$ $B_{N-1}$", "outputFormat": "Write one line to the standard output. The output should contain the maximum possible sum of the number of moves of the cat from towers to adjacent towers.", "hint": "## Samples\n\n### Sample 1\n\nIf we perform the cat exercises in the following way, the cat moves 3 times in total.\n\n- We put an obstacle on Tower 1. The cat does not move.\n- We put an obstacle on Tower 2. The cat moves from Tower 2 to Tower 3. Then, the cat moves from Tower 3 to Tower 4.\n- We put an obstacle on Tower 4. The cat moves from Tower 4 to Tower 3.\n- We put an obstacle on Tower 3. Then the cat exercises finish.\n\nSince there is no way to perform cat exercises where the cat moves more than or equal to 4 times from towers to adjacent towers, output 3.\n\nThis sample input satisfies the constraints of Subtasks 1, 2, 3, 4, 5, 7.\n\n### Sample 2\n\nThis sample input satisfies the constraints of Subtasks 4, 6, 7.\n\n## Constraints\n\n- $2 \\le N \\le 2\\times 10^5$.\n- $1 \\le P_i \\le N$ ($1 \\le i \\le N$).\n- $P_i \\neq P_j$ ($1 \\le i < j \\le N$).\n- $1 \\le A_j < B_j \\le N$ ($1 \\le j \\le N - 1$).\n- In the beginning, it is possible to travel from a tower to any other tower by repeating moves from towers to adjacent towers.\n- Given values are all integers.\n\n## Subtasks\n\n1. (7 points) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$), $N \\le 16$．\n2. (7 points) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$), $N \\le 300$．\n3. (7 points) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$), $N \\le 5 000$．\n4. (10 points) $N \\le 5 000$．\n5. (20 points) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$)．\n6. (23 points) $A_i =\\left\\lfloor\\frac{i+1}2\\right\\rfloor, B_i = i + 1$ ($1 \\le i \\le N - 1$). Here $\\lfloor x \\rfloor$ is the largest integer which is smaller than or equal to $x$.\n7. (26 points) No additional constraints.", "locale": "en"}, "zh-CN": {"title": "[JOI 2023 Final] 训猫 / Cat Exercise", "background": null, "description": "有 $N$ 个猫塔，编号从 $1$ 到 $N$。塔 $i$ 的高度为 $P_i$（$1 \\le i \\le N$）。这些塔的高度是 $1$ 到 $N$ 之间的不同整数。共有 $N - 1$ 对相邻的塔。对于每个 $j$（$1 \\le j \\le N - 1$），塔 $A_j$ 和塔 $B_j$ 是相邻的。最开始，可以通过从一个塔移动到相邻的塔，来从一个塔到达任何其他塔。\n\n最开始，一只猫待在高度为 $N$ 的塔上。\n\n然后我们进行**猫运动**。在猫运动中，我们反复选择一个塔并在其上放置一个障碍。然而，我们不能在已经放置障碍的塔上再放置障碍。在这个过程中，将发生以下情况：\n\n- 如果猫不在所选的塔上，什么也不会发生。\n- 如果猫在所选的塔上，并且所选塔的每个相邻塔上都有障碍，猫运动将结束。\n- 否则，在猫可以通过从塔移动到相邻塔而不受障碍影响到达的塔中，猫将移动到除当前塔外最高的塔。过程中，猫会选择从塔移动到相邻塔的步数最少的路线。\n\n给定塔的高度信息和相邻塔的对，编写程序计算在适当放置障碍的情况下，猫从塔移动到相邻塔的最大可能移动次数之和。", "inputFormat": "从标准输入读取以下数据。\n\n> $N$  \n> $P_1$ $P_2$ $\\cdots$ $P_N$  \n> $A_1$ $B_1$  \n> $A_2$ $B_2$  \n> $\\vdots$  \n> $A_{N-1}$ $B_{N-1}$", "outputFormat": "向标准输出写入一行。输出应包含猫从塔移动到相邻塔的最大可能移动次数之和。", "hint": "## 样例\n\n### 样例 1\n\n如果我们按以下方式进行猫运动，猫总共移动 3 次。\n\n- 我们在塔 1 上放置一个障碍。猫不移动。\n- 我们在塔 2 上放置一个障碍。猫从塔 2 移动到塔 3。然后，猫从塔 3 移动到塔 4。\n- 我们在塔 4 上放置一个障碍。猫从塔 4 移动到塔 3。\n- 我们在塔 3 上放置一个障碍。然后猫运动结束。\n\n由于没有办法进行猫运动，使得猫从塔移动到相邻塔的次数大于或等于 4，因此输出 3。\n\n此样例输入满足子任务 1、2、3、4、5、7 的约束。\n\n### 样例 2\n\n此样例输入满足子任务 4、6、7 的约束。\n\n## 约束\n\n- $2 \\le N \\le 2\\times 10^5$。\n- $1 \\le P_i \\le N$ ($1 \\le i \\le N$)。\n- $P_i \\neq P_j$ ($1 \\le i < j \\le N$)。\n- $1 \\le A_j < B_j \\le N$ ($1 \\le j \\le N - 1$)。\n- 最开始，可以通过从一个塔移动到相邻塔，来从一个塔到达任何其他塔。\n- 给定的值都是整数。\n\n## 子任务\n\n1. (7 分) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$)，$N \\le 16$。\n2. (7 分) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$)，$N \\le 300$。\n3. (7 分) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$)，$N \\le 5 000$。\n4. (10 分) $N \\le 5 000$。\n5. (20 分) $A_i = i, B_i = i + 1$ ($1 \\le i \\le N - 1$)。\n6. (23 分) $A_i =\\left\\lfloor\\frac{i+1}2\\right\\rfloor, B_i = i + 1$ ($1 \\le i \\le N - 1$)。这里 $\\lfloor x \\rfloor$ 是小于或等于 $x$ 的最大整数。\n7. (26 分) 无额外约束。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9353", "type": "P", "difficulty": 7, "samples": [["5 1\nRBRRB\n4\n1\n1 1", "1"], ["5 3\nRBRBR\n1 3 4\n2\n2 3\n1 3", "5\n0"], ["10 3\nBBRRBRBRRB\n2 10 5\n1\n1 3", "2"], ["10 10\nRRRRRRRRRR\n3 1 4 1 5 9 2 6 5 3\n5\n1 7\n2 8\n3 9\n4 10\n1 10", "4\n8\n10\n0\n9"], ["10 10\nRRRBBBBBBB\n3 1 4 1 5 9 2 6 5 3\n5\n1 10\n2 9\n3 8\n4 7\n5 6", "2\n6\n0\n10\n7"], ["30 10\nRRRBBRBBBRBBBRBRBRRRRRBBBBRBRR\n3 28 2 29 1 30 6 14 7 7\n10\n1 10\n2 3\n2 5\n2 8\n3 3\n3 6\n4 5\n4 7\n5 9\n10 10", "21\n15\n15\n4\n17\n16\n14\n20\n12\n23"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2023", "JOI（日本）"], "title": "[JOI 2023 Final] 现代机器 / Modern Machine", "background": null, "description": "Bitaro is given JOI machine as a birthday present. JOI machine consists of one ball, $N$ light tiles, and $M$\nbuttons. The light tiles are numbered from $1$ to $N$. When Bitaro turns the power on, Light tile $i$ ($1 \\leq i \\leq N$) emit light of color $C_i$ (blue ($\\texttt B$) or red ($\\texttt R$)). The buttons are numbered from $1$ to $M$. If Bitaro pushes Button $j$ ($1 \\leq j \\leq M$), the following happen.\n1. The ball is placed on Light tile $A_j$.\n2. Light tile $A_j$ becomes red (regardless of its original color).\n3. The following operations are performed until the ball is removed.  \n    Let $p$ be the index of the light tile where the ball is currently placed.    \n    - If Light tile $p$ is blue,  \n    Light tile $p$ becomes red. After that, if $p = 1$, the ball is removed. Otherwise, the ball moves to\nLight tile $p − 1$.  \n    - If Light tile $p$ is red,  \n    Light tile $p$ becomes blue. After that, if $p = N$, the ball is removed. Otherwise, the ball moves\nto Light tile $p + 1$.\n\nBitaro is interested in JOI machine. He plans to perform $Q$ experiments. In the $k$-th experiment ($1 \\leq k \\leq Q$),\nafter Bitaro turns the power on, Bitaro pushes Buttons $L_k, L_{k}+1,\\dots , R_k$ in this order. After Bitaro pushes a button, he will not push the next button and wait until the ball is removed.\n\nGiven information of JOI machine and the experiments, write a program which calculates, for each experi-\nment, the number of light tiles whose colors are red when the experiment finishes.", "inputFormat": "Read the following data from the standard input.\n> $N$ $M$  \n> $C_1\\ C_2 \\dots C_N$  \n> $A_1\\ A_2 \\dots A_M$  \n> $Q$  \n> $L_1\\ R_1$  \n> $L_2\\ R_2$  \n> $\\dots$  \n> $L_Q\\ R_Q$", "outputFormat": "Write $Q$ lines to the standard output. In the $k$-th line ($1 \\leq k \\leq Q$), the output should contain the number of light tiles whose colors are red when the $k$-th experiment finishes.", "hint": "**【Sample Explanation #1】**\n\nThe first experiment proceeds as follows.\n1. Bitaro pushes Button 1, and ball is placed on Light tile 4.\n2. Light tile 4 becomes red. Since the original color of Light tile 4 is red, the color of Light tile 4 does not\nchange.\n3. After that, the following operations are performed.  \n（1）Since the current color of Light tile 4 is red, Light tile 4 becomes blue, and the ball moves to Light\ntile 5.  \n（2）Since the current color of Light tile 5 is blue, Light tile 5 becomes red, and the ball moves to Light\ntile 4.  \n（3）Since the current color of Light tile 4 is blue, Light tile 4 becomes red, and the ball moves to Light\ntile 3.  \n（4）Since the current color of Light tile 3 is red, Light tile 3 becomes blue, and the ball moves to Light\ntile 4.  \n（5）Since the current color of Light tile 4 is red, the color of Light tile 4 becomes blue, and the ball\nmoves to Light tile 5.  \n（6）Since the current color of Light tile 5 is red, the color of Light tile 5 becomes blue, and the ball is\nremoved.\n\nAfter the experiment, Light tile 1 is the only light tile whose current color is red. Therefore, output 1.\n\nThis sample satisfies the constraints of subtasks 1, 2, 3, 6, and 7.\n\n**【Sample Explanation #2】**\n\nFor the first experiment, Light tiles 1, 2, 3, 4, 5 are the light tiles whose current colors are red after the experiment. Since there are five such light tiles, output 5.\n\nFor the second experiment, there is no light tile whose current color is red after the experiment. Therefore,\noutput 0.\n\nThis sample satisfies the constraints of subtasks 3, 6, and 7.\n\n**【Sample Explanation #3】**  \n\nThis sample satisfies the constraints of subtasks 1, 2, 3, 6, and 7.  \n\n**【Sample Explanation #4】**  \n\nThis sample satisfies the constraints of subtasks 3, 4, 5, 6, and 7.  \n\n**【Sample Explanation #5】**  \n\nThis sample satisfies the constraints of subtasks 3, 5, 6, and 7.  \n\n**【Sample Explanation #6】**  \n\nThis sample satisfies the constraints of subtasks 6 and 7.\n\n**【Constraints】**\n\nFor all test cases, it is guaranteed that:\n\n- $3 \\leq N \\leq 1.2 \\times 10^5$；\n- $1 \\leq M \\leq 1.2 \\times 10^5$；\n- $C_i \\in \\{\\texttt{B},\\texttt{R}\\}$；\n- $1 \\leq A_j \\leq N$；\n- $1 \\leq Q \\leq 1.2 \\times 10^5$；\n- $1 \\leq L_k \\leq R_k \\leq M$；\n- $N, M, A_j, Q, L_k, R_k$ are all integers。\n\n**【Subtasks】**\n\n**Subtasks are used in this problem**。\n\n1. (3 points) $N,M \\leq 300$，$Q = 1$。\n2. (12 points) $N, M \\leq 7000$，$Q = 1$。\n3. (10 points) $Q \\leq 5$。\n4. (11 points) $N = 10$，$C_i = \\texttt R$。\n5. (26 points) There exists a positive integer $t \\in [0, N]$，is guaranteed that $1 \\leq i \\leq t$，$C_i = \\texttt R$；And $\\forall t < i \\leq N$，$C_i = \\texttt B$。\n6. (17 points) $A_j \\leq 20$ or $A_j > N - 20$。\n7. (21 points) No more constraints。", "locale": "en", "translations": {"en": {"title": "[JOI 2023 Final] 现代机器 / Modern Machine", "background": null, "description": "Bitaro is given JOI machine as a birthday present. JOI machine consists of one ball, $N$ light tiles, and $M$\nbuttons. The light tiles are numbered from $1$ to $N$. When Bitaro turns the power on, Light tile $i$ ($1 \\leq i \\leq N$) emit light of color $C_i$ (blue ($\\texttt B$) or red ($\\texttt R$)). The buttons are numbered from $1$ to $M$. If Bitaro pushes Button $j$ ($1 \\leq j \\leq M$), the following happen.\n1. The ball is placed on Light tile $A_j$.\n2. Light tile $A_j$ becomes red (regardless of its original color).\n3. The following operations are performed until the ball is removed.  \n    Let $p$ be the index of the light tile where the ball is currently placed.    \n    - If Light tile $p$ is blue,  \n    Light tile $p$ becomes red. After that, if $p = 1$, the ball is removed. Otherwise, the ball moves to\nLight tile $p − 1$.  \n    - If Light tile $p$ is red,  \n    Light tile $p$ becomes blue. After that, if $p = N$, the ball is removed. Otherwise, the ball moves\nto Light tile $p + 1$.\n\nBitaro is interested in JOI machine. He plans to perform $Q$ experiments. In the $k$-th experiment ($1 \\leq k \\leq Q$),\nafter Bitaro turns the power on, Bitaro pushes Buttons $L_k, L_{k}+1,\\dots , R_k$ in this order. After Bitaro pushes a button, he will not push the next button and wait until the ball is removed.\n\nGiven information of JOI machine and the experiments, write a program which calculates, for each experi-\nment, the number of light tiles whose colors are red when the experiment finishes.", "inputFormat": "Read the following data from the standard input.\n> $N$ $M$  \n> $C_1\\ C_2 \\dots C_N$  \n> $A_1\\ A_2 \\dots A_M$  \n> $Q$  \n> $L_1\\ R_1$  \n> $L_2\\ R_2$  \n> $\\dots$  \n> $L_Q\\ R_Q$", "outputFormat": "Write $Q$ lines to the standard output. In the $k$-th line ($1 \\leq k \\leq Q$), the output should contain the number of light tiles whose colors are red when the $k$-th experiment finishes.", "hint": "**【Sample Explanation #1】**\n\nThe first experiment proceeds as follows.\n1. Bitaro pushes Button 1, and ball is placed on Light tile 4.\n2. Light tile 4 becomes red. Since the original color of Light tile 4 is red, the color of Light tile 4 does not\nchange.\n3. After that, the following operations are performed.  \n（1）Since the current color of Light tile 4 is red, Light tile 4 becomes blue, and the ball moves to Light\ntile 5.  \n（2）Since the current color of Light tile 5 is blue, Light tile 5 becomes red, and the ball moves to Light\ntile 4.  \n（3）Since the current color of Light tile 4 is blue, Light tile 4 becomes red, and the ball moves to Light\ntile 3.  \n（4）Since the current color of Light tile 3 is red, Light tile 3 becomes blue, and the ball moves to Light\ntile 4.  \n（5）Since the current color of Light tile 4 is red, the color of Light tile 4 becomes blue, and the ball\nmoves to Light tile 5.  \n（6）Since the current color of Light tile 5 is red, the color of Light tile 5 becomes blue, and the ball is\nremoved.\n\nAfter the experiment, Light tile 1 is the only light tile whose current color is red. Therefore, output 1.\n\nThis sample satisfies the constraints of subtasks 1, 2, 3, 6, and 7.\n\n**【Sample Explanation #2】**\n\nFor the first experiment, Light tiles 1, 2, 3, 4, 5 are the light tiles whose current colors are red after the experiment. Since there are five such light tiles, output 5.\n\nFor the second experiment, there is no light tile whose current color is red after the experiment. Therefore,\noutput 0.\n\nThis sample satisfies the constraints of subtasks 3, 6, and 7.\n\n**【Sample Explanation #3】**  \n\nThis sample satisfies the constraints of subtasks 1, 2, 3, 6, and 7.  \n\n**【Sample Explanation #4】**  \n\nThis sample satisfies the constraints of subtasks 3, 4, 5, 6, and 7.  \n\n**【Sample Explanation #5】**  \n\nThis sample satisfies the constraints of subtasks 3, 5, 6, and 7.  \n\n**【Sample Explanation #6】**  \n\nThis sample satisfies the constraints of subtasks 6 and 7.\n\n**【Constraints】**\n\nFor all test cases, it is guaranteed that:\n\n- $3 \\leq N \\leq 1.2 \\times 10^5$；\n- $1 \\leq M \\leq 1.2 \\times 10^5$；\n- $C_i \\in \\{\\texttt{B},\\texttt{R}\\}$；\n- $1 \\leq A_j \\leq N$；\n- $1 \\leq Q \\leq 1.2 \\times 10^5$；\n- $1 \\leq L_k \\leq R_k \\leq M$；\n- $N, M, A_j, Q, L_k, R_k$ are all integers。\n\n**【Subtasks】**\n\n**Subtasks are used in this problem**。\n\n1. (3 points) $N,M \\leq 300$，$Q = 1$。\n2. (12 points) $N, M \\leq 7000$，$Q = 1$。\n3. (10 points) $Q \\leq 5$。\n4. (11 points) $N = 10$，$C_i = \\texttt R$。\n5. (26 points) There exists a positive integer $t \\in [0, N]$，is guaranteed that $1 \\leq i \\leq t$，$C_i = \\texttt R$；And $\\forall t < i \\leq N$，$C_i = \\texttt B$。\n6. (17 points) $A_j \\leq 20$ or $A_j > N - 20$。\n7. (21 points) No more constraints。", "locale": "en"}, "zh-CN": {"title": "[JOI 2023 Final] 现代机器 / Modern Machine", "background": null, "description": "Bitaro 收到了一个 JOI 机器作为生日礼物。\n\nJOI 机器由一个球、$N$ 个灯光瓷砖和 $M$ 个按钮组成。灯光瓷砖从 $1$ 到 $N$ 编号。当 Bitaro 打开电源时，灯光瓷砖 $i$ ($1 \\leq i \\leq N$) 会发出颜色为 $C_i$（蓝色（$\\texttt B$）或红色（$\\texttt R$））的光。按钮从 $1$ 到 $M$ 编号。\n\n如果 Bitaro 按下按钮 $j$ ($1 \\leq j \\leq M$)，会发生以下情况。 \n\n1. 球被放置在灯光瓷砖 $A_j$ 上。\n2. 灯光瓷砖 $A_j$ 变为红色（无论其原始颜色如何）。\n3. 在球被移除之前，执行以下操作。 设 $p$ 为球当前所在的灯光瓷砖的索引。\n   - 如果灯光瓷砖 $p$ 是蓝色的，灯光瓷砖 $p$ 变为红色。之后，如果 $p = 1$，球被移除。否则，球移动到灯光瓷砖 $p - 1$。\n   - 如果灯光瓷砖 $p$ 是红色的，灯光瓷砖 $p$ 变为蓝色。之后，如果 $p = N$，球被移除。否则，球移动到灯光瓷砖 $p + 1$。\n\nBitaro 对 JOI 机器很感兴趣。他计划进行 $Q$ 次实验。在第 $k$ 次实验中（$1 \\leq k \\leq Q$），在 Bitaro 打开电源后，Bitaro 按顺序按下按钮 $L_k, L_{k} + 1, \\dots , R_k$。在 Bitaro 按下一个按钮后，他不会按下下一个按钮，并等待球被移除。\n\n给定 JOI 机器的信息和实验，编写一个程序来计算每次实验结束时颜色为红色的灯光瓷砖的数量。", "inputFormat": "从标准输入读取以下数据。 \n\n> $N$ $M$  \n> $C_1\\ C_2 \\dots C_N$  \n> $A_1\\ A_2 \\dots A_M$  \n> $Q$  \n> $L_1\\ R_1$  \n> $L_2\\ R_2$  \n> $\\dots$  \n> $L_Q\\ R_Q$", "outputFormat": "向标准输出写入 $Q$ 行。在第 $k$ 行（$1 \\leq k \\leq Q$），输出应包含第 $k$ 次实验结束时颜色为红色的灯光瓷砖的数量。", "hint": "**【样例解释 #1】**\n\n第一次实验如下进行。 \n1. Bitaro 按下按钮 1，球被放置在灯光瓷砖 4 上。 \n2. 灯光瓷砖 4 变为红色。由于灯光瓷砖 4 的原始颜色是红色，灯光瓷砖 4 的颜色没有改变。 \n3. 之后，执行以下操作。  \n（1）由于灯光瓷砖 4 的当前颜色是红色，灯光瓷砖 4 变为蓝色，球移动到灯光瓷砖 5。  \n（2）由于灯光瓷砖 5 的当前颜色是蓝色，灯光瓷砖 5 变为红色，球移动到灯光瓷砖 4。  \n（3）由于灯光瓷砖 4 的当前颜色是蓝色，灯光瓷砖 4 变为红色，球移动到灯光瓷砖 3。  \n（4）由于灯光瓷砖 3 的当前颜色是红色，灯光瓷砖 3 变为蓝色，球移动到灯光瓷砖 4。  \n（5）由于灯光瓷砖 4 的当前颜色是红色，灯光瓷砖 4 的颜色变为蓝色，球移动到灯光瓷砖 5。  \n（6）由于灯光瓷砖 5 的当前颜色是红色，灯光瓷砖 5 的颜色变为蓝色，球被移除。\n\n实验结束后，灯光瓷砖 1 是唯一一个当前颜色为红色的灯光瓷砖。因此，输出 1。\n\n本样例满足子任务 1,2,3,6,7 的限制。\n\n**【样例解释 #2】**\n\n对于第一次实验，灯光瓷砖 1, 2, 3, 4, 5 是实验结束后当前颜色为红色的灯光瓷砖。由于有五个这样的灯光瓷砖，输出 5。\n\n对于第二次实验，没有灯光瓷砖在实验结束后颜色为红色。因此，输出 0。\n\n本样例满足子任务 3,6,7 的限制。\n\n**【样例解释 #3】**\n\n本样例满足子任务 1,2,3,6,7 的限制。\n\n**【样例解释 #4】**\n\n本样例满足子任务 3,4,5,6,7 的限制。\n\n**【样例解释 #5】**\n\n本样例满足子任务 3,5,6,7 的限制。\n\n**【样例解释 #6】**\n\n本样例满足子任务 6,7 的限制。\n\n**【数据规模】**\n\n对全部的测试点，保证： \n- $3 \\leq N \\leq 1.2 \\times 10^5$；\n- $1 \\leq M \\leq 1.2 \\times 10^5$；\n- $C_i \\in \\{\\texttt{B},\\texttt{R}\\}$； \n- $1 \\leq A_j \\leq N$；\n- $1 \\leq Q \\leq 1.2 \\times 10^5$； \n- $1 \\leq L_k \\leq R_k \\leq M$； \n- $N, M, A_j, Q, L_k, R_k$ 均为整数。\n\n**【子任务】**\n\n**本题采用捆绑测试**。\n\n1. (3 分) $N,M \\leq 300$，$Q = 1$。 \n2. (12 分) $N, M \\leq 7000$，$Q = 1$。 \n3. (10 分) $Q \\leq 5$。 \n4. (11 分) $N = 10$，$C_i = \\texttt R$。 \n5. (26 分) 存在一个整数 $t \\in [0, N]$，满足对 $1 \\leq i \\leq t$，$C_i = \\texttt R$；且对 $t < i \\leq N$，$C_i = \\texttt B$。 \n6. (17 分) $A_j \\leq 20$ 或 $A_j > N - 20$。\n7. (21 分) 无特殊约定。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9354", "type": "P", "difficulty": 1, "samples": [["2\n1100\n11332132121", "11\n28"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["模拟", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SiR-1」Popsicle", "background": "然而如何优雅地摆烂？", "description": "猫猫有若干个雪糕棒排成一排，每个雪糕棒上有一个 $0\\sim 9$ 的数字，并且满足最左边的雪糕棒上写的数字不为 $0$。猫猫认为这一排雪糕棒从左到右依次构成了十进制正整数 $n$。\n\n猫猫认为 $0$ 是美好的，所以她会尽可能把 $n$ 变成 $0$，也就是把所有雪糕棒都拿走。\n\n猫猫每次会进行一次操作。每次操作选择一个数字非 $0$ 的雪糕棒，并将其减 $1$。这之后，如果最左边有连续的一些数字为 $0$ 的雪糕棒（也即 $n$ 出现了前导 $0$），猫猫会把这些雪糕棒拿走。\n\n小老鼠会来捣乱，它会在某个时刻（可能是所有操作开始之前，也可能是猫猫任意一次操作之后）改变某个雪糕棒上的一个数字。小老鼠**总共只能改变一个数字**。\n\n小老鼠希望操作次数尽量多，猫猫希望操作次数尽量少，所以她想知道二者都使用最优策略时，她的操作次数。", "inputFormat": "**本题单个测试点内有多组数据。**\n\n第一行，一个正整数 $T$ 表示数据组数。对于每组数据：\n\n- 仅一行，一个正整数 $n$。", "outputFormat": "共 $T$ 行，每行一个整数，表示答案。", "hint": "### 样例解释 1\n\n对于第一组数据，小老鼠可以一开始就将 $1100$ 变为 $1109$，这样猫猫共需要 $1 + 1 + 9$ 次操作把 $n$ 变为 $0$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（13 pts）：$n \\leq 99$。\n+ Subtask 1（13 pts）：$n = 10^k$，$k$ 为自然数。\n+ Subtask 2（13 pts）：$n = 10^k - 1$，$k$ 为正整数。\n+ Subtask 3（13 pts）：$n \\leq 999\\ 999$。\n+ Subtask 4（48 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 3333$，$1 \\leq n \\leq 9\\ 999\\ 999\\ 999\\ 999(=10^{13} - 1)$，毕竟猫猫最多一捆只有 $13$ 根雪糕嘛。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SiR-1」Popsicle", "background": "然而如何优雅地摆烂？", "description": "猫猫有若干个雪糕棒排成一排，每个雪糕棒上有一个 $0\\sim 9$ 的数字，并且满足最左边的雪糕棒上写的数字不为 $0$。猫猫认为这一排雪糕棒从左到右依次构成了十进制正整数 $n$。\n\n猫猫认为 $0$ 是美好的，所以她会尽可能把 $n$ 变成 $0$，也就是把所有雪糕棒都拿走。\n\n猫猫每次会进行一次操作。每次操作选择一个数字非 $0$ 的雪糕棒，并将其减 $1$。这之后，如果最左边有连续的一些数字为 $0$ 的雪糕棒（也即 $n$ 出现了前导 $0$），猫猫会把这些雪糕棒拿走。\n\n小老鼠会来捣乱，它会在某个时刻（可能是所有操作开始之前，也可能是猫猫任意一次操作之后）改变某个雪糕棒上的一个数字。小老鼠**总共只能改变一个数字**。\n\n小老鼠希望操作次数尽量多，猫猫希望操作次数尽量少，所以她想知道二者都使用最优策略时，她的操作次数。", "inputFormat": "**本题单个测试点内有多组数据。**\n\n第一行，一个正整数 $T$ 表示数据组数。对于每组数据：\n\n- 仅一行，一个正整数 $n$。", "outputFormat": "共 $T$ 行，每行一个整数，表示答案。", "hint": "### 样例解释 1\n\n对于第一组数据，小老鼠可以一开始就将 $1100$ 变为 $1109$，这样猫猫共需要 $1 + 1 + 9$ 次操作把 $n$ 变为 $0$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（13 pts）：$n \\leq 99$。\n+ Subtask 1（13 pts）：$n = 10^k$，$k$ 为自然数。\n+ Subtask 2（13 pts）：$n = 10^k - 1$，$k$ 为正整数。\n+ Subtask 3（13 pts）：$n \\leq 999\\ 999$。\n+ Subtask 4（48 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 3333$，$1 \\leq n \\leq 9\\ 999\\ 999\\ 999\\ 999(=10^{13} - 1)$，毕竟猫猫最多一捆只有 $13$ 根雪糕嘛。", "locale": "zh-CN"}}}
{"pid": "P9355", "type": "P", "difficulty": 2, "samples": [["4\n1 3\n2 2\n3 4\n7 13", "2\n4\n17\n162"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SiR-1」Checkmate", "background": "这里本来有一串很长的背景，但是出题人觉得它实在太长了，所以就把它删掉了。\n\n「来吧，游戏开始了。」", "description": "有一个 $n$ 行 $m$ 列的棋盘。你要在这个棋盘上的所有格子**依次**放置一个棋子。\n\n每当你放置一个棋子，你将会获得一定的分数，获得的分数为**放置时**你放置的这个棋子旁边的格子中没有放置棋子的格子的个数。这里「旁边」指的是上、下、左、右的相邻格子。\n\n你想知道，在**按照最优策略决策放置棋子的顺序的情况下**，你最终得分总和的最大值。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，包含由空格隔开的两个正整数 $n,m$。", "outputFormat": "对于每组测试数据，输出一行，代表最大的分数。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$n, m \\leq 3$，$T \\leq 5$。\n- Subtask 2（20 points）：$n, m \\leq 4$，$T \\leq 10$。\n- Subtask 3（20 points）：$n=1$。\n- Subtask 4（20 points）：$n=m$。\n- Subtask 5（20 points）：无特殊限制。\n\n对于所有测试数据，$1 \\leq n, m \\leq 10^8$，$1 \\leq T \\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SiR-1」Checkmate", "background": "这里本来有一串很长的背景，但是出题人觉得它实在太长了，所以就把它删掉了。\n\n「来吧，游戏开始了。」", "description": "有一个 $n$ 行 $m$ 列的棋盘。你要在这个棋盘上的所有格子**依次**放置一个棋子。\n\n每当你放置一个棋子，你将会获得一定的分数，获得的分数为**放置时**你放置的这个棋子旁边的格子中没有放置棋子的格子的个数。这里「旁边」指的是上、下、左、右的相邻格子。\n\n你想知道，在**按照最优策略决策放置棋子的顺序的情况下**，你最终得分总和的最大值。", "inputFormat": "**本题包含多组测试数据。**\n\n输入的第一行包含一个正整数 $T$，表示测试数据组数。\n\n对于每组测试数据，包含由空格隔开的两个正整数 $n,m$。", "outputFormat": "对于每组测试数据，输出一行，代表最大的分数。", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（20 points）：$n, m \\leq 3$，$T \\leq 5$。\n- Subtask 2（20 points）：$n, m \\leq 4$，$T \\leq 10$。\n- Subtask 3（20 points）：$n=1$。\n- Subtask 4（20 points）：$n=m$。\n- Subtask 5（20 points）：无特殊限制。\n\n对于所有测试数据，$1 \\leq n, m \\leq 10^8$，$1 \\leq T \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9356", "type": "P", "difficulty": 6, "samples": [["5\n2\n((\n4\n())(\n5\n()(()\n5\n()()(\n15\n()())(())))()()", "4\n11\n16\n12\n241"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「SiR-1」Bracket", "background": "> Everything that kills me makes me feel alive.", "description": "Mirika 有一个长度为 $n$ 的括号序列 $s$。\n\n对于一个括号序列 $S$，Mirika 可以执行两种操作：\n\n- 变换：选择一个位置 $i$ 满足 $1 \\leq i \\leq \\lvert S \\rvert$，使得 $S$ 变为 $S_iS_{i+1}\\cdots S_{\\lvert S\\rvert}S_1S_2\\cdots S_{i-2}S_{i-1}$。\n- 插入：在这个序列的 **任意位置** 插入一个括号（左右括号均可）。\n\nMirika 定义括号序列 $S$ 的权值 $f(S)$ 为能将这个括号序列变成一个合法括号序列所需的最小操作数。\n\n其中，合法括号序列的定义为：\n\n+ 空串为 合法括号序列。\n+ 若 $\\texttt A$ 为 合法括号序列，则 $\\texttt{(A)}$ 为 合法括号序列。\n+ 若 $\\texttt A, \\texttt B$ 均为 合法括号序列，则 $\\texttt{AB}$ 也为 合法括号序列。\n\n现在 Mirika 想要求出：\n\n$\\sum_{l=1}^n \\sum_{r=l}^n f(s[l,r])$\n\n其中 $s[l,r]$ 表示由 $s_l,s_{l+1},\\cdots,s_r$ 形成的连续子序列。\n\n但是 Mirika 太菜了不会算，于是只好求助于你。", "inputFormat": "**本题每个测试点内有多组数据。**\n\n第一行一个正整数 $T$ 表示测试数据组数。\n\n对于每组数据，第一行一个正整数 $n$。\n\n第二行一个长度为 $n$ 的括号序列 $s$。", "outputFormat": "输出共 $T$ 行，第 $i$ 行一个整数表示第 $i$ 组测试数据的答案。", "hint": "### 样例解释\n\n对于 $s = \\texttt{())(}$：\n\n+ 考虑 $s[1,4]=\\texttt{())(}$。执行变换操作 $i=4$，有 $\\texttt{())(} \\Rightarrow \\texttt{(())}$，其中 $\\texttt{(())}$ 是合法括号序列，故 $f(s[1, 4]) = 1$。可以证明不存在更优的策略。\n+ 考虑 $s[2,4]=\\texttt{))(}$。执行变换操作 $i=2$，再在序列开头插入一个左括号，有 $\\texttt{))(} \\Rightarrow \\texttt{)()} \\Rightarrow \\texttt{()()}$，其中 $\\texttt{()()}$ 是合法括号序列，故 $f(s[2, 4]) = 2$。可以证明不存在更优的策略。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（15 pts）：$n \\leq 400$，$\\sum n \\leq 800$。\n+ Subtask 1（20 pts）：$n \\leq 2\\times 10^3$，$\\sum n \\leq 4\\times 10^3$。\n+ Subtask 2（5 pts）：$s$ 内不含有右括号。\n+ Subtask 3（10 pts）：对于所有整数 $1\\le i < n$，有 $s_i \\neq s_{i+1}$。\n+ Subtask 4（30 pts）：$n \\leq 2\\times 10^5$，$\\sum n \\leq 5\\times 10^5$。\n+ Subtask 5（20 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10000$，$1 \\leq n \\leq 2 \\times 10^6$，$1 \\leq \\sum n \\leq 2 \\times 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SiR-1」Bracket", "background": "> Everything that kills me makes me feel alive.", "description": "Mirika 有一个长度为 $n$ 的括号序列 $s$。\n\n对于一个括号序列 $S$，Mirika 可以执行两种操作：\n\n- 变换：选择一个位置 $i$ 满足 $1 \\leq i \\leq \\lvert S \\rvert$，使得 $S$ 变为 $S_iS_{i+1}\\cdots S_{\\lvert S\\rvert}S_1S_2\\cdots S_{i-2}S_{i-1}$。\n- 插入：在这个序列的 **任意位置** 插入一个括号（左右括号均可）。\n\nMirika 定义括号序列 $S$ 的权值 $f(S)$ 为能将这个括号序列变成一个合法括号序列所需的最小操作数。\n\n其中，合法括号序列的定义为：\n\n+ 空串为 合法括号序列。\n+ 若 $\\texttt A$ 为 合法括号序列，则 $\\texttt{(A)}$ 为 合法括号序列。\n+ 若 $\\texttt A, \\texttt B$ 均为 合法括号序列，则 $\\texttt{AB}$ 也为 合法括号序列。\n\n现在 Mirika 想要求出：\n\n$\\sum_{l=1}^n \\sum_{r=l}^n f(s[l,r])$\n\n其中 $s[l,r]$ 表示由 $s_l,s_{l+1},\\cdots,s_r$ 形成的连续子序列。\n\n但是 Mirika 太菜了不会算，于是只好求助于你。", "inputFormat": "**本题每个测试点内有多组数据。**\n\n第一行一个正整数 $T$ 表示测试数据组数。\n\n对于每组数据，第一行一个正整数 $n$。\n\n第二行一个长度为 $n$ 的括号序列 $s$。", "outputFormat": "输出共 $T$ 行，第 $i$ 行一个整数表示第 $i$ 组测试数据的答案。", "hint": "### 样例解释\n\n对于 $s = \\texttt{())(}$：\n\n+ 考虑 $s[1,4]=\\texttt{())(}$。执行变换操作 $i=4$，有 $\\texttt{())(} \\Rightarrow \\texttt{(())}$，其中 $\\texttt{(())}$ 是合法括号序列，故 $f(s[1, 4]) = 1$。可以证明不存在更优的策略。\n+ 考虑 $s[2,4]=\\texttt{))(}$。执行变换操作 $i=2$，再在序列开头插入一个左括号，有 $\\texttt{))(} \\Rightarrow \\texttt{)()} \\Rightarrow \\texttt{()()}$，其中 $\\texttt{()()}$ 是合法括号序列，故 $f(s[2, 4]) = 2$。可以证明不存在更优的策略。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（15 pts）：$n \\leq 400$，$\\sum n \\leq 800$。\n+ Subtask 1（20 pts）：$n \\leq 2\\times 10^3$，$\\sum n \\leq 4\\times 10^3$。\n+ Subtask 2（5 pts）：$s$ 内不含有右括号。\n+ Subtask 3（10 pts）：对于所有整数 $1\\le i < n$，有 $s_i \\neq s_{i+1}$。\n+ Subtask 4（30 pts）：$n \\leq 2\\times 10^5$，$\\sum n \\leq 5\\times 10^5$。\n+ Subtask 5（20 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10000$，$1 \\leq n \\leq 2 \\times 10^6$，$1 \\leq \\sum n \\leq 2 \\times 10^7$。", "locale": "zh-CN"}}}
{"pid": "P9357", "type": "P", "difficulty": 6, "samples": [["3 2\n1 3\n2 3", "40"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "递推", "洛谷原创", "O2优化", "组合数学", "洛谷月赛"], "title": "「SiR-1」Lighthouse", "background": "", "description": "给定一棵 $n$ 个点的树，每个点有权值 $w_i$，初始为 $0$。初始得分 $s=0$。\n\n进行 $m$ 次操作，每次操作选择一个点 $u$，给 $s$ 增加 $u$ 所在的同点权连通块的大小（即，假设只保留点权等于 $w_u$ 的点，和连接两个点权等于 $w_u$ 的点的边，对得分的贡献就是此时 $u$ 所在的连通块大小。注意这不会真的删去一部分树上的点和边），然后给 $w_u$ 增加 $1$。\n\n请对所有 $n^m$ 种操作方式，求它们的得分 $s$ 之和，对 $10^9+7$ 取模。", "inputFormat": "第一行两个正整数，表示 $n,m$。\n\n其后 $n-1$ 行每行两个正整数，表示一条边的两个端点 $u,v$。", "outputFormat": "输出一个整数，表示结果对 $10^9+7$ 取模后的结果。", "hint": "对于所有数据，满足 $1\\leq n\\leq 1000$，$1\\leq m\\leq 10^5$，$1\\leq u,v\\leq n$，保证输入是一棵树。\n\n- Subtask 0（5 pts）：$n,m\\le 7$。\n- Subtask 1（20 pts）：$n,m\\le 10$。\n- Subtask 2（15 pts）：$n,m\\le 50$。\n- Subtask 3（15 pts）：$n,m\\le 100$。\n- Subtask 4（15 pts）：$n\\le 50$。\n- Subtask 5（15 pts）：树是一条链。\n- Subtask 6（15 pts）：无特殊限制。\n\n本题同时开启子任务依赖。具体地：\n\n+ 对于子任务 $i(i \\in [1, 3])$，依赖于子任务 $0 \\sim (i -  1)$；\n+ 对于子任务 $4$，依赖于子任务 $0 \\sim 2$；\n+ 对于子任务 $6$，依赖于子任务 $0 \\sim 5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「SiR-1」Lighthouse", "background": "", "description": "给定一棵 $n$ 个点的树，每个点有权值 $w_i$，初始为 $0$。初始得分 $s=0$。\n\n进行 $m$ 次操作，每次操作选择一个点 $u$，给 $s$ 增加 $u$ 所在的同点权连通块的大小（即，假设只保留点权等于 $w_u$ 的点，和连接两个点权等于 $w_u$ 的点的边，对得分的贡献就是此时 $u$ 所在的连通块大小。注意这不会真的删去一部分树上的点和边），然后给 $w_u$ 增加 $1$。\n\n请对所有 $n^m$ 种操作方式，求它们的得分 $s$ 之和，对 $10^9+7$ 取模。", "inputFormat": "第一行两个正整数，表示 $n,m$。\n\n其后 $n-1$ 行每行两个正整数，表示一条边的两个端点 $u,v$。", "outputFormat": "输出一个整数，表示结果对 $10^9+7$ 取模后的结果。", "hint": "对于所有数据，满足 $1\\leq n\\leq 1000$，$1\\leq m\\leq 10^5$，$1\\leq u,v\\leq n$，保证输入是一棵树。\n\n- Subtask 0（5 pts）：$n,m\\le 7$。\n- Subtask 1（20 pts）：$n,m\\le 10$。\n- Subtask 2（15 pts）：$n,m\\le 50$。\n- Subtask 3（15 pts）：$n,m\\le 100$。\n- Subtask 4（15 pts）：$n\\le 50$。\n- Subtask 5（15 pts）：树是一条链。\n- Subtask 6（15 pts）：无特殊限制。\n\n本题同时开启子任务依赖。具体地：\n\n+ 对于子任务 $i(i \\in [1, 3])$，依赖于子任务 $0 \\sim (i -  1)$；\n+ 对于子任务 $4$，依赖于子任务 $0 \\sim 2$；\n+ 对于子任务 $6$，依赖于子任务 $0 \\sim 5$。", "locale": "zh-CN"}}}
{"pid": "P9358", "type": "P", "difficulty": 6, "samples": [["3 4 13\n2 2\n1 1 3\n2 1\n2 2\n2 3\n1 2 4\n2 1\n2 2\n2 3\n1 2 1\n2 1\n2 2\n2 3\n", "2\n2\n1\n3\n3\n1\n2\n3\n2\n1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["平衡树", "2022", "O2优化", "动态树 LCT", "ICPC", "西安"], "title": "[ICPC 2022 Xi'an R] Bridge", "background": "", "description": "There are $n$ countries numbered from $1$ to $n$ in Erathia. Each country can be regarded as a chain with $m+1$ nodes numbered from $1$ to $m+1$. Initially, node $(a, b)$ is connected with node $(a, b + 1)$ by a street where node $(a, b)$ denotes the $b$-th node of the $a$-th country. There are no bridges between any two countries at first. \n\nYou need to process $q$ queries of the following two types.\n\n- $1\\ a\\ b$ ($1\\leq a < n, 1\\leq b\\leq m$). Build a bridge between node $(a, b)$ and node $(a + 1, b)$. It is guranteed that at any time, **each node is connected with at most one bridge**.\n- $2\\ a$ ($1\\leq a\\leq n$). A hero will walk through Erathia. This hero starts from $(a, 1)$. If the hero is at $(x, y)$ and there is a unvisited bridge connected to him, he passes it, or he goes to $(x, y + 1)$. Once he arrived the $(m+1)$-th node of any conutry, he stops. Please note that 'unvisited bridge' is **independently** judged for each query. \n\nYour task is to print which country the hero is in at last for the second kind of query. It can be proved that the hero's route is always unique under these constraints.\n", "inputFormat": "The first line contains three integers $n$, $m$ and $q$ ($1 \\leq n, m, q \\leq 10 ^ 5$).\n\nEach of the following $q$ lines represents a query with format described above.", "outputFormat": "For each query of type $2$, output a line with an integer representing the answer.\n", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem A.\n\n**Author**: MonkeyKing.", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Bridge", "background": "", "description": "There are $n$ countries numbered from $1$ to $n$ in Erathia. Each country can be regarded as a chain with $m+1$ nodes numbered from $1$ to $m+1$. Initially, node $(a, b)$ is connected with node $(a, b + 1)$ by a street where node $(a, b)$ denotes the $b$-th node of the $a$-th country. There are no bridges between any two countries at first. \n\nYou need to process $q$ queries of the following two types.\n\n- $1\\ a\\ b$ ($1\\leq a < n, 1\\leq b\\leq m$). Build a bridge between node $(a, b)$ and node $(a + 1, b)$. It is guranteed that at any time, **each node is connected with at most one bridge**.\n- $2\\ a$ ($1\\leq a\\leq n$). A hero will walk through Erathia. This hero starts from $(a, 1)$. If the hero is at $(x, y)$ and there is a unvisited bridge connected to him, he passes it, or he goes to $(x, y + 1)$. Once he arrived the $(m+1)$-th node of any conutry, he stops. Please note that 'unvisited bridge' is **independently** judged for each query. \n\nYour task is to print which country the hero is in at last for the second kind of query. It can be proved that the hero's route is always unique under these constraints.\n", "inputFormat": "The first line contains three integers $n$, $m$ and $q$ ($1 \\leq n, m, q \\leq 10 ^ 5$).\n\nEach of the following $q$ lines represents a query with format described above.", "outputFormat": "For each query of type $2$, output a line with an integer representing the answer.\n", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem A.\n\n**Author**: MonkeyKing.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Bridge", "background": "", "description": "Erathia 大陆上有 $n$ 个国家，从 $1$ 到 $n$ 编号。每个国家可以看成由 $m + 1$ 个结点组成的链，结点从 $1$ 到 $m + 1$ 编号。结点 $(a, b)$ 和 $(a, b + 1)$ 由一条街道连接，其中 $(a, b)$ 表示国家 $a$ 的第 $b$ 个结点。一开始，国家之间没有桥。\n\n你需要处理 $q$ 个操作：\n\n- $1\\ a\\ b$（$1\\leq a < n$，$1\\leq b\\leq m$）：在 $(a, b)$ 和 $(a + 1, b)$ 之间建造一座桥。**保证每个结点最多和一座桥相连**。\n- $2\\ a$（$1\\leq a\\leq n$）：一名英雄走过 Erathia 大陆。他从 $(a, 1)$ 出发。如果这名英雄当前在结点 $(x, y)$ 且有一座未被访问过的桥与之连接，那么他会走过这个桥到达桥的另一端，否则他会走到 $(x, y + 1)$。一旦他到达某个国家的第 $m + 1$ 个结点，他就会停下来。注意两个询问之间的 “未被访问过的桥” 是独立的。\n\n你的任务是对每个操作 $2$ 求出英雄最终所在的国家。\n\n$1\\leq n, m, q\\leq 10 ^ 5$。", "inputFormat": "第一行三个整数 $n, m, q$。", "outputFormat": "对于每个操作 $2$，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9359", "type": "P", "difficulty": 5, "samples": [["3 4 2 1\n.***\n*..*\n**..\n", "4\n"], ["3 4 1 2\n.***\n*..*\n**..\n", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "三分", "网络流", "O2优化", "二分图", "ICPC", "西安"], "title": "[ICPC 2022 Xi'an R] Cells Coloring", "background": "", "description": "You are given an $n \\times m$ grid. Some of the cells are obstacles, the others are empty. Choose a non-negative integer $k$ and color all empty cells with $k+1$ colors $0, 1, 2, \\ldots k$. You can not color two cells in the same row or same column with the same **non-zero** color. \n\nYou are given two non-negative integers $c$ and $d$. For a coloring plan, define $z$ as the number of the cells with color $0$. Define the cost of the plan is $ck+dz$.\n\nFind the minimum cost.", "inputFormat": "The first line contains four integers $n$, $m$ ($1\\leq n, m\\leq 250$), $c$ and $d$ ($0\\leq c, d\\leq 10 ^ 9$).\n\nThe $i$-th line of the next $n$ lines contains a string of $m$ characters. The $j$-th character is `*` if the cell in the $i$-th row and the $j$-th column is an obstacle. The $j$-th character is `.` if the cell in the $i$-th row and the $j$-th column is empty.", "outputFormat": "Output a line with a single number, representing the answer.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem B.\n\n**Author**: csy2005.", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Cells Coloring", "background": "", "description": "You are given an $n \\times m$ grid. Some of the cells are obstacles, the others are empty. Choose a non-negative integer $k$ and color all empty cells with $k+1$ colors $0, 1, 2, \\ldots k$. You can not color two cells in the same row or same column with the same **non-zero** color. \n\nYou are given two non-negative integers $c$ and $d$. For a coloring plan, define $z$ as the number of the cells with color $0$. Define the cost of the plan is $ck+dz$.\n\nFind the minimum cost.", "inputFormat": "The first line contains four integers $n$, $m$ ($1\\leq n, m\\leq 250$), $c$ and $d$ ($0\\leq c, d\\leq 10 ^ 9$).\n\nThe $i$-th line of the next $n$ lines contains a string of $m$ characters. The $j$-th character is `*` if the cell in the $i$-th row and the $j$-th column is an obstacle. The $j$-th character is `.` if the cell in the $i$-th row and the $j$-th column is empty.", "outputFormat": "Output a line with a single number, representing the answer.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem B.\n\n**Author**: csy2005.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Cells Coloring", "background": "", "description": "给定一个 $n\\times m$ 的网格。一些格子是障碍，其它格子是空的。选择一个非负整数 $k$，并用 $k + 1$ 种颜色 $0, 1, \\ldots, k$ 给空格子染色。不能有同一行或同一列的两个格子被染成了相同的 **非零** 颜色。\n\n给定两个非负整数 $c, d$。对于一组染色方案，定义 $z$ 表示染成颜色 $0$ 的格子数量，则该方案的代价为 $ck + dz$。\n\n求出最小代价。\n\n$1\\leq n, m \\leq 250$，$0\\leq c, d\\leq 10 ^ 9$。", "inputFormat": "第一行四个整数 $n, m, c, d$。\n\n接下来 $n$ 行，每行一个长度为 $m$ 的字符串。字符串的第 $j$ 个字符为 `*` 表示第 $i$ 行第 $j$ 列的格子为障碍，为 `.` 表示为空。", "outputFormat": "输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9360", "type": "P", "difficulty": 2, "samples": [["5\n1 1 1\n2 3 3\n9 9 9\n3 26 47\n1064 822 1048576\n", "1\n7\n45\n44\n21860\n"]], "limits": {"time": [1000, 1000], "memory": [524288, 524288]}, "tags": ["2022", "O2优化", "ICPC", "西安"], "title": "[ICPC 2022 Xi'an R] Clone Ranran", "background": "", "description": "Ranran needs to prepare a contest! A contest is made of $c$ problems, and Ranran can do one of the following two things:\n\n- Clone himself in $a$ minutes. That is, after $a$ minutes, there will be one more Ranran.\n- Prepare a problem in $b$ minutes. That is, after $b$ minutes, there will be one more problem.\n\nNote that a cloned Ranran can also do the two things above. A Ranran cannot do the two things at the same time.\n\nRanran wants to prepare the contest as fast as possible. But he is very lazy, so he asks you to find the minimum number of minutes to prepare the contest.\n\nYou need to answer $T$ queries independently.", "inputFormat": "The first line contains an integer $T$ ($1\\leq T\\leq 10 ^ 5$).\n\nEach of the next $T$ lines contains three integers $a$, $b$ and $c$ ($1\\leq a, b, c\\leq 10 ^ 9$), representing a query.", "outputFormat": "For each test case, output a line with a single integer representing the answer.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem C.\n\n**Author**: MagicSpark.", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Clone Ranran", "background": "", "description": "Ranran needs to prepare a contest! A contest is made of $c$ problems, and Ranran can do one of the following two things:\n\n- Clone himself in $a$ minutes. That is, after $a$ minutes, there will be one more Ranran.\n- Prepare a problem in $b$ minutes. That is, after $b$ minutes, there will be one more problem.\n\nNote that a cloned Ranran can also do the two things above. A Ranran cannot do the two things at the same time.\n\nRanran wants to prepare the contest as fast as possible. But he is very lazy, so he asks you to find the minimum number of minutes to prepare the contest.\n\nYou need to answer $T$ queries independently.", "inputFormat": "The first line contains an integer $T$ ($1\\leq T\\leq 10 ^ 5$).\n\nEach of the next $T$ lines contains three integers $a$, $b$ and $c$ ($1\\leq a, b, c\\leq 10 ^ 9$), representing a query.", "outputFormat": "For each test case, output a line with a single integer representing the answer.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem C.\n\n**Author**: MagicSpark.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Clone Ranran", "background": "", "description": "然然需要准备一场有 $c$ 个问题的比赛！他可以进行两种操作：\n\n- 在 $a$ 分钟内克隆一个自己；\n- 在 $b$ 分钟内准备好一个问题。\n\n克隆的然然也可以进行上述操作，但然然不能同时进行这两个操作。\n\n然然希望尽快准备好比赛，但是他很懒，所以他让你求出准备比赛的最小分钟数。\n\n共有 $T$ 组数据。\n\n$1\\leq T\\leq 10 ^ 5$，$1\\leq a, b, c\\leq 10 ^ 9$。", "inputFormat": "第一行一个整数 $T$。\n\n接下来 $T$ 行，每行三个整数 $a, b, c$。", "outputFormat": "对于每组数据，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9361", "type": "P", "difficulty": 6, "samples": [["6 2\n1 3 2 5 4 6\n2 1 4 3 6 5\n4\n1 4\n5 3\n6 1\n5 2\n", "1\n2\n5\n3\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["倍增", "2022", "O2优化", "ICPC", "西安"], "title": "[ICPC 2022 Xi'an R] Contests", "background": "", "description": "There are $n$ contestants and they take part in $m$ contests. You are given the ranklist of each contest. The ranklist of the $k$-th contest is a sequence $a_k$, indicating that the $a_{k, i}$-th contestant's rank is $i$.\n\nSolarPea and PolarSea are two of the $n$ contestants. SolarPea wants to prove that he is stronger than PolarSea.\n\nDefine $x$ is $l$-stronger than $y$, if and only if there exists a sequence $b$ of length $l + 1$, such that $b_1 = x$, $b_{l + 1} = y$, and for all $1\\leq i\\leq l$, $b_i$ has a smaller rank than $b_{i + 1}$ in at least one contest.\n\nThere are $q$ queries. In the $i$-th query, SolarPea is contestant $x$ and PolarSea is contestant $y$. Please find the minimum positive number $l$ such that SolarPea is $l$-stronger than PolarSea.", "inputFormat": "The first line contains two integers $n$ ($2\\leq n\\leq 10 ^ 5$) and $m$ ($1\\leq m\\leq 5$).\n\nThe $i$-th of the next $m$ lines contains $n$ intergers $a_{i, 1}, a_{i, 2}, \\ldots, a_{i, n}$. It is guaranteed that $a_i$ is a permutaion of $1,2,\\ldots,n$.\n\nThe next line contains an integer $q$ ($1\\leq q\\leq 10 ^ 5$).\n\nEach of the next $q$ lines contains two integers $x$ and $y$ ($1 \\le x,y \\le n, x \\neq y$), representing a query.", "outputFormat": "For each query, output a number $l$ representing the answer. If there is no legal $l$, output $-1$.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem D.\n\n**Author**: csy2005.", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Contests", "background": "", "description": "There are $n$ contestants and they take part in $m$ contests. You are given the ranklist of each contest. The ranklist of the $k$-th contest is a sequence $a_k$, indicating that the $a_{k, i}$-th contestant's rank is $i$.\n\nSolarPea and PolarSea are two of the $n$ contestants. SolarPea wants to prove that he is stronger than PolarSea.\n\nDefine $x$ is $l$-stronger than $y$, if and only if there exists a sequence $b$ of length $l + 1$, such that $b_1 = x$, $b_{l + 1} = y$, and for all $1\\leq i\\leq l$, $b_i$ has a smaller rank than $b_{i + 1}$ in at least one contest.\n\nThere are $q$ queries. In the $i$-th query, SolarPea is contestant $x$ and PolarSea is contestant $y$. Please find the minimum positive number $l$ such that SolarPea is $l$-stronger than PolarSea.", "inputFormat": "The first line contains two integers $n$ ($2\\leq n\\leq 10 ^ 5$) and $m$ ($1\\leq m\\leq 5$).\n\nThe $i$-th of the next $m$ lines contains $n$ intergers $a_{i, 1}, a_{i, 2}, \\ldots, a_{i, n}$. It is guaranteed that $a_i$ is a permutaion of $1,2,\\ldots,n$.\n\nThe next line contains an integer $q$ ($1\\leq q\\leq 10 ^ 5$).\n\nEach of the next $q$ lines contains two integers $x$ and $y$ ($1 \\le x,y \\le n, x \\neq y$), representing a query.", "outputFormat": "For each query, output a number $l$ representing the answer. If there is no legal $l$, output $-1$.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem D.\n\n**Author**: csy2005.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Contests", "background": "", "description": "$n$ 个选手参加了 $m$ 场比赛。给出每场比赛的排行榜。第 $k$ 场比赛的排行榜是一个 $n$ 阶排列 $a_k$，表示选手 $a_{k, i}$ 的排名为 $i$。\n\nSolarPea 和 PolarSea 也是选手。SolarPea 想要证明他比 PolarSea 更强。\n\n定义选手 $x$「$l$ - 强于」选手 $y$，当且仅当存在长度为 $l + 1$ 的序列，满足 $b_1 = x$，$b_{l + 1} = y$，且对于所有 $1\\leq i\\leq l$，均有 $b_i$ 在至少一场比赛中排名小于 $b_{i + 1}$。\n\n给出 $q$ 组询问。在第 $i$ 组询问中，SolarPea 是选手 $x$，PolarSea 是选手 $y$。求出最小的正整数 $l$，使得 $x$「$l$ - 强于」$y$。\n\n$2\\leq n\\leq 10 ^ 5$，$1\\leq q\\leq 10 ^ 5$，$1\\leq m\\leq 5$，$1\\leq x, y\\leq n$，$x\\neq y$。", "inputFormat": "第一行两个整数 $n, m$。\n\n接下来 $m$ 行，每行 $n$ 个整数，表示第 $i$ 场比赛的排行榜。保证 $a_i$ 是 $1, 2, \\ldots, n$ 的排列。\n\n接下来一行一个整数 $q$。\n\n接下来 $q$ 行，每行两个整数 $x, y$ 表示一组询问。", "outputFormat": "对于每组询问，输出一行一个整数表示答案。若不存在这样的 $l$，输出 $-1$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9362", "type": "P", "difficulty": 4, "samples": [["10\n1 2\n1 3\n1 4\n1 5\n2 3\n2 4\n2 5\n3 4\n3 5\n4 5\n", "3\n3\n4\n5\n3\n4\n5\n4\n5\n5\n"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "2022", "O2优化", "数位 DP", "ICPC", "西安"], "title": "[ICPC 2022 Xi'an R] Find Maximum", "background": "", "description": "We define a function $f(x)$ over all non-negative integer $x$ as follows:\n$$\nf(x) =\n\\begin{cases}\n1 & (x = 0) \\\\\nf(\\frac{x}{3}) + 1 & (x > 0\\land x\\bmod3 = 0) \\\\\nf(x - 1) + 1  & (x > 0\\land x\\bmod 3\\neq 0)\n\\end{cases}\n$$\nCalculate $\\max_{x = l} ^ r f(x)$.\n\nYou need to answer $T$ queries independently.", "inputFormat": "The first line contains a single integer $T$ ($1\\leq T\\leq 10 ^ 4$).\n\nEach of the next $T$ lines contains two integers $l$ and $r$ ($1\\leq l\\leq r\\leq 10 ^ {18}$), representing a query.", "outputFormat": "Output $T$ lines. The $i$-th line contains a single integer, representing the answer to the $i$-th query.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem E.\n\n**Author**: MagicSpark.", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Find Maximum", "background": "", "description": "We define a function $f(x)$ over all non-negative integer $x$ as follows:\n$$\nf(x) =\n\\begin{cases}\n1 & (x = 0) \\\\\nf(\\frac{x}{3}) + 1 & (x > 0\\land x\\bmod3 = 0) \\\\\nf(x - 1) + 1  & (x > 0\\land x\\bmod 3\\neq 0)\n\\end{cases}\n$$\nCalculate $\\max_{x = l} ^ r f(x)$.\n\nYou need to answer $T$ queries independently.", "inputFormat": "The first line contains a single integer $T$ ($1\\leq T\\leq 10 ^ 4$).\n\nEach of the next $T$ lines contains two integers $l$ and $r$ ($1\\leq l\\leq r\\leq 10 ^ {18}$), representing a query.", "outputFormat": "Output $T$ lines. The $i$-th line contains a single integer, representing the answer to the $i$-th query.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem E.\n\n**Author**: MagicSpark.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Find Maximum", "background": "", "description": "定义在所有非负整数 $x$ 上的函数 $f(x)$ 如下：\n\n$$\nf(x) =\n\\begin{cases}\n1 & (x = 0) \\\\\nf(\\frac{x}{3}) + 1 & (x > 0\\land x\\bmod3 = 0) \\\\\nf(x - 1) + 1  & (x > 0\\land x\\bmod 3\\neq 0)\n\\end{cases}\n$$\n\n计算 $\\max_{x = l} ^ r f(x)$。\n\n共有 $T$ 组数据。\n\n$1\\leq T\\leq 10 ^ 4$，$1\\leq l\\leq r\\leq 10 ^ {18}$。", "inputFormat": "第一行一个整数 $T$。\n\n接下来 $T$ 行，每行两个整数 $l, r$ 表示一组询问。", "outputFormat": "对于每组询问，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9363", "type": "P", "difficulty": 3, "samples": [["3 1 3\nMMM\nMMM\nFFF\n", "9\n"], ["3 3 1\nABC\nDEF\nGHI\n", "9\n"], ["10 438 438\nWWW\nSOU\nPUN\nETC\nOME\nCFI\nNAL\nGOO\nDHO\nTEL\n", "12264\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "ICPC", "西安"], "title": "[ICPC 2022 Xi'an R] Hotel", "background": "", "description": "You are doing volunteer work for a programming competition in an ancient hotel. Unfortunately, the hotel provides no phone signal or tap water since it can be dated back to the Qin Dynasty, and you have to assign the contestants to the hotel rooms manually instead of using the internet apps. Fortunately, the hotel has sufficient rooms, and you have taken a computer that lets you do some computation locally.\n\nThere are $n$ teams, each with exactly $3$ contestants. There are $2$ types of rooms in the hotel, the single room and double room, which can receive at most $1$ and $2$ contestants, respectively. To avoid embarrassing contestants, if two contestants are assigned to a double room, they must come from the same team and have the same gender.\n\nThe cost of each room of the same type is the same, but different types may have different costs. Your program needs to calculate the minimum price the host has to pay. The teams are waiting in the registration hall now, and the competition finance officer relies on you to save costs and make a fortune by the residual value. Be quick, or the finance officer will sue you for violating his reputation!", "inputFormat": "The first line of input contains three integers $n$, $c_1$ and $c_2$ ($1 \\leq n, c_1, c_2 \\leq 1\\,000$), denoting the number of teams, the cost of a single room and a double room respectively.\n\nIn the following $n$ lines, each line contains a string $S$ with exactly $3$ uppercase English letters. The letters in a string denote the genders of the contestants in one team and will be represented by $\\texttt{A}$ to $\\texttt{Z}$, respecting the diversity of human beings.", "outputFormat": "The output should contain a single integer, denoting the minimum cost of hotel allocation for contestants.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem F.\n\n**Author**: fstqwq.", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Hotel", "background": "", "description": "You are doing volunteer work for a programming competition in an ancient hotel. Unfortunately, the hotel provides no phone signal or tap water since it can be dated back to the Qin Dynasty, and you have to assign the contestants to the hotel rooms manually instead of using the internet apps. Fortunately, the hotel has sufficient rooms, and you have taken a computer that lets you do some computation locally.\n\nThere are $n$ teams, each with exactly $3$ contestants. There are $2$ types of rooms in the hotel, the single room and double room, which can receive at most $1$ and $2$ contestants, respectively. To avoid embarrassing contestants, if two contestants are assigned to a double room, they must come from the same team and have the same gender.\n\nThe cost of each room of the same type is the same, but different types may have different costs. Your program needs to calculate the minimum price the host has to pay. The teams are waiting in the registration hall now, and the competition finance officer relies on you to save costs and make a fortune by the residual value. Be quick, or the finance officer will sue you for violating his reputation!", "inputFormat": "The first line of input contains three integers $n$, $c_1$ and $c_2$ ($1 \\leq n, c_1, c_2 \\leq 1\\,000$), denoting the number of teams, the cost of a single room and a double room respectively.\n\nIn the following $n$ lines, each line contains a string $S$ with exactly $3$ uppercase English letters. The letters in a string denote the genders of the contestants in one team and will be represented by $\\texttt{A}$ to $\\texttt{Z}$, respecting the diversity of human beings.", "outputFormat": "The output should contain a single integer, denoting the minimum cost of hotel allocation for contestants.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem F.\n\n**Author**: fstqwq.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Hotel", "background": "", "description": "你正在一个古代的酒店里为一场编程竞赛做志愿工作。酒店的历史可以追溯到秦朝，所以酒店不提供手机信号和自来水。你无法使用网络软件，不得不手动为参赛者分配房间。幸运的是，酒店拥有充足的房间，并且你有一台电脑帮你做一些计算。\n\n共有 $n$ 个队伍，每个队伍恰有 $3$ 名选手。酒店有两种房间，单人间和双人间，分别可以容纳 $1$ 和 $2$ 名选手。为了避免使选手尴尬，如果两名选手分配到了同一个双人间，他们必须来自同一个队伍，并拥有相同的性别。\n\n相同种类的房间的花费相同，但不同种类的房间花费可能不同。你需要计算主办方最少需要花多少钱。选手们已经在登记厅等候多时，而竞赛财务经理依靠你来节省开支，私吞剩下来的钱发大财。你需要尽快完成任务，否则财务经理将起诉你侵犯了他的名誉权！\n\n$1\\leq n, c_1, c_2\\leq 1000$。", "inputFormat": "第一行三个整数 $n, c_1, c_2$，分别表示队伍数量，单人间单价和双人间单价。\n\n接下来的 $n$ 行，每行一个长度为 $3$ 的字符串 $S$ 表示一个队伍的参赛队员的性别。为了尊重人类的多样性，$S$ 可能包含从 $\\texttt A$ 到 $\\texttt Z$ 的所有大写字母。", "outputFormat": "输出一行一个整数表示分配房间的最小代价。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9364", "type": "P", "difficulty": 4, "samples": [["4\na\nt\nb\nab\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "ICPC", "西安"], "title": "[ICPC 2022 Xi'an R] Perfect Word", "background": "", "description": "You are given $n$ strings and required to find the length of the longest *perfect word*.\n\nA string $t$ is called a *perfect word*, if and only if every non-empty substring of $t$ appears in the given strings.\n\nA string $s$ is called a substring of $t$ if and only if it can be obtained by removing several (possibly zero) characters from the beginning or end of $t$.\n", "inputFormat": "The first line contains a single integer $n$ ($1 \\leq n \\leq 10 ^ 5$).\n\nEach of the next $n$ lines contains a string consisting of lowercase English letters.\n\nIt is guaranteed that the total length of the given strings is no more than $10 ^ 5$.\n", "outputFormat": "Output an integer, representing the length of the longest perfect word.\n", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem G.\n\n**Author**: MonkeyKing.", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Perfect Word", "background": "", "description": "You are given $n$ strings and required to find the length of the longest *perfect word*.\n\nA string $t$ is called a *perfect word*, if and only if every non-empty substring of $t$ appears in the given strings.\n\nA string $s$ is called a substring of $t$ if and only if it can be obtained by removing several (possibly zero) characters from the beginning or end of $t$.\n", "inputFormat": "The first line contains a single integer $n$ ($1 \\leq n \\leq 10 ^ 5$).\n\nEach of the next $n$ lines contains a string consisting of lowercase English letters.\n\nIt is guaranteed that the total length of the given strings is no more than $10 ^ 5$.\n", "outputFormat": "Output an integer, representing the length of the longest perfect word.\n", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem G.\n\n**Author**: MonkeyKing.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Perfect Word", "background": "", "description": "给定 $n$ 个字符串，你需要找到最长的「完美单词」。\n\n字符串 $t$ 称为「完美单词」，当且仅当它的所有非空子串都出现在给定的字符串中。\n\n字符串 $s$ 称为 $t$ 的子串，当且仅当 $s$ 可由 $t$ 在开头和结尾分别删去零个或若干个字符得到。\n\n$1\\leq n\\leq 10 ^ 5$，字符串仅由小写字母组成，且总长不超过 $10 ^ 5$。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，每行一个字符串。", "outputFormat": "输出一行一个整数表示最长的「完美单词」的长度。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9365", "type": "P", "difficulty": 6, "samples": [["4\n4 3 0 1\n1 0 1 0\n4 1 0 3\n1 0 1 0\n8 0 2 6\n1 5 5 7 1 5 5 7\n8 0 0 8\n1 5 5 7 1 5 5 7\n", "0010\n&&^&\n0 0 1 1\n0011\n^^&^\n0 1 0 1\n10100000\n^^|^^^^|\n1 5 5 7 1 5 5 7\n00000000\n^^^^^^^^\n1 5 5 7 1 5 5 7\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "Special Judge", "O2优化", "构造", "ICPC", "分类讨论", "西安"], "title": "[ICPC 2022 Xi'an R] Power of Two", "background": "", "description": "$$\n2 ^ {2 ^ {2 ^ {2 ^ {2 ^ {2 ^ {2 ^ {2 ^ {2 ^ {2}}}}}}}}}\n$$\n\nSolarPea likes blowing up PolarSea's blog by sending power tower of $2$. As the tower is too high, the stack of the web page overflows. So the blog no longer works.\n\nNow SolarPea has $n$ powers of two $a_1, a_2, \\ldots, a_n$, $x$ bitwise AND operators, $y$ bitwise OR operators and $z$ bitwise XOR operators. It is guaranteed that $n = x + y + z$.\n\nSolarpea wants to construct an arithmetic expression with these numbers and operators. Formally, define $x_0 = 0$ and $x_i = x_{i - 1}\\ \\mathrm{op}_i\\ b_i$, where $b$ is a permutation of $a$, which means we can rearrange $a$ to get $b$, and $\\mathrm{op}_i$ is one of the three types of bitwise operators above. Then $x_n$ is the result of the expresstion.\n\nThe larger the expression, the more likely it is to make PolarSea's blog unable to work. SolarPea wants you to help him to find the largest $x_n$ and construct such an expression. If there are multiple solutions, output any of them.\n\nYou need to process $T$ test cases independently.", "inputFormat": "The first line contains a single integer $T$ ($1\\leq T \\leq 10 ^ 5$), denoting the number of test cases.\n\nFor each test case, the first line contains four integers $n$, $x$, $y$ and $z$ ($0\\leq x, y, z\\leq n \\leq 65\\,536, n = x + y + z$). The next line contains $n$ integers $c_1, c_2, \\ldots, c_n$ ($0\\leq c_i < n$), where $a_i = 2 ^ {c_i}$.\n\nIt is guaranteed that the sum of $n$ over all test cases is no more than $1\\,048\\,576$.", "outputFormat": "For each test case, output three lines.\n\nThe first line contains a $01$-string of length $n$, representing the binary form of the largest $x_n$.\n\nThe next line contains a single $1$-indexed string $\\mathrm{op}$ of length $n$, where $\\mathrm{op}_i$ represents the $i$-th operator. Here, we denote AND as `&` (ASCII 38), OR as `|` (ASCII 124), and XOR as `^` (ASCII 94). You should guarantee that there is exactly $x$ AND operators, $y$ OR operators and $z$ XOR operators.\n\nThe third line contains $n$ integers $d_1, d_2, \\ldots, d_n$, the $i$-th of which representing the logarithm of $b_i$ with base $2$. That is, $d$ is a permutaion of $c$.\n\nIf there are multiple solutions, output any of them.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem H.\n\n**Author**: Alex_Wei.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g2frgx9s.png)", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Power of Two", "background": "", "description": "$$\n2 ^ {2 ^ {2 ^ {2 ^ {2 ^ {2 ^ {2 ^ {2 ^ {2 ^ {2}}}}}}}}}\n$$\n\nSolarPea likes blowing up PolarSea's blog by sending power tower of $2$. As the tower is too high, the stack of the web page overflows. So the blog no longer works.\n\nNow SolarPea has $n$ powers of two $a_1, a_2, \\ldots, a_n$, $x$ bitwise AND operators, $y$ bitwise OR operators and $z$ bitwise XOR operators. It is guaranteed that $n = x + y + z$.\n\nSolarpea wants to construct an arithmetic expression with these numbers and operators. Formally, define $x_0 = 0$ and $x_i = x_{i - 1}\\ \\mathrm{op}_i\\ b_i$, where $b$ is a permutation of $a$, which means we can rearrange $a$ to get $b$, and $\\mathrm{op}_i$ is one of the three types of bitwise operators above. Then $x_n$ is the result of the expresstion.\n\nThe larger the expression, the more likely it is to make PolarSea's blog unable to work. SolarPea wants you to help him to find the largest $x_n$ and construct such an expression. If there are multiple solutions, output any of them.\n\nYou need to process $T$ test cases independently.", "inputFormat": "The first line contains a single integer $T$ ($1\\leq T \\leq 10 ^ 5$), denoting the number of test cases.\n\nFor each test case, the first line contains four integers $n$, $x$, $y$ and $z$ ($0\\leq x, y, z\\leq n \\leq 65\\,536, n = x + y + z$). The next line contains $n$ integers $c_1, c_2, \\ldots, c_n$ ($0\\leq c_i < n$), where $a_i = 2 ^ {c_i}$.\n\nIt is guaranteed that the sum of $n$ over all test cases is no more than $1\\,048\\,576$.", "outputFormat": "For each test case, output three lines.\n\nThe first line contains a $01$-string of length $n$, representing the binary form of the largest $x_n$.\n\nThe next line contains a single $1$-indexed string $\\mathrm{op}$ of length $n$, where $\\mathrm{op}_i$ represents the $i$-th operator. Here, we denote AND as `&` (ASCII 38), OR as `|` (ASCII 124), and XOR as `^` (ASCII 94). You should guarantee that there is exactly $x$ AND operators, $y$ OR operators and $z$ XOR operators.\n\nThe third line contains $n$ integers $d_1, d_2, \\ldots, d_n$, the $i$-th of which representing the logarithm of $b_i$ with base $2$. That is, $d$ is a permutaion of $c$.\n\nIf there are multiple solutions, output any of them.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem H.\n\n**Author**: Alex_Wei.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g2frgx9s.png)", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Power of Two", "background": "", "description": "SolarPea 喜欢通过发送电力塔来炸毁 PolarSea 的博客 $2$。由于塔太高，网页的堆栈溢出。所以博客已经不能用了。  \n\n现在 SolarPea 拥有两个 $a_1、a_2、ldots、a_n$、$x$ 位 AND 运算符、$y$ 位 OR 运算符和 $z$ 位 XOR 运算符的 $n$ 次方。保证 $n = x + y + z$。  \n\nSolarpea 希望使用这些数字和运算符构造一个算术表达式。正式地定义 $x_0 = 0$ 和 $x_i = x_{i - 1}\\ \\mathrm{op}_i\\ b_i$，其中 $b$ 是 $a$ 的排列，这意味着我们可以重新排列 $a$ 来得到 $b$，而 $\\mathrm{op}_i$ 是上述三种类型的按位运算符之一。那么 $x_n$ 就是表达式的结果。\n\n表达式越大，就越有可能使 PolarSea 的博客无法工作。SolarPea 希望你帮他找到最大的 $x_n$ 并构造这样的表达式。如果有多个解决方案，则输出其中任何一个。\n\n您需要独立处理 $T$ 个测试用例。", "inputFormat": "第一行包含一个整数 $T $ （$1\\leq T \\leq 10 ^ 5$），表示测试用例的数量。  \n\n对于每个测试用例，第一行包含四个整数 $n$， $x$， $y$ 和 $z$ （$0\\leq x, y, z\\leq n \\leq 65\\,536, n = x + y + z$）。下一行包含 $n$ 个整数 $c_1, c_2, \\ldots, c_n$ ($0\\leq c_i < n$)，其中 $a_i = 2 ^ {c_i}$。\n\n保证所有测试用例的 $n $ 之和不超过 $1\\,048\\,576$。", "outputFormat": "对于每个测试用例，输出 3 行。  \n\n第一行包含一个长度为 $n$ 的 $01$ 字符串，表示最大 $x_n$ 的二进制形式。  \n\n下一行包含一个长度为 $n$ 的 $1$ 索引字符串 $\\mathrm{op}$，其中 $\\mathrm{op}_i$表示第 $i$ 个运算符。在这里，我们将 AND 表示为 `&` （ASCII 38），OR 表示为 `|` （ASCII 124），将 XOR 表示为 `^` （ASCII 94）。您应该保证正好有 $x $ AND 运算符、$y$ OR 运算符和 $z$ XOR 运算符。\n\n第三行包含 $n$ 个整数 $d_1, d_2, \\ldots, d_n$，其中第 $i$ 个代表 $b_i$ 的对数，以 $2$ 为底。也就是说，$d$ 是 $c$ 的排列。\n\n如果有多个解决方案，则输出其中任何一个。\n\n## 输入输出样例\n无", "hint": "**来源**：2022 ICPC 亚洲习安区域赛问题 H.  \n**作者**： Alex_Wei.", "locale": "zh-CN"}}}
{"pid": "P9366", "type": "P", "difficulty": 7, "samples": [["2 5 3\n0 0 1 2\n1 1 2 1\n0 0 2 2\n", "30\n64\n0\n"], ["5 20 5\n0 0 5 5\n1 1 4 4\n2 2 3 3\n2 3 2 3\n1 2 5 2\n", "615136704\n443203969\n899931333\n464755094\n679729107\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2022", "O2优化", "ICPC", "西安"], "title": "[ICPC 2022 Xi'an R] Square Grid", "background": "", "description": "Given a square grid, its lattice points labeled from $(0, 0)$ to $(n, n)$, and a number $t$.\n\nYou need to answer $q$ queries in this format: given $A = (x_0, y_0)$ and $B = (x_1, y_1)$, how many ways are there to move from $A$ to $B$ in exactly $t$ steps so that in each step you move from a lattice point to one of its neighbors (up, down, left, right). Calculate the answer modulo $998\\,244\\,353$.", "inputFormat": "The first line contains three integers $n$ ($1 \\leq n \\leq 10^5$), $t$ ($1 \\leq t \\leq 10^9$) and $q$ ($1 \\leq q \\leq 3 \\times 10^5$).\n\nEach of the following $q$ lines contains four integers $x_0$, $y_0$, $x_1$ and $y_1$ ($0 \\leq x_0, y_0, x_1, y_1 \\leq n$), representing a query. ", "outputFormat": "For each query, output a line containing one integer, representing the answer to the query modulo $998\\,244\\,353$.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem I.\n\n**Author**: djq_cpp.", "locale": "en", "translations": {"en": {"title": "[ICPC 2022 Xi'an R] Square Grid", "background": "", "description": "Given a square grid, its lattice points labeled from $(0, 0)$ to $(n, n)$, and a number $t$.\n\nYou need to answer $q$ queries in this format: given $A = (x_0, y_0)$ and $B = (x_1, y_1)$, how many ways are there to move from $A$ to $B$ in exactly $t$ steps so that in each step you move from a lattice point to one of its neighbors (up, down, left, right). Calculate the answer modulo $998\\,244\\,353$.", "inputFormat": "The first line contains three integers $n$ ($1 \\leq n \\leq 10^5$), $t$ ($1 \\leq t \\leq 10^9$) and $q$ ($1 \\leq q \\leq 3 \\times 10^5$).\n\nEach of the following $q$ lines contains four integers $x_0$, $y_0$, $x_1$ and $y_1$ ($0 \\leq x_0, y_0, x_1, y_1 \\leq n$), representing a query. ", "outputFormat": "For each query, output a line containing one integer, representing the answer to the query modulo $998\\,244\\,353$.", "hint": "**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem I.\n\n**Author**: djq_cpp.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2022 Xi'an R] Square Grid", "background": "", "description": "给定一个方形网格，其格点标记从 $(0, 0)$ 到 $(n, n)$，以及一个数字 $t$。\n\n你需要回答 $q$ 个查询，每个查询的格式为：给定 $A = (x_0, y_0)$ 和 $B = (x_1, y_1)$，有多少种方法可以在恰好 $t$ 步内从 $A$ 移动到 $B$，使得每一步都从一个格点移动到其相邻的格点（上、下、左、右）。计算答案对 $998\\,244\\,353$ 取模。", "inputFormat": "第一行包含三个整数 $n$ ($1 \\leq n \\leq 10^5$)，$t$ ($1 \\leq t \\leq 10^9$) 和 $q$ ($1 \\leq q \\leq 3 \\times 10^5$)。\n\n接下来的 $q$ 行中的每一行包含四个整数 $x_0$，$y_0$，$x_1$ 和 $y_1$ ($0 \\leq x_0, y_0, x_1, y_1 \\leq n$)，表示一个查询。", "outputFormat": "对于每个查询，输出一行包含一个整数，表示该查询的答案对 $998\\,244\\,353$ 取模。", "hint": "**来源**：2022 年 ICPC 亚洲西安区域赛问题 I。\n\n**作者**：djq_cpp。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
