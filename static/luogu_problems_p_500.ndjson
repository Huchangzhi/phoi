{"pid": "P11143", "type": "P", "difficulty": 2, "samples": [["3 3\n1\n1 3", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "博弈论", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SFMOI Round I」Strange Cake Game", "background": "小 $\\mathcal{W}$ 和 小 $\\mathcal{M}$ 在 CF 庄园里分蛋糕。\n", "description": "\n有一块面积为 $n\\times m$ 的矩形蛋糕。记其左上角顶点为 $(0,0)$，右下角顶点为 $(n,m)$，右上角顶点为 $(0,m)$。\n\n蛋糕上分布着 $k$ 块巧克力，第 $i$ 块的位置为 $(x_i-0.5,y_i-0.5)$。**一个点上可能有不止一块巧克力。**\n\n小 M 和 小 W 要切蛋糕。蛋糕刀起初在 $(0,0)$，小 W 先手，轮流移动蛋糕刀。设蛋糕刀在 $(x,y)$，则它可以被移动到 $(x,y+1)$ 或 $(x+1,y)$。\n\n在若干步后，蛋糕会被切割轨迹完全分成两个部分——右上角的部分归小 W，左下角的部分归小 M。小 W 和小 M 都想吃到最多的巧克力，请帮他们计算：如果双方都按照最优策略行动，小 W 能分到几块巧克力。\n\n如下是蛋糕的示例和一种可能的切蛋糕的方式。\n\n![蛋糕示例](https://cdn.luogu.com.cn/upload/image_hosting/er9wuv91.png?x-oss-process=image/resize,m_lfit,h_500)\n![切蛋糕示例](https://cdn.luogu.com.cn/upload/image_hosting/9o6ntvlb.png?x-oss-process=image/resize,m_lfit,h_500)", "inputFormat": "第一行，两个正整数 $n,m$，含义见题面。\n\n第二行，一个整数 $k$ ，表示巧克力块数。\n\n接下来 $k$ 行，每行两个正整数 $x_i,y_i$，表示第 $i$ 块巧克力的坐标为 $(x_i-0.5,y_i-0.5)$。\n\n注意：第 $i$ 块巧克力的坐标为 $(x_i-0.5,y_i-0.5)$。**一个格子上可能有多块巧克力。**", "outputFormat": "输出一个整数，代表小 W 最多能拿到的巧克力块数。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n=m=1$；\n- Subtask 2（10 pts）：$1 \\le n \\times m \\le 60$；\n- Subtask 3（15 pts）：$1 \\le n \\times m \\le 10^5$；\n- Subtask 4（20 pts）：$k=1$；\n- Subtask 5（50 pts）：无特殊限制。\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $0 \\le k \\le 2 \\times 10^5$；\n- $1 \\le n,m \\le 10^{18}$；\n- $1 \\le x_i \\le n$，$1 \\le y_i \\le m$。\n", "locale": "zh-CN", "translations": {"en": {"title": "Strange Cake Game", "background": "", "description": "There is a rectangular cake with an area of $n\\times m$. Its upper-left vertex is represented as $(0,0)$, and the bottom-right vertex is represented as $(n,m)$.\n\nThere are $k$ chocolates on the cake. The position of the $i$-th chocolate is $(x_i-0.5,y_i-0.5)$. **There may be more than one chocolate at the same position.**\n\nLittle M and Little W are going to cut the cake with a cake knife. At the very beginning, the knife is positioned at $(0,0)$. Little M and Little W are taking turns to move the knife, with Little W going first. Let's say the knife is at $(x,y)$, and it can be moved to $(x,y+1)$ or $(x+1,y)$ in a turn.  \n\nAfter several turns, the cake will be cut into two parts — the upper-right part belongs to Little W, and the other part belongs to Little W. Both Little W and Little M want to have the most chocolates, so please help them determine: if both of them move the knife optimally, how many chocolates Little W will have.\n\n\nThe following picture shows a cake and a possible way of cutting the cake.\n\n![Example: cake](https://cdn.luogu.com.cn/upload/image_hosting/er9wuv91.png?x-oss-process=image/resize,m_lfit,h_500)\n![Example: cutting the cake](https://cdn.luogu.com.cn/upload/image_hosting/s37ugr7i.png?x-oss-process=image/resize,m_lfit,h_500)", "inputFormat": "The first line contains two integers $n,m$ — the position of the bottom-right vertex of the cake.\n\nThe following line contains $k$ — number of the chocolates.\n\nNext $k$ lines, the $i$-th line contains two integers $x_i,y_i$ — the position of $i$-th chocolate is $(x_i-0.5,y_i-0.5)$.   \n\n\nNote that **There may be more than one chocolate at the same position.**", "outputFormat": "A single integer — the number of chocolates that Little W will have if they move the knife optimally.", "hint": "#### Subtasks and Contraints\n\n- Subtask 1 (5 pts): $n=m=1$;\n- Subtask 2 (10 pts): $1 \\le n \\times m \\le 60$;\n- Subtask 3 (15 pts): $1 \\le n \\times m \\le 10^5$;\n- Subtask 4 (20 pts): $k=1$;\n- Subtask 5 (50 pts): No further constraints.\n\n\nIt is guaranteed that\n\n- $0 \\le k \\le 2 \\times 10^5$;\n- $1 \\le n,m \\le 10^{18}$;\n- $1 \\le x_i \\le n$, $1 \\le y_i \\le m$.", "locale": "en"}, "zh-CN": {"title": "「SFMOI Round I」Strange Cake Game", "background": "小 $\\mathcal{W}$ 和 小 $\\mathcal{M}$ 在 CF 庄园里分蛋糕。\n", "description": "\n有一块面积为 $n\\times m$ 的矩形蛋糕。记其左上角顶点为 $(0,0)$，右下角顶点为 $(n,m)$，右上角顶点为 $(0,m)$。\n\n蛋糕上分布着 $k$ 块巧克力，第 $i$ 块的位置为 $(x_i-0.5,y_i-0.5)$。**一个点上可能有不止一块巧克力。**\n\n小 M 和 小 W 要切蛋糕。蛋糕刀起初在 $(0,0)$，小 W 先手，轮流移动蛋糕刀。设蛋糕刀在 $(x,y)$，则它可以被移动到 $(x,y+1)$ 或 $(x+1,y)$。\n\n在若干步后，蛋糕会被切割轨迹完全分成两个部分——右上角的部分归小 W，左下角的部分归小 M。小 W 和小 M 都想吃到最多的巧克力，请帮他们计算：如果双方都按照最优策略行动，小 W 能分到几块巧克力。\n\n如下是蛋糕的示例和一种可能的切蛋糕的方式。\n\n![蛋糕示例](https://cdn.luogu.com.cn/upload/image_hosting/er9wuv91.png?x-oss-process=image/resize,m_lfit,h_500)\n![切蛋糕示例](https://cdn.luogu.com.cn/upload/image_hosting/9o6ntvlb.png?x-oss-process=image/resize,m_lfit,h_500)", "inputFormat": "第一行，两个正整数 $n,m$，含义见题面。\n\n第二行，一个整数 $k$ ，表示巧克力块数。\n\n接下来 $k$ 行，每行两个正整数 $x_i,y_i$，表示第 $i$ 块巧克力的坐标为 $(x_i-0.5,y_i-0.5)$。\n\n注意：第 $i$ 块巧克力的坐标为 $(x_i-0.5,y_i-0.5)$。**一个格子上可能有多块巧克力。**", "outputFormat": "输出一个整数，代表小 W 最多能拿到的巧克力块数。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$n=m=1$；\n- Subtask 2（10 pts）：$1 \\le n \\times m \\le 60$；\n- Subtask 3（15 pts）：$1 \\le n \\times m \\le 10^5$；\n- Subtask 4（20 pts）：$k=1$；\n- Subtask 5（50 pts）：无特殊限制。\n\n\n对于 $100\\%$ 的数据，保证：\n\n- $0 \\le k \\le 2 \\times 10^5$；\n- $1 \\le n,m \\le 10^{18}$；\n- $1 \\le x_i \\le n$，$1 \\le y_i \\le m$。\n", "locale": "zh-CN"}}}
{"pid": "P11144", "type": "P", "difficulty": 3, "samples": [["1\n\n1\n\n2", "\n? 2\n\n? 3\n\n! 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "洛谷原创", "交互题", "Special Judge", "O2优化", "不定方程", "洛谷月赛"], "title": "「SFMOI Round I」Strange Madoka Game", "background": "> いつも君の側にいるから / 无论何时我都与你同在 \\\n> 儚すぎて / 世界如此虚幻 \\\n> 消えて行きそうな世界 / 似乎随时随地都会消失 \\\n> だけど君がいる / 然而只要有你 \\\n> それだけで守りたいと思った / 我就心甘情愿将它守护", "description": "\n**本题和 B2 是不同的问题，请分别仔细阅读两题题面。**\n\n**这是一道交互题。**\n\n**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\n圆和焰在玩游戏。\n\n圆在心中想了一个非负整数 $m$，让焰猜出 $m$ 的值。当然，圆不会为难焰，所以 $\\textcolor{red}{0}\\le m\\le 10^{17}$。圆不会作弊，也就是说，**圆不会悄悄更换想好的数字。**\n\n焰可以问圆：对于**正**整数 $x$，$m\\bmod x$ 的值是多少。焰需要用最少的询问次数来猜出 $m$ 的值。（为了得到全部分数，最多只能使用 $2$ 次询问。）\n\n圆一共和焰玩了 $T$ 次游戏。然而，焰的数学很差，于是她找来了你，来帮她猜出这 $T$ 次游戏的答案。\n\n\n\n**形式化地**：有一个隐藏的非负整数 $m\\in [\\textcolor{red}{0},10^{17}]$。每次询问给定**正**整数 $x$，回答 $m\\bmod x$。用最少的询问次数找出 $m$。共有 $T$ 组测试数据。$m$ 的数值在事先确定，不会根据询问变化，也就是说，**交互库是非适应性的**。\n\n【实现细节】\n\n对于每个测试点，输入一行一个正整数 $T$，表示游戏次数。\n\n对于每组测试数据，你可以用以下的格式发起一次询问：\n\n- $\\texttt{? }x$：询问 $m\\bmod x$ 的值。你需要保证 $x$ 是**正**整数，且 $x \\in \\textcolor{red} {[1,4\\times 10^8]}$。\n\n\t从标准输入流读入一个整数表示答案。特别地，若整数是 $\\texttt{-1}$，你的程序已经被判定为 $\\texttt{Wrong Answer}$，此时你需要立刻终止程序。\n\n你可以用以下的格式回答答案：\n\n- $\\texttt{! }m$：回答 $m$ 的值。\n\n在发起询问后，需要刷新缓冲区，否则可能导致 TLE。\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。 特别地，利用 `std::endl` 来换行也会刷新缓冲区。\n- 在 Pascal 中，使用 `flush(output)`。  \n- 在 Python 中，使用 `stdout.flush()`。  \n- 对于其它语言，可自行查阅文档。", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le T\\le 100$，$m$ 为非负整数，$\\textcolor{red}{0}\\le m\\le 10^{17}$。\n\n#### 评分方式\n\n记单个测试点中，你的询问次数的最大值为 $Q$。则得分 $\\mathrm{score}$ 如下所示：\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [81,+\\infty) \\\\\n10, & Q\\in [11,81) \\\\\n25, & Q\\in [3,11) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\n本题得分为所有测试点得分的最小值。\n\n本题数据点的范围是非严格单调递增的。", "locale": "zh-CN", "translations": {"en": {"title": "Strange Madoka Game", "background": "", "description": "**This problem is different from B2. You had better read both statements.**\n\n**This is an interactive problem.**\n\n**Hint:** We provide a formalized description of this problem at the end of the statement.\n\nMadoka and Homura are playing a game.\n\nMadoka has thought of a non-negative integer $m$, and Homura need to determine its value. It is guaranteed that $\\textcolor{red}{0}\\le m\\le 10^{17}$. Also, Madoka doesn't cheat, that is, **Madoka wouldn't change the value of $m$** during the whole game.\n\nHomura can ask Madoka: for a **positive** integer $x$, what is the value of $m\\bmod x$. Homura aims to determine the value of $m$ with the number of queries as small as possible. (In order to get full points, you need to solve this problem within $2$ queries.)\n\nThe game will be played for $T$ rounds. However, Homura is poor at math. Thus, she turns to you.\n\n**Formally,** there exists a hidden non-negative integer $m\\in [\\textcolor{red}{0},10^{17}]$. In each query, a **positive** integer $x$ is given, and it returns $m \\bmod x$. \n\nFind $m$ with the least number of queries. There are $T$ test cases.\n\nThe value of $m$ is read from input file and does not change according to queries. That is, **the interactor is non-adaptive.**\n\n### Implementation Details\n\nInput a positive integer $T$ first, which stands for the number of the rounds.\n\nFor each test case:\n\n- Output a single line containing $\\texttt{? }x$ to make a query. Then, an integer indicating $m\\bmod x$ is available. \n\n\t$x$ is a **positive** integer should be guaranteed, and $x$ must fall in $ \\textcolor{red} {[1,4\\times 10^8]}$.\n    \n    If $x=-1$ instead of the answer, it means that the query limit is excceeded, or the query is invalid. The solution should quit immediately.\n    \n- Output a single line containing $\\texttt{! }m$ to respond to the guess. \n\nAfter outputing the queries, do not forget to output a newline character and flush the output buffer. Otherwise, you will receive the verdict TLE. To flush the buffer, use: \n\n- `fflush(stdout)` or `cout.flush()` in C++;\n- `flush(output)` in Pascal;\n- `stdout.flush()` in Python;\n- refer to the documentation for other languages. ", "inputFormat": "See [Implementation Details].", "outputFormat": "See [Implementation Details].", "hint": "\n#### Constraints\n\nIt is guaranteed that \n- $1\\le T\\le 100$;\n- $m$ is a non-negative number, and $\\textcolor{red}{0}\\le m\\le 10^{17}$。\n\n#### Scoring\n\nLet $Q$ be the maximum queries used in each test. The $\\mathrm{score}$ is calculated as following:\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [81,+\\infty) \\\\\n10, & Q\\in [11,81) \\\\\n25, & Q\\in [3,11) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\nThe score of this problem is the minimum score among all tests.\n", "locale": "en"}, "zh-CN": {"title": "「SFMOI Round I」Strange Madoka Game", "background": "> いつも君の側にいるから / 无论何时我都与你同在 \\\n> 儚すぎて / 世界如此虚幻 \\\n> 消えて行きそうな世界 / 似乎随时随地都会消失 \\\n> だけど君がいる / 然而只要有你 \\\n> それだけで守りたいと思った / 我就心甘情愿将它守护", "description": "\n**本题和 B2 是不同的问题，请分别仔细阅读两题题面。**\n\n**这是一道交互题。**\n\n**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\n圆和焰在玩游戏。\n\n圆在心中想了一个非负整数 $m$，让焰猜出 $m$ 的值。当然，圆不会为难焰，所以 $\\textcolor{red}{0}\\le m\\le 10^{17}$。圆不会作弊，也就是说，**圆不会悄悄更换想好的数字。**\n\n焰可以问圆：对于**正**整数 $x$，$m\\bmod x$ 的值是多少。焰需要用最少的询问次数来猜出 $m$ 的值。（为了得到全部分数，最多只能使用 $2$ 次询问。）\n\n圆一共和焰玩了 $T$ 次游戏。然而，焰的数学很差，于是她找来了你，来帮她猜出这 $T$ 次游戏的答案。\n\n\n\n**形式化地**：有一个隐藏的非负整数 $m\\in [\\textcolor{red}{0},10^{17}]$。每次询问给定**正**整数 $x$，回答 $m\\bmod x$。用最少的询问次数找出 $m$。共有 $T$ 组测试数据。$m$ 的数值在事先确定，不会根据询问变化，也就是说，**交互库是非适应性的**。\n\n【实现细节】\n\n对于每个测试点，输入一行一个正整数 $T$，表示游戏次数。\n\n对于每组测试数据，你可以用以下的格式发起一次询问：\n\n- $\\texttt{? }x$：询问 $m\\bmod x$ 的值。你需要保证 $x$ 是**正**整数，且 $x \\in \\textcolor{red} {[1,4\\times 10^8]}$。\n\n\t从标准输入流读入一个整数表示答案。特别地，若整数是 $\\texttt{-1}$，你的程序已经被判定为 $\\texttt{Wrong Answer}$，此时你需要立刻终止程序。\n\n你可以用以下的格式回答答案：\n\n- $\\texttt{! }m$：回答 $m$ 的值。\n\n在发起询问后，需要刷新缓冲区，否则可能导致 TLE。\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。 特别地，利用 `std::endl` 来换行也会刷新缓冲区。\n- 在 Pascal 中，使用 `flush(output)`。  \n- 在 Python 中，使用 `stdout.flush()`。  \n- 对于其它语言，可自行查阅文档。", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le T\\le 100$，$m$ 为非负整数，$\\textcolor{red}{0}\\le m\\le 10^{17}$。\n\n#### 评分方式\n\n记单个测试点中，你的询问次数的最大值为 $Q$。则得分 $\\mathrm{score}$ 如下所示：\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [81,+\\infty) \\\\\n10, & Q\\in [11,81) \\\\\n25, & Q\\in [3,11) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\n本题得分为所有测试点得分的最小值。\n\n本题数据点的范围是非严格单调递增的。", "locale": "zh-CN"}}}
{"pid": "P11145", "type": "P", "difficulty": 3, "samples": [["1\n\n0\n\n1", "\n? 5\n\n? 1\n\n! 5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「SFMOI Round I」Strange Homura Game", "background": "> 伝えたいコトバは たったひとつ / 想要传达的言语 唯有一个 \\\n> キミがいたから 強くなれた / 因有你在 我变坚强了 \\\n> 2 人ならどんな空も飛べるね / 只要两人一起就能任意飞翔 \\\n> キミをいつでも 信じてるから / 因为一直都 坚信着你 \\\n> ずっとずっと夢を見ていよう / 能同做此梦不复醒吧", "description": "\n**本题和 B1 是不同的问题，请分别仔细阅读两题题面。**\n\n**这是一道交互题。**\n\n\n**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\n焰和圆在玩游戏。\n\n焰在心中想了一个正整数 $m$，让圆猜出 $m$ 的值。当然，焰不会为难圆，所以 $\\textcolor{red}{2}\\le m\\le 10^{17}$。焰不会作弊，也就是说，**焰不会悄悄更换想好的数字。**\n\n圆可以问焰：对于**非负**整数 $x$，$x\\bmod m$ 的值是多少。圆需要用最少的询问次数来猜出 $m$ 的值。（为了得到全部分数，最多只能使用 $2$ 次询问。）\n\n焰一共和圆玩了 $T$ 次游戏。圆的数学很好，在 $\\varepsilon $ 秒内就秒了这题，但是她在军训，于是她找来了你，来帮她猜出这 $T$ 次游戏的答案。\n\n\n\n**形式化地**：有一个隐藏的正整数 $m\\in [\\textcolor{red}{2},10^{17}]$。每次询问给定**非负**整数 $x$，回答 $x\\bmod m$。用最少的询问次数找出 $m$。共有 $T$ 组测试数据。$m$ 的数值在事先确定，不会根据询问变化，也就是说，**交互库是非适应性的**。\n\n【实现细节】\n\n对于每个测试点，输入一行一个正整数 $T$，表示游戏次数。\n\n对于每组测试数据，你可以用以下的格式发起一次询问：\n\n- $\\texttt{? }x$：询问 $x\\bmod m$ 的值。你需要保证 $x$ 是**非负**整数，且 $x \\in \\textcolor{red}{ [0,10^{18}]}$。\n\t\n    从标准输入流读入一个整数表示答案。特别地，若整数是 $\\texttt{-1}$，你的程序已经被判定为 $\\texttt{Wrong Answer}$，此时你需要立刻终止程序。\n\n你可以用以下的格式回答答案：\n\n- $\\texttt{! }m$：回答 $m$ 的值。\n\n在发起询问后，需要刷新缓冲区，否则可能导致 TLE。\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。 特别地，利用 `std::endl` 来换行也会刷新缓冲区。\n- 在 Pascal 中，使用 `flush(output)`。  \n- 在 Python 中，使用 `stdout.flush()`。  \n- 对于其它语言，可自行查阅文档。\n", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le T\\le 100$，$m$ 为正整数，$\\textcolor{red}{2}\\le m\\le 10^{17}$。\n\n#### 评分方式\n\n记单个测试点中，你的询问次数的最大值为 $Q$。则得分 $\\mathrm{score}$ 如下所示：\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [101,+\\infty) \\\\\n30, & Q\\in [3,101) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\n本题得分为所有测试点得分的最小值。", "locale": "zh-CN", "translations": {"en": {"title": "Strange Homura Game", "background": "", "description": "\n**This problem is differ from B1. You had better read both statements.**\n\n**This is an interactive problem.**\n\n**Hint:** We provide a formalized description of this problem at the end of the statement.\n\nHomura and Madoka are playing a game.\n\nHomura has thought of a positive integer $m$, and Madoka need to determine its value.. It is guaranteed that $\\textcolor{red}{2}\\le m\\le 10^{17}$. Also, Homura doesn't cheat, that is, **Madoka wouldn't change the value of $m$** during the whole game.\n\nMadoka can ask Homura: for a **non-negative** integer $x$, what is the value of $x\\bmod m$. Madoka aimed to determine the value of $m$ with the number of queries as small as possible. (In order to get full points, you need to solve this problem within $2$ queries.)\n\nThe game will be played for $T$ rounds. However, Madoka is at the military training, so she turned to you.\n\n**Formally,** there exists a hidden positive integer $m\\in [\\textcolor{red}{2},10^{17}]$. In each query, a **non-negative** integer $x$ is given, and it returns $x \\bmod m$. \n\nFind $m$ with the least number of queries. There are $T$ test cases.\n\nThe value of $m$ is read from input file and won't change according to queries. That is, **the interactor is non-adaptive.**\n\n### Implementation Details\n\nInput a positive integer $T$ first, which stands for the number of the rounds.\n\nFor each test case:\n\n- Output a single line containing $\\texttt{? }x$ to make a query. Then, an integer indicating $x\\bmod m$ is available. \n\n\t$x$ is a **positive** integer should be guaranteed, and $x$ must fall in $ \\textcolor{red} {[0,10^{18}]}$.\n    \n    If $x=-1$ instead of the answer, it means that the query limit is excceeded, or the query is invalid. The solution should quit immediately.\n    \n- Output a single line containing $\\texttt{! }m$ to respond to the guess. \n\nAfter outputting the queries, do not forget to output a newline character and flush the output buffer. Otherwise, you will receive the verdict TLE. To flush the buffer, use: \n\n- `fflush(stdout)` or `cout.flush()` in C++;\n- `flush(output)` in Pascal;\n- `stdout.flush()` in Python;\n- refer to the documentation for other languages.", "inputFormat": "See [Implementation Details].", "outputFormat": "See [Implementation Details].", "hint": "\n#### Constraints\n\nIt is guaranteed that \n- $1\\le T\\le 100$;\n- $m$ is a positive ineteger, and $\\textcolor{red}{2}\\le m\\le 10^{17}$。\n\n#### Scoring\n\nLet $Q$ be the maximum queries used in each test. The $\\mathrm{score}$ is calculated as following:\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [101,+\\infty) \\\\\n30, & Q\\in [3,101) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\nThe score of the task is the minimum score of each test.", "locale": "en"}, "zh-CN": {"title": "「SFMOI Round I」Strange Homura Game", "background": "> 伝えたいコトバは たったひとつ / 想要传达的言语 唯有一个 \\\n> キミがいたから 強くなれた / 因有你在 我变坚强了 \\\n> 2 人ならどんな空も飛べるね / 只要两人一起就能任意飞翔 \\\n> キミをいつでも 信じてるから / 因为一直都 坚信着你 \\\n> ずっとずっと夢を見ていよう / 能同做此梦不复醒吧", "description": "\n**本题和 B1 是不同的问题，请分别仔细阅读两题题面。**\n\n**这是一道交互题。**\n\n\n**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\n焰和圆在玩游戏。\n\n焰在心中想了一个正整数 $m$，让圆猜出 $m$ 的值。当然，焰不会为难圆，所以 $\\textcolor{red}{2}\\le m\\le 10^{17}$。焰不会作弊，也就是说，**焰不会悄悄更换想好的数字。**\n\n圆可以问焰：对于**非负**整数 $x$，$x\\bmod m$ 的值是多少。圆需要用最少的询问次数来猜出 $m$ 的值。（为了得到全部分数，最多只能使用 $2$ 次询问。）\n\n焰一共和圆玩了 $T$ 次游戏。圆的数学很好，在 $\\varepsilon $ 秒内就秒了这题，但是她在军训，于是她找来了你，来帮她猜出这 $T$ 次游戏的答案。\n\n\n\n**形式化地**：有一个隐藏的正整数 $m\\in [\\textcolor{red}{2},10^{17}]$。每次询问给定**非负**整数 $x$，回答 $x\\bmod m$。用最少的询问次数找出 $m$。共有 $T$ 组测试数据。$m$ 的数值在事先确定，不会根据询问变化，也就是说，**交互库是非适应性的**。\n\n【实现细节】\n\n对于每个测试点，输入一行一个正整数 $T$，表示游戏次数。\n\n对于每组测试数据，你可以用以下的格式发起一次询问：\n\n- $\\texttt{? }x$：询问 $x\\bmod m$ 的值。你需要保证 $x$ 是**非负**整数，且 $x \\in \\textcolor{red}{ [0,10^{18}]}$。\n\t\n    从标准输入流读入一个整数表示答案。特别地，若整数是 $\\texttt{-1}$，你的程序已经被判定为 $\\texttt{Wrong Answer}$，此时你需要立刻终止程序。\n\n你可以用以下的格式回答答案：\n\n- $\\texttt{! }m$：回答 $m$ 的值。\n\n在发起询问后，需要刷新缓冲区，否则可能导致 TLE。\n\n- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。 特别地，利用 `std::endl` 来换行也会刷新缓冲区。\n- 在 Pascal 中，使用 `flush(output)`。  \n- 在 Python 中，使用 `stdout.flush()`。  \n- 对于其它语言，可自行查阅文档。\n", "inputFormat": "见【实现细节】。", "outputFormat": "见【实现细节】。", "hint": "\n#### 数据范围\n\n对于 $100\\%$ 的数据，保证 $1\\le T\\le 100$，$m$ 为正整数，$\\textcolor{red}{2}\\le m\\le 10^{17}$。\n\n#### 评分方式\n\n记单个测试点中，你的询问次数的最大值为 $Q$。则得分 $\\mathrm{score}$ 如下所示：\n\n$$\n\\begin{aligned}\n\\mathrm{score}=\\begin{cases}\n0, & Q\\in [101,+\\infty) \\\\\n30, & Q\\in [3,101) \\\\\n50, & Q\\in [0,3) \\\\\n\\end{cases}\n\\end{aligned}\n$$\n\n本题得分为所有测试点得分的最小值。", "locale": "zh-CN"}}}
{"pid": "P11146", "type": "P", "difficulty": 5, "samples": [["10 5\n0101011001\n0101001110\n5 10\n2 6\n1 10\n6 6\n3 4", "0101011110"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "并查集", "洛谷原创", "O2优化", "图论建模", "线性基", "随机化", "洛谷月赛"], "title": "「SFMOI Round I」Strange Train Game", "background": "SFM 团队又断网了，于是玩起了 Mini Metro，结果发现游戏更新了，列车要自己组装，于是有了这题。\n\n", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nSFM 号列车由 $n$ 节车厢组成，编号为 $1\\sim n$。每节车厢有一个舒适度 $a_i\\in \\{0,1\\}$，$0$ 代表不舒适，$1$ 代表舒适。管理组想要让舒适的车厢的编号尽量小，也就是说，让 $a$ 的字典序最大。\n\n为此，管理组运来了一辆 $n$ 节车厢的备用车，舒适度表示为 $b_i\\in \\{0,1\\}$。共有 $m$ 个可进行的操作，第 $i$ 个操作的操作参数为 $l_i,r_i$，表示 $\\forall l_i\\le k\\le r_i$，交换 $a_k,b_k$。\n\n可以**从小到大依次**决定是否执行每个操作，但是一共有 $2^m$ 种方案，于是，管理组找来了你，帮忙选出一种最优的方案，最大化 $a$ 的字典序。只需要输出最终得到的 $a$ 即可。\n\n**形式化地**：给定长度为 $n$ 的 $01$ 串 $a,b$，给定 $2m$ 个正整数 $l_i,r_i$。对于 $i=1,2,\\cdots,m$，**依次**执行以下操作：\n- 选择是否执行第 $i$ 次操作。\n    - 如果执行，则对于 $k=l_i,l_{i}+1,\\cdots,r_i$，交换 $a_k,b_k$。\n\n最大化 $a$ 的字典序并输出最终的结果。\n", "inputFormat": "第一行，两个正整数 $n,m$，表示字符串的长度和操作次数。\n\n第二行，一个长度为 $n$ 的 $01$ 串 $a$。\n\n第三行，一个长度为 $n$ 的 $01$ 串 $b$。\n\n接下来 $m$ 行，每行两个正整数 $l_i,r_i$，描述第 $i$ 个操作。\n", "outputFormat": "输出一行长度为 $n$ 的 $01$ 串，表示最优操作后的 $a$。\n", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1\\le n,m\\le 20$；\n- Subtask 2（30 pts）：$l_i$ 互不相同，$a_i \\ne b_i$；\n- Subtask 3（30 pts）：$1 \\le n ,m \\le 10^3$；\n- Subtask 4（20 pts）：无限制；\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le 2\\times 10^5$；\n- $1\\le l_i\\le r_i\\le n$。", "locale": "zh-CN", "translations": {"en": {"title": "Strange Train Game", "background": "", "description": "**Hint**: A brief and formalized statement is provided at the end of the description.\n\nA train called SFM consists of $n$ carriages, numbered from $1$ to $n$. Carriage indexed $i$ has **comfort** $a_i\\in \\{0,1\\}$, where $1$ stands for comfortable, and $0$ stands for uncomfortable. We want to minimize the indices of comfortable carriages, in other words, to **maximize** the lexicographical order of $a$.\n\nIn order to do that, we have another train consists also $n$ carriages, whose comfortable numbers are denoted by $b_i\\in \\{0,1\\}$. There are $m$ operations available, the $i$-th operation has two parameters $l_i,r_i$, which denotes swapping $a_k$ and $b_k$ for every $k\\in [l_i,r_i]$.\n\nYou can choose to perform or not to perform the operations **in a given order**. There are $2^m$ ways to do that, so we turned to you to choose the best one to maximize the lexicographical order of $a$. You only  need to output the final result.\n\n**Formally**: Two binary string $a,b$ are given, whose length are both $n$. Also, $2m$ integers $l_i,r_i$ is given. For $i=1,2,\\ldots,m$, by this order, excecute the precedure:\n\n- Choose to perform $i$-th operation or not.\n\t- If so, for $k=l_i,l_i+1,\\cdots,r_i$, swap $a_k$ and $b_k$.\n\nYou need to maximize the lexicographical order of $a$ and output the final result.\n", "inputFormat": "The first line contains two integers $n,m$—the number of carriages and the number of operations, respectively.\n\nThe second line contains a binary string $a$, where $a_i$ is the comfort of the train SFM.\n\nThe second line contains a binary string $b$, where $b_i$ is the comfort of another train.\n\nThe following $m$ lines, the $i$-th line contains two integers $l_i,r_i$, to describe the $i$-th operation.\n", "outputFormat": "Output one line containing a binary string—the best result after the operations.", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1 (20 pts): $1\\le n,m\\le 20$;\n- Subtask 2 (30 pts)：$l_i$ are pairwise distinct, $a_i \\ne b_i$;\n- Subtask 3 (30 pts)：$1 \\le n ,m \\le 10^3$;\n- Subtask 4 (20 pts)：No further constraints.\n\nIt is guaranteed that \n\n- $1\\le n,m\\le 2\\times 10^5$;\n- $1\\le l_i\\le r_i\\le n$.", "locale": "en"}, "zh-CN": {"title": "「SFMOI Round I」Strange Train Game", "background": "SFM 团队又断网了，于是玩起了 Mini Metro，结果发现游戏更新了，列车要自己组装，于是有了这题。\n\n", "description": "**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。\n\nSFM 号列车由 $n$ 节车厢组成，编号为 $1\\sim n$。每节车厢有一个舒适度 $a_i\\in \\{0,1\\}$，$0$ 代表不舒适，$1$ 代表舒适。管理组想要让舒适的车厢的编号尽量小，也就是说，让 $a$ 的字典序最大。\n\n为此，管理组运来了一辆 $n$ 节车厢的备用车，舒适度表示为 $b_i\\in \\{0,1\\}$。共有 $m$ 个可进行的操作，第 $i$ 个操作的操作参数为 $l_i,r_i$，表示 $\\forall l_i\\le k\\le r_i$，交换 $a_k,b_k$。\n\n可以**从小到大依次**决定是否执行每个操作，但是一共有 $2^m$ 种方案，于是，管理组找来了你，帮忙选出一种最优的方案，最大化 $a$ 的字典序。只需要输出最终得到的 $a$ 即可。\n\n**形式化地**：给定长度为 $n$ 的 $01$ 串 $a,b$，给定 $2m$ 个正整数 $l_i,r_i$。对于 $i=1,2,\\cdots,m$，**依次**执行以下操作：\n- 选择是否执行第 $i$ 次操作。\n    - 如果执行，则对于 $k=l_i,l_{i}+1,\\cdots,r_i$，交换 $a_k,b_k$。\n\n最大化 $a$ 的字典序并输出最终的结果。\n", "inputFormat": "第一行，两个正整数 $n,m$，表示字符串的长度和操作次数。\n\n第二行，一个长度为 $n$ 的 $01$ 串 $a$。\n\n第三行，一个长度为 $n$ 的 $01$ 串 $b$。\n\n接下来 $m$ 行，每行两个正整数 $l_i,r_i$，描述第 $i$ 个操作。\n", "outputFormat": "输出一行长度为 $n$ 的 $01$ 串，表示最优操作后的 $a$。\n", "hint": "**本题采用捆绑测试。**\n\n- Subtask 1（20 pts）：$1\\le n,m\\le 20$；\n- Subtask 2（30 pts）：$l_i$ 互不相同，$a_i \\ne b_i$；\n- Subtask 3（30 pts）：$1 \\le n ,m \\le 10^3$；\n- Subtask 4（20 pts）：无限制；\n\n对于 $100\\%$ 的数据，保证：\n- $1\\le n,m\\le 2\\times 10^5$；\n- $1\\le l_i\\le r_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P11147", "type": "P", "difficulty": 6, "samples": [["2\n1 3\n1 2\n1 2 1\n2 2\n3 2\n1000000000 1000000000\n1 0\n114514 1919 810", "3\nDino!"], ["1\n8 16\n8 3\n5 18 13\n4 20 10\n6 13 1\n2 17 11\n1 11 6\n5 1 1\n2 6 3\n1 16 1\n7 20\n7 13\n3 2", "6"], ["1\n5 5\n1 2\n5 5 1\n6 1\n16 3", "16"], ["1\n5 5\n1 4\n19 10 8\n4 1\n15 1\n22 2\n20 1", "22"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "动态规划 DP", "贪心", "二分", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「SFMOI Round I」Strange Dino Game", "background": "[English statement](https://www.luogu.com.cn/problem/T517979). **You must submit your code at the Chinese version of the statement.**\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/59joca92.png?x-oss-process=image/resize,m_lfit,h_600)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iyhol5l6.png?x-oss-process=image/resize,m_lfit,h_600)\n\nWatersphere 同学在家没网了，只好玩起了 dino 游戏，但是他很菜，一玩到后面就头晕眼花，所以想让你编个程序帮助他拿到更高分，于是有了这题。\n\n本题的游戏背景是 [Dino](https://dinosaur.game)。可以考虑点击链接游玩，以便更好理解题意。", "description": "\n我们将问题放在二维平面上描述。我们给出一些游戏要素：\n\n- 玩家：Dino。可以将其视为一个点。\n- 障碍物：\n    - 仙人掌：形如 $(x_i',0),(x_i',h_i)$ 的线段。\n    - 飞鸟：形如 $(x_i,d_i),(x_i,u_i)$ 的线段。\n- 游戏结束：Dino 与障碍物上的任意一点（包括线段端点）重合时，游戏结束。\n- 起点：原点 $(0,0)$。\n- 终点：使游戏结束的位置，位于第一象限（或 $x$ 轴上）。可能不存在（即游戏能无限进行）。\n- 游戏分数：终点的 $x$ 坐标。终点不存在时定义为无穷大。\n- 跳跃参数：正整数 $d,h$。\n- 步行：Dino 在 $x$ 轴上沿着 $x$ 轴正方向移动。\n- 跳跃：当 Dino 在 $x$ 轴上时，可以进行一次跳跃。以起跳点为原点，跳跃轨迹为\n    $$f(x) = \\begin{cases}\n    \\displaystyle  \\frac{h}{d}x & x\\in [0, d)  \\\\\n    \\displaystyle-\\frac{h}{d}x+2h  & x\\in [d, 2d)  \\\\\n    \\end{cases}$$\n    - 需要注意的是，由上述定义可以推出：**在一次跳跃后落地的瞬间进行第二次跳跃是合法的。**\n    - 需要注意的是，可以在任意**实数点**（只要在 $x$ 轴上）处开始跳跃。也就是说，跳跃不一定在整点开始。\n    \n下图展示了 $d=2,h=6$ 时的一次跳跃。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1gxrno9x.png?x-oss-process=image/resize,m_lfit,h_400)\n\n在一局游戏中，Dino 从起点出发向 $x$ 轴正方向移动。目标是最大化得分，即尽量避开障碍物，使自己移动的距离尽量长。\n\n每一时刻，Dino 只能做一件事：步行，或跳跃。当且仅当 Dino 在 $x$ 轴上时可以进行跳跃。\n\n形式化地说，Dino 的行为可以被描述为一个长度为 $(k+1)$ 的实数二元组序列 $[(x_0,t_0),(x_1,t_1),\\cdots,(x_k,t_k)]$，满足：\n\n- $x_0=0$；\n- $t_i\\in \\{0,1\\}$；\n- $\\forall 0\\le i\\lt k$, $x_i\\lt x_{i+1}$；\n- $t_i=1,i\\lt k\\implies x_{i+1}-x_i\\ge 2d$；(二段跳是不允许的)\n- $\\forall 0\\le i\\lt k$, $t_i=t_{i+1}\\implies t_i=t_{i+1}=1$。\n\n当 $t_i=0$ 时，我们定义 Dino 在 $x_i$ **进入步行状态**，否则定义 Dino 在 $x_i$ **进入跳跃状态**。\n\n当 Dino 与障碍物重合时，游戏结束。此时 Dino 在的位置为终点，得分为终点的 $x$ 坐标。\n\n已知有 $b$ 只飞鸟和 $c$ 个仙人掌，求出 Dino 的最大得分。特别地，得分可以为无穷大。\n\n可参阅样例解释的图片。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，代表游戏次数。\n\n接下来依次描述 $T$ 组数据：\n\n- 每组数据第一行，两个正整数 $d,h$，表示 dino 的跳跃参数。\n- 每组数据第二行，两个整数 $b,c$，表示飞鸟个数与仙人掌个数。\n- 接下来 $b$ 行，每行三个正整数 $x_{i},u_i,d_i$，描述第 $i$ 只飞鸟。\n- 接下来 $c$ 行，每行两个正整数 $x'_{i},h_{i}$，描述第 $i$ 株仙人掌。\n", "outputFormat": "对于每组数据输出一行，表示得分的最大值。\n\n特别地，如果得分为正无穷，输出 `Dino!`。\n", "hint": "\n样例 $1$ 解释：  \n\n- 对于第 $1$ 组数据，dino 无论如何也无法跳过连续的两株高为 $2$ 的仙人掌，答案即为第二株仙人掌的 $x$ 轴坐标。\n- 对于第 $2$ 组数据，dino 可以在原点直接起跳跳过唯一的一只鸟，也完全可以不起跳从飞鸟下方走过。\n\n其中第一组数据的解释如下所示，红线代表飞鸟，绿线代表仙人掌，粉线代表 Dino 的轨迹。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ge17so5a.png?x-oss-process=image/resize,m_lfit,h_400)\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$c=0$；\n- Subtask 2（5 pts）：$b,c \\le 10$；\n- Subtask 3（20 pts）：$b=0$；\n- Subtask 4（20 pts）：$1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i \\le 10^5$;\n- Subtask 5（40 pts）：无特殊限制。\n- Subtask 6（10 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证：\n- $1 \\le T \\le 10$；\n- $0 \\le b,c \\le 2\\times 10^4$；\n- $1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i\\le 10^9$；\n- $d_i\\le u_i$。", "locale": "zh-CN", "translations": {"en": {"title": "Strange Dino Game", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/59joca92.png?x-oss-process=image/resize,m_lfit,h_600)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iyhol5l6.png?x-oss-process=image/resize,m_lfit,h_600)\n\nWatersphere is at home, with Internet disconnected. He has nothing to do, but playing the game Dino. \n\nHowever, he is poor at Dino, getting dizzy after playing for a while. So, he let you help him to get a better score.\n\nThis problem is based on the game [Dino](https://dinosaur.game). You may click the link to have a try, to have a better understanding.", "description": "\nWe describe this problem on a 2D plane. First, we list out some elements of the game.\n\n- Player: Dino. We treat Dino as a point.\n- Obstacle:\n    - Cactus: A segment, whose endpoints are $(x_i',0)$ and $(x_i',h_i)$.\n    - Bird: A segment, whose endpoints are $(x_i,d_i)$ and $(x_i,u_i)$.\n- Game Over: The game ends, once the position of Dino coincides with any obstacle, including the both ends of the segments. \n- Starting point: $(0,0)$ (origin).\n- Endpoint: The position of Dino when the game ends. It is possible that the game has no endpoint, i.e. Dino can go forever.\n- Score: The $x$-coordination of the endpoint. When there is no endpoint, the score is defined to be infinity.\n- Jumping arguments: Positive integers $d,h$.\n- Walking: Dino moves towards the positive direction of the $x$-axis **when Dino is on the $x$-axis**.\n- Jumping: **When Dino is on the $x$-axis**, Dino can perform a jump. Take the point where Dino starts jumping as origin, the trajectory of jumping can be described as the following function:\n    $$f(x) = \\begin{cases}\n    \\displaystyle  \\frac{h}{d}x & x\\in [0, d)  \\\\\n    \\displaystyle-\\frac{h}{d}x+2h  & x\\in [d, 2d)  \\\\\n    \\end{cases}$$\n    - Note that, we can infer that, **it is possible to make the second jump immediately right after the first jump ends.**\n    - Note that, it is possible to make a jump at an **arbitrary point with a real coordination** (as long as it is on the $x$-axis), not necessarily at an integer point.\n    \nThe figure below shows a jump where $d=2,h=6$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1gxrno9x.png?x-oss-process=image/resize,m_lfit,h_400)\n\n\n\nIn a round of game, starting from the origin, Dino moves towards the positive direction of $x$-axis. The goal is to maximize the score, that is, to bypass the obstacles, making himself move as far as possible.\n\nAt every instant, Dino can only do one thing: Walk, or jump. Dino can make a jump if and only if he is on the $x$-axis.\n\nFormally, the behavior of Dino can be described as a sequence of length $(k+1)$ consisting of tuples of real numbers $[(x_0,t_0),(x_1,t_1),\\cdots,(x_k,t_k)]$, where the following conditions holds:\n\n- $x_0=0$;\n- $t_i\\in \\{0,1\\}$;\n- $\\forall 0\\le i\\lt k$, $x_i\\lt x_{i+1}$;\n- $t_i=1,i\\lt k\\implies x_{i+1}-x_i\\ge 2d$; (You cannot make the second jump before the first jump ends)\n- $\\forall 0\\le i\\lt k$, $t_i=t_{i+1}\\implies t_i=t_{i+1}=1$.\n\nWhen $t_i=0$, we say Dino **starts walking** at $x_i$; Otherwise, when $t_i=1$, we say Dino **starts jumping** at $x_i$. \n\nThe game ends when the position of Dino coinsides with any obstacle. Let's say the position of Dino, at this moment, is the endpoint; and the score is the $x$-coordination of the endpoint.\n\nThere are $b$ birds and $c$ cacti. You are to calculate the maximum possible score that Dino can obtain. Specially, the score can be infinity.\n\nFor better understanding, see the figure in the sample description.", "inputFormat": "The first line, an integer $T$ — the number of rounds.\n\nFor each round:\n- The first line contains two positive integers $d,h$ — jumping arguments.\n- The second line contains two integers $b,c$ — the number of birds and the number of cactus, respectively.\n- The following $b$ lines contains three integers $x_i,u_i,d_i$ — the birds.\n- The following $c$ lines contains three integers $x_i',h_i$ — the cacti.\n", "outputFormat": "Output a line for each round, indicating the maximum possible score.\n\nSpecially, when the score is infinity, output a line containing `Dino!`.", "hint": "Explanation of sample $1$:\n- For the first round, Dino can't bypass the second cactus, thus the answer is the $x$ coordination of the second cactus.\n- For the second round, for example, Dino can bypass the only obstacle by starting jumping at origin. \n\nA possible move of the first round is shown below, in which red segments denote the birds, green segments denote the cacti and pink segments denote Dino.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ge17so5a.png?x-oss-process=image/resize,m_lfit,h_400)\n\n### Contraints\n\n\n- Subtask 1 (5 pts): $c=0$;\n- Subtask 2 (5 pts): $b,c \\le 10$;\n- Subtask 3 (20 pts): $b=0$;\n- Subtask 4 (20 pts): $1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i \\le 10^5$;\n- Subtask 5 (40 pts): No further contraints.\n- Subtask 6 (10 pts): No further contraints.\n\nIt is guaranteed that \n\n- $1 \\le T \\le 10$;\n- $0 \\le b,c \\le 2\\times 10^4$;\n- $1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i\\le 10^9$;\n- $d_i\\le u_i$.", "locale": "en"}, "zh-CN": {"title": "「SFMOI Round I」Strange Dino Game", "background": "[English statement](https://www.luogu.com.cn/problem/T517979). **You must submit your code at the Chinese version of the statement.**\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/59joca92.png?x-oss-process=image/resize,m_lfit,h_600)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iyhol5l6.png?x-oss-process=image/resize,m_lfit,h_600)\n\nWatersphere 同学在家没网了，只好玩起了 dino 游戏，但是他很菜，一玩到后面就头晕眼花，所以想让你编个程序帮助他拿到更高分，于是有了这题。\n\n本题的游戏背景是 [Dino](https://dinosaur.game)。可以考虑点击链接游玩，以便更好理解题意。", "description": "\n我们将问题放在二维平面上描述。我们给出一些游戏要素：\n\n- 玩家：Dino。可以将其视为一个点。\n- 障碍物：\n    - 仙人掌：形如 $(x_i',0),(x_i',h_i)$ 的线段。\n    - 飞鸟：形如 $(x_i,d_i),(x_i,u_i)$ 的线段。\n- 游戏结束：Dino 与障碍物上的任意一点（包括线段端点）重合时，游戏结束。\n- 起点：原点 $(0,0)$。\n- 终点：使游戏结束的位置，位于第一象限（或 $x$ 轴上）。可能不存在（即游戏能无限进行）。\n- 游戏分数：终点的 $x$ 坐标。终点不存在时定义为无穷大。\n- 跳跃参数：正整数 $d,h$。\n- 步行：Dino 在 $x$ 轴上沿着 $x$ 轴正方向移动。\n- 跳跃：当 Dino 在 $x$ 轴上时，可以进行一次跳跃。以起跳点为原点，跳跃轨迹为\n    $$f(x) = \\begin{cases}\n    \\displaystyle  \\frac{h}{d}x & x\\in [0, d)  \\\\\n    \\displaystyle-\\frac{h}{d}x+2h  & x\\in [d, 2d)  \\\\\n    \\end{cases}$$\n    - 需要注意的是，由上述定义可以推出：**在一次跳跃后落地的瞬间进行第二次跳跃是合法的。**\n    - 需要注意的是，可以在任意**实数点**（只要在 $x$ 轴上）处开始跳跃。也就是说，跳跃不一定在整点开始。\n    \n下图展示了 $d=2,h=6$ 时的一次跳跃。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1gxrno9x.png?x-oss-process=image/resize,m_lfit,h_400)\n\n在一局游戏中，Dino 从起点出发向 $x$ 轴正方向移动。目标是最大化得分，即尽量避开障碍物，使自己移动的距离尽量长。\n\n每一时刻，Dino 只能做一件事：步行，或跳跃。当且仅当 Dino 在 $x$ 轴上时可以进行跳跃。\n\n形式化地说，Dino 的行为可以被描述为一个长度为 $(k+1)$ 的实数二元组序列 $[(x_0,t_0),(x_1,t_1),\\cdots,(x_k,t_k)]$，满足：\n\n- $x_0=0$；\n- $t_i\\in \\{0,1\\}$；\n- $\\forall 0\\le i\\lt k$, $x_i\\lt x_{i+1}$；\n- $t_i=1,i\\lt k\\implies x_{i+1}-x_i\\ge 2d$；(二段跳是不允许的)\n- $\\forall 0\\le i\\lt k$, $t_i=t_{i+1}\\implies t_i=t_{i+1}=1$。\n\n当 $t_i=0$ 时，我们定义 Dino 在 $x_i$ **进入步行状态**，否则定义 Dino 在 $x_i$ **进入跳跃状态**。\n\n当 Dino 与障碍物重合时，游戏结束。此时 Dino 在的位置为终点，得分为终点的 $x$ 坐标。\n\n已知有 $b$ 只飞鸟和 $c$ 个仙人掌，求出 Dino 的最大得分。特别地，得分可以为无穷大。\n\n可参阅样例解释的图片。", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，一个正整数 $T$，代表游戏次数。\n\n接下来依次描述 $T$ 组数据：\n\n- 每组数据第一行，两个正整数 $d,h$，表示 dino 的跳跃参数。\n- 每组数据第二行，两个整数 $b,c$，表示飞鸟个数与仙人掌个数。\n- 接下来 $b$ 行，每行三个正整数 $x_{i},u_i,d_i$，描述第 $i$ 只飞鸟。\n- 接下来 $c$ 行，每行两个正整数 $x'_{i},h_{i}$，描述第 $i$ 株仙人掌。\n", "outputFormat": "对于每组数据输出一行，表示得分的最大值。\n\n特别地，如果得分为正无穷，输出 `Dino!`。\n", "hint": "\n样例 $1$ 解释：  \n\n- 对于第 $1$ 组数据，dino 无论如何也无法跳过连续的两株高为 $2$ 的仙人掌，答案即为第二株仙人掌的 $x$ 轴坐标。\n- 对于第 $2$ 组数据，dino 可以在原点直接起跳跳过唯一的一只鸟，也完全可以不起跳从飞鸟下方走过。\n\n其中第一组数据的解释如下所示，红线代表飞鸟，绿线代表仙人掌，粉线代表 Dino 的轨迹。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ge17so5a.png?x-oss-process=image/resize,m_lfit,h_400)\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$c=0$；\n- Subtask 2（5 pts）：$b,c \\le 10$；\n- Subtask 3（20 pts）：$b=0$；\n- Subtask 4（20 pts）：$1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i \\le 10^5$;\n- Subtask 5（40 pts）：无特殊限制。\n- Subtask 6（10 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证：\n- $1 \\le T \\le 10$；\n- $0 \\le b,c \\le 2\\times 10^4$；\n- $1 \\le d,h,x_{b_i},d_i,u_i,x_i',h_i\\le 10^9$；\n- $d_i\\le u_i$。", "locale": "zh-CN"}}}
{"pid": "P11148", "type": "P", "difficulty": 3, "samples": [["4\n1\n100\n1\n-2\n1\n-100\n2\n20 -10\n3\n1 -1 1\n2\n-1 1\n5\n2 3 3 -3 -3\n5\n6 6 6 -6 -6", "0\n20\n3\n26"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2018", "THUWC"], "title": "[THUWC 2018] 零食", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T1。$\\texttt{1s,1G}$。", "description": "\nYazid 是一名清华大学的学生，他非常喜欢吃零食。 \n\nYazid 共有 $n$ 包**薯片**，（由于它们的口味各不相同）Yazid 把他们从 $1$ 至 $n$ 编号；Yazid 还有 $m$ 包**果干**，Yazid 也把他们从 $1$ 至 $m$ 编号。 \n\n为了不引起歧义，我们规定：两包零食**类型**相同当且仅当它们同为薯片或果干。 \n\nYazid 打算按一定顺序吃掉所有的零食。在开始吃一包零食后，直到这包零食被吃完前， Yazid 都不会吃其他零食。也就是说， Yazid 的吃零食顺序可以用一个**待吃零食的排列**来表示。 \n\n连续吃同一种食物可能会有别样的体验，所以，每包零食都有一个**妙值**。编号为 $i$（$1\\leq i\\leq n$）的薯片的妙值为 $a_i$，编号为 $i$（$1\\leq i\\leq m$）的果干的妙值为 $b_i$。 \n\n我们保证所有零食的妙值是整数，但需要注意的是，它们有可能为负。 \n\n在吃每包零食时，如果 Yazid 在其之前吃的零食与其类型相同，则 Yazid 会增加当前零食妙值的**快乐度**（吃第一包零食时不会获得快乐度）。初始时， Yazid 的快乐度为 $0$。 \n\nYazid 希望获得最大的快乐度（需要提醒你的是，这个值可能是负的）。 \n\n饥肠辘辘的 Yazid 还要吃遍清华大学 $19$ 座食堂，所以请你帮他计算他能获得的最大快乐度。 \n", "inputFormat": "从标准输入读入数据。 \n\n**本题包含多组数据**。输入的第一行为一个非负整数 $T$ ，表示数据组数。接下来依次描述每组数据，对于每组数据： \n\n第一行 $1$ 个正整数 $n$ ，表示薯片的数量。 \n\n第二行 $n$ 个用空格隔开的整数 $a_1,\\dots,a_n$，表示所有薯片的妙值。 \n\n第三行 $1$ 个正整数 $m$ ，表示果干的数量。 \n\n第四行 $m$ 个用空格隔开的整数 $b_1,\\dots,b_m$，表示所有果干的妙值。 ", "outputFormat": "输出到标准输出。 \n\n对于每组数据，输出一行一个整数，表示 Yazid 能获得的最大快乐度。 ", "hint": "\n\n#### 解释 \n\n为了方便起见，我们约定用 $A_i$ 表示编号为 $i$ 的薯片，用 $B_i$ 表示编号为 $i$ 的果干。 \n\n对于第 $1$ 组数据：无论以何种顺序吃这些零食， Yazid 都不会获得任何快乐度，因此答案为 $0$ 。 \n\n对于第 $2$ 组数据：最优方案可以是 $B_2\\rightarrow B_1\\rightarrow A_1$ ，可以在吃 $B_1$ 时获得  $20$ 的快乐度。可以证明不存在更优的解。 \n\n对于第 $3$ 组数据：按 $B_1\\rightarrow B_2\\rightarrow A_2\\rightarrow A_3\\rightarrow A_1$ 的顺序吃零食即可获得 $3$ 的快乐度。可以证明不存在更优的解。 \n\n#### 子任务\n\n \n\t\n\n \n| 测试点编号 | $\\sum(n+m)\\le $ | $n,m\\le $ | $\\vert a_i\\vert ,\\vert b_i\\vert \\le $ | 其他约束 | 分值 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| $1$ | $300$ | $4$ | $1,000$ | 无 | $7$ |\n| $2$ | $2\\times 10^6$ | $10^5$ | $1$ | 无 | $8$ |\n| $3$ | $2\\times 10^6$ | $10^5$ | $2$ | 无 | $11$ |\n| $4$ | $2\\times 10^6$ | $10^5$ | $10^9$ | 所有 $a_i,b_i$ 均为负数 | $9$ |\n| $5$ | $10^4$ | $10^3$ | $10^9$ | 无 | $23$ |\n| $6$ | $2\\times 10^6$ | $10^5$ | $10^9$ | 无 | $42$ |\n\n\n其中， $\\sum (n+m)$ 表示该测试点中所有数据的 $n,m$ 之和。例如，样例1中的 $\\sum (n+m)$ 即为 $1+1+1+2+3+2+5+5=20$ 。 \n\n对于所有测试点，保证 $T\\leq 5,000$ ， $\\sum (n+m)\\leq 2\\times {10}^{6}$。 \n\n对于每个测试点的所有数据，保证 $n,m\\leq 100,000$ ，$1\\leq \\left|a_i \\right|,\\left|b_i \\right|\\leq 10^9$。 \n\n对于所有测试点，保证：所有数据中 $n,m$ 的最大值、所有数据中 $\\left| a_i\\right|,\\left| b_i\\right|$ 的最大值分别不会小于该测试点 $n,m$ 、 $\\left|a_i \\right|,\\left|b_i \\right|$ 上界的 $\\frac{2}{3}$ ； $\\sum (n+m)$ 也不会小于对应上界的**一半**。 \n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 零食", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T1。$\\texttt{1s,1G}$。", "description": "\nYazid 是一名清华大学的学生，他非常喜欢吃零食。 \n\nYazid 共有 $n$ 包**薯片**，（由于它们的口味各不相同）Yazid 把他们从 $1$ 至 $n$ 编号；Yazid 还有 $m$ 包**果干**，Yazid 也把他们从 $1$ 至 $m$ 编号。 \n\n为了不引起歧义，我们规定：两包零食**类型**相同当且仅当它们同为薯片或果干。 \n\nYazid 打算按一定顺序吃掉所有的零食。在开始吃一包零食后，直到这包零食被吃完前， Yazid 都不会吃其他零食。也就是说， Yazid 的吃零食顺序可以用一个**待吃零食的排列**来表示。 \n\n连续吃同一种食物可能会有别样的体验，所以，每包零食都有一个**妙值**。编号为 $i$（$1\\leq i\\leq n$）的薯片的妙值为 $a_i$，编号为 $i$（$1\\leq i\\leq m$）的果干的妙值为 $b_i$。 \n\n我们保证所有零食的妙值是整数，但需要注意的是，它们有可能为负。 \n\n在吃每包零食时，如果 Yazid 在其之前吃的零食与其类型相同，则 Yazid 会增加当前零食妙值的**快乐度**（吃第一包零食时不会获得快乐度）。初始时， Yazid 的快乐度为 $0$。 \n\nYazid 希望获得最大的快乐度（需要提醒你的是，这个值可能是负的）。 \n\n饥肠辘辘的 Yazid 还要吃遍清华大学 $19$ 座食堂，所以请你帮他计算他能获得的最大快乐度。 \n", "inputFormat": "从标准输入读入数据。 \n\n**本题包含多组数据**。输入的第一行为一个非负整数 $T$ ，表示数据组数。接下来依次描述每组数据，对于每组数据： \n\n第一行 $1$ 个正整数 $n$ ，表示薯片的数量。 \n\n第二行 $n$ 个用空格隔开的整数 $a_1,\\dots,a_n$，表示所有薯片的妙值。 \n\n第三行 $1$ 个正整数 $m$ ，表示果干的数量。 \n\n第四行 $m$ 个用空格隔开的整数 $b_1,\\dots,b_m$，表示所有果干的妙值。 ", "outputFormat": "输出到标准输出。 \n\n对于每组数据，输出一行一个整数，表示 Yazid 能获得的最大快乐度。 ", "hint": "\n\n#### 解释 \n\n为了方便起见，我们约定用 $A_i$ 表示编号为 $i$ 的薯片，用 $B_i$ 表示编号为 $i$ 的果干。 \n\n对于第 $1$ 组数据：无论以何种顺序吃这些零食， Yazid 都不会获得任何快乐度，因此答案为 $0$ 。 \n\n对于第 $2$ 组数据：最优方案可以是 $B_2\\rightarrow B_1\\rightarrow A_1$ ，可以在吃 $B_1$ 时获得  $20$ 的快乐度。可以证明不存在更优的解。 \n\n对于第 $3$ 组数据：按 $B_1\\rightarrow B_2\\rightarrow A_2\\rightarrow A_3\\rightarrow A_1$ 的顺序吃零食即可获得 $3$ 的快乐度。可以证明不存在更优的解。 \n\n#### 子任务\n\n \n\t\n\n \n| 测试点编号 | $\\sum(n+m)\\le $ | $n,m\\le $ | $\\vert a_i\\vert ,\\vert b_i\\vert \\le $ | 其他约束 | 分值 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| $1$ | $300$ | $4$ | $1,000$ | 无 | $7$ |\n| $2$ | $2\\times 10^6$ | $10^5$ | $1$ | 无 | $8$ |\n| $3$ | $2\\times 10^6$ | $10^5$ | $2$ | 无 | $11$ |\n| $4$ | $2\\times 10^6$ | $10^5$ | $10^9$ | 所有 $a_i,b_i$ 均为负数 | $9$ |\n| $5$ | $10^4$ | $10^3$ | $10^9$ | 无 | $23$ |\n| $6$ | $2\\times 10^6$ | $10^5$ | $10^9$ | 无 | $42$ |\n\n\n其中， $\\sum (n+m)$ 表示该测试点中所有数据的 $n,m$ 之和。例如，样例1中的 $\\sum (n+m)$ 即为 $1+1+1+2+3+2+5+5=20$ 。 \n\n对于所有测试点，保证 $T\\leq 5,000$ ， $\\sum (n+m)\\leq 2\\times {10}^{6}$。 \n\n对于每个测试点的所有数据，保证 $n,m\\leq 100,000$ ，$1\\leq \\left|a_i \\right|,\\left|b_i \\right|\\leq 10^9$。 \n\n对于所有测试点，保证：所有数据中 $n,m$ 的最大值、所有数据中 $\\left| a_i\\right|,\\left| b_i\\right|$ 的最大值分别不会小于该测试点 $n,m$ 、 $\\left|a_i \\right|,\\left|b_i \\right|$ 上界的 $\\frac{2}{3}$ ； $\\sum (n+m)$ 也不会小于对应上界的**一半**。 \n", "locale": "zh-CN"}}}
{"pid": "P11149", "type": "P", "difficulty": 7, "samples": [["6\n5 1 1 3 2 6\n1 2\n2 3\n3 4\n3 5\n2 6", "15"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2018", "树形 DP", "线段树合并", "THUWC"], "title": "[THUWC 2018] 城市规划", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T2。$\\texttt{1.5s,2G}$。", "description": "access_globe 最近在玩一款城市规划的游戏。在游戏中，有 $n$ 个城市，$n-1$ 条可以双向通行的道路连接着这些城市，任意两个城市都可以通过这些道路互相到达。\n\n最近，游戏中的“世界杯”比赛开始了。每一个城市都恰好支持一支球队，设第 $i$ 个城市支持的球队为 $a_i$。游戏给 access_globe 一个新的任务：选择一些城市，在这些城市建立可以承办世界杯的足球场。\n\naccess_globe 不希望建立足球场的城市所喜欢的球队的差异太大，因此他要求建立了足球场的这些城市中，不能存在 $3$ 个城市，使得它们支持的球队互不相同。同时为了减少球员花费在路上的时间，access_globe 希望任意两个建立了足球场的城市，都可以只经过其他建立了足球场的城市互相到达。\n\naccess_globe 是一个喜欢不同的同学，因此他希望你帮他求出，有多少种不同的建立足球场的方案。两种方案被认为是不同的，当且存在一个城市，使得该城市在恰好一种方案中被建立了足球场。\n\n但你并不想帮他解决这个问题，你只想告诉他答案在 $998,244,353$ 进制下的个位（即答案除以 $998,244,353$ 的余数）。", "inputFormat": "\n从标准输入读入数据。\n\n第 $1$ 行包含一个整数 $n$，表示城市的个数。\n\n第 $2$ 行包含 $n$ 个用空格隔开的整数 $a_1,…,a_n$ ，表示每个城市支持的球队。\n\n第 $3$ 到第 $n+1$ 行，每行包含 $2$ 个用空格隔开的整数 $x_i,y_i$ ，表示一条连接城市 $x_i$ 和城市 $y_i$ 的双向道路。保证任意两个城市都可以通过这些道路互相到达。", "outputFormat": "\n输出到标准输出。\n\n输出一行一个数，表示不同的建立足球场的方案数除以 $998,244,353$ 的余数。\n", "hint": "\n\n#### 解释\n\n城市的道路情况和支持的球队情况如下图，其中颜色相同的城市支持相同的球队。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x18dbmxv.png)\n\n任何只建立一个足球场或将足球场建立在两个有道路直接相连的方案都是合法的，这样共有 $5+6=11​$ 种方案。其余方案为在城市 $2​$、$3​$ 和其它任意一个城市建立足球场，共 $4​$ 种方案，因此总共有 $15​$ 种方案。\n\n#### 子任务\n\n \n| 测试点 | 分值 | $n=$ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1$ |  $3$ |  $500$  | 无 |\n| $2$ |  $7$ |  $5,000$  |  无 |\n| $3$ |  $9$ |  $2\\times 10^5$  |  A |\n| $4$ |  $13$ |  $5\\times 10^5$  |  A |\n| $5$ |  $7$ |  $2\\times 10^5$  |  B |\n| $6$ |  $11$ |  $5\\times 10^5$  |  B |\n| $7$ |  $12$ |  $5\\times 10^4$  |  无 |\n| $8$ |  $14$ |  $2\\times 10^5$  |  无 |\n| $9$ |  $12$ |  $5\\times 10^5$  |  无 |\n| $10$ |  $12$ |  $5\\times 10^5$  |  无 |\n\n特殊性质 A：每条道路连接的两个城市支持的球队不同；每个城市最多连出 $10$ 条道路。\n\n特殊性质 B：每条道路连接的两个城市支持的球队不同。\n\n对于所有数据，保证 $1\\le a_i\\le n\\le 5 \\times 10^{5}$。\n\n\n#### 提示\n\n请注意本题的**空间限制**是 2 GB，请计算好程序的内存使用，不要超出限制。超出空间限制可能导致**整道题目得 0 分**。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 城市规划", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T2。$\\texttt{1.5s,2G}$。", "description": "access_globe 最近在玩一款城市规划的游戏。在游戏中，有 $n$ 个城市，$n-1$ 条可以双向通行的道路连接着这些城市，任意两个城市都可以通过这些道路互相到达。\n\n最近，游戏中的“世界杯”比赛开始了。每一个城市都恰好支持一支球队，设第 $i$ 个城市支持的球队为 $a_i$。游戏给 access_globe 一个新的任务：选择一些城市，在这些城市建立可以承办世界杯的足球场。\n\naccess_globe 不希望建立足球场的城市所喜欢的球队的差异太大，因此他要求建立了足球场的这些城市中，不能存在 $3$ 个城市，使得它们支持的球队互不相同。同时为了减少球员花费在路上的时间，access_globe 希望任意两个建立了足球场的城市，都可以只经过其他建立了足球场的城市互相到达。\n\naccess_globe 是一个喜欢不同的同学，因此他希望你帮他求出，有多少种不同的建立足球场的方案。两种方案被认为是不同的，当且存在一个城市，使得该城市在恰好一种方案中被建立了足球场。\n\n但你并不想帮他解决这个问题，你只想告诉他答案在 $998,244,353$ 进制下的个位（即答案除以 $998,244,353$ 的余数）。", "inputFormat": "\n从标准输入读入数据。\n\n第 $1$ 行包含一个整数 $n$，表示城市的个数。\n\n第 $2$ 行包含 $n$ 个用空格隔开的整数 $a_1,…,a_n$ ，表示每个城市支持的球队。\n\n第 $3$ 到第 $n+1$ 行，每行包含 $2$ 个用空格隔开的整数 $x_i,y_i$ ，表示一条连接城市 $x_i$ 和城市 $y_i$ 的双向道路。保证任意两个城市都可以通过这些道路互相到达。", "outputFormat": "\n输出到标准输出。\n\n输出一行一个数，表示不同的建立足球场的方案数除以 $998,244,353$ 的余数。\n", "hint": "\n\n#### 解释\n\n城市的道路情况和支持的球队情况如下图，其中颜色相同的城市支持相同的球队。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x18dbmxv.png)\n\n任何只建立一个足球场或将足球场建立在两个有道路直接相连的方案都是合法的，这样共有 $5+6=11​$ 种方案。其余方案为在城市 $2​$、$3​$ 和其它任意一个城市建立足球场，共 $4​$ 种方案，因此总共有 $15​$ 种方案。\n\n#### 子任务\n\n \n| 测试点 | 分值 | $n=$ | 特殊性质 |\n| :--: | :--: | :--: | :--: |\n| $1$ |  $3$ |  $500$  | 无 |\n| $2$ |  $7$ |  $5,000$  |  无 |\n| $3$ |  $9$ |  $2\\times 10^5$  |  A |\n| $4$ |  $13$ |  $5\\times 10^5$  |  A |\n| $5$ |  $7$ |  $2\\times 10^5$  |  B |\n| $6$ |  $11$ |  $5\\times 10^5$  |  B |\n| $7$ |  $12$ |  $5\\times 10^4$  |  无 |\n| $8$ |  $14$ |  $2\\times 10^5$  |  无 |\n| $9$ |  $12$ |  $5\\times 10^5$  |  无 |\n| $10$ |  $12$ |  $5\\times 10^5$  |  无 |\n\n特殊性质 A：每条道路连接的两个城市支持的球队不同；每个城市最多连出 $10$ 条道路。\n\n特殊性质 B：每条道路连接的两个城市支持的球队不同。\n\n对于所有数据，保证 $1\\le a_i\\le n\\le 5 \\times 10^{5}$。\n\n\n#### 提示\n\n请注意本题的**空间限制**是 2 GB，请计算好程序的内存使用，不要超出限制。超出空间限制可能导致**整道题目得 0 分**。", "locale": "zh-CN"}}}
{"pid": "P11150", "type": "P", "difficulty": 7, "samples": [["6 2\n000001\n00\n01", "0\n5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "THUWC"], "title": "[THUWC 2018] 字胡串", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T3。$\\texttt{2s,0.5G}$。\n\n----\n\n我希望你明白，优秀的出题人是懒得写题目背景的。但是优秀的题目也可能需要让选手了解一些基本定义， 例如以下这些内容， 而熟练的算法竞赛选手几乎可以无视。\n\n对于一个字符串 $S$， 我们定义 $\\left|S\\right|$ 表示 $S$ 的长度。接着，我们定义 $S_i$ 表示 $S$ 中第 $i$ 个字符，$S_{L,R}$ 表示由 $S$ 中从左往右数，第 $L$ 个字符到第 $R$ 个字符依次连接形成的字符串。特别的，如果 $L>R$，或者 $L \\notin \\left[1,\\left|S\\right|\\right]$，或者$R \\notin \\left[1,\\left|S\\right|\\right]$，则我们可以认为 $S_{L,R}$ 为空串。 \n\n我们再定义两个字符串 $A$ 和 $B$ 的加法， $A+B$ 为将 $B$ 字符串整体连接在 $A$ 的最后一个字符后面得到的大字符串。\n\n例如，我们可以认为 `aaaa` $+$ `bbbb` $=$ `aaaabbbb`。 \n\n我们不难发现，上述定义的加法满足结合律，但不满足交换律。\n\n最后，我希望你还能明白，字典序是什么。\n\n为了让你明白字典序是什么，你还需要明白前缀是什么。我们说一个字符串 $A$ 是另一个字符串 $B$ 的前缀，当且仅当存在一个整数 $len$，使得 $A$ 与 $B_{1,len}$ 是完全相同的字符串。\n\n对于两个不同的字符串 $A$ 和 $B$，如果 $A$ 是 $B$ 的一个前缀，则我们认为在字典序下， $A < B$； 如果 $B$ 是 $A$ 的前缀，则我们认为在字典序下，$B < A$。 否则，我们总能找到一个最小的 $i$， 使得 $A_i \\neq B_i$， 如果 $A_i < B_i$， 则我们认为在字典序下，$A < B$，否则 $B > A$。", "description": "\n现在给出一个长度为 $n$ 的字符串 $A$。 在此基础上，我会进行 $Q$ 次询问。 \n\n对于第 $i$（$1 \\leq i \\leq Q$）次的询问，我们会给出一个非空字符串 $B^{(i)}$， 并希望你找出一个最小的 $j$（$0 \\leq j \\leq n$）， 使得 $A_{1,j} + B^{(i)} + A_{j+1,n}$ 的字典序最小。 对于每个询问，你只需要输出你找到的这个 $j$ 即可。", "inputFormat": "\n从标准输入读入数据。\n\n第一行有两个用空格隔开的整数 $n, Q$， 分别代表字符串 $A$ 的长度，以及询问次数。\n\n第二行给出一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n第三行到第 $Q+2$ 行， 每行会给出一个非空字符串， 第 $i$ 行所给出的字符串表示 $B^{(i-2)}$。\n", "outputFormat": "\n\n输出到标准输出。\n\n对于每个询问，请输出一行一个整数表示你所找到的最小的 $j$（$0 \\leq j \\leq n$）。\n", "hint": "#### 子任务\n\n \n| 测试点编号 | $n=$ | $\\sum \\left\\lvert B^{(i)}\\right\\rvert\\le$ | $Q\\le$ | 其他约定 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1\\sim 3$ | $100$ | $100$ | $100$ | 无 |\n| $4\\sim 8$ | $10^3$ | $10^3$ | $10^3$ | 无 |\n| $9\\sim 10$ | $10^6$ | $10^6$ | $5\\times 10^5$ | $\\lvert B^{(i)}\\rvert=1$ |\n| $11\\sim 14$ | $3\\times 10^5$ | $5\\times 10^5$ | $3\\times 10^5$ | 无 |\n| $15\\sim 20$ | $10^6$ | $10^6$ | $5\\times 10^5$ | 无 |\n\n对于所有测试数据，$1 \\leq n \\leq 10^6$，$1 \\leq Q \\leq 5 \\times 10^5$，$1 \\leq \\sum \\limits _{i=1}^{Q} \\left|B^{(i)}\\right| \\leq 10^6$，输入的字符串全部由**数字**组成。\n\n此外，我们保证，对于所有测试数据， $\\sum \\limits _{i=1}^{Q} \\left|B^{(i)}\\right|$ 不会小于其在该测试点对应上界的 $\\frac{1}{10}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 字胡串", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D1T3。$\\texttt{2s,0.5G}$。\n\n----\n\n我希望你明白，优秀的出题人是懒得写题目背景的。但是优秀的题目也可能需要让选手了解一些基本定义， 例如以下这些内容， 而熟练的算法竞赛选手几乎可以无视。\n\n对于一个字符串 $S$， 我们定义 $\\left|S\\right|$ 表示 $S$ 的长度。接着，我们定义 $S_i$ 表示 $S$ 中第 $i$ 个字符，$S_{L,R}$ 表示由 $S$ 中从左往右数，第 $L$ 个字符到第 $R$ 个字符依次连接形成的字符串。特别的，如果 $L>R$，或者 $L \\notin \\left[1,\\left|S\\right|\\right]$，或者$R \\notin \\left[1,\\left|S\\right|\\right]$，则我们可以认为 $S_{L,R}$ 为空串。 \n\n我们再定义两个字符串 $A$ 和 $B$ 的加法， $A+B$ 为将 $B$ 字符串整体连接在 $A$ 的最后一个字符后面得到的大字符串。\n\n例如，我们可以认为 `aaaa` $+$ `bbbb` $=$ `aaaabbbb`。 \n\n我们不难发现，上述定义的加法满足结合律，但不满足交换律。\n\n最后，我希望你还能明白，字典序是什么。\n\n为了让你明白字典序是什么，你还需要明白前缀是什么。我们说一个字符串 $A$ 是另一个字符串 $B$ 的前缀，当且仅当存在一个整数 $len$，使得 $A$ 与 $B_{1,len}$ 是完全相同的字符串。\n\n对于两个不同的字符串 $A$ 和 $B$，如果 $A$ 是 $B$ 的一个前缀，则我们认为在字典序下， $A < B$； 如果 $B$ 是 $A$ 的前缀，则我们认为在字典序下，$B < A$。 否则，我们总能找到一个最小的 $i$， 使得 $A_i \\neq B_i$， 如果 $A_i < B_i$， 则我们认为在字典序下，$A < B$，否则 $B > A$。", "description": "\n现在给出一个长度为 $n$ 的字符串 $A$。 在此基础上，我会进行 $Q$ 次询问。 \n\n对于第 $i$（$1 \\leq i \\leq Q$）次的询问，我们会给出一个非空字符串 $B^{(i)}$， 并希望你找出一个最小的 $j$（$0 \\leq j \\leq n$）， 使得 $A_{1,j} + B^{(i)} + A_{j+1,n}$ 的字典序最小。 对于每个询问，你只需要输出你找到的这个 $j$ 即可。", "inputFormat": "\n从标准输入读入数据。\n\n第一行有两个用空格隔开的整数 $n, Q$， 分别代表字符串 $A$ 的长度，以及询问次数。\n\n第二行给出一个长度为 $n$ 的字符串，表示字符串 $A$。\n\n第三行到第 $Q+2$ 行， 每行会给出一个非空字符串， 第 $i$ 行所给出的字符串表示 $B^{(i-2)}$。\n", "outputFormat": "\n\n输出到标准输出。\n\n对于每个询问，请输出一行一个整数表示你所找到的最小的 $j$（$0 \\leq j \\leq n$）。\n", "hint": "#### 子任务\n\n \n| 测试点编号 | $n=$ | $\\sum \\left\\lvert B^{(i)}\\right\\rvert\\le$ | $Q\\le$ | 其他约定 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1\\sim 3$ | $100$ | $100$ | $100$ | 无 |\n| $4\\sim 8$ | $10^3$ | $10^3$ | $10^3$ | 无 |\n| $9\\sim 10$ | $10^6$ | $10^6$ | $5\\times 10^5$ | $\\lvert B^{(i)}\\rvert=1$ |\n| $11\\sim 14$ | $3\\times 10^5$ | $5\\times 10^5$ | $3\\times 10^5$ | 无 |\n| $15\\sim 20$ | $10^6$ | $10^6$ | $5\\times 10^5$ | 无 |\n\n对于所有测试数据，$1 \\leq n \\leq 10^6$，$1 \\leq Q \\leq 5 \\times 10^5$，$1 \\leq \\sum \\limits _{i=1}^{Q} \\left|B^{(i)}\\right| \\leq 10^6$，输入的字符串全部由**数字**组成。\n\n此外，我们保证，对于所有测试数据， $\\sum \\limits _{i=1}^{Q} \\left|B^{(i)}\\right|$ 不会小于其在该测试点对应上界的 $\\frac{1}{10}$。", "locale": "zh-CN"}}}
{"pid": "P11151", "type": "P", "difficulty": 6, "samples": [["6 5 5\n1 6 2 3 5 1\n1 2 4 3 4\n1 6 1\n2 6 1\n2 6 5\n3 5 1\n3 4 5", "32\n38\n26\n14\n0"], ["见附件中的 ex_2.in。", "见附件中的 ex_2.ans。"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "THUWC"], "title": "[THUWC 2018] 明天的太阳会照常升起", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T1。$\\texttt{7s,0.5G}$。", "description": "\n小 R 为了看日出，来到了 C 国的东海岸。\n\n东海岸的海岸线上从北到南依次排列着 $n$ 座城市，编号为 $1$ 到 $n$。其中编号小的城市在编号大的城市的北边。相邻编号之间的城市由海滨公路连接，连接城市 $i$ 和 $i+1$ 的公路长度为 $l_i$ 公里。\n\n小 R 有一辆汽车，这辆汽车每行驶一公里需要消耗一单位的汽油。在城市之间的道路上没有加油站，因此小R只能选择在路途中的城市里加油。城市 $i$ 每单位汽油的价格是 $p_i$。小R的汽车在消耗完所有的汽油之后就会立刻熄火，无法前进，且小R的汽车油箱最多能装 $V$ 单位汽油。\n\n小 R 一共规划了 $m$ 次看日出的行程，在第 $i$ 次行程中，小 R 晚上住在 $s_i$ 号城市，第二天凌晨要开车赶往 $t_i$ 号城市看日出。由于某些原因，小 R 总是会从**编号较小**的城市赶往**编号较大**的城市，即满足 $s_i<t_i$ 。因为行程的时间非常紧张，所以每次行程小 R 都会选择距离最短的路线。在选择最短路线的基础上，小 R 希望合理安排加油的地点，使得每次行程的花费最小。在第 $i$ 次行程刚开始时，小 R 的汽车油箱的油量为 $v_i$（$0\\le v_i\\le V$）。\n\n注意，每次行程都是相互独立的，第 $i$ 次行程刚开始的油箱的油量总是 $v_i$，不会受到上一次行程结束时油箱中剩余油量的影响。", "inputFormat": "\n从标准输入读入数据。\n\n第一行三个用空格隔开的正整数$n，m，V$，分别表示城市的数量，行程的数量和油箱容量。\n\n第二行 $n$ 个用空格隔开的正整数，第 $i$ 个正整数表示 $p_i$。\n\n第三行 $n-1$ 个用空格隔开的正整数，第 $i$ 个正整数表示 $l_i$。\n\n接下来 $m$ 行，每行三个用空格隔开的整数 $s_i$，$t_i$，$v_i$，表示第 $i$ 次行程小 R 要从 $s_i$ 出发赶往 $t_i$，出发时油箱里有 $v_i$ 单位汽油。\t", "outputFormat": "\n输出到标准输出。\n\n输出 $m$ 行，第 $i$ 行表示第 $i$ 次行程的最小花费。\n", "hint": "\n对于 100% 的数据，$n\\le10^6$，$m\\le10^6$，$1\\le V\\le 10^{18}$，$1\\le s_i<t_i \\le n$，$0\\le v_i \\le V$，$1\\le l_i\\le\\min(V,10^6)$，$1\\le p_i\\le5\\times10^6$。\n\n本题共 $20$ 个数据点，每个数据点 $5$ 分。各个数据点的限制如下：\n\n \n| 测试点编号 | $n=$ | $m=$ | $V$ | 其它约定 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ | $10$ | $10$ | $\\le 10$ | 无 |\n| $2\\sim 3$ | $10^3$ | $10^3$ | $\\le 10^{18}$ | 无 |\n| $4\\sim 8$ | $10^5$ | $10^5$ | $\\le 10^{18}$ | 无 |\n| $9\\sim 11$ | $5\\times 10^5$ | $5\\times 10^5$ | $\\le 10^{18}$ | $s_i=1$ |\n| $12,13$ | $5\\times 10^5$ | $5\\times 10^5$ | $= 10^{18}$ | 无 |\n| $14,15$ | $5\\times 10^5$ | $5\\times 10^5$ | $\\le 10^{18}$ | 无 |\n| $16\\sim 20$ | $10^6$ | $10^6$ | $\\le 10^{18}$ | 无 |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 明天的太阳会照常升起", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T1。$\\texttt{7s,0.5G}$。", "description": "\n小 R 为了看日出，来到了 C 国的东海岸。\n\n东海岸的海岸线上从北到南依次排列着 $n$ 座城市，编号为 $1$ 到 $n$。其中编号小的城市在编号大的城市的北边。相邻编号之间的城市由海滨公路连接，连接城市 $i$ 和 $i+1$ 的公路长度为 $l_i$ 公里。\n\n小 R 有一辆汽车，这辆汽车每行驶一公里需要消耗一单位的汽油。在城市之间的道路上没有加油站，因此小R只能选择在路途中的城市里加油。城市 $i$ 每单位汽油的价格是 $p_i$。小R的汽车在消耗完所有的汽油之后就会立刻熄火，无法前进，且小R的汽车油箱最多能装 $V$ 单位汽油。\n\n小 R 一共规划了 $m$ 次看日出的行程，在第 $i$ 次行程中，小 R 晚上住在 $s_i$ 号城市，第二天凌晨要开车赶往 $t_i$ 号城市看日出。由于某些原因，小 R 总是会从**编号较小**的城市赶往**编号较大**的城市，即满足 $s_i<t_i$ 。因为行程的时间非常紧张，所以每次行程小 R 都会选择距离最短的路线。在选择最短路线的基础上，小 R 希望合理安排加油的地点，使得每次行程的花费最小。在第 $i$ 次行程刚开始时，小 R 的汽车油箱的油量为 $v_i$（$0\\le v_i\\le V$）。\n\n注意，每次行程都是相互独立的，第 $i$ 次行程刚开始的油箱的油量总是 $v_i$，不会受到上一次行程结束时油箱中剩余油量的影响。", "inputFormat": "\n从标准输入读入数据。\n\n第一行三个用空格隔开的正整数$n，m，V$，分别表示城市的数量，行程的数量和油箱容量。\n\n第二行 $n$ 个用空格隔开的正整数，第 $i$ 个正整数表示 $p_i$。\n\n第三行 $n-1$ 个用空格隔开的正整数，第 $i$ 个正整数表示 $l_i$。\n\n接下来 $m$ 行，每行三个用空格隔开的整数 $s_i$，$t_i$，$v_i$，表示第 $i$ 次行程小 R 要从 $s_i$ 出发赶往 $t_i$，出发时油箱里有 $v_i$ 单位汽油。\t", "outputFormat": "\n输出到标准输出。\n\n输出 $m$ 行，第 $i$ 行表示第 $i$ 次行程的最小花费。\n", "hint": "\n对于 100% 的数据，$n\\le10^6$，$m\\le10^6$，$1\\le V\\le 10^{18}$，$1\\le s_i<t_i \\le n$，$0\\le v_i \\le V$，$1\\le l_i\\le\\min(V,10^6)$，$1\\le p_i\\le5\\times10^6$。\n\n本题共 $20$ 个数据点，每个数据点 $5$ 分。各个数据点的限制如下：\n\n \n| 测试点编号 | $n=$ | $m=$ | $V$ | 其它约定 |\n| :--: | :--: | :--: | :--: | :--: |\n| $1$ | $10$ | $10$ | $\\le 10$ | 无 |\n| $2\\sim 3$ | $10^3$ | $10^3$ | $\\le 10^{18}$ | 无 |\n| $4\\sim 8$ | $10^5$ | $10^5$ | $\\le 10^{18}$ | 无 |\n| $9\\sim 11$ | $5\\times 10^5$ | $5\\times 10^5$ | $\\le 10^{18}$ | $s_i=1$ |\n| $12,13$ | $5\\times 10^5$ | $5\\times 10^5$ | $= 10^{18}$ | 无 |\n| $14,15$ | $5\\times 10^5$ | $5\\times 10^5$ | $\\le 10^{18}$ | 无 |\n| $16\\sim 20$ | $10^6$ | $10^6$ | $\\le 10^{18}$ | 无 |\n\n", "locale": "zh-CN"}}}
{"pid": "P11152", "type": "P", "difficulty": 7, "samples": [["3\n1 1 2", "2"], ["5\n5 6 7 8 9\n", "322192262"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "THUWC"], "title": "[THUWC 2018] 七彩序列", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T2。$\\texttt{5s,0.5G}$。", "description": "\n给出 $n$ 种颜色的小球若干，颜色的编号从 $1$ 至 $n$ ，第 $i$ 种颜色的小球共有 $a_i$ 个。小 $L$ 要把这些小球排成一个序列，使得**不**存在一个非空前缀或非空后缀是“整齐的”。这里我们称一个前缀或后缀是“整齐的”，当且仅当其中**所有 $n$ 个颜色**小球的出现次数相同。你的任务是计算本质不同的序列数目。\n\n善良的 temporaryDO 给大家指出了一些必要的说明：\n\n1. 一个序列长度为 $len$ 的**前缀**（后缀）指的是序列中最靠**左**（右）的 $len$ 个小球。而非空前缀或后缀指的即是 $len\\neq 0$ 的前缀或后缀。\n\n2. 对于一个小球的序列 $S$，令 $S_i$ 表示从左到右数的第 $i$ 个小球的颜色。我们认为两个小球序列 $S, T$ 本质不同，当且仅当存在一个位置 $i$ 使得 $S_i$ 不同于 $T_i$。\n\n为了避免高精度，你只需要计算答案对 $998,244,353​$ 取模的结果即可。", "inputFormat": "\n从标准输入读入数据。\n\n输入的第一行包含一个整数 $n$ ，表示颜色的种类数。\n\n接下来一行包含 $n$ 个用空格隔开的整数，第 $i$ 个正整数为 $a_i$ ，表示第 $i$ 种颜色小球的数量。", "outputFormat": "\n输出到标准输出。\n\n输出包含一行一个整数，表示本质不同的小球序列数目对 $998,244,353$ 取模的结果。\n", "hint": "#### 样例 $1$ 解释\n\n合法的两种方案分别为：`1 3 3 2` 和 `2 3 3 1`，显然，没有其他满足条件的序列。\n\n\n### 子任务\n\n\n \n| 测试点编号 | $n=$ | $a_i\\le$ |\n| :--: | :--: | :--: |\n| $1$ | $2$ | $500$ |\n| $2$ | $2$ | $2\\times 10^5$ | \n| $3$ | $2$ | $2\\times 10^5$ | \n| $4$ | $50$ | $2\\times 10^3$ | \n| $5$ | $75$ | $2\\times 10^3$ | \n| $6$ | $100$ | $2\\times 10^3$ | \n| $7$ | $50$ | $10^5$ | \n| $8$ | $75$ | $1.5\\times 10^5$ | \n| $9$ | $90$ | $1.75\\times 10^5$ | \n| $10$ | $100$ | $2\\times 10^5$ | \n\n对于 $100\\%$ 的数据，保证 $n \\le 100$，所有 $a_i\\le 200,000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 七彩序列", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T2。$\\texttt{5s,0.5G}$。", "description": "\n给出 $n$ 种颜色的小球若干，颜色的编号从 $1$ 至 $n$ ，第 $i$ 种颜色的小球共有 $a_i$ 个。小 $L$ 要把这些小球排成一个序列，使得**不**存在一个非空前缀或非空后缀是“整齐的”。这里我们称一个前缀或后缀是“整齐的”，当且仅当其中**所有 $n$ 个颜色**小球的出现次数相同。你的任务是计算本质不同的序列数目。\n\n善良的 temporaryDO 给大家指出了一些必要的说明：\n\n1. 一个序列长度为 $len$ 的**前缀**（后缀）指的是序列中最靠**左**（右）的 $len$ 个小球。而非空前缀或后缀指的即是 $len\\neq 0$ 的前缀或后缀。\n\n2. 对于一个小球的序列 $S$，令 $S_i$ 表示从左到右数的第 $i$ 个小球的颜色。我们认为两个小球序列 $S, T$ 本质不同，当且仅当存在一个位置 $i$ 使得 $S_i$ 不同于 $T_i$。\n\n为了避免高精度，你只需要计算答案对 $998,244,353​$ 取模的结果即可。", "inputFormat": "\n从标准输入读入数据。\n\n输入的第一行包含一个整数 $n$ ，表示颜色的种类数。\n\n接下来一行包含 $n$ 个用空格隔开的整数，第 $i$ 个正整数为 $a_i$ ，表示第 $i$ 种颜色小球的数量。", "outputFormat": "\n输出到标准输出。\n\n输出包含一行一个整数，表示本质不同的小球序列数目对 $998,244,353$ 取模的结果。\n", "hint": "#### 样例 $1$ 解释\n\n合法的两种方案分别为：`1 3 3 2` 和 `2 3 3 1`，显然，没有其他满足条件的序列。\n\n\n### 子任务\n\n\n \n| 测试点编号 | $n=$ | $a_i\\le$ |\n| :--: | :--: | :--: |\n| $1$ | $2$ | $500$ |\n| $2$ | $2$ | $2\\times 10^5$ | \n| $3$ | $2$ | $2\\times 10^5$ | \n| $4$ | $50$ | $2\\times 10^3$ | \n| $5$ | $75$ | $2\\times 10^3$ | \n| $6$ | $100$ | $2\\times 10^3$ | \n| $7$ | $50$ | $10^5$ | \n| $8$ | $75$ | $1.5\\times 10^5$ | \n| $9$ | $90$ | $1.75\\times 10^5$ | \n| $10$ | $100$ | $2\\times 10^5$ | \n\n对于 $100\\%$ 的数据，保证 $n \\le 100$，所有 $a_i\\le 200,000$。", "locale": "zh-CN"}}}
{"pid": "P11153", "type": "P", "difficulty": 0, "samples": [["见附件压缩包中的 1~10.in。", "见附件压缩包中的 1~10.ans。"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "THUWC"], "title": "[THUWC 2018] 角点检测（未配置 SPJ）", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T3。$\\texttt{3s,0.5G}$。\n\n---\n\n\n计算机视觉（Computer Vision）中，一个局部特征（local feature）被定义为“一个与其直接邻域有显著不同的小区域”，其中“显著不同”可以是许多可能，如亮度、颜色、纹理等等。足够好的特征可以让我们进一步获取图片中除颜色以外的更多（语义）信息。例如，在卷积神经网络（Convolutional Neural Network）中，特征是通过卷积核来提取的，而其层级结构使得高层的信息能通过低层信息结合来生成。一个用于人脸识别的网络中可以存在感知诸如眼、嘴、耳、发、皮肤的不同神经元，并通过卷积连接来激励感知人脸的单元。\n", "description": "在本问题中，我们将会研究一种最基本的局部特征——\"角点\"。从数学上说，角点可以被认为是两条边相交的点；边在图片中，可以认为是其梯度（导数）图像上的光滑连续段（如果你拿黑笔在白纸上画一条直线，由于黑线是一个有宽度的区域，所以实际上是会有两条非常接近的边）。基于这种考虑，学术界已经提出了若干基于 SUSAN、Harris、CSS 等，并有一定表现的角点算法。我们提供了描述 SUSAN、Harris、CSS 算法的一些阅读材料，而你的任务是则是基于我们给出的资料，选取适合自己的算法并完成对应的实现和优化。\n\n注意在实际图片中，由于存在像素离散、色彩渐变、噪声、失真等等因素，很少会有遵循良定义的边存在，因此按某种数学方法找到的这些特征点，从人的角度而言并不一定是角点，或者说会有一定的偏差。但在具体运用上，虽然这些检测点并非角点，但它们在局部上通常依然有足够的特征，所以依然被广泛应用。", "inputFormat": "\n从标准输入读入数据。\n\n输入的第一行包含两个正整数 $w$、$h$，表示图片的宽度和高度。保证 $w \\le 1280$，$h \\le 1280$。\n\n接下来 $h\\times w$ 行，每行包含 $3$ 个非负整数，描述一个像素。其中这些行中的第 $(i-1) \\times w + j$ 行的三个数表示图片第 $i$ 行，第 $j$ 列的像素的 **RGB**，即红（red）、绿（green）、蓝（blue）三通道的数值。整数的范围在 $[0, 255]$ 中。", "outputFormat": "输出到标准输出。\n\n第一行一个整数 $k$，表示检测到的角点数量。\n\n接下来 $k$ 行，每行两个非负整数 $x$、$y$，描述一个角点的坐标。**注意：坐标中 $x$ 是横坐标，即宽度方向；$y$ 是纵坐标，即高度方向。图像左上角的像素 （第 $1$ 行第 $1$ 列）的坐标规定为 $(0, 0)$**。\n", "hint": "#### 样例 $1$ 解释\n\n这组样例的图片和其参考的检测结果如下左图和右图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3vdmk3ar.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/ht9npydk.png)\n#### 数据和评分方法\n\n测试数据一共 $20$ 张图片，每张图片就是一个测试点。**另外**有 $10$ 张图片已经作为你的参考用例和预测试数据。注意：本题的预测试数据与样例**完全相同**，且预测试数据的评测结果与最终评测结果**没有关系**。\n\n我们使用 CSS + Harris(refine) 的结果作为参考算法，并将在参考算法上人工标注的结果作为参考答案。\n\n在评价你的角点是否正确输出时，我们会对你输出的角点和答案的角点进行二分图最大匹配。其中如果一对点对 $a$，$b$ 满足 $a$ 在以 $b$ 为中心的 $5 \\times 5$ 范围以内，那么我们认为这个角点对是可匹配的。如果一个你输出的角点在最大匹配中，那么我们就认为这个角点是正确的。\n\n每个测试点的得分比例用 $F_1$ 表示，它的具体定义为\n\n$$\nF_1 = \\frac{2\\mathit{TP}}{2\\mathit{TP}+\\mathit{FP}+\\mathit{FN}}\n$$\n\n其中 $\\mathit{TP}$（true positive）表示是正确输出的角点数量（即最大匹配数），$\\mathit{FP}$（false positive）表示你输出的点中错误的角点数量，$\\mathit{FN}$（false negative）表示正确的角点中没有被你的角点匹配的数量。\n\n对 $F_1$ 的更进一步解释为：你输出的点中，正确的比例 $\\frac{\\mathit{TP}}{\\mathit{TP}+\\mathit{FP}}$ 叫做“准确率”；应该输出的点中，被你输出的比例 $\\frac{\\mathit{TP}}{\\mathit{TP}+\\mathit{FN}}$ 叫做“召回率”。$F_1$ 是准确率和召回率的调和平均数。\n\n我们选取的图片会保证提供材料中的算法**在特定的优化下**都会有较好的表现。在给定的测试图片下，参考算法对角点的 $F_1$ 检测率为 $90\\%\\sim 100\\%$ 左右。\n\n#### 如何完成本题\n\n下发文件除参考用例外，还有两类文件：描述参考算法的文档和其中一部分实现、一些工具。这些材料你可以任意使用，包括阅读并实现、直接使用部分代码、使用它们辅助你实现或调试等。你也可以不使用它们，完全自己完成本题。\n\n我们推荐你实现我们给出材料中三个算法中的一个或者两个，并在此基础上尝试进行自己的调整~~或魔改~~。三种算法的实现难度和效果从低到高分别为：SUSAN（或它的一种实现方式FAST），Harris，CSS。\n\n工具中包括：输入和PNG格式图片的转换工具，输出结果的可视化工具。\n\n下发文件的具体使用方法，以及**文档的导读**请阅读文件中的 `README.pdf`。\n\n最后请注意：如果你需要用到下发文件中的代码，你应当将其直接复制到你提交的代码中，而不应该使用诸如 `#include` 的方法尝试包含它。你只能提交一个文件，且测试时无法读取到给你的这些文件。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUWC 2018] 角点检测（未配置 SPJ）", "background": "来源：[https://www.gitlink.org.cn/thusaa/thuwc2018](https://www.gitlink.org.cn/thusaa/thuwc2018)。\n\n2018 清华大学信息学冬季体验营（THUWC 2018）D2T3。$\\texttt{3s,0.5G}$。\n\n---\n\n\n计算机视觉（Computer Vision）中，一个局部特征（local feature）被定义为“一个与其直接邻域有显著不同的小区域”，其中“显著不同”可以是许多可能，如亮度、颜色、纹理等等。足够好的特征可以让我们进一步获取图片中除颜色以外的更多（语义）信息。例如，在卷积神经网络（Convolutional Neural Network）中，特征是通过卷积核来提取的，而其层级结构使得高层的信息能通过低层信息结合来生成。一个用于人脸识别的网络中可以存在感知诸如眼、嘴、耳、发、皮肤的不同神经元，并通过卷积连接来激励感知人脸的单元。\n", "description": "在本问题中，我们将会研究一种最基本的局部特征——\"角点\"。从数学上说，角点可以被认为是两条边相交的点；边在图片中，可以认为是其梯度（导数）图像上的光滑连续段（如果你拿黑笔在白纸上画一条直线，由于黑线是一个有宽度的区域，所以实际上是会有两条非常接近的边）。基于这种考虑，学术界已经提出了若干基于 SUSAN、Harris、CSS 等，并有一定表现的角点算法。我们提供了描述 SUSAN、Harris、CSS 算法的一些阅读材料，而你的任务是则是基于我们给出的资料，选取适合自己的算法并完成对应的实现和优化。\n\n注意在实际图片中，由于存在像素离散、色彩渐变、噪声、失真等等因素，很少会有遵循良定义的边存在，因此按某种数学方法找到的这些特征点，从人的角度而言并不一定是角点，或者说会有一定的偏差。但在具体运用上，虽然这些检测点并非角点，但它们在局部上通常依然有足够的特征，所以依然被广泛应用。", "inputFormat": "\n从标准输入读入数据。\n\n输入的第一行包含两个正整数 $w$、$h$，表示图片的宽度和高度。保证 $w \\le 1280$，$h \\le 1280$。\n\n接下来 $h\\times w$ 行，每行包含 $3$ 个非负整数，描述一个像素。其中这些行中的第 $(i-1) \\times w + j$ 行的三个数表示图片第 $i$ 行，第 $j$ 列的像素的 **RGB**，即红（red）、绿（green）、蓝（blue）三通道的数值。整数的范围在 $[0, 255]$ 中。", "outputFormat": "输出到标准输出。\n\n第一行一个整数 $k$，表示检测到的角点数量。\n\n接下来 $k$ 行，每行两个非负整数 $x$、$y$，描述一个角点的坐标。**注意：坐标中 $x$ 是横坐标，即宽度方向；$y$ 是纵坐标，即高度方向。图像左上角的像素 （第 $1$ 行第 $1$ 列）的坐标规定为 $(0, 0)$**。\n", "hint": "#### 样例 $1$ 解释\n\n这组样例的图片和其参考的检测结果如下左图和右图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3vdmk3ar.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/ht9npydk.png)\n#### 数据和评分方法\n\n测试数据一共 $20$ 张图片，每张图片就是一个测试点。**另外**有 $10$ 张图片已经作为你的参考用例和预测试数据。注意：本题的预测试数据与样例**完全相同**，且预测试数据的评测结果与最终评测结果**没有关系**。\n\n我们使用 CSS + Harris(refine) 的结果作为参考算法，并将在参考算法上人工标注的结果作为参考答案。\n\n在评价你的角点是否正确输出时，我们会对你输出的角点和答案的角点进行二分图最大匹配。其中如果一对点对 $a$，$b$ 满足 $a$ 在以 $b$ 为中心的 $5 \\times 5$ 范围以内，那么我们认为这个角点对是可匹配的。如果一个你输出的角点在最大匹配中，那么我们就认为这个角点是正确的。\n\n每个测试点的得分比例用 $F_1$ 表示，它的具体定义为\n\n$$\nF_1 = \\frac{2\\mathit{TP}}{2\\mathit{TP}+\\mathit{FP}+\\mathit{FN}}\n$$\n\n其中 $\\mathit{TP}$（true positive）表示是正确输出的角点数量（即最大匹配数），$\\mathit{FP}$（false positive）表示你输出的点中错误的角点数量，$\\mathit{FN}$（false negative）表示正确的角点中没有被你的角点匹配的数量。\n\n对 $F_1$ 的更进一步解释为：你输出的点中，正确的比例 $\\frac{\\mathit{TP}}{\\mathit{TP}+\\mathit{FP}}$ 叫做“准确率”；应该输出的点中，被你输出的比例 $\\frac{\\mathit{TP}}{\\mathit{TP}+\\mathit{FN}}$ 叫做“召回率”。$F_1$ 是准确率和召回率的调和平均数。\n\n我们选取的图片会保证提供材料中的算法**在特定的优化下**都会有较好的表现。在给定的测试图片下，参考算法对角点的 $F_1$ 检测率为 $90\\%\\sim 100\\%$ 左右。\n\n#### 如何完成本题\n\n下发文件除参考用例外，还有两类文件：描述参考算法的文档和其中一部分实现、一些工具。这些材料你可以任意使用，包括阅读并实现、直接使用部分代码、使用它们辅助你实现或调试等。你也可以不使用它们，完全自己完成本题。\n\n我们推荐你实现我们给出材料中三个算法中的一个或者两个，并在此基础上尝试进行自己的调整~~或魔改~~。三种算法的实现难度和效果从低到高分别为：SUSAN（或它的一种实现方式FAST），Harris，CSS。\n\n工具中包括：输入和PNG格式图片的转换工具，输出结果的可视化工具。\n\n下发文件的具体使用方法，以及**文档的导读**请阅读文件中的 `README.pdf`。\n\n最后请注意：如果你需要用到下发文件中的代码，你应当将其直接复制到你提交的代码中，而不应该使用诸如 `#include` 的方法尝试包含它。你只能提交一个文件，且测试时无法读取到给你的这些文件。", "locale": "zh-CN"}}}
{"pid": "P11154", "type": "P", "difficulty": 1, "samples": [["44 0 0 0", "EX+"], ["33 10 0 1", "AA"], ["0 0 0 1", "D"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "梦熊比赛"], "title": "【MX-X6-T0】Arcaea Scoring System", "background": "原题链接：<https://oier.team/problems/X6A>。", "description": "Arcaea 是一款风靡全球的音乐游戏，以其创新式的三维立体游玩界面知名。在 Arcaea 中，玩家通过点击/滑动屏幕的方式随着音乐的节奏游玩对应的谱面。一次谱面游玩的计分方式如下：\n\n- 谱面包含若干个**物件**。每一个物件的判定结果有 **大 Pure**、**小 Pure**、**Far**、**Lost** 四种。\n- 对于一个 $n$ 个物件的谱面，其 **基本分** 为 $10^7$ 分，**附加分** 为 $n$ 分，满分为 $10^7+n$ 分。每一个物件分别占 $\\dfrac{10^7}{n}$ 分 **基本分** 和 $1$ 分 **附加分**。\n- 如果一个物件获得 **大 Pure** 判定，则玩家获得该物件的全部基本分和附加分。\n- 如果一个物件获得 **小 Pure** 判定，则玩家仅获得该物件的全部基本分，不获得附加分。\n- 如果一个物件获得 **Far** 判定，则玩家仅获得该物件的基本分的一半。\n- 如果一个物件获得 **Lost** 判定，则玩家不获得任何分数。\n- 游玩分数为玩家所有物件获得的分数总和**下取整**。\n\n玩家在分数的基础上可以获得 **评级**：\n\n- 游玩分数 $\\geq 9.9\\times 10^6$ 时，获得 **EX+** 评级；\n- 游玩分数 $\\geq 9.8\\times 10^6$ 但 $<9.9\\times 10^6$ 时，获得 **EX** 评级；\n- 游玩分数 $\\geq 9.5\\times 10^6$ 但 $<9.8\\times 10^6$ 时，获得 **AA** 评级；\n- 游玩分数 $\\geq 9.2\\times 10^6$ 但 $<9.5\\times 10^6$ 时，获得 **A** 评级；\n- 游玩分数 $\\geq 8.9\\times 10^6$ 但 $<9.2\\times 10^6$ 时，获得 **B** 评级；\n- 游玩分数 $\\geq 8.6\\times 10^6$ 但 $<8.9\\times 10^6$ 时，获得 **C** 评级；\n- 游玩分数 $<8.6\\times 10^6$ 时，获得 **D** 评级。\n\n现在分别给定一次谱面游玩的四种判定的个数，请计算这次游玩的评级。", "inputFormat": "一行四个空格分隔的整数 $p_1,p_0,f,l$，分别表示 **大 Pure**、**小 Pure**、**Far**、**Lost** 的个数。其中谱面物件个数 $n=p_1+p_0+f+l$。", "outputFormat": "输出一个字符串表示评级，七种评级分别对应输出 `EX+`、`EX`、`AA`、`A`、`B`、`C`、`D`。", "hint": "**【样例解释 #1】**\n\n所有物件的判定结果均为大 Pure，因此玩家获得全部基本分 $10^7$ 分和全部附加分，由于总共有 $44$ 个物件，故额外获得 $44$ 分，故游玩分数为 $10{,}000{,}044$；总分大于等于 $9.9\\times 10^6$，从而获得 EX+ 评级。\n\n**【样例解释 #2】**\n\n物件个数为 $33 + 10 + 0 + 1 = 44$ 个。$33$ 个物件的判定结果为大 Pure、$10$ 个物件的判定结果为小 Pure、$1$ 个物件的判定结果为 Lost，因此玩家获得 $\\dfrac{43}{44} \\times 10^7$ 的基本分和 $33$ 分附加分，故分数总和为 $9{,}772{,}760.\\dot 2 \\dot 7$，游玩分数向下取整到 $9{,}772{,}760$；总分大于等于 $9.5\\times 10^6$ 且小于 $9.8\\times 10^6$，从而获得 AA 评级。\n\n**【数据范围】**\n\n对于所有数据，保证 $p_0,p_1,f,l\\geq 0$，$1\\leq n\\leq 100$。\n\n共 $10$ 组数据，对于前 $2$ 组数据，保证 $n=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T0】Arcaea Scoring System", "background": "原题链接：<https://oier.team/problems/X6A>。", "description": "Arcaea 是一款风靡全球的音乐游戏，以其创新式的三维立体游玩界面知名。在 Arcaea 中，玩家通过点击/滑动屏幕的方式随着音乐的节奏游玩对应的谱面。一次谱面游玩的计分方式如下：\n\n- 谱面包含若干个**物件**。每一个物件的判定结果有 **大 Pure**、**小 Pure**、**Far**、**Lost** 四种。\n- 对于一个 $n$ 个物件的谱面，其 **基本分** 为 $10^7$ 分，**附加分** 为 $n$ 分，满分为 $10^7+n$ 分。每一个物件分别占 $\\dfrac{10^7}{n}$ 分 **基本分** 和 $1$ 分 **附加分**。\n- 如果一个物件获得 **大 Pure** 判定，则玩家获得该物件的全部基本分和附加分。\n- 如果一个物件获得 **小 Pure** 判定，则玩家仅获得该物件的全部基本分，不获得附加分。\n- 如果一个物件获得 **Far** 判定，则玩家仅获得该物件的基本分的一半。\n- 如果一个物件获得 **Lost** 判定，则玩家不获得任何分数。\n- 游玩分数为玩家所有物件获得的分数总和**下取整**。\n\n玩家在分数的基础上可以获得 **评级**：\n\n- 游玩分数 $\\geq 9.9\\times 10^6$ 时，获得 **EX+** 评级；\n- 游玩分数 $\\geq 9.8\\times 10^6$ 但 $<9.9\\times 10^6$ 时，获得 **EX** 评级；\n- 游玩分数 $\\geq 9.5\\times 10^6$ 但 $<9.8\\times 10^6$ 时，获得 **AA** 评级；\n- 游玩分数 $\\geq 9.2\\times 10^6$ 但 $<9.5\\times 10^6$ 时，获得 **A** 评级；\n- 游玩分数 $\\geq 8.9\\times 10^6$ 但 $<9.2\\times 10^6$ 时，获得 **B** 评级；\n- 游玩分数 $\\geq 8.6\\times 10^6$ 但 $<8.9\\times 10^6$ 时，获得 **C** 评级；\n- 游玩分数 $<8.6\\times 10^6$ 时，获得 **D** 评级。\n\n现在分别给定一次谱面游玩的四种判定的个数，请计算这次游玩的评级。", "inputFormat": "一行四个空格分隔的整数 $p_1,p_0,f,l$，分别表示 **大 Pure**、**小 Pure**、**Far**、**Lost** 的个数。其中谱面物件个数 $n=p_1+p_0+f+l$。", "outputFormat": "输出一个字符串表示评级，七种评级分别对应输出 `EX+`、`EX`、`AA`、`A`、`B`、`C`、`D`。", "hint": "**【样例解释 #1】**\n\n所有物件的判定结果均为大 Pure，因此玩家获得全部基本分 $10^7$ 分和全部附加分，由于总共有 $44$ 个物件，故额外获得 $44$ 分，故游玩分数为 $10{,}000{,}044$；总分大于等于 $9.9\\times 10^6$，从而获得 EX+ 评级。\n\n**【样例解释 #2】**\n\n物件个数为 $33 + 10 + 0 + 1 = 44$ 个。$33$ 个物件的判定结果为大 Pure、$10$ 个物件的判定结果为小 Pure、$1$ 个物件的判定结果为 Lost，因此玩家获得 $\\dfrac{43}{44} \\times 10^7$ 的基本分和 $33$ 分附加分，故分数总和为 $9{,}772{,}760.\\dot 2 \\dot 7$，游玩分数向下取整到 $9{,}772{,}760$；总分大于等于 $9.5\\times 10^6$ 且小于 $9.8\\times 10^6$，从而获得 AA 评级。\n\n**【数据范围】**\n\n对于所有数据，保证 $p_0,p_1,f,l\\geq 0$，$1\\leq n\\leq 100$。\n\n共 $10$ 组数据，对于前 $2$ 组数据，保证 $n=1$。", "locale": "zh-CN"}}}
{"pid": "P11155", "type": "P", "difficulty": 2, "samples": [["3\n0\n1 1\n1 2\n3\n1 1 1\n1 0 1\n0 0 0\n", "3\n1\n0"], ["10\n0\n1 1\n1 2\n3 1 2 3\n4 1 4 2 3\n0\n5 6 4 5 2 1\n0\n1 4\n1 9\n10\n1 0 0 1 1 0 1 0 0 0\n1 0 1 0 1 0 1 0 1 0\n1 0 1 1 1 1 1 1 0 1\n1 1 0 1 1 0 1 1 0 1\n1 1 0 1 0 0 0 1 1 1\n1 1 0 1 0 1 0 1 1 1\n1 0 0 1 0 1 1 1 0 1\n1 1 0 1 1 1 0 0 1 1\n1 1 1 0 0 0 0 0 1 1\n1 0 0 0 1 1 1 0 1 1", "1\n1\n3\n3\n3\n4\n3\n3\n3\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "梦熊比赛"], "title": "【MX-X6-T1】 Subtask Dependency", "background": "原题链接：<https://oier.team/problems/X6B>。", "description": "现在有一道 OI 题。这道题有 $n$ 个子任务，编号从 $1$ 到 $n$。编号为 $i$ 的子任务依赖 $d_i$ 个子任务，这些子任务的编号分别为 $a_{i,1},a_{i,2},\\dots,a_{i,d_i}$。保证对于所有 $1\\leq i\\leq n,1\\leq j\\leq d_i$，有 $a_{i,j}<i$，即**一个子任务只会依赖编号小于自己的子任务**。注意一个子任务可能不依赖任何子任务。\n\n一个选手的程序可以描述为一个长度为 $n$ 的 $0/1$ 序列 $p_1,p_2,\\dots,p_n$，分别表示该程序能否通过第 $i$ 个子任务。\n\n评测一个程序时，评测机会按照编号从小到大依次考虑每一个子任务。当考虑到第 $i$ 个子任务时：\n\n- 如果该子任务依赖的子任务中存在一个子任务的状态为错误，则该子任务的状态为错误；\n- 否则，评测机测试该子任务。如果选手的程序能通过该子任务，则该子任务状态为正确；否则状态为错误。\n\n一个程序的得分是评测后状态为正确的子任务个数。\n\n现在有 $m$ 个选手提交程序，你需要分别计算它们的得分。", "inputFormat": "第一行一个整数 $n$ 表示子任务个数。\n\n接下来 $n$ 行，第 $i$ 行首先输入一个整数 $d_i$ 表示第 $i$ 个子任务依赖的子任务个数；接下来输入 $d_i$ 个整数 $a_{i,1},a_{i,2},\\dots,a_{i,d_i}$ 表示依赖的子任务编号。保证所有 $a_{i,j}<i$。\n\n接下来一行一个整数 $m$，表示选手程序个数。\n\n接下来 $m$ 行，每行 $n$ 个整数，其中第 $i$ 行第 $j$ 个整数 $p_{i,j}$ 为 $0$ 表示第 $i$ 个选手的程序不能通过第 $j$ 个子任务；为 $1$ 表示第 $i$ 个选手的程序能通过第 $j$ 个子任务。", "outputFormat": "输出 $m$ 行，第 $i$ 行输出第 $i$ 个选手的得分。", "hint": "**【样例解释 #1】**\n\n- 选手 1 的程序可以通过所有子任务，因此所有 $3$ 个子任务的结果均为正确；\n- 选手 2 的程序不能通过子任务 2，因此子任务 2 会被判定为错误；由于子任务 3 依赖子任务 2，因此即使选手 2 的程序可以通过子任务 3，子任务 3 也会被判定为错误。该选手的程序的评测结果只有子任务 1 正确。\n- 选手 3 的程序不能通过任何子任务，因此所有子任务结果均为错误。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq n,m\\leq 100$，$0\\leq d_i<i$，$1\\leq a_{i,j}<i$，$0\\leq p_{i,j}\\leq 1$，不存在 $i$ 和 $j_1\\neq j_2$ 使得 $a_{i,j_1}=a_{i,j_2}$。\n\n共 $10$ 组数据，具体限制如下：\n\n- 对于第 $1,2$ 组数据，满足 $n=1$；\n- 对于第 $3,4,5$ 组数据，满足对所有 $i$，有 $d_i\\leq 1$；\n- 对于其他数据，不满足任何附加限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T1】 Subtask Dependency", "background": "原题链接：<https://oier.team/problems/X6B>。", "description": "现在有一道 OI 题。这道题有 $n$ 个子任务，编号从 $1$ 到 $n$。编号为 $i$ 的子任务依赖 $d_i$ 个子任务，这些子任务的编号分别为 $a_{i,1},a_{i,2},\\dots,a_{i,d_i}$。保证对于所有 $1\\leq i\\leq n,1\\leq j\\leq d_i$，有 $a_{i,j}<i$，即**一个子任务只会依赖编号小于自己的子任务**。注意一个子任务可能不依赖任何子任务。\n\n一个选手的程序可以描述为一个长度为 $n$ 的 $0/1$ 序列 $p_1,p_2,\\dots,p_n$，分别表示该程序能否通过第 $i$ 个子任务。\n\n评测一个程序时，评测机会按照编号从小到大依次考虑每一个子任务。当考虑到第 $i$ 个子任务时：\n\n- 如果该子任务依赖的子任务中存在一个子任务的状态为错误，则该子任务的状态为错误；\n- 否则，评测机测试该子任务。如果选手的程序能通过该子任务，则该子任务状态为正确；否则状态为错误。\n\n一个程序的得分是评测后状态为正确的子任务个数。\n\n现在有 $m$ 个选手提交程序，你需要分别计算它们的得分。", "inputFormat": "第一行一个整数 $n$ 表示子任务个数。\n\n接下来 $n$ 行，第 $i$ 行首先输入一个整数 $d_i$ 表示第 $i$ 个子任务依赖的子任务个数；接下来输入 $d_i$ 个整数 $a_{i,1},a_{i,2},\\dots,a_{i,d_i}$ 表示依赖的子任务编号。保证所有 $a_{i,j}<i$。\n\n接下来一行一个整数 $m$，表示选手程序个数。\n\n接下来 $m$ 行，每行 $n$ 个整数，其中第 $i$ 行第 $j$ 个整数 $p_{i,j}$ 为 $0$ 表示第 $i$ 个选手的程序不能通过第 $j$ 个子任务；为 $1$ 表示第 $i$ 个选手的程序能通过第 $j$ 个子任务。", "outputFormat": "输出 $m$ 行，第 $i$ 行输出第 $i$ 个选手的得分。", "hint": "**【样例解释 #1】**\n\n- 选手 1 的程序可以通过所有子任务，因此所有 $3$ 个子任务的结果均为正确；\n- 选手 2 的程序不能通过子任务 2，因此子任务 2 会被判定为错误；由于子任务 3 依赖子任务 2，因此即使选手 2 的程序可以通过子任务 3，子任务 3 也会被判定为错误。该选手的程序的评测结果只有子任务 1 正确。\n- 选手 3 的程序不能通过任何子任务，因此所有子任务结果均为错误。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq n,m\\leq 100$，$0\\leq d_i<i$，$1\\leq a_{i,j}<i$，$0\\leq p_{i,j}\\leq 1$，不存在 $i$ 和 $j_1\\neq j_2$ 使得 $a_{i,j_1}=a_{i,j_2}$。\n\n共 $10$ 组数据，具体限制如下：\n\n- 对于第 $1,2$ 组数据，满足 $n=1$；\n- 对于第 $3,4,5$ 组数据，满足对所有 $i$，有 $d_i\\leq 1$；\n- 对于其他数据，不满足任何附加限制。", "locale": "zh-CN"}}}
{"pid": "P11156", "type": "P", "difficulty": 2, "samples": [["3\n3 1\n3 2\n6 3", "114 514\n2005 1130\n59001 897"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "Special Judge", "梦熊比赛"], "title": "【MX-X6-T2】もしも", "background": "原题链接：<https://oier.team/problems/X6C>。\n\n---\n\n> _もしも$\\\\$\n数字がない世界だったら$\\\\$\n生きる期限なんて$\\\\$\nなかったのかな$\\\\$\nもしもの話なら良かった$\\\\$\nまた出逢えるからって$\\\\$\n言うんだ$\\\\$\nまたね。_\n>\n>_—— [もしも - Nanatsukaze / Dankidz](https://music.163.com/#/song?id=2102257032)_\n\n除法能够帮我们消除这个世界上的数字吗？\n\n如果不能，又能否让我们再次相见？", "description": "假设有正整数序列 $a_1, a_2, \\ldots, a_n$，其中：\n\n- 对于 $i\\geq 3$，满足 $a_i$ 等于 $\\dfrac{a_{i-2}}{a_{i-1}}$ **上取整**；\n- 对于任意 $1\\leq i\\leq n$，满足 $1\\leq a_i\\leq 10^9$。\n\n现在给定 $n$ 和 $a_n$，求任意一组可能的 $a_1,a_2$。\n\n其中一个数 $x$ 上取整等于最小的 $\\geq x$ 的整数。例如 $\\dfrac{7}{3}$ 上取整等于 $3$，$4$ 上取整等于 $4$。", "inputFormat": "单个测试点包含多组测试数据，第一行一个整数 $T$ 表示数据组数。\n\n接下来 $T$ 行，每行两个空格分隔的整数表示该组数据的 $n,a_n$。", "outputFormat": "对于每一组数据输出一行两个整数表示一组可能的 $a_1,a_2$。如有多种解可任意输出一种。可以证明本题数据范围下一定有解。", "hint": "**【样例解释】**\n\n对于三组数据，序列分别为：\n\n- $a=[114,514,1]$；\n- $a=[2005,1130,2]$；\n- $a=[59001,897,66,14,5,3]$。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq T\\leq 1000$，$3\\leq n\\leq 10^9$，$1\\leq a_n\\leq 10^9$。\n\n共 $10$ 组数据：\n\n- 对于前 $2$ 组数据，额外满足 $n\\leq 6$，$a_n\\leq 10$；\n- 对于前 $5$ 组数据，额外满足 $n\\leq 1000$；\n- 对于第 $6,7$ 组数据，额外满足 $a_n=1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T2】もしも", "background": "原题链接：<https://oier.team/problems/X6C>。\n\n---\n\n> _もしも$\\\\$\n数字がない世界だったら$\\\\$\n生きる期限なんて$\\\\$\nなかったのかな$\\\\$\nもしもの話なら良かった$\\\\$\nまた出逢えるからって$\\\\$\n言うんだ$\\\\$\nまたね。_\n>\n>_—— [もしも - Nanatsukaze / Dankidz](https://music.163.com/#/song?id=2102257032)_\n\n除法能够帮我们消除这个世界上的数字吗？\n\n如果不能，又能否让我们再次相见？", "description": "假设有正整数序列 $a_1, a_2, \\ldots, a_n$，其中：\n\n- 对于 $i\\geq 3$，满足 $a_i$ 等于 $\\dfrac{a_{i-2}}{a_{i-1}}$ **上取整**；\n- 对于任意 $1\\leq i\\leq n$，满足 $1\\leq a_i\\leq 10^9$。\n\n现在给定 $n$ 和 $a_n$，求任意一组可能的 $a_1,a_2$。\n\n其中一个数 $x$ 上取整等于最小的 $\\geq x$ 的整数。例如 $\\dfrac{7}{3}$ 上取整等于 $3$，$4$ 上取整等于 $4$。", "inputFormat": "单个测试点包含多组测试数据，第一行一个整数 $T$ 表示数据组数。\n\n接下来 $T$ 行，每行两个空格分隔的整数表示该组数据的 $n,a_n$。", "outputFormat": "对于每一组数据输出一行两个整数表示一组可能的 $a_1,a_2$。如有多种解可任意输出一种。可以证明本题数据范围下一定有解。", "hint": "**【样例解释】**\n\n对于三组数据，序列分别为：\n\n- $a=[114,514,1]$；\n- $a=[2005,1130,2]$；\n- $a=[59001,897,66,14,5,3]$。\n\n**【数据范围】**\n\n对于所有数据，满足 $1\\leq T\\leq 1000$，$3\\leq n\\leq 10^9$，$1\\leq a_n\\leq 10^9$。\n\n共 $10$ 组数据：\n\n- 对于前 $2$ 组数据，额外满足 $n\\leq 6$，$a_n\\leq 10$；\n- 对于前 $5$ 组数据，额外满足 $n\\leq 1000$；\n- 对于第 $6,7$ 组数据，额外满足 $a_n=1$。", "locale": "zh-CN"}}}
{"pid": "P11157", "type": "P", "difficulty": 4, "samples": [["3\n-1 1 4", "1 2\n1 1\n0"], ["5\n1 -1 0 2 -3", "0\n1 -1\n1 0\n0\n1 -3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "Special Judge", "梦熊比赛"], "title": "【MX-X6-T3】さよならワンダーランド", "background": "原题链接：<https://oier.team/problems/X6D>。\n\n---\n\n> _ほら行くよって$\\\\$\n手を引いてくれた君は$\\\\$\n綺麗な目して言うんだ$\\\\$\n僕らあの頃と$\\\\$\n何も変わらないから$\\\\$\nせめて$\\\\$\n二人で夢を見させて_\n>\n>_—— [さよならワンダーランド - Nanatsukaze](https://music.163.com/#/song?id=2053736409)_\n\n能够带你进入孩童时期的梦境中的那个人，该在哪里寻找呢？", "description": "给定序列 $a_1, a_2, \\dots, a_n$，请对于每一个 $1\\sim n$ 的整数 $i$ 求任意一个整数 $j$ 使得以下条件同时成立，或判断不存在这样的 $j$：\n\n- $1\\leq i+j\\leq n$；\n- $a_i \\leq j \\leq a_{i+j}$。\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个空格分隔的整数 $a_1,a_2,\\dots,a_n$。", "outputFormat": "输出 $n$ 行。\n\n对于第 $i$ 行，如果能够找到 $j$ 使得 $1\\leq i+j\\leq n$ 且 $a_i \\leq j \\leq a_{i+j}$ 成立，则先输出一个 $1$，再输出你找到的 $j$，空格分隔。如果有多个合法 $j$ 可输出任意一个。如果不存在这样的 $j$，则仅输出一个 $0$。", "hint": "**【样例解释 #1】**\n\n$i=1,j=2$ 时，$a_i=-1$，$a_{i+j}=4$，满足 $a_i\\leq j\\leq a_{i+j}$。\n\n$i=2,j=1$ 时，$a_i=1$，$a_{i+j}=4$，满足 $a_i\\leq j\\leq a_{i+j}$。\n\n$i=3$ 时可以证明不存在符合条件的 $j$。\n\n**【数据范围】**\n\n对于所有数据，保证 $1\\leq n \\leq 3\\times 10^5$，$-10^9\\leq a_i\\leq 10^9$。\n\n**捆绑测试**，共 3 个 Subtask，具体限制如下所示：\n\n- Subtask 1（17 pts）：$n\\leq 1000$。\n- Subtask 2（39 pts）：对所有 $1\\leq i\\leq n$ 保证 $a_i\\leq -i$。\n- Subtask 3（44 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T3】さよならワンダーランド", "background": "原题链接：<https://oier.team/problems/X6D>。\n\n---\n\n> _ほら行くよって$\\\\$\n手を引いてくれた君は$\\\\$\n綺麗な目して言うんだ$\\\\$\n僕らあの頃と$\\\\$\n何も変わらないから$\\\\$\nせめて$\\\\$\n二人で夢を見させて_\n>\n>_—— [さよならワンダーランド - Nanatsukaze](https://music.163.com/#/song?id=2053736409)_\n\n能够带你进入孩童时期的梦境中的那个人，该在哪里寻找呢？", "description": "给定序列 $a_1, a_2, \\dots, a_n$，请对于每一个 $1\\sim n$ 的整数 $i$ 求任意一个整数 $j$ 使得以下条件同时成立，或判断不存在这样的 $j$：\n\n- $1\\leq i+j\\leq n$；\n- $a_i \\leq j \\leq a_{i+j}$。\n", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个空格分隔的整数 $a_1,a_2,\\dots,a_n$。", "outputFormat": "输出 $n$ 行。\n\n对于第 $i$ 行，如果能够找到 $j$ 使得 $1\\leq i+j\\leq n$ 且 $a_i \\leq j \\leq a_{i+j}$ 成立，则先输出一个 $1$，再输出你找到的 $j$，空格分隔。如果有多个合法 $j$ 可输出任意一个。如果不存在这样的 $j$，则仅输出一个 $0$。", "hint": "**【样例解释 #1】**\n\n$i=1,j=2$ 时，$a_i=-1$，$a_{i+j}=4$，满足 $a_i\\leq j\\leq a_{i+j}$。\n\n$i=2,j=1$ 时，$a_i=1$，$a_{i+j}=4$，满足 $a_i\\leq j\\leq a_{i+j}$。\n\n$i=3$ 时可以证明不存在符合条件的 $j$。\n\n**【数据范围】**\n\n对于所有数据，保证 $1\\leq n \\leq 3\\times 10^5$，$-10^9\\leq a_i\\leq 10^9$。\n\n**捆绑测试**，共 3 个 Subtask，具体限制如下所示：\n\n- Subtask 1（17 pts）：$n\\leq 1000$。\n- Subtask 2（39 pts）：对所有 $1\\leq i\\leq n$ 保证 $a_i\\leq -i$。\n- Subtask 3（44 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11158", "type": "P", "difficulty": 5, "samples": [["4\n1 2 3 4", "8"], ["10\n9 8 1 10 7 2 4 3 6 5", "27"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "分类讨论", "梦熊比赛"], "title": "【MX-X6-T4】夢重力", "background": "原题链接：<https://oier.team/problems/X6E>。\n\n---\n\n> _空を仰げば$\\\\$\n青さが僕を$\\\\$\n飲み込んでしまう気がしてて$\\\\$\n無重力なら楽だろうか$\\\\$\n宇宙まで行けたら_\n>\n> _—— [夢重力 - Nanatsukaze](https://music.163.com/#/song?id=2155399298)_\n\n在天体的随机运转中，如何找到一个没有重力的点呢？", "description": "给定一个 $n\\times n$ 的网格，其中有 $n$ 个关键点，保证每行每列各有一个关键点。保证 $n$ 是偶数。\n\n我们定义网格中的一个无重力区域为网格的连续的 $\\dfrac{n}{2}$ 行和连续的 $\\dfrac{n}{2}$ 列构成的大小为 $\\dfrac{n}{2}\\times \\dfrac{n}{2}$ 的子正方形，使得其中不包含任意关键点。\n\n定义 $f(i,j)$ 为交换网格的第 $i$ 行和第 $j$ 行后，不同的无重力区域个数。请对于所有可能的交换求 $f(i,j)$ 的和，即你需要求：\n\n$$\\sum_{1\\leq i<j\\leq n}f(i,j)$$\n\n注意求 $f$ 并不会真正在网格中执行交换，整个过程中不会对网格进行任何修改。", "inputFormat": "第一行一个整数表示 $n$。保证 $n$ 是偶数。\n\n接下来一行 $n$ 个空格分隔的整数 $p_1,p_2,\\dots,p_n$，表示 $n$ 个关键点的位置分别是 $(1,p_1),(2,p_2),\\dots,(n,p_n)$。保证 $p$ 是一个排列。", "outputFormat": "一行一个整数表示答案。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/49w2x0r4.png)\n\n上图中，左上角对应原网格。灰色的部分表示关键点。\n\n下面的 $6$ 个网格分别对应所有可能的交换产生的网格（依次为交换 $(1,2),(1,3),(1,4),(2,3),(2,4),(3,4)$），并使用红色和蓝色标出存在的无重力区域（紫色的位置表示两个无重力区域的交）。不难看出答案为 $2+2+0+0+2+2=8$。\n\n**【数据范围】**\n\n对于所有数据，保证 $2\\leq n\\leq 2\\times 10^5$ 且 $n$ 是偶数，保证 $p$ 是一个排列。\n\n**捆绑测试**，共 4 个 Subtask，具体限制如下所示：\n\n- Subtask 1（12 pts）：$n\\leq 10$；\n- Subtask 2（19 pts）：$n\\leq 200$；\n- Subtask 3（34 pts）：$n\\leq 2000$；\n- Subtask 4（35 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T4】夢重力", "background": "原题链接：<https://oier.team/problems/X6E>。\n\n---\n\n> _空を仰げば$\\\\$\n青さが僕を$\\\\$\n飲み込んでしまう気がしてて$\\\\$\n無重力なら楽だろうか$\\\\$\n宇宙まで行けたら_\n>\n> _—— [夢重力 - Nanatsukaze](https://music.163.com/#/song?id=2155399298)_\n\n在天体的随机运转中，如何找到一个没有重力的点呢？", "description": "给定一个 $n\\times n$ 的网格，其中有 $n$ 个关键点，保证每行每列各有一个关键点。保证 $n$ 是偶数。\n\n我们定义网格中的一个无重力区域为网格的连续的 $\\dfrac{n}{2}$ 行和连续的 $\\dfrac{n}{2}$ 列构成的大小为 $\\dfrac{n}{2}\\times \\dfrac{n}{2}$ 的子正方形，使得其中不包含任意关键点。\n\n定义 $f(i,j)$ 为交换网格的第 $i$ 行和第 $j$ 行后，不同的无重力区域个数。请对于所有可能的交换求 $f(i,j)$ 的和，即你需要求：\n\n$$\\sum_{1\\leq i<j\\leq n}f(i,j)$$\n\n注意求 $f$ 并不会真正在网格中执行交换，整个过程中不会对网格进行任何修改。", "inputFormat": "第一行一个整数表示 $n$。保证 $n$ 是偶数。\n\n接下来一行 $n$ 个空格分隔的整数 $p_1,p_2,\\dots,p_n$，表示 $n$ 个关键点的位置分别是 $(1,p_1),(2,p_2),\\dots,(n,p_n)$。保证 $p$ 是一个排列。", "outputFormat": "一行一个整数表示答案。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/49w2x0r4.png)\n\n上图中，左上角对应原网格。灰色的部分表示关键点。\n\n下面的 $6$ 个网格分别对应所有可能的交换产生的网格（依次为交换 $(1,2),(1,3),(1,4),(2,3),(2,4),(3,4)$），并使用红色和蓝色标出存在的无重力区域（紫色的位置表示两个无重力区域的交）。不难看出答案为 $2+2+0+0+2+2=8$。\n\n**【数据范围】**\n\n对于所有数据，保证 $2\\leq n\\leq 2\\times 10^5$ 且 $n$ 是偶数，保证 $p$ 是一个排列。\n\n**捆绑测试**，共 4 个 Subtask，具体限制如下所示：\n\n- Subtask 1（12 pts）：$n\\leq 10$；\n- Subtask 2（19 pts）：$n\\leq 200$；\n- Subtask 3（34 pts）：$n\\leq 2000$；\n- Subtask 4（35 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11159", "type": "P", "difficulty": 5, "samples": [["5\n1 1 1 4 4", "2"], ["16\n1 2 1 4 1 4 1 4 9 1 1 12 1 1 12 1", "7181107"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["组合数学", "梦熊比赛"], "title": "【MX-X6-T5】 再生", "background": "原题链接：<https://oier.team/problems/X6F>。\n\n---\n\n> _このまま$\\\\$\nらったった$\\\\$\n音に乗って$\\\\$\n今きっと世界で僕だけだ$\\\\$\n後ろ向きな歌を聴いて$\\\\$\n少しだけ$\\\\$\n前向きに生きていく_\n>\n>_—— [再生 - Nanatsukaze](https://music.163.com/#/song?id=2133659925)_\n\n破碎的点依照破碎的规则进行重组，如此再生的一个结构将会是什么样的呢？", "description": "现有一棵 $n$ 个点的有标号有根树，给定其长链剖分得到的 top 数组，请你输出有多少种不同的树可以在长链剖分之后得到该 top 数组。答案对 $20051131$（质数）取模。\n\n具体来说，对于一棵树 $T$，对所有点 $u$ 定义其树高 $h_u$：\n\n- 如果 $u$ 是叶子，则 $h_u=1$。\n- 否则设 $u$ 的孩子集合为 $S_u$，则 $h_u=\\max\\limits_{v\\in S_u}h_v + 1$。\n\n给定数组 $t_{1\\cdots n}$，你需要计算有多少种树满足：\n\n- 对于根节点 $r$，满足 $t_r=r$。\n- 对于每一个不是叶子的节点 $u$，存在恰好一个孩子 $v$ 满足 $h_v+1=h_u$ 并且 $t_v=t_u$，其他孩子满足 $t_v=v$。\n\n模 $20051131$（质数）。\n\n两棵树不同当且仅当它们的根不同或它们的边集不同。\n\n**保证答案不为 $\\bf 0$，但是不保证答案在模意义下不为 $\\bf 0$。**", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行，$n$ 个空格分隔的正整数 $t_{1\\cdots n}$，表示 top 数组。", "outputFormat": "一行一个整数表示答案对 $20051131$ 取模的值。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7np2ikvh.png)\n\n仅有图中的两种树满足条件。\n\n**【数据范围】**\n\n对于所有数据，保证 $1\\leq n\\leq 5\\times 10^5$，$1\\leq t_i\\leq i$，保证取模前答案不为 $0$。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（11 pts）：$t_i=1$。\n- Subtask 2（24 pts）：$n\\leq 5$。\n- Subtask 3（17 pts）：$n\\leq 16$。\n- Subtask 4（22 pts）：$n\\leq 2\\times 10^3$。\n- Subtask 5（26 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T5】 再生", "background": "原题链接：<https://oier.team/problems/X6F>。\n\n---\n\n> _このまま$\\\\$\nらったった$\\\\$\n音に乗って$\\\\$\n今きっと世界で僕だけだ$\\\\$\n後ろ向きな歌を聴いて$\\\\$\n少しだけ$\\\\$\n前向きに生きていく_\n>\n>_—— [再生 - Nanatsukaze](https://music.163.com/#/song?id=2133659925)_\n\n破碎的点依照破碎的规则进行重组，如此再生的一个结构将会是什么样的呢？", "description": "现有一棵 $n$ 个点的有标号有根树，给定其长链剖分得到的 top 数组，请你输出有多少种不同的树可以在长链剖分之后得到该 top 数组。答案对 $20051131$（质数）取模。\n\n具体来说，对于一棵树 $T$，对所有点 $u$ 定义其树高 $h_u$：\n\n- 如果 $u$ 是叶子，则 $h_u=1$。\n- 否则设 $u$ 的孩子集合为 $S_u$，则 $h_u=\\max\\limits_{v\\in S_u}h_v + 1$。\n\n给定数组 $t_{1\\cdots n}$，你需要计算有多少种树满足：\n\n- 对于根节点 $r$，满足 $t_r=r$。\n- 对于每一个不是叶子的节点 $u$，存在恰好一个孩子 $v$ 满足 $h_v+1=h_u$ 并且 $t_v=t_u$，其他孩子满足 $t_v=v$。\n\n模 $20051131$（质数）。\n\n两棵树不同当且仅当它们的根不同或它们的边集不同。\n\n**保证答案不为 $\\bf 0$，但是不保证答案在模意义下不为 $\\bf 0$。**", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行，$n$ 个空格分隔的正整数 $t_{1\\cdots n}$，表示 top 数组。", "outputFormat": "一行一个整数表示答案对 $20051131$ 取模的值。", "hint": "**【样例解释 #1】**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7np2ikvh.png)\n\n仅有图中的两种树满足条件。\n\n**【数据范围】**\n\n对于所有数据，保证 $1\\leq n\\leq 5\\times 10^5$，$1\\leq t_i\\leq i$，保证取模前答案不为 $0$。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（11 pts）：$t_i=1$。\n- Subtask 2（24 pts）：$n\\leq 5$。\n- Subtask 3（17 pts）：$n\\leq 16$。\n- Subtask 4（22 pts）：$n\\leq 2\\times 10^3$。\n- Subtask 5（26 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11160", "type": "P", "difficulty": 6, "samples": [["11\n1 1\n1 2\n1 2\n1 3\n1 4\n4 10\n3 2 1 2\n2 4\n4 16\n2 4\n4 16", "8\n4\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "字典树 Trie", "梦熊比赛"], "title": "【MX-X6-T6】機械生命体", "background": "原题链接：<https://oier.team/problems/X6G>。\n\n---\n\n> _許してよ、もう$\\\\$\n分かってよ$\\\\$\n此処の正体を$\\\\$\n僕ですら僕を$\\\\$\n愛せないんだって$\\\\$\n感情を持った代償をくれよ$\\\\$\n狂っている_\n>\n> _—— [機械生命体 - Nanatsukaze](https://music.163.com/#/song?id=2627128854)_\n\n二进制的运算和记忆，能够在机械生命体中还原出人类的情感吗？", "description": "维护一个**可重集** $S$，初始为空。支持如下操作：\n\n- `1 x`，你需要在 $S$ 中加入一个数 $x$。\n- `2 x`，你需要在 $S$ 中删除一个数 $x$。保证此时 $S$ 中存在至少一个 $x$。如果存在多个 $x$，则仅删除一个。\n- `3 x k v`，你需要对 $S$ 中所有满足 $\\operatorname{lowbit}(x\\oplus y)\\geq 2^k$ 的 $y$ 增加 $v$ 并对 $2^{32}$ 取模。\n- `4 x`，你需要求出 $\\max\\limits_{y\\in S} \\operatorname{lowbit}(x\\oplus y)$。保证此时 $S$ 不为空。\n\n其中 $\\operatorname{lowbit}(x)$ 表示最大的整数 $k$，使得 $k$ 是 $2$ 的整数次幂并且整除 $x$。$\\oplus$ 代表[按位异或](https://baike.baidu.com/item/%E5%BC%82%E6%88%96/10993677)。\n\n**特殊的，我们在本题定义 $\\boldsymbol{\\textbf{lowbit}(0)=2^{32}}$。**", "inputFormat": "第一行一个整数 $q$，代表询问数量。\n\n接下来 $q$ 行，每行首先输入一个整数 $opt$ 表示操作类型；如果 $opt=3$，则接下来依次输入三个整数 $x,k,v$，否则接下来输入一个整数 $x$。", "outputFormat": "对每一次 `4` 操作，输出一个整数代表答案。", "hint": "**【样例解释】**\n\n第 $6$ 次操作时，集合为 $\\{1,2,2,3,4\\}$，查询 $10$ 时，$\\operatorname{lowbit}(10\\oplus 2)=\\operatorname{lowbit}(8)=8$ 为最大值。\n\n第 $7$ 次操作后，所有 $\\operatorname{lowbit}(x\\oplus 2)\\geq 2^1$ 的数增加 $2$，集合中满足条件的数有 $2,2,4$，于是集合变为 $\\{1,3,4,4,6\\}$。\n\n第 $8$ 次操作删去一个 $4$，集合变为 $\\{1,3,4,6\\}$。\n\n第 $9$ 次操作查询 $16$，$\\operatorname{lowbit}(16\\oplus 4)=\\operatorname{lowbit}(20)=4$ 为最大值。\n\n第 $10$ 次操作再次删去一个 $4$，集合变为 $\\{1,3,6\\}$。\n\n第 $11$ 次操作查询 $16$，$\\operatorname{lowbit}(16\\oplus 6)=\\operatorname{lowbit}(22)=2$ 为最大值。\n\n**【数据范围】**\n\n对于所有数据，$1\\leq q\\leq 5\\times 10^5$，$0\\leq x,y,v\\leq 2^{32}-1$，$0\\leq k\\leq 32$。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（7 pts）：$q\\leq 10^3$。\n- Subtask 2（16 pts）：不存在 3 操作。\n- Subtask 3（21 pts）：对于 3 操作，$k=0$。\n- Subtask 4（28 pts）：对于 3 操作，$v=1$。\n- Subtask 5（28 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T6】機械生命体", "background": "原题链接：<https://oier.team/problems/X6G>。\n\n---\n\n> _許してよ、もう$\\\\$\n分かってよ$\\\\$\n此処の正体を$\\\\$\n僕ですら僕を$\\\\$\n愛せないんだって$\\\\$\n感情を持った代償をくれよ$\\\\$\n狂っている_\n>\n> _—— [機械生命体 - Nanatsukaze](https://music.163.com/#/song?id=2627128854)_\n\n二进制的运算和记忆，能够在机械生命体中还原出人类的情感吗？", "description": "维护一个**可重集** $S$，初始为空。支持如下操作：\n\n- `1 x`，你需要在 $S$ 中加入一个数 $x$。\n- `2 x`，你需要在 $S$ 中删除一个数 $x$。保证此时 $S$ 中存在至少一个 $x$。如果存在多个 $x$，则仅删除一个。\n- `3 x k v`，你需要对 $S$ 中所有满足 $\\operatorname{lowbit}(x\\oplus y)\\geq 2^k$ 的 $y$ 增加 $v$ 并对 $2^{32}$ 取模。\n- `4 x`，你需要求出 $\\max\\limits_{y\\in S} \\operatorname{lowbit}(x\\oplus y)$。保证此时 $S$ 不为空。\n\n其中 $\\operatorname{lowbit}(x)$ 表示最大的整数 $k$，使得 $k$ 是 $2$ 的整数次幂并且整除 $x$。$\\oplus$ 代表[按位异或](https://baike.baidu.com/item/%E5%BC%82%E6%88%96/10993677)。\n\n**特殊的，我们在本题定义 $\\boldsymbol{\\textbf{lowbit}(0)=2^{32}}$。**", "inputFormat": "第一行一个整数 $q$，代表询问数量。\n\n接下来 $q$ 行，每行首先输入一个整数 $opt$ 表示操作类型；如果 $opt=3$，则接下来依次输入三个整数 $x,k,v$，否则接下来输入一个整数 $x$。", "outputFormat": "对每一次 `4` 操作，输出一个整数代表答案。", "hint": "**【样例解释】**\n\n第 $6$ 次操作时，集合为 $\\{1,2,2,3,4\\}$，查询 $10$ 时，$\\operatorname{lowbit}(10\\oplus 2)=\\operatorname{lowbit}(8)=8$ 为最大值。\n\n第 $7$ 次操作后，所有 $\\operatorname{lowbit}(x\\oplus 2)\\geq 2^1$ 的数增加 $2$，集合中满足条件的数有 $2,2,4$，于是集合变为 $\\{1,3,4,4,6\\}$。\n\n第 $8$ 次操作删去一个 $4$，集合变为 $\\{1,3,4,6\\}$。\n\n第 $9$ 次操作查询 $16$，$\\operatorname{lowbit}(16\\oplus 4)=\\operatorname{lowbit}(20)=4$ 为最大值。\n\n第 $10$ 次操作再次删去一个 $4$，集合变为 $\\{1,3,6\\}$。\n\n第 $11$ 次操作查询 $16$，$\\operatorname{lowbit}(16\\oplus 6)=\\operatorname{lowbit}(22)=2$ 为最大值。\n\n**【数据范围】**\n\n对于所有数据，$1\\leq q\\leq 5\\times 10^5$，$0\\leq x,y,v\\leq 2^{32}-1$，$0\\leq k\\leq 32$。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（7 pts）：$q\\leq 10^3$。\n- Subtask 2（16 pts）：不存在 3 操作。\n- Subtask 3（21 pts）：对于 3 操作，$k=0$。\n- Subtask 4（28 pts）：对于 3 操作，$v=1$。\n- Subtask 5（28 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11161", "type": "P", "difficulty": 7, "samples": [["5 3\n1 2 1\n2 3 1\n3 4 1\n4 5 1\n1 4 3 5 1\n2 1 5 1\n1 1 1 3 100", "1\n1\n3"], ["6 12\n3 5 18\n3 1 8\n5 6 3\n6 4 10\n6 2 8\n1 4 3 4 10\n1 5 6 2 5\n2 2 5 1\n1 7 3 2 19\n2 4 6 1\n1 3 5 6 20\n2 3 4 1\n1 9 5 6 16\n2 3 1 32\n2 3 4 30\n2 3 5 22\n2 3 2 21", "0\n0\n0\n8\n8\n8\n8\n8\n12\n19\n19\n40"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态树 LCT", "梦熊比赛"], "title": "【MX-X6-T7】夏が終わる", "background": "原题链接：<https://oier.team/problems/X6H>。\n\n---\n\n> _夏の終わりを知って$\\\\$\nラムネの雫に映る僕達は$\\\\$\n見失いそうな$\\\\$\n茜色の頬を追いかけて$\\\\$\n来年もまた此処に来るんだ_\n>\n>_—— [夏が終わる - Nanatsukaze](https://music.163.com/#/song?id=2614276904)_\n\n一年时间，走一个环，再次回到原点。\n\n在这个世界不间断的变化中，还有机会再遇到你吗？选择一条最优的路径时，又有多大的机会呢？", "description": "给定一棵 $n$ 个点的树 $T$，边带权。定义无向完全图 $G(T)$：\n\n- 包含 $n$ 个点。\n- 如果 $T$ 中包含边 $u,v$，则 $G$ 上 $u,v$ 边的权值为这条边的权值；否则为 $0$。\n\n记 $w(T)$ 为 $G(T)$ 的权值最小的哈密顿回路的权值。\n\n给定 $q$ 次修改操作，分为两种：\n\n- 在 $T$ 上删去一条边再加上一条边，**保证每次操作后仍然是一棵树**；\n- 给定 $T$ 上的一条路径，给路径上的每一条边的边权增加一个值。\n\n你需要在每次操作之后计算 $w(T)$。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来 $n-1$ 行每行三个正整数 $u,v,w$ 表示树上的一条边，边按照输入顺序编号为 $1\\sim n-1$。\n\n接下来 $q$ 行每行 $4$ 或 $5$ 个整数，第一个整数表示操作编号 $opt$：\n\n- 如果 $opt=1$，则表示删边再加边操作，接下来 $4$ 个整数依次为 $i,u,v,w$：$i$ 表示这一次操作删去的边的编号；$u,v,w$ 表示新加的边。这些新增的边按照操作顺序从 $n$ 开始依次向上编号。\n- 如果 $opt=2$，则表示路径加操作，接下来 $3$ 个整数 $u,v,w$：表示给树上 $u,v$ 之间的简单路径上的每一条边的边权增加 $w$。", "outputFormat": "$q$ 行每行一个整数表示操作后的 $w(T)$。", "hint": "**【样例解释 #1】**\n\n第一次操作后，$G(T)$ 的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0yznosjr.png)\n\n其中树边用红色标出，最优的哈密顿回路之一为 $1-5-4-2-3-1$。\n\n**【数据范围】**\n\n对于所有数据，保证 $5\\leq n\\leq 1.5\\times 10^5$，$1\\leq q\\leq 3\\times 10^5$，$1\\leq u,v\\leq n$，$1\\leq w\\leq 2\\times 10^{11}$，保证任意时刻边权不超过 $4\\times 10^{11}$，保证不会重复删除已经删除的边。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（6 pts）：$n\\leq 10$，$q\\leq 500$；\n- Subtask 2（27 pts）：$n,q\\leq 2000$；\n- Subtask 3（15 pts）：所有答案均 $\\geq 1$；\n- Subtask 4（26 pts）：$n\\leq 7.5\\times 10^4$，$q\\leq 1.5\\times 10^5$；\n- Subtask 5（26 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【MX-X6-T7】夏が終わる", "background": "原题链接：<https://oier.team/problems/X6H>。\n\n---\n\n> _夏の終わりを知って$\\\\$\nラムネの雫に映る僕達は$\\\\$\n見失いそうな$\\\\$\n茜色の頬を追いかけて$\\\\$\n来年もまた此処に来るんだ_\n>\n>_—— [夏が終わる - Nanatsukaze](https://music.163.com/#/song?id=2614276904)_\n\n一年时间，走一个环，再次回到原点。\n\n在这个世界不间断的变化中，还有机会再遇到你吗？选择一条最优的路径时，又有多大的机会呢？", "description": "给定一棵 $n$ 个点的树 $T$，边带权。定义无向完全图 $G(T)$：\n\n- 包含 $n$ 个点。\n- 如果 $T$ 中包含边 $u,v$，则 $G$ 上 $u,v$ 边的权值为这条边的权值；否则为 $0$。\n\n记 $w(T)$ 为 $G(T)$ 的权值最小的哈密顿回路的权值。\n\n给定 $q$ 次修改操作，分为两种：\n\n- 在 $T$ 上删去一条边再加上一条边，**保证每次操作后仍然是一棵树**；\n- 给定 $T$ 上的一条路径，给路径上的每一条边的边权增加一个值。\n\n你需要在每次操作之后计算 $w(T)$。", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来 $n-1$ 行每行三个正整数 $u,v,w$ 表示树上的一条边，边按照输入顺序编号为 $1\\sim n-1$。\n\n接下来 $q$ 行每行 $4$ 或 $5$ 个整数，第一个整数表示操作编号 $opt$：\n\n- 如果 $opt=1$，则表示删边再加边操作，接下来 $4$ 个整数依次为 $i,u,v,w$：$i$ 表示这一次操作删去的边的编号；$u,v,w$ 表示新加的边。这些新增的边按照操作顺序从 $n$ 开始依次向上编号。\n- 如果 $opt=2$，则表示路径加操作，接下来 $3$ 个整数 $u,v,w$：表示给树上 $u,v$ 之间的简单路径上的每一条边的边权增加 $w$。", "outputFormat": "$q$ 行每行一个整数表示操作后的 $w(T)$。", "hint": "**【样例解释 #1】**\n\n第一次操作后，$G(T)$ 的形态如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0yznosjr.png)\n\n其中树边用红色标出，最优的哈密顿回路之一为 $1-5-4-2-3-1$。\n\n**【数据范围】**\n\n对于所有数据，保证 $5\\leq n\\leq 1.5\\times 10^5$，$1\\leq q\\leq 3\\times 10^5$，$1\\leq u,v\\leq n$，$1\\leq w\\leq 2\\times 10^{11}$，保证任意时刻边权不超过 $4\\times 10^{11}$，保证不会重复删除已经删除的边。\n\n**捆绑测试**，共 5 个 Subtask，具体限制如下所示：\n\n- Subtask 1（6 pts）：$n\\leq 10$，$q\\leq 500$；\n- Subtask 2（27 pts）：$n,q\\leq 2000$；\n- Subtask 3（15 pts）：所有答案均 $\\geq 1$；\n- Subtask 4（26 pts）：$n\\leq 7.5\\times 10^4$，$q\\leq 1.5\\times 10^5$；\n- Subtask 5（26 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P11162", "type": "P", "difficulty": 5, "samples": [["5\n0 1 1 3\n0 1 1 1 1", "-1 1 -1 -1 3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2023", "BalkanOI（巴尔干半岛）"], "title": "[BalkanOI 2023] Car Race", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day1 T1「[Car Race](https://boi2023.zotks.si/wp-content/uploads/day_1/d1_car_race/en_EN.pdf)」**\n\n为了吸引更多的游客和资金到曾经骄傲但现在几乎被废弃的马里博尔工业区，这座城市在前 Metalna 工厂的地点建了一条赛道（Metalna 工厂是 1990 年代初被迫关闭的多家马里博尔大型企业之一）。赛道的形状是一棵有 $n$ 个顶点的有根树。树的顶点用整数 $0,1, \\ldots, n-1$ 编号，根的编号是 $0$。\n\n比赛开始了！最初，有些顶点上有赛车。每秒，每辆赛车都向着根的方向移动到相邻的顶点。在任何时刻，如果两辆或更多的赛车同时在一个编号大于 $0$ 的顶点上，它们就会相撞，不能再参加比赛。根上可以在任何时刻容纳任意数量的赛车。\n\n对于每个顶点 $v$，输出一个整数 $c_{v}$，它的定义如下：\n\n- 如果在比赛开始时顶点 $v$ 上没有赛车，$c_{v}$ 是 $-1$。\n- 否则，如果从顶点 $v$ 出发的赛车在到达根的途中相撞，那么 $c_{v}$ 是 $-1$。\n- 否则，$c_{v}$ 是从顶点 $v$ 出发的赛车到达根的时间。", "inputFormat": "第一行包含一个整数 $n$，表示树的顶点数。\n\n第二行包含 $n-1$ 个整数 $p_{1}, p_{2}, \\ldots, p_{n-1}$。$p_{i}\\ (1\\leq i\\leq n-1)$ 表示顶点 $i$ 的父亲，满足 $0 \\leq p_{i}<i$。\n\n第三行包含 $n$ 个整数 $a_{0}, a_{1}, \\ldots, a_{n-1}$。如果在比赛开始时顶点 $i$ 上有赛车 $a_{i}=1$；否则 $a_{i}=0$。", "outputFormat": "输出一行包含 $n$ 个整数 $c_{0}, c_{1}, \\ldots, c_{n-1}$，整数之间用一个空格分隔。", "hint": "### 样例解释\n\n顶点 $0$（根）在比赛开始时没有赛车。从顶点 $1$ 出发的赛车到达根需要 $1$ 秒，从顶点 $4$ 出发的赛车需要 $3$ 秒。从顶点 2 和 $3$ 出发的赛车在到达根的途中在顶点 $1$ 相撞。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq n \\leq 10^{6}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 |  附加限制  | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $n \\leq 3$ | $3$ |\n| $2$ | $p_{i}=i-1\\ (1\\leq i\\leq n-1)$ | $5$ |\n| $3$ | $n \\leq 500$ | $8$ |\n| $4$ | $n \\leq 3000$ | $9$ |\n| $5$ | $n \\leq 10^{5}$ | $10$ |\n| $6$ | $p_{i}=\\frac{i-1}{2}$ | $9$ |\n| $7$ | $n \\leq 2 \\cdot 10^{5}$ | $14$ |\n| $8$ | 每个顶点最多有 $3$ 个相邻的点 | $19$ |\n| $9$ | 无附加限制 | $23$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalkanOI 2023] Car Race", "background": "", "description": "**译自 [BalkanOI 2023](https://boi2023.zotks.si) Day1 T1「[Car Race](https://boi2023.zotks.si/wp-content/uploads/day_1/d1_car_race/en_EN.pdf)」**\n\n为了吸引更多的游客和资金到曾经骄傲但现在几乎被废弃的马里博尔工业区，这座城市在前 Metalna 工厂的地点建了一条赛道（Metalna 工厂是 1990 年代初被迫关闭的多家马里博尔大型企业之一）。赛道的形状是一棵有 $n$ 个顶点的有根树。树的顶点用整数 $0,1, \\ldots, n-1$ 编号，根的编号是 $0$。\n\n比赛开始了！最初，有些顶点上有赛车。每秒，每辆赛车都向着根的方向移动到相邻的顶点。在任何时刻，如果两辆或更多的赛车同时在一个编号大于 $0$ 的顶点上，它们就会相撞，不能再参加比赛。根上可以在任何时刻容纳任意数量的赛车。\n\n对于每个顶点 $v$，输出一个整数 $c_{v}$，它的定义如下：\n\n- 如果在比赛开始时顶点 $v$ 上没有赛车，$c_{v}$ 是 $-1$。\n- 否则，如果从顶点 $v$ 出发的赛车在到达根的途中相撞，那么 $c_{v}$ 是 $-1$。\n- 否则，$c_{v}$ 是从顶点 $v$ 出发的赛车到达根的时间。", "inputFormat": "第一行包含一个整数 $n$，表示树的顶点数。\n\n第二行包含 $n-1$ 个整数 $p_{1}, p_{2}, \\ldots, p_{n-1}$。$p_{i}\\ (1\\leq i\\leq n-1)$ 表示顶点 $i$ 的父亲，满足 $0 \\leq p_{i}<i$。\n\n第三行包含 $n$ 个整数 $a_{0}, a_{1}, \\ldots, a_{n-1}$。如果在比赛开始时顶点 $i$ 上有赛车 $a_{i}=1$；否则 $a_{i}=0$。", "outputFormat": "输出一行包含 $n$ 个整数 $c_{0}, c_{1}, \\ldots, c_{n-1}$，整数之间用一个空格分隔。", "hint": "### 样例解释\n\n顶点 $0$（根）在比赛开始时没有赛车。从顶点 $1$ 出发的赛车到达根需要 $1$ 秒，从顶点 $4$ 出发的赛车需要 $3$ 秒。从顶点 2 和 $3$ 出发的赛车在到达根的途中在顶点 $1$ 相撞。\n\n### 数据范围\n\n对于所有输入数据，满足：\n\n- $1 \\leq n \\leq 10^{6}$\n\n详细子任务附加限制及分值如下表所示。\n\n| 子任务编号 |  附加限制  | 分值 |\n| :--: | :--: | :--: |\n| $1$ | $n \\leq 3$ | $3$ |\n| $2$ | $p_{i}=i-1\\ (1\\leq i\\leq n-1)$ | $5$ |\n| $3$ | $n \\leq 500$ | $8$ |\n| $4$ | $n \\leq 3000$ | $9$ |\n| $5$ | $n \\leq 10^{5}$ | $10$ |\n| $6$ | $p_{i}=\\frac{i-1}{2}$ | $9$ |\n| $7$ | $n \\leq 2 \\cdot 10^{5}$ | $14$ |\n| $8$ | 每个顶点最多有 $3$ 个相邻的点 | $19$ |\n| $9$ | 无附加限制 | $23$ |", "locale": "zh-CN"}}}
