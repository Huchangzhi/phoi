{"pid": "P5006", "type": "P", "difficulty": 3, "samples": [["5 5\nMMMMM\nRRRRR\nQQQQQ\nYYYYY\n.....\n5 5 5\n5 1\n10 10\n8\n2 3\n1\n2 3\n2 3\n2 3\n1\n2 2\n1", "0 10 15\n1 15 15\n2 15 15\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["模拟", "2018", "O2优化"], "title": "[yLOI2018] 大美江湖", "background": "> 细雪飘落长街，枫叶红透又一年。  \n> 不只为故友流连，其实我也恋长安。   \n> 听门外足音慢，依稀见旧时容颜。  \n> 故事几经悲欢，结局都与你有关。\n\n——银临《大美江湖》\n\n本题原名《空间复杂度》。", "description": "扶苏听着《大美江湖》，在剑三里控制着他的人物炮姐来到了长安。 \n\n长安城中有一个任务，需要扶苏进入地下的机关道，机关道是的地图一个 $n$ 行 $m$ 列的矩形方格图，每个方格内部都有一些怪物或者药水。扶苏操控着炮姐在机关道中游荡。有些时候他希望问问你他的角色一扶苏一有多少攻击力、防御力以及丢失了多少血量。 \n\n地图中共有三种药水和一种怪物，分别用字符 `R`，`Q`，`Y`，`M` 代表。其中：\n\n- 字符 `R` 代表生命药水，可以减少炮姐丢失的 $10$ 点 血量 $HP$。如果本身损失的 $HP$ 不大于 $10$，则损失的血量会变成 $0$。\n- 字符 `Q` 代表力量药水，可以增加炮姐 $5$ 点攻击力 $ST$。\n- 字符 `Y` 代表防御药水，可以增加炮姐 $5$ 点防御力 $DE$。\n- 字符 `M` 代表怪物，会对炮姐造成伤害。\n\n每只怪物都有三个属性，分别是血量 $HP_0$，攻击力 $ST_0$，防御力 $DE_0$。为了~~降低验题人工作量~~题目难度，所有怪物的属性都是相同的。\n\n一旦走到怪物格，遭遇战将开始。扶苏一定会打死怪物，但是怪物也会对扶苏造成一定的伤害。具体的，怪物对扶苏造成的伤害为\n\n$$\\max(1, \\left\\lceil \\frac{HP_0}{\\max(1, ST - DE_0)}\\right\\rceil \\times \\max(1, ST_0 - DE))$$\n\n其中 $\\max(a, b)$ 代表取 $a$ 和 $b$ 中较大的数，$\\lceil x \\rceil$ 代表**不小于** $x$ 的最小整数。下标为 $0$ 的值代表怪物的参数，不带下标值的为角色的参数。\n\n你会收到 $q$ 次操作，每次操作要么是一次查询，要么是一次移动。 \n\n对于移动，你会再获得一个数字参数，这个参数只可能是 $1/2/3/4$ 其中的一个，代表炮姐向地图的**左/右/上/下**移动。向上移动代表角色所在的行数减一，列数不变，其他方向类似。\n\n对于查询，需要你输出炮姐损失了多少血量，以及当前的攻击力和防御力分别是多少。\n\n请注意，如果多次进入同一个格子，那么格子上的药水会被重复拾取，小怪也会再次出现。即你可以认为离开一个格子以后该格子会恢复原状。\n\n请注意，如果初始位置有怪物，也不会发生战斗，如果初始位置有药水，也不会将之捡拾。", "inputFormat": "每个测试点有且仅有一组测试数据。\n\n输入的第一行是两个用空格隔开的整数，代表地图的行数 $n$ 和列数 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行有一个长度为 $m$ 的字符串，第 $(i + 1)$ 行的第 $j$ 个字符 $C_{i, j}$ 代表第 $i$ 行第 $j$ 列的方格中物品/生物。特别的，若 $C_{i, j}$ 为一个字符 `.`，则意味着该处没有任何东西，但是可以通行。\n\n第 $(n + 2)$ 行有三个用空格隔开的整数，分别代表怪物的血量 $HP_0$，攻击力 $ST_0$ 和防御力 $DE_0$。\n\n第 $(n + 3)$ 行有两个整数，分别代表角色初始所在的行数 $x$ 和列数 $y$。\n\n第 $(n + 4)$ 行有两个用空格隔开的整数，代表角色初始的攻击力 $ST$ 和防御力 $DE$。\n\n第 $(n + 5)$ 行是一个整数，代表操作的次数 $q$。\n\n第 $(n + 6)$ 到第 $(n + q + 5)$ 行，每行首先有一个整数 $op$，代表本次操作的类型。\n\n- 若 $op = 1$，则本次操作是一次查询操作。\n- 若 $op = 2$，则本次操作是一次移动，一个空格后会有一个整数 $d$，作为移动的参数。", "outputFormat": "对于每次查询操作，输出一行三个用单个空格隔开的整数，分别代表角色损失的血量 $HP$，以及当前的攻击力 $ST$ 和防御力 $DE$。", "hint": "#### 数据规模与约定\n\n| 测试点编号 |    $n$     |    $m$     |     $q$     |      特殊性质      |\n| :--------: | :--------: | :--------: | :---------: | :----------------: |\n|    $1$     |    $=1$    |    $=1$    |    $=0$     |         无         |\n|   $2,3$    |    $=1$    | $\\leq 10$  | $\\leq 1000$ |         无         |\n|   $4, 5$   |    $=1$    |    $=1$    | $\\leq 1000$ |   保证 $op = 1$    |\n|  $6,7,8$   | $\\leq 100$ | $\\leq 100$ | $\\leq 10^4$ | 保证地图中没有怪物 |\n|  $9, 10$   | $\\leq 100$ | $\\leq 100$ | $\\leq 10^4$ |         无         |\n\n对于全部的测试点，保证：\n\n- $1 \\leq n, m \\leq 100$，$0 \\leq q \\leq 10^4$。\n- $0 \\leq ST_0, DE_0, HP_0, ST, DE \\leq 100$。\n- $1 \\leq op \\leq 2$，$1 \\leq d \\leq 4$。\n- $C_{i, j}$ 只可能是 `.`，`R`，`Q`，`Y`，`M` 其中之一。\n- 保证人物移动过程中的任何时刻，所在行数都是不大于 $n$ 的正整数，所在列数都是不大于 $m$ 的正整数。", "locale": "zh-CN", "translations": {"en": {"title": "[yLOI2018] The Great Jianghu.", "background": "> Light snow falls on the long street, and the maple leaves turn red again each year.  \n> I do not linger only for old friends; in fact, I also love Chang’an.  \n> The footsteps outside the door are slow; I seem to see the familiar face from the past.  \n> The story has gone through joys and sorrows many times, and every ending is related to you.  \n\n— Yin Lin, *The Great Jianghu*.\n\nThis problem was originally named *Space Complexity*.", "description": "While listening to *The Great Jianghu*, Fusu controls his character “Paojie” in JX3 and arrives in Chang’an.\n\nIn Chang’an there is a quest that requires Fusu to enter an underground “mechanism corridor”. The corridor map is a rectangular grid with $n$ rows and $m$ columns. Each cell contains some monsters or potions. Fusu controls Paojie wandering in the corridor. Sometimes he wants to ask you how much attack power, defense, and lost HP his character (Fusu) currently has.\n\nThere are three kinds of potions and one kind of monster on the map, represented by characters `R`, `Q`, `Y`, `M`, respectively. Specifically:\n\n- Character `R` represents an HP potion, which can reduce Paojie’s lost HP $HP$ by $10$. If the currently lost $HP$ is not greater than $10$, then the lost HP becomes $0$.\n- Character `Q` represents a strength potion, which increases Paojie’s attack power $ST$ by $5$.\n- Character `Y` represents a defense potion, which increases Paojie’s defense $DE$ by $5$.\n- Character `M` represents a monster, which will deal damage to Paojie.\n\nEach monster has three attributes: HP $HP_0$, attack power $ST_0$, and defense $DE_0$. To ~~reduce the workload of the validator~~ reduce the difficulty, all monsters have the same attributes.\n\nOnce you step onto a monster cell, a battle starts. Fusu will definitely kill the monster, but the monster will also deal some damage to Fusu. Specifically, the damage dealt to Fusu is\n\n$$\\max(1, \\left\\lceil \\frac{HP_0}{\\max(1, ST - DE_0)}\\right\\rceil \\times \\max(1, ST_0 - DE))$$\n\nwhere $\\max(a, b)$ means the larger of $a$ and $b$, and $\\lceil x \\rceil$ is the smallest integer **not less than** $x$. Values with subscript $0$ are the monster’s parameters, and values without subscripts are the character’s parameters.\n\nYou will receive $q$ operations. Each operation is either a query or a move.\n\nFor a move, you will be given an additional numeric parameter, which can only be one of $1/2/3/4$, meaning that Paojie moves **left/right/up/down** on the map. Moving up means the row number decreases by one and the column stays the same; other directions are analogous.\n\nFor a query, you need to output how much HP Paojie has lost, and the current attack power and defense.\n\nNote that if you enter the same cell multiple times, the potion in that cell will be picked up repeatedly, and the monster will appear again. That is, you may assume that after leaving a cell, it returns to its original state.\n\nAlso note that if there is a monster at the initial position, no battle occurs; if there is a potion at the initial position, it will not be picked up.", "inputFormat": "Each test point contains exactly one set of testdata.\n\nThe first line contains two integers separated by spaces, representing the number of rows $n$ and columns $m$ of the map.\n\nLines $2$ to $(n + 1)$ each contain a string of length $m$. The $j$-th character $C_{i, j}$ in line $(i + 1)$ represents the item/creature in the cell at row $i$ and column $j$. In particular, if $C_{i, j}$ is the character `.`, it means there is nothing there, but the cell is passable.\n\nLine $(n + 2)$ contains three integers separated by spaces, representing the monster’s HP $HP_0$, attack power $ST_0$, and defense $DE_0$.\n\nLine $(n + 3)$ contains two integers, representing the character’s initial row $x$ and initial column $y$.\n\nLine $(n + 4)$ contains two integers separated by spaces, representing the character’s initial attack power $ST$ and defense $DE$.\n\nLine $(n + 5)$ contains an integer, representing the number of operations $q$.\n\nLines $(n + 6)$ to $(n + q + 5)$ each start with an integer $op$, representing the type of this operation.\n\n- If $op = 1$, this operation is a query.\n- If $op = 2$, this operation is a move. After a space there will be an integer $d$ as the movement parameter.", "outputFormat": "For each query operation, output one line with three integers separated by single spaces: the character’s lost HP $HP$, and the current attack power $ST$ and defense $DE$.", "hint": "#### Constraints\n\n| Test Point ID |    $n$     |    $m$     |     $q$     |    Special Property     |\n| :-----------: | :--------: | :--------: | :---------: | :---------------------: |\n|      $1$      |    $=1$    |    $=1$    |    $=0$     |          None           |\n|    $2,3$      |    $=1$    | $\\leq 10$  | $\\leq 1000$ |          None           |\n|    $4,5$      |    $=1$    |    $=1$    | $\\leq 1000$ | Guaranteed $op = 1$     |\n|    $6,7,8$    | $\\leq 100$ | $\\leq 100$ | $\\leq 10^4$ | No monsters on the map  |\n|    $9, 10$    | $\\leq 100$ | $\\leq 100$ | $\\leq 10^4$ |          None           |\n\nFor all test points, it is guaranteed that:\n\n- $1 \\leq n, m \\leq 100$, $0 \\leq q \\leq 10^4$.\n- $0 \\leq ST_0, DE_0, HP_0, ST, DE \\leq 100$.\n- $1 \\leq op \\leq 2$, $1 \\leq d \\leq 4$.\n- $C_{i, j}$ can only be one of `.`, `R`, `Q`, `Y`, `M`.\n- During the entire movement process, the current row is always a positive integer not greater than $n$, and the current column is always a positive integer not greater than $m$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[yLOI2018] 大美江湖", "background": "> 细雪飘落长街，枫叶红透又一年。  \n> 不只为故友流连，其实我也恋长安。   \n> 听门外足音慢，依稀见旧时容颜。  \n> 故事几经悲欢，结局都与你有关。\n\n——银临《大美江湖》\n\n本题原名《空间复杂度》。", "description": "扶苏听着《大美江湖》，在剑三里控制着他的人物炮姐来到了长安。 \n\n长安城中有一个任务，需要扶苏进入地下的机关道，机关道是的地图一个 $n$ 行 $m$ 列的矩形方格图，每个方格内部都有一些怪物或者药水。扶苏操控着炮姐在机关道中游荡。有些时候他希望问问你他的角色一扶苏一有多少攻击力、防御力以及丢失了多少血量。 \n\n地图中共有三种药水和一种怪物，分别用字符 `R`，`Q`，`Y`，`M` 代表。其中：\n\n- 字符 `R` 代表生命药水，可以减少炮姐丢失的 $10$ 点 血量 $HP$。如果本身损失的 $HP$ 不大于 $10$，则损失的血量会变成 $0$。\n- 字符 `Q` 代表力量药水，可以增加炮姐 $5$ 点攻击力 $ST$。\n- 字符 `Y` 代表防御药水，可以增加炮姐 $5$ 点防御力 $DE$。\n- 字符 `M` 代表怪物，会对炮姐造成伤害。\n\n每只怪物都有三个属性，分别是血量 $HP_0$，攻击力 $ST_0$，防御力 $DE_0$。为了~~降低验题人工作量~~题目难度，所有怪物的属性都是相同的。\n\n一旦走到怪物格，遭遇战将开始。扶苏一定会打死怪物，但是怪物也会对扶苏造成一定的伤害。具体的，怪物对扶苏造成的伤害为\n\n$$\\max(1, \\left\\lceil \\frac{HP_0}{\\max(1, ST - DE_0)}\\right\\rceil \\times \\max(1, ST_0 - DE))$$\n\n其中 $\\max(a, b)$ 代表取 $a$ 和 $b$ 中较大的数，$\\lceil x \\rceil$ 代表**不小于** $x$ 的最小整数。下标为 $0$ 的值代表怪物的参数，不带下标值的为角色的参数。\n\n你会收到 $q$ 次操作，每次操作要么是一次查询，要么是一次移动。 \n\n对于移动，你会再获得一个数字参数，这个参数只可能是 $1/2/3/4$ 其中的一个，代表炮姐向地图的**左/右/上/下**移动。向上移动代表角色所在的行数减一，列数不变，其他方向类似。\n\n对于查询，需要你输出炮姐损失了多少血量，以及当前的攻击力和防御力分别是多少。\n\n请注意，如果多次进入同一个格子，那么格子上的药水会被重复拾取，小怪也会再次出现。即你可以认为离开一个格子以后该格子会恢复原状。\n\n请注意，如果初始位置有怪物，也不会发生战斗，如果初始位置有药水，也不会将之捡拾。", "inputFormat": "每个测试点有且仅有一组测试数据。\n\n输入的第一行是两个用空格隔开的整数，代表地图的行数 $n$ 和列数 $m$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行有一个长度为 $m$ 的字符串，第 $(i + 1)$ 行的第 $j$ 个字符 $C_{i, j}$ 代表第 $i$ 行第 $j$ 列的方格中物品/生物。特别的，若 $C_{i, j}$ 为一个字符 `.`，则意味着该处没有任何东西，但是可以通行。\n\n第 $(n + 2)$ 行有三个用空格隔开的整数，分别代表怪物的血量 $HP_0$，攻击力 $ST_0$ 和防御力 $DE_0$。\n\n第 $(n + 3)$ 行有两个整数，分别代表角色初始所在的行数 $x$ 和列数 $y$。\n\n第 $(n + 4)$ 行有两个用空格隔开的整数，代表角色初始的攻击力 $ST$ 和防御力 $DE$。\n\n第 $(n + 5)$ 行是一个整数，代表操作的次数 $q$。\n\n第 $(n + 6)$ 到第 $(n + q + 5)$ 行，每行首先有一个整数 $op$，代表本次操作的类型。\n\n- 若 $op = 1$，则本次操作是一次查询操作。\n- 若 $op = 2$，则本次操作是一次移动，一个空格后会有一个整数 $d$，作为移动的参数。", "outputFormat": "对于每次查询操作，输出一行三个用单个空格隔开的整数，分别代表角色损失的血量 $HP$，以及当前的攻击力 $ST$ 和防御力 $DE$。", "hint": "#### 数据规模与约定\n\n| 测试点编号 |    $n$     |    $m$     |     $q$     |      特殊性质      |\n| :--------: | :--------: | :--------: | :---------: | :----------------: |\n|    $1$     |    $=1$    |    $=1$    |    $=0$     |         无         |\n|   $2,3$    |    $=1$    | $\\leq 10$  | $\\leq 1000$ |         无         |\n|   $4, 5$   |    $=1$    |    $=1$    | $\\leq 1000$ |   保证 $op = 1$    |\n|  $6,7,8$   | $\\leq 100$ | $\\leq 100$ | $\\leq 10^4$ | 保证地图中没有怪物 |\n|  $9, 10$   | $\\leq 100$ | $\\leq 100$ | $\\leq 10^4$ |         无         |\n\n对于全部的测试点，保证：\n\n- $1 \\leq n, m \\leq 100$，$0 \\leq q \\leq 10^4$。\n- $0 \\leq ST_0, DE_0, HP_0, ST, DE \\leq 100$。\n- $1 \\leq op \\leq 2$，$1 \\leq d \\leq 4$。\n- $C_{i, j}$ 只可能是 `.`，`R`，`Q`，`Y`，`M` 其中之一。\n- 保证人物移动过程中的任何时刻，所在行数都是不大于 $n$ 的正整数，所在列数都是不大于 $m$ 的正整数。", "locale": "zh-CN"}}}
{"pid": "P5007", "type": "P", "difficulty": 4, "samples": [["5 0\n1 2\n2 3\n2 4\n1 5", "16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "树形 DP", "逆元"], "title": "DDOSvoid 的疑惑", "background": "DDOSvoid 最近一直很痴迷于树形结构，尤其是可持久化喜羊羊灰太狼套红太狼树，可以 $O(\\log)$ 维护你想维护的信息。\n\n但是这只是一个理论数据结构，为了研究其如何实现，DDOSvoid 开始思考树的父亲和儿子之间的关系。\n\n如果这个数据结构得到实现，那么这个世界就再也没有毒瘤题了。\n\n但毕竟这个问题太难，所以我们先考虑下面的这个问题。\n", "description": "给定一棵以 $1$ 为根的有根树，定义树的一个毒瘤集为一个集合，并且集合中任意两个元素之间不存在祖先与后代关系。\n\n定义一个毒瘤集的毒瘤指数为集合内所有元素的价值之和。要求给定树的所有毒瘤集的毒瘤指数之和，答案对 $100{,}000{,}007$ 取模。\n\n但这个问题太难了，所以我们考虑化简。\n\n因为点的编号跟它毒瘤指数密切相关，所以我们将会再给出一个整数 $T$：$T = 1$ 表示 $i$ 号点的毒瘤指数为 $i$；$T = 0$，表示所有点的毒瘤指数都是 $1$。", "inputFormat": "第一行两个整数 $n$、$T$，表示这棵树有 $n$ 个节点。\n\n接下来 $n -1$ 行，每行两个整数 $x$ 和 $y$，表示有一条边，连接 $x$ 和 $y$。", "outputFormat": "输出一个整数，表示答案。", "hint": "#### 样例解释：\n\n$10$ 个集合分别为 $\\{1\\},\\{2\\},\\{3\\},\\{4\\},\\{5\\},\\{2,5\\},\\{3,4\\}, \\{3,5\\},\\{3,4,5\\},\\{4,5\\}$\n\n#### 数据范围与约定\n\n**本题采用多测试点捆绑测试**\n\n- 对于 $30 \\%$ 的部分分，$n \\le 15$；\n- 另外 $20 \\%$ 的部分分，$n \\le 10^6$，$T = 0$；\n- 对于 $100 \\%$ 的数据，$n \\le 10^6$，$ T <= 1$。\n\n#### 为了方便你理解题意，下面给出毒瘤集的数学定义：\n\n设一个毒瘤集为 $A$，则\n\n- $\\forall i\\in A$，不存在一个点 $j$，使得 $j$ 在从 $i$ 到根节点的简单路径上，且 $ j \\in A$。其中 $ i,j \\in V$，$V$ 为树的点集。", "locale": "zh-CN", "translations": {"en": {"title": "DDOSvoid’s Confusion", "background": "DDOSvoid has recently been very obsessed with tree structures, especially the “persistent Pleasant Goat and Big Big Wolf set Red Wolf tree”, which can maintain any information you want in $O(\\log)$ time.\n\nHowever, this is only a theoretical data structure. In order to study how it can be implemented, DDOSvoid began to think about the relationship between a tree’s parent and children.\n\nIf this data structure could be implemented, then there would be no more nasty problems in this world.\n\nBut after all, this problem is too hard, so let us first consider the following problem.", "description": "Given a rooted tree with root $1$, define a “nasty set” of the tree as a set such that for any two elements in the set, there is no ancestor-descendant relationship between them.\n\nDefine the “nasty index” of a nasty set as the sum of the values of all elements in the set. You are asked to compute the sum of the nasty indices of all nasty sets of the given tree, modulo $100{,}000{,}007$.\n\nBut this problem is too hard, so we consider a simplified version.\n\nBecause the node numbering is closely related to its nasty index, we will additionally give an integer $T$: when $T = 1$, the value (nasty index contribution) of node $i$ is $i$; when $T = 0$, the value of every node is $1$.", "inputFormat": "The first line contains two integers $n$ and $T$, meaning the tree has $n$ nodes.\n\nThe next $n - 1$ lines each contain two integers $x$ and $y$, meaning there is an edge connecting $x$ and $y$.", "outputFormat": "Output one integer, the answer.", "hint": "#### Sample Explanation:\n\nThe $10$ sets are $\\{1\\},\\{2\\},\\{3\\},\\{4\\},\\{5\\},\\{2,5\\},\\{3,4\\}, \\{3,5\\},\\{3,4,5\\},\\{4,5\\}$.\n\n#### Constraints and Notes\n\n**This problem uses bundled multiple test points.**\n\n- For $30\\%$ of the points, $n \\le 15$.\n- For another $20\\%$ of the points, $n \\le 10^6$, $T = 0$.\n- For $100\\%$ of the data, $n \\le 10^6$, $T \\le 1$.\n\n#### To help you understand the statement, here is the mathematical definition of a nasty set:\n\nLet a nasty set be $A$. Then:\n\n- $\\forall i\\in A$, there does not exist a node $j$ such that $j$ lies on the simple path from $i$ to the root, and $j \\in A$. Here $i, j \\in V$, and $V$ is the vertex set of the tree.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "DDOSvoid 的疑惑", "background": "DDOSvoid 最近一直很痴迷于树形结构，尤其是可持久化喜羊羊灰太狼套红太狼树，可以 $O(\\log)$ 维护你想维护的信息。\n\n但是这只是一个理论数据结构，为了研究其如何实现，DDOSvoid 开始思考树的父亲和儿子之间的关系。\n\n如果这个数据结构得到实现，那么这个世界就再也没有毒瘤题了。\n\n但毕竟这个问题太难，所以我们先考虑下面的这个问题。\n", "description": "给定一棵以 $1$ 为根的有根树，定义树的一个毒瘤集为一个集合，并且集合中任意两个元素之间不存在祖先与后代关系。\n\n定义一个毒瘤集的毒瘤指数为集合内所有元素的价值之和。要求给定树的所有毒瘤集的毒瘤指数之和，答案对 $100{,}000{,}007$ 取模。\n\n但这个问题太难了，所以我们考虑化简。\n\n因为点的编号跟它毒瘤指数密切相关，所以我们将会再给出一个整数 $T$：$T = 1$ 表示 $i$ 号点的毒瘤指数为 $i$；$T = 0$，表示所有点的毒瘤指数都是 $1$。", "inputFormat": "第一行两个整数 $n$、$T$，表示这棵树有 $n$ 个节点。\n\n接下来 $n -1$ 行，每行两个整数 $x$ 和 $y$，表示有一条边，连接 $x$ 和 $y$。", "outputFormat": "输出一个整数，表示答案。", "hint": "#### 样例解释：\n\n$10$ 个集合分别为 $\\{1\\},\\{2\\},\\{3\\},\\{4\\},\\{5\\},\\{2,5\\},\\{3,4\\}, \\{3,5\\},\\{3,4,5\\},\\{4,5\\}$\n\n#### 数据范围与约定\n\n**本题采用多测试点捆绑测试**\n\n- 对于 $30 \\%$ 的部分分，$n \\le 15$；\n- 另外 $20 \\%$ 的部分分，$n \\le 10^6$，$T = 0$；\n- 对于 $100 \\%$ 的数据，$n \\le 10^6$，$ T <= 1$。\n\n#### 为了方便你理解题意，下面给出毒瘤集的数学定义：\n\n设一个毒瘤集为 $A$，则\n\n- $\\forall i\\in A$，不存在一个点 $j$，使得 $j$ 在从 $i$ 到根节点的简单路径上，且 $ j \\in A$。其中 $ i,j \\in V$，$V$ 为树的点集。", "locale": "zh-CN"}}}
{"pid": "P5008", "type": "P", "difficulty": 5, "samples": [["7 7 3\n10 2 8 4 9 5 7\n1 2\n1 3\n1 4\n2 5\n3 6\n3 7\n4 7", "24"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2018", "O2优化", "强连通分量"], "title": "[yLOI2018] 锦鲤抄", "background": "> 你在尘世中辗转了千百年，  \n> 却只让我看你最后一眼。  \n> 火光描摹容颜燃尽了时间，  \n> 别留我一人，孑然一身，凋零在梦境里面。\n\n—— 银临 & 云の泣《锦鲤抄》\n\n本题原名《逛庭院》。\n\n这首歌的文案如下：（注：不阅读文案不影响下面的阅读）\n\n> 宁武皇仁光九年锦文轩刻本《异闻录》载：扶桑画师浅溪，居泰安，喜绘鲤。院前一方荷塘，锦鲤游曳，溪常与嬉戏。  \n> 其时正武德之乱，藩镇割据，战事频仍，魑魅魍魉，肆逆于道。兵戈逼泰安，街邻皆逃亡，独溪不舍锦鲤，未去。  \n> 是夜，院室倏火。有人入火护溪，言其本鲤中妖，欲取溪命，却生情愫，遂不忍为之。翌日天明，火势渐歇，人已不见。  \n> 溪始觉如梦，奔塘边，但见池水干涸，莲叶皆枯，塘中鲤亦不知所踪。  \n> 自始至终，未辨眉目，只记襟上层迭莲花，其色魅惑，似血着泪。  \n> 后有青岩居士闻之，叹曰：魑祟动情，必作灰飞。犹蛾之投火耳，非愚，乃命数也。", "description": "扶苏被画师和锦鲤的故事深深地打动了。为了能让锦鲤和画师继续生活在一起，他决定回到着火的庭院中灭掉大火。\n\n画师的庭院可以抽象成一个有向图，每个点代表着一个着火的位置。为了量化火势的大小，扶苏给每个点一个火力值，火力值越大，代表这个点的火势越强。\n\n风助火势，火借风力，对于每一个着火点，都有可能因为大风使得火扩散到其他点。有向图的每条边 $<u,v>$ 代表大火是从点 $u$ 扩散到点 $v$ 的。需要注意的是一个点可能会扩散到很多点，也可能是由很多点的大火一起扩散成的。\n\n为了不因为灭掉火源让画师发现有人在帮他灭火，在任意时刻，扶苏不能灭掉任何一个不被任何点所扩散的点的火。一个点的火被灭掉后，所代表该点的火扩散的所有边将消失。需要说明的是，虽然边消失了，但是该点扩散到的所有点属性除入度以外都不会改变，更不会消失。\n\n因为穿越的时间有限，扶苏只能灭掉最多 $k$ 个点的火。他想问问你他最多能扑灭多少火力值。\n\n#### 简化版题意：\n\n给你一张有向图，每个点有一个点权。任意时刻你可以任意选择一个**有入度**的点，获得它的点权并把它和它的出边从图上删去。最多能选择 $k$ 个点，求最多能获得多少点权。", "inputFormat": "输入的第一行是三个用空格隔开的整数，代表图的点数 $n$ 和边数 $m$ 以及点数的限制 $k$。\n\n输入的第二行是 $n$ 个用空格隔开的整数，第 $i$ 个数 $w_i$ 代表点 $i$ 的火力值（点权）。\n\n第 $3$ 到第 $(m + 2)$ 行，每行两个用空格隔开的整数 $u, v$，代表一条 $u$ 指向 $v$ 的有向边。", "outputFormat": "输出一行一个整数，代表最大的火力值。", "hint": "### 样例输入输出 1 解释\n\n选择 $3, 5, 7$ 三个节点。\n\n---\n\n### 数据规模与约定\n\n**本题采用多测试点捆绑测试，共有 $5$ 个子任务**。\n\n- Subtask 1（30 points）：$n = 10$，$m = 50$。\n- Subtask 2（30 points）：$n = 100001$，$m = 500001$。**保证给出的图是一个有向无环图**。\n- Subtask 3（20 points）：$n = 100002$，$m = 500002$。保证给出的图中，没有入度的点有且仅有一个。\n- Subtask 4（17 points）：$n = 100003$，$m = 500003$。\n- Subtask 5（3 points）：$n = 500004$，$m = 2000004$。\n\n对于全部的测试点，保证 $1 \\leq n \\leq 5 \\times 10^5 + 4$，$1 \\leq m \\leq 2 \\times 10^6 + 4$，$0 \\leq w_i \\leq 10^3$，$0 \\leq k \\leq n$。\n\n**不保证**给出的图没有自环。\n\n---\n\n### 提示\n\n- 请注意数据读入对程序效率造成的影响。\n- $n$ 的末位数字可以帮助你快速的判断测试点所在的子任务。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[yLOI2018] Jinli Chao", "background": "> You have wandered in the mortal world for thousands of years,  \n> yet you only let me see you one last time.  \n> Firelight traces your face and burns away time,  \n> do not leave me alone, solitary, withering inside a dream.\n\n— Yin Lin & Yun Zhi Qi, *Jinli Chao*\n\nThe original name of this problem was *Strolling in the Courtyard*.\n\nThe copywriting of this song is as follows: (Note: not reading it does not affect understanding the problem below.)\n\n> The *Records of Strange Tales* (a Jinxuan Hall printed edition) from the ninth year of the Ningwu Emperor Renguang records: A Fusang painter named Qianxi lived in Taian and loved painting koi. Before his house was a lotus pond where brocade koi swam; Xi often played with them.  \n> At that time, the Wu De rebellion was raging, warlords fought each other, wars happened again and again, and monsters ran wild on the roads. When the war approached Taian, neighbors all fled; only Xi stayed, unwilling to leave the koi behind.  \n> That night, the house suddenly caught fire. Someone entered the fire to protect Xi, saying they were a demon from among the koi, originally here to take Xi’s life, yet they developed feelings and could not bear to do so. At dawn the next day, the fire gradually died down, and the person was gone.  \n> Xi then felt it was like a dream, and ran to the pond, only to see the water dried up, lotus leaves all withered, and the koi in the pond were nowhere to be found.  \n> From start to finish, Xi never saw the person clearly, only remembering layered lotus flowers on their collar, enchanting in color, like blood stained with tears.  \n> Later, a hermit called Qingyan heard this and sighed: When an evil spirit falls in love, it must turn to ashes and vanish. It is like a moth flying into the fire—not stupidity, but fate.", "description": "Fusu was deeply moved by the story of the painter and the koi. In order to let the koi and the painter continue living together, he decided to return to the burning courtyard and put out the fire.\n\nThe painter’s courtyard can be abstracted as a directed graph. Each node represents a burning location. To measure the size of the fire, Fusu assigns each node a fire value. The larger the fire value, the stronger the fire at that node.\n\nWind helps the fire, and the fire borrows the wind’s force. For each burning node, strong wind may cause the fire to spread to other nodes. Each directed edge $<u,v>$ in the graph represents that the fire spreads from node $u$ to node $v$. Note that one node may spread to many nodes, and it may also be formed by fires spreading together from many nodes.\n\nTo avoid the painter noticing that someone is helping to put out the fire, at any moment, Fusu is not allowed to extinguish the fire at any node that is not being spread to by any node. After a node’s fire is extinguished, all outgoing edges representing the spread from that node will disappear. Note that although the edges disappear, all properties of the nodes that it spreads to, except for their in-degrees, will not change, and they will not disappear.\n\nBecause the time for time travel is limited, Fusu can extinguish the fire of at most $k$ nodes. He wants to ask you what is the maximum total fire value he can extinguish.\n\n#### Simplified statement:\n\nGiven a directed graph where each node has a weight. At any moment, you may choose any node **with in-degree**, gain its weight, and delete it and its outgoing edges from the graph. You may choose at most $k$ nodes. Find the maximum total weight you can obtain.", "inputFormat": "The first line contains three integers separated by spaces, representing the number of nodes $n$, the number of edges $m$, and the limit on the number of chosen nodes $k$.\n\nThe second line contains $n$ integers separated by spaces. The $i$-th integer $w_i$ represents the fire value (node weight) of node $i$.\n\nLines $3$ to $(m + 2)$ each contain two integers $u, v$ separated by spaces, representing a directed edge from $u$ to $v$.", "outputFormat": "Output one line with one integer, representing the maximum total fire value.", "hint": "### Explanation for Sample Input/Output 1\n\nChoose nodes $3, 5, 7$.\n\n---\n\n### Constraints\n\n**This problem uses bundled testdata with a total of $5$ subtasks**.\n\n- Subtask 1 (30 points): $n = 10$, $m = 50$.\n- Subtask 2 (30 points): $n = 100001$, $m = 500001$. **It is guaranteed that the given graph is a directed acyclic graph.**\n- Subtask 3 (20 points): $n = 100002$, $m = 500002$. It is guaranteed that in the given graph, there is one and only one node with in-degree $0$.\n- Subtask 4 (17 points): $n = 100003$, $m = 500003$.\n- Subtask 5 (3 points): $n = 500004$, $m = 2000004$.\n\nFor all testdata, it is guaranteed that $1 \\leq n \\leq 5 \\times 10^5 + 4$, $1 \\leq m \\leq 2 \\times 10^6 + 4$, $0 \\leq w_i \\leq 10^3$, $0 \\leq k \\leq n$.\n\nIt is **not guaranteed** that the given graph has no self-loops.\n\n---\n\n### Notes\n\n- Please pay attention to the impact of input reading on program efficiency.\n- The last digit of $n$ can help you quickly determine which subtask the test point belongs to.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[yLOI2018] 锦鲤抄", "background": "> 你在尘世中辗转了千百年，  \n> 却只让我看你最后一眼。  \n> 火光描摹容颜燃尽了时间，  \n> 别留我一人，孑然一身，凋零在梦境里面。\n\n—— 银临 & 云の泣《锦鲤抄》\n\n本题原名《逛庭院》。\n\n这首歌的文案如下：（注：不阅读文案不影响下面的阅读）\n\n> 宁武皇仁光九年锦文轩刻本《异闻录》载：扶桑画师浅溪，居泰安，喜绘鲤。院前一方荷塘，锦鲤游曳，溪常与嬉戏。  \n> 其时正武德之乱，藩镇割据，战事频仍，魑魅魍魉，肆逆于道。兵戈逼泰安，街邻皆逃亡，独溪不舍锦鲤，未去。  \n> 是夜，院室倏火。有人入火护溪，言其本鲤中妖，欲取溪命，却生情愫，遂不忍为之。翌日天明，火势渐歇，人已不见。  \n> 溪始觉如梦，奔塘边，但见池水干涸，莲叶皆枯，塘中鲤亦不知所踪。  \n> 自始至终，未辨眉目，只记襟上层迭莲花，其色魅惑，似血着泪。  \n> 后有青岩居士闻之，叹曰：魑祟动情，必作灰飞。犹蛾之投火耳，非愚，乃命数也。", "description": "扶苏被画师和锦鲤的故事深深地打动了。为了能让锦鲤和画师继续生活在一起，他决定回到着火的庭院中灭掉大火。\n\n画师的庭院可以抽象成一个有向图，每个点代表着一个着火的位置。为了量化火势的大小，扶苏给每个点一个火力值，火力值越大，代表这个点的火势越强。\n\n风助火势，火借风力，对于每一个着火点，都有可能因为大风使得火扩散到其他点。有向图的每条边 $<u,v>$ 代表大火是从点 $u$ 扩散到点 $v$ 的。需要注意的是一个点可能会扩散到很多点，也可能是由很多点的大火一起扩散成的。\n\n为了不因为灭掉火源让画师发现有人在帮他灭火，在任意时刻，扶苏不能灭掉任何一个不被任何点所扩散的点的火。一个点的火被灭掉后，所代表该点的火扩散的所有边将消失。需要说明的是，虽然边消失了，但是该点扩散到的所有点属性除入度以外都不会改变，更不会消失。\n\n因为穿越的时间有限，扶苏只能灭掉最多 $k$ 个点的火。他想问问你他最多能扑灭多少火力值。\n\n#### 简化版题意：\n\n给你一张有向图，每个点有一个点权。任意时刻你可以任意选择一个**有入度**的点，获得它的点权并把它和它的出边从图上删去。最多能选择 $k$ 个点，求最多能获得多少点权。", "inputFormat": "输入的第一行是三个用空格隔开的整数，代表图的点数 $n$ 和边数 $m$ 以及点数的限制 $k$。\n\n输入的第二行是 $n$ 个用空格隔开的整数，第 $i$ 个数 $w_i$ 代表点 $i$ 的火力值（点权）。\n\n第 $3$ 到第 $(m + 2)$ 行，每行两个用空格隔开的整数 $u, v$，代表一条 $u$ 指向 $v$ 的有向边。", "outputFormat": "输出一行一个整数，代表最大的火力值。", "hint": "### 样例输入输出 1 解释\n\n选择 $3, 5, 7$ 三个节点。\n\n---\n\n### 数据规模与约定\n\n**本题采用多测试点捆绑测试，共有 $5$ 个子任务**。\n\n- Subtask 1（30 points）：$n = 10$，$m = 50$。\n- Subtask 2（30 points）：$n = 100001$，$m = 500001$。**保证给出的图是一个有向无环图**。\n- Subtask 3（20 points）：$n = 100002$，$m = 500002$。保证给出的图中，没有入度的点有且仅有一个。\n- Subtask 4（17 points）：$n = 100003$，$m = 500003$。\n- Subtask 5（3 points）：$n = 500004$，$m = 2000004$。\n\n对于全部的测试点，保证 $1 \\leq n \\leq 5 \\times 10^5 + 4$，$1 \\leq m \\leq 2 \\times 10^6 + 4$，$0 \\leq w_i \\leq 10^3$，$0 \\leq k \\leq n$。\n\n**不保证**给出的图没有自环。\n\n---\n\n### 提示\n\n- 请注意数据读入对程序效率造成的影响。\n- $n$ 的末位数字可以帮助你快速的判断测试点所在的子任务。\n\n", "locale": "zh-CN"}}}
{"pid": "P5009", "type": "P", "difficulty": 6, "samples": [["5 5\n1 2 3\n4 5 6\n7 8 9\n10 11 12\n13 14 15\n2 1 1 3 2 \n1 3 2 3\n3 4 1 4 -3\n4 5 1 3 -5\n1 6 1 5", "377\n2708"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2018", "线段树", "O2优化", "分块"], "title": "[yLOI2018] 不老梦", "background": "> 于万人中万幸得以相逢，刹那间澈净明通。  \n> 成为我所向披靡的勇气和惶恐，裂山海，堕苍穹。\n\n——银临《不老梦》。\n\n本题原名《毒瘤分块题》。", "description": "扶苏非常喜欢一边听古风歌一边写毒瘤分块题。所以这个题的题面恶意卡了分块。\n\n给你一个序列，这个序列中的每个数字有三个参数 $v_i,a_i,b_i$。这个序列中的数有一个非常神奇的有关时间的性质：每过一个时刻，序列中第 $i$ 个数字的值 $v_i$ 会增加 $a_i \\times b_i$。\n\n现在扶苏会对你做出一些询问和对序列进行一些修改。每次操作形如：\n\n- 查询第 $t$ 时刻区间 $[l,r]$ 的 $v$ 之和是多少。\n- 在第 $t$ 时刻修改区间 $[l,r]$ 内的 $a$，将之整体加上一个整数 $x$。\n- 在第 $t$ 时刻修改区间 $[l,r]$ 内的 $b$，将之整体加上一个整数 $y$。\n- 在第 $t$ 时刻修改区间 $[l,r]$ 内的 $v$，将之整体加上一个整数 $z$。\n\n规定初始时刻为时刻 $0$。", "inputFormat": "每个测试点有且仅有一组测试数据。\n\n输入的第一行是两个用空格隔开的整数，分别代表序列的长度 $n$ 以及操作的个数 $m$。\n\n下面 $n$ 行，每行 $3$ 个用空格隔开的整数，第 $i$ 行的整数 $v_i,a_i,b_i$ 分别代表第 $i$ 个位置的三个参数。\n\n下面 $m$ 行，每行第一个数是 $opt$，代表操作的种类。\n\n- 对于 $opt = 1$ 的情况，代表对序列进行一次查询。 $opt$ 后有三个用空格隔开的整数 $t, x, y$，代表查询时刻 $t$ 区间 $[x,y]$ 中 $v$ 的和。\n- 对于 $opt = 2$ 的情况，代表对序列的 $a$ 值进行一次修改。$opt$ 后有四个用空格隔开的整数 $t, x, y, z$，代表在第 $t$ 时刻将区间 $[x,y]$ 中 $a$ 的值加上 $z$。\n- 对于 $opt = 3$ 的情况，代表对序列的 $b$ 值进行一次修改。$opt$ 后有四个用空格隔开的整数 $t, x, y, z$，代表在第 $t$ 时刻将区间 $[x,y]$ 中 $b$ 的值加上 $z$。\n- 对于 $opt = 4$ 的情况，代表对序列的 $v$ 值进行一次修改。$opt$ 后有四个用空格隔开的整数 $t, x, y, z$，代表在第 $t$ 时刻将区间 $[x,y]$ 中 $v$ 的值加上 $z$。\n\n数据保证参数 $t$ 是单调递增的，不存在同一时刻有超过一种查询或询问。\n", "outputFormat": "对于每次查询操作，输出一个一行一个整数，代表查询的答案对 $10^8 + 7$ 取模的答案。", "hint": "#### 【样例输入输出 1 解释】\n\n![qwq](https://cdn.luogu.com.cn/upload/pic/38337.png)\n\n\n---\n\n#### 【数据规模与约定】\n\n**本题共有 $17$ 个测试点，各测试点不等分。每个测试点的 $n$ 的规模如下表**。\n\n| 测试点编号 |         $n=$          | 测试点编号 | $n=$|\n| :--------: | :-------------------: | :--------: | :-------------------: |\n|    $1$     |          $6$          |    $10$    |      $10^5 + 2$       |\n|    $2$     |         $10$          |   $11$    | $1.5 \\times 10^5 + 2$ |\n|    $3$     |         $100$         |  $12$    |      $10^5 + 3$       |\n|    $4$     |        $10^3$         |  $13$    | $1.5 \\times 10^5 + 3$ |\n|    $5$     |    $3 \\times 10^3$    | $14$    |  $2 \\times 10^5 + 4$  |\n|    $6$     |    $3 \\times 10^3$    |   $15$    |  $5 \\times 10^4 + 5$  |\n|    $7$     |      $10^4 + 1$       |   $16$    |      $10^5 + 5$       |\n|    $8$     |      $10^5 + 1$       |  $17$    |  $2 \\times 10^5 + 5$  |\n|    $9$     | $1.5 \\times 10^5 + 1$ |\n\n**各测试点分值**：\n\n- 对于第 $1$ 到第 $14$ 个测试点，每个测试点 $5$ 分。\n- 对于第 $15$ 到第 $17$ 个测试点，每个测试点 $10$ 分。\n\n**各测试点 $m$ 的取值**：\n\n- 对于测试点 $1$，$m = 10$。\n- 对于测试点 $2$，$m = 50$。\n- 对于第 $3$ 到第 $17$ 个测试点，$m = n$。\n\n**各测试点特殊性质**：\n\n- 对于所有 $n$ 末位数字为 $6$ 的测试点，满足性质：操作所用到的时刻从 $1$ 开始，每次增加 $1$。\n- 对于所有 $n$ 末位数字为 $1$ 的测试点，满足性质：所有修改操作只涉及对 $a$ 的修改，且修改区间 $x = y$。\n- 对于所有 $n$ 末位数字为 $2$ 的测试点，满足性质：所有修改操作只涉及对 $a$ 的修改。\n- 对于所有 $n$ 末位数字为 $3$ 的测试点，满足性质：所有修改操作不涉及对 $v$ 的修改，且对于 $b$ 的修改满足 $x= y$。\n- 对于所有 $n$ 末位数字为 $4$ 的测试点，满足性质：不存在修改操作。\n\n\n对于全部的测试点，保证 $1 \\leq x \\leq y \\leq n$，$1 \\leq op \\leq 4$，给出的所有数字都在 32 位带符号整形的范围内，$t$ 为正数，且按照严格的升序给出。\n\n---\n\n#### 【提示】\n\n- 请注意数据读入对程序效率造成的影响。\n- 请注意常数因子对程序效率造成的影响。\n- $n$ 的末位数字可以帮助你快速判断测试点的特殊性质。\n- 当你的答案为负时，请将其取模成非负数后再进行输出。\n\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[yLOI2018] Ageless Dream", "background": "> Among tens of thousands, by great luck we meet; in an instant, everything becomes clear and bright.  \n> It becomes my courage and fear that make me unstoppable, splitting mountains and seas, falling into the sky.\n\n— Yin Lin, *Ageless Dream*.\n\nThe original name of this problem was *Poisonous Block Decomposition Problem*.", "description": "Fusu really likes writing tricky block decomposition problems while listening to Chinese-style songs. So this statement is intentionally designed to make block decomposition hard to use.\n\nYou are given a sequence. Each number in the sequence has three parameters $v_i, a_i, b_i$. This sequence has a very magical time-related property: every time moment passes, the value $v_i$ of the $i$-th number increases by $a_i \\times b_i$.\n\nNow Fusu will ask you some queries and perform some modifications on the sequence. Each operation is one of the following:\n\n- Query: at time $t$, what is the sum of $v$ over the interval $[l, r]$.\n- Modify $a$: at time $t$, add an integer $x$ to all $a$ in the interval $[l, r]$.\n- Modify $b$: at time $t$, add an integer $y$ to all $b$ in the interval $[l, r]$.\n- Modify $v$: at time $t$, add an integer $z$ to all $v$ in the interval $[l, r]$.\n\nThe initial time is defined as time $0$.", "inputFormat": "Each test point has exactly one set of testdata.\n\nThe first line contains two integers separated by spaces, representing the length of the sequence $n$ and the number of operations $m$.\n\nThe next $n$ lines each contain $3$ integers separated by spaces. On the $i$-th line, the integers $v_i, a_i, b_i$ represent the three parameters at position $i$.\n\nThe next $m$ lines describe the operations. The first number of each line is $opt$, representing the type of operation.\n\n- For $opt = 1$, it means one query on the sequence. After $opt$ there are three integers $t, x, y$ separated by spaces, meaning: query the sum of $v$ in interval $[x, y]$ at time $t$.\n- For $opt = 2$, it means one modification to the $a$ values. After $opt$ there are four integers $t, x, y, z$ separated by spaces, meaning: at time $t$, add $z$ to all $a$ in interval $[x, y]$.\n- For $opt = 3$, it means one modification to the $b$ values. After $opt$ there are four integers $t, x, y, z$ separated by spaces, meaning: at time $t$, add $z$ to all $b$ in interval $[x, y]$.\n- For $opt = 4$, it means one modification to the $v$ values. After $opt$ there are four integers $t, x, y, z$ separated by spaces, meaning: at time $t$, add $z$ to all $v$ in interval $[x, y]$.\n\nThe data guarantees that the parameter $t$ is strictly increasing, and there will not be more than one query or modification at the same time moment.", "outputFormat": "For each query operation, output one integer per line, representing the answer modulo $10^8 + 7$.", "hint": "#### Sample Input/Output 1 Explanation\n\n![qwq](https://cdn.luogu.com.cn/upload/pic/38337.png)\n\n---\n\n#### Constraints\n\n**This problem has $17$ test points, with unequal weights. For each test point, the value of $n$ is given in the table below**.\n\n| Test Point ID |         $n=$          | Test Point ID | $n=$|\n| :--------: | :-------------------: | :--------: | :-------------------: |\n|    $1$     |          $6$          |    $10$    |      $10^5 + 2$       |\n|    $2$     |         $10$          |   $11$    | $1.5 \\times 10^5 + 2$ |\n|    $3$     |         $100$         |  $12$    |      $10^5 + 3$       |\n|    $4$     |        $10^3$         |  $13$    | $1.5 \\times 10^5 + 3$ |\n|    $5$     |    $3 \\times 10^3$    | $14$    |  $2 \\times 10^5 + 4$  |\n|    $6$     |    $3 \\times 10^3$    |   $15$    |  $5 \\times 10^4 + 5$  |\n|    $7$     |      $10^4 + 1$       |   $16$    |      $10^5 + 5$       |\n|    $8$     |      $10^5 + 1$       |  $17$    |  $2 \\times 10^5 + 5$  |\n|    $9$     | $1.5 \\times 10^5 + 1$ |\n\n**Scores for test points**:\n\n- For test points $1$ to $14$, each test point is worth $5$ points.\n- For test points $15$ to $17$, each test point is worth $10$ points.\n\n**Values of $m$ for test points**:\n\n- For test point $1$, $m = 10$.\n- For test point $2$, $m = 50$.\n- For test points $3$ to $17$, $m = n$.\n\n**Special properties of test points**:\n\n- For all test points where the last digit of $n$ is $6$, the following property holds: the time moments used by operations start from $1$ and increase by $1$ each time.\n- For all test points where the last digit of $n$ is $1$, the following property holds: all modification operations only modify $a$, and the modification interval satisfies $x = y$.\n- For all test points where the last digit of $n$ is $2$, the following property holds: all modification operations only modify $a$.\n- For all test points where the last digit of $n$ is $3$, the following property holds: no modification operation modifies $v$, and for modifications to $b$, it holds that $x = y$.\n- For all test points where the last digit of $n$ is $4$, the following property holds: there are no modification operations.\n\nFor all test points, it is guaranteed that $1 \\leq x \\leq y \\leq n$, $1 \\leq op \\leq 4$, all given numbers are within the range of 32-bit signed integers, $t$ is positive, and is given in strictly increasing order.\n\n---\n\n#### Hint\n\n- Please pay attention to the impact of input reading on program efficiency.\n- Please pay attention to the impact of constant factors on program efficiency.\n- The last digit of $n$ can help you quickly determine the special properties of a test point.\n- If your answer is negative, please take it modulo into a non-negative number before outputting it.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[yLOI2018] 不老梦", "background": "> 于万人中万幸得以相逢，刹那间澈净明通。  \n> 成为我所向披靡的勇气和惶恐，裂山海，堕苍穹。\n\n——银临《不老梦》。\n\n本题原名《毒瘤分块题》。", "description": "扶苏非常喜欢一边听古风歌一边写毒瘤分块题。所以这个题的题面恶意卡了分块。\n\n给你一个序列，这个序列中的每个数字有三个参数 $v_i,a_i,b_i$。这个序列中的数有一个非常神奇的有关时间的性质：每过一个时刻，序列中第 $i$ 个数字的值 $v_i$ 会增加 $a_i \\times b_i$。\n\n现在扶苏会对你做出一些询问和对序列进行一些修改。每次操作形如：\n\n- 查询第 $t$ 时刻区间 $[l,r]$ 的 $v$ 之和是多少。\n- 在第 $t$ 时刻修改区间 $[l,r]$ 内的 $a$，将之整体加上一个整数 $x$。\n- 在第 $t$ 时刻修改区间 $[l,r]$ 内的 $b$，将之整体加上一个整数 $y$。\n- 在第 $t$ 时刻修改区间 $[l,r]$ 内的 $v$，将之整体加上一个整数 $z$。\n\n规定初始时刻为时刻 $0$。", "inputFormat": "每个测试点有且仅有一组测试数据。\n\n输入的第一行是两个用空格隔开的整数，分别代表序列的长度 $n$ 以及操作的个数 $m$。\n\n下面 $n$ 行，每行 $3$ 个用空格隔开的整数，第 $i$ 行的整数 $v_i,a_i,b_i$ 分别代表第 $i$ 个位置的三个参数。\n\n下面 $m$ 行，每行第一个数是 $opt$，代表操作的种类。\n\n- 对于 $opt = 1$ 的情况，代表对序列进行一次查询。 $opt$ 后有三个用空格隔开的整数 $t, x, y$，代表查询时刻 $t$ 区间 $[x,y]$ 中 $v$ 的和。\n- 对于 $opt = 2$ 的情况，代表对序列的 $a$ 值进行一次修改。$opt$ 后有四个用空格隔开的整数 $t, x, y, z$，代表在第 $t$ 时刻将区间 $[x,y]$ 中 $a$ 的值加上 $z$。\n- 对于 $opt = 3$ 的情况，代表对序列的 $b$ 值进行一次修改。$opt$ 后有四个用空格隔开的整数 $t, x, y, z$，代表在第 $t$ 时刻将区间 $[x,y]$ 中 $b$ 的值加上 $z$。\n- 对于 $opt = 4$ 的情况，代表对序列的 $v$ 值进行一次修改。$opt$ 后有四个用空格隔开的整数 $t, x, y, z$，代表在第 $t$ 时刻将区间 $[x,y]$ 中 $v$ 的值加上 $z$。\n\n数据保证参数 $t$ 是单调递增的，不存在同一时刻有超过一种查询或询问。\n", "outputFormat": "对于每次查询操作，输出一个一行一个整数，代表查询的答案对 $10^8 + 7$ 取模的答案。", "hint": "#### 【样例输入输出 1 解释】\n\n![qwq](https://cdn.luogu.com.cn/upload/pic/38337.png)\n\n\n---\n\n#### 【数据规模与约定】\n\n**本题共有 $17$ 个测试点，各测试点不等分。每个测试点的 $n$ 的规模如下表**。\n\n| 测试点编号 |         $n=$          | 测试点编号 | $n=$|\n| :--------: | :-------------------: | :--------: | :-------------------: |\n|    $1$     |          $6$          |    $10$    |      $10^5 + 2$       |\n|    $2$     |         $10$          |   $11$    | $1.5 \\times 10^5 + 2$ |\n|    $3$     |         $100$         |  $12$    |      $10^5 + 3$       |\n|    $4$     |        $10^3$         |  $13$    | $1.5 \\times 10^5 + 3$ |\n|    $5$     |    $3 \\times 10^3$    | $14$    |  $2 \\times 10^5 + 4$  |\n|    $6$     |    $3 \\times 10^3$    |   $15$    |  $5 \\times 10^4 + 5$  |\n|    $7$     |      $10^4 + 1$       |   $16$    |      $10^5 + 5$       |\n|    $8$     |      $10^5 + 1$       |  $17$    |  $2 \\times 10^5 + 5$  |\n|    $9$     | $1.5 \\times 10^5 + 1$ |\n\n**各测试点分值**：\n\n- 对于第 $1$ 到第 $14$ 个测试点，每个测试点 $5$ 分。\n- 对于第 $15$ 到第 $17$ 个测试点，每个测试点 $10$ 分。\n\n**各测试点 $m$ 的取值**：\n\n- 对于测试点 $1$，$m = 10$。\n- 对于测试点 $2$，$m = 50$。\n- 对于第 $3$ 到第 $17$ 个测试点，$m = n$。\n\n**各测试点特殊性质**：\n\n- 对于所有 $n$ 末位数字为 $6$ 的测试点，满足性质：操作所用到的时刻从 $1$ 开始，每次增加 $1$。\n- 对于所有 $n$ 末位数字为 $1$ 的测试点，满足性质：所有修改操作只涉及对 $a$ 的修改，且修改区间 $x = y$。\n- 对于所有 $n$ 末位数字为 $2$ 的测试点，满足性质：所有修改操作只涉及对 $a$ 的修改。\n- 对于所有 $n$ 末位数字为 $3$ 的测试点，满足性质：所有修改操作不涉及对 $v$ 的修改，且对于 $b$ 的修改满足 $x= y$。\n- 对于所有 $n$ 末位数字为 $4$ 的测试点，满足性质：不存在修改操作。\n\n\n对于全部的测试点，保证 $1 \\leq x \\leq y \\leq n$，$1 \\leq op \\leq 4$，给出的所有数字都在 32 位带符号整形的范围内，$t$ 为正数，且按照严格的升序给出。\n\n---\n\n#### 【提示】\n\n- 请注意数据读入对程序效率造成的影响。\n- 请注意常数因子对程序效率造成的影响。\n- $n$ 的末位数字可以帮助你快速判断测试点的特殊性质。\n- 当你的答案为负时，请将其取模成非负数后再进行输出。\n\n\n", "locale": "zh-CN"}}}
{"pid": "P5010", "type": "P", "difficulty": 6, "samples": [["5 3 2 4\n6 8 0 2 7", "1\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["贪心", "线段树", "O2优化", "排序"], "title": "HMR的LIS Ⅲ", "background": "[HMR的LIS Ⅰ](https://www.luogu.org/problemnew/show/T51390)\n\n[HMR的LIS Ⅱ](https://www.luogu.org/problemnew/show/T51391)\n\n在你帮助HMR切掉AKIOI的神仙LSK的两道题后，LSK很不满，决定好好刁难一下你（而不是HMR）", "description": "LSK又给出了一个长度为n的序列，要求你求出它的IBvl序列\n\nIBvl序列满足以下要求：\n\n1.一个IBvl序列满足$ \\forall ~ i \\in (1,len] , L < a_i - a_{i-1} < R $，其中$len$为IBvl序列的长度\n\n2.IBvl序列中的元素相对顺序应满足在原序列中的相对顺序\n\n3.在所有满足条件的序列中长度最长\n\n我们视位置不同的元素为不同元素，有任一组成元素不同的IBvl序列为不同IBvl序列\n\n现在要求你输出原序列的IBvl序列的长度，并输出字典序第k小（以元素在原序列中的位置为关键字排序）的序列的每个元素在原序列中的位置", "inputFormat": "第一行输入4个整数，n，k，L，R\n\n第二行输入n个整数，表示神仙LSK给出的序列", "outputFormat": "第一行输出IBvl序列的长度\n\n第二行输出IBvl序列的每个元素的位置", "hint": "#### 样例解释：\n\n对于给出的数据，一共有$5$种IBvl序列，分别是:$\\{6\\},\\{8\\},\\{0\\},\\{2\\},\\{7\\}$。\n\n他们在原序列中位置的编号序列分别是$\\{1\\},\\{2\\},\\{3\\},\\{4\\},\\{5\\}$\n\nIBvl序列的长度为1。\n\n要求输出字典序第$3$小的编号序列，于是输出$3$。\n\n#### 数据范围与约定：\n\n对于20%的数据，$ n \\le 18$\n\n对于50%的数据，$ n \\le 1000 , | l | , | r | \\leq 10^9 , r-l>1 , 0 \\le a[i] \\le 10^9 $\n\n对于另外10%的数据，$ l=0 , r=10^9+1 , k=1 $\n\n对于另外20%的数据，$ l=0 , r=10^9+1 , k \\le 3 $\n\n对于100%的数据，$ n \\le 5*10^5 , | l | , | r | \\le 10^9 , r-l>1 , k \\le 10^{13} , 0 \\le a[i] \\le 10^9 $\n\n对于所有数据，保证合法且有解。\n\n对于前50%的数据，时限为1s，后50%的数据，时限为2s（~~凉~~良心不卡常）", "locale": "zh-CN", "translations": {"en": {"title": "HMR's LIS III", "background": "[HMR's LIS I](https://www.luogu.org/problemnew/show/T51390)\n\n[HMR's LIS II](https://www.luogu.org/problemnew/show/T51391)\n\nAfter you helped HMR take down two problems by the genius LSK from AKIOI, LSK was very unhappy and decided to make things difficult for you (not for HMR).", "description": "LSK gives a sequence of length $n$ again, and asks you to find its IBvl sequence.\n\nAn IBvl sequence must satisfy the following:\n\n1. An IBvl sequence satisfies $ \\forall ~ i \\in (1,len] , L < a_i - a_{i-1} < R $, where $len$ is the length of the IBvl sequence.\n\n2. The relative order of elements in the IBvl sequence must follow their relative order in the original sequence.\n\n3. Among all sequences that satisfy the conditions, its length is the maximum.\n\nWe treat elements at different positions as different elements. Any two IBvl sequences are considered different if they differ in any chosen element.\n\nNow you need to output the length of the IBvl sequence of the original sequence, and output the positions (in the original sequence) of each element in the $k$-th smallest sequence in lexicographical order (where the key for ordering is the element's position in the original sequence).", "inputFormat": "The first line contains four integers $n$, $k$, $L$, $R$.\n\nThe second line contains $n$ integers, representing the sequence given by the genius LSK.", "outputFormat": "The first line outputs the length of the IBvl sequence.\n\nThe second line outputs the positions of each element of the IBvl sequence in the original sequence.", "hint": "#### Sample Explanation\n\nFor the given data, there are $5$ IBvl sequences in total: $\\{6\\},\\{8\\},\\{0\\},\\{2\\},\\{7\\}$.\n\nTheir index sequences (positions in the original sequence) are $\\{1\\},\\{2\\},\\{3\\},\\{4\\},\\{5\\}$, respectively.\n\nThe length of the IBvl sequence is $1$.\n\nYou are required to output the index sequence that is the $3$-rd smallest in lexicographical order, so the output is $3$.\n\n#### Constraints and Notes\n\nFor $20\\%$ of the testdata, $ n \\le 18 $.\n\nFor $50\\%$ of the testdata, $ n \\le 1000 , | l | , | r | \\leq 10^9 , r-l>1 , 0 \\le a[i] \\le 10^9 $.\n\nFor another $10\\%$ of the testdata, $ l=0 , r=10^9+1 , k=1 $.\n\nFor another $20\\%$ of the testdata, $ l=0 , r=10^9+1 , k \\le 3 $.\n\nFor $100\\%$ of the testdata, $ n \\le 5*10^5 , | l | , | r | \\le 10^9 , r-l>1 , k \\le 10^{13} , 0 \\le a[i] \\le 10^9 $.\n\nFor all testdata, it is guaranteed to be valid and that a solution exists.\n\nFor the first $50\\%$ of the testdata, the time limit is $1\\text{s}$. For the remaining $50\\%$, the time limit is $2\\text{s}$ (~~kind~~ not too strict about constant factors).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "HMR的LIS Ⅲ", "background": "[HMR的LIS Ⅰ](https://www.luogu.org/problemnew/show/T51390)\n\n[HMR的LIS Ⅱ](https://www.luogu.org/problemnew/show/T51391)\n\n在你帮助HMR切掉AKIOI的神仙LSK的两道题后，LSK很不满，决定好好刁难一下你（而不是HMR）", "description": "LSK又给出了一个长度为n的序列，要求你求出它的IBvl序列\n\nIBvl序列满足以下要求：\n\n1.一个IBvl序列满足$ \\forall ~ i \\in (1,len] , L < a_i - a_{i-1} < R $，其中$len$为IBvl序列的长度\n\n2.IBvl序列中的元素相对顺序应满足在原序列中的相对顺序\n\n3.在所有满足条件的序列中长度最长\n\n我们视位置不同的元素为不同元素，有任一组成元素不同的IBvl序列为不同IBvl序列\n\n现在要求你输出原序列的IBvl序列的长度，并输出字典序第k小（以元素在原序列中的位置为关键字排序）的序列的每个元素在原序列中的位置", "inputFormat": "第一行输入4个整数，n，k，L，R\n\n第二行输入n个整数，表示神仙LSK给出的序列", "outputFormat": "第一行输出IBvl序列的长度\n\n第二行输出IBvl序列的每个元素的位置", "hint": "#### 样例解释：\n\n对于给出的数据，一共有$5$种IBvl序列，分别是:$\\{6\\},\\{8\\},\\{0\\},\\{2\\},\\{7\\}$。\n\n他们在原序列中位置的编号序列分别是$\\{1\\},\\{2\\},\\{3\\},\\{4\\},\\{5\\}$\n\nIBvl序列的长度为1。\n\n要求输出字典序第$3$小的编号序列，于是输出$3$。\n\n#### 数据范围与约定：\n\n对于20%的数据，$ n \\le 18$\n\n对于50%的数据，$ n \\le 1000 , | l | , | r | \\leq 10^9 , r-l>1 , 0 \\le a[i] \\le 10^9 $\n\n对于另外10%的数据，$ l=0 , r=10^9+1 , k=1 $\n\n对于另外20%的数据，$ l=0 , r=10^9+1 , k \\le 3 $\n\n对于100%的数据，$ n \\le 5*10^5 , | l | , | r | \\le 10^9 , r-l>1 , k \\le 10^{13} , 0 \\le a[i] \\le 10^9 $\n\n对于所有数据，保证合法且有解。\n\n对于前50%的数据，时限为1s，后50%的数据，时限为2s（~~凉~~良心不卡常）", "locale": "zh-CN"}}}
{"pid": "P5011", "type": "P", "difficulty": 5, "samples": [["2\n6\n1 2 3 4 5 6\n", "16242509\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000, 32000]}, "tags": ["素数判断,质数,筛法", "期望", "逆元"], "title": "水の造题", "background": "第一分钟，CYJian 说：“要有样子。”于是便有了 $k$ 种动作。\n\n第二分钟，CYJian 说：“要有活力。”于是便有了 $k$ 种动作组成的总动作数为 $N$ 的搏击操。\n\n第三分钟，CYJian 说：“要有数学。”于是便有了一套搏击操的威力。\n\n第四分钟，CYJian 说：“数字要小。”于是便有了一个伟大的模数 $19491001$。\n\n第五分钟，CYJian 说：“要有规律。”于是便有了一套搏击操威力的计算方法。\n\n第六分钟，CYJian 说：“要有限制。”于是便有了时空限制以及数据范围。\n\n第七分钟，CYJian 说：“要有答案。”于是便有了这道题让你做掉。\n\n……\n\n第 $*$ 分钟，巨佬 Imagine 说：“数据太水。”于是蒟蒻出题人疯了。（详见数据范围）", "description": "现在有一套由 $k$ 种动作组成的动作总数为 $N$ 的搏击操。\n\n已知第 $1, 2, \\cdots, k$ 个动作的威力为 $a[1\\cdots k]$。\n\n且如果第一个动作后紧接着第二个动作，则威力会额外加上 $a[1]+a[2]$。\n\n如果第二个动作后紧接着第三个动作，则威力会额外加上 $a[2]+a[3]$。\n\n……\n\n如果第 $k$ 个动作后紧接着第一个动作，则威力会额外加上 $a[k]+a[1]$。\n\n请求出最后动作的期望威力。\n\n当然，还是要用伟大的模数 $19491001$ 来膜一膜的。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，一个正整数 $k$。\n\n第三行，$k$ 个正整数 $a[1\\cdots k]$。", "outputFormat": "一行，一个正整数表示期望的威力模 $19491001$ 的值。", "hint": "### 样例解释\n\n$x-y$ 表示第一个动作为 $x$，第二个动作为 $y$。\n\n- $1-1$：$1+1=2$；\n- $1-2$：$1+2+(1+2)=6$；\n- $1-3$：$1+3=4$；\n- $1-4$：$1+4=5$；\n- $1-5$：$1+5=6$；\n- $1-6$：$1+6=7$；\n- $2-1$：$2+1=3$；\n- $2-2$：$2+2=4$；\n- $2-3$：$2+3+(2+3)=10$；\n- $2-4$：$2+4=6$；\n- $2-5$：$2+5=7$；\n- $2-6$：$2+6=8$；\n- $3-1$：$3+1=4$；\n- $3-2$：$3+2=5$；\n- $3-3$：$3+3=6$；\n- $3-4$：$3+4+(3+4)=14$；\n- $3-5$：$3+5=8$；\n- $3-6$：$3+6=9$；\n- $4-1$：$4+1=5$；\n- $4-2$：$4+2=6$；\n- $4-3$：$4+3=7$；\n- $4-4$：$4+4=8$；\n- $4-5$：$4+5+(4+5)=18$；\n- $4-6$：$4+6=10$；\n- $5-1$：$5+1=6$；\n- $5-2$：$5+2=7$；\n- $5-3$：$5+3=8$；\n- $5-4$：$5+4=9$；\n- $5-5$：$5+5=10$；\n- $5-6$：$5+6+(5+6)=22$；\n- $6-1$：$6+1+(6+1)=14$；\n- $6-2$：$6+2=8$；\n- $6-3$：$6+3=9$；\n- $6-4$：$6+4=10$；\n- $6-5$：$6+5=11$；\n- $6-6$：$6+6=12$。\n\n$2+6+4+5+6+7+3+4+10+6+7+8+4+5+6+14+8+9+5+6+7+8+18+10+6+7+8+9+10+22+14+8+9+10+11+12=294$。\n\n$294/36=49/6$。\n\n$1/6 \\equiv 16242501 \\pmod{19491001}$。\n\n$ans = 49 \\times 16242501 \\bmod 19491001 = 16242509$。\n\n\nSubtask 1（20 pts）：$1 \\leq N \\leq 10$，$1 \\leq k \\leq 7$；\n- Subtask 2（20 pts）：$1 \\leq N \\leq 10^6$，$1 \\leq k \\leq 7$；\n- Subtask 3（20 pts）：$1 \\leq N \\leq 10^{40000}$，$1 \\leq k \\leq 7$；\n- Subtask 4（20 pts）：$1 \\leq N \\leq 10^{10^6}$，$1 \\leq k \\leq 7$；\n- Subtask 5（20 pts）：$1 \\leq N \\leq 10^{10^6}$，$1 \\leq k \\leq 10^6$。\n\n保证所有的数据：$1 \\leq a[i] \\leq 10^7$。\n\n**注意：本题捆绑测试。**\n\n小提示：\n\n可以用下面的 $\\texttt{inv(}x\\texttt{)}$ 求出 $x$ 的逆元：\n\n```\nlong long mod = 19491001;\n\nlong long quick_pow(long long x, int k) {\n    long long res = 1;\n    while(k) {\n        if(k & 1) res = res * x % mod;\n        x = x * x % mod;\n        k >>= 1;\n    }\n    return res;\n}\n\nlong long inv(long long x) {\n    return quick_pow(x, mod - 2);\n}\n```", "locale": "zh-CN", "translations": {"en": {"title": "Mizu’s Problem Setting.", "background": "In the first minute, CYJian said, “There should be some form.” So there were $k$ kinds of moves.\n\nIn the second minute, CYJian said, “There should be energy.” So there was a combat-aerobics routine with a total of $N$ moves composed of the $k$ kinds of moves.\n\nIn the third minute, CYJian said, “There should be math.” So there was a definition of the power of a routine.\n\nIn the fourth minute, CYJian said, “Numbers should be small.” So there was a great modulus $19491001$.\n\nIn the fifth minute, CYJian said, “There should be a pattern.” So there was a way to compute the power of a routine.\n\nIn the sixth minute, CYJian said, “There should be limits.” So there were time and memory limits and Constraints.\n\nIn the seventh minute, CYJian said, “There should be an answer.” So there was this problem for you to solve.\n\n……\n\nIn the $*$-th minute, the expert Imagine said, “The testdata is too easy.” So the newbie problem setter went crazy. (See Constraints for details.)", "description": "Now there is a combat-aerobics routine consisting of $k$ kinds of moves, with a total of $N$ moves.\n\nIt is known that the power of moves $1, 2, \\cdots, k$ is $a[1\\cdots k]$.\n\nAlso, if the first move is immediately followed by the second move, then the power will additionally increase by $a[1]+a[2]$.\n\nIf the second move is immediately followed by the third move, then the power will additionally increase by $a[2]+a[3]$.\n\n……\n\nIf the $k$-th move is immediately followed by the first move, then the power will additionally increase by $a[k]+a[1]$.\n\nPlease find the expected power of the final routine.\n\nOf course, you still need to take it modulo the great modulus $19491001$.", "inputFormat": "The first line contains a positive integer $N$.\n\nThe second line contains a positive integer $k$.\n\nThe third line contains $k$ positive integers $a[1\\cdots k]$.", "outputFormat": "One line, a positive integer representing the expected power modulo $19491001$.", "hint": "### Sample Explanation\n\n$x-y$ means the first move is $x$ and the second move is $y$.\n\n- $1-1$: $1+1=2$;\n- $1-2$: $1+2+(1+2)=6$;\n- $1-3$: $1+3=4$;\n- $1-4$: $1+4=5$;\n- $1-5$: $1+5=6$;\n- $1-6$: $1+6=7$;\n- $2-1$: $2+1=3$;\n- $2-2$: $2+2=4$;\n- $2-3$: $2+3+(2+3)=10$;\n- $2-4$: $2+4=6$;\n- $2-5$: $2+5=7$;\n- $2-6$: $2+6=8$;\n- $3-1$: $3+1=4$;\n- $3-2$: $3+2=5$;\n- $3-3$: $3+3=6$;\n- $3-4$: $3+4+(3+4)=14$;\n- $3-5$: $3+5=8$;\n- $3-6$: $3+6=9$;\n- $4-1$: $4+1=5$;\n- $4-2$: $4+2=6$;\n- $4-3$: $4+3=7$;\n- $4-4$: $4+4=8$;\n- $4-5$: $4+5+(4+5)=18$;\n- $4-6$: $4+6=10$;\n- $5-1$: $5+1=6$;\n- $5-2$: $5+2=7$;\n- $5-3$: $5+3=8$;\n- $5-4$: $5+4=9$;\n- $5-5$: $5+5=10$;\n- $5-6$: $5+6+(5+6)=22$;\n- $6-1$: $6+1+(6+1)=14$;\n- $6-2$: $6+2=8$;\n- $6-3$: $6+3=9$;\n- $6-4$: $6+4=10$;\n- $6-5$: $6+5=11$;\n- $6-6$: $6+6=12$.\n\n$2+6+4+5+6+7+3+4+10+6+7+8+4+5+6+14+8+9+5+6+7+8+18+10+6+7+8+9+10+22+14+8+9+10+11+12=294$.\n\n$294/36=49/6$.\n\n$1/6 \\equiv 16242501 \\pmod{19491001}$.\n\n$ans = 49 \\times 16242501 \\bmod 19491001 = 16242509$.\n\nSubtask 1 (20 pts): $1 \\leq N \\leq 10$, $1 \\leq k \\leq 7$.\n- Subtask 2 (20 pts): $1 \\leq N \\leq 10^6$, $1 \\leq k \\leq 7$.\n- Subtask 3 (20 pts): $1 \\leq N \\leq 10^{40000}$, $1 \\leq k \\leq 7$.\n- Subtask 4 (20 pts): $1 \\leq N \\leq 10^{10^6}$, $1 \\leq k \\leq 7$.\n- Subtask 5 (20 pts): $1 \\leq N \\leq 10^{10^6}$, $1 \\leq k \\leq 10^6$.\n\nIt is guaranteed for all testdata that $1 \\leq a[i] \\leq 10^7$.\n\n**Note: This problem uses bundled tests.**\n\nA small hint:\n\nYou can use the following $\\texttt{inv(}x\\texttt{)}$ to compute the modular inverse of $x$:\n\n```\nlong long mod = 19491001;\n\nlong long quick_pow(long long x, int k) {\n    long long res = 1;\n    while(k) {\n        if(k & 1) res = res * x % mod;\n        x = x * x % mod;\n        k >>= 1;\n    }\n    return res;\n}\n\nlong long inv(long long x) {\n    return quick_pow(x, mod - 2);\n}\n```\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "水の造题", "background": "第一分钟，CYJian 说：“要有样子。”于是便有了 $k$ 种动作。\n\n第二分钟，CYJian 说：“要有活力。”于是便有了 $k$ 种动作组成的总动作数为 $N$ 的搏击操。\n\n第三分钟，CYJian 说：“要有数学。”于是便有了一套搏击操的威力。\n\n第四分钟，CYJian 说：“数字要小。”于是便有了一个伟大的模数 $19491001$。\n\n第五分钟，CYJian 说：“要有规律。”于是便有了一套搏击操威力的计算方法。\n\n第六分钟，CYJian 说：“要有限制。”于是便有了时空限制以及数据范围。\n\n第七分钟，CYJian 说：“要有答案。”于是便有了这道题让你做掉。\n\n……\n\n第 $*$ 分钟，巨佬 Imagine 说：“数据太水。”于是蒟蒻出题人疯了。（详见数据范围）", "description": "现在有一套由 $k$ 种动作组成的动作总数为 $N$ 的搏击操。\n\n已知第 $1, 2, \\cdots, k$ 个动作的威力为 $a[1\\cdots k]$。\n\n且如果第一个动作后紧接着第二个动作，则威力会额外加上 $a[1]+a[2]$。\n\n如果第二个动作后紧接着第三个动作，则威力会额外加上 $a[2]+a[3]$。\n\n……\n\n如果第 $k$ 个动作后紧接着第一个动作，则威力会额外加上 $a[k]+a[1]$。\n\n请求出最后动作的期望威力。\n\n当然，还是要用伟大的模数 $19491001$ 来膜一膜的。", "inputFormat": "第一行，一个正整数 $N$。\n\n第二行，一个正整数 $k$。\n\n第三行，$k$ 个正整数 $a[1\\cdots k]$。", "outputFormat": "一行，一个正整数表示期望的威力模 $19491001$ 的值。", "hint": "### 样例解释\n\n$x-y$ 表示第一个动作为 $x$，第二个动作为 $y$。\n\n- $1-1$：$1+1=2$；\n- $1-2$：$1+2+(1+2)=6$；\n- $1-3$：$1+3=4$；\n- $1-4$：$1+4=5$；\n- $1-5$：$1+5=6$；\n- $1-6$：$1+6=7$；\n- $2-1$：$2+1=3$；\n- $2-2$：$2+2=4$；\n- $2-3$：$2+3+(2+3)=10$；\n- $2-4$：$2+4=6$；\n- $2-5$：$2+5=7$；\n- $2-6$：$2+6=8$；\n- $3-1$：$3+1=4$；\n- $3-2$：$3+2=5$；\n- $3-3$：$3+3=6$；\n- $3-4$：$3+4+(3+4)=14$；\n- $3-5$：$3+5=8$；\n- $3-6$：$3+6=9$；\n- $4-1$：$4+1=5$；\n- $4-2$：$4+2=6$；\n- $4-3$：$4+3=7$；\n- $4-4$：$4+4=8$；\n- $4-5$：$4+5+(4+5)=18$；\n- $4-6$：$4+6=10$；\n- $5-1$：$5+1=6$；\n- $5-2$：$5+2=7$；\n- $5-3$：$5+3=8$；\n- $5-4$：$5+4=9$；\n- $5-5$：$5+5=10$；\n- $5-6$：$5+6+(5+6)=22$；\n- $6-1$：$6+1+(6+1)=14$；\n- $6-2$：$6+2=8$；\n- $6-3$：$6+3=9$；\n- $6-4$：$6+4=10$；\n- $6-5$：$6+5=11$；\n- $6-6$：$6+6=12$。\n\n$2+6+4+5+6+7+3+4+10+6+7+8+4+5+6+14+8+9+5+6+7+8+18+10+6+7+8+9+10+22+14+8+9+10+11+12=294$。\n\n$294/36=49/6$。\n\n$1/6 \\equiv 16242501 \\pmod{19491001}$。\n\n$ans = 49 \\times 16242501 \\bmod 19491001 = 16242509$。\n\n\nSubtask 1（20 pts）：$1 \\leq N \\leq 10$，$1 \\leq k \\leq 7$；\n- Subtask 2（20 pts）：$1 \\leq N \\leq 10^6$，$1 \\leq k \\leq 7$；\n- Subtask 3（20 pts）：$1 \\leq N \\leq 10^{40000}$，$1 \\leq k \\leq 7$；\n- Subtask 4（20 pts）：$1 \\leq N \\leq 10^{10^6}$，$1 \\leq k \\leq 7$；\n- Subtask 5（20 pts）：$1 \\leq N \\leq 10^{10^6}$，$1 \\leq k \\leq 10^6$。\n\n保证所有的数据：$1 \\leq a[i] \\leq 10^7$。\n\n**注意：本题捆绑测试。**\n\n小提示：\n\n可以用下面的 $\\texttt{inv(}x\\texttt{)}$ 求出 $x$ 的逆元：\n\n```\nlong long mod = 19491001;\n\nlong long quick_pow(long long x, int k) {\n    long long res = 1;\n    while(k) {\n        if(k & 1) res = res * x % mod;\n        x = x * x % mod;\n        k >>= 1;\n    }\n    return res;\n}\n\nlong long inv(long long x) {\n    return quick_pow(x, mod - 2);\n}\n```", "locale": "zh-CN"}}}
{"pid": "P5012", "type": "P", "difficulty": 5, "samples": [["5 3\n3 5 1 2 4\n233 666 1 3\n555 999 2 3\n123 987 233 888", "25 5\n1 3 0\n10 4\n2 3 0\n-1 -1\n3 3 0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["线段树", "并查集", "O2优化", "分块", "ST 表"], "title": "水の数列", "background": "${\\rm CYJian}$想到了一个很好玩的游戏呢...", "description": "${\\rm CYJian}$现在给你一个长度为$N$的数列，你可以选择一个数$x$，然后获得一个得分，得分越大越好。\n\n得分是这样计算的:\n\n首先把小于等于$x$的数标记，然后你的得分就是每一个连续标记的区间的长度的平方和。\n\n${\\rm CYJian}$觉得这样太简单了，~~答案显然就是最大值嘛~~所以他就把得分改成了原来的得分除以你选择的数。\n\n${\\rm CYJian}$还是觉得这样太简单了，所以他需要你选择的数得到的区间的个数在$l$~$r$的范围内。\n\n${\\rm CYJian}$还是觉得这样太简单了，所以他加上了$T$组询问。\n\n${\\rm CYJian}$还是觉得这样太简单了，所以他决定强制在线。", "inputFormat": "第一行两个正整数$n$，$T$。\n\n第二行$n$个正整数$Num_i$表示${\\rm CYJian}$给出的数列。\n\n接下来$T$行，每行四个正整数$a$，$b$，$x$，$y$，你需要这样得到真正的$l$和$r$:\n\n```\nl = (a * lastans + x - 1) % n + 1;\nr = (b * lastans + y - 1) % n + 1;\nif (l > r) swap(l, r);\n```\n\n其中${\\rm lastans}$表示上一次询问的最大分数(原始得分)和得到这个最大的分数的$x$的乘积。特别的，我们令第一次询问时${\\rm lastans}=0$。", "outputFormat": "$T$行，每行两个正整数表示每一次询问能得到的最大的分数(原始的得分)和得到这个最大的分数的$x$。特别的，如果无解输出\"$-1\\ -1$\"（此时 $lastans$ 为 $1$）。如果有多解则输出选择的数最大的一组。\n\n$CYJian$想知道你是不是蒙的，所以你还需要告诉他**这一次询问的**$L$，$R$，$lastans \\bmod n$。\n\n具体参见样例。", "hint": "${\\rm Subtask\\ 1(30\\ pts)}:\\qquad 1 \\leq N,T \\leq 10^2$\n\n${\\rm Subtask\\ 2(30\\ pts)}:\\qquad 1 \\leq N,T \\leq 10^3$\n\n${\\rm Subtask\\ 3(40\\ pts)}:\\qquad 1 \\leq N \\leq 10^6 \\qquad 1 \\leq T \\leq 10^3$\n\n$1 \\leq Num_i \\leq 10^6$\n\n其余输入的数字均在${\\rm int}$范围内。", "locale": "zh-CN", "translations": {"en": {"title": "Water Sequence", "background": "${\\rm CYJian}$ came up with a very fun game...", "description": "${\\rm CYJian}$ now gives you a sequence of length $N$. You may choose a number $x$, and then obtain a score. The larger the score, the better.\n\nThe score is computed as follows:\n\nFirst, mark all numbers that are less than or equal to $x$. Then, your score is the sum of the squares of the lengths of every consecutive marked segment.\n\n${\\rm CYJian}$ thought this was too easy, ~~the answer is obviously just the maximum value~~ so he changed the score to be the original score divided by the number you chose.\n\n${\\rm CYJian}$ still thought this was too easy, so he requires that the number of segments obtained by your chosen number must be within the range $l$ to $r$.\n\n${\\rm CYJian}$ still thought this was too easy, so he added $T$ queries.\n\n${\\rm CYJian}$ still thought this was too easy, so he decided to enforce online queries.", "inputFormat": "The first line contains two positive integers $n$, $T$.\n\nThe second line contains $n$ positive integers $Num_i$, representing the sequence given by ${\\rm CYJian}$.\n\nIn the next $T$ lines, each line contains four positive integers $a$, $b$, $x$, $y$. You need to obtain the actual $l$ and $r$ as follows:\n\n```\nl = (a * lastans + x - 1) % n + 1;\nr = (b * lastans + y - 1) % n + 1;\nif (l > r) swap(l, r);\n```\n\nHere, ${\\rm lastans}$ denotes the product of the maximum score (the original score) from the previous query and the $x$ that achieves this maximum score. In particular, for the first query we define ${\\rm lastans}=0$.", "outputFormat": "Output $T$ lines. Each line contains two positive integers, representing the maximum score (the original score) that can be obtained for this query and the $x$ that achieves this maximum score. In particular, if there is no solution, output \"$-1\\ -1$\" (in this case, $lastans$ is $1$). If there are multiple solutions, output the one with the largest chosen number.\n\n$CYJian$ wants to know whether you are guessing, so you also need to tell him $L$, $R$, and $lastans \\bmod n$ **for this query**.\n\nSee the sample for details.", "hint": "${\\rm Subtask\\ 1(30\\ pts)}:\\qquad 1 \\leq N,T \\leq 10^2$\n\n${\\rm Subtask\\ 2(30\\ pts)}:\\qquad 1 \\leq N,T \\leq 10^3$\n\n${\\rm Subtask\\ 3(40\\ pts)}:\\qquad 1 \\leq N \\leq 10^6 \\qquad 1 \\leq T \\leq 10^3$\n\n$1 \\leq Num_i \\leq 10^6$\n\nAll other input numbers are within the range of ${\\rm int}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "水の数列", "background": "${\\rm CYJian}$想到了一个很好玩的游戏呢...", "description": "${\\rm CYJian}$现在给你一个长度为$N$的数列，你可以选择一个数$x$，然后获得一个得分，得分越大越好。\n\n得分是这样计算的:\n\n首先把小于等于$x$的数标记，然后你的得分就是每一个连续标记的区间的长度的平方和。\n\n${\\rm CYJian}$觉得这样太简单了，~~答案显然就是最大值嘛~~所以他就把得分改成了原来的得分除以你选择的数。\n\n${\\rm CYJian}$还是觉得这样太简单了，所以他需要你选择的数得到的区间的个数在$l$~$r$的范围内。\n\n${\\rm CYJian}$还是觉得这样太简单了，所以他加上了$T$组询问。\n\n${\\rm CYJian}$还是觉得这样太简单了，所以他决定强制在线。", "inputFormat": "第一行两个正整数$n$，$T$。\n\n第二行$n$个正整数$Num_i$表示${\\rm CYJian}$给出的数列。\n\n接下来$T$行，每行四个正整数$a$，$b$，$x$，$y$，你需要这样得到真正的$l$和$r$:\n\n```\nl = (a * lastans + x - 1) % n + 1;\nr = (b * lastans + y - 1) % n + 1;\nif (l > r) swap(l, r);\n```\n\n其中${\\rm lastans}$表示上一次询问的最大分数(原始得分)和得到这个最大的分数的$x$的乘积。特别的，我们令第一次询问时${\\rm lastans}=0$。", "outputFormat": "$T$行，每行两个正整数表示每一次询问能得到的最大的分数(原始的得分)和得到这个最大的分数的$x$。特别的，如果无解输出\"$-1\\ -1$\"（此时 $lastans$ 为 $1$）。如果有多解则输出选择的数最大的一组。\n\n$CYJian$想知道你是不是蒙的，所以你还需要告诉他**这一次询问的**$L$，$R$，$lastans \\bmod n$。\n\n具体参见样例。", "hint": "${\\rm Subtask\\ 1(30\\ pts)}:\\qquad 1 \\leq N,T \\leq 10^2$\n\n${\\rm Subtask\\ 2(30\\ pts)}:\\qquad 1 \\leq N,T \\leq 10^3$\n\n${\\rm Subtask\\ 3(40\\ pts)}:\\qquad 1 \\leq N \\leq 10^6 \\qquad 1 \\leq T \\leq 10^3$\n\n$1 \\leq Num_i \\leq 10^6$\n\n其余输入的数字均在${\\rm int}$范围内。", "locale": "zh-CN"}}}
{"pid": "P5013", "type": "P", "difficulty": 5, "samples": [["0 2 3\nCYJian\nJerryC\nJustin\nCYJian\na10 b10 c10 d10 a9\nJerryC\ncA b2 c3 d4 d5\nJustin\naA bA dA a4 c6\nCYJian\naA b2 c3 d4 a5\nJerryC\nbA c2 d3 a4 b5\nJustin\ncA d2 a3 c4 c5", "CYJian 220\nJerryC -160\nJustin -60"], ["0 3 4\nCYJian\nJerryC\nSamcompu\nHsl2363\nCYJian\na2 b5 c8 d4 aA\nSamcompu\na2 bA c3 a4 c5\nJerryC\naA b2 c7 c4 c6\nHsl2363\naA bA cA dA a10\nSamcompu\na2 b2 c2 d2 b10\nJerryC\na3 b3 c3 d3 c10\nHsl2363\na5 c6 d8 a9 b9\nJerryC\nb6 b2 c9 a7 d2\nCYJian\nb5 d5 c5 a6 d9", "CYJian 120\nJerryC 150\nSamcompu -60\nHsl2363 -210\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1500, 1500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "O2优化"], "title": "水の斗牛", "background": "蒟蒻 ${\\rm CYJian}$ 拉着 ${\\rm JerryC}$ 和 ${\\rm Justin}$ 等一众机房巨佬来打斗牛辣！！", "description": "现在一共有 $N$ 个人玩起了斗牛。一共玩了 $T$ 局，每局有三个人参与游戏，每个人的初始分都是 $0$。\n\n本题为了方便，对于斗牛的基本规则做了些许变动，具体规则如下：\n\n### 1.基本规则\n\n每一轮斗牛开始时，每一位玩家都会拿到 $5$ 张牌。\n\n每张牌一定是一个 $2$ 到 $10$ 之间的整数或 `A`（表示 $1$）。\n\n每张牌有一个花色，a 代表黑桃，b 代表红桃，c 代表梅花，d 代表方块。\n\n\n### 2.牌型\n\n五张牌中，除炸弹和无牛牌型以外，都分为两个部分：牛和分。其中牛包括三张点数相同（铁板）或三张点数和为 $10$ 的倍数的牌，分包括剩下的两张牌，一套牌的分即为这两张牌模 $10$ 的余数。\n\n（1）炸弹：四张点数相同的牌。\n\n（2）牛牛：分恰好为 $0$。\n\n（3）牛：分不为 $0$，分和牛数的数值相同。如分是 $5$，则这套牌被称为牛五。\n\n（4）无牛：不存在三张牌，其点数相同或其点数和为 $10$ 的倍数。\n\n### 3.牌型大小关系\n\n炸弹>牛牛>牛九>牛八>……>牛二>牛一>无牛。\n\n双方拥有炸弹时，炸弹点数大的更大；\n\n相同牛数且只有一方有铁板时，有铁板的比没有铁板的大；\n\n相同牛数且双方拥有铁板时，铁板点数大的更大；\n\n相同牛数且双方均没有铁板或双方均无牛时，我们比较双方牌中点数最大的一张牌，点数更大的一方更大；若双方点数最大的一张牌点数相同，则花色更大的一方更大，花色大小为黑桃>红桃>梅花>方块。\n\n### 4.计分\n\n一局牌的底分为 $10$，即每位玩家都会押 $10$ 分。\n\n对于其中的两位玩家，我们在比较完双方的牌型之后，选择牌型更大的一方的牌型来计算得失分数的翻倍。具体如下：\n\n（1）炸弹：底分${}\\times 10$。\n\n（2）牛牛：底分${}\\times 3$。\n\n（3）牛七/牛八/牛九：底分${}\\times 2$。\n\n（4）牛六~牛一：底分。\n\n（5）无牛：底分。\n\n（6）铁板：在计算完牌型得分之后，在牌型得分的基础上${}\\times 2$。注意铁板翻倍不与炸弹同时进行。\n\n我们在计分时，采用两两之间计分的方式，也就是说对于三名玩家 A、B、C，我们先计算 A 和 B 之间的分数得失，再计算 A 和 C 之间的分数得失，最后计算 B 和 C 之间的分数得失。\n\n现在我们假设所有玩家都足够聪明，也就是说，所有玩家都会打出他们手上的牌中最大的牌型。${\\rm CYJian}$ 想知道，在这 $T$ 轮游戏结束之后，每位玩家的得分情况。", "inputFormat": "第一行两个整数 $id,T,N$。其中 $id$ 表示测试点编号，对于部分分可能有一定帮助。其中样例的测试点编号为 $0$。\n\n接下来 $N$ 行，每行一个仅包括大小写字母和数字的长度少于 $11$ 的字符串表示玩家名称。\n\n接下来 $T$ 组，每组数据六行，可分为三个相同的部分：\n\n第一行一个字符串表示玩家名称。\n\n第二行五个字符串表示该玩家手中的手牌。每一个字符串的第一个字符表示花色，其余字符表示牌的大小。", "outputFormat": "共 $N$ 行，每行一个字符串和一个数字，中间用空格隔开。表示一名玩家和他的最终得分。\n\n请按照玩家名称的输入顺序输出。", "hint": "样例一解释：\n\n第一局玩家牌型如下：\n\n${\\rm CYJian}$：炸弹\n\n${\\rm JerryC}$：牛五\n\n${\\rm Justin}$：铁板牛牛\n\n所以 ${\\rm CYJian}$ 加 $200$ 分，${\\rm JerryC}$ 扣 $160$ 分，${\\rm Justin}$ 扣 $40$ 分。\n\n第二局中，所有人都是牛五，但是 ${\\rm CYJian}$ 拥有黑桃五，${\\rm JerryC}$ 拥有红桃五，${\\rm Justin}$ 拥有梅花五，所以 ${\\rm CYJian}$ 加 $20$ 分，${\\rm JerryC}$ 没有变化，${\\rm Justin}$ 扣 $20$ 分。\n\n数据范围：\n\n| 测试点编号 |   $T$    |   $N$   | 特殊性质 |\n| :--------: | :------: | :-----: | :------: |\n|    $1$     |   $0$    |   $3$   |    性质 4    |\n|    $2$     |   $5$   |  $5$   |    性质 4    |\n|  $3$-$4$   |   $5$   |  $5$   |  性质 1   |\n|  $5$-$6$   |   $5$   |  $5$   |  性质 2   |\n|  $7$-$8$   |   $5$   |  $5$   |  性质 3   |\n|  $9$-$10$  |   $5$   |  $5$   |  性质 5   |\n| $11$-$12$  |   $10$    |   $10$   |  性质 5   |\n| $13$-$14$  |   $100$   |  $100$   |  性质 5   |\n| $15$-$16$  |  $1000$   |  $1000$  |  性质 5   |\n| $17$-$18$  |  $10000$  | $10000$  |  性质 5   |\n| $19$-$20$  | $100000$ | $100000$ |  性质 5，1.5s   |\n\n性质 1：保证所有的人拥有炸弹。\n\n性质 2：保证每一手牌花色全部相同。\n\n性质 3：保证每一手牌所有数字不同。\n\n性质 4：保证数据手造。\n\n性质 5：保证数据随机生成。\n\n保证每一局没有重复的牌。\n\n保证每一个人的名字不相同。\n\n保证出题人是 ${\\rm CYJian}$。\n\n保证数据没有锅。\n\n不保证没有人能做出来。\n\n不保证此题代码很长。", "locale": "zh-CN", "translations": {"en": {"title": "Water Bullfight", "background": "Newbie ${\\rm CYJian}$ dragged ${\\rm JerryC}$, ${\\rm Justin}$, and a group of big shots from the computer lab to play Bullfight!!", "description": "There are now $N$ people playing Bullfight. A total of $T$ rounds are played. In each round, three people participate, and everyone starts with a score of $0$.\n\nFor convenience, this problem makes some small changes to the basic rules of Bullfight. The detailed rules are as follows.\n\n### 1. Basic Rules\n\nAt the start of each Bullfight round, each player receives $5$ cards.\n\nEach card is either an integer from $2$ to $10$ or `A` (which represents $1$).\n\nEach card has a suit: `a` for spades, `b` for hearts, `c` for clubs, and `d` for diamonds.\n\n### 2. Hand Types\n\nAmong the five cards, except for Bomb and No Bull, every hand is divided into two parts: Bull and Points.\n\n- The Bull part consists of either three cards with the same rank (Iron Plate), or three cards whose ranks sum to a multiple of $10$.\n- The Points part consists of the remaining two cards. The points of a hand is the remainder of the sum of these two cards modulo $10$.\n\nThe hand types are:\n\n(1) Bomb: four cards with the same rank.\n\n(2) Bull Bull: the points is exactly $0$.\n\n(3) Bull: the points is not $0$, and the value of the points equals the bull number. For example, if the points is $5$, then this hand is called Bull Five.\n\n(4) No Bull: there do not exist three cards whose ranks are all the same, or whose rank sum is a multiple of $10$.\n\n### 3. Hand Ranking Rules\n\nBomb $>$ Bull Bull $>$ Bull Nine $>$ Bull Eight $>$ $\\cdots$ $>$ Bull Two $>$ Bull One $>$ No Bull.\n\nIf both sides have Bomb, the Bomb with the larger rank is larger.\n\nIf the bull number is the same and only one side has an Iron Plate, the one with an Iron Plate is larger.\n\nIf the bull number is the same and both sides have an Iron Plate, the Iron Plate with the larger rank is larger.\n\nIf the bull number is the same and neither side has an Iron Plate, or both sides have No Bull, compare the highest-rank card in each hand. The side with the larger highest card is larger. If the highest card ranks are equal, compare suits: spades $>$ hearts $>$ clubs $>$ diamonds.\n\n### 4. Scoring\n\nThe base score of a hand is $10$, meaning each player bets $10$ points.\n\nFor any two players, after comparing their hand types, we take the larger hand type (between the two) to determine the score multiplier for the gain/loss. The rules are:\n\n(1) Bomb: base score $\\times 10$.\n\n(2) Bull Bull: base score $\\times 3$.\n\n(3) Bull Seven / Bull Eight / Bull Nine: base score $\\times 2$.\n\n(4) Bull Six to Bull One: base score.\n\n(5) No Bull: base score.\n\n(6) Iron Plate: after computing the hand-type score, multiply by $2$ based on that score. Note that the Iron Plate multiplier is not applied together with Bomb.\n\nScoring is done pairwise. That is, for three players A, B, and C, we first compute the score gain/loss between A and B, then between A and C, and finally between B and C.\n\nNow assume all players are smart enough, meaning every player will always play the largest possible hand type from the cards in their hand. ${\\rm CYJian}$ wants to know, after these $T$ rounds, the final score of each player.", "inputFormat": "The first line contains three integers $id, T, N$. Here $id$ is the test point index, which may be helpful for partial scoring. In the samples, the test point index is $0$.\n\nThe next $N$ lines each contain a string of length less than $11$ consisting only of letters (uppercase/lowercase) and digits, representing a player name.\n\nThen follow $T$ groups. Each group has six lines, and can be viewed as three identical parts:\n\n- The first line contains a string: the player name.\n- The second line contains five strings: the player’s five cards. For each string, the first character is the suit, and the remaining characters represent the rank.", "outputFormat": "Output $N$ lines. Each line contains a string and an integer, separated by a space, representing a player and their final score.\n\nPlease output in the same order as the player names are given in the input.", "hint": "Explanation for Sample 1.\n\nIn the first round, the hand types are:\n\n${\\rm CYJian}$: Bomb\n\n${\\rm JerryC}$: Bull Five\n\n${\\rm Justin}$: Iron Plate Bull Bull\n\nSo ${\\rm CYJian}$ gains $200$ points, ${\\rm JerryC}$ loses $160$ points, and ${\\rm Justin}$ loses $40$ points.\n\nIn the second round, everyone has Bull Five, but ${\\rm CYJian}$ has the spade five, ${\\rm JerryC}$ has the heart five, and ${\\rm Justin}$ has the club five. So ${\\rm CYJian}$ gains $20$ points, ${\\rm JerryC}$ does not change, and ${\\rm Justin}$ loses $20$ points.\n\nConstraints:\n\n| Test Point Index |   $T$    |   $N$   | Special Property |\n| :--------------: | :------: | :-----: | :--------------: |\n|      $1$      |   $0$    |   $3$   | Property 4 |\n|      $2$      |   $5$    |   $5$   | Property 4 |\n|    $3$-$4$    |   $5$    |   $5$   | Property 1 |\n|    $5$-$6$    |   $5$    |   $5$   | Property 2 |\n|    $7$-$8$    |   $5$    |   $5$   | Property 3 |\n|   $9$-$10$    |   $5$    |   $5$   | Property 5 |\n|  $11$-$12$    |   $10$   |   $10$  | Property 5 |\n|  $13$-$14$    |  $100$   |  $100$  | Property 5 |\n|  $15$-$16$    |  $1000$  |  $1000$ | Property 5 |\n|  $17$-$18$    | $10000$  | $10000$ | Property 5 |\n|  $19$-$20$    | $100000$ | $100000$ | Property 5, $1.5\\text{s}$ |\n\nProperty 1: It is guaranteed that everyone has a Bomb.\n\nProperty 2: It is guaranteed that all suits in each hand are the same.\n\nProperty 3: It is guaranteed that all ranks in each hand are different.\n\nProperty 4: It is guaranteed that the testdata is handcrafted.\n\nProperty 5: It is guaranteed that the testdata is randomly generated.\n\nIt is guaranteed that there are no repeated cards within any round.\n\nIt is guaranteed that every player has a unique name.\n\nIt is guaranteed that the problem setter is ${\\rm CYJian}$.\n\nIt is guaranteed that the data has no bugs.\n\nIt is not guaranteed that someone can solve it.\n\nIt is not guaranteed that the code for this problem is very long.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "水の斗牛", "background": "蒟蒻 ${\\rm CYJian}$ 拉着 ${\\rm JerryC}$ 和 ${\\rm Justin}$ 等一众机房巨佬来打斗牛辣！！", "description": "现在一共有 $N$ 个人玩起了斗牛。一共玩了 $T$ 局，每局有三个人参与游戏，每个人的初始分都是 $0$。\n\n本题为了方便，对于斗牛的基本规则做了些许变动，具体规则如下：\n\n### 1.基本规则\n\n每一轮斗牛开始时，每一位玩家都会拿到 $5$ 张牌。\n\n每张牌一定是一个 $2$ 到 $10$ 之间的整数或 `A`（表示 $1$）。\n\n每张牌有一个花色，a 代表黑桃，b 代表红桃，c 代表梅花，d 代表方块。\n\n\n### 2.牌型\n\n五张牌中，除炸弹和无牛牌型以外，都分为两个部分：牛和分。其中牛包括三张点数相同（铁板）或三张点数和为 $10$ 的倍数的牌，分包括剩下的两张牌，一套牌的分即为这两张牌模 $10$ 的余数。\n\n（1）炸弹：四张点数相同的牌。\n\n（2）牛牛：分恰好为 $0$。\n\n（3）牛：分不为 $0$，分和牛数的数值相同。如分是 $5$，则这套牌被称为牛五。\n\n（4）无牛：不存在三张牌，其点数相同或其点数和为 $10$ 的倍数。\n\n### 3.牌型大小关系\n\n炸弹>牛牛>牛九>牛八>……>牛二>牛一>无牛。\n\n双方拥有炸弹时，炸弹点数大的更大；\n\n相同牛数且只有一方有铁板时，有铁板的比没有铁板的大；\n\n相同牛数且双方拥有铁板时，铁板点数大的更大；\n\n相同牛数且双方均没有铁板或双方均无牛时，我们比较双方牌中点数最大的一张牌，点数更大的一方更大；若双方点数最大的一张牌点数相同，则花色更大的一方更大，花色大小为黑桃>红桃>梅花>方块。\n\n### 4.计分\n\n一局牌的底分为 $10$，即每位玩家都会押 $10$ 分。\n\n对于其中的两位玩家，我们在比较完双方的牌型之后，选择牌型更大的一方的牌型来计算得失分数的翻倍。具体如下：\n\n（1）炸弹：底分${}\\times 10$。\n\n（2）牛牛：底分${}\\times 3$。\n\n（3）牛七/牛八/牛九：底分${}\\times 2$。\n\n（4）牛六~牛一：底分。\n\n（5）无牛：底分。\n\n（6）铁板：在计算完牌型得分之后，在牌型得分的基础上${}\\times 2$。注意铁板翻倍不与炸弹同时进行。\n\n我们在计分时，采用两两之间计分的方式，也就是说对于三名玩家 A、B、C，我们先计算 A 和 B 之间的分数得失，再计算 A 和 C 之间的分数得失，最后计算 B 和 C 之间的分数得失。\n\n现在我们假设所有玩家都足够聪明，也就是说，所有玩家都会打出他们手上的牌中最大的牌型。${\\rm CYJian}$ 想知道，在这 $T$ 轮游戏结束之后，每位玩家的得分情况。", "inputFormat": "第一行两个整数 $id,T,N$。其中 $id$ 表示测试点编号，对于部分分可能有一定帮助。其中样例的测试点编号为 $0$。\n\n接下来 $N$ 行，每行一个仅包括大小写字母和数字的长度少于 $11$ 的字符串表示玩家名称。\n\n接下来 $T$ 组，每组数据六行，可分为三个相同的部分：\n\n第一行一个字符串表示玩家名称。\n\n第二行五个字符串表示该玩家手中的手牌。每一个字符串的第一个字符表示花色，其余字符表示牌的大小。", "outputFormat": "共 $N$ 行，每行一个字符串和一个数字，中间用空格隔开。表示一名玩家和他的最终得分。\n\n请按照玩家名称的输入顺序输出。", "hint": "样例一解释：\n\n第一局玩家牌型如下：\n\n${\\rm CYJian}$：炸弹\n\n${\\rm JerryC}$：牛五\n\n${\\rm Justin}$：铁板牛牛\n\n所以 ${\\rm CYJian}$ 加 $200$ 分，${\\rm JerryC}$ 扣 $160$ 分，${\\rm Justin}$ 扣 $40$ 分。\n\n第二局中，所有人都是牛五，但是 ${\\rm CYJian}$ 拥有黑桃五，${\\rm JerryC}$ 拥有红桃五，${\\rm Justin}$ 拥有梅花五，所以 ${\\rm CYJian}$ 加 $20$ 分，${\\rm JerryC}$ 没有变化，${\\rm Justin}$ 扣 $20$ 分。\n\n数据范围：\n\n| 测试点编号 |   $T$    |   $N$   | 特殊性质 |\n| :--------: | :------: | :-----: | :------: |\n|    $1$     |   $0$    |   $3$   |    性质 4    |\n|    $2$     |   $5$   |  $5$   |    性质 4    |\n|  $3$-$4$   |   $5$   |  $5$   |  性质 1   |\n|  $5$-$6$   |   $5$   |  $5$   |  性质 2   |\n|  $7$-$8$   |   $5$   |  $5$   |  性质 3   |\n|  $9$-$10$  |   $5$   |  $5$   |  性质 5   |\n| $11$-$12$  |   $10$    |   $10$   |  性质 5   |\n| $13$-$14$  |   $100$   |  $100$   |  性质 5   |\n| $15$-$16$  |  $1000$   |  $1000$  |  性质 5   |\n| $17$-$18$  |  $10000$  | $10000$  |  性质 5   |\n| $19$-$20$  | $100000$ | $100000$ |  性质 5，1.5s   |\n\n性质 1：保证所有的人拥有炸弹。\n\n性质 2：保证每一手牌花色全部相同。\n\n性质 3：保证每一手牌所有数字不同。\n\n性质 4：保证数据手造。\n\n性质 5：保证数据随机生成。\n\n保证每一局没有重复的牌。\n\n保证每一个人的名字不相同。\n\n保证出题人是 ${\\rm CYJian}$。\n\n保证数据没有锅。\n\n不保证没有人能做出来。\n\n不保证此题代码很长。", "locale": "zh-CN"}}}
{"pid": "P5014", "type": "P", "difficulty": 6, "samples": [["3\n1 3 6\n", "1\n2\n6\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["O2优化", "组合数学", "Catalan 数"], "title": "水の三角(修改版)", "background": "这个三角图真好看。。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3xer0cul.png)\n\n这个是 ${\\rm 4}$ 阶三角图。。", "description": "现在我们定义一个三角图是像上面一样的图。\n\n请求出一个无限大的三角图从 $1$ 号点走到 $u$ 号点的方案数。\n\n有 $T$ 组询问。", "inputFormat": "第一行一个正整数 $T$。\n\n第二行 $T$ 个正整数 $u_i$。", "outputFormat": "$T$ 行，共 $T$ 个正整数，表示答案模 $998244353$ 的结果。", "hint": "${\\rm Subtask 1(10\\ pts)}$:$1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 55$\n\n${\\rm Subtask 2(20\\ pts)}$:$1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 12502500$\n\n${\\rm Subtask 3(30\\ pts)}$:$1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 500000500000 \\qquad u_i=\\frac{x \\times (x + 1)}{2}$\n\n${\\rm Subtask 4(40\\ pts)}$:$1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 500000500000$", "locale": "zh-CN", "translations": {"en": {"title": "Water Triangle (Modified Version)", "background": "This triangular diagram looks really nice.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3xer0cul.png)\n\nThis is a ${\\rm 4}$-order triangular diagram.", "description": "Now we define a triangular diagram as shown above.\n\nPlease find the number of ways to walk from node $1$ to node $u$ in an infinitely large triangular diagram.\n\nThere are $T$ queries.", "inputFormat": "The first line contains a positive integer $T$.\n\nThe second line contains $T$ positive integers $u_i$.", "outputFormat": "Output $T$ lines, each containing a positive integer, which is the answer modulo $998244353$.", "hint": "${\\rm Subtask\\ 1(10\\ pts)}$: $1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 55$.\n\n${\\rm Subtask\\ 2(20\\ pts)}$: $1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 12502500$.\n\n${\\rm Subtask\\ 3(30\\ pts)}$: $1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 500000500000, \\qquad u_i=\\frac{x \\times (x + 1)}{2}$.\n\n${\\rm Subtask\\ 4(40\\ pts)}$: $1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 500000500000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "水の三角(修改版)", "background": "这个三角图真好看。。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3xer0cul.png)\n\n这个是 ${\\rm 4}$ 阶三角图。。", "description": "现在我们定义一个三角图是像上面一样的图。\n\n请求出一个无限大的三角图从 $1$ 号点走到 $u$ 号点的方案数。\n\n有 $T$ 组询问。", "inputFormat": "第一行一个正整数 $T$。\n\n第二行 $T$ 个正整数 $u_i$。", "outputFormat": "$T$ 行，共 $T$ 个正整数，表示答案模 $998244353$ 的结果。", "hint": "${\\rm Subtask 1(10\\ pts)}$:$1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 55$\n\n${\\rm Subtask 2(20\\ pts)}$:$1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 12502500$\n\n${\\rm Subtask 3(30\\ pts)}$:$1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 500000500000 \\qquad u_i=\\frac{x \\times (x + 1)}{2}$\n\n${\\rm Subtask 4(40\\ pts)}$:$1 \\leq T \\leq 100, \\qquad 1 \\leq u_i \\leq 500000500000$", "locale": "zh-CN"}}}
{"pid": "P5015", "type": "P", "difficulty": 1, "samples": [["234 ", "3"], ["Ca 45 ", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "字符串", "2018", "NOIP 普及组"], "title": "[NOIP 2018 普及组] 标题统计", "background": "NOIP2018 普及组 T1", "description": "凯凯刚写了一篇美妙的作文，请问这篇作文的标题中有多少个字符？ 注意：标题中可能包含大、小写英文字母、数字字符、空格和换行符。统计标题字符数时，空格和换行符不计算在内。 ", "inputFormat": "输入文件只有一行，一个字符串 $s$。 ", "outputFormat": "输出文件只有一行，包含一个整数，即作文标题的字符数（不含空格和换行符）。 ", "hint": "**样例 1 说明**   \n\n标题中共有 3 个字符，这 3 个字符都是数字字符。   \n\n**样例 2 说明**\n\n标题中共有 $ 5$ 个字符，包括 $1$ 个大写英文字母， $1$ 个小写英文字母和 $2$ 个数字字符， 还有 $1$ 个空格。由于空格不计入结果中，故标题的有效字符数为 $4$ 个。 \n\n**数据规模与约定**\n\n规定 $|s|$ 表示字符串 $s$ 的长度（即字符串中的字符和空格数）。    \n对于 $40\\%$ 的数据，$1 ≤ |s| ≤ 5$，保证输入为数字字符及行末换行符。   \n对于 $80\\%$ 的数据，$1 ≤ |s| ≤ 5$，输入只可能包含大、小写英文字母、数字字符及行末换行符。   \n对于 $100\\%$ 的数据，$1 ≤ |s| ≤ 5$，输入可能包含大、小写英文字母、数字字符、空格和行末换行符。 ", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2018 Junior] Title Statistics", "background": "NOIP 2018 Junior T1.", "description": "Kaikai has just written a wonderful essay. How many characters are there in the title of this essay? Note: The title may contain uppercase and lowercase English letters, digit characters, spaces, and newline characters. When counting the number of title characters, spaces and newline characters are not included.", "inputFormat": "The input file contains only one line: a string $s$.", "outputFormat": "The output file contains only one line, containing an integer, which is the number of characters in the essay title (excluding spaces and newline characters).", "hint": "**Sample 1 Explanation**\n\nThere are 3 characters in the title, and all 3 characters are digit characters.\n\n**Sample 2 Explanation**\n\nThere are $ 5$ characters in the title, including $1$ uppercase English letter, $1$ lowercase English letter, and $2$ digit characters, plus $1$ space. Since spaces are not counted in the result, the number of valid characters in the title is $4$.\n\n**Constraints**\n\nLet $|s|$ denote the length of the string $s$ (that is, the total number of characters and spaces in the string).  \nFor $40\\%$ of the testdata, $1 \\le |s| \\le 5$, and the input is guaranteed to be digit characters and the end-of-line newline character.  \nFor $80\\%$ of the testdata, $1 \\le |s| \\le 5$, and the input may only contain uppercase and lowercase English letters, digit characters, and the end-of-line newline character.  \nFor $100\\%$ of the testdata, $1 \\le |s| \\le 5$, and the input may contain uppercase and lowercase English letters, digit characters, spaces, and the end-of-line newline character.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2018 普及组] 标题统计", "background": "NOIP2018 普及组 T1", "description": "凯凯刚写了一篇美妙的作文，请问这篇作文的标题中有多少个字符？ 注意：标题中可能包含大、小写英文字母、数字字符、空格和换行符。统计标题字符数时，空格和换行符不计算在内。 ", "inputFormat": "输入文件只有一行，一个字符串 $s$。 ", "outputFormat": "输出文件只有一行，包含一个整数，即作文标题的字符数（不含空格和换行符）。 ", "hint": "**样例 1 说明**   \n\n标题中共有 3 个字符，这 3 个字符都是数字字符。   \n\n**样例 2 说明**\n\n标题中共有 $ 5$ 个字符，包括 $1$ 个大写英文字母， $1$ 个小写英文字母和 $2$ 个数字字符， 还有 $1$ 个空格。由于空格不计入结果中，故标题的有效字符数为 $4$ 个。 \n\n**数据规模与约定**\n\n规定 $|s|$ 表示字符串 $s$ 的长度（即字符串中的字符和空格数）。    \n对于 $40\\%$ 的数据，$1 ≤ |s| ≤ 5$，保证输入为数字字符及行末换行符。   \n对于 $80\\%$ 的数据，$1 ≤ |s| ≤ 5$，输入只可能包含大、小写英文字母、数字字符及行末换行符。   \n对于 $100\\%$ 的数据，$1 ≤ |s| ≤ 5$，输入可能包含大、小写英文字母、数字字符、空格和行末换行符。 ", "locale": "zh-CN"}}}
{"pid": "P5016", "type": "P", "difficulty": 2, "samples": [["6 \n2 3 2 3 2 3 \n4 6 5 2 ", "2"], ["6 \n1 1 1 1 1 16 \n5 4 1 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2018", "NOIP 普及组", "枚举"], "title": "[NOIP 2018 普及组] 龙虎斗", "background": "NOIP2018 普及组 T2", "description": "轩轩和凯凯正在玩一款叫《龙虎斗》的游戏，游戏的棋盘是一条线段，线段上有 $n$ 个兵营（自左至右编号 $1 \\sim n$），相邻编号的兵营之间相隔 $1$ 厘米，即棋盘为长度为 $n-1$ 厘米的线段。$i$ 号兵营里有 $c_i$ 位工兵。下面图 1 为 $n=6$ 的示例： \n\n![](https://cdn.luogu.com.cn/upload/pic/43224.png)    \n\n轩轩在左侧，代表“龙”；凯凯在右侧，代表“虎”。 他们以 $m$ 号兵营作为分界， 靠左的工兵属于龙势力，靠右的工兵属于虎势力，而第 $m$ 号兵营中的工兵很纠结，他们不属于任何一方。    \n\n一个兵营的气势为：该兵营中的工兵数$ \\times $ 该兵营到 $m$ 号兵营的距离；参与游戏 一方的势力定义为：属于这一方所有兵营的气势之和。    \n下面图 2 为 $n = 6,m = 4$ 的示例，其中红色为龙方，黄色为虎方：\n\n![](https://cdn.luogu.com.cn/upload/pic/43225.png)  \n\n游戏过程中，某一刻天降神兵，共有 $s_1$ 位工兵突然出现在了 $p_1$ 号兵营。作为轩轩和凯凯的朋友，你知道如果龙虎双方气势差距太悬殊，轩轩和凯凯就不愿意继续玩下去了。为了让游戏继续，你需要选择一个兵营 $p_2$，并将你手里的 $s_2$ 位工兵全部派往 兵营 $p_2$，使得双方气势差距尽可能小。 \n\n 注意：你手中的工兵落在哪个兵营，就和该兵营中其他工兵有相同的势力归属（如果落在 $m$ 号兵营，则不属于任何势力）。", "inputFormat": "输入文件的第一行包含一个正整数$n$，代表兵营的数量。  \n\n接下来的一行包含 $n$ 个正整数，相邻两数之间以一个空格分隔，第 $i$ 个正整数代 表编号为 $i$ 的兵营中起始时的工兵数量 $c_i$。  \n\n接下来的一行包含四个正整数，相邻两数间以一个空格分隔，分别代表 $m,p_1,s_1,s_2$。", "outputFormat": "输出文件有一行，包含一个正整数，即 $p_2$，表示你选择的兵营编号。如果存在多个编号同时满足最优，取最小的编号。 ", "hint": "**样例 1 说明**   \n\n见问题描述中的图 2。   \n双方以 $m=4$ 号兵营分界，有 $s_1=5$ 位工兵突然出现在 $p_1=6$ 号兵营。 \n龙方的气势为：   \n$$2 \\times (4-1)+3 \\times (4-2)+2 \\times (4-3) = 14$$  \n虎方的气势为：   \n$$2 \\times  (5 - 4) + (3 + 5) \\times (6 - 4) = 18$$  \n当你将手中的 $s_2 = 2$ 位工兵派往 $p_2 = 2$ 号兵营时，龙方的气势变为： \n$$14 + 2 \\times  (4 - 2) = 18$$  \n此时双方气势相等。 \n  \n**样例 2 说明**   \n\n双方以 $m = 5$ 号兵营分界，有 $s_1 = 1$ 位工兵突然出现在 $p_1 = 4$ 号兵营。  \n龙方的气势为：   \n$$1 \\times  (5 - 1) + 1 \\times  (5 - 2) + 1 \\times  (5 - 3) + (1 + 1) \\times  (5 - 4) = 11$$  \n虎方的气势为：   \n$$16 \\times  (6 - 5) = 16$$    \n当你将手中的 $s_2 = 1$ 位工兵派往 $p_2 = 1$ 号兵营时，龙方的气势变为：    \n$$11 + 1 \\times  (5 - 1) = 15$$    \n此时可以使双方气势的差距最小。\n\n**数据规模与约定**    \n\n\n$1 < m < n$，$1 \\le p_1 \\le n$。   \n对于 $20\\%$ 的数据，$n = 3,m = 2, c_i = 1, s_1,s_2 ≤ 100$。    \n另有 $20\\%$ 的数据，$n ≤ 10, p_1 = m, c_i = 1, s_1,s_2 ≤ 100$。  \n对于 $60\\%$ 的数据，$n ≤ 100, c_i = 1, s_1,s_2 ≤ 100$。   \n对于 $80\\%$ 的数据，$n ≤ 100, c_i,s_1,s_2 ≤ 100$。  \n对于 $100\\%$ 的数据，$n≤10^5$,$c_i,s_1,s_2≤10^9$。 ", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2018 Junior] Dragon-Tiger Battle", "background": "NOIP2018 Junior T2.", "description": "Xuanxuan and Kaikai are playing a game called *Dragon-Tiger Battle*. The game board is a line segment with $n$ barracks on it (numbered from left to right as $1 \\sim n$). The distance between two adjacent barracks is $1$ centimeter, so the board is a line segment of length $n-1$ centimeters. Barrack $i$ contains $c_i$ engineers. Figure 1 below shows an example with $n=6$:\n\n![](https://cdn.luogu.com.cn/upload/pic/43224.png)    \n\nXuanxuan is on the left, representing the “Dragon”; Kaikai is on the right, representing the “Tiger”. They take barrack $m$ as the boundary: engineers on the left belong to the Dragon side, engineers on the right belong to the Tiger side, and the engineers in barrack $m$ are undecided and do not belong to either side.\n\nThe momentum of a barrack is defined as: (number of engineers in the barrack) $ \\times $ (distance from the barrack to barrack $m$).  \nThe power of a side is defined as: the sum of the momentum of all barracks belonging to that side.  \nFigure 2 below shows an example with $n = 6, m = 4$, where red is the Dragon side and yellow is the Tiger side:\n\n![](https://cdn.luogu.com.cn/upload/pic/43225.png)  \n\nDuring the game, at some moment, reinforcements arrive from the sky: a total of $s_1$ engineers suddenly appear in barrack $p_1$. As a friend of Xuanxuan and Kaikai, you know that if the difference in power between the Dragon and Tiger becomes too large, they will not want to continue playing. To keep the game going, you need to choose a barrack $p_2$ and send all $s_2$ engineers in your hand to barrack $p_2$, so that the difference in power between the two sides is as small as possible.\n\nNote: The engineers you send will have the same side affiliation as the engineers already in that barrack (if they land in barrack $m$, they do not belong to any side).", "inputFormat": "The first line contains a positive integer $n$, representing the number of barracks.\n\nThe next line contains $n$ positive integers, separated by single spaces. The $i$-th positive integer represents the initial number of engineers $c_i$ in barrack $i$.\n\nThe next line contains four positive integers, separated by single spaces, representing $m, p_1, s_1, s_2$.", "outputFormat": "Output one line containing a positive integer, namely $p_2$, the index of the barrack you choose. If multiple indices achieve the optimal result at the same time, output the smallest index.", "hint": "**Explanation for Sample 1**\n\nSee Figure 2 in the problem description.  \nThe two sides are divided by barrack $m=4$. There are $s_1=5$ engineers that suddenly appear in barrack $p_1=6$.  \nThe Dragon side’s power is:  \n$$2 \\times (4-1)+3 \\times (4-2)+2 \\times (4-3) = 14$$  \nThe Tiger side’s power is:  \n$$2 \\times  (5 - 4) + (3 + 5) \\times (6 - 4) = 18$$  \nWhen you send your $s_2 = 2$ engineers to barrack $p_2 = 2$, the Dragon side’s power becomes:  \n$$14 + 2 \\times  (4 - 2) = 18$$  \nAt this time, the two sides have equal power.\n\n**Explanation for Sample 2**\n\nThe two sides are divided by barrack $m = 5$. There are $s_1 = 1$ engineers that suddenly appear in barrack $p_1 = 4$.  \nThe Dragon side’s power is:  \n$$1 \\times  (5 - 1) + 1 \\times  (5 - 2) + 1 \\times  (5 - 3) + (1 + 1) \\times  (5 - 4) = 11$$  \nThe Tiger side’s power is:  \n$$16 \\times  (6 - 5) = 16$$    \nWhen you send your $s_2 = 1$ engineers to barrack $p_2 = 1$, the Dragon side’s power becomes:  \n$$11 + 1 \\times  (5 - 1) = 15$$    \nAt this time, the difference in power between the two sides can be minimized.\n\n**Constraints**\n\n$1 < m < n$, $1 \\le p_1 \\le n$.  \nFor $20\\%$ of the testdata, $n = 3, m = 2, c_i = 1, s_1, s_2 ≤ 100$.  \nAnother $20\\%$ of the testdata has $n ≤ 10, p_1 = m, c_i = 1, s_1, s_2 ≤ 100$.  \nFor $60\\%$ of the testdata, $n ≤ 100, c_i = 1, s_1, s_2 ≤ 100$.  \nFor $80\\%$ of the testdata, $n ≤ 100, c_i, s_1, s_2 ≤ 100$.  \nFor $100\\%$ of the testdata, $n ≤ 10^5$, $c_i, s_1, s_2 ≤ 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2018 普及组] 龙虎斗", "background": "NOIP2018 普及组 T2", "description": "轩轩和凯凯正在玩一款叫《龙虎斗》的游戏，游戏的棋盘是一条线段，线段上有 $n$ 个兵营（自左至右编号 $1 \\sim n$），相邻编号的兵营之间相隔 $1$ 厘米，即棋盘为长度为 $n-1$ 厘米的线段。$i$ 号兵营里有 $c_i$ 位工兵。下面图 1 为 $n=6$ 的示例： \n\n![](https://cdn.luogu.com.cn/upload/pic/43224.png)    \n\n轩轩在左侧，代表“龙”；凯凯在右侧，代表“虎”。 他们以 $m$ 号兵营作为分界， 靠左的工兵属于龙势力，靠右的工兵属于虎势力，而第 $m$ 号兵营中的工兵很纠结，他们不属于任何一方。    \n\n一个兵营的气势为：该兵营中的工兵数$ \\times $ 该兵营到 $m$ 号兵营的距离；参与游戏 一方的势力定义为：属于这一方所有兵营的气势之和。    \n下面图 2 为 $n = 6,m = 4$ 的示例，其中红色为龙方，黄色为虎方：\n\n![](https://cdn.luogu.com.cn/upload/pic/43225.png)  \n\n游戏过程中，某一刻天降神兵，共有 $s_1$ 位工兵突然出现在了 $p_1$ 号兵营。作为轩轩和凯凯的朋友，你知道如果龙虎双方气势差距太悬殊，轩轩和凯凯就不愿意继续玩下去了。为了让游戏继续，你需要选择一个兵营 $p_2$，并将你手里的 $s_2$ 位工兵全部派往 兵营 $p_2$，使得双方气势差距尽可能小。 \n\n 注意：你手中的工兵落在哪个兵营，就和该兵营中其他工兵有相同的势力归属（如果落在 $m$ 号兵营，则不属于任何势力）。", "inputFormat": "输入文件的第一行包含一个正整数$n$，代表兵营的数量。  \n\n接下来的一行包含 $n$ 个正整数，相邻两数之间以一个空格分隔，第 $i$ 个正整数代 表编号为 $i$ 的兵营中起始时的工兵数量 $c_i$。  \n\n接下来的一行包含四个正整数，相邻两数间以一个空格分隔，分别代表 $m,p_1,s_1,s_2$。", "outputFormat": "输出文件有一行，包含一个正整数，即 $p_2$，表示你选择的兵营编号。如果存在多个编号同时满足最优，取最小的编号。 ", "hint": "**样例 1 说明**   \n\n见问题描述中的图 2。   \n双方以 $m=4$ 号兵营分界，有 $s_1=5$ 位工兵突然出现在 $p_1=6$ 号兵营。 \n龙方的气势为：   \n$$2 \\times (4-1)+3 \\times (4-2)+2 \\times (4-3) = 14$$  \n虎方的气势为：   \n$$2 \\times  (5 - 4) + (3 + 5) \\times (6 - 4) = 18$$  \n当你将手中的 $s_2 = 2$ 位工兵派往 $p_2 = 2$ 号兵营时，龙方的气势变为： \n$$14 + 2 \\times  (4 - 2) = 18$$  \n此时双方气势相等。 \n  \n**样例 2 说明**   \n\n双方以 $m = 5$ 号兵营分界，有 $s_1 = 1$ 位工兵突然出现在 $p_1 = 4$ 号兵营。  \n龙方的气势为：   \n$$1 \\times  (5 - 1) + 1 \\times  (5 - 2) + 1 \\times  (5 - 3) + (1 + 1) \\times  (5 - 4) = 11$$  \n虎方的气势为：   \n$$16 \\times  (6 - 5) = 16$$    \n当你将手中的 $s_2 = 1$ 位工兵派往 $p_2 = 1$ 号兵营时，龙方的气势变为：    \n$$11 + 1 \\times  (5 - 1) = 15$$    \n此时可以使双方气势的差距最小。\n\n**数据规模与约定**    \n\n\n$1 < m < n$，$1 \\le p_1 \\le n$。   \n对于 $20\\%$ 的数据，$n = 3,m = 2, c_i = 1, s_1,s_2 ≤ 100$。    \n另有 $20\\%$ 的数据，$n ≤ 10, p_1 = m, c_i = 1, s_1,s_2 ≤ 100$。  \n对于 $60\\%$ 的数据，$n ≤ 100, c_i = 1, s_1,s_2 ≤ 100$。   \n对于 $80\\%$ 的数据，$n ≤ 100, c_i,s_1,s_2 ≤ 100$。  \n对于 $100\\%$ 的数据，$n≤10^5$,$c_i,s_1,s_2≤10^9$。 ", "locale": "zh-CN"}}}
{"pid": "P5017", "type": "P", "difficulty": 5, "samples": [["5 1 \n3 4 4 3 5 ", "0"], ["5 5 \n11 13 1 5 5 ", "4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2018", "NOIP 普及组", "斜率优化", "前缀和"], "title": "[NOIP 2018 普及组] 摆渡车", "background": "NOIP2018 普及组 T3", "description": "有 $n$ 名同学要乘坐摆渡车从人大附中前往人民大学，第 $i$ 位同学在第 $t_i$ 分钟去 等车。只有一辆摆渡车在工作，但摆渡车容量可以视为无限大。摆渡车从人大附中出发、 把车上的同学送到人民大学、再回到人大附中（去接其他同学），这样往返一趟总共花费 $m$ 分钟（同学上下车时间忽略不计）。摆渡车要将所有同学都送到人民大学。  \n\n凯凯很好奇，如果他能任意安排摆渡车出发的时间，那么这些同学的等车时间之和最小为多少呢？    \n\n注意：摆渡车回到人大附中后可以即刻出发。", "inputFormat": "第一行包含两个正整数 $n, m$，以一个空格分开，分别代表等车人数和摆渡车往返一趟的时间。    \n第二行包含 $n$ 个正整数，相邻两数之间以一个空格分隔，第 $i$ 个非负整数 $t_i$ 代表第 $i$ 个同学到达车站的时刻。 ", "outputFormat": "输出一行，一个整数，表示所有同学等车时间之和的最小值（单位：分钟）。 ", "hint": "**样例 1 说明**    \n\n同学 $1$ 和同学 $4$ 在第 $3$ 分钟开始等车，等待 $0$ 分钟，在第 $3$ 分钟乘坐摆渡车出发。摆渡车在第 $4$ 分钟回到人大附中。   \n同学 $2$ 和同学 $3$ 在第 $4$ 分钟开始等车，等待 $0$ 分钟，在第 $4$ 分钟乘坐摆渡车 出发。摆渡车在第 $5$ 分钟回到人大附中。   \n同学 $5$ 在第 $5$ 分钟开始等车，等待 $0$ 分钟，在第 $5$ 分钟乘坐摆渡车出发。自此 所有同学都被送到人民大学。总等待时间为 $0$。\n\n**样例 2 说明**  \n\n同学 $3$ 在第 $1$ 分钟开始等车，等待 $0$ 分钟，在第 $1$ 分钟乘坐摆渡车出发。摆渡 车在第 $6$ 分钟回到人大附中。   \n同学 $4$ 和同学 $5$ 在第 $5$ 分钟开始等车，等待 $1$ 分钟，在第 $6$ 分钟乘坐摆渡车 出发。摆渡车在第 $11$ 分钟回到人大附中。   \n同学 $1$ 在第 $11$ 分钟开始等车，等待 $2$ 分钟；同学 $2$ 在第 $13$ 分钟开始等车， 等待 $0$ 分钟。他/她们在第 $13$ 分钟乘坐摆渡车出发。自此所有同学都被送到人民大学。 总等待时间为 $4$。  \n可以证明，没有总等待时间小于 $4$ 的方案。 \n\n**数据规模与约定**\n\n对于 $10\\%$ 的数据，$n ≤ 10$，$m = 1$，$0 ≤ t_i ≤ 100$。   \n对于 $30\\%$ 的数据，$n ≤ 20$，$m ≤ 2$，$0 ≤ t_i ≤ 100$。  \n对于 $50\\%$ 的数据，$n ≤ 500$，$m ≤ 100$，$0 ≤ t_i ≤ 10^4$。  \n另有 $20\\%$ 的数据，$n ≤ 500$，$m ≤ 10$，$0 ≤ t_i ≤ 4 \\times  10^6$。  \n对于 $100\\%$ 的数据，$n ≤ 500$，$m ≤ 100$，$0 ≤ t_i ≤ 4 \\times 10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2018 Junior] Ferry Shuttle", "background": "NOIP 2018 Junior Group T3.", "description": "There are $n$ students who need to take a ferry shuttle from RDFZ (Renmin University Affiliated High School) to Renmin University. The $i$-th student goes to wait for the shuttle at minute $t_i$. Only one shuttle is in service, but its capacity can be considered unlimited. The shuttle departs from RDFZ, takes the students on board to Renmin University, and then returns to RDFZ (to pick up other students). One round trip takes a total of $m$ minutes (ignore the time for getting on and off). The shuttle must deliver all students to Renmin University.\n\nKaikai is curious: if he can arrange the shuttle’s departure times arbitrarily, what is the minimum possible sum of all students’ waiting times?\n\nNote: after the shuttle returns to RDFZ, it can depart again immediately.", "inputFormat": "The first line contains two positive integers $n, m$, separated by a space, representing the number of waiting students and the time for one round trip of the shuttle.\n\nThe second line contains $n$ positive integers, separated by spaces. The $i$-th non-negative integer $t_i$ represents the time when the $i$-th student arrives at the station.", "outputFormat": "Output one line with one integer, representing the minimum possible sum of all students’ waiting times (in minutes).", "hint": "**Explanation of Sample 1**\n\nStudents $1$ and $4$ start waiting at minute $3$, wait $0$ minutes, and depart on the shuttle at minute $3$. The shuttle returns to RDFZ at minute $4$.\n\nStudents $2$ and $3$ start waiting at minute $4$, wait $0$ minutes, and depart on the shuttle at minute $4$. The shuttle returns to RDFZ at minute $5$.\n\nStudent $5$ starts waiting at minute $5$, waits $0$ minutes, and departs on the shuttle at minute $5$. From then on, all students have been delivered to Renmin University. The total waiting time is $0$.\n\n**Explanation of Sample 2**\n\nStudent $3$ starts waiting at minute $1$, waits $0$ minutes, and departs on the shuttle at minute $1$. The shuttle returns to RDFZ at minute $6$.\n\nStudents $4$ and $5$ start waiting at minute $5$, wait $1$ minute, and depart on the shuttle at minute $6$. The shuttle returns to RDFZ at minute $11$.\n\nStudent $1$ starts waiting at minute $11$ and waits $2$ minutes; student $2$ starts waiting at minute $13$ and waits $0$ minutes. They depart on the shuttle at minute $13$. From then on, all students have been delivered to Renmin University. The total waiting time is $4$.\n\nIt can be proven that there is no plan with total waiting time less than $4$.\n\n**Constraints**\n\nFor $10\\%$ of the testdata, $n \\le 10$, $m = 1$, $0 \\le t_i \\le 100$.\n\nFor $30\\%$ of the testdata, $n \\le 20$, $m \\le 2$, $0 \\le t_i \\le 100$.\n\nFor $50\\%$ of the testdata, $n \\le 500$, $m \\le 100$, $0 \\le t_i \\le 10^4$.\n\nFor another $20\\%$ of the testdata, $n \\le 500$, $m \\le 10$, $0 \\le t_i \\le 4 \\times  10^6$.\n\nFor $100\\%$ of the testdata, $n \\le 500$, $m \\le 100$, $0 \\le t_i \\le 4 \\times 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2018 普及组] 摆渡车", "background": "NOIP2018 普及组 T3", "description": "有 $n$ 名同学要乘坐摆渡车从人大附中前往人民大学，第 $i$ 位同学在第 $t_i$ 分钟去 等车。只有一辆摆渡车在工作，但摆渡车容量可以视为无限大。摆渡车从人大附中出发、 把车上的同学送到人民大学、再回到人大附中（去接其他同学），这样往返一趟总共花费 $m$ 分钟（同学上下车时间忽略不计）。摆渡车要将所有同学都送到人民大学。  \n\n凯凯很好奇，如果他能任意安排摆渡车出发的时间，那么这些同学的等车时间之和最小为多少呢？    \n\n注意：摆渡车回到人大附中后可以即刻出发。", "inputFormat": "第一行包含两个正整数 $n, m$，以一个空格分开，分别代表等车人数和摆渡车往返一趟的时间。    \n第二行包含 $n$ 个正整数，相邻两数之间以一个空格分隔，第 $i$ 个非负整数 $t_i$ 代表第 $i$ 个同学到达车站的时刻。 ", "outputFormat": "输出一行，一个整数，表示所有同学等车时间之和的最小值（单位：分钟）。 ", "hint": "**样例 1 说明**    \n\n同学 $1$ 和同学 $4$ 在第 $3$ 分钟开始等车，等待 $0$ 分钟，在第 $3$ 分钟乘坐摆渡车出发。摆渡车在第 $4$ 分钟回到人大附中。   \n同学 $2$ 和同学 $3$ 在第 $4$ 分钟开始等车，等待 $0$ 分钟，在第 $4$ 分钟乘坐摆渡车 出发。摆渡车在第 $5$ 分钟回到人大附中。   \n同学 $5$ 在第 $5$ 分钟开始等车，等待 $0$ 分钟，在第 $5$ 分钟乘坐摆渡车出发。自此 所有同学都被送到人民大学。总等待时间为 $0$。\n\n**样例 2 说明**  \n\n同学 $3$ 在第 $1$ 分钟开始等车，等待 $0$ 分钟，在第 $1$ 分钟乘坐摆渡车出发。摆渡 车在第 $6$ 分钟回到人大附中。   \n同学 $4$ 和同学 $5$ 在第 $5$ 分钟开始等车，等待 $1$ 分钟，在第 $6$ 分钟乘坐摆渡车 出发。摆渡车在第 $11$ 分钟回到人大附中。   \n同学 $1$ 在第 $11$ 分钟开始等车，等待 $2$ 分钟；同学 $2$ 在第 $13$ 分钟开始等车， 等待 $0$ 分钟。他/她们在第 $13$ 分钟乘坐摆渡车出发。自此所有同学都被送到人民大学。 总等待时间为 $4$。  \n可以证明，没有总等待时间小于 $4$ 的方案。 \n\n**数据规模与约定**\n\n对于 $10\\%$ 的数据，$n ≤ 10$，$m = 1$，$0 ≤ t_i ≤ 100$。   \n对于 $30\\%$ 的数据，$n ≤ 20$，$m ≤ 2$，$0 ≤ t_i ≤ 100$。  \n对于 $50\\%$ 的数据，$n ≤ 500$，$m ≤ 100$，$0 ≤ t_i ≤ 10^4$。  \n另有 $20\\%$ 的数据，$n ≤ 500$，$m ≤ 10$，$0 ≤ t_i ≤ 4 \\times  10^6$。  \n对于 $100\\%$ 的数据，$n ≤ 500$，$m ≤ 100$，$0 ≤ t_i ≤ 4 \\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P5018", "type": "P", "difficulty": 4, "samples": [["2 \n1 3 \n2 -1 \n-1 -1 \n", "1"], ["10 \n2 2 5 5 5 5 4 4 2 3 \n9 10 \n-1 -1 \n-1 -1 \n-1 -1 \n-1 -1 \n-1 2 \n3 4 \n5 6 \n-1 -1 \n7 8", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["树形数据结构", "2018", "NOIP 普及组", "哈希 hashing"], "title": "[NOIP 2018 普及组] 对称二叉树", "background": "NOIP2018 普及组 T4", "description": "一棵有点权的有根树如果满足以下条件，则被轩轩称为对称二叉树： \n\n1.  二叉树； \n2.  将这棵树所有节点的左右子树交换，新树和原树对应位置的结构相同且点权相等。   \n\n下图中节点内的数字为权值，节点外的 $id$ 表示节点编号。  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nkln7z1l.png)\n\n现在给出一棵二叉树，希望你找出它的一棵子树，该子树为对称二叉树，且节点数最多。请输出这棵子树的节点数。   \n\n注意：只有树根的树也是对称二叉树。本题中约定，以节点 $T$ 为子树根的一棵“子 树”指的是：节点$T$ 和它的全部后代节点构成的二叉树。 ", "inputFormat": "第一行一个正整数 $n$，表示给定的树的节点的数目，规定节点编号 $1 \\sim n$，其中节点 $1$ 是树根。 \n\n第二行 $n$ 个正整数，用一个空格分隔，第 $i$ 个正整数 $v_i$ 代表节点 $i$ 的权值。 \n\n接下来 $n$ 行，每行两个正整数 $l_i, r_i$，分别表示节点 $i$ 的左右孩子的编号。如果不存在左 / 右孩子，则以 $-1$ 表示。两个数之间用一个空格隔开。 ", "outputFormat": "输出文件共一行，包含一个整数，表示给定的树的最大对称二叉子树的节点数。 ", "hint": "**样例 1 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4lfen5aa.png)    \n最大的对称二叉子树为以节点 $2$ 为树根的子树，节点数为 $1$。   \n\n**样例 2 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vhzzc587.png)\n\n最大的对称二叉子树为以节点 $7$ 为树根的子树，节点数为 $3$。 \n\n**数据规模与约定**\n\n共 $25$ 个测试点。    \n\n$v_i ≤ 1000$。 \n\n- 测试点 $1 \\sim 3, n ≤ 10$，保证根结点的左子树的所有节点都没有右孩子，根结点的右 子树的所有节点都没有左孩子。 \n- 测试点 $4 \\sim 8, n ≤ 10$。\n- 测试点 $9 \\sim 12, n ≤ 10^5$，保证输入是一棵“满二叉树” 。 \n- 测试点 $13 \\sim 16, n ≤ 10^5$，保证输入是一棵“完全二叉树”。\n- 测试点 $17 \\sim 20, n ≤ 10^5$，保证输入的树的点权均为 $1$。\n- 测试点 $21 \\sim 25, n ≤ 10^6$。\n\n本题约定： \n\n层次：节点的层次从根开始定义起，根为第一层，根的孩子为第二层。树中任一节 点的层次等于其父亲节点的层次加 $1$。 \n \n 树的深度：树中节点的最大层次称为树的深度。 \n \n 满二叉树：设二叉树的深度为 $h$，且二叉树有 $2^h-1$ 个节点，这就是满二叉树。  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8tof1fxx.png)\n\n完全二叉树：设二叉树的深度为 $h$，除第 $h$ 层外，其它各层的结点数都达到最大 个数，第 $h$ 层所有的结点都连续集中在最左边，这就是完全二叉树。  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ibo7js1f.png)", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2018 Junior] Symmetric Binary Tree", "background": "NOIP 2018 Junior Group T4.", "description": "A rooted tree with node weights is called a symmetric binary tree by Xuanxuan if it satisfies the following conditions:\n\n1. It is a binary tree.\n2. If we swap the left and right subtrees of every node in the tree, then in the new tree and the original tree, the structures at corresponding positions are the same and the node weights are equal.\n\nIn the figure below, the number inside each node is the weight, and the $id$ outside each node indicates the node index.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nkln7z1l.png)\n\nNow you are given a binary tree. You need to find a subtree that is a symmetric binary tree and has the maximum number of nodes. Output the number of nodes in that subtree.\n\nNote: A tree with only the root is also a symmetric binary tree. In this problem, a “subtree” rooted at node $T$ means the binary tree formed by node $T$ and all of its descendants.", "inputFormat": "The first line contains a positive integer $n$, representing the number of nodes in the given tree. The node indices are $1 \\sim n$, and node $1$ is the root.\n\nThe second line contains $n$ positive integers separated by spaces. The $i$-th positive integer $v_i$ represents the weight of node $i$.\n\nThe next $n$ lines each contain two integers $l_i, r_i$, representing the indices of the left and right children of node $i$, respectively. If the left/right child does not exist, it is represented by $-1$. The two numbers are separated by a space.", "outputFormat": "Output one line containing an integer, representing the maximum number of nodes among all symmetric binary subtrees of the given tree.", "hint": "**Sample 1 Explanation**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4lfen5aa.png)  \nThe largest symmetric binary subtree is the subtree rooted at node $2$, and the number of nodes is $1$.\n\n**Sample 2 Explanation**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vhzzc587.png)\n\nThe largest symmetric binary subtree is the subtree rooted at node $7$, and the number of nodes is $3$.\n\n**Constraints**\n\nThere are $25$ test points in total.\n\n$v_i \\le 1000$.\n\n- Test points $1 \\sim 3$, $n \\le 10$. It is guaranteed that all nodes in the left subtree of the root have no right child, and all nodes in the right subtree of the root have no left child.\n- Test points $4 \\sim 8$, $n \\le 10$.\n- Test points $9 \\sim 12$, $n \\le 10^5$. It is guaranteed that the input is a “full binary tree”.\n- Test points $13 \\sim 16$, $n \\le 10^5$. It is guaranteed that the input is a “complete binary tree”.\n- Test points $17 \\sim 20$, $n \\le 10^5$. It is guaranteed that all node weights in the input tree are $1$.\n- Test points $21 \\sim 25$, $n \\le 10^6$.\n\nIn this problem, the following definitions apply:\n\nLevel: The level of nodes starts from the root. The root is on level 1, and the children of the root are on level 2. The level of any node in the tree equals the level of its parent node plus $1$.\n\nDepth of a tree: The maximum level of nodes in the tree is called the depth of the tree.\n\nFull binary tree: Suppose the depth of a binary tree is $h$, and the binary tree has $2^h - 1$ nodes. Then it is a full binary tree.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8tof1fxx.png)\n\nComplete binary tree: Suppose the depth of a binary tree is $h$. Except for level $h$, the number of nodes on all other levels reaches the maximum. All nodes on level $h$ are continuously packed to the far left. Then it is a complete binary tree.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ibo7js1f.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2018 普及组] 对称二叉树", "background": "NOIP2018 普及组 T4", "description": "一棵有点权的有根树如果满足以下条件，则被轩轩称为对称二叉树： \n\n1.  二叉树； \n2.  将这棵树所有节点的左右子树交换，新树和原树对应位置的结构相同且点权相等。   \n\n下图中节点内的数字为权值，节点外的 $id$ 表示节点编号。  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nkln7z1l.png)\n\n现在给出一棵二叉树，希望你找出它的一棵子树，该子树为对称二叉树，且节点数最多。请输出这棵子树的节点数。   \n\n注意：只有树根的树也是对称二叉树。本题中约定，以节点 $T$ 为子树根的一棵“子 树”指的是：节点$T$ 和它的全部后代节点构成的二叉树。 ", "inputFormat": "第一行一个正整数 $n$，表示给定的树的节点的数目，规定节点编号 $1 \\sim n$，其中节点 $1$ 是树根。 \n\n第二行 $n$ 个正整数，用一个空格分隔，第 $i$ 个正整数 $v_i$ 代表节点 $i$ 的权值。 \n\n接下来 $n$ 行，每行两个正整数 $l_i, r_i$，分别表示节点 $i$ 的左右孩子的编号。如果不存在左 / 右孩子，则以 $-1$ 表示。两个数之间用一个空格隔开。 ", "outputFormat": "输出文件共一行，包含一个整数，表示给定的树的最大对称二叉子树的节点数。 ", "hint": "**样例 1 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4lfen5aa.png)    \n最大的对称二叉子树为以节点 $2$ 为树根的子树，节点数为 $1$。   \n\n**样例 2 解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vhzzc587.png)\n\n最大的对称二叉子树为以节点 $7$ 为树根的子树，节点数为 $3$。 \n\n**数据规模与约定**\n\n共 $25$ 个测试点。    \n\n$v_i ≤ 1000$。 \n\n- 测试点 $1 \\sim 3, n ≤ 10$，保证根结点的左子树的所有节点都没有右孩子，根结点的右 子树的所有节点都没有左孩子。 \n- 测试点 $4 \\sim 8, n ≤ 10$。\n- 测试点 $9 \\sim 12, n ≤ 10^5$，保证输入是一棵“满二叉树” 。 \n- 测试点 $13 \\sim 16, n ≤ 10^5$，保证输入是一棵“完全二叉树”。\n- 测试点 $17 \\sim 20, n ≤ 10^5$，保证输入的树的点权均为 $1$。\n- 测试点 $21 \\sim 25, n ≤ 10^6$。\n\n本题约定： \n\n层次：节点的层次从根开始定义起，根为第一层，根的孩子为第二层。树中任一节 点的层次等于其父亲节点的层次加 $1$。 \n \n 树的深度：树中节点的最大层次称为树的深度。 \n \n 满二叉树：设二叉树的深度为 $h$，且二叉树有 $2^h-1$ 个节点，这就是满二叉树。  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8tof1fxx.png)\n\n完全二叉树：设二叉树的深度为 $h$，除第 $h$ 层外，其它各层的结点数都达到最大 个数，第 $h$ 层所有的结点都连续集中在最左边，这就是完全二叉树。  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ibo7js1f.png)", "locale": "zh-CN"}}}
{"pid": "P5019", "type": "P", "difficulty": 3, "samples": [["6   \n4 3 2 5 3 5 \n", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2018", "NOIP 提高组", "差分"], "title": "[NOIP 2018 提高组] 铺设道路", "background": "NOIP2018 提高组 D1T1", "description": "春春是一名道路工程师，负责铺设一条长度为 $n$ 的道路。 \n\n铺设道路的主要工作是填平下陷的地表。整段道路可以看作是 $n$ 块首尾相连的区域，一开始，第 $i$ 块区域下陷的深度为 $d_i$ 。 \n\n春春每天可以选择一段连续区间 $[L,R]$ ，填充这段区间中的每块区域，让其下陷深度减少 $1$。在选择区间时，需要保证，区间内的每块区域在填充前下陷深度均不为 $0$ 。 \n\n春春希望你能帮他设计一种方案，可以在最短的时间内将整段道路的下陷深度都变为 $0$ 。 ", "inputFormat": "输入文件包含两行，第一行包含一个整数 $n$，表示道路的长度。 第二行包含 $n$ 个整数，相邻两数间用一个空格隔开，第 $i$ 个整数为 $d_i$ 。 ", "outputFormat": "输出文件仅包含一个整数，即最少需要多少天才能完成任务。 ", "hint": "【样例解释】\n\n一种可行的最佳方案是，依次选择： \n$[1,6]$、$[1,6]$、$[1,2]$、$[1,1]$、$[4,6]$、$[4,4]$、$[4,4]$、$[6,6]$、$[6,6]$。   \n\n【数据规模与约定】\n\n对于 $30\\%$ 的数据，$1 ≤ n ≤ 10$ ；    \n对于 $70\\%$ 的数据，$1 ≤ n ≤ 1000$ ；     \n对于 $100\\%$ 的数据，$1 ≤ n ≤ 100000 , 0 ≤ d_i ≤ 10000$ 。   ", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2018 Senior] Road Paving.", "background": "NOIP 2018 Senior D1T1.", "description": "Chunchun is a road engineer responsible for paving a road of length $n$.\n\nThe main task of paving is to fill the sunken ground surface. The whole road can be seen as $n$ consecutive segments connected end to end. Initially, the sinking depth of the $i$-th segment is $d_i$.\n\nEach day, Chunchun can choose a continuous interval $[L,R]$ and fill every segment in this interval, reducing its sinking depth by $1$. When choosing an interval, it must be guaranteed that, before filling, the sinking depth of every segment in the interval is not $0$.\n\nChunchun wants you to help design a plan that turns the sinking depths of the entire road into $0$ in the shortest time.", "inputFormat": "The input file contains two lines. The first line contains an integer $n$, representing the length of the road. The second line contains $n$ integers separated by a single space; the $i$-th integer is $d_i$.", "outputFormat": "The output file contains only one integer, which is the minimum number of days needed to complete the task.", "hint": "【Sample Explanation】\n\nOne possible optimal plan is to choose, in order:\n$[1,6]$, $[1,6]$, $[1,2]$, $[1,1]$, $[4,6]$, $[4,4]$, $[4,4]$, $[6,6]$, $[6,6]$.\n\n【Constraints】\n\nFor $30\\%$ of the testdata, $1 \\le n \\le 10$.\nFor $70\\%$ of the testdata, $1 \\le n \\le 1000$.\nFor $100\\%$ of the testdata, $1 \\le n \\le 100000$, $0 \\le d_i \\le 10000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2018 提高组] 铺设道路", "background": "NOIP2018 提高组 D1T1", "description": "春春是一名道路工程师，负责铺设一条长度为 $n$ 的道路。 \n\n铺设道路的主要工作是填平下陷的地表。整段道路可以看作是 $n$ 块首尾相连的区域，一开始，第 $i$ 块区域下陷的深度为 $d_i$ 。 \n\n春春每天可以选择一段连续区间 $[L,R]$ ，填充这段区间中的每块区域，让其下陷深度减少 $1$。在选择区间时，需要保证，区间内的每块区域在填充前下陷深度均不为 $0$ 。 \n\n春春希望你能帮他设计一种方案，可以在最短的时间内将整段道路的下陷深度都变为 $0$ 。 ", "inputFormat": "输入文件包含两行，第一行包含一个整数 $n$，表示道路的长度。 第二行包含 $n$ 个整数，相邻两数间用一个空格隔开，第 $i$ 个整数为 $d_i$ 。 ", "outputFormat": "输出文件仅包含一个整数，即最少需要多少天才能完成任务。 ", "hint": "【样例解释】\n\n一种可行的最佳方案是，依次选择： \n$[1,6]$、$[1,6]$、$[1,2]$、$[1,1]$、$[4,6]$、$[4,4]$、$[4,4]$、$[6,6]$、$[6,6]$。   \n\n【数据规模与约定】\n\n对于 $30\\%$ 的数据，$1 ≤ n ≤ 10$ ；    \n对于 $70\\%$ 的数据，$1 ≤ n ≤ 1000$ ；     \n对于 $100\\%$ 的数据，$1 ≤ n ≤ 100000 , 0 ≤ d_i ≤ 10000$ 。   ", "locale": "zh-CN"}}}
{"pid": "P5020", "type": "P", "difficulty": 4, "samples": [["2\n4\n3 19 10 6\n5\n11 29 13 19 17", "2\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "贪心", "2018", "NOIP 提高组", "背包 DP"], "title": "[NOIP 2018 提高组] 货币系统", "background": "NOIP2018 提高组 D1T2", "description": "在网友的国度中共有 $n$ 种不同面额的货币，第 $i$ 种货币的面额为 $a[i]$，你可以假设每一种货币都有无穷多张。为了方便，我们把货币种数为 $n$、面额数组为 $a[1..n]$ 的货币系统记作 $(n,a)$。 \n\n在一个完善的货币系统中，每一个非负整数的金额 $x$ 都应该可以被表示出，即对每一个非负整数 $x$，都存在 $n$ 个非负整数 $t[i]$ 满足 $a[i] \\times t[i]$ 的和为 $x$。然而， 在网友的国度中，货币系统可能是不完善的，即可能存在金额 $x$ 不能被该货币系统表示出。例如在货币系统 $n=3$, $a=[2,5,9]$ 中，金额 $1,3$ 就无法被表示出来。 \n\n两个货币系统 $(n,a)$ 和 $(m,b)$ 是等价的，当且仅当对于任意非负整数 $x$，它要么均可以被两个货币系统表出，要么不能被其中任何一个表出。 \n\n现在网友们打算简化一下货币系统。他们希望找到一个货币系统 $(m,b)$，满足 $(m,b)$ 与原来的货币系统 $(n,a)$ 等价，且 $m$ 尽可能的小。他们希望你来协助完成这个艰巨的任务：找到最小的 $m$。 ", "inputFormat": "输入文件的第一行包含一个整数 $T$，表示数据的组数。\n\n接下来按照如下格式分别给出 $T$ 组数据。 每组数据的第一行包含一个正整数 $n$。接下来一行包含 $n$ 个由空格隔开的正整数 $a[i]$。", "outputFormat": "输出文件共有 $T$ 行，对于每组数据，输出一行一个正整数，表示所有与 $(n,a)$ 等价的货币系统 $(m,b)$ 中，最小的 $m$。", "hint": "在第一组数据中，货币系统 $(2, [3,10])$ 和给出的货币系统 $(n, a)$ 等价，并可以验证不存在 $m < 2$ 的等价的货币系统，因此答案为 $2$。 在第二组数据中，可以验证不存在 $m < n$ 的等价的货币系统，因此答案为 $5$。 \n\n【数据范围与约定】\n\n![](https://cdn.luogu.com.cn/upload/pic/43160.png)  \n\n对于 $100\\%$ 的数据，满足 $1 ≤ T ≤ 20, n,a[i] ≥ 1$。 ", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2018 Senior] Currency System", "background": "NOIP 2018 Senior D1T2.", "description": "In the netizens’ kingdom, there are $n$ different denominations of currency. The denomination of the $i$-th currency is $a[i]$. You may assume that there are infinitely many bills of each denomination. For convenience, we denote the currency system with $n$ types of currency and denomination array $a[1..n]$ as $(n,a)$.\n\nIn a perfect currency system, every non-negative integer amount $x$ should be representable. That is, for every non-negative integer $x$, there exist $n$ non-negative integers $t[i]$ such that the sum of $a[i] \\times t[i]$ equals $x$. However, in the netizens’ kingdom, the currency system may be imperfect, meaning there may exist an amount $x$ that cannot be represented by the system. For example, in the currency system $n=3$, $a=[2,5,9]$, the amounts $1,3$ cannot be represented.\n\nTwo currency systems $(n,a)$ and $(m,b)$ are equivalent if and only if, for any non-negative integer $x$, either $x$ can be represented by both systems, or $x$ cannot be represented by either of them.\n\nNow the netizens plan to simplify the currency system. They want to find a currency system $(m,b)$ such that $(m,b)$ is equivalent to the original currency system $(n,a)$, and $m$ is as small as possible. They hope you can help complete this difficult task: find the minimum $m$.", "inputFormat": "The first line of the input file contains an integer $T$, the number of test cases.\n\nThen $T$ test cases are given in the following format. The first line of each test case contains a positive integer $n$. The next line contains $n$ positive integers $a[i]$ separated by spaces.", "outputFormat": "The output file contains $T$ lines. For each test case, output one positive integer per line, representing the minimum $m$ among all currency systems $(m,b)$ that are equivalent to $(n,a)$.", "hint": "In the first test case, the currency system $(2, [3,10])$ is equivalent to the given currency system $(n, a)$. It can be verified that there is no equivalent currency system with $m < 2$, so the answer is $2$. In the second test case, it can be verified that there is no equivalent currency system with $m < n$, so the answer is $5$.\n\n【Constraints】\n\n![](https://cdn.luogu.com.cn/upload/pic/43160.png)\n\nFor $100\\%$ of the testdata, $1 \\le T \\le 20$, and $n,a[i] \\ge 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2018 提高组] 货币系统", "background": "NOIP2018 提高组 D1T2", "description": "在网友的国度中共有 $n$ 种不同面额的货币，第 $i$ 种货币的面额为 $a[i]$，你可以假设每一种货币都有无穷多张。为了方便，我们把货币种数为 $n$、面额数组为 $a[1..n]$ 的货币系统记作 $(n,a)$。 \n\n在一个完善的货币系统中，每一个非负整数的金额 $x$ 都应该可以被表示出，即对每一个非负整数 $x$，都存在 $n$ 个非负整数 $t[i]$ 满足 $a[i] \\times t[i]$ 的和为 $x$。然而， 在网友的国度中，货币系统可能是不完善的，即可能存在金额 $x$ 不能被该货币系统表示出。例如在货币系统 $n=3$, $a=[2,5,9]$ 中，金额 $1,3$ 就无法被表示出来。 \n\n两个货币系统 $(n,a)$ 和 $(m,b)$ 是等价的，当且仅当对于任意非负整数 $x$，它要么均可以被两个货币系统表出，要么不能被其中任何一个表出。 \n\n现在网友们打算简化一下货币系统。他们希望找到一个货币系统 $(m,b)$，满足 $(m,b)$ 与原来的货币系统 $(n,a)$ 等价，且 $m$ 尽可能的小。他们希望你来协助完成这个艰巨的任务：找到最小的 $m$。 ", "inputFormat": "输入文件的第一行包含一个整数 $T$，表示数据的组数。\n\n接下来按照如下格式分别给出 $T$ 组数据。 每组数据的第一行包含一个正整数 $n$。接下来一行包含 $n$ 个由空格隔开的正整数 $a[i]$。", "outputFormat": "输出文件共有 $T$ 行，对于每组数据，输出一行一个正整数，表示所有与 $(n,a)$ 等价的货币系统 $(m,b)$ 中，最小的 $m$。", "hint": "在第一组数据中，货币系统 $(2, [3,10])$ 和给出的货币系统 $(n, a)$ 等价，并可以验证不存在 $m < 2$ 的等价的货币系统，因此答案为 $2$。 在第二组数据中，可以验证不存在 $m < n$ 的等价的货币系统，因此答案为 $5$。 \n\n【数据范围与约定】\n\n![](https://cdn.luogu.com.cn/upload/pic/43160.png)  \n\n对于 $100\\%$ 的数据，满足 $1 ≤ T ≤ 20, n,a[i] ≥ 1$。 ", "locale": "zh-CN"}}}
{"pid": "P5021", "type": "P", "difficulty": 5, "samples": [["7 1 \n1 2 10 \n1 3 5 \n2 4 9 \n2 5 8 \n3 6 6 \n3 7 7", "31"], ["9 3 \n1 2 6 \n2 3 3 \n3 4 5 \n4 5 10 \n6 2 4 \n7 2 9 \n8 4 7 \n9 4 4", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2018", "二分", "NOIP 提高组", "最近公共祖先 LCA"], "title": "[NOIP 2018 提高组] 赛道修建", "background": "", "description": "C 城将要举办一系列的赛车比赛。在比赛前，需要在城内修建 $m$ 条赛道。 \n\nC 城一共有 $n$ 个路口，这些路口编号为 $1,2,…,n$，有 $n-1$ 条适合于修建赛道的双向通行的道路，每条道路连接着两个路口。其中，第 $i$ 条道路连接的两个路口编号为 $a_i$ 和 $b_i$，该道路的长度为 $l_i$。借助这 $n-1$ 条道路，从任何一个路口出发都能到达其他所有的路口。 \n\n一条赛道是一组互不相同的道路 $e_1,e_2,…,e_k$，满足可以从某个路口出发，依次经过 道路 $e_1,e_2,…,e_k$（每条道路经过一次，不允许调头）到达另一个路口。一条赛道的长度等于经过的各道路的长度之和。为保证安全，要求每条道路至多被一条赛道经过。 \n\n目前赛道修建的方案尚未确定。你的任务是设计一种赛道修建的方案，使得修建的 $m$ 条赛道中长度最小的赛道长度最大（即 $m$ 条赛道中最短赛道的长度尽可能大）", "inputFormat": "输入文件第一行包含两个由空格分隔的正整数 $n,m$，分别表示路口数及需要修建的 赛道数。 \n\n接下来 $n-1$ 行，第 $i$ 行包含三个正整数 $a_i,b_i,l_i$，表示第 $i$ 条适合于修建赛道的道 路连接的两个路口编号及道路长度。保证任意两个路口均可通过这 $n-1$ 条道路相互到达。每行中相邻两数之间均由一个空格分隔。 ", "outputFormat": "输出共一行，包含一个整数，表示长度最小的赛道长度的最大值。 ", "hint": "【输入输出样例 1 说明】 \n\n所有路口及适合于修建赛道的道路如下图所示：      \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bkj3pfqm.png)\n\n道路旁括号内的数字表示道路的编号，非括号内的数字表示道路长度。 需要修建 $1$ 条赛道。可以修建经过第 $3,1,2,6$ 条道路的赛道（从路口 $4$ 到路口 $7$）， 则该赛道的长度为 $9 + 10 + 5 + 7 = 31$，为所有方案中的最大值。\n\n【输入输出样例 2 说明】\n\n 所有路口及适合于修建赛道的道路如下图所示：   \n  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e9lcljwr.png)\n\n需要修建 $3$ 条赛道。可以修建如下 $3$ 条赛道： \n1. 经过第 $1,6 $条道路的赛道（从路口 $1$ 到路口$ 7$），长度为 $6 + 9 = 15$； \n2. 经过第$ 5,2,3,8$ 条道路的赛道（从路口$ 6$ 到路口 $9$），长度为 $4 + 3 + 5 + 4 = 16$；\n3. 经过第 $7,4$ 条道路的赛道（从路口 $8$ 到路口$ 5$），长度为 $7 + 10 = 17$。 长度最小的赛道长度为 $15$，为所有方案中的最大值。 \n\n### 数据规模与约定\n\n所有测试数据的范围和特点如下表所示 :\n\n| 测试点编号 | $n$ | $m$ | $a_i=1$ | $b_i=a_i+1$ | 分支不超过 $3$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $\\le 5$ | $=1$ | 否 | 否 | 是 |\n| $2$ | $\\le 10$ | $\\le n-1$ | 否 | 是 | 是 |\n| $3$ | $\\le 15$ | $\\le n-1$ | 是 | 否 | 否 |\n| $4$ | $\\le 10^3$ | $=1$ | 否 | 否 | 是 |\n| $5$ | $\\le 3\\times 10^4$ | $=1$ | 是 | 否 | 否 |\n| $6$ | $\\le 3\\times 10^4$ | $=1$ | 否 | 否 | 否 |\n| $7$ | $\\le 3\\times 10^4$ | $\\le n-1$ | 是 | 否 | 否 |\n| $8$ | $\\le 5\\times 10^4$ | $\\le n-1$ | 是 | 否 | 否 |\n| $9$ | $\\le 10^3$ | $\\le n-1$ | 否 | 是 | 是 |\n| $10$ | $\\le 3\\times 10^4$ | $\\le n-1$ | 否 | 是 | 是 |\n| $11$ | $\\le 5\\times 10^4$ | $\\le n-1$ | 否 | 是 | 是 |\n| $12$ | $\\le 50$ | $\\le n-1$ | 否 | 否 | 是 |\n| $13$ | $\\le 50$ | $\\le n-1$ | 否 | 否 | 是 |\n| $14$ | $\\le 200$ | $\\le n-1$ | 否 | 否 | 是 |\n| $15$ | $\\le 200$ | $\\le n-1$ | 否 | 否 | 是 |\n| $16$ | $\\le 10^3$ | $\\le n-1$ | 否 | 否 | 是 |\n| $17$ | $\\le 10^3$ | $\\le n-1$ | 否 | 否 | 否 |\n| $18$ | $\\le 3\\times 10^4$ | $\\le n-1$ | 否 | 否 | 否 |\n| $19$ | $\\le 3\\times 10^4$ | $\\le n-1$ | 否 | 否 | 否 |\n| $20$ | $\\le 5\\times 10^4$ | $\\le n-1$ | 否 | 否 | 否 |\n\n其中，「分支不超过 $3$」的含义为：每个路口至多有 $3$ 条道路与其相连。\n\n对于所有的数据，$2 \\le n \\le 5\\times 10^4, \\ 1 \\le m \\le n − 1,\\ 1 \\le a_i,b_i \\le n,\\  1 \\le l_i \\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2018 Senior] Track Construction", "background": "", "description": "City C is going to host a series of car races. Before the races, it is necessary to build $m$ race tracks in the city.\n\nCity C has $n$ intersections, numbered $1,2,\\ldots,n$. There are $n-1$ bidirectional roads suitable for building tracks, and each road connects two intersections. The $i$-th road connects intersections $a_i$ and $b_i$, and its length is $l_i$. Using these $n-1$ roads, you can reach every other intersection from any starting intersection.\n\nA track is a sequence of pairwise distinct roads $e_1,e_2,\\ldots,e_k$, such that you can start from some intersection, then pass through roads $e_1,e_2,\\ldots,e_k$ in order (each road is used exactly once, and turning back is not allowed), and finally arrive at another intersection. The length of a track is the sum of the lengths of all roads it passes through. For safety, each road may be used by at most one track.\n\nThe track construction plan has not been decided yet. Your task is to design a construction plan so that, among the $m$ tracks built, the shortest track is as long as possible (that is, maximize the minimum track length among the $m$ tracks).", "inputFormat": "The first line contains two positive integers $n,m$ separated by spaces, representing the number of intersections and the number of tracks to be built.\n\nThe next $n-1$ lines each contain three positive integers $a_i,b_i,l_i$, describing the two intersections connected by the $i$-th road and the road length. It is guaranteed that any two intersections are mutually reachable via these $n-1$ roads. Adjacent numbers in each line are separated by one space.", "outputFormat": "Output one line containing one integer, representing the maximum possible value of the minimum track length.", "hint": "[Explanation for Sample 1]\n\nAll intersections and the roads suitable for building tracks are shown in the figure below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bkj3pfqm.png)\n\nThe number in parentheses beside a road is the road index, and the number not in parentheses is the road length. You need to build $1$ track. You can build a track that goes through roads $3,1,2,6$ (from intersection $4$ to intersection $7$). Then the track length is $9 + 10 + 5 + 7 = 31$, which is the maximum among all plans.\n\n[Explanation for Sample 2]\n\nAll intersections and the roads suitable for building tracks are shown in the figure below:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e9lcljwr.png)\n\nYou need to build $3$ tracks. You can build the following $3$ tracks:\n1. A track that goes through roads $1,6$ (from intersection $1$ to intersection $7$), with length $6 + 9 = 15$;\n2. A track that goes through roads $5,2,3,8$ (from intersection $6$ to intersection $9$), with length $4 + 3 + 5 + 4 = 16$;\n3. A track that goes through roads $7,4$ (from intersection $8$ to intersection $5$), with length $7 + 10 = 17$.\nThe minimum track length is $15$, which is the maximum among all plans.\n\n### Constraints\n\nThe ranges and characteristics of all testdata are shown in the table below:\n\n| Test Point ID | $n$ | $m$ | $a_i=1$ | $b_i=a_i+1$ | Branching $\\le 3$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $\\le 5$ | $=1$ | No | No | Yes |\n| $2$ | $\\le 10$ | $\\le n-1$ | No | Yes | Yes |\n| $3$ | $\\le 15$ | $\\le n-1$ | Yes | No | No |\n| $4$ | $\\le 10^3$ | $=1$ | No | No | Yes |\n| $5$ | $\\le 3\\times 10^4$ | $=1$ | Yes | No | No |\n| $6$ | $\\le 3\\times 10^4$ | $=1$ | No | No | No |\n| $7$ | $\\le 3\\times 10^4$ | $\\le n-1$ | Yes | No | No |\n| $8$ | $\\le 5\\times 10^4$ | $\\le n-1$ | Yes | No | No |\n| $9$ | $\\le 10^3$ | $\\le n-1$ | No | Yes | Yes |\n| $10$ | $\\le 3\\times 10^4$ | $\\le n-1$ | No | Yes | Yes |\n| $11$ | $\\le 5\\times 10^4$ | $\\le n-1$ | No | Yes | Yes |\n| $12$ | $\\le 50$ | $\\le n-1$ | No | No | Yes |\n| $13$ | $\\le 50$ | $\\le n-1$ | No | No | Yes |\n| $14$ | $\\le 200$ | $\\le n-1$ | No | No | Yes |\n| $15$ | $\\le 200$ | $\\le n-1$ | No | No | Yes |\n| $16$ | $\\le 10^3$ | $\\le n-1$ | No | No | Yes |\n| $17$ | $\\le 10^3$ | $\\le n-1$ | No | No | No |\n| $18$ | $\\le 3\\times 10^4$ | $\\le n-1$ | No | No | No |\n| $19$ | $\\le 3\\times 10^4$ | $\\le n-1$ | No | No | No |\n| $20$ | $\\le 5\\times 10^4$ | $\\le n-1$ | No | No | No |\n\nHere, “Branching $\\le 3$” means that each intersection is connected to at most $3$ roads.\n\nFor all data, $2 \\le n \\le 5\\times 10^4, \\ 1 \\le m \\le n − 1,\\ 1 \\le a_i,b_i \\le n,\\  1 \\le l_i \\le 10^4$.\n\n# Input Format\n\nThe first line contains two positive integers $n,m$ separated by spaces, representing the number of intersections and the number of tracks to be built.\n\nThe next $n-1$ lines each contain three positive integers $a_i,b_i,l_i$, describing the two intersections connected by the $i$-th road and the road length. It is guaranteed that any two intersections are mutually reachable via these $n-1$ roads. Adjacent numbers in each line are separated by one space.\n\n# Output Format\n\nOutput one line containing one integer, representing the maximum possible value of the minimum track length.\n\n# Hint\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2018 提高组] 赛道修建", "background": "", "description": "C 城将要举办一系列的赛车比赛。在比赛前，需要在城内修建 $m$ 条赛道。 \n\nC 城一共有 $n$ 个路口，这些路口编号为 $1,2,…,n$，有 $n-1$ 条适合于修建赛道的双向通行的道路，每条道路连接着两个路口。其中，第 $i$ 条道路连接的两个路口编号为 $a_i$ 和 $b_i$，该道路的长度为 $l_i$。借助这 $n-1$ 条道路，从任何一个路口出发都能到达其他所有的路口。 \n\n一条赛道是一组互不相同的道路 $e_1,e_2,…,e_k$，满足可以从某个路口出发，依次经过 道路 $e_1,e_2,…,e_k$（每条道路经过一次，不允许调头）到达另一个路口。一条赛道的长度等于经过的各道路的长度之和。为保证安全，要求每条道路至多被一条赛道经过。 \n\n目前赛道修建的方案尚未确定。你的任务是设计一种赛道修建的方案，使得修建的 $m$ 条赛道中长度最小的赛道长度最大（即 $m$ 条赛道中最短赛道的长度尽可能大）", "inputFormat": "输入文件第一行包含两个由空格分隔的正整数 $n,m$，分别表示路口数及需要修建的 赛道数。 \n\n接下来 $n-1$ 行，第 $i$ 行包含三个正整数 $a_i,b_i,l_i$，表示第 $i$ 条适合于修建赛道的道 路连接的两个路口编号及道路长度。保证任意两个路口均可通过这 $n-1$ 条道路相互到达。每行中相邻两数之间均由一个空格分隔。 ", "outputFormat": "输出共一行，包含一个整数，表示长度最小的赛道长度的最大值。 ", "hint": "【输入输出样例 1 说明】 \n\n所有路口及适合于修建赛道的道路如下图所示：      \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bkj3pfqm.png)\n\n道路旁括号内的数字表示道路的编号，非括号内的数字表示道路长度。 需要修建 $1$ 条赛道。可以修建经过第 $3,1,2,6$ 条道路的赛道（从路口 $4$ 到路口 $7$）， 则该赛道的长度为 $9 + 10 + 5 + 7 = 31$，为所有方案中的最大值。\n\n【输入输出样例 2 说明】\n\n 所有路口及适合于修建赛道的道路如下图所示：   \n  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e9lcljwr.png)\n\n需要修建 $3$ 条赛道。可以修建如下 $3$ 条赛道： \n1. 经过第 $1,6 $条道路的赛道（从路口 $1$ 到路口$ 7$），长度为 $6 + 9 = 15$； \n2. 经过第$ 5,2,3,8$ 条道路的赛道（从路口$ 6$ 到路口 $9$），长度为 $4 + 3 + 5 + 4 = 16$；\n3. 经过第 $7,4$ 条道路的赛道（从路口 $8$ 到路口$ 5$），长度为 $7 + 10 = 17$。 长度最小的赛道长度为 $15$，为所有方案中的最大值。 \n\n### 数据规模与约定\n\n所有测试数据的范围和特点如下表所示 :\n\n| 测试点编号 | $n$ | $m$ | $a_i=1$ | $b_i=a_i+1$ | 分支不超过 $3$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $1$ | $\\le 5$ | $=1$ | 否 | 否 | 是 |\n| $2$ | $\\le 10$ | $\\le n-1$ | 否 | 是 | 是 |\n| $3$ | $\\le 15$ | $\\le n-1$ | 是 | 否 | 否 |\n| $4$ | $\\le 10^3$ | $=1$ | 否 | 否 | 是 |\n| $5$ | $\\le 3\\times 10^4$ | $=1$ | 是 | 否 | 否 |\n| $6$ | $\\le 3\\times 10^4$ | $=1$ | 否 | 否 | 否 |\n| $7$ | $\\le 3\\times 10^4$ | $\\le n-1$ | 是 | 否 | 否 |\n| $8$ | $\\le 5\\times 10^4$ | $\\le n-1$ | 是 | 否 | 否 |\n| $9$ | $\\le 10^3$ | $\\le n-1$ | 否 | 是 | 是 |\n| $10$ | $\\le 3\\times 10^4$ | $\\le n-1$ | 否 | 是 | 是 |\n| $11$ | $\\le 5\\times 10^4$ | $\\le n-1$ | 否 | 是 | 是 |\n| $12$ | $\\le 50$ | $\\le n-1$ | 否 | 否 | 是 |\n| $13$ | $\\le 50$ | $\\le n-1$ | 否 | 否 | 是 |\n| $14$ | $\\le 200$ | $\\le n-1$ | 否 | 否 | 是 |\n| $15$ | $\\le 200$ | $\\le n-1$ | 否 | 否 | 是 |\n| $16$ | $\\le 10^3$ | $\\le n-1$ | 否 | 否 | 是 |\n| $17$ | $\\le 10^3$ | $\\le n-1$ | 否 | 否 | 否 |\n| $18$ | $\\le 3\\times 10^4$ | $\\le n-1$ | 否 | 否 | 否 |\n| $19$ | $\\le 3\\times 10^4$ | $\\le n-1$ | 否 | 否 | 否 |\n| $20$ | $\\le 5\\times 10^4$ | $\\le n-1$ | 否 | 否 | 否 |\n\n其中，「分支不超过 $3$」的含义为：每个路口至多有 $3$ 条道路与其相连。\n\n对于所有的数据，$2 \\le n \\le 5\\times 10^4, \\ 1 \\le m \\le n − 1,\\ 1 \\le a_i,b_i \\le n,\\  1 \\le l_i \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P5022", "type": "P", "difficulty": 4, "samples": [["6 5 \n1 3 \n2 3 \n2 5 \n3 4 \n4 6", "1 3 2 5 4 6"], ["6 6 \n1 3 \n2 3 \n2 5 \n3 4 \n4 5 \n4 6", "1 3 2 4 5 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "贪心", "2018", "NOIP 提高组", "深度优先搜索 DFS", "基环树"], "title": "[NOIP 2018 提高组] 旅行", "background": "NOIP2018 提高组 D2T1", "description": "小 Y 是一个爱好旅行的 OIer。她来到 X 国，打算将各个城市都玩一遍。 \n  \n小 Y 了解到，X 国的 $n$ 个城市之间有 $m$ 条双向道路。每条双向道路连接两个城市。不存在两条连接同一对城市的道路，也不存在一条连接一个城市和它本身的道路。并且，从任意一个城市出发，通过这些道路都可以到达任意一个其他城市。小 Y 只能通过这些道路从一个城市前往另一个城市。\n\n小 Y 的旅行方案是这样的：任意选定一个城市作为起点，然后从起点开始，每次可以选择一条与当前城市相连的道路，走向一个没有去过的城市，或者沿着第一次访问该城市时经过的道路后退到上一个城市。当小 Y 回到起点时，她可以选择结束这次旅行或继续旅行。需要注意的是，小 Y 要求在旅行方案中，每个城市都被访问到。\n\n为了让自己的旅行更有意义，小 Y 决定在每到达一个新的城市（包括起点）时，将它的编号记录下来。她知道这样会形成一个长度为 $n$ 的序列。她希望这个序列的字典序 最小，你能帮帮她吗？对于两个长度均为 $n$ 的序列 $A$ 和 $B$，当且仅当存在一个正整数 $x$，满足以下条件时，我们说序列 $A$ 的字典序小于 $B$。\n\n- 对于任意正整数 $1 \\le i < x$，序列 $A$ 的第 $i$ 个元素 $A_i$ 和序列 $B$ 的第 $i$ 个元素 $B_i$ 相同。\n- 序列 $A$ 的第 $x$ 个元素的值小于序列 $B$ 的第 $x$ 个元素的值。", "inputFormat": "输入文件共 $m + 1$ 行。第一行包含两个整数 $n,m(m \\le n)$，中间用一个空格分隔。\n\n接下来 $m$ 行，每行包含两个整数 $u,v (1 \\le u,v \\le n)$ ，表示编号为 $u$ 和 $v$ 的城市之 间有一条道路，两个整数之间用一个空格分隔。", "outputFormat": "输出文件包含一行，$n$ 个整数，表示字典序最小的序列。相邻两个整数之间用一个空格分隔。", "hint": "【数据规模与约定】   \n\n对于 $100\\%$ 的数据和所有样例， $1 \\le n \\le 5000 $ 且 $m = n - 1$ 或 $m = n$ 。\n\n对于不同的测试点，我们约定数据的规模如下：\n\n![](https://cdn.luogu.com.cn/upload/pic/43271.png)", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2018 Senior] Travel", "background": "NOIP 2018 Senior D2T1.", "description": "Xiao Y is an OIer who loves traveling. She comes to Country X and plans to visit every city.\n\nXiao Y learns that there are $m$ undirected roads among the $n$ cities in Country X. Each undirected road connects two cities. There are no two roads connecting the same pair of cities, and there is no road connecting a city to itself. Also, starting from any city, one can reach any other city through these roads. Xiao Y can only travel from one city to another using these roads.\n\nXiao Y’s travel plan is as follows: she chooses any city as the starting point, and then starting from it, each time she can either choose a road connected to the current city and go to a city she has not visited before, or go back to the previous city along the road she used when she first visited the current city. When Xiao Y returns to the starting point, she may choose to end the trip or continue. Note that Xiao Y requires that in her plan, every city must be visited.\n\nTo make her trip more meaningful, every time she arrives at a new city (including the starting point), she records its index. She knows this will form a sequence of length $n$. She wants this sequence to be lexicographically smallest. Can you help her? For two sequences $A$ and $B$ of length $n$, we say $A$ is lexicographically smaller than $B$ if and only if there exists a positive integer $x$ such that:\n\n- For any positive integer $1 \\le i < x$, the $i$-th element $A_i$ of $A$ equals the $i$-th element $B_i$ of $B$.\n- The value of the $x$-th element of $A$ is smaller than that of the $x$-th element of $B$.", "inputFormat": "The input has $m + 1$ lines. The first line contains two integers $n,m(m \\le n)$, separated by a space.\n\nThe next $m$ lines each contain two integers $u,v (1 \\le u,v \\le n)$, indicating that there is a road between the cities numbered $u$ and $v$. The two integers are separated by a space.", "outputFormat": "Output one line with $n$ integers, representing the lexicographically smallest sequence. Adjacent integers are separated by a space.", "hint": "## Constraints\n\nFor $100\\%$ of the data and all samples, $1 \\le n \\le 5000$ and $m = n - 1$ or $m = n$.\n\nFor different test points, the constraints are as follows:\n\n![](https://cdn.luogu.com.cn/upload/pic/43271.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2018 提高组] 旅行", "background": "NOIP2018 提高组 D2T1", "description": "小 Y 是一个爱好旅行的 OIer。她来到 X 国，打算将各个城市都玩一遍。 \n  \n小 Y 了解到，X 国的 $n$ 个城市之间有 $m$ 条双向道路。每条双向道路连接两个城市。不存在两条连接同一对城市的道路，也不存在一条连接一个城市和它本身的道路。并且，从任意一个城市出发，通过这些道路都可以到达任意一个其他城市。小 Y 只能通过这些道路从一个城市前往另一个城市。\n\n小 Y 的旅行方案是这样的：任意选定一个城市作为起点，然后从起点开始，每次可以选择一条与当前城市相连的道路，走向一个没有去过的城市，或者沿着第一次访问该城市时经过的道路后退到上一个城市。当小 Y 回到起点时，她可以选择结束这次旅行或继续旅行。需要注意的是，小 Y 要求在旅行方案中，每个城市都被访问到。\n\n为了让自己的旅行更有意义，小 Y 决定在每到达一个新的城市（包括起点）时，将它的编号记录下来。她知道这样会形成一个长度为 $n$ 的序列。她希望这个序列的字典序 最小，你能帮帮她吗？对于两个长度均为 $n$ 的序列 $A$ 和 $B$，当且仅当存在一个正整数 $x$，满足以下条件时，我们说序列 $A$ 的字典序小于 $B$。\n\n- 对于任意正整数 $1 \\le i < x$，序列 $A$ 的第 $i$ 个元素 $A_i$ 和序列 $B$ 的第 $i$ 个元素 $B_i$ 相同。\n- 序列 $A$ 的第 $x$ 个元素的值小于序列 $B$ 的第 $x$ 个元素的值。", "inputFormat": "输入文件共 $m + 1$ 行。第一行包含两个整数 $n,m(m \\le n)$，中间用一个空格分隔。\n\n接下来 $m$ 行，每行包含两个整数 $u,v (1 \\le u,v \\le n)$ ，表示编号为 $u$ 和 $v$ 的城市之 间有一条道路，两个整数之间用一个空格分隔。", "outputFormat": "输出文件包含一行，$n$ 个整数，表示字典序最小的序列。相邻两个整数之间用一个空格分隔。", "hint": "【数据规模与约定】   \n\n对于 $100\\%$ 的数据和所有样例， $1 \\le n \\le 5000 $ 且 $m = n - 1$ 或 $m = n$ 。\n\n对于不同的测试点，我们约定数据的规模如下：\n\n![](https://cdn.luogu.com.cn/upload/pic/43271.png)", "locale": "zh-CN"}}}
{"pid": "P5023", "type": "P", "difficulty": 6, "samples": [["2 2", "12"], ["3 3", "112"], ["5 5", "7136"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "数学", "2018", "NOIP 提高组"], "title": "[NOIP 2018 提高组] 填数游戏", "background": "NOIP2018 提高组 D2T2", "description": "小 D 特别喜欢玩游戏。这一天，他在玩一款填数游戏。\n  \n这个填数游戏的棋盘是一个 $n \\times m$ 的矩形表格。玩家需要在表格的每个格子中填入一个数字（数字 $0$ 或者数字 $1$），填数时需要满足一些限制。   \n\n下面我们来具体描述这些限制。   \n\n为了方便描述，我们先给出一些定义： \n \n-  我们用每个格子的行列坐标来表示一个格子，即（行坐标，列坐标）。注意：行列坐标均从 $0$ 开始编号。\n- 合法路径 $P$：一条路径是合法的当且仅当：   \n    1. 这条路径从矩形表格的左上角的格子 $(0,0)$ 出发，到矩形的右下角格子 $(n - 1,m - 1)$ 结束；   \n    2. 在这条路径中，每次只能从当前的格子移动到右边与它相邻的格子，或者从当前格子移动到下面与它相邻的格子。\n    \n  例如：在下面这个矩形中，只有两条路径是合法的，它们分别是 $P_1$：$(0,0)\\to (0,1)\\to (1,1)$ 和 $P_2$：$(0,0) \\to (1,0) \\to (1,1)$。\n   \n![](https://cdn.luogu.com.cn/upload/pic/43256.png)  \n\n对于一条合法的路径 $P$，我们可以用一个字符串 $w(P)$ 来表示，该字符串的长度为 $n + m - 2$，其中只包含字符 $\\texttt R$ 或者字符 $\\texttt D$，第 $i$ 个字符记录了路径 $P$ 中第 $i$ 步的移动方法。$\\texttt R$ 表示移动到当前格子右边与它相邻的格子，$\\texttt D$ 表示移动到当前格子下面与它相邻的格子。例如，上图中对于路径 $P_1$，有 $w(P_1) = \\texttt {RD}$；而对于另一条路径 $P_2$，有 $w(P_2) = \\texttt {DR}$。   \n\n同时，将每条合法路径 $P$ 经过的每个格子上填入的数字依次连接后，会得到一个长度为 $n + m - 1$ 的 $01$ 字符串，记为 $s(P)$。例如，如果我们在格子 $(0,0)$ 和 $(1,0)$ 上填入数字 $0$，在格子 $(0,1)$ 和 $(1,1)$ 上填入数字 $1$（见上图红色数字），那么对于路径 $P_1$，我们可以得到 $s(P_1) = 011$，对于路径 $P_2$，有 $s(P_2) = 001$。 \n\n游戏要求小 D 找到一种填数字 $0$、$1$ 的方法，使得对于两条路径 $P_1$，$P_2$，如果 $w(P_1) > w(P_2)$，那么必须 $s(P_1) ≤ s(P_2)$。我们说字符串 $a$ 比字符串 $b$ 小，当且仅当字符串 $a$ 的字典序小于字符串 $b$ 的字典序，字典序的定义详见第一题。但是仅仅是找一种方法无法满足小 D 的好奇心，小 D 更想知道这个游戏有多少种玩法，也就是说，有多少种填数字的方法满足游戏的要求？ \n\n小 D 能力有限，希望你帮助他解决这个问题，即有多少种填 $0$、$1$ 的方法能满足题目要求。由于答案可能很大，你需要输出答案对 $10^9 + 7$ 取模的结果。 ", "inputFormat": "输入文件共一行，包含两个正整数 $n,m$，由一个空格分隔，表示矩形的大小。其中 $n$ 表示矩形表格的行数，$m$ 表示矩形表格的列数。 ", "outputFormat": "输出共一行，包含一个正整数，表示有多少种填 $0$、$1$ 的方法能满足游戏的要求。 注意：输出答案对 $10^9+7$ 取模的结果。 ", "hint": "**样例解释**  \n\n![](https://cdn.luogu.com.cn/upload/pic/43257.png)  \n\n**数据规模与约定** \n\n| 测试点编号 | $n\\le$ | $m\\le$ |\n| :-----------: | :-----------: | :-----------: |\n| $1\\sim 4$ | $3$ | $3$ |\n| $5\\sim 10$ | $2$ | $10^6$ |\n| $11\\sim 13$ | $3$ | $10^6$ |\n| $14\\sim 16$ | $8$ | $8$ |\n| $17\\sim 20$ | $8$ | $10^6$ |\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2018 Senior] Number Filling Game", "background": "NOIP 2018 Senior D2T2.", "description": "Xiao D really likes playing games. One day, he was playing a number filling game.\n\nThe board of this game is an $n \\times m$ rectangular grid. The player needs to fill each cell in the grid with a number (either $0$ or $1$), and the filling must satisfy some constraints.\n\nWe describe these constraints in detail below.\n\nFor convenience, we first give some definitions:\n\n- We use the row and column coordinates of each cell to represent a cell, i.e., (row, column). Note: both row and column coordinates start from $0$.\n- A valid path $P$: A path is valid if and only if:\n  1. The path starts from the top-left cell $(0,0)$ of the grid and ends at the bottom-right cell $(n - 1,m - 1)$;\n  2. Along this path, each move can only go from the current cell to the adjacent cell on its right, or from the current cell to the adjacent cell below it.\n\n  For example, in the rectangle below, only two paths are valid: $P_1$: $(0,0)\\to (0,1)\\to (1,1)$ and $P_2$: $(0,0) \\to (1,0) \\to (1,1)$.\n\n![](https://cdn.luogu.com.cn/upload/pic/43256.png)\n\nFor a valid path $P$, we can represent it with a string $w(P)$ of length $n + m - 2$, which contains only the characters $\\texttt R$ or $\\texttt D$. The $i$-th character records how the $i$-th step of path $P$ moves. $\\texttt R$ means moving to the adjacent cell on the right of the current cell, and $\\texttt D$ means moving to the adjacent cell below the current cell. For example, for path $P_1$ in the figure above, $w(P_1) = \\texttt {RD}$; for the other path $P_2$, $w(P_2) = \\texttt {DR}$.\n\nAlso, if we concatenate, in order, the numbers filled in each cell visited by a valid path $P$, we obtain a $01$ string of length $n + m - 1$, denoted by $s(P)$. For example, if we fill $0$ in cells $(0,0)$ and $(1,0)$, and fill $1$ in cells $(0,1)$ and $(1,1)$ (as the red numbers in the figure), then for path $P_1$ we get $s(P_1) = 011$, and for path $P_2$ we get $s(P_2) = 001$.\n\nThe game requires Xiao D to find a way to fill $0$ and $1$ such that for any two paths $P_1$, $P_2$, if $w(P_1) > w(P_2)$, then it must hold that $s(P_1) \\le s(P_2)$. We say that string $a$ is smaller than string $b$ if and only if $a$ is lexicographically smaller than $b$. The definition of lexicographical order is given in detail in Problem 1. However, finding just one method does not satisfy Xiao D’s curiosity. Xiao D wants to know how many different ways the game can be played, that is, how many filling methods satisfy the requirement.\n\nXiao D is not strong enough, so he hopes you can help solve this problem: how many ways of filling $0$ and $1$ can satisfy the requirement? Since the answer may be very large, you need to output the answer modulo $10^9 + 7$.", "inputFormat": "The input consists of one line containing two positive integers $n,m$, separated by a space, representing the size of the rectangle. Here $n$ is the number of rows of the grid, and $m$ is the number of columns of the grid.", "outputFormat": "Output one line containing a positive integer, representing how many ways of filling $0$ and $1$ can satisfy the requirement. Note: output the result modulo $10^9+7$.", "hint": "**Sample Explanation**\n\n![](https://cdn.luogu.com.cn/upload/pic/43257.png)\n\n**Constraints**\n\n| Test Point ID | $n\\le$ | $m\\le$ |\n| :-----------: | :-----------: | :-----------: |\n| $1\\sim 4$ | $3$ | $3$ |\n| $5\\sim 10$ | $2$ | $10^6$ |\n| $11\\sim 13$ | $3$ | $10^6$ |\n| $14\\sim 16$ | $8$ | $8$ |\n| $17\\sim 20$ | $8$ | $10^6$ |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2018 提高组] 填数游戏", "background": "NOIP2018 提高组 D2T2", "description": "小 D 特别喜欢玩游戏。这一天，他在玩一款填数游戏。\n  \n这个填数游戏的棋盘是一个 $n \\times m$ 的矩形表格。玩家需要在表格的每个格子中填入一个数字（数字 $0$ 或者数字 $1$），填数时需要满足一些限制。   \n\n下面我们来具体描述这些限制。   \n\n为了方便描述，我们先给出一些定义： \n \n-  我们用每个格子的行列坐标来表示一个格子，即（行坐标，列坐标）。注意：行列坐标均从 $0$ 开始编号。\n- 合法路径 $P$：一条路径是合法的当且仅当：   \n    1. 这条路径从矩形表格的左上角的格子 $(0,0)$ 出发，到矩形的右下角格子 $(n - 1,m - 1)$ 结束；   \n    2. 在这条路径中，每次只能从当前的格子移动到右边与它相邻的格子，或者从当前格子移动到下面与它相邻的格子。\n    \n  例如：在下面这个矩形中，只有两条路径是合法的，它们分别是 $P_1$：$(0,0)\\to (0,1)\\to (1,1)$ 和 $P_2$：$(0,0) \\to (1,0) \\to (1,1)$。\n   \n![](https://cdn.luogu.com.cn/upload/pic/43256.png)  \n\n对于一条合法的路径 $P$，我们可以用一个字符串 $w(P)$ 来表示，该字符串的长度为 $n + m - 2$，其中只包含字符 $\\texttt R$ 或者字符 $\\texttt D$，第 $i$ 个字符记录了路径 $P$ 中第 $i$ 步的移动方法。$\\texttt R$ 表示移动到当前格子右边与它相邻的格子，$\\texttt D$ 表示移动到当前格子下面与它相邻的格子。例如，上图中对于路径 $P_1$，有 $w(P_1) = \\texttt {RD}$；而对于另一条路径 $P_2$，有 $w(P_2) = \\texttt {DR}$。   \n\n同时，将每条合法路径 $P$ 经过的每个格子上填入的数字依次连接后，会得到一个长度为 $n + m - 1$ 的 $01$ 字符串，记为 $s(P)$。例如，如果我们在格子 $(0,0)$ 和 $(1,0)$ 上填入数字 $0$，在格子 $(0,1)$ 和 $(1,1)$ 上填入数字 $1$（见上图红色数字），那么对于路径 $P_1$，我们可以得到 $s(P_1) = 011$，对于路径 $P_2$，有 $s(P_2) = 001$。 \n\n游戏要求小 D 找到一种填数字 $0$、$1$ 的方法，使得对于两条路径 $P_1$，$P_2$，如果 $w(P_1) > w(P_2)$，那么必须 $s(P_1) ≤ s(P_2)$。我们说字符串 $a$ 比字符串 $b$ 小，当且仅当字符串 $a$ 的字典序小于字符串 $b$ 的字典序，字典序的定义详见第一题。但是仅仅是找一种方法无法满足小 D 的好奇心，小 D 更想知道这个游戏有多少种玩法，也就是说，有多少种填数字的方法满足游戏的要求？ \n\n小 D 能力有限，希望你帮助他解决这个问题，即有多少种填 $0$、$1$ 的方法能满足题目要求。由于答案可能很大，你需要输出答案对 $10^9 + 7$ 取模的结果。 ", "inputFormat": "输入文件共一行，包含两个正整数 $n,m$，由一个空格分隔，表示矩形的大小。其中 $n$ 表示矩形表格的行数，$m$ 表示矩形表格的列数。 ", "outputFormat": "输出共一行，包含一个正整数，表示有多少种填 $0$、$1$ 的方法能满足游戏的要求。 注意：输出答案对 $10^9+7$ 取模的结果。 ", "hint": "**样例解释**  \n\n![](https://cdn.luogu.com.cn/upload/pic/43257.png)  \n\n**数据规模与约定** \n\n| 测试点编号 | $n\\le$ | $m\\le$ |\n| :-----------: | :-----------: | :-----------: |\n| $1\\sim 4$ | $3$ | $3$ |\n| $5\\sim 10$ | $2$ | $10^6$ |\n| $11\\sim 13$ | $3$ | $10^6$ |\n| $14\\sim 16$ | $8$ | $8$ |\n| $17\\sim 20$ | $8$ | $10^6$ |\n", "locale": "zh-CN"}}}
{"pid": "P5024", "type": "P", "difficulty": 6, "samples": [["5 3 C3 \n2 4 1 3 9 \n1 5 \n5 2 \n5 3 \n3 4 \n1 0 3 0 \n2 1 3 1 \n1 0 5 0\n", "12 \n7 \n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2018", "倍增", "NOIP 提高组", "树链剖分", "动态 DP", "全局平衡二叉树"], "title": "[NOIP 2018 提高组] 保卫王国", "background": "NOIP2018 提高组 D2T3", "description": "Z 国有 $n$ 座城市，$(n - 1)$ 条双向道路，每条双向道路连接两座城市，且任意两座城市都能通过若干条道路相互到达。  \n\nZ 国的国防部长小 Z 要在城市中驻扎军队。驻扎军队需要满足如下几个条件： \n\n- 一座城市可以驻扎一支军队，也可以不驻扎军队。   \n- 由道路直接连接的两座城市中至少要有一座城市驻扎军队。   \n- 在城市里驻扎军队会产生花费，在编号为 $i$ 的城市中驻扎军队的花费是 $p_i$。      \n\n小 Z 很快就规划出了一种驻扎军队的方案，使总花费最小。但是国王又给小 Z 提出了 $m$ 个要求，每个要求规定了其中两座城市是否驻扎军队。小 Z 需要针对每个要求逐一给出回答。具体而言，如果国王提出的第 $j$ 个要求能够满足上述驻扎条件（不需要考虑第 $j$ 个要求之外的其它要求），则需要给出在此要求前提下驻扎军队的最小开销。如果国王提出的第 $j$ 个要求无法满足，则需要输出 $-1$。现在请你来帮助小 Z。 ", "inputFormat": "第一行有两个整数和一个字符串，依次表示城市数 $n$，要求数 $m$ 和数据类型 $type$。$type$ 是一个由大写字母 `A`，`B` 或 `C` 和一个数字 `1`，`2`，`3` 组成的字符串。它可以帮助你获得部分分。你可能不需要用到这个参数。这个参数的含义在【数据规模与约定】中 有具体的描述。\n\n第二行有 $n$ 个整数，第 $i$ 个整数表示编号 $i$ 的城市中驻扎军队的花费 $p_i$。\n\n接下来 $(n - 1)$ 行，每行两个整数 $u,v$，表示有一条 $u$ 到 $v$ 的双向道路。 \n\n接下来 $m$ 行，每行四个整数 $a, x, b, y$，表示一个要求是在城市 $a$ 驻扎 $x$ 支军队，在城市 $b$ 驻扎 $y$ 支军队。其中，$x,y$ 的取值只有 $0$ 或 $1$：\n- 若 $x$ 为 $0$，表示城市 $a$ 不得驻扎军队。\n- 若 $x$ 为 $1$，表示城市 $a$ 必须驻扎军队。\n- 若 $y$ 为 $0$，表示城市 $b$ 不得驻扎军队。\n- 若 $y$ 为 $1$，表示城市 $b$ 必须驻扎军队。    \n\n输入文件中每一行相邻的两个数据之间均用一个空格分隔。 ", "outputFormat": "输出共 $m$ 行，每行包含一个个整数，第 $j$ 行表示在满足国王第 $j$ 个要求时的最小开销， 如果无法满足国王的第 $j$ 个要求，则该行输出 $-1$。 ", "hint": "#### 样例 1 解释\n\n- 对于第一个要求，在 $4$ 号和 $5$ 号城市驻扎军队时开销最小。\n- 对于第二个要求，在 $1$ 号、$2$ 号、$3$ 号城市驻扎军队时开销最小。   \n- 第三个要求是无法满足的，因为在 $1$ 号、$5$ 号城市都不驻扎军队就意味着由道路直接连 接的两座城市中都没有驻扎军队。  \n\n#### 数据规模与约定  \n\n| 测试点编号 | $\\text{type}$ | $n = m=$ |\n|:-:|:-:|:-:|\n| $1,2$ | `A3` | $10$ |\n| $3,4$ | `C3` | $10$ |\n| $5,6$ | `A3` | $100$ |\n| $7$ | `C3` | $100$ |\n| $8,9$ | `A3` | $2\\times 10^3$ |\n| $10,11$ | `C3` | $2\\times 10^3$ |\n| $12,13$ | `A1` | $10^5$ |\n| $14, 15, 16$ | `A2` | $10^5$ |\n| $17$ | `A3` | $10^5$ |\n| $18,19$ | `B1` | $10^5$ |\n| $20,21$ | `C1` | $10^5$ |\n| $22$ | `C2` | $10^5$ |\n| $23, 24, 25$ | `C3` | $10^5$ |\n\n数据类型的含义：   \n\n- `A`：城市 $i$ 与城市 $i + 1$ 直接相连。    \n- `B`：任意城市与城市 $1$ 的距离不超过 $100$（距离定义为最短路径上边的数量），即如果这 棵树以 $1$ 号城市为根，深度不超过 $100$。   \n- `C`：在树的形态上无特殊约束。   \n- `1`：询问时保证 $a = 1,x = 1$，即要求在城市 $1$ 驻军。对 $b,y$ 没有限制。   \n- `2`：询问时保证 $a,b$ 是相邻的（由一条道路直接连通）  \n- `3`：在询问上无特殊约束。\n\n对于 $100\\%$的数据，保证 $1 \\leq n,m ≤ 10^5$，$1 ≤ p_i ≤ 10^5$，$1 \\leq u, v, a, b \\leq n$，$a \\neq b$，$x, y \\in \\{0, 1\\}$。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2018 Senior] Defend the Kingdom", "background": "NOIP 2018 Senior D2T3.", "description": "Country Z has $n$ cities and $(n - 1)$ two-way roads. Each road connects two cities, and any two cities can reach each other through some roads.\n\nThe Minister of Defense, Little Z, wants to station armies in the cities. The deployment must satisfy the following conditions:\n\n- A city may have an army stationed, or may have no army stationed.\n- For any two cities directly connected by a road, at least one of them must have an army stationed.\n- Stationing an army in a city costs money. The cost of stationing an army in city $i$ is $p_i$.\n\nLittle Z quickly finds a deployment plan with the minimum total cost. However, the king then提出 (tíchū) $m$ requirements. Each requirement specifies whether two particular cities must have armies stationed or must not have armies stationed. Little Z needs to answer each requirement one by one.\n\nSpecifically, if the king’s $j$-th requirement can be satisfied together with the deployment conditions above (without considering any other requirements beyond the $j$-th one), output the minimum total cost under this requirement. If the $j$-th requirement cannot be satisfied, output $-1$. Please help Little Z.", "inputFormat": "The first line contains two integers and a string, in order: the number of cities $n$, the number of requirements $m$, and the data type $type$. $type$ is a string consisting of an uppercase letter `A`, `B`, or `C`, followed by a digit `1`, `2`, or `3`. It can help you get partial scores. You may not need to use this parameter. Its meaning is described in detail in the “Data Scale and Conventions” section.\n\nThe second line contains $n$ integers. The $i$-th integer denotes the cost $p_i$ of stationing an army in city $i$.\n\nThe next $(n - 1)$ lines each contain two integers $u, v$, indicating a two-way road between $u$ and $v$.\n\nThe next $m$ lines each contain four integers $a, x, b, y$, describing one requirement: station $x$ armies in city $a$, and station $y$ armies in city $b$. Here, $x, y$ can only be $0$ or $1$:\n\n- If $x$ is $0$, city $a$ must not have an army stationed.\n- If $x$ is $1$, city $a$ must have an army stationed.\n- If $y$ is $0$, city $b$ must not have an army stationed.\n- If $y$ is $1$, city $b$ must have an army stationed.\n\nIn the input file, any two adjacent data items on the same line are separated by one space.", "outputFormat": "Output $m$ lines. Each line contains one integer. The $j$-th line represents the minimum total cost when satisfying the king’s $j$-th requirement. If the king’s $j$-th requirement cannot be satisfied, output $-1$ on that line.", "hint": "#### Sample 1 Explanation\n\n- For the first requirement, the minimum cost is achieved by stationing armies in cities $4$ and $5$.\n- For the second requirement, the minimum cost is achieved by stationing armies in cities $1$, $2$, and $3$.\n- The third requirement cannot be satisfied, because not stationing armies in both cities $1$ and $5$ means there exists a road whose two directly connected cities both have no armies stationed.\n\n#### Constraints\n\n| Test Point ID | $\\text{type}$ | $n = m=$ |\n|:-:|:-:|:-:|\n| $1,2$ | `A3` | $10$ |\n| $3,4$ | `C3` | $10$ |\n| $5,6$ | `A3` | $100$ |\n| $7$ | `C3` | $100$ |\n| $8,9$ | `A3` | $2\\times 10^3$ |\n| $10,11$ | `C3` | $2\\times 10^3$ |\n| $12,13$ | `A1` | $10^5$ |\n| $14, 15, 16$ | `A2` | $10^5$ |\n| $17$ | `A3` | $10^5$ |\n| $18,19$ | `B1` | $10^5$ |\n| $20,21$ | `C1` | $10^5$ |\n| $22$ | `C2` | $10^5$ |\n| $23, 24, 25$ | `C3` | $10^5$ |\n\nMeaning of the data types:\n\n- `A`: City $i$ is directly connected to city $i + 1$.\n- `B`: The distance from any city to city $1$ is at most $100$ (distance is defined as the number of edges on the shortest path). That is, if the tree is rooted at city $1$, its depth is at most $100$.\n- `C`: There are no special constraints on the shape of the tree.\n- `1`: In each query, it is guaranteed that $a = 1, x = 1$, meaning city $1$ must have an army stationed. There are no restrictions on $b, y$.\n- `2`: In each query, it is guaranteed that $a, b$ are adjacent (directly connected by one road).\n- `3`: There are no special constraints on the queries.\n\nFor $100\\%$ of the testdata, it is guaranteed that $1 \\leq n, m \\leq 10^5$, $1 \\leq p_i \\leq 10^5$, $1 \\leq u, v, a, b \\leq n$, $a \\neq b$, and $x, y \\in \\{0, 1\\}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2018 提高组] 保卫王国", "background": "NOIP2018 提高组 D2T3", "description": "Z 国有 $n$ 座城市，$(n - 1)$ 条双向道路，每条双向道路连接两座城市，且任意两座城市都能通过若干条道路相互到达。  \n\nZ 国的国防部长小 Z 要在城市中驻扎军队。驻扎军队需要满足如下几个条件： \n\n- 一座城市可以驻扎一支军队，也可以不驻扎军队。   \n- 由道路直接连接的两座城市中至少要有一座城市驻扎军队。   \n- 在城市里驻扎军队会产生花费，在编号为 $i$ 的城市中驻扎军队的花费是 $p_i$。      \n\n小 Z 很快就规划出了一种驻扎军队的方案，使总花费最小。但是国王又给小 Z 提出了 $m$ 个要求，每个要求规定了其中两座城市是否驻扎军队。小 Z 需要针对每个要求逐一给出回答。具体而言，如果国王提出的第 $j$ 个要求能够满足上述驻扎条件（不需要考虑第 $j$ 个要求之外的其它要求），则需要给出在此要求前提下驻扎军队的最小开销。如果国王提出的第 $j$ 个要求无法满足，则需要输出 $-1$。现在请你来帮助小 Z。 ", "inputFormat": "第一行有两个整数和一个字符串，依次表示城市数 $n$，要求数 $m$ 和数据类型 $type$。$type$ 是一个由大写字母 `A`，`B` 或 `C` 和一个数字 `1`，`2`，`3` 组成的字符串。它可以帮助你获得部分分。你可能不需要用到这个参数。这个参数的含义在【数据规模与约定】中 有具体的描述。\n\n第二行有 $n$ 个整数，第 $i$ 个整数表示编号 $i$ 的城市中驻扎军队的花费 $p_i$。\n\n接下来 $(n - 1)$ 行，每行两个整数 $u,v$，表示有一条 $u$ 到 $v$ 的双向道路。 \n\n接下来 $m$ 行，每行四个整数 $a, x, b, y$，表示一个要求是在城市 $a$ 驻扎 $x$ 支军队，在城市 $b$ 驻扎 $y$ 支军队。其中，$x,y$ 的取值只有 $0$ 或 $1$：\n- 若 $x$ 为 $0$，表示城市 $a$ 不得驻扎军队。\n- 若 $x$ 为 $1$，表示城市 $a$ 必须驻扎军队。\n- 若 $y$ 为 $0$，表示城市 $b$ 不得驻扎军队。\n- 若 $y$ 为 $1$，表示城市 $b$ 必须驻扎军队。    \n\n输入文件中每一行相邻的两个数据之间均用一个空格分隔。 ", "outputFormat": "输出共 $m$ 行，每行包含一个个整数，第 $j$ 行表示在满足国王第 $j$ 个要求时的最小开销， 如果无法满足国王的第 $j$ 个要求，则该行输出 $-1$。 ", "hint": "#### 样例 1 解释\n\n- 对于第一个要求，在 $4$ 号和 $5$ 号城市驻扎军队时开销最小。\n- 对于第二个要求，在 $1$ 号、$2$ 号、$3$ 号城市驻扎军队时开销最小。   \n- 第三个要求是无法满足的，因为在 $1$ 号、$5$ 号城市都不驻扎军队就意味着由道路直接连 接的两座城市中都没有驻扎军队。  \n\n#### 数据规模与约定  \n\n| 测试点编号 | $\\text{type}$ | $n = m=$ |\n|:-:|:-:|:-:|\n| $1,2$ | `A3` | $10$ |\n| $3,4$ | `C3` | $10$ |\n| $5,6$ | `A3` | $100$ |\n| $7$ | `C3` | $100$ |\n| $8,9$ | `A3` | $2\\times 10^3$ |\n| $10,11$ | `C3` | $2\\times 10^3$ |\n| $12,13$ | `A1` | $10^5$ |\n| $14, 15, 16$ | `A2` | $10^5$ |\n| $17$ | `A3` | $10^5$ |\n| $18,19$ | `B1` | $10^5$ |\n| $20,21$ | `C1` | $10^5$ |\n| $22$ | `C2` | $10^5$ |\n| $23, 24, 25$ | `C3` | $10^5$ |\n\n数据类型的含义：   \n\n- `A`：城市 $i$ 与城市 $i + 1$ 直接相连。    \n- `B`：任意城市与城市 $1$ 的距离不超过 $100$（距离定义为最短路径上边的数量），即如果这 棵树以 $1$ 号城市为根，深度不超过 $100$。   \n- `C`：在树的形态上无特殊约束。   \n- `1`：询问时保证 $a = 1,x = 1$，即要求在城市 $1$ 驻军。对 $b,y$ 没有限制。   \n- `2`：询问时保证 $a,b$ 是相邻的（由一条道路直接连通）  \n- `3`：在询问上无特殊约束。\n\n对于 $100\\%$的数据，保证 $1 \\leq n,m ≤ 10^5$，$1 ≤ p_i ≤ 10^5$，$1 \\leq u, v, a, b \\leq n$，$a \\neq b$，$x, y \\in \\{0, 1\\}$。", "locale": "zh-CN"}}}
{"pid": "P5025", "type": "P", "difficulty": 6, "samples": [["4\n1 1\n5 1\n6 5\n15 15", "32"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2017", "线段树", "各省省选", "陕西", "强连通分量"], "title": "[SNOI2017] 炸弹", "background": "", "description": "在一条直线上有 $n$ 个炸弹，每个炸弹的坐标是 $ x_i $，爆炸半径是 $ r_i $，当一个炸弹爆炸时，如果另一个炸弹所在位置 $ x_j $ 满足： \n$ |x_j-x_i| \\le r_i $ ，那么，该炸弹也会被引爆。    \n现在，请你帮忙计算一下，先把第 $i$ 个炸弹引爆，将引爆多少个炸弹呢？ \n\n答案对 $10^9 + 7$ 取模", "inputFormat": "第一行，一个数字 $n$ ，表示炸弹个数。 \n第 $2 \\sim n+1$ 行，每行两个整数，表示 $x_i$，$r_i$，保证 $x_i$ 严格递增。", "outputFormat": "一个数字，表示 $\\sum \\limits_{i=1}^n i\\times$ 炸弹 $i$ 能引爆的炸弹个数。", "hint": "【数据范围】  \n对于  $20\\%$ 的数据： $n\\leq 100$。\n\n对于  $50\\%$ 的数据： $n\\leq 1000$。\n\n对于  $80\\%$ 的数据： $n\\leq 100000$。\n\n对于  $100\\%$ 的数据： $1\\le n\\leq 500000$，$-10^{18}\\leq x_{i}\\leq 10^{18}$，$0\\leq r_{i}\\leq 2\\times 10^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "[SNOI2017] Bombs", "background": "", "description": "There are $n$ bombs on a straight line. The coordinate of each bomb is $x_i$, and its explosion radius is $r_i$. When a bomb explodes, if the position $x_j$ of another bomb satisfies:  \n$|x_j-x_i| \\le r_i$, then that bomb will also be detonated.\n\nNow, please help compute: if we detonate bomb $i$ first, how many bombs will be detonated in total?\n\nThe answer should be taken modulo $10^9 + 7$.", "inputFormat": "The first line contains an integer $n$, representing the number of bombs.  \nLines $2 \\sim n+1$ each contain two integers, representing $x_i$ and $r_i$. It is guaranteed that $x_i$ is strictly increasing.", "outputFormat": "Output one integer, representing $\\sum \\limits_{i=1}^n i\\times$ the number of bombs that bomb $i$ can detonate.", "hint": "Constraints  \nFor $20\\%$ of the testdata: $n\\leq 100$.  \n\nFor $50\\%$ of the testdata: $n\\leq 1000$.  \n\nFor $80\\%$ of the testdata: $n\\leq 100000$.  \n\nFor $100\\%$ of the testdata: $1\\le n\\leq 500000$, $-10^{18}\\leq x_{i}\\leq 10^{18}$, $0\\leq r_{i}\\leq 2\\times 10^{18}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SNOI2017] 炸弹", "background": "", "description": "在一条直线上有 $n$ 个炸弹，每个炸弹的坐标是 $ x_i $，爆炸半径是 $ r_i $，当一个炸弹爆炸时，如果另一个炸弹所在位置 $ x_j $ 满足： \n$ |x_j-x_i| \\le r_i $ ，那么，该炸弹也会被引爆。    \n现在，请你帮忙计算一下，先把第 $i$ 个炸弹引爆，将引爆多少个炸弹呢？ \n\n答案对 $10^9 + 7$ 取模", "inputFormat": "第一行，一个数字 $n$ ，表示炸弹个数。 \n第 $2 \\sim n+1$ 行，每行两个整数，表示 $x_i$，$r_i$，保证 $x_i$ 严格递增。", "outputFormat": "一个数字，表示 $\\sum \\limits_{i=1}^n i\\times$ 炸弹 $i$ 能引爆的炸弹个数。", "hint": "【数据范围】  \n对于  $20\\%$ 的数据： $n\\leq 100$。\n\n对于  $50\\%$ 的数据： $n\\leq 1000$。\n\n对于  $80\\%$ 的数据： $n\\leq 100000$。\n\n对于  $100\\%$ 的数据： $1\\le n\\leq 500000$，$-10^{18}\\leq x_{i}\\leq 10^{18}$，$0\\leq r_{i}\\leq 2\\times 10^{18}$。", "locale": "zh-CN"}}}
