{"pid": "P1844", "type": "P", "difficulty": 4, "samples": [["10 4 \n1\n2 1 4 2 5 \n3 \n1 2 4 \n7 \n3 2 2 1 3 3 2 \n9 \n1 4 2 ", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["NOI 导刊"], "title": "阅览室", "background": "", "description": "一个阅览室每天都要接待大批读者。阅览室开门时间是 $O$，关门时间是 $T$。每位读者的到达时间都不一样，并且想要阅读的刊物不超过 $5$ 本。\n\n每位读者心里对自己想看的刊物都有一个排位，到达之后他会先去找自己最想看的刊物，如果找不到则去找其次想看的刊物。如果找不到任何他想看的刊物，他会开始等待，直到有一本以上的他想看的刊物被人放回原处。当然，他会先去拿其中自己最想看的刊物。当他看完某一本刊物后，就把它放回原处，接着去找自己没看过的最想看的刊物。如此下去，直到看完所有他想看的刊物为止。\n\n矛盾出现在两个人同时想要拿同一本刊物的时候。阅览室为了避免读者之间出现争执，作了一个规定，读者每次在开始等待时先去服务台做一次登记。如果两个人都同时想要一本刊物，那么先登记的读者将得到这本刊物。如果两个人同时登记，那么先到达阅览室的读者将得到刊物。没得到的人就只能去找其他的刊物看。\n\n阅览室关门时，所有读者都将被强迫离开阅览室，不再允许继续阅读。\n\n现在阅览室想做一个统计调查，你被要求写一个程序来模拟这个过程计算出所有刊物被阅读的总次数。当某个读者开始阅读某本刊物时，该刊物的被阅读次数就加 $1$，无论这本刊物最后有没有被读完。", "inputFormat": "输入包含多组测试数据。\n\n每个测试数据开头是两个整数 $T$ 和 $n\\ (1 \\le n \\le 100)$，分别表示图书馆关门时间和读者总数。接下来按照读者的到达时间先后依次给出了每位读者的具体描述。\n\n每个读者描述开头是一个整数 $t\\ (0 \\le t<T)$，表示该读者到达时间。接下来一行开头是一个整数 $k\\ (1 \\le k \\le 5)$，表示该读者想要看的刊物数目。之后跟着 $2k$ 个整数按照读者想要阅读的刊物的顺序依次给出了刊物的描述。其中第 $2i-1$ 个整数表示刊物的编号 $s\\ (0 \\le s<1000)$，第 $2i$ 个整数表示该读者读完这本刊物所需的时间。", "outputFormat": "对于每个测试数据，在单独一行里输出所有刊物被阅读的总次数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Reading Room", "background": "", "description": "A reading room receives a large number of readers every day. The opening time is $O$, and the closing time is $T$. Each reader arrives at a different time and wants to read at most $5$ publications.\n\nEach reader has an internal ranking of the publications they want to read. Upon arrival, the reader first looks for their most desired publication; if it is unavailable, they will look for the next one in their preference order. If none of their desired publications are available, they will start waiting until at least one of their desired publications is returned to its place. Of course, among the available ones, the reader will first take the publication they want the most. After finishing reading a publication, the reader returns it to its place and then looks for the most desired publication they have not yet read. This continues until they have finished all the publications they want to read.\n\nConflicts arise when two people want to take the same publication at the same time. To avoid disputes, the reading room has a rule: each time a reader begins waiting, they must first register once at the service desk. If two people want the same publication at the same time, the reader who registered earlier gets the publication. If both registered at the same time, the reader who arrived at the reading room earlier gets it. The one who does not get it can only go look for other publications to read.\n\nWhen the reading room closes, all readers are forced to leave and are no longer allowed to continue reading.\n\nThe reading room wants to conduct a statistical survey. You are required to write a program to simulate this process and compute the total number of times all publications were read. Whenever a reader starts reading a publication, the count for that publication increases by $1$, regardless of whether it is eventually finished.", "inputFormat": "The input contains multiple test cases.\n\nEach test case begins with two integers $T$ and $n$ ($1 \\le n \\le 100$), representing the closing time of the reading room and the total number of readers, respectively. Next, the detailed descriptions of all readers are given in the order of their arrival times.\n\nEach reader’s description begins with an integer $t$ ($0 \\le t < T$), indicating the reader’s arrival time. The next line begins with an integer $k$ ($1 \\le k \\le 5$), indicating the number of publications the reader wants to read. It is followed by $2k$ integers given in the order of the reader’s preferences. For each $i$, the $(2i-1)$-th integer is the publication ID $s$ ($0 \\le s < 1000$), and the $2i$-th integer is the time required for the reader to finish that publication.", "outputFormat": "For each test case, output on a separate line the total number of times all publications were read.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "阅览室", "background": "", "description": "一个阅览室每天都要接待大批读者。阅览室开门时间是 $O$，关门时间是 $T$。每位读者的到达时间都不一样，并且想要阅读的刊物不超过 $5$ 本。\n\n每位读者心里对自己想看的刊物都有一个排位，到达之后他会先去找自己最想看的刊物，如果找不到则去找其次想看的刊物。如果找不到任何他想看的刊物，他会开始等待，直到有一本以上的他想看的刊物被人放回原处。当然，他会先去拿其中自己最想看的刊物。当他看完某一本刊物后，就把它放回原处，接着去找自己没看过的最想看的刊物。如此下去，直到看完所有他想看的刊物为止。\n\n矛盾出现在两个人同时想要拿同一本刊物的时候。阅览室为了避免读者之间出现争执，作了一个规定，读者每次在开始等待时先去服务台做一次登记。如果两个人都同时想要一本刊物，那么先登记的读者将得到这本刊物。如果两个人同时登记，那么先到达阅览室的读者将得到刊物。没得到的人就只能去找其他的刊物看。\n\n阅览室关门时，所有读者都将被强迫离开阅览室，不再允许继续阅读。\n\n现在阅览室想做一个统计调查，你被要求写一个程序来模拟这个过程计算出所有刊物被阅读的总次数。当某个读者开始阅读某本刊物时，该刊物的被阅读次数就加 $1$，无论这本刊物最后有没有被读完。", "inputFormat": "输入包含多组测试数据。\n\n每个测试数据开头是两个整数 $T$ 和 $n\\ (1 \\le n \\le 100)$，分别表示图书馆关门时间和读者总数。接下来按照读者的到达时间先后依次给出了每位读者的具体描述。\n\n每个读者描述开头是一个整数 $t\\ (0 \\le t<T)$，表示该读者到达时间。接下来一行开头是一个整数 $k\\ (1 \\le k \\le 5)$，表示该读者想要看的刊物数目。之后跟着 $2k$ 个整数按照读者想要阅读的刊物的顺序依次给出了刊物的描述。其中第 $2i-1$ 个整数表示刊物的编号 $s\\ (0 \\le s<1000)$，第 $2i$ 个整数表示该读者读完这本刊物所需的时间。", "outputFormat": "对于每个测试数据，在单独一行里输出所有刊物被阅读的总次数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1845", "type": "P", "difficulty": 3, "samples": [["10 \n0000000000 \n0011110000 \n0000010000 \n0011111000 \n0010110100 \n0010010110 \n0011110010 \n0100010010 \n0100000110 \n0100000000 ", "3 \n3 \n7 \n12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["NOI 导刊", "广度优先搜索 BFS"], "title": "影像之结构化特征", "background": "", "description": "在影像比对中，有一种方法是利用影像中的边缘（edge）信息，计算每个边缘资讯中具有代表性的结构化特征，以作为比对两张影像是否相似的判断标准。Water-filling 方法是从每个边缘图的一个端点开始，绕着相连的边缘点走并依序编号。若走到某一步时，遇到一个以上不同的连接点，则分成不同路径同时继续走，直到没有任何连接点为止。如果一个点和另一个点为上下左右相邻，就称为连接。\n\n例如，在图 $1$ 的影像中包含三个边缘图，每个边缘图由一些互相连接的边缘点构成。图中以黑色的方块代表边缘点，白色的方块代表背景。在 Water-filling 方法中，首先，从第一行（row）开始，由左至右，由上至下，先找到第一个黑点并编号为 $1$。接着，找 $1$ 的下一个尚未编号的连接点并编号为 $2$。依此方法继续往下一个点前进依次编号。在编号 $6$ 的点之后有两个尚未编号的连接点，此时，则分为两条路线，并同时编号为 $7$ 继续往下走。当走到没有任何的相连点时，则结束现有边缘图的编号，并继续对影像中的其它边缘图编号。走完图 $1$ 所有边缘图后所得到的编号如图 $2$ 所示。所以，走完这三个边缘图所需要的步数分别为 $12$、 $7$ 及 $3$；所以，$12$、$7$ 及 $3$ 可以作为代表此张影像的结构化特征。请注意：位于斜对角上的两点不能算做连接，如：\n\n![](https://cdn.luogu.com.cn/upload/pic/704.png)\n\n请写一个程序计算每个影像中，以 Water-filling 方法走完其中所有的边缘图后，将每个边缘图需走的步数依走访的顺序列出。", "inputFormat": "输入文件包含一个正方形的影像。每组影像以图的宽度 $n$ 开头 $(1 \\le n \\le 1000)$。接下来的 $n$ 行代表影像的内容：$0$ 表示背景的白点，$1$ 表示黑色的边缘点。", "outputFormat": "对每一个输入的影像，以 Water-filling 方法走完所有的边缘图后，先印出此张影像中共有几个边缘图。接着，将每个边缘图需走的步数按升序列出。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Structural Features of an Image", "background": "", "description": "In image matching, one approach is to use edge information in the image and compute representative structural features for each piece of edge information to judge whether two images are similar. The Water-filling method starts from one endpoint of each edge component, walks along connected edge points, and numbers them in order. If, at some step, there is more than one different next connection point, the process splits into different paths and continues simultaneously until there are no connection points left. Two points are considered connected if they are adjacent up, down, left, or right.\n\nFor example, in the image of Figure $1$, there are three edge components, each composed of mutually connected edge points. Black squares represent edge points and white squares represent the background. In the Water-filling method, first, starting from the first row, scanning left to right and top to bottom, find the first black point and label it $1$. Next, find the next unnumbered connection point of $1$ and label it $2$. Continue to the next point and number sequentially. After point $6$, there are two unnumbered connection points; at this moment, split into two routes and number both as $7$, then continue. When there are no connected points left, end the numbering of the current edge component and continue numbering the other edge components in the image. The numbering obtained after traversing all edge components in Figure $1$ is shown in Figure $2$. Therefore, the numbers of steps required to complete these three edge components are $12$, $7$, and $3$; thus, $12$, $7$, and $3$ can serve as structural features representing this image. Note: Two points on a diagonal are not considered connected, as shown below.\n\n![](https://cdn.luogu.com.cn/upload/pic/704.png)\n\nPlease write a program that, for each image, applies the Water-filling method to traverse all edge components and lists the number of steps needed for each edge component in the visitation order.", "inputFormat": "The input contains one or more square images. Each image begins with its width $n$ $(1 \\le n \\le 1000)$. The next $n$ lines describe the image: $0$ denotes a white background point, and $1$ denotes a black edge point. Input ends at EOF.", "outputFormat": "For each input image, after applying the Water-filling method to traverse all edge components, first print how many edge components the image contains. Then list the number of steps required for each edge component in the visitation order.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "影像之结构化特征", "background": "", "description": "在影像比对中，有一种方法是利用影像中的边缘（edge）信息，计算每个边缘资讯中具有代表性的结构化特征，以作为比对两张影像是否相似的判断标准。Water-filling 方法是从每个边缘图的一个端点开始，绕着相连的边缘点走并依序编号。若走到某一步时，遇到一个以上不同的连接点，则分成不同路径同时继续走，直到没有任何连接点为止。如果一个点和另一个点为上下左右相邻，就称为连接。\n\n例如，在图 $1$ 的影像中包含三个边缘图，每个边缘图由一些互相连接的边缘点构成。图中以黑色的方块代表边缘点，白色的方块代表背景。在 Water-filling 方法中，首先，从第一行（row）开始，由左至右，由上至下，先找到第一个黑点并编号为 $1$。接着，找 $1$ 的下一个尚未编号的连接点并编号为 $2$。依此方法继续往下一个点前进依次编号。在编号 $6$ 的点之后有两个尚未编号的连接点，此时，则分为两条路线，并同时编号为 $7$ 继续往下走。当走到没有任何的相连点时，则结束现有边缘图的编号，并继续对影像中的其它边缘图编号。走完图 $1$ 所有边缘图后所得到的编号如图 $2$ 所示。所以，走完这三个边缘图所需要的步数分别为 $12$、 $7$ 及 $3$；所以，$12$、$7$ 及 $3$ 可以作为代表此张影像的结构化特征。请注意：位于斜对角上的两点不能算做连接，如：\n\n![](https://cdn.luogu.com.cn/upload/pic/704.png)\n\n请写一个程序计算每个影像中，以 Water-filling 方法走完其中所有的边缘图后，将每个边缘图需走的步数依走访的顺序列出。", "inputFormat": "输入文件包含一个正方形的影像。每组影像以图的宽度 $n$ 开头 $(1 \\le n \\le 1000)$。接下来的 $n$ 行代表影像的内容：$0$ 表示背景的白点，$1$ 表示黑色的边缘点。", "outputFormat": "对每一个输入的影像，以 Water-filling 方法走完所有的边缘图后，先印出此张影像中共有几个边缘图。接着，将每个边缘图需走的步数按升序列出。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1846", "type": "P", "difficulty": 5, "samples": [["3 2\n1 2 3 \n1 2 ", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "贪心", "NOI 导刊", "动态规划优化", "前缀和"], "title": "游戏", "background": "", "description": "给定两个正整数数列，你要用它们来做一个游戏：你需要对数列进行若干次操作，每一次操作，应选择两个正整数 $k_1$ 和 $k_2$，并删除第一个数列的最后 $k_1$ 个数，计算出它们的和 $s_1$；删除第二个数列的最后 $k_2$ 个数，计算出它们的和 $s_2$。这一次操作的得分就是 $(s_2-k_2)\\times(s_1-k_1)$。两个数列应同时被清空，不允许一个数列空了，而另一个数列中还有数。游戏的总得分就是每一次操作的得分总和。\n\n求最小的总得分。", "inputFormat": "第一行是两个整数 $n$ 和 $m$，分别表示第一个数列和第二个数列的初始长度。\n\n第二行有 $n$ 个正整数，是第一个数列的数。\n\n第三行有 $m$ 个正整数，是第二个数列的数。\n\n数列中的数都不超过 $1000$。", "outputFormat": "一个整数，表示最小的总得分。\n", "hint": "- 对于 $20\\%$ 的数据，$n,m\\le20$；\n- 对于 $40\\%$ 的数据，$n,m\\le200$；\n- 对于 $100\\%$ 的数据，$n,m\\le2000$。", "locale": "zh-CN", "translations": {"en": {"title": "Game", "background": "", "description": "Given two sequences of positive integers, you will play a game with them: you need to perform several operations. In each operation, choose two positive integers $k_1$ and $k_2$, remove the last $k_1$ numbers of the first sequence and compute their sum $s_1$; remove the last $k_2$ numbers of the second sequence and compute their sum $s_2$. The score of this operation is $(s_2-k_2)\\times(s_1-k_1)$. Both sequences must become empty at the same time; it is not allowed for one sequence to be empty while the other still contains numbers. The total score of the game is the sum of the scores of all operations.\n\nFind the minimum possible total score.", "inputFormat": "The first line contains two integers $n$ and $m$, the initial lengths of the first and second sequences, respectively.\n\nThe second line contains $n$ positive integers, the numbers of the first sequence.\n\nThe third line contains $m$ positive integers, the numbers of the second sequence.\n\nAll numbers in the sequences are at most $1000$.", "outputFormat": "Output a single integer, the minimum total score.", "hint": "- For $20\\%$ of the testdata, $n, m \\le 20$.\n- For $40\\%$ of the testdata, $n, m \\le 200$.\n- For $100\\%$ of the testdata, $n, m \\le 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "游戏", "background": "", "description": "给定两个正整数数列，你要用它们来做一个游戏：你需要对数列进行若干次操作，每一次操作，应选择两个正整数 $k_1$ 和 $k_2$，并删除第一个数列的最后 $k_1$ 个数，计算出它们的和 $s_1$；删除第二个数列的最后 $k_2$ 个数，计算出它们的和 $s_2$。这一次操作的得分就是 $(s_2-k_2)\\times(s_1-k_1)$。两个数列应同时被清空，不允许一个数列空了，而另一个数列中还有数。游戏的总得分就是每一次操作的得分总和。\n\n求最小的总得分。", "inputFormat": "第一行是两个整数 $n$ 和 $m$，分别表示第一个数列和第二个数列的初始长度。\n\n第二行有 $n$ 个正整数，是第一个数列的数。\n\n第三行有 $m$ 个正整数，是第二个数列的数。\n\n数列中的数都不超过 $1000$。", "outputFormat": "一个整数，表示最小的总得分。\n", "hint": "- 对于 $20\\%$ 的数据，$n,m\\le20$；\n- 对于 $40\\%$ 的数据，$n,m\\le200$；\n- 对于 $100\\%$ 的数据，$n,m\\le2000$。", "locale": "zh-CN"}}}
{"pid": "P1847", "type": "P", "difficulty": 2, "samples": [["1 1 \n1 1 10 10\n11 11", "NO"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000]}, "tags": ["模拟", "洛谷原创"], "title": "轰炸II", "background": null, "description": "一个城市遭到了 $M$ 次轰炸，每次都炸了一个每条边都与边界平行的矩形。\n\n在轰炸后，有 $N$ 个关键点，指挥官想知道，它们有没有受到过轰炸，如果有，被炸了几次，最后一次是第几轮。", "inputFormat": "第一行，两个整数：$M,N$。\n\n以下 $M$ 行，每行四个整数：$x_1$、$y_1$、$x_2$、$y_2$，表示被轰炸的矩形的左上角坐标和右下角坐标（比如`1 3 7 10`就表示被轰炸的地方是从$(1,3)$到$(7,10)$ 的矩形）。\n\n再以下 $N$ 行，每行两个整数，表示这个关键点的坐标。", "outputFormat": "共 $N$ 行，\n\n每行第一个字符为 `YES` 或 `NO`，表示是否被轰炸，若为 `YES`，在一个空格后为两个整数，表示被炸了几次和最后一次是第几轮。", "hint": "$1 \\le N,M\\le 2000$\n\n$1\\le x_1,y_1,x_2,y_2\\le 2^{32}-1$", "locale": "zh-CN", "translations": {"en": {"title": "Bombing II", "background": "", "description": "A city has been bombed $M$ times. Each time, the bombed area is a rectangle whose sides are parallel to the axes.\n\nAfter the bombings, there are $N$ key points. The commander wants to know whether each point has ever been bombed; if so, how many times it was bombed, and in which round it was last bombed.", "inputFormat": "The first line contains two integers: $M, N$.\n\nEach of the next $M$ lines contains four integers: $x_1$, $y_1$, $x_2$, $y_2$, representing the top-left and bottom-right coordinates of the bombed rectangle (for example, `1 3 7 10` means the bombed area is the rectangle from $(1,3)$ to $(7,10)$).\n\nThen the next $N$ lines each contain two integers, representing the coordinates of a key point.", "outputFormat": "Output $N$ lines.\n\nIn each line, the first token is `YES` or `NO`, indicating whether the point was bombed. If it is `YES`, after a space output two integers: the number of times it was bombed, and the round number of the last bombing.", "hint": "$1 \\le N, M \\le 2000$\n\n$1 \\le x_1, y_1, x_2, y_2 \\le 2^{32} - 1$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "轰炸II", "background": null, "description": "一个城市遭到了 $M$ 次轰炸，每次都炸了一个每条边都与边界平行的矩形。\n\n在轰炸后，有 $N$ 个关键点，指挥官想知道，它们有没有受到过轰炸，如果有，被炸了几次，最后一次是第几轮。", "inputFormat": "第一行，两个整数：$M,N$。\n\n以下 $M$ 行，每行四个整数：$x_1$、$y_1$、$x_2$、$y_2$，表示被轰炸的矩形的左上角坐标和右下角坐标（比如`1 3 7 10`就表示被轰炸的地方是从$(1,3)$到$(7,10)$ 的矩形）。\n\n再以下 $N$ 行，每行两个整数，表示这个关键点的坐标。", "outputFormat": "共 $N$ 行，\n\n每行第一个字符为 `YES` 或 `NO`，表示是否被轰炸，若为 `YES`，在一个空格后为两个整数，表示被炸了几次和最后一次是第几轮。", "hint": "$1 \\le N,M\\le 2000$\n\n$1\\le x_1,y_1,x_2,y_2\\le 2^{32}-1$", "locale": "zh-CN"}}}
{"pid": "P1848", "type": "P", "difficulty": 6, "samples": [["5 10\n5 7\n9 2\n8 5\n13 2\n3 8", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2012", "线段树", "二分", "USACO", "平衡树"], "title": "[USACO12OPEN] Bookshelf G", "background": "", "description": "When Farmer John isn't milking cows, stacking haybales, lining up his cows, or building fences, he enjoys sitting down with a good book.  Over the years, he has collected N books (1 <= N <= 100,000), and he wants to build a new set of bookshelves to hold them all.\n\nEach book i has a width W(i) and height H(i).  The books need to be added to a set of shelves in order; for example, the first shelf should contain books 1...k for some k, the second shelf should start with book k+1, and so on.  Each shelf can have a total width of at most L (1 <= L <= 1,000,000,000).  The height of a shelf is equal to the height of the tallest book on that shelf, and the height of the entire set of bookshelves is the sum of the heights of all the individual shelves, since they are all stacked vertically.\n\nPlease help FJ compute the minimum possible height for the entire set of bookshelves.", "inputFormat": "Line 1: Two space-separated integers: N and L.\nLines 2..1+N: Line i+1 contains two space-separated integers: H(i) and W(i). (1 <= H(i) <= 1,000,000; 1 <= W(i) <= L).", "outputFormat": "Line 1: The minimum possible total height for the set of bookshelves.", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO12OPEN] Bookshelf G", "background": "", "description": "When Farmer John isn't milking cows, stacking haybales, lining up his cows, or building fences, he enjoys sitting down with a good book.  Over the years, he has collected N books (1 <= N <= 100,000), and he wants to build a new set of bookshelves to hold them all.\n\nEach book i has a width W(i) and height H(i).  The books need to be added to a set of shelves in order; for example, the first shelf should contain books 1...k for some k, the second shelf should start with book k+1, and so on.  Each shelf can have a total width of at most L (1 <= L <= 1,000,000,000).  The height of a shelf is equal to the height of the tallest book on that shelf, and the height of the entire set of bookshelves is the sum of the heights of all the individual shelves, since they are all stacked vertically.\n\nPlease help FJ compute the minimum possible height for the entire set of bookshelves.", "inputFormat": "Line 1: Two space-separated integers: N and L.\nLines 2..1+N: Line i+1 contains two space-separated integers: H(i) and W(i). (1 <= H(i) <= 1,000,000; 1 <= W(i) <= L).", "outputFormat": "Line 1: The minimum possible total height for the set of bookshelves.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO12OPEN] Bookshelf G", "background": null, "description": "当农夫约翰不在挤牛奶、堆干草、排列他的奶牛或建造围栏时，他喜欢坐下来读一本好书。多年来，他已经收集了 $N$ 本书（$1 \\leq N \\leq 100,000$），他想建一个新的书架来放置这些书。\n\n每本书 $i$ 有一个宽度 $W(i)$ 和高度 $H(i)$。这些书需要按顺序放到一组书架上；例如，第一个书架应包含书 1 到 $k$，第二个书架应从书 $k+1$ 开始，依此类推。每个书架的总宽度最多为 $L$（$1 \\leq L \\leq 1,000,000,000$）。书架的高度等于该书架上最高的书的高度，而整个书架组的高度是所有单个书架高度的总和，因为它们都是垂直堆叠的。\n\n请帮助 FJ 计算整个书架组的最小可能高度。", "inputFormat": "第一行：两个数 $N$ 和 $L$。\n\n接下来 $N$ 行每行两个数 $H_i$ 和 $W_i$。$(1 \\le H(i) \\le 1,000,000;1 \\le W(i) \\le L)$.", "outputFormat": "一个数，书架高度的最小值。", "hint": "（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P1849", "type": "P", "difficulty": 4, "samples": [["7 6 3 \n6 2 \n5 2 \n4 3 \n2 1 \n7 3 \n5 4 \n6 4 ", "1 "]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "贪心", "2012", "USACO", "枚举", "广度优先搜索 BFS", "队列"], "title": "[USACO12MAR] Tractor S", "background": "", "description": "经过一天漫长的工作，农场主 John 完全忘记了他的拖拉机还在场地中央。他的奶牛们总喜欢和他搞些恶作剧，它们在场地的不同位置丢下 $n$ 堆干草。这样 John 就必须先移走一些干草堆才能将拖拉机开走。\n\n拖拉机和干草堆都可以看作是二维平面上的点，它们的坐标都是整数，没有哪堆干草的坐标和拖拉机的初始坐标一致。John 驾驶拖拉机只能沿着坐标轴的方向移动若干单位长度，比如说，他可以先朝北移动 $2$ 个单位长度，再向东移动 $3$ 个单位长度等等。拖拉机不能移动到干草堆所占据的点。\n\n请你帮助 John 计算一下，最少要移动多少堆干草才能将拖拉机开回坐标原点。", "inputFormat": "输入的第一行是三个用空格隔开的整数，依次代表干草的堆数 $n$ 和拖拉机的起始坐标 $(x_0, y_0)$。\n\n第 $2$ 行到第 $(n+1)$ 行，每行有两个用空格隔开的整数，第 $(i + 1)$ 行的整数 $x_i, y_i$ 代表第 $i$ 堆干草的坐标为 $(x_i, y_i)$。", "outputFormat": "一行一个整数，表示最少要移动多少堆干草 John 才能将拖拉机开回坐标原点。", "hint": "对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 5 \\times 10^4$，$1 \\leq x_i, y_i \\leq 10^3$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO12MAR] Tractor S", "background": "", "description": "After a long day of work, Farmer John completely forgot that his tractor was still in the middle of the field. His cows, who love to play pranks on him, dropped $n$ hay bales at various positions in the field. This means John must move some hay bales out of the way before he can drive the tractor out.\n\nBoth the tractor and the hay bales are treated as points on a two-dimensional plane with integer coordinates. No hay bale shares the same coordinates as the tractor’s initial position. John can drive the tractor only along the coordinate axes for some number of units. For example, he can first move north by $2$ units and then east by $3$ units, and so on. The tractor cannot move onto a point occupied by a hay bale.\n\nPlease help John compute the minimum number of hay bales that must be moved so that he can drive the tractor back to the origin.", "inputFormat": "The first line contains three space-separated integers, giving the number of hay bales $n$ and the tractor’s starting coordinates $(x_0, y_0)$.\n\nLines $2$ through $(n+1)$: each line contains two space-separated integers. On line $(i + 1)$, the integers $x_i, y_i$ give the coordinates of the $i$-th hay bale $(x_i, y_i)$.", "outputFormat": "Output a single integer on one line: the minimum number of hay bales that must be moved so John can drive the tractor back to the origin.", "hint": "For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 5 \\times 10^4$, $1 \\leq x_i, y_i \\leq 10^3$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO12MAR] Tractor S", "background": "", "description": "经过一天漫长的工作，农场主 John 完全忘记了他的拖拉机还在场地中央。他的奶牛们总喜欢和他搞些恶作剧，它们在场地的不同位置丢下 $n$ 堆干草。这样 John 就必须先移走一些干草堆才能将拖拉机开走。\n\n拖拉机和干草堆都可以看作是二维平面上的点，它们的坐标都是整数，没有哪堆干草的坐标和拖拉机的初始坐标一致。John 驾驶拖拉机只能沿着坐标轴的方向移动若干单位长度，比如说，他可以先朝北移动 $2$ 个单位长度，再向东移动 $3$ 个单位长度等等。拖拉机不能移动到干草堆所占据的点。\n\n请你帮助 John 计算一下，最少要移动多少堆干草才能将拖拉机开回坐标原点。", "inputFormat": "输入的第一行是三个用空格隔开的整数，依次代表干草的堆数 $n$ 和拖拉机的起始坐标 $(x_0, y_0)$。\n\n第 $2$ 行到第 $(n+1)$ 行，每行有两个用空格隔开的整数，第 $(i + 1)$ 行的整数 $x_i, y_i$ 代表第 $i$ 堆干草的坐标为 $(x_i, y_i)$。", "outputFormat": "一行一个整数，表示最少要移动多少堆干草 John 才能将拖拉机开回坐标原点。", "hint": "对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 5 \\times 10^4$，$1 \\leq x_i, y_i \\leq 10^3$。", "locale": "zh-CN"}}}
{"pid": "P1850", "type": "P", "difficulty": 5, "samples": [["3 2 3 3\n2 1 2\n1 2 1\n0.8 0.2 0.5 \n1 2 5\n1 3 3\n2 3 1\n", "2.80"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2016", "NOIP 提高组", "期望", "Floyd 算法"], "title": "[NOIP 2016 提高组] 换教室", "background": "NOIP2016 提高组 D1T3", "description": "对于刚上大学的牛牛来说，他面临的第一个问题是如何根据实际情况申请合适的课程。\n\n\n在可以选择的课程中，有 $2n$ 节课程安排在 $n$ 个时间段上。在第 $i$（$1 \\leq i \\leq n$）个时间段上，两节内容相同的课程同时在不同的地点进行，其中，牛牛预先被安排在教室 $c_i$ 上课，而另一节课程在教室 $d_i$ 进行。\n\n\n在不提交任何申请的情况下，学生们需要按时间段的顺序依次完成所有的 $n$ 节安排好的课程。如果学生想更换第 $i$ 节课程的教室，则需要提出申请。若申请通过，学生就可以在第 $i$ 个时间段去教室 $d_i$ 上课，否则仍然在教室 $c_i$ 上课。\n\n\n由于更换教室的需求太多，申请不一定能获得通过。通过计算，牛牛发现申请更换第 $i$ 节课程的教室时，申请被通过的概率是一个已知的实数 $k_i$，并且对于不同课程的申请，被通过的概率是互相独立的。\n\n\n学校规定，所有的申请只能在学期开始前一次性提交，并且每个人只能选择至多 $m$ 节课程进行申请。这意味着牛牛必须一次性决定是否申请更换每节课的教室，而不能根据某些课程的申请结果来决定其他课程是否申请；牛牛可以申请自己最希望更换教室的 $m$ 门课程，也可以不用完这 $m$ 个申请的机会，甚至可以一门课程都不申请。\n\n\n因为不同的课程可能会被安排在不同的教室进行，所以牛牛需要利用课间时间从一间教室赶到另一间教室。\n\n\n牛牛所在的大学有 $v$ 个教室，有 $e$ 条道路。每条道路连接两间教室，并且是可以双向通行的。由于道路的长度和拥堵程度不同，通过不同的道路耗费的体力可能会有所不同。 当第 $i$（$1 \\leq i \\leq n-1$）节课结束后，牛牛就会从这节课的教室出发，选择一条耗费体力最少的路径前往下一节课的教室。\n\n\n现在牛牛想知道，申请哪几门课程可以使他因在教室间移动耗费的体力值的总和的期望值最小，请你帮他求出这个最小值。\n", "inputFormat": "第一行四个整数 $n,m,v,e$。$n$ 表示这个学期内的时间段的数量；$m$ 表示牛牛最多可以申请更换多少节课程的教室；$v$ 表示牛牛学校里教室的数量；$e$ 表示牛牛的学校里道路的数量。\n\n\n第二行 $n$ 个正整数，第 $i$（$1 \\leq i \\leq n$）个正整数表示 $c_i$，即第 $i$ 个时间段牛牛被安排上课的教室；保证 $1 \\le c_i \\le v$。\n\n\n第三行 $n$ 个正整数，第 $i$（$1 \\leq i \\leq n$）个正整数表示 $d_i$，即第 $i$ 个时间段另一间上同样课程的教室；保证 $1 \\le d_i \\le v$。\n\n\n第四行 $n$ 个实数，第 $i$（$1 \\leq i \\leq n$）个实数表示 $k_i$，即牛牛申请在第 $i$ 个时间段更换教室获得通过的概率。保证 $0 \\le k_i \\le 1$。\n\n\n接下来 $e$ 行，每行三个正整数 $a_j, b_j, w_j$，表示有一条双向道路连接教室 $a_j, b_j$，通过这条道路需要耗费的体力值是 $w_j$；保证 $1 \\le a_j, b_j \\le v$，$1 \\le w_j \\le 100$。\n\n\n保证 $1 \\leq n \\leq 2000$，$0 \\leq m \\leq 2000$，$1 \\leq v \\leq 300$，$0 \\leq e \\leq 90000$。\n\n\n保证通过学校里的道路，从任何一间教室出发，都能到达其他所有的教室。\n\n\n保证输入的实数最多包含 $3$ 位小数。\n", "outputFormat": "输出一行，包含一个实数，四舍五入精确到小数点后恰好 $2$ 位，表示答案。你的输出必须和标准输出完全一样才算正确。\n\n测试数据保证四舍五入后的答案和准确答案的差的绝对值不大于 $4 \\times 10^{-3}$。（如果你不知道什么是浮点误差，这段话可以理解为：对于大多数的算法，你可以正常地使用浮点数类型而不用对它进行特殊的处理）\n", "hint": "**样例 1 说明**\n\n所有可行的申请方案和期望收益如下：\n\n- 不作申请，耗费的体力值的期望为 $8.0$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     无      |  $1.0$  |  $8$  |\n\n- 申请更换第 $1$ 个时间段的上课教室，耗费的体力值的期望为 $4.8$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $1$      |  $0.8$  |  $4$  |\n|     无      |  $0.2$  |  $8$  |\n\n- 申请更换第 $2$ 个时间段的上课教室，耗费的体力值的期望为 $6.4$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $2$      |  $0.2$  |  $0$  |\n|     无      |  $0.8$  |  $8$  |\n\n- 申请更换第 $3$ 个时间段的上课教室，耗费的体力值的期望为 $6.0$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $3$      |  $0.5$  |  $4$  |\n|     无      |  $0.5$  |  $8$  |\n\n- 申请更换第 $1,2$ 个时间段的上课教室，耗费的体力值的期望为 $4.48$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $1,2$      |  $0.16$  |  $4$  |\n|     $1$      |  $0.64$  |  $4$  |\n|     $2$     |  $0.04$  |  $0$  |\n|     无      |  $0.16$  |  $8$  |\n\n- 申请更换第 $1,3$ 个时间段的上课教室，耗费的体力值的期望为 $2.8$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $1,3$      |  $0.4$  |  $0$  |\n|     $1$      |  $0.4$  |  $4$  |\n|     $3$     |  $0.1$  |  $4$  |\n|     无      |  $0.1$  |  $8$  |\n\n- 申请更换第 $2,3$ 个时间段的上课教室，耗费的体力值的期望为 $5.2$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $2,3$      |  $0.1$  |  $4$  |\n|     $2$      |  $0.1$  |  $0$  |\n|     $3$     |  $0.4$  |  $4$  |\n|     无      |  $0.4$  |  $8$  |\n\n因此，最优方案为：申请更换第 $1,3$ 个时间段的上课教室。耗费的体力值的期望为 $2.8$。 \n\n**提示**\n\n1. 道路中可能会有多条双向道路连接相同的两间教室。 也有可能有道路两端连接的是同一间教室。\n2. 请注意区分 $n,m,v,e$ 的意义, $n$ 不是教室的数量, $m$ 不是道路的数量。\n\n**数据范围与说明**\n\n| 测试点编号 | $n\\le$ | $m\\le$ | $v\\le$ | 是否具有特殊性质 1 | 是否具有特殊性质 2 |\n| :--------: | :----: | :----: | :----: | :----------------: | :----------------: |\n|     1      |  $1$   |  $1$   | $300$  |      $\\times$      |      $\\times$      |\n|     2      |  $2$   |  $0$   |  $20$  |      $\\times$      |      $\\times$      |\n|     3      |  $2$   |  $1$   | $100$  |      $\\times$      |      $\\times$      |\n|     4      |  $2$   |  $2$   | $300$  |      $\\times$      |      $\\times$      |\n|     5      |  $3$   |  $0$   |  $20$  |      $\\surd$       |      $\\surd$       |\n|     6      |  $3$   |  $1$   | $100$  |      $\\surd$       |      $\\times$      |\n|     7      |  $3$   |  $2$   | $300$  |      $\\times$      |      $\\times$      |\n|     8      |  $10$  |  $0$   | $300$  |      $\\surd$       |      $\\surd$       |\n|     9      |  $10$  |  $1$   |  $20$  |      $\\surd$       |      $\\times$      |\n|     10     |  $10$  |  $2$   | $100$  |      $\\times$      |      $\\times$      |\n|     11     |  $10$  |  $10$  | $300$  |      $\\times$      |      $\\surd$       |\n|     12     |  $20$  |  $0$   |  $20$  |      $\\surd$       |      $\\times$      |\n|     13     |  $20$  |  $1$   | $100$  |      $\\times$      |      $\\times$      |\n|     14     |  $20$  |  $2$   | $300$  |      $\\surd$       |      $\\times$      |\n|     15     |  $20$  |  $20$  | $300$  |      $\\times$      |      $\\surd$       |\n|     16     | $300$  |  $0$   |  $20$  |      $\\times$      |      $\\times$      |\n|     17     | $300$  |  $1$   | $100$  |      $\\times$      |      $\\times$      |\n|     18     | $300$  |  $2$   | $300$  |      $\\surd$       |      $\\surd$       |\n|     19     | $300$  | $300$  | $300$  |      $\\times$      |      $\\surd$       |\n|     20     | $2000$ |  $0$   |  $20$  |      $\\times$      |      $\\times$      |\n|     21     | $2000$ |  $1$   |  $20$  |      $\\times$      |      $\\times$      |\n|     22     | $2000$ |  $2$   | $100$  |      $\\times$      |      $\\times$      |\n|     23     | $2000$ | $2000$ | $100$  |      $\\times$      |      $\\times$      |\n|     24     | $2000$ | $2000$ | $300$  |      $\\times$      |      $\\times$      |\n|     25     | $2000$ | $2000$ | $300$  |      $\\times$      |      $\\times$      |\n \n\n特殊性质 1：图上任意不同的两点 $u,v$ 间，存在一条耗费体力最少的路径只包含一条道路。\n\n特殊性质 2：对于所有的 $1≤ i≤ n,\\ k_i= 1$。\n", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2016 Senior] Switching Classrooms", "background": "NOIP 2016 Senior D1T3.", "description": "For Niuniu, who has just entered university, the first problem he faces is how to apply for suitable courses according to the actual situation.\n\nAmong the selectable courses, there are $2n$ classes scheduled across $n$ time slots. In the $i$-th time slot ($1 \\le i \\le n$), two classes with the same content are held simultaneously at different locations. Niuniu is pre-assigned to attend the class in classroom $c_i$, while the other class is in classroom $d_i$.\n\nWithout submitting any applications, students follow the order of time slots to complete all $n$ scheduled classes one by one. If a student wants to switch the classroom for the $i$-th class, they need to submit an application. If the application is approved, the student will attend the class in classroom $d_i$ during the $i$-th time slot; otherwise, they will still attend in classroom $c_i$.\n\nBecause there are too many requests to switch classrooms, an application may not be approved. Through calculation, Niuniu finds that when applying to switch the classroom for the $i$-th class, the probability that the application is approved is a known real number $k_i$, and the approval events for different classes are independent.\n\nThe school stipulates that all applications must be submitted once before the start of the term, and each person may choose to apply for at most $m$ classes. This means that Niuniu must decide all at once whether to apply to switch the classroom for each class, and cannot decide whether to apply for other classes based on the approval results of some classes. Niuniu can apply for the $m$ classes he most wants to switch, he may also use fewer than $m$ application opportunities, or even apply for none.\n\nBecause different classes may be arranged in different classrooms, Niuniu needs to use break time to travel from one classroom to another.\n\nNiuniu’s university has $v$ classrooms and $e$ roads. Each road connects two classrooms and is bidirectional. Because road lengths and congestion vary, the stamina consumed when traversing different roads may differ. After the $i$-th class ends ($1 \\le i \\le n - 1$), Niuniu will depart from the classroom of that class and choose a path with the minimum stamina cost to reach the classroom of the next class.\n\nNow Niuniu wants to know which classes he should apply for so that the expected value of the total stamina cost due to moving between classrooms is minimized. Please help him compute this minimum value.", "inputFormat": "The first line contains four integers $n, m, v, e$. $n$ is the number of time slots in this term; $m$ is the maximum number of classes for which Niuniu may apply to switch classrooms; $v$ is the number of classrooms in the school; $e$ is the number of roads in the school.\n\nThe second line contains $n$ positive integers. The $i$-th ($1 \\le i \\le n$) integer is $c_i$, the classroom where Niuniu is scheduled to attend in the $i$-th time slot. It is guaranteed that $1 \\le c_i \\le v$.\n\nThe third line contains $n$ positive integers. The $i$-th ($1 \\le i \\le n$) integer is $d_i$, the classroom of the other class with the same content in the $i$-th time slot. It is guaranteed that $1 \\le d_i \\le v$.\n\nThe fourth line contains $n$ real numbers. The $i$-th ($1 \\le i \\le n$) real number is $k_i$, the probability that Niuniu’s application to switch the classroom in the $i$-th time slot is approved. It is guaranteed that $0 \\le k_i \\le 1$.\n\nThe next $e$ lines each contain three positive integers $a_j, b_j, w_j$, indicating a bidirectional road connecting classrooms $a_j$ and $b_j$, and traversing this road consumes stamina $w_j$. It is guaranteed that $1 \\le a_j, b_j \\le v$ and $1 \\le w_j \\le 100$.\n\nIt is guaranteed that $1 \\le n \\le 2000$, $0 \\le m \\le 2000$, $1 \\le v \\le 300$, and $0 \\le e \\le 90000$.\n\nIt is guaranteed that using the school’s roads, every classroom is reachable from any other classroom.\n\nIt is guaranteed that each input real number has at most $3$ decimal places.", "outputFormat": "Output one line containing a real number, rounded to exactly $2$ decimal places, which is the answer. Your output must be exactly the same as the standard output to be considered correct.\n\nThe testdata guarantees that the absolute difference between the rounded answer and the exact answer is at most $4 \\times 10^{-3}$. (If you do not know what floating-point error is, you can understand this as: for most algorithms, you can normally use floating-point types without special handling.)", "hint": "Sample 1 explanation.\n\nAll feasible application plans and their expected stamina costs are as follows:\n\n- No application submitted. The expected stamina cost is $8.0$.\n\n| Time slots approved | Probability | Stamina cost |\n| :--------: | :----: | :----: |\n|     None      |  $1.0$  |  $8$  |\n\n- Apply to switch the classroom in the $1$-st time slot. The expected stamina cost is $4.8$.\n\n| Time slots approved | Probability | Stamina cost |\n| :--------: | :----: | :----: |\n|     $1$      |  $0.8$  |  $4$  |\n|     None      |  $0.2$  |  $8$  |\n\n- Apply to switch the classroom in the $2$-nd time slot. The expected stamina cost is $6.4$.\n\n| Time slots approved | Probability | Stamina cost |\n| :--------: | :----: | :----: |\n|     $2$      |  $0.2$  |  $0$  |\n|     None      |  $0.8$  |  $8$  |\n\n- Apply to switch the classroom in the $3$-rd time slot. The expected stamina cost is $6.0$.\n\n| Time slots approved | Probability | Stamina cost |\n| :--------: | :----: | :----: |\n|     $3$      |  $0.5$  |  $4$  |\n|     None      |  $0.5$  |  $8$  |\n\n- Apply to switch the classroom in the $1$-st and $2$-nd time slots. The expected stamina cost is $4.48$.\n\n| Time slots approved | Probability | Stamina cost |\n| :--------: | :----: | :----: |\n|     $1,2$      |  $0.16$  |  $4$  |\n|     $1$      |  $0.64$  |  $4$  |\n|     $2$     |  $0.04$  |  $0$  |\n|     None      |  $0.16$  |  $8$  |\n\n- Apply to switch the classroom in the $1$-st and $3$-rd time slots. The expected stamina cost is $2.8$.\n\n| Time slots approved | Probability | Stamina cost |\n| :--------: | :----: | :----: |\n|     $1,3$      |  $0.4$  |  $0$  |\n|     $1$      |  $0.4$  |  $4$  |\n|     $3$     |  $0.1$  |  $4$  |\n|     None      |  $0.1$  |  $8$  |\n\n- Apply to switch the classroom in the $2$-nd and $3$-rd time slots. The expected stamina cost is $5.2$.\n\n| Time slots approved | Probability | Stamina cost |\n| :--------: | :----: | :----: |\n|     $2,3$      |  $0.1$  |  $4$  |\n|     $2$      |  $0.1$  |  $0$  |\n|     $3$     |  $0.4$  |  $4$  |\n|     None      |  $0.4$  |  $8$  |\n\nTherefore, the optimal plan is to apply to switch the classroom in the $1$-st and $3$-rd time slots. The expected stamina cost is $2.8$.\n\nNotes.\n\n1. There may be multiple bidirectional roads connecting the same pair of classrooms. It is also possible for a road to connect a classroom to itself.\n2. Please distinguish the meanings of $n, m, v, e$. $n$ is not the number of classrooms, and $m$ is not the number of roads.\n\nConstraints and Notes.\n\n| Test set ID | $n \\le$ | $m \\le$ | $v \\le$ | Has Special Property 1 | Has Special Property 2 |\n| :--------: | :----: | :----: | :----: | :----------------: | :----------------: |\n|     1      |  $1$   |  $1$   | $300$  |      $\\times$      |      $\\times$      |\n|     2      |  $2$   |  $0$   |  $20$  |      $\\times$      |      $\\times$      |\n|     3      |  $2$   |  $1$   | $100$  |      $\\times$      |      $\\times$      |\n|     4      |  $2$   |  $2$   | $300$  |      $\\times$      |      $\\times$      |\n|     5      |  $3$   |  $0$   |  $20$  |      $\\surd$       |      $\\surd$       |\n|     6      |  $3$   |  $1$   | $100$  |      $\\surd$       |      $\\times$      |\n|     7      |  $3$   |  $2$   | $300$  |      $\\times$      |      $\\times$      |\n|     8      |  $10$  |  $0$   | $300$  |      $\\surd$       |      $\\surd$       |\n|     9      |  $10$  |  $1$   |  $20$  |      $\\surd$       |      $\\times$      |\n|     10     |  $10$  |  $2$   | $100$  |      $\\times$      |      $\\times$      |\n|     11     |  $10$  |  $10$  | $300$  |      $\\times$      |      $\\surd$       |\n|     12     |  $20$  |  $0$   |  $20$  |      $\\surd$       |      $\\times$      |\n|     13     |  $20$  |  $1$   | $100$  |      $\\times$      |      $\\times$      |\n|     14     |  $20$  |  $2$   | $300$  |      $\\surd$       |      $\\times$      |\n|     15     |  $20$  |  $20$  | $300$  |      $\\times$      |      $\\surd$       |\n|     16     | $300$  |  $0$   |  $20$  |      $\\times$      |      $\\times$      |\n|     17     | $300$  |  $1$   | $100$  |      $\\times$      |      $\\times$      |\n|     18     | $300$  |  $2$   | $300$  |      $\\surd$       |      $\\surd$       |\n|     19     | $300$  | $300$  | $300$  |      $\\times$      |      $\\surd$       |\n|     20     | $2000$ |  $0$   |  $20$  |      $\\times$      |      $\\times$      |\n|     21     | $2000$ |  $1$   |  $20$  |      $\\times$      |      $\\times$      |\n|     22     | $2000$ |  $2$   | $100$  |      $\\times$      |      $\\times$      |\n|     23     | $2000$ | $2000$ | $100$  |      $\\times$      |      $\\times$      |\n|     24     | $2000$ | $2000$ | $300$  |      $\\times$      |      $\\times$      |\n|     25     | $2000$ | $2000$ | $300$  |      $\\times$      |      $\\times$      |\n\nSpecial Property 1: For any two distinct nodes $u, v$ in the graph, there exists a minimum-stamina path that consists of only one road.\n\nSpecial Property 2: For all $1 \\le i \\le n$, $k_i = 1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2016 提高组] 换教室", "background": "NOIP2016 提高组 D1T3", "description": "对于刚上大学的牛牛来说，他面临的第一个问题是如何根据实际情况申请合适的课程。\n\n\n在可以选择的课程中，有 $2n$ 节课程安排在 $n$ 个时间段上。在第 $i$（$1 \\leq i \\leq n$）个时间段上，两节内容相同的课程同时在不同的地点进行，其中，牛牛预先被安排在教室 $c_i$ 上课，而另一节课程在教室 $d_i$ 进行。\n\n\n在不提交任何申请的情况下，学生们需要按时间段的顺序依次完成所有的 $n$ 节安排好的课程。如果学生想更换第 $i$ 节课程的教室，则需要提出申请。若申请通过，学生就可以在第 $i$ 个时间段去教室 $d_i$ 上课，否则仍然在教室 $c_i$ 上课。\n\n\n由于更换教室的需求太多，申请不一定能获得通过。通过计算，牛牛发现申请更换第 $i$ 节课程的教室时，申请被通过的概率是一个已知的实数 $k_i$，并且对于不同课程的申请，被通过的概率是互相独立的。\n\n\n学校规定，所有的申请只能在学期开始前一次性提交，并且每个人只能选择至多 $m$ 节课程进行申请。这意味着牛牛必须一次性决定是否申请更换每节课的教室，而不能根据某些课程的申请结果来决定其他课程是否申请；牛牛可以申请自己最希望更换教室的 $m$ 门课程，也可以不用完这 $m$ 个申请的机会，甚至可以一门课程都不申请。\n\n\n因为不同的课程可能会被安排在不同的教室进行，所以牛牛需要利用课间时间从一间教室赶到另一间教室。\n\n\n牛牛所在的大学有 $v$ 个教室，有 $e$ 条道路。每条道路连接两间教室，并且是可以双向通行的。由于道路的长度和拥堵程度不同，通过不同的道路耗费的体力可能会有所不同。 当第 $i$（$1 \\leq i \\leq n-1$）节课结束后，牛牛就会从这节课的教室出发，选择一条耗费体力最少的路径前往下一节课的教室。\n\n\n现在牛牛想知道，申请哪几门课程可以使他因在教室间移动耗费的体力值的总和的期望值最小，请你帮他求出这个最小值。\n", "inputFormat": "第一行四个整数 $n,m,v,e$。$n$ 表示这个学期内的时间段的数量；$m$ 表示牛牛最多可以申请更换多少节课程的教室；$v$ 表示牛牛学校里教室的数量；$e$ 表示牛牛的学校里道路的数量。\n\n\n第二行 $n$ 个正整数，第 $i$（$1 \\leq i \\leq n$）个正整数表示 $c_i$，即第 $i$ 个时间段牛牛被安排上课的教室；保证 $1 \\le c_i \\le v$。\n\n\n第三行 $n$ 个正整数，第 $i$（$1 \\leq i \\leq n$）个正整数表示 $d_i$，即第 $i$ 个时间段另一间上同样课程的教室；保证 $1 \\le d_i \\le v$。\n\n\n第四行 $n$ 个实数，第 $i$（$1 \\leq i \\leq n$）个实数表示 $k_i$，即牛牛申请在第 $i$ 个时间段更换教室获得通过的概率。保证 $0 \\le k_i \\le 1$。\n\n\n接下来 $e$ 行，每行三个正整数 $a_j, b_j, w_j$，表示有一条双向道路连接教室 $a_j, b_j$，通过这条道路需要耗费的体力值是 $w_j$；保证 $1 \\le a_j, b_j \\le v$，$1 \\le w_j \\le 100$。\n\n\n保证 $1 \\leq n \\leq 2000$，$0 \\leq m \\leq 2000$，$1 \\leq v \\leq 300$，$0 \\leq e \\leq 90000$。\n\n\n保证通过学校里的道路，从任何一间教室出发，都能到达其他所有的教室。\n\n\n保证输入的实数最多包含 $3$ 位小数。\n", "outputFormat": "输出一行，包含一个实数，四舍五入精确到小数点后恰好 $2$ 位，表示答案。你的输出必须和标准输出完全一样才算正确。\n\n测试数据保证四舍五入后的答案和准确答案的差的绝对值不大于 $4 \\times 10^{-3}$。（如果你不知道什么是浮点误差，这段话可以理解为：对于大多数的算法，你可以正常地使用浮点数类型而不用对它进行特殊的处理）\n", "hint": "**样例 1 说明**\n\n所有可行的申请方案和期望收益如下：\n\n- 不作申请，耗费的体力值的期望为 $8.0$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     无      |  $1.0$  |  $8$  |\n\n- 申请更换第 $1$ 个时间段的上课教室，耗费的体力值的期望为 $4.8$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $1$      |  $0.8$  |  $4$  |\n|     无      |  $0.2$  |  $8$  |\n\n- 申请更换第 $2$ 个时间段的上课教室，耗费的体力值的期望为 $6.4$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $2$      |  $0.2$  |  $0$  |\n|     无      |  $0.8$  |  $8$  |\n\n- 申请更换第 $3$ 个时间段的上课教室，耗费的体力值的期望为 $6.0$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $3$      |  $0.5$  |  $4$  |\n|     无      |  $0.5$  |  $8$  |\n\n- 申请更换第 $1,2$ 个时间段的上课教室，耗费的体力值的期望为 $4.48$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $1,2$      |  $0.16$  |  $4$  |\n|     $1$      |  $0.64$  |  $4$  |\n|     $2$     |  $0.04$  |  $0$  |\n|     无      |  $0.16$  |  $8$  |\n\n- 申请更换第 $1,3$ 个时间段的上课教室，耗费的体力值的期望为 $2.8$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $1,3$      |  $0.4$  |  $0$  |\n|     $1$      |  $0.4$  |  $4$  |\n|     $3$     |  $0.1$  |  $4$  |\n|     无      |  $0.1$  |  $8$  |\n\n- 申请更换第 $2,3$ 个时间段的上课教室，耗费的体力值的期望为 $5.2$。\n\n| 申请通过的时间段 | 出现的概率 | 耗费的体力值 |\n| :--------: | :----: | :----: |\n|     $2,3$      |  $0.1$  |  $4$  |\n|     $2$      |  $0.1$  |  $0$  |\n|     $3$     |  $0.4$  |  $4$  |\n|     无      |  $0.4$  |  $8$  |\n\n因此，最优方案为：申请更换第 $1,3$ 个时间段的上课教室。耗费的体力值的期望为 $2.8$。 \n\n**提示**\n\n1. 道路中可能会有多条双向道路连接相同的两间教室。 也有可能有道路两端连接的是同一间教室。\n2. 请注意区分 $n,m,v,e$ 的意义, $n$ 不是教室的数量, $m$ 不是道路的数量。\n\n**数据范围与说明**\n\n| 测试点编号 | $n\\le$ | $m\\le$ | $v\\le$ | 是否具有特殊性质 1 | 是否具有特殊性质 2 |\n| :--------: | :----: | :----: | :----: | :----------------: | :----------------: |\n|     1      |  $1$   |  $1$   | $300$  |      $\\times$      |      $\\times$      |\n|     2      |  $2$   |  $0$   |  $20$  |      $\\times$      |      $\\times$      |\n|     3      |  $2$   |  $1$   | $100$  |      $\\times$      |      $\\times$      |\n|     4      |  $2$   |  $2$   | $300$  |      $\\times$      |      $\\times$      |\n|     5      |  $3$   |  $0$   |  $20$  |      $\\surd$       |      $\\surd$       |\n|     6      |  $3$   |  $1$   | $100$  |      $\\surd$       |      $\\times$      |\n|     7      |  $3$   |  $2$   | $300$  |      $\\times$      |      $\\times$      |\n|     8      |  $10$  |  $0$   | $300$  |      $\\surd$       |      $\\surd$       |\n|     9      |  $10$  |  $1$   |  $20$  |      $\\surd$       |      $\\times$      |\n|     10     |  $10$  |  $2$   | $100$  |      $\\times$      |      $\\times$      |\n|     11     |  $10$  |  $10$  | $300$  |      $\\times$      |      $\\surd$       |\n|     12     |  $20$  |  $0$   |  $20$  |      $\\surd$       |      $\\times$      |\n|     13     |  $20$  |  $1$   | $100$  |      $\\times$      |      $\\times$      |\n|     14     |  $20$  |  $2$   | $300$  |      $\\surd$       |      $\\times$      |\n|     15     |  $20$  |  $20$  | $300$  |      $\\times$      |      $\\surd$       |\n|     16     | $300$  |  $0$   |  $20$  |      $\\times$      |      $\\times$      |\n|     17     | $300$  |  $1$   | $100$  |      $\\times$      |      $\\times$      |\n|     18     | $300$  |  $2$   | $300$  |      $\\surd$       |      $\\surd$       |\n|     19     | $300$  | $300$  | $300$  |      $\\times$      |      $\\surd$       |\n|     20     | $2000$ |  $0$   |  $20$  |      $\\times$      |      $\\times$      |\n|     21     | $2000$ |  $1$   |  $20$  |      $\\times$      |      $\\times$      |\n|     22     | $2000$ |  $2$   | $100$  |      $\\times$      |      $\\times$      |\n|     23     | $2000$ | $2000$ | $100$  |      $\\times$      |      $\\times$      |\n|     24     | $2000$ | $2000$ | $300$  |      $\\times$      |      $\\times$      |\n|     25     | $2000$ | $2000$ | $300$  |      $\\times$      |      $\\times$      |\n \n\n特殊性质 1：图上任意不同的两点 $u,v$ 间，存在一条耗费体力最少的路径只包含一条道路。\n\n特殊性质 2：对于所有的 $1≤ i≤ n,\\ k_i= 1$。\n", "locale": "zh-CN"}}}
{"pid": "P1851", "type": "P", "difficulty": 1, "samples": [["206\n", "220 284"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "好朋友", "background": "小可可和所有其他同学的手腕上都戴有一个射频识别序列号码牌，这样老师就可以方便的计算出他们的人数。很多同学都有一个“好朋友” 。如果 $A$ 的序列号的约数之和恰好等于 $B$ 的序列号，那么 $A$ 的好朋友就是 $B$。在这里，一个数的约数不包括这个数本身。因为一些同学的号码约数和大于其他任何同学的号码，所以这些同学没有好朋友。一些同学有一个“非常好友” 。当两个同学互为“好朋友”时，他们就是一对“非常好友” 。注意在这道题中，忽略那些自己是自己的“非常好友”的情况。", "description": "给定一个序列号 $s$，找出序列号不小于 $s$ 的第一对“非常好友” 。", "inputFormat": "只有一行一个整数 $s$，即给定的序列号下界。", "outputFormat": "输出一行两个用空格隔开的整数 $a$ 和 $b$。\n\n$a$ 表示第一个序列号不小于 $s$ 的有“非常好友”的同学，$b$ 是 $a$ 的“非常好友” 。（注：允许 $b<s$）", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $6\\le s\\le1.8\\times10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Good Friends", "background": "Xiao Keke and all other classmates wear a radio-frequency identification (RFID) serial number tag on their wrists, so the teacher can easily count them. Many students have a \"Good Friend\". If the sum of the proper divisors of $A$ happens to equal the serial number of $B$, then $B$ is the \"Good Friend\" of $A$. Here, a number’s divisors do not include the number itself. Some students have no \"Good Friend\" because the sum of the divisors of their number is greater than every other student’s number. Some students have a \"Very Good Friend\". When two students are mutual \"Good Friends\", they form a pair of \"Very Good Friends\". Note that in this problem, we ignore cases where someone is their own \"Very Good Friend\".", "description": "Given a serial number $s$, find the first pair of \"Very Good Friends\" such that the first serial number is not less than $s$.", "inputFormat": "A single line containing one integer $s$, the given lower bound of the serial number.", "outputFormat": "Output one line with two integers $a$ and $b$.\n\n$a$ denotes the first student with a serial number not less than $s$ who has a \"Very Good Friend\", and $b$ is the \"Very Good Friend\" of $a$. (Note: $b<s$ is allowed.)", "hint": "Constraints\n\n- For $100\\%$ of the testdata, it is guaranteed that $6\\le s\\le1.8\\times10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "好朋友", "background": "小可可和所有其他同学的手腕上都戴有一个射频识别序列号码牌，这样老师就可以方便的计算出他们的人数。很多同学都有一个“好朋友” 。如果 $A$ 的序列号的约数之和恰好等于 $B$ 的序列号，那么 $A$ 的好朋友就是 $B$。在这里，一个数的约数不包括这个数本身。因为一些同学的号码约数和大于其他任何同学的号码，所以这些同学没有好朋友。一些同学有一个“非常好友” 。当两个同学互为“好朋友”时，他们就是一对“非常好友” 。注意在这道题中，忽略那些自己是自己的“非常好友”的情况。", "description": "给定一个序列号 $s$，找出序列号不小于 $s$ 的第一对“非常好友” 。", "inputFormat": "只有一行一个整数 $s$，即给定的序列号下界。", "outputFormat": "输出一行两个用空格隔开的整数 $a$ 和 $b$。\n\n$a$ 表示第一个序列号不小于 $s$ 的有“非常好友”的同学，$b$ 是 $a$ 的“非常好友” 。（注：允许 $b<s$）", "hint": "#### 数据规模与约定\n\n- 对于 $100\\%$ 的数据，保证 $6\\le s\\le1.8\\times10^4$。", "locale": "zh-CN"}}}
{"pid": "P1852", "type": "P", "difficulty": 6, "samples": [["1 2 3\n0 3 5", "YES\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["二分", "最近公共祖先 LCA", "CTT（清华集训/北大集训）"], "title": "跳跳棋", "background": "", "description": "跳跳棋是在一条数轴上进行的。棋子只能摆在整点上。每个点不能摆超过一个棋子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hyfzn745.png)\n\n我们用跳跳棋来做一个简单的游戏：棋盘上有 $3$ 颗棋子，分别在 $a,b,c$ 这三个位置。我们要通过最少的跳动把他们的位置移动成 $x,y,z$。（棋子是没有区别的）\n\n跳动的规则很简单，任意选一颗棋子，对一颗中轴棋子跳动。跳动后两颗棋子距离不变。一次只允许跳过 $1$ 颗棋子。\n\n写一个程序，首先判断是否可以完成任务。如果可以，输出最少需要的跳动次数。", "inputFormat": "第一行包含三个整数，表示当前棋子的位置 $a,b,c$。（互不相同）\n\n第二行包含三个整数，表示目标位置 $x,y,z$。（互不相同）", "outputFormat": "如果无解，输出一行 `NO`。\n\n如果可以到达，第一行输出 `YES`，第二行输出最少步数。\n", "hint": "### 数据范围及约定\n\n- $20\\%$ 输入整数的绝对值均不超过 $10$；\n- $40\\%$ 输入整数的绝对值均不超过 $10000$；\n- $100\\%$ 绝对值不超过 $10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "Jumping Checkers", "background": "", "description": "Jumping Checkers is played on a number line. Pieces can only be placed on integer points. No position may contain more than one piece.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hyfzn745.png)\n\nWe use Jumping Checkers to play a simple game: there are $3$ pieces on the board at positions $a,b,c$. We want to move them, using the fewest jumps, so that their positions become $x,y,z$. (The pieces are indistinguishable.)\n\nThe rule for a jump is simple: choose any piece and jump it over a pivot piece. After the jump, the distance between the two pieces remains unchanged. Each move may jump over exactly $1$ piece.\n\nWrite a program to first determine whether the task is possible. If it is, output the minimum number of jumps required.", "inputFormat": "The first line contains three integers, the current positions $a,b,c$ (pairwise distinct).\n\nThe second line contains three integers, the target positions $x,y,z$ (pairwise distinct).", "outputFormat": "If there is no solution, output a single line `NO`.\n\nIf it is reachable, output the first line YES, and the second line the minimum number of jumps.", "hint": "### Constraints\n\n- For $20\\%$ of the testdata, the absolute value of each input integer does not exceed $10$.\n- For $40\\%$ of the testdata, the absolute value of each input integer does not exceed $10000$.\n- For $100\\%$ of the testdata, the absolute value does not exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "跳跳棋", "background": "", "description": "跳跳棋是在一条数轴上进行的。棋子只能摆在整点上。每个点不能摆超过一个棋子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hyfzn745.png)\n\n我们用跳跳棋来做一个简单的游戏：棋盘上有 $3$ 颗棋子，分别在 $a,b,c$ 这三个位置。我们要通过最少的跳动把他们的位置移动成 $x,y,z$。（棋子是没有区别的）\n\n跳动的规则很简单，任意选一颗棋子，对一颗中轴棋子跳动。跳动后两颗棋子距离不变。一次只允许跳过 $1$ 颗棋子。\n\n写一个程序，首先判断是否可以完成任务。如果可以，输出最少需要的跳动次数。", "inputFormat": "第一行包含三个整数，表示当前棋子的位置 $a,b,c$。（互不相同）\n\n第二行包含三个整数，表示目标位置 $x,y,z$。（互不相同）", "outputFormat": "如果无解，输出一行 `NO`。\n\n如果可以到达，第一行输出 `YES`，第二行输出最少步数。\n", "hint": "### 数据范围及约定\n\n- $20\\%$ 输入整数的绝对值均不超过 $10$；\n- $40\\%$ 输入整数的绝对值均不超过 $10000$；\n- $100\\%$ 绝对值不超过 $10^9$。", "locale": "zh-CN"}}}
{"pid": "P1853", "type": "P", "difficulty": 3, "samples": [["10000 4 2\r\n4000 400\r\n3000 250", "14050"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "背包 DP"], "title": "投资的最大效益", "background": "约翰先生获得了一大笔遗产，他暂时还用不上这一笔钱，他决定进行投资以获得更大的效益。银行工作人员向他提供了多种债券，每一种债券都能在固定的投资后，提供稳定的年利息。当然，每一种债券的投资额是不同的，一般来说，投资越大，收益也越大，而且，每一年还可以根据资金总额的增加，更换收益更大的债券。", "description": "例如：有如下两种不同的债券：\n\n1. 投资额 $4000$，年利息 $400$；\n2. 投资额 $3000$，年利息 $250$。\n\n初始时，有 $10000$ 的总资产，可以投资两份债券 1 债券，一年获得 $800$ 的利息；而投资一份债券 1 和两份债券 2，一年可获得 $900$ 的利息，两年后，可获得 $1800$ 的利息；而所有的资产达到 $11800$，然后将卖掉一份债券 2，换购债券 1，年利息可达到 $1050$；第三年后，总资产达到 $12850$，可以购买三份债券 1，年利息可达到 $1200$，第四年后，总资产可达到 $14050$。\n\n现给定若干种债券、最初的总资产，帮助约翰先生计算，经过 $n$ 年的投资，总资产的最大值。", "inputFormat": "第一行为三个正整数 $s, n, d$，分别表示最初的总资产、年数和债券的种类。\n\n接下来 $d$ 行，每行表示一种债券，两个正整数 $a, b$ 分别表示债券的投资额和年利息。", "outputFormat": "仅一个整数，表示 $n$ 年后的最大总资产。", "hint": "对于 $100 \\%$ 的数据，$1 \\le s \\le {10}^6$，$2 \\le n \\le 40$，$1 \\le d \\le 10$，$1 \\le a \\le {10}^4$，且 $a$ 是 $1000$ 的倍数，$b$ 不超过 $a$ 的 $10\\%$。", "locale": "zh-CN", "translations": {"en": {"title": "Maximum Investment Return", "background": "Mr. John received a large inheritance that he does not need for now, so he decided to invest it to obtain greater returns. The bank offered him multiple types of bonds. Each bond provides a fixed annual interest after a fixed investment. Of course, each bond requires a different investment amount. Generally, the larger the investment, the greater the return. Moreover, each year he can switch to higher-yield bonds according to the increase in his total funds.", "description": "For example, consider the following two types of bonds:\n\n1. Investment amount $4000$, annual interest $400$.\n2. Investment amount $3000$, annual interest $250$.\n\nInitially, with a total of $10000$ in assets, he can invest in two units of Bond 1 and earn $800$ in interest in one year. Alternatively, investing in one unit of Bond 1 and two units of Bond 2 yields $900$ in interest in one year; after two years, the total interest is $1800$, bringing total assets to $11800$. Then, by selling one unit of Bond 2 and switching to Bond 1, the annual interest can reach $1050$. After the third year, total assets reach $12850$, at which point he can purchase three units of Bond 1, yielding an annual interest of $1200$. After the fourth year, total assets reach $14050$.\n\nGiven several types of bonds and the initial total assets, help Mr. John compute the maximum possible total assets after $n$ years of investment.", "inputFormat": "The first line contains three positive integers $s, n, d$, representing the initial total assets, the number of years, and the number of bond types, respectively.\n\nThe next $d$ lines each describe one type of bond. Each line contains two positive integers $a, b$, representing the investment amount and the annual interest of the bond, respectively.", "outputFormat": "Output a single integer, the maximum total assets after $n$ years.", "hint": "For $100\\%$ of the testdata, $1 \\le s \\le {10}^6$, $2 \\le n \\le 40$, $1 \\le d \\le 10$, $1 \\le a \\le {10}^4$, $a$ is a multiple of $1000$, and $b$ does not exceed $10\\%$ of $a$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "投资的最大效益", "background": "约翰先生获得了一大笔遗产，他暂时还用不上这一笔钱，他决定进行投资以获得更大的效益。银行工作人员向他提供了多种债券，每一种债券都能在固定的投资后，提供稳定的年利息。当然，每一种债券的投资额是不同的，一般来说，投资越大，收益也越大，而且，每一年还可以根据资金总额的增加，更换收益更大的债券。", "description": "例如：有如下两种不同的债券：\n\n1. 投资额 $4000$，年利息 $400$；\n2. 投资额 $3000$，年利息 $250$。\n\n初始时，有 $10000$ 的总资产，可以投资两份债券 1 债券，一年获得 $800$ 的利息；而投资一份债券 1 和两份债券 2，一年可获得 $900$ 的利息，两年后，可获得 $1800$ 的利息；而所有的资产达到 $11800$，然后将卖掉一份债券 2，换购债券 1，年利息可达到 $1050$；第三年后，总资产达到 $12850$，可以购买三份债券 1，年利息可达到 $1200$，第四年后，总资产可达到 $14050$。\n\n现给定若干种债券、最初的总资产，帮助约翰先生计算，经过 $n$ 年的投资，总资产的最大值。", "inputFormat": "第一行为三个正整数 $s, n, d$，分别表示最初的总资产、年数和债券的种类。\n\n接下来 $d$ 行，每行表示一种债券，两个正整数 $a, b$ 分别表示债券的投资额和年利息。", "outputFormat": "仅一个整数，表示 $n$ 年后的最大总资产。", "hint": "对于 $100 \\%$ 的数据，$1 \\le s \\le {10}^6$，$2 \\le n \\le 40$，$1 \\le d \\le 10$，$1 \\le a \\le {10}^4$，且 $a$ 是 $1000$ 的倍数，$b$ 不超过 $a$ 的 $10\\%$。", "locale": "zh-CN"}}}
{"pid": "P1854", "type": "P", "difficulty": 3, "samples": [["3 5\n7 23 -5 -24 16\n5 21 -4 10 23\n-21 5 -4 -20 20\n", "53\n2 4 5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "1999", "IOI", "Special Judge"], "title": "[IOI 1999] 花店橱窗布置", "background": "", "description": "某花店现有 $F$ 束花，每一束花的品种都不一样。至少有同样数量的花瓶，被按顺序摆成一行。花瓶的位置是固定从左到右按 $1\\sim V$ 顺序编号，$V$ 是花瓶的数目。\n\n花束可以移动，并且每束花用 $1\\sim F$ 的整数标识。所有花束在放入花瓶时必须保持其标识数的顺序。例如，假设杜鹃花的标识数为 $1$，秋海棠的标识数为 $2$，康乃馨的标识数为 $3$，即杜鹃花必须放在秋海棠左边的花瓶中，秋海棠必须放在康乃馨左边的花瓶中。每个花瓶只能放一束花。\n\n每个花瓶的形状和颜色也不相同，因此，当各个花瓶中放入不同的花束时，会产生不同的美学效果，并以美学值（一个整数 $a_{i,j}$）来表示，空置花瓶的美学值为 $0$。在上述的例子中，花瓶与花束的不同搭配所具有的美学值，可以用如下的表格来表示：\n\n|        | 花瓶 1 | 花瓶 2 | 花瓶 3 | 花瓶 4 | 花瓶 5 |\n| ------ | ------ | ------ | ------ | ------ | ------ |\n| 杜鹃花 | $7$    | $23$   | $-5$   | $-24$  | $16$   |\n| 秋海棠 | $5$    | $21$   | $-4$   | $10$   | $23$   |\n| 康乃馨 | $-21$  | $5$    | $-4$   | $-20$  | $20$   |\n\n根据表格，杜鹃花放在花瓶 $2$ 中，会显得非常好看，但若放在花瓶 $4$ 中，则显得很难看。\n\n为了取得最佳的美学效果，必须在保持花束顺序的前提下，使花的摆放取得最大的美学值。**每个花束都必须被放入花瓶。** 如果具有最大美学值的摆放方式不止一种，则输出任何一种方案即可。", "inputFormat": "输入文件的第一行是两个整数 $F$ 和 $V$，分别为花束数和花瓶数。\n\n接下来是矩阵 $a_{i,j}$，共 $F$ 行，每行 $V$ 个整数，$a_{i,j}$ 表示花束 $i$ 摆放在花瓶 $j$ 中的美学值。", "outputFormat": "第一行输出一个整数，表示最大的美学值。  \n第二行输出 $F$ 个整数 $p_1, p_2, \\dots, p_F$，其中 $p_i$ 表示花束 $i$ 放入的花瓶编号。所有被放入的花束必须满足：若 $i < j$，则 $p_i < p_j$。", "hint": "- 花束的标识数顺序必须严格保持  \n\n对于 $100\\%$ 的数据，$1\\le F\\le V\\le 100$。\n\n感谢 @罗恺 提供 SPJ", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 1999] Little Shop of Flowers", "background": null, "description": "A flower shop currently has $F$ bouquets, each of a different kind. There are at least as many vases, arranged in a row in order. The positions of the vases are fixed and are numbered from left to right as $1 \\sim V$, where $V$ is the number of vases.\n\nThe bouquets can be moved, and each bouquet is identified by an integer $1 \\sim F$. All bouquets must maintain the order of their identifiers when placed into vases. For example, suppose azalea has identifier $1$, begonia has identifier $2$, and carnation has identifier $3$; then the azalea must be placed in a vase to the left of the begonia, and the begonia must be placed in a vase to the left of the carnation. Each vase can hold only one bouquet.\n\nEach vase has a unique shape and color, so placing different bouquets in different vases produces different aesthetic effects, represented by an aesthetic value (an integer $a_{i,j}$). The aesthetic value of an empty vase is $0$. In the above example, the aesthetic values of different pairings of vases and bouquets can be represented by the following table:\n\n|        | Vase 1 | Vase 2 | Vase 3 | Vase 4 | Vase 5 |\n| ------ | ------ | ------ | ------ | ------ | ------ |\n| Azalea | $7$    | $23$   | $-5$   | $-24$  | $16$   |\n| Begonia | $5$    | $21$   | $-4$   | $10$   | $23$   |\n| Carnation | $-21$  | $5$    | $-4$   | $-20$  | $20$   |\n\nAccording to the table, placing the azalea in vase $2$ looks very good, but placing it in vase $4$ looks very bad.\n\nTo achieve the best aesthetic effect, under the constraint of preserving the bouquet order, the placement should maximize the total aesthetic value. Every bouquet must be placed into a vase. If there is more than one arrangement that attains the maximum aesthetic value, output any one of them.", "inputFormat": "The first line contains two integers $F$ and $V$, the number of bouquets and the number of vases.\n\nThen follows the matrix $a_{i,j}$ with $F$ rows and $V$ integers per row, where $a_{i,j}$ denotes the aesthetic value of placing bouquet $i$ into vase $j$.", "outputFormat": "On the first line, output a single integer, the maximum total aesthetic value.  \nOn the second line, output $F$ integers $p_1, p_2, \\dots, p_F$, where $p_i$ is the index of the vase that holds bouquet $i$. All placed bouquets must satisfy: if $i < j$, then $p_i < p_j$.", "hint": "- The order of bouquet identifiers must be strictly preserved.\n- Constraints: For $100\\%$ of the testdata, $1 \\le F \\le V \\le 100$.\n- Thanks to @Luo Kai for providing the SPJ.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 1999] 花店橱窗布置", "background": "", "description": "某花店现有 $F$ 束花，每一束花的品种都不一样。至少有同样数量的花瓶，被按顺序摆成一行。花瓶的位置是固定从左到右按 $1\\sim V$ 顺序编号，$V$ 是花瓶的数目。\n\n花束可以移动，并且每束花用 $1\\sim F$ 的整数标识。所有花束在放入花瓶时必须保持其标识数的顺序。例如，假设杜鹃花的标识数为 $1$，秋海棠的标识数为 $2$，康乃馨的标识数为 $3$，即杜鹃花必须放在秋海棠左边的花瓶中，秋海棠必须放在康乃馨左边的花瓶中。每个花瓶只能放一束花。\n\n每个花瓶的形状和颜色也不相同，因此，当各个花瓶中放入不同的花束时，会产生不同的美学效果，并以美学值（一个整数 $a_{i,j}$）来表示，空置花瓶的美学值为 $0$。在上述的例子中，花瓶与花束的不同搭配所具有的美学值，可以用如下的表格来表示：\n\n|        | 花瓶 1 | 花瓶 2 | 花瓶 3 | 花瓶 4 | 花瓶 5 |\n| ------ | ------ | ------ | ------ | ------ | ------ |\n| 杜鹃花 | $7$    | $23$   | $-5$   | $-24$  | $16$   |\n| 秋海棠 | $5$    | $21$   | $-4$   | $10$   | $23$   |\n| 康乃馨 | $-21$  | $5$    | $-4$   | $-20$  | $20$   |\n\n根据表格，杜鹃花放在花瓶 $2$ 中，会显得非常好看，但若放在花瓶 $4$ 中，则显得很难看。\n\n为了取得最佳的美学效果，必须在保持花束顺序的前提下，使花的摆放取得最大的美学值。**每个花束都必须被放入花瓶。** 如果具有最大美学值的摆放方式不止一种，则输出任何一种方案即可。", "inputFormat": "输入文件的第一行是两个整数 $F$ 和 $V$，分别为花束数和花瓶数。\n\n接下来是矩阵 $a_{i,j}$，共 $F$ 行，每行 $V$ 个整数，$a_{i,j}$ 表示花束 $i$ 摆放在花瓶 $j$ 中的美学值。", "outputFormat": "第一行输出一个整数，表示最大的美学值。  \n第二行输出 $F$ 个整数 $p_1, p_2, \\dots, p_F$，其中 $p_i$ 表示花束 $i$ 放入的花瓶编号。所有被放入的花束必须满足：若 $i < j$，则 $p_i < p_j$。", "hint": "- 花束的标识数顺序必须严格保持  \n\n对于 $100\\%$ 的数据，$1\\le F\\le V\\le 100$。\n\n感谢 @罗恺 提供 SPJ", "locale": "zh-CN"}}}
{"pid": "P1855", "type": "P", "difficulty": 2, "samples": [["6 10 10\n1 1\n2 3 \n3 2\n2 5\n5 2\n4 3", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "数学", "洛谷原创", "枚举", "背包 DP", "洛谷比赛"], "title": "榨取kkksc03", "background": "", "description": "洛谷 2 的团队功能是其他任何 OJ 和工具难以达到的。借助洛谷强大的服务器资源，任何学校都可以在洛谷上零成本的搭建 OJ 并高效率的完成训练计划。\n\n为什么说是搭建 OJ 呢？为什么高效呢？\n\n![](https://cdn.luogu.com.cn/upload/pic/1236.png)\n\n因为，你可以上传私有题目，团队外别人是无法看到的。我们还能帮你们评测！\n\n你可以创建作业，给组员布置任务，查看组员的完成情况，还可以点评任意一份代码！\n\n你可以创建比赛！既可以是 OI 赛制还可以是 ICPC 赛制！既可以是团队内部的私有比赛，也可以公开赛，甚至可以指定谁可以参加比赛。这样，搞“x 校联赛”最合适不过了。洛谷凭借这个功能，希望能够提供公开及私有比赛的另外一个平台。\n\n![](https://cdn.luogu.com.cn/upload/pic/1237.png)\n\n值得说明的是，本次比赛就是采用团队私有题目+邀请比赛的机制。\n\n洛谷的运营组决定，如果一名 OIer 向他的教练推荐洛谷，并能够成功的使用（成功使用的定义是：该团队有 $20$ 个或以上的成员，上传 $10$ 道以上的私有题目，布置过一次作业并成功举办过一次公开比赛），那么他可以浪费掉 kkksc03 的一些时间的同时消耗掉 kkksc03 的一些金钱以满足自己的一个愿望。\n\nkkksc03 的时间和金钱是有限的，所以他很难满足所有同学的愿望。所以他想知道在自己的能力范围内，最多可以完成多少同学的愿望？", "inputFormat": "第一行三个整数 $n,M,T$，表示一共有 $n$（$1 \\le n \\le 100$）个愿望， kkksc03 的手上还剩 $M$（$0 \\le M \\le 200$）元，他的暑假有 $T$（$0 \\le T \\le 200$）分钟时间。\n\n第 $2$~$n+1$ 行 $m_{i}$ , $t_{i}$ 表示第 $i$ 个愿望所需要的金钱和时间。", "outputFormat": "一行，一个数，表示 kkksc03 最多可以实现愿望的个数。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Squeezing kkksc03", "background": "", "description": "Luogu’s team features are hard for any other OJ or tool to match. With Luogu’s powerful server resources, any school can build an OJ on Luogu at zero cost and efficiently carry out its training plan.\n\nWhy call it building an OJ? Why is it efficient?\n\n![](https://cdn.luogu.com.cn/upload/pic/1236.png)\n\nBecause you can upload private problems that people outside the team cannot see. We can also help you with judging!\n\nYou can create assignments, assign tasks to team members, check their progress, and comment on any piece of code!\n\nYou can create contests! They can be in OI or ICPC format! They can be private within the team, public, or even limited to specified participants. This makes it perfect for running an “x school league.” With this feature, Luogu hopes to provide another platform for both public and private contests.\n\n![](https://cdn.luogu.com.cn/upload/pic/1237.png)\n\nIt is worth noting that this contest uses the mechanism of team private problems plus invitation contests.\n\nThe Luogu operations team has decided that if an OIer recommends Luogu to their coach and it is successfully used (successful use is defined as: the team has $20$ or more members, uploads at least $10$ private problems, has assigned at least one assignment, and has successfully held at least one public contest), then they can spend some of kkksc03’s time and money to fulfill one of their wishes.\n\nkkksc03’s time and money are limited, so he cannot satisfy everyone’s wishes. Therefore, he wants to know, within his capacity, what is the maximum number of students’ wishes he can fulfill?", "inputFormat": "The first line contains three integers $n$, $M$, $T$, meaning there are $n$ wishes ($1 \\le n \\le 100$), kkksc03 has $M$ yuan left ($0 \\le M \\le 200$), and his summer vacation time is $T$ minutes ($0 \\le T \\le 200$).\n\nLines $2$ to $n+1$ each contain $m_{i}$ and $t_{i}$, representing the money and time required for the $i$-th wish.", "outputFormat": "One line with a single integer, the maximum number of wishes kkksc03 can fulfill.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "榨取kkksc03", "background": "", "description": "洛谷 2 的团队功能是其他任何 OJ 和工具难以达到的。借助洛谷强大的服务器资源，任何学校都可以在洛谷上零成本的搭建 OJ 并高效率的完成训练计划。\n\n为什么说是搭建 OJ 呢？为什么高效呢？\n\n![](https://cdn.luogu.com.cn/upload/pic/1236.png)\n\n因为，你可以上传私有题目，团队外别人是无法看到的。我们还能帮你们评测！\n\n你可以创建作业，给组员布置任务，查看组员的完成情况，还可以点评任意一份代码！\n\n你可以创建比赛！既可以是 OI 赛制还可以是 ICPC 赛制！既可以是团队内部的私有比赛，也可以公开赛，甚至可以指定谁可以参加比赛。这样，搞“x 校联赛”最合适不过了。洛谷凭借这个功能，希望能够提供公开及私有比赛的另外一个平台。\n\n![](https://cdn.luogu.com.cn/upload/pic/1237.png)\n\n值得说明的是，本次比赛就是采用团队私有题目+邀请比赛的机制。\n\n洛谷的运营组决定，如果一名 OIer 向他的教练推荐洛谷，并能够成功的使用（成功使用的定义是：该团队有 $20$ 个或以上的成员，上传 $10$ 道以上的私有题目，布置过一次作业并成功举办过一次公开比赛），那么他可以浪费掉 kkksc03 的一些时间的同时消耗掉 kkksc03 的一些金钱以满足自己的一个愿望。\n\nkkksc03 的时间和金钱是有限的，所以他很难满足所有同学的愿望。所以他想知道在自己的能力范围内，最多可以完成多少同学的愿望？", "inputFormat": "第一行三个整数 $n,M,T$，表示一共有 $n$（$1 \\le n \\le 100$）个愿望， kkksc03 的手上还剩 $M$（$0 \\le M \\le 200$）元，他的暑假有 $T$（$0 \\le T \\le 200$）分钟时间。\n\n第 $2$~$n+1$ 行 $m_{i}$ , $t_{i}$ 表示第 $i$ 个愿望所需要的金钱和时间。", "outputFormat": "一行，一个数，表示 kkksc03 最多可以实现愿望的个数。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1856", "type": "P", "difficulty": 5, "samples": [["7\n-15 0 5 10\n-5 8 20 25\n15 -4 24 14\n0 -6 16 4\n2 15 10 22\n30 10 36 20\n34 0 40 16", "228"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["1998", "线段树", "USACO", "IOI", "扫描线"], "title": "[IOI 1998 / USACO5.5] 矩形周长 Picture", "background": "墙上贴着许多形状相同的海报、照片。它们的边都是水平和垂直的。每个矩形图片可能部分或全部的覆盖了其他图片。所有矩形合并后的边长称为周长。", "description": "编写一个程序计算周长。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2eo4hzl6.png)\n\n$7$ 个矩形如图 $1$ 所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/buk96amj.png)\n\n所有矩形的边界如图 $2$ 所示。\n\n所有矩形顶点的坐标都是整数。", "inputFormat": "输入文件的第一行是一个整数 $N$，表示有多少个矩形。接下来 $N$ 行给出了每一个矩形左下角坐标和右上角坐标。", "outputFormat": "输出文件只有一个正整数，表示所有矩形的周长。", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le N<5000$，所有坐标的数值范围都在 $-10^4$ 到 $10^4$ 之间。", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 1998 / USACO5.5] Rectangle Perimeter Picture", "background": "There are many rectangular posters and photos on a wall. Their edges are horizontal and vertical. Each rectangular picture may partially or completely cover other pictures. The length of the boundary of the union of all rectangles is called the perimeter.", "description": "Write a program to compute the perimeter.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2eo4hzl6.png)\n\nThe $7$ rectangles are shown in Figure 1.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/buk96amj.png)\n\nThe boundary of the union of all rectangles is shown in Figure 2.\n\nAll rectangle vertices have integer coordinates.", "inputFormat": "The first line of the input contains an integer $N$, the number of rectangles. Each of the next $N$ lines gives the coordinates of the lower-left corner and the upper-right corner of a rectangle.", "outputFormat": "Output a single positive integer, the perimeter of the union of all rectangles.", "hint": "Constraints\n\nFor all testdata, $1 \\le N < 5000$, and all coordinate values are in the range $-10^4$ to $10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 1998 / USACO5.5] 矩形周长 Picture", "background": "墙上贴着许多形状相同的海报、照片。它们的边都是水平和垂直的。每个矩形图片可能部分或全部的覆盖了其他图片。所有矩形合并后的边长称为周长。", "description": "编写一个程序计算周长。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2eo4hzl6.png)\n\n$7$ 个矩形如图 $1$ 所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/buk96amj.png)\n\n所有矩形的边界如图 $2$ 所示。\n\n所有矩形顶点的坐标都是整数。", "inputFormat": "输入文件的第一行是一个整数 $N$，表示有多少个矩形。接下来 $N$ 行给出了每一个矩形左下角坐标和右上角坐标。", "outputFormat": "输出文件只有一个正整数，表示所有矩形的周长。", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le N<5000$，所有坐标的数值范围都在 $-10^4$ 到 $10^4$ 之间。", "locale": "zh-CN"}}}
{"pid": "P1857", "type": "P", "difficulty": 4, "samples": [["3\r\n8\r\n9\r\n16", "1\r\n-1\r\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "质数取石子", "background": "", "description": "桌上有若干个石子，每次可以取质数个。谁先取不了，谁就输。问最少几步能赢？（一个人取一次算一步）假设双方都使用最优策略，且必胜方会尽量快地取胜，必败方会尽可能拖延步数。", "inputFormat": "第一行 $N$，表示有 $N$ 组数据\n\n接下来 $N$ 行为石子数\n", "outputFormat": "每组数据一个数，若必胜，则输出最少步数，否则输出 $-1$。\n", "hint": "石子数 $\\leq 20000$，$N\\leq 10$\n", "locale": "zh-CN", "translations": {"en": {"title": "Prime Stone Game", "background": "", "description": "There is a pile of stones on the table. In each move, a player may take a prime number of stones. The player who cannot make a move loses. What is the minimum number of moves needed to win? (One move means one player's turn.) Assume both players play optimally: the player who can force a win will win as quickly as possible, and the losing player will delay as long as possible.", "inputFormat": "The first line contains $N$, the number of test cases.\n\nEach of the next $N$ lines contains the number of stones.", "outputFormat": "For each test case, output one number. If the position is winning, output the minimum number of moves needed to win; otherwise, output $-1$.", "hint": "Constraints: the number of stones is $\\leq 20000$, and $N \\leq 10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "质数取石子", "background": "", "description": "桌上有若干个石子，每次可以取质数个。谁先取不了，谁就输。问最少几步能赢？（一个人取一次算一步）假设双方都使用最优策略，且必胜方会尽量快地取胜，必败方会尽可能拖延步数。", "inputFormat": "第一行 $N$，表示有 $N$ 组数据\n\n接下来 $N$ 行为石子数\n", "outputFormat": "每组数据一个数，若必胜，则输出最少步数，否则输出 $-1$。\n", "hint": "石子数 $\\leq 20000$，$N\\leq 10$\n", "locale": "zh-CN"}}}
{"pid": "P1858", "type": "P", "difficulty": 5, "samples": [["2 10 5\n3 12\n7 20\n2 4\n5 6\n1 1", "57"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "背包 DP"], "title": "多人背包", "background": null, "description": "求 01 背包前 $K$ 优解的价值和。\n\nDD 和好朋友们要去爬山啦！\n\n他们一共有 $K$ 个人，每个人都会背一个包。这些包 的容量是相同的，都是 $V$。可以装进背包里的一共有 $N$ 种物品，每种物品都有给定的体积和价值。\n\n在 DD 看来，合理的背包安排方案是这样的：每个人背包里装的物品的总体积恰等于包的容量。每个包里的每种物品最多只有一件，但两个不同的包中可以存在相同的物品。 \n\n任意两个人，他们包里的物品清单不能完全相同。在满足以上要求的前提下，所有包里的所有物品的总价值最大是多少呢？", "inputFormat": "第一行三个数 $K,V,N$。\n\n接下来每行两个数，表示体积和价值。", "outputFormat": "共一行，一个整数，表示前 $K$ 优解的价值和。", "hint": "对于 $100\\%$ 的数据，$K\\le 50$，$V\\le 5000$，$N\\le 200$。", "locale": "zh-CN", "translations": {"en": {"title": "Multi-person Knapsack", "background": "", "description": "Compute the sum of values of the top $K$ solutions to the 0/1 knapsack.\n\nDD and their friends are going hiking!\n\nThere are $K$ people in total, and each person will carry one backpack. All backpacks have the same capacity $V$. There are $N$ types of items that can be put into a backpack, and each type has a given volume and value.\n\nAccording to DD, a reasonable packing plan is as follows: the total volume of items in each person’s backpack is exactly equal to the backpack’s capacity. In each backpack, there is at most one copy of each item type, but the same item type may appear in different backpacks.\n\nFor any two people, their item lists must not be exactly the same. Under these requirements, what is the maximum possible total value of all items across all $K$ backpacks?", "inputFormat": "The first line contains three integers $K$, $V$, $N$.\n\nThe next $N$ lines each contain two integers, the volume and the value of an item type.", "outputFormat": "Output a single integer on one line: the sum of values of the top $K$ solutions.", "hint": "For $100\\%$ of the testdata, $K \\le 50$, $V \\le 5000$, $N \\le 200$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "多人背包", "background": null, "description": "求 01 背包前 $K$ 优解的价值和。\n\nDD 和好朋友们要去爬山啦！\n\n他们一共有 $K$ 个人，每个人都会背一个包。这些包 的容量是相同的，都是 $V$。可以装进背包里的一共有 $N$ 种物品，每种物品都有给定的体积和价值。\n\n在 DD 看来，合理的背包安排方案是这样的：每个人背包里装的物品的总体积恰等于包的容量。每个包里的每种物品最多只有一件，但两个不同的包中可以存在相同的物品。 \n\n任意两个人，他们包里的物品清单不能完全相同。在满足以上要求的前提下，所有包里的所有物品的总价值最大是多少呢？", "inputFormat": "第一行三个数 $K,V,N$。\n\n接下来每行两个数，表示体积和价值。", "outputFormat": "共一行，一个整数，表示前 $K$ 优解的价值和。", "hint": "对于 $100\\%$ 的数据，$K\\le 50$，$V\\le 5000$，$N\\le 200$。", "locale": "zh-CN"}}}
{"pid": "P1859", "type": "P", "difficulty": 3, "samples": [["4 7 3 3\n.***\n..**\n*..*\n****\nLEFT\nFORWARD\nLEFT\nBACK\nFORWARD\nRIGHT\nFORWARD", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP"], "title": "不听话的机器人", "background": "", "description": "机器人收到 $N$ 条指令，但它不想走到障碍物上或走出边界，所以决定拒绝一些指令。求最少拒绝多少条指令？\n\n`FORWARD` 前进 $1$\n\n`BACK` 后退 $1$\n\n`LEFT` 左转 $90$ 度\n\n`RIGHT` 右转 $90$ 度\n\n初始时，机器人是面对着上方的。\n", "inputFormat": "第一行 $M,N,X_0,Y_0$ ($M\\le 100,N\\le 1000$)，表示场地大小为 $M\\times M$，共有 $N$ 条指令，起点 $(X_0,Y_0)$。\n\n接下来一个 $M\\times M$ 矩阵，表示场地。其中 `.` 为场地，`*`为障碍物。\n\n接下来 $N$ 行，表示 $N$ 条命令。\n", "outputFormat": "一个数，表示最少拒绝多少条命令。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Disobedient Robot", "background": "", "description": "The robot receives $N$ commands, but it does not want to move onto an obstacle or go out of bounds, so it decides to refuse some commands. Find the minimum number of commands it must refuse.\n\n`FORWARD` move forward by 1.\n\n`BACK` move backward by 1.\n\n`LEFT` turn left by 90 degrees.\n\n`RIGHT` turn right by 90 degrees.\n\nInitially, the robot is facing upwards.", "inputFormat": "The first line contains $M,N,X_0,Y_0$ ($M \\le 100, N \\le 1000$), meaning the field size is $M\\times M$, there are $N$ commands in total, and the starting point is $(X_0,Y_0)$.\n\nNext is an $M\\times M$ matrix representing the field. Here `.` denotes an empty cell, and `*` denotes an obstacle.\n\nThen follow $N$ lines, each representing one command.", "outputFormat": "Output a single integer: the minimum number of commands to refuse.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "不听话的机器人", "background": "", "description": "机器人收到 $N$ 条指令，但它不想走到障碍物上或走出边界，所以决定拒绝一些指令。求最少拒绝多少条指令？\n\n`FORWARD` 前进 $1$\n\n`BACK` 后退 $1$\n\n`LEFT` 左转 $90$ 度\n\n`RIGHT` 右转 $90$ 度\n\n初始时，机器人是面对着上方的。\n", "inputFormat": "第一行 $M,N,X_0,Y_0$ ($M\\le 100,N\\le 1000$)，表示场地大小为 $M\\times M$，共有 $N$ 条指令，起点 $(X_0,Y_0)$。\n\n接下来一个 $M\\times M$ 矩阵，表示场地。其中 `.` 为场地，`*`为障碍物。\n\n接下来 $N$ 行，表示 $N$ 条命令。\n", "outputFormat": "一个数，表示最少拒绝多少条命令。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1860", "type": "P", "difficulty": 6, "samples": [["4 2 6 3\n1 0\n1 0\n5 3\n20 15\n3 2 1 2\n4 3 1 2 3", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "背包 DP"], "title": "新魔法药水", "background": "", "description": "商店里有 $N$ 种药水，每种药水都有一个售价和回收价。小 $S$ 攒了 $V$ 元钱，还会 $M$ 种魔法，可以把一些药水合成另一种药水。他一天可以使用 $K$ 次魔法，问他一天最多赚多少钱？\n\n注意：卖出去赚到的钱不能再次用来投资。", "inputFormat": "第一行四个数 $N,M,V,K$。\n\n接下来 $N$ 行，每行两个数，表示药水的售价和回收价。\n\n接下来 $M$ 行，每行若干个数，第一个数表示魔法的成品，第二个数是原料的种数，接下来为各种原料的编号。", "outputFormat": "输出一个整数，表示最多赚多少钱。", "hint": "### 数据范围及约定\n\n对于全部数据，$N \\le 60$，$M \\le 240$，$V \\le 1000$，$k \\le 30$。", "locale": "zh-CN", "translations": {"en": {"title": "New Magic Potion", "background": "", "description": "There are $N$ types of potions in a shop. Each potion has a selling price and a buyback price. Xiao S has $V$ units of money and knows $M$ spells that can combine some potions into another potion. He can use at most $K$ spells in one day. What is the maximum profit he can make in one day?\n\nNote: Money earned from selling cannot be reinvested.", "inputFormat": "The first line contains four integers $N, M, V, K$.\n\nThe next $N$ lines each contain two integers, the selling price and the buyback price of a potion.\n\nThe next $M$ lines each contain several integers: the first integer is the product potion’s ID, the second integer is the number of ingredient types, followed by the IDs of the ingredient potions.", "outputFormat": "Output a single integer, the maximum profit.", "hint": "### Constraints and Conventions\n\nFor all testdata, $N \\le 60$, $M \\le 240$, $V \\le 1000$, $K \\le 30$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "新魔法药水", "background": "", "description": "商店里有 $N$ 种药水，每种药水都有一个售价和回收价。小 $S$ 攒了 $V$ 元钱，还会 $M$ 种魔法，可以把一些药水合成另一种药水。他一天可以使用 $K$ 次魔法，问他一天最多赚多少钱？\n\n注意：卖出去赚到的钱不能再次用来投资。", "inputFormat": "第一行四个数 $N,M,V,K$。\n\n接下来 $N$ 行，每行两个数，表示药水的售价和回收价。\n\n接下来 $M$ 行，每行若干个数，第一个数表示魔法的成品，第二个数是原料的种数，接下来为各种原料的编号。", "outputFormat": "输出一个整数，表示最多赚多少钱。", "hint": "### 数据范围及约定\n\n对于全部数据，$N \\le 60$，$M \\le 240$，$V \\le 1000$，$k \\le 30$。", "locale": "zh-CN"}}}
{"pid": "P1861", "type": "P", "difficulty": 6, "samples": [["5 5 \n1 0 0 0 1 \n0 0 0 0 0 \n0 0 0 0 0 \n0 1 0 1 1 \n1 0 0 0 0 \n\n0 0 0 0 0 \n0 0 0 0 1 \n2 0 0 0 1 \n0 0 2 0 0 \n0 0 0 0 0", "7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学"], "title": "星之器", "background": "Magic Land 上的时间又过了若干世纪…\n\n现在，人们谈论着一个传说：从前，他们的祖先来到了一个位于东方的岛屿，那里简直就是另外一个世界。善于分析与构造的 Magic Land 上的人们总是不明白那里的人们是如何不借助精确的实验与计算驱动和操纵魔法。", "description": "偶然地，一个魔法使（Magician）来到了 Magic Land，在临走的时候留下了一个神奇的盒子，叫做星之器（Casket of star）。\n\n虽然不知道这个盒子是做什么的，但是经过了大量的实验和计算后，人们已经清楚它的一些事实：\n\n1. 星之器之中有 $N\\times M$ 个区域，可看作分成 $N$ 行和 $M$ 列的格子，每个区域之中有若干单位的称为“星”的对象，这个对象的最小单位已经被确定，所以，这个数量总是整数。\n2. 魔法使可以驱动星之器中位于同一行或同一列的不相邻（有公共边的区域称为相邻的）两个区域中各 $1$ 单位的“星”，使得它们分别向中心移动 $1$ 格。\n3. 每一次使用 2 中的方法驱动“星”，将会产生魔力，魔法使会得到这一部分魔力。魔力的量等于这个两个区域之间所间隔的区域数。\n\n这样，我们可以用一个 $N\\times M$ 的数表来表示星之器的状态，比如 $N=2,M=3$ 时：\n\n```plain\n2 0 1                                     1 2 0\n5 1 4                                     5 1 4\n```\n\n当星之器为左侧的状态时，通过操纵第一行的第 $1$ 和 $3$ 个区域中的“星”，变为右侧所示的状态，同时，将产生 $1$ 单位的魔力（因为这两个区域之间恰好隔了 $1$ 个区域）。\n\n在经过了进一步的研究之后，人们知道了这个星之器最初的状态（Ini）以及最终被他们得到时的状态（Fin）。\n\n你希望知道，星之器最多帮助它的拥有者提供了多少的魔力。即：经过一系列上述操作由初态（Ini）变为终态（Fin），至多产生多少魔力。\n\n需要注意的是，显然操作过程中每个区域内“星”的数量不能是负的，即：如果那个区域已经没有“星”了，当然就不能继续操作了。", "inputFormat": "第一行包含两个正整数 $N,M$ 表示星之器的大小。\n\n接下来的 $N$ 行，每行包含 $M$ 个自然数：$\\mathit{Ini}_{i,j}$，描绘了初态（Ini）。\n\n在一个空行后的 $N$ 行，每行包含 $M$ 个自然数：$\\mathit{Fin}_{i,j}$，描绘了终态（Fin）。", "outputFormat": "输出一个正整数，表示至多产生的魔力。", "hint": "对于 $100\\%$ 的数据，$1\\le N,M\\le200$，$\\mathit{Ini}_{i,j},\\mathit{Fin}_{i,j}\\le1000$。\n\n所有数据保证了至少存在一个操作方法使得星之器由初态变为终态，同时保证了初态与终态不是完全相同的。", "locale": "zh-CN", "translations": {"en": {"title": "Casket of Star", "background": "Another few centuries have passed in Magic Land.\n\nNow people speak of a legend: long ago, their ancestors reached an island in the East, a place like another world. The analytical and constructive people of Magic Land never understood how those people could drive and manipulate magic without precise experiments and calculations.", "description": "By chance, a magician came to Magic Land and, upon leaving, left behind a mysterious box called the Casket of Star.\n\nAlthough its purpose is unknown, after extensive experiments and calculations, people have learned some facts about it:\n\n1. Inside the Casket of Star there are $N\\times M$ regions, which can be viewed as a grid with $N$ rows and $M$ columns. Each region contains some integer number of objects called “stars.” Since the smallest unit has been determined, this quantity is always an integer.\n2. The magician can drive $1$ unit of “star” in each of two non-adjacent regions that lie in the same row or the same column (regions sharing a common edge are considered adjacent), making them each move $1$ cell toward the center.\n3. Each time the operation in 2 is used to drive the “stars,” magic power is generated, which the magician receives. The amount of magic power equals the number of regions lying strictly between those two regions.\n\nThus, we can represent a state of the Casket of Star by an $N\\times M$ table. For example, when $N=2, M=3$:\n\n```plain\n2 0 1                                     1 2 0\n5 1 4                                     5 1 4\n```\n\nWhen the Casket of Star is in the state on the left, by operating on the “stars” in the 1st and 3rd regions of the first row, it becomes the state on the right, while generating $1$ unit of magic power (because exactly $1$ region lies between those two regions).\n\nAfter further research, people have determined the initial state (Ini) and the final state (Fin) at the time they obtained it.\n\nYou want to know the maximum amount of magic power the Casket of Star could have provided its owner. That is, over a sequence of the above operations that transforms the initial state (Ini) into the final state (Fin), what is the maximum total magic power that can be generated?\n\nNote that, obviously, during the operations the number of “stars” in any region cannot become negative. If a region already has no “stars,” you cannot continue operating on it.", "inputFormat": "The first line contains two positive integers $N, M$, indicating the size of the Casket of Star.\n\nThe next $N$ lines each contain $M$ non-negative integers: $\\mathit{Ini}_{i,j}$, describing the initial state (Ini).\n\nAfter a blank line, the next $N$ lines each contain $M$ non-negative integers: $\\mathit{Fin}_{i,j}$, describing the final state (Fin).", "outputFormat": "Output a positive integer, the maximum total magic power that can be generated.", "hint": "For $100\\%$ of the testdata, $1\\le N, M\\le 200$, and $\\mathit{Ini}_{i,j}, \\mathit{Fin}_{i,j}\\le 1000$.\n\nAll testdata guarantee that there exists at least one sequence of operations transforming the Casket of Star from the initial state to the final state, and also guarantee that the initial and final states are not identical.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "星之器", "background": "Magic Land 上的时间又过了若干世纪…\n\n现在，人们谈论着一个传说：从前，他们的祖先来到了一个位于东方的岛屿，那里简直就是另外一个世界。善于分析与构造的 Magic Land 上的人们总是不明白那里的人们是如何不借助精确的实验与计算驱动和操纵魔法。", "description": "偶然地，一个魔法使（Magician）来到了 Magic Land，在临走的时候留下了一个神奇的盒子，叫做星之器（Casket of star）。\n\n虽然不知道这个盒子是做什么的，但是经过了大量的实验和计算后，人们已经清楚它的一些事实：\n\n1. 星之器之中有 $N\\times M$ 个区域，可看作分成 $N$ 行和 $M$ 列的格子，每个区域之中有若干单位的称为“星”的对象，这个对象的最小单位已经被确定，所以，这个数量总是整数。\n2. 魔法使可以驱动星之器中位于同一行或同一列的不相邻（有公共边的区域称为相邻的）两个区域中各 $1$ 单位的“星”，使得它们分别向中心移动 $1$ 格。\n3. 每一次使用 2 中的方法驱动“星”，将会产生魔力，魔法使会得到这一部分魔力。魔力的量等于这个两个区域之间所间隔的区域数。\n\n这样，我们可以用一个 $N\\times M$ 的数表来表示星之器的状态，比如 $N=2,M=3$ 时：\n\n```plain\n2 0 1                                     1 2 0\n5 1 4                                     5 1 4\n```\n\n当星之器为左侧的状态时，通过操纵第一行的第 $1$ 和 $3$ 个区域中的“星”，变为右侧所示的状态，同时，将产生 $1$ 单位的魔力（因为这两个区域之间恰好隔了 $1$ 个区域）。\n\n在经过了进一步的研究之后，人们知道了这个星之器最初的状态（Ini）以及最终被他们得到时的状态（Fin）。\n\n你希望知道，星之器最多帮助它的拥有者提供了多少的魔力。即：经过一系列上述操作由初态（Ini）变为终态（Fin），至多产生多少魔力。\n\n需要注意的是，显然操作过程中每个区域内“星”的数量不能是负的，即：如果那个区域已经没有“星”了，当然就不能继续操作了。", "inputFormat": "第一行包含两个正整数 $N,M$ 表示星之器的大小。\n\n接下来的 $N$ 行，每行包含 $M$ 个自然数：$\\mathit{Ini}_{i,j}$，描绘了初态（Ini）。\n\n在一个空行后的 $N$ 行，每行包含 $M$ 个自然数：$\\mathit{Fin}_{i,j}$，描绘了终态（Fin）。", "outputFormat": "输出一个正整数，表示至多产生的魔力。", "hint": "对于 $100\\%$ 的数据，$1\\le N,M\\le200$，$\\mathit{Ini}_{i,j},\\mathit{Fin}_{i,j}\\le1000$。\n\n所有数据保证了至少存在一个操作方法使得星之器由初态变为终态，同时保证了初态与终态不是完全相同的。", "locale": "zh-CN"}}}
{"pid": "P1862", "type": "P", "difficulty": 2, "samples": [["5\n1 2\n2 2\n1 3\n3 -2\n3 3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "数学", "枚举", "排序"], "title": "输油管道问题", "background": "听说最近石油危机。\n\n所以想到了这题。\n", "description": "某石油公司计划建造一条由东向西的主要输油管道。\n\n该管道要穿过一个有 $n$ 口油井的油田。从每口油井都要有一条输油管道沿最短路径（或南或北）与主管道相连。\n\n如果给定 $n$ 口油井的位置，及它们的 $x$ 坐标（东西向）和 $y$ 坐标（南北向），应如何确定主管道的最优位置，即使各油井到主管道之间的输油管道长度总和最小的位置？证明可规定时间内确定主管道的最优位置。", "inputFormat": "第一行是油井数 $n$。\n\n接下来 $n$ 行是油井的位置，每行 $2$ 个整数 $x$ 和 $y$。", "outputFormat": "只有一行，表示油井到主管道之间的输油管道最小长度总和。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le n \\le 10000$，$-10^4 \\le x,y \\le 10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "Oil Pipeline Problem", "background": "I heard there is an oil crisis recently. So I thought of this problem.", "description": "An oil company plans to build a main pipeline running from east to west.\n\nThe pipeline must pass through an oil field that has $n$ wells. From each well, a feeder pipeline must connect to the main pipeline along the shortest path (either north or south).\n\nGiven the positions of the $n$ wells, with their $x$ coordinates (east–west) and $y$ coordinates (north–south), determine the optimal position of the main pipeline so that the total length of the feeder pipelines from the wells to the main pipeline is minimized. Prove that the optimal position of the main pipeline can be determined within the time limit.", "inputFormat": "The first line contains the number of wells $n$.\n\nEach of the next $n$ lines contains the position of a well: two integers $x$ and $y$.", "outputFormat": "Output a single line with the minimum total length of the feeder pipelines from the wells to the main pipeline.", "hint": "Constraints\n\nFor all testdata, $1 \\le n \\le 10000$, $-10^4 \\le x, y \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "输油管道问题", "background": "听说最近石油危机。\n\n所以想到了这题。\n", "description": "某石油公司计划建造一条由东向西的主要输油管道。\n\n该管道要穿过一个有 $n$ 口油井的油田。从每口油井都要有一条输油管道沿最短路径（或南或北）与主管道相连。\n\n如果给定 $n$ 口油井的位置，及它们的 $x$ 坐标（东西向）和 $y$ 坐标（南北向），应如何确定主管道的最优位置，即使各油井到主管道之间的输油管道长度总和最小的位置？证明可规定时间内确定主管道的最优位置。", "inputFormat": "第一行是油井数 $n$。\n\n接下来 $n$ 行是油井的位置，每行 $2$ 个整数 $x$ 和 $y$。", "outputFormat": "只有一行，表示油井到主管道之间的输油管道最小长度总和。\n", "hint": "### 数据范围及约定\n\n对于全部数据，$1 \\le n \\le 10000$，$-10^4 \\le x,y \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P1863", "type": "P", "difficulty": 5, "samples": [["10\n4 5\n9 8\n5 9\n1 7\n3 2\n6 3\n10 10\n8 1\n2 4\n7 6\n", "10 8 7 3 4 9 5 6 2 1 10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["计算几何", "NOI 导刊"], "title": "独眼兔", "background": "", "description": "太郎有一只特殊的兔子，它只有一只左眼，所以当它移动时是不能向右转弯的。一天，太郎跟独眼兔做一个游戏，太郎在平面内放了 $n$ 个萝卜，每个萝卜有个位置 $(x_i,y_i)$，且任意两个萝卜的 $x_i$，$y_i$ 都是不相同的，独眼兔要去吃这些萝卜。设萝卜 $A(x_i,y_i)$ 是所有萝卜中最小的，那独眼兔会从 $(0,y_i)$ 出发，走向萝卜 $A$，然后开始吃萝卜。当它吃完一个萝卜后，独眼兔会确定下一个萝卜作为目标，然后径直向萝卜走去，当然当它移动的时候是不能向右转弯的。独眼兔还有一个特点，它走过的路径上会留下特殊的气味，所以独眼兔不希望它将要走的路与前面它走过的路相交。太郎想知道独眼兔如何才能吃到最多的萝卜。", "inputFormat": "第一行是个整数 $n$；\n\n接下来 $n$ 行，每行两个整数。第 $i+1$ 行表示第 $i$ 号萝卜的位置 $(x_i,y_i)$。", "outputFormat": "一行，输出最多能吃到的萝卜数，后面输出吃萝卜的顺序。", "hint": "- $40\\%$ 的数据，$n\\le100$；\n- $100\\%$ 的数据，$n\\le1000$，$0\\lt x_i\\le10^4$，$0\\lt y_i\\le10^4$。", "locale": "zh-CN", "translations": {"en": {"title": "One-Eyed Rabbit", "background": "", "description": "Taro has a special rabbit that has only a left eye, so when it moves it cannot make right turns. One day, Taro plays a game with the one-eyed rabbit. Taro places $n$ carrots on the plane, with each carrot at position $(x_i, y_i)$, and all $x_i$ are distinct and all $y_i$ are distinct. The rabbit is going to eat these carrots.\n\nLet carrot $A(x_i, y_i)$ be the carrot with the smallest $x$-coordinate among all carrots. Then the rabbit will start from $(0, y_i)$, head to carrot $A$, and then start eating carrots. After it finishes a carrot, the rabbit will choose the next carrot as its target and go straight to it; of course, while moving, it cannot make right turns. The rabbit also leaves a special smell along its path, so it does not want the path it is about to take to intersect the path it has already traveled. Taro wants to know how the rabbit can eat the maximum number of carrots.", "inputFormat": "The first line contains an integer $n$.\n\nThe next $n$ lines each contain two integers. The $(i+1)$-th line gives the position of carrot $i$, $(x_i, y_i)$.", "outputFormat": "Output one line: first output the maximum number of carrots the rabbit can eat, then output the order in which it eats the carrots (by carrot indices from $1$ to $n$, space-separated).", "hint": "- For 40% of the testdata, $n \\le 100$.\n- For 100% of the testdata, $n \\le 1000$, $0 < x_i \\le 10^4$, $0 < y_i \\le 10^4$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "独眼兔", "background": "", "description": "太郎有一只特殊的兔子，它只有一只左眼，所以当它移动时是不能向右转弯的。一天，太郎跟独眼兔做一个游戏，太郎在平面内放了 $n$ 个萝卜，每个萝卜有个位置 $(x_i,y_i)$，且任意两个萝卜的 $x_i$，$y_i$ 都是不相同的，独眼兔要去吃这些萝卜。设萝卜 $A(x_i,y_i)$ 是所有萝卜中最小的，那独眼兔会从 $(0,y_i)$ 出发，走向萝卜 $A$，然后开始吃萝卜。当它吃完一个萝卜后，独眼兔会确定下一个萝卜作为目标，然后径直向萝卜走去，当然当它移动的时候是不能向右转弯的。独眼兔还有一个特点，它走过的路径上会留下特殊的气味，所以独眼兔不希望它将要走的路与前面它走过的路相交。太郎想知道独眼兔如何才能吃到最多的萝卜。", "inputFormat": "第一行是个整数 $n$；\n\n接下来 $n$ 行，每行两个整数。第 $i+1$ 行表示第 $i$ 号萝卜的位置 $(x_i,y_i)$。", "outputFormat": "一行，输出最多能吃到的萝卜数，后面输出吃萝卜的顺序。", "hint": "- $40\\%$ 的数据，$n\\le100$；\n- $100\\%$ 的数据，$n\\le1000$，$0\\lt x_i\\le10^4$，$0\\lt y_i\\le10^4$。", "locale": "zh-CN"}}}
