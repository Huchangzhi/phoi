{"pid": "P8545", "type": "P", "difficulty": 7, "samples": [["4", "4\n3 1 2 3\n3 1 2 4\n3 1 3 4\n3 2 3 4"], ["5", "7\n4 1 2 3 4\n3 1 2 5\n3 1 3 5\n3 1 4 5\n3 2 3 5\n3 2 4 5\n3 3 4 5\n"]], "limits": {"time": [1000, 1000], "memory": [128000, 128000]}, "tags": ["数论", "洛谷原创", "提交答案", "Special Judge", "O2优化", "构造", "洛谷月赛"], "title": "「Wdoi-2」不败的无尽兵团", "background": "畜生界是一个被动物灵所占据的，究极的弱肉强食的空间，也是个被几个组织所支配的世界——劲牙组、鬼杰组、刚欲同盟……\n\n在这些动物灵其中也有一些灵长类动物的灵，也就是人类灵，它们弱小但又手脚灵活，作为完完全全的奴隶苟存在灵长园这一娱乐设施中。\n\n但人类的灵也是有信仰的，它们向神明祈求，神也回应了人类的祈求，向人类给予了信仰的偶像。然而，人类灵原本只是皈依于存在于偶像背后的神性，却逐渐开始信仰起偶像本身来。结果，自然而然地，偶像开始支配人类，使得灵长园变成一个凶恶的失控组织。\n\n畜生界也因为灵长园的暴动变得混乱，为了打倒偶像，鬼杰组希望能够卷入地上的人类，借用人类之手毁灭灵长园。动物灵们也就来到了地上，也就是幻想乡，带领灵梦一行人一同前往地狱。", "description": "### 简要题意\n\n对于正整数 $n$（$n$ 为 $529$ 或 $625$），$A=\\{1,2,\\cdots,n\\}$ 的 $m \\ge 2$ 个子集 $B_1,B_2,\\cdots,B_m(|B_i| \\geq 3)$ 为好的，如果对于 $A$ 的每一个三元子集 $C$，都存在 **恰好** 一个 $i$ 使得 $C$ 为 $B_i$ 的子集。构造一个好的子集族使得 $m$ 尽量小（不超过题目给定的评分参数）。\n\n### 原始题意\n\n一路进入畜生界的灵梦，遭遇到了埴轮兵团的首长，杖刀偶磨弓的阻拦。\n\n埴轮兵团由 $n$ 个战士组成，它们编号为 $1,2,\\dots,n$。战士数量为 $529$ 或者 $625$。作为一个兵团，要做到最好的进攻与防守，埴轮之间存在 $m$ 组配合关系 $B_1,B_2,\\dots,B_m$，每组关系包含若干个不同（但不少于 $3$ 个）的埴轮战士，但不同组的关系中包含的埴轮战士可以重复。\n\n但是灵梦并不事先知道这些配合关系，而且由于埴轮兵团配合默契，灵梦难以强行击败它们。在动物灵的帮助之下，灵梦发现，这些埴轮满足如下特点：从埴轮兵团中任意选出 $3$ 个埴轮，都存在 **恰好** 一个 $i$，使得这三个埴轮是 $B_i$ 的一个子集。在满足这个特点的基础之上，由于磨弓的精力有限，无法同时维护太多组配合关系。因此，$m$ 是一个大于等于 $2$ 的一个正整数，且其小于等于 $m_{ans}$。\n\n现在灵梦告诉了你埴轮兵团的总人数，请你告诉她一种可能的埴轮兵团配合的情况，帮助她打败杖刀偶磨弓，进入灵长园。", "inputFormat": "第一行有一个正整数 $n$，含义如题意所示。保证 $n=529$ 或者 $625$。", "outputFormat": "第一行输出一个正整数 $m$，表示你构造的方案使用的集合的总个数。应当满足 $m\\ge 2$。\n\n接下来 $m$ 行，每行输出若干个整数。第一个整数 $s$ 表示你构造的 $B_i$ 的大小，应当满足 $n\\ge s>0$。接下来 $s$ 个整数描述 $B_i$ 内的元素，中间用空格隔开。", "hint": "### 样例 1 解释\n\n**样例仅供理解题意参考。实际数据中，$n$ 只会为 $529$ 或 $625$。**\n\n由于 $m>1$，因此结果不能为 $\\{\\{1,2,3,4\\}\\}$；又因为 $|B_i|< 3$ 时 $B_i$ 无用，于是唯一的方案就是列出 $\\{1,2,3,4\\}$ 的所有三元子集 $\\{\\{1,2,3\\},\\{1,2,4\\},\\{1,3,4\\},\\{2,3,4\\}\\}$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n=} & \\bm{m_{\\text{ans}}=} & \\textbf{分值} \\cr\\hline\n1 & 529 & 1.25\\times 10^4 & 75 \\cr\\hline\n2 & 625 & 1.60\\times 10^4 & 25 \\cr\\hline\n\\end{array}$$\n\n如果你输出的方案不合法，那么你将不能获得该测试点的得分。\n\n当你构造的解符合题设，并且 $m$ 的值不超过 $m_{\\text{ans}}$，你才能获得该测试点的分值。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-2」不败的无尽兵团", "background": "畜生界是一个被动物灵所占据的，究极的弱肉强食的空间，也是个被几个组织所支配的世界——劲牙组、鬼杰组、刚欲同盟……\n\n在这些动物灵其中也有一些灵长类动物的灵，也就是人类灵，它们弱小但又手脚灵活，作为完完全全的奴隶苟存在灵长园这一娱乐设施中。\n\n但人类的灵也是有信仰的，它们向神明祈求，神也回应了人类的祈求，向人类给予了信仰的偶像。然而，人类灵原本只是皈依于存在于偶像背后的神性，却逐渐开始信仰起偶像本身来。结果，自然而然地，偶像开始支配人类，使得灵长园变成一个凶恶的失控组织。\n\n畜生界也因为灵长园的暴动变得混乱，为了打倒偶像，鬼杰组希望能够卷入地上的人类，借用人类之手毁灭灵长园。动物灵们也就来到了地上，也就是幻想乡，带领灵梦一行人一同前往地狱。", "description": "### 简要题意\n\n对于正整数 $n$（$n$ 为 $529$ 或 $625$），$A=\\{1,2,\\cdots,n\\}$ 的 $m \\ge 2$ 个子集 $B_1,B_2,\\cdots,B_m(|B_i| \\geq 3)$ 为好的，如果对于 $A$ 的每一个三元子集 $C$，都存在 **恰好** 一个 $i$ 使得 $C$ 为 $B_i$ 的子集。构造一个好的子集族使得 $m$ 尽量小（不超过题目给定的评分参数）。\n\n### 原始题意\n\n一路进入畜生界的灵梦，遭遇到了埴轮兵团的首长，杖刀偶磨弓的阻拦。\n\n埴轮兵团由 $n$ 个战士组成，它们编号为 $1,2,\\dots,n$。战士数量为 $529$ 或者 $625$。作为一个兵团，要做到最好的进攻与防守，埴轮之间存在 $m$ 组配合关系 $B_1,B_2,\\dots,B_m$，每组关系包含若干个不同（但不少于 $3$ 个）的埴轮战士，但不同组的关系中包含的埴轮战士可以重复。\n\n但是灵梦并不事先知道这些配合关系，而且由于埴轮兵团配合默契，灵梦难以强行击败它们。在动物灵的帮助之下，灵梦发现，这些埴轮满足如下特点：从埴轮兵团中任意选出 $3$ 个埴轮，都存在 **恰好** 一个 $i$，使得这三个埴轮是 $B_i$ 的一个子集。在满足这个特点的基础之上，由于磨弓的精力有限，无法同时维护太多组配合关系。因此，$m$ 是一个大于等于 $2$ 的一个正整数，且其小于等于 $m_{ans}$。\n\n现在灵梦告诉了你埴轮兵团的总人数，请你告诉她一种可能的埴轮兵团配合的情况，帮助她打败杖刀偶磨弓，进入灵长园。", "inputFormat": "第一行有一个正整数 $n$，含义如题意所示。保证 $n=529$ 或者 $625$。", "outputFormat": "第一行输出一个正整数 $m$，表示你构造的方案使用的集合的总个数。应当满足 $m\\ge 2$。\n\n接下来 $m$ 行，每行输出若干个整数。第一个整数 $s$ 表示你构造的 $B_i$ 的大小，应当满足 $n\\ge s>0$。接下来 $s$ 个整数描述 $B_i$ 内的元素，中间用空格隔开。", "hint": "### 样例 1 解释\n\n**样例仅供理解题意参考。实际数据中，$n$ 只会为 $529$ 或 $625$。**\n\n由于 $m>1$，因此结果不能为 $\\{\\{1,2,3,4\\}\\}$；又因为 $|B_i|< 3$ 时 $B_i$ 无用，于是唯一的方案就是列出 $\\{1,2,3,4\\}$ 的所有三元子集 $\\{\\{1,2,3\\},\\{1,2,4\\},\\{1,3,4\\},\\{2,3,4\\}\\}$。\n\n### 数据范围及约定\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\bm{n=} & \\bm{m_{\\text{ans}}=} & \\textbf{分值} \\cr\\hline\n1 & 529 & 1.25\\times 10^4 & 75 \\cr\\hline\n2 & 625 & 1.60\\times 10^4 & 25 \\cr\\hline\n\\end{array}$$\n\n如果你输出的方案不合法，那么你将不能获得该测试点的得分。\n\n当你构造的解符合题设，并且 $m$ 的值不超过 $m_{\\text{ans}}$，你才能获得该测试点的分值。", "locale": "zh-CN"}}}
{"pid": "P8546", "type": "P", "difficulty": 2, "samples": [["5\n10001\n01010\n00100\n01011\n00011", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "小挖的 X 献身", "background": "", "description": "给定一张 $n\\times  n$ 的 $01$ 方阵，请计算其中 X 的数目。\n\nX 定义为用 $1$ 填充且形状为 X 的联通块。具体的，X 由左向斜线 `\\` 和右向斜线 `/` 构成，且需要保证左向斜线和右向斜线**长度相等**，而且 X 是中心对称图形，斜线长度大于 1。\n\n例如：\n\n```cpp\n101\n010\n101\n```\n有一个斜线长度为 $3$ 的 X。\n\n```cpp\n1001\n0110\n0110\n1001\n````\n\n则有两个斜线长度分别为 $2,4$ 的 X。\n\n```cpp\n10001\n01010\n00100\n01010\n00001\n```\n\n仅有一个斜线长度为 $3$ 的 X 。", "inputFormat": "第 $1$ 行，共一个正整数 $n$。\n\n接下来 $n$ 行每行一个长度为 $n$ 的 $01$ 串，描述了一个 $01$ 矩阵。", "outputFormat": "共 $1$ 行，一个非负整数，表示 X 的数目。", "hint": "对于 $20\\%$ 的数据，$1\\leq n\\leq 3$。\n\n对于 $40\\%$ 的数据，$1\\leq n\\leq 10$。\n\n对于 $70\\%$ 的数据，$1\\leq n\\leq 50$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小挖的 X 献身", "background": "", "description": "给定一张 $n\\times  n$ 的 $01$ 方阵，请计算其中 X 的数目。\n\nX 定义为用 $1$ 填充且形状为 X 的联通块。具体的，X 由左向斜线 `\\` 和右向斜线 `/` 构成，且需要保证左向斜线和右向斜线**长度相等**，而且 X 是中心对称图形，斜线长度大于 1。\n\n例如：\n\n```cpp\n101\n010\n101\n```\n有一个斜线长度为 $3$ 的 X。\n\n```cpp\n1001\n0110\n0110\n1001\n````\n\n则有两个斜线长度分别为 $2,4$ 的 X。\n\n```cpp\n10001\n01010\n00100\n01010\n00001\n```\n\n仅有一个斜线长度为 $3$ 的 X 。", "inputFormat": "第 $1$ 行，共一个正整数 $n$。\n\n接下来 $n$ 行每行一个长度为 $n$ 的 $01$ 串，描述了一个 $01$ 矩阵。", "outputFormat": "共 $1$ 行，一个非负整数，表示 X 的数目。", "hint": "对于 $20\\%$ 的数据，$1\\leq n\\leq 3$。\n\n对于 $40\\%$ 的数据，$1\\leq n\\leq 10$。\n\n对于 $70\\%$ 的数据，$1\\leq n\\leq 50$。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P8547", "type": "P", "difficulty": 2, "samples": [["6\n34\n60\n100\n118\n50\n106", "1\n1\n4\n5\n1\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "小挖的时间", "background": "", "description": "小挖有一个电子表，采用只显示小时和分钟的 $12$ 小时制，即只显示 $12:00\\sim 11:59$，$12:59$ 后的时刻是 $1:00$。\n\n小时数不会有前导零，但分钟数可以（比如 $7:59$ 不会写成 $07:59$，而 $10:03$ 不会写成 $10:3$）。\n\n小挖从某天**中午**（即 $12:00$）开始盯着这块电子表，一共会持续盯 $T$ 分钟。Ta 现在想知道，一共会看到多少次成**等差数列**的时刻呢？\n\n**等差数列**的定义如下：如果一个数列是等差数列，那么第一个数后面的每一个数，都是前面一个数加上一个固定的差值。比如 $11:11$ 就是一个固定差值为 $0$ 的等差数列时刻，$12:34$ 就是一个固定差值为 $1$ 的等差数列时刻。\n\n如果你稍微留心一点，就会发现我没有给差值明确的大小定义，所以正数负数皆可。", "inputFormat": "第 $1$ 行，一个正整数 $D$，表示该测试点有共 $D$ 组测试数据。\n\n第 $2\\sim D+1$ 行，每行一个非负整数 $T$，含义见题目描述。", "outputFormat": "共 $D$ 行，每行一个整数 $ans$ 表示看到的等差数列时刻数目。", "hint": "对于 $30\\%$ 的数据，$0\\leq T\\leq 60$。\n\n对于 $60\\%$ 的数据，$0\\leq T\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$0\\leq T \\leq 10^9$，$1\\leq D\\leq 500$。\n\n#### 样例说明\n\n对于第一个询问 $34$，询问的是从 $12:00\\sim 12:34$ 的时刻。其中仅有 $12:34$ 一个时刻满足题意。\n\n对于第三个询问 $100$，询问的是从 $12:00\\sim 1:40$ 的时刻。其中有 $12:34,1:11,1:23,1:35$ 四个符合要求的时刻。\n\n对于第四个询问 $118$，询问的是从 $12:00\\sim 1:58$ 的时刻。其中有 $12:34,1:11,1:23,1:35,1:47$ 五个符合要求的时刻。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小挖的时间", "background": "", "description": "小挖有一个电子表，采用只显示小时和分钟的 $12$ 小时制，即只显示 $12:00\\sim 11:59$，$12:59$ 后的时刻是 $1:00$。\n\n小时数不会有前导零，但分钟数可以（比如 $7:59$ 不会写成 $07:59$，而 $10:03$ 不会写成 $10:3$）。\n\n小挖从某天**中午**（即 $12:00$）开始盯着这块电子表，一共会持续盯 $T$ 分钟。Ta 现在想知道，一共会看到多少次成**等差数列**的时刻呢？\n\n**等差数列**的定义如下：如果一个数列是等差数列，那么第一个数后面的每一个数，都是前面一个数加上一个固定的差值。比如 $11:11$ 就是一个固定差值为 $0$ 的等差数列时刻，$12:34$ 就是一个固定差值为 $1$ 的等差数列时刻。\n\n如果你稍微留心一点，就会发现我没有给差值明确的大小定义，所以正数负数皆可。", "inputFormat": "第 $1$ 行，一个正整数 $D$，表示该测试点有共 $D$ 组测试数据。\n\n第 $2\\sim D+1$ 行，每行一个非负整数 $T$，含义见题目描述。", "outputFormat": "共 $D$ 行，每行一个整数 $ans$ 表示看到的等差数列时刻数目。", "hint": "对于 $30\\%$ 的数据，$0\\leq T\\leq 60$。\n\n对于 $60\\%$ 的数据，$0\\leq T\\leq 10^5$。\n\n对于 $100\\%$ 的数据，$0\\leq T \\leq 10^9$，$1\\leq D\\leq 500$。\n\n#### 样例说明\n\n对于第一个询问 $34$，询问的是从 $12:00\\sim 12:34$ 的时刻。其中仅有 $12:34$ 一个时刻满足题意。\n\n对于第三个询问 $100$，询问的是从 $12:00\\sim 1:40$ 的时刻。其中有 $12:34,1:11,1:23,1:35$ 四个符合要求的时刻。\n\n对于第四个询问 $118$，询问的是从 $12:00\\sim 1:58$ 的时刻。其中有 $12:34,1:11,1:23,1:35,1:47$ 五个符合要求的时刻。", "locale": "zh-CN"}}}
{"pid": "P8548", "type": "P", "difficulty": 4, "samples": [["5 1\n2 4 5\n4 3 3\n1 3 2\n3 4 3\n3 2 5\n10 10\n", "15\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "背包 DP"], "title": "小挖的买花", "background": "小挖喜欢买花，但是 ta 太懒了！所以这个任务全权交给了你。", "description": "花店里只有 $n$ 株花，每一株花都有三个属性：价格 $cost_i$、美丽度 $be_i$、新鲜程度 $fr_i$。\n\n小挖每次都有不同的要求。准确来说，对于第 $j$ 次买花，你手里的钱**至多能买下总价为 $c_j$ 的花**。同时，小挖还要求购买花的**新鲜程度总和大于等于 $f_j$**。而小挖希望知道，在满足 ta 给出的条件后，购买**花的美丽度总和**的最大值是多少？如果拥有的钱无论如何都无法满足新鲜程度总和大于等于 $f_j$ 的要求，输出 $0$。\n\n\n小挖一共要让你买 $q$ 次花，你能否正确回答 ta 的问题呢？询问彼此独立。", "inputFormat": "第 $1$ 行，共两个正整数 $n,q$。\n\n第 $2\\sim n+1$ 行，每行三个正整数 $cost_i,fr_i,be_i$，分别表示一株花的三个属性。\n\n第 $n+2\\sim n+q+1$ 行，每行两个正整数 $c_j,f_j$，表示每次买花时的要求。", "outputFormat": "共 $q$ 行，每行一个整数，表示美丽度总和的最大值。如果无解，输出 $0$。", "hint": "对于 $20\\%$ 的数据，$3\\leq n,q\\leq 16$。\n\n对于 $40\\%$ 的数据，$3\\leq n,q\\leq 30$，$0\\leq c_j,f_j\\leq 50$。\n\n对于 $60\\%$ 的数据，$3\\leq n\\leq 100$，$1\\leq q\\leq 5\\times 10^4$，$0\\leq cost_i,fr_i,c_j,f_j\\leq 100$。\n\n对于另外 $20\\%$ 的数据，对于每次买花，都有 $f_j=0$。\n\n对于 $100\\%$ 的数据，$3\\leq n\\leq 500$，$\\boldsymbol{1\\leq q\\leq 10^6}$，$0\\leq cost_i,fr_i,c_j,f_j\\leq 500$，$1\\leq be_i \\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小挖的买花", "background": "小挖喜欢买花，但是 ta 太懒了！所以这个任务全权交给了你。", "description": "花店里只有 $n$ 株花，每一株花都有三个属性：价格 $cost_i$、美丽度 $be_i$、新鲜程度 $fr_i$。\n\n小挖每次都有不同的要求。准确来说，对于第 $j$ 次买花，你手里的钱**至多能买下总价为 $c_j$ 的花**。同时，小挖还要求购买花的**新鲜程度总和大于等于 $f_j$**。而小挖希望知道，在满足 ta 给出的条件后，购买**花的美丽度总和**的最大值是多少？如果拥有的钱无论如何都无法满足新鲜程度总和大于等于 $f_j$ 的要求，输出 $0$。\n\n\n小挖一共要让你买 $q$ 次花，你能否正确回答 ta 的问题呢？询问彼此独立。", "inputFormat": "第 $1$ 行，共两个正整数 $n,q$。\n\n第 $2\\sim n+1$ 行，每行三个正整数 $cost_i,fr_i,be_i$，分别表示一株花的三个属性。\n\n第 $n+2\\sim n+q+1$ 行，每行两个正整数 $c_j,f_j$，表示每次买花时的要求。", "outputFormat": "共 $q$ 行，每行一个整数，表示美丽度总和的最大值。如果无解，输出 $0$。", "hint": "对于 $20\\%$ 的数据，$3\\leq n,q\\leq 16$。\n\n对于 $40\\%$ 的数据，$3\\leq n,q\\leq 30$，$0\\leq c_j,f_j\\leq 50$。\n\n对于 $60\\%$ 的数据，$3\\leq n\\leq 100$，$1\\leq q\\leq 5\\times 10^4$，$0\\leq cost_i,fr_i,c_j,f_j\\leq 100$。\n\n对于另外 $20\\%$ 的数据，对于每次买花，都有 $f_j=0$。\n\n对于 $100\\%$ 的数据，$3\\leq n\\leq 500$，$\\boldsymbol{1\\leq q\\leq 10^6}$，$0\\leq cost_i,fr_i,c_j,f_j\\leq 500$，$1\\leq be_i \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P8549", "type": "P", "difficulty": 4, "samples": [["3\n701210842\n832478367\n564653501\n386648785\n457235610\n021170423\n410702257\n327514806\n685368341", "12\n1 1\n1 1\n1 2\n1 3\n2 1\n2 2\n2 3\n2 3\n3 1\n3 1\n3 3\n3 3"], ["4\n36952EA1CF74857C\n18E207C9B36D0419\n4DAC56BF8209DFE2\nB07FD3485AE1BA36\n36B5B7CA6E5839FE\nA4985620FD32A8B7\n01CF94DF1B7C0564\n7DE283E14A09C21D\nB46D729D0F7246B0\n8CF560154BCA159E\n1327AB8459D8D278\nEA09FC3E6E31A3CF\n8E910623C5622B60\n320BF7EDB847CDFE\n45AF5A18310F183A\n6CD7B9C4A9ED7459\n", "17\n1 1\n1 1\n1 2\n1 2\n1 3\n1 3\n1 4\n2 2\n2 3\n2 4\n3 1\n3 2\n3 2\n3 3\n4 1\n4 2\n4 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["深度优先搜索 DFS"], "title": "小挖的核燃料填充", "background": "", "description": "小挖做 Web 设计的时候，剧情里插入了酷炫的核填充情节！但很可惜，受制于技术，情节对应的游戏竟然是数独……\n\n一开始，会给定你一个有 $n\\times n$ 个**宫**，每个宫中有 $n \\times n$ 个元素，且**早已全部正确填好**的 $n$ 阶数独。本题中数独游戏的详细表示与玩法见下方 **“补充说明”** 。\n\n但小挖会把其中**一些宫向左或者向右转 90 度/180 度**。比如，若一个宫初始为\n\n```cpp\n087\n654\n321\n```\n\n那么它向左旋转 $90$ 度后会变成：\n\n```cpp\n741\n852\n063\n```\n你在恢复数独时，也**只能将一些宫向左转 $90$ 度**，一次旋转算作一步。现在小挖想考考你：如果把操作后的数独重新恢复成合法的数独，最少需要多少步呢？\n\n如果一开始小挖给出的数独局面不可以通过任意次、任意位置的左旋得到，则输出 $-1$ 。~~为什么呢？因为小挖给出的是“自认为完全正确的”数独，但实际不一定。~~", "inputFormat": "第 $1$ 行，输入一个正整数 $n$。\n\n第 $2\\sim n^2+1$ 行，每行输入 $n^2$ 个 $16$ 进制整数，表示一个给定的数独局面，表示小挖操作之后的游戏。", "outputFormat": "第 $1$ 行输出一个整数，表示最小步数 $s$。\n\n第 $2\\sim s+1$ 行，每行输出两个整数 $x_i,y_i$。表示对行号列号为 $x_i,y_i$ 的宫向左旋转了 $90$ 度。\n\n数据保证当存在解时，最优解方案唯一。输出时请按如下规则输出：\n\n设 $i<j$ 表示输出方案时的第 $i,j$ 两步。则：\n\n- $x_i\\leq x_j$。\n- 若 $x_i= x_j$ ，则 $y_i\\leq y_j$。\n\n若不存在合法方案，请输出 $-1$。", "hint": "对于 $40\\%$ 的数据，$2 \\le n\\leq 3$。\n\n对于 $100\\%$ 的数据，$2 \\le n\\leq 4$。\n\n## Hint\n\n$n$ 阶数独合法的条件：每一行、每一列、每一个粗线宫 $(n\\times n)$ 内的数字均含 $0\\sim  n^2-1$，且不重复。\n\n需要注意的是，本题内对于 $4$ 阶数独的表示方式中 $>9$ 的数字采用了十六进制表示法。准确来说 $\\mathrm A=10$，$\\mathrm B=11$，$\\mathrm C=12$，$\\mathrm D=13$，$\\mathrm E=14$，$\\mathrm F=15$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "小挖的核燃料填充", "background": "", "description": "小挖做 Web 设计的时候，剧情里插入了酷炫的核填充情节！但很可惜，受制于技术，情节对应的游戏竟然是数独……\n\n一开始，会给定你一个有 $n\\times n$ 个**宫**，每个宫中有 $n \\times n$ 个元素，且**早已全部正确填好**的 $n$ 阶数独。本题中数独游戏的详细表示与玩法见下方 **“补充说明”** 。\n\n但小挖会把其中**一些宫向左或者向右转 90 度/180 度**。比如，若一个宫初始为\n\n```cpp\n087\n654\n321\n```\n\n那么它向左旋转 $90$ 度后会变成：\n\n```cpp\n741\n852\n063\n```\n你在恢复数独时，也**只能将一些宫向左转 $90$ 度**，一次旋转算作一步。现在小挖想考考你：如果把操作后的数独重新恢复成合法的数独，最少需要多少步呢？\n\n如果一开始小挖给出的数独局面不可以通过任意次、任意位置的左旋得到，则输出 $-1$ 。~~为什么呢？因为小挖给出的是“自认为完全正确的”数独，但实际不一定。~~", "inputFormat": "第 $1$ 行，输入一个正整数 $n$。\n\n第 $2\\sim n^2+1$ 行，每行输入 $n^2$ 个 $16$ 进制整数，表示一个给定的数独局面，表示小挖操作之后的游戏。", "outputFormat": "第 $1$ 行输出一个整数，表示最小步数 $s$。\n\n第 $2\\sim s+1$ 行，每行输出两个整数 $x_i,y_i$。表示对行号列号为 $x_i,y_i$ 的宫向左旋转了 $90$ 度。\n\n数据保证当存在解时，最优解方案唯一。输出时请按如下规则输出：\n\n设 $i<j$ 表示输出方案时的第 $i,j$ 两步。则：\n\n- $x_i\\leq x_j$。\n- 若 $x_i= x_j$ ，则 $y_i\\leq y_j$。\n\n若不存在合法方案，请输出 $-1$。", "hint": "对于 $40\\%$ 的数据，$2 \\le n\\leq 3$。\n\n对于 $100\\%$ 的数据，$2 \\le n\\leq 4$。\n\n## Hint\n\n$n$ 阶数独合法的条件：每一行、每一列、每一个粗线宫 $(n\\times n)$ 内的数字均含 $0\\sim  n^2-1$，且不重复。\n\n需要注意的是，本题内对于 $4$ 阶数独的表示方式中 $>9$ 的数字采用了十六进制表示法。准确来说 $\\mathrm A=10$，$\\mathrm B=11$，$\\mathrm C=12$，$\\mathrm D=13$，$\\mathrm E=14$，$\\mathrm F=15$。\n", "locale": "zh-CN"}}}
{"pid": "P8550", "type": "P", "difficulty": 2, "samples": [["2\n1 1\n-1\n2 10\n1 -1\n", "No\nYes\n"]], "limits": {"time": [1000, 1000], "memory": [131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "冬之花", "background": "“哭泣并不是因为悲伤，\n\n只是因为活着，眼泪就不自觉跑了出来。”\n\n赫尔德失恋以后，跑到大马路上飙车。因为是飙车，她不愿意一直待在路上，而是跑到路左右的黄沙地上转圈圈。她的便宜车的转向功能出了一些问题，但她真的很想转圈圈。", "description": "给定 $n$ 个数 $a_1, a_2, \\ldots, a_n$，再给定一个非零数 $x$。\n\n你需要进行 ${10}^{100}$ 次操作，每次操作，你需要选定一个下标 $i$（$1 \\le i \\le n$），然后给 $x$ 加上 $a_i$。\n\n你需要保证，在每次操作后，新的 $x$ 值都不能为 $0$。\n\n请判断你能否完成这 ${10}^{100}$ 次操作。", "inputFormat": "**本题有多组测试数据**。\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，两个整数 $n, x$。\n- 第二行，$n$ 个整数 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "对于每组数据，输出一行一个字符串，若可以进行 ${10}^{100}$ 次操作，则输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释】**\n\n对于第一组数据，第一次操作只能选择下标 $1$，$a_1=-1$，但 $1+(-1)=0$，因此无法进行操作。输出 `No`。\n\n对于第二组数据，你可以轮流选择下标 $1$ 和 $2$，这样 $x$ 将一直 $+1$、$-1$，从而一直在 $10$ 和 $9$ 之间变化，这样你可以执行任意多次操作。输出 `Yes`。当然，这只是其中一种方案，你还可以有其他的操作方案。\n\n---\n\n**【数据范围】**\n\n- 测试点 1（50 分）：$n = 1$；\n- 测试点 2（50 分）：无特殊限制。\n\n对于所有测试点：$1 \\le T \\le 30$，$1 \\le n \\le 5$，$1 \\le \\lvert x \\rvert, \\lvert a_i \\rvert \\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "冬之花", "background": "“哭泣并不是因为悲伤，\n\n只是因为活着，眼泪就不自觉跑了出来。”\n\n赫尔德失恋以后，跑到大马路上飙车。因为是飙车，她不愿意一直待在路上，而是跑到路左右的黄沙地上转圈圈。她的便宜车的转向功能出了一些问题，但她真的很想转圈圈。", "description": "给定 $n$ 个数 $a_1, a_2, \\ldots, a_n$，再给定一个非零数 $x$。\n\n你需要进行 ${10}^{100}$ 次操作，每次操作，你需要选定一个下标 $i$（$1 \\le i \\le n$），然后给 $x$ 加上 $a_i$。\n\n你需要保证，在每次操作后，新的 $x$ 值都不能为 $0$。\n\n请判断你能否完成这 ${10}^{100}$ 次操作。", "inputFormat": "**本题有多组测试数据**。\n\n第一行，一个正整数 $T$，表示数据组数。对于每组数据：\n\n- 第一行，两个整数 $n, x$。\n- 第二行，$n$ 个整数 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "对于每组数据，输出一行一个字符串，若可以进行 ${10}^{100}$ 次操作，则输出 `Yes`，否则输出 `No`。", "hint": "**【样例解释】**\n\n对于第一组数据，第一次操作只能选择下标 $1$，$a_1=-1$，但 $1+(-1)=0$，因此无法进行操作。输出 `No`。\n\n对于第二组数据，你可以轮流选择下标 $1$ 和 $2$，这样 $x$ 将一直 $+1$、$-1$，从而一直在 $10$ 和 $9$ 之间变化，这样你可以执行任意多次操作。输出 `Yes`。当然，这只是其中一种方案，你还可以有其他的操作方案。\n\n---\n\n**【数据范围】**\n\n- 测试点 1（50 分）：$n = 1$；\n- 测试点 2（50 分）：无特殊限制。\n\n对于所有测试点：$1 \\le T \\le 30$，$1 \\le n \\le 5$，$1 \\le \\lvert x \\rvert, \\lvert a_i \\rvert \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P8551", "type": "P", "difficulty": 3, "samples": [["4\n1 3\n4 7\n5 9\n7 10\n", "2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "Bassline", "background": "fuwa↑ fuwa↑ fuwa↑ fuwa↑\n\n赫尔德开始使用当下热潮的聊天软件 BassLine，那么第一步自然是加好友了！加好友既需要确认自己和对方有共同兴趣，又需要能加到足够多的好友。赫尔德将其抽象成了下面这个问题，让你来帮她解决。", "description": "本题中，区间 $[l,r]$ 指所有大于等于 $l$ 且小于等于 $r$ 的整数组成的集合，如 $[3,3]$ 代表 $\\{3\\}$，$[3,7]$ 代表 $\\{3,4,5,6,7\\}$。\n\n给定 $n$ 个区间，第 $i$ 个区间是 $[l_i,r_i]$。\n\n你需要选择两个整数 $x\\le y$，满足：\n\n- 对于所有区间 $[l_i,r_i]$（$1\\le i \\le n$），以下两个条件之一满足：\n\t1. $[x,y]$ 被 $[l_i,r_i]$ 包含，换言之， $[x,y]\\cap[l_i,r_i]=[x,y]$。\n    2.  $[x,y]$ 与 $[l_i,r_i]$ 无交集，换言之，$[x,y]\\cap[l_i,r_i]=\\varnothing$。\n\n若有 $k$ 个区间满足条件 1，则你的得分是 $k(y-x)$。输出你最大的可能的得分。", "inputFormat": "第一行一个正整数表示 $n$。\n\n接下来 $n$ 行，每行两个数 $l_i,r_i$，描述一个区间。", "outputFormat": "一行一个自然数表示答案。", "hint": "**【样例解释】**\n\n对于样例，$[5,6]$ 是最优的区间之一，其含于 $[4,7],[5,9]$，且与 $[1,3],[7,10]$ 没有交集。此时 $k=2$，因此答案为 $2\\times(6-5)=2$。$[1,3]$ 也是一个最优的区间。\n\n$[5,7]$ 并非合法的区间，因为它与 $[7,10]$ 有交集，也并不含于 $[7,10]$。\n\n---\n\n**【数据范围】**\n\n对于所有数据保证 $1 \\le n \\le 3 \\times {10}^5$，$1 \\le l_i \\le r_i \\le 3 \\times {10}^5$。\n\n- 子任务 1（20 分）：$n,l_i,r_i \\le 10$；\n- 子任务 2（20 分）：$n \\le {10}^3$；\n- 子任务 3（20 分）：$l_i, r_i \\le {10}^3$；\n- 子任务 4（40 分）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Bassline", "background": "fuwa↑ fuwa↑ fuwa↑ fuwa↑\n\n赫尔德开始使用当下热潮的聊天软件 BassLine，那么第一步自然是加好友了！加好友既需要确认自己和对方有共同兴趣，又需要能加到足够多的好友。赫尔德将其抽象成了下面这个问题，让你来帮她解决。", "description": "本题中，区间 $[l,r]$ 指所有大于等于 $l$ 且小于等于 $r$ 的整数组成的集合，如 $[3,3]$ 代表 $\\{3\\}$，$[3,7]$ 代表 $\\{3,4,5,6,7\\}$。\n\n给定 $n$ 个区间，第 $i$ 个区间是 $[l_i,r_i]$。\n\n你需要选择两个整数 $x\\le y$，满足：\n\n- 对于所有区间 $[l_i,r_i]$（$1\\le i \\le n$），以下两个条件之一满足：\n\t1. $[x,y]$ 被 $[l_i,r_i]$ 包含，换言之， $[x,y]\\cap[l_i,r_i]=[x,y]$。\n    2.  $[x,y]$ 与 $[l_i,r_i]$ 无交集，换言之，$[x,y]\\cap[l_i,r_i]=\\varnothing$。\n\n若有 $k$ 个区间满足条件 1，则你的得分是 $k(y-x)$。输出你最大的可能的得分。", "inputFormat": "第一行一个正整数表示 $n$。\n\n接下来 $n$ 行，每行两个数 $l_i,r_i$，描述一个区间。", "outputFormat": "一行一个自然数表示答案。", "hint": "**【样例解释】**\n\n对于样例，$[5,6]$ 是最优的区间之一，其含于 $[4,7],[5,9]$，且与 $[1,3],[7,10]$ 没有交集。此时 $k=2$，因此答案为 $2\\times(6-5)=2$。$[1,3]$ 也是一个最优的区间。\n\n$[5,7]$ 并非合法的区间，因为它与 $[7,10]$ 有交集，也并不含于 $[7,10]$。\n\n---\n\n**【数据范围】**\n\n对于所有数据保证 $1 \\le n \\le 3 \\times {10}^5$，$1 \\le l_i \\le r_i \\le 3 \\times {10}^5$。\n\n- 子任务 1（20 分）：$n,l_i,r_i \\le 10$；\n- 子任务 2（20 分）：$n \\le {10}^3$；\n- 子任务 3（20 分）：$l_i, r_i \\le {10}^3$；\n- 子任务 4（40 分）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P8552", "type": "P", "difficulty": 5, "samples": [["3\n3\n2 3\n1 3\n4\n2 3\n3 4\n4 1\n7\n2 5\n5 1\n2 6\n2 3\n7 4\n3 7\n", "1\n1\n2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "Rabbit", "background": "“说实话，最喜欢你了；因为长得好看，所以最喜欢你了。\n\n你的性格，我最喜欢了；虽然不太清楚，但是最喜欢了。”\n\n赫尔德最近加入了一个奇怪的社区，那里面流行一种“配对追星”的活动。大家在人群中找到那个最耀眼的人，就作为自己的偶像了。", "description": "赫尔德不知道这样是否好，为了研究这个活动，她想先从这个活动能持续多久开始研究。于是她抽象了这个问题。\n\n给定一棵树，共 $n$ 个点，分别编号为 $1\\sim n$。\n\n每次操作，你需要选出三个点 $a,b,c$ 将他们标记，满足：\n\n- $c$ 是 $a$ 到 $b$ 简单路径上编号最大的点；\n- $a,b,c$ 两两不同；\n- $a,b,c$ 先前都没有被标记过。\n\n问至多能进行多少次操作。\n\n---\n\n**【提示】**\n\n树上 $p$ 到 $q$ 的简单路径是指一个数列 $a_1,\\dots,a_k$，满足：\n\n1. $a_1=p$，$a_k=q$；\n2. 其中没有重复元素；\n3. 对于所有 $1\\le i<k$，$a_{i+1}$ 与 $a_i$ 有边相连。", "inputFormat": "本题有多组数据。\n\n第一行是数据组数 $T$，接下来 $T$ 组数据，每组数据格式如下：\n\n第一行一个正整数 $n$。\n\n接下来 $n-1$ 行，每行两个正整数 $x,y$，描述树上的一条连接 $x,y$ 的边。", "outputFormat": "对于每组数据输出一行一个非负整数，为答案。", "hint": "**【样例解释】**\n\n对于第一组数据，可以选择 $a=1,b=2,c=3$。\n\n对于第三组数据，可以依次选择 $a=3,b=4,c=7$，$a=1,b=2,c=5$。\n\n---\n\n**【数据范围】**\n\n设 $S$ 为每个测试点所有数据中 $n$ 的和。\n\n对于所有数据：$1\\le T\\le 3\\times 10^4$，$1\\le n\\le 2\\times 10^5$，$S\\le 6\\times 10^5$。\n\n$$\n\\begin{array}{c|c|c|c|c|c} \\hline\n\\textbf{子任务编号} & ~~~~~~~n\\le ~~~~~~~ & ~~~~~~~S\\le ~~~~~~~ & \\textbf{特殊性质} & \\textbf{子任务依赖} & \\textbf{~~~分数~~~} \\\\ \\hline\n\\textsf{1} & 5 & & & & 3 \\\\ \\hline\n\\textsf{2} & 20 & 60 & & & 5 \\\\ \\hline\n\\textsf{3} & & & \\textsf{B} & & 12 \\\\ \\hline\n\\textsf{4} & 333 & 10^3 & \\textsf{A} & & 9 \\\\ \\hline\n\\textsf{5} & 333 & 10^3 & & \\textsf{2,4} & 7 \\\\ \\hline\n\\textsf{6} & 3333 & 10^4 & \\textsf{A} & \\textsf{4} & 15 \\\\ \\hline\n\\textsf{7} & 3333 & 10^4 & & \\textsf{5,6} & 13 \\\\ \\hline\n\\textsf{8} & & & \\textsf{A} & \\textsf{6} & 12 \\\\ \\hline\n\\textsf{9} & & & & \\textsf{1,3,7,8} & 24 \\\\ \\hline\n\\end{array}\n$$\n\n特殊限制 $\\textsf{A}$：保证树的形态是一条链，即树上不存在度数大于 2 的点。\n\n特殊限制 $\\textsf{B}$：保证树随机生成：对于每个整数 $i\\in [2,n]$，均匀随机选择整数 $j\\in [1,i-1]$ 并在 $i,j$ 间连边，然后随机打乱点的编号。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Rabbit", "background": "“说实话，最喜欢你了；因为长得好看，所以最喜欢你了。\n\n你的性格，我最喜欢了；虽然不太清楚，但是最喜欢了。”\n\n赫尔德最近加入了一个奇怪的社区，那里面流行一种“配对追星”的活动。大家在人群中找到那个最耀眼的人，就作为自己的偶像了。", "description": "赫尔德不知道这样是否好，为了研究这个活动，她想先从这个活动能持续多久开始研究。于是她抽象了这个问题。\n\n给定一棵树，共 $n$ 个点，分别编号为 $1\\sim n$。\n\n每次操作，你需要选出三个点 $a,b,c$ 将他们标记，满足：\n\n- $c$ 是 $a$ 到 $b$ 简单路径上编号最大的点；\n- $a,b,c$ 两两不同；\n- $a,b,c$ 先前都没有被标记过。\n\n问至多能进行多少次操作。\n\n---\n\n**【提示】**\n\n树上 $p$ 到 $q$ 的简单路径是指一个数列 $a_1,\\dots,a_k$，满足：\n\n1. $a_1=p$，$a_k=q$；\n2. 其中没有重复元素；\n3. 对于所有 $1\\le i<k$，$a_{i+1}$ 与 $a_i$ 有边相连。", "inputFormat": "本题有多组数据。\n\n第一行是数据组数 $T$，接下来 $T$ 组数据，每组数据格式如下：\n\n第一行一个正整数 $n$。\n\n接下来 $n-1$ 行，每行两个正整数 $x,y$，描述树上的一条连接 $x,y$ 的边。", "outputFormat": "对于每组数据输出一行一个非负整数，为答案。", "hint": "**【样例解释】**\n\n对于第一组数据，可以选择 $a=1,b=2,c=3$。\n\n对于第三组数据，可以依次选择 $a=3,b=4,c=7$，$a=1,b=2,c=5$。\n\n---\n\n**【数据范围】**\n\n设 $S$ 为每个测试点所有数据中 $n$ 的和。\n\n对于所有数据：$1\\le T\\le 3\\times 10^4$，$1\\le n\\le 2\\times 10^5$，$S\\le 6\\times 10^5$。\n\n$$\n\\begin{array}{c|c|c|c|c|c} \\hline\n\\textbf{子任务编号} & ~~~~~~~n\\le ~~~~~~~ & ~~~~~~~S\\le ~~~~~~~ & \\textbf{特殊性质} & \\textbf{子任务依赖} & \\textbf{~~~分数~~~} \\\\ \\hline\n\\textsf{1} & 5 & & & & 3 \\\\ \\hline\n\\textsf{2} & 20 & 60 & & & 5 \\\\ \\hline\n\\textsf{3} & & & \\textsf{B} & & 12 \\\\ \\hline\n\\textsf{4} & 333 & 10^3 & \\textsf{A} & & 9 \\\\ \\hline\n\\textsf{5} & 333 & 10^3 & & \\textsf{2,4} & 7 \\\\ \\hline\n\\textsf{6} & 3333 & 10^4 & \\textsf{A} & \\textsf{4} & 15 \\\\ \\hline\n\\textsf{7} & 3333 & 10^4 & & \\textsf{5,6} & 13 \\\\ \\hline\n\\textsf{8} & & & \\textsf{A} & \\textsf{6} & 12 \\\\ \\hline\n\\textsf{9} & & & & \\textsf{1,3,7,8} & 24 \\\\ \\hline\n\\end{array}\n$$\n\n特殊限制 $\\textsf{A}$：保证树的形态是一条链，即树上不存在度数大于 2 的点。\n\n特殊限制 $\\textsf{B}$：保证树随机生成：对于每个整数 $i\\in [2,n]$，均匀随机选择整数 $j\\in [1,i-1]$ 并在 $i,j$ 间连边，然后随机打乱点的编号。", "locale": "zh-CN"}}}
{"pid": "P8553", "type": "P", "difficulty": 7, "samples": [["0 7\n", "Yes\n0 1 3 2 6 7 5 4\n"], ["0 7\n", "yEs\n0 abacaba\n"], ["0 7\n", "yes\n"], ["3 5\n", "No\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["递归", "洛谷原创", "Special Judge", "O2优化", "分治", "构造", "洛谷月赛"], "title": "醒来", "background": "\n“那羡慕的烟火去哪了，那信任的朋友疏远了。\n\n我年幼时坚持过什么，你们还记不记得。”\n\n回想自己儿时的样子，已和现在大不相同了；但想想昨天的自己，却与今天没什么差异。这不经意的改变，让我们已经是另一个样子了。", "description": "赫尔德用一个长为 $r-l+1$ 的数列 $a$ 来描述自己性格的变化。但赫尔德记忆不好，她已经记不清 $a$ 了，只记得非负整数 $l,r$，其中 $l<r$。\n\n不过，她还记得：\n\n1.  $l\\le a_i\\le r$，且 $a_i$ 互不相同。换言之，$a$ 是一个 $l\\sim r$ 的排列。\n2.  对于所有 $1\\le i\\le r-l$，有 $\\operatorname{popcount}(a_i \\mathbin{\\mathrm{xor}} a_{i+1})=1$。换言之，$a$ 中相邻的两个数二进制下只相差一位。\n\n请你告诉她一个可能的 $a$，或告诉她其实不存在这样的 $a$。", "inputFormat": "仅一行，两个非负整数 $l,r$。", "outputFormat": "第一行，若有解输出 `Yes`，若无解则输出 `No`。不区分大小写。\n\n若你输出了 `Yes`，则你可以用以下两种格式之一输出你的构造：\n\n1. 输出一行 $r-l+1$ 个数，表示你构造的排列。\n3. 先输出一个数，表示你构造排列的第一个数。接下来输出一个长为 $r-l$ 的字符串，对于第 $i$ 个字符，若你构造排列第 $i$ 与 $i+1$ 个数相差了 $2^k$，则你应该输出第 $k+1$ 个小写英文字母，即 `(char)('a'+k)`。 \n\n**注意，若你使用格式 1 输出，你可能无法通过最后两个子任务。若您获得了 UKE 的评测结果，请考虑修改输出答案的格式。**\n\n---\n\n**【评分方法】**\n\n本题采用**自定义校验器**检测你的输出。\n\n若你对解的存在性判断错误，你无法获得任何分数。\n\n若你对解的存在性判断正确，你可以获得 $40\\%$ 的分数；若解不存在或你给出了一组正确的构造，则你可以获得剩下 $60\\%$ 的分数。", "hint": "**【样例解释 \\#1、\\#2、\\#3】**\n\n样例输出 \\#1 和 \\#2 对应同一个数列，即 $\\{ 0, 1, 3, 2, 6, 7, 5, 4 \\}$，它们均能获得该测试点 $100 \\%$ 的分数。\n\n样例输出 \\#3 能获得该测试点 $40 \\%$ 的分数。\n\n----\n\n**【数据范围】**\n\n对于所有数据，保证 $0\\le l<r\\le 10^7$。\n\n设 $n=r-l+1$。\n\n| 子任务编号 | $ n \\leq $ | 特殊限制 | 分数 |\n|:---:|:---:|:---:|:---:|\n| $1$ | $ 10 $ | — | $ 9 $ |\n| $2$ | $ 20 $ | — | $ 9 $ |\n| $3$ | $ 10^5 $ | $\\textsf{A, B}$ | $ 10 $ |\n| $4$ | $ 10^5 $ | $\\textsf{A}$ | $ 10 $ |\n| $5$ | $ 2000 $ | $\\textsf{C}$ | $ 25 $ |\n| $6$ | $ 5 \\times 10^5 $ | $\\textsf{D}$ | $ 20 $ |\n| $7$ | $ 3 \\times 10^6 $ | — | $ 10 $ |\n| $8$ | — | — | $ 7 $ |\n\n\n\n$\\textsf A$：保证 $l=0$。\n\n$\\textsf B$：保证 $n$ 是 $2$ 的整数次幂。\n\n$\\textsf C$：保证 $l$ 是偶数，$r$ 是奇数。\n\n$\\textsf D$：本子任务有 5 个测试点，从所有 $n\\ge 2\\times 10^5$ 且有解的数据中随机生成。\n\n---\n\n即使一直在改变，赫尔德也许仍似儿时的自己。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "醒来", "background": "\n“那羡慕的烟火去哪了，那信任的朋友疏远了。\n\n我年幼时坚持过什么，你们还记不记得。”\n\n回想自己儿时的样子，已和现在大不相同了；但想想昨天的自己，却与今天没什么差异。这不经意的改变，让我们已经是另一个样子了。", "description": "赫尔德用一个长为 $r-l+1$ 的数列 $a$ 来描述自己性格的变化。但赫尔德记忆不好，她已经记不清 $a$ 了，只记得非负整数 $l,r$，其中 $l<r$。\n\n不过，她还记得：\n\n1.  $l\\le a_i\\le r$，且 $a_i$ 互不相同。换言之，$a$ 是一个 $l\\sim r$ 的排列。\n2.  对于所有 $1\\le i\\le r-l$，有 $\\operatorname{popcount}(a_i \\mathbin{\\mathrm{xor}} a_{i+1})=1$。换言之，$a$ 中相邻的两个数二进制下只相差一位。\n\n请你告诉她一个可能的 $a$，或告诉她其实不存在这样的 $a$。", "inputFormat": "仅一行，两个非负整数 $l,r$。", "outputFormat": "第一行，若有解输出 `Yes`，若无解则输出 `No`。不区分大小写。\n\n若你输出了 `Yes`，则你可以用以下两种格式之一输出你的构造：\n\n1. 输出一行 $r-l+1$ 个数，表示你构造的排列。\n3. 先输出一个数，表示你构造排列的第一个数。接下来输出一个长为 $r-l$ 的字符串，对于第 $i$ 个字符，若你构造排列第 $i$ 与 $i+1$ 个数相差了 $2^k$，则你应该输出第 $k+1$ 个小写英文字母，即 `(char)('a'+k)`。 \n\n**注意，若你使用格式 1 输出，你可能无法通过最后两个子任务。若您获得了 UKE 的评测结果，请考虑修改输出答案的格式。**\n\n---\n\n**【评分方法】**\n\n本题采用**自定义校验器**检测你的输出。\n\n若你对解的存在性判断错误，你无法获得任何分数。\n\n若你对解的存在性判断正确，你可以获得 $40\\%$ 的分数；若解不存在或你给出了一组正确的构造，则你可以获得剩下 $60\\%$ 的分数。", "hint": "**【样例解释 \\#1、\\#2、\\#3】**\n\n样例输出 \\#1 和 \\#2 对应同一个数列，即 $\\{ 0, 1, 3, 2, 6, 7, 5, 4 \\}$，它们均能获得该测试点 $100 \\%$ 的分数。\n\n样例输出 \\#3 能获得该测试点 $40 \\%$ 的分数。\n\n----\n\n**【数据范围】**\n\n对于所有数据，保证 $0\\le l<r\\le 10^7$。\n\n设 $n=r-l+1$。\n\n| 子任务编号 | $ n \\leq $ | 特殊限制 | 分数 |\n|:---:|:---:|:---:|:---:|\n| $1$ | $ 10 $ | — | $ 9 $ |\n| $2$ | $ 20 $ | — | $ 9 $ |\n| $3$ | $ 10^5 $ | $\\textsf{A, B}$ | $ 10 $ |\n| $4$ | $ 10^5 $ | $\\textsf{A}$ | $ 10 $ |\n| $5$ | $ 2000 $ | $\\textsf{C}$ | $ 25 $ |\n| $6$ | $ 5 \\times 10^5 $ | $\\textsf{D}$ | $ 20 $ |\n| $7$ | $ 3 \\times 10^6 $ | — | $ 10 $ |\n| $8$ | — | — | $ 7 $ |\n\n\n\n$\\textsf A$：保证 $l=0$。\n\n$\\textsf B$：保证 $n$ 是 $2$ 的整数次幂。\n\n$\\textsf C$：保证 $l$ 是偶数，$r$ 是奇数。\n\n$\\textsf D$：本子任务有 5 个测试点，从所有 $n\\ge 2\\times 10^5$ 且有解的数据中随机生成。\n\n---\n\n即使一直在改变，赫尔德也许仍似儿时的自己。", "locale": "zh-CN"}}}
{"pid": "P8554", "type": "P", "difficulty": 7, "samples": [["3 1\n", "6\n"], ["5 3\n", "8\n"], ["50 10", "664411387"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "洛谷月赛"], "title": "心跳", "background": "“清晰的跳动声传达来的，重叠的声响和流动的思念。\n\n约定再也不要分开吧，希望无论何时都不要让你寂寞。”\n\n恋爱之时，人的心情不会一成不变，可喜悦和悲伤会随着时间流逝而归于平淡。最令人难忘的是那些“心动”的感觉，那些因未曾经历而喜出望外的感觉。因此，有些时候，失去某些特别美好的回忆，反而能让心动的感觉增多。可为此失去那些回忆，真的值得吗？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n我们对于一个长为 $l$ 的数列 $p$，定义函数：\n\n-   $f(p)$ 表示有多少 $1\\le i\\le l$ 满足 $p_i=\\max_{j=1}^i p_j$（即前缀最大值的个数）。\n\n现在，给定 $n,m$，请求出有多少满足以下条件的长为 $n$ 的，值域在 $[m,n]$ 数列 $a$：\n\n-   存在一个排列 $p$ 使得：令 $P_i$ 代表 $p$ 去掉 $p_i$ 后的数列（即 $[p_1,p_2,\\dots,p_{i-1},p_{i+1},\\dots,p_n]$），$f(P_i)=a_i$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数表示 $n,m$。", "outputFormat": "一行一个数，表示答案。", "hint": "**【样例解释 \\#2】**\n\n有以下 $8$ 种不同的 $a$：\n\n1. $\\{4,4,4,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,4,5\\}$；\n2. $\\{3,3,3,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,5,4\\}$；\n3. $\\{3,3,4,4,3\\}$，对应的一种 $p$ 为：$\\{1,2,4,3,5\\}$；\n4. $\\{3,3,3,3,4\\}$，对应的一种 $p$ 为：$\\{1,2,4,5,3\\}$；\n5. $\\{3,4,4,3,3\\}$，对应的一种 $p$ 为：$\\{1,3,2,4,5\\}$；\n6. $\\{3,3,3,4,3\\}$，对应的一种 $p$ 为：$\\{1,3,4,2,5\\}$；\n7. $\\{4,4,3,3,3\\}$，对应的一种 $p$ 为：$\\{2,1,3,4,5\\}$；\n8. $\\{3,3,4,3,3\\}$，对应的一种 $p$ 为：$\\{2,3,1,4,5\\}$。\n\n---\n\n**【数据范围】**\n\n对于所有数据，保证 $3\\le n\\le 2000,1\\le m\\le n $。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\\hline \n\\textbf{子任务编号}&~~\\bm{n\\le} ~~&~~\\bm{m\\le}~~ &\\textbf{分数}\\cr\\hline \n\\textsf1 & 9 &1&8\\cr\\hline \n\\textsf2 & 18&1&12 \\cr\\hline \n\\textsf3 & 70&1&15\\cr\\hline \n\\textsf4 & 70 &&24\\cr\\hline \n\\textsf5 & 300&&18 \\cr\\hline\n\\textsf6 & &&23\\cr\\hline\\end{array}\n$$\n\n没写就是没特殊限制。\n\n---\n\n赫尔德成功算出了不同的恋爱的数量。但她只会经历其中一个。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "心跳", "background": "“清晰的跳动声传达来的，重叠的声响和流动的思念。\n\n约定再也不要分开吧，希望无论何时都不要让你寂寞。”\n\n恋爱之时，人的心情不会一成不变，可喜悦和悲伤会随着时间流逝而归于平淡。最令人难忘的是那些“心动”的感觉，那些因未曾经历而喜出望外的感觉。因此，有些时候，失去某些特别美好的回忆，反而能让心动的感觉增多。可为此失去那些回忆，真的值得吗？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n我们对于一个长为 $l$ 的数列 $p$，定义函数：\n\n-   $f(p)$ 表示有多少 $1\\le i\\le l$ 满足 $p_i=\\max_{j=1}^i p_j$（即前缀最大值的个数）。\n\n现在，给定 $n,m$，请求出有多少满足以下条件的长为 $n$ 的，值域在 $[m,n]$ 数列 $a$：\n\n-   存在一个排列 $p$ 使得：令 $P_i$ 代表 $p$ 去掉 $p_i$ 后的数列（即 $[p_1,p_2,\\dots,p_{i-1},p_{i+1},\\dots,p_n]$），$f(P_i)=a_i$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数表示 $n,m$。", "outputFormat": "一行一个数，表示答案。", "hint": "**【样例解释 \\#2】**\n\n有以下 $8$ 种不同的 $a$：\n\n1. $\\{4,4,4,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,4,5\\}$；\n2. $\\{3,3,3,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,5,4\\}$；\n3. $\\{3,3,4,4,3\\}$，对应的一种 $p$ 为：$\\{1,2,4,3,5\\}$；\n4. $\\{3,3,3,3,4\\}$，对应的一种 $p$ 为：$\\{1,2,4,5,3\\}$；\n5. $\\{3,4,4,3,3\\}$，对应的一种 $p$ 为：$\\{1,3,2,4,5\\}$；\n6. $\\{3,3,3,4,3\\}$，对应的一种 $p$ 为：$\\{1,3,4,2,5\\}$；\n7. $\\{4,4,3,3,3\\}$，对应的一种 $p$ 为：$\\{2,1,3,4,5\\}$；\n8. $\\{3,3,4,3,3\\}$，对应的一种 $p$ 为：$\\{2,3,1,4,5\\}$。\n\n---\n\n**【数据范围】**\n\n对于所有数据，保证 $3\\le n\\le 2000,1\\le m\\le n $。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\\hline \n\\textbf{子任务编号}&~~\\bm{n\\le} ~~&~~\\bm{m\\le}~~ &\\textbf{分数}\\cr\\hline \n\\textsf1 & 9 &1&8\\cr\\hline \n\\textsf2 & 18&1&12 \\cr\\hline \n\\textsf3 & 70&1&15\\cr\\hline \n\\textsf4 & 70 &&24\\cr\\hline \n\\textsf5 & 300&&18 \\cr\\hline\n\\textsf6 & &&23\\cr\\hline\\end{array}\n$$\n\n没写就是没特殊限制。\n\n---\n\n赫尔德成功算出了不同的恋爱的数量。但她只会经历其中一个。", "locale": "zh-CN"}}}
{"pid": "P8555", "type": "P", "difficulty": 7, "samples": [["5 3\n1 2 3\n", "291154603\n249561089\n1\n"], ["50 5\n4 7 9 14 17\n", "344293672\n864377042\n192544332\n688054502\n97923957\n"]], "limits": {"time": [1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "嘘月", "background": "“我早已认不出你的眼睛，也没有在想念你的面容；\n\n你还是没有说出再见，就化作黑夜离开了。”\n\n[赫尔德看着潮水](https://baike.baidu.com/item/%E4%B8%A5%E7%95%AF/23345630?fr=aladdin)，忽觉这不断上涨的潮水就像是持续上升的热情，它维持着热恋的时间，而激动的情绪又带给我们更多的热情。但是初识的热情终会逐渐平淡，又有多少人能在冷却的心跳中找到其中不变的节奏，走完这一生呢？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n对于一个长为 $n$ 的排列，我们维护一个下标 $t$，初始 $t=m$。\n\n重复以下过程：\n\n- 从下标在 $1\\sim t$ 的元素中选一个没标记过的，并将其标记。若标记的数比上一次标记的数大且 $t<n$，则 $t$ 自增 $1$；否则结束此过程。在你进行第一次标记前，上一次标记的数视为 $0$。\n\n我们称这样的排列是好的：\n\n- 存在某种方法，使得在经过若干次操作后，$t=n$。\n\n现在，给定 $m$，求长为 $n$ 的好的排列在所有长为 $n$ 的排列中所占比例，对 $998244353$ 取模。换言之，若长为 $n$ 的好的排列一共有 $x$ 个，你需要输出 $\\frac x{n!}$ 取模 $998244353$ 的结果。如果你不理解有理数的取模，可以看[这道题目](/problem/P2613)。\n\n有 $q$ 次询问，每次给出一个 $m$。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $q$ 个正整数，表示每次询问的 $m_i$。保证询问升序且两两不同。", "outputFormat": "对于每次询问一行一个整数表示答案对 $998244353$ 取模的值。", "hint": "**【样例解释 \\#1】**\n\n可以使得 $t=n$ 的排列的数量分别为 $5,90,120$，排列总共有 $5!=120$ 种，所以分别需要输出 $\\frac{5}{120},\\frac{90}{120},\\frac{120}{120}$。取模后即为样例输出中的答案。\n\n$m=1$ 时，以下是所有可以使得 $t=n$ 的排列：\n\n$$ \\{1,2,3,4,5\\},\\{2,3,4,5,1\\},\\{1,3,4,5,2\\},\\{1,2,4,5,3\\},\\{1,2,3,5,4\\} $$\n\n$m=2$ 时，列出了一些可以使得 $t=n$ 的排列：\n\n$$ \\{1,4,2,3,5\\},\\{1,5,4,3,2\\} $$\n\n和一些不能使得 $t=n$ 的排列：\n\n$$ \\{5,4,3,2,1\\},\\{3,5,2,1,4\\} $$\n\n---\n\n**【数据范围】**\n\n保证 $1\\le q\\le n\\le 10^5$，$1\\leq m_i \\leq n$，询问的 $m_i$ 互不相同且升序排列。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\\hline \n\\textbf{子任务编号}&\\bm{~~~~~~~n\\le~~~~~~~}&\\textbf{~~~特殊限制~~~}&\\textbf{~~分数~~}\\cr\\hline \n\\textsf1 & 5 &&7\\cr\\hline \n\\textsf2 & 200&&23\\cr\\hline \n\\textsf3 & 2\\times 10^4 &m_i=1& 9\\cr \\hline \n\\textsf4 & 2\\times 10^4 &2m_i\\ge n& 3\\cr \\hline \n\\textsf5 & 2\\times 10^4 &&12\\cr\\hline \n\\textsf6 &  &q=1&36\\cr\\hline \n\\textsf7 &  &&10\\cr\\hline \n\\end{array}\n$$\n\n提示：$O(n^2)$ 能跑挺多点的。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "嘘月", "background": "“我早已认不出你的眼睛，也没有在想念你的面容；\n\n你还是没有说出再见，就化作黑夜离开了。”\n\n[赫尔德看着潮水](https://baike.baidu.com/item/%E4%B8%A5%E7%95%AF/23345630?fr=aladdin)，忽觉这不断上涨的潮水就像是持续上升的热情，它维持着热恋的时间，而激动的情绪又带给我们更多的热情。但是初识的热情终会逐渐平淡，又有多少人能在冷却的心跳中找到其中不变的节奏，走完这一生呢？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n对于一个长为 $n$ 的排列，我们维护一个下标 $t$，初始 $t=m$。\n\n重复以下过程：\n\n- 从下标在 $1\\sim t$ 的元素中选一个没标记过的，并将其标记。若标记的数比上一次标记的数大且 $t<n$，则 $t$ 自增 $1$；否则结束此过程。在你进行第一次标记前，上一次标记的数视为 $0$。\n\n我们称这样的排列是好的：\n\n- 存在某种方法，使得在经过若干次操作后，$t=n$。\n\n现在，给定 $m$，求长为 $n$ 的好的排列在所有长为 $n$ 的排列中所占比例，对 $998244353$ 取模。换言之，若长为 $n$ 的好的排列一共有 $x$ 个，你需要输出 $\\frac x{n!}$ 取模 $998244353$ 的结果。如果你不理解有理数的取模，可以看[这道题目](/problem/P2613)。\n\n有 $q$ 次询问，每次给出一个 $m$。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $q$ 个正整数，表示每次询问的 $m_i$。保证询问升序且两两不同。", "outputFormat": "对于每次询问一行一个整数表示答案对 $998244353$ 取模的值。", "hint": "**【样例解释 \\#1】**\n\n可以使得 $t=n$ 的排列的数量分别为 $5,90,120$，排列总共有 $5!=120$ 种，所以分别需要输出 $\\frac{5}{120},\\frac{90}{120},\\frac{120}{120}$。取模后即为样例输出中的答案。\n\n$m=1$ 时，以下是所有可以使得 $t=n$ 的排列：\n\n$$ \\{1,2,3,4,5\\},\\{2,3,4,5,1\\},\\{1,3,4,5,2\\},\\{1,2,4,5,3\\},\\{1,2,3,5,4\\} $$\n\n$m=2$ 时，列出了一些可以使得 $t=n$ 的排列：\n\n$$ \\{1,4,2,3,5\\},\\{1,5,4,3,2\\} $$\n\n和一些不能使得 $t=n$ 的排列：\n\n$$ \\{5,4,3,2,1\\},\\{3,5,2,1,4\\} $$\n\n---\n\n**【数据范围】**\n\n保证 $1\\le q\\le n\\le 10^5$，$1\\leq m_i \\leq n$，询问的 $m_i$ 互不相同且升序排列。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c|c}\\hline \n\\textbf{子任务编号}&\\bm{~~~~~~~n\\le~~~~~~~}&\\textbf{~~~特殊限制~~~}&\\textbf{~~分数~~}\\cr\\hline \n\\textsf1 & 5 &&7\\cr\\hline \n\\textsf2 & 200&&23\\cr\\hline \n\\textsf3 & 2\\times 10^4 &m_i=1& 9\\cr \\hline \n\\textsf4 & 2\\times 10^4 &2m_i\\ge n& 3\\cr \\hline \n\\textsf5 & 2\\times 10^4 &&12\\cr\\hline \n\\textsf6 &  &q=1&36\\cr\\hline \n\\textsf7 &  &&10\\cr\\hline \n\\end{array}\n$$\n\n提示：$O(n^2)$ 能跑挺多点的。\n", "locale": "zh-CN"}}}
{"pid": "P8556", "type": "P", "difficulty": 7, "samples": [["3 1\n", "6\n"], ["5 3\n", "8\n"], ["500000 100000\n", "226048544\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "多项式", "洛谷原创", "O2优化", "组合数学", "线性递推", "洛谷月赛"], "title": "心跳 加强版", "background": "本题为 [洛谷 9 月月赛 II & NR I. E. 心跳](/problem/P8554) 的加强版，唯一的区别在于数据范围改为 $n \\le 5 \\times {10}^6$。\n\n---\n\n“清晰的跳动声传达来的，重叠的声响和流动的思念。\n\n约定再也不要分开吧，希望无论何时都不要让你寂寞。”\n\n恋爱之时，人的心情不会一成不变，可喜悦和悲伤会随着时间流逝而归于平淡。最令人难忘的是那些“心动”的感觉，那些因未曾经历而喜出望外的感觉。因此，有些时候，失去某些特别美好的回忆，反而能让心动的感觉增多。可为此失去那些回忆，真的值得吗？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n我们对于一个长为 $l$ 的数列 $p$，定义函数：\n\n-   $f(p)$ 表示有多少 $1\\le i\\le l$ 满足 $p_i=\\max_{j=1}^i p_j$（即前缀最大值的个数）。\n\n现在，给定 $n,m$，请求出有多少满足以下条件的长为 $n$ 的，值域在 $[m,n]$ 数列 $a$：\n\n-   存在一个排列 $p$ 使得：令 $P_i$ 代表 $p$ 去掉 $p_i$ 后的数列（即 $[p_1,p_2,\\dots,p_{i-1},p_{i+1},\\dots,p_n]$），$f(P_i)=a_i$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数表示 $n,m$。", "outputFormat": "一行一个数，表示答案。", "hint": "**【样例解释 \\#2】**\n\n有以下 $8$ 种不同的 $a$：\n\n1. $\\{4,4,4,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,4,5\\}$；\n2. $\\{3,3,3,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,5,4\\}$；\n3. $\\{3,3,4,4,3\\}$，对应的一种 $p$ 为：$\\{1,2,4,3,5\\}$；\n4. $\\{3,3,3,3,4\\}$，对应的一种 $p$ 为：$\\{1,2,4,5,3\\}$；\n5. $\\{3,4,4,3,3\\}$，对应的一种 $p$ 为：$\\{1,3,2,4,5\\}$；\n6. $\\{3,3,3,4,3\\}$，对应的一种 $p$ 为：$\\{1,3,4,2,5\\}$；\n7. $\\{4,4,3,3,3\\}$，对应的一种 $p$ 为：$\\{2,1,3,4,5\\}$；\n8. $\\{3,3,4,3,3\\}$，对应的一种 $p$ 为：$\\{2,3,1,4,5\\}$。\n\n---\n\n**【数据范围】**\n\n对于所有数据，保证 $1 \\le m < n \\le 5 \\times {10}^6$。\n\n---\n\n赫尔德成功算出了不同的恋爱的数量。但她只会经历其中一个。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "心跳 加强版", "background": "本题为 [洛谷 9 月月赛 II & NR I. E. 心跳](/problem/P8554) 的加强版，唯一的区别在于数据范围改为 $n \\le 5 \\times {10}^6$。\n\n---\n\n“清晰的跳动声传达来的，重叠的声响和流动的思念。\n\n约定再也不要分开吧，希望无论何时都不要让你寂寞。”\n\n恋爱之时，人的心情不会一成不变，可喜悦和悲伤会随着时间流逝而归于平淡。最令人难忘的是那些“心动”的感觉，那些因未曾经历而喜出望外的感觉。因此，有些时候，失去某些特别美好的回忆，反而能让心动的感觉增多。可为此失去那些回忆，真的值得吗？", "description": "赫尔德想对上面的问题进行探究，她想先做一些统计，于是她抽象了这个问题。\n\n我们对于一个长为 $l$ 的数列 $p$，定义函数：\n\n-   $f(p)$ 表示有多少 $1\\le i\\le l$ 满足 $p_i=\\max_{j=1}^i p_j$（即前缀最大值的个数）。\n\n现在，给定 $n,m$，请求出有多少满足以下条件的长为 $n$ 的，值域在 $[m,n]$ 数列 $a$：\n\n-   存在一个排列 $p$ 使得：令 $P_i$ 代表 $p$ 去掉 $p_i$ 后的数列（即 $[p_1,p_2,\\dots,p_{i-1},p_{i+1},\\dots,p_n]$），$f(P_i)=a_i$。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "一行两个正整数表示 $n,m$。", "outputFormat": "一行一个数，表示答案。", "hint": "**【样例解释 \\#2】**\n\n有以下 $8$ 种不同的 $a$：\n\n1. $\\{4,4,4,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,4,5\\}$；\n2. $\\{3,3,3,4,4\\}$，对应的一种 $p$ 为：$\\{1,2,3,5,4\\}$；\n3. $\\{3,3,4,4,3\\}$，对应的一种 $p$ 为：$\\{1,2,4,3,5\\}$；\n4. $\\{3,3,3,3,4\\}$，对应的一种 $p$ 为：$\\{1,2,4,5,3\\}$；\n5. $\\{3,4,4,3,3\\}$，对应的一种 $p$ 为：$\\{1,3,2,4,5\\}$；\n6. $\\{3,3,3,4,3\\}$，对应的一种 $p$ 为：$\\{1,3,4,2,5\\}$；\n7. $\\{4,4,3,3,3\\}$，对应的一种 $p$ 为：$\\{2,1,3,4,5\\}$；\n8. $\\{3,3,4,3,3\\}$，对应的一种 $p$ 为：$\\{2,3,1,4,5\\}$。\n\n---\n\n**【数据范围】**\n\n对于所有数据，保证 $1 \\le m < n \\le 5 \\times {10}^6$。\n\n---\n\n赫尔德成功算出了不同的恋爱的数量。但她只会经历其中一个。", "locale": "zh-CN"}}}
{"pid": "P8557", "type": "P", "difficulty": 3, "samples": [["2 2", "9"], ["4 5", "923521"], ["233 123", "81633405"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "组合数学", "容斥原理"], "title": "炼金术（Alchemy）", "background": "", "description": "铃是一个爱玩游戏的女孩子。\n\n她在游戏中想要炼制一种稀有合金 —— 这需要 $n$ 种金属来合成。\n\n她准备好矿石后建造了 $k$ 个不同的熔炉，当熔炉启动时，会随机炼出这 $n$ 种金属中的一些（也可能什么都没有）。\n\n如果把每个熔炉炼出的金属收集起来，有了全部 $n$ 种金属，就能造出合金了。澪对此很好奇，对铃说：「我考考你，有多少种情况可以炼出合金呢？」这个简单的问题铃很快就会做了，你能求出结果吗？\n\n答案可能很大，请对 $998244353$ 取模（即除以 $998244353$ 的余数）后输出。", "inputFormat": "输入一行两个正整数 $n,k$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例一解释】  \n对于所有成功情况，两个熔炉中的金属如下表：\n\n| 一号  | 二号 |\n| :----------: | :----------: |\n| $\\varnothing$ | $\\{1,2\\}$ |\n| $\\{1\\}$ | $\\{2\\}$ |\n| $\\{1\\}$ | $\\{1,2\\}$ |\n| $\\{2\\}$ | $\\{1\\}$ |\n| $\\{2\\}$ | $\\{1,2\\}$ |\n| $\\{1,2\\}$ | $\\varnothing$ |\n| $\\{1,2\\}$ | $\\{1\\}$ |\n| $\\{1,2\\}$ | $\\{2\\}$ |\n| $\\{1,2\\}$ | $\\{1,2\\}$ |\n\n一共 $9$ 种，因此答案为 $9$。\n\n【数据范围】  \n对于 $30\\%$ 的数据，$1\\le n,k \\le 10$；  \n对于 $80\\%$ 的数据，$1\\le n,k \\le 10^6$；  \n对于 $100\\%$ 的数据，$1\\le n,k \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "炼金术（Alchemy）", "background": "", "description": "铃是一个爱玩游戏的女孩子。\n\n她在游戏中想要炼制一种稀有合金 —— 这需要 $n$ 种金属来合成。\n\n她准备好矿石后建造了 $k$ 个不同的熔炉，当熔炉启动时，会随机炼出这 $n$ 种金属中的一些（也可能什么都没有）。\n\n如果把每个熔炉炼出的金属收集起来，有了全部 $n$ 种金属，就能造出合金了。澪对此很好奇，对铃说：「我考考你，有多少种情况可以炼出合金呢？」这个简单的问题铃很快就会做了，你能求出结果吗？\n\n答案可能很大，请对 $998244353$ 取模（即除以 $998244353$ 的余数）后输出。", "inputFormat": "输入一行两个正整数 $n,k$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例一解释】  \n对于所有成功情况，两个熔炉中的金属如下表：\n\n| 一号  | 二号 |\n| :----------: | :----------: |\n| $\\varnothing$ | $\\{1,2\\}$ |\n| $\\{1\\}$ | $\\{2\\}$ |\n| $\\{1\\}$ | $\\{1,2\\}$ |\n| $\\{2\\}$ | $\\{1\\}$ |\n| $\\{2\\}$ | $\\{1,2\\}$ |\n| $\\{1,2\\}$ | $\\varnothing$ |\n| $\\{1,2\\}$ | $\\{1\\}$ |\n| $\\{1,2\\}$ | $\\{2\\}$ |\n| $\\{1,2\\}$ | $\\{1,2\\}$ |\n\n一共 $9$ 种，因此答案为 $9$。\n\n【数据范围】  \n对于 $30\\%$ 的数据，$1\\le n,k \\le 10$；  \n对于 $80\\%$ 的数据，$1\\le n,k \\le 10^6$；  \n对于 $100\\%$ 的数据，$1\\le n,k \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8558", "type": "P", "difficulty": 6, "samples": [["1 1 1 1", "443664158"], ["2 3 4 2", "128260948"], ["4 6 9 2", "622775535"], ["58 88 133 233", "128518400"], ["114514 1919810 4999231 8214898", "823989766"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "组合数学", "期望"], "title": "黑暗（Darkness）", "background": "", "description": "铃在一个黑暗的三维空间内寻找澪。这个空间可以表示为 $\\{(x,y,z) \\mid x \\in[0,A],y \\in [0,B],z\\in [0,C] \\}$。铃初始站在坐标为 $(A,B,C)$ 处，澪站在 $(0,0,0)$ 处。假设铃在 $(x,y,z)$ 处，她每次移动会**均匀随机**地尝试移动到 $(x-1,y,z)$ 或 $(x,y-1,z)$ 或 $(x,y,z-1)$。\n\n这个空间的外围是墙壁，不可穿过。由于空间内很暗，铃并不知道自己是否走到了墙边。也就是说，她在随机选择三种方向尝试移动时，有可能撞在墙上。\n\n铃想要知道，自己在第一次撞墙时，「到澪的曼哈顿距离（在本题中的情况就是 $x,y,z$ 坐标之和）」的 $k$ 次方的期望值。\n\n你只需要求出答案对 $998244353$ 取模的结果。", "inputFormat": "输入一行四个正整数 $A,B,C,k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例 $1$ 解释】 \n\n下表列出了走到各处并撞到墙的概率：\n\n| $(0,0,0)$ | $(1,0,0)$ | $(0,1,0)$ | $(0,0,1)$ | $(1,1,0)$ | $(1,0,1)$ | $(0,1,1)$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $2/9$ | $4/27$ | $4/27$ | $4/27$ | $1/9$ | $1/9$ | $1/9$ |\n\n可以发现只有在这 $7$ 个位置有可能撞到墙。由此算出期望值为 $\\dfrac{10}{9}$，在模 $998244353$ 意义下为 $443664158$。\n\n\n【样例 $2,3$ 解释】   \n\n这里要算的都是距离的平方的期望。实际答案分别为 $\\dfrac{30083}{2187}$ 和 $\\dfrac{22748643655}{387420489}$。\n\n【数据范围】  \n\n**本题采用捆绑测试。**\n\nSubtask1（8 pts）：$1\\le A,B,C,k\\le 6$；   \nSubtask2（19 pts）：$1\\le A,B,C \\le 100$；  \nSubtask3（13 pts）：$k=1$；  \nSubtask4（23 pts）：$1\\le A,B,C,k \\le 10^5$；  \nSubtask5（37 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le A,B,C \\le 5\\times 10^6$，$1\\le k \\le 10^7$。\n\n【提示】  \n\n对于离散随机变量 $X$，其取值等于 $k$ 的概率设为 $P_k$，则 $X$ 的期望值定义为：\n\n$$\\sum_k kP_k$$\n\n对于有理数 $a/b$（$a,b$ 均为正整数），若整数 $r$ 满足 $r\\in[0,p-1]$ 且 $rb \\equiv a \\pmod p$，则 $r$ 就是 $a/b$ 对 $p$ 取模的结果。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "黑暗（Darkness）", "background": "", "description": "铃在一个黑暗的三维空间内寻找澪。这个空间可以表示为 $\\{(x,y,z) \\mid x \\in[0,A],y \\in [0,B],z\\in [0,C] \\}$。铃初始站在坐标为 $(A,B,C)$ 处，澪站在 $(0,0,0)$ 处。假设铃在 $(x,y,z)$ 处，她每次移动会**均匀随机**地尝试移动到 $(x-1,y,z)$ 或 $(x,y-1,z)$ 或 $(x,y,z-1)$。\n\n这个空间的外围是墙壁，不可穿过。由于空间内很暗，铃并不知道自己是否走到了墙边。也就是说，她在随机选择三种方向尝试移动时，有可能撞在墙上。\n\n铃想要知道，自己在第一次撞墙时，「到澪的曼哈顿距离（在本题中的情况就是 $x,y,z$ 坐标之和）」的 $k$ 次方的期望值。\n\n你只需要求出答案对 $998244353$ 取模的结果。", "inputFormat": "输入一行四个正整数 $A,B,C,k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例 $1$ 解释】 \n\n下表列出了走到各处并撞到墙的概率：\n\n| $(0,0,0)$ | $(1,0,0)$ | $(0,1,0)$ | $(0,0,1)$ | $(1,1,0)$ | $(1,0,1)$ | $(0,1,1)$ |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |\n| $2/9$ | $4/27$ | $4/27$ | $4/27$ | $1/9$ | $1/9$ | $1/9$ |\n\n可以发现只有在这 $7$ 个位置有可能撞到墙。由此算出期望值为 $\\dfrac{10}{9}$，在模 $998244353$ 意义下为 $443664158$。\n\n\n【样例 $2,3$ 解释】   \n\n这里要算的都是距离的平方的期望。实际答案分别为 $\\dfrac{30083}{2187}$ 和 $\\dfrac{22748643655}{387420489}$。\n\n【数据范围】  \n\n**本题采用捆绑测试。**\n\nSubtask1（8 pts）：$1\\le A,B,C,k\\le 6$；   \nSubtask2（19 pts）：$1\\le A,B,C \\le 100$；  \nSubtask3（13 pts）：$k=1$；  \nSubtask4（23 pts）：$1\\le A,B,C,k \\le 10^5$；  \nSubtask5（37 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le A,B,C \\le 5\\times 10^6$，$1\\le k \\le 10^7$。\n\n【提示】  \n\n对于离散随机变量 $X$，其取值等于 $k$ 的概率设为 $P_k$，则 $X$ 的期望值定义为：\n\n$$\\sum_k kP_k$$\n\n对于有理数 $a/b$（$a,b$ 均为正整数），若整数 $r$ 满足 $r\\in[0,p-1]$ 且 $rb \\equiv a \\pmod p$，则 $r$ 就是 $a/b$ 对 $p$ 取模的结果。", "locale": "zh-CN"}}}
{"pid": "P8559", "type": "P", "difficulty": 7, "samples": [["3 3 2", "4"], ["10 9 11\n", "776"], ["10 8 7", "6776"], ["233 123 114", "22504357"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "递推", "莫队", "洛谷原创", "O2优化", "生成函数", "高斯消元"], "title": "寻宝（Treasure）", "background": "", "description": "铃准备到一个 $2$ 行 $n+1$ 列的方格图上寻宝。   \n有这样寻宝的机会，她不会放过任何一个可以获取的宝物。\n\n每个方格都有两种状态：**空地** 或 **墙壁**。\n\n**空地** 可以被自由穿过，除了第一列的下面都埋藏有宝物，地图的第一列一定是空地，也是地图的入口。\n\n**墙壁** 不能被穿过。\n\n需要注意的是，她每次只能移动到相邻的方格，且地图的边界也是不能被穿过的。\n\n铃还不知道地图的形态，正在考虑策略时，澪说：「我知道地图中恰好有 $k$ 个墙壁哦，对于所有可能的地图，有多少种情况你能找到恰好 $m$ 个宝物呢？」  \n「那我不回答又怎样嘛。」铃只想着挖宝，轻浮地答道。  \n「欸？那还有好几个藏宝点我就不告诉你了～」澪表现出一副认真的样子，「不过我也不难为你，你求出答案对 $998244353$ 取模的结果就可以啦。」\n\n铃没有办法，只能请你帮忙算出答案。", "inputFormat": "仅一行三个正整数 $n,k,m$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例一解释】\n\n地图大小为 $2\\times(3+1)$，有 $3$ 个障碍。其中有 $4$ 种情况可以找到恰好 $2$ 个宝物，具体如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rd7xxuhd.png)\n\n图中绿色的部分表示入口，灰色表示墙壁，白色代表**有宝藏的**空地。  \n可以看出，有且仅有图中 $4$ 种情况可以由入口走到恰好 $2$ 块空地上，即获得 $2$ 个宝物。\n\n故答案为 $4$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask1（11 pts）：$n\\leq 12$；  \nSubtask2（19 pts）：$n\\leq 1000$；  \nSubtask3（31 pts）：$n \\leq 5\\times 10^4$；  \nSubtask4（39 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n \\le 3\\times 10^6$，$m,k\\geq 2$，$m+k\\leq 2n$。\n\n【提示】   \n这是一道 OI 题，不是证明题。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "寻宝（Treasure）", "background": "", "description": "铃准备到一个 $2$ 行 $n+1$ 列的方格图上寻宝。   \n有这样寻宝的机会，她不会放过任何一个可以获取的宝物。\n\n每个方格都有两种状态：**空地** 或 **墙壁**。\n\n**空地** 可以被自由穿过，除了第一列的下面都埋藏有宝物，地图的第一列一定是空地，也是地图的入口。\n\n**墙壁** 不能被穿过。\n\n需要注意的是，她每次只能移动到相邻的方格，且地图的边界也是不能被穿过的。\n\n铃还不知道地图的形态，正在考虑策略时，澪说：「我知道地图中恰好有 $k$ 个墙壁哦，对于所有可能的地图，有多少种情况你能找到恰好 $m$ 个宝物呢？」  \n「那我不回答又怎样嘛。」铃只想着挖宝，轻浮地答道。  \n「欸？那还有好几个藏宝点我就不告诉你了～」澪表现出一副认真的样子，「不过我也不难为你，你求出答案对 $998244353$ 取模的结果就可以啦。」\n\n铃没有办法，只能请你帮忙算出答案。", "inputFormat": "仅一行三个正整数 $n,k,m$。", "outputFormat": "仅一行一个整数表示答案。", "hint": "【样例一解释】\n\n地图大小为 $2\\times(3+1)$，有 $3$ 个障碍。其中有 $4$ 种情况可以找到恰好 $2$ 个宝物，具体如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rd7xxuhd.png)\n\n图中绿色的部分表示入口，灰色表示墙壁，白色代表**有宝藏的**空地。  \n可以看出，有且仅有图中 $4$ 种情况可以由入口走到恰好 $2$ 块空地上，即获得 $2$ 个宝物。\n\n故答案为 $4$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask1（11 pts）：$n\\leq 12$；  \nSubtask2（19 pts）：$n\\leq 1000$；  \nSubtask3（31 pts）：$n \\leq 5\\times 10^4$；  \nSubtask4（39 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n \\le 3\\times 10^6$，$m,k\\geq 2$，$m+k\\leq 2n$。\n\n【提示】   \n这是一道 OI 题，不是证明题。", "locale": "zh-CN"}}}
{"pid": "P8560", "type": "P", "difficulty": 7, "samples": [["3 0 2", "9"], ["3 2 2", "198"], ["4 3 2", "16008"], ["6 4 2", "58351320"], ["514 250 114", "354914151"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "组合数学", "生成函数", "快速傅里叶变换 FFT", "拉格朗日反演"], "title": "约定（Promise）", "background": "在化为废墟的城市中，大雨倾盆而降。\n\n「魔女之夜」被击败后，圆和焰也已遍体鳞伤，因魔力不足而倒地不起。\n\n「我们，也已经完了......」圆轻叹道。  \n\n「那悲叹之种呢？」焰的语气中还带着一丝希望。\n\n圆沉默不语，望着天空，只是无奈地摇了摇头。\n\n「是吗...... 我说，我们就这样一起变成怪物，把这世界的一切都搞得一团糟吧。」焰说着，不由地啜泣起来。「把那些讨厌的事和悲伤的事，全都和没发生过一样，破坏掉、破坏掉、破坏殆尽...... 你不觉得，这样也很好吗？」\n\n随着一声清脆的碰撞，焰感觉到魔力流入了自己的灵魂宝石内。她转头看见圆正微笑着，拿着一枚悲叹之种。\n\n「刚才那是骗你的，」圆的笑容依旧那么甜美，「我还留着一个呢。」\n\n焰慌忙抱住了圆的手臂，问到：「为什么，为什么要给我？」\n\n「因为有件我做不到，但是小焰能做到的事，我想拜托你...... 小焰，你可以回到过去对吧？你说过，为了避免这样的结局，而改写过历史的吧......」\n\n「嗯...」\n\n圆也终于忍不住悲伤，晶莹的泪珠从她脸上滑落。「你能去救救那个还没被丘比欺骗的，笨蛋的我吗？」\n\n**「我答应你，一定会救你的！无论重复多少次，我都会保护好你！」**\n\n「太好了......」圆平静了下来，但下一瞬间，她的灵魂宝石中就散出了黑雾，她的表情也痛苦地扭曲了起来。「再......拜托你一件事可以吗？」\n\n焰轻轻点头答应。\n\n「我，不想变成魔女......」圆的声音更加虚弱，「就算有讨厌的事和悲伤的事，但我想守护的东西，在这世上还有很多。」圆艰难地抬起手臂，支撑着手中漆黑的灵魂宝石。\n\n「小圆......」焰拔出手枪，对准了圆的灵魂宝石。在焰的痛哭声中，她扣下了扳机。\n", "description": "澪正陪着铃一起 N 刷《魔法少女小圆》，看到全剧最催人泪下的情节之一时，家长却突然推门进来了。澪不想被发现自己在摸鱼，就迅速切换界面，假装她们在做一道计数题：\n\n\n> 定义一棵有标号、有根、不区分左右儿子的二叉树的权值是：以「根节点的所有儿子节点」为根的子树的权值之和加上 $d$，特别定义只有一个节点的树权值为 $1$。求所有 $n$ 个节点的这种树权值的 $k$ 次方和，答案对 $998244353$ 取模。\n\n「这不是那个什么 [NaCly_Fish's Math Contest](https://www.luogu.com.cn/contest/53104) 的题... 吗？」铃看了看题，小声说道，「好无聊哦，不看这题。」", "inputFormat": "输入一行三个正整数 $n,k,d$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例 $1$ 解释】\n\n$3$ 个节点的有标号有根二叉树有 $9$ 种，分别如下，其中标红的节点表示树根。\n![](https://cdn.luogu.com.cn/upload/image_hosting/266knse0.png)  \n由于 $k=0$，所有树权值的 $k$ 次方和就等于树的总数，故答案为 $9$。\n\n【样例 $2$ 解释】  \n接上图，图中第一行的树权值都为 $5$，第二行的树权值为 $4$，故答案为 $6\\times 5^2+3\\times 4^2=198$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask1（5 pts）：$n \\le 6$；  \nSubtask2（9 pts）：$k=0$，$n\\le 10^7$；      \nSubtask3（14 pts）：$n\\le 10^5$；   \nSubtask4（18 pts）：$k \\le 4000$，$n\\le 10^7$；  \nSubtask5（23 pts）：$k \\le 10^5$；  \nSubtask6（31 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n,d \\le 9\\times 10^8$，$0\\le k \\le 5\\times 10^6$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "约定（Promise）", "background": "在化为废墟的城市中，大雨倾盆而降。\n\n「魔女之夜」被击败后，圆和焰也已遍体鳞伤，因魔力不足而倒地不起。\n\n「我们，也已经完了......」圆轻叹道。  \n\n「那悲叹之种呢？」焰的语气中还带着一丝希望。\n\n圆沉默不语，望着天空，只是无奈地摇了摇头。\n\n「是吗...... 我说，我们就这样一起变成怪物，把这世界的一切都搞得一团糟吧。」焰说着，不由地啜泣起来。「把那些讨厌的事和悲伤的事，全都和没发生过一样，破坏掉、破坏掉、破坏殆尽...... 你不觉得，这样也很好吗？」\n\n随着一声清脆的碰撞，焰感觉到魔力流入了自己的灵魂宝石内。她转头看见圆正微笑着，拿着一枚悲叹之种。\n\n「刚才那是骗你的，」圆的笑容依旧那么甜美，「我还留着一个呢。」\n\n焰慌忙抱住了圆的手臂，问到：「为什么，为什么要给我？」\n\n「因为有件我做不到，但是小焰能做到的事，我想拜托你...... 小焰，你可以回到过去对吧？你说过，为了避免这样的结局，而改写过历史的吧......」\n\n「嗯...」\n\n圆也终于忍不住悲伤，晶莹的泪珠从她脸上滑落。「你能去救救那个还没被丘比欺骗的，笨蛋的我吗？」\n\n**「我答应你，一定会救你的！无论重复多少次，我都会保护好你！」**\n\n「太好了......」圆平静了下来，但下一瞬间，她的灵魂宝石中就散出了黑雾，她的表情也痛苦地扭曲了起来。「再......拜托你一件事可以吗？」\n\n焰轻轻点头答应。\n\n「我，不想变成魔女......」圆的声音更加虚弱，「就算有讨厌的事和悲伤的事，但我想守护的东西，在这世上还有很多。」圆艰难地抬起手臂，支撑着手中漆黑的灵魂宝石。\n\n「小圆......」焰拔出手枪，对准了圆的灵魂宝石。在焰的痛哭声中，她扣下了扳机。\n", "description": "澪正陪着铃一起 N 刷《魔法少女小圆》，看到全剧最催人泪下的情节之一时，家长却突然推门进来了。澪不想被发现自己在摸鱼，就迅速切换界面，假装她们在做一道计数题：\n\n\n> 定义一棵有标号、有根、不区分左右儿子的二叉树的权值是：以「根节点的所有儿子节点」为根的子树的权值之和加上 $d$，特别定义只有一个节点的树权值为 $1$。求所有 $n$ 个节点的这种树权值的 $k$ 次方和，答案对 $998244353$ 取模。\n\n「这不是那个什么 [NaCly_Fish's Math Contest](https://www.luogu.com.cn/contest/53104) 的题... 吗？」铃看了看题，小声说道，「好无聊哦，不看这题。」", "inputFormat": "输入一行三个正整数 $n,k,d$。", "outputFormat": "输出一行一个整数，表示答案。", "hint": "【样例 $1$ 解释】\n\n$3$ 个节点的有标号有根二叉树有 $9$ 种，分别如下，其中标红的节点表示树根。\n![](https://cdn.luogu.com.cn/upload/image_hosting/266knse0.png)  \n由于 $k=0$，所有树权值的 $k$ 次方和就等于树的总数，故答案为 $9$。\n\n【样例 $2$ 解释】  \n接上图，图中第一行的树权值都为 $5$，第二行的树权值为 $4$，故答案为 $6\\times 5^2+3\\times 4^2=198$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask1（5 pts）：$n \\le 6$；  \nSubtask2（9 pts）：$k=0$，$n\\le 10^7$；      \nSubtask3（14 pts）：$n\\le 10^5$；   \nSubtask4（18 pts）：$k \\le 4000$，$n\\le 10^7$；  \nSubtask5（23 pts）：$k \\le 10^5$；  \nSubtask6（31 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$2\\le n,d \\le 9\\times 10^8$，$0\\le k \\le 5\\times 10^6$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8561", "type": "P", "difficulty": 7, "samples": [["4 2 2", "765"], ["233 2 99", "161697303"], ["7 4 5", "322237710"], ["10 3 17", "146281933"], ["1919810 114514 2333", "426283611"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "多项式", "洛谷原创", "O2优化", "组合数学", "Stirling 数", "生成函数", "快速傅里叶变换 FFT", "拉格朗日反演"], "title": "送别（Farewell）", "background": "还是到了离别的时候呢...... 相聚的时间很短暂，不知是否给了你一次美好的经历呢？\n\n我举办这场比赛，还是想给自己留下一些珍贵的回忆。虽然自己的水平并不高，但这对我还是很有纪念意义。\n\n经过长时间的准备，在这送别之际，应当更隆重一些的 —— 可惜我并没有那样的能力。若不然，也不会只能以这种程度的题目来压轴。\n\n既然如此，就不要让此次分别成为永别...... 我将全力以赴，为了我们下次再会。这是我自私的请求，但请你等着我回来！\n\n我这贫乏的语言，难以表述心中的情感。不如我们就这样，在离别前静静地享受这段时光吧。", "description": "铃来到了一个奇妙的 Gnilrits 星球，上面生活着一种奇妙的 Gnilrits 人。\n\n这种生物有除了 $k$ 个寿命无限但不能繁殖的个体以外，设其它人的总数在第 $i$ 年为 $a_i$，她得知有规律 $a_i=qa_{i-1}-a_{i-2}$，其中 $a_0=0$，$a_1=1$。\n\n在第 $i$ 年，若 $a_i > k$，则星球上都会依次发生如下事件：\n\n1. 全部 $a_i+k$ 个人被分配到 $a_i$ 个**相同的**住房内，不能有空房（每个人都是不同的）。\n\n2. 每个房屋都修建一条单向道路，连接另一个房屋（可以是自己）；且对任意房屋，都要有一条连向它的道路。最终形成 $a_i-k$ 个环，包括自环。\n\n需要注意的是，在第一步后因为房屋有不同的人居住，它们之间也就是不同的了。\n\n铃想到了一个问题：设第 $i$ 年分配房屋并修建道路的总方案数为 $b_i$（若 $a_i \\leq k$ 则 $b_i=0$），则 $i\\in [0,n]$ 的所有 $b_i$ 之和是多少呢？\n\n铃在思考这个问题时，她突然惊醒了过来 —— 原来刚才的只是一场梦。她正想和澪分享梦中的见闻，才想起以往在她身边的澪，如今已经离开了。\n\n没有办法，但铃还是想知道问题的答案，请你帮忙求出来吧。结果可能很大，你只需要告诉她答案对 $998244353$ 取模的结果即可。\n\n", "inputFormat": "第一行三个正整数 $n,q,k$。 ", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例 $1$ 解释】  \n\n在 $i \\leq 2$ 时 $b_i=0$。\n\n对于 $i=3$ 的情况，$a_i=3$。首先要将 $5$ 个不同的人分配入 $3$ 个相同的房屋，有 $25$ 种方案；再把 $3$ 个变得不同的房屋用环路连接，形成 $1$ 个环，只有 $2$ 种方案，故 $b_3 = 25 \\times 2 = 50$。  \n（更具体的解释见[此处](https://www.luogu.com.cn/paste/usa2ggb4)）\n\n对于 $i=4$，$a_i=4$，将 $6$ 个人分入 $4$ 个房屋有 $65$ 种方案；在 $4$ 个房屋间修路形成 $2$ 个环有 $11$ 种方案，总方案数为 $65\\times 11 = 715$。\n\n故答案为 $50+715=765$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask 1（7 pts）：$1\\le n\\le 1000$，$1\\le k \\le 3$；   \nSubtask 2（11 pts）：$1\\le n,k \\le 100$；   \nSubtask 3（13 pts）：$1 \\le k \\le 1000$；  \nSubtask 4（19 pts）：$1\\le k \\le 32000$，$q=2$；  \nSubtask 5（23 pts）：$1\\le k \\le 16000$，$q \\neq 2$；   \nSubtsak 6（27 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 10^9$，$1\\le k \\le 64000$，$2\\le q \\le 10^9$。  \n\n\n【提示】  \n此题并不难，但可能需要一定程度的常数优化。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "送别（Farewell）", "background": "还是到了离别的时候呢...... 相聚的时间很短暂，不知是否给了你一次美好的经历呢？\n\n我举办这场比赛，还是想给自己留下一些珍贵的回忆。虽然自己的水平并不高，但这对我还是很有纪念意义。\n\n经过长时间的准备，在这送别之际，应当更隆重一些的 —— 可惜我并没有那样的能力。若不然，也不会只能以这种程度的题目来压轴。\n\n既然如此，就不要让此次分别成为永别...... 我将全力以赴，为了我们下次再会。这是我自私的请求，但请你等着我回来！\n\n我这贫乏的语言，难以表述心中的情感。不如我们就这样，在离别前静静地享受这段时光吧。", "description": "铃来到了一个奇妙的 Gnilrits 星球，上面生活着一种奇妙的 Gnilrits 人。\n\n这种生物有除了 $k$ 个寿命无限但不能繁殖的个体以外，设其它人的总数在第 $i$ 年为 $a_i$，她得知有规律 $a_i=qa_{i-1}-a_{i-2}$，其中 $a_0=0$，$a_1=1$。\n\n在第 $i$ 年，若 $a_i > k$，则星球上都会依次发生如下事件：\n\n1. 全部 $a_i+k$ 个人被分配到 $a_i$ 个**相同的**住房内，不能有空房（每个人都是不同的）。\n\n2. 每个房屋都修建一条单向道路，连接另一个房屋（可以是自己）；且对任意房屋，都要有一条连向它的道路。最终形成 $a_i-k$ 个环，包括自环。\n\n需要注意的是，在第一步后因为房屋有不同的人居住，它们之间也就是不同的了。\n\n铃想到了一个问题：设第 $i$ 年分配房屋并修建道路的总方案数为 $b_i$（若 $a_i \\leq k$ 则 $b_i=0$），则 $i\\in [0,n]$ 的所有 $b_i$ 之和是多少呢？\n\n铃在思考这个问题时，她突然惊醒了过来 —— 原来刚才的只是一场梦。她正想和澪分享梦中的见闻，才想起以往在她身边的澪，如今已经离开了。\n\n没有办法，但铃还是想知道问题的答案，请你帮忙求出来吧。结果可能很大，你只需要告诉她答案对 $998244353$ 取模的结果即可。\n\n", "inputFormat": "第一行三个正整数 $n,q,k$。 ", "outputFormat": "输出一行一个整数表示答案。", "hint": "【样例 $1$ 解释】  \n\n在 $i \\leq 2$ 时 $b_i=0$。\n\n对于 $i=3$ 的情况，$a_i=3$。首先要将 $5$ 个不同的人分配入 $3$ 个相同的房屋，有 $25$ 种方案；再把 $3$ 个变得不同的房屋用环路连接，形成 $1$ 个环，只有 $2$ 种方案，故 $b_3 = 25 \\times 2 = 50$。  \n（更具体的解释见[此处](https://www.luogu.com.cn/paste/usa2ggb4)）\n\n对于 $i=4$，$a_i=4$，将 $6$ 个人分入 $4$ 个房屋有 $65$ 种方案；在 $4$ 个房屋间修路形成 $2$ 个环有 $11$ 种方案，总方案数为 $65\\times 11 = 715$。\n\n故答案为 $50+715=765$。\n\n【数据范围】\n\n**本题采用捆绑测试。**\n\nSubtask 1（7 pts）：$1\\le n\\le 1000$，$1\\le k \\le 3$；   \nSubtask 2（11 pts）：$1\\le n,k \\le 100$；   \nSubtask 3（13 pts）：$1 \\le k \\le 1000$；  \nSubtask 4（19 pts）：$1\\le k \\le 32000$，$q=2$；  \nSubtask 5（23 pts）：$1\\le k \\le 16000$，$q \\neq 2$；   \nSubtsak 6（27 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n \\le 10^9$，$1\\le k \\le 64000$，$2\\le q \\le 10^9$。  \n\n\n【提示】  \n此题并不难，但可能需要一定程度的常数优化。\n\n", "locale": "zh-CN"}}}
{"pid": "P8562", "type": "P", "difficulty": 7, "samples": [["3\n3\n2 1 2\n2 2 3\n2 1 3", "2"], ["7\n5 5 133\n10001\n00000\n11111\n00000\n01010", "129"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "提交答案", "枚举", "组合数学"], "title": "十二重骗分法（Cheating XII）", "background": "", "description": "一阵恍惚过后，你发现自己坐在机房里。一看时间，现在竟然是 2202 年！你又环视了一下周围的情况，原来自己在 CSP-J 2202 的考场上。\n\n你还没搞清楚情况时，似乎听见有人对你低语：「想知道怎么回事吗？那就展现你以往的能力，把这次的 CSP-J 也 AK 掉吧。」\n\n于是你看到四个题分别是：  \n\n1. 输入一个正整数 $n$，求 $\\lfloor \\sqrt n \\rfloor$。  \n\n2. 给定一个左右各有 $n$ 个点的二分图，与其中的边，求它完美匹配的方案数，答案对 $998244353$ 取模。\n\n3. 生命游戏（Conway's Game of Life）进行于一个无限大的二维网格上，每个格子要么是空地，要么有一个细胞。每个时刻都会进行一轮**迭代**，规则如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/do0c6ras.png)  \n现在，给定你初始状态，求迭代 $k$ 次后的细胞数。  \nps：你可以在 [这里](https://playgameoflife.com/) 试玩。\n\n4. 给你一个 $n$ 个点、 $m$ 条边的无向图，每个点都可以涂上 $k$ 种颜色中的一种，且相邻的点（即有边直接相连的点）不能有相同的颜色。求有多少种染色方案，答案对 $998244353$ 取模。\n\n「这怎么可能啊！」你差点惊叫出来。不过你发现，唯独你的电脑上有题目的输入数据！你想暴力跑出答案，却发现 2202 年的评测机性能和一百多年前没差别。\n\n那该怎么办呢？总之只能靠自己了吧。\n\n\n**输入数据可以在题目下方的附件中下载。**", "inputFormat": "第一行一个正整数 $T$，表示测试点编号。\n\n若 $T \\in \\{ 1,2\\}$，表示 Subtask 1。接下来一行仅一个正整数 $n$。\n\n若 $T \\in \\{3,4,5,6\\}$，表示 Subtask 2。第二行一个正整数 $n$。\n接下来 $n$ 行，第 $i$ 行先输入一个正整数 $m_i$，表示左部分第 $i$ 个点（记作 $u_i$）的度数为 $m_i$；后面接着 $m_i$ 个整数 $v_{i,1},v_{i,2},\\cdots,v_{i,m_i}$，依次表示与 $u_i$ 连接的右部分节点编号。  \n\n若 $T \\in\\{ 7,8,9\\}$，表示 Subtask 3。第二行输入三个正整数 $n,m,k$，表示输入的初始形态有 $n$ 行 $m$ 列（除此之外是无限大的二维平面，没有其它细胞），迭代 $k$ 次。接下来 $n$ 行，每行一个长度为 $m$ 的 01 串，`0` 表示空地，`1` 表示细胞，描述了一行的形态。\n\n若 $T \\in\\{ 10,11,12\\}$，表示 Subtask 4。第二行输入三个正整数 $n,m,k$。接下来 $m$ 行，每行两个正整数 $u,v$ 描述一条无向边，保证无重边和自环。", "outputFormat": "输出一行一个正整数，表示答案。", "hint": "【样例 $1$ 解释】  \n输入中 $T=3$，要求的问题是二分图完美匹配计数。  \n可以发现，只有两种匹配方案：$1 \\leftrightarrow 1,2 \\leftrightarrow 2,3 \\leftrightarrow 3$\n 或 $1 \\leftrightarrow 2,2 \\leftrightarrow 3,3 \\leftrightarrow 1$。\n \n 【样例 $2$ 解释】  \n 输入中 $T=7$，要求的问题是预测生命游戏细胞数。给出的输入是：  \n ![](https://cdn.luogu.com.cn/upload/image_hosting/0ukc526n.png)   \n 经过 $133$ 轮迭代后为：  \n ![](https://cdn.luogu.com.cn/upload/image_hosting/g6yz6nf3.png)  \n 可以数出其中细胞数为 $129$。  \n \n样例中虽然有 $T\\in[1,12]$，但并不代表实际输入。  \n\n【测试点分数信息】   \n\n| 编号 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| **分数** | $7$ | $8$ | $6$ | $7$ | $9$ | $11$ | $8$ | $9$ | $10$ | $7$ | $8$ | $10$ |\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "十二重骗分法（Cheating XII）", "background": "", "description": "一阵恍惚过后，你发现自己坐在机房里。一看时间，现在竟然是 2202 年！你又环视了一下周围的情况，原来自己在 CSP-J 2202 的考场上。\n\n你还没搞清楚情况时，似乎听见有人对你低语：「想知道怎么回事吗？那就展现你以往的能力，把这次的 CSP-J 也 AK 掉吧。」\n\n于是你看到四个题分别是：  \n\n1. 输入一个正整数 $n$，求 $\\lfloor \\sqrt n \\rfloor$。  \n\n2. 给定一个左右各有 $n$ 个点的二分图，与其中的边，求它完美匹配的方案数，答案对 $998244353$ 取模。\n\n3. 生命游戏（Conway's Game of Life）进行于一个无限大的二维网格上，每个格子要么是空地，要么有一个细胞。每个时刻都会进行一轮**迭代**，规则如下：\n![](https://cdn.luogu.com.cn/upload/image_hosting/do0c6ras.png)  \n现在，给定你初始状态，求迭代 $k$ 次后的细胞数。  \nps：你可以在 [这里](https://playgameoflife.com/) 试玩。\n\n4. 给你一个 $n$ 个点、 $m$ 条边的无向图，每个点都可以涂上 $k$ 种颜色中的一种，且相邻的点（即有边直接相连的点）不能有相同的颜色。求有多少种染色方案，答案对 $998244353$ 取模。\n\n「这怎么可能啊！」你差点惊叫出来。不过你发现，唯独你的电脑上有题目的输入数据！你想暴力跑出答案，却发现 2202 年的评测机性能和一百多年前没差别。\n\n那该怎么办呢？总之只能靠自己了吧。\n\n\n**输入数据可以在题目下方的附件中下载。**", "inputFormat": "第一行一个正整数 $T$，表示测试点编号。\n\n若 $T \\in \\{ 1,2\\}$，表示 Subtask 1。接下来一行仅一个正整数 $n$。\n\n若 $T \\in \\{3,4,5,6\\}$，表示 Subtask 2。第二行一个正整数 $n$。\n接下来 $n$ 行，第 $i$ 行先输入一个正整数 $m_i$，表示左部分第 $i$ 个点（记作 $u_i$）的度数为 $m_i$；后面接着 $m_i$ 个整数 $v_{i,1},v_{i,2},\\cdots,v_{i,m_i}$，依次表示与 $u_i$ 连接的右部分节点编号。  \n\n若 $T \\in\\{ 7,8,9\\}$，表示 Subtask 3。第二行输入三个正整数 $n,m,k$，表示输入的初始形态有 $n$ 行 $m$ 列（除此之外是无限大的二维平面，没有其它细胞），迭代 $k$ 次。接下来 $n$ 行，每行一个长度为 $m$ 的 01 串，`0` 表示空地，`1` 表示细胞，描述了一行的形态。\n\n若 $T \\in\\{ 10,11,12\\}$，表示 Subtask 4。第二行输入三个正整数 $n,m,k$。接下来 $m$ 行，每行两个正整数 $u,v$ 描述一条无向边，保证无重边和自环。", "outputFormat": "输出一行一个正整数，表示答案。", "hint": "【样例 $1$ 解释】  \n输入中 $T=3$，要求的问题是二分图完美匹配计数。  \n可以发现，只有两种匹配方案：$1 \\leftrightarrow 1,2 \\leftrightarrow 2,3 \\leftrightarrow 3$\n 或 $1 \\leftrightarrow 2,2 \\leftrightarrow 3,3 \\leftrightarrow 1$。\n \n 【样例 $2$ 解释】  \n 输入中 $T=7$，要求的问题是预测生命游戏细胞数。给出的输入是：  \n ![](https://cdn.luogu.com.cn/upload/image_hosting/0ukc526n.png)   \n 经过 $133$ 轮迭代后为：  \n ![](https://cdn.luogu.com.cn/upload/image_hosting/g6yz6nf3.png)  \n 可以数出其中细胞数为 $129$。  \n \n样例中虽然有 $T\\in[1,12]$，但并不代表实际输入。  \n\n【测试点分数信息】   \n\n| 编号 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| **分数** | $7$ | $8$ | $6$ | $7$ | $9$ | $11$ | $8$ | $9$ | $10$ | $7$ | $8$ | $10$ |\n\n", "locale": "zh-CN"}}}
{"pid": "P8563", "type": "P", "difficulty": 4, "samples": [["5 7\n2 2 3 4 5\n2 1 5\n1 3 -3\n2 1 5\n2 3 3\n1 1 100000\n1 2 100000\n2 1 2", "240\n20\n1\nToo large"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "二分", "洛谷原创", "O2优化", "洛谷月赛"], "title": "Magenta Potion", "background": "", "description": "给定一个长为 $n$ 的整数序列 $a$，其中所有数的绝对值均大于等于 $2$。有 $q$ 次操作，格式如下：\n\n$\\texttt{1 i k}$，表示将 $a_i$ 修改为 $k$。保证 $k $ 的绝对值大于等于 $2$。\n\n$\\texttt{2 l r}$，考虑 $[l,r]$ 的子区间（包括本身）中乘积最大的的区间乘积 $M$。如果 $M>2^{30}$，输出 `Too large`，否则输出 $M$。特别地，空区间的元素乘积定义为 $1$。", "inputFormat": "第一行两个正整数表示 $n,q$。\n\n第二行输入 $n$ 个**整数**表示 $a_i$。\n\n接下来 $q$ 行，每行三个整数表示一次询问，格式见上。", "outputFormat": "对于每次 $\\tt2$ 操作输出一行表示询问的答案。", "hint": "对于所有的数据，$2\\le |a_i|,|k| \\le 10^9$，$1 \\le n,q \\le 2\\times 10^5$，$1 \\le l \\le r \\le n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\\hline \n\\textbf{测试点编号}&\\bm{~~~~~~~~n,q\\le~~~~~~~~}&~~~~\\textbf{特殊限制}~~~~\\cr\\hline \n\\textsf1\\sim \\sf2 & 10& \\cr\\hline \n\\sf3\\sim 6 & 100&  \\cr\\hline \n\\sf7\\sim 10 & 5 \\times 10^3&\\cr\\hline \n\\sf 11\\sim 13 &  &\\sf A\\cr\\hline \n\\sf14\\sim 16 & & \\sf B\\cr\\hline\n\\sf17\\sim 20 & &\\cr\\hline\n\\end{array}\n$$\n\n$\\textsf A$：保证 $a_i,k \\ge 2$。\n\n$\\textsf B$：保证对于每一组询问，对应的 $r-l \\ge 100$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Magenta Potion", "background": "", "description": "给定一个长为 $n$ 的整数序列 $a$，其中所有数的绝对值均大于等于 $2$。有 $q$ 次操作，格式如下：\n\n$\\texttt{1 i k}$，表示将 $a_i$ 修改为 $k$。保证 $k $ 的绝对值大于等于 $2$。\n\n$\\texttt{2 l r}$，考虑 $[l,r]$ 的子区间（包括本身）中乘积最大的的区间乘积 $M$。如果 $M>2^{30}$，输出 `Too large`，否则输出 $M$。特别地，空区间的元素乘积定义为 $1$。", "inputFormat": "第一行两个正整数表示 $n,q$。\n\n第二行输入 $n$ 个**整数**表示 $a_i$。\n\n接下来 $q$ 行，每行三个整数表示一次询问，格式见上。", "outputFormat": "对于每次 $\\tt2$ 操作输出一行表示询问的答案。", "hint": "对于所有的数据，$2\\le |a_i|,|k| \\le 10^9$，$1 \\le n,q \\le 2\\times 10^5$，$1 \\le l \\le r \\le n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\\hline \n\\textbf{测试点编号}&\\bm{~~~~~~~~n,q\\le~~~~~~~~}&~~~~\\textbf{特殊限制}~~~~\\cr\\hline \n\\textsf1\\sim \\sf2 & 10& \\cr\\hline \n\\sf3\\sim 6 & 100&  \\cr\\hline \n\\sf7\\sim 10 & 5 \\times 10^3&\\cr\\hline \n\\sf 11\\sim 13 &  &\\sf A\\cr\\hline \n\\sf14\\sim 16 & & \\sf B\\cr\\hline\n\\sf17\\sim 20 & &\\cr\\hline\n\\end{array}\n$$\n\n$\\textsf A$：保证 $a_i,k \\ge 2$。\n\n$\\textsf B$：保证对于每一组询问，对应的 $r-l \\ge 100$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8564", "type": "P", "difficulty": 5, "samples": [["8\n11000 18640 32793 36187 45104 64932 66425 \n6 8\n3 6\n3 7\n1 8\n1 4\n3 5\n2 7", "63744"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "背包 DP", "树形 DP", "洛谷月赛"], "title": "ρars/ey", "background": "", "description": "给定一颗有 $n$ 个节点的有根树，其中根节点是 $1$。你可以进行若干次以下操作:\n\n-   选择一个节点，删去其子树内除其以外的点。\n\n此操作的代价为 $f_i$，其中 $i$ 是你选择的节点子树大小。\n\n你希望删掉除了 $1$ 以外的所有点，请问代价的最小值是多少？\n\n\n\n\n\n", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n-1$ 个正整数，第 $i$ 个表示 $f_{i+1}$。\n\n接下来 $n-1$ 行，每行两个正整数，表示一条树边。", "outputFormat": "一行一个正整数表示答案。", "hint": "【样例解释】\n\n先删除节点 $8$ 的子树内除了它自身的 $5$ 个点，再删除节点 $1$ 的子树内除了它自身的 $2$ 个点，代价为 $f_6+f_3=63744$。可以证明这是最小的代价。\n\n【数据范围】\n\n对于所有数据，保证 $1\\le n\\le 5000$，$1\\le f_i\\le 10^9$。\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\\hline \n\\textbf{测试点编号}&\\bm{~~~~~~~~n\\le~~~~~~~~}&~~~~\\textbf{特殊限制}~~~~\\cr\\hline \n\\textsf1\\sim \\sf2 & 8& \\cr\\hline \n\\sf3\\sim 6 & 15&  \\cr\\hline \n\\sf7\\sim 8 & 400&\\textsf{A}\\cr\\hline \n\\textsf9 & 400 &\\sf B\\cr\\hline \n\\sf10\\sim 12 & 400&\\cr\\hline\n\\sf13\\sim 14 & &\\sf C\\cr\\hline\n\\sf15\\sim 20 & &\\cr\\hline\n\\end{array}\n$$\n\n$\\textsf A$：保证树上所有点度数均小于等于 $2$，其中 $1$ 号点度数为 $1$。\n\n$\\textsf B$：保证树上只有 $1$ 号点度数大于等于 $2$。\n\n$\\textsf C$：保证树随机生成，随机生成方式是，对于 $i\\ge 2$，从 $[1,i-1]$ 中随机一个整数 $x$，在 $x$ 与 $i$ 之间连边。然后随机打乱所有节点的编号。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "ρars/ey", "background": "", "description": "给定一颗有 $n$ 个节点的有根树，其中根节点是 $1$。你可以进行若干次以下操作:\n\n-   选择一个节点，删去其子树内除其以外的点。\n\n此操作的代价为 $f_i$，其中 $i$ 是你选择的节点子树大小。\n\n你希望删掉除了 $1$ 以外的所有点，请问代价的最小值是多少？\n\n\n\n\n\n", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n-1$ 个正整数，第 $i$ 个表示 $f_{i+1}$。\n\n接下来 $n-1$ 行，每行两个正整数，表示一条树边。", "outputFormat": "一行一个正整数表示答案。", "hint": "【样例解释】\n\n先删除节点 $8$ 的子树内除了它自身的 $5$ 个点，再删除节点 $1$ 的子树内除了它自身的 $2$ 个点，代价为 $f_6+f_3=63744$。可以证明这是最小的代价。\n\n【数据范围】\n\n对于所有数据，保证 $1\\le n\\le 5000$，$1\\le f_i\\le 10^9$。\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{c|c|c}\\hline \n\\textbf{测试点编号}&\\bm{~~~~~~~~n\\le~~~~~~~~}&~~~~\\textbf{特殊限制}~~~~\\cr\\hline \n\\textsf1\\sim \\sf2 & 8& \\cr\\hline \n\\sf3\\sim 6 & 15&  \\cr\\hline \n\\sf7\\sim 8 & 400&\\textsf{A}\\cr\\hline \n\\textsf9 & 400 &\\sf B\\cr\\hline \n\\sf10\\sim 12 & 400&\\cr\\hline\n\\sf13\\sim 14 & &\\sf C\\cr\\hline\n\\sf15\\sim 20 & &\\cr\\hline\n\\end{array}\n$$\n\n$\\textsf A$：保证树上所有点度数均小于等于 $2$，其中 $1$ 号点度数为 $1$。\n\n$\\textsf B$：保证树上只有 $1$ 号点度数大于等于 $2$。\n\n$\\textsf C$：保证树随机生成，随机生成方式是，对于 $i\\ge 2$，从 $[1,i-1]$ 中随机一个整数 $x$，在 $x$ 与 $i$ 之间连边。然后随机打乱所有节点的编号。", "locale": "zh-CN"}}}
