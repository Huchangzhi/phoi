{"pid": "P9870", "type": "P", "difficulty": 6, "samples": [["3 3 3 3\n8 6 9\n1 7 4\n1 0\n3 0\n0 2\n1 8\n3 5\n1 1\n2 8\n1 7\n", "1001"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "贪心", "2023", "NOIP 提高组", "O2优化", "Ad-hoc"], "title": "[NOIP2023] 双序列拓展", "background": "", "description": "称某个序列 $B = \\{b_1,b_2,\\cdots,b_n\\}$ 是另一个序列 $A = \\{a_1,a_2,\\cdots,a_m\\}$ 的**拓展**当且仅当存在**正整数**序列 $L = \\{l_1,l_2,\\cdots,l_m\\}$，将 $a_i$ 替换为 $l_i$ 个 $a_i$ 后得到序列 $B$。例如，\n\n- $\\{1,3,3,3,2,2,2\\}$ 是 $\\{1,3,3,2\\}$ 的拓展，取 $L = \\{1,1,2,3\\}$ 或 $\\{1,2,1,3\\}$；\n- 而 $\\{1,3,3,2\\}$ 不是 $\\{1,3,3,3,2\\}$ 的拓展，$\\{1,2,3\\}$ 不是 $\\{1,3,2\\}$ 的拓展。\n\n小 R 给了你两个序列 $X$ 和 $Y$，他希望你找到 $X$ 的一个长度为 $l_0 = 10^{100}$ 的拓展 $F = \\{f_i\\}$ 以及 $Y$ 的一个长度为 $l_0$ 的拓展 $G = \\{g_i\\}$，使得任意 $1 \\le i , j \\le l_0$ 都有 $(f_i - g_i)(f_j - g_j) > 0$。由于序列太长，你只需要告诉小 R 是否存在这样的两个序列即可。\n\n为了避免你扔硬币蒙混过关，小 R 还给了 $q$ 次额外询问，每次额外询问中小 R 会修改 $X$ 和 $Y$ 中若干元素的值。你需要对每次得到的新的 $X$ 和 $Y$ 都进行上述的判断。\n\n**询问之间是独立的，每次询问中涉及的修改均在原始序列上完成。**", "inputFormat": "输入的第一行包含四个整数 $c, n, m, q$，分别表示测试点编号、序列 $X$ 的长度、序列 $Y$ 的长度和额外询问的个数。对于样例，$c$ 表示该样例与测试点 $c$ 拥有相同的限制条件。\n\n输入的第二行包含 $n$ 个整数 $x_1,x_2,\\cdots, x_n$，描述序列 $X$。\n\n输入的第三行包含 $m$ 个整数 $y_1,y_2,\\cdots, y_m$，描述序列 $Y$。\n\n接下来依次描述 $q$ 组额外询问。对于每组额外询问：\n\n- 输入的第一行包含两个整数 $k_x$ 和 $k_y$，分别表示对序列 $X$ 和 $Y$ 产生的修改个数。\n- 接下来 $k_x$ 行每行包含两个整数 $p_x, v_x$，表示将 $x_{p_x}$ 修改为 $v_x$。\n- 接下来 $k_y$ 行每行包含两个整数 $p_y, v_y$，表示将 $y_{p_y}$ 修改为 $v_y$。", "outputFormat": "输出一行，其中包含一个长度为 $(q+1)$ 的 `01` 序列，序列的第一个元素表示初始询问的答案，之后 $q$ 个元素依次表示每组额外询问的答案。对于每个询问，如果存在满足题目条件的序列 $F$ 和 $G$，输出 `1`，否则输出 `0`。", "hint": "**【样例解释 #1】**\n\n由于 $F$ 和 $G$ 太长，用省略号表示重复最后一个元素直到序列长度为 $l_0$。如 $\\{1,2,3,3,\\cdots\\}$ 表示序列从第三个元素之后都是 $3$。\n\n以下依次描述四次询问，其中第一次询问为初始询问，之后的三次为额外询问：\n\n1. $A = \\{8,6,9\\}$，$B = \\{1,7,4\\}$，取 $F = \\{8,8,6,9,\\cdots\\}, G = \\{1,7,4,4,\\cdots\\}$；\n2. $A = \\{8,6,0\\}$，$B = \\{1,7,4\\}$，可以证明不存在满足要求的方案；\n3. $A = \\{8,6,9\\}$，$B = \\{8,7,5\\}$，可以证明不存在满足要求的方案；\n4. $A = \\{8,8,9\\}$，$B = \\{7,7,4\\}$，取 $F = \\{8,8,9,\\cdots\\}, G = \\{7,7,4,\\cdots\\}$。\n\n**【样例解释 #2】**\n\n该组样例满足测试点 $4$ 的条件。\n\n**【样例解释 #3】**\n\n该组样例满足测试点 $7$ 的条件。\n\n**【样例解释 #4】**\n\n该组样例满足测试点 $9$ 的条件。\n\n**【样例解释 #5】**\n\n该组样例满足测试点 $18$ 的条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：\n\n- $1 \\le n, m \\le 5 \\times 10 ^ 5$；\n- $0 \\le q \\le 60$；\n- $0 \\le x_i, y_i < 10 ^ 9$；\n- $0 \\le k_x, k_y \\le 5 \\times 10 ^ 5$，且所有额外询问的 $(k_x+k_y)$ 的和不超过 $5 \\times 10 ^ 5$；\n- $1 \\le p_x \\le n$，$1 \\le p_y \\le m$，$0 \\le v_x, v_y < 10 ^ 9$；\n- 对于每组额外询问，$p_x$ 两两不同，$p_y$ 两两不同。\n\n|测试点编号|$n, m \\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$1$|否|\n|$2$|$2$|否|\n|$3, 4$|$6$|否|\n|$5$|$200$|否|\n|$6, 7$|$2000$|否|\n|$8, 9$|$4 \\times 10 ^ 4$|是|\n|$10, 11$|$1.5 \\times 10 ^ 5$|是|\n|$12 \\sim 14$|$5 \\times 10 ^ 5$|是|\n|$15, 16$|$4 \\times 10 ^ 4$|否|\n|$17, 18$|$1.5 \\times 10 ^ 5$|否|\n|$19, 20$|$5 \\times 10 ^ 5$|否|\n\n特殊性质：对于每组询问（包括初始询问和额外询问），保证 $x_1 < y_1$，且 $x_n$ 是序列 $X$ 唯一的一个最小值，$y_m$ 是序列 $Y$ 唯一的一个最大值。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOIP2023] 双序列拓展", "background": "", "description": "称某个序列 $B = \\{b_1,b_2,\\cdots,b_n\\}$ 是另一个序列 $A = \\{a_1,a_2,\\cdots,a_m\\}$ 的**拓展**当且仅当存在**正整数**序列 $L = \\{l_1,l_2,\\cdots,l_m\\}$，将 $a_i$ 替换为 $l_i$ 个 $a_i$ 后得到序列 $B$。例如，\n\n- $\\{1,3,3,3,2,2,2\\}$ 是 $\\{1,3,3,2\\}$ 的拓展，取 $L = \\{1,1,2,3\\}$ 或 $\\{1,2,1,3\\}$；\n- 而 $\\{1,3,3,2\\}$ 不是 $\\{1,3,3,3,2\\}$ 的拓展，$\\{1,2,3\\}$ 不是 $\\{1,3,2\\}$ 的拓展。\n\n小 R 给了你两个序列 $X$ 和 $Y$，他希望你找到 $X$ 的一个长度为 $l_0 = 10^{100}$ 的拓展 $F = \\{f_i\\}$ 以及 $Y$ 的一个长度为 $l_0$ 的拓展 $G = \\{g_i\\}$，使得任意 $1 \\le i , j \\le l_0$ 都有 $(f_i - g_i)(f_j - g_j) > 0$。由于序列太长，你只需要告诉小 R 是否存在这样的两个序列即可。\n\n为了避免你扔硬币蒙混过关，小 R 还给了 $q$ 次额外询问，每次额外询问中小 R 会修改 $X$ 和 $Y$ 中若干元素的值。你需要对每次得到的新的 $X$ 和 $Y$ 都进行上述的判断。\n\n**询问之间是独立的，每次询问中涉及的修改均在原始序列上完成。**", "inputFormat": "输入的第一行包含四个整数 $c, n, m, q$，分别表示测试点编号、序列 $X$ 的长度、序列 $Y$ 的长度和额外询问的个数。对于样例，$c$ 表示该样例与测试点 $c$ 拥有相同的限制条件。\n\n输入的第二行包含 $n$ 个整数 $x_1,x_2,\\cdots, x_n$，描述序列 $X$。\n\n输入的第三行包含 $m$ 个整数 $y_1,y_2,\\cdots, y_m$，描述序列 $Y$。\n\n接下来依次描述 $q$ 组额外询问。对于每组额外询问：\n\n- 输入的第一行包含两个整数 $k_x$ 和 $k_y$，分别表示对序列 $X$ 和 $Y$ 产生的修改个数。\n- 接下来 $k_x$ 行每行包含两个整数 $p_x, v_x$，表示将 $x_{p_x}$ 修改为 $v_x$。\n- 接下来 $k_y$ 行每行包含两个整数 $p_y, v_y$，表示将 $y_{p_y}$ 修改为 $v_y$。", "outputFormat": "输出一行，其中包含一个长度为 $(q+1)$ 的 `01` 序列，序列的第一个元素表示初始询问的答案，之后 $q$ 个元素依次表示每组额外询问的答案。对于每个询问，如果存在满足题目条件的序列 $F$ 和 $G$，输出 `1`，否则输出 `0`。", "hint": "**【样例解释 #1】**\n\n由于 $F$ 和 $G$ 太长，用省略号表示重复最后一个元素直到序列长度为 $l_0$。如 $\\{1,2,3,3,\\cdots\\}$ 表示序列从第三个元素之后都是 $3$。\n\n以下依次描述四次询问，其中第一次询问为初始询问，之后的三次为额外询问：\n\n1. $A = \\{8,6,9\\}$，$B = \\{1,7,4\\}$，取 $F = \\{8,8,6,9,\\cdots\\}, G = \\{1,7,4,4,\\cdots\\}$；\n2. $A = \\{8,6,0\\}$，$B = \\{1,7,4\\}$，可以证明不存在满足要求的方案；\n3. $A = \\{8,6,9\\}$，$B = \\{8,7,5\\}$，可以证明不存在满足要求的方案；\n4. $A = \\{8,8,9\\}$，$B = \\{7,7,4\\}$，取 $F = \\{8,8,9,\\cdots\\}, G = \\{7,7,4,\\cdots\\}$。\n\n**【样例解释 #2】**\n\n该组样例满足测试点 $4$ 的条件。\n\n**【样例解释 #3】**\n\n该组样例满足测试点 $7$ 的条件。\n\n**【样例解释 #4】**\n\n该组样例满足测试点 $9$ 的条件。\n\n**【样例解释 #5】**\n\n该组样例满足测试点 $18$ 的条件。\n\n**【数据范围】**\n\n对于所有测试数据，保证：\n\n- $1 \\le n, m \\le 5 \\times 10 ^ 5$；\n- $0 \\le q \\le 60$；\n- $0 \\le x_i, y_i < 10 ^ 9$；\n- $0 \\le k_x, k_y \\le 5 \\times 10 ^ 5$，且所有额外询问的 $(k_x+k_y)$ 的和不超过 $5 \\times 10 ^ 5$；\n- $1 \\le p_x \\le n$，$1 \\le p_y \\le m$，$0 \\le v_x, v_y < 10 ^ 9$；\n- 对于每组额外询问，$p_x$ 两两不同，$p_y$ 两两不同。\n\n|测试点编号|$n, m \\le$|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$1$|否|\n|$2$|$2$|否|\n|$3, 4$|$6$|否|\n|$5$|$200$|否|\n|$6, 7$|$2000$|否|\n|$8, 9$|$4 \\times 10 ^ 4$|是|\n|$10, 11$|$1.5 \\times 10 ^ 5$|是|\n|$12 \\sim 14$|$5 \\times 10 ^ 5$|是|\n|$15, 16$|$4 \\times 10 ^ 4$|否|\n|$17, 18$|$1.5 \\times 10 ^ 5$|否|\n|$19, 20$|$5 \\times 10 ^ 5$|否|\n\n特殊性质：对于每组询问（包括初始询问和额外询问），保证 $x_1 < y_1$，且 $x_n$ 是序列 $X$ 唯一的一个最小值，$y_m$ 是序列 $Y$ 唯一的一个最大值。", "locale": "zh-CN"}}}
{"pid": "P9871", "type": "P", "difficulty": 6, "samples": [["1 1\n3 2 2 1\n2 2 4\n3 2 3\n", "2\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "2023", "离散化", "NOIP 提高组", "O2优化", "动态规划优化"], "title": "[NOIP2023] 天天爱打卡", "background": "", "description": "小 T 同学非常热衷于跑步。为了让跑步更加有趣，他决定制作一款叫做《天天爱打卡》的软件，使得用户每天都可以进行跑步打卡。\n\n开发完成后，小 T 同学计划进行试运行，他找了大 Y 同学来帮忙。试运行共 $n$ 天，编号为从 $1$ 到 $n$。\n\n对大 Y 同学来说，如果某天他选择跑步打卡，那么他的能量值会减少 $d$。初始时，他的能量值是 $0$，并且试运行期间他的**能量值可以是负数**。\n\n而且大 Y 不会**连续**跑步打卡**超过** $k$ 天；即不能存在 $1\\le x\\le n-k$，使得他在第 $x$ 到第 $x+k$ 天均进行了跑步打卡。\n\n小 T 同学在软件中设计了 $m$ 个挑战，第 $i$（$1\\le i \\le m$）个挑战可以用三个正整数 $(x_i,y_i,v_i)$ 描述，表示如果在第 $x_i$ 天时，用户已经连续跑步打卡至少 $y_i$ 天（即第 $x_i-y_i+1$ 到第 $x_i$ 天均完成了跑步打卡），那么小 T 同学就会请用户吃饭，从而使用户的能量值提高 $v_i$。\n\n现在大 Y 想知道，在软件试运行的 $n$ 天结束后，他的能量值**最高**可以达到多少？", "inputFormat": "**本题的测试点包含有多组测试数据。**\n\n输入的第一行包含两个整数 $c$ 和 $t$，分别表示测试点编号和测试数据组数。对于样例，$c$ 表示该样例与测试点 $c$ 拥有相同的限制条件。\n\n接下来，对于每组测试数据：\n\n- 输入的第一行包含四个正整数 $n,m,k,d$，分别表示试运行的天数、挑战的个数、大 Y 单次跑步打卡的连续天数限制以及大 Y 跑步打卡减少的能量值。\n- 接下来 $m$ 行，每行包含三个正整数 $x_i,y_i,v_i$，表示一次挑战。", "outputFormat": "输出一行一个整数表示对应的答案。", "hint": "**【样例解释 #1】**\n\n在第 $1,2$ 天跑步打卡，第 $3$ 天不跑步打卡，最终会获得 $(-1)+(-1)+4=2$ 的能量值。\n\n**【样例解释 #2】**\n\n该组样例满足测试点 $3$ 的条件。\n\n**【样例解释 #3】**\n\n该组样例满足测试点 $5$ 的条件。\n\n**【样例解释 #4】**\n\n该组样例满足测试点 $15$ 的条件。\n\n**【样例解释 #5】**\n\n该组样例满足测试点 $17$ 的条件。\n\n**【样例解释 #6】**\n\n该组样例满足测试点 $19$ 的条件。\n\n**【数据范围】**\n\n记 $l_i=x_i-y_i+1$，$r_i=x_i$​；\n\n对于所有测试数据，保证：$1\\le t\\le 10$，$1\\le k\\le n\\le 10^9$，$1\\le m\\le 10^5$，$1\\le l_i\\le r_i\\le n$，$1\\le d,v_i\\le 10^9$。\n\n|测试点编号|$n \\le$|$m \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1, 2$|$18$|$10 ^ 2$|无|\n|$3, 4$|$10 ^ 2$|$10 ^ 2$|无|\n|$5 \\sim 7$|$10 ^ 3$|$10 ^ 3$|无|\n|$8, 9$|$10 ^ 3$|$10 ^ 5$|无|\n|$10, 11$|$10 ^ 5$|$10 ^ 3$|无|\n|$12 \\sim 14$|$10 ^ 5$|$10 ^ 5$|无|\n|$15, 16$|$10 ^ 9$|$10 ^ 5$|A|\n|$17, 18$|$10 ^ 9$|$10 ^ 5$|B|\n|$19 \\sim 21$|$10 ^ 9$|$10 ^ 5$|C|\n|$22 \\sim 25$|$10 ^ 9$|$10 ^ 5$|无|\n\n特殊性质 A：$k\\le 10^2$；\n\n特殊性质 B：$\\forall 1\\le i<m$，$r_i<l_{i+1}$；\n\n特殊性质 C：$\\forall 1\\le i<j\\le m$，$l_i<l_j$，$r_i<r_j$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NOIP2023] 天天爱打卡", "background": "", "description": "小 T 同学非常热衷于跑步。为了让跑步更加有趣，他决定制作一款叫做《天天爱打卡》的软件，使得用户每天都可以进行跑步打卡。\n\n开发完成后，小 T 同学计划进行试运行，他找了大 Y 同学来帮忙。试运行共 $n$ 天，编号为从 $1$ 到 $n$。\n\n对大 Y 同学来说，如果某天他选择跑步打卡，那么他的能量值会减少 $d$。初始时，他的能量值是 $0$，并且试运行期间他的**能量值可以是负数**。\n\n而且大 Y 不会**连续**跑步打卡**超过** $k$ 天；即不能存在 $1\\le x\\le n-k$，使得他在第 $x$ 到第 $x+k$ 天均进行了跑步打卡。\n\n小 T 同学在软件中设计了 $m$ 个挑战，第 $i$（$1\\le i \\le m$）个挑战可以用三个正整数 $(x_i,y_i,v_i)$ 描述，表示如果在第 $x_i$ 天时，用户已经连续跑步打卡至少 $y_i$ 天（即第 $x_i-y_i+1$ 到第 $x_i$ 天均完成了跑步打卡），那么小 T 同学就会请用户吃饭，从而使用户的能量值提高 $v_i$。\n\n现在大 Y 想知道，在软件试运行的 $n$ 天结束后，他的能量值**最高**可以达到多少？", "inputFormat": "**本题的测试点包含有多组测试数据。**\n\n输入的第一行包含两个整数 $c$ 和 $t$，分别表示测试点编号和测试数据组数。对于样例，$c$ 表示该样例与测试点 $c$ 拥有相同的限制条件。\n\n接下来，对于每组测试数据：\n\n- 输入的第一行包含四个正整数 $n,m,k,d$，分别表示试运行的天数、挑战的个数、大 Y 单次跑步打卡的连续天数限制以及大 Y 跑步打卡减少的能量值。\n- 接下来 $m$ 行，每行包含三个正整数 $x_i,y_i,v_i$，表示一次挑战。", "outputFormat": "输出一行一个整数表示对应的答案。", "hint": "**【样例解释 #1】**\n\n在第 $1,2$ 天跑步打卡，第 $3$ 天不跑步打卡，最终会获得 $(-1)+(-1)+4=2$ 的能量值。\n\n**【样例解释 #2】**\n\n该组样例满足测试点 $3$ 的条件。\n\n**【样例解释 #3】**\n\n该组样例满足测试点 $5$ 的条件。\n\n**【样例解释 #4】**\n\n该组样例满足测试点 $15$ 的条件。\n\n**【样例解释 #5】**\n\n该组样例满足测试点 $17$ 的条件。\n\n**【样例解释 #6】**\n\n该组样例满足测试点 $19$ 的条件。\n\n**【数据范围】**\n\n记 $l_i=x_i-y_i+1$，$r_i=x_i$​；\n\n对于所有测试数据，保证：$1\\le t\\le 10$，$1\\le k\\le n\\le 10^9$，$1\\le m\\le 10^5$，$1\\le l_i\\le r_i\\le n$，$1\\le d,v_i\\le 10^9$。\n\n|测试点编号|$n \\le$|$m \\le$|特殊性质|\n|:-:|:-:|:-:|:-:|\n|$1, 2$|$18$|$10 ^ 2$|无|\n|$3, 4$|$10 ^ 2$|$10 ^ 2$|无|\n|$5 \\sim 7$|$10 ^ 3$|$10 ^ 3$|无|\n|$8, 9$|$10 ^ 3$|$10 ^ 5$|无|\n|$10, 11$|$10 ^ 5$|$10 ^ 3$|无|\n|$12 \\sim 14$|$10 ^ 5$|$10 ^ 5$|无|\n|$15, 16$|$10 ^ 9$|$10 ^ 5$|A|\n|$17, 18$|$10 ^ 9$|$10 ^ 5$|B|\n|$19 \\sim 21$|$10 ^ 9$|$10 ^ 5$|C|\n|$22 \\sim 25$|$10 ^ 9$|$10 ^ 5$|无|\n\n特殊性质 A：$k\\le 10^2$；\n\n特殊性质 B：$\\forall 1\\le i<m$，$r_i<l_{i+1}$；\n\n特殊性质 C：$\\forall 1\\le i<j\\le m$，$l_i<l_j$，$r_i<r_j$。", "locale": "zh-CN"}}}
{"pid": "P9872", "type": "P", "difficulty": 2, "samples": [["2\n4\n1 2\n2 3\n3 4\n5\n1 2\n2 3\n2 4\n1 5", "1 1\n2 2\n3 3\n4 4\n1 1\n2 3\n3 5\n3 5\n2 5"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "O2优化", "深度优先搜索 DFS", "树的遍历", "ICPC", "EC Final"], "title": "[EC Final 2021] DFS Order", "background": "", "description": "Prof. Pang has a rooted tree which is rooted at $1$ with $n$ nodes. These $n$ nodes are numbered from $1$ to $n$.\n\nNow he wants to start the depth-first search at the root. He wonders for each node $v$, what is the minimum and the maximum position it can appear in the $\\textbf{depth-first search order}$. The depth-first search order is the order of nodes visited during the depth-first search. A node appears in the $j$-th ($1\\le j\\le n$) position in this order means it is visited after $j-1$ other nodes. Because sons of a node can be iterated in arbitrary order, multiple possible depth-first orders exist. Prof. Pang wants to know for each node $v$, what are the minimum value and the maximum value of $j$ such that $v$ appears in the $j$-th position.\n\nFollowing is a pseudo-code for the depth-first search on a rooted tree. After its execution, $\\texttt{dfs\\_order}$ is the depth-first search order.\n\n```\nlet dfs_order be an empty list\n\ndef dfs(vertex x):\n    append x to the end of dfs_order.\n    for (each son y of x): // sons can be iterated in arbitrary order.\n        dfs(y)\n\ndfs(root)\n```", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^6)$ denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n~(1 \\le n \\le 10 ^ 5)$. Each of the next $n-1$ lines contains two integers $x$ and $y$, indicating node $x$ is node $y$'s parent ($1\\le x, y\\le n$). These edges form a tree rooted at $1$.\n\nIt is guaranteed that the sum of $n$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, print $n$ lines. The $i$-th line contains two integers denoting the minimum and the maximum position node $i$ can appear in the depth-first search order.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] DFS Order", "background": "", "description": "Prof. Pang has a rooted tree which is rooted at $1$ with $n$ nodes. These $n$ nodes are numbered from $1$ to $n$.\n\nNow he wants to start the depth-first search at the root. He wonders for each node $v$, what is the minimum and the maximum position it can appear in the $\\textbf{depth-first search order}$. The depth-first search order is the order of nodes visited during the depth-first search. A node appears in the $j$-th ($1\\le j\\le n$) position in this order means it is visited after $j-1$ other nodes. Because sons of a node can be iterated in arbitrary order, multiple possible depth-first orders exist. Prof. Pang wants to know for each node $v$, what are the minimum value and the maximum value of $j$ such that $v$ appears in the $j$-th position.\n\nFollowing is a pseudo-code for the depth-first search on a rooted tree. After its execution, $\\texttt{dfs\\_order}$ is the depth-first search order.\n\n```\nlet dfs_order be an empty list\n\ndef dfs(vertex x):\n    append x to the end of dfs_order.\n    for (each son y of x): // sons can be iterated in arbitrary order.\n        dfs(y)\n\ndfs(root)\n```", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^6)$ denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n~(1 \\le n \\le 10 ^ 5)$. Each of the next $n-1$ lines contains two integers $x$ and $y$, indicating node $x$ is node $y$'s parent ($1\\le x, y\\le n$). These edges form a tree rooted at $1$.\n\nIt is guaranteed that the sum of $n$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, print $n$ lines. The $i$-th line contains two integers denoting the minimum and the maximum position node $i$ can appear in the depth-first search order.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] DFS Order", "background": "", "description": "庞教授有一棵以 $1$ 为根的树，这棵树有 $n$ 个节点。这 $n$ 个节点的编号从 $1$ 到 $n$。\n\n现在他想从根节点开始进行深度优先搜索。他想知道对于每个节点 $v$，它在深度优先搜索顺序中出现的最小和最大位置。深度优先搜索顺序是指在深度优先搜索过程中访问节点的顺序。一个节点出现在这个顺序中的第 $j$ 个位置（$1 \\le j \\le n$）意味着它是在 $j-1$ 个其他节点之后被访问的。由于一个节点的子节点可以以任意顺序进行迭代，因此存在多种可能的深度优先顺序。庞教授想知道对于每个节点 $v$，使得 $v$ 出现在第 $j$ 个位置的最小值和最大值分别是多少。\n\n以下是对根树进行深度优先搜索的伪代码。在其执行之后，$\\texttt{dfs\\_order}$ 是深度优先搜索顺序。\n\n```\nlet dfs_order be an empty list\n\ndef dfs(vertex x):\n    append x to the end of dfs_order.\n    for (each son y of x): // sons can be iterated in arbitrary order.\n        dfs(y)\n\ndfs(root)\n```", "inputFormat": "第一行包含一个整数 $T~(1 \\le T \\le 10^6)$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含一个整数 $n~(1 \\le n \\le 10 ^ 5)$。接下来的 $n-1$ 行中的每一行包含两个整数 $x$ 和 $y$，表示节点 $x$ 是节点 $y$ 的父节点（$1\\le x, y\\le n$）。这些边形成了一棵以 $1$ 为根的树。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例，输出 $n$ 行。第 $i$ 行包含两个整数，表示节点 $i$ 在深度优先搜索顺序中出现的最小和最大位置。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9873", "type": "P", "difficulty": 5, "samples": [["2\n114514\n0000000", "1\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["字符串", "2021", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Beautiful String", "background": "", "description": "Prof. Pang recently got a dictionary of the elvish language, including many strings representing their words. He thinks a partition of string $s$ is beautiful if both of the following conditions are satisfied:\n\n- $s = s_1 + s_2 + s_3 + s_4 + s_5 + s_6$, where $s_i (1\\leq i\\leq 6)$ are nonempty substrings. $a + b$ means the concatenation of string $a$ and $b$ here.\n- $s_1 = s_2 = s_5, s_3 = s_6$.\n\n\nFor example, you can partition the string ``114514`` into $6$ parts : ``114514`` = ``1`` + ``1`` + ``4`` + ``5`` + ``1`` + ``4``. The first, second, fifth parts are the same, and the third and sixth parts are the same. Thus, the partition of $s=$``114514`` into $s_1=$``1``, $s_2=$``1``, $s_3=$``4``, $s_4=$``5``, $s_5=$``1``, and $s_6=$``4`` is beautiful. \n\nAccordingly, the beauty of a string $s$ is defined as the number of beautiful partitions of $s$.\n\nGiven a string $t$, please help Prof. Pang to figure out the sum of beauties of all substrings of $t$.\n", "inputFormat": "The first line contains a single integer $T~(1\\leq T \\le 50)$ indicating the number of test cases. \n\nFor each test case, there is one single line containing the string $t$, consisting of digits from `0' to `9'.\n\nIt is guaranteed that the length of each $t$ in each test case will not exceed $5000$ and the total length will not exceed $30000$.", "outputFormat": "For each test case, output a single line containing an integer, indicating the sum of beauties of all substrings of $t$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Beautiful String", "background": "", "description": "Prof. Pang recently got a dictionary of the elvish language, including many strings representing their words. He thinks a partition of string $s$ is beautiful if both of the following conditions are satisfied:\n\n- $s = s_1 + s_2 + s_3 + s_4 + s_5 + s_6$, where $s_i (1\\leq i\\leq 6)$ are nonempty substrings. $a + b$ means the concatenation of string $a$ and $b$ here.\n- $s_1 = s_2 = s_5, s_3 = s_6$.\n\n\nFor example, you can partition the string ``114514`` into $6$ parts : ``114514`` = ``1`` + ``1`` + ``4`` + ``5`` + ``1`` + ``4``. The first, second, fifth parts are the same, and the third and sixth parts are the same. Thus, the partition of $s=$``114514`` into $s_1=$``1``, $s_2=$``1``, $s_3=$``4``, $s_4=$``5``, $s_5=$``1``, and $s_6=$``4`` is beautiful. \n\nAccordingly, the beauty of a string $s$ is defined as the number of beautiful partitions of $s$.\n\nGiven a string $t$, please help Prof. Pang to figure out the sum of beauties of all substrings of $t$.\n", "inputFormat": "The first line contains a single integer $T~(1\\leq T \\le 50)$ indicating the number of test cases. \n\nFor each test case, there is one single line containing the string $t$, consisting of digits from `0' to `9'.\n\nIt is guaranteed that the length of each $t$ in each test case will not exceed $5000$ and the total length will not exceed $30000$.", "outputFormat": "For each test case, output a single line containing an integer, indicating the sum of beauties of all substrings of $t$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Beautiful String", "background": "", "description": "庞教授最近获得了一本精灵语言的字典，其中包含许多表示他们单词的字符串。他认为字符串 $s$ 的一个划分是美丽的，如果满足以下两个条件：\n\n- $s = s_1 + s_2 + s_3 + s_4 + s_5 + s_6$，其中 $s_i (1\\leq i\\leq 6)$ 是非空子字符串。这里 $a + b$ 表示字符串 $a$ 和 $b$ 的连接。\n- $s_1 = s_2 = s_5, s_3 = s_6$。\n\n例如，你可以将字符串 \"114514\" 划分为 6 部分：\"114514\" = \"1\" + \"1\" + \"4\" + \"5\" + \"1\" + \"4\"。第一、第二、第五部分相同，第三和第六部分相同。因此，将 $s=$\"114514\" 划分为 $s_1=$\"1\"，$s_2=$\"1\"，$s_3=$\"4\"，$s_4=$\"5\"，$s_5=$\"1\"，和 $s_6=$\"4\" 是美丽的。\n\n因此，字符串 $s$ 的美丽定义为 $s$ 的美丽划分的数量。\n\n给定一个字符串 $t$，请帮助庞教授计算 $t$ 的所有子串的美丽之和。", "inputFormat": "第一行包含一个整数 $T~(1\\leq T \\le 50)$，表示测试用例的数量。\n\n对于每个测试用例，有一行包含字符串 $t$，由数字 '0' 到 '9' 组成。\n\n保证每个测试用例中每个 $t$ 的长度不超过 $5000$，且总长度不超过 $30000$。", "outputFormat": "对于每个测试用例，输出一个整数，表示 $t$ 的所有子串的美丽之和。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9874", "type": "P", "difficulty": 6, "samples": [["2 5\nCRANE\nxx--x\nNASAL\nOOxOO", "21"], ["1 5\nBBBAA\nxxxx-", "0"], ["2 5\nABCDE\n-xxxx\nABCDE\nxxxxx", "0"], ["1 3\nABC\n---", "2"], ["1 15\nAAAAAAAAAAAAAAB\n-xxxxxxxxxxxxxx", "918547951"], ["1 15\nAAAAAAAAAAAAAAA\n-xxxxxxxxxxxxxx", "0"], ["1 1\nK\nx", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2021", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] String-dle Count", "background": "", "description": "While most people love to play Wordle these days, Prof. Pang has become addicted to String-dle.\n\nString-dle is an interesting string-guessing game where the player tries to guess a string of $k$ capital letters through several rounds. In each round, the player submits a string of length $k$ as his guess, and the system grades the guess through the following pseudo-code:\n\n```\ndef grading(answer, guess):\n  let count be a hash map\n  for i = 1 to k:\n    if answer[i] not in count:\n      count[answer[i]] = 1\n    else:\n      count[answer[i]] = count[answer[i]] + 1\n  let grade be an array of length k\n  for i = 1 to k:\n    if answer[i] == guess[i]:\n      grade[i] = 'O'\n      count[guess[i]] = count[guess[i]] - 1\n  for i = 1 to k:\n    if answer[i] != guess[i]:\n      if count[guess[i]] > 0:\n        grade[i] = '-'\n        count[guess[i]] = count[guess[i]] - 1\n      else:\n        grade[i] = 'x'\n  return grade\n```\n\nThe grade consisting of $\\tt{O}$ (capital letter O), $\\tt{-}$ (dash), and $\\tt{x}$ (small letter x) is then returned to the player, and the player may base his next guess on the previous grades. The following is an example of one game Prof. Pang played:\n\n```\nG: CRANE\nA: xx--x\nG: UTTER\nA: xxOxx\nG: NASAL\nA: OOxOO\nG: NATAL\nA: OOOOO\n```\n\nStrings after $\\tt{G}$ are Prof. Pang's guesses and strings after $\\tt{A}$ are the grades of the guesses. \n\nProf. Pang really enjoys the game. He believes that he has developed a perfect strategy for it. However, today he goes mad because he thinks the grading system is bugged! He wants to have someone write an analysis program to figure out the number of possible strings that can be the answer to the puzzle based on his list of guesses and grades.\n\nSince the grading system might be bugged, it might not conform to the pseudo-code given above. So specifically, the task is to find how many strings that are consistent with the input. A string s is consistent with the input if for any guess g in the input and its corresponding grade d, grading(s, g)=d.\n\nAnd of course, you will be doing the programming.", "inputFormat": "The first line consists of two integers $n$ and $k$ $(1 \\le n \\le 10^4, 1 \\le k \\le 19)$, which are the number of guesses and the length of the string, respectively.\n\nThe following lines consist of the guesses and the grades, one per line, correspondingly.", "outputFormat": "An integer, denoting how many possible answers there are, modulo $10^9+7$.", "hint": "For the second example:\n\nIf the answer is $\\tt{ACDEF}$, the guess $\\tt{BBBAA}$ will produce a grade of $\\tt{xxx-x}$.", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] String-dle Count", "background": "", "description": "While most people love to play Wordle these days, Prof. Pang has become addicted to String-dle.\n\nString-dle is an interesting string-guessing game where the player tries to guess a string of $k$ capital letters through several rounds. In each round, the player submits a string of length $k$ as his guess, and the system grades the guess through the following pseudo-code:\n\n```\ndef grading(answer, guess):\n  let count be a hash map\n  for i = 1 to k:\n    if answer[i] not in count:\n      count[answer[i]] = 1\n    else:\n      count[answer[i]] = count[answer[i]] + 1\n  let grade be an array of length k\n  for i = 1 to k:\n    if answer[i] == guess[i]:\n      grade[i] = 'O'\n      count[guess[i]] = count[guess[i]] - 1\n  for i = 1 to k:\n    if answer[i] != guess[i]:\n      if count[guess[i]] > 0:\n        grade[i] = '-'\n        count[guess[i]] = count[guess[i]] - 1\n      else:\n        grade[i] = 'x'\n  return grade\n```\n\nThe grade consisting of $\\tt{O}$ (capital letter O), $\\tt{-}$ (dash), and $\\tt{x}$ (small letter x) is then returned to the player, and the player may base his next guess on the previous grades. The following is an example of one game Prof. Pang played:\n\n```\nG: CRANE\nA: xx--x\nG: UTTER\nA: xxOxx\nG: NASAL\nA: OOxOO\nG: NATAL\nA: OOOOO\n```\n\nStrings after $\\tt{G}$ are Prof. Pang's guesses and strings after $\\tt{A}$ are the grades of the guesses. \n\nProf. Pang really enjoys the game. He believes that he has developed a perfect strategy for it. However, today he goes mad because he thinks the grading system is bugged! He wants to have someone write an analysis program to figure out the number of possible strings that can be the answer to the puzzle based on his list of guesses and grades.\n\nSince the grading system might be bugged, it might not conform to the pseudo-code given above. So specifically, the task is to find how many strings that are consistent with the input. A string s is consistent with the input if for any guess g in the input and its corresponding grade d, grading(s, g)=d.\n\nAnd of course, you will be doing the programming.", "inputFormat": "The first line consists of two integers $n$ and $k$ $(1 \\le n \\le 10^4, 1 \\le k \\le 19)$, which are the number of guesses and the length of the string, respectively.\n\nThe following lines consist of the guesses and the grades, one per line, correspondingly.", "outputFormat": "An integer, denoting how many possible answers there are, modulo $10^9+7$.", "hint": "For the second example:\n\nIf the answer is $\\tt{ACDEF}$, the guess $\\tt{BBBAA}$ will produce a grade of $\\tt{xxx-x}$.", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] String-dle Count", "background": "", "description": "当大多数人都沉迷于玩 Wordle 的时候，庞教授却已经沉迷于玩 String-dle 了。\n\nString-dle 是一个有趣的猜字符串的游戏，玩家在玩的时候要通过几轮尝试，猜出一个长度为 $k$ 的字符串。并且在每轮尝试中，玩家要提交一个长度为 $k$ 的字符串来作为他的猜测，而系统通过以下伪代码来为提交的猜测评级：\n```\ndef grading(answer, guess):\n  let count be a hash map\n  for i = 1 to k:\n    if answer[i] not in count:\n      count[answer[i]] = 1\n    else:\n      count[answer[i]] = count[answer[i]] + 1\n  let grade be an array of length k\n  for i = 1 to k:\n    if answer[i] == guess[i]:\n      grade[i] = 'O'\n      count[guess[i]] = count[guess[i]] - 1\n  for i = 1 to k:\n    if answer[i] != guess[i]:\n      if count[guess[i]] > 0:\n        grade[i] = '-'\n        count[guess[i]] = count[guess[i]] - 1\n      else:\n        grade[i] = 'x'\n  return grade\n```\n返回的评级包括 $\\tt{O}$（大写字母 O）、$\\tt{-}$（破折号）和 $\\tt{x}$（小写字母 x），且玩家可以基于先前的评级进行下一次猜测。下面是庞教授玩的一局游戏示例：\n```\nG: CRANE\nA: xx--x\nG: UTTER\nA: xxOxx\nG: NASAL\nA: OOxOO\nG: NATAL\nA: OOOOO\n```\n在字符串 $\\tt{G}$ 后面的是庞教授的猜测，以及在字符串 $\\tt{A}$ 后面的是该次猜测的评级。\n\n庞教授非常喜欢这个游戏。他确信他已经知道了这个游戏的完美策略。然而，今天他很生气，因为他认为评级系统出了问题！他想让人写一个分析程序，根据他的猜测与评级找出所有可能的可以作为答案的字符串。\n\n由于评级系统可能出了问题，所以它可能不再符合上面给出的伪代码。具体来说，你需要找到所有符合输入的字符串。一个符合输入的字符串是指，对于输入中任意一个猜测  $g$ 和它的正确评级 $d$，都符合  `grading(s, g)=d`。\n\n当然，你接受了这个任务。", "inputFormat": "第一行是两个整数 $n$、$k$ $(1 \\le n \\le 10^4, 1 \\le k \\le 19)$，分别是猜测的次数和字符串的长度。\n\n下面共有 $2n$ 行，每两行都对应一个猜测和它对应的评级。", "outputFormat": "一个整数，表示有多少种可能的答案，并模 $10^9+7$.\n\n### 样例 #1\n\n#### 样例输入 #1\n\n```\n2 5\nCRANE\nxx--x\nNASAL\nOOxOO\n```\n\n#### 样例输出 #1\n\n```\n21\n```\n\n### 样例 #2\n\n#### 样例输入 #2\n\n```\n1 5\nBBBAA\nxxxx-\n```\n\n#### 样例输出 #2\n\n```\n0\n```\n\n### 样例 #3\n\n#### 样例输入 #3\n\n```\n2 5\nABCDE\n-xxxx\nABCDE\nxxxxx\n```\n\n#### 样例输出 #3\n\n```\n0\n```\n\n### 样例 #4\n\n#### 样例输入 #4\n\n```\n1 3\nABC\n---\n```\n\n#### 样例输出 #4\n\n```\n2\n```\n\n### 样例 #5\n\n#### 样例输入 #5\n\n```\n1 15\nAAAAAAAAAAAAAAB\n-xxxxxxxxxxxxxx\n```\n\n#### 样例输出 #5\n\n```\n918547951\n```\n\n## 样例 #6\n\n#### 样例输入 #6\n\n```\n1 15\nAAAAAAAAAAAAAAA\n-xxxxxxxxxxxxxx\n```\n\n#### 样例输出 #6\n\n```\n0\n```\n\n### 样例 #7\n\n#### 样例输入 #7\n\n```\n1 1\nK\nx\n```\n\n#### 样例输出 #7\n\n```\n25\n```", "hint": "对于第二个样例:\n\n如果答案是 $\\tt{ACDEF}$，则 $\\tt{BBBAA}$ 的评级为 $\\tt{xxx-x}$.", "locale": "zh-CN"}}}
{"pid": "P9875", "type": "P", "difficulty": 6, "samples": [["3\n0 0\n1 1\n2 2 3 3\n4 4 5 5\n0 0\n1 1\n2 2 3 3\n2 2 3 3\n0 0\n10 10\n10 0 0 10\n1 1 2 2", "0\n0\n1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["计算几何", "2021", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Two Walls", "background": "", "description": "Prof. Pang has bought a humanoid cleaning robot to clean his yard. The robot is not very sophisticated. It can either move forward or change its direction at a time, all controlled by Prof. Pang's controller.\n\nProf. Pang's yard is a 2D plane. The robot needs to move from its current location $A$ to the destination $B$ to fulfill some ``cleaning`` needs of Prof. Pang. However, there are two straight walls $CD$ and $EF$ in Prof. Pang's yard. Since the robot is clumsy, it will fall over if it touches any of the walls (even at endpoints).\n\nNow that Prof. Pang is lazy, he wants to minimize the number of times the robot changes its direction. Can you help him?", "inputFormat": "The first line contains a single integer $T$ ($1 \\le T \\le 10^5$) denoting the number of test cases.\n\nFor each test case, the first line contains two integers $x_A, y_A$, the coordinates of point $A$. The second line contains two integers $x_B, y_B$, the coordinates of point $B$.\nThe third line contains four integers $x_C, y_C, x_D, y_D$, the coordinates of point $C$ and $D$ which are the endpoints of the first wall. The fourth line contains four integers $x_E, y_E, x_F, y_F$, the coordinates of point $E$ and $F$ which are the endpoints of the second wall.\n\nIt is guaranteed that neither the current location $A$ nor the destination $B$ of the robot are on any of the walls. A wall may degenerate to a point. It can be proved that the robot can always move from $A$ to $B$ without touching any of the walls. All values lie within $[-10^9, 10^9]$.", "outputFormat": "For each test case, print one number $d$ in one line, denoting the minimum number of turns.", "hint": "The following are illustrations for the first sample and the third sample.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nuyvzg7a.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/diy78yex.png)", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Two Walls", "background": "", "description": "Prof. Pang has bought a humanoid cleaning robot to clean his yard. The robot is not very sophisticated. It can either move forward or change its direction at a time, all controlled by Prof. Pang's controller.\n\nProf. Pang's yard is a 2D plane. The robot needs to move from its current location $A$ to the destination $B$ to fulfill some ``cleaning`` needs of Prof. Pang. However, there are two straight walls $CD$ and $EF$ in Prof. Pang's yard. Since the robot is clumsy, it will fall over if it touches any of the walls (even at endpoints).\n\nNow that Prof. Pang is lazy, he wants to minimize the number of times the robot changes its direction. Can you help him?", "inputFormat": "The first line contains a single integer $T$ ($1 \\le T \\le 10^5$) denoting the number of test cases.\n\nFor each test case, the first line contains two integers $x_A, y_A$, the coordinates of point $A$. The second line contains two integers $x_B, y_B$, the coordinates of point $B$.\nThe third line contains four integers $x_C, y_C, x_D, y_D$, the coordinates of point $C$ and $D$ which are the endpoints of the first wall. The fourth line contains four integers $x_E, y_E, x_F, y_F$, the coordinates of point $E$ and $F$ which are the endpoints of the second wall.\n\nIt is guaranteed that neither the current location $A$ nor the destination $B$ of the robot are on any of the walls. A wall may degenerate to a point. It can be proved that the robot can always move from $A$ to $B$ without touching any of the walls. All values lie within $[-10^9, 10^9]$.", "outputFormat": "For each test case, print one number $d$ in one line, denoting the minimum number of turns.", "hint": "The following are illustrations for the first sample and the third sample.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nuyvzg7a.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/diy78yex.png)", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Two Walls", "background": "", "description": "庞教授买了一个人形清洁机器人来清理他的院子。这个机器人并不十分复杂，它可以前进或改变方向，这一切都由庞教授的控制器控制。\n\n庞教授的院子是一个二维平面。机器人需要从当前位置 $A$ 移动到目的地 $B$，以满足庞教授的一些“清洁”需求。然而，庞教授的院子里有两堵直墙 $CD$ 和 $EF$。由于机器人笨拙，如果它碰到任何一堵墙（即使是端点），它就会摔倒。\n\n由于庞教授很懒，他希望尽量减少机器人改变方向的次数。你能帮他吗？", "inputFormat": "第一行包含一个整数 $T$ ($1 \\le T \\le 10^5$)，表示测试用例的数量。\n\n对于每个测试用例，第一行包含两个整数 $x_A, y_A$，表示点 $A$ 的坐标。第二行包含两个整数 $x_B, y_B$，表示点 $B$ 的坐标。第三行包含四个整数 $x_C, y_C, x_D, y_D$，表示第一堵墙的端点 $C$ 和 $D$ 的坐标。第四行包含四个整数 $x_E, y_E, x_F, y_F$，表示第二堵墙的端点 $E$ 和 $F$ 的坐标。\n\n保证机器人的当前位置 $A$ 和目的地 $B$ 都不在任何墙上。一堵墙可能退化为一个点。可以证明机器人总能从 $A$ 移动到 $B$ 而不碰到任何墙。所有值都在 $[-10^9, 10^9]$ 范围内。", "outputFormat": "对于每个测试用例，输出一个数字 $d$，表示最少的转弯次数。", "hint": "以下是第一个样例和第三个样例的示意图。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nuyvzg7a.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/diy78yex.png)\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9876", "type": "P", "difficulty": 5, "samples": [["2\n2 2\n2H 2D\n3H 3D\n4S\n2 2\n2H 2D\n3H 4D\n4S", "Pang\nShou"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "O2优化", "ICPC", "分类讨论", "EC Final"], "title": "[EC Final 2021] Prof. Pang and Poker", "background": "", "description": "Prof. Pang is playing a card game with his two friends Alice and Bob. All cards are drawn from a standard 52-card deck. A standard 52-card deck comprises $13$ ranks in each of the four French suits: clubs ($\\clubsuit$), diamonds ($\\diamondsuit$), hearts ($\\heartsuit$) and spades ($\\spadesuit$). Each suit includes an Ace (A), a King (K), a Queen (Q), and a Jack (J), each depicted alongside a symbol of its suit; and numerals or pip cards from the Deuce (Two) to the Ten, with each card depicting that many symbols (pips) of its suit. $\\textbf{No card can be drawn more than once.}$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3xtu6g4z.png)\n\nIndividual cards are ranked as follows (high-to-low): A, K, Q, J, 10, 9, 8, 7, 6, 5, 4, 3, 2. $\\textbf{Suits do not affect ranks of the cards.}$ For example, Ace of diamonds and Ace of clubs have the same rank. No one of them is ranked strictly higher than the other.\n\nInitially, Alice and Bob will hold one or more cards while Prof. Pang will hold exactly one card. $\\textbf{Each player can see cards held by himself/herself and cards held by other players.}$ They will play the game in the following multi-round rule:\n\n- The initiative player chooses one card and put it out to start one round.\n- The next player can pass or put out a new card, then the player after the next can also pass or put out a new card, and so on. The only constraint is that the rank of the newly put card should be strictly higher than all previous cards in this round.\n- The round ends when two players choose to pass consecutively. The one who put out the last card becomes the initiative player in the next round.\n- If someone put out all the cards in his/her hand, the game ends immediately.\n\nIn this game, Alice is the initiative player in the first round. Bob, Prof. Pang,  and Alice are the next players of Alice, Bob,  and Prof. Pang respectively. Prof. Pang will be happy if and only if he is the one that first put out all the cards. (Prof. Pang wants to be happy, of course.) Alice wants to drink milk tea so she decides to make Prof. Pang happy and then asks him to buy milk tea for her. However, Bob doesn't want it to happen, so he decides to avoid Prof. Pang from being happy. If they play the game optimally for themselves, will Prof. Pang be happy in the end?", "inputFormat": "The first line contains a single integer $T$ ($1\\le T \\le 10^4$) denoting the number of test cases. For each test case:\n\nThe first line contains two integers $n,m$ ($1\\le n,m \\le 50$) denoting the number of cards in Alice's hand and Bob's hand initially.\n\nThe second line contains $n$ strings $a_i$ ($1\\le i \\le n$) denoting the cards in Alice's hand.\n\nThe third line contains $m$ strings $b_i$ ($1\\le i \\le m$) denoting the cards in Bod's hand.\n\nThe fourth line contains one string $p$ denoting the card in Prof. Pang's hand.\n\nFor each card, the first character of its corresponding string denotes its rank. (Possible ranks are `2` ,`3`,`4`,`5`,`6`,`7`,`8`,`9`,`T`,`J`,`Q`,`K`,`A`. `T` denotes $10$.) The second character denotes its suit. `C` denotes clubs. `D` denotes diamonds. `H` denotes hearts. `S` denotes spades.\n\nIt is guaranteed that each card appears at most once in one test case.", "outputFormat": "For each test case, print one line. Print $\\texttt{Pang}$ if Prof. Pang will be happy. Otherwise, print $\\texttt{Shou}$.", "hint": "- For the first case, Prof. Pang can always put out his only card ``4S``.\n- For the second case, Bob can put out ``4D`` and become the initiative player in the second round regardless of the card Alice put out in the first round, then Bob put out ``3H`` and the game ends.", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Prof. Pang and Poker", "background": "", "description": "Prof. Pang is playing a card game with his two friends Alice and Bob. All cards are drawn from a standard 52-card deck. A standard 52-card deck comprises $13$ ranks in each of the four French suits: clubs ($\\clubsuit$), diamonds ($\\diamondsuit$), hearts ($\\heartsuit$) and spades ($\\spadesuit$). Each suit includes an Ace (A), a King (K), a Queen (Q), and a Jack (J), each depicted alongside a symbol of its suit; and numerals or pip cards from the Deuce (Two) to the Ten, with each card depicting that many symbols (pips) of its suit. $\\textbf{No card can be drawn more than once.}$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3xtu6g4z.png)\n\nIndividual cards are ranked as follows (high-to-low): A, K, Q, J, 10, 9, 8, 7, 6, 5, 4, 3, 2. $\\textbf{Suits do not affect ranks of the cards.}$ For example, Ace of diamonds and Ace of clubs have the same rank. No one of them is ranked strictly higher than the other.\n\nInitially, Alice and Bob will hold one or more cards while Prof. Pang will hold exactly one card. $\\textbf{Each player can see cards held by himself/herself and cards held by other players.}$ They will play the game in the following multi-round rule:\n\n- The initiative player chooses one card and put it out to start one round.\n- The next player can pass or put out a new card, then the player after the next can also pass or put out a new card, and so on. The only constraint is that the rank of the newly put card should be strictly higher than all previous cards in this round.\n- The round ends when two players choose to pass consecutively. The one who put out the last card becomes the initiative player in the next round.\n- If someone put out all the cards in his/her hand, the game ends immediately.\n\nIn this game, Alice is the initiative player in the first round. Bob, Prof. Pang,  and Alice are the next players of Alice, Bob,  and Prof. Pang respectively. Prof. Pang will be happy if and only if he is the one that first put out all the cards. (Prof. Pang wants to be happy, of course.) Alice wants to drink milk tea so she decides to make Prof. Pang happy and then asks him to buy milk tea for her. However, Bob doesn't want it to happen, so he decides to avoid Prof. Pang from being happy. If they play the game optimally for themselves, will Prof. Pang be happy in the end?", "inputFormat": "The first line contains a single integer $T$ ($1\\le T \\le 10^4$) denoting the number of test cases. For each test case:\n\nThe first line contains two integers $n,m$ ($1\\le n,m \\le 50$) denoting the number of cards in Alice's hand and Bob's hand initially.\n\nThe second line contains $n$ strings $a_i$ ($1\\le i \\le n$) denoting the cards in Alice's hand.\n\nThe third line contains $m$ strings $b_i$ ($1\\le i \\le m$) denoting the cards in Bod's hand.\n\nThe fourth line contains one string $p$ denoting the card in Prof. Pang's hand.\n\nFor each card, the first character of its corresponding string denotes its rank. (Possible ranks are `2` ,`3`,`4`,`5`,`6`,`7`,`8`,`9`,`T`,`J`,`Q`,`K`,`A`. `T` denotes $10$.) The second character denotes its suit. `C` denotes clubs. `D` denotes diamonds. `H` denotes hearts. `S` denotes spades.\n\nIt is guaranteed that each card appears at most once in one test case.", "outputFormat": "For each test case, print one line. Print $\\texttt{Pang}$ if Prof. Pang will be happy. Otherwise, print $\\texttt{Shou}$.", "hint": "- For the first case, Prof. Pang can always put out his only card ``4S``.\n- For the second case, Bob can put out ``4D`` and become the initiative player in the second round regardless of the card Alice put out in the first round, then Bob put out ``3H`` and the game ends.", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Prof. Pang and Poker", "background": "", "description": "庞教授正在和他的两个朋友 Alice 和 Bob 玩纸牌游戏。所有的牌都从一副标准的 52 张牌的牌堆中抽取。一副标准的 52 张牌的牌堆由四种法式花色中的 13 个等级组成：梅花 ($\\clubsuit$)、方块 ($\\diamondsuit$)、红心 ($\\heartsuit$) 和黑桃 ($\\spadesuit$)。每种花色包括一张 A（Ace）、一张 K（King）、一张 Q（Queen）和一张 J（Jack），每张牌旁边都有其花色的符号；以及从 2 到 10 的数字牌，每张牌上都有相应数量的花色符号（点数）。**没有一张牌可以被抽取多于一次。**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3xtu6g4z.png)\n\n单张牌的等级如下（从高到低）：A、K、Q、J、10、9、8、7、6、5、4、3、2。**花色不影响牌的等级。**例如，方块 A 和梅花 A 具有相同的等级。它们之间没有一个严格高于另一个。\n\n最初，Alice 和 Bob 将持有一张或多张牌，而庞教授将持有恰好一张牌。**每个玩家可以看到自己和其他玩家持有的牌。**他们将按照以下多轮规则进行游戏：\n\n- 先手玩家选择一张牌并打出以开始一轮。\n- 下一个玩家可以选择过牌或打出新牌，然后下一个玩家也可以选择过牌或打出新牌，依此类推。唯一的限制是，新打出的牌的等级必须严格高于本轮中所有之前的牌。\n- 当两名玩家连续选择过牌时，本轮结束。最后打出牌的玩家在下一轮中成为先手玩家。\n- 如果有人打出了手中的所有牌，游戏立即结束。\n\n在这个游戏中，Alice 是第一轮的先手玩家。Bob、庞教授和 Alice 分别是 Alice、Bob 和庞教授的下一个玩家。庞教授只有在他是第一个打出所有牌的人时才会感到高兴。（庞教授当然想要高兴。）Alice 想喝奶茶，所以她决定让庞教授高兴，然后让他给她买奶茶。然而，Bob 不想让这种情况发生，所以他决定避免庞教授感到高兴。如果他们都为自己以最佳方式玩游戏，庞教授最后会高兴吗？", "inputFormat": "第一行包含一个整数 $T$ ($1\\le T \\le 10^4$)，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n,m$ ($1\\le n,m \\le 50$)，表示 Alice 和 Bob 手中最初的牌数。\n\n第二行包含 $n$ 个字符串 $a_i$ ($1\\le i \\le n$)，表示 Alice 手中的牌。\n\n第三行包含 $m$ 个字符串 $b_i$ ($1\\le i \\le m$)，表示 Bob 手中的牌。\n\n第四行包含一个字符串 $p$，表示庞教授手中的牌。\n\n对于每张牌，其对应字符串的第一个字符表示其等级。（可能的等级有 `2` 、`3`、`4`、`5`、`6`、`7`、`8`、`9`、`T`、`J`、`Q`、`K`、`A`。`T` 表示 $10$。）第二个字符表示其花色。`C` 表示梅花。`D` 表示方块。`H` 表示红心。`S` 表示黑桃。\n\n保证在一个测试用例中，每张牌最多出现一次。", "outputFormat": "对于每个测试用例，输出一行。如果庞教授会高兴，输出 `Pang`。否则，输出 `Shou`。", "hint": "- 对于第一个案例，庞教授总是可以打出他唯一的牌 “4S”。\n- 对于第二个案例，无论 Alice 在第一轮打出什么牌，Bob 都可以打出 “4D” 并在第二轮成为先手玩家，然后 Bob 打出 “3H”，游戏结束。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9877", "type": "P", "difficulty": 7, "samples": [["5 6 3\n0 -5 -3 8 -3\n2 3 5\n1 2 5\n2 1 5\n1 4 -3\n2 3 5\n2 1 5", "8\n10\n0\n5"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Vacation", "background": "", "description": "Prof. Pang has an annual leave of $c$ days and he wants to go on vacation.\n\nNow there are $n$ days in a year. Prof. Pang can gain $a_i$ happiness if he rests on the $i$-th day. The values of happiness, $a_i$, may be negative.\n\nProf. Pang wants you to do $m$ operations:\n\n- $1~x~y$, change the happiness of the $x$-th day to $y$.\n- $2~l~r$, Prof. Pang wants to find a period of vacation in $[l, r]$. He wants to rest for several (possibly $0$) days in a row and gain as much happiness as possible. However, he only has $c$ days off, thus he can rest for no more than $c$ consecutive days in $[l,r]$.\n\nThat means he wants to find \n\n$$\\max\\left(\\max_{l \\leq l' \\leq r' \\leq r\\atop r'-l'+1\\leq c}  ~~ \\left(\\sum_{i=l'} ^{r'} a_i\\right), 0\\right).$$\n", "inputFormat": "The first line contains three integers $n, m, c (1\\leq n\\leq 2\\times 10^5, 1\\leq m \\leq 5\\times 10^5, 1\\leq c\\leq n)$ indicating the number of days in a year, the number of operations, and Prof. Pang's annual leave days.\n\nThe next line contains $n$ integers $a_1, a_2, \\dots, a_n(-10^9 \\leq a_i\\leq 10^9)$ indicating the values of happiness of every day.\n\nThe next $m$ lines are the $m$ operations in the format described above.\n\nIt is guaranteed that $1\\leq x\\leq n, -10^9\\leq y\\leq 10^9, 1\\leq l\\leq r \\leq n$.", "outputFormat": "For each operation of the second type, print the answer.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Vacation", "background": "", "description": "Prof. Pang has an annual leave of $c$ days and he wants to go on vacation.\n\nNow there are $n$ days in a year. Prof. Pang can gain $a_i$ happiness if he rests on the $i$-th day. The values of happiness, $a_i$, may be negative.\n\nProf. Pang wants you to do $m$ operations:\n\n- $1~x~y$, change the happiness of the $x$-th day to $y$.\n- $2~l~r$, Prof. Pang wants to find a period of vacation in $[l, r]$. He wants to rest for several (possibly $0$) days in a row and gain as much happiness as possible. However, he only has $c$ days off, thus he can rest for no more than $c$ consecutive days in $[l,r]$.\n\nThat means he wants to find \n\n$$\\max\\left(\\max_{l \\leq l' \\leq r' \\leq r\\atop r'-l'+1\\leq c}  ~~ \\left(\\sum_{i=l'} ^{r'} a_i\\right), 0\\right).$$\n", "inputFormat": "The first line contains three integers $n, m, c (1\\leq n\\leq 2\\times 10^5, 1\\leq m \\leq 5\\times 10^5, 1\\leq c\\leq n)$ indicating the number of days in a year, the number of operations, and Prof. Pang's annual leave days.\n\nThe next line contains $n$ integers $a_1, a_2, \\dots, a_n(-10^9 \\leq a_i\\leq 10^9)$ indicating the values of happiness of every day.\n\nThe next $m$ lines are the $m$ operations in the format described above.\n\nIt is guaranteed that $1\\leq x\\leq n, -10^9\\leq y\\leq 10^9, 1\\leq l\\leq r \\leq n$.", "outputFormat": "For each operation of the second type, print the answer.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Vacation", "background": "", "description": "庞教授有 $c$ 天的年假，他想去度假。\n\n现在一年有 $n$ 天。如果庞教授在第 $i$ 天休息，他可以获得 $a_i$ 的幸福感。幸福感的值 $a_i$ 可能是负数。\n\n庞教授希望你执行 $m$ 个操作：\n\n- $1~x~y$，将第 $x$ 天的幸福感改为 $y$。\n- $2~l~r$，庞教授希望在 $[l, r]$ 期间找到一个度假期。他希望连续休息几天（可能为 $0$ 天）并获得尽可能多的幸福感。然而，他只有 $c$ 天的假期，因此在 $[l,r]$ 中他最多只能连续休息 $c$ 天。\n\n这意味着他希望找到\n\n$$\\max\\left(\\max_{l \\leq l' \\leq r' \\leq r\\atop r'-l'+1\\leq c}  ~~ \\left(\\sum_{i=l'} ^{r'} a_i\\right), 0\\right)。$$", "inputFormat": "第一行包含三个整数 $n, m, c (1\\leq n\\leq 2\\times 10^5, 1\\leq m \\leq 5\\times 10^5, 1\\leq c\\leq n)$，表示一年中的天数、操作的数量和庞教授的年假天数。\n\n下一行包含 $n$ 个整数 $a_1, a_2, \\dots, a_n(-10^9 \\leq a_i\\leq 10^9)$，表示每一天的幸福感值。\n\n接下来的 $m$ 行是格式如上所述的 $m$ 个操作。\n\n保证 $1\\leq x\\leq n, -10^9\\leq y\\leq 10^9, 1\\leq l\\leq r \\leq n$。", "outputFormat": "对于每个第二类操作，输出答案。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9878", "type": "P", "difficulty": 7, "samples": [["3\n2 2\n??\n??\n3 3\nBW?\nW?B\n?BW\n3 3\nBW?\nW?W\n?W?", "YES\nBW\nWW\nNO\nYES\nBWB\nWWW\nBWB"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "O2优化", "构造", "ICPC", "EC Final"], "title": "[EC Final 2021] Check Pattern is Bad", "background": "", "description": "Prof. Pang is given an $n\\times m$ board. Some cells are colored black, some cells are colored white, and others are uncolored.\n\nProf. Pang doesn't like $\\textbf{check patterns}$, so he wants to color all uncolored cells such that there is no check pattern on the board.\n\n$4$ cells forming a $2\\times 2$ square are said to have the check pattern if they are colored in one of the following ways:\n\n```plain\nBW\nWB\n```\n\n```plain\nWB\nBW\n```\n\nHere `W` (\"wakuda\" in Chewa language) means the cell is colored black and `B` (\"biancu\" in Corsican language) means the cell is colored white.", "inputFormat": "The first line contains a single integer $T$ $(1\\leq T \\leq 10^4)$ denoting the number of test cases.\n\nThe first line of each test case contains two integers $n$ and $m$ ($1\\le n, m\\le 100$) denoting the dimensions of the board.\n\nEach of the next $n$ lines contains $m$ characters. The $j$-th character of the $i$-th line represents the status of the cell on the $i$-th row and $j$-th column of the board. The character is `W` if the cell is colored black, `B` if the cell is colored white, and `?` if the cell is uncolored. \n\nIt is guaranteed that the sum of $nm$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, output a line containing $\\texttt{NO}$ if you cannot color all the uncolored cells such that there is no check pattern on the board.\n\nOtherwise, output a line containing $\\texttt{YES}$. In the next $n$ lines, output the colored board in the same format as the input. The output board should satisfy the following conditions.\n\n- It does not have any check pattern.\n- It consists of only $\\texttt{B}$ and $\\texttt{W}$.\n- If a cell is already colored in the input, its color cannot be changed in the output.\n\nIf there are multiple solutions, output any of them.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Check Pattern is Bad", "background": "", "description": "Prof. Pang is given an $n\\times m$ board. Some cells are colored black, some cells are colored white, and others are uncolored.\n\nProf. Pang doesn't like $\\textbf{check patterns}$, so he wants to color all uncolored cells such that there is no check pattern on the board.\n\n$4$ cells forming a $2\\times 2$ square are said to have the check pattern if they are colored in one of the following ways:\n\n```plain\nBW\nWB\n```\n\n```plain\nWB\nBW\n```\n\nHere `W` (\"wakuda\" in Chewa language) means the cell is colored black and `B` (\"biancu\" in Corsican language) means the cell is colored white.", "inputFormat": "The first line contains a single integer $T$ $(1\\leq T \\leq 10^4)$ denoting the number of test cases.\n\nThe first line of each test case contains two integers $n$ and $m$ ($1\\le n, m\\le 100$) denoting the dimensions of the board.\n\nEach of the next $n$ lines contains $m$ characters. The $j$-th character of the $i$-th line represents the status of the cell on the $i$-th row and $j$-th column of the board. The character is `W` if the cell is colored black, `B` if the cell is colored white, and `?` if the cell is uncolored. \n\nIt is guaranteed that the sum of $nm$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, output a line containing $\\texttt{NO}$ if you cannot color all the uncolored cells such that there is no check pattern on the board.\n\nOtherwise, output a line containing $\\texttt{YES}$. In the next $n$ lines, output the colored board in the same format as the input. The output board should satisfy the following conditions.\n\n- It does not have any check pattern.\n- It consists of only $\\texttt{B}$ and $\\texttt{W}$.\n- If a cell is already colored in the input, its color cannot be changed in the output.\n\nIf there are multiple solutions, output any of them.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Check Pattern is Bad", "background": "", "description": "庞教授得到一个 $n \\times m$ 的棋盘。有些格子被涂成黑色，有些被涂成白色，其他的则没有颜色。\n\n庞教授不喜欢“棋盘格”图案，所以他想要给所有未上色的格子上色，使得棋盘上没有棋盘格图案。\n\n如果 $4$ 个格子形成一个 $2 \\times 2$ 的正方形，并且它们的颜色是以下两种方式之一，则称它们具有棋盘格图案：\n\n```plain\nBW\nWB\n```\n\n```plain\nWB\nBW\n```\n\n这里 `W`（在切瓦语中为“wakuda”）表示格子被涂成黑色，`B`（在科西嘉语中为“biancu”）表示格子被涂成白色。", "inputFormat": "第一行包含一个整数 $T$ $(1 \\leq T \\leq 10^4)$，表示测试用例的数量。\n\n每个测试用例的第一行包含两个整数 $n$ 和 $m$ ($1 \\le n, m \\le 100$)，表示棋盘的尺寸。\n\n接下来的 $n$ 行中的每一行包含 $m$ 个字符。第 $i$ 行的第 $j$ 个字符表示棋盘第 $i$ 行第 $j$ 列的格子的状态。若格子被涂成黑色，则字符为 `W`；若格子被涂成白色，则字符为 `B`；若格子未上色，则字符为 `?`。\n\n保证所有测试用例中 $nm$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例，如果不能给所有未上色的格子上色以使棋盘上没有棋盘格图案，则输出一行 `NO`。\n\n否则，输出一行 `YES`。在接下来的 $n$ 行中，输出与输入格式相同的涂色棋盘。输出的棋盘应满足以下条件：\n\n- 没有任何棋盘格图案。\n- 仅由 `B` 和 `W` 组成。\n- 如果输入中某个格子已经上色，则在输出中不能更改其颜色。\n\n如果有多个解决方案，输出其中任意一个。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9879", "type": "P", "difficulty": 6, "samples": [["3\n2 2\n??\n??\n3 3\nBW?\nW?B\n?BW\n3 3\nBW?\nW?W\n?W?\n", "1\nWB\nBW\n1\nBWB\nWWB\nBBW\n4\nBWB\nWBW\nBWB\n"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "网络流", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Check Pattern is Good", "background": "", "description": "Prof. Shou is given an $n\\times m$ board. Some cells are colored black, some cells are colored white, and others are uncolored.\n\nProf. Shou likes **check patterns**, so he wants to color all uncolored cells and maximizes the number of check patterns on the board.\n\n$4$ cells forming a $2\\times 2$ square are said to have the check pattern if they are colored in one of the following ways:\n\n```plain\nBW\nWB\n```\n\n```plain\nWB\nBW\n```\n\nHere `W` (\"wakuda\" in Chewa language) means the cell is colored black and `B` (\"biancu\" in Corsican language) means the cell is colored white.", "inputFormat": "The first line contains a single integer $T$ $(1\\leq T \\leq 10^4)$ denoting the number of test cases.\n\nThe first line of each test case contains two integers $n$ and $m$ ($1\\le n, m\\le 100$) denoting the dimensions of the board.\n\nEach of the next $n$ lines contains $m$ characters. The $j$-th character of the $i$-th line represents the status of the cell on the $i$-th row and $j$-th column of the board. The character is `W` if the cell is colored black, `B` if the cell is colored white, and `?` if the cell is uncolored. \n\nIt is guaranteed that the sum of $nm$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, output a line containing the maximum number of check patterns on the board.\n\nIn the next $n$ lines, output the colored board in the same format as the input. The output board should satisfy the following conditions.\n\n- It consists of only `B` and `W`.\n- If a cell is already colored in the input, its color cannot be changed in the output.\n- The number of check patterns equals the answer you print.\n\nIf there are multiple solutions, output any of them.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Check Pattern is Good", "background": "", "description": "Prof. Shou is given an $n\\times m$ board. Some cells are colored black, some cells are colored white, and others are uncolored.\n\nProf. Shou likes **check patterns**, so he wants to color all uncolored cells and maximizes the number of check patterns on the board.\n\n$4$ cells forming a $2\\times 2$ square are said to have the check pattern if they are colored in one of the following ways:\n\n```plain\nBW\nWB\n```\n\n```plain\nWB\nBW\n```\n\nHere `W` (\"wakuda\" in Chewa language) means the cell is colored black and `B` (\"biancu\" in Corsican language) means the cell is colored white.", "inputFormat": "The first line contains a single integer $T$ $(1\\leq T \\leq 10^4)$ denoting the number of test cases.\n\nThe first line of each test case contains two integers $n$ and $m$ ($1\\le n, m\\le 100$) denoting the dimensions of the board.\n\nEach of the next $n$ lines contains $m$ characters. The $j$-th character of the $i$-th line represents the status of the cell on the $i$-th row and $j$-th column of the board. The character is `W` if the cell is colored black, `B` if the cell is colored white, and `?` if the cell is uncolored. \n\nIt is guaranteed that the sum of $nm$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, output a line containing the maximum number of check patterns on the board.\n\nIn the next $n$ lines, output the colored board in the same format as the input. The output board should satisfy the following conditions.\n\n- It consists of only `B` and `W`.\n- If a cell is already colored in the input, its color cannot be changed in the output.\n- The number of check patterns equals the answer you print.\n\nIf there are multiple solutions, output any of them.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Check Pattern is Good", "background": "", "description": "教授 Shou 得到了一个 $(n \\times m)$ 的棋盘。一些格子被涂成了黑色，一些被涂成了白色，还有一些没有上色。\n\n教授 Shou 喜欢**棋盘图案**，所以他想给所有未上色的格子涂色，并最大化棋盘上的棋盘图案数量。\n\n如果四个形成一个 $(2 \\times 2)$ 方格的单元格以以下任一种方式上色，则说它们形成了一个棋盘图案：\n\n`BW `\n\n`WB`\n\n或者\n\n`WB `\n\n`BW`\n\n这里的 `W`（在奇瓦语中是“wakuda”，意为黑色）表示格子被涂成了黑色，而 `B`（在科西嘉语中是“biancu”，意为白色）表示格子被涂成了白色。", "inputFormat": "第一行包含一个整数 $T (1 \\leq T \\leq 10^4)$，表示测试用例的数量。\n\n每个测试用例的第一行包含两个整数 $n$ 和 $ m$ $(1 \\leq n, m \\leq 100)$，表示棋盘的尺寸。\n\n接下来的 $n$ 行每行包含 $m$ 个字符。第 $i$ 行的第 $j$ 个字符表示棋盘上第 $i$ 行和第 $j$ 列的格子的状态。如果格子被涂成了黑色，则字符为 `W`；如果格子被涂成了白色，则字符为 `B`；如果格子未上色，则字符为 `?`。\n\n保证所有测试用例中 $ n \\times m $ 的总和不超过 $10^6$。\n\n\n* 只包含 `B` 和 `W`。\n* 如果输入中的格子已经上色，则在输出中不能改变其颜色。\n* 棋盘图案的数量等于你打印的答案。\n\n如果有多种解决方案，输出其中任何一种。", "outputFormat": "对于每个测试用例，输出一行，包含棋盘上的最大棋盘图案数量。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9880", "type": "P", "difficulty": 2, "samples": [["2\n8\n3 -1 4 1 -5 9 2 -6\n1\n0\n", "19\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Future Coder", "background": "", "description": "Prof. Pang builds his famous coding team recently. To pursue a gold medal in ICPC, hundreds of pupils join his team. Unfortunately, one of Prof. Pang's students believes that for any integers $a$ and $b$, $a\\times b\\ge a+b$. To disprove this proposition, Prof. Pang writes $n$ numbers $a_1,a_2,\\ldots, a_n$ on a paper and wants you to count how many pairs of numbers $(a_i, a_j)$ ($1\\le i < j\\le n$) satisfies $a_i\\times a_j<a_i+a_j$.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^6$) denoting the number of test cases.\n\nFor each test case, the first line contains a single integer $n$ ($1\\le n\\le 10^6$). The second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($-10^9\\le a_i\\le 10^9$).\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^6$.", "outputFormat": "For each test case, print one line containing the answer.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Future Coder", "background": "", "description": "Prof. Pang builds his famous coding team recently. To pursue a gold medal in ICPC, hundreds of pupils join his team. Unfortunately, one of Prof. Pang's students believes that for any integers $a$ and $b$, $a\\times b\\ge a+b$. To disprove this proposition, Prof. Pang writes $n$ numbers $a_1,a_2,\\ldots, a_n$ on a paper and wants you to count how many pairs of numbers $(a_i, a_j)$ ($1\\le i < j\\le n$) satisfies $a_i\\times a_j<a_i+a_j$.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^6$) denoting the number of test cases.\n\nFor each test case, the first line contains a single integer $n$ ($1\\le n\\le 10^6$). The second line contains $n$ integers $a_1, a_2, \\ldots, a_n$ ($-10^9\\le a_i\\le 10^9$).\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^6$.", "outputFormat": "For each test case, print one line containing the answer.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Future Coder", "background": null, "description": "共 $T(1 \\leq T \\leq 10^6)$ 组数据，每组给出一个数 $n(1 \\leq n \\leq 10^6)$ 和 $n$ 个数 $a_1,a_2,...,a_n(-10^9 \\leq a_i \\leq 10^9)$，求有多少个二元组 $(a_i,a_j)$ 满足 $a_ia_j<a_i+a_j$。", "inputFormat": "第一行为一个数 $T$。\n\n接下来 $T$ 组数据，每组数据第一行为一个数 $n$，第二行为 $n$ 个数 $a_1,a_2,...,a_n$。", "outputFormat": "$T$ 行，为满足 $a_ia_j<a_i+a_j$ 的二元组 $(a_i,a_j)$ 的组数。\n\nTranslated from [FurippuWRY](https://www.luogu.com.cn/user/993779)。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P9881", "type": "P", "difficulty": 5, "samples": [["2\n5 4 5 8\n1 2\n1 3\n1 4\n4 5\n15 1 1 1 1\n5 4 10 5\n1 2\n1 3\n1 4\n4 5\n10 4 4 4 19\n", "2\n4\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Elden Ring", "background": "", "description": "Prof. Pang is getting addicted to the game called Elden Ring, in which the world is a connected graph including $n$ vertices indexed from $1$ to $n$ and $m$ undirected edges. Players start at vertex $1$ and travel across the world to slay the god on vertex $n$.\n\nHowever, it's not that easy. For any vertex $i$ except vertex $1$, there is exactly one boss whose level is $l_i$, and the player starts the game with level $l_1$. For each day, the player can travel to any vertex $i$ from vertex $1$ and challenge the boss there. If the current level of the player is greater than the boss, the boss will be eliminated from the world (inactivated) and the level of the player will be increased by $A$. Notice that traveling through a vertex that has an active boss is forbidden. (In other words, Prof. Pang can travel from vertex $1$ to vertex $i$ if there is a path in the graph from vertex $1$ to vertex $i$ such that each vertex on this path, except for vertex $i$, has no active boss.) Meanwhile, at the beginning of each day, all the remaining bosses in the world will also be promoted by $B$ levels.\n\nTo finish a playthrough of the game, you need to slay the boss on vertex $n$ (Elden Beast). Given the information of the world, Prof. Pang is wondering how many days he needs at least to do so. \n\nThe Player can only challenge one boss each day.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases. \n\nFor each test case, the first line includes four integers $n, m, A, B~(2\\leq n\\leq 2\\times 10^5, 1 \\le m, A, B\\le 2\\times 10^5)$. In next $m$ lines, each line contains two integers $a_i, b_i~(1 \\le a_i, b_i \\le n)$, denoting the endpoints of the $i$-th undirected edge. The last line contains $n$ integers $l_i~(1 \\le l_i \\le 2 \\times 10^5)$, representing the initial levels of the player and bosses mentioned above.\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^6$ and the sum of $m$ over all test cases will not exceed $10^6$.", "outputFormat": "For each test case, output a single line containing an integer, indicating the minimum number of days Prof. Pang needs to finish the game. If it is impossible to do so, please output $-1$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Elden Ring", "background": "", "description": "Prof. Pang is getting addicted to the game called Elden Ring, in which the world is a connected graph including $n$ vertices indexed from $1$ to $n$ and $m$ undirected edges. Players start at vertex $1$ and travel across the world to slay the god on vertex $n$.\n\nHowever, it's not that easy. For any vertex $i$ except vertex $1$, there is exactly one boss whose level is $l_i$, and the player starts the game with level $l_1$. For each day, the player can travel to any vertex $i$ from vertex $1$ and challenge the boss there. If the current level of the player is greater than the boss, the boss will be eliminated from the world (inactivated) and the level of the player will be increased by $A$. Notice that traveling through a vertex that has an active boss is forbidden. (In other words, Prof. Pang can travel from vertex $1$ to vertex $i$ if there is a path in the graph from vertex $1$ to vertex $i$ such that each vertex on this path, except for vertex $i$, has no active boss.) Meanwhile, at the beginning of each day, all the remaining bosses in the world will also be promoted by $B$ levels.\n\nTo finish a playthrough of the game, you need to slay the boss on vertex $n$ (Elden Beast). Given the information of the world, Prof. Pang is wondering how many days he needs at least to do so. \n\nThe Player can only challenge one boss each day.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases. \n\nFor each test case, the first line includes four integers $n, m, A, B~(2\\leq n\\leq 2\\times 10^5, 1 \\le m, A, B\\le 2\\times 10^5)$. In next $m$ lines, each line contains two integers $a_i, b_i~(1 \\le a_i, b_i \\le n)$, denoting the endpoints of the $i$-th undirected edge. The last line contains $n$ integers $l_i~(1 \\le l_i \\le 2 \\times 10^5)$, representing the initial levels of the player and bosses mentioned above.\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^6$ and the sum of $m$ over all test cases will not exceed $10^6$.", "outputFormat": "For each test case, output a single line containing an integer, indicating the minimum number of days Prof. Pang needs to finish the game. If it is impossible to do so, please output $-1$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Elden Ring", "background": "", "description": "教授 Pang 正沉迷于一款名为《Elden Ring》的游戏，其中的世界是一个包含 $n$ 个顶点（从 $1$ 到 $n$ 编号）和 $m$ 条无向边的连通图。玩家从顶点 $1$ 开始，穿越世界去击败位于顶点 $n$ 的神。\n\n然而，这并不简单。对于除顶点 $1$ 以外的任何顶点 $i$，都有一个等级为 $l_i$ 的 Boss，玩家以等级 $l_1$ 开始游戏。每天，玩家可以从顶点 $1$ 前往任意顶点 $i$ 并挑战那里的 Boss。如果玩家当前的等级高于 Boss，Boss 将被消灭（失效），玩家的等级将增加 $A$。注意，经过一个有活跃 Boss 的顶点是被禁止的。（换句话说，教授 Pang 可以从顶点 $1$ 前往顶点 $i$，如果在图中存在一条从顶点 $1$ 到顶点 $i$ 的路径，使得该路径上的每个顶点（除了顶点 $i$）都没有活跃的 Boss。）同时，每天开始时，世界上所有剩余的 Boss 的等级都会增加 $B$。\n\n要完成游戏的通关，你需要击败位于顶点 $n$ 的 Boss（Elden Beast）。给定世界的信息，教授 Pang 想知道他至少需要多少天才能做到这一点。\n\n玩家每天只能挑战一个 Boss。", "inputFormat": "第一行包含一个整数 $T~(1 \\le T \\le 10^5)$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含四个整数 $n, m, A, B~(2\\leq n\\leq 2\\times 10^5, 1 \\le m, A, B\\le 2\\times 10^5)$。接下来的 $m$ 行中，每行包含两个整数 $a_i, b_i~(1 \\le a_i, b_i \\le n)$，表示第 $i$ 条无向边的两个端点。最后一行包含 $n$ 个整数 $l_i~(1 \\le l_i \\le 2 \\times 10^5)$，表示玩家和上述 Boss 的初始等级。\n\n保证所有测试用例的 $n$ 之和不超过 $10^6$，$m$ 之和不超过 $10^6$。", "outputFormat": "对于每个测试用例，输出一行包含一个整数，表示教授 Pang 完成游戏所需的最少天数。如果无法完成，请输出 $-1$。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9882", "type": "P", "difficulty": 7, "samples": [["3\n5\n1 1 2 2 2\n4\n1 5\n1 1\n3 5\n2 3\n5\n1 2 3 4 6\n3\n1 5\n2 4\n3 5\n3\n0 3 5\n1\n1 3\n", "1 4 3\n0 1 1\n0 2 1\n1 1 1\n5 4 4\n1 2 1\n3 6 2\n5 1 2\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Vision Test", "background": "", "description": "Prof. Pang has an extraordinary vision. He can see the pixels on a 4K monitor. To test Prof. Pang's vision, Prof. Shou will show Prof. Pang several pixels and let Prof. Pang guess a straight line that contains these pixels. Given $k$ pixels with coordinates $(i, y_i)$ ($0\\le i<k$), Prof. Pang must find nonnegative integers $a, b$ and $c$ (which represent the line $y=\\frac{ax+b}{c}$) such that $y_i=\\lfloor \\frac{ai+b}{c} \\rfloor$ for all $0\\le i<k$. \n\nProf. Shou will ask Prof. Pang multiple questions. They are given as follows: Prof. Shou has a fixed array $x_1,\\ldots, x_n$. For each question, Prof. Shou chooses a range in the array, $x_l,\\ldots, x_r$. Then he defines $y_i=x_{l+i}$ for $0\\le i\\le r - l$ and asks Prof. Pang to answer the question for the $r-l+1$ pixels $(0, y_0), \\ldots, (r-l, y_{r-l})$.\n\nPlease help Prof. Pang answer all the questions. For each question, output the answer with the **minimum** $(c, a, b)$ **in lexical order**.\n\nIt is guaranteed that the answer exists when Prof. Pang chooses the whole array $x_1, x_2, \\dots, x_n$. So the answer always exists when Prof. Pang chooses an interval of this array.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^5$) denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n$ ($1\\leq n\\leq 10^5$). The second line contains $n$ numbers $x_1, \\ldots , x_{n}$ ($0\\leq x_i\\leq 10^9$).\n\nThe next line contains an integer $q$ ($1\\le q\\le 10^5$) denoting the number of questions.\n\nEach of the following $q$ lines contains two integers $l, r$ ($1\\le l\\le r\\le n$). \n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^5$ and that the sum of $q$ over all test cases will not exceed $10^5$.", "outputFormat": "In the order of input, output one line with three integers $a, b, c$ denoting the answer for each question.", "hint": "", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Vision Test", "background": "", "description": "Prof. Pang has an extraordinary vision. He can see the pixels on a 4K monitor. To test Prof. Pang's vision, Prof. Shou will show Prof. Pang several pixels and let Prof. Pang guess a straight line that contains these pixels. Given $k$ pixels with coordinates $(i, y_i)$ ($0\\le i<k$), Prof. Pang must find nonnegative integers $a, b$ and $c$ (which represent the line $y=\\frac{ax+b}{c}$) such that $y_i=\\lfloor \\frac{ai+b}{c} \\rfloor$ for all $0\\le i<k$. \n\nProf. Shou will ask Prof. Pang multiple questions. They are given as follows: Prof. Shou has a fixed array $x_1,\\ldots, x_n$. For each question, Prof. Shou chooses a range in the array, $x_l,\\ldots, x_r$. Then he defines $y_i=x_{l+i}$ for $0\\le i\\le r - l$ and asks Prof. Pang to answer the question for the $r-l+1$ pixels $(0, y_0), \\ldots, (r-l, y_{r-l})$.\n\nPlease help Prof. Pang answer all the questions. For each question, output the answer with the **minimum** $(c, a, b)$ **in lexical order**.\n\nIt is guaranteed that the answer exists when Prof. Pang chooses the whole array $x_1, x_2, \\dots, x_n$. So the answer always exists when Prof. Pang chooses an interval of this array.", "inputFormat": "The first line contains a single integer $T$ ($1\\le T\\le 10^5$) denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n$ ($1\\leq n\\leq 10^5$). The second line contains $n$ numbers $x_1, \\ldots , x_{n}$ ($0\\leq x_i\\leq 10^9$).\n\nThe next line contains an integer $q$ ($1\\le q\\le 10^5$) denoting the number of questions.\n\nEach of the following $q$ lines contains two integers $l, r$ ($1\\le l\\le r\\le n$). \n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $10^5$ and that the sum of $q$ over all test cases will not exceed $10^5$.", "outputFormat": "In the order of input, output one line with three integers $a, b, c$ denoting the answer for each question.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Vision Test", "background": "", "description": "庞教授有着非凡的视力。他能看到 4K 显示器上的像素。为了测试庞教授的视力，寿教授将展示给庞教授几个像素，并让庞教授猜测一条包含这些像素的直线。给定 $k$ 个像素，其坐标为 $(i, y_i)$（$0 \\le i < k$），庞教授必须找到非负整数 $a, b$ 和 $c$（它们表示直线 $y = \\frac{ax+b}{c}$），使得 $y_i = \\lfloor \\frac{ai+b}{c} \\rfloor$ 对于所有 $0 \\le i < k$ 成立。\n\n寿教授将向庞教授提出多个问题。问题如下：寿教授有一个固定的数组 $x_1, \\ldots, x_n$。对于每个问题，寿教授选择数组中的一个范围 $x_l, \\ldots, x_r$。然后他定义 $y_i = x_{l+i}$ 对于 $0 \\le i \\le r - l$，并要求庞教授回答关于这些 $r-l+1$ 个像素 $(0, y_0), \\ldots, (r-l, y_{r-l})$ 的问题。\n\n请帮助庞教授回答所有问题。对于每个问题，输出 **按字典序最小** 的 $(c, a, b)$ **作为答案**。\n\n保证当庞教授选择整个数组 $x_1, x_2, \\dots, x_n$ 时，答案存在。因此，当庞教授选择该数组的一个区间时，答案总是存在的。", "inputFormat": "第一行包含一个整数 $T$（$1 \\le T \\le 10^5$），表示测试用例的数量。\n\n对于每个测试用例，第一行包含一个整数 $n$（$1 \\leq n \\leq 10^5$）。第二行包含 $n$ 个数字 $x_1, \\ldots, x_{n}$（$0 \\leq x_i \\leq 10^9$）。\n\n下一行包含一个整数 $q$（$1 \\le q \\le 10^5$），表示问题的数量。\n\n接下来的 $q$ 行中的每一行包含两个整数 $l, r$（$1 \\le l \\le r \\le n$）。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^5$，且所有测试用例中 $q$ 的总和不超过 $10^5$。", "outputFormat": "按输入顺序输出每个问题的答案，每行包含三个整数 $a, b, c$。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9883", "type": "P", "difficulty": 4, "samples": [["3\n5\n10110\n5\n00000\n5\n11111\n", "3\n0\n3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Fenwick Tree", "background": "", "description": "Prof. Pang is giving a lecture on the Fenwick tree (also called binary indexed tree). \n\nIn a Fenwick tree, we have an array $c[1\\ldots n]$ of length $n$ which is initially all-zero ($c[i]=0$ for any $1\\le i\\le n$). Each time, Prof. Pang can call the following procedure for some position $pos$ ($1\\leq pos \\leq n$) and value $val$:\n\n```cpp\ndef update(pos, val):\n    while (pos <= n):\n        c[pos] += val\n        pos += pos & (-pos)\n```\n\nNote that `pos & (-pos)` equals to the maximum power of $2$ that divides `pos` for any positive integer `pos`. \n\nIn the procedure, $val$ can be **any real** number. After calling it some (zero or more) times, Prof. Pang forgets the exact values in the array $c$. He only remembers whether $c[i]$ is zero or not for each $i$ from $1$ to $n$. Prof. Pang wants to know what is the minimum possible number of times he called the procedure assuming his memory is accurate.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n~(1 \\le n \\le 10 ^ 5)$. The next line contains a string of length $n$. The $i$-th character of the string is `1` if $c[i]$ is nonzero and `0` otherwise. \n\nIt is guaranteed that the sum of $n$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, output the minimum possible number of times Prof. Pang called the procedure. It can be proven that the answer always exists.", "hint": "For the first example, Prof. Pang can call `update(1,1)`, `update(2,-1)`, `update(3,1)` in order.\n\nFor the third example, Prof. Pang can call `update(1,1)`, `update(3,1)`, `update(5,1)` in order.", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Fenwick Tree", "background": "", "description": "Prof. Pang is giving a lecture on the Fenwick tree (also called binary indexed tree). \n\nIn a Fenwick tree, we have an array $c[1\\ldots n]$ of length $n$ which is initially all-zero ($c[i]=0$ for any $1\\le i\\le n$). Each time, Prof. Pang can call the following procedure for some position $pos$ ($1\\leq pos \\leq n$) and value $val$:\n\n```cpp\ndef update(pos, val):\n    while (pos <= n):\n        c[pos] += val\n        pos += pos & (-pos)\n```\n\nNote that `pos & (-pos)` equals to the maximum power of $2$ that divides `pos` for any positive integer `pos`. \n\nIn the procedure, $val$ can be **any real** number. After calling it some (zero or more) times, Prof. Pang forgets the exact values in the array $c$. He only remembers whether $c[i]$ is zero or not for each $i$ from $1$ to $n$. Prof. Pang wants to know what is the minimum possible number of times he called the procedure assuming his memory is accurate.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases.\n\nFor each test case, the first line contains an integer $n~(1 \\le n \\le 10 ^ 5)$. The next line contains a string of length $n$. The $i$-th character of the string is `1` if $c[i]$ is nonzero and `0` otherwise. \n\nIt is guaranteed that the sum of $n$ over all test cases is no more than $10^6$.", "outputFormat": "For each test case, output the minimum possible number of times Prof. Pang called the procedure. It can be proven that the answer always exists.", "hint": "For the first example, Prof. Pang can call `update(1,1)`, `update(2,-1)`, `update(3,1)` in order.\n\nFor the third example, Prof. Pang can call `update(1,1)`, `update(3,1)`, `update(5,1)` in order.", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Fenwick Tree", "background": "", "description": "庞教授正在讲授关于 Fenwick 树（也称为二叉索引树）的课程。\n\n在 Fenwick 树中，我们有一个长度为 $n$ 的数组 $c[1\\ldots n]$，初始时全为零（对于任何 $1\\le i\\le n$，$c[i]=0$）。每次，庞教授可以对某个位置 $pos$（$1\\leq pos \\leq n$）和一个值 $val$ 调用以下过程：\n\n```cpp\ndef update(pos, val):\n    while (pos <= n):\n        c[pos] += val\n        pos += pos & (-pos)\n```\n\n注意，对于任何正整数 `pos`，`pos & (-pos)` 等于 `pos` 的最大 2 的幂。\n\n在这个过程中，$val$ 可以是**任意实数**。在调用了若干次（零次或多次）后，庞教授忘记了数组 $c$ 中的确切值。他只记得对于每个从 $1$ 到 $n$ 的 $i$，$c[i]$ 是否为零。庞教授想知道，在假设他的记忆是准确的情况下，他调用该过程的最小可能次数。", "inputFormat": "第一行包含一个整数 $T~(1 \\le T \\le 10^5)$，表示测试用例的数量。\n\n对于每个测试用例，第一行包含一个整数 $n~(1 \\le n \\le 10 ^ 5)$。下一行包含一个长度为 $n$ 的字符串。如果 $c[i]$ 非零，则字符串的第 $i$ 个字符为 `1`，否则为 `0`。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例，输出庞教授调用该过程的最小可能次数。可以证明答案总是存在的。", "hint": "对于第一个例子，庞教授可以依次调用 `update(1,1)`，`update(2,-1)`，`update(3,1)`。\n\n对于第三个例子，庞教授可以依次调用 `update(1,1)`，`update(3,1)`，`update(5,1)`。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9884", "type": "P", "difficulty": 7, "samples": [["3\n2 4\n1 2\n3 10\n1 2 3\n5 1\n1 2 3 4 5\n", "6\n9\n4\n"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "Special Judge", "O2优化", "ICPC", "EC Final"], "title": "[EC Final 2021] Prof. Pang and Ants", "background": "", "description": "Near Prof. Pang's big house, there is an ant group which has $m$ ants and lives underground in a cave with $n$ holes. They get out of the holes for food. So where is the food? It should be in Prof. Pang's big refrigerator. The ants want to steal the food from the big refrigerator.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/afep0zz9.png)\n\nSpecifically, for an ant, it needs $1$ second to leave from the cave through any hole and $1$ second to enter the cave through any hole. Different holes have different locations. The distance between the $i$-th hole and the refrigerator is $a_i$. Thus, after leaving the cave through the $i$-th hole, an ant needs $a_i$ seconds to go to the refrigerator. After stealing some food from the refrigerator, an ant needs $a_i$ seconds to go back to the $i$-th hole. Stealing food costs no time for the ants since they are skillful enough.\n\nEach ant will leave the cave to steal something from the refrigerator and return to (enter) the cave after stealing. Each ant must leave the cave exactly once and then return to the cave. One ant can arbitrarily choose one hole to leave and also arbitrarily choose one hole to enter, where the two holes need not be the same. For any hole, during any second, there can be at most one ant leaving or entering the cave through it. There cannot be one ant leaving the cave and another ant entering the cave using the same hole during the same second. Because of this capacity constraint, some ants may need to wait before they leave the hole and/or before they return to the hole after stealing.\n\nSo you, Prof. Pang's good friend, need to calculate the minimum time cost for ants to achieve the goal and play a trick on Prof. Pang so that the ants can steal the food without being caught by Prof. Pang. The time cost is defined as the total length of time during which at least one ant is not in the cave. When an ant is entering or leaving the cave through some hole, it is not in the cave.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases.\n\nFor each test case, the first line contains two integers $n,m$ ($1\\le n \\le 10^5, 1\\le m \\le 10^{14}$) denoting the number of the holes and the number of the ants respectively. The second line contains $n$ integers $a_1, a_2, \\cdots, a_n$ ($1\\le a_i \\le 10^9$) denoting the time needed to get to the refrigerator from the $i$-th hole.\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $5\\times 10^5$.", "outputFormat": "For each test case, print one line containing one integer denoting the minimum time cost in seconds.", "hint": "In the third test case, it takes the ant $2$ seconds to leave and enter the cave through the first hole. And it takes the ant $2$ seconds to move to the refrigerator and back to the hole.", "locale": "en", "translations": {"en": {"title": "[EC Final 2021] Prof. Pang and Ants", "background": "", "description": "Near Prof. Pang's big house, there is an ant group which has $m$ ants and lives underground in a cave with $n$ holes. They get out of the holes for food. So where is the food? It should be in Prof. Pang's big refrigerator. The ants want to steal the food from the big refrigerator.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/afep0zz9.png)\n\nSpecifically, for an ant, it needs $1$ second to leave from the cave through any hole and $1$ second to enter the cave through any hole. Different holes have different locations. The distance between the $i$-th hole and the refrigerator is $a_i$. Thus, after leaving the cave through the $i$-th hole, an ant needs $a_i$ seconds to go to the refrigerator. After stealing some food from the refrigerator, an ant needs $a_i$ seconds to go back to the $i$-th hole. Stealing food costs no time for the ants since they are skillful enough.\n\nEach ant will leave the cave to steal something from the refrigerator and return to (enter) the cave after stealing. Each ant must leave the cave exactly once and then return to the cave. One ant can arbitrarily choose one hole to leave and also arbitrarily choose one hole to enter, where the two holes need not be the same. For any hole, during any second, there can be at most one ant leaving or entering the cave through it. There cannot be one ant leaving the cave and another ant entering the cave using the same hole during the same second. Because of this capacity constraint, some ants may need to wait before they leave the hole and/or before they return to the hole after stealing.\n\nSo you, Prof. Pang's good friend, need to calculate the minimum time cost for ants to achieve the goal and play a trick on Prof. Pang so that the ants can steal the food without being caught by Prof. Pang. The time cost is defined as the total length of time during which at least one ant is not in the cave. When an ant is entering or leaving the cave through some hole, it is not in the cave.", "inputFormat": "The first line contains a single integer $T~(1 \\le T \\le 10^5)$ denoting the number of test cases.\n\nFor each test case, the first line contains two integers $n,m$ ($1\\le n \\le 10^5, 1\\le m \\le 10^{14}$) denoting the number of the holes and the number of the ants respectively. The second line contains $n$ integers $a_1, a_2, \\cdots, a_n$ ($1\\le a_i \\le 10^9$) denoting the time needed to get to the refrigerator from the $i$-th hole.\n\nIt is guaranteed that the sum of $n$ over all test cases will not exceed $5\\times 10^5$.", "outputFormat": "For each test case, print one line containing one integer denoting the minimum time cost in seconds.", "hint": "In the third test case, it takes the ant $2$ seconds to leave and enter the cave through the first hole. And it takes the ant $2$ seconds to move to the refrigerator and back to the hole.", "locale": "en"}, "zh-CN": {"title": "[EC Final 2021] Prof. Pang and Ants", "background": "", "description": "在庞教授的大房子边上，有一群包含 $m$ 只蚂蚁的蚁群，居住在有 $n$ 个洞口的洞穴里。 它们会外出寻找食物。食物在庞教授的大冰箱里，蚂蚁们试图从里面偷出食物来。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/afep0zz9.png)\n\n特别的, 一只蚂蚁需要 $1$ 秒从任何洞口离开，并同样需要 $1$ 秒从任何洞口进入洞穴。不同的洞口有不同的位置，对一个洞口来说，它与冰箱的距离以 $a_i$ 表示，同样的，一只蚂蚁从冰箱偷出食物再到第 $i$ 个洞口的时间也是 $a_i$ 秒。由于蚂蚁们技术高超，从冰箱拿出食物不会消耗它们任何时间。\n\n每只蚂蚁都必须且只能从冰箱偷一次食物。蚂蚁可以任意选择一个洞口出发并进入任何一个洞口，**两个洞口可以不同**。一个洞口在 $1$ 秒内只能有一只蚂蚁进出。因为这个原因，有些蚂蚁在偷完食物后需要等待一段时间才能进入洞口。\n\n所以，你作为庞教授的好朋友， 需要计算出蚂蚁们偷出食物的最短时间。时间的定义为至少存在一只蚂蚁在洞穴外的时间总长，正在进出洞口的蚂蚁不被看作在洞穴里。", "inputFormat": "第一行包括一个整数 $T~(1 \\le T \\le 10^5)$ ，表示测试数据的总数。\n\n对每组测试数据：\n\n第一行包括两个整数 $n,m$  ($1\\le n \\le 10^5, 1\\le m \\le 10^{14}$) ，分别代表洞口的总数与蚂蚁的总数。 \n\n第二行包括 $n$ 个整数 $a_1, a_2, \\cdots, a_n$ ($1\\le a_i \\le 10^9$)， 表示第$i$号洞口到冰箱的距离。\n\n数据保证所有数据中 $n$ 的总和不超过 $5\\times 10^5$.", "outputFormat": "对每组数据，输出一行一个整数代表蚂蚁所用最短时间的秒数。\n\n## 样例 #1\n\n### 样例输入 #1\n\n```\n3\n2 4\n1 2\n3 10\n1 2 3\n5 1\n1 2 3 4 5\n```\n\n### 样例输出 #1\n\n```\n6\n9\n4\n```", "hint": "在第三组测试数据中，蚂蚁需要 $2$ 秒通过第一个洞口进出洞穴，并需要 $2$ 秒前往冰箱并搬回食物。", "locale": "zh-CN"}}}
{"pid": "P9885", "type": "P", "difficulty": 7, "samples": [["4\n10\n100\n1000\n987654321123456789", "30\n2522\n244274\n235139898689017607381017686096176798"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000], "memory": [262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2018", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Sequence and Sequence", "background": "", "description": "Consider the following two sequences $P$ and $Q$. We denote $P(i)$ as the $i$-th element in sequence $P$, and $Q(i)$ as the $i$-th element in sequence $Q$:\n\n- Sequence $P$ is a $\\textbf{sorted}$ sequence where for all $k \\in \\mathbb{Z^+}$, $k$ appears in sequence $P$ for $(k+1)$ times ($\\mathbb{Z^+}$ is the set of all positive integers). That is to say, $P = \\{1, 1, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 6, \\dots \\}$\n- Sequence $Q$ can be derived from the following equations: \n$$\\begin{cases} Q(1) = 1 & \\\\ Q(i) = Q(i-1) + Q(P(i)) & \\text{if } i > 1 \\end{cases}$$ \nThat is to say, $Q = \\{1, 2, 4, 6, 8, 12, 16, 20, 24, 30, 36, 42, 48, 54, 62, \\dots \\}$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ukq7qs74.png)\n\nGiven a positive integer $n$, please calculate the value of $Q(n)$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $10^4$), indicating the number of test cases. For each test case:\n\nThe first and only line contains an integer $n$ ($1 \\le n \\le 10^{40}$).", "outputFormat": "For each test case output one line containing one integer, indicating the value of $Q(n)$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Sequence and Sequence", "background": "", "description": "Consider the following two sequences $P$ and $Q$. We denote $P(i)$ as the $i$-th element in sequence $P$, and $Q(i)$ as the $i$-th element in sequence $Q$:\n\n- Sequence $P$ is a $\\textbf{sorted}$ sequence where for all $k \\in \\mathbb{Z^+}$, $k$ appears in sequence $P$ for $(k+1)$ times ($\\mathbb{Z^+}$ is the set of all positive integers). That is to say, $P = \\{1, 1, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 6, \\dots \\}$\n- Sequence $Q$ can be derived from the following equations: \n$$\\begin{cases} Q(1) = 1 & \\\\ Q(i) = Q(i-1) + Q(P(i)) & \\text{if } i > 1 \\end{cases}$$ \nThat is to say, $Q = \\{1, 2, 4, 6, 8, 12, 16, 20, 24, 30, 36, 42, 48, 54, 62, \\dots \\}$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ukq7qs74.png)\n\nGiven a positive integer $n$, please calculate the value of $Q(n)$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $10^4$), indicating the number of test cases. For each test case:\n\nThe first and only line contains an integer $n$ ($1 \\le n \\le 10^{40}$).", "outputFormat": "For each test case output one line containing one integer, indicating the value of $Q(n)$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Sequence and Sequence", "background": "", "description": "考虑下列两个序列 $P$ 和 $Q$。我们用 $P(i)$ 表示序列 $P$ 中的第  $i$ 个元素，用 $Q(i)$ 表示序列 $Q$ 中的第 $i$ 个元素：\n\n- 序列 $P$ 是一个**已排序的**序列，其中，对于所有 $k \\in \\mathbb{Z^+}$，$k$ 在序列 $P$ 中出现 $(k+1)$ 次（$\\mathbb{Z^+}$ 为正整数集）。也就是说，$P = \\{1, 1, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 6, \\dots \\}$\n- 序列 $Q$ 可以由以下方程导出：\n$$\\begin{cases} Q(1) = 1 & \\\\ Q(i) = Q(i-1) + Q(P(i)) & \\text{if } i > 1 \\end{cases}$$   \n也就是说，$Q = \\{1, 2, 4, 6, 8, 12, 16, 20, 24, 30, 36, 42, 48, 54, 62, \\dots \\}$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ukq7qs74.png)\n\n给定一个正整数 $n$，请计算 $Q(n)$ 的值。", "inputFormat": "本题的测试点包含多组测试数据。\n\n第一行输入包含一个整数 $T$ （$10^4$ 左右），表示测试数据的数量。对于每组测试数据：\n\n- 第一行（也是唯一一行）包含一个整数 $n$ （$1 \\le n \\le 10^{40}$）。", "outputFormat": "对于每组测试数据，输出一行，包含一个整数，表示 $Q(n)$ 的值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9886", "type": "P", "difficulty": 6, "samples": [["3\n7 5\n1 2 1 2 1 2 1\n1 2\n1 3\n2 4\n5 6\n5 7\n3 3\n1 2 3\n1 2\n1 3\n2 3\n2 3\n12345 54321\n1 2\n1 2\n1 1", "6 5 5 5 4\n1 1 1\n1 1 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2018", "树上启发式合并", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Kawa Exam", "background": "", "description": "BaoBao is taking an online exam of the Kawa programming language, which consists of $n$ multiple choice questions. The exam is not easy, as for each question, BaoBao needs to select the one and only one correct answer from $10^5$ available choices! But don't worry, as an active committer of the famous \\textit{open-kdk}, BaoBao obviously knows all the correct answers.\n\nAlthough BaoBao is an expert in Kawa, the developers of the exam system are definitely not experts in software engineering. There are $m$ bugs in the exam system, and the $i$-th bug can be described as $(u_i, v_i)$, which means that BaoBao must select the same choice for question $u_i$ and $v_i$ (even if the choice he selects is incorrect!).\n\nTime is limited, and the exam must go on. The developers only have time to fix one bug. Now the developers are wondering, for all $1 \\le i \\le m$, what's the maximum possible number of questions BaoBao can correctly answer if they fix the $i$-th bug. Please write a program to solve this problem so that the developers can select a proper bug to fix.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 10^5$, $1 \\le m \\le 10^5$), indicating the number of questions and the number of bugs.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ ($1 \\le a_i \\le 10^5$), where $a_i$ indicates the correct answer for question $i$.\n\nFor the following $m$ lines, the $i$-th line has two integers $u_i$ and $v_i$ ($1 \\le u_i, v_i \\le n$), indicating the $i$-th bug.\n\nIt's guaranteed that neither the sum of $n$ nor the sum of $m$ over all test cases will exceed $10^6$.", "outputFormat": "For each test case output one line containing $m$ integers $c_1, c_2, \\dots, c_m$ separated by a space, where $c_i$ indicates the maximum possible number of questions BaoBao can correctly answer if the $i$-th bug is fixed.\n\nPlease, DO NOT output extra spaces at the end of each line, or your answer may be considered incorrect!", "hint": "The following table explains the first sample test case.\n\n- The ``possible choices`` column indicates a possible set of choices to each question BaoBao can select, leading to a maximum possible number of correctly answered questions;\n- The ``correct`` column indicates the number of correctly answered questions using the set of choices provided in the ``possible choices`` column.\n\n$$\\begin{array}{|c|c|c|c|}\n\\hline\n\\textbf{Bug No.} & \\textbf{Possible Choices} & \\textbf{Correct} \\\\\n\\hline\n1 & (1, 2, 1, 2, 1, 1, 1) & 6 \\\\\n\\hline\n2 & (2, 2, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n3 & (1, 1, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n4 & (1, 1, 1, 1, 1, 2, 1) & 5 \\\\\n\\hline\n5 & (1, 1, 1, 1, 1, 1, 1) & 4 \\\\\n\\hline\n\\end{array}$$\n\nFor the second sample test case, no matter which bug is fixed, BaoBao has to select the same choice for all the three questions. As the correct answer for each question is different, BaoBao can only correctly answer 1 question.\n\nFor the third sample test case, note that even if the developers fix the first bug, the second bug is still taking effect and BaoBao still has to select the same choice for the two problems. It's the same if the second bug is fixed.", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Kawa Exam", "background": "", "description": "BaoBao is taking an online exam of the Kawa programming language, which consists of $n$ multiple choice questions. The exam is not easy, as for each question, BaoBao needs to select the one and only one correct answer from $10^5$ available choices! But don't worry, as an active committer of the famous \\textit{open-kdk}, BaoBao obviously knows all the correct answers.\n\nAlthough BaoBao is an expert in Kawa, the developers of the exam system are definitely not experts in software engineering. There are $m$ bugs in the exam system, and the $i$-th bug can be described as $(u_i, v_i)$, which means that BaoBao must select the same choice for question $u_i$ and $v_i$ (even if the choice he selects is incorrect!).\n\nTime is limited, and the exam must go on. The developers only have time to fix one bug. Now the developers are wondering, for all $1 \\le i \\le m$, what's the maximum possible number of questions BaoBao can correctly answer if they fix the $i$-th bug. Please write a program to solve this problem so that the developers can select a proper bug to fix.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 10^5$, $1 \\le m \\le 10^5$), indicating the number of questions and the number of bugs.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ ($1 \\le a_i \\le 10^5$), where $a_i$ indicates the correct answer for question $i$.\n\nFor the following $m$ lines, the $i$-th line has two integers $u_i$ and $v_i$ ($1 \\le u_i, v_i \\le n$), indicating the $i$-th bug.\n\nIt's guaranteed that neither the sum of $n$ nor the sum of $m$ over all test cases will exceed $10^6$.", "outputFormat": "For each test case output one line containing $m$ integers $c_1, c_2, \\dots, c_m$ separated by a space, where $c_i$ indicates the maximum possible number of questions BaoBao can correctly answer if the $i$-th bug is fixed.\n\nPlease, DO NOT output extra spaces at the end of each line, or your answer may be considered incorrect!", "hint": "The following table explains the first sample test case.\n\n- The ``possible choices`` column indicates a possible set of choices to each question BaoBao can select, leading to a maximum possible number of correctly answered questions;\n- The ``correct`` column indicates the number of correctly answered questions using the set of choices provided in the ``possible choices`` column.\n\n$$\\begin{array}{|c|c|c|c|}\n\\hline\n\\textbf{Bug No.} & \\textbf{Possible Choices} & \\textbf{Correct} \\\\\n\\hline\n1 & (1, 2, 1, 2, 1, 1, 1) & 6 \\\\\n\\hline\n2 & (2, 2, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n3 & (1, 1, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n4 & (1, 1, 1, 1, 1, 2, 1) & 5 \\\\\n\\hline\n5 & (1, 1, 1, 1, 1, 1, 1) & 4 \\\\\n\\hline\n\\end{array}$$\n\nFor the second sample test case, no matter which bug is fixed, BaoBao has to select the same choice for all the three questions. As the correct answer for each question is different, BaoBao can only correctly answer 1 question.\n\nFor the third sample test case, note that even if the developers fix the first bug, the second bug is still taking effect and BaoBao still has to select the same choice for the two problems. It's the same if the second bug is fixed.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Kawa Exam", "background": "", "description": "BaoBao 正在参加 Kawa 编程语言的在线考试，该考试由 $n$ 个多项选择题组成。考试并不容易，对于每一道题，BaoBao 都需要从 $10^5$ 个可用选项中选择唯一一个正确答案！但别担心，作为著名的 $\\text{open-kdk}$ 的积极参与者，BaoBao 显然知道所有正确的答案。\n\n虽然 BaoBao 是 Kawa 方面的专家，但考试系统的开发人员绝对不是软件工程方面的专家。考试系统中有 $m$ 个错误，第 $i$ 个错误可以描述为 $(u_i,v_i)$，这意味着 BaoBao 必须为第 $u_i$ 和 $v_i$ 个问题选择相同的选项（即使他选择的选项不正确！）。\n\n但是考试必须继续，这就意味着开发人员只有时间修复一个错误。现在，开发人员想知道，对于所有的 $1\\le i\\le m$，如果他们修复 $i$，BaoBao 可以正确回答的最大问题数量是多少。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $m$（$1\\le n\\le 10^5$，$1\\le m\\le 10^5$），表示问题数量和错误数量。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\dots,a_n$（$1\\le a_i\\le 10^5$），其中 $a_i$ 表示问题 $i$ 的正确答案。\n\n对于以下 $m$ 行，第 $i$ 行有两个整数 $u_i$ 和 $v_i$（$1\\le u_i,v_i\\le n$），表示第 $i$ 个错误。\n\n保证所有测试用例的 $n$ 和 $m$ 的总和都不会超过 $10^6$。", "outputFormat": "对于每个测试用例的输出，一行包含由空格分隔的 $m$ 个整数 $c_1,c_2,\\dots,c_m$，其中 $c_i$ 表示如果修复了第 $i$ 个错误，BaoBao 可以正确回答的最大问题数。\n\n请不要在每行末尾输出多余的空格，否则您的答案可能会被认为是错误的！", "hint": "下表解释了第一个示例测试用例。\n\n- “可能的选择”列表示 BaoBao 可以选择的每个问题的一组可能的选择，从而导致正确回答的问题的最大可能数量；\n\n- “正确”列表示使用“可能的选择”列中提供的一组选择正确回答的问题的数量。\n\n$$\\begin{array}{|c|c|c|c|}\n\\hline\n\\textbf{Bug 编号} & \\textbf{可能的选择} & \\textbf{正确} \\\\\n\\hline\n1 & (1, 2, 1, 2, 1, 1, 1) & 6 \\\\\n\\hline\n2 & (2, 2, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n3 & (1, 1, 1, 2, 1, 1, 1) & 5 \\\\\n\\hline\n4 & (1, 1, 1, 1, 1, 2, 1) & 5 \\\\\n\\hline\n5 & (1, 1, 1, 1, 1, 1, 1) & 4 \\\\\n\\hline\n\\end{array}$$\n\n对于第二个样本测试用例，无论哪个 bug 被修复，BaoBao 都必须为所有三个问题选择相同的选项。由于每个问题的正确答案不同，BaoBao 只能正确回答一个问题。\n\n对于第三个示例测试用例，请注意，即使开发人员修复了第一个错误，第二个错误仍然有效，BaoBao 仍然必须为这两个问题选择相同的选项。如果第二个错误被修复，情况也是一样的。", "locale": "zh-CN"}}}
{"pid": "P9887", "type": "P", "difficulty": 3, "samples": [["3\n1\n1\n0\n2\n00\n11\n5\n01010\n00111", "0\n2\n6"]], "limits": {"time": [1000, 1000], "memory": [262144, 262144]}, "tags": ["2018", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Flippy Sequence", "background": "", "description": "DreamGrid has just found two binary sequences $s_1, s_2, \\dots, s_n$ and $t_1, t_2, \\dots, t_n$ ($s_i, t_i \\in \\{0, 1\\}$ for all $1 \\le i \\le n$) from his virtual machine! He would like to perform the operation described below exactly twice, so that $s_i = t_i$ holds for all $1 \\le i \\le n$ after the two operations.\n\nThe operation is: Select two integers $l$ and $r$ ($1 \\le l \\le r \\le n$), change $s_i$ to $(1 - s_i)$ for all $l \\le i \\le r$.\n\nDreamGrid would like to know the number of ways to do so.\n\nWe use the following rules to determine whether two ways are different:\n\n- Let $A = (a_1, a_2, a_3, a_4)$, where $1 \\le a_1 \\le a_2 \\le n, 1 \\le a_3 \\le a_4 \\le n$, be a valid operation pair denoting that DreamGrid selects integers $a_1$ and $a_2$ for the first operation and integers $a_3$ and $a_4$ for the second operation;\n- Let $B = (b_1, b_2, b_3, b_4)$, where $1 \\le b_1 \\le b_2 \\le n, 1 \\le b_3 \\le b_4 \\le n$, be another valid operation pair denoting that DreamGrid selects integers $b_1$ and $b_2$ for the first operation and integers $b_3$ and $b_4$ for the second operation.\n- $A$ and $B$ are considered different, if there exists an integer $k$ ($1 \\le k \\le 4$) such that $a_k \\ne b_k$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^6$), indicating the length of two binary sequences.\n\nThe second line contains a string $s_1s_2\\dots s_n$ ($s_i \\in \\{\\text{`0'}, \\text{`1'}\\}$) of length $n$, indicating the first binary sequence.\n\nThe third line contains a string $t_1t_2\\dots t_n$ ($t_i \\in \\{\\text{`0'}, \\text{`1'}\\}$) of length $n$, indicating the second binary sequence.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^7$.", "outputFormat": "For each test case, output an integer denoting the answer.", "hint": "For the second sample test case, there are two valid operation pairs: $(1, 1, 2, 2)$ and $(2, 2, 1, 1)$.\n\nFor the third sample test case, there are six valid operation pairs: $(2, 3, 5, 5)$, $(5, 5, 2, 3)$, $(2, 5, 4, 4)$, $(4, 4, 2, 5)$, $(2, 4, 4, 5)$ and $(4, 5, 2, 4)$.", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Flippy Sequence", "background": "", "description": "DreamGrid has just found two binary sequences $s_1, s_2, \\dots, s_n$ and $t_1, t_2, \\dots, t_n$ ($s_i, t_i \\in \\{0, 1\\}$ for all $1 \\le i \\le n$) from his virtual machine! He would like to perform the operation described below exactly twice, so that $s_i = t_i$ holds for all $1 \\le i \\le n$ after the two operations.\n\nThe operation is: Select two integers $l$ and $r$ ($1 \\le l \\le r \\le n$), change $s_i$ to $(1 - s_i)$ for all $l \\le i \\le r$.\n\nDreamGrid would like to know the number of ways to do so.\n\nWe use the following rules to determine whether two ways are different:\n\n- Let $A = (a_1, a_2, a_3, a_4)$, where $1 \\le a_1 \\le a_2 \\le n, 1 \\le a_3 \\le a_4 \\le n$, be a valid operation pair denoting that DreamGrid selects integers $a_1$ and $a_2$ for the first operation and integers $a_3$ and $a_4$ for the second operation;\n- Let $B = (b_1, b_2, b_3, b_4)$, where $1 \\le b_1 \\le b_2 \\le n, 1 \\le b_3 \\le b_4 \\le n$, be another valid operation pair denoting that DreamGrid selects integers $b_1$ and $b_2$ for the first operation and integers $b_3$ and $b_4$ for the second operation.\n- $A$ and $B$ are considered different, if there exists an integer $k$ ($1 \\le k \\le 4$) such that $a_k \\ne b_k$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^6$), indicating the length of two binary sequences.\n\nThe second line contains a string $s_1s_2\\dots s_n$ ($s_i \\in \\{\\text{`0'}, \\text{`1'}\\}$) of length $n$, indicating the first binary sequence.\n\nThe third line contains a string $t_1t_2\\dots t_n$ ($t_i \\in \\{\\text{`0'}, \\text{`1'}\\}$) of length $n$, indicating the second binary sequence.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^7$.", "outputFormat": "For each test case, output an integer denoting the answer.", "hint": "For the second sample test case, there are two valid operation pairs: $(1, 1, 2, 2)$ and $(2, 2, 1, 1)$.\n\nFor the third sample test case, there are six valid operation pairs: $(2, 3, 5, 5)$, $(5, 5, 2, 3)$, $(2, 5, 4, 4)$, $(4, 4, 2, 5)$, $(2, 4, 4, 5)$ and $(4, 5, 2, 4)$.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Flippy Sequence", "background": null, "description": "DreamGrid 刚刚从他的虚拟机中找到了两个二进制序列 $s_1, s_2, \\dots, s_n$ 和 $t_1, t_2, \\dots, t_n$（对于所有 $1 \\le i \\le n$，$s_i, t_i \\in \\{0, 1\\}$）！他想要执行下面描述的操作恰好两次，使得在两次操作后，对于所有 $1 \\le i \\le n$，都有 $s_i = t_i$。 操作是：选择两个整数 $l$ 和 $r$（$1 \\le l \\le r \\le n$），将所有 $l \\le i \\le r$ 的 $s_i$ 变为 $(1 - s_i)$。 DreamGrid 想知道有多少种方法可以做到这一点。 我们使用以下规则来确定两种方法是否不同： - 设 $A = (a_1, a_2, a_3, a_4)$，其中 $1 \\le a_1 \\le a_2 \\le n, 1 \\le a_3 \\le a_4 \\le n$，表示 DreamGrid 为第一次操作选择整数 $a_1$ 和 $a_2$，为第二次操作选择整数 $a_3$ 和 $a_4$； - 设 $B = (b_1, b_2, b_3, b_4)$，其中 $1 \\le b_1 \\le b_2 \\le n, 1 \\le b_3 \\le b_4 \\le n$，表示 DreamGrid 为第一次操作选择整数 $b_1$ 和 $b_2$，为第二次操作选择整数 $b_3$ 和 $b_4$。 - 如果存在整数 $k$（$1 \\le k \\le 4$）使得 $a_k \\neq b_k$，则 $A$ 和 $B$ 被认为是不同的。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例： 第一行包含一个整数 $n$（$1 \\le n \\le 10^6$），表示两个二进制序列的长度。 第二行包含一个长度为 $n$ 的字符串 $s_1s_2\\dots s_n$（$s_i \\in \\{\\text{`0'}, \\text{`1'}\\}$），表示第一个二进制序列。 第三行包含一个长度为 $n$ 的字符串 $t_1t_2\\dots t_n$（$t_i \\in \\{\\text{`0'}, \\text{`1'}\\}$），表示第二个二进制序列。 保证所有测试用例中 $n$ 的总和不超过 $10^7$。", "outputFormat": "对于每个测试用例，输出一个整数表示答案。", "hint": "对于第二个样例测试用例，有两个有效的操作对：$(1, 1, 2, 2)$ 和 $(2, 2, 1, 1)$。 对于第三个样例测试用例，有六个有效的操作对：$(2, 3, 5, 5)$，$(5, 5, 2, 3)$，$(2, 5, 4, 4)$，$(4, 4, 2, 5)$，$(2, 4, 4, 5)$ 和 $(4, 5, 2, 4)$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9888", "type": "P", "difficulty": 4, "samples": [["4\n2 2\n8101215\n3 4\n100000001000\n2 2\n80101215\n3 4\n1000000010000", "23 45\n101 1000\nImpossible\nImpossible"]], "limits": {"time": [1000, 1000], "memory": [262144, 262144]}, "tags": ["模拟", "2018", "O2优化", "枚举", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Magic Multiplication", "background": "", "description": "BaoBao is now learning a new binary operation between two positive integers, represented by $\\otimes$, in his magic book. The book tells him that the result of such operation is calculated by concatenating all multiple results of each digit in the two integers.\n\nFormally speaking, let the first integer be $A = a_1a_2 \\dots a_n$, where $a_i$ indicates the $i$-th digit in $A$, and the second integer be $B = b_1b_2 \\dots b_m$, where $b_i$ indicates the $i$-th digit in $B$. We have \n\n$$A \\otimes B = \\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^m a_ib_j = a_1b_1 + a_1b_2 + \\dots + a_1b_m + a_2b_1 + \\dots + a_nb_m$$ \n\nNote that the result of $a_ib_j$ is considered to be a $\\textbf{string}$ (without leading zeros if $a_ib_j > 0$, or contains exactly one `0` if $a_ib_j = 0$), NOT a normal integer. Also, the sum here means $\\textbf{string concatenation}$, NOT the normal addition operation.\n\nFor example, $23 \\otimes 45 = 8101215$. Because $8=2 \\times 4$, $10=2 \\times 5$, $12=3 \\times 4$ and $15=3 \\times 5$.\n\nBaoBao is very smart and soon knows how to do the inverse operation of $\\otimes$. Now he gives you the result of a $\\otimes$ operation and the numbers of digits in the two original integers. Please help him to restore the two original integers $A$ and $B$.\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two positive integers $n$ and $m$ ($1 \\le n, m \\le 2 \\times 10^5$), where $n$ indicates the length of $A$ and $m$ indicates the length of $B$. Here length of an integer means the length of the string when writing the number in decimal notation without leading zeros.\n\nThe second line contains only one positive integer $C$ without leading zeros, indicating the result of $A \\otimes B$. The length of $C$ is no more than $2 \\times 10^5$.\n\nIt's guaranteed that the sum of lengths of $C$ over all test cases will not exceed $2 \\times 10^6$.", "outputFormat": "For each test case output one line.\n\nIf there exist such $A$ and $B$ that $A \\otimes B = C$, output one line containing two integers $A$ and $B$ separated by one space. Note that $A$ and $B$ should be positive integers without leading zeros, the length of $A$ should be exactly $n$, and the length of $B$ should be exactly $m$.\n\nIf there are multiple valid answers, output the answer with the smallest $A$; If there are still more than one answer, output one of them with the smallest $B$.\n\nIf such $A$ and $B$ do not exist, print ``Impossible`` (without quotes) on a single line.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Magic Multiplication", "background": "", "description": "BaoBao is now learning a new binary operation between two positive integers, represented by $\\otimes$, in his magic book. The book tells him that the result of such operation is calculated by concatenating all multiple results of each digit in the two integers.\n\nFormally speaking, let the first integer be $A = a_1a_2 \\dots a_n$, where $a_i$ indicates the $i$-th digit in $A$, and the second integer be $B = b_1b_2 \\dots b_m$, where $b_i$ indicates the $i$-th digit in $B$. We have \n\n$$A \\otimes B = \\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^m a_ib_j = a_1b_1 + a_1b_2 + \\dots + a_1b_m + a_2b_1 + \\dots + a_nb_m$$ \n\nNote that the result of $a_ib_j$ is considered to be a $\\textbf{string}$ (without leading zeros if $a_ib_j > 0$, or contains exactly one `0` if $a_ib_j = 0$), NOT a normal integer. Also, the sum here means $\\textbf{string concatenation}$, NOT the normal addition operation.\n\nFor example, $23 \\otimes 45 = 8101215$. Because $8=2 \\times 4$, $10=2 \\times 5$, $12=3 \\times 4$ and $15=3 \\times 5$.\n\nBaoBao is very smart and soon knows how to do the inverse operation of $\\otimes$. Now he gives you the result of a $\\otimes$ operation and the numbers of digits in the two original integers. Please help him to restore the two original integers $A$ and $B$.\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two positive integers $n$ and $m$ ($1 \\le n, m \\le 2 \\times 10^5$), where $n$ indicates the length of $A$ and $m$ indicates the length of $B$. Here length of an integer means the length of the string when writing the number in decimal notation without leading zeros.\n\nThe second line contains only one positive integer $C$ without leading zeros, indicating the result of $A \\otimes B$. The length of $C$ is no more than $2 \\times 10^5$.\n\nIt's guaranteed that the sum of lengths of $C$ over all test cases will not exceed $2 \\times 10^6$.", "outputFormat": "For each test case output one line.\n\nIf there exist such $A$ and $B$ that $A \\otimes B = C$, output one line containing two integers $A$ and $B$ separated by one space. Note that $A$ and $B$ should be positive integers without leading zeros, the length of $A$ should be exactly $n$, and the length of $B$ should be exactly $m$.\n\nIf there are multiple valid answers, output the answer with the smallest $A$; If there are still more than one answer, output one of them with the smallest $B$.\n\nIf such $A$ and $B$ do not exist, print ``Impossible`` (without quotes) on a single line.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Magic Multiplication", "background": null, "description": "BaoBao 现在正在他的魔法书中学习两个正整数之间的一种新的二元运算，用 $\\otimes$ 表示。这本书告诉他，这种运算的结果是通过将两个整数中每个数字的所有多个结果串联起来计算的。\n\n形式上讲，让第一个整数为 $A=a_1a_2\\dots a_n$，其中 $a_i$ 表示 $A$ 中的第 $i$ 位，第二个整数为 $B=b_1b_2\\dots b_m$，其中 $b_i$ 表示 $B$ 中的第一位。我们有\n\n$$A \\otimes B = \\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^m a_ib_j = a_1b_1 + a_1b_2 + \\dots + a_1b_m + a_2b_1 + \\dots + a_nb_m$$\n\n请注意，$a_ib_j$ 的结果被认为是 $\\textbf{string}$（也就是直接算出结果然后把它当作字符串），而不是正常整数。此外，这里的 sum 表示 $\\textbf{string concatenation}$（也就是字符串拼接），而不是正常的加法运算。\n\n例如，$23\\otimes 45=8101215$。因为 $8=2\\times 4$，$10=2\\times 5$，$12=3\\times 4$ 和 $15=3\\times 5$。\n\nBaoBao 很聪明，很快就想出了 $\\otimes$ 的逆运算。现在，他给出了 $\\otimes$ 运算的结果以及两个原始整数中的位数。请帮助他恢复两个原始整数 $A$ 和 $B$。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个正整数 $n$ 和 $m$（$1\\le n,m\\le 2\\times 10^5$），其中 $n$ 表示 $A$ 的长度，$m$ 表示 $B$ 的长度。这里，整数的长度是指在不带前导零的十进制记数法中写入数字时字符串的长度。\n\n第二行只包含一个不带前导零的正整数 $C$，表示 $A\\otimes B$ 的结果。$C$ 的长度不超过 $2\\times 10^5$。\n\n保证所有测试用例的 $C$ 长度总和不会超过 $2\\times 10^6$。", "outputFormat": "对于每个测试用例输出一行。\n\n如果存在这样的 $A$ 和 $B$，$A\\otimes B=C$，则输出一行，其中包含由一个空格分隔的两个整数 $A$ 与 $B$。请注意，$A$ 和 $B$ 应该是不带前导零的正整数，$A$ 的长度应该正好是 $n$，$B$ 的长度应正好是 $m$。\n\n如果存在多个有效答案，则输出具有最小 $A$ 的答案；如果仍然有一个以上的答案，请输出其中一个最小的 $B$。\n\n如果不存在这样的 $A$ 和 $B$，请在单行上打印 ``Impossible``（不带引号）。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P9889", "type": "P", "difficulty": 4, "samples": [["2\n4 8\n3 2 6 6\n3 9\n10 10 1", "6\n4"]], "limits": {"time": [1000, 1000, 1000], "memory": [262144, 262144, 262144]}, "tags": ["贪心", "2018", "二分", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Plants vs. Zombies", "background": "", "description": "BaoBao and DreamGrid are playing the game $\\textit{Plants vs. Zombies}$. In the game, DreamGrid grows plants to defend his garden against BaoBao's zombies.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9tyl9ix3.png)\n\n$\\textit{Plants vs. Zombies(?)} \\\\\n\\textit{(Image from pixiv. ID: 21790160; Artist: socha)}$\n\nThere are $n$ plants in DreamGrid's garden arranged in a line. From west to east, the plants are numbered from 1 to $n$ and the $i$-th plant lies $i$ meters to the east of DreamGrid's house. The $i$-th plant has a defense value of $d_i$ and a growth speed of $a_i$. Initially, $d_i = 0$ for all $1 \\le i \\le n$. \n\nDreamGrid uses a robot to water the plants. The robot is in his house initially. In one step of watering, DreamGrid will choose a direction (east or west) and the robot moves exactly 1 meter along the direction. After moving, if the $i$-th plant is at the robot's position, the robot will water the plant and $a_i$ will be added to $d_i$. Because the water in the robot is limited, at most $m$ steps can be done.\n\nThe defense value of the garden is defined as $\\min\\{d_i | 1 \\le i \\le n\\}$. DreamGrid needs your help to maximize the garden's defense value and win the game.\n\n- Each time the robot MUST move before watering a plant;\n- It's OK for the robot to move more than $n$ meters to the east away from the house, or move back into the house, or even move to the west of the house.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($2 \\le n \\le 10^5$, $0 \\le m \\le 10^{12}$), indicating the number of plants and the maximum number of steps the robot can take.\n\nThe second line contains $n$ integers $a_1, a_2, ... , a_n$ ($1 \\le a_i \\le 10^5$), where $a_i$ indicates the growth speed of the $i$-th plant.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.", "outputFormat": "For each test case output one line containing one integer, indicating the maximum defense value of the garden DreamGrid can get.", "hint": "In the explanation below, `E` indicates that the robot moves exactly 1 meter to the east from his current position, and `W` indicates that the robot moves exactly 1 meter to the west from his current position.\n\nFor the first test case, a candidate direction sequence is $\\{E, E, W, E, E, W, E, E\\}$, so that we have $d = \\{6,6,12,6\\}$ after the watering.\n\nFor the second test case, a candidate direction sequence is $\\{E, E, E, E, W, E, W, E, W\\}$, so that we have $d = \\{10, 10, 4\\}$ after the watering.", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Plants vs. Zombies", "background": "", "description": "BaoBao and DreamGrid are playing the game $\\textit{Plants vs. Zombies}$. In the game, DreamGrid grows plants to defend his garden against BaoBao's zombies.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9tyl9ix3.png)\n\n$\\textit{Plants vs. Zombies(?)} \\\\\n\\textit{(Image from pixiv. ID: 21790160; Artist: socha)}$\n\nThere are $n$ plants in DreamGrid's garden arranged in a line. From west to east, the plants are numbered from 1 to $n$ and the $i$-th plant lies $i$ meters to the east of DreamGrid's house. The $i$-th plant has a defense value of $d_i$ and a growth speed of $a_i$. Initially, $d_i = 0$ for all $1 \\le i \\le n$. \n\nDreamGrid uses a robot to water the plants. The robot is in his house initially. In one step of watering, DreamGrid will choose a direction (east or west) and the robot moves exactly 1 meter along the direction. After moving, if the $i$-th plant is at the robot's position, the robot will water the plant and $a_i$ will be added to $d_i$. Because the water in the robot is limited, at most $m$ steps can be done.\n\nThe defense value of the garden is defined as $\\min\\{d_i | 1 \\le i \\le n\\}$. DreamGrid needs your help to maximize the garden's defense value and win the game.\n\n- Each time the robot MUST move before watering a plant;\n- It's OK for the robot to move more than $n$ meters to the east away from the house, or move back into the house, or even move to the west of the house.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($2 \\le n \\le 10^5$, $0 \\le m \\le 10^{12}$), indicating the number of plants and the maximum number of steps the robot can take.\n\nThe second line contains $n$ integers $a_1, a_2, ... , a_n$ ($1 \\le a_i \\le 10^5$), where $a_i$ indicates the growth speed of the $i$-th plant.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.", "outputFormat": "For each test case output one line containing one integer, indicating the maximum defense value of the garden DreamGrid can get.", "hint": "In the explanation below, `E` indicates that the robot moves exactly 1 meter to the east from his current position, and `W` indicates that the robot moves exactly 1 meter to the west from his current position.\n\nFor the first test case, a candidate direction sequence is $\\{E, E, W, E, E, W, E, E\\}$, so that we have $d = \\{6,6,12,6\\}$ after the watering.\n\nFor the second test case, a candidate direction sequence is $\\{E, E, E, E, W, E, W, E, W\\}$, so that we have $d = \\{10, 10, 4\\}$ after the watering.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Plants vs. Zombies", "background": "", "description": "BaoBao 和 DreamGrid 正在玩游戏《植物大战僵尸》。在游戏中，DreamGrid 种植植物来保护他的花园免受 BaoBao 的僵尸攻击。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9tyl9ix3.png)\n\n《植物大战僵尸（？）》\n\n（图片来自 pixiv。ID: 21790160；艺术家：socha）\n\nDreamGrid 的花园里有 $n$ 株植物，按一条直线排列。从西到东，植物从 1 到 $n$ 编号，第 $i$ 株植物位于 DreamGrid 的房子东边 $i$ 米处。第 $i$ 株植物的防御值为 $d_i$，生长速度为 $a_i$。最初，所有 $1 \\le i \\le n$ 的 $d_i = 0$。\n\nDreamGrid 使用一个机器人来浇灌植物。机器人最初在他的房子里。在一次浇水步骤中，DreamGrid 会选择一个方向（东或西），机器人沿该方向正好移动 1 米。移动后，如果第 $i$ 株植物位于机器人的位置，机器人将浇灌植物，并将 $a_i$ 加到 $d_i$ 上。由于机器人的水是有限的，最多可以进行 $m$ 步。\n\n花园的防御值定义为 $\\min\\{d_i | 1 \\le i \\le n\\}$。DreamGrid 需要你的帮助来最大化花园的防御值并赢得比赛。\n\n- 每次机器人必须在浇灌植物之前移动；\n- 机器人可以移动超过 $n$ 米到房子东边，或者移回房子，甚至移动到房子西边。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $m$ ($2 \\le n \\le 10^5$, $0 \\le m \\le 10^{12}$)，表示植物的数量和机器人可以移动的最大步数。\n\n第二行包含 $n$ 个整数 $a_1, a_2, ..., a_n$ ($1 \\le a_i \\le 10^5$)，其中 $a_i$ 表示第 $i$ 株植物的生长速度。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例输出一行，包含一个整数，表示 DreamGrid 可以获得的花园的最大防御值。", "hint": "在下面的解释中，`E` 表示机器人从当前位置向东移动 1 米，`W` 表示机器人从当前位置向西移动 1 米。\n\n对于第一个测试用例，一个候选方向序列是 $\\{E, E, W, E, E, W, E, E\\}$，这样我们有 $d = \\{6,6,12,6\\}$ 在浇水后。\n\n对于第二个测试用例，一个候选方向序列是 $\\{E, E, E, E, W, E, W, E, W\\}$，这样我们有 $d = \\{10, 10, 4\\}$ 在浇水后。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9890", "type": "P", "difficulty": 5, "samples": [["2\n3 1\n4 3", "Impossible\n2 1 4 3\n3 4 1 2\n4 3 2 1"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144]}, "tags": ["2018", "O2优化", "构造", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Tournament", "background": "", "description": "DreamGrid, the king of Gridland, is making a knight tournament. There are $n$ knights, numbered from 1 to $n$, participating in the tournament. The rules of the tournament are listed as follows:\n\n- The tournament consists of $k$ rounds. Each round consists of several duels. Each duel happens between exactly two knights.\n- Each knight must participate in exactly one duel during each round.\n- For each pair of knights, there can be at most one duel between them during all the $k$ rounds.\n- Let $1 \\le i, j \\le k$, $i \\ne j$, and $1 \\le a, b, c, d \\le n$, $a, b, c, d$ be four distinct integers. If\n    - Knight $a$ fights against knight $b$ during round $i$, and\n    - Knight $c$ fights against knight $d$ during round $i$, and\n    - Knight $a$ fights against knight $c$ during round $j$,\n- then knight $b$ must fight against knight $d$ during round $j$.\n\nAs DreamGrid's general, you are asked to write a program to arrange all the duels in all the $k$ rounds, so that the resulting arrangement satisfies the rules above. ", "inputFormat": "There are multiple test cases. The first line of the input is an integer $T$, indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $n$ and $k$ ($1 \\le n, k \\le 1000$), indicating the number of knights participating in the tournament and the number of rounds.\n\nIt's guaranteed that neither the sum of $n$ nor the sum of $k$ in all test cases will exceed $5000$.", "outputFormat": "For each test case:\n\n- If it's possible to make a valid arrangement, output $k$ lines. On the $i$-th line, output $n$ integers $c_{i, 1}, c_{i, 2}, \\dots, c_{i, n}$ separated by one space, indicating that in the $i$-th round, knight $j$ will fight against knight $c_{i, j}$ for all $1 \\le j \\le n$.   \nIf there are multiple valid answers, output the lexicographically smallest answer.   \nConsider two answers $A$ and $B$, let's denote $a_{i, j}$ as the $j$-th integer on the $i$-th line in answer $A$, and $b_{i, j}$ as the $j$-th integer on the $i$-th line in answer $B$. Answer $A$ is lexicographically smaller than answer $B$, if there exists two integers $p$ ($1 \\le p \\le k$) and $q$ ($1 \\le q \\le n$), such that\n    - for all $1 \\le i < p$ and $1 \\le j \\le n$, $a_{i, j} = b_{i, j}$, and\n    - for all $1 \\le j < q$, $a_{p, j} = b_{p, j}$, and finally $a_{p, q} < b_{p, q}$.\n-If it's impossible to make a valid arrangement, output ``Impossible`` (without quotes) in one line.\n\nPlease, DO NOT output extra spaces at the end of each line, or your answer may be considered incorrect!", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Tournament", "background": "", "description": "DreamGrid, the king of Gridland, is making a knight tournament. There are $n$ knights, numbered from 1 to $n$, participating in the tournament. The rules of the tournament are listed as follows:\n\n- The tournament consists of $k$ rounds. Each round consists of several duels. Each duel happens between exactly two knights.\n- Each knight must participate in exactly one duel during each round.\n- For each pair of knights, there can be at most one duel between them during all the $k$ rounds.\n- Let $1 \\le i, j \\le k$, $i \\ne j$, and $1 \\le a, b, c, d \\le n$, $a, b, c, d$ be four distinct integers. If\n    - Knight $a$ fights against knight $b$ during round $i$, and\n    - Knight $c$ fights against knight $d$ during round $i$, and\n    - Knight $a$ fights against knight $c$ during round $j$,\n- then knight $b$ must fight against knight $d$ during round $j$.\n\nAs DreamGrid's general, you are asked to write a program to arrange all the duels in all the $k$ rounds, so that the resulting arrangement satisfies the rules above. ", "inputFormat": "There are multiple test cases. The first line of the input is an integer $T$, indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $n$ and $k$ ($1 \\le n, k \\le 1000$), indicating the number of knights participating in the tournament and the number of rounds.\n\nIt's guaranteed that neither the sum of $n$ nor the sum of $k$ in all test cases will exceed $5000$.", "outputFormat": "For each test case:\n\n- If it's possible to make a valid arrangement, output $k$ lines. On the $i$-th line, output $n$ integers $c_{i, 1}, c_{i, 2}, \\dots, c_{i, n}$ separated by one space, indicating that in the $i$-th round, knight $j$ will fight against knight $c_{i, j}$ for all $1 \\le j \\le n$.   \nIf there are multiple valid answers, output the lexicographically smallest answer.   \nConsider two answers $A$ and $B$, let's denote $a_{i, j}$ as the $j$-th integer on the $i$-th line in answer $A$, and $b_{i, j}$ as the $j$-th integer on the $i$-th line in answer $B$. Answer $A$ is lexicographically smaller than answer $B$, if there exists two integers $p$ ($1 \\le p \\le k$) and $q$ ($1 \\le q \\le n$), such that\n    - for all $1 \\le i < p$ and $1 \\le j \\le n$, $a_{i, j} = b_{i, j}$, and\n    - for all $1 \\le j < q$, $a_{p, j} = b_{p, j}$, and finally $a_{p, q} < b_{p, q}$.\n-If it's impossible to make a valid arrangement, output ``Impossible`` (without quotes) in one line.\n\nPlease, DO NOT output extra spaces at the end of each line, or your answer may be considered incorrect!", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Tournament", "background": null, "description": "DreamGrid，Gridland 的国王，正在举办一场骑士锦标赛。有 $n$ 名骑士，编号从 1 到 $n$，参加这次锦标赛。锦标赛的规则如下：\n\n- 锦标赛由 $k$ 轮组成。每一轮由若干场决斗组成。每场决斗恰好在两名骑士之间进行。\n- 每名骑士在每一轮中必须参加一场决斗。\n- 对于每对骑士，在所有 $k$ 轮中最多只能有一场决斗。\n- 设 $1 \\le i, j \\le k$，$i \\neq j$，且 $1 \\le a, b, c, d \\le n$，$a, b, c, d$ 是四个不同的整数。如果\n  - 骑士 $a$ 在第 $i$ 轮对战骑士 $b$，并且\n  - 骑士 $c$ 在第 $i$ 轮对战骑士 $d$，并且\n  - 骑士 $a$ 在第 $j$ 轮对战骑士 $c$，\n- 那么骑士 $b$ 必须在第 $j$ 轮对战骑士 $d$。\n\n作为 DreamGrid 的将军，你需要编写一个程序来安排所有 $k$ 轮中的所有决斗，以便结果安排满足上述规则。", "inputFormat": "有多个测试用例。输入的第一行是一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $k$ ($1 \\le n, k \\le 1000$)，表示参加锦标赛的骑士数量和轮数。\n\n保证所有测试用例中 $n$ 和 $k$ 的总和不超过 5000。", "outputFormat": "对于每个测试用例：\n\n- 如果可以进行有效的安排，输出 $k$ 行。在第 $i$ 行，输出 $n$ 个整数 $c_{i, 1}, c_{i, 2}, \\dots, c_{i, n}$，用空格分隔，表示在第 $i$ 轮中，骑士 $j$ 将与骑士 $c_{i, j}$ 对战，所有 $1 \\le j \\le n$。如果有多个有效答案，输出字典序最小的答案。考虑两个答案 $A$ 和 $B$，记 $a_{i, j}$ 为答案 $A$ 中第 $i$ 行的第 $j$ 个整数，$b_{i, j}$ 为答案 $B$ 中第 $i$ 行的第 $j$ 个整数。答案 $A$ 在字典序上小于答案 $B$，如果存在两个整数 $p$ ($1 \\le p \\le k$) 和 $q$ ($1 \\le q \\le n$)，使得\n  - 对于所有 $1 \\le i < p$ 和 $1 \\le j \\le n$，$a_{i, j} = b_{i, j}$，并且\n  - 对于所有 $1 \\le j < q$，$a_{p, j} = b_{p, j}$，最终 $a_{p, q} < b_{p, q}$。\n- 如果无法进行有效的安排，输出一行 “Impossible”（不带引号）。\n\n请不要在每行末尾输出多余的空格，否则你的答案可能会被视为不正确！", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9891", "type": "P", "difficulty": 6, "samples": [["3\n2 2\n2 0\n3 2\n2 1 0\n3 1\n2 1 0", "8\n3\n1"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000], "memory": [262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2018", "O2优化", "容斥原理", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Repair the Artwork", "background": "", "description": "DreamGrid has a paper strip with $n$ grids in a line and he has drawn some beautiful patterns in some grids. Unfortunately, his naughty roommate BaoBao drew some other patterns in some other grids when he wasn't at home. Now DreamGrid has to erase BaoBao's patterns without destroying his own patterns.\n\nLet's number the grids from 1 to $n$ from left to right. Each grid either contains DreamGrid's pattern, or contains BaoBao's pattern, or is empty.\n\nEach time, DreamGrid can select two integers $l$ and $r$ (these two integers can be different each time) such that\n\n- $1 \\le l \\le r \\le n$, and\n- for all $l \\le i \\le r$, the $i$-th grid either contains BaoBao's pattern, or is empty,\n\nand change the $i$-th grid to an empty grid for all $l \\le i \\le r$.\n\nHow many ways can DreamGrid change all the grids containing BaoBao's pattern to empty grids by performing the above operation exactly $m$ times? As the answer may be large, please print the answer modulo $10^9 + 7$.\n\nLet $\\{(a_1, b_1), (a_2, b_2), \\dots (a_m, b_m)\\}$ be a valid erasing sequence ($1 \\le a_i \\le b_i \\le n$), where $(a_i, b_i)$ indicates that DreamGrid selects integers $a_i$ and $b_i$ in the $i$-th operation. Let $\\{(c_1, d_1), (c_2, d_2), \\dots, (c_m, d_m)\\}$ be another valid erasing sequence ($1 \\le c_i \\le d_i \\le n$), where $(c_i, d_i)$ indicates that DreamGrid selects integers $c_i$ and $d_i$ in the $i$-th operation. These two sequences are considered different, if there exists an integer $k$ ($1 \\le k \\le m$) such that $a_k \\ne c_k$ or $b_k \\ne d_k$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\le T \\le 1000$), indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 100$, $1 \\le m \\le 10^9$), indicating the number of grids and the number of times to perform the operation.\n\nThe second line contains $n$ integers $a_i$ ($a_i \\in \\{0, 1, 2\\}$).\n\n- If $a_i = 0$, the $i$-th grid is empty.\n- If $a_i = 1$, the $i$-th grid contains DreamGrid's pattern.\n- If $a_i = 2$, the $i$-th grid contains BaoBao's pattern.\n\nIt's guaranteed that at most 50 test cases have $n > 50$.", "outputFormat": "For each test case, output one line containing the number of ways modulo $10^9 + 7$.", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Repair the Artwork", "background": "", "description": "DreamGrid has a paper strip with $n$ grids in a line and he has drawn some beautiful patterns in some grids. Unfortunately, his naughty roommate BaoBao drew some other patterns in some other grids when he wasn't at home. Now DreamGrid has to erase BaoBao's patterns without destroying his own patterns.\n\nLet's number the grids from 1 to $n$ from left to right. Each grid either contains DreamGrid's pattern, or contains BaoBao's pattern, or is empty.\n\nEach time, DreamGrid can select two integers $l$ and $r$ (these two integers can be different each time) such that\n\n- $1 \\le l \\le r \\le n$, and\n- for all $l \\le i \\le r$, the $i$-th grid either contains BaoBao's pattern, or is empty,\n\nand change the $i$-th grid to an empty grid for all $l \\le i \\le r$.\n\nHow many ways can DreamGrid change all the grids containing BaoBao's pattern to empty grids by performing the above operation exactly $m$ times? As the answer may be large, please print the answer modulo $10^9 + 7$.\n\nLet $\\{(a_1, b_1), (a_2, b_2), \\dots (a_m, b_m)\\}$ be a valid erasing sequence ($1 \\le a_i \\le b_i \\le n$), where $(a_i, b_i)$ indicates that DreamGrid selects integers $a_i$ and $b_i$ in the $i$-th operation. Let $\\{(c_1, d_1), (c_2, d_2), \\dots, (c_m, d_m)\\}$ be another valid erasing sequence ($1 \\le c_i \\le d_i \\le n$), where $(c_i, d_i)$ indicates that DreamGrid selects integers $c_i$ and $d_i$ in the $i$-th operation. These two sequences are considered different, if there exists an integer $k$ ($1 \\le k \\le m$) such that $a_k \\ne c_k$ or $b_k \\ne d_k$.", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ ($1 \\le T \\le 1000$), indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 100$, $1 \\le m \\le 10^9$), indicating the number of grids and the number of times to perform the operation.\n\nThe second line contains $n$ integers $a_i$ ($a_i \\in \\{0, 1, 2\\}$).\n\n- If $a_i = 0$, the $i$-th grid is empty.\n- If $a_i = 1$, the $i$-th grid contains DreamGrid's pattern.\n- If $a_i = 2$, the $i$-th grid contains BaoBao's pattern.\n\nIt's guaranteed that at most 50 test cases have $n > 50$.", "outputFormat": "For each test case, output one line containing the number of ways modulo $10^9 + 7$.", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Repair the Artwork", "background": null, "description": "DreamGrid 有一条纸带，上面有 $n$ 个格子排成一行，他在一些格子上画了一些美丽的图案。不幸的是，他淘气的室友 BaoBao 在他不在家的时候在其他一些格子上画了一些其他图案。现在 DreamGrid 需要在不破坏自己图案的情况下擦除 BaoBao 的图案。\n\n我们将格子从左到右编号为 1 到 $n$。每个格子要么包含 DreamGrid 的图案，要么包含 BaoBao 的图案，要么是空的。\n\n每次，DreamGrid 可以选择两个整数 $l$ 和 $r$（每次选择可以不同），使得\n\n- $1 \\le l \\le r \\le n$，并且\n- 对于所有 $l \\le i \\le r$，第 $i$ 个格子要么包含 BaoBao 的图案，要么是空的，\n\n然后将所有 $l \\le i \\le r$ 的第 $i$ 个格子变为空格子。\n\nDreamGrid 有多少种方法可以通过执行上述操作恰好 $m$ 次将所有包含 BaoBao 图案的格子变为空格子？由于答案可能很大，请输出答案对 $10^9 + 7$ 取模的结果。\n\n设 $\\{(a_1, b_1), (a_2, b_2), \\dots (a_m, b_m)\\}$ 是一个有效的擦除序列（$1 \\le a_i \\le b_i \\le n$），其中 $(a_i, b_i)$ 表示 DreamGrid 在第 $i$ 次操作中选择整数 $a_i$ 和 $b_i$。设 $\\{(c_1, d_1), (c_2, d_2), \\dots, (c_m, d_m)\\}$ 是另一个有效的擦除序列（$1 \\le c_i \\le d_i \\le n$），其中 $(c_i, d_i)$ 表示 DreamGrid 在第 $i$ 次操作中选择整数 $c_i$ 和 $d_i$。如果存在一个整数 $k$（$1 \\le k \\le m$）使得 $a_k \\ne c_k$ 或 $b_k \\ne d_k$，则这两个序列被认为是不同的。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$（$1 \\le T \\le 1000$），表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $m$（$1 \\le n \\le 100$，$1 \\le m \\le 10^9$），表示格子的数量和操作的次数。\n\n第二行包含 $n$ 个整数 $a_i$（$a_i \\in \\{0, 1, 2\\}$）。\n\n- 如果 $a_i = 0$，第 $i$ 个格子是空的。\n- 如果 $a_i = 1$，第 $i$ 个格子包含 DreamGrid 的图案。\n- 如果 $a_i = 2$，第 $i$ 个格子包含 BaoBao 的图案。\n\n保证最多有 50 个测试用例满足 $n > 50$。", "outputFormat": "对于每个测试用例，输出一行，包含对 $10^9 + 7$ 取模的方式数量。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9892", "type": "P", "difficulty": 7, "samples": [["2\n2\n-2 0 2 0\n-3 3 3 3\n0 1\n-3 -2\n3 -2\n2\n-2 0 2 0\n-3 3 -1 3\n0 1\n-3 -2\n3 -2", "13.416407864999\n-1"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["计算几何", "2018", "Special Judge", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Mirror", "background": "", "description": "There is a non-transparent obstacle and a single-sided mirror in an infinite two-dimensional plane. The obstacle can be represented as a triangle and the mirror can be represented as a $\\textbf{directional}$ line segment pointing from $(x_{m,1}, y_{m,1})$ to $(x_{m,2}, y_{m,2})$, with the right side being reflective.\n\nThere are $m$ stones at point $(x_1,y_1)$ and DreamGrid would like to move all the stones to point $(x_2,y_2)$. The following constraints must be satisfied:\n\n- DreamGrid can only carry one stone each time.\n- Once DreamGrid picks up a stone, he can only put it down at point $(x_2,y_2)$.\n- Let $L$ be the path DreamGrid walked, then for each point $p$ on $L$, DreamGrid should see all the stones directly or through the mirror.\n\nNote that:\n\n- If some part of the line vision is inside the obstacle (it's ok that the line vision passes a point or edge of the obstacle), it's considered, that DreamGrid cannot see the stone with this line of vision.\n- If one of the two endpoints of the mirror is on the line of vision, it's considered, that DreamGrid can see the stone both in the mirror and through the mirror.\n- The reflection process is governed by laws of physics --- the angle of incidence is equal to the angle of reflection. The incident ray is in the same half-plane as the reflected ray, relative to the mirror.\n- If the line of vision is parallel to the mirror, reflection doesn't take place, and the mirror isn't regarded as an obstacle.\n- DreamGrid cannot move into the obstacle but can move on the edges or the vertices of the obstacle.\n- DreamGrid cannot move through the mirror but can move on the mirror. Note that if DreamGrid is on the line segment of the mirror other than the two endpoints, he can only see the side he comes from, and cannot see through the mirror.\n\nDreamGrid would like to know the shortest distance to move all stones from $(x_1,y_1)$ to $(x_2, y_2)$.", "inputFormat": "There are multiple test cases. The first line of input is an integer $T$ (about 100), indicates the number of test cases. For each test case:\n\nThe first line contains one integer $m$ ($1 \\le m \\le 10^6$), indicating the number of stones.\n\nThe second line contains four integers $x_1$, $y_1$, $x_2$ and $y_2$, indicating the start point and the target point.\n\nThe third line contains four integers $x_{m,1}$, $y_{m,1}$, $x_{m,2}$ and $y_{m,2}$, indicating the coordinates of the mirror.\n\nEach of the next $3$ lines has two integers $x_i$ and $y_i$, indicating the coordinates of the vertices of the obstacle.\n\nAll the coordinates will not exceed $100$ in absolute value. Both the start point and target point are outside the obstacle and the mirror. The mirror and the obstacle have no points in common.\n\nIt is guaranteed that no three points are collinear.", "outputFormat": "For each test case, output a real number indicating the shortest distance, or output $-1$ if DreamGrid cannot move all the stones under the constraints.\n\nYour answer will be considered correct if and only if the absolute error or relative error of your answer is less than $10^{-6}$.", "hint": "We now welcome our special guest Mashiro, who heartily donates this problem to our problemset, to explain the sample test cases for us using her sketch book.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wsxbrf43.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d2bpz78p.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nfhakntz.png)\n\n$\\textit{(Image from pixiv. ID: 32084305)}$\n\nIn the figures above, we indicate the start point as point $A$ and the target point as point $B$. The mirror is indicated by the line segment pointing from $M1$ to $M2$, with the right side being reflective.\n\nFor the first sample test case, the optimal path is $A \\to C \\to B \\to C \\to A \\to C \\to B$.\n\nFor the second sample test case, as DreamGrid cannot see $A$ from $B$, it's impossible to move all the two stones from $A$ to $B$ while following the constraints in the problem description.\n", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Mirror", "background": "", "description": "There is a non-transparent obstacle and a single-sided mirror in an infinite two-dimensional plane. The obstacle can be represented as a triangle and the mirror can be represented as a $\\textbf{directional}$ line segment pointing from $(x_{m,1}, y_{m,1})$ to $(x_{m,2}, y_{m,2})$, with the right side being reflective.\n\nThere are $m$ stones at point $(x_1,y_1)$ and DreamGrid would like to move all the stones to point $(x_2,y_2)$. The following constraints must be satisfied:\n\n- DreamGrid can only carry one stone each time.\n- Once DreamGrid picks up a stone, he can only put it down at point $(x_2,y_2)$.\n- Let $L$ be the path DreamGrid walked, then for each point $p$ on $L$, DreamGrid should see all the stones directly or through the mirror.\n\nNote that:\n\n- If some part of the line vision is inside the obstacle (it's ok that the line vision passes a point or edge of the obstacle), it's considered, that DreamGrid cannot see the stone with this line of vision.\n- If one of the two endpoints of the mirror is on the line of vision, it's considered, that DreamGrid can see the stone both in the mirror and through the mirror.\n- The reflection process is governed by laws of physics --- the angle of incidence is equal to the angle of reflection. The incident ray is in the same half-plane as the reflected ray, relative to the mirror.\n- If the line of vision is parallel to the mirror, reflection doesn't take place, and the mirror isn't regarded as an obstacle.\n- DreamGrid cannot move into the obstacle but can move on the edges or the vertices of the obstacle.\n- DreamGrid cannot move through the mirror but can move on the mirror. Note that if DreamGrid is on the line segment of the mirror other than the two endpoints, he can only see the side he comes from, and cannot see through the mirror.\n\nDreamGrid would like to know the shortest distance to move all stones from $(x_1,y_1)$ to $(x_2, y_2)$.", "inputFormat": "There are multiple test cases. The first line of input is an integer $T$ (about 100), indicates the number of test cases. For each test case:\n\nThe first line contains one integer $m$ ($1 \\le m \\le 10^6$), indicating the number of stones.\n\nThe second line contains four integers $x_1$, $y_1$, $x_2$ and $y_2$, indicating the start point and the target point.\n\nThe third line contains four integers $x_{m,1}$, $y_{m,1}$, $x_{m,2}$ and $y_{m,2}$, indicating the coordinates of the mirror.\n\nEach of the next $3$ lines has two integers $x_i$ and $y_i$, indicating the coordinates of the vertices of the obstacle.\n\nAll the coordinates will not exceed $100$ in absolute value. Both the start point and target point are outside the obstacle and the mirror. The mirror and the obstacle have no points in common.\n\nIt is guaranteed that no three points are collinear.", "outputFormat": "For each test case, output a real number indicating the shortest distance, or output $-1$ if DreamGrid cannot move all the stones under the constraints.\n\nYour answer will be considered correct if and only if the absolute error or relative error of your answer is less than $10^{-6}$.", "hint": "We now welcome our special guest Mashiro, who heartily donates this problem to our problemset, to explain the sample test cases for us using her sketch book.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wsxbrf43.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d2bpz78p.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nfhakntz.png)\n\n$\\textit{(Image from pixiv. ID: 32084305)}$\n\nIn the figures above, we indicate the start point as point $A$ and the target point as point $B$. The mirror is indicated by the line segment pointing from $M1$ to $M2$, with the right side being reflective.\n\nFor the first sample test case, the optimal path is $A \\to C \\to B \\to C \\to A \\to C \\to B$.\n\nFor the second sample test case, as DreamGrid cannot see $A$ from $B$, it's impossible to move all the two stones from $A$ to $B$ while following the constraints in the problem description.\n", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Mirror", "background": "", "description": "在一个无限二维平面上包含一个不透明障碍物和一个单面镜子。障碍物被表示为一个三角形，而镜子被表示为一个从点 $(x_{m,1}, y_{m,1})$ 指向 $(x_{m,2}, y_{m,2})$ 的有方向的线段，线段的右侧是反射面。\n\n有 $m$ 个石头位于点 $(x_1,y_1)$，DreamGrid 希望将所有石头移动到点 $(x_2,y_2)$。需要满足以下条件：\n\nDreamGrid 每次只能携带一个石头。\n一旦 DreamGrid 拿起一个石头，他只能将其放置在点 $(x_2,y_2)$。\n\n设 $L$ 为 DreamGrid 走过的路径，对于路径上的每一个点 $p$，DreamGrid 必须能直接或通过镜子看到所有的石头。\n\n**注意：**\n\n如果视线的某部分在障碍物内（视线穿过障碍物的点或边界是允许的），则认为 DreamGrid 无法通过这条视线看到石头。\n\n如果镜子的一个端点在视线上，认为 DreamGrid 既可以在镜子中看到石头，也可以透过镜子看到石头。\n\n反射过程遵循物理规律：入射角等于反射角。入射光线和反射光线在镜子的同一侧。\n\n如果视线与镜子平行，则不发生反射，镜子不被视为障碍物。\nDreamGrid 不能移动进入障碍物，但可以在障碍物的边缘或顶点上移动。\n\nDreamGrid 不能穿过镜子移动，但可以在镜子上移动。注意，如果 DreamGrid 在镜子的线段上（不包括两个端点），他只能看到他来的那一侧，并且不能透过镜子看到。\nDreamGrid 想要知道移动所有石头从 $(x_1,y_1)$ 到 $(x_2, y_2)$ 的最短距离。", "inputFormat": "输入包括多个测试用例。第一行是一个整数 $T$（大约 100），表示测试用例的数量。对于每个测试用例：\n\n第一行包含一个整数 $m$（$1 \\le m \\le 10^6$），表示石头的数量。\n\n第二行包含四个整数 $x_1$, $y_1$, $x_2$ 和 $y_2$，表示起始点和目标点。\n\n第三行包含四个整数 $x_{m,1}$, $y_{m,1}$, $x_{m,2}$ 和 $y_{m,2}$，表示镜子的坐标。\n\n接下来的 $3$ 行，每行包含两个整数 $x_i$ 和 $y_i$，表示障碍物顶点的坐标。\n\n所有坐标的绝对值不超过 $100$。起始点和目标点都在障碍物和镜子之外。镜子和障碍物没有公共点。\n\n保证没有三个点是共线的。", "outputFormat": "输出对于每个测试用例，输出一个实数表示最短距离，如果 DreamGrid 无法在约束条件下移动所有石头，则输出 $-1$。\n\n如果你的答案的绝对误差或相对误差小于 $10^{-6}$，则认为你的答案是正确的。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9893", "type": "P", "difficulty": 6, "samples": [["3\n5\n-1 4 2 1 1\n4\n1 3 2 4\n1\n7", "1\n2\n0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000], "memory": [262144, 262144, 262144, 262144, 262144]}, "tags": ["2018", "线段树", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Soldier Game", "background": "", "description": "DreamGrid and BaoBao are playing a game.  There are $n$ soldiers in the game, numbered from $1$ to $n$. The $i$-th soldier has a power value of $a_i$. DreamGrid and BaoBao are going to divide the soldiers into several teams according to the rules below:\n\n- A team must consist of 1 or 2 soldiers.\n- Every soldier must belong to exactly 1 team.\n- If a team consists of two soldiers (let's say they are the $i$-th and the $j$-th soldier), there must be $|i - j| = 1$.\n\nThe power value of a team is defined as the sum of the team members' power values. For the sake of fairness, they want to minimize the difference between the maximum team power value and the minimum team power value after the division. You are asked to find the minimum difference.\n\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^5$), indicating the number of soldiers.\n\nThe second line contains $n$ integers $a_1, a_2, ... , a_n$ ($-10^9 \\le a_i \\le 10^9$), where $a_i$ indicates the power value of the $i$-th soldier.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.\n", "outputFormat": "For each test case output one line containing one integer, indicating the minimum difference between the maximum team power value and the minimum team power value.\n", "hint": "We now explain the first sample test case. All possible divisions are listed below.\n\n| Division | Difference | Division | Difference |\n| :-: | :-: | :-: | :-:|\n|[-1], [4], [2], [1], [1] | 4 - (-1) = 5| [-1, 4], [2], [1], [1] | 3 - 1 = 2 |\n| [-1], [4], [2], [1, 1] | 4 - (-1) = 5 | [-1], [4, 2], [1, 1] | 6 - (-1) = 7 |\n| [-1], [4], [2, 1], [1] | 4 - (-1) = 5 |  [-1, 4], [2], [1, 1] | 3 - 2 = 1 |\n| [-1], [4, 2], [1], [1] | 6 - (-1) = 7 | [-1, 4], [2, 1], [1] | 3 - 1 = 2 |\n\n\nSo the answer is $\\min(5, 5, 5, 7, 2, 7, 1, 2) = 1$.", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Soldier Game", "background": "", "description": "DreamGrid and BaoBao are playing a game.  There are $n$ soldiers in the game, numbered from $1$ to $n$. The $i$-th soldier has a power value of $a_i$. DreamGrid and BaoBao are going to divide the soldiers into several teams according to the rules below:\n\n- A team must consist of 1 or 2 soldiers.\n- Every soldier must belong to exactly 1 team.\n- If a team consists of two soldiers (let's say they are the $i$-th and the $j$-th soldier), there must be $|i - j| = 1$.\n\nThe power value of a team is defined as the sum of the team members' power values. For the sake of fairness, they want to minimize the difference between the maximum team power value and the minimum team power value after the division. You are asked to find the minimum difference.\n\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains an integer $n$ ($1 \\le n \\le 10^5$), indicating the number of soldiers.\n\nThe second line contains $n$ integers $a_1, a_2, ... , a_n$ ($-10^9 \\le a_i \\le 10^9$), where $a_i$ indicates the power value of the $i$-th soldier.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.\n", "outputFormat": "For each test case output one line containing one integer, indicating the minimum difference between the maximum team power value and the minimum team power value.\n", "hint": "We now explain the first sample test case. All possible divisions are listed below.\n\n| Division | Difference | Division | Difference |\n| :-: | :-: | :-: | :-:|\n|[-1], [4], [2], [1], [1] | 4 - (-1) = 5| [-1, 4], [2], [1], [1] | 3 - 1 = 2 |\n| [-1], [4], [2], [1, 1] | 4 - (-1) = 5 | [-1], [4, 2], [1, 1] | 6 - (-1) = 7 |\n| [-1], [4], [2, 1], [1] | 4 - (-1) = 5 |  [-1, 4], [2], [1, 1] | 3 - 2 = 1 |\n| [-1], [4, 2], [1], [1] | 6 - (-1) = 7 | [-1, 4], [2, 1], [1] | 3 - 1 = 2 |\n\n\nSo the answer is $\\min(5, 5, 5, 7, 2, 7, 1, 2) = 1$.", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Soldier Game", "background": "", "description": "DreamGrid 和 BaoBao 正在玩一个游戏。游戏中有 $n$ 名士兵，编号从 $1$ 到 $n$。第 $i$ 个士兵的战斗力为 $a_i$。DreamGrid 和 BaoBao 将根据以下规则把士兵分成若干个队伍：\n\n- 一个队伍必须由 1 或 2 名士兵组成。\n- 每个士兵必须属于且仅属于一个队伍。\n- 如果一个队伍由两名士兵组成（假设他们是第 $i$ 个和第 $j$ 个士兵），则必须满足 $|i - j| = 1$。\n\n一个队伍的战斗力定义为队伍成员的战斗力之和。为了公平起见，他们希望在分组后最大队伍战斗力与最小队伍战斗力之间的差值最小化。你需要找出这个最小的差值。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含一个整数 $n$ ($1 \\le n \\le 10^5$)，表示士兵的数量。\n\n第二行包含 $n$ 个整数 $a_1, a_2, \\ldots, a_n$ ($-10^9 \\le a_i \\le 10^9$)，其中 $a_i$ 表示第 $i$ 个士兵的战斗力。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例输出一行，包含一个整数，表示最大队伍战斗力与最小队伍战斗力之间的最小差值。", "hint": "我们现在解释第一个样例测试用例。所有可能的分组如下所示。\n\n| 分组 | 差值 | 分组 | 差值 |\n| :-: | :-: | :-: | :-:|\n|[-1], [4], [2], [1], [1] | 4 - (-1) = 5| [-1, 4], [2], [1], [1] | 3 - 1 = 2 |\n| [-1], [4], [2], [1, 1] | 4 - (-1) = 5 | [-1], [4, 2], [1, 1] | 6 - (-1) = 7 |\n| [-1], [4], [2, 1], [1] | 4 - (-1) = 5 |  [-1, 4], [2], [1, 1] | 3 - 2 = 1 |\n| [-1], [4, 2], [1], [1] | 6 - (-1) = 7 | [-1, 4], [2, 1], [1] | 3 - 1 = 2 |\n\n所以答案是 $\\min(5, 5, 5, 7, 2, 7, 1, 2) = 1$。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9894", "type": "P", "difficulty": 3, "samples": [["4\n4 2\n1 2 4 8\n4 0\n100 99 98 97\n2 2\n10000 10000\n5 3\n0 0 0 0 1", "6\n96\nRichman\nImpossible"]], "limits": {"time": [1000, 1000, 1000], "memory": [262144, 262144, 262144]}, "tags": ["2018", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Books", "background": "", "description": "DreamGrid went to the bookshop yesterday. There are $n$ books in the bookshop in total. Because DreamGrid is very rich, he bought the books according to the strategy below:\n\n- Check the $n$ books from the 1st one to the $n$-th one **in order**.\n- For each book being checked now, if DreamGrid has enough money (not less than the book price), he'll buy the book and his money will be reduced by the price of the book.\n- In case that his money is less than the price of the book being checked now, he will skip that book.\n\n\nBaoBao is curious about how rich DreamGrid is. You are asked to tell him the maximum possible amount of money DreamGrid took before buying the books, which is a non-negative integer. All he knows are the prices of the $n$ books and the number of books DreamGrid bought in total,  indicated  by $m$. \n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 10^5$, $0 \\le m \\le n$), indicating the number of books in the bookshop and the number of books DreamGrid bought in total.\n\nThe second line contains $n$ non-negative integers $a_1, a_2, ... , a_n$ ($0 \\le a_i \\le 10^9$), where $a_i$ indicates the price of the $i$-th book checked by DreamGrid.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.", "outputFormat": "For each test case output one line.\n\nIf it's impossible to buy $m$ books for any initial number of money, output ``Impossible'' (without quotes).\n\nIf DreamGrid may take an infinite amount of money, output ``Richman'' (without quotes).\n\nIn other cases, output a non-negative integer, indicating the maximum number of money he may take.\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Books", "background": "", "description": "DreamGrid went to the bookshop yesterday. There are $n$ books in the bookshop in total. Because DreamGrid is very rich, he bought the books according to the strategy below:\n\n- Check the $n$ books from the 1st one to the $n$-th one **in order**.\n- For each book being checked now, if DreamGrid has enough money (not less than the book price), he'll buy the book and his money will be reduced by the price of the book.\n- In case that his money is less than the price of the book being checked now, he will skip that book.\n\n\nBaoBao is curious about how rich DreamGrid is. You are asked to tell him the maximum possible amount of money DreamGrid took before buying the books, which is a non-negative integer. All he knows are the prices of the $n$ books and the number of books DreamGrid bought in total,  indicated  by $m$. \n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $m$ ($1 \\le n \\le 10^5$, $0 \\le m \\le n$), indicating the number of books in the bookshop and the number of books DreamGrid bought in total.\n\nThe second line contains $n$ non-negative integers $a_1, a_2, ... , a_n$ ($0 \\le a_i \\le 10^9$), where $a_i$ indicates the price of the $i$-th book checked by DreamGrid.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.", "outputFormat": "For each test case output one line.\n\nIf it's impossible to buy $m$ books for any initial number of money, output ``Impossible'' (without quotes).\n\nIf DreamGrid may take an infinite amount of money, output ``Richman'' (without quotes).\n\nIn other cases, output a non-negative integer, indicating the maximum number of money he may take.\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Books", "background": "", "description": "DreamGrid 昨天去了书店。书店里总共有 $n$ 本书。因为 DreamGrid 非常富有，他按照以下策略购买书籍：\n\n- 按顺序从第 1 本书到第 $n$ 本书检查这 $n$ 本书。\n- 对于当前检查的每本书，如果 DreamGrid 有足够的钱（不少于书的价格），他就会买下这本书，他的钱会减少书的价格。\n- 如果他的钱少于当前检查的书的价格，他将跳过这本书。\n\nBaoBao 对 DreamGrid 的财富感到好奇。你需要告诉他 DreamGrid 在买书前可能带的最大金额，这个金额是一个非负整数。他所知道的只有 $n$ 本书的价格和 DreamGrid 总共买了多少本书，用 $m$ 表示。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $m$ ($1 \\le n \\le 10^5$, $0 \\le m \\le n$)，表示书店中的书的数量和 DreamGrid 总共买的书的数量。\n\n第二行包含 $n$ 个非负整数 $a_1, a_2, \\ldots, a_n$ ($0 \\le a_i \\le 10^9$)，其中 $a_i$ 表示 DreamGrid 检查的第 $i$ 本书的价格。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^6$。", "outputFormat": "对于每个测试用例输出一行。\n\n如果对于任何初始金额都不可能买到 $m$ 本书，输出 “Impossible”（不带引号）。\n\n如果 DreamGrid 可能带无限多的钱，输出 “Richman”（不带引号）。\n\n在其他情况下，输出一个非负整数，表示他可能带的最大金额。", "hint": "题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9895", "type": "P", "difficulty": 6, "samples": [["3\n3 2\n1 2\n2 1\n3 5\n3 3\n2 1\n2 5\n4 3\n2 3\n1 3\n4 3", "1 3\n0 3\n2 2"]], "limits": {"time": [1000, 1000], "memory": [262144, 262144]}, "tags": ["2018", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Airdrop", "background": "", "description": "PUBG is a multiplayer online battle royale video game. In the game, up to one hundred players parachute onto an island and scavenge for weapons and equipment to kill others while avoiding getting killed themselves. Airdrop in this game is a key element, as airdrops often carry with them strong weapons or numerous supplies, helping players to survive.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qv9hzuoe.png)\ntextit{Airdrop in the game(?)\n\nConsider the battle field of the game to be a two-dimensional plane. An airdrop has just landed at point $(x_0, y_0)$ (both $x_0$ and $y_0$ are integers), and all the $n$ players on the battle field, where $(x_i, y_i)$ (both $x_i$ and $y_i$ are integers) indicates the initial position of the $i$-th player, start moving towards the airdrop with the following pattern:\n\n\n- If the position of a living player at the beginning of this time unit is not equal to $(x_0, y_0)$, he will begin his next move.\n- + Let's say he is currently at point $(x, y)$. For his next move, he will consider four points $(x, y - 1)$, $(x, y + 1)$, $(x - 1, y)$ and $(x + 1, y)$.\n- + He will select one of the four points whose Manhattan distance to the airdrop $(x_0, y_0)$ is the smallest to be the destination of his next move. Recall that the Manhattan distance between two points $(x_a, y_a)$ and $(x_b, y_b)$ is defined as $|x_a - x_b| + |y_a - y_b|$.\n- + If two or more points whose Manhattan distance to the airdrop is the same, he will use the following priority rule to break the tie: $(x, y - 1)$ has the highest priority to be selected, $(x, y + 1)$ has the second highest priority, $(x - 1, y)$ has the third highest priority, and $(x + 1, y)$ has the lowest priority.\n- + At the end of this time unit, he arrives at his destination.\n- If the position of a living player at the beginning of this time unit is equal to $(x_0, y_0)$, he will continue to fatten his backpack with the supplies in the airdrop and stays at $(x_0, y_0)$.\n\n\nBut the battle is tough and it's almost impossible for all the players to arrive at the airdrop safely. If two or more players meet at point $(x', y')$ other than $(x_0, y_0)$, where both $x'$ and $y'$ are integers, they will fight and kill each other and none of them survive.\n\nBaoBao is a big fan of the game and is interested in the number of players successfully arriving at the position of the airdrop, but he doesn't know the value of $x_0$. Given the value of $y_0$ and the initial position of each player, please help BaoBao calculate the minimum and maximum possible number of players successfully arriving at the position of the airdrop for all $x_0 \\in \\mathbb{Z}$, where $\\mathbb{Z}$ is the set of all integers (note that $x_0$ can be positive, zero or negative).\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $y_0$ ($1 \\le n \\le 10^5$, $1 \\le y_0 \\le 10^5$), indicating the number of players and the $y$ value of the airdrop.\n\nFor the following $n$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($1 \\le x_i, y_i \\le 10^5$), indicating the initial position of the $i$-th player.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$, and in each test case no two players share the same initial position.\n", "outputFormat": "For each test case output one line containing two integers $p_\\text{min}$ and $p_\\text{max}$ separated by one space. $p_\\text{min}$ indicates the minimum possible number of players successfully arriving at the position of the airdrop, while $p_\\text{max}$ indicates the maximum possible number.\n", "hint": "We now explain the first sample test case.\n\nTo obtain the answer of $p_\\text{min} = 1$, one should consider $x_0 = 3$. The following table shows the position of each player at the end of each time unit when $x_0 = 3$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/itsnfe48.png)\n\nTo obtain the answer of $p_\\text{max} = 3$, one should consider $x_0 = 2$. The following table shows the position of each player at the end of each time unit when $x_0 = 2$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hvseoyfc.png)", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Airdrop", "background": "", "description": "PUBG is a multiplayer online battle royale video game. In the game, up to one hundred players parachute onto an island and scavenge for weapons and equipment to kill others while avoiding getting killed themselves. Airdrop in this game is a key element, as airdrops often carry with them strong weapons or numerous supplies, helping players to survive.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qv9hzuoe.png)\ntextit{Airdrop in the game(?)\n\nConsider the battle field of the game to be a two-dimensional plane. An airdrop has just landed at point $(x_0, y_0)$ (both $x_0$ and $y_0$ are integers), and all the $n$ players on the battle field, where $(x_i, y_i)$ (both $x_i$ and $y_i$ are integers) indicates the initial position of the $i$-th player, start moving towards the airdrop with the following pattern:\n\n\n- If the position of a living player at the beginning of this time unit is not equal to $(x_0, y_0)$, he will begin his next move.\n- + Let's say he is currently at point $(x, y)$. For his next move, he will consider four points $(x, y - 1)$, $(x, y + 1)$, $(x - 1, y)$ and $(x + 1, y)$.\n- + He will select one of the four points whose Manhattan distance to the airdrop $(x_0, y_0)$ is the smallest to be the destination of his next move. Recall that the Manhattan distance between two points $(x_a, y_a)$ and $(x_b, y_b)$ is defined as $|x_a - x_b| + |y_a - y_b|$.\n- + If two or more points whose Manhattan distance to the airdrop is the same, he will use the following priority rule to break the tie: $(x, y - 1)$ has the highest priority to be selected, $(x, y + 1)$ has the second highest priority, $(x - 1, y)$ has the third highest priority, and $(x + 1, y)$ has the lowest priority.\n- + At the end of this time unit, he arrives at his destination.\n- If the position of a living player at the beginning of this time unit is equal to $(x_0, y_0)$, he will continue to fatten his backpack with the supplies in the airdrop and stays at $(x_0, y_0)$.\n\n\nBut the battle is tough and it's almost impossible for all the players to arrive at the airdrop safely. If two or more players meet at point $(x', y')$ other than $(x_0, y_0)$, where both $x'$ and $y'$ are integers, they will fight and kill each other and none of them survive.\n\nBaoBao is a big fan of the game and is interested in the number of players successfully arriving at the position of the airdrop, but he doesn't know the value of $x_0$. Given the value of $y_0$ and the initial position of each player, please help BaoBao calculate the minimum and maximum possible number of players successfully arriving at the position of the airdrop for all $x_0 \\in \\mathbb{Z}$, where $\\mathbb{Z}$ is the set of all integers (note that $x_0$ can be positive, zero or negative).\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:\n\nThe first line contains two integers $n$ and $y_0$ ($1 \\le n \\le 10^5$, $1 \\le y_0 \\le 10^5$), indicating the number of players and the $y$ value of the airdrop.\n\nFor the following $n$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($1 \\le x_i, y_i \\le 10^5$), indicating the initial position of the $i$-th player.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$, and in each test case no two players share the same initial position.\n", "outputFormat": "For each test case output one line containing two integers $p_\\text{min}$ and $p_\\text{max}$ separated by one space. $p_\\text{min}$ indicates the minimum possible number of players successfully arriving at the position of the airdrop, while $p_\\text{max}$ indicates the maximum possible number.\n", "hint": "We now explain the first sample test case.\n\nTo obtain the answer of $p_\\text{min} = 1$, one should consider $x_0 = 3$. The following table shows the position of each player at the end of each time unit when $x_0 = 3$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/itsnfe48.png)\n\nTo obtain the answer of $p_\\text{max} = 3$, one should consider $x_0 = 2$. The following table shows the position of each player at the end of each time unit when $x_0 = 2$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hvseoyfc.png)", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Airdrop", "background": "", "description": "PUBG 是一款多人在线大逃杀视频游戏。在游戏中，最多一百名玩家跳伞到一个岛上，搜寻武器和装备以击杀其他玩家，同时避免自己被击杀。空投是游戏中的一个关键元素，因为空投通常携带强大的武器或大量补给，帮助玩家生存。\n\n考虑游戏的战场是一个二维平面。一个空投刚刚降落在点 $(x_0, y_0)$（$x_0$ 和 $y_0$ 都是整数），战场上的所有 $n$ 名玩家，其中 $(x_i, y_i)$（$x_i$ 和 $y_i$ 都是整数）表示第 $i$ 名玩家的初始位置，开始以以下模式向空投移动：\n\n- 如果一个活着的玩家在这个时间单位开始时的位置不等于 $(x_0, y_0)$，他将开始他的下一步移动。\n- + 假设他当前在点 $(x, y)$。对于他的下一步移动，他将考虑四个点 $(x, y - 1)$、$(x, y + 1)$、$(x - 1, y)$ 和 $(x + 1, y)$。\n- + 他将选择其中一个到空投 $(x_0, y_0)$ 的曼哈顿距离最小的点作为他下一步的目的地。回忆一下，两点 $(x_a, y_a)$ 和 $(x_b, y_b)$ 之间的曼哈顿距离定义为 $|x_a - x_b| + |y_a - y_b|$。\n- + 如果两个或更多点到空投的曼哈顿距离相同，他将使用以下优先级规则来打破平局：$(x, y - 1)$ 优先级最高，$(x, y + 1)$ 优先级第二，$(x - 1, y)$ 优先级第三，$(x + 1, y)$ 优先级最低。\n- + 在这个时间单位结束时，他到达他的目的地。\n- 如果一个活着的玩家在这个时间单位开始时的位置等于 $(x_0, y_0)$，他将继续用空投中的补给填满他的背包，并停留在 $(x_0, y_0)$。\n\n但战斗很激烈，几乎不可能所有玩家都安全到达空投。如果两个或更多玩家在点 $(x', y')$ 相遇，且 $(x', y')$ 不是 $(x_0, y_0)$，他们将互相搏斗并全部阵亡，没有人存活。\n\nBaoBao 是该游戏的忠实粉丝，对成功到达空投位置的玩家数量感兴趣，但他不知道 $x_0$ 的值。给定 $y_0$ 的值和每个玩家的初始位置，请帮助 BaoBao 计算对于所有 $x_0 \\in \\mathbb{Z}$（$\\mathbb{Z}$ 是所有整数的集合，注意 $x_0$ 可以是正数、零或负数），成功到达空投位置的玩家数量的最小值和最大值。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：\n\n第一行包含两个整数 $n$ 和 $y_0$（$1 \\le n \\le 10^5$，$1 \\le y_0 \\le 10^5$），表示玩家的数量和空投的 $y$ 值。\n\n接下来的 $n$ 行中，第 $i$ 行包含两个整数 $x_i$ 和 $y_i$（$1 \\le x_i, y_i \\le 10^5$），表示第 $i$ 名玩家的初始位置。\n\n保证所有测试用例中 $n$ 的总和不超过 $10^6$，并且在每个测试用例中没有两个玩家共享相同的初始位置。", "outputFormat": "对于每个测试用例输出一行，包含两个整数 $p_\\text{min}$ 和 $p_\\text{max}$，用一个空格分隔。$p_\\text{min}$ 表示成功到达空投位置的玩家数量的最小可能值，而 $p_\\text{max}$ 表示最大可能值。", "hint": "我们现在解释第一个样例测试用例。\n\n为了得到 $p_\\text{min} = 1$ 的答案，应该考虑 $x_0 = 3$。下表显示了当 $x_0 = 3$ 时每个玩家在每个时间单位结束时的位置。\n\n为了得到 $p_\\text{max} = 3$ 的答案，应该考虑 $x_0 = 2$。下表显示了当 $x_0 = 2$ 时每个玩家在每个时间单位结束时的位置。\n\n题面翻译由 ChatGPT-4o 提供。", "locale": "zh-CN"}}}
{"pid": "P9896", "type": "P", "difficulty": 6, "samples": [["3\n4 2\n4 3\n5 3", "15\n12\n90"]], "limits": {"time": [2000, 2000], "memory": [524288, 524288]}, "tags": ["图论", "2018", "O2优化", "组合数学", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R]  Sub-cycle Graph", "background": "", "description": "Given an undirected simple graph with $n$ ($n \\ge 3$) vertices and $m$ edges where the vertices are numbered from 1 to $n$, we call it a ``sub-cycle`` graph if it's possible to add a non-negative number of edges to it and turn the graph into exactly one simple cycle of $n$ vertices.\n\nGiven two integers $n$ and $m$, your task is to calculate the number of different sub-cycle graphs with $n$ vertices and $m$ edges. As the answer may be quite large, please output the answer modulo $10^9+7$.\n\nRecall that\n\n- A simple graph is a graph with no self loops or multiple edges;\n- A simple cycle of $n$ ($n \\ge 3$) vertices is a connected undirected simple graph with $n$ vertices and $n$ edges, where the degree of each vertex equals to 2;\n- Two undirected simple graphs with $n$ vertices and $m$ edges are different, if they have different sets of edges;\n- Let $u < v$, we denote $(u, v)$ as an undirected edge connecting vertices $u$ and $v$. Two undirected edges $(u_1, v_1)$ and $(u_2, v_2)$ are different, if $u_1 \\ne u_2$ or $v_1 \\ne v_2$.\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $2 \\times 10^4$), indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $n$ and $m$ ($3 \\le n \\le 10^5$, $0 \\le m \\le \\frac{n(n-1)}{2}$), indicating the number of vertices and the number of edges in the graph.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $3 \\times 10^7$.\n", "outputFormat": "For each test case output one line containing one integer, indicating the number of different sub-cycle graphs with $n$ vertices and $m$ edges modulo $10^9+7$.\n", "hint": "The 12 sub-cycle graphs of the second sample test case are illustrated below.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/636hie1e.png)", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R]  Sub-cycle Graph", "background": "", "description": "Given an undirected simple graph with $n$ ($n \\ge 3$) vertices and $m$ edges where the vertices are numbered from 1 to $n$, we call it a ``sub-cycle`` graph if it's possible to add a non-negative number of edges to it and turn the graph into exactly one simple cycle of $n$ vertices.\n\nGiven two integers $n$ and $m$, your task is to calculate the number of different sub-cycle graphs with $n$ vertices and $m$ edges. As the answer may be quite large, please output the answer modulo $10^9+7$.\n\nRecall that\n\n- A simple graph is a graph with no self loops or multiple edges;\n- A simple cycle of $n$ ($n \\ge 3$) vertices is a connected undirected simple graph with $n$ vertices and $n$ edges, where the degree of each vertex equals to 2;\n- Two undirected simple graphs with $n$ vertices and $m$ edges are different, if they have different sets of edges;\n- Let $u < v$, we denote $(u, v)$ as an undirected edge connecting vertices $u$ and $v$. Two undirected edges $(u_1, v_1)$ and $(u_2, v_2)$ are different, if $u_1 \\ne u_2$ or $v_1 \\ne v_2$.\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $2 \\times 10^4$), indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $n$ and $m$ ($3 \\le n \\le 10^5$, $0 \\le m \\le \\frac{n(n-1)}{2}$), indicating the number of vertices and the number of edges in the graph.\n\nIt's guaranteed that the sum of $n$ in all test cases will not exceed $3 \\times 10^7$.\n", "outputFormat": "For each test case output one line containing one integer, indicating the number of different sub-cycle graphs with $n$ vertices and $m$ edges modulo $10^9+7$.\n", "hint": "The 12 sub-cycle graphs of the second sample test case are illustrated below.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/636hie1e.png)", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R]  Sub-cycle Graph", "background": "", "description": "对于一个有 $n(n\\ge3)$ 个点和 $m$ 条边的无向简单图，其中点的编号为 $1$ 到 $n$。如果加非负整数条边能使这个图是变为 $n$ 个点的简单环，我们称这个是一个 “半环” 图。\n\n给定两个整数 $n$ 和 $m$，你的任务是计算有多少个**不同的** $n$ 个点，$m$ 条边的 “半环” 图。考虑到答案会很大，请将答案模 $10^{9} + 7$ 的结果输出。\n\n定义\n\n- 一个简单图是指一个没有自环和重边的图；\n- $n$ 个点的 “简单环” 是指任意一个有 $n$ 个点和 $n$ 条边的无向简单连通图，其中所有点的度均为 $2$；\n- 如果两个有着 $n$ 个点和 $m$ 条边的无向简单图是不同的，那么它们具有着不同的边集；\n- 现在有两个点 $u$ 和 $v(u < v)$，记 $(u,v)$ 表示连接 $u,v$ 两点的无向边。两条无向边 $(u_1,v_1)$ 和 $(u_2,v_2)$ 如果是不同的，那么 $u_1\\ne u_2$ 或 $v_1\\ne v_2$。", "inputFormat": "此题有多组数据。\n\n第一行有一个整数 $T$（约为 $2\\times 10^{4}$），指测试用例的数量。对于每组数据：\n\n一组数据只有一行，两个整数 $n$ 和 $m$（$3 \\le n \\le 10^{5}$，$0\\le m \\le \\frac{n(n-1)}{2}$），表示图的点数和边数。\n\n$n$ 的总和不超过 $3\\times 10^{7}$。", "outputFormat": "对于每组数据，你只需要输出一行表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9897", "type": "P", "difficulty": 2, "samples": [["6\n123456789 1\n888888888 1\n888888888 2\n888888888 999999999\n98640 12345\n1000000000 0", "5\n18\n2\n0\n0\n1000000000"]], "limits": {"time": [1000, 1000], "memory": [262144, 262144]}, "tags": ["2018", "O2优化", "ICPC", "青岛"], "title": "[ICPC 2018 Qingdao R] Function and Function", "background": "", "description": "If we define $f(0) = 1, f(1) = 0, f(4) = 1, f(8) = 2, f(16) = 1, \\dots$, do you know what function $f$ means?\n\nActually, $f(x)$ calculates the total number of enclosed areas produced by each digit in $x$. The following table shows the number of enclosed areas produced by each digit:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sdv14tzu.png)\n\nFor example, $f(1234) = 0 + 0 + 0 + 1 = 1$, and $f(5678) = 0 + 1 + 0 + 2 = 3$.\n\nWe now define a recursive function $g$ by the following equations: \n\n$$\\begin{cases} g^0(x) = x \\\\ g^k(x) = f(g^{k-1}(x)) & \\text{if } k \\ge 1 \\end{cases}$$\n\nFor example, $g^2(1234) = f(f(1234)) = f(1) = 0$, and $g^2(5678) = f(f(5678)) = f(3) = 0$.\n\nGiven two integers $x$ and $k$, please calculate the value of $g^k(x)$.\n\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $10^5$), indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $x$ and $k$ ($0 \\le x, k \\le 10^9$). Positive integers are given without leading zeros, and zero is given with exactly one `0'.\n", "outputFormat": "For each test case output one line containing one integer, indicating the value of $g^k(x)$.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/fjjr5xin.png)", "locale": "en", "translations": {"en": {"title": "[ICPC 2018 Qingdao R] Function and Function", "background": "", "description": "If we define $f(0) = 1, f(1) = 0, f(4) = 1, f(8) = 2, f(16) = 1, \\dots$, do you know what function $f$ means?\n\nActually, $f(x)$ calculates the total number of enclosed areas produced by each digit in $x$. The following table shows the number of enclosed areas produced by each digit:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sdv14tzu.png)\n\nFor example, $f(1234) = 0 + 0 + 0 + 1 = 1$, and $f(5678) = 0 + 1 + 0 + 2 = 3$.\n\nWe now define a recursive function $g$ by the following equations: \n\n$$\\begin{cases} g^0(x) = x \\\\ g^k(x) = f(g^{k-1}(x)) & \\text{if } k \\ge 1 \\end{cases}$$\n\nFor example, $g^2(1234) = f(f(1234)) = f(1) = 0$, and $g^2(5678) = f(f(5678)) = f(3) = 0$.\n\nGiven two integers $x$ and $k$, please calculate the value of $g^k(x)$.\n\n", "inputFormat": "There are multiple test cases. The first line of the input contains an integer $T$ (about $10^5$), indicating the number of test cases. For each test case:\n\nThe first and only line contains two integers $x$ and $k$ ($0 \\le x, k \\le 10^9$). Positive integers are given without leading zeros, and zero is given with exactly one `0'.\n", "outputFormat": "For each test case output one line containing one integer, indicating the value of $g^k(x)$.", "hint": "![](https://cdn.luogu.com.cn/upload/image_hosting/fjjr5xin.png)", "locale": "en"}, "zh-CN": {"title": "[ICPC 2018 Qingdao R] Function and Function", "background": "", "description": "如果我们定义 $f(0) = 1$，$f(1) = 0$，$f(4) = 1$，$f(8) = 2$，$f(16) = 1$ …… 你知道函数 $f$ 意味着什么吗？\n\n其实，$f(x)$ 计算的是 $x$ 中每个数字所产生的封闭区域的总数。下表显示了每个数字产生的封闭区域数：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sdv14tzu.png)\n\n例如，$f(1234) = 0 + 0 + 0 + 1 = 1$，$f(5678) = 0 + 1 + 0 + 2 = 3$。\n\n现在，我们用以下等式定义递归函数 $g$： \n\n$$\\begin{cases} g^0(x) = x \\\\ g^k(x) = f(g^{k-1}(x)) & \\text{if } k \\ge 1 \\end{cases}$$\n\n例如，$g^2(1234) = f(f(1234)) = f(1) = 0$，$g^2(5678) = f(f(5678)) = f(3) = 0$。\n\n给定两个整数 $x$ 和 $k$，请计算 $g^k(x)$ 的值。", "inputFormat": "有多个测试用例。输入的第一行包含一个整数 $T$（大约 $10 ^ 5$），表示测试用例的数量。\n之后的每行包含两个整数 $x$ 和 $k$（$0 \\le x, k \\le 10^9$）。正整数不带前导零，零则正好是一个 \"0\"。", "outputFormat": "对每个测试用例输出一行，其中包含一个整数，表示 $g^k(x)$ 的值。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9898", "type": "P", "difficulty": 6, "samples": [], "limits": {"time": [5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "交互题", "Special Judge"], "title": "『PG2』猪棋", "background": "交互库绝顶聪明。", "description": "猪棋的规则：\n\n在一个 $1000\\times 1000$ 的棋盘上，两人分别执黑棋白棋轮流执子，每次可以在当前没有子的不同位置将两颗子分别放下（有序），如果一颗子放下时出现有 $(x,y),(x+1,y),(x,y+1),(x+1,y+1)$ 的四个位置棋子颜色均相同则执此颜色者获胜。\n\n你将扮演先手，在 $100$ 步内战胜交互库扮演的后手，保证有解。\n\n对于每轮，你可以选择两个坐标 $(x_1,y_1)$ 与 $(x_2,y_2)$ 落子，你首先需要保证 $1\\leq x_1,y_1,x_2,y_2\\leq 1000$，你其次需要保证没人曾在 $(x_1,y_1)$ 落子，如果此时你获胜了判定结束且你获胜，否则你还需保证没人曾经在 $(x_2,y_2)$ 落子,如果此时你获胜了判定结束且你获胜，否则交互库将返回一组 $x_1,y_1,x_2,y_2$ 表示他在 $(x_1,y_1),(x_2,y_2)$ 落子，保证 $(x_1,y_1)\\neq (x_2,y_2),1\\leq x_1,y_1,x_2,y_2\\leq 1000$，如果此时交互库获胜判定结束且你输了,否则判定棋盘上是否已经有 $400$ 颗子，如果是你获得平局，否则进入你的新一轮。\n", "inputFormat": "你每轮结束后从**标准输入**中输入四个整数，代表评测机返回的结果。", "outputFormat": "每轮开始时，你需要向**标准输出**输出四个 $[1,1000]$ 中的整数，**然后清空缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n\n", "hint": "共 $5$ 个测试点，在测试点中如果你获胜且每步都满足 $6\\leq x,y\\leq 994$ 你将获得 $100$ 分，否则获胜你将获得 $50$ 分，你输了将获得 $0$ 分，平局获得 $30$ 分，总分数取测试点最小值。\n\n本题输入输出参考 $0$ 分程序：\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nint n;\nint x,y,xx,yy;\n\n\nsigned main()\n{\n    int i,j,k;\n    n=100;\n    while(n--)\n    {\n        cout<<rand()%1000+1<<' '<<rand()%1000+1<<endl;\n        cout<<rand()%1000+1<<' '<<rand()%1000+1<<endl;\n        cin>>x>>y>>xx>>yy;\n    }\n    return 0;\n}\n```\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『PG2』猪棋", "background": "交互库绝顶聪明。", "description": "猪棋的规则：\n\n在一个 $1000\\times 1000$ 的棋盘上，两人分别执黑棋白棋轮流执子，每次可以在当前没有子的不同位置将两颗子分别放下（有序），如果一颗子放下时出现有 $(x,y),(x+1,y),(x,y+1),(x+1,y+1)$ 的四个位置棋子颜色均相同则执此颜色者获胜。\n\n你将扮演先手，在 $100$ 步内战胜交互库扮演的后手，保证有解。\n\n对于每轮，你可以选择两个坐标 $(x_1,y_1)$ 与 $(x_2,y_2)$ 落子，你首先需要保证 $1\\leq x_1,y_1,x_2,y_2\\leq 1000$，你其次需要保证没人曾在 $(x_1,y_1)$ 落子，如果此时你获胜了判定结束且你获胜，否则你还需保证没人曾经在 $(x_2,y_2)$ 落子,如果此时你获胜了判定结束且你获胜，否则交互库将返回一组 $x_1,y_1,x_2,y_2$ 表示他在 $(x_1,y_1),(x_2,y_2)$ 落子，保证 $(x_1,y_1)\\neq (x_2,y_2),1\\leq x_1,y_1,x_2,y_2\\leq 1000$，如果此时交互库获胜判定结束且你输了,否则判定棋盘上是否已经有 $400$ 颗子，如果是你获得平局，否则进入你的新一轮。\n", "inputFormat": "你每轮结束后从**标准输入**中输入四个整数，代表评测机返回的结果。", "outputFormat": "每轮开始时，你需要向**标准输出**输出四个 $[1,1000]$ 中的整数，**然后清空缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n\n", "hint": "共 $5$ 个测试点，在测试点中如果你获胜且每步都满足 $6\\leq x,y\\leq 994$ 你将获得 $100$ 分，否则获胜你将获得 $50$ 分，你输了将获得 $0$ 分，平局获得 $30$ 分，总分数取测试点最小值。\n\n本题输入输出参考 $0$ 分程序：\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nint n;\nint x,y,xx,yy;\n\n\nsigned main()\n{\n    int i,j,k;\n    n=100;\n    while(n--)\n    {\n        cout<<rand()%1000+1<<' '<<rand()%1000+1<<endl;\n        cout<<rand()%1000+1<<' '<<rand()%1000+1<<endl;\n        cin>>x>>y>>xx>>yy;\n    }\n    return 0;\n}\n```\n", "locale": "zh-CN"}}}
{"pid": "P9899", "type": "P", "difficulty": 3, "samples": [["3\n0 1 0\n1 0 1", "4"], ["6\n1 0 1 0 0 1\n1 1 0 1 0 1", "5"], ["10\n0 0 1 1 1 1 1 1 0 0 \n0 1 1 0 1 0 0 0 0 1 \n", "5"], ["10\n0 1 0 1 0 1 0 1 0 1\n1 0 1 0 1 0 1 0 1 0", "11"], ["10\n1 0 1 1 1 0 0 1 0 1\n0 0 0 1 0 1 0 1 1 0", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心"], "title": "『PG2』消除萝卜 A", "background": "", "description": "有 $2\\times n$ 的两行萝卜，萝卜分白萝卜和红萝卜，我们使用 $a_{i,j}=0/1$ 来表示第 $j$ 行第 $i$ 个萝卜是白萝卜还是红萝卜。\n\n你每次可以花 $1$ 的代价，选定一个有萝卜的位置，并将这个萝卜所在的由同种颜色萝卜所构成的四连通极大连通块的萝卜全部拿走，然后一个在第二行的萝卜如果其对应的第一行的位置没有萝卜，就会掉落至第一行。\n\n请问拿走所有萝卜的最小代价是多少。", "inputFormat": "第一行包含一个正整数 $n$ 表示每行有多少个萝卜。\n\n第二行有 $n$ 个 $0$ 或 $1$ 的整数,其中第 $i$ 个表示 $a_{i,2}$。\n\n第三行有 $n$ 个 $0$ 或 $1$ 的整数,其中第 $i$ 个表示 $a_{i,1}$。", "outputFormat": "一行一个整数表示你的答案。", "hint": "对于所有测试点 $a_{i,j}\\in \\{0,1\\}$，$1\\leq n\\leq 5\\times 10^6$。\n\n**本题使用捆绑测试**\n\n$\\sf subtask \\ 1: n\\leq1 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 10pts$   \n$\\sf subtask \\ 2: n\\leq10 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 20pts $   \n$\\sf subtask \\ 3: n\\leq100 \\ \\ \\ \\ \\ \\ \\ \\ \\ 15 pts$   \n$\\sf subtask \\ 4: n\\leq5000 \\ \\ \\ \\ \\ \\ \\ 15 pts$   \n$\\sf subtask \\ 5: n\\leq500000 \\ \\ \\ 20pts$   \n$\\sf subtask \\ 6: n\\leq5000000 \\ 20pts$   ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『PG2』消除萝卜 A", "background": "", "description": "有 $2\\times n$ 的两行萝卜，萝卜分白萝卜和红萝卜，我们使用 $a_{i,j}=0/1$ 来表示第 $j$ 行第 $i$ 个萝卜是白萝卜还是红萝卜。\n\n你每次可以花 $1$ 的代价，选定一个有萝卜的位置，并将这个萝卜所在的由同种颜色萝卜所构成的四连通极大连通块的萝卜全部拿走，然后一个在第二行的萝卜如果其对应的第一行的位置没有萝卜，就会掉落至第一行。\n\n请问拿走所有萝卜的最小代价是多少。", "inputFormat": "第一行包含一个正整数 $n$ 表示每行有多少个萝卜。\n\n第二行有 $n$ 个 $0$ 或 $1$ 的整数,其中第 $i$ 个表示 $a_{i,2}$。\n\n第三行有 $n$ 个 $0$ 或 $1$ 的整数,其中第 $i$ 个表示 $a_{i,1}$。", "outputFormat": "一行一个整数表示你的答案。", "hint": "对于所有测试点 $a_{i,j}\\in \\{0,1\\}$，$1\\leq n\\leq 5\\times 10^6$。\n\n**本题使用捆绑测试**\n\n$\\sf subtask \\ 1: n\\leq1 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 10pts$   \n$\\sf subtask \\ 2: n\\leq10 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 20pts $   \n$\\sf subtask \\ 3: n\\leq100 \\ \\ \\ \\ \\ \\ \\ \\ \\ 15 pts$   \n$\\sf subtask \\ 4: n\\leq5000 \\ \\ \\ \\ \\ \\ \\ 15 pts$   \n$\\sf subtask \\ 5: n\\leq500000 \\ \\ \\ 20pts$   \n$\\sf subtask \\ 6: n\\leq5000000 \\ 20pts$   ", "locale": "zh-CN"}}}
{"pid": "P9900", "type": "P", "difficulty": 3, "samples": [["4\n0 1\n0 1\n0 1\n0 1", "2"], ["6\n1 0\n1 0\n0 1\n0 1\n1 0\n1 0", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心"], "title": "『PG2』消除萝卜 B", "background": "", "description": "有 $n\\times 2$ 的两列萝卜，萝卜分白萝卜和红萝卜，我们使用 $a_{i,j}=0/1$ 来表示第 $i$ 行第 $j$ 个萝卜是白萝卜还是红萝卜。\n\n你每次可以花 $1$ 的代价，选定一个有萝卜的位置，并将这个萝卜所在的由同种颜色萝卜所构成的四连通极大连通块的萝卜全部拿走，然后一个在第 $i$ 行的萝卜如果其对应的第 $i-1$ 行的位置没有萝卜，就会掉落至第 $i-1$ 行。\n\n同时你也可以花初始为 $0$ 的代价，选定 $k=1/2$ 而将第 $k$ 列的所有萝卜上移（$a_{i,k}\\to a_{i+1,k}$），并将一个红萝卜即 $1$ 放在第一行第 $k$ 个（$1\\to a_{1,k}$），此后这个操作代价 $+1$。 \n\n请问拿走所有萝卜的最小代价是多少。", "inputFormat": "第一行包含一个正整数 $n$ 表示有多少行萝卜。\n\n接下来 $n$ 行，第 $i$ 行两个整数分别为 $a_{i,1},a_{i,2}$。", "outputFormat": "一行一个整数表示你的答案", "hint": "对于所有测试点 $a_{i,j}\\in \\{0,1\\}$，$1\\leq n\\leq 5\\times 10^6$，保证 $a_{i,1}\\neq a_{i,2}$。\n\n**本题使用捆绑测试**  \n$\\sf subtask \\ 1: n\\leq10 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 30pts $   \n$\\sf subtask \\ 2: n\\leq100 \\ \\ \\ \\ \\ \\ \\ \\ \\ 20 pts$   \n$\\sf subtask \\ 3: n\\leq5000 \\ \\ \\ \\ \\ \\ \\ 20 pts$   \n$\\sf subtask \\ 4: n\\leq5000000 \\ 30pts$   \n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『PG2』消除萝卜 B", "background": "", "description": "有 $n\\times 2$ 的两列萝卜，萝卜分白萝卜和红萝卜，我们使用 $a_{i,j}=0/1$ 来表示第 $i$ 行第 $j$ 个萝卜是白萝卜还是红萝卜。\n\n你每次可以花 $1$ 的代价，选定一个有萝卜的位置，并将这个萝卜所在的由同种颜色萝卜所构成的四连通极大连通块的萝卜全部拿走，然后一个在第 $i$ 行的萝卜如果其对应的第 $i-1$ 行的位置没有萝卜，就会掉落至第 $i-1$ 行。\n\n同时你也可以花初始为 $0$ 的代价，选定 $k=1/2$ 而将第 $k$ 列的所有萝卜上移（$a_{i,k}\\to a_{i+1,k}$），并将一个红萝卜即 $1$ 放在第一行第 $k$ 个（$1\\to a_{1,k}$），此后这个操作代价 $+1$。 \n\n请问拿走所有萝卜的最小代价是多少。", "inputFormat": "第一行包含一个正整数 $n$ 表示有多少行萝卜。\n\n接下来 $n$ 行，第 $i$ 行两个整数分别为 $a_{i,1},a_{i,2}$。", "outputFormat": "一行一个整数表示你的答案", "hint": "对于所有测试点 $a_{i,j}\\in \\{0,1\\}$，$1\\leq n\\leq 5\\times 10^6$，保证 $a_{i,1}\\neq a_{i,2}$。\n\n**本题使用捆绑测试**  \n$\\sf subtask \\ 1: n\\leq10 \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ 30pts $   \n$\\sf subtask \\ 2: n\\leq100 \\ \\ \\ \\ \\ \\ \\ \\ \\ 20 pts$   \n$\\sf subtask \\ 3: n\\leq5000 \\ \\ \\ \\ \\ \\ \\ 20 pts$   \n$\\sf subtask \\ 4: n\\leq5000000 \\ 30pts$   \n\n", "locale": "zh-CN"}}}
{"pid": "P9901", "type": "P", "difficulty": 5, "samples": [["5 7 1 5\n1 2 1\n2 3 1\n3 4 1\n4 5 1\n2 4 1\n1 4 1\n1 5 1", "2"]], "limits": {"time": [550, 550, 550, 550, 550, 550, 550, 550, 550, 550], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "贪心", "网络流", "拓扑排序"], "title": "『PG2』弯曲半平面直线同向图最大流", "background": "", "description": "若能将有向图 $G=(V,E)$ 画在平面上，使得点在一条直线上，任意两条边（可以为弯曲的弧线）仅在重合顶点处相交，且边上的所有点都在直线同侧，且每条边的起点到终点的射线的方向相同，则称 $G$ 是弯曲半平面直线同向图。对于一个弯曲半平面直线同向图给定 $n$ 个点，$m$ 条有向边，给定每条边的容量，求从点 $s$ 到点 $t$ 的最大流。", "inputFormat": "第一行包含四个正整数 $n$、$m$、$s$、$t$，用空格分隔，分别表示点的个数、有向边的个数、源点序号、汇点序号。\n\n接下来 $m$ 行每行包含三个正整数 $u_i$、$v_i$、$c_i$，用空格分隔，表示第 $i$ 条有向边从 $u_i$ 出发，到达 $v_i$，容量为 $c_i$。\n\n", "outputFormat": "一个整数，表示 $s$ 到 $t$ 的最大流。", "hint": "无重边自环。\n\n对于 $30\\%$ 的数据 $n\\leq 10^3$。\n\n对于 $70\\%$ 的数据 $n\\leq 10^5$。\n\n对于 $100\\%$ 的数据 $2\\leq n\\leq 10^6$，$1\\leq m\\leq \\min\\{2\\times 10^9,\\dfrac{n(n-1)}{2}\\}$，$1\\leq c\\leq 10^{12}$，$s\\neq t$。\n\n### 样例解释 1\n![](https://cdn.luogu.com.cn/upload/image_hosting/9qletk0m.png)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『PG2』弯曲半平面直线同向图最大流", "background": "", "description": "若能将有向图 $G=(V,E)$ 画在平面上，使得点在一条直线上，任意两条边（可以为弯曲的弧线）仅在重合顶点处相交，且边上的所有点都在直线同侧，且每条边的起点到终点的射线的方向相同，则称 $G$ 是弯曲半平面直线同向图。对于一个弯曲半平面直线同向图给定 $n$ 个点，$m$ 条有向边，给定每条边的容量，求从点 $s$ 到点 $t$ 的最大流。", "inputFormat": "第一行包含四个正整数 $n$、$m$、$s$、$t$，用空格分隔，分别表示点的个数、有向边的个数、源点序号、汇点序号。\n\n接下来 $m$ 行每行包含三个正整数 $u_i$、$v_i$、$c_i$，用空格分隔，表示第 $i$ 条有向边从 $u_i$ 出发，到达 $v_i$，容量为 $c_i$。\n\n", "outputFormat": "一个整数，表示 $s$ 到 $t$ 的最大流。", "hint": "无重边自环。\n\n对于 $30\\%$ 的数据 $n\\leq 10^3$。\n\n对于 $70\\%$ 的数据 $n\\leq 10^5$。\n\n对于 $100\\%$ 的数据 $2\\leq n\\leq 10^6$，$1\\leq m\\leq \\min\\{2\\times 10^9,\\dfrac{n(n-1)}{2}\\}$，$1\\leq c\\leq 10^{12}$，$s\\neq t$。\n\n### 样例解释 1\n![](https://cdn.luogu.com.cn/upload/image_hosting/9qletk0m.png)", "locale": "zh-CN"}}}
{"pid": "P9902", "type": "P", "difficulty": 6, "samples": [["9 21 3\n1 2 1\n2 3 1\n3 4 1\n4 5 1\n5 6 1\n6 7 1\n7 8 1\n8 9 1\n1 3 1\n2 4 1\n3 5 1\n4 6 1\n5 7 1\n6 8 1\n7 9 1\n1 4 1\n2 5 1\n3 6 1\n4 7 1\n5 8 1\n6 9 1", "3"], ["5 10 2\n3 5 73\n3 4 33\n3 5 84\n4 5 10\n3 4 15\n1 2 83\n1 3 8\n1 3 24\n5 5 15\n1 2 62", "32"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["状压 DP"], "title": "『PG2』模拟最大流", "background": "", "description": "\n给定 $n$ 个点，$m$ 条有向边，给定每条边的容量，保证每条边 $(u,v,w)$ 满足 $v-u\\in[0,k]$，求从点 $1$ 到点 $n$ 的最大流。", "inputFormat": "第一行包含三个正整数 $n$、$m$、$k$，用空格分隔。\n\n接下来$m$行每行包含三个正整数 $u_i$、$v_i$、$w_i$，用空格分隔，表示第 $i$ 条有向边从 $u_i$ 出发，到达 $v_i$，容量为 $w_i$。", "outputFormat": "一个整数，表示 $1$ 到 $n$ 的最大流。", "hint": "对于 $20\\%$ 的数据满足 $n\\leq 10^2$，$m\\leq 10^4$，$k\\leq 2$。\n\n对于 $40\\%$ 的数据满足 $n\\leq 10^4$，$m\\leq 10^6$，$k\\leq 2$。\n\n对于 $60\\%$ 的数据满足 $n\\leq  8\\times 10^4$，$m\\leq 10^6$，$k\\leq 2$。\n\n对于 $80\\%$ 的数据满足 $n\\leq  8\\times 10^4$，$m\\leq 10^6$，$k\\leq 4$。\n\n对于 $100\\%$ 的数据满足 $2\\leq n\\leq 8\\times 10^4$，$1\\leq m\\leq 10^6$，$2\\leq k\\leq 7$，$1\\leq w\\leq100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『PG2』模拟最大流", "background": "", "description": "\n给定 $n$ 个点，$m$ 条有向边，给定每条边的容量，保证每条边 $(u,v,w)$ 满足 $v-u\\in[0,k]$，求从点 $1$ 到点 $n$ 的最大流。", "inputFormat": "第一行包含三个正整数 $n$、$m$、$k$，用空格分隔。\n\n接下来$m$行每行包含三个正整数 $u_i$、$v_i$、$w_i$，用空格分隔，表示第 $i$ 条有向边从 $u_i$ 出发，到达 $v_i$，容量为 $w_i$。", "outputFormat": "一个整数，表示 $1$ 到 $n$ 的最大流。", "hint": "对于 $20\\%$ 的数据满足 $n\\leq 10^2$，$m\\leq 10^4$，$k\\leq 2$。\n\n对于 $40\\%$ 的数据满足 $n\\leq 10^4$，$m\\leq 10^6$，$k\\leq 2$。\n\n对于 $60\\%$ 的数据满足 $n\\leq  8\\times 10^4$，$m\\leq 10^6$，$k\\leq 2$。\n\n对于 $80\\%$ 的数据满足 $n\\leq  8\\times 10^4$，$m\\leq 10^6$，$k\\leq 4$。\n\n对于 $100\\%$ 的数据满足 $2\\leq n\\leq 8\\times 10^4$，$1\\leq m\\leq 10^6$，$2\\leq k\\leq 7$，$1\\leq w\\leq100$。", "locale": "zh-CN"}}}
{"pid": "P9903", "type": "P", "difficulty": 2, "samples": [["+---+---+---+\n|52.|...|.81|\n|.39|58.|...|\n|.8.|.9.|...|\n+---+---+---+\n|24.|...|1.3|\n|1..|43.|86.|\n|.63|..7|.24|\n+---+---+---+\n|...|1.9|35.|\n|..8|.74|6..|\n|31.|86.|7.9|\n+---+---+---+", "OK"], ["+---+---+---+\n|3..|6..|..4|\n|4.9|8.1|..7|\n|..7|.49|6..|\n+---+---+---+\n|946|157|8.2|\n|.2.|3..|745|\n|.7.|28.|...|\n+---+---+---+\n|...|4..|..5|\n|8.5|.6.|.2.|\n|734|..8|5..|\n+---+---+---+", "GRESKA"], ["+---+---+---+\n|5..|98.|67.|\n|6..|...|.31|\n|.2.|613|.4.|\n+---+---+---+\n|.96|8.2|1.7|\n|.28|..5|.9.|\n|7.3|19.|6..|\n+---+---+---+\n|962|.7.|.1.|\n|1.5|...|76.|\n|.7.|5..|9..|\n+---+---+---+", "GRESKA"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #1] Sudoku", "background": null, "description": "数独是一款逻辑推理类游戏，玩家的任务是用数字 $1\\sim9$ 填满一个 $9\\times9$ 的网格，使其满足以下条件：\n\n- 数字 $1\\sim 9$ 在每一行恰好出现一次。\n- 数字 $1\\sim 9$ 在每一列恰好出现一次。\n- 把网格划分成 $9$ 个 $3\\times3$ 的宫，数字 $1\\sim 9$ 在每一宫恰好出现一次。\n\n现在给你一个未完成的数独网格，请你判断当前是否存在错误。**一个网格是存在错误的，当且仅当存在一行或一列或一宫，其中至少一个数字出现了 $2$ 次及以上。**\n\n如图展示了一个数独网格，它不存在错误。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d54z2mz7.png)", "inputFormat": "输入一个 $13\\times 13$ 的字符矩阵，表示数独网格，其中：\n\n- 字符 `-`、`|`、`+` 表示网格框架，表示将网格划分为 $9$ 个 $3\\times 3$ 的宫。\n- 字符 `.` 表示一个未填数字的单元格。\n- 从 $1\\sim9$ 的数字表示所在单元格已经填了这个数字。\n\n具体请见样例。", "outputFormat": "一行一个字符串，如果这个网格存在错误，输出 `GRESKA`，否则输出 `OK`。", "hint": "### 【样例解释#1】\n\n这个网格没有错误，所有输出 `OK`。\n\n### 【样例解释#2】\n\n第 $9$ 列数字 $5$ 出现了 $2$ 次，且右下角的一个宫中数字 $5$ 出现了 $2$ 次。\n\n### 【样例解释#3】\n\n第 $2$ 列数字 $2$ 出现了 $2$ 次，且第 $7$ 列数字 $6$ 出现了 $2$ 次。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，字符矩阵中只包含数字 $1\\sim9$、字符 `-`、`|`、`+`、`.`，且字符 `-`、`|`、`+` 出现的位置与样例一致。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | 如果存在错误，一定可以只检查行的限制找到 | $11$ |\n| $2$ | 如果存在错误，一定可以只检查列的限制找到 | $12$ |\n| $3$ | 如果存在错误，一定可以只检查宫的限制找到 | $13$ |\n| $4$ | 无特殊性质 | $14$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $50$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T1 Sudoku**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #1] Sudoku", "background": null, "description": "数独是一款逻辑推理类游戏，玩家的任务是用数字 $1\\sim9$ 填满一个 $9\\times9$ 的网格，使其满足以下条件：\n\n- 数字 $1\\sim 9$ 在每一行恰好出现一次。\n- 数字 $1\\sim 9$ 在每一列恰好出现一次。\n- 把网格划分成 $9$ 个 $3\\times3$ 的宫，数字 $1\\sim 9$ 在每一宫恰好出现一次。\n\n现在给你一个未完成的数独网格，请你判断当前是否存在错误。**一个网格是存在错误的，当且仅当存在一行或一列或一宫，其中至少一个数字出现了 $2$ 次及以上。**\n\n如图展示了一个数独网格，它不存在错误。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/d54z2mz7.png)", "inputFormat": "输入一个 $13\\times 13$ 的字符矩阵，表示数独网格，其中：\n\n- 字符 `-`、`|`、`+` 表示网格框架，表示将网格划分为 $9$ 个 $3\\times 3$ 的宫。\n- 字符 `.` 表示一个未填数字的单元格。\n- 从 $1\\sim9$ 的数字表示所在单元格已经填了这个数字。\n\n具体请见样例。", "outputFormat": "一行一个字符串，如果这个网格存在错误，输出 `GRESKA`，否则输出 `OK`。", "hint": "### 【样例解释#1】\n\n这个网格没有错误，所有输出 `OK`。\n\n### 【样例解释#2】\n\n第 $9$ 列数字 $5$ 出现了 $2$ 次，且右下角的一个宫中数字 $5$ 出现了 $2$ 次。\n\n### 【样例解释#3】\n\n第 $2$ 列数字 $2$ 出现了 $2$ 次，且第 $7$ 列数字 $6$ 出现了 $2$ 次。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，字符矩阵中只包含数字 $1\\sim9$、字符 `-`、`|`、`+`、`.`，且字符 `-`、`|`、`+` 出现的位置与样例一致。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | 如果存在错误，一定可以只检查行的限制找到 | $11$ |\n| $2$ | 如果存在错误，一定可以只检查列的限制找到 | $12$ |\n| $3$ | 如果存在错误，一定可以只检查宫的限制找到 | $13$ |\n| $4$ | 无特殊性质 | $14$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $50$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T1 Sudoku**_。", "locale": "zh-CN"}}}
{"pid": "P9904", "type": "P", "difficulty": 4, "samples": [["1 8\nCPZNCCP\n4\n1 1 1 8\n1 3 1 5\n1 8 1 4\n1 2 1 3", "4\n2\n3\n1"], ["3 3\nPP\nPP\nPP\nCCC\nCCC\n3\n1 1 3 3\n3 3 2 2\n1 1 1 3", "2\n2\n1"], ["4 4\nCCC\nCPC\nPPP\nCNP\nZZZZ\nPPPP\nCPZC\n4\n3 1 2 3\n1 1 4 4\n2 2 3 3\n1 4 4 1", "1\n2\n1\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #1] Labirint", "background": "Teo 和克罗地亚 EJOI 队伍在一个迷宫里面。", "description": "这个迷宫是一个 $n\\times m$ 的网格，用坐标 $(1,1)$ 表示左上角的单元格，用坐标 $(n,m)$ 表示右下角的单元格。每一对相邻（四连通，即与上、下、左、右相邻）的单元格之间都有一道门，门有四种颜色：蓝、红、绿、橙，分别用字符 `P`、`C`、`Z`、`N` 表示。只能通过门移动到其它单元格。\n\n现在 Teo 给你 $q$ 组询问，每次询问给定 $a,b,c,d$，表示找到一条从 $(a,b)$ 到 $(c,d)$ 的路径，最小化经过的门的颜色数，请你回答最少的颜色数量。", "inputFormat": "第一行两个整数 $n,m$ 表示网格的行数和列数。\n\n接下来一个 $n$ 行 $m-1$ 列的字符矩阵，其中第 $i$ 行第 $j$ 列的字符表示 $(i,j)$ 和 $(i,j+1)$ 之间的门的颜色。\n\n接下来一个 $n-1$ 行 $m$ 列的字符矩阵，其中第 $i$ 行第 $j$ 列的字符表示 $(i,j)$ 和 $(i+1,j)$ 之间的门的颜色。\n\n接下来一行一个整数 $q$，表示询问数量。\n\n接下来 $q$ 行，第 $i$ 行四个整数 $a_i,b_i,c_i,d_i$ 表示询问是 $(a_i,b_i)$ 到 $(c_i,d_i)$ 路径上门的颜色个数的最小值。", "outputFormat": "$q$ 行，每行一个整数表示这组询问的答案。", "hint": "### 【样例说明#3】\n\n如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/292r7hr3.png)\n\n- 第一组询问，只需经过蓝色门；\n- 第二组询问，只需经过蓝色门和绿色门；\n- 第三组询问，只需经过蓝色门；\n- 第四组询问，按图中的路径走，只需经过红色门、蓝色门、绿色门。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n,m,q\\leq100$，$nm>1$，$1\\leq a_i,c_i\\leq n$，$1\\leq b_i,d_i\\leq m$，$(a_i,b_i)\\ne(c_i,d_i)$，字符矩阵只有字符 `P`、`C`、`Z`、`N` 组成。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n=1$ | $11$ |\n| $2$ | 第一个字符矩阵中的字符只包含 `P`,第二个字符矩阵中的字符只包含 `C` | $13$ |\n| $3$ | 所有字符矩阵中的字符只包含 `C` 和 `P` | $24$ |\n| $4$ | 无特殊性质 | $22$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $70$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T2 Labirint**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #1] Labirint", "background": "Teo 和克罗地亚 EJOI 队伍在一个迷宫里面。", "description": "这个迷宫是一个 $n\\times m$ 的网格，用坐标 $(1,1)$ 表示左上角的单元格，用坐标 $(n,m)$ 表示右下角的单元格。每一对相邻（四连通，即与上、下、左、右相邻）的单元格之间都有一道门，门有四种颜色：蓝、红、绿、橙，分别用字符 `P`、`C`、`Z`、`N` 表示。只能通过门移动到其它单元格。\n\n现在 Teo 给你 $q$ 组询问，每次询问给定 $a,b,c,d$，表示找到一条从 $(a,b)$ 到 $(c,d)$ 的路径，最小化经过的门的颜色数，请你回答最少的颜色数量。", "inputFormat": "第一行两个整数 $n,m$ 表示网格的行数和列数。\n\n接下来一个 $n$ 行 $m-1$ 列的字符矩阵，其中第 $i$ 行第 $j$ 列的字符表示 $(i,j)$ 和 $(i,j+1)$ 之间的门的颜色。\n\n接下来一个 $n-1$ 行 $m$ 列的字符矩阵，其中第 $i$ 行第 $j$ 列的字符表示 $(i,j)$ 和 $(i+1,j)$ 之间的门的颜色。\n\n接下来一行一个整数 $q$，表示询问数量。\n\n接下来 $q$ 行，第 $i$ 行四个整数 $a_i,b_i,c_i,d_i$ 表示询问是 $(a_i,b_i)$ 到 $(c_i,d_i)$ 路径上门的颜色个数的最小值。", "outputFormat": "$q$ 行，每行一个整数表示这组询问的答案。", "hint": "### 【样例说明#3】\n\n如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/292r7hr3.png)\n\n- 第一组询问，只需经过蓝色门；\n- 第二组询问，只需经过蓝色门和绿色门；\n- 第三组询问，只需经过蓝色门；\n- 第四组询问，按图中的路径走，只需经过红色门、蓝色门、绿色门。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n,m,q\\leq100$，$nm>1$，$1\\leq a_i,c_i\\leq n$，$1\\leq b_i,d_i\\leq m$，$(a_i,b_i)\\ne(c_i,d_i)$，字符矩阵只有字符 `P`、`C`、`Z`、`N` 组成。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n=1$ | $11$ |\n| $2$ | 第一个字符矩阵中的字符只包含 `P`,第二个字符矩阵中的字符只包含 `C` | $13$ |\n| $3$ | 所有字符矩阵中的字符只包含 `C` 和 `P` | $24$ |\n| $4$ | 无特殊性质 | $22$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $70$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T2 Labirint**_。", "locale": "zh-CN"}}}
{"pid": "P9905", "type": "P", "difficulty": 4, "samples": [["3 3\n1 1 2\n2 3 4\n4 3 2\n3 3", "4"], ["3 3\n1 1 2\n2 3 4\n4 3 2\n2 1", "2 3 4\n4 3 4"], ["5 5\n-1 -3 -4 -2 4\n-8 -7 -9 -10 11\n5 2 -8 -2 1\n13 -3 -2 -6 -9\n11 6 2 7 4\n2 3", "-1 -2 11\n5 2 11\n13 2 1\n13 7 7"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["单调队列", "2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #1] AN2DL", "background": null, "description": "While wandering around Building $21$, you came across a wall completely covered with numbers, arranged in a table of $n$ rows and $m$ columns. Soon you noticed that there was a frame leaning against the wall large to frame $r$ rows and $s$ columns of the table on the wall. And next to the frame you found a pencil and a piece of paper containing an empty table.\n\nYou are sad that the table on the piece of paper is empty, so you decided to play around with the frame to fill it.\n\nYou leaned the frame against the wall so that the number in the $i$-th row and $j$-th column is in the upper left corner, and the borders of the frame are parallel to the edges of the wall. Considering the numbers inside the frame, and since you like large numbers, you have decided to write the largest among them in the $i$-th row and $j$-th column of the table on the piece of paper.\n\nYou repeated the process for every possible position of the frame on the wall (such that the frame is entirely on the wall, and that there are exactly $r \\times s$ numbers inside it), making sure that the edges of the frame are parallel to the edges of the wall.\n\nWhen you were done, the table on the piece of paper was even more beautiful than the one on the wall.What numbers are in the table on the piece of paper?", "inputFormat": "The first line contains two integers $n,m$ representing the height and width of the matrix.\n\nThe next $n$ lines contain $m$ integers each, representing the matrix $A$.\n\nThe last line contains two integers $r,s$.", "outputFormat": "There are $n-r+1$ rows, each row has $m-s+1$ numbers, and the number in the $i$th row and $j$th column represents the maximum value of the $r\\times s$ submatrix element with $(i,j)$ as the upper left corner, that is, $\\max\\limits_{i\\leq x\\leq i+r-1,j\\leq y\\leq j+s-1}A_{x,y}$.", "hint": "[COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) Problem 3. AN2DL", "locale": "en", "translations": {"en": {"title": "[COCI 2023/2024 #1] AN2DL", "background": null, "description": "While wandering around Building $21$, you came across a wall completely covered with numbers, arranged in a table of $n$ rows and $m$ columns. Soon you noticed that there was a frame leaning against the wall large to frame $r$ rows and $s$ columns of the table on the wall. And next to the frame you found a pencil and a piece of paper containing an empty table.\n\nYou are sad that the table on the piece of paper is empty, so you decided to play around with the frame to fill it.\n\nYou leaned the frame against the wall so that the number in the $i$-th row and $j$-th column is in the upper left corner, and the borders of the frame are parallel to the edges of the wall. Considering the numbers inside the frame, and since you like large numbers, you have decided to write the largest among them in the $i$-th row and $j$-th column of the table on the piece of paper.\n\nYou repeated the process for every possible position of the frame on the wall (such that the frame is entirely on the wall, and that there are exactly $r \\times s$ numbers inside it), making sure that the edges of the frame are parallel to the edges of the wall.\n\nWhen you were done, the table on the piece of paper was even more beautiful than the one on the wall.What numbers are in the table on the piece of paper?", "inputFormat": "The first line contains two integers $n,m$ representing the height and width of the matrix.\n\nThe next $n$ lines contain $m$ integers each, representing the matrix $A$.\n\nThe last line contains two integers $r,s$.", "outputFormat": "There are $n-r+1$ rows, each row has $m-s+1$ numbers, and the number in the $i$th row and $j$th column represents the maximum value of the $r\\times s$ submatrix element with $(i,j)$ as the upper left corner, that is, $\\max\\limits_{i\\leq x\\leq i+r-1,j\\leq y\\leq j+s-1}A_{x,y}$.", "hint": "[COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) Problem 3. AN2DL", "locale": "en"}, "zh-CN": {"title": "[COCI 2023/2024 #1] AN2DL", "background": null, "description": "当在 21 号楼下转悠的时候，你遇到了一面完全被数字覆盖的墙，这些数字被排成一个 $n$ 行 $m$ 列的表格。然后你发现了有一个可以框柱 $r$ 行 $s$ 列的框靠在墙边，并且在框的旁边你发现了一支铅笔和一张纸，纸上有一个空白的表格。\n\n你因为纸上的表格是空的而感到难过，所以你决定使用这个框来填充这个表格。\n\n你把框靠在墙上，使第 $i$ 行第 $j$ 列的数字位于左上角，相框的边框与墙的边缘平行。考虑到相框内的数字，而且你喜欢大数，你决定把其中最大的数写在纸上表格的第 $i$ 行第 $j$ 列。\n\n你对框在墙壁上的每一个可能位置（使框完全位于墙壁上，且框内正好有 $r \\times s$ 个数字）重复上述过程，并确保相框边缘与墙壁边缘平行。\n\n在你结束之后，纸上的表格甚至比墙壁还要漂亮。在纸上的表格中的数字是什么呢？", "inputFormat": "第一行包含两个整数 $n$ 和 $m\\ (1\\le n,m\\le 4\\ 000)$，表示墙上表格的行数和列数。\n\n接下来 $n$ 行，每行 $m$ 个整数 $a_{i,j}\\ (|a_{i,j}|\\le 10\\ 000)$，其中 $a_{i,j}$ 表示墙上表格第 $i$ 行第 $j$ 列的数。\n\n最后一行两个整数 $r$ 和 $s\\ (1\\le r\\le n,1\\le s\\le m)$，表示框的大小。", "outputFormat": "输出纸上表格中的所有数字。", "hint": "### 【样例解释#1】\n\n只有一个 $3\\times 3$ 的子矩阵，且是整个矩阵，它的元素最大值是 $4$。\n\n### 【样例解释#2】\n\n矩阵和它的每个 $2\\times 1$ 的子矩阵如下图所示，其中标红的数为最大值：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/89liqsac.png)\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n,m\\leq 4000$，$\\lvert A_{i,j}\\rvert\\leq 10000$，$1\\leq r\\leq n$，$1\\leq s\\leq m$。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n,m\\leq 40$，$r=n$，$s=m$ | $12$ |\n| $2$ | $n,m\\leq 40$ | $17$ |\n| $3$ | $n,m\\leq 1000$ | $25$ |\n| $4$ | 无特殊性质 | $56$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $110$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T3 AN2DL**_。", "locale": "zh-CN"}}}
{"pid": "P9906", "type": "P", "difficulty": 5, "samples": [["4 3", "8"], ["3 5", "14"], ["100 200", "410783331"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #1] Kocke", "background": null, "description": "在 Donald 的十三岁生日上，他的父亲给了他一套乐高积木。在这套积木中，有 $n$ 个大小相同的积木，且第 $i$ 个积木的颜色为 $i$ 。他想要用这些积木搭一面墙。\n\nDonald 将在排成一排的乐高积木的底座上建造他的墙，底座上有 $k$ 个可以放积木的地方。他按以下方式放置积木：\n\n- 首先，他将颜色为 $1$ 的积木放在底座的任意一个位置上。\n- 对于每个颜色从 $2$ 到 $n$ 的积木，他都会选择和前一个积木相邻的位置，在对应位置的顶端放上这个积木。\n\n\n他用一个长度为 $k$ 序列表示这面墙：对于第 $i$ 位，如果个位置没有积木，则是 $0$，否则是这个位置最顶端积木的颜色。\n\n问一共有多少种不同的序列，对 $10^9+7$ 取模。", "inputFormat": "一行两个整数 $n,k$ 表示积木数量和位置数量。", "outputFormat": "一个整数表示问题答案对 $10^9+7$ 取模的结果。", "hint": "### 【样例解释#1】\n\n可能的序列有：$(0, 3, 4), (2, 3, 4), (0, 4, 3), (1, 4, 3), (4, 3, 0), (4, 3, 2), (3, 4, 0), (3, 4, 1)$。\n\n### 【样例解释#2】\n\n其中一种可能的序列是 $(0,3,2,0,0)$，它的操作步骤是：\n\n- 在第 $2$ 个位置顶端摆放编号为 $1$ 的积木。\n- 在第 $3$ 个位置顶端摆放编号为 $2$ 的积木。\n- 在第 $2$ 个位置顶端摆放编号为 $3$ 的积木。\n- 在第 $3$ 个位置顶端摆放编号为 $4$ 的积木。\n- 在第 $2$ 个位置顶端摆放编号为 $5$ 的积木。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$2\\leq n,k\\leq 5000$。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n,k\\leq 18$ | $20$ |\n| $2$ | $n,k\\leq 50$ | $30$ |\n| $3$ | $n,k\\leq 500$ | $30$ |\n| $4$ | 无特殊性质 | $30$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $110$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T4 Kocke**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #1] Kocke", "background": null, "description": "在 Donald 的十三岁生日上，他的父亲给了他一套乐高积木。在这套积木中，有 $n$ 个大小相同的积木，且第 $i$ 个积木的颜色为 $i$ 。他想要用这些积木搭一面墙。\n\nDonald 将在排成一排的乐高积木的底座上建造他的墙，底座上有 $k$ 个可以放积木的地方。他按以下方式放置积木：\n\n- 首先，他将颜色为 $1$ 的积木放在底座的任意一个位置上。\n- 对于每个颜色从 $2$ 到 $n$ 的积木，他都会选择和前一个积木相邻的位置，在对应位置的顶端放上这个积木。\n\n\n他用一个长度为 $k$ 序列表示这面墙：对于第 $i$ 位，如果个位置没有积木，则是 $0$，否则是这个位置最顶端积木的颜色。\n\n问一共有多少种不同的序列，对 $10^9+7$ 取模。", "inputFormat": "一行两个整数 $n,k$ 表示积木数量和位置数量。", "outputFormat": "一个整数表示问题答案对 $10^9+7$ 取模的结果。", "hint": "### 【样例解释#1】\n\n可能的序列有：$(0, 3, 4), (2, 3, 4), (0, 4, 3), (1, 4, 3), (4, 3, 0), (4, 3, 2), (3, 4, 0), (3, 4, 1)$。\n\n### 【样例解释#2】\n\n其中一种可能的序列是 $(0,3,2,0,0)$，它的操作步骤是：\n\n- 在第 $2$ 个位置顶端摆放编号为 $1$ 的积木。\n- 在第 $3$ 个位置顶端摆放编号为 $2$ 的积木。\n- 在第 $2$ 个位置顶端摆放编号为 $3$ 的积木。\n- 在第 $3$ 个位置顶端摆放编号为 $4$ 的积木。\n- 在第 $2$ 个位置顶端摆放编号为 $5$ 的积木。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$2\\leq n,k\\leq 5000$。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n,k\\leq 18$ | $20$ |\n| $2$ | $n,k\\leq 50$ | $30$ |\n| $3$ | $n,k\\leq 500$ | $30$ |\n| $4$ | 无特殊性质 | $30$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $110$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T4 Kocke**_。", "locale": "zh-CN"}}}
{"pid": "P9907", "type": "P", "difficulty": 7, "samples": [["4 5\n1 2\n2 3\n3 4\n4 1\n1 3", "1"], ["6 7\n1 2\n2 4\n2 6\n3 5\n6 1\n4 3\n2 5", "4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2023", "深度优先搜索 DFS", "COCI（克罗地亚）", "线段树合并", "启发式合并"], "title": "[COCI 2023/2024 #1] Mostovi", "background": "滥用本题评测将被封号！", "description": "When Leonhard Euler resolved the famous Königsberg bridge problem,he had no clue he had discovered a whole new area of mathematics -graph theory!\n\nUnfortunately, the Königsberg bridge problem is far too easy for the programmers of this era, so Euler came up with another problem - the Zagreb bridge problem!\n\nThe bridges of Zagreb form a graph with $n$ nodes and $m$ edges where the edges represent the bridges and the nodes represent the riverine islands. The graph is connected, in other words, it’s possible to get from any node to any other by traveling across the edges. Now Euler asked, how many edges are there such that after their removal the graph becomes disconnected?\n\nAgain, Euler didn’t know that this problem is also famous today (those damn Codeforces blogs). So the author of this problem decided to give you an even harder one, how many edges are there such that after the removal of the nodes which it connects, the remaining $n − 2$ nodes become disconnected?\n\n### 题目大意\n\n给定一张 $n$ 个点 $m$ 条边的无向连通图，求有多少条边满足删去这条边两端的两个点之后，剩余的 $n-2$ 个点不连通。", "inputFormat": "一行两个正整数 $n,m$ 分别表示点数和边数。\n\n接下来一行每行两个正整数 $a_i,b_i$ 表示有一条边连接 $a_i,b_i$。", "outputFormat": "一行一个整数表示符合条件的边的数量。", "hint": "### 【样例解释#1】\n\n对于边 $(1,3)$，删去它和对应的点 $1,3$ 之后，包含两个连通块，分别包括节点 $2$ 和 $4$，也就是说，图不连通了。容易验证这是唯一满足条件的边。\n\n### 【样例解释#2】\n\n满足条件的边有：$(1, 2), (2, 4), (2, 6) , (2, 5)$。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，$1\\leq m\\leq3\\times10^5$，$1\\leq a_i,b_i\\leq n$，图中无重边、自环。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n\\leq100$，$m\\leq300$ | $13$ |\n| $2$ | $n\\leq1000$，$m\\leq3000$ | $17$ |\n| $3$ | $n\\leq1000$ | $25$ |\n| $4$ | $m-n\\leq20$ | $12$ |\n| $5$ | 无特殊性质 | $43$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $110$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T5 Mostovi**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #1] Mostovi", "background": "滥用本题评测将被封号！", "description": "When Leonhard Euler resolved the famous Königsberg bridge problem,he had no clue he had discovered a whole new area of mathematics -graph theory!\n\nUnfortunately, the Königsberg bridge problem is far too easy for the programmers of this era, so Euler came up with another problem - the Zagreb bridge problem!\n\nThe bridges of Zagreb form a graph with $n$ nodes and $m$ edges where the edges represent the bridges and the nodes represent the riverine islands. The graph is connected, in other words, it’s possible to get from any node to any other by traveling across the edges. Now Euler asked, how many edges are there such that after their removal the graph becomes disconnected?\n\nAgain, Euler didn’t know that this problem is also famous today (those damn Codeforces blogs). So the author of this problem decided to give you an even harder one, how many edges are there such that after the removal of the nodes which it connects, the remaining $n − 2$ nodes become disconnected?\n\n### 题目大意\n\n给定一张 $n$ 个点 $m$ 条边的无向连通图，求有多少条边满足删去这条边两端的两个点之后，剩余的 $n-2$ 个点不连通。", "inputFormat": "一行两个正整数 $n,m$ 分别表示点数和边数。\n\n接下来一行每行两个正整数 $a_i,b_i$ 表示有一条边连接 $a_i,b_i$。", "outputFormat": "一行一个整数表示符合条件的边的数量。", "hint": "### 【样例解释#1】\n\n对于边 $(1,3)$，删去它和对应的点 $1,3$ 之后，包含两个连通块，分别包括节点 $2$ 和 $4$，也就是说，图不连通了。容易验证这是唯一满足条件的边。\n\n### 【样例解释#2】\n\n满足条件的边有：$(1, 2), (2, 4), (2, 6) , (2, 5)$。\n\n### 【数据范围】\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 10^5$，$1\\leq m\\leq3\\times10^5$，$1\\leq a_i,b_i\\leq n$，图中无重边、自环。\n\n**本题采用捆绑测试。**\n\n| 子任务 | 特殊性质 | 分值 |\n| :----------: | :----------: | :----------: |\n| $1$ | $n\\leq100$，$m\\leq300$ | $13$ |\n| $2$ | $n\\leq1000$，$m\\leq3000$ | $17$ |\n| $3$ | $n\\leq1000$ | $25$ |\n| $4$ | $m-n\\leq20$ | $12$ |\n| $5$ | 无特殊性质 | $43$ |\n\n### 【说明】\n\n本题分值按 COCI 原题设置，满分 $110$。\n\n题目译自 [COCI2023-2024](https://hsin.hr/coci/archive/2023_2024/) [CONTEST #1](https://hsin.hr/coci/archive/2023_2024/contest1_tasks.pdf) _**T5 Mostovi**_。", "locale": "zh-CN"}}}
{"pid": "P9908", "type": "P", "difficulty": 2, "samples": [["5 6\n\\.\\|/.\n---+--\n/./|\\.\n./.|.\\\n/..|..", "1\n"], ["7 7\n\\.|./..\n.\\|/...\n--+--..\n./|\\...\n/.|.\\|/\n....-+-\n..../|\\", "2"], ["7 7\n\\|/|\\|/\n-+-|-+-\n/|\\|/|\\\n---+---\n\\|/|\\|/\n-+-|-+-\n/|\\|/|\\\n", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "2023", "O2优化", "枚举", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #2] Pahuljice", "background": "", "description": "Lana 喜欢画雪花。如下定义一个大小为 $x$ 的雪花：\n\n+ 雪花的中间是一个 $\\texttt{'+'}$。\n+ 在 $\\texttt{'+'}$ 的上方和下方各有 $x$ 个 $\\texttt{'|'}$。\n+ 在 $\\texttt{'+'}$ 的左方和右方各有 $x$ 个 $\\texttt{'-'}$。\n+ 在 $\\texttt{'+'}$ 的左上方和右下方各有 $x$ 个 $\\texttt{'\\textbackslash'}$。\n+ 在 $\\texttt{'+'}$ 的左下方和右上方各有 $x$ 个 $\\texttt{'/'}$。\n\n雪花之间可以重叠。如下是雪花的几个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2s81nyxm.png)\n\n三张图分别含有一个大小为 $1$ 的雪花，重叠的两个大小分别为 $2$ 和 $1$ 的雪花，一个大小为 $1$ 的雪花（作为大小为 $2$ 的雪花不完整）。\n\n给定一个 $n\\times m$ 的字符矩阵，请找出其中最大的雪花的大小。\n ", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行每行一个长为 $m$ 的字符串，给出一个 $n\\times m$ 的矩阵，保证只包含 $\\texttt{'+'},\\texttt{'-'},\\texttt{'|'},\\texttt{'/'},\\texttt{'\\textbackslash'},\\texttt{'.'}$。", "outputFormat": "输出一行一个整数表示最大的雪花大小。若没有则输出 $0$。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$11$|最大的雪花大小是 $1$，或者没有任何雪花|\n|$2$|$11$|矩阵中至多只有一个 $\\texttt{'+'}$|\n|$3$|$28$|无|\n\n对于所有数据，$1\\le n,m\\le 50$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #2] Pahuljice", "background": "", "description": "Lana 喜欢画雪花。如下定义一个大小为 $x$ 的雪花：\n\n+ 雪花的中间是一个 $\\texttt{'+'}$。\n+ 在 $\\texttt{'+'}$ 的上方和下方各有 $x$ 个 $\\texttt{'|'}$。\n+ 在 $\\texttt{'+'}$ 的左方和右方各有 $x$ 个 $\\texttt{'-'}$。\n+ 在 $\\texttt{'+'}$ 的左上方和右下方各有 $x$ 个 $\\texttt{'\\textbackslash'}$。\n+ 在 $\\texttt{'+'}$ 的左下方和右上方各有 $x$ 个 $\\texttt{'/'}$。\n\n雪花之间可以重叠。如下是雪花的几个例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2s81nyxm.png)\n\n三张图分别含有一个大小为 $1$ 的雪花，重叠的两个大小分别为 $2$ 和 $1$ 的雪花，一个大小为 $1$ 的雪花（作为大小为 $2$ 的雪花不完整）。\n\n给定一个 $n\\times m$ 的字符矩阵，请找出其中最大的雪花的大小。\n ", "inputFormat": "第一行两个整数 $n,m$。\n\n接下来 $n$ 行每行一个长为 $m$ 的字符串，给出一个 $n\\times m$ 的矩阵，保证只包含 $\\texttt{'+'},\\texttt{'-'},\\texttt{'|'},\\texttt{'/'},\\texttt{'\\textbackslash'},\\texttt{'.'}$。", "outputFormat": "输出一行一个整数表示最大的雪花大小。若没有则输出 $0$。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$11$|最大的雪花大小是 $1$，或者没有任何雪花|\n|$2$|$11$|矩阵中至多只有一个 $\\texttt{'+'}$|\n|$3$|$28$|无|\n\n对于所有数据，$1\\le n,m\\le 50$。", "locale": "zh-CN"}}}
{"pid": "P9909", "type": "P", "difficulty": 2, "samples": [["2\n1 1 1\n1 1 2\n00\n10\n01\n00", "1"], ["3\n2 3 1\n1 1 1\n000\n010\n000\n111\n111\n111\n111\n111\n111", "3"], ["3\n2 1 1\n3 2 2\n000\n010\n110\n010\n001\n001\n101\n110\n000\n", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "2023", "O2优化", "广度优先搜索 BFS", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #2] Pingvin", "background": "", "description": "给定一个 $n\\times n\\times n$ 的立方体，被分为 $n^3$ 个单位立方体，其中一些单位立方体是障碍不能通行。\n\n给定起点坐标和终点坐标，每一步可以从一个单位立方体移到一个相邻的（有共同面的）非障碍的单位立方体，问从起点到终点最少走多少步。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $3$ 个整数 $x_s,y_s,z_s$ 表示起始位置。\n\n接下来一行 $3$ 个整数 $x_t,y_t,z_t$ 表示终点位置。\n\n接下来给出 $n$ 个 $n\\times n$ 的 $01$ 矩阵，第 $i$ 个立方体的第 $j$ 行第 $k$ 列表示 $(j,k,i)$ 是否是障碍（是 $1$ 表示障碍）。\n\n保证起始和终点位置不是障碍。", "outputFormat": "输出一行一个整数表示最少步数，若无法到达输出 $-1$。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$7$|$n=2$|\n|$2$|$16$|没有障碍|\n|$3$|$22$|所有 $z$ 坐标大于 $1$ 的格子都是障碍|\n|$4$|$25$|无|\n\n对于所有数据，$1\\le n,m\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #2] Pingvin", "background": "", "description": "给定一个 $n\\times n\\times n$ 的立方体，被分为 $n^3$ 个单位立方体，其中一些单位立方体是障碍不能通行。\n\n给定起点坐标和终点坐标，每一步可以从一个单位立方体移到一个相邻的（有共同面的）非障碍的单位立方体，问从起点到终点最少走多少步。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $3$ 个整数 $x_s,y_s,z_s$ 表示起始位置。\n\n接下来一行 $3$ 个整数 $x_t,y_t,z_t$ 表示终点位置。\n\n接下来给出 $n$ 个 $n\\times n$ 的 $01$ 矩阵，第 $i$ 个立方体的第 $j$ 行第 $k$ 列表示 $(j,k,i)$ 是否是障碍（是 $1$ 表示障碍）。\n\n保证起始和终点位置不是障碍。", "outputFormat": "输出一行一个整数表示最少步数，若无法到达输出 $-1$。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$7$|$n=2$|\n|$2$|$16$|没有障碍|\n|$3$|$22$|所有 $z$ 坐标大于 $1$ 的格子都是障碍|\n|$4$|$25$|无|\n\n对于所有数据，$1\\le n,m\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P9910", "type": "P", "difficulty": 6, "samples": [["5 2\n3 4 1 2 5\n3 2", "9 6 4"], ["7 0\n4 5 2 1 6 3 7", "13"], ["3 2\n3 1 2\n1 2\n", "5 2 1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #2] Dizalo", "background": "", "description": "$n$ 个人坐电梯，第 $i$ 个人在第 $a_i$ 层下电梯，$a_{1\\sim n}$ 构成一个排列。\n\n电梯是长条形的，所以 $n$ 个人初始时按编号顺序在电梯里列成一列，电梯会从下往上依次经过第 $1\\sim n$ 层。\n\n当一个人要下电梯时，所有在他前面的人也必须暂时下电梯，然后可以以任意顺序返回电梯。在他后面的人不需要也不会下电梯。\n\n如果每次临时下电梯的人总是以最优策略来决定返回电梯的顺序，请你求出所有人下电梯的总次数最少是多少。\n\n给定 $q$ 次操作，每次给定 $x_i$ 表示移除编号为 $x_i$ 的人，你需要在第一次操作前以及每次操作之后求出答案。", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个数 $a_{1\\sim n}$，保证构成一个 $1\\sim n$ 的排列。\n\n第三行 $q$ 个数 $x_{1\\sim q}$，表示 $q$ 次询问。", "outputFormat": "输出一行 $q+1$ 个数，表示第一次操作前的答案以及每次操作后的答案。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$16$|$n,q\\le 100$|\n|$2$|$19$|$n,q\\le 1000$|\n|$3$|$29$|$q=0$|\n|$4$|$46$|无|\n\n对于所有数据，$0\\le q< n\\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #2] Dizalo", "background": "", "description": "$n$ 个人坐电梯，第 $i$ 个人在第 $a_i$ 层下电梯，$a_{1\\sim n}$ 构成一个排列。\n\n电梯是长条形的，所以 $n$ 个人初始时按编号顺序在电梯里列成一列，电梯会从下往上依次经过第 $1\\sim n$ 层。\n\n当一个人要下电梯时，所有在他前面的人也必须暂时下电梯，然后可以以任意顺序返回电梯。在他后面的人不需要也不会下电梯。\n\n如果每次临时下电梯的人总是以最优策略来决定返回电梯的顺序，请你求出所有人下电梯的总次数最少是多少。\n\n给定 $q$ 次操作，每次给定 $x_i$ 表示移除编号为 $x_i$ 的人，你需要在第一次操作前以及每次操作之后求出答案。", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个数 $a_{1\\sim n}$，保证构成一个 $1\\sim n$ 的排列。\n\n第三行 $q$ 个数 $x_{1\\sim q}$，表示 $q$ 次询问。", "outputFormat": "输出一行 $q+1$ 个数，表示第一次操作前的答案以及每次操作后的答案。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$16$|$n,q\\le 100$|\n|$2$|$19$|$n,q\\le 1000$|\n|$3$|$29$|$q=0$|\n|$4$|$46$|无|\n\n对于所有数据，$0\\le q< n\\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9911", "type": "P", "difficulty": 4, "samples": [["5\n1 1 2 1 1", "1:1"], ["6\n1 2 3 1 2 3", "2:1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "COCI（克罗地亚）"], "title": "[COCI 2023/2024 #2] Kuglice", "background": "", "description": "一个双端队列里面有 $n$ 个球，每个球有一个颜色。A 和 B 玩一个游戏：\n\nA 先手，两个人轮流操作，每次从队列的最左端或者最右端拿出一个球，如果这种颜色的球是第一次被拿出，拿出它的人获得 $1$ 分。所有球都拿完后游戏结束。\n\n假设 A 和 B 都以最优策略操作，请求出最终得分是多少。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $a_{1\\sim n}$ 表示从左到右每个球的颜色。", "outputFormat": "输出一行两个以 `:` 隔开的整数（形如 `a:b`），`a` 表示 A 最终的得分，`b` 表示 B 最终的得分。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$17$|$a_i\\le 2$|\n|$2$|$10$|$n\\le 20$|\n|$3$|$26$|$a_i\\le 20$|\n|$4$|$15$|$n\\le 300$|\n|$5$|$42$|无|\n\n对于所有数据，$1\\le n\\le 3000$，$1\\le a_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #2] Kuglice", "background": "", "description": "一个双端队列里面有 $n$ 个球，每个球有一个颜色。A 和 B 玩一个游戏：\n\nA 先手，两个人轮流操作，每次从队列的最左端或者最右端拿出一个球，如果这种颜色的球是第一次被拿出，拿出它的人获得 $1$ 分。所有球都拿完后游戏结束。\n\n假设 A 和 B 都以最优策略操作，请求出最终得分是多少。", "inputFormat": "第一行一个整数 $n$。\n\n第二行 $n$ 个整数 $a_{1\\sim n}$ 表示从左到右每个球的颜色。", "outputFormat": "输出一行两个以 `:` 隔开的整数（形如 `a:b`），`a` 表示 A 最终的得分，`b` 表示 B 最终的得分。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$17$|$a_i\\le 2$|\n|$2$|$10$|$n\\le 20$|\n|$3$|$26$|$a_i\\le 20$|\n|$4$|$15$|$n\\le 300$|\n|$5$|$42$|无|\n\n对于所有数据，$1\\le n\\le 3000$，$1\\le a_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9912", "type": "P", "difficulty": 4, "samples": [["6 3\n2 4 2 3 4 1\n2 5 2\n3 5 3\n3 4 4", "2\n1\n0"], ["10 3\n5 0 3 4 2 0 1 6 3 5\n3 9 1\n1 10 3\n1 10 2", "2\n4\n3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2023", "O2优化", "分块", "COCI（克罗地亚）", "离线处理"], "title": "[COCI 2023/2024 #2] Zatopljenje", "background": "", "description": "Mr. Malnar 有一张地形图，上面画着一个区域内每个位置的海拔高度。具体的，有 $n$ 个位置排成一排，第 $i$ 个位置高出海平面 $h_i$ 米。\n\n海平面可能会上升。给定 $q$ 次询问，对于第 $i$ 次询问你需回答：如果海平面高度上升 $x_i$ 米，那么 $[l_i,r_i]$ 区间中会形成多少个岛？一个岛的定义为一个极长的，每个位置的高度都大于 $x_i$ 的段。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mffg52xn.png)\n\n上图分别表示了样例 1 的第一组询问以及样例 2 的第二组询问。左图 $[2,5]$ 区间中有 $[2,2],[4,5]$ 两个岛，而右图中有 $[1,1],[4,4],[8,8],[10,10]$ 四个岛。", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个整数 $h_{1\\sim n}$ 表示每个位置的初始海拔。\n\n接下来 $q$ 行每行 $3$ 个整数 $l_i,r_i,x_i$ 表示一次询问。", "outputFormat": "输出 $q$ 行，第 $i$ 行一个整数表示第 $i$ 次询问的答案。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$10$|$n,q\\le 2000$|\n|$2$|$20$|$l_i=1,r_i=n$|\n|$3$|$20$|存在 $p\\in [1,n]$ 满足 $h_1\\ge h_2\\ge \\cdots \\ge h_p\\le h_{p+1}\\le \\cdots \\le h_n$|\n|$4$|$60$|无|\n\n对于所有数据，$1\\le n,q\\le 2\\times 10^5$，$0\\le h_i,x_i\\le 10^9$，$1\\le l_i\\le r_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2023/2024 #2] Zatopljenje", "background": "", "description": "Mr. Malnar 有一张地形图，上面画着一个区域内每个位置的海拔高度。具体的，有 $n$ 个位置排成一排，第 $i$ 个位置高出海平面 $h_i$ 米。\n\n海平面可能会上升。给定 $q$ 次询问，对于第 $i$ 次询问你需回答：如果海平面高度上升 $x_i$ 米，那么 $[l_i,r_i]$ 区间中会形成多少个岛？一个岛的定义为一个极长的，每个位置的高度都大于 $x_i$ 的段。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mffg52xn.png)\n\n上图分别表示了样例 1 的第一组询问以及样例 2 的第二组询问。左图 $[2,5]$ 区间中有 $[2,2],[4,5]$ 两个岛，而右图中有 $[1,1],[4,4],[8,8],[10,10]$ 四个岛。", "inputFormat": "第一行两个整数 $n,q$。\n\n第二行 $n$ 个整数 $h_{1\\sim n}$ 表示每个位置的初始海拔。\n\n接下来 $q$ 行每行 $3$ 个整数 $l_i,r_i,x_i$ 表示一次询问。", "outputFormat": "输出 $q$ 行，第 $i$ 行一个整数表示第 $i$ 次询问的答案。", "hint": "### 数据范围\n|$\\text{Subtask}$|分值|特殊性质|\n|:-:|:-:|:-:|\n|$1$|$10$|$n,q\\le 2000$|\n|$2$|$20$|$l_i=1,r_i=n$|\n|$3$|$20$|存在 $p\\in [1,n]$ 满足 $h_1\\ge h_2\\ge \\cdots \\ge h_p\\le h_{p+1}\\le \\cdots \\le h_n$|\n|$4$|$60$|无|\n\n对于所有数据，$1\\le n,q\\le 2\\times 10^5$，$0\\le h_i,x_i\\le 10^9$，$1\\le l_i\\le r_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9913", "type": "P", "difficulty": 3, "samples": [["3\n4\n3\n256", "Yes\nNo\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「RiOI-03」water problem", "background": "", "description": "给定一个正整数 $n$，问一个正方形能否被分割为 $n$ 个小正方形（**不要求大小相等**），输出 `Yes` 或 `No`。多组数据。\n\n分割的不严格定义可以理解为切一刀。但是切出的这一刀必须是线段，且其端点必须在正方形的边界上或先前切出的线段上。", "inputFormat": "第一行一个正整数 $T$。\n\n对于每组数据，一行一个正整数 $n$。", "outputFormat": "对于每组数据，分别一行一个字符串，`Yes` 或 `No` 表示方案的存在与否。", "hint": "### 样例解释 1\n\n显然，正方形无法分割为 $3$ 个小正方形；\\\n由于 $4 = 2^2$，$256 = 16^2$，则它们均能被分割成若干个全等的小正方形。\n\n### 数据规模与约定\n\n+ Subtask 0（10 pts）：$n$ 是偶数。\n+ Subtask 1（35 pts）：$n \\leq 8$。\n+ Subtask 2（55 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^5$，$1 \\leq n \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」water problem", "background": "", "description": "给定一个正整数 $n$，问一个正方形能否被分割为 $n$ 个小正方形（**不要求大小相等**），输出 `Yes` 或 `No`。多组数据。\n\n分割的不严格定义可以理解为切一刀。但是切出的这一刀必须是线段，且其端点必须在正方形的边界上或先前切出的线段上。", "inputFormat": "第一行一个正整数 $T$。\n\n对于每组数据，一行一个正整数 $n$。", "outputFormat": "对于每组数据，分别一行一个字符串，`Yes` 或 `No` 表示方案的存在与否。", "hint": "### 样例解释 1\n\n显然，正方形无法分割为 $3$ 个小正方形；\\\n由于 $4 = 2^2$，$256 = 16^2$，则它们均能被分割成若干个全等的小正方形。\n\n### 数据规模与约定\n\n+ Subtask 0（10 pts）：$n$ 是偶数。\n+ Subtask 1（35 pts）：$n \\leq 8$。\n+ Subtask 2（55 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^5$，$1 \\leq n \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9914", "type": "P", "difficulty": 3, "samples": [["3 3\n1 2 3\n3 2 1", "1"], ["3 3\n2 5 1\n83 101 98", "0"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛", "双指针 two-pointer", "哈希表"], "title": "「RiOI-03」匀速相遇", "background": "当大家都在加速时，我与你，在人生中的十字路口，匀速地相遇了。\n\n确是惊动我心的一瞥，却是无法逗留的遗憾，我们再次，朝着自己的方向匀速奔跑。下次再见，又会是什么时候呢……", "description": "平面直角坐标系上有 $n + m$ 个点，其中：\n\n- 有 $n$ 个 $\\rm A$ 类点，它们在初始时依次位于位置 $(1, 0), (2, 0), (3, 0), \\dots, (n, 0)$。\n- 有 $m$ 个 $\\rm B$ 类点，它们在初始时依次位于位置 $(0, 1), (0, 2), (0, 3), \\dots, (0, m)$。\n\n在某一个时刻，$\\rm A, B$ 类点同时开始运动。具体地：\n\n- 对于第 $i$ 个 $\\rm A$ 类点，其以 $a_i$ 个单位长度每秒的速度向上（即 $y$ 轴正方向）匀速运动。特别地，若 $a_i = 0$，则该点始终保持静止。\n- 对于第 $i$ 个 $\\rm B$ 类点，其以 $b_i$ 个单位长度每秒的速度向右（即 $x$ 轴正方向）匀速运动。特别地，若 $b_i = 0$，则该点始终保持静止。\n\n相遇与分离实在是再平凡不过的了。作为匆匆时光里的一名过客，在这个你暂留的驿站里，你能否帮小 T 解决这个简单的问题：求出有多少点对会在某个时刻相遇，即它们在某一刻共点。\n\n由于你无法使时间静止，所以所有点无论相遇与否，都会永无止境地运动下去。祝愿在这道路上奔跑的你，能有一天与理想匀速相遇，永不停息。", "inputFormat": "第一行两个正整数 $n, m$。\n\n第二行 $n$ 个整数 $a_1\\dots a_n$，依次表示第 $1\\dots n$ 个 $\\rm A$ 类点的运动速度。\n\n第三行 $m$ 个整数 $b_1\\dots b_m$，依次表示第 $1\\dots m$ 个 $\\rm B$ 类点的运动速度。", "outputFormat": "一行一个整数，表示有多少点对会在某个时刻相遇。", "hint": "### 样例解释 1\n\n当 $t = 1$ 时，第 $2$ 个 $\\rm A$ 类点和第 $2$ 个 $\\rm B$ 类点同时到达点 $(2, 2)$。这也是在本组样例中的唯一一次相遇，故输出 $1$。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n+ Subtask 0（10 pts）：$n \\leq 10$，$m \\leq 10$。\n+ Subtask 1（20 pts）：$n \\leq 5\\times 10^3$，$m \\leq 5\\times 10^3$。\n+ Subtask 2（30 pts）：保证 $\\forall a_i \\geq 1$，$\\forall b_i \\geq 1$。\n+ Subtask 3（40 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq n, m \\leq 10^6$，$0 \\leq a_i, b_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」匀速相遇", "background": "当大家都在加速时，我与你，在人生中的十字路口，匀速地相遇了。\n\n确是惊动我心的一瞥，却是无法逗留的遗憾，我们再次，朝着自己的方向匀速奔跑。下次再见，又会是什么时候呢……", "description": "平面直角坐标系上有 $n + m$ 个点，其中：\n\n- 有 $n$ 个 $\\rm A$ 类点，它们在初始时依次位于位置 $(1, 0), (2, 0), (3, 0), \\dots, (n, 0)$。\n- 有 $m$ 个 $\\rm B$ 类点，它们在初始时依次位于位置 $(0, 1), (0, 2), (0, 3), \\dots, (0, m)$。\n\n在某一个时刻，$\\rm A, B$ 类点同时开始运动。具体地：\n\n- 对于第 $i$ 个 $\\rm A$ 类点，其以 $a_i$ 个单位长度每秒的速度向上（即 $y$ 轴正方向）匀速运动。特别地，若 $a_i = 0$，则该点始终保持静止。\n- 对于第 $i$ 个 $\\rm B$ 类点，其以 $b_i$ 个单位长度每秒的速度向右（即 $x$ 轴正方向）匀速运动。特别地，若 $b_i = 0$，则该点始终保持静止。\n\n相遇与分离实在是再平凡不过的了。作为匆匆时光里的一名过客，在这个你暂留的驿站里，你能否帮小 T 解决这个简单的问题：求出有多少点对会在某个时刻相遇，即它们在某一刻共点。\n\n由于你无法使时间静止，所以所有点无论相遇与否，都会永无止境地运动下去。祝愿在这道路上奔跑的你，能有一天与理想匀速相遇，永不停息。", "inputFormat": "第一行两个正整数 $n, m$。\n\n第二行 $n$ 个整数 $a_1\\dots a_n$，依次表示第 $1\\dots n$ 个 $\\rm A$ 类点的运动速度。\n\n第三行 $m$ 个整数 $b_1\\dots b_m$，依次表示第 $1\\dots m$ 个 $\\rm B$ 类点的运动速度。", "outputFormat": "一行一个整数，表示有多少点对会在某个时刻相遇。", "hint": "### 样例解释 1\n\n当 $t = 1$ 时，第 $2$ 个 $\\rm A$ 类点和第 $2$ 个 $\\rm B$ 类点同时到达点 $(2, 2)$。这也是在本组样例中的唯一一次相遇，故输出 $1$。\n\n### 数据规模与约定\n\n**本题开启捆绑测试。**\n\n+ Subtask 0（10 pts）：$n \\leq 10$，$m \\leq 10$。\n+ Subtask 1（20 pts）：$n \\leq 5\\times 10^3$，$m \\leq 5\\times 10^3$。\n+ Subtask 2（30 pts）：保证 $\\forall a_i \\geq 1$，$\\forall b_i \\geq 1$。\n+ Subtask 3（40 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq n, m \\leq 10^6$，$0 \\leq a_i, b_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9915", "type": "P", "difficulty": 4, "samples": [["2 2\n1 1\n2 0", "3\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "O2优化", "位运算", "洛谷月赛", "Ad-hoc"], "title": "「RiOI-03」3-2", "background": "> Heart beat to death[.](https://www.luogu.com.cn/problem/P9304)", "description": "给定一个正整数 $n$。将 $[0,2^n)$ 中每个整数的二进制最低 $n$ 位**从低到高**依次写在一个 $2^n\\times n$ 的矩阵上。**矩阵两维的下标都从 $0$ 开始。** 如，当 $n=3$ 时，矩阵是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5f6v9pru.png?x-oss-process=image/resize,m_lfit,h_200,w_265)\n\n给定 $q$ 次询问，每次询问这个矩阵下标为 $(x,y)$ 的格子所在的四连通块大小对 $998244353$ 取模的值。\n", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来 $q$ 行，每行两个非负整数 $x,y$，表示一次询问。", "outputFormat": "输出 $q$ 行，每行一个正整数，表示每次询问答案对 $998244353$ 取模的值。", "hint": "#### 【样例 #1 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4mglp4cn.png?x-oss-process=image/resize,m_lfit,h_200)\n\n图为 $n=2$ 时的矩阵，其中同一个颜色的为一个四连通块。\n\n***\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n| $\\text{SubTask}$ | 分值 | $n\\le$ | $q\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $5$ | $15$ | $15$ |\n| $1$ | $20$ | $15$ | $5\\times 10^5$ |\n| $2$ | $25$ | $5\\times 10^3$ | $5\\times 10^3$ |\n| $3$ | $50$ | $10^{18}$ | $5\\times 10^5$ |\n\n对于 $100\\%$ 的数据，$0\\le y\\lt n\\le 10^{18}$，$0\\le x\\lt \\min(2^n, 10^{18})$，$1\\le q\\le 5\\times 10^5$。\n\n**请选用较快的输入输出方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」3-2", "background": "> Heart beat to death[.](https://www.luogu.com.cn/problem/P9304)", "description": "给定一个正整数 $n$。将 $[0,2^n)$ 中每个整数的二进制最低 $n$ 位**从低到高**依次写在一个 $2^n\\times n$ 的矩阵上。**矩阵两维的下标都从 $0$ 开始。** 如，当 $n=3$ 时，矩阵是这样的：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5f6v9pru.png?x-oss-process=image/resize,m_lfit,h_200,w_265)\n\n给定 $q$ 次询问，每次询问这个矩阵下标为 $(x,y)$ 的格子所在的四连通块大小对 $998244353$ 取模的值。\n", "inputFormat": "第一行两个正整数 $n,q$。\n\n接下来 $q$ 行，每行两个非负整数 $x,y$，表示一次询问。", "outputFormat": "输出 $q$ 行，每行一个正整数，表示每次询问答案对 $998244353$ 取模的值。", "hint": "#### 【样例 #1 解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4mglp4cn.png?x-oss-process=image/resize,m_lfit,h_200)\n\n图为 $n=2$ 时的矩阵，其中同一个颜色的为一个四连通块。\n\n***\n\n#### 【数据范围】\n\n**本题开启捆绑测试。**\n\n| $\\text{SubTask}$ | 分值 | $n\\le$ | $q\\le$ |\n| :----------: | :----------: | :----------: | :----------: |\n| $0$ | $5$ | $15$ | $15$ |\n| $1$ | $20$ | $15$ | $5\\times 10^5$ |\n| $2$ | $25$ | $5\\times 10^3$ | $5\\times 10^3$ |\n| $3$ | $50$ | $10^{18}$ | $5\\times 10^5$ |\n\n对于 $100\\%$ 的数据，$0\\le y\\lt n\\le 10^{18}$，$0\\le x\\lt \\min(2^n, 10^{18})$，$1\\le q\\le 5\\times 10^5$。\n\n**请选用较快的输入输出方式。**", "locale": "zh-CN"}}}
{"pid": "P9916", "type": "P", "difficulty": 6, "samples": [["1\n6 6 6\n\n-\n\n-\n\n-\n\n+\n\n0\n\n\n", "\n\n? 1 1\n\n? 5 1 2 3 4 5\n\n? 3 2 4 6\n\n? 1 4\n\n? 3 1 5 6\n\n! 1"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「RiOI-03」Just a Q. (Easy ver.)", "background": "「Yes, I am Q.」\n\n面前的小 R 莞尔一笑。\n\n+ 保证本题的任何合理的部分分或正解的 std + spj 均可以在当前数据下，$400$ ms 的时间限制、$32$ MB 的空间限制内正确运行并获得 AC 状态。\n+ 本题不添加仅为无意义地卡满 spj 运行时间的 hack 数据。\n\n**请注意，本题只有约束范围与困难版不同，且两个版本的约束范围并不完全重叠。**", "description": "**这是一道交互题。**\n\n小 R 有一个变量 $Q$。$Q$ 初始为 $0$。\n\n小 R 有 $n$ 个隐藏的整数 $q_1 \\dots q_n$，满足 $1 \\leq \\lvert q_i \\rvert \\leq V$，且有且仅有一个 $i$ 满足 $q_i \\lt 0$，而面前的你，需要得出这个满足 $q_i \\lt 0$ 的下标 $i$。\n\n小 R 承诺不会让你以仅仅 $\\frac{1}{n}$ 的几率盲猜，所以她可以允许你进行最多 $k$ 次询问。每次询问，你可以向小 R 给出**可重**正整数集合 $S$ 满足 $0 \\leq \\lvert S \\rvert \\leq S_{\\max}$ 且 $\\forall i \\in S, i \\leq n$，她会计算 $M = \\prod\\limits_{i\\in S}q_i$，然后让 $Q \\leftarrow Q + M$。特殊地，若 $S$ 为空集，则 $M = 1$。\n\n一次询问后，小 R 会向你给出此时的 $\\text{sgn}(Q)$（为 `+`，`-` 或 `0`），表示 $Q$ 的符号。具体地，若 $Q \\gt 0$，小 R 返回 `+`；若 $Q \\lt 0$，小 R 返回 `-`；否则返回 `0`。\n\n请你在不超过 $k$ 次询问后，找到那个满足 $q_i \\lt 0$ 的下标 $i$。\n\n**保证对于所有数据，满足 $q_i \\lt 0$ 的下标 $i$ 是在 $[1, n]$ 内均匀随机选取的。请注意报告下标属于一次询问。**", "inputFormat": "### 交互格式\n\n第一行，输入三个正整数 $n, k, S_{\\max}$。\n\n在此之后，你应当进行若干次询问。\n\n对于你的每组询问，输出 $?\\ m\\ s_1\\ s_2 \\dots s_m$，表示给出一个**可重**正整数集合 $S$，其大小为 $m$，你需要保证 $0 \\leq m \\leq S_{\\max}$。此外，同时应有 $1 \\leq s_i \\leq n$，描述这个集合里的元素编号。\n\n如果你已经得到答案，请输出 $!\\ i$，满足 $1 \\leq i \\leq n$，代表你得到 $q_i \\lt 0$，在这之后你应当立即退出本轮交互。\n\n每次你输出之后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n每次询问并刷新缓冲区后，你将从标准输入中输入一个字符，字符为 `+`，`-` 或 `0`，表示当前 $Q$ 的符号 $\\text{sgn}(Q)$。\n\n### 输入格式\n\n本题有多组数据。\n\n第一行，一个整数 $T$ 表示数据组数。\n\n对于每一组数据，请按照 **【交互格式】** 进行交互。当你报告下标后：\n\n+ 如果你给出的下标正确：\n\t+ 如果这是最后一组数据，交互库退出并返回 Accepted；\n\t+ 如果这不是最后一组数据，你应当接着读入 $n, k, S_{\\max}$ 以进行下一组数据的交互。\n+ 否则，下标错误，交互库会立刻终止，返回 Unaccepted。", "outputFormat": "见 **【输入格式】**。", "hint": "### 样例解释 1\n\n$q = \\{-1, 1, 4, 5, 1, 4\\}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（5 pts）：$q_i \\neq 1$ 且 $q_i \\neq -1$。\n+ Subtask 1（10 pts）：$q_i \\neq -1$，$k = 2n$。\n+ Subtask 2（10 pts）：$q_i \\neq 1$，$k = 2n$。\n+ Subtask 3（9 pts）：$n = 13$，$k = 5000$。\n+ Subtask 4（11 pts）：$n = 13$，$k = 2500$。\n+ Subtask 5（20 pts）：$k = 2n$。\n+ Subtask 6（35 pts）：无特殊限制。\n\n对于每组数据，$1 \\leq n \\leq 200$，$1 \\leq V \\leq 10^6$，$n \\leq k \\leq 5\\times 10^3$，$S_{\\max} = n$。\n\n对于每个测试点，$1 \\leq T \\leq 500$，$\\sum n^2 \\leq 2\\times 10^5$，$\\sum k \\leq 2\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」Just a Q. (Easy ver.)", "background": "「Yes, I am Q.」\n\n面前的小 R 莞尔一笑。\n\n+ 保证本题的任何合理的部分分或正解的 std + spj 均可以在当前数据下，$400$ ms 的时间限制、$32$ MB 的空间限制内正确运行并获得 AC 状态。\n+ 本题不添加仅为无意义地卡满 spj 运行时间的 hack 数据。\n\n**请注意，本题只有约束范围与困难版不同，且两个版本的约束范围并不完全重叠。**", "description": "**这是一道交互题。**\n\n小 R 有一个变量 $Q$。$Q$ 初始为 $0$。\n\n小 R 有 $n$ 个隐藏的整数 $q_1 \\dots q_n$，满足 $1 \\leq \\lvert q_i \\rvert \\leq V$，且有且仅有一个 $i$ 满足 $q_i \\lt 0$，而面前的你，需要得出这个满足 $q_i \\lt 0$ 的下标 $i$。\n\n小 R 承诺不会让你以仅仅 $\\frac{1}{n}$ 的几率盲猜，所以她可以允许你进行最多 $k$ 次询问。每次询问，你可以向小 R 给出**可重**正整数集合 $S$ 满足 $0 \\leq \\lvert S \\rvert \\leq S_{\\max}$ 且 $\\forall i \\in S, i \\leq n$，她会计算 $M = \\prod\\limits_{i\\in S}q_i$，然后让 $Q \\leftarrow Q + M$。特殊地，若 $S$ 为空集，则 $M = 1$。\n\n一次询问后，小 R 会向你给出此时的 $\\text{sgn}(Q)$（为 `+`，`-` 或 `0`），表示 $Q$ 的符号。具体地，若 $Q \\gt 0$，小 R 返回 `+`；若 $Q \\lt 0$，小 R 返回 `-`；否则返回 `0`。\n\n请你在不超过 $k$ 次询问后，找到那个满足 $q_i \\lt 0$ 的下标 $i$。\n\n**保证对于所有数据，满足 $q_i \\lt 0$ 的下标 $i$ 是在 $[1, n]$ 内均匀随机选取的。请注意报告下标属于一次询问。**", "inputFormat": "### 交互格式\n\n第一行，输入三个正整数 $n, k, S_{\\max}$。\n\n在此之后，你应当进行若干次询问。\n\n对于你的每组询问，输出 $?\\ m\\ s_1\\ s_2 \\dots s_m$，表示给出一个**可重**正整数集合 $S$，其大小为 $m$，你需要保证 $0 \\leq m \\leq S_{\\max}$。此外，同时应有 $1 \\leq s_i \\leq n$，描述这个集合里的元素编号。\n\n如果你已经得到答案，请输出 $!\\ i$，满足 $1 \\leq i \\leq n$，代表你得到 $q_i \\lt 0$，在这之后你应当立即退出本轮交互。\n\n每次你输出之后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n每次询问并刷新缓冲区后，你将从标准输入中输入一个字符，字符为 `+`，`-` 或 `0`，表示当前 $Q$ 的符号 $\\text{sgn}(Q)$。\n\n### 输入格式\n\n本题有多组数据。\n\n第一行，一个整数 $T$ 表示数据组数。\n\n对于每一组数据，请按照 **【交互格式】** 进行交互。当你报告下标后：\n\n+ 如果你给出的下标正确：\n\t+ 如果这是最后一组数据，交互库退出并返回 Accepted；\n\t+ 如果这不是最后一组数据，你应当接着读入 $n, k, S_{\\max}$ 以进行下一组数据的交互。\n+ 否则，下标错误，交互库会立刻终止，返回 Unaccepted。", "outputFormat": "见 **【输入格式】**。", "hint": "### 样例解释 1\n\n$q = \\{-1, 1, 4, 5, 1, 4\\}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（5 pts）：$q_i \\neq 1$ 且 $q_i \\neq -1$。\n+ Subtask 1（10 pts）：$q_i \\neq -1$，$k = 2n$。\n+ Subtask 2（10 pts）：$q_i \\neq 1$，$k = 2n$。\n+ Subtask 3（9 pts）：$n = 13$，$k = 5000$。\n+ Subtask 4（11 pts）：$n = 13$，$k = 2500$。\n+ Subtask 5（20 pts）：$k = 2n$。\n+ Subtask 6（35 pts）：无特殊限制。\n\n对于每组数据，$1 \\leq n \\leq 200$，$1 \\leq V \\leq 10^6$，$n \\leq k \\leq 5\\times 10^3$，$S_{\\max} = n$。\n\n对于每个测试点，$1 \\leq T \\leq 500$，$\\sum n^2 \\leq 2\\times 10^5$，$\\sum k \\leq 2\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9917", "type": "P", "difficulty": 6, "samples": [["5\n0 0 3\n0 1 2\n0 1 4\n1 0 2\n1 1 4", "28\n32\n36\n36\n32\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["树状数组", "洛谷原创", "O2优化", "洛谷月赛", "分类讨论"], "title": "「RiOI-03」网格", "background": "2022 年某次集训讲课，课件中出现了一道以 MLE 真名首字母严格顺序作为输入变量的题目。MLE 就想在自己的题目里用 [vectorwyx](https://www.luogu.com.cn/user/238408) 的首字母当输入变量，于是就有了这道题。\n\n可惜如今 [vectorwyx](https://www.luogu.com.cn/user/238408) 已经退役了，人生有梦，各自精彩。\n", "description": "**请仔细阅读本题数据范围。**\n\n给定一个 $n\\times n$ 的正方形网格，一共有 $n$ 行，$n$ 列，初始时所有网格均为红色。有 $n$ 组询问，每次询问会把一整行或一整列的颜色全部染成红色或白色，每次询问后输出所有红色网格的周长，而且询问之间不独立。", "inputFormat": "第一行为一个正整数 $n$；\n\n接下来的 $n$ 行，每行三个正整数 $w,y,x$。$w$ 表示颜色，$w=1$ 表示染成红色，$w=0$ 表示染成白色。$y$ 表示行或列，$y=1$ 表示把第 $x$ 行全部染色，$y=0$ 表示把第 $x$ 列全部染色。", "outputFormat": "一共有 $n$ 行，每行一个整数，表示每次修改后的红色部分周长。", "hint": "### 样例解释\n\n[样例图片解释](https://www.luogu.com.cn/paste/rvrhouei)\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$3\\leq n \\leq 10^6 $，$1<x<n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|} \\hline\n\\textbf{\\textsf{\\#}}  & \\bm{{n\\le}} & \\textbf{\\textsf{特殊性质}} & \\textbf{\\textsf{\\#}}  & \\bm{{n\\le}} & \\textbf{\\textsf{特殊性质}}\\cr\\hline\n1  & 5 & - & \n11  & 10^5 & - \\cr\\hline\n2  & 100 & - & \n12  & 10^5 & - \\cr\\hline\n3  & 100 & - & \n13  & 10^5 & - \\cr\\hline\n4  & 2000 & \\textbf{A} & \n14  & 10^5 & - \\cr\\hline\n5  & 2000 & \\textbf{B} & \n15  & 10^6 & - \\cr\\hline\n6  & 2000 & - & \n16  & 10^6 & - \\cr\\hline\n7  & 10^5 & \\textbf{AB} & \n17  & 10^6 & - \\cr\\hline\n8  & 10^5 & \\textbf{B} & \n18  & 10^6 & - \\cr\\hline\n9  & 10^5 & \\textbf{A} & \n19  & 10^6 & - \\cr\\hline\n10  & 10^5 & - & \n20  & 10^6 & - \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：保证 $w=0$。\n- 特殊性质 $\\bf B$：保证 $y=0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」网格", "background": "2022 年某次集训讲课，课件中出现了一道以 MLE 真名首字母严格顺序作为输入变量的题目。MLE 就想在自己的题目里用 [vectorwyx](https://www.luogu.com.cn/user/238408) 的首字母当输入变量，于是就有了这道题。\n\n可惜如今 [vectorwyx](https://www.luogu.com.cn/user/238408) 已经退役了，人生有梦，各自精彩。\n", "description": "**请仔细阅读本题数据范围。**\n\n给定一个 $n\\times n$ 的正方形网格，一共有 $n$ 行，$n$ 列，初始时所有网格均为红色。有 $n$ 组询问，每次询问会把一整行或一整列的颜色全部染成红色或白色，每次询问后输出所有红色网格的周长，而且询问之间不独立。", "inputFormat": "第一行为一个正整数 $n$；\n\n接下来的 $n$ 行，每行三个正整数 $w,y,x$。$w$ 表示颜色，$w=1$ 表示染成红色，$w=0$ 表示染成白色。$y$ 表示行或列，$y=1$ 表示把第 $x$ 行全部染色，$y=0$ 表示把第 $x$ 列全部染色。", "outputFormat": "一共有 $n$ 行，每行一个整数，表示每次修改后的红色部分周长。", "hint": "### 样例解释\n\n[样例图片解释](https://www.luogu.com.cn/paste/rvrhouei)\n\n### 数据范围\n\n对于 $100\\%$ 的数据，$3\\leq n \\leq 10^6 $，$1<x<n$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|} \\hline\n\\textbf{\\textsf{\\#}}  & \\bm{{n\\le}} & \\textbf{\\textsf{特殊性质}} & \\textbf{\\textsf{\\#}}  & \\bm{{n\\le}} & \\textbf{\\textsf{特殊性质}}\\cr\\hline\n1  & 5 & - & \n11  & 10^5 & - \\cr\\hline\n2  & 100 & - & \n12  & 10^5 & - \\cr\\hline\n3  & 100 & - & \n13  & 10^5 & - \\cr\\hline\n4  & 2000 & \\textbf{A} & \n14  & 10^5 & - \\cr\\hline\n5  & 2000 & \\textbf{B} & \n15  & 10^6 & - \\cr\\hline\n6  & 2000 & - & \n16  & 10^6 & - \\cr\\hline\n7  & 10^5 & \\textbf{AB} & \n17  & 10^6 & - \\cr\\hline\n8  & 10^5 & \\textbf{B} & \n18  & 10^6 & - \\cr\\hline\n9  & 10^5 & \\textbf{A} & \n19  & 10^6 & - \\cr\\hline\n10  & 10^5 & - & \n20  & 10^6 & - \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：保证 $w=0$。\n- 特殊性质 $\\bf B$：保证 $y=0$。", "locale": "zh-CN"}}}
{"pid": "P9918", "type": "P", "difficulty": 6, "samples": [["1\n6 6 6\n\n-\n\n-\n\n-\n\n+\n\n0\n\n\n", "\n\n? 1 1\n\n? 5 1 2 3 4 5\n\n? 3 2 4 6\n\n? 1 4\n\n? 3 1 5 6\n\n! 1"]], "limits": {"time": [1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800, 1800], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「RiOI-03」Just a Q. (Hard ver.)", "background": "「Yes, I am Q.」\n\n面前的小 R 莞尔一笑。\n\n+ 保证本题的任何合理的部分分或正解的 std + spj 均可以在当前数据下，$900$ ms 的时间限制、$32$ MB 的空间限制内正确运行并获得 AC 状态。\n+ 本题不添加仅为无意义地卡满 spj 运行时间的 hack 数据。\n\n**请注意，本题只有约束范围与普通版不同，且两个版本的约束范围并不完全重叠。**", "description": "**这是一道交互题。**\n\n小 R 有一个变量 $Q$。$Q$ 初始为 $0$。\n\n小 R 有 $n$ 个隐藏的整数 $q_1 \\dots q_n$，满足 $1 \\leq \\lvert q_i \\rvert \\leq V$，且有且仅有一个 $i$ 满足 $q_i \\lt 0$，而面前的你，需要得出这个满足 $q_i \\lt 0$ 的下标 $i$。\n\n小 R 承诺不会让你以仅仅 $\\frac{1}{n}$ 的几率盲猜，所以她可以允许你进行最多 $k$ 次询问。每次询问，你可以向小 R 给出**可重**正整数集合 $S$ 满足 $0 \\leq \\lvert S \\rvert \\leq S_{\\max}$ 且 $\\forall i \\in S, i \\leq n$，她会计算 $M = \\prod\\limits_{i\\in S}q_i$，然后让 $Q \\leftarrow Q + M$。特殊地，若 $S$ 为空集，则 $M = 1$。\n\n一次询问后，小 R 会向你给出此时的 $\\text{sgn}(Q)$（为 `+`，`-` 或 `0`），表示 $Q$ 的符号。具体地，若 $Q \\gt 0$，小 R 返回 `+`；若 $Q \\lt 0$，小 R 返回 `-`；否则返回 `0`。\n\n请你在不超过 $k$ 次询问后，找到那个满足 $q_i \\lt 0$ 的下标 $i$。\n\n**保证对于所有数据，满足 $q_i \\lt 0$ 的下标 $i$ 是在 $[1, n]$ 内均匀随机选取的。请注意报告下标属于一次询问。**", "inputFormat": "### 交互格式\n\n第一行，输入三个正整数 $n, k, S_{\\max}$。\n\n在此之后，你应当进行若干次询问。\n\n对于你的每组询问，输出 $?\\ m\\ s_1\\ s_2 \\dots s_m$，表示给出一个**可重**正整数集合 $S$，其大小为 $m$，你需要保证 $0 \\leq m \\leq S_{\\max}$。此外，同时应有 $1 \\leq s_i \\leq n$，描述这个集合里的元素编号。\n\n如果你已经得到答案，请输出 $!\\ i$，满足 $1 \\leq i \\leq n$，代表你得到 $q_i \\lt 0$，在这之后你应当立即退出本轮交互。\n\n每次你输出之后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n每次询问并刷新缓冲区后，你将从标准输入中输入一个字符，字符为 `+`，`-` 或 `0`，表示当前 $Q$ 的符号 $\\text{sgn}(Q)$。\n\n### 输入格式\n\n本题有多组数据。\n\n第一行，一个整数 $T$ 表示数据组数。\n\n对于每一组数据，请按照 **【交互格式】** 进行交互。当你报告下标后：\n\n+ 如果你给出的下标正确：\n\t+ 如果这是最后一组数据，交互库退出并返回 Accepted；\n\t+ 如果这不是最后一组数据，你应当接着读入 $n, k, S_{\\max}$ 以进行下一组数据的交互。\n+ 否则，下标错误，交互库会立刻终止，返回 Unaccepted。", "outputFormat": "见 **【输入格式】**。", "hint": "### 样例解释 1\n\n$q = \\{-1, 1, 4, 5, 1, 4\\}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\leq$ | $T \\leq$ | $k = $ | $S_{\\max} = $ | 分值 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $0$ | $200$ | $500$ | $20$ | $20n + 1$ | $11$ |\n| $1$ | $1000$ | $50$ | $41$ | $8n + 10$ | $25$ |\n| $2$ | $1000$ | $50$ | $50$ | $6n + 10$ | $30$ |\n| $3$ | $10^4$ | $10$ | $39$ | $\\lceil 1.5n\\rceil + 10$ | $34$ |\n\n对于子任务 $0, 1, 3$，若通过所有测试点则获得全部分数，否则获得 $0$ 分。\n\n对于子任务 $2$：\n\n+ 你需要保证你所使用的实际操作次数 $k'$ 满足 $0 \\leq k' \\leq 50$。\n+ 你需要保证你所使用的实际操作次数 $S'$ 满足 $0 \\leq S' \\leq 6n + 10$。\n+ 单个测试点的得分为 $\\left(1 - \\max(\\frac{\\max k' - 35}{20}, \\max(\\frac{S' - 3n - 10}{4n + 1}), 0)\\right)\\times 30$。\n+ Subtask 的得分取所有测试点的得分最小值。\n\n对于所有数据，$1 \\leq V \\leq 10^6$，$1 \\leq n \\leq 10^4$，$1 \\leq T \\leq 500$，**注意由于交互库限制 $\\bm{n, T}$ 不会同时取到最大值**；此外，对每个子任务 $k, S_{\\max}$ 的值已经给出。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」Just a Q. (Hard ver.)", "background": "「Yes, I am Q.」\n\n面前的小 R 莞尔一笑。\n\n+ 保证本题的任何合理的部分分或正解的 std + spj 均可以在当前数据下，$900$ ms 的时间限制、$32$ MB 的空间限制内正确运行并获得 AC 状态。\n+ 本题不添加仅为无意义地卡满 spj 运行时间的 hack 数据。\n\n**请注意，本题只有约束范围与普通版不同，且两个版本的约束范围并不完全重叠。**", "description": "**这是一道交互题。**\n\n小 R 有一个变量 $Q$。$Q$ 初始为 $0$。\n\n小 R 有 $n$ 个隐藏的整数 $q_1 \\dots q_n$，满足 $1 \\leq \\lvert q_i \\rvert \\leq V$，且有且仅有一个 $i$ 满足 $q_i \\lt 0$，而面前的你，需要得出这个满足 $q_i \\lt 0$ 的下标 $i$。\n\n小 R 承诺不会让你以仅仅 $\\frac{1}{n}$ 的几率盲猜，所以她可以允许你进行最多 $k$ 次询问。每次询问，你可以向小 R 给出**可重**正整数集合 $S$ 满足 $0 \\leq \\lvert S \\rvert \\leq S_{\\max}$ 且 $\\forall i \\in S, i \\leq n$，她会计算 $M = \\prod\\limits_{i\\in S}q_i$，然后让 $Q \\leftarrow Q + M$。特殊地，若 $S$ 为空集，则 $M = 1$。\n\n一次询问后，小 R 会向你给出此时的 $\\text{sgn}(Q)$（为 `+`，`-` 或 `0`），表示 $Q$ 的符号。具体地，若 $Q \\gt 0$，小 R 返回 `+`；若 $Q \\lt 0$，小 R 返回 `-`；否则返回 `0`。\n\n请你在不超过 $k$ 次询问后，找到那个满足 $q_i \\lt 0$ 的下标 $i$。\n\n**保证对于所有数据，满足 $q_i \\lt 0$ 的下标 $i$ 是在 $[1, n]$ 内均匀随机选取的。请注意报告下标属于一次询问。**", "inputFormat": "### 交互格式\n\n第一行，输入三个正整数 $n, k, S_{\\max}$。\n\n在此之后，你应当进行若干次询问。\n\n对于你的每组询问，输出 $?\\ m\\ s_1\\ s_2 \\dots s_m$，表示给出一个**可重**正整数集合 $S$，其大小为 $m$，你需要保证 $0 \\leq m \\leq S_{\\max}$。此外，同时应有 $1 \\leq s_i \\leq n$，描述这个集合里的元素编号。\n\n如果你已经得到答案，请输出 $!\\ i$，满足 $1 \\leq i \\leq n$，代表你得到 $q_i \\lt 0$，在这之后你应当立即退出本轮交互。\n\n每次你输出之后，请**刷新缓冲区**。\n\n你可以使用如下语句来清空缓冲区：\n\n- 对于 C/C++：`fflush(stdout)`；\n- 对于 C++：`std::cout << std::flush`；\n- 对于 Java：`System.out.flush()`；\n- 对于 Python：`stdout.flush()`；\n- 对于 Pascal：`flush(output)`；\n- 对于其他语言，请自行查阅对应语言的帮助文档。\n\n特别的，对于 C++ 语言，在输出换行时如果你使用 `std::endl` 而不是 `'\\n'`，也可以自动刷新缓冲区。\n\n每次询问并刷新缓冲区后，你将从标准输入中输入一个字符，字符为 `+`，`-` 或 `0`，表示当前 $Q$ 的符号 $\\text{sgn}(Q)$。\n\n### 输入格式\n\n本题有多组数据。\n\n第一行，一个整数 $T$ 表示数据组数。\n\n对于每一组数据，请按照 **【交互格式】** 进行交互。当你报告下标后：\n\n+ 如果你给出的下标正确：\n\t+ 如果这是最后一组数据，交互库退出并返回 Accepted；\n\t+ 如果这不是最后一组数据，你应当接着读入 $n, k, S_{\\max}$ 以进行下一组数据的交互。\n+ 否则，下标错误，交互库会立刻终止，返回 Unaccepted。", "outputFormat": "见 **【输入格式】**。", "hint": "### 样例解释 1\n\n$q = \\{-1, 1, 4, 5, 1, 4\\}$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | $n \\leq$ | $T \\leq$ | $k = $ | $S_{\\max} = $ | 分值 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| $0$ | $200$ | $500$ | $20$ | $20n + 1$ | $11$ |\n| $1$ | $1000$ | $50$ | $41$ | $8n + 10$ | $25$ |\n| $2$ | $1000$ | $50$ | $50$ | $6n + 10$ | $30$ |\n| $3$ | $10^4$ | $10$ | $39$ | $\\lceil 1.5n\\rceil + 10$ | $34$ |\n\n对于子任务 $0, 1, 3$，若通过所有测试点则获得全部分数，否则获得 $0$ 分。\n\n对于子任务 $2$：\n\n+ 你需要保证你所使用的实际操作次数 $k'$ 满足 $0 \\leq k' \\leq 50$。\n+ 你需要保证你所使用的实际操作次数 $S'$ 满足 $0 \\leq S' \\leq 6n + 10$。\n+ 单个测试点的得分为 $\\left(1 - \\max(\\frac{\\max k' - 35}{20}, \\max(\\frac{S' - 3n - 10}{4n + 1}), 0)\\right)\\times 30$。\n+ Subtask 的得分取所有测试点的得分最小值。\n\n对于所有数据，$1 \\leq V \\leq 10^6$，$1 \\leq n \\leq 10^4$，$1 \\leq T \\leq 500$，**注意由于交互库限制 $\\bm{n, T}$ 不会同时取到最大值**；此外，对每个子任务 $k, S_{\\max}$ 的值已经给出。", "locale": "zh-CN"}}}
{"pid": "P9919", "type": "P", "difficulty": 7, "samples": [["2 1\n1 1 1", "15"], ["3 2\n1 1 1 1", "40"], ["12 1\n1 1 4 5 1 4 1 9 1 9 8 1 0", "721168027"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "二分图", "生成函数", "分块", "快速数论变换 NTT", "洛谷月赛"], "title": "「RiOI-03」A Journey to the Moonlight", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/hi1cu7o7.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n[加强版链接](/problem/P10286)\n\nKDOI 的业务发展到月亮上了。但是月亮上网速很慢，他们需要解决网速问题。\n\nKDOI 的工作人员研发了一种新型无线局域网模块 Wife（WIreless Fidelity Extend），每个模块最多连接两个用户，并且可以选择为其中一位客户提供 $1$ 单位带宽。不过，无论有多少个模块同时为一位客户提供带宽，他的总带宽永远是 $1$。\n\n公司的员工都很懒，经常 ppt 一鸽就是一个月。因此，他们也懒得为 Wife 贴上标签，也就是所有模块间不做区分。另外，为了节省电费，不能有两个模块的工作客户范围完全相同。\n\n现在有 $n$ 个用户购买了服务。当 Wife 系统正式启动时，鹿由器发现了一个问题：可能有些用户没有宽带可以使用！快斗现在手里没有 Wife，只能抢来一个，牺牲一个用户的利益，按一定顺序给所有包括有宽带的用户使用。然而，没有宽带的用户们要求很苛刻，只要没有给他们按注册顺序连续地提供宽带，他们就会威胁鹿由器退钱。\n\n快斗已经忘了他们的注册时间了，只能随机选一个 $1\\sim n$ 的排列来决定提供宽带的顺序。为了让尝试的次数尽量小，他会调整 Wife 连接的用户。他想知道，要让这些顾客平息愤怒，需要尝试的最小期望次数是多少。\n\n特别的，Wife 有两种型号。型号 $1$ 可以选择只连接一位，型号 $2$ 则只能连接两个不同客户。你需要分别计算出这两种型号的答案。\n\n快斗自己肯定~~不~~会做，所以他要让你求出所有 $i\\in[0,n]$ 的结果 $ans_i$。考虑到你如果一个一个汇报会累死的，仁慈的鹿由器会给你数组 $a$，让你输出 $\\sum a_i\\times ans_i$。\n\n", "description": "#### 【形式化题意】\n\n对于一个右部点为 $m$ 个的二分图 $G$，定义它的权值 $w(G)$ 如下：\n\n- 选择一种匹配方案，标记第一个已匹配的右部点。如果不存在这样的点，那么标记第一个未匹配的右部点。\n- 每次随机选择一个 $1,2,\\cdots,m$ 的排列，当未匹配的右部点与被标记的点 **按标号顺序作为一个子段出现在排列中时** 停止操作。\n- $w(G)$ 为在所有匹配方案中操作次数期望的 **最小值**。\n\n将这个二分图 $G$ 定义为 **$k$ 合法** 的，当且仅当：\n\n- 所有左部点的度数在 $k\\sim 2$ 之间。\n- 没有任意两个左部点，与其相邻的点组成的集合相同。\n\n定义 $f(k,x)$ 为所有右部点 $x$ 个，左部点不进行区分的 $k$ 合法二分图 $G$ 的 $w(G)$ 之和。\n\n给定 $n,k,a_{0\\sim n}$，求 $\\sum\\limits^n_ia_if(k,i) \\bmod998244353$。", "inputFormat": "一行两个正整数，分别表示 $n$ 与 Wife 的型号 $k$。\n\n第二行 $n+1$ 个非负整数，分别表示 $a_{0\\sim n}$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "约定一个左部点连接了编号为 $x,y$ 的右部点表示为 $(x,y)$。\n\n#### 【样例 1 解释】\n\n对于 $n=0,1$，答案显然为 $1,2$。\n\n对于 $n=2$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1),(2),(1,2)$\n\n$\\{(1),(2)\\},\\{(1,2),(2)\\},\\{(1,2),(1)\\},\\{(1,2),(1),(2)\\}$\n\n期望相同的二分图被分为一组。答案为 $\\dfrac21+\\dfrac21\\times3+\\dfrac22\\times4=12$，输出 $1\\times1+1\\times2+1\\times12=15$。\n\n#### 【样例 2 解释】\n\n对于 $n=0,1,2$，答案为 $1,1,4$。\n\n对于 $n=3$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1,2),(1,3),(2,3)$\n\n$\\{(1,2),(1,3)\\},\\{(1,2),(2,3)\\},\\{(1,3),(2,3)\\}$\n\n$\\{(1,2),(2,3),(1,3)\\}$\n\n答案为 $\\dfrac61+\\dfrac61\\times3+\\dfrac62\\times3+\\dfrac66=34$。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$0\\le n\\le1.5\\times10^4$，$1\\le k\\le2$，$0\\le a_i<998244353$。\n\n**本题开启捆绑测试**\n\n|$\\text{Subtask}$|$\\text{Score}$|$n\\le $|$k\\ge$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$0$|$5$|$5$|$1$||\n|$1$|$10$|$500$|$2$||\n|$2$|$20$|$500$|$1$|$a_i\\equiv\\dfrac1{i!}$|\n|$3$|$20$|$1.5\\times10^4$|$2$|$a_i\\equiv\\dfrac1{i!}$|\n|$4$|$45$|$1.5\\times10^4$|$1$||", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」A Journey to the Moonlight", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/hi1cu7o7.png)\n\n（图片来自 phigros 曲绘，侵删。）\n\n[加强版链接](/problem/P10286)\n\nKDOI 的业务发展到月亮上了。但是月亮上网速很慢，他们需要解决网速问题。\n\nKDOI 的工作人员研发了一种新型无线局域网模块 Wife（WIreless Fidelity Extend），每个模块最多连接两个用户，并且可以选择为其中一位客户提供 $1$ 单位带宽。不过，无论有多少个模块同时为一位客户提供带宽，他的总带宽永远是 $1$。\n\n公司的员工都很懒，经常 ppt 一鸽就是一个月。因此，他们也懒得为 Wife 贴上标签，也就是所有模块间不做区分。另外，为了节省电费，不能有两个模块的工作客户范围完全相同。\n\n现在有 $n$ 个用户购买了服务。当 Wife 系统正式启动时，鹿由器发现了一个问题：可能有些用户没有宽带可以使用！快斗现在手里没有 Wife，只能抢来一个，牺牲一个用户的利益，按一定顺序给所有包括有宽带的用户使用。然而，没有宽带的用户们要求很苛刻，只要没有给他们按注册顺序连续地提供宽带，他们就会威胁鹿由器退钱。\n\n快斗已经忘了他们的注册时间了，只能随机选一个 $1\\sim n$ 的排列来决定提供宽带的顺序。为了让尝试的次数尽量小，他会调整 Wife 连接的用户。他想知道，要让这些顾客平息愤怒，需要尝试的最小期望次数是多少。\n\n特别的，Wife 有两种型号。型号 $1$ 可以选择只连接一位，型号 $2$ 则只能连接两个不同客户。你需要分别计算出这两种型号的答案。\n\n快斗自己肯定~~不~~会做，所以他要让你求出所有 $i\\in[0,n]$ 的结果 $ans_i$。考虑到你如果一个一个汇报会累死的，仁慈的鹿由器会给你数组 $a$，让你输出 $\\sum a_i\\times ans_i$。\n\n", "description": "#### 【形式化题意】\n\n对于一个右部点为 $m$ 个的二分图 $G$，定义它的权值 $w(G)$ 如下：\n\n- 选择一种匹配方案，标记第一个已匹配的右部点。如果不存在这样的点，那么标记第一个未匹配的右部点。\n- 每次随机选择一个 $1,2,\\cdots,m$ 的排列，当未匹配的右部点与被标记的点 **按标号顺序作为一个子段出现在排列中时** 停止操作。\n- $w(G)$ 为在所有匹配方案中操作次数期望的 **最小值**。\n\n将这个二分图 $G$ 定义为 **$k$ 合法** 的，当且仅当：\n\n- 所有左部点的度数在 $k\\sim 2$ 之间。\n- 没有任意两个左部点，与其相邻的点组成的集合相同。\n\n定义 $f(k,x)$ 为所有右部点 $x$ 个，左部点不进行区分的 $k$ 合法二分图 $G$ 的 $w(G)$ 之和。\n\n给定 $n,k,a_{0\\sim n}$，求 $\\sum\\limits^n_ia_if(k,i) \\bmod998244353$。", "inputFormat": "一行两个正整数，分别表示 $n$ 与 Wife 的型号 $k$。\n\n第二行 $n+1$ 个非负整数，分别表示 $a_{0\\sim n}$。", "outputFormat": "一行一个非负整数，表示答案。", "hint": "约定一个左部点连接了编号为 $x,y$ 的右部点表示为 $(x,y)$。\n\n#### 【样例 1 解释】\n\n对于 $n=0,1$，答案显然为 $1,2$。\n\n对于 $n=2$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1),(2),(1,2)$\n\n$\\{(1),(2)\\},\\{(1,2),(2)\\},\\{(1,2),(1)\\},\\{(1,2),(1),(2)\\}$\n\n期望相同的二分图被分为一组。答案为 $\\dfrac21+\\dfrac21\\times3+\\dfrac22\\times4=12$，输出 $1\\times1+1\\times2+1\\times12=15$。\n\n#### 【样例 2 解释】\n\n对于 $n=0,1,2$，答案为 $1,1,4$。\n\n对于 $n=3$，可能的二分图为（用每个左部点的邻接点组成的元组表示）：\n\n$()$\n\n$(1,2),(1,3),(2,3)$\n\n$\\{(1,2),(1,3)\\},\\{(1,2),(2,3)\\},\\{(1,3),(2,3)\\}$\n\n$\\{(1,2),(2,3),(1,3)\\}$\n\n答案为 $\\dfrac61+\\dfrac61\\times3+\\dfrac62\\times3+\\dfrac66=34$。\n\n#### 【数据范围】\n\n对于 $100\\%$ 的数据，$0\\le n\\le1.5\\times10^4$，$1\\le k\\le2$，$0\\le a_i<998244353$。\n\n**本题开启捆绑测试**\n\n|$\\text{Subtask}$|$\\text{Score}$|$n\\le $|$k\\ge$|特殊性质|\n|:-:|:-:|:-:|:-:|:-:|\n|$0$|$5$|$5$|$1$||\n|$1$|$10$|$500$|$2$||\n|$2$|$20$|$500$|$1$|$a_i\\equiv\\dfrac1{i!}$|\n|$3$|$20$|$1.5\\times10^4$|$2$|$a_i\\equiv\\dfrac1{i!}$|\n|$4$|$45$|$1.5\\times10^4$|$1$||", "locale": "zh-CN"}}}
{"pid": "P9920", "type": "P", "difficulty": 7, "samples": [["10\n1 1\n2 2\n3 3\n4 4\n5 5\n6 6\n7 7\n8 8\n9 9\n10 10\n\n3 -1\n1\n2\n3\n", "1\n1\n2\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数论", "洛谷原创", "Special Judge", "素数判断,质数,筛法", "洛谷月赛"], "title": "「RiOI-03」变换，反演", "background": "为了题目要求，我们对积性函数进行重定义：**不保证 $f(1)=1$**。", "description": "**这是一道非传统题。**\n\n给定一个**积性函数** $f(d)$。对于每一个测试点，我们会在附件中给出 $g(n)=\\sum_{d|n}f(d)$ 的其中 $k$ 项 $\\bmod\\ 998244353$ 的值，这部分也会在输入中出现。接着，对于每一个测试点，有 $t$ 组数据。对于每组数据，输入 $d$，请输出 $f(d)\\bmod998244353$ 的值。", "inputFormat": "第一行为 $k$，接下来每一行会有两个正整数，分别为 $d$ 与 $g(d)$。\n\n之后输入两个数 $t,id$，分别表示数据组数与数据点编号。对于每组数据，输入一个正整数 $n$。", "outputFormat": "对于每组数据，输出一个非负整数表示答案。", "hint": "#### 【样例解释】\n\n由于 $g(d)=d$，因此 $f(d)=\\varphi(d)$，结果正确。\n\n#### 【数据范围】\n\n对于每个测试点：\n\n如果你正确回答了 $n\\le k$ 的测试数据，你将得到 $20\\%$ 的分数。\n\n如果你正确回答了所有测试数据，你将得到剩余 $80\\%$ 的分数。**所以，如果你无法正确回答，也请随机输出一个数来保证格式正确。**\n\n#### 【数据范围】\n\n|$\\text{Id}$|$\\text{Name}$|$\\text{Score}$| $n\\leq$|$k=$|$t=$|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$0$|$\\text{Epsilon}$|$5$|$10^6$|$100$|$10$|\n|$1$|$\\text{Division}$|$5$|$10^9$|$100$|$10$|\n|$2$|$\\text{Unknown}$|$5$|$10^{18}$|$1$|$10$|\n|$3$|$\\text{Random}$|$10$|$10^5$|$10^5$|$10^5$|\n|$4$|$\\text{Double}$|$10$|$10^9$|$100$|$10$|\n|$5$|$\\text{Hack}$|$10$|$10^9$|$31623$|$1$|\n|$6$|$\\text{Square}$|$15$|$10^{18}$|$100$|$5$|\n|$7$|$\\text{Poly}$|$20$|$10^9$|$10^5$|$100$|\n|$8$|$\\text{Thanks}$|$20$|$10^5$|$4$|$10^5$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「RiOI-03」变换，反演", "background": "为了题目要求，我们对积性函数进行重定义：**不保证 $f(1)=1$**。", "description": "**这是一道非传统题。**\n\n给定一个**积性函数** $f(d)$。对于每一个测试点，我们会在附件中给出 $g(n)=\\sum_{d|n}f(d)$ 的其中 $k$ 项 $\\bmod\\ 998244353$ 的值，这部分也会在输入中出现。接着，对于每一个测试点，有 $t$ 组数据。对于每组数据，输入 $d$，请输出 $f(d)\\bmod998244353$ 的值。", "inputFormat": "第一行为 $k$，接下来每一行会有两个正整数，分别为 $d$ 与 $g(d)$。\n\n之后输入两个数 $t,id$，分别表示数据组数与数据点编号。对于每组数据，输入一个正整数 $n$。", "outputFormat": "对于每组数据，输出一个非负整数表示答案。", "hint": "#### 【样例解释】\n\n由于 $g(d)=d$，因此 $f(d)=\\varphi(d)$，结果正确。\n\n#### 【数据范围】\n\n对于每个测试点：\n\n如果你正确回答了 $n\\le k$ 的测试数据，你将得到 $20\\%$ 的分数。\n\n如果你正确回答了所有测试数据，你将得到剩余 $80\\%$ 的分数。**所以，如果你无法正确回答，也请随机输出一个数来保证格式正确。**\n\n#### 【数据范围】\n\n|$\\text{Id}$|$\\text{Name}$|$\\text{Score}$| $n\\leq$|$k=$|$t=$|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|$0$|$\\text{Epsilon}$|$5$|$10^6$|$100$|$10$|\n|$1$|$\\text{Division}$|$5$|$10^9$|$100$|$10$|\n|$2$|$\\text{Unknown}$|$5$|$10^{18}$|$1$|$10$|\n|$3$|$\\text{Random}$|$10$|$10^5$|$10^5$|$10^5$|\n|$4$|$\\text{Double}$|$10$|$10^9$|$100$|$10$|\n|$5$|$\\text{Hack}$|$10$|$10^9$|$31623$|$1$|\n|$6$|$\\text{Square}$|$15$|$10^{18}$|$100$|$5$|\n|$7$|$\\text{Poly}$|$20$|$10^9$|$10^5$|$100$|\n|$8$|$\\text{Thanks}$|$20$|$10^5$|$4$|$10^5$|", "locale": "zh-CN"}}}
{"pid": "P9921", "type": "P", "difficulty": 5, "samples": [["5 2\n.X...\n.XXXX\nXX...\n.....\n.X.X.\n", "3\n"], ["2 1\n..\n..\n", "2\n"], ["2 2\nX.\n..\n", "1\n"], ["10 2\nXXXXXXXXXX\nXXXXXXXXXX\nXXXXXXXXXX\nXXXXXXXXXX\nXXXXXXXXXX\n..........\nXXXXXXXXXX\nXXXXXXXXXX\nXXXXXXXXXX\nXXXXXXXXXX\n", "5\n"], ["10 2\nXX.XXXXX.X\nXX.XXXXX.X\nXX.XXXXX.X\nXX.XXXXX.X\nXX.XXXXX.X\nXX.XXXXX.X\nXX.XXXXX.X\nXX.XXXXX.X\nXX.XXXXX.X\nXX.XXXXX.X\n", "10\n"], ["见附件", "531\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["POI（波兰）", "2023", "前缀和", "分类讨论"], "title": "[POI 2023/2024 R1] Budowa lotniska", "background": "译自 [XXXI Olimpiada Informatyczna - I etap](https://sio2.mimuw.edu.pl/c/oi31-1/dashboard/) [Budowa lotniska](https://sio2.mimuw.edu.pl/c/oi31-1/p/bud/)。", "description": "给你一个 $n\\times n$ 的地图，地图上有 `.` 有 `X`。\n\n求出最大的 $k$，使得：\n\n在地图上能找到 $m(m\\leq 2)$ 个 $1\\times k$ 或 $k\\times 1$ 的长条，使得长条不交且长条内全是 `.`。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，描述地图。", "outputFormat": "一行一个非负整数，最大的 $k$。", "hint": "样例解释：\n\n```plain\n.X...\n.XXXX\nXX..2\n111.2\n.X.X2\n```\n\n对于所有数据，$1\\leq n\\leq1500$，$1\\leq m\\leq2$，地图上只有 `.` 和 `X`。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $m=1$ | 20 |\n| 2 | $n\\leq 30$ | 22 |\n| 3 | $n\\leq 300$ | 23 |\n| 4 |  | 35 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2023/2024 R1] Budowa lotniska", "background": "译自 [XXXI Olimpiada Informatyczna - I etap](https://sio2.mimuw.edu.pl/c/oi31-1/dashboard/) [Budowa lotniska](https://sio2.mimuw.edu.pl/c/oi31-1/p/bud/)。", "description": "给你一个 $n\\times n$ 的地图，地图上有 `.` 有 `X`。\n\n求出最大的 $k$，使得：\n\n在地图上能找到 $m(m\\leq 2)$ 个 $1\\times k$ 或 $k\\times 1$ 的长条，使得长条不交且长条内全是 `.`。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $n$ 行，描述地图。", "outputFormat": "一行一个非负整数，最大的 $k$。", "hint": "样例解释：\n\n```plain\n.X...\n.XXXX\nXX..2\n111.2\n.X.X2\n```\n\n对于所有数据，$1\\leq n\\leq1500$，$1\\leq m\\leq2$，地图上只有 `.` 和 `X`。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $m=1$ | 20 |\n| 2 | $n\\leq 30$ | 22 |\n| 3 | $n\\leq 300$ | 23 |\n| 4 |  | 35 |\n", "locale": "zh-CN"}}}
{"pid": "P9922", "type": "P", "difficulty": 6, "samples": [["11 3 12 13\nabaaabababa\n", "ba\n"], ["20 3 30 40\nabcdabcdabcdabcdabcd\n", "bcdabcdabcd\n"], ["见附件", "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n"], ["见附件", "见附件"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["POI（波兰）", "2023"], "title": "[POI 2023/2024 R1] CzatBBB", "background": "译自 [XXXI Olimpiada Informatyczna - I etap](https://sio2.mimuw.edu.pl/c/oi31-1/dashboard/) [CzatBBB](https://sio2.mimuw.edu.pl/c/oi31-1/p/cza/)。\n", "description": "给出一个 $n$ 个字母的字符串 $S$ 和一个参数 $k$，设 $R$ 为字符串 $S$ 的后 $k$ 个字母形成的字串。\n\n假设字符串 $S'$ 为 $S$ 添加一个新字母生成的新字符串。\n\n添加的规则如下所示： 对于字母 $X$ 字母，计算它在字符串 $S$ 中紧接着 $R$ 出现的次数。出现频率最高的字母为新添加的字母，如果有多个出现频率最高的字母，取最小的一个。如果 $R$ 在字符串 $S$ 中的其他地方都没有出现，则取 $X = a$。最后，我们扩展字符串 $S$，在其末尾添加字母 $X$。\n\n例如，设 $S = \\text{abaaabababa}$，$k = 3$ 则 $R$ 与后一个字母一起出现的字串为的：$\\text{abaa}$、$\\text{abab}$、$\\text{abab}$。它最常与字母 $\\text{b}$ 一起出现，因此我们在 $S$ 中加上 $\\text{b}$，生成 $S' = \\text{abaaabababab}$。\n\n现在 $S' = \\text{abaaabababab}$，$R = \\text{bab}$，$R$ 与后一个字母一起出现的字串为：$\\text{baba}$、$\\text{baba}$，如 $\\text{baba}$、$\\text{baba}$，因此我们在 $S'$ 后面加上 $a$。\n\n以此类推，这样的操作会进行无数次。\n\n你的任务是编写一个程序，输出新字符串最后 $a$ 至 $b$ 个字符。", "inputFormat": "第一行输入包含四个整数 $n$、$k$、$a$ 和 $b$。\n\n第二行输入包含一个 $n$ 个字母的字符串，由小写英文字母组成的 $n$ 个字母字符串，表示单词 $S$。", "outputFormat": "输出字符串 $S'$ 的第 $a$ 个字符 至第 $b$ 个字符，表示扩展单词 $S'$ 中位于以下位置的字母。", "hint": "对于所有的数据，$2\\leq n\\leq10^6$，$1\\leq k<n<a<b<10^{18}$，$b+1-a\\leq10^6$，串只含小写字母。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq100$，$b\\leq1000$ | 8 |\n| 2 | $b\\leq 10^8$ | 10 |\n| 3 | $n\\leq 500$，后缀 $R$ 的前一次出现将始终存在，并且每次出现后都会有相同的字母  | 16 |\n| 4 | 后缀 $R$ 的前一次出现将始终存在，并且每次出现后都会有相同的字母 | 10 |\n| 5 | $k\\leq20$，$b\\leq 10^{10}$，串只含 `ab` | 16 |\n| 6 | 无任何限制  | 40 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2023/2024 R1] CzatBBB", "background": "译自 [XXXI Olimpiada Informatyczna - I etap](https://sio2.mimuw.edu.pl/c/oi31-1/dashboard/) [CzatBBB](https://sio2.mimuw.edu.pl/c/oi31-1/p/cza/)。\n", "description": "给出一个 $n$ 个字母的字符串 $S$ 和一个参数 $k$，设 $R$ 为字符串 $S$ 的后 $k$ 个字母形成的字串。\n\n假设字符串 $S'$ 为 $S$ 添加一个新字母生成的新字符串。\n\n添加的规则如下所示： 对于字母 $X$ 字母，计算它在字符串 $S$ 中紧接着 $R$ 出现的次数。出现频率最高的字母为新添加的字母，如果有多个出现频率最高的字母，取最小的一个。如果 $R$ 在字符串 $S$ 中的其他地方都没有出现，则取 $X = a$。最后，我们扩展字符串 $S$，在其末尾添加字母 $X$。\n\n例如，设 $S = \\text{abaaabababa}$，$k = 3$ 则 $R$ 与后一个字母一起出现的字串为的：$\\text{abaa}$、$\\text{abab}$、$\\text{abab}$。它最常与字母 $\\text{b}$ 一起出现，因此我们在 $S$ 中加上 $\\text{b}$，生成 $S' = \\text{abaaabababab}$。\n\n现在 $S' = \\text{abaaabababab}$，$R = \\text{bab}$，$R$ 与后一个字母一起出现的字串为：$\\text{baba}$、$\\text{baba}$，如 $\\text{baba}$、$\\text{baba}$，因此我们在 $S'$ 后面加上 $a$。\n\n以此类推，这样的操作会进行无数次。\n\n你的任务是编写一个程序，输出新字符串最后 $a$ 至 $b$ 个字符。", "inputFormat": "第一行输入包含四个整数 $n$、$k$、$a$ 和 $b$。\n\n第二行输入包含一个 $n$ 个字母的字符串，由小写英文字母组成的 $n$ 个字母字符串，表示单词 $S$。", "outputFormat": "输出字符串 $S'$ 的第 $a$ 个字符 至第 $b$ 个字符，表示扩展单词 $S'$ 中位于以下位置的字母。", "hint": "对于所有的数据，$2\\leq n\\leq10^6$，$1\\leq k<n<a<b<10^{18}$，$b+1-a\\leq10^6$，串只含小写字母。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq100$，$b\\leq1000$ | 8 |\n| 2 | $b\\leq 10^8$ | 10 |\n| 3 | $n\\leq 500$，后缀 $R$ 的前一次出现将始终存在，并且每次出现后都会有相同的字母  | 16 |\n| 4 | 后缀 $R$ 的前一次出现将始终存在，并且每次出现后都会有相同的字母 | 10 |\n| 5 | $k\\leq20$，$b\\leq 10^{10}$，串只含 `ab` | 16 |\n| 6 | 无任何限制  | 40 |", "locale": "zh-CN"}}}
{"pid": "P9923", "type": "P", "difficulty": 5, "samples": [["3 6\n1 1\n1 2\n2 2\n3 1\n3 2\n3 3\n", "TAK\n4\n1 2 4 5\n"], ["9 1\n1 1\n", "NIE\n"], ["见附件", "TAK\n4\n1 2 10 11\n"], ["见附件", "TAK\n4\n1 2 100001 100002\n"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["图论", "POI（波兰）", "2023", "Special Judge", "构造"], "title": "[POI 2023/2024 R1] Przyciski", "background": "译自 [XXXI Olimpiada Informatyczna - I etap](https://sio2.mimuw.edu.pl/c/oi31-1/dashboard/) [Przyciski](https://sio2.mimuw.edu.pl/c/oi31-1/p/prz/)。", "description": "一个 $n\\times n$ 的方阵，里面有 $m$ 个按钮。\n\n你需要按下若干个（至少一个）按钮，使得每行每列被按下的按钮个数奇偶性相同。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数，表示一个按钮的坐标。", "outputFormat": "如果无解，输出一行 `NIE`。\n\n如果有解，第一行输出 `TAK`，第二行输出一个正整数 $k$，表示按下按钮的个数，第三行输出若干个正整数，表示你按下的按钮的编号。", "hint": "样例一解释：$R_1=2,R_2=0,R_3=2,C_1=C_2=2,C_3=0$。\n\n对于所有的数据，$1\\leq n\\leq 100000$，$1\\leq m\\leq\\min(n^2,500000)$。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $m\\leq 20$ | 24 |\n| 2 | 如果有解，保证存在偶数解 | 24 |\n| 3 | 如果有解，保证存在奇数解 | 24 |\n| 4 |  | 28 |\n\n如果有解并且你指出有解但是构造错误，你能得到 $50\\%$ 的分数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2023/2024 R1] Przyciski", "background": "译自 [XXXI Olimpiada Informatyczna - I etap](https://sio2.mimuw.edu.pl/c/oi31-1/dashboard/) [Przyciski](https://sio2.mimuw.edu.pl/c/oi31-1/p/prz/)。", "description": "一个 $n\\times n$ 的方阵，里面有 $m$ 个按钮。\n\n你需要按下若干个（至少一个）按钮，使得每行每列被按下的按钮个数奇偶性相同。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来 $m$ 行，每行两个正整数，表示一个按钮的坐标。", "outputFormat": "如果无解，输出一行 `NIE`。\n\n如果有解，第一行输出 `TAK`，第二行输出一个正整数 $k$，表示按下按钮的个数，第三行输出若干个正整数，表示你按下的按钮的编号。", "hint": "样例一解释：$R_1=2,R_2=0,R_3=2,C_1=C_2=2,C_3=0$。\n\n对于所有的数据，$1\\leq n\\leq 100000$，$1\\leq m\\leq\\min(n^2,500000)$。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $m\\leq 20$ | 24 |\n| 2 | 如果有解，保证存在偶数解 | 24 |\n| 3 | 如果有解，保证存在奇数解 | 24 |\n| 4 |  | 28 |\n\n如果有解并且你指出有解但是构造错误，你能得到 $50\\%$ 的分数。", "locale": "zh-CN"}}}
{"pid": "P9924", "type": "P", "difficulty": 7, "samples": [["3 4 4\n1 4\n2 6\n3 4\n3 6\n", "3\nABA\nAAC\nBAA\nBBB\nCCB\nBCC\n"], ["见附件", "见附件"], ["见附件", "见附件"], ["2 1 4\n1 4\n", "2\nAB\nAC\nBA\nBB\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["POI（波兰）", "2023", "Special Judge", "构造"], "title": "[POI 2023/2024 R1] Satelity", "background": "译自 [XXXI Olimpiada Informatyczna - I etap](https://sio2.mimuw.edu.pl/c/oi31-1/dashboard/) [Satelity](https://sio2.mimuw.edu.pl/c/oi31-1/p/sat/)。", "description": "有 $2n$ 个卫星，$1\\sim n$ 属于 A 公司，$n+1\\sim 2n$ 属于 B 公司。\n\n两个卫星**应当**能够通信**当且仅当**它们属于同一个公司或者有额外要求。\n\n你需要给每个卫星分配一个等长的**独一无二**的识别码，识别码应当只包含字母 `ABC`，两个卫星**实际**能够通信**当且仅当**识别码有至少一位相同。要求你的识别码方案满足要求。输出你的方案。", "inputFormat": "本题多测，读入直到文件结束。\n\n对于每组数据，第一行三个正整数 $n,p,M$，其中 $M$ 意为你的识别码长度不得超过 $M$。\n\n接下来 $p$ 行，每行两个正整数，表示这两个卫星有额外要求应当能够通信。", "outputFormat": "对于每组数据，第一行一个正整数 $m(1\\leq m\\leq M)$，表示你的方案的识别码长度。\n\n接下来 $2n$ 行，每行一个长度为 $m$ 的只含 `ABC` 的字符串，识别码。", "hint": "单个输入文件不超过 40MB，请使用较快的输入输出方式。\n\n对于所有测试点，$1\\leq\\sum n\\leq 2\\times 10^6$，$1\\leq\\sum n^2\\leq10^7$。\n\n对于所有数据，$2\\leq n\\leq1000$，$1\\leq p\\leq n^2$。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq100$，$M=n^2+2n$ | 7 |\n| 2 | $M=3n$ | 11 |\n| 3 | $M=n+2\\lceil\\log_2n\\rceil$ | 23 |\n| 4 | $M=n+2$ | 41 |\n| 5 | $M=n+1$ | 18 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2023/2024 R1] Satelity", "background": "译自 [XXXI Olimpiada Informatyczna - I etap](https://sio2.mimuw.edu.pl/c/oi31-1/dashboard/) [Satelity](https://sio2.mimuw.edu.pl/c/oi31-1/p/sat/)。", "description": "有 $2n$ 个卫星，$1\\sim n$ 属于 A 公司，$n+1\\sim 2n$ 属于 B 公司。\n\n两个卫星**应当**能够通信**当且仅当**它们属于同一个公司或者有额外要求。\n\n你需要给每个卫星分配一个等长的**独一无二**的识别码，识别码应当只包含字母 `ABC`，两个卫星**实际**能够通信**当且仅当**识别码有至少一位相同。要求你的识别码方案满足要求。输出你的方案。", "inputFormat": "本题多测，读入直到文件结束。\n\n对于每组数据，第一行三个正整数 $n,p,M$，其中 $M$ 意为你的识别码长度不得超过 $M$。\n\n接下来 $p$ 行，每行两个正整数，表示这两个卫星有额外要求应当能够通信。", "outputFormat": "对于每组数据，第一行一个正整数 $m(1\\leq m\\leq M)$，表示你的方案的识别码长度。\n\n接下来 $2n$ 行，每行一个长度为 $m$ 的只含 `ABC` 的字符串，识别码。", "hint": "单个输入文件不超过 40MB，请使用较快的输入输出方式。\n\n对于所有测试点，$1\\leq\\sum n\\leq 2\\times 10^6$，$1\\leq\\sum n^2\\leq10^7$。\n\n对于所有数据，$2\\leq n\\leq1000$，$1\\leq p\\leq n^2$。\n\n| 子任务编号 | 附加限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq100$，$M=n^2+2n$ | 7 |\n| 2 | $M=3n$ | 11 |\n| 3 | $M=n+2\\lceil\\log_2n\\rceil$ | 23 |\n| 4 | $M=n+2$ | 41 |\n| 5 | $M=n+1$ | 18 |", "locale": "zh-CN"}}}
{"pid": "P9925", "type": "P", "difficulty": 6, "samples": [["8\n1 5\n3 10\n4 8\n9 12\n11 16\n14 15\n20 22\n15 21\n", "3\n1 3\n4 6\n8 7\n"], ["见附件", "见附件"], ["见附件", "见附件"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "POI（波兰）", "2023", "Special Judge", "构造"], "title": "[POI 2023/2024 R1] Zapobiegliwy student", "background": "译自 [XXXI Olimpiada Informatyczna - I etap](https://sio2.mimuw.edu.pl/c/oi31-1/dashboard/) [Zapobiegliwy student](https://sio2.mimuw.edu.pl/c/oi31-1/p/zap/)。", "description": "考虑如下的一个简单问题：\n\n> 你有 $n$ 个线段在数轴上，你要选出尽量多的线段，使它们两两不交。\n\n我知道你一定会做，但你需要解决这个：\n\n你有 $n$ 个线段在数轴上，你要选出尽量多的线段对 $(u_i,v_i)_{i=1}^k$，即最大化 $k$。\n\n满足 $k+1$ 个要求：\n\n- $u_1,u_2,\\cdots,u_k$ 两两不交。\n- $v_1,u_2,u_3,\\cdots,u_k$ 两两不交。\n- $u_1,v_2,u_3,u_4,\\cdots,u_k$ 两两不交。\n- $\\cdots$\n- $u_1,u_2,\\cdots,u_{k-1},v_k$ 两两不交。\n\n其中 $\\forall i$，$u_i$ 与 $v_i$ 不能相同。", "inputFormat": "第一行一个正整数 $n(n\\geq2)$。\n\n接下来 $n$ 行每行两个正整数 $a_i,b_i(1\\leq a_i<b_i\\leq10^9)$，表示一个线段的两个端点。\n\n两个线段 $i,j$ 不交当且仅当 $b_i\\leq a_j$ 或 $b_j\\leq a_i$。", "outputFormat": "第一行一个正整数 $k$。\n\n接下来 $k$ 行，每行两个正整数 $u_i,v_i$，表示一对线段的编号。", "hint": "如果你的第一行正确但是方案不对（可以不输出方案，此时不要有换行），你能得到 $50\\%$ 的分数。\n\n如果你的方案合法并且第一行和答案相差不超过 $1$，你能得到 $15\\%$ 的分数。\n\n| 子任务编号 | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq3000$ | 40 |\n| 2 | $n\\leq500000$ | 60 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[POI 2023/2024 R1] Zapobiegliwy student", "background": "译自 [XXXI Olimpiada Informatyczna - I etap](https://sio2.mimuw.edu.pl/c/oi31-1/dashboard/) [Zapobiegliwy student](https://sio2.mimuw.edu.pl/c/oi31-1/p/zap/)。", "description": "考虑如下的一个简单问题：\n\n> 你有 $n$ 个线段在数轴上，你要选出尽量多的线段，使它们两两不交。\n\n我知道你一定会做，但你需要解决这个：\n\n你有 $n$ 个线段在数轴上，你要选出尽量多的线段对 $(u_i,v_i)_{i=1}^k$，即最大化 $k$。\n\n满足 $k+1$ 个要求：\n\n- $u_1,u_2,\\cdots,u_k$ 两两不交。\n- $v_1,u_2,u_3,\\cdots,u_k$ 两两不交。\n- $u_1,v_2,u_3,u_4,\\cdots,u_k$ 两两不交。\n- $\\cdots$\n- $u_1,u_2,\\cdots,u_{k-1},v_k$ 两两不交。\n\n其中 $\\forall i$，$u_i$ 与 $v_i$ 不能相同。", "inputFormat": "第一行一个正整数 $n(n\\geq2)$。\n\n接下来 $n$ 行每行两个正整数 $a_i,b_i(1\\leq a_i<b_i\\leq10^9)$，表示一个线段的两个端点。\n\n两个线段 $i,j$ 不交当且仅当 $b_i\\leq a_j$ 或 $b_j\\leq a_i$。", "outputFormat": "第一行一个正整数 $k$。\n\n接下来 $k$ 行，每行两个正整数 $u_i,v_i$，表示一对线段的编号。", "hint": "如果你的第一行正确但是方案不对（可以不输出方案，此时不要有换行），你能得到 $50\\%$ 的分数。\n\n如果你的方案合法并且第一行和答案相差不超过 $1$，你能得到 $15\\%$ 的分数。\n\n| 子任务编号 | 限制 | 分值 |\n| :----------: | :----------: | :----------: |\n| 1 | $n\\leq3000$ | 40 |\n| 2 | $n\\leq500000$ | 60 |\n", "locale": "zh-CN"}}}
{"pid": "P9926", "type": "P", "difficulty": 7, "samples": [["4 6 17\n1 2 4\n1 3 7\n1 4 6\n2 3 8\n2 4 5\n3 4 7\n", "16\n16\n17\n17\n17\n18\n18\n18\n18\n19\n19\n19\n20\n21\n21\n22\n-1\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["O2优化"], "title": "[NFLSPC #6] 所以 k 小生成树怎么做？", "background": "", "description": "给定一张无向带权无自环无重边的连通图，求前 $k$ 小生成树的权值。\n\n- 生成树的权值为其所有边权之和。\n- 两棵生成树不同，当且仅当存在一条边在一棵生成树上，但不在另一棵生成树上。\n- 若第 $i$ 小生成树不存在，则输出 $-1$。", "inputFormat": "第一行三个整数 $n, m, k$。\n\n接下来 $m$ 行，每行三个整数 $u_i, v_i, w_i$，分别表示无向边的两端及其权值。\n", "outputFormat": "输出 $k$ 行，第 $i$ 行一个整数表示第 $i$ 小生成树的权值。", "hint": "对于所有数据，$1\\leq n \\leq 5\\times 10 ^ 4$，$n - 1\\leq m\\leq 10 ^ 5$，$1\\leq k\\leq 10 ^ 5$，$1\\leq mk\\leq 10 ^ 7$，$1\\leq u_i, v_i\\leq n$，$1\\leq w_i\\leq 10 ^ 9$。保证图连通，无自环，无重边。\n\n- 子任务 1（$10$ 分）：$m ^ 2k\\leq 10 ^ 6$。\n- 子任务 2（$20$ 分）：保证每条边至多属于一个简单环。\n- 子任务 3（$20$ 分）：$mk\\leq 10 ^ 6$。\n- 子任务 4（$50$ 分）：无特殊限制。\n\nSource：NFLSPC #6 A by Alex_Wei", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NFLSPC #6] 所以 k 小生成树怎么做？", "background": "", "description": "给定一张无向带权无自环无重边的连通图，求前 $k$ 小生成树的权值。\n\n- 生成树的权值为其所有边权之和。\n- 两棵生成树不同，当且仅当存在一条边在一棵生成树上，但不在另一棵生成树上。\n- 若第 $i$ 小生成树不存在，则输出 $-1$。", "inputFormat": "第一行三个整数 $n, m, k$。\n\n接下来 $m$ 行，每行三个整数 $u_i, v_i, w_i$，分别表示无向边的两端及其权值。\n", "outputFormat": "输出 $k$ 行，第 $i$ 行一个整数表示第 $i$ 小生成树的权值。", "hint": "对于所有数据，$1\\leq n \\leq 5\\times 10 ^ 4$，$n - 1\\leq m\\leq 10 ^ 5$，$1\\leq k\\leq 10 ^ 5$，$1\\leq mk\\leq 10 ^ 7$，$1\\leq u_i, v_i\\leq n$，$1\\leq w_i\\leq 10 ^ 9$。保证图连通，无自环，无重边。\n\n- 子任务 1（$10$ 分）：$m ^ 2k\\leq 10 ^ 6$。\n- 子任务 2（$20$ 分）：保证每条边至多属于一个简单环。\n- 子任务 3（$20$ 分）：$mk\\leq 10 ^ 6$。\n- 子任务 4（$50$ 分）：无特殊限制。\n\nSource：NFLSPC #6 A by Alex_Wei", "locale": "zh-CN"}}}
{"pid": "P9927", "type": "P", "difficulty": 7, "samples": [["2\n1101\n1 1 1 1 1 1 1 1 1 1\n", "(!1|0)\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["提交答案", "Special Judge"], "title": "[NFLSPC #6] 真理祭坛", "background": "天色已晚，围观的人群散得差不多了。人们可能都没有注意到，还有一个瘦小的身影在向真理祭坛跑去。\n\n「你是哪个领域的科学家？怎么就你一个人？」排险者歪了歪头，看着眼前的小 Y 问道。\n\n「我不是科学家。我只是一个高中生。」\n\n「学生？」排险者很困惑，「那你想问什么？」\n\n「我想知道宇宙的终极规律。」\n\n「既然你只是个学生，你认为我该如何让你理解宇宙的规律呢？」\n\n「啊？」小 Y 似乎感到很惊讶，片刻之后，他的脸上出现了些许失望的神情。「宇宙的真理不应该简洁到每个人都能理解吗……难道不是吗？」\n\n「真理可没这么简单。且不说宇宙，我在此随意给你一些『道理』，你能用简洁的语言描述它吗？」\n\n小 Y 抬起头来，看着排险者用全息投影显示在天空中的几串密密麻麻的零和一，陷入了沉思。", "description": "有 $n$ 个 **命题变项**，记作 $P_0, P_1, \\cdots, P_{n - 1}$，其 **真值** 是一个布尔值，要么为 $0$ 要么为 $1$。\n\n我们称一个 **道理** 是一个输入 $n$ 个布尔值、输出一个布尔值的函数，即一个 $\\{0, 1\\}^n \\to \\{0, 1\\}$ 的映射。\n\n满足特定条件的字符串称为 **合式公式**（Well-Formed Formula，WFF），每个合式公式都对应着唯一一个道理，称为该公式的 **真值表**。具体地：\n\n- 一个命题变项 $P_i$ 是合式公式，它的真值表总是输出其所接受的第 $i$ 个输入值（$n$ 个输入值的编号依次为 $0, 1, \\cdots, n - 1$）。\n- 如果 $k$ 个字符串 $A_1, A_2, \\cdots, A_k$（$k \\geq 1$）都是合式公式，则 $(A_1 \\land A_2 \\land \\cdots \\land A_k)$ 也是合式公式，它的真值表在接受输入 $I$ 时输出的值为 $A_1, A_2, \\cdots, A_k$ 分别的真值表接受 $I$ 时输出的值的最小值。\n- 如果 $k$ 个字符串 $A_1, A_2, \\cdots, A_k$（$k \\geq 1$）都是合式公式，则 $(A_1 \\lor A_2 \\lor \\cdots \\lor A_k)$ 也是合式公式，它的真值表在接受输入 $I$ 时输出的值为 $A_1, A_2, \\cdots, A_k$ 分别的真值表接受 $I$ 时输出的值的最大值。\n- 如果 $A$ 是合式公式，则 $\\lnot A$ 也是合式公式，设 $A$ 的真值表接受输入 $I$ 时输出 $x$，则 $\\lnot A$ 的真值表接受 $I$ 时输出 $1 - x$。\n\n定义一个合式公式的 **大小** 为其所包含的 $\\land$ 和 $\\lor$ 的数量。现给定一个道理，请找到一个合式公式，使得其真值表是该道理，在此前提下让公式的大小尽可能小。", "inputFormat": "**本题为提交答案题**，所有数据 `formula1.in` 至 `formula10.in` 已在附加文件中。\n\n输入的第一行包含一个整数 $n$。\n\n输入的第二行包含一个长度为 $2^n$ 的字符串 $a_{0 \\sim 2^n - 1}$，描述给定的道理：如果对于任意 $0 \\leq i < n$，输入的第 $i$ 个值是 $\\left\\lfloor\\frac{x}{2^i}\\right\\rfloor \\bmod 2$，则道理的输出为 $a_x$。\n\n输入的第三行包含 $10$ 个评分参数，具体用处见「说明/提示」。", "outputFormat": "针对给定的 $10$ 个输入文件，你需要分别提交你的输出文件 `formula1.out` 至 `formula10.out`。\n\n每个输出文件包含一行，表示你给出的合式公式。其中括号用 `()` 表示，命题变项 $P_i$ 用数字 $i$ 表示（由于 $n \\leq 10$，这一定是单个字符），$\\land$ 用 `&` 表示，$\\lor$ 用 `|` 表示，$\\lnot$ 用 `!` 表示。**请不要擅自省略括号。**", "hint": "对于所有数据，$1 \\leq n \\leq 10$。\n\n对于每组数据，我们采用如下方式评分：\n\n- 如果你的输出长度大于 $10^5$，得 $0$ 分。\n- 如果你的输出不是合式公式，得 $0$ 分。\n- 如果你的合式公式的真值表与输入给定的道理不同，得 $0$ 分。\n- 如果上述条件都不满足，设 $s_{1 \\sim 10}$ 为评分参数，$S$ 为你的公式的大小，则得分为 $\\sum_{i = 1}^{10}[S \\leq s_i]$。\n\n每组数据满分 $10$ 分，共 $10$ 组数据，总分 $100$ 分（乘以得分系数前）。**保证存在满分解**。\n\n---\n\n我们提供了工具来测试你的输出。\n\n下载附加文件 `checker.cpp` 并编译得到可执行文件 `checker.exe`（Windows）或 `checker`（Linux），其用法如下：\n\n- 在终端中输入 `checker.exe X`（Windows）或 `./checker X`（Linux），或直接运行后输入 `X` 并换行，可以对第 $X$ 组数据 `formulaX.in/out` 进行测试。\n- 在终端中输入 `checker.exe A B`（Windows）或 `./checker A B`（Linux），或直接运行后输入 `A B` 并换行，可以对输入文件名为 $A$、输出文件名为 $B$ 的数据进行测试。\n- 如果输入不合法或输出有错误，会有相应提示。\n- 如果没有错误，则会给出你的合式公式的大小。\n- 输入文件可以与输入格式的描述完全相符，也可以略去评分参数一行。若 checker 检测到存在评分参数一行，还会给出你的得分。\n\nSource：NFLSPC #6 C by chenxia25", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NFLSPC #6] 真理祭坛", "background": "天色已晚，围观的人群散得差不多了。人们可能都没有注意到，还有一个瘦小的身影在向真理祭坛跑去。\n\n「你是哪个领域的科学家？怎么就你一个人？」排险者歪了歪头，看着眼前的小 Y 问道。\n\n「我不是科学家。我只是一个高中生。」\n\n「学生？」排险者很困惑，「那你想问什么？」\n\n「我想知道宇宙的终极规律。」\n\n「既然你只是个学生，你认为我该如何让你理解宇宙的规律呢？」\n\n「啊？」小 Y 似乎感到很惊讶，片刻之后，他的脸上出现了些许失望的神情。「宇宙的真理不应该简洁到每个人都能理解吗……难道不是吗？」\n\n「真理可没这么简单。且不说宇宙，我在此随意给你一些『道理』，你能用简洁的语言描述它吗？」\n\n小 Y 抬起头来，看着排险者用全息投影显示在天空中的几串密密麻麻的零和一，陷入了沉思。", "description": "有 $n$ 个 **命题变项**，记作 $P_0, P_1, \\cdots, P_{n - 1}$，其 **真值** 是一个布尔值，要么为 $0$ 要么为 $1$。\n\n我们称一个 **道理** 是一个输入 $n$ 个布尔值、输出一个布尔值的函数，即一个 $\\{0, 1\\}^n \\to \\{0, 1\\}$ 的映射。\n\n满足特定条件的字符串称为 **合式公式**（Well-Formed Formula，WFF），每个合式公式都对应着唯一一个道理，称为该公式的 **真值表**。具体地：\n\n- 一个命题变项 $P_i$ 是合式公式，它的真值表总是输出其所接受的第 $i$ 个输入值（$n$ 个输入值的编号依次为 $0, 1, \\cdots, n - 1$）。\n- 如果 $k$ 个字符串 $A_1, A_2, \\cdots, A_k$（$k \\geq 1$）都是合式公式，则 $(A_1 \\land A_2 \\land \\cdots \\land A_k)$ 也是合式公式，它的真值表在接受输入 $I$ 时输出的值为 $A_1, A_2, \\cdots, A_k$ 分别的真值表接受 $I$ 时输出的值的最小值。\n- 如果 $k$ 个字符串 $A_1, A_2, \\cdots, A_k$（$k \\geq 1$）都是合式公式，则 $(A_1 \\lor A_2 \\lor \\cdots \\lor A_k)$ 也是合式公式，它的真值表在接受输入 $I$ 时输出的值为 $A_1, A_2, \\cdots, A_k$ 分别的真值表接受 $I$ 时输出的值的最大值。\n- 如果 $A$ 是合式公式，则 $\\lnot A$ 也是合式公式，设 $A$ 的真值表接受输入 $I$ 时输出 $x$，则 $\\lnot A$ 的真值表接受 $I$ 时输出 $1 - x$。\n\n定义一个合式公式的 **大小** 为其所包含的 $\\land$ 和 $\\lor$ 的数量。现给定一个道理，请找到一个合式公式，使得其真值表是该道理，在此前提下让公式的大小尽可能小。", "inputFormat": "**本题为提交答案题**，所有数据 `formula1.in` 至 `formula10.in` 已在附加文件中。\n\n输入的第一行包含一个整数 $n$。\n\n输入的第二行包含一个长度为 $2^n$ 的字符串 $a_{0 \\sim 2^n - 1}$，描述给定的道理：如果对于任意 $0 \\leq i < n$，输入的第 $i$ 个值是 $\\left\\lfloor\\frac{x}{2^i}\\right\\rfloor \\bmod 2$，则道理的输出为 $a_x$。\n\n输入的第三行包含 $10$ 个评分参数，具体用处见「说明/提示」。", "outputFormat": "针对给定的 $10$ 个输入文件，你需要分别提交你的输出文件 `formula1.out` 至 `formula10.out`。\n\n每个输出文件包含一行，表示你给出的合式公式。其中括号用 `()` 表示，命题变项 $P_i$ 用数字 $i$ 表示（由于 $n \\leq 10$，这一定是单个字符），$\\land$ 用 `&` 表示，$\\lor$ 用 `|` 表示，$\\lnot$ 用 `!` 表示。**请不要擅自省略括号。**", "hint": "对于所有数据，$1 \\leq n \\leq 10$。\n\n对于每组数据，我们采用如下方式评分：\n\n- 如果你的输出长度大于 $10^5$，得 $0$ 分。\n- 如果你的输出不是合式公式，得 $0$ 分。\n- 如果你的合式公式的真值表与输入给定的道理不同，得 $0$ 分。\n- 如果上述条件都不满足，设 $s_{1 \\sim 10}$ 为评分参数，$S$ 为你的公式的大小，则得分为 $\\sum_{i = 1}^{10}[S \\leq s_i]$。\n\n每组数据满分 $10$ 分，共 $10$ 组数据，总分 $100$ 分（乘以得分系数前）。**保证存在满分解**。\n\n---\n\n我们提供了工具来测试你的输出。\n\n下载附加文件 `checker.cpp` 并编译得到可执行文件 `checker.exe`（Windows）或 `checker`（Linux），其用法如下：\n\n- 在终端中输入 `checker.exe X`（Windows）或 `./checker X`（Linux），或直接运行后输入 `X` 并换行，可以对第 $X$ 组数据 `formulaX.in/out` 进行测试。\n- 在终端中输入 `checker.exe A B`（Windows）或 `./checker A B`（Linux），或直接运行后输入 `A B` 并换行，可以对输入文件名为 $A$、输出文件名为 $B$ 的数据进行测试。\n- 如果输入不合法或输出有错误，会有相应提示。\n- 如果没有错误，则会给出你的合式公式的大小。\n- 输入文件可以与输入格式的描述完全相符，也可以略去评分参数一行。若 checker 检测到存在评分参数一行，还会给出你的得分。\n\nSource：NFLSPC #6 C by chenxia25", "locale": "zh-CN"}}}
{"pid": "P9928", "type": "P", "difficulty": 3, "samples": [["4 1\n4 2 1 3\n", "3\n2 3 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["Special Judge", "O2优化"], "title": "[NFLSPC #6] 来点不那么魔怔的题面", "background": "", "description": "给定一个 $1\\sim n$ 的排列 $p$ 和一个整数 $k$，要求找到 $p$ 的一个子序列 $\\{p_{i_1}, p_{i_2}, \\cdots, p_{i_m}\\}$（$1\\le i_1 < i_2 < \\cdots < i_m\\le n$）满足：\n\n- 恰好有 $k$ 个 $j$ 满足 $1\\le j\\le m$ 且 $p_{i_j}$ 是 $p_{i_1}, p_{i_2}, \\cdots, p_{i_m}$ 中从小往大数第 $j$ 个。\n\n如果有多解，输出任意一组解即可。如果不存在合法的子序列，输出 $-1$。", "inputFormat": "第一行两个整数 $n, k$。\n\n接下来一行 $n$ 个整数 $p_1, p_2, \\cdots, p_n$ 表示给定的排列。", "outputFormat": "如果无解，输出一行一个整数 $-1$。\n\n否则第一行输出一个整数 $m$ 表示子序列的长度。你需要保证 $1\\le m\\le n$。\n\n接下来一行输出 $m$ 个整数 $i_1, i_2, \\cdots, i_m$ 表示子序列的下标。你需要保证 $1\\le i_j\\le n$ 且 $i_j < i_{j+1}$（$1\\le j < m$）。", "hint": "对于所有数据，$1\\le n\\le 10 ^ 5$，$1\\le k\\le n$，$p_1, p_2, \\cdots, p_n$ 为 $1\\sim n$ 的排列。\n\n- 子任务 1（$10$ 分）：$n\\leq 20$。\n- 子任务 2（$10$ 分）：$k = 2$。\n- 子任务 3（$30$ 分）：$k = 3$。\n- 子任务 4（$30$ 分）：$n\\leq 10 ^ 3$。\n- 子任务 5（$20$ 分）：无特殊限制。\n\nSource：NFLSPC #6 D by tzc_wk", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NFLSPC #6] 来点不那么魔怔的题面", "background": "", "description": "给定一个 $1\\sim n$ 的排列 $p$ 和一个整数 $k$，要求找到 $p$ 的一个子序列 $\\{p_{i_1}, p_{i_2}, \\cdots, p_{i_m}\\}$（$1\\le i_1 < i_2 < \\cdots < i_m\\le n$）满足：\n\n- 恰好有 $k$ 个 $j$ 满足 $1\\le j\\le m$ 且 $p_{i_j}$ 是 $p_{i_1}, p_{i_2}, \\cdots, p_{i_m}$ 中从小往大数第 $j$ 个。\n\n如果有多解，输出任意一组解即可。如果不存在合法的子序列，输出 $-1$。", "inputFormat": "第一行两个整数 $n, k$。\n\n接下来一行 $n$ 个整数 $p_1, p_2, \\cdots, p_n$ 表示给定的排列。", "outputFormat": "如果无解，输出一行一个整数 $-1$。\n\n否则第一行输出一个整数 $m$ 表示子序列的长度。你需要保证 $1\\le m\\le n$。\n\n接下来一行输出 $m$ 个整数 $i_1, i_2, \\cdots, i_m$ 表示子序列的下标。你需要保证 $1\\le i_j\\le n$ 且 $i_j < i_{j+1}$（$1\\le j < m$）。", "hint": "对于所有数据，$1\\le n\\le 10 ^ 5$，$1\\le k\\le n$，$p_1, p_2, \\cdots, p_n$ 为 $1\\sim n$ 的排列。\n\n- 子任务 1（$10$ 分）：$n\\leq 20$。\n- 子任务 2（$10$ 分）：$k = 2$。\n- 子任务 3（$30$ 分）：$k = 3$。\n- 子任务 4（$30$ 分）：$n\\leq 10 ^ 3$。\n- 子任务 5（$20$ 分）：无特殊限制。\n\nSource：NFLSPC #6 D by tzc_wk", "locale": "zh-CN"}}}
{"pid": "P9929", "type": "P", "difficulty": 5, "samples": [["7001 4001 7 5\n1155511307999246176590006\n", "6\n"], ["11083610 7305110 52 32\n4578384821991465584924042474394616310820101790\n", "39\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化"], "title": "[NFLSPC #6] 挑战大数因子分解", "background": "`NFLSPC #6` 在即，来不了现场的 *SolarPea* 要把自己的题目的 std 发给能去现场的 *PolarSea*。\n\n为了防止有选手窃听他们的通信以获得 std，他们打算使用一个公钥加密算法来确保通信的安全性。\n\n于是 *SolarPea* 使用了他在知乎上看到的有 “最大的加解密速度和安全性” 的算法，这个算法的安全性 “依赖于大数因子分解难题”：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bc5hi2d2.png)\n\n你是一名拥有 `factorization oracle` 的参赛选手，并且你已经获得了公钥和明文。请你利用手上的 `factorization oracle`，破解出 std 吧。", "description": "由于图片可能看不清，我们重新描述这个加密算法：\n\n- 假设 *SolarPea* 要给 *PolarSea* 发一个消息 $M'$，那么他们会进行如下的操作。\n- *PolarSea* 首先生成五个大整数 $P, S_4, S_6, S_7, S_1$，使得 $P < S_6 < S_4P$ 且 $S_5 = S_4P + S_6$ 且 $(S_6\\bmod P) ^ 3 < S_4 ^ 3 < S_1 ^ 3 < (S_1 + 1) ^ 3 < S_7 ^ 3 < P$，并计算 $S_3 = S_4P + S_5$。\n- 然后 *PolarSea* 将 $S_3, S_5, S_7, S_1$ 发给 *SolarPea*。\n- *SolarPea* 拿到了 *PolarSea* 给他发的四个数。首先，他需要构造一个 $M$ 使得 $S_1 < M < S_7$，并且和 *PolarSea* 商量好一个通过 $M$ 算出 $M'$ 的方法（例如若 $M'$ 为比较小的正整数，则可以令 $M = M' + S_1$），这个方法是不保密的，所以拿到 $M$ 就相当于拿到 $M'$ 了，所以你可以不用关心 $M'$ 而是只关心 $M$。\n- *SolarPea* 生成了两个满足 $(S_3 - S_5) ^ 3 < r < w$ 的数 $w, r$，并计算 $C = (S_3 - S_5) ^ 3w + MS_5 + r(S_3 - S_5)$，然后将 $C$ 发给 *PolarSea*。\n- *PolarSea* 只需计算 $\\frac{C \\operatorname{\\bmod} P}{(2S_5 - S_3) \\operatorname{\\bmod} P}$ 即可获得 $M$。\n\n现在你截获了 *PolarSea* 和 *SolarPea* 之间的所有通信（即 $S_3, S_5, S_7, S_1, C$），请你利用已知的信息破解出 $M$。", "inputFormat": "第一行，读入四个整数 $S_3, S_5, S_7, S_1$，表示公钥。\n\n第二行，读入一个整数 $C$，表示密文。", "outputFormat": "输出一行，包含一个值在 $S_1 < M < S_7$ 的整数 $M$，表示破解的明文。可以证明在给定限制下 $M$ 唯一。", "hint": "### 样例 1 解释\n\n生成的 $P=1000$，$S_4=3$，$S_6=1001$，$S_7=7$，$S_1=5$。计算出的 $S_5=4001$，$S_3=7001$。\n\n密文 $M=6$。加密时选取的 $w=42796713439376$，$r=15045364725522$，加密结果 $C=1155511307999246176590006$。\n\n当然，这次加密是很弱的，因为 $6$ 是 $5$ 和 $7$ 中间的唯一整数。\n\n### 数据范围与约定\n\n对于所有数据， $P < 10 ^ {500}$，$C < P^{10}$。\n\n- 子任务 1（$20$ 分）：$P < 10 ^ 6$。\n- 子任务 2（$20$ 分）：$P < 10 ^ {18}$。\n- 子任务 3（$20$ 分）：$P$ 为质数。\n- 子任务 4（$20$ 分）：所有数均为随机生成。\n- 子任务 5（$20$ 分）：无特殊限制。\n\nSource：NFLSPC #6 E by asmend", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NFLSPC #6] 挑战大数因子分解", "background": "`NFLSPC #6` 在即，来不了现场的 *SolarPea* 要把自己的题目的 std 发给能去现场的 *PolarSea*。\n\n为了防止有选手窃听他们的通信以获得 std，他们打算使用一个公钥加密算法来确保通信的安全性。\n\n于是 *SolarPea* 使用了他在知乎上看到的有 “最大的加解密速度和安全性” 的算法，这个算法的安全性 “依赖于大数因子分解难题”：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bc5hi2d2.png)\n\n你是一名拥有 `factorization oracle` 的参赛选手，并且你已经获得了公钥和明文。请你利用手上的 `factorization oracle`，破解出 std 吧。", "description": "由于图片可能看不清，我们重新描述这个加密算法：\n\n- 假设 *SolarPea* 要给 *PolarSea* 发一个消息 $M'$，那么他们会进行如下的操作。\n- *PolarSea* 首先生成五个大整数 $P, S_4, S_6, S_7, S_1$，使得 $P < S_6 < S_4P$ 且 $S_5 = S_4P + S_6$ 且 $(S_6\\bmod P) ^ 3 < S_4 ^ 3 < S_1 ^ 3 < (S_1 + 1) ^ 3 < S_7 ^ 3 < P$，并计算 $S_3 = S_4P + S_5$。\n- 然后 *PolarSea* 将 $S_3, S_5, S_7, S_1$ 发给 *SolarPea*。\n- *SolarPea* 拿到了 *PolarSea* 给他发的四个数。首先，他需要构造一个 $M$ 使得 $S_1 < M < S_7$，并且和 *PolarSea* 商量好一个通过 $M$ 算出 $M'$ 的方法（例如若 $M'$ 为比较小的正整数，则可以令 $M = M' + S_1$），这个方法是不保密的，所以拿到 $M$ 就相当于拿到 $M'$ 了，所以你可以不用关心 $M'$ 而是只关心 $M$。\n- *SolarPea* 生成了两个满足 $(S_3 - S_5) ^ 3 < r < w$ 的数 $w, r$，并计算 $C = (S_3 - S_5) ^ 3w + MS_5 + r(S_3 - S_5)$，然后将 $C$ 发给 *PolarSea*。\n- *PolarSea* 只需计算 $\\frac{C \\operatorname{\\bmod} P}{(2S_5 - S_3) \\operatorname{\\bmod} P}$ 即可获得 $M$。\n\n现在你截获了 *PolarSea* 和 *SolarPea* 之间的所有通信（即 $S_3, S_5, S_7, S_1, C$），请你利用已知的信息破解出 $M$。", "inputFormat": "第一行，读入四个整数 $S_3, S_5, S_7, S_1$，表示公钥。\n\n第二行，读入一个整数 $C$，表示密文。", "outputFormat": "输出一行，包含一个值在 $S_1 < M < S_7$ 的整数 $M$，表示破解的明文。可以证明在给定限制下 $M$ 唯一。", "hint": "### 样例 1 解释\n\n生成的 $P=1000$，$S_4=3$，$S_6=1001$，$S_7=7$，$S_1=5$。计算出的 $S_5=4001$，$S_3=7001$。\n\n密文 $M=6$。加密时选取的 $w=42796713439376$，$r=15045364725522$，加密结果 $C=1155511307999246176590006$。\n\n当然，这次加密是很弱的，因为 $6$ 是 $5$ 和 $7$ 中间的唯一整数。\n\n### 数据范围与约定\n\n对于所有数据， $P < 10 ^ {500}$，$C < P^{10}$。\n\n- 子任务 1（$20$ 分）：$P < 10 ^ 6$。\n- 子任务 2（$20$ 分）：$P < 10 ^ {18}$。\n- 子任务 3（$20$ 分）：$P$ 为质数。\n- 子任务 4（$20$ 分）：所有数均为随机生成。\n- 子任务 5（$20$ 分）：无特殊限制。\n\nSource：NFLSPC #6 E by asmend", "locale": "zh-CN"}}}
{"pid": "P9930", "type": "P", "difficulty": 3, "samples": [["1\n0 1\n", "11\n"]], "limits": {"time": [1000, 1000], "memory": [1048576, 1048576]}, "tags": ["O2优化"], "title": "[NFLSPC #6] 1064 病毒", "background": "你的电脑中了 1064 病毒，现在电脑里储存的所有数字都开始坍缩了！\n\n为了更彻底地毁灭你的电脑，对于十进制下的 $n$ 位数，邪恶的 1064 病毒会将它按照某种规则迭代至少 $n + 1$ 次，以确保你无法还原。\n\n面对 1064 病毒，你手足无措。但是作为 OIer 的你想知道道道道道道道道道道道到到到到到到到到\n\n", "description": "定义数字串为只含有数码 $0\\sim 9$ 的串，奇数数码为 $1, 3, 5, 7, 9$，偶数数码为 $0, 2, 4, 6, 8$。\n\n对数字串 $x$，设其中奇数数码，偶数数码和总数码个数分别为 $a, b, c$，则 $a + b = c = |x|$。定义 $g(x)$ 为将 $a, b, c$ 依次写下得到的数字串，**不忽略前导零**。例如 $g(\\texttt{0}) = \\texttt {011}$，$g(\\texttt{1064}) = \\texttt{134}$，$g(\\texttt {822}) = \\texttt {033}$，$g(\\texttt{1092515503}) = \\texttt{7310}$。\n\n设 $f_k(x)$ 表示将 **数字** $x$ **忽略前导零** 写成数字串 $x'$ 后，将 $g(x')$ 迭代 $k$ 次得到的数字串对应的数字，即设 $x ^ * = g(g(\\cdots g(x')))$（共有 $k$ 个 $g$），则 $f_k(x)$ 为将 $x ^ *$ 写成数字后的结果。\n\n给定 $n, k$（**保证 $n < k$**），求 $\\sum_{i = 0} ^ {10 ^ n - 1} f_k(i)$。\n\n多组数据。", "inputFormat": "第一行一个整数 $T$。\n\n接下来 $T$ 行，每行两个整数 $n, k$ 表示一组数据。", "outputFormat": "对每组数据，输出一行一个整数表示答案。", "hint": "对于所有数据，$1\\leq T\\leq 60$，$0\\leq n < k \\leq 10 ^ 5$，$\\sum k\\leq 10 ^ 5$。\n\n- 测试点 1（$30$ 分）：$n\\leq 5$，$k\\leq 15$。  \n- 测试点 2（$70$ 分）：无特殊限制。\n\nSource：NFLSPC #6 F by Alex_Wei", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NFLSPC #6] 1064 病毒", "background": "你的电脑中了 1064 病毒，现在电脑里储存的所有数字都开始坍缩了！\n\n为了更彻底地毁灭你的电脑，对于十进制下的 $n$ 位数，邪恶的 1064 病毒会将它按照某种规则迭代至少 $n + 1$ 次，以确保你无法还原。\n\n面对 1064 病毒，你手足无措。但是作为 OIer 的你想知道道道道道道道道道道道到到到到到到到到\n\n", "description": "定义数字串为只含有数码 $0\\sim 9$ 的串，奇数数码为 $1, 3, 5, 7, 9$，偶数数码为 $0, 2, 4, 6, 8$。\n\n对数字串 $x$，设其中奇数数码，偶数数码和总数码个数分别为 $a, b, c$，则 $a + b = c = |x|$。定义 $g(x)$ 为将 $a, b, c$ 依次写下得到的数字串，**不忽略前导零**。例如 $g(\\texttt{0}) = \\texttt {011}$，$g(\\texttt{1064}) = \\texttt{134}$，$g(\\texttt {822}) = \\texttt {033}$，$g(\\texttt{1092515503}) = \\texttt{7310}$。\n\n设 $f_k(x)$ 表示将 **数字** $x$ **忽略前导零** 写成数字串 $x'$ 后，将 $g(x')$ 迭代 $k$ 次得到的数字串对应的数字，即设 $x ^ * = g(g(\\cdots g(x')))$（共有 $k$ 个 $g$），则 $f_k(x)$ 为将 $x ^ *$ 写成数字后的结果。\n\n给定 $n, k$（**保证 $n < k$**），求 $\\sum_{i = 0} ^ {10 ^ n - 1} f_k(i)$。\n\n多组数据。", "inputFormat": "第一行一个整数 $T$。\n\n接下来 $T$ 行，每行两个整数 $n, k$ 表示一组数据。", "outputFormat": "对每组数据，输出一行一个整数表示答案。", "hint": "对于所有数据，$1\\leq T\\leq 60$，$0\\leq n < k \\leq 10 ^ 5$，$\\sum k\\leq 10 ^ 5$。\n\n- 测试点 1（$30$ 分）：$n\\leq 5$，$k\\leq 15$。  \n- 测试点 2（$70$ 分）：无特殊限制。\n\nSource：NFLSPC #6 F by Alex_Wei", "locale": "zh-CN"}}}
{"pid": "P9931", "type": "P", "difficulty": 6, "samples": [["3\n5\nI 1 7 1 3\nG 4\nA 2\nG 2\nE\n6\nA 2\nI 2 3 5 1\nE\nG 4\nA 1\nE\n4\nA 1\nG 1\nE\nE\n", "No\n2\nYes\n3\nNo\n@Turing ?\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化", "动态树 LCT"], "title": "[NFLSPC #6] 挑战停机问题", "background": "作为新时代的 OIer/XCPCer，你已经不满足于挑战 NPC 问题了。你想挑战数学的不可判定性——图灵停机问题。", "description": "图灵给了你一个程序。程序开始运行之初，有且仅有一个变量 $A$，初始值为 $0$。程序共有 $n$ 行，行号为 $1 \\sim n$，每行是如下几种形式之一：\n\n- `A a`：令 $A \\gets A + a$，然后执行下一行。\n- `G x`：执行第 $x$ 行。\n- `I l r x y`：如果 $A \\in [l, r]$ 则执行第 $x$ 行，否则执行第 $y$ 行。\n- `E`：直接结束程序。\n\n保证最后一行是 `E`。\n\n图灵希望你判断这个程序从第一行开始执行会不会结束。为了进一步检验你到底是不是真的会判定停机问题（还是装的？），图灵还要求你给出 $A$ 最终的值，如果程序不会结束且不存在一个时刻使得在其以后 $A$ 不再变化，则输出 `@Turing ?`。", "inputFormat": "本题多测。第一行一个正整数 $T$ 表示数据组数，对于每组数据：\n\n- 第一行一个整数 $n$，表示程序的行数。\n- 接下来 $n$ 行，描述程序。", "outputFormat": "对于每个询问，输出两行：\n\n- 第一行一个字符串 `Yes` 或 `No`，表示程序是否会结束。\n- 第二行一个整数 $A_{0}$ 或字符串 `@Turing ?`，表示 $A$ 最终的值。", "hint": "对于所有数据，$1 \\leq T \\leq 1000$，$1 \\leq n, \\sum n \\leq 10^5$，$1 \\leq a \\leq 10^9$，$0 \\leq l \\leq r \\leq 10^9$，$1 \\leq x, y \\leq n$。保证输入涉及到的所有数字都是整数。\n\n- 子任务 1（15 分）：不存在 `I` 类语句。\n- 子任务 2（20 分）：$r \\leq 100$。\n- 子任务 3（40 分）：$\\sum \\max r \\leq 10^5$。\n- 子任务 4（25 分）：无特殊限制。\n\nSource：NFLSPC #6 G by chenxia25", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NFLSPC #6] 挑战停机问题", "background": "作为新时代的 OIer/XCPCer，你已经不满足于挑战 NPC 问题了。你想挑战数学的不可判定性——图灵停机问题。", "description": "图灵给了你一个程序。程序开始运行之初，有且仅有一个变量 $A$，初始值为 $0$。程序共有 $n$ 行，行号为 $1 \\sim n$，每行是如下几种形式之一：\n\n- `A a`：令 $A \\gets A + a$，然后执行下一行。\n- `G x`：执行第 $x$ 行。\n- `I l r x y`：如果 $A \\in [l, r]$ 则执行第 $x$ 行，否则执行第 $y$ 行。\n- `E`：直接结束程序。\n\n保证最后一行是 `E`。\n\n图灵希望你判断这个程序从第一行开始执行会不会结束。为了进一步检验你到底是不是真的会判定停机问题（还是装的？），图灵还要求你给出 $A$ 最终的值，如果程序不会结束且不存在一个时刻使得在其以后 $A$ 不再变化，则输出 `@Turing ?`。", "inputFormat": "本题多测。第一行一个正整数 $T$ 表示数据组数，对于每组数据：\n\n- 第一行一个整数 $n$，表示程序的行数。\n- 接下来 $n$ 行，描述程序。", "outputFormat": "对于每个询问，输出两行：\n\n- 第一行一个字符串 `Yes` 或 `No`，表示程序是否会结束。\n- 第二行一个整数 $A_{0}$ 或字符串 `@Turing ?`，表示 $A$ 最终的值。", "hint": "对于所有数据，$1 \\leq T \\leq 1000$，$1 \\leq n, \\sum n \\leq 10^5$，$1 \\leq a \\leq 10^9$，$0 \\leq l \\leq r \\leq 10^9$，$1 \\leq x, y \\leq n$。保证输入涉及到的所有数字都是整数。\n\n- 子任务 1（15 分）：不存在 `I` 类语句。\n- 子任务 2（20 分）：$r \\leq 100$。\n- 子任务 3（40 分）：$\\sum \\max r \\leq 10^5$。\n- 子任务 4（25 分）：无特殊限制。\n\nSource：NFLSPC #6 G by chenxia25", "locale": "zh-CN"}}}
{"pid": "P9932", "type": "P", "difficulty": 7, "samples": [["5 25\n-1 0 1 1 0\n0 1 0 2 2\n0 0\n0 1\n0 2\n0 3\n0 4\n1 0\n1 1\n1 2\n1 3\n1 4\n2 0\n2 1\n2 2\n2 3\n2 4\n3 0\n3 1\n3 2\n3 3\n3 4\n4 0\n4 1\n4 2\n4 3\n4 4\n", "0\n-1\n-1\n-1\n-1\n0\n1\n-1\n-1\n-1\n2\n1\n-1\n-1\n-1\n0\n1\n3\n-1\n-1\n0\n-1\n4\n-1\n-1\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["交互题", "Special Judge", "O2优化"], "title": "[NFLSPC #6] 树", "background": "# 请不要使用 C++14 (GCC 9) 提交", "description": "给定一棵 $n$ 个点的树，标号从 $0$ 到 $n-1$，每个点有一个 $0$ 到 $n-1$ 之间的颜色。\n\n$q$ 次询问，每次查询 $x$ 的祖先中颜色为 $c$ 的点中离 $x$ 最近的一个（也就是深度最大的一个）的编号，**强制在线**。\n\n**点的颜色在数据生成完之后进行了一次随机打乱（也就是作用了一个均匀随机的排列）**。", "inputFormat": "**由于本题输入量较大，我们采用交互题的方式进行评测**。\n\n你不需要也不应该实现主函数 `main`，你需要实现以下两个函数：\n\n```\nextern \"C\" void init(int n,vector<int> fa,vector<int> col)\n```\n\n* $n$：节点的个数。\n* $fa$：长度为 $n$ 的数组，$fa_i$ 表示节点 $i$ 的父亲。特别地，$fa_0=-1$。\n* $col$：长度为 $n$ 的数组，$col_i$ 表示节点 $i$ 的颜色。再次强调：**$col$ 在数据生成完之后进行了一次随机打乱**。\n* 这个函数会被调用恰好一次，它给了你树的信息。你可以在这次函数调用的时候计算一些需要用到的信息。\n\n```\nextern \"C\"  int query(int x,int c)\n```\n\n* $x$：查询的节点编号。\n* $c$：查询的颜色。\n* 你应该返回 $x$ 的祖先中离 $x$ 最近的颜色为 $c$ 的节点的编号。若不存在这样的节点，返回 `-1`。\n* 这个函数恰好被调用 $q$ 次。\n* 每次调用函数时你并不知道以后的询问，也就是说，询问是 **强制在线** 的。\n\n\n使用下发 grader 测试代码时，输入格式为：\n\n- 第一行输入两个数 $n,q$。\n- 第二行输入 $n$ 个数 $fa_0,\\cdots,fa_{n-1}$。\n- 第三行输入 $n$ 个数 $col_0,\\cdots,col_{n-1}$。\n- 接下来 $q$ 行，每行两个数 $x,c$，表示一组询问。", "outputFormat": "测试代码时，输出格式为：\n\n- $q$ 行，每行一个数，表示答案。\n- 接下来，下发 grader 会输出你的耗时（注意这里并不会检查正确性）。\n\n注意：这里给出的输入输出格式为下发 grader 的输入输出格式，仅为测试使用，**你实现的函数不应该对标准输入输出流进行任何操作**。", "hint": "对于所有数据，$2\\leq n\\leq 2\\times 10^6$，$q=5n\\leq 10^7$，$-1\\leq fa_i<i$，$0\\leq col_i<n$，$fa_0=-1$ 且对任意 $1\\leq i < n$，$fa_i\\geq 0$。\n\n- 子任务 1（$5$ 分）：$n\\leq 1000$。\n- 子任务 2（$20$ 分）：$n\\leq 200000$。\n- 子任务 3（$30$ 分）：$fa_i=i-1$。\n- 子任务 4（$45$ 分）：无特殊限制。\n\n每个子任务评分方式为子任务内所有点的得分取最小值。交互库运行时长不超过 600ms，消耗空间不超过 140MB。\n\n**本题在 OJ 上显示的时限不是真正的时限**。若你的代码没有在规定的时间和空间内正常运行并正确回答所有询问，该测试点获得 0 分。若你实现的函数运行时间不小于 2400ms，你将获得 `Time Limit Exceeded`（实际测试时会通过让 grader 死循环来实现这一点）。否则若你实现的函数共运行了 $x$（$x<2400$） 毫秒，你获得的分数为：\n- $x\\leq 1200$，返回 `Accepted`, 获得该测试点全部分数。\n- $1200<x<2400$，返回 `Partially Correct`, 获得该测试点 $(\\frac {2400 - x} {1200}) ^ 2$ 倍的分数。\n\n**测试点信息上显示的不是真正的耗时，SPJ 详细信息里显示的才是你实现的部分的耗时**。\n\nSource：NFLSPC #6 H by asmend", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NFLSPC #6] 树", "background": "# 请不要使用 C++14 (GCC 9) 提交", "description": "给定一棵 $n$ 个点的树，标号从 $0$ 到 $n-1$，每个点有一个 $0$ 到 $n-1$ 之间的颜色。\n\n$q$ 次询问，每次查询 $x$ 的祖先中颜色为 $c$ 的点中离 $x$ 最近的一个（也就是深度最大的一个）的编号，**强制在线**。\n\n**点的颜色在数据生成完之后进行了一次随机打乱（也就是作用了一个均匀随机的排列）**。", "inputFormat": "**由于本题输入量较大，我们采用交互题的方式进行评测**。\n\n你不需要也不应该实现主函数 `main`，你需要实现以下两个函数：\n\n```\nextern \"C\" void init(int n,vector<int> fa,vector<int> col)\n```\n\n* $n$：节点的个数。\n* $fa$：长度为 $n$ 的数组，$fa_i$ 表示节点 $i$ 的父亲。特别地，$fa_0=-1$。\n* $col$：长度为 $n$ 的数组，$col_i$ 表示节点 $i$ 的颜色。再次强调：**$col$ 在数据生成完之后进行了一次随机打乱**。\n* 这个函数会被调用恰好一次，它给了你树的信息。你可以在这次函数调用的时候计算一些需要用到的信息。\n\n```\nextern \"C\"  int query(int x,int c)\n```\n\n* $x$：查询的节点编号。\n* $c$：查询的颜色。\n* 你应该返回 $x$ 的祖先中离 $x$ 最近的颜色为 $c$ 的节点的编号。若不存在这样的节点，返回 `-1`。\n* 这个函数恰好被调用 $q$ 次。\n* 每次调用函数时你并不知道以后的询问，也就是说，询问是 **强制在线** 的。\n\n\n使用下发 grader 测试代码时，输入格式为：\n\n- 第一行输入两个数 $n,q$。\n- 第二行输入 $n$ 个数 $fa_0,\\cdots,fa_{n-1}$。\n- 第三行输入 $n$ 个数 $col_0,\\cdots,col_{n-1}$。\n- 接下来 $q$ 行，每行两个数 $x,c$，表示一组询问。", "outputFormat": "测试代码时，输出格式为：\n\n- $q$ 行，每行一个数，表示答案。\n- 接下来，下发 grader 会输出你的耗时（注意这里并不会检查正确性）。\n\n注意：这里给出的输入输出格式为下发 grader 的输入输出格式，仅为测试使用，**你实现的函数不应该对标准输入输出流进行任何操作**。", "hint": "对于所有数据，$2\\leq n\\leq 2\\times 10^6$，$q=5n\\leq 10^7$，$-1\\leq fa_i<i$，$0\\leq col_i<n$，$fa_0=-1$ 且对任意 $1\\leq i < n$，$fa_i\\geq 0$。\n\n- 子任务 1（$5$ 分）：$n\\leq 1000$。\n- 子任务 2（$20$ 分）：$n\\leq 200000$。\n- 子任务 3（$30$ 分）：$fa_i=i-1$。\n- 子任务 4（$45$ 分）：无特殊限制。\n\n每个子任务评分方式为子任务内所有点的得分取最小值。交互库运行时长不超过 600ms，消耗空间不超过 140MB。\n\n**本题在 OJ 上显示的时限不是真正的时限**。若你的代码没有在规定的时间和空间内正常运行并正确回答所有询问，该测试点获得 0 分。若你实现的函数运行时间不小于 2400ms，你将获得 `Time Limit Exceeded`（实际测试时会通过让 grader 死循环来实现这一点）。否则若你实现的函数共运行了 $x$（$x<2400$） 毫秒，你获得的分数为：\n- $x\\leq 1200$，返回 `Accepted`, 获得该测试点全部分数。\n- $1200<x<2400$，返回 `Partially Correct`, 获得该测试点 $(\\frac {2400 - x} {1200}) ^ 2$ 倍的分数。\n\n**测试点信息上显示的不是真正的耗时，SPJ 详细信息里显示的才是你实现的部分的耗时**。\n\nSource：NFLSPC #6 H by asmend", "locale": "zh-CN"}}}
{"pid": "P9933", "type": "P", "difficulty": 6, "samples": [["1\n3 30 8\n0 2 1\n6 5 2\n25 4 4\n1\n5\n9\n10\n11\n12\n13\n14\n", "0\n8\n16\n19\n23\n27\n31\n36\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["O2优化"], "title": "[NFLSPC #6] 9.pop_book();", "background": "*Alek 岁*在操场上跑圈。他看到有人超过他，很不爽。于是他采取了以下策略：", "description": "在长度为 $m$ 的环形操场上有 $n$ 个人，第 $i$ 个人在 $t_i$ 时刻从位置 $p_i$ 出发以 $v_i$ 单位长度每秒的速度移动。现在 $0$ 时刻 *Alek 岁*在位置 $0$ 处，速度为 $0$，会跟着经过他的速度最快的人移动。$q$ 次询问 $T_i$ 时刻 *Alek 岁*的移动距离。可以证明这是一个整数。\n\n注：从位置 $0$ 出发逆时针方向 $x$（$0\\leq x < m$）单位长度的位置称为位置 $x$。所有人的运动方向都是逆时针。\n\n多组数据。", "inputFormat": "第一行一个整数 $T$ 表示数据组数。对于每组数据：\n\n- 第一行三个整数 $n, m, q$，分别表示人数，操场长度和询问个数。\n- 接下来 $n$ 行，每行三个整数 $p_i, v_i, t_i$，分别表示第 $i$ 个人出发时的位置，移动速度（单位长度每秒）和出发时间。\n- 接下来 $q$ 行，每行一个整数 $T_i$ 表示一次询问。", "outputFormat": "对于每个询问，输出一行一个整数表示答案。", "hint": "对于所有数据，$1\\leq T\\leq 10 ^ 3$，$1\\leq n, \\sum n\\leq 5\\times 10 ^ 5$，$1\\leq m, q, \\sum q \\leq 10 ^ 6$，$1\\leq v_i, t_i, T_i\\leq 10 ^ 9$，$0\\leq p_i < m$。保证 $t_i$ 单调不降，$T_i$ 单调递增。\n\n- 子任务 1（$10$ 分）：$n\\leq 5$。\n- 子任务 2（$10$ 分）：$n\\leq 50$。\n- 子任务 3（$20$ 分）：$n\\leq 500$。\n- 子任务 4（$20$ 分）：$n\\leq 5\\times 10 ^ 3$。\n- 子任务 5（$20$ 分）：$n\\leq 5\\times 10 ^ 4$。\n- 子任务 6（$20$ 分）：无特殊限制。\n\n**请注意，子任务并没有保证 $\\sum q$ 的数量级**。\n\n本题 IO 量较大，建议使用 `scanf/printf` 或关闭流同步的 `cin/cout` 或快速读入和快速输出。\n\nSource：NFLSPC #6 I by Alex_Wei", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NFLSPC #6] 9.pop_book();", "background": "*Alek 岁*在操场上跑圈。他看到有人超过他，很不爽。于是他采取了以下策略：", "description": "在长度为 $m$ 的环形操场上有 $n$ 个人，第 $i$ 个人在 $t_i$ 时刻从位置 $p_i$ 出发以 $v_i$ 单位长度每秒的速度移动。现在 $0$ 时刻 *Alek 岁*在位置 $0$ 处，速度为 $0$，会跟着经过他的速度最快的人移动。$q$ 次询问 $T_i$ 时刻 *Alek 岁*的移动距离。可以证明这是一个整数。\n\n注：从位置 $0$ 出发逆时针方向 $x$（$0\\leq x < m$）单位长度的位置称为位置 $x$。所有人的运动方向都是逆时针。\n\n多组数据。", "inputFormat": "第一行一个整数 $T$ 表示数据组数。对于每组数据：\n\n- 第一行三个整数 $n, m, q$，分别表示人数，操场长度和询问个数。\n- 接下来 $n$ 行，每行三个整数 $p_i, v_i, t_i$，分别表示第 $i$ 个人出发时的位置，移动速度（单位长度每秒）和出发时间。\n- 接下来 $q$ 行，每行一个整数 $T_i$ 表示一次询问。", "outputFormat": "对于每个询问，输出一行一个整数表示答案。", "hint": "对于所有数据，$1\\leq T\\leq 10 ^ 3$，$1\\leq n, \\sum n\\leq 5\\times 10 ^ 5$，$1\\leq m, q, \\sum q \\leq 10 ^ 6$，$1\\leq v_i, t_i, T_i\\leq 10 ^ 9$，$0\\leq p_i < m$。保证 $t_i$ 单调不降，$T_i$ 单调递增。\n\n- 子任务 1（$10$ 分）：$n\\leq 5$。\n- 子任务 2（$10$ 分）：$n\\leq 50$。\n- 子任务 3（$20$ 分）：$n\\leq 500$。\n- 子任务 4（$20$ 分）：$n\\leq 5\\times 10 ^ 3$。\n- 子任务 5（$20$ 分）：$n\\leq 5\\times 10 ^ 4$。\n- 子任务 6（$20$ 分）：无特殊限制。\n\n**请注意，子任务并没有保证 $\\sum q$ 的数量级**。\n\n本题 IO 量较大，建议使用 `scanf/printf` 或关闭流同步的 `cin/cout` 或快速读入和快速输出。\n\nSource：NFLSPC #6 I by Alex_Wei", "locale": "zh-CN"}}}
{"pid": "P9934", "type": "P", "difficulty": 5, "samples": [["3\nN Z H\nQ N H\nQ Z N\n", "1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["字符串", "O2优化", "哈希 hashing", "字典树 Trie"], "title": "[NFLSPC #6] 绝不能忘记的事……", "background": "> 那件事…… 绝对不能忘记！", "description": "你在电脑内记录了一条绝对不能忘记的事。但是，因为 1064 病毒的入侵，它被电脑忘记了。更可怕的是，1064 病毒似乎拥有某种跨物种传播的能力，导致你也忘记了这件事。\n\n万幸，在 1064 病毒让你和你的电脑忘记这件事之前，你及时将这件事的记录复制了 $n$ 份。但是，由于你和你的电脑在执行这件艰巨的任务的过程中受到 1064 病毒的影响忘记了很多可以忘记的事，所以你进行的操作有点奇怪。\n\n- 首先，这件事的记录是一个长度未知（因为你已经忘记了它的长度）的字符串，称作 **记录串**。对于一份复制，你将记录串切成了三段非空的字符串 **片段**。**不同复制的场合，切割的方案不一定相同**。你暂且将这三份 **片段** 依次称作 **前面**，**中间** 和 **后面**。\n- 因为电脑忘记了很多可以忘记的事，所以某些复制中的某些片段可能被忘记了。具体而言，前面有可能被替换为 `QIANMIANWANGLE`，中间有可能被替换为 `ZHONGJIANWANGLE`，后面有可能被替换为 `HOUMIANWANGLE`；在发生替换的场合，表示电脑 **完全忘记** 了这一段片段；否则，表示电脑 **完全记得** 该片段。\n- 你终于想起了一件绝不能忘记的事：那就是那绝不能忘记的记录串中，**恰出现了一次** `NFLSPC#6QIDONG` 作为连续子串。除此之外，记录串中的所有其它字符都是 **小写英文字符**。并且，因为你和你的电脑始终记得这件事有多么重要，所以你在划分的时候，无意中让某一个片段恰好为 `NFLSPC#6QIDONG`；你的电脑也在每一份记录中忠实地记得这一段片段。\n- 于是，你的电脑最终还记得的东西，就是：$n$ 份复制，每份复制由三段非空字符串构成，依次表示这份复制的三份片段；其中恰有一段为 `NFLSPC#6QIDONG`，另外两段要么是一串仅由小写英文字母构成的非空串，要么是对应的前面/中间/后面忘了。\n- 邪恶的 1064 病毒不肯罢休，它篡改了你电脑中的信息，使得你的 $n$ 份复制不一定是自洽的。\n\n你确信 1064 病毒没有能力篡改过多的信息，并且它绝对敌不过你和你的电脑对彼此牢牢记住的 `NFLSPC#6QIDONG` 的信念。因此，你的复制仍然满足上文中所述的性质（恰有一段是 `NFLSPC#6QIDONG`，另外两段要么忘了要么是小写字母非空串）。\n\n你的目标是，寻找到初始的那绝不能忘记的记录串。这个记录串需要满足的条件是，恰出现一次 `NFLSPC#6QIDONG`，其余字符均是小写英文字符，且其匹配尽量多的复制串。\n\n- 记录串与复制串匹配的要求是，记录串存在一种划分，使得三段划分与复制串的三段分别相同，或者复制串中这段划分忘了（此时本段划分中，记录串为任何非空英文字符串均合法）。\n\n你希望求出该记录串能匹配的最多复制串数目。至于记录串本身，你更希望将它深深地埋藏于心底，因此你不需要求出它。\n\n> 那忘记的事只会使你的心灵更加轻盈 / 那未曾忘记的事则会让你的心灵更加坚硬 /", "inputFormat": "**为了避免输入量过大，输入进行了一定程度的压缩。请务必认真阅读输入格式**。\n\n第一行一个正整数 $n$，表示记录数目。\n\n接下来 $n$ 行，每行三个非空字符串，其中第一段要么是非空小写字符串，要么是 `Q`（表示 `QIANMIANWANGLE`），要么是 `N`（表示 `NFLSPC#6QIDONG`），不存在其它可能；第二段则是非空小写字符串、`Z`（表示 `ZHONGJIANWANGLE`）、`N` 三者之一；最后一段是非空小写字符串、`H`（表示 `HOUMIANWANGLE`）、`N` 三者之一。保证三段中恰有一段为 `N`。", "outputFormat": "一行一个整数，表示所有记录串中，能匹配的最多的复制的数目。", "hint": "对于所有数据，保证输入的所有字符串长度之和不超过 $10 ^ 6$。\n\n- 子任务 1（$20$ 分）：保证复制中除了 `NFLSPC#6QIDONG` 恰出现一次以外，其它部分全部忘记。也即，输入的复制串仅可能为 `N Z H`，`Q N H`，`Q Z N` 三者之一。\n- 子任务 2（$30$ 分）：保证所有复制串的 “后面” 段都是 `NFLSPC#6QIDONG`。也即，输入的复制串必然形如 `* * N`，其中 `*` 指代任意符合格式的输入。\n- 子任务 3（$50$ 分）：无特殊限制。\n\nSource：NFLSPC #6 J by Troverld", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NFLSPC #6] 绝不能忘记的事……", "background": "> 那件事…… 绝对不能忘记！", "description": "你在电脑内记录了一条绝对不能忘记的事。但是，因为 1064 病毒的入侵，它被电脑忘记了。更可怕的是，1064 病毒似乎拥有某种跨物种传播的能力，导致你也忘记了这件事。\n\n万幸，在 1064 病毒让你和你的电脑忘记这件事之前，你及时将这件事的记录复制了 $n$ 份。但是，由于你和你的电脑在执行这件艰巨的任务的过程中受到 1064 病毒的影响忘记了很多可以忘记的事，所以你进行的操作有点奇怪。\n\n- 首先，这件事的记录是一个长度未知（因为你已经忘记了它的长度）的字符串，称作 **记录串**。对于一份复制，你将记录串切成了三段非空的字符串 **片段**。**不同复制的场合，切割的方案不一定相同**。你暂且将这三份 **片段** 依次称作 **前面**，**中间** 和 **后面**。\n- 因为电脑忘记了很多可以忘记的事，所以某些复制中的某些片段可能被忘记了。具体而言，前面有可能被替换为 `QIANMIANWANGLE`，中间有可能被替换为 `ZHONGJIANWANGLE`，后面有可能被替换为 `HOUMIANWANGLE`；在发生替换的场合，表示电脑 **完全忘记** 了这一段片段；否则，表示电脑 **完全记得** 该片段。\n- 你终于想起了一件绝不能忘记的事：那就是那绝不能忘记的记录串中，**恰出现了一次** `NFLSPC#6QIDONG` 作为连续子串。除此之外，记录串中的所有其它字符都是 **小写英文字符**。并且，因为你和你的电脑始终记得这件事有多么重要，所以你在划分的时候，无意中让某一个片段恰好为 `NFLSPC#6QIDONG`；你的电脑也在每一份记录中忠实地记得这一段片段。\n- 于是，你的电脑最终还记得的东西，就是：$n$ 份复制，每份复制由三段非空字符串构成，依次表示这份复制的三份片段；其中恰有一段为 `NFLSPC#6QIDONG`，另外两段要么是一串仅由小写英文字母构成的非空串，要么是对应的前面/中间/后面忘了。\n- 邪恶的 1064 病毒不肯罢休，它篡改了你电脑中的信息，使得你的 $n$ 份复制不一定是自洽的。\n\n你确信 1064 病毒没有能力篡改过多的信息，并且它绝对敌不过你和你的电脑对彼此牢牢记住的 `NFLSPC#6QIDONG` 的信念。因此，你的复制仍然满足上文中所述的性质（恰有一段是 `NFLSPC#6QIDONG`，另外两段要么忘了要么是小写字母非空串）。\n\n你的目标是，寻找到初始的那绝不能忘记的记录串。这个记录串需要满足的条件是，恰出现一次 `NFLSPC#6QIDONG`，其余字符均是小写英文字符，且其匹配尽量多的复制串。\n\n- 记录串与复制串匹配的要求是，记录串存在一种划分，使得三段划分与复制串的三段分别相同，或者复制串中这段划分忘了（此时本段划分中，记录串为任何非空英文字符串均合法）。\n\n你希望求出该记录串能匹配的最多复制串数目。至于记录串本身，你更希望将它深深地埋藏于心底，因此你不需要求出它。\n\n> 那忘记的事只会使你的心灵更加轻盈 / 那未曾忘记的事则会让你的心灵更加坚硬 /", "inputFormat": "**为了避免输入量过大，输入进行了一定程度的压缩。请务必认真阅读输入格式**。\n\n第一行一个正整数 $n$，表示记录数目。\n\n接下来 $n$ 行，每行三个非空字符串，其中第一段要么是非空小写字符串，要么是 `Q`（表示 `QIANMIANWANGLE`），要么是 `N`（表示 `NFLSPC#6QIDONG`），不存在其它可能；第二段则是非空小写字符串、`Z`（表示 `ZHONGJIANWANGLE`）、`N` 三者之一；最后一段是非空小写字符串、`H`（表示 `HOUMIANWANGLE`）、`N` 三者之一。保证三段中恰有一段为 `N`。", "outputFormat": "一行一个整数，表示所有记录串中，能匹配的最多的复制的数目。", "hint": "对于所有数据，保证输入的所有字符串长度之和不超过 $10 ^ 6$。\n\n- 子任务 1（$20$ 分）：保证复制中除了 `NFLSPC#6QIDONG` 恰出现一次以外，其它部分全部忘记。也即，输入的复制串仅可能为 `N Z H`，`Q N H`，`Q Z N` 三者之一。\n- 子任务 2（$30$ 分）：保证所有复制串的 “后面” 段都是 `NFLSPC#6QIDONG`。也即，输入的复制串必然形如 `* * N`，其中 `*` 指代任意符合格式的输入。\n- 子任务 3（$50$ 分）：无特殊限制。\n\nSource：NFLSPC #6 J by Troverld", "locale": "zh-CN"}}}
{"pid": "P9935", "type": "P", "difficulty": 6, "samples": [["3\nnflsalgo Z H\nQ nflspc H\nQ Z qidong\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["字符串", "线段树", "O2优化", "哈希 hashing", "虚树", "字典树 Trie", "AC 自动机"], "title": "[NFLSPC #6] 啊，忘记了。", "background": "> 好像忘了什么事…… 算了，想必不是什么重要的事吧。", "description": "\n\n你在你的电脑上发现了 $n$ 份文本。冥冥之中，你没来由地感觉这似乎全都是一份记录的复制。\n\n- 首先，原始记录是一个长度未知（甚至可以为空）的字符串，称作 **记录串**。对于一份复制，其将记录串切成了三段 **可以为空** 的字符串 **片段**。**每份复制中切割方案不保证相同**。你暂且将这三份 **片段** 依次称作 **前面**，**中间** 和 **后面**。\n- 某些复制中的某些片段可能被忘记了。具体而言，前面有可能被替换为 `QIANMIANWANGLE`，中间有可能被替换为 `ZHONGJIANWANGLE`，后面有可能被替换为 `HOUMIANWANGLE`；在发生替换的场合，表示这一段片段被 **完全遗忘** 了；否则，表示该片段被 **完整保存**。\n- 你有一种预感，记录串中的所有字符都是 **小写英文字符**。\n- $n$ 份复制不一定自洽。\n\n你的目标是，寻找初始的记录串。这个记录串需要满足所有字符均是小写英文字符。你希望其匹配尽量多的复制串。\n\n- 记录串与复制串匹配的要求是，存在记录串的一种划分，使得其中记录串的三段与复制串的三段分别相同，或者复制串中这段划分忘了（此时本段划分中，记录串为任何可以为空的小写英文字符串均合法）。\n\n你希望求出该记录串能匹配的最多复制串数目。**至于记录串本身，你感觉它并不是很重要，所以你不需要求出它**。\n\n> / 我，毋畏遗忘 /", "inputFormat": "**为了避免输入过大，输入进行了一定程度的压缩。请务必认真阅读输入格式**。\n\n第一行一个正整数 $n$，表示记录数目。\n\n接下来 $n$ 行，每行三个非空字符串，其中第一段要么是非空小写字符串，要么是 `Q`（表示 `QIANMIANWANGLE`），要么是 `E` 表示这是一段空串（因为空串不可见所以选取 `E` 作为占位符），不存在其它可能；第二段则是非空小写字符串、`Z`（表示 `ZHONGJIANWANGLE`）、`E` 三者之一；最后一段是非空小写字符串、`H`（表示 `HOUMIANWANGLE`）、`E` 三者之一。", "outputFormat": "一行一个整数，表示所有记录串中，能匹配的最多的复制的数目。\n", "hint": "### 样例 1 解释\n\n你希望这个串是 `nflsalgonflspcqidong`。你确信，不会再有其它串比它更匹配现存的记录了。\n\n### 数据范围与约定\n\n对于所有数据，保证输入的所有字符串长度之和不超过 $5\\times 10 ^ 5$。\n\n- 子任务 1（$30$ 分）：保证所有复制的 “后面” 段都是 `H`。\n- 子任务 2（$70$ 分）：无特殊限制。\n\nSource：NFLSPC #6 K by Troverld", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NFLSPC #6] 啊，忘记了。", "background": "> 好像忘了什么事…… 算了，想必不是什么重要的事吧。", "description": "\n\n你在你的电脑上发现了 $n$ 份文本。冥冥之中，你没来由地感觉这似乎全都是一份记录的复制。\n\n- 首先，原始记录是一个长度未知（甚至可以为空）的字符串，称作 **记录串**。对于一份复制，其将记录串切成了三段 **可以为空** 的字符串 **片段**。**每份复制中切割方案不保证相同**。你暂且将这三份 **片段** 依次称作 **前面**，**中间** 和 **后面**。\n- 某些复制中的某些片段可能被忘记了。具体而言，前面有可能被替换为 `QIANMIANWANGLE`，中间有可能被替换为 `ZHONGJIANWANGLE`，后面有可能被替换为 `HOUMIANWANGLE`；在发生替换的场合，表示这一段片段被 **完全遗忘** 了；否则，表示该片段被 **完整保存**。\n- 你有一种预感，记录串中的所有字符都是 **小写英文字符**。\n- $n$ 份复制不一定自洽。\n\n你的目标是，寻找初始的记录串。这个记录串需要满足所有字符均是小写英文字符。你希望其匹配尽量多的复制串。\n\n- 记录串与复制串匹配的要求是，存在记录串的一种划分，使得其中记录串的三段与复制串的三段分别相同，或者复制串中这段划分忘了（此时本段划分中，记录串为任何可以为空的小写英文字符串均合法）。\n\n你希望求出该记录串能匹配的最多复制串数目。**至于记录串本身，你感觉它并不是很重要，所以你不需要求出它**。\n\n> / 我，毋畏遗忘 /", "inputFormat": "**为了避免输入过大，输入进行了一定程度的压缩。请务必认真阅读输入格式**。\n\n第一行一个正整数 $n$，表示记录数目。\n\n接下来 $n$ 行，每行三个非空字符串，其中第一段要么是非空小写字符串，要么是 `Q`（表示 `QIANMIANWANGLE`），要么是 `E` 表示这是一段空串（因为空串不可见所以选取 `E` 作为占位符），不存在其它可能；第二段则是非空小写字符串、`Z`（表示 `ZHONGJIANWANGLE`）、`E` 三者之一；最后一段是非空小写字符串、`H`（表示 `HOUMIANWANGLE`）、`E` 三者之一。", "outputFormat": "一行一个整数，表示所有记录串中，能匹配的最多的复制的数目。\n", "hint": "### 样例 1 解释\n\n你希望这个串是 `nflsalgonflspcqidong`。你确信，不会再有其它串比它更匹配现存的记录了。\n\n### 数据范围与约定\n\n对于所有数据，保证输入的所有字符串长度之和不超过 $5\\times 10 ^ 5$。\n\n- 子任务 1（$30$ 分）：保证所有复制的 “后面” 段都是 `H`。\n- 子任务 2（$70$ 分）：无特殊限制。\n\nSource：NFLSPC #6 K by Troverld", "locale": "zh-CN"}}}
{"pid": "P9936", "type": "P", "difficulty": 4, "samples": [["6\n2\n822 1064\n2\n1064 822\n4\n1 3 4 2\n4\n2 4 3 1\n6\n2 6 2 1 4 4\n9\n9 9 8 2 4 4 3 5 3\n", "242\n0\n6\n4\n17\n25\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["三分", "O2优化"], "title": "[NFLSPC #6] 等差数列", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/asxexdko.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rzayzc9p.png)", "description": "*Alek 岁*在某知名 OJ *代码力量*上做了 $a_i$ 道难度为 $i$ 的题。他希望做一些题使得 $a_i$ 形成 **公差非正** 的等差数列，这样画出来的统计图表很好看。\n\n尽管 *Alek 岁*一天能做 42 道题，但他依然希望做尽可能少的题达到目标。你需要求出新做题数的最小值。\n\n你可以认为 OJ 上有足够多的各种难度的题目。", "inputFormat": "第一行一个整数 $T$ 表示数据组数。\n\n对于每组数据：\n- 第一行一个整数 $n$ 表示难度总数。\n- 第二行 $n$ 个整数 $a_i$。", "outputFormat": "对于每组数据，输出一行一个整数表示答案。", "hint": "对于所有数据，$1\\leq T\\leq 100$，$1\\leq n, \\sum n\\leq 10 ^ 5$，$1\\leq a_i\\leq 10 ^ 9$。\n\n- 子任务 1（$30$ 分）：$\\sum n \\leq 10 ^ 3$。\n- 子任务 2（$70$ 分）：无特殊限制。\n\nSource：NFLSPC #6 L by Alex_Wei", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NFLSPC #6] 等差数列", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/asxexdko.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rzayzc9p.png)", "description": "*Alek 岁*在某知名 OJ *代码力量*上做了 $a_i$ 道难度为 $i$ 的题。他希望做一些题使得 $a_i$ 形成 **公差非正** 的等差数列，这样画出来的统计图表很好看。\n\n尽管 *Alek 岁*一天能做 42 道题，但他依然希望做尽可能少的题达到目标。你需要求出新做题数的最小值。\n\n你可以认为 OJ 上有足够多的各种难度的题目。", "inputFormat": "第一行一个整数 $T$ 表示数据组数。\n\n对于每组数据：\n- 第一行一个整数 $n$ 表示难度总数。\n- 第二行 $n$ 个整数 $a_i$。", "outputFormat": "对于每组数据，输出一行一个整数表示答案。", "hint": "对于所有数据，$1\\leq T\\leq 100$，$1\\leq n, \\sum n\\leq 10 ^ 5$，$1\\leq a_i\\leq 10 ^ 9$。\n\n- 子任务 1（$30$ 分）：$\\sum n \\leq 10 ^ 3$。\n- 子任务 2（$70$ 分）：无特殊限制。\n\nSource：NFLSPC #6 L by Alex_Wei", "locale": "zh-CN"}}}
{"pid": "P9937", "type": "P", "difficulty": 2, "samples": [["4 0\n1 100 2 3", "2"], ["4 1\n1 100 2 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "二分", "USACO", "2021", "O2优化"], "title": "[USACO21OPEN] Acowdemia I B", "background": "", "description": "由于对计算机科学的热爱，以及有朝一日成为 「Bessie 博士」的诱惑，奶牛 Bessie 开始攻读计算机科学博士学位。经过一段时间的学术研究，她已经发表了 $N$ 篇论文（$1 \\le N \\le 10^5$），并且她的第 $i$ 篇论文得到了来自其他研究文献的 $c_i$ 次引用（$0 \\le c_i \\le 10^5$）。\n\nBessie 听说学术成就可以用 $h$ 指数来衡量。$h$ 指数等于使得研究员有至少 $h$ 篇引用次数不少于 $h$ 的论文的最大整数 $h$。例如，如果一名研究员有 $4$ 篇论文，引用次数分别为 $(1,100,2,3)$，则 $h$ 指数为 $2$，然而若引用次数为 $(1,100,3,3)$ 则 $h$ 指数将会是 $3$。\n\n为了提升她的 $h$ 指数，Bessie 计划写一篇综述，并引用一些她曾经写过的论文。由于页数限制，她至多可以在这篇综述中引用 $L$ 篇论文（$0 \\le L \\le 10^5$），并且她只能引用每篇她的论文至多一次。\n\n请帮助 Bessie 求出在写完这篇综述后她可以达到的最大 $h$ 指数。\n\n注意 Bessie 的导师可能会告知她纯粹为了提升 $h$ 指数而写综述存在违反学术道德的嫌疑；我们不建议其他学者模仿 Bessie 的行为。 ", "inputFormat": "输入的第一行包含 $N$ 和 $L$。\n\n第二行包含 $N$ 个空格分隔的整数 $c_1,\\ldots,c_N$。 ", "outputFormat": "输出写完综述后 Bessie 可以达到的最大 $h$ 指数。 ", "hint": "### 样例解释 1\n\nBessie 不能引用任何她曾经写过的论文。上文中提到，$(1,100,2,3)$ 的 $h$ 指数为 $2$。\n\n### 样例解释 2\n\n如果 Bessie 引用她的第三篇论文，引用数会变为 $(1,100,3,3)$。上文中提到，这一引用数的 $h$ 指数为 $3$。\n\n### 测试点性质\n\n- 测试点 $1-7$ 满足 $N\\le 100$。\n- 测试点 $8-10$ 满足 $N\\le 1000$。\n- 测试点 $11-17$ 满足 $N \\le 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21OPEN] Acowdemia I B", "background": "", "description": "由于对计算机科学的热爱，以及有朝一日成为 「Bessie 博士」的诱惑，奶牛 Bessie 开始攻读计算机科学博士学位。经过一段时间的学术研究，她已经发表了 $N$ 篇论文（$1 \\le N \\le 10^5$），并且她的第 $i$ 篇论文得到了来自其他研究文献的 $c_i$ 次引用（$0 \\le c_i \\le 10^5$）。\n\nBessie 听说学术成就可以用 $h$ 指数来衡量。$h$ 指数等于使得研究员有至少 $h$ 篇引用次数不少于 $h$ 的论文的最大整数 $h$。例如，如果一名研究员有 $4$ 篇论文，引用次数分别为 $(1,100,2,3)$，则 $h$ 指数为 $2$，然而若引用次数为 $(1,100,3,3)$ 则 $h$ 指数将会是 $3$。\n\n为了提升她的 $h$ 指数，Bessie 计划写一篇综述，并引用一些她曾经写过的论文。由于页数限制，她至多可以在这篇综述中引用 $L$ 篇论文（$0 \\le L \\le 10^5$），并且她只能引用每篇她的论文至多一次。\n\n请帮助 Bessie 求出在写完这篇综述后她可以达到的最大 $h$ 指数。\n\n注意 Bessie 的导师可能会告知她纯粹为了提升 $h$ 指数而写综述存在违反学术道德的嫌疑；我们不建议其他学者模仿 Bessie 的行为。 ", "inputFormat": "输入的第一行包含 $N$ 和 $L$。\n\n第二行包含 $N$ 个空格分隔的整数 $c_1,\\ldots,c_N$。 ", "outputFormat": "输出写完综述后 Bessie 可以达到的最大 $h$ 指数。 ", "hint": "### 样例解释 1\n\nBessie 不能引用任何她曾经写过的论文。上文中提到，$(1,100,2,3)$ 的 $h$ 指数为 $2$。\n\n### 样例解释 2\n\n如果 Bessie 引用她的第三篇论文，引用数会变为 $(1,100,3,3)$。上文中提到，这一引用数的 $h$ 指数为 $3$。\n\n### 测试点性质\n\n- 测试点 $1-7$ 满足 $N\\le 100$。\n- 测试点 $8-10$ 满足 $N\\le 1000$。\n- 测试点 $11-17$ 满足 $N \\le 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9938", "type": "P", "difficulty": 2, "samples": [["1 3\ndean elsie mildred\nelsie mildred dean", "B11\n0B?\n0?B"], ["2 3\nelsie mildred dean\nelsie mildred dean\nelsie dean mildred", "B00\n1B0\n11B"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2021", "O2优化"], "title": "[USACO21OPEN] Acowdemia II B", "background": "", "description": "Bessie 正在申请计算机科学的研究生，并取得了一所久负盛名的计算机科学实验室的面试通知。然而，为了避免冒犯任何人，Bessie 有意先确定实验室的 $N$ 名现有成员的相对资历（$1\\le N\\le 100$）。没有两名实验室成员的资历相同，但确定他们的资历深浅可能并不好办。为此，Bessie 将会对实验室的出版物进行调查。\n\n每份出版物均包含一个作者列表，为所有 $N$ 名实验室成员的一个排列。列表按每名实验室成员对这篇文章的贡献降序排列。如果多名研究员的贡献相等，则按字典序排列。由于更有资历的实验室成员负有更多的管理责任，更有资历的研究员从不会比资历较浅的研究员做出更多的贡献。\n\n例如，在一个由资历较浅的学生 Elsie、资历较深的教授 Mildred、以及十分资深的教授 Dean 组成的实验室中，可能存在一篇论文 Elsie-Mildred-Dean，如果他们做出了不等的贡献（也就是说，Elsie 做出的贡献比 Mildred 更多，Mildred 比 Dean 更多）。然而，也有可能存在一篇论文 Elsie-Dean-Mildred，如果 Mildred 和 Dean 做出了相等的贡献，而 Elsie 做出了更多的贡献。\n\n给定实验室的 $K$ 份出版物（$1\\le K\\le 100$），对于实验室中每对研究员，如果可能的话帮助 Bessie 判断其中谁的资历更深。", "inputFormat": "输入的第一行包含两个整数 $K$ 和 $N$。\n\n第二行包含 $N$ 个空格分隔的字符串，为实验室的成员的名字。每个字符串均由小写字母组成，且至多包含 $10$ 个字符。\n\n以下 $K$ 行，每行包含 $N$ 个空格分隔的字符串，表示一份出版物的作者列表。 ", "outputFormat": "输出 $N$ 行，每行 $N$ 个字符。在第 $i$ 行内，对于所有 $j\\neq i$，当可以确定第 $i$ 名成员比第 $j$ 名成员资历更深时字符 $j$ 为 `1`，当可以确定第 $i$ 名成员比第 $j$ 名成员资历更浅时字符 $j$ 为 `0`，当不能由给定的出版物确定时为 `?`。\n\n第 $i$ 行的字符 $i$ 应为 `B`，因为这是 Bessie 最喜欢的字母。 ", "hint": "### 样例解释 1\n\n在这个样例中，单独一份论文 elsie-mildred-dean 并不能提供足够的信息判断 Elsie 比 Mildred 资历更深或更浅。然而，我们可以推断出 Dean 一定比这两名研究员资历更深，从而资历排序为 Elsie<Mildred<Dean 和 Mildred<Elsie<Dean 均是可能的。 \n\n### 样例解释 2\n\n在这个样例中，唯一能与两篇论文相一致的资历排序为 Elsie<Mildred<Dean，这是因为基于第一个样例所提供的信息，第二篇论文可以帮助我们推断出 Mildred 比 Elsie 的资历更深。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21OPEN] Acowdemia II B", "background": "", "description": "Bessie 正在申请计算机科学的研究生，并取得了一所久负盛名的计算机科学实验室的面试通知。然而，为了避免冒犯任何人，Bessie 有意先确定实验室的 $N$ 名现有成员的相对资历（$1\\le N\\le 100$）。没有两名实验室成员的资历相同，但确定他们的资历深浅可能并不好办。为此，Bessie 将会对实验室的出版物进行调查。\n\n每份出版物均包含一个作者列表，为所有 $N$ 名实验室成员的一个排列。列表按每名实验室成员对这篇文章的贡献降序排列。如果多名研究员的贡献相等，则按字典序排列。由于更有资历的实验室成员负有更多的管理责任，更有资历的研究员从不会比资历较浅的研究员做出更多的贡献。\n\n例如，在一个由资历较浅的学生 Elsie、资历较深的教授 Mildred、以及十分资深的教授 Dean 组成的实验室中，可能存在一篇论文 Elsie-Mildred-Dean，如果他们做出了不等的贡献（也就是说，Elsie 做出的贡献比 Mildred 更多，Mildred 比 Dean 更多）。然而，也有可能存在一篇论文 Elsie-Dean-Mildred，如果 Mildred 和 Dean 做出了相等的贡献，而 Elsie 做出了更多的贡献。\n\n给定实验室的 $K$ 份出版物（$1\\le K\\le 100$），对于实验室中每对研究员，如果可能的话帮助 Bessie 判断其中谁的资历更深。", "inputFormat": "输入的第一行包含两个整数 $K$ 和 $N$。\n\n第二行包含 $N$ 个空格分隔的字符串，为实验室的成员的名字。每个字符串均由小写字母组成，且至多包含 $10$ 个字符。\n\n以下 $K$ 行，每行包含 $N$ 个空格分隔的字符串，表示一份出版物的作者列表。 ", "outputFormat": "输出 $N$ 行，每行 $N$ 个字符。在第 $i$ 行内，对于所有 $j\\neq i$，当可以确定第 $i$ 名成员比第 $j$ 名成员资历更深时字符 $j$ 为 `1`，当可以确定第 $i$ 名成员比第 $j$ 名成员资历更浅时字符 $j$ 为 `0`，当不能由给定的出版物确定时为 `?`。\n\n第 $i$ 行的字符 $i$ 应为 `B`，因为这是 Bessie 最喜欢的字母。 ", "hint": "### 样例解释 1\n\n在这个样例中，单独一份论文 elsie-mildred-dean 并不能提供足够的信息判断 Elsie 比 Mildred 资历更深或更浅。然而，我们可以推断出 Dean 一定比这两名研究员资历更深，从而资历排序为 Elsie<Mildred<Dean 和 Mildred<Elsie<Dean 均是可能的。 \n\n### 样例解释 2\n\n在这个样例中，唯一能与两篇论文相一致的资历排序为 Elsie<Mildred<Dean，这是因为基于第一个样例所提供的信息，第二篇论文可以帮助我们推断出 Mildred 比 Elsie 的资历更深。 ", "locale": "zh-CN"}}}
{"pid": "P9939", "type": "P", "difficulty": 3, "samples": [["4 5\n.CGGC\n.CGCG\nCGCG.\n.CC.C", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2021", "O2优化", "分类讨论"], "title": "[USACO21OPEN] Acowdemia III B", "background": "", "description": "Bessie 是一位忙碌的计算机科学研究生。然而，即使是研究生也需要交友。因此，Farmer John 开设了一片草地，目的是为了帮助 Bessie 与其他奶牛建立持久的友谊。\n\nFarmer John 的草地可以被看做是由正方形方格组成的巨大二维方阵（想象一个巨大的棋盘）。每个方格用如下字符标记：\n\n - `C`，如果这个方格中有一头奶牛。\n - `G`，如果这个方格中有草。\n - `.`，如果这个方格既没有奶牛也没有草。\n\n对于两头想要成为朋友的奶牛，她们必须选择在一个与她们均水平或竖直方向上相邻的有草方格见面。在这个过程中，她们会在这个有草方格中吃草，所以之后的奶牛不能再使用这个方格作为见面地点。一头奶牛可以与多头其他奶牛成为朋友，但是同一对奶牛不能见面并成为朋友多于一次。\n\nFarmer John 希望有许多奶牛可以见面并成为朋友。请求出当这一活动结束时在奶牛之间可以建立的朋友关系的最大数量。 ", "inputFormat": "输入的第一行包含 $N$ 和 $M$（$1\\le N,M\\le 1000$）。\n\n以下 $N$ 行每行包含一个由 $M$ 个字符组成的字符串，表示这个草地。", "outputFormat": "输出在这一活动结束时在奶牛之间可以建立的朋友关系的最大数量", "hint": "### 样例解释 1\n\n如果我们用坐标 $(i,j)$ 标记第 $i$ 行第 $j$ 列的奶牛，则在这个样例中于 $(1,2)$、$(1,5)$、$(2,2)$、$(2,4)$、$(3,1)$、$(3,3)$、$(4,2)$、$(4,3)$ 以及 $(4,5)$ \n存在奶牛。一种使四对奶牛成为朋友的方式如下：\n\n - 位于 $(2,2)$ 和 $(3,3)$ 的奶牛于 $(3,2)$ 一起吃草。\n - 位于 $(2,2)$ 和 $(2,4)$ 的奶牛于 $(2,3)$ 一起吃草。\n - 位于 $(2,4)$ 和 $(3,3)$ 的奶牛于 $(3,4)$ 一起吃草。\n - 位于 $(2,4)$ 和 $(1,5)$ 的奶牛于 $(2,5)$ 一起吃草。\n\n\n### 测试点性质\n\n - 测试点 $2-4$ 满足 $N=2$。\n - 测试点 $5-12$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21OPEN] Acowdemia III B", "background": "", "description": "Bessie 是一位忙碌的计算机科学研究生。然而，即使是研究生也需要交友。因此，Farmer John 开设了一片草地，目的是为了帮助 Bessie 与其他奶牛建立持久的友谊。\n\nFarmer John 的草地可以被看做是由正方形方格组成的巨大二维方阵（想象一个巨大的棋盘）。每个方格用如下字符标记：\n\n - `C`，如果这个方格中有一头奶牛。\n - `G`，如果这个方格中有草。\n - `.`，如果这个方格既没有奶牛也没有草。\n\n对于两头想要成为朋友的奶牛，她们必须选择在一个与她们均水平或竖直方向上相邻的有草方格见面。在这个过程中，她们会在这个有草方格中吃草，所以之后的奶牛不能再使用这个方格作为见面地点。一头奶牛可以与多头其他奶牛成为朋友，但是同一对奶牛不能见面并成为朋友多于一次。\n\nFarmer John 希望有许多奶牛可以见面并成为朋友。请求出当这一活动结束时在奶牛之间可以建立的朋友关系的最大数量。 ", "inputFormat": "输入的第一行包含 $N$ 和 $M$（$1\\le N,M\\le 1000$）。\n\n以下 $N$ 行每行包含一个由 $M$ 个字符组成的字符串，表示这个草地。", "outputFormat": "输出在这一活动结束时在奶牛之间可以建立的朋友关系的最大数量", "hint": "### 样例解释 1\n\n如果我们用坐标 $(i,j)$ 标记第 $i$ 行第 $j$ 列的奶牛，则在这个样例中于 $(1,2)$、$(1,5)$、$(2,2)$、$(2,4)$、$(3,1)$、$(3,3)$、$(4,2)$、$(4,3)$ 以及 $(4,5)$ \n存在奶牛。一种使四对奶牛成为朋友的方式如下：\n\n - 位于 $(2,2)$ 和 $(3,3)$ 的奶牛于 $(3,2)$ 一起吃草。\n - 位于 $(2,2)$ 和 $(2,4)$ 的奶牛于 $(2,3)$ 一起吃草。\n - 位于 $(2,4)$ 和 $(3,3)$ 的奶牛于 $(3,4)$ 一起吃草。\n - 位于 $(2,4)$ 和 $(1,5)$ 的奶牛于 $(2,5)$ 一起吃草。\n\n\n### 测试点性质\n\n - 测试点 $2-4$ 满足 $N=2$。\n - 测试点 $5-12$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9940", "type": "P", "difficulty": 1, "samples": [["abcdefghijklmnopqrstuvwxyz\nmood", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2021", "O2优化"], "title": "[USACO21JAN] Uddered but not Herd B", "background": "", "description": "一个鲜为人知的事实是，奶牛拥有自己的文字：「牛文」。牛文由 $26$ 个字母 `a` 到 `z` 组成，但是当奶牛说牛文时，可能与我们所熟悉的 `abcdefghijklmnopqrstuvwxyz` 不同，她会按某种特定的顺序排列字母。\n\n为了打发时间，奶牛 Bessie 在反复哼唱牛文字母歌，而 Farmer John 好奇她唱了多少遍。\n\n给定一个小写字母组成的字符串，为 Farmer John 听到 Bessie 唱的字母，计算 Bessie 至少唱了几遍完整的牛文字母歌，使得 Farmer John 能够听到给定的字符串。Farmer John 并不始终注意 Bessie 所唱的内容，所以他可能会漏听 Bessie 唱过的一些字母。给定的字符串仅包含他记得他所听到的字母。 ", "inputFormat": "输入的第一行包含 $26$ 个小写字母 `a` 到 `z` 的牛文字母表顺序。下一行包含一个小写字母组成的字符串，为 Farmer John 听到 Bessie 唱的字母。字符串的长度不小于 $1$ 且不大于 $1000$。", "outputFormat": "输出 Bessie 所唱的完整的牛文字母歌的最小次数。 ", "hint": "### 样例解释 1\n\n在这个样例中，牛文字母表与日常的字母表的排列一致。\n\nBessie 至少唱了三遍牛文字母歌。有可能 Bessie 只唱了三遍牛文字母歌，而 Farmer John 听到了以下被标记为大写的字母。\n\n`abcdefghijklMnOpqrstuvwxyz`  \n`abcdefghijklmnOpqrstuvwxyz`  \n`abcDefghijklmnopqrstuvwxyz`  \n\n### 测试点性质\n\n- 测试点 $2-5$ 中，牛文字母表与日常的字母表相同。\n- 测试点 $6-10$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] Uddered but not Herd B", "background": "", "description": "一个鲜为人知的事实是，奶牛拥有自己的文字：「牛文」。牛文由 $26$ 个字母 `a` 到 `z` 组成，但是当奶牛说牛文时，可能与我们所熟悉的 `abcdefghijklmnopqrstuvwxyz` 不同，她会按某种特定的顺序排列字母。\n\n为了打发时间，奶牛 Bessie 在反复哼唱牛文字母歌，而 Farmer John 好奇她唱了多少遍。\n\n给定一个小写字母组成的字符串，为 Farmer John 听到 Bessie 唱的字母，计算 Bessie 至少唱了几遍完整的牛文字母歌，使得 Farmer John 能够听到给定的字符串。Farmer John 并不始终注意 Bessie 所唱的内容，所以他可能会漏听 Bessie 唱过的一些字母。给定的字符串仅包含他记得他所听到的字母。 ", "inputFormat": "输入的第一行包含 $26$ 个小写字母 `a` 到 `z` 的牛文字母表顺序。下一行包含一个小写字母组成的字符串，为 Farmer John 听到 Bessie 唱的字母。字符串的长度不小于 $1$ 且不大于 $1000$。", "outputFormat": "输出 Bessie 所唱的完整的牛文字母歌的最小次数。 ", "hint": "### 样例解释 1\n\n在这个样例中，牛文字母表与日常的字母表的排列一致。\n\nBessie 至少唱了三遍牛文字母歌。有可能 Bessie 只唱了三遍牛文字母歌，而 Farmer John 听到了以下被标记为大写的字母。\n\n`abcdefghijklMnOpqrstuvwxyz`  \n`abcdefghijklmnOpqrstuvwxyz`  \n`abcDefghijklmnopqrstuvwxyz`  \n\n### 测试点性质\n\n- 测试点 $2-5$ 中，牛文字母表与日常的字母表相同。\n- 测试点 $6-10$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9941", "type": "P", "difficulty": 2, "samples": [["7\n1 3 5 7 9 11 13", "3"], ["7\n11 2 17 13 1 15 3", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "USACO", "2021", "O2优化"], "title": "[USACO21JAN] Even More Odd Photos B", "background": "", "description": "Farmer John 正再一次尝试给他的 $N$ 头奶牛拍照（$2\\le N\\le 1000$）。\n\n每头奶牛有一个范围在 $1\\ldots 100$ 之内的整数的「品种编号」。Farmer John 对他的照片有一个十分古怪的构思：他希望将所有的奶牛分为不相交的若干组（换句话说，将每头奶牛分到恰好一组中）并将这些组排成一行，使得第一组的奶牛的品种编号之和为偶数，第二组的编号之和为奇数，以此类推，奇偶交替。\n\nFarmer John 可以分成的最大组数是多少？ ", "inputFormat": "输入的第一行包含 $N$。下一行包含 $N$ 个空格分隔的整数，为 $N$ 头奶牛的品种编号。", "outputFormat": "输出 Farmer John 的照片中的最大组数。可以证明，至少存在一种符合要求的分组方案。 ", "hint": "### 样例解释 1\n\n在这个样例中，以下是一种分成最大组数三组的方案。将 1 和 3 分在第一组，5、7 和 9 分在第二组，11 和 13 分在第三组。 \n\n### 样例解释 2\n\n在这个样例中，以下是一种分成最大组数五组的方案。将 2 分在第一组，11 分在第二组，13 和 1 分在第三组，15 分在第四组，17 和 3 分在第五组。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] Even More Odd Photos B", "background": "", "description": "Farmer John 正再一次尝试给他的 $N$ 头奶牛拍照（$2\\le N\\le 1000$）。\n\n每头奶牛有一个范围在 $1\\ldots 100$ 之内的整数的「品种编号」。Farmer John 对他的照片有一个十分古怪的构思：他希望将所有的奶牛分为不相交的若干组（换句话说，将每头奶牛分到恰好一组中）并将这些组排成一行，使得第一组的奶牛的品种编号之和为偶数，第二组的编号之和为奇数，以此类推，奇偶交替。\n\nFarmer John 可以分成的最大组数是多少？ ", "inputFormat": "输入的第一行包含 $N$。下一行包含 $N$ 个空格分隔的整数，为 $N$ 头奶牛的品种编号。", "outputFormat": "输出 Farmer John 的照片中的最大组数。可以证明，至少存在一种符合要求的分组方案。 ", "hint": "### 样例解释 1\n\n在这个样例中，以下是一种分成最大组数三组的方案。将 1 和 3 分在第一组，5、7 和 9 分在第二组，11 和 13 分在第三组。 \n\n### 样例解释 2\n\n在这个样例中，以下是一种分成最大组数五组的方案。将 2 分在第一组，11 分在第二组，13 和 1 分在第三组，15 分在第四组，17 和 3 分在第五组。 ", "locale": "zh-CN"}}}
{"pid": "P9942", "type": "P", "difficulty": 2, "samples": [["4\n1 2 3 4\n2 4 3 4", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "2021", "O2优化", "排序"], "title": "[USACO21JAN] Just Stalling B", "background": "", "description": "Farmer John 有 $N$ 头奶牛（$1\\le N\\le 20$），高度为 $a_1\\ldots a_N$。他的牛栏有 $N$ 个牛棚，高度限制分别为 $b_1\\ldots b_N$（例如，如果 $b_5=17$，那么一头高度不超过 $17$ 的奶牛可以住在牛棚 $5$ 里）。Farmer John 有多少种不同的方式安排他的奶牛，使得每头奶牛均住在不同的牛棚里，并且使得每个牛棚的高度限制均得到满足？ ", "inputFormat": "输入的第一行包含 $N$。第二行包含 $N$ 个空格分隔的整数 $a_1,a_2,\\ldots,a_N$。第三行包含 $N$ 个空格分隔的整数 $b_1,b_2,\\ldots,b_N$。所有的高度和高度限制均在范围 $[1,10^9]$ 内。", "outputFormat": "输出 Farmer John 可以将每头奶牛安排到不同的牛棚里，使得每个牛棚的高度限制均得到满足的方法数。注意输出的数量可能需要使用 64 位整数型，例如 C++ 中的 long long。 ", "hint": "### 样例解释 1\n\n在这个例子中，我们不能将第三头奶牛安排到第一个牛棚里，因为 $3=a_3>b_1=2$。类似地，我们不能将第四头奶牛安排到第一或第三个牛棚里。一种符合高度限制的安排方式为将奶牛 1 安排到牛棚 1，奶牛 2 安排到牛棚 2，奶牛 3 安排到牛棚 3，奶牛 4 安排到牛棚 4。\n\n### 测试点性质\n\n- 测试点 $1-5$ 满足 $N\\le 8$。\n- 测试点 $6-12$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21JAN] Just Stalling B", "background": "", "description": "Farmer John 有 $N$ 头奶牛（$1\\le N\\le 20$），高度为 $a_1\\ldots a_N$。他的牛栏有 $N$ 个牛棚，高度限制分别为 $b_1\\ldots b_N$（例如，如果 $b_5=17$，那么一头高度不超过 $17$ 的奶牛可以住在牛棚 $5$ 里）。Farmer John 有多少种不同的方式安排他的奶牛，使得每头奶牛均住在不同的牛棚里，并且使得每个牛棚的高度限制均得到满足？ ", "inputFormat": "输入的第一行包含 $N$。第二行包含 $N$ 个空格分隔的整数 $a_1,a_2,\\ldots,a_N$。第三行包含 $N$ 个空格分隔的整数 $b_1,b_2,\\ldots,b_N$。所有的高度和高度限制均在范围 $[1,10^9]$ 内。", "outputFormat": "输出 Farmer John 可以将每头奶牛安排到不同的牛棚里，使得每个牛棚的高度限制均得到满足的方法数。注意输出的数量可能需要使用 64 位整数型，例如 C++ 中的 long long。 ", "hint": "### 样例解释 1\n\n在这个例子中，我们不能将第三头奶牛安排到第一个牛棚里，因为 $3=a_3>b_1=2$。类似地，我们不能将第四头奶牛安排到第一或第三个牛棚里。一种符合高度限制的安排方式为将奶牛 1 安排到牛棚 1，奶牛 2 安排到牛棚 2，奶牛 3 安排到牛棚 3，奶牛 4 安排到牛棚 4。\n\n### 测试点性质\n\n- 测试点 $1-5$ 满足 $N\\le 8$。\n- 测试点 $6-12$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9943", "type": "P", "difficulty": 2, "samples": [["4\nMildred born in previous Dragon year from Bessie\nGretta born in previous Monkey year from Mildred\nElsie born in next Ox year from Gretta\nPaulina born in next Dog year from Bessie", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2021", "O2优化"], "title": "[USACO21FEB] Year of the Cow B", "background": "", "description": "Farmer John 的奶牛们得知最近正在庆祝牛年的到来时十分兴奋。牛年总是奶牛们的最爱。\n\n我们知道，中国历法中每一年所对应的生肖遵循 $12$ 年的周期：Ox, Tiger, Rabbit, Dragon, Snake, Horse, Goat, Monkey, Rooster, Dog, Pig, Rat（牛、虎、兔、龙、蛇、马、羊、猴、鸡、狗、猪、鼠），然后回到牛。\n\n奶牛 Bessie 自豪地说她是在许多年前的一个牛年出生的。她的朋友 Elsie 想要知道她与 Bessie 出生相差多少年，并且希望你能够通过查看农场上若干奶牛出生年份之间的关系来帮助她推算。 ", "inputFormat": "输入的第一行包含一个整数 $N$（$1\\le N\\le 100$）。以下 $N$ 行每行包含一个 $8$ 个单词的短语，指定了两头奶牛的出生年份之间的关系，格式为\n\n`Mildred born in previous Dragon year from Bessie`（Mildred 在 Bessie 出生的前一个龙年出生），\n\n或\n\n`Mildred born in next Dragon year from Bessie`（Mildred 在 Bessie 出生的后一个龙年出生）。\n\n最后一个单词是农场上某一头奶牛的名字，为 `Bessie` 或一头已经在之前的输入中出现过的奶牛。\n\n第一个单词是农场上某一头奶牛的名字，不为 `Bessie` 且未在之前的输入中出现过。所有的奶牛名字不超过 $10$ 个字符，且仅包含字符 `a..z` 或 `A..Z`。\n\n第 $5$ 个单词是上述十二生肖之一。\n\n第 $4$ 个单词是 `previous`（之前）或 `next`（之后）之一。例如，如果短语为 `Mildred born in previous Dragon year from Bessie`，则 Mildred 的出生年份为最为接近且严格处于 Bessie 的出生年份之前（不等于）的龙年。 ", "outputFormat": "输出 Bessie 和 Elsie 的出生年份之间相差的年数。输入保证可以通过给定的信息求出结果。 ", "hint": "### 样例解释 1\n\n在以上的输入中，\n\n- Elsie 在 Bessie 之前 $12$ 年出生。\n- Mildred 在 Bessie 之前 $9$ 年出生。\n- Gretta 在 Bessie 之前 $17$ 年出生。\n- Paulina 在 Bessie 之后 $9$ 年出生。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] Year of the Cow B", "background": "", "description": "Farmer John 的奶牛们得知最近正在庆祝牛年的到来时十分兴奋。牛年总是奶牛们的最爱。\n\n我们知道，中国历法中每一年所对应的生肖遵循 $12$ 年的周期：Ox, Tiger, Rabbit, Dragon, Snake, Horse, Goat, Monkey, Rooster, Dog, Pig, Rat（牛、虎、兔、龙、蛇、马、羊、猴、鸡、狗、猪、鼠），然后回到牛。\n\n奶牛 Bessie 自豪地说她是在许多年前的一个牛年出生的。她的朋友 Elsie 想要知道她与 Bessie 出生相差多少年，并且希望你能够通过查看农场上若干奶牛出生年份之间的关系来帮助她推算。 ", "inputFormat": "输入的第一行包含一个整数 $N$（$1\\le N\\le 100$）。以下 $N$ 行每行包含一个 $8$ 个单词的短语，指定了两头奶牛的出生年份之间的关系，格式为\n\n`Mildred born in previous Dragon year from Bessie`（Mildred 在 Bessie 出生的前一个龙年出生），\n\n或\n\n`Mildred born in next Dragon year from Bessie`（Mildred 在 Bessie 出生的后一个龙年出生）。\n\n最后一个单词是农场上某一头奶牛的名字，为 `Bessie` 或一头已经在之前的输入中出现过的奶牛。\n\n第一个单词是农场上某一头奶牛的名字，不为 `Bessie` 且未在之前的输入中出现过。所有的奶牛名字不超过 $10$ 个字符，且仅包含字符 `a..z` 或 `A..Z`。\n\n第 $5$ 个单词是上述十二生肖之一。\n\n第 $4$ 个单词是 `previous`（之前）或 `next`（之后）之一。例如，如果短语为 `Mildred born in previous Dragon year from Bessie`，则 Mildred 的出生年份为最为接近且严格处于 Bessie 的出生年份之前（不等于）的龙年。 ", "outputFormat": "输出 Bessie 和 Elsie 的出生年份之间相差的年数。输入保证可以通过给定的信息求出结果。 ", "hint": "### 样例解释 1\n\n在以上的输入中，\n\n- Elsie 在 Bessie 之前 $12$ 年出生。\n- Mildred 在 Bessie 之前 $9$ 年出生。\n- Gretta 在 Bessie 之前 $17$ 年出生。\n- Paulina 在 Bessie 之后 $9$ 年出生。", "locale": "zh-CN"}}}
{"pid": "P9944", "type": "P", "difficulty": 2, "samples": [["8\n0 1\n1 0\n1 1\n1 2\n2 1\n2 2\n3 1\n3 2", "0\n0\n0\n1\n0\n0\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2021", "O2优化"], "title": "[USACO21FEB] Comfortable Cows B", "background": "", "description": "Farmer John 的草地可以被看作是一个由正方形方格组成的巨大的二维方阵（想象一个巨大的棋盘）。初始时，草地上是空的。\n\nFarmer John 将会逐一地将 $N$（$1\\le N\\le 10^5$）头奶牛加入到草地上。第 $i$ 头奶牛将会占据方格 $(x_i,y_i)$，不同于所有已经被其他奶牛占据的方格（$0\\le x_i,y_i\\le 1000$）。\n\n一头奶牛被称为是「舒适的」，如果它水平或竖直方向上与恰好三头其他奶牛相邻。Farmer John 对他的农场上舒适的奶牛数量感兴趣。对 $1\\ldots N$ 中的每一个 $i$，输出第 $i$ 头奶牛加入到草地上之后舒适的奶牛的数量。 ", "inputFormat": "输入的第一行包含一个整数 $N$。以下 $N$ 行每行包含两个空格分隔的整数，表示一头奶牛所在的方格坐标 $(x,y)$。输入保证所有方格的坐标是不同的。 ", "outputFormat": "输出的第 $i$ 行包含前 $i$ 头奶牛加入到草地上之后舒适的奶牛的数量。", "hint": "### 样例解释 1\n\n在前四头奶牛加入之后，位于 $(1,1)$ 的奶牛是舒适的。\n\n在前七头奶牛加入之后，位于 $(2,1)$ 的奶牛是舒适的。\n\n在前八头奶牛加入之后，位于 $(2,1)$ 和 $(2,2)$ 的奶牛是舒适的。 \n\n### 测试点性质\n\n- 测试点 $1-4$ 满足 $N\\le 400$。\n- 测试点 $5-12$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] Comfortable Cows B", "background": "", "description": "Farmer John 的草地可以被看作是一个由正方形方格组成的巨大的二维方阵（想象一个巨大的棋盘）。初始时，草地上是空的。\n\nFarmer John 将会逐一地将 $N$（$1\\le N\\le 10^5$）头奶牛加入到草地上。第 $i$ 头奶牛将会占据方格 $(x_i,y_i)$，不同于所有已经被其他奶牛占据的方格（$0\\le x_i,y_i\\le 1000$）。\n\n一头奶牛被称为是「舒适的」，如果它水平或竖直方向上与恰好三头其他奶牛相邻。Farmer John 对他的农场上舒适的奶牛数量感兴趣。对 $1\\ldots N$ 中的每一个 $i$，输出第 $i$ 头奶牛加入到草地上之后舒适的奶牛的数量。 ", "inputFormat": "输入的第一行包含一个整数 $N$。以下 $N$ 行每行包含两个空格分隔的整数，表示一头奶牛所在的方格坐标 $(x,y)$。输入保证所有方格的坐标是不同的。 ", "outputFormat": "输出的第 $i$ 行包含前 $i$ 头奶牛加入到草地上之后舒适的奶牛的数量。", "hint": "### 样例解释 1\n\n在前四头奶牛加入之后，位于 $(1,1)$ 的奶牛是舒适的。\n\n在前七头奶牛加入之后，位于 $(2,1)$ 的奶牛是舒适的。\n\n在前八头奶牛加入之后，位于 $(2,1)$ 和 $(2,2)$ 的奶牛是舒适的。 \n\n### 测试点性质\n\n- 测试点 $1-4$ 满足 $N\\le 400$。\n- 测试点 $5-12$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9945", "type": "P", "difficulty": 2, "samples": [["2\nNESW\nWSSSEENWNEESSENNNNWWWS", "CW\nCCW"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "数学", "USACO", "2021", "O2优化"], "title": "[USACO21FEB] Clockwise Fence B", "background": "", "description": "围绕 Farmer John 最大的草地的栅栏已经损坏了，如今他终于决定要换一个新的栅栏。\n\n不幸的是，当 Farmer John 在铺设新栅栏时，一只巨大的蜜蜂突然出现，在他的草地上追着他跑，导致最后栅栏被沿着一条相当不规则的路径铺设。栅栏可以用一个字符串表示，每个字符为 `N`（north，北）、`E`（east，东）、`S`（south，南）、`W`（west，西）之一。每个字符表示一米长的一段栅栏。举例来说，如果字符串为 `NESW`，这表示栅栏从起点开始向北延伸 $1$ 米，然后向东延伸 $1$ 米，然后向南延伸 $1$ 米，然后向西延伸 $1$ 米，回到栅栏的起点。\n\n栅栏的结束位置与开始位置相同，而这是栅栏的路径上唯一会被到达多次的位置（从而起始位置是唯一会被再次到达的位置，在栅栏结束之时）。结果，栅栏确实围起了一个草地上连通的区域，尽管这个区域可能形状十分奇特。\n\nFarmer John 想要知道他铺设栅栏的路径是顺时针（当按字符串表示的顺序沿着栅栏的路径行走时被围起的区域位于右侧）还是逆时针（被围起的区域位于左侧）。 ", "inputFormat": "输入的第一行包含一个整数 $N$（$1\\le N\\le 20$）。以下 $N$ 行每行包含一个长度不小于 $4$ 且不超过 $100$ 的字符串，表示一个栅栏的路径。 ", "outputFormat": "对 $N$ 条输入的栅栏路径的每一条，输出一行，为 `CW`（clockwise，顺时针）或 `CCW`（counterclockwise，逆时针）。", "hint": "### 样例解释 1\n\n以下为这两条栅栏路径，用 `@` 表示起始位置：\n\n```plain\n*>*\n^ v\n@<*\n```\n```plain\n  *<*<*<*\n  v     ^\n*<@     *\nv       ^\n* *>*>* *\nv ^   v ^\n* *<* * *\nv   ^ v ^\n*>*>* *>*\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21FEB] Clockwise Fence B", "background": "", "description": "围绕 Farmer John 最大的草地的栅栏已经损坏了，如今他终于决定要换一个新的栅栏。\n\n不幸的是，当 Farmer John 在铺设新栅栏时，一只巨大的蜜蜂突然出现，在他的草地上追着他跑，导致最后栅栏被沿着一条相当不规则的路径铺设。栅栏可以用一个字符串表示，每个字符为 `N`（north，北）、`E`（east，东）、`S`（south，南）、`W`（west，西）之一。每个字符表示一米长的一段栅栏。举例来说，如果字符串为 `NESW`，这表示栅栏从起点开始向北延伸 $1$ 米，然后向东延伸 $1$ 米，然后向南延伸 $1$ 米，然后向西延伸 $1$ 米，回到栅栏的起点。\n\n栅栏的结束位置与开始位置相同，而这是栅栏的路径上唯一会被到达多次的位置（从而起始位置是唯一会被再次到达的位置，在栅栏结束之时）。结果，栅栏确实围起了一个草地上连通的区域，尽管这个区域可能形状十分奇特。\n\nFarmer John 想要知道他铺设栅栏的路径是顺时针（当按字符串表示的顺序沿着栅栏的路径行走时被围起的区域位于右侧）还是逆时针（被围起的区域位于左侧）。 ", "inputFormat": "输入的第一行包含一个整数 $N$（$1\\le N\\le 20$）。以下 $N$ 行每行包含一个长度不小于 $4$ 且不超过 $100$ 的字符串，表示一个栅栏的路径。 ", "outputFormat": "对 $N$ 条输入的栅栏路径的每一条，输出一行，为 `CW`（clockwise，顺时针）或 `CCW`（counterclockwise，逆时针）。", "hint": "### 样例解释 1\n\n以下为这两条栅栏路径，用 `@` 表示起始位置：\n\n```plain\n*>*\n^ v\n@<*\n```\n```plain\n  *<*<*<*\n  v     ^\n*<@     *\nv       ^\n* *>*>* *\nv ^   v ^\n* *<* * *\nv   ^ v ^\n*>*>* *>*\n```", "locale": "zh-CN"}}}
{"pid": "P9946", "type": "P", "difficulty": 1, "samples": [["10 7\nhello my name is Bessie and this is my essay", "hello my\nname is\nBessie\nand this\nis my\nessay"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "字符串", "2020", "USACO", "O2优化"], "title": "[USACO20JAN] Word Processor B", "background": "", "description": "奶牛 Bessie 正在完成她的写作课的一篇作文。由于她写字很难看，她决定用一个文字处理器来输入这篇作文。\n\n这篇作文共有 $N$ 个单词（$1\\le N\\le 100$），用空格分隔。每个单词的长度在 $1$ 到 $15$ 之间，仅由大写和小写字母组成。根据作业的要求，这篇作文需要用一种特别的方式排版：每一行包含的字符不超过 $K$ 个（$1\\le K\\le 80$），空格不计。幸好 Bessie 的文字处理器能够处理这样的要求，它会按照如下的方式：\n\n - 如果 Bessie 输入了一个单词，这个单词能够放进当前行，就放在当前行。\n - 否则，将这个单词放到下一行，然后继续向下一行添加单词。\n\n当然，同一行中的单词之间仍然用一个空格分隔。每一行的结尾都不应当有空格。\n\n很不幸，Bessie 的文字处理器刚好坏了。请帮助她正确地排版她的作文！ ", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $K$。\n\n下一行包含 $N$ 个单词，单词之间用单个空格分隔。所有单词的长度都不超过一行中的字符上限数 $K$。 ", "outputFormat": "输出正确排版的 Bessie 的作文。", "hint": "### 样例解释 1\n\n第一行包含 $7$ 个非空格字符，包括 `hello` 以及 `my`。再加入 `name` 会使得第一行包含 $11>7$ 个非空格字符，所以这个单词会被放到下一行。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20JAN] Word Processor B", "background": "", "description": "奶牛 Bessie 正在完成她的写作课的一篇作文。由于她写字很难看，她决定用一个文字处理器来输入这篇作文。\n\n这篇作文共有 $N$ 个单词（$1\\le N\\le 100$），用空格分隔。每个单词的长度在 $1$ 到 $15$ 之间，仅由大写和小写字母组成。根据作业的要求，这篇作文需要用一种特别的方式排版：每一行包含的字符不超过 $K$ 个（$1\\le K\\le 80$），空格不计。幸好 Bessie 的文字处理器能够处理这样的要求，它会按照如下的方式：\n\n - 如果 Bessie 输入了一个单词，这个单词能够放进当前行，就放在当前行。\n - 否则，将这个单词放到下一行，然后继续向下一行添加单词。\n\n当然，同一行中的单词之间仍然用一个空格分隔。每一行的结尾都不应当有空格。\n\n很不幸，Bessie 的文字处理器刚好坏了。请帮助她正确地排版她的作文！ ", "inputFormat": "输入的第一行包含两个空格分隔的整数 $N$ 和 $K$。\n\n下一行包含 $N$ 个单词，单词之间用单个空格分隔。所有单词的长度都不超过一行中的字符上限数 $K$。 ", "outputFormat": "输出正确排版的 Bessie 的作文。", "hint": "### 样例解释 1\n\n第一行包含 $7$ 个非空格字符，包括 `hello` 以及 `my`。再加入 `name` 会使得第一行包含 $11>7$ 个非空格字符，所以这个单词会被放到下一行。", "locale": "zh-CN"}}}
{"pid": "P9947", "type": "P", "difficulty": 2, "samples": [["5\n4 6 7 6", "3 1 5 2 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2020", "USACO", "O2优化", "枚举"], "title": "[USACO20JAN] Photoshoot B", "background": "", "description": "Farmer John 在给他编号为 $1\\ldots N$ 的 $N$ 头奶牛排队拍照（$2\\le N\\le 10^3$）。FJ 一开始计划从左向右数第 $i$ 个位置排编号为 $a_i$ 的奶牛，他在一张纸上写下了排列 $a_1,a_2,\\ldots,a_N$。不幸的是，这张纸刚刚被 Farmer Nhoj 偷走了！\n\n幸好 FJ 仍然有机会恢复他之前写下的排列。在这张纸被偷走之前，Bessie 记录了序列 $b_1,b_2,\\ldots,b_{N−1}$，对于每一个 $1\\le i<N$ 满足 $b_i=a_i+a_{i+1}$。\n\n基于 Bessie 的信息，帮助 FJ 恢复可以产生序列 $b$\n的“字典序最小”的排列 $a$。排列 $x$ 字典序小于排列 $y$，如果对于某个 $j$，对于所有 $i<j$ 均有 $x_i=y_i$，且有 $x_j<y_j$（换句话说，这两个排列到某个位置之前都相同，在这个位置上 $x$ 小于 $y$）。保证存在至少一个满足条件的 $a$。 ", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n第二行包含 $N−1$ 个空格分隔的整数 $b_1,b_2,\\ldots,b_{N−1}$。 ", "outputFormat": "输出一行，包含 $N$ 个空格分隔的整数 $a_1,a_2,\\ldots,a_N$。 ", "hint": "### 样例解释 1\n\n$a$ 能够产生 $b$，因为 $3+1=4$，$1+5=6$，$5+2=7$，$2+4=6$。\n\n### 测试点性质\n\n - 测试点 $2-4$ 满足 $N\\le 8$。\n - 测试点 $5-10$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20JAN] Photoshoot B", "background": "", "description": "Farmer John 在给他编号为 $1\\ldots N$ 的 $N$ 头奶牛排队拍照（$2\\le N\\le 10^3$）。FJ 一开始计划从左向右数第 $i$ 个位置排编号为 $a_i$ 的奶牛，他在一张纸上写下了排列 $a_1,a_2,\\ldots,a_N$。不幸的是，这张纸刚刚被 Farmer Nhoj 偷走了！\n\n幸好 FJ 仍然有机会恢复他之前写下的排列。在这张纸被偷走之前，Bessie 记录了序列 $b_1,b_2,\\ldots,b_{N−1}$，对于每一个 $1\\le i<N$ 满足 $b_i=a_i+a_{i+1}$。\n\n基于 Bessie 的信息，帮助 FJ 恢复可以产生序列 $b$\n的“字典序最小”的排列 $a$。排列 $x$ 字典序小于排列 $y$，如果对于某个 $j$，对于所有 $i<j$ 均有 $x_i=y_i$，且有 $x_j<y_j$（换句话说，这两个排列到某个位置之前都相同，在这个位置上 $x$ 小于 $y$）。保证存在至少一个满足条件的 $a$。 ", "inputFormat": "输入的第一行包含一个整数 $N$。\n\n第二行包含 $N−1$ 个空格分隔的整数 $b_1,b_2,\\ldots,b_{N−1}$。 ", "outputFormat": "输出一行，包含 $N$ 个空格分隔的整数 $a_1,a_2,\\ldots,a_N$。 ", "hint": "### 样例解释 1\n\n$a$ 能够产生 $b$，因为 $3+1=4$，$1+5=6$，$5+2=7$，$2+4=6$。\n\n### 测试点性质\n\n - 测试点 $2-4$ 满足 $N\\le 8$。\n - 测试点 $5-10$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9948", "type": "P", "difficulty": 3, "samples": [["10 5\n1\n2\n3\n4\n5", "6\n5\n5\n4\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "贪心", "2020", "二分", "USACO", "O2优化"], "title": "[USACO20JAN] Race B", "background": "", "description": "Bessie 正在参加一场 $K$（$1\\le K\\le 10^9$）米的跑步比赛。她从 $0$ 米每秒的速度开始比赛。在每一秒中，她可以选择将她的速度增加 $1$ 米每秒，保持速度不变，或者将她的速度减少 $1$ 米每秒。例如，在第一秒中，她可以将她的速度增加到 $1$ 米每秒，跑 $1$ 米，或者保持她的速度 $0$ 米每秒不变，跑 $0$ 米。Bessie 的速度不会降低到小于零。\n\nBessie 始终朝着终点线的方向跑，她想要花费整数秒的时间完成比赛。此外，她不想在终点时跑得太快：在 Bessie 跑完 $K$ 米的时刻，她希望她的速度不超过 $X$（$1\\le X\\le 10^5$）米每秒。Bessie 想要对于 $N$（$1\\le N\\le 1000$）个不同的 $X$ 值知道她多快可以完成比赛。 ", "inputFormat": "输入的第一行包含两个整数 $K$ 和 $N$。\n\n以下 $N$ 行每行包含一个整数 $X$。 ", "outputFormat": "输出 $N$ 行，每行包含一个整数，表示 Bessie 完成比赛时的速度小于或等于 $X$ 的情况下跑完 $K$ 米需要的最小时间。 ", "hint": "### 样例解释 1\n\n当 $X=1$ 时，一种最优方案为：\n\n1. 将速度增加到 $1$ 米/秒，跑 $1$ 米\n2. 将速度增加到 $2$ 米/秒，跑 $2$ 米，总计跑 $3$ 米\n3. 将速度保持在 $2$ 米/秒，总计跑 $5$ 米\n4. 将速度保持在 $2$ 米/秒，总计跑 $7$ 米\n5. 将速度保持在 $2$ 米/秒，总计跑 $9$ 米\n6. 将速度降低到 $1$ 米/秒，总计跑 $10$ 米\n\n当 $X=3$ 时，一种最优方案为：\n\n1. 将速度增加到 $1$ 米/秒，跑 $1$ 米\n2. 将速度增加到 $2$ 米/秒，总计跑 $3$ 米\n3. 将速度增加到 $3$ 米/秒，总计跑 $6$ 米\n4. 将速度保持在 $3$ 米/秒，总计跑 $9$ 米\n5. 将速度保持在 $3$ 米/秒，总计跑 $12$ 米\n\n注意当 $X=3$ 时，以下方案是不合法的：\n\n1. 将速度增加到 $1$ 米/秒，跑 $1$ 米\n2. 将速度增加到 $2$ 米/秒，总计跑 $3$ 米\n3. 将速度增加到 $3$ 米/秒，总计跑 $6$ 米\n4. 将速度增加到 $4$ 米/秒，总计跑 $10$ 米\n\n这是因为在 Bessie 跑完 $10$ 米的时刻，她的速度是 $4$ 米/秒。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20JAN] Race B", "background": "", "description": "Bessie 正在参加一场 $K$（$1\\le K\\le 10^9$）米的跑步比赛。她从 $0$ 米每秒的速度开始比赛。在每一秒中，她可以选择将她的速度增加 $1$ 米每秒，保持速度不变，或者将她的速度减少 $1$ 米每秒。例如，在第一秒中，她可以将她的速度增加到 $1$ 米每秒，跑 $1$ 米，或者保持她的速度 $0$ 米每秒不变，跑 $0$ 米。Bessie 的速度不会降低到小于零。\n\nBessie 始终朝着终点线的方向跑，她想要花费整数秒的时间完成比赛。此外，她不想在终点时跑得太快：在 Bessie 跑完 $K$ 米的时刻，她希望她的速度不超过 $X$（$1\\le X\\le 10^5$）米每秒。Bessie 想要对于 $N$（$1\\le N\\le 1000$）个不同的 $X$ 值知道她多快可以完成比赛。 ", "inputFormat": "输入的第一行包含两个整数 $K$ 和 $N$。\n\n以下 $N$ 行每行包含一个整数 $X$。 ", "outputFormat": "输出 $N$ 行，每行包含一个整数，表示 Bessie 完成比赛时的速度小于或等于 $X$ 的情况下跑完 $K$ 米需要的最小时间。 ", "hint": "### 样例解释 1\n\n当 $X=1$ 时，一种最优方案为：\n\n1. 将速度增加到 $1$ 米/秒，跑 $1$ 米\n2. 将速度增加到 $2$ 米/秒，跑 $2$ 米，总计跑 $3$ 米\n3. 将速度保持在 $2$ 米/秒，总计跑 $5$ 米\n4. 将速度保持在 $2$ 米/秒，总计跑 $7$ 米\n5. 将速度保持在 $2$ 米/秒，总计跑 $9$ 米\n6. 将速度降低到 $1$ 米/秒，总计跑 $10$ 米\n\n当 $X=3$ 时，一种最优方案为：\n\n1. 将速度增加到 $1$ 米/秒，跑 $1$ 米\n2. 将速度增加到 $2$ 米/秒，总计跑 $3$ 米\n3. 将速度增加到 $3$ 米/秒，总计跑 $6$ 米\n4. 将速度保持在 $3$ 米/秒，总计跑 $9$ 米\n5. 将速度保持在 $3$ 米/秒，总计跑 $12$ 米\n\n注意当 $X=3$ 时，以下方案是不合法的：\n\n1. 将速度增加到 $1$ 米/秒，跑 $1$ 米\n2. 将速度增加到 $2$ 米/秒，总计跑 $3$ 米\n3. 将速度增加到 $3$ 米/秒，总计跑 $6$ 米\n4. 将速度增加到 $4$ 米/秒，总计跑 $10$ 米\n\n这是因为在 Bessie 跑完 $10$ 米的时刻，她的速度是 $4$ 米/秒。 ", "locale": "zh-CN"}}}
{"pid": "P9949", "type": "P", "difficulty": 2, "samples": [["4\n0 0\n0 1\n1 0\n1 2", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "USACO", "O2优化", "枚举"], "title": "[USACO20FEB] Triangles B", "background": "", "description": "Farmer John 想要给他的奶牛们建造一个三角形牧场。\n\n有 $N$（$3\\le N\\le 100$）个栅栏柱子分别位于农场的二维平面上不同的点 $(X_1,Y_1)\\ldots(X_N,Y_N)$。他可以选择其中三个点组成三角形牧场，只要三角形有一条边与 $x$ 轴平行，且有另一条边与 $y$ 轴平行。\n\nFarmer John 可以围成的牧场的最大面积是多少？保证存在至少一个合法的三角形牧场。 ", "inputFormat": "输入的第一行包含整数 $N$。以下 $N$ 行每行包含两个整数 $X_i$ 和 $Y_i$，均在范围 $−10^4\\ldots 10^4$ 之内，描述一个栅栏柱子的位置。 ", "outputFormat": " 由于面积不一定为整数，输出栅栏柱子可以围成的合法三角形的最大面积的**两倍**。 ", "hint": "### 样例解释 1\n\n位于点 $(0,0)$、$(1,0)$ 和 $(1,2)$ 的木桩组成了一个面积为 $1$ 的三角形。所以，答案为 $2\\cdot 1=2$。只有一个其他的三角形，面积为 $0.5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20FEB] Triangles B", "background": "", "description": "Farmer John 想要给他的奶牛们建造一个三角形牧场。\n\n有 $N$（$3\\le N\\le 100$）个栅栏柱子分别位于农场的二维平面上不同的点 $(X_1,Y_1)\\ldots(X_N,Y_N)$。他可以选择其中三个点组成三角形牧场，只要三角形有一条边与 $x$ 轴平行，且有另一条边与 $y$ 轴平行。\n\nFarmer John 可以围成的牧场的最大面积是多少？保证存在至少一个合法的三角形牧场。 ", "inputFormat": "输入的第一行包含整数 $N$。以下 $N$ 行每行包含两个整数 $X_i$ 和 $Y_i$，均在范围 $−10^4\\ldots 10^4$ 之内，描述一个栅栏柱子的位置。 ", "outputFormat": " 由于面积不一定为整数，输出栅栏柱子可以围成的合法三角形的最大面积的**两倍**。 ", "hint": "### 样例解释 1\n\n位于点 $(0,0)$、$(1,0)$ 和 $(1,2)$ 的木桩组成了一个面积为 $1$ 的三角形。所以，答案为 $2\\cdot 1=2$。只有一个其他的三角形，面积为 $0.5$。", "locale": "zh-CN"}}}
{"pid": "P9950", "type": "P", "difficulty": 1, "samples": [["7\nGHHHGHH\nHHGGGHH", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "USACO", "O2优化", "双指针 two-pointer"], "title": "[USACO20FEB] Mad Scientist B", "background": "", "description": "Farmer John 的远房亲戚 Ben 是一个疯狂的科学家。通常这会在家庭聚会时造成不小的摩擦，但这偶尔也会带来些好处，尤其是当 Farmer John 发现他正面对一些有关他的奶牛们的独特而不寻常的问题时。\n\nFarmer John 当前正面对一个有关她的奶牛们的独特而不寻常的问题。他最近订购了 $N$ 头奶牛（$1\\le N\\le 1000$），包含两种不同品种：荷斯坦牛和更赛牛。他在订单中用一个长为 $N$ 的字符串来指定奶牛，其中的字符为 `H`（表示荷斯坦牛）或 `G`（表示更赛牛）。不幸的是，当这些奶牛到达他的农场，他给她们排队时，她们的品种组成的字符串与原先的不同。\n\n我们将这两个字符串称为 $A$ 和 $B$，其中 $A$ 是 Farmer John 原先想要的品种字符组成的字符串，$B$ 是他的奶牛们到达时组成的字符串。Farmer John 并没有简单地检查重新排列 $B$ 中的奶牛是否能得到 $A$，而是请他的远房亲戚 Ben 利用他的科学才华来解决这一问题。\n\n经过数月的研究，Ben 发明了一台不同寻常的机器：奶牛品种转换机 3000，能够选择任意奶牛组成的子串并反转她们的品种：在这个子串中的所有 `H` 变为 `G`，所有 `G` 变为 `H`。Farmer John 想要求出将他当前的序列 $B$ 变为他本来订购时想要的 $A$ 需要使用这台机器的最小次数。然而，Ben 的疯狂的科学家技能并不会处理开发奇异机器以外的事，所以你需要帮助 Farmer John 解决这个计算难题。 ", "inputFormat": "输入的第一行包含 $N$，以下两行包含字符串 $A$ 和 $B$。每个字符串均包含 $N$ 个字符，字符均为 `H` 和 `G` 之一。", "outputFormat": "输出将 $B$ 变为 $A$ 需要使用机器的最小次数。 ", "hint": "### 样例解释 1\n\n首先，FJ 可以仅改变第一个字符组成的子串，将 $B$ 变为 `GHGGGHH`。然后，他可以改变由第三和第四个字符组成的子串，得到 $A$。当然，还存在其他有效的执行两次操作的方案。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20FEB] Mad Scientist B", "background": "", "description": "Farmer John 的远房亲戚 Ben 是一个疯狂的科学家。通常这会在家庭聚会时造成不小的摩擦，但这偶尔也会带来些好处，尤其是当 Farmer John 发现他正面对一些有关他的奶牛们的独特而不寻常的问题时。\n\nFarmer John 当前正面对一个有关她的奶牛们的独特而不寻常的问题。他最近订购了 $N$ 头奶牛（$1\\le N\\le 1000$），包含两种不同品种：荷斯坦牛和更赛牛。他在订单中用一个长为 $N$ 的字符串来指定奶牛，其中的字符为 `H`（表示荷斯坦牛）或 `G`（表示更赛牛）。不幸的是，当这些奶牛到达他的农场，他给她们排队时，她们的品种组成的字符串与原先的不同。\n\n我们将这两个字符串称为 $A$ 和 $B$，其中 $A$ 是 Farmer John 原先想要的品种字符组成的字符串，$B$ 是他的奶牛们到达时组成的字符串。Farmer John 并没有简单地检查重新排列 $B$ 中的奶牛是否能得到 $A$，而是请他的远房亲戚 Ben 利用他的科学才华来解决这一问题。\n\n经过数月的研究，Ben 发明了一台不同寻常的机器：奶牛品种转换机 3000，能够选择任意奶牛组成的子串并反转她们的品种：在这个子串中的所有 `H` 变为 `G`，所有 `G` 变为 `H`。Farmer John 想要求出将他当前的序列 $B$ 变为他本来订购时想要的 $A$ 需要使用这台机器的最小次数。然而，Ben 的疯狂的科学家技能并不会处理开发奇异机器以外的事，所以你需要帮助 Farmer John 解决这个计算难题。 ", "inputFormat": "输入的第一行包含 $N$，以下两行包含字符串 $A$ 和 $B$。每个字符串均包含 $N$ 个字符，字符均为 `H` 和 `G` 之一。", "outputFormat": "输出将 $B$ 变为 $A$ 需要使用机器的最小次数。 ", "hint": "### 样例解释 1\n\n首先，FJ 可以仅改变第一个字符组成的子串，将 $B$ 变为 `GHGGGHH`。然后，他可以改变由第三和第四个字符组成的子串，得到 $A$。当然，还存在其他有效的执行两次操作的方案。 ", "locale": "zh-CN"}}}
{"pid": "P9951", "type": "P", "difficulty": 3, "samples": [["7 2\n2 5\n3 7", "1\n2\n4\n3\n5\n7\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "数学", "2020", "USACO", "O2优化"], "title": "[USACO20FEB] Swapity Swap B", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$1\\le N\\le 100$）站成一排。对于每一个 $1\\le i\\le N$，从左往右数第 $i$ 头奶牛的编号为 $i$。\n\nFarmer John 想到了一个新的奶牛晨练方案。他让她们重复以下包含两个步骤的过程 $K$（$1\\le K\\le 10^9$）次：\n\n1. 当前从左往右数在位置 $A_1\\ldots A_2$ 的奶牛序列反转她们的顺序（$1\\le A1<A2\\le N$）。\n2. 然后，在当前从左往右数在位置 $B_1\\ldots B_2$的奶牛序列反转她们的顺序（$1\\le B_1<B_2\\le N$）。\n\n当奶牛们重复这一过程 $K$ 次后，请对每一个 $1\\le i\\le N$ 输出从左往右数第 $i$ 头奶牛的编号。 ", "inputFormat": "输入的第一行包含 $N$ 和 $K$。第二行包含 $A_1$ 和 $A_2$，第三行包含 $B_1$ 和 $B_2$。", "outputFormat": "在第 $i$ 行输出晨练结束时从左往右数第 $i$ 头奶牛的编号。 ", "hint": "### 样例解释 1\n\n初始时，奶牛们的顺序从左往右为 $[1,2,3,4,5,6,7]$。在这一过程的第一步过后，顺序变为 $[1,5,4,3,2,6,7]$。在这一过程的第二步过后，顺序变为 $[1,5,7,6,2,3,4]$。再重复这两个步骤各一次可以得到样例的输出。 \n\n### 测试点性质\n\n- 测试点 $2-3$ 满足 $K\\le 100$。\n- 测试点 $4-13$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20FEB] Swapity Swap B", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$1\\le N\\le 100$）站成一排。对于每一个 $1\\le i\\le N$，从左往右数第 $i$ 头奶牛的编号为 $i$。\n\nFarmer John 想到了一个新的奶牛晨练方案。他让她们重复以下包含两个步骤的过程 $K$（$1\\le K\\le 10^9$）次：\n\n1. 当前从左往右数在位置 $A_1\\ldots A_2$ 的奶牛序列反转她们的顺序（$1\\le A1<A2\\le N$）。\n2. 然后，在当前从左往右数在位置 $B_1\\ldots B_2$的奶牛序列反转她们的顺序（$1\\le B_1<B_2\\le N$）。\n\n当奶牛们重复这一过程 $K$ 次后，请对每一个 $1\\le i\\le N$ 输出从左往右数第 $i$ 头奶牛的编号。 ", "inputFormat": "输入的第一行包含 $N$ 和 $K$。第二行包含 $A_1$ 和 $A_2$，第三行包含 $B_1$ 和 $B_2$。", "outputFormat": "在第 $i$ 行输出晨练结束时从左往右数第 $i$ 头奶牛的编号。 ", "hint": "### 样例解释 1\n\n初始时，奶牛们的顺序从左往右为 $[1,2,3,4,5,6,7]$。在这一过程的第一步过后，顺序变为 $[1,5,4,3,2,6,7]$。在这一过程的第二步过后，顺序变为 $[1,5,7,6,2,3,4]$。再重复这两个步骤各一次可以得到样例的输出。 \n\n### 测试点性质\n\n- 测试点 $2-3$ 满足 $K\\le 100$。\n- 测试点 $4-13$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9952", "type": "P", "difficulty": 3, "samples": [["14\n10001001000010", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2020", "二分", "USACO", "O2优化"], "title": "[USACO20OPEN] Social Distancing I B", "background": "", "description": "一种新型疾病，COWVID-19，开始在全世界的奶牛之间传播。Farmer John 正在采取尽可能多的预防措施来防止他的牛群被感染。\n\nFarmer John 的牛棚是一个狭长的建筑物，有一排共 $N$ 个牛栏（$2\\le N\\le 10^5$）。有些牛栏里目前有奶牛，有些目前空着。得知“社交距离”的重要性，Farmer John 希望使得 $D$ 尽可能大，其中 $D$ 为最近的两个有奶牛的牛栏的距离。例如，如果牛栏 $3$ 和 $8$ 是最近的有奶牛的牛栏，那么 $D=5$。\n\n最近两头奶牛新来到 Farmer John 的牛群，他需要决定将她们分配到哪两个之前空着的牛栏。请求出他如何放置这两头新来的奶牛，使得 $D$ 仍然尽可能大。Farmer John 不能移动任何已有的奶牛；他只想要给新来的奶牛分配牛栏。 ", "inputFormat": "输入的第一行包含 $N$。下一行包含一个长为 $N$ 的字符串，由 $0$ 和 $1$ 组成，描述牛棚里的牛栏。$0$ 表示空着的牛栏，$1$ 表示有奶牛的牛栏。字符串中包含至少两个 $0$，所以有至少有足够的空间安置两头新来的奶牛。", "outputFormat": "输出 Farmer John 以最优方案在加入两头新来的奶牛后可以达到的最大 $D$ 值（最近的有奶牛的牛栏之间的距离）。 ", "hint": "### 样例解释 1\n\n在这个例子中，Farmer John 可以以这样的方式加入奶牛，使得牛栏分配变为 `10x010010x0010`，其中 `x` 表示新来的奶牛。此时 $D=2$。不可能在加入奶牛之后取到更大的 $D$ 值。 \n\n### 测试点性质\n\n- 测试点 $2-6$ 满足 $N\\le 10$。\n- 测试点 $7-8$ 满足 $N\\le 100$。\n- 测试点 $9-11$ 满足 $N\\le 5000$。\n- 测试点 $12-15$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20OPEN] Social Distancing I B", "background": "", "description": "一种新型疾病，COWVID-19，开始在全世界的奶牛之间传播。Farmer John 正在采取尽可能多的预防措施来防止他的牛群被感染。\n\nFarmer John 的牛棚是一个狭长的建筑物，有一排共 $N$ 个牛栏（$2\\le N\\le 10^5$）。有些牛栏里目前有奶牛，有些目前空着。得知“社交距离”的重要性，Farmer John 希望使得 $D$ 尽可能大，其中 $D$ 为最近的两个有奶牛的牛栏的距离。例如，如果牛栏 $3$ 和 $8$ 是最近的有奶牛的牛栏，那么 $D=5$。\n\n最近两头奶牛新来到 Farmer John 的牛群，他需要决定将她们分配到哪两个之前空着的牛栏。请求出他如何放置这两头新来的奶牛，使得 $D$ 仍然尽可能大。Farmer John 不能移动任何已有的奶牛；他只想要给新来的奶牛分配牛栏。 ", "inputFormat": "输入的第一行包含 $N$。下一行包含一个长为 $N$ 的字符串，由 $0$ 和 $1$ 组成，描述牛棚里的牛栏。$0$ 表示空着的牛栏，$1$ 表示有奶牛的牛栏。字符串中包含至少两个 $0$，所以有至少有足够的空间安置两头新来的奶牛。", "outputFormat": "输出 Farmer John 以最优方案在加入两头新来的奶牛后可以达到的最大 $D$ 值（最近的有奶牛的牛栏之间的距离）。 ", "hint": "### 样例解释 1\n\n在这个例子中，Farmer John 可以以这样的方式加入奶牛，使得牛栏分配变为 `10x010010x0010`，其中 `x` 表示新来的奶牛。此时 $D=2$。不可能在加入奶牛之后取到更大的 $D$ 值。 \n\n### 测试点性质\n\n- 测试点 $2-6$ 满足 $N\\le 10$。\n- 测试点 $7-8$ 满足 $N\\le 100$。\n- 测试点 $9-11$ 满足 $N\\le 5000$。\n- 测试点 $12-15$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9953", "type": "P", "difficulty": 2, "samples": [["6\n7 1\n1 1\n15 1\n3 1\n10 0\n6 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2020", "USACO", "O2优化", "排序"], "title": "[USACO20OPEN] Social Distancing II B", "background": "", "description": "由于高传染性的牛传染病 COWVID-19 的爆发，Farmer John 非常担忧他的奶牛们的健康。\n\n尽管他尽了最大努力使他的 $N$ 头奶牛们（$1\\le N\\le 1000$）践行“社交距离”，还是有许多奶牛不幸染上了疾病。编号为 $1\\ldots N$ 的奶牛们分别位于一条长直道路上的不同位置（相当于一维数轴），奶牛 $i$ 位于位置 $x_i$。Farmer John 知道存在一个半径 $R$，任何与一头被感染的奶牛距离不超过 $R$ 单位的奶牛也会被感染（然后会传染给与其距离 $R$ 单位内的奶牛，以此类推）。\n\n不幸的是，Farmer John 并不确切知道 $R$ 的值。他只知道他的哪些奶牛被感染了。给定这个数据，求出起初感染疾病的奶牛的最小数量。 ", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行每行用两个整数 $x$ 和 $s$ 描述一头奶牛，其中 $x$ 为位置（$0\\le x\\le 10^6$），$s$ 为 $0$ 表示健康的奶牛，$1$ 表示染病的奶牛，并且所有可能因传播而染病的奶牛均已染病。 ", "outputFormat": " 输出在疾病开始传播之前已经得病的奶牛的最小数量。 ", "hint": "### 样例解释 1\n\n在这个例子中，我们知道 $R<3$，否则位于位置 $7$ 的奶牛会传染给位于位置 $10$ 的奶牛。所以，至少 $3$ 头奶牛初始时已被感染：位于位置 $1$ 和 $3$ 的两头奶牛中的一头，位于位置 $6$ 和 $7$ 的两头奶牛中的一头，以及位于位置 $15$ 的奶牛。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20OPEN] Social Distancing II B", "background": "", "description": "由于高传染性的牛传染病 COWVID-19 的爆发，Farmer John 非常担忧他的奶牛们的健康。\n\n尽管他尽了最大努力使他的 $N$ 头奶牛们（$1\\le N\\le 1000$）践行“社交距离”，还是有许多奶牛不幸染上了疾病。编号为 $1\\ldots N$ 的奶牛们分别位于一条长直道路上的不同位置（相当于一维数轴），奶牛 $i$ 位于位置 $x_i$。Farmer John 知道存在一个半径 $R$，任何与一头被感染的奶牛距离不超过 $R$ 单位的奶牛也会被感染（然后会传染给与其距离 $R$ 单位内的奶牛，以此类推）。\n\n不幸的是，Farmer John 并不确切知道 $R$ 的值。他只知道他的哪些奶牛被感染了。给定这个数据，求出起初感染疾病的奶牛的最小数量。 ", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行每行用两个整数 $x$ 和 $s$ 描述一头奶牛，其中 $x$ 为位置（$0\\le x\\le 10^6$），$s$ 为 $0$ 表示健康的奶牛，$1$ 表示染病的奶牛，并且所有可能因传播而染病的奶牛均已染病。 ", "outputFormat": " 输出在疾病开始传播之前已经得病的奶牛的最小数量。 ", "hint": "### 样例解释 1\n\n在这个例子中，我们知道 $R<3$，否则位于位置 $7$ 的奶牛会传染给位于位置 $10$ 的奶牛。所以，至少 $3$ 头奶牛初始时已被感染：位于位置 $1$ 和 $3$ 的两头奶牛中的一头，位于位置 $6$ 和 $7$ 的两头奶牛中的一头，以及位于位置 $15$ 的奶牛。 ", "locale": "zh-CN"}}}
{"pid": "P9954", "type": "P", "difficulty": 3, "samples": [["4 3\n1100\n7 1 2\n5 2 3\n6 2 4", "1 1 Infinity"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2020", "USACO", "O2优化", "枚举", "排序"], "title": "[USACO20OPEN] Cowntact Tracing B", "background": "", "description": "由于高传染性的牛传染病 COWVID-19 的爆发，Farmer John 非常担忧他的奶牛们（编号为 $1\\ldots N$）的健康。\n\n最近，Farmer John 对他的所有奶牛进行了检测，发现有一部分奶牛对该疾病的检测结果呈阳性。利用牛棚内的视频监控，他得以查看最近的奶牛之间的互动行为，结果发现奶牛们互相打招呼时，她们会握蹄，不幸的是这是一种会将疾病从一头奶牛传播给另一头奶牛的行为。Farmer John 汇总了一个添加了时间戳的清单，每条数据的形式为 $(t,x,y)$，表示在时间 $t$，奶牛 $x$ 与奶牛 $y$ 握了蹄。Farmer John 同时还知道以下信息：\n\n（一）他的农场上恰有一头奶牛最初带有携带疾病（我们将这头奶牛称为“零号病人”）。\n\n（二）一旦一头奶牛被感染，她会在接下来的 $K$ 次握蹄中传染疾病（可能会与同一头奶牛握蹄多次）。握蹄 $K$ 次后，她不再在此后的握蹄中传染疾病（因为此时她意识到了她会传染疾病，于是会仔细地洗蹄）。\n\n（三）一旦一头奶牛被感染，她会持续处于被感染状态。\n\n不幸的是，Farmer John 不知道他的 $N$ 头奶牛中的哪一头是零号病人，也不知道 $K$ 的值！基于他的数据，请帮助他缩小这些未知量的范围。保证至少有一种可能的情况。 ", "inputFormat": "输入的第一行包含 $N$（$2\\le N\\le 100$）和 $T$（$1\\le T\\le 250$）。下一行包含一个长为 $N$ 的字符串，每个字符均为 $0$ 或 $1$，表述目前 Farmer John 的 $N$ 头奶牛的状态——$0$ 表示一头健康的奶牛，$1$ 表示一头染病的奶牛。以下 $T$ 行每行包含 Farmer John 的互动清单中的一条记录，由三个整数 $t$、$x$ 和 $y$ 组成，其中 $t$ 为一次互动发生的正整数时间（$t\\le 250$），$x$ 和 $y$ 为范围 $1\\ldots N$ 内的不同整数，表示时间 $t$ 握蹄的两头奶牛。在每一时刻至多只有一次互动发生。 ", "outputFormat": "输出一行，包含三个整数 $x$、$y$ 和 $z$，其中 $x$ 为可能为零号病人的奶牛数量，$y$ 为与数据一致的最小可能 $K$ 值，$z$ 为与数据一致的最大可能 $K$ 值（如果通过数据无法推断 $K$ 的上界，$z$ 输出 `Infinity`）。注意可能有 $K=0$。 ", "hint": "### 样例解释 1\n\n唯一可能是零号病人的是奶牛 $1$。对于所有的 $K>0$，奶牛 $1$ 在时刻 $7$ 感染奶牛 $2$，而奶牛 $3$ 和奶牛 $4$ 均不会被感染。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20OPEN] Cowntact Tracing B", "background": "", "description": "由于高传染性的牛传染病 COWVID-19 的爆发，Farmer John 非常担忧他的奶牛们（编号为 $1\\ldots N$）的健康。\n\n最近，Farmer John 对他的所有奶牛进行了检测，发现有一部分奶牛对该疾病的检测结果呈阳性。利用牛棚内的视频监控，他得以查看最近的奶牛之间的互动行为，结果发现奶牛们互相打招呼时，她们会握蹄，不幸的是这是一种会将疾病从一头奶牛传播给另一头奶牛的行为。Farmer John 汇总了一个添加了时间戳的清单，每条数据的形式为 $(t,x,y)$，表示在时间 $t$，奶牛 $x$ 与奶牛 $y$ 握了蹄。Farmer John 同时还知道以下信息：\n\n（一）他的农场上恰有一头奶牛最初带有携带疾病（我们将这头奶牛称为“零号病人”）。\n\n（二）一旦一头奶牛被感染，她会在接下来的 $K$ 次握蹄中传染疾病（可能会与同一头奶牛握蹄多次）。握蹄 $K$ 次后，她不再在此后的握蹄中传染疾病（因为此时她意识到了她会传染疾病，于是会仔细地洗蹄）。\n\n（三）一旦一头奶牛被感染，她会持续处于被感染状态。\n\n不幸的是，Farmer John 不知道他的 $N$ 头奶牛中的哪一头是零号病人，也不知道 $K$ 的值！基于他的数据，请帮助他缩小这些未知量的范围。保证至少有一种可能的情况。 ", "inputFormat": "输入的第一行包含 $N$（$2\\le N\\le 100$）和 $T$（$1\\le T\\le 250$）。下一行包含一个长为 $N$ 的字符串，每个字符均为 $0$ 或 $1$，表述目前 Farmer John 的 $N$ 头奶牛的状态——$0$ 表示一头健康的奶牛，$1$ 表示一头染病的奶牛。以下 $T$ 行每行包含 Farmer John 的互动清单中的一条记录，由三个整数 $t$、$x$ 和 $y$ 组成，其中 $t$ 为一次互动发生的正整数时间（$t\\le 250$），$x$ 和 $y$ 为范围 $1\\ldots N$ 内的不同整数，表示时间 $t$ 握蹄的两头奶牛。在每一时刻至多只有一次互动发生。 ", "outputFormat": "输出一行，包含三个整数 $x$、$y$ 和 $z$，其中 $x$ 为可能为零号病人的奶牛数量，$y$ 为与数据一致的最小可能 $K$ 值，$z$ 为与数据一致的最大可能 $K$ 值（如果通过数据无法推断 $K$ 的上界，$z$ 输出 `Infinity`）。注意可能有 $K=0$。 ", "hint": "### 样例解释 1\n\n唯一可能是零号病人的是奶牛 $1$。对于所有的 $K>0$，奶牛 $1$ 在时刻 $7$ 感染奶牛 $2$，而奶牛 $3$ 和奶牛 $4$ 均不会被感染。 ", "locale": "zh-CN"}}}
{"pid": "P9955", "type": "P", "difficulty": 1, "samples": [["2 2 11 4 9 7 9", "2 2 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2020", "USACO", "O2优化"], "title": "[USACO20DEC] Do You Know Your ABCs? B", "background": "", "description": "Farmer John 的奶牛正在 \"mooZ\" 视频会议平台上举行每日集会。她们发明了一个简单的数字游戏，为会议增添一些乐趣。\n\nElsie 有三个正整数 $A$、$B$ 和 $C$（$A\\le B\\le C$）。这些数字是保密的，她不会直接透露给她的姐妹 Bessie。她告诉 Bessie 七个范围在 $1\\ldots 10^9$ 之间的整数（不一定各不相同），并宣称这是 $A$、$B$、$C$、$A+B$、$B+C$、$C+A$ 和 $A+B+C$ 的某种排列。\n\n给定这七个整数，请帮助 Bessie 求出 $A$、$B$ 和 $C$。可以证明，答案是唯一的。 ", "inputFormat": "输入一行，包含七个空格分隔的整数。 ", "outputFormat": "输出 $A$、$B$ 和 $C$，用空格分隔。 ", "hint": "### 测试点性质\n\n- 测试点 $2-3$ 满足 $C\\le 50$。\n- 测试点 $4-10$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Do You Know Your ABCs? B", "background": "", "description": "Farmer John 的奶牛正在 \"mooZ\" 视频会议平台上举行每日集会。她们发明了一个简单的数字游戏，为会议增添一些乐趣。\n\nElsie 有三个正整数 $A$、$B$ 和 $C$（$A\\le B\\le C$）。这些数字是保密的，她不会直接透露给她的姐妹 Bessie。她告诉 Bessie 七个范围在 $1\\ldots 10^9$ 之间的整数（不一定各不相同），并宣称这是 $A$、$B$、$C$、$A+B$、$B+C$、$C+A$ 和 $A+B+C$ 的某种排列。\n\n给定这七个整数，请帮助 Bessie 求出 $A$、$B$ 和 $C$。可以证明，答案是唯一的。 ", "inputFormat": "输入一行，包含七个空格分隔的整数。 ", "outputFormat": "输出 $A$、$B$ 和 $C$，用空格分隔。 ", "hint": "### 测试点性质\n\n- 测试点 $2-3$ 满足 $C\\le 50$。\n- 测试点 $4-10$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9956", "type": "P", "difficulty": 2, "samples": [["4\n1 1 2 3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2020", "USACO", "O2优化"], "title": "[USACO20DEC] Daisy Chains B", "background": "", "description": "每天，作为她绕农场行走的一部分，奶牛 Bessie 会经过她最喜爱的草地，其中种有 $N$ 朵花（五颜六色的雏菊），编号为 $1\\ldots N$（$1\\le N\\le 100$），排列成一行。花 $i$ 有 $p_i$ 朵花瓣（$1\\le p_i\\le 1000$）。\n\n作为一名崭露头角的摄影家，Bessie 决定给这些花拍些照片。具体地说，对于每一对满足 $1\\le i\\le j\\le N$ 的花 $(i,j)$，Bessie 会给从花 $i$ 到花 $j$ 之间的所有花（包括 $i$ 和 $j$）拍一张照。\n\n后来 Bessie 查看这些照片时注意到有些照片里存在「平均」的花——一朵恰好有 $P$ 朵花瓣的花，其中 $P$ 等于照片中所有花的花瓣数量的平均值。\n\nBessie 的照片中有几张存在平均的花？ ", "inputFormat": "输入的第一行包含 $N$。第二行包含 $N$ 个空格分隔的整数 $p_1\\ldots p_N$。", "outputFormat": "输出存在平均的花的照片数量。 ", "hint": "### 样例解释 1\n\n每张仅包含一朵花的照片均会被计入答案（在这个样例中有 $4$ 张）。另外，在这个样例中 $(i,j)$ 为 $(1,2)$ 和 $(2,4)$ 所对应的照片也存在平均的花。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Daisy Chains B", "background": "", "description": "每天，作为她绕农场行走的一部分，奶牛 Bessie 会经过她最喜爱的草地，其中种有 $N$ 朵花（五颜六色的雏菊），编号为 $1\\ldots N$（$1\\le N\\le 100$），排列成一行。花 $i$ 有 $p_i$ 朵花瓣（$1\\le p_i\\le 1000$）。\n\n作为一名崭露头角的摄影家，Bessie 决定给这些花拍些照片。具体地说，对于每一对满足 $1\\le i\\le j\\le N$ 的花 $(i,j)$，Bessie 会给从花 $i$ 到花 $j$ 之间的所有花（包括 $i$ 和 $j$）拍一张照。\n\n后来 Bessie 查看这些照片时注意到有些照片里存在「平均」的花——一朵恰好有 $P$ 朵花瓣的花，其中 $P$ 等于照片中所有花的花瓣数量的平均值。\n\nBessie 的照片中有几张存在平均的花？ ", "inputFormat": "输入的第一行包含 $N$。第二行包含 $N$ 个空格分隔的整数 $p_1\\ldots p_N$。", "outputFormat": "输出存在平均的花的照片数量。 ", "hint": "### 样例解释 1\n\n每张仅包含一朵花的照片均会被计入答案（在这个样例中有 $4$ 张）。另外，在这个样例中 $(i,j)$ 为 $(1,2)$ 和 $(2,4)$ 所对应的照片也存在平均的花。 ", "locale": "zh-CN"}}}
{"pid": "P9957", "type": "P", "difficulty": 3, "samples": [["6\nE 3 5\nN 5 3\nE 4 6\nE 10 4\nN 11 2\nN 8 1", "5\n3\nInfinity\nInfinity\n2\n5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2020", "USACO", "O2优化", "枚举", "排序"], "title": "[USACO20DEC] Stuck in a Rut B", "background": "", "description": "Farmer John 最近扩大了他的农场，从奶牛们的角度看来这个农场相当于是无限大了！奶牛们将农场上放牧的区域想作是一个由正方形方格组成的无限大二维方阵，每个方格中均有美味的草（将每个方格看作是棋盘上的一个方格）。Farmer John 的 $N$ 头奶牛（$1\\le N\\le 50$）初始时位于不同的方格中，一部分朝向北面，一部分朝向东面。\n\n每一小时，每头奶牛会执行以下二者之一：\n\n - 如果她当前所在的方格里的草已经被其他奶牛吃掉了，则她会停下。\n - 吃完她当前所在的方格中的所有草，并向她朝向的方向移动一个方格。\n\n经过一段时间，每头奶牛的身后会留下一条被啃秃了的轨迹。\n\n如果两头奶牛在一次移动中移动到了同一个有草的方格，她们会分享这个方格中的草，并在下一个小时继续沿她们朝向的方向移动。\n\n请求出每头奶牛吃到的草的数量。有些奶牛永远不会停下，从而吃到无限多的草。 ", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行，每行描述一头奶牛的起始位置，包含一个字符 `N`（表示朝向北面） 或 `E`（表示朝向东面），以及两个非负整数 $x$ 和 $y$（$0\\le x\\le 10^9$，$0\\le y\\le 10^9$）表示方格的坐标。所有 $x$ 坐标各不相同，所有 $y$ 坐标各不相同。\n\n为了使方向和坐标尽可能明确，如果一头奶牛位于方格 $(x,y)$ 并向北移动，她会到达方格 $(x,y+1)$。如果她向东移动，她会到达方格 $(x+1,y)$。", "outputFormat": "输出 $N$ 行。输出的第 $i$ 行包含输入中的第 $i$ 头奶牛吃到草的方格的数量。如果一头奶牛可以吃到无限多的草，为这头奶牛输出 `Infinity`。", "hint": "### 测试点性质\n\n - 测试点 $2-5$ 中，所有坐标不超过 $100$。\n - 测试点 $6-10$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO20DEC] Stuck in a Rut B", "background": "", "description": "Farmer John 最近扩大了他的农场，从奶牛们的角度看来这个农场相当于是无限大了！奶牛们将农场上放牧的区域想作是一个由正方形方格组成的无限大二维方阵，每个方格中均有美味的草（将每个方格看作是棋盘上的一个方格）。Farmer John 的 $N$ 头奶牛（$1\\le N\\le 50$）初始时位于不同的方格中，一部分朝向北面，一部分朝向东面。\n\n每一小时，每头奶牛会执行以下二者之一：\n\n - 如果她当前所在的方格里的草已经被其他奶牛吃掉了，则她会停下。\n - 吃完她当前所在的方格中的所有草，并向她朝向的方向移动一个方格。\n\n经过一段时间，每头奶牛的身后会留下一条被啃秃了的轨迹。\n\n如果两头奶牛在一次移动中移动到了同一个有草的方格，她们会分享这个方格中的草，并在下一个小时继续沿她们朝向的方向移动。\n\n请求出每头奶牛吃到的草的数量。有些奶牛永远不会停下，从而吃到无限多的草。 ", "inputFormat": "输入的第一行包含 $N$。以下 $N$ 行，每行描述一头奶牛的起始位置，包含一个字符 `N`（表示朝向北面） 或 `E`（表示朝向东面），以及两个非负整数 $x$ 和 $y$（$0\\le x\\le 10^9$，$0\\le y\\le 10^9$）表示方格的坐标。所有 $x$ 坐标各不相同，所有 $y$ 坐标各不相同。\n\n为了使方向和坐标尽可能明确，如果一头奶牛位于方格 $(x,y)$ 并向北移动，她会到达方格 $(x,y+1)$。如果她向东移动，她会到达方格 $(x+1,y)$。", "outputFormat": "输出 $N$ 行。输出的第 $i$ 行包含输入中的第 $i$ 头奶牛吃到草的方格的数量。如果一头奶牛可以吃到无限多的草，为这头奶牛输出 `Infinity`。", "hint": "### 测试点性质\n\n - 测试点 $2-5$ 中，所有坐标不超过 $100$。\n - 测试点 $6-10$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9958", "type": "P", "difficulty": 2, "samples": [["3\n1 2 1\n3 2 1\n1 3 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2019", "USACO", "O2优化"], "title": "[USACO19JAN] Shell Game B", "background": "", "description": "为了消磨时光，奶牛 Bessie 和她的朋友 Elsie 喜欢玩一种她们在农业展览会上看到的游戏。\n\n游戏准备阶段，Bessie 在桌子上放置三个倒置的坚果壳，并在其中一个坚果壳下面藏了一块小的鹅卵石（至少她希望这是一块鹅卵石——她在一块牧场的地上找到的）。随后 Bessie 会两两调换坚果壳，同时 Elsie 试着去猜鹅卵石的位置。\n\n奶牛们在农业展览会上看到的这个游戏的标准形式是玩家可以看到鹅卵石初始的位置，然后要求玩家猜所有交换完成之后鹅卵石最终的位置。\n\n然而，现在奶牛们想要去进行这样一种玩法，Elsie 不知道鹅卵石的初始位置，同时她可以在每一次交换之后猜一下鹅卵石的位置。Bessie 知道正确答案，在游戏结束后会给 Elsie 一个分数，等于她猜对的次数。\n\n给定所有的交换和 Elsie 的猜测，但是不给出鹅卵石的初始位置，请求出 Elsie 最高可能获得的分数。 ", "inputFormat": "输入的第一行包含一个整数 $N$，为交换的次数（$1\\le N\\le 100$）。以下 $N$ 行每行描述了游戏的一个回合，包含三个整数 $a$、$b$ 和 $g$，表示 Bessie 交换了坚果壳 $a$ 和 $b$，然后 Elsie 猜的是坚果壳 $g$。所有这三个数均为 $1$、$2$、$3$ 之一，并且 $a\\neq b$。 ", "outputFormat": "输出 Elsie 可以得到的最高分数。 ", "hint": "### 样例解释 1\n\n在这个例子中，Elsie 最多可以获得 $2$ 分。如果鹅卵石开始时位于坚果壳 $1$ 下面，那么她猜中了一次（最后一次）。如果鹅卵石开始时位于坚果壳 $2$ 下面，那么她猜中了两次（开始两次）。如果鹅卵石开始时位于坚果壳 $3$ 下面，那么她没有猜对任何一次。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO19JAN] Shell Game B", "background": "", "description": "为了消磨时光，奶牛 Bessie 和她的朋友 Elsie 喜欢玩一种她们在农业展览会上看到的游戏。\n\n游戏准备阶段，Bessie 在桌子上放置三个倒置的坚果壳，并在其中一个坚果壳下面藏了一块小的鹅卵石（至少她希望这是一块鹅卵石——她在一块牧场的地上找到的）。随后 Bessie 会两两调换坚果壳，同时 Elsie 试着去猜鹅卵石的位置。\n\n奶牛们在农业展览会上看到的这个游戏的标准形式是玩家可以看到鹅卵石初始的位置，然后要求玩家猜所有交换完成之后鹅卵石最终的位置。\n\n然而，现在奶牛们想要去进行这样一种玩法，Elsie 不知道鹅卵石的初始位置，同时她可以在每一次交换之后猜一下鹅卵石的位置。Bessie 知道正确答案，在游戏结束后会给 Elsie 一个分数，等于她猜对的次数。\n\n给定所有的交换和 Elsie 的猜测，但是不给出鹅卵石的初始位置，请求出 Elsie 最高可能获得的分数。 ", "inputFormat": "输入的第一行包含一个整数 $N$，为交换的次数（$1\\le N\\le 100$）。以下 $N$ 行每行描述了游戏的一个回合，包含三个整数 $a$、$b$ 和 $g$，表示 Bessie 交换了坚果壳 $a$ 和 $b$，然后 Elsie 猜的是坚果壳 $g$。所有这三个数均为 $1$、$2$、$3$ 之一，并且 $a\\neq b$。 ", "outputFormat": "输出 Elsie 可以得到的最高分数。 ", "hint": "### 样例解释 1\n\n在这个例子中，Elsie 最多可以获得 $2$ 分。如果鹅卵石开始时位于坚果壳 $1$ 下面，那么她猜中了一次（最后一次）。如果鹅卵石开始时位于坚果壳 $2$ 下面，那么她猜中了两次（开始两次）。如果鹅卵石开始时位于坚果壳 $3$ 下面，那么她没有猜对任何一次。 ", "locale": "zh-CN"}}}
{"pid": "P9959", "type": "P", "difficulty": 2, "samples": [["4\n1 2 4 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2019", "USACO", "O2优化", "排序"], "title": "[USACO19JAN] Sleepy Cow Sorting B", "background": "", "description": "Farmer John正在尝试将他的 $N$ 头奶牛（$1\\le N\\le 100$），方便起见编号为 $1\\ldots N$，在她们前往牧草地吃早餐之前排好顺序。\n\n当前，这些奶牛以 $p_1,p_2,p_3,\\ldots,p_N$ 的顺序排成一行，Farmer John 站在奶牛 $p_1$ 前面。他想要重新排列这些奶牛，使得她们的顺序变为 $1,2,3,\\ldots,N$，奶牛 $1$ 在 Farmer John 旁边。\n\n今天奶牛们有些困倦，所以任何时刻都只有直接面向 Farmer John 的奶牛会注意听 Farmer John 的指令。每一次他可以命令这头奶牛沿着队伍向后移动 $k$ 步，$k$ 可以是范围 $1\\ldots N−1$ 中的任意数。她经过的 $k$ 头奶牛会向前移动，腾出空间使得她能够插入到队伍中这些奶牛之后的位置。\n\n例如，假设 $N=4$，奶牛们开始时是这样的顺序：\n\n> FJ: $4, 3, 2, 1$\n\n唯一注意 FJ 指令的奶牛是奶牛 $4$。当他命令她向队伍后移动 $2$ 步之后，队伍的顺序会变成：\n\n> FJ: $3, 2, 4, 1$\n\n现在唯一注意 FJ 指令的奶牛是奶牛 $3$，所以第二次他可以给奶牛 $3$ 下命令，如此进行直到奶牛们排好了顺序。\n\nFarmer John 急欲完成排序，这样他就可以回到他的农舍里享用他自己的早餐了。请帮助他求出将奶牛们排好顺序所需要的最小操作次数。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个空格分隔的整数，$p_1,p_2,p_3,\\ldots,p_N$，表示奶牛们的起始顺序。 ", "outputFormat": "输出一个整数，为 Farmer John 采用最佳策略可以将这 $N$ 头奶牛排好顺序所需要的操作次数。 ", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO19JAN] Sleepy Cow Sorting B", "background": "", "description": "Farmer John正在尝试将他的 $N$ 头奶牛（$1\\le N\\le 100$），方便起见编号为 $1\\ldots N$，在她们前往牧草地吃早餐之前排好顺序。\n\n当前，这些奶牛以 $p_1,p_2,p_3,\\ldots,p_N$ 的顺序排成一行，Farmer John 站在奶牛 $p_1$ 前面。他想要重新排列这些奶牛，使得她们的顺序变为 $1,2,3,\\ldots,N$，奶牛 $1$ 在 Farmer John 旁边。\n\n今天奶牛们有些困倦，所以任何时刻都只有直接面向 Farmer John 的奶牛会注意听 Farmer John 的指令。每一次他可以命令这头奶牛沿着队伍向后移动 $k$ 步，$k$ 可以是范围 $1\\ldots N−1$ 中的任意数。她经过的 $k$ 头奶牛会向前移动，腾出空间使得她能够插入到队伍中这些奶牛之后的位置。\n\n例如，假设 $N=4$，奶牛们开始时是这样的顺序：\n\n> FJ: $4, 3, 2, 1$\n\n唯一注意 FJ 指令的奶牛是奶牛 $4$。当他命令她向队伍后移动 $2$ 步之后，队伍的顺序会变成：\n\n> FJ: $3, 2, 4, 1$\n\n现在唯一注意 FJ 指令的奶牛是奶牛 $3$，所以第二次他可以给奶牛 $3$ 下命令，如此进行直到奶牛们排好了顺序。\n\nFarmer John 急欲完成排序，这样他就可以回到他的农舍里享用他自己的早餐了。请帮助他求出将奶牛们排好顺序所需要的最小操作次数。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个空格分隔的整数，$p_1,p_2,p_3,\\ldots,p_N$，表示奶牛们的起始顺序。 ", "outputFormat": "输出一个整数，为 Farmer John 采用最佳策略可以将这 $N$ 头奶牛排好顺序所需要的操作次数。 ", "hint": "", "locale": "zh-CN"}}}
{"pid": "P9960", "type": "P", "difficulty": 2, "samples": [["4\nbird 2 flies eatsworms\ncow 4 eatsgrass isawesome makesmilk goesmoo\nsheep 1 eatsgrass\ngoat 2 makesmilk eatsgrass", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2019", "USACO", "O2优化"], "title": "[USACO19JAN] Guess the Animal B", "background": "", "description": "奶牛 Bessie 和她的朋友 Elsie 厌倦了她们的坚果壳游戏，她们想要玩另一个叫做“猜动物”的常见游戏。\n\n游戏开始时，Bessie 会想好一种动物（大部分时候，她想的都是奶牛，这使得游戏相当无聊，但是偶尔 Bessie 也能有些新意，想一些别的）。随后 Elsie 会通过问一些问题来猜出 Bessie 选择的动物。每个问题都是询问这种动物是否具有某个特定的特征，Bessie 对于每个问题回答“是”或“不是”。例如：\n\nElsie：“这种动物是能飞的吗？”  \nBessie：“不是。”  \nElsie：“这种动物是吃草的吗？”  \nBessie：“是。”  \nElsie：“这种动物是能产奶的吗？”  \nBessie：“是。”  \nElsie：“这种动物是会哞哞叫的吗？”  \nBessie：“是。”  \nElsie：“这样的话我想这种动物是奶牛。”  \nBessie：“猜对了！”  \n\n如果我们将所有具备符合 Elsie 到目前为止所提出的问题的特征的动物的集合称为“可行集”，那么 Elsie 会持续进行提问直到可行集仅包含一种动物，然后她会把这种动物作为她的答案。对于每个问题，Elsie 会选择某种动物的一个特征进行询问（即使这个特征并不能进一步帮助她缩小可行集）。她不会关于同一个特征询问两次。\n\n给定 Bessie 和 Elsie 知道的所有动物以及它们的特征，请求出 Elsie 在猜出正确的动物之前能够得到的“是”的回答的最大数量。 ", "inputFormat": "输入的第一行包含动物的数量 $N$（$2\\le N\\le 100$）。以下 $N$ 行每行描述了一种动物。每一行开始是这种动物的名称，接下来是一个整数 $K$（$1\\le K\\le 100$），接下来是这种动物的K个特征。动物的名称和特征是至多 $20$ 个小写字母（`a..z`）组成的字符串。没有两种动物具有完全相同的特征。 ", "outputFormat": "输出游戏结束之前 Elsie 可能得到的“是”的回答的最大数量。 ", "hint": "### 样例解释 1\n\n在这个例子中，Elsie 可能在对话中获得 $3$ 个“是”的回答（题目中的例子），并且不可能进行包含超过 $3$ 个“是”的回答的对话。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO19JAN] Guess the Animal B", "background": "", "description": "奶牛 Bessie 和她的朋友 Elsie 厌倦了她们的坚果壳游戏，她们想要玩另一个叫做“猜动物”的常见游戏。\n\n游戏开始时，Bessie 会想好一种动物（大部分时候，她想的都是奶牛，这使得游戏相当无聊，但是偶尔 Bessie 也能有些新意，想一些别的）。随后 Elsie 会通过问一些问题来猜出 Bessie 选择的动物。每个问题都是询问这种动物是否具有某个特定的特征，Bessie 对于每个问题回答“是”或“不是”。例如：\n\nElsie：“这种动物是能飞的吗？”  \nBessie：“不是。”  \nElsie：“这种动物是吃草的吗？”  \nBessie：“是。”  \nElsie：“这种动物是能产奶的吗？”  \nBessie：“是。”  \nElsie：“这种动物是会哞哞叫的吗？”  \nBessie：“是。”  \nElsie：“这样的话我想这种动物是奶牛。”  \nBessie：“猜对了！”  \n\n如果我们将所有具备符合 Elsie 到目前为止所提出的问题的特征的动物的集合称为“可行集”，那么 Elsie 会持续进行提问直到可行集仅包含一种动物，然后她会把这种动物作为她的答案。对于每个问题，Elsie 会选择某种动物的一个特征进行询问（即使这个特征并不能进一步帮助她缩小可行集）。她不会关于同一个特征询问两次。\n\n给定 Bessie 和 Elsie 知道的所有动物以及它们的特征，请求出 Elsie 在猜出正确的动物之前能够得到的“是”的回答的最大数量。 ", "inputFormat": "输入的第一行包含动物的数量 $N$（$2\\le N\\le 100$）。以下 $N$ 行每行描述了一种动物。每一行开始是这种动物的名称，接下来是一个整数 $K$（$1\\le K\\le 100$），接下来是这种动物的K个特征。动物的名称和特征是至多 $20$ 个小写字母（`a..z`）组成的字符串。没有两种动物具有完全相同的特征。 ", "outputFormat": "输出游戏结束之前 Elsie 可能得到的“是”的回答的最大数量。 ", "hint": "### 样例解释 1\n\n在这个例子中，Elsie 可能在对话中获得 $3$ 个“是”的回答（题目中的例子），并且不可能进行包含超过 $3$ 个“是”的回答的对话。 ", "locale": "zh-CN"}}}
{"pid": "P9961", "type": "P", "difficulty": 7, "samples": [["6\n1 4 5 3 2 6\n", "1\n2 3 5 5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "THUPC"], "title": "[THUPC 2024 初赛] 排序大师", "background": "", "description": "由于你是排序大师，你经常被路过的游客刁难，要求用一些奇怪的操作给序列排序。\n\n由于你是远近闻名的排序大师，邻国的排序萌新小 I 慕名前来拜访，留下了一个长度为 $n$ 的排列 $a_1, a_2 \\cdots, a_n$，并要求你用以下操作将排列升序排序：\n\n- 定义 $a_{i \\sim j} = \\{a_i,a_{i+1},\\cdots, a_j\\}$。选定 $1 \\le i \\le j < k \\le l \\le n$，交换 $a_{i \\sim j}$ 和 $a_{k \\sim l}$，即交换过后序列变为 $a_{1 \\sim i-1}, a_{k \\sim l}, a_{j+1 \\sim k-1}, a_{i \\sim j}, a_{l+1 \\sim n}$。\n\n由于你是因精益求精而远近闻名的排序大师，你需要给出一个排序方案**最小化**操作次数。", "inputFormat": "输入的第一行一个整数 $n(1 \\le n \\le 2000)$ 表示序列长度，第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n (1 \\le a_i \\le n)$ 描述排列。", "outputFormat": "输出的第一行一个整数 $s$ 表示你给出的方案的步数，接下来 $s$ 行每行四个整数 $i,j,k,l$ 表示一次操作。若有多个方案，输出任意一个即可。", "hint": "### 样例 \\#1 解释\n选定 $i = 2, j = 3, k = 5, l = 5$，$\\colorbox{white}{\\color{black}{1}\\color{blue}{45}\\color{black}{3}\\color{red}{2}\\color{black}{6}}$ 变为 $\\colorbox{white}{\\color{black}{1}\\color{red}{2}\\color{black}{3}\\color{blue}{45}\\color{black}{6}}$。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 排序大师", "background": "", "description": "由于你是排序大师，你经常被路过的游客刁难，要求用一些奇怪的操作给序列排序。\n\n由于你是远近闻名的排序大师，邻国的排序萌新小 I 慕名前来拜访，留下了一个长度为 $n$ 的排列 $a_1, a_2 \\cdots, a_n$，并要求你用以下操作将排列升序排序：\n\n- 定义 $a_{i \\sim j} = \\{a_i,a_{i+1},\\cdots, a_j\\}$。选定 $1 \\le i \\le j < k \\le l \\le n$，交换 $a_{i \\sim j}$ 和 $a_{k \\sim l}$，即交换过后序列变为 $a_{1 \\sim i-1}, a_{k \\sim l}, a_{j+1 \\sim k-1}, a_{i \\sim j}, a_{l+1 \\sim n}$。\n\n由于你是因精益求精而远近闻名的排序大师，你需要给出一个排序方案**最小化**操作次数。", "inputFormat": "输入的第一行一个整数 $n(1 \\le n \\le 2000)$ 表示序列长度，第二行 $n$ 个整数 $a_1,a_2,\\cdots,a_n (1 \\le a_i \\le n)$ 描述排列。", "outputFormat": "输出的第一行一个整数 $s$ 表示你给出的方案的步数，接下来 $s$ 行每行四个整数 $i,j,k,l$ 表示一次操作。若有多个方案，输出任意一个即可。", "hint": "### 样例 \\#1 解释\n选定 $i = 2, j = 3, k = 5, l = 5$，$\\colorbox{white}{\\color{black}{1}\\color{blue}{45}\\color{black}{3}\\color{red}{2}\\color{black}{6}}$ 变为 $\\colorbox{white}{\\color{black}{1}\\color{red}{2}\\color{black}{3}\\color{blue}{45}\\color{black}{6}}$。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN"}}}
{"pid": "P9962", "type": "P", "difficulty": 7, "samples": [["10 4\n1 2\n2 3\n2 4\n3 5\n3 6\n3 7\n4 10\n6 8\n8 9\n", "16\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["平衡树", "2024", "凸包", "THUPC", "斜率维护技巧 slope trick", "闵可夫斯基和 Minkowski sum"], "title": "[THUPC 2024 初赛] 一棵树", "background": "", "description": "这里有一棵树，具体的，这是一张有 $n$ 个节点和 $n-1$ 条边组成的无向联通图。\n\n每个节点初始颜色为白色，你需要恰好将其中 $k$ 个节点染成黑色，定义一条边的权值是，断开这条边之后，两个连通块的黑色节点个数之差，定义一棵树的权值为所有边的权值求和，你需要最小化整棵树的权值。", "inputFormat": "第一行两个正整数 $n,k$（$1\\leq k\\leq n\\leq 5\\times10^5$）。\n\n接下来 $n-1$ 行，每行两个正整数 $x,y$ 表示树上的一条边。", "outputFormat": "输出共 $1$ 行，表示最优的染色方案下，这棵树的权值的最小值。", "hint": "### 样例 \\#1 解释\n\n下图展示了一种满足条件的染色方案，边上的数字表示边权。\n\n![fig:sample](https://cdn.luogu.com.cn/upload/image_hosting/9i3ztp9r.png)\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 一棵树", "background": "", "description": "这里有一棵树，具体的，这是一张有 $n$ 个节点和 $n-1$ 条边组成的无向联通图。\n\n每个节点初始颜色为白色，你需要恰好将其中 $k$ 个节点染成黑色，定义一条边的权值是，断开这条边之后，两个连通块的黑色节点个数之差，定义一棵树的权值为所有边的权值求和，你需要最小化整棵树的权值。", "inputFormat": "第一行两个正整数 $n,k$（$1\\leq k\\leq n\\leq 5\\times10^5$）。\n\n接下来 $n-1$ 行，每行两个正整数 $x,y$ 表示树上的一条边。", "outputFormat": "输出共 $1$ 行，表示最优的染色方案下，这棵树的权值的最小值。", "hint": "### 样例 \\#1 解释\n\n下图展示了一种满足条件的染色方案，边上的数字表示边权。\n\n![fig:sample](https://cdn.luogu.com.cn/upload/image_hosting/9i3ztp9r.png)\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN"}}}
{"pid": "P9963", "type": "P", "difficulty": 4, "samples": [["3 0.5 1 2\n", "1.000000\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2024", "Special Judge", "THUPC"], "title": "[THUPC 2024 初赛] 前缀和", "background": "", "description": "小兰很喜欢随机数。\n\nTA 首先选定了一个实数 $0 < p < 1$，然后生成了 $n$ 个随机数 $x_1,\\dots,x_n$，每个数是独立按照如下方式生成的：\n\n- $x_i$ 有 $p$ 的概率是 $1$，有 $(1-p)p$ 的概率是 $2$，有 $(1-p)^2p$ 的概率是 $3$，以此类推。\n\n生成完这些随机数之后，小艾对这个数列求了前缀和，得到了数列 $y_1,\\dots,y_n$。\n\n给定 $1\\leq l\\leq r\\leq n$，小兰想知道，期望有多少 $y_i$ 落在 $[l, r]$ 内？\n", "inputFormat": "一行输入四个数 $n, p, l, r$。保证 $1\\leq l\\leq r\\leq n\\leq 10^9$，$p$ 的位数不超过 $6$。", "outputFormat": "输出一个实数，表示答案。你需要保证答案的绝对或相对误差不超过 $10^{-6}$。", "hint": "### 样例 \\#1 解释\n\n有 $1/4$ 的概率，$x_1=1$ 而 $x_2>1$，此时只有 $y_1$ 落在 $[1, 2]$ 内。\n\n有 $1/4$ 的概率，$x_1=1$ 且 $x_2=1$，此时 $y_1,y_2$ 落在 $[1, 2]$ 内。\n\n有 $1/4$ 的概率，$x_1=2$，此时只有 $y_1$ 落在 $[1, 2]$ 内。\n\n所以期望是 $1/4\\cdot (1 + 2 + 1) = 1$。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 前缀和", "background": "", "description": "小兰很喜欢随机数。\n\nTA 首先选定了一个实数 $0 < p < 1$，然后生成了 $n$ 个随机数 $x_1,\\dots,x_n$，每个数是独立按照如下方式生成的：\n\n- $x_i$ 有 $p$ 的概率是 $1$，有 $(1-p)p$ 的概率是 $2$，有 $(1-p)^2p$ 的概率是 $3$，以此类推。\n\n生成完这些随机数之后，小艾对这个数列求了前缀和，得到了数列 $y_1,\\dots,y_n$。\n\n给定 $1\\leq l\\leq r\\leq n$，小兰想知道，期望有多少 $y_i$ 落在 $[l, r]$ 内？\n", "inputFormat": "一行输入四个数 $n, p, l, r$。保证 $1\\leq l\\leq r\\leq n\\leq 10^9$，$p$ 的位数不超过 $6$。", "outputFormat": "输出一个实数，表示答案。你需要保证答案的绝对或相对误差不超过 $10^{-6}$。", "hint": "### 样例 \\#1 解释\n\n有 $1/4$ 的概率，$x_1=1$ 而 $x_2>1$，此时只有 $y_1$ 落在 $[1, 2]$ 内。\n\n有 $1/4$ 的概率，$x_1=1$ 且 $x_2=1$，此时 $y_1,y_2$ 落在 $[1, 2]$ 内。\n\n有 $1/4$ 的概率，$x_1=2$，此时只有 $y_1$ 落在 $[1, 2]$ 内。\n\n所以期望是 $1/4\\cdot (1 + 2 + 1) = 1$。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN"}}}
{"pid": "P9964", "type": "P", "difficulty": 6, "samples": [["3\n^vv\n", "2 0\n"], ["8\nv^v^^^^v\n", "6 15\n"], ["40\nv^vv^v^^v^^vvvv^v^^v^^^vv^^vvvv^v^^v^^^v\n", "14 201\n"], ["56\nv^vvvvvvv^v^^vv^v^^v^^^^v^^v^vvvv^^vvvv^v^^v^^^vv^^vv^v^\n", "24 663\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "THUPC"], "title": "[THUPC 2024 初赛] 多折较差验证", "background": "", "description": "临海听潮意，入林闻籁鸣。这是一座依山傍水、宁静祥和的小镇，在这里人们很少担心自己家里的物品故障损坏，因为 Kanan 总能帮大家修好。Kanan 是这片地区首屈一指的机械师；虽然她还年轻，但是娴熟的技艺加上慷慨的性格使得她平时总会收到人们的修理委托，据说就连那位遗世独立的魔王遇到了问题都得求助她。在帮人修理时， Kanan 会接触到千奇百怪的使用说明书。其中一些说明书有着不可思议的折叠结构，Kanan 为了理解机械的构造会在修理之前展开说明书，可在修好之后按照原来的折痕折回原状却比修理本身更费劲。\n\n对于所有折痕互相平行的说明书，可以按照说明书上文字的阅读顺序从上到下给每条折痕分别编号 $1, 2, \\cdots, N$，这 $N$ 条折痕将说明书分成了 $(N+1)$ 条纸带。每条折痕可能为两种形态之一：一种是垂直纸面向内凸出，对应将纸的上下两半向前对折；一种是垂直纸面向外凸出，对应将上下两半向后对折。根据折痕截面的形状，分别使用小写字母 `v` 表示向内凸出的折痕，`^` （ASCII 码为 $94$）表示向外凸出的折痕。假设所有纸带的宽度都是一样的，并且折纸的过程中说明书不发生形变，那么沿着一条折痕对折后两侧的纸能够重合，当且仅当两侧的折痕是相反的；即，如果沿着第 $k$ 条折痕折叠，那么对于所有满足 $1\\le k-m<k+m\\le N$ 的正整数 $m$，第 $(k-m)$ 条折痕和第 $(k+m)$ 条折痕的形态是相反的。例如，对于折痕依次为 `v^v^^^^v` 的说明书，可以沿其第 $7$ 条折痕进行折叠。根据定义可知，一张说明书总能沿着第一条或最后一条折痕进行折叠。折叠之后的说明书可以用被折叠的折痕两侧中，剩余折痕数量较多一侧的折痕表示，如 `v^v^^^^v` 沿着第 $7$ 条折痕折叠后得到 `v^v^^^`。如果被折叠的折痕两侧折痕数量相等，那么用哪一侧的折痕表示折叠后的纸都可以，因为折痕在三维空间中是旋转对称的。特别地，对只剩下一条折痕的说明书，即 `v` 或 `^` 进行折叠后，所有 $(N+1)$ 条纸带都重叠在一起，此时称这张说明书被折叠整齐。\n\n虽然按顺序依次折叠每一条折痕，总能将说明书折叠整齐，但 Kanan 觉得这样并不美观。一种美观的折法应该尽量少折，并且每次折的时候折痕两侧应该尽可能的对称。定义一种折法的不对称程度为每次折叠时，被折叠的折痕两侧的折痕数量之差的总和。给出一张说明书的折痕，Kanan 想知道最少需要折多少次才能将这张说明书折叠整齐，以及所有折叠次数最少的折法中，不对称程度的最小值。\n", "inputFormat": "输入的第一行包含一个正整数 $N$，表示折痕的条数。保证 $1\\le N\\le 5000$。\n\n输入的第二行包含一个字符串 $s$，按顺序表示每条折痕。保证 $|s|=N$，且 $s$ 仅由 `v` 和 `^` 组成。", "outputFormat": "输出仅一行，包括两个非负整数，分别表示最少的折叠次数和最小化折叠次数的前提下的最小不对称程度，两个数之间用一个空格隔开。", "hint": "### 样例 \\#1 解释\n\n如果先沿着中间的折痕对折，那么两侧的纸恰好重合，此时再对折一次即可将说明书折叠整齐。\n\n### 子任务\n\n对于所有数据，保证 $1\\le N\\le 5000$，$|s|=N$ 且 $s$ 仅由 `v` 和 `^` 组成。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 多折较差验证", "background": "", "description": "临海听潮意，入林闻籁鸣。这是一座依山傍水、宁静祥和的小镇，在这里人们很少担心自己家里的物品故障损坏，因为 Kanan 总能帮大家修好。Kanan 是这片地区首屈一指的机械师；虽然她还年轻，但是娴熟的技艺加上慷慨的性格使得她平时总会收到人们的修理委托，据说就连那位遗世独立的魔王遇到了问题都得求助她。在帮人修理时， Kanan 会接触到千奇百怪的使用说明书。其中一些说明书有着不可思议的折叠结构，Kanan 为了理解机械的构造会在修理之前展开说明书，可在修好之后按照原来的折痕折回原状却比修理本身更费劲。\n\n对于所有折痕互相平行的说明书，可以按照说明书上文字的阅读顺序从上到下给每条折痕分别编号 $1, 2, \\cdots, N$，这 $N$ 条折痕将说明书分成了 $(N+1)$ 条纸带。每条折痕可能为两种形态之一：一种是垂直纸面向内凸出，对应将纸的上下两半向前对折；一种是垂直纸面向外凸出，对应将上下两半向后对折。根据折痕截面的形状，分别使用小写字母 `v` 表示向内凸出的折痕，`^` （ASCII 码为 $94$）表示向外凸出的折痕。假设所有纸带的宽度都是一样的，并且折纸的过程中说明书不发生形变，那么沿着一条折痕对折后两侧的纸能够重合，当且仅当两侧的折痕是相反的；即，如果沿着第 $k$ 条折痕折叠，那么对于所有满足 $1\\le k-m<k+m\\le N$ 的正整数 $m$，第 $(k-m)$ 条折痕和第 $(k+m)$ 条折痕的形态是相反的。例如，对于折痕依次为 `v^v^^^^v` 的说明书，可以沿其第 $7$ 条折痕进行折叠。根据定义可知，一张说明书总能沿着第一条或最后一条折痕进行折叠。折叠之后的说明书可以用被折叠的折痕两侧中，剩余折痕数量较多一侧的折痕表示，如 `v^v^^^^v` 沿着第 $7$ 条折痕折叠后得到 `v^v^^^`。如果被折叠的折痕两侧折痕数量相等，那么用哪一侧的折痕表示折叠后的纸都可以，因为折痕在三维空间中是旋转对称的。特别地，对只剩下一条折痕的说明书，即 `v` 或 `^` 进行折叠后，所有 $(N+1)$ 条纸带都重叠在一起，此时称这张说明书被折叠整齐。\n\n虽然按顺序依次折叠每一条折痕，总能将说明书折叠整齐，但 Kanan 觉得这样并不美观。一种美观的折法应该尽量少折，并且每次折的时候折痕两侧应该尽可能的对称。定义一种折法的不对称程度为每次折叠时，被折叠的折痕两侧的折痕数量之差的总和。给出一张说明书的折痕，Kanan 想知道最少需要折多少次才能将这张说明书折叠整齐，以及所有折叠次数最少的折法中，不对称程度的最小值。\n", "inputFormat": "输入的第一行包含一个正整数 $N$，表示折痕的条数。保证 $1\\le N\\le 5000$。\n\n输入的第二行包含一个字符串 $s$，按顺序表示每条折痕。保证 $|s|=N$，且 $s$ 仅由 `v` 和 `^` 组成。", "outputFormat": "输出仅一行，包括两个非负整数，分别表示最少的折叠次数和最小化折叠次数的前提下的最小不对称程度，两个数之间用一个空格隔开。", "hint": "### 样例 \\#1 解释\n\n如果先沿着中间的折痕对折，那么两侧的纸恰好重合，此时再对折一次即可将说明书折叠整齐。\n\n### 子任务\n\n对于所有数据，保证 $1\\le N\\le 5000$，$|s|=N$ 且 $s$ 仅由 `v` 和 `^` 组成。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN"}}}
{"pid": "P9965", "type": "P", "difficulty": 5, "samples": [["2\n1 2\n1 2\n1 0\n", "4 3\n4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "2024", "THUPC"], "title": "[THUPC 2024 初赛] 转化", "background": "小 E 在玩 Somzig 游戏的时候因为操作时间不够绷不住了，于是就有了这个题。", "description": "小 E 有 $n$ 种颜色的球，其中第 $i$ 种有 $a_i$ 个。有两类工具，第一类可以把一个指定颜色的球变成一个**任意**颜色的球；第二类可以把一个指定颜色的球变成两个**这种**颜色的球。一个变化之后的球也可以通过工具产生新的变化。关于第 $i$ 种颜色的第一类工具有 $b_i$ 个，第二类工具有 $c_i$ 个。小 E 想知道，如果每一**个**工具最多只能使用一次，那么对于每种颜色 $i$，第 $i$ 种颜色的球最后最多能有多少个。以及，小 E 最后最多能有多少个球。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，其中第 $i$ 个表示 $a_i$。\n\n第三行 $n$ 个整数，其中第 $i$ 个表示 $b_i$。\n\n第四行 $n$ 个整数，其中第 $i$ 个表示 $c_i$。", "outputFormat": "第一行 $n$ 个整数，其中第 $i$ 个表示如果每个工具最多使用一次，那么小 E 最后第 $i$ 种颜色的球最多有多少个。\n\n第二行一个整数，表示如果每个工具最多使用一次，那么小 E 最后最多能有多少个球。", "hint": "### 子任务\n\n保证 $1\\le n \\le 351493$。\n\n保证 $0\\le a_i,b_i,c_i\\le 10^9$。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 转化", "background": "小 E 在玩 Somzig 游戏的时候因为操作时间不够绷不住了，于是就有了这个题。", "description": "小 E 有 $n$ 种颜色的球，其中第 $i$ 种有 $a_i$ 个。有两类工具，第一类可以把一个指定颜色的球变成一个**任意**颜色的球；第二类可以把一个指定颜色的球变成两个**这种**颜色的球。一个变化之后的球也可以通过工具产生新的变化。关于第 $i$ 种颜色的第一类工具有 $b_i$ 个，第二类工具有 $c_i$ 个。小 E 想知道，如果每一**个**工具最多只能使用一次，那么对于每种颜色 $i$，第 $i$ 种颜色的球最后最多能有多少个。以及，小 E 最后最多能有多少个球。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行 $n$ 个整数，其中第 $i$ 个表示 $a_i$。\n\n第三行 $n$ 个整数，其中第 $i$ 个表示 $b_i$。\n\n第四行 $n$ 个整数，其中第 $i$ 个表示 $c_i$。", "outputFormat": "第一行 $n$ 个整数，其中第 $i$ 个表示如果每个工具最多使用一次，那么小 E 最后第 $i$ 种颜色的球最多有多少个。\n\n第二行一个整数，表示如果每个工具最多使用一次，那么小 E 最后最多能有多少个球。", "hint": "### 子任务\n\n保证 $1\\le n \\le 351493$。\n\n保证 $0\\le a_i,b_i,c_i\\le 10^9$。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN"}}}
{"pid": "P9966", "type": "P", "difficulty": 6, "samples": [["2 2 5\n0 0\nMOVE 1 1\nMOVE 0 1\n0 1\nTRIGGER MOVE: MOVE 0 1\nSLACKOFF\n", "Robot 0 moves its right hand towards Robot 1.\nRobot 1 moves its left hand towards Robot 1.\nRobot 0 moves its left hand towards Robot 1.\nRobot 1 moves its left hand towards Robot 0.\nRobot 1 slacks off.\n"], ["2 2 4\n0 1\nACTIVATE 1\nSLACKOFF\n0 1\nSWAP 0 2 2\nMIRROR 0 1\n", "Robot 0 activates Robot 1.\nRobot 1 swaps a line of command with Robot 0.\nRobot 1 slacks off.\nRobot 0 modifies a line of command of Robot 0.\n"], ["3 2 6\n1 2\nACTIVATE 0\nACTIVATE 0\n2 1\nSWAP 0 2 2\nTRIGGER ACTIVATE: REPLACE 0 2 SLACKOFF\n0 1\nTRIGGER MIRROR: SLACKOFF\nSLACKOFF\n", "Robot 0 activates Robot 1.\nRobot 1 swaps a line of command with Robot 2.\nRobot 1 slacks off.\nRobot 2 replaces a line of command of Robot 0.\nRobot 0 slacks off.\nRobot 1 swaps a line of command with Robot 2.\n"], ["3 2 8\n0 1\nSLACKOFF\nTRIGGER MOVE: SLACKOFF\n1 2\nTRIGGER TRIGGER: SLACKOFF\nTRIGGER SLACKOFF: MOVE 0 1\n2 0\nTRIGGER SLACKOFF: MOVE 1 2\nTRIGGER TRIGGER: MOVE 1 1\n", "Robot 0 slacks off.\nRobot 1 moves its left hand towards Robot 2.\nRobot 2 moves its right hand towards Robot 1.\nRobot 1 slacks off.\nRobot 2 moves its right hand towards Robot 0.\nRobot 0 slacks off.\nRobot 1 slacks off.\nRobot 2 moves its right hand towards Robot 2.\n"], ["见附加文件的 5.in。", "见附加文件的 5.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "2024", "THUPC"], "title": "[THUPC 2024 初赛] 机器人", "background": "", "description": "有 $n$ 个机器人围成一圈，编号按照逆时针顺序分别为 $0\\sim n-1$。\n\n每个机器人有两只手。编号为 $i$ 的机器人初始「左手」指向编号 $l_i$ 的机器人，「右手」指向编号 $r_i$ 的机器人。\n\n所有的机器人内部都写有 $m$ 行「指令」，「指令」有以下这些形式：\n\n### 指令\n\n「指令」分为「基础指令」和「高级指令」两种。「高级指令」的功能会更复杂一些，但它们本质上没有多大区别。下面介绍这些「指令」的格式以及它们被「执行」时的效果。文中的“自己”一词均指拥有这条「指令」的机器人。\n\n#### 基础指令\n\n- `SLACKOFF`：**「摸鱼」**，即什么也不做。\n- `MOVE h z`：将第 $h$ 只手向逆时针方向 **「移动」** $z$ 个机器人的位置。当 $h=0$ 时表示「左手」，当 $h=1$ 时表示「右手」，下同。\n- `SWAP h x y`：将第 $h$ 只手指向的机器人的第 $x$ 行「指令」与自己的第 $y$ 行「指令」 **「对调」**。\n- `MIRROR h x`：将第 $h$ 只手指向的机器人的第 $x$ 行「指令」**「镜像」** 取反，即将「指令」中的 $h$ 取反（$0$ 变成 $1$，$1$ 变成 $0$）。特殊地，它对 `SLACKOFF` 指令没有效果；而对 `TRIGGER` 指令，会直接修改「触发」时「执行」的「指令」中的 $h$。\n- `REPLACE h x <COMMAND>`：将第 $h$ 只手指向的机器人的第 $x$ 行「指令」**「替换」** 为 `<COMMAND>`。其中 `<COMMAND>` 为一条完整的「指令」。\n\n#### 高级指令 \n\n- `ACTIVATE h`：**「激活」** 第 $h$ 只手指向的机器人，即按顺序「执行」那个机器人的所有「指令」。前一行「指令」「执行」完毕之后才会「执行」后一行。注意在「执行」前面的「指令」时后面的「指令」可能会发生更改，这时需要「执行」更改后的「指令」。当那个机器人的所有「指令」「执行」完毕后，该「指令」才算「执行」完毕。\n\n- `TRIGGER <COMMANDNAME>: <COMMAND>`：其中 `<COMMANDNAME>` 表示「指令」的名称，即一条「指令」中的第一个全大写单词；`<COMMAND>` 表示一条完整的「基础指令」。`TRIGGER` 指令不会被「执行」，即按顺序「执行」时会跳过该「指令」。但是，当一个 **其他** 机器人「执行」完一条「指令」之后，且「右手」指向自己的时候，自己最靠前的满足如下条件的 `TRIGGER` 指令（如果有）就会被 **「触发」**——「执行」一次对应的 `<COMMAND>`：\n\n  - `<COMMANDNAME>` 不为 `TRIGGER` 时，刚刚「执行」完毕的「指令」为 `<COMMANDNAME>` 指令；\n  - `<COMMANDNAME>` 为 `TRIGGER` 时，刚刚「执行」完毕的「指令」是 `TRIGGER` 指令被「触发」时「执行」的「指令」。\n\n  「执行」完毕后会回到原来的「执行」顺序中。\n\n你需要从 $0$ 号机器人开始按照编号顺序一圈又一圈地「激活」这些机器人，并输出「执行」的前 $k$ 条指令的有关信息。", "inputFormat": "第一行三个正整数 $n,m,k$。\n\n接下来按照编号从小到大的顺序表示 $n$ 个机器人的信息。\n\n对于每个机器人，第一行两个非负整数 $l_i,r_i$ 表示「左手」指向的机器人编号和「右手」指向的机器人编号。\n\n接下来 $m$ 行，按顺序表示机器人的「指令」，「指令」的格式见题目描述。", "outputFormat": "输出 $k$ 行，按顺序描述前 $k$ 条开始「执行」的指令的相关信息，在开始「执行」前输出，每条一行，格式如下：\n\n- 「摸鱼」时输出 `Robot <id> slacks off.`。其中 `<id>` 为一个整数，表示「执行」当前「指令」的机器人编号，下同。\n- 「移动」时输出 `Robot <id> moves its <side> hand towards Robot <id2>.`。其中 `<side>` 为 `left` 或 `right`，表示移动了哪只手（`left` 表示「左手」，`right` 表示「右手」）；`<id2>` 为一个整数，表示移动之后这只手指向的机器人的编号。\n- 「对调」时输出 `Robot <id> swaps a line of command with Robot <id2>.`。其中 `<id2>` 为一个整数，表示与之「对调」「指令」的机器人编号。\n- 「镜像」取反时输出 `Robot <id> modifies a line of command of Robot <id2>.`。其中 `<id2>` 为一个整数，表示被「镜像」取反「指令」的机器人编号。\n- 「替换」时输出 `Robot <id> replaces a line of command of Robot <id2>.`。其中 `<id2>` 为一个整数，表示被「替换」「指令」的机器人编号。\n- 「执行」 `ACTIVATE` 指令「激活」（区别于你的一圈又一圈的「激活」）时输出 `Robot <id> activates Robot <id2>.`。其中  `<id2>` 为一个整数，表示被「激活」的机器人编号。\n- `TRIGGER` 指令由于不会被「执行」就不需要输出，但当它们被「触发」时，仍然需要按照上面的格式输出对应的「基础指令」被「执行」的信息。", "hint": "### 样例 \\#1 解释\n\n`TRIGGER` 指令的「触发」时机是「执行」完毕之后。注意不能「触发」自己的 `TRIGGER` 指令。\n\n### 样例 \\#2 解释\n\n注意在「执行」前面的「指令」时后面的「指令」可能会发生更改，这时需要「执行」更改后的「指令」。\n\n### 样例 \\#3 解释\n\n`ACTIVATE` 指令「激活」另一个机器人时，当那个机器人的所有「指令」「执行」完毕后，该「指令」才算「执行」完毕。\n\n### 样例 \\#4 解释\n\n只有自己最靠前的满足条件的 `TRIGGER` 指令才会被 **「触发」**。\n\n### 样例 \\#5 解释\n\n无私的馈赠？有力的援助？\n\n### 子任务\n\n保证所有的指令的格式均正确。\n\n保证输入文件的长度不超过 $5\\mathtt{MB}$。\n\n保证能够「执行」至少 $k$ 条「指令」。\n\n保证 $2\\le n\\le 100$，$1\\le m \\le 10$，$1\\le k \\le 3\\times 10^5$。\n\n保证 $0\\le l_i,r_i<n$。\n\n保证 $0\\le h \\le 1$，$1\\le x,y \\le m$，$1\\le z<n$。所有输入的数都是整数。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 机器人", "background": "", "description": "有 $n$ 个机器人围成一圈，编号按照逆时针顺序分别为 $0\\sim n-1$。\n\n每个机器人有两只手。编号为 $i$ 的机器人初始「左手」指向编号 $l_i$ 的机器人，「右手」指向编号 $r_i$ 的机器人。\n\n所有的机器人内部都写有 $m$ 行「指令」，「指令」有以下这些形式：\n\n### 指令\n\n「指令」分为「基础指令」和「高级指令」两种。「高级指令」的功能会更复杂一些，但它们本质上没有多大区别。下面介绍这些「指令」的格式以及它们被「执行」时的效果。文中的“自己”一词均指拥有这条「指令」的机器人。\n\n#### 基础指令\n\n- `SLACKOFF`：**「摸鱼」**，即什么也不做。\n- `MOVE h z`：将第 $h$ 只手向逆时针方向 **「移动」** $z$ 个机器人的位置。当 $h=0$ 时表示「左手」，当 $h=1$ 时表示「右手」，下同。\n- `SWAP h x y`：将第 $h$ 只手指向的机器人的第 $x$ 行「指令」与自己的第 $y$ 行「指令」 **「对调」**。\n- `MIRROR h x`：将第 $h$ 只手指向的机器人的第 $x$ 行「指令」**「镜像」** 取反，即将「指令」中的 $h$ 取反（$0$ 变成 $1$，$1$ 变成 $0$）。特殊地，它对 `SLACKOFF` 指令没有效果；而对 `TRIGGER` 指令，会直接修改「触发」时「执行」的「指令」中的 $h$。\n- `REPLACE h x <COMMAND>`：将第 $h$ 只手指向的机器人的第 $x$ 行「指令」**「替换」** 为 `<COMMAND>`。其中 `<COMMAND>` 为一条完整的「指令」。\n\n#### 高级指令 \n\n- `ACTIVATE h`：**「激活」** 第 $h$ 只手指向的机器人，即按顺序「执行」那个机器人的所有「指令」。前一行「指令」「执行」完毕之后才会「执行」后一行。注意在「执行」前面的「指令」时后面的「指令」可能会发生更改，这时需要「执行」更改后的「指令」。当那个机器人的所有「指令」「执行」完毕后，该「指令」才算「执行」完毕。\n\n- `TRIGGER <COMMANDNAME>: <COMMAND>`：其中 `<COMMANDNAME>` 表示「指令」的名称，即一条「指令」中的第一个全大写单词；`<COMMAND>` 表示一条完整的「基础指令」。`TRIGGER` 指令不会被「执行」，即按顺序「执行」时会跳过该「指令」。但是，当一个 **其他** 机器人「执行」完一条「指令」之后，且「右手」指向自己的时候，自己最靠前的满足如下条件的 `TRIGGER` 指令（如果有）就会被 **「触发」**——「执行」一次对应的 `<COMMAND>`：\n\n  - `<COMMANDNAME>` 不为 `TRIGGER` 时，刚刚「执行」完毕的「指令」为 `<COMMANDNAME>` 指令；\n  - `<COMMANDNAME>` 为 `TRIGGER` 时，刚刚「执行」完毕的「指令」是 `TRIGGER` 指令被「触发」时「执行」的「指令」。\n\n  「执行」完毕后会回到原来的「执行」顺序中。\n\n你需要从 $0$ 号机器人开始按照编号顺序一圈又一圈地「激活」这些机器人，并输出「执行」的前 $k$ 条指令的有关信息。", "inputFormat": "第一行三个正整数 $n,m,k$。\n\n接下来按照编号从小到大的顺序表示 $n$ 个机器人的信息。\n\n对于每个机器人，第一行两个非负整数 $l_i,r_i$ 表示「左手」指向的机器人编号和「右手」指向的机器人编号。\n\n接下来 $m$ 行，按顺序表示机器人的「指令」，「指令」的格式见题目描述。", "outputFormat": "输出 $k$ 行，按顺序描述前 $k$ 条开始「执行」的指令的相关信息，在开始「执行」前输出，每条一行，格式如下：\n\n- 「摸鱼」时输出 `Robot <id> slacks off.`。其中 `<id>` 为一个整数，表示「执行」当前「指令」的机器人编号，下同。\n- 「移动」时输出 `Robot <id> moves its <side> hand towards Robot <id2>.`。其中 `<side>` 为 `left` 或 `right`，表示移动了哪只手（`left` 表示「左手」，`right` 表示「右手」）；`<id2>` 为一个整数，表示移动之后这只手指向的机器人的编号。\n- 「对调」时输出 `Robot <id> swaps a line of command with Robot <id2>.`。其中 `<id2>` 为一个整数，表示与之「对调」「指令」的机器人编号。\n- 「镜像」取反时输出 `Robot <id> modifies a line of command of Robot <id2>.`。其中 `<id2>` 为一个整数，表示被「镜像」取反「指令」的机器人编号。\n- 「替换」时输出 `Robot <id> replaces a line of command of Robot <id2>.`。其中 `<id2>` 为一个整数，表示被「替换」「指令」的机器人编号。\n- 「执行」 `ACTIVATE` 指令「激活」（区别于你的一圈又一圈的「激活」）时输出 `Robot <id> activates Robot <id2>.`。其中  `<id2>` 为一个整数，表示被「激活」的机器人编号。\n- `TRIGGER` 指令由于不会被「执行」就不需要输出，但当它们被「触发」时，仍然需要按照上面的格式输出对应的「基础指令」被「执行」的信息。", "hint": "### 样例 \\#1 解释\n\n`TRIGGER` 指令的「触发」时机是「执行」完毕之后。注意不能「触发」自己的 `TRIGGER` 指令。\n\n### 样例 \\#2 解释\n\n注意在「执行」前面的「指令」时后面的「指令」可能会发生更改，这时需要「执行」更改后的「指令」。\n\n### 样例 \\#3 解释\n\n`ACTIVATE` 指令「激活」另一个机器人时，当那个机器人的所有「指令」「执行」完毕后，该「指令」才算「执行」完毕。\n\n### 样例 \\#4 解释\n\n只有自己最靠前的满足条件的 `TRIGGER` 指令才会被 **「触发」**。\n\n### 样例 \\#5 解释\n\n无私的馈赠？有力的援助？\n\n### 子任务\n\n保证所有的指令的格式均正确。\n\n保证输入文件的长度不超过 $5\\mathtt{MB}$。\n\n保证能够「执行」至少 $k$ 条「指令」。\n\n保证 $2\\le n\\le 100$，$1\\le m \\le 10$，$1\\le k \\le 3\\times 10^5$。\n\n保证 $0\\le l_i,r_i<n$。\n\n保证 $0\\le h \\le 1$，$1\\le x,y \\le m$，$1\\le z<n$。所有输入的数都是整数。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。\n", "locale": "zh-CN"}}}
{"pid": "P9967", "type": "P", "difficulty": 6, "samples": [["5 6 4\n1 1 3 3\n15 9 7 1\n4 2 8 6\n3\n3\n1\n2\n2\n4\n", "91\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2024", "树形 DP", "THUPC"], "title": "[THUPC 2024 初赛] 采矿", "background": "_“我已经买不起第二个机器人了。”_\n\n_“那就雇点人来凑数吧。注意别给死里头。”_", "description": "你是一个矿坑老板。\n\n你的矿坑是二叉树形结构，有 $n$ 个节点。$1$ 号点为地面，对于所有的 $2\\le i\\le n$，$i$ 号节点与更浅层的 $f_i$ 号节点通过通道相连，其中 $f_i<i$，且相同的 $f_i$ 最多出现两次。矿坑的不同节点的产量和开采难度均不相同。对于 $i$ 号节点 $(2\\le i\\le n)$，如果派一个机器人开采，一单位时间内能有 $r_i$ 的产出；如果派一个人类开采，一单位时间内能有 $p_i$ 的产出。地面没有产出。\n\n你有一个机器人，初始位于 $s$ 号节点。你的矿坑里初始没有人类工人。\n\n所有通道与节点都十分狭窄，每个节点都只能容下一名工人（工人包括人类和机器人），每个通道也只能恰好容一名工人通过。在移动的任何时刻，只能有最多一名工人在通道中，其余工人都必须在节点上。\n\n你现在有 $q$ 条计划需要按顺序执行。每个计划分为准备、执行、调整、开采四个阶段。\n\n在准备阶段，人类可以在满足上述移动规则的前提下任意移动，但不能进入或离开矿坑（矿坑内的工人到达 $1$ 号节点不算离开矿坑），因为你在看着他们；移动的顺序和次数均没有限制。机器人不能移动。\n\n在执行阶段，不同计划需要做的事情可能不同，共分为 $4$ 种：\n\n1. 机器人只能沿通道向**更浅**的方向移动，且至少需要经过一条通道。人类不能移动。\n2. 机器人只能沿通道向**更深**的方向移动，且至少需要经过一条通道。人类不能移动。\n3. 使一名人类从 $1$ 号节点进入矿坑（这意味着该阶段开始时 $1$ 号节点上必须没有工人）。除此之外所有工人都不能移动。\n4. 使一名人类从 $1$ 号节点移出矿坑（这意味着该阶段开始时 $1$ 号节点上必须有一名人类）。除此之外所有工人都不能移动。\n\n在调整阶段，限制与准备阶段相同。人类可以在满足上述移动规则的前提下任意移动，但不能进入或离开矿坑；移动的顺序和次数均没有限制。机器人不能移动。\n\n在开采阶段，所有的工人会采一单位时间的矿。所有有工人的非地面节点会根据位于该节点的工人种类计算产出。没有工人的节点没有产出。该计划的产出为所有节点的产出之和。\n\n问按顺序执行完所有计划之后，你所有计划的产出之和最多可以达到多少。", "inputFormat": "第一行三个正整数 $n,q,s$。\n\n第二行 $n-1$ 个整数，其中第 $i$（$1\\le i<n$，下同）个表示 $f_{i+1}$。\n\n第三行 $n-1$ 个整数，其中第 $i$ 个表示 $r_{i+1}$。\n\n第四行 $n-1$ 个整数，其中第 $i$ 个表示 $p_{i+1}$。\n\n接下来 $q$ 行，每行一个整数表示计划的种类，其中第 $i$ 个整数表示第 $i$ 条计划：\n\n- `1` 表示第一种计划：将机器人向更浅的方向移动；\n- `2` 表示第二种计划：将机器人向更深的方向移动；\n- `3` 表示第三种计划：将一名人类从 $1$ 号节点送入矿坑；\n- `4` 表示第四种计划：将一名人类从 $1$ 号节点移出矿坑。", "outputFormat": "如果无论如何你都无法完成你的计划，输出一行 `No solution.`。否则输出一行一个整数，表示你的产出之和的最大值。", "hint": "### 样例 \\#1 解释\n\n一个最优解如下：（一些没有移动的阶段略过不提）\n\n第一个计划的调整阶段：将刚送入 $1$ 号点的人类移动两次到 $5$ 号点。\n\n第一个计划的开采阶段：机器人产出为 $7$，人类产出为 $6$。\n\n第二个计划的调整阶段：将刚送入 $1$ 号点的人类移动到 $2$ 号点。\n\n第二个计划的开采阶段：机器人产出为 $7$，人类产出为 $4+6=10$。\n\n第三个计划的执行阶段：将机器人移动至 $1$ 号点。\n\n第三个计划的调整阶段：将一名人类从 $5$ 号点移动至 $4$ 号点。\n\n第三个计划的开采阶段：机器人产出为 $0$，人类产出为 $4+8=12$。\n\n第四个计划的准备阶段：将一名人类从 $4$ 号点移动至 $5$ 号点。\n\n第四个计划的执行阶段：将机器人移动至 $3$ 号点。\n\n第四个计划的开采阶段：机器人产出为 $9$，人类产出为 $4+6=10$。\n\n第五个计划的执行阶段：将机器人移动至 $4$ 号点。\n\n第五个计划的开采阶段：机器人产出为 $7$，人类产出为 $4+6=10$。\n\n第六个计划的准备阶段：将一名人类从 $2$ 号点移动至 $1$ 号点。\n\n第六个计划的开采阶段：机器人产出为 $7$，人类产出为 $6$。\n\n总的产出为 $7+6+7+10+0+12+9+10+7+10+7+6=91$。\n\n### 子任务\n\n保证 $2\\le n\\le 301$，$1\\le q \\le 600$，$1\\le s\\le n$。\n\n保证 $1\\le f_i < i$，$0\\le r_i,p_i \\le 10^9$。\n\n保证相同的 $f_i$ 最多出现两次。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 采矿", "background": "_“我已经买不起第二个机器人了。”_\n\n_“那就雇点人来凑数吧。注意别给死里头。”_", "description": "你是一个矿坑老板。\n\n你的矿坑是二叉树形结构，有 $n$ 个节点。$1$ 号点为地面，对于所有的 $2\\le i\\le n$，$i$ 号节点与更浅层的 $f_i$ 号节点通过通道相连，其中 $f_i<i$，且相同的 $f_i$ 最多出现两次。矿坑的不同节点的产量和开采难度均不相同。对于 $i$ 号节点 $(2\\le i\\le n)$，如果派一个机器人开采，一单位时间内能有 $r_i$ 的产出；如果派一个人类开采，一单位时间内能有 $p_i$ 的产出。地面没有产出。\n\n你有一个机器人，初始位于 $s$ 号节点。你的矿坑里初始没有人类工人。\n\n所有通道与节点都十分狭窄，每个节点都只能容下一名工人（工人包括人类和机器人），每个通道也只能恰好容一名工人通过。在移动的任何时刻，只能有最多一名工人在通道中，其余工人都必须在节点上。\n\n你现在有 $q$ 条计划需要按顺序执行。每个计划分为准备、执行、调整、开采四个阶段。\n\n在准备阶段，人类可以在满足上述移动规则的前提下任意移动，但不能进入或离开矿坑（矿坑内的工人到达 $1$ 号节点不算离开矿坑），因为你在看着他们；移动的顺序和次数均没有限制。机器人不能移动。\n\n在执行阶段，不同计划需要做的事情可能不同，共分为 $4$ 种：\n\n1. 机器人只能沿通道向**更浅**的方向移动，且至少需要经过一条通道。人类不能移动。\n2. 机器人只能沿通道向**更深**的方向移动，且至少需要经过一条通道。人类不能移动。\n3. 使一名人类从 $1$ 号节点进入矿坑（这意味着该阶段开始时 $1$ 号节点上必须没有工人）。除此之外所有工人都不能移动。\n4. 使一名人类从 $1$ 号节点移出矿坑（这意味着该阶段开始时 $1$ 号节点上必须有一名人类）。除此之外所有工人都不能移动。\n\n在调整阶段，限制与准备阶段相同。人类可以在满足上述移动规则的前提下任意移动，但不能进入或离开矿坑；移动的顺序和次数均没有限制。机器人不能移动。\n\n在开采阶段，所有的工人会采一单位时间的矿。所有有工人的非地面节点会根据位于该节点的工人种类计算产出。没有工人的节点没有产出。该计划的产出为所有节点的产出之和。\n\n问按顺序执行完所有计划之后，你所有计划的产出之和最多可以达到多少。", "inputFormat": "第一行三个正整数 $n,q,s$。\n\n第二行 $n-1$ 个整数，其中第 $i$（$1\\le i<n$，下同）个表示 $f_{i+1}$。\n\n第三行 $n-1$ 个整数，其中第 $i$ 个表示 $r_{i+1}$。\n\n第四行 $n-1$ 个整数，其中第 $i$ 个表示 $p_{i+1}$。\n\n接下来 $q$ 行，每行一个整数表示计划的种类，其中第 $i$ 个整数表示第 $i$ 条计划：\n\n- `1` 表示第一种计划：将机器人向更浅的方向移动；\n- `2` 表示第二种计划：将机器人向更深的方向移动；\n- `3` 表示第三种计划：将一名人类从 $1$ 号节点送入矿坑；\n- `4` 表示第四种计划：将一名人类从 $1$ 号节点移出矿坑。", "outputFormat": "如果无论如何你都无法完成你的计划，输出一行 `No solution.`。否则输出一行一个整数，表示你的产出之和的最大值。", "hint": "### 样例 \\#1 解释\n\n一个最优解如下：（一些没有移动的阶段略过不提）\n\n第一个计划的调整阶段：将刚送入 $1$ 号点的人类移动两次到 $5$ 号点。\n\n第一个计划的开采阶段：机器人产出为 $7$，人类产出为 $6$。\n\n第二个计划的调整阶段：将刚送入 $1$ 号点的人类移动到 $2$ 号点。\n\n第二个计划的开采阶段：机器人产出为 $7$，人类产出为 $4+6=10$。\n\n第三个计划的执行阶段：将机器人移动至 $1$ 号点。\n\n第三个计划的调整阶段：将一名人类从 $5$ 号点移动至 $4$ 号点。\n\n第三个计划的开采阶段：机器人产出为 $0$，人类产出为 $4+8=12$。\n\n第四个计划的准备阶段：将一名人类从 $4$ 号点移动至 $5$ 号点。\n\n第四个计划的执行阶段：将机器人移动至 $3$ 号点。\n\n第四个计划的开采阶段：机器人产出为 $9$，人类产出为 $4+6=10$。\n\n第五个计划的执行阶段：将机器人移动至 $4$ 号点。\n\n第五个计划的开采阶段：机器人产出为 $7$，人类产出为 $4+6=10$。\n\n第六个计划的准备阶段：将一名人类从 $2$ 号点移动至 $1$ 号点。\n\n第六个计划的开采阶段：机器人产出为 $7$，人类产出为 $6$。\n\n总的产出为 $7+6+7+10+0+12+9+10+7+10+7+6=91$。\n\n### 子任务\n\n保证 $2\\le n\\le 301$，$1\\le q \\le 600$，$1\\le s\\le n$。\n\n保证 $1\\le f_i < i$，$0\\le r_i,p_i \\le 10^9$。\n\n保证相同的 $f_i$ 最多出现两次。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN"}}}
{"pid": "P9968", "type": "P", "difficulty": 5, "samples": [["20\n01001101101101110010\n", "2 11\n5 5\n4 5\n11 1\n4 2\n7 1\n-1 0\n-1 0\n-1 0\n-1 0\n-1 0\n-1 0\n-1 0\n-1 0\n-1 0\n-1 0\n-1 0\n-1 0\n-1 0\n-1 0\n"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "THUPC"], "title": "[THUPC 2024 初赛] 二进制", "background": "", "description": "今天也是喜欢二进制串的一天，小 F 开始玩二进制串的游戏。\n\n小 F 给出了一个这里有一个长为 $n$ 的二进制串 $s$，下标从 $1$ 到 $n$，且 $\\forall i\\in[1,n],s_i\\in \\{0,1\\}$，他想要删除若干二进制子串。\n\n具体的，小 F 做出了 $n$ 次尝试。\n\n在第 $i\\in[1,n]$ 次尝试中，他会先写出正整数 $i$ 的二进制串表示 $t$（无前导零，左侧为高位，例如 $10$ 可以写为 $1010$）。\n\n随后找到这个二进制表示 $t$ 在 $s$ 中从左到右 **第一次** 出现的位置，并删除这个串。\n\n注意，删除后左右部分的串会拼接在一起 **形成一个新的串**，请注意新串下标的改变。\n\n若当前 $t$ 不在 $s$ 中存在，则小 F 对串 $s$ 不作出改变。\n\n你需要回答每一次尝试中，$t$ 在 $s$ 中第一次出现的位置的左端点以及 $t$ 在 $s$ 中出现了多少次。\n\n定义两次出现不同当且仅当出现的位置的左端点不同。\n\n请注意输入输出效率。", "inputFormat": "第一行一个正整数 $n$（$1\\leq n\\leq 1000000$）。\n\n第二行一个长度为 $n$ 的字符串 $s$。保证 $\\forall i\\in[1,n], s_i \\in \\{0, 1\\}$。", "outputFormat": "输出共 $n$ 行，每行两个整数，第 $i$ 行表示小 F 进行第 $i$ 次尝试时开头端点的位置以及相应的字符串出现的次数。\n\n若这次尝试失败，则当前行输出 $-1\\ 0$。", "hint": "### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 二进制", "background": "", "description": "今天也是喜欢二进制串的一天，小 F 开始玩二进制串的游戏。\n\n小 F 给出了一个这里有一个长为 $n$ 的二进制串 $s$，下标从 $1$ 到 $n$，且 $\\forall i\\in[1,n],s_i\\in \\{0,1\\}$，他想要删除若干二进制子串。\n\n具体的，小 F 做出了 $n$ 次尝试。\n\n在第 $i\\in[1,n]$ 次尝试中，他会先写出正整数 $i$ 的二进制串表示 $t$（无前导零，左侧为高位，例如 $10$ 可以写为 $1010$）。\n\n随后找到这个二进制表示 $t$ 在 $s$ 中从左到右 **第一次** 出现的位置，并删除这个串。\n\n注意，删除后左右部分的串会拼接在一起 **形成一个新的串**，请注意新串下标的改变。\n\n若当前 $t$ 不在 $s$ 中存在，则小 F 对串 $s$ 不作出改变。\n\n你需要回答每一次尝试中，$t$ 在 $s$ 中第一次出现的位置的左端点以及 $t$ 在 $s$ 中出现了多少次。\n\n定义两次出现不同当且仅当出现的位置的左端点不同。\n\n请注意输入输出效率。", "inputFormat": "第一行一个正整数 $n$（$1\\leq n\\leq 1000000$）。\n\n第二行一个长度为 $n$ 的字符串 $s$。保证 $\\forall i\\in[1,n], s_i \\in \\{0, 1\\}$。", "outputFormat": "输出共 $n$ 行，每行两个整数，第 $i$ 行表示小 F 进行第 $i$ 次尝试时开头端点的位置以及相应的字符串出现的次数。\n\n若这次尝试失败，则当前行输出 $-1\\ 0$。", "hint": "### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN"}}}
{"pid": "P9969", "type": "P", "difficulty": 6, "samples": [["5\n11011\n", "5\n1 1\n1 4\n2 1 2\n3 3 1\n2 3 4\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "Special Judge", "THUPC"], "title": "[THUPC 2024 初赛] 分治乘法", "background": "", "description": "小艾想要挑战分治乘法。TA 将策略抽象成了如下问题：\n\n现在给定一个目标集合 $T$，该集合是 $\\{1,\\dots,n\\}$ 的一个子集（$1\\leq n\\leq 5\\times 10^5$）。你需要通过一系列操作构造一些集合最后得到 $T$，具体来说有以下三种操作：\n\n- 创造一个大小为一的集合 $|S|=1$。\n- 将已经被构造出的两个不交集合 $A, B$ 并起来，得到 $A\\cup B$。\n- 将已经被构造出的一个集合 $A$ 进行平移，也即 $A+x = \\{ a+x : a\\in A \\}$。\n\n一个已经被构造出的集合可以在之后被使用多次。同时你需要保证操作过程中出现的所有集合都是 $\\{1,\\dots,n\\}$ 的子集。\n\n你的代价是构造出的所有集合的大小之和，你不需要最小化代价，只需要让代价控制不超过 $5\\times 10^6$ 即可。你用的操作数量也不应超过 $10^6$。", "inputFormat": "第一行输入一个正整数 $n$。\n\n接下来一行输入一个 `01` 串，长度为 $n$，第 $x$ 位为 `1` 表示 $x\\in T$，否则 $x\\notin T$，保证 $T$ 非空。", "outputFormat": "第一行输出一个正整数 $m$ 表示你使用的操作数量。\n\n接下来 $m$ 行，每行描述一个操作，设第 $i$ 次操作得到的集合为 $T_i$：\n\n- `1 x` 表示创造一个大小为一的集合 $\\{x\\}$。\n- `2 x y` 表示将不交集合 $T_x, T_y$ 并起来。\n- `3 x y` 表示将已经被构造出的一个集合进行平移，也即 $T_x+y$。\n\n你需要保证所有操作满足题目要求，并且最后一次操作产生的集合是 $T$。", "hint": "### 样例 \\#1 解释\n\n- 第一次操作：创造集合 $T_1=\\{1\\}$。\n- 第二次操作：创造集合 $T_2=\\{4\\}$。\n- 第三次操作：将 $T_1, T_2$ 并起来，得到 $T_3=\\{1,4\\}$。\n- 第四次操作：将 $T_3$ 平移 $1$，得到 $T_4=\\{2,5\\}$。\n- 第五次操作：将 $T_3, T_4$ 并起来，得到 $T_5=\\{1,2,4,5\\}$。这就得到了 $T$。\n\n这个方案的总代价是 $1 + 1 + 2 + 2 + 4 = 10$。\n\n### 提示\n\n如果你的复杂度是好的，请相信常数。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 分治乘法", "background": "", "description": "小艾想要挑战分治乘法。TA 将策略抽象成了如下问题：\n\n现在给定一个目标集合 $T$，该集合是 $\\{1,\\dots,n\\}$ 的一个子集（$1\\leq n\\leq 5\\times 10^5$）。你需要通过一系列操作构造一些集合最后得到 $T$，具体来说有以下三种操作：\n\n- 创造一个大小为一的集合 $|S|=1$。\n- 将已经被构造出的两个不交集合 $A, B$ 并起来，得到 $A\\cup B$。\n- 将已经被构造出的一个集合 $A$ 进行平移，也即 $A+x = \\{ a+x : a\\in A \\}$。\n\n一个已经被构造出的集合可以在之后被使用多次。同时你需要保证操作过程中出现的所有集合都是 $\\{1,\\dots,n\\}$ 的子集。\n\n你的代价是构造出的所有集合的大小之和，你不需要最小化代价，只需要让代价控制不超过 $5\\times 10^6$ 即可。你用的操作数量也不应超过 $10^6$。", "inputFormat": "第一行输入一个正整数 $n$。\n\n接下来一行输入一个 `01` 串，长度为 $n$，第 $x$ 位为 `1` 表示 $x\\in T$，否则 $x\\notin T$，保证 $T$ 非空。", "outputFormat": "第一行输出一个正整数 $m$ 表示你使用的操作数量。\n\n接下来 $m$ 行，每行描述一个操作，设第 $i$ 次操作得到的集合为 $T_i$：\n\n- `1 x` 表示创造一个大小为一的集合 $\\{x\\}$。\n- `2 x y` 表示将不交集合 $T_x, T_y$ 并起来。\n- `3 x y` 表示将已经被构造出的一个集合进行平移，也即 $T_x+y$。\n\n你需要保证所有操作满足题目要求，并且最后一次操作产生的集合是 $T$。", "hint": "### 样例 \\#1 解释\n\n- 第一次操作：创造集合 $T_1=\\{1\\}$。\n- 第二次操作：创造集合 $T_2=\\{4\\}$。\n- 第三次操作：将 $T_1, T_2$ 并起来，得到 $T_3=\\{1,4\\}$。\n- 第四次操作：将 $T_3$ 平移 $1$，得到 $T_4=\\{2,5\\}$。\n- 第五次操作：将 $T_3, T_4$ 并起来，得到 $T_5=\\{1,2,4,5\\}$。这就得到了 $T$。\n\n这个方案的总代价是 $1 + 1 + 2 + 2 + 4 = 10$。\n\n### 提示\n\n如果你的复杂度是好的，请相信常数。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN"}}}
{"pid": "P9970", "type": "P", "difficulty": 6, "samples": [["6\n0 0 0 1 2 3\n", "2 3 4 0 0 0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "THUPC"], "title": "[THUPC 2024 初赛] 套娃", "background": "", "description": "我们定义一个集合的 $\\operatorname{mex}$ 是最小的不在 $S$ 中的非负整数。\n\n给定一个序列 $a_1,\\dots,a_n$，对于每个 $1\\leq k\\leq n$，我们按照如下方式定义 $b_k$：\n\n- 对于 $a$ 的所有长为 $k$ 的子区间，求出这个子区间构成的数集的 $\\operatorname{mex}$。\n- 对于求出的所有 $\\operatorname{mex}$，求出这个数集自己的 $\\operatorname{mex}$，记为 $b_k$。\n\n请你求出序列 $b$。\n", "inputFormat": "第一行输入一个正整数 $n$（$1\\leq n\\leq 10^5$）。\n\n第二行输入 $n$ 个整数 $a_1,\\dots,a_n$（$0\\leq a_i\\leq n$）。", "outputFormat": "一行输出 $n$ 个整数 $b_1,\\dots,b_n$。", "hint": "### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 套娃", "background": "", "description": "我们定义一个集合的 $\\operatorname{mex}$ 是最小的不在 $S$ 中的非负整数。\n\n给定一个序列 $a_1,\\dots,a_n$，对于每个 $1\\leq k\\leq n$，我们按照如下方式定义 $b_k$：\n\n- 对于 $a$ 的所有长为 $k$ 的子区间，求出这个子区间构成的数集的 $\\operatorname{mex}$。\n- 对于求出的所有 $\\operatorname{mex}$，求出这个数集自己的 $\\operatorname{mex}$，记为 $b_k$。\n\n请你求出序列 $b$。\n", "inputFormat": "第一行输入一个正整数 $n$（$1\\leq n\\leq 10^5$）。\n\n第二行输入 $n$ 个整数 $a_1,\\dots,a_n$（$0\\leq a_i\\leq n$）。", "outputFormat": "一行输出 $n$ 个整数 $b_1,\\dots,b_n$。", "hint": "### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN"}}}
{"pid": "P9971", "type": "P", "difficulty": 4, "samples": [["3\n.....\noo...\n.....\n.....\n.....\n.o...\n.o...\n.....\n.....\n.....\n.....\n.....\n.....\n.ooo.\n.....\n", "Far\nFar\nAway\n"]], "limits": {"time": [1000, 1000], "memory": [524288, 524288]}, "tags": ["搜索", "博弈论", "2024", "THUPC"], "title": "[THUPC 2024 初赛] 三步棋", "background": "昼短夜长冬至近。江冽漆黑，但见东云粉。窗外惺忪鸥鹭阵，室中香漫晨炊奋。\n\n朝肄暮劳催彼盹。宵寂观书，灯烬方安寝。请替君劳分重任，逍遥共舞生辰顺。", "description": "K 家里有一条不成文的规矩。如果家里只有 K 和 H 两个人，那么两个人会通过一种叫作“三步棋”的游戏来决定谁做饭。三步棋的规则与五子棋有一些相似之处。众所周知，五子棋是一种先连出五枚己方棋子者获胜的游戏。与五子棋相同的是，三步棋中双方也轮流在网格状的棋盘上摆放棋子，并根据是否连成指定的图案决定胜负。与五子棋不同的是：\n\n1. 三步棋不区分双方的棋子，即可以认为双方执同色棋子进行游戏；\n\n2. 在判定时，指定的图案不能旋转；\n\n3. 如果连成指定的图案时，棋盘上的棋子数量恰好为 $3$ 的倍数，则连成指定的图案的一方获胜，否则判定该方负（即对方获胜）。\n\n例如，如果指定的图案为\n\n```\n.o\noo\n```\n\n且当前盘面为\n\n```\no..o.\no.o..\noo...\no.o..\no..o.\n```\n\n时，认为没有连成给定的折线形图案，其中 `o` 表示棋子，`.` 表示空格；但若接下来在第二行第二列放一枚棋子，则连成了给定的图案，对应的棋子使用 `@` 表示：\n\n```\no..o.\no@o..\n@@...\no.o..\no..o.\n```\n\n此时盘面上恰有 $11$ 枚棋子，而 $11$ 不是 $3$ 的倍数，所以判定放这枚棋子的玩家，也即先手输掉本局。\n\n在 K 家，为了节约时间，通常使用 $5\\times 5$ 的初始为空的棋盘进行三步棋。同时，每次也只会随机选择一个由不超过 $4$ 枚棋子组成的四连通图案。显然三步棋不存在平局，所以 K 和 H 约定由输的一方负责做饭。K 想知道，如果自己和 H 都足够聪明，那么以选中的图案进行的三步棋游戏是否为**先手必胜**；因为如果她更容易赢，她就要偷偷地给自己的妹妹放水。", "inputFormat": "输入文件包含多组数据。\n\n输入的第一行包含一个正整数 $T$，表示数据组数。保证 $1\\le T\\le 200$。\n\n对于每组数据，输入包含 $5$ 行，每行包括一个长度为 $5$ 且仅含 `.` 及 `o` 的字符串，表示指定的图案。保证每组数据中 `o` 至少出现一次，且所有 `o` 组成一个大小不超过 $4$ 的四连通块。", "outputFormat": "对于每组数据输出一行。如果输入的图案为**先手必胜**，则输出 `Far`，否则输出 `Away`。", "hint": "### 样例 \\#1 解释\n\n该样例包含三组数据。\n\n第一组数据输入的图案为 $1$ 行 $2$ 列的 `oo`。显然，无论先手将棋子放在棋盘上的哪个位置，后手都只有两种策略：\n\n- 和先手的棋子连成 `oo`，此时棋盘上只有 $2$ 枚棋子，故后手立即输掉游戏；\n\n- 不和先手的棋子连成 `oo`，但是接下来轮到先手时，先手可以任意连成 `oo`，此时棋盘上恰有 $3$ 枚棋子，故先手取胜。\n\n无论是哪种策略，后手都无法取胜，故对于 `oo` 而言**先手必胜**。\n\n第二组数据输入的图案为 $2$ 行 $1$ 列的图案，与 `oo` 同理，可知为**先手必胜**。\n\n第三组数据输入的图案为 $1$ 行 $3$ 列的 `ooo`，可以证明为先手必败。\n\n### 子任务\n\n保证 $1\\le T\\le 200$。对于每组数据，保证输入的 $5\\times 5$ 的由 `.` 和 `o` 组成的字符矩阵中至少含有一个 `o`，且所有 `o` 组成一个大小不超过 $4$ 的四连通块。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 三步棋", "background": "昼短夜长冬至近。江冽漆黑，但见东云粉。窗外惺忪鸥鹭阵，室中香漫晨炊奋。\n\n朝肄暮劳催彼盹。宵寂观书，灯烬方安寝。请替君劳分重任，逍遥共舞生辰顺。", "description": "K 家里有一条不成文的规矩。如果家里只有 K 和 H 两个人，那么两个人会通过一种叫作“三步棋”的游戏来决定谁做饭。三步棋的规则与五子棋有一些相似之处。众所周知，五子棋是一种先连出五枚己方棋子者获胜的游戏。与五子棋相同的是，三步棋中双方也轮流在网格状的棋盘上摆放棋子，并根据是否连成指定的图案决定胜负。与五子棋不同的是：\n\n1. 三步棋不区分双方的棋子，即可以认为双方执同色棋子进行游戏；\n\n2. 在判定时，指定的图案不能旋转；\n\n3. 如果连成指定的图案时，棋盘上的棋子数量恰好为 $3$ 的倍数，则连成指定的图案的一方获胜，否则判定该方负（即对方获胜）。\n\n例如，如果指定的图案为\n\n```\n.o\noo\n```\n\n且当前盘面为\n\n```\no..o.\no.o..\noo...\no.o..\no..o.\n```\n\n时，认为没有连成给定的折线形图案，其中 `o` 表示棋子，`.` 表示空格；但若接下来在第二行第二列放一枚棋子，则连成了给定的图案，对应的棋子使用 `@` 表示：\n\n```\no..o.\no@o..\n@@...\no.o..\no..o.\n```\n\n此时盘面上恰有 $11$ 枚棋子，而 $11$ 不是 $3$ 的倍数，所以判定放这枚棋子的玩家，也即先手输掉本局。\n\n在 K 家，为了节约时间，通常使用 $5\\times 5$ 的初始为空的棋盘进行三步棋。同时，每次也只会随机选择一个由不超过 $4$ 枚棋子组成的四连通图案。显然三步棋不存在平局，所以 K 和 H 约定由输的一方负责做饭。K 想知道，如果自己和 H 都足够聪明，那么以选中的图案进行的三步棋游戏是否为**先手必胜**；因为如果她更容易赢，她就要偷偷地给自己的妹妹放水。", "inputFormat": "输入文件包含多组数据。\n\n输入的第一行包含一个正整数 $T$，表示数据组数。保证 $1\\le T\\le 200$。\n\n对于每组数据，输入包含 $5$ 行，每行包括一个长度为 $5$ 且仅含 `.` 及 `o` 的字符串，表示指定的图案。保证每组数据中 `o` 至少出现一次，且所有 `o` 组成一个大小不超过 $4$ 的四连通块。", "outputFormat": "对于每组数据输出一行。如果输入的图案为**先手必胜**，则输出 `Far`，否则输出 `Away`。", "hint": "### 样例 \\#1 解释\n\n该样例包含三组数据。\n\n第一组数据输入的图案为 $1$ 行 $2$ 列的 `oo`。显然，无论先手将棋子放在棋盘上的哪个位置，后手都只有两种策略：\n\n- 和先手的棋子连成 `oo`，此时棋盘上只有 $2$ 枚棋子，故后手立即输掉游戏；\n\n- 不和先手的棋子连成 `oo`，但是接下来轮到先手时，先手可以任意连成 `oo`，此时棋盘上恰有 $3$ 枚棋子，故先手取胜。\n\n无论是哪种策略，后手都无法取胜，故对于 `oo` 而言**先手必胜**。\n\n第二组数据输入的图案为 $2$ 行 $1$ 列的图案，与 `oo` 同理，可知为**先手必胜**。\n\n第三组数据输入的图案为 $1$ 行 $3$ 列的 `ooo`，可以证明为先手必败。\n\n### 子任务\n\n保证 $1\\le T\\le 200$。对于每组数据，保证输入的 $5\\times 5$ 的由 `.` 和 `o` 组成的字符矩阵中至少含有一个 `o`，且所有 `o` 组成一个大小不超过 $4$ 的四连通块。\n\n### 题目使用协议\n\n来自 THUPC2024（2024年清华大学学生程序设计竞赛暨高校邀请赛）初赛。\n\n以下『本仓库』皆指 THUPC2024 初赛 官方仓库（[https://github.com/ckw20/thupc2024_pre_public](https://github.com/ckw20/thupc2024_pre_public)）\n\n1. 任何单位或个人都可以免费使用或转载本仓库的题目；\n\n2. 任何单位或个人在使用本仓库题目时，应做到无偿、公开，严禁使用这些题目盈利或给这些题目添加特殊权限；\n\n3. 如果条件允许，请在使用本仓库题目时同时提供数据、标程、题解等资源的获取方法；否则，请附上本仓库的 github 地址。", "locale": "zh-CN"}}}
{"pid": "P9972", "type": "P", "difficulty": 7, "samples": [["6 11 1 1 6\n1.0000 1.0000\n1.0000 0.0000 10.0000\n0.7500 0.2500 6.0000\n0.5000 0.0000 1.0000\n0.5000 0.5000 1.0000\n0.2500 0.2500 6.0000\n0.0000 0.0000 10.0000\n1 2\n1 3\n1 4\n2 3\n2 4\n3 4\n3 5\n3 6\n4 5\n4 6\n5 6\n", "8.105694691387022\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["计算几何", "2024", "Special Judge", "THUPC"], "title": "[THUPC 2024 初赛] 勇闯末日塔", "background": "安宁顷刻今将逝，末日黑云伺隙来。宿命无情何所惧？越其止境冀花开。\n\n为了执行毁灭世界的疯狂计划，一位占用了已死之人躯壳的神秘男子在这颗蓝色的星球上创造出了无数末日塔。这些末日塔会散发出浓密的以太射线，对末日塔附近的几乎所有生物进行精神控制，只有受到特殊加护的人才能免受以太射线控制。\n\n一些受到加护的义勇队对这些末日塔进行了调查，其结果显示：这些末日塔组成了复杂的以太传输网络，持续不断地从大地中吸收以太，并将以太传输到位于帝国的中枢塔。\n\n一队持有特殊加护的英雄决定闯入其中一些末日塔，以期彻底调查并尝试破坏这些末日塔。英雄们破坏掉进入的末日塔后，以太传输网络就会受到影响，因此大家希望选择一些末日塔，将其破坏后能使得网络的最大传输容量降到最低。\n\n作为勇闯末日塔小队的先锋，你再次阅读了小队目前所掌握的所有信息。这次大胆的行动计划最终能否拯救这个世界，眼下恐怕谁都无法事先料定。但为了这颗星球的未来，我们只能放手一搏。", "description": "星球的表面是一个中心位于 $(0, 0, 0)$，半径为 $R$ 的完美球面。星球表面上共有 $N$ 座末日塔，这些令人毛骨悚然的塔构成了以太传输网络的所有节点。\n\n- 末日塔的高度远小于星球半径，因此我们认为第 $i (1 \\le i \\le N)$ 座塔是球面上的一个点 $\\left(x_i, y_i, z_i\\right)$。第 $i$ 座塔的以太传输效率为 $q_i$。\n- 保证 $N$ 座末日塔的位置两两不同。在这 $N$ 座末日塔中，$s$ 号塔是以太吸收点，$t$ 号塔是位于帝国的中枢塔；这两座塔的以太浓度显著高于其它的末日塔，因此只能闯入这两座塔之外的末日塔。\n\n$N$ 座末日塔之间共有 $M$ 条传输通道。第 $j (1 \\le j \\le M)$ 条传输通道连接 $u_j, v_j$ 两座末日塔，让它们可以互相传输以太。\n\n- 传输通道是双向的，但单位时间内以太的流向必须是单向的。\n- 为了节省不必要的成本，传输通道的两端不会连接相同的塔，也不会有两条传输通道连接相同的末日塔对。\n- 为了降低传输距离，第 $i$ 条传输通道沿着 $u_j$ 和 $v_j$ 所在的大圆的劣弧铺设，故其**长度** $r_j$ 为两座末日塔在星球表面的球面距离。为了避免传输通道的互相干扰，**对于任意一条传输通道所对应的劣弧，其他传输通道所对应的劣弧只会在该劣弧的两端点上与该劣弧相交**。保证由同一条传输通道相连的两座末日塔的位置不是对跖点关系。\n  - 如果不知道大圆、劣弧、球面距离和对跖点是什么，可以参考题面最后的提示部分。\n\n受到传输效率和通道长度的影响，每条传输通道有各自传输以太的容量上限。\n\n- 具体而言，每个单位时间内，第 $j$ 条传输通道的**容量上限**为 $\\frac{Kq_{u_j} q_{v_j}}{r_j^2}$，其中 $K$ 是给定的常数，$q_{u_j}, q_{v_j}$ 为该传输通道两端的塔的传输效率，$r_j$ 为这条传输通道的长度。\n\n整张以太传输网络需要将 $s$ 号塔吸收的以太沿着传输通道传输到 $t$ 号塔，并使得单位时间内的以太传输量最大。为此，传输网络会自动确定一个以太传输方案，在满足所有传输通道容量上限的前提下，最大化这一传输量。\n\n- 换句话说，如果将末日塔看作图上的点，传输通道看作边，而传输通道的容量上限对应每条边的容量，那么以太的传输方案应该恰好为 $s$ 到 $t$ 的最大流。\n\n虽然没有任何人能保证闯入末日塔之后就一定能将其破坏，但作为勇闯末日塔小队的先锋，你还是想在出发之前计算一下，如果成功破坏了所有将要闯入的末日塔，传输网络单位时间的最大传输量将会降至多少。\n\n- 如果成功破坏了选择的末日塔，与其相连的所有传输通道的容量都将降至 $0$，其余传输通道容量不发生变化；此时传输网络会自动调节至一个在新的网络中传输量最大的新方案。\n- 在最理想的情况下，小队将有机会调查并破坏 $L$ 座末日塔。因此，需要事先选择 $L$ 座末日塔（均不能是 $s$ 或 $t$），使得当这 $L$ 座末日塔都被成功破坏时，传输网络的新的传输方案的以太传输量尽可能地小。", "inputFormat": "输入的第一行包括五个正整数 $N, M, L, s, t$（$3\\le N\\le 500$，$2\\le M\\le \\frac{N(N-1)}{2}$，$1\\le L\\le \\min\\{8,N-2\\}$，$1\\le s, t\\le N$），分别表示该传输网络包含的末日塔数量，传输通道数量，有机会闯入的末日塔数量，最主要的以太吸收塔的编号和中枢塔的编号。\n\n输入的第二行包括两个实数 $R, K$（$1\\le R\\le 10^3$，$1\\le K\\le 10^3$），分别表示星球的半径和计算以太容量时用到的常数。\n\n接下来 $N$ 行，每行三个实数 $a_i, b_i, q_i$（$0\\le a_i\\le 1$，$0\\le b_i< 2$，$1\\le q_i \\le 10^3$），描述第 $i$ 座末日塔的信息，其中 $q_i$ 表示第 $i$ 座末日塔的传输能力， $a_i$ 和 $b_i$ 共同描述末日塔的位置：令 $\\theta_i = \\pi a_i$，$\\varphi_i = \\pi b_i$（如果你习惯使用角度制而不是弧度制，可以将 $\\pi$ 改为 $180^\\circ$），则 $\\left(x_i, y_i, z_i\\right) = \\left(R \\sin\\theta_i \\cos\\varphi_i, R\\sin\\theta_i \\sin\\varphi_i, R\\cos\\theta_i\\right)$。保证末日塔的位置各不相同。\n\n最后 $M$ 行，每行两个正整数 $u_i, v_i$（$1\\le u_i, v_i\\le N$），表示一条传输通道连接的两座末日塔的编号。保证同一条传输通道连接的两座末日塔不相同且不互为对跖点，没有两条传输通道连接的是相同的末日塔对，且传输网络是连通的。\n\n保证输入的所有实数保留到小数点后第 $4$ 位。", "outputFormat": "输出一个实数，表示如果成功破坏了将要闯入的末日塔，新的传输网络单位时间的最大传输量。当你的输出与标准输出的相对误差或绝对误差不超过 $10^{-6}$ 时，我们认为你的输出是正确的。", "hint": "### 样例 \\#1 解释\n\n以太传输网络如下图所示。图中蓝色球面即为星球表面；紫色点为各末日塔，其中 $P_i$ 对应输入的第 $i$ 座末日塔；黄色的线表示各传输通道。\n\n![样例 1 示意图](https://cdn.luogu.com.cn/upload/image_hosting/4bynt5dl.png)\n\n原来的传输网络单位时间最大传输量为 $188/\\pi^2$。破坏第 $2$ 个末日塔或第 $5$ 个末日塔都能使新的传输网络单位时间的最大传输量降至 $80/\\pi^2$，而破坏第 $3$ 个末日塔或第 $4$ 个末日塔只能使新的传输网络单位时间的最大传输量降至 $94/\\pi^2$，所以应该选择第 $2$ 个或第 $5$ 个末日塔尝试破坏。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 勇闯末日塔", "background": "安宁顷刻今将逝，末日黑云伺隙来。宿命无情何所惧？越其止境冀花开。\n\n为了执行毁灭世界的疯狂计划，一位占用了已死之人躯壳的神秘男子在这颗蓝色的星球上创造出了无数末日塔。这些末日塔会散发出浓密的以太射线，对末日塔附近的几乎所有生物进行精神控制，只有受到特殊加护的人才能免受以太射线控制。\n\n一些受到加护的义勇队对这些末日塔进行了调查，其结果显示：这些末日塔组成了复杂的以太传输网络，持续不断地从大地中吸收以太，并将以太传输到位于帝国的中枢塔。\n\n一队持有特殊加护的英雄决定闯入其中一些末日塔，以期彻底调查并尝试破坏这些末日塔。英雄们破坏掉进入的末日塔后，以太传输网络就会受到影响，因此大家希望选择一些末日塔，将其破坏后能使得网络的最大传输容量降到最低。\n\n作为勇闯末日塔小队的先锋，你再次阅读了小队目前所掌握的所有信息。这次大胆的行动计划最终能否拯救这个世界，眼下恐怕谁都无法事先料定。但为了这颗星球的未来，我们只能放手一搏。", "description": "星球的表面是一个中心位于 $(0, 0, 0)$，半径为 $R$ 的完美球面。星球表面上共有 $N$ 座末日塔，这些令人毛骨悚然的塔构成了以太传输网络的所有节点。\n\n- 末日塔的高度远小于星球半径，因此我们认为第 $i (1 \\le i \\le N)$ 座塔是球面上的一个点 $\\left(x_i, y_i, z_i\\right)$。第 $i$ 座塔的以太传输效率为 $q_i$。\n- 保证 $N$ 座末日塔的位置两两不同。在这 $N$ 座末日塔中，$s$ 号塔是以太吸收点，$t$ 号塔是位于帝国的中枢塔；这两座塔的以太浓度显著高于其它的末日塔，因此只能闯入这两座塔之外的末日塔。\n\n$N$ 座末日塔之间共有 $M$ 条传输通道。第 $j (1 \\le j \\le M)$ 条传输通道连接 $u_j, v_j$ 两座末日塔，让它们可以互相传输以太。\n\n- 传输通道是双向的，但单位时间内以太的流向必须是单向的。\n- 为了节省不必要的成本，传输通道的两端不会连接相同的塔，也不会有两条传输通道连接相同的末日塔对。\n- 为了降低传输距离，第 $i$ 条传输通道沿着 $u_j$ 和 $v_j$ 所在的大圆的劣弧铺设，故其**长度** $r_j$ 为两座末日塔在星球表面的球面距离。为了避免传输通道的互相干扰，**对于任意一条传输通道所对应的劣弧，其他传输通道所对应的劣弧只会在该劣弧的两端点上与该劣弧相交**。保证由同一条传输通道相连的两座末日塔的位置不是对跖点关系。\n  - 如果不知道大圆、劣弧、球面距离和对跖点是什么，可以参考题面最后的提示部分。\n\n受到传输效率和通道长度的影响，每条传输通道有各自传输以太的容量上限。\n\n- 具体而言，每个单位时间内，第 $j$ 条传输通道的**容量上限**为 $\\frac{Kq_{u_j} q_{v_j}}{r_j^2}$，其中 $K$ 是给定的常数，$q_{u_j}, q_{v_j}$ 为该传输通道两端的塔的传输效率，$r_j$ 为这条传输通道的长度。\n\n整张以太传输网络需要将 $s$ 号塔吸收的以太沿着传输通道传输到 $t$ 号塔，并使得单位时间内的以太传输量最大。为此，传输网络会自动确定一个以太传输方案，在满足所有传输通道容量上限的前提下，最大化这一传输量。\n\n- 换句话说，如果将末日塔看作图上的点，传输通道看作边，而传输通道的容量上限对应每条边的容量，那么以太的传输方案应该恰好为 $s$ 到 $t$ 的最大流。\n\n虽然没有任何人能保证闯入末日塔之后就一定能将其破坏，但作为勇闯末日塔小队的先锋，你还是想在出发之前计算一下，如果成功破坏了所有将要闯入的末日塔，传输网络单位时间的最大传输量将会降至多少。\n\n- 如果成功破坏了选择的末日塔，与其相连的所有传输通道的容量都将降至 $0$，其余传输通道容量不发生变化；此时传输网络会自动调节至一个在新的网络中传输量最大的新方案。\n- 在最理想的情况下，小队将有机会调查并破坏 $L$ 座末日塔。因此，需要事先选择 $L$ 座末日塔（均不能是 $s$ 或 $t$），使得当这 $L$ 座末日塔都被成功破坏时，传输网络的新的传输方案的以太传输量尽可能地小。", "inputFormat": "输入的第一行包括五个正整数 $N, M, L, s, t$（$3\\le N\\le 500$，$2\\le M\\le \\frac{N(N-1)}{2}$，$1\\le L\\le \\min\\{8,N-2\\}$，$1\\le s, t\\le N$），分别表示该传输网络包含的末日塔数量，传输通道数量，有机会闯入的末日塔数量，最主要的以太吸收塔的编号和中枢塔的编号。\n\n输入的第二行包括两个实数 $R, K$（$1\\le R\\le 10^3$，$1\\le K\\le 10^3$），分别表示星球的半径和计算以太容量时用到的常数。\n\n接下来 $N$ 行，每行三个实数 $a_i, b_i, q_i$（$0\\le a_i\\le 1$，$0\\le b_i< 2$，$1\\le q_i \\le 10^3$），描述第 $i$ 座末日塔的信息，其中 $q_i$ 表示第 $i$ 座末日塔的传输能力， $a_i$ 和 $b_i$ 共同描述末日塔的位置：令 $\\theta_i = \\pi a_i$，$\\varphi_i = \\pi b_i$（如果你习惯使用角度制而不是弧度制，可以将 $\\pi$ 改为 $180^\\circ$），则 $\\left(x_i, y_i, z_i\\right) = \\left(R \\sin\\theta_i \\cos\\varphi_i, R\\sin\\theta_i \\sin\\varphi_i, R\\cos\\theta_i\\right)$。保证末日塔的位置各不相同。\n\n最后 $M$ 行，每行两个正整数 $u_i, v_i$（$1\\le u_i, v_i\\le N$），表示一条传输通道连接的两座末日塔的编号。保证同一条传输通道连接的两座末日塔不相同且不互为对跖点，没有两条传输通道连接的是相同的末日塔对，且传输网络是连通的。\n\n保证输入的所有实数保留到小数点后第 $4$ 位。", "outputFormat": "输出一个实数，表示如果成功破坏了将要闯入的末日塔，新的传输网络单位时间的最大传输量。当你的输出与标准输出的相对误差或绝对误差不超过 $10^{-6}$ 时，我们认为你的输出是正确的。", "hint": "### 样例 \\#1 解释\n\n以太传输网络如下图所示。图中蓝色球面即为星球表面；紫色点为各末日塔，其中 $P_i$ 对应输入的第 $i$ 座末日塔；黄色的线表示各传输通道。\n\n![样例 1 示意图](https://cdn.luogu.com.cn/upload/image_hosting/4bynt5dl.png)\n\n原来的传输网络单位时间最大传输量为 $188/\\pi^2$。破坏第 $2$ 个末日塔或第 $5$ 个末日塔都能使新的传输网络单位时间的最大传输量降至 $80/\\pi^2$，而破坏第 $3$ 个末日塔或第 $4$ 个末日塔只能使新的传输网络单位时间的最大传输量降至 $94/\\pi^2$，所以应该选择第 $2$ 个或第 $5$ 个末日塔尝试破坏。", "locale": "zh-CN"}}}
{"pid": "P9973", "type": "P", "difficulty": 1, "samples": [["You are right, but \"Sao Lei (Winmine)\" is a game whose Chinese name contains two characters while English name contains seven.\n", "AI\n"], ["Ni shuo de dui, dan shi zhe ju hua bu shi yi \"You are right, but \" kai tou de.\n", "Human\n"], ["You are wrong. Here is why. The English name of game \"G****** I*****\" contains 14 characters (including a space), not 7.\n", "Human\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "2024", "THUPC"], "title": "[THUPC 2024 初赛] 你说得对，但是 AIGC", "background": "你说得对，但是**本题不接受提供 hack 数据。**", "description": "你说得对，但是众所周知 AIGC 是当下计算机领域最热门的方向之一，算协的几名成员也对此很有兴趣，经过长时间的奋战，终于研发出了一款全新的语言大模型——ChatSAA。\n\n你说得对，但是当模型即将发布之时，开发团队忽然发现模型存在重大问题——由于开发团队的某名成员沉迷于一款**中文二字英文七字的游戏（见样例）**，导致训练模型时使用的语料库被莫名其妙地污染了，这使得模型生成的句子全都带有一个相同的前缀。\n\n你说得对，但是紧急更换语料库重新训练显然已经来不及了，无奈开发团队只能在文档中注明：本模型的最大**特性（而非 bug）**在于生成文本的**前 19 个字符**，这既是模型独特的防伪标记，也充分彰显了算协团队的人文情怀和文化素养。\n\n你说得对，但是一个微不足道的问题在于：这会让人们一眼就能分辨出哪些句子是由 AI 生成的，这会对那些打算用 AI 来写作业的同学很不友好。\n\n你说得对，但是现在你手里有一些句子，这些句子有的是由 ChatSAA 生成的，有的是人类写的（假设人类没有刻意模仿 ChatSAA 的生成特性），你需要写一个程序来辨别二者。", "inputFormat": "你说得对，但是你的程序应当输入一行，一个字符串 $s$ 表示需要判断的句子，满足 $|s| \\le 200$，且 $s$ 由包括空格在内的 ASCII 可见字符（即 ASCII 码在 $32\\sim 126$ 的字符）组成。", "outputFormat": "你说得对，但是你的程序应当输出一行，一个字符串表示判断结果，如果这句话是 AI 生成的，输出 `AI`，否则输出 `Human`。", "hint": "### 样例 \\#1 解释\n你说得对，但是扫雷（Winmine）是一款中文二字英文七字的游戏。\n\n### 提示\n\n你说得对，但是如果我说这道题的题面是 AI 生成的，阁下又该如何应对？", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[THUPC 2024 初赛] 你说得对，但是 AIGC", "background": "你说得对，但是**本题不接受提供 hack 数据。**", "description": "你说得对，但是众所周知 AIGC 是当下计算机领域最热门的方向之一，算协的几名成员也对此很有兴趣，经过长时间的奋战，终于研发出了一款全新的语言大模型——ChatSAA。\n\n你说得对，但是当模型即将发布之时，开发团队忽然发现模型存在重大问题——由于开发团队的某名成员沉迷于一款**中文二字英文七字的游戏（见样例）**，导致训练模型时使用的语料库被莫名其妙地污染了，这使得模型生成的句子全都带有一个相同的前缀。\n\n你说得对，但是紧急更换语料库重新训练显然已经来不及了，无奈开发团队只能在文档中注明：本模型的最大**特性（而非 bug）**在于生成文本的**前 19 个字符**，这既是模型独特的防伪标记，也充分彰显了算协团队的人文情怀和文化素养。\n\n你说得对，但是一个微不足道的问题在于：这会让人们一眼就能分辨出哪些句子是由 AI 生成的，这会对那些打算用 AI 来写作业的同学很不友好。\n\n你说得对，但是现在你手里有一些句子，这些句子有的是由 ChatSAA 生成的，有的是人类写的（假设人类没有刻意模仿 ChatSAA 的生成特性），你需要写一个程序来辨别二者。", "inputFormat": "你说得对，但是你的程序应当输入一行，一个字符串 $s$ 表示需要判断的句子，满足 $|s| \\le 200$，且 $s$ 由包括空格在内的 ASCII 可见字符（即 ASCII 码在 $32\\sim 126$ 的字符）组成。", "outputFormat": "你说得对，但是你的程序应当输出一行，一个字符串表示判断结果，如果这句话是 AI 生成的，输出 `AI`，否则输出 `Human`。", "hint": "### 样例 \\#1 解释\n你说得对，但是扫雷（Winmine）是一款中文二字英文七字的游戏。\n\n### 提示\n\n你说得对，但是如果我说这道题的题面是 AI 生成的，阁下又该如何应对？", "locale": "zh-CN"}}}
{"pid": "P9974", "type": "P", "difficulty": 3, "samples": [["3 2\n3 2 5\n6 1", "7\n2\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2023", "O2优化"], "title": "[USACO23DEC] Candy Cane Feast B", "background": "", "description": "Farmer John 的奶牛对甜食情有独钟，它们尤其喜欢吃糖果棒。FJ 共有 $N$ 头奶牛，每头奶牛都有一个特定的初始高度。他想要喂它们 $M$ 根糖果棒，每根糖果棒的高度也各不相同（$1 \\le N,M \\le 2\\cdot 10^5$）。\n\nFJ 计划按照输入给出的顺序，逐一喂给奶牛们糖果棒。然后，奶牛们会按照输入给出的顺序一个接一个地排队，走向糖果棒，每头奶牛最多吃到与它高度相同的部分（因为它们够不到更高的地方）。即使奶牛吃掉了糖果棒的底部，糖果棒也在最初悬挂的地方保持不动，并不会被降低到地面。如果糖果棒的底部已经高于某头奶牛的高度，那么这头奶牛在它的回合中可能什么也吃不到。每头奶牛轮流吃过后，它们的身高会增加它们吃掉的糖果棒的单位数量，然后农夫约翰挂上下一根糖果棒，奶牛们再次重复这个过程（第一头奶牛再次成为第一个开始吃下一根糖果棒的）。", "inputFormat": "第一行包含 $N$ 和 $M$。\n\n接下来的一行包含 $N$ 头奶牛的初始高度，每头奶牛的高度都在 $[1,10^9]$ 的范围内。\n\n接下来的一行包含 $M$ 根糖果棒的长度，每根糖果棒的长度都在 $[1,10^9]$ 的范围内。", "outputFormat": "输出 $N$ 行，表示每头奶牛最终的高度。\n\n请注意，由于这个问题涉及的整数大小较大，可能需要使用 64 位整数数据类型（例如，在 C/C++ 中使用 `long long` 类型）。", "hint": "### 样例解释 1\n\n第一根糖果棒高度为 $6$ 单位。\n\n- 第一头奶牛吃掉了第一根糖果棒直至高度 $3$ 的部分，之后第一根糖果棒剩余高度 $[3,6]$ 的部分。\n- 第二头奶牛不够高，无法吃掉第一根糖果棒的任何剩余部分。\n- 第三头奶牛额外吃掉了第一根糖果棒的两个单位。第一根糖果棒的剩余高度 $[5,6]$ 的部分未被吃掉。\n\n接下来，每头奶牛根据它吃掉的数量增长，所以奶牛的高度变为 $[3+3, 2+0, 5+2]=[6, 2, 7]$。\n\n第二根糖果棒高度为 $1$ 单位，被第一头奶牛全部吃掉。\n\n### 测试点性质\n\n- 测试点 $2-10$ 满足 $N,M \\le 10^3$。\n- 测试点 $11-14$ 没有额外限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Candy Cane Feast B", "background": "", "description": "Farmer John 的奶牛对甜食情有独钟，它们尤其喜欢吃糖果棒。FJ 共有 $N$ 头奶牛，每头奶牛都有一个特定的初始高度。他想要喂它们 $M$ 根糖果棒，每根糖果棒的高度也各不相同（$1 \\le N,M \\le 2\\cdot 10^5$）。\n\nFJ 计划按照输入给出的顺序，逐一喂给奶牛们糖果棒。然后，奶牛们会按照输入给出的顺序一个接一个地排队，走向糖果棒，每头奶牛最多吃到与它高度相同的部分（因为它们够不到更高的地方）。即使奶牛吃掉了糖果棒的底部，糖果棒也在最初悬挂的地方保持不动，并不会被降低到地面。如果糖果棒的底部已经高于某头奶牛的高度，那么这头奶牛在它的回合中可能什么也吃不到。每头奶牛轮流吃过后，它们的身高会增加它们吃掉的糖果棒的单位数量，然后农夫约翰挂上下一根糖果棒，奶牛们再次重复这个过程（第一头奶牛再次成为第一个开始吃下一根糖果棒的）。", "inputFormat": "第一行包含 $N$ 和 $M$。\n\n接下来的一行包含 $N$ 头奶牛的初始高度，每头奶牛的高度都在 $[1,10^9]$ 的范围内。\n\n接下来的一行包含 $M$ 根糖果棒的长度，每根糖果棒的长度都在 $[1,10^9]$ 的范围内。", "outputFormat": "输出 $N$ 行，表示每头奶牛最终的高度。\n\n请注意，由于这个问题涉及的整数大小较大，可能需要使用 64 位整数数据类型（例如，在 C/C++ 中使用 `long long` 类型）。", "hint": "### 样例解释 1\n\n第一根糖果棒高度为 $6$ 单位。\n\n- 第一头奶牛吃掉了第一根糖果棒直至高度 $3$ 的部分，之后第一根糖果棒剩余高度 $[3,6]$ 的部分。\n- 第二头奶牛不够高，无法吃掉第一根糖果棒的任何剩余部分。\n- 第三头奶牛额外吃掉了第一根糖果棒的两个单位。第一根糖果棒的剩余高度 $[5,6]$ 的部分未被吃掉。\n\n接下来，每头奶牛根据它吃掉的数量增长，所以奶牛的高度变为 $[3+3, 2+0, 5+2]=[6, 2, 7]$。\n\n第二根糖果棒高度为 $1$ 单位，被第一头奶牛全部吃掉。\n\n### 测试点性质\n\n- 测试点 $2-10$ 满足 $N,M \\le 10^3$。\n- 测试点 $11-14$ 没有额外限制。\n", "locale": "zh-CN"}}}
{"pid": "P9975", "type": "P", "difficulty": 3, "samples": [["5\n11111", "1"], ["6\n011101", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "二分", "USACO", "2023", "O2优化"], "title": "[USACO23DEC] Cowntact Tracing 2 B", "background": "", "description": "Farmer John 有 $N$ 头奶牛排成一列（$1 \\leq N \\leq 3\\cdot 10^5$）。不幸的是，有一种疾病正在传播。\n\n最初，有一些奶牛被感染。每到夜晚，被感染的奶牛会将疾病传播给它左右两边的奶牛（如果这些奶牛存在的话）。一旦奶牛被感染，她就会持续处于感染状态。\n\n经过一些晚上，Farmer John 意识到情况已经失控，因此他对奶牛进行了检测以确定哪些奶牛感染了疾病。请找出最少有多少头奶牛最初可能感染了这种疾病。", "inputFormat": "第一行为一个整数 $N$，即 Farmer John 拥有的奶牛数量。\n\n接下来一行，包含长度为 $N$ 的由 $1$ 和 $0$ 组成的位串。其中 $1$ 表示一头被感染的奶牛，$0$ 表示一头在经过若干晚之后仍未被感染的奶牛。", "outputFormat": "输出一个整数，表示最少有多少头奶牛可能最初感染了这种疾病。", "hint": "### 样例解释 1\n\n假设只有中间的奶牛最初被感染。那么，奶牛们将按以下顺序被感染：\n\n- 第 $0$ 晚：$00100$（第三只奶牛一开始被感染）\n- 第 $1$ 晚：$01110$（第二和第四只奶牛现在被感染了）\n- 第 $2$ 晚：$11111$（第一和第五只奶牛现在被感染了）\n- 第 $3$ 晚：$11111$（所有的奶牛都已经被感染了，没有新的奶牛被感染）\n- ……\n\n经过两个或更多的晚上，奶牛们的状态即与输入的状态相符。还有许多其他的初始状态和夜晚数量可能导致了输入的状态，例如：\n\n- 第 $0$ 晚：$10001$\n- 第 $1$ 晚：$11011$\n- 第 $2$ 晚：$11111$\n\n或者：\n\n- 第 $0$ 晚：$01001$\n- 第 $1$ 晚：$11111$\n\n或者：\n\n- 第 $0$ 晚：$01000$\n- 第 $1$ 晚：$11100$\n- 第 $2$ 晚：$11110$\n- 第 $3$ 晚：$11111$\n\n所有这些初始状态中至少有一头奶牛被感染。\n\n### 样例解释 2\n\n唯一可能导致这个最终状态的初始状态和夜晚数是：没有经过任何夜晚，输入中的四头感染的奶牛都是从最开始就感染了这种疾病。\n\n### 测试点性质\n\n- 测试点 $3-7$ 满足 $N \\le 1000$。\n- 测试点 $8-12$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Cowntact Tracing 2 B", "background": "", "description": "Farmer John 有 $N$ 头奶牛排成一列（$1 \\leq N \\leq 3\\cdot 10^5$）。不幸的是，有一种疾病正在传播。\n\n最初，有一些奶牛被感染。每到夜晚，被感染的奶牛会将疾病传播给它左右两边的奶牛（如果这些奶牛存在的话）。一旦奶牛被感染，她就会持续处于感染状态。\n\n经过一些晚上，Farmer John 意识到情况已经失控，因此他对奶牛进行了检测以确定哪些奶牛感染了疾病。请找出最少有多少头奶牛最初可能感染了这种疾病。", "inputFormat": "第一行为一个整数 $N$，即 Farmer John 拥有的奶牛数量。\n\n接下来一行，包含长度为 $N$ 的由 $1$ 和 $0$ 组成的位串。其中 $1$ 表示一头被感染的奶牛，$0$ 表示一头在经过若干晚之后仍未被感染的奶牛。", "outputFormat": "输出一个整数，表示最少有多少头奶牛可能最初感染了这种疾病。", "hint": "### 样例解释 1\n\n假设只有中间的奶牛最初被感染。那么，奶牛们将按以下顺序被感染：\n\n- 第 $0$ 晚：$00100$（第三只奶牛一开始被感染）\n- 第 $1$ 晚：$01110$（第二和第四只奶牛现在被感染了）\n- 第 $2$ 晚：$11111$（第一和第五只奶牛现在被感染了）\n- 第 $3$ 晚：$11111$（所有的奶牛都已经被感染了，没有新的奶牛被感染）\n- ……\n\n经过两个或更多的晚上，奶牛们的状态即与输入的状态相符。还有许多其他的初始状态和夜晚数量可能导致了输入的状态，例如：\n\n- 第 $0$ 晚：$10001$\n- 第 $1$ 晚：$11011$\n- 第 $2$ 晚：$11111$\n\n或者：\n\n- 第 $0$ 晚：$01001$\n- 第 $1$ 晚：$11111$\n\n或者：\n\n- 第 $0$ 晚：$01000$\n- 第 $1$ 晚：$11100$\n- 第 $2$ 晚：$11110$\n- 第 $3$ 晚：$11111$\n\n所有这些初始状态中至少有一头奶牛被感染。\n\n### 样例解释 2\n\n唯一可能导致这个最终状态的初始状态和夜晚数是：没有经过任何夜晚，输入中的四头感染的奶牛都是从最开始就感染了这种疾病。\n\n### 测试点性质\n\n- 测试点 $3-7$ 满足 $N \\le 1000$。\n- 测试点 $8-12$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9976", "type": "P", "difficulty": 3, "samples": [["6\n1\n10\n1\n0\n2\n7 3\n8 10\n1 0\n2\n3 6\n10 8\n0 1\n2\n7 3\n8 9\n1 0\n2\n7 7\n8 8\n0 1\n2\n7 3\n8 8\n1 0", "0\n3\n2\n5\n-1\n-1"], ["2\n5\n7 4 1 10 12\n3 4 5 2 1\n2 1 0 3 4\n5\n4 10 12 7 1\n3 1 1 4 5\n2 4 3 1 0", "4\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "USACO", "2023", "O2优化"], "title": "[USACO23DEC] Farmer John Actually Farms B", "background": "", "description": "Farmer John 在他的农场上种植了 $N$（$1 \\leq N \\leq 2\\cdot 10^5$） 株芦笋！然而，其中有一些植物存在基因差异，长得比其他植物快。第 $i$ 株植物的初始高度为 $h_i$ 英寸，之后每天，第 $i$ 株植物长高 $a_i$ 英寸。\n\nFJ 更加钟爱其中的一些植物。他将给你一组由不同整数组成的数组 $t_1,\\dots,t_N$，这个数组包含 $0$ 到 $N-1$ 的全部整数。他希望恰好有 $t_i$ 株植物比第 $i$ 株植物高。找到最少要经过多少天，才能满足 FJ 的要求，或者报告这个要求是不可能满足的。", "inputFormat": "**每个测试点中包含多组测试数据。**\n\n第一行为一个整数 $T$，代表测试数据组数（$1 \\leq T \\leq 10$）。\n\n对于每一组测试数据，第一行一个整数 $N$（$1 \\leq N \\leq 2\\cdot 10^5$），表示植物数量。\n\n第二行包含 $N$ 个整数 $h_i$（$1 \\leq h_i \\leq 10^9$），表示第 $i$ 株植物的初始高度。\n\n第三行包含 $N$ 个整数 $a_i$（$1 \\leq a_i \\leq 10^9$），表示第 $i$ 株植物每天增长的高度。\n\n第四行包含 $N$ 个不同的整数 $t_i$，表示 FJ 给你的数组。\n\n保证所有测试数据的 $N$ 的和不超过 $2\\cdot 10^5$。", "outputFormat": "输出 $T$ 行，每行表示一组测试数据的答案。如果要求不可能满足，输出 $-1$。\n\n请注意，由于这个问题涉及的整数大小较大，可能需要使用 64 位整数数据类型（例如，在 C/C++ 中使用 `long long` 类型）。", "hint": "### 样例解释 1\n\n在第一组样例中，有 $6$ 组测试数据。\n\n在第一组测试数据中，只有一株植物，所以要求在第 $0$ 天就已经满足。\n\n在第二组测试数据中，需要让第一株植物比第二株植物矮。第   $1$ 天后，它们的高度为 $15,13$；第 $2$ 天后，它们的高度均为 $23$；第 $3$ 天后，它们的高度为 $31,33$，这是满足要求的第一天。\n\n第三组和第四组测试数据与第二组类似。\n\n在第五组测试数据中，两株植物的初始高度均为 $7$ 英寸，且每天均增长 $8$ 英寸，所以它们的高度永远相同。因此，条件永远无法满足。\n\n在第六组测试数据中，初始高度不满足要求且增长速度均相同，所以条件永远无法满足。\n\n### 样例解释 2\n\n在第二组样例中，有 $2$ 组测试数据。\n\n在第一组测试数据中，第 $4$ 天后的最终高度为 $19, 20, 21, 18, 16$。\n\n在第二组测试数据中，第 $7$ 天后的最终高度为 $25, 17, 19, 35, 36$。\n\n### 测试点性质\n\n- 测试点 $3$ 满足 $N \\le 2$。\n- 测试点 $4-5$ 满足 $N \\le 50$，$a_i, h_i \\le 10^3$。\n- 测试点 $6-8$ 满足 $N \\le 10^3$。\n- 测试点 $9-13$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Farmer John Actually Farms B", "background": "", "description": "Farmer John 在他的农场上种植了 $N$（$1 \\leq N \\leq 2\\cdot 10^5$） 株芦笋！然而，其中有一些植物存在基因差异，长得比其他植物快。第 $i$ 株植物的初始高度为 $h_i$ 英寸，之后每天，第 $i$ 株植物长高 $a_i$ 英寸。\n\nFJ 更加钟爱其中的一些植物。他将给你一组由不同整数组成的数组 $t_1,\\dots,t_N$，这个数组包含 $0$ 到 $N-1$ 的全部整数。他希望恰好有 $t_i$ 株植物比第 $i$ 株植物高。找到最少要经过多少天，才能满足 FJ 的要求，或者报告这个要求是不可能满足的。", "inputFormat": "**每个测试点中包含多组测试数据。**\n\n第一行为一个整数 $T$，代表测试数据组数（$1 \\leq T \\leq 10$）。\n\n对于每一组测试数据，第一行一个整数 $N$（$1 \\leq N \\leq 2\\cdot 10^5$），表示植物数量。\n\n第二行包含 $N$ 个整数 $h_i$（$1 \\leq h_i \\leq 10^9$），表示第 $i$ 株植物的初始高度。\n\n第三行包含 $N$ 个整数 $a_i$（$1 \\leq a_i \\leq 10^9$），表示第 $i$ 株植物每天增长的高度。\n\n第四行包含 $N$ 个不同的整数 $t_i$，表示 FJ 给你的数组。\n\n保证所有测试数据的 $N$ 的和不超过 $2\\cdot 10^5$。", "outputFormat": "输出 $T$ 行，每行表示一组测试数据的答案。如果要求不可能满足，输出 $-1$。\n\n请注意，由于这个问题涉及的整数大小较大，可能需要使用 64 位整数数据类型（例如，在 C/C++ 中使用 `long long` 类型）。", "hint": "### 样例解释 1\n\n在第一组样例中，有 $6$ 组测试数据。\n\n在第一组测试数据中，只有一株植物，所以要求在第 $0$ 天就已经满足。\n\n在第二组测试数据中，需要让第一株植物比第二株植物矮。第   $1$ 天后，它们的高度为 $15,13$；第 $2$ 天后，它们的高度均为 $23$；第 $3$ 天后，它们的高度为 $31,33$，这是满足要求的第一天。\n\n第三组和第四组测试数据与第二组类似。\n\n在第五组测试数据中，两株植物的初始高度均为 $7$ 英寸，且每天均增长 $8$ 英寸，所以它们的高度永远相同。因此，条件永远无法满足。\n\n在第六组测试数据中，初始高度不满足要求且增长速度均相同，所以条件永远无法满足。\n\n### 样例解释 2\n\n在第二组样例中，有 $2$ 组测试数据。\n\n在第一组测试数据中，第 $4$ 天后的最终高度为 $19, 20, 21, 18, 16$。\n\n在第二组测试数据中，第 $7$ 天后的最终高度为 $25, 17, 19, 35, 36$。\n\n### 测试点性质\n\n- 测试点 $3$ 满足 $N \\le 2$。\n- 测试点 $4-5$ 满足 $N \\le 50$，$a_i, h_i \\le 10^3$。\n- 测试点 $6-8$ 满足 $N \\le 10^3$。\n- 测试点 $9-13$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9977", "type": "P", "difficulty": 4, "samples": [["3 5 2\n9 4\n7 6\n5 5", "14"], ["3 5 3\n5 5\n7 6\n9 4", "9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "USACO", "堆", "2023", "O2优化", "排序"], "title": "[USACO23DEC] Bovine Acrobatics S", "background": "", "description": "Farmer John 决定让他的奶牛表演杂技！首先，FJ 为他的奶牛称重，发现她们有 $N$（$1\\le N\\le 2\\times 10^5$）个不同的体重。具体来说，对于全部的 $i\\in [1,N]$，有 $a_i$ 只奶牛的体重为 $w_i$ 单位（$1\\le a_i\\le 10^9, 1\\le w_i\\le 10^9$）。\n\n他最出名的节目需要奶牛叠成**平衡的奶牛塔**。一座**奶牛塔**是一些奶牛，每只奶牛站在下一只奶牛身上。一座奶牛塔是**平衡的**，当且仅当每一只被踩着的奶牛，都比**直接**踩在它身上的那只奶牛重至少 $K$（$1\\le K\\le 10^9$）单位。每只奶牛都可以成为奶牛塔的一部分。\n\n如果 FJ 想要创造最多 $M$（$1 \\le M \\le 10^9$）座奶牛塔，最多有多少只奶牛可以成为奶牛塔的一部分？", "inputFormat": "第一行包含三个空格分隔的整数 $N$，$M$ 和 $K$。\n\n接下来 $N$ 行，每行包含两个空格分隔的整数 $w_i$ 和 $a_i$。保证所有的 $w_i$ 是不同的。", "outputFormat": "输出当 FJ 采用最佳方案时，奶牛塔中奶牛的最大数目。", "hint": "### 样例解释 1\n\nFJ 可以用体重为 $5,7,9$ 的奶牛创造四座平衡的奶牛塔，再用体重为 $5,7$ 的奶牛创造另一座。\n\n### 样例解释 2\n\nFJ 可以用体重为 $5,9$ 的奶牛创造四座平衡的奶牛塔，再用体重为 $7$ 的一只奶牛创造另一座。或者，他可以用体重为 $5,9$ 的奶牛创造四座平衡的奶牛塔，再用体重为 $5$ 的一只奶牛创造另一座。\n\n### 测试点性质\n\n- 测试点 $3-5$ 满足 $M \\le 5000$ 且奶牛的总数不超过 $5000$。\n- 测试点 $6-11$ 满足奶牛的总数不超过 $2\\cdot 10^5$。\n- 测试点 $12-17$ 没有额外限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Bovine Acrobatics S", "background": "", "description": "Farmer John 决定让他的奶牛表演杂技！首先，FJ 为他的奶牛称重，发现她们有 $N$（$1\\le N\\le 2\\times 10^5$）个不同的体重。具体来说，对于全部的 $i\\in [1,N]$，有 $a_i$ 只奶牛的体重为 $w_i$ 单位（$1\\le a_i\\le 10^9, 1\\le w_i\\le 10^9$）。\n\n他最出名的节目需要奶牛叠成**平衡的奶牛塔**。一座**奶牛塔**是一些奶牛，每只奶牛站在下一只奶牛身上。一座奶牛塔是**平衡的**，当且仅当每一只被踩着的奶牛，都比**直接**踩在它身上的那只奶牛重至少 $K$（$1\\le K\\le 10^9$）单位。每只奶牛都可以成为奶牛塔的一部分。\n\n如果 FJ 想要创造最多 $M$（$1 \\le M \\le 10^9$）座奶牛塔，最多有多少只奶牛可以成为奶牛塔的一部分？", "inputFormat": "第一行包含三个空格分隔的整数 $N$，$M$ 和 $K$。\n\n接下来 $N$ 行，每行包含两个空格分隔的整数 $w_i$ 和 $a_i$。保证所有的 $w_i$ 是不同的。", "outputFormat": "输出当 FJ 采用最佳方案时，奶牛塔中奶牛的最大数目。", "hint": "### 样例解释 1\n\nFJ 可以用体重为 $5,7,9$ 的奶牛创造四座平衡的奶牛塔，再用体重为 $5,7$ 的奶牛创造另一座。\n\n### 样例解释 2\n\nFJ 可以用体重为 $5,9$ 的奶牛创造四座平衡的奶牛塔，再用体重为 $7$ 的一只奶牛创造另一座。或者，他可以用体重为 $5,9$ 的奶牛创造四座平衡的奶牛塔，再用体重为 $5$ 的一只奶牛创造另一座。\n\n### 测试点性质\n\n- 测试点 $3-5$ 满足 $M \\le 5000$ 且奶牛的总数不超过 $5000$。\n- 测试点 $6-11$ 满足奶牛的总数不超过 $2\\cdot 10^5$。\n- 测试点 $12-17$ 没有额外限制。\n", "locale": "zh-CN"}}}
{"pid": "P9978", "type": "P", "difficulty": 3, "samples": [["6 3\n1 2 3\n2 3 1", "6"], ["6 3\n1 2 3\n4 5 6", "0"], ["6 4\n1 2 3 4\n4 3 2 5", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2023", "O2优化", "枚举", "分类讨论"], "title": "[USACO23DEC] Cycle Correspondence S", "background": "", "description": "Farmer John 有 $N$（$3 \\le N \\le 5\\cdot 10^5$）座谷仓，其中 $K$ 对不同的谷仓连接在一起。\n\n一开始，Annabelle 为每座谷仓分配了一个 $[1,N]$ 范围内的整数编号，并发现编号为 $a_1,\\dots,a_K$ 的谷仓按照顺序形成了一个环形连接。换句话说，对于所有的 $1 \\le i < K$，谷仓 $a_i$ 和 $a_{i+1}$ 相连，谷仓 $a_K$ 与 $a_1$ 亦相连。所有的 $a_i$ 不相同。\n\n然后，Bessie 也为每个谷仓分配了一个 $[1,N]$ 范围内的整数编号，并发现编号为 $b_1,\\dots,b_K$ 也按照顺序形成了一个环形链接。所有的 $b_i$ 不相同。\n\n一些（可能没有或全部）谷仓被 Annabelle 和 Bessie 分配了相同的编号。计算最多有多少个这样的谷仓。", "inputFormat": "第一行包含 $N$ 和 $K$。\n\n接下来一行包含 $a_1,\\dots,a_K$。\n\n接下来一行包含 $b_1,\\dots,b_K$。", "outputFormat": "分配了相同编号谷仓的最大数量。", "hint": "### 样例解释 1\n\nAnnabelle 和 Bessie 可以为每个谷仓分配相同的编号。\n\n### 样例解释 2\n\nAnnabelle 和 Bessie 无法为任何谷仓分配相同的编号。\n\n### 样例解释 3\n\nAnnabelle 和 Bessie 可以分配编号 $2,3,4,6$ 给相同的谷仓。\n\n### 测试点性质\n\n- 测试点 $4-5$ 满足 $N \\le 8$。\n- 测试点 $6-8$ 满足 $N \\le 5000$。\n- 测试点 $9-15$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Cycle Correspondence S", "background": "", "description": "Farmer John 有 $N$（$3 \\le N \\le 5\\cdot 10^5$）座谷仓，其中 $K$ 对不同的谷仓连接在一起。\n\n一开始，Annabelle 为每座谷仓分配了一个 $[1,N]$ 范围内的整数编号，并发现编号为 $a_1,\\dots,a_K$ 的谷仓按照顺序形成了一个环形连接。换句话说，对于所有的 $1 \\le i < K$，谷仓 $a_i$ 和 $a_{i+1}$ 相连，谷仓 $a_K$ 与 $a_1$ 亦相连。所有的 $a_i$ 不相同。\n\n然后，Bessie 也为每个谷仓分配了一个 $[1,N]$ 范围内的整数编号，并发现编号为 $b_1,\\dots,b_K$ 也按照顺序形成了一个环形链接。所有的 $b_i$ 不相同。\n\n一些（可能没有或全部）谷仓被 Annabelle 和 Bessie 分配了相同的编号。计算最多有多少个这样的谷仓。", "inputFormat": "第一行包含 $N$ 和 $K$。\n\n接下来一行包含 $a_1,\\dots,a_K$。\n\n接下来一行包含 $b_1,\\dots,b_K$。", "outputFormat": "分配了相同编号谷仓的最大数量。", "hint": "### 样例解释 1\n\nAnnabelle 和 Bessie 可以为每个谷仓分配相同的编号。\n\n### 样例解释 2\n\nAnnabelle 和 Bessie 无法为任何谷仓分配相同的编号。\n\n### 样例解释 3\n\nAnnabelle 和 Bessie 可以分配编号 $2,3,4,6$ 给相同的谷仓。\n\n### 测试点性质\n\n- 测试点 $4-5$ 满足 $N \\le 8$。\n- 测试点 $6-8$ 满足 $N \\le 5000$。\n- 测试点 $9-15$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9979", "type": "P", "difficulty": 4, "samples": [["3 7\n0 -1 1\nLFFRFRR", "3"], ["1 5\n0\nFFFFF", "1"], ["5 6\n1 2 3 4 5\nFFRFRF", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "USACO", "2023", "O2优化", "分类讨论"], "title": "[USACO23DEC] Target Practice S", "background": "", "description": "Bessie 是一只仿生牛。在一条数轴上，她正尝试命中 $T$（$1 \\leq T \\leq 10^5$）个位于不同位置的靶子。Bessie 在位置 $0$ 开始行动，并遵循一个长度为 $C$（$1 \\leq C \\leq 10^5$）的命令序列，序列由 `L`、`F` 和 `R` 组成：\n\n- `L`：Bessie 向左移动一个单位距离。\n- `R`：Bessie 向右移动一个单位距离。\n- `F`：Bessie 开枪。如果有一个靶子在 Bessies 当前的位置，这个靶子将被命中并摧毁。它不可以再次被命中。\n\n如果在 Bessie 开始前，你被允许修改序列中的至多一条命令，Bessie 最多可以命中多少靶子？", "inputFormat": "第一行包含 $T$ 和 $C$。\n\n下一行包含 $T$ 个靶子的位置，均为 $[-C,C]$ 范围内的不同整数。\n\n下一行包含长度为 $C$ 的命令序列，仅包含字符 `F`、`L` 和 `R`.", "outputFormat": "输出修改至多一个命令后，Bessie 可以命中的靶子的最大数量。", "hint": "### 样例解释 1\n\n如果你对命令序列不做任何修改，Bessie 将命中两个靶子。\n\n| 命令 | 位置 | 命中的靶子数目 |\n| :----------- | :----------- | :----------- |\n| Start | 0 | 0 |\n| L | -1 | 0 |\n| F | -1 | 1 |\n| F | -1 | 1（无法摧毁靶子超过 1 次） |\n| R | 0 | 1 |\n| F | 0 | 2 |\n| R | 1 | 2 |\n| R | 2 | 2 |\n\n如果你将最后一条命令由 `R` 修改为 `F`，Bessie 将命中三个靶子：\n\n| 命令 | 位置 | 命中的靶子数目 |\n| :----------- | :----------- | :----------- |\n| Start | 0 | 0 |\n| L | -1 | 0 |\n| F | -1 | 1 |\n| F | -1 | 1（无法摧毁靶子超过 1 次） |\n| R | 0 | 1 |\n| F | 0 | 2 |\n| R | 1 | 2 |\n| F | 1 | 3 |\n\n### 样例解释 2\n\n如果命令序列不修改，在位置 $0$ 的唯一一个靶子将被命中。\n\n由于一个靶子不能被多次摧毁，答案为 $1$。\n\n### 测试点性质\n\n- 测试点 $4-6$ 满足 $T,C \\le 1000$。\n- 测试点 $7-15$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Target Practice S", "background": "", "description": "Bessie 是一只仿生牛。在一条数轴上，她正尝试命中 $T$（$1 \\leq T \\leq 10^5$）个位于不同位置的靶子。Bessie 在位置 $0$ 开始行动，并遵循一个长度为 $C$（$1 \\leq C \\leq 10^5$）的命令序列，序列由 `L`、`F` 和 `R` 组成：\n\n- `L`：Bessie 向左移动一个单位距离。\n- `R`：Bessie 向右移动一个单位距离。\n- `F`：Bessie 开枪。如果有一个靶子在 Bessies 当前的位置，这个靶子将被命中并摧毁。它不可以再次被命中。\n\n如果在 Bessie 开始前，你被允许修改序列中的至多一条命令，Bessie 最多可以命中多少靶子？", "inputFormat": "第一行包含 $T$ 和 $C$。\n\n下一行包含 $T$ 个靶子的位置，均为 $[-C,C]$ 范围内的不同整数。\n\n下一行包含长度为 $C$ 的命令序列，仅包含字符 `F`、`L` 和 `R`.", "outputFormat": "输出修改至多一个命令后，Bessie 可以命中的靶子的最大数量。", "hint": "### 样例解释 1\n\n如果你对命令序列不做任何修改，Bessie 将命中两个靶子。\n\n| 命令 | 位置 | 命中的靶子数目 |\n| :----------- | :----------- | :----------- |\n| Start | 0 | 0 |\n| L | -1 | 0 |\n| F | -1 | 1 |\n| F | -1 | 1（无法摧毁靶子超过 1 次） |\n| R | 0 | 1 |\n| F | 0 | 2 |\n| R | 1 | 2 |\n| R | 2 | 2 |\n\n如果你将最后一条命令由 `R` 修改为 `F`，Bessie 将命中三个靶子：\n\n| 命令 | 位置 | 命中的靶子数目 |\n| :----------- | :----------- | :----------- |\n| Start | 0 | 0 |\n| L | -1 | 0 |\n| F | -1 | 1 |\n| F | -1 | 1（无法摧毁靶子超过 1 次） |\n| R | 0 | 1 |\n| F | 0 | 2 |\n| R | 1 | 2 |\n| F | 1 | 3 |\n\n### 样例解释 2\n\n如果命令序列不修改，在位置 $0$ 的唯一一个靶子将被命中。\n\n由于一个靶子不能被多次摧毁，答案为 $1$。\n\n### 测试点性质\n\n- 测试点 $4-6$ 满足 $T,C \\le 1000$。\n- 测试点 $7-15$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9980", "type": "P", "difficulty": 4, "samples": [["3\n11\n1", "2"], ["5\n1111\n101\n01\n1", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2023", "O2优化"], "title": "[USACO23DEC] Flight Routes G", "background": "", "description": "Bessie 最近发现她最喜欢的摇滚艺术家 Elsie Swift 正在表演她最新的“时代之旅”音乐会！不幸的是，票卖光的太快了，所以 Bessie 考虑飞往另一个城市参加音乐会。“时代之旅”将在编号为 $1\\dots N$ 的 $N$（$2 \\le N \\le 750$）座城市上演，每对满足 $i<j$ 的城市对 $(i,j)$ 都可能存在从 $i$ 到 $j$ 的一条**单向直飞航班**。\n\n从城市 $a$ 到城市 $b$ 的一条**航线**是一个包含 $k\\ge 2$ 座城市的序列 $a=c_1<c_2<\\cdots<c_k=b$，使得对于所有的 $1\\le i< k$，城市 $c_{i}$ 到城市 $c_{i+1}$ 有**单向直飞航班**。对于所有满足 $i<j$ 的城市对 $(i,j)$，你将被告知它们之间航线数目的奇偶性（$0$ 代表偶数，$1$ 代表奇数）。\n\n在计划她的旅行行程时，Bessie 分心了。现在她想知道，有多少对城市间有**单向直飞航班**。可以证明答案是唯一的。", "inputFormat": "第一行包含整数 $N$。\n\n接下来 $N-1$ 行，第 $i$ 行包含 $N-i$ 个整数。第 $i$ 行的第 $j$ 个整数表示从城市 $i$ 到城市 $i+j$ 的航线数目的奇偶性。", "outputFormat": "输出有单向直飞航班的城市对数。", "hint": "### 样例解释 1\n\n有两条单向直飞航班：$1\\rightarrow 2$ 和 $2\\rightarrow 3$。有城市 $1,2$ 之间、$2,3$ 之间，仅包含一条单向直飞航班的航线各一条。还有城市 $1,3$ 之间的航线一条（$1\\rightarrow 2\\rightarrow 3$）。\n\n### 样例解释 2\n\n有六条单向直飞航班：$1\\rightarrow 2$，$1 \\rightarrow 4$，$1\\rightarrow 5$，$2\\rightarrow 3$，$3\\rightarrow 5$，$4\\rightarrow 5$。这导致的航线数如下表所示：\n\n| 出发地\\目的地 | 1 | 2 | 3 | 4 | 5 |\n| :-: | :-: | :-: | :-: | :-:|:-:|\n| 1 | 0 | 1 | 1 | 1 | 3 |\n| 2 | 0 | 0 | 1 | 0 | 1 |\n| 3 | 0 | 0 | 0 | 0 | 1 |\n| 4 | 0 | 0 | 0 | 0 | 1 |\n| 5 | 0 | 0 | 0 | 0 | 0 |\n\n这与输入是相符的。\n\n### 测试点性质\n\n- 测试点 $3-4$ 满足 $N \\le 6$。\n- 测试点 $5-12$ 满足 $N \\le 100$。\n- 测试点 $13-22$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Flight Routes G", "background": "", "description": "Bessie 最近发现她最喜欢的摇滚艺术家 Elsie Swift 正在表演她最新的“时代之旅”音乐会！不幸的是，票卖光的太快了，所以 Bessie 考虑飞往另一个城市参加音乐会。“时代之旅”将在编号为 $1\\dots N$ 的 $N$（$2 \\le N \\le 750$）座城市上演，每对满足 $i<j$ 的城市对 $(i,j)$ 都可能存在从 $i$ 到 $j$ 的一条**单向直飞航班**。\n\n从城市 $a$ 到城市 $b$ 的一条**航线**是一个包含 $k\\ge 2$ 座城市的序列 $a=c_1<c_2<\\cdots<c_k=b$，使得对于所有的 $1\\le i< k$，城市 $c_{i}$ 到城市 $c_{i+1}$ 有**单向直飞航班**。对于所有满足 $i<j$ 的城市对 $(i,j)$，你将被告知它们之间航线数目的奇偶性（$0$ 代表偶数，$1$ 代表奇数）。\n\n在计划她的旅行行程时，Bessie 分心了。现在她想知道，有多少对城市间有**单向直飞航班**。可以证明答案是唯一的。", "inputFormat": "第一行包含整数 $N$。\n\n接下来 $N-1$ 行，第 $i$ 行包含 $N-i$ 个整数。第 $i$ 行的第 $j$ 个整数表示从城市 $i$ 到城市 $i+j$ 的航线数目的奇偶性。", "outputFormat": "输出有单向直飞航班的城市对数。", "hint": "### 样例解释 1\n\n有两条单向直飞航班：$1\\rightarrow 2$ 和 $2\\rightarrow 3$。有城市 $1,2$ 之间、$2,3$ 之间，仅包含一条单向直飞航班的航线各一条。还有城市 $1,3$ 之间的航线一条（$1\\rightarrow 2\\rightarrow 3$）。\n\n### 样例解释 2\n\n有六条单向直飞航班：$1\\rightarrow 2$，$1 \\rightarrow 4$，$1\\rightarrow 5$，$2\\rightarrow 3$，$3\\rightarrow 5$，$4\\rightarrow 5$。这导致的航线数如下表所示：\n\n| 出发地\\目的地 | 1 | 2 | 3 | 4 | 5 |\n| :-: | :-: | :-: | :-: | :-:|:-:|\n| 1 | 0 | 1 | 1 | 1 | 3 |\n| 2 | 0 | 0 | 1 | 0 | 1 |\n| 3 | 0 | 0 | 0 | 0 | 1 |\n| 4 | 0 | 0 | 0 | 0 | 1 |\n| 5 | 0 | 0 | 0 | 0 | 0 |\n\n这与输入是相符的。\n\n### 测试点性质\n\n- 测试点 $3-4$ 满足 $N \\le 6$。\n- 测试点 $5-12$ 满足 $N \\le 100$。\n- 测试点 $13-22$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9981", "type": "P", "difficulty": 5, "samples": [["4 5\n4 3 10\n4 2 10\n3 1 10\n2 1 10\n4 1 10", "0 0\n1 10\n1 10\n2 20"], ["4 5\n4 3 4\n4 2 2\n3 1 5\n2 1 10\n4 1 1", "0 0\n1 10\n1 5\n2 12"], ["4 5\n4 3 2\n4 2 2\n3 1 5\n2 1 10\n4 1 1", "0 0\n1 10\n1 5\n2 7"], ["4 5\n4 3 2\n4 2 2\n3 1 10\n2 1 5\n4 1 1", "0 0\n1 5\n1 10\n2 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "倍增", "USACO", "2023", "O2优化", "拓扑排序", "哈希 hashing"], "title": "[USACO23DEC] Minimum Longest Trip G", "background": null, "description": "Bessie 正在奶牛大陆上旅行。奶牛大陆由从 $1$ 到 $N$ 编号的 $N$（$2 \\le N \\le 2\\cdot 10^5$）座城市和 $M$（$1 \\le M \\le 4\\cdot 10^5$）条单向道路组成。第 $i$ 条路从城市 $a_i$ 通向城市 $b_i$，标签为 $l_i$（$1 \\le l_i \\le 10^9$）。\n\n由城市 $x_0$ 开始的长度为 $k$ 的旅程被定义为一个城市序列 $x_0,x_1,\\ldots,x_k$，对于所有的 $0 \\le i < k$，存在由城市 $x_i$ 到 $x_{i+1}$ 的路。保证在奶牛大陆上不存在长度无限的旅程，不存在两条路连接一对相同的城市。\n\n对于每座城市，Bessie 想知道从它开始的最长旅程。对于一些城市，从它们开始的最长旅程不唯一，Bessie 将选择其中道路标签序列字典序更小的旅程。一个序列比等长的另一个序列字典序更小，当且仅当在它们不同的第一个位置，前者比后者的元素更小。\n\n输出 Bessie 在每座城市选择的旅途的长度和道路标签之和。", "inputFormat": "第一行包含 $N$ 和 $M$。\n\n接下来 $M$ 行，每行三个整数 $a_i,b_i,l_i$，代表一条由 $a_i$ 到 $b_i$，标签为 $l_i$ 的单向道路。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含由空格分隔的两个整数，表示 Bessie 选择的从城市 $i$ 开始的旅程的长度和道路标签之和。", "hint": "### 样例解释 2\n\n在下面的解释中，我们用 $a_i\\xrightarrow{l_i} b_i$ 表示由城市 $a_i$ 通往 $b_i$，标签为 $l_i$ 的单向道路。\n\n从城市 $4$ 出发有多条旅程，包含 $4\\xrightarrow{4} 3\\xrightarrow 5 1$，$4\\xrightarrow 1 1$ 和 $4\\xrightarrow 2 2\\xrightarrow{10} 1$。在这些旅程中，$4\\xrightarrow{4} 3\\xrightarrow 5 1$ 和 $4\\xrightarrow 2 2\\xrightarrow{10} 1$ 是最长的。它们的长度均为 $2$，道路标签序列分别为 $[4,5]$ 和 $[2,10]$。$[2,10]$ 是字典序更小的那一个，它的和为 $12$。\n\n### 测试点性质\n\n- 测试点 $5-6$ 满足所有道路的标签相同。\n- 测试点 $7-8$ 满足所有道路的标签不相同。\n- 测试点 $9-10$ 满足 $N,M \\le 5000$。\n- 测试点 $11-20$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Minimum Longest Trip G", "background": null, "description": "Bessie 正在奶牛大陆上旅行。奶牛大陆由从 $1$ 到 $N$ 编号的 $N$（$2 \\le N \\le 2\\cdot 10^5$）座城市和 $M$（$1 \\le M \\le 4\\cdot 10^5$）条单向道路组成。第 $i$ 条路从城市 $a_i$ 通向城市 $b_i$，标签为 $l_i$（$1 \\le l_i \\le 10^9$）。\n\n由城市 $x_0$ 开始的长度为 $k$ 的旅程被定义为一个城市序列 $x_0,x_1,\\ldots,x_k$，对于所有的 $0 \\le i < k$，存在由城市 $x_i$ 到 $x_{i+1}$ 的路。保证在奶牛大陆上不存在长度无限的旅程，不存在两条路连接一对相同的城市。\n\n对于每座城市，Bessie 想知道从它开始的最长旅程。对于一些城市，从它们开始的最长旅程不唯一，Bessie 将选择其中道路标签序列字典序更小的旅程。一个序列比等长的另一个序列字典序更小，当且仅当在它们不同的第一个位置，前者比后者的元素更小。\n\n输出 Bessie 在每座城市选择的旅途的长度和道路标签之和。", "inputFormat": "第一行包含 $N$ 和 $M$。\n\n接下来 $M$ 行，每行三个整数 $a_i,b_i,l_i$，代表一条由 $a_i$ 到 $b_i$，标签为 $l_i$ 的单向道路。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含由空格分隔的两个整数，表示 Bessie 选择的从城市 $i$ 开始的旅程的长度和道路标签之和。", "hint": "### 样例解释 2\n\n在下面的解释中，我们用 $a_i\\xrightarrow{l_i} b_i$ 表示由城市 $a_i$ 通往 $b_i$，标签为 $l_i$ 的单向道路。\n\n从城市 $4$ 出发有多条旅程，包含 $4\\xrightarrow{4} 3\\xrightarrow 5 1$，$4\\xrightarrow 1 1$ 和 $4\\xrightarrow 2 2\\xrightarrow{10} 1$。在这些旅程中，$4\\xrightarrow{4} 3\\xrightarrow 5 1$ 和 $4\\xrightarrow 2 2\\xrightarrow{10} 1$ 是最长的。它们的长度均为 $2$，道路标签序列分别为 $[4,5]$ 和 $[2,10]$。$[2,10]$ 是字典序更小的那一个，它的和为 $12$。\n\n### 测试点性质\n\n- 测试点 $5-6$ 满足所有道路的标签相同。\n- 测试点 $7-8$ 满足所有道路的标签不相同。\n- 测试点 $9-10$ 满足 $N,M \\le 5000$。\n- 测试点 $11-20$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9982", "type": "P", "difficulty": 4, "samples": [["5\n1 4 2 3 10\n4\n1 1\n2 1\n1 2\n1 4", "11\n13\n18\n30"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "二分", "USACO", "2023", "三分", "O2优化"], "title": "[USACO23DEC] Haybale Distribution G", "background": null, "description": "Farmer John 正在农场上分发干草堆。\n\nFarmer John 的农场上有 $N$（$1 \\le N \\le 2\\cdot 10^5$）座谷仓，分别位于数轴上的整点 $x_1,\\ldots,x_N$（$0 \\le x_i \\le 10^6$）。Farmer John 正计划将 $N$ 车干草堆运输到整点 $y$（$0 \\le y \\le 10^6$），然后为每一座谷仓运输一车干草堆。\n\n不幸的是，Farmer John 的运输系统浪费了很多干草堆。具体来说，给出一些 $a_i,b_i$（$1 \\le a_i,b_i \\le 10^6$），每车干草堆每向左移动一单位距离，$a_i$ 堆干草堆会被浪费；每车干草堆每向右移动一单位距离，$b_i$ 堆干草堆会被浪费。形式化地，一车干草堆从整点 $y$ 运动到位于 $x$ 的谷仓，被浪费的干草堆堆数如下：\n\n$$\\begin{cases}a_i\\cdot (y-x) & \\text{if} \\ y>x \\\\ b_i\\cdot(x-y)&\\text{if}\\ x>y\\end{cases}$$\n\n给出 $Q$（$1 \\le Q \\le 2 \\cdot 10^5$）组相互独立的询问，每组询问给出一组 $(a_i,b_i)$ 的值，帮助 Farmer John 计算当按照最佳方案选择 $y$，最少有多少堆干草堆被浪费。", "inputFormat": "第一行包含 $N$。\n\n接下来一行包含 $x_1\\dots x_N$。\n\n接下来一行包含 $Q$。\n\n接下来 $Q$ 行，每行包含两个整数 $a_i,b_i$。", "outputFormat": "输出 $Q$ 行，第 $i$ 行包含第 $i$ 个询问的答案。", "hint": "### 样例解释 1\n\n样例中第二个询问，最佳方案为选择 $y=2$，被浪费的干草堆数量为 $2(2-1)+2(2-2)+1(3-2)+1(4-2)+1(10-2)=2+0+1+2+8=13$。\n\n### 测试点性质\n\n- 测试点 $2$ 满足 $N,Q \\le 10$。\n- 测试点 $3$ 满足 $N,Q \\le 500$。\n- 测试点 $4-6$ 满足 $N,Q \\le 5000$。\n- 测试点 $7-16$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Haybale Distribution G", "background": null, "description": "Farmer John 正在农场上分发干草堆。\n\nFarmer John 的农场上有 $N$（$1 \\le N \\le 2\\cdot 10^5$）座谷仓，分别位于数轴上的整点 $x_1,\\ldots,x_N$（$0 \\le x_i \\le 10^6$）。Farmer John 正计划将 $N$ 车干草堆运输到整点 $y$（$0 \\le y \\le 10^6$），然后为每一座谷仓运输一车干草堆。\n\n不幸的是，Farmer John 的运输系统浪费了很多干草堆。具体来说，给出一些 $a_i,b_i$（$1 \\le a_i,b_i \\le 10^6$），每车干草堆每向左移动一单位距离，$a_i$ 堆干草堆会被浪费；每车干草堆每向右移动一单位距离，$b_i$ 堆干草堆会被浪费。形式化地，一车干草堆从整点 $y$ 运动到位于 $x$ 的谷仓，被浪费的干草堆堆数如下：\n\n$$\\begin{cases}a_i\\cdot (y-x) & \\text{if} \\ y>x \\\\ b_i\\cdot(x-y)&\\text{if}\\ x>y\\end{cases}$$\n\n给出 $Q$（$1 \\le Q \\le 2 \\cdot 10^5$）组相互独立的询问，每组询问给出一组 $(a_i,b_i)$ 的值，帮助 Farmer John 计算当按照最佳方案选择 $y$，最少有多少堆干草堆被浪费。", "inputFormat": "第一行包含 $N$。\n\n接下来一行包含 $x_1\\dots x_N$。\n\n接下来一行包含 $Q$。\n\n接下来 $Q$ 行，每行包含两个整数 $a_i,b_i$。", "outputFormat": "输出 $Q$ 行，第 $i$ 行包含第 $i$ 个询问的答案。", "hint": "### 样例解释 1\n\n样例中第二个询问，最佳方案为选择 $y=2$，被浪费的干草堆数量为 $2(2-1)+2(2-2)+1(3-2)+1(4-2)+1(10-2)=2+0+1+2+8=13$。\n\n### 测试点性质\n\n- 测试点 $2$ 满足 $N,Q \\le 10$。\n- 测试点 $3$ 满足 $N,Q \\le 500$。\n- 测试点 $4-6$ 满足 $N,Q \\le 5000$。\n- 测试点 $7-16$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9983", "type": "P", "difficulty": 7, "samples": [["5\n11111\n1 2\n2 3\n3 4\n4 5\n6\n5\n4\n3\n2\n1\n0", "1\n1\n1\n1\n2\n5"], ["10\n1111111111\n1 2\n2 3\n2 4\n2 5\n2 6\n6 7\n7 8\n8 9\n9 10\n11\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10", "10\n3\n2\n1\n1\n1\n1\n1\n1\n1\n1"], ["5\n11100\n1 2\n2 3\n3 4\n4 5\n6\n0\n1\n2\n3\n4\n5", "3\n1\n1\n-1\n-1\n-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "贪心", "USACO", "点分治", "2023", "O2优化", "树形 DP"], "title": "[USACO23DEC] Cowntact Tracing P", "background": "", "description": "Farmer John 有依次编号为 $1\\dots N$ 的 $N$（$2\\le N \\le 10^5$）头奶牛，奶牛间的关系可以用树结构描述。不幸的是，有一种疾病正在传播。\n\n最初，有一些奶牛被感染。每到夜晚，被感染的奶牛会将疾病传播给它的邻居。一旦奶牛被感染，她就会持续处于感染状态。经过一些晚上，Farmer John 意识到这样的情况，因此他对奶牛进行了检测以确定哪些奶牛感染了疾病。\n\n你将得到 $Q$（$1\\le Q \\le 20$）个不同的夜晚数，每个都是 $[0,N]$ 范围内的整数。对于每个夜晚数，请找出最少有多少头奶牛最初可能感染了这种疾病，或者报告夜晚数与给出的信息不符。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行，包含长度为 $N$ 的由 $1$ 和 $0$ 组成的位串。其中 $1$ 表示一头被感染的奶牛，$0$ 表示一头在经过若干晚之后仍未被感染的奶牛。\n\n接下来 $N-1$ 行描述了树的边。\n\n接着输入 $Q$ 和 $Q$ 个夜晚数。", "outputFormat": "输出 $Q$ 行，表示每个夜晚数的答案。若无解，输出 $-1$。", "hint": "### 样例解释 1\n\n对于前四个询问，一种可能是只有 $3$ 号奶牛一开始被感染。对于第五组询问（$1$ 晚），一种可能是 $2,4$ 号奶牛一开始被感染。对于第六组询问（$0$ 晚），一种可能是所有的五只奶牛在一开始都被感染。\n\n### 样例解释 2\n\n对于第一组询问（$0$ 晚），一种可能是所有的十只奶牛一开始都被感染。对于第二组询问（$1$ 晚），一种可能是 $2,7,9$ 号奶牛一开始被感染。对于第三组询问（$2$ 晚），一种可能是 $2,9$ 号奶牛一开始被感染。对于第四至第十一组询问，一种可能是只有 $7$ 号奶牛一开始被感染。\n\n### 样例解释 3\n\n对于第一组询问（$0$ 晚），一种可能是 $1,2,3$ 号奶牛一开始被感染。对于第二组询问（$1$ 晚），一种可能是只有 $2$ 号奶牛一开始被感染。对于第三组询问（$2$ 晚），一种可能是只有 $1$ 号奶牛一开始被感染。对于第四至第六组询问，不可能满足题给条件。\n\n### 测试点性质\n\n- 测试点 $4-5$ 满足 $N \\le 10$。\n- 测试点 $6-8$ 满足所有奶牛都被感染。\n- 测试点 $9-11$ 满足 $N \\le 400$。\n- 测试点 $12-23$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Cowntact Tracing P", "background": "", "description": "Farmer John 有依次编号为 $1\\dots N$ 的 $N$（$2\\le N \\le 10^5$）头奶牛，奶牛间的关系可以用树结构描述。不幸的是，有一种疾病正在传播。\n\n最初，有一些奶牛被感染。每到夜晚，被感染的奶牛会将疾病传播给它的邻居。一旦奶牛被感染，她就会持续处于感染状态。经过一些晚上，Farmer John 意识到这样的情况，因此他对奶牛进行了检测以确定哪些奶牛感染了疾病。\n\n你将得到 $Q$（$1\\le Q \\le 20$）个不同的夜晚数，每个都是 $[0,N]$ 范围内的整数。对于每个夜晚数，请找出最少有多少头奶牛最初可能感染了这种疾病，或者报告夜晚数与给出的信息不符。", "inputFormat": "第一行为一个整数 $N$。\n\n接下来一行，包含长度为 $N$ 的由 $1$ 和 $0$ 组成的位串。其中 $1$ 表示一头被感染的奶牛，$0$ 表示一头在经过若干晚之后仍未被感染的奶牛。\n\n接下来 $N-1$ 行描述了树的边。\n\n接着输入 $Q$ 和 $Q$ 个夜晚数。", "outputFormat": "输出 $Q$ 行，表示每个夜晚数的答案。若无解，输出 $-1$。", "hint": "### 样例解释 1\n\n对于前四个询问，一种可能是只有 $3$ 号奶牛一开始被感染。对于第五组询问（$1$ 晚），一种可能是 $2,4$ 号奶牛一开始被感染。对于第六组询问（$0$ 晚），一种可能是所有的五只奶牛在一开始都被感染。\n\n### 样例解释 2\n\n对于第一组询问（$0$ 晚），一种可能是所有的十只奶牛一开始都被感染。对于第二组询问（$1$ 晚），一种可能是 $2,7,9$ 号奶牛一开始被感染。对于第三组询问（$2$ 晚），一种可能是 $2,9$ 号奶牛一开始被感染。对于第四至第十一组询问，一种可能是只有 $7$ 号奶牛一开始被感染。\n\n### 样例解释 3\n\n对于第一组询问（$0$ 晚），一种可能是 $1,2,3$ 号奶牛一开始被感染。对于第二组询问（$1$ 晚），一种可能是只有 $2$ 号奶牛一开始被感染。对于第三组询问（$2$ 晚），一种可能是只有 $1$ 号奶牛一开始被感染。对于第四至第六组询问，不可能满足题给条件。\n\n### 测试点性质\n\n- 测试点 $4-5$ 满足 $N \\le 10$。\n- 测试点 $6-8$ 满足所有奶牛都被感染。\n- 测试点 $9-11$ 满足 $N \\le 400$。\n- 测试点 $12-23$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9984", "type": "P", "difficulty": 6, "samples": [["3 2\n1 2\n2 3", "12\n12\n21"], ["5 6\n1 2\n3 4\n2 4\n2 3\n2 5\n1 5", "1325\n1325\n2315\n2315\n5132"], ["15 14\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9\n9 10\n10 11\n11 12\n12 13\n13 14\n14 15", "678925929\n678925929\n678862929\n678787329\n678709839\n678632097\n178554320\n218476543\n321398766\n431520989\n542453212\n653475435\n764507558\n875540761\n986574081"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "USACO", "并查集", "2023", "Kruskal 重构树", "O2优化", "哈希 hashing", "启发式合并"], "title": "[USACO23DEC] A Graph Problem P", "background": "", "description": "为了丰富自己的数学知识，Bessie 选修了一门图论课程，她发现她被下面的问题困住了，请帮帮她！\n\n给出一张连通的无向图，包含编号为 $1\\dots N$ 的节点和编号为 $1\\dots M$（$2 \\le N \\le 2\\cdot 10^5$，$N - 1 \\le M \\le 4 \\cdot 10^5$）的边，下边的操作将被实施：\n\n1. 假设集合 $S=\\{v\\}$，变量 $h=0$。\n2. 当 $|S|<N$，重复执行：\n\t1. 仅有一个顶点在集合 $S$ 中的边中，找到编号最小的那条，编号记为 $e$。\n    2. 将 $e$ 不在 $S$ 中的那个顶点加入集合 $S$。\n    3. 将 $h$ 修改为 $10h+e$。\n3. 返回 $h$ 对 $10^9+7$ 取模的值。\n\n输出这个过程的全部返回值。", "inputFormat": "第一行包含 $N$ 和 $M$。接下来 $M$ 行，每行包含第 $e$ 条边的顶点 $(a_e,b_e)$，保证图连通，没有重边。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含在节点 $i$ 开始过程的返回值。", "hint": "### 样例解释 2\n\n考虑在 $i=3$ 开始执行。首先，选择 $2$ 号边，$S=\\{3,4\\}$，$h=2$。然后，选择 $3$ 号边，$S=\\{2,3,4\\}$，$h=23$。接着，选择 $1$ 号边，$S=\\{1,2,3,4\\}$，$h=231$。最后，选择 $5$ 号边，$S=\\{1,2,3,4,5\\}$，$h=2315$。因此，$i=3$ 的答案是 $2315$。\n\n### 样例解释 3\n\n确保答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $4$ 满足 $N,M \\le 2000$。\n- 测试点 $5-6$ 满足 $N \\le 2000$。\n- 测试点 $7-10$ 满足 $N \\le 10000$。\n- 测试点 $11-14$ 满足对于所有边，有 $a_e+1=b_e$。\n- 测试点 $15-23$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] A Graph Problem P", "background": "", "description": "为了丰富自己的数学知识，Bessie 选修了一门图论课程，她发现她被下面的问题困住了，请帮帮她！\n\n给出一张连通的无向图，包含编号为 $1\\dots N$ 的节点和编号为 $1\\dots M$（$2 \\le N \\le 2\\cdot 10^5$，$N - 1 \\le M \\le 4 \\cdot 10^5$）的边，下边的操作将被实施：\n\n1. 假设集合 $S=\\{v\\}$，变量 $h=0$。\n2. 当 $|S|<N$，重复执行：\n\t1. 仅有一个顶点在集合 $S$ 中的边中，找到编号最小的那条，编号记为 $e$。\n    2. 将 $e$ 不在 $S$ 中的那个顶点加入集合 $S$。\n    3. 将 $h$ 修改为 $10h+e$。\n3. 返回 $h$ 对 $10^9+7$ 取模的值。\n\n输出这个过程的全部返回值。", "inputFormat": "第一行包含 $N$ 和 $M$。接下来 $M$ 行，每行包含第 $e$ 条边的顶点 $(a_e,b_e)$，保证图连通，没有重边。", "outputFormat": "输出 $N$ 行，第 $i$ 行包含在节点 $i$ 开始过程的返回值。", "hint": "### 样例解释 2\n\n考虑在 $i=3$ 开始执行。首先，选择 $2$ 号边，$S=\\{3,4\\}$，$h=2$。然后，选择 $3$ 号边，$S=\\{2,3,4\\}$，$h=23$。接着，选择 $1$ 号边，$S=\\{1,2,3,4\\}$，$h=231$。最后，选择 $5$ 号边，$S=\\{1,2,3,4,5\\}$，$h=2315$。因此，$i=3$ 的答案是 $2315$。\n\n### 样例解释 3\n\n确保答案对 $10^9+7$ 取模。\n\n### 测试点性质\n\n- 测试点 $4$ 满足 $N,M \\le 2000$。\n- 测试点 $5-6$ 满足 $N \\le 2000$。\n- 测试点 $7-10$ 满足 $N \\le 10000$。\n- 测试点 $11-14$ 满足对于所有边，有 $a_e+1=b_e$。\n- 测试点 $15-23$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9985", "type": "P", "difficulty": 6, "samples": [["1 95\nB 63", "0"], ["4 1\nB 3\nB 2\nA 1\nA 3", "1"], ["4 10\nA 1\nB 2\nA 3\nA 21", "13"], ["8 125000000000\nB 17108575619\nB 57117098303\nA 42515717584\nB 26473500855\nA 108514697534\nB 110763448122\nB 117731666682\nA 29117227954", "548047356974"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "USACO", "2023", "O2优化", "动态规划优化"], "title": "[USACO23DEC] Train Scheduling P", "background": "**Note: The memory limit for this problem is 512MB, twice the default.**", "description": "Bessie 找到了一份行车调度的新工作。现在有两座火车站 $A$ 和 $B$，由于预算限制，只有一条单线铁道连接起车站 $A$ 和 $B$。如果一列列车在 $t$ 时刻离开其中一座火车站，它将在 $t+T$（$1 \\le T \\le 10^{12}$）时刻到达另一座火车站。\n\n现在有 $N$（$1 \\le N \\le 5000$）列火车的出发时间需要安排。第 $i$ 列火车必须在 $t_i$ 时刻后从车站 $s_i$ 出发（$s_i\\in \\{A,B\\}$，$0 \\le t_i \\le 10^{12}$）。在同一时刻不允许铁道上有相反方向的列车，否则它们会相撞。但是，假设火车有可以忽略的尺寸，在同一时刻，铁道上可以有许多相同方向的列车。\n\n帮助 Bessie 安排每辆列车的出发时间，在不会相撞的前提下最小化总延误时间。假设第 $i$ 辆列车被安排在 $a_i$ 时刻出发，总延误为 $\\sum\\limits_{i=1}^n{a_i-t_i}$。", "inputFormat": "第一行包含 $N$ 和 $T$。\n\n接下来 $N$ 行，第 $i$ 行包含用于描述第 $i$ 辆列车的 $s_i,t_i$。", "outputFormat": "输出合法安排中最小总延误时间。", "hint": "### 样例解释 1\n\n唯一的一辆列车准点出发。\n\n### 样例解释 2\n\n有两种最佳方案。第一种是让列车 $2,3,4$ 准点出发，列车 $1$ 延误一分钟后出发。第二种是让列车 $1,2,3$ 准点出发，列车 $4$ 延误一分钟后出发。\n\n### 样例解释 3\n\n最佳方案是让列车 $1,3$ 准点出发，列车 $2$ 在时刻 $13$ 出发，列车 $4$ 在时刻 $23$ 出发。总延误为 $0+11+0+2=13$。\n\n### 测试点性质\n\n- 测试点 $5-6$ 满足 $N \\le 15$。\n- 测试点 $7-10$ 满足 $N \\le 100$。\n- 测试点 $11-14$ 满足 $N \\le 500$。\n- 测试点 $15-18$ 满足 $N \\le 2000$。\n- 测试点 $19-24$ 没有额外限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO23DEC] Train Scheduling P", "background": "**Note: The memory limit for this problem is 512MB, twice the default.**", "description": "Bessie 找到了一份行车调度的新工作。现在有两座火车站 $A$ 和 $B$，由于预算限制，只有一条单线铁道连接起车站 $A$ 和 $B$。如果一列列车在 $t$ 时刻离开其中一座火车站，它将在 $t+T$（$1 \\le T \\le 10^{12}$）时刻到达另一座火车站。\n\n现在有 $N$（$1 \\le N \\le 5000$）列火车的出发时间需要安排。第 $i$ 列火车必须在 $t_i$ 时刻后从车站 $s_i$ 出发（$s_i\\in \\{A,B\\}$，$0 \\le t_i \\le 10^{12}$）。在同一时刻不允许铁道上有相反方向的列车，否则它们会相撞。但是，假设火车有可以忽略的尺寸，在同一时刻，铁道上可以有许多相同方向的列车。\n\n帮助 Bessie 安排每辆列车的出发时间，在不会相撞的前提下最小化总延误时间。假设第 $i$ 辆列车被安排在 $a_i$ 时刻出发，总延误为 $\\sum\\limits_{i=1}^n{a_i-t_i}$。", "inputFormat": "第一行包含 $N$ 和 $T$。\n\n接下来 $N$ 行，第 $i$ 行包含用于描述第 $i$ 辆列车的 $s_i,t_i$。", "outputFormat": "输出合法安排中最小总延误时间。", "hint": "### 样例解释 1\n\n唯一的一辆列车准点出发。\n\n### 样例解释 2\n\n有两种最佳方案。第一种是让列车 $2,3,4$ 准点出发，列车 $1$ 延误一分钟后出发。第二种是让列车 $1,2,3$ 准点出发，列车 $4$ 延误一分钟后出发。\n\n### 样例解释 3\n\n最佳方案是让列车 $1,3$ 准点出发，列车 $2$ 在时刻 $13$ 出发，列车 $4$ 在时刻 $23$ 出发。总延误为 $0+11+0+2=13$。\n\n### 测试点性质\n\n- 测试点 $5-6$ 满足 $N \\le 15$。\n- 测试点 $7-10$ 满足 $N \\le 100$。\n- 测试点 $11-14$ 满足 $N \\le 500$。\n- 测试点 $15-18$ 满足 $N \\le 2000$。\n- 测试点 $19-24$ 没有额外限制。", "locale": "zh-CN"}}}
{"pid": "P9986", "type": "P", "difficulty": 7, "samples": [["5 2\n2 3 1 2 32\n2 5\n2 5", "4\n4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "Ynoi", "2079"], "title": "[Ynoi2079] r2pspc", "background": "", "description": "给定序列 $a_1,\\dots,a_n$，共 $m$ 次查询，每次查询问 $\\sum\\limits_{i=l}^r 2^{a_i}$ 的二进制表示中 $1$ 的个数。", "inputFormat": "第一行两个数表示 $n,m$。\n\n第二行 $n$ 个数表示 $a_1,\\dots,a_n$。\n\n接下来 $m$ 行每行 $l,r$ 表示一次查询。", "outputFormat": "共 $m$ 行，依次为每次查询的答案。", "hint": "Idea：rushcheyo，Solution：djq_cpp&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le {10}^5$，$1\\le m\\le {10}^6$，$1\\le a_i\\le 10^9$，$1\\le l\\le r\\le n$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 1000$。\n\n对于另外 $25\\%$ 的数据，满足 $a_i\\le100$。\n\n对于另外 $25\\%$ 的数据，满足 $m\\le 10^5$\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2079] r2pspc", "background": "", "description": "给定序列 $a_1,\\dots,a_n$，共 $m$ 次查询，每次查询问 $\\sum\\limits_{i=l}^r 2^{a_i}$ 的二进制表示中 $1$ 的个数。", "inputFormat": "第一行两个数表示 $n,m$。\n\n第二行 $n$ 个数表示 $a_1,\\dots,a_n$。\n\n接下来 $m$ 行每行 $l,r$ 表示一次查询。", "outputFormat": "共 $m$ 行，依次为每次查询的答案。", "hint": "Idea：rushcheyo，Solution：djq_cpp&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le {10}^5$，$1\\le m\\le {10}^6$，$1\\le a_i\\le 10^9$，$1\\le l\\le r\\le n$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 1000$。\n\n对于另外 $25\\%$ 的数据，满足 $a_i\\le100$。\n\n对于另外 $25\\%$ 的数据，满足 $m\\le 10^5$\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9987", "type": "P", "difficulty": 7, "samples": [["8 10\n5 4 8 7 1 6 3 2\n1 2 5\n2 8\n1 2 8\n1 7 8\n2 4\n2 1\n2 6\n2 4\n1 8 8\n2 4\n", "0\n4\n0\n3\n4\n4\n"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["O2优化", "Ynoi", "2079"], "title": "[Ynoi2079] riapq", "background": "", "description": "给出排列 $a_1,\\dots,a_n$，你需要维护序列 $b_1,\\dots,b_n$，初值为 $0$。\n\n共 $m$ 次操作：\n\n修改操作：给出 $l,r$，对每个 $(i,j)$ 满足 $l\\le i\\le j\\le r,\\;a_i\\le a_j$，将 $b_j$ 增加 $1$；\n\n查询操作：给出 $x$，查 $b_x$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行 $1,l,r$ 或 $2,x$ 表示修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 \n\n$1\\le n,m\\le 2\\times 10^5$；\n\n$1\\le a_i\\le n$，$a_i$ 互不相同；\n\n$1\\le l\\le r\\le n$；\n\n$1\\le x\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2079] riapq", "background": "", "description": "给出排列 $a_1,\\dots,a_n$，你需要维护序列 $b_1,\\dots,b_n$，初值为 $0$。\n\n共 $m$ 次操作：\n\n修改操作：给出 $l,r$，对每个 $(i,j)$ 满足 $l\\le i\\le j\\le r,\\;a_i\\le a_j$，将 $b_j$ 增加 $1$；\n\n查询操作：给出 $x$，查 $b_x$。", "inputFormat": "第一行两个整数 $n,m$；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$；\n\n接下来 $m$ 行，每行 $1,l,r$ 或 $2,x$ 表示修改操作或查询操作。\n\n输入的所有数值为整数。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 \n\n$1\\le n,m\\le 2\\times 10^5$；\n\n$1\\le a_i\\le n$，$a_i$ 互不相同；\n\n$1\\le l\\le r\\le n$；\n\n$1\\le x\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9988", "type": "P", "difficulty": 7, "samples": [["5 3\n1 1 2 3\n1 1\n2 5\n4 3", "2\n3\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["Special Judge", "O2优化", "Ynoi", "2079"], "title": "[Ynoi2079] 2stmo", "background": "", "description": "给定一棵 $n$ 个顶点的有根树，顶点编号为 $1,\\dots,n$ ，$1$ 为根，$f_2,\\dots,f_n$ 依次表示 $2,\\dots,n$ 的父亲。\n\n给定 $m$ 对整数 $a_1,b_1,\\dots,a_m,b_m$ ，你需要构造一个 $1,\\dots,m$ 的排列 $p_1,\\dots,p_m$ ，满足这个排列的代价不超过 $4\\times 10^9$。\n\n排列的代价定义为：\n\n$|S(a_{p_1})|+|S(b_{p_1})|+\\sum\\limits_{i=2}^m |S(a_{p_{i-1}})\\oplus S(a_{p_i})|+|S(b_{p_{i-1}})\\oplus S(b_{p_i})|$\n\n其中 $S(x)$ 是以 $x$ 为根的子树中的顶点构成的集合，$|A|$ 是集合 $A$ 的元素个数，$A\\oplus B$ 是集合 $A,B$ 的对称差（即在 $A,B$ 中恰好出现一次的元素构成的集合）。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n-1$ 个整数 $f_2,\\dots,f_n$ ；\n\n接下来 $m$ 行，每行两个整数表示 $a_i,b_i$ ，$i=1,\\dots,m$ 。", "outputFormat": "输出 $m$ 行，每行一个整数，依次表示 $p_1,\\dots,p_m$ 。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 10^4$。\n\n对于 $50\\%$ 的数据，$n,m\\le 2\\times 10^5$。\n\n对于 $75\\%$ 的数据，$n,m\\le 5\\times 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le f_i\\le i-1$，$1\\le a_i,b_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2079] 2stmo", "background": "", "description": "给定一棵 $n$ 个顶点的有根树，顶点编号为 $1,\\dots,n$ ，$1$ 为根，$f_2,\\dots,f_n$ 依次表示 $2,\\dots,n$ 的父亲。\n\n给定 $m$ 对整数 $a_1,b_1,\\dots,a_m,b_m$ ，你需要构造一个 $1,\\dots,m$ 的排列 $p_1,\\dots,p_m$ ，满足这个排列的代价不超过 $4\\times 10^9$。\n\n排列的代价定义为：\n\n$|S(a_{p_1})|+|S(b_{p_1})|+\\sum\\limits_{i=2}^m |S(a_{p_{i-1}})\\oplus S(a_{p_i})|+|S(b_{p_{i-1}})\\oplus S(b_{p_i})|$\n\n其中 $S(x)$ 是以 $x$ 为根的子树中的顶点构成的集合，$|A|$ 是集合 $A$ 的元素个数，$A\\oplus B$ 是集合 $A,B$ 的对称差（即在 $A,B$ 中恰好出现一次的元素构成的集合）。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n-1$ 个整数 $f_2,\\dots,f_n$ ；\n\n接下来 $m$ 行，每行两个整数表示 $a_i,b_i$ ，$i=1,\\dots,m$ 。", "outputFormat": "输出 $m$ 行，每行一个整数，依次表示 $p_1,\\dots,p_m$ 。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 10^4$。\n\n对于 $50\\%$ 的数据，$n,m\\le 2\\times 10^5$。\n\n对于 $75\\%$ 的数据，$n,m\\le 5\\times 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le f_i\\le i-1$，$1\\le a_i,b_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P9989", "type": "P", "difficulty": 6, "samples": [["10 10\n4 1 5 10 1 3 8 2 8 2 \n2 1 7\n2 1 10\n1 7 10 4\n1 5 8 10\n2 1 8\n1 3 5 2\n1 3 4 3\n2 5 8\n2 3 7\n2 6 10", "32\n44\n26\n6\n6\n11"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2023] TEST_69", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，有 $m$ 次操作。\n\n每次有两种操作：\n\n``1 l r x``：对于区间 $[l,r]$ 内所有 $i$，将 $a_i$ 变成 $\\gcd(a_i,x)$。\n\n``2 l r``：查询区间 $[l,r]$ 的和，答案对 $2^{32}$ 取模后输出。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个数表示 $a_i$。\n\n之后 $m$ 行，每行三个或四个数，表示一次操作。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示这次查询的答案。", "hint": "Idea：nzhtl1477，Solution：nhtl1477，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $1 \\le n,m,a_i,x \\le 10^3$。\n\n对于 $50\\%$ 的数据，满足  $1 \\le n,m \\le 10^5$，且 $a$ 中的元素与每次操作的 $x$ 均随机生成。\n\n对于另外 $20\\%$ 的数据，满足所有的查询均在修改后发生。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 2\\cdot 10^5,1\\le m\\le 5 \\cdot 10^5$，所有数值为 $[1,10^{18}]$ 内的整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2023] TEST_69", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，有 $m$ 次操作。\n\n每次有两种操作：\n\n``1 l r x``：对于区间 $[l,r]$ 内所有 $i$，将 $a_i$ 变成 $\\gcd(a_i,x)$。\n\n``2 l r``：查询区间 $[l,r]$ 的和，答案对 $2^{32}$ 取模后输出。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个数表示 $a_i$。\n\n之后 $m$ 行，每行三个或四个数，表示一次操作。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示这次查询的答案。", "hint": "Idea：nzhtl1477，Solution：nhtl1477，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $1 \\le n,m,a_i,x \\le 10^3$。\n\n对于 $50\\%$ 的数据，满足  $1 \\le n,m \\le 10^5$，且 $a$ 中的元素与每次操作的 $x$ 均随机生成。\n\n对于另外 $20\\%$ 的数据，满足所有的查询均在修改后发生。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 2\\cdot 10^5,1\\le m\\le 5 \\cdot 10^5$，所有数值为 $[1,10^{18}]$ 内的整数。", "locale": "zh-CN"}}}
{"pid": "P9990", "type": "P", "difficulty": 6, "samples": [["5\n2 3 5 1 5\n5\n2 3\n1 1\n1 3\n2 5\n2 4", "2\n1\n4\n6\n4"], ["10\n2 8 5 1 10 5 9 9 3 5\n10\n6 8\n1 2\n3 5\n5 7\n1 7\n3 9\n4 9\n1 4\n3 7\n2 5", "4\n2\n4\n4\n16\n16\n12\n6\n9\n6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2023] TEST_90", "background": "", "description": "给定一个长度 $n$ 的序列 $a_1,\\dots,a_n$。\n\n共有 $m$ 次询问，每次询问给定 $l,r$，求区间 $[l,r]$ 中有多少 子区间 $[i,j]$ 满足 $l\\le i\\le j\\le r$，且在区间 $[i,j]$ 内出现过的数的个数为奇数。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个整数表示序列 $a_1,\\dots,a_n$\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行两个整数 $l\\;r$ 表示一个询问。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $1\\le n,m\\le 10^2$。\n\n对于 $50\\%$ 的数据，满足 $1\\le n,m\\le 10^4$。\n\n对于另外 $25\\%$ 的数据，满足序列中出现过的数个数不超过 $100$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$1\\le m\\le 10^6$，$1\\le a_i\\le n。$\n\n对每个询问满足 $1\\le l\\le r\\le n$。\n\n以上所有数值为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2023] TEST_90", "background": "", "description": "给定一个长度 $n$ 的序列 $a_1,\\dots,a_n$。\n\n共有 $m$ 次询问，每次询问给定 $l,r$，求区间 $[l,r]$ 中有多少 子区间 $[i,j]$ 满足 $l\\le i\\le j\\le r$，且在区间 $[i,j]$ 内出现过的数的个数为奇数。", "inputFormat": "第一行一个整数 $n$。\n\n接下来一行 $n$ 个整数表示序列 $a_1,\\dots,a_n$\n\n接下来一行一个整数 $m$。\n\n接下来 $m$ 行，每行两个整数 $l\\;r$ 表示一个询问。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $25\\%$ 的数据，满足 $1\\le n,m\\le 10^2$。\n\n对于 $50\\%$ 的数据，满足 $1\\le n,m\\le 10^4$。\n\n对于另外 $25\\%$ 的数据，满足序列中出现过的数个数不超过 $100$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$，$1\\le m\\le 10^6$，$1\\le a_i\\le n。$\n\n对每个询问满足 $1\\le l\\le r\\le n$。\n\n以上所有数值为整数。", "locale": "zh-CN"}}}
{"pid": "P9991", "type": "P", "difficulty": 6, "samples": [["5 4\n1 3 2 3 4\n2 4\n1 3\n2 5\n1 1", "1\n2\n3\n0"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "树状数组", "2023", "O2优化", "排序", "扫描线", "Ynoi"], "title": "[Ynoi Easy Round 2023] TEST_107", "background": "", "description": "给一个长为 $n$ 的序列 $a$，下标为 $1$ 到 $n$，有 $m$ 次查询操作，每次给出一个区间 $[l,r]$，求一个子区间 $[l',r']$，满足 $l\\le l'\\le r'\\le r$，$[l',r']$ 中出现过的值个数比 $[l,r]$ 中出现过的值个数少，且其长度即 $r'-l'+1$ 最大。若不存在这样的子区间，则输出 $0$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n之后一行 $n$ 个数依次表示序列 $a$ 中的元素。\n\n之后 $m$ 行，每行两个数 $l,r$ 表示一次查询，只需输出该子区间的长度，即 $r'-l'+1$。", "outputFormat": "对于每次查询，输出一行一个数表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $n,m\\le100$。\n\n对于 $40\\%$ 的数据，满足 $n,m\\le1000$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 10$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,a_i\\le 2\\times 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2023] TEST_107", "background": "", "description": "给一个长为 $n$ 的序列 $a$，下标为 $1$ 到 $n$，有 $m$ 次查询操作，每次给出一个区间 $[l,r]$，求一个子区间 $[l',r']$，满足 $l\\le l'\\le r'\\le r$，$[l',r']$ 中出现过的值个数比 $[l,r]$ 中出现过的值个数少，且其长度即 $r'-l'+1$ 最大。若不存在这样的子区间，则输出 $0$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n之后一行 $n$ 个数依次表示序列 $a$ 中的元素。\n\n之后 $m$ 行，每行两个数 $l,r$ 表示一次查询，只需输出该子区间的长度，即 $r'-l'+1$。", "outputFormat": "对于每次查询，输出一行一个数表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $n,m\\le100$。\n\n对于 $40\\%$ 的数据，满足 $n,m\\le1000$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 10$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,a_i\\le 2\\times 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9992", "type": "P", "difficulty": 6, "samples": [["5 4\n1 2 2 3\n3 1\n3 0\n5 0\n1 2", "3\n1\n1\n7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2024] TEST_130", "background": "", "description": "给定一棵 $n$ 个节点的有根树，定义 $N(w,d)$（$w$ 为树的顶点，$d$ 为非负整数） 为以 $w$ 为根的子树中，到 $w$ 距离不超过 $d$ 的点构成的集合。\n\n共 $m$ 次询问，每次给出 $w,d$ 查询 $\\{N(w',d')\\mid N(w',d')\\subseteq N(w,d)\\}$ 的大小。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n-1$ 个数 $f_2,\\dots,f_n$ ，其中 $f_i$ 表示编号 $i$ 的结点的父亲。\n\n接下来 $m$ 行，每行两个数 $w,d$ 表示一次询问。", "outputFormat": "输出 $m$ 行，依次表示每次查询的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le f_i<i$，$1\\le w\\le n$，$0\\le d\\le n-1$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 100$。\n\n对于另外 $25\\%$ 的数据，满足 $n,m\\le 5000$。\n\n对于另外 $25\\%$ 的数据，满足 $n,m\\le 2\\times 10^5$。\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2024] TEST_130", "background": "", "description": "给定一棵 $n$ 个节点的有根树，定义 $N(w,d)$（$w$ 为树的顶点，$d$ 为非负整数） 为以 $w$ 为根的子树中，到 $w$ 距离不超过 $d$ 的点构成的集合。\n\n共 $m$ 次询问，每次给出 $w,d$ 查询 $\\{N(w',d')\\mid N(w',d')\\subseteq N(w,d)\\}$ 的大小。", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n-1$ 个数 $f_2,\\dots,f_n$ ，其中 $f_i$ 表示编号 $i$ 的结点的父亲。\n\n接下来 $m$ 行，每行两个数 $w,d$ 表示一次询问。", "outputFormat": "输出 $m$ 行，依次表示每次查询的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$1\\le f_i<i$，$1\\le w\\le n$，$0\\le d\\le n-1$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 100$。\n\n对于另外 $25\\%$ 的数据，满足 $n,m\\le 5000$。\n\n对于另外 $25\\%$ 的数据，满足 $n,m\\le 2\\times 10^5$。\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9993", "type": "P", "difficulty": 6, "samples": [["5 10\n-53 36 41 55 77\n1 1 1 10\n2 4 4 79\n2 3 3 -28\n1 1 5 -29\n1 1 3 27\n2 2 5 88\n2 2 3 24\n1 2 2 10\n1 1 3 -9\n1 2 5 -10", "55\n-inf\n77\n-inf"]], "limits": {"time": [40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000, 40000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2024] TEST_133", "background": "**请不要滥用本题评测，滥用本题评测将被封号。**", "description": "给定序列 $a_1,\\dots,a_n$， $m$ 次操作：\n\n修改操作：给出 $l,r,x$，将 $a_l,a_{l+1},\\dots,a_r$ 的值增加 $x$；\n\n查询操作：给出 $l,r,x$，问满足 $l\\le i\\le r,\\;a_i<x$ 的 $i$ 对应的 $a_i$ 的历史最大值（即初值和每次修改操作后的值中最大的一个）的最大值。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\dots,a_n$；\n\n接下来 $m$ 行每行四个整数 $o,l,r,x$，其中 $o=1$ 表示修改操作，$o=2$ 表示查询操作。", "outputFormat": "对每个查询操作，输出一行，表示答案（特别地，如果不存在满足条件的 $i$，则输出 `-inf`）。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $0\\%$ 的数据，满足 $n,m\\le 5000$。\n\n对于另外 $1/3%$ 的数据，查询操作保证 $l=1,\\;r=n$。\n\n对于另外 $1/3$ 的数据，没有修改操作。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 5\\times 10^5$，$|a_i|\\le 10^9$（仅初始给定的序列保证这个限制），$1\\le l\\le r\\le n$，$|x|\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2024] TEST_133", "background": "**请不要滥用本题评测，滥用本题评测将被封号。**", "description": "给定序列 $a_1,\\dots,a_n$， $m$ 次操作：\n\n修改操作：给出 $l,r,x$，将 $a_l,a_{l+1},\\dots,a_r$ 的值增加 $x$；\n\n查询操作：给出 $l,r,x$，问满足 $l\\le i\\le r,\\;a_i<x$ 的 $i$ 对应的 $a_i$ 的历史最大值（即初值和每次修改操作后的值中最大的一个）的最大值。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来一行 $n$ 个整数 $a_1,a_2,\\dots,a_n$；\n\n接下来 $m$ 行每行四个整数 $o,l,r,x$，其中 $o=1$ 表示修改操作，$o=2$ 表示查询操作。", "outputFormat": "对每个查询操作，输出一行，表示答案（特别地，如果不存在满足条件的 $i$，则输出 `-inf`）。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $0\\%$ 的数据，满足 $n,m\\le 5000$。\n\n对于另外 $1/3%$ 的数据，查询操作保证 $l=1,\\;r=n$。\n\n对于另外 $1/3$ 的数据，没有修改操作。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 5\\times 10^5$，$|a_i|\\le 10^9$（仅初始给定的序列保证这个限制），$1\\le l\\le r\\le n$，$|x|\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P9994", "type": "P", "difficulty": 6, "samples": [["5 10\n1 3 597843412\n1 1 613307236\n1 2 488247075\n1 4 29761102\n1 5 101159431\n1 1\n2 2\n1 1\n2 2\n2 1\n2 2\n1 1\n1 1\n2 3\n1 1", "577359197\n27079329\n482035359\n27079329\n220579797"]], "limits": {"time": [12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "O2优化", "Ynoi"], "title": "[Ynoi Easy Round 2024] TEST_132", "background": "", "description": "给定平面上 $n$ 个互不相同的点 $(x_i,y_i)_{i=1}^n$，每个点有点权，初始为 $v_i$；\n\n共 $m$ 次操作：\n\n修改操作：给定 $X$，将满足 $x_i=X$ 的点的点权 $v_i$ 修改为 $v_i^2$；\n\n查询操作：给定 $Y$，求满足 $y_i=Y$ 的点的点权 $v_i$ 的和；\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来 $n$ 行，每行三个整数 $x_i,y_i,v_i$；\n\n接下来 $m$ 行，每行两个整数，修改操作表示为 $1,X$，查询操作表示为 $2,Y$；", "outputFormat": "对每个查询操作，输出一行，表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 1.2\\times10^6$，$1\\le x_i,y_i\\le n$，$0\\le v_i\\le 10^9+6$，$1\\le X,Y\\le n$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 5000$；\n\n对于另外 $25\\%$ 的数据，没有修改操作；\n\n对于另外 $25\\%$ 的数据，满足 $x_i,y_i,X,Y$ 在 $1,2,\\dots,n$ 中独立地均匀随机选取；\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi Easy Round 2024] TEST_132", "background": "", "description": "给定平面上 $n$ 个互不相同的点 $(x_i,y_i)_{i=1}^n$，每个点有点权，初始为 $v_i$；\n\n共 $m$ 次操作：\n\n修改操作：给定 $X$，将满足 $x_i=X$ 的点的点权 $v_i$ 修改为 $v_i^2$；\n\n查询操作：给定 $Y$，求满足 $y_i=Y$ 的点的点权 $v_i$ 的和；\n\n答案对 $10^9+7$ 取模。", "inputFormat": "第一行两个整数 $n,m$；\n\n接下来 $n$ 行，每行三个整数 $x_i,y_i,v_i$；\n\n接下来 $m$ 行，每行两个整数，修改操作表示为 $1,X$，查询操作表示为 $2,Y$；", "outputFormat": "对每个查询操作，输出一行，表示答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 1.2\\times10^6$，$1\\le x_i,y_i\\le n$，$0\\le v_i\\le 10^9+6$，$1\\le X,Y\\le n$。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 5000$；\n\n对于另外 $25\\%$ 的数据，没有修改操作；\n\n对于另外 $25\\%$ 的数据，满足 $x_i,y_i,X,Y$ 在 $1,2,\\dots,n$ 中独立地均匀随机选取；\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9995", "type": "P", "difficulty": 6, "samples": [["9 7\n2 2 8 8 2 8 2 1 3\n2 2 2\n3 7 6\n6 7 1\n9 6 7\n10 11 10\n7 0 5\n5 1 7", "1\n2\n1\n2\n3\n2\n2"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] rspcn", "background": "", "description": "给定整数序列 $a_1,\\dots,a_n$ ，共 $m$ 次操作；\n\n每次操作给出 $l,r,x$ ，首先进行修改，然后查询 $a_1,\\dots,a_x$ 中有多少种不同的值。\n\n若 $l\\le r$ ，则进行的修改是将 $a_l,\\dots,a_r$ 从小到大排序；否则进行的修改是将 $a_r,\\dots,a_l$ 从大到小排序。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行三个整数 $l\\oplus c,r\\oplus c,x\\oplus c$ ，依次表示每次操作，其中 $\\oplus$ 是按位异或，$c$ 是上次操作的查询的答案（特别地，对于第一次操作，$c=0$）。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $n,m\\le 10^3$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 10$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 100$。\n\n对于另外 $20\\%$ 的数据，满足 $n,m\\le 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le l,r,x\\le n$，$1\\le n,m\\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] rspcn", "background": "", "description": "给定整数序列 $a_1,\\dots,a_n$ ，共 $m$ 次操作；\n\n每次操作给出 $l,r,x$ ，首先进行修改，然后查询 $a_1,\\dots,a_x$ 中有多少种不同的值。\n\n若 $l\\le r$ ，则进行的修改是将 $a_l,\\dots,a_r$ 从小到大排序；否则进行的修改是将 $a_r,\\dots,a_l$ 从大到小排序。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行三个整数 $l\\oplus c,r\\oplus c,x\\oplus c$ ，依次表示每次操作，其中 $\\oplus$ 是按位异或，$c$ 是上次操作的查询的答案（特别地，对于第一次操作，$c=0$）。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $n,m\\le 10^3$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 10$。\n\n对于另外 $20\\%$ 的数据，满足 $a_i\\le 100$。\n\n对于另外 $20\\%$ 的数据，满足 $n,m\\le 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le l,r,x\\le n$，$1\\le n,m\\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P9996", "type": "P", "difficulty": 7, "samples": [["5 2\n2003 -553\n-141 1230\n-6854 9658\n9319 -1777\n7773 3306\n1113 -3086 -15864589\n162 550 -21287", "0\n1"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] hpi", "background": "", "description": "给定 $n$ 个互不相同的点 $(x_i,y_i)$，共 $m$ 次询问，每次询问给出 $A,B,C$，问满足 $x_i<x_j,\\;y_i<y_j,\\;Ax_i+By_i+C>0,\\;Ax_j+By_j+C>0$ 的二元组 $(i,j)$ 的个数。", "inputFormat": "第一行两个数 $n,m$。\n\n接下来 $n$ 行每行两个数 $x_i,y_i$，$i=1,\\dots,n$。\n\n接下来 $m$ 行每行一个三个数表示一个询问 $A,B,C$。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示这个询问的答案。", "hint": "Idea：nzhtl1477&ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $A^2+B^2>0$，$|A|,|B|,|C|\\le 10^8$，$1\\le n,m\\le 2\\times 10^5$，$|x_i|,|y_i|\\le 10^4$，$x_i,y_i$ 均匀随机选取，但保证没有重复的点。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 10^3$。\n\n对于另外 $25\\%$ 的数据，满足 $A=0$。\n\n对于另外 $25\\%$ 的数据，满足 $C=0$。\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] hpi", "background": "", "description": "给定 $n$ 个互不相同的点 $(x_i,y_i)$，共 $m$ 次询问，每次询问给出 $A,B,C$，问满足 $x_i<x_j,\\;y_i<y_j,\\;Ax_i+By_i+C>0,\\;Ax_j+By_j+C>0$ 的二元组 $(i,j)$ 的个数。", "inputFormat": "第一行两个数 $n,m$。\n\n接下来 $n$ 行每行两个数 $x_i,y_i$，$i=1,\\dots,n$。\n\n接下来 $m$ 行每行一个三个数表示一个询问 $A,B,C$。", "outputFormat": "对每个询问，输出一行，包含一个整数，表示这个询问的答案。", "hint": "Idea：nzhtl1477&ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $A^2+B^2>0$，$|A|,|B|,|C|\\le 10^8$，$1\\le n,m\\le 2\\times 10^5$，$|x_i|,|y_i|\\le 10^4$，$x_i,y_i$ 均匀随机选取，但保证没有重复的点。\n\n对于 $25\\%$ 的数据，满足 $n,m\\le 10^3$。\n\n对于另外 $25\\%$ 的数据，满足 $A=0$。\n\n对于另外 $25\\%$ 的数据，满足 $C=0$。\n\n对于另外 $25\\%$ 的数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P9997", "type": "P", "difficulty": 7, "samples": [["10 7 2\n1 2 3 2 3 3 3 3 7\n212111121\n2 1 4 21\n1 10 3 21\n1 9 7 22\n2 2 10 12\n2 6 8 11\n1 9 8 12\n2 4 7 11", "1\n1\n1\n0"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] pmpkmp", "background": "", "description": "给定一棵树，树上的每条边上有一个字符。给定一个常数 $X$。\n\n有两种操作，每次操作输入三个整数与一个字符串：\n\n`1 x y S`：对于 $x$ 到 $y$ 的有向简单路径上的边，将路径上的第 $i$ 条边上的字符替换为 $S$ 上的对应字符 $S_i$，保证这条 $x$ 到 $y$ 之间路径的边数为 $X$。\n\n`2 x y S`：查询 $x$ 到 $y$ 构成的有向简单路径所形成的字符串上，$S$ 匹配的次数（这里的匹配即：将 $S$ 当做模式串，在这条路径构成的字符串上逐位置匹配。）例如：$S=121$ ，路径上的字符串为 $1212122$，则匹配了2次，分别在第 $[1,3]$ 处和$[3,5]$ 处。\n\n上述所有字符串 $S$ 的下标从 $1$ 开始，保证每个输入的字符串长度均为 $X$。", "inputFormat": "第一行三个以空格分隔的整数 $n,m,X$。\n\n之后一行包含 $n-1$ 个数，第 $i$ 个数表示第 $i+1$ 个点的父亲 $f_{i+1}$，保证每个点父亲的编号比这个点的编号小。\n\n之后一行包含 $n-1$ 个字符，第 $i$ 个字符表示第 $i+1$ 个点到父亲的边上的字符 $a_{i+1}$。\n\n之后 $m$ 行，每行输入以空格隔开的三个整数 $opt,x,y$ 与一个长为 $X$ 的字符串 $S$，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次 $2$ 操作的答案。", "hint": "Idea：nzhtl1477，Solution：ComeIntoPower&nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m\\le 250$。\n\n对于另外 $10\\%$ 的数据，不存在 1 操作。\n\n对于另外 $10\\%$ 的数据，满足 $X=1$。\n\n对于另外 $10\\%$ 的数据，满足 $X\\le 3$。\n\n对于另外 $10\\%$ 的数据，满足 $X\\ge 20000$。\n\n对于另外 $10\\%$ 的数据，满足 $f_i=i-1$。\n\n对于另外 $10\\%$ 的数据，满足 $a_i\\le 1$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le n,m\\le 2.5\\times 10^4$，$mX\\le 2.5\\times 10^4$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le n,m\\le 2.5\\times 10^5$，$mX\\le 2.5\\times 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,X\\le 5\\times 10^5$，字符集为 $[1,9]$ 以内的整数，$mX\\le 5\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] pmpkmp", "background": "", "description": "给定一棵树，树上的每条边上有一个字符。给定一个常数 $X$。\n\n有两种操作，每次操作输入三个整数与一个字符串：\n\n`1 x y S`：对于 $x$ 到 $y$ 的有向简单路径上的边，将路径上的第 $i$ 条边上的字符替换为 $S$ 上的对应字符 $S_i$，保证这条 $x$ 到 $y$ 之间路径的边数为 $X$。\n\n`2 x y S`：查询 $x$ 到 $y$ 构成的有向简单路径所形成的字符串上，$S$ 匹配的次数（这里的匹配即：将 $S$ 当做模式串，在这条路径构成的字符串上逐位置匹配。）例如：$S=121$ ，路径上的字符串为 $1212122$，则匹配了2次，分别在第 $[1,3]$ 处和$[3,5]$ 处。\n\n上述所有字符串 $S$ 的下标从 $1$ 开始，保证每个输入的字符串长度均为 $X$。", "inputFormat": "第一行三个以空格分隔的整数 $n,m,X$。\n\n之后一行包含 $n-1$ 个数，第 $i$ 个数表示第 $i+1$ 个点的父亲 $f_{i+1}$，保证每个点父亲的编号比这个点的编号小。\n\n之后一行包含 $n-1$ 个字符，第 $i$ 个字符表示第 $i+1$ 个点到父亲的边上的字符 $a_{i+1}$。\n\n之后 $m$ 行，每行输入以空格隔开的三个整数 $opt,x,y$ 与一个长为 $X$ 的字符串 $S$，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，表示每次 $2$ 操作的答案。", "hint": "Idea：nzhtl1477，Solution：ComeIntoPower&nzhtl1477&ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $10\\%$ 的数据，满足 $1\\le n,m\\le 250$。\n\n对于另外 $10\\%$ 的数据，不存在 1 操作。\n\n对于另外 $10\\%$ 的数据，满足 $X=1$。\n\n对于另外 $10\\%$ 的数据，满足 $X\\le 3$。\n\n对于另外 $10\\%$ 的数据，满足 $X\\ge 20000$。\n\n对于另外 $10\\%$ 的数据，满足 $f_i=i-1$。\n\n对于另外 $10\\%$ 的数据，满足 $a_i\\le 1$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le n,m\\le 2.5\\times 10^4$，$mX\\le 2.5\\times 10^4$。\n\n对于另外 $10\\%$ 的数据，满足 $1\\le n,m\\le 2.5\\times 10^5$，$mX\\le 2.5\\times 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m,X\\le 5\\times 10^5$，字符集为 $[1,9]$ 以内的整数，$mX\\le 5\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P9998", "type": "P", "difficulty": 6, "samples": [["10 10\n2 1 2 1 8 3 2 1 2 2\n2 6 9 2\n2 3 10 2\n2 2 10 2\n2 1 3 2\n2 4 10 1\n1 2 4 2\n2 3 10 2\n2 2 7 1\n2 2 7 2\n2 3 6 2", "2\n20\n20\n2\n4\n30\n0\n9\n0"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] rfrqwq", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，每个位置是一个 $[1,n]$ 内的整数。\n\n定义 $f(i,j)$ 表示有多少 $x$ 满足 $i\\le x<j$ 且 $a_x\\neq a_{x+1}$。\n\n有 $m$ 次操作：\n\n`1 l r x`：表示将区间 $[l,r]$ 中所有元素都修改为 $x$。\n\n`2 l r x`：表示查询区间 $[l,r]$ 中，对任意 $l\\le i<j\\le r$，且 $a_i=a_j=x$，$f(i,j)$ 的和。\n", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个用空格隔开的数表示序列 $a$。\n\n之后 $m$ 行，每行四个用空格隔开的数 $opt,l,r,x$ 表示一次操作。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $1\\le n,m\\le 1000$。\n\n对于另外 $20\\%$ 的数据，没有 $1$ 操作。\n\n对于另外 $10\\%$ 的数据，数据中的操作类型在 $[1,2]$ 内， $a_i,x$ 在 $[1,100]$ 内均匀随机生成，区间 $[l,r]$ 两个端点为 $[1,n]$ 中均匀随机生成的整数，如果生成后 $l>r$，则将二者交换。\n\n对于另外 $30\\%$ 的数据，满足 $1\\le n,m\\le 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m \\le 5\\times10^5$，$1\\le l\\le r\\le n$，$1\\le a_i,x\\le n$，所有输入均为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] rfrqwq", "background": "", "description": "给定一个长为 $n$ 的序列 $a$，每个位置是一个 $[1,n]$ 内的整数。\n\n定义 $f(i,j)$ 表示有多少 $x$ 满足 $i\\le x<j$ 且 $a_x\\neq a_{x+1}$。\n\n有 $m$ 次操作：\n\n`1 l r x`：表示将区间 $[l,r]$ 中所有元素都修改为 $x$。\n\n`2 l r x`：表示查询区间 $[l,r]$ 中，对任意 $l\\le i<j\\le r$，且 $a_i=a_j=x$，$f(i,j)$ 的和。\n", "inputFormat": "第一行两个数 $n,m$。\n\n第二行 $n$ 个用空格隔开的数表示序列 $a$。\n\n之后 $m$ 行，每行四个用空格隔开的数 $opt,l,r,x$ 表示一次操作。", "outputFormat": "对每个 $2$ 操作，输出一行一个数表示答案。", "hint": "Idea：nzhtl1477，Solution：nzhtl1477，Code：ccz181078，Data：ccz181078\n\n对于 $20\\%$ 的数据，满足 $1\\le n,m\\le 1000$。\n\n对于另外 $20\\%$ 的数据，没有 $1$ 操作。\n\n对于另外 $10\\%$ 的数据，数据中的操作类型在 $[1,2]$ 内， $a_i,x$ 在 $[1,100]$ 内均匀随机生成，区间 $[l,r]$ 两个端点为 $[1,n]$ 中均匀随机生成的整数，如果生成后 $l>r$，则将二者交换。\n\n对于另外 $30\\%$ 的数据，满足 $1\\le n,m\\le 10^5$。\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m \\le 5\\times10^5$，$1\\le l\\le r\\le n$，$1\\le a_i,x\\le n$，所有输入均为整数。", "locale": "zh-CN"}}}
{"pid": "P9999", "type": "P", "difficulty": 7, "samples": [["5 4 3\n1 1 3 3\n5 2 2 3\n3 4 5\n1 3 4\n1 2 1", "3\n2\n1"]], "limits": {"time": [12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000, 12000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] tmostnrq2", "background": "", "description": "给定 $n$ 个顶点的树，顶点编号为 $1,\\dots,n$，给定长度 $n_0$ 的序列 $a_1,\\dots,a_{n_0}$，共 $m$ 次查询，每次查询给定 $l,r,x$，问树的顶点 $x$，依次向 $a_l,\\dots,a_r$ 移动一步，到达的顶点。\n\n若 $x=y$，则从顶点 $x$ 向 $y$ 移动一步到达 $x$，否则到达与 $x$ 在树上相邻且距离 $y$ 最近的位置。", "inputFormat": "第一行三个整数 $n,n_0,m$；\n\n接下来一行 $n-1$ 个整数依次表示 $f_2,\\dots,f_n$，其中 $f_i$ 是顶点 $i$ 的父亲，$1$ 为根；\n\n接下来一行 $n_0$ 个整数，依次表示 $a_1,\\dots,a_{n_0}$；\n\n接下来 $m$ 行，每行三个整数 $l,r,x$ 表示一次查询。", "outputFormat": "共 $m$ 行，依次为每次查询的答案。", "hint": "Idea：Ynoi，Solution：zhoukangyang&ccz181078，Code：zhoukangyang，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,n_0,m\\le 10^6$；", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] tmostnrq2", "background": "", "description": "给定 $n$ 个顶点的树，顶点编号为 $1,\\dots,n$，给定长度 $n_0$ 的序列 $a_1,\\dots,a_{n_0}$，共 $m$ 次查询，每次查询给定 $l,r,x$，问树的顶点 $x$，依次向 $a_l,\\dots,a_r$ 移动一步，到达的顶点。\n\n若 $x=y$，则从顶点 $x$ 向 $y$ 移动一步到达 $x$，否则到达与 $x$ 在树上相邻且距离 $y$ 最近的位置。", "inputFormat": "第一行三个整数 $n,n_0,m$；\n\n接下来一行 $n-1$ 个整数依次表示 $f_2,\\dots,f_n$，其中 $f_i$ 是顶点 $i$ 的父亲，$1$ 为根；\n\n接下来一行 $n_0$ 个整数，依次表示 $a_1,\\dots,a_{n_0}$；\n\n接下来 $m$ 行，每行三个整数 $l,r,x$ 表示一次查询。", "outputFormat": "共 $m$ 行，依次为每次查询的答案。", "hint": "Idea：Ynoi，Solution：zhoukangyang&ccz181078，Code：zhoukangyang，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le n,n_0,m\\le 10^6$；", "locale": "zh-CN"}}}
{"pid": "P10000", "type": "P", "difficulty": 7, "samples": [["1\n1\n5 5 101\n1 2 1\n2 3 100\n3 4 10000\n4 2 1000000\n2 5 10\n", "-1 -1 33333401 -1 33333311\n"], ["见下发文件 ex_matrix1.in", "见下发文件 ex_matrix1.ans"], ["见下发文件 ex_matrix2.in", "见下发文件 ex_matrix2.ans"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["集训队互测", "2023", "O2优化"], "title": "[集训队互测 2023] 矩阵快速幂", "background": "请注意：**本题不是矩阵快速幂模板题**。", "description": "给定一张 $n$ 个点 $m$ 条边的边带权有向图，可能有重边和自环。求从 $1$ 出发到每个点恰好走 $k$ 条边的路径权值的最小值 **对 $998244353$ 取模后的结果**。若路径不存在则输出 $-1$。多组数据。\n\n路径权值的定义是路径上所有边的权值之和。", "inputFormat": "第一行一个整数 $S$ 表示子任务编号。\n\n第二行一个整数 $T$ 表示数据组数。\n\n对于每组数据：\n\n- 第一行三个整数 $n, m, k$。\n- 接下来 $m$ 行，每行三个整数 $u, v, w$ 表示一条有向边。", "outputFormat": "对于每组数据，输出一行 $n$ 个由空格隔开的整数表示答案。", "hint": "- Subtask #1（$10$ 分）：$\\sum n ^ 3\\leq 10 ^ 6$，$k\\leq 10 ^ {18}$。\n- Subtask #2（$15$ 分）：$m = 2n - 2$，且对任意 $1\\leq i < n$，存在权值相等的 $(i, i + 1)$ 和 $(i + 1, i)$。\n- Subtask #3（$20$ 分）：$m\\geq 2n - 2$，且对任意 $(u, v)$，存在权值相等的 $(v, u)$，注意 $u$ 可以等于 $v$。依赖于 Subtask #2。\n- Subtask #4（$15$ 分）：$\\sum n ^ 3\\leq 10 ^ 6$，依赖于 Subtask #1。\n- Subtask #5（$15$ 分）：$k\\leq 10 ^ {18}$，依赖于 Subtask #1。\n- Subtask #6（$25$ 分）：无特殊性质。依赖于 Subtask #3，#4，#5。\n\n对于所有数据，$1\\leq S\\leq 6$，$1\\leq T\\leq 10 ^ 4$，$2\\leq n\\leq 300$，$1\\leq m\\leq 2n$，$1\\leq k\\leq 10 ^ {64}$，$1\\leq u, v\\leq n$，$1\\leq w\\leq 10 ^ {18}$。保证 $\\sum n \\leq 2\\times 10 ^ 5$ 且 $\\sum n ^ 3 \\leq 2.7 \\times 10 ^ 7$。\n\n题解在附件 `paper.pdf` 中。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 矩阵快速幂", "background": "请注意：**本题不是矩阵快速幂模板题**。", "description": "给定一张 $n$ 个点 $m$ 条边的边带权有向图，可能有重边和自环。求从 $1$ 出发到每个点恰好走 $k$ 条边的路径权值的最小值 **对 $998244353$ 取模后的结果**。若路径不存在则输出 $-1$。多组数据。\n\n路径权值的定义是路径上所有边的权值之和。", "inputFormat": "第一行一个整数 $S$ 表示子任务编号。\n\n第二行一个整数 $T$ 表示数据组数。\n\n对于每组数据：\n\n- 第一行三个整数 $n, m, k$。\n- 接下来 $m$ 行，每行三个整数 $u, v, w$ 表示一条有向边。", "outputFormat": "对于每组数据，输出一行 $n$ 个由空格隔开的整数表示答案。", "hint": "- Subtask #1（$10$ 分）：$\\sum n ^ 3\\leq 10 ^ 6$，$k\\leq 10 ^ {18}$。\n- Subtask #2（$15$ 分）：$m = 2n - 2$，且对任意 $1\\leq i < n$，存在权值相等的 $(i, i + 1)$ 和 $(i + 1, i)$。\n- Subtask #3（$20$ 分）：$m\\geq 2n - 2$，且对任意 $(u, v)$，存在权值相等的 $(v, u)$，注意 $u$ 可以等于 $v$。依赖于 Subtask #2。\n- Subtask #4（$15$ 分）：$\\sum n ^ 3\\leq 10 ^ 6$，依赖于 Subtask #1。\n- Subtask #5（$15$ 分）：$k\\leq 10 ^ {18}$，依赖于 Subtask #1。\n- Subtask #6（$25$ 分）：无特殊性质。依赖于 Subtask #3，#4，#5。\n\n对于所有数据，$1\\leq S\\leq 6$，$1\\leq T\\leq 10 ^ 4$，$2\\leq n\\leq 300$，$1\\leq m\\leq 2n$，$1\\leq k\\leq 10 ^ {64}$，$1\\leq u, v\\leq n$，$1\\leq w\\leq 10 ^ {18}$。保证 $\\sum n \\leq 2\\times 10 ^ 5$ 且 $\\sum n ^ 3 \\leq 2.7 \\times 10 ^ 7$。\n\n题解在附件 `paper.pdf` 中。", "locale": "zh-CN"}}}
{"pid": "P10001", "type": "P", "difficulty": 7, "samples": [["4\n6 16 2\n17 14 13 5 13 4\n12 5 5 2 10 2\n6 4 2\n8 1 20 10 4 10\n8 1 15 3 4 6\n5 40 7\n21 47 7 25 47 \n9 26 4 4 39 \n5 151 10\n86 84 164 158 160\n43 42 82 79 80", "34\n34\n95\n463"], ["见附件 ex_shop2.in。", "见附件 ex_shop2.out。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["贪心", "线段树", "集训队互测", "2023"], "title": "[集训队互测 2023] 优惠购物", "background": "", "description": "小 C 要购买 $n$ 个物品，这些物品有前置关系，必须**依次**购买（即在购买了第 $i$ 个后才能购买第 $i+1$ 个）。\n\n他初始有 $m$ 张优惠劵和无穷多个金币。每个物品有两个属性，价格 $a_i$ 和优惠劵的使用上限 $b_i(0\\le b_i\\le a_i)$。\n\n购买一个物品的流程如下：\n\n- 选择使用 $x(0\\le x\\le b_i)$ 张优惠券，付出 $a_i-x$ 个金币和 $x$ 张优惠券。\n- 购买完后可得到 $\\lfloor \\frac{a_i-x}{c} \\rfloor$ 张优惠券（即一次购买中，每付出 $c$ 个金币可以得到一张优惠券，$c$ 为给定常数）\n\n小 C 想求出最少花费多少个金币能购买全部物品。", "inputFormat": "本题包含多组数据，第一行包含一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 第一行包含三个整数 $n,m,c$。\n- 第二行包含 $n$ 个整数 $a_1,a_2,...,a_n$ 表示每个物品的价格。\n- 第三行包含 $n$ 个整数 $b_1,b_2,...,b_n$ 表示优惠劵的使用上限。", "outputFormat": "对于每组数据输出一行：\n\n- 第一行输出一个整数，表示最少需要的金币数量。", "hint": "对于所有数据，$1\\le \\sum n\\le 10^6,0\\le m,a_i,b_i\\le 10^9,2\\le c\\le 10^9$。\n\n- Subtask 1 (5 pts)：$1\\le T\\le 5,1\\le n\\le 10,1\\le m,\\sum a_i,\\sum b_i\\le 10$\n- Subtask 2 (10 pts)：$a_i=b_i$\n- Subtask 3 (10 pts)：$1\\le \\sum n\\le 500,1\\le \\sum m,\\sum a_i,\\sum b_i\\le 500$\n- Subtask 4 (10 pts)：$1\\le \\sum n\\le 6000,1\\le \\sum m,\\sum a_i,\\sum b_i\\le 6000$\n- Subtask 5 (10 pts)：$1\\le \\sum n\\le 6000$\n- Subtask 6 (15 pts)：$1\\le \\sum n\\le 2\\times 10^5,2\\le c\\le 20$\n- Subtask 7 (10 pts)：$1\\le \\sum n\\le 1\\times 10^6,2\\le c\\le 20$\n- Subtask 8 (15 pts)：$1\\le \\sum n\\le 2\\times 10^5$\n- Subtask 9 (15 pts)：$1\\le \\sum n\\le 1\\times 10^6$\n\n时间限制：$\\texttt{1s}$\n\n空间限制：$\\texttt{2048MB}$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 优惠购物", "background": "", "description": "小 C 要购买 $n$ 个物品，这些物品有前置关系，必须**依次**购买（即在购买了第 $i$ 个后才能购买第 $i+1$ 个）。\n\n他初始有 $m$ 张优惠劵和无穷多个金币。每个物品有两个属性，价格 $a_i$ 和优惠劵的使用上限 $b_i(0\\le b_i\\le a_i)$。\n\n购买一个物品的流程如下：\n\n- 选择使用 $x(0\\le x\\le b_i)$ 张优惠券，付出 $a_i-x$ 个金币和 $x$ 张优惠券。\n- 购买完后可得到 $\\lfloor \\frac{a_i-x}{c} \\rfloor$ 张优惠券（即一次购买中，每付出 $c$ 个金币可以得到一张优惠券，$c$ 为给定常数）\n\n小 C 想求出最少花费多少个金币能购买全部物品。", "inputFormat": "本题包含多组数据，第一行包含一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n- 第一行包含三个整数 $n,m,c$。\n- 第二行包含 $n$ 个整数 $a_1,a_2,...,a_n$ 表示每个物品的价格。\n- 第三行包含 $n$ 个整数 $b_1,b_2,...,b_n$ 表示优惠劵的使用上限。", "outputFormat": "对于每组数据输出一行：\n\n- 第一行输出一个整数，表示最少需要的金币数量。", "hint": "对于所有数据，$1\\le \\sum n\\le 10^6,0\\le m,a_i,b_i\\le 10^9,2\\le c\\le 10^9$。\n\n- Subtask 1 (5 pts)：$1\\le T\\le 5,1\\le n\\le 10,1\\le m,\\sum a_i,\\sum b_i\\le 10$\n- Subtask 2 (10 pts)：$a_i=b_i$\n- Subtask 3 (10 pts)：$1\\le \\sum n\\le 500,1\\le \\sum m,\\sum a_i,\\sum b_i\\le 500$\n- Subtask 4 (10 pts)：$1\\le \\sum n\\le 6000,1\\le \\sum m,\\sum a_i,\\sum b_i\\le 6000$\n- Subtask 5 (10 pts)：$1\\le \\sum n\\le 6000$\n- Subtask 6 (15 pts)：$1\\le \\sum n\\le 2\\times 10^5,2\\le c\\le 20$\n- Subtask 7 (10 pts)：$1\\le \\sum n\\le 1\\times 10^6,2\\le c\\le 20$\n- Subtask 8 (15 pts)：$1\\le \\sum n\\le 2\\times 10^5$\n- Subtask 9 (15 pts)：$1\\le \\sum n\\le 1\\times 10^6$\n\n时间限制：$\\texttt{1s}$\n\n空间限制：$\\texttt{2048MB}$", "locale": "zh-CN"}}}
{"pid": "P10002", "type": "P", "difficulty": 7, "samples": [["3 2 998244353", "2\n4\n20"], ["11 4514 998244353", "4514\n20376196\n299712732\n706663250\n721357660\n977589073\n794002114\n369586566\n663682963\n347458730\n524354925"], ["40 787788 998244853", "787788\n699879231\n445785131\n857102003\n759492151\n898159394\n575712517\n634469464\n412999753\n814233648\n333451903\n852329440\n584109489\n270769240\n532457985\n79235443\n2228568\n266810999\n310877128\n614605839\n485785485\n338520973\n113751992\n692026056\n664258393\n650448721\n505881810\n237159658\n107178163\n629910112\n513627947\n915509519\n737809847\n921731327\n233492829\n202989716\n728903945\n776060784\n105388817\n121481849"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["集训队互测", "2023", "Special Judge", "O2优化"], "title": "[集训队互测 2023] 树哈希", "background": "", "description": "这是一道 [模板题](https://uoj.ac/problem/763)。\n\n给定正整数 $n,q,mod$。保证 $mod$ 是质数。\n\n对于一棵以点 $1$ 为根的有根树 $T$，设 $s(T)$ 为这棵树中最多能选出多少个互不同构的子树（也就是这颗树本质不同的子树个数），那么这个树的权值 $w(T) = q^{s(T)}$。\n\n对于所有 $1 \\le m \\le n$，输出所有大小为 $m$，根为 $1$ 的有标号树的权值之和对 $mod$ 取模后的值。\n\n两棵有根树 $T_1$、$T_2$ 同构当且仅当他们的大小相等，且存在一个顶点排列 $\\sigma$ 使得在 $T_1$ 中 $i$ 是 $j$ 的祖先当且仅当在 $T_2$ 中 $\\sigma(i)$ 是 $\\sigma(j)$ 的祖先。\n", "inputFormat": "一行两个整数，表示 $n,q,mod$。\n", "outputFormat": "输出 $n$ 行，第 $m$ 行表示 $m$ 个点的答案。", "hint": "#### 样例解释 1\n\n$n=3,q=2,mod=998244353$ 时，有三颗不同三个点的根为 $1$ 的有标号树，其中两颗满足 $w(T)=2^3$，另一颗满足 $w(T)=2^2$。因此答案为 $(2 \\times 2^3+2^2) \\bmod 998244353 = 20$。\n\n#### 限制与约定\n\n对于所有测试数据，保证 $n = 100, 10^8 \\le mod \\le 1.01 \\times 10^9, 1 \\le q < mod$，且 $mod$ 是质数。\n\n本题共 $1$ 个子任务，每个子任务 $100$ 分。你在每个子任务中的得分为该子任务所有测试点的得分的最小值。\n\n**你必须按照输出格式输出 $n$ 个数，但是你可以输出错误的答案**。如果你输出了 $c$ 个正确的答案，那么你获得的分数按照如下方式计算：\n\n- 对于 $0 \\le c \\le 20$，你的得分为 $2c$ 分；\n- 对于 $21 \\le c \\le 60$，你的得分为 $c + 20 $ 分。\n- 对于 $61 \\le c \\le 100$，你的得分为 $\\lfloor \\frac{c}{2}\\rfloor + 50$ 分。\n\n时间限制：$\\texttt{4s}$。\n空间限制：$\\texttt{2048MB}$。\n\n你可以使用下面的代码来加速你的取模。\n\n```cpp\nstruct fastmod {\n  typedef unsigned long long u64;\n  typedef __uint128_t u128;\n\n  int m;\n  u64 b;\n\n  fastmod(int m) : m(m), b(((u128)1 << 64) / m) {}\n  int reduce(u64 a) {\n    u64 q = ((u128)a * b) >> 64;\n    int r = a - q * m;\n    return r < m ? r : r - m;\n  }\n} z(2);\nvoid solve() {\n\tlong long mod = 998244353, qwq = 1e9;\n\tz = fastmod(mod);\n\tcout << z.reduce(qwq) << ' ' << qwq % mod << '\\n';\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 树哈希", "background": "", "description": "这是一道 [模板题](https://uoj.ac/problem/763)。\n\n给定正整数 $n,q,mod$。保证 $mod$ 是质数。\n\n对于一棵以点 $1$ 为根的有根树 $T$，设 $s(T)$ 为这棵树中最多能选出多少个互不同构的子树（也就是这颗树本质不同的子树个数），那么这个树的权值 $w(T) = q^{s(T)}$。\n\n对于所有 $1 \\le m \\le n$，输出所有大小为 $m$，根为 $1$ 的有标号树的权值之和对 $mod$ 取模后的值。\n\n两棵有根树 $T_1$、$T_2$ 同构当且仅当他们的大小相等，且存在一个顶点排列 $\\sigma$ 使得在 $T_1$ 中 $i$ 是 $j$ 的祖先当且仅当在 $T_2$ 中 $\\sigma(i)$ 是 $\\sigma(j)$ 的祖先。\n", "inputFormat": "一行两个整数，表示 $n,q,mod$。\n", "outputFormat": "输出 $n$ 行，第 $m$ 行表示 $m$ 个点的答案。", "hint": "#### 样例解释 1\n\n$n=3,q=2,mod=998244353$ 时，有三颗不同三个点的根为 $1$ 的有标号树，其中两颗满足 $w(T)=2^3$，另一颗满足 $w(T)=2^2$。因此答案为 $(2 \\times 2^3+2^2) \\bmod 998244353 = 20$。\n\n#### 限制与约定\n\n对于所有测试数据，保证 $n = 100, 10^8 \\le mod \\le 1.01 \\times 10^9, 1 \\le q < mod$，且 $mod$ 是质数。\n\n本题共 $1$ 个子任务，每个子任务 $100$ 分。你在每个子任务中的得分为该子任务所有测试点的得分的最小值。\n\n**你必须按照输出格式输出 $n$ 个数，但是你可以输出错误的答案**。如果你输出了 $c$ 个正确的答案，那么你获得的分数按照如下方式计算：\n\n- 对于 $0 \\le c \\le 20$，你的得分为 $2c$ 分；\n- 对于 $21 \\le c \\le 60$，你的得分为 $c + 20 $ 分。\n- 对于 $61 \\le c \\le 100$，你的得分为 $\\lfloor \\frac{c}{2}\\rfloor + 50$ 分。\n\n时间限制：$\\texttt{4s}$。\n空间限制：$\\texttt{2048MB}$。\n\n你可以使用下面的代码来加速你的取模。\n\n```cpp\nstruct fastmod {\n  typedef unsigned long long u64;\n  typedef __uint128_t u128;\n\n  int m;\n  u64 b;\n\n  fastmod(int m) : m(m), b(((u128)1 << 64) / m) {}\n  int reduce(u64 a) {\n    u64 q = ((u128)a * b) >> 64;\n    int r = a - q * m;\n    return r < m ? r : r - m;\n  }\n} z(2);\nvoid solve() {\n\tlong long mod = 998244353, qwq = 1e9;\n\tz = fastmod(mod);\n\tcout << z.reduce(qwq) << ' ' << qwq % mod << '\\n';\n}\n```", "locale": "zh-CN"}}}
{"pid": "P10003", "type": "P", "difficulty": 7, "samples": [["1 2 10\n-5 5\n5\n-10 -20 10 20\n10 20 -10 -20", "4.3333333333\n6.5"], ["1 4 10\n-5 5\n5\n10 -10 10 10\n10 10 10 -10\n10 -50 10 50\n10 50 10 -50", "2\n2\n7.6666666667\n10"], ["5 5 10\n-10 -5 0 5 10 15\n9 -4 7 -6 2\n-1 0 -9 -100\n-7 0 7 10\n9 0 -3 20\n12 0 -17 -30\n2 0 19 39", "8.085714\n1.815789\n2.382353\n4.987500\n3.988235"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "计算几何", "集训队互测", "2023", "Special Judge", "O2优化", "凸包"], "title": "[集训队互测 2023] 傅里叶与交通系统", "background": "傅里叶荣升巴黎市交通部长。新官上任三把火，傅里叶决定重构巴黎市的交通系统。", "description": "巴黎市的地图可以看成一个无限大的二维平面。傅里叶在上面修建了 $n$ 条传送带：第 $i$ 条传送带修建于 $x\\in[p_{i-1},p_i),y\\in\\mathbb R$ 的区域中。对于 $x<p_0$ 或者 $x\\geq p_n$ 的部分，傅里叶没有修建传送带。\n\n当一个人处于第 $i$ 个传送带的区域内时，他会受传送带影响强制以 $v_i$ 单位长度每秒的速度向 $y$ 坐标增加的方向移动。$v_i$ 可能为负，此时其 $y$ 坐标会以相应的速度减小。\n\n在位于未修建传送带的区域上时，$y$ 坐标不会受到传送带的影响。\n\n除了受传送带带动以外，这个人自己也可以移动。为了避免在速度不同的传送带间移动时出现跌倒事故，傅里叶委托麦克斯韦设计了脚底附有钢板的鞋子，并且在传送带上安装了强力磁铁。穿上这种鞋子后，你将只能 **沿着与某条坐标轴平行，可能与坐标轴同向或反向** 的方向，以不超过 $V$ 单位长度每秒的速度移动。有了这种鞋子，**在从一个传送带移动到另一个传送带时，先前的速度不会被继承，这个人将立刻按照新传送带的移动速度来移动**（自然，自身的移动还是可以同步进行的）。\n\n**个人的运动与传送带的运动是叠加的**。\n\n**在任意时刻，这个人都可以自由调整其运动的速率、方向；可以通过不断在极小间隔内切换方向以达到近似斜向移动的效果，甚至动态调整速率、方向达成近似曲线运动的效果；但是其任意时刻都只能有平行于坐标轴、不超过 $V$ 的瞬时速率。**\n\n**就算在没有铺设传送带的位置上，这个人仍然可以靠他的自由意志移动，不过还是只能沿坐标轴方向以不超过 $V$ 单位长度每秒移动**（问就是麦克斯韦的靴子已经成为概念级装备了）。\n\n现在，傅里叶想知道他的交通系统究竟有多么伟大。因此，他向你提出了 $q$ 组询问，每次询问如果有一个人要从 $(x_1,y_1)$ 走到 $(x_2,y_2)$，最少需要多少时间。因为傅里叶是唯一真神，所以他当然不会设计一个有缺陷的交通系统，因此所有的 $v_i$ 的绝对值均严格小于 $V$，进而总是可以从一个位置走到另一处。（虽然这将会导致就算在最优情况下，通过传送带系统到达目的地的时间也无法小于原本的一半，更多的时候反倒更慢了，但是谁让他是交通部长，而你只是他手下的一个雇员呢？）", "inputFormat": "第一行三个整数 $n,q,V$，表示传送带数目、询问个数以及人的移动速度。\n\n下一行 $n+1$ 个整数 $p_0,p_1,\\dots,p_n$，表示传送带的边界信息。\n\n下一行 $n$ 个整数 $v_1,v_2,\\dots,v_n$，表示每个传送带的速率。\n\n接下来 $q$ 行，每行四个整数 $x_1,y_1,x_2,y_2$，表示此次询问的起讫点。", "outputFormat": "对于每次询问，输出一行一个实数，表示此次移动所需的最小时长，单位为秒。你需要保证输出与标准答案的相对或绝对误差不超过 $10^{-5}$。\n\n- 如果你怀疑你的代码中出现了较大的精度误差，可以尝试使用更多整数和分数以规避浮点数运算，从而减少误差。", "hint": "样例 #4，#5 详见附件。\n\n------------\n\n样例 #1 的解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u2vazpfo.png)\n\n第一问中，上图是一种极优的行走方式。蓝色区域是传送带所在区域，在其上时我们以 $(3,12)$ 每秒的速度移动（其中自身移动的速度是 $(3,7)$，也即可以看作是三成时间沿着 $x$ 轴正方向、七成时间沿着 $y$ 轴正方向移动；在极短时间内不停切换，可以达成如上图中斜线行走的效果；$(3,7)$ 的自身行走与 $(0,5)$ 的传送带运转叠加成为 $(3,12)$ 的速度向量）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wqjsdrte.png)\n\n第二问中，上图是一种极优的行走方案。\n\n需要注意的是，这两问中能达成最少时间的行走方案不止图中给出的两种。\n\n对于所有数据，均满足 $n,q\\leq1.5\\times10^5$，$-5\\times10^5\\leq p_0<p_1<p_2<\\dots<p_n\\leq5\\times10^5$，$ |x_1|,|y_1|,|x_2|,|y_2|\\leq5\\times10^5$，$0\\leq|v_i|<V\\leq5\\times10^5$。\n\n------------\n\n- Subtask 1（5 分）：保证 $n=0$。\n- Subtask 2（10 分）：保证 $n,q\\leq1000$。\n- Subtask 3（10 分）：保证对于所有询问，$x_1=p_0,x_2=p_n$。\n- Subtask 4（10 分）：保证所有询问的 $x_1$ 全都相等，所有询问的 $x_2$ 全都相等（但不保证 $x_1=x_2$）。\n- Subtask 5（15 分）：保证 $v_i$ 单调不降，且询问的 $x_1\\leq x_2$。\n- Subtask 6（15 分）：保证存在 $i$ 使得 $p_i=x_1=x_2$。（但并不保证所有询问的 $i$ 都相同）\n- Subtask 7（15 分）：保证除 $n,q,V$ 外，其它值都在合法范围内独立随机得到（$p$ 的随机方式是随机 $n+1$ 个不等的 $[-5\\times10^5,5\\times10^5]$ 中的值并排序）。\n- Subtask 8（15 分）：保证 $n,q\\leq5\\times10^4$。\n- Subtask 9（10 分）：无特殊限制。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 傅里叶与交通系统", "background": "傅里叶荣升巴黎市交通部长。新官上任三把火，傅里叶决定重构巴黎市的交通系统。", "description": "巴黎市的地图可以看成一个无限大的二维平面。傅里叶在上面修建了 $n$ 条传送带：第 $i$ 条传送带修建于 $x\\in[p_{i-1},p_i),y\\in\\mathbb R$ 的区域中。对于 $x<p_0$ 或者 $x\\geq p_n$ 的部分，傅里叶没有修建传送带。\n\n当一个人处于第 $i$ 个传送带的区域内时，他会受传送带影响强制以 $v_i$ 单位长度每秒的速度向 $y$ 坐标增加的方向移动。$v_i$ 可能为负，此时其 $y$ 坐标会以相应的速度减小。\n\n在位于未修建传送带的区域上时，$y$ 坐标不会受到传送带的影响。\n\n除了受传送带带动以外，这个人自己也可以移动。为了避免在速度不同的传送带间移动时出现跌倒事故，傅里叶委托麦克斯韦设计了脚底附有钢板的鞋子，并且在传送带上安装了强力磁铁。穿上这种鞋子后，你将只能 **沿着与某条坐标轴平行，可能与坐标轴同向或反向** 的方向，以不超过 $V$ 单位长度每秒的速度移动。有了这种鞋子，**在从一个传送带移动到另一个传送带时，先前的速度不会被继承，这个人将立刻按照新传送带的移动速度来移动**（自然，自身的移动还是可以同步进行的）。\n\n**个人的运动与传送带的运动是叠加的**。\n\n**在任意时刻，这个人都可以自由调整其运动的速率、方向；可以通过不断在极小间隔内切换方向以达到近似斜向移动的效果，甚至动态调整速率、方向达成近似曲线运动的效果；但是其任意时刻都只能有平行于坐标轴、不超过 $V$ 的瞬时速率。**\n\n**就算在没有铺设传送带的位置上，这个人仍然可以靠他的自由意志移动，不过还是只能沿坐标轴方向以不超过 $V$ 单位长度每秒移动**（问就是麦克斯韦的靴子已经成为概念级装备了）。\n\n现在，傅里叶想知道他的交通系统究竟有多么伟大。因此，他向你提出了 $q$ 组询问，每次询问如果有一个人要从 $(x_1,y_1)$ 走到 $(x_2,y_2)$，最少需要多少时间。因为傅里叶是唯一真神，所以他当然不会设计一个有缺陷的交通系统，因此所有的 $v_i$ 的绝对值均严格小于 $V$，进而总是可以从一个位置走到另一处。（虽然这将会导致就算在最优情况下，通过传送带系统到达目的地的时间也无法小于原本的一半，更多的时候反倒更慢了，但是谁让他是交通部长，而你只是他手下的一个雇员呢？）", "inputFormat": "第一行三个整数 $n,q,V$，表示传送带数目、询问个数以及人的移动速度。\n\n下一行 $n+1$ 个整数 $p_0,p_1,\\dots,p_n$，表示传送带的边界信息。\n\n下一行 $n$ 个整数 $v_1,v_2,\\dots,v_n$，表示每个传送带的速率。\n\n接下来 $q$ 行，每行四个整数 $x_1,y_1,x_2,y_2$，表示此次询问的起讫点。", "outputFormat": "对于每次询问，输出一行一个实数，表示此次移动所需的最小时长，单位为秒。你需要保证输出与标准答案的相对或绝对误差不超过 $10^{-5}$。\n\n- 如果你怀疑你的代码中出现了较大的精度误差，可以尝试使用更多整数和分数以规避浮点数运算，从而减少误差。", "hint": "样例 #4，#5 详见附件。\n\n------------\n\n样例 #1 的解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u2vazpfo.png)\n\n第一问中，上图是一种极优的行走方式。蓝色区域是传送带所在区域，在其上时我们以 $(3,12)$ 每秒的速度移动（其中自身移动的速度是 $(3,7)$，也即可以看作是三成时间沿着 $x$ 轴正方向、七成时间沿着 $y$ 轴正方向移动；在极短时间内不停切换，可以达成如上图中斜线行走的效果；$(3,7)$ 的自身行走与 $(0,5)$ 的传送带运转叠加成为 $(3,12)$ 的速度向量）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wqjsdrte.png)\n\n第二问中，上图是一种极优的行走方案。\n\n需要注意的是，这两问中能达成最少时间的行走方案不止图中给出的两种。\n\n对于所有数据，均满足 $n,q\\leq1.5\\times10^5$，$-5\\times10^5\\leq p_0<p_1<p_2<\\dots<p_n\\leq5\\times10^5$，$ |x_1|,|y_1|,|x_2|,|y_2|\\leq5\\times10^5$，$0\\leq|v_i|<V\\leq5\\times10^5$。\n\n------------\n\n- Subtask 1（5 分）：保证 $n=0$。\n- Subtask 2（10 分）：保证 $n,q\\leq1000$。\n- Subtask 3（10 分）：保证对于所有询问，$x_1=p_0,x_2=p_n$。\n- Subtask 4（10 分）：保证所有询问的 $x_1$ 全都相等，所有询问的 $x_2$ 全都相等（但不保证 $x_1=x_2$）。\n- Subtask 5（15 分）：保证 $v_i$ 单调不降，且询问的 $x_1\\leq x_2$。\n- Subtask 6（15 分）：保证存在 $i$ 使得 $p_i=x_1=x_2$。（但并不保证所有询问的 $i$ 都相同）\n- Subtask 7（15 分）：保证除 $n,q,V$ 外，其它值都在合法范围内独立随机得到（$p$ 的随机方式是随机 $n+1$ 个不等的 $[-5\\times10^5,5\\times10^5]$ 中的值并排序）。\n- Subtask 8（15 分）：保证 $n,q\\leq5\\times10^4$。\n- Subtask 9（10 分）：无特殊限制。 ", "locale": "zh-CN"}}}
{"pid": "P10004", "type": "P", "difficulty": 7, "samples": [["3 1000000007", "1 0 0\n0 4 0\n0 0 1"], ["5 1000000007", "1 0 0 0 0\n0 20 6 0 0\n0 6 54 6 0\n0 0 6 20 0\n0 0 0 0 1"], ["10 1000000007", "1 0 0 0 0 0 0 0 0 0\n0 165 462 330 55 1 0 0 0 0\n0 462 9273 22023 13750 2266 66 0 0 0\n0 330 22023 147301 203610 75306 6556 66 0 0 \n0 55 13750 203610 592130 423236 75306 2266 1 0\n0 1 2266 75306 423236 592130 203610 13750 55 0\n0 0 66 6556 75306 203610 147301 22023 330 0\n0 0 0 66 2266 13750 22023 9273 462 0\n0 0 0 0 1 55 330 462 165 0\n0 0 0 0 0 0 0 0 0 1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["集训队互测", "2023", "组合数学", "容斥原理"], "title": "[集训队互测 2023] Permutation Counting 2", "background": "", "description": "给定 $n$，对于每组 $x,y\\in [0,n)$ 求出有多少个 $1\\sim n$ 的排列 $p$ 满足以下条件：\n\n- $\\sum\\limits_{i=1}^{n-1}[p_i<p_{i+1}]=x$。\n\n- $\\sum\\limits_{i=1}^{n-1}[p^{-1}_i<p^{-1}_{i+1}]=y$。\n\n其中 $p^{-1}$ 表示 $p$ 的逆排列，满足 $p^{-1}_{p_i}=i$。\n\n答案对给定的质数 $MOD$ 取模。", "inputFormat": "共一行，两个整数，表示 $n,MOD$。", "outputFormat": "共 $n$ 行，每行共 $n$ 个整数，第 $i$ 行第 $j$ 列的数表示 $x=i-1,y=j-1$ 时的答案。", "hint": "对于 $100\\%$ 数据，$1\\le n\\le 500$，$10^9\\le MOD\\le 1.01\\times 10^9$，保证 $MOD$ 为质数。\n\n$\\operatorname{Subtask} 1(10\\%):n\\le 8$。\n\n$\\operatorname{Subtask} 2(15\\%):n\\le 16$。\n\n$\\operatorname{Subtask} 3(25\\%):n\\le 40$。\n\n$\\operatorname{Subtask} 4(25\\%):n\\le 100$。\n\n$\\operatorname{Subtask} 5(25\\%):$ 无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] Permutation Counting 2", "background": "", "description": "给定 $n$，对于每组 $x,y\\in [0,n)$ 求出有多少个 $1\\sim n$ 的排列 $p$ 满足以下条件：\n\n- $\\sum\\limits_{i=1}^{n-1}[p_i<p_{i+1}]=x$。\n\n- $\\sum\\limits_{i=1}^{n-1}[p^{-1}_i<p^{-1}_{i+1}]=y$。\n\n其中 $p^{-1}$ 表示 $p$ 的逆排列，满足 $p^{-1}_{p_i}=i$。\n\n答案对给定的质数 $MOD$ 取模。", "inputFormat": "共一行，两个整数，表示 $n,MOD$。", "outputFormat": "共 $n$ 行，每行共 $n$ 个整数，第 $i$ 行第 $j$ 列的数表示 $x=i-1,y=j-1$ 时的答案。", "hint": "对于 $100\\%$ 数据，$1\\le n\\le 500$，$10^9\\le MOD\\le 1.01\\times 10^9$，保证 $MOD$ 为质数。\n\n$\\operatorname{Subtask} 1(10\\%):n\\le 8$。\n\n$\\operatorname{Subtask} 2(15\\%):n\\le 16$。\n\n$\\operatorname{Subtask} 3(25\\%):n\\le 40$。\n\n$\\operatorname{Subtask} 4(25\\%):n\\le 100$。\n\n$\\operatorname{Subtask} 5(25\\%):$ 无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P10005", "type": "P", "difficulty": 7, "samples": [["2 3 2 1000000007", "966666675"], ["3 5 2 998244353", "148276980"], ["6 10 2 1004535809", "622165218"], ["15 20 2 1064822107", "53789887"], ["30 40 1 265371653", "179937201"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["集训队互测", "2023", "O2优化"], "title": "[集训队互测 2023] 基础寄术练习题", "background": null, "description": "对于长度为 $n$ 的序列 $a$，定义 $f(a)=\\dfrac{1}{\\prod\\limits_{i=k}^ns_i}$，其中 $s_i$ 为 $\\{a_n\\}$ 的前缀和数组，**$k$ 是给定的常数且 $1\\le k\\le 2$**。\n\n考虑所有满足以下三个条件的序列 $a$：\n\n- $a$ 的长度为 $n$。\n- $\\forall i,j$，$a_i\\ne a_j$。\n- $1\\le a_i\\le m$。\n\n求它们的 $f(a)$ 之和，答案对 $p$ 取模。保证 $p$ 是一个质数。", "inputFormat": "第一行四个整数 $n,m,k,p$，分别代表序列长度，序列元素的上界和模数。", "outputFormat": "一行一个整数表示答案对 $p$ 取模后的结果。", "hint": "对于所有数据，保证 $2\\le n\\le m\\le 100$，$10^8<p<1.07\\times 10^9$ 且 $p$ 为质数，$1\\le k\\le 2$。\n\n- Subtask 1 (10 pts)：$m\\le 20$。\n- Subtask 2 (25 pts)：$k=1$。\n- Subtask 3 (15 pts)：$n=m\\le 30$。\n- Subtask 4 (10 pts)：$m\\le 30$。\n- Subtask 5 (15 pts)：$m\\le 40$。\n- Subtask 6 (10 pts)：$m\\le 70$。\n- Subtask 7 (15 pts)：$m\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 基础寄术练习题", "background": null, "description": "对于长度为 $n$ 的序列 $a$，定义 $f(a)=\\dfrac{1}{\\prod\\limits_{i=k}^ns_i}$，其中 $s_i$ 为 $\\{a_n\\}$ 的前缀和数组，**$k$ 是给定的常数且 $1\\le k\\le 2$**。\n\n考虑所有满足以下三个条件的序列 $a$：\n\n- $a$ 的长度为 $n$。\n- $\\forall i,j$，$a_i\\ne a_j$。\n- $1\\le a_i\\le m$。\n\n求它们的 $f(a)$ 之和，答案对 $p$ 取模。保证 $p$ 是一个质数。", "inputFormat": "第一行四个整数 $n,m,k,p$，分别代表序列长度，序列元素的上界和模数。", "outputFormat": "一行一个整数表示答案对 $p$ 取模后的结果。", "hint": "对于所有数据，保证 $2\\le n\\le m\\le 100$，$10^8<p<1.07\\times 10^9$ 且 $p$ 为质数，$1\\le k\\le 2$。\n\n- Subtask 1 (10 pts)：$m\\le 20$。\n- Subtask 2 (25 pts)：$k=1$。\n- Subtask 3 (15 pts)：$n=m\\le 30$。\n- Subtask 4 (10 pts)：$m\\le 30$。\n- Subtask 5 (15 pts)：$m\\le 40$。\n- Subtask 6 (10 pts)：$m\\le 70$。\n- Subtask 7 (15 pts)：$m\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P10006", "type": "P", "difficulty": 7, "samples": [["5 3\n|{}}}\n2 1\n3 2\n4 1\n5 1", "1 2 0 0"], ["10 8\n|}||}{|{{{\n2 1\n3 1\n4 3\n5 2\n6 5\n7 5\n8 4\n9 2\n10 3", "2 0 1 1 0 0 0 0 0"], ["见附加文件 ex_surreal3.in。", "见附加文件 ex_surreal3.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["点分治", "集训队互测", "2023", "O2优化", "快速数论变换 NTT", "根号分治"], "title": "[集训队互测 2023] 超现实树", "background": "Alek 喜欢打信息竞赛，尤其喜欢超现实树。超现实树，顾名思义，就是树上的超现实数。", "description": "Alek 认为，对于常数 $k$，一个字符串被称为「$k$-超现实数串」，如果其只包含字符 $\\texttt{\\{}, \\texttt{|}, \\texttt{\\}}$，且：\n\n- 空串为 $k$-超现实数串；\n- 如果 $s, t$ 为 $k$-超现实数串，那么 $s + t$ 为 $k$-超现实数串；\n- 如果 $k + 1$ 个字符串 $s_1, s_2, \\cdots, s_{k + 1}$ 都是 $k$-超现实数串，那么 $\\texttt{\\{} + s_1 + \\texttt{|} + s_2 + \\texttt{|} + \\cdots + \\texttt{|} + s_{k + 1} + \\texttt{\\}}$ 为 $k$-超现实数串；\n- $k$-超现实数串仅限于此。\n\n给定一棵 $n$ 个点的无根树，节点编号为 $1 \\sim n$。每个点 $i$ 上有一个字符 $a_i \\in \\{\\texttt{\\{}, \\texttt{|}, \\texttt{\\}}\\}$。\n\n给定整数 $m$，Alek 希望你对 $k = 0, 1, \\cdots, m$ 分别求出：有多少有序对 $(x, y)$，$1 \\leq x, y \\leq n$，使得树上从点 $x$ 到点 $y$ 的唯一简单路径上的字符依次拼接所得字符串是 $k$-超现实数串。", "inputFormat": "第一行两个整数 $n, m$，分别表示树的节点数，和需要求答案的 $k$ 的上限。\n\n第二行一个字符串 $a$，$a$ 的第 $i$ 个字符表示点 $i$ 上的字符。\n\n接下来 $n - 1$ 行，每行两个整数 $x, y$，表示存在一条连接点 $x$ 和点 $y$ 的边。", "outputFormat": "输出一行 $m + 1$ 个整数，分别表示 $k = 0, 1, \\cdots, m$ 时的答案。", "hint": "对于所有数据，有 $2 \\leq n \\leq 10^5$，$0 \\leq m \\leq n - 2$，$a_i \\in \\{\\texttt{\\{}, \\texttt{|}, \\texttt{\\}}\\}$。\n\n- **Subtask 1**（5 分）：$n \\leq 4601$；\n- **Subtask 2**（20 分）：对每条边 $(x, y)$ 有 $y = x + 1$；\n- **Subtask 3**（5 分）：$a_i \\neq \\texttt{|}$, $m = 0$；\n- **Subtask 4**（15 分，依赖 Subtask 3）：$m \\leq 3$；\n- **Subtask 5**（25 分，依赖 Subtask 1）：$n \\leq 5 \\times 10^4$；\n- **Subtask 6**（30 分，依赖 Subtask 1, 2, 3, 4, 5）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 超现实树", "background": "Alek 喜欢打信息竞赛，尤其喜欢超现实树。超现实树，顾名思义，就是树上的超现实数。", "description": "Alek 认为，对于常数 $k$，一个字符串被称为「$k$-超现实数串」，如果其只包含字符 $\\texttt{\\{}, \\texttt{|}, \\texttt{\\}}$，且：\n\n- 空串为 $k$-超现实数串；\n- 如果 $s, t$ 为 $k$-超现实数串，那么 $s + t$ 为 $k$-超现实数串；\n- 如果 $k + 1$ 个字符串 $s_1, s_2, \\cdots, s_{k + 1}$ 都是 $k$-超现实数串，那么 $\\texttt{\\{} + s_1 + \\texttt{|} + s_2 + \\texttt{|} + \\cdots + \\texttt{|} + s_{k + 1} + \\texttt{\\}}$ 为 $k$-超现实数串；\n- $k$-超现实数串仅限于此。\n\n给定一棵 $n$ 个点的无根树，节点编号为 $1 \\sim n$。每个点 $i$ 上有一个字符 $a_i \\in \\{\\texttt{\\{}, \\texttt{|}, \\texttt{\\}}\\}$。\n\n给定整数 $m$，Alek 希望你对 $k = 0, 1, \\cdots, m$ 分别求出：有多少有序对 $(x, y)$，$1 \\leq x, y \\leq n$，使得树上从点 $x$ 到点 $y$ 的唯一简单路径上的字符依次拼接所得字符串是 $k$-超现实数串。", "inputFormat": "第一行两个整数 $n, m$，分别表示树的节点数，和需要求答案的 $k$ 的上限。\n\n第二行一个字符串 $a$，$a$ 的第 $i$ 个字符表示点 $i$ 上的字符。\n\n接下来 $n - 1$ 行，每行两个整数 $x, y$，表示存在一条连接点 $x$ 和点 $y$ 的边。", "outputFormat": "输出一行 $m + 1$ 个整数，分别表示 $k = 0, 1, \\cdots, m$ 时的答案。", "hint": "对于所有数据，有 $2 \\leq n \\leq 10^5$，$0 \\leq m \\leq n - 2$，$a_i \\in \\{\\texttt{\\{}, \\texttt{|}, \\texttt{\\}}\\}$。\n\n- **Subtask 1**（5 分）：$n \\leq 4601$；\n- **Subtask 2**（20 分）：对每条边 $(x, y)$ 有 $y = x + 1$；\n- **Subtask 3**（5 分）：$a_i \\neq \\texttt{|}$, $m = 0$；\n- **Subtask 4**（15 分，依赖 Subtask 3）：$m \\leq 3$；\n- **Subtask 5**（25 分，依赖 Subtask 1）：$n \\leq 5 \\times 10^4$；\n- **Subtask 6**（30 分，依赖 Subtask 1, 2, 3, 4, 5）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P10007", "type": "P", "difficulty": 7, "samples": [["2 1\n1 2 0", "3 7"], ["10 10\n5 9 7 8 0 6 3 2 4 10 1", "59 1687 55618 1937320 69557006 549579657 621247830 250099579 483510144 968467040"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["集训队互测", "2023", "O2优化", "生成函数", "拉格朗日反演"], "title": "[集训队互测 2023] 童话", "background": "~~童话只美在真实却从不续写。~~\n\n童话只美在温柔却从不续写。", "description": "泠珞最近学习了前缀和算法，她写出了以下程序：\n\n```cpp\nread(n),read(a);\nfor(int i=0;i<=n;i++)read(f[i]);\nfor(int t=1;t<=n;t++){\n    for(int i=1;i<=n;i++)f[i]=f[i]+a*f[i-1];\n    ans[t]=f[t];\n}\n```\n\n她发现这个程序在 $n$ 比较大的时候会运行超时，请你帮忙写一个程序帮她计算出 $\\text{ans}_1,\\text{ans}_2,\\cdots,\\text{ans}_n$，由于答案数值过大，你只需告诉她每个数除以 $998244353$ 的余数。", "inputFormat": "第一行两个正整数 $n,a$。\n\n接下来一行 $n+1$ 个非负整数，表示 $f_0,f_1,\\cdots,f_n$。", "outputFormat": "$n$ 个非负整数，表示 $\\text{ans}_1,\\text{ans}_2,\\cdots,\\text{ans}_n$。", "hint": "数据范围：\n\n对于 $100\\%$ 的数据，保证 $2\\leqslant n\\leqslant 10^6,0\\leqslant f_i<998244353,1\\leqslant a<998244353$。\n\n| 子任务编号 |  $n\\leqslant$  | 特殊性质 | 分值 |\n| :--------: | :------------: | :------: | :--: |\n|    $1$     |     $2000$     |          | $5$  |\n|    $2$     |     $10^5$     |    A     | $5$  |\n|    $3$     |     $10^5$     |    BC    | $5$  |\n|    $4$     |     $10^5$     |    BD    | $10$ |\n|    $5$     |     $10^5$     |    C     | $10$ |\n|    $6$     | $5\\times10^4$  |          | $10$ |\n|    $7$     |     $10^5$     |          | $10$ |\n|    $8$     | $2\\times 10^5$ |          | $15$ |\n|    $9$     | $5\\times 10^5$ |          | $15$ |\n|    $10$    |     $10^6$     |          | $15$ |\n\n特殊性质 A：保证 $f_i\\ne 0$ 的 $i$ 数量不超过 $100$。\n\n特殊性质 B：保证 $a=1$。\n\n特殊性质 C：保证对于所有 $i\\in[0,n]$，都满足 $f_i=1$。\n\n特殊性质 D：保证对于所有 $i\\in[0,n]$，都满足 $f_i={i+2\\choose 2}=\\frac{(i+2)(i+1)}{2}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 童话", "background": "~~童话只美在真实却从不续写。~~\n\n童话只美在温柔却从不续写。", "description": "泠珞最近学习了前缀和算法，她写出了以下程序：\n\n```cpp\nread(n),read(a);\nfor(int i=0;i<=n;i++)read(f[i]);\nfor(int t=1;t<=n;t++){\n    for(int i=1;i<=n;i++)f[i]=f[i]+a*f[i-1];\n    ans[t]=f[t];\n}\n```\n\n她发现这个程序在 $n$ 比较大的时候会运行超时，请你帮忙写一个程序帮她计算出 $\\text{ans}_1,\\text{ans}_2,\\cdots,\\text{ans}_n$，由于答案数值过大，你只需告诉她每个数除以 $998244353$ 的余数。", "inputFormat": "第一行两个正整数 $n,a$。\n\n接下来一行 $n+1$ 个非负整数，表示 $f_0,f_1,\\cdots,f_n$。", "outputFormat": "$n$ 个非负整数，表示 $\\text{ans}_1,\\text{ans}_2,\\cdots,\\text{ans}_n$。", "hint": "数据范围：\n\n对于 $100\\%$ 的数据，保证 $2\\leqslant n\\leqslant 10^6,0\\leqslant f_i<998244353,1\\leqslant a<998244353$。\n\n| 子任务编号 |  $n\\leqslant$  | 特殊性质 | 分值 |\n| :--------: | :------------: | :------: | :--: |\n|    $1$     |     $2000$     |          | $5$  |\n|    $2$     |     $10^5$     |    A     | $5$  |\n|    $3$     |     $10^5$     |    BC    | $5$  |\n|    $4$     |     $10^5$     |    BD    | $10$ |\n|    $5$     |     $10^5$     |    C     | $10$ |\n|    $6$     | $5\\times10^4$  |          | $10$ |\n|    $7$     |     $10^5$     |          | $10$ |\n|    $8$     | $2\\times 10^5$ |          | $15$ |\n|    $9$     | $5\\times 10^5$ |          | $15$ |\n|    $10$    |     $10^6$     |          | $15$ |\n\n特殊性质 A：保证 $f_i\\ne 0$ 的 $i$ 数量不超过 $100$。\n\n特殊性质 B：保证 $a=1$。\n\n特殊性质 C：保证对于所有 $i\\in[0,n]$，都满足 $f_i=1$。\n\n特殊性质 D：保证对于所有 $i\\in[0,n]$，都满足 $f_i={i+2\\choose 2}=\\frac{(i+2)(i+1)}{2}$。", "locale": "zh-CN"}}}
{"pid": "P10008", "type": "P", "difficulty": 7, "samples": [["3 2 2\n1 2\n2 3", "4"], ["10 11 2\n1 10\n2 2\n3 3\n5 5\n6 10\n6 7\n6 6\n7 7\n8 10\n8 9\n10 10", "129"], ["40 40 40\n31 34\n9 34\n4 25\n36 38\n8 29\n8 30\n6 26\n17 19\n6 23\n36 39\n11 39\n2 10\n32 37\n32 33\n33 35\n17 21\n8 35\n31 40\n11 25\n11 20\n8 37\n26 36\n22 34\n17 39\n28 38\n26 28\n11 12\n12 15\n12 37\n1 9\n11 23\n5 26\n8 11\n1 23\n12 32\n7 19\n22 28\n20 27\n8 40\n19 40", "567581188"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["集训队互测", "2022"], "title": "[集训队互测 2022] Range Minimum Element", "background": "", "description": "有一个长度为 $n$，值域为 $[1,c]$ 的正整数序列 $a$。给定 $m$ 个区间 $[l_i,r_i]$，设长度为 $m$ 的序列 $b$ 满足 $\\forall i\\in [1,m],b_i=\\min\\limits_{j=l_i}^{r_i}\\{a_j\\}$。求出 $a$ 在范围内任意取的情况下共能得到多少种不同的 $b$。答案对 $998244353$ 取模。", "inputFormat": "第一行，三个数，依次表示 $n,m,c$。\n\n接下来 $m$ 行，每行两个数 $l_i,r_i$ 表示一个给定的区间。", "outputFormat": "共一行，一个数，表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 100,1\\le m\\le\\dfrac{n(n+1)}{2},1\\le c<998244353,\\forall i\\in [1,m],1\\le l_i\\le r_i\\le n$。保证给定的 $m$ 个区间两两不同。\n\n$\\operatorname{Subtask}1(5\\%):n,c\\le 5$。\n\n$\\operatorname{Subtask}2(10\\%):c\\le 100$，且对于任意两个有交点的区间一定存在其中一个包含另一个。\n\n$\\operatorname{Subtask}3(15\\%):m\\le 18,c=2$。\n\n$\\operatorname{Subtask}4(20\\%):c=2$。\n\n$\\operatorname{Subtask}5(15\\%):n,c\\le 40$。\n\n$\\operatorname{Subtask}6(15\\%):c\\le 100$。\n\n$\\operatorname{Subtask}7(20\\%):$ 无特殊限制。\n\n#### 样例说明 1\n\n当 $a=(1,1,1)$ 时，$b=(1,1)$。\n\n当 $a=(1,1,2)$ 时，$b=(1,1)$。\n\n当 $a=(1,2,1)$ 时，$b=(1,1)$。\n\n当 $a=(1,2,2)$ 时，$b=(1,2)$。\n\n当 $a=(2,1,1)$ 时，$b=(1,1)$。\n\n当 $a=(2,1,2)$ 时，$b=(1,1)$。\n\n当 $a=(2,2,1)$ 时，$b=(2,1)$。\n\n当 $a=(2,2,2)$ 时，$b=(2,2)$。\n\n因此共能得到 $[1,1],[1,2],[2,1],[2,2]$ 这 $4$ 种不同的 $b$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2022] Range Minimum Element", "background": "", "description": "有一个长度为 $n$，值域为 $[1,c]$ 的正整数序列 $a$。给定 $m$ 个区间 $[l_i,r_i]$，设长度为 $m$ 的序列 $b$ 满足 $\\forall i\\in [1,m],b_i=\\min\\limits_{j=l_i}^{r_i}\\{a_j\\}$。求出 $a$ 在范围内任意取的情况下共能得到多少种不同的 $b$。答案对 $998244353$ 取模。", "inputFormat": "第一行，三个数，依次表示 $n,m,c$。\n\n接下来 $m$ 行，每行两个数 $l_i,r_i$ 表示一个给定的区间。", "outputFormat": "共一行，一个数，表示答案。", "hint": "对于 $100\\%$ 的数据，$1\\le n\\le 100,1\\le m\\le\\dfrac{n(n+1)}{2},1\\le c<998244353,\\forall i\\in [1,m],1\\le l_i\\le r_i\\le n$。保证给定的 $m$ 个区间两两不同。\n\n$\\operatorname{Subtask}1(5\\%):n,c\\le 5$。\n\n$\\operatorname{Subtask}2(10\\%):c\\le 100$，且对于任意两个有交点的区间一定存在其中一个包含另一个。\n\n$\\operatorname{Subtask}3(15\\%):m\\le 18,c=2$。\n\n$\\operatorname{Subtask}4(20\\%):c=2$。\n\n$\\operatorname{Subtask}5(15\\%):n,c\\le 40$。\n\n$\\operatorname{Subtask}6(15\\%):c\\le 100$。\n\n$\\operatorname{Subtask}7(20\\%):$ 无特殊限制。\n\n#### 样例说明 1\n\n当 $a=(1,1,1)$ 时，$b=(1,1)$。\n\n当 $a=(1,1,2)$ 时，$b=(1,1)$。\n\n当 $a=(1,2,1)$ 时，$b=(1,1)$。\n\n当 $a=(1,2,2)$ 时，$b=(1,2)$。\n\n当 $a=(2,1,1)$ 时，$b=(1,1)$。\n\n当 $a=(2,1,2)$ 时，$b=(1,1)$。\n\n当 $a=(2,2,1)$ 时，$b=(2,1)$。\n\n当 $a=(2,2,2)$ 时，$b=(2,2)$。\n\n因此共能得到 $[1,1],[1,2],[2,1],[2,2]$ 这 $4$ 种不同的 $b$。", "locale": "zh-CN"}}}
{"pid": "P10009", "type": "P", "difficulty": 7, "samples": [["1\n6 6\n1 1 5 1 9 4\n2 5\n1 2 5\n2 4\n1 3 6\n2 6\n1 1 6", "9\n4\n12\n1\n0\n5\n4\n12\n0\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["集训队互测", "2022", "O2优化"], "title": "[集训队互测 2022] 线段树", "background": "请注意：**本题不是线段树模板题**。", "description": "给定一个长度为 $n$ 的序列 $a_1,a_2,\\cdots a_n$。你需要进行共 $q$ 次下面两种操作：\n\n- `1 l r`：将 $a_{l\\sim r}$ 替换为它的异或差分。形式化地说，令 $b_i := a_i \\text{ xor } a_{i-1}$（$l<i\\leq r$），然后对于每个 $l<i\\leq r$，将 $a_i$ 替换为 $b_i$。\n\n- `2 pos`：查询 $a_{pos}$ 的值。\n\n操作执行完后，你还需要回答最终的 $a$ 序列。", "inputFormat": "第一行包含一个整数 $T$，表示该数据满足第 $T$ 个子任务的限制。\n\n第二行包含两个整数 $n,q$，分别表示序列的长度和操作的个数。\n\n第三行包含 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。\n\n接下来 $q$ 行，每行若干个数，表示一个操作。若操作为第一种操作，则此行包含三个数 `1 l r` 。若操作为第二种操作，则此行包含两个数 `2 pos`。", "outputFormat": "设共有 $q_2$ 个第二种操作，则输出共包含 $q_2+n$ 行。\n\n前 $q_2$ 行，每行输出一个整数，表示该操作的答案。\n\n接下来 $n$ 行，每行输出一个整数，表示最终的 $a$\n 序列。", "hint": "**更多样例见下发文件**。对于第 $i + 1$ 个样例，$T = i$。\n\n### 样例 1 解释\n\n初始时 $a=[1,1,5,1,9,4]$。\n\n第一个操作要求输出 $a_5$，此时 $a_5=9$，故输出 $9$。\n\n第二个操作要求将 $a_{2\\sim 5}$ 替换为它的异或差分，$a_{2\\sim 5}$ 为 $[1,5,1,9]$，它的异或差分为 $[1,4,4,8]$，故操作执行完后，$a$ 序列变为 $[1,1,4,4,8,4]$\n。\n\n第三个操作要求输出 $a_4$，此时 $a_4=4$，故输出 $4$。\n\n第四个操作要求将 $a_{3\\sim 6}$ 替换为它的异或差分， $a_{3\\sim 6}$ 为 $[4,4,8,4]$，它的异或差分为 $[4,0,12,12]$，故操作执行完后， $a$ 序列变为 $[1,1,4,0,12,12]$。\n\n第五个操作要求输出 $a_6$，此时 $a_6=12$，故输出 $12$。\n\n第六个操作要求将 $a_{1\\sim 6}$ 替换为它的异或差分， $a_{1\\sim 6}$ 为 $[1,1,4,0,12,12]$，它的异或差分为 $[1,0,5,4,12,0]$，故操作执行完后，$a$ 序列变为 $[1,0,5,4,12,0]$。\n\n最终的 $a$ 序列为 $[1,0,5,4,12,0]$。\n\n### 数据范围与约定\n\n对于所有数据，保证 $1\\leq n\\leq 2.5\\times 10^5$，$1\\leq q\\leq 10^5$，$0\\leq a_i< 2^{30}$，$1\\leq l\\leq r\\leq n$，$1\\leq pos\\leq n$。\n\n| 子任务编号 |     $n\\leq$      |    $q\\leq$     | 特殊性质 | 分值 |   子任务依赖    |\n| :--------: | :--------------: | :------------: | :------: | :--: | :-------------: |\n|    $1$     |  $2\\times 10^3$  | $2\\times 10^3$ |    无    | $8$  |       无        |\n|    $2$     | $2.5\\times 10^5$ |     $10^5$     |    A     | $4$  |       无        |\n|    $3$     | $2.5\\times 10^5$ |     $10^5$     |    B     | $7$  |       无        |\n|    $4$     | $2.5\\times 10^5$ |     $10^5$     |    CD    | $13$ |       无        |\n|    $5$     | $2.5\\times 10^5$ |     $10^5$     |    DE    | $12$ |       无        |\n|    $6$     | $2.5\\times 10^5$ |     $10^5$     |    D     | $16$ |       $5$       |\n|    $7$     | $2.5\\times 10^5$ |     $10^5$     |    E     | $11$ |       $5$       |\n|    $8$     | $2.5\\times 10^5$ |     $10^5$     |    无    | $29$ | $1,2,3,4,5,6,7$ |\n\n特殊性质 A：$\\forall i\\geq 2, a_i=0$。\n\n特殊性质 B：$0\\leq a_i\\leq 1$。\n\n特殊性质 C：记序列 $a$ 中非零位置个数为 $c$，则 $c\\leq 100$。\n\n特殊性质 D：操作 $1$ 满足 $l=1$，$r=n$。\n\n特殊性质 E：没有操作 $2$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2022] 线段树", "background": "请注意：**本题不是线段树模板题**。", "description": "给定一个长度为 $n$ 的序列 $a_1,a_2,\\cdots a_n$。你需要进行共 $q$ 次下面两种操作：\n\n- `1 l r`：将 $a_{l\\sim r}$ 替换为它的异或差分。形式化地说，令 $b_i := a_i \\text{ xor } a_{i-1}$（$l<i\\leq r$），然后对于每个 $l<i\\leq r$，将 $a_i$ 替换为 $b_i$。\n\n- `2 pos`：查询 $a_{pos}$ 的值。\n\n操作执行完后，你还需要回答最终的 $a$ 序列。", "inputFormat": "第一行包含一个整数 $T$，表示该数据满足第 $T$ 个子任务的限制。\n\n第二行包含两个整数 $n,q$，分别表示序列的长度和操作的个数。\n\n第三行包含 $n$ 个整数 $a_1,a_2,\\cdots,a_n$。\n\n接下来 $q$ 行，每行若干个数，表示一个操作。若操作为第一种操作，则此行包含三个数 `1 l r` 。若操作为第二种操作，则此行包含两个数 `2 pos`。", "outputFormat": "设共有 $q_2$ 个第二种操作，则输出共包含 $q_2+n$ 行。\n\n前 $q_2$ 行，每行输出一个整数，表示该操作的答案。\n\n接下来 $n$ 行，每行输出一个整数，表示最终的 $a$\n 序列。", "hint": "**更多样例见下发文件**。对于第 $i + 1$ 个样例，$T = i$。\n\n### 样例 1 解释\n\n初始时 $a=[1,1,5,1,9,4]$。\n\n第一个操作要求输出 $a_5$，此时 $a_5=9$，故输出 $9$。\n\n第二个操作要求将 $a_{2\\sim 5}$ 替换为它的异或差分，$a_{2\\sim 5}$ 为 $[1,5,1,9]$，它的异或差分为 $[1,4,4,8]$，故操作执行完后，$a$ 序列变为 $[1,1,4,4,8,4]$\n。\n\n第三个操作要求输出 $a_4$，此时 $a_4=4$，故输出 $4$。\n\n第四个操作要求将 $a_{3\\sim 6}$ 替换为它的异或差分， $a_{3\\sim 6}$ 为 $[4,4,8,4]$，它的异或差分为 $[4,0,12,12]$，故操作执行完后， $a$ 序列变为 $[1,1,4,0,12,12]$。\n\n第五个操作要求输出 $a_6$，此时 $a_6=12$，故输出 $12$。\n\n第六个操作要求将 $a_{1\\sim 6}$ 替换为它的异或差分， $a_{1\\sim 6}$ 为 $[1,1,4,0,12,12]$，它的异或差分为 $[1,0,5,4,12,0]$，故操作执行完后，$a$ 序列变为 $[1,0,5,4,12,0]$。\n\n最终的 $a$ 序列为 $[1,0,5,4,12,0]$。\n\n### 数据范围与约定\n\n对于所有数据，保证 $1\\leq n\\leq 2.5\\times 10^5$，$1\\leq q\\leq 10^5$，$0\\leq a_i< 2^{30}$，$1\\leq l\\leq r\\leq n$，$1\\leq pos\\leq n$。\n\n| 子任务编号 |     $n\\leq$      |    $q\\leq$     | 特殊性质 | 分值 |   子任务依赖    |\n| :--------: | :--------------: | :------------: | :------: | :--: | :-------------: |\n|    $1$     |  $2\\times 10^3$  | $2\\times 10^3$ |    无    | $8$  |       无        |\n|    $2$     | $2.5\\times 10^5$ |     $10^5$     |    A     | $4$  |       无        |\n|    $3$     | $2.5\\times 10^5$ |     $10^5$     |    B     | $7$  |       无        |\n|    $4$     | $2.5\\times 10^5$ |     $10^5$     |    CD    | $13$ |       无        |\n|    $5$     | $2.5\\times 10^5$ |     $10^5$     |    DE    | $12$ |       无        |\n|    $6$     | $2.5\\times 10^5$ |     $10^5$     |    D     | $16$ |       $5$       |\n|    $7$     | $2.5\\times 10^5$ |     $10^5$     |    E     | $11$ |       $5$       |\n|    $8$     | $2.5\\times 10^5$ |     $10^5$     |    无    | $29$ | $1,2,3,4,5,6,7$ |\n\n特殊性质 A：$\\forall i\\geq 2, a_i=0$。\n\n特殊性质 B：$0\\leq a_i\\leq 1$。\n\n特殊性质 C：记序列 $a$ 中非零位置个数为 $c$，则 $c\\leq 100$。\n\n特殊性质 D：操作 $1$ 满足 $l=1$，$r=n$。\n\n特殊性质 E：没有操作 $2$。\n", "locale": "zh-CN"}}}
{"pid": "P10010", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "数学", "集训队互测", "2023", "爬山算法 Local search", "模拟退火", "随机调整", "线性规划", "概率论", "线性代数", "随机化"], "title": "[集训队互测 2023] Grievous Lady", "background": "对立从那灰暗的塔楼进入，逐步踏入这个扭曲的迷宫深处。\n\n对立的心突然绞痛起来。\n\n对立后退了一步，扑腾了一下便跪倒下来。\n\n未及碰到，灰黑的地板就突然崩裂瓦解，先一步向下坠落。\n\n先前收集的纷争碎片，连同塔楼本身，一同化作了一场倾盆大雨，包围在对立四周。\n\n异象骤起，对立的思维也陷入一片混乱。\n\n塔楼落入了先前的由光芒碎片组成的欢乐海洋，但对立却被纷争碎片紧紧地包裹着。\n\n在那由光芒和纷争碎片交错的风暴之中，对立所见的只有那些令人厌恶的纷争碎片。\n\n那枚世界尽头的记忆映入了对立的视野。\n\n面对着世界一点点地走向终结的景象，对立的理性在碎裂。\n\n对立意识到，一切美好的记忆不过是须臾，最终都会走向破灭。\n\n四周的碎片依旧在飞旋，对立试图看清那些玻璃碎片的变换。\n\n对立意识到，现在围绕着的那些碎片，正以最恐怖的方式运转。\n\n这个碎片风暴所带来的「忧郁度」，可以被简单地描述为外侧碎片的旋转速度之和乘上内侧碎片的旋转速度之和。\n\n一片玻璃碎片在外侧总是以一种速度正旋，而在内侧总是以另一种速度逆旋。\n\n每片碎片都是是来自不同世界的刹那记忆，故而其转速总可以认为是独立随机指定的。\n\n在残存无几的希望将尽未尽之时，对立只想知道，现在的碎片风暴的忧郁度，也就是最大可能的忧郁度，究竟是多少。", "description": "共有 $n$ 个元素，标号 $1\\sim n$，每个元素 $j$ 有两个正整数权值 $a_j,b_j$。\n\n你要确定一个 $[1,n]\\cap\\mathbb N$ 的子集 $S$，从而最大化\n\n$$\n\\left(\\sum_{k=1}^na_k[k\\in S]\\right)\\left(\\sum_{k=1}^nb_k[k\\notin S]\\right)\n$$\n\n这个问题显然不可做，因此**保证每个 $a_j,b_j$ 分别在 $[1,A]\\cap\\mathbb N,[1,B]\\cap\\mathbb N$ 内独立均匀随机生成**。\n\n现在给定 $n,A,B$ 和每个元素的两个权值 $(a_j,b_j)$，请求出这个最大的答案。", "inputFormat": "本题每个测试点中有多组测试数据。\n\n第一行四个整数，$T,n,A,B$，$T$ 表示该组数据内的数据组数，$n,A,B$ 表示该测试点内的所有数据均对应此 $n,A,B$。\n\n接下来每组数据占 $n$ 行，其中第 $j$ 行两个整数 $a_j,b_j$。\n\n保证 $a_j,b_j$ 在对应范围内独立均匀随机生成。", "outputFormat": "对于每组数据输出一行一个整数，表示其答案。\n\n注意这个答案可能很大，你可能需要使用 `__int128` 类型来进行中间存储与运算，并最后输出。注意你可能需要使用一些正确的输出方式。", "hint": "#### 输入输出样例\n\n**因为本题数据规模太大，直接提交评测会对评测机带来很大压力，本题将提供很多大样例；请尽量减少本题的提交次数。**\n\n请参见下发文件 `grievouslady*.in/ans`，共 $50$ 组，基本按照部分分的方法造。\n\n由于本题保证数据随机，不提供手搓样例。\n\n#### 数据范围与提示\n\n对于所有的数据，保证 $10\\le n\\le3000$，$10^4\\le A,B\\le10^{12}$，$1\\le T\\le50$。\n\n~~本题设置子任务，各子任务~~共 $100$ 个测试点。具体的测试点分布可以见下表。\n\n**本题在洛谷上的版本不设置子任务**。\n\n（**由于表格比较宽，洛谷上较难完整显示，你可能要使用题目页面的“展开”功能**）\n\n|测试点编号|$n$|$A$|$B$|测试点编号|$n$|$A$|$B$|测试点编号|$n$|$A$|$B$|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1\\sim2$|$=10$|$=10^4$|$=10^4$|$33\\sim34$|$=100$|$=10^4$|$=10^4$|$67\\sim68$|$=1000$|$=10^5$|$=10^{12}$|\n|$3\\sim4$|$=10$|$=10^9$|$=10^9$|$35\\sim36$|$=100$|$=10^5$|$=10^5$|$69\\sim70$|$=1000$|$=10^9$|$=10^9$|\n|$5\\sim6$|$=10$|$=10^{12}$|$=10^{12}$|$37\\sim38$|$=100$|$=10^5$|$=10^9$|$71\\sim72$|$=1000$|$=10^{12}$|$=10^{12}$|\n|$7\\sim8$|$=20$|$=10^4$|$=10^4$|$39\\sim40$|$=100$|$=10^9$|$=10^9$|$73\\sim74$|$=1500$|$=10^5$|$=10^{12}$|\n|$9\\sim10$|$=20$|$=10^9$|$=10^9$|$41\\sim42$|$=100$|$=10^{12}$|$=10^{12}$|$75\\sim76$|$=1500$|$=10^9$|$=10^9$|\n|$11\\sim12$|$=20$|$=10^{12}$|$=10^{12}$|$43\\sim44$|$=200$|$=10^5$|$=10^{12}$|$77\\sim78$|$=1500$|$=10^{12}$|$=10^{12}$|\n|$13\\sim14$|$=30$|$=10^4$|$=10^4$|$45\\sim46$|$=200$|$=10^9$|$=10^9$|$79\\sim80$|$=2000$|$=10^5$|$=10^{12}$|\n|$15\\sim16$|$=30$|$=10^9$|$=10^9$|$47\\sim48$|$=200$|$=10^{12}$|$=10^{12}$|$81\\sim82$|$=2000$|$=10^9$|$=10^9$|\n|$17\\sim18$|$=30$|$=10^{12}$|$=10^{12}$|$49\\sim50$|$=300$|$=10^5$|$=10^{12}$|$83\\sim84$|$=2000$|$=10^{12}$|$=10^{12}$|\n|$19\\sim20$|$=40$|$=10^4$|$=10^4$|$51\\sim52$|$=300$|$=10^9$|$=10^9$|$85\\sim86$|$=2500$|$=10^4$|$=10^9$|\n|$21\\sim22$|$=40$|$=10^9$|$=10^9$|$53\\sim54$|$=300$|$=10^{12}$|$=10^{12}$|$87\\sim88$|$=2500$|$=10^5$|$=10^{12}$|\n|$23\\sim24$|$=40$|$=10^{12}$|$=10^{12}$|$55\\sim56$|$=500$|$=10^5$|$=10^{12}$|$89\\sim90$|$=2500$|$=10^9$|$=10^9$|\n|$25\\sim26$|$=50$|$=10^4$|$=10^4$|$57\\sim58$|$=500$|$=10^9$|$=10^9$|$91\\sim92$|$=2500$|$=10^{12}$|$=10^{12}$|\n|$27\\sim28$|$=50$|$=10^4$|$=10^9$|$59\\sim60$|$=500$|$=10^{12}$|$=10^{12}$|$93\\sim94$|$=3000$|$=10^4$|$=10^9$|\n|$29\\sim30$|$=50$|$=10^9$|$=10^9$|$61\\sim62$|$=800$|$=10^5$|$=10^{12}$|$95\\sim96$|$=3000$|$=10^5$|$=10^{12}$|\n|$31\\sim32$|$=50$|$=10^{12}$|$=10^{12}$|$63\\sim64$|$=800$|$=10^9$|$=10^9$|$97\\sim98$|$=3000$|$=10^9$|$=10^9$|\n|||||$65\\sim66$|$=800$|$=10^{12}$|$=10^{12}$|$99\\sim100$|$=3000$|$=10^{12}$|$=10^{12}$|\n\n~~我们按如下方式布局各测试点~~：\n* ~~subtask $1$：$1\\sim12$，占 $\\rm12pts$~~。\n* ~~subtask $2$：$13\\sim32$，占 $\\rm20pts$~~。\n* ~~subtask $3$：$33\\sim36$，占 $\\rm4pts$~~。\n* ~~subtask $4$：$37\\sim48$，占 $\\rm12pts$~~。\n* ~~subtask $5$：$49\\sim50$，占 $\\rm2pts$~~。\n* ~~subtask $6$：$51\\sim60$，占 $\\rm10pts$~~。\n* ~~subtask $7$：$61\\sim72$，占 $\\rm12pts$~~。\n* ~~subtask $8$：$73\\sim84$，占 $\\rm12pts$~~。\n* ~~subtask $9$：$85\\sim92$，占 $\\rm8pts$~~。\n* ~~subtask $10$：$93\\sim100$，占 $\\rm8pts$~~。\n\n~~**本题不设置子任务依赖，因此请确保经样例测试后你的算法正确后再提交，以免卡评测机**。~~\n\n#### 后记\n\n这个世界——一切——都源于过去。过去的影像，哪怕是欢乐的记忆，就像是白昼过后的黑夜，渐渐导致了这份世界末日。\n\n泪水盈眶。对立的眼神转为一片黑暗。\n\n对立与这些玻璃起了共鸣，围绕于四周的回忆之壳开始崩裂。\n\n对立就身处其中，站在那炫目的光芒前方，已经没有任何情感了。\n\n扭曲的迷宫，也在对立的力量下，悉数损毁……\n\n时光逝去，对立变了。不再激情地收集回忆，而是近乎无意识地走在这世界之中，并不再抱有任何雄心壮志。\n\n如今，对立正在一个破旧坍塌的建筑旁行走着，旋转着某天在废墟中找到的太阳伞。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] Grievous Lady", "background": "对立从那灰暗的塔楼进入，逐步踏入这个扭曲的迷宫深处。\n\n对立的心突然绞痛起来。\n\n对立后退了一步，扑腾了一下便跪倒下来。\n\n未及碰到，灰黑的地板就突然崩裂瓦解，先一步向下坠落。\n\n先前收集的纷争碎片，连同塔楼本身，一同化作了一场倾盆大雨，包围在对立四周。\n\n异象骤起，对立的思维也陷入一片混乱。\n\n塔楼落入了先前的由光芒碎片组成的欢乐海洋，但对立却被纷争碎片紧紧地包裹着。\n\n在那由光芒和纷争碎片交错的风暴之中，对立所见的只有那些令人厌恶的纷争碎片。\n\n那枚世界尽头的记忆映入了对立的视野。\n\n面对着世界一点点地走向终结的景象，对立的理性在碎裂。\n\n对立意识到，一切美好的记忆不过是须臾，最终都会走向破灭。\n\n四周的碎片依旧在飞旋，对立试图看清那些玻璃碎片的变换。\n\n对立意识到，现在围绕着的那些碎片，正以最恐怖的方式运转。\n\n这个碎片风暴所带来的「忧郁度」，可以被简单地描述为外侧碎片的旋转速度之和乘上内侧碎片的旋转速度之和。\n\n一片玻璃碎片在外侧总是以一种速度正旋，而在内侧总是以另一种速度逆旋。\n\n每片碎片都是是来自不同世界的刹那记忆，故而其转速总可以认为是独立随机指定的。\n\n在残存无几的希望将尽未尽之时，对立只想知道，现在的碎片风暴的忧郁度，也就是最大可能的忧郁度，究竟是多少。", "description": "共有 $n$ 个元素，标号 $1\\sim n$，每个元素 $j$ 有两个正整数权值 $a_j,b_j$。\n\n你要确定一个 $[1,n]\\cap\\mathbb N$ 的子集 $S$，从而最大化\n\n$$\n\\left(\\sum_{k=1}^na_k[k\\in S]\\right)\\left(\\sum_{k=1}^nb_k[k\\notin S]\\right)\n$$\n\n这个问题显然不可做，因此**保证每个 $a_j,b_j$ 分别在 $[1,A]\\cap\\mathbb N,[1,B]\\cap\\mathbb N$ 内独立均匀随机生成**。\n\n现在给定 $n,A,B$ 和每个元素的两个权值 $(a_j,b_j)$，请求出这个最大的答案。", "inputFormat": "本题每个测试点中有多组测试数据。\n\n第一行四个整数，$T,n,A,B$，$T$ 表示该组数据内的数据组数，$n,A,B$ 表示该测试点内的所有数据均对应此 $n,A,B$。\n\n接下来每组数据占 $n$ 行，其中第 $j$ 行两个整数 $a_j,b_j$。\n\n保证 $a_j,b_j$ 在对应范围内独立均匀随机生成。", "outputFormat": "对于每组数据输出一行一个整数，表示其答案。\n\n注意这个答案可能很大，你可能需要使用 `__int128` 类型来进行中间存储与运算，并最后输出。注意你可能需要使用一些正确的输出方式。", "hint": "#### 输入输出样例\n\n**因为本题数据规模太大，直接提交评测会对评测机带来很大压力，本题将提供很多大样例；请尽量减少本题的提交次数。**\n\n请参见下发文件 `grievouslady*.in/ans`，共 $50$ 组，基本按照部分分的方法造。\n\n由于本题保证数据随机，不提供手搓样例。\n\n#### 数据范围与提示\n\n对于所有的数据，保证 $10\\le n\\le3000$，$10^4\\le A,B\\le10^{12}$，$1\\le T\\le50$。\n\n~~本题设置子任务，各子任务~~共 $100$ 个测试点。具体的测试点分布可以见下表。\n\n**本题在洛谷上的版本不设置子任务**。\n\n（**由于表格比较宽，洛谷上较难完整显示，你可能要使用题目页面的“展开”功能**）\n\n|测试点编号|$n$|$A$|$B$|测试点编号|$n$|$A$|$B$|测试点编号|$n$|$A$|$B$|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1\\sim2$|$=10$|$=10^4$|$=10^4$|$33\\sim34$|$=100$|$=10^4$|$=10^4$|$67\\sim68$|$=1000$|$=10^5$|$=10^{12}$|\n|$3\\sim4$|$=10$|$=10^9$|$=10^9$|$35\\sim36$|$=100$|$=10^5$|$=10^5$|$69\\sim70$|$=1000$|$=10^9$|$=10^9$|\n|$5\\sim6$|$=10$|$=10^{12}$|$=10^{12}$|$37\\sim38$|$=100$|$=10^5$|$=10^9$|$71\\sim72$|$=1000$|$=10^{12}$|$=10^{12}$|\n|$7\\sim8$|$=20$|$=10^4$|$=10^4$|$39\\sim40$|$=100$|$=10^9$|$=10^9$|$73\\sim74$|$=1500$|$=10^5$|$=10^{12}$|\n|$9\\sim10$|$=20$|$=10^9$|$=10^9$|$41\\sim42$|$=100$|$=10^{12}$|$=10^{12}$|$75\\sim76$|$=1500$|$=10^9$|$=10^9$|\n|$11\\sim12$|$=20$|$=10^{12}$|$=10^{12}$|$43\\sim44$|$=200$|$=10^5$|$=10^{12}$|$77\\sim78$|$=1500$|$=10^{12}$|$=10^{12}$|\n|$13\\sim14$|$=30$|$=10^4$|$=10^4$|$45\\sim46$|$=200$|$=10^9$|$=10^9$|$79\\sim80$|$=2000$|$=10^5$|$=10^{12}$|\n|$15\\sim16$|$=30$|$=10^9$|$=10^9$|$47\\sim48$|$=200$|$=10^{12}$|$=10^{12}$|$81\\sim82$|$=2000$|$=10^9$|$=10^9$|\n|$17\\sim18$|$=30$|$=10^{12}$|$=10^{12}$|$49\\sim50$|$=300$|$=10^5$|$=10^{12}$|$83\\sim84$|$=2000$|$=10^{12}$|$=10^{12}$|\n|$19\\sim20$|$=40$|$=10^4$|$=10^4$|$51\\sim52$|$=300$|$=10^9$|$=10^9$|$85\\sim86$|$=2500$|$=10^4$|$=10^9$|\n|$21\\sim22$|$=40$|$=10^9$|$=10^9$|$53\\sim54$|$=300$|$=10^{12}$|$=10^{12}$|$87\\sim88$|$=2500$|$=10^5$|$=10^{12}$|\n|$23\\sim24$|$=40$|$=10^{12}$|$=10^{12}$|$55\\sim56$|$=500$|$=10^5$|$=10^{12}$|$89\\sim90$|$=2500$|$=10^9$|$=10^9$|\n|$25\\sim26$|$=50$|$=10^4$|$=10^4$|$57\\sim58$|$=500$|$=10^9$|$=10^9$|$91\\sim92$|$=2500$|$=10^{12}$|$=10^{12}$|\n|$27\\sim28$|$=50$|$=10^4$|$=10^9$|$59\\sim60$|$=500$|$=10^{12}$|$=10^{12}$|$93\\sim94$|$=3000$|$=10^4$|$=10^9$|\n|$29\\sim30$|$=50$|$=10^9$|$=10^9$|$61\\sim62$|$=800$|$=10^5$|$=10^{12}$|$95\\sim96$|$=3000$|$=10^5$|$=10^{12}$|\n|$31\\sim32$|$=50$|$=10^{12}$|$=10^{12}$|$63\\sim64$|$=800$|$=10^9$|$=10^9$|$97\\sim98$|$=3000$|$=10^9$|$=10^9$|\n|||||$65\\sim66$|$=800$|$=10^{12}$|$=10^{12}$|$99\\sim100$|$=3000$|$=10^{12}$|$=10^{12}$|\n\n~~我们按如下方式布局各测试点~~：\n* ~~subtask $1$：$1\\sim12$，占 $\\rm12pts$~~。\n* ~~subtask $2$：$13\\sim32$，占 $\\rm20pts$~~。\n* ~~subtask $3$：$33\\sim36$，占 $\\rm4pts$~~。\n* ~~subtask $4$：$37\\sim48$，占 $\\rm12pts$~~。\n* ~~subtask $5$：$49\\sim50$，占 $\\rm2pts$~~。\n* ~~subtask $6$：$51\\sim60$，占 $\\rm10pts$~~。\n* ~~subtask $7$：$61\\sim72$，占 $\\rm12pts$~~。\n* ~~subtask $8$：$73\\sim84$，占 $\\rm12pts$~~。\n* ~~subtask $9$：$85\\sim92$，占 $\\rm8pts$~~。\n* ~~subtask $10$：$93\\sim100$，占 $\\rm8pts$~~。\n\n~~**本题不设置子任务依赖，因此请确保经样例测试后你的算法正确后再提交，以免卡评测机**。~~\n\n#### 后记\n\n这个世界——一切——都源于过去。过去的影像，哪怕是欢乐的记忆，就像是白昼过后的黑夜，渐渐导致了这份世界末日。\n\n泪水盈眶。对立的眼神转为一片黑暗。\n\n对立与这些玻璃起了共鸣，围绕于四周的回忆之壳开始崩裂。\n\n对立就身处其中，站在那炫目的光芒前方，已经没有任何情感了。\n\n扭曲的迷宫，也在对立的力量下，悉数损毁……\n\n时光逝去，对立变了。不再激情地收集回忆，而是近乎无意识地走在这世界之中，并不再抱有任何雄心壮志。\n\n如今，对立正在一个破旧坍塌的建筑旁行走着，旋转着某天在废墟中找到的太阳伞。", "locale": "zh-CN"}}}
{"pid": "P10011", "type": "P", "difficulty": 7, "samples": [], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["集训队互测", "2023"], "title": "[集训队互测 2023] 网格图最大流计数", "background": "", "description": "给定 $n,m,k$，和两个正整数序列 $a_{1...n},b_{1...m}$，以及一个 $k\\times k$ 的 $01$ 矩阵 $s_{1...k,1...k}$。\n\n考虑一张有向图 $G=(V,E)$，其中 $V=\\{S,T\\}\\cup(\\{0,1\\}\\times ([1,k]\\cap\\mathbb{Z})^2)$，而 $E=E_1\\cup E_2\\cup E_3$ 由三部分组成：\n\n- $E_1=\\{(S,(0,1,a_i)) \\mid 1\\le i\\le n\\}\\cup\\{((1,k,b_i),T)\\mid 1\\le i\\le m\\}$\n- $E_2=\\{((1,i,j),(0,i+1,j))\\mid1\\le i<k,1\\le j\\le k\\}\\cup \\{(1,i,j),(0,i,j+1))\\mid1\\le i\\le k,1\\le j<k\\}$\n- $E_3=\\{((0,i,j),(1,i,j))\\mid 1\\le i,j\\le k,s_{i,j}=1\\}$\n\n简单来说，你可以看成每个格子 $(i,j),1\\le i,j\\le k$ 被拆成了一个入点 $(0,i,j)$ 和一个出点 $(1,i,j)$。$E_1$ 描述了 $S,T$ 与这些点之间的边，由 $a,b$ 决定；$E_2$ 描述了每个格子的出点连向它上方和右方格子的入点的边；$E_3$ 描述了每个格子的入点连向出点的边，由 $s$ 决定。\n\n现在我们将 $G$ 看成一个网络，每条边的容量是 $1$。你需要求出以 $S$ 为源点，以 $T$ 为汇点的最大流，以及最大流的数量（两个流被认为是不同的，当且仅当存在一条边在两个流中的流量不同）。", "inputFormat": "第一行三个正整数 $n,m,k$。\n\n第二行 $n$ 个正整数 $1\\le a_1<a_2<...<a_n\\le k$。\n\n第三行 $m$ 个正整数 $1\\le b_1<b_2<...<b_m\\le k$。\n\n接下来 $k$ 行，每行一个长度为 $k$ 的 01 字符串，表示矩阵 $s$。", "outputFormat": "输出一行两个非负整数，分别表示最大流和最大流的数量，后者对 $10^9+7$ 取模。", "hint": "样例见下发文件。\n\n对于全部数据，$1\\le n,m\\le k\\le400$。\n\n| 子任务编号 | $n\\le$ | $k\\le$ |       特殊性质       | 子任务分值 |\n| :--------: | :----: | :----: | :------------------: | :--------: |\n|    $1$     |  $7$   |  $7$   |          无          |    $5$     |\n|    $2$     |  $18$  |  $18$  |          无          |    $5$     |\n|    $3$     |  $10$  | $400$  |          无          |    $10$    |\n|    $4$     | $100$  | $400$  |          无          |    $25$    |\n|    $5$     | $400$  | $400$  | $n=m$ 且最大流为 $n$ |    $10$    |\n|    $6$     | $400$  | $400$  |     最大流为 $n$     |    $25$    |\n|    $7$     | $400$  | $400$  |          无          |    $20$    |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 网格图最大流计数", "background": "", "description": "给定 $n,m,k$，和两个正整数序列 $a_{1...n},b_{1...m}$，以及一个 $k\\times k$ 的 $01$ 矩阵 $s_{1...k,1...k}$。\n\n考虑一张有向图 $G=(V,E)$，其中 $V=\\{S,T\\}\\cup(\\{0,1\\}\\times ([1,k]\\cap\\mathbb{Z})^2)$，而 $E=E_1\\cup E_2\\cup E_3$ 由三部分组成：\n\n- $E_1=\\{(S,(0,1,a_i)) \\mid 1\\le i\\le n\\}\\cup\\{((1,k,b_i),T)\\mid 1\\le i\\le m\\}$\n- $E_2=\\{((1,i,j),(0,i+1,j))\\mid1\\le i<k,1\\le j\\le k\\}\\cup \\{(1,i,j),(0,i,j+1))\\mid1\\le i\\le k,1\\le j<k\\}$\n- $E_3=\\{((0,i,j),(1,i,j))\\mid 1\\le i,j\\le k,s_{i,j}=1\\}$\n\n简单来说，你可以看成每个格子 $(i,j),1\\le i,j\\le k$ 被拆成了一个入点 $(0,i,j)$ 和一个出点 $(1,i,j)$。$E_1$ 描述了 $S,T$ 与这些点之间的边，由 $a,b$ 决定；$E_2$ 描述了每个格子的出点连向它上方和右方格子的入点的边；$E_3$ 描述了每个格子的入点连向出点的边，由 $s$ 决定。\n\n现在我们将 $G$ 看成一个网络，每条边的容量是 $1$。你需要求出以 $S$ 为源点，以 $T$ 为汇点的最大流，以及最大流的数量（两个流被认为是不同的，当且仅当存在一条边在两个流中的流量不同）。", "inputFormat": "第一行三个正整数 $n,m,k$。\n\n第二行 $n$ 个正整数 $1\\le a_1<a_2<...<a_n\\le k$。\n\n第三行 $m$ 个正整数 $1\\le b_1<b_2<...<b_m\\le k$。\n\n接下来 $k$ 行，每行一个长度为 $k$ 的 01 字符串，表示矩阵 $s$。", "outputFormat": "输出一行两个非负整数，分别表示最大流和最大流的数量，后者对 $10^9+7$ 取模。", "hint": "样例见下发文件。\n\n对于全部数据，$1\\le n,m\\le k\\le400$。\n\n| 子任务编号 | $n\\le$ | $k\\le$ |       特殊性质       | 子任务分值 |\n| :--------: | :----: | :----: | :------------------: | :--------: |\n|    $1$     |  $7$   |  $7$   |          无          |    $5$     |\n|    $2$     |  $18$  |  $18$  |          无          |    $5$     |\n|    $3$     |  $10$  | $400$  |          无          |    $10$    |\n|    $4$     | $100$  | $400$  |          无          |    $25$    |\n|    $5$     | $400$  | $400$  | $n=m$ 且最大流为 $n$ |    $10$    |\n|    $6$     | $400$  | $400$  |     最大流为 $n$     |    $25$    |\n|    $7$     | $400$  | $400$  |          无          |    $20$    |", "locale": "zh-CN"}}}
{"pid": "P10012", "type": "P", "difficulty": 7, "samples": [["10 10 0 0\n[)]]((()][\n2 10 6\n1 6 6\n1 3 6\n2 5 7\n2 3 3\n2 10 4\n1 7 1\n2 4 4\n2 4 2\n1 5 5\n", "1\n0\n0\n1\n0\n0\n"], ["20 20 0 0\n[)])[)[](()((]]([[)[\n2 9 3\n2 8 10\n1 4 15\n1 5 9\n1 16 10\n1 18 20\n1 1 8\n2 8 9\n1 2 16\n1 10 13\n1 16 9\n1 8 1\n2 20 7\n2 14 11\n1 3 16\n1 15 18\n1 6 4\n2 10 7\n2 2 4\n2 13 2\n", "2\n0\n0\n1\n2\n1\n0\n4\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["集训队互测", "2023"], "title": "[集训队互测 2023] 落日珊瑚", "background": "", "description": "给一个长度为 $n$、包含方括号和圆括号的括号串，定义一个串 $S$ 合法，当且仅当以下几种情况之一：\n\n1.  $S$ 为空串；\n1.  $S= [T]$ 且 $T$ 合法；\n1.  $S= (T)$ 且 $T$ 合法；\n1.  $S=TU$ 且 $T, U$ 合法。\n\n比如 ```()```，```[()]``` 都是一个合法的括号串，但 ```[()]())``` 不是。\n\n定义一个操作叫选择一个区间 $[l, r]$，并把所有在区间里的字符从方括号变圆括号，从圆括号变方括号。\n\n定义一个括号串的权值 $val(S)$ 为：如果这个括号串能通过操作变成合法，就是最小的操作次数；否则是 $0$。\n\n给出 $q$ 次修改查询，有以下两种可能。\n\n1.  修改，给出一个区间 $[l, r]$ 把所有在区间里的字符从方括号变圆括号，从圆括号变方括号。\n2.  查询，给出一个区间 $[l, r]$，求 $\\sum_{[l', r'] \\in [l, r]} val(s[l', r'])$。", "inputFormat": "第一行四个整数 $n, q, T, subtaskid$，分别表示字符串长度，操作次数，强制在线的参数，子任务编号。\n\n接下来一行一个长度为 $n$ 的字符串。\n\n接下来 $q$ 行，每行三个数 $opt, L, R$，表示一次操作。\n\n强制在线，真实的 $l = \\min((L + T \\cdot lastans) \\bmod n + 1, (R + T \\cdot lastans) \\bmod n + 1)$，$r = \\max((L + T \\cdot lastans) \\bmod n + 1, (R + T \\cdot lastans) \\bmod n + 1)$ 其中 $lastans$ 是上一次询问的答案，如果没有上次询问则为 $0$。\n\n**请注意，即使是离线的部分分，也有可能 $L \\neq l$，$R \\neq r$**。", "outputFormat": "若干行，每次询问输出一个答案。", "hint": "对于所有数据，$1 \\le n, q \\le 5\\cdot 10^5$，$0 \\le T \\le 10^9$，$1 \\le l, r \\le n$，$1 \\le opt \\le 2$。\n\n| 子任务编号 |  $n, q \\le $  | 特殊性质 | 分值 |\n| :--------: | :-----------: | :------: | :--: |\n|     1      |      $100$      |    E     |  5   |\n|     2      |     $6000$      |    E     |  5   |\n|     3      |    $10^5$     |    AE    |  5   |\n|     4      | $2\\cdot 10^5$ |    BE    |  5   |\n|     5      | $2\\cdot 10^5$ |   CDE    |  5   |\n|     6      | $2\\cdot 10^5$ |    CE    |  10  |\n|     7      | $2\\cdot 10^5$ |    DE    |  10  |\n|     8      | $2\\cdot 10^5$ |    E     |  10  |\n|     9      | $2\\cdot 10^5$ |    无    |  20  |\n|     10     | $5\\cdot 10^5$ |    无    |  25  |\n\n\n\nA 性质：每个位置有 $\\frac{1}{4}$ 的概率为方圆左右括号。\n\nB 性质：保证没有修改。\n\nC 性质：保证修改为单点修改。\n\nD 性质：保证查询区间 $[l, r]$ 满足 $S[l, r]$ 经过若干次操作可以变成合法串，且不存在另一个 $k \\in [l, r)$，使得 $S[l, k]$ 可以经过若干次操作变成合法串。\n\nE 性质：保证 $T = 0$，即可以离线。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 落日珊瑚", "background": "", "description": "给一个长度为 $n$、包含方括号和圆括号的括号串，定义一个串 $S$ 合法，当且仅当以下几种情况之一：\n\n1.  $S$ 为空串；\n1.  $S= [T]$ 且 $T$ 合法；\n1.  $S= (T)$ 且 $T$ 合法；\n1.  $S=TU$ 且 $T, U$ 合法。\n\n比如 ```()```，```[()]``` 都是一个合法的括号串，但 ```[()]())``` 不是。\n\n定义一个操作叫选择一个区间 $[l, r]$，并把所有在区间里的字符从方括号变圆括号，从圆括号变方括号。\n\n定义一个括号串的权值 $val(S)$ 为：如果这个括号串能通过操作变成合法，就是最小的操作次数；否则是 $0$。\n\n给出 $q$ 次修改查询，有以下两种可能。\n\n1.  修改，给出一个区间 $[l, r]$ 把所有在区间里的字符从方括号变圆括号，从圆括号变方括号。\n2.  查询，给出一个区间 $[l, r]$，求 $\\sum_{[l', r'] \\in [l, r]} val(s[l', r'])$。", "inputFormat": "第一行四个整数 $n, q, T, subtaskid$，分别表示字符串长度，操作次数，强制在线的参数，子任务编号。\n\n接下来一行一个长度为 $n$ 的字符串。\n\n接下来 $q$ 行，每行三个数 $opt, L, R$，表示一次操作。\n\n强制在线，真实的 $l = \\min((L + T \\cdot lastans) \\bmod n + 1, (R + T \\cdot lastans) \\bmod n + 1)$，$r = \\max((L + T \\cdot lastans) \\bmod n + 1, (R + T \\cdot lastans) \\bmod n + 1)$ 其中 $lastans$ 是上一次询问的答案，如果没有上次询问则为 $0$。\n\n**请注意，即使是离线的部分分，也有可能 $L \\neq l$，$R \\neq r$**。", "outputFormat": "若干行，每次询问输出一个答案。", "hint": "对于所有数据，$1 \\le n, q \\le 5\\cdot 10^5$，$0 \\le T \\le 10^9$，$1 \\le l, r \\le n$，$1 \\le opt \\le 2$。\n\n| 子任务编号 |  $n, q \\le $  | 特殊性质 | 分值 |\n| :--------: | :-----------: | :------: | :--: |\n|     1      |      $100$      |    E     |  5   |\n|     2      |     $6000$      |    E     |  5   |\n|     3      |    $10^5$     |    AE    |  5   |\n|     4      | $2\\cdot 10^5$ |    BE    |  5   |\n|     5      | $2\\cdot 10^5$ |   CDE    |  5   |\n|     6      | $2\\cdot 10^5$ |    CE    |  10  |\n|     7      | $2\\cdot 10^5$ |    DE    |  10  |\n|     8      | $2\\cdot 10^5$ |    E     |  10  |\n|     9      | $2\\cdot 10^5$ |    无    |  20  |\n|     10     | $5\\cdot 10^5$ |    无    |  25  |\n\n\n\nA 性质：每个位置有 $\\frac{1}{4}$ 的概率为方圆左右括号。\n\nB 性质：保证没有修改。\n\nC 性质：保证修改为单点修改。\n\nD 性质：保证查询区间 $[l, r]$ 满足 $S[l, r]$ 经过若干次操作可以变成合法串，且不存在另一个 $k \\in [l, r)$，使得 $S[l, k]$ 可以经过若干次操作变成合法串。\n\nE 性质：保证 $T = 0$，即可以离线。", "locale": "zh-CN"}}}
{"pid": "P10013", "type": "P", "difficulty": 6, "samples": [["5\n1 1 3 2\n3 5 4 4 1\n", "18 27 27 15 15 \n"], ["5\n1 1 3 1\n1 2 3 4 5\n", "12 42 32 52 42\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["集训队互测", "2023", "动态规划优化", "树形 DP"], "title": "[集训队互测 2023] Tree Topological Order Counting", "background": "", "description": "给定一颗 $n$ 个点的有根树，$1$ 是根，记 $u$ 的父亲是 $fa_u$。另给出一长度为 $n$ 的权值序列 $b$。\n\n称一个长度为 $n$ 的排列 $a$ 为这颗树的合法拓扑序，当且仅当 $\\forall 2 \\le u \\le n,a_u > a_{fa_u}$。\n\n对每个点 $u$，定义 $f(u)$ 为，在所有这颗树的合法拓扑序中，$b_{a_u}$ 之和。\n\n现在对 $1 \\le u \\le n$，求 $f(u) \\bmod 10^9+7$。", "inputFormat": "第一行一个整数 $n$ 表示树的点数。\n\n第二行 $n-1$ 个整数，第 $i$ 个表示 $fa_{i+1}$，描述树的结构。\n\n第三行 $n$ 个整数，第 $i$ 个表示 $b_i$，描述权值序列。", "outputFormat": "一行 $n$ 个整数，第 $i$ 个表示 $f(i) \\bmod 10^9+7$。", "hint": "| Subtask | $n \\le$ | 特殊限制 | 分值 |\n| :-----: | :-----: | :------: | :--: |\n|   $1$   |  $10$   |    无    | $5$  |\n|   $2$   |  $20$   |    无    | $10$ |\n|   $3$   |  $100$  |    无    | $15$ |\n|   $4$   |  $350$  |    无    | $15$ |\n|   $5$   | $3000$  |    A     | $15$ |\n|   $6$   | $3000$  |    无    | $20$ |\n|   $7$   | $5000$  |    无    | $20$ |\n\n特殊限制 A：$\\forall 1 \\le i \\le n,b_i=i$。\n\n对于所有数据：$2 \\le n \\le 5000$，$1 \\le fa_i < i$，$0 \\le b_i < 10^9+7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] Tree Topological Order Counting", "background": "", "description": "给定一颗 $n$ 个点的有根树，$1$ 是根，记 $u$ 的父亲是 $fa_u$。另给出一长度为 $n$ 的权值序列 $b$。\n\n称一个长度为 $n$ 的排列 $a$ 为这颗树的合法拓扑序，当且仅当 $\\forall 2 \\le u \\le n,a_u > a_{fa_u}$。\n\n对每个点 $u$，定义 $f(u)$ 为，在所有这颗树的合法拓扑序中，$b_{a_u}$ 之和。\n\n现在对 $1 \\le u \\le n$，求 $f(u) \\bmod 10^9+7$。", "inputFormat": "第一行一个整数 $n$ 表示树的点数。\n\n第二行 $n-1$ 个整数，第 $i$ 个表示 $fa_{i+1}$，描述树的结构。\n\n第三行 $n$ 个整数，第 $i$ 个表示 $b_i$，描述权值序列。", "outputFormat": "一行 $n$ 个整数，第 $i$ 个表示 $f(i) \\bmod 10^9+7$。", "hint": "| Subtask | $n \\le$ | 特殊限制 | 分值 |\n| :-----: | :-----: | :------: | :--: |\n|   $1$   |  $10$   |    无    | $5$  |\n|   $2$   |  $20$   |    无    | $10$ |\n|   $3$   |  $100$  |    无    | $15$ |\n|   $4$   |  $350$  |    无    | $15$ |\n|   $5$   | $3000$  |    A     | $15$ |\n|   $6$   | $3000$  |    无    | $20$ |\n|   $7$   | $5000$  |    无    | $20$ |\n\n特殊限制 A：$\\forall 1 \\le i \\le n,b_i=i$。\n\n对于所有数据：$2 \\le n \\le 5000$，$1 \\le fa_i < i$，$0 \\le b_i < 10^9+7$。", "locale": "zh-CN"}}}
{"pid": "P10014", "type": "P", "difficulty": 7, "samples": [["3 1\n2\n1 5\n3\n1 2 3\n1\n3\n", "Kaguya\nLily\nKaguya\n"], ["4 2\n2\n1 2\n2\n1 3\n3\n5 6 7\n1\n3\n", "Kaguya\nLily\nKaguya\nKaguya\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "集训队互测", "2023"], "title": "[集训队互测 2023] 茧", "background": "", "description": "Lily 是一个有趣的女孩子。她经常和 Kaguya 玩一些奇怪的游戏。\n\n今天她们在玩一个名为 nim 的游戏。具体地，nim 游戏的规则如下：\n\n- 有若干排数目已知的棋子，两人轮流从任意一排移除任意正整数枚棋子。\n- Lily 先手，无法操作者负，即移除最后一枚棋子者获胜。\n\n因为其最优策略非常简单，所以几局过后，她们就开始感到无趣了。于是，她们在原有规则的基础上增加了一条规则：\n\n- 在一排 $x$ 枚棋子中可以移除 $y$ 枚，当且仅当 $y^k \\le x$。\n\n这下游戏变得有趣了。不过，由于策略比较复杂，Lily 在计算的时候常常感到力不从心。\n\n可以证明，这个游戏的任意一个局面都满足：要么 Lily 有必胜策略，要么 Kaguya 有必胜策略。\n\n于是，Lily 想请你编写一个程序来计算某个局面下谁有必胜策略（Lily 总是先手），以便复盘时分析哪次操作失误了。\n\n由于求知欲旺盛的 Lily 可能会对局面进行比较细致的分析，所以你需要回答她的多次询问。\n\n由于所有局面都是复盘同一局游戏时衍生出来的，所以所有询问的参数 $k$ 都相同。\n\n**本题询问的局面形式比较特殊，详见输入格式。**", "inputFormat": "输入的第一行包含两个整数 $t, k$，分别表示询问次数和操作中的参数。\n\n接下来依次输入每次询问，对于每次询问：\n\n输入的第一行包含一个整数 $n$。\n\n输入的第二行包含 $n$ 个整数 $a_1, \\dots, a_n$。\n\n$(n, a_{1 \\dots n})$ 表示有 $\\sum a_i$ 排棋子，各排所含棋子数分别为 $1 \\dots a_1, 1 \\dots a_2, \\dots, 1 \\dots a_n$。\n\n如果你对博弈论比较熟悉的话，不难发现题意可以转化为：\n\n- 记一排 $x$ 个棋子的 [Grundy value](https://en.wikipedia.org/wiki/Sprague%E2%80%93Grundy_theorem) 为 $g(x)$，设 $h(x)$ 为 $g(x)$ 的前缀异或和，求 $h(a_1) \\dots h(a_n)$ 的异或和是否为 $0$。", "outputFormat": "对于每次询问输出一行一个字符串。\n\n- 若 Lily 有必胜策略，输出 `Lily`；\n- 若 Kaguya 有必胜策略，输出 `Kaguya`。", "hint": "样例三、四、五见下发文件。\n\n对于所有测试数据保证：$1 \\le k \\le 5$，$1 \\le n, \\sum n \\le 10^5$，$1 \\le a_i \\lt 2^{60}$。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | $n$                        | $k$             | $a_i$          | 特殊性质 | 分值 |\n| ---------- | -------------------------- | --------------- | -------------- | -------- | ---- |\n| 1          | $\\sum n \\le 10^5$          | $k = 1$         | $a_i < 2^{60}$ |          | $5$  |\n| 2          | $\\sum n \\le 10^5$          | $2 \\le k \\le 5$ | $a_i < 2^{16}$ |          | $5$  |\n| 3          | $\\sum n \\le 10^5$          | $2 \\le k \\le 5$ | $a_i < 2^{22}$ |          | $10$ |\n| 4          | $\\sum n \\le 10^3$，$n = 2$ | $2 \\le k \\le 3$ | $a_i < 2^{32}$ | A        | $10$ |\n| 5          | $\\sum n \\le 10^3$          | $2 \\le k \\le 5$ | $a_i < 2^{32}$ | A        | $10$ |\n| 6          | $\\sum n \\le 10^5$          | $k = 2$         | $a_i < 2^{60}$ | A        | $10$ |\n| 7          | $\\sum n \\le 10^5$          | $k = 3$         | $a_i < 2^{60}$ | A        | $10$ |\n| 8          | $\\sum n \\le 10^3$          | $k = 2$         | $a_i < 2^{32}$ |          | $10$ |\n| 9          | $\\sum n \\le 10^3$          | $k = 3$         | $a_i < 2^{32}$ |          | $10$ |\n| 10         | $\\sum n \\le 10^5$          | $1 \\le k \\le 5$ | $a_i < 2^{60}$ |          | $20$ |\n\n特殊性质 A：保证 $2 \\mid n$，且 $a_{2k - 1} = a_{2k} - 1 \\pod{1 \\le k \\le \\frac n 2}$。\n\n提示：如果你得到了预期之外的 TLE，你或许可以尝试优化你的时间复杂度。\n\n> 微调了题面里的几处用词（）\n>\n> 原题面请以 QOJ 为准（）", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 茧", "background": "", "description": "Lily 是一个有趣的女孩子。她经常和 Kaguya 玩一些奇怪的游戏。\n\n今天她们在玩一个名为 nim 的游戏。具体地，nim 游戏的规则如下：\n\n- 有若干排数目已知的棋子，两人轮流从任意一排移除任意正整数枚棋子。\n- Lily 先手，无法操作者负，即移除最后一枚棋子者获胜。\n\n因为其最优策略非常简单，所以几局过后，她们就开始感到无趣了。于是，她们在原有规则的基础上增加了一条规则：\n\n- 在一排 $x$ 枚棋子中可以移除 $y$ 枚，当且仅当 $y^k \\le x$。\n\n这下游戏变得有趣了。不过，由于策略比较复杂，Lily 在计算的时候常常感到力不从心。\n\n可以证明，这个游戏的任意一个局面都满足：要么 Lily 有必胜策略，要么 Kaguya 有必胜策略。\n\n于是，Lily 想请你编写一个程序来计算某个局面下谁有必胜策略（Lily 总是先手），以便复盘时分析哪次操作失误了。\n\n由于求知欲旺盛的 Lily 可能会对局面进行比较细致的分析，所以你需要回答她的多次询问。\n\n由于所有局面都是复盘同一局游戏时衍生出来的，所以所有询问的参数 $k$ 都相同。\n\n**本题询问的局面形式比较特殊，详见输入格式。**", "inputFormat": "输入的第一行包含两个整数 $t, k$，分别表示询问次数和操作中的参数。\n\n接下来依次输入每次询问，对于每次询问：\n\n输入的第一行包含一个整数 $n$。\n\n输入的第二行包含 $n$ 个整数 $a_1, \\dots, a_n$。\n\n$(n, a_{1 \\dots n})$ 表示有 $\\sum a_i$ 排棋子，各排所含棋子数分别为 $1 \\dots a_1, 1 \\dots a_2, \\dots, 1 \\dots a_n$。\n\n如果你对博弈论比较熟悉的话，不难发现题意可以转化为：\n\n- 记一排 $x$ 个棋子的 [Grundy value](https://en.wikipedia.org/wiki/Sprague%E2%80%93Grundy_theorem) 为 $g(x)$，设 $h(x)$ 为 $g(x)$ 的前缀异或和，求 $h(a_1) \\dots h(a_n)$ 的异或和是否为 $0$。", "outputFormat": "对于每次询问输出一行一个字符串。\n\n- 若 Lily 有必胜策略，输出 `Lily`；\n- 若 Kaguya 有必胜策略，输出 `Kaguya`。", "hint": "样例三、四、五见下发文件。\n\n对于所有测试数据保证：$1 \\le k \\le 5$，$1 \\le n, \\sum n \\le 10^5$，$1 \\le a_i \\lt 2^{60}$。\n\n每个子任务的具体限制见下表：\n\n| 子任务编号 | $n$                        | $k$             | $a_i$          | 特殊性质 | 分值 |\n| ---------- | -------------------------- | --------------- | -------------- | -------- | ---- |\n| 1          | $\\sum n \\le 10^5$          | $k = 1$         | $a_i < 2^{60}$ |          | $5$  |\n| 2          | $\\sum n \\le 10^5$          | $2 \\le k \\le 5$ | $a_i < 2^{16}$ |          | $5$  |\n| 3          | $\\sum n \\le 10^5$          | $2 \\le k \\le 5$ | $a_i < 2^{22}$ |          | $10$ |\n| 4          | $\\sum n \\le 10^3$，$n = 2$ | $2 \\le k \\le 3$ | $a_i < 2^{32}$ | A        | $10$ |\n| 5          | $\\sum n \\le 10^3$          | $2 \\le k \\le 5$ | $a_i < 2^{32}$ | A        | $10$ |\n| 6          | $\\sum n \\le 10^5$          | $k = 2$         | $a_i < 2^{60}$ | A        | $10$ |\n| 7          | $\\sum n \\le 10^5$          | $k = 3$         | $a_i < 2^{60}$ | A        | $10$ |\n| 8          | $\\sum n \\le 10^3$          | $k = 2$         | $a_i < 2^{32}$ |          | $10$ |\n| 9          | $\\sum n \\le 10^3$          | $k = 3$         | $a_i < 2^{32}$ |          | $10$ |\n| 10         | $\\sum n \\le 10^5$          | $1 \\le k \\le 5$ | $a_i < 2^{60}$ |          | $20$ |\n\n特殊性质 A：保证 $2 \\mid n$，且 $a_{2k - 1} = a_{2k} - 1 \\pod{1 \\le k \\le \\frac n 2}$。\n\n提示：如果你得到了预期之外的 TLE，你或许可以尝试优化你的时间复杂度。\n\n> 微调了题面里的几处用词（）\n>\n> 原题面请以 QOJ 为准（）", "locale": "zh-CN"}}}
{"pid": "P10015", "type": "P", "difficulty": 7, "samples": [["2\n1 2 3 3\n2 1 4 4\n", "01\n2\n"], ["4\n1 1 5 5\n2 2 6 6\n3 3 7 7\n4 4 8 8\n", "0000\n2\n"], ["2\n1 1 4 4\n2 2 3 3\n", "00\n2\n"], ["3\n1 2 4 5\n2 3 5 6\n3 1 6 4\n", "-1\n0\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["集训队互测", "2023"], "title": "[集训队互测 2023] 左蓝右红", "background": "小 S 是一个喜欢音游的女孩子。\n\n2077 年 7 月 7 日，某三维立体音乐游戏的 20.7.7 版本更新了一个塞满直角蛇的谱面 Tnemitnep [Beyond 18+]。但是当小 S 开始游玩这个谱面之后发现，由于游戏 bug，所有的蛇的色彩指示都没了……\n\n但是小 S 作为 ptt 20.77 的 18 星高端玩家，首个理论值这首曲目的位置她势在必得，因此她不想等游戏开发者修复 bug。她决定：通过这个游戏的机制自行计算出所有蛇原本的颜色！\n\n不幸的是，小 S 经过一些简单的推理，发现这个游戏的机制并不足以唯一确定所有蛇的颜色。因此小 S 首先希望通过这个游戏的“左蓝右红”规则计算出一种反手尽量少的染色可能性；同时计算出不同的染色方案数，以获知自己在最坏情况下需要尝试多少次才能正确地接住所有蛇。\n\n小 S 将这个问题抽象成了一个 OI 问题，可是小 S 并不是很会 OI，于是她找到了即将参加 IOI 2024 的你。你能帮助小 S 在别人都还在莫名其妙红蛇 Track Lost 的时候拿下 Tnemitnep BYD 的首杀吗？", "description": "在平面直角坐标系上给定 $n$ 个矩形，形成若干个交点，每个矩形的所有边都平行于坐标轴。**保证没有两个矩形的两条边共线。**\n\n矩形之间会形成若干个交点，每一个矩形都被它上面的交点分成若干段。定义属于一个矩形上的**一段**是该矩形上相邻的两个交点之间的部分。也就是说一个矩形上如果有 $n$ 个交点，就会被划分成 $n$ 段。\n\n现在将每一个矩形上的每一段染色为蓝色或红色。要求：\n\n- 与同一个交点相邻的**同属于一个矩形的**两段不同色；\n- 所有红线形成若干互不相交的封闭曲线；\n- 所有蓝线形成若干互不相交的封闭曲线。\n\n定义两个图形 $R,B$：\n\n- $R$ 为删去所有蓝线后，所有被**奇数个**红色封闭曲线包含的点组成的集合；\n- $B$ 为删去所有红线后，所有被**奇数个**蓝色封闭曲线包含的点组成的集合。\n\n一个方案合法当且仅当它满足上述所有条件，并且**使得 $R\\cap B$ 里面只有有限个点**。\n\n**如果无法理解上述定义，可以参考样例解释。**\n\n你需要分别求出：\n\n- 字典序最小的合法染色方案（字典序在输出格式里面有定义）。\n- 合法染色方案数，对 $20,051,131$（质数）取模。两个染色方案不同当且仅当存在一段，在一种方案中被染成红色，在另一种方案中被染成蓝色。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行 4 个整数 $x_{1,i},y_{1,i},x_{2,i},y_{2,i}$，前两个表示左下角坐标，后两个表示右上角坐标。", "outputFormat": "第一行输出字典序最小的合法方案：如果无解，输出一行 `-1`；否则输出一个长度为 $n$ 的 0/1 串。如果在你的方案中，按输入顺序给出的第 $i$ 个矩形的左下角是红色，则你输出的第 $i$ 个整数应该是 $0$；否则应该是 $1$。可以证明给定这些数之后能够唯一确定整个染色方案。如果有多解，你输出的解必须使得**上面描述的 01 序列字典序最小**。\n\n第二行输出合法染色方案数，对 $20,051,131$ 取模。无解时应输出 $0$。", "hint": "样例 5、6、7 见附件。\n\n---\n\n样例 1 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pnklrf6w.png?x-oss-process=image/resize,m_lfit,h_250,w_750)\n\n如图是给定的矩形在平面直角坐标系上的形态。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wy02h10g.png?x-oss-process=image/resize,m_lfit,h_250,w_750)\n\n如图，标出颜色的地方是属于第 1 个矩形的两段。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aqhxc9mh.png?x-oss-process=image/resize,m_lfit,h_250,w_750)\n\n如图，标出颜色的地方是属于第 2 个矩形的两段。按照上述图片给出的颜色进行染色可以得到样例输出中给出的合法方案：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kxybwupj.png?x-oss-process=image/resize,m_lfit,h_250)\n\n如下图，左侧方案是不合法的，因为与用圈标出的交点相邻的同属于一个矩形的两段同色；右侧方案也是不合法的，因为 $R$ 与 $B$ 交在图中的紫色正方形内，$R\\cap B$ 包含无限多个点。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3pwpnuap.png?x-oss-process=image/resize,m_lfit,h_250)\n\n如下方案是合法的，但是对应字符串 `10` 不是字典序最小的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bbo2v7ko.png?x-oss-process=image/resize,m_lfit,h_250)\n\n---\n\n样例 2 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ukggac8.png?x-oss-process=image/resize,m_lfit,h_250)\n\n左侧的图为给定的所有矩形。\n\n中间的图表示对应的染色方案。每一个矩形都包含 $6$ 段，并且满足与任何一个交点相邻的同属于一个矩形的两段不同色。\n\n右侧的图中，用红色区域标出 $R$ 的范围，蓝色区域标出 $B$ 的范围。两图形的交只包含 $12$ 个点。\n\n---\n\n样例 3 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/si28rfhb.png?x-oss-process=image/resize,m_lfit,h_250)\n\n如图，该样例中，因为环内部的部分被 $2$ 条红色封闭曲线包含，$2$ 是偶数，所以环内部不属于 $R$，$R$ 形成一个环。\n\n---\n\n数据范围：\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 2\\times 10^5$，$x_{1,i}<x_{2,i}$，$y_{1,i}<y_{2,i}$，$\\{x_{i,j}|1\\leq i\\leq 2,1\\leq j\\leq n\\}=\\{y_{i,j}|1\\leq i\\leq 2,1\\leq j\\leq n\\}=\\{1,2,3,\\cdots,2n\\}$。\n\n- Subtask 1（5 pts）：矩形之间互不相交。\n- Subtask 2（20 pts）：$n\\leq 13$。\n- Subtask 3（20 pts）：$n\\leq 200$。\n- Subtask 4（25 pts）：$n\\leq 2000$。\n- Subtask 5（30 pts）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 左蓝右红", "background": "小 S 是一个喜欢音游的女孩子。\n\n2077 年 7 月 7 日，某三维立体音乐游戏的 20.7.7 版本更新了一个塞满直角蛇的谱面 Tnemitnep [Beyond 18+]。但是当小 S 开始游玩这个谱面之后发现，由于游戏 bug，所有的蛇的色彩指示都没了……\n\n但是小 S 作为 ptt 20.77 的 18 星高端玩家，首个理论值这首曲目的位置她势在必得，因此她不想等游戏开发者修复 bug。她决定：通过这个游戏的机制自行计算出所有蛇原本的颜色！\n\n不幸的是，小 S 经过一些简单的推理，发现这个游戏的机制并不足以唯一确定所有蛇的颜色。因此小 S 首先希望通过这个游戏的“左蓝右红”规则计算出一种反手尽量少的染色可能性；同时计算出不同的染色方案数，以获知自己在最坏情况下需要尝试多少次才能正确地接住所有蛇。\n\n小 S 将这个问题抽象成了一个 OI 问题，可是小 S 并不是很会 OI，于是她找到了即将参加 IOI 2024 的你。你能帮助小 S 在别人都还在莫名其妙红蛇 Track Lost 的时候拿下 Tnemitnep BYD 的首杀吗？", "description": "在平面直角坐标系上给定 $n$ 个矩形，形成若干个交点，每个矩形的所有边都平行于坐标轴。**保证没有两个矩形的两条边共线。**\n\n矩形之间会形成若干个交点，每一个矩形都被它上面的交点分成若干段。定义属于一个矩形上的**一段**是该矩形上相邻的两个交点之间的部分。也就是说一个矩形上如果有 $n$ 个交点，就会被划分成 $n$ 段。\n\n现在将每一个矩形上的每一段染色为蓝色或红色。要求：\n\n- 与同一个交点相邻的**同属于一个矩形的**两段不同色；\n- 所有红线形成若干互不相交的封闭曲线；\n- 所有蓝线形成若干互不相交的封闭曲线。\n\n定义两个图形 $R,B$：\n\n- $R$ 为删去所有蓝线后，所有被**奇数个**红色封闭曲线包含的点组成的集合；\n- $B$ 为删去所有红线后，所有被**奇数个**蓝色封闭曲线包含的点组成的集合。\n\n一个方案合法当且仅当它满足上述所有条件，并且**使得 $R\\cap B$ 里面只有有限个点**。\n\n**如果无法理解上述定义，可以参考样例解释。**\n\n你需要分别求出：\n\n- 字典序最小的合法染色方案（字典序在输出格式里面有定义）。\n- 合法染色方案数，对 $20,051,131$（质数）取模。两个染色方案不同当且仅当存在一段，在一种方案中被染成红色，在另一种方案中被染成蓝色。", "inputFormat": "第一行一个整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行 4 个整数 $x_{1,i},y_{1,i},x_{2,i},y_{2,i}$，前两个表示左下角坐标，后两个表示右上角坐标。", "outputFormat": "第一行输出字典序最小的合法方案：如果无解，输出一行 `-1`；否则输出一个长度为 $n$ 的 0/1 串。如果在你的方案中，按输入顺序给出的第 $i$ 个矩形的左下角是红色，则你输出的第 $i$ 个整数应该是 $0$；否则应该是 $1$。可以证明给定这些数之后能够唯一确定整个染色方案。如果有多解，你输出的解必须使得**上面描述的 01 序列字典序最小**。\n\n第二行输出合法染色方案数，对 $20,051,131$ 取模。无解时应输出 $0$。", "hint": "样例 5、6、7 见附件。\n\n---\n\n样例 1 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pnklrf6w.png?x-oss-process=image/resize,m_lfit,h_250,w_750)\n\n如图是给定的矩形在平面直角坐标系上的形态。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wy02h10g.png?x-oss-process=image/resize,m_lfit,h_250,w_750)\n\n如图，标出颜色的地方是属于第 1 个矩形的两段。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aqhxc9mh.png?x-oss-process=image/resize,m_lfit,h_250,w_750)\n\n如图，标出颜色的地方是属于第 2 个矩形的两段。按照上述图片给出的颜色进行染色可以得到样例输出中给出的合法方案：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kxybwupj.png?x-oss-process=image/resize,m_lfit,h_250)\n\n如下图，左侧方案是不合法的，因为与用圈标出的交点相邻的同属于一个矩形的两段同色；右侧方案也是不合法的，因为 $R$ 与 $B$ 交在图中的紫色正方形内，$R\\cap B$ 包含无限多个点。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3pwpnuap.png?x-oss-process=image/resize,m_lfit,h_250)\n\n如下方案是合法的，但是对应字符串 `10` 不是字典序最小的。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bbo2v7ko.png?x-oss-process=image/resize,m_lfit,h_250)\n\n---\n\n样例 2 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7ukggac8.png?x-oss-process=image/resize,m_lfit,h_250)\n\n左侧的图为给定的所有矩形。\n\n中间的图表示对应的染色方案。每一个矩形都包含 $6$ 段，并且满足与任何一个交点相邻的同属于一个矩形的两段不同色。\n\n右侧的图中，用红色区域标出 $R$ 的范围，蓝色区域标出 $B$ 的范围。两图形的交只包含 $12$ 个点。\n\n---\n\n样例 3 解释：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/si28rfhb.png?x-oss-process=image/resize,m_lfit,h_250)\n\n如图，该样例中，因为环内部的部分被 $2$ 条红色封闭曲线包含，$2$ 是偶数，所以环内部不属于 $R$，$R$ 形成一个环。\n\n---\n\n数据范围：\n\n对于 $100\\%$ 的数据，保证 $1\\leq n\\leq 2\\times 10^5$，$x_{1,i}<x_{2,i}$，$y_{1,i}<y_{2,i}$，$\\{x_{i,j}|1\\leq i\\leq 2,1\\leq j\\leq n\\}=\\{y_{i,j}|1\\leq i\\leq 2,1\\leq j\\leq n\\}=\\{1,2,3,\\cdots,2n\\}$。\n\n- Subtask 1（5 pts）：矩形之间互不相交。\n- Subtask 2（20 pts）：$n\\leq 13$。\n- Subtask 3（20 pts）：$n\\leq 200$。\n- Subtask 4（25 pts）：$n\\leq 2000$。\n- Subtask 5（30 pts）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P10016", "type": "P", "difficulty": 7, "samples": [["5 4\n1 0 0 0 1\n1 2\n1 3\n3 4\n3 5\n1 2 3\n2 1 3 3\n1 4 5\n2 3 5 3", "19561959\n19561959"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["集训队互测", "2023", "数论", "深度优先搜索 DFS", "最近公共祖先 LCA", "分块", "位运算"], "title": "[集训队互测 2023] 虹", "background": "", "description": "给定一棵 $n$ 个点的树。\n\n- 称点集 $S$ **连通**，当且仅当 $\\forall u,v \\in S$，所有 $u$ 到 $v$ 的简单路径上的点均在 $S$ 中。\n- 称点集 $S$ 是 $[l,r]$ 的**虹**，当且仅当 $S$ **连通**，且 $S$ 包含 $[l,r]$ 中的所有点。\n- 称点集 $S_0$ 是 $[l,r]$ 的**最小虹**，当且仅当 $S_0$ 是 $[l,r]$ 的所有**虹**中大小最小的。可以证明，$S_0$ 是唯一的。\n\n点带权，点 $u$ 的权值为 $w_u$，初始所有点权均为 $0$。同时，给定序列 $\\{z_1,z_2,\\cdots,z_n\\}$。\n\n给定 $q$ 次命令，每次命令形如以下两类之一：\n\n- `1 l r`：令 $S_0$ 为 $[l,r]$ 的**最小虹**，$\\forall u \\in S_0$，将 $w_u$ 加 $1$。\n- `2 l r u`：求 $\\left(\\sum_{i=l}^r 19901991^{z_{\\gcd(i,u)} w_i} \\right) \\bmod {20242024}$ 的值。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个非负整数，依次表示 $z_1,z_2,\\cdots,z_n$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，描述一条树上从 $u$ 到 $v$ 的边。\n\n最后 $q$ 行，每行 $3$ 或 $4$ 个正整数，描述一次命令。\n\n**注意：本题输入文件行末有 `\\r`，请选手自行过滤。**", "outputFormat": "对于每次询问（即第二类命令）输出答案。", "hint": "**本题采用捆绑测试**。\n\n对于所有测试数据保证：$1 \\le n, q \\le 8 \\times 10^4,0 \\le z_i \\le 10^9$，所有命令满足 $1 \\le l \\le r \\le n, 1 \\le u \\le n$，**保证第一类命令的 $(l,r)$ 随机生成**。随机生成方式如下：\n- 在 $[1,n] \\cap \\mathrm{Z}$ 中等概率随机生成 $l$。\n- 在 $[1,n] \\cap \\mathrm{Z}$ 中等概率随机生成 $r$。\n- 若 $l>r$，则交换 $l,r$。\n\n| 子任务编号 | 分值 | $n \\le$ | $q \\le$ | 特殊性质 | 子任务依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :----------: |\n| $1$ | $10$ | $10^3$ | $10^3$ | 无 | 无 |\n| $2$ | $20$ | $65536$ | $65536$ | A, B | 无 |\n| $3$ | $20$ | $65536$ | $65536$ | A | 依赖于子任务 $2$ |\n| $4$ | $30$ | $65536$ | $65536$ | 无 | 依赖于子任务 $1,2,3$ |\n| $5$ | $20$ | $80000$ | $80000$ | 无 | 依赖于子任务 $1,2,3,4$ |\n\n特殊性质 A：保证所有第二类命令均在所有第一类命令之后。\n\n特殊性质 B：保证第二类命令次数 $\\le 20$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] 虹", "background": "", "description": "给定一棵 $n$ 个点的树。\n\n- 称点集 $S$ **连通**，当且仅当 $\\forall u,v \\in S$，所有 $u$ 到 $v$ 的简单路径上的点均在 $S$ 中。\n- 称点集 $S$ 是 $[l,r]$ 的**虹**，当且仅当 $S$ **连通**，且 $S$ 包含 $[l,r]$ 中的所有点。\n- 称点集 $S_0$ 是 $[l,r]$ 的**最小虹**，当且仅当 $S_0$ 是 $[l,r]$ 的所有**虹**中大小最小的。可以证明，$S_0$ 是唯一的。\n\n点带权，点 $u$ 的权值为 $w_u$，初始所有点权均为 $0$。同时，给定序列 $\\{z_1,z_2,\\cdots,z_n\\}$。\n\n给定 $q$ 次命令，每次命令形如以下两类之一：\n\n- `1 l r`：令 $S_0$ 为 $[l,r]$ 的**最小虹**，$\\forall u \\in S_0$，将 $w_u$ 加 $1$。\n- `2 l r u`：求 $\\left(\\sum_{i=l}^r 19901991^{z_{\\gcd(i,u)} w_i} \\right) \\bmod {20242024}$ 的值。", "inputFormat": "第一行两个正整数 $n,q$。\n\n第二行 $n$ 个非负整数，依次表示 $z_1,z_2,\\cdots,z_n$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，描述一条树上从 $u$ 到 $v$ 的边。\n\n最后 $q$ 行，每行 $3$ 或 $4$ 个正整数，描述一次命令。\n\n**注意：本题输入文件行末有 `\\r`，请选手自行过滤。**", "outputFormat": "对于每次询问（即第二类命令）输出答案。", "hint": "**本题采用捆绑测试**。\n\n对于所有测试数据保证：$1 \\le n, q \\le 8 \\times 10^4,0 \\le z_i \\le 10^9$，所有命令满足 $1 \\le l \\le r \\le n, 1 \\le u \\le n$，**保证第一类命令的 $(l,r)$ 随机生成**。随机生成方式如下：\n- 在 $[1,n] \\cap \\mathrm{Z}$ 中等概率随机生成 $l$。\n- 在 $[1,n] \\cap \\mathrm{Z}$ 中等概率随机生成 $r$。\n- 若 $l>r$，则交换 $l,r$。\n\n| 子任务编号 | 分值 | $n \\le$ | $q \\le$ | 特殊性质 | 子任务依赖 |\n| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :----------: |\n| $1$ | $10$ | $10^3$ | $10^3$ | 无 | 无 |\n| $2$ | $20$ | $65536$ | $65536$ | A, B | 无 |\n| $3$ | $20$ | $65536$ | $65536$ | A | 依赖于子任务 $2$ |\n| $4$ | $30$ | $65536$ | $65536$ | 无 | 依赖于子任务 $1,2,3$ |\n| $5$ | $20$ | $80000$ | $80000$ | 无 | 依赖于子任务 $1,2,3,4$ |\n\n特殊性质 A：保证所有第二类命令均在所有第一类命令之后。\n\n特殊性质 B：保证第二类命令次数 $\\le 20$。", "locale": "zh-CN"}}}
{"pid": "P10017", "type": "P", "difficulty": 7, "samples": [["9 0\n9\n1 2 1\n3 4 1\n5 6 1\n7 8 1\n2 0 0\n4 0 0\n6 0 0\n8 0 0\n9\n1 2 2\n3 4 1\n5 6 1\n7 8 1\n2 0 0\n4 0 0\n6 0 0\n8 0 0\n5\n1 2 2\n3 4 1\n0 3 1\n2 3 0\n17\n1 2 1\n2 3 0\n3 4 1\n4 0 0\n5 6 1\n6 7 0\n7 8 1\n8 0 0\n9 10 1\n10 11 0\n11 12 1\n12 0 0\n13 14 1\n14 15 0\n15 16 1\n16 0 0\n17\n1 2 1\n2 0 0\n3 4 1\n4 0 0\n5 6 1\n6 0 0\n7 8 1\n8 0 0\n9 10 1\n10 11 0\n11 12 1\n12 0 0\n13 14 1\n14 15 0\n15 16 1\n16 0 0\n17\n1 2 2\n2 0 2\n3 4 2\n4 0 2\n5 6 2\n6 0 2\n7 8 2\n8 0 2\n9 10 2\n10 11 2\n11 12 2\n12 0 2\n13 14 2\n14 15 2\n15 16 2\n16 0 2\n18\n1 2 1\n2 0 0\n3 4 1\n4 0 0\n5 6 1\n6 0 0\n7 8 1\n8 0 0\n9 10 1\n10 11 0\n11 12 1\n12 0 0\n13 14 1\n14 15 0\n15 16 1\n16 0 0\n0 17 2\n18\n1 2 2\n2 0 2\n3 4 2\n4 0 2\n5 6 2\n6 0 2\n7 8 2\n8 0 2\n9 10 2\n10 11 2\n11 12 2\n12 0 2\n13 14 2\n14 15 2\n15 16 2\n16 0 2\n17 0 2\n18\n1 2 2\n2 3 2\n3 4 2\n4 5 2\n5 6 2\n6 7 2\n7 8 2\n8 9 2\n9 10 2\n10 11 2\n11 12 2\n12 13 2\n13 14 2\n14 15 2\n15 16 2\n16 17 2\n17 0 2", "1\n8\n3\n1 1 1 1 0 0 0 0\n1 3\n5 6\n6 7\n9\n2\n0 1 1 1 0 0 0 0\n3 5\n1 7\n5\n2\n0 1 1 0\n4 3\n1 0\n16\n3\n1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0\n5 1\n13 14\n14 9\n14\n5\n1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0\n3 1\n5 6\n14 13\n14 7\n6 9\n16\n3\n0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0\n7 5\n1 3\n13 9\n15\n4\n1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 0\n13 3\n1 7\n0 5\n17 9\n16\n4\n1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 1\n1 7\n17 0\n5 3\n13 9\n18\n1\n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n1 0"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["集训队互测", "2023", "Special Judge", "最近公共祖先 LCA", "均摊分析", "状压 DP"], "title": "[集训队互测 2023] Axium Crisis", "background": "在那灰暗的塔楼前，对立见到了些许光芒碎片。\n\n那些光芒碎片萦绕在对立身旁，宛如繁花点缀。\n\n步入那扭曲的迷宫，对立试图收集其中的纷争碎片，并尝试摧毁这个迷宫。\n\n对立的身旁充斥着光芒和纷争碎片，交错纷飞。\n\n终于，对立来到了那迷宫的最深处。\n\n在那片形状极其古怪的记忆残片上，反射的，是一个世界走向灭亡的回忆。\n\n末日来临，天空撕裂，大地崩坠。\n\n由于这块残片上所承载的「能量」实在过于巨大，对立试图使用其身旁的光芒和纷争碎片来缓和这份巨大的精神上的冲击。\n\n具体的，这块扭曲的残片形成一个「树」的结构，对立将在树的每条边上放上一片光芒或者纷争碎片。\n\n对立将会把这颗树上的边切割成若干条链，使得最终每条边恰好属于其中的某一条链。由于残片的特殊结构，树上的一个节点可以同时属于多条链。\n\n对立会取出一部分链，将放置碎片相同的前缀段进行合并，最后形成一颗新的树，也就是所谓的「Trie 树」。\n\n这颗新的树上的节点越多，就越能缓和对立的情绪，让其冷静下来。\n\n在疯狂中，对立已经给残片上的某些边放上了光芒碎片或者纷争碎片。\n\n一刹那的清醒间，对立意识到了些许不对。因此对立还可以往剩下的边上任意选择光芒或者纷争碎片。\n\n在恍惚间，对立发现自己并不知道如何放置并切割是最优的。\n\n思绪飞快地运转起来。怎样是最优的呢？\n\n相信你已有答案。", "description": "给定一颗 $n$ 个节点的树，节点编号 $0\\sim n-1$。\n\n边有边权，边权一般为 $0$ 或者 $1$；但有的边的边权还未确定。\n\n你要给每条未被确定边权的边确定一个 $0$ 或者 $1$ 的边权，然后从树上取出若干条有向路径，使得这些链两两之间满足**边不相交**。\n\n然后你会把这些路径插入一颗 0/1-Trie，你希望最大化这颗 0/1-Trie 上的节点数。（0/1-Trie 定义略）\n\n你可能需要构造具体的选择方案。", "inputFormat": "本题每个测试点中有多组测试数据。\n\n第一行两个整数 $T,o$，其中 $T$ 表示测试数据组数，$o$ 表示该测试点的一些特殊性质（请参见「数据范围与提示」一节的描述）。\n\n接下来有 $T$ 组测试数据。\n\n每组数据第一行一个整数 $n$，表示点的个数。\n\n接下来 $n-1$ 行，每行三个整数 $u,v,w$，表示一条连接点 $u,v$ 的边。当 $0\\le w\\le 1$ 时，表示这条边边权为 $w$；否则总有 $w=2$，表示这条边的边权还未确定。\n\n保证这些边形成一颗点集为 $0\\sim n-1$ 的树。", "outputFormat": "开头应当输出一个数 $c$（$c\\in\\{0,1\\}$），表示你是否选择在该测试点输出方案，我们会使用 Special Judge 来校验你的输出是否正确。**注意这将影响你在该测试点的得分上限，详见「数据范围与提示」一节的描述**。\n\n对于每组测试数据，首先输出一行一个数 $A$，表示该组数据的答案。\n\n当 $c=1$ 时，还需要继续按如下格式输出你所构造的方案：\n* 先输出一行一个数 $m$，表示你构造的方案中路径的数目。\n* 接下来一行 $n-1$ 个数，每个数为 $0$ 或者 $1$，表示按输入顺序各边的边权。**对于边权本身已经确定的边，请原样输出。**\n* 接下来 $m$ 行，每行两个数 $u,v$，表示树上一条从 $u$ 到 $v$ 的路径。要求 $u\\neq v$，且路径两两**边不相交**。", "hint": "#### 样例解释\n\n这组样例对应的答案文件为：\n\n```plain\n8\n9\n5\n16\n14\n16\n15\n16\n18\n```\n\n样例输出即 `.out` 文件，也就是你要输出的结果，在 $c=1$ 时需要构造一组合法方案。\n\n样例答案即 `.ans` 文件，该文件中仅会给出每组数据的答案，不会给出构造方案。\n\n接下来依次附上这 $9$ 组样例的图示（选择边权前 / 后各一张）。\n\n![sample0_1_1.png](https://sy.hhwdd.com/RequireFile.do?fid=01t7zGM4)![sample0_1_2.png](https://sy.hhwdd.com/RequireFile.do?fid=EHOyk2Uz)\n\n![sample0_2_1.png](https://sy.hhwdd.com/RequireFile.do?fid=FP2WnHn3)![sample0_2_2.png](https://sy.hhwdd.com/RequireFile.do?fid=c4cKvUgH)\n\n![sample0_3_1.png](https://sy.hhwdd.com/RequireFile.do?fid=U4UoWyyU)![sample0_3_2.png](https://sy.hhwdd.com/RequireFile.do?fid=59JlIWvn)\n\n![sample0_4_1.png](https://sy.hhwdd.com/RequireFile.do?fid=cm5NQIRx)![sample0_4_2.png](https://sy.hhwdd.com/RequireFile.do?fid=jM6lGPo8)\n\n![sample0_5_1.png](https://sy.hhwdd.com/RequireFile.do?fid=7jKRZ9i9)![sample0_5_2.png](https://sy.hhwdd.com/RequireFile.do?fid=Fb1HkD1s)\n\n![sample0_6_1.png](https://sy.hhwdd.com/RequireFile.do?fid=CbEmirO0)![sample0_6_2.png](https://sy.hhwdd.com/RequireFile.do?fid=4GrzzBbe)\n\n![sample0_7_1.png](https://sy.hhwdd.com/RequireFile.do?fid=hRWoM1xi)![sample0_7_2.png](https://sy.hhwdd.com/RequireFile.do?fid=8OgPPrFB)\n\n![sample0_8_1.png](https://sy.hhwdd.com/RequireFile.do?fid=ws6t9q9g)![sample0_8_2.png](https://sy.hhwdd.com/RequireFile.do?fid=RkDgZv7G)\n\n![sample0_9_1.png](https://sy.hhwdd.com/RequireFile.do?fid=MlI0m1pW)![sample0_9_2.png](https://sy.hhwdd.com/RequireFile.do?fid=KJLtHLs7)\n\n#### 更多样例\n\n**因为本题数据规模太大，直接提交评测会对评测机带来很大压力，本题将提供很多大样例；请尽量减少本题的提交次数。**\n\n更多样例请参见下发文件 `axiumcrisis*.in/ans`，共 $20$ 组，基本按照部分分的方法造。\n\n注意下发的答案文件中**没有给出构造方案**，仅会给出每组数据的答案。\n\n下发了一个 `checker.cpp`，你可以自行编译并在终端运行校验合法性。具体使用方法请参考「数据范围与提示」一节的描述。正式测评时使用的 Special Judge 与其并不相同。\n\n为了方便你更好地理解题意，此处额外附一个手搓的样例，这份样例未被放入下发文件。\n\n**建议使用该组样例及样例解释校验你对题意的理解，以免误读**。\n\n#### 数据范围与提示\n\n与[互测实际使用的版本](https://qoj.ac/problem/7769)不同，本题此处将采用数据范围更大的版本。\n\n对于所有的数据，保证 $2\\le n\\le18$，$1\\le T\\le3000$。\n\n具体的数据规模分布可以见下表，**各子任务等分，即满分均为 $\\rm5pts$**。其中形如 $(l,r)$ 的一列对应的数据表示 $l\\le n\\le r$ 的数据组数，「无限制」表示无额外限制。\n\n各子任务**捆绑评测**，其分数为该子任务各测试点分数最小值。子任务依赖意味着只有所依赖的子任务分数均非 $0$ 才会评测当前子任务，且分数与所依赖的子任务也取最小值。$o$ 的含义将在之后注明。\n\n|子任务|$(2,4)$|$(5,6)$|$(7,8)$|$(9,11)$|$(12,14)$|$(15,17)$|$(18,18)$|$o$|子任务依赖|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$\\le1000$|$=0$|$=0$|$=0$|$=0$|$=0$|$=0$|$=0$|无|\n|$2$|无限制|$\\le15$|$=0$|$=0$|$=0$|$=0$|$=0$|$=0$|$1$|\n|$3$|无限制|$\\le500$|$\\le10$|$=0$|$=0$|$=0$|$=0$|$=0$|$2$|\n|$4$|无限制|$\\le1000$|$\\le50$|$\\le10$|$=0$|$=0$|$=0$|$=2$|无|\n|$5$|无限制|$\\le1000$|$\\le50$|$\\le10$|$=0$|$=0$|$=0$|$=3$|无|\n|$6$|无限制|$\\le1000$|$\\le50$|$\\le10$|$=0$|$=0$|$=0$|$=4$|$4$|\n|$7$|无限制|$\\le1000$|$\\le50$|$\\le10$|$=0$|$=0$|$=0$|$=0$|$3,5,6$|\n|$8$|无限制|无限制|$\\le1000$|$\\le60$|$\\le10$|$=0$|$=0$|$=2$|$4$|\n|$9$|无限制|无限制|$\\le1000$|$\\le60$|$\\le10$|$=0$|$=0$|$=3$|$5$|\n|$10$|无限制|无限制|$\\le1000$|$\\le60$|$\\le10$|$=0$|$=0$|$=4$|$6,8$|\n|$11$|无限制|无限制|$\\le1000$|$\\le60$|$\\le10$|$=0$|$=0$|$=0$|$7,9,10$|\n|$12$|无限制|无限制|无限制|$\\le300$|$\\le30$|$\\le10$|$=0$|$=2$|$8$|\n|$13$|无限制|无限制|无限制|$\\le300$|$\\le30$|$\\le10$|$=0$|$=3$|$9$|\n|$14$|无限制|无限制|无限制|$\\le300$|$\\le30$|$\\le10$|$=0$|$=4$|$10,12$|\n|$15$|无限制|无限制|无限制|$\\le300$|$\\le30$|$\\le10$|$=0$|$=0$|$11,13,14$|\n|$16$|无限制|无限制|无限制|$\\le500$|$\\le60$|$\\le20$|$\\le10$|$=1$|无|\n|$17$|无限制|无限制|无限制|$\\le500$|$\\le60$|$\\le20$|$\\le10$|$=2$|$12$|\n|$18$|无限制|无限制|无限制|$\\le500$|$\\le60$|$\\le20$|$\\le10$|$=3$|$13,16$|\n|$19$|无限制|无限制|无限制|$\\le500$|$\\le60$|$\\le20$|$\\le10$|$=4$|$14,16,17$|\n|$20$|无限制|无限制|无限制|$\\le500$|$\\le60$|$\\le20$|$\\le10$|$=0$|$15,18,19$|\n\n接下来阐述关于 $o$ 的特殊性质。\n* $o=0$ 时，不保证特殊性质。\n* $o=1$ 时，保证输入中 $w=0$。\n* $o=2$ 时，保证输入中 $w=2$。\n* $o=3$ 时，保证输入中 $w=0$ 或 $w=1$。\n* $o=4$ 时，保证输入中 $w=0$ 或 $w=2$。\n\n接下来阐述是否输出方案对答案带来的影响。\n* 如果选择了 $c=0$，则答案正确时，你将获得该测试点 $80\\%$ 的分数，否则该测试点不得分。\n* 如果选择了 $c=1$，则答案和构造方案**均正确**时，你将获得该测试点的全部分数，**否则该测试点不得分**。\n\n因此如果你的输出方案可能写错，请慎重考虑是否改为不输出方案。\n\n接下来介绍 `checker.cpp` 使用方法。\n\n`checker.cpp` 使用类似于 Testlib 的命令行格式，但是并不基于 Testlib，因此**不需要 `testlib.h` 文件**；同时**兼容 Lemon 格式**。具体的，你可以这么使用：\n\n打开终端，进入 `checker.cpp` 所在文件夹后，首先使用 `g++ checker.cpp -o checker` 命令生成可执行文件（需要本地默认采用 C++11 及以上标准）。\n\n假设输入文件为 `data.in`，输出文件为 `data.out`，标准答案文件为 `data.ans`，则你需要将可执行文件 `checker` 和 `data.in/out/ans` 文件放置于同一文件夹下，然后在终端中输入如下命令执行：\n* 如果你使用 Windows 操作系统，请在 cmd 中使用 `checker data.in data.out data.ans 5` 执行。\n* 如果你使用 Linux 操作系统，请在 bash 中使用 `./checker data.in data.out data.ans 5` 执行。\n\n如命令中去掉最后的这个 `5` 将认为 $c=0$ 时也为 AC。\n\n稍等片刻即会返回提示信息。\n\n如果你使用 Lemon 来进行本地评测，可以把 `checker.cpp` 的可执行文件直接作为 Lemon 中的「自定义校验器」使用。\n\n#### 后记\n\n透过指缝观看着那世界末日之景。对立咽了口口水，靠着那股不知名的勇气，将手从自己的脸上移开。\n\n对立伸出了手，把那世界尽头收入了自己所搜集的无数回忆之中。\n\n其余的悲惨记忆，在这枚残片的映衬下显得不足一提。\n\n对立确信自己已经变得足够强大，理所当然地想立刻把一切都摧毁。\n\n就这样，伴随着那抹真诚的微笑与疲惫的笑声，对立从天空中降落到了地面上。\n\n那座古老的塔楼在这般力量驱使下逐渐陨落。\n\n而对立则怀抱着英雄般的信念，坚定不移地迈步向前。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[集训队互测 2023] Axium Crisis", "background": "在那灰暗的塔楼前，对立见到了些许光芒碎片。\n\n那些光芒碎片萦绕在对立身旁，宛如繁花点缀。\n\n步入那扭曲的迷宫，对立试图收集其中的纷争碎片，并尝试摧毁这个迷宫。\n\n对立的身旁充斥着光芒和纷争碎片，交错纷飞。\n\n终于，对立来到了那迷宫的最深处。\n\n在那片形状极其古怪的记忆残片上，反射的，是一个世界走向灭亡的回忆。\n\n末日来临，天空撕裂，大地崩坠。\n\n由于这块残片上所承载的「能量」实在过于巨大，对立试图使用其身旁的光芒和纷争碎片来缓和这份巨大的精神上的冲击。\n\n具体的，这块扭曲的残片形成一个「树」的结构，对立将在树的每条边上放上一片光芒或者纷争碎片。\n\n对立将会把这颗树上的边切割成若干条链，使得最终每条边恰好属于其中的某一条链。由于残片的特殊结构，树上的一个节点可以同时属于多条链。\n\n对立会取出一部分链，将放置碎片相同的前缀段进行合并，最后形成一颗新的树，也就是所谓的「Trie 树」。\n\n这颗新的树上的节点越多，就越能缓和对立的情绪，让其冷静下来。\n\n在疯狂中，对立已经给残片上的某些边放上了光芒碎片或者纷争碎片。\n\n一刹那的清醒间，对立意识到了些许不对。因此对立还可以往剩下的边上任意选择光芒或者纷争碎片。\n\n在恍惚间，对立发现自己并不知道如何放置并切割是最优的。\n\n思绪飞快地运转起来。怎样是最优的呢？\n\n相信你已有答案。", "description": "给定一颗 $n$ 个节点的树，节点编号 $0\\sim n-1$。\n\n边有边权，边权一般为 $0$ 或者 $1$；但有的边的边权还未确定。\n\n你要给每条未被确定边权的边确定一个 $0$ 或者 $1$ 的边权，然后从树上取出若干条有向路径，使得这些链两两之间满足**边不相交**。\n\n然后你会把这些路径插入一颗 0/1-Trie，你希望最大化这颗 0/1-Trie 上的节点数。（0/1-Trie 定义略）\n\n你可能需要构造具体的选择方案。", "inputFormat": "本题每个测试点中有多组测试数据。\n\n第一行两个整数 $T,o$，其中 $T$ 表示测试数据组数，$o$ 表示该测试点的一些特殊性质（请参见「数据范围与提示」一节的描述）。\n\n接下来有 $T$ 组测试数据。\n\n每组数据第一行一个整数 $n$，表示点的个数。\n\n接下来 $n-1$ 行，每行三个整数 $u,v,w$，表示一条连接点 $u,v$ 的边。当 $0\\le w\\le 1$ 时，表示这条边边权为 $w$；否则总有 $w=2$，表示这条边的边权还未确定。\n\n保证这些边形成一颗点集为 $0\\sim n-1$ 的树。", "outputFormat": "开头应当输出一个数 $c$（$c\\in\\{0,1\\}$），表示你是否选择在该测试点输出方案，我们会使用 Special Judge 来校验你的输出是否正确。**注意这将影响你在该测试点的得分上限，详见「数据范围与提示」一节的描述**。\n\n对于每组测试数据，首先输出一行一个数 $A$，表示该组数据的答案。\n\n当 $c=1$ 时，还需要继续按如下格式输出你所构造的方案：\n* 先输出一行一个数 $m$，表示你构造的方案中路径的数目。\n* 接下来一行 $n-1$ 个数，每个数为 $0$ 或者 $1$，表示按输入顺序各边的边权。**对于边权本身已经确定的边，请原样输出。**\n* 接下来 $m$ 行，每行两个数 $u,v$，表示树上一条从 $u$ 到 $v$ 的路径。要求 $u\\neq v$，且路径两两**边不相交**。", "hint": "#### 样例解释\n\n这组样例对应的答案文件为：\n\n```plain\n8\n9\n5\n16\n14\n16\n15\n16\n18\n```\n\n样例输出即 `.out` 文件，也就是你要输出的结果，在 $c=1$ 时需要构造一组合法方案。\n\n样例答案即 `.ans` 文件，该文件中仅会给出每组数据的答案，不会给出构造方案。\n\n接下来依次附上这 $9$ 组样例的图示（选择边权前 / 后各一张）。\n\n![sample0_1_1.png](https://sy.hhwdd.com/RequireFile.do?fid=01t7zGM4)![sample0_1_2.png](https://sy.hhwdd.com/RequireFile.do?fid=EHOyk2Uz)\n\n![sample0_2_1.png](https://sy.hhwdd.com/RequireFile.do?fid=FP2WnHn3)![sample0_2_2.png](https://sy.hhwdd.com/RequireFile.do?fid=c4cKvUgH)\n\n![sample0_3_1.png](https://sy.hhwdd.com/RequireFile.do?fid=U4UoWyyU)![sample0_3_2.png](https://sy.hhwdd.com/RequireFile.do?fid=59JlIWvn)\n\n![sample0_4_1.png](https://sy.hhwdd.com/RequireFile.do?fid=cm5NQIRx)![sample0_4_2.png](https://sy.hhwdd.com/RequireFile.do?fid=jM6lGPo8)\n\n![sample0_5_1.png](https://sy.hhwdd.com/RequireFile.do?fid=7jKRZ9i9)![sample0_5_2.png](https://sy.hhwdd.com/RequireFile.do?fid=Fb1HkD1s)\n\n![sample0_6_1.png](https://sy.hhwdd.com/RequireFile.do?fid=CbEmirO0)![sample0_6_2.png](https://sy.hhwdd.com/RequireFile.do?fid=4GrzzBbe)\n\n![sample0_7_1.png](https://sy.hhwdd.com/RequireFile.do?fid=hRWoM1xi)![sample0_7_2.png](https://sy.hhwdd.com/RequireFile.do?fid=8OgPPrFB)\n\n![sample0_8_1.png](https://sy.hhwdd.com/RequireFile.do?fid=ws6t9q9g)![sample0_8_2.png](https://sy.hhwdd.com/RequireFile.do?fid=RkDgZv7G)\n\n![sample0_9_1.png](https://sy.hhwdd.com/RequireFile.do?fid=MlI0m1pW)![sample0_9_2.png](https://sy.hhwdd.com/RequireFile.do?fid=KJLtHLs7)\n\n#### 更多样例\n\n**因为本题数据规模太大，直接提交评测会对评测机带来很大压力，本题将提供很多大样例；请尽量减少本题的提交次数。**\n\n更多样例请参见下发文件 `axiumcrisis*.in/ans`，共 $20$ 组，基本按照部分分的方法造。\n\n注意下发的答案文件中**没有给出构造方案**，仅会给出每组数据的答案。\n\n下发了一个 `checker.cpp`，你可以自行编译并在终端运行校验合法性。具体使用方法请参考「数据范围与提示」一节的描述。正式测评时使用的 Special Judge 与其并不相同。\n\n为了方便你更好地理解题意，此处额外附一个手搓的样例，这份样例未被放入下发文件。\n\n**建议使用该组样例及样例解释校验你对题意的理解，以免误读**。\n\n#### 数据范围与提示\n\n与[互测实际使用的版本](https://qoj.ac/problem/7769)不同，本题此处将采用数据范围更大的版本。\n\n对于所有的数据，保证 $2\\le n\\le18$，$1\\le T\\le3000$。\n\n具体的数据规模分布可以见下表，**各子任务等分，即满分均为 $\\rm5pts$**。其中形如 $(l,r)$ 的一列对应的数据表示 $l\\le n\\le r$ 的数据组数，「无限制」表示无额外限制。\n\n各子任务**捆绑评测**，其分数为该子任务各测试点分数最小值。子任务依赖意味着只有所依赖的子任务分数均非 $0$ 才会评测当前子任务，且分数与所依赖的子任务也取最小值。$o$ 的含义将在之后注明。\n\n|子任务|$(2,4)$|$(5,6)$|$(7,8)$|$(9,11)$|$(12,14)$|$(15,17)$|$(18,18)$|$o$|子任务依赖|\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|$1$|$\\le1000$|$=0$|$=0$|$=0$|$=0$|$=0$|$=0$|$=0$|无|\n|$2$|无限制|$\\le15$|$=0$|$=0$|$=0$|$=0$|$=0$|$=0$|$1$|\n|$3$|无限制|$\\le500$|$\\le10$|$=0$|$=0$|$=0$|$=0$|$=0$|$2$|\n|$4$|无限制|$\\le1000$|$\\le50$|$\\le10$|$=0$|$=0$|$=0$|$=2$|无|\n|$5$|无限制|$\\le1000$|$\\le50$|$\\le10$|$=0$|$=0$|$=0$|$=3$|无|\n|$6$|无限制|$\\le1000$|$\\le50$|$\\le10$|$=0$|$=0$|$=0$|$=4$|$4$|\n|$7$|无限制|$\\le1000$|$\\le50$|$\\le10$|$=0$|$=0$|$=0$|$=0$|$3,5,6$|\n|$8$|无限制|无限制|$\\le1000$|$\\le60$|$\\le10$|$=0$|$=0$|$=2$|$4$|\n|$9$|无限制|无限制|$\\le1000$|$\\le60$|$\\le10$|$=0$|$=0$|$=3$|$5$|\n|$10$|无限制|无限制|$\\le1000$|$\\le60$|$\\le10$|$=0$|$=0$|$=4$|$6,8$|\n|$11$|无限制|无限制|$\\le1000$|$\\le60$|$\\le10$|$=0$|$=0$|$=0$|$7,9,10$|\n|$12$|无限制|无限制|无限制|$\\le300$|$\\le30$|$\\le10$|$=0$|$=2$|$8$|\n|$13$|无限制|无限制|无限制|$\\le300$|$\\le30$|$\\le10$|$=0$|$=3$|$9$|\n|$14$|无限制|无限制|无限制|$\\le300$|$\\le30$|$\\le10$|$=0$|$=4$|$10,12$|\n|$15$|无限制|无限制|无限制|$\\le300$|$\\le30$|$\\le10$|$=0$|$=0$|$11,13,14$|\n|$16$|无限制|无限制|无限制|$\\le500$|$\\le60$|$\\le20$|$\\le10$|$=1$|无|\n|$17$|无限制|无限制|无限制|$\\le500$|$\\le60$|$\\le20$|$\\le10$|$=2$|$12$|\n|$18$|无限制|无限制|无限制|$\\le500$|$\\le60$|$\\le20$|$\\le10$|$=3$|$13,16$|\n|$19$|无限制|无限制|无限制|$\\le500$|$\\le60$|$\\le20$|$\\le10$|$=4$|$14,16,17$|\n|$20$|无限制|无限制|无限制|$\\le500$|$\\le60$|$\\le20$|$\\le10$|$=0$|$15,18,19$|\n\n接下来阐述关于 $o$ 的特殊性质。\n* $o=0$ 时，不保证特殊性质。\n* $o=1$ 时，保证输入中 $w=0$。\n* $o=2$ 时，保证输入中 $w=2$。\n* $o=3$ 时，保证输入中 $w=0$ 或 $w=1$。\n* $o=4$ 时，保证输入中 $w=0$ 或 $w=2$。\n\n接下来阐述是否输出方案对答案带来的影响。\n* 如果选择了 $c=0$，则答案正确时，你将获得该测试点 $80\\%$ 的分数，否则该测试点不得分。\n* 如果选择了 $c=1$，则答案和构造方案**均正确**时，你将获得该测试点的全部分数，**否则该测试点不得分**。\n\n因此如果你的输出方案可能写错，请慎重考虑是否改为不输出方案。\n\n接下来介绍 `checker.cpp` 使用方法。\n\n`checker.cpp` 使用类似于 Testlib 的命令行格式，但是并不基于 Testlib，因此**不需要 `testlib.h` 文件**；同时**兼容 Lemon 格式**。具体的，你可以这么使用：\n\n打开终端，进入 `checker.cpp` 所在文件夹后，首先使用 `g++ checker.cpp -o checker` 命令生成可执行文件（需要本地默认采用 C++11 及以上标准）。\n\n假设输入文件为 `data.in`，输出文件为 `data.out`，标准答案文件为 `data.ans`，则你需要将可执行文件 `checker` 和 `data.in/out/ans` 文件放置于同一文件夹下，然后在终端中输入如下命令执行：\n* 如果你使用 Windows 操作系统，请在 cmd 中使用 `checker data.in data.out data.ans 5` 执行。\n* 如果你使用 Linux 操作系统，请在 bash 中使用 `./checker data.in data.out data.ans 5` 执行。\n\n如命令中去掉最后的这个 `5` 将认为 $c=0$ 时也为 AC。\n\n稍等片刻即会返回提示信息。\n\n如果你使用 Lemon 来进行本地评测，可以把 `checker.cpp` 的可执行文件直接作为 Lemon 中的「自定义校验器」使用。\n\n#### 后记\n\n透过指缝观看着那世界末日之景。对立咽了口口水，靠着那股不知名的勇气，将手从自己的脸上移开。\n\n对立伸出了手，把那世界尽头收入了自己所搜集的无数回忆之中。\n\n其余的悲惨记忆，在这枚残片的映衬下显得不足一提。\n\n对立确信自己已经变得足够强大，理所当然地想立刻把一切都摧毁。\n\n就这样，伴随着那抹真诚的微笑与疲惫的笑声，对立从天空中降落到了地面上。\n\n那座古老的塔楼在这般力量驱使下逐渐陨落。\n\n而对立则怀抱着英雄般的信念，坚定不移地迈步向前。\n\n", "locale": "zh-CN"}}}
{"pid": "P10024", "type": "P", "difficulty": 2, "samples": [["2 5", "2"], ["114514 114514", "1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「HCOI-R1」报名人数", "background": "在一个电子展牌上，对于十进制数 $P$，从右到左，从 $P$ 的低位到高位，我们对每一位按照如下的方式进行显示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/taibn0fi.png)\n\n所以，对于数位分别取 $0\\sim 9$，该数位对应所用的短竖线数量分别是 $6, 2, 5, 5, 4, 5, 6, 3, 7, 6$。", "description": "小 R 的家中有一个大型的电子展牌，上面记录着 HCOI-R1 的报名人数。\n\n在小 R 布置完成的时候，HCOI-R1 的报名人数为 $l$。而现在，HCOI-R1 最终的报名人数为 $r$。\n\n小 R 觉得这样的整数数对 $(i, j)$ 是**幸运**的，当且仅当在报名过程中，存在人数为 $i, i + 1, \\dots, j$ 的时刻（也即 $l \\leq i \\leq j \\leq r$），且在 **不含前导 $\\bm 0$** 的情况下，表示 $i, i + 1 \\dots j$ 这些数字所用的短竖线数量相同。\n\n小 R 想知道，对于所有的幸运数对 $(i, j)$，其中 $j - i + 1$，也即数字个数——最大为多少。", "inputFormat": "仅一行，两个整数 $l, r$，表示初始报名人数和最终报名人数。", "outputFormat": "一行一个整数，表示所有数对 $(i, j)$ 中，$j - i + 1$ 的最大值。", "hint": "### 样例解释 1\n\n存在幸运数对 $(2, 3)$，表示它们均需要 $5$ 条短竖线。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（19 pts）：$r \\leq 10^3$。\n+ Subtask 1（33 pts）：$r \\leq 10^6$。\n+ Subtask 2（48 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq l \\leq r \\leq 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HCOI-R1」报名人数", "background": "在一个电子展牌上，对于十进制数 $P$，从右到左，从 $P$ 的低位到高位，我们对每一位按照如下的方式进行显示：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/taibn0fi.png)\n\n所以，对于数位分别取 $0\\sim 9$，该数位对应所用的短竖线数量分别是 $6, 2, 5, 5, 4, 5, 6, 3, 7, 6$。", "description": "小 R 的家中有一个大型的电子展牌，上面记录着 HCOI-R1 的报名人数。\n\n在小 R 布置完成的时候，HCOI-R1 的报名人数为 $l$。而现在，HCOI-R1 最终的报名人数为 $r$。\n\n小 R 觉得这样的整数数对 $(i, j)$ 是**幸运**的，当且仅当在报名过程中，存在人数为 $i, i + 1, \\dots, j$ 的时刻（也即 $l \\leq i \\leq j \\leq r$），且在 **不含前导 $\\bm 0$** 的情况下，表示 $i, i + 1 \\dots j$ 这些数字所用的短竖线数量相同。\n\n小 R 想知道，对于所有的幸运数对 $(i, j)$，其中 $j - i + 1$，也即数字个数——最大为多少。", "inputFormat": "仅一行，两个整数 $l, r$，表示初始报名人数和最终报名人数。", "outputFormat": "一行一个整数，表示所有数对 $(i, j)$ 中，$j - i + 1$ 的最大值。", "hint": "### 样例解释 1\n\n存在幸运数对 $(2, 3)$，表示它们均需要 $5$ 条短竖线。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（19 pts）：$r \\leq 10^3$。\n+ Subtask 1（33 pts）：$r \\leq 10^6$。\n+ Subtask 2（48 pts）：无特殊限制。\n\n对于所有数据，保证 $1 \\leq l \\leq r \\leq 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P10025", "type": "P", "difficulty": 4, "samples": [["2 5 3\n1 1\n1 3\n1 4", "10"], ["7 4 9\n1 4\n2 3\n4 1\n6 2\n7 1\n5 2\n3 4\n1 1\n7 4", "38"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「HCOI-R1」孤独的 sxz", "background": "sxz 不擅长与人交往，于是他平常都喜欢找偏僻的地方坐着。今天，sxz 来到了食堂，他依旧想找一个偏僻的地方坐着，让他与其他所有人的曼哈顿距离之和最大。", "description": "食堂的座位可以看成一个被划分为 $n\\times m$ 的格子的矩形，长为 $n$，宽为 $m$，矩形内的每一个格子 $(i, j)(i \\in [1, n], j \\in [1, m])$ $(i,j$ 为整数$)$ 都是一个座位。\n\n现在，食堂里已经有了 $k$ 个人，其中第 $i(1 \\leq i \\leq k)$ 个人坐在 $(x_i, y_i)$ 处。sxz 想要找到一个座位，使得该座位与 $k$ 个人的曼哈顿距离之和最大。请你帮他找到这个最大值，剩下的就交给 sxz 吧！\n\n假设 sxz 坐在点 $(a,b)$，那么他和 $k$ 个人的曼哈顿距离之和是 $\\sum_{i=1}^{k}|a-x_i|+|b-y_i|$。\n\n**很显然，sxz 不能和 $\\bm k$ 个人中的任何一个人坐在同一个地方**。", "inputFormat": "第一行包含三个整数 $n, m, k$。\n\n接下来 $k$ 行，第 $i$ 行两个整数描述 $x_i, y_i$。", "outputFormat": "\n仅一行一个整数，描述这个值。注意它可能很大。", "hint": "### 样例解释 1\n\n最佳位置为 $(2,5)$，对于 $3$ 个人的曼哈顿距离分别为 $5, 3, 2$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n+ Subtask 0（15 pts）：$n, m \\leq 100$。\n+ Subtask 1（25 pts）：$n, m \\leq 10000$。\n+ Subtask 2（20 pts）：$k = 3$。\n+ Subtask 3（40 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq n, m \\leq 10^9$，$1\\leq k \\leq \\min\\{4 \\times 10^5, n\\times m-1\\}$，$1 \\leq x_i \\leq n$，$1 \\leq y_i \\leq m$，保证所有 $(x_i, y_i)$ 互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HCOI-R1」孤独的 sxz", "background": "sxz 不擅长与人交往，于是他平常都喜欢找偏僻的地方坐着。今天，sxz 来到了食堂，他依旧想找一个偏僻的地方坐着，让他与其他所有人的曼哈顿距离之和最大。", "description": "食堂的座位可以看成一个被划分为 $n\\times m$ 的格子的矩形，长为 $n$，宽为 $m$，矩形内的每一个格子 $(i, j)(i \\in [1, n], j \\in [1, m])$ $(i,j$ 为整数$)$ 都是一个座位。\n\n现在，食堂里已经有了 $k$ 个人，其中第 $i(1 \\leq i \\leq k)$ 个人坐在 $(x_i, y_i)$ 处。sxz 想要找到一个座位，使得该座位与 $k$ 个人的曼哈顿距离之和最大。请你帮他找到这个最大值，剩下的就交给 sxz 吧！\n\n假设 sxz 坐在点 $(a,b)$，那么他和 $k$ 个人的曼哈顿距离之和是 $\\sum_{i=1}^{k}|a-x_i|+|b-y_i|$。\n\n**很显然，sxz 不能和 $\\bm k$ 个人中的任何一个人坐在同一个地方**。", "inputFormat": "第一行包含三个整数 $n, m, k$。\n\n接下来 $k$ 行，第 $i$ 行两个整数描述 $x_i, y_i$。", "outputFormat": "\n仅一行一个整数，描述这个值。注意它可能很大。", "hint": "### 样例解释 1\n\n最佳位置为 $(2,5)$，对于 $3$ 个人的曼哈顿距离分别为 $5, 3, 2$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n+ Subtask 0（15 pts）：$n, m \\leq 100$。\n+ Subtask 1（25 pts）：$n, m \\leq 10000$。\n+ Subtask 2（20 pts）：$k = 3$。\n+ Subtask 3（40 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq n, m \\leq 10^9$，$1\\leq k \\leq \\min\\{4 \\times 10^5, n\\times m-1\\}$，$1 \\leq x_i \\leq n$，$1 \\leq y_i \\leq m$，保证所有 $(x_i, y_i)$ 互不相同。", "locale": "zh-CN"}}}
{"pid": "P10026", "type": "P", "difficulty": 4, "samples": [["3\n2 5\n2 4\n3 3", "No\nYes\nYes"], ["5\n4 869\n48 69\n8 328\n66 114514\n168 1919810\n", "No\nYes\nNo\nYes\nYes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "「HCOI-R1」哀之变化", "background": "哀喜欢数字。\n\n她还喜欢变化。", "description": "有一整数 $a$ 初始为 $1$。\n\n哀想让 $a$ 进行恰好 $k$ 次变化，每次从以下两种变化中选择一个：\n\n- $a\\gets a - 1$；\n- $a\\gets a \\times 2$。\n\n哀很好奇，经过 **恰好** $k$ 次变化后 $a$ 能否变成 $n$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 行，每行两个整数，依次为 $k$ 和 $n$，表示哀的一次询问。", "outputFormat": "共 $T$ 行，对于每次询问，若 $a$ 可以变成 $n$，输出 `Yes`，否则输出 `No`。", "hint": "### 样例解释 1\n\n+ 若 $k = 2$，$n = 5$，可以证明无解。\n+ 若 $k = 2$，$n = 4$，一种可能的操作方式如下：\n\t+ 第一步，$a \\gets a\\times 2 = 2$；\n\t+ 第二步，$a \\gets a\\times 2 = 4$。\n+ 若 $k = 3$，$n = 3$，一种可能的操作方式如下：\n\t+ 第一步，$a \\gets a\\times 2 = 2$；\n\t+ 第二步，$a \\gets a\\times 2 = 4$。\n\t+ 第三步，$a \\gets a-1 = 3$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（10 pts）：$T \\leq 10$，$k \\leq 15$。\n+ Subtask 1（25 pts）：$n, k \\leq 2\\times 10^3$。\n+ Subtask 2（65 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^5$，$0 \\leq n, k \\leq 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「HCOI-R1」哀之变化", "background": "哀喜欢数字。\n\n她还喜欢变化。", "description": "有一整数 $a$ 初始为 $1$。\n\n哀想让 $a$ 进行恰好 $k$ 次变化，每次从以下两种变化中选择一个：\n\n- $a\\gets a - 1$；\n- $a\\gets a \\times 2$。\n\n哀很好奇，经过 **恰好** $k$ 次变化后 $a$ 能否变成 $n$。", "inputFormat": "**本题有多组测试数据。**\n\n第一行，一个正整数 $T$，表示测试数据组数。\n\n接下来 $T$ 行，每行两个整数，依次为 $k$ 和 $n$，表示哀的一次询问。", "outputFormat": "共 $T$ 行，对于每次询问，若 $a$ 可以变成 $n$，输出 `Yes`，否则输出 `No`。", "hint": "### 样例解释 1\n\n+ 若 $k = 2$，$n = 5$，可以证明无解。\n+ 若 $k = 2$，$n = 4$，一种可能的操作方式如下：\n\t+ 第一步，$a \\gets a\\times 2 = 2$；\n\t+ 第二步，$a \\gets a\\times 2 = 4$。\n+ 若 $k = 3$，$n = 3$，一种可能的操作方式如下：\n\t+ 第一步，$a \\gets a\\times 2 = 2$；\n\t+ 第二步，$a \\gets a\\times 2 = 4$。\n\t+ 第三步，$a \\gets a-1 = 3$。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n+ Subtask 0（10 pts）：$T \\leq 10$，$k \\leq 15$。\n+ Subtask 1（25 pts）：$n, k \\leq 2\\times 10^3$。\n+ Subtask 2（65 pts）：无特殊限制。\n\n对于所有数据，$1 \\leq T \\leq 10^5$，$0 \\leq n, k \\leq 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P10027", "type": "P", "difficulty": 5, "samples": [["2 2 2 998244353 1\n1 2", "7"], ["5 5 0 114514 0", "70"], ["5 5 3 998244353 3\n3 4\n2 5\n4 4", "13782"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "洛谷原创", "O2优化", "洛谷月赛"], "title": "梦境世界", "background": "哆来咪爱旅行。", "description": "有一个长为 $n$ 宽为 $m$ 的网格，其左上角编号为位置 $(1, 1)$ 而右下角编号为位置 $(n, m)$。哆来咪想要从左上角走到右下角，每次她可以往右或向下走一格，但不能超出 $n\\times m$ 的网格边界。除此之外，有 $s$ 个禁止点是哆来咪无法走到的。\n\n哆来咪有 $k$ 个神奇药水，喝药水可以撤销之前最后一次没有被撤销的行走操作，但移动序列并不会删去最后一个元素。当然，在 $(1, 1)$ 位置时不能使用药水，且 **药水不会撤销上一个药水的操作**。例如：从 $A$ 到 $B$ 后，在 $B$ 处喝了药水，则移动序列为 $A \\to B \\to A$；从 $A$ 走到 $B$ 再走到 $C$，连续喝下两次药水，移动序列为 $A \\to B \\to C \\to B \\to A$。\n\n哆来咪认为一次 **旅行** 是指一次最终走到 $(n, m)$ 的行走路线。哆来咪想要求本质不同的 **旅行** 个数，答案对给定 $p$ 取模。哆来咪认为两次 **旅行** 不同，当且仅当两次旅行记录的移动序列不同。", "inputFormat": "第一行五个整数 $n, m, k, p, s$，意义见题目描述。\n\n接下来 $s$ 行，第 $i$ 行包含两个整数 $(x_i, y_i)$，表示不能经过网格中编号为 $(x_i, y_i)$ 的点。", "outputFormat": "输出一行一个整数，表示答案对 $p$ 取模后的结果。", "hint": "### 样例解释 1\n\n七种路线如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0t9so91p.png)\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（10pts）：$1 \\le n, m \\le 100$，$k=0$。\n- Subtask 1（15pts）：$1 \\le n, m \\le 10$，$k=1$。\n- Subtask 2（15pts）：$n=1$，$m \\le 100$，$k \\le 100$。\n- Subtask 3（25pts）：$1 \\le n, m \\le 100$，$k \\le 10$。\n- Subtask 4（35pts）：无特殊限制。\n\n\n对于所有数据，保证 $1 \\le n, m \\le 100$，$0 \\le k \\le 100$，$2 \\le p \\le 10^9 + 9$，$0 \\le s \\le n \\times m$，$1 \\le x_i \\le n$，$1 \\le y_i \\le m$，且 $(x_i, y_i)$ 互不相同。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "梦境世界", "background": "哆来咪爱旅行。", "description": "有一个长为 $n$ 宽为 $m$ 的网格，其左上角编号为位置 $(1, 1)$ 而右下角编号为位置 $(n, m)$。哆来咪想要从左上角走到右下角，每次她可以往右或向下走一格，但不能超出 $n\\times m$ 的网格边界。除此之外，有 $s$ 个禁止点是哆来咪无法走到的。\n\n哆来咪有 $k$ 个神奇药水，喝药水可以撤销之前最后一次没有被撤销的行走操作，但移动序列并不会删去最后一个元素。当然，在 $(1, 1)$ 位置时不能使用药水，且 **药水不会撤销上一个药水的操作**。例如：从 $A$ 到 $B$ 后，在 $B$ 处喝了药水，则移动序列为 $A \\to B \\to A$；从 $A$ 走到 $B$ 再走到 $C$，连续喝下两次药水，移动序列为 $A \\to B \\to C \\to B \\to A$。\n\n哆来咪认为一次 **旅行** 是指一次最终走到 $(n, m)$ 的行走路线。哆来咪想要求本质不同的 **旅行** 个数，答案对给定 $p$ 取模。哆来咪认为两次 **旅行** 不同，当且仅当两次旅行记录的移动序列不同。", "inputFormat": "第一行五个整数 $n, m, k, p, s$，意义见题目描述。\n\n接下来 $s$ 行，第 $i$ 行包含两个整数 $(x_i, y_i)$，表示不能经过网格中编号为 $(x_i, y_i)$ 的点。", "outputFormat": "输出一行一个整数，表示答案对 $p$ 取模后的结果。", "hint": "### 样例解释 1\n\n七种路线如下：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0t9so91p.png)\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 0（10pts）：$1 \\le n, m \\le 100$，$k=0$。\n- Subtask 1（15pts）：$1 \\le n, m \\le 10$，$k=1$。\n- Subtask 2（15pts）：$n=1$，$m \\le 100$，$k \\le 100$。\n- Subtask 3（25pts）：$1 \\le n, m \\le 100$，$k \\le 10$。\n- Subtask 4（35pts）：无特殊限制。\n\n\n对于所有数据，保证 $1 \\le n, m \\le 100$，$0 \\le k \\le 100$，$2 \\le p \\le 10^9 + 9$，$0 \\le s \\le n \\times m$，$1 \\le x_i \\le n$，$1 \\le y_i \\le m$，且 $(x_i, y_i)$ 互不相同。\n", "locale": "zh-CN"}}}
{"pid": "P10028", "type": "P", "difficulty": 7, "samples": [["6 5\n5 4 2 3 1 6\n3\n5\n6\n3\n6", "3\n6\n4\n2\n10"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2000", "O2优化", "Ynoi"], "title": "[Ynoi2000] pri", "background": "", "description": "给定 $1,\\dots,n$ 的排列 $a_1,\\dots,a_n$ ；\n\n共 $m$ 次操作，每次操作给出 $x$ ，首先进行修改，将 $a_1,a_2,\\dots,a_x$ 翻转为 $a_x,\\dots,a_2,a_1$ ，然后查询有多少组不同的 $(i,j)$ ，满足 $1\\le i<j\\le x$ 使得 $a_i<a_j$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行一个整数 $x$ ，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n所有数值为整数。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le x\\le n$，$1\\le n\\le 2\\times 10^5,\\;1\\le m\\le 5\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2000] pri", "background": "", "description": "给定 $1,\\dots,n$ 的排列 $a_1,\\dots,a_n$ ；\n\n共 $m$ 次操作，每次操作给出 $x$ ，首先进行修改，将 $a_1,a_2,\\dots,a_x$ 翻转为 $a_x,\\dots,a_2,a_1$ ，然后查询有多少组不同的 $(i,j)$ ，满足 $1\\le i<j\\le x$ 使得 $a_i<a_j$ 。", "inputFormat": "第一行两个整数 $n,m$ ；\n\n第二行 $n$ 个整数依次表示 $a_1,\\dots,a_n$ ；\n\n接下来 $m$ 行，每行一个整数 $x$ ，表示一次操作。", "outputFormat": "共 $m$ 行，每行一个整数，依次表示每次操作的查询的答案。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n所有数值为整数。\n\n对于 $100\\%$ 的数据，满足 $1\\le a_i\\le n$，$1\\le x\\le n$，$1\\le n\\le 2\\times 10^5,\\;1\\le m\\le 5\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10029", "type": "P", "difficulty": 1, "samples": [["3\n1 2 10\n9 11 11\n55 15 14", "Alice\nBob\nLasting Battle"]], "limits": {"time": [1000, 1000], "memory": [524288, 524288]}, "tags": ["模拟", "数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Cfz Round 3」Battle", "background": "", "description": "Alice 和 Bob 正在进行一个游戏，游戏的规则如下：\n\n- Alice 初始时拥有一个整数 $n$，Bob 初始时拥有一个整数 $m$；\n- 从 Alice 开始，两人轮流对**对方拥有的整数**进行操作：设对方此时拥有的整数为 $h$，使 $h$ 的值**减去** $h \\bmod p$，其中 $\\bmod$ 表示**取模**运算，$p$ 是给定的一个定值；\n- 两人中率先使对方拥有的整数变为 $0$ 的人获得胜利，若在两人分别进行 $10^{10^{9961}}$ 次操作后仍无人获得胜利，则认为游戏平局。\n\n你需要判断谁将会获得胜利，或报告游戏将会平局。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入三个整数 $n,m,p$。", "outputFormat": "对于每组数据，一行一个字符串表示答案：\n\n- 若 Alice 将会获得胜利，则输出 `Alice`；\n- 若 Bob 将会获得胜利，则输出 `Bob`；\n- 若游戏将会平局，则输出 `Lasting Battle`。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，Alice 在第一次操作中就会将 Bob 拥有的整数从 $2$ 变为 $2-(2\\bmod 10)$ 即 $0$，所以 Alice 将会获得胜利。\n\n对于第 $2$ 组数据，Alice 在第一次操作中会将 Bob 拥有的整数从 $11$ 变为 $11-(11\\bmod 11)$ 即 $11$，而 Bob 在第一次操作中会将 Alice 拥有的整数从 $9$ 变为 $9-(9 \\bmod 11)$ 即 $0$，所以 Bob 将会获得胜利。\n\n对于第 $3$ 组数据，可以证明游戏将会平局。\n\n#### 「数据范围」\n\n对于所有数据，$1 \\leq T \\leq 5000$，$1 \\leq n, m, p \\leq 2\\times 10^9$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Battle", "background": "", "description": "Alice 和 Bob 正在进行一个游戏，游戏的规则如下：\n\n- Alice 初始时拥有一个整数 $n$，Bob 初始时拥有一个整数 $m$；\n- 从 Alice 开始，两人轮流对**对方拥有的整数**进行操作：设对方此时拥有的整数为 $h$，使 $h$ 的值**减去** $h \\bmod p$，其中 $\\bmod$ 表示**取模**运算，$p$ 是给定的一个定值；\n- 两人中率先使对方拥有的整数变为 $0$ 的人获得胜利，若在两人分别进行 $10^{10^{9961}}$ 次操作后仍无人获得胜利，则认为游戏平局。\n\n你需要判断谁将会获得胜利，或报告游戏将会平局。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入三个整数 $n,m,p$。", "outputFormat": "对于每组数据，一行一个字符串表示答案：\n\n- 若 Alice 将会获得胜利，则输出 `Alice`；\n- 若 Bob 将会获得胜利，则输出 `Bob`；\n- 若游戏将会平局，则输出 `Lasting Battle`。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，Alice 在第一次操作中就会将 Bob 拥有的整数从 $2$ 变为 $2-(2\\bmod 10)$ 即 $0$，所以 Alice 将会获得胜利。\n\n对于第 $2$ 组数据，Alice 在第一次操作中会将 Bob 拥有的整数从 $11$ 变为 $11-(11\\bmod 11)$ 即 $11$，而 Bob 在第一次操作中会将 Alice 拥有的整数从 $9$ 变为 $9-(9 \\bmod 11)$ 即 $0$，所以 Bob 将会获得胜利。\n\n对于第 $3$ 组数据，可以证明游戏将会平局。\n\n#### 「数据范围」\n\n对于所有数据，$1 \\leq T \\leq 5000$，$1 \\leq n, m, p \\leq 2\\times 10^9$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10030", "type": "P", "difficulty": 2, "samples": [["3\n5 2 1 4\n3 2 2 1\n7 2 0 3", "Yes\nYes\nNo"]], "limits": {"time": [1000, 1000], "memory": [524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "洛谷月赛"], "title": "「Cfz Round 3」Change", "background": "", "description": "给定一个质数 $p$ 和三个整数 $a,b,c$，你需要对一个初始为 $0$ 的整数 $x$ 进行操作，每次操作可以进行如下的两种之一：\n\n- 第一种操作：令 $x$ 的值变为 $(x \\times a) \\bmod p$。\n- 第二种操作：令 $x$ 的值变为 $(x+b) \\bmod p$。\n\n其中，$\\bmod$ 表示**取模**运算。\n\n你需要求出能否在**正整数次**操作后得到 $c$，若能则输出 `Yes`，否则输出 `No`。\n\n本题中字符串大小写不敏感，即 `yes`、`yeS`、`yEs`、`Yes`、`YEs`、`YeS`、`yES`、`Yes` 都被认为是 `Yes`，`No` 同理。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行四个整数 $p,a,b,c$。", "outputFormat": "对于每组测试数据，输出一行：\n\n- 若能在正整数次操作后得到 $c$，则输出 `Yes`；\n- 若不能在正整数次操作后得到 $c$，则输出 `No`。\n\n本题中字符串大小写不敏感，即 `yes`、`yeS`、`yEs`、`Yes`、`YEs`、`YeS`、`yES`、`Yes` 都被认为是 `Yes`，`No` 同理。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，进行 $1$ 次第二种操作后进行 $2$ 次第一种操作即可。\n\n对于第 $2$ 组数据，进行 $1$ 次第二种操作后进行 $1$ 次第一种操作即可。\n\n对于第 $3$ 组数据，可以证明无论如何操作都无法得到 $3$。\n\n#### 「数据范围」\n\n对于所有数据，$1\\le T \\le 100$，$0\\le a,b,c < p \\le 10^9$，保证 $p$ 是质数。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Change", "background": "", "description": "给定一个质数 $p$ 和三个整数 $a,b,c$，你需要对一个初始为 $0$ 的整数 $x$ 进行操作，每次操作可以进行如下的两种之一：\n\n- 第一种操作：令 $x$ 的值变为 $(x \\times a) \\bmod p$。\n- 第二种操作：令 $x$ 的值变为 $(x+b) \\bmod p$。\n\n其中，$\\bmod$ 表示**取模**运算。\n\n你需要求出能否在**正整数次**操作后得到 $c$，若能则输出 `Yes`，否则输出 `No`。\n\n本题中字符串大小写不敏感，即 `yes`、`yeS`、`yEs`、`Yes`、`YEs`、`YeS`、`yES`、`Yes` 都被认为是 `Yes`，`No` 同理。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行四个整数 $p,a,b,c$。", "outputFormat": "对于每组测试数据，输出一行：\n\n- 若能在正整数次操作后得到 $c$，则输出 `Yes`；\n- 若不能在正整数次操作后得到 $c$，则输出 `No`。\n\n本题中字符串大小写不敏感，即 `yes`、`yeS`、`yEs`、`Yes`、`YEs`、`YeS`、`yES`、`Yes` 都被认为是 `Yes`，`No` 同理。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，进行 $1$ 次第二种操作后进行 $2$ 次第一种操作即可。\n\n对于第 $2$ 组数据，进行 $1$ 次第二种操作后进行 $1$ 次第一种操作即可。\n\n对于第 $3$ 组数据，可以证明无论如何操作都无法得到 $3$。\n\n#### 「数据范围」\n\n对于所有数据，$1\\le T \\le 100$，$0\\le a,b,c < p \\le 10^9$，保证 $p$ 是质数。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10031", "type": "P", "difficulty": 3, "samples": [["3\n2\n3\n6\n", "3\n3\n5"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "最大公约数 gcd", "洛谷月赛", "Ad-hoc"], "title": "「Cfz Round 3」Xor with Gcd", "background": "她是午夜潜入海风漂流的沙砾\n\n极光与她一齐许下明日愿景\n\n飞身电波铺满天穹而海仍平静\n\n“愿世界都繁花似锦”", "description": "给定一个整数 $n$。\n\n你需要求出 $\\bigoplus\\limits_{i=1}^{n} \\gcd(i,n)$，即 $\\gcd(1,n) \\oplus \\gcd(2,n) \\oplus \\cdots \\oplus \\gcd(n,n)$ 的值。其中 $\\gcd(a,b)$ 表示 $a$ 和 $b$ 的**最大公约数**，$\\bigoplus$ 表示**按位异或**，即 C++ 中的 `^`。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行一个整数 $n$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示 $\\bigoplus\\limits_{i=1}^{n} \\gcd(i,n)$ 的值。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$\\bigoplus\\limits_{i=1}^{2} \\gcd(i,2)=\\gcd(1,2)\\oplus\\gcd(2,2)=1\\oplus2=3$。\n\n对于第 $2$ 组数据，$\\bigoplus\\limits_{i=1}^{3} \\gcd(i,3)=\\gcd(1,3)\\oplus\\gcd(2,3)\\oplus\\gcd(3,3)=1\\oplus1\\oplus3=3$。\n\n#### 「数据范围」\n\n对于所有数据，$1 \\le T \\le 100$，$1 \\le n \\le 10^{18}$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Xor with Gcd", "background": "她是午夜潜入海风漂流的沙砾\n\n极光与她一齐许下明日愿景\n\n飞身电波铺满天穹而海仍平静\n\n“愿世界都繁花似锦”", "description": "给定一个整数 $n$。\n\n你需要求出 $\\bigoplus\\limits_{i=1}^{n} \\gcd(i,n)$，即 $\\gcd(1,n) \\oplus \\gcd(2,n) \\oplus \\cdots \\oplus \\gcd(n,n)$ 的值。其中 $\\gcd(a,b)$ 表示 $a$ 和 $b$ 的**最大公约数**，$\\bigoplus$ 表示**按位异或**，即 C++ 中的 `^`。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据，输入一行一个整数 $n$。", "outputFormat": "对于每组测试数据，输出一行一个整数，表示 $\\bigoplus\\limits_{i=1}^{n} \\gcd(i,n)$ 的值。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$\\bigoplus\\limits_{i=1}^{2} \\gcd(i,2)=\\gcd(1,2)\\oplus\\gcd(2,2)=1\\oplus2=3$。\n\n对于第 $2$ 组数据，$\\bigoplus\\limits_{i=1}^{3} \\gcd(i,3)=\\gcd(1,3)\\oplus\\gcd(2,3)\\oplus\\gcd(3,3)=1\\oplus1\\oplus3=3$。\n\n#### 「数据范围」\n\n对于所有数据，$1 \\le T \\le 100$，$1 \\le n \\le 10^{18}$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10032", "type": "P", "difficulty": 4, "samples": [["3\n4 1\n1 0 1 2\n4 5\n9 9 6 1\n3 5\n1 3 0", "3 0 3 2\n0 0 0 0\n1 2 0"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "排序", "其它技巧", "洛谷月赛", "Ad-hoc"], "title": "「Cfz Round 3」Mex of Sequence", "background": "", "description": "**请注意本题特殊的时间限制。**\n\n给定一个长度为 $n$ 的序列 $a$ 和一个整数 $m$。\n\n我们定义一次操作为，**同时**将序列 $a$ 中的**每个**元素 $a_i$ 替换为序列 $a$ 中除 $a_i$ 以外的所有元素的 $\\operatorname{mex}$。\n\n你需要求出进行 $m$ 次操作后的序列 $a$。\n\n其中，一个序列的 $\\operatorname{mex}$ 为该序列中**未出现过的最小自然数**，例如：\n\n- $\\operatorname{mex}\\{1,2,3\\}=0$；\n- $\\operatorname{mex}\\{0\\}=1$；\n- $\\operatorname{mex}\\{1,0,2,4\\}=3$；\n- $\\operatorname{mex}\\{2,1,3,0,2\\}=4$。\n\n特别地，当序列为空时，该序列的 $\\operatorname{mex}$ 为 $0$。 ", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入两个整数 $n,m$。\n- 第二行输入 $n$ 个整数，表示给定的序列 $a$。", "outputFormat": "对于每组测试数据，输出一行，包含用空格分隔的 $n$ 个整数，表示进行 $m$ 次操作后的序列 $a$。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，因为 $\\operatorname{mex}\\{0,1,2\\}=3$，$\\operatorname{mex}\\{1,1,2\\}=0$，$\\operatorname{mex}\\{1,0,2\\}=3$，$\\operatorname{mex}\\{1,0,1\\}=2$，所以进行 $1$ 次操作后的序列 $a$ 为 $\\{3,0,3,2\\}$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 1000$，$1 \\le n \\le 10^6$，$1 \\le m \\le 10^9$，$0 \\le a_i \\le 10^9$，$\\sum n \\le 10^6$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Mex of Sequence", "background": "", "description": "**请注意本题特殊的时间限制。**\n\n给定一个长度为 $n$ 的序列 $a$ 和一个整数 $m$。\n\n我们定义一次操作为，**同时**将序列 $a$ 中的**每个**元素 $a_i$ 替换为序列 $a$ 中除 $a_i$ 以外的所有元素的 $\\operatorname{mex}$。\n\n你需要求出进行 $m$ 次操作后的序列 $a$。\n\n其中，一个序列的 $\\operatorname{mex}$ 为该序列中**未出现过的最小自然数**，例如：\n\n- $\\operatorname{mex}\\{1,2,3\\}=0$；\n- $\\operatorname{mex}\\{0\\}=1$；\n- $\\operatorname{mex}\\{1,0,2,4\\}=3$；\n- $\\operatorname{mex}\\{2,1,3,0,2\\}=4$。\n\n特别地，当序列为空时，该序列的 $\\operatorname{mex}$ 为 $0$。 ", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入两个整数 $n,m$。\n- 第二行输入 $n$ 个整数，表示给定的序列 $a$。", "outputFormat": "对于每组测试数据，输出一行，包含用空格分隔的 $n$ 个整数，表示进行 $m$ 次操作后的序列 $a$。", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，因为 $\\operatorname{mex}\\{0,1,2\\}=3$，$\\operatorname{mex}\\{1,1,2\\}=0$，$\\operatorname{mex}\\{1,0,2\\}=3$，$\\operatorname{mex}\\{1,0,1\\}=2$，所以进行 $1$ 次操作后的序列 $a$ 为 $\\{3,0,3,2\\}$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 1000$，$1 \\le n \\le 10^6$，$1 \\le m \\le 10^9$，$0 \\le a_i \\le 10^9$，$\\sum n \\le 10^6$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10033", "type": "P", "difficulty": 4, "samples": [["4\n3\n3 2 1\n2\n1 2\n5\n4 2 1 5 3\n7\n5 7 3 1 2 4 6", "1 3 3\n-1\n5 3 2 1 1\n2 3 5 4 6 3 1"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "Special Judge", "O2优化", "构造", "洛谷月赛", "Ad-hoc"], "title": "「Cfz Round 3」Sum of Permutation", "background": "", "description": "**请注意本题特殊的时间限制。**\n\n给定一个 $1\\sim n$ 的排列 $p$。\n\n你需要构造一个长度为 $n$ 的序列 $a$，满足：\n\n- 序列 $a$ 中的每个元素均为不大于 $n$ 的正整数；\n- 不存在有序整数二元组 $(l,r)$，满足 $1 \\le l \\le r \\le n$ 且 $\\sum\\limits_{i=l}^r a_i=\\sum\\limits_{i=l}^r p_i$；\n\n或报告无解。\n\n其中，$1\\sim n$ 的排列指满足所有不大于 $n$ 的正整数恰好出现一次的序列。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入一个整数 $n$。\n- 第二行输入 $n$ 个整数，表示给定的排列 $p$。", "outputFormat": "对于每组数据，输出一行：\n\n- 若存在满足条件的序列 $a$，则输出用空格分隔的 $n$ 个整数，表示你构造的序列 $a$；\n- 若不存在满足条件的序列 $a$，则输出 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$\\{1,3,3\\}$ 和 $\\{1,1,3\\}$ 均为满足条件的序列 $a$。\n\n对于第 $2$ 组数据，可以证明不存在满足条件的序列 $a$。\n\n对于第 $3$ 组数据，除 $\\{5,3,2,1,1 \\}$ 外，$\\{3,4,5,3,2 \\}$、$\\{1,4,5,3,4 \\}$、$\\{5,3,3,4,5\\}$ 等均为满足条件的序列 $a$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 5000$，$2 \\le n \\le 10^6$，$\\sum n \\le 10^6$，保证 $p$ 是 $1\\sim n$ 的排列。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**\n\n**本题输入输出量较大，请使用较快的输入输出方式。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Sum of Permutation", "background": "", "description": "**请注意本题特殊的时间限制。**\n\n给定一个 $1\\sim n$ 的排列 $p$。\n\n你需要构造一个长度为 $n$ 的序列 $a$，满足：\n\n- 序列 $a$ 中的每个元素均为不大于 $n$ 的正整数；\n- 不存在有序整数二元组 $(l,r)$，满足 $1 \\le l \\le r \\le n$ 且 $\\sum\\limits_{i=l}^r a_i=\\sum\\limits_{i=l}^r p_i$；\n\n或报告无解。\n\n其中，$1\\sim n$ 的排列指满足所有不大于 $n$ 的正整数恰好出现一次的序列。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入一个整数 $n$。\n- 第二行输入 $n$ 个整数，表示给定的排列 $p$。", "outputFormat": "对于每组数据，输出一行：\n\n- 若存在满足条件的序列 $a$，则输出用空格分隔的 $n$ 个整数，表示你构造的序列 $a$；\n- 若不存在满足条件的序列 $a$，则输出 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$\\{1,3,3\\}$ 和 $\\{1,1,3\\}$ 均为满足条件的序列 $a$。\n\n对于第 $2$ 组数据，可以证明不存在满足条件的序列 $a$。\n\n对于第 $3$ 组数据，除 $\\{5,3,2,1,1 \\}$ 外，$\\{3,4,5,3,2 \\}$、$\\{1,4,5,3,4 \\}$、$\\{5,3,3,4,5\\}$ 等均为满足条件的序列 $a$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 5000$，$2 \\le n \\le 10^6$，$\\sum n \\le 10^6$，保证 $p$ 是 $1\\sim n$ 的排列。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**\n\n**本题输入输出量较大，请使用较快的输入输出方式。**", "locale": "zh-CN"}}}
{"pid": "P10034", "type": "P", "difficulty": 5, "samples": [["4\n5 3\n10011\n4 5\n1000\n5 6\n11111\n9 6\n011111011", "4 3 2 5 1\n-1\n5 4 2 3 1\n3 1 2 6 4 5 9 7 8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "图论", "洛谷原创", "Special Judge", "O2优化", "背包 DP", "素数判断,质数,筛法", "构造", "洛谷月赛", "链表"], "title": "「Cfz Round 3」Circle", "background": "", "description": "给定一个长度为 $n$ 的 $\\tt{01}$ 串 $S$ 和一个非负整数 $l$。\n\n我们定义，对于一个 $1\\sim n$ 的排列 $t$ 和非负整数 $k$：\n\n$$f_{t,k}(i)=\\begin{cases}i & k=0\\\\f_{t,k-1}(t_i) & k \\neq 0\\end{cases}$$\n\n你需要构造一个 $1\\sim n$ 的排列 $p$，满足：\n\n- 对于任意一个不大于 $n$ 的正整数 $i$，都满足 $p_i \\neq i$；\n- 若 $S_i$ 为 $\\tt1$，则 $f_{p,l}(i)=i$（若 $S_i$ 为 $\\tt0$ 则没有限制）；\n\n或报告无解。\n\n其中，$1\\sim n$ 的排列指满足所有不大于 $n$ 的正整数恰好出现一次的序列。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入两个整数 $n,l$。\n- 第二行输入一个长度为 $n$ 的 $\\tt{01}$ 串表示 $S$。", "outputFormat": "对于每组数据，输出一行：\n\n- 若存在满足条件的排列 $p$，则输出用空格分隔的 $n$ 个整数，表示你构造的排列 $p$；\n- 若不存在满足条件的排列 $p$，则输出 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$f_{p,3}(1)=f_{p,2}(4)=f_{p,1}(5)=f_{p,0}(1)=1$，其余数同理，所以 $p$ 为 $\\{4,3,2,5,1\\}$ 时满足条件。\n\n对于第 $2$ 组数据，可以证明不存在满足条件的排列 $p$。\n\n对于第 $3$ 组数据，$\\{2,1,4,5,3\\}$ 等也为满足条件的排列 $p$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 100$，$2 \\le n \\le 5\\times 10^5$，$0 \\le l \\le 10^{18}$，$\\sum n \\le 5\\times 10^5$，保证 $S$ 中只包含 $\\tt{0}$ 和 $\\tt{1}$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Cfz Round 3」Circle", "background": "", "description": "给定一个长度为 $n$ 的 $\\tt{01}$ 串 $S$ 和一个非负整数 $l$。\n\n我们定义，对于一个 $1\\sim n$ 的排列 $t$ 和非负整数 $k$：\n\n$$f_{t,k}(i)=\\begin{cases}i & k=0\\\\f_{t,k-1}(t_i) & k \\neq 0\\end{cases}$$\n\n你需要构造一个 $1\\sim n$ 的排列 $p$，满足：\n\n- 对于任意一个不大于 $n$ 的正整数 $i$，都满足 $p_i \\neq i$；\n- 若 $S_i$ 为 $\\tt1$，则 $f_{p,l}(i)=i$（若 $S_i$ 为 $\\tt0$ 则没有限制）；\n\n或报告无解。\n\n其中，$1\\sim n$ 的排列指满足所有不大于 $n$ 的正整数恰好出现一次的序列。", "inputFormat": "**本题有多组测试数据。**\n\n第一行输入一个整数 $T$，表示测试数据组数。\n\n接下来依次输入每组测试数据。对于每组测试数据：\n\n- 第一行输入两个整数 $n,l$。\n- 第二行输入一个长度为 $n$ 的 $\\tt{01}$ 串表示 $S$。", "outputFormat": "对于每组数据，输出一行：\n\n- 若存在满足条件的排列 $p$，则输出用空格分隔的 $n$ 个整数，表示你构造的排列 $p$；\n- 若不存在满足条件的排列 $p$，则输出 $-1$。\n\n**所有满足要求的输出均可通过。**", "hint": "#### 「样例解释 #1」\n\n对于第 $1$ 组数据，$f_{p,3}(1)=f_{p,2}(4)=f_{p,1}(5)=f_{p,0}(1)=1$，其余数同理，所以 $p$ 为 $\\{4,3,2,5,1\\}$ 时满足条件。\n\n对于第 $2$ 组数据，可以证明不存在满足条件的排列 $p$。\n\n对于第 $3$ 组数据，$\\{2,1,4,5,3\\}$ 等也为满足条件的排列 $p$。\n\n#### 「数据范围」\n\n设 $\\sum n$ 表示单个测试点中 $n$ 的和。\n\n对于所有数据，$1 \\le T \\le 100$，$2 \\le n \\le 5\\times 10^5$，$0 \\le l \\le 10^{18}$，$\\sum n \\le 5\\times 10^5$，保证 $S$ 中只包含 $\\tt{0}$ 和 $\\tt{1}$。\n\n**只有你通过本题的所有测试点，你才能获得本题的分数。**", "locale": "zh-CN"}}}
{"pid": "P10035", "type": "P", "difficulty": 3, "samples": [["1\n1", "1"], ["3\n494699\n494699494699\n494699494699494699", "994161775\n899186285\n348815909"]], "limits": {"time": [500, 500], "memory": [524288, 524288]}, "tags": ["2024", "数论", "洛谷原创", "O2优化", "Ad-hoc"], "title": "「FAOI-R2」Paint", "background": "小 Y 是一个胖子，他最爱下楼梯了，因为下楼梯很省力气，但是他却有强迫症。\n\n由于刷漆工人 HG 的油漆不够，每一层台阶都只刷了一半——左边或右边，好让小 Y 下楼时不踩到油漆。（~~众人：这是什么逻辑？~~）", "description": "整个楼梯共 $3^N$ 级台阶。\n\nHG 刷漆的规律是：对于**从上到下**第 $I$ 级台阶，若 $V_3(I)$ 是奇数，则刷在左边，否则刷在右边。**$V_3(I)$ 的定义请见提示。**\n\n小 Y 因为强迫症，要求自己不能踩到油漆。\n\n现在他来求助你，他最少会踩到油漆多少次？\n\n- 一次只能下一级台阶。\n- 如果小 Y 站在当前台阶的左边，则他必须站在下一级台阶的右边，反之亦然。\n- 如果油漆在当前台阶左边，那么需要站在当前台阶右边才算没踩到油漆，反之亦然。\n- 小 Y 唯一可以控制的是：他在第 $1$ 级台阶上站在哪边。也就是说，小 Y 只有 $2$ 种下楼梯的方案供选择。\n\n答案对 $10^9+7$ 取模。\n\n### 形式化题意\n\n给定三个 01 串 $A,B,C$，长度均为 $3^N$。字符串下标从 $1$ 开始。\n\n其中：\n\n- $A=\\texttt{101010101\\ldots101}$；\n- $B=\\texttt{010101010\\ldots010}$；\n- $C=\\texttt{001001000\\ldots}$；具体来说，第 $I$ 个字符为 $V_3(I) \\bmod 2$。**$V_3(I)$ 的定义请见提示。**\n\n记 $\\operatorname{mc}(X,Y)$ 为字符串 $X$ 和 $Y$ 中匹配的字符的个数。\n\n试求：\n\n$$\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}$$\n\n答案对 $10^9+7$ 取模。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，代表数据组数。\n\n下面 $T$ 行，每行一个正整数 $N$。", "outputFormat": "每组数据一行，输出踩到油漆的最少次数，即 $\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}$。\n\n**答案对 $10^9+7$ 取模。**", "hint": "样例 $1$ 解释：\n\n- $A=\\texttt{101}$；\n- $B=\\texttt{010}$；\n- $C=\\texttt{001}$；\n- $\\operatorname{mc}(A,C)=2$；\n- $\\operatorname{mc}(B,C)=1$；\n- $\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}=1$。\n\n------------\n\n| 测试点编号 | $T \\le$ | $N \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $50$ |\n| $2$ | $10^5$ | $10^{18}$ | $50$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^{5}$，$1 \\le N \\le 10^{18}$。\n\n> **提示：** $V_3(X)$ 指 $X$ 中质因数 $3$ 的个数。例如，$V_3(14)=0$，$V_3(18)=2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R2」Paint", "background": "小 Y 是一个胖子，他最爱下楼梯了，因为下楼梯很省力气，但是他却有强迫症。\n\n由于刷漆工人 HG 的油漆不够，每一层台阶都只刷了一半——左边或右边，好让小 Y 下楼时不踩到油漆。（~~众人：这是什么逻辑？~~）", "description": "整个楼梯共 $3^N$ 级台阶。\n\nHG 刷漆的规律是：对于**从上到下**第 $I$ 级台阶，若 $V_3(I)$ 是奇数，则刷在左边，否则刷在右边。**$V_3(I)$ 的定义请见提示。**\n\n小 Y 因为强迫症，要求自己不能踩到油漆。\n\n现在他来求助你，他最少会踩到油漆多少次？\n\n- 一次只能下一级台阶。\n- 如果小 Y 站在当前台阶的左边，则他必须站在下一级台阶的右边，反之亦然。\n- 如果油漆在当前台阶左边，那么需要站在当前台阶右边才算没踩到油漆，反之亦然。\n- 小 Y 唯一可以控制的是：他在第 $1$ 级台阶上站在哪边。也就是说，小 Y 只有 $2$ 种下楼梯的方案供选择。\n\n答案对 $10^9+7$ 取模。\n\n### 形式化题意\n\n给定三个 01 串 $A,B,C$，长度均为 $3^N$。字符串下标从 $1$ 开始。\n\n其中：\n\n- $A=\\texttt{101010101\\ldots101}$；\n- $B=\\texttt{010101010\\ldots010}$；\n- $C=\\texttt{001001000\\ldots}$；具体来说，第 $I$ 个字符为 $V_3(I) \\bmod 2$。**$V_3(I)$ 的定义请见提示。**\n\n记 $\\operatorname{mc}(X,Y)$ 为字符串 $X$ 和 $Y$ 中匹配的字符的个数。\n\n试求：\n\n$$\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}$$\n\n答案对 $10^9+7$ 取模。", "inputFormat": "**本题有多组数据。**\n\n第一行，一个正整数 $T$，代表数据组数。\n\n下面 $T$ 行，每行一个正整数 $N$。", "outputFormat": "每组数据一行，输出踩到油漆的最少次数，即 $\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}$。\n\n**答案对 $10^9+7$ 取模。**", "hint": "样例 $1$ 解释：\n\n- $A=\\texttt{101}$；\n- $B=\\texttt{010}$；\n- $C=\\texttt{001}$；\n- $\\operatorname{mc}(A,C)=2$；\n- $\\operatorname{mc}(B,C)=1$；\n- $\\min\\{\\operatorname{mc}(A,C),\\operatorname{mc}(B,C)\\}=1$。\n\n------------\n\n| 测试点编号 | $T \\le$ | $N \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $50$ |\n| $2$ | $10^5$ | $10^{18}$ | $50$ |\n\n对于 $100\\%$ 的数据，$1 \\le T \\le 10^{5}$，$1 \\le N \\le 10^{18}$。\n\n> **提示：** $V_3(X)$ 指 $X$ 中质因数 $3$ 的个数。例如，$V_3(14)=0$，$V_3(18)=2$。", "locale": "zh-CN"}}}
{"pid": "P10036", "type": "P", "difficulty": 5, "samples": [["4 4\n1 2 3 4", "6"], ["5 1\n1", "3"], ["12345678 9\n1 2 3 45 67 89 123 456 789", "998899106"]], "limits": {"time": [1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750, 1750], "memory": [8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192]}, "tags": ["动态规划 DP", "倍增", "2024", "洛谷原创", "O2优化", "动态规划优化", "前缀和"], "title": "「FAOI-R2」A trip to Macao", "background": "## 本题目背景仅供引出题意，无任何不良诱导。\n## 出题人特别提醒：请勿在赌博非法地区模仿题目中的行为\n\n这天，xhabc66 来到澳门旅游。一下飞机，他直奔赌场。\n\n可是，今天的赌场格外热闹，不知发生了什么。\n\nxhabc66 打开手机一看：啊，原来今天是 $12$ 月 $20$ 日！\n\n因此，赌场在做活动！一年一度！机不可失！\n\nxhabc66 径直走进了赌场。", "description": "赌场贴出了如下规则（**你可以忽略没有加粗的内容**）：\n\n1. 所有玩家在注册后方可进行游戏。\n2. 活动期间，**新注册的玩家可从抽奖盒内拿走一枚筹码。抽奖盒内共 $m$ 种筹码，面值分别为 $a_1,a_2,\\ldots,a_m$ 澳元（均为正整数）**，每种一个，保证公平。\n3. 本赌场仅提供一种游戏：猜拳。游戏开始时，双方各下注相同数量（以 $1$ 澳元为单位）的筹码；若猜拳分出胜负，则胜者拿走所有下注。\n4. 根据上一条可知，**玩家一次游戏中赢得的筹码（正整数）不得超过自身所携带的筹码**。\n5. 公平游戏，严禁作弊，违者严惩。\n\nxhabc66 注册后，**连赢数局（可以是 $0$ 局，但没有输过，也没有平局过）**，最终带着 $n$ 澳元走出了赌场。\n\n出赌场后，xhabc66 突然好奇他是怎么赢到这么多钱的。然而，他不记得他每局下了多少注，不记得他一共玩了多少局，甚至不记得他开始时拿走的筹码是什么面值。\n\n**他想知道：他有多少种不同的赢钱方法。**\n\n**答案对 $10^9+7$ 取模。**\n\n> 两种赢钱方法在满足以下任何一个条件时，xhabc66 都会认为它们不同：\n>\n> - 他某一局的下注金额不同；\n> - 他玩的局数不同；\n> - 他开始时拿走的筹码的面值不同。\n\n### 形式化题意\n\n求有多少个数列 $\\{b_k\\}$ 满足：\n\n1. $\\forall i \\in [1,k],b_i \\in \\mathbb{N^*}$；\n2. $\\forall i \\in [2,k],b_i \\in [b_{i-1}+1,b_{i-1} \\times 2]$；\n3. $b_1 \\in\\{a_m\\}$；\n4. $b_k=n$。\n\n数列的长度 $k$ 可以是任何**正整数**。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "两行。\n\n第一行，两个正整数，$n,m$。\n\n第二行，$m$ 个**从小到大排列**的正整数，$a_1 \\sim a_m$。", "outputFormat": "一行一个正整数，表示答案。", "hint": "样例 $1$ 解释：\n\n```plain\n1 2 3 4\n1 2 4\n2 3 4\n2 4\n3 4\n4\n```\n\n样例 $2$ 解释：\n\n```plain\n1 2 3 4 5\n1 2 3 5\n1 2 4 5\n```\n\n----------\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | $m \\le$ | $n \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $0$ | $3$ | $3$ | $20$ |\n| $1$ | $10^5$ | $10^5$ | $40$ |\n| $2$ | $10^6$ | $10^8$ | $40$ |\n\n对于 $100\\%$ 的数据，$1 \\le m \\le 10^6$，$1 \\le a_1<a_2<\\ldots<a_m \\le n \\le 10^8$，$m \\le n$。\n\n> **提示：** 请注意本题不同寻常的内存限制！", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R2」A trip to Macao", "background": "## 本题目背景仅供引出题意，无任何不良诱导。\n## 出题人特别提醒：请勿在赌博非法地区模仿题目中的行为\n\n这天，xhabc66 来到澳门旅游。一下飞机，他直奔赌场。\n\n可是，今天的赌场格外热闹，不知发生了什么。\n\nxhabc66 打开手机一看：啊，原来今天是 $12$ 月 $20$ 日！\n\n因此，赌场在做活动！一年一度！机不可失！\n\nxhabc66 径直走进了赌场。", "description": "赌场贴出了如下规则（**你可以忽略没有加粗的内容**）：\n\n1. 所有玩家在注册后方可进行游戏。\n2. 活动期间，**新注册的玩家可从抽奖盒内拿走一枚筹码。抽奖盒内共 $m$ 种筹码，面值分别为 $a_1,a_2,\\ldots,a_m$ 澳元（均为正整数）**，每种一个，保证公平。\n3. 本赌场仅提供一种游戏：猜拳。游戏开始时，双方各下注相同数量（以 $1$ 澳元为单位）的筹码；若猜拳分出胜负，则胜者拿走所有下注。\n4. 根据上一条可知，**玩家一次游戏中赢得的筹码（正整数）不得超过自身所携带的筹码**。\n5. 公平游戏，严禁作弊，违者严惩。\n\nxhabc66 注册后，**连赢数局（可以是 $0$ 局，但没有输过，也没有平局过）**，最终带着 $n$ 澳元走出了赌场。\n\n出赌场后，xhabc66 突然好奇他是怎么赢到这么多钱的。然而，他不记得他每局下了多少注，不记得他一共玩了多少局，甚至不记得他开始时拿走的筹码是什么面值。\n\n**他想知道：他有多少种不同的赢钱方法。**\n\n**答案对 $10^9+7$ 取模。**\n\n> 两种赢钱方法在满足以下任何一个条件时，xhabc66 都会认为它们不同：\n>\n> - 他某一局的下注金额不同；\n> - 他玩的局数不同；\n> - 他开始时拿走的筹码的面值不同。\n\n### 形式化题意\n\n求有多少个数列 $\\{b_k\\}$ 满足：\n\n1. $\\forall i \\in [1,k],b_i \\in \\mathbb{N^*}$；\n2. $\\forall i \\in [2,k],b_i \\in [b_{i-1}+1,b_{i-1} \\times 2]$；\n3. $b_1 \\in\\{a_m\\}$；\n4. $b_k=n$。\n\n数列的长度 $k$ 可以是任何**正整数**。\n\n答案对 $10^9+7$ 取模。", "inputFormat": "两行。\n\n第一行，两个正整数，$n,m$。\n\n第二行，$m$ 个**从小到大排列**的正整数，$a_1 \\sim a_m$。", "outputFormat": "一行一个正整数，表示答案。", "hint": "样例 $1$ 解释：\n\n```plain\n1 2 3 4\n1 2 4\n2 3 4\n2 4\n3 4\n4\n```\n\n样例 $2$ 解释：\n\n```plain\n1 2 3 4 5\n1 2 3 5\n1 2 4 5\n```\n\n----------\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | $m \\le$ | $n \\le$ | 分值 |\n| :-: | :-: | :-: | :-: |\n| $0$ | $3$ | $3$ | $20$ |\n| $1$ | $10^5$ | $10^5$ | $40$ |\n| $2$ | $10^6$ | $10^8$ | $40$ |\n\n对于 $100\\%$ 的数据，$1 \\le m \\le 10^6$，$1 \\le a_1<a_2<\\ldots<a_m \\le n \\le 10^8$，$m \\le n$。\n\n> **提示：** 请注意本题不同寻常的内存限制！", "locale": "zh-CN"}}}
{"pid": "P10037", "type": "P", "difficulty": 6, "samples": [["1 1 1 1", "3"], ["3 1 2 2\n1 2\n1 3", "22"], ["5 2 3 5\n1 2\n2 3\n2 4\n4 5", "407"], ["10 5 6 44\n1 2\n1 3\n2 5\n2 6\n3 4\n6 7\n6 8\n4 9\n9 10", "10465095"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "递推", "2024", "洛谷原创", "O2优化", "组合数学", "前缀和", "快速数论变换 NTT", "调和级数", "整除分块"], "title": "「FAOI-R2」霜雪千年", "background": "> 在这老街回眸 烟云中追溯我是谁  \n只消暮雨点滴 便足以粉饰这是非  \n待这月色涌起 谁人轻叩这门扉  \n苔绿青石板街 斑驳了流水般岁月  \n小酌三盏两杯 理不清缠绕的情结  \n在你淡漠眉间 瞥见离人的喜悲霜雪\n\n洛天依看到了一颗雪中的梨树，梨树的根中有有限的能量，它可以向上需要传递热量到其他节点。但风雪很大，每时每刻每个节点能量都会增加会增加或减少，热量过低的节点会掉落。", "description": "具体来说，这棵梨树可以被抽象为一颗以 $1$ 号结点为根的树，初始时每个点都是白色。每个点有能量 $a_i$，初始时 $1$ 以外所有点的能量都为 $0$，$a_1=k$。我们设一个累计能量 $b$。\n\n我们通过如下操作定义一个序列 $\\{v_t\\}$ 的权值：\n- 从小到大度过 $1,2,3,\\dots,t$ 这 $t$ 个时刻。\n- 在第 $x$ 个时刻，执行 $b\\gets b+v_x$。\n- 对于树上的一条边 $(u,v)$，设 $u$ 为父亲，可以选定整数 $h\\in[0,a_u]$ 执行操作 $a_u\\gets a_u-h$，$a_v\\gets a_v+h$，之后该时刻内形如 $(v,w)$ 且 $v$ 为父亲的边不能操作。\n- 若一个点 $i$ 满足 $a_i+b<0$，将 $i$ 以及 $i$ 的子树中的点染成黑色。\n- 执行最优操作以最大化第 $t$ 时刻后的白点个数，该序列权值即为最大白点个数。\n\n定义一个序列 $\\{v_t\\}$ 合法当且仅当 $\\forall i\\in[1,t]$，$\\lvert v_i\\rvert\\in[0,m]$。给定 $t$，求出所有合法序列 $\\{v_t\\}$ 的权值之和对 $998244353$ 取模后的值。", "inputFormat": "第一行四个非负整数 $n,m,t,k$，分别表示树的结点个数，$v_i$ 的取值范围，时刻数，初始时的 $a_1$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示 $u$ 号结点与 $v$ 号结点之间有一条边。", "outputFormat": "输出所有合法序列的和对 $998244353$ 取模后的结果。", "hint": "**【样例解释】**\n\n样例 $3$ 解释：\n\n对于一种 $\\{v_3\\}=\\{1,0,-2\\}$ 的情况，一种最优操作如下：\n- 第一个时刻，$1$ 号结点传递 $4$ 能量给 $2$ 号结点，操作完毕后 $a=\\{1,4,0,0,0\\}$，$b=1$。\n- 第二个时刻，$2$ 号结点传递 $2$ 能量给 $4$ 号结点，操作完毕后 $a=\\{1,2,0,2,0\\}$，$b=1$。\n- 第三个时刻，$2$ 号结点传递 $1$ 能量给 $3$ 号结点，$4$ 号结点传递 $1$ 能量给 $5$ 号结点，操作完毕后 $a=\\{1,1,1,1,1\\}$，$b=-1$。\n- 所有时刻结束，因为始终没有 $a_i+b<0$ 的点，所以所有结点为白色。\n\n样例 $4$ 解释：\n\n对于一种 $\\{v_{6}\\}=\\{1,2,1,2,1,2\\}$ 的情况，一种最优操作如下：\n- 第 $1\\sim 6$ 个时刻，不进行操作。\n- 所有时刻结束，因为始终没有 $a_i+b<0$ 的点，所以所有结点为白色。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | $n \\le$ | $m \\le$ | $t \\le$ | $k \\le$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $4$ | $4$ | $4$ | $40$ | $20$ | × |\n| $1$ | $2 \\times 10^5$ | $20$ | $20$ | $1 \\times 10^5$ | $10$ | $\\checkmark$ |\n| $2$ | $2 \\times 10^5$ | $20$ | $20$ | $3 \\times 10^5$ | $20$ | × |\n| $3$ | $2 \\times 10^5$ | $50$ | $100$ | $3 \\times 10^5$ | $10$ | × |\n| $4$ | $2 \\times 10^5$ | $50$ | $500$ | $3 \\times 10^5$ | $40$ | × |\n\n特殊性质：保证树的形态是菊花。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 2\\times 10^5$，$1\\leq k\\leq 3\\times 10^5$，$1\\leq m\\leq 50$，$1\\leq t\\leq 500$，保证输入构成一棵树。\n\n**【其他】**\n\n本题原名梨花开，介于赛时题面有误，且原题面可读性较低，于 2024 年 3 月重写题面并改名。改标题不便赛时选手重新找到该题，但出题人意识到时修改已久，不便改回。在此致歉。\n\n与 2025 年 8 月将题面中的“热量”改为“能量”。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R2」霜雪千年", "background": "> 在这老街回眸 烟云中追溯我是谁  \n只消暮雨点滴 便足以粉饰这是非  \n待这月色涌起 谁人轻叩这门扉  \n苔绿青石板街 斑驳了流水般岁月  \n小酌三盏两杯 理不清缠绕的情结  \n在你淡漠眉间 瞥见离人的喜悲霜雪\n\n洛天依看到了一颗雪中的梨树，梨树的根中有有限的能量，它可以向上需要传递热量到其他节点。但风雪很大，每时每刻每个节点能量都会增加会增加或减少，热量过低的节点会掉落。", "description": "具体来说，这棵梨树可以被抽象为一颗以 $1$ 号结点为根的树，初始时每个点都是白色。每个点有能量 $a_i$，初始时 $1$ 以外所有点的能量都为 $0$，$a_1=k$。我们设一个累计能量 $b$。\n\n我们通过如下操作定义一个序列 $\\{v_t\\}$ 的权值：\n- 从小到大度过 $1,2,3,\\dots,t$ 这 $t$ 个时刻。\n- 在第 $x$ 个时刻，执行 $b\\gets b+v_x$。\n- 对于树上的一条边 $(u,v)$，设 $u$ 为父亲，可以选定整数 $h\\in[0,a_u]$ 执行操作 $a_u\\gets a_u-h$，$a_v\\gets a_v+h$，之后该时刻内形如 $(v,w)$ 且 $v$ 为父亲的边不能操作。\n- 若一个点 $i$ 满足 $a_i+b<0$，将 $i$ 以及 $i$ 的子树中的点染成黑色。\n- 执行最优操作以最大化第 $t$ 时刻后的白点个数，该序列权值即为最大白点个数。\n\n定义一个序列 $\\{v_t\\}$ 合法当且仅当 $\\forall i\\in[1,t]$，$\\lvert v_i\\rvert\\in[0,m]$。给定 $t$，求出所有合法序列 $\\{v_t\\}$ 的权值之和对 $998244353$ 取模后的值。", "inputFormat": "第一行四个非负整数 $n,m,t,k$，分别表示树的结点个数，$v_i$ 的取值范围，时刻数，初始时的 $a_1$。\n\n接下来 $n-1$ 行，每行两个正整数 $u,v$，表示 $u$ 号结点与 $v$ 号结点之间有一条边。", "outputFormat": "输出所有合法序列的和对 $998244353$ 取模后的结果。", "hint": "**【样例解释】**\n\n样例 $3$ 解释：\n\n对于一种 $\\{v_3\\}=\\{1,0,-2\\}$ 的情况，一种最优操作如下：\n- 第一个时刻，$1$ 号结点传递 $4$ 能量给 $2$ 号结点，操作完毕后 $a=\\{1,4,0,0,0\\}$，$b=1$。\n- 第二个时刻，$2$ 号结点传递 $2$ 能量给 $4$ 号结点，操作完毕后 $a=\\{1,2,0,2,0\\}$，$b=1$。\n- 第三个时刻，$2$ 号结点传递 $1$ 能量给 $3$ 号结点，$4$ 号结点传递 $1$ 能量给 $5$ 号结点，操作完毕后 $a=\\{1,1,1,1,1\\}$，$b=-1$。\n- 所有时刻结束，因为始终没有 $a_i+b<0$ 的点，所以所有结点为白色。\n\n样例 $4$ 解释：\n\n对于一种 $\\{v_{6}\\}=\\{1,2,1,2,1,2\\}$ 的情况，一种最优操作如下：\n- 第 $1\\sim 6$ 个时刻，不进行操作。\n- 所有时刻结束，因为始终没有 $a_i+b<0$ 的点，所以所有结点为白色。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n| Subtask 编号 | $n \\le$ | $m \\le$ | $t \\le$ | $k \\le$ | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $0$ | $4$ | $4$ | $4$ | $40$ | $20$ | × |\n| $1$ | $2 \\times 10^5$ | $20$ | $20$ | $1 \\times 10^5$ | $10$ | $\\checkmark$ |\n| $2$ | $2 \\times 10^5$ | $20$ | $20$ | $3 \\times 10^5$ | $20$ | × |\n| $3$ | $2 \\times 10^5$ | $50$ | $100$ | $3 \\times 10^5$ | $10$ | × |\n| $4$ | $2 \\times 10^5$ | $50$ | $500$ | $3 \\times 10^5$ | $40$ | × |\n\n特殊性质：保证树的形态是菊花。\n\n对于 $100\\%$ 的数据，$1\\leq n\\leq 2\\times 10^5$，$1\\leq k\\leq 3\\times 10^5$，$1\\leq m\\leq 50$，$1\\leq t\\leq 500$，保证输入构成一棵树。\n\n**【其他】**\n\n本题原名梨花开，介于赛时题面有误，且原题面可读性较低，于 2024 年 3 月重写题面并改名。改标题不便赛时选手重新找到该题，但出题人意识到时修改已久，不便改回。在此致歉。\n\n与 2025 年 8 月将题面中的“热量”改为“能量”。", "locale": "zh-CN"}}}
{"pid": "P10038", "type": "P", "difficulty": 5, "samples": [["1", "1"], ["2", "1 2"], ["3", "2 1 3"], ["4", "4 2 3 1"], ["5", "5 4 1 2 3"], ["6", "2 4 5 1 6 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2024", "洛谷原创", "Special Judge", "O2优化", "区间 DP", "构造"], "title": "「FAOI-R2」Program of atom(x) 2027", "background": "**Update on 2025/5/11：我们在附件处新增了一份可视化工具。**\n\n**Update on 2025/5/26：可视化工具已经更新。**\n\n这是来自 $2027$ 年的 FAOI 的一道题目，是一道带有 SPJ 的传统题。\n\n------------\n\n自从 [krjt](https://www.luogu.com.cn/user/691537) 上次被 $160$ 人 [JC](https://www.luogu.com.cn/problem/T573220) 后，他换了一个「量子密码锁」，并用它锁上了自己的电脑包——打不开密码锁，就取不出包里的电脑。理论上，一旦 krjt 忘了密码，就连造这把锁的人也打不开。\n\n然而，这把锁并非固若金汤。~~有一天，krjt 突然对化学产生了浓厚的兴趣。他拿起那把锁，放在酒精灯上加热，结果发现：~~ 在高温环境下，这把锁内的原子（严格来说是「离子」，下同）排布变得不稳定，这将导致它瘫痪。", "description": "krjt 找来了密码锁的说明书：\n\n> 在密码锁中，有一条长度为 $n$（不能更改，$n$ 的具体取值见密码锁铭牌）的链，链上共有 $n$ 个结点。每个结点上可以存放至多一个原子。初始时，$1,2,\\ldots,n$ 号原子以某个顺序（可以由用户自行调整）被存放在其中，每个结点存放一个原子。\n> \n> 定义 $i$ 号原子的电荷量为 $i!=1 \\times 2\\times 3 \\times \\ldots \\times i$。\n> \n> 现有一个计时器 $b$（单位为秒），其初值为 $0$。\n>\n> 密码锁被加热后，以下事件**依次循环发生**，直至达成终止条件：\n> \n> 1. 位于链两端的原子被移除（**这不会使链变短**），**不再对后续事件产生影响**；\n> 2. 判定终止条件：\n>    - 若此时链中剩下**不多于 $1$ 个**原子（**也可以是 $0$ 个**），则**达成终止条件**，密码锁瘫痪（**此时计时器 $b$ 的值不会增加 $1$**）；\n>    - 否则，将计时器 $b$ 的值增加 $1$。\n> 3. 给每个原子标定运动方向（**标定的运动方向是临时的，只生效一次，在下一次标定前会被重置**）：\n>    - 计算它左边所有原子的电荷量之和，设计算结果为 $x$；\n>    - 计算它右边所有原子的电荷量之和，设计算结果为 $y$；\n>    - 如果 $x<y$，则标定方向为「向左」；\n>    - 如果 $x>y$，则标定方向为「向右」；\n>    - 可以证明，$x \\ne y$。\n> 4. 所有原子按照所标定的运动方向，移动一条边的距离，来到相邻的结点。\n\n此外，krjt 从铭牌上读取到了 $n$ 的值。\n\nkrjt 定义，密码锁的瘫痪用时，为它瘫痪时 $b$ 的值。当然，krjt 希望密码锁尽量安全，因此他想**最大化密码锁的瘫痪用时**。\n\n~~为了不让更多人再次 JC krjt~~，请问：他该如何排列密码锁中 $n$ 个原子的初始顺序？", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行 $n$ 个正整数，一个 $1 \\sim n$ 的排列，表示你给 krjt 规划的排列方案：从左到右（或者从右到左，可以证明它们的瘫痪用时相等）依次输出 $n$ 个原子的编号。\n\n**答案可能有多个，输出一个即可。**", "hint": "**样例解释：**\n\n$6$ 个样例的瘫痪用时分别为 $0,0,0,1,1,2$ 秒。\n\n实际上，枚举可知：当 $n \\le 6$ 时，输出任何一个 $1 \\sim n$ 的排列都能 AC。\n\n下面对样例 $6$ 进行模拟。在链的描述中：\n\n- $0$ 表示该结点为空；\n- $i$ 表示该结点上存放着 $i$ 号原子；\n- $(x,y)$ 为计算结果。\n\n1. **初始的链**为 $\\color{blue}2-4-5-1-6-3$；\n2. $b$ 初始为 $0$；\n3. **位于两端的原子被移除**，链变为 $\\color{blue}0-4-5-1-6-0$；\n4. $b$ 增加至 $1$；\n5. **计算**，$4$ 个原子（从左向右）的结果分别为 $(\\color{red}0\\color{black},841),(\\color{red}24\\color{black},721),(\\color{red}144\\color{black},720),(145,\\color{red}0\\color{black})$；\n6. 根据结果，左边 $3$ 个原子（$4,5,1$）**向左运动**，最右边的原子（$6$）**向右运动**，链变为 $\\color{blue}4-5-1-0-0-6$；\n7. **位于两端的原子被移除**，链变为 $\\color{blue}0-5-1-0-0-0$；\n8. $b$ 增加至 $2$；\n9. **计算**，$2$ 个原子（从左向右）的结果分别为 $(\\color{red}0\\color{black},1),(120,\\color{red}0\\color{black})$；\n10. 根据结果，左边的原子（$5$）**向左运动**，右边的原子（$1$）**向右运动**，链变为 $\\color{blue}5-0-0-1-0-0$；\n11. **位于两端的原子被移除**，链变为 $\\color{blue}0-0-0-1-0-0$；\n11. 此时链中只剩下 $1$ 个原子（$1$），**反应结束，密码锁瘫痪**。\n\n综上，样例 $6$ 的瘫痪用时为 $2$ 秒。\n\n------------\n\n本题共有 $100$ 个测试点，分别有 $n=1,2,\\ldots,100$，每个 $1$ 分。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「FAOI-R2」Program of atom(x) 2027", "background": "**Update on 2025/5/11：我们在附件处新增了一份可视化工具。**\n\n**Update on 2025/5/26：可视化工具已经更新。**\n\n这是来自 $2027$ 年的 FAOI 的一道题目，是一道带有 SPJ 的传统题。\n\n------------\n\n自从 [krjt](https://www.luogu.com.cn/user/691537) 上次被 $160$ 人 [JC](https://www.luogu.com.cn/problem/T573220) 后，他换了一个「量子密码锁」，并用它锁上了自己的电脑包——打不开密码锁，就取不出包里的电脑。理论上，一旦 krjt 忘了密码，就连造这把锁的人也打不开。\n\n然而，这把锁并非固若金汤。~~有一天，krjt 突然对化学产生了浓厚的兴趣。他拿起那把锁，放在酒精灯上加热，结果发现：~~ 在高温环境下，这把锁内的原子（严格来说是「离子」，下同）排布变得不稳定，这将导致它瘫痪。", "description": "krjt 找来了密码锁的说明书：\n\n> 在密码锁中，有一条长度为 $n$（不能更改，$n$ 的具体取值见密码锁铭牌）的链，链上共有 $n$ 个结点。每个结点上可以存放至多一个原子。初始时，$1,2,\\ldots,n$ 号原子以某个顺序（可以由用户自行调整）被存放在其中，每个结点存放一个原子。\n> \n> 定义 $i$ 号原子的电荷量为 $i!=1 \\times 2\\times 3 \\times \\ldots \\times i$。\n> \n> 现有一个计时器 $b$（单位为秒），其初值为 $0$。\n>\n> 密码锁被加热后，以下事件**依次循环发生**，直至达成终止条件：\n> \n> 1. 位于链两端的原子被移除（**这不会使链变短**），**不再对后续事件产生影响**；\n> 2. 判定终止条件：\n>    - 若此时链中剩下**不多于 $1$ 个**原子（**也可以是 $0$ 个**），则**达成终止条件**，密码锁瘫痪（**此时计时器 $b$ 的值不会增加 $1$**）；\n>    - 否则，将计时器 $b$ 的值增加 $1$。\n> 3. 给每个原子标定运动方向（**标定的运动方向是临时的，只生效一次，在下一次标定前会被重置**）：\n>    - 计算它左边所有原子的电荷量之和，设计算结果为 $x$；\n>    - 计算它右边所有原子的电荷量之和，设计算结果为 $y$；\n>    - 如果 $x<y$，则标定方向为「向左」；\n>    - 如果 $x>y$，则标定方向为「向右」；\n>    - 可以证明，$x \\ne y$。\n> 4. 所有原子按照所标定的运动方向，移动一条边的距离，来到相邻的结点。\n\n此外，krjt 从铭牌上读取到了 $n$ 的值。\n\nkrjt 定义，密码锁的瘫痪用时，为它瘫痪时 $b$ 的值。当然，krjt 希望密码锁尽量安全，因此他想**最大化密码锁的瘫痪用时**。\n\n~~为了不让更多人再次 JC krjt~~，请问：他该如何排列密码锁中 $n$ 个原子的初始顺序？", "inputFormat": "一行一个正整数 $n$。", "outputFormat": "一行 $n$ 个正整数，一个 $1 \\sim n$ 的排列，表示你给 krjt 规划的排列方案：从左到右（或者从右到左，可以证明它们的瘫痪用时相等）依次输出 $n$ 个原子的编号。\n\n**答案可能有多个，输出一个即可。**", "hint": "**样例解释：**\n\n$6$ 个样例的瘫痪用时分别为 $0,0,0,1,1,2$ 秒。\n\n实际上，枚举可知：当 $n \\le 6$ 时，输出任何一个 $1 \\sim n$ 的排列都能 AC。\n\n下面对样例 $6$ 进行模拟。在链的描述中：\n\n- $0$ 表示该结点为空；\n- $i$ 表示该结点上存放着 $i$ 号原子；\n- $(x,y)$ 为计算结果。\n\n1. **初始的链**为 $\\color{blue}2-4-5-1-6-3$；\n2. $b$ 初始为 $0$；\n3. **位于两端的原子被移除**，链变为 $\\color{blue}0-4-5-1-6-0$；\n4. $b$ 增加至 $1$；\n5. **计算**，$4$ 个原子（从左向右）的结果分别为 $(\\color{red}0\\color{black},841),(\\color{red}24\\color{black},721),(\\color{red}144\\color{black},720),(145,\\color{red}0\\color{black})$；\n6. 根据结果，左边 $3$ 个原子（$4,5,1$）**向左运动**，最右边的原子（$6$）**向右运动**，链变为 $\\color{blue}4-5-1-0-0-6$；\n7. **位于两端的原子被移除**，链变为 $\\color{blue}0-5-1-0-0-0$；\n8. $b$ 增加至 $2$；\n9. **计算**，$2$ 个原子（从左向右）的结果分别为 $(\\color{red}0\\color{black},1),(120,\\color{red}0\\color{black})$；\n10. 根据结果，左边的原子（$5$）**向左运动**，右边的原子（$1$）**向右运动**，链变为 $\\color{blue}5-0-0-1-0-0$；\n11. **位于两端的原子被移除**，链变为 $\\color{blue}0-0-0-1-0-0$；\n11. 此时链中只剩下 $1$ 个原子（$1$），**反应结束，密码锁瘫痪**。\n\n综上，样例 $6$ 的瘫痪用时为 $2$ 秒。\n\n------------\n\n本题共有 $100$ 个测试点，分别有 $n=1,2,\\ldots,100$，每个 $1$ 分。\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P10039", "type": "P", "difficulty": 3, "samples": [["6\n1 2\n2 3\n2 4\n1 5\n5 6", "Wasted."], ["7\n1 2\n2 3\n2 4\n1 5\n5 6\n5 7", "You win, temporarily."]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 游戏", "background": "", "description": "小 I 和小 J 又在玩游戏。\n\n小 J 找来了一棵 $n$ 个点的树。树上的每条边有开启和关闭两个状态，初始树上每条边都是开启的。\n\n初始树上有一颗棋子放在 $1$ 号节点。小 I 可以移动棋子，目标是将棋子移动到一个度数**恰好**为 $1$ 的节点上；小 J 可以关闭树上的边，目标是阻止小 I 将棋子移动到度数恰好为 $1$ 的节点上。\n\n游戏分为若干轮，每轮有如下环节：\n\n1. 小 I 任务判定：如果棋子在度数恰好为 $1$ 的节点上，小 I 获胜，否则进入第 2 步；\n2. 小 J 行动：小 J 将一条目前开启的边，将这条边永久关闭，进入第 3 步，如果目前不存在开启的边则直接跳过行动进入第 3 步；\n3. 小 I 行动：小 I 选择一条连接当前棋子所在节点且开启的边，将棋子移动到这条边的另一个节点上。如果没有这样的边，小 J 获胜，否则进入新的一轮，回到第 1 步。\n\n小 J 想知道，如果小 I 和小 J 知道这棵树的形态且绝顶聪明，谁会获胜。", "inputFormat": "第一行一个整数 $n (1 \\le n \\le 10^5)$ 表示树的节点数，接下来 $n-1$ 行每行两个整数 $u,v (1 \\le u, v \\le n)$，表示树上的一条边。", "outputFormat": "如果小 I 获胜，输出 `You win, temporarily.`，否则输出 `Wasted.`。", "hint": "【样例解释 1】\n\n小 J 的策略如下：\n\n- 小 J 将 $(1,2)$ 关闭，这样小 I 只能移动到 $5$；\n- 小 J 将 $(5,6)$ 关闭，这样小 I 只得移动回 $1$；\n- 小 J 将 $(1,5)$ 关闭，于是小 I 无法移动。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 游戏", "background": "", "description": "小 I 和小 J 又在玩游戏。\n\n小 J 找来了一棵 $n$ 个点的树。树上的每条边有开启和关闭两个状态，初始树上每条边都是开启的。\n\n初始树上有一颗棋子放在 $1$ 号节点。小 I 可以移动棋子，目标是将棋子移动到一个度数**恰好**为 $1$ 的节点上；小 J 可以关闭树上的边，目标是阻止小 I 将棋子移动到度数恰好为 $1$ 的节点上。\n\n游戏分为若干轮，每轮有如下环节：\n\n1. 小 I 任务判定：如果棋子在度数恰好为 $1$ 的节点上，小 I 获胜，否则进入第 2 步；\n2. 小 J 行动：小 J 将一条目前开启的边，将这条边永久关闭，进入第 3 步，如果目前不存在开启的边则直接跳过行动进入第 3 步；\n3. 小 I 行动：小 I 选择一条连接当前棋子所在节点且开启的边，将棋子移动到这条边的另一个节点上。如果没有这样的边，小 J 获胜，否则进入新的一轮，回到第 1 步。\n\n小 J 想知道，如果小 I 和小 J 知道这棵树的形态且绝顶聪明，谁会获胜。", "inputFormat": "第一行一个整数 $n (1 \\le n \\le 10^5)$ 表示树的节点数，接下来 $n-1$ 行每行两个整数 $u,v (1 \\le u, v \\le n)$，表示树上的一条边。", "outputFormat": "如果小 I 获胜，输出 `You win, temporarily.`，否则输出 `Wasted.`。", "hint": "【样例解释 1】\n\n小 J 的策略如下：\n\n- 小 J 将 $(1,2)$ 关闭，这样小 I 只能移动到 $5$；\n- 小 J 将 $(5,6)$ 关闭，这样小 I 只得移动回 $1$；\n- 小 J 将 $(1,5)$ 关闭，于是小 I 无法移动。", "locale": "zh-CN"}}}
{"pid": "P10040", "type": "P", "difficulty": 5, "samples": [["5\n10?1?", "3\n4\n2\n3\n2"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 替换", "background": "", "description": "给定一个长度为 $n$、字符集为 `01?` 的字符串 $s_1s_2 \\cdots s_n$。\n\n对于任意 $k \\in [1,n]$，考察字符串 $T_k = t_1 t_2 \\cdots t_n$，其中对于 $1 \\le i \\le n$，\n\n- 若 $s_i \\ne$ `?`，则 $t_i = s_i$；\n- 否则，若 $i \\le k$，$t_i =$ `0`；\n- 否则 $t_i = t_{i-k}$，你可以通过递归地算出 $t_{i-k}$ 得到 $t_i$。\n\n容易发现 $T_k$ 的字符集为 `01`。你需要对所有 $k \\in [1,n]$ 求出 $T_k$ 中 `1` 的个数。", "inputFormat": "输入的第一行一个整数 $n (1 \\le n \\le 10^5)$ 表示字符串长度，第二行一个长度为 $n$、字符集为 `01?` 的字符串 $s_1s_2\\cdots s_n$。", "outputFormat": "输出 $n$ 行，第 $i$ 行一个整数表示 $T_i$ 中 `1` 的个数。", "hint": "$T_1 =$ `10011`，$T_2 =$ `10111`，$T_3 =$ `10010`，$T_4 =$ `10011`，$T_5 =$ `10010`。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 替换", "background": "", "description": "给定一个长度为 $n$、字符集为 `01?` 的字符串 $s_1s_2 \\cdots s_n$。\n\n对于任意 $k \\in [1,n]$，考察字符串 $T_k = t_1 t_2 \\cdots t_n$，其中对于 $1 \\le i \\le n$，\n\n- 若 $s_i \\ne$ `?`，则 $t_i = s_i$；\n- 否则，若 $i \\le k$，$t_i =$ `0`；\n- 否则 $t_i = t_{i-k}$，你可以通过递归地算出 $t_{i-k}$ 得到 $t_i$。\n\n容易发现 $T_k$ 的字符集为 `01`。你需要对所有 $k \\in [1,n]$ 求出 $T_k$ 中 `1` 的个数。", "inputFormat": "输入的第一行一个整数 $n (1 \\le n \\le 10^5)$ 表示字符串长度，第二行一个长度为 $n$、字符集为 `01?` 的字符串 $s_1s_2\\cdots s_n$。", "outputFormat": "输出 $n$ 行，第 $i$ 行一个整数表示 $T_i$ 中 `1` 的个数。", "hint": "$T_1 =$ `10011`，$T_2 =$ `10111`，$T_3 =$ `10010`，$T_4 =$ `10011`，$T_5 =$ `10010`。", "locale": "zh-CN"}}}
{"pid": "P10041", "type": "P", "difficulty": 7, "samples": [["4 5 6\n2 1 2 3\n3 3 3 4\n5 7 9 11", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2023", "区间 DP", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 史莱姆工厂", "background": "", "description": "有 $n$ 个史莱姆排成一行，其中第 $i$ 个的颜色为 $c_i$，质量为 $m_i$。\n\n你可以执行任意次把一个史莱姆的质量增加 $1$ 的操作，需要花费 $w$ 的价钱。\n\n但是一旦史莱姆的质量达到 $k$ 或以上，就会变得不稳定而必须在下一次操作之前被卖掉。你只能卖出质量大于等于 $k$ 的史莱姆。根据市场价，卖掉一个质量为 $i$ 的史莱姆可以得到 $p_i$ 的收入。保证 $p_i-p_{i-1}<w$。但不保证 $p_i$ 单调不降。\n\n卖掉一个史莱姆之后，它两边的史莱姆会被挤压继而靠在一起。如果这两个史莱姆颜色相同，那么就会互相融合成一个史莱姆，其质量是二者的质量之和。这个新的史莱姆也有可能需要被卖掉从而接着进行这个过程。\n\n你想知道卖掉所有史莱姆最多可以净赚多少。", "inputFormat": "第一行三个正整数 $n,k,w(1\\le n\\le 150, 2\\le k\\le 10, 1\\le w\\le 10^6)$。\n\n第二行 $n$ 个正整数，其中第 $i$ 个表示 $c_i(1\\le c_i\\le n)$。保证 $c_i\\not=c_{i-1}$。\n\n第三行 $n$ 个正整数，其中第 $i$ 个表示 $m_i(1\\le m_i<k)$。\n\n第四行 $k-1$ 个整数，分别表示卖出质量为 $k$ 到 $2k-2$ 的史莱姆的收入，即 $p_k$ 到 $p_{2k-2}$，保证 $0\\le p_i\\le 10^9$，且 $p_i-p_{i-1}<w$。\n\n保证相邻两个史莱姆的颜色不同。", "outputFormat": "一行一个整数，表示卖出所有史莱姆最大的净利润。", "hint": "先增加颜色为 $3$ 的史莱姆的质量。然后它被卖掉，获得 $5$ 的收入。\n\n然后增加颜色为 $1$ 的史莱姆的质量两次。然后它被卖掉，获得 $5$ 的收入。接着两个颜色为 $2$ 的史莱姆融合在一起卖掉，获得 $7$ 的收入。\n\n操作了三次需要 $18$ 的花费，所以净利润为 $-1$。可以证明不存在更好的方案。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 史莱姆工厂", "background": "", "description": "有 $n$ 个史莱姆排成一行，其中第 $i$ 个的颜色为 $c_i$，质量为 $m_i$。\n\n你可以执行任意次把一个史莱姆的质量增加 $1$ 的操作，需要花费 $w$ 的价钱。\n\n但是一旦史莱姆的质量达到 $k$ 或以上，就会变得不稳定而必须在下一次操作之前被卖掉。你只能卖出质量大于等于 $k$ 的史莱姆。根据市场价，卖掉一个质量为 $i$ 的史莱姆可以得到 $p_i$ 的收入。保证 $p_i-p_{i-1}<w$。但不保证 $p_i$ 单调不降。\n\n卖掉一个史莱姆之后，它两边的史莱姆会被挤压继而靠在一起。如果这两个史莱姆颜色相同，那么就会互相融合成一个史莱姆，其质量是二者的质量之和。这个新的史莱姆也有可能需要被卖掉从而接着进行这个过程。\n\n你想知道卖掉所有史莱姆最多可以净赚多少。", "inputFormat": "第一行三个正整数 $n,k,w(1\\le n\\le 150, 2\\le k\\le 10, 1\\le w\\le 10^6)$。\n\n第二行 $n$ 个正整数，其中第 $i$ 个表示 $c_i(1\\le c_i\\le n)$。保证 $c_i\\not=c_{i-1}$。\n\n第三行 $n$ 个正整数，其中第 $i$ 个表示 $m_i(1\\le m_i<k)$。\n\n第四行 $k-1$ 个整数，分别表示卖出质量为 $k$ 到 $2k-2$ 的史莱姆的收入，即 $p_k$ 到 $p_{2k-2}$，保证 $0\\le p_i\\le 10^9$，且 $p_i-p_{i-1}<w$。\n\n保证相邻两个史莱姆的颜色不同。", "outputFormat": "一行一个整数，表示卖出所有史莱姆最大的净利润。", "hint": "先增加颜色为 $3$ 的史莱姆的质量。然后它被卖掉，获得 $5$ 的收入。\n\n然后增加颜色为 $1$ 的史莱姆的质量两次。然后它被卖掉，获得 $5$ 的收入。接着两个颜色为 $2$ 的史莱姆融合在一起卖掉，获得 $7$ 的收入。\n\n操作了三次需要 $18$ 的花费，所以净利润为 $-1$。可以证明不存在更好的方案。", "locale": "zh-CN"}}}
{"pid": "P10042", "type": "P", "difficulty": 7, "samples": [["2 2\n1 0\n3 2", "1 2"], ["5 5 \n3 3 3 3 2\n2 3 3 3 1\n1 3 3 3 3\n3 3 3 3 3\n3 3 3 3 3", "50830224 170059345\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 三染色", "background": "", "description": "我有一个调色盘，总共 $n$ 行 $m$ 列，形成了 $n\\times m$ 个格子，每个格子里要放一朵花。可以放置的花有 $3$ 种颜色可以选择，分别用 $0,1,2$ 表示。\n\n花朵注视着它周围的花，并想要变成其他花朵的样子。如果在一个时刻，一朵颜色为 $c$ 的花的上、下、左、右之一，有至少一朵花的颜色为 $c-1$，那么这朵花在下一个时刻会变成颜色 $c-1$，否则它在下一个时刻的颜色仍然是 $c$。其中颜色 $\\bmod 3$ 考虑。\n\n对于一个初始的在调色盘中放花的方案，如果经过有限个时刻之后，所有花都变成同一颜色，我们称这个放花的方案是**美好的**。\n\n不难看出，对于一个美好的放花方案，每朵花都有一个最早的时刻，它在这个时刻之后一直不变色。我们称这个时刻为这朵花的**稳定时刻**。\n我们从第 $0$ 时刻开始计时，所以一朵花如果从未改变颜色，那么它的稳定时刻就是 $0$。\n\n现在我已经在调色盘的一些格子中放置了花朵，也有一些格子是空的。我想知道，有多少种给剩余的格子放花的方案，使得这个方案是美好的？以及，对于这些美好的方案，位于第 1 行第 1 列格子中花朵的稳定时刻的总和是多少？\n\n你只需要回答我这两个结果对 $998244353$ 取模的值。", "inputFormat": "输入第一行为两个正整数 $n,m$（$2 \\le n \\le 5$，$2 \\le m \\le 50$）。\n\n接下来 $n$ 行，每一行 $m$ 个整数，第 $i$ 行第 $j$ 个整数 $a_{i,j}\\in \\{0,1,2,3\\}$ 表示对应方格的状态。其中 $a_{i,j}\\in \\{0,1,2\\}$ 表示有一朵花，以及这朵花的颜色，$a_{i,j}=3$ 表示没有花。", "outputFormat": "输出一行两个整数，表示美好的方案数，和左上角格子中花朵稳定时刻的总和。", "hint": "**【样例解释 1】**\n\n只有在未知格子放入花朵颜色为 $0$ 的时候会结束，并且在两个时刻之后所有花朵的颜色全部变为 $2$，此时左上角方格中的花朵颜色变成 $2$ 并不再改变，因此它的稳定时刻就是 $2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 三染色", "background": "", "description": "我有一个调色盘，总共 $n$ 行 $m$ 列，形成了 $n\\times m$ 个格子，每个格子里要放一朵花。可以放置的花有 $3$ 种颜色可以选择，分别用 $0,1,2$ 表示。\n\n花朵注视着它周围的花，并想要变成其他花朵的样子。如果在一个时刻，一朵颜色为 $c$ 的花的上、下、左、右之一，有至少一朵花的颜色为 $c-1$，那么这朵花在下一个时刻会变成颜色 $c-1$，否则它在下一个时刻的颜色仍然是 $c$。其中颜色 $\\bmod 3$ 考虑。\n\n对于一个初始的在调色盘中放花的方案，如果经过有限个时刻之后，所有花都变成同一颜色，我们称这个放花的方案是**美好的**。\n\n不难看出，对于一个美好的放花方案，每朵花都有一个最早的时刻，它在这个时刻之后一直不变色。我们称这个时刻为这朵花的**稳定时刻**。\n我们从第 $0$ 时刻开始计时，所以一朵花如果从未改变颜色，那么它的稳定时刻就是 $0$。\n\n现在我已经在调色盘的一些格子中放置了花朵，也有一些格子是空的。我想知道，有多少种给剩余的格子放花的方案，使得这个方案是美好的？以及，对于这些美好的方案，位于第 1 行第 1 列格子中花朵的稳定时刻的总和是多少？\n\n你只需要回答我这两个结果对 $998244353$ 取模的值。", "inputFormat": "输入第一行为两个正整数 $n,m$（$2 \\le n \\le 5$，$2 \\le m \\le 50$）。\n\n接下来 $n$ 行，每一行 $m$ 个整数，第 $i$ 行第 $j$ 个整数 $a_{i,j}\\in \\{0,1,2,3\\}$ 表示对应方格的状态。其中 $a_{i,j}\\in \\{0,1,2\\}$ 表示有一朵花，以及这朵花的颜色，$a_{i,j}=3$ 表示没有花。", "outputFormat": "输出一行两个整数，表示美好的方案数，和左上角格子中花朵稳定时刻的总和。", "hint": "**【样例解释 1】**\n\n只有在未知格子放入花朵颜色为 $0$ 的时候会结束，并且在两个时刻之后所有花朵的颜色全部变为 $2$，此时左上角方格中的花朵颜色变成 $2$ 并不再改变，因此它的稳定时刻就是 $2$。", "locale": "zh-CN"}}}
{"pid": "P10043", "type": "P", "difficulty": 3, "samples": [["4 2\n2 1 3 2\n4 2", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 广播", "background": "", "description": "小 I 正在学习使用 Pytorch。这是一个非常热门的用于机器学习训练的 Python 库。\n\n小 I 注意到，Pytorch 中对于张量运算有称作“广播”(broadcast)的机制。你可以认为张量是高维数组。对于一个 $k$ 维张量 $A$，我们用长度为 $k$ 的序列 $(a_1,a_2,\\cdots,a_k)$ 表示其各个维度的长度，也就是说 $A$ 是一个 $a_1 \\times a_2 \\times \\cdots \\times a_k$ 的张量。\n\n对于两个张量 $A$ 和 $B$，设它们的维度分别为 $(a_1,a_2,\\cdots,a_m)$ 和 $(b_1,b_2,\\cdots,b_n)$，称 $A$ 和 $B$ 是 **可广播的**，当且仅当以下性质成立：\n\n- 对于任意整数 $0 \\le i \\le \\min(n,m) - 1$，要么 $a_{m-i} = b_{n-i}$，要么 $a_{m-i}$ 和 $b_{n-i}$ 中至少有一个是 $1$。\n\n现在小 I 有两个张量，它们的维度分别是 $(p_1,p_2,\\cdots,p_m)$ 和 $(q_1,q_2,\\cdots,q_n)$，它们不一定是可广播的。\n\n为此，小 I 可以使用 Pytorch 内置的函数进行若干次操作（可以不做操作），每次操作对序列 $p$ 或 $q$ 进行以下修改：\n\n- 选择 $p$ 或 $q$，在选定序列的任意一个位置插入一个 $1$。\n\n小 I 想知道他最少要多少次操作才能让两个张量变为可广播的。", "inputFormat": "输入的第一行两个整数 $m,n(1 \\le m,n \\le 2000)$ 表示两个张量的维度。\n\n第二行 $m$ 个整数 $p_1,p_2,\\cdots,p_m (1 \\le p_i \\le 2000)$ 描述第一个张量每个维度的长度。\n\n第三行 $n$ 个整数 $q_1,q_2,\\cdots,q_n (1 \\le q_i \\le 2000)$ 描述第二个张量每个维度的长度。", "outputFormat": "输入一行一个整数表示最少的插入 $1$ 的数量使得两个张量变为可广播的。", "hint": "在序列 $q$ 的第二个位置之前插入一个 $1$（得到 `4 1 2`），两个张量就会变为可广播的。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 广播", "background": "", "description": "小 I 正在学习使用 Pytorch。这是一个非常热门的用于机器学习训练的 Python 库。\n\n小 I 注意到，Pytorch 中对于张量运算有称作“广播”(broadcast)的机制。你可以认为张量是高维数组。对于一个 $k$ 维张量 $A$，我们用长度为 $k$ 的序列 $(a_1,a_2,\\cdots,a_k)$ 表示其各个维度的长度，也就是说 $A$ 是一个 $a_1 \\times a_2 \\times \\cdots \\times a_k$ 的张量。\n\n对于两个张量 $A$ 和 $B$，设它们的维度分别为 $(a_1,a_2,\\cdots,a_m)$ 和 $(b_1,b_2,\\cdots,b_n)$，称 $A$ 和 $B$ 是 **可广播的**，当且仅当以下性质成立：\n\n- 对于任意整数 $0 \\le i \\le \\min(n,m) - 1$，要么 $a_{m-i} = b_{n-i}$，要么 $a_{m-i}$ 和 $b_{n-i}$ 中至少有一个是 $1$。\n\n现在小 I 有两个张量，它们的维度分别是 $(p_1,p_2,\\cdots,p_m)$ 和 $(q_1,q_2,\\cdots,q_n)$，它们不一定是可广播的。\n\n为此，小 I 可以使用 Pytorch 内置的函数进行若干次操作（可以不做操作），每次操作对序列 $p$ 或 $q$ 进行以下修改：\n\n- 选择 $p$ 或 $q$，在选定序列的任意一个位置插入一个 $1$。\n\n小 I 想知道他最少要多少次操作才能让两个张量变为可广播的。", "inputFormat": "输入的第一行两个整数 $m,n(1 \\le m,n \\le 2000)$ 表示两个张量的维度。\n\n第二行 $m$ 个整数 $p_1,p_2,\\cdots,p_m (1 \\le p_i \\le 2000)$ 描述第一个张量每个维度的长度。\n\n第三行 $n$ 个整数 $q_1,q_2,\\cdots,q_n (1 \\le q_i \\le 2000)$ 描述第二个张量每个维度的长度。", "outputFormat": "输入一行一个整数表示最少的插入 $1$ 的数量使得两个张量变为可广播的。", "hint": "在序列 $q$ 的第二个位置之前插入一个 $1$（得到 `4 1 2`），两个张量就会变为可广播的。", "locale": "zh-CN"}}}
{"pid": "P10044", "type": "P", "difficulty": 6, "samples": [["4 6\n1 2 1\n4 3 3\n4 1 9\n2 4 1\n3 1 2\n3 2 6", "7"], ["1 0", "-1"], ["1 1\n1 1 1", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 最小环", "background": "", "description": "小 I 发明了 $O(n + m)$ 的有向图最小环，于是他想考考你。\n\n给定一个 $n$ 个节点、$m$ 条边的有向图，每条边有正整数边权。你需要求出图上的一个环使得环上边的边权和最小。求出这个最小值，或者报告不存在环。\n\n当然，由于你不会 $O(n + m)$ 的有向图最小环，于是小 I 放宽了条件：保证输入的图是弱连通的，且 $m-n$ 不会很大。一个图是弱连通的当且仅当将有向边换为无向边后图连通。", "inputFormat": "第一行两个整数 $n,m (1 \\le n \\le 3 \\times 10^5, -1 \\le m-n \\le 1500)$，表示图的点数和边数。\n\n接下来 $m$ 行每行三个整数 $u_i,v_i,w_i (1 \\le u_i,v_i \\le n, 1 \\le w_i \\le 10^9)$，表示一条从 $u_i$ 到 $v_i$、边权为 $w_i$ 的有向边。保证图是弱连通的。", "outputFormat": "如果图中不存在环，输出 `-1`，否则输出一个整数表示最小环的长度和。", "hint": "**【样例解释 1】**\n\n最小环为 $1 \\to 2 \\to 4 \\to 3 \\to 1$。\n\n**【样例解释 3】**\n\n最小环为 $1 \\to 1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 最小环", "background": "", "description": "小 I 发明了 $O(n + m)$ 的有向图最小环，于是他想考考你。\n\n给定一个 $n$ 个节点、$m$ 条边的有向图，每条边有正整数边权。你需要求出图上的一个环使得环上边的边权和最小。求出这个最小值，或者报告不存在环。\n\n当然，由于你不会 $O(n + m)$ 的有向图最小环，于是小 I 放宽了条件：保证输入的图是弱连通的，且 $m-n$ 不会很大。一个图是弱连通的当且仅当将有向边换为无向边后图连通。", "inputFormat": "第一行两个整数 $n,m (1 \\le n \\le 3 \\times 10^5, -1 \\le m-n \\le 1500)$，表示图的点数和边数。\n\n接下来 $m$ 行每行三个整数 $u_i,v_i,w_i (1 \\le u_i,v_i \\le n, 1 \\le w_i \\le 10^9)$，表示一条从 $u_i$ 到 $v_i$、边权为 $w_i$ 的有向边。保证图是弱连通的。", "outputFormat": "如果图中不存在环，输出 `-1`，否则输出一个整数表示最小环的长度和。", "hint": "**【样例解释 1】**\n\n最小环为 $1 \\to 2 \\to 4 \\to 3 \\to 1$。\n\n**【样例解释 3】**\n\n最小环为 $1 \\to 1$。", "locale": "zh-CN"}}}
{"pid": "P10045", "type": "P", "difficulty": 5, "samples": [["10 10\n969575 741825 24903 1047319 450475 256145 1045323 479255 810659 768323 \n1 5 6 3034\n2 1 10\n2 1 9\n2 1 4\n1 3 6 126904\n2 5 5\n2 9 9\n1 7 7 853094\n1 4 9 1025178\n2 5 8", "1045541\n1012343\n558151\n580413\n810659\n527353"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "线段树", "2023", "组合数学", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 线段树", "background": "", "description": "有一个长度为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$，保证 $a_i$ 为**奇数**。\n\n有两种操作：\n\n1. 给定 $l,r,x$，将 $a_l,a_{l+1},\\cdots,a_r$ 加上**偶数** $x$；\n\n2. 给定 $l,r$，求 $a_l,a_{l+1},\\cdots,a_r$ 的乘积，答案对 $2^{20}$ 取模；", "inputFormat": "第一行两个正整数 $n,q$ 表示序列的长度和询问的个数. 保证 $1 \\le n,q \\le 2\\times 10^5$。\n\n第二行 $n$ 个**奇数** $a_1,a_2,\\cdots,a_n$. 保证 $1 \\le a_i < 2^{20}$。\n\n接下来 $q$ 行，每一行表示一个操作，格式为以下两种之一：\n\n- $1 ~ l ~ r ~ x$：表示进行第一种操作. 保证 $1 \\le l \\le r \\le n$，$0 \\le x < 2 ^ {20}$。\n- $2 ~ l ~ r$：表示进行第二种操作. 保证 $1 \\le l \\le r \\le n$。", "outputFormat": "对于每一次 $2$ 操作，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 线段树", "background": "", "description": "有一个长度为 $n$ 的序列 $a_1,a_2,\\cdots,a_n$，保证 $a_i$ 为**奇数**。\n\n有两种操作：\n\n1. 给定 $l,r,x$，将 $a_l,a_{l+1},\\cdots,a_r$ 加上**偶数** $x$；\n\n2. 给定 $l,r$，求 $a_l,a_{l+1},\\cdots,a_r$ 的乘积，答案对 $2^{20}$ 取模；", "inputFormat": "第一行两个正整数 $n,q$ 表示序列的长度和询问的个数. 保证 $1 \\le n,q \\le 2\\times 10^5$。\n\n第二行 $n$ 个**奇数** $a_1,a_2,\\cdots,a_n$. 保证 $1 \\le a_i < 2^{20}$。\n\n接下来 $q$ 行，每一行表示一个操作，格式为以下两种之一：\n\n- $1 ~ l ~ r ~ x$：表示进行第一种操作. 保证 $1 \\le l \\le r \\le n$，$0 \\le x < 2 ^ {20}$。\n- $2 ~ l ~ r$：表示进行第二种操作. 保证 $1 \\le l \\le r \\le n$。", "outputFormat": "对于每一次 $2$ 操作，输出一行一个整数表示答案。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10046", "type": "P", "difficulty": 6, "samples": [["3\n1 10\n8 2\n4 5", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 哈密顿", "background": "", "description": "给出 $n$ 个二元组 $(a_i,b_i)$。\n\n考虑 $n$ 个节点的带权有向完全图 $G$，其中从 $i (1 \\le i \\le n)$ 到 $j (1 \\le j \\le n)$ 的边边权为 $|a_i-b_j|$。\n\n求 $G$ 的一条哈密顿回路使得其经过的边的边权和最大，并给出这个最大值。", "inputFormat": "输入的第一行一个整数 $n(2 \\le n \\le 10^5)$ 表示二元组个数，接下来 $n$ 行每行两个整数 $a_i,b_i(0 \\le a_i,b_i \\le 10^9)$ 表示每个二元组。保证输入的 $n$ 个二元组中的总共 $2n$ 个数两两不同。", "outputFormat": "输出一行一个整数表示最大的哈密顿回路边权和。", "hint": "考察哈密顿回路 $1 \\to 2 \\to 3 \\to 1$，其边权和为 $|1-2| + |\n8-5| + |4-10| = 10$。可以证明不存在哈密顿回路边权和超过 $10$，因此答案为 $10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 哈密顿", "background": "", "description": "给出 $n$ 个二元组 $(a_i,b_i)$。\n\n考虑 $n$ 个节点的带权有向完全图 $G$，其中从 $i (1 \\le i \\le n)$ 到 $j (1 \\le j \\le n)$ 的边边权为 $|a_i-b_j|$。\n\n求 $G$ 的一条哈密顿回路使得其经过的边的边权和最大，并给出这个最大值。", "inputFormat": "输入的第一行一个整数 $n(2 \\le n \\le 10^5)$ 表示二元组个数，接下来 $n$ 行每行两个整数 $a_i,b_i(0 \\le a_i,b_i \\le 10^9)$ 表示每个二元组。保证输入的 $n$ 个二元组中的总共 $2n$ 个数两两不同。", "outputFormat": "输出一行一个整数表示最大的哈密顿回路边权和。", "hint": "考察哈密顿回路 $1 \\to 2 \\to 3 \\to 1$，其边权和为 $|1-2| + |\n8-5| + |4-10| = 10$。可以证明不存在哈密顿回路边权和超过 $10$，因此答案为 $10$。", "locale": "zh-CN"}}}
{"pid": "P10047", "type": "P", "difficulty": 6, "samples": [["7 9\ncats\neel\neve\nevil\nlee\nolive\nstack", "5"], ["2 2\na\naa", "2"], ["6 12\naa\naab\nno\non\npets\nstep", "43"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 勿蹖宠物", "background": "", "description": "Ene 喜欢回文。\n\nEne 现在有一些单词。她想选出若干个单词并将它们首尾相连，形成长度恰好为 $L$ 的回文串。每个单词都可以选择多次，也可以不选。\n\nEne 想知道这样做的方案数。Ene 认为两个方案不同，当且仅当各单词出现次数不同或它们的排列顺序不同，注意多种不同的方案可能会得到同一个回文串。由于答案可能会很大，你需要将答案对 $1,000,000,007$ 取模。", "inputFormat": "输入的第一行包含两个正整数 $N, L$，分别表示单词的数量和需要组成的回文串的长度。保证 $1\\le N\\le 333$，$1\\le L\\le 1000$。\n\n接下来 $N$ 行，每行输入一个字符串 $s_i$，表示一个单词。保证 $1\\le |s_i| \\le L$，$\\sum_{i=1}^N |s_i| \\le 600$；输入的单词仅包含小写字符，且互不相同。", "outputFormat": "输出一个非负整数，表示组成回文串的方案数对 $1,000,000,007$ 取模后的结果。", "hint": "**【样例解释 1】**\n\n有以下五种方案：\n\n- `stack` `cats`\n- `evil` `olive`\n- `eel` `eve` `lee`\n- `lee` `eve` `eel`\n- `eve` `eve` `eve`\n\n**【样例解释 2】**\n\n有以下两种方案：\n\n- `a` `a`\n- `aa`", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 勿蹖宠物", "background": "", "description": "Ene 喜欢回文。\n\nEne 现在有一些单词。她想选出若干个单词并将它们首尾相连，形成长度恰好为 $L$ 的回文串。每个单词都可以选择多次，也可以不选。\n\nEne 想知道这样做的方案数。Ene 认为两个方案不同，当且仅当各单词出现次数不同或它们的排列顺序不同，注意多种不同的方案可能会得到同一个回文串。由于答案可能会很大，你需要将答案对 $1,000,000,007$ 取模。", "inputFormat": "输入的第一行包含两个正整数 $N, L$，分别表示单词的数量和需要组成的回文串的长度。保证 $1\\le N\\le 333$，$1\\le L\\le 1000$。\n\n接下来 $N$ 行，每行输入一个字符串 $s_i$，表示一个单词。保证 $1\\le |s_i| \\le L$，$\\sum_{i=1}^N |s_i| \\le 600$；输入的单词仅包含小写字符，且互不相同。", "outputFormat": "输出一个非负整数，表示组成回文串的方案数对 $1,000,000,007$ 取模后的结果。", "hint": "**【样例解释 1】**\n\n有以下五种方案：\n\n- `stack` `cats`\n- `evil` `olive`\n- `eel` `eve` `lee`\n- `lee` `eve` `eel`\n- `eve` `eve` `eve`\n\n**【样例解释 2】**\n\n有以下两种方案：\n\n- `a` `a`\n- `aa`", "locale": "zh-CN"}}}
{"pid": "P10048", "type": "P", "difficulty": 3, "samples": [["4\n0 3 2 100\n3 0 8 100\n2 8 0 10\n100 100 10 0", "0110\n1000\n1001\n0010"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 图", "background": "", "description": "给定一个 $n$ 个点的无向正权完全图，请对于每一条边 $(a,b)$，求出是否存在一个点对 $(x,y)$ 使得 $x\\rightarrow y$ 的所有最短路都经过 $(a,b)$。", "inputFormat": "第一行一个正整数 $n (1 \\le n \\le 500)$ 表示图的点数。\n\n接下来 $n$ 行每行 $n$ 个数，构成一个大小为 $n\\times n$ 的矩阵，第 $i$ 行第 $j$ 个数 $a_{i,j}(1\\leq a_{i,j}\\leq 10^6)$ 表示 $(i,j)$ 之间的边长度，特别地，$a_{i,i} = 0$.\n\n保证 $a_{i,j}=a_{j,i}$。", "outputFormat": "输出一个大小为 $n$ 的 $01$ 矩阵，其中第 $i$ 行第 $j$ 列为 $1$ 表示边 $(i,j)$ 满足题目中提出的要求，$0$ 表示不满足。\n\n特别的，当 $i=j$ 时输出 $0$。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 图", "background": "", "description": "给定一个 $n$ 个点的无向正权完全图，请对于每一条边 $(a,b)$，求出是否存在一个点对 $(x,y)$ 使得 $x\\rightarrow y$ 的所有最短路都经过 $(a,b)$。", "inputFormat": "第一行一个正整数 $n (1 \\le n \\le 500)$ 表示图的点数。\n\n接下来 $n$ 行每行 $n$ 个数，构成一个大小为 $n\\times n$ 的矩阵，第 $i$ 行第 $j$ 个数 $a_{i,j}(1\\leq a_{i,j}\\leq 10^6)$ 表示 $(i,j)$ 之间的边长度，特别地，$a_{i,i} = 0$.\n\n保证 $a_{i,j}=a_{j,i}$。", "outputFormat": "输出一个大小为 $n$ 的 $01$ 矩阵，其中第 $i$ 行第 $j$ 列为 $1$ 表示边 $(i,j)$ 满足题目中提出的要求，$0$ 表示不满足。\n\n特别的，当 $i=j$ 时输出 $0$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10049", "type": "P", "difficulty": 5, "samples": [["2\n114 1 5\n514 2 10", "8\n10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "省赛/邀请赛"], "title": "[CCPC 2023 北京市赛] 报数 IV", "background": "这是小 R 和小 Z 第四次玩报数游戏了，因此他们决定不再编冗长的题面了。你只需要知道，他们又编了一个奇怪的报数规则，然后想算一下有哪些数字可以报出来。", "description": "对于任意正整数 $n$，定义函数 $f(n)$ 为 $n$ 在十进制下各个数位之和，如 $f(114514)=1+1+4+5+1+4=16$。显然 $f(n)$ 也是正整数，因此可以嵌套地考虑 $f(f(n)),f(f(f(n)))$ 等等。进而对于正整数 $n,k$ 可以定义 $g(n,k)=f(f(...f(n)))$（共有 $k$ 层 $f$）。\n\n为了让报数游戏不再每局都是一模一样的，小 R 和小 Z 决定为每局游戏设置两个正整数 $k,m$，然后规定：在这一局游戏中，所有满足 $g(n,k)=m$ 的正整数 $n$ 都是不能报出的。\n\n因为两人都是游戏高手，为防止游戏无限进行下去，每局游戏中还给出了一个正整数 $N$ 表示报数的上界。两人想知道：在不超过 $N$ 的正整数中，有多少是按这个规则不能报出的。", "inputFormat": "第一行：一个正整数 $T$，表示小 R 和小 Z 进行的游戏轮数，保证 $1 \\le T \\le 5$。\n\n接下来 $T$ 行，每行 $3$ 个正整数 $N,k,m$，描述一局游戏，含义如上文所述。保证 $1 \\le N \\le 10^{1000}, 1 \\le k,m \\le 10^9$。", "outputFormat": "输出 $T$ 行，每行一个整数，表示这局游戏中不能报出的数的个数，对 $10^9+7$ 取模。", "hint": "第一局游戏中，不能报出的数有 $5,14,23,32,41,50,104,113$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCPC 2023 北京市赛] 报数 IV", "background": "这是小 R 和小 Z 第四次玩报数游戏了，因此他们决定不再编冗长的题面了。你只需要知道，他们又编了一个奇怪的报数规则，然后想算一下有哪些数字可以报出来。", "description": "对于任意正整数 $n$，定义函数 $f(n)$ 为 $n$ 在十进制下各个数位之和，如 $f(114514)=1+1+4+5+1+4=16$。显然 $f(n)$ 也是正整数，因此可以嵌套地考虑 $f(f(n)),f(f(f(n)))$ 等等。进而对于正整数 $n,k$ 可以定义 $g(n,k)=f(f(...f(n)))$（共有 $k$ 层 $f$）。\n\n为了让报数游戏不再每局都是一模一样的，小 R 和小 Z 决定为每局游戏设置两个正整数 $k,m$，然后规定：在这一局游戏中，所有满足 $g(n,k)=m$ 的正整数 $n$ 都是不能报出的。\n\n因为两人都是游戏高手，为防止游戏无限进行下去，每局游戏中还给出了一个正整数 $N$ 表示报数的上界。两人想知道：在不超过 $N$ 的正整数中，有多少是按这个规则不能报出的。", "inputFormat": "第一行：一个正整数 $T$，表示小 R 和小 Z 进行的游戏轮数，保证 $1 \\le T \\le 5$。\n\n接下来 $T$ 行，每行 $3$ 个正整数 $N,k,m$，描述一局游戏，含义如上文所述。保证 $1 \\le N \\le 10^{1000}, 1 \\le k,m \\le 10^9$。", "outputFormat": "输出 $T$ 行，每行一个整数，表示这局游戏中不能报出的数的个数，对 $10^9+7$ 取模。", "hint": "第一局游戏中，不能报出的数有 $5,14,23,32,41,50,104,113$。", "locale": "zh-CN"}}}
{"pid": "P10050", "type": "P", "difficulty": 4, "samples": [["6 3 3\n1 1 2 3 1 2\n1 2\n2 5\n2 6", "NO\nYES\nNO"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["二分", "2022", "CCO（加拿大）", "深度优先搜索 DFS", "图论建模", "拓扑排序", "双指针 two-pointer"], "title": "[CCO 2022] Alternating Heights", "background": "", "description": "Troy 计划给 CCO 的学生拍一张合影，他向你寻求帮助。\n\n有 $K$ 个学生，编号从 $1$ 到 $K$。Troy 忘记了学生的身高，但他记得没有两个学生的身高相同。\n\nTroy 有一个序列 $A_{1}, A_{2}, \\ldots, A_{N}$，表示合影中从左到右的学生顺序。一个学生可能在 $A$ 中出现多次。你不确定这张合影会怎么拍，但你不愿意认为 Troy 犯了错误。\n\nTroy 会给你 $Q$ 个形式为 $x,y$ 的询问，每个询问为「给定学生序列 $A_{x}, A_{x+1}, \\ldots, A_{y}$，他们的身高能否形成一个交替序列？」更具体地说，我们用 $h_i$ 表示第 $i$ 个学生的身高。如果存在一种身高分配$ h_1, h_2, \\ldots, h_K$，使得 $h_{A_{x}}>h_{A_{x+1}}<h_{A_{x+2}}>h_{A_{x+3}}<\\ldots h_{A_{y}}$，回答 `YES`；否则回答 `NO`。\n\n注意，每个查询都是独立的：也就是说，询问 $i$ 的身高分配与询问 $j$ 的身高分配无关 $(i\\neq j)$。", "inputFormat": "第一行包含三个用空格分隔的整数 $N, K$ 和 $Q$。\n\n第二行包含 $N$ 个整数，表示 $A_{1}, A_{2}, \\ldots, A_{N}\\left(1 \\leq A_{i} \\leq K\\right)$。\n\n接下来的 $Q$ 行，每行包含两个用空格分隔的整数 $x$ 和 $y (1 \\leq x<y \\leq N)$，表示一组查询。", "outputFormat": "输出 $Q$ 行。第 $i$ 行，输出 `YES` 或者 `NO`，表示 Troy 的第 $i$ 个查询的答案。", "hint": "## 样例说明\n\n对于第一个询问，不可能有 $h_1>h_1$，所以答案是 `NO`。\n\n对于第二个询问，$h_1>h_2<h_3>h_1$ 的一种方案是 $h_1=160 \\mathrm{~cm}, h_2=140 \\mathrm{~cm}, h_3=180 \\mathrm{~cm}$。另一种方案是 $h_1=1.55 \\mathrm{~m}, h_2=1.473 \\mathrm{~m}, h_3=1.81 \\mathrm{~m}$。\n\n对于第三个询问，不可能同时有 $h_1>h_2$ 和 $h_1<h_2$。\n\n## 数据范围\n\n对于所有的数据，有 $2 \\leq N \\leq 3000$，$2 \\leq K \\leq N$，$1 \\leq Q \\leq 10^{6}$。\n\n子任务编号|\t分值|\t$N$|\t$K$|\t$Q$\n:-:|:-:|:-:|:-:|:-:\n$1$|\t$16$|\t$2 \\leq N \\leq 3000$|\t$K=2$|\t$1 \\leq Q \\leq 10^{6}$\n$2$|\t$24$|\t$2 \\leq N \\leq 500$|\t$2 \\leq K \\leq \\min (N, 5)$|$1 \\leq Q \\leq 10^{6}$\n$3$\t|$28$|\t$2 \\leq N \\leq 3000$\t|$2 \\leq K \\leq N$\t|$1 \\leq Q \\leq 2000$\n$4$|\t$32$| $2 \\leq N \\leq 3000$\t|$2 \\leq K \\leq N$\t|\t$1 \\leq Q \\leq 10^{6}$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2022] Alternating Heights", "background": "", "description": "Troy 计划给 CCO 的学生拍一张合影，他向你寻求帮助。\n\n有 $K$ 个学生，编号从 $1$ 到 $K$。Troy 忘记了学生的身高，但他记得没有两个学生的身高相同。\n\nTroy 有一个序列 $A_{1}, A_{2}, \\ldots, A_{N}$，表示合影中从左到右的学生顺序。一个学生可能在 $A$ 中出现多次。你不确定这张合影会怎么拍，但你不愿意认为 Troy 犯了错误。\n\nTroy 会给你 $Q$ 个形式为 $x,y$ 的询问，每个询问为「给定学生序列 $A_{x}, A_{x+1}, \\ldots, A_{y}$，他们的身高能否形成一个交替序列？」更具体地说，我们用 $h_i$ 表示第 $i$ 个学生的身高。如果存在一种身高分配$ h_1, h_2, \\ldots, h_K$，使得 $h_{A_{x}}>h_{A_{x+1}}<h_{A_{x+2}}>h_{A_{x+3}}<\\ldots h_{A_{y}}$，回答 `YES`；否则回答 `NO`。\n\n注意，每个查询都是独立的：也就是说，询问 $i$ 的身高分配与询问 $j$ 的身高分配无关 $(i\\neq j)$。", "inputFormat": "第一行包含三个用空格分隔的整数 $N, K$ 和 $Q$。\n\n第二行包含 $N$ 个整数，表示 $A_{1}, A_{2}, \\ldots, A_{N}\\left(1 \\leq A_{i} \\leq K\\right)$。\n\n接下来的 $Q$ 行，每行包含两个用空格分隔的整数 $x$ 和 $y (1 \\leq x<y \\leq N)$，表示一组查询。", "outputFormat": "输出 $Q$ 行。第 $i$ 行，输出 `YES` 或者 `NO`，表示 Troy 的第 $i$ 个查询的答案。", "hint": "## 样例说明\n\n对于第一个询问，不可能有 $h_1>h_1$，所以答案是 `NO`。\n\n对于第二个询问，$h_1>h_2<h_3>h_1$ 的一种方案是 $h_1=160 \\mathrm{~cm}, h_2=140 \\mathrm{~cm}, h_3=180 \\mathrm{~cm}$。另一种方案是 $h_1=1.55 \\mathrm{~m}, h_2=1.473 \\mathrm{~m}, h_3=1.81 \\mathrm{~m}$。\n\n对于第三个询问，不可能同时有 $h_1>h_2$ 和 $h_1<h_2$。\n\n## 数据范围\n\n对于所有的数据，有 $2 \\leq N \\leq 3000$，$2 \\leq K \\leq N$，$1 \\leq Q \\leq 10^{6}$。\n\n子任务编号|\t分值|\t$N$|\t$K$|\t$Q$\n:-:|:-:|:-:|:-:|:-:\n$1$|\t$16$|\t$2 \\leq N \\leq 3000$|\t$K=2$|\t$1 \\leq Q \\leq 10^{6}$\n$2$|\t$24$|\t$2 \\leq N \\leq 500$|\t$2 \\leq K \\leq \\min (N, 5)$|$1 \\leq Q \\leq 10^{6}$\n$3$\t|$28$|\t$2 \\leq N \\leq 3000$\t|$2 \\leq K \\leq N$\t|$1 \\leq Q \\leq 2000$\n$4$|\t$32$| $2 \\leq N \\leq 3000$\t|$2 \\leq K \\leq N$\t|\t$1 \\leq Q \\leq 10^{6}$", "locale": "zh-CN"}}}
{"pid": "P10051", "type": "P", "difficulty": 4, "samples": [["3\n10 15 10\n20 20\n0 0", "NO"], ["3\n10 15 10\n20 20\n0 11", "YES\n5\n10 0 10\n5 5 10"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "贪心", "2022", "Special Judge", "CCO（加拿大）"], "title": "[CCO 2022] Rainy Markets", "background": "## 由于数据包过大，本题无法上传全部数据。", "description": "有 $N$ 个公交车站，标号为 $1, \\ldots, N$。第 $i$ 个公交车站可以容纳 $B_{i}$ 个人。\n\n对于每个 $i \\in\\{1, \\ldots, N-1\\}$，有一条人行道连接公交车站 $i$ 和公交车站 $i+1$，中间有一个露天市场。第 $i$ 个市场有 $U_{i}$ 把雨伞出售，每把雨伞的价格为 $1$。\n\n现在，有 $P_{i}$ 个人在第 $i$ 个市场里面，所有的公交车站都是空的。\n\n突然，天开始下雨，市场 $i$ 的每个人都必须在三种方案中选择一种：\n\n- 去公交车站 $i$；\n- 去公交车站 $i+1$；\n- 留下来买一把雨伞。\n\n如果一个人无法在某个公交车站下或者买一把雨伞，他们就会淋湿。\n\n你需要回答如果在最优的安排方案下，能否确保每个人都能不被雨淋湿。如果是的话，你需要给出他们需要花费的最少的钱，以及每个人应该移动到哪个公交车站。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个用空格分隔的整数 $B_{i}\\ (1 \\leq i \\leq N)$，表示公交车站 $i$ 的容量。\n\n第三行包含 $N-1$ 个用空格分隔的整数 $P_{i}\\ (1 \\leq i \\leq N-1)$，表示市场 $i$ 的人数。\n\n第四行包含 $N-1$ 个用空格分隔的整数 $U_{i}\\ (1 \\leq i \\leq N-1)$，表示市场 $i$ 出售的雨伞的数量。", "outputFormat": "如果每个人都能在雨伞或公交车站下，输出 $N+1$ 行：\n\n- 第一行输出一行 `YES`。\n- 第二行输出一个整数，表示包含在雨伞上花费的最少的钱。\n- 接下来的 $N-1$ 行，每行输出三个用空格分隔的整数分别表示市场 $i\\ (1\\leq i \\leq N-1)$ 移动到公交车站 $i$ 的人数，市场 $i$ 买雨伞的人数，市场 $i$ 移动到公交车站 $i+1$ 的人数。\n\n如果有多种合法方案，你可以输出任意一种。\n\n否则，输出一行 `NO`。", "hint": "## 样例 1 解释\n\n公交车站有 $35$ 个空位，没有雨伞出售，但市场有 $40$ 个人，所以答案是 `NO`。\n\n## 样例 2 解释\n\n市场 $1$ 中的 $10$ 个人会去公交车站 $1$，没有人会买雨伞，$10$ 个人会去公交车站 $2$。\n\n市场 $2$ 中的 $5$ 个人会去公交车站 $2$，$5$ 个人会留下来买雨伞，$10$ 个人会移动到公交车站 $3$。\n\n总共购买了 $5$ 把雨伞，花费了 $5$。\n\n## 数据范围\n\n对于所有的数据，有 $2 \\leq N \\leq 10^{6}$，$0 \\leq B_{i} \\leq 2 \\cdot 10^{9}$，$0 \\leq P_{i},U_{i} \\leq 10^{9}$。\n\n子任务编号|分值|\t$N$|\t$B$|\t$P$|\t$U$\n:-:|:-:|:-:|:-:|:-:|:-:\n|$1$|\t$20$|\t$2 \\leq N \\leq 10^{6}$|\t$0 \\leq B_{i} \\leq 2 \\cdot 10^{9}\t$|$0 \\leq P_{i} \\leq 10^{9}$\t|$U_{i}=0$\n$2$|$20$|$2 \\leq N \\leq 2000$|\t$0 \\leq B_{i} \\leq 400$|$\t0 \\leq P_{i} \\leq 200$|\t$0 \\leq U_{i} \\leq 200$\n$3$|\t$24$|\t$2 \\leq N \\leq 4000$\t|$0 \\leq B_{i} \\leq 4000$|\t$0 \\leq P_{i} \\leq 2000$|\t$0 \\leq U_{i} \\leq 2000$\n$4$|\t$36$|\t$2 \\leq N \\leq 10^{6}$\t|$0 \\leq B_{i} \\leq 2 \\cdot 10^{9}$|\t$0 \\leq P_{i} \\leq 10^{9}$|\t$0 \\leq U_{i} \\leq 10^{9}$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2022] Rainy Markets", "background": "## 由于数据包过大，本题无法上传全部数据。", "description": "有 $N$ 个公交车站，标号为 $1, \\ldots, N$。第 $i$ 个公交车站可以容纳 $B_{i}$ 个人。\n\n对于每个 $i \\in\\{1, \\ldots, N-1\\}$，有一条人行道连接公交车站 $i$ 和公交车站 $i+1$，中间有一个露天市场。第 $i$ 个市场有 $U_{i}$ 把雨伞出售，每把雨伞的价格为 $1$。\n\n现在，有 $P_{i}$ 个人在第 $i$ 个市场里面，所有的公交车站都是空的。\n\n突然，天开始下雨，市场 $i$ 的每个人都必须在三种方案中选择一种：\n\n- 去公交车站 $i$；\n- 去公交车站 $i+1$；\n- 留下来买一把雨伞。\n\n如果一个人无法在某个公交车站下或者买一把雨伞，他们就会淋湿。\n\n你需要回答如果在最优的安排方案下，能否确保每个人都能不被雨淋湿。如果是的话，你需要给出他们需要花费的最少的钱，以及每个人应该移动到哪个公交车站。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个用空格分隔的整数 $B_{i}\\ (1 \\leq i \\leq N)$，表示公交车站 $i$ 的容量。\n\n第三行包含 $N-1$ 个用空格分隔的整数 $P_{i}\\ (1 \\leq i \\leq N-1)$，表示市场 $i$ 的人数。\n\n第四行包含 $N-1$ 个用空格分隔的整数 $U_{i}\\ (1 \\leq i \\leq N-1)$，表示市场 $i$ 出售的雨伞的数量。", "outputFormat": "如果每个人都能在雨伞或公交车站下，输出 $N+1$ 行：\n\n- 第一行输出一行 `YES`。\n- 第二行输出一个整数，表示包含在雨伞上花费的最少的钱。\n- 接下来的 $N-1$ 行，每行输出三个用空格分隔的整数分别表示市场 $i\\ (1\\leq i \\leq N-1)$ 移动到公交车站 $i$ 的人数，市场 $i$ 买雨伞的人数，市场 $i$ 移动到公交车站 $i+1$ 的人数。\n\n如果有多种合法方案，你可以输出任意一种。\n\n否则，输出一行 `NO`。", "hint": "## 样例 1 解释\n\n公交车站有 $35$ 个空位，没有雨伞出售，但市场有 $40$ 个人，所以答案是 `NO`。\n\n## 样例 2 解释\n\n市场 $1$ 中的 $10$ 个人会去公交车站 $1$，没有人会买雨伞，$10$ 个人会去公交车站 $2$。\n\n市场 $2$ 中的 $5$ 个人会去公交车站 $2$，$5$ 个人会留下来买雨伞，$10$ 个人会移动到公交车站 $3$。\n\n总共购买了 $5$ 把雨伞，花费了 $5$。\n\n## 数据范围\n\n对于所有的数据，有 $2 \\leq N \\leq 10^{6}$，$0 \\leq B_{i} \\leq 2 \\cdot 10^{9}$，$0 \\leq P_{i},U_{i} \\leq 10^{9}$。\n\n子任务编号|分值|\t$N$|\t$B$|\t$P$|\t$U$\n:-:|:-:|:-:|:-:|:-:|:-:\n|$1$|\t$20$|\t$2 \\leq N \\leq 10^{6}$|\t$0 \\leq B_{i} \\leq 2 \\cdot 10^{9}\t$|$0 \\leq P_{i} \\leq 10^{9}$\t|$U_{i}=0$\n$2$|$20$|$2 \\leq N \\leq 2000$|\t$0 \\leq B_{i} \\leq 400$|$\t0 \\leq P_{i} \\leq 200$|\t$0 \\leq U_{i} \\leq 200$\n$3$|\t$24$|\t$2 \\leq N \\leq 4000$\t|$0 \\leq B_{i} \\leq 4000$|\t$0 \\leq P_{i} \\leq 2000$|\t$0 \\leq U_{i} \\leq 2000$\n$4$|\t$36$|\t$2 \\leq N \\leq 10^{6}$\t|$0 \\leq B_{i} \\leq 2 \\cdot 10^{9}$|\t$0 \\leq P_{i} \\leq 10^{9}$|\t$0 \\leq U_{i} \\leq 10^{9}$", "locale": "zh-CN"}}}
{"pid": "P10052", "type": "P", "difficulty": 6, "samples": [["3 1 8\n10 20\n100 101\n20 21\n15 25", "3"], ["1 5 3\n1 100\n1 2\n2 3\n3 4\n4 5\n5 6", "4"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "CCO（加拿大）"], "title": "[CCO 2022] Double Attendance", "background": "", "description": "由于你的学校课程安排过于抽象，你的两门课程将在两个不同的教室里同时开始！你一次只能在一个地方，所以你只能在两个教室之间来回溜达，希望能够抓住两门课程的重点。\n\n两个教室的编号分别是 $1$ 和 $2$。在教室 $i$，老师将在课堂上展示 $N_{i}$ 张不同的幻灯片，第 j 张幻灯片将在时间区间 $\\left(A_{i, j}, B_{i, j}\\right)\\left(0 \\leq A_{i, j}<B_{i, j}\\right)$ 内展示，其中 $A_{i, j}$ 和 $B_{i, j}$ 是从课堂开始后以秒为单位计算的时间。在两个教室里，不会在某个时间点同时展示多张幻灯片。例如，一个课堂可能在 $(1,2)$ 和 $(5,6)$ 这两对时间区间内有幻灯片展示，或者在 $(10,20)$ 和 $(20,30)$ 这两对时间区间内有幻灯片展示，但不会在 $(10,20)$ 和 $(19,30)$ 这两对时间区间有幻灯片展示。\n\n你在教室 $1$ 开始一天的课程，两门课程都在时刻 $0$ 开始。在那之后，你可以在任何时间点（不一定是整数秒）花费 $K$ 秒从你当前的教室移动到另一个教室。如果你在展示幻灯片的时间区间内在其教室里花费了正数时间，你就认为自己看到了这张幻灯片。当你在两个教室之间移动的 $K$ 秒内，你不在任何一个教室里，因此无法看到任何幻灯片。\n\n例如，如果教室 $1$ 在时间区间 $(10,20)$ 展示一张幻灯片，教室 $2$ 在时间区间 $(15,25)$ 展示一张幻灯片，而 $K=8$，那么如果你在时间 $11.5$ 秒时从教室 $1$ 移动到教室 $2$（到达时间为 $19.5$ 秒），你就能看到两张幻灯片。另一方面，如果你在时间 $17$ 秒时离开教室 $1$（到达时间为 $25$ 秒），那么你将在教室 $2$ 的幻灯片停止展示后才进入教室，因此你会错过它。\n\n你想要知道你能看到的不同幻灯片的最大数量是多少。", "inputFormat": "第一行包含三个用空格分隔的整数，$N_{1}, N_{2}$ 和 $K$。\n\n接下来的 $N_{1}$ 行，每行包含两个用空格分隔的整数 $A_{1, i}$ 和 $B_{1, i}\\left(1 \\leq i \\leq N_{1}\\right)$。\n\n接下来的 $N_{2}$ 行，每行包含两个用空格分隔的整数，$A_{2, i}$ 和 $B_{2, i}\\left(1 \\leq i \\leq N_{2}\\right)$。", "outputFormat": "输出一个整数，表示你能看到的不同幻灯片的最大数量。", "hint": "## 样例 1 解释\n\n一种可能的最优策略是在教室 $1$ 一直待到时间 $11.5$，然后移动到教室 $2$（到达时间为 $19.5$），一直待到时间 $19.6$，最后返回教室 $1$（到达时间为 $27.6$）。在这个过程中，你将看到除了第 $3$ 张幻灯片以外的所有幻灯片。你不可能看到所有的 $4$ 张幻灯片。\n\n## 样例 2 解释\n\n即使你在课程开始时立即移动到教室 $2$（例如，在时间 $0.0001$），你也会错过那里展示的前两张幻灯片。因此，你最多可以看到四张幻灯片。\n\n## 数据范围\n对于所有的数据，有 $1 \\leq N_{i} \\leq 3\\times 10^5$，$0 \\leq A_{i, j}<B_{i, j} \\leq 10^{9}$，$1 \\leq K \\leq 10^{9}$。\n\n子任务编号|分值|$N_{i}$|$A_{i, j},B_{i, j}$\n:-:|:-:|:-:|:-:\n$1$|$20$|$1 \\leq N_{i} \\leq 10$|$0 \\leq A_{i, j}<B_{i, j} \\leq 2000$\n$2$|$40$|$1 \\leq N_{i} \\leq 2000$|$0 \\leq A_{i, j}<B_{i, j} \\leq 2000$\n$3$|$24$|$1 \\leq N_{i} \\leq 2000$|$B_{i, j}-A_{i, j} \\leq 2 K$\n$4$|$16$|$1 \\leq N_{i} \\leq 3\\times 10^5$|$0 \\leq A_{i, j}<B_{i, j} \\leq 10^{9}$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2022] Double Attendance", "background": "", "description": "由于你的学校课程安排过于抽象，你的两门课程将在两个不同的教室里同时开始！你一次只能在一个地方，所以你只能在两个教室之间来回溜达，希望能够抓住两门课程的重点。\n\n两个教室的编号分别是 $1$ 和 $2$。在教室 $i$，老师将在课堂上展示 $N_{i}$ 张不同的幻灯片，第 j 张幻灯片将在时间区间 $\\left(A_{i, j}, B_{i, j}\\right)\\left(0 \\leq A_{i, j}<B_{i, j}\\right)$ 内展示，其中 $A_{i, j}$ 和 $B_{i, j}$ 是从课堂开始后以秒为单位计算的时间。在两个教室里，不会在某个时间点同时展示多张幻灯片。例如，一个课堂可能在 $(1,2)$ 和 $(5,6)$ 这两对时间区间内有幻灯片展示，或者在 $(10,20)$ 和 $(20,30)$ 这两对时间区间内有幻灯片展示，但不会在 $(10,20)$ 和 $(19,30)$ 这两对时间区间有幻灯片展示。\n\n你在教室 $1$ 开始一天的课程，两门课程都在时刻 $0$ 开始。在那之后，你可以在任何时间点（不一定是整数秒）花费 $K$ 秒从你当前的教室移动到另一个教室。如果你在展示幻灯片的时间区间内在其教室里花费了正数时间，你就认为自己看到了这张幻灯片。当你在两个教室之间移动的 $K$ 秒内，你不在任何一个教室里，因此无法看到任何幻灯片。\n\n例如，如果教室 $1$ 在时间区间 $(10,20)$ 展示一张幻灯片，教室 $2$ 在时间区间 $(15,25)$ 展示一张幻灯片，而 $K=8$，那么如果你在时间 $11.5$ 秒时从教室 $1$ 移动到教室 $2$（到达时间为 $19.5$ 秒），你就能看到两张幻灯片。另一方面，如果你在时间 $17$ 秒时离开教室 $1$（到达时间为 $25$ 秒），那么你将在教室 $2$ 的幻灯片停止展示后才进入教室，因此你会错过它。\n\n你想要知道你能看到的不同幻灯片的最大数量是多少。", "inputFormat": "第一行包含三个用空格分隔的整数，$N_{1}, N_{2}$ 和 $K$。\n\n接下来的 $N_{1}$ 行，每行包含两个用空格分隔的整数 $A_{1, i}$ 和 $B_{1, i}\\left(1 \\leq i \\leq N_{1}\\right)$。\n\n接下来的 $N_{2}$ 行，每行包含两个用空格分隔的整数，$A_{2, i}$ 和 $B_{2, i}\\left(1 \\leq i \\leq N_{2}\\right)$。", "outputFormat": "输出一个整数，表示你能看到的不同幻灯片的最大数量。", "hint": "## 样例 1 解释\n\n一种可能的最优策略是在教室 $1$ 一直待到时间 $11.5$，然后移动到教室 $2$（到达时间为 $19.5$），一直待到时间 $19.6$，最后返回教室 $1$（到达时间为 $27.6$）。在这个过程中，你将看到除了第 $3$ 张幻灯片以外的所有幻灯片。你不可能看到所有的 $4$ 张幻灯片。\n\n## 样例 2 解释\n\n即使你在课程开始时立即移动到教室 $2$（例如，在时间 $0.0001$），你也会错过那里展示的前两张幻灯片。因此，你最多可以看到四张幻灯片。\n\n## 数据范围\n对于所有的数据，有 $1 \\leq N_{i} \\leq 3\\times 10^5$，$0 \\leq A_{i, j}<B_{i, j} \\leq 10^{9}$，$1 \\leq K \\leq 10^{9}$。\n\n子任务编号|分值|$N_{i}$|$A_{i, j},B_{i, j}$\n:-:|:-:|:-:|:-:\n$1$|$20$|$1 \\leq N_{i} \\leq 10$|$0 \\leq A_{i, j}<B_{i, j} \\leq 2000$\n$2$|$40$|$1 \\leq N_{i} \\leq 2000$|$0 \\leq A_{i, j}<B_{i, j} \\leq 2000$\n$3$|$24$|$1 \\leq N_{i} \\leq 2000$|$B_{i, j}-A_{i, j} \\leq 2 K$\n$4$|$16$|$1 \\leq N_{i} \\leq 3\\times 10^5$|$0 \\leq A_{i, j}<B_{i, j} \\leq 10^{9}$", "locale": "zh-CN"}}}
{"pid": "P10053", "type": "P", "difficulty": 6, "samples": [["5 2\n1 3\n2 3\n0 0\n4 5\n0 0\n0 0", "4"], ["4 3\n1 2 4\n0 2\n0 3\n0 4\n0 0", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2022", "CCO（加拿大）"], "title": "[CCO 2022] Bi-ing Lottery Treekets", "background": null, "description": "在一个平行宇宙里，每个人都在 CCO 上得了满分。因此，Troy 需要根据抽奖来选出获胜者。每个参赛者将选择一些数字来创建一张彩票。一张彩票是一个大小为 $N$ 的数组，从 $1$ 到 $N$ 编号，其中每个元素是从 $0$ 到 $K$ 的一个数字。\n\n中奖彩票是由将 $K$ 个球（编号为 $1$ 到 $K$）按随机顺序投入一个有根二叉树来确定的。这棵树有 $N$ 个节点（编号为 $1$ 到 $N$），并以节点 $1$ 为根。\n\n每个球都有一个指定的投放节点，它将在那里投放。当一个球投放在一个空节点或进入一个空节点时，会发生以下三种情况之一：\n\n1. 如果当前节点的所有子节点都被球占据（或者如果一个节点没有子节点），那么当前球就会停留在当前节点。也就是说，它会留在那里，不再移动。\n2. 如果当前节点只有一个空的子节点，那么当前球将移动到这个子节点。\n3. 如果当前节点有两个空的子节点，而且如果当前球刚刚被投放，它可以向左或向右移动。否则，它将继续沿着它之前的移动方向移动。\n\n如果 $K$ 个球不能全部被投放，那么就没有确定的中奖彩票。这种情况发生在一个球被投放时，它的投放节点被另一个球占据了。\n\n如果所有 $K$ 个球都被投放了，那么球的停留位置就决定了中奖彩票。中奖彩票的第 $i$ 个元素是停留在节点 $i$ 的球的编号，或者如果没有球停留在节点 $i$，就是 $0$。\n\nTroy 想知道可能的中奖彩票的数量。因为答案可能很大，你只需要求数量对 $10^9+7$ 取模的结果。", "inputFormat": "第一行包含两个用空格分隔的整数 $N$ 和 $K$，表示二叉树中的节点数和球的数目。\n\n第二行包含 $K$ 个用空格分隔的整数，其中第 $i$ 个整数表示编号为 $i$ 的球的指定投放节点。\n\n最后 $N$ 行，每行包含两个用空格分隔的整数。第 $i$ 行包含 $L_{i}$ 和 $R_{i}$，表示第 $i$ 个节点的左子节点和右子节点，其中 $0$ 表示子节点不存在。", "outputFormat": "输出中奖彩票的数量模 $10^{9}+7$。", "hint": "## 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ts1yicyn.png)\n\n考虑当球 $1$ 先被投放时。如果球 $1$ 向左移动，那么它将停留在节点 $2$。之后，球 $2$ 被投放，可以停留在节点 $4$ 或 $5$。如果球 $1$ 向右移动，它将停留在节点 $5$。然后，球 $2$ 将停留在节点 $4$。\n\n考虑当球 $2$ 先被投放时。球 $2$ 可以向左或向右移动，分别停留在节点 $4$ 或 $5$。然后如果球 $1$ 在被投放后向左移动，它将停留在节点 $2$。然而，如果球 $1$ 向右移动，它将停留在节点 $4$ 或 $5$，取决于球 $2$ 没有占据的位置。\n\n可能的中奖彩票是 $[0,1,0,2,0],[0,1,0,0,2],[0,0,0,1,2]$ 和 $[0,0,0,2,1]$。\n\n## 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r5ih52s1.png)\n\n这个样例满足第二个子任务的条件。\n\n球 $3$ 必须先被投放，因为如果球 $1$ 或球 $2$ 在球 $3$ 之前被投放，它会停留在节点 $4$，这不会让球 $3$ 被投放。\n\n因此，我们可以先投放球 $3$，然后投放球 $2$，最后投放球 $1$，或者我们可以先投放球 $3$，然后投放球 $1$，最后投放球 $2$。对应的中奖彩票是 $[0,1,2,3]$ 和 $[0,2,1,3]$。\n\n## 数据范围 \n\n对于所有的数据，有 $1\\leq N,K \\leq 4000$。\n\n子任务编号|分值|$N$ 的范围|$K$ 的范围|额外的约束\n:-:|:-:|:-:|:-:|:-:\n$1$|$12$|$1 \\leq N \\leq 12$|$1 \\leq K \\leq 6$|无\n$2$|$16$|$1 \\leq N \\leq 4000$|$1 \\leq K \\leq 4000$|所有节点都没有左子节点\n$3$|$36$|$1 \\leq N \\leq 4000$|$1 \\leq K \\leq 4000$|$K$ 个投放节点是不同的\n$4$|$36$|$1 \\leq N \\leq 4000$|$1 \\leq K \\leq 4000$|无", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2022] Bi-ing Lottery Treekets", "background": null, "description": "在一个平行宇宙里，每个人都在 CCO 上得了满分。因此，Troy 需要根据抽奖来选出获胜者。每个参赛者将选择一些数字来创建一张彩票。一张彩票是一个大小为 $N$ 的数组，从 $1$ 到 $N$ 编号，其中每个元素是从 $0$ 到 $K$ 的一个数字。\n\n中奖彩票是由将 $K$ 个球（编号为 $1$ 到 $K$）按随机顺序投入一个有根二叉树来确定的。这棵树有 $N$ 个节点（编号为 $1$ 到 $N$），并以节点 $1$ 为根。\n\n每个球都有一个指定的投放节点，它将在那里投放。当一个球投放在一个空节点或进入一个空节点时，会发生以下三种情况之一：\n\n1. 如果当前节点的所有子节点都被球占据（或者如果一个节点没有子节点），那么当前球就会停留在当前节点。也就是说，它会留在那里，不再移动。\n2. 如果当前节点只有一个空的子节点，那么当前球将移动到这个子节点。\n3. 如果当前节点有两个空的子节点，而且如果当前球刚刚被投放，它可以向左或向右移动。否则，它将继续沿着它之前的移动方向移动。\n\n如果 $K$ 个球不能全部被投放，那么就没有确定的中奖彩票。这种情况发生在一个球被投放时，它的投放节点被另一个球占据了。\n\n如果所有 $K$ 个球都被投放了，那么球的停留位置就决定了中奖彩票。中奖彩票的第 $i$ 个元素是停留在节点 $i$ 的球的编号，或者如果没有球停留在节点 $i$，就是 $0$。\n\nTroy 想知道可能的中奖彩票的数量。因为答案可能很大，你只需要求数量对 $10^9+7$ 取模的结果。", "inputFormat": "第一行包含两个用空格分隔的整数 $N$ 和 $K$，表示二叉树中的节点数和球的数目。\n\n第二行包含 $K$ 个用空格分隔的整数，其中第 $i$ 个整数表示编号为 $i$ 的球的指定投放节点。\n\n最后 $N$ 行，每行包含两个用空格分隔的整数。第 $i$ 行包含 $L_{i}$ 和 $R_{i}$，表示第 $i$ 个节点的左子节点和右子节点，其中 $0$ 表示子节点不存在。", "outputFormat": "输出中奖彩票的数量模 $10^{9}+7$。", "hint": "## 样例 1 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ts1yicyn.png)\n\n考虑当球 $1$ 先被投放时。如果球 $1$ 向左移动，那么它将停留在节点 $2$。之后，球 $2$ 被投放，可以停留在节点 $4$ 或 $5$。如果球 $1$ 向右移动，它将停留在节点 $5$。然后，球 $2$ 将停留在节点 $4$。\n\n考虑当球 $2$ 先被投放时。球 $2$ 可以向左或向右移动，分别停留在节点 $4$ 或 $5$。然后如果球 $1$ 在被投放后向左移动，它将停留在节点 $2$。然而，如果球 $1$ 向右移动，它将停留在节点 $4$ 或 $5$，取决于球 $2$ 没有占据的位置。\n\n可能的中奖彩票是 $[0,1,0,2,0],[0,1,0,0,2],[0,0,0,1,2]$ 和 $[0,0,0,2,1]$。\n\n## 样例 2 解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r5ih52s1.png)\n\n这个样例满足第二个子任务的条件。\n\n球 $3$ 必须先被投放，因为如果球 $1$ 或球 $2$ 在球 $3$ 之前被投放，它会停留在节点 $4$，这不会让球 $3$ 被投放。\n\n因此，我们可以先投放球 $3$，然后投放球 $2$，最后投放球 $1$，或者我们可以先投放球 $3$，然后投放球 $1$，最后投放球 $2$。对应的中奖彩票是 $[0,1,2,3]$ 和 $[0,2,1,3]$。\n\n## 数据范围 \n\n对于所有的数据，有 $1\\leq N,K \\leq 4000$。\n\n子任务编号|分值|$N$ 的范围|$K$ 的范围|额外的约束\n:-:|:-:|:-:|:-:|:-:\n$1$|$12$|$1 \\leq N \\leq 12$|$1 \\leq K \\leq 6$|无\n$2$|$16$|$1 \\leq N \\leq 4000$|$1 \\leq K \\leq 4000$|所有节点都没有左子节点\n$3$|$36$|$1 \\leq N \\leq 4000$|$1 \\leq K \\leq 4000$|$K$ 个投放节点是不同的\n$4$|$36$|$1 \\leq N \\leq 4000$|$1 \\leq K \\leq 4000$|无", "locale": "zh-CN"}}}
{"pid": "P10054", "type": "P", "difficulty": 6, "samples": [["6 4 4 9\n1 2 1\n2 3 2\n1 4 3\n3 4 4\n5 6 40\n1 5 30\n2 6 20\n3 6 10", "33"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2022", "CCO（加拿大）"], "title": "[CCO 2022] Phone Plans", "background": "", "description": "CCOland 的市长 Jason 想要在 $N$ 个住户之间安装电话线，这些住户从 $1$ 到 $N$ 编号。为此，他向两家竞争对手 Keenan 移动电话和 Chris 家庭电话询问了他们的电话套餐。一个公司的电话套餐对应于一个特定的等级，每条电话线都有一个等级和一个与之相关的公司。如果你从一个公司购买了等级为 $l$ 的电话套餐，那么你就能够使用该公司所有等级小于或等于 $l$ 的电话线。等级为 $l$ 的电话套餐的价格为 $l$，你不能选择价格低于 $0$ 的电话套餐。\n\n两个住户只有在通过同一家公司的电话线的路径连接时才能相互通信。Jason 想要从每家公司购买一个最低成本的电话套餐，使得至少有 $K$ 对不同的住户能够相互通信。", "inputFormat": "第一行包含四个用空格分隔的整数 N, A, B 和 K，分别表示住户的数量，Keenan 移动电话的电话线的数量，Chris 家庭电话的电话线的数量，以及需要能够相互通信的最小住户对数。\n\n接下来的 $A$ 行，每行包含三个用空格分隔的整数 $u, v$ 和 $l$，表示一条 Keenan 移动电话的电话线。它连接了住户 $u$ 和 $v\\ (1 \\leq u, v \\leq N)$，等级为 $l\\ (1 \\leq l \\leq 10^{9})$。\n\n接下来的 $B$ 行，每行包含三个用空格分隔的整数 $u, v$ 和 $l$，表示一条 Chris 家庭电话的电话线，它连接了住户 $u$ 和 $v\\ (1 \\leq u, v \\leq N)$，等级为 $l\\ (1 \\leq l \\leq 10^{9})$。", "outputFormat": "输出连接至少 $K$ 对不同住户所需的最低成本，如果不可能，则输出 $-1$。", "hint": "## 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v7y9k0vk.png)\n\n如果 Jason 从 Keenan 移动电话购买等级为 $3$ 的电话套餐，从 Chris 家庭电话购买等级为 $30$ 的电话套餐，那么 $(1,2),(1,3),(1,4),(2,3),(2,4),(3,4)$ 可以通过 Keenan 移动电话的线路相互通信，而 $(1,5),(2,6),(3,6),(2,3)$ 可以通过 Chris 家庭电话的线路相互通信。没有更便宜的方法。\n\n## 数据范围\n\n对于所有的数据，有 $1 \\leq N \\leq 2\\times 10^5，0 \\leq A, B \\leq 2\\times 10^5$，$0 \\leq K \\leq \\frac{N(N-1)}{2}$。\n\n子任务编号|分值|$N$|$A, B$|附加限制\n:-:|:-:|:-:|:-:|:-:\n$1$|$24$|$1 \\leq N \\leq 2000$|$0 \\leq A, B \\leq 2\\times 10^5$|无\n$2$|$20$|$1 \\leq N \\leq 2\\times 10^5$|$1 \\leq N \\leq 2\\times 10^5$|Keenan 移动电话只连接编号为奇数的住户；Chris 家庭电话只连接编号为偶数的住户\n$3$|$24$|$1 \\leq N \\leq 2\\times 10^5$|$0 \\leq A \\leq 10$|无\n$4$|$32$|$1 \\leq N \\leq 2\\times 10^5$|$0 \\leq A, B \\leq 2\\times 10^5$|无", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2022] Phone Plans", "background": "", "description": "CCOland 的市长 Jason 想要在 $N$ 个住户之间安装电话线，这些住户从 $1$ 到 $N$ 编号。为此，他向两家竞争对手 Keenan 移动电话和 Chris 家庭电话询问了他们的电话套餐。一个公司的电话套餐对应于一个特定的等级，每条电话线都有一个等级和一个与之相关的公司。如果你从一个公司购买了等级为 $l$ 的电话套餐，那么你就能够使用该公司所有等级小于或等于 $l$ 的电话线。等级为 $l$ 的电话套餐的价格为 $l$，你不能选择价格低于 $0$ 的电话套餐。\n\n两个住户只有在通过同一家公司的电话线的路径连接时才能相互通信。Jason 想要从每家公司购买一个最低成本的电话套餐，使得至少有 $K$ 对不同的住户能够相互通信。", "inputFormat": "第一行包含四个用空格分隔的整数 N, A, B 和 K，分别表示住户的数量，Keenan 移动电话的电话线的数量，Chris 家庭电话的电话线的数量，以及需要能够相互通信的最小住户对数。\n\n接下来的 $A$ 行，每行包含三个用空格分隔的整数 $u, v$ 和 $l$，表示一条 Keenan 移动电话的电话线。它连接了住户 $u$ 和 $v\\ (1 \\leq u, v \\leq N)$，等级为 $l\\ (1 \\leq l \\leq 10^{9})$。\n\n接下来的 $B$ 行，每行包含三个用空格分隔的整数 $u, v$ 和 $l$，表示一条 Chris 家庭电话的电话线，它连接了住户 $u$ 和 $v\\ (1 \\leq u, v \\leq N)$，等级为 $l\\ (1 \\leq l \\leq 10^{9})$。", "outputFormat": "输出连接至少 $K$ 对不同住户所需的最低成本，如果不可能，则输出 $-1$。", "hint": "## 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v7y9k0vk.png)\n\n如果 Jason 从 Keenan 移动电话购买等级为 $3$ 的电话套餐，从 Chris 家庭电话购买等级为 $30$ 的电话套餐，那么 $(1,2),(1,3),(1,4),(2,3),(2,4),(3,4)$ 可以通过 Keenan 移动电话的线路相互通信，而 $(1,5),(2,6),(3,6),(2,3)$ 可以通过 Chris 家庭电话的线路相互通信。没有更便宜的方法。\n\n## 数据范围\n\n对于所有的数据，有 $1 \\leq N \\leq 2\\times 10^5，0 \\leq A, B \\leq 2\\times 10^5$，$0 \\leq K \\leq \\frac{N(N-1)}{2}$。\n\n子任务编号|分值|$N$|$A, B$|附加限制\n:-:|:-:|:-:|:-:|:-:\n$1$|$24$|$1 \\leq N \\leq 2000$|$0 \\leq A, B \\leq 2\\times 10^5$|无\n$2$|$20$|$1 \\leq N \\leq 2\\times 10^5$|$1 \\leq N \\leq 2\\times 10^5$|Keenan 移动电话只连接编号为奇数的住户；Chris 家庭电话只连接编号为偶数的住户\n$3$|$24$|$1 \\leq N \\leq 2\\times 10^5$|$0 \\leq A \\leq 10$|无\n$4$|$32$|$1 \\leq N \\leq 2\\times 10^5$|$0 \\leq A, B \\leq 2\\times 10^5$|无", "locale": "zh-CN"}}}
{"pid": "P10055", "type": "P", "difficulty": 7, "samples": [["9\nABAABBBAA", "4\n6 2\n3 2\n2 2\n1 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000, 1024000]}, "tags": ["2022", "Special Judge", "CCO（加拿大）"], "title": "[CCO 2022] Good Game", "background": "", "description": "Finn 正在玩一个叫做 Twos and Threes 的游戏。Twos and Threes 是一个单人游戏，它在一维棋盘上进行。在初始位置，有 $N$ 个方块排成一行，每个方块标有 $\\tt{A}$ 或 $\\tt{B}$。方块从左到右编号为 $1$ 到 $N$。Finn 可以进行以下操作：\n\n- 选择 $2$ 或 $3$ 个连续的方块，它们有相同的标签，将它们从棋盘上移除并将剩余的方块连接起来，从左到右重新编号方块。\n\n如果棋盘上的所有方块都被移除，Finn 就赢得了游戏。你的任务是帮助 Finn 确定一个赢得游戏的操作序列，或者确定游戏无法获胜。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含一个字符串 $S$，表示游戏开始时的标签。$S$ 中有 $N$ 个字符，$S$ 中的每个字符都是 $\\tt{A}$ 或 $\\tt{B}$。", "outputFormat": "如果存在赢得游戏的操作序列，第一行输出 $K$，即移动序列中的移动次数。在接下来的 $K$ 行中，输出两个空格分隔的整数 $i,j$ 表示移除位于 $[i,i+j-1]$ 的方块的一次操作。\n\n如果没有赢得游戏的操作序列，输出 $-1$。\n\n如果有多个赢得游戏的操作序列，你可以输出任何一个。", "hint": "## 样例解释\n\n操作如下：\n$$ \n\\begin{aligned}\n&\\tt{ABAAB\\underline{BB}AA}\\\\\n&\\tt{AB\\underline{AA}BAA}\\\\\n&\\tt{A\\underline{BB}AA}\\\\\n&\\tt{\\underline{AAA}}\\\\\n\\end{aligned}\n$$\n\n## 数据范围\n\n对于所有的数据，有 $1 \\leq N \\leq 10^{6}$。\n\n子任务编号|分值|$N$ 的范围\n:-:|:-:|:-:\n$1$|$12$|$1 \\leq N \\leq 15$\n$2$|$24$|$1 \\leq N \\leq 300$\n$3$|$28$|$1 \\leq N \\leq 6000$\n$4$|$36$|$1 \\leq N \\leq 10^6$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2022] Good Game", "background": "", "description": "Finn 正在玩一个叫做 Twos and Threes 的游戏。Twos and Threes 是一个单人游戏，它在一维棋盘上进行。在初始位置，有 $N$ 个方块排成一行，每个方块标有 $\\tt{A}$ 或 $\\tt{B}$。方块从左到右编号为 $1$ 到 $N$。Finn 可以进行以下操作：\n\n- 选择 $2$ 或 $3$ 个连续的方块，它们有相同的标签，将它们从棋盘上移除并将剩余的方块连接起来，从左到右重新编号方块。\n\n如果棋盘上的所有方块都被移除，Finn 就赢得了游戏。你的任务是帮助 Finn 确定一个赢得游戏的操作序列，或者确定游戏无法获胜。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含一个字符串 $S$，表示游戏开始时的标签。$S$ 中有 $N$ 个字符，$S$ 中的每个字符都是 $\\tt{A}$ 或 $\\tt{B}$。", "outputFormat": "如果存在赢得游戏的操作序列，第一行输出 $K$，即移动序列中的移动次数。在接下来的 $K$ 行中，输出两个空格分隔的整数 $i,j$ 表示移除位于 $[i,i+j-1]$ 的方块的一次操作。\n\n如果没有赢得游戏的操作序列，输出 $-1$。\n\n如果有多个赢得游戏的操作序列，你可以输出任何一个。", "hint": "## 样例解释\n\n操作如下：\n$$ \n\\begin{aligned}\n&\\tt{ABAAB\\underline{BB}AA}\\\\\n&\\tt{AB\\underline{AA}BAA}\\\\\n&\\tt{A\\underline{BB}AA}\\\\\n&\\tt{\\underline{AAA}}\\\\\n\\end{aligned}\n$$\n\n## 数据范围\n\n对于所有的数据，有 $1 \\leq N \\leq 10^{6}$。\n\n子任务编号|分值|$N$ 的范围\n:-:|:-:|:-:\n$1$|$12$|$1 \\leq N \\leq 15$\n$2$|$24$|$1 \\leq N \\leq 300$\n$3$|$28$|$1 \\leq N \\leq 6000$\n$4$|$36$|$1 \\leq N \\leq 10^6$", "locale": "zh-CN"}}}
{"pid": "P10056", "type": "P", "difficulty": 1, "samples": [["5 2 2 ", "4"], ["11 5 7 ", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "洛谷原创", "O2优化", "洛谷月赛"], "title": "Water", "background": "", "description": "有 $n$ 个杯子，每个杯子的容积是 $a$，且初始装有 $b$ 体积水。\n你可以进行任意次操作，每次操作选择任意两个杯子，将其中一个杯子内的水**全部倒入**另一个杯子中，但是过程中**杯子里的水不能溢出（即不能超过其容积）**，如果不满足则无法进行该操作。\n\n请通过合法的操作，最大化装有最多水的杯子里水的体积。", "inputFormat": "一行三个整数，表示 $a,b,n$。", "outputFormat": "一行一个整数 $x$，表示最多水的杯子内的水的体积。", "hint": "#### 【样例 1 解释】\n\n假设现在有两个杯子 $A,B$，可以先把 $A$ 中的全部水倒入 $B$ 中，此时 $A$ 有 $0$ 升水，$B$ 有 $4$ 升水，结束操作。此时最多水杯子内水的数量为 $4$。\n\n#### 【数据规模与约定】\n\n| 测试点编号 | $n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1\\sim2$ | $10^5$ | 保证无论如何操作都不会溢出 |\n| $3 \\sim 6$ | $10^6$ | 无 |\n| $7 \\sim 10$ | $10^9$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^9$，$1\\le a\\le 10^{18}$，$1\\le b\\le \\min(a,10^9)$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Water", "background": "", "description": "有 $n$ 个杯子，每个杯子的容积是 $a$，且初始装有 $b$ 体积水。\n你可以进行任意次操作，每次操作选择任意两个杯子，将其中一个杯子内的水**全部倒入**另一个杯子中，但是过程中**杯子里的水不能溢出（即不能超过其容积）**，如果不满足则无法进行该操作。\n\n请通过合法的操作，最大化装有最多水的杯子里水的体积。", "inputFormat": "一行三个整数，表示 $a,b,n$。", "outputFormat": "一行一个整数 $x$，表示最多水的杯子内的水的体积。", "hint": "#### 【样例 1 解释】\n\n假设现在有两个杯子 $A,B$，可以先把 $A$ 中的全部水倒入 $B$ 中，此时 $A$ 有 $0$ 升水，$B$ 有 $4$ 升水，结束操作。此时最多水杯子内水的数量为 $4$。\n\n#### 【数据规模与约定】\n\n| 测试点编号 | $n\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1\\sim2$ | $10^5$ | 保证无论如何操作都不会溢出 |\n| $3 \\sim 6$ | $10^6$ | 无 |\n| $7 \\sim 10$ | $10^9$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 10^9$，$1\\le a\\le 10^{18}$，$1\\le b\\le \\min(a,10^9)$。\n", "locale": "zh-CN"}}}
{"pid": "P10057", "type": "P", "difficulty": 1, "samples": [["3\n1 1 2 1 1 1 1 2\n1 1 2 1 1 2 1 3\n2 1 3 1 1 2 1 3", "0\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "Line", "background": "", "description": "在一个二维平面内，给定两条**分别与 $x$ 轴和 $y$ 轴平行**的线段 $AB$ 和 $CD$。\n\n你可以选择一条线段，将其沿着平行于坐标轴（上下左右）的任意一个方向平移**任意单位长度**，称为一次操作。\n\n问至少进行几次操作可以使两条线段相交？", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 一行八个正整数 $x_A,y_A,x_B,y_B,x_C,y_C,x_D,y_D$，表示 $A,B,C,D$ 的坐标。", "outputFormat": "对于每组测试数据：\n\n- 一行一个整数表示最少操作次数。", "hint": "**【样例 1 解释】**\n\n- 对于第一组数据，两条线段已经相交，不需要进行任何操作；\n- 对于第二组数据，一种可行的方案为：将线段 $AB$ 向上平移一个单位；\n- 对于第三组数据，一种可行的方案为：将线段 $AB$ 向上平移一个单位，再将线段 $CD$ 向右平移一个单位。\n\n**【数据规模与约定】**\n\n记 $M=\\max(x_A,y_A,x_B,y_B,x_C,y_C,x_D,y_D)$。\n\n| 测试点编号 | $T\\le$ | $M\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $10$ | 无 |\n| $2\\sim 3$ | $10$ | $50$ | 无 |\n| $4\\sim 5$ | $10$ | $10^3$ | 无 |\n| $6\\sim 7$ | $10^5$ | $10^9$ | 保证答案不超过 $1$ |\n| $8\\sim 10$ | $10^5$ | $10^{9}$ | 无 |\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le M\\le 10^{9}$，$x_A<x_B$，$x_C=x_D$，$y_A=y_B$，$y_C<y_D$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Line", "background": "", "description": "在一个二维平面内，给定两条**分别与 $x$ 轴和 $y$ 轴平行**的线段 $AB$ 和 $CD$。\n\n你可以选择一条线段，将其沿着平行于坐标轴（上下左右）的任意一个方向平移**任意单位长度**，称为一次操作。\n\n问至少进行几次操作可以使两条线段相交？", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 一行八个正整数 $x_A,y_A,x_B,y_B,x_C,y_C,x_D,y_D$，表示 $A,B,C,D$ 的坐标。", "outputFormat": "对于每组测试数据：\n\n- 一行一个整数表示最少操作次数。", "hint": "**【样例 1 解释】**\n\n- 对于第一组数据，两条线段已经相交，不需要进行任何操作；\n- 对于第二组数据，一种可行的方案为：将线段 $AB$ 向上平移一个单位；\n- 对于第三组数据，一种可行的方案为：将线段 $AB$ 向上平移一个单位，再将线段 $CD$ 向右平移一个单位。\n\n**【数据规模与约定】**\n\n记 $M=\\max(x_A,y_A,x_B,y_B,x_C,y_C,x_D,y_D)$。\n\n| 测试点编号 | $T\\le$ | $M\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: |\n| $1$ | $10$ | $10$ | 无 |\n| $2\\sim 3$ | $10$ | $50$ | 无 |\n| $4\\sim 5$ | $10$ | $10^3$ | 无 |\n| $6\\sim 7$ | $10^5$ | $10^9$ | 保证答案不超过 $1$ |\n| $8\\sim 10$ | $10^5$ | $10^{9}$ | 无 |\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10^5$，$1\\le M\\le 10^{9}$，$x_A<x_B$，$x_C=x_D$，$y_A=y_B$，$y_C<y_D$。", "locale": "zh-CN"}}}
{"pid": "P10058", "type": "P", "difficulty": 3, "samples": [["abcde\n3\n> 2\nrev\n< 2", "aedcb"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化", "洛谷月赛"], "title": "Reverse and Rotate", "background": "", "description": "给定一个字符串 $S$ 和 $n$ 次操作，每次操作为以下 $3$ 种形式之一：\n\n1. `< x` 表示将 $S$ 向左循环移动 $x$ 位。例如：$\\mathtt{abcde}$ 执行 `< 2` 后变成 $\\mathtt{cdeab}$。\n\n2. `> x` 表示将 $S$ 向右循环移动 $x$ 位。例如：$\\mathtt{abcde}$ 执行 `> 2` 后变成 $\\mathtt{deabc}$。\n\n3. `rev` 表示将 $S$ 翻转。例如：$\\mathtt{abcde}$ 执行 `rev` 后变成 $\\mathtt{edcba}$。\n\n求 $S$ 在**依次**执行这 $n$ 次操作后得到的字符串 $S'$。\n\n注：对于 $S=s_0s_1\\cdots s_{k-1}$，将其向左循环移动 $x$ 位，会变成 $s_{-x}S_{-x+1}\\cdots S_{-x+k-1}$；向右循环移动 $x$ 位，会变成 $s_{x}S_{x+1}\\cdots S_{x+k-1}$。对于 $x\\equiv y\\pmod k$，有 $s_x=s_y$。", "inputFormat": "第一行一个字符串 $S$。\n\n第二行一个整数 $n$。\n\n接下来 $n$ 行，每行一个操作。", "outputFormat": "一行一个字符串 $S'$，表示**依次**执行 $n$ 次操作后得到的字符串。", "hint": "**【样例 1 解释】**\n\n- 原字符串为 $\\mathtt{abcde}$；\n- 第一次操作后，字符串变为 $\\mathtt{deabc}$；\n- 第二次操作后，字符串变为 $\\mathtt{cbaed}$；\n- 第三次操作后，字符串变为 $\\mathtt{aedcb}$。\n\n**【数据规模与约定】**\n\n记 $|S|$ 表示字符串 $S$ 的长度。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1\\sim3$ | $\\vert S\\vert,n,x \\le 1000$ |\n| $4$ | 没有 `rev` 操作 |\n| $5$ | $S=\\mathtt{aa...abb...b}$ |\n| $6\\sim10$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le |S|,n \\le 10^6$，$0 \\le x \\le 10^9$，$S$ 仅由小写字母组成。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Reverse and Rotate", "background": "", "description": "给定一个字符串 $S$ 和 $n$ 次操作，每次操作为以下 $3$ 种形式之一：\n\n1. `< x` 表示将 $S$ 向左循环移动 $x$ 位。例如：$\\mathtt{abcde}$ 执行 `< 2` 后变成 $\\mathtt{cdeab}$。\n\n2. `> x` 表示将 $S$ 向右循环移动 $x$ 位。例如：$\\mathtt{abcde}$ 执行 `> 2` 后变成 $\\mathtt{deabc}$。\n\n3. `rev` 表示将 $S$ 翻转。例如：$\\mathtt{abcde}$ 执行 `rev` 后变成 $\\mathtt{edcba}$。\n\n求 $S$ 在**依次**执行这 $n$ 次操作后得到的字符串 $S'$。\n\n注：对于 $S=s_0s_1\\cdots s_{k-1}$，将其向左循环移动 $x$ 位，会变成 $s_{-x}S_{-x+1}\\cdots S_{-x+k-1}$；向右循环移动 $x$ 位，会变成 $s_{x}S_{x+1}\\cdots S_{x+k-1}$。对于 $x\\equiv y\\pmod k$，有 $s_x=s_y$。", "inputFormat": "第一行一个字符串 $S$。\n\n第二行一个整数 $n$。\n\n接下来 $n$ 行，每行一个操作。", "outputFormat": "一行一个字符串 $S'$，表示**依次**执行 $n$ 次操作后得到的字符串。", "hint": "**【样例 1 解释】**\n\n- 原字符串为 $\\mathtt{abcde}$；\n- 第一次操作后，字符串变为 $\\mathtt{deabc}$；\n- 第二次操作后，字符串变为 $\\mathtt{cbaed}$；\n- 第三次操作后，字符串变为 $\\mathtt{aedcb}$。\n\n**【数据规模与约定】**\n\n记 $|S|$ 表示字符串 $S$ 的长度。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1\\sim3$ | $\\vert S\\vert,n,x \\le 1000$ |\n| $4$ | 没有 `rev` 操作 |\n| $5$ | $S=\\mathtt{aa...abb...b}$ |\n| $6\\sim10$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le |S|,n \\le 10^6$，$0 \\le x \\le 10^9$，$S$ 仅由小写字母组成。", "locale": "zh-CN"}}}
{"pid": "P10059", "type": "P", "difficulty": 4, "samples": [["3\n5 1\n1 2 3 4 5\n5 2\n1 2 3 4 5\n5 3\n1 2 3 4 5", "4 5\n3 4\n2 3"], ["2\n5 1\n1 2 2 2 3\n5 2\n1 2 2 2 3", "2 5\n1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["贪心", "二分", "单调队列", "洛谷原创", "O2优化", "前缀和", "ST 表", "洛谷月赛"], "title": "Choose", "background": "[加强版](https://www.luogu.com.cn/problem/U397746)\n\n对于一个长度为 $n$ 的序列 $a$ ，定义 $a$ 的极差表示 $a$ 中最大值与最小值之差；定义 $C(a,l,r)$ 表示 $a$ 的**连续**子序列 $[a_l,a_{l+1},\\dots,a_r]$，其中 $1\\le l\\le r\\le n$。", "description": "给定一个长度为 $n$ 的序列 $a$。\n\n你需要选出 $a$ 的 $k$ 个长度均为 $L$ $(1\\le L\\le n-k+1)$ 的不同**连续**子序列 \n$C(a,l_1,l_1+L-1),C(a,l_2,l_2+L-1),\\dots,C(a,l_k,l_k+L-1)$，其中 $1\\le l_1<l_2< \\dots< l_k\\le n-L+1$。\n\n记这 $k$ 个子序列中极差的最小值为 $X$，你需要求出 $X$ 的最大值。同时，你还需要求出，在满足 $X$ 最大的情况下  $L$ 的最小值。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行两个整数 $n,k$。\n- 第二行 $n$ 个整数 $a_1,a_2,...,a_n$。", "outputFormat": "对于每组测试数据：\n\n- 一行两个整数 $X,L$，表示所求极差和子序列长度。", "hint": "**【样例 1 解释】**\n\n- $k=1$ 时，极差最大不超过 $4$，此时满足长度最短的一种方案为 $[1,2,3,4,5]$。\n- $k=2$ 时，极差最大不超过 $3$，此时满足长度最短的一种方案为 $[1,2,3,4],[2,3,4,5]$。\n- $k=3$ 时，极差最大不超过 $2$，此时满足长度最短的一种方案为 $[1,2,3],[2,3,4],[3,4,5]$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | 分值 | $n\\le$ | $k\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $10^5$ | $n$ | $a_i$ 均相等 |\n| $2$ | $5$ | $10^5$ | $1$ | 数据随机生成 |\n| $3$ | $10$ | $100$ | $n$ | 所求的 $X$ 不超过 $10^3$ |\n| $4$ | $20$ | $100$ | $n$ | 无 |\n| $5$ | $20$ | $10^4$ | $n$ | 无 |\n| $6$ | $40$ | $10^5$ | $n$ | 无 |\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10$，$1\\le n\\le 10^5$，$1\\le k\\le n$，$-10^9\\le a_i\\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Choose", "background": "[加强版](https://www.luogu.com.cn/problem/U397746)\n\n对于一个长度为 $n$ 的序列 $a$ ，定义 $a$ 的极差表示 $a$ 中最大值与最小值之差；定义 $C(a,l,r)$ 表示 $a$ 的**连续**子序列 $[a_l,a_{l+1},\\dots,a_r]$，其中 $1\\le l\\le r\\le n$。", "description": "给定一个长度为 $n$ 的序列 $a$。\n\n你需要选出 $a$ 的 $k$ 个长度均为 $L$ $(1\\le L\\le n-k+1)$ 的不同**连续**子序列 \n$C(a,l_1,l_1+L-1),C(a,l_2,l_2+L-1),\\dots,C(a,l_k,l_k+L-1)$，其中 $1\\le l_1<l_2< \\dots< l_k\\le n-L+1$。\n\n记这 $k$ 个子序列中极差的最小值为 $X$，你需要求出 $X$ 的最大值。同时，你还需要求出，在满足 $X$ 最大的情况下  $L$ 的最小值。", "inputFormat": "**本题有多组测试数据。**\n\n第一行一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据：\n\n- 第一行两个整数 $n,k$。\n- 第二行 $n$ 个整数 $a_1,a_2,...,a_n$。", "outputFormat": "对于每组测试数据：\n\n- 一行两个整数 $X,L$，表示所求极差和子序列长度。", "hint": "**【样例 1 解释】**\n\n- $k=1$ 时，极差最大不超过 $4$，此时满足长度最短的一种方案为 $[1,2,3,4,5]$。\n- $k=2$ 时，极差最大不超过 $3$，此时满足长度最短的一种方案为 $[1,2,3,4],[2,3,4,5]$。\n- $k=3$ 时，极差最大不超过 $2$，此时满足长度最短的一种方案为 $[1,2,3],[2,3,4],[3,4,5]$。\n\n**【数据规模与约定】**\n\n**本题采用捆绑测试。**\n\n| 子任务 | 分值 | $n\\le$ | $k\\le$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $5$ | $10^5$ | $n$ | $a_i$ 均相等 |\n| $2$ | $5$ | $10^5$ | $1$ | 数据随机生成 |\n| $3$ | $10$ | $100$ | $n$ | 所求的 $X$ 不超过 $10^3$ |\n| $4$ | $20$ | $100$ | $n$ | 无 |\n| $5$ | $20$ | $10^4$ | $n$ | 无 |\n| $6$ | $40$ | $10^5$ | $n$ | 无 |\n\n对于 $100\\%$ 的数据，$1\\le T\\le 10$，$1\\le n\\le 10^5$，$1\\le k\\le n$，$-10^9\\le a_i\\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10060", "type": "P", "difficulty": 5, "samples": [["3\n3 3\n1 2\n2 3\n1 2 1\n3 2\n1 2\n2 3\n1 2 2\n3 2\n1 2\n2 3\n2 1 1\n", "0\n1\n2\n"], ["1\n10 5\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9\n9 10\n1 1 2 2 3 3 4 4 5 5\n", "13\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2024", "O2优化", "陕西"], "title": "[SNOI2024] 树 V 图", "background": "", "description": "你有一棵 $n$ 个点的无根树，节点的编号为 $1, 2, \\ldots, n$。定义树上两点之间的距离 $\\operatorname{dis}(i, j)$ 为树上 $i$ 点到 $j$ 点的简单路径上的边数。\n\n现在有 $k$ 个关键点 $a_1, a_2, \\ldots, a_k$，对于每个点，我们想求出距离它最近的关键点是哪个点。也就是对于一个点 $v$，令 $f(v)$ 表示令 $\\operatorname{dis}(v, a_i)$ 最小的 $i$，如果有多个 $i$ 满足条件，那么我们会选择其中最小的 $i$。\n\n现在，我们给出了 $f(1), f(2), \\ldots, f(n)$，问有多少组可能的 $(a_1, a_2, \\ldots, a_k)$ 满足条件。由于答案可能很大，输出对 $998244353$ 取模的结果。", "inputFormat": "多组测试数据，第一行一个整数 $T$ 表示数据组数。  \n对于每组测试数据，第一行两个整数 $n, k$，表示节点个数和关键点个数。  \n接下来 $n - 1$ 行，每行两个整数 $u, v$，表示一条树边 $(u, v)$。  \n接下来一行，$n$ 个整数，$f(1), f(2), \\ldots, f(n)$。注意：数据**不保证**一定存在一组可能的 $(a_1, a_2, \\ldots, a_k)$。", "outputFormat": "对于每组数据，输出一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**【样例 \\#1 解释】**\n\n在第一个样例中，对于第二组数据，一个解为 $(1, 2)$。对于第三组数据，两个解为 $(2, 1), (3, 1)$。\n\n注意，当多个点距离相同时，我们选择的是最小的 $i$ 而不是 $a_i$。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `voronoi/voronoi3.in` 与 `voronoi/voronoi3.ans`，这个样例满足测试点 $3 \\sim 4$ 的条件限制。\n\n---\n\n**【样例 \\#4】**\n\n见附件中 `voronoi/voronoi3.in` 与 `voronoi/voronoi3.ans`，这个样例满足测试点 $7 \\sim 10$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le T \\le 10$，$2 \\le k \\le n \\le 3 \\times {10}^3$，$1 \\le f(i) \\le k$。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $15$ | 无 |\n| $3 \\sim 4$ | $3000$ | A |\n| $5 \\sim 6$ | $3000$ | B |\n| $7 \\sim 10$ | $3000$ | 无 |\n\n特殊性质 A：保证树是一条链。  \n特殊性质 B：保证 $k = 2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2024] 树 V 图", "background": "", "description": "你有一棵 $n$ 个点的无根树，节点的编号为 $1, 2, \\ldots, n$。定义树上两点之间的距离 $\\operatorname{dis}(i, j)$ 为树上 $i$ 点到 $j$ 点的简单路径上的边数。\n\n现在有 $k$ 个关键点 $a_1, a_2, \\ldots, a_k$，对于每个点，我们想求出距离它最近的关键点是哪个点。也就是对于一个点 $v$，令 $f(v)$ 表示令 $\\operatorname{dis}(v, a_i)$ 最小的 $i$，如果有多个 $i$ 满足条件，那么我们会选择其中最小的 $i$。\n\n现在，我们给出了 $f(1), f(2), \\ldots, f(n)$，问有多少组可能的 $(a_1, a_2, \\ldots, a_k)$ 满足条件。由于答案可能很大，输出对 $998244353$ 取模的结果。", "inputFormat": "多组测试数据，第一行一个整数 $T$ 表示数据组数。  \n对于每组测试数据，第一行两个整数 $n, k$，表示节点个数和关键点个数。  \n接下来 $n - 1$ 行，每行两个整数 $u, v$，表示一条树边 $(u, v)$。  \n接下来一行，$n$ 个整数，$f(1), f(2), \\ldots, f(n)$。注意：数据**不保证**一定存在一组可能的 $(a_1, a_2, \\ldots, a_k)$。", "outputFormat": "对于每组数据，输出一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**【样例 \\#1 解释】**\n\n在第一个样例中，对于第二组数据，一个解为 $(1, 2)$。对于第三组数据，两个解为 $(2, 1), (3, 1)$。\n\n注意，当多个点距离相同时，我们选择的是最小的 $i$ 而不是 $a_i$。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `voronoi/voronoi3.in` 与 `voronoi/voronoi3.ans`，这个样例满足测试点 $3 \\sim 4$ 的条件限制。\n\n---\n\n**【样例 \\#4】**\n\n见附件中 `voronoi/voronoi3.in` 与 `voronoi/voronoi3.ans`，这个样例满足测试点 $7 \\sim 10$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le T \\le 10$，$2 \\le k \\le n \\le 3 \\times {10}^3$，$1 \\le f(i) \\le k$。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $15$ | 无 |\n| $3 \\sim 4$ | $3000$ | A |\n| $5 \\sim 6$ | $3000$ | B |\n| $7 \\sim 10$ | $3000$ | 无 |\n\n特殊性质 A：保证树是一条链。  \n特殊性质 B：保证 $k = 2$。", "locale": "zh-CN"}}}
{"pid": "P10061", "type": "P", "difficulty": 6, "samples": [["4 4\n1 1 2 3 4\n2 2 1 4 2 3\n1 2 1 3 2\n2 1 1 1 4 5\n", "984660761\n"], ["10 10\n2 5 1 10 4 689412516\n1 3 4 3 4\n1 3 5 4 6\n1 4 1 8 5\n1 1 2 1 2\n1 4 2 7 5\n1 2 5 2 5\n2 3 3 3 9 856075030\n2 4 2 5 6 308750020\n2 1 5 9 7 252732904\n", "94292030\n"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2024", "O2优化", "陕西"], "title": "[SNOI2024] 矩阵", "background": "", "description": "你要维护一个 $n \\times n$ 的矩阵 $A$，其中第 $i$ 行第 $j$ 列的元素记作 $A_{i, j}$。行和列从 $1$ 开始标号。一开始，有 $A_{i, j} = (i + 1)^j \\bmod 998244353$。\n\n你需要支持 $q$ 个操作，每个操作是下面两种操作中的一种。\n\n- $1\\ x_1\\ y_1\\ x_2\\ y_2$，这里保证 $y_2 - x_2 = y_1 - x_1$。将子矩形 $[x_1, x_2] \\times [y_1, y_2]$ 逆时针旋转 $90$ 度。\n  - 具体地，令 $d = x_2 - x_1 + 1$。\n  - 首先提取 $d \\times d$ 的子矩阵 $A'$，对于所有的 $i, j$（$1 \\le i, j \\le d$），令 $A'_{i, j} \\gets A_{x_1 + i - 1, y_1 + j - 1}$。\n  - 然后将 $A'$ 旋转，得到一个 $d \\times d$ 的子矩阵 $B'$，令 $B'_{i, j} \\gets A'_{j, d - i + 1}$。\n  - 然后将 $B'$ 填回到 $A$ 中，对所有的 $i, j$（$1 \\le i, j \\le d$），令 $A_{i + x_1 - 1, j + y_1 - 1} \\gets B'_{i, j}$。\n- $2\\ x_1\\ y_1\\ x_2\\ y_2\\ d$。将子矩形 $[x_1, x_2] \\times [y_1, y_2]$ 内所有的元素加 $d$。\n  - 具体地，对于每个 $i$（$x_1 \\le i \\le x_2$）、$j$（$y_1 \\le j \\le y_2$），令 $A_{i, j} \\gets A_{i, j} + d$。\n\n你需要在所有操作结束之后，输出这个矩阵。由于输出可能很大，请输出\n$$ \\Biggl( \\sum_{i = 1}^{n} \\sum_{j = 1}^{n} A_{i, j} \\times {12345}^{(i - 1) n + j} \\Biggr) \\bmod 1000000007 $$\n的结果。", "inputFormat": "第一行两个整数 $n, q$ 表示矩阵大小和操作个数。  \n接下来 $q$ 行，每行若干个数，表示上面的某种操作。", "outputFormat": "输出一个整数，表示答案对 $1000000007$ 取模的结果。", "hint": "**【样例 \\#1 解释】**\n\n对于第一个样例，矩阵分别为\n$$\\begin{bmatrix} 2 & {\\textcolor{red}{4}} & {\\textcolor{red}{8}} & {\\textcolor{red}{16}} \\\\ 3 & {\\textcolor{red}{9}} & {\\textcolor{red}{27}} & {\\textcolor{red}{81}} \\\\ 4 & {\\textcolor{red}{16}} & {\\textcolor{red}{64}} & {\\textcolor{red}{256}} \\\\ 5 & 25 & 125 & 625 \\end{bmatrix} \\to \\begin{bmatrix} 2 & 16 & 81 & 256 \\\\ {\\textcolor{blue}{3}} & {\\textcolor{blue}{8}} & 27 & 64 \\\\ {\\textcolor{blue}{4}} & {\\textcolor{blue}{4}} & 9 & 16 \\\\ {\\textcolor{blue}{5}} & {\\textcolor{blue}{25}} & 125 & 625 \\end{bmatrix} \\to \\begin{bmatrix} 2 & 16 & 81 & 256 \\\\ {\\textcolor{red}{6}} & {\\textcolor{red}{11}} & 27 & 64 \\\\ {\\textcolor{red}{7}} & {\\textcolor{red}{7}} & 9 & 16 \\\\ 8 & 28 & 125 & 625 \\end{bmatrix}$$\n$$\\to \\begin{bmatrix} {\\textcolor{blue}{2}} & {\\textcolor{blue}{16}} & {\\textcolor{blue}{81}} & {\\textcolor{blue}{256}} \\\\ 11 & 7 & 27 & 64 \\\\ 6 & 7 & 9 & 16 \\\\ 8 & 28 & 125 & 625 \\end{bmatrix} \\to \\begin{bmatrix} 7 & 21 & 86 & 261 \\\\ 11 & 7 & 27 & 64 \\\\ 6 & 7 & 9 & 16 \\\\ 8 & 28 & 125 & 625 \\end{bmatrix}$$\n其中每个旋转操作对应的数字用红色表示，加操作对应的数字用蓝色表示。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `matrix/matrix3.in` 与 `matrix/matrix3.ans`，这个样例满足测试点 $5 \\sim 6$ 的条件限制。\n\n---\n\n**【样例 \\#4】**\n\n见附件中 `matrix/matrix3.in` 与 `matrix/matrix3.ans`，这个样例满足测试点 $9 \\sim 10$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le n \\le 3000$，$1 \\le q \\le 3000$。  \n对于每个操作，保证 $1 \\le x_1 \\le x_2 \\le n$，$1 \\le y_1 \\le y_2 \\le n$，$1 \\le d \\le {10}^9$。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | $q \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $100$ | $3000$ | 无 |\n| $2$ | $3000$ | $3000$ | A |\n| $3 \\sim 4$ | $3000$ | $2000$ | B |\n| $5 \\sim 6$ | $3000$ | $3000$ | B |\n| $7 \\sim 8$ | $3000$ | $2000$ | 无 |\n| $9 \\sim 10$ | $3000$ | $3000$ | 无 |\n\n特殊性质 A：保证没有第一类旋转操作。  \n特殊性质 B：保证没有第二类加法操作。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2024] 矩阵", "background": "", "description": "你要维护一个 $n \\times n$ 的矩阵 $A$，其中第 $i$ 行第 $j$ 列的元素记作 $A_{i, j}$。行和列从 $1$ 开始标号。一开始，有 $A_{i, j} = (i + 1)^j \\bmod 998244353$。\n\n你需要支持 $q$ 个操作，每个操作是下面两种操作中的一种。\n\n- $1\\ x_1\\ y_1\\ x_2\\ y_2$，这里保证 $y_2 - x_2 = y_1 - x_1$。将子矩形 $[x_1, x_2] \\times [y_1, y_2]$ 逆时针旋转 $90$ 度。\n  - 具体地，令 $d = x_2 - x_1 + 1$。\n  - 首先提取 $d \\times d$ 的子矩阵 $A'$，对于所有的 $i, j$（$1 \\le i, j \\le d$），令 $A'_{i, j} \\gets A_{x_1 + i - 1, y_1 + j - 1}$。\n  - 然后将 $A'$ 旋转，得到一个 $d \\times d$ 的子矩阵 $B'$，令 $B'_{i, j} \\gets A'_{j, d - i + 1}$。\n  - 然后将 $B'$ 填回到 $A$ 中，对所有的 $i, j$（$1 \\le i, j \\le d$），令 $A_{i + x_1 - 1, j + y_1 - 1} \\gets B'_{i, j}$。\n- $2\\ x_1\\ y_1\\ x_2\\ y_2\\ d$。将子矩形 $[x_1, x_2] \\times [y_1, y_2]$ 内所有的元素加 $d$。\n  - 具体地，对于每个 $i$（$x_1 \\le i \\le x_2$）、$j$（$y_1 \\le j \\le y_2$），令 $A_{i, j} \\gets A_{i, j} + d$。\n\n你需要在所有操作结束之后，输出这个矩阵。由于输出可能很大，请输出\n$$ \\Biggl( \\sum_{i = 1}^{n} \\sum_{j = 1}^{n} A_{i, j} \\times {12345}^{(i - 1) n + j} \\Biggr) \\bmod 1000000007 $$\n的结果。", "inputFormat": "第一行两个整数 $n, q$ 表示矩阵大小和操作个数。  \n接下来 $q$ 行，每行若干个数，表示上面的某种操作。", "outputFormat": "输出一个整数，表示答案对 $1000000007$ 取模的结果。", "hint": "**【样例 \\#1 解释】**\n\n对于第一个样例，矩阵分别为\n$$\\begin{bmatrix} 2 & {\\textcolor{red}{4}} & {\\textcolor{red}{8}} & {\\textcolor{red}{16}} \\\\ 3 & {\\textcolor{red}{9}} & {\\textcolor{red}{27}} & {\\textcolor{red}{81}} \\\\ 4 & {\\textcolor{red}{16}} & {\\textcolor{red}{64}} & {\\textcolor{red}{256}} \\\\ 5 & 25 & 125 & 625 \\end{bmatrix} \\to \\begin{bmatrix} 2 & 16 & 81 & 256 \\\\ {\\textcolor{blue}{3}} & {\\textcolor{blue}{8}} & 27 & 64 \\\\ {\\textcolor{blue}{4}} & {\\textcolor{blue}{4}} & 9 & 16 \\\\ {\\textcolor{blue}{5}} & {\\textcolor{blue}{25}} & 125 & 625 \\end{bmatrix} \\to \\begin{bmatrix} 2 & 16 & 81 & 256 \\\\ {\\textcolor{red}{6}} & {\\textcolor{red}{11}} & 27 & 64 \\\\ {\\textcolor{red}{7}} & {\\textcolor{red}{7}} & 9 & 16 \\\\ 8 & 28 & 125 & 625 \\end{bmatrix}$$\n$$\\to \\begin{bmatrix} {\\textcolor{blue}{2}} & {\\textcolor{blue}{16}} & {\\textcolor{blue}{81}} & {\\textcolor{blue}{256}} \\\\ 11 & 7 & 27 & 64 \\\\ 6 & 7 & 9 & 16 \\\\ 8 & 28 & 125 & 625 \\end{bmatrix} \\to \\begin{bmatrix} 7 & 21 & 86 & 261 \\\\ 11 & 7 & 27 & 64 \\\\ 6 & 7 & 9 & 16 \\\\ 8 & 28 & 125 & 625 \\end{bmatrix}$$\n其中每个旋转操作对应的数字用红色表示，加操作对应的数字用蓝色表示。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `matrix/matrix3.in` 与 `matrix/matrix3.ans`，这个样例满足测试点 $5 \\sim 6$ 的条件限制。\n\n---\n\n**【样例 \\#4】**\n\n见附件中 `matrix/matrix3.in` 与 `matrix/matrix3.ans`，这个样例满足测试点 $9 \\sim 10$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le n \\le 3000$，$1 \\le q \\le 3000$。  \n对于每个操作，保证 $1 \\le x_1 \\le x_2 \\le n$，$1 \\le y_1 \\le y_2 \\le n$，$1 \\le d \\le {10}^9$。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | $q \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $100$ | $3000$ | 无 |\n| $2$ | $3000$ | $3000$ | A |\n| $3 \\sim 4$ | $3000$ | $2000$ | B |\n| $5 \\sim 6$ | $3000$ | $3000$ | B |\n| $7 \\sim 8$ | $3000$ | $2000$ | 无 |\n| $9 \\sim 10$ | $3000$ | $3000$ | 无 |\n\n特殊性质 A：保证没有第一类旋转操作。  \n特殊性质 B：保证没有第二类加法操作。", "locale": "zh-CN"}}}
{"pid": "P10062", "type": "P", "difficulty": 7, "samples": [["3\n2 1 1\n1\n3 2 2\n1 2\n2 1\n5 2 3\n1 2 3\n4 3 2\n", "Yes\n1 2\n2 1\nNo\nYes\n1 2 3 4 5\n4 3 2 5 1\n2 4 5 1 3\n3 5 1 2 4\n5 1 4 3 2\n"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2024", "Special Judge", "O2优化", "陕西"], "title": "[SNOI2024] 拉丁方", "background": "", "description": "我们定义一个 $n \\times n$ 的矩阵 $A$ 为拉丁方，当且仅当，每行每列都是一个 $1 \\sim n$ 的排列。\n\n现在给你一个矩阵 $A$ 左上角的一个 $R \\times C$ 的子矩阵，也就是 $A_{i, j}$（$1 \\le i \\le R$，$1 \\le j \\le C$）。问能不能将剩下的位置填上数使得它是一个拉丁方。", "inputFormat": "多组测试数据，第一行一个整数 $T$ 表示测试数据组数。  \n对于每组测试数据，第一行三个整数 $n, R, C$ 表示矩阵大小和已知的矩阵大小。  \n接下来 $R$ 行，每行 $C$ 个数，其中第 $i$ 行的第 $j$ 个数表示 $A_{i, j}$。", "outputFormat": "对于每组数据，第一行输出一个字符串 `Yes` 或者 `No`，表示能否找到满足条件的拉丁方。  \n如果能找到满足条件的拉丁方，那么在接下来 $n$ 行，每行输出 $n$ 个数，表示一个满足条件的拉丁方。如果有多组满足条件的方案，输出任意一种即可。", "hint": "**【样例 \\#1 解释】**\n\n在第一个样例中，对于第二组数据，根据前两行可以发现，$A_{1, 3} = A_{2, 3} = 3$，所以不存在满足条件的拉丁方。\n\n对于第三组数据，可以发现输出是一个满足条件的拉丁方，并且左上角是输入的矩阵。下面也是一个满足条件的方案。\n$$\\begin{bmatrix} 1 & 2 & 3 & 5 & 4 \\\\ 4 & 3 & 2 & 1 & 5 \\\\ 3 & 5 & 1 & 4 & 2 \\\\ 2 & 4 & 5 & 3 & 1 \\\\ 5 & 1 & 4 & 2 & 3 \\end{bmatrix}$$\n\n---\n\n**【样例 \\#2】**\n\n见附件中 `latin/latin2.in` 与 `latin/latin2.ans`，这个样例满足测试点 $6 \\sim 7$ 的条件限制。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `latin/latin3.in` 与 `latin/latin3.ans`，这个样例满足测试点 $11 \\sim 12$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le T \\le 10$，$1 \\le n \\le 500$，$1 \\le R, C \\le n$，$1 \\le A_{i, j} \\le n$，保证输入的子矩阵不存在一行或者一列有两个相同的数。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $6$ | 无 |\n| $3 \\sim 4$ | $10$ | 无 |\n| $5$ | $500$ | A |\n| $6 \\sim 7$ | $100$ | B |\n| $8 \\sim 9$ | $300$ | B |\n| $10$ | $500$ | B |\n| $11 \\sim 12$ | $500$ | C |\n| $13 \\sim 14$ | $100$ | 无 |\n| $15 \\sim 16$ | $300$ | 无 |\n| $17 \\sim 20$ | $500$ | 无 |\n\n特殊性质 A：保证 $R = 1$。  \n特殊性质 B：保证 $C = n$。  \n特殊性质 C：保证 $R, C \\le \\frac{n}{2}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2024] 拉丁方", "background": "", "description": "我们定义一个 $n \\times n$ 的矩阵 $A$ 为拉丁方，当且仅当，每行每列都是一个 $1 \\sim n$ 的排列。\n\n现在给你一个矩阵 $A$ 左上角的一个 $R \\times C$ 的子矩阵，也就是 $A_{i, j}$（$1 \\le i \\le R$，$1 \\le j \\le C$）。问能不能将剩下的位置填上数使得它是一个拉丁方。", "inputFormat": "多组测试数据，第一行一个整数 $T$ 表示测试数据组数。  \n对于每组测试数据，第一行三个整数 $n, R, C$ 表示矩阵大小和已知的矩阵大小。  \n接下来 $R$ 行，每行 $C$ 个数，其中第 $i$ 行的第 $j$ 个数表示 $A_{i, j}$。", "outputFormat": "对于每组数据，第一行输出一个字符串 `Yes` 或者 `No`，表示能否找到满足条件的拉丁方。  \n如果能找到满足条件的拉丁方，那么在接下来 $n$ 行，每行输出 $n$ 个数，表示一个满足条件的拉丁方。如果有多组满足条件的方案，输出任意一种即可。", "hint": "**【样例 \\#1 解释】**\n\n在第一个样例中，对于第二组数据，根据前两行可以发现，$A_{1, 3} = A_{2, 3} = 3$，所以不存在满足条件的拉丁方。\n\n对于第三组数据，可以发现输出是一个满足条件的拉丁方，并且左上角是输入的矩阵。下面也是一个满足条件的方案。\n$$\\begin{bmatrix} 1 & 2 & 3 & 5 & 4 \\\\ 4 & 3 & 2 & 1 & 5 \\\\ 3 & 5 & 1 & 4 & 2 \\\\ 2 & 4 & 5 & 3 & 1 \\\\ 5 & 1 & 4 & 2 & 3 \\end{bmatrix}$$\n\n---\n\n**【样例 \\#2】**\n\n见附件中 `latin/latin2.in` 与 `latin/latin2.ans`，这个样例满足测试点 $6 \\sim 7$ 的条件限制。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `latin/latin3.in` 与 `latin/latin3.ans`，这个样例满足测试点 $11 \\sim 12$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le T \\le 10$，$1 \\le n \\le 500$，$1 \\le R, C \\le n$，$1 \\le A_{i, j} \\le n$，保证输入的子矩阵不存在一行或者一列有两个相同的数。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $6$ | 无 |\n| $3 \\sim 4$ | $10$ | 无 |\n| $5$ | $500$ | A |\n| $6 \\sim 7$ | $100$ | B |\n| $8 \\sim 9$ | $300$ | B |\n| $10$ | $500$ | B |\n| $11 \\sim 12$ | $500$ | C |\n| $13 \\sim 14$ | $100$ | 无 |\n| $15 \\sim 16$ | $300$ | 无 |\n| $17 \\sim 20$ | $500$ | 无 |\n\n特殊性质 A：保证 $R = 1$。  \n特殊性质 B：保证 $C = n$。  \n特殊性质 C：保证 $R, C \\le \\frac{n}{2}$。", "locale": "zh-CN"}}}
{"pid": "P10063", "type": "P", "difficulty": 7, "samples": [["10\n1 2 3 4 6 8 9 12 16 18\n", "12\n1 1\n1 5\n2 5\n3 6\n3 7\n4 4\n4 8\n4 9\n5 8\n5 9\n7 7\n9 9\n"], ["3\n999999999999999956000000000000000363 999999999999999844000000000000004059 999999999999999866000000000000001353\n", "1\n1 3\n"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2024", "O2优化", "陕西"], "title": "[SNOI2024] 平方数", "background": "原题时间限制为 1.5 s。\n\n由于 hack 数据难以通过，改为 10 s。", "description": "你有一个正整数序列 $a_1, a_2, \\ldots, a_n$。请问有多少个区间的乘积是完全平方数。也就是有多少对 $(l, r)$（$1 \\le l \\le r \\le n$），满足 $\\prod_{i = l}^{r} a_i$ 是完全平方数。", "inputFormat": "第一行一个整数 $n$ 表示数字个数。  \n接下来一行，每行 $n$ 个数，表示 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "输出一个整数，表示有多少对区间的乘积是完全平方数。  \n接下来按照字典序输出这些区间，也就是按照 $l$ 从小到大输出。  \n如果有多个 $l$ 相同的区间，按照 $r$ 从小到大输出。如果区间个数超过 ${10}^5$ 个，输出前 ${10}^5$ 个即可。", "hint": "**【样例 \\#2 解释】**\n\n在第二个样例中，这三个数为 ${10}^{18} - 11, {10}^{18} - 33, {10}^{18} - 123$ 两两相乘。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `square/square3.in` 与 `square/square3.ans`。\n\n这个样例满足测试点 $4 \\sim 6$ 的条件限制。\n\n---\n\n**【样例 \\#4】**\n\n见附件中 `square/square4.in` 与 `square/square4.ans`。\n\n这个样例满足测试点 $11 \\sim 14$ 的条件限制。\n\n---\n\n**【样例 \\#5】**\n\n见附件中 `square/square5.in` 与 `square/square5.ans`。\n\n这个样例满足测试点 $18 \\sim 20$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le n \\le 3 \\times {10}^5$，$1 \\le a_i \\le {10}^{36}$。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | $a_i \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $1000$ | ${10}^4$ |\n| $4 \\sim 6$ | ${10}^5$ | ${10}^6$ |\n| $7 \\sim 10$ | $100$ | ${10}^{36}$ |\n| $11 \\sim 14$ | $1000$ | ${10}^{36}$ |\n| $15 \\sim 17$ | ${10}^5$ | ${10}^{36}$ |\n| $18 \\sim 20$ | $3 \\times {10}^5$ | ${10}^{36}$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2024] 平方数", "background": "原题时间限制为 1.5 s。\n\n由于 hack 数据难以通过，改为 10 s。", "description": "你有一个正整数序列 $a_1, a_2, \\ldots, a_n$。请问有多少个区间的乘积是完全平方数。也就是有多少对 $(l, r)$（$1 \\le l \\le r \\le n$），满足 $\\prod_{i = l}^{r} a_i$ 是完全平方数。", "inputFormat": "第一行一个整数 $n$ 表示数字个数。  \n接下来一行，每行 $n$ 个数，表示 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "输出一个整数，表示有多少对区间的乘积是完全平方数。  \n接下来按照字典序输出这些区间，也就是按照 $l$ 从小到大输出。  \n如果有多个 $l$ 相同的区间，按照 $r$ 从小到大输出。如果区间个数超过 ${10}^5$ 个，输出前 ${10}^5$ 个即可。", "hint": "**【样例 \\#2 解释】**\n\n在第二个样例中，这三个数为 ${10}^{18} - 11, {10}^{18} - 33, {10}^{18} - 123$ 两两相乘。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `square/square3.in` 与 `square/square3.ans`。\n\n这个样例满足测试点 $4 \\sim 6$ 的条件限制。\n\n---\n\n**【样例 \\#4】**\n\n见附件中 `square/square4.in` 与 `square/square4.ans`。\n\n这个样例满足测试点 $11 \\sim 14$ 的条件限制。\n\n---\n\n**【样例 \\#5】**\n\n见附件中 `square/square5.in` 与 `square/square5.ans`。\n\n这个样例满足测试点 $18 \\sim 20$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le n \\le 3 \\times {10}^5$，$1 \\le a_i \\le {10}^{36}$。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | $a_i \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $1000$ | ${10}^4$ |\n| $4 \\sim 6$ | ${10}^5$ | ${10}^6$ |\n| $7 \\sim 10$ | $100$ | ${10}^{36}$ |\n| $11 \\sim 14$ | $1000$ | ${10}^{36}$ |\n| $15 \\sim 17$ | ${10}^5$ | ${10}^{36}$ |\n| $18 \\sim 20$ | $3 \\times {10}^5$ | ${10}^{36}$ |", "locale": "zh-CN"}}}
{"pid": "P10064", "type": "P", "difficulty": 7, "samples": [["3\n1 2\n2 3\n", "5\n"], ["6\n1 2\n2 3\n2 4\n3 5\n3 6\n", "27296\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2024", "O2优化", "陕西"], "title": "[SNOI2024] 公交线路", "background": "", "description": "给定一棵 $n$ 个点的无根树。我们希望在一些点对之间修建公交线路，满足任意两个点之间只需要至多两条公交线路就能到达。\n\n形式化地说，考虑树上的所有 $\\frac{n (n - 1)}{2}$ 条两个端点不同的简单路径。对于这些路径的一个子集 $S$，称它是好的当且仅当：\n- 考虑一张新的图 $G$，对于一对点 $u, v$，当且仅当存在 $S$ 中的一条路径 $P$，满足 $u$ 和 $v$ 都在 $P$ 上，我们会在 $u, v$ 之间连上边权为 $1$ 的无向边。\n- 要求 $G$ 中任意两点之间的距离都不超过 $2$。\n\n你需要求出有多少个子集 $S$ 是好的。由于答案可能很大，输出对 $998244353$ 取模的结果。", "inputFormat": "第一行，一个正整数 $n$ 表示节点个数。  \n接下来 $n - 1$ 行，每行两个正整数 $u, v$，表示一条树边 $(u, v)$。", "outputFormat": "输出一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**【样例 \\#1 解释】**\n\n对于对于第一个样例，所有可行的方案为 $\\{(1, 3)\\}, \\{(1, 3), (1, 2)\\}, \\{(1, 3), (2, 3)\\}, \\{(1, 3), (1, 2), (2, 3)\\}, \\{(1, 2), (2, 3)\\}$。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `bus/bus3.in` 与 `bus/bus3.ans`。\n\n这个样例满足测试点 $11 \\sim 14$ 的条件限制。\n\n---\n\n**【样例 \\#4】**\n\n见附件中 `bus/bus4.in` 与 `bus/bus4.ans`。\n\n这个样例满足测试点 $19 \\sim 20$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le n \\le 3000$。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $6$ | 无 |\n| $4 \\sim 7$ | $10$ | 无 |\n| $8 \\sim 10$ | $3000$ | A |\n| $11 \\sim 14$ | $100$ | 无 |\n| $15 \\sim 18$ | $500$ | 无 |\n| $19 \\sim 20$ | $3000$ | 无 |\n\n特殊性质 A：保证树是一条链。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2024] 公交线路", "background": "", "description": "给定一棵 $n$ 个点的无根树。我们希望在一些点对之间修建公交线路，满足任意两个点之间只需要至多两条公交线路就能到达。\n\n形式化地说，考虑树上的所有 $\\frac{n (n - 1)}{2}$ 条两个端点不同的简单路径。对于这些路径的一个子集 $S$，称它是好的当且仅当：\n- 考虑一张新的图 $G$，对于一对点 $u, v$，当且仅当存在 $S$ 中的一条路径 $P$，满足 $u$ 和 $v$ 都在 $P$ 上，我们会在 $u, v$ 之间连上边权为 $1$ 的无向边。\n- 要求 $G$ 中任意两点之间的距离都不超过 $2$。\n\n你需要求出有多少个子集 $S$ 是好的。由于答案可能很大，输出对 $998244353$ 取模的结果。", "inputFormat": "第一行，一个正整数 $n$ 表示节点个数。  \n接下来 $n - 1$ 行，每行两个正整数 $u, v$，表示一条树边 $(u, v)$。", "outputFormat": "输出一个整数，表示答案对 $998244353$ 取模的结果。", "hint": "**【样例 \\#1 解释】**\n\n对于对于第一个样例，所有可行的方案为 $\\{(1, 3)\\}, \\{(1, 3), (1, 2)\\}, \\{(1, 3), (2, 3)\\}, \\{(1, 3), (1, 2), (2, 3)\\}, \\{(1, 2), (2, 3)\\}$。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `bus/bus3.in` 与 `bus/bus3.ans`。\n\n这个样例满足测试点 $11 \\sim 14$ 的条件限制。\n\n---\n\n**【样例 \\#4】**\n\n见附件中 `bus/bus4.in` 与 `bus/bus4.ans`。\n\n这个样例满足测试点 $19 \\sim 20$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有的数据，保证 $1 \\le n \\le 3000$。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 3$ | $6$ | 无 |\n| $4 \\sim 7$ | $10$ | 无 |\n| $8 \\sim 10$ | $3000$ | A |\n| $11 \\sim 14$ | $100$ | 无 |\n| $15 \\sim 18$ | $500$ | 无 |\n| $19 \\sim 20$ | $3000$ | 无 |\n\n特殊性质 A：保证树是一条链。", "locale": "zh-CN"}}}
{"pid": "P10065", "type": "P", "difficulty": 7, "samples": [["1\n5\n1 0\n1 1\n2 0\n2 1\n1 2 3 4 5\n0 1 0 1 2\n", "3 4 6 8 5\n"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["各省省选", "2024", "O2优化", "陕西"], "title": "[SNOI2024] 字符树", "background": "", "description": "给你一个 $n$ 个点的有根树，根为 $1$。每条边上有一个字符 $c = \\{0, 1\\}$。$S_u$ 表示从根到 $u$ 的路径上每条边的字符依次写下来组成的字符串。保证每个节点向儿子的边上的字符互不相同。\n\n对每个点 $u$，有一个价值 $\\mathit{val}_u$ 和一个限制 $a_u$。对每个点 $u$，如果点 $v$ 满足 $S_u$ 是 $S_v$ 的后缀。那么我们认为 $v$ 是的 $u$ 扩展点。\n\nAlice 手里有一个字符串 $S$，初始令 $S = S_u$，现在他可以删掉若干末尾的字符，使得 $S$ 变成 $S'$。并将 $S'$ 告诉给 Bob。\n\nBob 获得了一个字符串 $S'$，他需要在 $S'$ 之后加入若干字符，并获得 $S''$。对于某个 $u$ 的扩展点 $v$，满足 $S'' = S_v$，并且 $\\lvert S' \\rvert \\ge a_v$，那么 Bob 就获得了 $\\mathit{val}_v$ 的收益，当然 Bob 只能进行一次这样的操作，所以他会选择符合条件的 $v$ 里，$\\mathit{val}_v$ 最大的那个。如果没有符合条件的 $v$，Bob 只能获得 $0$ 的收益。\n\n现在 Alice 想知道，对于删除 $0 \\sim \\lvert S \\rvert$ 个字符，总计 $\\lvert S \\rvert + 1$ 种删除方式里 Bob 能获得权值之和是多少？\n\n对于每个 $u$，你都需要回答 Alice 的询问。\n\n形式化地说：\n\n我们需要对每个点 $u$ 求出 $\\mathit{ans}_u = \\sum\\limits_{0 \\le i \\le \\lvert S_u \\rvert} \\max\\limits_{i \\ge a_v \\land S_u = S_v[\\lvert S_v \\rvert - \\lvert S_u \\rvert + 1, \\lvert S_v \\rvert] \\land S_u[1, i] = S_v[1, i]} \\mathit{val}_v$。\n\n特殊的，如果对于某个 $u$，不存在任何 $v$ 满足条件，那么 $\\max = 0$。\n\n其中 $S[l, r]$ 表示字符串 $S$ 的第 $l$ 到第 $r$ 个字符组成的字符串。特殊的，$S[x + 1, x]$ 表示空串。$\\lvert S \\rvert$ 表示字符串 $S$ 的长度，$\\land$ 表示且。", "inputFormat": "多组测试数据，第一行一个整数 $T$ 表示数据组数。  \n对于每组测试数据，第一行一个正整数 $n$，表示节点个数。  \n接下来 $n - 1$ 行，每行两个整数 $\\mathit{fa}_i, c_i$ 表示第 $i$ 个点的父亲编号，以及边上的字符。  \n接下来一行 $n$ 个正整数 $\\mathit{val}_1, \\mathit{val}_2, \\ldots, \\mathit{val}_n$。  \n接下来一行 $n$ 个非负整数 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "输出一行 $n$ 个整数 $\\mathit{ans}_1, \\mathit{ans}_2, \\ldots, \\mathit{ans}_n$。", "hint": "**【样例 \\#1 解释】**\n\n以下表格表示当 $u, i$ 固定时，式子中 $\\mathit{val}_v$ 的最大值。\n\n| | $u = 1$ | $u = 2$ | $u = 3$ | $u = 4$ | $u = 5$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $i = 0$ | $3$ | $0$ | $3$ | $0$ | $0$ |\n| $i = 1$ | - | $4$ | $3$ | $4$ | $0$ |\n| $i = 2$ | - | - | - | $4$ | $5$ |\n\n---\n\n**【样例 \\#2】**\n\n见附件中 `tree/tree2.in` 与 `tree/tree2.ans`。\n\n这个样例满足测试点 $3 \\sim 5$ 的条件限制。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `tree/tree3.in` 与 `tree/tree3.ans`。\n\n这个样例满足测试点 $9 \\sim 10$ 的条件限制。\n\n---\n\n**【样例 \\#4】**\n\n见附件中 `tree/tree4.in` 与 `tree/tree4.ans`。\n\n这个样例满足测试点 $11 \\sim 12$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有数据保证 $1 \\le T \\le 5$，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le \\mathit{val}_i \\le {10}^9$，$1 \\le \\mathit{fa}_i < i$，$c_i = \\{0, 1\\}$，$0 \\le a_i \\le n$。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $100$ | 无 |\n| $3 \\sim 5$ | $2 \\times {10}^3$ | 无 |\n| $6 \\sim 8$ | ${10}^4$ | 无 |\n| $9 \\sim 10$ | ${10}^5$ | A |\n| $11 \\sim 12$ | ${10}^5$ | B |\n| $13 \\sim 16$ | ${10}^5$ | 无 |\n| $17 \\sim 20$ | $5 \\times {10}^5$ | 无 |\n\n特殊性质 A：$c_i = 0$。  \n特殊性质 B：$\\mathit{fa}_i = \\lfloor \\frac{i}{2} \\rfloor$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SNOI2024] 字符树", "background": "", "description": "给你一个 $n$ 个点的有根树，根为 $1$。每条边上有一个字符 $c = \\{0, 1\\}$。$S_u$ 表示从根到 $u$ 的路径上每条边的字符依次写下来组成的字符串。保证每个节点向儿子的边上的字符互不相同。\n\n对每个点 $u$，有一个价值 $\\mathit{val}_u$ 和一个限制 $a_u$。对每个点 $u$，如果点 $v$ 满足 $S_u$ 是 $S_v$ 的后缀。那么我们认为 $v$ 是的 $u$ 扩展点。\n\nAlice 手里有一个字符串 $S$，初始令 $S = S_u$，现在他可以删掉若干末尾的字符，使得 $S$ 变成 $S'$。并将 $S'$ 告诉给 Bob。\n\nBob 获得了一个字符串 $S'$，他需要在 $S'$ 之后加入若干字符，并获得 $S''$。对于某个 $u$ 的扩展点 $v$，满足 $S'' = S_v$，并且 $\\lvert S' \\rvert \\ge a_v$，那么 Bob 就获得了 $\\mathit{val}_v$ 的收益，当然 Bob 只能进行一次这样的操作，所以他会选择符合条件的 $v$ 里，$\\mathit{val}_v$ 最大的那个。如果没有符合条件的 $v$，Bob 只能获得 $0$ 的收益。\n\n现在 Alice 想知道，对于删除 $0 \\sim \\lvert S \\rvert$ 个字符，总计 $\\lvert S \\rvert + 1$ 种删除方式里 Bob 能获得权值之和是多少？\n\n对于每个 $u$，你都需要回答 Alice 的询问。\n\n形式化地说：\n\n我们需要对每个点 $u$ 求出 $\\mathit{ans}_u = \\sum\\limits_{0 \\le i \\le \\lvert S_u \\rvert} \\max\\limits_{i \\ge a_v \\land S_u = S_v[\\lvert S_v \\rvert - \\lvert S_u \\rvert + 1, \\lvert S_v \\rvert] \\land S_u[1, i] = S_v[1, i]} \\mathit{val}_v$。\n\n特殊的，如果对于某个 $u$，不存在任何 $v$ 满足条件，那么 $\\max = 0$。\n\n其中 $S[l, r]$ 表示字符串 $S$ 的第 $l$ 到第 $r$ 个字符组成的字符串。特殊的，$S[x + 1, x]$ 表示空串。$\\lvert S \\rvert$ 表示字符串 $S$ 的长度，$\\land$ 表示且。", "inputFormat": "多组测试数据，第一行一个整数 $T$ 表示数据组数。  \n对于每组测试数据，第一行一个正整数 $n$，表示节点个数。  \n接下来 $n - 1$ 行，每行两个整数 $\\mathit{fa}_i, c_i$ 表示第 $i$ 个点的父亲编号，以及边上的字符。  \n接下来一行 $n$ 个正整数 $\\mathit{val}_1, \\mathit{val}_2, \\ldots, \\mathit{val}_n$。  \n接下来一行 $n$ 个非负整数 $a_1, a_2, \\ldots, a_n$。", "outputFormat": "输出一行 $n$ 个整数 $\\mathit{ans}_1, \\mathit{ans}_2, \\ldots, \\mathit{ans}_n$。", "hint": "**【样例 \\#1 解释】**\n\n以下表格表示当 $u, i$ 固定时，式子中 $\\mathit{val}_v$ 的最大值。\n\n| | $u = 1$ | $u = 2$ | $u = 3$ | $u = 4$ | $u = 5$ |\n|:-:|:-:|:-:|:-:|:-:|:-:|\n| $i = 0$ | $3$ | $0$ | $3$ | $0$ | $0$ |\n| $i = 1$ | - | $4$ | $3$ | $4$ | $0$ |\n| $i = 2$ | - | - | - | $4$ | $5$ |\n\n---\n\n**【样例 \\#2】**\n\n见附件中 `tree/tree2.in` 与 `tree/tree2.ans`。\n\n这个样例满足测试点 $3 \\sim 5$ 的条件限制。\n\n---\n\n**【样例 \\#3】**\n\n见附件中 `tree/tree3.in` 与 `tree/tree3.ans`。\n\n这个样例满足测试点 $9 \\sim 10$ 的条件限制。\n\n---\n\n**【样例 \\#4】**\n\n见附件中 `tree/tree4.in` 与 `tree/tree4.ans`。\n\n这个样例满足测试点 $11 \\sim 12$ 的条件限制。\n\n---\n\n**【数据范围】**\n\n对于所有数据保证 $1 \\le T \\le 5$，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le \\mathit{val}_i \\le {10}^9$，$1 \\le \\mathit{fa}_i < i$，$c_i = \\{0, 1\\}$，$0 \\le a_i \\le n$。\n\n具体如下：\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $100$ | 无 |\n| $3 \\sim 5$ | $2 \\times {10}^3$ | 无 |\n| $6 \\sim 8$ | ${10}^4$ | 无 |\n| $9 \\sim 10$ | ${10}^5$ | A |\n| $11 \\sim 12$ | ${10}^5$ | B |\n| $13 \\sim 16$ | ${10}^5$ | 无 |\n| $17 \\sim 20$ | $5 \\times {10}^5$ | 无 |\n\n特殊性质 A：$c_i = 0$。  \n特殊性质 B：$\\mathit{fa}_i = \\lfloor \\frac{i}{2} \\rfloor$。", "locale": "zh-CN"}}}
{"pid": "P10066", "type": "P", "difficulty": 5, "samples": [["7 4\n3 2 2 2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "CCO（加拿大）", "图论建模"], "title": "[CCO 2023] Binaria", "background": "", "description": "你被廉价通信组织（CCO）雇佣来研究一项突破性的通信技术：子消息和（SMS）。这个革命性的想法是这样的。\n\n给定一个长度为 $N$ 的二进制字符串和一个满足 $K \\leq N$ 的正整数 $K$，该字符串的 SMS 由 $N-K+1$ 个整数组成。序列中的第一个数是前 $K$ 位的和，第二个数是第 $2$ 位到第 $K+1$ 位的和，依此类推，最后一个数是第 $N-K+1$ 位到第 $N$ 位的和。\n\n例如，如果 $K=4$，那么二进制字符串 $110010$ 的 SMS 是 $2,2,1$。这是因为 $1+1+0+0=2,1+0+0+1=2$，以及 $0+0+1+0=1$。\n\n由于你是一个新手，你的工作不是从给定的 SMS 中找到原始的二进制字符串，而是找到可能形成这个 SMS 的二进制字符串的数量。", "inputFormat": "第一行包含两个用空格分隔的整数 $N$ 和 $K$。\n\n第二行包含 $N-K+1$ 个用空格分隔的整数，保证它至少是一个二进制字符串的 SMS。", "outputFormat": "输出 $T$ 对 $10^{6}+3$ 取模的结果，其中 $T$ 是等于与给定 SMS 对应的可能的二进制字符串的总数的正整数。", "hint": "长度为 $7$ 的可能的字符串有 $1011001$，$1101010$ 和 $1110011$。\n\n对于所有的数据，有 $1\\leq N\\leq 10^6$，$1 \\leq K \\leq N$。\n\n\n| 子任务编号 |\t分值\t| $N$ 的范围\t| $K$ 的范围 |\n| :-: |  :-: |  :-: |  :-: |\n|1\t|12\t|$1 \\leq N \\leq 10$|\t$K \\leq 3$|\n|2\t|12\t| $1 \\leq N \\leq 10$|无 |\n|3\t|16\t|$1 \\leq N \\leq 1000$\t|$K \\leq 10$|\n|4\t|16\t|$1 \\leq N \\leq 10^{6}$|\t$K \\leq 20$|\n|5\t|16\t| $1 \\leq N \\leq 10^{6}$| $K\\leq 3000$|\n|6\t|28\t|$1 \\leq N \\leq 10^{6}$|无|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2023] Binaria", "background": "", "description": "你被廉价通信组织（CCO）雇佣来研究一项突破性的通信技术：子消息和（SMS）。这个革命性的想法是这样的。\n\n给定一个长度为 $N$ 的二进制字符串和一个满足 $K \\leq N$ 的正整数 $K$，该字符串的 SMS 由 $N-K+1$ 个整数组成。序列中的第一个数是前 $K$ 位的和，第二个数是第 $2$ 位到第 $K+1$ 位的和，依此类推，最后一个数是第 $N-K+1$ 位到第 $N$ 位的和。\n\n例如，如果 $K=4$，那么二进制字符串 $110010$ 的 SMS 是 $2,2,1$。这是因为 $1+1+0+0=2,1+0+0+1=2$，以及 $0+0+1+0=1$。\n\n由于你是一个新手，你的工作不是从给定的 SMS 中找到原始的二进制字符串，而是找到可能形成这个 SMS 的二进制字符串的数量。", "inputFormat": "第一行包含两个用空格分隔的整数 $N$ 和 $K$。\n\n第二行包含 $N-K+1$ 个用空格分隔的整数，保证它至少是一个二进制字符串的 SMS。", "outputFormat": "输出 $T$ 对 $10^{6}+3$ 取模的结果，其中 $T$ 是等于与给定 SMS 对应的可能的二进制字符串的总数的正整数。", "hint": "长度为 $7$ 的可能的字符串有 $1011001$，$1101010$ 和 $1110011$。\n\n对于所有的数据，有 $1\\leq N\\leq 10^6$，$1 \\leq K \\leq N$。\n\n\n| 子任务编号 |\t分值\t| $N$ 的范围\t| $K$ 的范围 |\n| :-: |  :-: |  :-: |  :-: |\n|1\t|12\t|$1 \\leq N \\leq 10$|\t$K \\leq 3$|\n|2\t|12\t| $1 \\leq N \\leq 10$|无 |\n|3\t|16\t|$1 \\leq N \\leq 1000$\t|$K \\leq 10$|\n|4\t|16\t|$1 \\leq N \\leq 10^{6}$|\t$K \\leq 20$|\n|5\t|16\t| $1 \\leq N \\leq 10^{6}$| $K\\leq 3000$|\n|6\t|28\t|$1 \\leq N \\leq 10^{6}$|无|", "locale": "zh-CN"}}}
{"pid": "P10067", "type": "P", "difficulty": 5, "samples": [["8\n3 2 4 5 4 1 2 1", "14"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2023", "CCO（加拿大）"], "title": "[CCO 2023] Real Mountains", "background": "", "description": "在你的帮助下，Rebecca 的风景照现在登上了她的杂志的最新一期的封面。然而，似乎有些读者对这张照片还不满意。特别是，他们似乎认为照片中的山是假的！\n\n为了简单起见，我们可以把这张照片描述为一个由 $N$ 列像素组成的序列。在第 $i$ 列，从底部开始的前 $h_{i}$ 个像素是山。她的读者只有在照片中包含一个山峰时，才会相信这是一座真正的山。也就是说，如果存在某个下标 $p$，满足 $1 \\leq p \\leq N$，使得 $h_{1} \\leq h_{2} \\leq \\cdots \\leq h_{p} \\geq \\cdots \\geq h_{N-1} \\geq h_{N}$。\n\n幸运的是，Rebecca 还可以付钱给她的编辑修改照片并重新印刷杂志。不过，她的倒霉的是，编辑们对他们的工作有一个非常奇怪的定价方案。Rebecca 唯一能编辑照片的方法是给她的编辑发送包含三个整数 $(i, j, k)$ 的电子邮件，满足 $1 \\leq i<j<k \\leq N$ 且 $h_{i}>h_{j}<h_{k}$。编辑们会在第 $j$ 列添加一个额外的山的像素（即 $h_{j}$ 增加 $1$），费用是 $h_{i}+h_{j}+h_{k}$。注意 $h_{j}$ 的变化可能会影响未来编辑的费用。\n\n为了取悦她的读者，Rebecca 想要编辑照片，让他们相信这里有一座真正的山。你能告诉她需要花费的最小费用吗？", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个用空格分隔的整数，表示 $h_{1}, h_{2}, \\ldots, h_{N}$。", "outputFormat": "输出 $T$ 对 $10^{6}+3$ 取模的结果，其中 $T$ 是 Rebecca 为了取悦她的读者而需要花费的最小费用。", "hint": "Rebecca 可以发送两封电子邮件，第一封包含三个整数 $(2,6,7)$，第二封包含三个整数 $(1,2,5)$。第一封电子邮件花费 $5$，使 $h_{6}$ 增加 $1$，而第二封电子邮件花费 $9$，使 $h_{2}$ 增加 $1$。\n\n最终照片中的 $h_{i}$ 值将是 $[3,3,4,5,4,2,2,1]$。\n\n对于所有的数据，有 $3\\leq N \\leq 10^6$，$1 \\leq h_{i} \\leq 10^{9}$。\n\n| 子任务编号|\t分值\t|$N$ 的范围\t|$h_{i}$ 的范围和限制|\n| :-:| :-:| :-:| :-:|\n|1|\t12|\t$ N \\leq 5000$\t|$1 \\leq h_{i} \\leq 100, \\exists p \\in [1,N], h_{1} \\geq h_{2} \\geq \\cdots \\geq h_{p} \\leq \\cdots \\leq h_{N-1} \\leq h_{N}$|\n|2|\t12\t|\t$ N \\leq 5000$\t|$1 \\leq h_{i} \\leq 100$|\n|3|\t12\t|\t$ N \\leq 5000$\t|$1 \\leq h_{i} \\leq 10^{6}$|\n|4|\t12\t|\t$ N \\leq 5000$\t|$1 \\leq h_{i} \\leq 10^{9}$|\n|5|\t16\t|$N \\leq 10^{6}$|\t$1 \\leq h_{i} \\leq 100$|\n|6|\t20\t|$ N \\leq 10^{6}$|$1 \\leq h_{i} \\leq 10^{6}$|\n|7|\t16\t|$ N \\leq 10^{6}$|$1 \\leq h_{i} \\leq 10^{9}$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2023] Real Mountains", "background": "", "description": "在你的帮助下，Rebecca 的风景照现在登上了她的杂志的最新一期的封面。然而，似乎有些读者对这张照片还不满意。特别是，他们似乎认为照片中的山是假的！\n\n为了简单起见，我们可以把这张照片描述为一个由 $N$ 列像素组成的序列。在第 $i$ 列，从底部开始的前 $h_{i}$ 个像素是山。她的读者只有在照片中包含一个山峰时，才会相信这是一座真正的山。也就是说，如果存在某个下标 $p$，满足 $1 \\leq p \\leq N$，使得 $h_{1} \\leq h_{2} \\leq \\cdots \\leq h_{p} \\geq \\cdots \\geq h_{N-1} \\geq h_{N}$。\n\n幸运的是，Rebecca 还可以付钱给她的编辑修改照片并重新印刷杂志。不过，她的倒霉的是，编辑们对他们的工作有一个非常奇怪的定价方案。Rebecca 唯一能编辑照片的方法是给她的编辑发送包含三个整数 $(i, j, k)$ 的电子邮件，满足 $1 \\leq i<j<k \\leq N$ 且 $h_{i}>h_{j}<h_{k}$。编辑们会在第 $j$ 列添加一个额外的山的像素（即 $h_{j}$ 增加 $1$），费用是 $h_{i}+h_{j}+h_{k}$。注意 $h_{j}$ 的变化可能会影响未来编辑的费用。\n\n为了取悦她的读者，Rebecca 想要编辑照片，让他们相信这里有一座真正的山。你能告诉她需要花费的最小费用吗？", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个用空格分隔的整数，表示 $h_{1}, h_{2}, \\ldots, h_{N}$。", "outputFormat": "输出 $T$ 对 $10^{6}+3$ 取模的结果，其中 $T$ 是 Rebecca 为了取悦她的读者而需要花费的最小费用。", "hint": "Rebecca 可以发送两封电子邮件，第一封包含三个整数 $(2,6,7)$，第二封包含三个整数 $(1,2,5)$。第一封电子邮件花费 $5$，使 $h_{6}$ 增加 $1$，而第二封电子邮件花费 $9$，使 $h_{2}$ 增加 $1$。\n\n最终照片中的 $h_{i}$ 值将是 $[3,3,4,5,4,2,2,1]$。\n\n对于所有的数据，有 $3\\leq N \\leq 10^6$，$1 \\leq h_{i} \\leq 10^{9}$。\n\n| 子任务编号|\t分值\t|$N$ 的范围\t|$h_{i}$ 的范围和限制|\n| :-:| :-:| :-:| :-:|\n|1|\t12|\t$ N \\leq 5000$\t|$1 \\leq h_{i} \\leq 100, \\exists p \\in [1,N], h_{1} \\geq h_{2} \\geq \\cdots \\geq h_{p} \\leq \\cdots \\leq h_{N-1} \\leq h_{N}$|\n|2|\t12\t|\t$ N \\leq 5000$\t|$1 \\leq h_{i} \\leq 100$|\n|3|\t12\t|\t$ N \\leq 5000$\t|$1 \\leq h_{i} \\leq 10^{6}$|\n|4|\t12\t|\t$ N \\leq 5000$\t|$1 \\leq h_{i} \\leq 10^{9}$|\n|5|\t16\t|$N \\leq 10^{6}$|\t$1 \\leq h_{i} \\leq 100$|\n|6|\t20\t|$ N \\leq 10^{6}$|$1 \\leq h_{i} \\leq 10^{6}$|\n|7|\t16\t|$ N \\leq 10^{6}$|$1 \\leq h_{i} \\leq 10^{9}$|", "locale": "zh-CN"}}}
{"pid": "P10068", "type": "P", "difficulty": 7, "samples": [["6\n-2 7 -1 -8 2 8", "3"], ["4\n1 -1 1 -1", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "CCO（加拿大）"], "title": "[CCO 2023] Line Town", "background": "", "description": "线条小镇的 $N$ 个居民排成了一条线。最初，居民们从左到右沿着线的幸福值为 $h_{1}, h_{2}, \\ldots, h_{N}$。\n\n你是线条小镇的镇长，你正在实施你的名为「社区、糖果和组织」（CCO）的计划。因此，你拥有了交换居民位置的权力。在一次交换中，你可以让两个相邻的居民交换他们在线中的位置。但是，这次交换会导致两个居民的幸福值取反。\n\n你想要知道是否能进行一些交换，使得居民的幸福值从左到右按非递减的顺序排列。如果可能，需要的最少交换次数是多少。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个整数 $h_{1}, \\ldots, h_{N}$，表示从左到右的居民的幸福值。", "outputFormat": "输出一行一个整数，表示最少的交换次数，如果任务不可能完成输出 $-1$。", "hint": "**样例解释 1**\n\n可以进行 3 次交换，如下所示：\n\n- 交换第 2 和第 3 个居民，幸福值变成了 $[-2,1,-7,-8,2,8]$。\n- 交换第 4 和第 5 个居民，幸福值变成了 $[-2,1,-7,-2,8,8]$。\n- 交换第 3 和第 4 个居民，幸福值变成了 $[-2,1,2,7,8,8]$。\n\n居民们现在按照要求的幸福值非递减的顺序排列了。没有比 3 次更少的交换次数可以得到非递减的排列。\n\n**样例解释 2**\n\n没有一系列的交换可以使居民按照幸福值非递减的顺序排列。\n\n对于所有的数据，有 $1\\leq N\\leq 5\\times 10^5，-10^{9} \\leq h_{i} \\leq 10^{9}$。\n\n- 额外限制 A：对于所有的 $i$，$\\left|h_{i}\\right| = 1$。\n- 额外限制 B：对于所有的 $i$，$\\left|h_{i}\\right| \\leq 1$。\n- 额外限制 C：对于所有的 $i \\neq j$，$\\left|h_{i}\\right| \\neq\\left|h_{j}\\right|$。\n\n子任务编号|\t分值|\t$N$ 的范围\t|额外限制|\n|:-:|:-:|:-:|:-:|\n| 1\t|12|\t$1 \\leq N \\leq 2000$ |A|\n|2\t|12\t|$1 \\leq N \\leq 5\\times 10^5$|A|\n|3\t|12|\t$1 \\leq N \\leq 2000$|B\t|\n|4\t|16\t|$1 \\leq N \\leq 5\\times 10^5$|B|\n|5\t|16\t|$1 \\leq N \\leq 2000$|\tC|\n|6\t|12\t|$1 \\leq N \\leq 5\\times 10^5$|C |\n|7|8\t|$1 \\leq N \\leq 2000$ |\t|\n|8|12\t|$1 \\leq N \\leq 5\\times 10^5$ |\t|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2023] Line Town", "background": "", "description": "线条小镇的 $N$ 个居民排成了一条线。最初，居民们从左到右沿着线的幸福值为 $h_{1}, h_{2}, \\ldots, h_{N}$。\n\n你是线条小镇的镇长，你正在实施你的名为「社区、糖果和组织」（CCO）的计划。因此，你拥有了交换居民位置的权力。在一次交换中，你可以让两个相邻的居民交换他们在线中的位置。但是，这次交换会导致两个居民的幸福值取反。\n\n你想要知道是否能进行一些交换，使得居民的幸福值从左到右按非递减的顺序排列。如果可能，需要的最少交换次数是多少。", "inputFormat": "第一行包含一个整数 $N$。\n\n第二行包含 $N$ 个整数 $h_{1}, \\ldots, h_{N}$，表示从左到右的居民的幸福值。", "outputFormat": "输出一行一个整数，表示最少的交换次数，如果任务不可能完成输出 $-1$。", "hint": "**样例解释 1**\n\n可以进行 3 次交换，如下所示：\n\n- 交换第 2 和第 3 个居民，幸福值变成了 $[-2,1,-7,-8,2,8]$。\n- 交换第 4 和第 5 个居民，幸福值变成了 $[-2,1,-7,-2,8,8]$。\n- 交换第 3 和第 4 个居民，幸福值变成了 $[-2,1,2,7,8,8]$。\n\n居民们现在按照要求的幸福值非递减的顺序排列了。没有比 3 次更少的交换次数可以得到非递减的排列。\n\n**样例解释 2**\n\n没有一系列的交换可以使居民按照幸福值非递减的顺序排列。\n\n对于所有的数据，有 $1\\leq N\\leq 5\\times 10^5，-10^{9} \\leq h_{i} \\leq 10^{9}$。\n\n- 额外限制 A：对于所有的 $i$，$\\left|h_{i}\\right| = 1$。\n- 额外限制 B：对于所有的 $i$，$\\left|h_{i}\\right| \\leq 1$。\n- 额外限制 C：对于所有的 $i \\neq j$，$\\left|h_{i}\\right| \\neq\\left|h_{j}\\right|$。\n\n子任务编号|\t分值|\t$N$ 的范围\t|额外限制|\n|:-:|:-:|:-:|:-:|\n| 1\t|12|\t$1 \\leq N \\leq 2000$ |A|\n|2\t|12\t|$1 \\leq N \\leq 5\\times 10^5$|A|\n|3\t|12|\t$1 \\leq N \\leq 2000$|B\t|\n|4\t|16\t|$1 \\leq N \\leq 5\\times 10^5$|B|\n|5\t|16\t|$1 \\leq N \\leq 2000$|\tC|\n|6\t|12\t|$1 \\leq N \\leq 5\\times 10^5$|C |\n|7|8\t|$1 \\leq N \\leq 2000$ |\t|\n|8|12\t|$1 \\leq N \\leq 5\\times 10^5$ |\t|", "locale": "zh-CN"}}}
{"pid": "P10069", "type": "P", "difficulty": 5, "samples": [["100110\n10", "2"], ["000\n00", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2023", "CCO（加拿大）", "构造", "分类讨论"], "title": "[CCO 2023] Flip it and Stick it", "background": "", "description": "Finn 正在玩一款叫做「Flip it and Stick it」的游戏，简称为 FiSi。FiSi 是一款单人游戏，玩法是在两个由 0 和 1 组成的字符串 $S$ 和 $T$ 上进行操作。Finn 可以进行以下形式的操作：\n\n选择 $S$ 的一个子串并将其翻转，然后将字符串的各部分按照原来的顺序粘贴在一起，形成新的字符串 $S$。\n例如，Finn 可以取字符串 $S=101100$，取从第 2 位开始的子串 $011$（字符串的编号是从 $1$ 开始的），并在一次操作中创建字符串 $S=111000$。\n\n如果 $S$ 不包含 $T$ 作为子串，Finn 就赢得了游戏。你的任务是帮助 Finn 确定赢得游戏所需的最短操作序列的长度，或者告诉他游戏无法获胜。", "inputFormat": "第一行一个字符串 $S$。\n\n第二行一个字符串 $T$。", "outputFormat": "输出一行一个整数，表示如果能赢得游戏所需的最少操作次数，否则输出 $-1$。", "hint": "**样例解释 1**\n\nFinn 从字符串 $100110$ 开始。他无法通过一次操作后使得 $10$ 不为子串，但他可以在两次操作后做到。\n\n例如，他的第一次操作可以是翻转从第 4 位到第 6 位的子串（$110$），得到 $100011$。然后，他的第二次操作可以是翻转从第 1 位到第 4 位的子串（$1000$），得到 $000111$，它不包含 $10$ 作为子串。\n\n**样例解释 2**\n\n无论 Finn 进行多少次操作，字符串 $T$ 总会是 $S$ 的子串。\n\n对于所有的数据，有 $1 \\leq|S| \\leq 2\\times 10^5$，$1 \\leq|T| \\leq 3$。\n\n设 $|T|=l$。\n\n| 子任务编号 |\t分值\t| $l$ 的限制 |\n| :-:|:-:|:-:|\n|1|\t4|\t$l=1$|\n|2|\t12|\t$l=2, T_{1} \\neq T_{2}$|\n|3|\t16|\t$l=2$|\n|4|\t20|\t$l=3, T_{1} \\neq T_{3}$|\n|5|\t20|\t$l=3,T_{1} \\neq T_{2}$|\n|6|\t28|\t$l=3$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2023] Flip it and Stick it", "background": "", "description": "Finn 正在玩一款叫做「Flip it and Stick it」的游戏，简称为 FiSi。FiSi 是一款单人游戏，玩法是在两个由 0 和 1 组成的字符串 $S$ 和 $T$ 上进行操作。Finn 可以进行以下形式的操作：\n\n选择 $S$ 的一个子串并将其翻转，然后将字符串的各部分按照原来的顺序粘贴在一起，形成新的字符串 $S$。\n例如，Finn 可以取字符串 $S=101100$，取从第 2 位开始的子串 $011$（字符串的编号是从 $1$ 开始的），并在一次操作中创建字符串 $S=111000$。\n\n如果 $S$ 不包含 $T$ 作为子串，Finn 就赢得了游戏。你的任务是帮助 Finn 确定赢得游戏所需的最短操作序列的长度，或者告诉他游戏无法获胜。", "inputFormat": "第一行一个字符串 $S$。\n\n第二行一个字符串 $T$。", "outputFormat": "输出一行一个整数，表示如果能赢得游戏所需的最少操作次数，否则输出 $-1$。", "hint": "**样例解释 1**\n\nFinn 从字符串 $100110$ 开始。他无法通过一次操作后使得 $10$ 不为子串，但他可以在两次操作后做到。\n\n例如，他的第一次操作可以是翻转从第 4 位到第 6 位的子串（$110$），得到 $100011$。然后，他的第二次操作可以是翻转从第 1 位到第 4 位的子串（$1000$），得到 $000111$，它不包含 $10$ 作为子串。\n\n**样例解释 2**\n\n无论 Finn 进行多少次操作，字符串 $T$ 总会是 $S$ 的子串。\n\n对于所有的数据，有 $1 \\leq|S| \\leq 2\\times 10^5$，$1 \\leq|T| \\leq 3$。\n\n设 $|T|=l$。\n\n| 子任务编号 |\t分值\t| $l$ 的限制 |\n| :-:|:-:|:-:|\n|1|\t4|\t$l=1$|\n|2|\t12|\t$l=2, T_{1} \\neq T_{2}$|\n|3|\t16|\t$l=2$|\n|4|\t20|\t$l=3, T_{1} \\neq T_{3}$|\n|5|\t20|\t$l=3,T_{1} \\neq T_{2}$|\n|6|\t28|\t$l=3$|", "locale": "zh-CN"}}}
{"pid": "P10070", "type": "P", "difficulty": 7, "samples": [["4 1\n1 2\n1 3\n2 4\n3 1 4 1", "7\n2\n1 3"], ["5 2\n1 2\n1 3\n2 4\n2 5\n3 1 4 1 5", "14\n5\n1 4 5 2 3"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "CCO（加拿大）"], "title": "[CCO 2023] Travelling Trader", "background": "", "description": "一个商人想要在城市之间做生意，把货物从一个城市运到另一个城市来获得利润。有 $N$ 个城市，用 $1, \\ldots, N$ 表示。有 $N-1$ 条道路，每条道路连接两个城市，每条道路需要一天的时间来穿越。使用这些道路，可以从任何一个城市到达另一个城市。\n\n如果商人当前在第 $i$ 个城市并选择做生意，那么商人可以获得 $p_{i}$ 的利润，但是对于每个城市这个利润只能获得一次。商人从第 $1$ 个城市开始做生意，沿着道路访问城市，以最大化他们的总利润。但是如果商人太久没有获得利润，商人的老板会变得不高兴。具体地说，一旦商人连续超过 K 天没有获得利润，老板就会解雇商人。注意：无论商人是否在其中一个城市做生意，商人在相邻的城市之间移动都需要一天的时间。你需要求出商人可以获得的最大利润和能够获得这个利润的路线。\n\n求出商人能得到的可能的最大总利润，并构造一种方案。", "inputFormat": "第一行包含两个用空格分隔的整数 $N$ 和 $K$。\n\n接下来的 $N-1$ 行，每行包含两个用空格分隔的整数 $u_{i}$ 和 $v_{i}$，表示一条道路。\n\n最后一行包含 $N$ 个整数 $p_{1}, \\ldots, p_{N}$，表示选择在相应的城市做生意所给的利润。", "outputFormat": "第一行输出一个整数，表示可能的最大总利润。\n\n第二行输出一个整数 $M\\ (1 \\leq M \\leq N)$，表示在最优路线上商人做生意的城市的数量。\n\n第三行，输出 $M$ 个用空格分隔的整数 $x_{1}, \\ldots, x_{M}$，表示商人按顺序在最优路线上做生意的城市，从 $x_1=1$ 开始。\n\n如果有多个正确方案，你可以输出任何一个。", "hint": "**样例解释 1**\n\n在第 $1$ 天，商人从第 $1$ 个城市开始做生意，获得 $3$ 的利润。\n\n在第 $2$ 天，商人移动到第 $3$ 个城市，并在那里做生意，获得 $4$ 的利润。\n\n在第 $3$ 天，商人无法在被解雇之前到达另一个他们没有做过生意的城市，所以他们的总利润是 $7$。\n\n**样例解释 2**\n\n商人按照 $1,2,4,2,5,2,1,3$ 的顺序访问它们，可以在每个城市获得利润。\n\n注意，商人为了确保他们不会超过 $2$ 天没有获得利润，推迟了在第 $2$ 个城市做生意的时间。\n\n对于所有数据，有 $2 \\leq N \\leq 2\\times 10^5，1\\leq K\\le 3，1 \\leq u_{i}, v_{i} \\leq N，u_{i} \\neq v_{i}，1 \\leq p_{i} \\leq 10^{9}$。\n\n|子任务编号\t|分值|\t$N$ 的范围\t|$K$ 的范围|\n|:-:|:-:|:-:|:-:|\n|1\t|8\t|$2 \\leq N \\leq 2\\times 10^5$|\t$K=1$|\n|2\t|28\t|$2 \\leq N \\leq 200$|\t$K=2$|\n|3\t|12\t|$2 \\leq N \\leq 2000$|$K=2$|\n|4\t|16\t|$2 \\leq N \\leq 2\\times 10^5$|$K=2$|\n|5\t|16\t|$2 \\leq N \\leq 2000$|\t$K=3$|\n|6 | 20 | $2 \\leq N \\leq 2\\times 10^5$|$K=3$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2023] Travelling Trader", "background": "", "description": "一个商人想要在城市之间做生意，把货物从一个城市运到另一个城市来获得利润。有 $N$ 个城市，用 $1, \\ldots, N$ 表示。有 $N-1$ 条道路，每条道路连接两个城市，每条道路需要一天的时间来穿越。使用这些道路，可以从任何一个城市到达另一个城市。\n\n如果商人当前在第 $i$ 个城市并选择做生意，那么商人可以获得 $p_{i}$ 的利润，但是对于每个城市这个利润只能获得一次。商人从第 $1$ 个城市开始做生意，沿着道路访问城市，以最大化他们的总利润。但是如果商人太久没有获得利润，商人的老板会变得不高兴。具体地说，一旦商人连续超过 K 天没有获得利润，老板就会解雇商人。注意：无论商人是否在其中一个城市做生意，商人在相邻的城市之间移动都需要一天的时间。你需要求出商人可以获得的最大利润和能够获得这个利润的路线。\n\n求出商人能得到的可能的最大总利润，并构造一种方案。", "inputFormat": "第一行包含两个用空格分隔的整数 $N$ 和 $K$。\n\n接下来的 $N-1$ 行，每行包含两个用空格分隔的整数 $u_{i}$ 和 $v_{i}$，表示一条道路。\n\n最后一行包含 $N$ 个整数 $p_{1}, \\ldots, p_{N}$，表示选择在相应的城市做生意所给的利润。", "outputFormat": "第一行输出一个整数，表示可能的最大总利润。\n\n第二行输出一个整数 $M\\ (1 \\leq M \\leq N)$，表示在最优路线上商人做生意的城市的数量。\n\n第三行，输出 $M$ 个用空格分隔的整数 $x_{1}, \\ldots, x_{M}$，表示商人按顺序在最优路线上做生意的城市，从 $x_1=1$ 开始。\n\n如果有多个正确方案，你可以输出任何一个。", "hint": "**样例解释 1**\n\n在第 $1$ 天，商人从第 $1$ 个城市开始做生意，获得 $3$ 的利润。\n\n在第 $2$ 天，商人移动到第 $3$ 个城市，并在那里做生意，获得 $4$ 的利润。\n\n在第 $3$ 天，商人无法在被解雇之前到达另一个他们没有做过生意的城市，所以他们的总利润是 $7$。\n\n**样例解释 2**\n\n商人按照 $1,2,4,2,5,2,1,3$ 的顺序访问它们，可以在每个城市获得利润。\n\n注意，商人为了确保他们不会超过 $2$ 天没有获得利润，推迟了在第 $2$ 个城市做生意的时间。\n\n对于所有数据，有 $2 \\leq N \\leq 2\\times 10^5，1\\leq K\\le 3，1 \\leq u_{i}, v_{i} \\leq N，u_{i} \\neq v_{i}，1 \\leq p_{i} \\leq 10^{9}$。\n\n|子任务编号\t|分值|\t$N$ 的范围\t|$K$ 的范围|\n|:-:|:-:|:-:|:-:|\n|1\t|8\t|$2 \\leq N \\leq 2\\times 10^5$|\t$K=1$|\n|2\t|28\t|$2 \\leq N \\leq 200$|\t$K=2$|\n|3\t|12\t|$2 \\leq N \\leq 2000$|$K=2$|\n|4\t|16\t|$2 \\leq N \\leq 2\\times 10^5$|$K=2$|\n|5\t|16\t|$2 \\leq N \\leq 2000$|\t$K=3$|\n|6 | 20 | $2 \\leq N \\leq 2\\times 10^5$|$K=3$|", "locale": "zh-CN"}}}
{"pid": "P10071", "type": "P", "difficulty": 6, "samples": [["4 3\n3 1 4 1\n3 -3\n1 6\n2 1", "1\n3\n4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "CCO（加拿大）"], "title": "[CCO 2023] Triangle Collection", "background": "", "description": "Alice 有一些棍子。一开始，对于每个 $l=1, \\ldots, N$，她有 $c_{l}$ 根长度为 $l$ 的棍子。\n\nAlice 想用她的棍子做一些等腰三角形。一个等腰三角形由两根长度为 $l$ 的棍子和一根长度在 $1$ 和 $2 l-1$ 之间的棍子组成。注意，三根棍子的长度必须严格满足三角形不等式，等边三角形也是满足条件的。每根棍子最多只能在一个三角形里使用一次。Alice 想知道用她的棍子最多能做出多少等腰三角形。\n\n有 $Q$ 个事件改变了她拥有的棍子的数量。第 $i$ 个事件包含两个整数 $l_{i}$ 和 $d_{i}$，表示长度为 $l_{i}$ 的棍子的数量变化了 $d_{i}$。注意，$d_{i}$ 可以任意整数，但是 Alice 永远不会有负数或者超过 $10^{9}$ 根长度为 $l$ 的棍子。\n\n你需要求出在每个事件之后，Alice 用她的棍子最多能做出多少等腰三角形。", "inputFormat": "第一行包含两个用空格分隔的整数 $N$ 和 $Q$。\n\n第二行包含 $N$ 个用空格分隔的整数 $c_{1}, c_{2}, \\ldots, c_{N}$，表示 Alice 的开始时拥有的棍子。\n\n接下来的 $Q$ 行，每行包含两个用空格分隔的整数 $l_{i}$ 和 $d_{i}$，表示一个事件。\n\n保证在每个事件之前和之后，对于每个 $l=1, \\ldots, N$，长度为 $l$ 的棍子的数量都在 $0$ 和 $10^{9}$ 之间。", "outputFormat": "输出 $Q$ 行，每行包含一个整数，表示每个事件之后的答案。", "hint": "在第一个事件之后，Alice 可以用长度为 $ (1,1,1)$ 的棍子做一个三角形。\n\n在第二个事件之后，Alice 可以用长度为 $(1,1,1)$ 的棍子做三个三角形。\n\n在第三个事件之后，Alice 可以用长度为 $(1,1,1)$ 的棍子做三个三角形，并用长度为 $(2,2,3)$ 的棍子做一个三角形。\n\n对于所有的数据，有 $1 \\leq N, Q \\leq 2\\times 10^5$，$0 \\leq c_{i} \\leq 10^{9}$，$1 \\leq l_{i} \\leq N$，$-10^{9} \\leq d_{i} \\leq 10^{9}$。\n\n|子任务编号|\t分值|\tN, Q 的范围|\t额外限制|\n| :-: | :-: |:-:|:-:|\n|1|\t20|\t$1 \\leq N, Q \\leq 2000$|\t在所有时刻，总共最多有 $2000$ 根棍子。|\n|2|\t20|\t$1 \\leq N, Q \\leq 2000$|没有额外的限制|\n|3|\t20|\t$1 \\leq N, Q \\leq 2\\times 10^5$|\t在所有时刻，每种长度的棍子的数量只会是 $1,2,3$ |\n|4|\t20|\t$1 \\leq N, Q \\leq 2\\times 10^5$| $d_{i}=1,-1$ |\n|5|\t20| $1 \\leq N, Q \\leq 2\\times 10^5$|没有额外的限制|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CCO 2023] Triangle Collection", "background": "", "description": "Alice 有一些棍子。一开始，对于每个 $l=1, \\ldots, N$，她有 $c_{l}$ 根长度为 $l$ 的棍子。\n\nAlice 想用她的棍子做一些等腰三角形。一个等腰三角形由两根长度为 $l$ 的棍子和一根长度在 $1$ 和 $2 l-1$ 之间的棍子组成。注意，三根棍子的长度必须严格满足三角形不等式，等边三角形也是满足条件的。每根棍子最多只能在一个三角形里使用一次。Alice 想知道用她的棍子最多能做出多少等腰三角形。\n\n有 $Q$ 个事件改变了她拥有的棍子的数量。第 $i$ 个事件包含两个整数 $l_{i}$ 和 $d_{i}$，表示长度为 $l_{i}$ 的棍子的数量变化了 $d_{i}$。注意，$d_{i}$ 可以任意整数，但是 Alice 永远不会有负数或者超过 $10^{9}$ 根长度为 $l$ 的棍子。\n\n你需要求出在每个事件之后，Alice 用她的棍子最多能做出多少等腰三角形。", "inputFormat": "第一行包含两个用空格分隔的整数 $N$ 和 $Q$。\n\n第二行包含 $N$ 个用空格分隔的整数 $c_{1}, c_{2}, \\ldots, c_{N}$，表示 Alice 的开始时拥有的棍子。\n\n接下来的 $Q$ 行，每行包含两个用空格分隔的整数 $l_{i}$ 和 $d_{i}$，表示一个事件。\n\n保证在每个事件之前和之后，对于每个 $l=1, \\ldots, N$，长度为 $l$ 的棍子的数量都在 $0$ 和 $10^{9}$ 之间。", "outputFormat": "输出 $Q$ 行，每行包含一个整数，表示每个事件之后的答案。", "hint": "在第一个事件之后，Alice 可以用长度为 $ (1,1,1)$ 的棍子做一个三角形。\n\n在第二个事件之后，Alice 可以用长度为 $(1,1,1)$ 的棍子做三个三角形。\n\n在第三个事件之后，Alice 可以用长度为 $(1,1,1)$ 的棍子做三个三角形，并用长度为 $(2,2,3)$ 的棍子做一个三角形。\n\n对于所有的数据，有 $1 \\leq N, Q \\leq 2\\times 10^5$，$0 \\leq c_{i} \\leq 10^{9}$，$1 \\leq l_{i} \\leq N$，$-10^{9} \\leq d_{i} \\leq 10^{9}$。\n\n|子任务编号|\t分值|\tN, Q 的范围|\t额外限制|\n| :-: | :-: |:-:|:-:|\n|1|\t20|\t$1 \\leq N, Q \\leq 2000$|\t在所有时刻，总共最多有 $2000$ 根棍子。|\n|2|\t20|\t$1 \\leq N, Q \\leq 2000$|没有额外的限制|\n|3|\t20|\t$1 \\leq N, Q \\leq 2\\times 10^5$|\t在所有时刻，每种长度的棍子的数量只会是 $1,2,3$ |\n|4|\t20|\t$1 \\leq N, Q \\leq 2\\times 10^5$| $d_{i}=1,-1$ |\n|5|\t20| $1 \\leq N, Q \\leq 2\\times 10^5$|没有额外的限制|", "locale": "zh-CN"}}}
{"pid": "P10072", "type": "P", "difficulty": 4, "samples": [["3 4\n2 4 4", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "O2优化"], "title": "[GDKOI2024 普及组] 刷野 I", "background": "", "description": "Zayin 是一个与怪物战斗的巫师，这次他将面临 $n$ 个站成一排的怪物，其中第 $i$ 个怪物的生命值是 $a_i$。\n\nZayin 率先使用一种攻击方式攻击，攻击过后所有血量小于等于 $0$ 的怪物死亡。在 Zayin 攻击一次后，所有存活的怪物对 Zayin 造成 $1$ 点伤害。以上步骤不断循环，直到 Zayin 击杀所有怪物为止。\n\nZayin 一共有三种攻击方式：\n\n- 普通攻击: 消耗 $0$ 点能量值，选择一只怪物并使其血量减少一点。\n\n- 天音波: 消耗 $1$ 点能量值，选择一只怪物并使其血量减少两点。\n\n- 天雷破: 消耗 $1$ 点能量值，使所有怪物血量减少一点。\n\n现在 Zayin 一共有 $m$ 点能量，现在他想知道在最优的策略下，击败 $n$ 只怪物所损失的最少血量。", "inputFormat": "输入的第一行包含两个正整数 $n, m(1 \\leq n, m \\leq 10^5)$，$n$ 表示怪物的个数，$m$ 表示 Zayin 拥有的能量值。\n\n输入的第二行包含 $n$ 个非负整数 $a_1, a_2, \\dots, a_n(1 \\leq a_i \\leq 10^9)$，$a_i$ 表示第 $i$ 只怪物的血量。", "outputFormat": "一行一个整数表示答案。", "hint": "对于 $30\\%$ 的数据，$1 \\leq n, m \\leq 5$。\n\n对于另外 $15\\%$ 的数据，$m = 0$。\n\n对于另外 $15\\%$ 的数据，所有 $a_i$ 全部相等。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$0 \\leq m \\leq 10^5$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 普及组] 刷野 I", "background": "", "description": "Zayin 是一个与怪物战斗的巫师，这次他将面临 $n$ 个站成一排的怪物，其中第 $i$ 个怪物的生命值是 $a_i$。\n\nZayin 率先使用一种攻击方式攻击，攻击过后所有血量小于等于 $0$ 的怪物死亡。在 Zayin 攻击一次后，所有存活的怪物对 Zayin 造成 $1$ 点伤害。以上步骤不断循环，直到 Zayin 击杀所有怪物为止。\n\nZayin 一共有三种攻击方式：\n\n- 普通攻击: 消耗 $0$ 点能量值，选择一只怪物并使其血量减少一点。\n\n- 天音波: 消耗 $1$ 点能量值，选择一只怪物并使其血量减少两点。\n\n- 天雷破: 消耗 $1$ 点能量值，使所有怪物血量减少一点。\n\n现在 Zayin 一共有 $m$ 点能量，现在他想知道在最优的策略下，击败 $n$ 只怪物所损失的最少血量。", "inputFormat": "输入的第一行包含两个正整数 $n, m(1 \\leq n, m \\leq 10^5)$，$n$ 表示怪物的个数，$m$ 表示 Zayin 拥有的能量值。\n\n输入的第二行包含 $n$ 个非负整数 $a_1, a_2, \\dots, a_n(1 \\leq a_i \\leq 10^9)$，$a_i$ 表示第 $i$ 只怪物的血量。", "outputFormat": "一行一个整数表示答案。", "hint": "对于 $30\\%$ 的数据，$1 \\leq n, m \\leq 5$。\n\n对于另外 $15\\%$ 的数据，$m = 0$。\n\n对于另外 $15\\%$ 的数据，所有 $a_i$ 全部相等。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$0 \\leq m \\leq 10^5$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10073", "type": "P", "difficulty": 3, "samples": [["1 10\n19 9 12 5 10 7 16 15 17 12", "25\n1 2 3 4 5 6 7 8 9 10"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "Special Judge", "O2优化"], "title": "[GDKOI2024 普及组] 刷野 II", "background": "", "description": "Zayin 是一个与怪物战斗的巫师，这次他将面临 $n$ 个站成一排的怪物，其中第 $i$ 个怪物的生命值是 $a_i$。\n\nZayin 知道许多被压制的咒语，在这场战斗中，他决定使用一个名为” 闪电连击” 的咒语来一口气击败所有的怪物。让我们看看这个咒语是如何工作的。\n\n- 首先，Zayin 选择一个怪物 $i(1 \\leq i \\leq n)$ 以及咒语的初始力量 $x$。\n- 然后这个咒语会首先击中怪物 $i$，随后对于除第一个目标怪物外，Zayin 可以选择一个没有被该咒语击中过，并且与其中一个已经被击中的怪物相邻的怪物。\n- 第一个被击中的目标怪物会受到 $x$ 的伤害，第二个目标怪物会受到 $x-1$ 的伤害，第三个受到 $x-2$ 的伤害，以此类推。不难看出，每个怪物都会被击中恰好一次。\n\n如果一个怪物受到的伤害不低于其生命值，则视为死亡。\n\nZayin 想展示他作为一个高级巫师的能力，所以他希望在只使用一次咒语就能杀死所有怪物的前提下，使用最少的初始力量 $x$。\n\n现在你需要求出所需的最少的初始力量，并给出一个方案。如果有多个不同的方案，只需要给出任意一个就可以了。", "inputFormat": "第一行包含两个整数 $d, n$，表示测试点编号和怪物数。\n\n接下来一行 $n$ 个整数，第 $i$ 个整数 $a_i$ 表示第 $i$ 个怪物的血量。", "outputFormat": "第一行输出一个整数 $x$，表示最少的初始力量。\n\n接下来第二行输出 $n$ 个用空格分割的下标 $monster_i(1 \\leq i \\leq n)$，其中 $monster_i$ 表示第 $i$ 个击中的目标怪物。", "hint": "对于所有测试数据，保证 $1 \\leq n \\leq 5 \\times 10^6$\n，$1 \\leq a_i \\leq 10^9$。\n\n| 测试点编号 | $n\\leq$ |\n| :----------: | :----------: |\n| $1$ | $10$ |\n| $2$ | $20$ |\n| $3$ | $500$ |\n| $4$ | $5000$ |\n| $5$ | $5\\times 10^4$ |\n| $6,7$ | $5\\times 10^5$ |\n| $8,9,10$ | $5\\times 10^6$ |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 普及组] 刷野 II", "background": "", "description": "Zayin 是一个与怪物战斗的巫师，这次他将面临 $n$ 个站成一排的怪物，其中第 $i$ 个怪物的生命值是 $a_i$。\n\nZayin 知道许多被压制的咒语，在这场战斗中，他决定使用一个名为” 闪电连击” 的咒语来一口气击败所有的怪物。让我们看看这个咒语是如何工作的。\n\n- 首先，Zayin 选择一个怪物 $i(1 \\leq i \\leq n)$ 以及咒语的初始力量 $x$。\n- 然后这个咒语会首先击中怪物 $i$，随后对于除第一个目标怪物外，Zayin 可以选择一个没有被该咒语击中过，并且与其中一个已经被击中的怪物相邻的怪物。\n- 第一个被击中的目标怪物会受到 $x$ 的伤害，第二个目标怪物会受到 $x-1$ 的伤害，第三个受到 $x-2$ 的伤害，以此类推。不难看出，每个怪物都会被击中恰好一次。\n\n如果一个怪物受到的伤害不低于其生命值，则视为死亡。\n\nZayin 想展示他作为一个高级巫师的能力，所以他希望在只使用一次咒语就能杀死所有怪物的前提下，使用最少的初始力量 $x$。\n\n现在你需要求出所需的最少的初始力量，并给出一个方案。如果有多个不同的方案，只需要给出任意一个就可以了。", "inputFormat": "第一行包含两个整数 $d, n$，表示测试点编号和怪物数。\n\n接下来一行 $n$ 个整数，第 $i$ 个整数 $a_i$ 表示第 $i$ 个怪物的血量。", "outputFormat": "第一行输出一个整数 $x$，表示最少的初始力量。\n\n接下来第二行输出 $n$ 个用空格分割的下标 $monster_i(1 \\leq i \\leq n)$，其中 $monster_i$ 表示第 $i$ 个击中的目标怪物。", "hint": "对于所有测试数据，保证 $1 \\leq n \\leq 5 \\times 10^6$\n，$1 \\leq a_i \\leq 10^9$。\n\n| 测试点编号 | $n\\leq$ |\n| :----------: | :----------: |\n| $1$ | $10$ |\n| $2$ | $20$ |\n| $3$ | $500$ |\n| $4$ | $5000$ |\n| $5$ | $5\\times 10^4$ |\n| $6,7$ | $5\\times 10^5$ |\n| $8,9,10$ | $5\\times 10^6$ |\n", "locale": "zh-CN"}}}
{"pid": "P10074", "type": "P", "difficulty": 6, "samples": [["2 1\n10 15", "15"], ["2 1\n10 30", "20"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "O2优化"], "title": "[GDKOI2024 普及组] 刷野 III", "background": "", "description": "Zayin 是一个与怪物战斗的巫师，这次他将面临 $n$ 个站成一排的怪物，其中第 $i$ 个怪物的生命值是 $a_i$。\n\n但是由于某种神秘原因，Zayin 并不能控制自己打到想打的怪物。具体来说, 存在一个长度为 $n$ 的排列 $p$，Zayin 每次攻击第 $i$ 只怪物时，实际上是在攻击第 $p_i$ 只怪物。\n\nZayin 每次可以选择一个 $[1, n]$ 的整数 $k$，让第 $p_k$ 只怪物的血量减少 $1$ 点，当某只怪物的血量小于等于 $0$ 时这只怪物死亡。\n\n然而 Zayin 并不知道这个排列 $p$ 具体是什么，也无法看到每个怪物剩余的具体血量，仅可以知道每次攻击完后怪物是否死亡。\n\n现在 Zayin 想知道，在他采取最优策略的情况下，最多需要攻击多少次，才可以杀死 $m$ 只怪物。", "inputFormat": "输入的第一行包含两个正整数 $n, m(1 \\leq m \\leq n \\leq 2000)$，$n$ 表示怪物的个数，$m$ 表示 Zayin 所需要击杀的怪物个数。\n\n输入的第二行包含 $n$ 个非负整数 $a_1, a_2, \\dots, a_n(1 \\leq a_i \\leq 10^9)$，$a_i$ 表示第 $i$ 只怪物的血量。", "outputFormat": "输出一个整数，最少的攻击次数。", "hint": "**【样例解释】**\n\n在第一个样例，Zayin 会一直攻击某一只怪物，直到怪物死亡。\n\n在第二个样例，Zayin 先攻击某一个怪物 $10$ 次，如果没有死亡，则说明攻击的是 $30$ 血的怪物。这时 Zayin 会选择攻击第二只怪物，攻击 $10$ 次后另一只怪物一定死亡，故最差需要 $20$ 次。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$1 \\leq n, m \\leq 5$。\n\n对于另外 $20\\%$ 的数据，所有 $a_i$ 全部相等。\n\n对于另外 $30\\%$ 的数据，$1 \\leq m \\leq n \\leq 500$。\n\n对于 $100\\%$ 的数据，$1 \\leq m \\leq n \\leq 2000$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 普及组] 刷野 III", "background": "", "description": "Zayin 是一个与怪物战斗的巫师，这次他将面临 $n$ 个站成一排的怪物，其中第 $i$ 个怪物的生命值是 $a_i$。\n\n但是由于某种神秘原因，Zayin 并不能控制自己打到想打的怪物。具体来说, 存在一个长度为 $n$ 的排列 $p$，Zayin 每次攻击第 $i$ 只怪物时，实际上是在攻击第 $p_i$ 只怪物。\n\nZayin 每次可以选择一个 $[1, n]$ 的整数 $k$，让第 $p_k$ 只怪物的血量减少 $1$ 点，当某只怪物的血量小于等于 $0$ 时这只怪物死亡。\n\n然而 Zayin 并不知道这个排列 $p$ 具体是什么，也无法看到每个怪物剩余的具体血量，仅可以知道每次攻击完后怪物是否死亡。\n\n现在 Zayin 想知道，在他采取最优策略的情况下，最多需要攻击多少次，才可以杀死 $m$ 只怪物。", "inputFormat": "输入的第一行包含两个正整数 $n, m(1 \\leq m \\leq n \\leq 2000)$，$n$ 表示怪物的个数，$m$ 表示 Zayin 所需要击杀的怪物个数。\n\n输入的第二行包含 $n$ 个非负整数 $a_1, a_2, \\dots, a_n(1 \\leq a_i \\leq 10^9)$，$a_i$ 表示第 $i$ 只怪物的血量。", "outputFormat": "输出一个整数，最少的攻击次数。", "hint": "**【样例解释】**\n\n在第一个样例，Zayin 会一直攻击某一只怪物，直到怪物死亡。\n\n在第二个样例，Zayin 先攻击某一个怪物 $10$ 次，如果没有死亡，则说明攻击的是 $30$ 血的怪物。这时 Zayin 会选择攻击第二只怪物，攻击 $10$ 次后另一只怪物一定死亡，故最差需要 $20$ 次。\n\n**【数据范围】**\n\n对于 $10\\%$ 的数据，$1 \\leq n, m \\leq 5$。\n\n对于另外 $20\\%$ 的数据，所有 $a_i$ 全部相等。\n\n对于另外 $30\\%$ 的数据，$1 \\leq m \\leq n \\leq 500$。\n\n对于 $100\\%$ 的数据，$1 \\leq m \\leq n \\leq 2000$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10075", "type": "P", "difficulty": 6, "samples": [["4 5\n1 2\n2 3\n3 4\n4 1\n2 4\n3\n1 5\n2 2 3\n2 1 2", "ymqOAO\nBob\nymqOAO"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "O2优化"], "title": "[GDKOI2024 普及组] 切割", "background": "", "description": "给定一张 $n$ 个点 $m$ 条边的无向连通图，**有**重边无自环。\n\nymqOAO 现在有 $k$ 个询问。每次询问如果删去图中的 $c_i$ 条边，剩下的图是否还是连通的。\n\n注意：询问之间是相互独立的，即一个询问的删边不会影响之后的询问。\n\n注解：\n- 连通图：一个图中任意两个顶点都有路径相连。", "inputFormat": "第一行输入三个整数 $n, m$。\n\n接下来 $m$ 行，每行包含两个正整数 $x_i, y_i$，表示第 $i$ 条边为 $x_i$ 与 $y_i$ 所连的边。\n\n接下来一行一个整数 $k$，表示询问的个数。\n\n接下来 $k$ 行，第 $i$ 行的第一个整数 $c_i$ 表示所切割的边的条数，接下来 $c_i(1 \\leq c_i \\leq 4)$ 个整数，表示所切割的边的编号，其中边的编号范围为 $[1, m]$。", "outputFormat": "对于每组询问，如果图不连通，则输出 `Bob`，否则输出 `ymqOAO`。（不包括引号）", "hint": "对于 $10\\%$ 的数据，$1 \\leq m, n, k \\leq 2000$。\n\n对于另外 $10\\%$ 的数据，$m = n-1$。\n\n对于另外 $10\\%$ 的数据，$c_i = 1$。\n\n对于 $60\\%$ 的数据，$1 \\leq m, n, k \\leq 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\leq m, n, k \\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 普及组] 切割", "background": "", "description": "给定一张 $n$ 个点 $m$ 条边的无向连通图，**有**重边无自环。\n\nymqOAO 现在有 $k$ 个询问。每次询问如果删去图中的 $c_i$ 条边，剩下的图是否还是连通的。\n\n注意：询问之间是相互独立的，即一个询问的删边不会影响之后的询问。\n\n注解：\n- 连通图：一个图中任意两个顶点都有路径相连。", "inputFormat": "第一行输入三个整数 $n, m$。\n\n接下来 $m$ 行，每行包含两个正整数 $x_i, y_i$，表示第 $i$ 条边为 $x_i$ 与 $y_i$ 所连的边。\n\n接下来一行一个整数 $k$，表示询问的个数。\n\n接下来 $k$ 行，第 $i$ 行的第一个整数 $c_i$ 表示所切割的边的条数，接下来 $c_i(1 \\leq c_i \\leq 4)$ 个整数，表示所切割的边的编号，其中边的编号范围为 $[1, m]$。", "outputFormat": "对于每组询问，如果图不连通，则输出 `Bob`，否则输出 `ymqOAO`。（不包括引号）", "hint": "对于 $10\\%$ 的数据，$1 \\leq m, n, k \\leq 2000$。\n\n对于另外 $10\\%$ 的数据，$m = n-1$。\n\n对于另外 $10\\%$ 的数据，$c_i = 1$。\n\n对于 $60\\%$ 的数据，$1 \\leq m, n, k \\leq 10^5$。\n\n对于 $100\\%$ 的数据，$1 \\leq m, n, k \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10076", "type": "P", "difficulty": 3, "samples": [["1 2\n6 5\n2 3\n2 6\n2 1\n4 3\n5 1\n5 4 1 2\n6 4 4 3\n1 4 5 4\n5 2 1 4\n2 5 1 5\n4 5\n1 4\n3 4\n2 4\n4 2 2 3\n4 3 2 2\n4 3 3 3\n1 2 1 1\n1 2 1 2", "Ziyin\nZayin\nZayin\nZiyin\nZiyin\nZayin\nZayin\nZayin\nDraw\nZiyin"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "O2优化"], "title": "[GDKOI2024 普及组] 捉迷藏", "background": "", "description": "Zayin 和 Ziyin 正在玩有趣的捉迷藏游戏。\n\n该游戏在一颗具有 $n$ 个节点（编号从 $1$ 到 $n$）的树上进行。\n\n在游戏的开始，Zayin 在节点 $a$，而 Ziyin 在节点 $b$。他们轮流操作，Zayin 先移动。在每次移动中，Zayin\n能移动到距离当前所在点不超过 $da$ 的节点上，而 Ziyin 能移动到距离当前所在点不超过 $db$ 的节点上（注意\n可以保持在当前点不动）。\n\n当某次移动后，其中一人抓住了另外一人，即移动到了另外一人的节点上，则游戏结束，被抓住的人输掉游戏。\n\n当 Zayin 和 Ziyin 都按最优策略移动的话，谁会是最后赢家呢。\n\n注解：\n- 一颗具有 $n$ 个节点的树是指一个具有 $n$ 个节点，$n - 1$ 条边的连通无向图。\n- 树上两个节点的距离定义为连接该两点的最短路径所包含的边数。", "inputFormat": "每个测试点包含多个测试用例。\n\n第一行包含两个整数 $d, t$，表示测试点编号，和测试用例的数量。每个测试用例的描述如下。\n\n第一行包含两个整数 $n, q$ —— 分别为顶点数、询问数。\n\n接下来 $n-1$ 行每行包含两个整数 $u, v (1 \\leq u, v \\leq n, u \\neq v)$，表示顶点 $u$ 和 $v$ 之间具有一条直接相连的边，保证这些边形成一棵树。\n\n接下来 $q$ 行每行包含四个整数 $a, b, da, db(1 \\leq a, b, da, db \\leq n)$ 作为一次游戏，分别表示 Zayin 初始节点、Ziyin 初始节点、Zayin 最大移动距离、Ziyin 最大移动距离。", "outputFormat": "对于每个测试用例的每次游戏，输出一行 `Zayin` 或 `Ziyin` 表示最后赢家，特别地如果在 $10^{10^5}$ 轮内游\n戏没有仍结束，则输出 `Draw` 表示平局。\n", "hint": "保证所有测试用例的 $n$ 之和不超过 $10^6$，$q$ 之和不超过 $10^6$。\n\n| 数据点编号 | $\\sum n \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | 无 |\n| $2$ | $100$ | $q=1$ |\n| $3$ | $100$ | 无 |\n| $4$ | $10^4$ | $q=1$ |\n| $5$ | $10^4$ | 无 |\n| $6$ | $10^6$ | $q=1$ |\n| $7,8,9,10$ | $10^6$ | 无 |\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 普及组] 捉迷藏", "background": "", "description": "Zayin 和 Ziyin 正在玩有趣的捉迷藏游戏。\n\n该游戏在一颗具有 $n$ 个节点（编号从 $1$ 到 $n$）的树上进行。\n\n在游戏的开始，Zayin 在节点 $a$，而 Ziyin 在节点 $b$。他们轮流操作，Zayin 先移动。在每次移动中，Zayin\n能移动到距离当前所在点不超过 $da$ 的节点上，而 Ziyin 能移动到距离当前所在点不超过 $db$ 的节点上（注意\n可以保持在当前点不动）。\n\n当某次移动后，其中一人抓住了另外一人，即移动到了另外一人的节点上，则游戏结束，被抓住的人输掉游戏。\n\n当 Zayin 和 Ziyin 都按最优策略移动的话，谁会是最后赢家呢。\n\n注解：\n- 一颗具有 $n$ 个节点的树是指一个具有 $n$ 个节点，$n - 1$ 条边的连通无向图。\n- 树上两个节点的距离定义为连接该两点的最短路径所包含的边数。", "inputFormat": "每个测试点包含多个测试用例。\n\n第一行包含两个整数 $d, t$，表示测试点编号，和测试用例的数量。每个测试用例的描述如下。\n\n第一行包含两个整数 $n, q$ —— 分别为顶点数、询问数。\n\n接下来 $n-1$ 行每行包含两个整数 $u, v (1 \\leq u, v \\leq n, u \\neq v)$，表示顶点 $u$ 和 $v$ 之间具有一条直接相连的边，保证这些边形成一棵树。\n\n接下来 $q$ 行每行包含四个整数 $a, b, da, db(1 \\leq a, b, da, db \\leq n)$ 作为一次游戏，分别表示 Zayin 初始节点、Ziyin 初始节点、Zayin 最大移动距离、Ziyin 最大移动距离。", "outputFormat": "对于每个测试用例的每次游戏，输出一行 `Zayin` 或 `Ziyin` 表示最后赢家，特别地如果在 $10^{10^5}$ 轮内游\n戏没有仍结束，则输出 `Draw` 表示平局。\n", "hint": "保证所有测试用例的 $n$ 之和不超过 $10^6$，$q$ 之和不超过 $10^6$。\n\n| 数据点编号 | $\\sum n \\leq$ | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | 无 |\n| $2$ | $100$ | $q=1$ |\n| $3$ | $100$ | 无 |\n| $4$ | $10^4$ | $q=1$ |\n| $5$ | $10^4$ | 无 |\n| $6$ | $10^6$ | $q=1$ |\n| $7,8,9,10$ | $10^6$ | 无 |\n", "locale": "zh-CN"}}}
{"pid": "P10077", "type": "P", "difficulty": 4, "samples": [["1 10\n3 4 0 6 1 1 0 8 6 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "O2优化"], "title": "[GDKOI2024 普及组] 读书", "background": "", "description": "Zayin 是一个热爱读书的学生。\n\n最近，Zayin 收到了一本有 $n$ 个章节的书，其中每个章节 $i$ 都有一个限制：她必须至少阅读了其他 $a_i$ 个\n章节，才能够获取足够的智慧来读懂该章节。\n\n每天，Zayin 都会从头到尾开始阅读这本书。对于她还不能读懂的章节（由于限制）或是已经阅读过的章节，Zayin 会在那天跳过它们。\n\n现在，Zayin 想要知道至少需要多少天才能阅读完所有的 $n$ 个章节。", "inputFormat": "第一行包含两个整数 $d, n$，表示测试点编号和章节数。\n\n第二行包含 $n$ 个整数 $a_i (0 \\leq a_i < n)$，表示限制。", "outputFormat": "输出一行包含一个整数，表示最少需要的天数。\n\n如果 Zayin 无法阅读完所有的 $n$ 个章节，输出 $-1$。", "hint": "**本题使用子任务捆绑测试。**\n\n对于所有测试数据，保证 $1 \\leq n \\leq 5 \\times 10^5\n, 0 \\leq a_i < n$。\n\n- Subtask 1（10%）：$1 ≤ n ≤ 10$，$d = 1$。\n- Subtask 2（10%）：$1 ≤ n ≤ 500$，$d = 2$。\n- Subtask 3（20%）：$1 ≤ n ≤ 5000$，$3 \\leq d \\leq 4$。\n- Subtask 4（20%）：$1 ≤ n ≤ 10^5$，$5 \\leq d \\leq 6$。\n- Subtask 5（40%）：$1 ≤ n ≤ 5 \\times 10^5$，$7 \\leq d \\leq 10$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 普及组] 读书", "background": "", "description": "Zayin 是一个热爱读书的学生。\n\n最近，Zayin 收到了一本有 $n$ 个章节的书，其中每个章节 $i$ 都有一个限制：她必须至少阅读了其他 $a_i$ 个\n章节，才能够获取足够的智慧来读懂该章节。\n\n每天，Zayin 都会从头到尾开始阅读这本书。对于她还不能读懂的章节（由于限制）或是已经阅读过的章节，Zayin 会在那天跳过它们。\n\n现在，Zayin 想要知道至少需要多少天才能阅读完所有的 $n$ 个章节。", "inputFormat": "第一行包含两个整数 $d, n$，表示测试点编号和章节数。\n\n第二行包含 $n$ 个整数 $a_i (0 \\leq a_i < n)$，表示限制。", "outputFormat": "输出一行包含一个整数，表示最少需要的天数。\n\n如果 Zayin 无法阅读完所有的 $n$ 个章节，输出 $-1$。", "hint": "**本题使用子任务捆绑测试。**\n\n对于所有测试数据，保证 $1 \\leq n \\leq 5 \\times 10^5\n, 0 \\leq a_i < n$。\n\n- Subtask 1（10%）：$1 ≤ n ≤ 10$，$d = 1$。\n- Subtask 2（10%）：$1 ≤ n ≤ 500$，$d = 2$。\n- Subtask 3（20%）：$1 ≤ n ≤ 5000$，$3 \\leq d \\leq 4$。\n- Subtask 4（20%）：$1 ≤ n ≤ 10^5$，$5 \\leq d \\leq 6$。\n- Subtask 5（40%）：$1 ≤ n ≤ 5 \\times 10^5$，$7 \\leq d \\leq 10$。", "locale": "zh-CN"}}}
{"pid": "P10078", "type": "P", "difficulty": 5, "samples": [["5\n0 0\n2 0\n2 2\n0 2\n1 1", "11110"], ["3\n-2 0\n0 0\n2 0", "111"], ["7\n-7 -8\n5 -9\n1 -5\n9 -4\n-8 3\n-2 -3\n-4 -6", "1101110"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "O2优化"], "title": "[GDKOI2024 普及组] 正方形扩展", "background": "", "description": "现在，在笛卡尔坐标系（无限大二维平面）上有 $n$ 个种类互不相同的细菌，它们所在的坐标也互不相同。\n\n随着时间的增加，细菌们不断繁殖，以正方形的形状、用相同的正方形扩张速度，同时扩张自己的领地。\n\n具体来说对于任意时刻 $t$、平面上任意一点 $p$，假设该点 $p$ 上存在第 $i$ 种细菌，那么有以下两种情况：\n\n- 如果以点 $p$ 为中心的任意正方形都含有其他种类的细菌，则该点的细菌将不会扩张（可以称之为“接触抑制”）。\n\n- 如果存在一个以 $p$ 为中心的正方形不含有其他种类的细菌，则该点的细菌将会进行扩张。\n\n注意，扩展出去的同种细菌也具备一样的扩展能力。\n\n以下是一些简单的关于正方形扩展的例子：\n\n若初始时，平面只有唯一的一个细菌位于 $(0, 0)$，那么过一个单位时间后，这一类细菌将占领 $(1, 1) (1, -1) (-1, -1) (-1, 1)$ 围成的正方形。\n\n若初始时，平面有两个细菌分别位于 $(0, 0)$ 和 $(1, 0)$，那么最终 $(0.5, 0)$ 会成为他们领地的分界线，一开始位于 $(0, 0)$ 的细菌会占领 $(0.5, 0)$ 左侧的全部区域，位于 $(1, 0)$ 的细菌会占领 $(0.5, 0)$ 右侧的全部区域。\n\n现在询问对于第 $i$ 种细菌，询问其占领面积能否趋于无穷大。", "inputFormat": "第一行一个正整数 $n(1 \\leq n \\leq 10^6)$ 表示细菌母体的数量。\n\n接下来输入 $n$ 行，每行输入两个整数，表示点的坐标 $(x_i, y_i)$，即种类为 $i$ 的细菌母体的位置。", "outputFormat": "输出一个长度为 $n$ 的 $01$ 串，对于其中第 $i$ 个数字，$1$ 表示种类为 $i$ 的细菌的占领面积可以扩张到无穷大，$0$ 则表示最终面积有限。", "hint": "**【样例解释】**\n\n在第二个样例，点 $(0, 0)$ 最终拥有的领地是直线 $x = -1$ 与 $x = 1$ 夹的中间部分，面积趋于无穷大。\n\n**【数据范围】**\n\n对于 $25\\%$ 数据，$n \\leq 10^2$。\n\n对于 $50\\%$ 数据，$n \\leq 10^3$。\n\n对于 $75\\%$ 数据，$n \\leq 10^5$。\n\n对于 $100\\%$ 数据，$1\\leq n \\leq 10^6$，$-10^9 \\leq x_i, y_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 普及组] 正方形扩展", "background": "", "description": "现在，在笛卡尔坐标系（无限大二维平面）上有 $n$ 个种类互不相同的细菌，它们所在的坐标也互不相同。\n\n随着时间的增加，细菌们不断繁殖，以正方形的形状、用相同的正方形扩张速度，同时扩张自己的领地。\n\n具体来说对于任意时刻 $t$、平面上任意一点 $p$，假设该点 $p$ 上存在第 $i$ 种细菌，那么有以下两种情况：\n\n- 如果以点 $p$ 为中心的任意正方形都含有其他种类的细菌，则该点的细菌将不会扩张（可以称之为“接触抑制”）。\n\n- 如果存在一个以 $p$ 为中心的正方形不含有其他种类的细菌，则该点的细菌将会进行扩张。\n\n注意，扩展出去的同种细菌也具备一样的扩展能力。\n\n以下是一些简单的关于正方形扩展的例子：\n\n若初始时，平面只有唯一的一个细菌位于 $(0, 0)$，那么过一个单位时间后，这一类细菌将占领 $(1, 1) (1, -1) (-1, -1) (-1, 1)$ 围成的正方形。\n\n若初始时，平面有两个细菌分别位于 $(0, 0)$ 和 $(1, 0)$，那么最终 $(0.5, 0)$ 会成为他们领地的分界线，一开始位于 $(0, 0)$ 的细菌会占领 $(0.5, 0)$ 左侧的全部区域，位于 $(1, 0)$ 的细菌会占领 $(0.5, 0)$ 右侧的全部区域。\n\n现在询问对于第 $i$ 种细菌，询问其占领面积能否趋于无穷大。", "inputFormat": "第一行一个正整数 $n(1 \\leq n \\leq 10^6)$ 表示细菌母体的数量。\n\n接下来输入 $n$ 行，每行输入两个整数，表示点的坐标 $(x_i, y_i)$，即种类为 $i$ 的细菌母体的位置。", "outputFormat": "输出一个长度为 $n$ 的 $01$ 串，对于其中第 $i$ 个数字，$1$ 表示种类为 $i$ 的细菌的占领面积可以扩张到无穷大，$0$ 则表示最终面积有限。", "hint": "**【样例解释】**\n\n在第二个样例，点 $(0, 0)$ 最终拥有的领地是直线 $x = -1$ 与 $x = 1$ 夹的中间部分，面积趋于无穷大。\n\n**【数据范围】**\n\n对于 $25\\%$ 数据，$n \\leq 10^2$。\n\n对于 $50\\%$ 数据，$n \\leq 10^3$。\n\n对于 $75\\%$ 数据，$n \\leq 10^5$。\n\n对于 $100\\%$ 数据，$1\\leq n \\leq 10^6$，$-10^9 \\leq x_i, y_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10079", "type": "P", "difficulty": 6, "samples": [["2\n01\n1.2+2.1^3.2*4.2^(5.2*6.)2+7.", "243640717"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "O2优化"], "title": "[GDKOI2024 普及组] EX 中缀表达式", "background": "", "description": "Alice 最近学习了表达式，现在他想写一个属于自己的表达式计算器。\n\n规定：\n\n- 单个数字：由若干数字（至少一个）连续拼接，最后必须跟一个 `.` 字符（不含引号）。例如：`00123.` `0.` `789.` 都是合法的数字。\n- 单个操作符：由若干数字连续拼接，最后跟一个字符。\n- 操作符的字符：表示该操作符的操作。该字符必须是 `+`、`*`、`^` 之一，分别表示加法，乘法和乘方。特别约定 `0^0=1`。  \n例如：`000000789+`，`123^`，如果前面的数值合法，那么它们就都是合法的操作符。\n- 操作符的数字：表示该操作符的优先级，优先级的取值是 $[1, n]$ 之间的正整数，数字越大表示优先级越高。\n- 对于优先级相同的操作符，题目将给出一个长度为 $n$ 的 $01$ 串 $C$，用于说明对应优先级的操作符之间，是左结合还是右结合。  \n其中 $0$ 表示左结合，$1$ 表示右结合。  \n例如 $C=111011$，其中第 $4$ 个字符为 `0`，表示优先级为 $4$ 的操作符是左结合的。\n- 左结合：表示该运算符从左往右计算。下面给出左结合的例子：`1.4+2.4^3.4^4.` 等价于 `((1.4+2.)4^3.)4^4.`，其结果与 `((1+2)^3)^4` 相同\n- 右结合：表示该运算符从右往左运算。下面给出右结合的例子：`1.6+2.6^3.6^4.` 等价于 `1.6+(2.6^(3.6^4.))`，其结果与 `1+(2^(3^4))` 相同。\n- 中缀表达式：\n1. 单个数字是合法的中缀表达式。\n2. 若 A 是合法的中缀表达式，则 (A) 也是合法的中缀表达式。\n3. 若 A、B 均是合法的中缀表达式，c 是合法的单个操作符，则 AcB 也是合法的中缀表达式。\n4. 其余情况均不合法。\n\n现在给出一个长度为 $n$ 的 $01$ 串 $C$，用于说明，相同优先级的操作符之间，是左结合还是右结合。\n\n给出一个中缀表达式，判断该表达式是否合法，不合法则输出 `error`（不包括引号），合法则输出该表达式的值对 $998244353$ 取模的结果。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行一个长度为 $n$ 的 $01$ 串 $C$。\n\n第三行一个字符串 $S$，表示一个中缀表达式。\n\n保证表达式中不会存在空格。", "outputFormat": "若中缀表达式不合法则输出 `error`，否则输出该表达式的值对 $998244353$ 取模的结果。", "hint": "**【样例解释】**\n\n`243640717 = ((1+2)^(3*(4^((5*6)+7)))) mod 998244353`\n\n**【数据范围】**\n\n特殊性质 1：不会出现 ^ 字符。\n\n特殊性质 2：不会出现 + 和 * 字符。\n\n特殊性质 3：不会出现 ( 和 )。\n\n对于 $8\\%$ 的数据，$n = 1$，$1 \\leq |S| \\leq 100$，且满足特殊性质 $1$ 和特殊性质 $3$。\n\n对于另外 $8\\%$ 的数据，$n = 1$，$1 \\leq |S| \\leq 100$，且满足特殊性质 $1$。\n\n对于另外 $20\\%$ 的数据，$n = 1$，$1 \\leq |S| \\leq 100$，且满足特殊性质 $2$ 和特殊性质 $3$。\n\n对于另外 $24\\%$ 的数据，$n = 1$，$1 \\leq |S| \\leq 1000$,，且满足特殊性质 $2$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 9$，$1 \\leq |S| \\leq 10000$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 普及组] EX 中缀表达式", "background": "", "description": "Alice 最近学习了表达式，现在他想写一个属于自己的表达式计算器。\n\n规定：\n\n- 单个数字：由若干数字（至少一个）连续拼接，最后必须跟一个 `.` 字符（不含引号）。例如：`00123.` `0.` `789.` 都是合法的数字。\n- 单个操作符：由若干数字连续拼接，最后跟一个字符。\n- 操作符的字符：表示该操作符的操作。该字符必须是 `+`、`*`、`^` 之一，分别表示加法，乘法和乘方。特别约定 `0^0=1`。  \n例如：`000000789+`，`123^`，如果前面的数值合法，那么它们就都是合法的操作符。\n- 操作符的数字：表示该操作符的优先级，优先级的取值是 $[1, n]$ 之间的正整数，数字越大表示优先级越高。\n- 对于优先级相同的操作符，题目将给出一个长度为 $n$ 的 $01$ 串 $C$，用于说明对应优先级的操作符之间，是左结合还是右结合。  \n其中 $0$ 表示左结合，$1$ 表示右结合。  \n例如 $C=111011$，其中第 $4$ 个字符为 `0`，表示优先级为 $4$ 的操作符是左结合的。\n- 左结合：表示该运算符从左往右计算。下面给出左结合的例子：`1.4+2.4^3.4^4.` 等价于 `((1.4+2.)4^3.)4^4.`，其结果与 `((1+2)^3)^4` 相同\n- 右结合：表示该运算符从右往左运算。下面给出右结合的例子：`1.6+2.6^3.6^4.` 等价于 `1.6+(2.6^(3.6^4.))`，其结果与 `1+(2^(3^4))` 相同。\n- 中缀表达式：\n1. 单个数字是合法的中缀表达式。\n2. 若 A 是合法的中缀表达式，则 (A) 也是合法的中缀表达式。\n3. 若 A、B 均是合法的中缀表达式，c 是合法的单个操作符，则 AcB 也是合法的中缀表达式。\n4. 其余情况均不合法。\n\n现在给出一个长度为 $n$ 的 $01$ 串 $C$，用于说明，相同优先级的操作符之间，是左结合还是右结合。\n\n给出一个中缀表达式，判断该表达式是否合法，不合法则输出 `error`（不包括引号），合法则输出该表达式的值对 $998244353$ 取模的结果。", "inputFormat": "第一行一个正整数 $n$。\n\n第二行一个长度为 $n$ 的 $01$ 串 $C$。\n\n第三行一个字符串 $S$，表示一个中缀表达式。\n\n保证表达式中不会存在空格。", "outputFormat": "若中缀表达式不合法则输出 `error`，否则输出该表达式的值对 $998244353$ 取模的结果。", "hint": "**【样例解释】**\n\n`243640717 = ((1+2)^(3*(4^((5*6)+7)))) mod 998244353`\n\n**【数据范围】**\n\n特殊性质 1：不会出现 ^ 字符。\n\n特殊性质 2：不会出现 + 和 * 字符。\n\n特殊性质 3：不会出现 ( 和 )。\n\n对于 $8\\%$ 的数据，$n = 1$，$1 \\leq |S| \\leq 100$，且满足特殊性质 $1$ 和特殊性质 $3$。\n\n对于另外 $8\\%$ 的数据，$n = 1$，$1 \\leq |S| \\leq 100$，且满足特殊性质 $1$。\n\n对于另外 $20\\%$ 的数据，$n = 1$，$1 \\leq |S| \\leq 100$，且满足特殊性质 $2$ 和特殊性质 $3$。\n\n对于另外 $24\\%$ 的数据，$n = 1$，$1 \\leq |S| \\leq 1000$,，且满足特殊性质 $2$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 9$，$1 \\leq |S| \\leq 10000$。\n", "locale": "zh-CN"}}}
{"pid": "P10080", "type": "P", "difficulty": 6, "samples": [["2\n3 7\n3 6 1\n2 6 0\n2 5 1\n3 5 1\n1 6 1\n3 4 0\n1 5 1\n3 7\n1 6 1\n3 5 1\n2 5 1\n3 4 1\n1 5 0\n1 4 0\n2 6 0", "5 3 6\n-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "Special Judge", "O2优化", "广度优先搜索 BFS", "深度优先搜索 DFS", "二分图"], "title": "[GDKOI2024 提高组] 匹配", "background": "", "description": "给定一个 $2n$ 个点 $m$ 条边的二分图，左部点编号为 $1 \\sim n$，右部点编号为 $n + 1 \\sim 2n$。\n\n给定每条边为黑色或白色，你需要找到一个完美匹配，使得匹配里的黑色边数恰好为偶数。\n\n如果你对二分图的定义有疑问：\n\n- 二分图是一个无向图，点分为左右两部分，每部分各 $n$ 个点，每条边都连接两个属于不同部分的点。\n- 一个完美匹配是一个大小为 $n$ 的边的集合，使得每个点都恰好与集合里的一条边相连。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。每组数据的格式如下：\n\n第一行两个正整数 $n, m$，表示图的点数和边数。接下来 $m$ 行，每行三个整数 $u_i, v_i, c_i(1 \\leq u_i \\leq n, n+1 \\leq v_i \\leq 2n, 0 \\leq c_i \\leq 1)$，表示一条连接 $u_i$, $v_i$ 的边，颜色为 $c_i$。$c_i = 0$ 表示白色，$c_i = 1$ 表示黑色。", "outputFormat": "对于每组数据：如果无解，输出一行 $-1$。否则，输出一行 $n$ 个正整数，表示你找到的完美匹配里每条边的编号。边按照输入顺序编号为 $1 \\sim m$。", "hint": "**【样例解释】**\n\n在第一组数据中，一个合法的完美匹配是 $(1, 6),(2, 5),(3, 4)$，且里面有恰好两条黑色边。\n\n在第二组数据中，虽然存在完美匹配，但每个完美匹配都有奇数条黑色边。\n\n**【数据范围】**\n\n**本题使用子任务捆绑测试。**\n\n对于所有数据，保证 $1 \\leq T \\leq 250$，$2 \\leq n,\\sum n \\leq 500$，$1 \\leq m \\leq n^2$。保证图中不存在重边，即对于 $i \\neq j$ 有 $(u_i, v_i)\\neq (u_j , v_j)$。\n\n- Subtask 1（20%）：$n ≤ 8$，$T ≤ 10$。\n- Subtask 2（20%）：$n ≤ 18$，$T ≤ 10$。\n- Subtask 3（20%）：$c_i$ 在 $\\{0, 1\\}$ 里独立均匀随机。\n- Subtask 4（40%）：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 提高组] 匹配", "background": "", "description": "给定一个 $2n$ 个点 $m$ 条边的二分图，左部点编号为 $1 \\sim n$，右部点编号为 $n + 1 \\sim 2n$。\n\n给定每条边为黑色或白色，你需要找到一个完美匹配，使得匹配里的黑色边数恰好为偶数。\n\n如果你对二分图的定义有疑问：\n\n- 二分图是一个无向图，点分为左右两部分，每部分各 $n$ 个点，每条边都连接两个属于不同部分的点。\n- 一个完美匹配是一个大小为 $n$ 的边的集合，使得每个点都恰好与集合里的一条边相连。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。每组数据的格式如下：\n\n第一行两个正整数 $n, m$，表示图的点数和边数。接下来 $m$ 行，每行三个整数 $u_i, v_i, c_i(1 \\leq u_i \\leq n, n+1 \\leq v_i \\leq 2n, 0 \\leq c_i \\leq 1)$，表示一条连接 $u_i$, $v_i$ 的边，颜色为 $c_i$。$c_i = 0$ 表示白色，$c_i = 1$ 表示黑色。", "outputFormat": "对于每组数据：如果无解，输出一行 $-1$。否则，输出一行 $n$ 个正整数，表示你找到的完美匹配里每条边的编号。边按照输入顺序编号为 $1 \\sim m$。", "hint": "**【样例解释】**\n\n在第一组数据中，一个合法的完美匹配是 $(1, 6),(2, 5),(3, 4)$，且里面有恰好两条黑色边。\n\n在第二组数据中，虽然存在完美匹配，但每个完美匹配都有奇数条黑色边。\n\n**【数据范围】**\n\n**本题使用子任务捆绑测试。**\n\n对于所有数据，保证 $1 \\leq T \\leq 250$，$2 \\leq n,\\sum n \\leq 500$，$1 \\leq m \\leq n^2$。保证图中不存在重边，即对于 $i \\neq j$ 有 $(u_i, v_i)\\neq (u_j , v_j)$。\n\n- Subtask 1（20%）：$n ≤ 8$，$T ≤ 10$。\n- Subtask 2（20%）：$n ≤ 18$，$T ≤ 10$。\n- Subtask 3（20%）：$c_i$ 在 $\\{0, 1\\}$ 里独立均匀随机。\n- Subtask 4（40%）：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P10081", "type": "P", "difficulty": 7, "samples": [["10 5 4\n1 9 10 7\n1 7 10 9\n2 3 10\n1 10 10 1\n2 5 10\n2 5\n1 1\n3 4\n1 3", "64\n0\n0\n36"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "O2优化", "分块", "扫描线"], "title": "[GDKOI2024 提高组] 新本格魔法少女", "background": "", "description": "给定一个长度 $n$ 的整数序列 $a_1,\\dots, a_n$；\n\n给定一个由 $m$ 次操作构成的操作序列，操作从 $1$ 开始编号，到 $m$ 结束。操作序列中包含修改操作和求和操作，修改操作给定 $l, r, v$，将 $a_l, a_{l+1}, \\dots, a_r$ 修改为 $v$，求和操作给定 $l,r$ ，查询 $\\sum \\limits_{i=l}^r a_i$。\n\n共 $q$ 次查询，每次查询给出 $L,R$ ，询问将序列 $a$ 初始化为 $0$ 后，依次进行操作序列中的第 $L, L+1, \\dots , R$ 次操作，每次求和操作的答案之和。", "inputFormat": "第一行三个整数 $n, m, q$；\n\n接下来 $m$ 行，每行 $1, l, r, v$ 或 $2, l, r$ 表示一次操作；\n\n接下来 $q$ 行，每行两个整数 $L, R$ 表示一次查询。\n", "outputFormat": "共 $q$ 行，每行一个整数，依次表示每次查询的答案。", "hint": "对所有数据，满足 $1 \\leq l \\leq r \\leq n$，$1 \\leq v \\leq n$，$1 \\leq L \\leq R \\leq m$，$1 \\leq n, m, q \\leq 5 \\times 10^5$。\n\n对 $10\\%$ 的数据，$n, m, q \\leq 10^2$。\n\n对另外 $20\\%$ 的数据，$n, m, q \\leq 5 \\times 10^3$。\n\n对另外 $10\\%$ 的数据，每次操作都是求和操作。\n\n对另外 $20\\%$ 的数据，每次查询满足 $L = 1$。\n\n对另外 $20\\%$ 的数据，$n, m, q \\leq 2 \\times 10^5$。\n\n对于其余数据，无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 提高组] 新本格魔法少女", "background": "", "description": "给定一个长度 $n$ 的整数序列 $a_1,\\dots, a_n$；\n\n给定一个由 $m$ 次操作构成的操作序列，操作从 $1$ 开始编号，到 $m$ 结束。操作序列中包含修改操作和求和操作，修改操作给定 $l, r, v$，将 $a_l, a_{l+1}, \\dots, a_r$ 修改为 $v$，求和操作给定 $l,r$ ，查询 $\\sum \\limits_{i=l}^r a_i$。\n\n共 $q$ 次查询，每次查询给出 $L,R$ ，询问将序列 $a$ 初始化为 $0$ 后，依次进行操作序列中的第 $L, L+1, \\dots , R$ 次操作，每次求和操作的答案之和。", "inputFormat": "第一行三个整数 $n, m, q$；\n\n接下来 $m$ 行，每行 $1, l, r, v$ 或 $2, l, r$ 表示一次操作；\n\n接下来 $q$ 行，每行两个整数 $L, R$ 表示一次查询。\n", "outputFormat": "共 $q$ 行，每行一个整数，依次表示每次查询的答案。", "hint": "对所有数据，满足 $1 \\leq l \\leq r \\leq n$，$1 \\leq v \\leq n$，$1 \\leq L \\leq R \\leq m$，$1 \\leq n, m, q \\leq 5 \\times 10^5$。\n\n对 $10\\%$ 的数据，$n, m, q \\leq 10^2$。\n\n对另外 $20\\%$ 的数据，$n, m, q \\leq 5 \\times 10^3$。\n\n对另外 $10\\%$ 的数据，每次操作都是求和操作。\n\n对另外 $20\\%$ 的数据，每次查询满足 $L = 1$。\n\n对另外 $20\\%$ 的数据，$n, m, q \\leq 2 \\times 10^5$。\n\n对于其余数据，无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P10082", "type": "P", "difficulty": 7, "samples": [["3 1 1000000007", "6"], ["4 2 1000000007", "47"], ["20 24 1000000007", "901565358"], ["123 234 1000000009", "141754844"], ["1234 2345 1004535809", "576196526"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "O2优化"], "title": "[GDKOI2024 提高组] 鸡", "background": "", "description": "对于一个非负整数序列 $a$，定义它对应的独立集序列 $f(a)$：\n\n- 假设将 $a_i$ 改为 $0$，此时选出若干个两两不相邻的数使得它们的和最大，则 $f(a)_i$ 表示和的最大值。\n\n现在给定 $n, m$，求有多少个长度为 $b$ 的非负整数序列 $b$ 满足以下条件：\n\n- 存在至少一个长度为 $n$，值域为 $[0, m]$ 的非负整数序列 $a$ 使得 $f(a) = b$。\n\n答案对给定的质数 $\\textit{MOD}$ 取模。", "inputFormat": "共一行，三个数，表示 $n, m, \\textit{MOD}$。", "outputFormat": "共一行，一个数，表示答案。\n", "hint": "**本题使用子任务捆绑测试。**\n\n对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 3 \\times 10^3$，$n \\geq 2$，$10^9 < \\textit{MOD} < 1.01 \\times 10^9$，$\\textit{MOD}$ 为质数。\n\n- Subtask 1（10%）：$n, m \\leq 5$。\n- Subtask 2（15%）：$n \\leq 300$，$m = 1$。\n- Subtask 3（25%）：$n \\leq 300$，$m ≤ 5$。\n- Subtask 4（20%）：$n, m \\leq 50$。\n- Subtask 5（15%）：$n, m \\leq 300$。\n- Subtask 6（15%）：无特殊限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 提高组] 鸡", "background": "", "description": "对于一个非负整数序列 $a$，定义它对应的独立集序列 $f(a)$：\n\n- 假设将 $a_i$ 改为 $0$，此时选出若干个两两不相邻的数使得它们的和最大，则 $f(a)_i$ 表示和的最大值。\n\n现在给定 $n, m$，求有多少个长度为 $b$ 的非负整数序列 $b$ 满足以下条件：\n\n- 存在至少一个长度为 $n$，值域为 $[0, m]$ 的非负整数序列 $a$ 使得 $f(a) = b$。\n\n答案对给定的质数 $\\textit{MOD}$ 取模。", "inputFormat": "共一行，三个数，表示 $n, m, \\textit{MOD}$。", "outputFormat": "共一行，一个数，表示答案。\n", "hint": "**本题使用子任务捆绑测试。**\n\n对于 $100\\%$ 的数据，$1 \\leq n, m \\leq 3 \\times 10^3$，$n \\geq 2$，$10^9 < \\textit{MOD} < 1.01 \\times 10^9$，$\\textit{MOD}$ 为质数。\n\n- Subtask 1（10%）：$n, m \\leq 5$。\n- Subtask 2（15%）：$n \\leq 300$，$m = 1$。\n- Subtask 3（25%）：$n \\leq 300$，$m ≤ 5$。\n- Subtask 4（20%）：$n, m \\leq 50$。\n- Subtask 5（15%）：$n, m \\leq 300$。\n- Subtask 6（15%）：无特殊限制。\n", "locale": "zh-CN"}}}
{"pid": "P10083", "type": "P", "difficulty": 5, "samples": [["5 10\n9 10 10 0 2\n8 5 6 2 5", "4"], ["5 10\n8 1 6 4 10\n7 6 1 8 5", "5"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "O2优化"], "title": "[GDKOI2024 提高组] 不休陀螺", "background": "", "description": "有 $n$ 张牌组成一个序列，每张牌用一个二元组 $(a_i\n, b_i)$ 表示，意味着打出这张牌需要消耗 $a_i$ 点费用，打出后可以获得 $b_i$ 点费用。\n\n接下来你可以选择一个区间 $[l, r]$ 将这个区间中的卡取出来作为你的卡组。\n\n开始时你的卡组会按照随机顺序排列并且你有 $E$ 点费用，然后你会依次从前往后打出这个排列中的卡。\n\n当你打完这个排列中的卡后你的卡组又会重新随机排列然后你再依次打出，直到你无法再打出下一张牌（当前费用小于下一张牌需要消耗的费用）时停止。\n\n如果一个卡组无论在什么情况下都能够无限打下去，我们则称这卡组可以“陀螺无限”。\n\n现在求有多少个区间组成的卡组能够“陀螺无限”。", "inputFormat": "第一行输入两个非负整数 $n, E$ 分别表示卡牌序列长度和初始能量值 $E(1 \\leq n \\leq 10^6, 0 \\leq E \\leq 10^9)$。\n\n接下来一行 $n$ 个非负整数 $a_i(0 \\leq a_i \\leq 10^9)$ 表示每张卡牌打出需要消耗的能量。\n\n接下来一行 $n$ 个非负整数 $b_i(0 \\leq b_i \\leq 10^9)$ 表示每张卡牌打出后能获得的能量。", "outputFormat": "输出一行一个整数表示有多少个区间组成的卡组能够“陀螺无限”。", "hint": "**本题使用子任务捆绑测试。**\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$，$0 \\leq E, a_i, b_i \\leq 10^9$。\n\n- Subtask 1（20%）：$1 \\leq n \\leq 5000$。\n- Subtask 2（10%）：$b_i \\geq a_i$。\n- Subtask 3（10%）：$E = 0$。\n- Subtask 4（10%）：$0 \\leq a_i, b_i \\leq 1$。\n- Subtask 5（20%）：$a_i \\times b_i = 0$。\n- Subtask 6（30%）：无特殊限制", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 提高组] 不休陀螺", "background": "", "description": "有 $n$ 张牌组成一个序列，每张牌用一个二元组 $(a_i\n, b_i)$ 表示，意味着打出这张牌需要消耗 $a_i$ 点费用，打出后可以获得 $b_i$ 点费用。\n\n接下来你可以选择一个区间 $[l, r]$ 将这个区间中的卡取出来作为你的卡组。\n\n开始时你的卡组会按照随机顺序排列并且你有 $E$ 点费用，然后你会依次从前往后打出这个排列中的卡。\n\n当你打完这个排列中的卡后你的卡组又会重新随机排列然后你再依次打出，直到你无法再打出下一张牌（当前费用小于下一张牌需要消耗的费用）时停止。\n\n如果一个卡组无论在什么情况下都能够无限打下去，我们则称这卡组可以“陀螺无限”。\n\n现在求有多少个区间组成的卡组能够“陀螺无限”。", "inputFormat": "第一行输入两个非负整数 $n, E$ 分别表示卡牌序列长度和初始能量值 $E(1 \\leq n \\leq 10^6, 0 \\leq E \\leq 10^9)$。\n\n接下来一行 $n$ 个非负整数 $a_i(0 \\leq a_i \\leq 10^9)$ 表示每张卡牌打出需要消耗的能量。\n\n接下来一行 $n$ 个非负整数 $b_i(0 \\leq b_i \\leq 10^9)$ 表示每张卡牌打出后能获得的能量。", "outputFormat": "输出一行一个整数表示有多少个区间组成的卡组能够“陀螺无限”。", "hint": "**本题使用子任务捆绑测试。**\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^6$，$0 \\leq E, a_i, b_i \\leq 10^9$。\n\n- Subtask 1（20%）：$1 \\leq n \\leq 5000$。\n- Subtask 2（10%）：$b_i \\geq a_i$。\n- Subtask 3（10%）：$E = 0$。\n- Subtask 4（10%）：$0 \\leq a_i, b_i \\leq 1$。\n- Subtask 5（20%）：$a_i \\times b_i = 0$。\n- Subtask 6（30%）：无特殊限制", "locale": "zh-CN"}}}
{"pid": "P10084", "type": "P", "difficulty": 7, "samples": [["3\n5 0 0 2 1\n4 1 2 2 4\n8 3 2 4 6", "8\n1024\n527847872"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "O2优化"], "title": "[GDKOI2024 提高组] 计算", "background": "", "description": "定义 $F(x, a, b) = \\gcd(x^a - 1, x^b - 1) + 1, x > 0$。\n\n特别的，如果 $a = 0$ 或 $b = 0$，$F(x, a, b) = 0$。\n\n现在给出五个非负整数 $m, a, b, c, d$。\n\n令 $L = F(m, a, b) + 1$，$R = F(m, c, d)$。\n\n问集合 $\\{L, L + 1, L + 2, \\dots, R - 2, R - 1, R\\}$ 有多少个子集和是 $m$ 的倍数。\n\n由于答案可能很大，你只需要输出方案数对 $998244353$ 取模后的结果就可以了。\n\n**由于本题第三组数据有误，特别地，如果 $L > R$，输出 $1$ 即可。**", "inputFormat": "输入第一行为一个整数 $T$，表示数据组数。\n\n接下来一行 $T$ 行，每行五个非负整数 $m, a, b, c, d$。", "outputFormat": "对于每组数据，输出答案。", "hint": "**【样例解释】**\n\n经过计算可知 $L=1$，$R=5$，集合是 $1,2,3,4,5$，满足条件的子集和有以下 $8$ 个：\n\n$\\{\\}$，$\\{5\\}$，$\\{2, 3\\}$，$\\{1, 4\\}$，$\\{1, 2, 3, 4\\}$，$\\{2, 3, 5\\}$，$\\{1, 4, 5\\}$，$\\{1, 2, 3, 4, 5\\}$。\n\n**【数据范围】**\n\n::cute-table{tuack}\n\n| 测试点编号 | $m$ | $L,R$ | $a,b$ | $c,d$ | $T$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=2$ | $L=1,R=2$| $=0$ | $\\leq 10$ | $\\leq 5$ | 无 |\n| $2$ | $\\leq 10$ |$L=1,R=m$ | ^ | ^ | ^ | ^ |\n| $3$ | $\\leq 5$ | $\\leq 10^3$ | $\\le 10$ | ^ | ^ | $1$ |\n| $4\\sim 6$ | $\\leq 20$ | $\\leq 2\\times 10^3$ | ^ | ^ | ^ | 无 |\n| $7$ | ^ | $\\leq 10^5$ | $\\leq 10^2$ | $\\leq 10^2$ | ^ | $2$ |\n| $8,9$ | $\\leq 80$ | $\\leq 10^9$ | ^ | ^ | ^ | 无 |\n| $10\\sim 13$ | $\\leq 2\\times 10^3$ | $\\leq 10^{18}$ | $\\leq 10^3$ | $\\leq 10^3$ | ^ | ^ |\n| $14\\sim 17$ | $\\leq 10^5$ | ^ | ^ | ^ | ^ | ^ |\n| $18\\sim 20$ | $\\leq 10^7$ | ^ | ^ | ^ | $\\leq 10^4$ | ^ |\n\n- 特殊性质 1：$R - L + 1 \\leq 20$；\n- 特殊性质 2：$R - L + 1 \\leq 2000$；\n\n对于全部数据，保证 $L < R$，$m > 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 提高组] 计算", "background": "", "description": "定义 $F(x, a, b) = \\gcd(x^a - 1, x^b - 1) + 1, x > 0$。\n\n特别的，如果 $a = 0$ 或 $b = 0$，$F(x, a, b) = 0$。\n\n现在给出五个非负整数 $m, a, b, c, d$。\n\n令 $L = F(m, a, b) + 1$，$R = F(m, c, d)$。\n\n问集合 $\\{L, L + 1, L + 2, \\dots, R - 2, R - 1, R\\}$ 有多少个子集和是 $m$ 的倍数。\n\n由于答案可能很大，你只需要输出方案数对 $998244353$ 取模后的结果就可以了。\n\n**由于本题第三组数据有误，特别地，如果 $L > R$，输出 $1$ 即可。**", "inputFormat": "输入第一行为一个整数 $T$，表示数据组数。\n\n接下来一行 $T$ 行，每行五个非负整数 $m, a, b, c, d$。", "outputFormat": "对于每组数据，输出答案。", "hint": "**【样例解释】**\n\n经过计算可知 $L=1$，$R=5$，集合是 $1,2,3,4,5$，满足条件的子集和有以下 $8$ 个：\n\n$\\{\\}$，$\\{5\\}$，$\\{2, 3\\}$，$\\{1, 4\\}$，$\\{1, 2, 3, 4\\}$，$\\{2, 3, 5\\}$，$\\{1, 4, 5\\}$，$\\{1, 2, 3, 4, 5\\}$。\n\n**【数据范围】**\n\n::cute-table{tuack}\n\n| 测试点编号 | $m$ | $L,R$ | $a,b$ | $c,d$ | $T$ | 特殊性质 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| $1$ | $=2$ | $L=1,R=2$| $=0$ | $\\leq 10$ | $\\leq 5$ | 无 |\n| $2$ | $\\leq 10$ |$L=1,R=m$ | ^ | ^ | ^ | ^ |\n| $3$ | $\\leq 5$ | $\\leq 10^3$ | $\\le 10$ | ^ | ^ | $1$ |\n| $4\\sim 6$ | $\\leq 20$ | $\\leq 2\\times 10^3$ | ^ | ^ | ^ | 无 |\n| $7$ | ^ | $\\leq 10^5$ | $\\leq 10^2$ | $\\leq 10^2$ | ^ | $2$ |\n| $8,9$ | $\\leq 80$ | $\\leq 10^9$ | ^ | ^ | ^ | 无 |\n| $10\\sim 13$ | $\\leq 2\\times 10^3$ | $\\leq 10^{18}$ | $\\leq 10^3$ | $\\leq 10^3$ | ^ | ^ |\n| $14\\sim 17$ | $\\leq 10^5$ | ^ | ^ | ^ | ^ | ^ |\n| $18\\sim 20$ | $\\leq 10^7$ | ^ | ^ | ^ | $\\leq 10^4$ | ^ |\n\n- 特殊性质 1：$R - L + 1 \\leq 20$；\n- 特殊性质 2：$R - L + 1 \\leq 2000$；\n\n对于全部数据，保证 $L < R$，$m > 0$。", "locale": "zh-CN"}}}
{"pid": "P10085", "type": "P", "difficulty": 6, "samples": [["2\n0 0 1 1\n1 0 1 0\n0 0 0 0\n1 1 1 0", "7\n0 0\n1 0\n1 3\n2 1\n3 1\n3 2\n3 3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024", "广东", "Special Judge", "O2优化"], "title": "[GDKOI2024 提高组] 染色", "background": "", "description": "Alice 非常喜欢二进制，她认为事物只有和二进制有关才是美的。\n\n一天，她奇思妙想了一种图案，并打算在长宽都为 $2^n$ 的网格上画出她心中所想的图案。\n网格的格子只有黑色和白色两种，一开始都是白色。\n\n现在 Alice 规定一种绘画操作为：选定一个格子，使它自己和相邻上下左右的网格颜色反转，即原本黑色会变成白色，白色会变成黑色。\n\nAlice 还规定网格的第一行和最后一行相邻，第一列和最后一列也相邻。\n\n现在 Alice 希望你给出一个操作方案或告诉无解。如果有多个方案，输出任意一个即可。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一个 $2^n \\times 2^n$ 的矩阵，表示 Alice 所想的图案。其中 $0$ 表示白色，$1$ 表示黑色。", "outputFormat": "第一行一个数 $\\mathit{ans}$ 表示操作次数，或输出 $-1$ 表示无解。\n\n接下来 $\\mathit{ans}$ 行，每行一个坐标表示操作位置。其中每一维坐标范围均为 $[0, 2^n - 1]$。", "hint": "- 对于 $20\\%$ 的数据，$n = 2$。\n- 对于另外 $15\\%$ 的数据，$n = 4$。\n- 对于另外 $15\\%$ 的数据，$n = 7$。\n- 对于 $100\\%$ 的数据，$n \\leq 11$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2024 提高组] 染色", "background": "", "description": "Alice 非常喜欢二进制，她认为事物只有和二进制有关才是美的。\n\n一天，她奇思妙想了一种图案，并打算在长宽都为 $2^n$ 的网格上画出她心中所想的图案。\n网格的格子只有黑色和白色两种，一开始都是白色。\n\n现在 Alice 规定一种绘画操作为：选定一个格子，使它自己和相邻上下左右的网格颜色反转，即原本黑色会变成白色，白色会变成黑色。\n\nAlice 还规定网格的第一行和最后一行相邻，第一列和最后一列也相邻。\n\n现在 Alice 希望你给出一个操作方案或告诉无解。如果有多个方案，输出任意一个即可。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一个 $2^n \\times 2^n$ 的矩阵，表示 Alice 所想的图案。其中 $0$ 表示白色，$1$ 表示黑色。", "outputFormat": "第一行一个数 $\\mathit{ans}$ 表示操作次数，或输出 $-1$ 表示无解。\n\n接下来 $\\mathit{ans}$ 行，每行一个坐标表示操作位置。其中每一维坐标范围均为 $[0, 2^n - 1]$。", "hint": "- 对于 $20\\%$ 的数据，$n = 2$。\n- 对于另外 $15\\%$ 的数据，$n = 4$。\n- 对于另外 $15\\%$ 的数据，$n = 7$。\n- 对于 $100\\%$ 的数据，$n \\leq 11$。", "locale": "zh-CN"}}}
{"pid": "P10086", "type": "P", "difficulty": 3, "samples": [["6\n4 1 2 1 5 3\n5\n2 3\n1 3 10\n1 4 4\n2 1\n1 1 -10", "16\n23\n23\n23\n11"], ["3\n1000000000 1000000000 1000000000\n3\n1 2 999999999\n2 2\n1 2 999999999", "2999999999\n2999999999\n2999999998"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2022", "﻿基础算法", "其它技巧", "ROIR（俄罗斯）"], "title": "[ROIR 2022] 口算比赛 (Day 1)", "background": "翻译自 [ROIR 2022 D1T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day1.pdf)。\n\n在一个规则新奇的口算比赛中，评委在黑板上写下 $n$ 个整数 $a_1, a_2, \\dots , a_n$。参赛选手需要自行决定执行以下两种类型的指令：\n\n1. 擦除第 $i$ 个数字，并将数字 $x$ 写入该位置。也就是说，如果黑板上原本写着数字 $a_1, a_2, \\dots , a_n$，那么执行该指令后，数字序列将变为 $a_1, \\dots , a_{i−1}, x, a_{i+1}, \\dots , a_n$。\n2. 将数字序列循环右移 $k$ 位。也就是说，如果黑板上原本写着数字 $a_1, a_2, \\dots , a_n$，那么执行该指令后，数字序列将变为 $a_{n−k+1}, a_{n−k+2}, \\dots , a_n, a_1, a_2, \\dots , a_{n−k}$。", "description": "每次执行完指令后，参赛选手需要将黑板上所有数字的总和报告给评委会。为了检查参赛选手的答案，评委们需要自己计算总和。", "inputFormat": "第一行包含一个整数 $n$，表示初始时黑板上的数字数量。\n\n第二行包含 $n$ 个整数，通过空格分隔，表示初始时写在黑板上的数字 $a_1, a_2, \\dots , a_n$。\n\n第三行包含一个整数 $q$，表示需要执行的指令数量。\n\n接下来的 $q$ 行中，每行描述一条指令，格式如下：\n- `1 i x`：表示参赛选手将第 $i$ 个数字替换为 $x$。\n- `2 k`：表示参赛选手将数字序列循环右移 $k$ 位。", "outputFormat": "输出 $q$ 行，每行包含一个整数。第 $i$ 行应该包含执行前 $i$ 条指令后黑板上所有数字的总和。", "hint": "样例 $1$ 解释：\n\n初始时，在黑板上写有数字序列：$4, 1, 2, 1, 5, 3$。\n\n在执行第一条指令后，数字序列向右循环移动了 $3$ 位。新的数字序列为 $1, 5, 3, 4, 1, 2$。所有数字的总和为 $1 + 5 + 3 + 4 + 1 + 2 = 16$。\n\n在执行第二条指令后，我们需要将第三个元素替换为 $10$。新的数字序列为 $1, 5, 10, 4, 1, 2$。所有数字的总和为 $1 + 5 + 10 + 4 + 1 + 2 = 23$。\n\n在执行第三条指令后，我们需要将第四个元素替换为 $4$。由于第四个元素已经是 $4$，数字序列没有发生改变。所有数字的总和仍然是 $23$。\n\n在执行第四条指令后，数字序列向右循环移动了 $1$ 位，变为 $2, 1, 5, 10, 4, 1$，总和不变。\n\n最后，在执行第五条指令后，数字序列变为 $-10, 1, 5, 10, 4, 1$。最终数字序列的总和为 $-10 + 1 + 5 + 10 + 4 + 1 = 11$。\n\n本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $22$ | $n\\le1000$ 且所有指令都是第一类 |\n| $2$ | $17$ | $n\\le1000$ 且所有第二类指令中 $k=1$ |\n| $3$ | $23$ | $n\\le1000$ |\n| $4$ | $38$ | 无 |\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5$，$−10^9 \\le a_i \\le 10^9$，$1 \\le q \\le 10^5$。对于第一类指令，$1 \\le i \\le n$。对于第二类指令，$−10^9 \\le x \\le 10^9$，$1 \\le k < n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2022] 口算比赛 (Day 1)", "background": "翻译自 [ROIR 2022 D1T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day1.pdf)。\n\n在一个规则新奇的口算比赛中，评委在黑板上写下 $n$ 个整数 $a_1, a_2, \\dots , a_n$。参赛选手需要自行决定执行以下两种类型的指令：\n\n1. 擦除第 $i$ 个数字，并将数字 $x$ 写入该位置。也就是说，如果黑板上原本写着数字 $a_1, a_2, \\dots , a_n$，那么执行该指令后，数字序列将变为 $a_1, \\dots , a_{i−1}, x, a_{i+1}, \\dots , a_n$。\n2. 将数字序列循环右移 $k$ 位。也就是说，如果黑板上原本写着数字 $a_1, a_2, \\dots , a_n$，那么执行该指令后，数字序列将变为 $a_{n−k+1}, a_{n−k+2}, \\dots , a_n, a_1, a_2, \\dots , a_{n−k}$。", "description": "每次执行完指令后，参赛选手需要将黑板上所有数字的总和报告给评委会。为了检查参赛选手的答案，评委们需要自己计算总和。", "inputFormat": "第一行包含一个整数 $n$，表示初始时黑板上的数字数量。\n\n第二行包含 $n$ 个整数，通过空格分隔，表示初始时写在黑板上的数字 $a_1, a_2, \\dots , a_n$。\n\n第三行包含一个整数 $q$，表示需要执行的指令数量。\n\n接下来的 $q$ 行中，每行描述一条指令，格式如下：\n- `1 i x`：表示参赛选手将第 $i$ 个数字替换为 $x$。\n- `2 k`：表示参赛选手将数字序列循环右移 $k$ 位。", "outputFormat": "输出 $q$ 行，每行包含一个整数。第 $i$ 行应该包含执行前 $i$ 条指令后黑板上所有数字的总和。", "hint": "样例 $1$ 解释：\n\n初始时，在黑板上写有数字序列：$4, 1, 2, 1, 5, 3$。\n\n在执行第一条指令后，数字序列向右循环移动了 $3$ 位。新的数字序列为 $1, 5, 3, 4, 1, 2$。所有数字的总和为 $1 + 5 + 3 + 4 + 1 + 2 = 16$。\n\n在执行第二条指令后，我们需要将第三个元素替换为 $10$。新的数字序列为 $1, 5, 10, 4, 1, 2$。所有数字的总和为 $1 + 5 + 10 + 4 + 1 + 2 = 23$。\n\n在执行第三条指令后，我们需要将第四个元素替换为 $4$。由于第四个元素已经是 $4$，数字序列没有发生改变。所有数字的总和仍然是 $23$。\n\n在执行第四条指令后，数字序列向右循环移动了 $1$ 位，变为 $2, 1, 5, 10, 4, 1$，总和不变。\n\n最后，在执行第五条指令后，数字序列变为 $-10, 1, 5, 10, 4, 1$。最终数字序列的总和为 $-10 + 1 + 5 + 10 + 4 + 1 = 11$。\n\n本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $22$ | $n\\le1000$ 且所有指令都是第一类 |\n| $2$ | $17$ | $n\\le1000$ 且所有第二类指令中 $k=1$ |\n| $3$ | $23$ | $n\\le1000$ |\n| $4$ | $38$ | 无 |\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5$，$−10^9 \\le a_i \\le 10^9$，$1 \\le q \\le 10^5$。对于第一类指令，$1 \\le i \\le n$。对于第二类指令，$−10^9 \\le x \\le 10^9$，$1 \\le k < n$。", "locale": "zh-CN"}}}
{"pid": "P10087", "type": "P", "difficulty": 4, "samples": [["5\n1\n3 7 4 2 5", "4 3"], ["10\n2\n5 1 2 3\n1 2 3 4 5", "653 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "数学", "树形数据结构", "线段树", "线性数据结构", "树状数组", "单调队列", "2022", "Special Judge", "﻿基础算法", "动态规划优化", "队列", "其它技巧", "ROIR（俄罗斯）"], "title": "[ROIR 2022] 跳跃机器人 (Day 1)", "background": "翻译自 [ROIR 2022 D1T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day1.pdf)。\n\n某公司正在开发一种跳跃机器人。为了测试机器人，他们在一个多边形平台上设置了一个由 $n$ 个特殊平台组成的环形路线，平台从 $1$ 到 $n$ 编号。第 $i$ 个平台与 $i+1$ 个平台之间的距离为 $d_i$，最后一个平台与第一个平台之间的距离为 $d_n$（假设长度分别为 $d_1,d_2,\\dots,d_n$ 的边可以组成一个 $n$ 边形）。\n\n机器人配备了人工智能，在测试过程中学习跳得更远。在任何时刻，机器人通过一个整数 $a$ 来表示它的灵敏度。如果 $a$ 大于等于 $d_i$，机器人可以从平台 $i$ 跳到平台 $i+1$；同样地，如果 $a$ 大于等于 $d_n$，机器人可以从最后一个平台跳到第一个平台。每次跳跃后，机器人的灵敏度增加 $1$。", "description": "机器人的开发人员选择一个平台作为起始平台。如果机器人可以完成 $n$ 次跳跃，回到原来的平台，他们认为实验是成功的。开发人员需要确定机器人的最小起始灵敏度是多少，并选择哪个平台作为起始平台。", "inputFormat": "第一行包含一个整数 $n$。\n\n第二行包含一个整数 $f$。\n\n- 如果 $f = 1$，则第三行包含 $n$ 个整数 $d_1, d_2, \\dots , d_n$，意义见题目背景。\n- 如果 $f = 2$，则第三行包含一个整数 $m$，以及三个整数 $x,y,z$。第四行包含 $m$ 个整数 $c_1, c_2, \\dots , c_m$。此时距离值 $d_i$ 根据以下公式计算：\n   - 如果 $1 \\le i \\le m$，则 $d_i = c_i$。\n   - 如果 $m + 1 \\le i \\le n$，则 $d_i = ((x \\times d_{i−2} + y \\times d_{i−1} + z) \\bmod 10^9) + 1$。", "outputFormat": "输出两个整数，即最小允许的起始灵敏度 $a$ 和可用于放置机器人的起始平台编号。如果有多个最小起始灵敏度对应的起始平台，可以输出任意一个。", "hint": "样例说明：\n\n在第二个示例中，距离数组为 $[1, 2, 3, 4, 5, 18, 45, 112, 273, 662]$。\n\n根据公式计算 $d_6$ 到 $d_{10}$ 的值：\n\n- $d_6 = ((1 \\cdot d_4 + 2 \\cdot d_5 + 3) \\bmod 10^9) + 1 = ((1 \\cdot 4 + 2 \\cdot 5 + 3) \\bmod 10^9) + 1 = 18$；\n- $d_7 = ((1 \\cdot d_5 + 2 \\cdot d_6 + 3) \\bmod 10^9) + 1 = ((1 \\cdot 5 + 2 \\cdot 18 + 3) \\bmod 10^9) + 1 = 45$；\n- $d_8 = ((1 \\cdot d_6 + 2 \\cdot d_7 + 3) \\bmod 10^9) + 1 = ((1 \\cdot 18 + 2 \\cdot 45 + 3) \\bmod 10^9) + 1 = 112$；\n- $d_9 = ((1 \\cdot d_7 + 2 \\cdot d_8 + 3) \\bmod 10^9) + 1 = ((1 \\cdot 45 + 2 \\cdot 112 + 3) \\bmod 10^9) + 1 = 273$；\n- $d_{10} = ((1 \\cdot d_8 + 2 \\cdot d_9 + 3) \\bmod 10^9) + 1 = ((1 \\cdot 112 + 2 \\cdot 273 + 3) \\bmod 10^9) + 1 = 662$。\n\n本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $15$ | $n\\le300,f=1,d\\le300$ |\n| $1$ | $17$ | $n\\le5000,f=2$ |\n| $2$ | $10$ | $n\\le100000,f=1$ 且保证从第一个平台开始跳是最佳选择 |\n| $3$ | $20$ | $n\\le100000,f=1$ |\n| $4$ | $5$ | $f=2$ 且保证从第一个平台开始跳是最佳选择 |\n| $5$ | $33$ | $f=2$ |\n\n对于 $100\\%$ 的数据，$3 \\le n \\le 10^7$。当 $f=1$ 时 $1 \\le d_i \\le 10^9$，当 $f=2$ 时 $2 \\le m \\le \\min(n, 10^5)$，$0 \\le x, y, z \\le 10^9$，$1 \\le c_i \\le 10^9$。\n\n注：本题的算法标签部分参考了官方题解中用到的解法。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2022] 跳跃机器人 (Day 1)", "background": "翻译自 [ROIR 2022 D1T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day1.pdf)。\n\n某公司正在开发一种跳跃机器人。为了测试机器人，他们在一个多边形平台上设置了一个由 $n$ 个特殊平台组成的环形路线，平台从 $1$ 到 $n$ 编号。第 $i$ 个平台与 $i+1$ 个平台之间的距离为 $d_i$，最后一个平台与第一个平台之间的距离为 $d_n$（假设长度分别为 $d_1,d_2,\\dots,d_n$ 的边可以组成一个 $n$ 边形）。\n\n机器人配备了人工智能，在测试过程中学习跳得更远。在任何时刻，机器人通过一个整数 $a$ 来表示它的灵敏度。如果 $a$ 大于等于 $d_i$，机器人可以从平台 $i$ 跳到平台 $i+1$；同样地，如果 $a$ 大于等于 $d_n$，机器人可以从最后一个平台跳到第一个平台。每次跳跃后，机器人的灵敏度增加 $1$。", "description": "机器人的开发人员选择一个平台作为起始平台。如果机器人可以完成 $n$ 次跳跃，回到原来的平台，他们认为实验是成功的。开发人员需要确定机器人的最小起始灵敏度是多少，并选择哪个平台作为起始平台。", "inputFormat": "第一行包含一个整数 $n$。\n\n第二行包含一个整数 $f$。\n\n- 如果 $f = 1$，则第三行包含 $n$ 个整数 $d_1, d_2, \\dots , d_n$，意义见题目背景。\n- 如果 $f = 2$，则第三行包含一个整数 $m$，以及三个整数 $x,y,z$。第四行包含 $m$ 个整数 $c_1, c_2, \\dots , c_m$。此时距离值 $d_i$ 根据以下公式计算：\n   - 如果 $1 \\le i \\le m$，则 $d_i = c_i$。\n   - 如果 $m + 1 \\le i \\le n$，则 $d_i = ((x \\times d_{i−2} + y \\times d_{i−1} + z) \\bmod 10^9) + 1$。", "outputFormat": "输出两个整数，即最小允许的起始灵敏度 $a$ 和可用于放置机器人的起始平台编号。如果有多个最小起始灵敏度对应的起始平台，可以输出任意一个。", "hint": "样例说明：\n\n在第二个示例中，距离数组为 $[1, 2, 3, 4, 5, 18, 45, 112, 273, 662]$。\n\n根据公式计算 $d_6$ 到 $d_{10}$ 的值：\n\n- $d_6 = ((1 \\cdot d_4 + 2 \\cdot d_5 + 3) \\bmod 10^9) + 1 = ((1 \\cdot 4 + 2 \\cdot 5 + 3) \\bmod 10^9) + 1 = 18$；\n- $d_7 = ((1 \\cdot d_5 + 2 \\cdot d_6 + 3) \\bmod 10^9) + 1 = ((1 \\cdot 5 + 2 \\cdot 18 + 3) \\bmod 10^9) + 1 = 45$；\n- $d_8 = ((1 \\cdot d_6 + 2 \\cdot d_7 + 3) \\bmod 10^9) + 1 = ((1 \\cdot 18 + 2 \\cdot 45 + 3) \\bmod 10^9) + 1 = 112$；\n- $d_9 = ((1 \\cdot d_7 + 2 \\cdot d_8 + 3) \\bmod 10^9) + 1 = ((1 \\cdot 45 + 2 \\cdot 112 + 3) \\bmod 10^9) + 1 = 273$；\n- $d_{10} = ((1 \\cdot d_8 + 2 \\cdot d_9 + 3) \\bmod 10^9) + 1 = ((1 \\cdot 112 + 2 \\cdot 273 + 3) \\bmod 10^9) + 1 = 662$。\n\n本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $15$ | $n\\le300,f=1,d\\le300$ |\n| $1$ | $17$ | $n\\le5000,f=2$ |\n| $2$ | $10$ | $n\\le100000,f=1$ 且保证从第一个平台开始跳是最佳选择 |\n| $3$ | $20$ | $n\\le100000,f=1$ |\n| $4$ | $5$ | $f=2$ 且保证从第一个平台开始跳是最佳选择 |\n| $5$ | $33$ | $f=2$ |\n\n对于 $100\\%$ 的数据，$3 \\le n \\le 10^7$。当 $f=1$ 时 $1 \\le d_i \\le 10^9$，当 $f=2$ 时 $2 \\le m \\le \\min(n, 10^5)$，$0 \\le x, y, z \\le 10^9$，$1 \\le c_i \\le 10^9$。\n\n注：本题的算法标签部分参考了官方题解中用到的解法。", "locale": "zh-CN"}}}
{"pid": "P10088", "type": "P", "difficulty": 4, "samples": [["1\n4\n0 0 6 2 1 2\n0 0 5 0 6 3\n0 0 3 1 1 3\n0 0 6 3 3 6", "1\n1 2 3 4"], ["2\n6\n0 0 1 0 1 1\n0 1 0 0 1 0\n-1 0 0 0 0 1\n1 1 0 1 1 0\n-1 0 0 -1 0 0\n0 0 1 1 0 1", "15\n1 2 3 4\n1 2 3 5\n1 2 3 6\n1 2 4 5\n1 2 4 6\n1 2 5 6\n1 3 4 5\n1 3 4 6\n1 3 5 6\n1 4 5 6\n2 3 4 5\n2 3 4 6\n2 3 5 6\n2 4 5 6\n3 4 5 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2022", "Special Judge", "枚举", "ROIR（俄罗斯）"], "title": "[ROIR 2022] n 巧板 (Day 1)", "background": "翻译自 [ROIR 2022 D1T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day1.pdf)。\n\n有一个拼图由 $n$ 个三角形组成。要成功解出这个拼图，需要从中选择四个三角形，并按以下规则组合成一个大三角形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/texrth5u.png)\n\n这些三角形不能相交，它们的组合必须形成一个三角形。选择的四个三角形中恰好有三个三角形位于角落，另一个三角形位于中心。\n\n三角形放置在桌上，可以自由旋转和移动，但**不能翻转**。", "description": "需要找到所有可以按照指定规则组合成大三角形的四个不同三角形的集合。如果存在一个三角形属于其中一个集合但不属于另一个集合，则认为两个集合是不同的。", "inputFormat": "第一行包含一个整数 $t$，表示当前测试点的编号。\n\n第二行包含一个整数 $n$，表示拼图中的三角形数量（$4 \\le n \\le 30$）。\n\n接下来的 $n$ 行，每行输入六个数，表示一个三角形三个顶点的坐标，按逆时针顺序给出。所有坐标都是整数，且不超过 $10^5$。保证三角形不会退化为直线段。初始位置的三角形可能相交。", "outputFormat": "第一行输出一个整数，表示按照指定规则可以组合成大三角形的四个三角形的集合数量。\n\n接下来的行输出这些集合。每个集合由其中包含的三角形的编号组成。集合内部的三角形可以以任何顺序输出。集合的输出顺序也是任意的。", "hint": "本题分 $22$ 个测试点，前两个测试点为样例，通过不得分，后 $20$ 个测试点每个 $5$ 分。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1$ | 输入数据即样例 $1$ |\n| $2$ | 输入数据即样例 $2$ |\n| $3$ | 所有三角形全等，$n\\le30$ |\n| $4$ | 所有三角形都有一条水平的边和一条垂直的边且它们都是等腰三角形，$n\\le10$ |\n| $5$ | 所有三角形都有一条水平的边和一条垂直的边且它们都是等腰三角形，$n\\le30$ |\n| $6$ | 所有三角形都有一条水平的边和一条垂直的边且 $n\\le10$ |\n| $7$ | 所有三角形都有一条水平的边和一条垂直的边且 $n\\le30$ |\n| $8$ | 所有三角形都是直角三角形且 $n\\le10$ |\n| $9$ | 所有三角形都是直角三角形且 $n\\le30$ |\n| $10$ | 所有能拼成大三角形的四个小三角形均不用旋转即可拼成且 $n\\le10$ |\n| $11$ | 所有能拼成大三角形的四个小三角形均不用旋转即可拼成且 $n\\le20$ |\n| $12$ | 所有能拼成大三角形的四个小三角形均不用旋转即可拼成且 $n\\le30$ |\n| $13$ | $n=10$ |\n| $14$ | $n=10$|\n| $15$ | $n=10$ |\n| $16$ | $n=20$ |\n| $17$ | $n=20$ |\n| $18$ | $n=20$ |\n| $19$ | $n=30$ |\n| $20$ | $n=30$ |\n| $21$ | $n=30$ |\n| $22$ | $n=30$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2022] n 巧板 (Day 1)", "background": "翻译自 [ROIR 2022 D1T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day1.pdf)。\n\n有一个拼图由 $n$ 个三角形组成。要成功解出这个拼图，需要从中选择四个三角形，并按以下规则组合成一个大三角形：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/texrth5u.png)\n\n这些三角形不能相交，它们的组合必须形成一个三角形。选择的四个三角形中恰好有三个三角形位于角落，另一个三角形位于中心。\n\n三角形放置在桌上，可以自由旋转和移动，但**不能翻转**。", "description": "需要找到所有可以按照指定规则组合成大三角形的四个不同三角形的集合。如果存在一个三角形属于其中一个集合但不属于另一个集合，则认为两个集合是不同的。", "inputFormat": "第一行包含一个整数 $t$，表示当前测试点的编号。\n\n第二行包含一个整数 $n$，表示拼图中的三角形数量（$4 \\le n \\le 30$）。\n\n接下来的 $n$ 行，每行输入六个数，表示一个三角形三个顶点的坐标，按逆时针顺序给出。所有坐标都是整数，且不超过 $10^5$。保证三角形不会退化为直线段。初始位置的三角形可能相交。", "outputFormat": "第一行输出一个整数，表示按照指定规则可以组合成大三角形的四个三角形的集合数量。\n\n接下来的行输出这些集合。每个集合由其中包含的三角形的编号组成。集合内部的三角形可以以任何顺序输出。集合的输出顺序也是任意的。", "hint": "本题分 $22$ 个测试点，前两个测试点为样例，通过不得分，后 $20$ 个测试点每个 $5$ 分。\n\n| 测试点编号 | 特殊性质 |\n| :----------: | :----------: |\n| $1$ | 输入数据即样例 $1$ |\n| $2$ | 输入数据即样例 $2$ |\n| $3$ | 所有三角形全等，$n\\le30$ |\n| $4$ | 所有三角形都有一条水平的边和一条垂直的边且它们都是等腰三角形，$n\\le10$ |\n| $5$ | 所有三角形都有一条水平的边和一条垂直的边且它们都是等腰三角形，$n\\le30$ |\n| $6$ | 所有三角形都有一条水平的边和一条垂直的边且 $n\\le10$ |\n| $7$ | 所有三角形都有一条水平的边和一条垂直的边且 $n\\le30$ |\n| $8$ | 所有三角形都是直角三角形且 $n\\le10$ |\n| $9$ | 所有三角形都是直角三角形且 $n\\le30$ |\n| $10$ | 所有能拼成大三角形的四个小三角形均不用旋转即可拼成且 $n\\le10$ |\n| $11$ | 所有能拼成大三角形的四个小三角形均不用旋转即可拼成且 $n\\le20$ |\n| $12$ | 所有能拼成大三角形的四个小三角形均不用旋转即可拼成且 $n\\le30$ |\n| $13$ | $n=10$ |\n| $14$ | $n=10$|\n| $15$ | $n=10$ |\n| $16$ | $n=20$ |\n| $17$ | $n=20$ |\n| $18$ | $n=20$ |\n| $19$ | $n=30$ |\n| $20$ | $n=30$ |\n| $21$ | $n=30$ |\n| $22$ | $n=30$ |", "locale": "zh-CN"}}}
{"pid": "P10089", "type": "P", "difficulty": 5, "samples": [["5 6\n4 3 3 2 1\n4 1 5 1 3 2", "3"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2022] 回文数组 (Day 1)", "background": "翻译自 [ROIR 2022 D1T4](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day1.pdf)。\n\n有两个自然数数组 $A = [a_1, a_2, \\dots , a_n]$ 和 $B = [b_1, b_2, \\dots , b_m]$。\n\n对每个数组，随机地去掉一个可能为空的前缀和一个可能为空的后缀，使得剩下的数组部分长度相等。我们将得到的数组记作 $A'$ 和 $B'$，它们的长度为 $k$。然后，对这两个数组的相应元素求和，结果数组记作 $C = [c_1, c_2, \\dots , c_k]$。\n\n例如，假设 $n = 5,A = [4, 3, 3, 2, 1],m = 6,B = [4, 1, 5, 1, 3, 2]$，从数组 $A$ 中去掉第一个和最后一个元素，从数组 $B$ 中去掉前三个元素，得到 $A' = [3, 3, 2],B' = [1, 3, 2]$，它们的相应元素求和结果为 $C = [4, 6, 4]$。  \n假设 $n = 7,A = [1,9,1,9,8,1,0],m = 6,B = [1,1,4,5,1,4]$，从数组 $A$ 中去掉前两个元素和最后一个元素，从数组 $B$ 中去掉第一个和最后一个元素，得到 $A' = [1,9,8,1],B' = [1,4,5,1]$，它们的相应元素求和结果为 $C = [2,13,13,2]$。", "description": "找到能够得到回文数组 $C$ 的最大长度 $k$。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$，分别表示第一个数组和第二个数组的元素数量 ($1 \\le n, m \\le 100 000$)。\n\n第二行输入 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示数组 $A$（$1 \\le a_i \\le 100$）。\n\n第三行输入 $m$ 个整数 $b_1,b_2,\\dots,b_n$，表示数组 $B$（$1 \\le b_i \\le 100$）。", "outputFormat": "输出一个整数，表示能够得到的最长回文数组的长度 $k$。", "hint": "本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $13$ | $n,m\\le300$ |\n| $2$ | $33$ | $B$ 中所有数都相等 |\n| $3$ | $16$ | $n\\le500,m\\le10^5$ |\n| $4$ | $38$ | 无 |\n\n对于所有数据，$1 \\le n, m \\le 100 000$，$1 \\le a_i \\le 100$，$1 \\le b_i \\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2022] 回文数组 (Day 1)", "background": "翻译自 [ROIR 2022 D1T4](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day1.pdf)。\n\n有两个自然数数组 $A = [a_1, a_2, \\dots , a_n]$ 和 $B = [b_1, b_2, \\dots , b_m]$。\n\n对每个数组，随机地去掉一个可能为空的前缀和一个可能为空的后缀，使得剩下的数组部分长度相等。我们将得到的数组记作 $A'$ 和 $B'$，它们的长度为 $k$。然后，对这两个数组的相应元素求和，结果数组记作 $C = [c_1, c_2, \\dots , c_k]$。\n\n例如，假设 $n = 5,A = [4, 3, 3, 2, 1],m = 6,B = [4, 1, 5, 1, 3, 2]$，从数组 $A$ 中去掉第一个和最后一个元素，从数组 $B$ 中去掉前三个元素，得到 $A' = [3, 3, 2],B' = [1, 3, 2]$，它们的相应元素求和结果为 $C = [4, 6, 4]$。  \n假设 $n = 7,A = [1,9,1,9,8,1,0],m = 6,B = [1,1,4,5,1,4]$，从数组 $A$ 中去掉前两个元素和最后一个元素，从数组 $B$ 中去掉第一个和最后一个元素，得到 $A' = [1,9,8,1],B' = [1,4,5,1]$，它们的相应元素求和结果为 $C = [2,13,13,2]$。", "description": "找到能够得到回文数组 $C$ 的最大长度 $k$。", "inputFormat": "第一行输入两个整数 $n$ 和 $m$，分别表示第一个数组和第二个数组的元素数量 ($1 \\le n, m \\le 100 000$)。\n\n第二行输入 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示数组 $A$（$1 \\le a_i \\le 100$）。\n\n第三行输入 $m$ 个整数 $b_1,b_2,\\dots,b_n$，表示数组 $B$（$1 \\le b_i \\le 100$）。", "outputFormat": "输出一个整数，表示能够得到的最长回文数组的长度 $k$。", "hint": "本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $13$ | $n,m\\le300$ |\n| $2$ | $33$ | $B$ 中所有数都相等 |\n| $3$ | $16$ | $n\\le500,m\\le10^5$ |\n| $4$ | $38$ | 无 |\n\n对于所有数据，$1 \\le n, m \\le 100 000$，$1 \\le a_i \\le 100$，$1 \\le b_i \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P10090", "type": "P", "difficulty": 4, "samples": [["4\n4 2 2\n4 4 4\n6 5 5\n8 13 17", "1\n6\n5\n30"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2022", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2022] 幼儿园的新年 (Day 2)", "background": "翻译简化自 [ROIR 2022 D2T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day2.pdf)。", "description": "给出三个整数 $n,a,b$，求有多少对 $(x,y)$ 满足 $0 \\le x \\le a$，$0 \\le y \\le b$，$x+y$ 不为 $0$ 且能被 $n$ 整除。", "inputFormat": "本题多测，第一行输入一个整数 $t$，表示测试数据的组数。\n\n接下来的 $t$ 行，每行输入一组测试数据 $n,a,b$，由空格隔开。", "outputFormat": "对于每组数据，输出一行一个数字，即符合条件的 $(x,y)$ 数量。", "hint": "本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $t=1$ 且 $a,b\\le1000$ |\n| $2$ | $10$ | $t\\le1000$ 且 $a=0$ |\n| $3$ | $15$ | $t\\le1000$ 且 $a,b<n\\le1000$ |\n| $4$ | $10$ | $t\\le1000$ 且 $a,b\\le1000$ |\n| $5$ | $15$ | $t=1$ 且 $n\\le1000$ |\n| $6$ | $10$ | $t\\le1000$ 且 $n\\le1000$ |\n| $7$ | $30$ | 无特殊性质 |\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 10^5$，$4 \\le n \\le 10^9$，$0 \\le a, b \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2022] 幼儿园的新年 (Day 2)", "background": "翻译简化自 [ROIR 2022 D2T1](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day2.pdf)。", "description": "给出三个整数 $n,a,b$，求有多少对 $(x,y)$ 满足 $0 \\le x \\le a$，$0 \\le y \\le b$，$x+y$ 不为 $0$ 且能被 $n$ 整除。", "inputFormat": "本题多测，第一行输入一个整数 $t$，表示测试数据的组数。\n\n接下来的 $t$ 行，每行输入一组测试数据 $n,a,b$，由空格隔开。", "outputFormat": "对于每组数据，输出一行一个数字，即符合条件的 $(x,y)$ 数量。", "hint": "本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $t=1$ 且 $a,b\\le1000$ |\n| $2$ | $10$ | $t\\le1000$ 且 $a=0$ |\n| $3$ | $15$ | $t\\le1000$ 且 $a,b<n\\le1000$ |\n| $4$ | $10$ | $t\\le1000$ 且 $a,b\\le1000$ |\n| $5$ | $15$ | $t=1$ 且 $n\\le1000$ |\n| $6$ | $10$ | $t\\le1000$ 且 $n\\le1000$ |\n| $7$ | $30$ | 无特殊性质 |\n\n对于 $100\\%$ 的数据，$1 \\le t \\le 10^5$，$4 \\le n \\le 10^9$，$0 \\le a, b \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10091", "type": "P", "difficulty": 4, "samples": [["4 8\n3 4 1 2\n2 3 4 5\n1 16 2 4 5 6 10 15", "1 5\n2 1\n1 4\n2 5\n1 2\n1 2\n4 5\n3 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "二分", "2022", "排序", "其它技巧", "ROIR（俄罗斯）"], "title": "[ROIR 2022] 分数排序 (Day 2)", "background": "翻译自 [ROIR 2022 D2T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day2.pdf)。", "description": "有两个由 $n$ 个不同整数组成的序列 $A = [a_1, a_2, \\dots , a_n]$ 和 $B = [b_1, b_2, \\dots , b_n]$。将它们组合成 $n^2$ 个分数，形式为 $\\frac{a_i}{b_j}$，并将每个分数约分后按递增顺序排序。\n\n给定一个数字 $q$ 和 $q$ 个整数 $c_1, c_2, \\dots , c_q$。对于每个 $c_i$，请输出上面所说的 $n^2$ 个分数中第 $c_i$ 小的分数。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$。\n\n第二行包含 $n$ 个不同的整数 $a_1, a_2, \\dots, a_n$。\n\n第三行包含 $n$ 个不同的整数 $b_1, b_2, \\dots, b_n$。\n\n第四行包含 $q$ 个不同的整数 $c_1, c_2, \\dots, c_q$。", "outputFormat": "输出 $q$ 行。第 $i$ 行输出按递增顺序得到的第 $c_i$ 个分数。分数 $\\frac{p}{q}$ 应以 `p q` 的格式输出，并且应为最简分数。", "hint": "在样例中，初始的分数列表如下：\n\n$$\n\\left[\n\\frac{3}{2},\n\\frac{3}{3},\n\\frac{3}{4},\n\\frac{3}{5},\n\\frac{4}{2},\n\\frac{4}{3},\n\\frac{4}{4},\n\\frac{4}{5},\n\\frac{1}{2},\n\\frac{1}{3},\n\\frac{1}{4},\n\\frac{1}{5},\n\\frac{2}{2},\n\\frac{2}{3},\n\\frac{2}{4},\n\\frac{2}{5}\n\\right],\n$$\n\n经过约分后，得到：\n\n$$\n\\left[\n\\frac{3}{2},\n\\frac{1}{1},\n\\frac{3}{4},\n\\frac{3}{5},\n\\frac{2}{1},\n\\frac{4}{3},\n\\frac{1}{1},\n\\frac{4}{5},\n\\frac{1}{2},\n\\frac{1}{3},\n\\frac{1}{4},\n\\frac{1}{5},\n\\frac{1}{1},\n\\frac{2}{3},\n\\frac{1}{2},\n\\frac{2}{5}\n\\right],\n$$\n\n最后按递增顺序排序，得到：\n\n$$\n\\left[\n\\frac{1}{5},\n\\frac{1}{4},\n\\frac{1}{3},\n\\frac{2}{5},\n\\frac{1}{2},\n\\frac{1}{2},\n\\frac{3}{5},\n\\frac{2}{3},\n\\frac{3}{4},\n\\frac{4}{5},\n\\frac{1}{1},\n\\frac{1}{1},\n\\frac{1}{1},\n\\frac{4}{3},\n\\frac{3}{2},\n\\frac{2}{1}\n\\right].\n$$\n\n本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $14$ | $n\\le50$ |\n| $2$ | $13$ | $n\\le500$ |\n| $3$ | $15$ | $q,c_i\\le100$ |\n| $4$ | $21$ | $c_i\\le10^5$ |\n| $5$ | $37$ |  |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$1 \\leq q \\leq 10^5$ 且 $q \\leq n^2,n\\times q\\le10^5$（所以实际上 $q\\le1000\\sqrt[3]{10}\\approx2154$），$1 \\leq a_i,b_i \\leq 10^6$，$1 \\leq c_i \\leq n^2$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2022] 分数排序 (Day 2)", "background": "翻译自 [ROIR 2022 D2T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day2.pdf)。", "description": "有两个由 $n$ 个不同整数组成的序列 $A = [a_1, a_2, \\dots , a_n]$ 和 $B = [b_1, b_2, \\dots , b_n]$。将它们组合成 $n^2$ 个分数，形式为 $\\frac{a_i}{b_j}$，并将每个分数约分后按递增顺序排序。\n\n给定一个数字 $q$ 和 $q$ 个整数 $c_1, c_2, \\dots , c_q$。对于每个 $c_i$，请输出上面所说的 $n^2$ 个分数中第 $c_i$ 小的分数。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$。\n\n第二行包含 $n$ 个不同的整数 $a_1, a_2, \\dots, a_n$。\n\n第三行包含 $n$ 个不同的整数 $b_1, b_2, \\dots, b_n$。\n\n第四行包含 $q$ 个不同的整数 $c_1, c_2, \\dots, c_q$。", "outputFormat": "输出 $q$ 行。第 $i$ 行输出按递增顺序得到的第 $c_i$ 个分数。分数 $\\frac{p}{q}$ 应以 `p q` 的格式输出，并且应为最简分数。", "hint": "在样例中，初始的分数列表如下：\n\n$$\n\\left[\n\\frac{3}{2},\n\\frac{3}{3},\n\\frac{3}{4},\n\\frac{3}{5},\n\\frac{4}{2},\n\\frac{4}{3},\n\\frac{4}{4},\n\\frac{4}{5},\n\\frac{1}{2},\n\\frac{1}{3},\n\\frac{1}{4},\n\\frac{1}{5},\n\\frac{2}{2},\n\\frac{2}{3},\n\\frac{2}{4},\n\\frac{2}{5}\n\\right],\n$$\n\n经过约分后，得到：\n\n$$\n\\left[\n\\frac{3}{2},\n\\frac{1}{1},\n\\frac{3}{4},\n\\frac{3}{5},\n\\frac{2}{1},\n\\frac{4}{3},\n\\frac{1}{1},\n\\frac{4}{5},\n\\frac{1}{2},\n\\frac{1}{3},\n\\frac{1}{4},\n\\frac{1}{5},\n\\frac{1}{1},\n\\frac{2}{3},\n\\frac{1}{2},\n\\frac{2}{5}\n\\right],\n$$\n\n最后按递增顺序排序，得到：\n\n$$\n\\left[\n\\frac{1}{5},\n\\frac{1}{4},\n\\frac{1}{3},\n\\frac{2}{5},\n\\frac{1}{2},\n\\frac{1}{2},\n\\frac{3}{5},\n\\frac{2}{3},\n\\frac{3}{4},\n\\frac{4}{5},\n\\frac{1}{1},\n\\frac{1}{1},\n\\frac{1}{1},\n\\frac{4}{3},\n\\frac{3}{2},\n\\frac{2}{1}\n\\right].\n$$\n\n本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $14$ | $n\\le50$ |\n| $2$ | $13$ | $n\\le500$ |\n| $3$ | $15$ | $q,c_i\\le100$ |\n| $4$ | $21$ | $c_i\\le10^5$ |\n| $5$ | $37$ |  |\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^5$，$1 \\leq q \\leq 10^5$ 且 $q \\leq n^2,n\\times q\\le10^5$（所以实际上 $q\\le1000\\sqrt[3]{10}\\approx2154$），$1 \\leq a_i,b_i \\leq 10^6$，$1 \\leq c_i \\leq n^2$。", "locale": "zh-CN"}}}
{"pid": "P10092", "type": "P", "difficulty": 4, "samples": [["8 2\n1 0\n1 0\n1 0\n2 0\n2 0\n2 0\n1 0", "4 0"], ["8 3\n1 5\n1 2\n1 4\n2 6\n2 7\n2 2\n1 6", "6 27"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2022", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2022] 网络系统升级计划 (Day 2)", "background": "翻译自 [ROIR 2022 D2T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day2.pdf)。\n\n某国有 $n$ 个城市，从 $1$ 到 $n$ 编号，首都编号为 $1$。\n\n这个国家的计算机网络构建如下：每个城市都有一个连接中心，可以通过有线通信渠道与其他一些中心相连。对于任意两个城市之间存在着一条唯一的通信路径，换句话说，该网络形成一棵树。对于城市 $i(i > 1)$，我们把从城市 $i$ 到首都的路径上第一个城市记为 $p_i$。\n\n计划对网络进行升级，用更先进的光学通信渠道替换一些现有有线渠道。光学通信渠道只能在现有有线通信渠道的位置上铺设。替换连接城市 $i$ 和 $p_i$ 的通信渠道的成本为 $w_i$。由于技术限制，任何连接中心最多可以直接连接到 $k$ 个其它中心。", "description": "通信部希望制定一个升级计划，以提高光学通信渠道的其连通性。因此，需要选择尽可能多的通信渠道进行升级。但是，希望在相同数量的情况下尽量减少升级成本，因此，在相同数量的情况下，选择升级具有最小总成本的通信渠道。\n\n帮助通信部专家选择要升级的通信渠道。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $k$。\n\n接下来的 $n−1$ 行描述了通信渠道，其中第 $i−1$ 行包含两个整数：$p_i$ 和 $w_i$（$1 \\le p_i < i, 0 \\le w_i \\le 10^9$）。", "outputFormat": "输出两个整数 $cnt$ 和 $cost$，表示能够升级的最大通信渠道数量和升级这些通信渠道的最小成本。", "hint": "样例 $1$ 中的网络配置在升级前后如下图所示。需要升级的通信渠道以粗线表示。可以升级的最大通信渠道数量为 $4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wd46yiot.png)\n\n样例 $2$ 中的网络配置在升级前后如下图所示。需要升级的通信渠道以粗线表示。可以升级的最大通信渠道数量为 $6$。升级通道的成本显示在边（通信渠道）的旁边，最优解决方案中升级通道的总成本为 $27$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z2mnb3ul.png)\n\n本题原题分为 $13$ 个 Subtask，但是洛谷不支持设置 $10$ 个以上的 Subtask。本题原题分为 $321$ 个测试点，但是洛谷不支持设置 $100$ 个以上的测试点。所以本题只保留后 $100$ 个测试点，且不使用捆绑测试。\n\n所有数据均满足 $2 \\le n \\le 10^5, 1 \\le k \\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2022] 网络系统升级计划 (Day 2)", "background": "翻译自 [ROIR 2022 D2T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day2.pdf)。\n\n某国有 $n$ 个城市，从 $1$ 到 $n$ 编号，首都编号为 $1$。\n\n这个国家的计算机网络构建如下：每个城市都有一个连接中心，可以通过有线通信渠道与其他一些中心相连。对于任意两个城市之间存在着一条唯一的通信路径，换句话说，该网络形成一棵树。对于城市 $i(i > 1)$，我们把从城市 $i$ 到首都的路径上第一个城市记为 $p_i$。\n\n计划对网络进行升级，用更先进的光学通信渠道替换一些现有有线渠道。光学通信渠道只能在现有有线通信渠道的位置上铺设。替换连接城市 $i$ 和 $p_i$ 的通信渠道的成本为 $w_i$。由于技术限制，任何连接中心最多可以直接连接到 $k$ 个其它中心。", "description": "通信部希望制定一个升级计划，以提高光学通信渠道的其连通性。因此，需要选择尽可能多的通信渠道进行升级。但是，希望在相同数量的情况下尽量减少升级成本，因此，在相同数量的情况下，选择升级具有最小总成本的通信渠道。\n\n帮助通信部专家选择要升级的通信渠道。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $k$。\n\n接下来的 $n−1$ 行描述了通信渠道，其中第 $i−1$ 行包含两个整数：$p_i$ 和 $w_i$（$1 \\le p_i < i, 0 \\le w_i \\le 10^9$）。", "outputFormat": "输出两个整数 $cnt$ 和 $cost$，表示能够升级的最大通信渠道数量和升级这些通信渠道的最小成本。", "hint": "样例 $1$ 中的网络配置在升级前后如下图所示。需要升级的通信渠道以粗线表示。可以升级的最大通信渠道数量为 $4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wd46yiot.png)\n\n样例 $2$ 中的网络配置在升级前后如下图所示。需要升级的通信渠道以粗线表示。可以升级的最大通信渠道数量为 $6$。升级通道的成本显示在边（通信渠道）的旁边，最优解决方案中升级通道的总成本为 $27$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z2mnb3ul.png)\n\n本题原题分为 $13$ 个 Subtask，但是洛谷不支持设置 $10$ 个以上的 Subtask。本题原题分为 $321$ 个测试点，但是洛谷不支持设置 $100$ 个以上的测试点。所以本题只保留后 $100$ 个测试点，且不使用捆绑测试。\n\n所有数据均满足 $2 \\le n \\le 10^5, 1 \\le k \\le 100$。", "locale": "zh-CN"}}}
{"pid": "P10093", "type": "P", "difficulty": 6, "samples": [["5 0\n2 -4 5 -1 7", "11"], ["5 1\n2 -4 5 -1 7", "4"], ["5 2\n2 -4 5 -1 7", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2022", "Special Judge", "前缀和", "ST 表", "链表", "ROIR（俄罗斯）"], "title": "[ROIR 2022] 礼物 (Day 2)", "background": "翻译自 [ROIR 2022 D2T4](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day2.pdf)。\n\n圣诞老人让沃瓦选择一个礼物。\n\n在沃瓦面前有 $n$ 个礼物排成一行。每个礼物给沃瓦带来的快乐程度值用一个整数表示，第 $i$ 个礼物的值为 $a_i$。快乐程度可以是正数、负数或零。\n\n圣诞老人让沃瓦选择两个整数 $l$ 和 $r$，满足 $1 \\le l \\le r \\le n$。沃瓦需要选择从 $l$ 到 $r$ 之间的所有礼物。然而，在所选的礼物中，沃瓦必须把具有前 $k$ 大快乐程度值的 $k$ 个礼物给他的妹妹玛莎。", "description": "帮助沃瓦选择 $l$ 和 $r$，使得 $1 \\le l \\le r \\le n,r - l + 1 \\ge k$，并且他得到的礼物的总快乐程度最大化（不包括给妹妹的礼物）。", "inputFormat": "第一行输入两个整数 $n$ 和 $k$，表示放在沃瓦面前的礼物数量和需要给玛莎的礼物数量。\n\n第二行输入 $n$ 个整数，用空格分隔，第 $i$ 个数 $a_i$ 表示每个礼物带来的快乐程度。", "outputFormat": "输出一个整数，表示沃瓦所选择的礼物的总快乐程度，不包括给玛莎的礼物。", "hint": "在样例 $1$ 中，沃瓦不需要给玛莎任何礼物，因此他将选择 $l = 3, r = 5$，并且所选礼物的总快乐程度为 $5 + (−1) + 7 = 11$。\n\n在样例 $2$ 中，沃瓦将需要将带来最大快乐程度的礼物给玛莎。然后，他仍然会选择 $l = 3, r = 5$，但总共的快乐程度是 $5 + (−1) = 4$。\n\n在样例 $3$ 中，沃瓦需要给玛莎快乐值前二大的礼物。这种情况下，不难发现实际上沃瓦最好的选择方式是只选择两个礼物，然后全部给妹妹玛莎。一个最佳选择是选择 $l = 1, r = 2$。此时总快乐程度为 $0$。\n\n本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $7$ | $n\\le200$ |\n| $2$ | $8$ | $n\\le1000$ |\n| $3$ | $10$ | $n\\le6000$ |\n| $4$ | $8$ | $k=0$ |\n| $5$ | $14$ | $k=1$ |\n| $6$ | $39$ | $n\\le80000$ |\n| $7$ | $14$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 200000, 0 \\le k \\le \\min(100, n),−10^9 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2022] 礼物 (Day 2)", "background": "翻译自 [ROIR 2022 D2T4](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day2.pdf)。\n\n圣诞老人让沃瓦选择一个礼物。\n\n在沃瓦面前有 $n$ 个礼物排成一行。每个礼物给沃瓦带来的快乐程度值用一个整数表示，第 $i$ 个礼物的值为 $a_i$。快乐程度可以是正数、负数或零。\n\n圣诞老人让沃瓦选择两个整数 $l$ 和 $r$，满足 $1 \\le l \\le r \\le n$。沃瓦需要选择从 $l$ 到 $r$ 之间的所有礼物。然而，在所选的礼物中，沃瓦必须把具有前 $k$ 大快乐程度值的 $k$ 个礼物给他的妹妹玛莎。", "description": "帮助沃瓦选择 $l$ 和 $r$，使得 $1 \\le l \\le r \\le n,r - l + 1 \\ge k$，并且他得到的礼物的总快乐程度最大化（不包括给妹妹的礼物）。", "inputFormat": "第一行输入两个整数 $n$ 和 $k$，表示放在沃瓦面前的礼物数量和需要给玛莎的礼物数量。\n\n第二行输入 $n$ 个整数，用空格分隔，第 $i$ 个数 $a_i$ 表示每个礼物带来的快乐程度。", "outputFormat": "输出一个整数，表示沃瓦所选择的礼物的总快乐程度，不包括给玛莎的礼物。", "hint": "在样例 $1$ 中，沃瓦不需要给玛莎任何礼物，因此他将选择 $l = 3, r = 5$，并且所选礼物的总快乐程度为 $5 + (−1) + 7 = 11$。\n\n在样例 $2$ 中，沃瓦将需要将带来最大快乐程度的礼物给玛莎。然后，他仍然会选择 $l = 3, r = 5$，但总共的快乐程度是 $5 + (−1) = 4$。\n\n在样例 $3$ 中，沃瓦需要给玛莎快乐值前二大的礼物。这种情况下，不难发现实际上沃瓦最好的选择方式是只选择两个礼物，然后全部给妹妹玛莎。一个最佳选择是选择 $l = 1, r = 2$。此时总快乐程度为 $0$。\n\n本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $7$ | $n\\le200$ |\n| $2$ | $8$ | $n\\le1000$ |\n| $3$ | $10$ | $n\\le6000$ |\n| $4$ | $8$ | $k=0$ |\n| $5$ | $14$ | $k=1$ |\n| $6$ | $39$ | $n\\le80000$ |\n| $7$ | $14$ | 无 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 200000, 0 \\le k \\le \\min(100, n),−10^9 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10094", "type": "P", "difficulty": 2, "samples": [["3\n2 2 1 2\n1 2 2 3\n3 5 5 12", "0 1\n-1\n2 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "2023", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2023] 矩形分割 (Day 1)", "background": "翻译自 [ROIR 2023 D1T1](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day1.pdf)。", "description": "有一个大小为 $a\\times b$ 的由单位方格组成的矩形，你需要通过 $k$ 次垂直或水平的切割将其分成 $m$ 个小矩形。小矩形大小不一定要相等。\n\n每次切割不允许切割一半，必须从一边切到另外一边。只允许在网格线上进行切割。", "inputFormat": "第一行输入一个整数 $t$，表示测试数据的组数。\n\n接下来的 $t$ 行，每行一组测试数据。每组数据有四个整数 $a,b,k,m$，分别表示矩形的大小（长和宽），要求的切割次数和要求切成的小矩形数量。", "outputFormat": "对于每组数据，在一行中输出能够将其切割成 $m$ 个小矩形的水平切割次数 $h$（$0 \\le h < a$）和垂直切割次数 $v$（$0 \\le v < b$）。如果可以以多种方式进行切割，则输出水平切割次数较少的方式。如果无法按要求进行切割，则输出 `-1`。", "hint": "本题使用捆绑测试。\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $18$ | $a=1$ |\n| $2$ | $19$ | $m\\le10^5$ |\n| $3$ | $20$ | $1\\le k\\le10^5$ |\n| $4$ | $21$ | $m\\le10^9$ |\n| $5$ | $22$ | 无 |\n\n所有数据均满足 $1 \\le t \\le 100$，$1 \\le a, b \\le 10^9$，$0 \\le k \\le 2 \\times 10^9$，$1 \\le m \\le 10^{18}$，且 $k < m$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2023] 矩形分割 (Day 1)", "background": "翻译自 [ROIR 2023 D1T1](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day1.pdf)。", "description": "有一个大小为 $a\\times b$ 的由单位方格组成的矩形，你需要通过 $k$ 次垂直或水平的切割将其分成 $m$ 个小矩形。小矩形大小不一定要相等。\n\n每次切割不允许切割一半，必须从一边切到另外一边。只允许在网格线上进行切割。", "inputFormat": "第一行输入一个整数 $t$，表示测试数据的组数。\n\n接下来的 $t$ 行，每行一组测试数据。每组数据有四个整数 $a,b,k,m$，分别表示矩形的大小（长和宽），要求的切割次数和要求切成的小矩形数量。", "outputFormat": "对于每组数据，在一行中输出能够将其切割成 $m$ 个小矩形的水平切割次数 $h$（$0 \\le h < a$）和垂直切割次数 $v$（$0 \\le v < b$）。如果可以以多种方式进行切割，则输出水平切割次数较少的方式。如果无法按要求进行切割，则输出 `-1`。", "hint": "本题使用捆绑测试。\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $18$ | $a=1$ |\n| $2$ | $19$ | $m\\le10^5$ |\n| $3$ | $20$ | $1\\le k\\le10^5$ |\n| $4$ | $21$ | $m\\le10^9$ |\n| $5$ | $22$ | 无 |\n\n所有数据均满足 $1 \\le t \\le 100$，$1 \\le a, b \\le 10^9$，$0 \\le k \\le 2 \\times 10^9$，$1 \\le m \\le 10^{18}$，且 $k < m$。", "locale": "zh-CN"}}}
{"pid": "P10095", "type": "P", "difficulty": 3, "samples": [["5\n2\n7\n8\n40\n64", "1\n0\n2\n2\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "数学", "递归", "2023", "Special Judge", "枚举", "深度优先搜索 DFS", "Fibonacci 数列", "ROIR（俄罗斯）"], "title": "[ROIR 2023] 斐波那契乘积 (Day 1)", "background": "翻译自 [ROIR 2023 D1T2](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day1.pdf)。\n\n斐波那契数指斐波那契数列（$f_0=1,f_1=1,f_i=f_{i-2}+f_{i-1}$）中出现的数。", "description": "给定一个自然数 $n$，求出将其表示为若干个大于 $1$ 的斐波那契数的乘积的方案数。", "inputFormat": "第一行一个数 $t$，表示数据组数。\n\n接下来 $t$ 行，每行输入一个数 $n$。", "outputFormat": "对于每组测试数据，输出一个数表示答案。", "hint": "样例解释：\n- $2=2$。\n- $7$ 无法被表示为斐波那契乘积。\n- $8=8=2\\times2\\times2$。\n- $40=5\\times8=2\\times2\\times2\\times5$。\n- $64=8\\times8=2\\times2\\times2\\times8=2\\times2\\times2\\times2\\times2\\times2$。\n\n本题使用捆绑测试。\n\n| 子任务编号 | 分值 | $2\\le n\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $15$ | $100$ |\n| $2$ | $17$ | $10^5$ |\n| $3$ | $9$ | $n$ 是 $2$ 的整数次幂 |\n| $4$ | $38$ | $10^9$ |\n| $5$ | $21$ | $10^{18}$ |\n\n对于所有数据，$1\\le t\\le50$，$2\\le n\\le10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2023] 斐波那契乘积 (Day 1)", "background": "翻译自 [ROIR 2023 D1T2](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day1.pdf)。\n\n斐波那契数指斐波那契数列（$f_0=1,f_1=1,f_i=f_{i-2}+f_{i-1}$）中出现的数。", "description": "给定一个自然数 $n$，求出将其表示为若干个大于 $1$ 的斐波那契数的乘积的方案数。", "inputFormat": "第一行一个数 $t$，表示数据组数。\n\n接下来 $t$ 行，每行输入一个数 $n$。", "outputFormat": "对于每组测试数据，输出一个数表示答案。", "hint": "样例解释：\n- $2=2$。\n- $7$ 无法被表示为斐波那契乘积。\n- $8=8=2\\times2\\times2$。\n- $40=5\\times8=2\\times2\\times2\\times5$。\n- $64=8\\times8=2\\times2\\times2\\times8=2\\times2\\times2\\times2\\times2\\times2$。\n\n本题使用捆绑测试。\n\n| 子任务编号 | 分值 | $2\\le n\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $15$ | $100$ |\n| $2$ | $17$ | $10^5$ |\n| $3$ | $9$ | $n$ 是 $2$ 的整数次幂 |\n| $4$ | $38$ | $10^9$ |\n| $5$ | $21$ | $10^{18}$ |\n\n对于所有数据，$1\\le t\\le50$，$2\\le n\\le10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P10096", "type": "P", "difficulty": 5, "samples": [["1 5\nE 2\nN 2\nW 4\nS 4\nE 4", "17"], ["3 4\nW 2\nN 1\nW 1\nN 2", "27"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "2023", "离散化", "Special Judge", "扫描线", "ROIR（俄罗斯）"], "title": "[ROIR 2023] 扫地机器人 (Day 1)", "background": "翻译自 [ROIR 2023 D1T3](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day1.pdf)。\n\n一个扫地机器人正在清洁一个二维坐标平面。扫地机器人是一个边长 $k\\times k$ 的正方形，边与坐标轴平行。初始时，扫地机器人左下角位于 $(0,0)$，右上角位于 $(k,k)$。", "description": "给定一个由 $n$ 个移动操作组成的序列，第 $i$ 个移动操作由方向 $d_i$（`N` 表示向上，增加 $y$ 坐标；`E` 表示向右，增加 $x$ 坐标；`W` 表示向左，减小 $x$ 坐标；`S` 表示向下，减小 $y$ 坐标）和距离 $a_i$（机器人移动的距离）组成。根据给定的机器人移动操作，计算清扫的总面积（被机器人覆盖过的点就算被清扫过的点）。", "inputFormat": "第一行包含两个整数，机器人的大小 $k$ 和操作数量 $n$。\n\n接下来的 $n$ 行中，每行包含一个移动操作和对应的距离 $a_i$。移动操作用字母 $d_i$ 表示（`N` 即向上，`E` 即向右，`W` 即向左，`S` 即向下），且距离 $a_i$ 是一个整数。", "outputFormat": "输出机器人清扫的总面积。", "hint": "样例解释：下图是两个样例中机器人的移动情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v8w6xnzb.png)\n\n#### 数据规模和约定\n\n**本题使用捆绑测试。**\n\n|子任务编号|分值  |$k$       |$n$       |$a_i$     |\n|:---:|:--:|:--------:|:--------:|:--------:|\n|$1$  |$9$ |$= 1$     |$\\le 10$  |$\\le 10$  |\n|$2$  |$10$|$\\le 10$  |^         |$\\le 100$ |\n|$3$  |$11$|$\\le 1000$|$\\le 1000$|$= 1$     |\n|$4$  |$8$ |$\\le 10^4$|$\\le 10^5$|$= k$     |\n|$5$  |$14$|$=1$      |$\\le 1000$|$\\le 10^9$|\n|$6$  |$15$|$\\le 10^4$|^         |^         |\n|$7$  |$16$|$= 1$     |$\\le 10^5$|^         |\n|$8$  |$17$|$\\le 10^4$|^         |^         |\n\n\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 10^4$，$1 \\le n \\le 10^5$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2023] 扫地机器人 (Day 1)", "background": "翻译自 [ROIR 2023 D1T3](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day1.pdf)。\n\n一个扫地机器人正在清洁一个二维坐标平面。扫地机器人是一个边长 $k\\times k$ 的正方形，边与坐标轴平行。初始时，扫地机器人左下角位于 $(0,0)$，右上角位于 $(k,k)$。", "description": "给定一个由 $n$ 个移动操作组成的序列，第 $i$ 个移动操作由方向 $d_i$（`N` 表示向上，增加 $y$ 坐标；`E` 表示向右，增加 $x$ 坐标；`W` 表示向左，减小 $x$ 坐标；`S` 表示向下，减小 $y$ 坐标）和距离 $a_i$（机器人移动的距离）组成。根据给定的机器人移动操作，计算清扫的总面积（被机器人覆盖过的点就算被清扫过的点）。", "inputFormat": "第一行包含两个整数，机器人的大小 $k$ 和操作数量 $n$。\n\n接下来的 $n$ 行中，每行包含一个移动操作和对应的距离 $a_i$。移动操作用字母 $d_i$ 表示（`N` 即向上，`E` 即向右，`W` 即向左，`S` 即向下），且距离 $a_i$ 是一个整数。", "outputFormat": "输出机器人清扫的总面积。", "hint": "样例解释：下图是两个样例中机器人的移动情况。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v8w6xnzb.png)\n\n#### 数据规模和约定\n\n**本题使用捆绑测试。**\n\n|子任务编号|分值  |$k$       |$n$       |$a_i$     |\n|:---:|:--:|:--------:|:--------:|:--------:|\n|$1$  |$9$ |$= 1$     |$\\le 10$  |$\\le 10$  |\n|$2$  |$10$|$\\le 10$  |^         |$\\le 100$ |\n|$3$  |$11$|$\\le 1000$|$\\le 1000$|$= 1$     |\n|$4$  |$8$ |$\\le 10^4$|$\\le 10^5$|$= k$     |\n|$5$  |$14$|$=1$      |$\\le 1000$|$\\le 10^9$|\n|$6$  |$15$|$\\le 10^4$|^         |^         |\n|$7$  |$16$|$= 1$     |$\\le 10^5$|^         |\n|$8$  |$17$|$\\le 10^4$|^         |^         |\n\n\n\n对于 $100\\%$ 的数据，$1 \\le k \\le 10^4$，$1 \\le n \\le 10^5$，$1 \\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10097", "type": "P", "difficulty": 6, "samples": [["6 4\n-1 -1\n1 -2\n4 -2\n2 -4\n2 3\n-4 -5", "GGBBRG"], ["2 1\n1 1\n2 2", "GG"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2023] 彩点 (Day 1)", "background": "翻译自 [ROIR 2023 D1T4](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day1.pdf)。\n\n平面上有 $n$ 个点，分别是 $P_1,P_2,P_3,\\dots，P_n$。第 $i$ 个点的坐标为 $(x_i,y_i)$。\n\n选择两个点 $P_i,P_j$（$i\\ne j$）。设 $P_i$ 为起始点，$P_j$ 为终止点。**以终止点 $P_j$ 为中心**，从向量 $\\overrightarrow{P_iP_j}$ **的方向**开始按照逆时针顺序将除 $P_j$ 以外的点进行排序（角度相同时按照到点 $P_j$ 的距离升序排序）。假设排序后的第 $t$ 个点为 $P_k$，则继续重复操作，设 $P_j$ 为起始点，$P_k$ 为终止点，按照相同的方法重新排序并计算新的终止点的编号。这个过程循环进行。\n\n在下图中，刚开始时 $n=6,t=4,i=1,j=2$。按照顺序将除了 $P_2$ 以外的点排序，结果是 $P_3,P_5,P_1,P_6,P_4$，所以下一个终止点应该是 $P_6$，起始点是 $P_2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6wd9qkr.png)\n\n此时 $n=6,t=4,i=2,j=6$。继续按照规则排序，如左下图，结果是 $P_4,P_3,P_2,P_1,P_5$。所以下一个终止点是 $P_1$，起始点是 $P_6$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n2mrm47v.png)\n\n此时 $n=6,t=4,i=6,j=1$。继续按照规则排序，如右上图，结果是 $P_5,P_6,P_4,P_2,P_3$。所以下一个终止点是 $P_2$，起始点是 $P_1$。此时就回到刚开始的情况，进入了一个循环。", "description": "我们将 $n$ 个点中的每个点涂上三种颜色之一。第 $i$ 个点的颜色如下确定：\n\n- 如果存在点 $j$，选取点 $i$ 作为起始点，点 $j$ 作为终止点，在上面的过程中点 $i$ 会无数次成为起始点，则将点 $i$ 涂成绿色。\n- 如果点 $i$ 没有涂成绿色并且存在点 $j$，选取点 $i$ 作为起始点，点 $j$ 作为终止点，在上面的过程中点 $i$ 至少还能成为起始点一次，则将点 $i$ 涂成蓝色。\n- 如果点 $i$ 既不是绿色也不是蓝色，则将点 $i$ 涂成红色。\n\n对于每个点，确定它应该涂成哪种颜色。", "inputFormat": "第一行包含两个整数 $n$ 和 $t$。\n\n接下来的 $n$ 行，每行包含两个整数 $x_i$ 和 $y_i$。保证没有两个点重合。", "outputFormat": "输出一行，包含 $n$ 个字符，字符串的第 $i$ 个字符表示第 $i$ 个点的颜色。\n\n绿色点用字母 `G` 表示，蓝色点用字母 `B` 表示，红色点用字母 `R` 表示。", "hint": "样例 $1$ 解释：\n\n在前面举的例子中已经知道 $P_1,P_2,P_6$ 构成一个循环，这三个点肯定会被无限次访问，所以应被涂上绿色。\n\n当起始点是 $P_3$ 时，可以令终止点为 $P_1$，排序后 $P_3$ 正好是第四个，这样 $P_3$ 就重回起始点了，如下图。所以应该涂蓝。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2ftwju5s.png)\n\n当起始点是 $P_4$ 时，可以选择 $P_5$ 为终止点，排序后 $P_4$ 正好是第四个。所以 $P_4$ 可以涂蓝。当 $P_5$ 是起始点时，易得它既不能被涂上绿色也不能被涂上蓝色，所以涂红。\n\n本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $n\\le10$，所有点共线 |\n| $2$ | $15$ | 所有点共线 |\n| $3$ | $10$ | $n\\le10$，没有蓝色点 |\n| $4$ | $10$ | $n\\le10$ |\n| $5$ | $15$ | $n\\le100$，没有蓝色点 |\n| $6$ | $15$ | $n\\le100$ |\n| $7$ | $5$ | $n\\ge3$，所有点构成一个严格凸 $n$ 边形，且按照逆时针顺序输入 |\n| $8$ | $20$ | 无 |\n\n对于全部数据，$2 \\le n \\le 1 000, 1 \\le t \\le n−1,−10^9 \\le x_i, y_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2023] 彩点 (Day 1)", "background": "翻译自 [ROIR 2023 D1T4](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day1.pdf)。\n\n平面上有 $n$ 个点，分别是 $P_1,P_2,P_3,\\dots，P_n$。第 $i$ 个点的坐标为 $(x_i,y_i)$。\n\n选择两个点 $P_i,P_j$（$i\\ne j$）。设 $P_i$ 为起始点，$P_j$ 为终止点。**以终止点 $P_j$ 为中心**，从向量 $\\overrightarrow{P_iP_j}$ **的方向**开始按照逆时针顺序将除 $P_j$ 以外的点进行排序（角度相同时按照到点 $P_j$ 的距离升序排序）。假设排序后的第 $t$ 个点为 $P_k$，则继续重复操作，设 $P_j$ 为起始点，$P_k$ 为终止点，按照相同的方法重新排序并计算新的终止点的编号。这个过程循环进行。\n\n在下图中，刚开始时 $n=6,t=4,i=1,j=2$。按照顺序将除了 $P_2$ 以外的点排序，结果是 $P_3,P_5,P_1,P_6,P_4$，所以下一个终止点应该是 $P_6$，起始点是 $P_2$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x6wd9qkr.png)\n\n此时 $n=6,t=4,i=2,j=6$。继续按照规则排序，如左下图，结果是 $P_4,P_3,P_2,P_1,P_5$。所以下一个终止点是 $P_1$，起始点是 $P_6$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n2mrm47v.png)\n\n此时 $n=6,t=4,i=6,j=1$。继续按照规则排序，如右上图，结果是 $P_5,P_6,P_4,P_2,P_3$。所以下一个终止点是 $P_2$，起始点是 $P_1$。此时就回到刚开始的情况，进入了一个循环。", "description": "我们将 $n$ 个点中的每个点涂上三种颜色之一。第 $i$ 个点的颜色如下确定：\n\n- 如果存在点 $j$，选取点 $i$ 作为起始点，点 $j$ 作为终止点，在上面的过程中点 $i$ 会无数次成为起始点，则将点 $i$ 涂成绿色。\n- 如果点 $i$ 没有涂成绿色并且存在点 $j$，选取点 $i$ 作为起始点，点 $j$ 作为终止点，在上面的过程中点 $i$ 至少还能成为起始点一次，则将点 $i$ 涂成蓝色。\n- 如果点 $i$ 既不是绿色也不是蓝色，则将点 $i$ 涂成红色。\n\n对于每个点，确定它应该涂成哪种颜色。", "inputFormat": "第一行包含两个整数 $n$ 和 $t$。\n\n接下来的 $n$ 行，每行包含两个整数 $x_i$ 和 $y_i$。保证没有两个点重合。", "outputFormat": "输出一行，包含 $n$ 个字符，字符串的第 $i$ 个字符表示第 $i$ 个点的颜色。\n\n绿色点用字母 `G` 表示，蓝色点用字母 `B` 表示，红色点用字母 `R` 表示。", "hint": "样例 $1$ 解释：\n\n在前面举的例子中已经知道 $P_1,P_2,P_6$ 构成一个循环，这三个点肯定会被无限次访问，所以应被涂上绿色。\n\n当起始点是 $P_3$ 时，可以令终止点为 $P_1$，排序后 $P_3$ 正好是第四个，这样 $P_3$ 就重回起始点了，如下图。所以应该涂蓝。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2ftwju5s.png)\n\n当起始点是 $P_4$ 时，可以选择 $P_5$ 为终止点，排序后 $P_4$ 正好是第四个。所以 $P_4$ 可以涂蓝。当 $P_5$ 是起始点时，易得它既不能被涂上绿色也不能被涂上蓝色，所以涂红。\n\n本题使用捆绑测试。\n\n| 子任务 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $10$ | $n\\le10$，所有点共线 |\n| $2$ | $15$ | 所有点共线 |\n| $3$ | $10$ | $n\\le10$，没有蓝色点 |\n| $4$ | $10$ | $n\\le10$ |\n| $5$ | $15$ | $n\\le100$，没有蓝色点 |\n| $6$ | $15$ | $n\\le100$ |\n| $7$ | $5$ | $n\\ge3$，所有点构成一个严格凸 $n$ 边形，且按照逆时针顺序输入 |\n| $8$ | $20$ | 无 |\n\n对于全部数据，$2 \\le n \\le 1 000, 1 \\le t \\le n−1,−10^9 \\le x_i, y_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10098", "type": "P", "difficulty": 2, "samples": [["1 6\n4 1 2", "5"], ["3 15\n2 3 3\n4 2 1\n5 2 2", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "二分", "2023", "Special Judge", "枚举", "ROIR（俄罗斯）"], "title": "[ROIR 2023] 地铁建设 (Day 2)", "background": "翻译自 [ROIR 2023 D2T1](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day2.pdf)。\n\n用于铺设地铁隧道的盾构机有 $n$ 个发动机。所有发动机是并联的，所以所有发动机两端的电压都相同。\n\n每个发动机有两种模式，假设所有发动机接收到的电压都为 $x$，则当 $x\\le z_i$ 时第 $i$ 个发动机在第一模式下工作，否则它在第二模式下工作。\n\n第 $i$ 个发动机在第一模式下的单位电流为 $a_i$，在第二模式下的单位电流为 $b_i$。所以，根据 $P=UI$，当发动机处于第一模式时，每增加 $1$ 单位电压，其功率增加 $a_i$ 单位；当发动机处于第二模式时，每增加 $1$ 单位电压，其功率增加 $b_i$ 单位。换句话说，当电压为 $x$ 单位电压，如果第 $i$ 个发动机处于第一模式下，它以 $a_i\\times x$ 的单位功率运行；如果处于第二模式下，它以 $a_i\\times z_i + b_i\\times(x - z_i)$ 的单位功率运行。", "description": "最少需要提供多大的电压（电压需要是整数），才能使所有发动机的总功率大于或等于 $p$？", "inputFormat": "第一行输入两个整数 $n$ 和 $p$。\n\n接下来的 $n$ 行，每行包含三个整数 $z_i,a_i,b_i$。", "outputFormat": "输出一个整数表示最小电压。", "hint": "本题使用捆绑测试。\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | $n=1$ |\n| $2$ | $20$ | $a_i,b_i\\le100,p\\le10^5$ |\n| $3$ | $20$ | 所有 $z_i$ 均相等 |\n| $4$ | $20$ | $n\\le2$ |\n| $5$ | $20$ |  |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100,1 \\le p \\le 10^{12},1 \\le z_i \\le 10^9,1 \\le a_i,b_i \\le 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2023] 地铁建设 (Day 2)", "background": "翻译自 [ROIR 2023 D2T1](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day2.pdf)。\n\n用于铺设地铁隧道的盾构机有 $n$ 个发动机。所有发动机是并联的，所以所有发动机两端的电压都相同。\n\n每个发动机有两种模式，假设所有发动机接收到的电压都为 $x$，则当 $x\\le z_i$ 时第 $i$ 个发动机在第一模式下工作，否则它在第二模式下工作。\n\n第 $i$ 个发动机在第一模式下的单位电流为 $a_i$，在第二模式下的单位电流为 $b_i$。所以，根据 $P=UI$，当发动机处于第一模式时，每增加 $1$ 单位电压，其功率增加 $a_i$ 单位；当发动机处于第二模式时，每增加 $1$ 单位电压，其功率增加 $b_i$ 单位。换句话说，当电压为 $x$ 单位电压，如果第 $i$ 个发动机处于第一模式下，它以 $a_i\\times x$ 的单位功率运行；如果处于第二模式下，它以 $a_i\\times z_i + b_i\\times(x - z_i)$ 的单位功率运行。", "description": "最少需要提供多大的电压（电压需要是整数），才能使所有发动机的总功率大于或等于 $p$？", "inputFormat": "第一行输入两个整数 $n$ 和 $p$。\n\n接下来的 $n$ 行，每行包含三个整数 $z_i,a_i,b_i$。", "outputFormat": "输出一个整数表示最小电压。", "hint": "本题使用捆绑测试。\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | $n=1$ |\n| $2$ | $20$ | $a_i,b_i\\le100,p\\le10^5$ |\n| $3$ | $20$ | 所有 $z_i$ 均相等 |\n| $4$ | $20$ | $n\\le2$ |\n| $5$ | $20$ |  |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100,1 \\le p \\le 10^{12},1 \\le z_i \\le 10^9,1 \\le a_i,b_i \\le 10^4$。", "locale": "zh-CN"}}}
{"pid": "P10099", "type": "P", "difficulty": 5, "samples": [["3 2\n1 2", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "动态规划优化", "状压 DP", "ROIR（俄罗斯）"], "title": "[ROIR 2023] 美丽序列 (Day 2)", "background": "翻译自 [ROIR 2023 D2T2](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day2.pdf)。\n\n给定一个整数集合 $A$，其中的元素都在 $1$ 到 $8$ 之间。\n\n一个由 $n$ 个在集合 $A$ 中的整数组成的序列 $[a_1, a_2, \\dots , a_n]$，如果对于任意数字 $x$，序列中等于 $x$ 的所有元素彼此之间的距离不小于 $x$，则称这个序列是美丽的。换句话说，如果对于任意数字 $x$ 和任意的 $1 \\le i < j \\le n$，只要 $a_i = a_j = x$，则不等式 $j - i \\ge x$ 必然成立，那么这样的序列 $a$ 就被称为美丽的序列。\n\n例如，当 $A=\\{1,2,3,4,5\\}$ 时，序列 $[2,3,2,4,3,1,1,4]$ 是美丽的，而 $[1,1,4,5,1,4]$ 不是美丽的，因为这个序列中的两个 $4$ 之间的距离是 $3$。", "description": "给定数字 $n$ 和集合 $A$，求出长度为 $n$ 的符合要求的美丽的序列的个数，对 $10^9 + 7$ 取模。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$，分别表示序列的长度和集合 $A$ 的元素个数。\n\n输入的第二行按升序给出了 $m$ 个互不相同的小于等于 $8$ 的正整数，表示集合 $A$ 的元素。", "outputFormat": "输出一个整数，表示美丽序列的数量除以 $10^9 + 7$ 的余数。", "hint": "在样例中，美丽的序列有 $[1, 1, 1],[1, 1, 2],[1, 2, 1],[2, 1, 1],[2, 1, 2]$。序列 $[2, 2, 2],[1, 2, 2],[2, 2, 1]$ 不是美丽的，因为这三个序列中都有两个数值为 $2$ 的元素相距为 $1$。\n\n本题使用捆绑测试。\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $5$ | $A=\\{1,2\\},n\\le10$ |\n| $2$ | $10$ | $A=\\{1,2\\},n\\le30$ |\n| $3$ | $15$ | $A=\\{1,2\\}$ |\n| $4$ | $20$ | $A=\\{1,k\\}$（$2\\le k\\le8$） |\n| $5$ | $30$ | $A$ 中没有超过 $5$ 的元素 |\n| $6$ | $20$ | 无特殊性质 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100,1 \\le m \\le 8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2023] 美丽序列 (Day 2)", "background": "翻译自 [ROIR 2023 D2T2](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day2.pdf)。\n\n给定一个整数集合 $A$，其中的元素都在 $1$ 到 $8$ 之间。\n\n一个由 $n$ 个在集合 $A$ 中的整数组成的序列 $[a_1, a_2, \\dots , a_n]$，如果对于任意数字 $x$，序列中等于 $x$ 的所有元素彼此之间的距离不小于 $x$，则称这个序列是美丽的。换句话说，如果对于任意数字 $x$ 和任意的 $1 \\le i < j \\le n$，只要 $a_i = a_j = x$，则不等式 $j - i \\ge x$ 必然成立，那么这样的序列 $a$ 就被称为美丽的序列。\n\n例如，当 $A=\\{1,2,3,4,5\\}$ 时，序列 $[2,3,2,4,3,1,1,4]$ 是美丽的，而 $[1,1,4,5,1,4]$ 不是美丽的，因为这个序列中的两个 $4$ 之间的距离是 $3$。", "description": "给定数字 $n$ 和集合 $A$，求出长度为 $n$ 的符合要求的美丽的序列的个数，对 $10^9 + 7$ 取模。", "inputFormat": "输入的第一行包含两个整数 $n$ 和 $m$，分别表示序列的长度和集合 $A$ 的元素个数。\n\n输入的第二行按升序给出了 $m$ 个互不相同的小于等于 $8$ 的正整数，表示集合 $A$ 的元素。", "outputFormat": "输出一个整数，表示美丽序列的数量除以 $10^9 + 7$ 的余数。", "hint": "在样例中，美丽的序列有 $[1, 1, 1],[1, 1, 2],[1, 2, 1],[2, 1, 1],[2, 1, 2]$。序列 $[2, 2, 2],[1, 2, 2],[2, 2, 1]$ 不是美丽的，因为这三个序列中都有两个数值为 $2$ 的元素相距为 $1$。\n\n本题使用捆绑测试。\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $5$ | $A=\\{1,2\\},n\\le10$ |\n| $2$ | $10$ | $A=\\{1,2\\},n\\le30$ |\n| $3$ | $15$ | $A=\\{1,2\\}$ |\n| $4$ | $20$ | $A=\\{1,k\\}$（$2\\le k\\le8$） |\n| $5$ | $30$ | $A$ 中没有超过 $5$ 的元素 |\n| $6$ | $20$ | 无特殊性质 |\n\n对于 $100\\%$ 的数据，$1 \\le n \\le 100,1 \\le m \\le 8$。", "locale": "zh-CN"}}}
{"pid": "P10100", "type": "P", "difficulty": 5, "samples": [["6 4\n1 4 6 5 2 3\n3 1\n2 2\n6 3\n4 3", "1\n2\n1\n2"], ["5 3\n5 2 3 4 1\n2 3\n4 4\n3 2", "0\n1\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "ROIR（俄罗斯）"], "title": "[ROIR 2023] 石头 (Day 2)", "background": "翻译自 [ROIR 2023 D2T3](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day2.pdf)。\n\n", "description": "Bob 面前排列着 $n$ 个黑色石头，从 $1$ 到 $n$ 编号。第 $i$ 个石头上写有一个整数 $a_i$，$n$ 个石头上写的整数构成了一个排列。我们称第 $i$ 个石头的相邻石头为第 $(i-1)$ 个和第 $(i+1)$ 个石头（如果存在的话）。\n\nBob 按照以下步骤进行 $n$ 次操作：\n\n- 在第一步，选择任意的 $i$（$1\\le i\\le n$），并将第 $i$ 个石头涂成白色。\n- 在第 $2$ 到第 $n$ 步，选取相邻石头中至少有一个白色石头的黑色石头中的 $a_i$ 最小的石头 $j$（即，可能有很多个黑色石头满足它的相邻石头中至少有一个白色石头，但是要选取其中 $a_i$ 最小的那个），并将其涂成白色。\n\n很容易看出，在执行完所有步骤后，$n$ 个石头都是白色的。\n\nAlice 选择了 $q$ 对值 $p_j$ 和 $k_j$。对于每对 $p$ 和 $k$ 的值，她想知道有多少种不同的选择第一步时将哪块石头涂成白色的方式，使得第 $p$ 块石头在第 $k$ 步变成白色。\n\n帮助 Bob 回答 Alice 的 $q$ 个查询。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$，分别表示石头的数量和查询的数量。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示写在石头上的整数。\n\n接下来的 $q$ 行，每行包含一对整数 $p_j$ 和 $k_j$。", "outputFormat": "对于每个查询，输出一个整数，表示查询的答案。", "hint": "下面的样例解释中加粗的数是被涂成白色的。\n\n在第一个样例中：\n\n- 如果第一步选择第 $1$ 块石头：\n  - 第 $1$ 步：$[\\bold1, \\gray4, \\gray6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $2$ 步：$[\\bold1, \\bold4, \\gray6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $3$ 步：$[\\bold1, \\bold4, \\bold6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $4$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\gray2, \\gray3]$；\n  - 第 $5$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\gray3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n- 如果第一步选择第 $2$ 块石头：\n  - 第 $1$ 步：$[\\gray1, \\bold4, \\gray6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $2$ 步：$[\\bold1, \\bold4, \\gray6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $3$ 步：$[\\bold1, \\bold4, \\bold6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $4$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\gray2, \\gray3]$；\n  - 第 $5$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\gray3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n- 如果第一步选择第 $3$ 块石头：\n  - 第 $1$ 步：$[\\gray1, \\gray4, \\bold6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $2$ 步：$[\\gray1, \\bold4, \\bold6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $3$ 步：$[\\bold1, \\bold4, \\bold6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $4$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\gray2, \\gray3]$；\n  - 第 $5$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\gray3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n- 如果第一步选择第 $4$ 块石头：\n  - 第 $1$ 步：$[\\gray1, \\gray4, \\gray6, \\bold5, \\gray2, \\gray3]$；\n  - 第 $2$ 步：$[\\gray1, \\gray4, \\gray6, \\bold5, \\bold2, \\gray3]$；\n  - 第 $3$ 步：$[\\gray1, \\gray4, \\gray6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $4$ 步：$[\\gray1, \\gray4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $5$ 步：$[\\gray1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n- 如果第一步选择第 $5$ 块石头：\n  - 第 $1$ 步：$[\\gray1, \\gray4, \\gray6, \\gray5, \\bold2, \\gray3]$；\n  - 第 $2$ 步：$[\\gray1, \\gray4, \\gray6, \\gray5, \\bold2, \\bold3]$；\n  - 第 $3$ 步：$[\\gray1, \\gray4, \\gray6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $4$ 步：$[\\gray1, \\gray4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $5$ 步：$[\\gray1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n- 如果第一步选择第 $6$ 块石头：\n  - 第 $1$ 步：$[\\gray1, \\gray4, \\gray6, \\gray5, \\gray2, \\bold3]$；\n  - 第 $2$ 步：$[\\gray1, \\gray4, \\gray6, \\gray5, \\bold2, \\bold3]$；\n  - 第 $3$ 步：$[\\gray1, \\gray4, \\gray6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $4$ 步：$[\\gray1, \\gray4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $5$ 步：$[\\gray1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n\n本题使用捆绑测试。\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | $n,q\\le300$ |\n| $2$ | $17$ | $n\\le3000$ |\n| $3$ | $12$ | $n\\le50000,q\\le10$ |\n| $4$ | $6$ | $a_i$ 的值递增 |\n| $5$ | $16$ | 所有 $k_i$ 相等 |\n| $6$ | $15$ | 所有 $p_i$ 相等 |\n| $7$ | $14$ | 无特殊性质 |\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5$，$1 \\le q \\le 10^5$，$1 \\le a_i \\le n$ 且所有 $a_i$ 互不相同，$1 \\le p_j,k_j \\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2023] 石头 (Day 2)", "background": "翻译自 [ROIR 2023 D2T3](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day2.pdf)。\n\n", "description": "Bob 面前排列着 $n$ 个黑色石头，从 $1$ 到 $n$ 编号。第 $i$ 个石头上写有一个整数 $a_i$，$n$ 个石头上写的整数构成了一个排列。我们称第 $i$ 个石头的相邻石头为第 $(i-1)$ 个和第 $(i+1)$ 个石头（如果存在的话）。\n\nBob 按照以下步骤进行 $n$ 次操作：\n\n- 在第一步，选择任意的 $i$（$1\\le i\\le n$），并将第 $i$ 个石头涂成白色。\n- 在第 $2$ 到第 $n$ 步，选取相邻石头中至少有一个白色石头的黑色石头中的 $a_i$ 最小的石头 $j$（即，可能有很多个黑色石头满足它的相邻石头中至少有一个白色石头，但是要选取其中 $a_i$ 最小的那个），并将其涂成白色。\n\n很容易看出，在执行完所有步骤后，$n$ 个石头都是白色的。\n\nAlice 选择了 $q$ 对值 $p_j$ 和 $k_j$。对于每对 $p$ 和 $k$ 的值，她想知道有多少种不同的选择第一步时将哪块石头涂成白色的方式，使得第 $p$ 块石头在第 $k$ 步变成白色。\n\n帮助 Bob 回答 Alice 的 $q$ 个查询。", "inputFormat": "第一行包含两个整数 $n$ 和 $q$，分别表示石头的数量和查询的数量。\n\n第二行包含 $n$ 个整数 $a_1,a_2,\\dots,a_n$，表示写在石头上的整数。\n\n接下来的 $q$ 行，每行包含一对整数 $p_j$ 和 $k_j$。", "outputFormat": "对于每个查询，输出一个整数，表示查询的答案。", "hint": "下面的样例解释中加粗的数是被涂成白色的。\n\n在第一个样例中：\n\n- 如果第一步选择第 $1$ 块石头：\n  - 第 $1$ 步：$[\\bold1, \\gray4, \\gray6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $2$ 步：$[\\bold1, \\bold4, \\gray6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $3$ 步：$[\\bold1, \\bold4, \\bold6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $4$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\gray2, \\gray3]$；\n  - 第 $5$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\gray3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n- 如果第一步选择第 $2$ 块石头：\n  - 第 $1$ 步：$[\\gray1, \\bold4, \\gray6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $2$ 步：$[\\bold1, \\bold4, \\gray6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $3$ 步：$[\\bold1, \\bold4, \\bold6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $4$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\gray2, \\gray3]$；\n  - 第 $5$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\gray3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n- 如果第一步选择第 $3$ 块石头：\n  - 第 $1$ 步：$[\\gray1, \\gray4, \\bold6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $2$ 步：$[\\gray1, \\bold4, \\bold6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $3$ 步：$[\\bold1, \\bold4, \\bold6, \\gray5, \\gray2, \\gray3]$；\n  - 第 $4$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\gray2, \\gray3]$；\n  - 第 $5$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\gray3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n- 如果第一步选择第 $4$ 块石头：\n  - 第 $1$ 步：$[\\gray1, \\gray4, \\gray6, \\bold5, \\gray2, \\gray3]$；\n  - 第 $2$ 步：$[\\gray1, \\gray4, \\gray6, \\bold5, \\bold2, \\gray3]$；\n  - 第 $3$ 步：$[\\gray1, \\gray4, \\gray6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $4$ 步：$[\\gray1, \\gray4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $5$ 步：$[\\gray1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n- 如果第一步选择第 $5$ 块石头：\n  - 第 $1$ 步：$[\\gray1, \\gray4, \\gray6, \\gray5, \\bold2, \\gray3]$；\n  - 第 $2$ 步：$[\\gray1, \\gray4, \\gray6, \\gray5, \\bold2, \\bold3]$；\n  - 第 $3$ 步：$[\\gray1, \\gray4, \\gray6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $4$ 步：$[\\gray1, \\gray4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $5$ 步：$[\\gray1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n- 如果第一步选择第 $6$ 块石头：\n  - 第 $1$ 步：$[\\gray1, \\gray4, \\gray6, \\gray5, \\gray2, \\bold3]$；\n  - 第 $2$ 步：$[\\gray1, \\gray4, \\gray6, \\gray5, \\bold2, \\bold3]$；\n  - 第 $3$ 步：$[\\gray1, \\gray4, \\gray6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $4$ 步：$[\\gray1, \\gray4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $5$ 步：$[\\gray1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$；\n  - 第 $6$ 步：$[\\bold1, \\bold4, \\bold6, \\bold5, \\bold2, \\bold3]$。\n\n本题使用捆绑测试。\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $20$ | $n,q\\le300$ |\n| $2$ | $17$ | $n\\le3000$ |\n| $3$ | $12$ | $n\\le50000,q\\le10$ |\n| $4$ | $6$ | $a_i$ 的值递增 |\n| $5$ | $16$ | 所有 $k_i$ 相等 |\n| $6$ | $15$ | 所有 $p_i$ 相等 |\n| $7$ | $14$ | 无特殊性质 |\n\n对于 $100\\%$ 的数据，$2 \\le n \\le 10^5$，$1 \\le q \\le 10^5$，$1 \\le a_i \\le n$ 且所有 $a_i$ 互不相同，$1 \\le p_j,k_j \\le n$。", "locale": "zh-CN"}}}
{"pid": "P10101", "type": "P", "difficulty": 6, "samples": [["0\n4\nabaa\nabca\nccbca\nbacc", "3\n3\n2\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "Special Judge", "ROIR（俄罗斯）"], "title": "[ROIR 2023] 一个普通的字符串问题 (Day 2)", "background": "翻译自 [ROIR 2023 D2T4](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day2.pdf)。\n\n如果对于任意长度为 $2$ 的字符串 $u$，字符串 $s$ 中 $u$ 的出现次数与字符串 $t$ 中 $u$ 的出现次数相同，则两个字符串 $s$ 和 $t$ 称为等效字符串。因此，字符串 `aaaba`、`abaaa` 和 `baaab` 彼此等效（字符串 `aa` 出现两次，字符串 `ab` 出现一次，字符串 `ba` 出现一次，字符串 `bb` 不作为子串出现），而字符串 `cff` 和 `ccf` 则不等效。一个字符串和它本身是等效的。", "description": "在这个问题中，你将会得到 $Q$ 个由字符 `a`、`b` 和 `c` 组成的字符串，对于每个字符串，需要计算与它等效的由字符 `a`、`b` 和 `c` 组成的非空字符串的数量。由于这个数量可能非常大，所以要求对 $10^9 + 7$ 取余。", "inputFormat": "第一行输入一个数 $G$，表示当前子任务的编号。在样例中 $G=0$，本题另设一个分值为 $0$ 的 Subtask 0 来存储样例数据。\n\n第二行输入一个整数 $q$。\n\n接下来 $q$ 行，每行一个字符串。", "outputFormat": "对于每个字符串输出一行一个整数表示答案，记得取模 $10^9+7$。", "hint": "样例说明：\n\n- 字符串 `abaa` 等效于字符串 `abaa`、`aaba`、`baab`；\n- 字符串 `abca` 等效于字符串 `abca`、`bcab`、`cabc`；\n- 字符串 `ccbca` 等效于字符串 `ccbca` 和 `cbcca`；\n- 字符串 `bacc` 只等效于字符串 `bacc`。\n\n本题使用捆绑测试。\n\n$n_i$ 表示第 $i$ 个输入字符串的长度，$L$ 表示所有字符串的长度之和，$w$ 表示所有查询中最大（未取模）的答案。\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 输入数据与样例相同 |\n| $1$ | $11$ | $s$ 中不含 `c` |\n| $2$ | $13$ | $s$ 中 `a` 与 `c` 不相邻 |\n| $3$ | $11$ | $n_i\\le13$ |\n| $4$ | $10$ | $L\\le40$ |\n| $5$ | $9$ | $L\\le60$ |\n| $6$ | $13$ | $L\\le10^5,w\\le100$ |\n| $7$ | $33$ | 无 |\n\n对于 $100\\%$ 数据，$1\\le q\\le10^5$，$L\\le10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROIR 2023] 一个普通的字符串问题 (Day 2)", "background": "翻译自 [ROIR 2023 D2T4](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day2.pdf)。\n\n如果对于任意长度为 $2$ 的字符串 $u$，字符串 $s$ 中 $u$ 的出现次数与字符串 $t$ 中 $u$ 的出现次数相同，则两个字符串 $s$ 和 $t$ 称为等效字符串。因此，字符串 `aaaba`、`abaaa` 和 `baaab` 彼此等效（字符串 `aa` 出现两次，字符串 `ab` 出现一次，字符串 `ba` 出现一次，字符串 `bb` 不作为子串出现），而字符串 `cff` 和 `ccf` 则不等效。一个字符串和它本身是等效的。", "description": "在这个问题中，你将会得到 $Q$ 个由字符 `a`、`b` 和 `c` 组成的字符串，对于每个字符串，需要计算与它等效的由字符 `a`、`b` 和 `c` 组成的非空字符串的数量。由于这个数量可能非常大，所以要求对 $10^9 + 7$ 取余。", "inputFormat": "第一行输入一个数 $G$，表示当前子任务的编号。在样例中 $G=0$，本题另设一个分值为 $0$ 的 Subtask 0 来存储样例数据。\n\n第二行输入一个整数 $q$。\n\n接下来 $q$ 行，每行一个字符串。", "outputFormat": "对于每个字符串输出一行一个整数表示答案，记得取模 $10^9+7$。", "hint": "样例说明：\n\n- 字符串 `abaa` 等效于字符串 `abaa`、`aaba`、`baab`；\n- 字符串 `abca` 等效于字符串 `abca`、`bcab`、`cabc`；\n- 字符串 `ccbca` 等效于字符串 `ccbca` 和 `cbcca`；\n- 字符串 `bacc` 只等效于字符串 `bacc`。\n\n本题使用捆绑测试。\n\n$n_i$ 表示第 $i$ 个输入字符串的长度，$L$ 表示所有字符串的长度之和，$w$ 表示所有查询中最大（未取模）的答案。\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $0$ | $0$ | 输入数据与样例相同 |\n| $1$ | $11$ | $s$ 中不含 `c` |\n| $2$ | $13$ | $s$ 中 `a` 与 `c` 不相邻 |\n| $3$ | $11$ | $n_i\\le13$ |\n| $4$ | $10$ | $L\\le40$ |\n| $5$ | $9$ | $L\\le60$ |\n| $6$ | $13$ | $L\\le10^5,w\\le100$ |\n| $7$ | $33$ | 无 |\n\n对于 $100\\%$ 数据，$1\\le q\\le10^5$，$L\\le10^6$。", "locale": "zh-CN"}}}
{"pid": "P10102", "type": "P", "difficulty": 5, "samples": [["3\n1\n2\n3\n6\n2\n1 2\n3 4\n5 6\n7 8\n19 22\n43 51\n2\n1111111 2222222\n3333333 4444444\n5555555 6666666\n7777777 8888888\n39625305 256038638\n772687616 944903942", "Yes\nNo\nYes"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "广东", "随机化"], "title": "[GDKOI2023 提高组] 矩阵", "background": "", "description": "多次给定三个 $n \\times n$ 的矩阵 $A, B, C$，你需要判断 $A \\times  B$ 在模 $998244353$ 意义下是否等于 $C$。\n其中 $×$ 为矩阵乘法，$C_{i,j} = \\sum_{k=1}^{n}A_{i,k}B_{k,j}$。\n\n本题读入量较大，建议使用快速读入。", "inputFormat": "第 $1$ 行输入一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据第一行为一个正整数 $n$，表示矩阵大小。\n\n接下来 $n$ 行，每行 $n$ 个整数，表示矩阵 $A$。\n\n接下来 $n$ 行，每行 $n$ 个整数，表示矩阵 $B$。\n\n接下来 $n$ 行，每行 $n$ 个整数，表示矩阵 $C$。", "outputFormat": "输出 $T$ 行 Yes 或 No，表示 $A \\times  B$ 在模 $998244353$ 意义下是否等于 $C$。", "hint": "对于 20% 的数据，满足 $\\sum n ≤ 300$。\n\n对于另外 20% 的数据，满足 $A_{i,j} \\ne 0$ 的位置不超过 $n$ 个。\n\n对于 100% 的数据，满足 $1 ≤ T, n ≤ 3000,\\sum n ≤ 3000, 0 ≤ A_{i,j} , B_{i,j} , C_{i,j} < 998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 提高组] 矩阵", "background": "", "description": "多次给定三个 $n \\times n$ 的矩阵 $A, B, C$，你需要判断 $A \\times  B$ 在模 $998244353$ 意义下是否等于 $C$。\n其中 $×$ 为矩阵乘法，$C_{i,j} = \\sum_{k=1}^{n}A_{i,k}B_{k,j}$。\n\n本题读入量较大，建议使用快速读入。", "inputFormat": "第 $1$ 行输入一个正整数 $T$，表示数据组数。\n\n接下来包含 $T$ 组数据，每组数据第一行为一个正整数 $n$，表示矩阵大小。\n\n接下来 $n$ 行，每行 $n$ 个整数，表示矩阵 $A$。\n\n接下来 $n$ 行，每行 $n$ 个整数，表示矩阵 $B$。\n\n接下来 $n$ 行，每行 $n$ 个整数，表示矩阵 $C$。", "outputFormat": "输出 $T$ 行 Yes 或 No，表示 $A \\times  B$ 在模 $998244353$ 意义下是否等于 $C$。", "hint": "对于 20% 的数据，满足 $\\sum n ≤ 300$。\n\n对于另外 20% 的数据，满足 $A_{i,j} \\ne 0$ 的位置不超过 $n$ 个。\n\n对于 100% 的数据，满足 $1 ≤ T, n ≤ 3000,\\sum n ≤ 3000, 0 ≤ A_{i,j} , B_{i,j} , C_{i,j} < 998244353$。", "locale": "zh-CN"}}}
{"pid": "P10103", "type": "P", "difficulty": 7, "samples": [["6\n8 0\n8 4\n100 10\n1000 100\n10000 1000\n100000 10000\n", "14833\n576\n548326276\n694205000\n493811811\n135068319"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "广东"], "title": "[GDKOI2023 提高组] 错排", "background": "", "description": "小 X 最近学习了错排问题，于是开始思考一个关于它的变种问题：有多少个长度为 $n$ 的排列 $p$，满足对\n于 $i \\le m$ 的位置满足 $p_i > m$，且对于所有位置 $i$ 都满足 $p_i \\ne i$？\n\n小 X 一共想出了 $T$ 个这样的问题，你能告诉他每个问题的答案吗？\n\n由于答案可能过大，你只需要求出答案对 $998244353$ 取模后的值即可。", "inputFormat": "第一行输入一个整数 $T$，表示询问组数。\n\n接下来的 $T$ 行，每行输入两个整数 $ n, m$。", "outputFormat": "输出 $T$ 行，每行一个整数表示答案对 $998244353$ 取模后的值。", "hint": "对于 100% 的数据，$0 ≤ T ≤ 2 \\times 10^5$，$0 ≤ m ≤ n ≤ 2 \\times 10^5$。\n\n本题采用子任务捆绑测试。\n\n- Subtask 1 (1pts)：保证 $T = 0$。\n- Subtask 2 (9pts)：保证 $T ≤ 10$，$n, m ≤ 8$。\n- Subtask 3 (10pts)：保证 $m = 0$。\n- Subtask 4 (20pts)：保证 $n, m ≤ 5000$。\n- Subtask 5 (20pts)：保证 $T ≤ 10$。\n- Subtask 6 (40pts)：无特殊性质。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 提高组] 错排", "background": "", "description": "小 X 最近学习了错排问题，于是开始思考一个关于它的变种问题：有多少个长度为 $n$ 的排列 $p$，满足对\n于 $i \\le m$ 的位置满足 $p_i > m$，且对于所有位置 $i$ 都满足 $p_i \\ne i$？\n\n小 X 一共想出了 $T$ 个这样的问题，你能告诉他每个问题的答案吗？\n\n由于答案可能过大，你只需要求出答案对 $998244353$ 取模后的值即可。", "inputFormat": "第一行输入一个整数 $T$，表示询问组数。\n\n接下来的 $T$ 行，每行输入两个整数 $ n, m$。", "outputFormat": "输出 $T$ 行，每行一个整数表示答案对 $998244353$ 取模后的值。", "hint": "对于 100% 的数据，$0 ≤ T ≤ 2 \\times 10^5$，$0 ≤ m ≤ n ≤ 2 \\times 10^5$。\n\n本题采用子任务捆绑测试。\n\n- Subtask 1 (1pts)：保证 $T = 0$。\n- Subtask 2 (9pts)：保证 $T ≤ 10$，$n, m ≤ 8$。\n- Subtask 3 (10pts)：保证 $m = 0$。\n- Subtask 4 (20pts)：保证 $n, m ≤ 5000$。\n- Subtask 5 (20pts)：保证 $T ≤ 10$。\n- Subtask 6 (40pts)：无特殊性质。", "locale": "zh-CN"}}}
{"pid": "P10104", "type": "P", "difficulty": 7, "samples": [["3 1 2\n1 2 3\n1 2\n", "4"], ["4 6 2\n7 11 14 0\n1 2\n1 3\n2 3\n2 4\n4 1\n4 3", "44"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2023", "广东", "容斥原理", "位运算", "集合幂级数，子集卷积"], "title": "[GDKOI2023 提高组] 异或图", "background": "", "description": "给定一张 $n$ 个点 $m$ 条边的无向图和一个长度为 $n$ 的数组 $a_1, a_2, \\cdots , a_n$ 以及一个整数 $C$，你需要求出有多少个长度为 $n$ 的数组 $b$ 满足：\n\n1. $0 ≤ b_i ≤ a_i,\\forall 1 ≤ i ≤ n$。\n2. 对于每条边 $(u, v)$，$b_u \\ne b_v$。\n3. $b_1 ⊕ b_2 ⊕ \\cdots  ⊕ b_n = C$，其中 $\\oplus$ 代表异或。\n\n答案对 $998244353$ 取模。\n", "inputFormat": "第一行输入三个整数 $n, m, c$。\n\n第二行输入 $n$ 个整数 $a_1, a_2, \\cdots , a_n$。\n\n接下来的 $m$ 行，每行输入两个正整数 $u, v$，表示一条无向边。", "outputFormat": "一行一个整数表示答案。", "hint": "可行的 $b$ 数组有 $(0, 1, 3),(0, 2, 0),(1, 0, 3),(1, 2, 1)$ 四种。\n\n对于所有数据，满足 $1 ≤ n ≤ 15$，$ 0 ≤ m ≤ \\frac{n(n−1)}{2}$，$ 0 ≤ a_i, C ≤ 10^{18}$。\n\n- Subtask 1 (20pts)：$n ≤ 5$，$ 0 ≤ a_i, C ≤ 15$。\n- Subtask 2 (50pts)：$n ≤ 13$。\n- Subtask 3 (10pts)：$m = 0$。\n- Subtask 4 (20pts)：无特殊限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 提高组] 异或图", "background": "", "description": "给定一张 $n$ 个点 $m$ 条边的无向图和一个长度为 $n$ 的数组 $a_1, a_2, \\cdots , a_n$ 以及一个整数 $C$，你需要求出有多少个长度为 $n$ 的数组 $b$ 满足：\n\n1. $0 ≤ b_i ≤ a_i,\\forall 1 ≤ i ≤ n$。\n2. 对于每条边 $(u, v)$，$b_u \\ne b_v$。\n3. $b_1 ⊕ b_2 ⊕ \\cdots  ⊕ b_n = C$，其中 $\\oplus$ 代表异或。\n\n答案对 $998244353$ 取模。\n", "inputFormat": "第一行输入三个整数 $n, m, c$。\n\n第二行输入 $n$ 个整数 $a_1, a_2, \\cdots , a_n$。\n\n接下来的 $m$ 行，每行输入两个正整数 $u, v$，表示一条无向边。", "outputFormat": "一行一个整数表示答案。", "hint": "可行的 $b$ 数组有 $(0, 1, 3),(0, 2, 0),(1, 0, 3),(1, 2, 1)$ 四种。\n\n对于所有数据，满足 $1 ≤ n ≤ 15$，$ 0 ≤ m ≤ \\frac{n(n−1)}{2}$，$ 0 ≤ a_i, C ≤ 10^{18}$。\n\n- Subtask 1 (20pts)：$n ≤ 5$，$ 0 ≤ a_i, C ≤ 15$。\n- Subtask 2 (50pts)：$n ≤ 13$。\n- Subtask 3 (10pts)：$m = 0$。\n- Subtask 4 (20pts)：无特殊限制。\n", "locale": "zh-CN"}}}
{"pid": "P10105", "type": "P", "difficulty": 6, "samples": [["10\n7 10\n2 8\n10 2\n8 1\n9 7\n4 5\n1 6\n9 4\n4 3\n10\n3 2 1\n5 4 1\n6 6 0\n3 0 3\n1 5 4\n2 5 7\n6 5 1\n2 1 3\n2 0 2\n2 2 0", "2 6 1\n7 6 1\n9 6 6\n6 2 6\n6 1 7\n8 6 4\n9 6 1\n1 2 6\n6 8 6\n8 6 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "广东", "Special Judge"], "title": "[GDKOI2023 提高组] 游戏", "background": "", "description": "你正在树上玩游戏。\n\n给定一棵 $n$ 个结点的树，有 $Q$ 次询问，每次给定 $x, y, z$，你要找到三个点 $(u, v, w)$ 满足 $\\operatorname{dis}(u, v) =\nx, \\operatorname{dis}(u, w) = y, \\operatorname{dis}(v, w) = z$。其中 $\\operatorname{dis}(u, v)$ 表示树上 $u$ 和 $v$ 两点唯一简单路径所包含的边数，$\\operatorname{dis}(u, u) = 0$。\n保证有解。\n", "inputFormat": "第一行一个整数 $n$，表示树的结点数。\n\n接下来 $n - 1$ 行每行两个点 $u, v$ 表示一条 $u$ 到 $v$ 的边。\n\n接下来一个整数 $Q$，表示询问次数。\n\n接下来 $Q$ 行，每行三个整数 $x, y, z$ 表示一组询问。", "outputFormat": "输出 $Q$ 行，每行三个整数 $u, v, w$，满足 $\\operatorname{dis}(u, v) = x, \\operatorname{dis}(u, w) = y, \\operatorname{dis}(v, w) = z$。如果多组合法的\n$(u, v, w)$，输出任意一组，保证有解。\n", "hint": "对于 10% 的数据，满足 $n, Q ≤ 500$。\n\n对于 20% 的数据，满足 $n, Q ≤ 2 \\times 10^3$。\n\n对于另外 20% 的数据，满足 $Q = 1$。\n\n对于另外 20% 的数据，满足 $Q \\le 10$。\n\n对于另外 10% 的数据，满足第 $i$ 条边连接 $i$ 和 $i + 1$。\n\n对于另外 10% 的数据，满足 $x = 0$。\n\n对于 100% 的数据，满足 $1 ≤ n, Q ≤ 2 \\times 10^5, 0 ≤ x, y, z ≤ 2 \\times 10^5$。\n\n下发 checker 和 checker.exe，分别用于 64 位 linux 以及 windows 下的答案校验。\n\n你可以使用 `./checker < 输入文件名 > < 输出文件名 > < 答案文件名 >` 来检测你的输出文件是否合\n法。\n\n实际上下发的 checker 并不会用到答案文件，所以你只需要随便选择一个文件作为答案文件即可。\n\n你需要保证输入文件合法，即格式正确并且有解，否则可能会出现未知错误。\n\n根据你的输出文件的问题，checker 分别会返回一下信息：\n\n1. 如果你的输出文件正确，则 checker 会返回 `Accepted!`。\n2. 如果在第 $t$ 组数据，答案错误，则 checker 会返回 `Wrong answer on test t!`。\n3. 如果你的格式错误，则 checker 会返回 `wrong output format` 后接相关错误信息。\n\nUPD: 在洛谷下发 chk.cpp。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 提高组] 游戏", "background": "", "description": "你正在树上玩游戏。\n\n给定一棵 $n$ 个结点的树，有 $Q$ 次询问，每次给定 $x, y, z$，你要找到三个点 $(u, v, w)$ 满足 $\\operatorname{dis}(u, v) =\nx, \\operatorname{dis}(u, w) = y, \\operatorname{dis}(v, w) = z$。其中 $\\operatorname{dis}(u, v)$ 表示树上 $u$ 和 $v$ 两点唯一简单路径所包含的边数，$\\operatorname{dis}(u, u) = 0$。\n保证有解。\n", "inputFormat": "第一行一个整数 $n$，表示树的结点数。\n\n接下来 $n - 1$ 行每行两个点 $u, v$ 表示一条 $u$ 到 $v$ 的边。\n\n接下来一个整数 $Q$，表示询问次数。\n\n接下来 $Q$ 行，每行三个整数 $x, y, z$ 表示一组询问。", "outputFormat": "输出 $Q$ 行，每行三个整数 $u, v, w$，满足 $\\operatorname{dis}(u, v) = x, \\operatorname{dis}(u, w) = y, \\operatorname{dis}(v, w) = z$。如果多组合法的\n$(u, v, w)$，输出任意一组，保证有解。\n", "hint": "对于 10% 的数据，满足 $n, Q ≤ 500$。\n\n对于 20% 的数据，满足 $n, Q ≤ 2 \\times 10^3$。\n\n对于另外 20% 的数据，满足 $Q = 1$。\n\n对于另外 20% 的数据，满足 $Q \\le 10$。\n\n对于另外 10% 的数据，满足第 $i$ 条边连接 $i$ 和 $i + 1$。\n\n对于另外 10% 的数据，满足 $x = 0$。\n\n对于 100% 的数据，满足 $1 ≤ n, Q ≤ 2 \\times 10^5, 0 ≤ x, y, z ≤ 2 \\times 10^5$。\n\n下发 checker 和 checker.exe，分别用于 64 位 linux 以及 windows 下的答案校验。\n\n你可以使用 `./checker < 输入文件名 > < 输出文件名 > < 答案文件名 >` 来检测你的输出文件是否合\n法。\n\n实际上下发的 checker 并不会用到答案文件，所以你只需要随便选择一个文件作为答案文件即可。\n\n你需要保证输入文件合法，即格式正确并且有解，否则可能会出现未知错误。\n\n根据你的输出文件的问题，checker 分别会返回一下信息：\n\n1. 如果你的输出文件正确，则 checker 会返回 `Accepted!`。\n2. 如果在第 $t$ 组数据，答案错误，则 checker 会返回 `Wrong answer on test t!`。\n3. 如果你的格式错误，则 checker 会返回 `wrong output format` 后接相关错误信息。\n\nUPD: 在洛谷下发 chk.cpp。", "locale": "zh-CN"}}}
{"pid": "P10106", "type": "P", "difficulty": 7, "samples": [["2 499122177 2 1\n1 1 1 1", "374341633 374341633 873463809 374341633\n"], ["2 332748118 10 0\n1 2 4 8", "178690412 406663623 594339846 223292982"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "广东"], "title": "[GDKOI2023 提高组] 马戏团里你最忙", "background": "", "description": "你正在马戏团里表演一个节目。\n\n有一个数字，初始是 $x_0$。进行 $K$ 次操作，第 $i$ 次操作从 $[0, 2^n)$ 均匀随机一个数字 $x$，$x_i$ 有 $p$ 的概率是 $x_{i - 1} \\operatorname{or} x$，有 $1 - p$ 的概率是 $x_{i - 1} \\operatorname{and} x$。\n\n一种方案的权值是 $\\sum_{i=1}^k c_{x_{i}}$。对每个 $i \\in [0, 2^n)$ 求出，$x_K = i$ 的所有方案中，权值乘概率之和，对 $998244353$ 取模。\n", "inputFormat": "第一行四个整数 $n, p', K, x_0$。$p'$ 为 $p$ 在模 $998244353$ 意义下的值。\n\n第二行 $2^n$ 个整数，第 $i$ 个表示 $c_{i - 1}$。", "outputFormat": "输出一行 $2^n$ 个用空格隔开整数，第 $i$ 个表示 $x_K = i - 1$ 的所有方案中，权值乘概率之和，对 $998244353$ 取模。\n", "hint": "对于 20% 的数据，满足 $K ≤ 20$。\n\n对于 40% 的数据，满足 $K ≤ 10^3$。\n\n对于另外 10% 的数据，满足 $n = 1$。\n\n对于另外 10% 的数据，满足 $n ≤ 8$。\n\n对于另外 10% 的数据，满足 $p' = 499122177$。\n\n对于另外 10% 的数据，满足 $c_i = 1$。\n\n对于 100% 的数据，满足 $0 ≤ n ≤ 17$，$ 1 ≤ K ≤ 10^9$，$ 0 ≤ x_0 < 2^n$，$ 0 ≤ p', c_i < 998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 提高组] 马戏团里你最忙", "background": "", "description": "你正在马戏团里表演一个节目。\n\n有一个数字，初始是 $x_0$。进行 $K$ 次操作，第 $i$ 次操作从 $[0, 2^n)$ 均匀随机一个数字 $x$，$x_i$ 有 $p$ 的概率是 $x_{i - 1} \\operatorname{or} x$，有 $1 - p$ 的概率是 $x_{i - 1} \\operatorname{and} x$。\n\n一种方案的权值是 $\\sum_{i=1}^k c_{x_{i}}$。对每个 $i \\in [0, 2^n)$ 求出，$x_K = i$ 的所有方案中，权值乘概率之和，对 $998244353$ 取模。\n", "inputFormat": "第一行四个整数 $n, p', K, x_0$。$p'$ 为 $p$ 在模 $998244353$ 意义下的值。\n\n第二行 $2^n$ 个整数，第 $i$ 个表示 $c_{i - 1}$。", "outputFormat": "输出一行 $2^n$ 个用空格隔开整数，第 $i$ 个表示 $x_K = i - 1$ 的所有方案中，权值乘概率之和，对 $998244353$ 取模。\n", "hint": "对于 20% 的数据，满足 $K ≤ 20$。\n\n对于 40% 的数据，满足 $K ≤ 10^3$。\n\n对于另外 10% 的数据，满足 $n = 1$。\n\n对于另外 10% 的数据，满足 $n ≤ 8$。\n\n对于另外 10% 的数据，满足 $p' = 499122177$。\n\n对于另外 10% 的数据，满足 $c_i = 1$。\n\n对于 100% 的数据，满足 $0 ≤ n ≤ 17$，$ 1 ≤ K ≤ 10^9$，$ 0 ≤ x_0 < 2^n$，$ 0 ≤ p', c_i < 998244353$。", "locale": "zh-CN"}}}
{"pid": "P10107", "type": "P", "difficulty": 7, "samples": [["10\n9 3 0 7 4 8 8 7 2 5\n1 1 2 2 3 6 6 8 7\n10\n8 2\n2 1\n5 1\n4 1\n4 1\n1 4\n4 1\n6 3\n4 1\n1 4", "10\n14\n4\n7\n7\n55\n7\n30\n7\n55"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["倍增", "2023", "广东", "树链剖分", "前缀和", "位运算", "差分"], "title": "[GDKOI2023 提高组] 树", "background": null, "description": "给定一棵 $n$ 个结点的有根树 $T$，结点从 $1$ 开始编号，根结点为 $1$ 号结点，每个结点有一个正整数权值 $v_i$。\n\n有 $Q$ 次询问，对于一次询问，给定 $(x, k)$，设 $x$ 号结点的子树内（包含 $x$ 自身）的所有满足距离 $x$ 号结点不超过 $k$ 的结点编号为 $c_1, c_2, . . . , c_m$，则这次询问的答案为：\n\n$$(v_{c_1} ⊕ d(c_1, x)) + (v_{c_2} ⊕ d(c_2, x)) + \\cdots + (v_{c_m} ⊕ d(c_m, x))$$\n\n其中 $d(x, y)$ 表示树上 $x$ 号结点与 $y$ 号结点间唯一简单路径所包含的边数，$d(x, x) = 0$。$⊕$ 表示异或运算。", "inputFormat": "第一行一个整数 $n$ 表示树的大小。\n\n第二行 $n$ 个整数表示 $v_i$。\n\n第三行 $n - 1$ 个整数，依次表示 $2$ 号结点到 $n$ 号结点，每个结点的父亲编号 $p_i$。\n\n第四行一个整数 $Q$。\n\n接下来 $Q$ 行，每行两个整数 $x, k$，表示一个 $(x, k)$ 的查询。", "outputFormat": "输出共 $Q$ 行，第 $i$ 行一个整数表示第 $i$ 次询问的答案。", "hint": "对于 10% 的数据，满足 $n, Q ≤ 2 \\times 10^3$。\n\n对于 20% 的数据，满足 $n, Q ≤ 10^5$。\n\n对于另外 20% 的数据，满足 $p_i = i - 1$。\n\n对于另外 10% 的数据，满足 $k ≤ 20$。\n\n对于另外 20% 的数据，满足 $k = n$。\n\n对于另外 10% 的数据，满足 $v_i = 0$。\n\n对于 100% 的数据，满足 $1 ≤ n, Q ≤ 10^6$，$ 0 ≤ v ≤ 10^9$，$ 1 ≤ p_i < i$，$ 1 ≤ x, k ≤ n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GDKOI2023 提高组] 树", "background": null, "description": "给定一棵 $n$ 个结点的有根树 $T$，结点从 $1$ 开始编号，根结点为 $1$ 号结点，每个结点有一个正整数权值 $v_i$。\n\n有 $Q$ 次询问，对于一次询问，给定 $(x, k)$，设 $x$ 号结点的子树内（包含 $x$ 自身）的所有满足距离 $x$ 号结点不超过 $k$ 的结点编号为 $c_1, c_2, . . . , c_m$，则这次询问的答案为：\n\n$$(v_{c_1} ⊕ d(c_1, x)) + (v_{c_2} ⊕ d(c_2, x)) + \\cdots + (v_{c_m} ⊕ d(c_m, x))$$\n\n其中 $d(x, y)$ 表示树上 $x$ 号结点与 $y$ 号结点间唯一简单路径所包含的边数，$d(x, x) = 0$。$⊕$ 表示异或运算。", "inputFormat": "第一行一个整数 $n$ 表示树的大小。\n\n第二行 $n$ 个整数表示 $v_i$。\n\n第三行 $n - 1$ 个整数，依次表示 $2$ 号结点到 $n$ 号结点，每个结点的父亲编号 $p_i$。\n\n第四行一个整数 $Q$。\n\n接下来 $Q$ 行，每行两个整数 $x, k$，表示一个 $(x, k)$ 的查询。", "outputFormat": "输出共 $Q$ 行，第 $i$ 行一个整数表示第 $i$ 次询问的答案。", "hint": "对于 10% 的数据，满足 $n, Q ≤ 2 \\times 10^3$。\n\n对于 20% 的数据，满足 $n, Q ≤ 10^5$。\n\n对于另外 20% 的数据，满足 $p_i = i - 1$。\n\n对于另外 10% 的数据，满足 $k ≤ 20$。\n\n对于另外 20% 的数据，满足 $k = n$。\n\n对于另外 10% 的数据，满足 $v_i = 0$。\n\n对于 100% 的数据，满足 $1 ≤ n, Q ≤ 10^6$，$ 0 ≤ v ≤ 10^9$，$ 1 ≤ p_i < i$，$ 1 ≤ x, k ≤ n$。", "locale": "zh-CN"}}}
{"pid": "P10108", "type": "P", "difficulty": 2, "samples": [["6 2 \n2 3\n1 0 30 100 30 30", "131"], ["6 2\n2 3\n1 0 30 100 30 -1", "101"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2023", "GESP"], "title": "[GESP202312 六级] 闯关游戏", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1138>", "description": "你来到了一个闯关游戏。\n\n这个游戏总共有 $N$ 关，每关都有 $M$ 个通道，你需要选择一个通道并通往后续关卡。其中，第 $i$ 个通道可以让你前进 $a_i$ 关，也就是说，如果你现在在第 $x$ 关，那么选择第 $i$ 个通道后，你将直接来到第 $x+a_i$ 关（特别地，如果 $x + a_i \\geq N$，那么你就通关了）。此外，当你顺利离开第 $s$ 关时，你还将获得 $b_s$ 分。\n\n游戏开始时，你在第 $0$ 关。请问，你通关时最多能获得多少总分。", "inputFormat": "第一行两个整数 $N$，$M$，分别表示关卡数量和每关的通道数量。\n\n接下来一行 $M$ 个用单个空格隔开的整数 $a_0,a_1\\cdots,a_{M-1}$。保证 $1\\le a_i \\le N$。\n\n接下来一行 $N$ 个用单个空格隔开的整数 $b_0,b_1\\cdots,b_{N-1}$。保证 $|b_i|\\le 10^5$。", "outputFormat": "一行一个整数，表示你通关时最多能够获得的分数。", "hint": "**样例解释 1**\n\n你可以在第 $0$ 关选择第 $1$ 个通道，获得 $1$ 分并来到第 $3$ 关；随后再选择第 $0$ 个通道，获得 $100$ 分并来到第 $5$ 关；最后任选一个通道，都可以获得 $30$ 分并通关。如此，总得分为 $1+100+30=131$。\n\n**样例解释 2**\n\n请注意，一些关卡的得分可能是负数。\n\n\n**数据范围**\n\n对于 $20\\%$ 的测试点，保证 $M=1$。\n\n对于 $40\\%$ 的测试点，保证 $N \\le 20$；保证 $M\\le 2$。\n\n对于所有测试点，保证 $1 \\le N \\le 10^4$；保证 $1 \\le M\\le 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202312 六级] 闯关游戏", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1138>", "description": "你来到了一个闯关游戏。\n\n这个游戏总共有 $N$ 关，每关都有 $M$ 个通道，你需要选择一个通道并通往后续关卡。其中，第 $i$ 个通道可以让你前进 $a_i$ 关，也就是说，如果你现在在第 $x$ 关，那么选择第 $i$ 个通道后，你将直接来到第 $x+a_i$ 关（特别地，如果 $x + a_i \\geq N$，那么你就通关了）。此外，当你顺利离开第 $s$ 关时，你还将获得 $b_s$ 分。\n\n游戏开始时，你在第 $0$ 关。请问，你通关时最多能获得多少总分。", "inputFormat": "第一行两个整数 $N$，$M$，分别表示关卡数量和每关的通道数量。\n\n接下来一行 $M$ 个用单个空格隔开的整数 $a_0,a_1\\cdots,a_{M-1}$。保证 $1\\le a_i \\le N$。\n\n接下来一行 $N$ 个用单个空格隔开的整数 $b_0,b_1\\cdots,b_{N-1}$。保证 $|b_i|\\le 10^5$。", "outputFormat": "一行一个整数，表示你通关时最多能够获得的分数。", "hint": "**样例解释 1**\n\n你可以在第 $0$ 关选择第 $1$ 个通道，获得 $1$ 分并来到第 $3$ 关；随后再选择第 $0$ 个通道，获得 $100$ 分并来到第 $5$ 关；最后任选一个通道，都可以获得 $30$ 分并通关。如此，总得分为 $1+100+30=131$。\n\n**样例解释 2**\n\n请注意，一些关卡的得分可能是负数。\n\n\n**数据范围**\n\n对于 $20\\%$ 的测试点，保证 $M=1$。\n\n对于 $40\\%$ 的测试点，保证 $N \\le 20$；保证 $M\\le 2$。\n\n对于所有测试点，保证 $1 \\le N \\le 10^4$；保证 $1 \\le M\\le 100$。", "locale": "zh-CN"}}}
{"pid": "P10109", "type": "P", "difficulty": 2, "samples": [["5\n0 0 2 2\n3\n2 3 4\n3 2 3 4\n2 1 4", "2\n2\n0"], ["7\n0 1 0 2 1 2\n5\n2 4 6\n2 4 5\n3 4 5 6\n4 2 4 5 6\n2 3 4", "2\n1\n1\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["图论", "2023", "图遍历", "GESP"], "title": "[GESP202312 六级] 工作沟通", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1138>", "description": "某公司有 $N$ 名员工，编号从 $0$ 至 $N-1$。其中，除了 $0$ 号员工是老板，其余每名员工都有一个直接领导。我们假设编号为 $i$ 的员工的直接领导是 $f_i$。\n\n该公司有严格的管理制度，每位员工只能受到本人或直接领导或间接领导的管理。具体来说，规定员工 $x$ 可以管理员工 $y$，当且仅当 $x=y$，或 $x=f_y$，或 $x$ 可以管理 $f_y$。特别地，$0$ 号员工老板只能自我管理，无法由其他任何员工管理。\n\n现在，有一些同事要开展合作，他们希望找到一位同事来主持这场合作，这位同事必须能够管理参与合作的所有同事。如果有多名满足这一条件的员工，他们希望找到编号最大的员工。你能帮帮他们吗？", "inputFormat": "第一行一个整数 $N$，表示员工的数量。\n\n第二行 $N - 1$ 个用空格隔开的正整数，依次为 $f_1,f_2,\\dots f_{N−1}$。\n\n第三行一个整数 $Q$，表示共有 $Q$ 场合作需要安排。\n\n接下来 $Q$ 行，每行描述一场合作：开头是一个整数 $m$（$2 \\le m \\le N$），表示参与本次合作的员工数量；接着是 $m$ 个整数，依次表示参与本次合作的员工编号（保证编号合法且不重复）。\n\n保证公司结构合法，即不存在任意一名员工，其本人是自己的直接或间接领导。", "outputFormat": "输出 $Q$ 行，每行一个整数，依次为每场合作的主持人选。\n", "hint": "**样例解释 1**\n\n对于第一场合作，员工 $3,4$ 有共同领导 $2$ ，可以主持合作。\n\n对于第二场合作，员工 $2$ 本人即可以管理所有参与者。\n\n对于第三场合作，只有 $0$ 号老板才能管理所有员工。\n\n**数据范围**\n\n对于 $50\\%$ 的测试点，保证 $N \\leq 50$。\n\n对于所有测试点，保证 $3 \\leq N \\leq 300$，$Q \\leq 100$。\n\n\n\n------------\n2024/1/28 添加一组 hack 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202312 六级] 工作沟通", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1138>", "description": "某公司有 $N$ 名员工，编号从 $0$ 至 $N-1$。其中，除了 $0$ 号员工是老板，其余每名员工都有一个直接领导。我们假设编号为 $i$ 的员工的直接领导是 $f_i$。\n\n该公司有严格的管理制度，每位员工只能受到本人或直接领导或间接领导的管理。具体来说，规定员工 $x$ 可以管理员工 $y$，当且仅当 $x=y$，或 $x=f_y$，或 $x$ 可以管理 $f_y$。特别地，$0$ 号员工老板只能自我管理，无法由其他任何员工管理。\n\n现在，有一些同事要开展合作，他们希望找到一位同事来主持这场合作，这位同事必须能够管理参与合作的所有同事。如果有多名满足这一条件的员工，他们希望找到编号最大的员工。你能帮帮他们吗？", "inputFormat": "第一行一个整数 $N$，表示员工的数量。\n\n第二行 $N - 1$ 个用空格隔开的正整数，依次为 $f_1,f_2,\\dots f_{N−1}$。\n\n第三行一个整数 $Q$，表示共有 $Q$ 场合作需要安排。\n\n接下来 $Q$ 行，每行描述一场合作：开头是一个整数 $m$（$2 \\le m \\le N$），表示参与本次合作的员工数量；接着是 $m$ 个整数，依次表示参与本次合作的员工编号（保证编号合法且不重复）。\n\n保证公司结构合法，即不存在任意一名员工，其本人是自己的直接或间接领导。", "outputFormat": "输出 $Q$ 行，每行一个整数，依次为每场合作的主持人选。\n", "hint": "**样例解释 1**\n\n对于第一场合作，员工 $3,4$ 有共同领导 $2$ ，可以主持合作。\n\n对于第二场合作，员工 $2$ 本人即可以管理所有参与者。\n\n对于第三场合作，只有 $0$ 号老板才能管理所有员工。\n\n**数据范围**\n\n对于 $50\\%$ 的测试点，保证 $N \\leq 50$。\n\n对于所有测试点，保证 $3 \\leq N \\leq 300$，$Q \\leq 100$。\n\n\n\n------------\n2024/1/28 添加一组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P10110", "type": "P", "difficulty": 3, "samples": [["3 5 0 2\n1 2 4\n1 0\n2 0\n0 1\n2 1\n1 2", "5"], ["3 3 0 2\n100 2 4\n0 1\n1 2\n0 2", "-95"], ["4 4 3 0\n1 2 3 4\n1 0\n0 1\n3 2\n2 3", "No solution"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "广度优先搜索 BFS", "最短路", "GESP"], "title": "[GESP202312 七级] 商品交易", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1139>", "description": "市场上共有 $N$ 种商品，编号从 $0$ 至 $N-1$ ，其中，第 $i$ 种商品价值 $v_i$ 元。\n\n现在共有 $M$ 个商人，编号从 $0$ 至 $M-1$ 。在第 $j$ 个商人这，你可以使用你手上的第 $x_j$ 种商品交换商人手上的第 $y_j$ 种商品。每个商人都会按照商品价值进行交易，具体来说，如果 $v_{x_j}>v_{y_j}$，他将会付给你 $v_{x_j}-v_{y_j}$元钱；否则，那么你需要付给商人 $v_{y_j}-v_{x_j}$ 元钱。除此之外，每次交易商人还会收取 $1$ 元作为手续费，不论交易商品的价值孰高孰低。\n\n你现在拥有商品 $a$ ，并希望通过一些交换来获得商品 $b$ 。请问你至少要花费多少钱？（当然，这个最小花费也可能是负数，这表示你可以在完成目标的同时赚取一些钱。）", "inputFormat": "第一行四个整数 $N , M , a , b$，分别表示商品的数量、商人的数量、你持有的商品以及你希望获得的商品。保证 $0 \\le a,b < N$ ，保证 $a \\ne b$。\n\n第二行 $N$ 个用单个空格隔开的正整数 $v_0,v_1,…,v_{N-1}$ ，依次表示每种商品的价值。保证 $1≤v_i≤10^9$。\n\n接下来 $M$ 行，每行两个整数 $x_j,y_j$ ，表示在第 $j$ 个商人这，你可以使用第 $x_j$ 种商品交换第 $y_j$ 种商品。保证 $0≤x_j,y_j<N$，保证 $x_j≠y_j$ 。", "outputFormat": "输出一行一个整数，表示最少的花费。特别地，如果无法通过交换换取商品 $b$ ，请输出 `No solution`。", "hint": "**数据范围**\n\n对于 30% 的测试点，保证 $N ≤ 10$，$M ≤ 20$。\n\n对于 70% 的测试点，保证 $N ≤10^3$，$M≤10^4$。\n\n对于 100% 的测试点，保证 $N≤10^5$，$M≤2×10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202312 七级] 商品交易", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1139>", "description": "市场上共有 $N$ 种商品，编号从 $0$ 至 $N-1$ ，其中，第 $i$ 种商品价值 $v_i$ 元。\n\n现在共有 $M$ 个商人，编号从 $0$ 至 $M-1$ 。在第 $j$ 个商人这，你可以使用你手上的第 $x_j$ 种商品交换商人手上的第 $y_j$ 种商品。每个商人都会按照商品价值进行交易，具体来说，如果 $v_{x_j}>v_{y_j}$，他将会付给你 $v_{x_j}-v_{y_j}$元钱；否则，那么你需要付给商人 $v_{y_j}-v_{x_j}$ 元钱。除此之外，每次交易商人还会收取 $1$ 元作为手续费，不论交易商品的价值孰高孰低。\n\n你现在拥有商品 $a$ ，并希望通过一些交换来获得商品 $b$ 。请问你至少要花费多少钱？（当然，这个最小花费也可能是负数，这表示你可以在完成目标的同时赚取一些钱。）", "inputFormat": "第一行四个整数 $N , M , a , b$，分别表示商品的数量、商人的数量、你持有的商品以及你希望获得的商品。保证 $0 \\le a,b < N$ ，保证 $a \\ne b$。\n\n第二行 $N$ 个用单个空格隔开的正整数 $v_0,v_1,…,v_{N-1}$ ，依次表示每种商品的价值。保证 $1≤v_i≤10^9$。\n\n接下来 $M$ 行，每行两个整数 $x_j,y_j$ ，表示在第 $j$ 个商人这，你可以使用第 $x_j$ 种商品交换第 $y_j$ 种商品。保证 $0≤x_j,y_j<N$，保证 $x_j≠y_j$ 。", "outputFormat": "输出一行一个整数，表示最少的花费。特别地，如果无法通过交换换取商品 $b$ ，请输出 `No solution`。", "hint": "**数据范围**\n\n对于 30% 的测试点，保证 $N ≤ 10$，$M ≤ 20$。\n\n对于 70% 的测试点，保证 $N ≤10^3$，$M≤10^4$。\n\n对于 100% 的测试点，保证 $N≤10^5$，$M≤2×10^5$。", "locale": "zh-CN"}}}
{"pid": "P10111", "type": "P", "difficulty": 3, "samples": [["4\n1 2 10 100\n1 100 1\n1 1 2 0", "219"], ["6\n3 7 2 8 9 4\n1 3 9 27 81\n0 1 2 1 2 0", "56"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2023", "GESP"], "title": "[GESP202312 七级] 纸牌游戏", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1139>", "description": "你和小杨在玩一个纸牌游戏。\n\n你和小杨各有 $3$ 张牌，分别是 $0、1、2$。你们要进行 $N$ 轮游戏，每轮游戏双方都要出一张牌，并按 $1$ 战胜 $0$，$2$ 战胜 $1$，$0$ 战胜 $2$ 的规则决出胜负。第 $i$ 轮的胜者可以获得 $2 \\times a_i$ 分，败者不得分，如果双方出牌相同，则算平局，二人都可获得 $a_i$ 分 $(i=1,2,\\cdots,N)$。\n\n玩了一会后，你们觉得这样太过于单调，于是双方给自己制定了不同的新规则。小杨会在整局游戏开始前确定自己全部 $n$ 轮的出牌，并将他的全部计划告诉你；而你从第 $2$ 轮开始，要么继续出上一轮出的牌，要么记一次“换牌”。游戏结束时，你换了 $t$ 次牌，就要额外扣 $b_1+\\cdots+b_t$ 分。\n\n请计算出你最多能获得多少分。", "inputFormat": "第一行一个整数 $N$，表示游戏轮数。\n\n第二行 $N$ 个用单个空格隔开的非负整数 $a_1,\\cdots,a_N$，意义见题目描述。\n\n第三行 $N-1$ 个用单个空格隔开的非负整数 $b_1,\\cdots,b_{N-1}$，表示换牌的罚分，具体含义见题目描述。由于游戏进行 $N$ 轮，所以你至多可以换 $N-1$ 次牌。\n\n第四行 $N$ 个用单个空格隔开的整数 $c_1,\\cdots,c_N$，依次表示小杨从第 $1$ 轮至第 $N$ 轮出的牌。保证 $c\n_i\\in{0,1,2}$。", "outputFormat": "一行一个整数，表示你最多获得的分数。", "hint": "**样例解释 1**\n\n你可以第 $1$ 轮出 $0$，并在第 $2,3$ 轮保持不变，如此输掉第 $1,2$ 轮，但在第 $3$ 轮中取胜，获得 $2×10=20$ 分；\n\n随后，你可以在第 $4$ 轮中以扣 $1$ 分为代价改出 $1$ ，并在第 $4$ 轮中取得胜利，获得 $2×100=200$ 分。\n\n如此，你可以获得最高的总分 $20+200-1=219$。\n\n**数据范围**\n\n对于 $30\\%$ 的测试点，保证 $N\\le15$。\n\n对于 $60\\%$ 的测试点，保证 $N\\le100$。\n\n对于所有测试点，保证 $N \\le 1,000$；保证 $0 \\le a_i,b_i \\le 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202312 七级] 纸牌游戏", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1139>", "description": "你和小杨在玩一个纸牌游戏。\n\n你和小杨各有 $3$ 张牌，分别是 $0、1、2$。你们要进行 $N$ 轮游戏，每轮游戏双方都要出一张牌，并按 $1$ 战胜 $0$，$2$ 战胜 $1$，$0$ 战胜 $2$ 的规则决出胜负。第 $i$ 轮的胜者可以获得 $2 \\times a_i$ 分，败者不得分，如果双方出牌相同，则算平局，二人都可获得 $a_i$ 分 $(i=1,2,\\cdots,N)$。\n\n玩了一会后，你们觉得这样太过于单调，于是双方给自己制定了不同的新规则。小杨会在整局游戏开始前确定自己全部 $n$ 轮的出牌，并将他的全部计划告诉你；而你从第 $2$ 轮开始，要么继续出上一轮出的牌，要么记一次“换牌”。游戏结束时，你换了 $t$ 次牌，就要额外扣 $b_1+\\cdots+b_t$ 分。\n\n请计算出你最多能获得多少分。", "inputFormat": "第一行一个整数 $N$，表示游戏轮数。\n\n第二行 $N$ 个用单个空格隔开的非负整数 $a_1,\\cdots,a_N$，意义见题目描述。\n\n第三行 $N-1$ 个用单个空格隔开的非负整数 $b_1,\\cdots,b_{N-1}$，表示换牌的罚分，具体含义见题目描述。由于游戏进行 $N$ 轮，所以你至多可以换 $N-1$ 次牌。\n\n第四行 $N$ 个用单个空格隔开的整数 $c_1,\\cdots,c_N$，依次表示小杨从第 $1$ 轮至第 $N$ 轮出的牌。保证 $c\n_i\\in{0,1,2}$。", "outputFormat": "一行一个整数，表示你最多获得的分数。", "hint": "**样例解释 1**\n\n你可以第 $1$ 轮出 $0$，并在第 $2,3$ 轮保持不变，如此输掉第 $1,2$ 轮，但在第 $3$ 轮中取胜，获得 $2×10=20$ 分；\n\n随后，你可以在第 $4$ 轮中以扣 $1$ 分为代价改出 $1$ ，并在第 $4$ 轮中取得胜利，获得 $2×100=200$ 分。\n\n如此，你可以获得最高的总分 $20+200-1=219$。\n\n**数据范围**\n\n对于 $30\\%$ 的测试点，保证 $N\\le15$。\n\n对于 $60\\%$ 的测试点，保证 $N\\le100$。\n\n对于所有测试点，保证 $N \\le 1,000$；保证 $0 \\le a_i,b_i \\le 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10112", "type": "P", "difficulty": 3, "samples": [["3\n3 2 1 2\n3 2 1 3\n5 3 1 3 1 ", "3\n4\n20"], ["5\n100 1 100\n100 1 101\n20 2 12 8\n123 4 80 20 21 3\n999 5 101 234 499 66 99", "1\n1\n125970\n895031741\n307187590"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2023", "组合数学", "排列组合", "GESP"], "title": "[GESP202312 八级] 奖品分配", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1140>", "description": "班上有 $N$ 名同学，学号从 $0$ 到 $N-1$。有 $M$ 种奖品要分给这些同学，其中，第 $i$ 种奖品总共有 $a_i$ 个 （$i=0,1, \\cdots ,M-1$）。\n\n巧合的是，奖品的数量不多不少，每位同学都可以恰好分到一个奖品，且最后剩余的奖品不超过 $1$ 个（即：$N\\le a_0+a_1+ \\cdots +a_{M-1}\\le N+1$）。\n\n现在，请你求出每个班级礼物分配的方案数，所谓方案，指的是为每位同学都分配一个种类的奖品。\n\n只要有一位同学获得了不同种类的奖品，即视为不同的方案。方便起见，你只需要输出方案数对 $10^{9}+7$ 取模后的结果即可。\n\n共有 $T$ 个班级都面临着奖品分配的问题，你需要依次为他们解答。", "inputFormat": "第一行一个整数 $T$，表示班级数量。\n\n接下来 $T$ 行，每行若干用单个空格隔开的正整数。首先是两个正整数$N,M$，接着是 $M$ 个正整数 $a_0,a_1...a_{M-1}$。保证 $N \\le a_0+a_1+\\cdots+a_{M-1} \\le N+1 $。", "outputFormat": "输出 $T$ 行，每行一个整数，表示该班级分配奖品的方案数对 $10^{9}+7$ 取模的结果。", "hint": "**样例解释 1**\n\n对于第 $1$ 个班级，学号为 $0,1,2$ 的同学可以依次分别获得奖品 $0,1,1$，也可以依次分别获得奖品 $1,0,1$，也可以依次分别获得奖品 $1,1,0$ ，因此共有 $3$ 种方案。\n\n对于第 $2$ 个班级，学号为 $0,1,2$ 的同学可以依次分别获得奖品 $0,1,1$ ，也可以依次分别获得奖品 $1,0,1$，也可以依次分别获得奖品 $1,1,0$，也可以依次分别获得奖品 $1,1,1$，因此共有 $4$ 种方案。\n\n对于第 $3$ 个班级，可以把编号为 $0$ 的奖品分配给 $5$ 名同学中的任意一名，共有 $5$ 种方案；再把编号为 $2$ 的奖品分配给剩余 $4$ 名同学中的任意一名，共有$4$ 种方案；最后给剩余 $3$ 名同学自然获得 $1$ 号奖品。因此，方案数为 $5 \\times 4 = 20$。\n\n**数据范围**\n\n对于 $30\\%$ 的测试点，保证 $N \\le 10$。\n\n对于另外 $30\\%$ 的测试点，保证 $M=2$。\n\n对于所有测试点，保证 $N \\le 1000$；保证 $T \\le 1000$ ；保证 $M \\le 1001$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202312 八级] 奖品分配", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1140>", "description": "班上有 $N$ 名同学，学号从 $0$ 到 $N-1$。有 $M$ 种奖品要分给这些同学，其中，第 $i$ 种奖品总共有 $a_i$ 个 （$i=0,1, \\cdots ,M-1$）。\n\n巧合的是，奖品的数量不多不少，每位同学都可以恰好分到一个奖品，且最后剩余的奖品不超过 $1$ 个（即：$N\\le a_0+a_1+ \\cdots +a_{M-1}\\le N+1$）。\n\n现在，请你求出每个班级礼物分配的方案数，所谓方案，指的是为每位同学都分配一个种类的奖品。\n\n只要有一位同学获得了不同种类的奖品，即视为不同的方案。方便起见，你只需要输出方案数对 $10^{9}+7$ 取模后的结果即可。\n\n共有 $T$ 个班级都面临着奖品分配的问题，你需要依次为他们解答。", "inputFormat": "第一行一个整数 $T$，表示班级数量。\n\n接下来 $T$ 行，每行若干用单个空格隔开的正整数。首先是两个正整数$N,M$，接着是 $M$ 个正整数 $a_0,a_1...a_{M-1}$。保证 $N \\le a_0+a_1+\\cdots+a_{M-1} \\le N+1 $。", "outputFormat": "输出 $T$ 行，每行一个整数，表示该班级分配奖品的方案数对 $10^{9}+7$ 取模的结果。", "hint": "**样例解释 1**\n\n对于第 $1$ 个班级，学号为 $0,1,2$ 的同学可以依次分别获得奖品 $0,1,1$，也可以依次分别获得奖品 $1,0,1$，也可以依次分别获得奖品 $1,1,0$ ，因此共有 $3$ 种方案。\n\n对于第 $2$ 个班级，学号为 $0,1,2$ 的同学可以依次分别获得奖品 $0,1,1$ ，也可以依次分别获得奖品 $1,0,1$，也可以依次分别获得奖品 $1,1,0$，也可以依次分别获得奖品 $1,1,1$，因此共有 $4$ 种方案。\n\n对于第 $3$ 个班级，可以把编号为 $0$ 的奖品分配给 $5$ 名同学中的任意一名，共有 $5$ 种方案；再把编号为 $2$ 的奖品分配给剩余 $4$ 名同学中的任意一名，共有$4$ 种方案；最后给剩余 $3$ 名同学自然获得 $1$ 号奖品。因此，方案数为 $5 \\times 4 = 20$。\n\n**数据范围**\n\n对于 $30\\%$ 的测试点，保证 $N \\le 10$。\n\n对于另外 $30\\%$ 的测试点，保证 $M=2$。\n\n对于所有测试点，保证 $N \\le 1000$；保证 $T \\le 1000$ ；保证 $M \\le 1001$。", "locale": "zh-CN"}}}
{"pid": "P10113", "type": "P", "difficulty": 3, "samples": [["5\n0 0 2 2\n3\n2 3 4\n3 2 3 4\n2 1 4", "2\n2\n0"], ["7\n0 1 0 2 1 2\n5\n2 4 6\n2 4 5\n3 4 5 6\n4 2 4 5 6\n2 3 4", "2\n1\n1\n1\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "最近公共祖先 LCA", "GESP"], "title": "[GESP202312 八级] 大量的工作沟通", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1140>", "description": "某公司有 $N$ 名员工，编号从 $0$ 至 $N-1$。其中，除了 $0$ 号员工是老板，其余每名员工都有一个直接领导。我们假设编号为 $i$ 的员工的直接领导是 $f_i$。\n\n该公司有严格的管理制度，每位员工只能受到本人或直接领导或间接领导的管理。具体来说，规定员工 $x$ 可以管理员工 $y$，当且仅当 $x=y$，或 $x=f_y$，或 $x$ 可以管理 $f_y$。特别地，$0$ 号员工老板只能自我管理，无法由其他任何员工管理。\n\n现在，有一些同事要开展合作，他们希望找到一位同事来主持这场合作，这位同事必须能够管理参与合作的所有同事。如果有多名满足这一条件的员工，他们希望找到编号最大的员工。你能帮帮他们吗？", "inputFormat": "第一行一个整数 $N$ ，表示员工的数量。\n\n第二行 $N-1$ 个用空格隔开的正整数，依次为 $f_1, f_2, \\dots f_{N-1}$。\n\n第三行一个整数 $Q$ ，表示共有 $Q$ 场合作需要安排。\n\n接下来 $Q$ 行，每行描述一场合作：开头是一个整数 $m$（$2 \\leq m \\leq N$），表示参与本次合作的员工数量；接着是 $m$ 个整数，依次表示参与本次合作的员工编号（保证编号合法且不重复）。\n\n保证公司结构合法，即不存在任意一名员工，其本人是自己的直接或间接领导。", "outputFormat": "输出 $Q$ 行，每行一个整数，依次为每场合作的主持人选。\n", "hint": "**样例解释 1**\n\n对于第一场合作，员工 $3,4$ 有共同领导 $2$ ，可以主持合作。\n\n对于第二场合作，员工 $2$ 本人即可以管理所有参与者。\n\n对于第三场合作，只有 $0$ 号老板才能管理所有员工。\n\n**数据范围**\n\n对于 $25\\%$ 的测试点，保证 $N \\leq 50$。 \n\n对于 $50\\%$ 的测试点，保证 $N \\leq 300$。\n\n对于所有测试点，保证 $3 \\leq N \\leq 10^5$，$Q \\leq 100$，$m \\leq 10^4$。\n\n\n------------\n2024/2/8 添加一组 hack 数据。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[GESP202312 八级] 大量的工作沟通", "background": "对应的选择、判断题：<https://ti.luogu.com.cn/problemset/1140>", "description": "某公司有 $N$ 名员工，编号从 $0$ 至 $N-1$。其中，除了 $0$ 号员工是老板，其余每名员工都有一个直接领导。我们假设编号为 $i$ 的员工的直接领导是 $f_i$。\n\n该公司有严格的管理制度，每位员工只能受到本人或直接领导或间接领导的管理。具体来说，规定员工 $x$ 可以管理员工 $y$，当且仅当 $x=y$，或 $x=f_y$，或 $x$ 可以管理 $f_y$。特别地，$0$ 号员工老板只能自我管理，无法由其他任何员工管理。\n\n现在，有一些同事要开展合作，他们希望找到一位同事来主持这场合作，这位同事必须能够管理参与合作的所有同事。如果有多名满足这一条件的员工，他们希望找到编号最大的员工。你能帮帮他们吗？", "inputFormat": "第一行一个整数 $N$ ，表示员工的数量。\n\n第二行 $N-1$ 个用空格隔开的正整数，依次为 $f_1, f_2, \\dots f_{N-1}$。\n\n第三行一个整数 $Q$ ，表示共有 $Q$ 场合作需要安排。\n\n接下来 $Q$ 行，每行描述一场合作：开头是一个整数 $m$（$2 \\leq m \\leq N$），表示参与本次合作的员工数量；接着是 $m$ 个整数，依次表示参与本次合作的员工编号（保证编号合法且不重复）。\n\n保证公司结构合法，即不存在任意一名员工，其本人是自己的直接或间接领导。", "outputFormat": "输出 $Q$ 行，每行一个整数，依次为每场合作的主持人选。\n", "hint": "**样例解释 1**\n\n对于第一场合作，员工 $3,4$ 有共同领导 $2$ ，可以主持合作。\n\n对于第二场合作，员工 $2$ 本人即可以管理所有参与者。\n\n对于第三场合作，只有 $0$ 号老板才能管理所有员工。\n\n**数据范围**\n\n对于 $25\\%$ 的测试点，保证 $N \\leq 50$。 \n\n对于 $50\\%$ 的测试点，保证 $N \\leq 300$。\n\n对于所有测试点，保证 $3 \\leq N \\leq 10^5$，$Q \\leq 100$，$m \\leq 10^4$。\n\n\n------------\n2024/2/8 添加一组 hack 数据。", "locale": "zh-CN"}}}
{"pid": "P10114", "type": "P", "difficulty": 4, "samples": [["2\n1 3 ", "7"], ["10\n114514 19 19 810 1477 44151 15260 369 2010 222", "1396"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化"], "title": "[LMXOI Round 1] Size", "background": "在漆黑的夜晚，魔女带走了 LMX，HQZ 为了拯救 LMX。要完成魔女给出的任务。", "description": "魔女给出一个长度为 $n$ 的序列 $d$，魔女想要求得：\n\n$$\\sum\\limits_{i=1}^{ n}\\sum\\limits_{j=1}^{n}{((d_i\\oplus d_j)+(d_i \\otimes d_j))}$$\n\n其中定义 $\\oplus$ 代表二进制下两数相加的和数位上 $1$ 的个数， $\\otimes$ 代表二进制下较大减较小的差数位上 $1$ 的个数。", "inputFormat": "一行一个整数 $n$ 表示序列的长度。\n\n第二行 $n$ 个非负整数，表示序列 $d$。", "outputFormat": "一行一个整数表示答案。", "hint": "**样例解释 #1**\n\n如下表所示，因此答案为 $1 + 2 + 2 + 2 = 7$。\n| $i$ | $j$ | $ans$ |\n| :-----: | :-----: | :-------: |\n| $1$ | $1$ | $1$ |\n| $1$ | $2$ | $2$ |\n| $2$ | $1$ | $2$ |\n| $2$ | $2$ | $2$ |\n\n\n对于 $100 \\%$ 的数据，保证 $1 \\le n\\le 2\\times 10^6,\\sum\\limits d_i\\le5\\times10^7$。 \n| 子任务编号 |     $n$     |          特殊性质          | 分值 |\n| :--------: | :------------------: | :-------------------------: | :--: |\n| Subtask #1 |     $\\le 2\\times10^6 $     |   $d_i =1$       |  $10$  |\n| Subtask #2 |     $\\le 5000$     |      无      |  $20$  |\n| Subtask #3 | $\\le 2\\times 10^6$ | $d_i$ 是 $2$ 的次幂 |  $30$  |\n| Subtask #4 | $\\le 2\\times 10^6$ |      无      |  $40$  |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LMXOI Round 1] Size", "background": "在漆黑的夜晚，魔女带走了 LMX，HQZ 为了拯救 LMX。要完成魔女给出的任务。", "description": "魔女给出一个长度为 $n$ 的序列 $d$，魔女想要求得：\n\n$$\\sum\\limits_{i=1}^{ n}\\sum\\limits_{j=1}^{n}{((d_i\\oplus d_j)+(d_i \\otimes d_j))}$$\n\n其中定义 $\\oplus$ 代表二进制下两数相加的和数位上 $1$ 的个数， $\\otimes$ 代表二进制下较大减较小的差数位上 $1$ 的个数。", "inputFormat": "一行一个整数 $n$ 表示序列的长度。\n\n第二行 $n$ 个非负整数，表示序列 $d$。", "outputFormat": "一行一个整数表示答案。", "hint": "**样例解释 #1**\n\n如下表所示，因此答案为 $1 + 2 + 2 + 2 = 7$。\n| $i$ | $j$ | $ans$ |\n| :-----: | :-----: | :-------: |\n| $1$ | $1$ | $1$ |\n| $1$ | $2$ | $2$ |\n| $2$ | $1$ | $2$ |\n| $2$ | $2$ | $2$ |\n\n\n对于 $100 \\%$ 的数据，保证 $1 \\le n\\le 2\\times 10^6,\\sum\\limits d_i\\le5\\times10^7$。 \n| 子任务编号 |     $n$     |          特殊性质          | 分值 |\n| :--------: | :------------------: | :-------------------------: | :--: |\n| Subtask #1 |     $\\le 2\\times10^6 $     |   $d_i =1$       |  $10$  |\n| Subtask #2 |     $\\le 5000$     |      无      |  $20$  |\n| Subtask #3 | $\\le 2\\times 10^6$ | $d_i$ 是 $2$ 的次幂 |  $30$  |\n| Subtask #4 | $\\le 2\\times 10^6$ |      无      |  $40$  |", "locale": "zh-CN"}}}
{"pid": "P10115", "type": "P", "difficulty": 4, "samples": [["5\n()(()\n1 3 2 3 5", "4"], ["10\n()((())())\n2 4 1 7 3 2 8 4 9 5", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "枚举"], "title": "[LMXOI Round 1] Placer", "background": "LMX 最近迷上了括号序列，她尤其钟爱合法括号序列。\n\nLMX 为了检验 HQZ 的真诚，于是她出一道题准备考验下 HQZ。\n", "description": "LMX 给出了一个长度为 $n$ 括号序列 $S$，以及一个长度为 $n$ 的序列 $a_i$。\n\n定义 $w(l,r)=\n\\begin{cases}\na_r-a_l, & S_{l..r} \\text{为合法括号序列}\\\\\n\\ 0 & \\text{otherwise}\n\\end{cases}$\n\n你可以将序列分成若干非空子段，定义整个序列的美丽度为每段的 $w(l , r)$ 之和。\n\n求美丽度最大为多少。", "inputFormat": "第一行一个整数 $n$。\n\n第二行一个字符串，代表括号序列。\n\n第三行代表序列 $a$。", "outputFormat": "第一行一个整数，表示最大的美丽度。", "hint": "**样例解释 #1**\n\n原串可以划分成三个区间：$[1,2],[3,3],[4,5]$。贡献为 $(a_2-a_1)+0+(a_5-a_4)=(3-1)+0+(5-3)=4$\n\n| 子任务编号 | $n$ | 特殊性质 | 分值 |\n| :--------: | :--------: | :-------------: | :--: |\n| Subtask #1 | $\\le 5000$ | 无 | $30$ |\n| Subtask #2 | $\\le 10 ^ 5$ | 无 | $20$ |\n| Subtask #3 | $\\le 3 \\times 10 ^ 6$ | 括号序列为 $()()\\dots()$ | $15$ |\n| Subtask #4 | $\\le 3 \\times 10 ^ 6$ | 无 | $35$ |\n\n对于 $100\\%$ 的数据，$1\\le a_i \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LMXOI Round 1] Placer", "background": "LMX 最近迷上了括号序列，她尤其钟爱合法括号序列。\n\nLMX 为了检验 HQZ 的真诚，于是她出一道题准备考验下 HQZ。\n", "description": "LMX 给出了一个长度为 $n$ 括号序列 $S$，以及一个长度为 $n$ 的序列 $a_i$。\n\n定义 $w(l,r)=\n\\begin{cases}\na_r-a_l, & S_{l..r} \\text{为合法括号序列}\\\\\n\\ 0 & \\text{otherwise}\n\\end{cases}$\n\n你可以将序列分成若干非空子段，定义整个序列的美丽度为每段的 $w(l , r)$ 之和。\n\n求美丽度最大为多少。", "inputFormat": "第一行一个整数 $n$。\n\n第二行一个字符串，代表括号序列。\n\n第三行代表序列 $a$。", "outputFormat": "第一行一个整数，表示最大的美丽度。", "hint": "**样例解释 #1**\n\n原串可以划分成三个区间：$[1,2],[3,3],[4,5]$。贡献为 $(a_2-a_1)+0+(a_5-a_4)=(3-1)+0+(5-3)=4$\n\n| 子任务编号 | $n$ | 特殊性质 | 分值 |\n| :--------: | :--------: | :-------------: | :--: |\n| Subtask #1 | $\\le 5000$ | 无 | $30$ |\n| Subtask #2 | $\\le 10 ^ 5$ | 无 | $20$ |\n| Subtask #3 | $\\le 3 \\times 10 ^ 6$ | 括号序列为 $()()\\dots()$ | $15$ |\n| Subtask #4 | $\\le 3 \\times 10 ^ 6$ | 无 | $35$ |\n\n对于 $100\\%$ 的数据，$1\\le a_i \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10116", "type": "P", "difficulty": 5, "samples": [["3 2 2 2\n1 1", "4"], ["2 1 2 2\n1 1", "12"], ["10 3 114 51419\n19 2", "266405589"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "组合数学", "容斥原理"], "title": "[LMXOI Round 1] Random", "background": "LMX 给 HQZ 一个有趣的序列，HQZ 为了了解 LMX 的爱好，想要解决下面的问题。  ", "description": "给出一个初始全为 $0$ 长为 $n$ 的序列，我们会进行如下操作 $q$ 次。\n\n+ 任意选择一个位置 $t$ 并把上面的数字修改成任意一个 $1$ 到 $k$ 之间的数。\n\n也就是说我们一共会有 $(nk)^q$ 种不同的询问序列，而对于每一种不同的询问序列，对应的也就拥有了 $(nk)^q$ 个结果序列。\n\n接着，给出一个长度为 $m$ 匹配序列 $B$，需要求出这个匹配序列在每一个结果序列中出现的次数和。注意，一个结果序列中若出现多个匹配序列应当重复计算。\n\n由于答案太大，你只需要输出答案对 $998244353$ 取模后的结果。\n\n**本题使用特定方式生成输入数据。**\n\n生成格式如下： $x_i=(a \\times i+b)\\bmod k +1$ ，其中 $x_i$ 表示序列 $B$ 第 $i$ 位所需求的数字。", "inputFormat": "第一行四个整数 $n,m,q,k$ 其中 $m$ 为 $B$ 序列的长度。\n\n第二行二个整数 $a,b$。", "outputFormat": "一行一个整数表示答案。", "hint": "**样例解释 #1**\n\n下述操作序列，存在序列 $B$：\n+ $[1,1],[2,2]$ 序列为 $[1,2,0]$\n+ $[2,2],[1,1]$ 序列为 $[1,2,0]$\n+ $[2,1],[3,2]$ 序列为 $[0,1,2]$\n+ $[3,2],[2,1]$ 序列为 $[0,1,2]$\n\n对于 $100\\%$ 的数据，保证 $\\forall x_i \\in B, 1\\le x_i\\le k$，$0 \\le a,b\\le 10^9$，且 $m\\le n$。\n\n| 子任务编号 |      $n,q,k$      |    $m$    | 特殊性质 |  分值  |\n| :--------: | :------------------: | :----------: | :------: | :----: |\n| Subtask #1 |     $\\le 10^9$     | $\\le 200$ | $q< m$ | $5$ |\n| Subtask #2 |      $\\le 4$      |  $\\le 4$  |    无    | $10$ |\n| Subtask #3 |     $\\le 500$     | $\\le 200$ |    无    | $10$ |\n| Subtask #4 | $\\le 2\\times 10^5$ | $\\le 200$ |    无    | $20$ |\n| Subtask #5 |     $\\le 10^9$     | $\\le 200$ |    无    | $20$ |\n| Subtask #6 |     $\\le 10^9$     | $\\le 3\\times 10^6$ |    无    |   $35$   |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LMXOI Round 1] Random", "background": "LMX 给 HQZ 一个有趣的序列，HQZ 为了了解 LMX 的爱好，想要解决下面的问题。  ", "description": "给出一个初始全为 $0$ 长为 $n$ 的序列，我们会进行如下操作 $q$ 次。\n\n+ 任意选择一个位置 $t$ 并把上面的数字修改成任意一个 $1$ 到 $k$ 之间的数。\n\n也就是说我们一共会有 $(nk)^q$ 种不同的询问序列，而对于每一种不同的询问序列，对应的也就拥有了 $(nk)^q$ 个结果序列。\n\n接着，给出一个长度为 $m$ 匹配序列 $B$，需要求出这个匹配序列在每一个结果序列中出现的次数和。注意，一个结果序列中若出现多个匹配序列应当重复计算。\n\n由于答案太大，你只需要输出答案对 $998244353$ 取模后的结果。\n\n**本题使用特定方式生成输入数据。**\n\n生成格式如下： $x_i=(a \\times i+b)\\bmod k +1$ ，其中 $x_i$ 表示序列 $B$ 第 $i$ 位所需求的数字。", "inputFormat": "第一行四个整数 $n,m,q,k$ 其中 $m$ 为 $B$ 序列的长度。\n\n第二行二个整数 $a,b$。", "outputFormat": "一行一个整数表示答案。", "hint": "**样例解释 #1**\n\n下述操作序列，存在序列 $B$：\n+ $[1,1],[2,2]$ 序列为 $[1,2,0]$\n+ $[2,2],[1,1]$ 序列为 $[1,2,0]$\n+ $[2,1],[3,2]$ 序列为 $[0,1,2]$\n+ $[3,2],[2,1]$ 序列为 $[0,1,2]$\n\n对于 $100\\%$ 的数据，保证 $\\forall x_i \\in B, 1\\le x_i\\le k$，$0 \\le a,b\\le 10^9$，且 $m\\le n$。\n\n| 子任务编号 |      $n,q,k$      |    $m$    | 特殊性质 |  分值  |\n| :--------: | :------------------: | :----------: | :------: | :----: |\n| Subtask #1 |     $\\le 10^9$     | $\\le 200$ | $q< m$ | $5$ |\n| Subtask #2 |      $\\le 4$      |  $\\le 4$  |    无    | $10$ |\n| Subtask #3 |     $\\le 500$     | $\\le 200$ |    无    | $10$ |\n| Subtask #4 | $\\le 2\\times 10^5$ | $\\le 200$ |    无    | $20$ |\n| Subtask #5 |     $\\le 10^9$     | $\\le 200$ |    无    | $20$ |\n| Subtask #6 |     $\\le 10^9$     | $\\le 3\\times 10^6$ |    无    |   $35$   |", "locale": "zh-CN"}}}
{"pid": "P10117", "type": "P", "difficulty": 5, "samples": [["5\n3 998244353\n3\n3 2\n5 1\n7 1\n4 1000000009\n2\n2 1\n3 2\n1 998244353\n2\n2 2\n3 1\n11451 191981012\n11\n2 1\n3 1\n5 1\n7 1\n11 1\n13 1\n17 1\n19 1\n23 1\n29 1\n31 1\n514 520\n2\n2 10\n3 10", "189282114\n124678\n14965\n82966193\n260\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720, 30720]}, "tags": ["数论", "O2优化"], "title": "[LMXOI Round 1] Dreamer", "background": "[加强版链接](https://www.luogu.com.cn/problem/U402756)。\n\n这是一道数学题，可是 LMX 给 HQZ 出的。", "description": "定义积性函数 $f(n)=(\\mu \\ast\\operatorname{Id_2})(n)$。\n\n给定 $n,k$，你需要求出 \n\n$$\\sum_{i_1\\mid n}\\sum_{i_2\\mid i_1}\\cdots\\sum_{i_k\\mid i_{k-1}}f(i_k)i_1i_k\\mu^2\\left(\\dfrac{i_1}{i_k}\\right)$$\n\n#### Tips：\n\n$\\mu$ 表示莫比乌斯函数。\n\n关于 $f$，$f(n)=\\displaystyle \\sum_{d\\mid n}\\mu(d)\\left(\\dfrac{n}{d}\\right)^2$。", "inputFormat": "本题有多组数据，第一行输入一个正整数 $T$，表示数据组数。\n\n考虑到 $n$ 很大，所以我们会给出 $n$ 的标准质因子分解 $n=\\displaystyle \\prod_{i=1}^t p_i^{\\alpha_i}$。\n\n对于每一组询问，我们首先给出两个整数 $k,m$。\n\n第二行给出 $t$，下面 $t$ 行每行两个整数表示 $p_i,\\alpha_i$。\n\n（保证 $p_i\\ge p_{i-1},i\\ge 2$，$\\alpha_i\\ge 1$）。\n", "outputFormat": "对于每个询问，输出一行表示答案 $\\mod m$ 的值。", "hint": "对于 $100\\%$ 的数据，有 $T \\le 20,n\\le 10^{24},1\\le k\\le 10^6,m\\le 1.14\\times 10^9$。\n\n| 测试点编号 |      $n$      |    $k$     |   $T$    | 特殊性质 |\n| :--------: | :-----------: | :--------: | :------: | :------: |\n|    $1$     |   $\\le 80$    |  $\\le 4$   | $\\le 5$  |   $N$    |\n|    $2$     |  $\\le 10^6$   |  $\\le 10$  | $\\le 5$  |   $N$    |\n|    $3$     | $\\le 10^{12}$ |  $\\le 20$  | $\\le 20$ |   $N$    |\n|    $4$     | $\\le 10^{18}$ |  $\\le 1$   | $\\le 20$ |   $N$    |\n|    $5$     | $\\le 10^{18}$ | $\\le 10^3$ | $\\le 20$ |   $N$    |\n|    $6$     | $\\le 10^{18}$ | $\\le 10^5$ | $\\le 20$ |   $A$    |\n|    $7$     | $\\le 10^{18}$ | $\\le 10^6$ | $\\le 20$ |   $B$    |\n|    $8$     | $\\le 10^{24}$ | $\\le 10^6$ | $\\le 20$ |   $B$    |\n|    $9$     | $\\le 10^{24}$ | $\\le 10^6$ | $\\le 20$ |   $C$    |\n|    $10\\sim20$    | $\\le 10^{24}$ | $\\le 10^6$ | $\\le 20$ |   $N$    |\n\n性质 $A$：保证 $t\\le 10$。\n\n性质 $B$：保证 $n$ 的质因子分解 $\\displaystyle\\prod_{i=1}^t p_i^{\\alpha_i}$ 中 $\\alpha_i=1$。\n\n性质 $C$：$m$ 是素数，且保证 $\\gcd(n,m)=1$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[LMXOI Round 1] Dreamer", "background": "[加强版链接](https://www.luogu.com.cn/problem/U402756)。\n\n这是一道数学题，可是 LMX 给 HQZ 出的。", "description": "定义积性函数 $f(n)=(\\mu \\ast\\operatorname{Id_2})(n)$。\n\n给定 $n,k$，你需要求出 \n\n$$\\sum_{i_1\\mid n}\\sum_{i_2\\mid i_1}\\cdots\\sum_{i_k\\mid i_{k-1}}f(i_k)i_1i_k\\mu^2\\left(\\dfrac{i_1}{i_k}\\right)$$\n\n#### Tips：\n\n$\\mu$ 表示莫比乌斯函数。\n\n关于 $f$，$f(n)=\\displaystyle \\sum_{d\\mid n}\\mu(d)\\left(\\dfrac{n}{d}\\right)^2$。", "inputFormat": "本题有多组数据，第一行输入一个正整数 $T$，表示数据组数。\n\n考虑到 $n$ 很大，所以我们会给出 $n$ 的标准质因子分解 $n=\\displaystyle \\prod_{i=1}^t p_i^{\\alpha_i}$。\n\n对于每一组询问，我们首先给出两个整数 $k,m$。\n\n第二行给出 $t$，下面 $t$ 行每行两个整数表示 $p_i,\\alpha_i$。\n\n（保证 $p_i\\ge p_{i-1},i\\ge 2$，$\\alpha_i\\ge 1$）。\n", "outputFormat": "对于每个询问，输出一行表示答案 $\\mod m$ 的值。", "hint": "对于 $100\\%$ 的数据，有 $T \\le 20,n\\le 10^{24},1\\le k\\le 10^6,m\\le 1.14\\times 10^9$。\n\n| 测试点编号 |      $n$      |    $k$     |   $T$    | 特殊性质 |\n| :--------: | :-----------: | :--------: | :------: | :------: |\n|    $1$     |   $\\le 80$    |  $\\le 4$   | $\\le 5$  |   $N$    |\n|    $2$     |  $\\le 10^6$   |  $\\le 10$  | $\\le 5$  |   $N$    |\n|    $3$     | $\\le 10^{12}$ |  $\\le 20$  | $\\le 20$ |   $N$    |\n|    $4$     | $\\le 10^{18}$ |  $\\le 1$   | $\\le 20$ |   $N$    |\n|    $5$     | $\\le 10^{18}$ | $\\le 10^3$ | $\\le 20$ |   $N$    |\n|    $6$     | $\\le 10^{18}$ | $\\le 10^5$ | $\\le 20$ |   $A$    |\n|    $7$     | $\\le 10^{18}$ | $\\le 10^6$ | $\\le 20$ |   $B$    |\n|    $8$     | $\\le 10^{24}$ | $\\le 10^6$ | $\\le 20$ |   $B$    |\n|    $9$     | $\\le 10^{24}$ | $\\le 10^6$ | $\\le 20$ |   $C$    |\n|    $10\\sim20$    | $\\le 10^{24}$ | $\\le 10^6$ | $\\le 20$ |   $N$    |\n\n性质 $A$：保证 $t\\le 10$。\n\n性质 $B$：保证 $n$ 的质因子分解 $\\displaystyle\\prod_{i=1}^t p_i^{\\alpha_i}$ 中 $\\alpha_i=1$。\n\n性质 $C$：$m$ 是素数，且保证 $\\gcd(n,m)=1$。\n\n", "locale": "zh-CN"}}}
{"pid": "P10118", "type": "P", "difficulty": 4, "samples": [["3 23\n8 1\n10 4\n6 0\n", "8\n2\n8\n"], ["6 883\n196483 132\n330788 4353\n137168 35030\n615316 264202\n387442 0\n407154 0\n", "579\n432\n0\n27\n807\n845\n"], ["3 30996377\n948664793464517468 401148893358688606\n945266152577109588 398323527798785832\n185133025738933982 77893802910442339\n", "29793121\n28589865\n30695563\n"], ["5 992362009\n248232552654965455 563160474979616\n553521216364206023 14357560845404368\n668113789984338832 146840018434951169\n620025528908068087 506797735136774536\n522926854352266209 860580850297773973\n", "150959267\n319548082\n888288513\n0\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "O2优化", "组合数学", "位运算"], "title": "『STA - R4』And", "background": "", "description": "给定非负整数 $A, B$，定义有序非负整数对 $(x, y)$ 为好的当且仅当：\n\n- $0 \\le x \\le y$；\n- $x + y = A$；\n- $x \\operatorname{AND} y = B$。\n\n其中 $\\operatorname{AND}$ 代表按位与运算。在 C++ 语言中由 `&` 运算符表示。\n\n你需要求出所有好的有序非负整数对 $(x, y)$ 的 $y - x$ 的和。\n\n由于该值可能很大，你只需要输出其对 $M$ 取模后的结果。\n\n形式化的，你需要求出\n\n$$\\left(\\sum\\limits_{x \\ge 0}\\sum\\limits_{y \\ge 0}\\left(y - x\\right)\\left[\\operatorname{good}(x, y)\\right]\\right)\\bmod M$$\n\n其中 $\\operatorname{good}(x, y)$ 为真与有序非负整数对 $(x, y)$ 为好的等价。", "inputFormat": "**本题单个测试点内含有多组询问。**\n\n第一行两个整数 $T, M$，分别代表询问组数和模数。\n\n接下来 $T$ 行，每行两个非负整数 $A, B$，代表一组询问。", "outputFormat": "对于每组测试数据，输出一行一个整数，代表答案。", "hint": "**【样例 #1 解释】**\n\n对于第一组询问，好的数对有 $\\left(1, 7\\right)$ 和 $\\left(3, 5\\right)$，因此答案为 $\\left(7 - 1\\right) + \\left(5 - 3\\right) = 8$。\n\n对于第二组询问，好的数对只有 $\\left(4, 6\\right)$，因此答案为 $6 - 4 = 2$。\n\n对于第三组询问，好的数对有 $\\left(0, 6\\right)$ 和 $\\left(2, 4\\right)$，因此答案为 $\\left(6 - 0\\right) + \\left(4 - 2\\right) = 8$。\n\n**【样例 #2 解释】**\n\n其所有询问均满足子任务 1 的限制，且后两组询问同时满足子任务 3 的限制。\n\n特别的，在第三组询问的限制下，不存在好的有序非负整数对，因此答案为 $0$。\n\n**【样例 #3 解释】**\n\n其所有询问均满足子任务 2 的限制。\n\n**【样例 #4 解释】**\n\n其所有询问均满足子任务 4 的限制。\n\n特别的，在第四、五组询问的限制下，不存在好的有序非负整数对，因此答案为 $0$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据：\n\n- $1 \\le T \\le 3 \\times 10^5$；\n- $0 \\le A, B < 2^{60}$；\n- $5 \\le M \\le 1.1 \\times 10^9$；\n- $M$ 为质数。\n\n具体部分分分配如下：\n\n|Subtask 编号|数据范围|分值|\n|:--------:|:--------:|:--------:|\n|1|$T \\le 200, 0 \\le A, B \\le 8 \\times 10^5$|$15$|\n|2|对于每组询问，好的数对个数不超过 $1000$ 个|$25$|\n|3|$B = 0$|$25$|\n|4|无特殊限制|$35$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R4』And", "background": "", "description": "给定非负整数 $A, B$，定义有序非负整数对 $(x, y)$ 为好的当且仅当：\n\n- $0 \\le x \\le y$；\n- $x + y = A$；\n- $x \\operatorname{AND} y = B$。\n\n其中 $\\operatorname{AND}$ 代表按位与运算。在 C++ 语言中由 `&` 运算符表示。\n\n你需要求出所有好的有序非负整数对 $(x, y)$ 的 $y - x$ 的和。\n\n由于该值可能很大，你只需要输出其对 $M$ 取模后的结果。\n\n形式化的，你需要求出\n\n$$\\left(\\sum\\limits_{x \\ge 0}\\sum\\limits_{y \\ge 0}\\left(y - x\\right)\\left[\\operatorname{good}(x, y)\\right]\\right)\\bmod M$$\n\n其中 $\\operatorname{good}(x, y)$ 为真与有序非负整数对 $(x, y)$ 为好的等价。", "inputFormat": "**本题单个测试点内含有多组询问。**\n\n第一行两个整数 $T, M$，分别代表询问组数和模数。\n\n接下来 $T$ 行，每行两个非负整数 $A, B$，代表一组询问。", "outputFormat": "对于每组测试数据，输出一行一个整数，代表答案。", "hint": "**【样例 #1 解释】**\n\n对于第一组询问，好的数对有 $\\left(1, 7\\right)$ 和 $\\left(3, 5\\right)$，因此答案为 $\\left(7 - 1\\right) + \\left(5 - 3\\right) = 8$。\n\n对于第二组询问，好的数对只有 $\\left(4, 6\\right)$，因此答案为 $6 - 4 = 2$。\n\n对于第三组询问，好的数对有 $\\left(0, 6\\right)$ 和 $\\left(2, 4\\right)$，因此答案为 $\\left(6 - 0\\right) + \\left(4 - 2\\right) = 8$。\n\n**【样例 #2 解释】**\n\n其所有询问均满足子任务 1 的限制，且后两组询问同时满足子任务 3 的限制。\n\n特别的，在第三组询问的限制下，不存在好的有序非负整数对，因此答案为 $0$。\n\n**【样例 #3 解释】**\n\n其所有询问均满足子任务 2 的限制。\n\n**【样例 #4 解释】**\n\n其所有询问均满足子任务 4 的限制。\n\n特别的，在第四、五组询问的限制下，不存在好的有序非负整数对，因此答案为 $0$。\n\n**【数据范围】**\n\n**本题采用捆绑测试。**\n\n对于 $100\\%$ 的数据：\n\n- $1 \\le T \\le 3 \\times 10^5$；\n- $0 \\le A, B < 2^{60}$；\n- $5 \\le M \\le 1.1 \\times 10^9$；\n- $M$ 为质数。\n\n具体部分分分配如下：\n\n|Subtask 编号|数据范围|分值|\n|:--------:|:--------:|:--------:|\n|1|$T \\le 200, 0 \\le A, B \\le 8 \\times 10^5$|$15$|\n|2|对于每组询问，好的数对个数不超过 $1000$ 个|$25$|\n|3|$B = 0$|$25$|\n|4|无特殊限制|$35$|", "locale": "zh-CN"}}}
{"pid": "P10119", "type": "P", "difficulty": 5, "samples": [["0 2\n8 3 2 3\n0 -2\n5 -10\n8 0\n-10 -7\n0 -3\n-4 -9\n-9 -3\n-7 0\n8 3 2 -6\n9 6\n9 -6\n3 7\n-4 3\n8 -9\n6 0\n-10 9\n-8 -4\n", "5\n36\n"], ["0 1\n12 3 2 -35771156\n797235777 25138038\n801541087 -405462832\n936777370 -973167834\n74493410 60154946\n263320806 782480907\n-940214410 805511853\n806065179 463119365\n-295177485 -112301429\n-403964212 202831413\n122359196 611468120\n-555210139 549749508\n793784715 -38433603\n", "6706692096\n"], ["0 1\n5 2 1 -100\n-44 -72\n-36 -23\n-4 0\n-22 -1\n-88 3\n", "-65\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "单调队列", "O2优化", "动态规划优化", "前缀和"], "title": "『STA - R4』踱步", "background": "", "description": "小 X 特别喜欢安静的环境，因为那可以让他心情愉悦。\n\n现在给出 $N$ 分钟内每分钟屋内和屋外对小 X 的心情影响值，在这 $N$ 分钟内，小 X 可以从屋内踱步到屋外或是从屋外踱步到屋内**最多共** $K$ 次。（小 X 当且仅当每分钟初进行踱步，同一时刻至多踱步一次，并且踱步的时间忽略不计。第 $1$ 分钟初不可踱步，第 $N$ 分钟初可以踱步。但是在第 $1$ 分钟初可以自由选择初始状态）。\n\n同时，过于频繁的改变会让小 X 心情烦躁，所以如果两次踱步的间隔**小于等于** $T$ 分钟，会对小 X 的心情额外造成 $P$ 点影响。（如果此次踱步是在第 $t_a$ 分钟初，上一次踱步是在第 $t_b$ 分钟初，那么这两次踱步的时间间隔为 $t_a - t_b$ 分钟）。\n\n小 X 想知道自己的心情最好可以是多少，即第 $N$ 分钟末小 X 心情值的最大值。\n\n若某一时刻小 X 的心情值为 $a$，之后小 X 的心情被影响了 $b$，那么在此之后小 X 的心情值将变为 $a + b$。", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行两个正整数 $\\text{id},\\text{TEST}$。其中 $\\text{id}$ 代表 Subtask 编号，$\\text{TEST}$ 代表测试数据组数。特别的，样例的 $\\text{id}$ 为 $0$。\n\n对于每组测试数据：\n\n第一行为四个整数 $N, K, T, P$。\n\n接下来 $N$ 行每行两个整数。其中第 $i$ 行的两个整数 $a_i, b_i$ 分别代表第 $i$ 分钟屋内和屋外对小 X 心情的影响值。", "outputFormat": "对于每组测试数据，输出一行一个整数，代表第 $N$ 分钟末小 X 心情值的最大值。", "hint": "**【样例 #1 解释】**\n\n对于第 $1$ 组数据，最优方案为初始时选择在屋内，分别在第 $4, 5, 7$ 分钟初进行踱步。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cx7tr8m2.png)\n\n其中第 $2$ 次踱步与第 $1$ 次踱步之间的间隔为 $5 - 4 = 1$ 分钟，对小 $\\text{X}$ 的心情产生 $3$ 的贡献，第 $3$ 次踱步与第 $2$ 次踱步之间的间隔为 $7 - 5 = 2$ 分钟，对小 X 的心情产生 $3$ 的贡献。\n\n因此小 X 的心情值为\n\n$$\\left(0+5+8-7+0-4-3+0\\right) + 6 = 5$$\n\n前半部分为灰色格子的权值和，后半部分为两次频繁踱步产生的额外贡献，可以证明此方案最优。\n\n**【样例 #2 解释】**\n\n请注意答案可能超过 $32$ 位整型数字的范围。\n\n**【样例 #3 解释】**\n\n请注意答案可能为负数。\n\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据：\n\n- $1 \\le \\text{TEST} \\le 10^5$；\n- $2 \\le N \\le 2 \\times 10^5$；\n- $1 \\le K \\le \\min\\left\\{200, N\\right\\}$；\n- $1 \\le T \\le \\min\\left\\{2 \\times 10^4, N\\right\\}$；\n- $\\left\\lvert a_i \\right\\rvert,\\left\\lvert b_i \\right\\rvert,\\left\\lvert P \\right\\rvert \\le 10^9$。\n- $\\sum N \\cdot K \\le 5 \\times 10^7$。\n- 保证单个测试点输入数据规模不超过 10 MB。\n\n**本题采用捆绑测试。**\n\n|Subtask 编号|数据范围|分值|依赖子任务|\n|:--------:|:--------:|:--------:|:--------:|\n|1|$N \\le 20, \\text{TEST} \\le 10$|$5$||\n|2|$\\sum N^2K \\le 5 \\times 10^7$|$20$|$1$|\n|3|$K \\le 5, N \\le 5 \\times 10^4, \\text{TEST} \\le 10$|$15$||\n|4|$P=-10^9, 0 \\le \\left\\lvert a_i \\right\\rvert,\\left\\lvert b_i \\right\\rvert \\le 100$|$30$||\n|5|无特殊限制|$30$|$1,2,3,4$|", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R4』踱步", "background": "", "description": "小 X 特别喜欢安静的环境，因为那可以让他心情愉悦。\n\n现在给出 $N$ 分钟内每分钟屋内和屋外对小 X 的心情影响值，在这 $N$ 分钟内，小 X 可以从屋内踱步到屋外或是从屋外踱步到屋内**最多共** $K$ 次。（小 X 当且仅当每分钟初进行踱步，同一时刻至多踱步一次，并且踱步的时间忽略不计。第 $1$ 分钟初不可踱步，第 $N$ 分钟初可以踱步。但是在第 $1$ 分钟初可以自由选择初始状态）。\n\n同时，过于频繁的改变会让小 X 心情烦躁，所以如果两次踱步的间隔**小于等于** $T$ 分钟，会对小 X 的心情额外造成 $P$ 点影响。（如果此次踱步是在第 $t_a$ 分钟初，上一次踱步是在第 $t_b$ 分钟初，那么这两次踱步的时间间隔为 $t_a - t_b$ 分钟）。\n\n小 X 想知道自己的心情最好可以是多少，即第 $N$ 分钟末小 X 心情值的最大值。\n\n若某一时刻小 X 的心情值为 $a$，之后小 X 的心情被影响了 $b$，那么在此之后小 X 的心情值将变为 $a + b$。", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n第一行两个正整数 $\\text{id},\\text{TEST}$。其中 $\\text{id}$ 代表 Subtask 编号，$\\text{TEST}$ 代表测试数据组数。特别的，样例的 $\\text{id}$ 为 $0$。\n\n对于每组测试数据：\n\n第一行为四个整数 $N, K, T, P$。\n\n接下来 $N$ 行每行两个整数。其中第 $i$ 行的两个整数 $a_i, b_i$ 分别代表第 $i$ 分钟屋内和屋外对小 X 心情的影响值。", "outputFormat": "对于每组测试数据，输出一行一个整数，代表第 $N$ 分钟末小 X 心情值的最大值。", "hint": "**【样例 #1 解释】**\n\n对于第 $1$ 组数据，最优方案为初始时选择在屋内，分别在第 $4, 5, 7$ 分钟初进行踱步。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cx7tr8m2.png)\n\n其中第 $2$ 次踱步与第 $1$ 次踱步之间的间隔为 $5 - 4 = 1$ 分钟，对小 $\\text{X}$ 的心情产生 $3$ 的贡献，第 $3$ 次踱步与第 $2$ 次踱步之间的间隔为 $7 - 5 = 2$ 分钟，对小 X 的心情产生 $3$ 的贡献。\n\n因此小 X 的心情值为\n\n$$\\left(0+5+8-7+0-4-3+0\\right) + 6 = 5$$\n\n前半部分为灰色格子的权值和，后半部分为两次频繁踱步产生的额外贡献，可以证明此方案最优。\n\n**【样例 #2 解释】**\n\n请注意答案可能超过 $32$ 位整型数字的范围。\n\n**【样例 #3 解释】**\n\n请注意答案可能为负数。\n\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据：\n\n- $1 \\le \\text{TEST} \\le 10^5$；\n- $2 \\le N \\le 2 \\times 10^5$；\n- $1 \\le K \\le \\min\\left\\{200, N\\right\\}$；\n- $1 \\le T \\le \\min\\left\\{2 \\times 10^4, N\\right\\}$；\n- $\\left\\lvert a_i \\right\\rvert,\\left\\lvert b_i \\right\\rvert,\\left\\lvert P \\right\\rvert \\le 10^9$。\n- $\\sum N \\cdot K \\le 5 \\times 10^7$。\n- 保证单个测试点输入数据规模不超过 10 MB。\n\n**本题采用捆绑测试。**\n\n|Subtask 编号|数据范围|分值|依赖子任务|\n|:--------:|:--------:|:--------:|:--------:|\n|1|$N \\le 20, \\text{TEST} \\le 10$|$5$||\n|2|$\\sum N^2K \\le 5 \\times 10^7$|$20$|$1$|\n|3|$K \\le 5, N \\le 5 \\times 10^4, \\text{TEST} \\le 10$|$15$||\n|4|$P=-10^9, 0 \\le \\left\\lvert a_i \\right\\rvert,\\left\\lvert b_i \\right\\rvert \\le 100$|$30$||\n|5|无特殊限制|$30$|$1,2,3,4$|", "locale": "zh-CN"}}}
{"pid": "P10120", "type": "P", "difficulty": 5, "samples": [["5 12\n1 3 4 8\n3\n2 3 4 6\n3\n1 2 2 3\n3\n2 1 5 6\n3\n1 2 3 3\n3\n2 1 5 3\n3\n", "5\n3\n3\n1\n1\n0\n"], ["9 18\n1 8 9 5\n3\n1 5 8 20\n3\n2 8 9 18\n3\n2 6 9 6\n3\n2 1 2 5\n3\n2 9 9 8\n3\n2 3 9 14\n3\n1 6 8 13\n3\n2 3 5 17\n3\n", "9\n9\n7\n5\n3\n3\n0\n0\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "O2优化"], "title": "『STA - R4』冰红茶", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/sdchy9ah.png)\n\n某编程网站 BTC 长期在它的 Beginner Contest 的最后一题放科技模板题，于是 APJifengc 愤怒地在它的评测机上洒了若干瓶冰红茶，导致一些评测单元的运行速度快了 $10^{12}$ 倍，暴力跑得和正解一样快。\n\n因为 BTC 不能出科技模板题了，所以 BTC 的站长想要让你维护一下 APJifengc 每次洒冰红茶后可用的评测单元个数，以便于统筹评测资源与灾后重建。\n\n**已加入 Hack 数据，位于 Subtask 5，不计分。**", "description": "有 $n$ 个 bot 排成一排，每天所有 bot 都会喝冰红茶。\n\n要求动态维护一排 bot，有三种操作或询问：\n- `1 l r k`，表示 $[l,r]$ 内的 bot 会喝 $k$ 瓶原味冰红茶、$[l,r]$ 外的 bot 会喝 $k$ 瓶热带风味冰红茶。\n- `2 l r k`，表示 BTC 站长愤怒地把 $[l,r]$ 中最后连续喝了至少 $k$ 瓶口味相同的冰红茶的 bot 击毁。\n- `3`，查询有多少个存活的 bot。\n\n注：在 2 操作中，击毁不会改变 bot 的编号。", "inputFormat": "第一行两个正整数 $n,q$。\n\n后 $q$ 行，每行描述一个操作或询问，形如以下三种中的一种：\n- `1 l r k`；\n- `2 l r k`；\n- `3`。", "outputFormat": "若干行，每行回答一个询问 3。", "hint": "### 样例 1 解释\n\n只说明操作 1 和操作 2。\n\n第一次操作，三号和四号 bot 喝了 8 瓶原味冰红茶，其他 bot 喝了 8 瓶热带风味冰红茶。\n\n第二次操作，三号和四号 bot 连续喝了 8 瓶原味冰红茶，被击毁，现在场上还有 3 个存活 bot。\n\n第三次操作，二号 bot 喝了 3 瓶原味冰红茶，其他 bot 喝了 3 瓶热带风味冰红茶。\n\n第四次操作，一号和五号 bot 连续喝了 11 瓶热带风味冰红茶，被击毁，现在场上还有 1 个存活 bot。\n\n第五次操作，二号 bot 喝了 3 瓶原味冰红茶。\n\n第六次操作，二号 bot 连续喝了 6 瓶原味冰红茶，被击毁，现在场上没有存活的 bot。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1 (5pts)：$n,q\\le 10^3$。\n- Subtask 2 (20pts)：所有操作 2 中 $k\\le 20$。\n- Subtask 3 (25pts)：保证数据随机生成。\n- Subtask 4 (50pts)：无特殊限制。\n\n其中 Subtask 3 的测试数据生成方式如下：\n\n1. 对于每次或询问，从三种类型中等概率选择一个；\n2. 若选取的操作不为 3，那么从 $\\left[1, n\\right]$ 中等概率生成两个数 $l, r$，若 $l > r$，则交换 $l, r$，并将 $l, r$ 作为操作的参数；\n3. 若选取的操作不为 3，那么从 $\\left[1, 10^6\\right]$ 中等概率生成一个数 $k$ 作为操作的参数。\n\n对于全部数据，保证 $1\\le n,q\\le 2\\times 10^5$，$1\\le k\\le 10^{6}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R4』冰红茶", "background": "![](https://cdn.luogu.com.cn/upload/image_hosting/sdchy9ah.png)\n\n某编程网站 BTC 长期在它的 Beginner Contest 的最后一题放科技模板题，于是 APJifengc 愤怒地在它的评测机上洒了若干瓶冰红茶，导致一些评测单元的运行速度快了 $10^{12}$ 倍，暴力跑得和正解一样快。\n\n因为 BTC 不能出科技模板题了，所以 BTC 的站长想要让你维护一下 APJifengc 每次洒冰红茶后可用的评测单元个数，以便于统筹评测资源与灾后重建。\n\n**已加入 Hack 数据，位于 Subtask 5，不计分。**", "description": "有 $n$ 个 bot 排成一排，每天所有 bot 都会喝冰红茶。\n\n要求动态维护一排 bot，有三种操作或询问：\n- `1 l r k`，表示 $[l,r]$ 内的 bot 会喝 $k$ 瓶原味冰红茶、$[l,r]$ 外的 bot 会喝 $k$ 瓶热带风味冰红茶。\n- `2 l r k`，表示 BTC 站长愤怒地把 $[l,r]$ 中最后连续喝了至少 $k$ 瓶口味相同的冰红茶的 bot 击毁。\n- `3`，查询有多少个存活的 bot。\n\n注：在 2 操作中，击毁不会改变 bot 的编号。", "inputFormat": "第一行两个正整数 $n,q$。\n\n后 $q$ 行，每行描述一个操作或询问，形如以下三种中的一种：\n- `1 l r k`；\n- `2 l r k`；\n- `3`。", "outputFormat": "若干行，每行回答一个询问 3。", "hint": "### 样例 1 解释\n\n只说明操作 1 和操作 2。\n\n第一次操作，三号和四号 bot 喝了 8 瓶原味冰红茶，其他 bot 喝了 8 瓶热带风味冰红茶。\n\n第二次操作，三号和四号 bot 连续喝了 8 瓶原味冰红茶，被击毁，现在场上还有 3 个存活 bot。\n\n第三次操作，二号 bot 喝了 3 瓶原味冰红茶，其他 bot 喝了 3 瓶热带风味冰红茶。\n\n第四次操作，一号和五号 bot 连续喝了 11 瓶热带风味冰红茶，被击毁，现在场上还有 1 个存活 bot。\n\n第五次操作，二号 bot 喝了 3 瓶原味冰红茶。\n\n第六次操作，二号 bot 连续喝了 6 瓶原味冰红茶，被击毁，现在场上没有存活的 bot。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n- Subtask 1 (5pts)：$n,q\\le 10^3$。\n- Subtask 2 (20pts)：所有操作 2 中 $k\\le 20$。\n- Subtask 3 (25pts)：保证数据随机生成。\n- Subtask 4 (50pts)：无特殊限制。\n\n其中 Subtask 3 的测试数据生成方式如下：\n\n1. 对于每次或询问，从三种类型中等概率选择一个；\n2. 若选取的操作不为 3，那么从 $\\left[1, n\\right]$ 中等概率生成两个数 $l, r$，若 $l > r$，则交换 $l, r$，并将 $l, r$ 作为操作的参数；\n3. 若选取的操作不为 3，那么从 $\\left[1, 10^6\\right]$ 中等概率生成一个数 $k$ 作为操作的参数。\n\n对于全部数据，保证 $1\\le n,q\\le 2\\times 10^5$，$1\\le k\\le 10^{6}$。", "locale": "zh-CN"}}}
{"pid": "P10121", "type": "P", "difficulty": 7, "samples": [["7\n1 1 2 2 3 3\n", "8"], ["14\n1 2 3 3 2 6 6 6 9 9 10 11 12", "25"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["暴力数据结构", "线段树", "O2优化", "树论", "虚树", "其它技巧"], "title": "『STA - R4』保险丝", "background": "APJ：「？我家保险丝怎么又没了」\n", "description": "给一棵 $n$ 个点的有根树，根是 $1$ 号结点。\n\n定义两个点集 $S_1,S_2$ 的距离为从两个集合分别选出一个点，能得到两点间距离的最小值，即 $\\displaystyle\\operatorname{dist}(S_1,S_2)=\\min_{\\substack{u\\in S_1\\\\v\\in S_2}}\\operatorname{dist}(u,v)$，其中 $\\operatorname{dist}(u,v)$ 是点 $u,v$ 间的距离。\n\n定义 $\\operatorname{path}(u,v)$ 是 $u$ 到 $v$ 的简单路径上的所有点组成的集合，$\\mathcal L$ 是所有叶子组成的集合。\n\n对于固定正整数 $u$，定义满足如下条件的结点 $v$ 构成 $u$ 的半邻域 $\\mathring U(u)$：\n- $v$ 在 $u$ 子树内；\n- $\\operatorname{dist}(u,v)\\le\\operatorname{dist}(\\operatorname{path}(1,v),\\mathcal L)$。\n\n即 $u$ 的半邻域 $\\mathring U(u)$ 包含 $u$ 的子树内所有满足到 $u$ 的距离不大于它到根的路径上任意一点离最近叶子节点的距离的点。\n\n进而定义：\n$$f(x)=\\sum_{u\\in\\mathring U(x)}\\prod_{\\substack{v\\in\\operatorname{subtree}(u)\\\\v\\in\\mathring U(x)}}F_{\\deg v}$$\n其中 $\\operatorname{subtree}(u)$ 是 $u$ 子树中所有点组成的集合，$\\deg u$ 是 $u$ 的度数（与 $u$ 有连边的点的数量），$F$ 是 Fibonacci 数列：\n$$F_n=\\begin{cases}1&n\\le 2\\\\F_{n-1}+F_{n-2}&n\\ge 3\\end{cases}$$\n\n即 $f(x)$ 对应 $x$ 的半邻域中点对 $x$ 的贡献之和。而一个点 $u$ 对 $x$ 的贡献的计算方式为：取出每个 $u$ 子树内处在 $x$ 半邻域中的点 $v$，若 $v$ 的度数为 $d$，则将 $u$ 的贡献乘上 $F_d$，所有 $u$ 的贡献之和为结果。\n\n你需要求出 $f(1),f(2),\\cdots,f(n)$ 的值，为减少输出量，你只需要输出它们模 $994007158$ 后的异或和，即 $\\bigoplus_{x=1}^n(f(x)\\bmod 994007158)$ 即可。\n", "inputFormat": "第一行一个正整数 $n$ 表示点数。\n\n第二行 $n - 1$ 个正整数，第 $i$ 个正整数代表了结点 $i + 1$ 的父亲结点。", "outputFormat": "一行，表示 $\\bigoplus_{x=1}^n(f(x)\\bmod 994007158)$ 的值。", "hint": "### 样例解释\n第一组数据中 $f$ 在 $1\\dots 7$ 处的取值：$8,2,2,1,1,1,1$。\n\n第二组数据中 $f$ 在 $1\\dots14$ 处的取值：$4,17,2,1,1,8,1,1,4,2,1,1,1,1$。\n### 数据范围\n\n**本题采用捆绑测试。**\n- Subtask 1 (10pts)：$n\\le 5000$。\n- Subtask 2 (20pts)：树的叶子个数不大于 $30$。\n- Subtask 3 (20pts)：树中没有恰有一个儿子的结点。\n- Subtask 4 (50pts)：无特殊限制。\n\n对于全部数据，$2\\le n,q\\le 10^6$，每个非根结点父亲的编号小于它的编号。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『STA - R4』保险丝", "background": "APJ：「？我家保险丝怎么又没了」\n", "description": "给一棵 $n$ 个点的有根树，根是 $1$ 号结点。\n\n定义两个点集 $S_1,S_2$ 的距离为从两个集合分别选出一个点，能得到两点间距离的最小值，即 $\\displaystyle\\operatorname{dist}(S_1,S_2)=\\min_{\\substack{u\\in S_1\\\\v\\in S_2}}\\operatorname{dist}(u,v)$，其中 $\\operatorname{dist}(u,v)$ 是点 $u,v$ 间的距离。\n\n定义 $\\operatorname{path}(u,v)$ 是 $u$ 到 $v$ 的简单路径上的所有点组成的集合，$\\mathcal L$ 是所有叶子组成的集合。\n\n对于固定正整数 $u$，定义满足如下条件的结点 $v$ 构成 $u$ 的半邻域 $\\mathring U(u)$：\n- $v$ 在 $u$ 子树内；\n- $\\operatorname{dist}(u,v)\\le\\operatorname{dist}(\\operatorname{path}(1,v),\\mathcal L)$。\n\n即 $u$ 的半邻域 $\\mathring U(u)$ 包含 $u$ 的子树内所有满足到 $u$ 的距离不大于它到根的路径上任意一点离最近叶子节点的距离的点。\n\n进而定义：\n$$f(x)=\\sum_{u\\in\\mathring U(x)}\\prod_{\\substack{v\\in\\operatorname{subtree}(u)\\\\v\\in\\mathring U(x)}}F_{\\deg v}$$\n其中 $\\operatorname{subtree}(u)$ 是 $u$ 子树中所有点组成的集合，$\\deg u$ 是 $u$ 的度数（与 $u$ 有连边的点的数量），$F$ 是 Fibonacci 数列：\n$$F_n=\\begin{cases}1&n\\le 2\\\\F_{n-1}+F_{n-2}&n\\ge 3\\end{cases}$$\n\n即 $f(x)$ 对应 $x$ 的半邻域中点对 $x$ 的贡献之和。而一个点 $u$ 对 $x$ 的贡献的计算方式为：取出每个 $u$ 子树内处在 $x$ 半邻域中的点 $v$，若 $v$ 的度数为 $d$，则将 $u$ 的贡献乘上 $F_d$，所有 $u$ 的贡献之和为结果。\n\n你需要求出 $f(1),f(2),\\cdots,f(n)$ 的值，为减少输出量，你只需要输出它们模 $994007158$ 后的异或和，即 $\\bigoplus_{x=1}^n(f(x)\\bmod 994007158)$ 即可。\n", "inputFormat": "第一行一个正整数 $n$ 表示点数。\n\n第二行 $n - 1$ 个正整数，第 $i$ 个正整数代表了结点 $i + 1$ 的父亲结点。", "outputFormat": "一行，表示 $\\bigoplus_{x=1}^n(f(x)\\bmod 994007158)$ 的值。", "hint": "### 样例解释\n第一组数据中 $f$ 在 $1\\dots 7$ 处的取值：$8,2,2,1,1,1,1$。\n\n第二组数据中 $f$ 在 $1\\dots14$ 处的取值：$4,17,2,1,1,8,1,1,4,2,1,1,1,1$。\n### 数据范围\n\n**本题采用捆绑测试。**\n- Subtask 1 (10pts)：$n\\le 5000$。\n- Subtask 2 (20pts)：树的叶子个数不大于 $30$。\n- Subtask 3 (20pts)：树中没有恰有一个儿子的结点。\n- Subtask 4 (50pts)：无特殊限制。\n\n对于全部数据，$2\\le n,q\\le 10^6$，每个非根结点父亲的编号小于它的编号。\n", "locale": "zh-CN"}}}
{"pid": "P10122", "type": "P", "difficulty": 2, "samples": [["COW\nXXO\nABC", "0\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2018", "USACO", "枚举"], "title": "[USACO18OPEN] Team Tic Tac Toe B", "background": "", "description": "Farmer John 有 $26$ 头奶牛，恰好她们名字都以不同的字母开头，所以 Farmer John 用每头奶牛的名字的首字母来指代她——一个 `A-Z` 之间的字母。\n\n这些奶牛最近沉迷于井字游戏，但是由于她们并不满足只有两头奶牛可以一起玩，她们改编了这个游戏，可以让许多奶牛可以一块儿玩！就像常规的井字游戏一样，这个游戏是在一块 $3×3$\n的棋盘上进行的，只是与仅用 `X` 和 `O` 不同，每个格子用一个 `A-Z` 之间的字母标记，表示占有这个格子的奶牛名字的首字母。\n\n以下是一个棋盘的例子：\n\n```plain\nCOW\nXXO\nABC\n```\n\n这些奶牛会在她们迷惑于如何判断胜负之前就占满这九个格子。显然，就像常规的井字游戏一样，如果任何一头奶牛占有了一整行、一整列，或是一整条对角线，那么这头奶牛就获胜了。然而，由于奶牛认为多牛游戏中这并不容易出现，所以她们决定允许奶牛组成两牛一队，如果某一行、一列，或是一条对角线仅包含一队的两头奶牛的字母，并且同时包含了这两头奶牛（不仅仅是一头）的字母，那么这一队就获胜。\n\n请帮助奶牛们判断有多少头奶牛或是两头奶牛组成的队伍可以获胜。注意棋盘上的同一个格子可能在不同奶牛或队伍的获胜中均被用到。 ", "inputFormat": "输入包含三行，每行三个 `A-Z` 之间的字符。", "outputFormat": "输出包含两行。第一行，输出能够获胜的单独的奶牛的数量。第二行，输出能够获胜的两头奶牛组成的队伍的数量。 ", "hint": "在这个例子中，没有单独的奶牛可以获得胜利。但是，如果奶牛 `C` 和奶牛 `X` 组队，她们可以通过 `C-X-C` 对角线获胜。同样地，如果奶牛 `X` 和 `O` 组队，她们可以通过中间一行取胜。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO18OPEN] Team Tic Tac Toe B", "background": "", "description": "Farmer John 有 $26$ 头奶牛，恰好她们名字都以不同的字母开头，所以 Farmer John 用每头奶牛的名字的首字母来指代她——一个 `A-Z` 之间的字母。\n\n这些奶牛最近沉迷于井字游戏，但是由于她们并不满足只有两头奶牛可以一起玩，她们改编了这个游戏，可以让许多奶牛可以一块儿玩！就像常规的井字游戏一样，这个游戏是在一块 $3×3$\n的棋盘上进行的，只是与仅用 `X` 和 `O` 不同，每个格子用一个 `A-Z` 之间的字母标记，表示占有这个格子的奶牛名字的首字母。\n\n以下是一个棋盘的例子：\n\n```plain\nCOW\nXXO\nABC\n```\n\n这些奶牛会在她们迷惑于如何判断胜负之前就占满这九个格子。显然，就像常规的井字游戏一样，如果任何一头奶牛占有了一整行、一整列，或是一整条对角线，那么这头奶牛就获胜了。然而，由于奶牛认为多牛游戏中这并不容易出现，所以她们决定允许奶牛组成两牛一队，如果某一行、一列，或是一条对角线仅包含一队的两头奶牛的字母，并且同时包含了这两头奶牛（不仅仅是一头）的字母，那么这一队就获胜。\n\n请帮助奶牛们判断有多少头奶牛或是两头奶牛组成的队伍可以获胜。注意棋盘上的同一个格子可能在不同奶牛或队伍的获胜中均被用到。 ", "inputFormat": "输入包含三行，每行三个 `A-Z` 之间的字符。", "outputFormat": "输出包含两行。第一行，输出能够获胜的单独的奶牛的数量。第二行，输出能够获胜的两头奶牛组成的队伍的数量。 ", "hint": "在这个例子中，没有单独的奶牛可以获得胜利。但是，如果奶牛 `C` 和奶牛 `X` 组队，她们可以通过 `C-X-C` 对角线获胜。同样地，如果奶牛 `X` 和 `O` 组队，她们可以通过中间一行取胜。 ", "locale": "zh-CN"}}}
{"pid": "P10123", "type": "P", "difficulty": 3, "samples": [["6 3 2\n4 5 6\n5 3\n3 1", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2018", "USACO"], "title": "[USACO18OPEN] Milking Order B", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$2\\le N\\le 100$），方便起见仍然编号为 $1\\ldots N$，正好闲得发慌。因此，她们发展了一个与 Farmer John 每天早上为她们挤牛奶的时候的排队顺序相关的复杂的社会结构。经过若干周的研究，Farmer John 发现这个结构基于两个关键特性。\n\n首先，由于奶牛们的社会阶层，某些奶牛会坚持要在其他奶牛之前挤奶，基于她们的社会地位等级。比方说，如果奶牛 $3$ 有最高的地位，奶牛 $2$ 位于中等地位，奶牛 $5$ 是低地位，那么奶牛 $3$ 会最早挤奶，然后是奶牛 $2$，最后是奶牛 $5$。\n\n然后，有些奶牛只允许她们在排队顺序中一个特定的位置挤奶。比方说，奶牛 $4$ 可能坚持要在所有奶牛中的第二位挤奶。\n\n幸运的是，Farmer John 总是能够以一种满足所有这些情况的顺序给他的奶牛们挤奶。\n\n不幸的是，奶牛 $1$ 最近生病了，所以 Farmer John 想要尽早给这头奶牛挤奶，使得她可以回到牛棚获得急需的休息。请帮助 Farmer John 求出奶牛 $1$ 可以在挤奶顺序中出现的最早位置。 ", "inputFormat": "第一行包含 $N$，$M$（$1\\le M<N$），和 $K$（$1\\le K<N$），表示 Farmer John 有 $N$ 头奶牛，其中 $M$ 头形成了社会阶层，$K$ 头需要在挤奶顺序中处于一个特定的位置。下一行包含 $M$ 个不同的整数 $m_i$（$1\\le m_i\\le N$）。在这一行出现的奶牛必须以与她们在这行出现的顺序相同的顺序进行挤奶。下面 $K$ 行，每行包含两个整数 $c_i$（$1\\le c_i\\le N$）和 $p_i$（$1\\le p_i\\le N$），表示奶牛 $c_i$ 一定要在第 $p_i$ 位进行挤奶。\n\n输入数据保证在这些限制之下，Farmer John 能够建立一个符合要求的挤奶顺序。 ", "outputFormat": "输出奶牛 $1$ 可以在挤奶顺序中出现的最早位置。 ", "hint": "在这个例子中，Farmer John 有六头奶牛，其中奶牛 $1$ 生病了。他的挤奶顺序应该为奶牛 $4$ 在奶牛 $5$ 之前，奶牛 $5$ 在奶牛 $6$ 之前。此外，Farmer John 必须要第一个给奶牛 $3$ 挤奶，第三个给奶牛 $5$ 挤奶。\n\nFJ 必须第一个给奶牛 $3$ 挤奶，由于奶牛 $4$ 必须要在奶牛 $5$ 之前，奶牛 $4$ 一定是第二个挤奶的，然后奶牛 $5$ 第三个。于是，奶牛 $1$ 最早在挤奶顺序中出现的位置是第四个。 ", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO18OPEN] Milking Order B", "background": "", "description": "Farmer John 的 $N$ 头奶牛（$2\\le N\\le 100$），方便起见仍然编号为 $1\\ldots N$，正好闲得发慌。因此，她们发展了一个与 Farmer John 每天早上为她们挤牛奶的时候的排队顺序相关的复杂的社会结构。经过若干周的研究，Farmer John 发现这个结构基于两个关键特性。\n\n首先，由于奶牛们的社会阶层，某些奶牛会坚持要在其他奶牛之前挤奶，基于她们的社会地位等级。比方说，如果奶牛 $3$ 有最高的地位，奶牛 $2$ 位于中等地位，奶牛 $5$ 是低地位，那么奶牛 $3$ 会最早挤奶，然后是奶牛 $2$，最后是奶牛 $5$。\n\n然后，有些奶牛只允许她们在排队顺序中一个特定的位置挤奶。比方说，奶牛 $4$ 可能坚持要在所有奶牛中的第二位挤奶。\n\n幸运的是，Farmer John 总是能够以一种满足所有这些情况的顺序给他的奶牛们挤奶。\n\n不幸的是，奶牛 $1$ 最近生病了，所以 Farmer John 想要尽早给这头奶牛挤奶，使得她可以回到牛棚获得急需的休息。请帮助 Farmer John 求出奶牛 $1$ 可以在挤奶顺序中出现的最早位置。 ", "inputFormat": "第一行包含 $N$，$M$（$1\\le M<N$），和 $K$（$1\\le K<N$），表示 Farmer John 有 $N$ 头奶牛，其中 $M$ 头形成了社会阶层，$K$ 头需要在挤奶顺序中处于一个特定的位置。下一行包含 $M$ 个不同的整数 $m_i$（$1\\le m_i\\le N$）。在这一行出现的奶牛必须以与她们在这行出现的顺序相同的顺序进行挤奶。下面 $K$ 行，每行包含两个整数 $c_i$（$1\\le c_i\\le N$）和 $p_i$（$1\\le p_i\\le N$），表示奶牛 $c_i$ 一定要在第 $p_i$ 位进行挤奶。\n\n输入数据保证在这些限制之下，Farmer John 能够建立一个符合要求的挤奶顺序。 ", "outputFormat": "输出奶牛 $1$ 可以在挤奶顺序中出现的最早位置。 ", "hint": "在这个例子中，Farmer John 有六头奶牛，其中奶牛 $1$ 生病了。他的挤奶顺序应该为奶牛 $4$ 在奶牛 $5$ 之前，奶牛 $5$ 在奶牛 $6$ 之前。此外，Farmer John 必须要第一个给奶牛 $3$ 挤奶，第三个给奶牛 $5$ 挤奶。\n\nFJ 必须第一个给奶牛 $3$ 挤奶，由于奶牛 $4$ 必须要在奶牛 $5$ 之前，奶牛 $4$ 一定是第二个挤奶的，然后奶牛 $5$ 第三个。于是，奶牛 $1$ 最早在挤奶顺序中出现的位置是第四个。 ", "locale": "zh-CN"}}}
{"pid": "P10124", "type": "P", "difficulty": 3, "samples": [["7 AA BB\nMOTHER AA\nGGMOTHER BB\nMOTHER SISTER\nGMOTHER MOTHER\nGMOTHER AUNT\nAUNT COUSIN\nGGMOTHER GMOTHER", "BB is the great-aunt of AA"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["模拟", "2018", "USACO"], "title": "[USACO18OPEN] Family Tree B", "background": "", "description": "Farmer John 拥有一个传承数代的家族经营的农场，其中的奶牛的根源同样也可以在这个农场中追溯数代。通过检索古老的记录，Farmer John 好奇于现在的这群奶牛互相之间是什么关系。请帮帮他！ ", "inputFormat": "输入的第一行包含 $N$（$1\\le N\\le 100$），之后是两头奶牛的名字。每头奶牛的名字都是由至多 $10$ 个大写字母（`A-Z`）组成的字符串。Farmer John 好奇于这行输入中这两头奶牛之间的关系。\n\n接下来的 $N$ 行，每行包含两头奶牛的名字 $X$ 和 $Y$，表示 $X$ 是 $Y$ 的母亲。 ", "outputFormat": "输出包含一行，表示输入第一行指定的两头奶牛之间的关系（简单起见，在下面的例子中，将这两头奶牛称为 BESSIE 和 ELSIE）。下面是可能出现的不同种类的关系：\n\n- 如果BESSIE和ELSIE的母亲是同一头奶牛，输出 `SIBLINGS`。\n- BESSIE 可能是 ELSIE 的直系后代，也就是说 ELSIE 是BESSIE 的母亲（`mother`），外祖母（`grand-mother`），外曾外祖母（`great-grand-mother`），外曾外曾外祖母（`great-great-grand-mother`），等等。如果是这种情况，输出 `ELSIE is the (relation) of BESSIE`，其中 `(relation)` 是适当的关系，比如 `great-great-grand-mother`。\n- 如果 ELSIE 不是 BESSIE 的某个祖先或姐妹，但是是 BESSIE 的某个祖先的孩子，那么 ELSIE 就是 BESSIE 的姨母（`aunt`）。（译者注：英语原题在这里表述有误，供题人已作出声明。）如果 ELSIE 是 BESSIE 的外祖母的孩子，输出 `ELSIE is the aunt of BESSIE`；如果 ELSIE 是 BESSIE 的外曾外祖母的孩子，输出 `ELSIE is the great-aunt of BESSIE`；如果 ELSIE 是 BESSIE 的外曾外曾外祖母的孩子，输出 `ELSIE is the great-great-aunt of BESSIE`；以此类推。\n- 如果 BESSIE 和 ELSIE 有任何其他的亲戚关系（也就是说，她们有共同的祖先），她们就是表姐妹，输出 `COUSINS`。\n- 如果 BESSIE 和 ELSIE 既没有共同的祖先，其中任何一头也不是另一头的直系后代，输出 `NOT RELATED`。\n\n下图描述了上述关系，你只需考虑这些关系。观察到有一些像是“甥女（`niece`）”（姊妹的女儿）的关系是不必要的，这是由于如果 BESSIE 是 ELSIE 的甥女，那么 ELSIE 就是 BESSIE 的姨母。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xvfjp4u5.png)", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO18OPEN] Family Tree B", "background": "", "description": "Farmer John 拥有一个传承数代的家族经营的农场，其中的奶牛的根源同样也可以在这个农场中追溯数代。通过检索古老的记录，Farmer John 好奇于现在的这群奶牛互相之间是什么关系。请帮帮他！ ", "inputFormat": "输入的第一行包含 $N$（$1\\le N\\le 100$），之后是两头奶牛的名字。每头奶牛的名字都是由至多 $10$ 个大写字母（`A-Z`）组成的字符串。Farmer John 好奇于这行输入中这两头奶牛之间的关系。\n\n接下来的 $N$ 行，每行包含两头奶牛的名字 $X$ 和 $Y$，表示 $X$ 是 $Y$ 的母亲。 ", "outputFormat": "输出包含一行，表示输入第一行指定的两头奶牛之间的关系（简单起见，在下面的例子中，将这两头奶牛称为 BESSIE 和 ELSIE）。下面是可能出现的不同种类的关系：\n\n- 如果BESSIE和ELSIE的母亲是同一头奶牛，输出 `SIBLINGS`。\n- BESSIE 可能是 ELSIE 的直系后代，也就是说 ELSIE 是BESSIE 的母亲（`mother`），外祖母（`grand-mother`），外曾外祖母（`great-grand-mother`），外曾外曾外祖母（`great-great-grand-mother`），等等。如果是这种情况，输出 `ELSIE is the (relation) of BESSIE`，其中 `(relation)` 是适当的关系，比如 `great-great-grand-mother`。\n- 如果 ELSIE 不是 BESSIE 的某个祖先或姐妹，但是是 BESSIE 的某个祖先的孩子，那么 ELSIE 就是 BESSIE 的姨母（`aunt`）。（译者注：英语原题在这里表述有误，供题人已作出声明。）如果 ELSIE 是 BESSIE 的外祖母的孩子，输出 `ELSIE is the aunt of BESSIE`；如果 ELSIE 是 BESSIE 的外曾外祖母的孩子，输出 `ELSIE is the great-aunt of BESSIE`；如果 ELSIE 是 BESSIE 的外曾外曾外祖母的孩子，输出 `ELSIE is the great-great-aunt of BESSIE`；以此类推。\n- 如果 BESSIE 和 ELSIE 有任何其他的亲戚关系（也就是说，她们有共同的祖先），她们就是表姐妹，输出 `COUSINS`。\n- 如果 BESSIE 和 ELSIE 既没有共同的祖先，其中任何一头也不是另一头的直系后代，输出 `NOT RELATED`。\n\n下图描述了上述关系，你只需考虑这些关系。观察到有一些像是“甥女（`niece`）”（姊妹的女儿）的关系是不必要的，这是由于如果 BESSIE 是 ELSIE 的甥女，那么 ELSIE 就是 BESSIE 的姨母。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xvfjp4u5.png)", "hint": "", "locale": "zh-CN"}}}
{"pid": "P10125", "type": "P", "difficulty": 1, "samples": [["SVPOLL", "Genshin"], ["ACoiPP", "Luogu"], ["RECOLL", "Boring"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "O2优化"], "title": "「Daily OI Round 3」Simple", "background": "这是一道简单题。", "description": "Acoipp 的某个软件的账号叫做 Svpoll，并且这款软件的账号与洛谷账号均不区分大小写，例如 $\\texttt{SVPOLl}$ 和 $\\texttt{svPOLL}$ 等价，$\\texttt{aCoIPp}$ 和 $\\texttt{Acoipp}$ 等价。\n\n现在你想要知道某个账号名称是与 $\\texttt{Acoipp}$ 等价，还是与 $\\texttt{Svpoll}$ 等价，或者是与前两者都不等价。", "inputFormat": "一行一个字符串，表示账号名称。", "outputFormat": "一行一个字符串，如果输入的字符串与 $\\texttt{Acoipp}$ 等价，那么输出 $\\texttt{Luogu}$；如果输入的字符串与 $\\texttt{Svpoll}$ 等价，那么输出 $\\texttt{Genshin}$；如果输入的字符串与前两者都不等价，输出 $\\texttt{Boring}$。", "hint": "#### 【样例解释 #1】\n\n因为不区分大小写，所以 $\\texttt{SVPOLL}$ 中的 $\\texttt{V}$，$\\texttt{P}$，$\\texttt{O}$，$\\texttt{L}$ 分别与 $\\texttt{v}$，$\\texttt{p}$，$\\texttt{o}$，$\\texttt{l}$ 等价，所以 $\\texttt{SVPOLL}$ 与 $\\texttt{Svpoll}$ 等价。\n\n#### 【数据范围】\n\n设 $|S|$ 为字符串长度，对于全部数据保证：$|S|=6$ 并且输入的字符串只包含大小写英文字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Daily OI Round 3」Simple", "background": "这是一道简单题。", "description": "Acoipp 的某个软件的账号叫做 Svpoll，并且这款软件的账号与洛谷账号均不区分大小写，例如 $\\texttt{SVPOLl}$ 和 $\\texttt{svPOLL}$ 等价，$\\texttt{aCoIPp}$ 和 $\\texttt{Acoipp}$ 等价。\n\n现在你想要知道某个账号名称是与 $\\texttt{Acoipp}$ 等价，还是与 $\\texttt{Svpoll}$ 等价，或者是与前两者都不等价。", "inputFormat": "一行一个字符串，表示账号名称。", "outputFormat": "一行一个字符串，如果输入的字符串与 $\\texttt{Acoipp}$ 等价，那么输出 $\\texttt{Luogu}$；如果输入的字符串与 $\\texttt{Svpoll}$ 等价，那么输出 $\\texttt{Genshin}$；如果输入的字符串与前两者都不等价，输出 $\\texttt{Boring}$。", "hint": "#### 【样例解释 #1】\n\n因为不区分大小写，所以 $\\texttt{SVPOLL}$ 中的 $\\texttt{V}$，$\\texttt{P}$，$\\texttt{O}$，$\\texttt{L}$ 分别与 $\\texttt{v}$，$\\texttt{p}$，$\\texttt{o}$，$\\texttt{l}$ 等价，所以 $\\texttt{SVPOLL}$ 与 $\\texttt{Svpoll}$ 等价。\n\n#### 【数据范围】\n\n设 $|S|$ 为字符串长度，对于全部数据保证：$|S|=6$ 并且输入的字符串只包含大小写英文字母。", "locale": "zh-CN"}}}
