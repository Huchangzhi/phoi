{"pid": "P4985", "type": "P", "difficulty": 0, "samples": [["1 3\n1 2 1 5\n8 1 7\n1 4 5 3 5 5 0\n2 4 5 5 5 5\n1 5 6 6 6 5 1\n", "25"], ["1 11\n0 2 1 10\n17 3 11\n0 1 2 6\n1 3 5 5 4 30 0\n1 4 7 4 6 10 1\n2 4 8 7 6 14\n1 7 10 2 9 10 0\n1 8 11 10 9 14 1\n1 11 13 7 12 10 0\n2 11 13 5 12 14\n1 11 13 1 12 10 0\n2 13 14 8 14 6\n1 13 15 3 14 10 0\n", "242"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["搜索", "O2优化", "图论建模", "期望"], "title": "反射", "background": "最近$\\rm \\ TimeTraveller\\ $玩了一个十分好玩的游戏，通过摆放能量发射器，来攻击敌人的飞船。\n\n但是$\\rm \\ TimeTraveller\\ $十分手残~~以及脑残~~，总是玩不过十分简单的关卡，所以他想请你帮助他。", "description": "这个游戏是这样的，你有$k$个$\\alpha$能量发射器启动器，可以启动任何$k$个在一个初始平台上$\\alpha$发射器，然后$\\alpha$发射器会向北偏东$45^\\circ$方向上发射能量光束，能量值为$\\alpha_i$。在有场地里面有$n$块悬浮的平台，这些平台上有的装有两种能量发射器$\\alpha$发射器和$\\beta$发射器的其中一种，功能如下：\n\n- 对于$\\alpha$发射器，如果它装在平台上方，它会向北偏东$45^\\circ$方向上发射能量光束，能量值为$\\alpha_i$；如果装在下方，它会向南偏东$45^\\circ$方向上发射能量光束，能量值为$\\alpha_i$。\n\n- 对于$\\beta$发射器，不管装在什么地方它会同时向北偏东$45^\\circ$和南偏东$45^\\circ$发射能量光束，能量值为$\\beta_i$。\n\n但是，悬浮平台上的发射器并不会自己启动，必须在有能量光束击中它所在的平台上时才会启动，且这个发射器发射的能量为给定的值（注意一束光击中这些平台，只有在这个能量光束的来的路径上没有该击中平台提供的能量时这些平台的发射器就会启动，每被击中一次就发射一次，如下图，1号发射给2号2号激活，其中一个击回1号，此时1号不会再发射一次（也就是能量不会再次叠加））\n\n![](https://cdn.luogu.com.cn/upload/pic/37869.png)\n\n\n你在最开始只能启动初始平台上的能量发射器中的$k$个（这$k$个是依次启动的，且每个只能发射一次，但是其它地方的发射器可以发射多次）。\n\n将地图抽象为二维平面直角坐标系，其中$x=0$的直线为地面（光束到达地面会消失,但是如果地面有平台则优先击中平台），那么所有的平台包括初始平台均平行于$x$轴，敌人的飞船可以看做为一个平行于$y$轴的，两个端点为$(wx,sy)$和$(wx,ty)$，当一条光束击中飞船它便会受到光束来的这条路径上的所有能量值的和的伤害然后光束就会消失。（光束击中其它平台并不会反弹，而是会被平台吸收作为能量来启动发射器）。\n\n请你求出在启动哪些开始的$\\alpha$发射器，使得让飞船受到的伤害最大，请你求出这个最大值。\n", "inputFormat": "第一行两个正整数$k,n$，表示你能启动$k$个开始的发射器，总共有$n$个平台。\n第二行四个整数$x_1,x_2,y,v$，表示初始平台位置，初始平台上每一个整点有一个$\\alpha$发射器能发射初始能量为$v$的能量光束（如$x_1=1,x_2=3,y=1$时，有$(1,1),(2,1),(3,1)$三个初始位置的$\\alpha$发射器）。\n第三行三个整数$wx,sy,ty$，表示敌人飞船位置。\n下面$n$行，每行描述了一个平台，格式如下：\n\n- $0\\ x_l\\ x_r\\ y$表示一个空的平台\n- $1\\ x_l\\ x_r\\ y\\ x_p\\ w_i\\ 0/1$表示在$(x_p,y)$的位置一个$\\alpha$发射器在$(x_l,y)\\sim (x_r,y)$的平台上，发射能量为$w_i$，最后的$0$或$1$表示在平台的上方还是下方，$0$为上方，$1$为下方。\n- $2\\ x_l\\ x_r\\ y\\ x_p\\ w_i$表示在$(x_p,y)$的位置一个$\\beta$发射器在$(x_l,y)\\sim (x_r,y)$的平台上，发射能量为$w_i$。\n", "outputFormat": "一行一个整数表示最大的伤害值。", "hint": "#### 样例解释：\n\n样例$1$如图：\n\n![](https://cdn.luogu.com.cn/upload/pic/37557.png)\n\n最优为橙色那个$25$，绿色的为$10$。\n\n样例$2$如图：\n\n![](https://cdn.luogu.com.cn/upload/pic/37430.png)\n\n只有橙色那条打出来为$242$，其他两条只有$98$。\n\n#### 数据范围：\n\n- 对于$30\\%$的数据$0\\leq n\\leq 20,1\\leq k\\leq 3$；\n- 对于$40\\%$的数据所有平台（不包括飞船）的长度和不超过$10^6$；\n- 对于$60\\%$的数据$0\\leq n\\leq 200,1\\leq k\\leq 50$；\n- 对于$70\\%$的数据$0\\leq n\\leq 2000,1\\leq k\\leq 2000$；\n- 对于$100\\%$的数据$0\\leq n\\leq 20000,0\\leq k\\leq 20000$，坐标$0 \\leq y\\leq 10^9$的，坐标$0\\leq x\\leq 10^9$，所有的能量值的值均在$0\\sim 10^4$内，且保证每个发射器必定在一个平台上，且平台长度与敌人飞船的长度大于等于$1$。保证最开始的平台长度不超过$10^5$，且所有的平台不会重叠；\n\n- 还有$20\\%$的额外数据同$100\\%$，只是$n\\leq 10^6$；\n\n输入较大，建议使用较快的读入方式。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "Reflection.", "background": "Recently, $\\rm \\ TimeTraveller\\ $ played a very fun game. By placing energy emitters, he attacks the enemies’ spaceship.\n\nBut $\\rm \\ TimeTraveller\\ $ is very clumsy ~~and also kind of silly~~, and he always cannot beat even very easy levels, so he wants you to help him.", "description": "The game works like this. You have $k$ $\\alpha$-emitter activators. They can activate any $k$ $\\alpha$ emitters on an initial platform. Each activated $\\alpha$ emitter will shoot an energy beam toward $45^\\circ$ northeast, with energy value $\\alpha_i$. In the field there are $n$ floating platforms. Some of these platforms have one of two kinds of energy emitters installed: an $\\alpha$ emitter or a $\\beta$ emitter, with the following functions:\n\n- For an $\\alpha$ emitter: if it is installed on the upper side of the platform, it shoots an energy beam toward $45^\\circ$ northeast, with energy value $\\alpha_i$; if it is installed on the lower side, it shoots an energy beam toward $45^\\circ$ southeast, with energy value $\\alpha_i$.\n\n- For a $\\beta$ emitter: no matter where it is installed, it shoots energy beams toward both $45^\\circ$ northeast and $45^\\circ$ southeast at the same time, with energy value $\\beta_i$.\n\nHowever, emitters on floating platforms do not activate by themselves. They will be activated only when an energy beam hits the platform they are on, and the energy they shoot is the given value. (Note: when a beam hits such a platform, the platform’s emitter will activate only if, on the path the beam traveled to reach this platform, there was no energy provided by the emitter on this platform. Each time it is hit, it shoots once. As in the figure below, emitter $1$ shoots to platform $2$, activating emitter $2$; then one of its beams hits back to platform $1$. At this time, emitter $1$ will not shoot again (that is, the energy will not be added again).)\n\n![](https://cdn.luogu.com.cn/upload/pic/37869.png)\n\nAt the beginning, you can only activate $k$ emitters among the $\\alpha$ emitters on the initial platform (these $k$ are activated one by one, and each can shoot only once, but emitters elsewhere can shoot multiple times).\n\nAbstract the map as a 2D Cartesian coordinate system. The line $x=0$ is the ground (a beam disappears when it reaches the ground, but if there is a platform on the ground then it hits the platform first). All platforms, including the initial platform, are parallel to the $x$-axis. The enemy spaceship can be viewed as a segment parallel to the $y$-axis with endpoints $(wx,sy)$ and $(wx,ty)$. When a beam hits the spaceship, it takes damage equal to the sum of all energy values on the path that the beam traveled, and then the beam disappears. (A beam hitting other platforms does not reflect; instead, it is absorbed by the platform as energy to activate the emitter.)\n\nPlease determine which initial $\\alpha$ emitters to activate so that the damage dealt to the spaceship is maximized, and output this maximum value.", "inputFormat": "The first line contains two positive integers $k,n$, meaning you can activate $k$ initial emitters, and there are $n$ platforms in total.  \nThe second line contains four integers $x_1,x_2,y,v$, describing the initial platform. On this platform, at every integer coordinate point, there is an $\\alpha$ emitter that can shoot an energy beam with initial energy $v$ (for example, when $x_1=1,x_2=3,y=1$, there are three initial $\\alpha$ emitters at $(1,1),(2,1),(3,1)$).  \nThe third line contains three integers $wx,sy,ty$, describing the position of the enemy spaceship.  \nThe next $n$ lines each describe one platform in the following formats:\n\n- $0\\ x_l\\ x_r\\ y$ represents an empty platform.\n- $1\\ x_l\\ x_r\\ y\\ x_p\\ w_i\\ 0/1$ represents an $\\alpha$ emitter at position $(x_p,y)$ on the platform $(x_l,y)\\sim (x_r,y)$, with emitted energy $w_i$. The last $0$ or $1$ indicates whether it is on the upper side or the lower side: $0$ means upper side, $1$ means lower side.\n- $2\\ x_l\\ x_r\\ y\\ x_p\\ w_i$ represents a $\\beta$ emitter at position $(x_p,y)$ on the platform $(x_l,y)\\sim (x_r,y)$, with emitted energy $w_i$.", "outputFormat": "One line with one integer, the maximum damage value.", "hint": "#### Sample Explanation:\n\nFor sample $1$, as shown:\n\n![](https://cdn.luogu.com.cn/upload/pic/37557.png)\n\nThe best choice is the orange one with $25$, while the green one is $10$.\n\nFor sample $2$, as shown:\n\n![](https://cdn.luogu.com.cn/upload/pic/37430.png)\n\nOnly the orange beam can deal $242$; the other two only deal $98$.\n\n#### Constraints:\n\n- For $30\\%$ of the data: $0\\leq n\\leq 20,1\\leq k\\leq 3$.\n- For $40\\%$ of the data: the total length of all platforms (excluding the spaceship) does not exceed $10^6$.\n- For $60\\%$ of the data: $0\\leq n\\leq 200,1\\leq k\\leq 50$.\n- For $70\\%$ of the data: $0\\leq n\\leq 2000,1\\leq k\\leq 2000$.\n- For $100\\%$ of the data: $0\\leq n\\leq 20000,0\\leq k\\leq 20000$, coordinates satisfy $0 \\leq y\\leq 10^9$ and $0\\leq x\\leq 10^9$. All energy values are within $0\\sim 10^4$. It is guaranteed that every emitter is on some platform, and the length of each platform and the length of the enemy spaceship are at least $1$. It is guaranteed that the initial platform length does not exceed $10^5$, and no platforms overlap.\n- There is an additional $20\\%$ of testdata with the same constraints as $100\\%$, except $n\\leq 10^6$.\n\nThe input is large, so a fast input method is recommended.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "反射", "background": "最近$\\rm \\ TimeTraveller\\ $玩了一个十分好玩的游戏，通过摆放能量发射器，来攻击敌人的飞船。\n\n但是$\\rm \\ TimeTraveller\\ $十分手残~~以及脑残~~，总是玩不过十分简单的关卡，所以他想请你帮助他。", "description": "这个游戏是这样的，你有$k$个$\\alpha$能量发射器启动器，可以启动任何$k$个在一个初始平台上$\\alpha$发射器，然后$\\alpha$发射器会向北偏东$45^\\circ$方向上发射能量光束，能量值为$\\alpha_i$。在有场地里面有$n$块悬浮的平台，这些平台上有的装有两种能量发射器$\\alpha$发射器和$\\beta$发射器的其中一种，功能如下：\n\n- 对于$\\alpha$发射器，如果它装在平台上方，它会向北偏东$45^\\circ$方向上发射能量光束，能量值为$\\alpha_i$；如果装在下方，它会向南偏东$45^\\circ$方向上发射能量光束，能量值为$\\alpha_i$。\n\n- 对于$\\beta$发射器，不管装在什么地方它会同时向北偏东$45^\\circ$和南偏东$45^\\circ$发射能量光束，能量值为$\\beta_i$。\n\n但是，悬浮平台上的发射器并不会自己启动，必须在有能量光束击中它所在的平台上时才会启动，且这个发射器发射的能量为给定的值（注意一束光击中这些平台，只有在这个能量光束的来的路径上没有该击中平台提供的能量时这些平台的发射器就会启动，每被击中一次就发射一次，如下图，1号发射给2号2号激活，其中一个击回1号，此时1号不会再发射一次（也就是能量不会再次叠加））\n\n![](https://cdn.luogu.com.cn/upload/pic/37869.png)\n\n\n你在最开始只能启动初始平台上的能量发射器中的$k$个（这$k$个是依次启动的，且每个只能发射一次，但是其它地方的发射器可以发射多次）。\n\n将地图抽象为二维平面直角坐标系，其中$x=0$的直线为地面（光束到达地面会消失,但是如果地面有平台则优先击中平台），那么所有的平台包括初始平台均平行于$x$轴，敌人的飞船可以看做为一个平行于$y$轴的，两个端点为$(wx,sy)$和$(wx,ty)$，当一条光束击中飞船它便会受到光束来的这条路径上的所有能量值的和的伤害然后光束就会消失。（光束击中其它平台并不会反弹，而是会被平台吸收作为能量来启动发射器）。\n\n请你求出在启动哪些开始的$\\alpha$发射器，使得让飞船受到的伤害最大，请你求出这个最大值。\n", "inputFormat": "第一行两个正整数$k,n$，表示你能启动$k$个开始的发射器，总共有$n$个平台。\n第二行四个整数$x_1,x_2,y,v$，表示初始平台位置，初始平台上每一个整点有一个$\\alpha$发射器能发射初始能量为$v$的能量光束（如$x_1=1,x_2=3,y=1$时，有$(1,1),(2,1),(3,1)$三个初始位置的$\\alpha$发射器）。\n第三行三个整数$wx,sy,ty$，表示敌人飞船位置。\n下面$n$行，每行描述了一个平台，格式如下：\n\n- $0\\ x_l\\ x_r\\ y$表示一个空的平台\n- $1\\ x_l\\ x_r\\ y\\ x_p\\ w_i\\ 0/1$表示在$(x_p,y)$的位置一个$\\alpha$发射器在$(x_l,y)\\sim (x_r,y)$的平台上，发射能量为$w_i$，最后的$0$或$1$表示在平台的上方还是下方，$0$为上方，$1$为下方。\n- $2\\ x_l\\ x_r\\ y\\ x_p\\ w_i$表示在$(x_p,y)$的位置一个$\\beta$发射器在$(x_l,y)\\sim (x_r,y)$的平台上，发射能量为$w_i$。\n", "outputFormat": "一行一个整数表示最大的伤害值。", "hint": "#### 样例解释：\n\n样例$1$如图：\n\n![](https://cdn.luogu.com.cn/upload/pic/37557.png)\n\n最优为橙色那个$25$，绿色的为$10$。\n\n样例$2$如图：\n\n![](https://cdn.luogu.com.cn/upload/pic/37430.png)\n\n只有橙色那条打出来为$242$，其他两条只有$98$。\n\n#### 数据范围：\n\n- 对于$30\\%$的数据$0\\leq n\\leq 20,1\\leq k\\leq 3$；\n- 对于$40\\%$的数据所有平台（不包括飞船）的长度和不超过$10^6$；\n- 对于$60\\%$的数据$0\\leq n\\leq 200,1\\leq k\\leq 50$；\n- 对于$70\\%$的数据$0\\leq n\\leq 2000,1\\leq k\\leq 2000$；\n- 对于$100\\%$的数据$0\\leq n\\leq 20000,0\\leq k\\leq 20000$，坐标$0 \\leq y\\leq 10^9$的，坐标$0\\leq x\\leq 10^9$，所有的能量值的值均在$0\\sim 10^4$内，且保证每个发射器必定在一个平台上，且平台长度与敌人飞船的长度大于等于$1$。保证最开始的平台长度不超过$10^5$，且所有的平台不会重叠；\n\n- 还有$20\\%$的额外数据同$100\\%$，只是$n\\leq 10^6$；\n\n输入较大，建议使用较快的读入方式。\n\n", "locale": "zh-CN"}}}
{"pid": "P4986", "type": "P", "difficulty": 6, "samples": [["1 1 1 -2.00 0.50 \n1 2 \n1 3 \n4 1 \n", "-1.16666667"], ["1 1 1 -1.00 0.50 \n1 2 \n1 3 \n4 1 \n", "Inconsistent!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000, 64000]}, "tags": ["数学", "Special Judge", "O2优化", "导数", "快速傅里叶变换 FFT"], "title": "逃离", "background": "$\\ \\rm Althen\\ $和$\\ \\rm hdxrie\\ $掉入了二维空间。", "description": "其实这个空间并不是无限的，而是半径有限的圆盘。\n\n起初，他们两个都在圆心处，为了找到出口，他们两个决定分开行动，只要找到出口，便会离开。不过，若是其中一个人找到了出口，另一个还在二维空间内，那么这个空间就会因为不平衡而崩塌。所以他们两个只能一起离开。\n\n其中：\n- $\\rm Althen\\ $ 可以拐弯，还会一直拐来拐去，不过只能水平或者竖直移动。\n- $\\rm hdxrie\\ $ 只能沿任意一条直线走，不能拐弯。\n\n$\\rm Althen\\ $ 全程在水平向右的平均速度可以用函数 $A(x)$ 表示，在竖直向上的平均速度可以用函数 $B(x)$ 表示。$\\rm hdxrie\\ $ 全程移动的平均速度可以用函数 $C(x)$ 表示。而参数 $x$的取值范围也有讲究，为 $[L,R]$。\n\n现在，他们两个想问你，他们有可能一起离开这个二维空间吗？如果可以，这个参数 $x$ 的值可以是多少？\n\n", "inputFormat": "输入共四行。\n\n第一行三个整数：$La$，$Lb$，$Lc$，和两个实数：$L$，$R$；\n分别代表三个函数的长度和参数 $x$ 的取值范围。\n\n第二行 $\\ La+1\\ $ 个整数，按升幂表示 $A(x)$ 的系数。  \n第二行 $\\ Lb+1\\ $ 个整数，按升幂表示 $B(x)$ 的系数。  \n第二行 $\\ Lc+1\\ $ 个整数，按升幂表示 $C(x)$ 的系数。\n", "outputFormat": "若有解，输出一行一个实数表示答案；否则输出 `Inconsistent!`。", "hint": "【数据范围】   \n对于$10\\%$的数据，$L=R$；  \n另有$20\\%$的数据，$La=Lb=Lc=1$；  \n另有$30\\%$的数据，$[L,R]$ 内最多只有一个参数 $x$ 合法；  \n对于$100\\%$的数据，$0≤La,Lb,Lc≤10^5$，$0≤a_i,b_i,c_i≤9$，$L≤R$，$|L|,|R|≤3$；  \n\n答案精确度需要保证带入原来的三个函数，合法误差不超过 $10^{-5}$，误差若是大于 $10^{-5}$ 会判断为错误答案，建议输出 **保留八位以上小数**。\n\n###### $\\color{#EEE}{\\tt {Notice\\ that\\ SPEED\\ is\\ VECTOR.(High\\ school\\ physics)}}$", "locale": "zh-CN", "translations": {"en": {"title": "Escape.", "background": "$\\ \\rm Althen\\ $ and $\\ \\rm hdxrie\\ $ fell into a two-dimensional space.", "description": "In fact, this space is not infinite, but a disk with a finite radius.\n\nAt the beginning, both of them are at the center of the circle. To find the exit, they decide to act separately. As long as one of them finds the exit, they will leave. However, if one person finds the exit while the other is still in the two-dimensional space, the space will collapse due to imbalance. So they can only leave together.\n\nSpecifically:\n- $\\rm Althen\\ $ can turn, and will keep turning, but can only move horizontally or vertically.\n- $\\rm hdxrie\\ $ can only walk along any straight line and cannot turn.\n\nFor $\\rm Althen\\ $, the average speed in the horizontal right direction during the whole process is given by the function $A(x)$, and the average speed in the vertical upward direction is given by the function $B(x)$. For $\\rm hdxrie\\ $, the average speed of the whole movement is given by the function $C(x)$. The range of the parameter $x$ is $[L,R]$.\n\nNow they want to ask you: is it possible for them to leave this two-dimensional space together? If yes, what values of the parameter $x$ are possible?", "inputFormat": "The input consists of four lines.\n\nThe first line contains three integers: $La$, $Lb$, $Lc$, and two real numbers: $L$, $R$, representing the degrees of the three functions and the range of the parameter $x$.\n\nThe second line contains $\\ La+1\\ $ integers, representing the coefficients of $A(x)$ in increasing order of power.  \nThe third line contains $\\ Lb+1\\ $ integers, representing the coefficients of $B(x)$ in increasing order of power.  \nThe fourth line contains $\\ Lc+1\\ $ integers, representing the coefficients of $C(x)$ in increasing order of power.", "outputFormat": "If there is a solution, output one real number on a single line as the answer; otherwise output `Inconsistent!`.", "hint": "【Constraints】  \nFor $10\\%$ of the testdata, $L=R$.  \nFor another $20\\%$ of the testdata, $La=Lb=Lc=1$.  \nFor another $30\\%$ of the testdata, there is at most one valid parameter $x$ in $[L,R]$.  \nFor $100\\%$ of the testdata, $0≤La,Lb,Lc≤10^5$, $0≤a_i,b_i,c_i≤9$, $L≤R$, $|L|,|R|≤3$.\n\nThe answer precision must guarantee that, after substituting into the original three functions, the allowed error does not exceed $10^{-5}$. If the error is greater than $10^{-5}$, it will be judged as a wrong answer. It is recommended to output **at least eight digits after the decimal point**.\n\n###### $\\color{#EEE}{\\tt {Notice\\ that\\ SPEED\\ is\\ VECTOR.(High\\ school\\ physics)}}$\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "逃离", "background": "$\\ \\rm Althen\\ $和$\\ \\rm hdxrie\\ $掉入了二维空间。", "description": "其实这个空间并不是无限的，而是半径有限的圆盘。\n\n起初，他们两个都在圆心处，为了找到出口，他们两个决定分开行动，只要找到出口，便会离开。不过，若是其中一个人找到了出口，另一个还在二维空间内，那么这个空间就会因为不平衡而崩塌。所以他们两个只能一起离开。\n\n其中：\n- $\\rm Althen\\ $ 可以拐弯，还会一直拐来拐去，不过只能水平或者竖直移动。\n- $\\rm hdxrie\\ $ 只能沿任意一条直线走，不能拐弯。\n\n$\\rm Althen\\ $ 全程在水平向右的平均速度可以用函数 $A(x)$ 表示，在竖直向上的平均速度可以用函数 $B(x)$ 表示。$\\rm hdxrie\\ $ 全程移动的平均速度可以用函数 $C(x)$ 表示。而参数 $x$的取值范围也有讲究，为 $[L,R]$。\n\n现在，他们两个想问你，他们有可能一起离开这个二维空间吗？如果可以，这个参数 $x$ 的值可以是多少？\n\n", "inputFormat": "输入共四行。\n\n第一行三个整数：$La$，$Lb$，$Lc$，和两个实数：$L$，$R$；\n分别代表三个函数的长度和参数 $x$ 的取值范围。\n\n第二行 $\\ La+1\\ $ 个整数，按升幂表示 $A(x)$ 的系数。  \n第二行 $\\ Lb+1\\ $ 个整数，按升幂表示 $B(x)$ 的系数。  \n第二行 $\\ Lc+1\\ $ 个整数，按升幂表示 $C(x)$ 的系数。\n", "outputFormat": "若有解，输出一行一个实数表示答案；否则输出 `Inconsistent!`。", "hint": "【数据范围】   \n对于$10\\%$的数据，$L=R$；  \n另有$20\\%$的数据，$La=Lb=Lc=1$；  \n另有$30\\%$的数据，$[L,R]$ 内最多只有一个参数 $x$ 合法；  \n对于$100\\%$的数据，$0≤La,Lb,Lc≤10^5$，$0≤a_i,b_i,c_i≤9$，$L≤R$，$|L|,|R|≤3$；  \n\n答案精确度需要保证带入原来的三个函数，合法误差不超过 $10^{-5}$，误差若是大于 $10^{-5}$ 会判断为错误答案，建议输出 **保留八位以上小数**。\n\n###### $\\color{#EEE}{\\tt {Notice\\ that\\ SPEED\\ is\\ VECTOR.(High\\ school\\ physics)}}$", "locale": "zh-CN"}}}
{"pid": "P4987", "type": "P", "difficulty": 5, "samples": [["16 1\nXIAOMAITAIBANGLE", "16"], ["4 3\nABAB", "4"]], "limits": {"time": [500, 500, 500, 500, 500, 500, 500, 500, 500, 500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创"], "title": "回文项链", "background": "**数据已增强，各位不要再交暴力了。**\n\n国庆节期间，哥哥送了小埋一条项链。（假的，日本人过什么国庆。）\n\n然而小埋不太开心，她更想要买一部新手机玩游戏。", "description": "不过小埋很快发现了项链的神奇之处。\n\n我们把项链看作一个$n$元环，记作$s$，环上每个结点由大写'A'-'Z'中的一个字母组成。小埋惊奇的发现，环上有很多回文串！我们定义回文串为环上一个首尾不重叠的连续子串（即环上每个结点最多被使用一次），且满足**存在一个回文中心**$i$，使得$i$之前的若干个字符分别与其关于$i$中心对称的字符相同。\n\n现在，小埋给出你这个环，并希望知道有多少长度为$l$的本质不同的回文串；我们认为两个回文串本质不同，当且仅当它们回文中心所在结点不同。", "inputFormat": "第一行，两个数表示$n$，$l$；\n\n接下来一行读入连续的$n$个字母，分别表示$s_1$，$s_2$，…，$s_n$；其中$s_i$与$s_i$ $_{mod}$ $_{n+1}$相邻。", "outputFormat": "一行，表示长度为$l$的回文串的个数。", "hint": "**本题每个测试点时限500ms**\n\n对于$30$%的数据，$n<=20$；\n\n对于$50$%的数据，$n<=200$；\n\n对于$80$%的数据，$n<=2000$；\n\n对于$100$%的数据，$n<=10^6$，$0<l<=n$且$l$为奇数。\n\n**仔细读题，本题回文串与传统意义上的回文串不同。**", "locale": "zh-CN", "translations": {"en": {"title": "Palindrome Necklace", "background": "**The testdata has been strengthened. Please do not submit brute force solutions anymore.**\n\nDuring the National Day holiday, Big Brother gave Xiaomai a necklace. (Fake. Why would Japanese people celebrate National Day?)\n\nHowever, Xiaomai was not very happy. She would rather buy a new phone to play games.", "description": "But Xiaomai soon discovered something magical about the necklace.\n\nWe treat the necklace as an $n$-node cycle, denoted by $s$. Each node on the cycle is a letter from uppercase 'A' to 'Z'. Xiaomai was surprised to find that there are many palindromic strings on the cycle! We define a palindrome as a continuous substring on the cycle whose start and end do not overlap (that is, each node on the cycle can be used at most once), and it satisfies **that there exists a palindrome center** $i$ such that the characters before $i$ are respectively equal to the characters symmetric to them with respect to the center $i$.\n\nNow, Xiaomai gives you this cycle and wants to know how many essentially different palindromes of length $l$ there are. We consider two palindromes essentially different if and only if the nodes where their palindrome centers are located are different.", "inputFormat": "The first line contains two integers $n$, $l$.\n\nThe next line contains $n$ consecutive letters, representing $s_1$, $s_2$, …, $s_n$. Here, $s_i$ is adjacent to $s_i$ $_{mod}$ $_{n+1}$.", "outputFormat": "Output one line containing the number of palindromes of length $l$.", "hint": "**The time limit for each test point is 500 ms.**\n\nFor $30$% of the data, $n<=20$.\n\nFor $50$% of the data, $n<=200$.\n\nFor $80$% of the data, $n<=2000$.\n\nFor $100$% of the data, $n<=10^6$, $0<l<=n$, and $l$ is odd.\n\n**Read the problem carefully. The palindrome in this problem is different from the palindrome in the traditional sense.**\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "回文项链", "background": "**数据已增强，各位不要再交暴力了。**\n\n国庆节期间，哥哥送了小埋一条项链。（假的，日本人过什么国庆。）\n\n然而小埋不太开心，她更想要买一部新手机玩游戏。", "description": "不过小埋很快发现了项链的神奇之处。\n\n我们把项链看作一个$n$元环，记作$s$，环上每个结点由大写'A'-'Z'中的一个字母组成。小埋惊奇的发现，环上有很多回文串！我们定义回文串为环上一个首尾不重叠的连续子串（即环上每个结点最多被使用一次），且满足**存在一个回文中心**$i$，使得$i$之前的若干个字符分别与其关于$i$中心对称的字符相同。\n\n现在，小埋给出你这个环，并希望知道有多少长度为$l$的本质不同的回文串；我们认为两个回文串本质不同，当且仅当它们回文中心所在结点不同。", "inputFormat": "第一行，两个数表示$n$，$l$；\n\n接下来一行读入连续的$n$个字母，分别表示$s_1$，$s_2$，…，$s_n$；其中$s_i$与$s_i$ $_{mod}$ $_{n+1}$相邻。", "outputFormat": "一行，表示长度为$l$的回文串的个数。", "hint": "**本题每个测试点时限500ms**\n\n对于$30$%的数据，$n<=20$；\n\n对于$50$%的数据，$n<=200$；\n\n对于$80$%的数据，$n<=2000$；\n\n对于$100$%的数据，$n<=10^6$，$0<l<=n$且$l$为奇数。\n\n**仔细读题，本题回文串与传统意义上的回文串不同。**", "locale": "zh-CN"}}}
{"pid": "P4988", "type": "P", "difficulty": 6, "samples": [["3 3 2", "1"], ["3 8 2", "INF"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["洛谷原创", "O2优化"], "title": "重排DL", "background": "Dancing Line 的关卡排序总是很玄学。", "description": "这天小埋给 Dancing Line 中关卡排序制定了一个新的规则：假设某一关为第 $n$ 个发布的关卡，那么它的位置 $a_n$ 满足 $a_{n+1}=(\\sqrt[k]{a_n-n}+2)^k+n+1$，且第一个发布的关卡总是排在第一，即 $a_1=2$。\n\n但是这样显然会出现一个问题：许多位置是空关卡。所以小埋又给出了一个限制条件：调整 $k$，使得第 $n$ 个关卡满足 $a_n \\equiv b\\pmod{m}$。现在小埋给了 $n,m,b$，求最小满足条件的**整数** $k$。", "inputFormat": "第一行，三个数 $n,m,b$。", "outputFormat": "一个数，表示最小的 $k$；如果不存在最小 $k$，则输出 `INF`。", "hint": "对于 $30\\%$ 的数据，$n\\le 100$，$0\\le b<m\\le 10000$；\n\n对于 $50\\%$ 的数据，$n\\le 10^{12}$，$0\\le b<m\\le 10000$；\n\n对于 $100\\%$ 的数据，$n\\le 10^{12}$，$0\\le b<m\\le 10^{12}$。\n\n保证 $n,m,b$ 均为正整数。", "locale": "zh-CN", "translations": {"en": {"title": "Rearranging DL.", "background": "The level order in Dancing Line always feels kind of random.", "description": "On this day, Umaru set a new rule for the level order in Dancing Line: suppose a certain level is the $n$-th released level, then its position $a_n$ satisfies $a_{n+1}=(\\sqrt[k]{a_n-n}+2)^k+n+1$, and the first released level is always placed first, i.e., $a_1=2$.\n\nBut this clearly causes a problem: many positions will be empty levels. So Umaru added another restriction: adjust $k$ so that the $n$-th level satisfies $a_n \\equiv b\\pmod{m}$. Now Umaru gives $n,m,b$, and you need to find the smallest **integer** $k$ that satisfies the condition.", "inputFormat": "The first line contains three numbers $n,m,b$.", "outputFormat": "Output one number, representing the smallest $k$; if the smallest $k$ does not exist, output `INF`.", "hint": "For $30\\%$ of the testdata, $n\\le 100$, $0\\le b<m\\le 10000$.\n\nFor $50\\%$ of the testdata, $n\\le 10^{12}$, $0\\le b<m\\le 10000$.\n\nFor $100\\%$ of the testdata, $n\\le 10^{12}$, $0\\le b<m\\le 10^{12}$.\n\nIt is guaranteed that $n,m,b$ are all positive integers.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "重排DL", "background": "Dancing Line 的关卡排序总是很玄学。", "description": "这天小埋给 Dancing Line 中关卡排序制定了一个新的规则：假设某一关为第 $n$ 个发布的关卡，那么它的位置 $a_n$ 满足 $a_{n+1}=(\\sqrt[k]{a_n-n}+2)^k+n+1$，且第一个发布的关卡总是排在第一，即 $a_1=2$。\n\n但是这样显然会出现一个问题：许多位置是空关卡。所以小埋又给出了一个限制条件：调整 $k$，使得第 $n$ 个关卡满足 $a_n \\equiv b\\pmod{m}$。现在小埋给了 $n,m,b$，求最小满足条件的**整数** $k$。", "inputFormat": "第一行，三个数 $n,m,b$。", "outputFormat": "一个数，表示最小的 $k$；如果不存在最小 $k$，则输出 `INF`。", "hint": "对于 $30\\%$ 的数据，$n\\le 100$，$0\\le b<m\\le 10000$；\n\n对于 $50\\%$ 的数据，$n\\le 10^{12}$，$0\\le b<m\\le 10000$；\n\n对于 $100\\%$ 的数据，$n\\le 10^{12}$，$0\\le b<m\\le 10^{12}$。\n\n保证 $n,m,b$ 均为正整数。", "locale": "zh-CN"}}}
{"pid": "P4989", "type": "P", "difficulty": 5, "samples": [["2\n10", "0"], ["6\n110100", "1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["洛谷原创"], "title": "二进制之谜", "background": "虽然过了$Faded$，但是小埋还是没有解出二进制之谜。", "description": "这个时候，她感觉到了$0$与$1$存在的某种可能的特殊对应关系。于是，她定义了“启发系数”：对应的两个数位数（按从高位到低位顺序去数）的差的绝对值；她现在希望将$0$与$1$进行对应使得**在对应关系最多的前提下**，启发系数之和最大。\n\n对应规则如下：\n\n$1$.对应关系必须从$0$开始，以$1$结束；换句话说，每个对应关系必须$0$在前（高位），$1$在后（低位）；\n\n$2$.可以取若干个对应关系，但对应关系之间**不能交叉**；**交叉**的含义是：共用某个区间且不是包含关系；\n\n$e.g.$ 假设一个对应关系为第$2$位数与第$4$位数，另一个对应关系为第$3$位数与第$5$位数，那么它们不可同时取，因为在区间$[3,4]$交叉；但是若对应关系分别为第$1$、$5$位数与第$2$、$4$位数，则不算作交叉，因为它们虽然共用区间$[2,4]$但存在包含关系，可以同时取。\n\n![avatar](https://cdn.luogu.com.cn/upload/pic/38793.png)\n\n这即是说，**交叉不等于交集**。\n\n$3$.每个数最多只能存在于一个对应关系中。", "inputFormat": "第一行，一个整数$n$，为二进制数的位数；\n\n接下来一行，输入一个$n$位二进制数。", "outputFormat": "一行，表示对应关系最多的前提下最大的启发系数之和。", "hint": "对于$30$%的数据，$0<n<=20$；\n\n对于$100$%的数据，$0<n<=300$；\n\n**样例说明**\n\n对于样例一，由于$1$在$0$前面，两者不能对应；\n\n对于样例二，对应方案为$3-4$，故总和为$1$。\n\n\n如果您提前$AK$了，可以做一下[数据增强版](https://www.luogu.org/problemnew/show/T53667)", "locale": "zh-CN", "translations": {"en": {"title": "Binary Mystery", "background": "Although she has already passed $Faded$, Xiaomai still did not solve the binary mystery.", "description": "At this moment, she sensed that there might be some special possible correspondence between $0$ and $1$. So, she defined the “inspiration coefficient” as the absolute value of the difference between the digit positions (counted from high to low) of a corresponding pair. She now wants to match $0$ with $1$ so that, **while maximizing the number of correspondences**, the sum of inspiration coefficients is as large as possible.\n\nThe matching rules are as follows:\n\n$1$. Each correspondence must start with $0$ and end with $1$; in other words, in every correspondence, $0$ must be before (higher bit), and $1$ must be after (lower bit).\n\n$2$. You may choose several correspondences, but correspondences **must not cross**. The meaning of **crossing** is: they share some interval and it is not a containment relationship.\n\n$e.g.$ Suppose one correspondence is between the $2$-nd digit and the $4$-th digit, and another correspondence is between the $3$-rd digit and the $5$-th digit. Then they cannot both be chosen, because they cross on the interval $[3,4]$. However, if the correspondences are between the $1$-st and $5$-th digits, and between the $2$-nd and $4$-th digits, then this is not considered crossing, because although they share the interval $[2,4]$, there is a containment relationship, so they can both be chosen.\n\n![avatar](https://cdn.luogu.com.cn/upload/pic/38793.png)\n\nThat is, **crossing is not the same as intersection**.\n\n$3$. Each digit can appear in at most one correspondence.\n\n#", "inputFormat": "The first line contains an integer $n$, the number of bits in the binary number.\n\nThe next line contains an $n$-bit binary number.", "outputFormat": "One line, representing the maximum possible sum of inspiration coefficients under the condition that the number of correspondences is maximized.", "hint": "For $30$% of the data, $0<n<=20$.\n\nFor $100$% of the data, $0<n<=300$.\n\n**Sample Explanation**\n\nFor sample 1, since $1$ is before $0$, they cannot be matched.\n\nFor sample 2, the matching plan is $3-4$, so the total sum is $1$.\n\nIf you have already $AK$, you can try the [Enhanced Data Version](https://www.luogu.org/problemnew/show/T53667).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "二进制之谜", "background": "虽然过了$Faded$，但是小埋还是没有解出二进制之谜。", "description": "这个时候，她感觉到了$0$与$1$存在的某种可能的特殊对应关系。于是，她定义了“启发系数”：对应的两个数位数（按从高位到低位顺序去数）的差的绝对值；她现在希望将$0$与$1$进行对应使得**在对应关系最多的前提下**，启发系数之和最大。\n\n对应规则如下：\n\n$1$.对应关系必须从$0$开始，以$1$结束；换句话说，每个对应关系必须$0$在前（高位），$1$在后（低位）；\n\n$2$.可以取若干个对应关系，但对应关系之间**不能交叉**；**交叉**的含义是：共用某个区间且不是包含关系；\n\n$e.g.$ 假设一个对应关系为第$2$位数与第$4$位数，另一个对应关系为第$3$位数与第$5$位数，那么它们不可同时取，因为在区间$[3,4]$交叉；但是若对应关系分别为第$1$、$5$位数与第$2$、$4$位数，则不算作交叉，因为它们虽然共用区间$[2,4]$但存在包含关系，可以同时取。\n\n![avatar](https://cdn.luogu.com.cn/upload/pic/38793.png)\n\n这即是说，**交叉不等于交集**。\n\n$3$.每个数最多只能存在于一个对应关系中。", "inputFormat": "第一行，一个整数$n$，为二进制数的位数；\n\n接下来一行，输入一个$n$位二进制数。", "outputFormat": "一行，表示对应关系最多的前提下最大的启发系数之和。", "hint": "对于$30$%的数据，$0<n<=20$；\n\n对于$100$%的数据，$0<n<=300$；\n\n**样例说明**\n\n对于样例一，由于$1$在$0$前面，两者不能对应；\n\n对于样例二，对应方案为$3-4$，故总和为$1$。\n\n\n如果您提前$AK$了，可以做一下[数据增强版](https://www.luogu.org/problemnew/show/T53667)", "locale": "zh-CN"}}}
{"pid": "P4990", "type": "P", "difficulty": 6, "samples": [["3 3\n1 2 1\n2 3 1\n1 3 1\n0", "0\n2"], ["3 3\n1 2 1\n2 2 0\n3 1 1\n0", "Continue from the last checkpoint"], ["3 3\n1 2 1\n2 2 0\n3 1 1\n4\n2 0 1 3 1\n1 1 3\n3 1 1\n5 1 1", "2\n1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["洛谷原创", "O2优化"], "title": "小埋与刺客传奇", "background": "**数据已更新。**\n\n经过几天几夜的硬肝，小埋终于玩到了最后一关，也是$Dancing$ $Line$的魔王关——$The$ $Legend$ $of$ $Assassin$\n\n![avatar](https://cdn.luogu.com.cn/upload/pic/34876.png)\n\n![avatar](https://cdn.luogu.com.cn/upload/pic/35145.png)", "description": "如图，魔王关经常出现炸路与突发障碍。\n\n小埋很苦恼，因为她不知道完整的地图。于是她进行了许多尝试，总结了随着时间变化而出现或消失的路与她在这些时刻时的位置，**为了简化问题，我们假定小埋的位置始终不变**。\n\n现在她想知道，她至少从什么时刻开始才可以看到能通向终点的路；由于一些路径上有钻石，这些钻石能带来一定加分，小埋还希望知道她在最早看到能通向终点的路时，按照当前地图走向终点所能获得的最大得分。", "inputFormat": "第一行，两个数$n$，$m$，分别表示地图的结点数与初始边数，结点从$1-n$进行编号；初始时，为第$0$时刻，小埋在$1$号结点，且终点始终为$n$；\n\n接下来$m$行，每行三个数$u_i$，$v_i$，$w_i$，表示一条从$u_i$到$v_i$的得分为$w_i$的边；\n\n接下来一行，一个整数$t$，表示出现新边或旧边消失的时刻数，如无边出现或消失，$t=0$；\n\n接下来$t$行，每行第一个数为$tm_j$，表示出现这一事件的时刻；第二个数为$type$，若$type==0$，表示出现了一条新边，之后会有三个数$u_j$，$v_j$，$w_j$，分别表示一条边信息（含义同上）；若$type==1$，之后会有一个数$k$，表示当前**时刻**未消失的第$k$条路消失了。", "outputFormat": "若任何时刻下都不能到达终点，则输出”$Continue$ $from$ $the$ $last$ $checkpoint$”，否则输出两行：第一行为一个数$tmp$，表示看到通向终点路径时的最小时刻；第二行为一个数$score$，表示在上述时刻时到达终点所能获得的最大分数。", "hint": "本题共$10$个测试点，各测试点详细信息如下：\n\n$1$：$n<=100000$，$m<=200000$，$t<=100000$；输出“$Continue$ $from$ $the$ $last$ $checkpoint$”；分值：$5$；\n\n$2$：$n<=100$，$m<=10000$，$t<=100$；无特殊性质；分值：$10$；\n\n$3$：$n<=100000$，$m<=200000$，$t<=100000$；所有边的分数为$0$；分值：$10$；\n\n$4$：$n<=100000$，$m<=200000$，$t=0$；无新增或消失的边；分值：$5$；\n\n$5$~$6$：$n<=100000$，$m<=200000$，$t<=100000$；无消失的边；分值：$10$；\n\n$7$~$8$：$n<=100000$，$m<=200000$，$t<=100000$；无出现的边；分值：$10$；\n\n$9$~$10$：$n<=100000$，$m<=200000$，$t<=100000$；消失的边不超过$1000$条；分值：$15$。\n\n另外，对于所有数据，$0<u_i,u_j,v_i,v_j<=n$，$0<=w_i,w_j<=10$，$0<tm_j<=10t$，且$tm_j$互不相同；数据保证不出现正环。", "locale": "zh-CN", "translations": {"en": {"title": "Umaru and The Legend of Assassin", "background": "**The testdata has been updated.**\n\nAfter several days and nights of intense grinding, Umaru finally reached the last level, the boss level of $Dancing$ $Line$ — $The$ $Legend$ $of$ $Assassin$.\n\n![avatar](https://cdn.luogu.com.cn/upload/pic/34876.png)\n\n![avatar](https://cdn.luogu.com.cn/upload/pic/35145.png)", "description": "As shown in the figure, the boss level often has broken roads and sudden obstacles.\n\nUmaru is troubled because she does not know the complete map. So she made many attempts and summarized the roads that appear or disappear over time, and her position at those moments. **To simplify the problem, we assume that Umaru's position never changes.**\n\nNow she wants to know: from what earliest moment can she see a path that can lead to the destination. Also, because there are diamonds on some paths and these diamonds can give extra points, Umaru also wants to know the maximum score she can obtain by going to the destination following the current map at the earliest moment when she can first see a path to the destination.", "inputFormat": "The first line contains two integers $n$ and $m$, representing the number of nodes in the map and the number of initial edges. Nodes are numbered from $1-n$. Initially, this is time $0$. Umaru is at node $1$, and the destination is always node $n$.\n\nThe next $m$ lines each contain three integers $u_i$, $v_i$, $w_i$, describing an edge from $u_i$ to $v_i$ with score $w_i$.\n\nThe next line contains one integer $t$, representing the number of moments when a new edge appears or an old edge disappears. If no edge appears or disappears, then $t=0$.\n\nThe next $t$ lines describe events. In each line, the first number is $tm_j$, the time when this event happens. The second number is $type$:\n- If $type==0$, it means a new edge appears. Then three numbers $u_j$, $v_j$, $w_j$ follow, describing the edge (same meaning as above).\n- If $type==1$, then one number $k$ follows, meaning that at the **current time**, the $k$-th road among those that have not disappeared disappears.", "outputFormat": "If at no time it is possible to reach the destination, output \"$Continue$ $from$ $the$ $last$ $checkpoint$\". Otherwise, output two lines:\n- The first line contains one number $tmp$, the minimum time when a path to the destination can be seen.\n- The second line contains one number $score$, the maximum score that can be obtained when reaching the destination at that time.", "hint": "This problem has $10$ test points. The detailed information is as follows.\n\n$1$: $n<=100000$, $m<=200000$, $t<=100000$. Output \"$Continue$ $from$ $the$ $last$ $checkpoint$\". Score: $5$.\n\n$2$: $n<=100$, $m<=10000$, $t<=100$. No special properties. Score: $10$.\n\n$3$: $n<=100000$, $m<=200000$, $t<=100000$. All edges have score $0$. Score: $10$.\n\n$4$: $n<=100000$, $m<=200000$, $t=0$. No edges are added or removed. Score: $5$.\n\n$5$~$6$: $n<=100000$, $m<=200000$, $t<=100000$. No edges disappear. Score: $10$.\n\n$7$~$8$: $n<=100000$, $m<=200000$, $t<=100000$. No edges appear. Score: $10$.\n\n$9$~$10$: $n<=100000$, $m<=200000$, $t<=100000$. No more than $1000$ edges disappear. Score: $15$.\n\nIn addition, for all data, $0<u_i,u_j,v_i,v_j<=n$, $0<=w_i,w_j<=10$, $0<tm_j<=10t$, and all $tm_j$ are distinct. The testdata guarantees that there is no positive cycle.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "小埋与刺客传奇", "background": "**数据已更新。**\n\n经过几天几夜的硬肝，小埋终于玩到了最后一关，也是$Dancing$ $Line$的魔王关——$The$ $Legend$ $of$ $Assassin$\n\n![avatar](https://cdn.luogu.com.cn/upload/pic/34876.png)\n\n![avatar](https://cdn.luogu.com.cn/upload/pic/35145.png)", "description": "如图，魔王关经常出现炸路与突发障碍。\n\n小埋很苦恼，因为她不知道完整的地图。于是她进行了许多尝试，总结了随着时间变化而出现或消失的路与她在这些时刻时的位置，**为了简化问题，我们假定小埋的位置始终不变**。\n\n现在她想知道，她至少从什么时刻开始才可以看到能通向终点的路；由于一些路径上有钻石，这些钻石能带来一定加分，小埋还希望知道她在最早看到能通向终点的路时，按照当前地图走向终点所能获得的最大得分。", "inputFormat": "第一行，两个数$n$，$m$，分别表示地图的结点数与初始边数，结点从$1-n$进行编号；初始时，为第$0$时刻，小埋在$1$号结点，且终点始终为$n$；\n\n接下来$m$行，每行三个数$u_i$，$v_i$，$w_i$，表示一条从$u_i$到$v_i$的得分为$w_i$的边；\n\n接下来一行，一个整数$t$，表示出现新边或旧边消失的时刻数，如无边出现或消失，$t=0$；\n\n接下来$t$行，每行第一个数为$tm_j$，表示出现这一事件的时刻；第二个数为$type$，若$type==0$，表示出现了一条新边，之后会有三个数$u_j$，$v_j$，$w_j$，分别表示一条边信息（含义同上）；若$type==1$，之后会有一个数$k$，表示当前**时刻**未消失的第$k$条路消失了。", "outputFormat": "若任何时刻下都不能到达终点，则输出”$Continue$ $from$ $the$ $last$ $checkpoint$”，否则输出两行：第一行为一个数$tmp$，表示看到通向终点路径时的最小时刻；第二行为一个数$score$，表示在上述时刻时到达终点所能获得的最大分数。", "hint": "本题共$10$个测试点，各测试点详细信息如下：\n\n$1$：$n<=100000$，$m<=200000$，$t<=100000$；输出“$Continue$ $from$ $the$ $last$ $checkpoint$”；分值：$5$；\n\n$2$：$n<=100$，$m<=10000$，$t<=100$；无特殊性质；分值：$10$；\n\n$3$：$n<=100000$，$m<=200000$，$t<=100000$；所有边的分数为$0$；分值：$10$；\n\n$4$：$n<=100000$，$m<=200000$，$t=0$；无新增或消失的边；分值：$5$；\n\n$5$~$6$：$n<=100000$，$m<=200000$，$t<=100000$；无消失的边；分值：$10$；\n\n$7$~$8$：$n<=100000$，$m<=200000$，$t<=100000$；无出现的边；分值：$10$；\n\n$9$~$10$：$n<=100000$，$m<=200000$，$t<=100000$；消失的边不超过$1000$条；分值：$15$。\n\n另外，对于所有数据，$0<u_i,u_j,v_i,v_j<=n$，$0<=w_i,w_j<=10$，$0<tm_j<=10t$，且$tm_j$互不相同；数据保证不出现正环。", "locale": "zh-CN"}}}
{"pid": "P4991", "type": "P", "difficulty": 5, "samples": [["5 2\n665667089 948925818 1118302620 288255565 1682529647 \n5 2\n1 3 4\n3 1\n2 3 5\n2 2 4\n3 4\n5 25\n1 3 3\n1 3 4\n3 1\n2 1 5\n2 1 3", "665667089\n288255566\n665667089"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "愤怒的XiaoX", "background": "### 答疑请到 https://www.luogu.org/discuss/show?postid=79498\n\n在几天前的模拟赛上，$XiaoX$又双叒叕$AK$了\n\n他想卡一卡大家，于是他出了下面的一道题：", "description": "给定一个序列，你要维护下列操作：\n\n$1$ $l$ $r$ $k$，表示从$l$到$r$的数字最后$k$位按位取反\n\n$2$ $l$ $r$ $k$，表示从$l$到$r$的数字最后$k$位进行翻转\n\n$3$ $w$ 表示查询$w$这个位置的值\n\n为了降低这道题的难度，我们做出以下规定：\n\n对于序列的操作，我们的$k$在一定范围内是一定的\n\n我们一共会有$t$个$k$\n\n每个$k$后面跟着一些操作\n\n这些操作的$k$（修改的位数）都是相同的\n\n###  按位取反定义：\n\n比如说，一个数的二进制表示是：\n\n```\n10100111\n```\n\n对后5位取反后变成：\n\n```\n10111000\n```\n\n###  翻转定义：\n\n比如说，一个数的二进制表示是：\n\n```\n10100111\n```\n\n对后5位翻转后变成：\n\n```\n10111100\n```", "inputFormat": "第一行，两个整数$n$，$t$,表示序列长度和$k$的数量\n\n第二行，$n$个数，表示原始序列\n\n下面$t$组操作，对于每组操作第一行两个数$q_i$，$k_i$，表示操作数量和在这些操作中$k$的值\n\n下面$q_i$行，表示该组操作", "outputFormat": "对于每个$3$操作，输出一行一个整数，表示答案的大小", "hint": "对于$10$%的数据，没有$1,2$操作\n\n对于另$10$%的数据，没有$1$操作\n\n对于另$10$%的数据，没有$2$操作\n\n对于$50$%的数据，$t<=1$\n\n对于$70$%的数据，$t<=2$\n\n对于$100$%的数据，$t<=5$,$1<=n<=50000,1<=q_i<=20000,k<=25$,初始序列制造方式为$rand()*rand()$(windows下)\n\n感谢@swhsz验题", "locale": "zh-CN", "translations": {"en": {"title": "Angry XiaoX", "background": "### For Q&A, please go to https://www.luogu.org/discuss/show?postid=79498.\n\nA few days ago, in a mock contest, $XiaoX$ got $AK$ again and again.\n\nHe wanted to make things harder for everyone, so he created the following problem.", "description": "Given a sequence, you need to maintain the following operations:\n\n$1$ $l$ $r$ $k$: bitwise NOT the last $k$ bits of the numbers from $l$ to $r$.\n\n$2$ $l$ $r$ $k$: reverse the last $k$ bits of the numbers from $l$ to $r$.\n\n$3$ $w$: query the value at position $w$.\n\nTo reduce the difficulty of this problem, we make the following rules:\n\nFor operations on the sequence, the $k$ values are fixed within a certain range.\n\nThere are a total of $t$ different $k$ values.\n\nAfter each $k$, there are some operations.\n\nIn these operations, the $k$ (the number of modified bits) is the same.\n\n### Definition of bitwise NOT:\n\nFor example, the binary representation of a number is:\n\n```\n10100111\n```\n\nAfter taking bitwise NOT on the last 5 bits, it becomes:\n\n```\n10111000\n```\n\n### Definition of reverse:\n\nFor example, the binary representation of a number is:\n\n```\n10100111\n```\n\nAfter reversing the last 5 bits, it becomes:\n\n```\n10111100\n```", "inputFormat": "The first line contains two integers $n$ and $t$, representing the length of the sequence and the number of $k$ values.\n\nThe second line contains $n$ numbers, representing the initial sequence.\n\nThen follow $t$ groups of operations. For each group, the first line contains two numbers $q_i$ and $k_i$, representing the number of operations and the value of $k$ used in these operations.\n\nThe next $q_i$ lines describe the operations in this group.", "outputFormat": "For each operation of type $3$, output one line with one integer, representing the answer.", "hint": "For $10\\%$ of the data, there are no operations of type $1$ or $2$.\n\nFor another $10\\%$ of the data, there are no operations of type $1$.\n\nFor another $10\\%$ of the data, there are no operations of type $2$.\n\nFor $50\\%$ of the data, $t \\le 1$.\n\nFor $70\\%$ of the data, $t \\le 2$.\n\nFor $100\\%$ of the data, $t \\le 5$, $1 \\le n \\le 50000$, $1 \\le q_i \\le 20000$, $k \\le 25$. The initial sequence is generated by $rand() * rand()$ (on Windows).\n\nThanks to @swhsz for verifying the problem.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "愤怒的XiaoX", "background": "### 答疑请到 https://www.luogu.org/discuss/show?postid=79498\n\n在几天前的模拟赛上，$XiaoX$又双叒叕$AK$了\n\n他想卡一卡大家，于是他出了下面的一道题：", "description": "给定一个序列，你要维护下列操作：\n\n$1$ $l$ $r$ $k$，表示从$l$到$r$的数字最后$k$位按位取反\n\n$2$ $l$ $r$ $k$，表示从$l$到$r$的数字最后$k$位进行翻转\n\n$3$ $w$ 表示查询$w$这个位置的值\n\n为了降低这道题的难度，我们做出以下规定：\n\n对于序列的操作，我们的$k$在一定范围内是一定的\n\n我们一共会有$t$个$k$\n\n每个$k$后面跟着一些操作\n\n这些操作的$k$（修改的位数）都是相同的\n\n###  按位取反定义：\n\n比如说，一个数的二进制表示是：\n\n```\n10100111\n```\n\n对后5位取反后变成：\n\n```\n10111000\n```\n\n###  翻转定义：\n\n比如说，一个数的二进制表示是：\n\n```\n10100111\n```\n\n对后5位翻转后变成：\n\n```\n10111100\n```", "inputFormat": "第一行，两个整数$n$，$t$,表示序列长度和$k$的数量\n\n第二行，$n$个数，表示原始序列\n\n下面$t$组操作，对于每组操作第一行两个数$q_i$，$k_i$，表示操作数量和在这些操作中$k$的值\n\n下面$q_i$行，表示该组操作", "outputFormat": "对于每个$3$操作，输出一行一个整数，表示答案的大小", "hint": "对于$10$%的数据，没有$1,2$操作\n\n对于另$10$%的数据，没有$1$操作\n\n对于另$10$%的数据，没有$2$操作\n\n对于$50$%的数据，$t<=1$\n\n对于$70$%的数据，$t<=2$\n\n对于$100$%的数据，$t<=5$,$1<=n<=50000,1<=q_i<=20000,k<=25$,初始序列制造方式为$rand()*rand()$(windows下)\n\n感谢@swhsz验题", "locale": "zh-CN"}}}
{"pid": "P4992", "type": "P", "difficulty": 5, "samples": [["3 2\n1 2 3\n2 2 3\n1 1\n1 2\n1 3\n0.3 0.1 0.2\n", "1\n0.9940"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "查房", "background": "答疑请到： https://www.luogu.org/discuss/show?postid=79498\n\n$sqn$是个电子游戏爱好者，但很遗憾的是，他的母上大人没收了他的手机。为了过一把游戏瘾，$sqn$到各个$oier$的宿舍借手机玩......", "description": "当然，这是一件风险很大的事，因为van恶的静静和晶晶会定时查房，被抓到可就惨了。当然$oier$们不会束手就擒，他们组织了一个反查房联盟。这个联盟由$n$个宿舍(点)组成，某些宿舍之间有边权为1无向边连接，共有$n-1$条无向边。每个点都有一个概率$k_i$，表示在颓废的几率为$k_i$。如果老师查到某个房间，而这个房间的人在学习，他就会发出警报，距离他1的人收到警报后都会在下一时刻无条件停止颓废，之后恢复原状态，如果查到在颓废的人，则那个人不会发出警报而是GG（可以当作这个人死了，再也不会发出信号）。静静和晶晶一起行动，查一遍房间。$sqn$只会在$ztz11$，$AK$爷，$floatiy$的房间里颓废，他想知道，在哪个房间里颓废被查到几率最小？当然，由于他在颓废，所以自然不可能算几率啦，他将这个问题交给了你，请你帮他来解决这个问题", "inputFormat": "第一行，两个数字$n$，$m$，表示房间总数 和查房次数   \n第二行，3个数字$a,b,c$，分别表示 $ztz11$，$AK$爷和$floatiy$的房间号    \n下面$m$行，每行第一个数字$k$,表示当前时刻老师们要查几间房，后面$k$个数字，表示静静和晶晶要查的房间号  \n下面$n-1$行，每行$2$个数，表示会相互发出警报的两个人   \n最后一行，$n$个数，表示每个人颓废的几率", "outputFormat": "第一行，一个整数，表示$sqn$应该去的最佳的房间，如果几率相同，请按$ztz11>AK>floatiy$的优先级输出\n\n第二行，一个4位小数，表示$sqn$安全颓废的几率\n", "hint": "对于 $30$% 的数据，$n,m<=10$,\n\n对于另 $10$% 的数据，$k=1$\n\n对于 $100$% 的数据，$1<=m,n<=1000000$,确保每个人被且仅被查一次\n\n感谢@XiaoX，@Monster_qi帮助出数据&验题\n", "locale": "zh-CN", "translations": {"en": {"title": "Room Inspection.", "background": "For questions, please go to: https://www.luogu.org/discuss/show?postid=79498.\n\n$sqn$ is a video game fan, but unfortunately his mom took away his phone. To satisfy his desire to play games, $sqn$ borrows phones from different $oier$ dorm rooms to play games......", "description": "Of course, this is very risky, because the evil Jingjing and Jingjing will inspect the rooms regularly, and getting caught would be terrible. Of course, the $oier$s will not just give up, so they organized an anti-inspection alliance.\n\nThis alliance consists of $n$ dorm rooms (nodes). Some dorm rooms are connected by undirected edges with weight $1$, and there are $n-1$ undirected edges in total. Each node has a probability $k_i$, meaning the probability of being slacking off is $k_i$.\n\nIf a teacher inspects a room and the person in that room is studying, they will raise an alarm. After a person at distance $1$ receives the alarm, they will unconditionally stop slacking off at the next moment, and then return to their original state. If the teacher inspects someone who is slacking off, then that person will not raise an alarm and will instead be GG (you can treat it as the person is dead and will never send signals again).\n\nJingjing and Jingjing act together and inspect the rooms once. $sqn$ will only slack off in the rooms of $ztz11$, Grandpa $AK$, and $floatiy$. He wants to know: in which room is the probability of being caught while slacking off the smallest?\n\nOf course, since he is slacking off, he cannot calculate the probability himself. He leaves this problem to you. Please help him solve it.", "inputFormat": "The first line contains two integers $n$, $m$, representing the total number of rooms and the number of inspections.\n\nThe second line contains three integers $a, b, c$, representing the room numbers of $ztz11$, Grandpa $AK$, and $floatiy$.\n\nThe next $m$ lines: the first number is $k$, meaning how many rooms the teachers will inspect at the current moment; the following $k$ numbers are the room numbers that Jingjing and Jingjing will inspect.\n\nThe next $n-1$ lines: each line contains $2$ numbers, indicating two people who can send alarms to each other.\n\nThe last line contains $n$ numbers, representing each person's probability of slacking off.", "outputFormat": "The first line outputs one integer, indicating the best room that $sqn$ should go to. If the probabilities are the same, output according to the priority $ztz11 > AK > floatiy$.\n\nThe second line outputs a number with $4$ digits after the decimal point, representing the probability that $sqn$ can slack off safely.", "hint": "For $30\\%$ of the testdata, $n, m \\le 10$.\n\nFor another $10\\%$ of the testdata, $k = 1$.\n\nFor $100\\%$ of the testdata, $1 \\le m, n \\le 1000000$, and it is guaranteed that everyone is inspected once and only once.\n\nThanks to @XiaoX and @Monster_qi for helping provide data & validate the problem.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "查房", "background": "答疑请到： https://www.luogu.org/discuss/show?postid=79498\n\n$sqn$是个电子游戏爱好者，但很遗憾的是，他的母上大人没收了他的手机。为了过一把游戏瘾，$sqn$到各个$oier$的宿舍借手机玩......", "description": "当然，这是一件风险很大的事，因为van恶的静静和晶晶会定时查房，被抓到可就惨了。当然$oier$们不会束手就擒，他们组织了一个反查房联盟。这个联盟由$n$个宿舍(点)组成，某些宿舍之间有边权为1无向边连接，共有$n-1$条无向边。每个点都有一个概率$k_i$，表示在颓废的几率为$k_i$。如果老师查到某个房间，而这个房间的人在学习，他就会发出警报，距离他1的人收到警报后都会在下一时刻无条件停止颓废，之后恢复原状态，如果查到在颓废的人，则那个人不会发出警报而是GG（可以当作这个人死了，再也不会发出信号）。静静和晶晶一起行动，查一遍房间。$sqn$只会在$ztz11$，$AK$爷，$floatiy$的房间里颓废，他想知道，在哪个房间里颓废被查到几率最小？当然，由于他在颓废，所以自然不可能算几率啦，他将这个问题交给了你，请你帮他来解决这个问题", "inputFormat": "第一行，两个数字$n$，$m$，表示房间总数 和查房次数   \n第二行，3个数字$a,b,c$，分别表示 $ztz11$，$AK$爷和$floatiy$的房间号    \n下面$m$行，每行第一个数字$k$,表示当前时刻老师们要查几间房，后面$k$个数字，表示静静和晶晶要查的房间号  \n下面$n-1$行，每行$2$个数，表示会相互发出警报的两个人   \n最后一行，$n$个数，表示每个人颓废的几率", "outputFormat": "第一行，一个整数，表示$sqn$应该去的最佳的房间，如果几率相同，请按$ztz11>AK>floatiy$的优先级输出\n\n第二行，一个4位小数，表示$sqn$安全颓废的几率\n", "hint": "对于 $30$% 的数据，$n,m<=10$,\n\n对于另 $10$% 的数据，$k=1$\n\n对于 $100$% 的数据，$1<=m,n<=1000000$,确保每个人被且仅被查一次\n\n感谢@XiaoX，@Monster_qi帮助出数据&验题\n", "locale": "zh-CN"}}}
{"pid": "P4993", "type": "P", "difficulty": 6, "samples": [["1\n5 5 9\n1 2 3 4 5\n4 5 6 7 8\n2", "2"], ["5\n20 10 1329\n540 499 490 419 308 261 323 476 476 374 23 13 14 16 19 34 43 19 27 32 \n8 8 8 8 8 7 7 7 7 7 \n50\n20 10 1800\n74 434 97 134 283 118 234 498 328 388 29 48 48 43 23 42 31 16 20 26 \n8 8 7 6 8 8 8 7 7 7 \n50\n20 10 2704\n142 378 330 281 377 64 340 309 466 289 34 37 19 17 20 48 21 28 38 15 \n6 8 6 6 8 7 7 7 7 6 \n50\n20 10 72\n365 356 456 479 459 222 548 377 212 223 38 20 49 18 49 38 31 48 41 17 \n6 8 7 6 8 7 8 8 8 6 \n50\n20 10 1416\n367 191 403 298 445 464 79 467 431 362 10 45 48 37 46 43 11 35 30 39 \n8 6 8 7 7 7 8 8 7 8 \n50", "1023\n1023\n1023\n15\n1023"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "枚举", "素数判断,质数,筛法"], "title": "评分系统", "background": "答疑请到：https://www.luogu.org/discuss/show?postid=79498\n\n由于时限等问题，请大家重交一遍这道题\n\n本题时限开至2s\n\n样例：https://files.cnblogs.com/files/ztz11/yl.rar\n\n---\n\n众所周知，luogu 有题目难度的评分系统，用户在通过题目后可以选择题目难度以及算法标签，来完善 luogu 的题库。\n\n![](https://cdn.luogu.com.cn/upload/pic/40327.png)\n\n（原注：以下内容非真实评分数据，纯属作者编造，仅供娱乐使用。）", "description": "Menteur-Hxy 同学很不老实，为了实现 NOIp 前 AC $100$ 道黑题的目标，他决定雇佣一些水军，最少雇佣 $1$ 个水军。\n\n每个水军都有一个能力值 $x_i$，表示该水军可以解决难度最高为 $x_i$ 的题目。这些水军十分尽职尽责，在通过这道题目后都会给题目评最高难度。当然，luogu 的正常用户也会做题，他们会正常地评分。现在，我们给你所有水军的能力值以及每道题正常用户的评分记录，请你求出有多少种选择水军的方案，可以使这道题的评分变为黑题。因为答案可能过大，最终请输出答案数 $\\bmod p$ 的值。\n\n评分计算公式：去掉一个最高分，去掉一个最低分后求平均分。\n\n**【表一：投票信息】**\n\n| 投票编号 | 对应难度 | 分数贡献 |\n| :------: | :------: | :------: |\n| $1$ | 入门 | $1$ |\n| $2$ | 普及- | $10$ |\n| $3$ | 普及/提高- | $15$ |\n| $4$ | 普及+/提高 | $25$ |\n| $5$ | 提高+/省选- | $40$ |\n| $6$ | 省选/NOI- | $55$ |\n| $7$ | NOI | $75$ |\n| $8$ | NOI+/CTSC | $100$ |\n\n**【表二：难度规则】**\n\n| 难度等级 | 对应颜色 | 对应分数 |\n| :------: | :------: | :------: |\n| 入门 | 红 | $1\\sim 5$ |\n| 普及- | 橙 | $6\\sim 12$ |\n| 普及/提高- | 黄 | $13\\sim 20$ |\n| 普及+/提高 | 绿 | $21\\sim 35$ |\n| 提高+/省选- | 蓝 | $36\\sim 45$ |\n| 省选/NOI- | 紫 | $46\\sim 70$ |\n| NOI+/CTSC | 黑 | $71\\sim 100$ |", "inputFormat": "**本题有多组数据。**\n\n第一行，一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n+ 第一行三个整数 $n, m, p$，分别表示 Menteur-Hxy 找的水军数量，luogu 用户评分数量，和输出时的模数。\n+ 第二行，$n$ 个整数 $s_1 \\dots s_n$ 分别表示水军的能力值。\n+ 第三行，$m$ 个整数 $t_1 \\dots t_n$，表示每个 luogu 用户的投票编号。\n+ 第四行，一个整数 $k$ ，表示题目的难度系数。", "outputFormat": "对于每组数据，输出一行一个整数，表示总选择方案数对 $p$ 取模后的结果，如无解，则输出 $0$。", "hint": "**【样例解释 $1$】**\n\nluogu 用户评分和为 $25+40+55+75+100=295$，弃掉一个最低分后为 $270$，这时 Menteur-Hxy 雇佣两个及以上水军就可以达到目的。\n\n因为可以通过本题的水军共有 $4$ 个，所以选择方案共有：\n\n$$\\{1,2\\}\\{1,2,3\\}\\{1,2,3,4\\}\\{1,2,4\\}\\{1,3\\}\\{1,3,4\\}\\{1,4\\}\\{2,3\\}\\{2,3,4\\}\\{2,4\\}\\{3,4\\}$$\n\n共 $11$ 种，对 $9$ 取余后结果为 $2$。\n\n**【数据规模与约定】**\n\n对于 $30\\%$ 的数据，$n, m \\leq 50$。\n\n对于另外 $20\\%$ 的数据，$p$ 为质数。\n\n对于 $100\\%$ 的数据，$1 \\leq n, m, k,s_i \\leq 10^5, 1 \\leq t \\leq 5, 2 \\leq p \\leq 3 \\times 10^3, 1 \\leq t_i \\leq 8$。\n\n保证合格水军的数量与需要的最少水军数量之差不超过 $5000$。\n\n（原注：本题可能轻微卡常。感谢 @Ghostcai ，@Swhsz 帮忙验题。）", "locale": "zh-CN", "translations": {"en": {"title": "Scoring System", "background": "For Q\\&A, please go to: https://www.luogu.org/discuss/show?postid=79498.\n\nDue to issues such as the time limit, please resubmit this problem once.\n\nThe time limit for this problem is set to 2 s.\n\nSamples: https://files.cnblogs.com/files/ztz11/yl.rar.\n\n---\n\nAs everyone knows, Luogu has a difficulty scoring system for problems. After solving a problem, users can choose the problem difficulty and algorithm tags to help improve Luogu's problemset.\n\n![](https://cdn.luogu.com.cn/upload/pic/40327.png)\n\n(Original note: The following content is not real scoring data. It is made up by the author, for entertainment only.)", "description": "Student Menteur-Hxy is not very honest. In order to achieve the goal of getting AC on $100$ hard (black) problems before NOIp, he decided to hire some \"water army\" (paid voters), hiring at least $1$ of them.\n\nEach paid voter has an ability value $x_i$, meaning this voter can solve problems with difficulty up to $x_i$ at most. These paid voters are very responsible: after solving the problem, they will always rate the problem as the highest difficulty. Of course, normal Luogu users will also solve problems and give normal ratings. Now, given all paid voters' ability values and the rating records from normal users for each problem, please find how many ways to choose paid voters such that the final rating of this problem becomes a black problem. Since the answer may be very large, output the number of ways $\\bmod p$.\n\nScoring formula: remove one highest score and one lowest score, then take the average.\n\n**[Table 1: Voting Information]**\n\n| Vote ID | Corresponding Difficulty | Score Contribution |\n| :------: | :------: | :------: |\n| $1$ | Beginner | $1$ |\n| $2$ | Junior- | $10$ |\n| $3$ | Junior/Senior- | $15$ |\n| $4$ | Junior+/Senior | $25$ |\n| $5$ | Senior+/NOI Qualifier- | $40$ |\n| $6$ | NOI Qualifier/NOI- | $55$ |\n| $7$ | NOI | $75$ |\n| $8$ | NOI+/CTSC | $100$ |\n\n**[Table 2: Difficulty Rules]**\n\n| Difficulty Level | Color | Score Range |\n| :------: | :------: | :------: |\n| Beginner | Red | $1\\sim 5$ |\n| Junior- | Orange | $6\\sim 12$ |\n| Junior/Senior- | Yellow | $13\\sim 20$ |\n| Junior+/Senior | Green | $21\\sim 35$ |\n| Senior+/NOI Qualifier- | Blue | $36\\sim 45$ |\n| NOI Qualifier/NOI- | Purple | $46\\sim 70$ |\n| NOI+/CTSC | Black | $71\\sim 100$ |", "inputFormat": "**This problem has multiple test cases.**\n\nThe first line contains an integer $T$, the number of test cases.\n\nFor each test case:\n\n- The first line contains three integers $n, m, p$, representing the number of paid voters hired by Menteur-Hxy, the number of ratings from Luogu users, and the modulus for output.\n- The second line contains $n$ integers $s_1 \\dots s_n$, where each $s_i$ is a paid voter's ability value.\n- The third line contains $m$ integers $t_1 \\dots t_n$, representing each Luogu user's vote ID.\n- The fourth line contains an integer $k$, representing the difficulty coefficient of the problem.", "outputFormat": "For each test case, output one integer per line: the total number of valid selection plans modulo $p$. If there is no solution, output $0$.", "hint": "**[Sample Explanation $1$]**\n\nThe sum of Luogu users' scores is $25+40+55+75+100=295$. After discarding one lowest score, it becomes $270$. At this time, Menteur-Hxy can achieve the goal by hiring at least two paid voters.\n\nSince there are $4$ paid voters who can solve this problem, the selection plans are:\n\n$$\\{1,2\\}\\{1,2,3\\}\\{1,2,3,4\\}\\{1,2,4\\}\\{1,3\\}\\{1,3,4\\}\\{1,4\\}\\{2,3\\}\\{2,3,4\\}\\{2,4\\}\\{3,4\\}$$\n\nThere are $11$ plans in total, and $11 \\bmod 9 = 2$.\n\n**[Constraints and Notes]**\n\nFor $30\\%$ of the testdata, $n, m \\leq 50$.\n\nFor another $20\\%$ of the testdata, $p$ is a prime.\n\nFor $100\\%$ of the testdata, $1 \\leq n, m, k,s_i \\leq 10^5, 1 \\leq t \\leq 5, 2 \\leq p \\leq 3 \\times 10^3, 1 \\leq t_i \\leq 8$.\n\nIt is guaranteed that the difference between the number of qualified paid voters and the minimum number of paid voters required does not exceed $5000$.\n\n(Original note: This problem may be slightly tight on constant factors. Thanks to @Ghostcai and @Swhsz for helping to validate the problem.)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "评分系统", "background": "答疑请到：https://www.luogu.org/discuss/show?postid=79498\n\n由于时限等问题，请大家重交一遍这道题\n\n本题时限开至2s\n\n样例：https://files.cnblogs.com/files/ztz11/yl.rar\n\n---\n\n众所周知，luogu 有题目难度的评分系统，用户在通过题目后可以选择题目难度以及算法标签，来完善 luogu 的题库。\n\n![](https://cdn.luogu.com.cn/upload/pic/40327.png)\n\n（原注：以下内容非真实评分数据，纯属作者编造，仅供娱乐使用。）", "description": "Menteur-Hxy 同学很不老实，为了实现 NOIp 前 AC $100$ 道黑题的目标，他决定雇佣一些水军，最少雇佣 $1$ 个水军。\n\n每个水军都有一个能力值 $x_i$，表示该水军可以解决难度最高为 $x_i$ 的题目。这些水军十分尽职尽责，在通过这道题目后都会给题目评最高难度。当然，luogu 的正常用户也会做题，他们会正常地评分。现在，我们给你所有水军的能力值以及每道题正常用户的评分记录，请你求出有多少种选择水军的方案，可以使这道题的评分变为黑题。因为答案可能过大，最终请输出答案数 $\\bmod p$ 的值。\n\n评分计算公式：去掉一个最高分，去掉一个最低分后求平均分。\n\n**【表一：投票信息】**\n\n| 投票编号 | 对应难度 | 分数贡献 |\n| :------: | :------: | :------: |\n| $1$ | 入门 | $1$ |\n| $2$ | 普及- | $10$ |\n| $3$ | 普及/提高- | $15$ |\n| $4$ | 普及+/提高 | $25$ |\n| $5$ | 提高+/省选- | $40$ |\n| $6$ | 省选/NOI- | $55$ |\n| $7$ | NOI | $75$ |\n| $8$ | NOI+/CTSC | $100$ |\n\n**【表二：难度规则】**\n\n| 难度等级 | 对应颜色 | 对应分数 |\n| :------: | :------: | :------: |\n| 入门 | 红 | $1\\sim 5$ |\n| 普及- | 橙 | $6\\sim 12$ |\n| 普及/提高- | 黄 | $13\\sim 20$ |\n| 普及+/提高 | 绿 | $21\\sim 35$ |\n| 提高+/省选- | 蓝 | $36\\sim 45$ |\n| 省选/NOI- | 紫 | $46\\sim 70$ |\n| NOI+/CTSC | 黑 | $71\\sim 100$ |", "inputFormat": "**本题有多组数据。**\n\n第一行，一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n+ 第一行三个整数 $n, m, p$，分别表示 Menteur-Hxy 找的水军数量，luogu 用户评分数量，和输出时的模数。\n+ 第二行，$n$ 个整数 $s_1 \\dots s_n$ 分别表示水军的能力值。\n+ 第三行，$m$ 个整数 $t_1 \\dots t_n$，表示每个 luogu 用户的投票编号。\n+ 第四行，一个整数 $k$ ，表示题目的难度系数。", "outputFormat": "对于每组数据，输出一行一个整数，表示总选择方案数对 $p$ 取模后的结果，如无解，则输出 $0$。", "hint": "**【样例解释 $1$】**\n\nluogu 用户评分和为 $25+40+55+75+100=295$，弃掉一个最低分后为 $270$，这时 Menteur-Hxy 雇佣两个及以上水军就可以达到目的。\n\n因为可以通过本题的水军共有 $4$ 个，所以选择方案共有：\n\n$$\\{1,2\\}\\{1,2,3\\}\\{1,2,3,4\\}\\{1,2,4\\}\\{1,3\\}\\{1,3,4\\}\\{1,4\\}\\{2,3\\}\\{2,3,4\\}\\{2,4\\}\\{3,4\\}$$\n\n共 $11$ 种，对 $9$ 取余后结果为 $2$。\n\n**【数据规模与约定】**\n\n对于 $30\\%$ 的数据，$n, m \\leq 50$。\n\n对于另外 $20\\%$ 的数据，$p$ 为质数。\n\n对于 $100\\%$ 的数据，$1 \\leq n, m, k,s_i \\leq 10^5, 1 \\leq t \\leq 5, 2 \\leq p \\leq 3 \\times 10^3, 1 \\leq t_i \\leq 8$。\n\n保证合格水军的数量与需要的最少水军数量之差不超过 $5000$。\n\n（原注：本题可能轻微卡常。感谢 @Ghostcai ，@Swhsz 帮忙验题。）", "locale": "zh-CN"}}}
{"pid": "P4994", "type": "P", "difficulty": 3, "samples": [["2", "3"], ["6", "24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["递推", "枚举", "Fibonacci 数列", "洛谷月赛"], "title": "终于结束的起点", "background": "> 终于结束的起点  \n> 终于写下句点  \n> 终于我们告别  \n> 终于我们又回到原点  \n> ……\n\n一个个 OIer 的竞赛生涯总是从一场 NOIp 开始，大多也在一场 NOIp 中结束，好似一次次轮回在不断上演。  \n如果这次 NOIp 是你的起点，那么祝你的 OI 生涯如同夏花般绚烂。  \n如果这次 NOIp 是你的终点，那么祝你的 OI 回忆宛若繁星般璀璨。  \n也许这是你最后一次在洛谷上打比赛，也许不是。  \n不过，无论如何，祝你在一周后的比赛里，好运。\n\n当然，这道题也和轮回有关系。", "description": "广为人知的斐波拉契数列 $\\mathrm{fib}(n)$ 是这么计算的\n\n$$\n\\mathrm{fib}(n)=\\begin{cases}\n0,& n=0 \\\\\n1,& n=1 \\\\\n\\mathrm{fib}(n-1) + \\mathrm{fib}(n-2),& n>1\n\\end{cases}\n$$\n\n也就是 $0, 1, 1, 2, 3, 5, 8, 13 \\cdots$，每一项都是前两项之和。\n\n小 F 发现，如果把斐波拉契数列的每一项对任意大于 $1$ 的正整数 $M$ 取模的时候，数列都会产生循环。\n\n当然，小 F 很快就明白了，因为 ($\\mathrm{fib}(n - 1) \\bmod M$) 和 ($\\mathrm{fib}(n - 2) \\bmod M)$ 最多只有 $M ^ 2$ 种取值，所以在 $M  ^ 2$ 次计算后一定出现过循环。\n\n甚至更一般地，我们可以证明，无论取什么模数 $M$，最终模 $M$ 下的斐波拉契数列都会是 $0, 1, \\cdots, 0, 1, \\cdots$。\n\n现在，给你一个模数 $M$，请你求出最小的 $n > 0$，使得 $\\mathrm{fib}(n) \\bmod M = 0, \\mathrm{fib}(n + 1) \\bmod M = 1$。", "inputFormat": "输入一行一个正整数 $M$。", "outputFormat": "输出一行一个正整数 $n$。", "hint": "#### 样例 1 解释\n\n斐波拉契数列为 $0, 1, 1, 2, 3, 5, 8, 13, 21, 34, \\cdots$，在对 $2$ 取模后结果为 $0, 1, 1, 0, 1, 1, 0, 1, 1, 0, \\cdots$。\n\n我们可以发现，当 $n = 3$ 时，$f(n) \\bmod 2= 0, f(n + 1) \\bmod 2 = 1$，也就是我们要求的 $n$ 的最小值。\n\n#### 数据范围\n\n对于 $30\\%$ 的数据，$M \\leq 18$；\n\n对于 $70\\%$ 的数据，$M \\leq 2018$；\n\n对于 $100\\%$ 的数据，$2 \\leq M \\leq 706150=\\verb!0xAC666!$。\n\n#### 提示\n\n如果你还不知道什么是取模 $(\\bmod)$，那我也很乐意告诉你，模运算是求整数除法得到的余数，也就是竖式除法最终「除不尽」的部分，也即\n$$a \\bmod M =k \\iff a = bM + k\\ (M > 0, 0 \\leq k < M)$$\n其中 $a, b, k$ 都是非负整数。\n\n如果你使用 `C` / `C++`，你可以使用 `%` 来进行模运算。\n\n如果你使用 `Pascal`，你可以使用 `mod` 来进行模运算。", "locale": "zh-CN", "translations": {"en": {"title": "The Starting Point That Finally Ends.", "background": "> The starting point that finally ends.  \n> Finally writing the period.  \n> Finally we say goodbye.  \n> Finally we return to the starting point again.  \n> ……\n\nAn OIer’s contest journey always starts with a NOIp, and most likely also ends with a NOIp, as if the same cycle keeps playing again and again.  \nIf this NOIp is your starting point, then may your OI journey bloom as brilliantly as summer flowers.  \nIf this NOIp is your ending point, then may your OI memories shine like countless stars.  \nMaybe this is your last time competing on Luogu, maybe not.  \nBut no matter what, good luck in the contest one week later.\n\nOf course, this problem is also related to cycles.", "description": "The well-known Fibonacci sequence $\\mathrm{fib}(n)$ is computed as follows.\n\n$$\n\\mathrm{fib}(n)=\\begin{cases}\n0,& n=0 \\\\\n1,& n=1 \\\\\n\\mathrm{fib}(n-1) + \\mathrm{fib}(n-2),& n>1\n\\end{cases}\n$$\n\nThat is, $0, 1, 1, 2, 3, 5, 8, 13 \\cdots$, where each term is the sum of the previous two terms.\n\nLittle F discovered that if we take every term of the Fibonacci sequence modulo any positive integer $M$ greater than $1$, the sequence will always become periodic.\n\nOf course, Little F soon understood why: ($\\mathrm{fib}(n - 1) \\bmod M$) and ($\\mathrm{fib}(n - 2) \\bmod M$) have at most $M ^ 2$ possible pairs of values, so a cycle must appear within $M ^ 2$ steps.\n\nEven more generally, we can prove that no matter what modulus $M$ we choose, the Fibonacci sequence modulo $M$ will eventually look like $0, 1, \\cdots, 0, 1, \\cdots$.\n\nNow, given a modulus $M$, please find the smallest $n > 0$ such that $\\mathrm{fib}(n) \\bmod M = 0$ and $\\mathrm{fib}(n + 1) \\bmod M = 1$.", "inputFormat": "Input one line containing a positive integer $M$.", "outputFormat": "Output one line containing a positive integer $n$.", "hint": "#### Explanation for Sample 1\n\nThe Fibonacci sequence is $0, 1, 1, 2, 3, 5, 8, 13, 21, 34, \\cdots$. After taking modulo $2$, it becomes $0, 1, 1, 0, 1, 1, 0, 1, 1, 0, \\cdots$.\n\nWe can see that when $n = 3$, $f(n) \\bmod 2 = 0$ and $f(n + 1) \\bmod 2 = 1$, which is exactly what we need, and it is the smallest such $n$.\n\n#### Constraints\n\nFor $30\\%$ of the testdata, $M \\leq 18$.\n\nFor $70\\%$ of the testdata, $M \\leq 2018$.\n\nFor $100\\%$ of the testdata, $2 \\leq M \\leq 706150=\\verb!0xAC666!$.\n\n#### Notes\n\nIf you still do not know what modulo $(\\bmod)$ means, I would be happy to tell you. Modulo means taking the remainder of integer division, that is, the part that “cannot be divided evenly” at the end of long division. In other words,\n$$a \\bmod M =k \\iff a = bM + k\\ (M > 0, 0 \\leq k < M)$$\nwhere $a$, $b$, and $k$ are all non-negative integers.\n\nIf you use `C` / `C++`, you can use `%` for modulo.\n\nIf you use `Pascal`, you can use `mod` for modulo.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "终于结束的起点", "background": "> 终于结束的起点  \n> 终于写下句点  \n> 终于我们告别  \n> 终于我们又回到原点  \n> ……\n\n一个个 OIer 的竞赛生涯总是从一场 NOIp 开始，大多也在一场 NOIp 中结束，好似一次次轮回在不断上演。  \n如果这次 NOIp 是你的起点，那么祝你的 OI 生涯如同夏花般绚烂。  \n如果这次 NOIp 是你的终点，那么祝你的 OI 回忆宛若繁星般璀璨。  \n也许这是你最后一次在洛谷上打比赛，也许不是。  \n不过，无论如何，祝你在一周后的比赛里，好运。\n\n当然，这道题也和轮回有关系。", "description": "广为人知的斐波拉契数列 $\\mathrm{fib}(n)$ 是这么计算的\n\n$$\n\\mathrm{fib}(n)=\\begin{cases}\n0,& n=0 \\\\\n1,& n=1 \\\\\n\\mathrm{fib}(n-1) + \\mathrm{fib}(n-2),& n>1\n\\end{cases}\n$$\n\n也就是 $0, 1, 1, 2, 3, 5, 8, 13 \\cdots$，每一项都是前两项之和。\n\n小 F 发现，如果把斐波拉契数列的每一项对任意大于 $1$ 的正整数 $M$ 取模的时候，数列都会产生循环。\n\n当然，小 F 很快就明白了，因为 ($\\mathrm{fib}(n - 1) \\bmod M$) 和 ($\\mathrm{fib}(n - 2) \\bmod M)$ 最多只有 $M ^ 2$ 种取值，所以在 $M  ^ 2$ 次计算后一定出现过循环。\n\n甚至更一般地，我们可以证明，无论取什么模数 $M$，最终模 $M$ 下的斐波拉契数列都会是 $0, 1, \\cdots, 0, 1, \\cdots$。\n\n现在，给你一个模数 $M$，请你求出最小的 $n > 0$，使得 $\\mathrm{fib}(n) \\bmod M = 0, \\mathrm{fib}(n + 1) \\bmod M = 1$。", "inputFormat": "输入一行一个正整数 $M$。", "outputFormat": "输出一行一个正整数 $n$。", "hint": "#### 样例 1 解释\n\n斐波拉契数列为 $0, 1, 1, 2, 3, 5, 8, 13, 21, 34, \\cdots$，在对 $2$ 取模后结果为 $0, 1, 1, 0, 1, 1, 0, 1, 1, 0, \\cdots$。\n\n我们可以发现，当 $n = 3$ 时，$f(n) \\bmod 2= 0, f(n + 1) \\bmod 2 = 1$，也就是我们要求的 $n$ 的最小值。\n\n#### 数据范围\n\n对于 $30\\%$ 的数据，$M \\leq 18$；\n\n对于 $70\\%$ 的数据，$M \\leq 2018$；\n\n对于 $100\\%$ 的数据，$2 \\leq M \\leq 706150=\\verb!0xAC666!$。\n\n#### 提示\n\n如果你还不知道什么是取模 $(\\bmod)$，那我也很乐意告诉你，模运算是求整数除法得到的余数，也就是竖式除法最终「除不尽」的部分，也即\n$$a \\bmod M =k \\iff a = bM + k\\ (M > 0, 0 \\leq k < M)$$\n其中 $a, b, k$ 都是非负整数。\n\n如果你使用 `C` / `C++`，你可以使用 `%` 来进行模运算。\n\n如果你使用 `Pascal`，你可以使用 `mod` 来进行模运算。", "locale": "zh-CN"}}}
{"pid": "P4995", "type": "P", "difficulty": 2, "samples": [["2\n2 1", "5"], ["3\n6 3 5\n", "49"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "排序", "洛谷月赛"], "title": "跳跳！", "background": "", "description": "你是一只小跳蛙，你特别擅长在各种地方跳来跳去。\n\n这一天，你和朋友小 F 一起出去玩耍的时候，遇到了一堆高矮不同的石头，其中第 $i$ 块的石头高度为 $h_i$，地面的高度是 $h_0 = 0$。你估计着，从第 $i$ 块石头跳到第 $j$ 块石头上耗费的体力值为 $(h_i - h_j) ^ 2$，从地面跳到第 $i$ 块石头耗费的体力值是 $(h_i) ^ 2$。\n\n为了给小 F 展现你超级跳的本领，你决定跳到每个石头上各一次，并最终停在任意一块石头上，并且小跳蛙想耗费**尽可能多**的体力值。\n\n当然，你只是一只小跳蛙，你只会跳，不知道怎么跳才能让本领更充分地展现。\n\n不过你有救啦！小 F 给你递来了一个写着 AK 的电脑，你可以使用计算机程序帮你解决这个问题，万能的计算机会告诉你怎么跳。\n\n那就请你——会写代码的小跳蛙——写下这个程序，为你 NOIp AK 踏出坚实的一步吧！", "inputFormat": "输入一行一个正整数 $n$，表示石头个数。\n\n输入第二行 $n$ 个正整数，表示第 $i$ 块石头的高度 $h_i$。", "outputFormat": "输出一行一个正整数，表示你可以耗费的体力值的最大值。", "hint": "#### 样例解释\n\n两个样例按照输入给定的顺序依次跳上去就可以得到最优方案之一。\n\n#### 数据范围\n对于 $1 \\leq i \\leq n$，有 $0 < h_i \\leq 10 ^ 4$，且保证 $h_i$ 互不相同。\n\n对于 $10\\%$ 的数据，$n \\leq 3$；\n\n对于 $20\\%$ 的数据，$n \\leq 10$；\n\n对于 $50\\%$ 的数据，$n \\leq 20$；\n\n对于 $80\\%$ 的数据，$n \\leq 50$；\n\n对于 $100\\%$ 的数据，$n \\leq 300$。", "locale": "zh-CN", "translations": {"en": {"title": "Jump Jump!", "background": "", "description": "You are a little jumping frog, and you are especially good at jumping around in all kinds of places.\n\nOne day, when you went out to play with your friend Little F, you came across a pile of stones with different heights. The height of the $i$-th stone is $h_i$, and the ground height is $h_0 = 0$. You estimate that the stamina cost to jump from stone $i$ to stone $j$ is $(h_i - h_j) ^ 2$, and the stamina cost to jump from the ground to stone $i$ is $(h_i) ^ 2$.\n\nTo show Little F your amazing jumping skills, you decide to jump onto each stone exactly once, and finally stop on any stone. Also, the little frog wants to spend **as much** stamina as possible.\n\nOf course, you are just a little frog. You can only jump, and you do not know how to jump in a way that shows your skills best.\n\nBut you are saved! Little F hands you a computer with “AK” written on it, and you can use a computer program to solve this problem. The almighty computer will tell you how to jump.\n\nSo please, you little frog who can write code, write this program and take a solid step toward getting NOIp AK!", "inputFormat": "The first line contains a positive integer $n$, the number of stones.\n\nThe second line contains $n$ positive integers, where the $i$-th integer is the height $h_i$ of the $i$-th stone.", "outputFormat": "Output one positive integer in a single line, the maximum stamina cost you can spend.", "hint": "#### Sample Explanation\n\nFor both samples, jumping in the order given in the input is one of the optimal solutions.\n\n#### Constraints\n\nFor $1 \\leq i \\leq n$, $0 < h_i \\leq 10 ^ 4$, and all $h_i$ are distinct.\n\nFor $10\\%$ of the testdata, $n \\leq 3$.\n\nFor $20\\%$ of the testdata, $n \\leq 10$.\n\nFor $50\\%$ of the testdata, $n \\leq 20$.\n\nFor $80\\%$ of the testdata, $n \\leq 50$.\n\nFor $100\\%$ of the testdata, $n \\leq 300$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "跳跳！", "background": "", "description": "你是一只小跳蛙，你特别擅长在各种地方跳来跳去。\n\n这一天，你和朋友小 F 一起出去玩耍的时候，遇到了一堆高矮不同的石头，其中第 $i$ 块的石头高度为 $h_i$，地面的高度是 $h_0 = 0$。你估计着，从第 $i$ 块石头跳到第 $j$ 块石头上耗费的体力值为 $(h_i - h_j) ^ 2$，从地面跳到第 $i$ 块石头耗费的体力值是 $(h_i) ^ 2$。\n\n为了给小 F 展现你超级跳的本领，你决定跳到每个石头上各一次，并最终停在任意一块石头上，并且小跳蛙想耗费**尽可能多**的体力值。\n\n当然，你只是一只小跳蛙，你只会跳，不知道怎么跳才能让本领更充分地展现。\n\n不过你有救啦！小 F 给你递来了一个写着 AK 的电脑，你可以使用计算机程序帮你解决这个问题，万能的计算机会告诉你怎么跳。\n\n那就请你——会写代码的小跳蛙——写下这个程序，为你 NOIp AK 踏出坚实的一步吧！", "inputFormat": "输入一行一个正整数 $n$，表示石头个数。\n\n输入第二行 $n$ 个正整数，表示第 $i$ 块石头的高度 $h_i$。", "outputFormat": "输出一行一个正整数，表示你可以耗费的体力值的最大值。", "hint": "#### 样例解释\n\n两个样例按照输入给定的顺序依次跳上去就可以得到最优方案之一。\n\n#### 数据范围\n对于 $1 \\leq i \\leq n$，有 $0 < h_i \\leq 10 ^ 4$，且保证 $h_i$ 互不相同。\n\n对于 $10\\%$ 的数据，$n \\leq 3$；\n\n对于 $20\\%$ 的数据，$n \\leq 10$；\n\n对于 $50\\%$ 的数据，$n \\leq 20$；\n\n对于 $80\\%$ 的数据，$n \\leq 50$；\n\n对于 $100\\%$ 的数据，$n \\leq 300$。", "locale": "zh-CN"}}}
{"pid": "P4996", "type": "P", "difficulty": 5, "samples": [["2 2\n00 1\n10 1", "4"], ["3 4\n000 16\n001 9\n110 4\n111 1", "260"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "进制", "洛谷月赛", "状压 DP"], "title": "咕咕咕", "background": "", "description": "小 F 是一个能鸽善鹉的同学，他经常把事情拖到最后一天才去做，导致他的某些日子总是非常匆忙。\n\n比如，时间回溯到了 2018 年 11 月 3 日。小 F 望着自己的任务清单：\n\n1. 看 iG 夺冠；\n2. 补月赛题的锅。\n\n小 F 虽然经常咕咕咕，但他完成任务也是很厉害的，他一次性可以完成剩余任务的任一**非空子集**。比如，他现在可以选择以下几种中的一种：\n\n1. 看 iG 夺冠；\n2. 补月赛题的锅；\n3. 一边看 iG 夺冠的直播，一边补锅。\n\n当然，比赛实在是太精彩了，所以小 F 就去看比赛了。\n\n不过，当金雨从天而降、IG 举起奖杯之时，小 F 突然心生愧疚——锅还没补呢！于是，小 F 的内心产生了一点歉意。\n\n这时小 F 注意到，自己总是在某些情况下会产生歉意。每当他要检查自己的任务表来决定下一项任务的时候，如果当前他干了某些事情，但是没干另一些事情，那么他就会产生一定量的歉意——比如，无论他今天看没看比赛，只要没有补完月赛的锅，他都会在选择任务的时候产生 $1$ 点歉意。小 F 完成所有任务后，他这一天的歉意值等于他每次选择任务时的歉意之和。\n\n过高的歉意值让小 F 感到不安。现在，小 F 告诉你他还有 $n$ 项任务，并告诉你在 $m$ 种情况中的一种 $\\mathrm{state}_i$ 的情况下，小 F 会产生 $a_i$ 点歉意。请你帮忙计算一下，小 F 在那一天所有可能的完成所有任务方式的歉意值之和是多少。\n\n由于答案可能很大，你只需要输出答案对 $998244353$ 取模即可。", "inputFormat": "输入一行两个整数 $n, m$，表示有 $n$ 项任务，在 $m$ 种情况中下小 F 会产生歉意值。\n\n输入接下来 $m$ 行，每行有一个长度为 $n$ 的 $0-1$ 串 $\\mathrm{state}_i$ 和一个歉意值 $a_i$，$\\mathrm{state}_{i, j}$ 为 $0/1$  表示第 $j$ 项任务此时没做 / 已经做了。\n\n详情请参考样例和样例解释。", "outputFormat": "输出一行一个整数，表示小 F 在那一天所有可能的完成任务方式的歉意值之和对 $998244353$ 取模的结果。", "hint": "#### 样例 1 解释：\n\n$0-1$ 串中第一个数字表示小 F 看没看比赛，第二个数字表示小 F 补没补锅。\n\n我们用 $\\varnothing$ 表示小 F 什么都没干，$A$ 表示小 F 看了比赛，$B$ 表示小 F 补了锅，那么所有会产生愧疚的方式如下：\n\n$\\varnothing: 1$  \n$\\{A\\}:1$\n\n那么所有可能的选择如下：\n\n$\\varnothing\\rightarrow\\{A\\}\\rightarrow\\{A,B\\}:2$  \n$\\varnothing\\rightarrow\\{B\\}\\rightarrow\\{A,B\\}:1$  \n$\\varnothing\\rightarrow\\{A,B\\}:1$\n\n所以答案是 $2 + 1 + 1 = 4$。\n\n#### 数据范围\n\n保证出现的 $\\mathrm{state}_i$ 互不相同。\n\n对于所有数据，有 $1 \\leq n \\leq 20$, $1 \\leq m \\leq \\min(2 ^ n, 10 ^ 5), 1 \\leq a_i \\leq 10 ^ 5$。\n\n| Case | $n$ |\n| :------:|:------: |\n|1|$1$|\n|2|$2$|\n|3|$3$|\n|4|$10$|\n|5|$12$|\n|6|$14$|\n|7|$16$|\n|8|$18$|\n|9|$19$|\n|10|$20$|\n", "locale": "zh-CN", "translations": {"en": {"title": "Gugugu", "background": "", "description": "Xiao F is a student who is good at “pigeoning” (putting things off). He often delays tasks until the last day, which makes some of his days very rushed.\n\nFor example, time goes back to November 3, 2018. Xiao F looks at his to-do list:\n\n1. Watch iG win the championship.\n2. Fix the problems from the monthly contest.\n\nAlthough Xiao F often goes “gugugu”, he is also very efficient when he works: in one step, he can finish any **non-empty subset** of the remaining tasks. For example, right now he can choose one of the following:\n\n1. Watch iG win the championship.\n2. Fix the monthly contest problems.\n3. Watch the iG live stream while fixing the problems.\n\nOf course, the match is so exciting that Xiao F goes to watch it.\n\nHowever, when the golden rain falls and iG lifts the trophy, Xiao F suddenly feels guilty—the problems are not fixed yet. So, Xiao F feels a bit of remorse.\n\nXiao F notices that he always feels remorse in certain situations. Every time he checks his task list to decide the next tasks, if he has done some tasks but has not done some other tasks, then he will feel a certain amount of remorse. For example, no matter whether he watched the match today or not, as long as he has not finished fixing the monthly contest problems, he will feel $1$ point of remorse when choosing tasks. After Xiao F finishes all tasks, the remorse value for that day equals the sum of the remorse values at each time he chooses tasks.\n\nA too-high remorse value makes Xiao F uneasy. Now, Xiao F tells you he still has $n$ tasks, and tells you that in one of $m$ situations $\\mathrm{state}_i$, Xiao F will feel $a_i$ points of remorse. Please help compute the sum of the remorse values over all possible ways for Xiao F to finish all tasks on that day.\n\nSince the answer may be very large, you only need to output the answer modulo $998244353$.", "inputFormat": "The first line contains two integers $n, m$, meaning there are $n$ tasks, and among $m$ situations Xiao F will generate a remorse value.\n\nThe next $m$ lines each contain a $0$-$1$ string $\\mathrm{state}_i$ of length $n$ and an integer remorse value $a_i$. $\\mathrm{state}_{i, j}$ is $0/1$, meaning that the $j$-th task is not done / already done at that time.\n\nPlease refer to the samples and the sample explanation for details.", "outputFormat": "Output one integer in one line, representing the sum of the remorse values over all possible ways to finish all tasks on that day, modulo $998244353$.", "hint": "#### Sample 1 Explanation:\n\nIn the $0$-$1$ string, the first digit indicates whether Xiao F watched the match, and the second digit indicates whether Xiao F fixed the problems.\n\nWe use $\\varnothing$ to denote that Xiao F did nothing, $A$ to denote that Xiao F watched the match, and $B$ to denote that Xiao F fixed the problems. Then the ways that will produce guilt are as follows:\n\n$\\varnothing: 1$  \n$\\{A\\}:1$\n\nThen all possible choices are:\n\n$\\varnothing\\rightarrow\\{A\\}\\rightarrow\\{A,B\\}:2$  \n$\\varnothing\\rightarrow\\{B\\}\\rightarrow\\{A,B\\}:1$  \n$\\varnothing\\rightarrow\\{A,B\\}:1$\n\nSo the answer is $2 + 1 + 1 = 4$.\n\n#### Constraints\n\nIt is guaranteed that all given $\\mathrm{state}_i$ are pairwise distinct.\n\nFor all testdata, $1 \\leq n \\leq 20$, $1 \\leq m \\leq \\min(2 ^ n, 10 ^ 5), 1 \\leq a_i \\leq 10 ^ 5$.\n\n| Case | $n$ |\n| :------:|:------: |\n|1|$1$|\n|2|$2$|\n|3|$3$|\n|4|$10$|\n|5|$12$|\n|6|$14$|\n|7|$16$|\n|8|$18$|\n|9|$19$|\n|10|$20$|\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "咕咕咕", "background": "", "description": "小 F 是一个能鸽善鹉的同学，他经常把事情拖到最后一天才去做，导致他的某些日子总是非常匆忙。\n\n比如，时间回溯到了 2018 年 11 月 3 日。小 F 望着自己的任务清单：\n\n1. 看 iG 夺冠；\n2. 补月赛题的锅。\n\n小 F 虽然经常咕咕咕，但他完成任务也是很厉害的，他一次性可以完成剩余任务的任一**非空子集**。比如，他现在可以选择以下几种中的一种：\n\n1. 看 iG 夺冠；\n2. 补月赛题的锅；\n3. 一边看 iG 夺冠的直播，一边补锅。\n\n当然，比赛实在是太精彩了，所以小 F 就去看比赛了。\n\n不过，当金雨从天而降、IG 举起奖杯之时，小 F 突然心生愧疚——锅还没补呢！于是，小 F 的内心产生了一点歉意。\n\n这时小 F 注意到，自己总是在某些情况下会产生歉意。每当他要检查自己的任务表来决定下一项任务的时候，如果当前他干了某些事情，但是没干另一些事情，那么他就会产生一定量的歉意——比如，无论他今天看没看比赛，只要没有补完月赛的锅，他都会在选择任务的时候产生 $1$ 点歉意。小 F 完成所有任务后，他这一天的歉意值等于他每次选择任务时的歉意之和。\n\n过高的歉意值让小 F 感到不安。现在，小 F 告诉你他还有 $n$ 项任务，并告诉你在 $m$ 种情况中的一种 $\\mathrm{state}_i$ 的情况下，小 F 会产生 $a_i$ 点歉意。请你帮忙计算一下，小 F 在那一天所有可能的完成所有任务方式的歉意值之和是多少。\n\n由于答案可能很大，你只需要输出答案对 $998244353$ 取模即可。", "inputFormat": "输入一行两个整数 $n, m$，表示有 $n$ 项任务，在 $m$ 种情况中下小 F 会产生歉意值。\n\n输入接下来 $m$ 行，每行有一个长度为 $n$ 的 $0-1$ 串 $\\mathrm{state}_i$ 和一个歉意值 $a_i$，$\\mathrm{state}_{i, j}$ 为 $0/1$  表示第 $j$ 项任务此时没做 / 已经做了。\n\n详情请参考样例和样例解释。", "outputFormat": "输出一行一个整数，表示小 F 在那一天所有可能的完成任务方式的歉意值之和对 $998244353$ 取模的结果。", "hint": "#### 样例 1 解释：\n\n$0-1$ 串中第一个数字表示小 F 看没看比赛，第二个数字表示小 F 补没补锅。\n\n我们用 $\\varnothing$ 表示小 F 什么都没干，$A$ 表示小 F 看了比赛，$B$ 表示小 F 补了锅，那么所有会产生愧疚的方式如下：\n\n$\\varnothing: 1$  \n$\\{A\\}:1$\n\n那么所有可能的选择如下：\n\n$\\varnothing\\rightarrow\\{A\\}\\rightarrow\\{A,B\\}:2$  \n$\\varnothing\\rightarrow\\{B\\}\\rightarrow\\{A,B\\}:1$  \n$\\varnothing\\rightarrow\\{A,B\\}:1$\n\n所以答案是 $2 + 1 + 1 = 4$。\n\n#### 数据范围\n\n保证出现的 $\\mathrm{state}_i$ 互不相同。\n\n对于所有数据，有 $1 \\leq n \\leq 20$, $1 \\leq m \\leq \\min(2 ^ n, 10 ^ 5), 1 \\leq a_i \\leq 10 ^ 5$。\n\n| Case | $n$ |\n| :------:|:------: |\n|1|$1$|\n|2|$2$|\n|3|$3$|\n|4|$10$|\n|5|$12$|\n|6|$14$|\n|7|$16$|\n|8|$18$|\n|9|$19$|\n|10|$20$|\n", "locale": "zh-CN"}}}
{"pid": "P4997", "type": "P", "difficulty": 6, "samples": [["3\nXXX\nOOX\nOO.", "-1 -1"], ["3\nXOO\nXO.\nX..", "2 3\n-1 -1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["模拟", "并查集", "Special Judge", "连通块", "洛谷月赛"], "title": "不围棋", "background": "「不围棋」是一种非常有趣的棋类游戏。\n\n大家都知道，围棋的「气」是指一个棋子所在的联通块相邻的空格。两粒棋如果在棋盘上线段的两端就认为是相邻的，也就是在同一个连通块里。比如在图中，白子为四个独立的连通块，黑子构成一个连通块，绿色点是黑子连通块唯一的「气」：\n\n![](https://cdn.luogu.com.cn/upload/pic/41011.png )\n\n「提子」是指将没有「气」的棋子提出棋盘，在上图中，如果白方走绿点，那么就可以将黑子全部提走。\n\n在围棋中，我们想尽量多地占领地盘、提走对方棋子。然而，不围棋恰恰相反——不围棋是一种非常和平的游戏，双方的走子不能产生任何提子，也就是说，**任何一次走子不能让棋盘上任何一个棋子所在的连通块没有气**。比如，白方在上图中不能走绿点。\n\n在你的某一步棋后，对方无棋可走，那么你就赢了。", "description": "小 F 对不围棋特别感兴趣，不过他经常输，所以他想做出一个 AI 来替他完成这局游戏。\n\n不过造 AI 实在是太困难啦，小 F 千辛万苦写出来的 AI 被同学们的 AI 锤爆啦！\n\n现在，他想请你帮他实现一个 AI 中一部分的功能——随机模拟，因为他相信你写的程序非常优秀，一定能优化他的 AI。\n\n给你一个 $n \\times n$ 的棋盘，上面或许已经有一些棋子了，但此时局面一定是合法的，即**不存在没有气的连通块**；此时轮到黑棋下棋，因此棋盘上**黑白棋子的数量一定是相等的**。\n\n你的任务是，**依次**为黑棋和白棋**随意**指定一个可行的走子位置，直到某一步游戏无法进行，决出胜负为止。\n\n在正式的不围棋比赛还存在一些禁手规则。不过由于小 F 玩的是一种棋盘大小可变的新型不围棋，我们只用考虑上面提到的气的规则就好。", "inputFormat": "输入一行一个整数 $n$，表示棋盘大小。\n输入接下来 $n$ 行，每行有一个长度为 $n$ 的字符串，表示第 $i$ 行的情况。\n\n* `.` 表示空\n* `X` 表示黑棋\n* `O` 表示白棋\n\n详细请参考样例。\n\n输入保证，棋盘初始局面合法，`X` 与 `O` 数量相等。", "outputFormat": "你需要输出至少一行，假设你输出了 $L$ 行，那么对于前 $L - 1$ 行，你应该输出两个用空格分隔的正整数表示下棋坐标 $x_i, y_i$，其中奇数行表示黑棋的行动，偶数行表示白棋的行动。$x$ 坐标为从上到下从 $1$ 到 $n$，$y$ 坐标为从左到右从 $1$ 到 $n$。\n\n请在第 $L$ 行输出 `-1 -1`，表示此时第 $L$ 手执棋人已经无棋可走。\n\n你的输出可能会很大，即使本题时限为 $3s$，也请你不要使用太慢的方法输出大量内容。\n\n#### 评分方式：\n\n本题启用 Special Judge，并且有部分分。我们将通过以下方式进行计分：\n\n* 如果你输出格式错误，那么该测试点不得分。格式错误包括但不限于：输出了非数字内容；一行输出了超过或者少于两个正整数；输出的坐标在棋盘外；最后一行的输出不是 `-1 -1`。\n* 如果你的输出格式正确，但是你的输出的第一行的答案就是不可接受的，那么该测试点不得分。例如：输出的坐标是黑棋不可以下的位置；黑棋有棋可走却输出了 `-1 -1`。\n* 如果你的输出格式正确，并且你的前 $k(1 \\leq k <L)$ 行输出是可以接受的，那么该测试点将至少得到 $s$ 分，其中 $s = \\lfloor \\lg k \\rfloor + 1$，含义是 $k$ 在十进制表示下是一个 $s$ 位数。\n* 如果你的输出完全正确，无论你输出了多少行，你都将得到 $10$ 分。\n\n详情请参考样例解释。", "hint": "#### 样例 1 解释：\n\n注意到将棋盘下满会让棋盘上所有连通块都没有气，所以黑棋是无棋可走的。\n\n#### 样例 2 解释：\n\n样例 2 还有两个正确的输出是这样的：\n```\n3 2\n2 3\n-1 -1\n```\n```\n3 3\n2 3\n-1 -1\n```\n我们将棋盘表示出来：\n\n![](https://cdn.luogu.com.cn/upload/pic/41216.png)\n\n其中，黑棋是三个空格都可以走的。\n\n* 如果黑棋走 $(2, 3)$，如图，此时白棋走任何位置都会提走相邻的黑棋，白棋无棋可走；\n ![](https://cdn.luogu.com.cn/upload/pic/41219.png)\n\n* 如果黑棋走 $(3, 2)$，如图，此时白棋唯一可走的点是 $(2, 3)$，之后黑棋无棋可走；\n ![](https://cdn.luogu.com.cn/upload/pic/41218.png)\n\n* 如果黑棋走 $(3, 3)$，如图，此时白棋唯一可走的点是 $(2, 3)$，之后黑棋无棋可走；\n ![](https://cdn.luogu.com.cn/upload/pic/41217.png)\n\n这三种情况依次对应三个输出，输出任意一种可得到满分。\n\n#### 评分规则解释：\n\n为了解释评分规则，我们以样例 2 为例，对于以下几种输出：\n```\nI AK IOI\n```\n很不幸，因为您太强了，所以为了按住躁动的您，我们会给您 $0$ 分。\n\n```\n-1 -1\n```\n```\n1 1\n-1 -1\n```\n很不幸，你的第一行没有输出正确，得 $0$ 分。\n\n```\n3 3\n-1 -1\n```\n你输出的前 $1$ 行是正确方案的一部分。由于 $1$ 是 $1$ 位数，恭喜你得到了整整 $1$ 分！\n\n#### 数据范围：\n\n![](https://cdn.luogu.com.cn/upload/pic/41855.png)", "locale": "zh-CN", "translations": {"en": {"title": "No-Go (Not Go)", "background": "“No-Go” is a very interesting board game.\n\nAs everyone knows, in Go, a group’s “liberties” are the empty intersections adjacent to the connected component containing a stone. Two stones are considered adjacent if they are at the two ends of a line segment on the board, meaning they are in the same connected component. For example, in the figure, the white stones form four separate connected components, the black stones form one connected component, and the green point is the only “liberty” of the black group:\n\n![](https://cdn.luogu.com.cn/upload/pic/41011.png )\n\n“Capturing” means removing stones that have no liberties from the board. In the figure above, if White plays at the green point, then all black stones can be captured.\n\nIn Go, we want to occupy as much territory as possible and capture the opponent’s stones. However, No-Go is exactly the opposite—No-Go is a very peaceful game, where neither player is allowed to make any move that results in a capture. That is, **any move must not make any connected component of any stone on the board have zero liberties**. For example, in the figure above, White cannot play at the green point.\n\nAfter one of your moves, if the opponent has no legal move, then you win.", "description": "Little F is very interested in No-Go, but he often loses, so he wants to create an AI to play this game for him.\n\nHowever, building an AI is really too hard. After great effort, Little F’s AI still got completely crushed by his classmates’ AIs.\n\nNow he wants you to help him implement one part of an AI—random simulation—because he believes the program you write is very good and can surely optimize his AI.\n\nYou are given an $n \\times n$ board, which may already contain some stones, but the current position is guaranteed to be legal, i.e., **there is no connected component with no liberties**. It is now Black’s turn to move, so **the numbers of black and white stones on the board are guaranteed to be equal**.\n\nYour task is to **in order**, for Black and then White, **freely** choose a legal move position each time, until at some move the game cannot continue and a winner is decided.\n\nIn official No-Go matches there are also some forbidden-move rules. However, since Little F is playing a new kind of No-Go with variable board size, we only need to consider the liberty rule mentioned above.", "inputFormat": "The first line contains an integer $n$, the board size.  \nThe next $n$ lines each contain a string of length $n$, describing the state of row $i$.\n\n* `.` means empty.\n* `X` means a black stone.\n* `O` means a white stone.\n\nPlease refer to the samples for details.\n\nThe input guarantees that the initial position is legal, and the counts of `X` and `O` are equal.", "outputFormat": "You need to output at least one line. Suppose you output $L$ lines. For each of the first $L - 1$ lines, output two positive integers separated by a space to represent the move coordinates $x_i, y_i$. Odd-numbered lines represent Black’s moves, and even-numbered lines represent White’s moves. The $x$ coordinate is from top to bottom, from $1$ to $n$, and the $y$ coordinate is from left to right, from $1$ to $n$.\n\nOn line $L$, output `-1 -1`, meaning that the player to move on the $L$-th turn has no legal move.\n\nYour output may be very large. Even though the time limit is $3\\text{s}$, please do not use an overly slow method to output a large amount of content.\n\n#### Scoring\n\nThis problem uses a Special Judge and has partial scores. We will score as follows:\n\n* If your output format is wrong, you get $0$ points for that test. Format errors include but are not limited to: outputting non-numeric content; outputting more or fewer than two integers on a line; outputting coordinates outside the board; the last line is not `-1 -1`.\n* If your output format is correct, but the first line of your output is already unacceptable, you get $0$ points for that test. For example: the coordinate is not a legal move for Black; Black has a legal move but you output `-1 -1`.\n* If your output format is correct, and your first $k(1 \\leq k < L)$ lines are acceptable, then you will get at least $s$ points for that test, where $s = \\lfloor \\lg k \\rfloor + 1$. This means that $k$ has $s$ digits in decimal.\n* If your output is completely correct, no matter how many lines you output, you will get $10$ points.\n\nPlease refer to the sample explanation for details.", "hint": "#### Sample 1 Explanation\n\nNote that filling the entire board will make all connected components have no liberties, so Black has no legal move.\n\n#### Sample 2 Explanation\n\nFor Sample 2, there are also two other correct outputs:\n```\n3 2\n2 3\n-1 -1\n```\n```\n3 3\n2 3\n-1 -1\n```\nWe draw the board:\n\n![](https://cdn.luogu.com.cn/upload/pic/41216.png)\n\nHere, Black can play on any of the three empty intersections.\n\n* If Black plays $(2, 3)$, as shown, then any move by White would capture adjacent black stones, so White has no legal move.  \n ![](https://cdn.luogu.com.cn/upload/pic/41219.png)\n\n* If Black plays $(3, 2)$, as shown, then White’s only legal move is $(2, 3)$, after which Black has no legal move.  \n ![](https://cdn.luogu.com.cn/upload/pic/41218.png)\n\n* If Black plays $(3, 3)$, as shown, then White’s only legal move is $(2, 3)$, after which Black has no legal move.  \n ![](https://cdn.luogu.com.cn/upload/pic/41217.png)\n\nThese three cases correspond to the three outputs. Outputting any one of them gives full score.\n\n#### Scoring Rules Explanation\n\nTo explain the scoring rules, we use Sample 2. Consider the following outputs:\n```\nI AK IOI\n```\nUnfortunately, because you are too strong, in order to restrain your restless power, we will give you $0$ points.\n\n```\n-1 -1\n```\n```\n1 1\n-1 -1\n```\nUnfortunately, your first line is not correct, so you get $0$ points.\n\n```\n3 3\n-1 -1\n```\nYour first $1$ line is part of a correct solution. Since $1$ has $1$ digit, congratulations, you get exactly $1$ point.\n\n#### Constraints\n\n![](https://cdn.luogu.com.cn/upload/pic/41855.png)\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "不围棋", "background": "「不围棋」是一种非常有趣的棋类游戏。\n\n大家都知道，围棋的「气」是指一个棋子所在的联通块相邻的空格。两粒棋如果在棋盘上线段的两端就认为是相邻的，也就是在同一个连通块里。比如在图中，白子为四个独立的连通块，黑子构成一个连通块，绿色点是黑子连通块唯一的「气」：\n\n![](https://cdn.luogu.com.cn/upload/pic/41011.png )\n\n「提子」是指将没有「气」的棋子提出棋盘，在上图中，如果白方走绿点，那么就可以将黑子全部提走。\n\n在围棋中，我们想尽量多地占领地盘、提走对方棋子。然而，不围棋恰恰相反——不围棋是一种非常和平的游戏，双方的走子不能产生任何提子，也就是说，**任何一次走子不能让棋盘上任何一个棋子所在的连通块没有气**。比如，白方在上图中不能走绿点。\n\n在你的某一步棋后，对方无棋可走，那么你就赢了。", "description": "小 F 对不围棋特别感兴趣，不过他经常输，所以他想做出一个 AI 来替他完成这局游戏。\n\n不过造 AI 实在是太困难啦，小 F 千辛万苦写出来的 AI 被同学们的 AI 锤爆啦！\n\n现在，他想请你帮他实现一个 AI 中一部分的功能——随机模拟，因为他相信你写的程序非常优秀，一定能优化他的 AI。\n\n给你一个 $n \\times n$ 的棋盘，上面或许已经有一些棋子了，但此时局面一定是合法的，即**不存在没有气的连通块**；此时轮到黑棋下棋，因此棋盘上**黑白棋子的数量一定是相等的**。\n\n你的任务是，**依次**为黑棋和白棋**随意**指定一个可行的走子位置，直到某一步游戏无法进行，决出胜负为止。\n\n在正式的不围棋比赛还存在一些禁手规则。不过由于小 F 玩的是一种棋盘大小可变的新型不围棋，我们只用考虑上面提到的气的规则就好。", "inputFormat": "输入一行一个整数 $n$，表示棋盘大小。\n输入接下来 $n$ 行，每行有一个长度为 $n$ 的字符串，表示第 $i$ 行的情况。\n\n* `.` 表示空\n* `X` 表示黑棋\n* `O` 表示白棋\n\n详细请参考样例。\n\n输入保证，棋盘初始局面合法，`X` 与 `O` 数量相等。", "outputFormat": "你需要输出至少一行，假设你输出了 $L$ 行，那么对于前 $L - 1$ 行，你应该输出两个用空格分隔的正整数表示下棋坐标 $x_i, y_i$，其中奇数行表示黑棋的行动，偶数行表示白棋的行动。$x$ 坐标为从上到下从 $1$ 到 $n$，$y$ 坐标为从左到右从 $1$ 到 $n$。\n\n请在第 $L$ 行输出 `-1 -1`，表示此时第 $L$ 手执棋人已经无棋可走。\n\n你的输出可能会很大，即使本题时限为 $3s$，也请你不要使用太慢的方法输出大量内容。\n\n#### 评分方式：\n\n本题启用 Special Judge，并且有部分分。我们将通过以下方式进行计分：\n\n* 如果你输出格式错误，那么该测试点不得分。格式错误包括但不限于：输出了非数字内容；一行输出了超过或者少于两个正整数；输出的坐标在棋盘外；最后一行的输出不是 `-1 -1`。\n* 如果你的输出格式正确，但是你的输出的第一行的答案就是不可接受的，那么该测试点不得分。例如：输出的坐标是黑棋不可以下的位置；黑棋有棋可走却输出了 `-1 -1`。\n* 如果你的输出格式正确，并且你的前 $k(1 \\leq k <L)$ 行输出是可以接受的，那么该测试点将至少得到 $s$ 分，其中 $s = \\lfloor \\lg k \\rfloor + 1$，含义是 $k$ 在十进制表示下是一个 $s$ 位数。\n* 如果你的输出完全正确，无论你输出了多少行，你都将得到 $10$ 分。\n\n详情请参考样例解释。", "hint": "#### 样例 1 解释：\n\n注意到将棋盘下满会让棋盘上所有连通块都没有气，所以黑棋是无棋可走的。\n\n#### 样例 2 解释：\n\n样例 2 还有两个正确的输出是这样的：\n```\n3 2\n2 3\n-1 -1\n```\n```\n3 3\n2 3\n-1 -1\n```\n我们将棋盘表示出来：\n\n![](https://cdn.luogu.com.cn/upload/pic/41216.png)\n\n其中，黑棋是三个空格都可以走的。\n\n* 如果黑棋走 $(2, 3)$，如图，此时白棋走任何位置都会提走相邻的黑棋，白棋无棋可走；\n ![](https://cdn.luogu.com.cn/upload/pic/41219.png)\n\n* 如果黑棋走 $(3, 2)$，如图，此时白棋唯一可走的点是 $(2, 3)$，之后黑棋无棋可走；\n ![](https://cdn.luogu.com.cn/upload/pic/41218.png)\n\n* 如果黑棋走 $(3, 3)$，如图，此时白棋唯一可走的点是 $(2, 3)$，之后黑棋无棋可走；\n ![](https://cdn.luogu.com.cn/upload/pic/41217.png)\n\n这三种情况依次对应三个输出，输出任意一种可得到满分。\n\n#### 评分规则解释：\n\n为了解释评分规则，我们以样例 2 为例，对于以下几种输出：\n```\nI AK IOI\n```\n很不幸，因为您太强了，所以为了按住躁动的您，我们会给您 $0$ 分。\n\n```\n-1 -1\n```\n```\n1 1\n-1 -1\n```\n很不幸，你的第一行没有输出正确，得 $0$ 分。\n\n```\n3 3\n-1 -1\n```\n你输出的前 $1$ 行是正确方案的一部分。由于 $1$ 是 $1$ 位数，恭喜你得到了整整 $1$ 分！\n\n#### 数据范围：\n\n![](https://cdn.luogu.com.cn/upload/pic/41855.png)", "locale": "zh-CN"}}}
{"pid": "P4998", "type": "P", "difficulty": 4, "samples": [["7 2\n1 1 2 2 3 3 4", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "排序", "前缀和"], "title": "信号站", "background": "扶贫行动来到了 Q 村，扶贫队准备在 Q 村修筑信号站，让 Q 村不再“远离尘世”，让人们获得丰富的外界信息。", "description": "Q 村非常非常穷，整个村只有一条路。在这条路上，有 $n$ 户人家，因为条件有限，所以一个点上可能有多户人家。因为山区运输条件落后，所以扶贫队只能修筑 $k$ 个信号站，并且他们希望各信号站的不合理值之和最小。信号站的不合理值是指该信号站到每户人家的距离之和。\n\n距离计算方法：若某信号站的坐标为 $x$，某户人家的坐标为 $y$，那么该信号站与该户人家的距离为 $|x-y|$。\n \n扶贫队善于修筑信号站，但是他们不擅长选址 ~~（因为数学不好 QwQ）~~ ，他们希望你这位编程高手来帮助他们选择修筑信号站的最佳地点，使得 $k$ 个信号站的不合理值之和最小。\n\n数据保证人家数大于信号站数。放置信号站的位置坐标必须为整数，并且同一个位置上最多只能放置一个信号站。", "inputFormat": "输入共两行：\n\n第一行两个用空格隔开的整数 $n,k$，分别代表人家数和信号站数；\n\n第二行 $n$ 个用空格隔开的整数 $a_1,a_2,\\dots,a_n$，依次表示每户人家的坐标。", "outputFormat": "输出一行一个整数，表示最小的不合理值之和。", "hint": "#### 样例解释\n\n在坐标为 $2,3$ 的位置各放置一个信号站，总不合理值为 $6+7=13$，可以证明，没有比这个更优的方案。\n\n#### 数据范围\n\n对于 $70\\%$ 的数据，$1\\le k<n\\le10^3$；  \n对于 $100\\%$ 的数据，$1\\le k<n\\le10^6$，$0\\le a_i\\le10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Signal Stations", "background": "A poverty alleviation program has arrived at Village Q. The team plans to build signal stations in Village Q so that it is no longer “isolated from the outside world”, and so that people can get rich information from outside.", "description": "Village Q is extremely poor, and the whole village has only one road. Along this road, there are $n$ households. Due to limited conditions, there may be multiple households at the same point. Because transportation in the mountains is underdeveloped, the team can only build $k$ signal stations, and they want the sum of the “unreasonableness values” of all stations to be as small as possible. The unreasonableness value of a signal station is defined as the sum of its distances to every household.\n\nDistance is calculated as follows: if a signal station is at coordinate $x$ and a household is at coordinate $y$, then the distance between them is $|x-y|$.\n\nThe team is good at building signal stations, but not good at choosing locations ~~(because they are not good at math QwQ)~~. They hope you, a programming expert, can help them choose the best locations for the signal stations, so that the sum of unreasonableness values of the $k$ signal stations is minimized.\n\nThe testdata guarantees that the number of households is greater than the number of signal stations. The coordinates where signal stations are placed must be integers, and at most one signal station can be placed at the same coordinate.", "inputFormat": "There are two lines of input.\n\nThe first line contains two integers $n, k$ separated by spaces, representing the number of households and the number of signal stations.\n\nThe second line contains $n$ integers $a_1, a_2, \\dots, a_n$ separated by spaces, representing the coordinates of each household.", "outputFormat": "Output one line containing one integer, representing the minimum possible sum of unreasonableness values.", "hint": "#### Sample Explanation\n\nPlace one signal station each at coordinates $2$ and $3$. The total unreasonableness value is $6 + 7 = 13$. It can be proven that there is no better solution.\n\n#### Constraints\n\nFor $70\\%$ of the testdata, $1 \\le k < n \\le 10^3$.\n\nFor $100\\%$ of the testdata, $1 \\le k < n \\le 10^6$, $0 \\le a_i \\le 10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "信号站", "background": "扶贫行动来到了 Q 村，扶贫队准备在 Q 村修筑信号站，让 Q 村不再“远离尘世”，让人们获得丰富的外界信息。", "description": "Q 村非常非常穷，整个村只有一条路。在这条路上，有 $n$ 户人家，因为条件有限，所以一个点上可能有多户人家。因为山区运输条件落后，所以扶贫队只能修筑 $k$ 个信号站，并且他们希望各信号站的不合理值之和最小。信号站的不合理值是指该信号站到每户人家的距离之和。\n\n距离计算方法：若某信号站的坐标为 $x$，某户人家的坐标为 $y$，那么该信号站与该户人家的距离为 $|x-y|$。\n \n扶贫队善于修筑信号站，但是他们不擅长选址 ~~（因为数学不好 QwQ）~~ ，他们希望你这位编程高手来帮助他们选择修筑信号站的最佳地点，使得 $k$ 个信号站的不合理值之和最小。\n\n数据保证人家数大于信号站数。放置信号站的位置坐标必须为整数，并且同一个位置上最多只能放置一个信号站。", "inputFormat": "输入共两行：\n\n第一行两个用空格隔开的整数 $n,k$，分别代表人家数和信号站数；\n\n第二行 $n$ 个用空格隔开的整数 $a_1,a_2,\\dots,a_n$，依次表示每户人家的坐标。", "outputFormat": "输出一行一个整数，表示最小的不合理值之和。", "hint": "#### 样例解释\n\n在坐标为 $2,3$ 的位置各放置一个信号站，总不合理值为 $6+7=13$，可以证明，没有比这个更优的方案。\n\n#### 数据范围\n\n对于 $70\\%$ 的数据，$1\\le k<n\\le10^3$；  \n对于 $100\\%$ 的数据，$1\\le k<n\\le10^6$，$0\\le a_i\\le10^6$。", "locale": "zh-CN"}}}
{"pid": "P4999", "type": "P", "difficulty": 4, "samples": [["2\n24 69\n70 120", "411\n498"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数位 DP"], "title": "烦人的数学作业", "background": "NOIP2018初赛结束了，但H还是要上学的啊啊。。上学肯定要完成老师布置的作业，H十分头疼。在如山的作业中，Mr.G布置的数学作业最烦人，H总是完不成~~", "description": "Mr.G 最近在看一些关于数字题的书，他每天愁同学们太~~聪明~~了，所有的作业同学们都能~~做到全对~~（拿到答案）。Mr.G ~~蒙在鼓里~~（心知肚明）。为了使同学们进步，Mr.G 总是创造一些~~简单~~（毒瘤）题来作为作业。以下是数学作业的最后一题题干——\n\n给出一个区间 $L\\sim R $，求 $ L $ 到 $ R $ 区间内**每个数的数字和**，如 $123$ 这个数的数字和为 $1+2+3=6$。\n\n（$ 1 \\leq L \\leq R \\leq 10^2 $）\n\n同学们纷纷做出来了，Mr.G 一看这最后一题跟摆设没区别了呀，于是他迅速修改了题目，把范围定得非常非常大，且有$ T $组数据，将最终的答案 $\\bmod 10^9+7 $。\n\n（$ 1 \\leq L \\leq R \\leq 10^{18} $）\n（$ 1 \\leq T \\leq 20  $）\n\n同学们纷纷被难住了。但 H 为了备战 NOIP2018，没有时间完成 Mr.G 的数学作业 ~~（其实是不想做 QwQ）~~，所以 Ta 找到了你，希望你帮助 Ta 和同学完成这烦人的数学作业！", "inputFormat": "输入共 $ T+1 $ 行；\n\n第 $ 1 $ 行读入 $ T $。代表有 $ T $ 组数据；\n\n第 $ 2 \\sim T+1 $行。读 $ L_i $ 和 $ R_i $。", "outputFormat": "输出共 $ T $ 行，\n\n每行输出 $ L_i $ 和 $ R_i $ 的区间数字和 $\\bmod 10^9+7 $。", "hint": "对于 $ 50\\% $ 的数据，$ 1 \\leq L \\leq R \\leq 10^8 $；\n\n对于 $ 100\\% $ 的数据，$ 1 \\leq L \\leq R \\leq 10^{18}  $，$ 1 \\leq T \\leq 20  $。", "locale": "zh-CN", "translations": {"en": {"title": "Annoying Math Homework", "background": "The NOIP2018 preliminary round is over, but H still has to go to school. Going to school means finishing the homework assigned by teachers, and H is really worried. Among the pile of homework, the math homework assigned by Mr. G is the most annoying, and H can never finish it.", "description": "Recently, Mr. G has been reading some books about number problems. Every day, he worries that the students are too “smart”, and they can do all homework “perfectly” (by getting the answers). Mr. G is “kept in the dark” (but actually knows it well). To help students improve, Mr. G always creates some “easy” (but actually nasty) problems as homework. Below is the statement of the last problem in the math homework:\n\nGiven an interval $L \\sim R$, find the **sum of digits of every number** in the range from $L$ to $R$. For example, the sum of digits of $123$ is $1+2+3=6$.\n\n($1 \\leq L \\leq R \\leq 10^2$.)\n\nThe students all solved it. Mr. G thought this last problem was basically useless, so he quickly modified it: he made the range extremely large, and there are $T$ test cases. Output the final answer $\\bmod 10^9+7$.\n\n($1 \\leq L \\leq R \\leq 10^{18}$.)\n($1 \\leq T \\leq 20$.)\n\nThe students were all stuck. But H is preparing for NOIP2018 and has no time to finish Mr. G’s math homework (actually, Ta just does not want to do it), so Ta came to you, hoping you can help Ta and the classmates finish this annoying math homework.", "inputFormat": "There are $T+1$ lines in total.\n\nLine $1$ contains $T$, meaning there are $T$ test cases.\n\nLines $2$ to $T+1$ contain $L_i$ and $R_i$.", "outputFormat": "Output $T$ lines.\n\nFor each line, output the sum of digits over the interval from $L_i$ to $R_i$, taken $\\bmod 10^9+7$.", "hint": "For $50\\%$ of the testdata, $1 \\leq L \\leq R \\leq 10^8$.\n\nFor $100\\%$ of the testdata, $1 \\leq L \\leq R \\leq 10^{18}$, and $1 \\leq T \\leq 20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "烦人的数学作业", "background": "NOIP2018初赛结束了，但H还是要上学的啊啊。。上学肯定要完成老师布置的作业，H十分头疼。在如山的作业中，Mr.G布置的数学作业最烦人，H总是完不成~~", "description": "Mr.G 最近在看一些关于数字题的书，他每天愁同学们太~~聪明~~了，所有的作业同学们都能~~做到全对~~（拿到答案）。Mr.G ~~蒙在鼓里~~（心知肚明）。为了使同学们进步，Mr.G 总是创造一些~~简单~~（毒瘤）题来作为作业。以下是数学作业的最后一题题干——\n\n给出一个区间 $L\\sim R $，求 $ L $ 到 $ R $ 区间内**每个数的数字和**，如 $123$ 这个数的数字和为 $1+2+3=6$。\n\n（$ 1 \\leq L \\leq R \\leq 10^2 $）\n\n同学们纷纷做出来了，Mr.G 一看这最后一题跟摆设没区别了呀，于是他迅速修改了题目，把范围定得非常非常大，且有$ T $组数据，将最终的答案 $\\bmod 10^9+7 $。\n\n（$ 1 \\leq L \\leq R \\leq 10^{18} $）\n（$ 1 \\leq T \\leq 20  $）\n\n同学们纷纷被难住了。但 H 为了备战 NOIP2018，没有时间完成 Mr.G 的数学作业 ~~（其实是不想做 QwQ）~~，所以 Ta 找到了你，希望你帮助 Ta 和同学完成这烦人的数学作业！", "inputFormat": "输入共 $ T+1 $ 行；\n\n第 $ 1 $ 行读入 $ T $。代表有 $ T $ 组数据；\n\n第 $ 2 \\sim T+1 $行。读 $ L_i $ 和 $ R_i $。", "outputFormat": "输出共 $ T $ 行，\n\n每行输出 $ L_i $ 和 $ R_i $ 的区间数字和 $\\bmod 10^9+7 $。", "hint": "对于 $ 50\\% $ 的数据，$ 1 \\leq L \\leq R \\leq 10^8 $；\n\n对于 $ 100\\% $ 的数据，$ 1 \\leq L \\leq R \\leq 10^{18}  $，$ 1 \\leq T \\leq 20  $。", "locale": "zh-CN"}}}
{"pid": "P5000", "type": "P", "difficulty": 3, "samples": [["2 6\nHELLOWORLD\nLETUSGO", "NKRRUCUXRJ\n10167740864629920000\nRKZAYMU\n20957073637500\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "字符串", "高精度"], "title": "Hillwer编码", "background": "在 Z 国的高科技研究中心，科研人员使用的都是最“先进”的 Hillwer 编码（毕竟这里可是国家机密库，储存着最重要的机密资料~~QwQ）。", "description": "Z 国的科技十分发达，一直是各国觊觎的目标，Y 国就是其中之一。经过 Y 国黑客夜以继日的奋斗，终于获得了 Z 国 **Hillwer** 编码的转换方式，并且截获了 $n$ 条原码。BUT（总是有那么多但是~），Y 国的黑客们呕心沥血研究 **Hillwer**，都累得趴下了……所以，转换 **Hillwer** 编码的任务他们就无法完成。\n\nY 国元首听说在遥远的东方国度，有一群才华横溢的少年——就是坐在电脑前的你们！元首希望你能够帮助 Y 国转换编码，他将赠予你 **NOIP_AK 荣耀桂冠**！\n\n**Hillwer** 编码的转换规则如下： 对于每一条原码 $ S $，保证仅由 $ 26 $ 个大写字母组成。将每个字母后移 $ R $ 位，得到中转码 $ S1 $（当 $ S $=`XYZ`,$R=2$ 时，$ S1 $=`ZAB`。即变成当前字母后 $ R $ 个字母，超过 `Z` 则从 `A` 开始）。接着，将中转码进行“符转数”操作，将 $ S1 $ 每一位的 ASCII 码相乘，得到数串 $ Q $。转换后的编码即为 $ Q $。\n\n元首为了检查你是不是偷懒，还要求你把中转码 $ S1 $ 也输出。", "inputFormat": "第 $ 1 $ 行，读入 $ n , R $。\n\n第 $2 \\sim n+1$ 行，每行一条编码 $S$。", "outputFormat": "共 $ 2 \\times n $ 行:\n\n- 奇数行，每行一条中转码 $ S1 $；\n\n- 偶数行，每行一条转换后的编码 $ Q $。", "hint": "对于 $ 30\\% $ 的数据，$ 1 \\leq n \\leq 10 ,1 \\leq R \\leq 10 $；\n\n对于 $ 50\\% $ 的数据，$ 1 \\leq n \\leq 500 ,1 \\leq R \\leq 10^3 $；\n\n对于 $ 100\\% $ 的数据，$ 1 \\leq n \\leq 500 ,1 \\leq R \\leq 10^5 $，原码长度小于 $600$。", "locale": "zh-CN", "translations": {"en": {"title": "Hillwer Encoding", "background": "In the high-tech research center of Country Z, researchers use the most “advanced” Hillwer encoding (after all, this is the national secret vault, storing the most important confidential information~~QwQ).", "description": "Country Z is very technologically advanced and has always been a target coveted by other countries, and Country Y is one of them. After Country Y’s hackers worked day and night, they finally obtained the conversion method of Country Z’s **Hillwer** encoding and intercepted $n$ plaintext strings. BUT (there are always so many “buts”~), after studying **Hillwer** with all their effort, the hackers of Country Y were exhausted… so they cannot finish the task of converting **Hillwer** encoding.\n\nThe leader of Country Y heard that in a faraway eastern land, there is a group of talented teenagers—yes, you who are sitting in front of the computer! The leader hopes you can help Country Y convert the encoding, and he will reward you with the **NOIP_AK Glory Laurel Crown**!\n\nThe conversion rules of **Hillwer** encoding are as follows: For each plaintext string $S$, it is guaranteed to consist only of $26$ uppercase letters. Shift each letter backward by $R$ positions to get the intermediate string $S1$ (when $S$=`XYZ`, $R=2$, then $S1$=`ZAB`. That is, change it to the $R$-th letter after the current one; if it goes past `Z`, start again from `A`). Next, perform the “symbol-to-number” operation on the intermediate string: multiply the ASCII codes of each character in $S1$ to obtain the number string $Q$. The converted encoding is $Q$.\n\nTo check whether you are slacking off, the leader also requires you to output the intermediate string $S1$.", "inputFormat": "Line $1$: read in $n, R$.\n\nLines $2$ to $n+1$: each line contains one encoding $S$.", "outputFormat": "There are $2 \\times n$ lines in total:\n\n- Odd-numbered lines: one intermediate string $S1$ per line.\n\n- Even-numbered lines: one converted encoding $Q$ per line.", "hint": "For $30\\%$ of the testdata, $1 \\leq n \\leq 10$, $1 \\leq R \\leq 10$.\n\nFor $50\\%$ of the testdata, $1 \\leq n \\leq 500$, $1 \\leq R \\leq 10^3$.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 500$, $1 \\leq R \\leq 10^5$, and the plaintext length is less than $600$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Hillwer编码", "background": "在 Z 国的高科技研究中心，科研人员使用的都是最“先进”的 Hillwer 编码（毕竟这里可是国家机密库，储存着最重要的机密资料~~QwQ）。", "description": "Z 国的科技十分发达，一直是各国觊觎的目标，Y 国就是其中之一。经过 Y 国黑客夜以继日的奋斗，终于获得了 Z 国 **Hillwer** 编码的转换方式，并且截获了 $n$ 条原码。BUT（总是有那么多但是~），Y 国的黑客们呕心沥血研究 **Hillwer**，都累得趴下了……所以，转换 **Hillwer** 编码的任务他们就无法完成。\n\nY 国元首听说在遥远的东方国度，有一群才华横溢的少年——就是坐在电脑前的你们！元首希望你能够帮助 Y 国转换编码，他将赠予你 **NOIP_AK 荣耀桂冠**！\n\n**Hillwer** 编码的转换规则如下： 对于每一条原码 $ S $，保证仅由 $ 26 $ 个大写字母组成。将每个字母后移 $ R $ 位，得到中转码 $ S1 $（当 $ S $=`XYZ`,$R=2$ 时，$ S1 $=`ZAB`。即变成当前字母后 $ R $ 个字母，超过 `Z` 则从 `A` 开始）。接着，将中转码进行“符转数”操作，将 $ S1 $ 每一位的 ASCII 码相乘，得到数串 $ Q $。转换后的编码即为 $ Q $。\n\n元首为了检查你是不是偷懒，还要求你把中转码 $ S1 $ 也输出。", "inputFormat": "第 $ 1 $ 行，读入 $ n , R $。\n\n第 $2 \\sim n+1$ 行，每行一条编码 $S$。", "outputFormat": "共 $ 2 \\times n $ 行:\n\n- 奇数行，每行一条中转码 $ S1 $；\n\n- 偶数行，每行一条转换后的编码 $ Q $。", "hint": "对于 $ 30\\% $ 的数据，$ 1 \\leq n \\leq 10 ,1 \\leq R \\leq 10 $；\n\n对于 $ 50\\% $ 的数据，$ 1 \\leq n \\leq 500 ,1 \\leq R \\leq 10^3 $；\n\n对于 $ 100\\% $ 的数据，$ 1 \\leq n \\leq 500 ,1 \\leq R \\leq 10^5 $，原码长度小于 $600$。", "locale": "zh-CN"}}}
{"pid": "P5002", "type": "P", "difficulty": 3, "samples": [["7 1 3\n1 2\n1 3\n2 4\n2 5\n3 6\n3 7\n1 2 4", "31\n7\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "枚举", "最近公共祖先 LCA"], "title": "专心OI - 找祖先", "background": "Imakf 是一个小蒟蒻，他最近刚学了 LCA，他在手机 APPstore 里看到一个游戏也叫做 LCA 就下载了下来。", "description": "这个游戏会给出你一棵树，这棵树有 $N$ 个节点，根结点是 $R$，系统会选中 $M$ 个点 $P_1,P_2 \\cdots P_M$，要Imakf 回答有多少组点对 $(u_i,v_i)$ 的最近公共祖先是 $P_i$。Imakf 是个小蒟蒻，他就算学了 LCA 也做不出，于是只好求助您了。\n\n", "inputFormat": "第一行三个整数 $N , R , M$。\n\n此后 $N-1$ 行，每行两个数 $a,b$，表示 $a,b$ 之间有一条边。\n\n此后 $1 $行，共 $M$ 个数，表示$P_i$。\n\n保证给出的边形成一棵树。", "outputFormat": "输出共 $M$ 行，每行一个数，第 $i$ 行的数表示有多少组点对 $(u_i,v_i)$ 的最近公共祖先是 $P_i$。", "hint": "样例 1 的树如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/pic/37971.png)\n\n 对于询问 1 $~(1,1)\n(1,2)\n(1,3)\n(1,4)\n(1,5)\n(1,6)\n(1,7)\n(2,1)\n(2,3)\n(2,6)\n(2,7)\n(3,1)\n(3,2)\n(3,4)\n(3,5)\n(4,1)\n(4,3)$\n\n$\n(4,6)\n(4,7)\n(5,1)\n(5,3)\n(5,6)\n(5,7)\n(6,1)\n(6,2)\n(6,4)\n(6,5)\n(7,1)\n(7,2)\n(7,4)\n(7,5)$ 共 $31$ 组点对。\n\n询问 2 $(2,2)\n(2,4)\n(2,5)\n(4,2)\n(4,5)\n(5,2)\n(5,4)$ 共 $7$ 组点对。\n\n对于询问 3 $(4,4)$ 共 $1$ 组点对。\n\n$1\\le R\\le N\\leq10000$，$0\\le M\\leq50000$。", "locale": "zh-CN", "translations": {"en": {"title": "Focus OI - Finding Ancestors", "background": "Imakf is a beginner. He has recently learned LCA. He saw a game in the mobile App Store that is also called LCA, so he downloaded it.", "description": "This game gives you a tree with $N$ nodes, where the root is $R$. The system will select $M$ nodes $P_1,P_2 \\cdots P_M$, and asks Imakf to answer how many ordered pairs of nodes $(u_i, v_i)$ have their lowest common ancestor equal to $P_i$. Imakf is a beginner. Even though he has learned LCA, he still cannot solve it, so he has to ask you for help.", "inputFormat": "The first line contains three integers $N, R, M$.\n\nThen $N - 1$ lines follow, each containing two numbers $a, b$, indicating that there is an edge between $a$ and $b$.\n\nThen $1$ line follows, containing $M$ numbers, indicating $P_i$.\n\nIt is guaranteed that the given edges form a tree.", "outputFormat": "Output $M$ lines in total. Each line contains one number. The number on line $i$ indicates how many ordered pairs of nodes $(u_i, v_i)$ have their lowest common ancestor equal to $P_i$.", "hint": "The tree of Sample 1 is shown in the figure below:\n\n![](https://cdn.luogu.com.cn/upload/pic/37971.png)\n\nFor Query 1 $~(1,1)\n(1,2)\n(1,3)\n(1,4)\n(1,5)\n(1,6)\n(1,7)\n(2,1)\n(2,3)\n(2,6)\n(2,7)\n(3,1)\n(3,2)\n(3,4)\n(3,5)\n(4,1)\n(4,3)$\n\n$\n(4,6)\n(4,7)\n(5,1)\n(5,3)\n(5,6)\n(5,7)\n(6,1)\n(6,2)\n(6,4)\n(6,5)\n(7,1)\n(7,2)\n(7,4)\n(7,5)$ there are $31$ ordered pairs in total.\n\nFor Query 2 $(2,2)\n(2,4)\n(2,5)\n(4,2)\n(4,5)\n(5,2)\n(5,4)$ there are $7$ ordered pairs in total.\n\nFor Query 3 $(4,4)$ there is $1$ ordered pair in total.\n\nConstraints: $1 \\le R \\le N \\leq 10000$, $0 \\le M \\leq 50000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "专心OI - 找祖先", "background": "Imakf 是一个小蒟蒻，他最近刚学了 LCA，他在手机 APPstore 里看到一个游戏也叫做 LCA 就下载了下来。", "description": "这个游戏会给出你一棵树，这棵树有 $N$ 个节点，根结点是 $R$，系统会选中 $M$ 个点 $P_1,P_2 \\cdots P_M$，要Imakf 回答有多少组点对 $(u_i,v_i)$ 的最近公共祖先是 $P_i$。Imakf 是个小蒟蒻，他就算学了 LCA 也做不出，于是只好求助您了。\n\n", "inputFormat": "第一行三个整数 $N , R , M$。\n\n此后 $N-1$ 行，每行两个数 $a,b$，表示 $a,b$ 之间有一条边。\n\n此后 $1 $行，共 $M$ 个数，表示$P_i$。\n\n保证给出的边形成一棵树。", "outputFormat": "输出共 $M$ 行，每行一个数，第 $i$ 行的数表示有多少组点对 $(u_i,v_i)$ 的最近公共祖先是 $P_i$。", "hint": "样例 1 的树如下图所示：\n\n![](https://cdn.luogu.com.cn/upload/pic/37971.png)\n\n 对于询问 1 $~(1,1)\n(1,2)\n(1,3)\n(1,4)\n(1,5)\n(1,6)\n(1,7)\n(2,1)\n(2,3)\n(2,6)\n(2,7)\n(3,1)\n(3,2)\n(3,4)\n(3,5)\n(4,1)\n(4,3)$\n\n$\n(4,6)\n(4,7)\n(5,1)\n(5,3)\n(5,6)\n(5,7)\n(6,1)\n(6,2)\n(6,4)\n(6,5)\n(7,1)\n(7,2)\n(7,4)\n(7,5)$ 共 $31$ 组点对。\n\n询问 2 $(2,2)\n(2,4)\n(2,5)\n(4,2)\n(4,5)\n(5,2)\n(5,4)$ 共 $7$ 组点对。\n\n对于询问 3 $(4,4)$ 共 $1$ 组点对。\n\n$1\\le R\\le N\\leq10000$，$0\\le M\\leq50000$。", "locale": "zh-CN"}}}
{"pid": "P5003", "type": "P", "difficulty": 4, "samples": [["5 5\noooo#\nooooo\n#oo#o\no#ooo\noo#oo\n", "7 2\n"], ["5 5\noooo#\nooooo\n#oo##\no#o#o\noo#oo\n", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "搜索", "剪枝"], "title": "跳舞的线 - 乱拐弯", "background": "**线初始面对方向请自己确定**。\n\n![您可以写 dp。](https://cdn.luogu.com.cn/upload/pic/30733.png)\n\n玩过了 LCA 之后，Imakf 觉得甚是无聊，于是便打开了 DL。\n\nImakf：刺客传奇又死在 $70\\%$！突然有一点弃坑的想法鸭......\n\nImakf 想起自己玩了 $1$ 年的 DL，卡在园林教堂混沌，肝了几个月终于过了的欣喜，却被这个刺客传奇困住，禁不住泪眼朦胧。泪眼中，他突然发现手机变成了一个一个的像素点！Imakf 非常惊喜！这样不就可以写一个程序自动通关了吗？\n\n可是不一会，他又陷入了失望......\n\nImakf：我不会写啊！！", "description": "线现在在一个地图上，它正在 $(1,1)$ 上（左上角），最终要去到 $(M,N)$ 上。它不但只能往下或往右走，还只能在整数格子上移动。\n\nImakf 有的时候想要炫技，又有时想偷懒，所以他会告诉你这张地图的全貌，你要告诉他到达终点的最多和最少拐弯次数。", "inputFormat": "第一行两个正整数 $M$ 和 $N$。\n\n第 $2\\sim M+1$ 行，每行 $N$ 个字符。如果为 `#` 就代表这里有障碍，反之没有。", "outputFormat": "输出两个正整数 $max$ 和 $min$。$max$ 表示最多拐弯次数，$min$ 表示最少拐弯次数。如果到达不了就输出 `-1`。", "hint": "样例 $1$ 说明：\n\n![](https://cdn.luogu.com.cn/upload/pic/12623.png)\n\n红色路线代表拐弯次数最多，蓝色路线代表拐弯次数最少。\n\n--------------\n\n样例 $2$ 说明：\n\n无法到达，故输出 `-1`。\n\n---\n\n数据范围：\n\n| 测试点 | $N$ | $M$ |\n| -----------: | -----------: | -----------: |\n| $1\\sim 5$ | $\\leq100$ | $\\leq100$ |\n| $6\\sim 7$ | $=200$ | 不做约定 |\n| $8\\sim 10$ | 不做约定 |不做约定|\n\n对于 $100\\%$ 的数据，保证 $10\\le M,N\\le 1000$。\n\n感谢 @Iowa\\_BattleShip 指出数据错误。", "locale": "zh-CN", "translations": {"en": {"title": "Dancing Line - Random Turns", "background": "The initial facing direction of the line can be chosen by yourself.\n\n![You can write DP.](https://cdn.luogu.com.cn/upload/pic/30733.png)\n\nAfter playing with LCA, Imakf felt bored and opened DL.\n\nImakf: Assassin Legend died again at $70\\%$! I suddenly feel like quitting...\n\nImakf remembered that after playing DL for $1$ year, getting stuck on \"Garden\", \"Church\", and \"Chaos\", he finally cleared them after months of grinding and was delighted, but now he is trapped by this Assassin Legend again, and tears welled up in his eyes. Through the tears, he suddenly saw the phone turn into pixels! Imakf was thrilled! Then he could write a program to clear it automatically, right?\n\nBut shortly after, disappointment returned...\n\nImakf: I don’t know how to write it!!", "description": "A line is on a grid map. It starts at $(1, 1)$ (top-left corner) and must reach $(M, N)$. It can only move down or right, and only on integer grid points.\n\nSometimes Imakf wants to show off, and sometimes he wants to be lazy, so he will give you the entire map. You need to tell him the maximum and minimum number of turns needed to reach the destination.", "inputFormat": "The first line contains two positive integers $M$ and $N$.\n\nLines $2 \\sim M+1$ each contain $N$ characters. A `#` denotes an obstacle; otherwise, the cell is free.", "outputFormat": "Output two positive integers $max$ and $min$. $max$ is the maximum number of turns, and $min$ is the minimum number of turns. If the destination is unreachable, output `-1`.", "hint": "Explanation for Sample $1$:\n\n![](https://cdn.luogu.com.cn/upload/pic/12623.png)\n\nThe red route has the most turns, and the blue route has the fewest turns.\n\n--------------\n\nExplanation for Sample $2$:\n\nUnreachable, so output `-1`.\n\n---\n\nConstraints:\n\n| Test points | $N$ | $M$ |\n| -----------: | -----------: | -----------: |\n| $1 \\sim 5$ | $\\leq 100$ | $\\leq 100$ |\n| $6 \\sim 7$ | $=200$ | not specified |\n| $8 \\sim 10$ | not specified | not specified |\n\nFor $100\\%$ of the testdata, it is guaranteed that $10 \\le M, N \\le 1000$.\n\nThanks to @Iowa_BattleShip for pointing out the data error.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "跳舞的线 - 乱拐弯", "background": "**线初始面对方向请自己确定**。\n\n![您可以写 dp。](https://cdn.luogu.com.cn/upload/pic/30733.png)\n\n玩过了 LCA 之后，Imakf 觉得甚是无聊，于是便打开了 DL。\n\nImakf：刺客传奇又死在 $70\\%$！突然有一点弃坑的想法鸭......\n\nImakf 想起自己玩了 $1$ 年的 DL，卡在园林教堂混沌，肝了几个月终于过了的欣喜，却被这个刺客传奇困住，禁不住泪眼朦胧。泪眼中，他突然发现手机变成了一个一个的像素点！Imakf 非常惊喜！这样不就可以写一个程序自动通关了吗？\n\n可是不一会，他又陷入了失望......\n\nImakf：我不会写啊！！", "description": "线现在在一个地图上，它正在 $(1,1)$ 上（左上角），最终要去到 $(M,N)$ 上。它不但只能往下或往右走，还只能在整数格子上移动。\n\nImakf 有的时候想要炫技，又有时想偷懒，所以他会告诉你这张地图的全貌，你要告诉他到达终点的最多和最少拐弯次数。", "inputFormat": "第一行两个正整数 $M$ 和 $N$。\n\n第 $2\\sim M+1$ 行，每行 $N$ 个字符。如果为 `#` 就代表这里有障碍，反之没有。", "outputFormat": "输出两个正整数 $max$ 和 $min$。$max$ 表示最多拐弯次数，$min$ 表示最少拐弯次数。如果到达不了就输出 `-1`。", "hint": "样例 $1$ 说明：\n\n![](https://cdn.luogu.com.cn/upload/pic/12623.png)\n\n红色路线代表拐弯次数最多，蓝色路线代表拐弯次数最少。\n\n--------------\n\n样例 $2$ 说明：\n\n无法到达，故输出 `-1`。\n\n---\n\n数据范围：\n\n| 测试点 | $N$ | $M$ |\n| -----------: | -----------: | -----------: |\n| $1\\sim 5$ | $\\leq100$ | $\\leq100$ |\n| $6\\sim 7$ | $=200$ | 不做约定 |\n| $8\\sim 10$ | 不做约定 |不做约定|\n\n对于 $100\\%$ 的数据，保证 $10\\le M,N\\le 1000$。\n\n感谢 @Iowa\\_BattleShip 指出数据错误。", "locale": "zh-CN"}}}
{"pid": "P5004", "type": "P", "difficulty": 5, "samples": [["5 1 \n", "13\n"], ["6 2 \n", "13\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "矩阵加速", "构造"], "title": "专心OI - 跳房子", "background": "Imakf 有一天参加了 PINO2017 PJ 组，他突然看见最后一道题：\n\n![](https://cdn.luogu.com.cn/upload/pic/39659.png )\n\n他十分蒟蒻，写不出来。\n\n而如今他还是一个蒟蒻，他又看见一道题：\n\n![](https://cdn.luogu.com.cn/upload/pic/39660.png)\n\n他还是写不出来，于是便来请教您。", "description": "您有 $N$ 个格子，排成一行，从左往右编号为 $1,2,\\cdots,N$。您站在 $1$ 号格子的左边无限远，开始从左往右跳，跳到 $N$ 号格子右侧为止。由于您是一位成功的 OIer，您自然长得很胖，所以您的腿部力量也非常大！这使得您跳一次，当前格子到目标格子中间必须至少空出来 $M$ 格，但您可以跳无数格远！\n\n您认为这么跳太没意思了，于是便想计算出有多少种方案可以跳完全程。由于方案可能过多，您会输出方案数量模 $(10^9+7)$ 的值\n\n方案不同当且仅当经过的任一一个格子编号不同。", "inputFormat": "第一行两个整数 $N,M$。", "outputFormat": "一个整数，表示跳完全程的方案模 $(10^9+7)$。", "hint": "| 测试数据编号 | $N$ | $M$ |  \n| :-----------: | :-----------: | :-----------: |\n|$1,2$ | $\\leq10$ | $=1$ |    \n| $3,4$ | $\\leq10^7$ | $=1$ |    \n| $5,6$ | $\\leq10^6$ | $=2$ |  \n| $7,8$ | $\\leq10^5$ | $=3$ |  \n| $9,10$ | $\\leq10^4$ | $=5$ |  \n| $11,12$ | $\\leq10^{12}$ | $=1$ |  \n| $13,14$ | $\\leq10^{18}$ |$=10$  |  \n| $15\\sim20$ | $\\leq10^{18}$ |  $=15$|  \n\n对于 $100\\%$ 的数据，满足 $1 \\le N \\le 10^{18}$。", "locale": "zh-CN", "translations": {"en": {"title": "Focus on OI - Hopscotch", "background": "Imakf once participated in the PINO2017 PJ division, and suddenly saw the last problem:\n\n![](https://cdn.luogu.com.cn/upload/pic/39659.png)\n\nHe was very weak and could not solve it.\n\nNow he is still weak, and he saw another problem:\n\n![](https://cdn.luogu.com.cn/upload/pic/39660.png)\n\nHe still could not solve it, so he came to ask you for help.", "description": "You have $N$ cells arranged in a line, numbered from left to right as $1,2,\\cdots,N$. You stand infinitely far to the left of cell $1$, and start jumping from left to right, until you reach the right side of cell $N$. Since you are a successful OIer, you are naturally very heavy, so your legs are very strong. This means that for each jump, there must be at least $M$ empty cells between the current cell and the target cell, but you can jump arbitrarily far.\n\nYou think jumping like this is too boring, so you want to calculate how many different ways there are to complete the whole journey. Since the number of ways may be too large, output the number of ways modulo $(10^9+7)$.\n\nTwo ways are different if and only if there exists at least one visited cell whose index is different.", "inputFormat": "The first line contains two integers $N,M$.", "outputFormat": "Output one integer, the number of ways to complete the whole journey modulo $(10^9+7)$.", "hint": "| Testdata ID | $N$ | $M$ |\n| :-----------: | :-----------: | :-----------: |\n| $1,2$ | $\\leq10$ | $=1$ |\n| $3,4$ | $\\leq10^7$ | $=1$ |\n| $5,6$ | $\\leq10^6$ | $=2$ |\n| $7,8$ | $\\leq10^5$ | $=3$ |\n| $9,10$ | $\\leq10^4$ | $=5$ |\n| $11,12$ | $\\leq10^{12}$ | $=1$ |\n| $13,14$ | $\\leq10^{18}$ | $=10$ |\n| $15\\sim20$ | $\\leq10^{18}$ | $=15$ |\n\nFor $100\\%$ of the data, $1 \\le N \\le 10^{18}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "专心OI - 跳房子", "background": "Imakf 有一天参加了 PINO2017 PJ 组，他突然看见最后一道题：\n\n![](https://cdn.luogu.com.cn/upload/pic/39659.png )\n\n他十分蒟蒻，写不出来。\n\n而如今他还是一个蒟蒻，他又看见一道题：\n\n![](https://cdn.luogu.com.cn/upload/pic/39660.png)\n\n他还是写不出来，于是便来请教您。", "description": "您有 $N$ 个格子，排成一行，从左往右编号为 $1,2,\\cdots,N$。您站在 $1$ 号格子的左边无限远，开始从左往右跳，跳到 $N$ 号格子右侧为止。由于您是一位成功的 OIer，您自然长得很胖，所以您的腿部力量也非常大！这使得您跳一次，当前格子到目标格子中间必须至少空出来 $M$ 格，但您可以跳无数格远！\n\n您认为这么跳太没意思了，于是便想计算出有多少种方案可以跳完全程。由于方案可能过多，您会输出方案数量模 $(10^9+7)$ 的值\n\n方案不同当且仅当经过的任一一个格子编号不同。", "inputFormat": "第一行两个整数 $N,M$。", "outputFormat": "一个整数，表示跳完全程的方案模 $(10^9+7)$。", "hint": "| 测试数据编号 | $N$ | $M$ |  \n| :-----------: | :-----------: | :-----------: |\n|$1,2$ | $\\leq10$ | $=1$ |    \n| $3,4$ | $\\leq10^7$ | $=1$ |    \n| $5,6$ | $\\leq10^6$ | $=2$ |  \n| $7,8$ | $\\leq10^5$ | $=3$ |  \n| $9,10$ | $\\leq10^4$ | $=5$ |  \n| $11,12$ | $\\leq10^{12}$ | $=1$ |  \n| $13,14$ | $\\leq10^{18}$ |$=10$  |  \n| $15\\sim20$ | $\\leq10^{18}$ |  $=15$|  \n\n对于 $100\\%$ 的数据，满足 $1 \\le N \\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P5005", "type": "P", "difficulty": 5, "samples": [["1 1 \n", "2"], ["3 3 \n", "145"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["枚举", "进制", "状压 DP"], "title": "中国象棋 - 摆上马", "background": "~~相信自己的做法 大喊一声 I won't MLE！您就会过这道题~~\n\nImakf 玩腻了国际象棋，决定玩一玩中国象棋。\n\n他发现中国象棋的马和国际象棋的马有所不同，他意识到这又可以出一道简单的问题，于是他又准备摆一摆马了", "description": "Imakf 有一个 $X$ 行 $Y$ 列的棋盘，还有很多**完全相同**的马（你可以认为有无数个）。现在在棋盘上摆上马（或者不摆），求任何马无法攻击另一匹马的方案总数。\n\n中国象棋的马和国际象棋的马不同。\n\n![](https://cdn.luogu.com.cn/upload/pic/40761.png)\n\n注意：实际问题中是没有兵的。\n\n当然由于方案可能过多，请输出对 $(10^9+7)$ 取模的值\n", "inputFormat": "第一行两个正整数 $X,Y$。", "outputFormat": "方案对 $(10^9+7)$ 取模的值。", "hint": "对于 100% 的数据，有 $1\\le X\\leq100$，$1\\le Y\\leq6$。\n\n对于 20% 的数据，有 $X,Y\\leq6$。\n\n对于另外 20% 的数据，有 $X\\leq20$。\n\n对于样例 1，可以选择不摆或者摆。\n\n对于样例 2，我有一个绝妙的解释可惜我写不下。\n", "locale": "zh-CN", "translations": {"en": {"title": "Chinese Chess - Placing Horses", "background": "~~Believe in your method, shout \"I won't MLE!\", and you will pass this problem.~~\n\nImakf got tired of playing international chess and decided to try Chinese chess.\n\nHe found that the horse in Chinese chess is different from the knight in international chess. He realized this could make another easy problem, so he decided to place horses again.", "description": "Imakf has a board with $X$ rows and $Y$ columns, and many **identical** horses (you may assume there are infinitely many). Now place horses on the board (or place none). Find the total number of ways such that no horse can attack another horse.\n\nThe horse in Chinese chess is different from the knight in international chess.\n\n![](https://cdn.luogu.com.cn/upload/pic/40761.png)\n\nNote: In the actual problem, there are no pawns.\n\nSince the number of ways may be too large, output the value modulo $(10^9+7)$.", "inputFormat": "The first line contains two positive integers $X, Y$.", "outputFormat": "Output the number of ways modulo $(10^9+7)$.", "hint": "For 100% of the data, $1\\le X\\leq100$, $1\\le Y\\leq6$.\n\nFor 20% of the data, $X, Y\\leq6$.\n\nFor another 20% of the data, $X\\leq20$.\n\nFor Sample 1, you may choose to place none or place horses.\n\nFor Sample 2, I have a brilliant explanation, but unfortunately I cannot fit it here.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "中国象棋 - 摆上马", "background": "~~相信自己的做法 大喊一声 I won't MLE！您就会过这道题~~\n\nImakf 玩腻了国际象棋，决定玩一玩中国象棋。\n\n他发现中国象棋的马和国际象棋的马有所不同，他意识到这又可以出一道简单的问题，于是他又准备摆一摆马了", "description": "Imakf 有一个 $X$ 行 $Y$ 列的棋盘，还有很多**完全相同**的马（你可以认为有无数个）。现在在棋盘上摆上马（或者不摆），求任何马无法攻击另一匹马的方案总数。\n\n中国象棋的马和国际象棋的马不同。\n\n![](https://cdn.luogu.com.cn/upload/pic/40761.png)\n\n注意：实际问题中是没有兵的。\n\n当然由于方案可能过多，请输出对 $(10^9+7)$ 取模的值\n", "inputFormat": "第一行两个正整数 $X,Y$。", "outputFormat": "方案对 $(10^9+7)$ 取模的值。", "hint": "对于 100% 的数据，有 $1\\le X\\leq100$，$1\\le Y\\leq6$。\n\n对于 20% 的数据，有 $X,Y\\leq6$。\n\n对于另外 20% 的数据，有 $X\\leq20$。\n\n对于样例 1，可以选择不摆或者摆。\n\n对于样例 2，我有一个绝妙的解释可惜我写不下。\n", "locale": "zh-CN"}}}
