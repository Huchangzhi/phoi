{"pid": "P4299", "type": "P", "difficulty": 6, "samples": [["10 10 \nXor \nQ 1 \nA 10 1 \nA 1 4 \nQ 4 \nQ 10 \nA 7 6 \nXor \nQ 7 \nXor", "11 \n1 \n1 \n1 \n2 \n6 \n2 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["二分", "并查集", "动态树 LCT", "树的重心"], "title": "首都", "background": "", "description": "在 X 星球上有 $n$ 个国家，每个国家占据着 X 星球的一座城市，城市从 $1$ 至 $n$ 编号。由于国家之间是敌对关系，所以不同国家的两个城市是不会有公路相连的。\n\nX 星球上战乱频发，如果 A 国打败了 B 国，那么 B 国将永远从这个星球消失，而 B 国的国土也将归 A 国管辖。A 国国王为了加强统治，会在 A 国和 B 国之间修建一条公路，即选择原 A 国的某个城市和 B 国某个城市，修建一条连接这两座城市的公路。\n\n同样为了便于统治自己的国家，国家的首都会选在某个使得其他城市到它距离之和最小的城市，这里的距离是指需要经过公路的条数，如果有多个这样的城市，编号最小的将成为首都。\n\n现在告诉你发生在 X 星球的战事，需要你处理一些关于国家首都的信息，具体地，有如下3种信息需要处理：\n\n- `A x y`：表示某两个国家发生战乱，战胜国选择了 $x$ 城市和 $y$ 城市，在它们之间修建公路（保证其中城市一个在战胜国另一个在战败国）。\n- `Q x`：询问当前编号为 $x$ 的城市所在国家的首都。\n- `Xor`：询问当前所有国家首都编号的异或和。\n", "inputFormat": "输入的第一行有两个整数，分别表示城市数 $n$ 和需要处理的信息数 $m$。\n\n接下来 $m$ 行，每行首先有一个字符串 $op$，表示信息类型，后有若干个整数，其格式如【题目描述】所示。", "outputFormat": "对于每个 `Q` 操作和 `Xor` 操作，输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\leq x, y \\leq n$。", "locale": "zh-CN", "translations": {"en": {"title": "Capital", "background": "", "description": "On Planet X there are $n$ countries, each occupying exactly one city of Planet X. Cities are numbered from $1$ to $n$. Since countries are hostile to each other, there are no roads between cities of different countries.\n\nWars often break out on Planet X. If country A defeats country B, then B disappears from the planet forever, and B’s territory comes under A’s control. To strengthen governance, the king of A will build a road between A and B: specifically, he chooses one original city of A and one city of B and builds a road connecting these two cities.\n\nTo facilitate governing the country, the capital is chosen as the city that minimizes the sum of distances from all other cities in that country; here, distance means the number of roads traversed. If there are multiple such cities, the one with the smallest index becomes the capital.\n\nYou are given the wars that happen on Planet X and need to process information about capitals. Specifically, there are three types of operations to handle:\n- `A x y`: Two countries go to war. The winner chooses cities $x$ and $y$ and builds a road between them (it is guaranteed that one of the two cities belongs to the winner and the other to the loser).\n- `Q x`: Query the current capital of the country containing city $x$.\n- `Xor`: Query the bitwise XOR of the indices of all current countries’ capitals.", "inputFormat": "The first line contains two integers, the number of cities $n$ and the number of operations $m$.\n\nThen follow $m$ lines. Each line starts with a string $op$ indicating the operation type, followed by several integers, with formats as described in the Description.", "outputFormat": "For each `Q` operation and `Xor` operation, output one line with a single integer as the answer.", "hint": "Constraints\n\nFor all testdata, it is guaranteed that $1 \\leq n \\leq 10^5$, $1 \\leq m \\leq 2 \\times 10^5$, and $1 \\leq x, y \\leq n$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "首都", "background": "", "description": "在 X 星球上有 $n$ 个国家，每个国家占据着 X 星球的一座城市，城市从 $1$ 至 $n$ 编号。由于国家之间是敌对关系，所以不同国家的两个城市是不会有公路相连的。\n\nX 星球上战乱频发，如果 A 国打败了 B 国，那么 B 国将永远从这个星球消失，而 B 国的国土也将归 A 国管辖。A 国国王为了加强统治，会在 A 国和 B 国之间修建一条公路，即选择原 A 国的某个城市和 B 国某个城市，修建一条连接这两座城市的公路。\n\n同样为了便于统治自己的国家，国家的首都会选在某个使得其他城市到它距离之和最小的城市，这里的距离是指需要经过公路的条数，如果有多个这样的城市，编号最小的将成为首都。\n\n现在告诉你发生在 X 星球的战事，需要你处理一些关于国家首都的信息，具体地，有如下3种信息需要处理：\n\n- `A x y`：表示某两个国家发生战乱，战胜国选择了 $x$ 城市和 $y$ 城市，在它们之间修建公路（保证其中城市一个在战胜国另一个在战败国）。\n- `Q x`：询问当前编号为 $x$ 的城市所在国家的首都。\n- `Xor`：询问当前所有国家首都编号的异或和。\n", "inputFormat": "输入的第一行有两个整数，分别表示城市数 $n$ 和需要处理的信息数 $m$。\n\n接下来 $m$ 行，每行首先有一个字符串 $op$，表示信息类型，后有若干个整数，其格式如【题目描述】所示。", "outputFormat": "对于每个 `Q` 操作和 `Xor` 操作，输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 2 \\times 10^5$，$1 \\leq x, y \\leq n$。", "locale": "zh-CN"}}}
{"pid": "P4300", "type": "P", "difficulty": 6, "samples": [["6 7 \n1 2 1 3 \n2 6 1 5 \n1 3 1 1 \n3 4 1 1 \n4 6 1 1 \n5 6 1 2 \n1 5 1 4", "2\n5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "各省省选", "安徽"], "title": "[AHOI2006] 上学路线", "background": "", "description": "可可和卡卡家住 HF 市的东郊，每天上学他们都要转车多次才能到达市区西端的学校。直到有一天他们两人参加了学校的信息学奥林匹克竞赛小组才发现每天上学的乘车路线不一定是最优的。\n\n可可：“很可能我们在上学的路途上浪费了大量的时间，让我们写一个程序来计算上学需要的最少时间吧！”\n\nHF 市一共设有 $N$ 个公交车站，不妨将它们编号为 $1\\sim N$ 的自然数，并认为可可和卡卡家住在 $1$ 号汽车站附近，而他们学校在 $N$ 号汽车站。市内有 $M$ 条直达汽车路线，执行第 $i$ 条路线的公交车往返于站点 $p_i$ 和 $q_i$ 之间，从起点到终点需要花费的时间为 $t_i$（$1\\leq i\\leq M$，$1\\leq p_i,q_i\\leq N$）。\n\n两个人坐在电脑前，根据上面的信息很快就编程算出了最优的乘车方案。然而可可忽然有了一个鬼点子，他想趁卡卡不备，在卡卡的输入数据中删去一些路线，从而让卡卡的程序得出的答案大于实际的最短时间。而对于每一条路线 $i$ 事实上都有一个代价 $c_i$：删去路线的 $c_i$ 越大卡卡就越容易发现这个玩笑，可可想知道什么样的删除方案可以达到他的目的而让被删除的公交车路线 $c_i$ 之和最小。\n\n编写一个程序：\n-  从输入文件中读取 HF 市公交路线的信息；\n-  计算出实际上可可和卡卡上学需要花费的最少时间；\n-  帮助可可设计一个方案，删除输入信息中的一些公交路线，使得删除后从家到学校需要的最少时间变大，而被删除路线的 $c_i$ 和最小；\n- 向输出文件输出答案。", "inputFormat": "输入文件中第一行有两个正整数 $N$ 和 $M$，分别表示 HF 市公交车站和公交汽车路线的个数。\n\n以下 $M$ 行，每行（第 $i$ 行，总第 $(i+1)$ 行）用四个正整数描述第 $i$ 条路线：$p_i,q_i,t_i,c_i$，具体含义见上文描述。", "outputFormat": "第一行中仅有一个整数，表示从可可和卡卡家到学校需要的最短时间。 \n\n第二行输出一个整数 $C$，表示 $c_i$ 之和。", "hint": "$2\\leq N\\leq 500$，$1\\leq M\\leq 124750$，$1\\leq t_i,c_i\\leq 10^4$。\n\nHF 市的公交网络十分发达，你可以认为任意两个车站间都可以通过直达或转车互相到达，当然如果在你提供的删除方案中，家和学校无法互相到达，那么则认为上学需要的最短为正无穷大：这显然是一个合法的方案。", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2006] School Route", "background": "", "description": "Keke and Kaka live in the eastern suburbs of HF City. Every day, they have to transfer several times to reach their school at the western end of the city. One day, after joining the school's informatics olympiad group, they realized that their daily commuting route might not be optimal.\n\nKeke: \"We might be wasting a lot of time on the way to school. Let's write a program to compute the minimum time needed!\"\n\nHF City has $N$ bus stops, numbered from $1$ to $N$. Assume Keke and Kaka live near stop $1$, and their school is at stop $N$. There are $M$ direct bus routes in the city. For the $i$-th route, buses shuttle back and forth between stops $p_i$ and $q_i$, and the time from one endpoint to the other is $t_i$ ( $1 \\leq i \\leq M$, $1 \\leq p_i, q_i \\leq N$ ).\n\nThey quickly wrote a program to compute the optimal commuting plan. However, Keke suddenly had a mischievous idea: he wanted to delete some routes from Kaka’s input data so that Kaka’s program would output an answer larger than the true shortest time. Each route $i$ has a cost $c_i$: the larger $c_i$ is, the easier it is for Kaka to notice the prank. Keke wants to know how to choose routes to delete so that the minimum time from home to school increases, while the sum of $c_i$ of the deleted routes is minimized.\n\nWrite a program to:\n- Read the bus network of HF City from the input file.\n- Compute the actual minimum time needed for Keke and Kaka to get to school.\n- Help Keke design a deletion plan: remove some bus routes from the input so that the minimum time from home to school becomes larger after deletion, and the sum of $c_i$ of the deleted routes is minimized.\n- Output the answers.", "inputFormat": "The first line contains two positive integers $N$ and $M$, the number of bus stops and direct bus routes in HF City.\n\nEach of the next $M$ lines (the $i$-th of these lines is overall line $(i+1)$) describes the $i$-th route with four positive integers $p_i, q_i, t_i, c_i$, as defined above.", "outputFormat": "The first line contains a single integer, the minimum time needed to travel from Keke and Kaka’s home to their school.\n\nThe second line contains a single integer $C$, the sum of $c_i$ of the deleted routes.", "hint": "$2 \\leq N \\leq 500$, $1 \\leq M \\leq 124750$, $1 \\leq t_i, c_i \\leq 10^4$.\n\nHF City’s bus network is very well connected; you may assume any two stops are mutually reachable via direct routes or transfers. Of course, if under your deletion plan the home and school become disconnected, then the minimum time is considered to be $+\\infty$. This is a valid plan.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2006] 上学路线", "background": "", "description": "可可和卡卡家住 HF 市的东郊，每天上学他们都要转车多次才能到达市区西端的学校。直到有一天他们两人参加了学校的信息学奥林匹克竞赛小组才发现每天上学的乘车路线不一定是最优的。\n\n可可：“很可能我们在上学的路途上浪费了大量的时间，让我们写一个程序来计算上学需要的最少时间吧！”\n\nHF 市一共设有 $N$ 个公交车站，不妨将它们编号为 $1\\sim N$ 的自然数，并认为可可和卡卡家住在 $1$ 号汽车站附近，而他们学校在 $N$ 号汽车站。市内有 $M$ 条直达汽车路线，执行第 $i$ 条路线的公交车往返于站点 $p_i$ 和 $q_i$ 之间，从起点到终点需要花费的时间为 $t_i$（$1\\leq i\\leq M$，$1\\leq p_i,q_i\\leq N$）。\n\n两个人坐在电脑前，根据上面的信息很快就编程算出了最优的乘车方案。然而可可忽然有了一个鬼点子，他想趁卡卡不备，在卡卡的输入数据中删去一些路线，从而让卡卡的程序得出的答案大于实际的最短时间。而对于每一条路线 $i$ 事实上都有一个代价 $c_i$：删去路线的 $c_i$ 越大卡卡就越容易发现这个玩笑，可可想知道什么样的删除方案可以达到他的目的而让被删除的公交车路线 $c_i$ 之和最小。\n\n编写一个程序：\n-  从输入文件中读取 HF 市公交路线的信息；\n-  计算出实际上可可和卡卡上学需要花费的最少时间；\n-  帮助可可设计一个方案，删除输入信息中的一些公交路线，使得删除后从家到学校需要的最少时间变大，而被删除路线的 $c_i$ 和最小；\n- 向输出文件输出答案。", "inputFormat": "输入文件中第一行有两个正整数 $N$ 和 $M$，分别表示 HF 市公交车站和公交汽车路线的个数。\n\n以下 $M$ 行，每行（第 $i$ 行，总第 $(i+1)$ 行）用四个正整数描述第 $i$ 条路线：$p_i,q_i,t_i,c_i$，具体含义见上文描述。", "outputFormat": "第一行中仅有一个整数，表示从可可和卡卡家到学校需要的最短时间。 \n\n第二行输出一个整数 $C$，表示 $c_i$ 之和。", "hint": "$2\\leq N\\leq 500$，$1\\leq M\\leq 124750$，$1\\leq t_i,c_i\\leq 10^4$。\n\nHF 市的公交网络十分发达，你可以认为任意两个车站间都可以通过直达或转车互相到达，当然如果在你提供的删除方案中，家和学校无法互相到达，那么则认为上学需要的最短为正无穷大：这显然是一个合法的方案。", "locale": "zh-CN"}}}
{"pid": "P4301", "type": "P", "difficulty": 5, "samples": [["6\n5 5 6 6 5 5", "21"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "博弈论", "2013", "重庆", "各省省选", "线性基", "构造"], "title": "[CQOI2013] 新Nim游戏", "background": "", "description": "传统的 Nim 游戏是这样的：有一些火柴堆，每堆都有若干根火柴（不同堆的火柴数量可以不同）。两个游戏者轮流操作，每次可以选一个火柴堆拿走若干根火柴。可以只拿一根，也可以拿走整堆火柴，但不能同时从超过一堆火柴中拿。拿走最后一根火柴的游戏者胜利。\n\n本题的游戏稍微有些不同：在第一个回合中，双方可以直接拿走若干个整堆的火柴。可以一堆都不拿，但不可以全部拿走。从第二个回合（又轮到第一个游戏者）开始，规则和 Nim 游戏一样。\n\n如果你先拿，怎样才能保证获胜？如果可以获胜的话，还要让第一回合拿的火柴总数尽量小。", "inputFormat": "第一行为整数 $k$，即火柴堆数。\n\n第二行包含 $k$ 个整数 $a_i$，即各堆的火柴个数。\n", "outputFormat": "输出第一回合拿的火柴数目的最小值。如果不能保证取胜，输出 $-1$。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq k \\leq 100$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "[CQOI2013] New Nim Game", "background": "", "description": "The traditional Nim game is as follows: There are several piles of matches, each pile has some matches (different piles may have different numbers). Two players take turns; on each turn, a player may choose one pile and remove some matches from it. They may remove just one match or the entire pile, but cannot remove matches from more than one pile. The player who takes the last match wins.\n\nThis problem’s game is slightly different: On the first turn, the player may directly remove any number of whole piles. You may remove none, but you may not remove all piles. Starting from the second turn (i.e., when it is the first player’s turn again), the rules are the same as in Nim.\n\nIf you move first, how can you guarantee a win? If a win is possible, you should also minimize the total number of matches taken on the first turn.", "inputFormat": "The first line contains an integer $k$, the number of piles.\n\nThe second line contains $k$ integers $a_i$, the number of matches in each pile.", "outputFormat": "Output the minimum number of matches taken on the first turn. If you cannot guarantee a win, output $-1$.", "hint": "Constraints\n\nFor all testdata, it is guaranteed that $1 \\leq k \\leq 100$, $1 \\leq a_i \\leq 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CQOI2013] 新Nim游戏", "background": "", "description": "传统的 Nim 游戏是这样的：有一些火柴堆，每堆都有若干根火柴（不同堆的火柴数量可以不同）。两个游戏者轮流操作，每次可以选一个火柴堆拿走若干根火柴。可以只拿一根，也可以拿走整堆火柴，但不能同时从超过一堆火柴中拿。拿走最后一根火柴的游戏者胜利。\n\n本题的游戏稍微有些不同：在第一个回合中，双方可以直接拿走若干个整堆的火柴。可以一堆都不拿，但不可以全部拿走。从第二个回合（又轮到第一个游戏者）开始，规则和 Nim 游戏一样。\n\n如果你先拿，怎样才能保证获胜？如果可以获胜的话，还要让第一回合拿的火柴总数尽量小。", "inputFormat": "第一行为整数 $k$，即火柴堆数。\n\n第二行包含 $k$ 个整数 $a_i$，即各堆的火柴个数。\n", "outputFormat": "输出第一回合拿的火柴数目的最小值。如果不能保证取胜，输出 $-1$。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $1 \\leq k \\leq 100$，$1 \\leq a_i \\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P4302", "type": "P", "difficulty": 4, "samples": [["NEERCYESYESYESNEERCYESYESYES", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串", "动态规划 DP", "搜索", "2003", "四川", "各省省选", "枚举", "区间 DP"], "title": "[SCOI2003] 字符串折叠", "background": null, "description": "折叠的定义如下：\n\n1. 一个字符串可以看成它自身的折叠。记作 ```S = S```\n\n2. ```X(S)``` 是 $X$ 个 ```S``` 连接在一起的串的折叠。记作 ```X(S) = SSSS…S```。\n\n3. 如果 ```A = A’```, ```B = B’```，则 ```AB = A’B’ ```。例如：因为 ```3(A) = AAA```, ```2(B) = BB```，所以 ```3(A)C2(B) = AAACBB```，而 ```2(3(A)C)2(B) = AAACAAACBB```\n\n给一个字符串，求它的最短折叠。\n\n例如 ```AAAAAAAAAABABABCCD``` 的最短折叠为：```9(A)3(AB)CCD```。", "inputFormat": "仅一行，即字符串 `S`，长度保证不超过 $100$。", "outputFormat": "仅一行，即最短的折叠长度。", "hint": "一个最短的折叠为：`2(NEERC3(YES))`\n\n保证 $100 \\%$ 的数据满足字符串 $S$ 由大写字母构成。", "locale": "zh-CN", "translations": {"en": {"title": "[SCOI2003] String Folding", "background": "", "description": "The definition of folding is as follows:\n\n1. A string can be considered its own folding. Denoted as `S = S`.\n\n2. `X(S)` is the folding of the string formed by concatenating $X$ copies of `S`. Denoted as `X(S) = SSSS…S`.\n\n3. If `A = A'`, `B = B'`, then `AB = A'B'`. For example: since `3(A) = AAA`, `2(B) = BB`, we have `3(A)C2(B) = AAACBB`, and `2(3(A)C)2(B) = AAACAAACBB`.\n\nGiven a string, find its shortest folding.\n\nFor example, the shortest folding of `AAAAAAAAAABABABCCD` is `9(A)3(AB)CCD`.", "inputFormat": "A single line containing the string `S`, whose length does not exceed $100$.", "outputFormat": "A single line containing the length of the shortest folding.", "hint": "One shortest folding is `2(NEERC3(YES))`.\n\nIt is guaranteed that for $100 \\%$ of the testdata, the string `S` consists only of uppercase letters.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[SCOI2003] 字符串折叠", "background": null, "description": "折叠的定义如下：\n\n1. 一个字符串可以看成它自身的折叠。记作 ```S = S```\n\n2. ```X(S)``` 是 $X$ 个 ```S``` 连接在一起的串的折叠。记作 ```X(S) = SSSS…S```。\n\n3. 如果 ```A = A’```, ```B = B’```，则 ```AB = A’B’ ```。例如：因为 ```3(A) = AAA```, ```2(B) = BB```，所以 ```3(A)C2(B) = AAACBB```，而 ```2(3(A)C)2(B) = AAACAAACBB```\n\n给一个字符串，求它的最短折叠。\n\n例如 ```AAAAAAAAAABABABCCD``` 的最短折叠为：```9(A)3(AB)CCD```。", "inputFormat": "仅一行，即字符串 `S`，长度保证不超过 $100$。", "outputFormat": "仅一行，即最短的折叠长度。", "hint": "一个最短的折叠为：`2(NEERC3(YES))`\n\n保证 $100 \\%$ 的数据满足字符串 $S$ 由大写字母构成。", "locale": "zh-CN"}}}
{"pid": "P4303", "type": "P", "difficulty": 5, "samples": [["2\n1 1 1 1 1 2 2 2 2 2 \n1 1 1 2 2 2 2 2 1 1 \n", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2006", "各省省选", "树状数组", "安徽", "背包 DP", "栈"], "title": "[AHOI2006] 基因匹配", "background": null, "description": "卡卡昨天晚上做梦梦见他和可可来到了另外一个星球，这个星球上生物的 DNA 序列由无数种碱基排列而成（地球上只有 $4$ 种），而更奇怪的是，组成 DNA 序列的每一种碱基在该序列中正好出现 $5$ 次！这样如果一个 DNA 序列由 $N$ 种不同的碱基构成，那么它的长度一定是 $5N$。 \n\n卡卡醒来后向可可叙述了这个奇怪的梦，而可可这些日子正在研究生物信息学中的基因匹配问题，于是他决定为这个奇怪星球上的生物写一个简单的 DNA 匹配程序。 \n\n为了描述基因匹配的原理，我们需要先定义子序列的概念：若从一个 DNA 序列（字符串）$s$ 中任意抽取一些碱基（字符），将它们仍按在s中的顺序排列成一个新串 $u$，则称 $u$ 是 $s$ 的一个子序列。对于两个 DNA 序列 $s_1$ 和 $s_2$，如果存在一个序列 $u$ 同时成为 $s_1$ 和 $s_2$ 的子序列，则称 $u$ 是 $s_1$ 和 $s_2$ 的公共子序列。 \n\n卡卡已知两个 DNA 序列 $s_1$ 和 $s_2$，求 $s_1$ 和 $s_2$ 的最大匹配就是指 $s_1$ 和 $s_2$ 最长公共子序列的长度。 \n\n[任务] \n编写一个程序： \n- 从输入文件中读入两个等长的 DNA 序列； \n- 计算它们的最大匹配； \n- 向输出文件打印你得到的结果。", "inputFormat": "输入文件中第一行有一个整数 $N$，表示这个星球上某种生物使用了 $N$ 种不同的碱基，以后将它们编号为 $1…N$ 的整数。 \n\n以下还有两行，每行描述一个 DNA 序列：包含 $5N$ 个 $1…N$ 的整数，且每一个整数在对应的序列中正好出现 $5$ 次。", "outputFormat": "输出文件中只有一个整数，即两个 DNA 序列的最大匹配数目。", "hint": "$1 \\leq N \\leq 20000$", "locale": "zh-CN", "translations": {"en": {"title": "[AHOI2006] Gene Matching", "background": "", "description": "Kaka dreamed last night that he and Keke arrived on another planet. On this planet, organisms have DNA sequences formed by countless types of bases (on Earth there are only $4$ types). Even stranger, each type of base appears exactly $5$ times in any given DNA sequence. Thus, if a DNA sequence consists of $N$ distinct types of bases, its length must be $5N$.\n\nAfter waking up, Kaka told Keke about this strange dream. Keke has been studying the gene matching problem in bioinformatics, so he decided to write a simple DNA matching program for organisms on this strange planet.\n\nTo describe the principle of gene matching, we first define the concept of a subsequence: if we arbitrarily pick some bases (characters) from a DNA sequence (string) $s$ and arrange them in the same order as in $s$ to form a new string $u$, then $u$ is called a subsequence of $s$. For two DNA sequences $s_1$ and $s_2$, if there exists a sequence $u$ that is a subsequence of both $s_1$ and $s_2$, then $u$ is called a common subsequence of $s_1$ and $s_2$.\n\nGiven two DNA sequences $s_1$ and $s_2$, the maximum match is defined as the length of the longest common subsequence of $s_1$ and $s_2$.\n\n[Task]\nWrite a program to:\n- Read two DNA sequences of equal length from the input file.\n- Compute their maximum match.\n- Print your result to the output file.", "inputFormat": "The first line contains an integer $N$, meaning that a certain organism on this planet uses $N$ distinct types of bases, numbered by the integers $1 \\ldots N$.\n\nThe next two lines each describe a DNA sequence: each contains $5N$ integers in the range $1 \\ldots N$, and every integer appears exactly $5$ times in the corresponding sequence.", "outputFormat": "Output a single integer: the maximum match of the two DNA sequences.", "hint": "$1 \\leq N \\leq 20000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[AHOI2006] 基因匹配", "background": null, "description": "卡卡昨天晚上做梦梦见他和可可来到了另外一个星球，这个星球上生物的 DNA 序列由无数种碱基排列而成（地球上只有 $4$ 种），而更奇怪的是，组成 DNA 序列的每一种碱基在该序列中正好出现 $5$ 次！这样如果一个 DNA 序列由 $N$ 种不同的碱基构成，那么它的长度一定是 $5N$。 \n\n卡卡醒来后向可可叙述了这个奇怪的梦，而可可这些日子正在研究生物信息学中的基因匹配问题，于是他决定为这个奇怪星球上的生物写一个简单的 DNA 匹配程序。 \n\n为了描述基因匹配的原理，我们需要先定义子序列的概念：若从一个 DNA 序列（字符串）$s$ 中任意抽取一些碱基（字符），将它们仍按在s中的顺序排列成一个新串 $u$，则称 $u$ 是 $s$ 的一个子序列。对于两个 DNA 序列 $s_1$ 和 $s_2$，如果存在一个序列 $u$ 同时成为 $s_1$ 和 $s_2$ 的子序列，则称 $u$ 是 $s_1$ 和 $s_2$ 的公共子序列。 \n\n卡卡已知两个 DNA 序列 $s_1$ 和 $s_2$，求 $s_1$ 和 $s_2$ 的最大匹配就是指 $s_1$ 和 $s_2$ 最长公共子序列的长度。 \n\n[任务] \n编写一个程序： \n- 从输入文件中读入两个等长的 DNA 序列； \n- 计算它们的最大匹配； \n- 向输出文件打印你得到的结果。", "inputFormat": "输入文件中第一行有一个整数 $N$，表示这个星球上某种生物使用了 $N$ 种不同的碱基，以后将它们编号为 $1…N$ 的整数。 \n\n以下还有两行，每行描述一个 DNA 序列：包含 $5N$ 个 $1…N$ 的整数，且每一个整数在对应的序列中正好出现 $5$ 次。", "outputFormat": "输出文件中只有一个整数，即两个 DNA 序列的最大匹配数目。", "hint": "$1 \\leq N \\leq 20000$", "locale": "zh-CN"}}}
{"pid": "P4304", "type": "P", "difficulty": 5, "samples": [["3\n010\n000\n100", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "各省省选", "网络流", "二分图", "天津"], "title": "[TJOI2013] 攻击装置", "background": "", "description": "给定一个 01 矩阵，其中你可以在 0 的位置放置攻击装置。每一个攻击装置 $(x,y)$ 都可以按照“日”字攻击其周围的 $8$ 个位置 $(x-1,y-2)$，$(x-2,y-1)$，$(x+1,y-2)$，$(x+2,y-1)$，$(x-1,y+2)$，$(x-2,y+1)$，$(x+1,y+2)$，$(x+2,y+1)$。\n\n求在装置互不攻击的情况下，最多可以放置多少个装置。", "inputFormat": "第一行一个整数 $N$，表示矩阵大小为 $N \\times N$。\n\n接下来 $N$ 行每一行一个长度 $N$ 的 01 串，表示矩阵。", "outputFormat": "一个整数，表示在装置互不攻击的情况下最多可以放置多少个装置。", "hint": "对于 $30\\%$ 的数据，保证 $N \\le 50$。\n\n对于 $100\\%$ 的数据，保证 $N \\le 200$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2013] Attack Devices", "background": "", "description": "Given a 0-1 matrix, you can place an attack device on any cell with value 0. Each device at $(x,y)$ can attack in a knight’s move the following 8 positions: $(x-1,y-2)$, $(x-2,y-1)$, $(x+1,y-2)$, $(x+2,y-1)$, $(x-1,y+2)$, $(x-2,y+1)$, $(x+1,y+2)$, $(x+2,y+1)$. Find the maximum number of devices that can be placed so that no two devices attack each other.", "inputFormat": "The first line contains an integer $N$, meaning the matrix size is $N \\times N$.  \nThe next $N$ lines each contain a binary string of length $N$, representing the matrix.", "outputFormat": "Output a single integer, the maximum number of devices that can be placed so that no two devices attack each other.", "hint": "For $30\\%$ of the testdata, it is guaranteed that $N \\le 50$.  \nFor $100\\%$ of the testdata, it is guaranteed that $N \\le 200$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2013] 攻击装置", "background": "", "description": "给定一个 01 矩阵，其中你可以在 0 的位置放置攻击装置。每一个攻击装置 $(x,y)$ 都可以按照“日”字攻击其周围的 $8$ 个位置 $(x-1,y-2)$，$(x-2,y-1)$，$(x+1,y-2)$，$(x+2,y-1)$，$(x-1,y+2)$，$(x-2,y+1)$，$(x+1,y+2)$，$(x+2,y+1)$。\n\n求在装置互不攻击的情况下，最多可以放置多少个装置。", "inputFormat": "第一行一个整数 $N$，表示矩阵大小为 $N \\times N$。\n\n接下来 $N$ 行每一行一个长度 $N$ 的 01 串，表示矩阵。", "outputFormat": "一个整数，表示在装置互不攻击的情况下最多可以放置多少个装置。", "hint": "对于 $30\\%$ 的数据，保证 $N \\le 50$。\n\n对于 $100\\%$ 的数据，保证 $N \\le 200$。", "locale": "zh-CN"}}}
{"pid": "P4305", "type": "P", "difficulty": 2, "samples": [["2\n11\n1 2 18 3 3 19 2 3 6 5 4\n6\n1 2 3 4 5 6\n", "1 2 18 3 19 6 5 4\n1 2 3 4 5 6\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "各省省选", "吉林", "O2优化", "排序", "哈希 hashing", "哈希表"], "title": "[JLOI2011] 不重复数字", "background": "", "description": "给定 $n$ 个数，要求把其中重复的去掉，只保留第一次出现的数。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个整数 $n$。\n\n第二行 $n$ 个数，表示给定的数。", "outputFormat": "对于每组数据，输出一行，为去重后剩下的数，两个数之间用一个空格隔开。", "hint": "对于 $30\\%$ 的数据，$n \\le 100$，给出的数 $\\in [0, 100]$。\n\n对于 $60\\%$ 的数据，$n \\le 10^4$，给出的数 $\\in [0, 10^4]$。\n\n对于 $100\\%$ 的数据，$1 \\le T\\le 50$，$1 \\le n \\le 5 \\times 10^4$，给出的数在 $32$ 位有符号整数范围内。", "locale": "zh-CN", "translations": {"en": {"title": "[JLOI2011] Non-repeating Numbers", "background": "", "description": "Given $n$ numbers, remove the duplicates and keep only the first occurrence of each number.", "inputFormat": "**This problem contains multiple test cases.**\n\nThe first line contains an integer $T$, the number of test cases.\n\nFor each test case:\n\nThe first line contains an integer $n$.\n\nThe second line contains $n$ numbers, which are the given numbers.", "outputFormat": "For each test case, output one line containing the remaining numbers after deduplication, separated by a single space.", "hint": "For $30\\%$ of the testdata, $n \\le 100$, and each given number $\\in [0, 100]$.\n\nFor $60\\%$ of the testdata, $n \\le 10^4$, and each given number $\\in [0, 10^4]$.\n\nFor $100\\%$ of the testdata, $1 \\le T \\le 50$, $1 \\le n \\le 5 \\times 10^4$, and each given number is within the $32$-bit signed integer range.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[JLOI2011] 不重复数字", "background": "", "description": "给定 $n$ 个数，要求把其中重复的去掉，只保留第一次出现的数。", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$，表示数据组数。\n\n对于每组数据：\n\n第一行一个整数 $n$。\n\n第二行 $n$ 个数，表示给定的数。", "outputFormat": "对于每组数据，输出一行，为去重后剩下的数，两个数之间用一个空格隔开。", "hint": "对于 $30\\%$ 的数据，$n \\le 100$，给出的数 $\\in [0, 100]$。\n\n对于 $60\\%$ 的数据，$n \\le 10^4$，给出的数 $\\in [0, 10^4]$。\n\n对于 $100\\%$ 的数据，$1 \\le T\\le 50$，$1 \\le n \\le 5 \\times 10^4$，给出的数在 $32$ 位有符号整数范围内。", "locale": "zh-CN"}}}
{"pid": "P4306", "type": "P", "difficulty": 3, "samples": [["3\n010\n001\n100", "9"]], "limits": {"time": [300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2010", "各省省选", "江苏", "枚举", "图论建模", "连通块", "强连通分量", "bitset", "Floyd 算法"], "title": "[JSOI2010] 连通数", "background": null, "description": "度量一个有向图连通情况的一个指标是连通数，指图中可达顶点对个的个数。\n\n如图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8jviim6w.png)\n\n顶点 $1$ 可达 $1, 2, 3, 4, 5$\n\n顶点 $2$ 可达 $2, 3, 4, 5$\n\n顶点 $3$ 可达 $3, 4, 5$\n\n顶点 $4, 5$ 都只能到达自身。\n\n所以这张图的连通数为 $14$。\n\n给定一张图，请你求出它的连通数", "inputFormat": "输入数据第一行是图顶点的数量，一个正整数 $N$。  \n接下来 $N$ 行，每行 $N$ 个字符。第 $i$ 行第 $j$ 列的 `1` 表示顶点 $i$ 到 $j$ 有边，`0` 则表示无边。", "outputFormat": "输出一行一个整数，表示该图的连通数。", "hint": "对于 $100 \\%$ 的数据，$1 \\le N \\le 2000$。", "locale": "zh-CN", "translations": {"en": {"title": "[JSOI2010] Reachability Count", "background": "", "description": "A metric for measuring the connectivity of a directed graph is the reachability count, defined as the number of ordered pairs of vertices in which the second is reachable from the first.\n\nAs shown in the figure:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8jviim6w.png)\n\nVertex 1 can reach 1, 2, 3, 4, 5.\nVertex 2 can reach 2, 3, 4, 5.\nVertex 3 can reach 3, 4, 5.\nVertices 4 and 5 can only reach themselves.\n\nTherefore, the reachability count of this graph is $14$.\n\nGiven a graph, please compute its reachability count.", "inputFormat": "The first line contains the number of vertices, a positive integer $N$.  \nThen follow $N$ lines, each containing $N$ characters. In the $i$-th row and $j$-th column, a `1` indicates there is a directed edge from $i$ to $j$, and `0` indicates no edge.", "outputFormat": "Output a single line with one integer, the reachability count of the graph.", "hint": "For $100\\%$ of the testdata, $1 \\le N \\le 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[JSOI2010] 连通数", "background": null, "description": "度量一个有向图连通情况的一个指标是连通数，指图中可达顶点对个的个数。\n\n如图\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8jviim6w.png)\n\n顶点 $1$ 可达 $1, 2, 3, 4, 5$\n\n顶点 $2$ 可达 $2, 3, 4, 5$\n\n顶点 $3$ 可达 $3, 4, 5$\n\n顶点 $4, 5$ 都只能到达自身。\n\n所以这张图的连通数为 $14$。\n\n给定一张图，请你求出它的连通数", "inputFormat": "输入数据第一行是图顶点的数量，一个正整数 $N$。  \n接下来 $N$ 行，每行 $N$ 个字符。第 $i$ 行第 $j$ 列的 `1` 表示顶点 $i$ 到 $j$ 有边，`0` 则表示无边。", "outputFormat": "输出一行一个整数，表示该图的连通数。", "hint": "对于 $100 \\%$ 的数据，$1 \\le N \\le 2000$。", "locale": "zh-CN"}}}
{"pid": "P4307", "type": "P", "difficulty": 6, "samples": [["3 3\n1 0 2 1\n1 1 10 1\n0 1 3 3\n1 2\n2 3\n3 1", "43"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "各省省选", "江苏", "图论建模", "费用流"], "title": "[JSOI2009] 球队收益 / 球队预算", "background": "", "description": "在一个篮球联赛里，有$n$支球队，球队的支出是和他们的胜负场次有关系的，具体来说，第i支球队的赛季总支出是$C_i\\times x^2+D_i \\times y^2,D_i \\le C_i$。(赢得多，给球员的奖金就多嘛)\n其中$x,y$分别表示这只球队本赛季的胜负场次。现在赛季进行到了一半，每只球队分别取得了$a_i$场胜利和$b_i$场失利。而接下来还有$m$场比赛要进行。问联盟球队的最小总支出是多少。", "inputFormat": "第一行$n$，$m$\n\n接下来$n$行每行$4$个整数$a_i,b_i,C_i,D_i$\n\n再接下来$m$行每行两个整数$s$，$t$表示第$s$支队伍和第$t$支队伍之间将有一场比赛，注意两只队间可能有多场比赛。", "outputFormat": "一个整数代表总支出的最小值。", "hint": "对于20%的数据$2 \\le n \\le 10,0 \\le m \\le 20$；  \n对于100%的数据$2 \\le n \\le 5000,0 \\le m \\le 1000,0 \\le D_i \\le C_i \\le 10,0 \\le a_i,b_i \\le 50$。", "locale": "zh-CN", "translations": {"en": {"title": "[JSOI2009] Team Revenue / Team Budget", "background": "", "description": "In a basketball league, there are $n$ teams. A team's expenditure is related to its numbers of wins and losses. Specifically, the season's total expenditure of the $i$-th team is $C_i\\times x^2+D_i \\times y^2,D_i \\le C_i$. (The more you win, the more bonuses you pay to the players.)\n\nNow the season is halfway through. Each team has achieved $a_i$ wins and $b_i$ losses. There are still $m$ games to be played. Find the minimum total expenditure across all teams in the league.", "inputFormat": "The first line contains $n$ and $m$.\n\nEach of the next $n$ lines contains $4$ integers $a_i,b_i,C_i,D_i$.\n\nEach of the next $m$ lines contains two integers $s$, $t$, meaning the $s$-th team and the $t$-th team will play one game. Note that there may be multiple games between the same pair of teams.", "outputFormat": "Print one integer representing the minimum total expenditure.", "hint": "For $20\\%$ of the testdata, $2 \\le n \\le 10,0 \\le m \\le 20$.\n\nFor $100\\%$ of the testdata, $2 \\le n \\le 5000,0 \\le m \\le 1000,0 \\le D_i \\le C_i \\le 10,0 \\le a_i,b_i \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[JSOI2009] 球队收益 / 球队预算", "background": "", "description": "在一个篮球联赛里，有$n$支球队，球队的支出是和他们的胜负场次有关系的，具体来说，第i支球队的赛季总支出是$C_i\\times x^2+D_i \\times y^2,D_i \\le C_i$。(赢得多，给球员的奖金就多嘛)\n其中$x,y$分别表示这只球队本赛季的胜负场次。现在赛季进行到了一半，每只球队分别取得了$a_i$场胜利和$b_i$场失利。而接下来还有$m$场比赛要进行。问联盟球队的最小总支出是多少。", "inputFormat": "第一行$n$，$m$\n\n接下来$n$行每行$4$个整数$a_i,b_i,C_i,D_i$\n\n再接下来$m$行每行两个整数$s$，$t$表示第$s$支队伍和第$t$支队伍之间将有一场比赛，注意两只队间可能有多场比赛。", "outputFormat": "一个整数代表总支出的最小值。", "hint": "对于20%的数据$2 \\le n \\le 10,0 \\le m \\le 20$；  \n对于100%的数据$2 \\le n \\le 5000,0 \\le m \\le 1000,0 \\le D_i \\le C_i \\le 10,0 \\le a_i,b_i \\le 50$。", "locale": "zh-CN"}}}
{"pid": "P4308", "type": "P", "difficulty": 6, "samples": [["5 5 \n10.0 8.0 8.0 8.0 15.0 \n1 \n0.5 \n1 2 \n2 3 \n3 4 \n4 2 \n4 5", "18.0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2011", "倍增", "枚举", "CTSC/CTS"], "title": "[CTSC2011] 幸福路径", "background": "", "description": "有向图 $G$ 有 $n$ 个顶点 $1, 2, \\cdots, n$，点 $i$ 的权值为 $w(i)$。\n\n现在有一只蚂蚁，从给定的起点 $v_0$ 出发，沿着图 $G$ 的边爬行。开始时，它的体力为 $1$。每爬过一条边，它的体力都会下降为原来的 $\\rho$ 倍，其中 $\\rho$ 是一个给定的小于 $1$ 的正常数。而蚂蚁爬到某个顶点时的幸福度，是它当时的体力与该点权值的乘积。 \n\n我们把蚂蚁在爬行路径上幸福度的总和记为 $H$。很显然，对于不同的爬行路径，$H$ 的值也可能不同。小 Z 对 $H$ 值的最大可能值很感兴趣，你能帮助他计算吗？注意，蚂蚁爬行的路径长度可能是无穷的。", "inputFormat": "每一行中两个数之间用一个空格隔开。 \n\n输入文件第一行包含两个正整数 $n,m$，分别表示 $G$ 中顶点的个数和边的条数。 \n\n第二行包含 $n$ 个非负实数，依次表示 $n$ 个顶点权值  $w(1), w(2), \\cdots, w(n)$。\n\n第三行包含一个正整数 $v_0$，表示给定的起点。\n\n第四行包含一个实数 $\\rho$，表示给定的小于 $1$ 的正常数。 \n\n接下来 $m$ 行，每行两个正整数 $x, y$，表示 $(x, y)$ 是 $G$ 的一条有向边。可能有自环，但不会有重边。", "outputFormat": "仅包含一个实数，即 $H$ 值的最大可能值，四舍五入到小数点后一位。", "hint": "对于 $100\\%$ 的数据，$1\\leq n \\le 100$，$1\\leq m \\le 1000$，$0 < \\rho \\le 1 - 10^{-6}$，$0\\leq w(i) \\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[CTSC2011] Happy Path", "background": "", "description": "There is a directed graph $G$ with $n$ vertices $1, 2, \\cdots, n$, and the weight of vertex $i$ is $w(i)$.\n\nAn ant starts from a given starting vertex $v_0$ and crawls along the edges of $G$. Initially, its stamina is $1$. Each time it traverses an edge, its stamina is multiplied by $\\rho$, where $\\rho$ is a given positive constant less than $1$. When the ant reaches a vertex, its happiness is the product of its current stamina and the weight of that vertex.\n\nWe denote the total happiness along the crawling path by $H$. Clearly, for different crawling paths, the value of $H$ may differ. Xiao Z is interested in the maximum possible value of $H$. Can you help compute it? Note that the length of the ant’s path may be infinite.", "inputFormat": "Numbers on each line are separated by a single space.\n\nThe first line contains two positive integers $n, m$, the number of vertices and edges in $G$.\n\nThe second line contains $n$ non-negative real numbers, representing the vertex weights $w(1), w(2), \\cdots, w(n)$.\n\nThe third line contains a positive integer $v_0$, the given starting vertex.\n\nThe fourth line contains a real number $\\rho$, the given positive constant less than $1$.\n\nEach of the next $m$ lines contains two positive integers $x, y$, indicating that $(x, y)$ is a directed edge of $G$. Self-loops may exist, but there are no multiple edges.", "outputFormat": "Output a single real number: the maximum possible value of $H$, rounded to one decimal place.", "hint": "For $100\\%$ of the testdata, $1 \\leq n \\le 100$, $1 \\leq m \\le 1000$, $0 < \\rho \\le 1 - 10^{-6}$, $0 \\leq w(i) \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CTSC2011] 幸福路径", "background": "", "description": "有向图 $G$ 有 $n$ 个顶点 $1, 2, \\cdots, n$，点 $i$ 的权值为 $w(i)$。\n\n现在有一只蚂蚁，从给定的起点 $v_0$ 出发，沿着图 $G$ 的边爬行。开始时，它的体力为 $1$。每爬过一条边，它的体力都会下降为原来的 $\\rho$ 倍，其中 $\\rho$ 是一个给定的小于 $1$ 的正常数。而蚂蚁爬到某个顶点时的幸福度，是它当时的体力与该点权值的乘积。 \n\n我们把蚂蚁在爬行路径上幸福度的总和记为 $H$。很显然，对于不同的爬行路径，$H$ 的值也可能不同。小 Z 对 $H$ 值的最大可能值很感兴趣，你能帮助他计算吗？注意，蚂蚁爬行的路径长度可能是无穷的。", "inputFormat": "每一行中两个数之间用一个空格隔开。 \n\n输入文件第一行包含两个正整数 $n,m$，分别表示 $G$ 中顶点的个数和边的条数。 \n\n第二行包含 $n$ 个非负实数，依次表示 $n$ 个顶点权值  $w(1), w(2), \\cdots, w(n)$。\n\n第三行包含一个正整数 $v_0$，表示给定的起点。\n\n第四行包含一个实数 $\\rho$，表示给定的小于 $1$ 的正常数。 \n\n接下来 $m$ 行，每行两个正整数 $x, y$，表示 $(x, y)$ 是 $G$ 的一条有向边。可能有自环，但不会有重边。", "outputFormat": "仅包含一个实数，即 $H$ 值的最大可能值，四舍五入到小数点后一位。", "hint": "对于 $100\\%$ 的数据，$1\\leq n \\le 100$，$1\\leq m \\le 1000$，$0 < \\rho \\le 1 - 10^{-6}$，$0\\leq w(i) \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P4309", "type": "P", "difficulty": 6, "samples": [["3\n0 0 2", "1\n1\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "线段树", "各省省选", "平衡树", "树状数组", "天津"], "title": "[TJOI2013] 最长上升子序列", "background": "", "description": "给定一个序列，初始为空。现在我们将 $1$ 到 $N$ 的数字插入到序列中，每次将一个数字插入到一个特定的位置。每插入一个数字，我们都想知道此时最长上升子序列长度是多少？", "inputFormat": "第一行一个整数 $N$，表示我们要将 $1$ 到 $N$ 插入序列中。\n\n接下是 $N$ 个数字，第 $k$ 个数字 $X_k$，表示我们将 $k$ 插入到位置 $X_k(0\\le X_k\\le k-1,1\\le k\\le N)$\n", "outputFormat": "$N$ 行，第 $i$ 行表示 $i$ 插入 $X_i$ 位置后序列的最长上升子序列的长度是多少。", "hint": "$100\\%$ 的数据 $n\\le10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[TJOI2013] Longest Increasing Subsequence", "background": "", "description": "You are given a sequence that is initially empty. We will insert the numbers $1$ through $N$ into the sequence, each time inserting one number at a specific position. After each insertion, we want to know the length of the current longest increasing subsequence.", "inputFormat": "The first line contains an integer $N$, indicating that we will insert $1$ through $N$ into the sequence.\n\nThen follow $N$ integers. The $k$-th number $X_k$ indicates that we insert $k$ at position $X_k$ ($0 \\le X_k \\le k - 1$, $1 \\le k \\le N$).", "outputFormat": "Output $N$ lines. The $i$-th line is the length of the longest increasing subsequence after inserting $i$ at position $X_i$.", "hint": "Constraints: For $100\\%$ of the testdata, $N \\le 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[TJOI2013] 最长上升子序列", "background": "", "description": "给定一个序列，初始为空。现在我们将 $1$ 到 $N$ 的数字插入到序列中，每次将一个数字插入到一个特定的位置。每插入一个数字，我们都想知道此时最长上升子序列长度是多少？", "inputFormat": "第一行一个整数 $N$，表示我们要将 $1$ 到 $N$ 插入序列中。\n\n接下是 $N$ 个数字，第 $k$ 个数字 $X_k$，表示我们将 $k$ 插入到位置 $X_k(0\\le X_k\\le k-1,1\\le k\\le N)$\n", "outputFormat": "$N$ 行，第 $i$ 行表示 $i$ 插入 $X_i$ 位置后序列的最长上升子序列的长度是多少。", "hint": "$100\\%$ 的数据 $n\\le10^5$。", "locale": "zh-CN"}}}
{"pid": "P4310", "type": "P", "difficulty": 4, "samples": [["3\n1 2 3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "枚举", "进制", "位运算"], "title": "绝世好题", "background": null, "description": "给定一个长度为 $n$ 的数列 $a_i$，求 $a_i$ 的子序列 $b_i$ 的最长长度 $k$，满足 $b_i \\& b_{i-1} \\ne 0 $，其中 $2\\leq i\\leq k$， $\\&$ 表示位运算取与。", "inputFormat": "输入文件共 2 行。\n第一行包括一个整数 $n$。\n第二行包括 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "输出文件共一行。\n包括一个整数，表示子序列 $b_i$ 的最长长度。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 100000$，$a_i\\leq 10^9$。", "locale": "zh-CN", "translations": {"en": {"title": "A Peerless Problem", "background": "", "description": "Given a sequence $a_i$ of length $n$, find the maximum length $k$ of a subsequence $b_i$ of $a_i$ such that $b_i \\& b_{i-1} \\ne 0$, where $2 \\le i \\le k$, and $\\&$ denotes the bitwise AND operation.", "inputFormat": "The input contains 2 lines.\nThe first line contains an integer $n$.\nThe second line contains $n$ integers, where the $i$-th integer is $a_i$.", "outputFormat": "Output one line containing a single integer, the maximum length of the subsequence $b_i$.", "hint": "For $100\\%$ of the testdata, $1 \\le n \\le 100000$, $a_i \\le 10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "绝世好题", "background": null, "description": "给定一个长度为 $n$ 的数列 $a_i$，求 $a_i$ 的子序列 $b_i$ 的最长长度 $k$，满足 $b_i \\& b_{i-1} \\ne 0 $，其中 $2\\leq i\\leq k$， $\\&$ 表示位运算取与。", "inputFormat": "输入文件共 2 行。\n第一行包括一个整数 $n$。\n第二行包括 $n$ 个整数，第 $i$ 个整数表示 $a_i$。", "outputFormat": "输出文件共一行。\n包括一个整数，表示子序列 $b_i$ 的最长长度。", "hint": "对于 $100\\%$ 的数据，$1\\leq n\\leq 100000$，$a_i\\leq 10^9$。", "locale": "zh-CN"}}}
{"pid": "P4311", "type": "P", "difficulty": 6, "samples": [["4 4 4\n1 1 1 1\n0 1 0 3\n1 4\n2 2\n3 3\n4 3\n", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["网络流", "费用流"], "title": "士兵占领", "background": null, "description": "有一个 $M \\times N$ 的棋盘，有的格子是障碍。现在你要选择一些格子来放置一些士兵，一个格子里最多可以放置一个士兵，障碍格里不能放置士兵。我们称这些士兵占领了整个棋盘当满足第 $i$ 行至少放置了 $L_i$ 个士兵，第 $j$ 列至少放置了 $C_j$ 个士兵。现在你的任务是要求使用最少个数的士兵来占领整个棋盘。", "inputFormat": "第一行两个数 $M, N, K$ 分别表示棋盘的行数，列数以及障碍的个数。  \n第二行有 $M$ 个数表示 $L_i$。  \n第三行有 $N$ 个数表示 $C_i$。  \n接下来有 $K$ 行，每行两个数 $X, Y$ 表示 $(X, Y)$ 这个格子是障碍。", "outputFormat": "输出一个数表示最少需要使用的士兵个数。如果无论放置多少个士兵都没有办法占领整个棋盘，输出 `JIONG!`。", "hint": "对于 $100 \\%$ 的数据，$1 \\le M, N \\le 100$，$0 \\le K \\le M \\times N$。", "locale": "zh-CN", "translations": {"en": {"title": "Soldiers Occupy", "background": "", "description": "There is an $M \\times N$ board, and some cells are obstacles. You need to choose some cells to place soldiers. At most one soldier can be placed in a cell, and soldiers cannot be placed in obstacle cells. We say the soldiers occupy the entire board if, for each row $i$, at least $L_i$ soldiers are placed, and for each column $j$, at least $C_j$ soldiers are placed. Your task is to use the fewest number of soldiers to occupy the entire board.", "inputFormat": "The first line contains three integers $M, N, K$, representing the number of rows, the number of columns, and the number of obstacles.  \nThe second line contains $M$ integers representing $L_i$.  \nThe third line contains $N$ integers representing $C_j$.  \nThe next $K$ lines each contain two integers $X, Y$, indicating that cell $(X, Y)$ is an obstacle.", "outputFormat": "Output one integer representing the minimum number of soldiers required. If it is impossible to occupy the entire board no matter how many soldiers are placed, output `JIONG!`.", "hint": "For $100\\%$ of the testdata, $1 \\le M, N \\le 100$, $0 \\le K \\le M \\times N$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "士兵占领", "background": null, "description": "有一个 $M \\times N$ 的棋盘，有的格子是障碍。现在你要选择一些格子来放置一些士兵，一个格子里最多可以放置一个士兵，障碍格里不能放置士兵。我们称这些士兵占领了整个棋盘当满足第 $i$ 行至少放置了 $L_i$ 个士兵，第 $j$ 列至少放置了 $C_j$ 个士兵。现在你的任务是要求使用最少个数的士兵来占领整个棋盘。", "inputFormat": "第一行两个数 $M, N, K$ 分别表示棋盘的行数，列数以及障碍的个数。  \n第二行有 $M$ 个数表示 $L_i$。  \n第三行有 $N$ 个数表示 $C_i$。  \n接下来有 $K$ 行，每行两个数 $X, Y$ 表示 $(X, Y)$ 这个格子是障碍。", "outputFormat": "输出一个数表示最少需要使用的士兵个数。如果无论放置多少个士兵都没有办法占领整个棋盘，输出 `JIONG!`。", "hint": "对于 $100 \\%$ 的数据，$1 \\le M, N \\le 100$，$0 \\le K \\le M \\times N$。", "locale": "zh-CN"}}}
{"pid": "P4312", "type": "P", "difficulty": 6, "samples": [["5\n4 2 4 5 6\n10\nexcursion 1 1\nexcursion 1 2\nbridge 1 2\nexcursion 1 2\nbridge 3 4\nbridge 3 5\nexcursion 4 5\nbridge 1 3\nexcursion 2 4\nexcursion 2 5", "4\nimpossible\nyes\n6\nyes\nyes\n15\nyes\n15\n16"], ["6\n1 2 3 4 5 6\n10\nbridge 1 2\nbridge 2 3\nbridge 4 5\nexcursion 1 3\nexcursion 1 5\nbridge 3 4\nexcursion 1 5\npenguins 3 10\nexcursion 1 3\nbridge 1 5", "yes\nyes\nyes\n6\nimpossible\nyes\n15\n13\nno"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2009", "树状数组", "树链剖分", "动态树 LCT", "COI（克罗地亚）"], "title": "[COI 2009] OTOCI", "background": "注：本题原题通过**交互**的形式强制在线。但是在本题您不需要考虑交互的问题。", "description": "不久之前，Mirko 建立了一个旅行社，名叫“极地之梦”。这家旅行社在北极附近购买了 $n$ 座冰岛，并且提供观光服务。\n\n当地最受欢迎的当然是帝企鹅了，这些小家伙经常成群结队的游走在各个冰岛之间。Mirko 的旅行社遭受一次重大打击，以至于观光游轮已经不划算了。旅行社将在冰岛之间建造大桥，并用观光巴士来运载游客。\n\nMirko 希望开发一个电脑程序来管理这些大桥的建造过程，以免有不可预料的错误发生。这些冰岛从1到N标号。一开始时这些岛屿没有大桥连接，并且所有岛上的帝企鹅数量都是知道的。每座岛上的企鹅数量虽然会有所改变，但是始终在 $[0, 1000]$ 之间。你的程序需要处理以下三种命令：  \n\n- `bridge u v`：询问结点 $u$ 与结点 $v$ 是否连通。如果是则输出 `no`；否则输出 `yes`，并且在结点 $u$ 和结点 $v$ 之间连一条无向边。 \n- `penguins u x`：将结点 $u$ 对应的权值 $w_u$ 修改为 $x$。 \n- `excursion u v`：如果结点 $u$ 和结点 $v$ 不连通，则输出 `impossible`。否则输出结点 $u$ 到结点 $v$ 的路径上的点对应的权值的和。 \n\n共有 $q$ 个操作。\n", "inputFormat": "第一行包含一个整数 $n$，表示节点的数目。 \n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个节点初始时的权值 $w_i$。 \n\n第三行包含一个整数 $q$，表示操作的数目。 \n\n以下 $q$ 行，每行包含一个操作，操作的类别见题目描述。", "outputFormat": "输出所有 `bridge` 操作和 `excursion` 操作对应的输出，每个一行表示答案。\n\n", "hint": "【数据范围】   \n对于 $100\\%$ 的数据，$1 \\le n \\le 3 \\times 10^4$，$1 \\le q \\le 3\\times 10^5$, $0 \\le w_i \\le 1000$。", "locale": "zh-CN", "translations": {"en": {"title": "[COI 2009] OTOCI", "background": "Note: The original problem is interactive and enforces online processing. In this version, you do not need to consider interaction.", "description": "Not long ago, Mirko founded a travel agency called “Polar Dream.” The agency bought $n$ islands near the Arctic and offers sightseeing services.\n\nThe most popular attraction is, of course, the emperor penguins. These little fellows often move in groups between the islands. Mirko’s agency suffered a major setback, making cruise tours no longer cost-effective. The agency will build bridges between islands and use sightseeing buses to carry tourists.\n\nMirko wants to develop a computer program to manage the bridge-building process to avoid unexpected errors. The islands are labeled from $1$ to $n$. Initially, there are no bridges between islands, and the number of emperor penguins on each island is known. Although the number on each island may change, it is always within $[0, 1000]$. Your program must process the following three commands:\n\n- `bridge u v`: Ask whether nodes $u$ and $v$ are connected. If they are, output `no`; otherwise output `yes`, and add an undirected edge between $u$ and $v$.\n- `penguins u x`: Set the weight $w_u$ of node $u$ to $x$.\n- `excursion u v`: If nodes $u$ and $v$ are not connected, output `impossible`. Otherwise, output the sum of the weights of the nodes on the path from $u$ to $v$.\n\nThere are $q$ operations in total.", "inputFormat": "- The first line contains an integer $n$, the number of nodes.\n- The second line contains $n$ integers; the $i$-th integer is the initial weight $w_i$ of node $i$.\n- The third line contains an integer $q$, the number of operations.\n- Each of the next $q$ lines contains one operation as described above.", "outputFormat": "Output the results of all `bridge` and `excursion` operations, one answer per line.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 3 \\times 10^4$, $1 \\le q \\le 3 \\times 10^5$, $0 \\le w_i \\le 1000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[COI 2009] OTOCI", "background": "注：本题原题通过**交互**的形式强制在线。但是在本题您不需要考虑交互的问题。", "description": "不久之前，Mirko 建立了一个旅行社，名叫“极地之梦”。这家旅行社在北极附近购买了 $n$ 座冰岛，并且提供观光服务。\n\n当地最受欢迎的当然是帝企鹅了，这些小家伙经常成群结队的游走在各个冰岛之间。Mirko 的旅行社遭受一次重大打击，以至于观光游轮已经不划算了。旅行社将在冰岛之间建造大桥，并用观光巴士来运载游客。\n\nMirko 希望开发一个电脑程序来管理这些大桥的建造过程，以免有不可预料的错误发生。这些冰岛从1到N标号。一开始时这些岛屿没有大桥连接，并且所有岛上的帝企鹅数量都是知道的。每座岛上的企鹅数量虽然会有所改变，但是始终在 $[0, 1000]$ 之间。你的程序需要处理以下三种命令：  \n\n- `bridge u v`：询问结点 $u$ 与结点 $v$ 是否连通。如果是则输出 `no`；否则输出 `yes`，并且在结点 $u$ 和结点 $v$ 之间连一条无向边。 \n- `penguins u x`：将结点 $u$ 对应的权值 $w_u$ 修改为 $x$。 \n- `excursion u v`：如果结点 $u$ 和结点 $v$ 不连通，则输出 `impossible`。否则输出结点 $u$ 到结点 $v$ 的路径上的点对应的权值的和。 \n\n共有 $q$ 个操作。\n", "inputFormat": "第一行包含一个整数 $n$，表示节点的数目。 \n\n第二行包含 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个节点初始时的权值 $w_i$。 \n\n第三行包含一个整数 $q$，表示操作的数目。 \n\n以下 $q$ 行，每行包含一个操作，操作的类别见题目描述。", "outputFormat": "输出所有 `bridge` 操作和 `excursion` 操作对应的输出，每个一行表示答案。\n\n", "hint": "【数据范围】   \n对于 $100\\%$ 的数据，$1 \\le n \\le 3 \\times 10^4$，$1 \\le q \\le 3\\times 10^5$, $0 \\le w_i \\le 1000$。", "locale": "zh-CN"}}}
{"pid": "P4313", "type": "P", "difficulty": 6, "samples": [["3 4\n13 2 4 13\n7 13 8 12\n18 17 0 5\n8 13 15 4\n11 3 8 11\n11 18 6 5\n1 2 3 4 \n4 2 3 2\n3 1 0 4\n3 2 3 2\n0 2 2 1\n0 2 4 4 ", "152"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["网络流", "图论建模", "最小割"], "title": "文理分科", "background": "", "description": "文理分科是一件很纠结的事情！（虽然看到这个题目的人肯定都没有纠结过）\n\n小 P 所在的班级要进行文理分科。他的班级可以用一个 $n\\times m$ 的矩阵进行描述，每个格子代表一个同学的座位。每位同学必须从文科和理科中选择一科。同学们在选择科目的时候会获得一个满意值。满意值按如下的方式得到：\n\n- 如果第 $i$ 行第 $j$ 列的同学选择了文科，则他将获得 $art_{i,j}$ 的满意值，如果选择理科，将得到 $science_{i,j}$ 的满意值。\n\n- 如果第 $i$ 行第 $j$ 列的同学选择了文科，并且他相邻（两个格子相邻当且仅当它们拥有一条相同的边）的同学全部选择了文科，则他会更开心，所以会增加 $same\\text{\\underline{ }}art_{i,j}$ 的满意值。\n\n- 如果第 $i$ 行第 $j$ 列的同学选择了理科，并且他相邻的同学全部选择了理科，则增加 $same\\text{\\underline{ }}science_{i,j}$ 的满意值。\n\n小 P 想知道，大家应该如何选择，才能使所有人的满意值之和最大。请告诉他这个最大值。", "inputFormat": "输入第一行为两个正整数 $n,m$。  \n接下来 $n$ 行 $m$ 个整数，第 $i$ 行第 $j$ 个整数表示 $art_{i,j}$；  \n接下来 $n$ 行 $m$ 个整数，第 $i$ 行第 $j$ 个整数表示 $science_{i,j}$；  \n接下来 $n$ 行 $m$ 个整数，第 $i$ 行第 $j$ 个整数表示 $same\\text{\\underline{ }}art_{i,j}$；  \n接下来 $n$ 行 $m$ 个整数，第 $i$ 行第 $j$ 个整数表示 $same\\text{\\underline{ }}science_{i,j}$。", "outputFormat": "输出为一个整数，表示最大的满意值之和。", "hint": "### 样例说明\n\n1 表示选择文科，0 表示选择理科，方案如下：\n\n1  0  0  1\n\n0  1  0  0\n\n1  0  0  0\n\n### 数据范围\n\n$n,m\\leq 100$，读入数据均 $\\leq 500$。                                                                                                                                                              ", "locale": "zh-CN", "translations": {"en": {"title": "Arts or Science", "background": "", "description": "Choosing between arts and science is a very frustrating thing. (Although people who see this problem surely have never been frustrated about it.)\n\nStudent P's class is going to split into arts and science. The class can be described by an $n\\times m$ matrix, where each cell represents a student's seat. Every student must choose exactly one subject: arts or science. Students will gain a satisfaction value based on their choices, computed as follows:\n\n- If the student at row $i$, column $j$ chooses arts, they gain $art_{i,j}$ satisfaction; if they choose science, they gain $science_{i,j}$.\n\n- If the student at row $i$, column $j$ chooses arts, and all of their adjacent classmates (two cells are adjacent if and only if they share a common edge) also choose arts, then they will be happier, so an additional $same\\text{\\underline{ }}art_{i,j}$ satisfaction is added.\n\n- If the student at row $i$, column $j$ chooses science, and all of their adjacent classmates also choose science, then an additional $same\\text{\\underline{ }}science_{i,j}$ satisfaction is added.\n\nStudent P wants to know how everyone should choose in order to maximize the total satisfaction of all students. Please output this maximum value.", "inputFormat": "The first line contains two positive integers $n,m$.  \nThe next $n$ lines each contain $m$ integers; the integer in row $i$, column $j$ represents $art_{i,j}$.  \nThe next $n$ lines each contain $m$ integers; the integer in row $i$, column $j$ represents $science_{i,j}$.  \nThe next $n$ lines each contain $m$ integers; the integer in row $i$, column $j$ represents $same\\text{\\underline{ }}art_{i,j}$.  \nThe next $n$ lines each contain $m$ integers; the integer in row $i$, column $j$ represents $same\\text{\\underline{ }}science_{i,j}$.", "outputFormat": "Output a single integer, representing the maximum total satisfaction.", "hint": "### Sample Explanation\n\n$1$ means choosing arts, and $0$ means choosing science. One possible plan is as follows:\n\n1  0  0  1\n\n0  1  0  0\n\n1  0  0  0\n\n### Constraints\n\n$n,m\\leq 100$, and all input values are $\\leq 500$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "文理分科", "background": "", "description": "文理分科是一件很纠结的事情！（虽然看到这个题目的人肯定都没有纠结过）\n\n小 P 所在的班级要进行文理分科。他的班级可以用一个 $n\\times m$ 的矩阵进行描述，每个格子代表一个同学的座位。每位同学必须从文科和理科中选择一科。同学们在选择科目的时候会获得一个满意值。满意值按如下的方式得到：\n\n- 如果第 $i$ 行第 $j$ 列的同学选择了文科，则他将获得 $art_{i,j}$ 的满意值，如果选择理科，将得到 $science_{i,j}$ 的满意值。\n\n- 如果第 $i$ 行第 $j$ 列的同学选择了文科，并且他相邻（两个格子相邻当且仅当它们拥有一条相同的边）的同学全部选择了文科，则他会更开心，所以会增加 $same\\text{\\underline{ }}art_{i,j}$ 的满意值。\n\n- 如果第 $i$ 行第 $j$ 列的同学选择了理科，并且他相邻的同学全部选择了理科，则增加 $same\\text{\\underline{ }}science_{i,j}$ 的满意值。\n\n小 P 想知道，大家应该如何选择，才能使所有人的满意值之和最大。请告诉他这个最大值。", "inputFormat": "输入第一行为两个正整数 $n,m$。  \n接下来 $n$ 行 $m$ 个整数，第 $i$ 行第 $j$ 个整数表示 $art_{i,j}$；  \n接下来 $n$ 行 $m$ 个整数，第 $i$ 行第 $j$ 个整数表示 $science_{i,j}$；  \n接下来 $n$ 行 $m$ 个整数，第 $i$ 行第 $j$ 个整数表示 $same\\text{\\underline{ }}art_{i,j}$；  \n接下来 $n$ 行 $m$ 个整数，第 $i$ 行第 $j$ 个整数表示 $same\\text{\\underline{ }}science_{i,j}$。", "outputFormat": "输出为一个整数，表示最大的满意值之和。", "hint": "### 样例说明\n\n1 表示选择文科，0 表示选择理科，方案如下：\n\n1  0  0  1\n\n0  1  0  0\n\n1  0  0  0\n\n### 数据范围\n\n$n,m\\leq 100$，读入数据均 $\\leq 500$。                                                                                                                                                              ", "locale": "zh-CN"}}}
{"pid": "P4314", "type": "P", "difficulty": 6, "samples": [["10\n-62 -83 -9 -70 79 -78 -31 40 -18 -5 \n20\nA 2 7\nA 4 4\nQ 4 4\nP 2 2 -74\nP 7 9 -71\nP 7 10 -8\nA 10 10\nA 5 9\nC 1 8 10\nQ 6 6\nQ 8 10\nA 1 7\nP 9 9 96\nA 5 5\nP 8 10 -53\nP 6 6 5\nA 10 10\nA 4 4\nQ 1 5\nP 4 9 -69", "79\n-70\n-70\n-5\n79\n10\n10\n79\n79\n-5\n10\n10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "矩阵乘法"], "title": "CPU 监控", "background": "Bob 家的机子很烂……真的很烂……\n\n以至于看视频或者跑邪恶的暴力程序的时候，由于 CPU 使用率持续过高而宕机。", "description": "Bob 需要一个程序来监视 CPU 使用率。这是一个很繁琐的过程，为了让问题更加简单，Bob 会慢慢列出今天会在用计算机时做什么事。 \n\nBob 会干很多事，除了跑暴力程序看视频之外，还会做出去玩玩和用鼠标乱点之类的事，甚至会一脚踢掉电源……这些事有的会让做这件事的这段时间内 CPU 使用率增加或减少一个值；有的事还会直接让 CPU 使用率变为一个值。 \n\n当然 Bob 会询问：在之前给出的事件影响下，CPU 在某段时间内，使用率最高是多少。有时候 Bob 还会好奇地询问，在某段时间内 CPU 曾经的最高使用率是多少。 \n\n为了使计算精确，使用率不用百分比而用一个整数表示。 \n\n不保证 Bob 的事件列表没有出莫名的问题，使得使用率为负………………", "inputFormat": "第一行一个正整数 $T$，表示 Bob 需要监视 CPU 的总时间。 \n\n然后第二行给出 $T$ 个数表示在你的监视程序执行之前，Bob 干的事让 CPU 在这段时间内每个时刻的使用率达已经达到了多少。 \n\n第三行给出一个整数 $E$，表示 Bob 需要做的事和询问的总数。 \n\n接下来 $E$ 行每行表示给出一个询问或者列出一条事件： \n\n- `Q X Y`：询问从 $X$ 到 $Y$ 这段时间内 CPU 最高使用率。\n- `A X Y`：询问从 $X$ 到 $Y$ 这段时间内之前列出的事件使 CPU 达到过的最高使用率。\n- `P X Y Z`：列出一个事件这个事件使得从 $X$ 到 $Y$ 这段时间内 CPU 使用率增加 $Z$。\n- `C X Y Z`：列出一个事件这个事件使得从 $X$ 到 $Y$ 这段时间内 CPU 使用率变为 $Z$。\n\n时间的单位为秒，使用率没有单位。 \n\n$X$ 和 $Y$ 均为正整数（$X\\le Y$），$Z$ 为一个整数。 \n\n从 $X$ 到 $Y$ 这段时间包含第 $X$ 秒和第 $Y$ 秒。 \n\n保证必要运算在有符号 32 位整数以内。", "outputFormat": "对于每个询问，输出一行一个整数回答。", "hint": "数据分布如下： \n\n第 $1,2$ 个数据保证 $T$ 和 $E$ 均小于等于 $10^3$。 \n\n第 $3,4$ 个数据保证只有 `Q` 类询问。\n\n第 $5,6$ 个数据保证只有 `C` 类事件。\n\n第 $7,8$ 个数据保证只有 `P` 类事件。\n\n对于 $100\\%$ 的数据，$1\\le T,E\\le 10^5$，$1\\le X\\le Y\\le T$，$-2^{31}\\leq Z\\lt 2^{31}$。", "locale": "zh-CN", "translations": {"en": {"title": "CPU Monitoring", "background": "Bob's machine is terrible... really terrible... to the point that when watching videos or running evil brute-force programs, it crashes due to sustained high CPU usage.", "description": "Bob needs a program to monitor CPU usage. This is a tedious task. To make it simpler, Bob will gradually list what he will do today while using the computer.\n\nBob does many things. Besides running brute-force programs and watching videos, he also goes out to play, randomly clicks the mouse, and might even kick out the power cord. Some actions increase or decrease the CPU usage by a value during the time they are performed; some actions directly set the CPU usage to a specific value.\n\nOf course, Bob will ask: under the influence of the previously listed events, what is the maximum CPU usage in a certain time interval. Sometimes Bob will also curiously ask: in a certain time interval, what is the highest CPU usage that has ever been reached.\n\nTo be precise, usage is represented by an integer instead of a percentage.\n\nIt is not guaranteed that Bob's event list is free of weird issues that could make the usage negative...\n\n# Description", "inputFormat": "The first line contains a positive integer $T$, the total time Bob needs to monitor the CPU.\n\nThe second line contains $T$ numbers indicating, before your monitoring program starts, the CPU usage that has already been reached at each moment within this time span.\n\nThe third line contains an integer $E$, the total number of actions and queries Bob will perform.\n\nEach of the next $E$ lines is either a query or an event:\n- `Q X Y`: Query the maximum current CPU usage from $X$ to $Y$ (under the effects of all events listed so far).\n- `A X Y`: Query the highest CPU usage that has ever been reached from $X$ to $Y$ (over the entire history up to now).\n- `P X Y Z`: List an event that increases the CPU usage by $Z$ from $X$ to $Y$.\n- `C X Y Z`: List an event that sets the CPU usage to $Z$ from $X$ to $Y$.\n\nTime is measured in seconds, and usage has no unit.\n\n$X$ and $Y$ are positive integers ($X\\le Y$), and $Z$ is an integer.\n\nThe interval from $X$ to $Y$ is inclusive of second $X$ and second $Y$.\n\nIt is guaranteed that all necessary operations fit within 32-bit signed integers.", "outputFormat": "For each query, output one integer on its own line as the answer.", "hint": "The testdata is distributed as follows:\n- In testdata 1 and 2, $T$ and $E$ are both at most $10^3$.\n- In testdata 3 and 4, there are only `Q` queries.\n- In testdata 5 and 6, there are only `C` events.\n- In testdata 7 and 8, there are only `P` events.\n\nFor $100\\%$ of the testdata, $1\\le T,E\\le 10^5$, $1\\le X\\le Y\\le T$, $-2^{31}\\leq Z\\lt 2^{31}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "CPU 监控", "background": "Bob 家的机子很烂……真的很烂……\n\n以至于看视频或者跑邪恶的暴力程序的时候，由于 CPU 使用率持续过高而宕机。", "description": "Bob 需要一个程序来监视 CPU 使用率。这是一个很繁琐的过程，为了让问题更加简单，Bob 会慢慢列出今天会在用计算机时做什么事。 \n\nBob 会干很多事，除了跑暴力程序看视频之外，还会做出去玩玩和用鼠标乱点之类的事，甚至会一脚踢掉电源……这些事有的会让做这件事的这段时间内 CPU 使用率增加或减少一个值；有的事还会直接让 CPU 使用率变为一个值。 \n\n当然 Bob 会询问：在之前给出的事件影响下，CPU 在某段时间内，使用率最高是多少。有时候 Bob 还会好奇地询问，在某段时间内 CPU 曾经的最高使用率是多少。 \n\n为了使计算精确，使用率不用百分比而用一个整数表示。 \n\n不保证 Bob 的事件列表没有出莫名的问题，使得使用率为负………………", "inputFormat": "第一行一个正整数 $T$，表示 Bob 需要监视 CPU 的总时间。 \n\n然后第二行给出 $T$ 个数表示在你的监视程序执行之前，Bob 干的事让 CPU 在这段时间内每个时刻的使用率达已经达到了多少。 \n\n第三行给出一个整数 $E$，表示 Bob 需要做的事和询问的总数。 \n\n接下来 $E$ 行每行表示给出一个询问或者列出一条事件： \n\n- `Q X Y`：询问从 $X$ 到 $Y$ 这段时间内 CPU 最高使用率。\n- `A X Y`：询问从 $X$ 到 $Y$ 这段时间内之前列出的事件使 CPU 达到过的最高使用率。\n- `P X Y Z`：列出一个事件这个事件使得从 $X$ 到 $Y$ 这段时间内 CPU 使用率增加 $Z$。\n- `C X Y Z`：列出一个事件这个事件使得从 $X$ 到 $Y$ 这段时间内 CPU 使用率变为 $Z$。\n\n时间的单位为秒，使用率没有单位。 \n\n$X$ 和 $Y$ 均为正整数（$X\\le Y$），$Z$ 为一个整数。 \n\n从 $X$ 到 $Y$ 这段时间包含第 $X$ 秒和第 $Y$ 秒。 \n\n保证必要运算在有符号 32 位整数以内。", "outputFormat": "对于每个询问，输出一行一个整数回答。", "hint": "数据分布如下： \n\n第 $1,2$ 个数据保证 $T$ 和 $E$ 均小于等于 $10^3$。 \n\n第 $3,4$ 个数据保证只有 `Q` 类询问。\n\n第 $5,6$ 个数据保证只有 `C` 类事件。\n\n第 $7,8$ 个数据保证只有 `P` 类事件。\n\n对于 $100\\%$ 的数据，$1\\le T,E\\le 10^5$，$1\\le X\\le Y\\le T$，$-2^{31}\\leq Z\\lt 2^{31}$。", "locale": "zh-CN"}}}
{"pid": "P4315", "type": "P", "difficulty": 5, "samples": [["4\n1 2 8\n1 3 7\n3 4 9\nMax 2 4\nCover 2 4 5\nAdd 1 4 10\nChange 1 16\nMax 2 4\nStop", "9\n16"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["线段树", "最近公共祖先 LCA", "树链剖分"], "title": "月下“毛景树”", "background": "毛毛虫经过及时的变形，最终逃过的一劫，离开了菜妈的菜园。毛毛虫经过千山万水，历尽千辛万苦，最后来到了小小的绍兴一中的校园里。", "description": "爬啊爬~爬啊爬~~毛毛虫爬到了一颗小小的“毛景树”下面，发现树上长着他最爱吃的毛毛果~~~ “毛景树”上有 $N$ 个节点和 $N-1$ 条树枝，但节点上是没有毛毛果的，毛毛果都是长在树枝上的。但是这棵“毛景树”有着神奇的魔力，他能改变树枝上毛毛果的个数：\n\n- `Change k w`：将第 $k$ 条树枝上毛毛果的个数改变为 $w$ 个。\n- `Cover u v w`：将节点 $u$ 与节点 $v$ 之间的树枝上毛毛果的个数都改变为 $w$ 个。\n- `Add u v w`：将节点 $u$ 与节点 $v$ 之间的树枝上毛毛果的个数都增加 $w$ 个。\n\n由于毛毛虫很贪，于是他会有如下询问：\n\n-  `Max u v`：询问节点 $u$ 与节点 $v$ 之间树枝上毛毛果个数最多有多少个。", "inputFormat": "第一行一个正整数 $N$。\n\n接下来 $N-1$ 行，每行三个正整数 $U_i,V_i$ 和 $W_i$，第 $i+1$ 行描述第 $i$ 条树枝。表示第 $i$ 条树枝连接节点 $U_i$ 和节点 $V_i$，树枝上有 $W_i$ 个毛毛果。 接下来是操作和询问，以 `Stop` 结束。", "outputFormat": "对于毛毛虫的每个询问操作，输出一个答案。", "hint": "对于全部数据，$1\\le N\\le 10^5$，操作和询问数目不超过 $10^5$。\n\n保证在任意时刻，所有树枝上毛毛果的个数都不会超过 $10^9$ 个。", "locale": "zh-CN", "translations": {"en": {"title": "Moonlit \"Maojing Tree\"", "background": "After a timely transformation, the caterpillar narrowly escaped and left the vegetable garden. It traveled over mountains and rivers, through countless hardships, and finally arrived at the campus of Shaoxing No. 1 High School.", "description": "Crawl, crawl~ crawl, crawl~~ The caterpillar crawled under a small \"Maojing Tree\" and found that it bore its favorite maomao fruits. The \"Maojing Tree\" has $N$ nodes and $N-1$ edges. There are no maomao fruits on the nodes; all maomao fruits grow on the edges. This \"Maojing Tree\" has magical power: it can change the number of maomao fruits on its edges:\n\n- `Change k w`: Set the number of maomao fruits on the $k$-th edge to $w$.\n- `Cover u v w`: Set the number of maomao fruits on every edge along the path between nodes $u$ and $v$ to $w$.\n- `Add u v w`: Increase by $w$ the number of maomao fruits on every edge along the path between nodes $u$ and $v$.\n\nSince the caterpillar is greedy, it will ask the following query:\n\n- `Max u v`: Query the maximum number of maomao fruits among all edges along the path between nodes $u$ and $v$.", "inputFormat": "The first line contains a positive integer $N$.\n\nThe next $N-1$ lines each contain three positive integers $U_i$, $V_i$, and $W_i$. The $(i+1)$-th line describes the $i$-th edge: it connects nodes $U_i$ and $V_i$, and there are $W_i$ maomao fruits on that edge.\n\nThen follow the operations and queries, one per line, terminated by a single line `Stop`.", "outputFormat": "For each `Max` query, output its answer on a separate line.", "hint": "For all testdata, $1 \\le N \\le 10^5$, and the total number of operations and queries does not exceed $10^5$.\n\nIt is guaranteed that at any time, the number of maomao fruits on every edge does not exceed $10^9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "月下“毛景树”", "background": "毛毛虫经过及时的变形，最终逃过的一劫，离开了菜妈的菜园。毛毛虫经过千山万水，历尽千辛万苦，最后来到了小小的绍兴一中的校园里。", "description": "爬啊爬~爬啊爬~~毛毛虫爬到了一颗小小的“毛景树”下面，发现树上长着他最爱吃的毛毛果~~~ “毛景树”上有 $N$ 个节点和 $N-1$ 条树枝，但节点上是没有毛毛果的，毛毛果都是长在树枝上的。但是这棵“毛景树”有着神奇的魔力，他能改变树枝上毛毛果的个数：\n\n- `Change k w`：将第 $k$ 条树枝上毛毛果的个数改变为 $w$ 个。\n- `Cover u v w`：将节点 $u$ 与节点 $v$ 之间的树枝上毛毛果的个数都改变为 $w$ 个。\n- `Add u v w`：将节点 $u$ 与节点 $v$ 之间的树枝上毛毛果的个数都增加 $w$ 个。\n\n由于毛毛虫很贪，于是他会有如下询问：\n\n-  `Max u v`：询问节点 $u$ 与节点 $v$ 之间树枝上毛毛果个数最多有多少个。", "inputFormat": "第一行一个正整数 $N$。\n\n接下来 $N-1$ 行，每行三个正整数 $U_i,V_i$ 和 $W_i$，第 $i+1$ 行描述第 $i$ 条树枝。表示第 $i$ 条树枝连接节点 $U_i$ 和节点 $V_i$，树枝上有 $W_i$ 个毛毛果。 接下来是操作和询问，以 `Stop` 结束。", "outputFormat": "对于毛毛虫的每个询问操作，输出一个答案。", "hint": "对于全部数据，$1\\le N\\le 10^5$，操作和询问数目不超过 $10^5$。\n\n保证在任意时刻，所有树枝上毛毛果的个数都不会超过 $10^9$ 个。", "locale": "zh-CN"}}}
{"pid": "P4316", "type": "P", "difficulty": 4, "samples": [["4 4 \n1 2 1 \n1 3 2 \n2 3 3 \n3 4 4", "7.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递归", "拓扑排序", "期望", "栈"], "title": "绿豆蛙的归宿", "background": "随着新版百度空间的上线，Blog 宠物绿豆蛙完成了它的使命，去寻找它新的归宿。", "description": "给出张 $n$ 个点 $m$ 条边的有向无环图，起点为 $1$，终点为 $n$，每条边都有一个长度，并且从起点出发能够到达所有的点，所有的点也都能够到达终点。\n\n绿豆蛙从起点出发，走向终点。 到达每一个顶点时，如果该节点有 $k$ 条出边，绿豆蛙可以选择任意一条边离开该点，并且走向每条边的概率为 $\\frac{1}{k}$。现在绿豆蛙想知道，从起点走到终点的所经过的路径总长度期望是多少？", "inputFormat": "输入的第一行是两个整数，分别代表图的点数 $n$ 和边数 $m$。\n\n第 $2$ 到第 $(m + 1)$ 行，每行有三个整数 $u, v, w$，代表存在一条从 $u$ 指向 $v$ 长度为 $w$ 的有向边。", "outputFormat": "输出一行一个实数代表答案，四舍五入保留两位小数。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\leq 10^2$。\n- 对于 $40\\%$ 的数据，保证 $n \\leq 10^3$。\n- 对于 $60\\%$ 的数据，保证 $n \\leq 10^4$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 2 \\times n$，$1 \\leq u, v \\leq n$，$0 \\leq w \\leq 10^9$，给出的图无重边和自环。", "locale": "zh-CN", "translations": {"en": {"title": "Green Bean Frog's Home", "background": "With the launch of the new Baidu Space, the blog pet Green Bean Frog has completed its mission and is looking for its new home.", "description": "You are given a directed acyclic graph with $n$ vertices and $m$ edges. The start vertex is $1$, and the terminal vertex is $n$. Each edge has a length. From the start, every vertex is reachable, and every vertex can reach the terminal.\n\nGreen Bean Frog starts from the start and moves to the terminal. Upon arriving at a vertex that has $k$ outgoing edges, the frog may choose any outgoing edge to leave the vertex, and each edge is chosen with probability $\\frac{1}{k}$. What is the expected total length of the path from the start to the terminal?", "inputFormat": "The first line contains two integers representing the number of vertices $n$ and the number of edges $m$.\n\nLines $2$ through $(m + 1)$ each contain three integers $u, v, w$, indicating there is a directed edge from $u$ to $v$ with length $w$.", "outputFormat": "Output a single real number: the answer, rounded to two decimal places.", "hint": "- Constraints\n  - For $20\\%$ of the testdata, $n \\leq 10^2$.\n  - For $40\\%$ of the testdata, $n \\leq 10^3$.\n  - For $60\\%$ of the testdata, $n \\leq 10^4$.\n  - For $100\\%$ of the testdata, $1 \\leq n \\leq 10^5$, $1 \\leq m \\leq 2 \\times n$, $1 \\leq u, v \\leq n$, $0 \\leq w \\leq 10^9$, and the graph has no parallel edges or self-loops.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "绿豆蛙的归宿", "background": "随着新版百度空间的上线，Blog 宠物绿豆蛙完成了它的使命，去寻找它新的归宿。", "description": "给出张 $n$ 个点 $m$ 条边的有向无环图，起点为 $1$，终点为 $n$，每条边都有一个长度，并且从起点出发能够到达所有的点，所有的点也都能够到达终点。\n\n绿豆蛙从起点出发，走向终点。 到达每一个顶点时，如果该节点有 $k$ 条出边，绿豆蛙可以选择任意一条边离开该点，并且走向每条边的概率为 $\\frac{1}{k}$。现在绿豆蛙想知道，从起点走到终点的所经过的路径总长度期望是多少？", "inputFormat": "输入的第一行是两个整数，分别代表图的点数 $n$ 和边数 $m$。\n\n第 $2$ 到第 $(m + 1)$ 行，每行有三个整数 $u, v, w$，代表存在一条从 $u$ 指向 $v$ 长度为 $w$ 的有向边。", "outputFormat": "输出一行一个实数代表答案，四舍五入保留两位小数。", "hint": "#### 数据规模与约定\n\n- 对于 $20\\%$ 的数据，保证 $n \\leq 10^2$。\n- 对于 $40\\%$ 的数据，保证 $n \\leq 10^3$。\n- 对于 $60\\%$ 的数据，保证 $n \\leq 10^4$。\n- 对于 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq m \\leq 2 \\times n$，$1 \\leq u, v \\leq n$，$0 \\leq w \\leq 10^9$，给出的图无重边和自环。", "locale": "zh-CN"}}}
{"pid": "P4317", "type": "P", "difficulty": 5, "samples": [["3", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["枚举", "数位 DP", "进制"], "title": "花神的数论题", "background": "众所周知，花神多年来凭借无边的神力狂虐各大 OJ、OI、CF、TC …… 当然也包括 CH 啦。", "description": "话说花神这天又来讲课了。课后照例有超级难的神题啦…… 我等蒟蒻又遭殃了。 花神的题目是这样的：设  $\\text{sum}(i)$  表示  $i$  的二进制表示中  $1$  的个数。给出一个正整数  $N$  ，花神要问你  $\\prod_{i=1}^{N}\\text{sum}(i)$ ，也就是  $\\text{sum}(1)\\sim\\text{sum}(N)$  的乘积。", "inputFormat": "一个正整数 $N$。", "outputFormat": "一个数，答案模 $10000007$ 的值。", "hint": "对于 $100\\%$ 的数据，$1\\le N\\le 10^{15}$。", "locale": "zh-CN", "translations": {"en": {"title": "Huashen's Number Theory Problem", "background": "As is well known, for many years Huashen has crushed various OJ, OI, CF, TC ... of course including CH.", "description": "One day, Huashen came to give another lecture. As usual, there was a super hard problem afterwards... We weaklings suffered again. The problem is as follows: Let $\\text{sum}(i)$ denote the number of $1$ s in the binary representation of $i$. Given a positive integer $N$, Huashen asks you to compute $\\prod_{i=1}^{N}\\text{sum}(i)$, that is, the product of $\\text{sum}(1)\\sim\\text{sum}(N)$.", "inputFormat": "A positive integer $N$.", "outputFormat": "One integer: the answer modulo $10000007$.", "hint": "Constraints: For $100\\%$ of the testdata, $1 \\le N \\le 10^{15}$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "花神的数论题", "background": "众所周知，花神多年来凭借无边的神力狂虐各大 OJ、OI、CF、TC …… 当然也包括 CH 啦。", "description": "话说花神这天又来讲课了。课后照例有超级难的神题啦…… 我等蒟蒻又遭殃了。 花神的题目是这样的：设  $\\text{sum}(i)$  表示  $i$  的二进制表示中  $1$  的个数。给出一个正整数  $N$  ，花神要问你  $\\prod_{i=1}^{N}\\text{sum}(i)$ ，也就是  $\\text{sum}(1)\\sim\\text{sum}(N)$  的乘积。", "inputFormat": "一个正整数 $N$。", "outputFormat": "一个数，答案模 $10000007$ 的值。", "hint": "对于 $100\\%$ 的数据，$1\\le N\\le 10^{15}$。", "locale": "zh-CN"}}}
{"pid": "P4318", "type": "P", "difficulty": 6, "samples": [["4 \n1 \n13 \n100 \n1234567", "1 \n19 \n163 \n2030745"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["二分", "素数判断,质数,筛法", "莫比乌斯反演", "容斥原理", "分块", "杜教筛"], "title": "完全平方数", "background": null, "description": "小 X 自幼就很喜欢数。但奇怪的是，他十分讨厌除了 $1$ 之外的完全平方数。他觉得这些数看起来很令人难受。由此，他也讨厌所有是这些完全平方数的正整数倍的数。然而这丝毫不影响他对其他数的热爱。\n\n这天是小 X 的生日，小 W 想送一个数给他作为生日礼物。当然他不能送一个小 X 讨厌的数。他列出了所有小 X 不讨厌的数，然后选取了第 $K$ 个数送给了小 X。小 X 很开心地收下了。\n\n然而现在小 W 却记不起送给小 X 的是哪个数了。你能帮他一下吗？", "inputFormat": "包含多组测试数据。文件第一行有一个整数 $T$，表示测试数据的组数。\n第 $2$ 至第 $T+1$ 行每行有一个整数 $K_i$，描述一组数据，含义如题目中所描述。", "outputFormat": "含 $T$ 行，分别对每组数据作出回答。第 $i$ 行输出相应的第 $K_i$ 个不是完全平方数的正整数倍的数。", "hint": "对于 50% 的数据有 $1\\le K_i\\le10^5$，\n对于 100% 的数据有 $1\\le K_i\\le10^9,T\\le50$", "locale": "zh-CN", "translations": {"en": {"title": "Perfect Squares", "background": "", "description": "Xiao X has liked numbers since childhood. Strangely, he hates perfect squares other than $1$. He finds those numbers unpleasant to look at. As a result, he also hates every positive integer that is a multiple of these perfect squares. However, this does not affect his love for all the other numbers.\n\nIt is Xiao X’s birthday, and Xiao W wants to give him a number as a gift. Of course, he cannot give a number that Xiao X hates. He listed all the numbers that Xiao X does not hate and then chose the $K$-th number to give to Xiao X. Xiao X happily accepted it.\n\nNow Xiao W cannot remember which number he gave to Xiao X. Can you help him?", "inputFormat": "Multiple test cases. The first line contains an integer $T$, the number of test cases.  \nFrom the $2$-nd to the $(T+1)$-th lines, each line contains an integer $K_i$, describing one test case as stated above.", "outputFormat": "Output $T$ lines, one answer per test case. In the $i$-th line, output the $K_i$-th positive integer that is not a multiple of any perfect square greater than $1$.", "hint": "For 50% of the testdata, $1 \\le K_i \\le 10^5$.  \nFor 100% of the testdata, $1 \\le K_i \\le 10^9$, $T \\le 50$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "完全平方数", "background": null, "description": "小 X 自幼就很喜欢数。但奇怪的是，他十分讨厌除了 $1$ 之外的完全平方数。他觉得这些数看起来很令人难受。由此，他也讨厌所有是这些完全平方数的正整数倍的数。然而这丝毫不影响他对其他数的热爱。\n\n这天是小 X 的生日，小 W 想送一个数给他作为生日礼物。当然他不能送一个小 X 讨厌的数。他列出了所有小 X 不讨厌的数，然后选取了第 $K$ 个数送给了小 X。小 X 很开心地收下了。\n\n然而现在小 W 却记不起送给小 X 的是哪个数了。你能帮他一下吗？", "inputFormat": "包含多组测试数据。文件第一行有一个整数 $T$，表示测试数据的组数。\n第 $2$ 至第 $T+1$ 行每行有一个整数 $K_i$，描述一组数据，含义如题目中所描述。", "outputFormat": "含 $T$ 行，分别对每组数据作出回答。第 $i$ 行输出相应的第 $K_i$ 个不是完全平方数的正整数倍的数。", "hint": "对于 50% 的数据有 $1\\le K_i\\le10^5$，\n对于 100% 的数据有 $1\\le K_i\\le10^9,T\\le50$", "locale": "zh-CN"}}}
