{"pid": "P1341", "type": "P", "difficulty": 4, "samples": [["4\naZ\ntZ\nXt\naX", "XaZtX"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "福建省历届夏令营", "深度优先搜索 DFS", "欧拉回路"], "title": "无序字母对", "background": "", "description": "给定 $n$ 个各不相同的无序字母对（区分大小写，无序即字母对中的两个字母可以位置颠倒）。请构造一个有 $(n+1)$ 个字母的字符串使得每个字母对都在这个字符串中出现。", "inputFormat": "第一行输入一个正整数 $n$。\n\n第二行到第 $(n+1)$ 行每行两个字母，表示这两个字母需要相邻。", "outputFormat": "输出满足要求的字符串。\n\n如果没有满足要求的字符串，请输出 `No Solution`。\n\n如果有多种方案，请输出字典序最小的方案（即满足前面的字母的 ASCII 编码尽可能小）。", "hint": "不同的无序字母对个数有限，$n$ 的规模可以通过计算得到。", "locale": "zh-CN", "translations": {"en": {"title": "Unordered Letter Pairs", "background": "", "description": "Given $n$ distinct unordered letter pairs (case-sensitive; unordered means the two letters in a pair can appear in either order), construct a string with $(n+1)$ letters such that each letter pair appears in this string.", "inputFormat": "The first line contains a positive integer $n$.\n\nEach of the next $n$ lines contains two letters, indicating that these two letters must be adjacent.", "outputFormat": "Output a string that satisfies the requirement.\n\nIf no such string exists, output `No Solution`.\n\nIf multiple solutions exist, output the lexicographically smallest one (i.e., the earlier letters should have smaller ASCII codes).", "hint": "The number of different unordered letter pairs is finite, and the scale of $n$ can be calculated.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "无序字母对", "background": "", "description": "给定 $n$ 个各不相同的无序字母对（区分大小写，无序即字母对中的两个字母可以位置颠倒）。请构造一个有 $(n+1)$ 个字母的字符串使得每个字母对都在这个字符串中出现。", "inputFormat": "第一行输入一个正整数 $n$。\n\n第二行到第 $(n+1)$ 行每行两个字母，表示这两个字母需要相邻。", "outputFormat": "输出满足要求的字符串。\n\n如果没有满足要求的字符串，请输出 `No Solution`。\n\n如果有多种方案，请输出字典序最小的方案（即满足前面的字母的 ASCII 编码尽可能小）。", "hint": "不同的无序字母对个数有限，$n$ 的规模可以通过计算得到。", "locale": "zh-CN"}}}
{"pid": "P1342", "type": "P", "difficulty": 3, "samples": [["4 6\n1 2 10\n2 1 60\n1 3 20\n3 4 10\n2 4 5\n4 1 50", "210 "]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000]}, "tags": ["图论", "1998", "福建省历届夏令营", "最短路", "ICPC", "CERC"], "title": "[CERC1998] 请柬", "background": "在电视时代，没有多少人观看戏剧表演。Malidinesia 古董喜剧演员意识到这一事实，他们想宣传剧院，尤其是古色古香的喜剧片。", "description": "他们已经打印了请帖和所有必要的信息和计划。许多学生被雇来分发这些请柬。每个学生志愿者被指定一个确切的公共汽车站，他或她将留在那里一整天，邀请人们参与。\n\n这里的公交系统是非常特殊的：共有 $n$ 个站点和 $m$ 个线路，所有的线路都是单向的，连接两个站点。公共汽车离开起始点，到达目的地之后又空车返回起始点。\n\n学生每天早上从总部所在的 $1$ 号站点出发，乘公交车到一个预定的站点邀请乘客。每个站点都被安排了一名学生。在一天结束的时候，所有的学生都回到总部。现在需要知道的是，学生所需的公交费用的总和最小是多少。", "inputFormat": "输入的第一行是两个整数，代表站点个数 $n$ 和线路条数 $m$。\n\n第 $2$ 到第 $(m + 1)$ 行，每行三个整数 $u, v, w$，代表存在一条从 $u$ 出发到达 $v$ 的线路，费用为 $w$。", "outputFormat": "输出一行一个整数，表示最小费用。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证：\n\n- $1 \\leq n, m \\leq 10^6$。\n- $1 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^9$。\n- 从 $1$ 出发可以到达所有的站点。", "locale": "zh-CN", "translations": {"en": {"title": "[CERC1998] Invitation Cards", "background": "In the television era, few people watch stage plays. The antique comedians of Malidinesia noticed this and want to promote the theater, especially the quaint comedies.", "description": "They have printed invitation cards and all the necessary information and plans. Many students are hired to distribute these invitations. Each student volunteer is assigned exactly one bus stop where he or she will stay for the whole day, inviting people to participate.\n\nThe bus system here is very special: there are $n$ stops and $m$ routes; all routes are one-way, connecting two stops. A bus departs from its origin and, after reaching its destination, returns empty to its origin.\n\nEach morning, the students depart from the headquarters at stop $1$, take buses to their assigned stop, and invite passengers there. Exactly one student is scheduled at each stop. At the end of the day, all students return to the headquarters. Now you need to find the minimal possible sum of bus fares required for the students.", "inputFormat": "The first line contains two integers $n$ and $m$.\n\nLines $2$ through $m + 1$ each contain three integers $u, v, w$, indicating that there is a one-way route from $u$ to $v$ with fare $w$.", "outputFormat": "Output a single line with one integer, the minimal total fare.", "hint": "Constraints\n\nFor $100\\%$ of the testdata, it is guaranteed that:\n- $1 \\leq n, m \\leq 10^6$.\n- $1 \\leq u, v \\leq n$, $1 \\leq w \\leq 10^9$.\n- Every stop is reachable from $1$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[CERC1998] 请柬", "background": "在电视时代，没有多少人观看戏剧表演。Malidinesia 古董喜剧演员意识到这一事实，他们想宣传剧院，尤其是古色古香的喜剧片。", "description": "他们已经打印了请帖和所有必要的信息和计划。许多学生被雇来分发这些请柬。每个学生志愿者被指定一个确切的公共汽车站，他或她将留在那里一整天，邀请人们参与。\n\n这里的公交系统是非常特殊的：共有 $n$ 个站点和 $m$ 个线路，所有的线路都是单向的，连接两个站点。公共汽车离开起始点，到达目的地之后又空车返回起始点。\n\n学生每天早上从总部所在的 $1$ 号站点出发，乘公交车到一个预定的站点邀请乘客。每个站点都被安排了一名学生。在一天结束的时候，所有的学生都回到总部。现在需要知道的是，学生所需的公交费用的总和最小是多少。", "inputFormat": "输入的第一行是两个整数，代表站点个数 $n$ 和线路条数 $m$。\n\n第 $2$ 到第 $(m + 1)$ 行，每行三个整数 $u, v, w$，代表存在一条从 $u$ 出发到达 $v$ 的线路，费用为 $w$。", "outputFormat": "输出一行一个整数，表示最小费用。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证：\n\n- $1 \\leq n, m \\leq 10^6$。\n- $1 \\leq u, v \\leq n$，$1 \\leq w \\leq 10^9$。\n- 从 $1$ 出发可以到达所有的站点。", "locale": "zh-CN"}}}
{"pid": "P1343", "type": "P", "difficulty": 5, "samples": [["6 7 7\n1 2 1\n1 4 2\n2 3 1\n4 5 1\n4 3 1\n3 6 2\n5 6 1\n", "3 3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "福建省历届夏令营", "网络流"], "title": "地震逃生", "background": null, "description": "汶川地震发生时，四川\\*\\*中学正在上课，一看地震发生，老师们立刻带领 $x$ 名学生逃跑，整个学校可以抽象地看成一个有向图，图中有 $n$ 个点，$m$ 条边。$1$ 号点为教室，$n$ 号点为安全地带，每条边都只能容纳一定量的学生，超过楼就要倒塌，由于人数太多，校长决定让同学们分成几批逃生，只有第一批学生全部逃生完毕后，第二批学生才能从 $1$ 号点出发逃生，现在请你帮校长算算，每批最多能运出多少个学生，$x$ 名学生分几批才能运完。", "inputFormat": "第一行三个整数 $n,m,x$；  \n以下 $m$ 行，每行三个整数 $a,b,c$（$1\\leq a,b\\leq n$，$0\\leq c\\leq x$）描述一条边，分别代表从 $a$ 点到 $b$ 点有一条边，且可容纳 $c$ 名学生。", "outputFormat": "如果无法到达目的地（$n$ 号点），输出 `Orz Ni Jinan Saint Cow!`。否则输出两个整数，分别表示每批最多能运出多少个学生，$x$ 名学生分几批才能运完。", "hint": "**【注释】**\n\n比如有图\n\n```plain\n1 2 100\n2 3 1\n```\n\n$100$ 个学生先冲到 $2$ 号点，然后一个一个慢慢沿 $2 \\to 3$ 边走过去。\n\n18 神牛规定这样是不可以的……\n\n也就是说，每批学生必须同时从起点出发，并且同时到达终点。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$0 \\le x < 2^{31}$，$2 \\le n \\le 200$，$1 \\le m \\le 2000$。", "locale": "zh-CN", "translations": {"en": {"title": "Earthquake Escape", "background": "", "description": "When the Wenchuan earthquake struck, Sichuan ** High School was in class. As soon as the earthquake occurred, the teachers immediately led $x$ students to evacuate. The whole school can be abstracted as a directed graph with $n$ nodes and $m$ edges. Node $1$ is the classroom, and node $n$ is the safe zone. Each edge can only accommodate a certain number of students; if exceeded, the building would collapse. Due to the large number of people, the principal decided to evacuate in several batches. Only after the first batch has completely evacuated may the second batch start from node $1$. Please help the principal calculate the maximum number of students that can be transported in each batch, and how many batches are needed to transport all $x$ students.", "inputFormat": "The first line contains three integers $n, m, x$.  \nThe next $m$ lines each contain three integers $a, b, c$ ($1 \\le a, b \\le n$, $0 \\le c \\le x$), describing an edge: there is an edge from node $a$ to node $b$ that can accommodate $c$ students.", "outputFormat": "If it is impossible to reach the destination (node $n$), output `Orz Ni Jinan Saint Cow!`. Otherwise, output two integers: the maximum number of students that can be transported in each batch, and the number of batches needed to transport all $x$ students.", "hint": "[Note]\n\nFor example, consider the graph\n\n```plain\n1 2 100\n2 3 1\n```\n\n$100$ students first rush to node $2$, and then go along edge $2 \\to 3$ one by one.\n\nAccording to the 2018 \"Shen Niu\" rules, this is not allowed.\n\nIn other words, each batch of students must depart from the source simultaneously and arrive at the sink simultaneously.\n\n[Constraints]\n\nFor $100\\%$ of the testdata, $0 \\le x < 2^{31}$, $2 \\le n \\le 200$, $1 \\le m \\le 2000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "地震逃生", "background": null, "description": "汶川地震发生时，四川\\*\\*中学正在上课，一看地震发生，老师们立刻带领 $x$ 名学生逃跑，整个学校可以抽象地看成一个有向图，图中有 $n$ 个点，$m$ 条边。$1$ 号点为教室，$n$ 号点为安全地带，每条边都只能容纳一定量的学生，超过楼就要倒塌，由于人数太多，校长决定让同学们分成几批逃生，只有第一批学生全部逃生完毕后，第二批学生才能从 $1$ 号点出发逃生，现在请你帮校长算算，每批最多能运出多少个学生，$x$ 名学生分几批才能运完。", "inputFormat": "第一行三个整数 $n,m,x$；  \n以下 $m$ 行，每行三个整数 $a,b,c$（$1\\leq a,b\\leq n$，$0\\leq c\\leq x$）描述一条边，分别代表从 $a$ 点到 $b$ 点有一条边，且可容纳 $c$ 名学生。", "outputFormat": "如果无法到达目的地（$n$ 号点），输出 `Orz Ni Jinan Saint Cow!`。否则输出两个整数，分别表示每批最多能运出多少个学生，$x$ 名学生分几批才能运完。", "hint": "**【注释】**\n\n比如有图\n\n```plain\n1 2 100\n2 3 1\n```\n\n$100$ 个学生先冲到 $2$ 号点，然后一个一个慢慢沿 $2 \\to 3$ 边走过去。\n\n18 神牛规定这样是不可以的……\n\n也就是说，每批学生必须同时从起点出发，并且同时到达终点。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$0 \\le x < 2^{31}$，$2 \\le n \\le 200$，$1 \\le m \\le 2000$。", "locale": "zh-CN"}}}
{"pid": "P1344", "type": "P", "difficulty": 6, "samples": [["4 5\r\n1 3 100\r\n3 2 50\r\n2 4 60\r\n1 2 40\r\n2 3 80\r\n", "60 1\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["图论", "USACO", "最小割"], "title": "[USACO4.4] 追查坏牛奶 Pollutant Control", "background": "", "description": "你第一天接手三鹿牛奶公司就发生了一件倒霉的事情：公司不小心发送了一批有三聚氰胺的牛奶。\n\n很不幸，你发现这件事的时候，有三聚氰胺的牛奶已经进入了送货网。这个送货网很大，而且关系复杂。你知道这批牛奶要发给哪个零售商，但是要把这批牛奶送到他手中有许多种途径。\n\n送货网由一些仓库和运输卡车组成，每辆卡车都在各自固定的两个仓库之间单向运输牛奶。在追查这些有三聚氰胺的牛奶的时候，有必要保证它不被送到零售商手里，所以必须使某些运输卡车停止运输，但是停止每辆卡车都会有一定的经济损失。\n\n你的任务是，在保证坏牛奶不送到零售商的前提下，制定出停止卡车运输的方案，使损失最小。\n", "inputFormat": "第 $1$ 行两个整数 $N$、$M$，$N$ 表示仓库的数目，$M$ 表示运输卡车的数量。仓库 $1$ 代表发货工厂，仓库 $N$ 代表有三聚氰胺的牛奶要发往的零售商。\n\n第 $2\\sim M+1$ 行，每行 $3$ 个整数 $S_i$、$E_i$ 和 $C_i$。其中 $S_i$、$E_i$ 分别表示这辆卡车的出发仓库和目的仓库。$C_i$ 表示让这辆卡车停止运输的损失。\n", "outputFormat": "两个整数 $C$ 和 $T$，$C$ 表示最小的损失，$T$ 表示在损失最小的前提下，最少要停止的卡车数。", "hint": "对于 $100 \\%$ 的数据，满足 $2 \\le N \\le 32$，$0 \\le M \\le 10^3$，$1 \\le S_i \\le N$，$1 \\le E_i \\le N$，$0 \\le C_i \\le 2 \\times 10^6$。\n\n题目翻译来自 NOCOW。\n\nUSACO Training Section 4.4", "locale": "zh-CN", "translations": {"en": {"title": "[USACO4.4] Pollutant Control", "background": null, "description": "On your first day at Sanlu Milk Company, something unlucky happens: the company accidentally shipped a batch of milk containing melamine.\n\nUnfortunately, by the time you discovered this, the melamine-tainted milk had already entered the delivery network. The network is large and complex. You know which retailer this batch is destined for, but there are many different routes to deliver it.\n\nThe delivery network consists of warehouses and transport trucks. Each truck carries milk in one direction between a fixed pair of warehouses. To trace and block the tainted milk, you must ensure it is not delivered to the retailer, so some transport trucks must be stopped. However, stopping each truck incurs a certain monetary loss.\n\nYour task is to decide which trucks to stop so that the tainted milk cannot reach the retailer, while minimizing the total loss.", "inputFormat": "The first line contains two integers $N$ and $M$. $N$ is the number of warehouses, and $M$ is the number of transport trucks. Warehouse $1$ is the factory (source), and warehouse $N$ is the retailer that the melamine-tainted milk is destined for.\n\nLines $2\\sim M+1$ each contain three integers $S_i$, $E_i$, and $C_i$. Here, $S_i$ and $E_i$ are the starting and ending warehouse of this truck, respectively. $C_i$ is the loss incurred by stopping this truck.", "outputFormat": "Output two integers $C$ and $T$. $C$ is the minimum total loss, and, among all solutions with minimum loss, $T$ is the minimum number of trucks that must be stopped.", "hint": "Constraints: For $100 \\%$ of the testdata, $2 \\le N \\le 32$, $0 \\le M \\le 10^3$, $1 \\le S_i \\le N$, $1 \\le E_i \\le N$, $0 \\le C_i \\le 2 \\times 10^6$.\n\nTranslation of the problem statement is from NOCOW.\n\nUSACO Training Section 4.4.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO4.4] 追查坏牛奶 Pollutant Control", "background": "", "description": "你第一天接手三鹿牛奶公司就发生了一件倒霉的事情：公司不小心发送了一批有三聚氰胺的牛奶。\n\n很不幸，你发现这件事的时候，有三聚氰胺的牛奶已经进入了送货网。这个送货网很大，而且关系复杂。你知道这批牛奶要发给哪个零售商，但是要把这批牛奶送到他手中有许多种途径。\n\n送货网由一些仓库和运输卡车组成，每辆卡车都在各自固定的两个仓库之间单向运输牛奶。在追查这些有三聚氰胺的牛奶的时候，有必要保证它不被送到零售商手里，所以必须使某些运输卡车停止运输，但是停止每辆卡车都会有一定的经济损失。\n\n你的任务是，在保证坏牛奶不送到零售商的前提下，制定出停止卡车运输的方案，使损失最小。\n", "inputFormat": "第 $1$ 行两个整数 $N$、$M$，$N$ 表示仓库的数目，$M$ 表示运输卡车的数量。仓库 $1$ 代表发货工厂，仓库 $N$ 代表有三聚氰胺的牛奶要发往的零售商。\n\n第 $2\\sim M+1$ 行，每行 $3$ 个整数 $S_i$、$E_i$ 和 $C_i$。其中 $S_i$、$E_i$ 分别表示这辆卡车的出发仓库和目的仓库。$C_i$ 表示让这辆卡车停止运输的损失。\n", "outputFormat": "两个整数 $C$ 和 $T$，$C$ 表示最小的损失，$T$ 表示在损失最小的前提下，最少要停止的卡车数。", "hint": "对于 $100 \\%$ 的数据，满足 $2 \\le N \\le 32$，$0 \\le M \\le 10^3$，$1 \\le S_i \\le N$，$1 \\le E_i \\le N$，$0 \\le C_i \\le 2 \\times 10^6$。\n\n题目翻译来自 NOCOW。\n\nUSACO Training Section 4.4", "locale": "zh-CN"}}}
{"pid": "P1345", "type": "P", "difficulty": 5, "samples": [["3 2 1 2\n1 3\n2 3", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "USACO", "福建省历届夏令营", "网络流", "最小割"], "title": "[USACO5.4] 奶牛的电信 Telecowmunication", "background": "", "description": "农夫约翰的奶牛们喜欢通过电邮保持联系，于是她们建立了一个奶牛电脑网络，以便互相交流。这些机器用如下的方式发送电邮：如果存在一个由 $c$ 台电脑组成的序列 $a_1,a_2,\\cdots ,a_c$，且 $a_1$ 与 $a_2$ 相连，$a_2$ 与 $a_3$ 相连，等等。那么电脑 $a_1$ 和 $a_c$ 就可以互发电邮。\n\n很不幸，有时候奶牛会不小心踩到电脑上，农夫约翰的车也可能碾过电脑，这台倒霉的电脑就会坏掉。这意味着这台电脑不能再发送电邮了，于是与这台电脑相关的连接也就不可用了。\n\n有两头奶牛就想：如果我们两个不能互发电邮，至少需要坏掉多少台电脑呢？请注意，$c_1,c_2$ 不能被破坏。请编写一个程序为她们计算这个最小值。\n\n以如下网络为例：\n\n```plain\n   1*\n  /\n 3 - 2*\n```\n\n这张图画的是有 $2$ 条连接的 $3$ 台电脑。我们想要在电脑 $1$ 和 $2$ 之间传送信息。电脑 $1$ 与 $3$，$2$ 与 $3$ 直接连通。如果电脑 $3$ 坏了，电脑 $1$ 与 $2$ 便不能互发信息了。", "inputFormat": "第一行：四个由空格分隔的整数：$N,M,c_1,c_2$。$N$ 是电脑总数，电脑由 $1$ 到 $N$ 编号。$M$ 是电脑之间连接的总数。后面的两个整数 $c_1$ 和 $c_2$ 是上述两头奶牛使用的电脑编号。连接没有重复且均为双向的（即如果 $c_1$ 与 $c_2$ 相连，那么 $c_2$ 与 $c_1$ 也相连）。两台电脑之间至多有一条连接。电脑 $c_1$ 和 $c_2$ 不会直接相连。\n\n第 $2$ 到 $M+1$ 行：接下来的 $M$ 行中，每行包含两台直接相连的电脑的编号。", "outputFormat": "一行，一个整数，表示使电脑 $c_1$ 和 $c_2$ 不能互相通信需要坏掉的电脑数目的最小值。", "hint": "对于 $100\\%$ 的数据：$1\\le N \\le 100$，$1\\le M \\le 600$。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO5.4] Telecowmunication", "background": "", "description": "Farmer John's cows like to keep in touch by email, so they set up a cow computer network to communicate. The machines send email as follows: if there exists a sequence of $c$ computers $a_1,a_2,\\cdots ,a_c$ such that $a_1$ is connected to $a_2$, $a_2$ is connected to $a_3$, and so on, then computers $a_1$ and $a_c$ can exchange email.\n\nUnfortunately, sometimes a cow may accidentally step on a computer, and Farmer John's truck might run over a computer, and that unlucky computer will break. This means that computer can no longer send email, and all connections incident to it become unusable.\n\nTwo cows wonder: if the two of us are to be unable to email each other, what is the minimum number of computers that must fail? Note that $c_1$ and $c_2$ cannot be destroyed. Please write a program to compute this minimum.\n\nConsider the following network:\n\n```plain\n   1*\n  /\n 3 - 2*\n```\n\nThis figure shows $3$ computers with $2$ connections. We want to send messages between computers $1$ and $2$. Computer $1$ is directly connected to $3$, and $2$ is directly connected to $3$. If computer $3$ fails, then $1$ and $2$ can no longer communicate.", "inputFormat": "The first line contains four space-separated integers: $N, M, c_1, c_2$. $N$ is the total number of computers, numbered from $1$ to $N$. $M$ is the total number of connections. The last two integers $c_1$ and $c_2$ are the computers used by the two cows mentioned above. Connections have no duplicates and are undirected (i.e., if $c_1$ is connected to $c_2$, then $c_2$ is connected to $c_1$ as well). There is at most one connection between any pair of computers. Computers $c_1$ and $c_2$ are not directly connected.\n\nLines $2$ to $M+1$: each of the next $M$ lines contains the indices of two directly connected computers.", "outputFormat": "One line containing a single integer: the minimum number of computers that must fail to make computers $c_1$ and $c_2$ unable to communicate with each other.", "hint": "For $100\\%$ of the testdata: $1 \\le N \\le 100$, $1 \\le M \\le 600$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO5.4] 奶牛的电信 Telecowmunication", "background": "", "description": "农夫约翰的奶牛们喜欢通过电邮保持联系，于是她们建立了一个奶牛电脑网络，以便互相交流。这些机器用如下的方式发送电邮：如果存在一个由 $c$ 台电脑组成的序列 $a_1,a_2,\\cdots ,a_c$，且 $a_1$ 与 $a_2$ 相连，$a_2$ 与 $a_3$ 相连，等等。那么电脑 $a_1$ 和 $a_c$ 就可以互发电邮。\n\n很不幸，有时候奶牛会不小心踩到电脑上，农夫约翰的车也可能碾过电脑，这台倒霉的电脑就会坏掉。这意味着这台电脑不能再发送电邮了，于是与这台电脑相关的连接也就不可用了。\n\n有两头奶牛就想：如果我们两个不能互发电邮，至少需要坏掉多少台电脑呢？请注意，$c_1,c_2$ 不能被破坏。请编写一个程序为她们计算这个最小值。\n\n以如下网络为例：\n\n```plain\n   1*\n  /\n 3 - 2*\n```\n\n这张图画的是有 $2$ 条连接的 $3$ 台电脑。我们想要在电脑 $1$ 和 $2$ 之间传送信息。电脑 $1$ 与 $3$，$2$ 与 $3$ 直接连通。如果电脑 $3$ 坏了，电脑 $1$ 与 $2$ 便不能互发信息了。", "inputFormat": "第一行：四个由空格分隔的整数：$N,M,c_1,c_2$。$N$ 是电脑总数，电脑由 $1$ 到 $N$ 编号。$M$ 是电脑之间连接的总数。后面的两个整数 $c_1$ 和 $c_2$ 是上述两头奶牛使用的电脑编号。连接没有重复且均为双向的（即如果 $c_1$ 与 $c_2$ 相连，那么 $c_2$ 与 $c_1$ 也相连）。两台电脑之间至多有一条连接。电脑 $c_1$ 和 $c_2$ 不会直接相连。\n\n第 $2$ 到 $M+1$ 行：接下来的 $M$ 行中，每行包含两台直接相连的电脑的编号。", "outputFormat": "一行，一个整数，表示使电脑 $c_1$ 和 $c_2$ 不能互相通信需要坏掉的电脑数目的最小值。", "hint": "对于 $100\\%$ 的数据：$1\\le N \\le 100$，$1\\le M \\le 600$。", "locale": "zh-CN"}}}
{"pid": "P1346", "type": "P", "difficulty": 3, "samples": [["3 2 1\n2 2 3\n2 3 1\n2 1 2", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "福建省历届夏令营"], "title": "电车", "background": "", "description": "在一个神奇的小镇上有着一个特别的电车网络，它由一些路口和轨道组成，每个路口都连接着若干个轨道，每个轨道都通向一个路口（不排除有的观光轨道转一圈后返回路口的可能）。在每个路口，都有一个开关决定着出去的轨道，每个开关都有一个默认的状态，每辆电车行驶到路口之后，只能从开关所指向的轨道出去，如果电车司机想走另一个轨道，他就必须下车切换开关的状态。\n\n为了行驶向目标地点，电车司机不得不经常下车来切换开关，于是，他们想请你写一个程序，计算一辆从路口 $A$ 到路口 $B$ 最少需要下车切换几次开关。\n", "inputFormat": "第一行有 $3$ 个整数 $N,A,B$（$2 \\leq N \\leq 100, 1 \\leq A,B \\leq N$），分别表示路口的数量，和电车的起点，终点。\n\n接下来有 $N$ 行，每行的开头有一个数字 $K_i$（$0 \\leq K_i \\leq N-1$），表示这个路口与 $K_i$ 条轨道相连，接下来有 $K_i$ 个数字表示每条轨道所通向的路口，开关默认指向第一个数字表示的轨道。", "outputFormat": "输出文件只有一个数字，表示从 $A$ 到 $B$ 所需的最少的切换开关次数，若无法从 $A$ 前往 $B$，输出 $-1$。\n", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Tram", "background": "", "description": "In a magical small town, there is a special tram network composed of intersections and tracks. Each intersection connects to several tracks, and each track leads to an intersection (some scenic tracks may loop back to the same intersection). At every intersection, there is a switch that determines the outgoing track. Each switch has a default position. When a tram arrives at an intersection, it can only leave along the track currently selected by the switch. If the driver wants to take a different track, they must get off and toggle the switch.\n\nTo reach the destination, drivers often have to get off to toggle switches. Please write a program to compute the minimum number of switch toggles needed for a tram to travel from intersection $A$ to intersection $B$.", "inputFormat": "The first line contains 3 integers $N, A, B$ ( $2 \\leq N \\leq 100, 1 \\leq A, B \\leq N$ ), representing the number of intersections, and the start and destination intersections.\n\nThen $N$ lines follow. Each line starts with a number $K_i$ ( $0 \\leq K_i \\leq N - 1$ ), indicating that this intersection is connected to $K_i$ tracks, followed by $K_i$ integers, each giving the intersection that the corresponding track leads to. The switch’s default position points to the track indicated by the first of these integers.", "outputFormat": "Output a single integer: the minimum number of switch toggles required to go from $A$ to $B$. If it is impossible to reach $B$ from $A$, output $-1$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "电车", "background": "", "description": "在一个神奇的小镇上有着一个特别的电车网络，它由一些路口和轨道组成，每个路口都连接着若干个轨道，每个轨道都通向一个路口（不排除有的观光轨道转一圈后返回路口的可能）。在每个路口，都有一个开关决定着出去的轨道，每个开关都有一个默认的状态，每辆电车行驶到路口之后，只能从开关所指向的轨道出去，如果电车司机想走另一个轨道，他就必须下车切换开关的状态。\n\n为了行驶向目标地点，电车司机不得不经常下车来切换开关，于是，他们想请你写一个程序，计算一辆从路口 $A$ 到路口 $B$ 最少需要下车切换几次开关。\n", "inputFormat": "第一行有 $3$ 个整数 $N,A,B$（$2 \\leq N \\leq 100, 1 \\leq A,B \\leq N$），分别表示路口的数量，和电车的起点，终点。\n\n接下来有 $N$ 行，每行的开头有一个数字 $K_i$（$0 \\leq K_i \\leq N-1$），表示这个路口与 $K_i$ 条轨道相连，接下来有 $K_i$ 个数字表示每条轨道所通向的路口，开关默认指向第一个数字表示的轨道。", "outputFormat": "输出文件只有一个数字，表示从 $A$ 到 $B$ 所需的最少的切换开关次数，若无法从 $A$ 前往 $B$，输出 $-1$。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1347", "type": "P", "difficulty": 4, "samples": [["4 6\nA<B\nA<C\nB<C\nC<D\nB<D\nA<B\n", "Sorted sequence determined after 4 relations: ABCD."], ["3 2\nA<B\nB<A", "Inconsistency found after 2 relations."], ["26 1\nA<Z", "Sorted sequence cannot be determined."]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["图论", "并查集", "福建省历届夏令营", "排序", "拓扑排序"], "title": "排序", "background": null, "description": "一个不同的值的升序排序数列指的是一个从左到右元素依次增大的序列，例如，一个有序的数列 $A,B,C,D$ 表示 $A<B,B<C,C<D$。在这道题中，我们将给你一系列形如 $A<B$ 的关系，并要求你判断是否能够根据这些关系确定这个数列的顺序。", "inputFormat": "第一行有两个正整数 $n,m$，$n$ 表示需要排序的元素数量，$2\\leq n\\leq 26$，第 $1$ 到 $n$ 个元素将用大写的 $A,B,C,D,\\dots$ 表示。$m$ 表示将给出的形如 $A<B$ 的关系的数量。\n\n接下来有 $m$ 行，每行有 $3$ 个字符，分别为一个大写字母，一个 `<` 符号，一个大写字母，表示两个元素之间的关系。", "outputFormat": "若根据前 $x$ 个关系即可确定这 $n$ 个元素的顺序 `yyy..y`（如 `ABC`），输出\n\n`Sorted sequence determined after x relations: yyy...y.`\n\n其中 $x$ 表示上述的前 $x$ 个关系。\n\n若根据前 $x$ 个关系即发现存在矛盾（如 $A<B,B<C,C<A$），输出\n\n`Inconsistency found after x relations.`\n\n其中 $x$ 表示的意义同上。\n\n若根据这 $m$ 个关系无法确定这 $n$ 个元素的顺序，输出\n\n`Sorted sequence cannot be determined.`\n\n（提示：确定 $n$ 个元素的顺序后即可结束程序，可以不用考虑确定顺序之后出现矛盾的情况）", "hint": "$2 \\leq n \\leq 26,1 \\leq m \\leq 600$。", "locale": "zh-CN", "translations": {"en": {"title": "Sorting", "background": "", "description": "An ascending sorted sequence of distinct values is a sequence whose elements strictly increase from left to right. For example, an ordered sequence $A, B, C, D$ means $A < B$, $B < C$, $C < D$. In this problem, you are given a series of relations of the form $A < B$, and you are asked to determine whether these relations are sufficient to determine the order of the sequence.", "inputFormat": "The first line contains two positive integers $n$ and $m$. Here, $n$ is the number of elements to sort, $2 \\leq n \\leq 26$. The $1$-st to the $n$-th elements are represented by uppercase letters $A, B, C, D, \\dots$. The integer $m$ is the number of relations of the form $A < B$.\n\nThe next $m$ lines each contain exactly $3$ characters: an uppercase letter, the character `<`, and another uppercase letter, representing a relation between two elements.", "outputFormat": "If the first $x$ relations are sufficient to determine the order of the $n$ elements `yyy...y` (e.g., `ABC`), output\n\n`Sorted sequence determined after x relations: yyy...y.`\n\nHere, $x$ means the number of relations considered (the first $x$ relations).\n\nIf a contradiction is detected within the first $x$ relations (e.g., $A < B$, $B < C$, $C < A$), output\n\n`Inconsistency found after x relations.`\n\nHere, $x$ has the same meaning as above.\n\nIf the order of the $n$ elements cannot be determined after all $m$ relations, output\n\n`Sorted sequence cannot be determined.`\n\n(Hint: Once the order of the $n$ elements is determined, you can terminate the program immediately. You do not need to consider contradictions that may appear after that.)\n\n# Input Format\n\n\n\n# Output Format", "hint": "$2 \\leq n \\leq 26, 1 \\leq m \\leq 600$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "排序", "background": null, "description": "一个不同的值的升序排序数列指的是一个从左到右元素依次增大的序列，例如，一个有序的数列 $A,B,C,D$ 表示 $A<B,B<C,C<D$。在这道题中，我们将给你一系列形如 $A<B$ 的关系，并要求你判断是否能够根据这些关系确定这个数列的顺序。", "inputFormat": "第一行有两个正整数 $n,m$，$n$ 表示需要排序的元素数量，$2\\leq n\\leq 26$，第 $1$ 到 $n$ 个元素将用大写的 $A,B,C,D,\\dots$ 表示。$m$ 表示将给出的形如 $A<B$ 的关系的数量。\n\n接下来有 $m$ 行，每行有 $3$ 个字符，分别为一个大写字母，一个 `<` 符号，一个大写字母，表示两个元素之间的关系。", "outputFormat": "若根据前 $x$ 个关系即可确定这 $n$ 个元素的顺序 `yyy..y`（如 `ABC`），输出\n\n`Sorted sequence determined after x relations: yyy...y.`\n\n其中 $x$ 表示上述的前 $x$ 个关系。\n\n若根据前 $x$ 个关系即发现存在矛盾（如 $A<B,B<C,C<A$），输出\n\n`Inconsistency found after x relations.`\n\n其中 $x$ 表示的意义同上。\n\n若根据这 $m$ 个关系无法确定这 $n$ 个元素的顺序，输出\n\n`Sorted sequence cannot be determined.`\n\n（提示：确定 $n$ 个元素的顺序后即可结束程序，可以不用考虑确定顺序之后出现矛盾的情况）", "hint": "$2 \\leq n \\leq 26,1 \\leq m \\leq 600$。", "locale": "zh-CN"}}}
{"pid": "P1348", "type": "P", "difficulty": 2, "samples": [["1 10\n", "7\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "福建省历届夏令营", "枚举", "位运算"], "title": "Couple number", "background": "", "description": "对于一个整数 $n$，若存在两个自然数 $x, y$，满足 $n = x^2 - y^2$，则称 $n$ 是 Couple number。\n\n给出 $a,b$，请求出 $[a, b]$ 范围内有多少个 Couple number。", "inputFormat": "输入只有一行两个整数，分别表示 $a, b$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $-10^7 \\le a < b \\le 10^7$ ，$b - a \\le 10^7$。", "locale": "zh-CN", "translations": {"en": {"title": "Couple number", "background": "", "description": "For an integer $n$, if there exist two non-negative integers $x, y$ such that $n = x^2 - y^2$, then $n$ is called a Couple number.\n\nGiven $a, b$, find how many Couple numbers are in the range $[a, b]$.", "inputFormat": "The input contains one line with two integers $a, b$.", "outputFormat": "Output one line with a single integer representing the answer.", "hint": "#### Constraints\n\nFor all test points, it is guaranteed that $-10^7 \\le a < b \\le 10^7$, $b - a \\le 10^7$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "Couple number", "background": "", "description": "对于一个整数 $n$，若存在两个自然数 $x, y$，满足 $n = x^2 - y^2$，则称 $n$ 是 Couple number。\n\n给出 $a,b$，请求出 $[a, b]$ 范围内有多少个 Couple number。", "inputFormat": "输入只有一行两个整数，分别表示 $a, b$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n对于全部的测试点，保证 $-10^7 \\le a < b \\le 10^7$ ，$b - a \\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P1349", "type": "P", "difficulty": 4, "samples": [["1 1 1 1 10 7\n", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "福建省历届夏令营", "矩阵加速"], "title": "广义斐波那契数列", "background": null, "description": "广义的斐波那契数列是指形如 $a_n=p\\times a_{n-1}+q\\times a_{n-2}$ 的数列。\n\n今给定数列的两系数 $p$ 和 $q$，以及数列的最前两项 $a_1$ 和 $ a_2$，另给出两个整数 $n$ 和 $m$，试求数列的第 $n$ 项 $a_n$ 对 $m$ 取模后的结果。", "inputFormat": "输入包含一行六个整数，$p,q,a_1,a_2,n,m$。", "outputFormat": "输出包含一行一个整数表示答案。", "hint": "数列第 $10 $ 项是 $55$，$55 \\bmod 7 = 6$。\n\n**【数据范围】**  \n对于 $100\\%$ 的数据，$p,q,a_1,a_2 \\in [0,2^{31}-1]$，$1\\le n,m \\le 2^{31}-1$。\n\n---\n\n$\\text{upd 2023.8.23}$：新增加一组 Hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "Generalized Fibonacci Sequence", "background": "", "description": "A generalized Fibonacci sequence is a sequence of the form $a_n=p\\times a_{n-1}+q\\times a_{n-2}$.\n\nGiven the two coefficients $p$ and $q$, the first two terms $a_1$ and $a_2$, and two integers $n$ and $m$, compute the $n$-th term $a_n$ modulo $m$.", "inputFormat": "The input contains one line with six integers: $p,q,a_1,a_2,n,m$.", "outputFormat": "Output a single integer on one line: the answer.", "hint": "The $10 $-th term is $55$, and $55 \\bmod 7 = 6$.\n\n**Constraints**  \nFor $100\\%$ of the testdata, $p,q,a_1,a_2 \\in [0,2^{31}-1]$, $1\\le n,m \\le 2^{31}-1$.\n\n---\n\n$\\text{upd 2023.8.23}$: Added a new set of hack testdata.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "广义斐波那契数列", "background": null, "description": "广义的斐波那契数列是指形如 $a_n=p\\times a_{n-1}+q\\times a_{n-2}$ 的数列。\n\n今给定数列的两系数 $p$ 和 $q$，以及数列的最前两项 $a_1$ 和 $ a_2$，另给出两个整数 $n$ 和 $m$，试求数列的第 $n$ 项 $a_n$ 对 $m$ 取模后的结果。", "inputFormat": "输入包含一行六个整数，$p,q,a_1,a_2,n,m$。", "outputFormat": "输出包含一行一个整数表示答案。", "hint": "数列第 $10 $ 项是 $55$，$55 \\bmod 7 = 6$。\n\n**【数据范围】**  \n对于 $100\\%$ 的数据，$p,q,a_1,a_2 \\in [0,2^{31}-1]$，$1\\le n,m \\le 2^{31}-1$。\n\n---\n\n$\\text{upd 2023.8.23}$：新增加一组 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P1350", "type": "P", "difficulty": 3, "samples": [["2 2 2 2 2", "38\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["递推", "福建省历届夏令营", "组合数学", "排列组合"], "title": "车的放置", "background": "", "description": "有下面这样的一个网格棋盘，$a,b,c,d$ 表示了对应边长度，也就是对应格子数：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7ulpevu.png)\n\n当 $a=b=c=d=2$ 时，对应下面这样一个棋盘：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e2ntmjlk.png)\n\n要在这个棋盘上放 $k$ 个相互不攻击的车，也就是这 $k$ 个车没有两个车在同一行，也没有两个车在同一列，问有多少种方案。\n", "inputFormat": "只有一行，为五个非负整数，分别代表 $a,b,c,d$ 和 $k$。\n", "outputFormat": "输出一行一个整数代表答案 $\\bmod$ $10^5+3$ 后的结果。", "hint": "#### 数据规模与约定\n\n- 存在部分数据，保证 $b=0$；\n- 存在部分数据，保证 $a,b,c,d\\leq 4$。\n- 对于 $100\\%$ 的数据，保证 $0\\leq a,b,c,d,k\\leq 10^3$，且至少有一种可行方案。", "locale": "zh-CN", "translations": {"en": {"title": "Placing Rooks", "background": "", "description": "There is a grid board as shown below, where $a,b,c,d$ denote the lengths of the corresponding sides, i.e., the numbers of cells on those sides:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7ulpevu.png)\n\nWhen $a=b=c=d=2$, the corresponding board is as follows:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e2ntmjlk.png)\n\nYou need to place $k$ non-attacking rooks on this board, meaning that among these $k$ rooks, no two share the same row and no two share the same column. Find the number of such placements.", "inputFormat": "A single line with five non-negative integers, representing $a,b,c,d$ and $k$.", "outputFormat": "Output one line with a single integer, which is the answer $\\bmod$ $10^5+3$.", "hint": "#### Constraints and Notes\n\n- For some testdata, it is guaranteed that $b=0$.\n- For some testdata, it is guaranteed that $a,b,c,d\\leq 4$.\n- For $100\\%$ of the data, it is guaranteed that $0\\leq a,b,c,d,k\\leq 10^3$, and there is at least one feasible solution.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "车的放置", "background": "", "description": "有下面这样的一个网格棋盘，$a,b,c,d$ 表示了对应边长度，也就是对应格子数：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/g7ulpevu.png)\n\n当 $a=b=c=d=2$ 时，对应下面这样一个棋盘：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/e2ntmjlk.png)\n\n要在这个棋盘上放 $k$ 个相互不攻击的车，也就是这 $k$ 个车没有两个车在同一行，也没有两个车在同一列，问有多少种方案。\n", "inputFormat": "只有一行，为五个非负整数，分别代表 $a,b,c,d$ 和 $k$。\n", "outputFormat": "输出一行一个整数代表答案 $\\bmod$ $10^5+3$ 后的结果。", "hint": "#### 数据规模与约定\n\n- 存在部分数据，保证 $b=0$；\n- 存在部分数据，保证 $a,b,c,d\\leq 4$。\n- 对于 $100\\%$ 的数据，保证 $0\\leq a,b,c,d,k\\leq 10^3$，且至少有一种可行方案。", "locale": "zh-CN"}}}
{"pid": "P1351", "type": "P", "difficulty": 3, "samples": [["5  \n1 2  \n2 3\n3 4  \n4 5  \n1 5 2 3 10 ", "20 74"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2014", "NOIP 提高组"], "title": "[NOIP 2014 提高组] 联合权值", "background": "NOIP2014 提高组 D1T2", "description": "无向连通图 $G$ 有 $n$ 个点，$n-1$ 条边。点从 $1$ 到 $n$ 依次编号,编号为 $i$ 的点的权值为 $W_i$，每条边的长度均为 $1$。图上两点 $(u, v)$ 的距离定义为 $u$ 点到 $v$ 点的最短距离。对于图 $G$ 上的点对 $(u, v)$，若它们的距离为 $2$，则它们之间会产生 $W_v \\times W_u$ 的联合权值。\n\n请问图 $G$ 上所有可产生联合权值的有序点对中，联合权值最大的是多少？所有联合权值之和是多少？", "inputFormat": "第一行包含 $1$ 个整数 $n$。\n\n接下来 $n-1$ 行,每行包含 $2$ 个用空格隔开的正整数 $u,v$，表示编号为 $u$ 和编号为 $v$ 的点之间有边相连。\n\n最后 $1$ 行，包含 $n$ 个正整数，每两个正整数之间用一个空格隔开，其中第 $i$ 个整数表示图 $G$ 上编号为 $i$ 的点的权值为 $W_i$。", "outputFormat": "输出共 $1$ 行，包含 $2$ 个整数，之间用一个空格隔开,依次为图 $G$ 上联合权值的最大值和所有联合权值之和。由于所有联合权值之和可能很大，输出它时要对 $10007$ 取余。", "hint": "**样例解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5zkpab9k.png)\n\n本例输入的图如上所示，距离为 $2$ 的有序点对有$(1,3)$ 、$(2,4)$ 、$(3,1)$ 、$(3,5) $、$(4,2)$ 、$(5,3) $。\n\n其联合权值分别为 $2,15,2,20,15,20$。其中最大的是 $20$，总和为 $74$。\n\n \n**数据说明**\n\n- 对于 $30\\%$ 的数据，$2 < n \\leq 100$；\n- 对于 $60\\%$ 的数据，$2 < n \\leq 2000$；\n- 对于 $100\\%$ 的数据，$2 < n \\leq 2\\times 10^5$，$0 < W_i \\leq 10000$。\n\n保证一定存在可产生联合权值的有序点对。", "locale": "zh-CN", "translations": {"en": {"title": "[NOIP 2014 Senior] Joint Weight", "background": "NOIP 2014 Senior D1T2.", "description": "An undirected connected graph $G$ has $n$ vertices and $n-1$ edges. The vertices are numbered from $1$ to $n$, and the weight of vertex $i$ is $W_i$. Each edge has length $1$. For any two vertices $u$ and $v$, their distance is defined as the length of the shortest path from $u$ to $v$. For a pair of vertices $(u, v)$ in $G$, if their distance is $2$, then they generate a joint weight of $W_v \\times W_u$.\n\nAmong all ordered pairs in $G$ that can generate a joint weight, what is the maximum joint weight? What is the sum of all joint weights?", "inputFormat": "The first line contains $1$ integer $n$.\n\nThe next $n-1$ lines each contain $2$ positive integers $u, v$ separated by a space, indicating that there is an edge between vertex $u$ and vertex $v$.\n\nThe last line contains $n$ positive integers separated by single spaces, where the $i$-th integer indicates that the weight of vertex $i$ in $G$ is $W_i$.", "outputFormat": "Output a single line containing $2$ integers separated by a space: the maximum joint weight on graph $G$ and the sum of all joint weights. Since the sum may be large, output it modulo $10007$.", "hint": "Sample Explanation.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5zkpab9k.png)\n\nFor the input in this example, the graph is as shown above. The ordered pairs at distance $2$ are $(1, 3), (2, 4), (3, 1), (3, 5), (4, 2), (5, 3)$.\n\nTheir joint weights are $2, 15, 2, 20, 15, 20$. The maximum is $20$, and the total sum is $74$.\n\nConstraints\n\n- For $30\\%$ of the testdata, $2 < n \\leq 100$.\n- For $60\\%$ of the testdata, $2 < n \\leq 2000$.\n- For $100\\%$ of the testdata, $2 < n \\leq 2 \\times 10^5$, $0 < W_i \\leq 10000$.\n\nIt is guaranteed that there exists at least one ordered pair that can generate a joint weight.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOIP 2014 提高组] 联合权值", "background": "NOIP2014 提高组 D1T2", "description": "无向连通图 $G$ 有 $n$ 个点，$n-1$ 条边。点从 $1$ 到 $n$ 依次编号,编号为 $i$ 的点的权值为 $W_i$，每条边的长度均为 $1$。图上两点 $(u, v)$ 的距离定义为 $u$ 点到 $v$ 点的最短距离。对于图 $G$ 上的点对 $(u, v)$，若它们的距离为 $2$，则它们之间会产生 $W_v \\times W_u$ 的联合权值。\n\n请问图 $G$ 上所有可产生联合权值的有序点对中，联合权值最大的是多少？所有联合权值之和是多少？", "inputFormat": "第一行包含 $1$ 个整数 $n$。\n\n接下来 $n-1$ 行,每行包含 $2$ 个用空格隔开的正整数 $u,v$，表示编号为 $u$ 和编号为 $v$ 的点之间有边相连。\n\n最后 $1$ 行，包含 $n$ 个正整数，每两个正整数之间用一个空格隔开，其中第 $i$ 个整数表示图 $G$ 上编号为 $i$ 的点的权值为 $W_i$。", "outputFormat": "输出共 $1$ 行，包含 $2$ 个整数，之间用一个空格隔开,依次为图 $G$ 上联合权值的最大值和所有联合权值之和。由于所有联合权值之和可能很大，输出它时要对 $10007$ 取余。", "hint": "**样例解释**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5zkpab9k.png)\n\n本例输入的图如上所示，距离为 $2$ 的有序点对有$(1,3)$ 、$(2,4)$ 、$(3,1)$ 、$(3,5) $、$(4,2)$ 、$(5,3) $。\n\n其联合权值分别为 $2,15,2,20,15,20$。其中最大的是 $20$，总和为 $74$。\n\n \n**数据说明**\n\n- 对于 $30\\%$ 的数据，$2 < n \\leq 100$；\n- 对于 $60\\%$ 的数据，$2 < n \\leq 2000$；\n- 对于 $100\\%$ 的数据，$2 < n \\leq 2\\times 10^5$，$0 < W_i \\leq 10000$。\n\n保证一定存在可产生联合权值的有序点对。", "locale": "zh-CN"}}}
{"pid": "P1352", "type": "P", "difficulty": 3, "samples": [["7\n1\n1\n1\n1\n1\n1\n1\n1 3\n2 3\n6 4\n7 4\n4 5\n3 5\n", "5\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "福建省历届夏令营", "树形 DP"], "title": "没有上司的舞会", "background": "", "description": "某大学有 $n$ 个职员，编号为 $1\\ldots n$。\n\n他们之间有从属关系，也就是说他们的关系就像一棵以校长为根的树，父结点就是子结点的直接上司。\n\n现在有个周年庆宴会，宴会每邀请来一个职员都会增加一定的快乐指数 $r_i$，但是呢，如果某个职员的直接上司来参加舞会了，那么这个职员就无论如何也不肯来参加舞会了。\n\n所以，请你编程计算，邀请哪些职员可以使快乐指数最大，求最大的快乐指数。", "inputFormat": "输入的第一行是一个整数 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i+1)$ 行的整数表示 $i$ 号职员的快乐指数 $r_i$。\n\n第 $(n + 2)$ 到第 $2n$ 行，每行输入一对整数 $l, k$，代表 $k$ 是 $l$ 的直接上司。", "outputFormat": "输出一行一个整数代表最大的快乐指数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n \\leq 6 \\times 10^3$，$-128 \\leq r_i\\leq 127$，$1 \\leq l, k \\leq n$，且给出的关系一定是一棵树。", "locale": "zh-CN", "translations": {"en": {"title": "Party Without a Boss", "background": "", "description": "A university has $n$ employees, numbered $1 \\ldots n$.\n\nThere is a hierarchy among them, meaning their relationships form a tree rooted at the university president, where a parent node is the direct supervisor of its child nodes.\n\nThere will be an anniversary banquet. Inviting an employee increases the happiness index by $r_i$. However, if an employee’s direct supervisor attends the banquet, that employee will refuse to attend no matter what.\n\nPlease compute which employees to invite so that the total happiness index is maximized, and find the maximum total happiness index.", "inputFormat": "The first line contains an integer $n$.\n\nLines $2$ to $(n + 1)$ each contain one integer. The integer on line $(i + 1)$ is the happiness index $r_i$ of employee $i$.\n\nLines $(n + 2)$ to $2n$ each contain a pair of integers $l, k$, meaning $k$ is the direct supervisor of $l$.", "outputFormat": "Output a single line with one integer representing the maximum total happiness index.", "hint": "Constraints\n\n- For $100\\%$ of the testdata, it is guaranteed that $1 \\leq n \\leq 6 \\times 10^3$, $-128 \\leq r_i \\leq 127$, $1 \\leq l, k \\leq n$, and the given relations form a tree.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "没有上司的舞会", "background": "", "description": "某大学有 $n$ 个职员，编号为 $1\\ldots n$。\n\n他们之间有从属关系，也就是说他们的关系就像一棵以校长为根的树，父结点就是子结点的直接上司。\n\n现在有个周年庆宴会，宴会每邀请来一个职员都会增加一定的快乐指数 $r_i$，但是呢，如果某个职员的直接上司来参加舞会了，那么这个职员就无论如何也不肯来参加舞会了。\n\n所以，请你编程计算，邀请哪些职员可以使快乐指数最大，求最大的快乐指数。", "inputFormat": "输入的第一行是一个整数 $n$。\n\n第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i+1)$ 行的整数表示 $i$ 号职员的快乐指数 $r_i$。\n\n第 $(n + 2)$ 到第 $2n$ 行，每行输入一对整数 $l, k$，代表 $k$ 是 $l$ 的直接上司。", "outputFormat": "输出一行一个整数代表最大的快乐指数。", "hint": "#### 数据规模与约定\n\n对于 $100\\%$ 的数据，保证 $1\\leq n \\leq 6 \\times 10^3$，$-128 \\leq r_i\\leq 127$，$1 \\leq l, k \\leq n$，且给出的关系一定是一棵树。", "locale": "zh-CN"}}}
{"pid": "P1353", "type": "P", "difficulty": 4, "samples": [["5 2\n5\n3\n4\n2\n10\n", "9\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2008", "USACO", "福建省历届夏令营"], "title": "[USACO08JAN] Running S", "background": "", "description": "奶牛们打算通过锻炼来培养自己的运动细胞，作为其中的一员，贝茜选择的运动方式是每天进行 $n$ 分钟的晨跑。在每分钟的开始，贝茜会选择下一分钟是用来跑步还是休息。\n\n\n贝茜的体力限制了她跑步的距离。更具体地，如果贝茜选择在第 $i$ 分钟内跑步，她可以在这一分钟内跑 $d_i$ 米，并且她的疲劳度会增加 $1$。不过，无论何时贝茜的疲劳度都不能超过 $m$。  \n\n如果贝茜选择休息，那么她的疲劳度就会每分钟减少 $1$，但她必须休息到疲劳度恢复到 $0$ 为止。在疲劳度为 $0$ 时休息的话，疲劳度不会再变动。晨跑开始时，贝茜的疲劳度为 $0$ 。\n\n还有，在 $n$ 分钟的锻炼结束时，贝茜的疲劳度也必须恢复到 $0$，否则她将没有足够的精力来对付这一整天中剩下的事情。\n\n请你计算一下，贝茜最多能跑多少米。\n", "inputFormat": "第一行两个正整数 $n,m$。   \n接下来 $n$ 行，每行一个正整数 $d_i$。\n", "outputFormat": "输出一个整数，表示在满足所有限制条件的情况下，贝茜能跑的最大距离。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^4$，$1\\le d_i \\le 1000$，$1\\le m \\le 500$。\n\n【样例说明】\n\n贝茜在第 $1$ 分钟内选择跑步（跑了 $5$ 米），在第 $2$ 分钟内休息，在第 $3$ 分钟内跑步（跑了 $4$ 米），剩余的时间都用来休息。  \n因为在晨跑结束时贝茜的疲劳度必须为0，所以她不能在第 $5$ 分钟内选择跑步。  \n最终跑的总距离为 $9$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO08JAN] Running S", "background": "", "description": "The cows plan to develop their athleticism through exercise. As one of them, Bessie chooses to do a morning run for $n$ minutes every day. At the beginning of each minute, Bessie chooses whether the next minute will be used for running or resting.\n\nBessie’s stamina limits how far she can run. Specifically, if Bessie chooses to run during minute $i$, she can run $d_i$ meters in that minute, and her fatigue increases by $1$. However, at any time her fatigue must not exceed $m$.\n\nIf Bessie chooses to rest, her fatigue decreases by $1$ per minute, but she must continue resting until her fatigue returns to $0$. If she rests when her fatigue is $0$, the fatigue level will not change further. At the start of the run, Bessie’s fatigue is $0$.\n\nAlso, at the end of the $n$ minutes of exercise, Bessie’s fatigue must be $0$ as well, or she will not have enough energy to handle the rest of the day.\n\nPlease compute the maximum total distance Bessie can run.", "inputFormat": "The first line contains two positive integers $n, m$.  \nThe next $n$ lines each contain one positive integer $d_i$.", "outputFormat": "Output a single integer, the maximum distance Bessie can run while satisfying all constraints.", "hint": "Constraints  \nFor $100\\%$ of the testdata, $1 \\le n \\le 10^4$, $1 \\le d_i \\le 1000$, $1 \\le m \\le 500$.\n\nSample explanation:\n\nBessie runs in minute $1$ (running $5$ meters), rests in minute $2$, runs in minute $3$ (running $4$ meters), and rests for the remaining time.  \nBecause her fatigue must be $0$ at the end of the morning run, she cannot choose to run in minute $5$.  \nThe total distance run is $9$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO08JAN] Running S", "background": "", "description": "奶牛们打算通过锻炼来培养自己的运动细胞，作为其中的一员，贝茜选择的运动方式是每天进行 $n$ 分钟的晨跑。在每分钟的开始，贝茜会选择下一分钟是用来跑步还是休息。\n\n\n贝茜的体力限制了她跑步的距离。更具体地，如果贝茜选择在第 $i$ 分钟内跑步，她可以在这一分钟内跑 $d_i$ 米，并且她的疲劳度会增加 $1$。不过，无论何时贝茜的疲劳度都不能超过 $m$。  \n\n如果贝茜选择休息，那么她的疲劳度就会每分钟减少 $1$，但她必须休息到疲劳度恢复到 $0$ 为止。在疲劳度为 $0$ 时休息的话，疲劳度不会再变动。晨跑开始时，贝茜的疲劳度为 $0$ 。\n\n还有，在 $n$ 分钟的锻炼结束时，贝茜的疲劳度也必须恢复到 $0$，否则她将没有足够的精力来对付这一整天中剩下的事情。\n\n请你计算一下，贝茜最多能跑多少米。\n", "inputFormat": "第一行两个正整数 $n,m$。   \n接下来 $n$ 行，每行一个正整数 $d_i$。\n", "outputFormat": "输出一个整数，表示在满足所有限制条件的情况下，贝茜能跑的最大距离。\n", "hint": "【数据范围】  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^4$，$1\\le d_i \\le 1000$，$1\\le m \\le 500$。\n\n【样例说明】\n\n贝茜在第 $1$ 分钟内选择跑步（跑了 $5$ 米），在第 $2$ 分钟内休息，在第 $3$ 分钟内跑步（跑了 $4$ 米），剩余的时间都用来休息。  \n因为在晨跑结束时贝茜的疲劳度必须为0，所以她不能在第 $5$ 分钟内选择跑步。  \n最终跑的总距离为 $9$。\n\n", "locale": "zh-CN"}}}
{"pid": "P1354", "type": "P", "difficulty": 4, "samples": [["2\n4 2 7 8 9\n7 3 4.5 6 7\n", "10.06\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "图论", "计算几何", "福建省历届夏令营", "图论建模", "最短路"], "title": "房间最短路问题", "background": "", "description": "在一个长宽均为 $10$，入口、出口分别为 $(0,5)$、$(10,5)$ 的房间里，有几堵墙，每堵墙上有两个缺口，求入口到出口的最短路经。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i929rz3l.png)", "inputFormat": "第一排为 $n$（$n \\le 20$），墙的数目。\n\n接下来 $n$ 排，每排 $5$ 个实数 $x,a_1,b_1,a_2,b_2$。\n\n$x$ 表示墙的横坐标（所有墙都是竖直的），$a_1 \\sim b_1$ 和 $a_2 \\sim b_2$ 之间为空缺。\n\n$a_1,b_1,a_2,b_2$ 保持递增，$x_1 \\sim x_n$ 也是递增的。", "outputFormat": "输出最短距离，保留 $2$ 位小数。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "Shortest Path in a Room", "background": "", "description": "In a room with both length and width equal to $10$, with the entrance and exit at $(0,5)$ and $(10,5)$ respectively, there are several walls, each with two gaps. Find the shortest path from the entrance to the exit.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i929rz3l.png)", "inputFormat": "The first line contains $n$ ($n \\le 20$), the number of walls.\n\nThe next $n$ lines each contain $5$ real numbers $x, a_1, b_1, a_2, b_2$.\n\n$x$ is the $x$-coordinate of the wall (all walls are vertical). The segments between $a_1 \\sim b_1$ and $a_2 \\sim b_2$ are openings.\n\n$a_1, b_1, a_2, b_2$ are in increasing order, and $x_1 \\sim x_n$ are also in increasing order.", "outputFormat": "Output the shortest distance, keeping $2$ decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "房间最短路问题", "background": "", "description": "在一个长宽均为 $10$，入口、出口分别为 $(0,5)$、$(10,5)$ 的房间里，有几堵墙，每堵墙上有两个缺口，求入口到出口的最短路经。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i929rz3l.png)", "inputFormat": "第一排为 $n$（$n \\le 20$），墙的数目。\n\n接下来 $n$ 排，每排 $5$ 个实数 $x,a_1,b_1,a_2,b_2$。\n\n$x$ 表示墙的横坐标（所有墙都是竖直的），$a_1 \\sim b_1$ 和 $a_2 \\sim b_2$ 之间为空缺。\n\n$a_1,b_1,a_2,b_2$ 保持递增，$x_1 \\sim x_n$ 也是递增的。", "outputFormat": "输出最短距离，保留 $2$ 位小数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P1355", "type": "P", "difficulty": 3, "samples": [["(0,0)\r\n(3,0)\r\n(0,3)\r\n(1,1)\r\n", "1\r\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "计算几何", "福建省历届夏令营", "向量", "叉积"], "title": "神秘大三角", "background": "", "description": "判断一个点与已知三角形的位置关系。\n", "inputFormat": "前三行，每行一个坐标，表示该三角形的三个顶点。\n\n第四行，一个点的坐标，试判断该点与前三个点围成三角形的位置关系。\n\n所有坐标值均为整数。", "outputFormat": "- 若点在三角形内（不含边界），输出 $1$；\n- 若点在三角形外（不含边界），输出 $2$；\n- 若点在三角形边界上（不含顶点），输出 $3$；\n- 若点在三角形顶点上，输出 $4$。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 数据，$0\\le x_i,y_i\\le 100$。\n\n ", "locale": "zh-CN", "translations": {"en": {"title": "Mysterious Big Triangle", "background": "", "description": "Determine the positional relationship between a point and a given triangle.", "inputFormat": "- The first three lines, each contains a coordinate, representing the three vertices of the triangle.\n- The fourth line contains the coordinate of a point. Determine the positional relationship between this point and the triangle formed by the previous three points.\n- All coordinate values are integers.", "outputFormat": "- If the point is inside the triangle (excluding the boundary), output $1$.\n- If the point is outside the triangle (excluding the boundary), output $2$.\n- If the point is on the boundary of the triangle (excluding vertices), output $3$.\n- If the point is on a vertex of the triangle, output $4$.", "hint": "### Constraints\n\nFor $100\\%$ testdata, $0 \\le x_i, y_i \\le 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "神秘大三角", "background": "", "description": "判断一个点与已知三角形的位置关系。\n", "inputFormat": "前三行，每行一个坐标，表示该三角形的三个顶点。\n\n第四行，一个点的坐标，试判断该点与前三个点围成三角形的位置关系。\n\n所有坐标值均为整数。", "outputFormat": "- 若点在三角形内（不含边界），输出 $1$；\n- 若点在三角形外（不含边界），输出 $2$；\n- 若点在三角形边界上（不含顶点），输出 $3$；\n- 若点在三角形顶点上，输出 $4$。", "hint": "### 数据规模与约定\n\n对于 $100\\%$ 数据，$0\\le x_i,y_i\\le 100$。\n\n ", "locale": "zh-CN"}}}
{"pid": "P1356", "type": "P", "difficulty": 4, "samples": [["2\n4 7\n17 5 -21 15\n4 5\n17 5 -21 15\n", "Divisible\nNot divisible\n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "数学", "福建省历届夏令营"], "title": "数列的整除性", "background": null, "description": "对于任意一个整数数列，我们可以在每两个整数中间任意放一个符号 `+` 或 `-`，这样就可以构成一个表达式，也就可以计算出表达式的值。对于一个整数数列来说，我们能通过如上的方法构造出不同的表达式，从而得到不同的数值，如果其中某一个数值能够被 $k$ 整除的话，我们就称该数列能被 $k$ 整除。现在你的任务是判断某个数列是否能被某数整除。", "inputFormat": "**本题有多组数据**。  \n\n第一行一个整数 $M$，表示数据组数。  \n\n对于每组数据：  \n\n第一行两个整数 $n$ 和 $k$，$n$ 表示数列中整数的个数。  \n\n第二行  $n$ 个整数，表示输入数列 $\\{a_n\\}$。", "outputFormat": "输出应有 $M$ 行，依次对应输入文件中的 $M$ 个子任务，若数列能被 $k$ 整除则输出 `Divisible`，否则输出 `Not divisible` ，行首行末应没有空格。", "hint": "#### 样例输入输出 1 解释\n\n对于整数数列：$17,5,-21,15$，可以构造出 $8$ 个表达式：\n\n- $17+5+(-21)+15=16$\n- $17+5+(-21)-15=-14$\n- $17+5-(-21)+15=58$\n- $17+5-(-21)-15=28$\n- $17-5+(-21)+15=6$\n- $17-5+(-21)-15=-24$\n- $17-5-(-21)+15=48$\n- $17-5-(-21)-15=18$\n\n\n该数列能被 $7$ 整除（$17+5+(-21)-15=-14$），但不能被 $5$ 整除。\n\n#### 数据规模与约定\n对于全部的测试点，保证 $1 \\le M\\le 20,1 \\le n \\le 10^4,2 \\le k \\le 100,\\left| a_i \\right| \\le 10^4$。\n\n- $\\text{upd 2022.9.27}$：新增加一组 Hack 数据。\n- $\\text{upd 2023.11.29}$：新增加一组 Hack 数据。", "locale": "zh-CN", "translations": {"en": {"title": "Divisibility of a Sequence", "background": "", "description": "For any integer sequence, we can insert either the symbol `+` or `-` between every two integers to form an expression, and thus compute its value. For a given integer sequence, we can construct different expressions in this way and obtain different values. If any one of these values is divisible by $k$, we say the sequence is divisible by $k$. Your task is to determine whether a given sequence is divisible by a given number.", "inputFormat": "This problem has multiple test cases.\n\nThe first line contains an integer $M$, the number of test cases.\n\nFor each test case:\n\n- The first line contains two integers $n$ and $k$, where $n$ is the number of integers in the sequence.\n- The second line contains $n$ integers, which form the input sequence $\\{a_i\\}$.", "outputFormat": "Output $M$ lines, each corresponding to a test case in the input. If the sequence is divisible by $k$, output `Divisible`; otherwise, output `Not divisible`. There should be no leading or trailing spaces on the line.", "hint": "Explanation for Sample 1\n\nFor the integer sequence $17, 5, -21, 15$, we can construct $8$ expressions:\n\n- $17+5+(-21)+15=16$.\n- $17+5+(-21)-15=-14$.\n- $17+5-(-21)+15=58$.\n- $17+5-(-21)-15=28$.\n- $17-5+(-21)+15=6$.\n- $17-5+(-21)-15=-24$.\n- $17-5-(-21)+15=48$.\n- $17-5-(-21)-15=18$.\n\nThis sequence is divisible by $7$ ($17+5+(-21)-15=-14$), but not divisible by $5$.\n\nConstraints\nFor all test points, it is guaranteed that $1 \\le M \\le 20$, $1 \\le n \\le 10^4$, $2 \\le k \\le 100$, and $\\left| a_i \\right| \\le 10^4$.\n\n- $\\text{upd 2022.9.27}$: Added one Hack testdata set.\n- $\\text{upd 2023.11.29}$: Added one Hack testdata set.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "数列的整除性", "background": null, "description": "对于任意一个整数数列，我们可以在每两个整数中间任意放一个符号 `+` 或 `-`，这样就可以构成一个表达式，也就可以计算出表达式的值。对于一个整数数列来说，我们能通过如上的方法构造出不同的表达式，从而得到不同的数值，如果其中某一个数值能够被 $k$ 整除的话，我们就称该数列能被 $k$ 整除。现在你的任务是判断某个数列是否能被某数整除。", "inputFormat": "**本题有多组数据**。  \n\n第一行一个整数 $M$，表示数据组数。  \n\n对于每组数据：  \n\n第一行两个整数 $n$ 和 $k$，$n$ 表示数列中整数的个数。  \n\n第二行  $n$ 个整数，表示输入数列 $\\{a_n\\}$。", "outputFormat": "输出应有 $M$ 行，依次对应输入文件中的 $M$ 个子任务，若数列能被 $k$ 整除则输出 `Divisible`，否则输出 `Not divisible` ，行首行末应没有空格。", "hint": "#### 样例输入输出 1 解释\n\n对于整数数列：$17,5,-21,15$，可以构造出 $8$ 个表达式：\n\n- $17+5+(-21)+15=16$\n- $17+5+(-21)-15=-14$\n- $17+5-(-21)+15=58$\n- $17+5-(-21)-15=28$\n- $17-5+(-21)+15=6$\n- $17-5+(-21)-15=-24$\n- $17-5-(-21)+15=48$\n- $17-5-(-21)-15=18$\n\n\n该数列能被 $7$ 整除（$17+5+(-21)-15=-14$），但不能被 $5$ 整除。\n\n#### 数据规模与约定\n对于全部的测试点，保证 $1 \\le M\\le 20,1 \\le n \\le 10^4,2 \\le k \\le 100,\\left| a_i \\right| \\le 10^4$。\n\n- $\\text{upd 2022.9.27}$：新增加一组 Hack 数据。\n- $\\text{upd 2023.11.29}$：新增加一组 Hack 数据。", "locale": "zh-CN"}}}
{"pid": "P1357", "type": "P", "difficulty": 5, "samples": [["10 5 3\n", "458"], ["6 2 1\n", "18"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["福建省历届夏令营", "矩阵加速", "矩阵乘法", "位运算", "状压 DP"], "title": "花园", "background": "", "description": "小 L 有一座环形花园，沿花园的顺时针方向，他把各个花圃编号为 $1 \\sim n$。花园 $1$ 和 $n$ 是相邻的。\n\n他的环形花园每天都会换一个新花样，但他的花园都不外乎一个规则：任意相邻 $m$ 个花圃中都只有不超过 $k$ 个 C 形的花圃，其余花圃均为 P 形的花圃。\n\n例如，若 $n=10$ , $m=5$ , $k=3$ ，则\n\n- `CCPCPPPPCC` 是一种不符合规则的花圃。\n- `CCPPPPCPCP` 是一种符合规则的花圃。\n\n请帮小 L 求出符合规则的花园种数对 $10^9+7$ 取模的结果。", "inputFormat": "只有一行三个整数，分别表示 $n, m, k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $40\\%$ 的数据，保证 $n \\le 20$。\n- 对于 $60\\%$ 的数据，保证 $m=2$。\n- 对于 $80\\%$ 的数据，保证 $n \\le 10^5$；\n- 对于 $100\\%$ 的数据，保证 $2 \\leq n \\le 10^{15}$，$2 \\leq m \\leq \\min(n, 5)$，$1 \\leq k \\lt m$。", "locale": "zh-CN", "translations": {"en": {"title": "Garden", "background": "", "description": "Xiao L has a circular garden. Number the flower plots from $1$ to $n$ in the clockwise direction. Plots $1$ and $n$ are adjacent.\n\nHis circular garden can have a new arrangement every day, but all arrangements must follow one rule: in any $m$ consecutive plots, there are at most $k$ plots of type \"C\", and all remaining plots are of type \"P\".\n\nFor example, if $n = 10$, $m = 5$, $k = 3$, then:\n- `CCPCPPPPCC` is an arrangement that does not satisfy the rule.\n- `CCPPPPCPCP` is an arrangement that satisfies the rule.\n\nPlease compute the number of arrangements that satisfy the rule, modulo $10^9 + 7$.", "inputFormat": "One line containing three integers $n$, $m$, and $k$.", "outputFormat": "Output one line with a single integer, the answer.", "hint": "#### Constraints\n\n- For $40\\%$ of the testdata, $n \\le 20$.\n- For $60\\%$ of the testdata, $m = 2$.\n- For $80\\%$ of the testdata, $n \\le 10^5$.\n- For $100\\%$ of the testdata, $2 \\le n \\le 10^{15}$, $2 \\le m \\le \\min(n, 5)$, $1 \\le k \\lt m$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "花园", "background": "", "description": "小 L 有一座环形花园，沿花园的顺时针方向，他把各个花圃编号为 $1 \\sim n$。花园 $1$ 和 $n$ 是相邻的。\n\n他的环形花园每天都会换一个新花样，但他的花园都不外乎一个规则：任意相邻 $m$ 个花圃中都只有不超过 $k$ 个 C 形的花圃，其余花圃均为 P 形的花圃。\n\n例如，若 $n=10$ , $m=5$ , $k=3$ ，则\n\n- `CCPCPPPPCC` 是一种不符合规则的花圃。\n- `CCPPPPCPCP` 是一种符合规则的花圃。\n\n请帮小 L 求出符合规则的花园种数对 $10^9+7$ 取模的结果。", "inputFormat": "只有一行三个整数，分别表示 $n, m, k$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "#### 数据规模与约定\n\n- 对于 $40\\%$ 的数据，保证 $n \\le 20$。\n- 对于 $60\\%$ 的数据，保证 $m=2$。\n- 对于 $80\\%$ 的数据，保证 $n \\le 10^5$；\n- 对于 $100\\%$ 的数据，保证 $2 \\leq n \\le 10^{15}$，$2 \\leq m \\leq \\min(n, 5)$，$1 \\leq k \\lt m$。", "locale": "zh-CN"}}}
{"pid": "P1358", "type": "P", "difficulty": 2, "samples": [["5 2\n3 1\n", "20\n"], ["20 19\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n", "8707\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["数学", "递推", "福建省历届夏令营", "枚举", "背包 DP"], "title": "扑克牌", "background": "", "description": "组合数学是数学的重要组成部分，是一门研究离散对象的科学，它主要研究满足一定条件的组态（也称组合模型）的存在、计数以及构造等方面的问题。组合数学的主要内容有组合计数、组合设计、组合矩阵、组合优化等。\n\n随着计算机科学的日益发展，组合数学的重要性也日渐凸显，因为计算机科学的核心内容是使用算法处理离散数据。\n\n今天我们来研究组合数学中的一个有趣的问题，也是一个简单的计数问题：\n\n从一副含有 $n$ 张的扑克牌(每张扑克牌都不相同)中，分给 $m$ 个人，第 $i$ 个人得到 $a_i$ 张牌，求一共有几种分法，这个数可能非常大，请输出此数模 $10007$ 后的结果。", "inputFormat": "第一行两个整数为 $n,m$。\n\n第二行 $m$ 个整数 $a_i$。\n", "outputFormat": "此数模 $10007$ 后的结果。\n", "hint": "对于 $50\\%$ 的数据：$a_i=1$。\n\n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^4$，$1 \\leq m \\leq 100$，$0 \\leq a_i \\leq 100$。\n\n", "locale": "zh-CN", "translations": {"en": {"title": "Playing Cards", "background": "", "description": "Combinatorics is an important branch of mathematics that studies discrete objects. It mainly focuses on problems about the existence, counting, and construction of configurations (also called combinatorial models) that satisfy certain conditions. Its main topics include combinatorial counting, combinatorial design, combinatorial matrices, and combinatorial optimization.\n\nWith the rapid development of computer science, the importance of combinatorics has become more and more evident, because the core of computer science is using algorithms to process discrete data.\n\nToday we study an interesting and simple counting problem in combinatorics:\n\nFrom a deck of $n$ distinct playing cards, deal to $m$ people; the $i$-th person receives $a_i$ cards. Find the number of ways to do this. This number may be very large; please output the result modulo $10007$.", "inputFormat": "The first line contains two integers $n, m$.\n\nThe second line contains $m$ integers $a_i$.", "outputFormat": "Output the result modulo $10007$.", "hint": "For $50\\%$ of the testdata: $a_i = 1$.\n\nFor $100\\%$ of the testdata: $1 \\leq n \\leq 10^4$, $1 \\leq m \\leq 100$, $0 \\leq a_i \\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "扑克牌", "background": "", "description": "组合数学是数学的重要组成部分，是一门研究离散对象的科学，它主要研究满足一定条件的组态（也称组合模型）的存在、计数以及构造等方面的问题。组合数学的主要内容有组合计数、组合设计、组合矩阵、组合优化等。\n\n随着计算机科学的日益发展，组合数学的重要性也日渐凸显，因为计算机科学的核心内容是使用算法处理离散数据。\n\n今天我们来研究组合数学中的一个有趣的问题，也是一个简单的计数问题：\n\n从一副含有 $n$ 张的扑克牌(每张扑克牌都不相同)中，分给 $m$ 个人，第 $i$ 个人得到 $a_i$ 张牌，求一共有几种分法，这个数可能非常大，请输出此数模 $10007$ 后的结果。", "inputFormat": "第一行两个整数为 $n,m$。\n\n第二行 $m$ 个整数 $a_i$。\n", "outputFormat": "此数模 $10007$ 后的结果。\n", "hint": "对于 $50\\%$ 的数据：$a_i=1$。\n\n对于 $100\\%$ 的数据：$1 \\leq n \\leq 10^4$，$1 \\leq m \\leq 100$，$0 \\leq a_i \\leq 100$。\n\n", "locale": "zh-CN"}}}
{"pid": "P1359", "type": "P", "difficulty": 2, "samples": [["3\n5 15\n7", "12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "图论", "福建省历届夏令营", "最短路", "Floyd 算法"], "title": "租用游艇", "background": "", "description": "长江游艇俱乐部在长江上设置了 $n$ 个游艇出租站 $1,2,\\dots,n$。游客可在这些游艇出租站租用游艇，并在下游的任何一个游艇出租站归还游艇。游艇出租站 $i$ 到游艇出租站 $j$ 之间的租金为 $r_{i,j}$（$1\\le i\\lt j\\le n$）。试设计一个算法，计算出从游艇出租站 $1$ 到游艇出租站 $n$ 所需的最少租金。", "inputFormat": "第一行中有一个正整数 $n$，表示有 $n$ 个游艇出租站。接下来的 $n-1$ 行是一个半矩阵 $r_{i,j}$（$1\\le i<j\\le n$）。", "outputFormat": "输出计算出的从游艇出租站 $1$ 到游艇出租站 $n$ 所需的最少租金。", "hint": "$1\\le n\\le 200$，保证计算过程中任何时刻数值都不超过 $10^6$。", "locale": "zh-CN", "translations": {"en": {"title": "Yacht Rental", "background": "", "description": "The Yangtze River Yacht Club has set up $n$ yacht rental stations $1,2,\\dots,n$ along the Yangtze River. Tourists can rent a yacht at any of these stations and return it at any downstream station. The rent between yacht rental station $i$ and yacht rental station $j$ is $r_{i,j}$ ($1\\le i\\lt j\\le n$). Design an algorithm to compute the minimum total rent needed to travel from yacht rental station $1$ to yacht rental station $n$.", "inputFormat": "The first line contains a positive integer $n$, indicating there are $n$ yacht rental stations.  \nThe next $n-1$ lines give a half matrix $r_{i,j}$ ($1\\le i<j\\le n$): for each $i$ from $1$ to $n-1$, the $i$-th of these lines contains $n-i$ integers $r_{i,i+1}, r_{i,i+2}, \\dots, r_{i,n}$.", "outputFormat": "Output the minimum total rent required to travel from yacht rental station $1$ to yacht rental station $n$.", "hint": "$1\\le n\\le 200$, and it is guaranteed that at any time during the computation, all numbers do not exceed $10^6$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "租用游艇", "background": "", "description": "长江游艇俱乐部在长江上设置了 $n$ 个游艇出租站 $1,2,\\dots,n$。游客可在这些游艇出租站租用游艇，并在下游的任何一个游艇出租站归还游艇。游艇出租站 $i$ 到游艇出租站 $j$ 之间的租金为 $r_{i,j}$（$1\\le i\\lt j\\le n$）。试设计一个算法，计算出从游艇出租站 $1$ 到游艇出租站 $n$ 所需的最少租金。", "inputFormat": "第一行中有一个正整数 $n$，表示有 $n$ 个游艇出租站。接下来的 $n-1$ 行是一个半矩阵 $r_{i,j}$（$1\\le i<j\\le n$）。", "outputFormat": "输出计算出的从游艇出租站 $1$ 到游艇出租站 $n$ 所需的最少租金。", "hint": "$1\\le n\\le 200$，保证计算过程中任何时刻数值都不超过 $10^6$。", "locale": "zh-CN"}}}
{"pid": "P1360", "type": "P", "difficulty": 4, "samples": [["7 3\n7\n6\n7\n2\n1\n4\n2\n", "4\n\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2007", "USACO", "离散化", "进制", "前缀和", "队列"], "title": "[USACO07MAR] Gold Balanced Lineup G", "background": "", "description": "神仙 $\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ 在许多方面都有着很强的能力。具体的说，他总共有 $m$ 种能力，并将这些能力编号为 $1 \\sim m$。  \n\n他的能力是一天一天地提升的，每天都会有一些能力得到一次提升，她对每天的能力提升都用一个数字表示，称之为能力提升数字，比如数字 $13$，转化为二进制为 $1101$，并且从右往左看，表示他的编号为 $1,3,4$ 的能力分别得到了一次提升。  \n\n$\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ 把每天表示能力提升的数字的记了下来，如果在连续的一段时间内，她的每项能力都提升了相同的次数，她就会称这段时间为一个均衡时期，比如在连续 $5$ 天内，她的每种能力都提升了 $4$ 次，那么这就是一个长度为 $5$ 的均衡时期。\n\n于是，问题来了，给出 $\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ $n$ 天的能力提升数字，请求出均衡时期的最大长度。\n", "inputFormat": "第一行有两个整数 $n,m$，表示有 $n$ 天，$m$ 种能力。　　\n\n接下来有 $n$ 行，每行有一个整数，分别表示第 $1\\sim n$ 天的能力提升数字。  \n\n能力提升数字转化为二进制后，从右到左的每一位表示对应的能力是否在当天得到了一次提升。\n\n\n", "outputFormat": "输出只有一个整数，表示长度最大的均衡时期的长度。\n", "hint": "【数据范围】    \n对于 $50\\%$ 的数据，$1\\le n \\le 1000$。  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1\\le m \\le 30$。\n\n【样例解释】\n\n每天被提升的能力种类分别为：\n\n| 天数 | 提升的能力 |\n| :-----------: | :-----------: |\n| $1$ | $1,2,3$ |\n| $2$ | $2,3$ |\n| $3$ | $1,2,3$ |\n| $4$ | $2$ |\n| $5$ | $1$ |\n| $6$ | $3$ |\n| $7$ | $2$ |\n\n第三天到第六天为长度最长的均衡时期，因为这四天每种能力分别提升了 $2$ 次。\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO07MAR] Gold Balanced Lineup G", "background": "", "description": "Immortal $\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ has strong abilities in many aspects. Specifically, she has a total of $m$ abilities, numbered $1 \\sim m$.\n\nHer abilities improve day by day. Each day, some abilities increase once. She records each day’s improvements with a single integer, called the ability upgrade number. For example, the number $13$ in binary is $1101$, and read from right to left, it indicates that abilities numbered $1, 3, 4$ each increased once that day.\n\n$\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ writes down the ability upgrade number for every day. If over a consecutive period each of her abilities increases the same number of times, she calls that period a balanced period. For example, if over $5$ consecutive days each ability increases $4$ times, then it is a balanced period of length $5$.\n\nGiven the ability upgrade numbers for $n$ days, find the maximum length of a balanced period.", "inputFormat": "The first line contains two integers $n, m$, meaning there are $n$ days and $m$ abilities.\n\nThe next $n$ lines each contain one integer, representing the ability upgrade number for days $1 \\sim n$.\n\nAfter converting an ability upgrade number to binary, from right to left, each bit indicates whether the corresponding ability increased once that day.", "outputFormat": "Output a single integer, the maximum length of a balanced period.", "hint": "Constraints  \n- For $50\\%$ of the testdata, $1 \\le n \\le 1000$.  \n- For $100\\%$ of the testdata, $1 \\le n \\le 10^5$, $1 \\le m \\le 30$.\n\nSample Explanation\n\nThe abilities improved each day are as follows:\n\n| Day | Abilities improved |\n| :-----------: | :-----------: |\n| $1$ | $1, 2, 3$ |\n| $2$ | $2, 3$ |\n| $3$ | $1, 2, 3$ |\n| $4$ | $2$ |\n| $5$ | $1$ |\n| $6$ | $3$ |\n| $7$ | $2$ |\n\nDays $3$ through $6$ form the longest balanced period because, in those four days, each ability increased exactly $2$ times.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO07MAR] Gold Balanced Lineup G", "background": "", "description": "神仙 $\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ 在许多方面都有着很强的能力。具体的说，他总共有 $m$ 种能力，并将这些能力编号为 $1 \\sim m$。  \n\n他的能力是一天一天地提升的，每天都会有一些能力得到一次提升，她对每天的能力提升都用一个数字表示，称之为能力提升数字，比如数字 $13$，转化为二进制为 $1101$，并且从右往左看，表示他的编号为 $1,3,4$ 的能力分别得到了一次提升。  \n\n$\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ 把每天表示能力提升的数字的记了下来，如果在连续的一段时间内，她的每项能力都提升了相同的次数，她就会称这段时间为一个均衡时期，比如在连续 $5$ 天内，她的每种能力都提升了 $4$ 次，那么这就是一个长度为 $5$ 的均衡时期。\n\n于是，问题来了，给出 $\\mathsf E \\color{red} \\mathsf{ntropyIncreaser}$ $n$ 天的能力提升数字，请求出均衡时期的最大长度。\n", "inputFormat": "第一行有两个整数 $n,m$，表示有 $n$ 天，$m$ 种能力。　　\n\n接下来有 $n$ 行，每行有一个整数，分别表示第 $1\\sim n$ 天的能力提升数字。  \n\n能力提升数字转化为二进制后，从右到左的每一位表示对应的能力是否在当天得到了一次提升。\n\n\n", "outputFormat": "输出只有一个整数，表示长度最大的均衡时期的长度。\n", "hint": "【数据范围】    \n对于 $50\\%$ 的数据，$1\\le n \\le 1000$。  \n对于 $100\\%$ 的数据，$1\\le n \\le 10^5$，$1\\le m \\le 30$。\n\n【样例解释】\n\n每天被提升的能力种类分别为：\n\n| 天数 | 提升的能力 |\n| :-----------: | :-----------: |\n| $1$ | $1,2,3$ |\n| $2$ | $2,3$ |\n| $3$ | $1,2,3$ |\n| $4$ | $2$ |\n| $5$ | $1$ |\n| $6$ | $3$ |\n| $7$ | $2$ |\n\n第三天到第六天为长度最长的均衡时期，因为这四天每种能力分别提升了 $2$ 次。\n", "locale": "zh-CN"}}}
