{"pid": "P8335", "type": "P", "difficulty": 7, "samples": [["5\n1 3 4 5 1\n2 1 4 3 5\n1 2 4 2 2\n2 4 5 3 5\n1 4 4 4 8", "46\n21"]], "limits": {"time": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2004", "O2优化", "Ynoi"], "title": "[Ynoi2004] tars2", "background": "", "description": "你需要维护平面上的整点，每个点初始有点权 $0$，共 $m$ 次操作。\n\n修改操作：给定 $x,y,d,w$，将满足 $|X-x|<d,|Y-y|<d$ 的整点 $(X,Y)$ 的点权增加 $w\\cdot(d-\\max(|X-x|,|Y-y|))$；\n\n查询操作：给定 $x_1,x_2,y_1,y_2$，查询满足 $x_1\\le X\\le x_2,\\;y_1\\le Y\\le y_2$ 的整点 $(X,Y)$ 的点权之和，答案对 $2^{30}$ 取模。", "inputFormat": "第一行一个整数 $m$，接下来 $m$ 行，每行表示一个操作。\n\n修改操作表示为 `1 x y d w`；\n\n查询操作表示为 `2 x1 x2 y1 y2`。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示取模后的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le 10^5$，$1\\le x_1\\le x_2\\le {10}^8$，$1\\le y_1\\le y_2\\le {10}^8$，$1\\le x,y,d,w\\le {10}^8$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2004] tars2", "background": "", "description": "你需要维护平面上的整点，每个点初始有点权 $0$，共 $m$ 次操作。\n\n修改操作：给定 $x,y,d,w$，将满足 $|X-x|<d,|Y-y|<d$ 的整点 $(X,Y)$ 的点权增加 $w\\cdot(d-\\max(|X-x|,|Y-y|))$；\n\n查询操作：给定 $x_1,x_2,y_1,y_2$，查询满足 $x_1\\le X\\le x_2,\\;y_1\\le Y\\le y_2$ 的整点 $(X,Y)$ 的点权之和，答案对 $2^{30}$ 取模。", "inputFormat": "第一行一个整数 $m$，接下来 $m$ 行，每行表示一个操作。\n\n修改操作表示为 `1 x y d w`；\n\n查询操作表示为 `2 x1 x2 y1 y2`。", "outputFormat": "对每个查询操作，输出一行，包含一个整数，表示取模后的答案。", "hint": "Idea：nzhtl1477，Solution：ccz181078，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，满足 $1\\le m\\le 10^5$，$1\\le x_1\\le x_2\\le {10}^8$，$1\\le y_1\\le y_2\\le {10}^8$，$1\\le x,y,d,w\\le {10}^8$。\n", "locale": "zh-CN"}}}
{"pid": "P8336", "type": "P", "difficulty": 7, "samples": [["5 4\n1 2 3 3\n3 5\n2 2\n5 2\n2 5\n", "7\n"]], "limits": {"time": [2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500, 2500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2004", "O2优化", "Ynoi"], "title": "[Ynoi2004] 2stmst", "background": "", "description": "已知 $n$ 个顶点的有根树，以及 $m$ 个二元组 $(x_i,y_i)$，其中 $x_i,y_i$ 是树的顶点。\n\n对于树的顶点 $a,b$，定义 $D(a,b)$ 为：在以 $a$ 为根的子树中，但不在以 $b$ 为根的子树中的顶点个数。\n\n你需要求出以这些二元组为顶点的完全图的最小生成树，其中 $(x_i,y_i)$ 和 $(x_j,y_j)$ 之间的边权是 $D(x_i,x_j)+D(x_j,x_i)+D(y_i,y_j)+D(y_j,y_i)$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n之后一行 $n-1$ 个数，其中第 $i$ 个数表示编号为 $i+1$ 的节点的父亲 $f_{i+1}$，保证 $f_{i+1}< i+1$。\n\n之后 $m$ 行，第 $i$ 行两个数 $x_i,y_i$，表示一个给定的二元组。", "outputFormat": "输出一个整数，表示最小生成树的边权和。", "hint": "Idea：nzhtl1477，Solution：ccz181078( $O(m\\log n\\log m+n\\log n)$ )，Rainbow_qwq( $O(m\\log n+n)$ )，Code：ccz181078&djq_cpp&Rainbow_qwq，Data：ccz181078\n\n样例解释：\n\n最小生成树包含边 $(1,4,1),(2,3,3),(2,4,3)$，三元组表示第一个二元组的编号，第二个二元组的编号，边权。边权和为 $7$。\n\n数据范围：\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6,1\\le m\\le 10^5$。对任意 $i=1,2,\\dots n-1$，满足 $1\\le f_{i+1}<i+1$。对任意 $i=1,2,\\dots m$，满足 $1\\le x_i,y_i\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2004] 2stmst", "background": "", "description": "已知 $n$ 个顶点的有根树，以及 $m$ 个二元组 $(x_i,y_i)$，其中 $x_i,y_i$ 是树的顶点。\n\n对于树的顶点 $a,b$，定义 $D(a,b)$ 为：在以 $a$ 为根的子树中，但不在以 $b$ 为根的子树中的顶点个数。\n\n你需要求出以这些二元组为顶点的完全图的最小生成树，其中 $(x_i,y_i)$ 和 $(x_j,y_j)$ 之间的边权是 $D(x_i,x_j)+D(x_j,x_i)+D(y_i,y_j)+D(y_j,y_i)$。", "inputFormat": "第一行两个数表示 $n,m$。\n\n之后一行 $n-1$ 个数，其中第 $i$ 个数表示编号为 $i+1$ 的节点的父亲 $f_{i+1}$，保证 $f_{i+1}< i+1$。\n\n之后 $m$ 行，第 $i$ 行两个数 $x_i,y_i$，表示一个给定的二元组。", "outputFormat": "输出一个整数，表示最小生成树的边权和。", "hint": "Idea：nzhtl1477，Solution：ccz181078( $O(m\\log n\\log m+n\\log n)$ )，Rainbow_qwq( $O(m\\log n+n)$ )，Code：ccz181078&djq_cpp&Rainbow_qwq，Data：ccz181078\n\n样例解释：\n\n最小生成树包含边 $(1,4,1),(2,3,3),(2,4,3)$，三元组表示第一个二元组的编号，第二个二元组的编号，边权。边权和为 $7$。\n\n数据范围：\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6,1\\le m\\le 10^5$。对任意 $i=1,2,\\dots n-1$，满足 $1\\le f_{i+1}<i+1$。对任意 $i=1,2,\\dots m$，满足 $1\\le x_i,y_i\\le n$。", "locale": "zh-CN"}}}
{"pid": "P8337", "type": "P", "difficulty": 7, "samples": [["5 10 2\n0000000001000020000300004", "4834712607666044912"], ["20 100 16500242824326557842\n0000500006000070000800000000010000200003000040000000001000020000300004000090000:0000;0000<0000=0000>", "5449866856465492064"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2004", "O2优化", "Ynoi"], "title": "[Ynoi2004] rsxc", "background": "", "description": "给定一个长为 $n$（$1\\le n\\le 6\\times 10^5$）的非负整数序列 $a_0,a_1,\\dots,a_{n-1}$（$0\\le a_i<2^{30}$）。\n\n有 $q$ 个询问（$1\\le q\\le 10^6$）。\n\n每次询问给出两个整数 $l,r$（$0\\le l\\le r<n$），求有多少对整数 $(x,y)$ 满足：\n\n - $l\\le x\\le y\\le r$；\n - $\\forall i,j\\in S\\ :i\\oplus j\\in S$，其中 $S:=\\{a_k\\}_{k=x}^y$。", "inputFormat": "由于本题数据较多，您不需要输入输出，请完善以下程序中的 `init(int, int, vector<int>)` 和 `solve(int, int)` 函数，并提交。正解不依赖于其模板。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nvoid init(int n, int q, vector<int> a) {\n  // implement...\n}\n\nlong long solve(int l, int r) {\n  // implement...\n}\n\nint main() {\n  int n, q;\n  uint64_t s;\n  cin >> n >> q >> s;\n  string r;\n  cin >> r;\n  vector<int> a(n);\n  for (int i = 0; i < n; i++)\n    for (int s = 5 * i; s < 5 * i + 5; s++)\n      a[i] = (a[i] * 64 + (int)(r[s]) - (int)('0'));\n  init(n, q, a);\n  uint64_t state = 0;\n  auto splitmix64 = [&](uint64_t v) {\n    uint64_t z = (v + 0x9e3779b97f4a7c15);\n    z = (z ^ (z >> 30)) * 0xbf58476d1ce4e5b9;\n    z = (z ^ (z >> 27)) * 0x94d049bb133111eb;\n    return z ^ (z >> 31);\n  };\n  mt19937_64 rng(s);\n  for (int i = 0; i < q; i++) {\n    int l = (rng() ^ state) % n;\n    int r = (rng() ^ state) % n;\n    long long ans = solve(min(l, r), max(l, r));\n    state = splitmix64(state + ans);\n    if ((i + 1) % (1 << 15) == 0)\n      cout << state << endl;\n  }\n  cout << state << endl;\n}\n```\n", "outputFormat": "", "hint": "Idea：Powerless，Solution：ccz181078&nzhtl1477&w33z，Code：w33z，Data：w33z\n\n对于 $100\\%$ 的数据，$1\\leq n\\le 6\\times 10^5,1\\le q\\leq 10^6$，$0 \\le a_i < 2^{30}$，$0 \\le l \\le r < n$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2004] rsxc", "background": "", "description": "给定一个长为 $n$（$1\\le n\\le 6\\times 10^5$）的非负整数序列 $a_0,a_1,\\dots,a_{n-1}$（$0\\le a_i<2^{30}$）。\n\n有 $q$ 个询问（$1\\le q\\le 10^6$）。\n\n每次询问给出两个整数 $l,r$（$0\\le l\\le r<n$），求有多少对整数 $(x,y)$ 满足：\n\n - $l\\le x\\le y\\le r$；\n - $\\forall i,j\\in S\\ :i\\oplus j\\in S$，其中 $S:=\\{a_k\\}_{k=x}^y$。", "inputFormat": "由于本题数据较多，您不需要输入输出，请完善以下程序中的 `init(int, int, vector<int>)` 和 `solve(int, int)` 函数，并提交。正解不依赖于其模板。\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nvoid init(int n, int q, vector<int> a) {\n  // implement...\n}\n\nlong long solve(int l, int r) {\n  // implement...\n}\n\nint main() {\n  int n, q;\n  uint64_t s;\n  cin >> n >> q >> s;\n  string r;\n  cin >> r;\n  vector<int> a(n);\n  for (int i = 0; i < n; i++)\n    for (int s = 5 * i; s < 5 * i + 5; s++)\n      a[i] = (a[i] * 64 + (int)(r[s]) - (int)('0'));\n  init(n, q, a);\n  uint64_t state = 0;\n  auto splitmix64 = [&](uint64_t v) {\n    uint64_t z = (v + 0x9e3779b97f4a7c15);\n    z = (z ^ (z >> 30)) * 0xbf58476d1ce4e5b9;\n    z = (z ^ (z >> 27)) * 0x94d049bb133111eb;\n    return z ^ (z >> 31);\n  };\n  mt19937_64 rng(s);\n  for (int i = 0; i < q; i++) {\n    int l = (rng() ^ state) % n;\n    int r = (rng() ^ state) % n;\n    long long ans = solve(min(l, r), max(l, r));\n    state = splitmix64(state + ans);\n    if ((i + 1) % (1 << 15) == 0)\n      cout << state << endl;\n  }\n  cout << state << endl;\n}\n```\n", "outputFormat": "", "hint": "Idea：Powerless，Solution：ccz181078&nzhtl1477&w33z，Code：w33z，Data：w33z\n\n对于 $100\\%$ 的数据，$1\\leq n\\le 6\\times 10^5,1\\le q\\leq 10^6$，$0 \\le a_i < 2^{30}$，$0 \\le l \\le r < n$。\n", "locale": "zh-CN"}}}
{"pid": "P8338", "type": "P", "difficulty": 6, "samples": [["2\n3\n1 2 3\n3\n2 3 1\n", "12\n0\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "暴力数据结构", "各省省选", "平衡树", "2022", "安徽", "O2优化", "优先队列", "素数判断,质数,筛法"], "title": "[AHOI2022] 排列", "background": "", "description": "对于一个长度为 $n$ 的排列 $P = (p_1, p_2, \\ldots, p_n)$ 和整数 $k \\ge 0$，定义 $P$ 的 $k$ 次幂\n\n$$P^{(k)} = \\left( p^{(k)}_1, p^{(k)}_2, \\ldots, p^{(k)}_n \\right),$$\n\n该排列的第 $i$ 项为\n\n$$p^{(k)}_i = \\begin{cases} i, & k = 0, \\\\ p^{(k - 1)}_{p_i}, & k > 0. \\end{cases}$$\n\n容易证明任意排列的任意次幂都是一个排列。\n\n定义排列 $P$ 的**循环值** $v(P)$ 为最小的**正整数** $k$ 使得 $P^{(k + 1)} = P$。\n\n给出一个长度为 $n$ 的排列 $A = (a_1, a_2, \\ldots, a_n)$，对于整数 $1 \\le i, j \\le n$，定义 $f(i, j)$：若存在 $k \\ge 0$ 使得 $a^{(k)}_i = j$，则 $f(i, j) = 0$，否则设排列 $A_{i j}$ 为将排列 $A$ 的第 $i$ 项 $a_i$ 和第 $j$ 项 $a_j$ 交换后得到的排列，则 $f(i, j) = v(A_{i j})$。\n\n求 $\\sum_{i = 1}^{n} \\sum_{j = 1}^{n} f(i, j)$ 的值。答案可能很大，你只需要输出其对 $({10}^9 + 7)$ 取模的结果。", "inputFormat": "**本题有多组测试数据**。输入数据的第一行为一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据，第一行一个正整数 $n$ 表示排列的长度，接下来一行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，描述输入的排列。", "outputFormat": "对于每组数据输出一行一个整数，表示题目所求的答案对 $({10}^9 + 7)$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n对于第一组测试数据，$f(1, 2) = f(2, 1) = f(2, 3) = f(3, 2) = f(1, 3) = f(3, 1) = 2$，其余的 $f(i, j)$ 均为 $0$。\n\n对于第二组测试数据，所有的 $f(i, j)$ 均为 $0$。\n\n**【样例 #2】**\n\n见附件中的 `perm/perm2.in` 与 `perm/perm2.ans`。\n\n该组样例中，第一个测试数据满足 $n \\le 35$，前四个测试数据满足 $n \\le 200$，所有测试数据满足 $n \\le 2500$。\n\n**【样例 #3】**\n\n见附件中的 `perm/perm3.in` 与 `perm/perm3.ans`。\n\n该组样例中，第一个测试数据满足特殊性质 A，第二个测试数据满足特殊性质 B，第三个测试数据满足特殊性质 C，前四个测试数据满足 $n \\le {10}^5$，第五个测试数据满足 $n \\le 5 \\times {10}^5$。\n\n特殊性质的具体内容参见数据范围部分。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的测试数据，$1 \\le T \\le 5$，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le a_i \\le n$。\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | ${10}^5$ | A |\n| $3$ | $35$ | 无 |\n| $4$ | $200$ | 无 |\n| $5$ | $2500$ | 无 |\n| $6$ | ${10}^5$ | B |\n| $7$ | ${10}^5$ | C |\n| $8$ | ${10}^5$ | 无 |\n| $9 \\sim 10$ | $5 \\times {10}^5$ | 无 |\n\n特殊性质 A：$a_i = (i \\bmod n) + 1$。  \n特殊性质 B：对于任意 $1 \\le i \\le n$，存在 $1 \\le k \\le 20$，$a^{(k)}_i = i$。  \n特殊性质 C：存在大小不超过 $10$ 的集合 $S$，使得对于任意 $1 \\le i \\le n$，存在 $x \\in S, k \\ge 0$，$a^{(k)}_x = i$。\n\n**【提示】**\n\n输入数据规模较大，请使用较为快速的输入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2022] 排列", "background": "", "description": "对于一个长度为 $n$ 的排列 $P = (p_1, p_2, \\ldots, p_n)$ 和整数 $k \\ge 0$，定义 $P$ 的 $k$ 次幂\n\n$$P^{(k)} = \\left( p^{(k)}_1, p^{(k)}_2, \\ldots, p^{(k)}_n \\right),$$\n\n该排列的第 $i$ 项为\n\n$$p^{(k)}_i = \\begin{cases} i, & k = 0, \\\\ p^{(k - 1)}_{p_i}, & k > 0. \\end{cases}$$\n\n容易证明任意排列的任意次幂都是一个排列。\n\n定义排列 $P$ 的**循环值** $v(P)$ 为最小的**正整数** $k$ 使得 $P^{(k + 1)} = P$。\n\n给出一个长度为 $n$ 的排列 $A = (a_1, a_2, \\ldots, a_n)$，对于整数 $1 \\le i, j \\le n$，定义 $f(i, j)$：若存在 $k \\ge 0$ 使得 $a^{(k)}_i = j$，则 $f(i, j) = 0$，否则设排列 $A_{i j}$ 为将排列 $A$ 的第 $i$ 项 $a_i$ 和第 $j$ 项 $a_j$ 交换后得到的排列，则 $f(i, j) = v(A_{i j})$。\n\n求 $\\sum_{i = 1}^{n} \\sum_{j = 1}^{n} f(i, j)$ 的值。答案可能很大，你只需要输出其对 $({10}^9 + 7)$ 取模的结果。", "inputFormat": "**本题有多组测试数据**。输入数据的第一行为一个整数 $T$，表示测试数据组数。\n\n对于每组测试数据，第一行一个正整数 $n$ 表示排列的长度，接下来一行 $n$ 个整数 $a_1, a_2, \\ldots, a_n$，描述输入的排列。", "outputFormat": "对于每组数据输出一行一个整数，表示题目所求的答案对 $({10}^9 + 7)$ 取模的结果。", "hint": "**【样例解释 #1】**\n\n对于第一组测试数据，$f(1, 2) = f(2, 1) = f(2, 3) = f(3, 2) = f(1, 3) = f(3, 1) = 2$，其余的 $f(i, j)$ 均为 $0$。\n\n对于第二组测试数据，所有的 $f(i, j)$ 均为 $0$。\n\n**【样例 #2】**\n\n见附件中的 `perm/perm2.in` 与 `perm/perm2.ans`。\n\n该组样例中，第一个测试数据满足 $n \\le 35$，前四个测试数据满足 $n \\le 200$，所有测试数据满足 $n \\le 2500$。\n\n**【样例 #3】**\n\n见附件中的 `perm/perm3.in` 与 `perm/perm3.ans`。\n\n该组样例中，第一个测试数据满足特殊性质 A，第二个测试数据满足特殊性质 B，第三个测试数据满足特殊性质 C，前四个测试数据满足 $n \\le {10}^5$，第五个测试数据满足 $n \\le 5 \\times {10}^5$。\n\n特殊性质的具体内容参见数据范围部分。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的测试数据，$1 \\le T \\le 5$，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le a_i \\le n$。\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | ${10}^5$ | A |\n| $3$ | $35$ | 无 |\n| $4$ | $200$ | 无 |\n| $5$ | $2500$ | 无 |\n| $6$ | ${10}^5$ | B |\n| $7$ | ${10}^5$ | C |\n| $8$ | ${10}^5$ | 无 |\n| $9 \\sim 10$ | $5 \\times {10}^5$ | 无 |\n\n特殊性质 A：$a_i = (i \\bmod n) + 1$。  \n特殊性质 B：对于任意 $1 \\le i \\le n$，存在 $1 \\le k \\le 20$，$a^{(k)}_i = i$。  \n特殊性质 C：存在大小不超过 $10$ 的集合 $S$，使得对于任意 $1 \\le i \\le n$，存在 $x \\in S, k \\ge 0$，$a^{(k)}_x = i$。\n\n**【提示】**\n\n输入数据规模较大，请使用较为快速的输入方式。", "locale": "zh-CN"}}}
{"pid": "P8339", "type": "P", "difficulty": 6, "samples": [["5 3\n1 2\n2 2\n1 3\n2 3\n2 2\n1 2\n1 3\n3 4\n3 5\n2 4\n2 5\n4 2\n", "1\n1\n1\n"], ["见附件中的 keys/keys2.in", "见附件中的 keys/keys2.ans"], ["见附件中的 keys/keys3.in", "见附件中的 keys/keys3.ans"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "树状数组", "2022", "安徽", "O2优化", "虚树", "扫描线"], "title": "[AHOI2022] 钥匙", "background": "", "description": "有 $n$ 座城市，编号为 $1, 2, \\ldots, n$。这些城市由 $n - 1$ 条无向道路相连，每条无向道路连接两座城市，保证任意两个城市连通。即这 $n$ 座城市构成一棵树。\n\n每座城市都有一件宝物。宝物分为两种：钥匙和宝箱。在一座城市里，要么有一把钥匙，要么有一个宝箱。钥匙和宝箱有不同的颜色，颜色为 $i$ 的钥匙只能打开颜色为 $i$ 的宝箱，打开宝箱后可以获得一枚金币，同时这把钥匙会损坏。\n\n**由于某种特殊的原因，同一种的钥匙最多只有 $\\bm{5}$ 把（同一种颜色的宝箱数量不限）。**\n\n现在小 R 规划了 $m$ 次旅行，第 $i$ 次旅行的起点为 $s_i$，终点为 $e_i$。小 R 从 $s_i$ 沿最短路径走到 $e_i$。当他走到一座有钥匙的城市时，他可以将钥匙放入背包。当他走到一座有宝箱的城市时，如果他有相应颜色的钥匙，那么他就会打开这个宝箱并获得一个金币；如果他没有相应颜色的钥匙，那么他什么都不做（宝箱不能带走）。问每次旅行能获得多少枚金币。\n\n**注意：旅行相互独立，即一次旅行完之后所有的钥匙和宝箱都会恢复到初始状态。**", "inputFormat": "第一行两个正整数 $n, m$，表示城市数量和旅行数量。\n\n接下来 $n$ 行，每行两个正整数 $t_i, c_i$，$t_i=1$ 表示第 $i$ 个城市里有一把钥匙，$t_i=2$ 表示有一个宝箱。$c_i$ 表示第 $i$ 座城市里钥匙或宝箱的颜色。数据保证每种颜色的钥匙都不超过 $5$ 把。\n\n接下来 $n - 1$ 行，每行两个正整数 $u_i, v_i$，表示有一条连接 $u_i$ 和 $v_i$ 的无向道路。\n\n接下来 $m$ 行，每行两个正整数 $s_i, e_i$ 表示一次旅行的起点和终点。", "outputFormat": "输出 $m$ 行，每行一个整数，表示第 $i$ 次旅行能获得的金币数量。", "hint": "**【样例 \\#4】**\n\n见附件中的 `keys/keys4.in` 与 `keys/keys4.ans`。\n\n该组样例满足 $n, m \\le {10}^5$ 和特殊性质 A。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le m \\le {10}^6$，$1 \\le t_i \\le 2$，$1 \\le c_i, u_i, v_i, s_i, e_i \\le n$，每种颜色的钥匙都不超过 $5$ 把。\n\n| 测试点编号 | $n \\le$ | $m \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $100$ | $100$ | 无 |\n| $2 \\sim 3$ | $5000$ | $5000$ | 无 |\n| $4 \\sim 5$ | ${10}^5$ | ${10}^5$ | 无 |\n| $6 \\sim 8$ | $5 \\times {10}^5$ | ${10}^6$ | A |\n| $9 \\sim 10$ | $5 \\times {10}^5$ | ${10}^6$ | 无 |\n\n特殊性质 A：对于每种出现过的颜色，恰有一把钥匙和一个宝箱对应该颜色。\n\n**【提示】**\n\n输入输出数据较大，请使用较为快速的输入输出方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2022] 钥匙", "background": "", "description": "有 $n$ 座城市，编号为 $1, 2, \\ldots, n$。这些城市由 $n - 1$ 条无向道路相连，每条无向道路连接两座城市，保证任意两个城市连通。即这 $n$ 座城市构成一棵树。\n\n每座城市都有一件宝物。宝物分为两种：钥匙和宝箱。在一座城市里，要么有一把钥匙，要么有一个宝箱。钥匙和宝箱有不同的颜色，颜色为 $i$ 的钥匙只能打开颜色为 $i$ 的宝箱，打开宝箱后可以获得一枚金币，同时这把钥匙会损坏。\n\n**由于某种特殊的原因，同一种的钥匙最多只有 $\\bm{5}$ 把（同一种颜色的宝箱数量不限）。**\n\n现在小 R 规划了 $m$ 次旅行，第 $i$ 次旅行的起点为 $s_i$，终点为 $e_i$。小 R 从 $s_i$ 沿最短路径走到 $e_i$。当他走到一座有钥匙的城市时，他可以将钥匙放入背包。当他走到一座有宝箱的城市时，如果他有相应颜色的钥匙，那么他就会打开这个宝箱并获得一个金币；如果他没有相应颜色的钥匙，那么他什么都不做（宝箱不能带走）。问每次旅行能获得多少枚金币。\n\n**注意：旅行相互独立，即一次旅行完之后所有的钥匙和宝箱都会恢复到初始状态。**", "inputFormat": "第一行两个正整数 $n, m$，表示城市数量和旅行数量。\n\n接下来 $n$ 行，每行两个正整数 $t_i, c_i$，$t_i=1$ 表示第 $i$ 个城市里有一把钥匙，$t_i=2$ 表示有一个宝箱。$c_i$ 表示第 $i$ 座城市里钥匙或宝箱的颜色。数据保证每种颜色的钥匙都不超过 $5$ 把。\n\n接下来 $n - 1$ 行，每行两个正整数 $u_i, v_i$，表示有一条连接 $u_i$ 和 $v_i$ 的无向道路。\n\n接下来 $m$ 行，每行两个正整数 $s_i, e_i$ 表示一次旅行的起点和终点。", "outputFormat": "输出 $m$ 行，每行一个整数，表示第 $i$ 次旅行能获得的金币数量。", "hint": "**【样例 \\#4】**\n\n见附件中的 `keys/keys4.in` 与 `keys/keys4.ans`。\n\n该组样例满足 $n, m \\le {10}^5$ 和特殊性质 A。\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，$1 \\le n \\le 5 \\times {10}^5$，$1 \\le m \\le {10}^6$，$1 \\le t_i \\le 2$，$1 \\le c_i, u_i, v_i, s_i, e_i \\le n$，每种颜色的钥匙都不超过 $5$ 把。\n\n| 测试点编号 | $n \\le$ | $m \\le$ | 特殊性质 |\n|:-:|:-:|:-:|:-:|\n| $1$ | $100$ | $100$ | 无 |\n| $2 \\sim 3$ | $5000$ | $5000$ | 无 |\n| $4 \\sim 5$ | ${10}^5$ | ${10}^5$ | 无 |\n| $6 \\sim 8$ | $5 \\times {10}^5$ | ${10}^6$ | A |\n| $9 \\sim 10$ | $5 \\times {10}^5$ | ${10}^6$ | 无 |\n\n特殊性质 A：对于每种出现过的颜色，恰有一把钥匙和一个宝箱对应该颜色。\n\n**【提示】**\n\n输入输出数据较大，请使用较为快速的输入输出方式。", "locale": "zh-CN"}}}
{"pid": "P8340", "type": "P", "difficulty": 7, "samples": [["4 1000000007\n", "3\n"], ["10 1000000007\n", "180\n"], ["1000 65472\n", "2136\n"], ["100000 100\n", "96\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["各省省选", "2022", "安徽", "O2优化"], "title": "[AHOI2022] 山河重整", "background": "", "description": "生活在 $998244353$ 号小宇宙的艾和兰收到了归零者的讯息，决定响应回归运动。他们需要把大部分的物质归还给大宇宙，只留下极少的物质用于在新宇宙重建自己的文明。\n\n艾和兰的文明总共有 $n$ 个关键信息，编号为 $1, 2, \\ldots, n$。他们需要保留的信息是这些关键信息的一个子集 $S$。对于一个编号为 $x$ 的信息，只要 $S$ 中一个子集的编号和等于 $x$，那么他们设计的漂流瓶就可以在新宇宙将 $x$ 还原出来。\n\n艾和兰不禁想要思考，他们有多少种选择子集 $S$ 的方案，使得关键信息 $1, 2, \\ldots, n$ 均能被还原？艾和兰自然是只用 $1$ 微秒就算出了方案数的精确数值，现在他们想让你帮忙验算。由于方案数可能很大，你只需要输出方案数对 $M$ 取模的结果。", "inputFormat": "一行输入两个正整数 $N, M$。", "outputFormat": "输出一行一个整数，表示答案对 $M$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n总共有以下 $3$ 个集合满足条件：\n\n- $\\{ 1, 2, 3 \\}$\n- $\\{ 1, 2, 4 \\}$\n- $\\{ 1, 2, 3, 4 \\}$\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，保证 $1 \\le N \\le 5 \\times {10}^5$，$2 \\le M \\le 1.01 \\times {10}^9$。\n\n| 测试点编号 | $N \\le$ | $M \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $20$ | $1.01 \\times {10}^9$ |\n| $3 \\sim 4$ | $100$ | $1.01 \\times {10}^9$ |\n| $5 \\sim 6$ | $5000$ | $1.01 \\times {10}^9$ |\n| $7$ | $3 \\times {10}^5$ | $127$ |\n| $8$ | $5 \\times {10}^5$ | $127$ |\n| $9$ | $3 \\times {10}^5$ | $1.01 \\times {10}^9$ |\n| $10$ | $5 \\times {10}^5$ | $1.01 \\times {10}^9$ |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2022] 山河重整", "background": "", "description": "生活在 $998244353$ 号小宇宙的艾和兰收到了归零者的讯息，决定响应回归运动。他们需要把大部分的物质归还给大宇宙，只留下极少的物质用于在新宇宙重建自己的文明。\n\n艾和兰的文明总共有 $n$ 个关键信息，编号为 $1, 2, \\ldots, n$。他们需要保留的信息是这些关键信息的一个子集 $S$。对于一个编号为 $x$ 的信息，只要 $S$ 中一个子集的编号和等于 $x$，那么他们设计的漂流瓶就可以在新宇宙将 $x$ 还原出来。\n\n艾和兰不禁想要思考，他们有多少种选择子集 $S$ 的方案，使得关键信息 $1, 2, \\ldots, n$ 均能被还原？艾和兰自然是只用 $1$ 微秒就算出了方案数的精确数值，现在他们想让你帮忙验算。由于方案数可能很大，你只需要输出方案数对 $M$ 取模的结果。", "inputFormat": "一行输入两个正整数 $N, M$。", "outputFormat": "输出一行一个整数，表示答案对 $M$ 取模的结果。", "hint": "**【样例解释 \\#1】**\n\n总共有以下 $3$ 个集合满足条件：\n\n- $\\{ 1, 2, 3 \\}$\n- $\\{ 1, 2, 4 \\}$\n- $\\{ 1, 2, 3, 4 \\}$\n\n**【数据范围】**\n\n对于 $100 \\%$ 的数据，保证 $1 \\le N \\le 5 \\times {10}^5$，$2 \\le M \\le 1.01 \\times {10}^9$。\n\n| 测试点编号 | $N \\le$ | $M \\le$ |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $20$ | $1.01 \\times {10}^9$ |\n| $3 \\sim 4$ | $100$ | $1.01 \\times {10}^9$ |\n| $5 \\sim 6$ | $5000$ | $1.01 \\times {10}^9$ |\n| $7$ | $3 \\times {10}^5$ | $127$ |\n| $8$ | $5 \\times {10}^5$ | $127$ |\n| $9$ | $3 \\times {10}^5$ | $1.01 \\times {10}^9$ |\n| $10$ | $5 \\times {10}^5$ | $1.01 \\times {10}^9$ |", "locale": "zh-CN"}}}
{"pid": "P8341", "type": "P", "difficulty": 7, "samples": [["2\n5 5\n1 2\n3 1\n3 4\n5 3\n1 2\n1 4\n3 5\n3 5\n3 4\n10 5\n1 2\n3 1\n3 4\n5 3\n6 5\n7 8\n5 7\n7 9\n9 10\n1 2\n3 5\n5 6\n7 8\n9 10\n", "2\n2\n"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["各省省选", "2022", "安徽", "Special Judge", "O2优化"], "title": "[AHOI2022] 回忆", "background": "生活在题面里的他们，是一群怪异的少年。\n\n对城市中修建道路需满足的基本物理限制熟视无睹，沉迷于十万个城市、百万条道路上的各种结构。\n\n明明知道真正需要的数字庞大到无法计算，却偏要关心它模一个奇怪素数之后得到的结果。\n\n如此智力超群的他们，却总是在自己提出的诡异的问题下败下阵来，把它们一股脑地丢给你们来做。\n\n如今，他们长大了。他们学习到更普适的理论，习惯了更抽象的符号，不必再思考如此古怪的问题。但他们不曾料到，你们却以这些 “无用” 的问题为驱动，于计算机学科体系的一隅，开垦出了一片独属于 OI 的新天地。\n\n有一天，他们各自回忆起了少年时期提出的问题。", "description": "少年时，他们提出了 $n$ 个问题，从 $1$ 到 $n$ 编号。一个问题总由一个更基础的问题衍生而来，因此问题之间构成了一个树形的结构：$1$ 号问题是最基本的问题，也就是树的根节点，而其他问题都由其父亲节点对应的问题衍生而来。如果两个问题在树上相邻，则称这两个问题**彼此相关**。\n\n少年时期的他们一共做了 $m$ 次研究，第 $i$ 次的研究从提出较为基本的问题 $s_i$ 开始，将它不断地修改、推广，最终提出问题 $t_i$。这些研究满足 $s_i \\ne t_i$ 且 **$\\bm{s_i}$ 必定是 $\\bm{t_i}$ 的祖先**。即使研究的问题完全相同，从不同的角度研究会有不同的结果，因此**可能存在 $\\bm{i \\ne j, (s_i, t_i) = (s_j, t_j)}$ 的情形**。\n\n现在，他们正一轮轮地回忆着少年时提出的问题。在他们每一轮对问题的回忆中，他们首先回忆到 $n$ 个问题中的任意一个。接下来，如果存在与当前回忆到的问题**彼此相关且在这轮回忆中没有被回忆到**的问题，那么他们可以将思绪从当前问题上切换到这些问题中的**任意一个**，并回忆到这个新的问题。他们可以不断地切换思绪，也可以在回忆到任何一个问题之后结束回忆。**每一轮回忆是独立的，也就是说一个问题可以被多轮回忆回忆起。**\n\n如果在某一轮回忆中，他们**同时**回忆到了问题 $s_i$ 和问题 $t_i$，则称第 $i$ 次研究**被想起**。\n\n为了更好地理解上述概念，考察以下例子：$n = 5$，问题 $1$ 与问题 $2, 3$ 相关，问题 $3$ 与问题 $4, 5$ 相关。一轮可能的回忆是：从问题 $2$ 开始回忆，切换思绪到问题 $1$，再切换到问题 $3$，最终切换到问题 $5$ 并结束回忆。如果 $m = 4$，$(s_1, t_1) = (1, 2), (s_2, t_2) = (1, 4), (s_3, t_3) = (s_4, t_4) = (3, 5)$，那么这轮回忆会让第 $1$ 次、第 $3$ 次和第 $4$ 次研究被想起，而第 $2$ 次研究不会被想起。\n\n他们问你们的最后一个问题是：**如果每轮回忆的起点以及思绪的切换可以任意选择，最少需要多少轮回忆才能使所有的研究都被想起。**", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $T$，表示数据组数。\n\n对于每组测试数据，第一行包含两个正整数 $n, m$，分别表示问题的个数和研究的个数。\n\n接下来 $n - 1$ 行每行包含两个正整数 $u_i, v_i$，表示问题 $u_i$ 与问题 $v_i$ 相关。\n\n接下来 $m$ 行每行包含两个正整数 $s_i, t_i$，描述一次研究。", "outputFormat": "对于每组测试数据输出一行一个正整数，表示他们**最少**需要回忆的轮数使得 $m$ 次研究均被想起。", "hint": "**【样例解释 \\#1】**\n\n样例中的第一组数据与题目描述所给的例子相同。一种可能的回忆方案为：\n\n- 第一轮回忆中，从问题 $2$ 开始，依次切换思绪到问题 $1, 3, 5$。此时第 $1, 3, 4$ 次研究被想起，但第 $2, 5$ 次没有。\n- 第二轮回忆中，从问题 $4$ 开始，依次切换思绪到问题 $3, 1$。此时第 $2, 5$ 次研究被想起。\n\n第二组数据符合特性 A 的要求。一种可能的回忆方案为：第一次回忆依次回忆到 $2, 1, 3, 5, 6$，第二次回忆依次回忆到 $8, 7, 9, 10$。\n\n**【样例 \\#2】**\n\n见附件中的 `memory/memory2.in` 与 `memory/memory2.ans`。\n\n这组数据满足了测试点 $1 \\sim 4$ 的条件。\n\n**【样例 \\#3】**\n\n见附件中的 `memory/memory3.in` 与 `memory/memory3.ans`。\n\n这组样例满足了特性 A 的条件。且除了后 $3$ 组数据外，其余样例均满足 $n, m \\le 1000$。除了后 $30$ 组数据外，其余样例均满足 $n, m \\le 30$。你也可以用这组样例完成对较小规模数据的测试。\n\n**【样例 \\#4】**\n\n见附件中的 `memory/memory4.in` 与 `memory/memory4.ans`。\n\n这组样例满足了测试点 $24 \\sim 25$ 的条件。同样例 \\#3，本样例满足：除了后 $3$ 组数据外，其余样例均满足 $n, m \\le 1000$。除了后 $30$ 组数据外，其余样例均满足 $n, m \\le 30$。你也可以用这组样例完成对较小规模数据的测试。\n\n**【样例 \\#5】**\n\n见附件中的 `memory/memory5.in` 与 `memory/memory5.ans`。\n\n这组样例满足了特性 B 的条件。\n\n**【样例 \\#6】**\n\n见附件中的 `memory/memory6.in` 与 `memory/memory6.ans`。\n\n这组样例满足了特性 C 的条件。\n\n**【评分方式】**\n\n对于每一组测试点，如果你的输出格式正确，且每一组数据输出的答案正确，那么你会获得 $4$ 分。\n\n否则，如果你的输出格式正确，且对于每一组数据，你输出的答案**与正确答案相等或者比正确答案大 $\\bm{1}$**，那么你将在此测试点上获得 $3$ 分。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点。对于所有的测试点，$1 \\le n, m \\le 2 \\times {10}^5$，$1 \\le \\sum n, \\sum m \\le\n5 \\times {10}^5$，$1 \\le u_i, v_i, s_i, t_i \\le n$，$s_i \\ne t_i$。保证输入的 $(u_i, v_i)$ 构成一棵树，$s_i$ 在以 $1$ 为根的树上是 $t_i$ 的祖先。\n\n| 测试点 | 规模限制 | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 4$ | $T \\le 3000$，$n \\le 50$，$m \\le 15$ 且最多有 $5$ 组数据满足 $m \\ge 10$ | 无 |\n| $5 \\sim 6$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | A |\n| $7$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | B |\n| $8$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | C |\n| $9$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | 无 |\n| $10 \\sim 11$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | A |\n| $12$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | B |\n| $13$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | C |\n| $14 \\sim 16$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | 无 |\n| $17 \\sim 18$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | B |\n| $19 \\sim 20$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | C |\n| $21 \\sim 23$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | A |\n| $24 \\sim 25$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | 无 |\n\n特殊性质 A：保证 $n$ 为偶数，且树的结构为：对于任意正整数 $1 \\le i \\le \\lfloor \\frac{n}{2} \\rfloor$，$2 i$ 的父亲为 $2 i - 1$；若 $i \\ge 2$，则 $2 i - 1$ 的父亲为 $2 i - 3$。  \n特殊性质 B：保证对于所有的正整数 $1 \\le i \\le m$，$s_i$ 为 $t_i$ 的父亲。  \n特殊性质 C：保证对于所有的正整数 $1 \\le i \\le m$，$s_i = 1$。\n\n请注意，**测试点的难度与编号并没有直接关系**。\n\n**【提示】**\n\n请注意，为了取得部分分，你必须保证输出格式正确，即：输出恰好有 $m$ 行，且每行是一个正整数。\n\n此外，如果某组测试数据中你输出的结果比答案小 $1$ 而不是大 $1$，那么你**不能**在该测试点获得 $3$ 分。\n\n本题部分测试点读入量较大。为了优化程序的总运行时间，我们建议你采用较为快速的读入方式。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[AHOI2022] 回忆", "background": "生活在题面里的他们，是一群怪异的少年。\n\n对城市中修建道路需满足的基本物理限制熟视无睹，沉迷于十万个城市、百万条道路上的各种结构。\n\n明明知道真正需要的数字庞大到无法计算，却偏要关心它模一个奇怪素数之后得到的结果。\n\n如此智力超群的他们，却总是在自己提出的诡异的问题下败下阵来，把它们一股脑地丢给你们来做。\n\n如今，他们长大了。他们学习到更普适的理论，习惯了更抽象的符号，不必再思考如此古怪的问题。但他们不曾料到，你们却以这些 “无用” 的问题为驱动，于计算机学科体系的一隅，开垦出了一片独属于 OI 的新天地。\n\n有一天，他们各自回忆起了少年时期提出的问题。", "description": "少年时，他们提出了 $n$ 个问题，从 $1$ 到 $n$ 编号。一个问题总由一个更基础的问题衍生而来，因此问题之间构成了一个树形的结构：$1$ 号问题是最基本的问题，也就是树的根节点，而其他问题都由其父亲节点对应的问题衍生而来。如果两个问题在树上相邻，则称这两个问题**彼此相关**。\n\n少年时期的他们一共做了 $m$ 次研究，第 $i$ 次的研究从提出较为基本的问题 $s_i$ 开始，将它不断地修改、推广，最终提出问题 $t_i$。这些研究满足 $s_i \\ne t_i$ 且 **$\\bm{s_i}$ 必定是 $\\bm{t_i}$ 的祖先**。即使研究的问题完全相同，从不同的角度研究会有不同的结果，因此**可能存在 $\\bm{i \\ne j, (s_i, t_i) = (s_j, t_j)}$ 的情形**。\n\n现在，他们正一轮轮地回忆着少年时提出的问题。在他们每一轮对问题的回忆中，他们首先回忆到 $n$ 个问题中的任意一个。接下来，如果存在与当前回忆到的问题**彼此相关且在这轮回忆中没有被回忆到**的问题，那么他们可以将思绪从当前问题上切换到这些问题中的**任意一个**，并回忆到这个新的问题。他们可以不断地切换思绪，也可以在回忆到任何一个问题之后结束回忆。**每一轮回忆是独立的，也就是说一个问题可以被多轮回忆回忆起。**\n\n如果在某一轮回忆中，他们**同时**回忆到了问题 $s_i$ 和问题 $t_i$，则称第 $i$ 次研究**被想起**。\n\n为了更好地理解上述概念，考察以下例子：$n = 5$，问题 $1$ 与问题 $2, 3$ 相关，问题 $3$ 与问题 $4, 5$ 相关。一轮可能的回忆是：从问题 $2$ 开始回忆，切换思绪到问题 $1$，再切换到问题 $3$，最终切换到问题 $5$ 并结束回忆。如果 $m = 4$，$(s_1, t_1) = (1, 2), (s_2, t_2) = (1, 4), (s_3, t_3) = (s_4, t_4) = (3, 5)$，那么这轮回忆会让第 $1$ 次、第 $3$ 次和第 $4$ 次研究被想起，而第 $2$ 次研究不会被想起。\n\n他们问你们的最后一个问题是：**如果每轮回忆的起点以及思绪的切换可以任意选择，最少需要多少轮回忆才能使所有的研究都被想起。**", "inputFormat": "**本题有多组测试数据**。输入的第一行包含一个正整数 $T$，表示数据组数。\n\n对于每组测试数据，第一行包含两个正整数 $n, m$，分别表示问题的个数和研究的个数。\n\n接下来 $n - 1$ 行每行包含两个正整数 $u_i, v_i$，表示问题 $u_i$ 与问题 $v_i$ 相关。\n\n接下来 $m$ 行每行包含两个正整数 $s_i, t_i$，描述一次研究。", "outputFormat": "对于每组测试数据输出一行一个正整数，表示他们**最少**需要回忆的轮数使得 $m$ 次研究均被想起。", "hint": "**【样例解释 \\#1】**\n\n样例中的第一组数据与题目描述所给的例子相同。一种可能的回忆方案为：\n\n- 第一轮回忆中，从问题 $2$ 开始，依次切换思绪到问题 $1, 3, 5$。此时第 $1, 3, 4$ 次研究被想起，但第 $2, 5$ 次没有。\n- 第二轮回忆中，从问题 $4$ 开始，依次切换思绪到问题 $3, 1$。此时第 $2, 5$ 次研究被想起。\n\n第二组数据符合特性 A 的要求。一种可能的回忆方案为：第一次回忆依次回忆到 $2, 1, 3, 5, 6$，第二次回忆依次回忆到 $8, 7, 9, 10$。\n\n**【样例 \\#2】**\n\n见附件中的 `memory/memory2.in` 与 `memory/memory2.ans`。\n\n这组数据满足了测试点 $1 \\sim 4$ 的条件。\n\n**【样例 \\#3】**\n\n见附件中的 `memory/memory3.in` 与 `memory/memory3.ans`。\n\n这组样例满足了特性 A 的条件。且除了后 $3$ 组数据外，其余样例均满足 $n, m \\le 1000$。除了后 $30$ 组数据外，其余样例均满足 $n, m \\le 30$。你也可以用这组样例完成对较小规模数据的测试。\n\n**【样例 \\#4】**\n\n见附件中的 `memory/memory4.in` 与 `memory/memory4.ans`。\n\n这组样例满足了测试点 $24 \\sim 25$ 的条件。同样例 \\#3，本样例满足：除了后 $3$ 组数据外，其余样例均满足 $n, m \\le 1000$。除了后 $30$ 组数据外，其余样例均满足 $n, m \\le 30$。你也可以用这组样例完成对较小规模数据的测试。\n\n**【样例 \\#5】**\n\n见附件中的 `memory/memory5.in` 与 `memory/memory5.ans`。\n\n这组样例满足了特性 B 的条件。\n\n**【样例 \\#6】**\n\n见附件中的 `memory/memory6.in` 与 `memory/memory6.ans`。\n\n这组样例满足了特性 C 的条件。\n\n**【评分方式】**\n\n对于每一组测试点，如果你的输出格式正确，且每一组数据输出的答案正确，那么你会获得 $4$ 分。\n\n否则，如果你的输出格式正确，且对于每一组数据，你输出的答案**与正确答案相等或者比正确答案大 $\\bm{1}$**，那么你将在此测试点上获得 $3$ 分。\n\n**【数据范围】**\n\n本题共 $25$ 个测试点。对于所有的测试点，$1 \\le n, m \\le 2 \\times {10}^5$，$1 \\le \\sum n, \\sum m \\le\n5 \\times {10}^5$，$1 \\le u_i, v_i, s_i, t_i \\le n$，$s_i \\ne t_i$。保证输入的 $(u_i, v_i)$ 构成一棵树，$s_i$ 在以 $1$ 为根的树上是 $t_i$ 的祖先。\n\n| 测试点 | 规模限制 | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 4$ | $T \\le 3000$，$n \\le 50$，$m \\le 15$ 且最多有 $5$ 组数据满足 $m \\ge 10$ | 无 |\n| $5 \\sim 6$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | A |\n| $7$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | B |\n| $8$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | C |\n| $9$ | $n, m \\le 100$，$\\sum n^3, \\sum m^3 \\le 3 \\times {10}^7$ | 无 |\n| $10 \\sim 11$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | A |\n| $12$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | B |\n| $13$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | C |\n| $14 \\sim 16$ | $n, m \\le 1000$，$\\sum n^2, \\sum m^2 \\le 3 \\times {10}^7$ | 无 |\n| $17 \\sim 18$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | B |\n| $19 \\sim 20$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | C |\n| $21 \\sim 23$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | A |\n| $24 \\sim 25$ | $n, m \\le 2 \\times {10}^5$，$\\sum n, \\sum m \\le 5 \\times {10}^5$ | 无 |\n\n特殊性质 A：保证 $n$ 为偶数，且树的结构为：对于任意正整数 $1 \\le i \\le \\lfloor \\frac{n}{2} \\rfloor$，$2 i$ 的父亲为 $2 i - 1$；若 $i \\ge 2$，则 $2 i - 1$ 的父亲为 $2 i - 3$。  \n特殊性质 B：保证对于所有的正整数 $1 \\le i \\le m$，$s_i$ 为 $t_i$ 的父亲。  \n特殊性质 C：保证对于所有的正整数 $1 \\le i \\le m$，$s_i = 1$。\n\n请注意，**测试点的难度与编号并没有直接关系**。\n\n**【提示】**\n\n请注意，为了取得部分分，你必须保证输出格式正确，即：输出恰好有 $m$ 行，且每行是一个正整数。\n\n此外，如果某组测试数据中你输出的结果比答案小 $1$ 而不是大 $1$，那么你**不能**在该测试点获得 $3$ 分。\n\n本题部分测试点读入量较大。为了优化程序的总运行时间，我们建议你采用较为快速的读入方式。", "locale": "zh-CN"}}}
{"pid": "P8342", "type": "P", "difficulty": 2, "samples": [["3\npavel 120 200 300 400 500\nkeko 150 400 300 200 100\nbartol 470 120 90 93 189", "1 2\n1 3\n2 3"], ["2\nante 275 275 275 275 275\nmate 25 100 175 250 325", "1 1\n2 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #6] Med", "background": "", "description": "今天是公开赛的最后一轮。人们知道这两个比赛采用相同的计分系统。更准确地说，两场比赛都有 $6$ 轮，每轮的积分在 $0$ 分到 $500$ 分之间，每轮比赛的分数会被加起来作为最后排名的总分。六轮比赛结束后，选手将根据总分进行排名。如果两个竞争对手得分相同，则字典序上较小的排名再字典序较大的人之前。没有两个竞争者有相同的名字。\n养蜂人非常不耐烦，他们想提前知道他们的最终排名是多少。\n\n每个养蜂人都想知道他们在最终排名中可能的最佳和最差位置。作为 $\\rm{COCB}$ 比赛程序员，他们让你告诉他们第六轮后他们可能占据的排名。\n", "inputFormat": "第一行包含一个正整数 $n(1≤n≤500)$，即养蜂人的数量。\n\n接下来 $n$ 行，每行包含一个养蜂人的名称 $s_i(1 ≤|s_i|≤10)$ 和 $5$ 个数字 $b_1\\cdots b_5$，表示第 $i$ 个养蜂人在前 $5$ 轮比赛的得分。", "outputFormat": "输出 $n$ 行。\n\n在第 $i$ 行中，输出第 $i$ 行的最佳排名和最差排名可能位置。", "hint": "样例 2：到目前为止，$\\rm{ante}$ 是 $1375$ 分，$\\rm{mate}$ 是 $875$ 分。如果 $\\rm{mate}$ 在最后一轮赢了 $500$ 分，并且 $\\rm{ante}$ 是 $0$ 分，结果排名是持平的，他们都有 $1375$ 分。然而，既然是按字典排序，$\\rm{ante}$ 比 $\\rm{mate}$ 小，所以仍将排名领先。\n\n### 数据范围：\n\n对于 $20\\%$ 的数据：$1\\le n\\le2$\n\n对于 $100\\%$ 的数据：$1\\le n\\le500$，$1\\le |s_i|\\le10$（保证每个人的名字互不相同），$1\\le b_i \\le500$\n\n##### 本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $50$ 分", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #6] Med", "background": "", "description": "今天是公开赛的最后一轮。人们知道这两个比赛采用相同的计分系统。更准确地说，两场比赛都有 $6$ 轮，每轮的积分在 $0$ 分到 $500$ 分之间，每轮比赛的分数会被加起来作为最后排名的总分。六轮比赛结束后，选手将根据总分进行排名。如果两个竞争对手得分相同，则字典序上较小的排名再字典序较大的人之前。没有两个竞争者有相同的名字。\n养蜂人非常不耐烦，他们想提前知道他们的最终排名是多少。\n\n每个养蜂人都想知道他们在最终排名中可能的最佳和最差位置。作为 $\\rm{COCB}$ 比赛程序员，他们让你告诉他们第六轮后他们可能占据的排名。\n", "inputFormat": "第一行包含一个正整数 $n(1≤n≤500)$，即养蜂人的数量。\n\n接下来 $n$ 行，每行包含一个养蜂人的名称 $s_i(1 ≤|s_i|≤10)$ 和 $5$ 个数字 $b_1\\cdots b_5$，表示第 $i$ 个养蜂人在前 $5$ 轮比赛的得分。", "outputFormat": "输出 $n$ 行。\n\n在第 $i$ 行中，输出第 $i$ 行的最佳排名和最差排名可能位置。", "hint": "样例 2：到目前为止，$\\rm{ante}$ 是 $1375$ 分，$\\rm{mate}$ 是 $875$ 分。如果 $\\rm{mate}$ 在最后一轮赢了 $500$ 分，并且 $\\rm{ante}$ 是 $0$ 分，结果排名是持平的，他们都有 $1375$ 分。然而，既然是按字典排序，$\\rm{ante}$ 比 $\\rm{mate}$ 小，所以仍将排名领先。\n\n### 数据范围：\n\n对于 $20\\%$ 的数据：$1\\le n\\le2$\n\n对于 $100\\%$ 的数据：$1\\le n\\le500$，$1\\le |s_i|\\le10$（保证每个人的名字互不相同），$1\\le b_i \\le500$\n\n##### 本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $50$ 分", "locale": "zh-CN"}}}
{"pid": "P8343", "type": "P", "difficulty": 3, "samples": [["2 2 10 10\n1 3\n4 1\n", "2"], ["3 2 3 4\n1 9\n1 1\n8 1", "3"], ["3 4 5 3\n1 1 1 1\n9 6 7 6\n8 1 9 7\n", "2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2021", "COCI（克罗地亚）"], "title": "[COCI 2021/2022 #6] Zemljište", "background": "", "description": "有一块地，大小为 $r \\times s$，$\\rm Matej$ 想买下它。这块地每个 $1\\times1$ 的正方形都有不同的价格。  \n\n设一片非空子矩阵价格总和为 $m$，则这片子矩阵的权值为 $|m-a|+|m-b|$，您需要找到最小权值的子矩阵。  \n\n您只需要输出最小权值即可。\n", "inputFormat": "第一行包含四个正整数 $r$, $s$ , $a$ 和 $b$ 。\n\n下面 $r$ 行，第 $i$ 行，有 $s$ 个正整数，第 $j$ 个数表示 $c_{i,j}$，表示价格。", "outputFormat": "一行一个整数 $v$，表示最小非空子矩阵的权值。", "hint": "### 样例解释 2  \n![](https://cdn.luogu.com.cn/upload/image_hosting/2mzt4qih.png)\n\n如图，总价格是$1 + 1 = 2$，这块地的权值是 $|3−2| + |4−2| =3$。\n\n### 数据范围：\n\n对于 $14\\%$ 的数据：$1\\le r,s\\le20$\n\n对于 $28\\%$ 的数据：$1\\le r,s\\le100$\n\n对于 $100\\%$ 的数据：$1\\le r,s\\le500$，$1\\le a,b,c_{i,j}\\le10^9$\n\n##### 本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $70$ 分", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2021/2022 #6] Zemljište", "background": "", "description": "有一块地，大小为 $r \\times s$，$\\rm Matej$ 想买下它。这块地每个 $1\\times1$ 的正方形都有不同的价格。  \n\n设一片非空子矩阵价格总和为 $m$，则这片子矩阵的权值为 $|m-a|+|m-b|$，您需要找到最小权值的子矩阵。  \n\n您只需要输出最小权值即可。\n", "inputFormat": "第一行包含四个正整数 $r$, $s$ , $a$ 和 $b$ 。\n\n下面 $r$ 行，第 $i$ 行，有 $s$ 个正整数，第 $j$ 个数表示 $c_{i,j}$，表示价格。", "outputFormat": "一行一个整数 $v$，表示最小非空子矩阵的权值。", "hint": "### 样例解释 2  \n![](https://cdn.luogu.com.cn/upload/image_hosting/2mzt4qih.png)\n\n如图，总价格是$1 + 1 = 2$，这块地的权值是 $|3−2| + |4−2| =3$。\n\n### 数据范围：\n\n对于 $14\\%$ 的数据：$1\\le r,s\\le20$\n\n对于 $28\\%$ 的数据：$1\\le r,s\\le100$\n\n对于 $100\\%$ 的数据：$1\\le r,s\\le500$，$1\\le a,b,c_{i,j}\\le10^9$\n\n##### 本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $70$ 分", "locale": "zh-CN"}}}
{"pid": "P8344", "type": "P", "difficulty": 2, "samples": [["3\n2 6 4\n5 8 2\n10 10 22", "Renko\nMerry\nRenko"], ["10\n221 44724 313\n157 60759 464\n181 145867 893\n182 59650 418\n384 168626 631\n702 650463 194\n617 376055 918\n261 215764 955\n502 744180 440\n9 1626 168", "Renko\nMerry\nRenko\nRenko\nRenko\nMerry\nMerry\nMerry\nMerry\nRenko"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-6」走在夜晚的莲台野", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/8brkt9is.png)](https://thwiki.cc/%E8%8E%B2%E5%8F%B0%E9%87%8E%E5%A4%9C%E8%A1%8C)\n\n在科学世纪中，科学昌明，信息科技高度发达，但与此同时，想象力灭绝了，而无法解释的事物则被当做一个错误抹煞，无法解释的神秘也被否定。\n\n宇佐见莲子（莲子）与玛艾露贝莉·赫恩（梅莉）成立了一个社团——秘封俱乐部。作为秘封俱乐部的成员，她们寻找着幻想的境界，在逐渐被人们所遗忘的世界中追寻着真正的美好。\n\n她们的第一个活动，是探寻莲台野的结界缺口。", "description": "### 简要题意\n\n有 $x$ 个金色木板，$y$ 个银色木板，还有一个可放下 $z$ 个木板的空容器。每向容器中放入一个金色木板**后**，会丢弃容器内所有银色木板（需要确保在放金色木板前，容器里至少还能再放得下一个木板）。问是否存在一种方式，使得所有木板都被**放进过**容器中。\n\n------\n### 原始题意\n\n在莲台野的入口，莲子与梅莉想要穿过现实与虚幻的结界，进入幻想乡。然而，穿越结界是有一定要求的。\n\n具体而言，在结界边上会有若干个细长木板，其中有 $x$ 个是金色的木板，$y$ 个是银色的木板。梅莉通过自己能够看见结界的能力，发现了一个能够容得下 $z$ 个木板的容器，并且通过自己的潜意识得知了规则：\n- 如果她们放进了一个金色的木板（需要确保在放金色木板前，容器里至少还能再放得下一个木板），那么**在容器中所有**银色的木板将被丢弃。\n- 最后需要**所有**的木板都被**放入过**容器，结界的大门才将会被打开，即她们能够进入幻想乡。\n\n现在已经是凌晨 2 点 27 分 41 秒，只有在凌晨 2 点 30 分前完成这个问题，她们才能进入幻想乡。现在，莲子和梅莉把这个问题交给了你，希望你能尽快帮她们做出回答——是否存在一种方案，使得她们能否进入幻想乡呢？\n\n由于莲子和梅莉担心你在大半夜糊弄她们，因此她们会一共询问你 $T$ 次。", "inputFormat": "- 第一行输入一个正整数 $T$，表示数据组数。\n- 第二行开始，往下 $T$ 行，每行三个正整数 $x,y,z$，含义如题目所述。", "outputFormat": "对于每次询问，输出一行，表示答案。若存在一种方案，则输出 `Renko`，否则输出 `Merry`。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n- 对于第一次询问，存在如下的方案：\n  - 先放三个银色木板；\n  - 再放一个金色木板；\n  - 再放两个银色木板；\n  - 再放一个金色木板；\n  - 再放一个银色木板。\n- 这样就可以使得每个木板都被放入过容器中，莲子和梅莉可以进入幻想乡，故输出 `Renko`。\n- 对于第二次询问，显然不存在方案。\n- 对于第三次询问，可以先放进去十个金色木板，再放进去十个银色木板。\n\n#### 样例 \\#2\n\n本组样例符合 $\\textbf{subtask 2}$ 的要求。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{T\\le } & \\bm{x\\le} & \\bm{y\\le} & \\bm{z\\le} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 20 & 1 & 10 & 10 & 10 &-\\cr\\hline\n2 & 30 & 10 & 10^3 & 10^6 & 10^3 &1\\cr\\hline\n3 & 20 & 100 & 10^6 & 10^9 & 10^6 &2\\cr\\hline\n4 & 30 & 1000 & 10^9 & 5 \\times10^{17} & 10^9 &3\\cr\\hline\n\\end{array}\n$$\n\n对 $100\\%$ 的数据，保证 $1 \\le T \\leq 1000$，$1 \\leq x,z \\leq 10^9$，$1 \\leq y \\leq 5 \\times 10^{17}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-6」走在夜晚的莲台野", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/8brkt9is.png)](https://thwiki.cc/%E8%8E%B2%E5%8F%B0%E9%87%8E%E5%A4%9C%E8%A1%8C)\n\n在科学世纪中，科学昌明，信息科技高度发达，但与此同时，想象力灭绝了，而无法解释的事物则被当做一个错误抹煞，无法解释的神秘也被否定。\n\n宇佐见莲子（莲子）与玛艾露贝莉·赫恩（梅莉）成立了一个社团——秘封俱乐部。作为秘封俱乐部的成员，她们寻找着幻想的境界，在逐渐被人们所遗忘的世界中追寻着真正的美好。\n\n她们的第一个活动，是探寻莲台野的结界缺口。", "description": "### 简要题意\n\n有 $x$ 个金色木板，$y$ 个银色木板，还有一个可放下 $z$ 个木板的空容器。每向容器中放入一个金色木板**后**，会丢弃容器内所有银色木板（需要确保在放金色木板前，容器里至少还能再放得下一个木板）。问是否存在一种方式，使得所有木板都被**放进过**容器中。\n\n------\n### 原始题意\n\n在莲台野的入口，莲子与梅莉想要穿过现实与虚幻的结界，进入幻想乡。然而，穿越结界是有一定要求的。\n\n具体而言，在结界边上会有若干个细长木板，其中有 $x$ 个是金色的木板，$y$ 个是银色的木板。梅莉通过自己能够看见结界的能力，发现了一个能够容得下 $z$ 个木板的容器，并且通过自己的潜意识得知了规则：\n- 如果她们放进了一个金色的木板（需要确保在放金色木板前，容器里至少还能再放得下一个木板），那么**在容器中所有**银色的木板将被丢弃。\n- 最后需要**所有**的木板都被**放入过**容器，结界的大门才将会被打开，即她们能够进入幻想乡。\n\n现在已经是凌晨 2 点 27 分 41 秒，只有在凌晨 2 点 30 分前完成这个问题，她们才能进入幻想乡。现在，莲子和梅莉把这个问题交给了你，希望你能尽快帮她们做出回答——是否存在一种方案，使得她们能否进入幻想乡呢？\n\n由于莲子和梅莉担心你在大半夜糊弄她们，因此她们会一共询问你 $T$ 次。", "inputFormat": "- 第一行输入一个正整数 $T$，表示数据组数。\n- 第二行开始，往下 $T$ 行，每行三个正整数 $x,y,z$，含义如题目所述。", "outputFormat": "对于每次询问，输出一行，表示答案。若存在一种方案，则输出 `Renko`，否则输出 `Merry`。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n- 对于第一次询问，存在如下的方案：\n  - 先放三个银色木板；\n  - 再放一个金色木板；\n  - 再放两个银色木板；\n  - 再放一个金色木板；\n  - 再放一个银色木板。\n- 这样就可以使得每个木板都被放入过容器中，莲子和梅莉可以进入幻想乡，故输出 `Renko`。\n- 对于第二次询问，显然不存在方案。\n- 对于第三次询问，可以先放进去十个金色木板，再放进去十个银色木板。\n\n#### 样例 \\#2\n\n本组样例符合 $\\textbf{subtask 2}$ 的要求。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{T\\le } & \\bm{x\\le} & \\bm{y\\le} & \\bm{z\\le} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 20 & 1 & 10 & 10 & 10 &-\\cr\\hline\n2 & 30 & 10 & 10^3 & 10^6 & 10^3 &1\\cr\\hline\n3 & 20 & 100 & 10^6 & 10^9 & 10^6 &2\\cr\\hline\n4 & 30 & 1000 & 10^9 & 5 \\times10^{17} & 10^9 &3\\cr\\hline\n\\end{array}\n$$\n\n对 $100\\%$ 的数据，保证 $1 \\le T \\leq 1000$，$1 \\leq x,z \\leq 10^9$，$1 \\leq y \\leq 5 \\times 10^{17}$。", "locale": "zh-CN"}}}
{"pid": "P8345", "type": "P", "difficulty": 3, "samples": [["5 20 3\n7 4 2 5 9\n2 1 4\n3 1 2 3\n4 1 4 2 5", "11\n24\n34"], ["10 928698067 3\n331485039 15480787 61584781 252174726 472089427 95998831 252561792 118119945 315548522 24453837\n4 9 1 10 2\n5 10 6 1 5 8\n1 5\n", "1798602551\n2249463436\n0\n"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "「Wdoi-6」华胥之梦", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/lkvzvoj9.png)](https://thwiki.cc/%E4%B8%9C%E6%96%B9%E6%B1%82%E9%97%BB%E5%8F%B2%E7%BA%AA/%E4%BE%BF%E7%AC%BA)", "description": "### 简要题意\n\n给定长度为 $n$ 的序列 $a$ 和常数 $c$。构造点数为 $n$ 的有向完全图 $G$ 使得边 $i\\to j$（$i\\neq j$）的长度为 $a_i-2a_j+c$，保证所有边权**非负**。\n\n接下来给出 $q$ 次询问，每次给出一个点集，试找出图 $G$ 的一条最短的简单路径，满足其经过点集中所有点，并输出它的长度。\n\n---\n### 原始题意\n\n梅莉做了一个梦，梦到自己穿越到了幻想乡的迷途竹林之中。醒来之后，她希望能够和莲子一起再次穿越境界，进入幻想乡。\n\n但是，这一次，她看到了 $n$ 个世界，其中，第 $i$ 个世界的结界强度为 $a_i$。而世界之间**两两都有**通道相连，莲子和梅莉便是通过这些通道来进行世界之间的穿梭的。\n\n为了避免错过幻想乡所在的世界，因此她们每到达一个世界，都会穿越结界。莲子和梅莉从第 $i$ 个世界中，通过一条通道，再穿越结界进入第 $j$ 个世界，需要使用的灵能为 $a_i-2a_j+c$（保证所需消耗的灵能非负），其中 $c$ 是一个常数，是梅莉每次穿越结界需要的额外灵能消耗。注意，这也意味着，从第 $i$ 个世界到第 $j$ 个世界，与第 $j$ 个世界穿越到第 $i$ 个世界所消耗的灵能，**可能是不同的**。\n\n为了能够高效地找到幻想乡，她们会对你进行 $q$ 次询问，每次询问的时候会给出一个**集合**，表示她们想要进入的世界。由于世界众多，她们希望能够节省灵能，因此她希望你能求出所有包含这些世界的简单路径（即：同一条世界间的通道不会被走多次）中，消耗灵能值之和最少的路径。你只需告诉她们消耗灵能值之和最少为多少。", "inputFormat": "- 第一行三个整数 $n,c,q$。\n- 第二行 $n$ 个整数表示数列 $a$。\n- 接下来 $q$ 行。每行第一个整数 $|S|$，即集合 $S$ 的大小。后面 $|S|$ 个互不相同的整数表示集合 $S$。", "outputFormat": "- 输出共 $q$ 行，每行一个整数，表示询问的答案。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x3r2ucsl.png)\n\n每两个点之间的边权如图所示。为了便于选手观察，边权的颜色与它所对应的边的颜色相同。\n\n对于第一个询问，可以找到路径 $4\\to 1$\n；对于第二个询问，可以找到路径 $3\\to 2\\to 1$；对于第三个询问，可以找到路径 $2\\to 4 \\to 1\\to 5$。可以证明，这三个方案分别是对应询问的最优方案。\n#### 样例 \\#2\n\n该样例符合 $\\textbf{Subtask 1}$ 的限制。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\bm{q\\le} & \\bm{\\sum |S|\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 30 & 10 & 10 & 10 & - &-\\cr\\hline\n2 & 20 & 10^5 & 10^5 & 10^5 & \\mathbf{A}&- \\cr\\hline\n3 & 20 & 10^5 & 10^5 & 10^5 & \\mathbf{B}&-  \\cr\\hline\n4 & 30 & 10^6 & 10^6 &  10^6& -&1,2,3 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：$a_i$ 单调递增。\n- 特殊性质 $\\bf B$：$a_i$ 全部相等。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq S_i \\leq n \\leq 10^6, 1\\leq \\sum |S|,q \\leq 10^6, 1 \\le a_i,c \\le 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-6」华胥之梦", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/lkvzvoj9.png)](https://thwiki.cc/%E4%B8%9C%E6%96%B9%E6%B1%82%E9%97%BB%E5%8F%B2%E7%BA%AA/%E4%BE%BF%E7%AC%BA)", "description": "### 简要题意\n\n给定长度为 $n$ 的序列 $a$ 和常数 $c$。构造点数为 $n$ 的有向完全图 $G$ 使得边 $i\\to j$（$i\\neq j$）的长度为 $a_i-2a_j+c$，保证所有边权**非负**。\n\n接下来给出 $q$ 次询问，每次给出一个点集，试找出图 $G$ 的一条最短的简单路径，满足其经过点集中所有点，并输出它的长度。\n\n---\n### 原始题意\n\n梅莉做了一个梦，梦到自己穿越到了幻想乡的迷途竹林之中。醒来之后，她希望能够和莲子一起再次穿越境界，进入幻想乡。\n\n但是，这一次，她看到了 $n$ 个世界，其中，第 $i$ 个世界的结界强度为 $a_i$。而世界之间**两两都有**通道相连，莲子和梅莉便是通过这些通道来进行世界之间的穿梭的。\n\n为了避免错过幻想乡所在的世界，因此她们每到达一个世界，都会穿越结界。莲子和梅莉从第 $i$ 个世界中，通过一条通道，再穿越结界进入第 $j$ 个世界，需要使用的灵能为 $a_i-2a_j+c$（保证所需消耗的灵能非负），其中 $c$ 是一个常数，是梅莉每次穿越结界需要的额外灵能消耗。注意，这也意味着，从第 $i$ 个世界到第 $j$ 个世界，与第 $j$ 个世界穿越到第 $i$ 个世界所消耗的灵能，**可能是不同的**。\n\n为了能够高效地找到幻想乡，她们会对你进行 $q$ 次询问，每次询问的时候会给出一个**集合**，表示她们想要进入的世界。由于世界众多，她们希望能够节省灵能，因此她希望你能求出所有包含这些世界的简单路径（即：同一条世界间的通道不会被走多次）中，消耗灵能值之和最少的路径。你只需告诉她们消耗灵能值之和最少为多少。", "inputFormat": "- 第一行三个整数 $n,c,q$。\n- 第二行 $n$ 个整数表示数列 $a$。\n- 接下来 $q$ 行。每行第一个整数 $|S|$，即集合 $S$ 的大小。后面 $|S|$ 个互不相同的整数表示集合 $S$。", "outputFormat": "- 输出共 $q$ 行，每行一个整数，表示询问的答案。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x3r2ucsl.png)\n\n每两个点之间的边权如图所示。为了便于选手观察，边权的颜色与它所对应的边的颜色相同。\n\n对于第一个询问，可以找到路径 $4\\to 1$\n；对于第二个询问，可以找到路径 $3\\to 2\\to 1$；对于第三个询问，可以找到路径 $2\\to 4 \\to 1\\to 5$。可以证明，这三个方案分别是对应询问的最优方案。\n#### 样例 \\#2\n\n该样例符合 $\\textbf{Subtask 1}$ 的限制。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\bm{q\\le} & \\bm{\\sum |S|\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 30 & 10 & 10 & 10 & - &-\\cr\\hline\n2 & 20 & 10^5 & 10^5 & 10^5 & \\mathbf{A}&- \\cr\\hline\n3 & 20 & 10^5 & 10^5 & 10^5 & \\mathbf{B}&-  \\cr\\hline\n4 & 30 & 10^6 & 10^6 &  10^6& -&1,2,3 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\bf A$：$a_i$ 单调递增。\n- 特殊性质 $\\bf B$：$a_i$ 全部相等。\n\n对于 $100\\%$ 的数据，保证 $1 \\leq S_i \\leq n \\leq 10^6, 1\\leq \\sum |S|,q \\leq 10^6, 1 \\le a_i,c \\le 10^9$。", "locale": "zh-CN"}}}
{"pid": "P8346", "type": "P", "difficulty": 5, "samples": [["1\n5\n6\n1 1\n1 3\n3 2\n2 5\n4 3\n5 4", "Renko"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["搜索", "图论", "洛谷原创", "O2优化", "二分图", "洛谷月赛"], "title": "「Wdoi-6」最澄澈的空与海", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/hiekh6t5.png)](https://thwiki.cc/%E5%8D%AF%E9%85%89%E4%B8%9C%E6%B5%B7%E9%81%93_%EF%BD%9E_Retrospective_53_minutes.)\n\n广重号载着二人向东飞驰。毫无噪音，毫无摇摆，只是一个劲向东飞驰。在“万景幕”装置之下，尽管是全地下的卯酉东海道，乘客们也能饱览美丽的富士山和太平洋的景色。\n\n但是，从这列卯酉新干线『广重』上看到的极富日本风味的美丽情景，对于梅莉来说，只不过是无趣的视觉刺激罢了。高动态范围的影像也好，极富日本风味的情景也好，都敌不过真正的天空的颜色。\n\n身与华落，心将香飞。即便肉体会像花朵一样终有一天凋落，但心却可以如花香一般飘往远方。\n\n「梅莉，你看，天上的星星呦。」", "description": "### 简要题意\n\n给定 $2n$ 个点、$m$ 条边的[二分图](http://oi-wiki.com/graph/bi-graph/#_1)（可能有重边），左部点与右部点个数相同，判断其完美匹配数量是否**恰好**为 $1$。是则输出 `Renko`，否则输出 `Merry`。\n\n> **注**：完美匹配是指，从边集中选出 $n$ 条边，这些边的顶点组成的点集恰好覆盖了所有的 $2n$ 个点。\n\n---\n### 原始题意\n\n在夜里，莲子与梅莉来到了东京的海边，躺在沙滩上，欣赏着澄澈的天空与大海，数起了天上的星星。\n\n在这些星星之中，有 $n$ 个星星 $\\{a_i\\}$，是莲子先发现的，被称为莲子星；而又有 $n$ 个星星 $\\{b_i\\}$，是梅莉先发现的，被称为梅莉星。由于她们心有灵犀，这两批星星之间**不存在交集**。  \n\n她们发现，有一些莲子星，与一些梅莉星之间恰好存在运动关系。具体而言，这些关系一共有 $m$ 组，每一组关系形如 $(u_i,v_i)$，也就是说第 $u_i$ 颗莲子星与第 $v_i$ 颗梅莉星之间存在运动关系。这些运动关系有可能重复。\n\n这让莲子和梅莉非常好奇。作为专攻超统一物理学的女大学生，莲子认为，如果认为这些星星的运动是**和谐**的，那么她应当能够从这 $m$ 个运动关系中，找出若干个运动关系，使得**每颗**星星**都被**这些运动关系**包含**的同时，不会有一颗星星**被包含在两个**运动关系之中。\n\n然而，梅莉认为，**和谐**的运动可能是不存在的，更何况即使莲子找到了**和谐**的运动，莲子也无法确保这种和谐运动的**唯一性**。两种和谐运动不同，当且仅当选取出的两组运动关系中，存在至少一个运动关系，是不相同的。\n\n因为意见不合，她们于是打情骂俏了一顿。莲子于是记下了她们所看到了星星和她们之间的运动关系，并且找到了已经证明了 P=NP 的你，希望你能告诉她们，最后是谁正确呢？", "inputFormat": "第一行输入一个正整数 $T$ 表示数据组数，对于每一组数据：\n\n- 第一行一个整数 $n$，代表莲子和梅莉每个人所先发现的星星的数量。\n- 第二行一个整数 $m$，代表运动关系的数量。\n- 接下来 $m$ 行，每行两个整数 $u_i,v_i$，表示第 $u_i$ 颗莲子星，与第 $v_i$ 颗梅莉星之间，存在运动关系。", "outputFormat": "- 如果这些星星中存在唯一的和谐运动，输出 `Renko`。\n- 如果这些星星中不存在和谐运动，或者有不唯一的和谐运动方式，输出 `Merry`。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6skoily9.png)\n\n如图所示，存在唯一的方案：$\\{1\\to 1,2\\to 5,3\\to 2,4\\to 3,5\\to 4\\}$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\bm{m\\le} & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 10 & - & - \\cr\\hline\n2 & 20 & 300 & 4\\times 10^4 & - & 1\\cr\\hline\n3 & 20 & 10^5 & 5 \\times 10^5 & \\mathbf{A} & - \\cr\\hline\n4 & 20 & 10^5 & 2 \\times 10^5 & \\mathbf{B} & - \\cr\\hline\n5 & 30& 10^6 & 2\\times 10^6 & - & 2,3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：保证对于第 $i$ 颗莲子星，与第 $i$ 颗梅莉星之间存在运动关系。\n- 特殊性质 $\\mathbf{B}$：保证 $m=2n-1$。\n\n对于 $100\\%$ 的数据，保证 $1 \\le u_i,v_i\\le n \\le 10^6$，$1 \\le m \\le 2 \\times 10^6$，$1 \\leq T \\leq 5$ 且对于每个测试点，$\\sum m \\leq 4 \\times 10^6$。\n\n对于 $\\rm Subtask\\ 5$，时间限制为 $3$ 秒。其它测试点时间限制为 $1$ 秒。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-6」最澄澈的空与海", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/hiekh6t5.png)](https://thwiki.cc/%E5%8D%AF%E9%85%89%E4%B8%9C%E6%B5%B7%E9%81%93_%EF%BD%9E_Retrospective_53_minutes.)\n\n广重号载着二人向东飞驰。毫无噪音，毫无摇摆，只是一个劲向东飞驰。在“万景幕”装置之下，尽管是全地下的卯酉东海道，乘客们也能饱览美丽的富士山和太平洋的景色。\n\n但是，从这列卯酉新干线『广重』上看到的极富日本风味的美丽情景，对于梅莉来说，只不过是无趣的视觉刺激罢了。高动态范围的影像也好，极富日本风味的情景也好，都敌不过真正的天空的颜色。\n\n身与华落，心将香飞。即便肉体会像花朵一样终有一天凋落，但心却可以如花香一般飘往远方。\n\n「梅莉，你看，天上的星星呦。」", "description": "### 简要题意\n\n给定 $2n$ 个点、$m$ 条边的[二分图](http://oi-wiki.com/graph/bi-graph/#_1)（可能有重边），左部点与右部点个数相同，判断其完美匹配数量是否**恰好**为 $1$。是则输出 `Renko`，否则输出 `Merry`。\n\n> **注**：完美匹配是指，从边集中选出 $n$ 条边，这些边的顶点组成的点集恰好覆盖了所有的 $2n$ 个点。\n\n---\n### 原始题意\n\n在夜里，莲子与梅莉来到了东京的海边，躺在沙滩上，欣赏着澄澈的天空与大海，数起了天上的星星。\n\n在这些星星之中，有 $n$ 个星星 $\\{a_i\\}$，是莲子先发现的，被称为莲子星；而又有 $n$ 个星星 $\\{b_i\\}$，是梅莉先发现的，被称为梅莉星。由于她们心有灵犀，这两批星星之间**不存在交集**。  \n\n她们发现，有一些莲子星，与一些梅莉星之间恰好存在运动关系。具体而言，这些关系一共有 $m$ 组，每一组关系形如 $(u_i,v_i)$，也就是说第 $u_i$ 颗莲子星与第 $v_i$ 颗梅莉星之间存在运动关系。这些运动关系有可能重复。\n\n这让莲子和梅莉非常好奇。作为专攻超统一物理学的女大学生，莲子认为，如果认为这些星星的运动是**和谐**的，那么她应当能够从这 $m$ 个运动关系中，找出若干个运动关系，使得**每颗**星星**都被**这些运动关系**包含**的同时，不会有一颗星星**被包含在两个**运动关系之中。\n\n然而，梅莉认为，**和谐**的运动可能是不存在的，更何况即使莲子找到了**和谐**的运动，莲子也无法确保这种和谐运动的**唯一性**。两种和谐运动不同，当且仅当选取出的两组运动关系中，存在至少一个运动关系，是不相同的。\n\n因为意见不合，她们于是打情骂俏了一顿。莲子于是记下了她们所看到了星星和她们之间的运动关系，并且找到了已经证明了 P=NP 的你，希望你能告诉她们，最后是谁正确呢？", "inputFormat": "第一行输入一个正整数 $T$ 表示数据组数，对于每一组数据：\n\n- 第一行一个整数 $n$，代表莲子和梅莉每个人所先发现的星星的数量。\n- 第二行一个整数 $m$，代表运动关系的数量。\n- 接下来 $m$ 行，每行两个整数 $u_i,v_i$，表示第 $u_i$ 颗莲子星，与第 $v_i$ 颗梅莉星之间，存在运动关系。", "outputFormat": "- 如果这些星星中存在唯一的和谐运动，输出 `Renko`。\n- 如果这些星星中不存在和谐运动，或者有不唯一的和谐运动方式，输出 `Merry`。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6skoily9.png)\n\n如图所示，存在唯一的方案：$\\{1\\to 1,2\\to 5,3\\to 2,4\\to 3,5\\to 4\\}$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\bm{m\\le} & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 10 & - & - \\cr\\hline\n2 & 20 & 300 & 4\\times 10^4 & - & 1\\cr\\hline\n3 & 20 & 10^5 & 5 \\times 10^5 & \\mathbf{A} & - \\cr\\hline\n4 & 20 & 10^5 & 2 \\times 10^5 & \\mathbf{B} & - \\cr\\hline\n5 & 30& 10^6 & 2\\times 10^6 & - & 2,3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：保证对于第 $i$ 颗莲子星，与第 $i$ 颗梅莉星之间存在运动关系。\n- 特殊性质 $\\mathbf{B}$：保证 $m=2n-1$。\n\n对于 $100\\%$ 的数据，保证 $1 \\le u_i,v_i\\le n \\le 10^6$，$1 \\le m \\le 2 \\times 10^6$，$1 \\leq T \\leq 5$ 且对于每个测试点，$\\sum m \\leq 4 \\times 10^6$。\n\n对于 $\\rm Subtask\\ 5$，时间限制为 $3$ 秒。其它测试点时间限制为 $1$ 秒。", "locale": "zh-CN"}}}
{"pid": "P8347", "type": "P", "difficulty": 6, "samples": [["1\n5\n2 4\n1 2\n3 1\n5 2", "Hifuu"], ["1\n11\n1 2\n1 3\n1 4\n2 5\n2 6\n4 7\n5 8\n5 9\n9 10\n9 11", "Hifuu"], ["1\n2\n1 2", "Luna"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["博弈论", "洛谷原创", "O2优化", "洛谷月赛", "Ad-hoc"], "title": "「Wdoi-6」另一侧的月", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/ikxrpn7c.png)](https://thwiki.cc/%E5%A4%A7%E7%A9%BA%E9%AD%94%E6%9C%AF_%EF%BD%9E_Magical_Astronomy.)\n\n「人类的梦想之一，月面旅行对一般人也终于成为可能！」   \n「从下个月起日本各个旅行公司将开始展开旅行」   \n\n然而，月球的表面，有着将月之都与荒凉的无生命星球隔开的一道结界。只要这道结界存在，人们只能看到石头罢了。\n\n而月面旅行的费用，也绝不是身为大学生的莲子与梅莉二人所能承担的。但是，她们想要探寻的是，被结界所包裹的，有着高度发达文明的月之都。\n\n这，便是另一侧的月。梅莉她看见了。兔子在捣药，身着华美的服装，优雅地在天空中起舞的天女。\n\n「我说莲子啊。如果月面旅行太贵实在不行的话，我们要不要试着想点别的办法去月球呢？」", "description": "### 简要题意\n\n给定 $n$ 个节点的树（保证 $n\\ge 2$），Hifuu 和 Luna 交替操作，前者先手。每回合操作者选择一个节点，将「该节点」和「所有与该节点相连的边」删除，形成若干个连通块，操作者再从中保留一个连通块。如果该回合结束后只剩下一个节点，则该回合的操作者失败，另一个人胜利。问谁存在必胜策略。\n\n-----\n### 原始题意\n\n但是，月之都是有结界保护的，也就是说莲子与梅莉若是想要用一些方式完成月球旅行，势必要突破这层结界。\n\n月之都的结界是由 $n$ 个节点，$n-1$ 条灵能输送渠道构成的连通的结构，其中节点编号为 $1 \\sim n$。结界有一个中枢控制系统，以提防外界的人闯入结界，抵达月之都。莲子和梅莉便需要与这个控制系统进行一些交互，才能进入月之都。\n\n具体而言，莲子梅莉，和中枢控制系统是交替进行操作的，其中莲子梅莉是**先手**。操作方可以任意选择结界上的一个节点，将连向这个节点的**所有**灵能输送渠道全部断绝，同时废弃这个节点。这也就意味着，这会把结界分为若干**组**节点，不同组的节点之间没有灵能输送渠道，而组内的节点由灵能输送渠道相连。在这些节点组中，操作者可以任意保留**一组**节点，将另外所有节点**全部废弃**，即，之后再也无法操作这些被废弃的节点了。\n\n在这样的规则之下，若操作结束后，最后只剩下一个节点，那么操作者失败，另一个人取得胜利。现在莲子和梅莉希望知道，在这样的规则之下，她们是否存在一种必定能够抵达月之都的策略？", "inputFormat": "本题多组数据。第一行输入一个正整数 $T$，表示数据组数。对于每一组数据：\n\n- 第一行有一个正整数 $n$。\n- 接下来 $n-1$ 行，每行两个正整数 $u_i,v_i$。表示一条连接节点 $u_i$ 和 $v_i$ 的双向的灵能输送渠道。", "outputFormat": "对于每一组数据，输出莲子和梅莉是否能够到达月之都。具体而言，若她们存在必定能到达月之都的策略，则输出 $\\texttt{Hifuu}$，否则输出 $\\texttt{Luna}$。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9zcd72k1.png)\n\n图 $1$ 是结界。图 $2$、图 $3$ 展示了一种莲子和梅莉可能的一种必胜策略：选择节点 $2$，然后保留 $\\{1,3\\}$ 所处的连通块，那么中枢控制系统无论是选择节点 $1$ 还是 $3$ 都必输。\n\n#### 样例 \\#2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/djzwnoxz.png)\n\n---\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 15 & 8 & - & - \\cr\\hline\n2 & 20 & 10^5 & \\mathbf{A} & -\\cr\\hline\n3 & 20 & 10^5 & \\mathbf{B} & - \\cr\\hline\n4 & 15 & 10^3 & - & 1 \\cr\\hline\n5 & 30 & 10^5 & - & 2,3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：保证存在一个点度数为 $n-1$。\n- 特殊性质 $\\mathbf{B}$：保证 $n=2^k-1,k \\in \\N^*$。且树的形态是完全二叉树。\n\n对于 $100\\%$ 的数据：$1 \\leq T \\leq 5$，$2 \\le n \\le 10^5$，输入数据构成一棵树。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-6」另一侧的月", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/ikxrpn7c.png)](https://thwiki.cc/%E5%A4%A7%E7%A9%BA%E9%AD%94%E6%9C%AF_%EF%BD%9E_Magical_Astronomy.)\n\n「人类的梦想之一，月面旅行对一般人也终于成为可能！」   \n「从下个月起日本各个旅行公司将开始展开旅行」   \n\n然而，月球的表面，有着将月之都与荒凉的无生命星球隔开的一道结界。只要这道结界存在，人们只能看到石头罢了。\n\n而月面旅行的费用，也绝不是身为大学生的莲子与梅莉二人所能承担的。但是，她们想要探寻的是，被结界所包裹的，有着高度发达文明的月之都。\n\n这，便是另一侧的月。梅莉她看见了。兔子在捣药，身着华美的服装，优雅地在天空中起舞的天女。\n\n「我说莲子啊。如果月面旅行太贵实在不行的话，我们要不要试着想点别的办法去月球呢？」", "description": "### 简要题意\n\n给定 $n$ 个节点的树（保证 $n\\ge 2$），Hifuu 和 Luna 交替操作，前者先手。每回合操作者选择一个节点，将「该节点」和「所有与该节点相连的边」删除，形成若干个连通块，操作者再从中保留一个连通块。如果该回合结束后只剩下一个节点，则该回合的操作者失败，另一个人胜利。问谁存在必胜策略。\n\n-----\n### 原始题意\n\n但是，月之都是有结界保护的，也就是说莲子与梅莉若是想要用一些方式完成月球旅行，势必要突破这层结界。\n\n月之都的结界是由 $n$ 个节点，$n-1$ 条灵能输送渠道构成的连通的结构，其中节点编号为 $1 \\sim n$。结界有一个中枢控制系统，以提防外界的人闯入结界，抵达月之都。莲子和梅莉便需要与这个控制系统进行一些交互，才能进入月之都。\n\n具体而言，莲子梅莉，和中枢控制系统是交替进行操作的，其中莲子梅莉是**先手**。操作方可以任意选择结界上的一个节点，将连向这个节点的**所有**灵能输送渠道全部断绝，同时废弃这个节点。这也就意味着，这会把结界分为若干**组**节点，不同组的节点之间没有灵能输送渠道，而组内的节点由灵能输送渠道相连。在这些节点组中，操作者可以任意保留**一组**节点，将另外所有节点**全部废弃**，即，之后再也无法操作这些被废弃的节点了。\n\n在这样的规则之下，若操作结束后，最后只剩下一个节点，那么操作者失败，另一个人取得胜利。现在莲子和梅莉希望知道，在这样的规则之下，她们是否存在一种必定能够抵达月之都的策略？", "inputFormat": "本题多组数据。第一行输入一个正整数 $T$，表示数据组数。对于每一组数据：\n\n- 第一行有一个正整数 $n$。\n- 接下来 $n-1$ 行，每行两个正整数 $u_i,v_i$。表示一条连接节点 $u_i$ 和 $v_i$ 的双向的灵能输送渠道。", "outputFormat": "对于每一组数据，输出莲子和梅莉是否能够到达月之都。具体而言，若她们存在必定能到达月之都的策略，则输出 $\\texttt{Hifuu}$，否则输出 $\\texttt{Luna}$。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9zcd72k1.png)\n\n图 $1$ 是结界。图 $2$、图 $3$ 展示了一种莲子和梅莉可能的一种必胜策略：选择节点 $2$，然后保留 $\\{1,3\\}$ 所处的连通块，那么中枢控制系统无论是选择节点 $1$ 还是 $3$ 都必输。\n\n#### 样例 \\#2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/djzwnoxz.png)\n\n---\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 15 & 8 & - & - \\cr\\hline\n2 & 20 & 10^5 & \\mathbf{A} & -\\cr\\hline\n3 & 20 & 10^5 & \\mathbf{B} & - \\cr\\hline\n4 & 15 & 10^3 & - & 1 \\cr\\hline\n5 & 30 & 10^5 & - & 2,3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：保证存在一个点度数为 $n-1$。\n- 特殊性质 $\\mathbf{B}$：保证 $n=2^k-1,k \\in \\N^*$。且树的形态是完全二叉树。\n\n对于 $100\\%$ 的数据：$1 \\leq T \\leq 5$，$2 \\le n \\le 10^5$，输入数据构成一棵树。", "locale": "zh-CN"}}}
{"pid": "P8348", "type": "P", "difficulty": 7, "samples": [["5\n2 3 7 9 1\n4 9 2 5 1\n4 9 2 5 2\n6 4 1 2 3\n7 9 7 9 7", "yes\nyes\nno\nno\nyes"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "洛谷原创", "O2优化", "构造", "洛谷月赛"], "title": "「Wdoi-6」未知之花魅知之旅", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/glirwa55.png)](https://thwiki.cc/%E6%9C%AA%E7%9F%A5%E4%B9%8B%E8%8A%B1_%E9%AD%85%E7%9F%A5%E4%B9%8B%E6%97%85)\n\n位于太平洋板块和亚欧板块消亡边界的日本，是世界上最多发地震的一个国家之一。2011 年 3 月 11 日，日本时间下午 2 时 46 分 18 秒，一场里氏 9 级的地震袭击了这个国家，随之而来的，是超过 10 米高的巨大海啸。妻离子散，家破人亡，是对这一悲剧性事件的最好描述。\n\n2011 年 5 月，东方 Project 的创作者 ZUN，为地震中的灾民谱写了一张专辑，叫做《未知之花，魅知之旅》，所筹得的善款都被捐赠用于救灾赈灾之中。\n\n-----\n\n而到了近未来的科学世纪，莲子和梅莉在一次聊天之中，又谈论到了这场大地震。这场地震对传统宗教的摧残程度也颇深，数千所神社不同程度遭受到了损毁，也有不少神社的主殿全毁或者半毁。甚至就连外界的博丽神社，也因此被摧毁。\n\n莲子与梅莉决定动身，前往外界的博丽神社，进入幻想乡中，通报这一消息。", "description": "### 简要题意\n\n称一个长度为 $n$ 的正整数数列是「$k$ - 好」的，当且仅当它满足以下条件：  \n\n- 对于 $1< i< n$，满足 $a_{i-1},a_i,a_{i+1}$ 中最大的一个等于其他两个之和。\n- 所有元素都不小于 $k$。\n\n$T$ 组询问，每次询问给定 $(a_0,a_1,x,y,k)$，问是否存在「$k$ - 好」数列（长度不小于 $2$），前两项为 $a_0,a_1$ 并且有相邻两项依次为 $x,y$。\n\n-----\n\n### 原始题意\n\n原本就门可罗雀的博丽神社，在地震之后，更显荒凉。莲子与梅莉紧赶慢赶来到了博丽神社，只看到了倒塌的鸟居。由于神社过于荒凉，莲子和梅莉决定先将神社给好好打扫一番，再进入幻想乡。\n\n具体而言，神社中有若干个物件等待被整理，每个物件都有一个正整数魅力值。可以认为，每种魅力值的物件都有**足够多**个。从被遗落的绘马中，莲子得知了，在被地震摧毁前的博丽神社中的物件，应当具有如下特点：\n\n- 每个物件都有一个**不小于** $k$ 的魅力值。\n- 三个相邻物件的**最大**魅力值，是其他两个物件的魅力值**之和**。\n- 前两个物件的魅力值分别为 $a_0, a_1$。\n- 存在**相邻**的两个物件，魅力值依次为 $x, y$。\n\n莲子和梅莉认为，如果能够从所有物件中选出一些进行排列，并满足如上特点的话，那么这样的神社是**美观**的，不会让她们一进入幻想乡就被灵梦退治。\n\n很显然，由于物件的散佚，莲子和梅莉可能无法通过这些信息来使得神社变得**美观**。莲子和梅莉找到了你，希望你能告诉她们，在这样的规则下是否存在一种让神社变得**美观**的方案。\n\n由于灵梦退治得太狠，她们担心自己的生命安全，因此她们会对你询问 $T$ 次，以确保你不是在糊弄她们。", "inputFormat": "第一行输入一个正整数 $T$，表示数据组数，对于每一组数据：\n\n- 每行输入 $5$ 个正整数，以空格隔开，分别为 $a_0,a_1,x,y,k$，含义如题目所述。", "outputFormat": "- 对于每一组数据，输出一行 `yes` 或 `no`，即是否存在一种可以使得神社变得**美观**的方法。", "hint": "### 样例解释\n\n- 针对第一次询问，$a_0=2,a_1=3$，莲子和梅莉可以将物件如下排列构造：$2,3,5,2,7,9,2,11,\\dots$，其中 $a_5=7,a_6=9$，从而存在方案让神社变得美观。\n- 针对第二次询问，$a_0=4,a_1=9$，莲子和梅莉可以将物件如下排列构造：$4,9,5,4,1,3,2,5,3,8,\\dots$，其中 $a_6=2,a_7=5$，从而存在方案让神社变得美观。\n- 针对第三次询问，由于要求 $a_i \\geq k=2$，第二次询问中的方法失效，同时也可以证明不存在让神社变得美观的方法。\n- 针对第四次询问，要求构造出的 $x=1,y=2$ 都小于等于 $3$，从而无法让神社变得美观。\n- 针对第五次询问，显然 $a_0=7,a_1=9$ 就已经符合让神社变得美观的要求了。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n令 $n=\\max(a_0,a_1,x,y,k)$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{T\\le } & \\bm{n\\le }  & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 10  & - & - \\cr\\hline\n2 & 20 & 300 & 1000 & \\mathbf{A} & - \\cr\\hline\n3 & 10 & 300 & 10^9 & \\mathbf{B} & - \\cr\\hline\n4 & 20 & 300 & 10^8 & \\mathbf{C} & 1,2 \\cr\\hline\n5 & 40 & 10^5 & 10^9 & - & 3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：每次询问的 $k$ 相同。\n- 特殊性质 $\\mathbf{B}$：$k=1$。\n- 特殊性质 $\\mathbf{C}$：$\\sum n \\leq 10^8$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^9,1 \\leq T \\leq 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「Wdoi-6」未知之花魅知之旅", "background": "[![](https://cdn.luogu.com.cn/upload/image_hosting/glirwa55.png)](https://thwiki.cc/%E6%9C%AA%E7%9F%A5%E4%B9%8B%E8%8A%B1_%E9%AD%85%E7%9F%A5%E4%B9%8B%E6%97%85)\n\n位于太平洋板块和亚欧板块消亡边界的日本，是世界上最多发地震的一个国家之一。2011 年 3 月 11 日，日本时间下午 2 时 46 分 18 秒，一场里氏 9 级的地震袭击了这个国家，随之而来的，是超过 10 米高的巨大海啸。妻离子散，家破人亡，是对这一悲剧性事件的最好描述。\n\n2011 年 5 月，东方 Project 的创作者 ZUN，为地震中的灾民谱写了一张专辑，叫做《未知之花，魅知之旅》，所筹得的善款都被捐赠用于救灾赈灾之中。\n\n-----\n\n而到了近未来的科学世纪，莲子和梅莉在一次聊天之中，又谈论到了这场大地震。这场地震对传统宗教的摧残程度也颇深，数千所神社不同程度遭受到了损毁，也有不少神社的主殿全毁或者半毁。甚至就连外界的博丽神社，也因此被摧毁。\n\n莲子与梅莉决定动身，前往外界的博丽神社，进入幻想乡中，通报这一消息。", "description": "### 简要题意\n\n称一个长度为 $n$ 的正整数数列是「$k$ - 好」的，当且仅当它满足以下条件：  \n\n- 对于 $1< i< n$，满足 $a_{i-1},a_i,a_{i+1}$ 中最大的一个等于其他两个之和。\n- 所有元素都不小于 $k$。\n\n$T$ 组询问，每次询问给定 $(a_0,a_1,x,y,k)$，问是否存在「$k$ - 好」数列（长度不小于 $2$），前两项为 $a_0,a_1$ 并且有相邻两项依次为 $x,y$。\n\n-----\n\n### 原始题意\n\n原本就门可罗雀的博丽神社，在地震之后，更显荒凉。莲子与梅莉紧赶慢赶来到了博丽神社，只看到了倒塌的鸟居。由于神社过于荒凉，莲子和梅莉决定先将神社给好好打扫一番，再进入幻想乡。\n\n具体而言，神社中有若干个物件等待被整理，每个物件都有一个正整数魅力值。可以认为，每种魅力值的物件都有**足够多**个。从被遗落的绘马中，莲子得知了，在被地震摧毁前的博丽神社中的物件，应当具有如下特点：\n\n- 每个物件都有一个**不小于** $k$ 的魅力值。\n- 三个相邻物件的**最大**魅力值，是其他两个物件的魅力值**之和**。\n- 前两个物件的魅力值分别为 $a_0, a_1$。\n- 存在**相邻**的两个物件，魅力值依次为 $x, y$。\n\n莲子和梅莉认为，如果能够从所有物件中选出一些进行排列，并满足如上特点的话，那么这样的神社是**美观**的，不会让她们一进入幻想乡就被灵梦退治。\n\n很显然，由于物件的散佚，莲子和梅莉可能无法通过这些信息来使得神社变得**美观**。莲子和梅莉找到了你，希望你能告诉她们，在这样的规则下是否存在一种让神社变得**美观**的方案。\n\n由于灵梦退治得太狠，她们担心自己的生命安全，因此她们会对你询问 $T$ 次，以确保你不是在糊弄她们。", "inputFormat": "第一行输入一个正整数 $T$，表示数据组数，对于每一组数据：\n\n- 每行输入 $5$ 个正整数，以空格隔开，分别为 $a_0,a_1,x,y,k$，含义如题目所述。", "outputFormat": "- 对于每一组数据，输出一行 `yes` 或 `no`，即是否存在一种可以使得神社变得**美观**的方法。", "hint": "### 样例解释\n\n- 针对第一次询问，$a_0=2,a_1=3$，莲子和梅莉可以将物件如下排列构造：$2,3,5,2,7,9,2,11,\\dots$，其中 $a_5=7,a_6=9$，从而存在方案让神社变得美观。\n- 针对第二次询问，$a_0=4,a_1=9$，莲子和梅莉可以将物件如下排列构造：$4,9,5,4,1,3,2,5,3,8,\\dots$，其中 $a_6=2,a_7=5$，从而存在方案让神社变得美观。\n- 针对第三次询问，由于要求 $a_i \\geq k=2$，第二次询问中的方法失效，同时也可以证明不存在让神社变得美观的方法。\n- 针对第四次询问，要求构造出的 $x=1,y=2$ 都小于等于 $3$，从而无法让神社变得美观。\n- 针对第五次询问，显然 $a_0=7,a_1=9$ 就已经符合让神社变得美观的要求了。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n令 $n=\\max(a_0,a_1,x,y,k)$。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{T\\le } & \\bm{n\\le }  & \\textbf{\\textsf{特殊性质}} & \\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 10  & - & - \\cr\\hline\n2 & 20 & 300 & 1000 & \\mathbf{A} & - \\cr\\hline\n3 & 10 & 300 & 10^9 & \\mathbf{B} & - \\cr\\hline\n4 & 20 & 300 & 10^8 & \\mathbf{C} & 1,2 \\cr\\hline\n5 & 40 & 10^5 & 10^9 & - & 3,4 \\cr\\hline\n\\end{array}\n$$\n\n- 特殊性质 $\\mathbf{A}$：每次询问的 $k$ 相同。\n- 特殊性质 $\\mathbf{B}$：$k=1$。\n- 特殊性质 $\\mathbf{C}$：$\\sum n \\leq 10^8$。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 10^9,1 \\leq T \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P8349", "type": "P", "difficulty": 6, "samples": [["5 3\n1 2 3 1 2\n-2 3 2 -1 2\n1 2\n1 3\n2 3\n", "2\n1\n5\n"], ["见附加样例文件中的 ex_sequence2.in", "见附加样例文件中的 ex_sequence2.out"]], "limits": {"time": [7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000, 7000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "山东", "O2优化", "山西"], "title": "[SDOI/SXOI2022] 整数序列", "background": "", "description": "小 D 三岁就学会了出题。\n\n小 D 有一个正整数序列 $a_1, a_2, \\dots a_n$ 和一个整数序列 $b_1, b_2, \\dots ,b_n$。\n\n小 D 有 $q$ 次查询，每次给出 $x, y$，构造一个新的序列 $c_1,c_2,\\dots ,c_n$，其中 $c_i=\\begin{cases}1 & a_i=x \\\\-1 & a_i = y \\\\ 0 & \\text{else}\\end{cases}$。\n\n保证 $c_i$ 中至少存在一个 $1$ 与一个 $-1$。他想让你帮他找到一个区间 $[l,r]$，满足 $\\sum\\limits_{i = l}^r c_i = 0$，并使得 $\\sum\\limits_{i = l}^r b_i \\times [c_i \\neq 0]$ 最大，并且区间里的 $c_i$ 不能都为 $0$。你需要输出这个最大值。\n\n注：当条件 $[P]$ 为真时，$[P]=1$，否则 $[P]=0$。", "inputFormat": "第一行有两个整数 $n, q$。   \n第二行有 $n$ 个整数，第 $i$ 个整数表示 $a_i$。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示 $b_i$。  \n接下来 $q$ 行，每行两个整数 $x,y$，表示一次询问。", "outputFormat": "对于每次询问，输出一行一个整数表示最大的 $\\sum\\limits_{i = l}^r b_i \\times [c_i \\neq 0]$。", "hint": "### 数据规模与约定\n本题共 $20$ 个测试点。\n- 对于测试点 $1,2,3,4$，保证 $n, q ≤5000$。\n- 对于测试点 $5,6$，保证 $a$ 的取值不超过 $500$ 种。\n- 对于测试点 $7,8$，保证 $n \\le 150000$。$q \\le 500000$，$b_i>0$。\n- 对于测试点 $9$，保证 $n \\le 150000$，$q \\le 500000$。\n- 对于测试点 $10,11$，保证 $n \\le 200000$，$q \\le 500000$。\n- 对于测试点 $12,13,14$，保证 $b_i=1$。\n- 对于测试点 $15,16$，保证 $b_i>0$。\n\n对于所有测试点，$1 \\le n \\le 300000$，$1 \\le q \\le 1000000$，$1 \\le a_i \\le n$，$-10^9<b_i \\leq 10^9$，$1 \\leq x, y \\leq n$，$x \\neq y$，保证对于每次查询，$c_i$ 中均至少含有一个 $1$ 与一个 $-1$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 整数序列", "background": "", "description": "小 D 三岁就学会了出题。\n\n小 D 有一个正整数序列 $a_1, a_2, \\dots a_n$ 和一个整数序列 $b_1, b_2, \\dots ,b_n$。\n\n小 D 有 $q$ 次查询，每次给出 $x, y$，构造一个新的序列 $c_1,c_2,\\dots ,c_n$，其中 $c_i=\\begin{cases}1 & a_i=x \\\\-1 & a_i = y \\\\ 0 & \\text{else}\\end{cases}$。\n\n保证 $c_i$ 中至少存在一个 $1$ 与一个 $-1$。他想让你帮他找到一个区间 $[l,r]$，满足 $\\sum\\limits_{i = l}^r c_i = 0$，并使得 $\\sum\\limits_{i = l}^r b_i \\times [c_i \\neq 0]$ 最大，并且区间里的 $c_i$ 不能都为 $0$。你需要输出这个最大值。\n\n注：当条件 $[P]$ 为真时，$[P]=1$，否则 $[P]=0$。", "inputFormat": "第一行有两个整数 $n, q$。   \n第二行有 $n$ 个整数，第 $i$ 个整数表示 $a_i$。  \n第三行有 $n$ 个整数，第 $i$ 个整数表示 $b_i$。  \n接下来 $q$ 行，每行两个整数 $x,y$，表示一次询问。", "outputFormat": "对于每次询问，输出一行一个整数表示最大的 $\\sum\\limits_{i = l}^r b_i \\times [c_i \\neq 0]$。", "hint": "### 数据规模与约定\n本题共 $20$ 个测试点。\n- 对于测试点 $1,2,3,4$，保证 $n, q ≤5000$。\n- 对于测试点 $5,6$，保证 $a$ 的取值不超过 $500$ 种。\n- 对于测试点 $7,8$，保证 $n \\le 150000$。$q \\le 500000$，$b_i>0$。\n- 对于测试点 $9$，保证 $n \\le 150000$，$q \\le 500000$。\n- 对于测试点 $10,11$，保证 $n \\le 200000$，$q \\le 500000$。\n- 对于测试点 $12,13,14$，保证 $b_i=1$。\n- 对于测试点 $15,16$，保证 $b_i>0$。\n\n对于所有测试点，$1 \\le n \\le 300000$，$1 \\le q \\le 1000000$，$1 \\le a_i \\le n$，$-10^9<b_i \\leq 10^9$，$1 \\leq x, y \\leq n$，$x \\neq y$，保证对于每次查询，$c_i$ 中均至少含有一个 $1$ 与一个 $-1$。\n\n", "locale": "zh-CN"}}}
{"pid": "P8350", "type": "P", "difficulty": 7, "samples": [["123456 12345 234567 3456789\n", "664963464\n"], ["1234567891 123 1 12345\n", "517823355\n"], ["9876543210987 1284916 83759265 128478129\n", "115945104\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "山东", "O2优化", "山西"], "title": "[SDOI/SXOI2022] 进制转换", "background": "", "description": "小 D 两岁的时候就学会了进制转换。\n\n所以他想问你，对于所有 $1\\sim n$ 之间的数，这个数在二进制和三进制下的数位和分别是多少。\n\n对于 $i$，记二进制和三进制的数位和分别为 $a(i)$ 和 $b(i)$。比如对于一个数 $i=114$，那么它二进制表示为 $(1110010)_2$，三进制表示为$(11020)_3$，那么 $a(i)$ 和 $b(i)$ 分别为 $4$ 和 $4$。\n\n小 D 想知道你是不是真的能算对 $1$ 到 $n$ 里面所有数进制转换，所以想问你 $\\sum\\limits_{i = 1}^n x^i y^{a(i)} z^{b(i)}$ 是多少，由于答案很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "只有一行四个整数，依次表示 $n, x, y, z$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n本题共 $20$ 个测试点。\n\n- 对于测试点 $1,2,3$，$n \\le 10^7$。\n- 对于测试点 $4,5$，$x=y=1$。\n- 对于测试点 $6,7$，$y=1$。\n- 对于测试点 $8,9,10$，$n<10^{10}$。\n- 对于测试点 $11,12,13,14$，$n \\le 5 \\times 10^{11}$。\n\n对于所有测试点，$1 \\le n \\le 10^{13}$，$1 \\le x,y,z <998244353$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 进制转换", "background": "", "description": "小 D 两岁的时候就学会了进制转换。\n\n所以他想问你，对于所有 $1\\sim n$ 之间的数，这个数在二进制和三进制下的数位和分别是多少。\n\n对于 $i$，记二进制和三进制的数位和分别为 $a(i)$ 和 $b(i)$。比如对于一个数 $i=114$，那么它二进制表示为 $(1110010)_2$，三进制表示为$(11020)_3$，那么 $a(i)$ 和 $b(i)$ 分别为 $4$ 和 $4$。\n\n小 D 想知道你是不是真的能算对 $1$ 到 $n$ 里面所有数进制转换，所以想问你 $\\sum\\limits_{i = 1}^n x^i y^{a(i)} z^{b(i)}$ 是多少，由于答案很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "只有一行四个整数，依次表示 $n, x, y, z$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n本题共 $20$ 个测试点。\n\n- 对于测试点 $1,2,3$，$n \\le 10^7$。\n- 对于测试点 $4,5$，$x=y=1$。\n- 对于测试点 $6,7$，$y=1$。\n- 对于测试点 $8,9,10$，$n<10^{10}$。\n- 对于测试点 $11,12,13,14$，$n \\le 5 \\times 10^{11}$。\n\n对于所有测试点，$1 \\le n \\le 10^{13}$，$1 \\le x,y,z <998244353$。", "locale": "zh-CN"}}}
{"pid": "P8351", "type": "P", "difficulty": 7, "samples": [["zzz\n", "24\n"], ["abbab\n", "53\n"], ["见附加样例文件中的 ex_substring3.in", "见附加样例文件中的 ex_substring3.out"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "山东", "O2优化", "山西"], "title": "[SDOI/SXOI2022] 子串统计", "background": "", "description": "小 D 四岁半的时候学会了后缀自动机。\n\n你有一个字符串 $S$，长度为 $n$。初始时，$T_0=S$。每次你可以从删除 $T_i$ 的开头或结尾的字符得到新的字符串 $T_{i + 1}$，经过 $n-1$ 次操作之后，我们会得到只有一个字符的串 $T_{n - 1}$，根据每次删除的选择，一共有 $2^{n - 1}$ 种可能的操作序列。注意，虽然可能会有一次操作，删除开头或结尾的字符得到相同的串，但是我们仍然把它当成两种不一样的操作序列。\n\n对于一个串 $T$，我们记 $\\operatorname{\\textit{occ}}(T)$ 表示 $T$ 在 $S$ 中作为子串的出现次数，比如 $\\operatorname{\\textit{occ}}(\\texttt{aaa},\\texttt{aaaabaaa})=3$。\n\n对于一个操作序列，记它贡献是\n\n$$\\prod_{i = 1}^{n - 1} \\operatorname{\\textit{occ}}(T_i)$$\n\n求出所有操作序列的贡献和，由于答案很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "只有一行一个字符串 $S$，保证只包含小写字符。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n本题共 $20$ 个测试点。\n\n- 对于测试点 $1\\sim 5$，满足 $|S| \\le 5000$。\n- 对于测试点 $6\\sim 8$，满足 $S$ 的每个字符均从 $\\texttt a$ 和 $\\texttt b$ 中等概率独立随机生成。\n- 对于测试点 $9\\sim 14$，满足 $|S| \\le 6 \\times 10^4$。\n\n对于所有数据，$1 \\le |S| \\le 10^5$。$S$ 中只有小写英文字母。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 子串统计", "background": "", "description": "小 D 四岁半的时候学会了后缀自动机。\n\n你有一个字符串 $S$，长度为 $n$。初始时，$T_0=S$。每次你可以从删除 $T_i$ 的开头或结尾的字符得到新的字符串 $T_{i + 1}$，经过 $n-1$ 次操作之后，我们会得到只有一个字符的串 $T_{n - 1}$，根据每次删除的选择，一共有 $2^{n - 1}$ 种可能的操作序列。注意，虽然可能会有一次操作，删除开头或结尾的字符得到相同的串，但是我们仍然把它当成两种不一样的操作序列。\n\n对于一个串 $T$，我们记 $\\operatorname{\\textit{occ}}(T)$ 表示 $T$ 在 $S$ 中作为子串的出现次数，比如 $\\operatorname{\\textit{occ}}(\\texttt{aaa},\\texttt{aaaabaaa})=3$。\n\n对于一个操作序列，记它贡献是\n\n$$\\prod_{i = 1}^{n - 1} \\operatorname{\\textit{occ}}(T_i)$$\n\n求出所有操作序列的贡献和，由于答案很大，请输出答案对 $998244353$ 取模的结果。", "inputFormat": "只有一行一个字符串 $S$，保证只包含小写字符。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 数据规模与约定\n\n本题共 $20$ 个测试点。\n\n- 对于测试点 $1\\sim 5$，满足 $|S| \\le 5000$。\n- 对于测试点 $6\\sim 8$，满足 $S$ 的每个字符均从 $\\texttt a$ 和 $\\texttt b$ 中等概率独立随机生成。\n- 对于测试点 $9\\sim 14$，满足 $|S| \\le 6 \\times 10^4$。\n\n对于所有数据，$1 \\le |S| \\le 10^5$。$S$ 中只有小写英文字母。", "locale": "zh-CN"}}}
{"pid": "P8352", "type": "P", "difficulty": 6, "samples": [["4 2\n1 2\n2 3\n2 4", "0\n0\n2\n6\n6\n2\n0\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "山东", "O2优化", "山西", "DP 套 DP"], "title": "[SDOI/SXOI2022] 小 N 的独立集", "background": "", "description": "小 N 喜欢出最大权独立集问题。\n\n有一天，他接到了一系列的出题任务，于是他顺手出了一系列最大权独立集问题。\n\n为了同时给这一系列题目造数据，小 N 生成了一个 $n$ 个点的树，并选定了一个正整数 $k$。这样每生成一组数据时，他只需要对于每个点，随机生成一个在 $1 \\sim k$ 之间的整数点权，就可以生成一个新的最大独立集问题。\n\n小 N 把这些题给了他的好朋友，小 Ω。小 Ω 表示，这些题太多太乱了，他打算把所有的 $k^n$ 道题归类处理。一个自然的想法就是按答案（也就是最大权独立集中的点的权值之和）分类，显然这些最大权独立集问题的答案一定在 $1 \\sim nk$ 之间，所以小 Ω 只需要将所有题目按照答案分成 $nk$ 类进行管理就行了。\n\n在小 N 正式开始出题之前，小 Ω 先要算出每一类题目具体有多少道。稍加估计之后小 Ω 很快意识到自己并没有《诗云》中描述的那种存储器，于是断然拒绝了小 N 关于“先把所有可能的题目造好再慢慢分类统计数量”的建议，然后悲剧地意识到自己并不会计算这些数字。\n\n他想叫你帮他解决这个问题，还说如果你成功解决了这个问题，那么在小 N 出那些最大权独立集问题的时候，他会帮你提交一份标程代码。", "inputFormat": "第一行， $2$ 个正整数 $n$, $k$。\n\n接下来 $n-1$ 行，每行 $2$ 个正整数 $u_i$, $v_i$，描述一条连接点 $u_i$ 和 $v_i$ 的边，保证这些边构成一棵树。", "outputFormat": "$nk$ 行，每行一个整数，第 $i$ 个整数表示在所有可能的题目中，最大权独立集大小为 $i$ 的有多少道，答案对 $10^9+7$ 取模。\n\n", "hint": "**【样例解释】**\n\n符合题意的最大权独立集题目一共有 $2^4=16$ 道。\n\n可以证明，当点 $1$, $3$, $4$ 的权值均为 $1$ 时，最大权独立集为 $3$ ，这样的题目共有 $2$ 道；点 $1$, $3$, $4$ 的权值恰有一个为 $2$ 时，最大权独立集为 $4$ ，这样的题目共有 $6$ 道；对于最大权独立集为 $5$ 或 $6$ 的情况也是类似的。\n\n**【数据范围】**\n\n对于 $15 \\%$ 的数据， $n \\leq 8$；  \n对于 $30 \\%$ 的数据， $n \\leq 30$；  \n对于 $50 \\%$ 的数据， $n \\leq 100$；  \n对于另外 $10 \\%$ 的数据， $k=1$；  \n对于另外 $15 \\%$ 的数据， $k=2$；  \n对于 $100 \\%$ 的数据， $n \\leq 1000$，$k \\leq 5$，$u_{i}, v_{i} \\leq n$。\n\n**【提示】**\n\n最大权独立集问题是指：选择一个点集，使得任意两个被选择的点都没有边直接相连，并且使得所有被选择的点的点权之和最大。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 小 N 的独立集", "background": "", "description": "小 N 喜欢出最大权独立集问题。\n\n有一天，他接到了一系列的出题任务，于是他顺手出了一系列最大权独立集问题。\n\n为了同时给这一系列题目造数据，小 N 生成了一个 $n$ 个点的树，并选定了一个正整数 $k$。这样每生成一组数据时，他只需要对于每个点，随机生成一个在 $1 \\sim k$ 之间的整数点权，就可以生成一个新的最大独立集问题。\n\n小 N 把这些题给了他的好朋友，小 Ω。小 Ω 表示，这些题太多太乱了，他打算把所有的 $k^n$ 道题归类处理。一个自然的想法就是按答案（也就是最大权独立集中的点的权值之和）分类，显然这些最大权独立集问题的答案一定在 $1 \\sim nk$ 之间，所以小 Ω 只需要将所有题目按照答案分成 $nk$ 类进行管理就行了。\n\n在小 N 正式开始出题之前，小 Ω 先要算出每一类题目具体有多少道。稍加估计之后小 Ω 很快意识到自己并没有《诗云》中描述的那种存储器，于是断然拒绝了小 N 关于“先把所有可能的题目造好再慢慢分类统计数量”的建议，然后悲剧地意识到自己并不会计算这些数字。\n\n他想叫你帮他解决这个问题，还说如果你成功解决了这个问题，那么在小 N 出那些最大权独立集问题的时候，他会帮你提交一份标程代码。", "inputFormat": "第一行， $2$ 个正整数 $n$, $k$。\n\n接下来 $n-1$ 行，每行 $2$ 个正整数 $u_i$, $v_i$，描述一条连接点 $u_i$ 和 $v_i$ 的边，保证这些边构成一棵树。", "outputFormat": "$nk$ 行，每行一个整数，第 $i$ 个整数表示在所有可能的题目中，最大权独立集大小为 $i$ 的有多少道，答案对 $10^9+7$ 取模。\n\n", "hint": "**【样例解释】**\n\n符合题意的最大权独立集题目一共有 $2^4=16$ 道。\n\n可以证明，当点 $1$, $3$, $4$ 的权值均为 $1$ 时，最大权独立集为 $3$ ，这样的题目共有 $2$ 道；点 $1$, $3$, $4$ 的权值恰有一个为 $2$ 时，最大权独立集为 $4$ ，这样的题目共有 $6$ 道；对于最大权独立集为 $5$ 或 $6$ 的情况也是类似的。\n\n**【数据范围】**\n\n对于 $15 \\%$ 的数据， $n \\leq 8$；  \n对于 $30 \\%$ 的数据， $n \\leq 30$；  \n对于 $50 \\%$ 的数据， $n \\leq 100$；  \n对于另外 $10 \\%$ 的数据， $k=1$；  \n对于另外 $15 \\%$ 的数据， $k=2$；  \n对于 $100 \\%$ 的数据， $n \\leq 1000$，$k \\leq 5$，$u_{i}, v_{i} \\leq n$。\n\n**【提示】**\n\n最大权独立集问题是指：选择一个点集，使得任意两个被选择的点都没有边直接相连，并且使得所有被选择的点的点权之和最大。\n", "locale": "zh-CN"}}}
{"pid": "P8353", "type": "P", "difficulty": 7, "samples": [["0 10 10 935995202 406705156 7034169 418665824\n1 1 1 1 1 1 1 7 2\n0 10 3 781084039\n1 7 5\n0 897574 897583 833116301\n1 897583 897572\n0 886189 886179 123805569\n1 886182 886190\n1 145142 145136\n1 854537 854538\n1 896515 896525\n0 879409 879412 746499584", "2925376046\n3681387943\n4240586487\n2878147072\n2350755335\n731736886"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["树形数据结构", "各省省选", "2022", "山东", "O2优化", "山西", "树链剖分", "分块"], "title": "[SDOI/SXOI2022] 无处存储", "background": "滥用本题评测将封号。请注意本题非同寻常的时空限制和数据点个数。", "description": "小 Ω 想出一个数据结构题，于是它先造了一棵点有点权的树：\n\n给定一棵大小为 $n$ 的树，编号 $1$ 到 $n$，第 $i \\in [2,n]$  个点的父节点记作 $f_i \\in [1, i-1]$。另外，每个点 $i$ 有一个点权 $a_i$，初始点权由输入确定，具体方式见输入格式。\n\n在数据结构题里面，需要有对应的修改和查询的操作，而树上最简单的两种非平凡操作当然是链加、链求和了。\n\n因此你需要支持以下两种操作：\n\n`0 x y v`：将树上从 $x$ 到 $y$ 的简单路径上的点的权值增加 $v$；\n\n`1 x y`：求树上从 $x$ 到 $y$ 的简单路径上的点的权值和；\n\n出完之后小 Ω 拿给小 N 看，小 N 表示：\n\n……这也太简单了，这不是轻重链剖分模板题吗？！！\n\n小 Ω 于是想到在刚刚接触 OI 的时候了解到的时间换空间的原理，因此他决定本题的空间限制为 **64 MB**。", "inputFormat": "第一行输入三个正整数 $id$，$n$，$q$，其中 $id$ 为子任务编号，和四个非负整数 $A$，$B$，$C$，$a_0$。\n\n$A$，$B$，$C$，$a_0$ 用于生成点权 $a_1, a_2, \\dots, a_n$，具体方法是按照下式进行递推：\n$$a_{i}=\\left(A a_{i-1}^{2}+B a_{i-1}+C\\right) \\bmod 2^{32}$$\n\n接下来一行 $n-1$ 个正整数表示 $f_2, \\dots, f_n$。\n\n接下来 $q$ 行，每行若干整数，形如 $0 \\ x' \\ y' \\ v'$ 或者 $1 \\ x' \\ y'$，表示一次修改或查询。\n\n其中 $x^{\\prime}$，$y^{\\prime}$，$v^{\\prime}$ 用于**强制在线**，实际操作的 $x=x^{\\prime} \\operatorname{xor} P$，$y=y^{\\prime} \\operatorname{xor} P$， $v=v^{\\prime} \\operatorname{xor} P$，其中 $\\operatorname{xor}$ 是 `C/C++` 中的按位异或运算符 `^`，$P = \\text{lastans} \\And \\left(2^{20}-1\\right)$，其中 $\\text{lastans}$ 为上一次询问的答案（没有上次询问则记为 0），$\\And$ 为 `C/C++` 中的按位与运算符 `&`。", "outputFormat": "若干行，依次输出每个询问的答案对 $2^{32}$ 取模后的结果。\n", "hint": "样例 2 ~ 样例 15 数据见下方下载链接。\n\n以上各组样例数据中，每组数据的数据范围符合其输入的子任务编号对应的子任务的数据范围及性质（输入的子任务编号为 0 时除外），并且为了避免可能的常数问题，保证下发样例（子任务编号为 0 时除外）与最终评测所用的该子任务的测试点的数据生成方式强度相同。\n\n| 子任务编号 | 测试点分值 |    $n \\leq$     |    $q \\leq $    | 树的形态 | 特殊性质 |\n| :--------: | :--------: | :-------------: | :-------------: | :------: | :------: |\n|     1      |     2      |     $3000$      |     $3000$      |    C     |    W     |\n|     2      |     2      | $7 \\times 10^6$ | $5 \\times 10^4$ |    A     |    W     |\n|     3      |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     4      |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     5      |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     6      |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     7      |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     8      |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     9      |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     10     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     11     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     12     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     13     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     14     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     15     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     16     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     17     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     18     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     19     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     20     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     21     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     22     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     23     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     24     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     25     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     26     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     27     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     28     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     29     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     30     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     31     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     32     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     33     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     34     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     35     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     36     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     37     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     38     |     3      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     39     |     3      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     40     |     3      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     41     |     3      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     42     |     3      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     43     |     3      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     44     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n\n\n上表“树的形态”一栏中，$\\texttt{A}$ 代表 $\\forall i \\in [2,n]$，$f_i$ 在 $[1,i-1]$ 中均匀随机生成；$\\texttt{B}$ 代表 $\\forall i \\in [2,n]$，$f_i=i-1$；$\\texttt{C}$ 代表树的形态无特殊限制。\n\n上表“特殊性质”一栏中，$\\texttt{X}$ 代表没有修改操作；$\\texttt{Y}$ 代表对于每次修改操作 $x=y$；$\\texttt{Z}$ 代表每次询问操作 $x=y$；$\\texttt{W}$ 代表无特殊性质。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 7 \\times 10^6,1 \\leq q \\leq 5 \\times 10^4,1 \\leq f_i<i,1 \\leq x,y \\leq n,0 \\leq A,B,C,a_0,v \\leq 10^9$。\n\n**【提示】**\n\n关于空间限制的提示与警告：\n\n1. 程序本身可能占用约 2~4MB 的空间（例如包含的 libc 库），请避免使用的空间与空间限制过于接近。\n2. 下发的快速输入模板占用约 1MB 空间，将其中的参数 `S` 调大可以减少对 `fread` 的调用次数（从而加快一点速度），但也会占用更多的空间。如有必要，您可以自由的调整 `S` 的大小，或者使用自己的输入方式。\n3. 需要注意的是，递归调用本身尽管没有显式地占用很多空间，但递归过程中的递归栈仍然可能占用内存（可以简单的理解为程序底层需要记录递归过程的参数和返回值）。例如，传入一个 `int` 类参数、返回值为 `int` 的递归函数递归调用 100 次可能产生等同于定义 200 个 `int` 的空间开销（具体比例系数与编译器实现和优化有关）。由于评测时的“空间限制”实际上是程序运行过程中的内存占用的峰值，因此过深的递归可能导致 MLE。因此请谨慎的使用递归，除非您能确保您的递归深度不会过大。\n4. 由于计算机系统向文件输出的底层实现相关的某些原因（例如在内存中缓存输出），输出本身可能会占用一定空间。对本题的输出规模而言，您可以认为这部分占用的空间不会超过 1MB；但是某些调试输出（例如使用 `cerr` 或者向 `stderr` 输出）可能会产生额外的空间开销（尽管它们本身不会出现在输出文件中，从而不会影响评测的比对结果），因此请确保最终提交的文件不包含过多的调试输出。\n5. 因以上原因超出空间限制的一律后果自负。\n\n本题输入量较大，您可能需要采用高效的输入方式以免因输入效率而超时。出于公平起见，在此提供一份快速输入模板（用法参考下发文件的 fast_input.cpp）。关于该快速输出模板的说明：\n\n1. 下发的快速输入模板占用约 1MB 空间。参数 `S` 越大，速度越快，但占用空间越高，请根据您的实际情况谨慎的确定 `S` 以获得最佳的时空平衡。\n2. 请确保代码中无变量、函数、命名空间等名为 `INPUT_SPACE` 或者 `inn` 以避免命名冲突，否则会导致无法通过编译。同理，某些形如 `#define gc getchar()` 的语句可能会导致和 `INPUT_SPACE` 的内部命名冲突。若发生此类编译错误，您需要更改这些冲突的命名。\n3. 对于本模板，建议从文件进行输入。从键盘输入，可能会产生无法终止的情形，此时需要在输入末尾手动输入作用等同于文件终止符的字符（该字符不能和输入的数字字符直接相邻，建议在新的一行）。例如，在 Windows 下，这个字符是 `Ctrl+Z`。\n4. 对 C 和 C++ 选手，该模板分别需要包含 `stdio.h` 和 `cstdio`（或者 `bits/stdc++.h`）头文件。\n5. 出于效率和码长的考虑，`inn()` 函数仅能用于输入一个无符号 32 位整数类型。\n\n为演示快速输入模板的使用和产生权值的方式，提供一样例程序，见下发文件的 sample.cpp。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 无处存储", "background": "滥用本题评测将封号。请注意本题非同寻常的时空限制和数据点个数。", "description": "小 Ω 想出一个数据结构题，于是它先造了一棵点有点权的树：\n\n给定一棵大小为 $n$ 的树，编号 $1$ 到 $n$，第 $i \\in [2,n]$  个点的父节点记作 $f_i \\in [1, i-1]$。另外，每个点 $i$ 有一个点权 $a_i$，初始点权由输入确定，具体方式见输入格式。\n\n在数据结构题里面，需要有对应的修改和查询的操作，而树上最简单的两种非平凡操作当然是链加、链求和了。\n\n因此你需要支持以下两种操作：\n\n`0 x y v`：将树上从 $x$ 到 $y$ 的简单路径上的点的权值增加 $v$；\n\n`1 x y`：求树上从 $x$ 到 $y$ 的简单路径上的点的权值和；\n\n出完之后小 Ω 拿给小 N 看，小 N 表示：\n\n……这也太简单了，这不是轻重链剖分模板题吗？！！\n\n小 Ω 于是想到在刚刚接触 OI 的时候了解到的时间换空间的原理，因此他决定本题的空间限制为 **64 MB**。", "inputFormat": "第一行输入三个正整数 $id$，$n$，$q$，其中 $id$ 为子任务编号，和四个非负整数 $A$，$B$，$C$，$a_0$。\n\n$A$，$B$，$C$，$a_0$ 用于生成点权 $a_1, a_2, \\dots, a_n$，具体方法是按照下式进行递推：\n$$a_{i}=\\left(A a_{i-1}^{2}+B a_{i-1}+C\\right) \\bmod 2^{32}$$\n\n接下来一行 $n-1$ 个正整数表示 $f_2, \\dots, f_n$。\n\n接下来 $q$ 行，每行若干整数，形如 $0 \\ x' \\ y' \\ v'$ 或者 $1 \\ x' \\ y'$，表示一次修改或查询。\n\n其中 $x^{\\prime}$，$y^{\\prime}$，$v^{\\prime}$ 用于**强制在线**，实际操作的 $x=x^{\\prime} \\operatorname{xor} P$，$y=y^{\\prime} \\operatorname{xor} P$， $v=v^{\\prime} \\operatorname{xor} P$，其中 $\\operatorname{xor}$ 是 `C/C++` 中的按位异或运算符 `^`，$P = \\text{lastans} \\And \\left(2^{20}-1\\right)$，其中 $\\text{lastans}$ 为上一次询问的答案（没有上次询问则记为 0），$\\And$ 为 `C/C++` 中的按位与运算符 `&`。", "outputFormat": "若干行，依次输出每个询问的答案对 $2^{32}$ 取模后的结果。\n", "hint": "样例 2 ~ 样例 15 数据见下方下载链接。\n\n以上各组样例数据中，每组数据的数据范围符合其输入的子任务编号对应的子任务的数据范围及性质（输入的子任务编号为 0 时除外），并且为了避免可能的常数问题，保证下发样例（子任务编号为 0 时除外）与最终评测所用的该子任务的测试点的数据生成方式强度相同。\n\n| 子任务编号 | 测试点分值 |    $n \\leq$     |    $q \\leq $    | 树的形态 | 特殊性质 |\n| :--------: | :--------: | :-------------: | :-------------: | :------: | :------: |\n|     1      |     2      |     $3000$      |     $3000$      |    C     |    W     |\n|     2      |     2      | $7 \\times 10^6$ | $5 \\times 10^4$ |    A     |    W     |\n|     3      |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     4      |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     5      |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     6      |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     7      |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     8      |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     9      |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    B     |    Y     |\n|     10     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     11     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     12     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     13     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     14     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     15     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     16     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    B     |    W     |\n|     17     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     18     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     19     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     20     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     21     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     22     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     23     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    X     |\n|     24     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     25     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     26     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     27     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     28     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     29     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     30     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Y     |\n|     31     |     2      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     32     |     2      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     33     |     2      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     34     |     2      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     35     |     2      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     36     |     2      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     37     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    Z     |\n|     38     |     3      | $1 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     39     |     3      | $2 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     40     |     3      | $3 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     41     |     3      | $4 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     42     |     3      | $5 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     43     |     3      | $6 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n|     44     |     3      | $7 \\times 10^6$ | $5 \\times 10^4$ |    C     |    W     |\n\n\n上表“树的形态”一栏中，$\\texttt{A}$ 代表 $\\forall i \\in [2,n]$，$f_i$ 在 $[1,i-1]$ 中均匀随机生成；$\\texttt{B}$ 代表 $\\forall i \\in [2,n]$，$f_i=i-1$；$\\texttt{C}$ 代表树的形态无特殊限制。\n\n上表“特殊性质”一栏中，$\\texttt{X}$ 代表没有修改操作；$\\texttt{Y}$ 代表对于每次修改操作 $x=y$；$\\texttt{Z}$ 代表每次询问操作 $x=y$；$\\texttt{W}$ 代表无特殊性质。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 7 \\times 10^6,1 \\leq q \\leq 5 \\times 10^4,1 \\leq f_i<i,1 \\leq x,y \\leq n,0 \\leq A,B,C,a_0,v \\leq 10^9$。\n\n**【提示】**\n\n关于空间限制的提示与警告：\n\n1. 程序本身可能占用约 2~4MB 的空间（例如包含的 libc 库），请避免使用的空间与空间限制过于接近。\n2. 下发的快速输入模板占用约 1MB 空间，将其中的参数 `S` 调大可以减少对 `fread` 的调用次数（从而加快一点速度），但也会占用更多的空间。如有必要，您可以自由的调整 `S` 的大小，或者使用自己的输入方式。\n3. 需要注意的是，递归调用本身尽管没有显式地占用很多空间，但递归过程中的递归栈仍然可能占用内存（可以简单的理解为程序底层需要记录递归过程的参数和返回值）。例如，传入一个 `int` 类参数、返回值为 `int` 的递归函数递归调用 100 次可能产生等同于定义 200 个 `int` 的空间开销（具体比例系数与编译器实现和优化有关）。由于评测时的“空间限制”实际上是程序运行过程中的内存占用的峰值，因此过深的递归可能导致 MLE。因此请谨慎的使用递归，除非您能确保您的递归深度不会过大。\n4. 由于计算机系统向文件输出的底层实现相关的某些原因（例如在内存中缓存输出），输出本身可能会占用一定空间。对本题的输出规模而言，您可以认为这部分占用的空间不会超过 1MB；但是某些调试输出（例如使用 `cerr` 或者向 `stderr` 输出）可能会产生额外的空间开销（尽管它们本身不会出现在输出文件中，从而不会影响评测的比对结果），因此请确保最终提交的文件不包含过多的调试输出。\n5. 因以上原因超出空间限制的一律后果自负。\n\n本题输入量较大，您可能需要采用高效的输入方式以免因输入效率而超时。出于公平起见，在此提供一份快速输入模板（用法参考下发文件的 fast_input.cpp）。关于该快速输出模板的说明：\n\n1. 下发的快速输入模板占用约 1MB 空间。参数 `S` 越大，速度越快，但占用空间越高，请根据您的实际情况谨慎的确定 `S` 以获得最佳的时空平衡。\n2. 请确保代码中无变量、函数、命名空间等名为 `INPUT_SPACE` 或者 `inn` 以避免命名冲突，否则会导致无法通过编译。同理，某些形如 `#define gc getchar()` 的语句可能会导致和 `INPUT_SPACE` 的内部命名冲突。若发生此类编译错误，您需要更改这些冲突的命名。\n3. 对于本模板，建议从文件进行输入。从键盘输入，可能会产生无法终止的情形，此时需要在输入末尾手动输入作用等同于文件终止符的字符（该字符不能和输入的数字字符直接相邻，建议在新的一行）。例如，在 Windows 下，这个字符是 `Ctrl+Z`。\n4. 对 C 和 C++ 选手，该模板分别需要包含 `stdio.h` 和 `cstdio`（或者 `bits/stdc++.h`）头文件。\n5. 出于效率和码长的考虑，`inn()` 函数仅能用于输入一个无符号 32 位整数类型。\n\n为演示快速输入模板的使用和产生权值的方式，提供一样例程序，见下发文件的 sample.cpp。", "locale": "zh-CN"}}}
{"pid": "P8354", "type": "P", "difficulty": 7, "samples": [["3\n2 2 1", "5"], ["5\n3 1 4 2 5", "359895"], ["8\n4 2 1 8 3 7 3 1", "577596154\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2022", "山东", "O2优化", "山西"], "title": "[SDOI/SXOI2022] 多边形", "background": "", "description": "给定一个正 $n$ 边形，除了这个正 $n$ 边形的 $n$ 个顶点，顺时针第 $i$ 条边上还有额外的 $a_i-1$ 个顶点等分这条线段，也就是说，第 $i$ 条边被顶点分成了长度相等的 $a_i$ 段。\n\n你可以在顶点之间连接一些线段，但是连接完线段之后，图中的任意两条新添加的线段只能在端点处有交，此外，新的线段也不应该与多边形的边有所重合。\n\n我们称添加了若干线段之后得到的图为一个三角剖分，当且仅当多边形内的每个面都是一个三角形，注意，三角形的边上可以有原来凸多边形边上的顶点。\n\n给定这样一个凸多边形，其有多少种满足上述条件的三角剖分? 你只需要计算方案数模 $998244353$ 的答案就行。", "inputFormat": "第一行输入一个正整数 $n$，表示凸多边形的边数。\n\n第二行输入 $n$ 个正整数，其中第 $i$ 个正整数为 $a_i$，含义如题目描述中所示。", "outputFormat": "输出一行一个整数，表示满足题目要求的三角剖分的方案数模 $998244353$ 的结果。\n\n", "hint": "**【样例 1 解释】**\n\n5 种方案如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v9hip98o.png)\n\n**【数据范围】**\n\n对于 $10 \\%$ 的数据，保证 $\\sum a_{i} \\leq 300$。  \n对于 $50 \\%$ 的数据，保证 $\\sum a_{i} \\leq 5000$。  \n对于 $100 \\%$ 的数据，保证 $n \\geq 3$，$a_{i} \\geq 1$， $\\sum a_{i} \\leq 5 \\times 10^{5}$。\n\n注：本题无大样例下载", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[SDOI/SXOI2022] 多边形", "background": "", "description": "给定一个正 $n$ 边形，除了这个正 $n$ 边形的 $n$ 个顶点，顺时针第 $i$ 条边上还有额外的 $a_i-1$ 个顶点等分这条线段，也就是说，第 $i$ 条边被顶点分成了长度相等的 $a_i$ 段。\n\n你可以在顶点之间连接一些线段，但是连接完线段之后，图中的任意两条新添加的线段只能在端点处有交，此外，新的线段也不应该与多边形的边有所重合。\n\n我们称添加了若干线段之后得到的图为一个三角剖分，当且仅当多边形内的每个面都是一个三角形，注意，三角形的边上可以有原来凸多边形边上的顶点。\n\n给定这样一个凸多边形，其有多少种满足上述条件的三角剖分? 你只需要计算方案数模 $998244353$ 的答案就行。", "inputFormat": "第一行输入一个正整数 $n$，表示凸多边形的边数。\n\n第二行输入 $n$ 个正整数，其中第 $i$ 个正整数为 $a_i$，含义如题目描述中所示。", "outputFormat": "输出一行一个整数，表示满足题目要求的三角剖分的方案数模 $998244353$ 的结果。\n\n", "hint": "**【样例 1 解释】**\n\n5 种方案如图所示。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v9hip98o.png)\n\n**【数据范围】**\n\n对于 $10 \\%$ 的数据，保证 $\\sum a_{i} \\leq 300$。  \n对于 $50 \\%$ 的数据，保证 $\\sum a_{i} \\leq 5000$。  \n对于 $100 \\%$ 的数据，保证 $n \\geq 3$，$a_{i} \\geq 1$， $\\sum a_{i} \\leq 5 \\times 10^{5}$。\n\n注：本题无大样例下载", "locale": "zh-CN"}}}
