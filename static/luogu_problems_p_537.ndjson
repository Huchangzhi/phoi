{"pid": "P11902", "type": "P", "difficulty": 6, "samples": [["5 3 3 2\n1 7\n2 8\n3 6\n4 6\n5 8\n6 7\n7 8\n1 6\n2 8\n3 6\n4 7\n5 8\n6 7\n7 8", "1\n4"], ["4 2 2 0\n1 5\n2 5\n3 6\n4 6\n5 6\n1 6\n2 6\n3 5\n4 5\n5 6", "0"], ["6 3 3 2\n1 7\n2 7\n3 7\n4 8\n5 9\n6 9\n7 8\n8 9\n1 7\n2 7\n3 9\n4 9\n5 8\n6 8\n7 8\n8 9", "2\n9"], ["6 1 4 2\n1 7\n2 7\n3 7\n4 7\n5 7\n6 7\n1 7\n2 7\n3 8\n4 8\n5 9\n6 9\n7 10\n8 10\n9 10", "-1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "树形 DP", "哈希 hashing", "台湾"], "title": "[NHSPC 2023] A. 演化樹分析", "background": "", "description": "彼得是一位生物學家。有次他在兩筆資料中分析同一群現存物種集合 $\\Sigma = \\{1, 2, \\ldots, n\\}$ 間的演化關係，卻得到了不太一樣的演化樹，想知道這兩棵演化樹的類似程度。\n\n一棵演化樹 $T$ 是一棵無向無根樹 (undirected, unrooted tree)，其中葉節點為現存物種 $1, 2, \\ldots, n$，其他節點則為已滅絕物種。設 $v \\in V(T)$，我們用 $\\deg(v)$ 來表示與節點 $v$ 相鄰的節點個數。在一棵演化樹中，每個代表已滅絕物種的節點 $v$ 均有 $\\deg(v) \\ge 3$。對於一個現存物種的子集合 $X \\subseteq \\Sigma$，我們用 $T\\{X\\}$ 來代表 $X$ 中的現存物種在 $T$ 上的演化關係所形成的「演化子樹」，建構方式如下：\n\n1. 對所有 $X$ 中的任兩點，標記其在 $T$ 上的簡單路徑，並將所有不在 $X$ 且未被標記的點刪除以得到 $T'$。\n1. 從 $T'$ 中不斷刪除滿足 $\\deg(v) = 2$ 的非葉節點 $v$ 以得到 $T\\{X\\}$：將與 $v$ 連結的兩條邊合併成一條，並移除 $v$。\n\n以下圖的演化樹 $T$ 為例。$T$ 裡的現存物種集合為 $\\Sigma = \\{1, 2, 3, 4, 5\\}$，若取 $X = \\{3, 4, 5\\}$，則經步驟 $1$ 後會得到 $T'$，再經過步驟 $2$ 後會得到 $T\\{X\\}$。注意當 $X = \\emptyset$ 時，根據定義我們有 $T\\{X\\} = \\emptyset$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c2xg13m0.png)\n\n從一棵演化樹 $T$ 中移除大小為 $k \\ge 0$ 的任意邊集合 $K$，可以得到 $k+1$ 棵子樹 $T^{(1)}, T^{(2)}, \\ldots, T^{(k+1)}$，其中每棵子樹 $T^{(i)}$ 上的物種在 $T$ 中的演化關係都會構成一棵**演化子樹**，我們稱它們為從 $T$ 中移除 $K$ 所導出的**演化森林**。注意我們有\n\n1. $T$ 自身為移除 $\\emptyset$ 後導出的演化森林。\n1. 若一棵子樹 $T^{(i)}$ 上沒有任何現存物種，對應的演化子樹為空。\n\n以上圖中的 $T$ 為例，移除 $K = \\{(1, 7), (7, 8), (2, 8), (5, 8)\\}$ 四條邊可以得到五棵子樹 $T^{(1)}, T^{(2)}, \\ldots, T^{(5)}$，接著導出演化森林：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/10jt4cii.png)\n\n比較兩座現存物種相同的演化森林時，我們只關注現存物種間的關係，因此已滅絕物種（即非葉節點）的編號並不重要。設 $F_1$ 與 $F_2$ 為兩座現存物種相同的演化森林，若移除它們的非葉節點編號後變得完全相同，我們就稱 $F_1$ 與 $F_2$ 類似。更精確地說，我們稱 $F_1$ 與 $F_2$ 類似，若且唯若存在某個一對一函數 $\\Phi: V(F_1) \\to V(F_2)$，滿足\n\n1. 對任意 $u \\in \\Sigma = \\{1, 2, \\ldots, n\\}$，我們有 $\\Phi(u) = u$。\n1. 對任意 $u, v \\in V(F_1)$，我們有\n$$(u, v) \\in E(F_1) \\iff (\\Phi(u), \\Phi(v)) \\in E(F_2).$$\n\n以下圖為例，如果將 $T_1, T_2, T_3$ 的非葉節點編號都移除，會發現 $T_1$ 與 $T_2$ 不類似，而 $T_2$ 與 $T_3$ 類似。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8vu59rjm.png)\n\n設 $T_1$ 與 $T_2$ 為現存物種相同的兩棵演化樹。若存在從 $T_1$ 與 $T_2$ 中各刪除 $k$ 條邊的方法，使得兩者導出的演化森林類似，則稱 $T_1$ 與 $T_2$ 的差異不大於 $k$，而滿足此條件的最小整數 $k^*$ 稱為 $T_1$ 與 $T_2$ 的**差異數**。如上圖中 $T_2$ 與 $T_3$ 的差異數為 $0$，而 $T_1$ 與 $T_2$ 的差異數為 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/scjhebou.png)\n\n從 $T_1$ 與 $T_2$ 各刪除 $1$ 條邊 | 導出了類似的演化森林\n\n設從 $T_1$ 與 $T_2$ 中刪除的邊集合分別為 $K_1$ 與 $K_2$，兩種刪除方法被視為不同若且唯若 $K_1$ 不同或 $K_2$ 不同。現給定兩棵物種集合均為 $\\Sigma$ 的演化樹 $T_1, T_2$ 以及一個整數上限 $k$，彼得想知道它們的差異數 $k^*$ 是否不大於 $k$；如果 $1 \\le k^* \\le k$，彼得也想知道有多少種從 $T_1$ 和 $T_2$ 中各刪除 $k^*$ 條邊的方法，可以使它們導出類似的演化森林。", "inputFormat": "> $n$ $m_1$ $m_2$ $k$   \n> $u_1$ $v_1$   \n> $u_2$ $v_2$   \n> $\\vdots$   \n> $u_{n+m_1-1}$ $v_{n+m_1-1}$   \n> $u_1'$ $v_1'$   \n> $u_2'$ $v_2'$   \n> $\\vdots$   \n> $u_{n+m_2-1}'$ $v_{n+m_2-1}'$\n\n* $n$ 代表現存物種集合 $\\Sigma = \\{1, 2, \\ldots, n\\}$ 的大小。\n* $m_1$ 代表在 $T_1$ 中已滅絕物種（以 $n+1, n+2, \\ldots, n+m_1$ 表示）的數量。\n* $m_2$ 代表在 $T_2$ 中已滅絕物種（以 $n+1, n+2, \\ldots, n+m_2$ 表示）的數量。\n* $k$ 代表彼得設定的上限。\n* $u_i, v_i$ 代表 $T_1$ 有一條邊從 $u_i$ 連接到 $v_i$。\n* $u_i', v_i'$ 代表 $T_2$ 有一條邊從 $u_i'$ 連接到 $v_i'$。", "outputFormat": "如果 $k^* = 0$，請輸出\n\n> $0$\n\n如果 $1 \\le k^* \\le k$，請輸出\n\n> $k^*$  \n> $S$\n\n其中 $S$ 為一整數，代表從 $T_1$ 與 $T_2$ 中各刪除 $k^*$ 條邊後導出的演化森林類似的刪除方法數。如果 $k^* > k$，請輸出\n\n> $-1$", "hint": "### 測資限制\n\n* $n \\ge 2$。\n* $0 \\le m_1 \\le 300-n$。\n* $0 \\le m_2 \\le 300-n$。\n* $k \\in \\{0, 1, 2\\}$。\n* $1 \\le u_i \\le n+m_1$。\n* $1 \\le v_i \\le n+m_1$。\n* $1 \\le u_i' \\le n+m_2$。\n* $1 \\le v_i' \\le n+m_2$。\n* 給定的 $T_1$ 與 $T_2$ 保證連通，且\n  1. 若 $u \\in \\{1, 2, \\ldots, n\\}$，則在 $T_1$ 與 $T_2$ 中 $\\deg(u) = 1$。\n  1. 若 $u \\in \\{n+1, n+2, \\ldots, n+m_1\\}$，則在 $T_1$ 中 $\\deg(u) \\ge 3$。\n  1. 若 $u \\in \\{n+1, n+2, \\ldots, n+m_2\\}$，則在 $T_2$ 中 $\\deg(u) \\ge 3$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有四組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $21$ | $k = 0$ |\n| 2 | $13$ | $k \\in \\{0, 1\\}$ |\n| 3 | $23$ | $n+m_1 \\le 30$ 且 $n+m_2 \\le 30$ |\n| 4 | $43$ | 無額外限制 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[NHSPC 2023] A. 演化树分析", "background": "", "description": "彼得是一位生物学家。有次他在两笔资料中分析同一群现存物种集合 $\\Sigma = \\{1, 2, \\ldots, n\\}$ 间的演化关系，却得到了不太一样的演化树，想知道这两棵树的相似程度。\n\n一棵演化树 $T$ 是一棵无向无根树 (undirected, unrooted tree)，其中叶节点为现存物种 $1, 2, \\ldots, n$，其他节点则为已灭绝物种。设 $v \\in V(T)$，我们用 $\\deg(v)$ 来表示与节点 $v$ 相邻的节点个数。在一棵演化树中，每个代表已灭绝物种的节点 $v$ 均有 $\\deg(v) \\ge 3$。对于一个现存物种的子集合 $X \\subseteq \\Sigma$，我们用 $T\\{X\\}$ 来代表 $X$ 中的现存物种在 $T$ 上的演化关系所形成的「演化子树」，构建方式如下：\n\n1. 对所有 $X$ 中的任两点，标记其在 $T$ 上的简单路径，并将所有不在 $X$ 且未被标记的点删除以得到 $T'$。\n1. 从 $T'$ 中不断删除满足 $\\deg(v) = 2$ 的非叶节点 $v$ 以得到 $T\\{X\\}$：将与 $v$ 连接的两条边合并成一条，并移除 $v$。\n\n以下图的演化树 $T$ 为例。$T$ 里的现存物种集合为 $\\Sigma = \\{1, 2, 3, 4, 5\\}$，若取 $X = \\{3, 4, 5\\}$，则经步骤 $1$ 后会得到 $T'$，再经过步骤 $2$ 后会得到 $T\\{X\\}$。注意当 $X = \\emptyset$ 时，根据定义我们有 $T\\{X\\} = \\emptyset$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c2xg13m0.png)\n\n从一棵演化树 $T$ 中移除大小为 $k \\ge 0$ 的任意边集合 $K$，可以得到 $k+1$ 棵子树 $T^{(1)}, T^{(2)}, \\ldots, T^{(k+1)}$，其中每棵子树 $T^{(i)}$ 上的物种在 $T$ 中的演化关系都会构成一棵**演化子树**，我们称它们为从 $T$ 中移除 $K$ 所导出的**演化森林**。注意我们有\n\n1. $T$ 自身为移除 $\\emptyset$ 后导出的演化森林。\n1. 若一棵子树 $T^{(i)}$ 上没有任何现存物种，对应的演化子树为空。\n\n以上图中的 $T$ 为例，移除 $K = \\{(1, 7), (7, 8), (2, 8), (5, 8)\\}$ 四条边可以得到五棵子树 $T^{(1)}, T^{(2)}, \\ldots, T^{(5)}$，接着导出演化森林：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/10jt4cii.png)\n\n比较两座现存物种相同的演化森林时，我们只关注现存物种间的联系，因此已灭绝物种（即非叶节点）的编号并不重要。设 $F_1$ 与 $F_2$ 为两座现存物种相同的演化森林，若移除它们的非叶节点编号后变得完全相同，我们就称 $F_1$ 与 $F_2$ 相似。更精确地说，我们称 $F_1$ 与 $F_2$ 相似，若且唯若存在某个一一映射 $\\Phi: V(F_1) \\to V(F_2)$，满足\n\n1. 对任意 $u \\in \\Sigma = \\{1, 2, \\ldots, n\\}$，我们有 $\\Phi(u) = u$。\n1. 对任意 $u, v \\in V(F_1)$，我们有\n$$(u, v) \\in E(F_1) \\iff (\\Phi(u), \\Phi(v)) \\in E(F_2).$$\n\n以下图为例，如果将 $T_1, T_2, T_3$ 的非叶节点编号都移除，会发现 $T_1$ 与 $T_2$ 不相似，而 $T_2$ 与 $T_3$ 相似。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8vu59rjm.png)\n\n设 $T_1$ 与 $T_2$ 为现存物种相同的两棵演化树。若存在从 $T_1$ 与 $T_2$ 中各删除 $k$ 条边的方法，使得两者导出的演化森林相似，则称 $T_1$ 与 $T_2$ 的差异不大于 $k$，而满足此条件的最小整数 $k^*$ 称为 $T_1$ 与 $T_2$ 的**差异数**。如上图中 $T_2$ 与 $T_3$ 的差异数为 $0$，而 $T_1$ 与 $T_2$ 的差异数为 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/scjhebou.png)\n\n从 $T_1$ 与 $T_2$ 各删除 $1$ 条边 | 导出了相似的演化森林\n\n设从 $T_1$ 与 $T_2$ 中删除的边集合分别为 $K_1$ 与 $K_2$，两种删除方法被视作不同若且唯若 $K_1$ 不同或 $K_2$ 不同。现给定两棵物种集合均为 $\\Sigma$ 的演化树 $T_1, T_2$ 以及一个整数上限 $k$，彼得想知道它们的差异数 $k^*$ 是否不大于 $k$；如果 $1 \\le k^* \\le k$，彼得也想知道有多少种从 $T_1$ 和 $T_2$ 中各删除 $k^*$ 条边的方法，可以使它们导出相似的演化森林。", "inputFormat": "> $n$ $m_1$ $m_2$ $k$   \n> $u_1$ $v_1$   \n> $u_2$ $v_2$   \n> $\\vdots$   \n> $u_{n+m_1-1}$ $v_{n+m_1-1}$   \n> $u_1'$ $v_1'$   \n> $u_2'$ $v_2'$   \n> $\\vdots$   \n> $u_{n+m_2-1}'$ $v_{n+m_2-1}'$\n\n* $n$ 代表现存物种集合 $\\Sigma = \\{1, 2, \\ldots, n\\}$ 的大小。\n* $m_1$ 代表在 $T_1$ 中已灭绝物种（以 $n+1, n+2, \\ldots, n+m_1$ 表示）的数量。\n* $m_2$ 代表在 $T_2$ 中已灭绝物种（以 $n+1, n+2, \\ldots, n+m_2$ 表示）的数量。\n* $k$ 代表彼得设定的上限。\n* $u_i, v_i$ 代表 $T_1$ 有一条边从 $u_i$ 连接到 $v_i$。\n* $u_i', v_i'$ 代表 $T_2$ 有一条边从 $u_i'$ 连接到 $v_i'$。", "outputFormat": "如果 $k^* = 0$，请输出\n\n> $0$\n\n如果 $1 \\le k^* \\le k$，请输出\n\n> $k^*$  \n> $S$\n\n其中 $S$ 为一整数，代表从 $T_1$ 与 $T_2$ 中各删除 $k^*$ 条边后导出的演化森林相似的删除方法数。如果 $k^* > k$，请输出\n\n> $-1$", "hint": "### 测试数据限制\n\n* $n \\ge 2$。\n* $0 \\le m_1 \\le 300-n$。\n* $0 \\le m_2 \\le 300-n$。\n* $k \\in \\{0, 1, 2\\}$。\n* $1 \\le u_i \\le n+m_1$。\n* $1 \\le v_i \\le n+m_1$。\n* $1 \\le u_i' \\le n+m_2$。\n* $1 \\le v_i' \\le n+m_2$。\n* 给定的 $T_1$ 与 $T_2$ 保证连通，且\n  1. 若 $u \\in \\{1, 2, \\ldots, n\\}$，则在 $T_1$ 与 $T_2$ 中 $\\deg(u) = 1$。\n  1. 若 $u \\in \\{n+1, n+2, \\ldots, n+m_1\\}$，则在 $T_1$ 中 $\\deg(u) \\ge 3$。\n  1. 若 $u \\in \\{n+1, n+2, \\ldots, n+m_2\\}$，则在 $T_2$ 中 $\\deg(u) \\ge 3$。\n* 输入的数皆为整数。\n\n### 评分说明\n\n本题共有四组子任务，条件限制如下所示。\n每一组可有一或多个测试数据，该组所有测试数据皆需答对才会有该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $21$ | $k = 0$ |\n| 2 | $13$ | $k \\in \\{0, 1\\}$ |\n| 3 | $23$ | $n+m_1 \\le 30$ 且 $n+m_2 \\le 30$ |\n| 4 | $43$ | 无额外限制 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[NHSPC 2023] A. 演化樹分析", "background": "", "description": "彼得是一位生物學家。有次他在兩筆資料中分析同一群現存物種集合 $\\Sigma = \\{1, 2, \\ldots, n\\}$ 間的演化關係，卻得到了不太一樣的演化樹，想知道這兩棵演化樹的類似程度。\n\n一棵演化樹 $T$ 是一棵無向無根樹 (undirected, unrooted tree)，其中葉節點為現存物種 $1, 2, \\ldots, n$，其他節點則為已滅絕物種。設 $v \\in V(T)$，我們用 $\\deg(v)$ 來表示與節點 $v$ 相鄰的節點個數。在一棵演化樹中，每個代表已滅絕物種的節點 $v$ 均有 $\\deg(v) \\ge 3$。對於一個現存物種的子集合 $X \\subseteq \\Sigma$，我們用 $T\\{X\\}$ 來代表 $X$ 中的現存物種在 $T$ 上的演化關係所形成的「演化子樹」，建構方式如下：\n\n1. 對所有 $X$ 中的任兩點，標記其在 $T$ 上的簡單路徑，並將所有不在 $X$ 且未被標記的點刪除以得到 $T'$。\n1. 從 $T'$ 中不斷刪除滿足 $\\deg(v) = 2$ 的非葉節點 $v$ 以得到 $T\\{X\\}$：將與 $v$ 連結的兩條邊合併成一條，並移除 $v$。\n\n以下圖的演化樹 $T$ 為例。$T$ 裡的現存物種集合為 $\\Sigma = \\{1, 2, 3, 4, 5\\}$，若取 $X = \\{3, 4, 5\\}$，則經步驟 $1$ 後會得到 $T'$，再經過步驟 $2$ 後會得到 $T\\{X\\}$。注意當 $X = \\emptyset$ 時，根據定義我們有 $T\\{X\\} = \\emptyset$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/c2xg13m0.png)\n\n從一棵演化樹 $T$ 中移除大小為 $k \\ge 0$ 的任意邊集合 $K$，可以得到 $k+1$ 棵子樹 $T^{(1)}, T^{(2)}, \\ldots, T^{(k+1)}$，其中每棵子樹 $T^{(i)}$ 上的物種在 $T$ 中的演化關係都會構成一棵**演化子樹**，我們稱它們為從 $T$ 中移除 $K$ 所導出的**演化森林**。注意我們有\n\n1. $T$ 自身為移除 $\\emptyset$ 後導出的演化森林。\n1. 若一棵子樹 $T^{(i)}$ 上沒有任何現存物種，對應的演化子樹為空。\n\n以上圖中的 $T$ 為例，移除 $K = \\{(1, 7), (7, 8), (2, 8), (5, 8)\\}$ 四條邊可以得到五棵子樹 $T^{(1)}, T^{(2)}, \\ldots, T^{(5)}$，接著導出演化森林：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/10jt4cii.png)\n\n比較兩座現存物種相同的演化森林時，我們只關注現存物種間的關係，因此已滅絕物種（即非葉節點）的編號並不重要。設 $F_1$ 與 $F_2$ 為兩座現存物種相同的演化森林，若移除它們的非葉節點編號後變得完全相同，我們就稱 $F_1$ 與 $F_2$ 類似。更精確地說，我們稱 $F_1$ 與 $F_2$ 類似，若且唯若存在某個一對一函數 $\\Phi: V(F_1) \\to V(F_2)$，滿足\n\n1. 對任意 $u \\in \\Sigma = \\{1, 2, \\ldots, n\\}$，我們有 $\\Phi(u) = u$。\n1. 對任意 $u, v \\in V(F_1)$，我們有\n$$(u, v) \\in E(F_1) \\iff (\\Phi(u), \\Phi(v)) \\in E(F_2).$$\n\n以下圖為例，如果將 $T_1, T_2, T_3$ 的非葉節點編號都移除，會發現 $T_1$ 與 $T_2$ 不類似，而 $T_2$ 與 $T_3$ 類似。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/8vu59rjm.png)\n\n設 $T_1$ 與 $T_2$ 為現存物種相同的兩棵演化樹。若存在從 $T_1$ 與 $T_2$ 中各刪除 $k$ 條邊的方法，使得兩者導出的演化森林類似，則稱 $T_1$ 與 $T_2$ 的差異不大於 $k$，而滿足此條件的最小整數 $k^*$ 稱為 $T_1$ 與 $T_2$ 的**差異數**。如上圖中 $T_2$ 與 $T_3$ 的差異數為 $0$，而 $T_1$ 與 $T_2$ 的差異數為 $1$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/scjhebou.png)\n\n從 $T_1$ 與 $T_2$ 各刪除 $1$ 條邊 | 導出了類似的演化森林\n\n設從 $T_1$ 與 $T_2$ 中刪除的邊集合分別為 $K_1$ 與 $K_2$，兩種刪除方法被視為不同若且唯若 $K_1$ 不同或 $K_2$ 不同。現給定兩棵物種集合均為 $\\Sigma$ 的演化樹 $T_1, T_2$ 以及一個整數上限 $k$，彼得想知道它們的差異數 $k^*$ 是否不大於 $k$；如果 $1 \\le k^* \\le k$，彼得也想知道有多少種從 $T_1$ 和 $T_2$ 中各刪除 $k^*$ 條邊的方法，可以使它們導出類似的演化森林。", "inputFormat": "> $n$ $m_1$ $m_2$ $k$   \n> $u_1$ $v_1$   \n> $u_2$ $v_2$   \n> $\\vdots$   \n> $u_{n+m_1-1}$ $v_{n+m_1-1}$   \n> $u_1'$ $v_1'$   \n> $u_2'$ $v_2'$   \n> $\\vdots$   \n> $u_{n+m_2-1}'$ $v_{n+m_2-1}'$\n\n* $n$ 代表現存物種集合 $\\Sigma = \\{1, 2, \\ldots, n\\}$ 的大小。\n* $m_1$ 代表在 $T_1$ 中已滅絕物種（以 $n+1, n+2, \\ldots, n+m_1$ 表示）的數量。\n* $m_2$ 代表在 $T_2$ 中已滅絕物種（以 $n+1, n+2, \\ldots, n+m_2$ 表示）的數量。\n* $k$ 代表彼得設定的上限。\n* $u_i, v_i$ 代表 $T_1$ 有一條邊從 $u_i$ 連接到 $v_i$。\n* $u_i', v_i'$ 代表 $T_2$ 有一條邊從 $u_i'$ 連接到 $v_i'$。", "outputFormat": "如果 $k^* = 0$，請輸出\n\n> $0$\n\n如果 $1 \\le k^* \\le k$，請輸出\n\n> $k^*$  \n> $S$\n\n其中 $S$ 為一整數，代表從 $T_1$ 與 $T_2$ 中各刪除 $k^*$ 條邊後導出的演化森林類似的刪除方法數。如果 $k^* > k$，請輸出\n\n> $-1$", "hint": "### 測資限制\n\n* $n \\ge 2$。\n* $0 \\le m_1 \\le 300-n$。\n* $0 \\le m_2 \\le 300-n$。\n* $k \\in \\{0, 1, 2\\}$。\n* $1 \\le u_i \\le n+m_1$。\n* $1 \\le v_i \\le n+m_1$。\n* $1 \\le u_i' \\le n+m_2$。\n* $1 \\le v_i' \\le n+m_2$。\n* 給定的 $T_1$ 與 $T_2$ 保證連通，且\n  1. 若 $u \\in \\{1, 2, \\ldots, n\\}$，則在 $T_1$ 與 $T_2$ 中 $\\deg(u) = 1$。\n  1. 若 $u \\in \\{n+1, n+2, \\ldots, n+m_1\\}$，則在 $T_1$ 中 $\\deg(u) \\ge 3$。\n  1. 若 $u \\in \\{n+1, n+2, \\ldots, n+m_2\\}$，則在 $T_2$ 中 $\\deg(u) \\ge 3$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有四組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $21$ | $k = 0$ |\n| 2 | $13$ | $k \\in \\{0, 1\\}$ |\n| 3 | $23$ | $n+m_1 \\le 30$ 且 $n+m_2 \\le 30$ |\n| 4 | $43$ | 無額外限制 |", "locale": "zh-Hant"}}}
{"pid": "P11903", "type": "P", "difficulty": 4, "samples": [["8 6 2\n010010\n000000\n000010\n110111\n011010\n101110\n100000\n000001", "000011"], ["8 3 2\n000\n001\n010\n100\n011\n101\n110\n111", "none"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "Special Judge", "O2优化", "台湾", "bitset"], "title": "[NHSPC 2023] B. 人工智慧模擬", "background": "", "description": "在 2023 年的現在人工智慧非常地流行。為了獲得人工智慧學習的資料，我們希望產生一個人工智慧機器人來模擬人類。\n首先，我們邀請一些受訪者進行調查。在調查中，我們找來了 $n$ 位受訪者，並得到了每位受訪者的 $k$ 項特徵。第 $i$ 位受訪者的特徵可以用長度為 $k$ 的 01 字串 $b_{i,1}b_{i,2}\\ldots b_{i,k}$ 表示，稱之為第 $i$ 位受訪者的特徵序列。如果第 $i$ 位受訪者符合第 $j$ 特徵，則 $b_{i,j}=1$，反之為 $0$。\n\n我們做出來的人工智慧亦可以用特徵序列描述。為了讓作出來的人工智慧盡可能地接近人類，人工智慧的特徵序列 $q_1q_2\\ldots q_k$ 需要滿足以下規定：任意取人工智慧相異的 $t$ 項特徵，都能找出一位在這 $t$ 項特徵中完全相同的受訪者。更嚴謹地說，對任意下標序列 ${j_1,j_2,\\ldots,j_t}$，其中 $1 \\le j_1 < j_2 < \\ldots < j_t \\le k$，都能找到某位受訪者 $i$ ，滿足對任意 $l\\in\\{1,2,\\ldots,t\\}$，均有 $b_{i,j_l}=q_{j_l}$。並且由於倫理要求，人工智慧的特徵序列不可以與任何一個受訪者的特徵序列完全相同。\n\n現在經費十分有限，你只能製作出最多擁有 $3$ 項特徵的人工智慧，也就是特徵序列 $q_1q_2\\ldots q_k$ 中最多只能有 $3$ 個位置為 $1$。請找出任一個合法且可以製作的人工智慧特徵序列；如果無法滿足條件，請輸出 `none` 。", "inputFormat": "> $n$ $k$ $t$   \n> $b_{1,1}b_{1,2}\\ldots b_{1,k}$   \n> $b_{2,1}b_{2,2}\\ldots b_{2,k}$   \n> $\\vdots$   \n> $b_{n,1}b_{n,2}\\ldots b_{n,k}$\n\n* $n$ 為受訪者數量。\n* $k$ 為特徵序列長度。\n* $t$ 為需要相同的特徵數。\n* $b_{i,j}$ 為第 $i$ 位受訪者是否符合第 $j$ 項特徵。\n* 以上變數皆為整數。", "outputFormat": "如果存在合法且可以製作的人工智慧特徵序列 $q_1q_2\\ldots q_k$，請輸出\n\n> $q_1q_2\\ldots q_k$\n\n其中 $q_j$ 為此人工智慧是否符合第 $j$ 項特徵。如果有多種合法的 $q_1q_2\\ldots q_k$，輸出任一個即可。否則請輸出\n\n> $\\texttt{none}$", "hint": "### 測資限制\n\n* $1 \\le n \\le 100$。\n* $2 \\le t< k \\le 10$。\n* $b_{i, j}\\in \\{0,1\\}$。\n* $n, t$ 與 $k$ 皆為整數。\n\n### 評分說明\n\n本題共有三組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $3$ | 輸入滿足 $n\\leq 5$，且每位受訪者的特徵序列均有超過 $3$ 個位置為 $1$ |\n| 2 | $5$ | 輸入滿足 $n\\leq 5$ |\n| 3 | $92$ | 無額外限制 |\n", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[NHSPC 2023] B. 人工智能模拟", "background": "", "description": "在 2023 年的现在，人工智能非常流行。为了获得人工智能学习的数据，我们希望制造一个人工智能机器人来模拟人类。首先，我们邀请一些受访者进行调查。在调查中，我们找来了 $n$ 位受访者，并得到了每位受访者的 $k$ 项特征。第 $i$ 位受访者的特征可以用长度为 $k$ 的 01 字符串 $b_{i,1}b_{i,2}\\ldots b_{i,k}$ 表示，称为第 $i$ 位受访者的特征序列。如果第 $i$ 位受访者符合第 $j$ 特征，则 $b_{i,j}=1$，反之为 $0$。\n\n我们制造出来的人工智能也可以用特征序列描述。为了使制造出来的人工智能尽可能接近人类，人工智能的特征序列 $q_1q_2\\ldots q_k$ 需要满足以下规定：任意取人工智能不同的 $t$ 项特征，都能找出一位在这 $t$ 项特征中完全相同的受访者。更严谨地说，对任意下标序列 ${j_1,j_2,\\ldots,j_t}$，其中 $1 \\le j_1 < j_2 < \\ldots < j_t \\le k$，都能找到某位受访者 $i$ ，满足对任意 $l\\in\\{1,2,\\ldots,t\\}$，均有 $b_{i,j_l}=q_{j_l}$。并且由于伦理要求，人工智能的特征序列不可以与任何一位受访者的特征序列完全相同。\n\n现在经费十分有限，你只能制造最多拥有 $3$ 项特征的人工智能，也就是特征序列 $q_1q_2\\ldots q_k$ 中最多只能有 $3$ 个位置为 $1$。请找出任一个合法且可以制造的人工智能特征序列；如果无法满足条件，请输出 `none` 。", "inputFormat": "> $n$ $k$ $t$   \n> $b_{1,1}b_{1,2}\\ldots b_{1,k}$   \n> $b_{2,1}b_{2,2}\\ldots b_{2,k}$   \n> $\\vdots$   \n> $b_{n,1}b_{n,2}\\ldots b_{n,k}$\n\n* $n$ 为受访者的数量。\n* $k$ 为特征序列的长度。\n* $t$ 为需要相同的特征数。\n* $b_{i,j}$ 为第 $i$ 位受访者是否符合第 $j$ 项特征。\n* 以上变量皆为整数。", "outputFormat": "如果存在合法且可以制造的人工智能特征序列 $q_1q_2\\ldots q_k$，请输出\n\n> $q_1q_2\\ldots q_k$\n\n其中 $q_j$ 为此人工智能是否符合第 $j$ 项特征。如果有多种合法的 $q_1q_2\\ldots q_k$，输出任意一个即可。否则请输出\n\n> $\\texttt{none}$", "hint": "### 测试数据限制\n\n* $1 \\le n \\le 100$。\n* $2 \\le t < k \\le 10$。\n* $b_{i, j}\\in \\{0,1\\}$。\n* $n, t$ 与 $k$ 皆为整数。\n\n### 评分说明\n\n本题共有三组子任务，条件限制如下所示。\n每一组可有一或多个测试数据，该组所有测试数据皆需答对才可获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $3$ | 输入满足 $n\\leq 5$，且每位受访者的特征序列均有超过 $3$ 个位置为 $1$ |\n| 2 | $5$ | 输入满足 $n\\leq 5$ |\n| 3 | $92$ | 无额外限制 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[NHSPC 2023] B. 人工智慧模擬", "background": "", "description": "在 2023 年的現在人工智慧非常地流行。為了獲得人工智慧學習的資料，我們希望產生一個人工智慧機器人來模擬人類。\n首先，我們邀請一些受訪者進行調查。在調查中，我們找來了 $n$ 位受訪者，並得到了每位受訪者的 $k$ 項特徵。第 $i$ 位受訪者的特徵可以用長度為 $k$ 的 01 字串 $b_{i,1}b_{i,2}\\ldots b_{i,k}$ 表示，稱之為第 $i$ 位受訪者的特徵序列。如果第 $i$ 位受訪者符合第 $j$ 特徵，則 $b_{i,j}=1$，反之為 $0$。\n\n我們做出來的人工智慧亦可以用特徵序列描述。為了讓作出來的人工智慧盡可能地接近人類，人工智慧的特徵序列 $q_1q_2\\ldots q_k$ 需要滿足以下規定：任意取人工智慧相異的 $t$ 項特徵，都能找出一位在這 $t$ 項特徵中完全相同的受訪者。更嚴謹地說，對任意下標序列 ${j_1,j_2,\\ldots,j_t}$，其中 $1 \\le j_1 < j_2 < \\ldots < j_t \\le k$，都能找到某位受訪者 $i$ ，滿足對任意 $l\\in\\{1,2,\\ldots,t\\}$，均有 $b_{i,j_l}=q_{j_l}$。並且由於倫理要求，人工智慧的特徵序列不可以與任何一個受訪者的特徵序列完全相同。\n\n現在經費十分有限，你只能製作出最多擁有 $3$ 項特徵的人工智慧，也就是特徵序列 $q_1q_2\\ldots q_k$ 中最多只能有 $3$ 個位置為 $1$。請找出任一個合法且可以製作的人工智慧特徵序列；如果無法滿足條件，請輸出 `none` 。", "inputFormat": "> $n$ $k$ $t$   \n> $b_{1,1}b_{1,2}\\ldots b_{1,k}$   \n> $b_{2,1}b_{2,2}\\ldots b_{2,k}$   \n> $\\vdots$   \n> $b_{n,1}b_{n,2}\\ldots b_{n,k}$\n\n* $n$ 為受訪者數量。\n* $k$ 為特徵序列長度。\n* $t$ 為需要相同的特徵數。\n* $b_{i,j}$ 為第 $i$ 位受訪者是否符合第 $j$ 項特徵。\n* 以上變數皆為整數。", "outputFormat": "如果存在合法且可以製作的人工智慧特徵序列 $q_1q_2\\ldots q_k$，請輸出\n\n> $q_1q_2\\ldots q_k$\n\n其中 $q_j$ 為此人工智慧是否符合第 $j$ 項特徵。如果有多種合法的 $q_1q_2\\ldots q_k$，輸出任一個即可。否則請輸出\n\n> $\\texttt{none}$", "hint": "### 測資限制\n\n* $1 \\le n \\le 100$。\n* $2 \\le t< k \\le 10$。\n* $b_{i, j}\\in \\{0,1\\}$。\n* $n, t$ 與 $k$ 皆為整數。\n\n### 評分說明\n\n本題共有三組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $3$ | 輸入滿足 $n\\leq 5$，且每位受訪者的特徵序列均有超過 $3$ 個位置為 $1$ |\n| 2 | $5$ | 輸入滿足 $n\\leq 5$ |\n| 3 | $92$ | 無額外限制 |\n", "locale": "zh-Hant"}}}
{"pid": "P11904", "type": "P", "difficulty": 6, "samples": [["5 5\n1 2\n2 3\n3 1\n2 4\n3 5\n1 5", "2"], ["5 6\n1 2\n2 3\n3 1\n4 2\n4 5\n5 4\n1 5", "-1"], ["8 11\n1 2\n2 1\n2 3\n3 4\n3 8\n4 1\n4 5\n5 6\n5 7\n6 7\n6 8\n1 8", "1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["动态规划 DP", "2023", "O2优化", "强连通分量", "台湾"], "title": "[NHSPC 2023] C. 與自動輔助駕駛暢遊世界", "background": "", "description": "知名汽車公司 EWM 在自家的汽車上加裝了最新的自動輔助駕駛 (auto co-pilot) 技術，讓汽車在駕駛人沒有給出明確指令的情況下，也能依據 AI 做出的決策前進。身為車主的小明，自然開始計畫使用這款具備自動輔助駕駛技術的汽車以暢遊世界。\n\n這個世界可以看作一張有向圖 (directed graph) $G$，其中 $G$ 上的點 $s$ 為小明目前的位置，點 $t$ 為小明欲到達的終點。為了兼顧行車安全，EWM 的汽車在 $G$ 上的行進期間，必須遵循有向邊 (directed edge) 的方向前進，不能逆向行駛；在此前提下，無論所在的位置為何，AI 都會從所有可以前進的方向中，均勻隨機地 (uniformly random) 選擇一個方向前進。舉例來說，若汽車目前在點 $a$，而點 $a$ 有三條向外的邊，分別連到點 $b, c, d$，此時 AI 輔助駕駛會從點 $b, c, d$ 中，以機率各為 $1/3$ 的方式選出一個前進。\n\n為了讓駕駛人能控制汽車往他/她希望的方向前進，EWM 公司提供了以下的機制：在 AI 做出決策前，駕駛人可以支付 $1$ 枚 EWM 公司發行的代幣，讓 AI 選擇駕駛人希望的方向。以上一個例子為例，若小明在點 $a$ 時不希望 AI 做隨機選擇，而是直接選擇某個點（例如點 $b$）前進，那麼他可以支付 $1$ 枚代幣，控制 AI 直接選擇走向點 $b$。請注意一次代幣支付僅限使用於一次選擇，亦即若汽車重新回到了同一個支付過代幣的點，AI 並不會直接往上一次支付代幣時指定的方向前進，而是會重新均勻隨機地做出選擇；如果駕駛人仍想指定汽車的前進方向，必須再次支付 $1$ 枚代幣。\n\n小明想要知道，他最少需要準備多少枚代幣，才能保證在抵達終點 $t$ 前的任何時刻都存在一條從他的所在地抵達終點 $t$ 的路徑。", "inputFormat": "> $n$ $m$   \n> $u_1$ $v_1$   \n> $u_2$ $v_2$   \n> $\\vdots$   \n> $u_m$ $v_m$   \n> $s$ $t$\n\n* $n$ 代表 $G$ 的節點數。\n* $m$ 代表 $G$ 的邊數。\n* $u_i, v_i$ 代表 $G$ 有一條邊從 $u_i$ 有向連接到 $v_i$。\n* $s$ 代表小明目前的位置。\n* $t$ 代表小明欲到達的終點。", "outputFormat": "如果小明有辦法在支付一些代幣後到達 $t$，請輸出\n\n> $\\textrm{ans}$\n\n其中 $\\textrm{ans}$ 代表最少需要支付的代幣數。否則，請輸出\n\n> $-1$", "hint": "### 測資限制\n\n* $1 \\le n \\le 3000$。\n* $1 \\le m \\le 30000$。\n* $1 \\le u_i \\le n$。\n* $1 \\le v_i \\le n$。\n* $1 \\le s \\le n$。\n* $1 \\le t \\le n$。\n* 對任意 $i, j \\in \\{1, 2, \\ldots, m\\}$，若 $i \\ne j$，則 $(u_i, v_i) \\ne (u_j, v_j)$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有四組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $4$ | $m = n-1$，且存在某個點 $r$ 滿足從 $r$ 出發可以到達 $G$ 上的其他點 |\n| 2 | $24$ | $G$ 不包含任何環 (cycle) |\n| 3 | $31$ | $n \\le 100, m \\le 1000$ |\n| 4 | $41$ | 無額外限制 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[NHSPC 2023] C. 与自动辅助驾驶畅游世界", "background": "", "description": "知名汽车公司 EWM 在自家的汽车上安装了最新的自动驾驶辅助 (auto co-pilot) 技术，让汽车在驾驶员没有给出明确指令的情况下，也能依据 AI 做出的决策前进。身为车主的小明，自然开始计划使用这款具备自动驾驶辅助技术的汽车以畅游世界。\n\n这个世界可以看作一张有向图 (directed graph) $G$，其中 $G$ 上的点 $s$ 为小明目前的位置，点 $t$ 为小明欲到达的终点。为了兼顾行车安全，EWM 的汽车在 $G$ 上的行进期间，必须遵循有向边 (directed edge) 的方向前进，不能逆向行驶；在此前提下，无论所在的位置为何，AI 都会从所有可以前进的方向中，均匀随机地 (uniformly random) 选择一个方向前进。举例来说，若汽车目前在点 $a$，而点 $a$ 有三条向外的边，分别连到点 $b, c, d$，此时 AI 辅助驾驶会从点 $b, c, d$ 中，以概率各为 $1/3$ 的方式选出一个前进。\n\n为了使驾驶员能控制汽车往他/她希望的方向前进，EWM 公司提供了以下的机制：在 AI 做出决策前，驾驶员可以支付 $1$ 枚 EWM 公司发行的代币，让 AI 选择驾驶员希望的方向。以上一个例子为例，若小明在点 $a$ 时不希望 AI 做随机选择，而是直接选择某个点（例如点 $b$）前进，那么他可以支付 $1$ 枚代币，控制 AI 直接选择走向点 $b$。请注意一次代币支付仅限使用于一次选择，亦即若汽车重新回到了同一个支付过代币的点，AI 并不会直接往上一次支付代币时指定的方向前进，而是会重新均匀随机地做出选择；如果驾驶员仍想指定汽车的前进方向，必须再次支付 $1$ 枚代币。\n\n小明想要知道，他最少需要准备多少枚代币，才能保证在抵达终点 $t$ 前的任何时刻都存在一条从他的所在地抵达终点 $t$ 的路径。", "inputFormat": "> $n$ $m$   \n> $u_1$ $v_1$   \n> $u_2$ $v_2$   \n> $\\vdots$   \n> $u_m$ $v_m$   \n> $s$ $t$\n\n* $n$ 代表 $G$ 的节点数。\n* $m$ 代表 $G$ 的边数。\n* $u_i, v_i$ 代表 $G$ 有一条边从 $u_i$ 有向连到 $v_i$。\n* $s$ 代表小明目前的位置。\n* $t$ 代表小明欲到达的终点。", "outputFormat": "如果小明有办法在支付一些代币后到达 $t$，请输出\n\n> $\\textrm{ans}$\n\n其中 $\\textrm{ans}$ 代表最少需要支付的代币数。否则，输出\n\n> $-1$", "hint": "### 测试数据限制\n\n* $1 \\le n \\le 3000$。\n* $1 \\le m \\le 30000$。\n* $1 \\le u_i \\le n$。\n* $1 \\le v_i \\le n$。\n* $1 \\le s \\le n$。\n* $1 \\le t \\le n$。\n* 对任意 $i, j \\in \\{1, 2, \\ldots, m\\}$，若 $i \\ne j$，则 $(u_i, v_i) \\ne (u_j, v_j)$。\n* 输入的数皆为整数。\n\n### 评分说明\n\n本题共有四组子任务，条件限制如下所示。\n每一组可有一或多个测试数据，该组所有测试数据皆需答对才可获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $4$ | $m = n-1$，且存在某个点 $r$ 满足从 $r$ 出发可以到达 $G$ 上的其他点 |\n| 2 | $24$ | $G$ 不包含任何环 (cycle) |\n| 3 | $31$ | $n \\le 100, m \\le 1000$ |\n| 4 | $41$ | 无额外限制 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[NHSPC 2023] C. 與自動輔助駕駛暢遊世界", "background": "", "description": "知名汽車公司 EWM 在自家的汽車上加裝了最新的自動輔助駕駛 (auto co-pilot) 技術，讓汽車在駕駛人沒有給出明確指令的情況下，也能依據 AI 做出的決策前進。身為車主的小明，自然開始計畫使用這款具備自動輔助駕駛技術的汽車以暢遊世界。\n\n這個世界可以看作一張有向圖 (directed graph) $G$，其中 $G$ 上的點 $s$ 為小明目前的位置，點 $t$ 為小明欲到達的終點。為了兼顧行車安全，EWM 的汽車在 $G$ 上的行進期間，必須遵循有向邊 (directed edge) 的方向前進，不能逆向行駛；在此前提下，無論所在的位置為何，AI 都會從所有可以前進的方向中，均勻隨機地 (uniformly random) 選擇一個方向前進。舉例來說，若汽車目前在點 $a$，而點 $a$ 有三條向外的邊，分別連到點 $b, c, d$，此時 AI 輔助駕駛會從點 $b, c, d$ 中，以機率各為 $1/3$ 的方式選出一個前進。\n\n為了讓駕駛人能控制汽車往他/她希望的方向前進，EWM 公司提供了以下的機制：在 AI 做出決策前，駕駛人可以支付 $1$ 枚 EWM 公司發行的代幣，讓 AI 選擇駕駛人希望的方向。以上一個例子為例，若小明在點 $a$ 時不希望 AI 做隨機選擇，而是直接選擇某個點（例如點 $b$）前進，那麼他可以支付 $1$ 枚代幣，控制 AI 直接選擇走向點 $b$。請注意一次代幣支付僅限使用於一次選擇，亦即若汽車重新回到了同一個支付過代幣的點，AI 並不會直接往上一次支付代幣時指定的方向前進，而是會重新均勻隨機地做出選擇；如果駕駛人仍想指定汽車的前進方向，必須再次支付 $1$ 枚代幣。\n\n小明想要知道，他最少需要準備多少枚代幣，才能保證在抵達終點 $t$ 前的任何時刻都存在一條從他的所在地抵達終點 $t$ 的路徑。", "inputFormat": "> $n$ $m$   \n> $u_1$ $v_1$   \n> $u_2$ $v_2$   \n> $\\vdots$   \n> $u_m$ $v_m$   \n> $s$ $t$\n\n* $n$ 代表 $G$ 的節點數。\n* $m$ 代表 $G$ 的邊數。\n* $u_i, v_i$ 代表 $G$ 有一條邊從 $u_i$ 有向連接到 $v_i$。\n* $s$ 代表小明目前的位置。\n* $t$ 代表小明欲到達的終點。", "outputFormat": "如果小明有辦法在支付一些代幣後到達 $t$，請輸出\n\n> $\\textrm{ans}$\n\n其中 $\\textrm{ans}$ 代表最少需要支付的代幣數。否則，請輸出\n\n> $-1$", "hint": "### 測資限制\n\n* $1 \\le n \\le 3000$。\n* $1 \\le m \\le 30000$。\n* $1 \\le u_i \\le n$。\n* $1 \\le v_i \\le n$。\n* $1 \\le s \\le n$。\n* $1 \\le t \\le n$。\n* 對任意 $i, j \\in \\{1, 2, \\ldots, m\\}$，若 $i \\ne j$，則 $(u_i, v_i) \\ne (u_j, v_j)$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有四組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $4$ | $m = n-1$，且存在某個點 $r$ 滿足從 $r$ 出發可以到達 $G$ 上的其他點 |\n| 2 | $24$ | $G$ 不包含任何環 (cycle) |\n| 3 | $31$ | $n \\le 100, m \\le 1000$ |\n| 4 | $41$ | 無額外限制 |", "locale": "zh-Hant"}}}
{"pid": "P11905", "type": "P", "difficulty": 7, "samples": [["6 5\n0 2\n1 1\n1 3\n2 3\n3 2\n4 2\n2 0\n2 1\n2 2\n3 1\n5 1", "1\n6"], ["4 4\n0 0\n1 1\n1 2\n2 0\n2 0\n1 2\n1 1\n0 0", "3\n1\n2\n4"], ["4 4\n0 1\n1 1\n1 2\n2 2\n0 1\n1 0\n1 1\n2 0", "0"]], "limits": {"time": [400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["计算几何", "2023", "O2优化", "台湾"], "title": "[NHSPC 2023] D. 共同子凸包", "background": "", "description": "在數學上，一個點集合 $S$ 的**凸包** (convex hull) 定義為包含 $S$ 的最小凸集合，記作 $\\operatorname{Conv}(S)$。在平面上，若 $S$ 為非空有限點集合，則 $\\operatorname{Conv}(S)$ 為一包含內部與邊界的最小凸多邊形，或其退化形式。另一方面，設 $E_1$ 與 $E_2$ 為平面上的兩個點集合。若存在某個二維向量 $\\mathbf{v}$，滿足\n$$P \\in E_1 \\iff P+\\mathbf{v} \\in E_2,$$\n則稱 $E_1$ 與 $E_2$ 經過平移後重合。\n\n現給定平面上的有限點集合 $S_1$ 與 $S_2$，並考慮它們的非空子集合 $T_1\\subseteq S_1$ 與 $T_2\\subseteq S_2$。已知子凸包 $\\operatorname{Conv}(T_1)$ 與子凸包 $\\operatorname{Conv}(T_2)$ 面積皆大於 $0$ 且經過平移後重合，請求出 $\\operatorname{Conv}(T_1)$ 所有可能的面積。\n\n以下展示兩個子凸包平移後重合的例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0272ygh4.png)", "inputFormat": "> $n$ $m$   \n> $x_1$ $y_1$   \n> $x_2$ $y_2$   \n> $\\vdots$   \n> $x_n$ $y_n$   \n> $\\xi_1$ $\\eta_1$   \n> $\\xi_2$ $\\eta_2$   \n> $\\vdots$   \n> $\\xi_m$ $\\eta_m$\n\n* $n$ 代表 $S_1$ 的集合大小。\n* $m$ 代表 $S_2$ 的集合大小。\n* $x_i, y_i$ 代表 $S_1$ 包含點 $(x_i, y_i)$。\n* $\\xi_i, \\eta_i$ 代表 $S_2$ 包含點 $(\\xi_i, \\eta_i)$。", "outputFormat": "> $k$   \n> $a_1$   \n> $a_2$   \n> $\\vdots$   \n> $a_k$\n\n* $k$ 代表若子凸包 $\\operatorname{Conv}(T_1)$ 與子凸包 $\\operatorname{Conv}(T_2)$ 經過平移後重合，$\\operatorname{Conv}(T_1)$ 所有可能的非 $0$ 面積數。\n* $a_i$ 為一整數，代表 $\\operatorname{Conv}(T_1)$ 所有可能的非 $0$ 面積中，第 $i$ 小的數的**兩倍**。", "hint": "### 測資限制\n\n* $3 \\le n \\le 40$。\n* $3 \\le m \\le 40$。\n* $0 \\le x_i \\le 20$。\n* $0 \\le y_i \\le 20$。\n* $0 \\le \\xi_i \\le 20$。\n* $0 \\le \\eta_i \\le 20$。\n* 對任意 $i, j \\in \\{1, 2, \\ldots, n\\}$，若 $i \\ne j$，則 $(x_i, y_i) \\ne (x_j, y_j)$。\n* 對任意 $i, j \\in \\{1, 2, \\ldots, m\\}$，若 $i \\ne j$，則 $(\\xi_i, \\eta_i) \\ne (\\xi_j, \\eta_j)$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有四組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $7$ | 所有可能的非 $0$ 面積必能從 $T_1$ 與 $T_2$ 中各選 $3$ 個點得到 |\n| 2 | $23$ | $n+m \\le 30$ |\n| 3 | $41$ | $S_1 = S_2$ |\n| 4 | $29$ | 無額外限制 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[NHSPC 2023] D. 共同子凸包", "background": "", "description": "在数学上，一个点集合 $S$ 的**凸包** (convex hull) 定义为包含 $S$ 的最小凸集合，记作 $\\operatorname{Conv}(S)$。在平面上，若 $S$ 为非空有限点集合，则 $\\operatorname{Conv}(S)$ 为一包含内部与边界的最小凸多边形，或其退化形式。另一方面，设 $E_1$ 与 $E_2$ 为平面上的两个点集合。若存在某个二维向量 $\\mathbf{v}$，满足\n$$P \\in E_1 \\iff P+\\mathbf{v} \\in E_2,$$\n则称 $E_1$ 与 $E_2$ 经过平移后重合。\n\n现给定平面上的有限点集合 $S_1$ 与 $S_2$，并考虑它们的非空子集合 $T_1\\subseteq S_1$ 与 $T_2\\subseteq S_2$。已知子凸包 $\\operatorname{Conv}(T_1)$ 与子凸包 $\\operatorname{Conv}(T_2)$ 面积皆大于 $0$ 且经过平移后重合，请求出 $\\operatorname{Conv}(T_1)$ 所有可能的面积。\n\n以下展示两个子凸包平移后重合的例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0272ygh4.png)", "inputFormat": "> $n$ $m$   \n> $x_1$ $y_1$   \n> $x_2$ $y_2$   \n> $\\vdots$   \n> $x_n$ $y_n$   \n> $\\xi_1$ $\\eta_1$   \n> $\\xi_2$ $\\eta_2$   \n> $\\vdots$   \n> $\\xi_m$ $\\eta_m$\n\n* $n$ 代表 $S_1$ 的集合大小。\n* $m$ 代表 $S_2$ 的集合大小。\n* $x_i, y_i$ 代表 $S_1$ 包含点 $(x_i, y_i)$。\n* $\\xi_i, \\eta_i$ 代表 $S_2$ 包含点 $(\\xi_i, \\eta_i)$。", "outputFormat": "> $k$   \n> $a_1$   \n> $a_2$   \n> $\\vdots$   \n> $a_k$\n\n* $k$ 代表若子凸包 $\\operatorname{Conv}(T_1)$ 与子凸包 $\\operatorname{Conv}(T_2)$ 经过平移后重合，$\\operatorname{Conv}(T_1)$ 所有可能的非 $0$ 面积数。\n* $a_i$ 为一整数，代表 $\\operatorname{Conv}(T_1)$ 所有可能的非 $0$ 面积中，第 $i$ 小的数的**两倍**。", "hint": "### 测试数据限制\n\n* $3 \\le n \\le 40$。\n* $3 \\le m \\le 40$。\n* $0 \\le x_i \\le 20$。\n* $0 \\le y_i \\le 20$。\n* $0 \\le \\xi_i \\le 20$。\n* $0 \\le \\eta_i \\le 20$。\n* 对任意 $i, j \\in \\{1, 2, \\ldots, n\\}$，若 $i \\ne j$，则 $(x_i, y_i) \\ne (x_j, y_j)$。\n* 对任意 $i, j \\in \\{1, 2, \\ldots, m\\}$，若 $i \\ne j$，则 $(\\xi_i, \\eta_i) \\ne (\\xi_j, \\eta_j)$。\n* 输入的数皆为整数。\n\n### 评分说明\n\n本题共有四组子任务，条件限制如下所示。\n每一组可有一或多个测试数据，该组所有测试数据皆需答对才可获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $7$ | 所有可能的非 $0$ 面积必能从 $T_1$ 与 $T_2$ 中各选 $3$ 个点得到 |\n| 2 | $23$ | $n+m \\le 30$ |\n| 3 | $41$ | $S_1 = S_2$ |\n| 4 | $29$ | 无额外限制 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[NHSPC 2023] D. 共同子凸包", "background": "", "description": "在數學上，一個點集合 $S$ 的**凸包** (convex hull) 定義為包含 $S$ 的最小凸集合，記作 $\\operatorname{Conv}(S)$。在平面上，若 $S$ 為非空有限點集合，則 $\\operatorname{Conv}(S)$ 為一包含內部與邊界的最小凸多邊形，或其退化形式。另一方面，設 $E_1$ 與 $E_2$ 為平面上的兩個點集合。若存在某個二維向量 $\\mathbf{v}$，滿足\n$$P \\in E_1 \\iff P+\\mathbf{v} \\in E_2,$$\n則稱 $E_1$ 與 $E_2$ 經過平移後重合。\n\n現給定平面上的有限點集合 $S_1$ 與 $S_2$，並考慮它們的非空子集合 $T_1\\subseteq S_1$ 與 $T_2\\subseteq S_2$。已知子凸包 $\\operatorname{Conv}(T_1)$ 與子凸包 $\\operatorname{Conv}(T_2)$ 面積皆大於 $0$ 且經過平移後重合，請求出 $\\operatorname{Conv}(T_1)$ 所有可能的面積。\n\n以下展示兩個子凸包平移後重合的例子。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0272ygh4.png)", "inputFormat": "> $n$ $m$   \n> $x_1$ $y_1$   \n> $x_2$ $y_2$   \n> $\\vdots$   \n> $x_n$ $y_n$   \n> $\\xi_1$ $\\eta_1$   \n> $\\xi_2$ $\\eta_2$   \n> $\\vdots$   \n> $\\xi_m$ $\\eta_m$\n\n* $n$ 代表 $S_1$ 的集合大小。\n* $m$ 代表 $S_2$ 的集合大小。\n* $x_i, y_i$ 代表 $S_1$ 包含點 $(x_i, y_i)$。\n* $\\xi_i, \\eta_i$ 代表 $S_2$ 包含點 $(\\xi_i, \\eta_i)$。", "outputFormat": "> $k$   \n> $a_1$   \n> $a_2$   \n> $\\vdots$   \n> $a_k$\n\n* $k$ 代表若子凸包 $\\operatorname{Conv}(T_1)$ 與子凸包 $\\operatorname{Conv}(T_2)$ 經過平移後重合，$\\operatorname{Conv}(T_1)$ 所有可能的非 $0$ 面積數。\n* $a_i$ 為一整數，代表 $\\operatorname{Conv}(T_1)$ 所有可能的非 $0$ 面積中，第 $i$ 小的數的**兩倍**。", "hint": "### 測資限制\n\n* $3 \\le n \\le 40$。\n* $3 \\le m \\le 40$。\n* $0 \\le x_i \\le 20$。\n* $0 \\le y_i \\le 20$。\n* $0 \\le \\xi_i \\le 20$。\n* $0 \\le \\eta_i \\le 20$。\n* 對任意 $i, j \\in \\{1, 2, \\ldots, n\\}$，若 $i \\ne j$，則 $(x_i, y_i) \\ne (x_j, y_j)$。\n* 對任意 $i, j \\in \\{1, 2, \\ldots, m\\}$，若 $i \\ne j$，則 $(\\xi_i, \\eta_i) \\ne (\\xi_j, \\eta_j)$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有四組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $7$ | 所有可能的非 $0$ 面積必能從 $T_1$ 與 $T_2$ 中各選 $3$ 個點得到 |\n| 2 | $23$ | $n+m \\le 30$ |\n| 3 | $41$ | $S_1 = S_2$ |\n| 4 | $29$ | 無額外限制 |", "locale": "zh-Hant"}}}
{"pid": "P11906", "type": "P", "difficulty": 5, "samples": [["10 7\nw w w w w w w\nw s s s s s w\nw s s s s s w\nw s w w w s w\nw s s s w s w\nw s b b w s w\nw w w w w s w\ns s s s s s w\ns s s s s s w\nw w w w w w w", "7"], ["5 3\ns w s\ns s s\nw b w\nw b w\ns w s", "5"], ["5 3\ns w s\nw s w\ns b s\nw b w\ns w s", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "广度优先搜索 BFS", "台湾"], "title": "[NHSPC 2023] E. 迷宮鑰匙圈", "background": "", "description": "小咪到夜市玩遊戲，贏得了一副鑰匙圈。這副鑰匙圈上有個迷宮面板，裡面有好幾顆小鋼珠：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dq75b0np.png)\n\n將鑰匙圈的面板向左或向右旋轉 $90$ 度，可以使每顆仍在迷宮內的小鋼珠向下掉落，直到該小鋼珠掉出迷宮，碰到迷宮擋板，或碰到其他仍在迷宮內的小鋼珠為止。更明確地說，這座迷宮可以用 $N\\times M$ 的二維矩陣表示，一次的 $90$ 度旋轉會將迷宮變換為 $M\\times N$ 的二維矩陣，其中\n\n* 一次 $90$ 度左旋轉會將位置 $(i, j)$ 變換成位置 $(M-j+1, i)$。\n* 一次 $90$ 度右旋轉會將位置 $(i, j)$ 變換成位置 $(j, N-i+1)$。\n\n此外，若旋轉後位置 $(i, j)$ 有一顆小鋼珠，則\n\n* 若存在某個 $i' > i$ 滿足 $(i', j)$ 為迷宮擋板，則\n   1. 設最小的 $i'$ 為 $i^*$。\n   1. 若 $(i, j), (i+1, j), \\ldots, (i^*-1, j)$ 間恰有 $k$ 顆小鋼珠，則原位置 $(i, j)$ 的小鋼珠會掉到位置 $(i^*-k, j)$。\n* 否則，該小鋼珠將掉出迷宮。\n\n給定迷宮與小鋼珠的起始位置，請算出至少需要向左或向右旋轉 $90$ 度幾次，才能使每顆小鋼珠都掉出迷宮。\n\n以下是一個迷宮大小為 $10\\times7$ 的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5rb8przv.png)", "inputFormat": "> $n$ $m$   \n> $s_{1, 1}$ $s_{1, 2}$ $\\ldots$ $s_{1, m}$   \n> $s_{2, 1}$ $s_{2, 2}$ $\\ldots$ $s_{2, m}$   \n> $\\vdots$   \n> $s_{n, 1}$ $s_{n, 2}$ $\\ldots$ $s_{n, m}$\n\n* $n$ 代表迷宮的列數。\n* $m$ 代表迷宮的行數。\n* $s_{i, j}$ 代表位置 $(i, j)$ 的狀態，以字元 ``b``、``s``、``w`` 表示，其中\n  1. ``b`` 代表該格為空且有小鋼珠。\n  1. ``s`` 代表該格為空且沒有小鋼珠。\n  1. ``w`` 代表該格為迷宮擋板。", "outputFormat": "如果存在使每顆小鋼珠都掉出迷宮的旋轉方式，請輸出\n\n> $\\textrm{ans}$\n\n其中 $\\textrm{ans}$ 為一整數，代表所需的旋轉次數。否則，請輸出\n\n> $-1$", "hint": "### 測資限制\n\n* $1 \\le n \\le 15$。\n* $1 \\le m \\le 15$。\n* 對任意 $i \\in \\{1, 2, \\ldots, n\\}$ 與 $j \\in \\{1, 2, \\ldots, m\\}$，$s_{i, j}$ 只能是 ``b``、``s``、或 ``w``。\n* 滿足 $s_{i, j}$ 為 ``b`` 的 $(i, j)$ 對數介於 $1$ 與 $3$ 之間。\n* 給定的迷宮保證不會有不穩定的狀態，亦即若 $s_{i, j}$ 為 ``b``，則必定存在某個 $i^* > i$ 滿足\n  1. $s_{i^*, j}$ 為 ``w``。\n  1. $s_{i, j}, s_{i+1, j}, \\ldots, s_{i^*-1, j}$ 均為 ``b``。\n* $n$ 與 $m$ 皆為整數。\n\n### 評分說明\n\n本題共有三組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $37$ | 迷宮裡的小鋼珠數量為 $1$ |\n| 2 | $29$ | 迷宮裡的小鋼珠數量不超過 $2$ |\n| 3 | $34$ | 無額外限制 |\n", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[NHSPC 2023] E. 迷宫钥匙圈", "background": "", "description": "小咪到夜市玩游戏，赢得了一副钥匙圈。这副钥匙圈上有个迷宫面板，里面有许多小钢珠：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dq75b0np.png)\n\n将钥匙圈的面板向左或向右旋转 $90$ 度，可以使每颗仍在迷宫内的小钢珠向下掉落，直到该小钢珠掉出迷宫，碰到迷宫挡板，或碰到其他仍在迷宫内的小钢珠为止。更明确地说，这座迷宫可以用 $N\\times M$ 的二维矩阵表示，一次的 $90$ 度旋转会将迷宫变换为 $M\\times N$ 的二维矩阵，其中\n\n* 一次 $90$ 度左旋转会将位置 $(i, j)$ 变换为位置 $(M-j+1, i)$。\n* 一次 $90$ 度右旋转会将位置 $(i, j)$ 变换为位置 $(j, N-i+1)$。\n\n此外，若旋转后位置 $(i, j)$ 有一颗小钢珠，则\n\n* 若存在某个 $i' > i$ 满足 $(i', j)$ 为迷宫挡板，则\n   1. 设最小的 $i'$ 为 $i^*$。\n   1. 若 $(i, j), (i+1, j), \\ldots, (i^*-1, j)$ 间恰好有 $k$ 颗小钢珠，则原位置 $(i, j)$ 的小钢珠会掉到位置 $(i^*-k, j)$。\n* 否则，该小钢珠将掉出迷宫。\n\n给定迷宫与小钢珠的初始位置，请算出至少需要向左或向右旋转 $90$ 度几次，才能使每颗小钢珠都掉出迷宫。\n\n以下是一个迷宫大小为 $10\\times7$ 的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5rb8przv.png)", "inputFormat": "> $n$ $m$   \n> $s_{1, 1}$ $s_{1, 2}$ $\\ldots$ $s_{1, m}$   \n> $s_{2, 1}$ $s_{2, 2}$ $\\ldots$ $s_{2, m}$   \n> $\\vdots$   \n> $s_{n, 1}$ $s_{n, 2}$ $\\ldots$ $s_{n, m}$\n\n* $n$ 代表迷宫的行数。\n* $m$ 代表迷宫的列数。\n* $s_{i, j}$ 代表位置 $(i, j)$ 的状态，以字符 ``b``、``s``、``w`` 表示，其中\n  1. ``b`` 代表该格为空且有小钢珠。\n  1. ``s`` 代表该格为空且没有小钢珠。\n  1. ``w`` 代表该格为迷宫挡板。", "outputFormat": "如果存在使每颗小钢珠都掉出迷宫的旋转方式，请输出\n\n> $\\textrm{ans}$\n\n其中 $\\textrm{ans}$ 为一个整数，代表所需的旋转次数。否则，输出\n\n> $-1$", "hint": "### 测试数据限制\n\n* $1 \\le n \\le 15$。\n* $1 \\le m \\le 15$。\n* 对任意 $i \\in \\{1, 2, \\ldots, n\\}$ 与 $j \\in \\{1, 2, \\ldots, m\\}$，$s_{i, j}$ 只能是 ``b``、``s``、或 ``w``。\n* 满足 $s_{i, j}$ 为 ``b`` 的 $(i, j)$ 对数介于 $1$ 与 $3$ 之间。\n* 给定的迷宫保证不会有不稳定的状况，即若 $s_{i, j}$ 为 ``b``，则必定存在某个 $i^* > i$ 满足\n  1. $s_{i^*, j}$ 为 ``w``。\n  1. $s_{i, j}, s_{i+1, j}, \\ldots, s_{i^*-1, j}$ 均为 ``b``。\n* $n$ 与 $m$ 皆为整数。\n\n### 评分说明\n\n本题共有三组子任务，条件限制如下所示。\n每一组可有一或多个测试数据，该组所有测试数据皆需答对才可获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $37$ | 迷宫里的小钢珠数量为 $1$ |\n| 2 | $29$ | 迷宫里的小钢珠数量不超过 $2$ |\n| 3 | $34$ | 无额外限制 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[NHSPC 2023] E. 迷宮鑰匙圈", "background": "", "description": "小咪到夜市玩遊戲，贏得了一副鑰匙圈。這副鑰匙圈上有個迷宮面板，裡面有好幾顆小鋼珠：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/dq75b0np.png)\n\n將鑰匙圈的面板向左或向右旋轉 $90$ 度，可以使每顆仍在迷宮內的小鋼珠向下掉落，直到該小鋼珠掉出迷宮，碰到迷宮擋板，或碰到其他仍在迷宮內的小鋼珠為止。更明確地說，這座迷宮可以用 $N\\times M$ 的二維矩陣表示，一次的 $90$ 度旋轉會將迷宮變換為 $M\\times N$ 的二維矩陣，其中\n\n* 一次 $90$ 度左旋轉會將位置 $(i, j)$ 變換成位置 $(M-j+1, i)$。\n* 一次 $90$ 度右旋轉會將位置 $(i, j)$ 變換成位置 $(j, N-i+1)$。\n\n此外，若旋轉後位置 $(i, j)$ 有一顆小鋼珠，則\n\n* 若存在某個 $i' > i$ 滿足 $(i', j)$ 為迷宮擋板，則\n   1. 設最小的 $i'$ 為 $i^*$。\n   1. 若 $(i, j), (i+1, j), \\ldots, (i^*-1, j)$ 間恰有 $k$ 顆小鋼珠，則原位置 $(i, j)$ 的小鋼珠會掉到位置 $(i^*-k, j)$。\n* 否則，該小鋼珠將掉出迷宮。\n\n給定迷宮與小鋼珠的起始位置，請算出至少需要向左或向右旋轉 $90$ 度幾次，才能使每顆小鋼珠都掉出迷宮。\n\n以下是一個迷宮大小為 $10\\times7$ 的例子：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5rb8przv.png)", "inputFormat": "> $n$ $m$   \n> $s_{1, 1}$ $s_{1, 2}$ $\\ldots$ $s_{1, m}$   \n> $s_{2, 1}$ $s_{2, 2}$ $\\ldots$ $s_{2, m}$   \n> $\\vdots$   \n> $s_{n, 1}$ $s_{n, 2}$ $\\ldots$ $s_{n, m}$\n\n* $n$ 代表迷宮的列數。\n* $m$ 代表迷宮的行數。\n* $s_{i, j}$ 代表位置 $(i, j)$ 的狀態，以字元 ``b``、``s``、``w`` 表示，其中\n  1. ``b`` 代表該格為空且有小鋼珠。\n  1. ``s`` 代表該格為空且沒有小鋼珠。\n  1. ``w`` 代表該格為迷宮擋板。", "outputFormat": "如果存在使每顆小鋼珠都掉出迷宮的旋轉方式，請輸出\n\n> $\\textrm{ans}$\n\n其中 $\\textrm{ans}$ 為一整數，代表所需的旋轉次數。否則，請輸出\n\n> $-1$", "hint": "### 測資限制\n\n* $1 \\le n \\le 15$。\n* $1 \\le m \\le 15$。\n* 對任意 $i \\in \\{1, 2, \\ldots, n\\}$ 與 $j \\in \\{1, 2, \\ldots, m\\}$，$s_{i, j}$ 只能是 ``b``、``s``、或 ``w``。\n* 滿足 $s_{i, j}$ 為 ``b`` 的 $(i, j)$ 對數介於 $1$ 與 $3$ 之間。\n* 給定的迷宮保證不會有不穩定的狀態，亦即若 $s_{i, j}$ 為 ``b``，則必定存在某個 $i^* > i$ 滿足\n  1. $s_{i^*, j}$ 為 ``w``。\n  1. $s_{i, j}, s_{i+1, j}, \\ldots, s_{i^*-1, j}$ 均為 ``b``。\n* $n$ 與 $m$ 皆為整數。\n\n### 評分說明\n\n本題共有三組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $37$ | 迷宮裡的小鋼珠數量為 $1$ |\n| 2 | $29$ | 迷宮裡的小鋼珠數量不超過 $2$ |\n| 3 | $34$ | 無額外限制 |\n", "locale": "zh-Hant"}}}
{"pid": "P11907", "type": "P", "difficulty": 5, "samples": [["3 3 3\n3\n1 1 1\n2 2 2\n3 3 3\n4\n1 3 3 3 1 1\n1 2 2 3 2 2\n1 2 3 1 2 3\n1 1 1 3 3 3", "2\n1\n2\n0"], ["1 1 3\n1\n1 1 2\n1\n1 1 1 1 1 3", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["倍增", "2023", "Kruskal 重构树", "O2优化", "台湾"], "title": "[NHSPC 2023] F. 恐怖的黑色魔物", "background": "", "description": "G 公司最近用黑科技在某個神秘的地方建立了新的研發總部。這座研發總部的形狀是個長方體，內部共有 $F$ 層樓，每一層樓均有形狀大小相同且由 $M$ 列 $N$ 行組成的矩形房間。一個房間的位置以三個正整數 $(p, q, r)$ 表示，代表該房間位於研發總部 $p$ 樓的第 $q$ 列第 $r$ 行。\n\nG 公司的員工均可以透過黑科技直接傳送至隔壁、樓下或樓上的房間。更明確地說，位於房間 $(p, q, r)$ 的 G 公司員工，\n\n1. 當 $p > 1$ 時，可傳送至房間 $(p-1, q, r)$。\n1. 當 $p < F$ 時，可傳送至房間 $(p+1, q, r)$。\n1. 當 $q > 1$ 時，可傳送至房間 $(p, q-1, r)$。\n1. 當 $q < M$ 時，可傳送至房間 $(p, q+1, r)$。\n1. 當 $r > 1$ 時，可傳送至房間 $(p, q, r-1)$。\n1. 當 $r < N$ 時，可傳送至房間 $(p, q, r+1)$。\n\nG 公司為了節省員工的用餐休息時間，在其中的 $R$ 個房間開設了餐廳，方便員工在研發總部內直接用餐。但餐廳的食物會滋生一種恐怖的黑色魔物，有一部分的 G 公司員工非常害怕這種恐怖的黑色魔物，因此不敢在這些餐廳用餐。\n\n你的上司 K 先生特別害怕這種恐怖的黑色魔物。他總認為這些恐怖的黑色魔物，也能透過黑科技，在研發總部裡自由穿梭。他定義了「黑色恐怖距離」：若一個房間至少須使用 $d$ 次黑科技傳送，才能抵達餐廳，則該房間的黑色恐怖距離就是 $d$。對 K 先生來說，黑色恐怖距離越小就越恐怖，因次他每次在研發總部內移動時，都會計算該如何使用黑科技，才能讓途中經過的房間，最小的黑色恐怖距離最大。作為 K 先生下屬的你，打算撰寫一個程式，幫助 K 先生快速算出在最不恐怖的路徑上，所經過的房間裡黑色恐怖距離的最小值。", "inputFormat": "> $F$ $M$ $N$   \n> $R$   \n> $p_1$ $q_1$ $r_1$   \n> $p_2$ $q_2$ $r_2$   \n> $\\vdots$   \n> $p_R$ $q_R$ $r_R$   \n> $Q$   \n> $a_1$ $b_1$ $c_1$ $x_1$ $y_1$ $z_1$   \n> $a_2$ $b_2$ $c_2$ $x_2$ $y_2$ $z_2$   \n> $\\vdots$   \n> $a_Q$ $b_Q$ $c_Q$ $x_Q$ $y_Q$ $z_Q$\n\n* $F$ 代表 G 公司研發總部的樓層數。\n* $M$ 代表 G 公司研發總部的列數。\n* $N$ 代表 G 公司研發總部的行數。\n* $R$ 代表 G 公司研發總部的餐廳數。\n* $(p_i, q_i, r_i)$ 代表 G 公司研發總部內第 $i$ 間餐廳的位置。\n* $Q$ 代表 K 先生計畫移動的次數。\n* $(a_i, b_i, c_i)$ 代表 K 先生計畫第 $i$ 次移動的起點。\n* $(x_i, y_i, z_i)$ 代表 K 先生計畫第 $i$ 次移動的終點。", "outputFormat": "> $d_1^*$   \n> $d_2^*$   \n> $\\vdots$   \n> $d_Q^*$\n\n* $d_i^*$ 代表 K 先生第 $i$ 次移動時，所有可能的路徑中，最小黑色恐怖距離的最大值。", "hint": "### 測資限制\n\n* $1 \\le F \\le 2\\times10^5$。\n* $1 \\le M \\le 2\\times10^5$。\n* $1 \\le N \\le 2\\times10^5$。\n* $1 \\le FMN \\le 2\\times10^5$。\n* $1 \\le R \\le FMN$。\n* $1 \\le p_i \\le F$。\n* $1 \\le q_i \\le M$。\n* $1 \\le r_i \\le N$。\n* $1 \\le Q \\le 2\\times10^5$。\n* $1 \\le a_i \\le F$。\n* $1 \\le b_i \\le M$。\n* $1 \\le c_i \\le N$。\n* $1 \\le x_i \\le F$。\n* $1 \\le y_i \\le M$。\n* $1 \\le z_i \\le N$。\n* 對任意 $i, j \\in \\{1, 2, \\ldots, R\\}$，若 $i \\ne j$，則 $(p_i, q_i, r_i) \\ne (p_j, q_j, r_j)$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有五組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $6$ | $F = R = 1, MN \\le 100, Q \\le 100$ |\n| 2 | $21$ | 對任意 $i \\in \\{1, 2, \\ldots, Q\\}$，均有 $(a_i, b_i, c_i) = (x_i, y_i, z_i)$ |\n| 3 | $4$ | $FMN \\le 3000$ |\n| 4 | $25$ | $Q = 1$ |\n| 5 | $44$ | 無額外限制 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[NHSPC 2023] F. 恐怖的黑色魔物", "background": "", "description": "G 公司最近用黑科技在某个神秘的地方建立了新的研发中心。这座研发中心的形状是长方体，内部共有 $F$ 层楼，每一层楼均有由 $M$ 列 $N$ 行组成的矩形房间。一个房间的位置用三个正整数 $(p, q, r)$ 表示，代表该房间位于研发中心 $p$ 楼的第 $q$ 列第 $r$ 行。\n\nG 公司的员工均可以通过黑科技直接传送到隔壁、楼下或楼上的房间。更明确地说，位于房间 $(p, q, r)$ 的 G 公司员工，\n\n1. 当 $p > 1$ 时，可以传送到房间 $(p-1, q, r)$。\n1. 当 $p < F$ 时，可以传送到房间 $(p+1, q, r)$。\n1. 当 $q > 1$ 时，可以传送到房间 $(p, q-1, r)$。\n1. 当 $q < M$ 时，可以传送到房间 $(p, q+1, r)$。\n1. 当 $r > 1$ 时，可以传送到房间 $(p, q, r-1)$。\n1. 当 $r < N$ 时，可以传送到房间 $(p, q, r+1)$。\n\nG 公司为了节省员工的用餐休息时间，在其中的 $R$ 个房间开设了餐厅，方便员工在研发中心内直接用餐。但餐厅的食物会滋生一种恐怖的黑色魔物，有一部分的 G 公司员工非常害怕这种恐怖的黑色魔物，因此不敢在这些餐厅用餐。\n\n你的上司 K 先生特别害怕这种恐怖的黑色魔物。他总认为这些恐怖的黑色魔物，也能通过黑科技，在研发中心里自由穿梭。他定义了「黑色恐怖距离」：若一个房间至少须使用 $d$ 次黑科技传送，才能抵达餐厅，则该房间的黑色恐怖距离就是 $d$。对 K 先生来说，黑色恐怖距离越小就越恐怖，因此他每次在研发中心内移动时，都会计算该如何使用黑科技，才能让途中经过的房间，最小的黑色恐怖距离最大。作为 K 先生下属的你，打算编写一个程序，帮助 K 先生快速算出在最不恐怖的路径上，所经过的房间里黑色恐怖距离的最小值。", "inputFormat": "> $F$ $M$ $N$   \n> $R$   \n> $p_1$ $q_1$ $r_1$   \n> $p_2$ $q_2$ $r_2$   \n> $\\vdots$   \n> $p_R$ $q_R$ $r_R$   \n> $Q$   \n> $a_1$ $b_1$ $c_1$ $x_1$ $y_1$ $z_1$   \n> $a_2$ $b_2$ $c_2$ $x_2$ $y_2$ $z_2$   \n> $\\vdots$   \n> $a_Q$ $b_Q$ $c_Q$ $x_Q$ $y_Q$ $z_Q$\n\n* $F$ 代表 G 公司研发中心的层数。\n* $M$ 代表 G 公司研发中心的列数。\n* $N$ 代表 G 公司研发中心的行数。\n* $R$ 代表 G 公司研发中心的餐厅数。\n* $(p_i, q_i, r_i)$ 代表 G 公司研发中心内第 $i$ 间餐厅的位置。\n* $Q$ 代表 K 先生计划移动的次数。\n* $(a_i, b_i, c_i)$ 代表 K 先生计划第 $i$ 次移动的起点。\n* $(x_i, y_i, z_i)$ 代表 K 先生计划第 $i$ 次移动的终点。", "outputFormat": "> $d_1^*$   \n> $d_2^*$   \n> $\\vdots$   \n> $d_Q^*$\n\n* $d_i^*$ 代表 K 先生第 $i$ 次移动时，所有可能的路径中，最小黑色恐怖距离的最大值。", "hint": "### 测试数据限制\n\n* $1 \\le F \\le 2\\times10^5$。\n* $1 \\le M \\le 2\\times10^5$。\n* $1 \\le N \\le 2\\times10^5$。\n* $1 \\le FMN \\le 2\\times10^5$。\n* $1 \\le R \\le FMN$。\n* $1 \\le p_i \\le F$。\n* $1 \\le q_i \\le M$。\n* $1 \\le r_i \\le N$。\n* $1 \\le Q \\le 2\\times10^5$。\n* $1 \\le a_i \\le F$。\n* $1 \\le b_i \\le M$。\n* $1 \\le c_i \\le N$。\n* $1 \\le x_i \\le F$。\n* $1 \\le y_i \\le M$。\n* $1 \\le z_i \\le N$。\n* 对任意 $i, j \\in \\{1, 2, \\ldots, R\\}$，若 $i \\ne j$，则 $(p_i, q_i, r_i) \\ne (p_j, q_j, r_j)$。\n* 输入的数皆为整数。\n\n### 评分说明\n\n本题共有五组子任务，条件限制如下所示。\n每一组可有一或多个测试数据，该组所有测试数据皆需答对才可获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $6$ | $F = R = 1, MN \\le 100, Q \\le 100$ |\n| 2 | $21$ | 对任意 $i \\in \\{1, 2, \\ldots, Q\\}$，均有 $(a_i, b_i, c_i) = (x_i, y_i, z_i)$ |\n| 3 | $4$ | $FMN \\le 3000$ |\n| 4 | $25$ | $Q = 1$ |\n| 5 | $44$ | 无额外限制 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[NHSPC 2023] F. 恐怖的黑色魔物", "background": "", "description": "G 公司最近用黑科技在某個神秘的地方建立了新的研發總部。這座研發總部的形狀是個長方體，內部共有 $F$ 層樓，每一層樓均有形狀大小相同且由 $M$ 列 $N$ 行組成的矩形房間。一個房間的位置以三個正整數 $(p, q, r)$ 表示，代表該房間位於研發總部 $p$ 樓的第 $q$ 列第 $r$ 行。\n\nG 公司的員工均可以透過黑科技直接傳送至隔壁、樓下或樓上的房間。更明確地說，位於房間 $(p, q, r)$ 的 G 公司員工，\n\n1. 當 $p > 1$ 時，可傳送至房間 $(p-1, q, r)$。\n1. 當 $p < F$ 時，可傳送至房間 $(p+1, q, r)$。\n1. 當 $q > 1$ 時，可傳送至房間 $(p, q-1, r)$。\n1. 當 $q < M$ 時，可傳送至房間 $(p, q+1, r)$。\n1. 當 $r > 1$ 時，可傳送至房間 $(p, q, r-1)$。\n1. 當 $r < N$ 時，可傳送至房間 $(p, q, r+1)$。\n\nG 公司為了節省員工的用餐休息時間，在其中的 $R$ 個房間開設了餐廳，方便員工在研發總部內直接用餐。但餐廳的食物會滋生一種恐怖的黑色魔物，有一部分的 G 公司員工非常害怕這種恐怖的黑色魔物，因此不敢在這些餐廳用餐。\n\n你的上司 K 先生特別害怕這種恐怖的黑色魔物。他總認為這些恐怖的黑色魔物，也能透過黑科技，在研發總部裡自由穿梭。他定義了「黑色恐怖距離」：若一個房間至少須使用 $d$ 次黑科技傳送，才能抵達餐廳，則該房間的黑色恐怖距離就是 $d$。對 K 先生來說，黑色恐怖距離越小就越恐怖，因次他每次在研發總部內移動時，都會計算該如何使用黑科技，才能讓途中經過的房間，最小的黑色恐怖距離最大。作為 K 先生下屬的你，打算撰寫一個程式，幫助 K 先生快速算出在最不恐怖的路徑上，所經過的房間裡黑色恐怖距離的最小值。", "inputFormat": "> $F$ $M$ $N$   \n> $R$   \n> $p_1$ $q_1$ $r_1$   \n> $p_2$ $q_2$ $r_2$   \n> $\\vdots$   \n> $p_R$ $q_R$ $r_R$   \n> $Q$   \n> $a_1$ $b_1$ $c_1$ $x_1$ $y_1$ $z_1$   \n> $a_2$ $b_2$ $c_2$ $x_2$ $y_2$ $z_2$   \n> $\\vdots$   \n> $a_Q$ $b_Q$ $c_Q$ $x_Q$ $y_Q$ $z_Q$\n\n* $F$ 代表 G 公司研發總部的樓層數。\n* $M$ 代表 G 公司研發總部的列數。\n* $N$ 代表 G 公司研發總部的行數。\n* $R$ 代表 G 公司研發總部的餐廳數。\n* $(p_i, q_i, r_i)$ 代表 G 公司研發總部內第 $i$ 間餐廳的位置。\n* $Q$ 代表 K 先生計畫移動的次數。\n* $(a_i, b_i, c_i)$ 代表 K 先生計畫第 $i$ 次移動的起點。\n* $(x_i, y_i, z_i)$ 代表 K 先生計畫第 $i$ 次移動的終點。", "outputFormat": "> $d_1^*$   \n> $d_2^*$   \n> $\\vdots$   \n> $d_Q^*$\n\n* $d_i^*$ 代表 K 先生第 $i$ 次移動時，所有可能的路徑中，最小黑色恐怖距離的最大值。", "hint": "### 測資限制\n\n* $1 \\le F \\le 2\\times10^5$。\n* $1 \\le M \\le 2\\times10^5$。\n* $1 \\le N \\le 2\\times10^5$。\n* $1 \\le FMN \\le 2\\times10^5$。\n* $1 \\le R \\le FMN$。\n* $1 \\le p_i \\le F$。\n* $1 \\le q_i \\le M$。\n* $1 \\le r_i \\le N$。\n* $1 \\le Q \\le 2\\times10^5$。\n* $1 \\le a_i \\le F$。\n* $1 \\le b_i \\le M$。\n* $1 \\le c_i \\le N$。\n* $1 \\le x_i \\le F$。\n* $1 \\le y_i \\le M$。\n* $1 \\le z_i \\le N$。\n* 對任意 $i, j \\in \\{1, 2, \\ldots, R\\}$，若 $i \\ne j$，則 $(p_i, q_i, r_i) \\ne (p_j, q_j, r_j)$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有五組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $6$ | $F = R = 1, MN \\le 100, Q \\le 100$ |\n| 2 | $21$ | 對任意 $i \\in \\{1, 2, \\ldots, Q\\}$，均有 $(a_i, b_i, c_i) = (x_i, y_i, z_i)$ |\n| 3 | $4$ | $FMN \\le 3000$ |\n| 4 | $25$ | $Q = 1$ |\n| 5 | $44$ | 無額外限制 |", "locale": "zh-Hant"}}}
{"pid": "P11908", "type": "P", "difficulty": 2, "samples": [["5 3\n1 2 3 4 5", "6"], ["6 2\n2 3 2 3 2 3", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2023", "O2优化", "排序", "台湾"], "title": "[NHSPC 2023] G. 博物館", "background": "", "description": "在 H 國有一座博物館，陳列了 $n$ 件作品在一條直線的走廊上。從門口開始，由左至右，放置於第 $i$ 個位置的作品價值為 $c_i$。\n\n今日有重要的貴賓要蒞臨博物館，但是因為行程緊湊，貴賓只能觀賞最接近門口，也就是最左邊的 $k$ 件作品。為了提升博物館的形象，博物館館長打算把一些貴重的作品移至前方。亦即把價值最高的前 $k$ 件作品移至最左邊的 $k$ 個位置。\n\n因為博物館中的作品都非常地珍貴，每一次搬動，都只能交換相鄰的兩件作品，並且為了最小化損壞作品的風險，館長要求要用最少次數的搬動來完成。\n\n給定當前每件作品的價值，請輸出最少的搬動次數以完成館長的要求。", "inputFormat": "> $n$ $k$   \n> $c_1$ $c_2$ $\\dots$ $c_n$\n\n* $n$ 表示作品的數量。\n* $k$ 表示貴賓欣賞的作品數量。\n* $c_i$ 表示當前放置於第 $i$ 個位置的作品價值。", "outputFormat": "> $m$\n\n* $m$ 為滿足館長要求的最少搬動次數。", "hint": "### 測資限制\n\n* $1 \\le k \\le n \\le 10^5$。\n* $1 \\le c_i\\le 10^{9}$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有三組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $3$ | $n \\le 500$ 且 $c_1, c_2, \\ldots, c_n$ 兩兩相異 |\n| 2 | $19$ | $c_1, c_2, \\ldots, c_n$ 兩兩相異 |\n| 3 | $78$ | 無額外限制 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[NHSPC 2023] G. 博物馆", "background": null, "description": "在 H 国有一座博物馆，陈列了 $n$ 件作品在一条直线的走廊上。从门口开始，由左至右，放置于第 $i$ 个位置的作品价值为 $c_i$。\n\n今日有重要的贵宾要莅临博物馆，但是因为行程紧凑，贵宾只能观赏最接近门口，也就是最左边的 $k$ 件作品。为了提升博物馆的形象，博物馆馆长打算把一些珍贵的作品移至前方。亦即把价值最高的前 $k$ 件作品移至最左边的 $k$ 个位置。\n\n因为博物馆中的作品都非常珍贵，每一次搬动，都只能交换相邻的两件作品，并且为了最小化损坏作品的风险，馆长要求要用最少次数的搬动来完成。\n\n给定当前每件作品的价值，请输出最少的搬动次数以完成馆长的要求。", "inputFormat": "> $n$ $k$   \n> $c_1$ $c_2$ $\\dots$ $c_n$\n\n* $n$ 表示作品的数量。\n* $k$ 表示贵宾欣赏的作品数量。\n* $c_i$ 表示当前放置于第 $i$ 个位置的作品价值。", "outputFormat": "> $m$\n\n* $m$ 为满足馆长要求的最少搬动次数。", "hint": "### 测试数据限制\n\n* $1 \\le k \\le n \\le 10^5$。\n* $1 \\le c_i \\le 10^9$。\n* 输入的数皆为整数。\n\n### 评分说明\n\n本题共有三组子任务，条件限制如下所示。\n每一组可有一或多个测试数据，该组所有测试数据皆需答对才可获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $3$ | $n \\le 500$ 且 $c_1, c_2, \\ldots, c_n$ 两两相异 |\n| 2 | $19$ | $c_1, c_2, \\ldots, c_n$ 两两相异 |\n| 3 | $78$ | 无额外限制 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[NHSPC 2023] G. 博物館", "background": "", "description": "在 H 國有一座博物館，陳列了 $n$ 件作品在一條直線的走廊上。從門口開始，由左至右，放置於第 $i$ 個位置的作品價值為 $c_i$。\n\n今日有重要的貴賓要蒞臨博物館，但是因為行程緊湊，貴賓只能觀賞最接近門口，也就是最左邊的 $k$ 件作品。為了提升博物館的形象，博物館館長打算把一些貴重的作品移至前方。亦即把價值最高的前 $k$ 件作品移至最左邊的 $k$ 個位置。\n\n因為博物館中的作品都非常地珍貴，每一次搬動，都只能交換相鄰的兩件作品，並且為了最小化損壞作品的風險，館長要求要用最少次數的搬動來完成。\n\n給定當前每件作品的價值，請輸出最少的搬動次數以完成館長的要求。", "inputFormat": "> $n$ $k$   \n> $c_1$ $c_2$ $\\dots$ $c_n$\n\n* $n$ 表示作品的數量。\n* $k$ 表示貴賓欣賞的作品數量。\n* $c_i$ 表示當前放置於第 $i$ 個位置的作品價值。", "outputFormat": "> $m$\n\n* $m$ 為滿足館長要求的最少搬動次數。", "hint": "### 測資限制\n\n* $1 \\le k \\le n \\le 10^5$。\n* $1 \\le c_i\\le 10^{9}$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有三組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $3$ | $n \\le 500$ 且 $c_1, c_2, \\ldots, c_n$ 兩兩相異 |\n| 2 | $19$ | $c_1, c_2, \\ldots, c_n$ 兩兩相異 |\n| 3 | $78$ | 無額外限制 |", "locale": "zh-Hant"}}}
{"pid": "P11909", "type": "P", "difficulty": 3, "samples": [["2\n3\n6", "2\n8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "2023", "O2优化", "台湾"], "title": "[NHSPC 2023] H. 整數的迴文分解法", "background": "", "description": "H 教授是一位密碼學專家，他現在正在研究如何對一個正整數做特殊分解，因而發明了正整數的迴文分解法，其分解方法如下：對於一個正整數 $n$，把 $n$ 分解成 $k$ 個正整數 $x_1, x_2, \\ldots, x_k$ 的和，滿足 $n = x_1 + x_2 + \\ldots + x_k$，且 $x_1, x_2, \\ldots, x_k$ 由左讀到右和由右讀到左相同。\n\n當兩種分解法分解出來的正整數數量不同，或是出現的次序不同時，則視為不同的分解法。更嚴謹地說，設 $n = a_1 + a_2 + \\ldots + a_k = b_1 + b_2 + \\ldots + b_l$ 為兩種迴文分解法。若 $k \\ne l$，或者 $k = l$ 但存在 $i \\in \\{1, 2, \\ldots, k\\}$ 使得 $a_i \\ne b_i$，則視為不同的分解法。例如正整數 $6$ 有 $8$ 種迴文分解法，分別是\n\n1. $6$；\n2. $2 + 2 + 2$；\n3. $3 + 3$；\n4. $2 + 1 + 1 + 2$；\n5. $1 + 4 + 1$；\n6. $1 + 1 + 2 + 1 + 1$；\n7. $1 + 2 + 2 + 1$；\n8. $1 + 1 + 1 + 1 + 1 + 1$。\n\n給定一個正整數 $n$，請寫一支電腦程式去計算 $n$ 有多少種不同的迴文分解法。因為這個數字可能很大，你只要求出方法數除以 $10^9 + 7$ 的餘數就行了。", "inputFormat": "> $t$   \n> $n_1$   \n> $n_2$   \n> $\\vdots$   \n> $n_t$\n\n* $t$ 代表你的電腦程式需要處理的正整數 $n$ 的個數。\n* $n_i$ 代表第 $i$ 筆詢問的正整數 $n$。", "outputFormat": "> $\\textrm{ans}_1$   \n> $\\textrm{ans}_2$   \n> $\\vdots$   \n> $\\textrm{ans}_t$\n\n* $\\textrm{ans}_i$ 代表 $n_i$ 的迴文分解方法數除以 $10^9 + 7$ 的餘數。", "hint": "### 測資限制\n\n* $1 \\le t \\le 10^4$。\n* $1 \\le n_i \\le 10^{15}$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有四組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $10$ | 輸入的 $n_i$ 兩兩相異，且 $n_i \\le 30$ |\n| 2 | $30$ | $n_i \\le 1000$ |\n| 3 | $10$ | $n_i \\le 10^6$ |\n| 4 | $50$ | 無額外限制 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[NHSPC 2023] H. 整数的回文分解法", "background": "", "description": "H 教授是一位密码学专家，他现在正在研究如何对一个正整数做特殊分解，因而发明了正整数的回文分解法，其分解方法如下：对于一个正整数 $n$，把 $n$ 分解成 $k$ 个正整数 $x_1, x_2, \\ldots, x_k$ 的和，满足 $n = x_1 + x_2 + \\ldots + x_k$，且 $x_1, x_2, \\ldots, x_k$ 由左读到右和由右读到左相同。\n\n当两种分解法分解出来的正整数数量不同，或者出现的次序不同时，则视为不同的分解法。更严谨地说，设 $n = a_1 + a_2 + \\ldots + a_k = b_1 + b_2 + \\ldots + b_l$ 为两种回文分解法。若 $k \\ne l$，或者 $k = l$ 但存在 $i \\in \\{1, 2, \\ldots, k\\}$ 使得 $a_i \\ne b_i$，则视为不同的分解法。例如正整数 $6$ 有 $8$ 种回文分解法，分别是\n\n1. $6$；\n2. $2 + 2 + 2$；\n3. $3 + 3$；\n4. $2 + 1 + 1 + 2$；\n5. $1 + 4 + 1$；\n6. $1 + 1 + 2 + 1 + 1$；\n7. $1 + 2 + 2 + 1$；\n8. $1 + 1 + 1 + 1 + 1 + 1$。\n\n给定一个正整数 $n$，请写一个计算机程序去计算 $n$ 有多少种不同的回文分解法。因为这个数字可能很大，你只要求出方法数除以 $10^9 + 7$ 的余数就行了。", "inputFormat": "> $t$   \n> $n_1$   \n> $n_2$   \n> $\\vdots$   \n> $n_t$\n\n* $t$ 代表你的计算机程序需要处理的正整数 $n$ 的个数。\n* $n_i$ 代表第 $i$ 笔询问的正整数 $n$。", "outputFormat": "> $\\textrm{ans}_1$   \n> $\\textrm{ans}_2$   \n> $\\vdots$   \n> $\\textrm{ans}_t$\n\n* $\\textrm{ans}_i$ 代表 $n_i$ 的回文分解方法数除以 $10^9 + 7$ 的余数。", "hint": "### 测试数据限制\n\n* $1 \\le t \\le 10^4$。\n* $1 \\le n_i \\le 10^{15}$。\n* 输入的数皆为整数。\n\n### 评分说明\n\n本题共有四组子任务，条件限制如下所示。\n每一组可有一或多个测试数据，该组所有测试数据皆需答对才可获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $10$ | 输入的 $n_i$ 两两相异，且 $n_i \\le 30$ |\n| 2 | $30$ | $n_i \\le 1000$ |\n| 3 | $10$ | $n_i \\le 10^6$ |\n| 4 | $50$ | 无额外限制 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[NHSPC 2023] H. 整數的迴文分解法", "background": "", "description": "H 教授是一位密碼學專家，他現在正在研究如何對一個正整數做特殊分解，因而發明了正整數的迴文分解法，其分解方法如下：對於一個正整數 $n$，把 $n$ 分解成 $k$ 個正整數 $x_1, x_2, \\ldots, x_k$ 的和，滿足 $n = x_1 + x_2 + \\ldots + x_k$，且 $x_1, x_2, \\ldots, x_k$ 由左讀到右和由右讀到左相同。\n\n當兩種分解法分解出來的正整數數量不同，或是出現的次序不同時，則視為不同的分解法。更嚴謹地說，設 $n = a_1 + a_2 + \\ldots + a_k = b_1 + b_2 + \\ldots + b_l$ 為兩種迴文分解法。若 $k \\ne l$，或者 $k = l$ 但存在 $i \\in \\{1, 2, \\ldots, k\\}$ 使得 $a_i \\ne b_i$，則視為不同的分解法。例如正整數 $6$ 有 $8$ 種迴文分解法，分別是\n\n1. $6$；\n2. $2 + 2 + 2$；\n3. $3 + 3$；\n4. $2 + 1 + 1 + 2$；\n5. $1 + 4 + 1$；\n6. $1 + 1 + 2 + 1 + 1$；\n7. $1 + 2 + 2 + 1$；\n8. $1 + 1 + 1 + 1 + 1 + 1$。\n\n給定一個正整數 $n$，請寫一支電腦程式去計算 $n$ 有多少種不同的迴文分解法。因為這個數字可能很大，你只要求出方法數除以 $10^9 + 7$ 的餘數就行了。", "inputFormat": "> $t$   \n> $n_1$   \n> $n_2$   \n> $\\vdots$   \n> $n_t$\n\n* $t$ 代表你的電腦程式需要處理的正整數 $n$ 的個數。\n* $n_i$ 代表第 $i$ 筆詢問的正整數 $n$。", "outputFormat": "> $\\textrm{ans}_1$   \n> $\\textrm{ans}_2$   \n> $\\vdots$   \n> $\\textrm{ans}_t$\n\n* $\\textrm{ans}_i$ 代表 $n_i$ 的迴文分解方法數除以 $10^9 + 7$ 的餘數。", "hint": "### 測資限制\n\n* $1 \\le t \\le 10^4$。\n* $1 \\le n_i \\le 10^{15}$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有四組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $10$ | 輸入的 $n_i$ 兩兩相異，且 $n_i \\le 30$ |\n| 2 | $30$ | $n_i \\le 1000$ |\n| 3 | $10$ | $n_i \\le 10^6$ |\n| 4 | $50$ | 無額外限制 |", "locale": "zh-Hant"}}}
{"pid": "P11910", "type": "P", "difficulty": 5, "samples": [["5 6\n3 1 5 3 4\n0 2 3 4 0", "4"], ["7 10\n6 7 9 4 8 5 5\n3 7 6 9 9 1 5", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "2023", "O2优化", "台湾"], "title": "[NHSPC 2023] I. 對戰機器馬", "background": "", "description": "這天，小齊與小田各派出 $n$ 隻機器馬進行 $n$ 回一對一的對戰，雙方的出賽順序均已排定且不得再更改。已知對於 $1\\le i \\le n$，小齊第 $i$ 場出賽的機器馬原始戰力是 $a_i$，小田第 $i$ 場的機器馬原始戰力則是 $b_i$，且 $0\\le a_i, b_i< P$，其中 $P$ 是一個給定的正整數。每一場對戰時，戰力高者獲勝。\n\n小田為了贏取更多的勝利，研發出了能調整這些機器馬戰力的燃料，每一種燃料有一個魔力值 $m$，當原始戰力 $b_i$ 的機器馬使用了魔力值 $m$ 的燃料，戰力就會變成 $(b_i + m) \\% P$，這裡 $\\%$ 表示取餘數的運算。對小田來說，如果每一隻機器馬都可以挑選不同魔力值的燃料，當然就太好了，但是由於某些限制，小田只能生產出最多兩種燃料，且每一隻機器馬都必須使用恰一種燃料才可以。換句話說，小田可以選擇兩個非負整數 $s$ 與 $t$，若 $(b_i + s) \\% P > a_i$ 或 $(b_i + t) \\% P > a_i$，則小田可以贏得第 $i$ 場比賽的勝利。小田希望能挑選出兩種魔力值，以獲得最多的勝利。請計算並輸出小田的最大勝利場次數。請注意，小田的每一隻機器馬必須使用所生產的兩種燃料之一，即使原先戰力已經勝過對方的機器馬也必須挑選其中之一使用。\n\n舉例來說，假設 $P=10$，小齊與小田的原始戰力如下表。若小田選擇生產魔力值 $s=1$ 與 $t=6$ 的兩種燃料，那麼他可以戰勝 $5$ 場比賽。另，小田沒有戰勝 $6$ 場以上比賽的可能，因此所求答案是 $5$。\n\n$$\\begin{array}{|l|l|l|l|l|l|l|l|}\n\\hline\n\\text{小齊戰力 } a_i & 6 & 7 & 9 & 4 & 8 & 5 & 5 \\\\\n\\hline\n\\text{小田戰力 } b_i & 3 & 7 & 6 & 9 & 9 & 1 & 5 \\\\\n\\hline\ns=1 \\text{ 與 } t=6 & 3 + 6 > 6 & 7 + 1 > 7 & & (9 + 6) \\% 10 > 4 & & 1 + 6 > 5 & 5 + 1 > 5 \\\\\n\\hline\n\\end{array}$$", "inputFormat": "> $n$ $P$   \n> $a_1$ $a_2$ $\\ldots$ $a_n$   \n> $b_1$ $b_2$ $\\ldots$ $b_n$\n\n* $n$ 代表比賽的回合數，同時也是小齊和小田各自派出的機器馬數量。\n* $P$ 代表計算戰力用的參數。\n* $a_i$ 代表小齊第 $i$ 場出賽的機器馬原始戰力。\n* $b_i$ 代表小田第 $i$ 場出賽的機器馬原始戰力。", "outputFormat": "> $\\textrm{ans}$\n\n* $\\textrm{ans}$ 代表小田的最大勝利場次數。", "hint": "### 測資限制\n\n* $1 \\le n \\le 2\\times 10^5$。\n* $1 \\le P \\le 10^9$。\n* $0 \\le a_i < P$。\n* $0 \\le b_i < P$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有五組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $5$ | $n \\le 100, P \\le 100$ |\n| 2 | $7$ | $n \\le 100, P \\le 10000$ |\n| 3 | $17$ | $n \\le 5000$ |\n| 4 | $40$ | 對於所有 $i$，$b_i \\le a_i$ |\n| 5 | $31$ | 無額外限制 |", "locale": "zh-Hant", "translations": {"zh-CN": {"title": "[NHSPC 2023] I. 对战机器马", "background": "", "description": "这天，小齐与小田各自派出 $n$ 匹机器马进行 $n$ 回一对一的对战，双方的出赛顺序均已排定且不得再更改。已知对于 $1 \\le i \\le n$，小齐第 $i$ 场出赛的机器马原始战力是 $a_i$，小田第 $i$ 场的机器马原始战力则是 $b_i$，且 $0 \\le a_i, b_i < P$，其中 $P$ 是一个给定的正整数。每一场对战时，战力高者获胜。\n\n小田为了赢得更多的胜利，研发出了能调整这些机器马战力的燃料，每一种燃料有一个魔力值 $m$，当原始战力 $b_i$ 的机器马使用了魔力值 $m$ 的燃料，战力就会变成 $(b_i + m) \\% P$，这里 $\\%$ 表示取余数的运算。对小田来说，如果每一匹机器马都可以挑选不同魔力值的燃料，当然就太好了，但是由于某些限制，小田只能生产出最多两种燃料，且每一匹机器马都必须使用恰一种燃料才可以。换句话说，小田可以选择两个非负整数 $s$ 与 $t$，若 $(b_i + s) \\% P > a_i$ 或 $(b_i + t) \\% P > a_i$，则小田可以赢得第 $i$ 场比赛的胜利。小田希望能挑选出两种魔力值，以获得最多的胜利。请计算并输出小田的最大胜利场次数。请注意，小田的每一匹机器马必须使用所生产的两种燃料之一，即使原先战力已经胜过对方的机器马也必须挑选其中之一使用。\n\n举例来说，假设 $P=10$，小齐与小田的原始战力如下表。若小田选择生产魔力值 $s=1$ 与 $t=6$ 的两种燃料，那么他可以战胜 $5$ 场比赛。另，小田没有战胜 $6$ 场以上比赛的可能，因此所求答案是 $5$。\n\n$$\\begin{array}{|l|l|l|l|l|l|l|l|}\n\\hline\n\\text{小齐战力 } a_i & 6 & 7 & 9 & 4 & 8 & 5 & 5 \\\\\n\\hline\n\\text{小田战力 } b_i & 3 & 7 & 6 & 9 & 9 & 1 & 5 \\\\\n\\hline\ns=1 \\text{ 与 } t=6 & 3 + 6 > 6 & 7 + 1 > 7 & & (9 + 6) \\% 10 > 4 & & 1 + 6 > 5 & 5 + 1 > 5 \\\\\n\\hline\n\\end{array}$$", "inputFormat": "> $n$ $P$   \n> $a_1$ $a_2$ $\\ldots$ $a_n$   \n> $b_1$ $b_2$ $\\ldots$ $b_n$\n\n* $n$ 代表比赛的回合数，同时也是小齐和小田各自派出的机器马数量。\n* $P$ 代表计算战力用的参数。\n* $a_i$ 代表小齐第 $i$ 场出赛的机器马原始战力。\n* $b_i$ 代表小田第 $i$ 场出赛的机器马原始战力。", "outputFormat": "> $\\textrm{ans}$\n\n* $\\textrm{ans}$ 代表小田的最大胜利场次数。", "hint": "### 测试数据限制\n\n* $1 \\le n \\le 2 \\times 10^5$。\n* $1 \\le P \\le 10^9$。\n* $0 \\le a_i < P$。\n* $0 \\le b_i < P$。\n* 输入的数皆为整数。\n\n### 评分说明\n\n本题共有五组子任务，条件限制如下所示。\n每一组可有一或多个测试数据，该组所有测试数据皆需答对才可获得该组分数。\n\n|  子任务  |  分数  | 额外输入限制 |\n| :------: | :----: | ------------ |\n| 1 | $5$ | $n \\le 100, P \\le 100$ |\n| 2 | $7$ | $n \\le 100, P \\le 10000$ |\n| 3 | $17$ | $n \\le 5000$ |\n| 4 | $40$ | 对于所有 $i$，$b_i \\le a_i$ |\n| 5 | $31$ | 无额外限制 |", "locale": "zh-CN"}, "zh-Hant": {"title": "[NHSPC 2023] I. 對戰機器馬", "background": "", "description": "這天，小齊與小田各派出 $n$ 隻機器馬進行 $n$ 回一對一的對戰，雙方的出賽順序均已排定且不得再更改。已知對於 $1\\le i \\le n$，小齊第 $i$ 場出賽的機器馬原始戰力是 $a_i$，小田第 $i$ 場的機器馬原始戰力則是 $b_i$，且 $0\\le a_i, b_i< P$，其中 $P$ 是一個給定的正整數。每一場對戰時，戰力高者獲勝。\n\n小田為了贏取更多的勝利，研發出了能調整這些機器馬戰力的燃料，每一種燃料有一個魔力值 $m$，當原始戰力 $b_i$ 的機器馬使用了魔力值 $m$ 的燃料，戰力就會變成 $(b_i + m) \\% P$，這裡 $\\%$ 表示取餘數的運算。對小田來說，如果每一隻機器馬都可以挑選不同魔力值的燃料，當然就太好了，但是由於某些限制，小田只能生產出最多兩種燃料，且每一隻機器馬都必須使用恰一種燃料才可以。換句話說，小田可以選擇兩個非負整數 $s$ 與 $t$，若 $(b_i + s) \\% P > a_i$ 或 $(b_i + t) \\% P > a_i$，則小田可以贏得第 $i$ 場比賽的勝利。小田希望能挑選出兩種魔力值，以獲得最多的勝利。請計算並輸出小田的最大勝利場次數。請注意，小田的每一隻機器馬必須使用所生產的兩種燃料之一，即使原先戰力已經勝過對方的機器馬也必須挑選其中之一使用。\n\n舉例來說，假設 $P=10$，小齊與小田的原始戰力如下表。若小田選擇生產魔力值 $s=1$ 與 $t=6$ 的兩種燃料，那麼他可以戰勝 $5$ 場比賽。另，小田沒有戰勝 $6$ 場以上比賽的可能，因此所求答案是 $5$。\n\n$$\\begin{array}{|l|l|l|l|l|l|l|l|}\n\\hline\n\\text{小齊戰力 } a_i & 6 & 7 & 9 & 4 & 8 & 5 & 5 \\\\\n\\hline\n\\text{小田戰力 } b_i & 3 & 7 & 6 & 9 & 9 & 1 & 5 \\\\\n\\hline\ns=1 \\text{ 與 } t=6 & 3 + 6 > 6 & 7 + 1 > 7 & & (9 + 6) \\% 10 > 4 & & 1 + 6 > 5 & 5 + 1 > 5 \\\\\n\\hline\n\\end{array}$$", "inputFormat": "> $n$ $P$   \n> $a_1$ $a_2$ $\\ldots$ $a_n$   \n> $b_1$ $b_2$ $\\ldots$ $b_n$\n\n* $n$ 代表比賽的回合數，同時也是小齊和小田各自派出的機器馬數量。\n* $P$ 代表計算戰力用的參數。\n* $a_i$ 代表小齊第 $i$ 場出賽的機器馬原始戰力。\n* $b_i$ 代表小田第 $i$ 場出賽的機器馬原始戰力。", "outputFormat": "> $\\textrm{ans}$\n\n* $\\textrm{ans}$ 代表小田的最大勝利場次數。", "hint": "### 測資限制\n\n* $1 \\le n \\le 2\\times 10^5$。\n* $1 \\le P \\le 10^9$。\n* $0 \\le a_i < P$。\n* $0 \\le b_i < P$。\n* 輸入的數皆為整數。\n\n### 評分說明\n\n本題共有五組子任務，條件限制如下所示。\n每一組可有一或多筆測試資料，該組所有測試資料皆需答對才會獲得該組分數。\n\n|  子任務  |  分數  | 額外輸入限制 |\n| :------: | :----: | ------------ |\n| 1 | $5$ | $n \\le 100, P \\le 100$ |\n| 2 | $7$ | $n \\le 100, P \\le 10000$ |\n| 3 | $17$ | $n \\le 5000$ |\n| 4 | $40$ | 對於所有 $i$，$b_i \\le a_i$ |\n| 5 | $31$ | 無額外限制 |", "locale": "zh-Hant"}}}
{"pid": "P11911", "type": "P", "difficulty": 3, "samples": [["7 8 9\n1 5 7\n2 2 3\n3 8\n2 10 8\n3 3\n1 12 12\n2 10 13\n1 9 14\n2 4\n5 7\n11 5\n15 1\n15 2\n15 3\n15 4\n15 5\n15 6", "TAK\nNIE\nNIE\nTAK\nTAK\nNIE\nTAK\nNIE\nTAK"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000]}, "tags": ["2025", "PA（波兰）", "bitset"], "title": "[PA 2025] 集合 1 / Zbiory 1", "background": "PA 2025 trial round t1.\n\n\n由于评测机性能差距，微调了 TL 和 ML。\n\n**请注意本题非同寻常的时空限制。**", "description": "给定正整数 $n,m$。定义全集 $U=\\{1,2,\\ldots,n\\}$。\n\n构造 $(n+m)$ 个集合 $A_1,A_2,\\ldots,A_{n+m}$：\n\n1. 对于 $1\\le i\\le n$，$A_i$ 里的元素为 $U$ 中 $i$ 的倍数。\n2. 对于 $n+1\\le i\\le n+m$，给定参数 $op_i$：\n\n\t- 当 $op_i=1$ 时，给定参数 $x,y$，则 $A_{i}=A_x\\cup A_y$；\n    - 当 $op_i=2$ 时，给定参数 $x,y$，则 $A_{i}=A_x\\cap A_y$；\n    - 当 $op_i=3$ 时，给定参数 $x$，则 $A_{i}=U\\backslash A_x$（即 $A_i=\\{j:j\\in U,j\\not\\in A_x\\}$）。\n    \n接着有 $q$ 次询问，每次询问给定两个正整数 $x,y$，问是否有 $y\\in A_x$。", "inputFormat": "第一行，三个正整数 $n,m,q$。\n\n以下 $m$ 行，第 $i$ 行要么是 $1$ 或 $2$ 后面跟两个正整数，要么是 $3$ 后面跟一个正整数，表示第 $n+i$ 个集合的构造方式。\n\n接下来 $q$ 行，每行两个正整数 $x,y$（$1 \\le x \\le n+m,\\ 1 \\le y \\le n$），表示一次询问。", "outputFormat": "对于每组询问，输出一行，如果 $y\\in A_x$，输出 $\\tt{TAK}$，否则输出 $\\tt{NIE}$。", "hint": "- $1\\le n\\le 5\\times 10^4$；\n- $1\\le m\\le 4\\times 10^5$；\n- $1\\le q\\le 10^6$；\n- $1\\le x_i,y_i<n+i$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2025] 集合 1 / Zbiory 1", "background": "PA 2025 trial round t1.\n\n\n由于评测机性能差距，微调了 TL 和 ML。\n\n**请注意本题非同寻常的时空限制。**", "description": "给定正整数 $n,m$。定义全集 $U=\\{1,2,\\ldots,n\\}$。\n\n构造 $(n+m)$ 个集合 $A_1,A_2,\\ldots,A_{n+m}$：\n\n1. 对于 $1\\le i\\le n$，$A_i$ 里的元素为 $U$ 中 $i$ 的倍数。\n2. 对于 $n+1\\le i\\le n+m$，给定参数 $op_i$：\n\n\t- 当 $op_i=1$ 时，给定参数 $x,y$，则 $A_{i}=A_x\\cup A_y$；\n    - 当 $op_i=2$ 时，给定参数 $x,y$，则 $A_{i}=A_x\\cap A_y$；\n    - 当 $op_i=3$ 时，给定参数 $x$，则 $A_{i}=U\\backslash A_x$（即 $A_i=\\{j:j\\in U,j\\not\\in A_x\\}$）。\n    \n接着有 $q$ 次询问，每次询问给定两个正整数 $x,y$，问是否有 $y\\in A_x$。", "inputFormat": "第一行，三个正整数 $n,m,q$。\n\n以下 $m$ 行，第 $i$ 行要么是 $1$ 或 $2$ 后面跟两个正整数，要么是 $3$ 后面跟一个正整数，表示第 $n+i$ 个集合的构造方式。\n\n接下来 $q$ 行，每行两个正整数 $x,y$（$1 \\le x \\le n+m,\\ 1 \\le y \\le n$），表示一次询问。", "outputFormat": "对于每组询问，输出一行，如果 $y\\in A_x$，输出 $\\tt{TAK}$，否则输出 $\\tt{NIE}$。", "hint": "- $1\\le n\\le 5\\times 10^4$；\n- $1\\le m\\le 4\\times 10^5$；\n- $1\\le q\\le 10^6$；\n- $1\\le x_i,y_i<n+i$。", "locale": "zh-CN"}}}
{"pid": "P11912", "type": "P", "difficulty": 4, "samples": [["7 4\n1 2 4 6", "8\n1 5 7\n2 2 3\n3 8\n2 10 8\n3 3\n1 12 12\n2 10 13\n1 9 14"], ["3 1\n3", "0"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000]}, "tags": ["2025", "Special Judge", "PA（波兰）"], "title": "[PA 2025] 集合 2 / Zbiory 2", "background": "PA 2025 trial round t2.\n\n**请注意本题非同寻常的时空限制。**", "description": "> **问题。**\n>\n> 给定正整数 $n$ 和非负整数 $m$。定义全集 $U=\\{1,2,\\ldots,n\\}$。\n> \n> 构造 $(n+m)$ 个集合 $A_1,A_2,\\ldots,A_{n+m}$：\n> \n> 1. 对于 $1\\le i\\le n$，$A_i$ 里的元素为 $U$ 中 $i$ 的倍数。\n> 2. 对于 $n+1\\le i\\le n+m$，给定参数 $op_i$：\n> \n>\t- 当 $op_i=1$ 时，给定参数 $x,y$（$x,y\\lt n+i$），则 $A_{i} =A_x\\cup A_y$；\n>    - 当 $op_i=2$ 时，给定参数 $x,y$（$x,y\\lt n+i$），则 $A_{i}=A_x\\cap A_y$；\n>    - 当 $op_i=3$ 时，给定参数 $x$（$x\\lt n+i$），则 $A_{i}=U\\backslash A_x$（即 $A_i=\\{j:j\\in U,j\\not\\in A_x\\}$）。\n>\n> 定义问题的答案为 $A_{n+m}$。\n\n给定正整数 $n$ 和目标集合 $B\\subseteq \\{1,2,\\ldots,n\\}$。构造非负整数 $m$ 和一组对应的参数，使得上述问题的答案为 $B$。\n\n你需要保证 $0\\le m\\le 10^5$。可以证明本题一定有解。\n", "inputFormat": "第一行，两个正整数 $n,k$，其中 $|B|=k$。\n\n第二行，$k$ 个正整数 $B_1,B_2,\\ldots,B_k$，描述 $B$ 中的元素。", "outputFormat": "输出 $(m+1)$ 行：\n\n第一行，一个非负整数 $m$。\n\n接下来 $m$ 行，第 $i$ 行两个或三个正整数（格式见上），描述集合 $A_{n+i}$ 的生成方式。\n\n你需要保证 $0\\le m\\le 10^5$，且格式符合【题目描述】中的限制。\n", "hint": "- $1\\le n\\le 5\\times 10^4$;\n- $B\\subseteq \\{1,2,\\ldots,n\\}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2025] 集合 2 / Zbiory 2", "background": "PA 2025 trial round t2.\n\n**请注意本题非同寻常的时空限制。**", "description": "> **问题。**\n>\n> 给定正整数 $n$ 和非负整数 $m$。定义全集 $U=\\{1,2,\\ldots,n\\}$。\n> \n> 构造 $(n+m)$ 个集合 $A_1,A_2,\\ldots,A_{n+m}$：\n> \n> 1. 对于 $1\\le i\\le n$，$A_i$ 里的元素为 $U$ 中 $i$ 的倍数。\n> 2. 对于 $n+1\\le i\\le n+m$，给定参数 $op_i$：\n> \n>\t- 当 $op_i=1$ 时，给定参数 $x,y$（$x,y\\lt n+i$），则 $A_{i} =A_x\\cup A_y$；\n>    - 当 $op_i=2$ 时，给定参数 $x,y$（$x,y\\lt n+i$），则 $A_{i}=A_x\\cap A_y$；\n>    - 当 $op_i=3$ 时，给定参数 $x$（$x\\lt n+i$），则 $A_{i}=U\\backslash A_x$（即 $A_i=\\{j:j\\in U,j\\not\\in A_x\\}$）。\n>\n> 定义问题的答案为 $A_{n+m}$。\n\n给定正整数 $n$ 和目标集合 $B\\subseteq \\{1,2,\\ldots,n\\}$。构造非负整数 $m$ 和一组对应的参数，使得上述问题的答案为 $B$。\n\n你需要保证 $0\\le m\\le 10^5$。可以证明本题一定有解。\n", "inputFormat": "第一行，两个正整数 $n,k$，其中 $|B|=k$。\n\n第二行，$k$ 个正整数 $B_1,B_2,\\ldots,B_k$，描述 $B$ 中的元素。", "outputFormat": "输出 $(m+1)$ 行：\n\n第一行，一个非负整数 $m$。\n\n接下来 $m$ 行，第 $i$ 行两个或三个正整数（格式见上），描述集合 $A_{n+i}$ 的生成方式。\n\n你需要保证 $0\\le m\\le 10^5$，且格式符合【题目描述】中的限制。\n", "hint": "- $1\\le n\\le 5\\times 10^4$;\n- $B\\subseteq \\{1,2,\\ldots,n\\}$。", "locale": "zh-CN"}}}
{"pid": "P11913", "type": "P", "difficulty": 1, "samples": [["35\nNIE 0\nNIE 0\nTAK 3\nTAK 0\nTAK 7\nTAK 5\nNIE 0\nNIE 0\nTAK 7\nTAK 1\nNIE 0\nTAK 8\nTAK 1\nTAK 3\nNIE 0\nTAK 2\nNIE 0\nTAK 1\nNIE 4\nTAK 2\nTAK 2\nTAK 1\nTAK 1\nTAK 0\nTAK 0\nTAK 0\nTAK 0\nTAK 0\nNIE 0\nTAK 1\nTAK 2\nTAK 0\nTAK 0\nTAK 0\nTAK 0", "3 4 5 6 9 10 12 13 14 16 18 22 23 24 25 26 27 28 30 32"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "PA（波兰）"], "title": "[PA 2025] 晋级者 / Finaliści", "background": "PA 2025 R1C.", "description": "PA 2025 决赛的晋级规则如下：\n\n- 只有 $20$ 名选手能获得进入决赛的资格：\n\t- 前 $10$ 名选手根据线上赛的排名决定；\n    - 接下来的 $10$ 名选手同样按照线上赛的排名顺序选出，但是排除那些至少参加过两次 PA 决赛的选手。\n- 只有波兰公民或在波兰学习、工作或居住的选手才能进入决赛。\n- 为选出这 $20$ 名决赛选手，首先会去除无法进入决赛或放弃参赛的选手。接着，根据上述规则，从剩余的选手中选出 $20$ 名决赛选手。\n\nPA 2025 线上赛共有 $n$ 人参赛，其中第 $i$ 个人的排名为 $i$。对于每个人，都知道他是否能够进入决赛，以及他之前参加 PA 决赛的次数。\n\n根据比赛规则，选出 $20$ 名决赛选手。数据保证能够按照上述规则选出 $20$ 人。", "inputFormat": "第一行，正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行字符串 $s_i$ 和非负整数 $x_i$。\n\n$s_i\\in \\{\\texttt{TAK},\\texttt{NIE}\\}$。$s_i=\\texttt{TAK}$ 表示 $i$ 能够进入决赛，否则表示 $i$ 不能进入决赛。\n\n$x_i$ 表示 $i$ 之前进入决赛的次数。\n", "outputFormat": "**升序**输出一行 $20$ 个正整数，表示晋级者的编号。", "hint": "- $20\\le n\\le 10^4$；\n- $0\\le x_i\\lt 20$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2025] 晋级者 / Finaliści", "background": "PA 2025 R1C.", "description": "PA 2025 决赛的晋级规则如下：\n\n- 只有 $20$ 名选手能获得进入决赛的资格：\n\t- 前 $10$ 名选手根据线上赛的排名决定；\n    - 接下来的 $10$ 名选手同样按照线上赛的排名顺序选出，但是排除那些至少参加过两次 PA 决赛的选手。\n- 只有波兰公民或在波兰学习、工作或居住的选手才能进入决赛。\n- 为选出这 $20$ 名决赛选手，首先会去除无法进入决赛或放弃参赛的选手。接着，根据上述规则，从剩余的选手中选出 $20$ 名决赛选手。\n\nPA 2025 线上赛共有 $n$ 人参赛，其中第 $i$ 个人的排名为 $i$。对于每个人，都知道他是否能够进入决赛，以及他之前参加 PA 决赛的次数。\n\n根据比赛规则，选出 $20$ 名决赛选手。数据保证能够按照上述规则选出 $20$ 人。", "inputFormat": "第一行，正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行字符串 $s_i$ 和非负整数 $x_i$。\n\n$s_i\\in \\{\\texttt{TAK},\\texttt{NIE}\\}$。$s_i=\\texttt{TAK}$ 表示 $i$ 能够进入决赛，否则表示 $i$ 不能进入决赛。\n\n$x_i$ 表示 $i$ 之前进入决赛的次数。\n", "outputFormat": "**升序**输出一行 $20$ 个正整数，表示晋级者的编号。", "hint": "- $20\\le n\\le 10^4$；\n- $0\\le x_i\\lt 20$。", "locale": "zh-CN"}}}
{"pid": "P11914", "type": "P", "difficulty": 3, "samples": [["10 1 2\n3233313132", "3"], ["7 0 2\n3313233", "0"], ["6 5 1\n231323", "6"], ["4 1 1\n1331", "-1"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "PA（波兰）"], "title": "[PA 2025] 上班 / Praca", "background": "PA 2025 R1B.", "description": "一天被分为 $n$ 段时间。每段时间可能会有以下三种事情：\n\n1. 举行了一场线下会议；\n2. 举行了一场线上会议；\n3. 空闲。\n\n每段时间内，Bajtazar 所在的地点可能有三种：\n\n- 在家：\n\t- 在家里无法参加线下会议（被迫翘掉会议）。\n    - 在家里**可以**参加线上会议（也可以选择翘掉会议做题）。\n    - 在家里可以做题。\n- 在公司：\n\t- 在公司**必须**参加线下会议。\n    - 在公司**必须**参加线上会议。\n    - 在公司**无法**做题。\n- 在通勤：\n\t- 通勤时无法参加线下会议（被迫翘掉会议）。\n\t- 通勤时无法参加线上会议（被迫翘掉会议）。\n\t- 通勤时无法做题。\n\n一天开始时（第 $1$ 段时间初），Bajtazar 在家里。一天结束时（第 $n$ 段时间末），Bajtazar 必须回到家中。\n\nBajtazar 可以选择去办公室**至多一次**。从家到办公室、从办公室回家都要通勤。\n\n通勤会消耗 $t$ 段时间，即如果选择在第 $i$ 段时间初开始通勤，在第 $(i+t-1)$ 段时间末会结束通勤。\n\nBajtazar 想打一辈子算法竞赛，所以他想抽出尽可能多的时间做题。但是他最多能翘掉 $k$ 场会议，请帮他算出至多能用多少个时间段来做题。\n", "inputFormat": "第一行，三个整数 $n,k,t$。\n\n第二行，一个长度为 $n$ 的字符串 $s$。$s_i\\in \\{1,2,3\\}$，表示第 $i$ 段时间的类型（1：线下会议；2：线上会议；3：空闲）。", "outputFormat": "如果不可能翘掉 $\\le k$ 场会议，输出一行一个 $-1$。\n\n否则输出一行一个非负整数表示答案。", "hint": "### 样例解释\n\n样例 $1$ 解释：一个最优解如下。\n\n1. 解题（在家）\n2. 线上会议（在家）\n3. 解题（在家）\n4. 通勤（去办公室）\n5. 通勤（去办公室）\n6. 线下会议（在办公室）\n7. 通勤（回家） \n8. 通勤（回家，被迫翘掉一场会议）\n9. 解题（在家） \n10. 线上会议（在家）\n\n- 样例 $2$ 解释：唯一一个解如下。\n\n1. 通勤（去办公室） \n2. 通勤（去办公室） \n3. 线下会议（在办公室） \n4. 空闲（在办公室） \n5. 线上会议（在办公室） \n6. 通勤（回家） \n7. 通勤（回家）\n\n- 样例 $3$ 解释：一整天都待在家里，翘掉所有会议。\n- 样例 $4$ 解释：第一场会议和最后一场会议都无法参加。\n\n### 数据范围\n\n- $3\\le n\\le 8\\, 000$；\n- $0\\le k\\le n$；\n- $1\\le t\\lt n/2$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2025] 上班 / Praca", "background": "PA 2025 R1B.", "description": "一天被分为 $n$ 段时间。每段时间可能会有以下三种事情：\n\n1. 举行了一场线下会议；\n2. 举行了一场线上会议；\n3. 空闲。\n\n每段时间内，Bajtazar 所在的地点可能有三种：\n\n- 在家：\n\t- 在家里无法参加线下会议（被迫翘掉会议）。\n    - 在家里**可以**参加线上会议（也可以选择翘掉会议做题）。\n    - 在家里可以做题。\n- 在公司：\n\t- 在公司**必须**参加线下会议。\n    - 在公司**必须**参加线上会议。\n    - 在公司**无法**做题。\n- 在通勤：\n\t- 通勤时无法参加线下会议（被迫翘掉会议）。\n\t- 通勤时无法参加线上会议（被迫翘掉会议）。\n\t- 通勤时无法做题。\n\n一天开始时（第 $1$ 段时间初），Bajtazar 在家里。一天结束时（第 $n$ 段时间末），Bajtazar 必须回到家中。\n\nBajtazar 可以选择去办公室**至多一次**。从家到办公室、从办公室回家都要通勤。\n\n通勤会消耗 $t$ 段时间，即如果选择在第 $i$ 段时间初开始通勤，在第 $(i+t-1)$ 段时间末会结束通勤。\n\nBajtazar 想打一辈子算法竞赛，所以他想抽出尽可能多的时间做题。但是他最多能翘掉 $k$ 场会议，请帮他算出至多能用多少个时间段来做题。\n", "inputFormat": "第一行，三个整数 $n,k,t$。\n\n第二行，一个长度为 $n$ 的字符串 $s$。$s_i\\in \\{1,2,3\\}$，表示第 $i$ 段时间的类型（1：线下会议；2：线上会议；3：空闲）。", "outputFormat": "如果不可能翘掉 $\\le k$ 场会议，输出一行一个 $-1$。\n\n否则输出一行一个非负整数表示答案。", "hint": "### 样例解释\n\n样例 $1$ 解释：一个最优解如下。\n\n1. 解题（在家）\n2. 线上会议（在家）\n3. 解题（在家）\n4. 通勤（去办公室）\n5. 通勤（去办公室）\n6. 线下会议（在办公室）\n7. 通勤（回家） \n8. 通勤（回家，被迫翘掉一场会议）\n9. 解题（在家） \n10. 线上会议（在家）\n\n- 样例 $2$ 解释：唯一一个解如下。\n\n1. 通勤（去办公室） \n2. 通勤（去办公室） \n3. 线下会议（在办公室） \n4. 空闲（在办公室） \n5. 线上会议（在办公室） \n6. 通勤（回家） \n7. 通勤（回家）\n\n- 样例 $3$ 解释：一整天都待在家里，翘掉所有会议。\n- 样例 $4$ 解释：第一场会议和最后一场会议都无法参加。\n\n### 数据范围\n\n- $3\\le n\\le 8\\, 000$；\n- $0\\le k\\le n$；\n- $1\\le t\\lt n/2$。\n", "locale": "zh-CN"}}}
{"pid": "P11915", "type": "P", "difficulty": 5, "samples": [["2\n4\n0111\n1011\n1101\n1110\n5\n01000\n10100\n01010\n00101\n00010", "1\n2"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "PA（波兰）"], "title": "[PA 2025] 瞬间传送 / Teleport", "background": "PA 2025 R1A.", "description": "给定一张 $n$ 个节点的简单无向连通图，边权全为 $1$。\n\n在图中加入一条边权为 $0$ 的边，最小化**加边后**这张图的 $\\displaystyle \\max_{1\\le u,v\\le n} \\{\\operatorname{dist}(u,v)\\}$。只需要求出 $\\displaystyle \\max_{1\\le u,v\\le n} \\{\\operatorname{dist}(u,v)\\}$ 的最小值。\n\n这里，$\\operatorname{dist}(u,v)$ 定义为 $u,v$ 间最短路长度。\n", "inputFormat": "本题单个测试点内有多组测试数据。\n\n第一行，正整数 $T$，表示测试数据组数。\n\n接下来依次描述 $T$ 组测试数据。\n\n每组测试数据第一行，正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行一个长度为 $n$ 的 $\\texttt{01}$ 串 $s_i$。\n\n$s_{i,j}=1$ 表示 $(i,j)$ 存在一条边权为 $1$ 的无向边。\n\n保证 $s_{i,j}=s_{j,i}$ 且 $s_{i,i}=\\texttt{0}$。", "outputFormat": "对于每组数据输出一行一个整数，表示答案。", "hint": "### 样例解释\n\n- 样例 $1$ 解释：给定的图是完全图，无论怎么加边，最长的最短路边权总是 $1$。\n- 样例 $2$ 解释：加边 $(1,5)$ 即可。\n\n### 数据范围\n\n- $1\\le T\\le 21$；\n- $1\\le n,\\sum n\\le 400$；\n- 给定图是简单无向连通图；\n- $s_{i,j}=s_{j,i}$，且 $s_{i,i}=\\texttt{0}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2025] 瞬间传送 / Teleport", "background": "PA 2025 R1A.", "description": "给定一张 $n$ 个节点的简单无向连通图，边权全为 $1$。\n\n在图中加入一条边权为 $0$ 的边，最小化**加边后**这张图的 $\\displaystyle \\max_{1\\le u,v\\le n} \\{\\operatorname{dist}(u,v)\\}$。只需要求出 $\\displaystyle \\max_{1\\le u,v\\le n} \\{\\operatorname{dist}(u,v)\\}$ 的最小值。\n\n这里，$\\operatorname{dist}(u,v)$ 定义为 $u,v$ 间最短路长度。\n", "inputFormat": "本题单个测试点内有多组测试数据。\n\n第一行，正整数 $T$，表示测试数据组数。\n\n接下来依次描述 $T$ 组测试数据。\n\n每组测试数据第一行，正整数 $n$。\n\n接下来 $n$ 行，第 $i$ 行一个长度为 $n$ 的 $\\texttt{01}$ 串 $s_i$。\n\n$s_{i,j}=1$ 表示 $(i,j)$ 存在一条边权为 $1$ 的无向边。\n\n保证 $s_{i,j}=s_{j,i}$ 且 $s_{i,i}=\\texttt{0}$。", "outputFormat": "对于每组数据输出一行一个整数，表示答案。", "hint": "### 样例解释\n\n- 样例 $1$ 解释：给定的图是完全图，无论怎么加边，最长的最短路边权总是 $1$。\n- 样例 $2$ 解释：加边 $(1,5)$ 即可。\n\n### 数据范围\n\n- $1\\le T\\le 21$；\n- $1\\le n,\\sum n\\le 400$；\n- 给定图是简单无向连通图；\n- $s_{i,j}=s_{j,i}$，且 $s_{i,i}=\\texttt{0}$。", "locale": "zh-CN"}}}
{"pid": "P11916", "type": "P", "difficulty": 3, "samples": [["10 2 7\n5 9\n1 2", "4"], ["15 4 9\n4 5\n10 13\n1 1\n6 9", "14"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "PA（波兰）"], "title": "[PA 2025] 学区房 / Szkoła", "background": "PA 2025 R2C.\n", "description": "\n有 $n$ 栋建筑在一条笔直的马路上，自西向东依次编号为 $1\\sim n$。相邻两栋建筑的距离为 $1$ 米。\n\n有 $m$ 个两两不交的区间 $[l_i,r_i]$，表示编号在 $[l_i,r_i]$ 内的房子**不**提供租赁服务。\n\n有一所学校，在编号为 $s$ 的建筑中。保证编号为 $s$ 的建筑**不**提供租赁服务。\n\n现在想要选择一栋提供租赁服务的建筑 $p$，最小化到学校的距离（即最小化 $|s-p|$）。请帮忙求出这栋建筑的编号。\n\n", "inputFormat": "第一行，三个正整数 $n,m,s$。\n\n接下来 $m$ 行，每行两个正整数 $l_i,r_i$。\n\n数据保证：\n\n- 编号为 $s$ 的建筑**不**提供租赁服务；\n- $m$ 个区间两两不交；\n- 至少存在一栋建筑提供租赁服务。\n\n", "outputFormat": "输出一个正整数，表示选择建筑的编号。\n\n特别地，若有多解，输出最小的那个编号。\n", "hint": "\n### 样例解释\n\n- 样例 $1$ 解释：$p=4,10$ 是两个解。由于要求编号最小，输出 $4$。\n- 样例 $2$ 解释：只有唯一的一栋提供租赁服务的建筑，即编号 $14$ 的建筑。\n\n### 数据范围\n\n\n- $ 2 \\leq n \\leq 10^{12}$；\n- $1 \\leq m \\leq 1000$；\n- $1 \\leq s \\leq n $；\n- 编号为 $s$ 的建筑**不**提供租赁服务；\n- $m$ 个区间两两不交；\n- 至少存在一栋建筑提供租赁服务。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2025] 学区房 / Szkoła", "background": "PA 2025 R2C.\n", "description": "\n有 $n$ 栋建筑在一条笔直的马路上，自西向东依次编号为 $1\\sim n$。相邻两栋建筑的距离为 $1$ 米。\n\n有 $m$ 个两两不交的区间 $[l_i,r_i]$，表示编号在 $[l_i,r_i]$ 内的房子**不**提供租赁服务。\n\n有一所学校，在编号为 $s$ 的建筑中。保证编号为 $s$ 的建筑**不**提供租赁服务。\n\n现在想要选择一栋提供租赁服务的建筑 $p$，最小化到学校的距离（即最小化 $|s-p|$）。请帮忙求出这栋建筑的编号。\n\n", "inputFormat": "第一行，三个正整数 $n,m,s$。\n\n接下来 $m$ 行，每行两个正整数 $l_i,r_i$。\n\n数据保证：\n\n- 编号为 $s$ 的建筑**不**提供租赁服务；\n- $m$ 个区间两两不交；\n- 至少存在一栋建筑提供租赁服务。\n\n", "outputFormat": "输出一个正整数，表示选择建筑的编号。\n\n特别地，若有多解，输出最小的那个编号。\n", "hint": "\n### 样例解释\n\n- 样例 $1$ 解释：$p=4,10$ 是两个解。由于要求编号最小，输出 $4$。\n- 样例 $2$ 解释：只有唯一的一栋提供租赁服务的建筑，即编号 $14$ 的建筑。\n\n### 数据范围\n\n\n- $ 2 \\leq n \\leq 10^{12}$；\n- $1 \\leq m \\leq 1000$；\n- $1 \\leq s \\leq n $；\n- 编号为 $s$ 的建筑**不**提供租赁服务；\n- $m$ 个区间两两不交；\n- 至少存在一栋建筑提供租赁服务。\n", "locale": "zh-CN"}}}
{"pid": "P11917", "type": "P", "difficulty": 4, "samples": [["7\n3\n1 3 1\n2\n5 7\n3\n0 1 0\n1\n2\n6\n3 3 2 1 0 0\n5\n1 3 2 2 3\n3\n1 0 1", "TAK\nNIE\nTAK\nNIE\nTAK\nNIE\nNIE"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "PA（波兰）"], "title": "[PA 2025] 点兵点将 / Wyliczanka", "background": "PA 2025 R2B.\n\n", "description": "\n有 $n$ 个玩具，编号 $1\\sim n$，现在要点兵点将。流程如下：\n\n1. 选择一个 $1\\le i\\le n$，然后指着玩具 $i$\n。\n2. 选择是否终止点兵点将；\n3. 如果不终止，设当前指着的玩具是 $j$。\n\t- 若 $j=1$，转而指着 $j+1$，然后回到 2；\n    - 若 $j=n$，转而指着 $j-1$，然后回到 2；\n    - 否则，选择转而指着 $j+1$ 或 $j-1$，然后回到 2。\n\n将每个玩具被指着的次数（包括步骤 1 的一次）记录下来，可以得到一个序列。我们说这个游戏**生成**了这个序列。\n\n给定一个长度为 $n$ 的非负整数序列 $a_1,a_2,\\ldots,a_n$。判断是否存在一个合法的游戏生成序列 $a$。\n", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，正整数 $T$，表示测试数据组数。\n\n接下来依次描述 $T$ 组数据：\n\n每组数据第一行，正整数 $n$。\n\n每组数据第二行，$n$ 个非负整数 $a_1,a_2,\\ldots,a_n$。\n\n保证每组数据存在一个非零的 $a_i$。\n", "outputFormat": "每组数据输出一行：\n\n- 若存在一个游戏生成序列，输出 $\\texttt{TAK}$；\n- 否则输出 $\\texttt{NIE}$。\n", "hint": "\n### 样例解释\n\n- 样例 $1$ 解释：依次指着 $2,1,2,3,2$ 即可。\n- 样例 $3$ 解释：指着 $1$ 后终止游戏即可。\n- 样例 $5$ 解释：依次指着 $1,2,3,4,3,2,1,2,1$ 即可。\n\n### 数据范围\n\n- $1\\le T\\le 10^5$；\n- $1\\le n,\\sum n\\le 10^6$；\n- $ 0 \\leq a_i \\leq 10^9 $；\n- 每组数据中，至少有一个非零的 $a_i$。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2025] 点兵点将 / Wyliczanka", "background": "PA 2025 R2B.\n\n", "description": "\n有 $n$ 个玩具，编号 $1\\sim n$，现在要点兵点将。流程如下：\n\n1. 选择一个 $1\\le i\\le n$，然后指着玩具 $i$\n。\n2. 选择是否终止点兵点将；\n3. 如果不终止，设当前指着的玩具是 $j$。\n\t- 若 $j=1$，转而指着 $j+1$，然后回到 2；\n    - 若 $j=n$，转而指着 $j-1$，然后回到 2；\n    - 否则，选择转而指着 $j+1$ 或 $j-1$，然后回到 2。\n\n将每个玩具被指着的次数（包括步骤 1 的一次）记录下来，可以得到一个序列。我们说这个游戏**生成**了这个序列。\n\n给定一个长度为 $n$ 的非负整数序列 $a_1,a_2,\\ldots,a_n$。判断是否存在一个合法的游戏生成序列 $a$。\n", "inputFormat": "\n**本题单个测试点内有多组测试数据。**\n\n第一行，正整数 $T$，表示测试数据组数。\n\n接下来依次描述 $T$ 组数据：\n\n每组数据第一行，正整数 $n$。\n\n每组数据第二行，$n$ 个非负整数 $a_1,a_2,\\ldots,a_n$。\n\n保证每组数据存在一个非零的 $a_i$。\n", "outputFormat": "每组数据输出一行：\n\n- 若存在一个游戏生成序列，输出 $\\texttt{TAK}$；\n- 否则输出 $\\texttt{NIE}$。\n", "hint": "\n### 样例解释\n\n- 样例 $1$ 解释：依次指着 $2,1,2,3,2$ 即可。\n- 样例 $3$ 解释：指着 $1$ 后终止游戏即可。\n- 样例 $5$ 解释：依次指着 $1,2,3,4,3,2,1,2,1$ 即可。\n\n### 数据范围\n\n- $1\\le T\\le 10^5$；\n- $1\\le n,\\sum n\\le 10^6$；\n- $ 0 \\leq a_i \\leq 10^9 $；\n- 每组数据中，至少有一个非零的 $a_i$。\n", "locale": "zh-CN"}}}
{"pid": "P11918", "type": "P", "difficulty": 7, "samples": [["5 2\n0.77\n0.85\n0.75\n0.98\n0.6", "0.8798125"], ["5 3\n0.3\n0.01\n0.2\n0.15\n0", "0.009"], ["3 3\n0.000001\n0.000001\n0.000001", "0"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "Special Judge", "PA（波兰）"], "title": "[PA 2025] 考试 / Egzamin", "background": "PA 2025 R2 A.\n\n1G/3s.", "description": "期末考试有 $n$ 道题。对于每道题，你都可以选择是否作答。\n\n如果选择作答第 $i$ 题，有 $p_i$ 的概率作答正确，$(1-p_i)$ 的概率作答错误。\n\n每道题的评分规则如下：\n\n- 作答正确：得 $1$ 分；\n- 不作答：得 $0$ 分；\n- 作答错误：倒扣 $1$ 分。\n\n为了不挂科，你需要获得至少 $t$ 分。\n\n**每道题目作答结果是相互独立的。**\n\n在自由选择是否作答每道题的前提下，最大化不挂科的概率。只需要求出不挂科的概率。\n\n注意在考试过程中你无法知道每个题的答题情况，只能决定要回答的题目。\n", "inputFormat": "第一行，两个正整数 $n,t$。\n\n接下来 $n$ 行，第 $i$ 行一个实数 $p_i$。小数点后最多有 $9$ 位。\n\n", "outputFormat": "输出一行一个实数，表示所求的概率。\n\n结果应以十进制表示（不能使用科学计数法），至多保留 $20$ 位小数。\n\n当你的答案与标准答案的**绝对误差**不大于 $10^{-6}$ 时，认为你的答案正确。\n", "hint": "### 样例解释\n- 样例 $1$ 解释：最优策略是选择作答前 $4$ 题。\n- 样例 $2$ 解释：最优策略是作答 $1,3,4$ 题。这样，不挂科的概率为 $0.3\\times 0.2\\times 0.15=0.009$。\n- 样例 $3$ 解释：不挂科的概率为 $10^{-18}$。输出 $0$ 也被视为正确的答案。\n### 数据范围\n\n-  $ 1 \\leq t \\leq n \\leq 50\\, 000 $；\n- $p_i\\in [0,1]$，且至多有 $9$ 位小数。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2025] 考试 / Egzamin", "background": "PA 2025 R2 A.\n\n1G/3s.", "description": "期末考试有 $n$ 道题。对于每道题，你都可以选择是否作答。\n\n如果选择作答第 $i$ 题，有 $p_i$ 的概率作答正确，$(1-p_i)$ 的概率作答错误。\n\n每道题的评分规则如下：\n\n- 作答正确：得 $1$ 分；\n- 不作答：得 $0$ 分；\n- 作答错误：倒扣 $1$ 分。\n\n为了不挂科，你需要获得至少 $t$ 分。\n\n**每道题目作答结果是相互独立的。**\n\n在自由选择是否作答每道题的前提下，最大化不挂科的概率。只需要求出不挂科的概率。\n\n注意在考试过程中你无法知道每个题的答题情况，只能决定要回答的题目。\n", "inputFormat": "第一行，两个正整数 $n,t$。\n\n接下来 $n$ 行，第 $i$ 行一个实数 $p_i$。小数点后最多有 $9$ 位。\n\n", "outputFormat": "输出一行一个实数，表示所求的概率。\n\n结果应以十进制表示（不能使用科学计数法），至多保留 $20$ 位小数。\n\n当你的答案与标准答案的**绝对误差**不大于 $10^{-6}$ 时，认为你的答案正确。\n", "hint": "### 样例解释\n- 样例 $1$ 解释：最优策略是选择作答前 $4$ 题。\n- 样例 $2$ 解释：最优策略是作答 $1,3,4$ 题。这样，不挂科的概率为 $0.3\\times 0.2\\times 0.15=0.009$。\n- 样例 $3$ 解释：不挂科的概率为 $10^{-18}$。输出 $0$ 也被视为正确的答案。\n### 数据范围\n\n-  $ 1 \\leq t \\leq n \\leq 50\\, 000 $；\n- $p_i\\in [0,1]$，且至多有 $9$ 位小数。\n", "locale": "zh-CN"}}}
{"pid": "P11919", "type": "P", "difficulty": 4, "samples": [["7", "7"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["数学", "2025", "折半搜索 meet in the middle", "PA（波兰）"], "title": "[PA 2025] 水族馆 / Akwarium", "background": "PA 2025 R3C.\n", "description": "\n一个底面尺寸为 $a\\times b$，高为 $h$ 的长方体水箱的对角线长度为 $\\sqrt{a^2+b^2+h^2}$。这里，$a,b,h$ 均为正整数。\n\n求出有多少个本质不同的水箱满足以下条件：\n\n- $\\sqrt{a^2+b^2+h^2}\\in \\mathbb{Z}$；\n- $\\sqrt{a^2+b^2+h^2}\\le n$。\n\n定义两个水箱 $a_1,b_1,h_1$，$a_2,b_2,h_2$ **本质不同**，当且仅当 $\\{a_1,b_1\\}\\neq \\{a_2,b_2\\}$ 或者 $h_1\\neq h_2$。\n\n", "inputFormat": "一行一个正整数 $n$。\n\n", "outputFormat": "一行一个非负整数，表示答案。", "hint": "### 样例解释\n\n满足条件的水族箱如下：\n\n- 底面形状 $1 \\times 2$，高为 $2$，对角线长为 $3$。\n- 底面形状 $2 \\times 2$，高为 $1$，对角线长为 $3$。\n- 底面形状 $2 \\times 4$，高为 $4$，对角线长为 $6$。\n- 底面形状 $4 \\times 4$，高为 $2$，对角线长为 $6$。\n- 底面形状 $2 \\times 3$，高为 $6$，对角线长为 $7$。\n- 底面形状 $2 \\times 6$，高为 $3$，对角线长为 $7$。\n- 底面形状 $3 \\times 6$，高为 $2$，对角线长为 $7$。\n\n### 数据范围\n\n- $1 \\leq n \\leq 5000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2025] 水族馆 / Akwarium", "background": "PA 2025 R3C.\n", "description": "\n一个底面尺寸为 $a\\times b$，高为 $h$ 的长方体水箱的对角线长度为 $\\sqrt{a^2+b^2+h^2}$。这里，$a,b,h$ 均为正整数。\n\n求出有多少个本质不同的水箱满足以下条件：\n\n- $\\sqrt{a^2+b^2+h^2}\\in \\mathbb{Z}$；\n- $\\sqrt{a^2+b^2+h^2}\\le n$。\n\n定义两个水箱 $a_1,b_1,h_1$，$a_2,b_2,h_2$ **本质不同**，当且仅当 $\\{a_1,b_1\\}\\neq \\{a_2,b_2\\}$ 或者 $h_1\\neq h_2$。\n\n", "inputFormat": "一行一个正整数 $n$。\n\n", "outputFormat": "一行一个非负整数，表示答案。", "hint": "### 样例解释\n\n满足条件的水族箱如下：\n\n- 底面形状 $1 \\times 2$，高为 $2$，对角线长为 $3$。\n- 底面形状 $2 \\times 2$，高为 $1$，对角线长为 $3$。\n- 底面形状 $2 \\times 4$，高为 $4$，对角线长为 $6$。\n- 底面形状 $4 \\times 4$，高为 $2$，对角线长为 $6$。\n- 底面形状 $2 \\times 3$，高为 $6$，对角线长为 $7$。\n- 底面形状 $2 \\times 6$，高为 $3$，对角线长为 $7$。\n- 底面形状 $3 \\times 6$，高为 $2$，对角线长为 $7$。\n\n### 数据范围\n\n- $1 \\leq n \\leq 5000$。", "locale": "zh-CN"}}}
{"pid": "P11920", "type": "P", "difficulty": 6, "samples": [["5\n10 56 57 123 1", "1 1 1 1 1 1 1 1 1 1\n11 2 7 3 6 5 8 2 9 3\n11 2 7 3 6 6 8 2 9 3\n36 3 11 4 12 8 16 4 24 5\n0 1 0 0 0 0 0 0 0 0"]], "limits": {"time": [6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000, 6000], "memory": [4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000, 4000000]}, "tags": ["2025", "PA（波兰）"], "title": "[PA 2025] 乘数 / Mnożenie cyfr", "background": "PA 2025 R3B.\n", "description": "\n\n对于非负整数 $n$，定义函数 $f(n)$：\n\n- 令 $n$ 的十进制表示为 $\\overline{a_1a_2\\ldots a_k}$。\n- 则 $f(n)=a_1a_2\\cdots a_k$。\n\n换言之，$f(n)$ 就是将 $n$ 十进制表示下的数位相乘得到的结果。\n\n对于非负整数 $x$，按如下程序执行操作：\n\n1. 若 $x\\le 9$，终止操作；\n2. 否则令 $x\\gets f(x)$，回到 1。\n\n> **举例**\n>\n> 1. $57\\to 5\\times 7=35\\to 3\\times 5=15\\to 1\\times 5=5$。\n> 2. $255\\to 2\\times 5\\times 5=50\\to 5\\times 0=0$。\n\n可以证明，对于任意非负整数 $x$，这个操作都一定会终止。\n\n$T$ 组数据，每组数据给定 $n$，对于 $i=0,1,\\ldots,9$，求出：\n\n- 有多少个 $1\\le j\\le n$ 满足将 $j$ 操作后最终会得到 $i$。", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n\n第一行，一个正整数 $T$。\n\n第二行，$T$ 个正整数 $n$，描述 $T$ 组数据。\n\n", "outputFormat": "输出 $T$ 行，每行 $10$ 个非负整数，每行第 $i$ 个整数表示：\n\n- 有多少个 $1\\le j\\le n$ 满足将 $j$ 操作后最终会得到 $i-1$。\n", "hint": "- $1\\le T\\le 10^3$；\n- $1\\le n\\le 10^{18}$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2025] 乘数 / Mnożenie cyfr", "background": "PA 2025 R3B.\n", "description": "\n\n对于非负整数 $n$，定义函数 $f(n)$：\n\n- 令 $n$ 的十进制表示为 $\\overline{a_1a_2\\ldots a_k}$。\n- 则 $f(n)=a_1a_2\\cdots a_k$。\n\n换言之，$f(n)$ 就是将 $n$ 十进制表示下的数位相乘得到的结果。\n\n对于非负整数 $x$，按如下程序执行操作：\n\n1. 若 $x\\le 9$，终止操作；\n2. 否则令 $x\\gets f(x)$，回到 1。\n\n> **举例**\n>\n> 1. $57\\to 5\\times 7=35\\to 3\\times 5=15\\to 1\\times 5=5$。\n> 2. $255\\to 2\\times 5\\times 5=50\\to 5\\times 0=0$。\n\n可以证明，对于任意非负整数 $x$，这个操作都一定会终止。\n\n$T$ 组数据，每组数据给定 $n$，对于 $i=0,1,\\ldots,9$，求出：\n\n- 有多少个 $1\\le j\\le n$ 满足将 $j$ 操作后最终会得到 $i$。", "inputFormat": "**本题单个测试点内含有多组测试数据。**\n\n\n第一行，一个正整数 $T$。\n\n第二行，$T$ 个正整数 $n$，描述 $T$ 组数据。\n\n", "outputFormat": "输出 $T$ 行，每行 $10$ 个非负整数，每行第 $i$ 个整数表示：\n\n- 有多少个 $1\\le j\\le n$ 满足将 $j$ 操作后最终会得到 $i-1$。\n", "hint": "- $1\\le T\\le 10^3$；\n- $1\\le n\\le 10^{18}$。", "locale": "zh-CN"}}}
{"pid": "P11921", "type": "P", "difficulty": 7, "samples": [["3 6\n..X.XX\n.X..X.\nX..X..", "4/3"], ["3 2\n..\nXX\n..", "0/1"], ["1 3\n.X.", "-1"]], "limits": {"time": [5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2025", "PA（波兰）"], "title": "[PA 2025] 看护 / Opieka", "background": "PA 2025 R3A.\n\n", "description": "\n有一段时间 $[0,l)$ 被等分成 $l$ 份 $[0,1),[1,2),\\ldots,[l-1,l)$。\n\n有 $n$ 个人轮流照顾婴儿。$\\forall i\\in [1,n], j\\in [0,l)$，我们知道第 $i$ 个人在时间 $[j,j+1)$ 内是否空闲。如果一个人在一段时间内是空闲的，他可以选择照顾婴儿或睡觉。\n\n在时间段 $[0,l)$ 内，**每个人最多可以入睡一次，醒来一次**。公平起见，每个人睡眠时长必须相同，设为 $t$（$t\\ge 0$）。那么某个人可以在 $[a,a+t)$ 内睡觉，当且仅当他在这段时间内空闲，且 $a+t\\le l$。\n\n婴儿在每个时刻都必须有人照顾，换句话说，$\\forall x\\in [0,l)$，都必须至少有一个人在时刻 $x$ 清醒且空闲。在此前提下，合理安排每个人的睡眠时间，最大化 $t$ 的值。\n\n可以证明，若存在一个合法的 $t$，则 $t$ 的最大值一定是一个有理数。只需要以既约分数的形式输出这个精确值即可。\n", "inputFormat": "\n第一行，两个正整数 $n,l$。\n\n接下来 $i$ 行，第 $i$ 行一个长度为 $l$ 的字符串 $s_{i}$。\n\n$\\forall 1\\le i\\le n,\\forall 0\\le j\\lt l$，$s_{i,j}=\\texttt{X}$，表示第 $i$ 个人在时段 $[j,j+1)$ 忙碌；否则 $s_{i,j}=\\texttt{.}$，表示第 $i$ 个人在时段 $[j,j+1)$ 空闲。\n\n", "outputFormat": "\n如果无法做到「婴儿在每个时刻都必须有人照顾」，输出一行一个 $-1$。\n\n否则，输出一个既约分数 $x/y$（即 $\\gcd(x,y)=1,y\\gt 0$），表示合法的 $t$ 的最大值。特别地，若 $t$ 的最大值为 $0$，输出 $\\texttt{0/1}$。\n\n", "hint": "\n### 样例解释\n\n- 样例 $1$ 解释：第 $1,2,3$ 个人分别在 $[0,4/3),[8/3,4),[4/3,8/3)$ 内睡觉。\n- 样例 $2$ 解释：第 $2$ 个人没时间睡觉。\n- 样例 $3$ 解释：在时刻 $x=\\pi/2\\approx 1.57$ 时，无人照顾婴儿。\n\n### 数据范围\n\n- $1\\le n\\le 18$；\n- $1\\le l \\le 10^5$。\n\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[PA 2025] 看护 / Opieka", "background": "PA 2025 R3A.\n\n", "description": "\n有一段时间 $[0,l)$ 被等分成 $l$ 份 $[0,1),[1,2),\\ldots,[l-1,l)$。\n\n有 $n$ 个人轮流照顾婴儿。$\\forall i\\in [1,n], j\\in [0,l)$，我们知道第 $i$ 个人在时间 $[j,j+1)$ 内是否空闲。如果一个人在一段时间内是空闲的，他可以选择照顾婴儿或睡觉。\n\n在时间段 $[0,l)$ 内，**每个人最多可以入睡一次，醒来一次**。公平起见，每个人睡眠时长必须相同，设为 $t$（$t\\ge 0$）。那么某个人可以在 $[a,a+t)$ 内睡觉，当且仅当他在这段时间内空闲，且 $a+t\\le l$。\n\n婴儿在每个时刻都必须有人照顾，换句话说，$\\forall x\\in [0,l)$，都必须至少有一个人在时刻 $x$ 清醒且空闲。在此前提下，合理安排每个人的睡眠时间，最大化 $t$ 的值。\n\n可以证明，若存在一个合法的 $t$，则 $t$ 的最大值一定是一个有理数。只需要以既约分数的形式输出这个精确值即可。\n", "inputFormat": "\n第一行，两个正整数 $n,l$。\n\n接下来 $i$ 行，第 $i$ 行一个长度为 $l$ 的字符串 $s_{i}$。\n\n$\\forall 1\\le i\\le n,\\forall 0\\le j\\lt l$，$s_{i,j}=\\texttt{X}$，表示第 $i$ 个人在时段 $[j,j+1)$ 忙碌；否则 $s_{i,j}=\\texttt{.}$，表示第 $i$ 个人在时段 $[j,j+1)$ 空闲。\n\n", "outputFormat": "\n如果无法做到「婴儿在每个时刻都必须有人照顾」，输出一行一个 $-1$。\n\n否则，输出一个既约分数 $x/y$（即 $\\gcd(x,y)=1,y\\gt 0$），表示合法的 $t$ 的最大值。特别地，若 $t$ 的最大值为 $0$，输出 $\\texttt{0/1}$。\n\n", "hint": "\n### 样例解释\n\n- 样例 $1$ 解释：第 $1,2,3$ 个人分别在 $[0,4/3),[8/3,4),[4/3,8/3)$ 内睡觉。\n- 样例 $2$ 解释：第 $2$ 个人没时间睡觉。\n- 样例 $3$ 解释：在时刻 $x=\\pi/2\\approx 1.57$ 时，无人照顾婴儿。\n\n### 数据范围\n\n- $1\\le n\\le 18$；\n- $1\\le l \\le 10^5$。\n\n", "locale": "zh-CN"}}}
