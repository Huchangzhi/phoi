{"pid": "P3068", "type": "P", "difficulty": 3, "samples": [["10 4 \n2 1 3 \n2 3 4 \n6 1 2 3 4 6 7 \n4 4 3 2 1 \n", "4 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "USACO", "枚举", "前缀和"], "title": "[USACO13JAN] Party Invitations S", "background": "", "description": "Farmer John is throwing a party and wants to invite some of his cows to show them how much he cares about his herd.  However, he also wants to invite the smallest possible number of cows, remembering all too well the disaster that resulted the last time he invited too many cows to a party.\n\nAmong FJ's cows, there are certain groups of friends that are hard to separate.  For any such group (say, of size k), if FJ invites at least k-1 of the cows in the group to the party, then he must invite the final cow as well, thereby including the entire group.  Groups can be of any size and may even overlap with each-other, although no two groups contain exactly the same set of members.  The sum of all group sizes is at most 250,000.\n\nGiven the groups among FJ's cows, please determine the minimum number of cows FJ can invite to his party, if he decides that he must definitely start by inviting cow #1 (his cows are conveniently numbered 1..N, with N at most 1,000,000).\n\n", "inputFormat": "\\* Line 1: Two space-separated integers: N (the number of cows), and G (the number of groups).\n\n\\* Lines 2..1+G: Each line describes a group of cows.  It starts with an integer giving the size S of the group, followed by the S cows in the group (each an integer in the range 1..N).\n\n", "outputFormat": "\\* Line 1: The minimum number of cows FJ can invite to his party.\n\n\n", "hint": "There are 10 cows and 4 groups.  The first group contains cows 1 and 3, and so on.\n\n\nIn addition to cow #1, FJ must invite cow #3 (due to the first group constraint), cow #4 (due to the second group constraint), and also cow #2 (due to the final group constraint).\n\n", "locale": "en", "translations": {"en": {"title": "[USACO13JAN] Party Invitations S", "background": "", "description": "Farmer John is throwing a party and wants to invite some of his cows to show them how much he cares about his herd.  However, he also wants to invite the smallest possible number of cows, remembering all too well the disaster that resulted the last time he invited too many cows to a party.\n\nAmong FJ's cows, there are certain groups of friends that are hard to separate.  For any such group (say, of size k), if FJ invites at least k-1 of the cows in the group to the party, then he must invite the final cow as well, thereby including the entire group.  Groups can be of any size and may even overlap with each-other, although no two groups contain exactly the same set of members.  The sum of all group sizes is at most 250,000.\n\nGiven the groups among FJ's cows, please determine the minimum number of cows FJ can invite to his party, if he decides that he must definitely start by inviting cow #1 (his cows are conveniently numbered 1..N, with N at most 1,000,000).\n\n", "inputFormat": "\\* Line 1: Two space-separated integers: N (the number of cows), and G (the number of groups).\n\n\\* Lines 2..1+G: Each line describes a group of cows.  It starts with an integer giving the size S of the group, followed by the S cows in the group (each an integer in the range 1..N).\n\n", "outputFormat": "\\* Line 1: The minimum number of cows FJ can invite to his party.\n\n\n", "hint": "There are 10 cows and 4 groups.  The first group contains cows 1 and 3, and so on.\n\n\nIn addition to cow #1, FJ must invite cow #3 (due to the first group constraint), cow #4 (due to the second group constraint), and also cow #2 (due to the final group constraint).\n\n", "locale": "en"}, "zh-CN": {"title": "[USACO13JAN] Party Invitations S", "background": "", "description": "农夫约翰要举办一个聚会，他要邀请一些奶牛来参加。在约翰的奶牛朋友圈中，有一些奶牛是好基友，对于每一个奶牛朋友圈，没有一个完全与之相同的，假设这个奶牛朋友圈有 $k$ 头奶牛，如果约翰已经邀请了 $k-1$ 头，那么剩下的那头牛也得邀请。约翰想让你告诉他，他最少需要邀请多少头奶牛？我们假设 $1$ 号奶牛已经被邀请了。", "inputFormat": "第一行 $N$ 和 $G$ 表示共有 $N$ 头奶牛和 $G$ 个朋友圈。\n\n接下来 $G$ 行，每行开头输入一个整数 $k$，表示朋友圈里有 $k$ 头牛，接着输入 $k$ 个整数，表示朋友圈里的牛。", "outputFormat": "一行，一个整数，表示约翰最少需要邀请的牛的头数。", "hint": "$1 \\leq  N\\leq10^6$。\n\n设所有的奶牛朋友圈的大小之和为 $M$，则 $1 \\leq  M\\leq2.5\\times10^5$。", "locale": "zh-CN"}}}
{"pid": "P3069", "type": "P", "difficulty": 4, "samples": [["9 1 \n2 \n7 \n3 \n7 \n7 \n3 \n7 \n5 \n7 \n", "4 \n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [129000, 129000, 129000, 129000, 129000, 129000, 129000, 129000, 129000, 129000]}, "tags": ["2013", "USACO", "树状数组", "单调队列", "队列", "双指针 two-pointer"], "title": "[USACO13JAN] Cow Lineup G", "background": null, "description": "Farmer John (FJ) 的 $N (1 \\le N \\le 10^5)$ 只奶牛排成了一队，每只牛都用编上了一个“血统编号”，该编号为范围 $0$ 至 $10^9$ 的整数。血统相同的奶牛有相同的编号，也就是可能有多头奶牛是相同的“血统编号”。\n\nFJ 觉得如果连续排列的一段奶牛有相同的血统编号的话，奶牛们看起来会更具有威猛。为了创造这样的连续段，约翰最多能选出 $k$ 种血统的奶牛，并把他们全部从队列中赶走。\n\n请帮助 FJ 计算这样做能得到的由相同血统编号的牛构成的连续段的长度最大是多少？", "inputFormat": "第 $1$ 行：两个用空格隔开的整数 $N$ 和 $K$。\n\n第 $2$ 到 $1+N$ 行：第 $i+1$ 行包含品种 ID $B(i)$。", "outputFormat": "第 1 行：FJ 能创造出的具有相同品种 ID 的连续奶牛块的最大长度。", "hint": "有 $9$ 头牛排成一队，品种 ID 分别为 $2, 7, 3, 7, 7, 3, 7, 5, 7$。FJ 希望从这队中移除最多 1 种品种 ID。\n\n通过移除所有品种 ID 为 $3$ 的奶牛，队伍变为 $2, 7, 7, 7, 7, 5, 7$。在这个新的队伍中，有一个由 $4$ 头品种 ID 相同（均为 $7$）的奶牛组成的连续块。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13JAN] Cow Lineup G", "background": "", "description": "Farmer John (FJ) has $N$ cows ($1 \\le N \\le 100\\,000$) standing in a row. Each cow has an integer breed ID in the range $0 \\ldots 1\\,000\\,000\\,000$; the breed ID of the $i$-th cow is $B(i)$. Multiple cows may share the same breed ID.\n\nFJ may choose up to $K$ breed IDs and remove from the lineup all cows having those IDs. Determine the maximum possible length of a contiguous block of cows in which all remaining cows have the same breed ID.", "inputFormat": "- Line 1: Two space-separated integers $N$ and $K$.\n- Lines 2 to $1+N$: Line $i+1$ contains $B(i)$.", "outputFormat": "- Line 1: The maximum size of a contiguous block of cows with identical breed IDs that FJ can obtain.", "hint": "There are 9 cows in the lineup with breed IDs 2, 7, 3, 7, 7, 3, 7, 5, 7. FJ would like to remove up to 1 breed ID.\n\nBy removing all cows with breed ID 3, the lineup becomes 2, 7, 7, 7, 7, 5, 7. In this new lineup, there is a contiguous block of 4 cows with the same breed ID (7).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13JAN] Cow Lineup G", "background": null, "description": "Farmer John (FJ) 的 $N (1 \\le N \\le 10^5)$ 只奶牛排成了一队，每只牛都用编上了一个“血统编号”，该编号为范围 $0$ 至 $10^9$ 的整数。血统相同的奶牛有相同的编号，也就是可能有多头奶牛是相同的“血统编号”。\n\nFJ 觉得如果连续排列的一段奶牛有相同的血统编号的话，奶牛们看起来会更具有威猛。为了创造这样的连续段，约翰最多能选出 $k$ 种血统的奶牛，并把他们全部从队列中赶走。\n\n请帮助 FJ 计算这样做能得到的由相同血统编号的牛构成的连续段的长度最大是多少？", "inputFormat": "第 $1$ 行：两个用空格隔开的整数 $N$ 和 $K$。\n\n第 $2$ 到 $1+N$ 行：第 $i+1$ 行包含品种 ID $B(i)$。", "outputFormat": "第 1 行：FJ 能创造出的具有相同品种 ID 的连续奶牛块的最大长度。", "hint": "有 $9$ 头牛排成一队，品种 ID 分别为 $2, 7, 3, 7, 7, 3, 7, 5, 7$。FJ 希望从这队中移除最多 1 种品种 ID。\n\n通过移除所有品种 ID 为 $3$ 的奶牛，队伍变为 $2, 7, 7, 7, 7, 5, 7$。在这个新的队伍中，有一个由 $4$ 头品种 ID 相同（均为 $7$）的奶牛组成的连续块。", "locale": "zh-CN"}}}
{"pid": "P3070", "type": "P", "difficulty": 5, "samples": [["5 4 \nXX.S \n.S.. \nSXSS \nS.SX \n..SX \n", "3 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "USACO", "广度优先搜索 BFS", "状压 DP"], "title": "[USACO13JAN] Island Travels G", "background": null, "description": "农夫约翰带着奶牛去海边度假了。\n\n奶牛们住在 $N$ 个岛屿上（$1 \\le N \\le 15$），这些岛屿位于 $R \\times C$ 的方格矩阵中（$1 \\le R,C \\le 50$）。\n\n岛屿是标记为 `X` 的方格，如果两个 `X` 共享一条边，则这两个 `X` 是相连的。（因此，共享一个角的两个 `X` 不一定相连）\n\n然后，贝茜来晚了，所以她要和约翰一起乘坐直升飞机过去。\n\n她可以选择任何一个岛屿并首先到达该岛。\n\n她想看望每头奶牛至少一次，因此，她需要在岛屿之间旅行，直到她去过每个岛屿至少一次为止。\n\n由于约翰的直升飞机燃料快用完了，所以直到奶牛们玩够了回家之前，他都不想动用这架飞机。\n\n幸运的是有一些方格区域是浅水区，用 `S` 表示。\n\n贝茜可以在浅水区沿四个基本方向游动，以便在各岛之间穿行。\n\n她还可以在岛屿和浅水区之间沿四个基本方向行进，反之亦然。\n\n请求出贝茜为了成功抵达所有岛屿所需要的最短游泳距离。\n\n游泳距离是指贝茜在行进过程中到达标有 `S` 的方格区域的次数。\n\n看完该地区的地图后，贝茜知道自己一定能成功抵达所有岛屿。", "inputFormat": "第一行包含两个整数 $R$ 和 $C$。\n\n接下来 $R$ 行，每行包含 $C$ 个字符用来描述方格矩阵。字符 . 表示深水方格区域，`X` 表示岛屿方格区域，`S` 表示浅水方格区域。", "outputFormat": "输出贝茜为了成功抵达所有岛屿所需要的最短游泳距离。", "hint": "贝茜可以在左上角岛屿着陆，然后按照右、下、下、右、右、下、下的方式行进，抵达所有岛屿。\n\n期间共处于 `S` 方格中 $3$ 次。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13JAN] Island Travels G", "background": "", "description": "Farmer John has taken the cows to a vacation out on the ocean! The cows are living on N (1 <= N <= 15) islands, which are located on an R x C grid (1 <= R, C <= 50). An island is a maximal connected group of squares on the grid that are marked as 'X', where two 'X's are connected if they share a side. (Thus, two 'X's sharing a corner are not necessarily connected.)\n\nBessie, however, is arriving late, so she is coming in with FJ by helicopter. Thus, she can first land on any of the islands she chooses. She wants to visit all the cows at least once, so she will travel between islands until she has visited all N of the islands at least once.\n\nFJ's helicopter doesn't have much fuel left, so he doesn't want to use it until the cows decide to go home. Fortunately, some of the squares in the grid are shallow water, which is denoted by 'S'. Bessie can swim through these squares in the four cardinal directions (north, east, south, west) in order to travel between the islands. She can also travel (in the four cardinal directions) between an island and shallow water, and vice versa.\n\nFind the minimum distance Bessie will have to swim in order to visit all of the islands. (The distance Bessie will have to swim is the number of distinct times she is on a square marked 'S'.) After looking at a map of the area, Bessie knows this will be possible.\n\nYou are given an R x C map with three types of terrain: 'S', 'X', and '.'. Adjacency and movement are all 4-connected. Let 'X' be land, and an 'X' connected component be an island; 'S' is shallow water; '.' is deep water. Initially, you may land on any land square. You can walk on land and swim in shallow water. Land and shallow water are mutually passable in the four cardinal directions, but you may never enter deep water. Your goal is to move by walking and swimming so that you visit every island at least once. Question: what is the minimum number of shallow water squares you must pass through? It is guaranteed that a solution exists.", "inputFormat": "* Line 1: Two space-separated integers: R and C.\n* Lines 2..R+1: Line i+1 contains C characters giving row i of the grid. Deep water squares are marked as '.', island squares are marked as 'X', and shallow water squares are marked as 'S'.", "outputFormat": "* Line 1: A single integer representing the minimum distance Bessie has to swim to visit all islands.", "hint": "There are three islands with shallow water paths connecting some of them.\n\nBessie can travel from the island in the top left to the one in the middle, swimming 1 unit, and then travel from the middle island to the one in the bottom right, swimming 2 units, for a total of 3 units.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13JAN] Island Travels G", "background": null, "description": "农夫约翰带着奶牛去海边度假了。\n\n奶牛们住在 $N$ 个岛屿上（$1 \\le N \\le 15$），这些岛屿位于 $R \\times C$ 的方格矩阵中（$1 \\le R,C \\le 50$）。\n\n岛屿是标记为 `X` 的方格，如果两个 `X` 共享一条边，则这两个 `X` 是相连的。（因此，共享一个角的两个 `X` 不一定相连）\n\n然后，贝茜来晚了，所以她要和约翰一起乘坐直升飞机过去。\n\n她可以选择任何一个岛屿并首先到达该岛。\n\n她想看望每头奶牛至少一次，因此，她需要在岛屿之间旅行，直到她去过每个岛屿至少一次为止。\n\n由于约翰的直升飞机燃料快用完了，所以直到奶牛们玩够了回家之前，他都不想动用这架飞机。\n\n幸运的是有一些方格区域是浅水区，用 `S` 表示。\n\n贝茜可以在浅水区沿四个基本方向游动，以便在各岛之间穿行。\n\n她还可以在岛屿和浅水区之间沿四个基本方向行进，反之亦然。\n\n请求出贝茜为了成功抵达所有岛屿所需要的最短游泳距离。\n\n游泳距离是指贝茜在行进过程中到达标有 `S` 的方格区域的次数。\n\n看完该地区的地图后，贝茜知道自己一定能成功抵达所有岛屿。", "inputFormat": "第一行包含两个整数 $R$ 和 $C$。\n\n接下来 $R$ 行，每行包含 $C$ 个字符用来描述方格矩阵。字符 . 表示深水方格区域，`X` 表示岛屿方格区域，`S` 表示浅水方格区域。", "outputFormat": "输出贝茜为了成功抵达所有岛屿所需要的最短游泳距离。", "hint": "贝茜可以在左上角岛屿着陆，然后按照右、下、下、右、右、下、下的方式行进，抵达所有岛屿。\n\n期间共处于 `S` 方格中 $3$ 次。", "locale": "zh-CN"}}}
{"pid": "P3071", "type": "P", "difficulty": 5, "samples": [["10 4 \nA 6 \nL 2 4 \nA 5 \nA 2 \n", "1 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "线段树", "USACO", "单调队列", "离散化", "队列"], "title": "[USACO13JAN] Seating G", "background": null, "description": "为了赚些外快，奶牛们在她们的牛棚里开了一家专门供应奶昔的餐厅。餐厅有一排 $N$ 个座位，编号从 $1$ 到 $N$（$1 \\le N \\le 5\\times 10^5$）。初始时，所有座位都是空的。\n\n在这一天中，会按顺序发生 $M$ 个事件（$1 \\le M \\le 3\\times 10^5$）。每个事件是以下两种之一：\n\n1.  一个规模为 $p$ 的团队到达（$1 \\le p \\le N$）。Bessie 希望将这个团队安排在一个连续的 $p$ 个空座位上。如果可能，她会将其安排在起始位置编号最小的那个连续空位区间。如果不可能，则该团队会被拒之门外。\n2.  给定一个范围 $[a, b]$（$1 \\le a \\le b \\le N$），该范围内的所有座位上的奶牛都会离开。\n\n请帮助 Bessie 统计这一天中被拒之门外的团队数量。", "inputFormat": "第 1 行：两个用空格隔开的整数 $N$ 和 $M$。\n\n第 $2$ 到 $M+1$ 行：每行描述一个事件，格式为 `A p`（表示一个规模为 $p$ 的团队到达）或 `L a b`（表示 $[a, b]$ 范围内的所有奶牛离开）。", "outputFormat": "第 $1$ 行：被拒之门外的团队数量。", "hint": "样例解释：\n\n共有 $10$ 个座位和 $4$ 个事件。首先，一个 $6$ 头奶牛的团队到达。然后座位 $2$ 到 $4$ 上的所有奶牛离开。接着，一个 $5$ 头奶牛的团队到达，之后是一个 $2$ 头奶牛的团队。\n\n团队 #3 被拒之门外。所有其他团队都得到了安排。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13JAN] Seating G", "background": "", "description": "To earn some extra money, the cows have opened a restaurant in their barn specializing in milkshakes. The restaurant has $N$ seats in a row, numbered $1$ to $N$ ($1 \\le N \\le 500\\,000$). Initially, all seats are empty.\n\nThroughout the day, there are $M$ events that happen in sequence ($1 \\le M \\le 300\\,000$). Each event is one of the following:\n\n1. A party of size $p$ arrives ($1 \\le p \\le N$). Bessie wants to seat the party in a contiguous block of $p$ empty seats. If this is possible, she seats them in the block whose starting position has the smallest index. If it is impossible, the party is turned away.\n2. A range $[a, b]$ is given ($1 \\le a \\le b \\le N$), and everybody in that range of seats leaves.\n\nPlease help Bessie count the total number of parties that are turned away over the course of the day.", "inputFormat": "- Line 1: Two space-separated integers $N$ and $M$.\n- Lines $2$ to $M+1$: Each line describes a single event, either of the form \"A p\" (a party of size $p$ arrives) or \"L a b\" (all cows in the range $[a, b]$ leave).", "outputFormat": "- Line 1: The number of parties that are turned away.", "hint": "There are 10 seats and 4 events. First, a party of 6 cows arrives. Then all cows in seats 2..4 depart. Next, a party of 5 arrives, followed by a party of 2.\n\nParty #3 is turned away. All other parties are seated.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13JAN] Seating G", "background": null, "description": "为了赚些外快，奶牛们在她们的牛棚里开了一家专门供应奶昔的餐厅。餐厅有一排 $N$ 个座位，编号从 $1$ 到 $N$（$1 \\le N \\le 5\\times 10^5$）。初始时，所有座位都是空的。\n\n在这一天中，会按顺序发生 $M$ 个事件（$1 \\le M \\le 3\\times 10^5$）。每个事件是以下两种之一：\n\n1.  一个规模为 $p$ 的团队到达（$1 \\le p \\le N$）。Bessie 希望将这个团队安排在一个连续的 $p$ 个空座位上。如果可能，她会将其安排在起始位置编号最小的那个连续空位区间。如果不可能，则该团队会被拒之门外。\n2.  给定一个范围 $[a, b]$（$1 \\le a \\le b \\le N$），该范围内的所有座位上的奶牛都会离开。\n\n请帮助 Bessie 统计这一天中被拒之门外的团队数量。", "inputFormat": "第 1 行：两个用空格隔开的整数 $N$ 和 $M$。\n\n第 $2$ 到 $M+1$ 行：每行描述一个事件，格式为 `A p`（表示一个规模为 $p$ 的团队到达）或 `L a b`（表示 $[a, b]$ 范围内的所有奶牛离开）。", "outputFormat": "第 $1$ 行：被拒之门外的团队数量。", "hint": "样例解释：\n\n共有 $10$ 个座位和 $4$ 个事件。首先，一个 $6$ 头奶牛的团队到达。然后座位 $2$ 到 $4$ 上的所有奶牛离开。接着，一个 $5$ 头奶牛的团队到达，之后是一个 $2$ 头奶牛的团队。\n\n团队 #3 被拒之门外。所有其他团队都得到了安排。", "locale": "zh-CN"}}}
{"pid": "P3072", "type": "P", "difficulty": 5, "samples": [["8 \n10005 200003 \n10005 200004 \n10008 200004 \n10005 200005 \n10006 200003 \n10007 200003 \n10007 200004 \n10006 200005 \n", "14 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "线段树", "USACO", "深度优先搜索 DFS"], "title": "[USACO13FEB] Perimeter S", "background": "征求翻译。如果你能提供翻译或者题意简述，请直接发讨论，感谢你的贡献。\n", "description": "Farmer John has arranged N hay bales (1 <= N <= 50,000) in the middle of one of his fields.  If we think of the field as a 1,000,000 x 1,000,000 grid of 1 x 1 square cells, each hay bale occupies exactly one of these cells (no two hay bales occupy the same cell, of course).\n\nFJ notices that his hay bales all form one large connected region, meaning that starting from any bale, one can reach any other bale by taking a series of steps either north, south, east, or west onto directly adjacent bales.  The connected region of hay bales may however contain \"holes\" -- empty regions that are completely surrounded by hay bales.\n\nPlease help FJ determine the perimeter of the region formed by his hay bales.  Note that holes do not contribute to the perimeter.\n", "inputFormat": "\\* Line 1: The number of hay bales, N.\n\n\\* Lines 2..1+N: Each line contains the (x,y) location of a single hay bale, where x and y are integers both in the range\n\n1..1,000,000. Position (1,1) is the lower-left cell in FJ's field, and position (1000000,1000000) is the upper-right cell.\n", "outputFormat": "\\* Line 1: The perimeter of the connected region of hay bales.\n", "hint": "The connected region consisting of hay bales looks like this:\n\nXX\nX XX\nXXX\n\nThe length of the perimeter of the connected region is 14 (for example, the left side of the region contributes a length of 3 to this total).  Observe that the hole in the middle does not contribute to this number.\n", "locale": "en", "translations": {"en": {"title": "[USACO13FEB] Perimeter S", "background": "征求翻译。如果你能提供翻译或者题意简述，请直接发讨论，感谢你的贡献。\n", "description": "Farmer John has arranged N hay bales (1 <= N <= 50,000) in the middle of one of his fields.  If we think of the field as a 1,000,000 x 1,000,000 grid of 1 x 1 square cells, each hay bale occupies exactly one of these cells (no two hay bales occupy the same cell, of course).\n\nFJ notices that his hay bales all form one large connected region, meaning that starting from any bale, one can reach any other bale by taking a series of steps either north, south, east, or west onto directly adjacent bales.  The connected region of hay bales may however contain \"holes\" -- empty regions that are completely surrounded by hay bales.\n\nPlease help FJ determine the perimeter of the region formed by his hay bales.  Note that holes do not contribute to the perimeter.\n", "inputFormat": "\\* Line 1: The number of hay bales, N.\n\n\\* Lines 2..1+N: Each line contains the (x,y) location of a single hay bale, where x and y are integers both in the range\n\n1..1,000,000. Position (1,1) is the lower-left cell in FJ's field, and position (1000000,1000000) is the upper-right cell.\n", "outputFormat": "\\* Line 1: The perimeter of the connected region of hay bales.\n", "hint": "The connected region consisting of hay bales looks like this:\n\nXX\nX XX\nXXX\n\nThe length of the perimeter of the connected region is 14 (for example, the left side of the region contributes a length of 3 to this total).  Observe that the hole in the middle does not contribute to this number.\n", "locale": "en"}, "zh-CN": {"title": "[USACO13FEB] Perimeter S", "background": null, "description": "农夫约翰已经在他的一片田地中间放置了 $n$ 个干草堆。我们可以认为这片田地是由 $10^6 \\times 10^6$ 个小方格组成的矩阵，每个干草堆占据一个小方格（当然，没有两堆干草占据同一个格子）。\n\nFJ 注意到他的干草堆组成了一个大的连通块，这就意味着从任何一个草堆走起，可以通过相邻草堆走若干步到达其他任意的草堆。这个连通块的内部可能包含若干个“洞”——被干草堆完全包围的空白格子。\n\n请帮助FJ计算整个连通块的周长。计算周长时请不要考虑“洞”。", "inputFormat": "第 $1$ 行：干草堆的数量 $n$。\n\n第 $2 \\sim n + 1$ 行：每行两个数，表示干草堆的坐标 $(x, y)$。", "outputFormat": "连通块的周长 $p$。", "hint": "对所有的数据，满足 $1 \\leq n \\leq 5 \\times 10^4$，$1 \\leq x, y \\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P3073", "type": "P", "difficulty": 4, "samples": [["5 \n0 0 0 3 3 \n0 0 0 0 3 \n0 9 9 3 3 \n9 9 9 3 3 \n9 9 9 9 3 \n", "3 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["搜索", "2013", "二分", "USACO", "并查集", "排序", "生成树"], "title": "[USACO13FEB] Tractor S", "background": "", "description": "One of Farmer John's fields is particularly hilly, and he wants to purchase a new tractor to drive around on it.  The field is described by an N x N grid of non-negative integer elevations (1 <= N <= 500).  A tractor capable of moving from one grid cell to an adjacent cell (one step north, east, south, or west) of height difference D costs exactly D units of money.\n\nFJ would like to pay enough for his tractor so that, starting from some grid cell in his field, he can successfully drive the tractor around to visit at least half the grid cells in the field (if the number of total cells in the field is odd, he wants to visit at least half the cells rounded up).  Please help him compute the minimum cost necessary for buying a tractor capable of this task.\n", "inputFormat": "\\* Line 1: The value of N.\n\n\\* Lines 2..1+N: Each line contains N space-separated non-negative integers (each at most 1 million) specifying a row of FJ's field.\n\n\n\n\n", "outputFormat": "\\* Line 1: The minimum cost of a tractor that is capable of driving around at least half of FJ's field.\n\n\n", "hint": "", "locale": "en", "translations": {"en": {"title": "[USACO13FEB] Tractor S", "background": "", "description": "One of Farmer John's fields is particularly hilly, and he wants to purchase a new tractor to drive around on it.  The field is described by an N x N grid of non-negative integer elevations (1 <= N <= 500).  A tractor capable of moving from one grid cell to an adjacent cell (one step north, east, south, or west) of height difference D costs exactly D units of money.\n\nFJ would like to pay enough for his tractor so that, starting from some grid cell in his field, he can successfully drive the tractor around to visit at least half the grid cells in the field (if the number of total cells in the field is odd, he wants to visit at least half the cells rounded up).  Please help him compute the minimum cost necessary for buying a tractor capable of this task.\n", "inputFormat": "\\* Line 1: The value of N.\n\n\\* Lines 2..1+N: Each line contains N space-separated non-negative integers (each at most 1 million) specifying a row of FJ's field.\n\n\n\n\n", "outputFormat": "\\* Line 1: The minimum cost of a tractor that is capable of driving around at least half of FJ's field.\n\n\n", "hint": "", "locale": "en"}, "zh-CN": {"title": "[USACO13FEB] Tractor S", "background": null, "description": "FJ 有块农田太崎岖了，他要买一辆新拖拉机才能在这里巡视。这块农田由 $N \\times N$ 个格子的非负整数表示高度（$1 \\le N \\le 500$）。拖拉机从当前格子走到相邻格子（东、南、西、北四个方向）的代价为高度差 $D$，则 FJ 驶过这两个格子的拖拉机最少也要值 $D$ 块钱。\n\nFJ 愿意花足够的钱买一辆新的拖拉机使得他能以最小的高度差走遍所有格子的一半（如果格子总数是奇数，那么一半的值为四舍五入的值）。因为 FJ 很懒，所以他找到你帮他编程计算他最小需要花多少钱买到符合这些要求的拖拉机。", "inputFormat": "第一行为一个整数 $N$。\n\n第 $2$ 到 $N+1$ 行每行包含 $N$ 个非负整数（不超过 $10^6$），表示当前格子的高度。", "outputFormat": "共一行，表示 FJ 买拖拉机要花的最小价钱。", "hint": null, "locale": "zh-CN"}}}
{"pid": "P3074", "type": "P", "difficulty": 3, "samples": [["3 1 \n10 \n5 \n6 \n3 2 \n", "11 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2013", "USACO", "枚举", "拓扑排序"], "title": "[USACO13FEB] Milk Scheduling S", "background": null, "description": "农夫约翰有 $N$ 头奶牛（$1 \\leq N \\leq 10^4$），编号为 $1$ 到 $N$。每头奶牛 $i$ 挤奶需要 $T_i$ 单位时间。由于牛棚的布局限制，某些奶牛必须在其他奶牛之前完成挤奶。例如，若奶牛 $A$ 必须在奶牛 $B$ 之前挤奶，则必须先将奶牛 $A$ 完全挤奶完成后，才能开始给奶牛 $B$ 挤奶。\n\n为了尽快完成挤奶，约翰雇用了大量工人，可以同时为任意多头奶牛挤奶。但由于存在先后顺序约束，整个挤奶过程仍需遵循特定顺序。请计算挤奶过程的最短总时间。", "inputFormat": "- 第一行：两个整数 $N$（奶牛数量）和 $M$（约束条件数量，$1 \\leq M \\leq 5\\times 10^4$）。\n- 第 $2$ 至 $N+1$ 行：每行一个整数 $T_i$，表示第 $i$ 头奶牛的挤奶时间（$1 \\leq T_i \\leq 10^5$）。\n- 第 $N+2$ 至 $N+M+1$ 行：每行两个整数 $A$ 和 $B$，表示奶牛 $A$ 必须完全挤奶后，才能开始挤奶牛 $B$。所有约束条件不会形成循环，保证有解。", "outputFormat": "- **一行**：输出完成所有挤奶的最短总时间。", "hint": "共有 $3$ 头奶牛，挤奶时间分别为 $10,5,6$。奶牛 $3$ 必须在奶牛 $2$ 之前完成挤奶。  \n\n初始时，奶牛 $1$ 和 $3$ 可同时挤奶（耗时 $10$ 和 $6$）。奶牛 $3$ 完成后，开始挤奶牛 $2$（总耗时 $6 + 5 = 11$）。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13FEB] Milk Scheduling S", "background": "", "description": "Farmer John has $N$ cows ($1 \\leq N \\leq 10^4$), numbered from $1$ to $N$. Milking cow $i$ takes $T_i$ units of time. Due to the barn layout, some cows must finish milking before others can start. For example, if cow $A$ must be milked before cow $B$, then cow $A$ must be completely milked before starting cow $B$.\n\nTo finish as quickly as possible, John has hired many workers and can milk any number of cows simultaneously. However, the precedence constraints must still be respected. Compute the minimum total time to finish all milking.", "inputFormat": "- The first line: two integers $N$ (number of cows) and $M$ (number of constraints, $1 \\leq M \\leq 5\\times 10^4$).\n- Lines $2$ through $N+1$: each line contains one integer $T_i$, the milking time of cow $i$ ($1 \\leq T_i \\leq 10^5$).\n- Lines $N+2$ through $N+M+1$: each line contains two integers $A$ and $B$, meaning cow $A$ must be completely milked before starting cow $B$. All constraints are acyclic, so a solution is guaranteed.", "outputFormat": "- One line: the minimum total time to complete all milking.", "hint": "There are $3$ cows with milking times $10, 5, 6$. Cow $3$ must finish before cow $2$.  \n\nInitially, cows $1$ and $3$ can be milked simultaneously (taking $10$ and $6$). After cow $3$ finishes, start cow $2$ (total time $6 + 5 = 11$).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13FEB] Milk Scheduling S", "background": null, "description": "农夫约翰有 $N$ 头奶牛（$1 \\leq N \\leq 10^4$），编号为 $1$ 到 $N$。每头奶牛 $i$ 挤奶需要 $T_i$ 单位时间。由于牛棚的布局限制，某些奶牛必须在其他奶牛之前完成挤奶。例如，若奶牛 $A$ 必须在奶牛 $B$ 之前挤奶，则必须先将奶牛 $A$ 完全挤奶完成后，才能开始给奶牛 $B$ 挤奶。\n\n为了尽快完成挤奶，约翰雇用了大量工人，可以同时为任意多头奶牛挤奶。但由于存在先后顺序约束，整个挤奶过程仍需遵循特定顺序。请计算挤奶过程的最短总时间。", "inputFormat": "- 第一行：两个整数 $N$（奶牛数量）和 $M$（约束条件数量，$1 \\leq M \\leq 5\\times 10^4$）。\n- 第 $2$ 至 $N+1$ 行：每行一个整数 $T_i$，表示第 $i$ 头奶牛的挤奶时间（$1 \\leq T_i \\leq 10^5$）。\n- 第 $N+2$ 至 $N+M+1$ 行：每行两个整数 $A$ 和 $B$，表示奶牛 $A$ 必须完全挤奶后，才能开始挤奶牛 $B$。所有约束条件不会形成循环，保证有解。", "outputFormat": "- **一行**：输出完成所有挤奶的最短总时间。", "hint": "共有 $3$ 头奶牛，挤奶时间分别为 $10,5,6$。奶牛 $3$ 必须在奶牛 $2$ 之前完成挤奶。  \n\n初始时，奶牛 $1$ 和 $3$ 可同时挤奶（耗时 $10$ 和 $6$）。奶牛 $3$ 完成后，开始挤奶牛 $2$（总耗时 $6 + 5 = 11$）。", "locale": "zh-CN"}}}
{"pid": "P3075", "type": "P", "difficulty": 5, "samples": [["3 2 \n1 1 2 \n1 1 2 \n2 2 4 \n", "4 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "USACO"], "title": "[USACO13FEB] Partitioning the Farm G", "background": "", "description": "Farmer John's farm is divided into an N x N square grid of pastures (2 <= N <= 15). Right now, there is a fence around the outside of the farm, but cows can move freely from pasture to pasture.\n\nFarmer John has decided to build fences to separate the cows from each other. Because of zoning laws, each fence must be a horizontal or vertical line going across the entire farm and fences cannot go through pastures. Farmer John only has enough money to build at most K fences (1 <= K <= 2N - 2).\n\nFarmer John wants to build the fences in order to minimize the size of the largest resulting group of cows (two cows are in the same group if they can reach each other without going through any fences). Given the current number of cows in each pasture, help Farmer John compute the size of the largest group of cows if he builds the fences optimally.\n\n给出一个n\\*n的矩阵，用k条水平或竖直直线分割矩阵，最小化区域和最大值。\n", "inputFormat": "\\* Line 1: Two integers, N and K\n\n\\* Lines 2..1+N: There are N numbers per line, describing the cows in each pasture for one row of the farm (there are at least 0 and at most 1000 cows in each pasture)\n", "outputFormat": "\\* Line 1: The minimum possible size of the largest group of cows.\n", "hint": "Farmer John should build fences between columns 2 and 3 and between rows 2 and 3, which creates 4 groups each with 4 cows.\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13FEB] Partitioning the Farm G", "background": "", "description": "Farmer John's farm is divided into an $N \\times N$ square grid of pastures ($2 \\le N \\le 15$). Right now, there is a fence around the outside of the farm, but cows can move freely from pasture to pasture.\n\nFarmer John has decided to build fences to separate the cows from each other. Because of zoning laws, each fence must be a horizontal or vertical line that goes across the entire farm, and fences cannot go through pastures. Farmer John only has enough money to build at most $K$ fences ($1 \\le K \\le 2N - 2$).\n\nFarmer John wants to build the fences to minimize the size of the largest resulting group of cows (two cows are in the same group if they can reach each other without going through any fences). Given the current number of cows in each pasture, help Farmer John compute the size of the largest group of cows if he builds the fences optimally.\n\nGiven an $N \\times N$ matrix, use $K$ horizontal or vertical lines to partition the matrix and minimize the maximum sum over all regions.", "inputFormat": "- Line 1: Two integers, $N$ and $K$.\n- Lines $2..1+N$: There are $N$ numbers per line, describing the cows in each pasture for one row of the farm (there are at least $0$ and at most $1000$ cows in each pasture).", "outputFormat": "- Line 1: The minimum possible size of the largest group of cows.", "hint": "Farmer John should build fences between columns 2 and 3 and between rows 2 and 3, which creates 4 groups each with 4 cows.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13FEB] Partitioning the Farm G", "background": "", "description": "Farmer John's farm is divided into an N x N square grid of pastures (2 <= N <= 15). Right now, there is a fence around the outside of the farm, but cows can move freely from pasture to pasture.\n\nFarmer John has decided to build fences to separate the cows from each other. Because of zoning laws, each fence must be a horizontal or vertical line going across the entire farm and fences cannot go through pastures. Farmer John only has enough money to build at most K fences (1 <= K <= 2N - 2).\n\nFarmer John wants to build the fences in order to minimize the size of the largest resulting group of cows (two cows are in the same group if they can reach each other without going through any fences). Given the current number of cows in each pasture, help Farmer John compute the size of the largest group of cows if he builds the fences optimally.\n\n给出一个n\\*n的矩阵，用k条水平或竖直直线分割矩阵，最小化区域和最大值。\n", "inputFormat": "\\* Line 1: Two integers, N and K\n\n\\* Lines 2..1+N: There are N numbers per line, describing the cows in each pasture for one row of the farm (there are at least 0 and at most 1000 cows in each pasture)\n", "outputFormat": "\\* Line 1: The minimum possible size of the largest group of cows.\n", "hint": "Farmer John should build fences between columns 2 and 3 and between rows 2 and 3, which creates 4 groups each with 4 cows.\n", "locale": "zh-CN"}}}
{"pid": "P3076", "type": "P", "difficulty": 5, "samples": [["2 10 \n0 9 \n6 5 \n", "12 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2013", "USACO"], "title": "[USACO13FEB] Taxi G", "background": null, "description": "Bessie is running a taxi service for the other cows on the farm.  The cows have been gathering at different locations along a fence of length M (1 <= M <= 1,000,000,000).  Unfortunately, they have grown bored with their current locations and each wish to go somewhere else along the fence.  Bessie must pick up each of her friends at their starting positions and drive them to their destinations.  Bessie's car is small so she can only transport one cow in her car at a time.  Cows can enter and exit the car instantaneously.\n\nTo save gas, Bessie would like to minimize the amount she has to drive.  Given the starting and ending positions of each of the N cows (1 <= N <= 100,000), determine the least amount of driving Bessie has to do.  Bessie realizes that to save the most gas she may need to occasionally drop a cow off at a position other than her destination.\n\nBessie starts at the leftmost point of the fence, position 0, and must finish her journey at the rightmost point on the fence, position M.\n\n长度为 $M(1 \\le M \\le 10^9) $ 的栅栏上，有 $N(1 \\le N \\le 10^5)$ 头牛需要坐车前往别的地方，起点和终点分别为 $a_i$ 和 $b_i(0 \\le a_i,b_i \\le M)$ 。现在一辆出租车从最左端 $0$ 出发，要运送完所有牛，最后到达最右端 $M$ ，求最小路程。出租车只能一次载一只牛。\n\n**注意：你可以中途将所载的牛放下去，再载别的牛，可以通过样例二辅助理解。**", "inputFormat": "\\* Line 1: N and M separated by a space.\n\n\\* Lines 2..1+N: The (i+1)th line contains two space separated\n\nintegers, s\\_i and t\\_i (0 <= s\\_i, t\\_i <= M), indicating the starting position and destination position of the ith cow.", "outputFormat": "\\* Line 1: A single integer indicating the total amount of driving Bessie must do.  Note that the result may not fit into a 32 bit integer.", "hint": "There are two cows waiting to be transported along a fence of length 10. The first cow wants to go from position 0 (where Bessie starts) to position 9.  The second cow wishes to go from position 6 to position 5.\n\n\nBessie picks up the first cow at position 0 and drives to position 6. There she drops off the first cow, delivers the second cow to her destination and returns to pick up the first cow.  She drops off the first cow and then drives the remainder of the way to the right side of the fence.", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13FEB] Taxi G", "background": "", "description": "Bessie runs a taxi service for the other cows along a fence of length $M$ ($1 \\le M \\le 10^9$). There are $N$ cows ($1 \\le N \\le 10^5$). Cow $i$ starts at position $a_i$ and wants to go to position $b_i$ ($0 \\le a_i, b_i \\le M$). Bessie starts at the leftmost point, position $0$, must finish at the rightmost point, position $M$, and wants to minimize the total distance she drives.\n\nBessie’s car can carry only one cow at a time. Cows can enter and exit the car instantaneously. To save gas, Bessie may drop a cow off at an intermediate position before reaching that cow’s destination.\n\nDetermine the minimum total distance Bessie must drive to complete all rides and end at position $M$.", "inputFormat": "- Line 1: $N$ and $M$ separated by a space.\n- Lines $2..1+N$: The $(i+1)$‑th line contains two space‑separated integers, $s\\_i$ and $t\\_i$ ($0 \\le s\\_i, t\\_i \\le M$), indicating the starting position and destination position of the $i$‑th cow.", "outputFormat": "- Line 1: A single integer indicating the total amount of driving Bessie must do. Note that the result may not fit into a 32‑bit integer.", "hint": "There are two cows waiting along a fence of length $10$. The first cow wants to go from position $0$ (where Bessie starts) to position $9$. The second cow wishes to go from position $6$ to position $5$.\n\nBessie picks up the first cow at position $0$ and drives to position $6$. There she drops off the first cow, delivers the second cow to her destination, and returns to pick up the first cow. She then drops off the first cow and drives the rest of the way to position $10$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13FEB] Taxi G", "background": null, "description": "Bessie is running a taxi service for the other cows on the farm.  The cows have been gathering at different locations along a fence of length M (1 <= M <= 1,000,000,000).  Unfortunately, they have grown bored with their current locations and each wish to go somewhere else along the fence.  Bessie must pick up each of her friends at their starting positions and drive them to their destinations.  Bessie's car is small so she can only transport one cow in her car at a time.  Cows can enter and exit the car instantaneously.\n\nTo save gas, Bessie would like to minimize the amount she has to drive.  Given the starting and ending positions of each of the N cows (1 <= N <= 100,000), determine the least amount of driving Bessie has to do.  Bessie realizes that to save the most gas she may need to occasionally drop a cow off at a position other than her destination.\n\nBessie starts at the leftmost point of the fence, position 0, and must finish her journey at the rightmost point on the fence, position M.\n\n长度为 $M(1 \\le M \\le 10^9) $ 的栅栏上，有 $N(1 \\le N \\le 10^5)$ 头牛需要坐车前往别的地方，起点和终点分别为 $a_i$ 和 $b_i(0 \\le a_i,b_i \\le M)$ 。现在一辆出租车从最左端 $0$ 出发，要运送完所有牛，最后到达最右端 $M$ ，求最小路程。出租车只能一次载一只牛。\n\n**注意：你可以中途将所载的牛放下去，再载别的牛，可以通过样例二辅助理解。**", "inputFormat": "\\* Line 1: N and M separated by a space.\n\n\\* Lines 2..1+N: The (i+1)th line contains two space separated\n\nintegers, s\\_i and t\\_i (0 <= s\\_i, t\\_i <= M), indicating the starting position and destination position of the ith cow.", "outputFormat": "\\* Line 1: A single integer indicating the total amount of driving Bessie must do.  Note that the result may not fit into a 32 bit integer.", "hint": "There are two cows waiting to be transported along a fence of length 10. The first cow wants to go from position 0 (where Bessie starts) to position 9.  The second cow wishes to go from position 6 to position 5.\n\n\nBessie picks up the first cow at position 0 and drives to position 6. There she drops off the first cow, delivers the second cow to her destination and returns to pick up the first cow.  She drops off the first cow and then drives the remainder of the way to the right side of the fence.", "locale": "zh-CN"}}}
{"pid": "P3077", "type": "P", "difficulty": 5, "samples": [["3 2 4 \n1 \n1 \n5 \n2 \n2 \n1 1 \n2 1 \n3 1 \n2 2 \n", "8 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2013", "USACO"], "title": "[USACO13FEB] Route Design G", "background": "", "description": "After escaping from the farm, Bessie has decided to start a travel agency along the Amoozon river.  There are several tourist sites located on both sides of the river, each with an integer value indicating how interesting the tourist site is.\n\nTourist sites are connected by routes that cross the river (i.e., there are no routes connecting a site with a site on the same side of the river).  Bessie wants to design a tour for her customers and needs your help.  A tour is a sequence of tourist sites with adjacent sites connected by a route. In order to best serve her customers she wants to find the route that maximizes the sum of the values associated with each visited site.\n\nHowever, Bessie may be running several of these tours at the same time.  Therefore it's important that no two routes on a tour\n\nintersect.  Two routes (a <-> x) and (b <-> y) intersect if and only if (a < b and y < x) or (b < a and x < y) or (a = b and x = y).\n\nHelp Bessie find the best tour for her agency.  Bessie may start and end at any site on either side of the Amoozon.\n\n河左岸有n个点，右岸有m个点，各有权值。有R条跨河的桥，求一条不交叉的路径使得点权和最大。\n\n(a <-> b) 与 (x <-> y) 交叉指(a < b and y < x) or (b < a and x < y) or (a = b and x = y)。\n", "inputFormat": "\\* Line 1: Three space separated integers N (1 <= N <= 40,000), M (1 <= M <= 40,000), and R (0 <= R <= 100,000) indicating\n\nrespectively the number of sites on the left side of the river, the number of sites on the right side of the river, and the number of routes.\n\n\\* Lines 2..N+1: The (i+1)th line has a single integer, L\\_i (0 <= L\\_i <= 40,000), indicating the value of the ith tourist site on the left side of the river.\n\n\\* Lines N+2..N+M+1: The (i+N+1)th line has a single integer, R\\_i (0 <= R\\_i <= 40,000), indicating the value of the ith tourist site on the right side of the river.\n\n\\* Lines N+M+2..N+M+R+1: Each line contains two space separated integers I (1 <= I <= N) and J (1 <= J <= M) indicating there is a bidirectional route between site I on the left side of the river and site J on the right side of the river.\n", "outputFormat": "\\* Line 1: A single integer indicating the maximum sum of values attainable on a tour.\n", "hint": "There are three sites on the left side of the Amoozon with values 1, 1, and 5.  There are two sites on the right side of the Amoozon with values 2 and 2.  There are four routes connecting sites on both sides of the river.\n\n\nThe optimal tour goes from site 1 on the left, site 1 on the right, and ends at site 3 on the left.  These respectively have values 1, 2, and 5 giving a total value of the trip of 8.\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13FEB] Route Design G", "background": "", "description": "After escaping from the farm, Bessie has decided to start a travel agency along the Amoozon river. There are several tourist sites located on both sides of the river, each with an integer value indicating how interesting the tourist site is.\n\nTourist sites are connected by routes that cross the river (i.e., there are no routes connecting a site with a site on the same side of the river). Bessie wants to design a tour for her customers and needs your help. A tour is a sequence of tourist sites with adjacent sites connected by a route. In order to best serve her customers, she wants to find the route that maximizes the sum of the values associated with each visited site.\n\nHowever, Bessie may be running several of these tours at the same time. Therefore, it is important that no two routes on a tour intersect. Two routes (a <-> x) and (b <-> y) intersect if and only if (a < b and y < x) or (b < a and x < y) or (a = b and x = y).\n\nHelp Bessie find the best tour for her agency. Bessie may start and end at any site on either side of the Amoozon.\n\nThere are N sites on the left bank and M on the right bank, each with a weight. There are R bridges that cross the river. Find a non-crossing path that maximizes the sum of the site weights.\n\n(a <-> b) and (x <-> y) intersect if and only if (a < b and y < x) or (b < a and x < y) or (a = b and x = y).", "inputFormat": "- Line 1: Three space-separated integers N (1 <= N <= 40,000), M (1 <= M <= 40,000), and R (0 <= R <= 100,000) indicating respectively the number of sites on the left side of the river, the number of sites on the right side of the river, and the number of routes.\n- Lines 2..N+1: The (i+1)-th line has a single integer, L_i (0 <= L_i <= 40,000), indicating the value of the i-th tourist site on the left side of the river.\n- Lines N+2..N+M+1: The (i+N+1)-th line has a single integer, R_i (0 <= R_i <= 40,000), indicating the value of the i-th tourist site on the right side of the river.\n- Lines N+M+2..N+M+R+1: Each line contains two space-separated integers I (1 <= I <= N) and J (1 <= J <= M) indicating there is a bidirectional route between site I on the left side of the river and site J on the right side of the river.", "outputFormat": "- Line 1: A single integer indicating the maximum sum of values attainable on a tour.", "hint": "There are three sites on the left side of the Amoozon with values 1, 1, and 5. There are two sites on the right side of the Amoozon with values 2 and 2. There are four routes connecting sites on both sides of the river.\n\nThe optimal tour goes from site 1 on the left, site 1 on the right, and ends at site 3 on the left. These respectively have values 1, 2, and 5, giving a total value of the trip of 8.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13FEB] Route Design G", "background": "", "description": "After escaping from the farm, Bessie has decided to start a travel agency along the Amoozon river.  There are several tourist sites located on both sides of the river, each with an integer value indicating how interesting the tourist site is.\n\nTourist sites are connected by routes that cross the river (i.e., there are no routes connecting a site with a site on the same side of the river).  Bessie wants to design a tour for her customers and needs your help.  A tour is a sequence of tourist sites with adjacent sites connected by a route. In order to best serve her customers she wants to find the route that maximizes the sum of the values associated with each visited site.\n\nHowever, Bessie may be running several of these tours at the same time.  Therefore it's important that no two routes on a tour\n\nintersect.  Two routes (a <-> x) and (b <-> y) intersect if and only if (a < b and y < x) or (b < a and x < y) or (a = b and x = y).\n\nHelp Bessie find the best tour for her agency.  Bessie may start and end at any site on either side of the Amoozon.\n\n河左岸有n个点，右岸有m个点，各有权值。有R条跨河的桥，求一条不交叉的路径使得点权和最大。\n\n(a <-> b) 与 (x <-> y) 交叉指(a < b and y < x) or (b < a and x < y) or (a = b and x = y)。\n", "inputFormat": "\\* Line 1: Three space separated integers N (1 <= N <= 40,000), M (1 <= M <= 40,000), and R (0 <= R <= 100,000) indicating\n\nrespectively the number of sites on the left side of the river, the number of sites on the right side of the river, and the number of routes.\n\n\\* Lines 2..N+1: The (i+1)th line has a single integer, L\\_i (0 <= L\\_i <= 40,000), indicating the value of the ith tourist site on the left side of the river.\n\n\\* Lines N+2..N+M+1: The (i+N+1)th line has a single integer, R\\_i (0 <= R\\_i <= 40,000), indicating the value of the ith tourist site on the right side of the river.\n\n\\* Lines N+M+2..N+M+R+1: Each line contains two space separated integers I (1 <= I <= N) and J (1 <= J <= M) indicating there is a bidirectional route between site I on the left side of the river and site J on the right side of the river.\n", "outputFormat": "\\* Line 1: A single integer indicating the maximum sum of values attainable on a tour.\n", "hint": "There are three sites on the left side of the Amoozon with values 1, 1, and 5.  There are two sites on the right side of the Amoozon with values 2 and 2.  There are four routes connecting sites on both sides of the river.\n\n\nThe optimal tour goes from site 1 on the left, site 1 on the right, and ends at site 3 on the left.  These respectively have values 1, 2, and 5 giving a total value of the trip of 8.\n", "locale": "zh-CN"}}}
{"pid": "P3078", "type": "P", "difficulty": 3, "samples": [["5 \n2 \n4 \n1 \n2 \n3 \n", "6 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["贪心", "2013", "USACO", "差分"], "title": "[USACO13MAR] Poker Hands S", "background": "", "description": "Bessie and her friends are playing a unique version of poker involving a deck with N (1 <= N <= 100,000) different ranks, conveniently numbered 1..N (a normal deck has N = 13). In this game, there is only one type of hand the cows can play: one may choose a card labeled i and a card labeled j and play one card of every value from i to j.  This type of hand is called a \"straight\".\n\nBessie's hand currently holds a\\_i cards of rank i (0 <= a\\_i <= 100000). Help her find the minimum number of hands she must play to get rid of all her cards.\n", "inputFormat": "\\* Line 1: The integer N.\n\n\\* Lines 2..1+N: Line i+1 contains the value of a\\_i.\n", "outputFormat": "\\* Line 1: The minimum number of straights Bessie must play to get rid of all her cards.\n", "hint": "Bessie can play a straight from 1 to 5, a straight from 1 to 2, a straight from 4 to 5, two straights from 2 to 2, and a straight from 5 to 5, for a total of 6 rounds necessary to get rid of all her cards.\n", "locale": "en", "translations": {"en": {"title": "[USACO13MAR] Poker Hands S", "background": "", "description": "Bessie and her friends are playing a unique version of poker involving a deck with N (1 <= N <= 100,000) different ranks, conveniently numbered 1..N (a normal deck has N = 13). In this game, there is only one type of hand the cows can play: one may choose a card labeled i and a card labeled j and play one card of every value from i to j.  This type of hand is called a \"straight\".\n\nBessie's hand currently holds a\\_i cards of rank i (0 <= a\\_i <= 100000). Help her find the minimum number of hands she must play to get rid of all her cards.\n", "inputFormat": "\\* Line 1: The integer N.\n\n\\* Lines 2..1+N: Line i+1 contains the value of a\\_i.\n", "outputFormat": "\\* Line 1: The minimum number of straights Bessie must play to get rid of all her cards.\n", "hint": "Bessie can play a straight from 1 to 5, a straight from 1 to 2, a straight from 4 to 5, two straights from 2 to 2, and a straight from 5 to 5, for a total of 6 rounds necessary to get rid of all her cards.\n", "locale": "en"}, "zh-CN": {"title": "[USACO13MAR] Poker Hands S", "background": "", "description": "Bessie 和她的朋友们正在玩一种独特的扑克牌游戏，这个游戏使用一副有 $N$ 种不同牌面（$1 \\leq N \\leq 100,000$）的牌组，牌面被方便地编号为 $1$ 到 $N$（普通的牌组有 $N = 13$）。在这个游戏中，牛们只能打出一种牌型：可以选择一张标号为 $i$ 的牌和一张标号为 $j$ 的牌，并打出从 $i$ 到 $j$ 的所有牌。这种牌型称为「顺子」。\n\nBessie 的手牌中当前持有 $a_i$ 张牌面为 $i$ 的牌（$0 \\leq a_i \\leq 100000$）。帮助她找到必须打出的最少顺子数目以清空她所有的牌。\n", "inputFormat": "\\* 第 1 行：整数 $N$。\n\n\\* 第 2 行到第 $1+N$ 行：第 $i+1$ 行包含 $a_i$ 的值。\n", "outputFormat": "\\* 第 1 行：Bessie 必须打出的最少顺子数目以清空她所有的牌。\n", "hint": "Bessie 可以打出一个从 1 到 5 的顺子，一个从 1 到 2 的顺子，一个从 4 到 5 的顺子，两个从 2 到 2 的顺子，以及一个从 5 到 5 的顺子，总共需要 6 轮来清空她所有的牌。\n（由 ChatGPT 4o 翻译）", "locale": "zh-CN"}}}
{"pid": "P3079", "type": "P", "difficulty": 5, "samples": [["3 \n2 0 8 9 \n10 2 11 3 \n4 2 6 5 \n", "2 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "USACO"], "title": "[USACO13MAR] Farm Painting S", "background": "", "description": "After several harsh winters, Farmer John has decided it is time to re-paint his farm.  The farm consists of N fenced enclosures (1 <= N <= 50,000), each of which can be described by a rectangle in the 2D plane whose sides are parallel to the x and y axes.  Enclosures may be contained within other enclosures, but no two fences intersect, so if two enclosures cover the same area of the 2D plane, one must be contained within the other.\n\nFJ figures that an enclosure contained within another enclosure will not be visible to the outside world, so he only wants to re-paint enclosures that are themselves not contained within any other enclosures.  Please help FJ determine the total number of enclosures he needs to paint.\n\n经过几个严冬，农场主约翰决定是重新粉刷农场的时候了。该农场由$n$个围栏围成（$1<=n=50000$），每一个都可以用二维平面上的矩形来描述，其两侧平行于x和y轴。牛圈可能包含在其他牛圈中，但没有两个栅栏相交（不同牛圈的边不会有接触）。因此如果两个牛圈覆盖了二维平面的同一区域，那么一个必须包含在另一个内。\n\nFJ知道，被其他牛圈包含的牛圈是不会被外面的人看到的。众所周知，FJ非常懒，所以他只想刷露在外面的牛圈，请帮助他求出总共需要刷的牛圈的个数。\n", "inputFormat": "\\* Line 1: The number of enclosures, N.\n\n\\* Lines 2..1+N: Each line describes an enclosure by 4 space-separated integers x1, y1, x2, and y2, where (x1,y1) is the lower-left corner of the enclosure and (x2,y2) is the upper-right corner. All coordinates are in the range 0..1,000,000.\n\n第一行 一个数，牛圈的总数$n$\n\n第二到$n+1$行 每行四个数，起点坐标$x1,y1$和终点坐标$x2,y2$\n", "outputFormat": "\\* Line 1: The number of enclosures that are not contained within other enclosures.\n\nFJ总共需要刷的牛圈的个数\n", "hint": "There are three enclosures.  The first has corners (2,0) and (8,9), and so on.\n\n\nEnclosure 3 is contained within enclosure 1, so there are two enclosures not contained within other enclosures.\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13MAR] Farm Painting S", "background": "", "description": "After several harsh winters, Farmer John has decided it is time to repaint his farm. The farm consists of $N$ fenced enclosures ($1 \\le N \\le 50000$), each represented by a rectangle in the 2D plane whose sides are parallel to the $x$ and $y$ axes. Enclosures may be nested (one fully contained within another), but no two fences intersect or touch. Therefore, if two enclosures cover the same region of the 2D plane, one must be contained within the other.\n\nFarmer John figures that an enclosure contained within another will not be visible from the outside world, so he only wants to repaint enclosures that are not contained within any other enclosures. Please determine the total number of enclosures he needs to paint.", "inputFormat": "- Line 1: The number of enclosures, $N$.\n- Lines 2..$N+1$: Each line describes an enclosure with four space-separated integers $x_1$, $y_1$, $x_2$, and $y_2$, where $(x_1, y_1)$ is the lower-left corner and $(x_2, y_2)$ is the upper-right corner. All coordinates are in the range 0..1,000,000.", "outputFormat": "- Line 1: The number of enclosures that are not contained within any other enclosures.", "hint": "There are three enclosures. The first has corners $(2, 0)$ and $(8, 9)$, and so on. Enclosure 3 is contained within enclosure 1, so there are two enclosures not contained within other enclosures.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13MAR] Farm Painting S", "background": "", "description": "After several harsh winters, Farmer John has decided it is time to re-paint his farm.  The farm consists of N fenced enclosures (1 <= N <= 50,000), each of which can be described by a rectangle in the 2D plane whose sides are parallel to the x and y axes.  Enclosures may be contained within other enclosures, but no two fences intersect, so if two enclosures cover the same area of the 2D plane, one must be contained within the other.\n\nFJ figures that an enclosure contained within another enclosure will not be visible to the outside world, so he only wants to re-paint enclosures that are themselves not contained within any other enclosures.  Please help FJ determine the total number of enclosures he needs to paint.\n\n经过几个严冬，农场主约翰决定是重新粉刷农场的时候了。该农场由$n$个围栏围成（$1<=n=50000$），每一个都可以用二维平面上的矩形来描述，其两侧平行于x和y轴。牛圈可能包含在其他牛圈中，但没有两个栅栏相交（不同牛圈的边不会有接触）。因此如果两个牛圈覆盖了二维平面的同一区域，那么一个必须包含在另一个内。\n\nFJ知道，被其他牛圈包含的牛圈是不会被外面的人看到的。众所周知，FJ非常懒，所以他只想刷露在外面的牛圈，请帮助他求出总共需要刷的牛圈的个数。\n", "inputFormat": "\\* Line 1: The number of enclosures, N.\n\n\\* Lines 2..1+N: Each line describes an enclosure by 4 space-separated integers x1, y1, x2, and y2, where (x1,y1) is the lower-left corner of the enclosure and (x2,y2) is the upper-right corner. All coordinates are in the range 0..1,000,000.\n\n第一行 一个数，牛圈的总数$n$\n\n第二到$n+1$行 每行四个数，起点坐标$x1,y1$和终点坐标$x2,y2$\n", "outputFormat": "\\* Line 1: The number of enclosures that are not contained within other enclosures.\n\nFJ总共需要刷的牛圈的个数\n", "hint": "There are three enclosures.  The first has corners (2,0) and (8,9), and so on.\n\n\nEnclosure 3 is contained within enclosure 1, so there are two enclosures not contained within other enclosures.\n", "locale": "zh-CN"}}}
{"pid": "P3080", "type": "P", "difficulty": 4, "samples": [["4 \n-2 \n-12 \n3 \n7 \n", "50 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["动态规划 DP", "2013", "USACO", "区间 DP"], "title": "[USACO13MAR] The Cow Run G/S", "background": null, "description": "农夫约翰的牧场围栏上出现了一个洞，有 $N$（$1\\le N\\le 1000$）只牛从这个洞逃出了牧场。这些出逃的奶牛很狂躁，他们在外面到处搞破坏，每分钟每头牛都会给约翰带来 $1$ 美元的损失。约翰必须用缰绳套住所有的牛，以停止他们搞破坏。\n\n幸运的是，奶牛们都在牧场外一条笔直的公路上，牧场的大门恰好位于公里的 $0$ 点处。约翰知道每头牛距离牧场大门的距离 $P_i$（$-5\\times10^5\\le P_i\\le5\\times 10^5, P_i\\ne0$）。\n\n约翰从农场大门出发，每分钟移动一个单位距离，每到一头牛所在的地点，约翰就会给它套上缰绳，套缰绳不花时间。按怎样的顺序去给牛套缰绳才能使约翰损失的费用最少？", "inputFormat": "第一行：奶牛的数目，$N$。\n\n第二至 $N+1$ 行：第 $i+1$ 行包含整数 $P_i$。", "outputFormat": "一行，表示约翰最小的损失。", "hint": "四头奶牛所在坐标分别为 $-2, -12, 3, 7$。\n\n\n最优的访问顺序为 $-2, 3, 7, -12$。 FJ 在第 $2$ 分钟到达了位置 $-2$，在这个位置的奶牛造成了 $2$ 美元的损失。\n\n然后他去了距离为 $5$ 的位置 $3$，这头牛总共造成了 $2+5 = 7$ 美元的损失。\n\n他又花了 $4$ 分钟到达了 $7$，这里造成了 $7 + 4 = 11 $ 美元的损失。\n\n最后他用 $19$ 分钟到达了位置 $-12$，损失了 $11 + 19 = 30$ 美元。\n\n总的损失为 $2 + 7 + 11 + 30 = 50$ 美元。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13MAR] The Cow Run G/S", "background": "", "description": "Farmer John forgot to repair a hole in his fence, and his $N$ cows ($1 \\le N \\le 1000$) escaped. Each minute a cow is outside the fence, she causes one dollar of damage. Farmer John must visit each cow to install a halter that calms the cow and stops the damage.\n\nThe cows are positioned at distinct locations along a straight road outside the farm. Farmer John knows the position $P_i$ of each cow $i$ (relative to the gate at position $0$ where he starts), with $-500000 \\le P_i \\le 500000$ and $P_i \\ne 0$.\n\nFarmer John moves at one unit of distance per minute, and installing a halter is instantaneous. Determine the order in which he should visit the cows to minimize the total damage, and compute the minimum total damage cost.", "inputFormat": "- Line 1: An integer $N$, the number of cows.\n- Lines $2..N+1$: Line $i+1$ contains an integer $P_i$.", "outputFormat": "- Line 1: A single integer, the minimum total damage cost.", "hint": "Four cows are at positions $-2$, $-12$, $3$, and $7$.\n\nThe optimal visit order is $-2$, $3$, $7$, $-12$. Farmer John arrives at position $-2$ in $2$ minutes, causing $2$ dollars of damage for that cow.\n\nHe then travels to position $3$ (distance $5$), where the cumulative damage for that cow is $2 + 5 = 7$ dollars.\n\nHe spends $4$ more minutes to get to $7$ at a cost of $7 + 4 = 11$ dollars for that cow.\n\nFinally, he spends $19$ minutes to go to $-12$ with a cost of $11 + 19 = 30$ dollars.\n\nThe total damage is $2 + 7 + 11 + 30 = 50$ dollars.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13MAR] The Cow Run G/S", "background": null, "description": "农夫约翰的牧场围栏上出现了一个洞，有 $N$（$1\\le N\\le 1000$）只牛从这个洞逃出了牧场。这些出逃的奶牛很狂躁，他们在外面到处搞破坏，每分钟每头牛都会给约翰带来 $1$ 美元的损失。约翰必须用缰绳套住所有的牛，以停止他们搞破坏。\n\n幸运的是，奶牛们都在牧场外一条笔直的公路上，牧场的大门恰好位于公里的 $0$ 点处。约翰知道每头牛距离牧场大门的距离 $P_i$（$-5\\times10^5\\le P_i\\le5\\times 10^5, P_i\\ne0$）。\n\n约翰从农场大门出发，每分钟移动一个单位距离，每到一头牛所在的地点，约翰就会给它套上缰绳，套缰绳不花时间。按怎样的顺序去给牛套缰绳才能使约翰损失的费用最少？", "inputFormat": "第一行：奶牛的数目，$N$。\n\n第二至 $N+1$ 行：第 $i+1$ 行包含整数 $P_i$。", "outputFormat": "一行，表示约翰最小的损失。", "hint": "四头奶牛所在坐标分别为 $-2, -12, 3, 7$。\n\n\n最优的访问顺序为 $-2, 3, 7, -12$。 FJ 在第 $2$ 分钟到达了位置 $-2$，在这个位置的奶牛造成了 $2$ 美元的损失。\n\n然后他去了距离为 $5$ 的位置 $3$，这头牛总共造成了 $2+5 = 7$ 美元的损失。\n\n他又花了 $4$ 分钟到达了 $7$，这里造成了 $7 + 4 = 11 $ 美元的损失。\n\n最后他用 $19$ 分钟到达了位置 $-12$，损失了 $11 + 19 = 30$ 美元。\n\n总的损失为 $2 + 7 + 11 + 30 = 50$ 美元。", "locale": "zh-CN"}}}
{"pid": "P3081", "type": "P", "difficulty": 6, "samples": [["4 \n0 0 5 6 \n1 0 2 1 \n7 2 8 5 \n3 0 7 7 \n", "3 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "USACO", "平衡树", "扫描线", "李超线段树"], "title": "[USACO13MAR] Hill Walk G", "background": "", "description": "There are N hills (1 <= N <= 100,000). Each hill takes the form of a line segment from (x1, y1) to (x2, y2) where x1 < x2 and y1 < y2. None of these segments intersect or touch, even at their endpoints, and furthermore, the first hill satisfies (x1, y1) = (0,0).\n\nBessie the cow starts at (0,0) on the first hill. Whenever Bessie is on a hill, she climbs up until she reaches the end. Then she jumps off the edge. If she lands on another hill, she continues walking on that hill; otherwise, she falls very far until she lands safely on a cushion of pillows at y = -infinity.  Each hill (x1, y1) -> (x2, y2) should be regarded as containing the point (x1, y1) but not containing the point (x2, y2), so that Bessie will land on the hill if she falls on it from above at a position with x = x1, but she will not land on the hill if she falls on it from above at x = x2.\n\nPlease count the total number of hills that Bessie touches at some point during her walk.\n\n有 $N(1 \\le N \\le 10 ^ 5)$座小山，每座山所占的区域用直线 $(x1, y1)$ 到 $(x2, y2)$ 来表示（$x1 < x2$ 并且 $y1 < y2$）。也就是说这些山用笛卡尔坐标系里的线段来表示，这些用于表示小山的线段都没有任何交点，第一座山的一端位于 $(x1, y1) = (0,0)$。\n\n\n贝西从 $(0,0)$ 开始在第一座山上漫步，一旦贝西到了一座山，她会一直走到该山的终点，这时，她会从边缘处起跳，如果她降落到另一座山上，她会继续在新的山上漫步。贝西起跳后沿 $y$ 轴方向下落，如果贝西不能降落到一座山上，她会一直下落，直到到达 $y$ 轴的负无穷大位置（$y = -\\infin$）。\n\n\n每座用线段表示的山 $(x1, y1) \\to (x2, y2)$ 包含 $(x1, y1)$ 这个点，但不包含 $(x2, y2)$，请计算出贝西总共在多少座山上漫步了。\n", "inputFormat": "\\* Line 1: The number of hills, N.\n\n\\* Lines 2..1+N: Line i+1 contains four integers (x1,y1,x2,y2)\n\ndescribing hill i.  Each integer is in the range\n\n0..1,000,000,000.\n", "outputFormat": "\\* Line 1: The number of hills Bessie touches on her journey.\n", "hint": "There are four hills.  The first hill runs from (0,0) to (5,6), and so on.\n\n\nBessie walks on hills #1, #4, and finally #3.\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13MAR] Hill Walk G", "background": "", "description": "There are $N$ hills ($1 \\le N \\le 10^5$). Each hill is a line segment from $(x1, y1)$ to $(x2, y2)$ with $x1 < x2$ and $y1 < y2$. No two segments intersect or touch, even at their endpoints. The first hill satisfies $(x1, y1) = (0, 0)$.\n\nBessie the cow starts at $(0, 0)$ on the first hill. While on a hill, she climbs up until she reaches the end, then she jumps off the edge. She falls straight down at a fixed $x$. If she lands on another hill, she continues walking on that hill; otherwise, she keeps falling until she lands safely at $y = -\\infty$.\n\nEach hill $(x1, y1) \\to (x2, y2)$ contains the point $(x1, y1)$ but does not contain the point $(x2, y2)$. Therefore, Bessie will land on the hill if she falls on it from above at $x = x1$, but she will not land on the hill if she falls on it from above at $x = x2$.\n\nPlease count the total number of hills that Bessie touches at some point during her walk.", "inputFormat": "* Line 1: The number of hills, $N$.\n* Lines 2..$1+N$: Line $i+1$ contains four integers $(x1, y1, x2, y2)$ describing hill $i$. Each integer is in the range $0..1{,}000{,}000{,}000$.", "outputFormat": "* Line 1: The number of hills Bessie touches on her journey.", "hint": "There are four hills. The first hill runs from $(0, 0)$ to $(5, 6)$, and so on. Bessie walks on hills #1, #4, and finally #3.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13MAR] Hill Walk G", "background": "", "description": "There are N hills (1 <= N <= 100,000). Each hill takes the form of a line segment from (x1, y1) to (x2, y2) where x1 < x2 and y1 < y2. None of these segments intersect or touch, even at their endpoints, and furthermore, the first hill satisfies (x1, y1) = (0,0).\n\nBessie the cow starts at (0,0) on the first hill. Whenever Bessie is on a hill, she climbs up until she reaches the end. Then she jumps off the edge. If she lands on another hill, she continues walking on that hill; otherwise, she falls very far until she lands safely on a cushion of pillows at y = -infinity.  Each hill (x1, y1) -> (x2, y2) should be regarded as containing the point (x1, y1) but not containing the point (x2, y2), so that Bessie will land on the hill if she falls on it from above at a position with x = x1, but she will not land on the hill if she falls on it from above at x = x2.\n\nPlease count the total number of hills that Bessie touches at some point during her walk.\n\n有 $N(1 \\le N \\le 10 ^ 5)$座小山，每座山所占的区域用直线 $(x1, y1)$ 到 $(x2, y2)$ 来表示（$x1 < x2$ 并且 $y1 < y2$）。也就是说这些山用笛卡尔坐标系里的线段来表示，这些用于表示小山的线段都没有任何交点，第一座山的一端位于 $(x1, y1) = (0,0)$。\n\n\n贝西从 $(0,0)$ 开始在第一座山上漫步，一旦贝西到了一座山，她会一直走到该山的终点，这时，她会从边缘处起跳，如果她降落到另一座山上，她会继续在新的山上漫步。贝西起跳后沿 $y$ 轴方向下落，如果贝西不能降落到一座山上，她会一直下落，直到到达 $y$ 轴的负无穷大位置（$y = -\\infin$）。\n\n\n每座用线段表示的山 $(x1, y1) \\to (x2, y2)$ 包含 $(x1, y1)$ 这个点，但不包含 $(x2, y2)$，请计算出贝西总共在多少座山上漫步了。\n", "inputFormat": "\\* Line 1: The number of hills, N.\n\n\\* Lines 2..1+N: Line i+1 contains four integers (x1,y1,x2,y2)\n\ndescribing hill i.  Each integer is in the range\n\n0..1,000,000,000.\n", "outputFormat": "\\* Line 1: The number of hills Bessie touches on her journey.\n", "hint": "There are four hills.  The first hill runs from (0,0) to (5,6), and so on.\n\n\nBessie walks on hills #1, #4, and finally #3.\n", "locale": "zh-CN"}}}
{"pid": "P3082", "type": "P", "difficulty": 5, "samples": [["ababaa \naba \n", "1 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["字符串", "动态规划 DP", "2013", "USACO", "AC 自动机", "KMP 算法"], "title": "[USACO13MAR] Necklace G", "background": null, "description": "奶牛贝茜将串起 $N$ 颗刻有字母的宝石，打算制作一条时尚项链。\n\n贝茜对自己的物品很爱惜，她不想与目前住在谷仓另一侧的另一头牛分享这条项链。那头牛的名字是一个长度为 $M$ 的字符串，贝茜需要确保这个长度为 $M$ 的字符串不会作为连续子字符串出现在她项链字符串的任何位置（否则那头牛可能会误以为这条项链是给她的）。贝茜决定移除项链中部分石头，以确保另一头奶牛的名字不会作为子串出现。请帮助贝茜确定必须移除的最小石头数量。", "inputFormat": "第 $1$ 行：描述贝茜初始项链的长度为 $N$ 的字符串；每个字符在 `a` 到 `z` 范围内。\n\n第 $2$ 行：描述牛棚中另一头奶牛的长度为 $M$ 的名字，同样由 `a` 到 `z` 的字符组成。", "outputFormat": "第 $1$ 行：从贝茜项链中移除最少数量的宝石，使其不再包含另一头奶牛名字的子串。", "hint": "至少 $20\\%$ 的测试用例中，$N\\le 20$。\n\n至少 $60\\%$ 的测试用例中，$N\\le 1000，M\\le 100$。\n\n所有测试用例中，$N\\le 10000，M\\le 1000$。\n\n所有测试用例中，$M\\le N$。\n\n样例解释：修改后的项链应为 `abbaa`。\n\n---\n\n更新于 $\\text{2022.7.29}$：新增一组 Hack 数据。\n\n本题中文题面由 [ChampionCyan](https://www.luogu.com.cn/user/1036180) 提供。", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13MAR] Necklace G", "background": "", "description": "Bessie the cow will string together $N$ lettered gems to make a fashionable necklace.\n\nBessie takes good care of her belongings and does not want to share this necklace with another cow currently living on the other side of the barn. That cow’s name is a string of length $M$, and Bessie needs to ensure that this length-$M$ string does not appear as a contiguous substring anywhere in her necklace string (otherwise that cow might mistakenly think the necklace is for her). Bessie decides to remove some gems from the necklace to ensure the other cow’s name does not appear as a substring. Please help Bessie determine the minimum number of gems that must be removed.", "inputFormat": "Line 1: A string of length $N$ describing Bessie’s initial necklace; each character is in the range `a` to `z`.\n\nLine 2: A string of length $M$ describing the other cow’s name in the barn, also consisting of characters `a` to `z`.", "outputFormat": "Line 1: The minimum number of gems to remove from Bessie’s necklace so that it no longer contains the other cow’s name as a substring.", "hint": "At least 20% of the test cases have $N \\le 20$.\n\nAt least 60% of the test cases have $N \\le 1000, M \\le 100$.\n\nFor all test cases, $N \\le 10000, M \\le 1000$.\n\nFor all test cases, $M \\le N$.\n\nSample explanation: The modified necklace should be `abbaa`.\n\nUpdated on $\\text{2022.7.29}$: An additional set of hack testdata was added.\n\nThe Chinese statement for this problem was provided by [ChampionCyan](https://www.luogu.com.cn/user/1036180).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13MAR] Necklace G", "background": null, "description": "奶牛贝茜将串起 $N$ 颗刻有字母的宝石，打算制作一条时尚项链。\n\n贝茜对自己的物品很爱惜，她不想与目前住在谷仓另一侧的另一头牛分享这条项链。那头牛的名字是一个长度为 $M$ 的字符串，贝茜需要确保这个长度为 $M$ 的字符串不会作为连续子字符串出现在她项链字符串的任何位置（否则那头牛可能会误以为这条项链是给她的）。贝茜决定移除项链中部分石头，以确保另一头奶牛的名字不会作为子串出现。请帮助贝茜确定必须移除的最小石头数量。", "inputFormat": "第 $1$ 行：描述贝茜初始项链的长度为 $N$ 的字符串；每个字符在 `a` 到 `z` 范围内。\n\n第 $2$ 行：描述牛棚中另一头奶牛的长度为 $M$ 的名字，同样由 `a` 到 `z` 的字符组成。", "outputFormat": "第 $1$ 行：从贝茜项链中移除最少数量的宝石，使其不再包含另一头奶牛名字的子串。", "hint": "至少 $20\\%$ 的测试用例中，$N\\le 20$。\n\n至少 $60\\%$ 的测试用例中，$N\\le 1000，M\\le 100$。\n\n所有测试用例中，$N\\le 10000，M\\le 1000$。\n\n所有测试用例中，$M\\le N$。\n\n样例解释：修改后的项链应为 `abbaa`。\n\n---\n\n更新于 $\\text{2022.7.29}$：新增一组 Hack 数据。\n\n本题中文题面由 [ChampionCyan](https://www.luogu.com.cn/user/1036180) 提供。", "locale": "zh-CN"}}}
{"pid": "P3083", "type": "P", "difficulty": 3, "samples": [["4 3 3 \n2 4 \n3 1 \n4 2 \n1 3 \nL L R \n", "4 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["模拟", "2013", "倍增", "USACO"], "title": "[USACO13OPEN] Luxury River Cruise S", "background": null, "description": "农民约翰正带着贝西和其他奶牛们进行一次巡航！他们航行在一个有 $N$ 个港口（$1 \\le N\\le10^3$）的河网中，港口编号为 $1,2,3\\dots N$，贝西从港口 $1$ 出发。每个港口恰好有两条流出的河道，直接通向其他港口，并且这些河道只能单向航行。  \n\n在每个港口，导游会选择走左边的河道或右边的河道继续向下游航行，但他们会一遍又一遍地重复相同的选择顺序。更具体地说，导游事先选定了一个长度为 $M$ 的方向序列（$1\\le M\\le500$），每个方向要么是左，要么是右，然后将这个序列重复 $K$ 次（$1\\le k\\le10^9$），请帮她计算出她最终会停在哪个港口。", "inputFormat": "第 $1$ 行：三个用空格隔开的整数 $N,M,K$。  \n\n第 $2$ 行到第 $N+1$ 行中，第 $i+1$ 行包含两个用空格隔开的整数，分别表示港口 $i$ 的左边河道和右边河道通向的港口编号。  \n\n第 $N+2$ 行：M 个用空格隔开的字符，每个字符是 L 或 R。L 表示选择左边的河道，R 表示选择右边的河道。", "outputFormat": "输出一个整数，表示贝西的巡航最终停靠的港口编号。", "hint": "样例中在执行完第一遍方向序列后，贝西到达港口 $2$（路径：$1 \\to 2 \\to 3 \\to 2$）；\n\n第二遍结束后，她到达港口 $3$（路径：$2 \\to 3 \\to 4 \\to 3$）；\n\n最终结束时，她到达港口 $4$（路径：$3 \\to 4 \\to 1 \\to 4$）。\n\n感谢 @[fkxr](https://www.luogu.com.cn/user/995934) 提供翻译", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Luxury River Cruise S", "background": "", "description": "Farmer John is taking Bessie and the other cows on a cruise! They are sailing on a river network with $N$ ports ($1 \\le N \\le 10^3$), numbered $1, 2, 3, \\dots, N$, and Bessie starts at port $1$. Each port has exactly two outgoing rivers that lead directly to other ports, and these rivers can be traversed only in one direction.\n\nAt each port, the guide chooses to take the left river or the right river to continue downstream, and they repeat the same sequence of choices over and over. More specifically, the guide has fixed in advance a direction sequence of length $M$ ($1 \\le M \\le 500$), each direction being either left or right, and then repeats this sequence $K$ times ($1 \\le K \\le 10^9$). Please help compute the port where Bessie finally stops.", "inputFormat": "Line $1$: Three space-separated integers $N$, $M$, $K$.\n\nLines $2$ to $N+1$: Line $i+1$ contains two space-separated integers, the indices of the ports reached by taking the left and right rivers from port $i$.\n\nLine $N+2$: $M$ space-separated characters, each either L or R. L means take the left river, and R means take the right river.", "outputFormat": "Output a single integer, the index of the port where Bessie’s cruise ends.", "hint": "In the sample, after finishing the first pass of the direction sequence, Bessie arrives at port $2$ (path: $1 \\to 2 \\to 3 \\to 2$)；  \nafter the second pass, she arrives at port $3$ (path: $2 \\to 3 \\to 4 \\to 3$)；  \nfinally, she ends at port $4$ (path: $3 \\to 4 \\to 1 \\to 4$).\n\nThanks to @[fkxr](https://www.luogu.com.cn/user/995934) for the translation.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Luxury River Cruise S", "background": null, "description": "农民约翰正带着贝西和其他奶牛们进行一次巡航！他们航行在一个有 $N$ 个港口（$1 \\le N\\le10^3$）的河网中，港口编号为 $1,2,3\\dots N$，贝西从港口 $1$ 出发。每个港口恰好有两条流出的河道，直接通向其他港口，并且这些河道只能单向航行。  \n\n在每个港口，导游会选择走左边的河道或右边的河道继续向下游航行，但他们会一遍又一遍地重复相同的选择顺序。更具体地说，导游事先选定了一个长度为 $M$ 的方向序列（$1\\le M\\le500$），每个方向要么是左，要么是右，然后将这个序列重复 $K$ 次（$1\\le k\\le10^9$），请帮她计算出她最终会停在哪个港口。", "inputFormat": "第 $1$ 行：三个用空格隔开的整数 $N,M,K$。  \n\n第 $2$ 行到第 $N+1$ 行中，第 $i+1$ 行包含两个用空格隔开的整数，分别表示港口 $i$ 的左边河道和右边河道通向的港口编号。  \n\n第 $N+2$ 行：M 个用空格隔开的字符，每个字符是 L 或 R。L 表示选择左边的河道，R 表示选择右边的河道。", "outputFormat": "输出一个整数，表示贝西的巡航最终停靠的港口编号。", "hint": "样例中在执行完第一遍方向序列后，贝西到达港口 $2$（路径：$1 \\to 2 \\to 3 \\to 2$）；\n\n第二遍结束后，她到达港口 $3$（路径：$2 \\to 3 \\to 4 \\to 3$）；\n\n最终结束时，她到达港口 $4$（路径：$3 \\to 4 \\to 1 \\to 4$）。\n\n感谢 @[fkxr](https://www.luogu.com.cn/user/995934) 提供翻译", "locale": "zh-CN"}}}
{"pid": "P3084", "type": "P", "difficulty": 6, "samples": [["5 3 \n1 4 \n2 5 \n3 4 \n", "1 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "线段树", "USACO", "单调队列", "差分约束", "队列"], "title": "[USACO13OPEN] Photo G", "background": "", "description": "Farmer John has decided to assemble a panoramic photo of a lineup of his $N$ cows ($1 \\le N \\le 2 \\times 10^5$), which, as always, are conveniently numbered from $1...N$. Accordingly, he snapped $M$ ($1 \\le M \\le 1 \\times 10^5$) photos, each covering a contiguous range of cows: photo $i$ contains cows $a_i$ through $b_i$ inclusive. The photos collectively may not necessarily cover every single cow.\n\nAfter taking his photos, FJ notices a very interesting phenomenon: each photo he took contains exactly one cow with spots! FJ was aware that he had some number of spotted cows in his herd, but he had never actually counted them. Based on his photos, please determine the maximum possible number of spotted cows that could exist in his herd. Output $-1$ if there is no possible assignment of spots to cows consistent with FJ's photographic results.", "inputFormat": "Line $1$: Two integers $N$ and $M$.\n\nLines $2...M+1$: Line $i+1$ contains $a_i$ and $b_i$.", "outputFormat": "Line $1$: The maximum possible number of spotted cows on FJ's farm, or $-1$ if there is no possible solution.", "hint": "There are $5$ cows and $3$ photos. The first photo contains cows $1$ through $4$, etc.\n\nFrom the last photo, we know that either cow $3$ or cow $4$ must be spotted. By choosing either of these, we satisfy the first two photos as well.", "locale": "en", "translations": {"en": {"title": "[USACO13OPEN] Photo G", "background": "", "description": "Farmer John has decided to assemble a panoramic photo of a lineup of his $N$ cows ($1 \\le N \\le 2 \\times 10^5$), which, as always, are conveniently numbered from $1...N$. Accordingly, he snapped $M$ ($1 \\le M \\le 1 \\times 10^5$) photos, each covering a contiguous range of cows: photo $i$ contains cows $a_i$ through $b_i$ inclusive. The photos collectively may not necessarily cover every single cow.\n\nAfter taking his photos, FJ notices a very interesting phenomenon: each photo he took contains exactly one cow with spots! FJ was aware that he had some number of spotted cows in his herd, but he had never actually counted them. Based on his photos, please determine the maximum possible number of spotted cows that could exist in his herd. Output $-1$ if there is no possible assignment of spots to cows consistent with FJ's photographic results.", "inputFormat": "Line $1$: Two integers $N$ and $M$.\n\nLines $2...M+1$: Line $i+1$ contains $a_i$ and $b_i$.", "outputFormat": "Line $1$: The maximum possible number of spotted cows on FJ's farm, or $-1$ if there is no possible solution.", "hint": "There are $5$ cows and $3$ photos. The first photo contains cows $1$ through $4$, etc.\n\nFrom the last photo, we know that either cow $3$ or cow $4$ must be spotted. By choosing either of these, we satisfy the first two photos as well.", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Photo G", "background": null, "description": "农夫约翰决定给站在一条线上的 $N$（$1 \\le N \\le 2 \\times 10^5$）头奶牛制作一张全家福照片，$N$ 头奶牛编号 $1$ 到 $N$。\n\n\n于是约翰拍摄了 $M$（$1 \\le M \\le 1 \\times 10^5$）张照片，每张照片都覆盖了连续一段奶牛：第 $i$ 张照片中包含了编号 $a_i$ 到 $b_i$ 的奶牛。但是这些照片不一定把每一只奶牛都拍了进去。\n\n\n在拍完照片后，约翰发现了一个有趣的事情：每张照片中都**有且仅有**一只身上带有斑点的奶牛。约翰意识到他的牛群中有一些斑点奶牛，但他从来没有统计过它们的数量。\n\n根据照片，请你帮约翰估算在他的牛群中最多可能有多少只斑点奶牛。如果无解，输出“-1”。", "inputFormat": "第一行包含两个整数 $N$ 和 $M$。\n\n接下来 $M$ 行，每行包含两个整数 $a_i$ 和 $b_i$。", "outputFormat": "输出斑点牛的最大可能数量。\n\n如果不存在可能解，则输出 $−1$。", "hint": "从最后一张照片可以得出奶牛 $3$ 或 $4$ 中，必须有一头斑点牛。\n\n无论哪头是斑点牛，都能使得前两张照片得到满足。", "locale": "zh-CN"}}}
{"pid": "P3085", "type": "P", "difficulty": 6, "samples": [["7 \n1 2 0 \n3 1 1 \n2 4 0 \n5 2 0 \n6 3 1 \n5 7 1 \n", "1 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "USACO", "点分治", "分治"], "title": "[USACO13OPEN] Yin and Yang G", "background": "", "description": "Farmer John is planning his morning walk on the farm. The farm is structured like a tree: it has $N$ barns $(1 \\le N \\le 100,000)$ which are connected by $N-1$ edges such that he can reach any barn from any other. Farmer John wants to choose a path which starts and ends at two different barns, such that he does not traverse any edge twice. He worries that his path might be a little long, so he also wants to choose another \"rest stop\" barn located on this path (which is distinct from the start or the end).\n\nAlong each edge is a herd of cows, either of the Charcolais (white hair) or the Angus (black hair) variety. Being the wise man that he is, Farmer John wants to balance the forces of yin and yang that weigh upon his walk. To do so, he wishes to choose a path such that he will pass by an equal number of Charcolais herds and Angus herds-- both on the way from the start to his rest stop, and on the way from the rest stop to the end.\n\nFarmer John is curious how many different paths he can choose that are \"balanced\" as described above.  Two paths are different only if they consist of different sets of edges; a path should be counted only once even if there are multiple valid \"rest stop\" locations along the path that make it balanced.\n\nPlease help determine the number of paths Farmer John can choose!", "inputFormat": "* Line 1: The integer N.\n\n* Lines $2$ ~ $N$: Three integers $a_i$, $b_i$ and $t_i$, representing the two barns that edge i connects. $t_i$ is $0$ if the herd along that edge is Charcolais, and $1$ if the  herd is Angus.", "outputFormat": "* Line $1$: One integer, representing the number of possible paths Farmer John can choose from.", "hint": "There are $7$ barns and $6$ edges. The edges from $1$ to $2$,$2$ to $4$ and $2$ to $5$ have Charcolais herds along them.\n\nNo path of length $2$ can have a suitable rest stop on it, so we can only consider paths of length $4$. The only path that has a suitable rest stop is $3-1-2-5-7$, with a rest stop at $2$.", "locale": "en", "translations": {"en": {"title": "[USACO13OPEN] Yin and Yang G", "background": "", "description": "Farmer John is planning his morning walk on the farm. The farm is structured like a tree: it has $N$ barns $(1 \\le N \\le 100,000)$ which are connected by $N-1$ edges such that he can reach any barn from any other. Farmer John wants to choose a path which starts and ends at two different barns, such that he does not traverse any edge twice. He worries that his path might be a little long, so he also wants to choose another \"rest stop\" barn located on this path (which is distinct from the start or the end).\n\nAlong each edge is a herd of cows, either of the Charcolais (white hair) or the Angus (black hair) variety. Being the wise man that he is, Farmer John wants to balance the forces of yin and yang that weigh upon his walk. To do so, he wishes to choose a path such that he will pass by an equal number of Charcolais herds and Angus herds-- both on the way from the start to his rest stop, and on the way from the rest stop to the end.\n\nFarmer John is curious how many different paths he can choose that are \"balanced\" as described above.  Two paths are different only if they consist of different sets of edges; a path should be counted only once even if there are multiple valid \"rest stop\" locations along the path that make it balanced.\n\nPlease help determine the number of paths Farmer John can choose!", "inputFormat": "* Line 1: The integer N.\n\n* Lines $2$ ~ $N$: Three integers $a_i$, $b_i$ and $t_i$, representing the two barns that edge i connects. $t_i$ is $0$ if the herd along that edge is Charcolais, and $1$ if the  herd is Angus.", "outputFormat": "* Line $1$: One integer, representing the number of possible paths Farmer John can choose from.", "hint": "There are $7$ barns and $6$ edges. The edges from $1$ to $2$,$2$ to $4$ and $2$ to $5$ have Charcolais herds along them.\n\nNo path of length $2$ can have a suitable rest stop on it, so we can only consider paths of length $4$. The only path that has a suitable rest stop is $3-1-2-5-7$, with a rest stop at $2$.", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Yin and Yang G", "background": null, "description": "农夫约翰正计划在农场进行晨间散步。农场结构如同一棵树：\n拥有 $N$ 个谷仓$（1 \\leq N \\leq 100,000）$，这些谷仓通过 $N-1$ 条边相连，\n使得他可以从任意谷仓到达其他任何谷仓。农夫约翰希望选择一条\n起始于不同谷仓的路径，且不重复经过任何边。他担心路径可能过长，\n因此还想在这条路径上选择一个\"休息站\"谷仓（该谷仓不能是起点或终点）。\n\n每条边上都有一群牛，要么是夏洛莱牛（白毛），要么是安格斯牛（黑毛）。\n作为智者，农夫约翰希望平衡影响他散步的阴阳之力。为此，他需要选择这样一条路径：\n从起点到休息站经过的夏洛莱牛群与安格斯牛群数量相等，\n同时从休息站到终点经过的两种牛群数量也相等。\n\n农夫约翰想知道有多少条符合上述\"平衡\"条件的路径可供选择。\n两条路径仅当其边集不同时才被视为不同；即使某条路径上有多个\n符合条件的休息站位置，该路径也应只被计数一次。\n\n请帮助计算农夫约翰可以选择的路径数量！", "inputFormat": "* 第 $1$ 行: 整数 $N$\n\n* 第 $2$ ~ $N$ 行: 三个整数 $a_i$ , $b_i$ 和 $t_i$，表示边 $i$ 连接的两个谷仓。\n\n* $t_i$为 $0$ 表示该边上的牛群是夏洛莱牛，$1$ 表示是安格斯牛。", "outputFormat": "* 第 $1$ 行: 一个整数，表示农夫约翰可以选择的可能路径数量", "hint": "共有 $7$ 个谷仓和 $6$ 条边。连接 $1-2$、$2-4$ 和 $2-5$ 的边上有夏洛莱牛群。\n\n\n长度为 $2$ 的路径上不可能存在合适的休息站，因此我们只能考虑\n长度为 $4$ 的路径。唯一符合条件的路径是 $3-1-2-5-7$，休息站设在 $2$ 号谷仓。", "locale": "zh-CN"}}}
{"pid": "P3086", "type": "P", "difficulty": 6, "samples": [["15 \n............... \n............... \n...*******..... \n.*....*.......* \n.*......*....*. \n....*.......... \n...*...****.... \n............... \n..**.*..*..*... \n...*...**.*.... \n*..*...*....... \n............... \n.....*..*...... \n.........*..... \n............... \n", "3888 \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "USACO", "枚举"], "title": "[USACO13OPEN] Figure Eight G", "background": "", "description": "Farmer John's cows recently received a large piece of marble, which, unfortunately, has a number of imperfections.  To describe these, we can represent the piece of marble by an N by N square grid (5 <= N <= 300), where the character '\\*' represents an imperfection and '.' represents a flawless section of the marble.\n\nThe cows want to carve a number \"8\" in this piece of marble (cows are quite fond of the number \"8\" since they have cloven hooves on each of their four feet, so they can effectively count up to 8 using their \"toes\"). However, the cows need your help to determine the optimally placed figure eight in the piece of marble.  Here are a few properties that define a valid figure eight:\n\n\\* A figure eight consists of two rectangles, a top and a bottom. \\* Both the top and bottom have at least one cell in their interior. \\* The bottom edge of the top rectangle is a (not necessarily proper) subset of the top edge of the bottom rectangle.\n\n\\* The figure eight can only be carved from flawless regions of the piece of marble.\n\nThe aesthetic score of a figure eight is equal to the product of the areas enclosed by its two rectangles.  The cows wish to maximize this score.\n\n```cpp\n............... \n............... \n...*******..... \n.*....*.......* \n.*......*....*. \n....*.......... \n...*...****.... \n............... \n..**.*..*..*... \n...*...**.*.... \n*..*...*....... \n............... \n.....*..*...... \n.........*..... \n............... \n```\nFor example, given this piece of marble \n\nthe optimally placed eight is:\n\n```cpp\n..88888888888.. \n..8.........8.. \n..8*******..8.. \n.*8...*.....8.* \n.*8.....*...8*. \n..8.*.......8.. \n..8*...****.8.. \n.88888888888888 \n.8**.*..*..*..8 \n.8.*...**.*...8 \n*8.*...*......8 \n.8............8 \n.8...*..*.....8 \n.8.......*....8 \n.88888888888888 \n```\nThe top rectangle has area 6x9=54, and the bottom rectangle has area 12x6=72.  Thus, its aesthetic score is 54x72=3888.\n\n农民约翰的奶牛最近收到了一大块大理石，不幸的是，它有许多缺陷.。为了描述这些，我们可以用n个正方形网格来表示一块大理石（5 < n = n = 300），其中字符“\\*”表示一个不完美和“。\n\n\n母牛想雕刻一个号码“8”在这一块大理石（牛很喜欢数字“8”，因为他们对他们的每一个四英尺，有偶蹄有效地数到8，用“脚”）。然而，奶牛需要你的帮助，以确定最佳放置在图八块大理石。这里有一些属性定义一个有效的数字八：\n\n\n图八包括两个矩形，一个顶部和一个底部。顶部和底部至少有一个单元在其内部。顶部矩形的底部边缘是底部矩形顶部边缘的一个（不一定是适当的）子集.。\n\n\n图八只能刻在大理石的无瑕疵区域。\n\n\n图八的美学得分等于其两个矩形所包围的区域的乘积.。奶牛希望最大限度地提高这一成绩。\n", "inputFormat": "\\* Line 1: A single integer N, indicating the side length of the marble.\n\n\\* Lines 2..N+1: Each line describes a row of the marble, and contains N characters which are each either '\\*' (an imperfection) or '.' (a flawless section).\n\n第1行：一个整数n，表示大理石的边长。\n\n\n行2 N + 1：每行描述了一排大理石，并包含n个字符，每个都是“\\*”（缺陷）或'.' (完整)。\n", "outputFormat": "\\* Line 1: The highest aesthetic score of any figure eight which doesn't use any imperfect squares of the marble.  If no figure eight is attainable, then output -1.\n", "hint": "顶部的矩形面积6X9 = 54，和底部矩形面积12x6 = 72。因此，它的审美评分54x72 = 3888。\n\n\n给出一个n×n的区域，其中有一些位置有瑕疵。现在要在没有瑕疵的位置中雕一个8”出来。\n\n\n“8”字的定义为两个矩形框，框内面积均大于0，且一个矩形框的底边是是另一个矩形框的顶边的子集。\n\n\n最大化两矩形框内面积的积。\n\n\n感谢 @3505515693qq 提供翻译\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13OPEN] Figure Eight G", "background": "", "description": "Farmer John's cows recently received a large piece of marble which, unfortunately, has a number of imperfections. We can represent the piece of marble by an N by N square grid (where 5 <= N <= 300), where the character '*' represents an imperfection and '.' represents a flawless section of the marble.\n\nThe cows want to carve a number \"8\" in this piece of marble. However, they need your help to determine the optimally placed figure eight. A valid figure eight is defined by the following properties:\n- A figure eight consists of two rectangles, a top one and a bottom one.\n- Both the top and bottom rectangles have at least one cell in their interior.\n- The bottom edge of the top rectangle is a (not necessarily proper) subset of the top edge of the bottom rectangle.\n- The figure eight can only be carved from flawless regions of the marble.\n\nThe aesthetic score of a figure eight is equal to the product of the areas enclosed by its two rectangles. The goal is to maximize this score.", "inputFormat": "- Line 1: A single integer N, the side length of the marble.\n- Lines 2..N+1: Each line describes a row of the marble and contains N characters, each either '*' (an imperfection) or '.' (a flawless section).", "outputFormat": "- Line 1: The highest aesthetic score of any figure eight that does not use any imperfect squares of the marble. If no figure eight is attainable, output -1.", "hint": "For example, given this piece of marble:\n```cpp\n............... \n............... \n...*******..... \n.*....*.......* \n.*......*....*. \n....*.......... \n...*...****.... \n............... \n..**.*..*..*... \n...*...**.*.... \n*..*...*....... \n............... \n.....*..*...... \n.........*..... \n............... \n```\nthe optimally placed eight is:\n```cpp\n..88888888888.. \n..8.........8.. \n..8*******..8.. \n.*8...*.....8.* \n.*8.....*...8*. \n..8.*.......8.. \n..8*...****.8.. \n.88888888888888 \n.8**.*..*..*..8 \n.8.*...**.*...8 \n*8.*...*......8 \n.8............8 \n.8...*..*.....8 \n.8.......*....8 \n.88888888888888 \n```\nThe top rectangle has area $6 \\times 9 = 54$, and the bottom rectangle has area $12 \\times 6 = 72$. Thus, its aesthetic score is $54 \\times 72 = 3888$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13OPEN] Figure Eight G", "background": "", "description": "Farmer John's cows recently received a large piece of marble, which, unfortunately, has a number of imperfections.  To describe these, we can represent the piece of marble by an N by N square grid (5 <= N <= 300), where the character '\\*' represents an imperfection and '.' represents a flawless section of the marble.\n\nThe cows want to carve a number \"8\" in this piece of marble (cows are quite fond of the number \"8\" since they have cloven hooves on each of their four feet, so they can effectively count up to 8 using their \"toes\"). However, the cows need your help to determine the optimally placed figure eight in the piece of marble.  Here are a few properties that define a valid figure eight:\n\n\\* A figure eight consists of two rectangles, a top and a bottom. \\* Both the top and bottom have at least one cell in their interior. \\* The bottom edge of the top rectangle is a (not necessarily proper) subset of the top edge of the bottom rectangle.\n\n\\* The figure eight can only be carved from flawless regions of the piece of marble.\n\nThe aesthetic score of a figure eight is equal to the product of the areas enclosed by its two rectangles.  The cows wish to maximize this score.\n\n```cpp\n............... \n............... \n...*******..... \n.*....*.......* \n.*......*....*. \n....*.......... \n...*...****.... \n............... \n..**.*..*..*... \n...*...**.*.... \n*..*...*....... \n............... \n.....*..*...... \n.........*..... \n............... \n```\nFor example, given this piece of marble \n\nthe optimally placed eight is:\n\n```cpp\n..88888888888.. \n..8.........8.. \n..8*******..8.. \n.*8...*.....8.* \n.*8.....*...8*. \n..8.*.......8.. \n..8*...****.8.. \n.88888888888888 \n.8**.*..*..*..8 \n.8.*...**.*...8 \n*8.*...*......8 \n.8............8 \n.8...*..*.....8 \n.8.......*....8 \n.88888888888888 \n```\nThe top rectangle has area 6x9=54, and the bottom rectangle has area 12x6=72.  Thus, its aesthetic score is 54x72=3888.\n\n农民约翰的奶牛最近收到了一大块大理石，不幸的是，它有许多缺陷.。为了描述这些，我们可以用n个正方形网格来表示一块大理石（5 < n = n = 300），其中字符“\\*”表示一个不完美和“。\n\n\n母牛想雕刻一个号码“8”在这一块大理石（牛很喜欢数字“8”，因为他们对他们的每一个四英尺，有偶蹄有效地数到8，用“脚”）。然而，奶牛需要你的帮助，以确定最佳放置在图八块大理石。这里有一些属性定义一个有效的数字八：\n\n\n图八包括两个矩形，一个顶部和一个底部。顶部和底部至少有一个单元在其内部。顶部矩形的底部边缘是底部矩形顶部边缘的一个（不一定是适当的）子集.。\n\n\n图八只能刻在大理石的无瑕疵区域。\n\n\n图八的美学得分等于其两个矩形所包围的区域的乘积.。奶牛希望最大限度地提高这一成绩。\n", "inputFormat": "\\* Line 1: A single integer N, indicating the side length of the marble.\n\n\\* Lines 2..N+1: Each line describes a row of the marble, and contains N characters which are each either '\\*' (an imperfection) or '.' (a flawless section).\n\n第1行：一个整数n，表示大理石的边长。\n\n\n行2 N + 1：每行描述了一排大理石，并包含n个字符，每个都是“\\*”（缺陷）或'.' (完整)。\n", "outputFormat": "\\* Line 1: The highest aesthetic score of any figure eight which doesn't use any imperfect squares of the marble.  If no figure eight is attainable, then output -1.\n", "hint": "顶部的矩形面积6X9 = 54，和底部矩形面积12x6 = 72。因此，它的审美评分54x72 = 3888。\n\n\n给出一个n×n的区域，其中有一些位置有瑕疵。现在要在没有瑕疵的位置中雕一个8”出来。\n\n\n“8”字的定义为两个矩形框，框内面积均大于0，且一个矩形框的底边是是另一个矩形框的顶边的子集。\n\n\n最大化两矩形框内面积的积。\n\n\n感谢 @3505515693qq 提供翻译\n", "locale": "zh-CN"}}}
{"pid": "P3087", "type": "P", "difficulty": 5, "samples": [["3 7 \nFarmer John has no large brown noisy cow. \nFarmer John has no small white silent cow. \nFarmer John has no large spotted noisy cow. \n", "small spotted noisy \n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2013", "USACO", "进制"], "title": "[USACO13NOV] Farmer John has no Large Brown Cow S", "background": "", "description": "Farmer John likes to collect as many different types of cows as possible. In fact, he has collected almost every conceivable type of cow, except for a few, written on a short list of N lines (1 <= N <= 100).  The list looks like this:\n\nFarmer John has no large brown noisy cow.\n\nFarmer John has no small white silent cow.\n\nFarmer John has no large spotted noisy cow.\n\nEach item in the list describes a missing cow in terms of a short list of adjectives, and each item contains the same number of adjectives (3, in this case).  The number of adjectives per line will be in the range 2..30.\n\nFarmer John has a cow fitting every other possible adjective combination not on his list.  In this example, the first adjective can be large or small, the second can be brown, white, or spotted, and the third can be noisy or silent.  This gives 2 x 3 x 2 = 12 different combinations, and Farmer John has a cow fitting each one, except for those specifically mentioned on his list.  In this example, a large, white, noisy cow is one of his 9 cows.  Farmer John is certain that he has at most 1,000,000,000 cows.\n\nIf Farmer John lists his cows in alphabetical order, what is the Kth cow in this list?\n\nPartial credit opportunities: In the 10 test cases for this problem, cases 1..4 involve at most two adjectives per line in Farmer John's list.  In cases 1..6, each adjective will have exactly two possible settings (in all other cases, each adjective will have between 1 and N possible settings).\n\nFJ喜欢收集不同的奶牛，他将未有的N(1 <= N <= 100)头奶牛用如下的形式描述：\n\n\nFarmer John has no large brown noisy cow.\n\n\nFarmer John has no small white silent cow.\n\n\nFarmer John has no large spotted noisy cow.\n\n\n每一行，描述一头FJ未有的牛。\n\n\n每一行都含有相同个数的形容词，每行的形容词个数范围为2..30。\n\n\n在以上给出的列表中，每行共有3个形容词，第一个形容词有两种（large和small），第二个形容词有3种（brown,white和spotted），第三个形容词有2种（noisy和silent）。\n\n\n所以共可以组成12头不同的奶牛，除了列表给出的3头，他已经拥有了其他9头。FJ最多有1,000,000,000头牛。\n\n\n若将FJ已经拥有的牛按形容词的字典序排序，请问他已有的第K头牛是哪一头。\n", "inputFormat": "\\* Line 1: Two integers, N and K.\n\n\\* Lines 2..1+N: Each line is a sentence like \"Farmer John has no large spotted noisy cow.\".  Each adjective in the sentence will be a string of at most 10 lowercase letters.  You know you have reached the end of the sentence when you see the string \"cow.\" ending with a period.\n", "outputFormat": "\\* Line 1: The description of the Kth cow on the farm.\n", "hint": "The input matches the sample given in the problem statement above.  Farmer John would like to know the 7th cow on his farm, when listed in alphabetical order.\n\n\nFarmer john has cows matching the following descriptions, listed in alphabetical order:\n\nlarge brown silent\n\nlarge spotted silent\n\nlarge white noisy\n\nlarge white silent\n\nsmall brown noisy\n\nsmall brown silent\n\nsmall spotted noisy\n\nsmall spotted silent\n\nsmall white noisy\n\nThe 7th cow in this list is described as \"small spotted noisy\".\n", "locale": "zh-CN", "translations": {"en": {"title": "[USACO13NOV] Farmer John has no Large Brown Cow S", "background": "", "description": "Farmer John likes to collect as many different types of cows as possible. In fact, he has collected almost every possible type of cow, except for a few, written on a short list of N lines (1 <= N <= 100). The list looks like this:\nFarmer John has no large brown noisy cow.\nFarmer John has no small white silent cow.\nFarmer John has no large spotted noisy cow.\nEach item in the list describes a missing cow using a short list of adjectives, and each item contains the same number of adjectives (3 in this case). The number of adjectives per line will be in the range 2..30.\nFarmer John has a cow matching every other possible adjective combination not on his list. In this example, the first adjective can be large or small, the second can be brown, white, or spotted, and the third can be noisy or silent. This gives 2 x 3 x 2 = 12 different combinations, and Farmer John has a cow for each one, except for those specifically mentioned on his list. In this example, a large white noisy cow is one of his 9 cows. Farmer John is certain that he has at most 1,000,000,000 cows.\nIf Farmer John lists his cows in alphabetical order, what is the K-th cow in this list?\nPartial credit opportunities: In the 10 test cases for this problem, cases 1..4 involve at most two adjectives per line in Farmer John’s list. In cases 1..6, each adjective will have exactly two possible settings (in all other cases, each adjective will have between 1 and N possible settings).", "inputFormat": "* Line 1: Two integers, N and K.\n* Lines 2..1+N: Each line is a sentence like \"Farmer John has no large spotted noisy cow.\". Each adjective in the sentence is a string of at most 10 lowercase letters. You know you have reached the end of the sentence when you see the string \"cow.\" ending with a period.", "outputFormat": "* Line 1: The description of the K-th cow on the farm.", "hint": "The input matches the sample given in the problem statement above. Farmer John would like to know the 7th cow on his farm, when listed in alphabetical order.\nFarmer John has cows matching the following descriptions, listed in alphabetical order:\nlarge brown silent\nlarge spotted silent\nlarge white noisy\nlarge white silent\nsmall brown noisy\nsmall brown silent\nsmall spotted noisy\nsmall spotted silent\nsmall white noisy\nThe 7th cow in this list is described as \"small spotted noisy\".\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[USACO13NOV] Farmer John has no Large Brown Cow S", "background": "", "description": "Farmer John likes to collect as many different types of cows as possible. In fact, he has collected almost every conceivable type of cow, except for a few, written on a short list of N lines (1 <= N <= 100).  The list looks like this:\n\nFarmer John has no large brown noisy cow.\n\nFarmer John has no small white silent cow.\n\nFarmer John has no large spotted noisy cow.\n\nEach item in the list describes a missing cow in terms of a short list of adjectives, and each item contains the same number of adjectives (3, in this case).  The number of adjectives per line will be in the range 2..30.\n\nFarmer John has a cow fitting every other possible adjective combination not on his list.  In this example, the first adjective can be large or small, the second can be brown, white, or spotted, and the third can be noisy or silent.  This gives 2 x 3 x 2 = 12 different combinations, and Farmer John has a cow fitting each one, except for those specifically mentioned on his list.  In this example, a large, white, noisy cow is one of his 9 cows.  Farmer John is certain that he has at most 1,000,000,000 cows.\n\nIf Farmer John lists his cows in alphabetical order, what is the Kth cow in this list?\n\nPartial credit opportunities: In the 10 test cases for this problem, cases 1..4 involve at most two adjectives per line in Farmer John's list.  In cases 1..6, each adjective will have exactly two possible settings (in all other cases, each adjective will have between 1 and N possible settings).\n\nFJ喜欢收集不同的奶牛，他将未有的N(1 <= N <= 100)头奶牛用如下的形式描述：\n\n\nFarmer John has no large brown noisy cow.\n\n\nFarmer John has no small white silent cow.\n\n\nFarmer John has no large spotted noisy cow.\n\n\n每一行，描述一头FJ未有的牛。\n\n\n每一行都含有相同个数的形容词，每行的形容词个数范围为2..30。\n\n\n在以上给出的列表中，每行共有3个形容词，第一个形容词有两种（large和small），第二个形容词有3种（brown,white和spotted），第三个形容词有2种（noisy和silent）。\n\n\n所以共可以组成12头不同的奶牛，除了列表给出的3头，他已经拥有了其他9头。FJ最多有1,000,000,000头牛。\n\n\n若将FJ已经拥有的牛按形容词的字典序排序，请问他已有的第K头牛是哪一头。\n", "inputFormat": "\\* Line 1: Two integers, N and K.\n\n\\* Lines 2..1+N: Each line is a sentence like \"Farmer John has no large spotted noisy cow.\".  Each adjective in the sentence will be a string of at most 10 lowercase letters.  You know you have reached the end of the sentence when you see the string \"cow.\" ending with a period.\n", "outputFormat": "\\* Line 1: The description of the Kth cow on the farm.\n", "hint": "The input matches the sample given in the problem statement above.  Farmer John would like to know the 7th cow on his farm, when listed in alphabetical order.\n\n\nFarmer john has cows matching the following descriptions, listed in alphabetical order:\n\nlarge brown silent\n\nlarge spotted silent\n\nlarge white noisy\n\nlarge white silent\n\nsmall brown noisy\n\nsmall brown silent\n\nsmall spotted noisy\n\nsmall spotted silent\n\nsmall white noisy\n\nThe 7th cow in this list is described as \"small spotted noisy\".\n", "locale": "zh-CN"}}}
