{"pid": "P10593", "type": "P", "difficulty": 4, "samples": [["5 2\nXXXXX", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化"], "title": "BZOJ2958 序列染色", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "给出一个长度为 $n$，由 $\\tt B,W,X$ 三种字符组成的字符串 $S$，你需要把每一个 $\\tt X$ 染成 $\\tt B$ 或 $\\tt W$ 中的一个。\n\n对于给出的 $k$，问由多少种染色方式，使得存在整数 $a,b,c,d$ 满足：\n- $1\\leq a\\leq b<c\\leq d\\leq n$；\n- $b=a+k-1$，$d=c+k-1$;\n- $S_a=S_{a+1}=\\dots=S_b=\\tt B$；\n- $S_c=S_{c+1}=\\dots=S_d=\\tt W$；\n\n由于方法可能很多，你只需输出最后的答案对 $10^9+7$ 取模的结果。", "inputFormat": "第一行输入两个正整数 $n,k$；\n\n第二行输出一个长度为 $n$ 的字符串 $S$。", "outputFormat": "输出一行，包含一个整数，表示答案。", "hint": "对于 $20\\%$ 的数据，$1\\leq n\\leq 20$；\n\n对于 $50\\%$ 的数据，$1\\leq n\\leq 2000$；\n\n对于 $100\\%$ 的数据，$1\\leq n,k\\leq 10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ2958 序列染色", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "给出一个长度为 $n$，由 $\\tt B,W,X$ 三种字符组成的字符串 $S$，你需要把每一个 $\\tt X$ 染成 $\\tt B$ 或 $\\tt W$ 中的一个。\n\n对于给出的 $k$，问由多少种染色方式，使得存在整数 $a,b,c,d$ 满足：\n- $1\\leq a\\leq b<c\\leq d\\leq n$；\n- $b=a+k-1$，$d=c+k-1$;\n- $S_a=S_{a+1}=\\dots=S_b=\\tt B$；\n- $S_c=S_{c+1}=\\dots=S_d=\\tt W$；\n\n由于方法可能很多，你只需输出最后的答案对 $10^9+7$ 取模的结果。", "inputFormat": "第一行输入两个正整数 $n,k$；\n\n第二行输出一个长度为 $n$ 的字符串 $S$。", "outputFormat": "输出一行，包含一个整数，表示答案。", "hint": "对于 $20\\%$ 的数据，$1\\leq n\\leq 20$；\n\n对于 $50\\%$ 的数据，$1\\leq n\\leq 2000$；\n\n对于 $100\\%$ 的数据，$1\\leq n,k\\leq 10^6$。", "locale": "zh-CN"}}}
{"pid": "P10594", "type": "P", "difficulty": 6, "samples": [["1\n4 2", "32"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "中国剩余定理 CRT", "Lucas 定理"], "title": "BZOJ2445 最大团", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "一个 $n$ 个点的无向图被叫做是一个 symmetric labeled cliquer，当且仅当该图的任意一个极大连通子图拥有相同的点数，并且任意一个极大连通子图都是完全图。\n\n现有 $m$ 种颜色和所有含有 $n$ 个点且节点有标号的 symmetric labeled cliquer。我们需要将每个 symmetric labeled cliquer 都染上一种颜色，两个不同的 symmetric labeled cliquer 可以染相同颜色，求方案数对 $10^9-401$ 取模的结果。", "inputFormat": "第一行读入一个正整数 $T$，表示数据组数。\n\n接下来每行包含两个正整数 $n,m$，含义如题所述。", "outputFormat": "输出包含 $T$ 行，每行输出答案。", "hint": "数据保证，$1\\leq T\\leq 2$，$1\\leq n,m\\leq 2\\times 10^9$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ2445 最大团", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "一个 $n$ 个点的无向图被叫做是一个 symmetric labeled cliquer，当且仅当该图的任意一个极大连通子图拥有相同的点数，并且任意一个极大连通子图都是完全图。\n\n现有 $m$ 种颜色和所有含有 $n$ 个点且节点有标号的 symmetric labeled cliquer。我们需要将每个 symmetric labeled cliquer 都染上一种颜色，两个不同的 symmetric labeled cliquer 可以染相同颜色，求方案数对 $10^9-401$ 取模的结果。", "inputFormat": "第一行读入一个正整数 $T$，表示数据组数。\n\n接下来每行包含两个正整数 $n,m$，含义如题所述。", "outputFormat": "输出包含 $T$ 行，每行输出答案。", "hint": "数据保证，$1\\leq T\\leq 2$，$1\\leq n,m\\leq 2\\times 10^9$。", "locale": "zh-CN"}}}
{"pid": "P10595", "type": "P", "difficulty": 7, "samples": [["3\n3 3\n1 2 3\n5 4\n1 3 5 6 7\n10 3\n1 2 3 4 5 6 7 8 9 10", "Case #1:\n6: 1\n\nCase #2:\n15: 1\n16: 1\n17: 1\n19: 1\n21: 1\n\nCase #3:\n6: 1\n7: 1\n8: 2\n9: 3\n10: 4\n11: 5\n12: 7\n13: 8\n14: 9\n15: 10\n16: 10\n17: 10\n18: 10\n19: 9\n20: 8\n21: 7\n22: 5\n23: 4\n24: 3\n25: 2\n26: 1\n27: 1"]], "limits": {"time": [10000], "memory": [524288]}, "tags": ["2011", "上海", "O2优化", "生成函数", "快速傅里叶变换 FFT", "ICPC"], "title": "[ICPC-Shanghai 2011] Xavier is Learning to Count", "background": null, "description": "Xavier, a 9-year-old student, loves playing many kinds of puzzles. One of his favourites is the following:\n\nXerier, his classmate, has made many cards. She writes down a single positive number on each of them. No numbers written on different cards are the same. After that she writes down an equation, whose right side is a single positive number chosen by her, and the left side is the sum of $p$ integers:\n\nThen she asks Xavier put $p$ cards on the corresponding $X_i$’s position to make this equation correct, with an additional condition that $X_i$ should be ordered from smaller to bigger, i.e.\n\nEvery time Xavier immediately comes up with many solutions. Now he wants to know how many solutions in total are there for any $n$ given by Xerier.", "inputFormat": "There are multiple test cases. The number of them is given in the beginning of the input. Then a series of input block comes one by one.\n \nFor each test case:\n\nThe first line contains two space-separated integers $m$ and $p (1\\leq p\\leq 5)$. The second line contains $m$ distinct positive integers - the numbers written on each of the cards. None of these integers exceeds $13000$.\n\nThere are about $120$ test cases in total, but $90\\%$ of them are relatively small. More precisely, all numbers are less than or equal to $100$ in $90\\%$ of the test cases.", "outputFormat": "For each test case:\n\nFor each positive integer, output the number of ways in a single line. To keep the output finite, only numbers with positive ways should be outputted.\n\nOutput a blank line after each test case. See sample for more format details.", "hint": null, "locale": "en", "translations": {"en": {"title": "[ICPC-Shanghai 2011] Xavier is Learning to Count", "background": null, "description": "Xavier, a 9-year-old student, loves playing many kinds of puzzles. One of his favourites is the following:\n\nXerier, his classmate, has made many cards. She writes down a single positive number on each of them. No numbers written on different cards are the same. After that she writes down an equation, whose right side is a single positive number chosen by her, and the left side is the sum of $p$ integers:\n\nThen she asks Xavier put $p$ cards on the corresponding $X_i$’s position to make this equation correct, with an additional condition that $X_i$ should be ordered from smaller to bigger, i.e.\n\nEvery time Xavier immediately comes up with many solutions. Now he wants to know how many solutions in total are there for any $n$ given by Xerier.", "inputFormat": "There are multiple test cases. The number of them is given in the beginning of the input. Then a series of input block comes one by one.\n \nFor each test case:\n\nThe first line contains two space-separated integers $m$ and $p (1\\leq p\\leq 5)$. The second line contains $m$ distinct positive integers - the numbers written on each of the cards. None of these integers exceeds $13000$.\n\nThere are about $120$ test cases in total, but $90\\%$ of them are relatively small. More precisely, all numbers are less than or equal to $100$ in $90\\%$ of the test cases.", "outputFormat": "For each test case:\n\nFor each positive integer, output the number of ways in a single line. To keep the output finite, only numbers with positive ways should be outputted.\n\nOutput a blank line after each test case. See sample for more format details.", "hint": null, "locale": "en"}, "zh-CN": {"title": "[ICPC-Shanghai 2011] Xavier is Learning to Count", "background": null, "description": "集合 $S$ 内有 $m$ 个互异整数。请对于任意整数 $i$ 求出 $S$ 内满足大小为 $p$ 且元素和为 $i$ 的子集数量。", "inputFormat": null, "outputFormat": null, "hint": null, "locale": "zh-CN"}}}
{"pid": "P10596", "type": "P", "difficulty": 5, "samples": [["3 2", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "容斥原理"], "title": "BZOJ2839 集合计数", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "一个有 $N$ 个元素的集合有 $2^N$ 个不同子集（包含空集），现在要在这 $2^N$ 个集合中取出若干集合（至少一个），使得它们的交集的元素个数为 $K$，求取法的方案数，答案模 $10^9+7$。", "inputFormat": "一行两个整数 $N,K$。", "outputFormat": "一行一个整数表示答案。", "hint": "**【样例解释】**\n\n假设原集合为 $\\{A,B,C\\}$，则满足条件的方案为：$\\{AB,ABC\\}$，$\\{AC,ABC\\}$，$\\{BC,ABC\\}$，$\\{AB\\}$，$\\{AC\\}$，$\\{BC\\}$\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\leq N\\leq 1000000$，$0\\leq K\\leq N$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ2839 集合计数", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "一个有 $N$ 个元素的集合有 $2^N$ 个不同子集（包含空集），现在要在这 $2^N$ 个集合中取出若干集合（至少一个），使得它们的交集的元素个数为 $K$，求取法的方案数，答案模 $10^9+7$。", "inputFormat": "一行两个整数 $N,K$。", "outputFormat": "一行一个整数表示答案。", "hint": "**【样例解释】**\n\n假设原集合为 $\\{A,B,C\\}$，则满足条件的方案为：$\\{AB,ABC\\}$，$\\{AC,ABC\\}$，$\\{BC,ABC\\}$，$\\{AB\\}$，$\\{AC\\}$，$\\{BC\\}$\n\n**【数据范围】**\n\n对于 $100\\%$ 的数据，$1\\leq N\\leq 1000000$，$0\\leq K\\leq N$。", "locale": "zh-CN"}}}
{"pid": "P10597", "type": "P", "difficulty": 5, "samples": [["6\n1\n1\n2\n2\n3\n3", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "容斥原理"], "title": "BZOJ4665 小 w 的喜糖", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。\n\n---\n\n废话不多说，反正小 w 要发喜糖啦！！", "description": "小 w 一共买了 $n$ 块喜糖，发给了 $n$ 个人，每个喜糖有一个种类。这时，小 w 突发奇想，如果这 $n$ 个人相互交换手中的糖，那会有多少种方案使得每个人手中的糖的种类都与原来不同。\n\n两个方案不同当且仅当，存在一个人，他手中的糖的种类在两个方案中不一样。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行一个正整数，第 $i$ 个整数 $A_i$ 表示开始时第 $i$ 个人手中的糖的种类。\n", "outputFormat": "一行一个整数，表示方案数。答案对 $10^9+9$ 取模。", "hint": "对于所有数据，$1\\leq A_i \\leq n \\leq 2000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4665 小 w 的喜糖", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。\n\n---\n\n废话不多说，反正小 w 要发喜糖啦！！", "description": "小 w 一共买了 $n$ 块喜糖，发给了 $n$ 个人，每个喜糖有一个种类。这时，小 w 突发奇想，如果这 $n$ 个人相互交换手中的糖，那会有多少种方案使得每个人手中的糖的种类都与原来不同。\n\n两个方案不同当且仅当，存在一个人，他手中的糖的种类在两个方案中不一样。", "inputFormat": "第一行，一个正整数 $n$。\n\n接下来 $n$ 行，每行一个正整数，第 $i$ 个整数 $A_i$ 表示开始时第 $i$ 个人手中的糖的种类。\n", "outputFormat": "一行一个整数，表示方案数。答案对 $10^9+9$ 取模。", "hint": "对于所有数据，$1\\leq A_i \\leq n \\leq 2000$。", "locale": "zh-CN"}}}
{"pid": "P10598", "type": "P", "difficulty": 6, "samples": [["3 2 \n4\n1 1\n1 2\n2 1\n2 2", "2 2\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["O2优化", "二分图", "容斥原理"], "title": "BZOJ2162 男生女生", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。\n\n---\n\n雨荨的班主任安远老师是一个非常严厉的老师。到了大学，男生和女生之间难免会出现一些暧昧关系，但这样显然是影响学习的。所以作为艾利斯顿的一块招牌，安远老师当然要拒绝这种现象的出现以及繁衍。\n\n所以每当安远老师发现一个男生和一个女生放学走在一起或者男女生之间互相传纸条等，他就会立马制止并且通知家长。他也要求所有男女生晚上八点之后必须关手机，并且不定期打电话检查。于是安远老师的学生都感慨：这货不是大学，不是大学。", "description": "安远老师的学生里，一共有 $n$ 个男生和 $n$ 个女生，编号都以 $1\\sim n$ 编号。有 $m$ 对男女生之间有暧昧关系。现在安远老师想找出这样一个男女生群体，每个男生都和每个女生之间有暧昧关系，并且男女生总数最大。注意，男生数目或者女生数目可以为 $0$。\n\n如果有多个这样的群体，安远老师会选择男生最多的那个群体，因为他觉得男生会很不安分。如果这样的群体依然不唯一，他会选择任意一个。\n\n接下来，安远老师从选出的这个群体的所有暧昧关系中，选出 $k$ 个进行调查，使得这个群体的所有男生和女生，都至少和其中的一对暧昧关系有关系（即是这个暧昧关系的男/女主人公）。安远老师想让你告诉他总方案数除以 $19921228$ 的余数是多少。", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $k$，分别代表男生女生的个数，以及安远老师要选择的暧昧关系个数。\n\n第二行为一个正整数 $m$，代表暧昧关系总个数。接下来 $m$ 行，每行两个整数，代表一对有暧昧关系的男女生编号。", "outputFormat": "第一行有两个空格隔开的整数，代表选择的团体内男生和女生的个数。第二行有一个整数，代表选法除以 $19921228$ 的余数。", "hint": "对于所有数据，$1\\leq n \\leq 50$，$1\\leq m,k \\leq 2500$。同一对暧昧关系不会在输入中出现多次。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ2162 男生女生", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。\n\n---\n\n雨荨的班主任安远老师是一个非常严厉的老师。到了大学，男生和女生之间难免会出现一些暧昧关系，但这样显然是影响学习的。所以作为艾利斯顿的一块招牌，安远老师当然要拒绝这种现象的出现以及繁衍。\n\n所以每当安远老师发现一个男生和一个女生放学走在一起或者男女生之间互相传纸条等，他就会立马制止并且通知家长。他也要求所有男女生晚上八点之后必须关手机，并且不定期打电话检查。于是安远老师的学生都感慨：这货不是大学，不是大学。", "description": "安远老师的学生里，一共有 $n$ 个男生和 $n$ 个女生，编号都以 $1\\sim n$ 编号。有 $m$ 对男女生之间有暧昧关系。现在安远老师想找出这样一个男女生群体，每个男生都和每个女生之间有暧昧关系，并且男女生总数最大。注意，男生数目或者女生数目可以为 $0$。\n\n如果有多个这样的群体，安远老师会选择男生最多的那个群体，因为他觉得男生会很不安分。如果这样的群体依然不唯一，他会选择任意一个。\n\n接下来，安远老师从选出的这个群体的所有暧昧关系中，选出 $k$ 个进行调查，使得这个群体的所有男生和女生，都至少和其中的一对暧昧关系有关系（即是这个暧昧关系的男/女主人公）。安远老师想让你告诉他总方案数除以 $19921228$ 的余数是多少。", "inputFormat": "输入的第一行包含两个正整数 $n$ 和 $k$，分别代表男生女生的个数，以及安远老师要选择的暧昧关系个数。\n\n第二行为一个正整数 $m$，代表暧昧关系总个数。接下来 $m$ 行，每行两个整数，代表一对有暧昧关系的男女生编号。", "outputFormat": "第一行有两个空格隔开的整数，代表选择的团体内男生和女生的个数。第二行有一个整数，代表选法除以 $19921228$ 的余数。", "hint": "对于所有数据，$1\\leq n \\leq 50$，$1\\leq m,k \\leq 2500$。同一对暧昧关系不会在输入中出现多次。", "locale": "zh-CN"}}}
{"pid": "P10599", "type": "P", "difficulty": 6, "samples": [["10 5 1 2 10\n1 1 3 3 4 4 6 6 9\n4\n1 6 3\n1 9 1\n0 1\n1 1 1", "11\n9\n12"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "线段树", "背包 DP", "树链剖分"], "title": "BZOJ2164 采矿", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "浩浩荡荡的 cg 大军发现了一座矿产资源极其丰富的城市，他们打算在这座城市实施新的采矿战略。\n\n这个城市可以看成一棵有 $n$ 个节点的有根树，我们把每个节点用 $1$ 到 $n$ 的整数编号。为了方便起见，对于任何一个非根节点 $v$，它任何一个祖先的编号都严格小于 $v$。树上的每个节点表示一个矿点，每条边表示一条街道。\n\n作为 cg 大军的一个小队长，你拥有 $m$ 个部下。你有一张二维的动态信息表，用 $T_{i,j}$ 表示第 $i$ 行第 $j$ 列的数据。当你被允许开采某个区域时，你可以将你的部下分配至各个矿点。在第 $i$ 个矿点安排 $j$ 个人可以获得 $T_{i,j}$ 单位的矿产。\n\n允许开采的区域是这样描述的：给你一对矿点 $(u,v)$，保证 $v$ 是 $u$ 的祖先（这里定义祖先包括 $u$ 本身）；$u$ 为你控制的区域，可以在以 $u$ 为根的子树上任意分配部下；$u$ 到 $v$ 的简单路径（不包括 $u$ 但包括 $v$，若 $u=v$ 则包括 $u$）为探险路径，在该路径上你可以选择至多一个矿点安排部下。你这次开采的收益为安排有部下的矿点的收益之和。", "inputFormat": "输入的第一行包含 $5$ 个正整数 $n,m,A,B,Q$。其中 $n$ 为矿点的个数，$m$ 为部下的数量。$A,B,Q$ 是与动态信息表有关的数据。\n\n第二行包含 $n-1$ 个正整数，第 $i$ 个数为 $F_{i+1}$，表示节点 $i+1$ 的父亲。\n\n接下来需要你用下文的方法依次生成 $n$ 组数据，每组数据共 $m$ 个。其中第 $i$ 组的 $m$ 个数据为信息表中第 $i$ 行的 $m$ 个数据。紧接着一行包含一个正整数 $C$，表示事件的数量。\n\n最后给出 $C$ 行，每行描述一个事件。每个事件会先给出一个 $0$ 或 $1$ 的整数。如果该数为 $0$，则后面有一个正整数 $p$，表示动态信息表有更新，你需要生成一组 $m$ 个数据，来替换信息表中第 $p$ 行的 $m$ 个数据。如果该数为$1$，则后面有两个正整数 $u,v$，表示出现了一个你可以开采的区域，你需要回答这次开采的收益。同一行的各个数之间均用一个空格隔开，没有多余的空格和换行。\n\n数据的生成方法如下：每次生成一组 $m$ 个从小到大排列的数据，替换动态信息表的一行。其中，从小到大第 $j$ 个数替换信息表中第 $j$ 列的数。调用以下代码 $m$ 次并排序得到一组数据。（注意可能会出现重复的数）\n\n```\nFunction GetInt \n\nA←((A xor B)+(B div X)+(B * X))and Y \nB←((A xor B)+(A div X)+(A * X))and Y \n\nreturn (A xor B)mod Q \n```\n\n其中 $A,B,Q$ 均用 $32$ 位有符号整数保存（C/C++ 的 signed long int 类型，pascal 的 longint 类型），$X=2^{16}$，$Y=2^{31}-1$，xor 为位异或运算，div 为整除运算，and 为位且运算，mod 为取余运算。由于只保留了低 $31$ 位，易得我们不用考虑数据的溢出问题。注意每次 $A$ 和 $B$ 都会被改变）", "outputFormat": "对于每个开采事件（开头为 $1$ 的事件），输出一行一个整数，为每次的收益。", "hint": "**【样例解释】**\n\n最初的信息表如下：\n\n| 0 | 1 | 1 | 2 | 2 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 0 | 5 | 7 | 7 | 9 |\n| 1 | 2 | 3 | 4 | 5 |\n| 0 | 1 | 2 | 4 | 5 |\n| 2 | 4 | 7 | 8 | 8 |\n| 0 | 2 | 3 | 8 | 9 |\n| 1 | 3 | 5 | 6 | 8 |\n| 3 | 3 | 3 | 7 | 8 |\n| 0 | 1 | 2 | 3 | 9 |\n| 0 | 0 | 1 | 4 | 4 |\n\n变化后的第 $1$ 行，为：\n```\n1 1 1 4 7\n```\n第一次开采可以在矿点 $6,8,9,10$ 任意安排，可以在矿点 $3$ 或 $4$ 中选取一个安排开采。一种最优安排是在矿点 $6$ 安排 $4$人，在矿点 $8$ 安排 $1$ 人。第二次开采可以在矿点 $9$ 安排，可以在矿点 $6,4,3,1$ 中选择一个安排。一种最优安排是在矿点 $9$ 安排 $1$ 人，在矿点 $6$ 安排 $4$ 人。\n\n**【数据范围】**\n\n有 $50\\%$ 的数据，对于满足 $2\\leq i\\leq n$ 的整数 $i$，$F_i=i-1$。这些数据中有 $40\\%$ 的数据（即所有数据的 $20\\%$）满足 $n\\leq 500，m\\leq 20，C\\leq 500$。\n\n除上述数据，另有 $40\\%$ 的数据满足 $n\\leq 500$，$m\\leq 20$，$C\\leq 500$。\n\n对于 $100\\%$ 的数据 $1\\leq n\\leq 20000$，$1\\leq m\\leq 50$，$1\\leq C\\leq 2000$。对于满足 $2\\leq i\\leq n$ 的整数 $i$，$1\\leq F_i<i$。$1\\leq A,B\\leq 2^{31}-1$，$1\\leq Q\\leq 10000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ2164 采矿", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "浩浩荡荡的 cg 大军发现了一座矿产资源极其丰富的城市，他们打算在这座城市实施新的采矿战略。\n\n这个城市可以看成一棵有 $n$ 个节点的有根树，我们把每个节点用 $1$ 到 $n$ 的整数编号。为了方便起见，对于任何一个非根节点 $v$，它任何一个祖先的编号都严格小于 $v$。树上的每个节点表示一个矿点，每条边表示一条街道。\n\n作为 cg 大军的一个小队长，你拥有 $m$ 个部下。你有一张二维的动态信息表，用 $T_{i,j}$ 表示第 $i$ 行第 $j$ 列的数据。当你被允许开采某个区域时，你可以将你的部下分配至各个矿点。在第 $i$ 个矿点安排 $j$ 个人可以获得 $T_{i,j}$ 单位的矿产。\n\n允许开采的区域是这样描述的：给你一对矿点 $(u,v)$，保证 $v$ 是 $u$ 的祖先（这里定义祖先包括 $u$ 本身）；$u$ 为你控制的区域，可以在以 $u$ 为根的子树上任意分配部下；$u$ 到 $v$ 的简单路径（不包括 $u$ 但包括 $v$，若 $u=v$ 则包括 $u$）为探险路径，在该路径上你可以选择至多一个矿点安排部下。你这次开采的收益为安排有部下的矿点的收益之和。", "inputFormat": "输入的第一行包含 $5$ 个正整数 $n,m,A,B,Q$。其中 $n$ 为矿点的个数，$m$ 为部下的数量。$A,B,Q$ 是与动态信息表有关的数据。\n\n第二行包含 $n-1$ 个正整数，第 $i$ 个数为 $F_{i+1}$，表示节点 $i+1$ 的父亲。\n\n接下来需要你用下文的方法依次生成 $n$ 组数据，每组数据共 $m$ 个。其中第 $i$ 组的 $m$ 个数据为信息表中第 $i$ 行的 $m$ 个数据。紧接着一行包含一个正整数 $C$，表示事件的数量。\n\n最后给出 $C$ 行，每行描述一个事件。每个事件会先给出一个 $0$ 或 $1$ 的整数。如果该数为 $0$，则后面有一个正整数 $p$，表示动态信息表有更新，你需要生成一组 $m$ 个数据，来替换信息表中第 $p$ 行的 $m$ 个数据。如果该数为$1$，则后面有两个正整数 $u,v$，表示出现了一个你可以开采的区域，你需要回答这次开采的收益。同一行的各个数之间均用一个空格隔开，没有多余的空格和换行。\n\n数据的生成方法如下：每次生成一组 $m$ 个从小到大排列的数据，替换动态信息表的一行。其中，从小到大第 $j$ 个数替换信息表中第 $j$ 列的数。调用以下代码 $m$ 次并排序得到一组数据。（注意可能会出现重复的数）\n\n```\nFunction GetInt \n\nA←((A xor B)+(B div X)+(B * X))and Y \nB←((A xor B)+(A div X)+(A * X))and Y \n\nreturn (A xor B)mod Q \n```\n\n其中 $A,B,Q$ 均用 $32$ 位有符号整数保存（C/C++ 的 signed long int 类型，pascal 的 longint 类型），$X=2^{16}$，$Y=2^{31}-1$，xor 为位异或运算，div 为整除运算，and 为位且运算，mod 为取余运算。由于只保留了低 $31$ 位，易得我们不用考虑数据的溢出问题。注意每次 $A$ 和 $B$ 都会被改变）", "outputFormat": "对于每个开采事件（开头为 $1$ 的事件），输出一行一个整数，为每次的收益。", "hint": "**【样例解释】**\n\n最初的信息表如下：\n\n| 0 | 1 | 1 | 2 | 2 |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n| 0 | 5 | 7 | 7 | 9 |\n| 1 | 2 | 3 | 4 | 5 |\n| 0 | 1 | 2 | 4 | 5 |\n| 2 | 4 | 7 | 8 | 8 |\n| 0 | 2 | 3 | 8 | 9 |\n| 1 | 3 | 5 | 6 | 8 |\n| 3 | 3 | 3 | 7 | 8 |\n| 0 | 1 | 2 | 3 | 9 |\n| 0 | 0 | 1 | 4 | 4 |\n\n变化后的第 $1$ 行，为：\n```\n1 1 1 4 7\n```\n第一次开采可以在矿点 $6,8,9,10$ 任意安排，可以在矿点 $3$ 或 $4$ 中选取一个安排开采。一种最优安排是在矿点 $6$ 安排 $4$人，在矿点 $8$ 安排 $1$ 人。第二次开采可以在矿点 $9$ 安排，可以在矿点 $6,4,3,1$ 中选择一个安排。一种最优安排是在矿点 $9$ 安排 $1$ 人，在矿点 $6$ 安排 $4$ 人。\n\n**【数据范围】**\n\n有 $50\\%$ 的数据，对于满足 $2\\leq i\\leq n$ 的整数 $i$，$F_i=i-1$。这些数据中有 $40\\%$ 的数据（即所有数据的 $20\\%$）满足 $n\\leq 500，m\\leq 20，C\\leq 500$。\n\n除上述数据，另有 $40\\%$ 的数据满足 $n\\leq 500$，$m\\leq 20$，$C\\leq 500$。\n\n对于 $100\\%$ 的数据 $1\\leq n\\leq 20000$，$1\\leq m\\leq 50$，$1\\leq C\\leq 2000$。对于满足 $2\\leq i\\leq n$ 的整数 $i$，$1\\leq F_i<i$。$1\\leq A,B\\leq 2^{31}-1$，$1\\leq Q\\leq 10000$。", "locale": "zh-CN"}}}
{"pid": "P10600", "type": "P", "difficulty": 5, "samples": [["5\n1 0\n5 0\n3 2\n1 2\n2 3\n3 2\n2 1\n2 3\n3 3\n1 2\n2 3\n3 1", "1\n42\n1\n2\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "O2优化", "区间 DP"], "title": "BZOJ4350 括号序列再战猪猪侠", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "括号序列是一个仅由 `()` 构成的序列。以下的括号序列是合法的：\n1. `()` 是一个合法序列。\n2. 如果 `A` 是一个合法序列，则 `(A)`  也是一个合法序列。\n3. 如果 `A` 和 `B` 都是合法序列，则 `AB` 也是一个合法序列。\n\n定义 $match_i$ 表示从左往右数第 $i$ 个左括号所对应的是第几个右括号。\n\n现在得到了一个长度为 $2n$ 的括号序列，提供 $m$ 个信息，第 $i$ 个信息形如 $a_i,b_i$，表示 $match_{a_i}<match_{b_i}$。\n\n现问，若根据这些信息还原出合法括号序列的方案数一共有多少？答案对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据，第一行两个正整数 $n,m$。其中 $n$ 表示有几个左括号，$m$ 表示信息数。\n\n接下来 $m$ 行，每行两个正整数 $a_i,b_i$。", "outputFormat": "对于每组数据，输出一个数表示答案。", "hint": "对于所有数据，保证 $1\\leq T\\leq 5$，$1\\leq n\\leq 300$，$1\\leq a_i,b_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4350 括号序列再战猪猪侠", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。", "description": "括号序列是一个仅由 `()` 构成的序列。以下的括号序列是合法的：\n1. `()` 是一个合法序列。\n2. 如果 `A` 是一个合法序列，则 `(A)`  也是一个合法序列。\n3. 如果 `A` 和 `B` 都是合法序列，则 `AB` 也是一个合法序列。\n\n定义 $match_i$ 表示从左往右数第 $i$ 个左括号所对应的是第几个右括号。\n\n现在得到了一个长度为 $2n$ 的括号序列，提供 $m$ 个信息，第 $i$ 个信息形如 $a_i,b_i$，表示 $match_{a_i}<match_{b_i}$。\n\n现问，若根据这些信息还原出合法括号序列的方案数一共有多少？答案对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。\n\n对于每组数据，第一行两个正整数 $n,m$。其中 $n$ 表示有几个左括号，$m$ 表示信息数。\n\n接下来 $m$ 行，每行两个正整数 $a_i,b_i$。", "outputFormat": "对于每组数据，输出一个数表示答案。", "hint": "对于所有数据，保证 $1\\leq T\\leq 5$，$1\\leq n\\leq 300$，$1\\leq a_i,b_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P10601", "type": "P", "difficulty": 6, "samples": [["10 15\nstockholm\namsterdam\nlondon\nberlin\ncopenhagen\noslo\nhelsinki\ndublin\nreykjavik\nbrussels\noslo stockholm 415\nstockholm helsinki 396\noslo london 1153\noslo copenhagen 485\nstockholm copenhagen 522\ncopenhagen berlin 354\ncopenhagen amsterdam 622\nhelsinki berlin 1107\nlondon amsterdam 356\nberlin amsterdam 575\nlondon dublin 463\nreykjavik dublin 1498\nreykjavik oslo 1748\nlondon brussels 318\nbrussels amsterdam 173\nstockholm amsterdam\noslo london\nreykjavik dublin\nbrussels helsinki", "3907"], ["2 1\nfirst\nsecond\nfirst second 10\nfirst first\nfirst first\nsecond first\nfirst first", "10"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2006", "O2优化", "ICPC", "状压 DP"], "title": "[NWERC 2006] Ticket to Ride", "background": "", "description": "给一张地图，地图上有一些城市，城市之间可能有线路连通，我们用一个无向图来表示以简化概念，每条边有个权值，表示选择这条边需要花费的费用。给定 $4$ 对顶点（可能重复），求一个权值最小的边集，使得任意一对顶点可以由选出的边集中的边相连。", "inputFormat": "第一行输入 $2$ 个整数，$n$ 和 $m$，分别表示城市的个数和边的个数。\n\n接下来 $n$ 行，每行一个字符串，表示每个城市的名字。城市的名字为一个不超过 $20$ 个字符，由小写字母构成的字符串。\n\n再接下来 $m$ 行，每行给出 $s_1,s_2,w$，其中 $s_1,s_2$ 为城市的名字，$w$ 为他们之间边的权值。\n\n最后，给出 $4$ 行，每行给出两个字符串，分别为要求的一对城市的名字。", "outputFormat": "输出一行，输出最小的花费。", "hint": "数据保证，$1\\leq n\\leq 30$，$0\\leq m\\leq 1000$，$1\\leq w\\leq 10000$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[NWERC 2006] Ticket to Ride", "background": "", "description": "给一张地图，地图上有一些城市，城市之间可能有线路连通，我们用一个无向图来表示以简化概念，每条边有个权值，表示选择这条边需要花费的费用。给定 $4$ 对顶点（可能重复），求一个权值最小的边集，使得任意一对顶点可以由选出的边集中的边相连。", "inputFormat": "第一行输入 $2$ 个整数，$n$ 和 $m$，分别表示城市的个数和边的个数。\n\n接下来 $n$ 行，每行一个字符串，表示每个城市的名字。城市的名字为一个不超过 $20$ 个字符，由小写字母构成的字符串。\n\n再接下来 $m$ 行，每行给出 $s_1,s_2,w$，其中 $s_1,s_2$ 为城市的名字，$w$ 为他们之间边的权值。\n\n最后，给出 $4$ 行，每行给出两个字符串，分别为要求的一对城市的名字。", "outputFormat": "输出一行，输出最小的花费。", "hint": "数据保证，$1\\leq n\\leq 30$，$0\\leq m\\leq 1000$，$1\\leq w\\leq 10000$。", "locale": "zh-CN"}}}
{"pid": "P10602", "type": "P", "difficulty": 6, "samples": [["5\n1 2 20\n2 3 12\n2 4 1\n4 5 3\n26 9\n1 10\n500 2\n2 30", "206 321 542 328"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["动态规划 DP", "2009", "二分", "O2优化", "CEOI（中欧）", "斜率优化", "单调栈"], "title": "[CEOI 2009] Harbingers", "background": "", "description": "给定一颗树，树中每个结点有一个邮递员，每个邮递员要沿着唯一的路径走向 capital（$1$ 号结点），每到一个城市他可以有两种选择：\n\n1. 继续走到下个城市；\n2. 让这个城市的邮递员替他出发。\n\n每个邮递员出发需要一个准备时间 $W_i$，他们的速度是 $V_i$，表示走一公里需要多少分钟。现在要你求出每个城市的邮递员到 capital 的最少时间（不一定是他自己到 capital，可以是别人帮他）？", "inputFormat": "第一行一个正整数 $N$；\n\n接下来 $N-1$ 行，每行三个正整数 $A,B,C$，表示结点 $A$ 和 $B$ 之间有一条长度为 $C$ 的边；\n\n再接下来 $N-1$ 行，每行 $2$ 个整数 $W_i,V_i$。", "outputFormat": "输出每个城市的邮递员到 capital 的最少时间。", "hint": "对于 $20\\%$ 的数据，$N\\leq 2500$；\n\n对于 $50\\%$ 的数据，树是一条链；\n\n对于所有数据，$3\\leq N\\leq 10^5$，$0\\leq W_i,V_i\\leq 10^9$，每条边长度不超过 $10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CEOI 2009] Harbingers", "background": "", "description": "给定一颗树，树中每个结点有一个邮递员，每个邮递员要沿着唯一的路径走向 capital（$1$ 号结点），每到一个城市他可以有两种选择：\n\n1. 继续走到下个城市；\n2. 让这个城市的邮递员替他出发。\n\n每个邮递员出发需要一个准备时间 $W_i$，他们的速度是 $V_i$，表示走一公里需要多少分钟。现在要你求出每个城市的邮递员到 capital 的最少时间（不一定是他自己到 capital，可以是别人帮他）？", "inputFormat": "第一行一个正整数 $N$；\n\n接下来 $N-1$ 行，每行三个正整数 $A,B,C$，表示结点 $A$ 和 $B$ 之间有一条长度为 $C$ 的边；\n\n再接下来 $N-1$ 行，每行 $2$ 个整数 $W_i,V_i$。", "outputFormat": "输出每个城市的邮递员到 capital 的最少时间。", "hint": "对于 $20\\%$ 的数据，$N\\leq 2500$；\n\n对于 $50\\%$ 的数据，树是一条链；\n\n对于所有数据，$3\\leq N\\leq 10^5$，$0\\leq W_i,V_i\\leq 10^9$，每条边长度不超过 $10^4$。", "locale": "zh-CN"}}}
{"pid": "P10603", "type": "P", "difficulty": 6, "samples": [["7 6\n1 2\n1 4\n1 5\n2 3\n2 7\n5 6\nM 1 1 2\nQ 5\nM 2 2 3\nQ 3\nM 1 2 1\nQ 2", "2\n3\n6"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树", "树状数组", "O2优化", "动态树分治"], "title": "BZOJ4372 烁烁的游戏", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。\n\n---\n\n烁烁很喜欢爬树，这吓坏了树上的皮皮鼠。\n\n给定一颗 $n$ 个节点的树，边权均为 $1$，初始树上没有皮皮鼠。\n\n烁烁他每次会跳到一个节点 $u$ ，把周围与他距离不超过 $d$ 的节点各吸引出 $w$ 只皮皮鼠。皮皮鼠会被烁烁吸引，所以会一直待在节点上不动。\n\n烁烁很好奇，在当前时刻，节点 $u$ 有多少个他的好朋友——皮皮鼠。", "description": "题目背景可以被抽象成这个问题：\n\n给一棵 $n$ 个结点的树，边权均为 $1$，初始点权均为 $0$。进行 $m$ 次操作：\n- $\\text{Q x}$：询问结点 $x$ 的点权。\n- $\\text{M x d w}$：将树上与结点 $x$ 距离不超过 $d$ 的节点的点权均加上 $w$。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来的 $n-1$ 行，每行三个正整数 $u,v$，代表 $u,v$ 之间有一条边。\n\n接下来的 $m$ 行，每行给出上述两种操作中的一种。", "outputFormat": "对于每个 $Q$ 操作，输出当前 $x$ 结点的点权。", "hint": "对于所有数据，保证 $1\\leq n,m\\leq 10^5$，$|w|\\leq 10^4$。注意：$w$ 不一定为正整数，", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4372 烁烁的游戏", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。\n\n---\n\n烁烁很喜欢爬树，这吓坏了树上的皮皮鼠。\n\n给定一颗 $n$ 个节点的树，边权均为 $1$，初始树上没有皮皮鼠。\n\n烁烁他每次会跳到一个节点 $u$ ，把周围与他距离不超过 $d$ 的节点各吸引出 $w$ 只皮皮鼠。皮皮鼠会被烁烁吸引，所以会一直待在节点上不动。\n\n烁烁很好奇，在当前时刻，节点 $u$ 有多少个他的好朋友——皮皮鼠。", "description": "题目背景可以被抽象成这个问题：\n\n给一棵 $n$ 个结点的树，边权均为 $1$，初始点权均为 $0$。进行 $m$ 次操作：\n- $\\text{Q x}$：询问结点 $x$ 的点权。\n- $\\text{M x d w}$：将树上与结点 $x$ 距离不超过 $d$ 的节点的点权均加上 $w$。", "inputFormat": "第一行两个正整数 $n,m$。\n\n接下来的 $n-1$ 行，每行三个正整数 $u,v$，代表 $u,v$ 之间有一条边。\n\n接下来的 $m$ 行，每行给出上述两种操作中的一种。", "outputFormat": "对于每个 $Q$ 操作，输出当前 $x$ 结点的点权。", "hint": "对于所有数据，保证 $1\\leq n,m\\leq 10^5$，$|w|\\leq 10^4$。注意：$w$ 不一定为正整数，", "locale": "zh-CN"}}}
{"pid": "P10604", "type": "P", "difficulty": 6, "samples": [["5 2\n1 5 2\n1 2 4\n2 3 6\n2 4 5", "4\n5\n10\n9\n6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["平衡树", "O2优化", "动态树分治"], "title": "BZOJ4317 Atm 的树", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。\n\n---\n\nAtm 有一段时间在虐 qtree 的题目，于是，他满脑子都是 tree，tree，tree……", "description": "于是，一天晚上他梦到自己被关在了一个有根树中，每条路径都有边权，一个神秘的声音告诉他，每个点到其他的点有一个距离，他需要对于每个点回答：从这个点出发的第 $k$ 小距离是多少；\n\n如果 atm 不能回答出来，那么明天 4019 的闹钟将不会响，4019 全寝可能就迟到了，所以 atm 希望你帮帮他。", "inputFormat": "第一行两个整数 $n,k$，表述询问的树的结点个数，以及题目中的 $k$。\n\n接下来 $n-1$ 行，每行三个正整数 $u,v,w$，表示从结点 $u$ 到 $v$ 有一条边权为 $w$ 的边。", "outputFormat": "共 $n$ 行，第 $i$ 行表示从结点 $i$ 出发的第 $k$ 小距离为多少。", "hint": "对于所有数据，$1\\leq n\\leq 15000$，$1\\leq k\\leq 5000$，$1\\leq w\\leq 10$。树的根为结点 $1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "BZOJ4317 Atm 的树", "background": "题目来自原 BZOJ，我们承认题面及原数据的版权均属于原 BZOJ 或将题目授权给 BZOJ 使用的出题人。如果您是版权所有者且认为我们侵犯了您的权益，可联系我们。\n\n---\n\nAtm 有一段时间在虐 qtree 的题目，于是，他满脑子都是 tree，tree，tree……", "description": "于是，一天晚上他梦到自己被关在了一个有根树中，每条路径都有边权，一个神秘的声音告诉他，每个点到其他的点有一个距离，他需要对于每个点回答：从这个点出发的第 $k$ 小距离是多少；\n\n如果 atm 不能回答出来，那么明天 4019 的闹钟将不会响，4019 全寝可能就迟到了，所以 atm 希望你帮帮他。", "inputFormat": "第一行两个整数 $n,k$，表述询问的树的结点个数，以及题目中的 $k$。\n\n接下来 $n-1$ 行，每行三个正整数 $u,v,w$，表示从结点 $u$ 到 $v$ 有一条边权为 $w$ 的边。", "outputFormat": "共 $n$ 行，第 $i$ 行表示从结点 $i$ 出发的第 $k$ 小距离为多少。", "hint": "对于所有数据，$1\\leq n\\leq 15000$，$1\\leq k\\leq 5000$，$1\\leq w\\leq 10$。树的根为结点 $1$。", "locale": "zh-CN"}}}
{"pid": "P10605", "type": "P", "difficulty": 1, "samples": [["2 1\n2 3\n4", "7"], ["3 3\n1 1 1\n1 5 6", "4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "洛谷原创", "O2优化", "洛谷月赛"], "title": "下头论文", "background": "莲子一直在苦恼关于论文的灵感。她为此花了太多时间，以至于没有时间理会她的伙伴梅莉。", "description": "一天，莲子发现了一个绝妙的点子，并希望通过实验等过程将其完善。具体来说，**她需要依次完成 $n$ 项任务**，其中第 $i$ 项任务需要连续的 $a_i$ 天来完成。也就是说，假设她在第 $x$ 天开始该任务，那么她会在第 $x+a_i-1$ 天结束后完成该任务，她需要保证这些天里她都是空闲的。\n\n不幸的是，她有 $m$ 天有各种事要去做，这些非空闲的日子会以一个单调递增序列 $b$ 的形式给出。即，对于任意的 $i(1\\leq i<m)$，满足 $b_i<b_{i+1}$。\n\n莲子希望完成任务的时间越短越好。例如：不妨假设，莲子要完成 $2$ 项任务，第一项耗时 $2$ 天，第二项耗时 $3$ 天，而第 $4$ 天莲子有事情要去做。则下图呈现了一种方案，使得莲子完成任务的时间尽可能短，为 $7$ 天：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bdiupoc1.png)\n\n她想要知道，在最好情况下，她能在第几天结束后完成所有任务。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个正整数描述序列 $a$。\n\n第三行 $m$ 个正整数描述序列 $b$。保证 $b$ 为单调递增序列。", "outputFormat": "一行一个整数，表示莲子最快能在第几天结束后完成所有任务。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n即在题面中提及的情况。莲子在第 $1$ 天开始第一项任务，在第 $2$ 天结束后完成第一项任务。由于第 $4$ 天有事，她不能从第 $3$ 天开始第二项任务，于是她只好从第 $5$ 天开始该任务，在第 $7$ 天结束时完成全部任务。\n\n注意到该样例符合 $\\textbf{Subtask 2}$ 的特殊性质。\n#### 样例 \\#2\n\n莲子在第 $2$ 至第 $4$ 天**依次**完成了所有任务。\n\n### 数据范围\n\n**本题采用捆绑测试。每一个 Subtask 内的测试点均需通过才能获得该 Subtask 的分数。**\n\n简记：$\\sum a_i$ 为所有 $a_i$ 的和，即 $a_1+a_2+\\dots+a_n$。其他试题中若无特殊说明也以此解释为准。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n,m\\le } & \\bm{\\sum a_i\\le} & \\bm{b_i\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 20 & 10 & 100 & 100 & - &-\\cr\\hline\n2 & 20 & 10^5 & 10^8 & 10^8 & m=1&- \\cr\\hline\n3 & 20 & 10^3 & 10^8 & 10^8 & \\mathbf{-}&-  \\cr\\hline\n4 & 40 & 10^5 & 10^8 &  10^8& -&1,2,3 \\cr\\hline\n\\end{array}\n$$\n\n对于所有数据满足：$1\\le n,m\\le 10^5$，$1\\le a_i \\le \\sum a_i\\le 10^8$, $1\\le b_i\\le 10^8$，$b$ 为单调递增序列。", "locale": "zh-CN", "translations": {"en": {"title": "Frustrating Paper", "background": "Renko has been struggling with inspiration for her paper. She has spent so much time on it that she hasn't had time to interact with her partner Merry.", "description": "One day, Renko discovered an excellent idea and wanted to refine it through experiments. Specifically, **she needs to complete $n$ tasks sequentially**, where the $i$-th task requires $a_i$ consecutive days to complete. This means if she starts the task on day $x$, she will finish it after day $x + a_i - 1$. She must ensure she is free on all those days.\n\nUnfortunately, she has $m$ days with prior commitments, given as a monotonically increasing sequence $b$. That is, for any $i$ ($1 \\leq i < m$), $b_i < b_{i+1}$.\n\nRenko wants to minimize the total time taken to complete all tasks. For example: suppose she needs to complete 2 tasks, where the first takes 2 days and the second 3 days, and she has a commitment on day 4. The figure below shows a scenario where Renko finishes all tasks in the shortest possible time of 7 days:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bdiupoc1.png)\n\n- Green: be in progress\n- Red: be busy\n- Blank: spare time\n\nShe wants to determine the earliest day she can complete all tasks under optimal conditions.\n", "inputFormat": "- The first line contains two integers $n$ and $m$.\n- The second line contains $n$ positive integers describing sequence $a$.\n- The third line contains $m$ positive integers describing sequence $b$, which is guaranteed to be monotonically increasing.", "outputFormat": "Output one integer: the earliest day Renko can finish all tasks.", "hint": "### Sample #1\n\nThis matches the scenario described in the problem. Renko starts the first task on day 1 and finishes it after day 2. Due to her commitment on day 4, she cannot start the second task on day 3. Instead, she starts it on day 5 and completes it after day 7.\n\nThis sample satisfies the special property of **Subtask 2**.\n\n### Sample #2\n\nRenko completes all tasks **consecutively** from day 2 to day 4.\n\n### Constraints\n\n**Bundled testing is used. All test cases in a Subtask must be passed to receive its points.**\n\nNote: $\\sum a_i$ denotes the sum of all $a_i$ (i.e., $a_1 + a_2 + \\dots + a_n$). The same applies to other problems unless stated otherwise.\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{Points} & \\bm{n,m \\leq} & \\bm{\\sum a_i \\leq} & \\bm{b_i \\leq} & \\textbf{Special Property} & \\textbf{Subtask Dependencies} \\cr\\hline\n1 & 20 & 10 & 100 & 100 & - & - \\cr\\hline\n2 & 20 & 10^5 & 10^8 & 10^8 & m=1 & - \\cr\\hline\n3 & 20 & 10^3 & 10^8 & 10^8 & \\text{None} & - \\cr\\hline\n4 & 40 & 10^5 & 10^8 & 10^8 & \\text{None} & 1,2,3 \\cr\\hline\n\\end{array}\n$$\n\nFor all data: $1 \\leq n, m \\leq 10^5$, $1 \\leq a_i \\leq \\sum a_i \\leq 10^8$, $1 \\leq b_i \\leq 10^8$, and $b$ is monotonically increasing.\n\n---\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "下头论文", "background": "莲子一直在苦恼关于论文的灵感。她为此花了太多时间，以至于没有时间理会她的伙伴梅莉。", "description": "一天，莲子发现了一个绝妙的点子，并希望通过实验等过程将其完善。具体来说，**她需要依次完成 $n$ 项任务**，其中第 $i$ 项任务需要连续的 $a_i$ 天来完成。也就是说，假设她在第 $x$ 天开始该任务，那么她会在第 $x+a_i-1$ 天结束后完成该任务，她需要保证这些天里她都是空闲的。\n\n不幸的是，她有 $m$ 天有各种事要去做，这些非空闲的日子会以一个单调递增序列 $b$ 的形式给出。即，对于任意的 $i(1\\leq i<m)$，满足 $b_i<b_{i+1}$。\n\n莲子希望完成任务的时间越短越好。例如：不妨假设，莲子要完成 $2$ 项任务，第一项耗时 $2$ 天，第二项耗时 $3$ 天，而第 $4$ 天莲子有事情要去做。则下图呈现了一种方案，使得莲子完成任务的时间尽可能短，为 $7$ 天：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bdiupoc1.png)\n\n她想要知道，在最好情况下，她能在第几天结束后完成所有任务。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个正整数描述序列 $a$。\n\n第三行 $m$ 个正整数描述序列 $b$。保证 $b$ 为单调递增序列。", "outputFormat": "一行一个整数，表示莲子最快能在第几天结束后完成所有任务。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n即在题面中提及的情况。莲子在第 $1$ 天开始第一项任务，在第 $2$ 天结束后完成第一项任务。由于第 $4$ 天有事，她不能从第 $3$ 天开始第二项任务，于是她只好从第 $5$ 天开始该任务，在第 $7$ 天结束时完成全部任务。\n\n注意到该样例符合 $\\textbf{Subtask 2}$ 的特殊性质。\n#### 样例 \\#2\n\n莲子在第 $2$ 至第 $4$ 天**依次**完成了所有任务。\n\n### 数据范围\n\n**本题采用捆绑测试。每一个 Subtask 内的测试点均需通过才能获得该 Subtask 的分数。**\n\n简记：$\\sum a_i$ 为所有 $a_i$ 的和，即 $a_1+a_2+\\dots+a_n$。其他试题中若无特殊说明也以此解释为准。\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n,m\\le } & \\bm{\\sum a_i\\le} & \\bm{b_i\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 20 & 10 & 100 & 100 & - &-\\cr\\hline\n2 & 20 & 10^5 & 10^8 & 10^8 & m=1&- \\cr\\hline\n3 & 20 & 10^3 & 10^8 & 10^8 & \\mathbf{-}&-  \\cr\\hline\n4 & 40 & 10^5 & 10^8 &  10^8& -&1,2,3 \\cr\\hline\n\\end{array}\n$$\n\n对于所有数据满足：$1\\le n,m\\le 10^5$，$1\\le a_i \\le \\sum a_i\\le 10^8$, $1\\le b_i\\le 10^8$，$b$ 为单调递增序列。", "locale": "zh-CN"}}}
{"pid": "P10606", "type": "P", "difficulty": 1, "samples": [["3 1\n1 2 3\n2 1", "2"], ["5 3\n5 2 3 4 5\n2 1\n3 2\n3 1", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "物理实验 (easy)", "background": "莲子为了完善她的论文，决定研究一些物体的物理性质。由于工作实在是太多，她邀请你帮忙完成其中的一个小实验。", "description": "**这是该题的简单版本，两个版本之间的区别在于小球需要满足的条件不同。该题的满分为 50 分。**\n\n莲子有一个初始在数轴 $0$ 点并向数轴正方向移动的小球。她在数轴的 $1$ 到 $n$ 这 $n$ 个点上设置了装置，当小球经过点 $i$ 时，她可以花费 $a_i$ 的代价让其改变移动方向（从数轴正方向切换为负方向，或者相反）。\n\n莲子有 $m$ 个需要满足的条件，第 $i$ 个条件形如“小球需要从点 $x_i$ 移动到点 $y_i$ 至少一次”，**其中** $x_i$ **大于** $y_i$。更详细的说，该条件即要求小球的移动路径形如 $\\ldots \\to x_i\\to\\ldots\\to y_i\\to\\ldots$。\n\n莲子想要知道她至少要花费多少代价才能满足所有条件。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个正整数描述序列 $a$。\n\n接下来 $m$ 行中，第 $i$ 行依次给出两个正整数表示 $x_i$ 和 $y_i$。", "outputFormat": "一行一个整数，表示莲子至少要花费多少代价才能满足所有条件。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bu9fbcw9.png)\n\n如图所示给出了两个样例的移动路线。数轴上方的是在每个点转向的代价，下方的是坐标。\n\n#### 样例 \\#1\n\n莲子让小球在经过点 $2$ 时反转方向恰好能满足所有条件，总花费代价为 $2$。\n#### 样例 \\#2\n\n莲子让小球在经过点 $3$ 时反转方向恰好能满足所有条件，总花费代价为 $3$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n,m\\le } & \\bm{a_i\\le} & \\bm{x_i,y_i\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 100 & 10 & - &-\\cr\\hline\n2 & 10 & 10^3 & 10^8 & 10^3 & -&1 \\cr\\hline\n3 & 30 & 2\\times 10^5 & 10^8 & 2\\times 10^5 & -&1,2  \\cr\\hline\n\\end{array}\n$$\n\n对于所有数据满足：$1\\le n,m\\le 2\\times 10^5$，$1\\le a_i\\le 10^8$，$1\\le y_i< x_i \\le n\\le 2\\times 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "Physics Experiment (Easy)", "background": "To refine her paper, Renko decides to study the physical properties of objects. Due to the overwhelming workload, she invites you to assist with a small experiment.", "description": "**This is the easy version of the problem. The difference between the two versions lies in the conditions the ball must satisfy. The full score for this version is 50 points.**\n\nRenko has a small ball initially at position $0$ on the number line and moving in the positive direction. She sets up devices at points $1$ to $n$ on the number line. When the ball passes through point $i$, she can pay a cost of $a_i$ to reverse its direction (from positive to negative, or vice versa).\n\nRenko has $m$ conditions to satisfy. The $i$-th condition states that \"the ball must move from point $x_i$ to point $y_i$ at least once,\" **where** $x_i$ **is greater than** $y_i$. More precisely, this condition requires the ball's path to include a segment like $\\ldots \\to x_i \\to \\ldots \\to y_i \\to \\ldots$.\n\nRenko wants to determine the minimum total cost required to satisfy all conditions.", "inputFormat": "- The first line contains two integers $n$ and $m$.\n- The second line contains $n$ positive integers describing the sequence $a$.\n- The next $m$ lines each contain two positive integers $x_i$ and $y_i$.", "outputFormat": "Output one integer: the minimum total cost required to satisfy all conditions.", "hint": "### Explanation\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bu9fbcw9.png)\n\nThe figure above illustrates the movement paths for both samples. The numbers above the number line represent the reversal costs at each point, and the numbers below are coordinates.\n\n#### Sample #1\n\nRenko reverses the ball's direction when it passes point $2$, satisfying all conditions with a total cost of $2$.\n\n#### Sample #2\n\nRenko reverses the ball's direction when it passes point $3$, satisfying all conditions with a total cost of $3$.\n\n### Constraints\n\n**Bundled testing is used.**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{Points} & \\bm{n,m \\leq} & \\bm{a_i \\leq} & \\bm{x_i,y_i \\leq} & \\textbf{Special Property} & \\textbf{Subtask Dependencies} \\cr\\hline\n1 & 10 & 10 & 100 & 10 & - & - \\cr\\hline\n2 & 10 & 10^3 & 10^8 & 10^3 & - & 1 \\cr\\hline\n3 & 30 & 2 \\times 10^5 & 10^8 & 2 \\times 10^5 & - & 1,2 \\cr\\hline\n\\end{array}\n$$\n\nFor all data: $1 \\leq n, m \\leq 2 \\times 10^5$, $1 \\leq a_i \\leq 10^8$, $1 \\leq y_i < x_i \\leq n \\leq 2 \\times 10^5$.\n\n---\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "物理实验 (easy)", "background": "莲子为了完善她的论文，决定研究一些物体的物理性质。由于工作实在是太多，她邀请你帮忙完成其中的一个小实验。", "description": "**这是该题的简单版本，两个版本之间的区别在于小球需要满足的条件不同。该题的满分为 50 分。**\n\n莲子有一个初始在数轴 $0$ 点并向数轴正方向移动的小球。她在数轴的 $1$ 到 $n$ 这 $n$ 个点上设置了装置，当小球经过点 $i$ 时，她可以花费 $a_i$ 的代价让其改变移动方向（从数轴正方向切换为负方向，或者相反）。\n\n莲子有 $m$ 个需要满足的条件，第 $i$ 个条件形如“小球需要从点 $x_i$ 移动到点 $y_i$ 至少一次”，**其中** $x_i$ **大于** $y_i$。更详细的说，该条件即要求小球的移动路径形如 $\\ldots \\to x_i\\to\\ldots\\to y_i\\to\\ldots$。\n\n莲子想要知道她至少要花费多少代价才能满足所有条件。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个正整数描述序列 $a$。\n\n接下来 $m$ 行中，第 $i$ 行依次给出两个正整数表示 $x_i$ 和 $y_i$。", "outputFormat": "一行一个整数，表示莲子至少要花费多少代价才能满足所有条件。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bu9fbcw9.png)\n\n如图所示给出了两个样例的移动路线。数轴上方的是在每个点转向的代价，下方的是坐标。\n\n#### 样例 \\#1\n\n莲子让小球在经过点 $2$ 时反转方向恰好能满足所有条件，总花费代价为 $2$。\n#### 样例 \\#2\n\n莲子让小球在经过点 $3$ 时反转方向恰好能满足所有条件，总花费代价为 $3$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n,m\\le } & \\bm{a_i\\le} & \\bm{x_i,y_i\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 100 & 10 & - &-\\cr\\hline\n2 & 10 & 10^3 & 10^8 & 10^3 & -&1 \\cr\\hline\n3 & 30 & 2\\times 10^5 & 10^8 & 2\\times 10^5 & -&1,2  \\cr\\hline\n\\end{array}\n$$\n\n对于所有数据满足：$1\\le n,m\\le 2\\times 10^5$，$1\\le a_i\\le 10^8$，$1\\le y_i< x_i \\le n\\le 2\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P10607", "type": "P", "difficulty": 3, "samples": [["3 1\n1 2 3\n2 1 3", "8"], ["5 3\n5 2 3 4 5\n2 1 1\n3 2 2\n3 1 1", "8"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "洛谷原创", "O2优化", "洛谷月赛"], "title": "物理实验 (hard)", "background": "莲子为了完善她的论文，决定研究一些物体的物理性质。由于工作实在是太多，她邀请你帮忙完成其中的一个小实验。不过，这次的略微困难一些。", "description": "**这是该题的困难版本，两个版本之间的区别在于小球需要满足的条件不同。该题的满分为 50 分。**\n\n莲子有一个初始在数轴 $0$ 点并向数轴正方向移动的小球。莲子在数轴的 $1$ 到 $n$ 这 $n$ 个点上设置了装置，当小球经过点 $i$ 时，她可以花费 $a_i$ 的代价让其改变移动方向（从数轴正方向切换为负方向，或者相反）。\n\n莲子有 $m$ 个需要满足的条件，第 $i$ 个条件形如“小球需要从点 $x_i$ 移动到点 $y_i$ 至少 $k_i$ 次”，**其中** $x_i$ **大于** $y_i$。更详细的说，该条件即要求小球的移动路径形如 $\\ldots\\to x_i\\to\\ldots\\to y_i\\to\\ldots\\to x_i\\to\\ldots\\to y_i\\to\\ldots$，其中从 $x_i$ 移动到 $y_i$ 的过程重复至少 $k_i$ 次。\n\n莲子想要知道她至少要花费多少代价才能满足所有条件。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个正整数描述序列 $a$。\n\n接下来 $m$ 行中，第 $i$ 行依次给出三个正整数表示 $x_i$, $y_i$ 和 $k_i$。", "outputFormat": "一行一个整数，表示莲子至少要花费多少代价才能满足所有条件。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x2aotk1i.png)\n\n上图画出了样例 1 和样例 2 的具体构造方案，可供参考。\n\n#### 样例 \\#1\n\n莲子让小球在经过点 $2$ 时反转方向，然后让其经过点 $1$ 时再反转方向。重复上述操作两次，最后再在点 $2$ 反转方向恰好能满足所有条件。总花费代价为 $8$。\n\n注意到该样例符合特殊性质 $\\mathbf{A}$。\n#### 样例 \\#2\n\n莲子让小球依次在经过点 $3$、点 $2$、点 $3$ 时反转方向。总花费代价为 $8$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n,m\\le } & \\bm{a_i\\le} & \\bm{x_i,y_i\\le} & \\bm{k_i\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 100 & 10 & 10 & - &-\\cr\\hline\n2 & 5 & 2\\times 10^5 & 10^8 & 2\\times 10^5 & 10^8 & \\mathbf{A}&- \\cr\\hline\n3 & 15 & 10^3 & 10^8 & 10^3 & 10^5 & -&1 \\cr\\hline\n4 & 20 & 2\\times 10^5 & 10^8 & 2\\times 10^5 & 10^8 & -&1,2,3  \\cr\\hline\n\\end{array}\n$$\n\n特殊性质 $\\mathbf{A}$：所有的 $k_i$ 均相等。\n\n对于所有数据满足：$1\\le n,m\\le 2\\times 10^5$，$1\\le a_i\\le 10^8$，$1\\le y_i< x_i \\le n\\le 2\\times 10^5$，$1\\le k_i\\le 10^8$。", "locale": "zh-CN", "translations": {"en": {"title": "Physics Experiment (Hard)", "background": "To refine her paper, Renko decides to study the physical properties of objects. Due to the overwhelming workload, she invites you to assist with a small experiment. However, this one is slightly more challenging.", "description": "**This is the hard version of the problem. The difference between the two versions lies in the conditions the ball must satisfy. The full score for this version is 50 points.**\n\nRenko has a small ball initially at position $0$ on the number line and moving in the positive direction. She sets up devices at points $1$ to $n$ on the number line. When the ball passes through point $i$, she can pay a cost of $a_i$ to reverse its direction (from positive to negative, or vice versa).\n\nRenko has $m$ conditions to satisfy. The $i$-th condition states that \"the ball must move from point $x_i$ to point $y_i$ at least $k_i$ times,\" **where** $x_i$ **is greater than** $y_i$. More precisely, this condition requires the ball's path to include segments like $\\ldots \\to x_i \\to \\ldots \\to y_i \\to \\ldots \\to x_i \\to \\ldots \\to y_i \\to \\ldots$, with the movement from $x_i$ to $y_i$ repeated at least $k_i$ times.\n\nRenko wants to determine the minimum total cost required to satisfy all conditions.", "inputFormat": "- The first line contains two integers $n$ and $m$.\n- The second line contains $n$ positive integers describing the sequence $a$.\n- The next $m$ lines each contain three positive integers $x_i$, $y_i$, and $k_i$.", "outputFormat": "Output one integer: the minimum total cost required to satisfy all conditions.", "hint": "### Explanation\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x2aotk1i.png)\n\nThe figure above illustrates the movement paths for both samples. Refer to it for specific construction details.\n\n#### Sample #1\n\nRenko reverses the ball's direction when it passes point $2$, then reverses it again at point $1$. Repeating this operation twice and finally reversing at point $2$ satisfies all conditions. The total cost is $8$.\n\nThis sample satisfies **Special Property A**.\n\n#### Sample #2\n\nRenko reverses the ball's direction sequentially at points $3$, $2$, and $3$. The total cost is $8$.\n\n### Constraints\n\n**Bundled testing is used.**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{Points} & \\bm{n,m \\leq} & \\bm{a_i \\leq} & \\bm{x_i,y_i \\leq} & \\bm{k_i \\leq} & \\textbf{Special Property} & \\textbf{Subtask Dependencies} \\cr\\hline\n1 & 10 & 10 & 100 & 10 & 10 & - & - \\cr\\hline\n2 & 5 & 2 \\times 10^5 & 10^8 & 2 \\times 10^5 & 10^8 & \\mathbf{A} & - \\cr\\hline\n3 & 15 & 10^3 & 10^8 & 10^3 & 10^5 & - & 1 \\cr\\hline\n4 & 20 & 2 \\times 10^5 & 10^8 & 2 \\times 10^5 & 10^8 & - & 1,2,3 \\cr\\hline\n\\end{array}\n$$\n\n**Special Property A**: All $k_i$ are equal.\n\nFor all data: $1 \\leq n, m \\leq 2 \\times 10^5$, $1 \\leq a_i \\leq 10^8$, $1 \\leq y_i < x_i \\leq n \\leq 2 \\times 10^5$, $1 \\leq k_i \\leq 10^8$.\n\n---\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "物理实验 (hard)", "background": "莲子为了完善她的论文，决定研究一些物体的物理性质。由于工作实在是太多，她邀请你帮忙完成其中的一个小实验。不过，这次的略微困难一些。", "description": "**这是该题的困难版本，两个版本之间的区别在于小球需要满足的条件不同。该题的满分为 50 分。**\n\n莲子有一个初始在数轴 $0$ 点并向数轴正方向移动的小球。莲子在数轴的 $1$ 到 $n$ 这 $n$ 个点上设置了装置，当小球经过点 $i$ 时，她可以花费 $a_i$ 的代价让其改变移动方向（从数轴正方向切换为负方向，或者相反）。\n\n莲子有 $m$ 个需要满足的条件，第 $i$ 个条件形如“小球需要从点 $x_i$ 移动到点 $y_i$ 至少 $k_i$ 次”，**其中** $x_i$ **大于** $y_i$。更详细的说，该条件即要求小球的移动路径形如 $\\ldots\\to x_i\\to\\ldots\\to y_i\\to\\ldots\\to x_i\\to\\ldots\\to y_i\\to\\ldots$，其中从 $x_i$ 移动到 $y_i$ 的过程重复至少 $k_i$ 次。\n\n莲子想要知道她至少要花费多少代价才能满足所有条件。", "inputFormat": "第一行两个整数 $n,m$。\n\n第二行 $n$ 个正整数描述序列 $a$。\n\n接下来 $m$ 行中，第 $i$ 行依次给出三个正整数表示 $x_i$, $y_i$ 和 $k_i$。", "outputFormat": "一行一个整数，表示莲子至少要花费多少代价才能满足所有条件。", "hint": "### 样例解释\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x2aotk1i.png)\n\n上图画出了样例 1 和样例 2 的具体构造方案，可供参考。\n\n#### 样例 \\#1\n\n莲子让小球在经过点 $2$ 时反转方向，然后让其经过点 $1$ 时再反转方向。重复上述操作两次，最后再在点 $2$ 反转方向恰好能满足所有条件。总花费代价为 $8$。\n\n注意到该样例符合特殊性质 $\\mathbf{A}$。\n#### 样例 \\#2\n\n莲子让小球依次在经过点 $3$、点 $2$、点 $3$ 时反转方向。总花费代价为 $8$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n,m\\le } & \\bm{a_i\\le} & \\bm{x_i,y_i\\le} & \\bm{k_i\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 10 & 100 & 10 & 10 & - &-\\cr\\hline\n2 & 5 & 2\\times 10^5 & 10^8 & 2\\times 10^5 & 10^8 & \\mathbf{A}&- \\cr\\hline\n3 & 15 & 10^3 & 10^8 & 10^3 & 10^5 & -&1 \\cr\\hline\n4 & 20 & 2\\times 10^5 & 10^8 & 2\\times 10^5 & 10^8 & -&1,2,3  \\cr\\hline\n\\end{array}\n$$\n\n特殊性质 $\\mathbf{A}$：所有的 $k_i$ 均相等。\n\n对于所有数据满足：$1\\le n,m\\le 2\\times 10^5$，$1\\le a_i\\le 10^8$，$1\\le y_i< x_i \\le n\\le 2\\times 10^5$，$1\\le k_i\\le 10^8$。", "locale": "zh-CN"}}}
{"pid": "P10608", "type": "P", "difficulty": 4, "samples": [["3 2\nB__\nR 3\nM 2", "2\n"], ["3 3\n___\nR 1 \nR 3\nM 2", "2"], ["5 2\nBW__B\nR 4\nR 3", "5"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["博弈论", "洛谷原创", "O2优化", "洛谷月赛"], "title": "双人游戏", "background": "写完论文的莲子终于意识到了这么多天埋头写论文而不理会梅莉的错误，并打算约梅莉出来玩。为此，她构思了一个有趣的双人游戏。", "description": "莲子构思了一个双人游戏，不妨令游戏的两个玩家为小 R 和小 M，规则如下：\n\n有一个 $1\\times n$ 的棋盘。初始时，棋盘上有一些黑色棋子，一些白色棋子，和 $m$ 个空格子。我们可以用一个长度为 $n$ 的字符串 $s$ 来描述初始时的棋盘，若 $s_i$ 为 `B` 则代表该位置为黑棋子，为 `W` 则代表白棋子，为 `_` 则代表空格子。**请注意，棋盘上可能没有空格子。**\n\n游戏开始前，除了棋盘的初始状态，两人还会获得一个操作序列 $O=[\\lang c_1,x_1\\rang, \\lang c_2,x_2\\rang, \\cdots,\\lang c_m,x_m\\rang]$，其中二元组 $\\lang c_i,x_i\\rang$ 满足 $c_i\\in\\{\\mathtt{R}, \\mathtt{M}\\}$ 且 $x_i$ 位置此时是一个空格子，表示在第 $i$ 步，玩家小 $c_i$ 应该在 $x_i$ 位置放上一个黑色棋子或者白色棋子。序列 $O$ 对双方公开，也就是说双方均知道每一步是由谁在哪个位置放上一枚棋子。\n\n游戏过程中，双方会按照该操作序列进行操作。第 $i$ 轮时小 $c_i$ 在 $x_i$ 位置放置一枚棋子，棋子的颜色由该玩家决定。在游戏结束时所有格子都被放上了恰好一枚棋子。\n\n小 R 希望游戏结束后棋子组成的**极长同色连续段数**$^*$尽可能多，而小 M 则希望其尽可能少。试着求出两人都以最优方式摆放棋子的话最后的连续段数为几。容易证明答案是一个定值。\n\n注：一个棋子的极长同色连续段被定义为一个二元组 $(l,r)$ 满足 $l\\le r$，且从左至右数第 $l$ 个棋子到第 $r$ 个棋子颜色相同，且第 $l-1$ 个和第 $r+1$ 个棋子要么不存在，要么与前面所说的棋子颜色不同。", "inputFormat": "第一行两个整数 $n,m$，其中 $m$ 代表棋盘上的空格子数量。\n\n第二行一个长度为 $n$ 的字符串 $s$，描述棋盘的每个格子的状态。\n\n对于接下来的 $m$ 行：第 $i$ 行一个字符 $c_i$ 和一个正整数 $x_i$，描述第 $i$ 回合操作的玩家和她放置棋子的位置。", "outputFormat": "输出一行一个整数，表示两人都以最优方式摆放棋子的话最后的连续段数为几。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n最终的棋子摆放结果为 `BWW`，可以证明两人这样摆均为最优。极长连续段数为 $2$。\n#### 样例 \\#2\n\n为了让连续段数尽可能大，先手摆放两个空格子的小 R 一定会让两个格子的棋子颜色不同。然后小 M 会放置一个任意颜色的棋子。有多种可能的最终摆放结果，其中一种为 `BWW`，极长连续段数为 $2$。\n\n注意到该样例符合特殊性质 $\\mathbf{B}$。\n#### 样例 \\#3\n\n最终的棋子摆放结果为 `BWBWB`，极长连续段数为 $5$。\n\n注意到该样例符合特殊性质 $\\mathbf{A}$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n,m\\le } & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 20 & - &-\\cr\\hline\n2 & 10 & 2\\times 10^5 & \\mathbf{A}&- \\cr\\hline\n3 & 20 & 2\\times 10^5 & \\mathbf{B}&- \\cr\\hline\n4 & 20 & 10^3 & -&1  \\cr\\hline\n5 & 40 & 2\\times 10^5 & -&1,2,3,4  \\cr\\hline\n\\end{array}\n$$\n\n特殊性质 $\\mathbf{A}$：保证要么 $c_i$ 均为 $\\tt R$，要么 $c_i$ 均为 $\\tt M$。\\\n特殊性质 $\\mathbf{B}$：保证 $s$ 中所有字母均为 $\\tt \\_$。\n\n对于所有数据满足：$\\red0\\le m\\le 2\\times 10^5 $，$1\\le n\\le 2\\times 10^5$，且有 $m\\le n$，$s_i\\in \\{\\tt{B,W,\\_}\\}$。", "locale": "zh-CN", "translations": {"en": {"title": "Two-Player Game", "background": "After finishing her paper, Renko finally realizes her mistake of burying herself in work and ignoring Merry for so long. She decides to invite Merry out and devises an interesting two-player game.", "description": "Renko has designed a two-player game with two players, Little R and Little M, following these rules:\n\nThere is a $1 \\times n$ chessboard. Initially, the board has some black pieces, white pieces, and $m$ empty cells. The initial state of the board is described by a string $s$ of length $n$, where:\n- `B` indicates a black piece,\n- `W` indicates a white piece,\n- `_` indicates an empty cell.  \n**Note: The board may have no empty cells.**\n\nBefore the game starts, both players receive an operation sequence $O = [\\langle c_1, x_1 \\rangle, \\langle c_2, x_2 \\rangle, \\ldots, \\langle c_m, x_m \\rangle]$, where each pair $\\langle c_i, x_i \\rangle$ satisfies:\n- $c_i \\in \\{\\mathtt{R}, \\mathtt{M}\\}$,\n- $x_i$ is an empty cell at step $i$.  \n\nThis sequence is public, meaning both players know who will place a piece and where at each step.\n\nDuring the game, players follow the operation sequence. In the $i$-th step, player $c_i$ places a piece (black or white, chosen by the player) at position $x_i$. By the end of the game, every cell will have exactly one piece.\n\nLittle R aims to **maximize** the number of **maximal consecutive monochromatic segments**$^*$, while Little M aims to **minimize** it. Determine the final number of segments when both play optimally. It can be proven that the answer is unique.\n\n**Definition**: A maximal consecutive monochromatic segment is a pair $(l, r)$ where $l \\leq r$, such that:\n- All pieces from the $l$-th to $r$-th position are the same color.\n- The $(l-1)$-th piece (if exists) and the $(r+1)$-th piece (if exists) are of a different color.", "inputFormat": "- The first line contains two integers $n$ and $m$, where $m$ is the number of empty cells.\n- The second line contains a string $s$ of length $n$, describing the initial board state.\n- The next $m$ lines each contain a character $c_i$ and an integer $x_i$, describing the player and the position for the $i$-th step.", "outputFormat": "Output one integer: the number of maximal consecutive monochromatic segments when both players act optimally.", "hint": "### Explanation\n\n#### Sample #1\n\nThe final board is `BWW`, which is optimal for both players. The number of segments is $2$.\n\n#### Sample #2\n\nLittle R (controlling the first two steps) will place different colors to maximize segments. Little M then places any color. One possible final state is `BWW` with $2$ segments.  \nThis sample satisfies **Special Property B**.\n\n#### Sample #3\n\nThe final board is `BWBWB` with $5$ segments.  \nThis sample satisfies **Special Property A**.\n\n### Constraints\n\n**Bundled testing is used.**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{Points} & \\bm{n,m \\leq} & \\textbf{Special Property} & \\textbf{Subtask Dependencies} \\cr\\hline\n1 & 10 & 20 & - & - \\cr\\hline\n2 & 10 & 2 \\times 10^5 & \\mathbf{A} & - \\cr\\hline\n3 & 20 & 2 \\times 10^5 & \\mathbf{B} & - \\cr\\hline\n4 & 20 & 10^3 & - & 1 \\cr\\hline\n5 & 40 & 2 \\times 10^5 & - & 1,2,3,4 \\cr\\hline\n\\end{array}\n$$\n\n**Special Properties**:\n- **A**: All $c_i$ are either `R` or `M`.\n- **B**: All characters in $s$ are `_`.\n\nFor all data: $0 \\leq m \\leq 2 \\times 10^5$, $1 \\leq n \\leq 2 \\times 10^5$, $m \\leq n$, and $s_i \\in \\{\\mathtt{B}, \\mathtt{W}, \\mathtt{\\_}\\}$.\n\n---\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "双人游戏", "background": "写完论文的莲子终于意识到了这么多天埋头写论文而不理会梅莉的错误，并打算约梅莉出来玩。为此，她构思了一个有趣的双人游戏。", "description": "莲子构思了一个双人游戏，不妨令游戏的两个玩家为小 R 和小 M，规则如下：\n\n有一个 $1\\times n$ 的棋盘。初始时，棋盘上有一些黑色棋子，一些白色棋子，和 $m$ 个空格子。我们可以用一个长度为 $n$ 的字符串 $s$ 来描述初始时的棋盘，若 $s_i$ 为 `B` 则代表该位置为黑棋子，为 `W` 则代表白棋子，为 `_` 则代表空格子。**请注意，棋盘上可能没有空格子。**\n\n游戏开始前，除了棋盘的初始状态，两人还会获得一个操作序列 $O=[\\lang c_1,x_1\\rang, \\lang c_2,x_2\\rang, \\cdots,\\lang c_m,x_m\\rang]$，其中二元组 $\\lang c_i,x_i\\rang$ 满足 $c_i\\in\\{\\mathtt{R}, \\mathtt{M}\\}$ 且 $x_i$ 位置此时是一个空格子，表示在第 $i$ 步，玩家小 $c_i$ 应该在 $x_i$ 位置放上一个黑色棋子或者白色棋子。序列 $O$ 对双方公开，也就是说双方均知道每一步是由谁在哪个位置放上一枚棋子。\n\n游戏过程中，双方会按照该操作序列进行操作。第 $i$ 轮时小 $c_i$ 在 $x_i$ 位置放置一枚棋子，棋子的颜色由该玩家决定。在游戏结束时所有格子都被放上了恰好一枚棋子。\n\n小 R 希望游戏结束后棋子组成的**极长同色连续段数**$^*$尽可能多，而小 M 则希望其尽可能少。试着求出两人都以最优方式摆放棋子的话最后的连续段数为几。容易证明答案是一个定值。\n\n注：一个棋子的极长同色连续段被定义为一个二元组 $(l,r)$ 满足 $l\\le r$，且从左至右数第 $l$ 个棋子到第 $r$ 个棋子颜色相同，且第 $l-1$ 个和第 $r+1$ 个棋子要么不存在，要么与前面所说的棋子颜色不同。", "inputFormat": "第一行两个整数 $n,m$，其中 $m$ 代表棋盘上的空格子数量。\n\n第二行一个长度为 $n$ 的字符串 $s$，描述棋盘的每个格子的状态。\n\n对于接下来的 $m$ 行：第 $i$ 行一个字符 $c_i$ 和一个正整数 $x_i$，描述第 $i$ 回合操作的玩家和她放置棋子的位置。", "outputFormat": "输出一行一个整数，表示两人都以最优方式摆放棋子的话最后的连续段数为几。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n最终的棋子摆放结果为 `BWW`，可以证明两人这样摆均为最优。极长连续段数为 $2$。\n#### 样例 \\#2\n\n为了让连续段数尽可能大，先手摆放两个空格子的小 R 一定会让两个格子的棋子颜色不同。然后小 M 会放置一个任意颜色的棋子。有多种可能的最终摆放结果，其中一种为 `BWW`，极长连续段数为 $2$。\n\n注意到该样例符合特殊性质 $\\mathbf{B}$。\n#### 样例 \\#3\n\n最终的棋子摆放结果为 `BWBWB`，极长连续段数为 $5$。\n\n注意到该样例符合特殊性质 $\\mathbf{A}$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n,m\\le } & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 20 & - &-\\cr\\hline\n2 & 10 & 2\\times 10^5 & \\mathbf{A}&- \\cr\\hline\n3 & 20 & 2\\times 10^5 & \\mathbf{B}&- \\cr\\hline\n4 & 20 & 10^3 & -&1  \\cr\\hline\n5 & 40 & 2\\times 10^5 & -&1,2,3,4  \\cr\\hline\n\\end{array}\n$$\n\n特殊性质 $\\mathbf{A}$：保证要么 $c_i$ 均为 $\\tt R$，要么 $c_i$ 均为 $\\tt M$。\\\n特殊性质 $\\mathbf{B}$：保证 $s$ 中所有字母均为 $\\tt \\_$。\n\n对于所有数据满足：$\\red0\\le m\\le 2\\times 10^5 $，$1\\le n\\le 2\\times 10^5$，且有 $m\\le n$，$s_i\\in \\{\\tt{B,W,\\_}\\}$。", "locale": "zh-CN"}}}
{"pid": "P10609", "type": "P", "difficulty": 5, "samples": [["2 2 0\n1 0\n1 1\n1 1\n1 1\n\n2\n0", "\n\n\n\n\n1"], ["2 2 0\n2 3\n3 4\n1 1\n1 1\n\n2\n0", "\n\n\n\n\n1\n"], ["2 3 1\n1 -2\n-1 2\n1 2\n2 1\n1\n\n2\n\n0\n", "\n\n\n\n\n\n1\n\n2"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "博弈论", "洛谷原创", "交互题", "Special Judge", "O2优化", "洛谷月赛"], "title": "排除干扰", "background": "其实，莲子有所不知的是，梅莉早在几周前就瞒着她一个人去探险，至今未归。得知了此事的莲子后悔万分。\n\n为了找到失踪的梅莉，莲子独自前去梅莉家寻找线索，但她翻箱倒柜却仍一无所获。\n\n“该怎么办啊！要是能排除干扰，找到有用的线索就好了。对了，那就以梅莉的视角想想吧！”", "description": "**这是一道交互题。**\n\n为了同时从两者的角度思考，莲子在内心构想了一场博弈，而主角则仍是小 R 与小 M，规则如下：\n\n小 R 和小 M 初始均有 $m$ 张牌，牌共有 $n$ 类，编号为 $1$ 到 $n$。**保证她们初始拥有每类牌至少一张**。她们可以互相看见手牌。\n\n小 R 和小 M 轮流弃牌，**其中小 R 为先手**。每回合她们都要丢弃恰好一张牌。当她们均把牌弃到只剩一张时，假设小 R 的牌为 $u$，小 M 的牌为 $v$，那么小 R 获得的分数为 $a_{u,v}$，小 M 获得的分数为 $-a_{u,v}$。她们都希望自己的得分尽可能高。\n\n现在，你需要和交互库模拟一局游戏，若 $c=0$，你将扮演小 R；若 $c=1$，你将扮演小 M。你取得的分数至少需要达到双方均以最优策略决策时所得到的分数。", "inputFormat": "第一行三个整数 $n,m,c$，它们的含义都与题目描述相同。\n\n接下来的 $n$ 行，每行 $n$ 个整数，描述矩阵 $a$。第 $i$ 行第 $j$ 列的元素为 $a_{i,j}$。\n\n接下来共两行，每行 $n$ 个整数。对于第一行，其中第 $i$ 个整数 $R_i$ 代表小 R 初始拥有多少张第 $i$ 类的牌。对于第二行，第 $i$ 个整数 $M_i$ 代表小 M 初始拥有多少张第 $i$ 类的牌。保证有 $\\sum R_i=\\sum M_i=m$。\n\n接下来进入交互过程：\n\n1. 如果轮到对手（交互库）操作，你可以读入一个正整数 $x$，代表对手该回合丢弃了一张第 $x$ 类的牌。\n2. 如果轮到你操作，你需要输出一个正整数 $y$，代表你该回合丢弃了一张第 $y$ 类的牌。\n3. 如果游戏结束（两人均只剩一张牌）且你取得的分数不是最优/你进行了不合法的操作，你需要读入一个 `-1` 后退出程序。\n4. 如果游戏结束且你取得的分数是最优，你需要读入一个 `0` 后退出程序。\n\n**注意：在交互过程中，你需要在输出后刷新缓存区，下面是一些常见语言的刷新缓存区方式：**\n\n- C++：`fflush(stdout)` 或 `cout.flush()`。\n- C: `fflush(stdout)`。\n- Java: `System.out.flush()`。\n- Python: `stdout.flush()`。\n- Pascal: `flush(output)`。\n- 其他语言：请参考对应语言的帮助文档。", "outputFormat": "见「输入格式」。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n你将扮演小 R（先手）游玩。假设你丢弃一张 $1$ 类牌，对手丢弃一张 $2$ 类牌，最终你的得分即为 $1$。可以证明，得分 $1$ 即为最优得分。\n\n注意到该样例同时符合特殊性质 $\\mathbf{B}$ 和 $\\mathbf{C}$。\n#### 样例 \\#2\n\n你将扮演小 R（先手）游玩。可以证明，最终小 R 的得分 $3$ 即为最优得分。\n\n注意到该样例符合特殊性质 $\\mathbf{A}$。\n#### 样例 \\#3\n\n你将扮演小 M（后手）游玩。可以证明，最终小 M 的得分 $1$ 即为最优得分。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le} & \\bm{m\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 20 & 5 & 5 & - &-\\cr\\hline\n2 & 15 & 10^3 & 10^4 & \\mathbf{A}&- \\cr\\hline\n3 & 20 & 10^3 & 10^4 & \\mathbf{B}&- \\cr\\hline\n4 & 20 & 10^3 & 10^3 & \\mathbf C&-  \\cr\\hline\n5 & 25 & 10^3 & 10^4 & -&1,2,3,4  \\cr\\hline\n\\end{array}\n$$\n\n特殊性质 $\\mathbf{A}$：保证 $a_{i,j}=i+j$。\\\n特殊性质 $\\mathbf{B}$：保证 $a$ 中只出现 $0$ 和 $1$。\\\n特殊性质 $\\mathbf{C}$：保证每人初始拥有每类牌恰好一张。\n\n对于所有数据满足：$1\\le n\\le 10^3$，$1\\le m\\le 10^4$，$0\\le |a_{i,j}|\\le 10^8$，$1\\le R_i,M_i \\le m$ 且 $\\sum R_i = \\sum M_i = m$。保证交互库进行的操作均合法。", "locale": "zh-CN", "translations": {"en": {"title": "Eliminate Interference", "background": "Unbeknownst to Renko, Merry had secretly gone on an adventure weeks ago and had not returned. Upon learning this, Renko was filled with regret.\n\nTo find the missing Merry, Renko searched for clues at Merry's house but found nothing.  \n\"What should I do? If only I could eliminate the interference and find useful clues. Maybe I should think from Merry's perspective!\"", "description": "**This is an interactive problem.**\n\nTo analyze from both perspectives, Renko imagines a game between Little R and Little M, with the following rules:\n\nBoth Little R and Little M initially have $m$ cards, categorized into $n$ types numbered $1$ to $n$. **Each type has at least one card initially for both players.** They can see each other's cards.\n\nThey take turns discarding cards, **with Little R going first**. Each turn, they discard exactly one card. When both are left with one card each—suppose Little R's card is $u$ and Little M's is $v$—Little R's score is $a_{u,v}$, and Little M's score is $-a_{u,v}$. Both aim to maximize their own scores.\n\nYou will simulate a game with the interactor. If $c=0$, you play as Little R; if $c=1$, you play as Little M. Your score must meet or exceed the optimal score when both play optimally.", "inputFormat": "- The first line contains three integers $n$, $m$, $c$, as described.\n- The next $n$ lines each contain $n$ integers, representing matrix $a$. The $i$-th row and $j$-th column is $a_{i,j}$.\n- The next two lines each contain $n$ integers:  \n  - The first line: $R_i$ denotes Little R's initial count of type $i$ cards.  \n  - The second line: $M_i$ denotes Little M's initial count of type $i$ cards.  \n  It is guaranteed that $\\sum R_i = \\sum M_i = m$.\n\n**Interaction Process**:\n\n1. If it is the opponent's turn (interactor's move), read an integer $x$, indicating they discarded a type $x$ card.\n2. If it is your turn, output an integer $y$, indicating you discard a type $y$ card.\n3. If the game ends (both have one card left) and your score is suboptimal/your move is invalid, read `-1` and exit.\n4. If the game ends and your score is optimal, read `0` and exit.\n\n**Note: After each output, flush the buffer. Common methods include**:\n- C++: `fflush(stdout)` or `cout.flush()`.\n- C: `fflush(stdout)`.\n- Java: `System.out.flush()`.\n- Python: `stdout.flush()`.\n- Pascal: `flush(output)`.\n- Others: Refer to documentation.", "outputFormat": "Follow the interaction rules described above.\n", "hint": "### Explanation\n\n#### Sample #1\n\nYou play as Little R (first to act). If you discard a type $1$ card and the opponent discards type $2$, your score is $1$, which is optimal.  \nThis sample satisfies **Special Properties B and C**.\n\n#### Sample #2\n\nAs Little R, the optimal score is $3$.  \nThis sample satisfies **Special Property A**.\n\n#### Sample #3\n\nYou play as Little M (second to act). The optimal score for Little M is $1$.\n\n### Constraints\n\n**Bundled testing is used.**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{Points} & \\bm{n \\leq} & \\bm{m \\leq} & \\textbf{Special Property} & \\textbf{Subtask Dependencies} \\cr\\hline\n1 & 20 & 5 & 5 & - & - \\cr\\hline\n2 & 15 & 10^3 & 10^4 & \\mathbf{A} & - \\cr\\hline\n3 & 20 & 10^3 & 10^4 & \\mathbf{B} & - \\cr\\hline\n4 & 20 & 10^3 & 10^3 & \\mathbf{C} & - \\cr\\hline\n5 & 25 & 10^3 & 10^4 & - & 1,2,3,4 \\cr\\hline\n\\end{array}\n$$\n\n**Special Properties**:\n- **A**: $a_{i,j} = i + j$.\n- **B**: $a$ contains only $0$ and $1$.\n- **C**: Each player initially has exactly one card per type.\n\nFor all data:  \n$1 \\leq n \\leq 10^3$, $1 \\leq m \\leq 10^4$, $|a_{i,j}| \\leq 10^8$, $1 \\leq R_i, M_i \\leq m$, $\\sum R_i = \\sum M_i = m$. The interactor's moves are guaranteed valid.\n\n---\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "排除干扰", "background": "其实，莲子有所不知的是，梅莉早在几周前就瞒着她一个人去探险，至今未归。得知了此事的莲子后悔万分。\n\n为了找到失踪的梅莉，莲子独自前去梅莉家寻找线索，但她翻箱倒柜却仍一无所获。\n\n“该怎么办啊！要是能排除干扰，找到有用的线索就好了。对了，那就以梅莉的视角想想吧！”", "description": "**这是一道交互题。**\n\n为了同时从两者的角度思考，莲子在内心构想了一场博弈，而主角则仍是小 R 与小 M，规则如下：\n\n小 R 和小 M 初始均有 $m$ 张牌，牌共有 $n$ 类，编号为 $1$ 到 $n$。**保证她们初始拥有每类牌至少一张**。她们可以互相看见手牌。\n\n小 R 和小 M 轮流弃牌，**其中小 R 为先手**。每回合她们都要丢弃恰好一张牌。当她们均把牌弃到只剩一张时，假设小 R 的牌为 $u$，小 M 的牌为 $v$，那么小 R 获得的分数为 $a_{u,v}$，小 M 获得的分数为 $-a_{u,v}$。她们都希望自己的得分尽可能高。\n\n现在，你需要和交互库模拟一局游戏，若 $c=0$，你将扮演小 R；若 $c=1$，你将扮演小 M。你取得的分数至少需要达到双方均以最优策略决策时所得到的分数。", "inputFormat": "第一行三个整数 $n,m,c$，它们的含义都与题目描述相同。\n\n接下来的 $n$ 行，每行 $n$ 个整数，描述矩阵 $a$。第 $i$ 行第 $j$ 列的元素为 $a_{i,j}$。\n\n接下来共两行，每行 $n$ 个整数。对于第一行，其中第 $i$ 个整数 $R_i$ 代表小 R 初始拥有多少张第 $i$ 类的牌。对于第二行，第 $i$ 个整数 $M_i$ 代表小 M 初始拥有多少张第 $i$ 类的牌。保证有 $\\sum R_i=\\sum M_i=m$。\n\n接下来进入交互过程：\n\n1. 如果轮到对手（交互库）操作，你可以读入一个正整数 $x$，代表对手该回合丢弃了一张第 $x$ 类的牌。\n2. 如果轮到你操作，你需要输出一个正整数 $y$，代表你该回合丢弃了一张第 $y$ 类的牌。\n3. 如果游戏结束（两人均只剩一张牌）且你取得的分数不是最优/你进行了不合法的操作，你需要读入一个 `-1` 后退出程序。\n4. 如果游戏结束且你取得的分数是最优，你需要读入一个 `0` 后退出程序。\n\n**注意：在交互过程中，你需要在输出后刷新缓存区，下面是一些常见语言的刷新缓存区方式：**\n\n- C++：`fflush(stdout)` 或 `cout.flush()`。\n- C: `fflush(stdout)`。\n- Java: `System.out.flush()`。\n- Python: `stdout.flush()`。\n- Pascal: `flush(output)`。\n- 其他语言：请参考对应语言的帮助文档。", "outputFormat": "见「输入格式」。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n你将扮演小 R（先手）游玩。假设你丢弃一张 $1$ 类牌，对手丢弃一张 $2$ 类牌，最终你的得分即为 $1$。可以证明，得分 $1$ 即为最优得分。\n\n注意到该样例同时符合特殊性质 $\\mathbf{B}$ 和 $\\mathbf{C}$。\n#### 样例 \\#2\n\n你将扮演小 R（先手）游玩。可以证明，最终小 R 的得分 $3$ 即为最优得分。\n\n注意到该样例符合特殊性质 $\\mathbf{A}$。\n#### 样例 \\#3\n\n你将扮演小 M（后手）游玩。可以证明，最终小 M 的得分 $1$ 即为最优得分。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le} & \\bm{m\\le} & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 20 & 5 & 5 & - &-\\cr\\hline\n2 & 15 & 10^3 & 10^4 & \\mathbf{A}&- \\cr\\hline\n3 & 20 & 10^3 & 10^4 & \\mathbf{B}&- \\cr\\hline\n4 & 20 & 10^3 & 10^3 & \\mathbf C&-  \\cr\\hline\n5 & 25 & 10^3 & 10^4 & -&1,2,3,4  \\cr\\hline\n\\end{array}\n$$\n\n特殊性质 $\\mathbf{A}$：保证 $a_{i,j}=i+j$。\\\n特殊性质 $\\mathbf{B}$：保证 $a$ 中只出现 $0$ 和 $1$。\\\n特殊性质 $\\mathbf{C}$：保证每人初始拥有每类牌恰好一张。\n\n对于所有数据满足：$1\\le n\\le 10^3$，$1\\le m\\le 10^4$，$0\\le |a_{i,j}|\\le 10^8$，$1\\le R_i,M_i \\le m$ 且 $\\sum R_i = \\sum M_i = m$。保证交互库进行的操作均合法。", "locale": "zh-CN"}}}
{"pid": "P10610", "type": "P", "difficulty": 6, "samples": [["4\n0 1\n1 2\n2 3\n3 4\n1 3 5 9", "3\n3 4 2\n1 2 3 4"], ["5\n0 1\n1 -1\n1 -1\n2 3\n3 4\n1 0 3 0 3", "3\n2 5 3\n1 2 4 3 5"], ["4\n0 1\n1 2\n1 3\n1 4\n1 4 3 3", "1\n2\n1 4 2 3"], ["5\n0 1\n1 1\n1 1\n2 1\n3 1\n1 2 2 2 3", "4\n2 4 5 3\n1 3 5 2 4"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["洛谷原创", "Special Judge", "O2优化", "二分图", "洛谷月赛"], "title": "异界之门", "background": "跟随着线索，莲子来到了七夕坂。无暇欣赏此处的风景，高速运转着大脑的莲子，不断寻找异界的线索。翻转的地藏、奇异的裂缝、被隐匿的第五个季节……这个禁忌之中的世界，正向她揭晓着自己的秘密。\n\n但莲子第一时间看到的只有梅莉，来不及思考，她一把抓住了梅莉的手——", "description": "嗅觉敏锐的莲子察觉到，进入异界的方法一定和这些特别的地藏有所联系。她发现它们恰好构成了一棵形状特殊的树。\n\n给定一棵 $n$ 个点的带点权的**有根**树，其根为 $1$，且点 $i$ 的点权为 $w_i$。**其满足对于任意两个深度相同的结点，它们的儿子数也相同**。\n\n为了进入异界，莲子进行了一些操作来改变这棵树的点权：\n\n1. 选择一条边，假设它连接了两点 $(u,v)$，设其中深度更高者为 $u$（即 $u$ 是 $v$ 的儿子），将 $w_u$ 加上 $w_v$。\n2. 上述操作可以被执行任意多次，但是**不能重复选择同一条边**。\n\n经过操作后，莲子求出了树的某个 [DFS 序列](https://oi-wiki.org/graph/dfs/)，并记录下了这个 DFS 序列所对应的点权序列 $c$（具体来说，$c_i$ 为 DFS 序过程中遍历到的第 $i$ 个点的点权）。\n\n不幸的是，她突然忘记了她进行过哪些操作，也忘记了如何 DFS 这棵树，她希望你能还原出任意一组合法的操作方案与 DFS 序列。", "inputFormat": "第一行一个整数 $n$。\n\n对于接下来 $n$ 行：第 $i$ 行两个整数 $f_i,w_i$，其中 $f_i$ 代表点 $i$ 的父节点（特别的，$f_1=0$，对于其余节点有 $1\\le f_i<i$），$w_i$ 代表点 $i$ 的权值。\n\n接下来一行 $n$ 个整数描述序列 $c$，代表莲子的 DFS 序列所对应的点权序列 $c$。保证一定存在一种合法的操作方式和操作后的 DFS 方式得到序列 $c$。", "outputFormat": "第一行一个整数 $m$，表示你进行的操作数。\n\n接下来一行 $m$ 个数，第 $i$ 个数 $x_i$ 代表你在第 $i$ 次操作选择连接节点 $x_i$ 和其父节点 $f_{x_i}$ 的边进行操作。\n\n接下来一行 $n$ 个数描述一个排列 $p$，其中 $p_i$ 代表你构造的 DFS 序列中遍历到的第 $i$ 个节点为点 $p_i$。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ihq8vqnc.png)\n\n其中一种可行的方案是依次操作边 $(2,3),(3,4),(1,2)$，操作后的树的点权序列为 $\\{1,3,5,9\\}$，选出的 DFS 序列为 $\\{1,2,3,4\\}$。\n\n注意到该样例符合特殊性质 $\\mathbf{A}$。\n\n#### 样例 \\#2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z14j0aeu.png)\n\n其中一种可行的方案是依次操作边 $(1,2),(3,5),(1,3)$，操作后的树的点权序列为 $\\{1,0,0,3,3\\}$，选出的 DFS 序列为 $\\{1,2,4,3,5\\}$。\n#### 样例 \\#3\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7livbzzu.png)\n\n其中一种可行的方案是依次操作边 $(1,2)$，操作后的树的点权序列为 $\\{1,3,3,4\\}$，选出的 DFS 序列为 $\\{1,4,2,3\\}$。\n\n注意到该样例符合特殊性质 $\\mathbf{B}$。\n#### 样例 \\#4\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9bopbeh3.png)\n\n其中一种可行的方案是依次操作边 $(1,2),(2,4),(3,5),(1,3)$，操作后的树的点权序列为 $\\{1,2,3,2,2\\}$，选出的 DFS 序列为 $\\{1,3,5,2,4\\}$。\n\n注意到该样例符合特殊性质 $\\mathbf{C}$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 6 & - &-\\cr\\hline\n2 & 10 & 100 & \\mathbf{A}&- \\cr\\hline\n3 & 10 & 100 & \\mathbf{B}&- \\cr\\hline\n4 & 15 & 2\\times 10^3 & \\mathbf{C}&-  \\cr\\hline\n5 & 15 & 2\\times 10^3 & \\mathbf{D}&-  \\cr\\hline\n6 & 15 & 100 & -&1,2,3  \\cr\\hline\n7 & 25 & 2\\times 10^3 & -&1,2,3,4,5,6  \\cr\\hline\n\\end{array}\n$$\n\n特殊性质 $\\mathbf{A}$：保证给出的树满足 $f_i=i-1$ ($i\\ne 1$)。\\\n特殊性质 $\\mathbf{B}$：保证给出的树满足 $f_i=1$ ($i\\ne 1$)。\\\n特殊性质 $\\mathbf{C}$：保证给出的树满足 $w_i=1$。\\\n特殊性质 $\\mathbf{D}$：保证给出的树满足所有非叶节点儿子数不超过 $2$。\n\n对于所有数据满足：$1\\le n\\le 2000$，$-10^8\\le w_i\\le 10^8$，$-10^{14}\\le c_i\\le 10^{14}$。", "locale": "zh-CN", "translations": {"en": {"title": "Gate to Another World", "background": "Following the clues, Renko arrived at Tanabatazaka. With no time to admire the scenery, her mind raced as she searched for traces of another world. Flipped Jizō statues, strange fissures, a hidden fifth season... This forbidden realm was revealing its secrets to her.\n\nBut the first thing Renko saw was Merry. Without hesitation, she grabbed Merry's hand—", "description": "With keen intuition, Renko realized the method to enter this otherworld must be linked to these special Jizō statues. She discovered they formed a uniquely structured tree.\n\nGiven a **rooted** tree with $n$ nodes, where the root is node $1$, and each node $i$ has a weight $w_i$. **For any two nodes at the same depth, they have the same number of children.**\n\nTo enter the otherworld, Renko performed operations to modify the tree's node weights:\n\n1. Select an edge connecting nodes $(u,v)$, where $u$ is the deeper node (i.e., $u$ is $v$'s child). Add $w_v$ to $w_u$.\n2. This operation can be performed any number of times, but **the same edge cannot be selected more than once**.\n\nAfter these operations, Renko derived a [DFS sequence](https://oi-wiki.org/graph/dfs/) of the tree and recorded the corresponding weight sequence $c$ (specifically, $c_i$ is the weight of the $i$-th node visited in the DFS order).\n\nUnfortunately, she forgot which operations she performed and how the DFS was conducted. Your task is to reconstruct any valid set of operations and DFS sequence.", "inputFormat": "- The first line contains an integer $n$.\n- The next $n$ lines each contain two integers $f_i$ and $w_i$:  \n  - $f_i$ is the parent of node $i$ (note: $f_1=0$, and for other nodes, $1 \\leq f_i < i$).  \n  - $w_i$ is the initial weight of node $i$.  \n- The next line contains $n$ integers describing the target weight sequence $c$. It is guaranteed that there exists a valid set of operations and DFS order to achieve $c$.", "outputFormat": "- The first line contains an integer $m$, the number of operations performed.\n- The second line contains $m$ integers $x_1, x_2, \\ldots, x_m$, where $x_i$ represents the edge between node $x_i$ and its parent $f_{x_i}$ chosen in the $i$-th operation.\n- The third line contains a permutation $p$ of $n$ integers, where $p_i$ is the $i$-th node visited in your constructed DFS sequence.", "hint": "### Sample Explanations\n\n#### Sample #1\n\nOne valid solution is to operate edges $(2,3)$, $(3,4)$, $(1,2)$ in order. The final weights are $\\{1,3,5,9\\}$, and the DFS sequence is $1,2,3,4$.  \nThis sample satisfies **Special Property A**.\n\n#### Sample #2\n\nOne valid solution is to operate edges $(1,2)$, $(3,5)$, $(1,3)$. The final weights are $\\{1,0,0,3,3\\}$, and the DFS sequence is $1,2,4,3,5$.\n\n#### Sample #3\n\nOne valid solution is to operate edge $(1,2)$. The final weights are $\\{1,3,3,4\\}$, and the DFS sequence is $1,4,2,3$.  \nThis sample satisfies **Special Property B**.\n\n#### Sample #4\n\nOne valid solution is to operate edges $(1,2)$, $(2,4)$, $(3,5)$, $(1,3)$. The final weights are $\\{1,2,3,2,2\\}$, and the DFS sequence is $1,3,5,2,4$.  \nThis sample satisfies **Special Property C**.\n\n### Constraints\n\n**Bundled testing is used.**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{Points} & \\bm{n \\leq} & \\textbf{Special Property} & \\textbf{Subtask Dependencies} \\cr\\hline\n1 & 10 & 6 & - & - \\cr\\hline\n2 & 10 & 100 & \\mathbf{A} & - \\cr\\hline\n3 & 10 & 100 & \\mathbf{B} & - \\cr\\hline\n4 & 15 & 2 \\times 10^3 & \\mathbf{C} & - \\cr\\hline\n5 & 15 & 2 \\times 10^3 & \\mathbf{D} & - \\cr\\hline\n6 & 15 & 100 & - & 1,2,3 \\cr\\hline\n7 & 25 & 2 \\times 10^3 & - & 1,2,3,4,5,6 \\cr\\hline\n\\end{array}\n$$\n\n**Special Properties**:\n- **A**: The tree satisfies $f_i = i-1$ for $i \\neq 1$.\n- **B**: The tree satisfies $f_i = 1$ for $i \\neq 1$.\n- **C**: All nodes have $w_i = 1$.\n- **D**: All non-leaf nodes have at most 2 children.\n\nFor all data:  \n$1 \\leq n \\leq 2000$, $-10^8 \\leq w_i \\leq 10^8$, $-10^{14} \\leq c_i \\leq 10^{14}$.\n\n---\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "异界之门", "background": "跟随着线索，莲子来到了七夕坂。无暇欣赏此处的风景，高速运转着大脑的莲子，不断寻找异界的线索。翻转的地藏、奇异的裂缝、被隐匿的第五个季节……这个禁忌之中的世界，正向她揭晓着自己的秘密。\n\n但莲子第一时间看到的只有梅莉，来不及思考，她一把抓住了梅莉的手——", "description": "嗅觉敏锐的莲子察觉到，进入异界的方法一定和这些特别的地藏有所联系。她发现它们恰好构成了一棵形状特殊的树。\n\n给定一棵 $n$ 个点的带点权的**有根**树，其根为 $1$，且点 $i$ 的点权为 $w_i$。**其满足对于任意两个深度相同的结点，它们的儿子数也相同**。\n\n为了进入异界，莲子进行了一些操作来改变这棵树的点权：\n\n1. 选择一条边，假设它连接了两点 $(u,v)$，设其中深度更高者为 $u$（即 $u$ 是 $v$ 的儿子），将 $w_u$ 加上 $w_v$。\n2. 上述操作可以被执行任意多次，但是**不能重复选择同一条边**。\n\n经过操作后，莲子求出了树的某个 [DFS 序列](https://oi-wiki.org/graph/dfs/)，并记录下了这个 DFS 序列所对应的点权序列 $c$（具体来说，$c_i$ 为 DFS 序过程中遍历到的第 $i$ 个点的点权）。\n\n不幸的是，她突然忘记了她进行过哪些操作，也忘记了如何 DFS 这棵树，她希望你能还原出任意一组合法的操作方案与 DFS 序列。", "inputFormat": "第一行一个整数 $n$。\n\n对于接下来 $n$ 行：第 $i$ 行两个整数 $f_i,w_i$，其中 $f_i$ 代表点 $i$ 的父节点（特别的，$f_1=0$，对于其余节点有 $1\\le f_i<i$），$w_i$ 代表点 $i$ 的权值。\n\n接下来一行 $n$ 个整数描述序列 $c$，代表莲子的 DFS 序列所对应的点权序列 $c$。保证一定存在一种合法的操作方式和操作后的 DFS 方式得到序列 $c$。", "outputFormat": "第一行一个整数 $m$，表示你进行的操作数。\n\n接下来一行 $m$ 个数，第 $i$ 个数 $x_i$ 代表你在第 $i$ 次操作选择连接节点 $x_i$ 和其父节点 $f_{x_i}$ 的边进行操作。\n\n接下来一行 $n$ 个数描述一个排列 $p$，其中 $p_i$ 代表你构造的 DFS 序列中遍历到的第 $i$ 个节点为点 $p_i$。", "hint": "### 样例解释\n\n#### 样例 \\#1\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ihq8vqnc.png)\n\n其中一种可行的方案是依次操作边 $(2,3),(3,4),(1,2)$，操作后的树的点权序列为 $\\{1,3,5,9\\}$，选出的 DFS 序列为 $\\{1,2,3,4\\}$。\n\n注意到该样例符合特殊性质 $\\mathbf{A}$。\n\n#### 样例 \\#2\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/z14j0aeu.png)\n\n其中一种可行的方案是依次操作边 $(1,2),(3,5),(1,3)$，操作后的树的点权序列为 $\\{1,0,0,3,3\\}$，选出的 DFS 序列为 $\\{1,2,4,3,5\\}$。\n#### 样例 \\#3\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7livbzzu.png)\n\n其中一种可行的方案是依次操作边 $(1,2)$，操作后的树的点权序列为 $\\{1,3,3,4\\}$，选出的 DFS 序列为 $\\{1,4,2,3\\}$。\n\n注意到该样例符合特殊性质 $\\mathbf{B}$。\n#### 样例 \\#4\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9bopbeh3.png)\n\n其中一种可行的方案是依次操作边 $(1,2),(2,4),(3,5),(1,3)$，操作后的树的点权序列为 $\\{1,2,3,2,2\\}$，选出的 DFS 序列为 $\\{1,3,5,2,4\\}$。\n\n注意到该样例符合特殊性质 $\\mathbf{C}$。\n\n### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n\\le } & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 10 & 6 & - &-\\cr\\hline\n2 & 10 & 100 & \\mathbf{A}&- \\cr\\hline\n3 & 10 & 100 & \\mathbf{B}&- \\cr\\hline\n4 & 15 & 2\\times 10^3 & \\mathbf{C}&-  \\cr\\hline\n5 & 15 & 2\\times 10^3 & \\mathbf{D}&-  \\cr\\hline\n6 & 15 & 100 & -&1,2,3  \\cr\\hline\n7 & 25 & 2\\times 10^3 & -&1,2,3,4,5,6  \\cr\\hline\n\\end{array}\n$$\n\n特殊性质 $\\mathbf{A}$：保证给出的树满足 $f_i=i-1$ ($i\\ne 1$)。\\\n特殊性质 $\\mathbf{B}$：保证给出的树满足 $f_i=1$ ($i\\ne 1$)。\\\n特殊性质 $\\mathbf{C}$：保证给出的树满足 $w_i=1$。\\\n特殊性质 $\\mathbf{D}$：保证给出的树满足所有非叶节点儿子数不超过 $2$。\n\n对于所有数据满足：$1\\le n\\le 2000$，$-10^8\\le w_i\\le 10^8$，$-10^{14}\\le c_i\\le 10^{14}$。", "locale": "zh-CN"}}}
{"pid": "P10611", "type": "P", "difficulty": 7, "samples": [["5 5 20\n3 2 1 1 1 \n1 2 2 1 2\n2 2 4 3 4\n1 2 4 5 6\n1 1 3 4 4\n1 1 5 5 4\n1 3 4 3 1\n1 1 2 4 2\n1 5 5 5 8\n2 2 4 2 5\n2 1 5 3 5\n2 3 5 1 3\n1 1 4 2 6\n2 1 1 1 3\n1 2 4 4 10\n2 2 5 3 4\n2 1 4 1 4\n2 4 5 4 5\n1 2 2 2 5\n1 4 4 4 9\n1 2 5 3 6\n", "0\n4\n8\n12\n4\n10\n20\n10\n"]], "limits": {"time": [8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000, 8000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["线段树", "颜色段均摊（珂朵莉树 ODT）", "洛谷原创", "O2优化", "分治", "扫描线", "洛谷月赛"], "title": "故事结局", "background": "莲子最终有惊无险的救下了梅莉，虽然梅莉本人似乎对此不以为意，而且还对莲子的观点有很多看法……不过她们很快就和好如初，然后一起度过了一段甜蜜的时光。\n\n但是你既不是莲子也不是梅莉，所以在故事的结尾，你需要做一道数据结构题。", "description": "你需要维护一个大小为 $n \\times m$ 的矩阵 $A$，初始时其所有元素均为 $0$。题目还给出了一个长度为 $m$ 的序列 $b$。\n\n共有 $q$ 次操作，分为两种：\n\n- `1 l r x v`，对于 $l \\le i \\le r$，将 $A_{x,i}$ 修改为 $v$。\n\n- `2 l r x y`，查询 $\\max\\limits_{i=l}^r \\max\\limits_{j=x}^y (A_{i,j} \\times b_j)$。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第二行 $m$ 个整数描述序列 $b$。\n\n接下来 $q$ 行，每行描述一次操作，要么格式为 `1 l r x v`，要么格式为 `2 l r x y`。", "outputFormat": "对于每次 `2` 操作，输出一行一个整数表示查询的结果。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n,q\\le } & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 5 & 100 & - &-\\cr\\hline\n2 & 5 & 5000 & -&- \\cr\\hline\n3 & 20 & 2 \\times 10^5 & \\mathbf{A}&- \\cr\\hline\n4 & 10 & 2 \\times 10^5 & \\mathbf{B}&- \\cr\\hline\n5 & 10 & 2\\times 10^5 & \\mathbf{C}&-  \\cr\\hline\n6 & 10 & 2\\times 10^5 & \\mathbf{D}&-  \\cr\\hline\n7 & 20 & 2\\times 10^5 & -&1,2,3,4,5,6  \\cr\\hline\n8 & 20 & 4\\times 10^5 & -&7  \\cr\\hline\n\\end{array}\n$$\n\n特殊性质 $\\mathbf{A}$：保证所有修改在查询之前。\\\n特殊性质 $\\mathbf{B}$：对于修改操作保证 $l=r$。\\\n特殊性质 $\\mathbf{C}$：保证数据随机（随机方法见下）。\\\n特殊性质 $\\mathbf{D}$：保证 $b$ 序列满足所有 $b_i=1$。\n\n对于所有数据满足：$1 \\le n,m,q \\le 4 \\times 10^5$。$1 \\le b_i \\le 10^9$。\n\n**在所有 $q$ 次操作中，修改操作出现不超过 $\\dfrac{q}{4}$ 次。**\n\n对于一操作，$1 \\le l \\le r \\le m,1 \\le x \\le n,1 \\le v \\le  10^9$。\n\n对于二操作，$1 \\le l \\le r \\le n,1 \\le x \\le y \\le m$。\n\n数据随机的方式：$n,m,q$ 事先选定，不是随机的。然后均匀随机取 $\\left \\lfloor \\dfrac{q}{4} \\right \\rfloor$ 次操作为修改操作，剩下的为查询操作。对于操作的所有参数以及 $b$ 序列在其限制范围内等概率随机。", "locale": "zh-CN", "translations": {"en": {"title": "The End of the Story", "background": "In the end, Renko managed to rescue Merry without major mishaps. Though Merry herself seemed unfazed and had many opinions about Renko's approach... they quickly reconciled and spent a sweet time together.\n\nBut you are neither Renko nor Merry. So at the story's conclusion, you must solve a data structure problem.", "description": "You need to maintain an $n \\times m$ matrix $A$ where all elements are initially $0$. A sequence $b$ of length $m$ is also given.\n\nThere are $q$ operations of two types:\n\n- `1 l r x v`: For $l \\le i \\le r$, set $A_{x,i}$ to $v$.\n- `2 l r x y`: Query $\\max\\limits_{i=l}^r \\max\\limits_{j=x}^y (A_{i,j} \\times b_j)$.", "inputFormat": "- The first line contains three integers $n$, $m$, $q$.\n- The second line contains $m$ integers describing sequence $b$.\n- The next $q$ lines describe operations, each in the format `1 l r x v` or `2 l r x y`.", "outputFormat": "For each `2` operation, output a single integer representing the query result.", "hint": "### Constraints\n\n**Bundled testing is used.**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{Points} & \\bm{n,q \\leq} & \\textbf{Special Property} & \\textbf{Subtask Dependencies} \\cr\\hline\n1 & 5 & 100 & - & - \\cr\\hline\n2 & 5 & 5000 & - & - \\cr\\hline\n3 & 20 & 2 \\times 10^5 & \\mathbf{A} & - \\cr\\hline\n4 & 10 & 2 \\times 10^5 & \\mathbf{B} & - \\cr\\hline\n5 & 10 & 2 \\times 10^5 & \\mathbf{C} & - \\cr\\hline\n6 & 10 & 2 \\times 10^5 & \\mathbf{D} & - \\cr\\hline\n7 & 20 & 2 \\times 10^5 & - & 1,2,3,4,5,6 \\cr\\hline\n8 & 20 & 4 \\times 10^5 & - & 7 \\cr\\hline\n\\end{array}\n$$\n\n**Special Properties**:\n- **A**: All modifications occur before queries.\n- **B**: For modify operations, $l = r$.\n- **C**: Data is randomly generated (see details below).\n- **D**: All $b_i = 1$.\n\n**For all data**:\n- $1 \\leq n, m, q \\leq 4 \\times 10^5$.\n- $1 \\leq b_i \\leq 10^9$.\n- **At most $\\dfrac{q}{4}$ of the operations are modify operations**.\n- For modify operations: $1 \\leq l \\leq r \\leq m$, $1 \\leq x \\leq n$, $1 \\leq v \\leq 10^9$.\n- For query operations: $1 \\leq l \\leq r \\leq n$, $1 \\leq x \\leq y \\leq m$.\n\n**Data randomization method**:\n- $n$, $m$, and $q$ are predetermined (not random).\n- Exactly $\\left\\lfloor \\dfrac{q}{4} \\right\\rfloor$ operations are uniformly randomly selected as modify operations, with the rest as queries.\n- All parameters for operations and the $b$ sequence are randomly sampled within their constraints with equal probability.\n\n---\n\nTranslated by DeepSeek R1", "locale": "en"}, "zh-CN": {"title": "故事结局", "background": "莲子最终有惊无险的救下了梅莉，虽然梅莉本人似乎对此不以为意，而且还对莲子的观点有很多看法……不过她们很快就和好如初，然后一起度过了一段甜蜜的时光。\n\n但是你既不是莲子也不是梅莉，所以在故事的结尾，你需要做一道数据结构题。", "description": "你需要维护一个大小为 $n \\times m$ 的矩阵 $A$，初始时其所有元素均为 $0$。题目还给出了一个长度为 $m$ 的序列 $b$。\n\n共有 $q$ 次操作，分为两种：\n\n- `1 l r x v`，对于 $l \\le i \\le r$，将 $A_{x,i}$ 修改为 $v$。\n\n- `2 l r x y`，查询 $\\max\\limits_{i=l}^r \\max\\limits_{j=x}^y (A_{i,j} \\times b_j)$。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第二行 $m$ 个整数描述序列 $b$。\n\n接下来 $q$ 行，每行描述一次操作，要么格式为 `1 l r x v`，要么格式为 `2 l r x y`。", "outputFormat": "对于每次 `2` 操作，输出一行一个整数表示查询的结果。", "hint": "### 数据范围\n\n**本题采用捆绑测试。**\n\n$$\n\\def\\arraystretch{1.5}\n\\begin{array}{|c|c|c|c|c|}\\hline\n\\textbf{Subtask} & \\textbf{\\textsf{分值}} & \\bm{n,q\\le } & \\textbf{\\textsf{特殊性质}}&\\textbf{Subtask \\textsf{依赖}}\\cr\\hline\n1 & 5 & 100 & - &-\\cr\\hline\n2 & 5 & 5000 & -&- \\cr\\hline\n3 & 20 & 2 \\times 10^5 & \\mathbf{A}&- \\cr\\hline\n4 & 10 & 2 \\times 10^5 & \\mathbf{B}&- \\cr\\hline\n5 & 10 & 2\\times 10^5 & \\mathbf{C}&-  \\cr\\hline\n6 & 10 & 2\\times 10^5 & \\mathbf{D}&-  \\cr\\hline\n7 & 20 & 2\\times 10^5 & -&1,2,3,4,5,6  \\cr\\hline\n8 & 20 & 4\\times 10^5 & -&7  \\cr\\hline\n\\end{array}\n$$\n\n特殊性质 $\\mathbf{A}$：保证所有修改在查询之前。\\\n特殊性质 $\\mathbf{B}$：对于修改操作保证 $l=r$。\\\n特殊性质 $\\mathbf{C}$：保证数据随机（随机方法见下）。\\\n特殊性质 $\\mathbf{D}$：保证 $b$ 序列满足所有 $b_i=1$。\n\n对于所有数据满足：$1 \\le n,m,q \\le 4 \\times 10^5$。$1 \\le b_i \\le 10^9$。\n\n**在所有 $q$ 次操作中，修改操作出现不超过 $\\dfrac{q}{4}$ 次。**\n\n对于一操作，$1 \\le l \\le r \\le m,1 \\le x \\le n,1 \\le v \\le  10^9$。\n\n对于二操作，$1 \\le l \\le r \\le n,1 \\le x \\le y \\le m$。\n\n数据随机的方式：$n,m,q$ 事先选定，不是随机的。然后均匀随机取 $\\left \\lfloor \\dfrac{q}{4} \\right \\rfloor$ 次操作为修改操作，剩下的为查询操作。对于操作的所有参数以及 $b$ 序列在其限制范围内等概率随机。", "locale": "zh-CN"}}}
{"pid": "P10612", "type": "P", "difficulty": 6, "samples": [["2 3\n9\n7\n10\n8\n6\n5\n2\n4\n1\n3", "0 1 0\n0 1 1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2001", "Special Judge", "构造", "BalticOI（波罗的海）", "Ad-hoc"], "title": "[BalticOI 2001] Box of Mirrors", "background": "", "description": "数学家 Andris 有一个小盒子，其底部是 $n\\times m$ 的格子，每个格子可以放一面 $45$ 度朝向的镜子。\n\n在盒子的边界，每行每列的两端，有一些孔，光线可以从中射入盒子，也可以射出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i5gnsp7v.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1xl9wkfz.png)\n\n如上图所示，从孔 $2$ 射进盒子的光线经过两次反射后又从孔 $7$ 射出。\n\nAndris 想请你设计一个盒子，使得从每个孔射入的光线都会从指定的孔射出。\n\n例如，如果他希望从 $10$ 个孔里射入的光线分别由孔 $9,7,10,8,6,5,2,4,1,3$ 射出，则上图也是一个满足要求的盒子。\n\n注意，孔的编号如图从 $1$ 到 $2\\times (n+m)$ 编号。", "inputFormat": "第一行两个整数 $n,m$，表示盒子的大小。\n\n接下来 $2\\times (n+m)$ 行，第 $i+1$ 行一个整数 $a_i$，表示从第 $i$ 个孔射入的光线要从第 $a_i$ 个孔中射出。", "outputFormat": "输出一个 $n\\times m$ 的矩阵，对于每个位置，$0$ 表示不放镜子，$1$ 表示放镜子，需要满足对应的要求。数据保证一定有解。", "hint": "对于 $100\\%$ 的数据，$1\\leq n,m\\leq 100$，$1\\leq a_i\\leq 2\\times (n+m)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[BalticOI 2001] Box of Mirrors", "background": "", "description": "数学家 Andris 有一个小盒子，其底部是 $n\\times m$ 的格子，每个格子可以放一面 $45$ 度朝向的镜子。\n\n在盒子的边界，每行每列的两端，有一些孔，光线可以从中射入盒子，也可以射出。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/i5gnsp7v.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1xl9wkfz.png)\n\n如上图所示，从孔 $2$ 射进盒子的光线经过两次反射后又从孔 $7$ 射出。\n\nAndris 想请你设计一个盒子，使得从每个孔射入的光线都会从指定的孔射出。\n\n例如，如果他希望从 $10$ 个孔里射入的光线分别由孔 $9,7,10,8,6,5,2,4,1,3$ 射出，则上图也是一个满足要求的盒子。\n\n注意，孔的编号如图从 $1$ 到 $2\\times (n+m)$ 编号。", "inputFormat": "第一行两个整数 $n,m$，表示盒子的大小。\n\n接下来 $2\\times (n+m)$ 行，第 $i+1$ 行一个整数 $a_i$，表示从第 $i$ 个孔射入的光线要从第 $a_i$ 个孔中射出。", "outputFormat": "输出一个 $n\\times m$ 的矩阵，对于每个位置，$0$ 表示不放镜子，$1$ 表示放镜子，需要满足对应的要求。数据保证一定有解。", "hint": "对于 $100\\%$ 的数据，$1\\leq n,m\\leq 100$，$1\\leq a_i\\leq 2\\times (n+m)$。", "locale": "zh-CN"}}}
