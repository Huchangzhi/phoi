{"pid": "P7890", "type": "P", "difficulty": 7, "samples": [["3 1926195307\n2 3 3\n3 3 3\n5 6 1", "8\n64\n363031200"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2021", "Special Judge", "O2优化", "哈希 hashing", "素数判断,质数,筛法", "最大公约数 gcd", "莫比乌斯反演", "组合数学", "随机化", "洛谷月赛"], "title": "「MCOI-06」Lost Desire", "background": "頰滴る　紅い涙\n\n不安定な視界の中\n\n差し出した手を取れたら\n\nあぁ…そんな世界を夢みた\n\n-------\n\n哭いて…\n\n激しく  燃やした 黒い感情 \n\n届かぬ この手に\n\nCry 闇の中で\n\n最果てから 光へ手を翳して\n\n揺らいだ想いさえも 闇の奥底へ堕ちてく\n\n[网易云本曲试听链接](https://music.163.com/song?id=1809745288&userid=1399272307)", "description": "设正整数 $n, m$ 互质，$k$ 为整数，定义函数 $F(n, m, k)$ 为小于 $\\displaystyle m+n$ 的正整数集合 $\\{1, 2, \\cdots, m + n - 1\\}$ 中，所有满足 $\\displaystyle\\sum_{x \\in S} x \\equiv k \\pmod n$ 的 $m$ 元子集 $S$ 的个数。\n\n现给定正整数 $N, M, K$，求所有 $F(i,j,x)$ 之积，使得 $1\\le i\\le N$，$1\\le j\\le M$，$1\\le x\\le K$，并且 $i$ 与 $j$ 互质。\n\n由于结果很大，所以你只需要求出结果对特定素数 $p$ 取模的值。\n\n**同时请注意实现程序时常数因子带来的影响。**", "inputFormat": "**本题多测。** 每个测试点共有 $T$ 组数据。\n\n第一行两个正整数 $T,p$ 。\n\n接下来 $T$ 行，每行三个正整数 $N, M, K$，由空格分开。", "outputFormat": "对于每组数据：一行，一个整数，表示所求的值（对 $p$ 取模）。\n", "hint": "本题采用捆绑测试，分 $5$ 个 Subtask 。\n\n+ 对于 Subtask 1 ~~(Tutorial)~~：\n  + $T=1$\n  + $1\\leq N,M,K\\leq 6$\n  + $p=10^9+7$。\n+ 对于 Subtask 2 ~~(PST 4.0)~~：\n  + $T=1$\n  + $1\\leq N,M,K\\leq200$\n  + $p=10^9+7$。\n+ 对于 Subtask 3 ~~(PRS 7.5)~~：\n  + $T=100$\n  + $1\\leq N,M,K\\leq 1000$\n  + $p=10^9+7$。\n+ 对于 Subtask 4 ~~(FTR 9.8)~~：\n  + $T=10^3$\n  + $1 \\leq N,M,K\\le 10^5$\n  + $10^9\\le p\\le2\\times10^9$。\n+ 对于 Subtask 5 ~~(BYD 11.0)~~：\n  + $T=9999$\n  + $1 \\leq N,M,K\\le 5\\times10^5$\n  + $10^9\\le p\\le2\\times10^9$。\n\nSubtask $1\\sim5$ 的分值分别为 $5,7,11,17,60$ 。\n\n特别的，假设您在一个测试点中前 $x$ 个询问正确，则您得该测试点的分值的 $\\left\\lfloor100\\times\\sqrt\\dfrac{x}{T}\\right\\rfloor\\%$ 分。您在任何一个 Subtask 的得分则为对应 Subtask 中所有测试点得分的最小值。\n\n特别的，**TLE 一律不得分。**（无需补满未在时间范围内解决的测试点的答案，会导致奇怪的错误。）\n\n**再次提醒注意实现程序时常数因子带来的影响。**\n\n---\n\nIdea: Powerless Std&Data: w33z （Data was corrected on 2021.10.05）\n\nSub4 added by Prean, Sub 5 by w33z.\n\nThis problem was added on 2021.10.01. Thanks for their help.\n\n2021.10.01 - 2021.12.07 : 68 days 1st kill (Leasier).\n\n2021.10.01 - 2022.01.21 : 113 days 2nd kill (wkywkywky).\n\n2021.10.01 - 2022.02.26 : 149 days 3rd kill (NaNH2).", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「MCOI-06」Lost Desire", "background": "頰滴る　紅い涙\n\n不安定な視界の中\n\n差し出した手を取れたら\n\nあぁ…そんな世界を夢みた\n\n-------\n\n哭いて…\n\n激しく  燃やした 黒い感情 \n\n届かぬ この手に\n\nCry 闇の中で\n\n最果てから 光へ手を翳して\n\n揺らいだ想いさえも 闇の奥底へ堕ちてく\n\n[网易云本曲试听链接](https://music.163.com/song?id=1809745288&userid=1399272307)", "description": "设正整数 $n, m$ 互质，$k$ 为整数，定义函数 $F(n, m, k)$ 为小于 $\\displaystyle m+n$ 的正整数集合 $\\{1, 2, \\cdots, m + n - 1\\}$ 中，所有满足 $\\displaystyle\\sum_{x \\in S} x \\equiv k \\pmod n$ 的 $m$ 元子集 $S$ 的个数。\n\n现给定正整数 $N, M, K$，求所有 $F(i,j,x)$ 之积，使得 $1\\le i\\le N$，$1\\le j\\le M$，$1\\le x\\le K$，并且 $i$ 与 $j$ 互质。\n\n由于结果很大，所以你只需要求出结果对特定素数 $p$ 取模的值。\n\n**同时请注意实现程序时常数因子带来的影响。**", "inputFormat": "**本题多测。** 每个测试点共有 $T$ 组数据。\n\n第一行两个正整数 $T,p$ 。\n\n接下来 $T$ 行，每行三个正整数 $N, M, K$，由空格分开。", "outputFormat": "对于每组数据：一行，一个整数，表示所求的值（对 $p$ 取模）。\n", "hint": "本题采用捆绑测试，分 $5$ 个 Subtask 。\n\n+ 对于 Subtask 1 ~~(Tutorial)~~：\n  + $T=1$\n  + $1\\leq N,M,K\\leq 6$\n  + $p=10^9+7$。\n+ 对于 Subtask 2 ~~(PST 4.0)~~：\n  + $T=1$\n  + $1\\leq N,M,K\\leq200$\n  + $p=10^9+7$。\n+ 对于 Subtask 3 ~~(PRS 7.5)~~：\n  + $T=100$\n  + $1\\leq N,M,K\\leq 1000$\n  + $p=10^9+7$。\n+ 对于 Subtask 4 ~~(FTR 9.8)~~：\n  + $T=10^3$\n  + $1 \\leq N,M,K\\le 10^5$\n  + $10^9\\le p\\le2\\times10^9$。\n+ 对于 Subtask 5 ~~(BYD 11.0)~~：\n  + $T=9999$\n  + $1 \\leq N,M,K\\le 5\\times10^5$\n  + $10^9\\le p\\le2\\times10^9$。\n\nSubtask $1\\sim5$ 的分值分别为 $5,7,11,17,60$ 。\n\n特别的，假设您在一个测试点中前 $x$ 个询问正确，则您得该测试点的分值的 $\\left\\lfloor100\\times\\sqrt\\dfrac{x}{T}\\right\\rfloor\\%$ 分。您在任何一个 Subtask 的得分则为对应 Subtask 中所有测试点得分的最小值。\n\n特别的，**TLE 一律不得分。**（无需补满未在时间范围内解决的测试点的答案，会导致奇怪的错误。）\n\n**再次提醒注意实现程序时常数因子带来的影响。**\n\n---\n\nIdea: Powerless Std&Data: w33z （Data was corrected on 2021.10.05）\n\nSub4 added by Prean, Sub 5 by w33z.\n\nThis problem was added on 2021.10.01. Thanks for their help.\n\n2021.10.01 - 2021.12.07 : 68 days 1st kill (Leasier).\n\n2021.10.01 - 2022.01.21 : 113 days 2nd kill (wkywkywky).\n\n2021.10.01 - 2022.02.26 : 149 days 3rd kill (NaNH2).", "locale": "zh-CN"}}}
{"pid": "P7891", "type": "P", "difficulty": 3, "samples": [["2\n3 2", "2 3"], ["5\n1 2 3 4 5", "9 6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2023", "O2优化", "语言月赛"], "title": "[入门赛 #10] Coin Selection G（hard version）", "background": "", "description": "Farmer John 和 Bessie 正在一起玩硬币选择游戏。\n\n初始时桌面上有 $n$ 枚硬币，每枚硬币有一个面额，我们使用 $a _ 1, a _ 2, \\cdots, a _ n$ 分别代表第 $1, 2, \\cdots, n$ 枚硬币的面额。\n\n他们还各有一个属于自己的钱包，初始时，钱包都是空的。\n\n从 **Bessie** 开始，双方轮流操作。每次操作中，当前的操作者会从桌面上剩余的硬币中选择**面值不超过当前自己钱包中硬币的总面额**的硬币中**面额最大的**一枚硬币，把它从桌子上拿走，放到自己的钱包里。如果桌面上剩余的**所有**硬币面值都**超过了自己钱包里已有硬币的总面额**，那么选择剩余的所有硬币中面额**最小**的一个。\n\n当桌面上没有硬币时，游戏结束。\n\n请你分别求出，\t游戏结束后，Farmer John 和 Bessie 钱包里硬币的总面额。", "inputFormat": "第一行为一个整数，代表初始时桌面上的硬币的数量 $n$。  \n第二行为 $n$ 个整数 $a _ 1, a _ 2, \\cdots, a _ n$，分别代表第 $1, 2, \\cdots, n$ 枚硬币的面额。", "outputFormat": "输出一行两个整数，第一个整数表示 Bessie 最终钱包里硬币的总面额，第二个整数表示 Farmer John 最终钱包里的总面额。", "hint": "### 数据规模与约定\n\n- 对 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq a_i \\leq 10^{9}$。\n\nProvider：一扶苏一", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[入门赛 #10] Coin Selection G（hard version）", "background": "", "description": "Farmer John 和 Bessie 正在一起玩硬币选择游戏。\n\n初始时桌面上有 $n$ 枚硬币，每枚硬币有一个面额，我们使用 $a _ 1, a _ 2, \\cdots, a _ n$ 分别代表第 $1, 2, \\cdots, n$ 枚硬币的面额。\n\n他们还各有一个属于自己的钱包，初始时，钱包都是空的。\n\n从 **Bessie** 开始，双方轮流操作。每次操作中，当前的操作者会从桌面上剩余的硬币中选择**面值不超过当前自己钱包中硬币的总面额**的硬币中**面额最大的**一枚硬币，把它从桌子上拿走，放到自己的钱包里。如果桌面上剩余的**所有**硬币面值都**超过了自己钱包里已有硬币的总面额**，那么选择剩余的所有硬币中面额**最小**的一个。\n\n当桌面上没有硬币时，游戏结束。\n\n请你分别求出，\t游戏结束后，Farmer John 和 Bessie 钱包里硬币的总面额。", "inputFormat": "第一行为一个整数，代表初始时桌面上的硬币的数量 $n$。  \n第二行为 $n$ 个整数 $a _ 1, a _ 2, \\cdots, a _ n$，分别代表第 $1, 2, \\cdots, n$ 枚硬币的面额。", "outputFormat": "输出一行两个整数，第一个整数表示 Bessie 最终钱包里硬币的总面额，第二个整数表示 Farmer John 最终钱包里的总面额。", "hint": "### 数据规模与约定\n\n- 对 $100\\%$ 的数据，保证 $1 \\leq n \\leq 10^5$，$1 \\leq a_i \\leq 10^{9}$。\n\nProvider：一扶苏一", "locale": "zh-CN"}}}
{"pid": "P7892", "type": "P", "difficulty": 2, "samples": [["2\n4 1\n4 20", "Miss\nGood"]], "limits": {"time": [150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "O2优化"], "title": "『JROI-3』田径", "background": "你准备玩起 MC。", "description": "你需要用栅栏框住一个长方形区域，假设这个长方形区域大小为 $a \\times b$ 个像素格，则需要长为 $a+1$，宽为 $b+1$ 规模的栅栏框住这个区域。\n\n现在你发现他的羊和牛需要**恰好** $n$ 个像素格才够生存，而你的背包里有 $m$ 个栅栏，你想知道，你用你所拥有的的栅栏是否能框出 $n$ 个像素格？\n\n不需要用光所有栅栏，只要框出区域大小为 $n$ 个像素格的长方形即可。\n\n注意，上面的 $a,b,n,m$ 都应是整数。", "inputFormat": "第一行一个整数 $T$，表示测试组数。\n\n接下来 $T$ 行，一行两个整数 $n,m$，同题意。", "outputFormat": "一行一个字符串，如果可行输出 `Good`，如果不可行输出 `Miss`。", "hint": "#### 样例 1 解释\n\n第一组数据：\n\n实测可证，无法用 $1$ 个栅栏围出 $4$ 个像素格。\n\n第二组数据：\n\n可以考虑围出如下 $4=1 \\times 4$ 的像素格。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bho8z78k.png)\n\n用下方的方式只需要用 $14$ 个栅栏即可。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o8s6bz81.png)\n\n栅栏宽为 $1+1=2$，长为 $4+1=5$，$(2+5) \\times 2=14$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（30 pts）：$1\\le n,m \\le 10^4$，$T \\leq 10^3$；\n- Subtask 2（70 pts）：$1\\le n,m \\le 10^{8}$，$T \\leq 10^3$。\n\n----\n在本题中栅栏是**抽象化**的而非具象化的，即栅栏将会**退化成一个点而非一个方格**，也就是我们可以通过**求周长的方式**求出一个栅栏框所需消耗的栅栏（如果不理解可以看看样例 1 解释）。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-3』田径", "background": "你准备玩起 MC。", "description": "你需要用栅栏框住一个长方形区域，假设这个长方形区域大小为 $a \\times b$ 个像素格，则需要长为 $a+1$，宽为 $b+1$ 规模的栅栏框住这个区域。\n\n现在你发现他的羊和牛需要**恰好** $n$ 个像素格才够生存，而你的背包里有 $m$ 个栅栏，你想知道，你用你所拥有的的栅栏是否能框出 $n$ 个像素格？\n\n不需要用光所有栅栏，只要框出区域大小为 $n$ 个像素格的长方形即可。\n\n注意，上面的 $a,b,n,m$ 都应是整数。", "inputFormat": "第一行一个整数 $T$，表示测试组数。\n\n接下来 $T$ 行，一行两个整数 $n,m$，同题意。", "outputFormat": "一行一个字符串，如果可行输出 `Good`，如果不可行输出 `Miss`。", "hint": "#### 样例 1 解释\n\n第一组数据：\n\n实测可证，无法用 $1$ 个栅栏围出 $4$ 个像素格。\n\n第二组数据：\n\n可以考虑围出如下 $4=1 \\times 4$ 的像素格。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bho8z78k.png)\n\n用下方的方式只需要用 $14$ 个栅栏即可。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o8s6bz81.png)\n\n栅栏宽为 $1+1=2$，长为 $4+1=5$，$(2+5) \\times 2=14$。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（30 pts）：$1\\le n,m \\le 10^4$，$T \\leq 10^3$；\n- Subtask 2（70 pts）：$1\\le n,m \\le 10^{8}$，$T \\leq 10^3$。\n\n----\n在本题中栅栏是**抽象化**的而非具象化的，即栅栏将会**退化成一个点而非一个方格**，也就是我们可以通过**求周长的方式**求出一个栅栏框所需消耗的栅栏（如果不理解可以看看样例 1 解释）。", "locale": "zh-CN"}}}
{"pid": "P7893", "type": "P", "difficulty": 3, "samples": [["1\n3 2", "2"], ["1\n100 5", "84"]], "limits": {"time": [1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200, 1200], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["数学", "2021", "O2优化", "容斥原理", "洛谷月赛"], "title": "『JROI-3』Reversi", "background": "**赛时提醒：如果您始终是 30pts，且使用了题目给的快速读入，请重新拷贝修改后的快速读入。**\n\n**赛时提醒：本题如果解法正确，快读可能无法起到优化作用。**\n\n\t这个恐怕是将存在乃至于记忆切割成三十二颗的争夺黑白棋。\n\n    双方剩下的棋子数字都很小——也就是重要性很高吧。\n\n\t\t\t\t......\n            \n    ——哥哥为什么会让自己落单呢？她原本对此感到疑惑。\n\n    不过，在得知答案之后，那可以说是理所当然的做法。\n\n    首先，第一个理由极为单纯。\n\n    故意将记忆托付给对方，暂时屈居败势的目的是——\n\n    「……那种事……白……做不到啊……」\n\n    想像了一下，白露出悲伤的笑容，做出这个结论。\n\n    哥哥做的这些事，如果由白执行……白不觉得自己的精神能够保持正常。\n\n    自己仅仅因为哥哥从身旁消失，就甚至一度怀疑哥哥的存在。\n\n    ——被忘掉的话还好。\n\n    ——忘掉哥哥的话——白确信自己的精神会无法保持正常。\n    \n\t\t\t\t......\n                \n    （……这里……哥哥在……这里……）\n\n    即使是空无一物的空间，但是白确信，她感觉得到哥哥的位置。\n\n    白顿时眼眶一热，不过她强行忍住，继续思考。\n\n    （……然后这就是……第二个……同时也是……最大的……理由。）\n\n    白将写着【参】的棋子白色面朝上，用手指夹住。\n\n    哥哥是『白色还是黑色』，这个问题也不需要犹豫。\n\n    因为既然他将最后的棋局托付给『白』——那他当然是持白棋。\n\n    这个现在看不见，甚至无法认知的棋局。\n\n    既没有开始的记忆，也不知道盘面的经过如何。\n\n    不过哥哥故意下输，并且为了让白能获胜所可能下的棋步……\n\n    而对方看到之后，完全中了哥哥的计谋，被诱导而下的棋步……\n\n    然后，为了逆转，哥哥可能选择的所有位置分布。\n\n    将这些全部推测分析——仅用三步棋反败为胜。\n\n\t\t\t\t......\n            \n    然后——原先失去一天半的记忆——逆流了回来——\n", "description": "**白**在和森精种玩黑白棋，但黑白棋的规则有所改变。\n\n有 $n$ 个黑白棋子，第 $i$ 个棋子编号为 $i$。棋子初始全为黑，游戏中，仅由**白**一人操作，**白**希望尽可能多的把棋子变成白色。\n\n**白**要求第 $k$ 个棋子和第 $k \\times p$ 个不能同时变成白色。\n\n**白**共玩了 $T$ 次，每次**白**想知道最多能把多少棋子变成白色。**每次游戏独立。**\n\n为避免混淆，加粗的**白**是人名。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。\n\n下面 $T$ 行每行两个整数 $n,p$，同题意。", "outputFormat": "共 $T$ 行，每行一个正整数，表示**白**最多能把多少枚棋子变为白色。", "hint": "#### 样例 1 解释\n\n可以选择第 $2,3$ 个棋子变色。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$T \\le 5$，$n \\le 2$；\n- Subtask 2（5 pts）：$T \\le 5$，$n \\le 10$；\n- Subtask 3（20 pts）：$T \\le 5$，$n \\le 10^6$；\n- Subtask 4（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le T \\le 10^6$，$0 \\le n \\le 10^{18}$，$1 \\le p \\le 10^{9}$。\n\n```\n//快读模板\n//赛时提醒：快读没有太大必要使用\ninline long long read(){\n   long long s=0,w=1;\n   char ch=getchar();\n   while(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n   while(ch>='0'&&ch<='9')s=s*10+ch-'0',ch=getchar();\n   return s*w;\n}\n```", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-3』Reversi", "background": "**赛时提醒：如果您始终是 30pts，且使用了题目给的快速读入，请重新拷贝修改后的快速读入。**\n\n**赛时提醒：本题如果解法正确，快读可能无法起到优化作用。**\n\n\t这个恐怕是将存在乃至于记忆切割成三十二颗的争夺黑白棋。\n\n    双方剩下的棋子数字都很小——也就是重要性很高吧。\n\n\t\t\t\t......\n            \n    ——哥哥为什么会让自己落单呢？她原本对此感到疑惑。\n\n    不过，在得知答案之后，那可以说是理所当然的做法。\n\n    首先，第一个理由极为单纯。\n\n    故意将记忆托付给对方，暂时屈居败势的目的是——\n\n    「……那种事……白……做不到啊……」\n\n    想像了一下，白露出悲伤的笑容，做出这个结论。\n\n    哥哥做的这些事，如果由白执行……白不觉得自己的精神能够保持正常。\n\n    自己仅仅因为哥哥从身旁消失，就甚至一度怀疑哥哥的存在。\n\n    ——被忘掉的话还好。\n\n    ——忘掉哥哥的话——白确信自己的精神会无法保持正常。\n    \n\t\t\t\t......\n                \n    （……这里……哥哥在……这里……）\n\n    即使是空无一物的空间，但是白确信，她感觉得到哥哥的位置。\n\n    白顿时眼眶一热，不过她强行忍住，继续思考。\n\n    （……然后这就是……第二个……同时也是……最大的……理由。）\n\n    白将写着【参】的棋子白色面朝上，用手指夹住。\n\n    哥哥是『白色还是黑色』，这个问题也不需要犹豫。\n\n    因为既然他将最后的棋局托付给『白』——那他当然是持白棋。\n\n    这个现在看不见，甚至无法认知的棋局。\n\n    既没有开始的记忆，也不知道盘面的经过如何。\n\n    不过哥哥故意下输，并且为了让白能获胜所可能下的棋步……\n\n    而对方看到之后，完全中了哥哥的计谋，被诱导而下的棋步……\n\n    然后，为了逆转，哥哥可能选择的所有位置分布。\n\n    将这些全部推测分析——仅用三步棋反败为胜。\n\n\t\t\t\t......\n            \n    然后——原先失去一天半的记忆——逆流了回来——\n", "description": "**白**在和森精种玩黑白棋，但黑白棋的规则有所改变。\n\n有 $n$ 个黑白棋子，第 $i$ 个棋子编号为 $i$。棋子初始全为黑，游戏中，仅由**白**一人操作，**白**希望尽可能多的把棋子变成白色。\n\n**白**要求第 $k$ 个棋子和第 $k \\times p$ 个不能同时变成白色。\n\n**白**共玩了 $T$ 次，每次**白**想知道最多能把多少棋子变成白色。**每次游戏独立。**\n\n为避免混淆，加粗的**白**是人名。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。\n\n下面 $T$ 行每行两个整数 $n,p$，同题意。", "outputFormat": "共 $T$ 行，每行一个正整数，表示**白**最多能把多少枚棋子变为白色。", "hint": "#### 样例 1 解释\n\n可以选择第 $2,3$ 个棋子变色。\n\n#### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n- Subtask 1（5 pts）：$T \\le 5$，$n \\le 2$；\n- Subtask 2（5 pts）：$T \\le 5$，$n \\le 10$；\n- Subtask 3（20 pts）：$T \\le 5$，$n \\le 10^6$；\n- Subtask 4（70 pts）：无特殊限制。\n\n对于 $100\\%$ 的数据满足，$1 \\le T \\le 10^6$，$0 \\le n \\le 10^{18}$，$1 \\le p \\le 10^{9}$。\n\n```\n//快读模板\n//赛时提醒：快读没有太大必要使用\ninline long long read(){\n   long long s=0,w=1;\n   char ch=getchar();\n   while(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n   while(ch>='0'&&ch<='9')s=s*10+ch-'0',ch=getchar();\n   return s*w;\n}\n```", "locale": "zh-CN"}}}
{"pid": "P7894", "type": "P", "difficulty": 6, "samples": [["3 3\n3 5 8\n4 6 7", "1\n2\n0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 600, 600, 600, 600, 600, 600, 600, 600], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["模拟", "单调队列", "2021", "O2优化", "洛谷月赛"], "title": "『JROI-3』1÷0", "background": "```\n1÷0=梦恋\n```\n```\n   在距离遥远的山丘上，看得见彼方宛如天地崩毁的光景。\n\n    「——『设计体』传来报告——以功率《七二·八％》重现设计成功——开始同步。」\n\n    一机机凯种的女性体这么告知里克，然后举起手。\n\n    「【典开】——Org.0000——『真典·弑星者』——拜托您了。」\n\n    ——出现在虚空中的是，外形有如小型的塔，刺在地上的一把枪。\n\n    方才目睹的，有如让世界终结的暴力漩涡。\n\n```", "description": "空想用跳棋模拟「圣战」中机凯种的移动方式。\n\n一条**无限长**的数轴上有 $n$ 个不能动的跳棋，空会询问把一颗可以动的跳棋放在一个位置可以**最多**进行几次跳跃。空会问很多次，每次询问**互相独立**。\n\n设第 $i$ 颗不能动的棋子的坐标为 $x_i\\left(\\forall i\\in\\left[1,n\\right]\\right)$.\n\n则跳棋移动的规则如下：\n\n- 这颗跳棋必须是允许移动的。\n- 若这颗棋子位于 $a$，目标位置为 $b$，则应**仅有一颗**棋子位于二个位置之间且中间棋子到 $a,b$ 的距离相等。\n\n形式化的讲应有：\n\n$$\\sum_{k=1}^n \\left[x_k\\in\\left[b,a\\right]\\right]=1$$\n\n且 $\\exists k\\ x_k=\\dfrac{a+b}{2}$.\n\n\n- 出题人过于良心（，你只能向左边跳。\n", "inputFormat": "第一行两个整数 $n,q$，同题意。\n\n接下来一行 $n$ 个整数，第 $i$ 个表示 $x_i$。\n\n接下来一行 $q$ 个数 $x_0$，表示放置可以动的棋子的位置。", "outputFormat": "$q$ 行，每行一个整数，第 $i$ 行表示第 $i$ 次询问的结果。", "hint": "#### 样例解释 1\n\n$$\\Huge\\Box\\Box\\blacksquare{\\color{red}{\\Box}}\\blacksquare{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\blacksquare\\Box\\Box$$\n\n从左到右的三个红色方块是询问的位置。\n\n- 对于第一个询问，可以跳 $1$ 步，从 4 跳到 2。\n- 对于第二个询问，可以跳 $2$ 步，从 6 跳到 4 跳到 2。\n- 对于第三个询问，棋子不能向左移动，因为左边同距离位置有一颗不能动的棋子。\n\n对于 $100\\%$ 的数据满足 $1\\le n\\leq 3\\times 10^6$，$1\\le q\\leq3\\times 10^5$，$1\\le x\\le 10^{18}$，$x_i+1\\lt x_{i+1}(\\forall i \\in [1,n-1])$。\n\n| Subtask 编号 | $n\\le$ | $q\\le$ | 时限 | 空间限制 | 特殊限制 |\n| :-----------: | :-----: | :---: | :--: | :------:| :------: |\n| Subtask 0 (10 pts) | $10^3$ | $10^3$ |  $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |  |\n| Subtask 1 (30 pts) |  |  | $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ | $\\rm A$|\n| Subtask 2 (25 pts) |  |  | $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ | $\\rm B$ |\n| Subtask 3 (25 pts) | $3 \\times 10^5$ |  | $600\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |\n| Subtask 4 (10 pts) |  |  | $600\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |\n\n- 限制 $\\text{A}$： $x_n\\le2\\times 10^5$。\n- 限制 $\\text{B}$：有不超过 $50$ 个 $i$ 不满足 $x_i-x_{i-1}\\le 100$ ，其余 $i$ 满足 $\\sum_{i}{x_i-x_{i-1}} \\le 2\\times 10^5$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-3』1÷0", "background": "```\n1÷0=梦恋\n```\n```\n   在距离遥远的山丘上，看得见彼方宛如天地崩毁的光景。\n\n    「——『设计体』传来报告——以功率《七二·八％》重现设计成功——开始同步。」\n\n    一机机凯种的女性体这么告知里克，然后举起手。\n\n    「【典开】——Org.0000——『真典·弑星者』——拜托您了。」\n\n    ——出现在虚空中的是，外形有如小型的塔，刺在地上的一把枪。\n\n    方才目睹的，有如让世界终结的暴力漩涡。\n\n```", "description": "空想用跳棋模拟「圣战」中机凯种的移动方式。\n\n一条**无限长**的数轴上有 $n$ 个不能动的跳棋，空会询问把一颗可以动的跳棋放在一个位置可以**最多**进行几次跳跃。空会问很多次，每次询问**互相独立**。\n\n设第 $i$ 颗不能动的棋子的坐标为 $x_i\\left(\\forall i\\in\\left[1,n\\right]\\right)$.\n\n则跳棋移动的规则如下：\n\n- 这颗跳棋必须是允许移动的。\n- 若这颗棋子位于 $a$，目标位置为 $b$，则应**仅有一颗**棋子位于二个位置之间且中间棋子到 $a,b$ 的距离相等。\n\n形式化的讲应有：\n\n$$\\sum_{k=1}^n \\left[x_k\\in\\left[b,a\\right]\\right]=1$$\n\n且 $\\exists k\\ x_k=\\dfrac{a+b}{2}$.\n\n\n- 出题人过于良心（，你只能向左边跳。\n", "inputFormat": "第一行两个整数 $n,q$，同题意。\n\n接下来一行 $n$ 个整数，第 $i$ 个表示 $x_i$。\n\n接下来一行 $q$ 个数 $x_0$，表示放置可以动的棋子的位置。", "outputFormat": "$q$ 行，每行一个整数，第 $i$ 行表示第 $i$ 次询问的结果。", "hint": "#### 样例解释 1\n\n$$\\Huge\\Box\\Box\\blacksquare{\\color{red}{\\Box}}\\blacksquare{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\blacksquare\\Box\\Box$$\n\n从左到右的三个红色方块是询问的位置。\n\n- 对于第一个询问，可以跳 $1$ 步，从 4 跳到 2。\n- 对于第二个询问，可以跳 $2$ 步，从 6 跳到 4 跳到 2。\n- 对于第三个询问，棋子不能向左移动，因为左边同距离位置有一颗不能动的棋子。\n\n对于 $100\\%$ 的数据满足 $1\\le n\\leq 3\\times 10^6$，$1\\le q\\leq3\\times 10^5$，$1\\le x\\le 10^{18}$，$x_i+1\\lt x_{i+1}(\\forall i \\in [1,n-1])$。\n\n| Subtask 编号 | $n\\le$ | $q\\le$ | 时限 | 空间限制 | 特殊限制 |\n| :-----------: | :-----: | :---: | :--: | :------:| :------: |\n| Subtask 0 (10 pts) | $10^3$ | $10^3$ |  $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |  |\n| Subtask 1 (30 pts) |  |  | $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ | $\\rm A$|\n| Subtask 2 (25 pts) |  |  | $1000\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ | $\\rm B$ |\n| Subtask 3 (25 pts) | $3 \\times 10^5$ |  | $600\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |\n| Subtask 4 (10 pts) |  |  | $600\\ \\rm\\small ms$ | $\\rm512.00\\small\\  MB$ |\n\n- 限制 $\\text{A}$： $x_n\\le2\\times 10^5$。\n- 限制 $\\text{B}$：有不超过 $50$ 个 $i$ 不满足 $x_i-x_{i-1}\\le 100$ ，其余 $i$ 满足 $\\sum_{i}{x_i-x_{i-1}} \\le 2\\times 10^5$。", "locale": "zh-CN"}}}
{"pid": "P7895", "type": "P", "difficulty": 5, "samples": [["6\n3 1 2 1 1 2\n\n1\n\n5\n\n", "\n\ndfn 1\n\ndis 6 2\n\n! 17"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "交互题", "Special Judge", "O2优化", "分治", "树论", "虚树", "洛谷月赛"], "title": "『JROI-3』删树", "background": "**本题数据已加强，建议场上过了的同学再次提交确定做法正确性。**\n\n> 千万不要看错题！\n\n——command_block 《考前小贴士》\n\n你在 2021 年在洛谷打了一场比赛叫做 EZEC Round\n 6，其中里面有一道[造树题](https://www.luogu.com.cn/problem/P7390)你觉得特别水，随手就切了它。（所以没做过链接里题的人快来做啊！！！）\n \n现在你在打 JROI-3 的月赛，你觉得造树太水了想删掉树，于是良心的出题人给了你一个机会。但是，在删除树之前，djy 想先知道树的边权和。", "description": "**这是一道交互题。**\n\n有一个 $n$ 个节点的带边权的树，编号为 $1-n$。每个点的度数是已知的。djy 想知道树上所有边的权值和，但他太菜了，不会去算如此简单的问题，因此把这个题扔给了您。\n\n由于您很强，所以您可以对这棵树进行一些改变：删除所有度数为 $1$ 的节点，得到剩下点的个数和每个点的度数。\n\n您可以向交互库进行三种类型的提问：\n\n- 对于当前树上存在的一个点，询问它的 dfs 序$^1$。\n- 对于当前树上存在的一对节点，询问它们之间的距离$^2$。\n- 删除当前树上所有度数为 $1$ 的节点，同时删除与这些节点相邻的边，并且将所有未被删除的节点进行重新编号。**保证剩下的节点的编号分别为 $1-k$，其中 $k$ 是剩下的节点个数。**\n\n你需要操作**不超过 142 次（包括提交答案）**，并在树**删空**之前求出**当前**树上所有边的权值和。\n\n---\n注：\n- dfs 序$^1$：dfs 序指从当前的 $1$ 号节点进行 [深度优先搜索](https://baike.baidu.com/item/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/5224976) ，每个节点被第一次访问的顺序。一棵树的 dfs 序不唯一。每次删除操作后 dfs 序会被重置。保证 dfs 序不随着其他操作而改变，即两次询问同一节点的 dfs 序的询问中间如果没有删除操作，保证回答相同的值。\n- 距离$^2$：指在树上两点路径上的边权和。特别地，两个相同节点的距离为 $0$。", "inputFormat": "**「交互模式」**\n\n**本题采用 IO 交互模式。**\n\n在开始交互前，您需要先读入 $n$，表示树中点的个数。\n\n接下来一行 $n$ 个数，表示每个点的度数。\n\n您可以进行三种类型的询问：\n\n- `dfn u`: 询问交互库编号为 $u$ 的节点的 dfs 序。交互库返回一行一个整数，表示 $u$ 的 dfs 序。\n\n- `dis u v`: 询问交互库编号为 $u$ 和 $v$ 的两个节点的距离。交互库返回一行一个整数，表示 $u$ 和 $v$ 的距离。\n\n- `del`: 要求交互库删除度数为 1 的点以及与之相连的边。交互库将对点进行重编号，并重新跑一个 dfs 序，交互库返回第一行一个整数为树的大小 $m$，第二行 $m$ 个整数，第 $i$ 个表示编号为 $i$ 的点的度数。\n\n如果您求出了当前树上所有边的边权和，按照 `! x` 的格式输出答案 $x$，并立刻结束程序。\n\n请保证作为询问参数的节点未被删除且 del 操作后树不为空。\n\n**如果您的操作不合法或次数大于 142 次，交互库会立刻终止程序，并将结果判定为 WA/RE/TLE/MLE。**\n\n在每一次询问之后，请不要忘记输出换行符以及清空缓存区，否则将会出现未知的错误。为了避免这种情况，您可以使用：\n- 对于 C++，使用 ```fflush(stdout)``` 或  ```cout.flush()```。\n- 对于 Java，使用 ```System.out.flush()```。\n- 对于 Python，使用 ```stdout.flush()```。\n- 对于其他语言，请阅读相关文献。", "outputFormat": "见 **「交互模式」**。", "hint": "**样例仅供理解交互过程，可能不符合逻辑。**\n\n【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cpyygh22.png)\n\n树的形态如上。\n\n第一次询问节点 $1$ 的 dfs 序，为 $1$。\n\n第二次询问节点 $2$ 与节点 $6$ 的距离，为 $5$。\n\n当前树上所有边的边权和为 $17$。\n\n-----\n【数据范围】\n\n**「本题采用捆绑测试」**\n- Subtask 1（1pts）：$n \\le 2$。\n- Subtask 2（4pts）：$n \\le 4$。\n- Subtask 3（20pts）：$n\\le 150$。\n- Subtask 4（10pts）：树是一条链。\n- Subtask 5（30pts）：保证度数为 $1$ 的点不超过 $50$ 个。\n- Subtask 6（20pts）：$n\\le 2000$。\n- Subtask 7（15pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5000$，每条边的边权不大于 $10^5$ **且为正整数**。\n\n**如果有假做法过了，请私信联系出题人加强数据。（如果有hack更好了）。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-3』删树", "background": "**本题数据已加强，建议场上过了的同学再次提交确定做法正确性。**\n\n> 千万不要看错题！\n\n——command_block 《考前小贴士》\n\n你在 2021 年在洛谷打了一场比赛叫做 EZEC Round\n 6，其中里面有一道[造树题](https://www.luogu.com.cn/problem/P7390)你觉得特别水，随手就切了它。（所以没做过链接里题的人快来做啊！！！）\n \n现在你在打 JROI-3 的月赛，你觉得造树太水了想删掉树，于是良心的出题人给了你一个机会。但是，在删除树之前，djy 想先知道树的边权和。", "description": "**这是一道交互题。**\n\n有一个 $n$ 个节点的带边权的树，编号为 $1-n$。每个点的度数是已知的。djy 想知道树上所有边的权值和，但他太菜了，不会去算如此简单的问题，因此把这个题扔给了您。\n\n由于您很强，所以您可以对这棵树进行一些改变：删除所有度数为 $1$ 的节点，得到剩下点的个数和每个点的度数。\n\n您可以向交互库进行三种类型的提问：\n\n- 对于当前树上存在的一个点，询问它的 dfs 序$^1$。\n- 对于当前树上存在的一对节点，询问它们之间的距离$^2$。\n- 删除当前树上所有度数为 $1$ 的节点，同时删除与这些节点相邻的边，并且将所有未被删除的节点进行重新编号。**保证剩下的节点的编号分别为 $1-k$，其中 $k$ 是剩下的节点个数。**\n\n你需要操作**不超过 142 次（包括提交答案）**，并在树**删空**之前求出**当前**树上所有边的权值和。\n\n---\n注：\n- dfs 序$^1$：dfs 序指从当前的 $1$ 号节点进行 [深度优先搜索](https://baike.baidu.com/item/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/5224976) ，每个节点被第一次访问的顺序。一棵树的 dfs 序不唯一。每次删除操作后 dfs 序会被重置。保证 dfs 序不随着其他操作而改变，即两次询问同一节点的 dfs 序的询问中间如果没有删除操作，保证回答相同的值。\n- 距离$^2$：指在树上两点路径上的边权和。特别地，两个相同节点的距离为 $0$。", "inputFormat": "**「交互模式」**\n\n**本题采用 IO 交互模式。**\n\n在开始交互前，您需要先读入 $n$，表示树中点的个数。\n\n接下来一行 $n$ 个数，表示每个点的度数。\n\n您可以进行三种类型的询问：\n\n- `dfn u`: 询问交互库编号为 $u$ 的节点的 dfs 序。交互库返回一行一个整数，表示 $u$ 的 dfs 序。\n\n- `dis u v`: 询问交互库编号为 $u$ 和 $v$ 的两个节点的距离。交互库返回一行一个整数，表示 $u$ 和 $v$ 的距离。\n\n- `del`: 要求交互库删除度数为 1 的点以及与之相连的边。交互库将对点进行重编号，并重新跑一个 dfs 序，交互库返回第一行一个整数为树的大小 $m$，第二行 $m$ 个整数，第 $i$ 个表示编号为 $i$ 的点的度数。\n\n如果您求出了当前树上所有边的边权和，按照 `! x` 的格式输出答案 $x$，并立刻结束程序。\n\n请保证作为询问参数的节点未被删除且 del 操作后树不为空。\n\n**如果您的操作不合法或次数大于 142 次，交互库会立刻终止程序，并将结果判定为 WA/RE/TLE/MLE。**\n\n在每一次询问之后，请不要忘记输出换行符以及清空缓存区，否则将会出现未知的错误。为了避免这种情况，您可以使用：\n- 对于 C++，使用 ```fflush(stdout)``` 或  ```cout.flush()```。\n- 对于 Java，使用 ```System.out.flush()```。\n- 对于 Python，使用 ```stdout.flush()```。\n- 对于其他语言，请阅读相关文献。", "outputFormat": "见 **「交互模式」**。", "hint": "**样例仅供理解交互过程，可能不符合逻辑。**\n\n【样例解释】\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cpyygh22.png)\n\n树的形态如上。\n\n第一次询问节点 $1$ 的 dfs 序，为 $1$。\n\n第二次询问节点 $2$ 与节点 $6$ 的距离，为 $5$。\n\n当前树上所有边的边权和为 $17$。\n\n-----\n【数据范围】\n\n**「本题采用捆绑测试」**\n- Subtask 1（1pts）：$n \\le 2$。\n- Subtask 2（4pts）：$n \\le 4$。\n- Subtask 3（20pts）：$n\\le 150$。\n- Subtask 4（10pts）：树是一条链。\n- Subtask 5（30pts）：保证度数为 $1$ 的点不超过 $50$ 个。\n- Subtask 6（20pts）：$n\\le 2000$。\n- Subtask 7（15pts）：无特殊限制。\n\n对于 $100\\%$ 的数据，$1\\le n\\le 5000$，每条边的边权不大于 $10^5$ **且为正整数**。\n\n**如果有假做法过了，请私信联系出题人加强数据。（如果有hack更好了）。**", "locale": "zh-CN"}}}
{"pid": "P7896", "type": "P", "difficulty": 7, "samples": [["5 3 1\n1 1\n1 1", "6"], ["5 3 1\n1 2\n3 4", "64"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["O2优化"], "title": "『JROI-3』Moke 的游戏", "background": "", "description": "Moke 是一个喜欢玩游戏的男孩子。\n\n众所周知，游戏应当有血量。血量**永远是非负整数**，如果在某个时刻血量将要变为负数，那么游戏会崩溃，这就不算作一种游戏局面。这里允许血量是 $0$。  \n一般来说，友好的游戏都会具有一定的初始血量。但是 Moke 是一个喜欢在游戏里受虐的男孩子。所以他把自己的初始血量设成了 $0$。\n\n不过，这个游戏的难度并不高。  \n它一共进行 $n+1$ 个时刻。初始是第 $0$ 个时刻，最终是第 $n$ 个时刻。每个时刻 Moke 会遇到以下三种事件，然后进入下一时刻：\n\n 1. 空地。它使得 Moke 的血量不变。一共有 $a_0$ 种不同的空地。\n 2. 怪兽。它使得 Moke 的血量减一。一共有 $a_{-1}$ 种不同的怪兽。\n 3. 道具。它使得 Moke 的血量增加一个正整数。具体地，一共有 $a_p$ 种使 Moke 血量加 $p$ 的道具，其中 $p \\in \\mathbb Z^+$。\n\n为了不让游戏太复杂，游戏的开发者保证 $\\big|\\{p \\mid p \\in \\mathbb Z^+ \\land a_p > 0\\}\\big|=k$。即，所有道具总共只造成恰好 $k$ 种不同的血量变化量。\n\n当然，Moke 还是给自己进一步增加了难度。他要求结束时自己的血量为 $0$，且给出一个正整数 $m$，表示限制这 $n+1$ 个时刻中，他恰好有 $m$ 次血量为 $0$（包括初始时刻）。\n\n请求出所有不同的，符合 Moke 限制的游戏局面个数。两个局面不同当且仅当每个时刻遇到的事件的种类不同（包括不同的空地、不同的怪兽和不同的道具）。  \n\nMoke 不希望你面对太困难的问题。所以他给出一个质数 $P=10^9+7$ 并只要求你给出取模 $P$ 后的答案。", "inputFormat": "第一行，三个正整数 $n,m,k$。  \n第二行，两个正整数 $a_0,a_{-1}$。  \n以下 $k$ 行，其中第 $i$ 行两个正整数 $p_i,a_{p_i}$。表示存在道具造成的血量变化量为 $p_i$，且这样的道具有 $a_{p_i}$ 种。", "outputFormat": "一行，一个非负整数。表示答案取模 $P$ 的结果。", "hint": "- 对于 $30\\%$ 的数据，$n \\le 15$，$k \\le 1$。  \n- 对于 $50\\%$ 的数据，$n \\le 100$。  \n- 对于 $70\\%$ 的数据，$n \\le 2.5 \\times 10^3$。  \n- 对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times 10^6$，$1 \\le m \\le n + 1$，$1 \\le k \\le 10$，$1 \\le p_i \\le n$，$0 < a_0,a_{-1},a_{p_i} < P$，保证 $p_i$ 从小到大给出且互不相同。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "『JROI-3』Moke 的游戏", "background": "", "description": "Moke 是一个喜欢玩游戏的男孩子。\n\n众所周知，游戏应当有血量。血量**永远是非负整数**，如果在某个时刻血量将要变为负数，那么游戏会崩溃，这就不算作一种游戏局面。这里允许血量是 $0$。  \n一般来说，友好的游戏都会具有一定的初始血量。但是 Moke 是一个喜欢在游戏里受虐的男孩子。所以他把自己的初始血量设成了 $0$。\n\n不过，这个游戏的难度并不高。  \n它一共进行 $n+1$ 个时刻。初始是第 $0$ 个时刻，最终是第 $n$ 个时刻。每个时刻 Moke 会遇到以下三种事件，然后进入下一时刻：\n\n 1. 空地。它使得 Moke 的血量不变。一共有 $a_0$ 种不同的空地。\n 2. 怪兽。它使得 Moke 的血量减一。一共有 $a_{-1}$ 种不同的怪兽。\n 3. 道具。它使得 Moke 的血量增加一个正整数。具体地，一共有 $a_p$ 种使 Moke 血量加 $p$ 的道具，其中 $p \\in \\mathbb Z^+$。\n\n为了不让游戏太复杂，游戏的开发者保证 $\\big|\\{p \\mid p \\in \\mathbb Z^+ \\land a_p > 0\\}\\big|=k$。即，所有道具总共只造成恰好 $k$ 种不同的血量变化量。\n\n当然，Moke 还是给自己进一步增加了难度。他要求结束时自己的血量为 $0$，且给出一个正整数 $m$，表示限制这 $n+1$ 个时刻中，他恰好有 $m$ 次血量为 $0$（包括初始时刻）。\n\n请求出所有不同的，符合 Moke 限制的游戏局面个数。两个局面不同当且仅当每个时刻遇到的事件的种类不同（包括不同的空地、不同的怪兽和不同的道具）。  \n\nMoke 不希望你面对太困难的问题。所以他给出一个质数 $P=10^9+7$ 并只要求你给出取模 $P$ 后的答案。", "inputFormat": "第一行，三个正整数 $n,m,k$。  \n第二行，两个正整数 $a_0,a_{-1}$。  \n以下 $k$ 行，其中第 $i$ 行两个正整数 $p_i,a_{p_i}$。表示存在道具造成的血量变化量为 $p_i$，且这样的道具有 $a_{p_i}$ 种。", "outputFormat": "一行，一个非负整数。表示答案取模 $P$ 的结果。", "hint": "- 对于 $30\\%$ 的数据，$n \\le 15$，$k \\le 1$。  \n- 对于 $50\\%$ 的数据，$n \\le 100$。  \n- 对于 $70\\%$ 的数据，$n \\le 2.5 \\times 10^3$。  \n- 对于 $100\\%$ 的数据，$1 \\le n \\le 5 \\times 10^6$，$1 \\le m \\le n + 1$，$1 \\le k \\le 10$，$1 \\le p_i \\le n$，$0 < a_0,a_{-1},a_{p_i} < P$，保证 $p_i$ 从小到大给出且互不相同。", "locale": "zh-CN"}}}
{"pid": "P7897", "type": "P", "difficulty": 6, "samples": [["10 6\n1 1 2 2 3 5 5 5 6\n5 2 3 1 -5 -7 1 1 1 2\n1 0\n1 -2\n1 3\n2 1\n5 0\n5 -2", "11\n4\n34\n7\n-2\n-7"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152, 2097152]}, "tags": ["2006", "O2优化", "Ynoi"], "title": "[Ynoi2006] spxmcq", "background": "", "description": "给定一颗 $n$ 个节点有根树，第 $i$ 节点权值为 $a_i$。\n\n在这个树上支持一种询问：\n\n - 给定节点 $u$ 和参数 $x$，**假如** 所有节点点权加 $x$，**在这种情况下，求：** 对于所有完全在 $u$ 子树内并包含 $u$ 的连通点集，权值之和最大可能为多少？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，依次为 $2,3,\\dots,n$ 的父亲节点编号，其中保证 $1\\le f_i<i$。\n\n第三行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，依次为 $1,2,\\dots,n$ 点权。\n\n接下来 $m$ 行，每行一个正整数 $u$ 和一个整数 $x$，代表一组询问，其中保证 $1\\le u\\le n$。", "outputFormat": "输出 $m$ 行，每行一个整数，为对应询问的答案。", "hint": "Idea：w33z8kqrqk8zzzx33，Solution：w33z8kqrqk8zzzx33&ccz181078，Code：w33z8kqrqk8zzzx33，Data：w33z8kqrqk8zzzx33\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$|a_i|,|x|\\le 10^8$，保证 $1\\le u\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] spxmcq", "background": "", "description": "给定一颗 $n$ 个节点有根树，第 $i$ 节点权值为 $a_i$。\n\n在这个树上支持一种询问：\n\n - 给定节点 $u$ 和参数 $x$，**假如** 所有节点点权加 $x$，**在这种情况下，求：** 对于所有完全在 $u$ 子树内并包含 $u$ 的连通点集，权值之和最大可能为多少？", "inputFormat": "第一行两个正整数 $n$ 和 $m$。\n\n第二行 $n-1$ 个正整数 $f_2,f_3,\\dots,f_n$，依次为 $2,3,\\dots,n$ 的父亲节点编号，其中保证 $1\\le f_i<i$。\n\n第三行 $n$ 个整数 $a_1,a_2,\\dots,a_n$，依次为 $1,2,\\dots,n$ 点权。\n\n接下来 $m$ 行，每行一个正整数 $u$ 和一个整数 $x$，代表一组询问，其中保证 $1\\le u\\le n$。", "outputFormat": "输出 $m$ 行，每行一个整数，为对应询问的答案。", "hint": "Idea：w33z8kqrqk8zzzx33，Solution：w33z8kqrqk8zzzx33&ccz181078，Code：w33z8kqrqk8zzzx33，Data：w33z8kqrqk8zzzx33\n\n对于 $100\\%$ 的数据，满足 $1\\le n,m\\le 10^6$，$|a_i|,|x|\\le 10^8$，保证 $1\\le u\\le n$。", "locale": "zh-CN"}}}
{"pid": "P7898", "type": "P", "difficulty": 7, "samples": [["假设交互库调用了3次 `solve` 函数如下：\n\n```cpp\nsolve(1,1,1);\nsolve(1,2,2);\nsolve(2,1,3);\n```", "以下给出了一种符合要求的对 `op1` 和 `op2` 的调用：\n\n```cpp\nop1(1,1);\nop2(1);\n```\n\n此时序列为 $(1)$，编号1的集合为 $\\{1\\}$，第1次 `solve` 函数调用返回；\n\n```cpp\nop2(1);\n```\n\n此时序列为 $(2,1)$，编号1的集合为 $\\{1\\}$，第2次 `solve` 函数调用返回；\n\n```cpp\nop1(1,2);\nop1(2,3);\nop2(2);\nop2(1);\n```\n\n此时序列为 $(2,3,1)$，编号1的集合为 $\\{1,2\\}$，编号2的集合为 $\\{3\\}$，第3次 `solve` 函数调用返回。"]], "limits": {"time": [15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2006", "交互题", "Special Judge", "O2优化", "Ynoi"], "title": "[Ynoi2006] wcirq", "background": "", "description": "**这是一道交互题。**\n\n你需要进行 $n$ 个原始操作，对一个序列进行维护。初始序列为空。\n\n第 $i$ 个原始操作给出整数 $x_i,\\;l_i,\\;r_i$，表示在序列的第 $x_i$ 个位置前插入元素 $i$（若 $x_i=i$ 则表示在序列末尾插入），然后查询序列中第 $l_i,\\;l_i+1,\\;\\dots,\\;r_i$ 个元素构成的集合。\n\n为了回答这些查询，你可以操作若干个集合。这些集合初始为空，编号为 $1$ 到 $2\\times 10^7$ 的整数。\n\n你可以花费 $1$ 个单位的第一类代价进行插入操作：在编号为 $x$ 的集合中插入元素 $y$，在回答第 $i$ 个原始操作的查询前，需要保证 $1\\le y\\le i$。\n\n你可以花费 $k$ 个单位的第二类代价回答查询：选取编号为 $a_1,\\;a_2,\\;\\dots,\\;a_k$ 的集合，要求这些集合互不相交，且并集是查询的答案。\n\n每次原始操作后，插入操作和回答查询的第一类/第二类代价不能超过当前子任务的代价上限 $m_1,\\;m_2$。每次原始操作的代价分别计算。", "inputFormat": "你需要实现函数：\n\n```cpp\nvoid solve(int x,int l,int r);\n```\n\n对于每次原始操作，这个函数被调用一次，参数 `x l r` 对应 $x_i,\\;l_i,\\;r_i$。", "outputFormat": "你可以调用函数：\n\n```cpp\nvoid op1(int x,int y);\nvoid op2(int k);\n```\n\n调用 `op1` 表示执行一次插入操作；\n\n对 $a_1,\\dots,a_k$ 依次调用 `op2` 表示回答查询。\n\n在提交的代码中，你需要声明这两个函数。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078&nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$；$1\\le x_i\\le i$；$1\\le l_i\\le r_i\\le i$；\n\n你输出的插入操作或回答查询中，集合编号在范围 $1$ 到 $2\\times 10^7$ 内，插入操作的 $y$ 必须是序列中已有的元素。\n\n\n\n子任务1（10分）：保证 $1\\le n\\le 10^3$；\n\n子任务2（10分）：保证 $l_i=1,\\;r_i=i$；\n\n子任务3（10分）：保证 $x_i=i$；\n\n子任务4（20分）：保证 $1\\le n\\le 10^4$；\n\n子任务5（10分）：保证 $1\\le n\\le 10^5$；\n\n子任务6（20分）：数据随机生成，其中 $n=10^6$， $(l_i,r_i)$ 和 $x_i$ 分别在所有可能的情况中随机选取。\n\n子任务7（20分）：无特殊限制。\n\n对子任务6，$(m_1,m_2)=(64,64)$；\n\n对其余子任务，$(m_1,m_2)=(64,256)$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] wcirq", "background": "", "description": "**这是一道交互题。**\n\n你需要进行 $n$ 个原始操作，对一个序列进行维护。初始序列为空。\n\n第 $i$ 个原始操作给出整数 $x_i,\\;l_i,\\;r_i$，表示在序列的第 $x_i$ 个位置前插入元素 $i$（若 $x_i=i$ 则表示在序列末尾插入），然后查询序列中第 $l_i,\\;l_i+1,\\;\\dots,\\;r_i$ 个元素构成的集合。\n\n为了回答这些查询，你可以操作若干个集合。这些集合初始为空，编号为 $1$ 到 $2\\times 10^7$ 的整数。\n\n你可以花费 $1$ 个单位的第一类代价进行插入操作：在编号为 $x$ 的集合中插入元素 $y$，在回答第 $i$ 个原始操作的查询前，需要保证 $1\\le y\\le i$。\n\n你可以花费 $k$ 个单位的第二类代价回答查询：选取编号为 $a_1,\\;a_2,\\;\\dots,\\;a_k$ 的集合，要求这些集合互不相交，且并集是查询的答案。\n\n每次原始操作后，插入操作和回答查询的第一类/第二类代价不能超过当前子任务的代价上限 $m_1,\\;m_2$。每次原始操作的代价分别计算。", "inputFormat": "你需要实现函数：\n\n```cpp\nvoid solve(int x,int l,int r);\n```\n\n对于每次原始操作，这个函数被调用一次，参数 `x l r` 对应 $x_i,\\;l_i,\\;r_i$。", "outputFormat": "你可以调用函数：\n\n```cpp\nvoid op1(int x,int y);\nvoid op2(int k);\n```\n\n调用 `op1` 表示执行一次插入操作；\n\n对 $a_1,\\dots,a_k$ 依次调用 `op2` 表示回答查询。\n\n在提交的代码中，你需要声明这两个函数。", "hint": "Idea：ccz181078，Solution：ccz181078，Code：ccz181078，Data：ccz181078&nzhtl1477\n\n对于 $100\\%$ 的数据，满足 $1\\le n\\le 10^6$；$1\\le x_i\\le i$；$1\\le l_i\\le r_i\\le i$；\n\n你输出的插入操作或回答查询中，集合编号在范围 $1$ 到 $2\\times 10^7$ 内，插入操作的 $y$ 必须是序列中已有的元素。\n\n\n\n子任务1（10分）：保证 $1\\le n\\le 10^3$；\n\n子任务2（10分）：保证 $l_i=1,\\;r_i=i$；\n\n子任务3（10分）：保证 $x_i=i$；\n\n子任务4（20分）：保证 $1\\le n\\le 10^4$；\n\n子任务5（10分）：保证 $1\\le n\\le 10^5$；\n\n子任务6（20分）：数据随机生成，其中 $n=10^6$， $(l_i,r_i)$ 和 $x_i$ 分别在所有可能的情况中随机选取。\n\n子任务7（20分）：无特殊限制。\n\n对子任务6，$(m_1,m_2)=(64,64)$；\n\n对其余子任务，$(m_1,m_2)=(64,256)$。", "locale": "zh-CN"}}}
{"pid": "P7899", "type": "P", "difficulty": 7, "samples": [["10\n2 8 9 5 4 2\n7 10 3 7 2 10\n10 5 4 2 8 3\n8 8 7 6 8 4\n3 2 5 3 2 9\n3 3 9 10 5 6\n4 8 2 9 3 2\n4 5 5 10 1 1\n9 4 10 2 1 4\n6 9 7 2 4 6\n", "0\n0\n0\n0\n9\n5\n4\n2\n12\n12\n6\n12\n16\n14\n14\n15\n23\n23\n22\n22\n28\n26\n31\n31\n37\n33\n37\n35\n39\n42\n40\n37\n44\n52\n41\n41\n54\n54\n47\n41\n"]], "limits": {"time": [20000], "memory": [131072]}, "tags": ["2006", "O2优化", "Ynoi"], "title": "[Ynoi2006] rprmq2", "background": "", "description": "给定正整数 $m$，你需要维护一个 $m\\times m$ 的矩阵 $a_{i,j},\\;1\\le i,j\\le m$，初值为 $0$。\n\n共 $m$ 次操作，每次操作给出 $x,\\;y,\\;z_{0,0},\\;z_{0,1},\\;z_{1,0},\\;z_{1,1}$，\n\n首先对 $0\\le p,q\\le 1$ 询问矩阵中满足 $[i\\ge x]=p,\\;[j\\ge y]=q$ 的位置的值 $a_{i,j}$ 的最大值，答案记为 $w_{p,q}$，\n\n然后对矩阵每个位置 $(i,j)$，将其值 $a_{i,j}$ 加上 $z_{[i\\ge x],[j\\ge y]}$。\n\n记号 $[c]$ 在条件 $c$ 为真时值为 $1$，否则值为 $0$。", "inputFormat": "第一行一个正整数 $m$ ；\n\n之后 $m$ 行，每行 $6$ 个数 $x,\\;y,\\;z_{0,0},\\;z_{0,1},\\;z_{1,0},\\;z_{1,1}$ 表示一次操作，意义如上述。", "outputFormat": "对每次操作，输出 $4$ 行，依次为 $w_{0,0},\\;w_{0,1},\\;w_{1,0},\\;w_{1,1}$。", "hint": "Idea：？，Solution：？，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，$2 \\le x,y\\le m\\le 2\\times 10^5$ ，$1\\le z_{i,j}\\le 10^9$，所有数值为整数。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2006] rprmq2", "background": "", "description": "给定正整数 $m$，你需要维护一个 $m\\times m$ 的矩阵 $a_{i,j},\\;1\\le i,j\\le m$，初值为 $0$。\n\n共 $m$ 次操作，每次操作给出 $x,\\;y,\\;z_{0,0},\\;z_{0,1},\\;z_{1,0},\\;z_{1,1}$，\n\n首先对 $0\\le p,q\\le 1$ 询问矩阵中满足 $[i\\ge x]=p,\\;[j\\ge y]=q$ 的位置的值 $a_{i,j}$ 的最大值，答案记为 $w_{p,q}$，\n\n然后对矩阵每个位置 $(i,j)$，将其值 $a_{i,j}$ 加上 $z_{[i\\ge x],[j\\ge y]}$。\n\n记号 $[c]$ 在条件 $c$ 为真时值为 $1$，否则值为 $0$。", "inputFormat": "第一行一个正整数 $m$ ；\n\n之后 $m$ 行，每行 $6$ 个数 $x,\\;y,\\;z_{0,0},\\;z_{0,1},\\;z_{1,0},\\;z_{1,1}$ 表示一次操作，意义如上述。", "outputFormat": "对每次操作，输出 $4$ 行，依次为 $w_{0,0},\\;w_{0,1},\\;w_{1,0},\\;w_{1,1}$。", "hint": "Idea：？，Solution：？，Code：ccz181078，Data：ccz181078\n\n对于 $100\\%$ 的数据，$2 \\le x,y\\le m\\le 2\\times 10^5$ ，$1\\le z_{i,j}\\le 10^9$，所有数值为整数。", "locale": "zh-CN"}}}
{"pid": "P7900", "type": "P", "difficulty": 3, "samples": [["3\n", "0"], ["4\n", "1"], ["6\n", "15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2006", "O2优化", "组合数学", "COCI（克罗地亚）"], "title": "[COCI 2006/2007 #2] SJECIŠTA", "background": "", "description": "考虑一个有 $n$ 个顶点的凸多边形，且这个多边形没有任何三个（或以上）的对角线交于一点。\n\n现在请你求出这样的多边形的对角线交点个数。", "inputFormat": "输入一行一个整数表示 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 3 解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/07pgpeuy.png)\n\n### 数据规模与约定\n\n对于全部的测试点，保证 $3 \\leq n \\leq 100$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2006/2007 #2] SJECIŠTA", "background": "", "description": "考虑一个有 $n$ 个顶点的凸多边形，且这个多边形没有任何三个（或以上）的对角线交于一点。\n\n现在请你求出这样的多边形的对角线交点个数。", "inputFormat": "输入一行一个整数表示 $n$。", "outputFormat": "输出一行一个整数表示答案。", "hint": "### 样例 3 解释\n![](https://cdn.luogu.com.cn/upload/image_hosting/07pgpeuy.png)\n\n### 数据规模与约定\n\n对于全部的测试点，保证 $3 \\leq n \\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P7901", "type": "P", "difficulty": 2, "samples": [["2 16 1 1", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["O2优化", "洛谷月赛"], "title": "「PMOI-0」一笔画", "background": "（原 LZOI-1，改名已经 PMOI 成员同意）", "description": "言琢დ 在一个 $2n \\times 2n$ 的矩阵中坐标为 $(x,y)$ 的一个点上。\n\n现在 lhm 需要任意选择矩阵上的一个点作为起点，然后依次经过 $k$ 个点，移动规则如下：\n\n- 每次移动只能选择与目前相邻（上下左右）的点作为本次移动的目标点。不能选择矩阵外的点。\n\n- 每一轮移动必须正好经过矩阵上的所有点，不能重复经过同一个点。每经过所有点后，视为一轮移动结束。\n\n- 注意依次经过 $k$ 个点后，最后一轮移动可能并没有完成。\n\n现在 lhm 想知道，他最少会经过 言琢დ 多少次。", "inputFormat": "第一行输入四个正整数 $n,k,x,y$。", "outputFormat": "第一行输出一个整数，表示答案。", "hint": "### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/37e99o4k.png)\n\n$\\color{red}დ$ 代表 言琢დ 所在位置，红色线表示 lhm 第一轮的路径。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n,k\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $10^4$ |\n| $2$ | $30$ | $10^9$ |\n| $3$ | $40$ | $10^{18}$ |\n\n对于所有数据，保证 $1\\le n,k\\le10^{18}$，$1\\le x,y\\le 2n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-0」一笔画", "background": "（原 LZOI-1，改名已经 PMOI 成员同意）", "description": "言琢დ 在一个 $2n \\times 2n$ 的矩阵中坐标为 $(x,y)$ 的一个点上。\n\n现在 lhm 需要任意选择矩阵上的一个点作为起点，然后依次经过 $k$ 个点，移动规则如下：\n\n- 每次移动只能选择与目前相邻（上下左右）的点作为本次移动的目标点。不能选择矩阵外的点。\n\n- 每一轮移动必须正好经过矩阵上的所有点，不能重复经过同一个点。每经过所有点后，视为一轮移动结束。\n\n- 注意依次经过 $k$ 个点后，最后一轮移动可能并没有完成。\n\n现在 lhm 想知道，他最少会经过 言琢დ 多少次。", "inputFormat": "第一行输入四个正整数 $n,k,x,y$。", "outputFormat": "第一行输出一个整数，表示答案。", "hint": "### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/37e99o4k.png)\n\n$\\color{red}დ$ 代表 言琢დ 所在位置，红色线表示 lhm 第一轮的路径。\n\n### 数据规模与约定\n\n**本题采用捆绑测试。**\n\n| 子任务编号 | 分值 | $n,k\\le$ |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $10^4$ |\n| $2$ | $30$ | $10^9$ |\n| $3$ | $40$ | $10^{18}$ |\n\n对于所有数据，保证 $1\\le n,k\\le10^{18}$，$1\\le x,y\\le 2n$。", "locale": "zh-CN"}}}
{"pid": "P7902", "type": "P", "difficulty": 2, "samples": [["3 2", "3 1 2 3 2 1"], ["3 6", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["Special Judge", "O2优化", "洛谷月赛"], "title": "「PMOI-0」假·儒略日", "background": "（原 LZOI-1，改名已经 PMOI 成员同意）\n\nLanuxhem 听说 言琢დ 在 S-PSC 考场上就切穿了 **儒略の日**，想得到 言琢დ 手中的考场 AC 代码。\n\n但是 言琢დ 不想给他，所以 言琢დ 就扔给了 Lanuxhem 下面这题，并说：“切了这道题就给你。”\n\nlhm-02", "description": "给定一个正整数 $n$ 和另一个正整数 $d$。\n\n要求构造一个长度为 $2n$ 的数列 $\\{a_{2n}\\}$，满足：\n\n1. $1\\sim n$ 之中每个数字均出现 $2$ 次。\n2. 对于数字 $i$，若 $i$ 为奇数，则数字 $i$ 两次出现位置之差 **必须** 超过 $d$。\n3. 对于数字 $i$，若 $i$ 为偶数，则数字 $i$ 两次出现位置之差 **不能** 超过 $d$。\n\n由于 Lanuxhem 想得到 言琢დ 的代码，但他并不会这道题，所以他只能请聪明的你帮他完成这题。", "inputFormat": "第一行输入两个整数 $n$ 和 $d$。", "outputFormat": "如果无解输出 `-1`，否则输出一个长度为 $2n$ 的数列表示你的答案。\n\n**如果有多组解输出任意一组均给分。**", "hint": "#### 样例说明\n\n数字 $1$ 两次分别出现在位置 $2,6$，差为 $4(>2)$；\n\n数字 $3$ 两次分别出现在位置 $1,4$，差为 $3(>2)$；\n\n数字 $2$ 两次分别出现在位置 $3,5$，差为 $2(\\le2)$。\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :-: | :-: | :-: |\n| $1$ | $36$ | $n\\le10$ |\n| $2$ | $24$ | $d=\\left\\lfloor\\dfrac{n}{2}\\right\\rfloor$ |\n| $3$ | $40$ | $\\times$ |\n\n对于 $100\\%$ 的数据：$1\\le\\dfrac{d}{2}\\le n\\le10^6$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "「PMOI-0」假·儒略日", "background": "（原 LZOI-1，改名已经 PMOI 成员同意）\n\nLanuxhem 听说 言琢დ 在 S-PSC 考场上就切穿了 **儒略の日**，想得到 言琢დ 手中的考场 AC 代码。\n\n但是 言琢დ 不想给他，所以 言琢დ 就扔给了 Lanuxhem 下面这题，并说：“切了这道题就给你。”\n\nlhm-02", "description": "给定一个正整数 $n$ 和另一个正整数 $d$。\n\n要求构造一个长度为 $2n$ 的数列 $\\{a_{2n}\\}$，满足：\n\n1. $1\\sim n$ 之中每个数字均出现 $2$ 次。\n2. 对于数字 $i$，若 $i$ 为奇数，则数字 $i$ 两次出现位置之差 **必须** 超过 $d$。\n3. 对于数字 $i$，若 $i$ 为偶数，则数字 $i$ 两次出现位置之差 **不能** 超过 $d$。\n\n由于 Lanuxhem 想得到 言琢დ 的代码，但他并不会这道题，所以他只能请聪明的你帮他完成这题。", "inputFormat": "第一行输入两个整数 $n$ 和 $d$。", "outputFormat": "如果无解输出 `-1`，否则输出一个长度为 $2n$ 的数列表示你的答案。\n\n**如果有多组解输出任意一组均给分。**", "hint": "#### 样例说明\n\n数字 $1$ 两次分别出现在位置 $2,6$，差为 $4(>2)$；\n\n数字 $3$ 两次分别出现在位置 $1,4$，差为 $3(>2)$；\n\n数字 $2$ 两次分别出现在位置 $3,5$，差为 $2(\\le2)$。\n\n#### 数据范围\n\n**本题采用捆绑测试**\n\n| 子任务编号 | 分值 | 特殊限制 |\n| :-: | :-: | :-: |\n| $1$ | $36$ | $n\\le10$ |\n| $2$ | $24$ | $d=\\left\\lfloor\\dfrac{n}{2}\\right\\rfloor$ |\n| $3$ | $40$ | $\\times$ |\n\n对于 $100\\%$ 的数据：$1\\le\\dfrac{d}{2}\\le n\\le10^6$。", "locale": "zh-CN"}}}
{"pid": "P7903", "type": "P", "difficulty": 3, "samples": [["20", "20\n20 18\n1 3\n19 12\n19 4\n16 1\n4 1\n1 7\n16 10\n7 20\n13 8\n10 2\n18 13\n13 17\n14 18\n11 19\n16 5\n2 6\n16 9\n17 15"], ["2", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "Special Judge", "O2优化", "洛谷月赛"], "title": "兜心の顶", "background": "Source：[八仙敬酒](/paste/78f1vlm0)，这是可以点的。\n\n- 吕洞宾——醉酒提壶力千钧；\n- 铁拐李——旋肘膝撞醉还真；\n- **汉钟离——跌步抱坛兜心顶**；\n- 蓝采和——单提敬酒拦腰破；\n- 张果老——醉酒抛杯踢连环；\n- 曹国舅——仙人敬酒锁喉扣；\n- 韩湘子——擒腕击胸醉吹箫；\n- 何仙姑——弹腰献酒醉荡步。", "description": "给定正整数 $n$，要求构造一棵 $n$ 个结点的树，满足树的直径的重心 **不是** 树的重心。\n\n同时这棵树需满足：直径$^1$、重心$^2$、直径的重心$^3$全部唯一。\n\n---\n\n注：\n\n- 树的直径$^1$：[https://oi-wiki.org/graph/tree-diameter/](https://oi-wiki.org/graph/tree-diameter/)\n- 树的重心$^2$：[https://oi-wiki.org/graph/tree-centroid/](https://oi-wiki.org/graph/tree-centroid/)\n- 树的直径的重心$^3$：将树的直径（一条链）视作一棵树，求其中心（一个点）。", "inputFormat": "第一行输入一个正整数 $n$，表示树的结点个数。", "outputFormat": "第一行输出一个正整数 $n$。\n\n接下来 $n-1$ 行，每行输出两个正整数 $u,v$，表示树的一条边。\n\n无解输出 `-1`。\n\n**本题采取 Special Judge，输出任意一组合法解均给分。**", "hint": "#### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kdgu2xd9.png)\n\n样例 #1 中直径的重心是 $7$，树的重心是 $1$，$1\\ne7$。\n\n样例 #2 中 $n=2$，只有两个点时显然重心不可能唯一。\n\n#### 数据范围\n\n**本题采取捆绑测试。**\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $n\\le10$ |\n| $2$ | $30$ | $n$ 是奇数 |\n| $3$ | $30$ | $n$ 是偶数 |\n| $4$ | $10$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\le n\\le10^4$。\n\n**本题提供 Special Judge 源码，参见下方附件。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "兜心の顶", "background": "Source：[八仙敬酒](/paste/78f1vlm0)，这是可以点的。\n\n- 吕洞宾——醉酒提壶力千钧；\n- 铁拐李——旋肘膝撞醉还真；\n- **汉钟离——跌步抱坛兜心顶**；\n- 蓝采和——单提敬酒拦腰破；\n- 张果老——醉酒抛杯踢连环；\n- 曹国舅——仙人敬酒锁喉扣；\n- 韩湘子——擒腕击胸醉吹箫；\n- 何仙姑——弹腰献酒醉荡步。", "description": "给定正整数 $n$，要求构造一棵 $n$ 个结点的树，满足树的直径的重心 **不是** 树的重心。\n\n同时这棵树需满足：直径$^1$、重心$^2$、直径的重心$^3$全部唯一。\n\n---\n\n注：\n\n- 树的直径$^1$：[https://oi-wiki.org/graph/tree-diameter/](https://oi-wiki.org/graph/tree-diameter/)\n- 树的重心$^2$：[https://oi-wiki.org/graph/tree-centroid/](https://oi-wiki.org/graph/tree-centroid/)\n- 树的直径的重心$^3$：将树的直径（一条链）视作一棵树，求其中心（一个点）。", "inputFormat": "第一行输入一个正整数 $n$，表示树的结点个数。", "outputFormat": "第一行输出一个正整数 $n$。\n\n接下来 $n-1$ 行，每行输出两个正整数 $u,v$，表示树的一条边。\n\n无解输出 `-1`。\n\n**本题采取 Special Judge，输出任意一组合法解均给分。**", "hint": "#### 样例说明\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kdgu2xd9.png)\n\n样例 #1 中直径的重心是 $7$，树的重心是 $1$，$1\\ne7$。\n\n样例 #2 中 $n=2$，只有两个点时显然重心不可能唯一。\n\n#### 数据范围\n\n**本题采取捆绑测试。**\n\n| 子任务编号 | 分值 | 特殊性质 |\n| :----------: | :----------: | :----------: |\n| $1$ | $30$ | $n\\le10$ |\n| $2$ | $30$ | $n$ 是奇数 |\n| $3$ | $30$ | $n$ 是偶数 |\n| $4$ | $10$ | 无 |\n\n对于 $100\\%$ 的数据：$1\\le n\\le10^4$。\n\n**本题提供 Special Judge 源码，参见下方附件。**", "locale": "zh-CN"}}}
{"pid": "P7904", "type": "P", "difficulty": 5, "samples": [["3 3 6 5 4 3\nS..\n...\n..E", "12\n"], ["3 3 1 2 7 8\nS.E\n\\-/\n...", "5"], ["3 3 1 2 7 8\nSEE\n\\-/\nSSS", "0"], ["1 4 6 5 4 3\nS>#E", "0"], ["2 2 6 5 4 3\n#E\nS^", "3"], ["1 3 1 2 7 8\nS#E", "-1"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["2021", "O2优化", "洛谷月赛"], "title": "火烧の云", "background": "", "description": "乡间小路可以近似理解成 $n\\times m$ 的矩阵，道路有许多种，这里只列举其中的一小部分：\n\n1. ``#``：水池，无法通行。\n2. ``|``：直行类道路，竖直方向只能直行，水平方向只能左转、右转。\n3. ``-``：直行类道路，水平方向只能直行，竖直方向只能左转、右转。\n4. ``/``：转弯类道路，竖直方向只能右转，水平方向只能左转。\n5. ``\\``：转弯类道路，竖直方向只能左转，水平方向只能右转。\n6. ``.``：四岔路口，可以直行、左转、右转。\n7. ``S``：入口，从乡间之外进入入口不需要时间。\n8. ``E``：出口，从出口到达乡间之外不需要时间。\n\n前进类道路：到此格之后方向必须花费时间转向 `?`，如果来向就是 `?` 方向则不花费时间并必须跳一格。\n\n9. ``<``：`? = 西`。\n10. ``>``：`? = 东`。\n11. ``^``：`? = 北`。\n12. `v`：`? = 南`。\n\n**简单来说，就是和这类道路逆向时不能走，垂直于它的方向时花时间转到它的方向，顺着它的方向时就能够不花时间且必须一次性走两格。**\n\n\n直行类道路、转弯类道路、四岔路口、前进类道路依次花费 $a,b,c,d$ 个单位时间。\n\n由于乡间的构造奇特，可能 **不止一个** 入口和出口。\n\n求任意入口到任意出口的 **最短时间**，出入时的方向不作要求。\n\n---\n\n**题意简述**\n\n给定一张 $n\\times m$ 的地图，求起点 `S` 到终点 `E` 的最短时间，注意起点和终点可能有多个。", "inputFormat": "第一行输入六个用空格隔开的正整数 $n,m,a,b,c,d$。\n\n接下来输入一个 $n$ 行 $m$ 列的字符矩阵，将会包含上述 $12$ 种字符：``#``、``|``、``-``、 ``/``、``\\``、``.``、``<``、``>``、``^``、`v`、``S``、``E``。", "outputFormat": "输出从起点到达终点所需花费的最少时间，若无法到达终点，输出无解信息 `-1`。", "hint": "#### 样例说明\n\n样例 #1：从起点 $(1,1)$ 开始，到终点 $(3,3)$ 的路径为：$(1,1)\\rightarrow(1,2)\\rightarrow(1,3)\\rightarrow(2,3)\\rightarrow(3,3)$。经过了 $3$ 个四岔路口，每个的代价是 $4$，沿途的代价：$4\\times3=12$。\n\n样例 #2：从起点 $(1,1)$ 开始，到终点 $(1,3)$ 的路径为：$(1,1)\\rightarrow(2,1)\\rightarrow(2,2)\\rightarrow(2,3)\\rightarrow(1,3)$。经过 $2$ 个转弯类道路和 $1$ 个直行类道路，沿途的代价：$2\\times2+1\\times1=5$。\n\n样例 #3：选择 $(1,1)$ 的 `S` 和 $(1,2)$ 的 `E`，出入口相邻，代价为 $0$。\n\n样例 #4：通过前进类道路 `>` 可以跳一格直接到达 `E`，跳一格时不花费时间。\n\n样例 #5：前进类道路也可以用于转向，此时的功能与 `/` 相同，转向同样需要时间。\n\n样例 #6：这里 `#` 不能通过，因此不存在 `S` 到 `E` 的道路。\n\n#### 数据范围\n\n| 子任务编号 | 分值 | $n,m\\le$ | 特殊性质 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $\\times$ |\n| $2$ | $15$ | $\\times$ | $a=b=c=d=1$ |\n| $3$ | $20$ | $100$| $\\times$ |\n| $4$ | $25$ | $\\times$ | 字符 `S`、`E` 的数量 $=1$ |\n| $5$ | $30$ | $\\times$ | $\\times$ |\n\n**本题请注意常数因子对程序效率的影响。**\n\n对于 $100\\%$ 的数据：$1\\le n,m\\le2000$，$0\\le a,b,c,d\\le100$。", "locale": "zh-CN", "translations": {"en": {"title": "Burning Clouds", "background": "", "description": "A country road can be approximated as an $n\\times m$ matrix. There are many kinds of road tiles; only a small part of them are listed here:\n\n1. ``#``: Pond, impassable.\n2. ``|``: Straight-type road. In the vertical direction you can only go straight; in the horizontal direction you can only turn left or right.\n3. ``-``: Straight-type road. In the horizontal direction you can only go straight; in the vertical direction you can only turn left or right.\n4. ``/``: Turning-type road. In the vertical direction you can only turn right; in the horizontal direction you can only turn left.\n5. ``\\``: Turning-type road. In the vertical direction you can only turn left; in the horizontal direction you can only turn right.\n6. ``.``: Four-way intersection. You can go straight, turn left, or turn right.\n7. ``S``: Entrance. Entering this tile from outside the countryside takes no time.\n8. ``E``: Exit. Leaving the countryside from this tile takes no time.\n\nForward-type road: After reaching this cell, the direction must spend time to turn to `?`. If the incoming direction is already `?`, then it costs no time and you must jump one cell.\n\n9. ``<``: `? = West`.\n10. ``>``: `? = East`.\n11. ``^``: `? = North`.\n12. `v`: `? = South`.\n\n**In short: you cannot move against the direction of this kind of road; if you move in a direction perpendicular to it, you spend time to turn to its direction; if you move along its direction, then it costs no time and you must move two cells at once.**\n\nStraight-type roads, turning-type roads, four-way intersections, and forward-type roads cost $a,b,c,d$ units of time, respectively.\n\nDue to the strange structure of the countryside, there may be **more than one** entrance and exit.\n\nFind the **shortest time** from any entrance to any exit. The directions when entering and leaving are not restricted.\n\n---\n\n**Brief statement**\n\nGiven an $n\\times m$ map, find the shortest time from `S` to `E`. Note that there may be multiple start points and multiple end points.", "inputFormat": "The first line contains six positive integers $n,m,a,b,c,d$ separated by spaces.\n\nThen follow an $n$-row, $m$-column character matrix, which contains the above $12$ kinds of characters: ``#``、``|``、``-``、 ``/``、``\\``、``.``、``<``、``>``、``^``、`v`、``S``、``E``.", "outputFormat": "Output the minimum time needed to reach the destination from a start point. If the destination cannot be reached, output `-1`.", "hint": "#### Sample Explanation\n\nSample #1: Starting from $(1,1)$ and ending at $(3,3)$, the path is $(1,1)\\rightarrow(1,2)\\rightarrow(1,3)\\rightarrow(2,3)\\rightarrow(3,3)$. It passes through $3$ four-way intersections, each with cost $4$, so the total cost is $4\\times3=12$.\n\nSample #2: Starting from $(1,1)$ and ending at $(1,3)$, the path is $(1,1)\\rightarrow(2,1)\\rightarrow(2,2)\\rightarrow(2,3)\\rightarrow(1,3)$. It passes through $2$ turning-type roads and $1$ straight-type road, so the total cost is $2\\times2+1\\times1=5$.\n\nSample #3: Choose `S` at $(1,1)$ and `E` at $(1,2)$. The entrance and exit are adjacent, so the cost is $0$.\n\nSample #4: Using the forward-type road `>` you can jump one cell directly to `E`. Jumping one cell costs no time.\n\nSample #5: A forward-type road can also be used for turning; in this case its behavior is the same as `/`, and turning also requires time.\n\nSample #6: Here `#` cannot be passed, so there is no path from `S` to `E`.\n\n#### Constraints\n\n| Subtask ID | Score | $n,m\\le$ | Special Property |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $\\times$ |\n| $2$ | $15$ | $\\times$ | $a=b=c=d=1$ |\n| $3$ | $20$ | $100$ | $\\times$ |\n| $4$ | $25$ | $\\times$ | The number of characters `S` and `E` $=1$ |\n| $5$ | $30$ | $\\times$ | $\\times$ |\n\n**Please pay attention to the impact of constant factors on program efficiency in this problem.**\n\nFor $100\\%$ of the testdata: $1\\le n,m\\le2000$, $0\\le a,b,c,d\\le100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "火烧の云", "background": "", "description": "乡间小路可以近似理解成 $n\\times m$ 的矩阵，道路有许多种，这里只列举其中的一小部分：\n\n1. ``#``：水池，无法通行。\n2. ``|``：直行类道路，竖直方向只能直行，水平方向只能左转、右转。\n3. ``-``：直行类道路，水平方向只能直行，竖直方向只能左转、右转。\n4. ``/``：转弯类道路，竖直方向只能右转，水平方向只能左转。\n5. ``\\``：转弯类道路，竖直方向只能左转，水平方向只能右转。\n6. ``.``：四岔路口，可以直行、左转、右转。\n7. ``S``：入口，从乡间之外进入入口不需要时间。\n8. ``E``：出口，从出口到达乡间之外不需要时间。\n\n前进类道路：到此格之后方向必须花费时间转向 `?`，如果来向就是 `?` 方向则不花费时间并必须跳一格。\n\n9. ``<``：`? = 西`。\n10. ``>``：`? = 东`。\n11. ``^``：`? = 北`。\n12. `v`：`? = 南`。\n\n**简单来说，就是和这类道路逆向时不能走，垂直于它的方向时花时间转到它的方向，顺着它的方向时就能够不花时间且必须一次性走两格。**\n\n\n直行类道路、转弯类道路、四岔路口、前进类道路依次花费 $a,b,c,d$ 个单位时间。\n\n由于乡间的构造奇特，可能 **不止一个** 入口和出口。\n\n求任意入口到任意出口的 **最短时间**，出入时的方向不作要求。\n\n---\n\n**题意简述**\n\n给定一张 $n\\times m$ 的地图，求起点 `S` 到终点 `E` 的最短时间，注意起点和终点可能有多个。", "inputFormat": "第一行输入六个用空格隔开的正整数 $n,m,a,b,c,d$。\n\n接下来输入一个 $n$ 行 $m$ 列的字符矩阵，将会包含上述 $12$ 种字符：``#``、``|``、``-``、 ``/``、``\\``、``.``、``<``、``>``、``^``、`v`、``S``、``E``。", "outputFormat": "输出从起点到达终点所需花费的最少时间，若无法到达终点，输出无解信息 `-1`。", "hint": "#### 样例说明\n\n样例 #1：从起点 $(1,1)$ 开始，到终点 $(3,3)$ 的路径为：$(1,1)\\rightarrow(1,2)\\rightarrow(1,3)\\rightarrow(2,3)\\rightarrow(3,3)$。经过了 $3$ 个四岔路口，每个的代价是 $4$，沿途的代价：$4\\times3=12$。\n\n样例 #2：从起点 $(1,1)$ 开始，到终点 $(1,3)$ 的路径为：$(1,1)\\rightarrow(2,1)\\rightarrow(2,2)\\rightarrow(2,3)\\rightarrow(1,3)$。经过 $2$ 个转弯类道路和 $1$ 个直行类道路，沿途的代价：$2\\times2+1\\times1=5$。\n\n样例 #3：选择 $(1,1)$ 的 `S` 和 $(1,2)$ 的 `E`，出入口相邻，代价为 $0$。\n\n样例 #4：通过前进类道路 `>` 可以跳一格直接到达 `E`，跳一格时不花费时间。\n\n样例 #5：前进类道路也可以用于转向，此时的功能与 `/` 相同，转向同样需要时间。\n\n样例 #6：这里 `#` 不能通过，因此不存在 `S` 到 `E` 的道路。\n\n#### 数据范围\n\n| 子任务编号 | 分值 | $n,m\\le$ | 特殊性质 |\n| :-: | :-: | :-: | :-: |\n| $1$ | $10$ | $10$ | $\\times$ |\n| $2$ | $15$ | $\\times$ | $a=b=c=d=1$ |\n| $3$ | $20$ | $100$| $\\times$ |\n| $4$ | $25$ | $\\times$ | 字符 `S`、`E` 的数量 $=1$ |\n| $5$ | $30$ | $\\times$ | $\\times$ |\n\n**本题请注意常数因子对程序效率的影响。**\n\n对于 $100\\%$ 的数据：$1\\le n,m\\le2000$，$0\\le a,b,c,d\\le100$。", "locale": "zh-CN"}}}
{"pid": "P7905", "type": "P", "difficulty": 6, "samples": [["3\n1 5 2 3\n2 3 4 1\n4 1 1 5", "4 1\n1 5\n2 3"], ["4\n14 1 10 15\n14 1 10 15\n14 1 10 15\n14 1 10 15", "11 11\n11 12\n11 13\n11 14"], ["1\n1 1 999 999", "-1 -1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 5000, 5000, 5000, 5000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["2021", "Special Judge", "O2优化", "洛谷月赛"], "title": "黄牛の争", "background": "Source：天空之城\n\n本题背景中「黄牛」仅代指某游戏中的一种怪物，与一般含义的「[**黄牛**](https://baike.baidu.com/item/黄牛党/285883)」无关。\n\n本题「推荐题目」三灰一黑，但不太能说明本题难度和他们差不多（\n\n相传在很久很久之前梅兰德大陆上空漂浮着一座天空之城，是当时财富、力量、荣誉中心，突然有一天再也不见踪影。\n\n如今已多个世纪不见痕迹的天空之城突然出现，王国的勇士去探索一番，但是飞船船票可不是那么好得到的。\n\n**飞艇码头的船长是梅德龙 · 杜鲁夫，船长为了牟利要求大家必须 *买* *票* *上* *船*，没有票的旅行者无法登船。**\n\nდ琢喵 作为一届黄牛的首领——黄牛党，派出了 $q$ 组黄牛买断了梅德龙 · 杜鲁夫的船票。\n\n她以高价卖出这些船票，并通过差价获取巨额利润。\n\n为维护飞艇码头的治安，梅德龙 · 杜鲁夫规定不允许人类和黄牛打架，当然船长并没有规定黄牛之间不可以打架。", "description": "დ琢喵 的手下有两种黄牛：\n\n1. I 类黄牛「攻击」为 $a$，「血量」为 $A$；\n2. II 类黄牛「攻击」为 $b$，「血量」为 $B$。\n\n黄牛之间的作战，满足以下条件：\n\n1. 任意时刻，某一方「血量」$\\le 0$ 时，其对手胜利；\n2. 每一回合，「攻击」高者先手；\n3. 每回合每方出手一次，造成的伤害即其「攻击」值。\n\n构造的 III 类黄牛应当满足下面条件：\n\n1. 「攻击」数值与 I 类黄牛和 II 类黄牛都不同；\n2. I 类黄牛和 II 类黄牛作战 II 类黄牛胜利；（若输入不满足该条件则应直接输出 `-1 -1`）\n3. II 类黄牛和 III 类黄牛作战 III 类黄牛胜利；\n4. III 类黄牛和 I 类黄牛作战 I 类黄牛胜利。\n\n请给出一种合法的构造。\n\n---\n\n**题意简述**\n\n解方程：（若 $x=\\text{true}$ 则 $[x]=1$ 反之 $=0$）\n\n$$\\begin{aligned}\\left\\lceil\\frac{A}{b}\\right\\rceil&+[b<a]\\le\\left\\lceil\\frac{B}{a}\\right\\rceil\\\\\\left\\lceil\\frac{B}{c}\\right\\rceil&+[c<b]\\le\\left\\lceil\\frac{C}{b}\\right\\rceil\\\\\\left\\lceil\\frac{C}{a}\\right\\rceil&+[a<c]\\le\\left\\lceil\\frac{A}{c}\\right\\rceil\\\\c&\\ne a~\\text{and}~c\\ne b\\end{aligned}$$\n\n已知 $a,A,b,B$，解 $c,C$。", "inputFormat": "**本题多测。**\n\n第一行一个正整数 $q$。\n\n接下来 $q$ 行，每行四个正整数 $a,A,b,B$。\n\n数据满足 $a\\ne b$。", "outputFormat": "一共 $q$ 行，每行两个正整数表示你构造的 III 类黄牛的「攻击」数值和「血量」数值，无解时输出 `-1 -1`。\n\n**本题采用 Special Judge，所有满足要求的解均给分。**", "hint": "### 样例说明\n\n对于样例 #1，可设 A 是 $(1,5)$，B 是 $(2,3)$，C 是 $(4,1)$。\n\n其中二元组 $(x,y)$ 表示一个「攻击」为 $x$，「血量」为 $y$ 的黄牛。\n\n下面的表格展现了 A、B、C 的对战情况，括号中的数字表示每回合开始时它们的「血量」数值。\n\n| A 和 B 单挑 | B 和 C 单挑 | C 和 A 单挑 |\n| :----------: | :----------: | :----------: |\n| $\\begin{aligned}&\\texttt{A(5)~B(3)}\\overset{\\texttt{A-2~B-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{A(3)~B(2)}\\overset{\\texttt{A-2~B-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{A(1)~B(1)}\\overset{\\texttt{A-2}}{\\Rightarrow}\\\\&\\texttt{A}\\le\\texttt{0~\\color{red}B win}\\end{aligned}$ | $\\begin{aligned}&\\texttt{B(3)~C(1)}\\overset{\\texttt{B-4}}{\\Rightarrow}\\\\&\\texttt{B}\\le\\texttt{0~\\color{red}C win}\\end{aligned}$ | $\\begin{aligned}&\\texttt{A(5)~C(1)}\\overset{\\texttt{A-4~C-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{C}\\le\\texttt{0~\\color{red}A win}\\end{aligned}$ |\n\n因此输出剩下一类黄牛即给分。\n\n对于样例 #2：钦定 III 类黄牛攻击力为 $11$，已经足以击倒 II 类黄牛，血量为 $11\\sim14$ 都可以输给 I 类黄牛。\n\n因此任意输出一组均给分。\n\n对于样例 #3：II 类黄牛十分强大，难以再构造又能击败 II 类黄牛又能输给 I 类黄牛的 III 类黄牛品种。\n\n因此输出 `-1 -1` 即给分。\n\n### 数据规模\n\n设 $M=\\max\\left(a,A,b,B\\right)$：\n\n- Subtask1(10pts)：$M\\le10,q=399\\underline0$。\n- Subtask2(20pts)：$M\\le100,q=399\\underline1$，数据随机。\n- Subtask3(10pts)：$M\\le10^5,q=99\\underline2$，数据随机。\n- Subtask4(20pts)：$M\\le10^5,q=99\\underline3$。\n- Subtask5(10pts)：$q=399\\underline4$，数据随机。\n- Subtask6(30pts)：$q=399\\underline5$，无特殊限制。\n- 本题根据数据强度设置了不同梯度的时间限制，如果有合理的满分做法被卡了请联系我。\n\n提示：数据组数 $q$ **结尾** 的数字（$\\underline0,\\underline1,\\underline2,\\underline3,\\underline4,\\underline5$）可能有助于你判断 Subtask 的类型。\n\n对于 $100\\%$ 的数据：$1\\le q<4000,1\\le M\\le10^8$。\n\n### 大样例\n\n本题提供符合 Subtask $2,3,5$ 限制的测试用例。\n\n直接编译并运行下面代码，即可得到 `E01.in` `E02.in` `E03.in` 分别是满足 Subtask $2,3,5$ 限制的测试数据。\n\n```cpp\n#include<ctime>\n#include<cstdio>\n#include<random>\n#include<string>\n#include<cassert>\n#include<cstdlib>\n#include<iostream>\n#define int long long\nvoid print(int x){\n\tif (x < 0) x = -x, putchar('-');\n\tif (x > 9) print(x / 10);\n\tputchar(x % 10 + '0');\n}\nvoid printsp(int x){\n\tprint(x), putchar(' ');\n}\nvoid println(int x){\n\tprint(x), putchar('\\n');\n}\nchar str[] = \"E  .in\";\nconst int Buff = 3989;\nstd::string string;\nnamespace Data_Maker{\n\tstd::mt19937 rnd(time(0));\n\tint rand(int l, int r) {\n\t\tint x = r - l + 1;\n\t\treturn (rnd() % x + x) % x + l;\n\t}\n\tint a, A, b, B;\n\tvoid maker(int subtaskID) {\n\t\tint t = Buff + subtaskID;\n\t\tif (3 <= subtaskID && subtaskID <= 4)\n\t\t\tt -= 3000;\n\t\tprintln(t);\n\t\tif (subtaskID == 2 || subtaskID == 3 || subtaskID == 5) {\n\t\t\tint MOD = 0;\n\t\t\tif (subtaskID == 2) MOD = 100;\n\t\t\tif (subtaskID == 3) MOD = 100000;\n\t\t\tif (subtaskID == 5) MOD = 100000000;\n\t\t\twhile (t--) {\n\t\t\t\ta = rand(1, MOD), A = rand(1, MOD);\n\t\t\t\tb = rand(1, MOD), B = rand(1, MOD);\n\t\t\t\twhile (b == a)\n\t\t\t\t\tb = rand(1, MOD);\n\t\t\t\tprintsp(a), printsp(A), printsp(b), println(B);\n\t\t\t}\n\t\t}\n\t}\n\tvoid File(int Test) {\n\t\tstr[1] = Test / 10 + '0';\n\t\tstr[2] = Test % 10 + '0';\n\t\tfreopen(str, \"w\", stdout);\n\t}\n\tvoid Subtask2() {\n\t\tfor (int Test = 1; Test <= 1; ++Test) {\n\t\t\tFile(Test); maker(2);\n\t\t}\n\t}\n\tvoid Subtask3() {\n\t\tfor (int Test = 2; Test <= 2; ++Test) {\n\t\t\tFile(Test); maker(3);\n\t\t}\n\t}\n\tvoid Subtask5() {\n\t\tfor (int Test = 3; Test <= 3; ++Test) {\n\t\t\tFile(Test); maker(5);\n\t\t}\n\t}\n}\nusing namespace Data_Maker;\nsigned main(){\n\tSubtask2();\n\tSubtask3();\n\tSubtask5();\n}\n```\n\n另外还提供了下面的 Special Judge，可以编译并通过调用 `spj E.in E.out E.ans` 来获取返回信息。\n\n```cpp\n\n#include \"testlib.h\"\n#define int long long\n#define inf inf.readLong()\n#define ouf ouf.readLong()\n#define ans ans.readLong()\nbool win(int a, int A, int b, int B){\n  int x = 0, f = 1;\n  if (a < b)\n    a ^= b ^= a ^= b, A ^= B ^= A ^= B, f *= -1;\n  while (1) {\n    if (B - a <= 0) {\n      x = 1;\n      break;\n    }\n    if (A - b <= 0) {\n      x = -1;\n      break;\n    }\n    B -= a, A -= b;\n  }\n  x *= f;\n  return x < 0;\n}\nsigned main (signed argc, char**argv) {\n  registerTestlibCmd(argc, argv);\n  int q = inf;\n  for (int t = 1; t <= q; ++t) {\n    int a = inf, A = inf, b = inf, B = inf, c = ouf, C = ouf, d = ans, D = ans;\n    if (d == -1 && c == -1 && C == -1)\n      continue;\n    if (c == a)\n      quitf (_wa, \"Test #%lld, a cannot equal to c!\", t);\n    if (c < 1 || C < 1)\n      quitf (_wa, \"Test #%lld, cannot print negative numbers!\", t);\n    if (!win(c, C, a, A))\n      quitf (_wa, \"Test #%lld, A cannot beat C!\", t);\n    if (!win(b, B, c, C))\n      quitf (_wa, \"Test #%lld, C cannot beat B!\", t);\n    if (!win(a, A, b, B))\n      quitf (_wa, \"Test #%lld, B cannot beat A!\", t);\n  }\n  quitf (_ok, \"Good job!\");\n}\n```\n\n题目附件中的是本题实际数据的脚造方式，如有更强有意义的数据欢迎在讨论区中提出并 at 出题人。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "黄牛の争", "background": "Source：天空之城\n\n本题背景中「黄牛」仅代指某游戏中的一种怪物，与一般含义的「[**黄牛**](https://baike.baidu.com/item/黄牛党/285883)」无关。\n\n本题「推荐题目」三灰一黑，但不太能说明本题难度和他们差不多（\n\n相传在很久很久之前梅兰德大陆上空漂浮着一座天空之城，是当时财富、力量、荣誉中心，突然有一天再也不见踪影。\n\n如今已多个世纪不见痕迹的天空之城突然出现，王国的勇士去探索一番，但是飞船船票可不是那么好得到的。\n\n**飞艇码头的船长是梅德龙 · 杜鲁夫，船长为了牟利要求大家必须 *买* *票* *上* *船*，没有票的旅行者无法登船。**\n\nდ琢喵 作为一届黄牛的首领——黄牛党，派出了 $q$ 组黄牛买断了梅德龙 · 杜鲁夫的船票。\n\n她以高价卖出这些船票，并通过差价获取巨额利润。\n\n为维护飞艇码头的治安，梅德龙 · 杜鲁夫规定不允许人类和黄牛打架，当然船长并没有规定黄牛之间不可以打架。", "description": "დ琢喵 的手下有两种黄牛：\n\n1. I 类黄牛「攻击」为 $a$，「血量」为 $A$；\n2. II 类黄牛「攻击」为 $b$，「血量」为 $B$。\n\n黄牛之间的作战，满足以下条件：\n\n1. 任意时刻，某一方「血量」$\\le 0$ 时，其对手胜利；\n2. 每一回合，「攻击」高者先手；\n3. 每回合每方出手一次，造成的伤害即其「攻击」值。\n\n构造的 III 类黄牛应当满足下面条件：\n\n1. 「攻击」数值与 I 类黄牛和 II 类黄牛都不同；\n2. I 类黄牛和 II 类黄牛作战 II 类黄牛胜利；（若输入不满足该条件则应直接输出 `-1 -1`）\n3. II 类黄牛和 III 类黄牛作战 III 类黄牛胜利；\n4. III 类黄牛和 I 类黄牛作战 I 类黄牛胜利。\n\n请给出一种合法的构造。\n\n---\n\n**题意简述**\n\n解方程：（若 $x=\\text{true}$ 则 $[x]=1$ 反之 $=0$）\n\n$$\\begin{aligned}\\left\\lceil\\frac{A}{b}\\right\\rceil&+[b<a]\\le\\left\\lceil\\frac{B}{a}\\right\\rceil\\\\\\left\\lceil\\frac{B}{c}\\right\\rceil&+[c<b]\\le\\left\\lceil\\frac{C}{b}\\right\\rceil\\\\\\left\\lceil\\frac{C}{a}\\right\\rceil&+[a<c]\\le\\left\\lceil\\frac{A}{c}\\right\\rceil\\\\c&\\ne a~\\text{and}~c\\ne b\\end{aligned}$$\n\n已知 $a,A,b,B$，解 $c,C$。", "inputFormat": "**本题多测。**\n\n第一行一个正整数 $q$。\n\n接下来 $q$ 行，每行四个正整数 $a,A,b,B$。\n\n数据满足 $a\\ne b$。", "outputFormat": "一共 $q$ 行，每行两个正整数表示你构造的 III 类黄牛的「攻击」数值和「血量」数值，无解时输出 `-1 -1`。\n\n**本题采用 Special Judge，所有满足要求的解均给分。**", "hint": "### 样例说明\n\n对于样例 #1，可设 A 是 $(1,5)$，B 是 $(2,3)$，C 是 $(4,1)$。\n\n其中二元组 $(x,y)$ 表示一个「攻击」为 $x$，「血量」为 $y$ 的黄牛。\n\n下面的表格展现了 A、B、C 的对战情况，括号中的数字表示每回合开始时它们的「血量」数值。\n\n| A 和 B 单挑 | B 和 C 单挑 | C 和 A 单挑 |\n| :----------: | :----------: | :----------: |\n| $\\begin{aligned}&\\texttt{A(5)~B(3)}\\overset{\\texttt{A-2~B-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{A(3)~B(2)}\\overset{\\texttt{A-2~B-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{A(1)~B(1)}\\overset{\\texttt{A-2}}{\\Rightarrow}\\\\&\\texttt{A}\\le\\texttt{0~\\color{red}B win}\\end{aligned}$ | $\\begin{aligned}&\\texttt{B(3)~C(1)}\\overset{\\texttt{B-4}}{\\Rightarrow}\\\\&\\texttt{B}\\le\\texttt{0~\\color{red}C win}\\end{aligned}$ | $\\begin{aligned}&\\texttt{A(5)~C(1)}\\overset{\\texttt{A-4~C-1}}{\\Rightarrow\\Rightarrow}\\\\&\\texttt{C}\\le\\texttt{0~\\color{red}A win}\\end{aligned}$ |\n\n因此输出剩下一类黄牛即给分。\n\n对于样例 #2：钦定 III 类黄牛攻击力为 $11$，已经足以击倒 II 类黄牛，血量为 $11\\sim14$ 都可以输给 I 类黄牛。\n\n因此任意输出一组均给分。\n\n对于样例 #3：II 类黄牛十分强大，难以再构造又能击败 II 类黄牛又能输给 I 类黄牛的 III 类黄牛品种。\n\n因此输出 `-1 -1` 即给分。\n\n### 数据规模\n\n设 $M=\\max\\left(a,A,b,B\\right)$：\n\n- Subtask1(10pts)：$M\\le10,q=399\\underline0$。\n- Subtask2(20pts)：$M\\le100,q=399\\underline1$，数据随机。\n- Subtask3(10pts)：$M\\le10^5,q=99\\underline2$，数据随机。\n- Subtask4(20pts)：$M\\le10^5,q=99\\underline3$。\n- Subtask5(10pts)：$q=399\\underline4$，数据随机。\n- Subtask6(30pts)：$q=399\\underline5$，无特殊限制。\n- 本题根据数据强度设置了不同梯度的时间限制，如果有合理的满分做法被卡了请联系我。\n\n提示：数据组数 $q$ **结尾** 的数字（$\\underline0,\\underline1,\\underline2,\\underline3,\\underline4,\\underline5$）可能有助于你判断 Subtask 的类型。\n\n对于 $100\\%$ 的数据：$1\\le q<4000,1\\le M\\le10^8$。\n\n### 大样例\n\n本题提供符合 Subtask $2,3,5$ 限制的测试用例。\n\n直接编译并运行下面代码，即可得到 `E01.in` `E02.in` `E03.in` 分别是满足 Subtask $2,3,5$ 限制的测试数据。\n\n```cpp\n#include<ctime>\n#include<cstdio>\n#include<random>\n#include<string>\n#include<cassert>\n#include<cstdlib>\n#include<iostream>\n#define int long long\nvoid print(int x){\n\tif (x < 0) x = -x, putchar('-');\n\tif (x > 9) print(x / 10);\n\tputchar(x % 10 + '0');\n}\nvoid printsp(int x){\n\tprint(x), putchar(' ');\n}\nvoid println(int x){\n\tprint(x), putchar('\\n');\n}\nchar str[] = \"E  .in\";\nconst int Buff = 3989;\nstd::string string;\nnamespace Data_Maker{\n\tstd::mt19937 rnd(time(0));\n\tint rand(int l, int r) {\n\t\tint x = r - l + 1;\n\t\treturn (rnd() % x + x) % x + l;\n\t}\n\tint a, A, b, B;\n\tvoid maker(int subtaskID) {\n\t\tint t = Buff + subtaskID;\n\t\tif (3 <= subtaskID && subtaskID <= 4)\n\t\t\tt -= 3000;\n\t\tprintln(t);\n\t\tif (subtaskID == 2 || subtaskID == 3 || subtaskID == 5) {\n\t\t\tint MOD = 0;\n\t\t\tif (subtaskID == 2) MOD = 100;\n\t\t\tif (subtaskID == 3) MOD = 100000;\n\t\t\tif (subtaskID == 5) MOD = 100000000;\n\t\t\twhile (t--) {\n\t\t\t\ta = rand(1, MOD), A = rand(1, MOD);\n\t\t\t\tb = rand(1, MOD), B = rand(1, MOD);\n\t\t\t\twhile (b == a)\n\t\t\t\t\tb = rand(1, MOD);\n\t\t\t\tprintsp(a), printsp(A), printsp(b), println(B);\n\t\t\t}\n\t\t}\n\t}\n\tvoid File(int Test) {\n\t\tstr[1] = Test / 10 + '0';\n\t\tstr[2] = Test % 10 + '0';\n\t\tfreopen(str, \"w\", stdout);\n\t}\n\tvoid Subtask2() {\n\t\tfor (int Test = 1; Test <= 1; ++Test) {\n\t\t\tFile(Test); maker(2);\n\t\t}\n\t}\n\tvoid Subtask3() {\n\t\tfor (int Test = 2; Test <= 2; ++Test) {\n\t\t\tFile(Test); maker(3);\n\t\t}\n\t}\n\tvoid Subtask5() {\n\t\tfor (int Test = 3; Test <= 3; ++Test) {\n\t\t\tFile(Test); maker(5);\n\t\t}\n\t}\n}\nusing namespace Data_Maker;\nsigned main(){\n\tSubtask2();\n\tSubtask3();\n\tSubtask5();\n}\n```\n\n另外还提供了下面的 Special Judge，可以编译并通过调用 `spj E.in E.out E.ans` 来获取返回信息。\n\n```cpp\n\n#include \"testlib.h\"\n#define int long long\n#define inf inf.readLong()\n#define ouf ouf.readLong()\n#define ans ans.readLong()\nbool win(int a, int A, int b, int B){\n  int x = 0, f = 1;\n  if (a < b)\n    a ^= b ^= a ^= b, A ^= B ^= A ^= B, f *= -1;\n  while (1) {\n    if (B - a <= 0) {\n      x = 1;\n      break;\n    }\n    if (A - b <= 0) {\n      x = -1;\n      break;\n    }\n    B -= a, A -= b;\n  }\n  x *= f;\n  return x < 0;\n}\nsigned main (signed argc, char**argv) {\n  registerTestlibCmd(argc, argv);\n  int q = inf;\n  for (int t = 1; t <= q; ++t) {\n    int a = inf, A = inf, b = inf, B = inf, c = ouf, C = ouf, d = ans, D = ans;\n    if (d == -1 && c == -1 && C == -1)\n      continue;\n    if (c == a)\n      quitf (_wa, \"Test #%lld, a cannot equal to c!\", t);\n    if (c < 1 || C < 1)\n      quitf (_wa, \"Test #%lld, cannot print negative numbers!\", t);\n    if (!win(c, C, a, A))\n      quitf (_wa, \"Test #%lld, A cannot beat C!\", t);\n    if (!win(b, B, c, C))\n      quitf (_wa, \"Test #%lld, C cannot beat B!\", t);\n    if (!win(a, A, b, B))\n      quitf (_wa, \"Test #%lld, B cannot beat A!\", t);\n  }\n  quitf (_ok, \"Good job!\");\n}\n```\n\n题目附件中的是本题实际数据的脚造方式，如有更强有意义的数据欢迎在讨论区中提出并 at 出题人。", "locale": "zh-CN"}}}
{"pid": "P7906", "type": "P", "difficulty": 6, "samples": [["11 4\n11 4 5 1 4 1 9 1 9 8 10\n5\n1 4\n1 9\n1 9\n8 10\n8 10", "2\n12\n12\n1\n1"]], "limits": {"time": [1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500, 1500], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2005", "O2优化", "Ynoi"], "title": "[Ynoi2005] rpxleqxq", "background": "", "description": "给你一个长度为 $n$ 的正整数序列 $a$，和一个常数 $x$ 。\n\n定义 $x \\oplus y$ 表示 $x$ 异或 $y$。\n\n有 $q$ 次询问，每次询问给出一段区间 $[l, r]$，问你这个区间中有多少二元组 $(i, j)$ 满足 $i < j \\land (a_i \\oplus a_j) \\le x$。", "inputFormat": "第一行两个正整数 $n, x$ ，分别表示序列长度和给定的常数。\n\n后面一行 $n$ 个整数表示序列 $a$ 。\n\n第三行一个正整数 $q$ 表示询问组数。\n\n后面 $q$ 行，每行两个正整数 $l, r$ 表示一次询问。 ", "outputFormat": "输出 $q$ 行，每行一个整数表示答案。", "hint": "Idea：Dpair，Solution：Dpair，Code：Dpair，Data：Dpair&nzhtl1477\n\n对于 $1\\%$ 的数据，为样例。\n\n对于另外 $19\\%$ 的数据，满足 $n,q\\le 100$。\n\n对于另外 $19\\%$ 的数据，满足 $n,q\\le 1000$。\n\n对于另外 $19\\%$ 的数据，满足 $q\\le 100$。\n\n对于另外 $19\\%$ 的数据，满足 $a_i,x\\le 100$。\n\n对于 $100\\%$ 的数据，满足 $1 \\le n, a_i, x\\le 2\\times 10^5, 1 \\le q \\le 10^6$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2005] rpxleqxq", "background": "", "description": "给你一个长度为 $n$ 的正整数序列 $a$，和一个常数 $x$ 。\n\n定义 $x \\oplus y$ 表示 $x$ 异或 $y$。\n\n有 $q$ 次询问，每次询问给出一段区间 $[l, r]$，问你这个区间中有多少二元组 $(i, j)$ 满足 $i < j \\land (a_i \\oplus a_j) \\le x$。", "inputFormat": "第一行两个正整数 $n, x$ ，分别表示序列长度和给定的常数。\n\n后面一行 $n$ 个整数表示序列 $a$ 。\n\n第三行一个正整数 $q$ 表示询问组数。\n\n后面 $q$ 行，每行两个正整数 $l, r$ 表示一次询问。 ", "outputFormat": "输出 $q$ 行，每行一个整数表示答案。", "hint": "Idea：Dpair，Solution：Dpair，Code：Dpair，Data：Dpair&nzhtl1477\n\n对于 $1\\%$ 的数据，为样例。\n\n对于另外 $19\\%$ 的数据，满足 $n,q\\le 100$。\n\n对于另外 $19\\%$ 的数据，满足 $n,q\\le 1000$。\n\n对于另外 $19\\%$ 的数据，满足 $q\\le 100$。\n\n对于另外 $19\\%$ 的数据，满足 $a_i,x\\le 100$。\n\n对于 $100\\%$ 的数据，满足 $1 \\le n, a_i, x\\le 2\\times 10^5, 1 \\le q \\le 10^6$ 。", "locale": "zh-CN"}}}
{"pid": "P7907", "type": "P", "difficulty": 6, "samples": [["5\n1 3 2 3 4\n3\n2 4\n1 3\n2 5", "2\n3\n3"]], "limits": {"time": [3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000, 3000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2005", "线段树", "并查集", "O2优化", "Ynoi"], "title": "[Ynoi2005] rmscne", "background": null, "description": "给定长为 $n$ 的序列，$q$ 次询问区间 $[l,r]$ 的最短子区间 $[l',r']$，满足所有在 $[l,r]$ 中出现的数也在 $[l',r']$ 中出现. 你只需要输出 $[l',r']$ 的长度 $r'-l'+1$。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行有 $n$ 个正整数，表示序列的元素。\n\n接下来一行有一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $l,r$ 表示一个询问。", "outputFormat": "$q$ 行，每行一个正整数表示答案。", "hint": "Idea：qwaszx，Solution：qwaszx，Code：qwaszx，Data：qwaszx\n\n对于 $20\\%$ 的数据，满足 $n,q,a_i\\leq 5\\times 10^3$。\n\n对于 $50\\%$ 的数据，满足 $n,q,a_i\\leq 5\\times 10^4$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,q\\leq 2\\times 10^6$，$1\\leq a_i\\leq n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2005] rmscne", "background": null, "description": "给定长为 $n$ 的序列，$q$ 次询问区间 $[l,r]$ 的最短子区间 $[l',r']$，满足所有在 $[l,r]$ 中出现的数也在 $[l',r']$ 中出现. 你只需要输出 $[l',r']$ 的长度 $r'-l'+1$。", "inputFormat": "第一行一个正整数 $n$。\n\n接下来一行有 $n$ 个正整数，表示序列的元素。\n\n接下来一行有一个正整数 $q$。\n\n接下来 $q$ 行，每行两个正整数 $l,r$ 表示一个询问。", "outputFormat": "$q$ 行，每行一个正整数表示答案。", "hint": "Idea：qwaszx，Solution：qwaszx，Code：qwaszx，Data：qwaszx\n\n对于 $20\\%$ 的数据，满足 $n,q,a_i\\leq 5\\times 10^3$。\n\n对于 $50\\%$ 的数据，满足 $n,q,a_i\\leq 5\\times 10^4$。\n\n对于 $100\\%$ 的数据，满足 $1\\leq n,q\\leq 2\\times 10^6$，$1\\leq a_i\\leq n$。", "locale": "zh-CN"}}}
{"pid": "P7908", "type": "P", "difficulty": 7, "samples": [["5 4 1\n1 1 2 1 1\n1 5", "2"], ["10 3 3\n4 8 1 2 9 7 4 1 3 5\n1 10\n3 8\n5 5", "22\n10\n9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2005", "O2优化", "Ynoi"], "title": "[Ynoi2005] qwq", "background": "", "description": "定义初始数列为每个数字都为 $0$ 的数列。\n\n定义一次操作为将数列的一个区间中每一个数的值增加 $1$，规定该区间的长度不能超过 $m$。\n\n给定一个长度为 $n$ 的数列 $a$，第 $i$ 个数为 $a_i$。\n\n你需要回答 $q$ 次询问。每次询问给定 $l,r$，你需要回答将一个长度为 $r-l+1$ 的初始数列变为 $a$ 中的 $[l,r]$（即数列 $a_l$, $a_{l+1}$, $\\cdots$, $a_r$）至少需要多少次操作。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $a_i$。\n\n接下来 $q$ 行，每行两个整数，表示 $l,r$。", "outputFormat": "$q$ 行，每行一个整数，表示至少需要的操作次数。", "hint": "**「样例 1 说明」**\n\n一个长度为 $5$ 的初始数列为 $0$ $0$ $0$ $0$ $0$。\n\n第一次操作为，将区间 $[1,3]$ 中每一个数，即第 $1$、$2$、$3$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $1$ $0$ $0$。\n\n第二次操作为，将区间 $[3,5]$ 中每一个数，即第 $3$、$4$、$5$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $2$ $1$ $1$。\n\n**「数据范围与约定」**\n\n- Subtask 1（1 point）：$m=1$。\n- Subtask 2（4 points）：$m=n$。\n- Subtask 3（10 points）：$n,q\\le300$。\n- Subtask 4（10 points）：$n,q\\le5\\times10^3$。\n- Subtask 5（15 points）：$m\\le5$。\n- Subtask 6（15 points）：$m\\le100$。\n- Subtask 7（20 points）：$n,q\\le5\\times10^4$。\n- Subtask 8（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le10^5$，$1\\le q\\le10^5$，$0\\le a_i\\le10^9$，$1\\le l\\le r\\le n$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[Ynoi2005] qwq", "background": "", "description": "定义初始数列为每个数字都为 $0$ 的数列。\n\n定义一次操作为将数列的一个区间中每一个数的值增加 $1$，规定该区间的长度不能超过 $m$。\n\n给定一个长度为 $n$ 的数列 $a$，第 $i$ 个数为 $a_i$。\n\n你需要回答 $q$ 次询问。每次询问给定 $l,r$，你需要回答将一个长度为 $r-l+1$ 的初始数列变为 $a$ 中的 $[l,r]$（即数列 $a_l$, $a_{l+1}$, $\\cdots$, $a_r$）至少需要多少次操作。", "inputFormat": "第一行三个整数 $n,m,q$。\n\n第二行 $n$ 个整数，第 $i$ 个为 $a_i$。\n\n接下来 $q$ 行，每行两个整数，表示 $l,r$。", "outputFormat": "$q$ 行，每行一个整数，表示至少需要的操作次数。", "hint": "**「样例 1 说明」**\n\n一个长度为 $5$ 的初始数列为 $0$ $0$ $0$ $0$ $0$。\n\n第一次操作为，将区间 $[1,3]$ 中每一个数，即第 $1$、$2$、$3$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $1$ $0$ $0$。\n\n第二次操作为，将区间 $[3,5]$ 中每一个数，即第 $3$、$4$、$5$ 个数的值分别增加 $1$。经过该操作后，数列变为  $1$ $1$ $2$ $1$ $1$。\n\n**「数据范围与约定」**\n\n- Subtask 1（1 point）：$m=1$。\n- Subtask 2（4 points）：$m=n$。\n- Subtask 3（10 points）：$n,q\\le300$。\n- Subtask 4（10 points）：$n,q\\le5\\times10^3$。\n- Subtask 5（15 points）：$m\\le5$。\n- Subtask 6（15 points）：$m\\le100$。\n- Subtask 7（20 points）：$n,q\\le5\\times10^4$。\n- Subtask 8（25 points）：无特殊限制。\n\n对于 $100\\%$ 的数据，保证 $1\\le m\\le n\\le10^5$，$1\\le q\\le10^5$，$0\\le a_i\\le10^9$，$1\\le l\\le r\\le n$。", "locale": "zh-CN"}}}
{"pid": "P7909", "type": "P", "difficulty": 2, "samples": [["7 16 23\n", "6\n"], ["10 14 18\n", "8\n"], ["见附件中的 candy/candy3.in。", "见附件中的 candy/candy3.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "2021", "O2优化", "CSP-J 入门级"], "title": "[CSP-J 2021] 分糖果", "background": "红太阳幼儿园的小朋友们开始分糖果啦！", "description": "红太阳幼儿园有 $n$ 个小朋友，你是其中之一。保证 $n \\ge 2$。\n\n有一天你在幼儿园的后花园里发现无穷多颗糖果，你打算拿一些糖果回去分给幼儿园的小朋友们。\n\n由于你只是个平平无奇的幼儿园小朋友，所以你的体力有限，至多只能拿 $R$ 块糖回去。\n\n但是拿的太少不够分的，所以你至少要拿 $L$ 块糖回去。保证 $n \\le L \\le R$。\n\n也就是说，如果你拿了 $k$ 块糖，那么你需要保证 $L \\le k \\le R$。\n\n如果你拿了 $k$ 块糖，你将把这 $k$ 块糖放到篮子里，并要求大家按照如下方案分糖果：只要篮子里有**不少于** $n$ 块糖果，幼儿园的所有 $n$ 个小朋友（包括你自己）都从篮子中拿走**恰好**一块糖，直到篮子里的糖数量**少于** $n$ 块。此时篮子里剩余的糖果均归你所有——这些糖果是**作为你搬糖果的奖励**。\n\n作为幼儿园高质量小朋友，你希望让**作为你搬糖果的奖励**的糖果数量（**而不是你最后获得的总糖果数量**！）尽可能多；因此你需要写一个程序，依次输入 $n, L, R$，并输出你最多能获得多少**作为你搬糖果的奖励**的糖果数量。", "inputFormat": "输入一行，包含三个正整数 $n, L, R$，分别表示小朋友的个数、糖果数量的下界和上界。", "outputFormat": "输出一行一个整数，表示你最多能获得的**作为你搬糖果的奖励**的糖果数量。", "hint": "**【样例解释 #1】**\n\n拿 $k = 20$ 块糖放入篮子里。\n\n篮子里现在糖果数 $20 \\ge n = 7$，因此所有小朋友获得一块糖；\n\n篮子里现在糖果数变成 $13 \\ge n = 7$，因此所有小朋友获得一块糖；\n\n篮子里现在糖果数变成 $6 < n = 7$，因此这 $6$ 块糖是**作为你搬糖果的奖励**。\n\n容易发现，你获得的**作为你搬糖果的奖励**的糖果数量不可能超过 $6$ 块（不然，篮子里的糖果数量最后仍然不少于 $n$，需要继续每个小朋友拿一块），因此答案是 $6$。\n\n**【样例解释 #2】**\n\n容易发现，当你拿的糖数量 $k$ 满足 $14 = L \\le k \\le R = 18$ 时，所有小朋友获得一块糖后，剩下的 $k - 10$ 块糖总是**作为你搬糖果的奖励**的糖果数量，因此拿 $k = 18$ 块是最优解，答案是 $8$。\n\n**【数据范围】**\n\n| 测试点 | $n \\le$ | $R \\le$ | $R - L \\le$ |\n|:-:|:-:|:-:|:-:|\n| $1$ | $2$ | $5$ | $5$ |\n| $2$ | $5$ | $10$ | $10$ |\n| $3$ | ${10}^3$ | ${10}^3$ | ${10}^3$ |\n| $4$ | ${10}^5$ | ${10}^5$ | ${10}^5$ |\n| $5$ | ${10}^3$ | ${10}^9$ | $0$ |\n| $6$ | ${10}^3$ | ${10}^9$ | ${10}^3$ |\n| $7$ | ${10}^5$ | ${10}^9$ | ${10}^5$ |\n| $8$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n| $9$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n| $10$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n\n对于所有数据，保证 $2 \\le n \\le L \\le R \\le {10}^9$。\n\n【感谢 hack 数据提供】  \n[wangbinfeng](/user/387009)", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CSP-J 2021] 分糖果", "background": "红太阳幼儿园的小朋友们开始分糖果啦！", "description": "红太阳幼儿园有 $n$ 个小朋友，你是其中之一。保证 $n \\ge 2$。\n\n有一天你在幼儿园的后花园里发现无穷多颗糖果，你打算拿一些糖果回去分给幼儿园的小朋友们。\n\n由于你只是个平平无奇的幼儿园小朋友，所以你的体力有限，至多只能拿 $R$ 块糖回去。\n\n但是拿的太少不够分的，所以你至少要拿 $L$ 块糖回去。保证 $n \\le L \\le R$。\n\n也就是说，如果你拿了 $k$ 块糖，那么你需要保证 $L \\le k \\le R$。\n\n如果你拿了 $k$ 块糖，你将把这 $k$ 块糖放到篮子里，并要求大家按照如下方案分糖果：只要篮子里有**不少于** $n$ 块糖果，幼儿园的所有 $n$ 个小朋友（包括你自己）都从篮子中拿走**恰好**一块糖，直到篮子里的糖数量**少于** $n$ 块。此时篮子里剩余的糖果均归你所有——这些糖果是**作为你搬糖果的奖励**。\n\n作为幼儿园高质量小朋友，你希望让**作为你搬糖果的奖励**的糖果数量（**而不是你最后获得的总糖果数量**！）尽可能多；因此你需要写一个程序，依次输入 $n, L, R$，并输出你最多能获得多少**作为你搬糖果的奖励**的糖果数量。", "inputFormat": "输入一行，包含三个正整数 $n, L, R$，分别表示小朋友的个数、糖果数量的下界和上界。", "outputFormat": "输出一行一个整数，表示你最多能获得的**作为你搬糖果的奖励**的糖果数量。", "hint": "**【样例解释 #1】**\n\n拿 $k = 20$ 块糖放入篮子里。\n\n篮子里现在糖果数 $20 \\ge n = 7$，因此所有小朋友获得一块糖；\n\n篮子里现在糖果数变成 $13 \\ge n = 7$，因此所有小朋友获得一块糖；\n\n篮子里现在糖果数变成 $6 < n = 7$，因此这 $6$ 块糖是**作为你搬糖果的奖励**。\n\n容易发现，你获得的**作为你搬糖果的奖励**的糖果数量不可能超过 $6$ 块（不然，篮子里的糖果数量最后仍然不少于 $n$，需要继续每个小朋友拿一块），因此答案是 $6$。\n\n**【样例解释 #2】**\n\n容易发现，当你拿的糖数量 $k$ 满足 $14 = L \\le k \\le R = 18$ 时，所有小朋友获得一块糖后，剩下的 $k - 10$ 块糖总是**作为你搬糖果的奖励**的糖果数量，因此拿 $k = 18$ 块是最优解，答案是 $8$。\n\n**【数据范围】**\n\n| 测试点 | $n \\le$ | $R \\le$ | $R - L \\le$ |\n|:-:|:-:|:-:|:-:|\n| $1$ | $2$ | $5$ | $5$ |\n| $2$ | $5$ | $10$ | $10$ |\n| $3$ | ${10}^3$ | ${10}^3$ | ${10}^3$ |\n| $4$ | ${10}^5$ | ${10}^5$ | ${10}^5$ |\n| $5$ | ${10}^3$ | ${10}^9$ | $0$ |\n| $6$ | ${10}^3$ | ${10}^9$ | ${10}^3$ |\n| $7$ | ${10}^5$ | ${10}^9$ | ${10}^5$ |\n| $8$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n| $9$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n| $10$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |\n\n对于所有数据，保证 $2 \\le n \\le L \\le R \\le {10}^9$。\n\n【感谢 hack 数据提供】  \n[wangbinfeng](/user/387009)", "locale": "zh-CN"}}}
