{"pid": "P5732", "type": "P", "difficulty": 1, "samples": [["6", "1\n1 1\n1 2 1\n1 3 3 1\n1 4 6 4 1\n1 5 10 10 5 1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "【深基5.习7】杨辉三角", "background": "", "description": "给出 $n(1\\le n\\le20)$，输出杨辉三角的前 $n$ 行。\n\n如果你不知道什么是杨辉三角，可以观察样例找找规律。", "inputFormat": "", "outputFormat": "", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[Basics 5. Practice 7] Pascal's Triangle", "background": "", "description": "Given $n(1\\le n\\le20)$, output the first $n$ rows of Pascal's triangle.\n\nIf you do not know what Pascal's triangle is, you can observe the sample and look for the pattern.", "inputFormat": "", "outputFormat": "", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基5.习7】杨辉三角", "background": "", "description": "给出 $n(1\\le n\\le20)$，输出杨辉三角的前 $n$ 行。\n\n如果你不知道什么是杨辉三角，可以观察样例找找规律。", "inputFormat": "", "outputFormat": "", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5733", "type": "P", "difficulty": 1, "samples": [["Luogu4!", "LUOGU4!"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "【深基6.例1】自动修正", "background": "", "description": "大家都知道一些办公软件有自动将字母转换为大写的功能。输入一个长度不超过 $100$ 且不包括空格的字符串。要求将该字符串中的所有小写字母变成大写字母并输出。", "inputFormat": "输入一行，一个字符串。", "outputFormat": "输出一个字符串，即将原字符串中的所有小写字母转化为大写字母。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[Shenji 6. Example 1] Auto Correction", "background": "", "description": "As everyone knows, some office software has a function that automatically converts letters to uppercase. Input a string with length no more than $100$ and without spaces. You need to change all lowercase letters in the string into uppercase letters and output it.", "inputFormat": "Input one line: a string.", "outputFormat": "Output a string, which is the original string with all lowercase letters converted to uppercase letters.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基6.例1】自动修正", "background": "", "description": "大家都知道一些办公软件有自动将字母转换为大写的功能。输入一个长度不超过 $100$ 且不包括空格的字符串。要求将该字符串中的所有小写字母变成大写字母并输出。", "inputFormat": "输入一行，一个字符串。", "outputFormat": "输出一个字符串，即将原字符串中的所有小写字母转化为大写字母。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5734", "type": "P", "difficulty": 2, "samples": [["4\nILove\n1 Luogu\n2 5 5\n3 3 guGugu\n4 gu", "ILoveLuogu\nLuogu\nLuoguGugugu\n3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["字符串"], "title": "【深基6.例6】文字处理软件", "background": "", "description": "你需要开发一款文字处理软件。最开始时输入一个字符串作为初始文档。可以认为文档开头是第 $0$ 个字符。需要支持以下操作：\n\n- `1 str`：后接插入，在文档后面插入字符串 $\\texttt{str}$，并输出文档的字符串；\n- `2 a b`：截取文档部分，只保留文档中从第 $a$ 个字符起 $b$ 个字符，并输出文档的字符串；\n- `3 a str`：插入片段，在文档中第 $a$ 个字符前面插入字符串 $\\texttt{str}$，并输出文档的字符串；\n- `4 str`：查找子串，查找字符串 $\\texttt{str}$ 在文档中最先的位置并输出；如果找不到输出 $-1$。\n\n为了简化问题，规定初始的文档和每次操作中的 $\\texttt{str}$ 都不含有空格或换行。最多会有 $q$ 次操作。", "inputFormat": "第一行输入一个正整数 $q$，表示操作次数。\n\n第二行输入一个字符串 $\\texttt{str}$，表示最开始的字符串。\n\n第三行开始，往下 $q$ 行，每行表示一个操作，操作如题目描述所示。", "outputFormat": "一共输出 $q$ 行。\n\n对于每个操作 $1,2,3$，根据操作的要求输出一个字符串。\n\n对于操作 $4$，根据操作的要求输出一个整数。", "hint": "数据保证，$1 \\leq q\\le 100$，开始的字符串长度 $\\leq 100$。", "locale": "zh-CN", "translations": {"en": {"title": "[Shenji 6. Example 6] Word Processing Software", "background": "", "description": "You need to develop a word processing software. At the beginning, input a string as the initial document. You may assume that the start of the document is the $0$-th character. The following operations must be supported:\n\n- `1 str`: Append insertion. Insert the string $\\texttt{str}$ at the end of the document, and output the document string.\n- `2 a b`: Extract part of the document. Keep only $b$ characters starting from the $a$-th character of the document, and output the document string.\n- `3 a str`: Insert a segment. Insert the string $\\texttt{str}$ before the $a$-th character in the document, and output the document string.\n- `4 str`: Find a substring. Output the earliest position of the string $\\texttt{str}$ in the document; if it cannot be found, output $-1$.\n\nTo simplify the problem, the initial document and $\\texttt{str}$ in each operation contain no spaces or newlines. There will be at most $q$ operations.", "inputFormat": "The first line contains a positive integer $q$, representing the number of operations.\n\nThe second line contains a string $\\texttt{str}$, representing the initial string.\n\nStarting from the third line, the next $q$ lines each describe an operation, as shown in the problem description.", "outputFormat": "Output a total of $q$ lines.\n\nFor each operation $1,2,3$, output a string as required.\n\nFor operation $4$, output an integer as required.", "hint": "Constraints: $1 \\leq q \\le 100$, and the length of the initial string is $\\leq 100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基6.例6】文字处理软件", "background": "", "description": "你需要开发一款文字处理软件。最开始时输入一个字符串作为初始文档。可以认为文档开头是第 $0$ 个字符。需要支持以下操作：\n\n- `1 str`：后接插入，在文档后面插入字符串 $\\texttt{str}$，并输出文档的字符串；\n- `2 a b`：截取文档部分，只保留文档中从第 $a$ 个字符起 $b$ 个字符，并输出文档的字符串；\n- `3 a str`：插入片段，在文档中第 $a$ 个字符前面插入字符串 $\\texttt{str}$，并输出文档的字符串；\n- `4 str`：查找子串，查找字符串 $\\texttt{str}$ 在文档中最先的位置并输出；如果找不到输出 $-1$。\n\n为了简化问题，规定初始的文档和每次操作中的 $\\texttt{str}$ 都不含有空格或换行。最多会有 $q$ 次操作。", "inputFormat": "第一行输入一个正整数 $q$，表示操作次数。\n\n第二行输入一个字符串 $\\texttt{str}$，表示最开始的字符串。\n\n第三行开始，往下 $q$ 行，每行表示一个操作，操作如题目描述所示。", "outputFormat": "一共输出 $q$ 行。\n\n对于每个操作 $1,2,3$，根据操作的要求输出一个字符串。\n\n对于操作 $4$，根据操作的要求输出一个整数。", "hint": "数据保证，$1 \\leq q\\le 100$，开始的字符串长度 $\\leq 100$。", "locale": "zh-CN"}}}
{"pid": "P5735", "type": "P", "difficulty": 1, "samples": [["0 0\n0 3\n4 0", "12.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "【深基7.例1】距离函数", "background": null, "description": "给出平面坐标上不在一条直线上三个点坐标 $(x_1,y_1),(x_2,y_2),(x_3,y_3)$，坐标值是实数，且绝对值不超过 100.00，求围成的三角形周长。保留两位小数。\n\n对于平面上的两个点 $(x_1,y_1),(x_2,y_2)$，则这两个点之间的距离 $dis=\\sqrt{(x_2-x_1)^2+(y_2-y_1)^2}$。", "inputFormat": "输入三行，第 $i$ 行表示坐标 $(x_i,y_i)$，以一个空格隔开。", "outputFormat": "输出一个两位小数，表示由这三个坐标围成的三角形的周长。", "hint": "数据保证，坐标均为实数且绝对值不超过 $100$，小数点后最多仅有 $3$ 位。", "locale": "zh-CN", "translations": {"en": {"title": "[Shenji 7. Example 1] Distance Function", "background": "", "description": "Given the coordinates of three points on the plane that are not on the same straight line $(x_1,y_1),(x_2,y_2),(x_3,y_3)$, where the coordinate values are real numbers and their absolute values do not exceed 100.00, find the perimeter of the triangle formed by them. Keep two decimal places.\n\nFor two points on the plane $(x_1,y_1),(x_2,y_2)$, the distance between them is $dis=\\sqrt{(x_2-x_1)^2+(y_2-y_1)^2}$.", "inputFormat": "Input consists of three lines. The $i$-th line gives the coordinate $(x_i,y_i)$, separated by one space.", "outputFormat": "Output a number with two decimal places, representing the perimeter of the triangle formed by these three points.", "hint": "The testdata guarantees that all coordinates are real numbers and their absolute values do not exceed $100$, with at most $3$ digits after the decimal point.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基7.例1】距离函数", "background": null, "description": "给出平面坐标上不在一条直线上三个点坐标 $(x_1,y_1),(x_2,y_2),(x_3,y_3)$，坐标值是实数，且绝对值不超过 100.00，求围成的三角形周长。保留两位小数。\n\n对于平面上的两个点 $(x_1,y_1),(x_2,y_2)$，则这两个点之间的距离 $dis=\\sqrt{(x_2-x_1)^2+(y_2-y_1)^2}$。", "inputFormat": "输入三行，第 $i$ 行表示坐标 $(x_i,y_i)$，以一个空格隔开。", "outputFormat": "输出一个两位小数，表示由这三个坐标围成的三角形的周长。", "hint": "数据保证，坐标均为实数且绝对值不超过 $100$，小数点后最多仅有 $3$ 位。", "locale": "zh-CN"}}}
{"pid": "P5736", "type": "P", "difficulty": 2, "samples": [["5\n3 4 5 6 7", "3 5 7"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "【深基7.例2】质数筛", "background": "", "description": "输入 $n$ 个不大于 $10^5$ 的正整数。要求全部储存在数组中，去除掉不是质数的数字，依次输出剩余的质数。", "inputFormat": "第一行输入一个正整数 $n$，表示整数个数。\n\n第二行输入 $n$ 个正整数 $a_i$，以空格隔开。", "outputFormat": "输出一行，依次输出 $a_i$ 中剩余的质数，以空格隔开。", "hint": "数据保证，$1\\le n\\le100$，$1 \\leq a_i \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[Deep Base 7.Example 2] Prime Sieve", "background": "", "description": "Input $n$ positive integers, each not greater than $10^5$. Store them all in an array, remove the numbers that are not prime, and output the remaining primes in order.", "inputFormat": "The first line contains a positive integer $n$, indicating the number of integers.\n\nThe second line contains $n$ positive integers $a_i$, separated by spaces.", "outputFormat": "Output one line: print the remaining primes in $a_i$ in order, separated by spaces.", "hint": "Constraints: $1 \\le n \\le 100$, $1 \\leq a_i \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基7.例2】质数筛", "background": "", "description": "输入 $n$ 个不大于 $10^5$ 的正整数。要求全部储存在数组中，去除掉不是质数的数字，依次输出剩余的质数。", "inputFormat": "第一行输入一个正整数 $n$，表示整数个数。\n\n第二行输入 $n$ 个正整数 $a_i$，以空格隔开。", "outputFormat": "输出一行，依次输出 $a_i$ 中剩余的质数，以空格隔开。", "hint": "数据保证，$1\\le n\\le100$，$1 \\leq a_i \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P5737", "type": "P", "difficulty": 1, "samples": [["1989 2001", "3\n1992 1996 2000"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "【深基7.例3】闰年展示", "background": "", "description": "输入 $x,y$，输出 $[x,y]$ 区间中闰年个数，并在下一行输出所有闰年年份数字，使用空格隔开。", "inputFormat": "输入两个正整数 $x,y$，以空格隔开。", "outputFormat": "第一行输出一个正整数，表示 $[x,y]$ 区间中闰年个数。\n\n第二行输出若干个正整数，按照年份单调递增的顺序输出所有闰年年份数字。", "hint": "数据保证，$1582\\le x < y \\le 3000$。", "locale": "zh-CN", "translations": {"en": {"title": "[Shenji 7. Example 3] Leap Year Display", "background": "", "description": "Given $x, y$, output the number of leap years in the interval $[x, y]$, and on the next line output all leap year numbers, separated by spaces.", "inputFormat": "Input two positive integers $x, y$, separated by a space.", "outputFormat": "On the first line, output a positive integer representing the number of leap years in the interval $[x, y]$.\n\nOn the second line, output several positive integers: all leap year numbers in monotonically increasing order by year.", "hint": "Constraints: the testdata guarantees that $1582 \\le x < y \\le 3000$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基7.例3】闰年展示", "background": "", "description": "输入 $x,y$，输出 $[x,y]$ 区间中闰年个数，并在下一行输出所有闰年年份数字，使用空格隔开。", "inputFormat": "输入两个正整数 $x,y$，以空格隔开。", "outputFormat": "第一行输出一个正整数，表示 $[x,y]$ 区间中闰年个数。\n\n第二行输出若干个正整数，按照年份单调递增的顺序输出所有闰年年份数字。", "hint": "数据保证，$1582\\le x < y \\le 3000$。", "locale": "zh-CN"}}}
{"pid": "P5738", "type": "P", "difficulty": 2, "samples": [["7 6\n4 7 2 6 10 7\n0 5 0 10 3 10\n2 6 8 4 3 6\n6 3 6 7 5 8\n5 9 3 3 8 1\n5 9 9 3 2 0\n5 8 0 4 1 10\n", "6.00"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "【深基7.例4】歌唱比赛", "background": "", "description": "$n(n\\le 100)$ 名同学参加歌唱比赛，并接受 $m(m\\le 20)$ 名评委的评分，评分范围是 $0$ 到 $10$ 分。这名同学的得分就是这些评委给分中去掉一个最高分，去掉一个最低分，剩下 $m-2$ 个评分的平均数。请问得分最高的同学分数是多少？评分保留 $2$ 位小数。", "inputFormat": "第一行两个整数 $n,m$。   \n接下来 $n$ 行，每行各 $m$ 个整数，表示得分。", "outputFormat": "输出分数最高的同学的分数，保留两位小数。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[Deep Basics 7. Example 4] Singing Contest", "background": "", "description": "$n(n\\le 100)$ students take part in a singing contest and receive scores from $m(m\\le 20)$ judges. The score range is from $0$ to $10$. A student’s final score is obtained by removing the highest score and the lowest score among the judges’ scores, then taking the average of the remaining $m-2$ scores. What is the highest final score among all students? Keep the score to $2$ decimal places.", "inputFormat": "The first line contains two integers $n,m$.  \nThe next $n$ lines each contain $m$ integers, representing the scores.", "outputFormat": "Output the highest final score among the students, rounded to two decimal places.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基7.例4】歌唱比赛", "background": "", "description": "$n(n\\le 100)$ 名同学参加歌唱比赛，并接受 $m(m\\le 20)$ 名评委的评分，评分范围是 $0$ 到 $10$ 分。这名同学的得分就是这些评委给分中去掉一个最高分，去掉一个最低分，剩下 $m-2$ 个评分的平均数。请问得分最高的同学分数是多少？评分保留 $2$ 位小数。", "inputFormat": "第一行两个整数 $n,m$。   \n接下来 $n$ 行，每行各 $m$ 个整数，表示得分。", "outputFormat": "输出分数最高的同学的分数，保留两位小数。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5739", "type": "P", "difficulty": 1, "samples": [["3", "6"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "【深基7.例7】计算阶乘", "background": "", "description": "求 $n!$，也就是 $1\\times2\\times3\\dots\\times n$。\n\n挑战：尝试不使用循环语句（for、while）完成这个任务。", "inputFormat": "第一行输入一个正整数 $n$。", "outputFormat": "输出一个正整数，表示 $n!$。", "hint": "数据保证，$1 \\leq n\\le12$。", "locale": "zh-CN", "translations": {"en": {"title": "[Shenji 7. Example 7] Calculate the Factorial", "background": "", "description": "Find $n!$, that is, $1 \\times 2 \\times 3 \\dots \\times n$.\n\nChallenge: Try to complete this task without using loop statements (for, while).", "inputFormat": "The first line contains a positive integer $n$.", "outputFormat": "Output a positive integer, representing $n!$.", "hint": "Constraints: It is guaranteed that $1 \\leq n \\le 12$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基7.例7】计算阶乘", "background": "", "description": "求 $n!$，也就是 $1\\times2\\times3\\dots\\times n$。\n\n挑战：尝试不使用循环语句（for、while）完成这个任务。", "inputFormat": "第一行输入一个正整数 $n$。", "outputFormat": "输出一个正整数，表示 $n!$。", "hint": "数据保证，$1 \\leq n\\le12$。", "locale": "zh-CN"}}}
{"pid": "P5740", "type": "P", "difficulty": 2, "samples": [["3\nsenpai 114 51 4\nlxl 114 10 23\nfafa 51 42 60", "senpai 114 51 4"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "【深基7.例9】最厉害的学生", "background": "", "description": "现有 $N$ 名同学参加了期末考试，并且获得了每名同学的信息：姓名（不超过 $8$ 个字符的仅有英文小写字母的字符串）、语文、数学、英语成绩（均为不超过 $150$ 的自然数）。总分最高的学生就是最厉害的，请输出最厉害的学生各项信息（姓名、各科成绩）。如果有多个总分相同的学生，输出靠前的那位。", "inputFormat": "第一行输入一个正整数 $N$，表示学生个数。\n\n第二行开始，往下 $N$ 行，对于每一行首先先输入一个字符串表示学生姓名，再输入三个自然数表示语文、数学、英语的成绩。均用空格相隔。", "outputFormat": "输出最厉害的学生。", "hint": "数据保证，$1 \\leq N \\leq 1000$，姓名为长度不超过 $8$ 的字符串，语文、数学、英语成绩均为不超过 $150$ 的自然数。", "locale": "zh-CN", "translations": {"en": {"title": "【Shenji 7. Example 9】The Best Student.", "background": "", "description": "There are $N$ students taking the final exam, and you are given each student's information: name (a string of at most $8$ characters, consisting only of lowercase English letters), and scores in Chinese, Math, and English (all natural numbers not exceeding $150$). The student with the highest total score is the best. Please output the best student's information (name and scores for each subject). If there are multiple students with the same total score, output the one that appears earlier.", "inputFormat": "The first line contains a positive integer $N$, representing the number of students.\n\nStarting from the second line, there are $N$ lines. In each line, first input a string representing the student's name, then input three natural numbers representing the scores of Chinese, Math, and English. They are separated by spaces.", "outputFormat": "Output the best student.", "hint": "It is guaranteed that $1 \\leq N \\leq 1000$. The name is a string of length at most $8$, and the scores of Chinese, Math, and English are all natural numbers not exceeding $150$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基7.例9】最厉害的学生", "background": "", "description": "现有 $N$ 名同学参加了期末考试，并且获得了每名同学的信息：姓名（不超过 $8$ 个字符的仅有英文小写字母的字符串）、语文、数学、英语成绩（均为不超过 $150$ 的自然数）。总分最高的学生就是最厉害的，请输出最厉害的学生各项信息（姓名、各科成绩）。如果有多个总分相同的学生，输出靠前的那位。", "inputFormat": "第一行输入一个正整数 $N$，表示学生个数。\n\n第二行开始，往下 $N$ 行，对于每一行首先先输入一个字符串表示学生姓名，再输入三个自然数表示语文、数学、英语的成绩。均用空格相隔。", "outputFormat": "输出最厉害的学生。", "hint": "数据保证，$1 \\leq N \\leq 1000$，姓名为长度不超过 $8$ 的字符串，语文、数学、英语成绩均为不超过 $150$ 的自然数。", "locale": "zh-CN"}}}
{"pid": "P5741", "type": "P", "difficulty": 2, "samples": [["3\nfafa 90 90 90\nlxl 95 85 90\nsenpai 100 80 91", "fafa lxl\nlxl senpai\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "【深基7.例10】旗鼓相当的对手 - 加强版", "background": "", "description": "现有 $N(N\\le 1000)$ 名同学参加了期末考试，并且获得了每名同学的信息：姓名（不超过 $8$ 个字符的字符串，没有空格）、语文、数学、英语成绩（均为不超过 $150$ 的自然数）。如果某对学生 $\\text{<}i,j\\text{>}$ 的每一科成绩的分差都不大于 $5$，且总分分差不大于 $10$，那么这对学生就是“旗鼓相当的对手”。现在我们想知道这些同学中，哪些是“旗鼓相当的对手”？请输出他们的姓名。\n\n所有人的姓名是按照字典序给出的，输出时也应该按照字典序输出所有对手组合。也就是说，这对组合的第一个名字的字典序应该小于第二个；如果两个组合中第一个名字不一样，则第一个名字字典序小的先输出；如果两个组合的第一个名字一样但第二个名字不同，则第二个名字字典序小的先输出。", "inputFormat": "第一行输入一个正整数 $N$，表示学生个数。\n\n第二行开始，往下 $N$ 行，对于每一行首先先输入一个字符串表示学生姓名，再输入三个自然数表示语文、数学、英语的成绩。均用空格相隔。", "outputFormat": "输出若干行，每行两个以空格隔开的字符串，表示一组旗鼓相当的对手。注意题目描述中的输出格式。", "hint": "数据保证，$1 \\leq N \\leq 1000$，姓名为长度不超过 $8$ 的字符串，语文、数学、英语成绩均为不超过 $150$ 的自然数。", "locale": "zh-CN", "translations": {"en": {"title": "[Shenji 7.Example 10] Evenly Matched Opponents - Enhanced Version.", "background": "", "description": "There are $N(N\\le 1000)$ students taking the final exam, and we are given each student's information: name (a string of no more than $8$ characters, with no spaces), and scores in Chinese, Math, and English (all natural numbers not exceeding $150$). If for a pair of students $\\text{<}i,j\\text{>}$, the score difference in each subject is no more than $5$, and the total score difference is no more than $10$, then this pair of students are \"evenly matched opponents\". Now we want to know, among these students, which pairs are \"evenly matched opponents\". Please output their names.\n\nAll names are given in lexicographical order, and when outputting, all opponent pairs should also be printed in lexicographical order. That is, for each pair, the lexicographical order of the first name should be smaller than the second. If the first names of two pairs are different, output the pair with the smaller first name first. If two pairs have the same first name but different second names, output the pair with the smaller second name first.", "inputFormat": "The first line contains a positive integer $N$, representing the number of students.\n\nStarting from the second line, the next $N$ lines follow. In each line, first input a string representing the student's name, then input three natural numbers representing the scores in Chinese, Math, and English. They are separated by spaces.", "outputFormat": "Output several lines. Each line contains two strings separated by a space, representing a pair of evenly matched opponents. Note the output ordering described in the problem statement.", "hint": "Constraints: $1 \\leq N \\leq 1000$. Names are strings of length at most $8$. Scores in Chinese, Math, and English are all natural numbers not exceeding $150$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基7.例10】旗鼓相当的对手 - 加强版", "background": "", "description": "现有 $N(N\\le 1000)$ 名同学参加了期末考试，并且获得了每名同学的信息：姓名（不超过 $8$ 个字符的字符串，没有空格）、语文、数学、英语成绩（均为不超过 $150$ 的自然数）。如果某对学生 $\\text{<}i,j\\text{>}$ 的每一科成绩的分差都不大于 $5$，且总分分差不大于 $10$，那么这对学生就是“旗鼓相当的对手”。现在我们想知道这些同学中，哪些是“旗鼓相当的对手”？请输出他们的姓名。\n\n所有人的姓名是按照字典序给出的，输出时也应该按照字典序输出所有对手组合。也就是说，这对组合的第一个名字的字典序应该小于第二个；如果两个组合中第一个名字不一样，则第一个名字字典序小的先输出；如果两个组合的第一个名字一样但第二个名字不同，则第二个名字字典序小的先输出。", "inputFormat": "第一行输入一个正整数 $N$，表示学生个数。\n\n第二行开始，往下 $N$ 行，对于每一行首先先输入一个字符串表示学生姓名，再输入三个自然数表示语文、数学、英语的成绩。均用空格相隔。", "outputFormat": "输出若干行，每行两个以空格隔开的字符串，表示一组旗鼓相当的对手。注意题目描述中的输出格式。", "hint": "数据保证，$1 \\leq N \\leq 1000$，姓名为长度不超过 $8$ 的字符串，语文、数学、英语成绩均为不超过 $150$ 的自然数。", "locale": "zh-CN"}}}
{"pid": "P5742", "type": "P", "difficulty": 2, "samples": [["4\n1223 95 59\n1224 50 7\n1473 32 45\n1556 86 99", "Excellent\nNot excellent\nNot excellent\nExcellent"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072]}, "tags": [], "title": "【深基7.例11】评等级", "background": "", "description": "现有 $N$ 名同学，每名同学需要设计一个结构体记录以下信息：学号、学业成绩和素质拓展成绩、综合分数（实数）。每行读入同学的学号、学业成绩和素质拓展成绩，并且计算综合分数（分别按照 $70\\%$ 和 $30\\%$ 权重累加），存入结构体中。还需要在结构体中定义一个成员函数，返回该结构体对象的学业成绩和素质拓展成绩的总分。\n\n然后需要设计一个函数，其参数是一个学生结构体对象，判断该学生是否“优秀”。优秀的定义是学业和素质拓展成绩总分**大于** $140$ 分，且综合分数**不小于** $80$ 分。\n\n> 当然通过本题很容易啦，本题只是为了帮助你训练结构体的使用方法。\n\n本题存在精度误差问题，请将 `a * 0.7 + b * 0.3` 与 80 比较 转化为 `a * 7 + b * 3` 与 800 比较。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行 $3$ 个整数，依次代表学号、学业成绩和素质拓展成绩。", "outputFormat": "$N$ 行，如果第 $i$ 名学生是优秀的，输出 `Excellent`，否则输出 `Not excellent`。", "hint": "数据保证，$1 \\le N\\le 1000$，学号为不超过 $100000$ 的正整数，学业成绩和素质拓展成绩为 $0 \\sim 100$ 之间的正整数。", "locale": "zh-CN", "translations": {"en": {"title": "[Shenji 7. Example 11] Rating Levels", "background": "", "description": "There are $N$ students. For each student, you need to design a struct to record the following information: student ID, academic score, quality development score, and overall score (a real number). For each line, read the student ID, academic score, and quality development score, and compute the overall score (accumulated with weights of $70\\%$ and $30\\%$, respectively), then store everything in the struct. You also need to define a member function in the struct that returns the total score of the academic score and the quality development score for that struct object.\n\nThen design a function whose parameter is a student struct object, and determine whether the student is \"Excellent\". The definition of Excellent is: the total of academic and quality development scores is **greater than** $140$, and the overall score is **not less than** $80$.\n\n> Of course, this problem is easy to pass. It is only meant to help you practice how to use structs.\n\nThis problem has precision issues. Please convert comparing `a * 0.7 + b * 0.3` with 80 into comparing `a * 7 + b * 3` with 800.", "inputFormat": "The first line contains an integer $N$.\n\nThe next $N$ lines each contain $3$ integers, which represent the student ID, the academic score, and the quality development score, in order.", "outputFormat": "Output $N$ lines. If the $i$-th student is Excellent, output `Excellent`; otherwise output `Not excellent`.", "hint": "Constraints: It is guaranteed that $1 \\le N\\le 1000$. The student ID is a positive integer not exceeding $100000$. The academic score and the quality development score are positive integers between $0$ and $100$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基7.例11】评等级", "background": "", "description": "现有 $N$ 名同学，每名同学需要设计一个结构体记录以下信息：学号、学业成绩和素质拓展成绩、综合分数（实数）。每行读入同学的学号、学业成绩和素质拓展成绩，并且计算综合分数（分别按照 $70\\%$ 和 $30\\%$ 权重累加），存入结构体中。还需要在结构体中定义一个成员函数，返回该结构体对象的学业成绩和素质拓展成绩的总分。\n\n然后需要设计一个函数，其参数是一个学生结构体对象，判断该学生是否“优秀”。优秀的定义是学业和素质拓展成绩总分**大于** $140$ 分，且综合分数**不小于** $80$ 分。\n\n> 当然通过本题很容易啦，本题只是为了帮助你训练结构体的使用方法。\n\n本题存在精度误差问题，请将 `a * 0.7 + b * 0.3` 与 80 比较 转化为 `a * 7 + b * 3` 与 800 比较。", "inputFormat": "第一行一个整数 $N$。\n\n接下来 $N$ 行，每行 $3$ 个整数，依次代表学号、学业成绩和素质拓展成绩。", "outputFormat": "$N$ 行，如果第 $i$ 名学生是优秀的，输出 `Excellent`，否则输出 `Not excellent`。", "hint": "数据保证，$1 \\le N\\le 1000$，学号为不超过 $100000$ 的正整数，学业成绩和素质拓展成绩为 $0 \\sim 100$ 之间的正整数。", "locale": "zh-CN"}}}
{"pid": "P5743", "type": "P", "difficulty": 1, "samples": [["4", "22\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "【深基7.习8】猴子吃桃", "background": "", "description": "一只小猴买了若干个桃子。第一天他刚好吃了这些桃子的一半，又贪嘴多吃了一个；接下来的每一天它都会吃剩余的桃子的一半外加一个。第 $n$ 天早上起来一看，只剩下 $1$ 个桃子了。请问小猴买了几个桃子？", "inputFormat": "输入一个正整数 $n$，表示天数。", "outputFormat": "输出小猴买了多少个桃子。", "hint": "数据保证，$1\\le n\\le20$。", "locale": "zh-CN", "translations": {"en": {"title": "[Deep Basis 7. Exercise 8] Monkey Eating Peaches", "background": "", "description": "A little monkey bought some peaches. On the first day, it ate exactly half of the peaches, and then, being greedy, ate one more. On each following day, it eats half of the remaining peaches plus one more. On the morning of day $n$, it finds that only $1$ peach is left. How many peaches did the monkey buy?", "inputFormat": "Input one positive integer $n$, representing the number of days.", "outputFormat": "Output how many peaches the monkey bought.", "hint": "Constraints: $1\\le n\\le20$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基7.习8】猴子吃桃", "background": "", "description": "一只小猴买了若干个桃子。第一天他刚好吃了这些桃子的一半，又贪嘴多吃了一个；接下来的每一天它都会吃剩余的桃子的一半外加一个。第 $n$ 天早上起来一看，只剩下 $1$ 个桃子了。请问小猴买了几个桃子？", "inputFormat": "输入一个正整数 $n$，表示天数。", "outputFormat": "输出小猴买了多少个桃子。", "hint": "数据保证，$1\\le n\\le20$。", "locale": "zh-CN"}}}
{"pid": "P5744", "type": "P", "difficulty": 1, "samples": [["3\nkkksc03 24 0\nchen_zhe 14 400\nnzhtl1477 18 590", "kkksc03 25 0\nchen_zhe 15 480\nnzhtl1477 19 600"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": [], "title": "【深基7.习9】培训", "background": "", "description": "某培训机构的学员有如下信息：\n\n- 姓名（字符串）\n- 年龄（周岁，整数）\n- 去年 NOIP 成绩（整数，且保证是 $5$ 的倍数）\n\n经过为期一年的培训，所有同学的成绩都有所提高，提升了 $20\\%$（当然 NOIP 满分是 $600$ 分，不能超过这个得分）。\n\n输入学员信息，请设计一个结构体储存这些学生信息，并设计一个函数模拟培训过程，其参数是这样的结构体类型，返回同样的结构体类型，并输出学员信息。", "inputFormat": "第一行输入一个正整数 $n$，表示学员个数。\n\n第二行开始往下 $n$ 行。每行首先是一个字符串表示学员姓名，再是一个整数表示学员年龄，再是一个整数为去年 NOIP 成绩。", "outputFormat": "输出 $n$ 行，每行首先输出一个字符串表示学生姓名，再往后两个整数，表示经过一年的培训后学员的年龄和他们今年的 NOIP 成绩。以空格隔开。", "hint": "数据保证，$1 \\leq n \\leq 5$。年龄为 $0 \\sim 100$（含 $0$ 与 $100$）的整数。成绩为 $0 \\sim 600$（含 $0$ 与 $600$）的 $5$ 的整倍数。", "locale": "zh-CN", "translations": {"en": {"title": "[Shenji 7. Exercise 9] Training", "background": "", "description": "The students in a training institution have the following information:\n\n- Name (string).\n- Age (in full years, integer).\n- Last year's NOIP score (integer, and guaranteed to be a multiple of $5$).\n\nAfter one year of training, all students' scores have improved by $20\\%$ (of course, the full score of NOIP is $600$, so the score cannot exceed this value).\n\nGiven the students' information, please design a struct to store this student information, and design a function to simulate the training process. The parameter is this struct type, and it returns the same struct type, and outputs the student information.", "inputFormat": "The first line contains a positive integer $n$, representing the number of students.\n\nStarting from the second line, there are $n$ lines. Each line first contains a string representing the student's name, then an integer representing the student's age, and then an integer representing last year's NOIP score.", "outputFormat": "Output $n$ lines. Each line first outputs a string representing the student's name, followed by two integers representing the student's age after one year of training and their NOIP score this year. Separate them with spaces.", "hint": "Constraints: $1 \\leq n \\leq 5$. The age is an integer from $0 \\sim 100$ (including $0$ and $100$). The score is a multiple of $5$ in the range $0 \\sim 600$ (including $0$ and $600$).\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基7.习9】培训", "background": "", "description": "某培训机构的学员有如下信息：\n\n- 姓名（字符串）\n- 年龄（周岁，整数）\n- 去年 NOIP 成绩（整数，且保证是 $5$ 的倍数）\n\n经过为期一年的培训，所有同学的成绩都有所提高，提升了 $20\\%$（当然 NOIP 满分是 $600$ 分，不能超过这个得分）。\n\n输入学员信息，请设计一个结构体储存这些学生信息，并设计一个函数模拟培训过程，其参数是这样的结构体类型，返回同样的结构体类型，并输出学员信息。", "inputFormat": "第一行输入一个正整数 $n$，表示学员个数。\n\n第二行开始往下 $n$ 行。每行首先是一个字符串表示学员姓名，再是一个整数表示学员年龄，再是一个整数为去年 NOIP 成绩。", "outputFormat": "输出 $n$ 行，每行首先输出一个字符串表示学生姓名，再往后两个整数，表示经过一年的培训后学员的年龄和他们今年的 NOIP 成绩。以空格隔开。", "hint": "数据保证，$1 \\leq n \\leq 5$。年龄为 $0 \\sim 100$（含 $0$ 与 $100$）的整数。成绩为 $0 \\sim 600$（含 $0$ 与 $600$）的 $5$ 的整倍数。", "locale": "zh-CN"}}}
{"pid": "P5745", "type": "P", "difficulty": 2, "samples": [["5 10\n2 3 4 5 6", "1 3 9"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["O2优化", "双指针 two-pointer"], "title": "【深基附B例】区间最大和", "background": "", "description": "给定 $n$ 个正整数组成的数列 $a_1, a_2, \\cdots, a_n$ 和一个整数 $m$。求出这个数列中的一个子区间 $[i, j]$，也就是在这个数列中连续的数字 $a_i, a_{i + 1}, \\cdots, a_{j - 1}, a_j$，使得这个子区间的和在不超过 $m$ 的情况下最大。如果有多个区间符合要求，请输出 $i$ 最小的那一个。", "inputFormat": "输入共两行。\n\n第一行，两个整数 $n, m$；\n\n第二行，$n$ 个整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "一行，三个整数，表示符合题意的区间的左端点、右端点和累加和。", "hint": "**子任务 1**（10分）：$n\\le 200$ ；\n\n**子任务 2**（20分）：$n\\le 3000$ ；\n\n**子任务 3**（30分）：$n\\le 10^5$ ；\n\n**子任务 4**（40分）：$n\\le 4\\times 10^6$ 。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 4 \\times 10^6$，$1 \\leq m \\leq 10^9$，$0 \\leq a_1, a_2, \\cdots, a_n \\leq 10^5$。", "locale": "zh-CN", "translations": {"en": {"title": "[Deep Basics Appendix B Example] Maximum Interval Sum", "background": "", "description": "Given a sequence of $n$ positive integers $a_1, a_2, \\cdots, a_n$ and an integer $m$, find a subinterval $[i, j]$, that is, a consecutive part of the sequence $a_i, a_{i + 1}, \\cdots, a_{j - 1}, a_j$, such that the sum of this subinterval is as large as possible while not exceeding $m$. If multiple intervals meet the requirement, output the one with the smallest $i$.", "inputFormat": "The input has two lines.\n\nThe first line contains two integers $n, m$.\n\nThe second line contains $n$ integers $a_1, a_2, \\cdots, a_n$.", "outputFormat": "Output one line with three integers, representing the left endpoint, the right endpoint, and the cumulative sum of the interval that meets the requirement.", "hint": "**Subtask 1** (10 points): $n \\le 200$.\n\n**Subtask 2** (20 points): $n \\le 3000$.\n\n**Subtask 3** (30 points): $n \\le 10^5$.\n\n**Subtask 4** (40 points): $n \\le 4 \\times 10^6$.\n\nFor $100\\%$ of the testdata, $1 \\leq n \\leq 4 \\times 10^6$, $1 \\leq m \\leq 10^9$, $0 \\leq a_1, a_2, \\cdots, a_n \\leq 10^5$.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "【深基附B例】区间最大和", "background": "", "description": "给定 $n$ 个正整数组成的数列 $a_1, a_2, \\cdots, a_n$ 和一个整数 $m$。求出这个数列中的一个子区间 $[i, j]$，也就是在这个数列中连续的数字 $a_i, a_{i + 1}, \\cdots, a_{j - 1}, a_j$，使得这个子区间的和在不超过 $m$ 的情况下最大。如果有多个区间符合要求，请输出 $i$ 最小的那一个。", "inputFormat": "输入共两行。\n\n第一行，两个整数 $n, m$；\n\n第二行，$n$ 个整数 $a_1, a_2, \\cdots, a_n$。", "outputFormat": "一行，三个整数，表示符合题意的区间的左端点、右端点和累加和。", "hint": "**子任务 1**（10分）：$n\\le 200$ ；\n\n**子任务 2**（20分）：$n\\le 3000$ ；\n\n**子任务 3**（30分）：$n\\le 10^5$ ；\n\n**子任务 4**（40分）：$n\\le 4\\times 10^6$ 。\n\n对于 $100\\%$ 的数据，$1 \\leq n \\leq 4 \\times 10^6$，$1 \\leq m \\leq 10^9$，$0 \\leq a_1, a_2, \\cdots, a_n \\leq 10^5$。", "locale": "zh-CN"}}}
{"pid": "P5746", "type": "P", "difficulty": 4, "samples": [["3\n2 1\n3 2\n5 1", "8\n6\n75"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2002", "NOI", "Special Judge"], "title": "[NOI2002] 机器人M号", "background": "", "description": "3030 年，Macsy 正在火星部署一批机器人。\n\n第 $1$ 秒，他把机器人 $1$ 号运到了火星，机器人 $1$ 号可以制造其他的机器人。\n\n第 $2$ 秒，机器人 $1$ 号造出了第一个机器人——机器人 $2$ 号。\n\n第 $3$ 秒，机器人 $1$ 号造出了另一个机器人——机器人 $3$ 号。\n\n之后每一秒，机器人 $1$ 号都可以造出一个新的机器人。第 $m$ 秒造出的机器人编号为 $m$。我们可以称它为机器人 $m$ 号，或者 $m$ 号机器人。\n\n机器人造出来后，马上开始工作。$m$ 号机器人，每 $m$ 秒会休息一次。比如 $3$ 号机器人，会在第 $6$，$9$，$12$，$\\ldots$ 秒休息，而其它时间都在工作。\n\n机器人休息时，它的记忆将会被移植到当时出生的机器人的脑中。比如 $6$ 号机器人出生时，$2$，$3$ 号机器人正在休息，因此，$6$ 号机器人会收到第 $2$，$3$ 号机器人的记忆副本。我们称第 $2$，$3$ 号机器人是 $6$ 号机器人的老师。\n\n如果两个机器人没有师徒关系，且没有共同的老师，则称这两个机器人的知识是互相独立的。**注意：$1$ 号机器人与其他所有机器人的知识独立（因为只有 $1$ 号才会造机器人），它也不是任何机器人的老师。**\n\n一个机器人的**独立数**，是指所有编号比它小且与它知识互相独立的机器人的个数。比如 $1$ 号机器人的独立数为 $0$，$2$ 号机器人的独立数为 $1$（$1$ 号机器人与它知识互相独立），$6$ 号机器人的独立数为 $2$（$1$，$5$ 号机器人与它知识互相独立，$2$，$3$ 号机器人都是它的老师，而 $4$ 号机器人与它有共同的老师——$2$ 号机器人）。\n\n新造出来的机器人有 $3$ 种不同的职业。对于编号为 $m$ 的机器人，如果能把 $m$ 分解成偶数个不同奇素数的积，则它是政客，例如编号 $15$；否则，如果 $m$ 本身就是奇素数或者能把 $m$ 分解成奇数个不同奇素数的积，则它是军人，例如编号 $3$，编号 $165$。其它编号的机器人都是学者，例如编号 $2$, 编号 $6$, 编号 $9$。\n\n第 $m$ 秒诞生的机器人 $m$ 号，想知道它和它的老师中，所有政客的独立数之和，所有军人的独立数之和，以及所有学者的独立数之和。可机器人 $m$ 号忙于工作没时间计算，你能够帮助它吗？\n\n为了方便你的计算，Macsy 已经帮你做了 $m$ 的素因子分解。为了输出方便，只要求输出总和除以 $10000$ 的余数。", "inputFormat": "输入的第一行是一个正整数 $k$，$k$ 是 $m$ 的不同的素因子个数。\n\n以下 $k$ 行，每行两个整数，$p_i$, $e_i$,表示 $m$ 的第 $i$ 个素因子和它的指数 $(i=1,2,\\ldots,k)$。$p_1,p_2,\\ldots,p_k$ 是不同的素数，$\\prod_{i=1}^kp_i^{e_i}$。所有素因子按照从小到大排列，即 $p_1<p_2<\\ldots<p_k$。", "outputFormat": "输出包括三行。\n\n- 第一行是机器人 $m$ 号和它的老师中，所有政客的独立数之和除以 $10000$ 的余数。\n- 第二行是机器人 $m$ 号和它的老师中，所有军人的独立数之和除以 $10000$ 的余数。\n- 第三行是机器人 $m$ 号和它的老师中，所有学者的独立数之和除以 $10000$ 的余数。", "hint": "#### 样例解释\n$m = 2\\times 3^2\\times 5=90$。$90$ 号机器人有 $10$ 个老师，加上它自己共 $11$ 个。其中政客只有 $15$ 号；军人有 $3$ 号和 $5$ 号；学者有 $8$ 个，它们的编号分别是：$2,6,9,10,18,30,45,90$。\n\n#### 数据范围\n对于全部的数据，$1\\le k\\le 1000$，$2\\le p_i<10,000$，$1\\le e_i\\le 1,000,000$。\n\n#### 评分规则\n\n你在一个测试点的得分与你正确解决的问题数 $x$ 有关。\n\n请注意：**对每一行，即使不会解决该问题，也请在该行输出一个数字，否则 checker 将无法正确评分。**\n\n| $x$  | 得分 |\n| :--: | :--: |\n|  3   |  10  |\n|  2   |  7   |\n|  1   |  4   |\n|  0   |  0   |", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2002] Robot No. M", "background": "", "description": "In the year 3030, Macsy is deploying a batch of robots on Mars.\n\nAt the $1$st second, he shipped robot No. $1$ to Mars. Robot No. $1$ can manufacture other robots.\n\nAt the $2$nd second, robot No. $1$ built the first robot—robot No. $2$.\n\nAt the $3$rd second, robot No. $1$ built another robot—robot No. $3$.\n\nAfter that, every second, robot No. $1$ can build one new robot. The robot built at the $m$-th second has index $m$. We call it robot No. $m$, or the $m$-th robot.\n\nAfter a robot is built, it starts working immediately. Robot No. $m$ rests once every $m$ seconds. For example, robot No. $3$ rests at the $6$th, $9$th, $12$th, $\\ldots$ seconds, and works at all other times.\n\nWhen a robot rests, its memory will be transplanted into the brain of the robot born at that moment. For example, when robot No. $6$ is born, robots No. $2$ and No. $3$ are resting, so robot No. $6$ receives copies of the memories of robots No. $2$ and No. $3$. We call robots No. $2$ and No. $3$ the teachers of robot No. $6$.\n\nIf two robots do not have a teacher-student relationship, and they do not share any common teacher, then we say the knowledge of these two robots is mutually independent. **Note: the knowledge of robot No. $1$ is independent of all other robots (because only robot No. $1$ builds robots), and it is not any robot’s teacher.**\n\nThe **independence number** of a robot is the number of robots with smaller indices whose knowledge is mutually independent from it. For example, the independence number of robot No. $1$ is $0$; the independence number of robot No. $2$ is $1$ (robot No. $1$ is mutually independent from it); the independence number of robot No. $6$ is $2$ (robots No. $1$ and No. $5$ are mutually independent from it; robots No. $2$ and No. $3$ are its teachers; and robot No. $4$ shares a common teacher—robot No. $2$—with it).\n\nNewly built robots have $3$ different professions. For a robot with index $m$, if $m$ can be factored into a product of an even number of distinct odd primes, then it is a politician, for example index $15$; otherwise, if $m$ itself is an odd prime, or $m$ can be factored into a product of an odd number of distinct odd primes, then it is a soldier, for example index $3$ and index $165$. Robots with other indices are scholars, for example index $2$, index $6$, and index $9$.\n\nRobot No. $m$, born at the $m$-th second, wants to know: among itself and its teachers, the sum of the independence numbers of all politicians, the sum of the independence numbers of all soldiers, and the sum of the independence numbers of all scholars. But robot No. $m$ is busy working and has no time to compute. Can you help it?\n\nTo make computation easier, Macsy has already factored $m$ into primes for you. To make output easier, you only need to output the remainder after dividing each sum by $10000$.", "inputFormat": "The first line contains a positive integer $k$, where $k$ is the number of distinct prime factors of $m$.\n\nThe next $k$ lines each contain two integers $p_i$, $e_i$, representing the $i$-th prime factor of $m$ and its exponent $(i=1,2,\\ldots,k)$. $p_1,p_2,\\ldots,p_k$ are distinct primes, and $m=\\prod_{i=1}^k p_i^{e_i}$. All prime factors are given in increasing order, i.e. $p_1<p_2<\\ldots<p_k$.", "outputFormat": "Output consists of three lines.\n\n- The first line is the remainder after dividing by $10000$ the sum of the independence numbers of all politicians among robot No. $m$ and its teachers.\n- The second line is the remainder after dividing by $10000$ the sum of the independence numbers of all soldiers among robot No. $m$ and its teachers.\n- The third line is the remainder after dividing by $10000$ the sum of the independence numbers of all scholars among robot No. $m$ and its teachers.", "hint": "#### Sample Explanation\n\n$m = 2\\times 3^2\\times 5=90$. Robot No. $90$ has $10$ teachers; together with itself there are $11$ robots. Among them, the only politician is robot No. $15$; the soldiers are robot No. $3$ and robot No. $5$; there are $8$ scholars, with indices: $2,6,9,10,18,30,45,90$.\n\n#### Constraints\n\nFor all testdata, $1\\le k\\le 1000$, $2\\le p_i<10,000$, $1\\le e_i\\le 1,000,000$.\n\n#### Scoring Rules\n\nYour score on a test point depends on the number of subproblems you solve correctly, denoted by $x$.\n\nPlease note: **for each line, even if you cannot solve that part, you must still output a number on that line; otherwise the checker cannot score correctly.**\n\n| $x$  | Score |\n| :--: | :--: |\n|  3   |  10  |\n|  2   |  7   |\n|  1   |  4   |\n|  0   |  0   |\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2002] 机器人M号", "background": "", "description": "3030 年，Macsy 正在火星部署一批机器人。\n\n第 $1$ 秒，他把机器人 $1$ 号运到了火星，机器人 $1$ 号可以制造其他的机器人。\n\n第 $2$ 秒，机器人 $1$ 号造出了第一个机器人——机器人 $2$ 号。\n\n第 $3$ 秒，机器人 $1$ 号造出了另一个机器人——机器人 $3$ 号。\n\n之后每一秒，机器人 $1$ 号都可以造出一个新的机器人。第 $m$ 秒造出的机器人编号为 $m$。我们可以称它为机器人 $m$ 号，或者 $m$ 号机器人。\n\n机器人造出来后，马上开始工作。$m$ 号机器人，每 $m$ 秒会休息一次。比如 $3$ 号机器人，会在第 $6$，$9$，$12$，$\\ldots$ 秒休息，而其它时间都在工作。\n\n机器人休息时，它的记忆将会被移植到当时出生的机器人的脑中。比如 $6$ 号机器人出生时，$2$，$3$ 号机器人正在休息，因此，$6$ 号机器人会收到第 $2$，$3$ 号机器人的记忆副本。我们称第 $2$，$3$ 号机器人是 $6$ 号机器人的老师。\n\n如果两个机器人没有师徒关系，且没有共同的老师，则称这两个机器人的知识是互相独立的。**注意：$1$ 号机器人与其他所有机器人的知识独立（因为只有 $1$ 号才会造机器人），它也不是任何机器人的老师。**\n\n一个机器人的**独立数**，是指所有编号比它小且与它知识互相独立的机器人的个数。比如 $1$ 号机器人的独立数为 $0$，$2$ 号机器人的独立数为 $1$（$1$ 号机器人与它知识互相独立），$6$ 号机器人的独立数为 $2$（$1$，$5$ 号机器人与它知识互相独立，$2$，$3$ 号机器人都是它的老师，而 $4$ 号机器人与它有共同的老师——$2$ 号机器人）。\n\n新造出来的机器人有 $3$ 种不同的职业。对于编号为 $m$ 的机器人，如果能把 $m$ 分解成偶数个不同奇素数的积，则它是政客，例如编号 $15$；否则，如果 $m$ 本身就是奇素数或者能把 $m$ 分解成奇数个不同奇素数的积，则它是军人，例如编号 $3$，编号 $165$。其它编号的机器人都是学者，例如编号 $2$, 编号 $6$, 编号 $9$。\n\n第 $m$ 秒诞生的机器人 $m$ 号，想知道它和它的老师中，所有政客的独立数之和，所有军人的独立数之和，以及所有学者的独立数之和。可机器人 $m$ 号忙于工作没时间计算，你能够帮助它吗？\n\n为了方便你的计算，Macsy 已经帮你做了 $m$ 的素因子分解。为了输出方便，只要求输出总和除以 $10000$ 的余数。", "inputFormat": "输入的第一行是一个正整数 $k$，$k$ 是 $m$ 的不同的素因子个数。\n\n以下 $k$ 行，每行两个整数，$p_i$, $e_i$,表示 $m$ 的第 $i$ 个素因子和它的指数 $(i=1,2,\\ldots,k)$。$p_1,p_2,\\ldots,p_k$ 是不同的素数，$\\prod_{i=1}^kp_i^{e_i}$。所有素因子按照从小到大排列，即 $p_1<p_2<\\ldots<p_k$。", "outputFormat": "输出包括三行。\n\n- 第一行是机器人 $m$ 号和它的老师中，所有政客的独立数之和除以 $10000$ 的余数。\n- 第二行是机器人 $m$ 号和它的老师中，所有军人的独立数之和除以 $10000$ 的余数。\n- 第三行是机器人 $m$ 号和它的老师中，所有学者的独立数之和除以 $10000$ 的余数。", "hint": "#### 样例解释\n$m = 2\\times 3^2\\times 5=90$。$90$ 号机器人有 $10$ 个老师，加上它自己共 $11$ 个。其中政客只有 $15$ 号；军人有 $3$ 号和 $5$ 号；学者有 $8$ 个，它们的编号分别是：$2,6,9,10,18,30,45,90$。\n\n#### 数据范围\n对于全部的数据，$1\\le k\\le 1000$，$2\\le p_i<10,000$，$1\\le e_i\\le 1,000,000$。\n\n#### 评分规则\n\n你在一个测试点的得分与你正确解决的问题数 $x$ 有关。\n\n请注意：**对每一行，即使不会解决该问题，也请在该行输出一个数字，否则 checker 将无法正确评分。**\n\n| $x$  | 得分 |\n| :--: | :--: |\n|  3   |  10  |\n|  2   |  7   |\n|  1   |  4   |\n|  0   |  0   |", "locale": "zh-CN"}}}
{"pid": "P5747", "type": "P", "difficulty": 6, "samples": [["2 3\nWE\nNNS\n3 9\n1 4 2\n2\n1 3 2 1\n2 3 2 2", "possible\n9\nWW\nNNS"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000, 128000]}, "tags": ["2004", "NOI", "Special Judge"], "title": "[NOI2004] 曼哈顿", "background": "", "description": "P 城是 M 国的著名旅游城市。在市长 G 先生的治理下，人民安居乐业，城市欣欣向荣。然而，G 市长并没有被自己的政绩冲昏头脑，他清醒地意识到城市的治理还存在着一些问题，其中之一就是交通问题。\n\nP 城有 $m$ 条横向街道和 $n$ 条纵向街道，横向街道横贯东西，纵向街道纵穿南北，构成了 P 城整齐的交通网络（如图1所示）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k1ei30qk.png)\n\n由于街道狭窄，每条街道都只允许单向行驶，单向行驶的方向是事先设定好了的。一条横向街道的行驶方向只能是向东或者向西，一条纵向街道的行驶方向只能是向南或者向北，逆向行驶是绝对禁止的。\n\n这项限制给交通带来了巨大的不便。如图 1，很多游人希望从宾馆前往购物中心，但限于街道的行驶方向，他们不得不绕一个大圈才能够到达。\n\n这个问题一直困扰着 G 市长，每天他都会收到不少游人的来信，抱怨P城不合理的交通设计。但由于街道数目过多，他和他的部下始终不能解决这个问题……\n\n令人高兴的是这个问题不久就可能得以解决。因为最近他们以重金聘请了著名的交通规划大师 B 先生，请他对 P 城的交通进行有效合理的改造。\n\nB 先生知道不能通过拓宽街道的方法解决问题，因为这样势必影响到街道两旁的旅游景点，这是大家都不希望看到的。于是他准备重新设计街道的行驶方向（整条街道的行驶方向），使之尽可能满足大家的要求。\n\nB 先生先把 P 城的街道编号，横向街道由北向南编号为 $1$，$2$，$\\ldots$，$m$，纵向街道由西向东编号为 $1$，$2$，$\\ldots$，$n$。这样任何一个十字路口的位置都可以用一对正整数来表示，第一个数是该路口所在的横向街道的编号，第二个数是它所在的纵向街道的编号，这对整数被称为该十字路口的坐标。比如图 1 中宾馆所在的十字路口的坐标是 $(2,3)$。\n经过长期调查，他整理出了游人们提得相对集中的一些要求。每条要求都可以写成如下的形式：从一个十字路口到另一个十字路口的最短路径的长度必须等于它们之间的曼哈顿距离。所谓曼哈顿距离是指两个十字路口在东西方向上的距离加上在南北方向上的距离，坐标分别为 $(x_1,y_1)$ 和 $(x_2,y_2)$ 的两个十字路口之间的曼哈顿距离为 $|x_1-x_2|+|y_1-y_2|$。\n\n好了，B 先生已经知道了 P 城目前所有街道的行驶方向和游人们提得相对集中的要求，他能不能重新设计街道的行驶方向，使之满足所有要求呢？\n\n另外，改变每条街道的行驶方向都有一定的工作量，工作量的大小因道路而异。B 先生不仅想找到一个可行的改造计划，而且还希望这个计划的总工作量尽可能小。你能帮帮他吗？\n", "inputFormat": "输入文件的第一行有两个正整数 $m$ 和 $n$，分别表示横向街道和纵向街道的数目。\n\n第二行是一个长度为 $m$ 的字符串，由北向南列出了 $m$ 条横向街道改造前的行驶方向。`E` 表示向东，`W` 表示向西。\n\n第三行是一个长度为 $n$ 的字符串，由西向东列出了 $n$ 条纵向街道改造前的行驶方向。`S` 表示向南，`N` 表示向北。\n\n第四行有 $m$ 个非负整数，由北向南列出了改变每条横向街道的行驶方向的工作量。\n\n第五行有 $n$ 个非负整数，由西向东列出了改变每条纵向街道的行驶方向的工作量。\n\n第六行是一个正整数 $k$，表示游人们提得相对集中的要求的数目。\n\n接下来的 $k$ 行，每行有四个正整数 $x_1$，$y_1$，$x_2$，$y_2$，表示一条要求。这条要求的内容是希望从坐标为 $(x_1,y_1)$ 的十字路口到坐标为 $(x_2,y_2)$ 的十字路口的最短路径的长度等于这两个路口之间的曼哈顿距离。", "outputFormat": "第一行是一个字符串，`possible` 或者 `impossible`。输出 `possible` 表示可以通过改变街道的行驶方向满足输入数据中的所有要求，输出 `impossible` 表示无论怎么设计都不可能满足输入数据中的所有要求。\n\n如果在第一行输出的是 `possible` 的话，在第二行输出一个整数，表示最小的总工作量，在第三行输出一个长度为 $m$ 的字符串，由北向南列出改造后的 $m$ 条横向街道的行驶方向，`E` 表示向东，`W` 表示向西，在第四行输出一个长度为 $n$ 的字符串，由西向东列出改造后的 $n$ 条纵向街道的行驶方向，`S` 表示向南，`N` 表示向北。", "hint": "#### 数据范围\n对于全部的数据，$m\\le 10$，$n\\le 100$，$k\\le 100$；改变一条街道的行驶方向的工作量不超过 $10000$。\n\n#### 评分方式\n- 如果你的输出文件的第一行是 `impossible`，\n  - 如果确实无解，则该测试点满分。\n  - 如果实际有解，则该测试点 $0$ 分。\n- 如果你的输出文件的第一行是 `possible`，\n  - 如果你的程序输出的方案不可行，则该测试点 $0$ 分。\n  - 如果你的程序输出的总工作量与实际总工作量不一致，则该测试点 $0$ 分。\n  - 如果你的程序输出的方案可行，但总工作量不是最小的，则该测试点 $4$ 分。\n  - 如果你的程序输出的方案可行，且总工作量最小，则该测试点满分。", "locale": "zh-CN", "translations": {"en": {"title": "[NOI2004] Manhattan", "background": "", "description": "City P is a famous tourist city in country M. Under Mayor Mr. G’s governance, people live and work in peace, and the city is thriving. However, Mayor G was not blinded by his achievements. He clearly realized that there were still some problems in managing the city, one of which was transportation.\n\nCity P has $m$ horizontal streets and $n$ vertical streets. The horizontal streets run from west to east, and the vertical streets run from north to south, forming a neat transportation network in City P (as shown in Figure 1).\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k1ei30qk.png)\n\nBecause the streets are narrow, each street allows traffic in only one direction, and the direction is set in advance. A horizontal street can only go east or west, and a vertical street can only go south or north. Driving in the opposite direction is strictly forbidden.\n\nThis restriction causes great inconvenience to transportation. As in Figure 1, many tourists want to go from the hotel to the shopping center, but due to the street directions, they have to take a big detour to reach it.\n\nThis problem has been troubling Mayor G for a long time. Every day he receives many letters from tourists, complaining about City P’s unreasonable traffic design. But because there are too many streets, he and his staff have never been able to solve this problem.\n\nFortunately, this problem may be solved soon. Recently, they hired the famous traffic planning expert Mr. B with a large payment, asking him to carry out an effective and reasonable reconstruction of City P’s traffic.\n\nMr. B knows that widening streets cannot solve the problem, because that would inevitably affect the tourist attractions along the streets, which nobody wants to see. So he plans to redesign the driving direction of each street (the direction of the whole street), so as to satisfy people’s needs as much as possible.\n\nMr. B first numbered the streets of City P. The horizontal streets are numbered $1,2,\\ldots,m$ from north to south, and the vertical streets are numbered $1,2,\\ldots,n$ from west to east. Then, the position of any intersection can be represented by a pair of positive integers: the first number is the index of the horizontal street it lies on, and the second number is the index of the vertical street it lies on. This pair of integers is called the coordinate of the intersection. For example, in Figure 1, the coordinate of the intersection where the hotel is located is $(2,3)$.\n\nAfter a long investigation, he summarized some requirements that tourists mentioned most often. Each requirement can be written in the following form: the length of the shortest path from one intersection to another must be equal to the Manhattan distance between them. The so-called Manhattan distance is the distance in the east-west direction plus the distance in the north-south direction. For two intersections with coordinates $(x_1,y_1)$ and $(x_2,y_2)$, their Manhattan distance is $|x_1-x_2|+|y_1-y_2|$.\n\nNow, Mr. B already knows the current driving directions of all streets in City P and the tourists’ common requirements. Can he redesign the street directions to satisfy all requirements?\n\nAlso, changing the driving direction of each street requires some amount of work, and the amount varies by street. Mr. B not only wants to find a feasible reconstruction plan, but also hopes that the total amount of work is as small as possible. Can you help him?", "inputFormat": "The first line contains two positive integers $m$ and $n$, representing the numbers of horizontal streets and vertical streets.\n\nThe second line is a string of length $m$, listing from north to south the driving directions of the $m$ horizontal streets before reconstruction. `E` means east, and `W` means west.\n\nThe third line is a string of length $n$, listing from west to east the driving directions of the $n$ vertical streets before reconstruction. `S` means south, and `N` means north.\n\nThe fourth line contains $m$ non-negative integers, listing from north to south the amount of work needed to change the direction of each horizontal street.\n\nThe fifth line contains $n$ non-negative integers, listing from west to east the amount of work needed to change the direction of each vertical street.\n\nThe sixth line contains a positive integer $k$, the number of common requirements proposed by tourists.\n\nThe next $k$ lines each contain four positive integers $x_1$, $y_1$, $x_2$, $y_2$, describing one requirement. The requirement is that the length of the shortest path from the intersection at $(x_1,y_1)$ to the intersection at $(x_2,y_2)$ must equal the Manhattan distance between these two intersections.", "outputFormat": "The first line is a string, either `possible` or `impossible`. Output `possible` if it is possible to satisfy all requirements in the input by changing street directions. Output `impossible` if it is impossible to satisfy all requirements no matter how you redesign the directions.\n\nIf the first line is `possible`, then output an integer on the second line, the minimum total amount of work. On the third line, output a string of length $m$, listing from north to south the driving directions of the $m$ horizontal streets after reconstruction, where `E` means east and `W` means west. On the fourth line, output a string of length $n$, listing from west to east the driving directions of the $n$ vertical streets after reconstruction, where `S` means south and `N` means north.", "hint": "#### Constraints\nFor all data, $m\\le 10$, $n\\le 100$, $k\\le 100$. The amount of work to change the direction of one street does not exceed $10000$.\n\n#### Scoring\n- If the first line of your output file is `impossible`:\n  - If there is indeed no solution, you get full marks for this test point.\n  - If there is actually a solution, you get $0$ points for this test point.\n- If the first line of your output file is `possible`:\n  - If the plan output by your program is infeasible, you get $0$ points for this test point.\n  - If the total amount of work output by your program does not match the actual total amount of work, you get $0$ points for this test point.\n  - If the plan output by your program is feasible but the total amount of work is not minimal, you get $4$ points for this test point.\n  - If the plan output by your program is feasible and the total amount of work is minimal, you get full marks for this test point.\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI2004] 曼哈顿", "background": "", "description": "P 城是 M 国的著名旅游城市。在市长 G 先生的治理下，人民安居乐业，城市欣欣向荣。然而，G 市长并没有被自己的政绩冲昏头脑，他清醒地意识到城市的治理还存在着一些问题，其中之一就是交通问题。\n\nP 城有 $m$ 条横向街道和 $n$ 条纵向街道，横向街道横贯东西，纵向街道纵穿南北，构成了 P 城整齐的交通网络（如图1所示）。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/k1ei30qk.png)\n\n由于街道狭窄，每条街道都只允许单向行驶，单向行驶的方向是事先设定好了的。一条横向街道的行驶方向只能是向东或者向西，一条纵向街道的行驶方向只能是向南或者向北，逆向行驶是绝对禁止的。\n\n这项限制给交通带来了巨大的不便。如图 1，很多游人希望从宾馆前往购物中心，但限于街道的行驶方向，他们不得不绕一个大圈才能够到达。\n\n这个问题一直困扰着 G 市长，每天他都会收到不少游人的来信，抱怨P城不合理的交通设计。但由于街道数目过多，他和他的部下始终不能解决这个问题……\n\n令人高兴的是这个问题不久就可能得以解决。因为最近他们以重金聘请了著名的交通规划大师 B 先生，请他对 P 城的交通进行有效合理的改造。\n\nB 先生知道不能通过拓宽街道的方法解决问题，因为这样势必影响到街道两旁的旅游景点，这是大家都不希望看到的。于是他准备重新设计街道的行驶方向（整条街道的行驶方向），使之尽可能满足大家的要求。\n\nB 先生先把 P 城的街道编号，横向街道由北向南编号为 $1$，$2$，$\\ldots$，$m$，纵向街道由西向东编号为 $1$，$2$，$\\ldots$，$n$。这样任何一个十字路口的位置都可以用一对正整数来表示，第一个数是该路口所在的横向街道的编号，第二个数是它所在的纵向街道的编号，这对整数被称为该十字路口的坐标。比如图 1 中宾馆所在的十字路口的坐标是 $(2,3)$。\n经过长期调查，他整理出了游人们提得相对集中的一些要求。每条要求都可以写成如下的形式：从一个十字路口到另一个十字路口的最短路径的长度必须等于它们之间的曼哈顿距离。所谓曼哈顿距离是指两个十字路口在东西方向上的距离加上在南北方向上的距离，坐标分别为 $(x_1,y_1)$ 和 $(x_2,y_2)$ 的两个十字路口之间的曼哈顿距离为 $|x_1-x_2|+|y_1-y_2|$。\n\n好了，B 先生已经知道了 P 城目前所有街道的行驶方向和游人们提得相对集中的要求，他能不能重新设计街道的行驶方向，使之满足所有要求呢？\n\n另外，改变每条街道的行驶方向都有一定的工作量，工作量的大小因道路而异。B 先生不仅想找到一个可行的改造计划，而且还希望这个计划的总工作量尽可能小。你能帮帮他吗？\n", "inputFormat": "输入文件的第一行有两个正整数 $m$ 和 $n$，分别表示横向街道和纵向街道的数目。\n\n第二行是一个长度为 $m$ 的字符串，由北向南列出了 $m$ 条横向街道改造前的行驶方向。`E` 表示向东，`W` 表示向西。\n\n第三行是一个长度为 $n$ 的字符串，由西向东列出了 $n$ 条纵向街道改造前的行驶方向。`S` 表示向南，`N` 表示向北。\n\n第四行有 $m$ 个非负整数，由北向南列出了改变每条横向街道的行驶方向的工作量。\n\n第五行有 $n$ 个非负整数，由西向东列出了改变每条纵向街道的行驶方向的工作量。\n\n第六行是一个正整数 $k$，表示游人们提得相对集中的要求的数目。\n\n接下来的 $k$ 行，每行有四个正整数 $x_1$，$y_1$，$x_2$，$y_2$，表示一条要求。这条要求的内容是希望从坐标为 $(x_1,y_1)$ 的十字路口到坐标为 $(x_2,y_2)$ 的十字路口的最短路径的长度等于这两个路口之间的曼哈顿距离。", "outputFormat": "第一行是一个字符串，`possible` 或者 `impossible`。输出 `possible` 表示可以通过改变街道的行驶方向满足输入数据中的所有要求，输出 `impossible` 表示无论怎么设计都不可能满足输入数据中的所有要求。\n\n如果在第一行输出的是 `possible` 的话，在第二行输出一个整数，表示最小的总工作量，在第三行输出一个长度为 $m$ 的字符串，由北向南列出改造后的 $m$ 条横向街道的行驶方向，`E` 表示向东，`W` 表示向西，在第四行输出一个长度为 $n$ 的字符串，由西向东列出改造后的 $n$ 条纵向街道的行驶方向，`S` 表示向南，`N` 表示向北。", "hint": "#### 数据范围\n对于全部的数据，$m\\le 10$，$n\\le 100$，$k\\le 100$；改变一条街道的行驶方向的工作量不超过 $10000$。\n\n#### 评分方式\n- 如果你的输出文件的第一行是 `impossible`，\n  - 如果确实无解，则该测试点满分。\n  - 如果实际有解，则该测试点 $0$ 分。\n- 如果你的输出文件的第一行是 `possible`，\n  - 如果你的程序输出的方案不可行，则该测试点 $0$ 分。\n  - 如果你的程序输出的总工作量与实际总工作量不一致，则该测试点 $0$ 分。\n  - 如果你的程序输出的方案可行，但总工作量不是最小的，则该测试点 $4$ 分。\n  - 如果你的程序输出的方案可行，且总工作量最小，则该测试点满分。", "locale": "zh-CN"}}}
{"pid": "P5748", "type": "P", "difficulty": 6, "samples": [["5\n2\n3\n7\n9\n233", "2\n5\n877\n21147\n53753544\n"]], "limits": {"time": [1000], "memory": [128000]}, "tags": ["数学", "Special Judge", "O2优化", "组合数学", "生成函数", "快速傅里叶变换 FFT"], "title": "集合划分计数", "background": "", "description": "一个有 $n$ 个元素的集合，将其分为任意个非空子集，求方案数。  \n注意划分出的集合间是无序的，即 $\\{\\{1,2\\},\\{3\\}\\}$ 和 $\\{\\{3\\},\\{2,1\\}\\}$ 算作一种方案。\n\n由于答案可能会很大，所以要对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。  \n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "输出 $T$ 行，每行一个整数表示答案。", "hint": "【数据范围】  \n$T = 1000$，$1\\le n \\le 10^5$。\n\n【样例解释】  \n对于 $n=3$，有五种方案：$\\{\\{1,2,3\\}\\},\\{\\{1,2\\},\\{3\\}\\},\\{\\{1\\},\\{2,3\\}\\},\\{\\{1\\},\\{2\\},\\{3\\}\\},\\{\\{1,3\\},\\{2\\}\\}$。\n\n本题只有一个测试点，假设你答对了 $x$ 组数据，你将得到 $\\lfloor x/(T/100) \\rfloor$ 分。   \n如果你不能解决所有数据，也请输出 $T$ 个整数。\n\n~~TLE不要怪我，是你常数太大了~~", "locale": "zh-CN", "translations": {"en": {"title": "Counting Set Partitions", "background": "", "description": "Given a set with $n$ elements, split it into any number of non-empty subsets, and find the number of possible ways.\n\nNote that the resulting subsets are unordered. That is, $\\{\\{1,2\\},\\{3\\}\\}$ and $\\{\\{3\\},\\{2,1\\}\\}$ are considered the same partition.\n\nSince the answer may be very large, output it modulo $998244353$.", "inputFormat": "The first line contains a positive integer $T$, which indicates the number of test cases.  \nThe next $T$ lines each contain a positive integer $n$.", "outputFormat": "Output $T$ lines, each containing one integer representing the answer.", "hint": "Constraints  \n$T = 1000$, $1 \\le n \\le 10^5$.\n\nSample Explanation  \nFor $n=3$, there are five ways: $\\{\\{1,2,3\\}\\},\\{\\{1,2\\},\\{3\\}\\},\\{\\{1\\},\\{2,3\\}\\},\\{\\{1\\},\\{2\\},\\{3\\}\\},\\{\\{1,3\\},\\{2\\}\\}$.\n\nThis problem has only one test point. Suppose you answer $x$ test cases correctly, you will get $\\lfloor x/(T/100) \\rfloor$ points.  \nIf you cannot solve all the test cases, please still output $T$ integers.\n\n~~Do not blame me for TLE. Your constant factor is too large.~~\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "集合划分计数", "background": "", "description": "一个有 $n$ 个元素的集合，将其分为任意个非空子集，求方案数。  \n注意划分出的集合间是无序的，即 $\\{\\{1,2\\},\\{3\\}\\}$ 和 $\\{\\{3\\},\\{2,1\\}\\}$ 算作一种方案。\n\n由于答案可能会很大，所以要对 $998244353$ 取模。", "inputFormat": "第一行一个正整数 $T$，表示数据组数。  \n接下来 $T$ 行，每行一个正整数 $n$。", "outputFormat": "输出 $T$ 行，每行一个整数表示答案。", "hint": "【数据范围】  \n$T = 1000$，$1\\le n \\le 10^5$。\n\n【样例解释】  \n对于 $n=3$，有五种方案：$\\{\\{1,2,3\\}\\},\\{\\{1,2\\},\\{3\\}\\},\\{\\{1\\},\\{2,3\\}\\},\\{\\{1\\},\\{2\\},\\{3\\}\\},\\{\\{1,3\\},\\{2\\}\\}$。\n\n本题只有一个测试点，假设你答对了 $x$ 组数据，你将得到 $\\lfloor x/(T/100) \\rfloor$ 分。   \n如果你不能解决所有数据，也请输出 $T$ 个整数。\n\n~~TLE不要怪我，是你常数太大了~~", "locale": "zh-CN"}}}
{"pid": "P5749", "type": "P", "difficulty": 5, "samples": [["2\n2 1 -1 -2\n", "4\n"], ["3\n-2 2 2 -2 -2 2\n", "1\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576, 1048576]}, "tags": ["贪心", "2019", "线段树", "树状数组", "IOI"], "title": "[IOI 2019] 排列鞋子", "background": null, "description": "Adnan 拥有巴库最大的鞋店。现在有一个装着 $n$ 双鞋的箱子刚运到他的鞋店。每双鞋是大小相同的两只：一只左脚，一只右脚。Adnan 把这 $2n$ 只鞋排成一行，该行总共有 $2n$ 个**位置**，从左到右编号为 $0$ 到 $2n-1$ 。\n\nAdnan 想把这些鞋子重新排成**合法的排列**。一个排列是合法的，当且仅当对于所有的 $i(0\\leqslant i \\leqslant n - 1)$，以下条件都成立：\n\n- 在位置 $2i$ 和 $2i+1$ 上的鞋子大小相同；\n- 在位置 $2i$ 上的鞋子是一只左脚鞋；\n- 在位置 $2i+1$ 上的鞋子是一只右脚鞋。\n\n为实现上述目标，Adnan 可以做一系列对调。在每次对调中，他选择当前**相邻**的两只鞋进行对调（也就是把它们拿起来，然后将每只鞋子放回到另一只鞋子原来的位置上）。两只鞋子是相邻的，当且仅当其位置编号的差为 $1$。\n\n请求出 Adnan 最少要做出多少次对调，才能得到一个合法排列。", "inputFormat": "第一行一个正整数 $n$，表示有 $n$ 双鞋。\n\n第二行 $2n$ 个整数 $S_i$，第 $i$ 个整数表示位置编号为 $i-1$ 的鞋子。其中 $|S_u|\\neq 0$，等于最初在位置 $i$ 上的鞋子的大小。这里 $|x|$ 表示 $x$ 的绝对值，当 $x\\geq 0$ 时等于 $x$，当 $x < 0$ 时等于 $-x$。如果 $S_i < 0$，则 $i$ 位置上的鞋子是一只左脚鞋，否则是右脚鞋。", "outputFormat": "输出一行一个整数，表示最少对调次数。", "hint": "**样例说明 1**\n\nAdnan 可以通过 $4$ 次对调而得到一个合法的排列。\n\n例如，他可以先对调 $1$ 和 $-1$，再对调 $1$ 和 $-2$，再对调 $-1$ 和 $-2$。最后对调 $-2$ 和 $2$。随后他就可以得到合法的排列 。无法用少于 $4$ 次对调就得到合法的排列，因此输出 $4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ybs09z2e.png)\n\n**样例说明 2**\n\nAdnan 可以对调在位置 $2$ 和 $3$ 上的鞋子来得到合法的排列$[-2,2,-2,2,-2,2]$，因此应当输出 $1$。\n\n**数据范围**\n\n对于所有数据：\n\n- $1\\leqslant n\\leqslant10^5$；\n- 对于所有 $i(0\\leqslant i\\leqslant 2n-1)$，都有 $1\\leqslant \\left|S_{i+1}\\right|\\leqslant n$；\n- 总有某个合法的排列可以经由一系列对调而得到。\n\n详细子任务附加限制与分值如下表：\n\n| 子任务编号 | 附加限制 | 分值 |\n|:---:|:---:|:---:|\n| $1$ | $n=1$ | $10$|\n|$2$|$n\\leqslant8$|$20$|\n|$3$|所有鞋子大小都是相同的|$20$|\n|$4$|所有在位置 $0,\\dots,n-1$ 上的鞋都是左脚鞋，而在位置 $n,\\dots,2n-1$ 上的鞋都是右脚鞋。而且对于所有 $i(0\\leqslant i\\leqslant n-1)$，在位置 $i$ 和 $i+n$ 上的鞋子大小相同|$15$|\n|$5$|$n\\leqslant10^3$|$20$|\n|$6$|无附加限制|$15$|", "locale": "zh-CN", "translations": {"en": {"title": "[IOI 2019] Arranging Shoes", "background": "", "description": "Adnan owns the largest shoe store in Baku. A box containing $n$ pairs of shoes has just arrived at his store. Each pair of shoes consists of two shoes of the same size: one left shoe and one right shoe. Adnan lines up these $2n$ shoes in a row. This row has a total of $2n$ **positions**, numbered from $0$ to $2n-1$ from left to right.\n\nAdnan wants to rearrange these shoes into a **valid permutation**. A permutation is valid if and only if for all $i(0\\leqslant i \\leqslant n - 1)$, the following conditions all hold:\n\n- The shoes at positions $2i$ and $2i+1$ have the same size.\n- The shoe at position $2i$ is a left shoe.\n- The shoe at position $2i+1$ is a right shoe.\n\nTo achieve this, Adnan can perform a sequence of swaps. In each swap, he chooses two currently **adjacent** shoes and swaps them (that is, he picks them up and puts each shoe back into the other shoe’s original position). Two shoes are adjacent if and only if the difference of their position indices is $1$.\n\nFind the minimum number of swaps Adnan needs to obtain a valid permutation.", "inputFormat": "The first line contains a positive integer $n$, meaning there are $n$ pairs of shoes.\n\nThe second line contains $2n$ integers $S_i$. The $i$-th integer describes the shoe whose position index is $i-1$. Here $|S_u|\\neq 0$, and it equals the size of the shoe initially at position $i$. Here $|x|$ denotes the absolute value of $x$: it equals $x$ when $x\\geq 0$, and equals $-x$ when $x < 0$. If $S_i < 0$, then the shoe at position $i$ is a left shoe; otherwise, it is a right shoe.", "outputFormat": "Output one line with one integer, the minimum number of swaps.", "hint": "**Explanation for Sample 1**\n\nAdnan can obtain a valid permutation with $4$ swaps.\n\nFor example, he can first swap $1$ and $-1$, then swap $1$ and $-2$, then swap $-1$ and $-2$. Finally, swap $-2$ and $2$. After that, he can get a valid permutation. It is impossible to obtain a valid permutation with fewer than $4$ swaps, so the output is $4$.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ybs09z2e.png)\n\n**Explanation for Sample 2**\n\nAdnan can swap the shoes at positions $2$ and $3$ to obtain the valid permutation $[-2,2,-2,2,-2,2]$, so the output should be $1$.\n\n**Constraints**\n\nFor all testdata:\n\n- $1\\leqslant n\\leqslant10^5$.\n- For all $i(0\\leqslant i\\leqslant 2n-1)$, $1\\leqslant \\left|S_{i+1}\\right|\\leqslant n$.\n- A valid permutation can always be obtained through a sequence of swaps.\n\nThe detailed extra constraints and scores for subtasks are shown in the table below:\n\n| Subtask ID | Additional Constraints | Score |\n|:---:|:---:|:---:|\n| $1$ | $n=1$ | $10$|\n|$2$|$n\\leqslant8$|$20$|\n|$3$| All shoes have the same size. | $20$|\n|$4$| All shoes at positions $0,\\dots,n-1$ are left shoes, and all shoes at positions $n,\\dots,2n-1$ are right shoes. Also, for all $i(0\\leqslant i\\leqslant n-1)$, the shoes at positions $i$ and $i+n$ have the same size. | $15$|\n|$5$|$n\\leqslant10^3$|$20$|\n|$6$| No additional constraints. | $15$|\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[IOI 2019] 排列鞋子", "background": null, "description": "Adnan 拥有巴库最大的鞋店。现在有一个装着 $n$ 双鞋的箱子刚运到他的鞋店。每双鞋是大小相同的两只：一只左脚，一只右脚。Adnan 把这 $2n$ 只鞋排成一行，该行总共有 $2n$ 个**位置**，从左到右编号为 $0$ 到 $2n-1$ 。\n\nAdnan 想把这些鞋子重新排成**合法的排列**。一个排列是合法的，当且仅当对于所有的 $i(0\\leqslant i \\leqslant n - 1)$，以下条件都成立：\n\n- 在位置 $2i$ 和 $2i+1$ 上的鞋子大小相同；\n- 在位置 $2i$ 上的鞋子是一只左脚鞋；\n- 在位置 $2i+1$ 上的鞋子是一只右脚鞋。\n\n为实现上述目标，Adnan 可以做一系列对调。在每次对调中，他选择当前**相邻**的两只鞋进行对调（也就是把它们拿起来，然后将每只鞋子放回到另一只鞋子原来的位置上）。两只鞋子是相邻的，当且仅当其位置编号的差为 $1$。\n\n请求出 Adnan 最少要做出多少次对调，才能得到一个合法排列。", "inputFormat": "第一行一个正整数 $n$，表示有 $n$ 双鞋。\n\n第二行 $2n$ 个整数 $S_i$，第 $i$ 个整数表示位置编号为 $i-1$ 的鞋子。其中 $|S_u|\\neq 0$，等于最初在位置 $i$ 上的鞋子的大小。这里 $|x|$ 表示 $x$ 的绝对值，当 $x\\geq 0$ 时等于 $x$，当 $x < 0$ 时等于 $-x$。如果 $S_i < 0$，则 $i$ 位置上的鞋子是一只左脚鞋，否则是右脚鞋。", "outputFormat": "输出一行一个整数，表示最少对调次数。", "hint": "**样例说明 1**\n\nAdnan 可以通过 $4$ 次对调而得到一个合法的排列。\n\n例如，他可以先对调 $1$ 和 $-1$，再对调 $1$ 和 $-2$，再对调 $-1$ 和 $-2$。最后对调 $-2$ 和 $2$。随后他就可以得到合法的排列 。无法用少于 $4$ 次对调就得到合法的排列，因此输出 $4$。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ybs09z2e.png)\n\n**样例说明 2**\n\nAdnan 可以对调在位置 $2$ 和 $3$ 上的鞋子来得到合法的排列$[-2,2,-2,2,-2,2]$，因此应当输出 $1$。\n\n**数据范围**\n\n对于所有数据：\n\n- $1\\leqslant n\\leqslant10^5$；\n- 对于所有 $i(0\\leqslant i\\leqslant 2n-1)$，都有 $1\\leqslant \\left|S_{i+1}\\right|\\leqslant n$；\n- 总有某个合法的排列可以经由一系列对调而得到。\n\n详细子任务附加限制与分值如下表：\n\n| 子任务编号 | 附加限制 | 分值 |\n|:---:|:---:|:---:|\n| $1$ | $n=1$ | $10$|\n|$2$|$n\\leqslant8$|$20$|\n|$3$|所有鞋子大小都是相同的|$20$|\n|$4$|所有在位置 $0,\\dots,n-1$ 上的鞋都是左脚鞋，而在位置 $n,\\dots,2n-1$ 上的鞋都是右脚鞋。而且对于所有 $i(0\\leqslant i\\leqslant n-1)$，在位置 $i$ 和 $i+n$ 上的鞋子大小相同|$15$|\n|$5$|$n\\leqslant10^3$|$20$|\n|$6$|无附加限制|$15$|", "locale": "zh-CN"}}}
{"pid": "P5750", "type": "P", "difficulty": 5, "samples": [["5 2\n    *    \n   * .\n  * * *\n * . * *\n* * * * *\n", "7/16\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["1999", "NOI"], "title": "[NOI1999] 钉子和小球", "background": "", "description": "有一个三角形木板,竖直立放，上面钉着 $ \\frac{ n (n+1) } { 2 } $ 颗钉子，还有 ($n+1$) 个格子 （当 $n=5$ 时如图 1 ） 。每颗钉子和周围的钉子的距离都等于 $d$ ，每个格子的宽度也都等于 $d$ ，且除了最左端和最右端的格子外每个格子都正对着最下面一排钉子的间隙。\n\n让一个直径略小于 $d$ 的小球中心正对着最上面的钉子在板上自由滚落，小球每碰到一个钉子都可能落向左边或右边 （概率各 $1/2$ ） ，且球的中心还会正对着下一颗将要碰上的钉子。例如图2 就是小球一条可能的路径。\n\n我们知道小球落在第 $i$ 个格子中的概率 $p_i$ = $ \\frac{C_n^i}{2^n}$ = $ \\frac{ n! }{ 2^n i! (n-i)! } $ ，其中 $i$ 为格子的编号，从左至右依次为 $ 0 , 1 , ... , n $.\n \n现在的问题是计算拔掉某些钉子后，小球落在编号为 $m$ 的格子中的概率 $p_m$ 。假定最下面一排钉子不会被拔掉。例如图3 是某些钉子被拔掉后小球一条可能的路径。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ntaygrw7.png)\n\n 图1  $\\qquad$ $\\qquad$ $\\quad$ $\\quad$  图2    $\\quad$ $\\qquad$ $\\qquad$ $\\quad$                       图3 ", "inputFormat": "第1行为整数 $n$ （$ 2 \\leq n \\leq  50 $）和 $m$ （ $ 0 \\leq m \\leq n $ ）。以下 $n$ 行依次为木板上从上至下$n$行钉子的信息，每行中 ‘*’ 表示钉子还在， ‘.’ 表示钉子被拔去，注意在这 $n$ 行中空格符可能出现在任何位置。", "outputFormat": "仅一行，是一个既约分数( $0$ 写成 $0/1$ ) ，为小球落在编号为 $m$ 的格子中的概率 $p_m$ 。\n\n既约分数的定义： $A/B$ 是既约分数，当且仅当 $A$ 、 $B$ 为正整数且 $A$ 和 $B$ 没有大于$1$的公因子。", "hint": "", "locale": "zh-CN", "translations": {"en": {"title": "[NOI1999] Nails and Balls", "background": "", "description": "There is a triangular wooden board standing vertically. On it, $\\frac{ n (n+1) } { 2 }$ nails are hammered in, and there are $(n+1)$ slots (see Figure 1 when $n=5$). The distance between each nail and its surrounding nails is $d$. The width of each slot is also $d$. Except for the leftmost and rightmost slots, each slot is aligned with a gap between two nails in the bottom row.\n\nLet a small ball with diameter slightly smaller than $d$ roll down freely on the board, with its center initially aligned with the top nail. Each time the ball hits a nail, it may fall to the left or to the right (each with probability $1/2$), and the ball’s center will then align with the next nail it is going to hit. For example, Figure 2 shows one possible path of the ball.\n\nWe know that the probability that the ball lands in slot $i$ is $p_i = \\frac{C_n^i}{2^n} = \\frac{ n! }{ 2^n i! (n-i)! }$, where $i$ is the slot index, from left to right: $0, 1, ..., n$.\n\nNow the problem is to compute, after removing some nails, the probability $p_m$ that the ball lands in the slot with index $m$. Assume that the nails in the bottom row will not be removed. For example, Figure 3 shows one possible path after some nails have been removed.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ntaygrw7.png)\n\nFigure 1 $\\qquad$ $\\qquad$ $\\quad$ $\\quad$ Figure 2 $\\quad$ $\\qquad$ $\\qquad$ $\\quad$ Figure 3.", "inputFormat": "The first line contains integers $n$ ($2 \\leq n \\leq 50$) and $m$ ($0 \\leq m \\leq n$). The following $n$ lines give the nail information for the $n$ rows of nails on the board from top to bottom. In each line, `*` means the nail is still present, and `.` means the nail has been removed. Note that in these $n$ lines, spaces may appear anywhere.", "outputFormat": "Output only one line: an irreducible fraction ($0$ should be written as $0/1$), which is the probability $p_m$ that the ball lands in the slot with index $m$.\n\nDefinition of an irreducible fraction: $A/B$ is an irreducible fraction if and only if $A$ and $B$ are positive integers and $A$ and $B$ have no common factor greater than $1$.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI1999] 钉子和小球", "background": "", "description": "有一个三角形木板,竖直立放，上面钉着 $ \\frac{ n (n+1) } { 2 } $ 颗钉子，还有 ($n+1$) 个格子 （当 $n=5$ 时如图 1 ） 。每颗钉子和周围的钉子的距离都等于 $d$ ，每个格子的宽度也都等于 $d$ ，且除了最左端和最右端的格子外每个格子都正对着最下面一排钉子的间隙。\n\n让一个直径略小于 $d$ 的小球中心正对着最上面的钉子在板上自由滚落，小球每碰到一个钉子都可能落向左边或右边 （概率各 $1/2$ ） ，且球的中心还会正对着下一颗将要碰上的钉子。例如图2 就是小球一条可能的路径。\n\n我们知道小球落在第 $i$ 个格子中的概率 $p_i$ = $ \\frac{C_n^i}{2^n}$ = $ \\frac{ n! }{ 2^n i! (n-i)! } $ ，其中 $i$ 为格子的编号，从左至右依次为 $ 0 , 1 , ... , n $.\n \n现在的问题是计算拔掉某些钉子后，小球落在编号为 $m$ 的格子中的概率 $p_m$ 。假定最下面一排钉子不会被拔掉。例如图3 是某些钉子被拔掉后小球一条可能的路径。\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ntaygrw7.png)\n\n 图1  $\\qquad$ $\\qquad$ $\\quad$ $\\quad$  图2    $\\quad$ $\\qquad$ $\\qquad$ $\\quad$                       图3 ", "inputFormat": "第1行为整数 $n$ （$ 2 \\leq n \\leq  50 $）和 $m$ （ $ 0 \\leq m \\leq n $ ）。以下 $n$ 行依次为木板上从上至下$n$行钉子的信息，每行中 ‘*’ 表示钉子还在， ‘.’ 表示钉子被拔去，注意在这 $n$ 行中空格符可能出现在任何位置。", "outputFormat": "仅一行，是一个既约分数( $0$ 写成 $0/1$ ) ，为小球落在编号为 $m$ 的格子中的概率 $p_m$ 。\n\n既约分数的定义： $A/B$ 是既约分数，当且仅当 $A$ 、 $B$ 为正整数且 $A$ 和 $B$ 没有大于$1$的公因子。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P5751", "type": "P", "difficulty": 4, "samples": [["6 1 2 3 1 1 2\n", "3\n"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000], "memory": [128000, 128000, 128000, 128000, 128000]}, "tags": ["1999", "NOI", "差分约束", "前缀和"], "title": "[NOI1999] 01 串", "background": null, "description": "给定 $7$ 个整数 $N , A_0 , B_0 , L_0 , A_1 , B_1 , L_1 $，要求设计一个 $01$ 串 $ S=s_1 s_2 … s_i … s_N $，满足：\n1.\t$ s_i = 0 $ 或 $ s_i = 1 $， $ 1 \\leq i \\leq N $；\n2.\t对于 $S$ 的任何连续的长度为 $L_0$ 的子串 $s_j s_{j+1} … s_{j+L0-1}  $ ($1 \\leq j \\leq N-L_0+1 $) ， $0$ 的个数大于等于 $A_0$ 且小于等于 $B_0$ ;\n3.\t对于 $S$ 的任何连续的长度为 $L_1$ 的子串 $s_j s_{j+1} …  s_{j+L1-1} $ ($ 1 \\leq  j  \\leq N-L_1+1 $) ， $1$ 的个数大于等于 $A_1$ 且小于等于 $B_1$ ;\n\n例如， $ N = 6 ,  A_0 = 1 ,  B_0 = 2  ,  L_0 = 3 ,  A_1 = 1 ,  B_1 = 1 ,  L_1 = 2 $，则存在一个满足上述所有条件的 $01$ 串 $ S = 010101 $ 。", "inputFormat": "仅一行，有 $7$ 个整数，依次表示 $N , A_0 , B_0 , L_0 , A_1 , B_1 , L_1 $ （$3 \\leq N \\leq 1000$，$1 \\leq  A_0 \\leq B_0 \\leq L_0 \\leq N$，$1 \\leq A_1 \\leq B_1 \\leq L_1 \\leq N$），相邻两个整数之间用一个空格分隔。", "outputFormat": "仅一行，若不存在满足所有条件的 $01$ 串，则输出一个整数 `-1`，否则输出满足所有条件的 $01$ 串中 $1$ 的个数的最大值。", "hint": null, "locale": "zh-CN", "translations": {"en": {"title": "[NOI1999] 01 String", "background": "", "description": "Given $7$ integers $N, A_0, B_0, L_0, A_1, B_1, L_1$, you are asked to design a binary string $S = s_1 s_2 \\ldots s_i \\ldots s_N$ that satisfies:\n\n1. $s_i = 0$ or $s_i = 1$, $1 \\leq i \\leq N$.\n2. For any consecutive substring of $S$ with length $L_0$, namely $s_j s_{j+1} \\ldots s_{j+L_0-1}$ ($1 \\leq j \\leq N - L_0 + 1$), the number of $0$s is at least $A_0$ and at most $B_0$.\n3. For any consecutive substring of $S$ with length $L_1$, namely $s_j s_{j+1} \\ldots s_{j+L_1-1}$ ($1 \\leq j \\leq N - L_1 + 1$), the number of $1$s is at least $A_1$ and at most $B_1$.\n\nFor example, if $N = 6, A_0 = 1, B_0 = 2, L_0 = 3, A_1 = 1, B_1 = 1, L_1 = 2$, then there exists a binary string $S = 010101$ that satisfies all the above conditions.", "inputFormat": "Only one line containing $7$ integers, in order: $N, A_0, B_0, L_0, A_1, B_1, L_1$ ($3 \\leq N \\leq 1000$, $1 \\leq A_0 \\leq B_0 \\leq L_0 \\leq N$, $1 \\leq A_1 \\leq B_1 \\leq L_1 \\leq N$). Adjacent integers are separated by one space.", "outputFormat": "Only one line. If there is no binary string satisfying all conditions, output the integer `-1`. Otherwise, output the maximum possible number of $1$s among all binary strings that satisfy all conditions.", "hint": "\n\nTranslated by ChatGPT 5", "locale": "en"}, "zh-CN": {"title": "[NOI1999] 01 串", "background": null, "description": "给定 $7$ 个整数 $N , A_0 , B_0 , L_0 , A_1 , B_1 , L_1 $，要求设计一个 $01$ 串 $ S=s_1 s_2 … s_i … s_N $，满足：\n1.\t$ s_i = 0 $ 或 $ s_i = 1 $， $ 1 \\leq i \\leq N $；\n2.\t对于 $S$ 的任何连续的长度为 $L_0$ 的子串 $s_j s_{j+1} … s_{j+L0-1}  $ ($1 \\leq j \\leq N-L_0+1 $) ， $0$ 的个数大于等于 $A_0$ 且小于等于 $B_0$ ;\n3.\t对于 $S$ 的任何连续的长度为 $L_1$ 的子串 $s_j s_{j+1} …  s_{j+L1-1} $ ($ 1 \\leq  j  \\leq N-L_1+1 $) ， $1$ 的个数大于等于 $A_1$ 且小于等于 $B_1$ ;\n\n例如， $ N = 6 ,  A_0 = 1 ,  B_0 = 2  ,  L_0 = 3 ,  A_1 = 1 ,  B_1 = 1 ,  L_1 = 2 $，则存在一个满足上述所有条件的 $01$ 串 $ S = 010101 $ 。", "inputFormat": "仅一行，有 $7$ 个整数，依次表示 $N , A_0 , B_0 , L_0 , A_1 , B_1 , L_1 $ （$3 \\leq N \\leq 1000$，$1 \\leq  A_0 \\leq B_0 \\leq L_0 \\leq N$，$1 \\leq A_1 \\leq B_1 \\leq L_1 \\leq N$），相邻两个整数之间用一个空格分隔。", "outputFormat": "仅一行，若不存在满足所有条件的 $01$ 串，则输出一个整数 `-1`，否则输出满足所有条件的 $01$ 串中 $1$ 的个数的最大值。", "hint": null, "locale": "zh-CN"}}}
