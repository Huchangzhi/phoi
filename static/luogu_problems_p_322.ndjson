{"pid": "P7520", "type": "P", "difficulty": 6, "samples": [["6 6 3\n1 2\n1 3\n3 4\n4 5\n2 6\n4 1\n5 6\n3 2\n2 4\n", "1\n0\n2\n"], ["见附件中的 dominator/dominator2.in。", "见附件中的 dominator/dominator2.ans。"], ["见附件中的 dominator/dominator3.in。", "见附件中的 dominator/dominator3.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2021", "O2优化"], "title": "[省选联考 2021 A 卷] 支配", "background": "", "description": "给定一张 $n$ 个点 $m$ 条边的有向图 $G$，其顶点从 $1$ 到 $n$ 编号。\n\n对于任意两个点 $u, v$，若从顶点 $1$ 出发到达顶点 $v$ 的所有路径都需要经过顶点 $u$，则称顶点 $u$ 支配顶点 $v$。特别地，每个顶点支配其自身。\n\n对于任意一个点 $v$，我们将图中支配顶点 $v$ 的顶点集合称为 $v$ 的受支配集 $D_v$。\n\n现在有 $q$ 次互相独立的询问，每次询问给出一条有向边，请你回答在图 $G$ 中加入该条边后，有多少个顶点的受支配集发生了变化。", "inputFormat": "第一行，三个整数 $n, m, q$，分别表示图中的顶点数、边数，以及询问数。  \n接下来 $m$ 行，每行两个整数 $x_i,y_i$，表示一条有向边从 $x_i$ 到 $y_i$。  \n接下来 $q$ 行，每行两个整数 $s_i,t_i$，表示每次询问加入的边从 $s_i$ 到 $t_i$。\n\n数据保证给出的图 $G$ 中，从 $1$ 号点出发能到达所有其他点，并且图中不包含重边与自环。", "outputFormat": "对于每个询问，输出一行，一个整数，表示答案。", "hint": "**【样例 #1 解释】**\n\n对于原图，六个点的受支配集分别为：$D_1 = \\{ 1 \\}$，$D_2 = \\{ 1, 2 \\}$，$D_3 = \\{ 1, 3 \\}$，$D_4 =\\{ 1, 3, 4 \\}$，$D_5 = \\{ 1, 3, 4, 5 \\}$，$D_6 = \\{ 1, 2, 6 \\}$。\n\n加入 $5 \\to 6$ 后，$D_6 = \\{ 1, 6 \\}$，其他点受支配集不变。\n\n加入 $3 \\to 2$ 后没有点受支配集改变。\n\n加入 $2 \\to 4$ 后，$D_4 = \\{ 1, 4 \\}$，$D_5 = \\{ 1, 4, 5 \\}$，其他点受支配集不变。\n\n---\n\n**【数据范围】**\n\n对于所有测试数据：$1 \\le n \\le 3 \\times {10}^3$，$1 \\le m \\le 2 \\times n$，$1 \\le q \\le 2 \\times {10}^4$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $10$ | 无 |\n| $3 \\sim 6$ | $100$ | $q \\le 100$ |\n| $7 \\sim 9$ | $1000$ | $m = n - 1$ |\n| $10 \\sim 15$ | $1000$ | $q \\le 2000$ |\n| $16 \\sim 20$ | $3000$ | 无 |", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2021 A 卷] 支配", "background": "", "description": "给定一张 $n$ 个点 $m$ 条边的有向图 $G$，其顶点从 $1$ 到 $n$ 编号。\n\n对于任意两个点 $u, v$，若从顶点 $1$ 出发到达顶点 $v$ 的所有路径都需要经过顶点 $u$，则称顶点 $u$ 支配顶点 $v$。特别地，每个顶点支配其自身。\n\n对于任意一个点 $v$，我们将图中支配顶点 $v$ 的顶点集合称为 $v$ 的受支配集 $D_v$。\n\n现在有 $q$ 次互相独立的询问，每次询问给出一条有向边，请你回答在图 $G$ 中加入该条边后，有多少个顶点的受支配集发生了变化。", "inputFormat": "第一行，三个整数 $n, m, q$，分别表示图中的顶点数、边数，以及询问数。  \n接下来 $m$ 行，每行两个整数 $x_i,y_i$，表示一条有向边从 $x_i$ 到 $y_i$。  \n接下来 $q$ 行，每行两个整数 $s_i,t_i$，表示每次询问加入的边从 $s_i$ 到 $t_i$。\n\n数据保证给出的图 $G$ 中，从 $1$ 号点出发能到达所有其他点，并且图中不包含重边与自环。", "outputFormat": "对于每个询问，输出一行，一个整数，表示答案。", "hint": "**【样例 #1 解释】**\n\n对于原图，六个点的受支配集分别为：$D_1 = \\{ 1 \\}$，$D_2 = \\{ 1, 2 \\}$，$D_3 = \\{ 1, 3 \\}$，$D_4 =\\{ 1, 3, 4 \\}$，$D_5 = \\{ 1, 3, 4, 5 \\}$，$D_6 = \\{ 1, 2, 6 \\}$。\n\n加入 $5 \\to 6$ 后，$D_6 = \\{ 1, 6 \\}$，其他点受支配集不变。\n\n加入 $3 \\to 2$ 后没有点受支配集改变。\n\n加入 $2 \\to 4$ 后，$D_4 = \\{ 1, 4 \\}$，$D_5 = \\{ 1, 4, 5 \\}$，其他点受支配集不变。\n\n---\n\n**【数据范围】**\n\n对于所有测试数据：$1 \\le n \\le 3 \\times {10}^3$，$1 \\le m \\le 2 \\times n$，$1 \\le q \\le 2 \\times {10}^4$。\n\n每个测试点的具体限制见下表：\n\n| 测试点编号 | $n \\le$ | 特殊性质 |\n|:-:|:-:|:-:|\n| $1 \\sim 2$ | $10$ | 无 |\n| $3 \\sim 6$ | $100$ | $q \\le 100$ |\n| $7 \\sim 9$ | $1000$ | $m = n - 1$ |\n| $10 \\sim 15$ | $1000$ | $q \\le 2000$ |\n| $16 \\sim 20$ | $3000$ | 无 |", "locale": "zh-CN"}}}
{"pid": "P7521", "type": "P", "difficulty": 5, "samples": [["6\n4 7 7 5 2 2\n", "6\n"], ["见附件中的 mod/mod2.in。", "见附件中的 mod/mod2.ans。"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["各省省选", "2021", "O2优化"], "title": "[省选联考 2021 B 卷] 取模", "background": "", "description": "给定 $n$ 个正整数 $a_i$，请你在其中选出三个数 $i, j, k$（$i \\ne j$，$i \\ne k$，$j \\ne k$），使得 $(a_i + a_j) \\bmod a_k$ 的值最大。", "inputFormat": "第一行，一个整数 $n$，表示数字个数。  \n第二行，$n$ 个整数，表示 $a_i$。", "outputFormat": "输出一行，一个整数，表示答案。", "hint": "对于 $30 \\%$ 的数据，$n \\le 100$。  \n对于 $60 \\%$ 的数据，$n \\le 3000$。  \n对于 $100 \\%$ 的数据，$3 \\le n \\le 2 \\times {10}^5$，$1 \\le a_i \\le {10}^8$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[省选联考 2021 B 卷] 取模", "background": "", "description": "给定 $n$ 个正整数 $a_i$，请你在其中选出三个数 $i, j, k$（$i \\ne j$，$i \\ne k$，$j \\ne k$），使得 $(a_i + a_j) \\bmod a_k$ 的值最大。", "inputFormat": "第一行，一个整数 $n$，表示数字个数。  \n第二行，$n$ 个整数，表示 $a_i$。", "outputFormat": "输出一行，一个整数，表示答案。", "hint": "对于 $30 \\%$ 的数据，$n \\le 100$。  \n对于 $60 \\%$ 的数据，$n \\le 3000$。  \n对于 $100 \\%$ 的数据，$3 \\le n \\le 2 \\times {10}^5$，$1 \\le a_i \\le {10}^8$。", "locale": "zh-CN"}}}
{"pid": "P7522", "type": "P", "difficulty": 3, "samples": [["3\n1 2 3", "4"], ["4\n-4 5 -2 -3", "14"], ["8\n2 0 2 1 0 4 2 3", "14"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["贪心", "2021"], "title": "⎌ Nurture ⎌", "background": "![Nurture](https://mivik.gitee.io/image/nurture_wallpaper.jpg)\n\n> \"I realized I shouldn't write music with the expectation that the productivity or achievement will fix my problems, but instead with the hope that my honest expression will move people the way music moves me.\"\n>\n> — Robinson in a letter to his fans", "description": "Mivik 正在听 Nurture，但这时教练走了进来，Mivik 便假装自己在做这道题。\n\n你有一个长度为 $n$ 的序列 $v$，你每次可以 **取出** 两个数 $a,b$，并把 $a-b$ 添加到序列中。重复操作直到序列中只剩下一个数，你需要求出这个数的最大值。\n\n~~（结果教练一眼秒了这水题，Mivik 因没事刷水题被批判了一番）~~", "inputFormat": "第一行一个正整数 $n$，代表序列的长度。\n\n第二行 $n$ 个整数，第 $i$ 个整数 $v_i$ 代表序列第 $i$ 项的元素。", "outputFormat": "一行一个整数，代表最终剩下的数的最大值。", "hint": "### 样例解释\n\n样例一：第一步取出 $1,2$，并把 $1-2=-1$ 添加到序列中，此时序列为 $[3,-1]$；然后取出 $3,-1$，将 $3-(-1)=4$ 添加到序列中，此时序列只剩下一个数 $4$。可以证明不存在使剩下的数更大的操作方式。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 3\\cdot 10^5$，$|v_i|\\le 10^9$。\n\nSubtask 1 (15 pts)：保证 $n\\le 3$。\n\nSubtask 2 (30 pts)：保证 $v_i\\ge0$。\n\nSubtask 3 (55 pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "⎌ Nurture ⎌", "background": "![Nurture](https://mivik.gitee.io/image/nurture_wallpaper.jpg)\n\n> \"I realized I shouldn't write music with the expectation that the productivity or achievement will fix my problems, but instead with the hope that my honest expression will move people the way music moves me.\"\n>\n> — Robinson in a letter to his fans", "description": "Mivik 正在听 Nurture，但这时教练走了进来，Mivik 便假装自己在做这道题。\n\n你有一个长度为 $n$ 的序列 $v$，你每次可以 **取出** 两个数 $a,b$，并把 $a-b$ 添加到序列中。重复操作直到序列中只剩下一个数，你需要求出这个数的最大值。\n\n~~（结果教练一眼秒了这水题，Mivik 因没事刷水题被批判了一番）~~", "inputFormat": "第一行一个正整数 $n$，代表序列的长度。\n\n第二行 $n$ 个整数，第 $i$ 个整数 $v_i$ 代表序列第 $i$ 项的元素。", "outputFormat": "一行一个整数，代表最终剩下的数的最大值。", "hint": "### 样例解释\n\n样例一：第一步取出 $1,2$，并把 $1-2=-1$ 添加到序列中，此时序列为 $[3,-1]$；然后取出 $3,-1$，将 $3-(-1)=4$ 添加到序列中，此时序列只剩下一个数 $4$。可以证明不存在使剩下的数更大的操作方式。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 3\\cdot 10^5$，$|v_i|\\le 10^9$。\n\nSubtask 1 (15 pts)：保证 $n\\le 3$。\n\nSubtask 2 (30 pts)：保证 $v_i\\ge0$。\n\nSubtask 3 (55 pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P7523", "type": "P", "difficulty": 3, "samples": [["2 2\noo\nxo", "5"], ["2 2\noo\n?o", "7"], ["3 4\no?o?\n?xox\no?xo", "499122189"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2021"], "title": "Cytoid", "background": "![Welcome to Cytoid!](https://cdn.luogu.com.cn/upload/image_hosting/zzg1blb0.png)\n\n众所周知，尽管很菜，但 colazcy 仍然很喜欢玩 Cytus。", "description": "一天，colazcy 又在越级打谱。不到一分钟，colazcy 把手机一摔，骂道：“什么垃圾铺面！” 于是他准备在 Cytoid 上面做一个自制铺恶心别人。\n\ncolazcy 准备上一波劲爆 $m$ 押，共有 $n$ 排。也就是说，他的铺面是一个 $n\\times m$ 的矩阵，其中每一个位置可以是 Drag 也可以是 Click。colazcy 已经确定了其中一些位置应该是什么元素，但剩下的还没有确定。\n\n但是 colazcy 发现，他铺面对应的矩形如果有一个子矩形中所有元素都是 Drag，那么玩家就可以一直按住糊过去。colazcy 定义一张铺面的简单度为这张铺面对应的矩形中全都是 Drag 的子矩形个数。\n\n现在 colazcy 把他还未完成的铺面给了你，希望你告诉他：如果他等概率随机地把剩下没有决定的元素填成 Drag / Click，最终铺面简单度的期望是多少。不难观察到答案总是一个有理数，你只需要输出这个答案对 $998244353$ 取模的结果。如果你不知道如何将一个有理数对质数取模，可以参考 [有理数取模](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "第一行两个正整数 $n,m$，分别代表矩阵的行数和列数。\n\n接下来 $n$ 行，第 $i$ 行有一个长度为 $m$ 的字符串，其第 $j$ 位为 `o` 代表这个位置被确定为 Drag，为 `x` 代表其被确定为 Click，为 `?` 表示这个位置还没有确定。", "outputFormat": "一行一个整数，代表简单度的期望对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n样例一：整个铺面已经确定，而简单度 = 全是 Drag 的子矩阵数目 = $5$。\n\n样例二：只有一个位置没有确定：当这个位置填 Drag 时，简单度为 $9$；当这个位置填 Click 时，简单度为 $5$。则期望简单度为 $\\dfrac{9+5}2=7$。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n,m\\le 100$。\n\nSubtask 1 (15 pts)：保证没有尚未确定的元素（即输入没有 `?`）。\n\nSubtask 2 (15 pts)：保证尚未确定的元素个数 $\\le 3$。\n\nSubtask 3 (30 pts)：保证 $n\\le 30$。\n\nSubtask 4 (40 pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Cytoid", "background": "![Welcome to Cytoid!](https://cdn.luogu.com.cn/upload/image_hosting/zzg1blb0.png)\n\n众所周知，尽管很菜，但 colazcy 仍然很喜欢玩 Cytus。", "description": "一天，colazcy 又在越级打谱。不到一分钟，colazcy 把手机一摔，骂道：“什么垃圾铺面！” 于是他准备在 Cytoid 上面做一个自制铺恶心别人。\n\ncolazcy 准备上一波劲爆 $m$ 押，共有 $n$ 排。也就是说，他的铺面是一个 $n\\times m$ 的矩阵，其中每一个位置可以是 Drag 也可以是 Click。colazcy 已经确定了其中一些位置应该是什么元素，但剩下的还没有确定。\n\n但是 colazcy 发现，他铺面对应的矩形如果有一个子矩形中所有元素都是 Drag，那么玩家就可以一直按住糊过去。colazcy 定义一张铺面的简单度为这张铺面对应的矩形中全都是 Drag 的子矩形个数。\n\n现在 colazcy 把他还未完成的铺面给了你，希望你告诉他：如果他等概率随机地把剩下没有决定的元素填成 Drag / Click，最终铺面简单度的期望是多少。不难观察到答案总是一个有理数，你只需要输出这个答案对 $998244353$ 取模的结果。如果你不知道如何将一个有理数对质数取模，可以参考 [有理数取模](https://www.luogu.com.cn/problem/P2613)。", "inputFormat": "第一行两个正整数 $n,m$，分别代表矩阵的行数和列数。\n\n接下来 $n$ 行，第 $i$ 行有一个长度为 $m$ 的字符串，其第 $j$ 位为 `o` 代表这个位置被确定为 Drag，为 `x` 代表其被确定为 Click，为 `?` 表示这个位置还没有确定。", "outputFormat": "一行一个整数，代表简单度的期望对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n样例一：整个铺面已经确定，而简单度 = 全是 Drag 的子矩阵数目 = $5$。\n\n样例二：只有一个位置没有确定：当这个位置填 Drag 时，简单度为 $9$；当这个位置填 Click 时，简单度为 $5$。则期望简单度为 $\\dfrac{9+5}2=7$。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n,m\\le 100$。\n\nSubtask 1 (15 pts)：保证没有尚未确定的元素（即输入没有 `?`）。\n\nSubtask 2 (15 pts)：保证尚未确定的元素个数 $\\le 3$。\n\nSubtask 3 (30 pts)：保证 $n\\le 30$。\n\nSubtask 4 (40 pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P7524", "type": "P", "difficulty": 4, "samples": [["1 1", "1"], ["2 2", "4"], ["3 2", "18"], ["10 5", "8647680"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["2021", "O2优化"], "title": "魔女的茶会", "background": "“原来如此，这就是你欲望的根本吗，真有意思呢…”\n\n声音在墓穴中传开来，昴猛然回头，眼前的景象却骤然大变：他的四周由昏黑的墙壁变为了一望无际的草坪，起伏着大大小小的山丘；而原本应该是墓穴入口的地方，却有着一张茶桌和两张座椅，与之一齐处在遮阳伞的荫庇下的，还有一位端坐着的黑衣女子。\n\n![初见](https://cdn.luogu.com.cn/upload/image_hosting/umx8vsni.png)\n\n“我好久没有跟人类对话了，就兴奋了点… 我叫艾姬多娜。「强欲魔女」，这样说比较好懂吧？” 女子浅笑着说道。\n\n“… 这是哪里！？我应该在一个黑暗的遗迹中，你是什么时候把我转移过来的？” 昴咬紧了牙，问道。\n\n“很遗憾，你搞错了。你并不是肉体经历了转移，只是被邀请参加我的茶会而已。”\n\n“茶会…？”\n\n“是魔女的茶会哦。”\n\n**[管理员 Mivik 更改了时间线]**", "description": "“那么… 你还准备在那里站多久？趁着茶还没凉赶紧入座吧。”\n\n“可恶… 知道啦知道啦！” 昴走上前去，坐在了魔女对面。桌上除了两杯茶外，还有一副黑白交错的棋盘。\n\n“这是…？” 昴指着棋盘，问道。\n\n“这是魔女棋哦。我请你过来是为了解答我沉思多年都无法解决的一个问题。如果你解决了它，我就会给你和爱蜜莉雅参加试炼的权利… 否则…”令人不安的笑容浮现在魔女脸上，“你可能就会在圣域里无穷地轮回哦…？”\n\n昴出了一身冷汗，战战兢兢地问道：“那么问题是？”\n\n魔女拾起了身边的一个棋子，缓缓说道：“如你所见，这是一张 $n\\times n$ 的棋盘，由 $n^2$ 个方格组成，每个方格上最多只能存在一个棋子。**不同于普通的棋盘，这个棋盘是循环的，也就是说，第 $i$ 行 $n$ 列的格子右边是第 $i$ 行 $1$ 列的格子，第 $n$ 行 $i$ 列的格子下面是第 $1$ 行 $i$ 列的格子，以此类推。** 我手中的棋子名叫「大罪司教」，它一步可以向任意斜线方向移动任意多格。一个棋子能一步走到的格子称为其掌控的格子。如果一个棋子掌控了另一个棋子所在的方格，则这种棋盘布局是不稳定的，反之称其为稳定的。现在，请问你能否向棋盘中放入恰好 $m$ 个「大罪司教」，使得整个棋盘布局是稳定的呢？”\n\n![示例](https://cdn.luogu.com.cn/upload/image_hosting/8d8481wr.png)\n\n[上图高清版](https://cdn.luogu.com.cn/upload/image_hosting/np9zk0t4.png)\n\n昴沉思了一会儿，随后在棋盘上操作，很快就完成了魔女的任务，说道：“那么快给我参加试炼的权利吧！”\n\n魔女说：“不行啦… 我还有一个问题没有解决呢…”\n\n昴：“靠北，你耍赖啊！”\n\n魔女没有理会昴，继续说道：“现在问题是，一共有多少种本质不同的稳定的布局方案，使得布局中恰好有 $m$ 个「大罪司教」呢？两种方案本质不同，当且仅当存在任意一格在一种方案中有棋子而在另一种方案中没有哦。”\n\n昴更加生气，因为他不会做了，他转而求助于你。你只需要告诉他答案对 $998244353$ 取模的结果即可。\n", "inputFormat": "一行两个正整数 $n,m$，代表棋盘的大小和你需要放置的棋子数目。", "outputFormat": "一行一个正整数，代表答案对 $998244353$ 取模的结果。", "hint": "样例一：将一个棋子放入 $1\\times1$ 的棋盘中显然只有一种方案。\n\n样例二：一共有以下四种稳定的布局（用 `.` 代表空位，`o` 代表「大罪司教」）：\n\n```plain\noo .o .. o.\n.. .o oo o.\n```\n\n样例三：所有 $18$ 种稳定的布局可以在 [这里](https://www.luogu.com.cn/paste/obkotkqb) 查看。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n<998244353$，$0\\le m\\le\\min\\{n,10^7\\}$。\n\nSubtask 1 (5 pts)：保证 $m=0$。\n\nSubtask 2 (10 pts)：保证 $m=1$。\n\nSubtask 3 (10 pts)：保证 $1\\le n\\le 4$。\n\nSubtask 4 (20 pts)：保证 $n$ 是奇数。\n\nSubtask 5 (25 pts)：保证 $n\\le 10^7$。\n\nSubtask 6 (30 pts)：无特殊限制。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "魔女的茶会", "background": "“原来如此，这就是你欲望的根本吗，真有意思呢…”\n\n声音在墓穴中传开来，昴猛然回头，眼前的景象却骤然大变：他的四周由昏黑的墙壁变为了一望无际的草坪，起伏着大大小小的山丘；而原本应该是墓穴入口的地方，却有着一张茶桌和两张座椅，与之一齐处在遮阳伞的荫庇下的，还有一位端坐着的黑衣女子。\n\n![初见](https://cdn.luogu.com.cn/upload/image_hosting/umx8vsni.png)\n\n“我好久没有跟人类对话了，就兴奋了点… 我叫艾姬多娜。「强欲魔女」，这样说比较好懂吧？” 女子浅笑着说道。\n\n“… 这是哪里！？我应该在一个黑暗的遗迹中，你是什么时候把我转移过来的？” 昴咬紧了牙，问道。\n\n“很遗憾，你搞错了。你并不是肉体经历了转移，只是被邀请参加我的茶会而已。”\n\n“茶会…？”\n\n“是魔女的茶会哦。”\n\n**[管理员 Mivik 更改了时间线]**", "description": "“那么… 你还准备在那里站多久？趁着茶还没凉赶紧入座吧。”\n\n“可恶… 知道啦知道啦！” 昴走上前去，坐在了魔女对面。桌上除了两杯茶外，还有一副黑白交错的棋盘。\n\n“这是…？” 昴指着棋盘，问道。\n\n“这是魔女棋哦。我请你过来是为了解答我沉思多年都无法解决的一个问题。如果你解决了它，我就会给你和爱蜜莉雅参加试炼的权利… 否则…”令人不安的笑容浮现在魔女脸上，“你可能就会在圣域里无穷地轮回哦…？”\n\n昴出了一身冷汗，战战兢兢地问道：“那么问题是？”\n\n魔女拾起了身边的一个棋子，缓缓说道：“如你所见，这是一张 $n\\times n$ 的棋盘，由 $n^2$ 个方格组成，每个方格上最多只能存在一个棋子。**不同于普通的棋盘，这个棋盘是循环的，也就是说，第 $i$ 行 $n$ 列的格子右边是第 $i$ 行 $1$ 列的格子，第 $n$ 行 $i$ 列的格子下面是第 $1$ 行 $i$ 列的格子，以此类推。** 我手中的棋子名叫「大罪司教」，它一步可以向任意斜线方向移动任意多格。一个棋子能一步走到的格子称为其掌控的格子。如果一个棋子掌控了另一个棋子所在的方格，则这种棋盘布局是不稳定的，反之称其为稳定的。现在，请问你能否向棋盘中放入恰好 $m$ 个「大罪司教」，使得整个棋盘布局是稳定的呢？”\n\n![示例](https://cdn.luogu.com.cn/upload/image_hosting/8d8481wr.png)\n\n[上图高清版](https://cdn.luogu.com.cn/upload/image_hosting/np9zk0t4.png)\n\n昴沉思了一会儿，随后在棋盘上操作，很快就完成了魔女的任务，说道：“那么快给我参加试炼的权利吧！”\n\n魔女说：“不行啦… 我还有一个问题没有解决呢…”\n\n昴：“靠北，你耍赖啊！”\n\n魔女没有理会昴，继续说道：“现在问题是，一共有多少种本质不同的稳定的布局方案，使得布局中恰好有 $m$ 个「大罪司教」呢？两种方案本质不同，当且仅当存在任意一格在一种方案中有棋子而在另一种方案中没有哦。”\n\n昴更加生气，因为他不会做了，他转而求助于你。你只需要告诉他答案对 $998244353$ 取模的结果即可。\n", "inputFormat": "一行两个正整数 $n,m$，代表棋盘的大小和你需要放置的棋子数目。", "outputFormat": "一行一个正整数，代表答案对 $998244353$ 取模的结果。", "hint": "样例一：将一个棋子放入 $1\\times1$ 的棋盘中显然只有一种方案。\n\n样例二：一共有以下四种稳定的布局（用 `.` 代表空位，`o` 代表「大罪司教」）：\n\n```plain\noo .o .. o.\n.. .o oo o.\n```\n\n样例三：所有 $18$ 种稳定的布局可以在 [这里](https://www.luogu.com.cn/paste/obkotkqb) 查看。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n<998244353$，$0\\le m\\le\\min\\{n,10^7\\}$。\n\nSubtask 1 (5 pts)：保证 $m=0$。\n\nSubtask 2 (10 pts)：保证 $m=1$。\n\nSubtask 3 (10 pts)：保证 $1\\le n\\le 4$。\n\nSubtask 4 (20 pts)：保证 $n$ 是奇数。\n\nSubtask 5 (25 pts)：保证 $n\\le 10^7$。\n\nSubtask 6 (30 pts)：无特殊限制。", "locale": "zh-CN"}}}
{"pid": "P7525", "type": "P", "difficulty": 6, "samples": [["7 1\nabcdabc", "10"], ["5 2\nioioi", "11"], ["8 50\nidolidol", "263923940"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536, 65536]}, "tags": ["2021", "O2优化"], "title": "Shelter", "background": "![Shelter](https://cdn.luogu.com.cn/upload/image_hosting/dng2ysqs.png)\n\n> It's a long way forward, so trust in me\n>\n> I'll give them shelter, like you've done for me\n>\n> And I know, I'm not alone\n>\n> You'll be watching over us, until you're gone", "description": "在太空里的时间，Rin 除了在虚拟世界里自由创作，每天还会进行一个有趣的小游戏。\n\n最初来到太空时，她的父亲留给她了一个由英文小写字母组成的非空的字符串 $s$，其长度为 $n$。每天，Rin 都会找到一个最大的整数 $i$（$0\\le i<|s|$）使得字符串的长度为 $i$ 的前缀与其长度为 $i$ 的后缀相同（注意 $i$ 可能为 $0$），并将这个 前缀 / 后缀 追加在整个字符串的最后面形成新的字符串。例如，当字符串为 `mivikismivik` 时，最大的 $i=5$（字符串长为 $5$ 的前缀后缀皆为 `mivik`），于是 Rin 将 `mivik` 追加在字符串后面形成新字符串 `mivikismivikmivik`。\n\n在太空中度过 $K$ 天后，这个字符串已经变得很长，Rin 突然很好奇这个字符串的长度现在是多少，你能帮帮她吗？由于答案可能很大，你只需要告诉她答案对 $998244353$ 取模的结果即可。", "inputFormat": "第一行两个正整数 $n,K$，分别代表最初字符串的长度和 Rin 在太空中度过的天数。\n\n第二行一个长度为 $n$ 的小写英文字母组成的字符串 $s$，代表 Rin 的父亲留给她的字符串。", "outputFormat": "一行一个整数，代表 $K$ 天后字符串的长度对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n样例一：操作一次后得到字符串 `abcdabcabc`，长度为 $10$。\n\n样例二：操作一次后得到字符串 `ioioiioi`，再操作一次得到 `ioioiioiioi`，长度为 $11$。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 2\\cdot 10^6$，$1\\le K\\le 10^{18}$。\n\nSubtask 1 (15 pts)：保证 $s$ 只由一种字母构成。\n\nSubtask 2 (20 pts)：保证 $s$ 有长度不为 $|s|$ 的整周期（即长度是 $|s|$ 的约数的周期）。\n\nSubtask 3 (65 pts)：无特殊限制。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Shelter", "background": "![Shelter](https://cdn.luogu.com.cn/upload/image_hosting/dng2ysqs.png)\n\n> It's a long way forward, so trust in me\n>\n> I'll give them shelter, like you've done for me\n>\n> And I know, I'm not alone\n>\n> You'll be watching over us, until you're gone", "description": "在太空里的时间，Rin 除了在虚拟世界里自由创作，每天还会进行一个有趣的小游戏。\n\n最初来到太空时，她的父亲留给她了一个由英文小写字母组成的非空的字符串 $s$，其长度为 $n$。每天，Rin 都会找到一个最大的整数 $i$（$0\\le i<|s|$）使得字符串的长度为 $i$ 的前缀与其长度为 $i$ 的后缀相同（注意 $i$ 可能为 $0$），并将这个 前缀 / 后缀 追加在整个字符串的最后面形成新的字符串。例如，当字符串为 `mivikismivik` 时，最大的 $i=5$（字符串长为 $5$ 的前缀后缀皆为 `mivik`），于是 Rin 将 `mivik` 追加在字符串后面形成新字符串 `mivikismivikmivik`。\n\n在太空中度过 $K$ 天后，这个字符串已经变得很长，Rin 突然很好奇这个字符串的长度现在是多少，你能帮帮她吗？由于答案可能很大，你只需要告诉她答案对 $998244353$ 取模的结果即可。", "inputFormat": "第一行两个正整数 $n,K$，分别代表最初字符串的长度和 Rin 在太空中度过的天数。\n\n第二行一个长度为 $n$ 的小写英文字母组成的字符串 $s$，代表 Rin 的父亲留给她的字符串。", "outputFormat": "一行一个整数，代表 $K$ 天后字符串的长度对 $998244353$ 取模的结果。", "hint": "### 样例解释\n\n样例一：操作一次后得到字符串 `abcdabcabc`，长度为 $10$。\n\n样例二：操作一次后得到字符串 `ioioiioi`，再操作一次得到 `ioioiioiioi`，长度为 $11$。\n\n### 数据范围\n\n对于全部数据，有 $1\\le n\\le 2\\cdot 10^6$，$1\\le K\\le 10^{18}$。\n\nSubtask 1 (15 pts)：保证 $s$ 只由一种字母构成。\n\nSubtask 2 (20 pts)：保证 $s$ 有长度不为 $|s|$ 的整周期（即长度是 $|s|$ 的约数的周期）。\n\nSubtask 3 (65 pts)：无特殊限制。\n", "locale": "zh-CN"}}}
{"pid": "P7526", "type": "P", "difficulty": 7, "samples": [["2 2\n0 1 1 1", "5"], ["3 3\n2 0 1 7 1 2 0 1", "320"], ["5 3\n2 0 2 1 0 4 2 3", "1482"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2021", "O2优化"], "title": "Virtual Self", "background": "![Virtual Self](https://cdn.luogu.com.cn/upload/image_hosting/16xzq9r9.png)\n\n> Lately, I've been hearing the cries of the angels when I close my eyes\n>\n> Remember?", "description": "Technic_Angel 想用粒子来制作一支美丽的水晶。Pathselector 告诉她，一支水晶由 $m$ 簇粒子合成，其中每一簇粒子都有美丽度（一个小于 $2^w$ 的非负整数，其中 $w$ 为给定正整数），而一支水晶的美丽度就是合成它的所有粒子的美丽度的异或和。\n\nTechnic_Angel 有许多粒子：对于每一个 $i\\in[0,2^w)\\cap\\Z$，她都有恰好 $v_i$ 簇美丽度为 $i$ 的粒子。现在 Technic_Angel 想要知道，有多少种方案能够合成一支美丽度为 $k$ 的水晶呢？（两种方案不同，当且仅当有一簇粒子在一种方案中被使用而在另一种方案中没有；所有粒子都互不相同）可惜她并不会这个问题，于是她找到了擅长 OI 的你。\n\n在你花 $0.01\\mu s$ 切掉这道题后，异常惊喜的 Technic_Angel 想要让你对所有 $k\\in[0,2^w)\\cap\\Z$ 都解决上面的问题。但由于答案过于巨大，她只要求你告诉她对于所有的 $i$，$((i+1)f(i))\\bmod998244353$ 的异或和，其中 $f(i)$ 代表合成一支美丽度为 $i$ 的水晶的方案数。即\n$$\n(f(0)\\bmod P)\\otimes(2f(1)\\bmod P)\\otimes\\cdots\\otimes(2^wf(2^w-1)\\bmod P)\n$$\n其中 $P=998244353$，$\\otimes$ 代表异或。注意是取模后的异或和而非异或后再取模。", "inputFormat": "第一行两个正整数 $m,w$，分别代表合成水晶所需的粒子数目以及问题中的参数。\n\n第二行 $2^w$ 个正整数，第 $i$ 个整数代表 $v_{i-1}$。", "outputFormat": "一行一个整数，代表 $((i+1)f(i))\\bmod 998244353$ 的异或和。", "hint": "### 样例解释\n\n样例一：Technic_Angel 共有三簇粒子，美丽度分别为 $1,2,3$。用序列表示选出的粒子的美丽度的话，没有合成美丽度为 $0$ 的水晶的方案，而为 $1$、为 $2$ 和为 $3$ 的方案各有一种（分别是 $[2,3]$、$[1,3]$ 和 $[1,2]$），于是答案为 $0\\otimes2\\otimes3\\otimes4=5$。\n\n### 数据范围\n\n令 $n=\\sum v_i$。对于全部数据，有 $0\\le n,v_i<998244353$，$1\\le m\\le\\min\\{n,10^6\\}$，$1\\le w\\le 20$。\n\n| 子任务 |       $n,m,w$       | 特殊性质 | 分值 |\n| :----: | :-----------------: | :------: | :--: |\n|   1    |        $m=1$        |   $A$    |  5   |\n|   2    |   $n\\le200,w\\le8$   |   $A$    |  10  |\n|   3    |        $m=2$        |   $A$    |  20  |\n|   4    |         无          |  $A,B$   |  25  |\n|   5    |         无          |   $A$    |  38  |\n|   6    | $m\\le 60000,w\\le16$ |    无    |  2   |\n\n特殊性质 $A$：$n\\le10^6$。\n\n特殊性质 $B$：$2^w\\cdot m\\le 6\\cdot 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "Virtual Self", "background": "![Virtual Self](https://cdn.luogu.com.cn/upload/image_hosting/16xzq9r9.png)\n\n> Lately, I've been hearing the cries of the angels when I close my eyes\n>\n> Remember?", "description": "Technic_Angel 想用粒子来制作一支美丽的水晶。Pathselector 告诉她，一支水晶由 $m$ 簇粒子合成，其中每一簇粒子都有美丽度（一个小于 $2^w$ 的非负整数，其中 $w$ 为给定正整数），而一支水晶的美丽度就是合成它的所有粒子的美丽度的异或和。\n\nTechnic_Angel 有许多粒子：对于每一个 $i\\in[0,2^w)\\cap\\Z$，她都有恰好 $v_i$ 簇美丽度为 $i$ 的粒子。现在 Technic_Angel 想要知道，有多少种方案能够合成一支美丽度为 $k$ 的水晶呢？（两种方案不同，当且仅当有一簇粒子在一种方案中被使用而在另一种方案中没有；所有粒子都互不相同）可惜她并不会这个问题，于是她找到了擅长 OI 的你。\n\n在你花 $0.01\\mu s$ 切掉这道题后，异常惊喜的 Technic_Angel 想要让你对所有 $k\\in[0,2^w)\\cap\\Z$ 都解决上面的问题。但由于答案过于巨大，她只要求你告诉她对于所有的 $i$，$((i+1)f(i))\\bmod998244353$ 的异或和，其中 $f(i)$ 代表合成一支美丽度为 $i$ 的水晶的方案数。即\n$$\n(f(0)\\bmod P)\\otimes(2f(1)\\bmod P)\\otimes\\cdots\\otimes(2^wf(2^w-1)\\bmod P)\n$$\n其中 $P=998244353$，$\\otimes$ 代表异或。注意是取模后的异或和而非异或后再取模。", "inputFormat": "第一行两个正整数 $m,w$，分别代表合成水晶所需的粒子数目以及问题中的参数。\n\n第二行 $2^w$ 个正整数，第 $i$ 个整数代表 $v_{i-1}$。", "outputFormat": "一行一个整数，代表 $((i+1)f(i))\\bmod 998244353$ 的异或和。", "hint": "### 样例解释\n\n样例一：Technic_Angel 共有三簇粒子，美丽度分别为 $1,2,3$。用序列表示选出的粒子的美丽度的话，没有合成美丽度为 $0$ 的水晶的方案，而为 $1$、为 $2$ 和为 $3$ 的方案各有一种（分别是 $[2,3]$、$[1,3]$ 和 $[1,2]$），于是答案为 $0\\otimes2\\otimes3\\otimes4=5$。\n\n### 数据范围\n\n令 $n=\\sum v_i$。对于全部数据，有 $0\\le n,v_i<998244353$，$1\\le m\\le\\min\\{n,10^6\\}$，$1\\le w\\le 20$。\n\n| 子任务 |       $n,m,w$       | 特殊性质 | 分值 |\n| :----: | :-----------------: | :------: | :--: |\n|   1    |        $m=1$        |   $A$    |  5   |\n|   2    |   $n\\le200,w\\le8$   |   $A$    |  10  |\n|   3    |        $m=2$        |   $A$    |  20  |\n|   4    |         无          |  $A,B$   |  25  |\n|   5    |         无          |   $A$    |  38  |\n|   6    | $m\\le 60000,w\\le16$ |    无    |  2   |\n\n特殊性质 $A$：$n\\le10^6$。\n\n特殊性质 $B$：$2^w\\cdot m\\le 6\\cdot 10^7$。", "locale": "zh-CN"}}}
{"pid": "P7527", "type": "P", "difficulty": 5, "samples": [["7\n1 2 3 4 3 2 5", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "树状数组", "2021"], "title": "[USACO21OPEN] United Cows of Farmer John G", "background": "", "description": "农夫约翰合牛国（The United Cows of Farmer John，UCFJ）将要选派一个代表队参加国际牛学奥林匹克（International bOvine olympIad，IOI）。\n\n有 $N$\n头奶牛参加了代表队选拔。她们站成一行，奶牛 $i$ 的品种为 $b_i$。\n\n代表队将会由包含至少两头奶牛的连续区间组成——也就是说，对于满足 $1\\le l<r\\le N$\n的奶牛 $l\\dots r$。最边上的奶牛会被指定为**领队**。为了避免种内冲突，每一名领队都必须与代表队的其他成员（**包括领队**）品种不同。\n\n请帮助 UCFJ 求出他们可以选派参加 IOI 的代表队的方法数。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个整数 $b_1,b_2,\\dots,b_N$，均在范围 $[1,N]$ 之间。 ", "outputFormat": "输出一行表示可能的代表队的数量。", "hint": "#### 样例解释\n\n每一代表队对应以下的一对领队：\n$$(1,2),(1,3),(1,4),(1,7),(2,3),(2,4),(3,4),(4,5),(4,6),(4,7),(5,6),(5,7),(6,7).$$\n\n#### 数据范围与约定\n\n$1\\le N\\le 2\\times 10^5$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21OPEN] United Cows of Farmer John G", "background": "", "description": "农夫约翰合牛国（The United Cows of Farmer John，UCFJ）将要选派一个代表队参加国际牛学奥林匹克（International bOvine olympIad，IOI）。\n\n有 $N$\n头奶牛参加了代表队选拔。她们站成一行，奶牛 $i$ 的品种为 $b_i$。\n\n代表队将会由包含至少两头奶牛的连续区间组成——也就是说，对于满足 $1\\le l<r\\le N$\n的奶牛 $l\\dots r$。最边上的奶牛会被指定为**领队**。为了避免种内冲突，每一名领队都必须与代表队的其他成员（**包括领队**）品种不同。\n\n请帮助 UCFJ 求出他们可以选派参加 IOI 的代表队的方法数。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个整数 $b_1,b_2,\\dots,b_N$，均在范围 $[1,N]$ 之间。 ", "outputFormat": "输出一行表示可能的代表队的数量。", "hint": "#### 样例解释\n\n每一代表队对应以下的一对领队：\n$$(1,2),(1,3),(1,4),(1,7),(2,3),(2,4),(3,4),(4,5),(4,6),(4,7),(5,6),(5,7),(6,7).$$\n\n#### 数据范围与约定\n\n$1\\le N\\le 2\\times 10^5$ 。", "locale": "zh-CN"}}}
{"pid": "P7528", "type": "P", "difficulty": 5, "samples": [["5\n10 1 4 8 9\n11 1 2 5 6\n12 9 10 2 3\n3 4 3 6 7\n15 10 8 7 5", "13"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2021", "图论建模", "生成树"], "title": "[USACO21OPEN] Portals G", "background": "", "description": "Bessie 位于一个由 $N$ 个编号为 $1\\dots N$ 的结点以及 $2N$ 个编号为 $1\\cdots 2N$ 的传送门所组成的网络中。每个传送门连接两个不同的结点 $u$ 和 $v$（$u≠v$）。可能有多个传送门连接同一对结点。\n\n每个结点 $v$ 与四个不同的传送门相连。与 $v$ 相连的传送门列表由 $p_v=[p_{v,1},p_{v,2},p_{v,3},p_{v,4}]$ 给出。\n\n你的当前位置可以用有序对（当前结点，当前传送门）表示；即一个有序对 $(v,p_{v,i})$\n，其中 $1\\le v\\le N$ 以及 $1\\le i\\le 4$。你可以使用以下任一操作来改变你的当前位置：\n\n- 1. 由穿过当前传送门来改变当前结点。\n- 2. 改变当前传送门。在每一个结点上，列表的前两个传送门是配对的，后两个传送门也是配对的。也就是说，如果你的当前位置是 $(v,p_{v,2})$，你可以转而使用传送门 $(v,p_{v,1})$，反之亦然。类似地，如果你的当前位置是 $(v,p_{v,3})$，你可以转而使用传送门 $(v,p_{v,4})$，反之亦然。没有其他改变传送门的方式（例如，你**不能**从传送门 $p_{v,2}$ 转去传送门 $p_{v,4}$ ）。\n\n总共有 $4N$ 个不同的位置。不幸的是，并不一定每一个位置都可以从另外的每一个位置经过一系列操作而到达。所以，以 $c_v$ 哞尼的代价，你可以以任意顺序重新排列与 $v$ 相邻的传送门列表。在此之后，列表中的前两个传送门互相配对，同时后两个传送门也互相配对。\n\n例如，如果你将与 $v$ 相邻的传送门以 $[p_{v,3},p_{v,1},p_{v,2},p_{v,4}]$ 的顺序重新排列，这意味着如果你位于结点 $v$ ，\n- 如果你当前位于传送门 $p_{v,1}$ ，你可以转而使用传送门 $p_{v,3}$，反之亦然。\n- 如果你当前位于传送门 $p_{v,2}$ ，你可以转而使用传送门 $p_{v,4}$，反之亦然。\n你不再能够从传送门 $p_{v,1}$\n转至传送门 $p_{v,2}$，或从传送门 $p_{v,3}$ 转至 $p_{v,4}$ ，反之亦然。\n\n计算修改这一网络使得每一个位置都可以从另外的每一个位置到达所需要花费的哞尼的最小数量。输入保证存在至少一种修改网络的合法方式。 ", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行每行描述一个结点。第 $v+1$ 行包含五个空格分隔的整数 $c_v,p_{v,1},p_{v,2},p_{v,3},p_{v,4}$。\n\n输入保证对于每一个 $v$ ，$p_{v,1},p_{v,2},p_{v,3},p_{v,4}$ 各不相同，且每个传送门出现在**恰好两个结点**的邻接表中。 ", "outputFormat": "输出一行，包含修改这一网络使得每一个位置都可以从另外的每一个位置到达所需要花费的哞尼的最小数量。 ", "hint": "#### 样例解释\n\n重新排列结点 $1$ 和 $4$ 的邻接表就已足够。这需要总计 $c_1+c_4=13$ 哞尼。我们可以使 $p_1=[1,9,4,8]$ 以及 $p_4=[7,4,6,3]$。 \n\n#### 数据范围与约定\n\n$2\\le N\\le 10^5$，$1\\le c_v\\le 10^3$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21OPEN] Portals G", "background": "", "description": "Bessie 位于一个由 $N$ 个编号为 $1\\dots N$ 的结点以及 $2N$ 个编号为 $1\\cdots 2N$ 的传送门所组成的网络中。每个传送门连接两个不同的结点 $u$ 和 $v$（$u≠v$）。可能有多个传送门连接同一对结点。\n\n每个结点 $v$ 与四个不同的传送门相连。与 $v$ 相连的传送门列表由 $p_v=[p_{v,1},p_{v,2},p_{v,3},p_{v,4}]$ 给出。\n\n你的当前位置可以用有序对（当前结点，当前传送门）表示；即一个有序对 $(v,p_{v,i})$\n，其中 $1\\le v\\le N$ 以及 $1\\le i\\le 4$。你可以使用以下任一操作来改变你的当前位置：\n\n- 1. 由穿过当前传送门来改变当前结点。\n- 2. 改变当前传送门。在每一个结点上，列表的前两个传送门是配对的，后两个传送门也是配对的。也就是说，如果你的当前位置是 $(v,p_{v,2})$，你可以转而使用传送门 $(v,p_{v,1})$，反之亦然。类似地，如果你的当前位置是 $(v,p_{v,3})$，你可以转而使用传送门 $(v,p_{v,4})$，反之亦然。没有其他改变传送门的方式（例如，你**不能**从传送门 $p_{v,2}$ 转去传送门 $p_{v,4}$ ）。\n\n总共有 $4N$ 个不同的位置。不幸的是，并不一定每一个位置都可以从另外的每一个位置经过一系列操作而到达。所以，以 $c_v$ 哞尼的代价，你可以以任意顺序重新排列与 $v$ 相邻的传送门列表。在此之后，列表中的前两个传送门互相配对，同时后两个传送门也互相配对。\n\n例如，如果你将与 $v$ 相邻的传送门以 $[p_{v,3},p_{v,1},p_{v,2},p_{v,4}]$ 的顺序重新排列，这意味着如果你位于结点 $v$ ，\n- 如果你当前位于传送门 $p_{v,1}$ ，你可以转而使用传送门 $p_{v,3}$，反之亦然。\n- 如果你当前位于传送门 $p_{v,2}$ ，你可以转而使用传送门 $p_{v,4}$，反之亦然。\n你不再能够从传送门 $p_{v,1}$\n转至传送门 $p_{v,2}$，或从传送门 $p_{v,3}$ 转至 $p_{v,4}$ ，反之亦然。\n\n计算修改这一网络使得每一个位置都可以从另外的每一个位置到达所需要花费的哞尼的最小数量。输入保证存在至少一种修改网络的合法方式。 ", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行每行描述一个结点。第 $v+1$ 行包含五个空格分隔的整数 $c_v,p_{v,1},p_{v,2},p_{v,3},p_{v,4}$。\n\n输入保证对于每一个 $v$ ，$p_{v,1},p_{v,2},p_{v,3},p_{v,4}$ 各不相同，且每个传送门出现在**恰好两个结点**的邻接表中。 ", "outputFormat": "输出一行，包含修改这一网络使得每一个位置都可以从另外的每一个位置到达所需要花费的哞尼的最小数量。 ", "hint": "#### 样例解释\n\n重新排列结点 $1$ 和 $4$ 的邻接表就已足够。这需要总计 $c_1+c_4=13$ 哞尼。我们可以使 $p_1=[1,9,4,8]$ 以及 $p_4=[7,4,6,3]$。 \n\n#### 数据范围与约定\n\n$2\\le N\\le 10^5$，$1\\le c_v\\le 10^3$。", "locale": "zh-CN"}}}
{"pid": "P7529", "type": "P", "difficulty": 6, "samples": [["4\n0 0\n0 4\n1 1\n1 2", "0"], ["4\n0 0\n0 4\n4 0\n1 1", "24"], ["5\n0 0\n0 4\n4 0\n1 1\n1 2", "96"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2021"], "title": "[USACO21OPEN] Permutation G", "background": "", "description": "Bessie 在二维平面上有 $N$ 个最爱的不同的点，其中任意三点均不共线。对于每一个 $1\\le i\\le N$，第 $i$ 个点可以用两个整数 $x_i$ 和 $y_i$ 表示。\n\nBessie 按如下方式在这些点之间画一些线段：\n\n- 1. 她选择这 $N$ 个点的某个排列 $p_1,p_2,\\dots,p_N$ 。\n- 2. 她在点 $p_1$ 和 $p_2$ 、$p_2$ 和 $p_3$、$p_3$ 和 $p_1$ 之间画上线段。\n- 3. 然后依次对于从 $4$ 到 $N$ 的每个整数 $i$，对于所有 $j<i$，她从 $p_i$ 到 $p_j$ 画上一条线段，只要这条线段不与任何已经画上的线段相交（端点位置相交除外）。\n\nBessie 注意到对于每一个 $i$ ，她都画上了恰好三条新的线段。计算 Bessie 在第 $1$ 步可以选择的满足上述性质的排列的数量，结果对 $10^9+7$ 取模。 ", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行，每行包含两个空格分隔的整数 $x_i$ 和 $y_i$。 ", "outputFormat": "输出一行一个整数表示方案数对 $10^9+7$ 取模后的结果。", "hint": "#### 样例一解释\n\n没有排列满足该性质\n\n#### 样例二解释\n\n所有排列均满足该性质\n\n#### 样例解释三\n\n一个满足该性质的排列为 $(0,0),(0,4),(4,0),(1,2),(1,1)$ 。对于这个排列，\n\n- 首先，她在 $(0,0),(0,4)$ 和 $(4,0)$ 两两之间画上线段。\n- 然后她从 $(1,2)$ 向 $(0,0)$ ，$(0,4)$ 和 $(4,0)$ 画上线段。\n- 最后，她从 $(1,1)$ 向 $(1,2)$ ，$(4,0)$ 和 $(0,0)$ 画上线段。 \n\n![](http://usaco.org/current/data/fig_permutation_gold_open21.png)\n\n### 数据范围与约定\n\n$3\\le N \\le 40$，$0\\le x_i,y_i \\le 10^4$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21OPEN] Permutation G", "background": "", "description": "Bessie 在二维平面上有 $N$ 个最爱的不同的点，其中任意三点均不共线。对于每一个 $1\\le i\\le N$，第 $i$ 个点可以用两个整数 $x_i$ 和 $y_i$ 表示。\n\nBessie 按如下方式在这些点之间画一些线段：\n\n- 1. 她选择这 $N$ 个点的某个排列 $p_1,p_2,\\dots,p_N$ 。\n- 2. 她在点 $p_1$ 和 $p_2$ 、$p_2$ 和 $p_3$、$p_3$ 和 $p_1$ 之间画上线段。\n- 3. 然后依次对于从 $4$ 到 $N$ 的每个整数 $i$，对于所有 $j<i$，她从 $p_i$ 到 $p_j$ 画上一条线段，只要这条线段不与任何已经画上的线段相交（端点位置相交除外）。\n\nBessie 注意到对于每一个 $i$ ，她都画上了恰好三条新的线段。计算 Bessie 在第 $1$ 步可以选择的满足上述性质的排列的数量，结果对 $10^9+7$ 取模。 ", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行，每行包含两个空格分隔的整数 $x_i$ 和 $y_i$。 ", "outputFormat": "输出一行一个整数表示方案数对 $10^9+7$ 取模后的结果。", "hint": "#### 样例一解释\n\n没有排列满足该性质\n\n#### 样例二解释\n\n所有排列均满足该性质\n\n#### 样例解释三\n\n一个满足该性质的排列为 $(0,0),(0,4),(4,0),(1,2),(1,1)$ 。对于这个排列，\n\n- 首先，她在 $(0,0),(0,4)$ 和 $(4,0)$ 两两之间画上线段。\n- 然后她从 $(1,2)$ 向 $(0,0)$ ，$(0,4)$ 和 $(4,0)$ 画上线段。\n- 最后，她从 $(1,1)$ 向 $(1,2)$ ，$(4,0)$ 和 $(0,0)$ 画上线段。 \n\n![](http://usaco.org/current/data/fig_permutation_gold_open21.png)\n\n### 数据范围与约定\n\n$3\\le N \\le 40$，$0\\le x_i,y_i \\le 10^4$", "locale": "zh-CN"}}}
{"pid": "P7530", "type": "P", "difficulty": 6, "samples": [["7\n1 2 3 4 3 2 5", "9"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "USACO", "2021", "扫描线"], "title": "[USACO21OPEN] United Cows of Farmer John P", "background": "", "description": "农夫约翰合牛国（The United Cows of Farmer John，UCFJ）将要选派一个代表队参加国际牛学奥林匹克（International bOvine olympIad，IOI）。\n\n有 $N$ 头奶牛参加了代表队选拔。她们站成一行，奶牛 $i$ 的品种为 $b_i$。\n\n代表队将会由包含至少三头奶牛的连续区间组成——也就是说，对于满足 $1\\le l<r\\le N$ 且 $r−l\\ge 2$ 的奶牛 \n$l\\dots r$。选定区间内的三头奶牛将会被指定为领队。出于法律原因，最边上的两头奶牛必须是领队。此外，为了避免种内冲突，每一名领队都必须与代表队的其他成员（包括领队）品种不同。\n\n请帮助 UCFJ 求出（由于纳税原因）他们可以选派参加 IOI 的代表队的方法数。如果两个代表队拥有不同的成员或不同的领队，则被认为是不同的。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个整数 $b_1,b_2,\\dots,b_N$，均在范围 $[1,N]$ 之间。", "outputFormat": "输出一行一个整数表示可能的代表队的数量。", "hint": "#### 样例解释\n\n每一代表队对应以下的一组领队：\n\n$$(1,2,3),(1,2,4),(1,3,4),(1,4,7),(2,3,4),(4,5,6),(4,5,7),(4,6,7),(5,6,7).$$\n\n#### 数据范围与约定\n\n$1\\le N\\le 2\\times 10^5$", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21OPEN] United Cows of Farmer John P", "background": "", "description": "农夫约翰合牛国（The United Cows of Farmer John，UCFJ）将要选派一个代表队参加国际牛学奥林匹克（International bOvine olympIad，IOI）。\n\n有 $N$ 头奶牛参加了代表队选拔。她们站成一行，奶牛 $i$ 的品种为 $b_i$。\n\n代表队将会由包含至少三头奶牛的连续区间组成——也就是说，对于满足 $1\\le l<r\\le N$ 且 $r−l\\ge 2$ 的奶牛 \n$l\\dots r$。选定区间内的三头奶牛将会被指定为领队。出于法律原因，最边上的两头奶牛必须是领队。此外，为了避免种内冲突，每一名领队都必须与代表队的其他成员（包括领队）品种不同。\n\n请帮助 UCFJ 求出（由于纳税原因）他们可以选派参加 IOI 的代表队的方法数。如果两个代表队拥有不同的成员或不同的领队，则被认为是不同的。 ", "inputFormat": "输入的第一行包含 $N$。\n\n第二行包含 $N$ 个整数 $b_1,b_2,\\dots,b_N$，均在范围 $[1,N]$ 之间。", "outputFormat": "输出一行一个整数表示可能的代表队的数量。", "hint": "#### 样例解释\n\n每一代表队对应以下的一组领队：\n\n$$(1,2,3),(1,2,4),(1,3,4),(1,4,7),(2,3,4),(4,5,6),(4,5,7),(4,6,7),(5,6,7).$$\n\n#### 数据范围与约定\n\n$1\\le N\\le 2\\times 10^5$", "locale": "zh-CN"}}}
{"pid": "P7531", "type": "P", "difficulty": 7, "samples": [["2\n\n8 0\nSS....RR\n00100000\n00100000\n00011000\n00000100\n00000100\n00000011\n00000000\n00000000\n\n13 0\nSSS.RRRSS.RR.\n0001000000000\n0001000000000\n0001000000000\n0000111000000\n0000000000000\n0000000000000\n0000000000000\n0000000001000\n0000000001000\n0000000000110\n0000000000000\n0000000000000\n0000000000000", "4\n12"], ["2\n\n5 1\nSS.RR\n00101\n00100\n10010\n00000\n00000\n\n6 2\nS....R\n001000\n000100\n010001\n000010\n001000\n000000", "3\n1"], ["5\n\n3 2\nRS.\n010\n101\n100\n\n4 2\n.R.S\n0100\n0010\n1000\n0100\n\n4 2\n.SR.\n0000\n0011\n0100\n0010\n\n5 2\n.SSRR\n01000\n10101\n01010\n00000\n00000\n\n6 2\nSS..RR\n001010\n000010\n000010\n000010\n100101\n000000", "2\n1\n2\n6\n24"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["USACO", "2021", "矩阵树定理", "欧拉回路"], "title": "[USACO21OPEN] Routing Schemes P", "background": "", "description": "考虑一个由 $N$ 个编号为 $1\\dots N$ 的结点组成的网络。每个结点被指定为发送者（sender）、接收者（receiver）或两者均不是。发送者的数量 $S$ 与接收者的数量相等（$S≥1$）。\n\n这一网络中结点间的连接关系可以用一系列形式为 $i→j$\n的有向边表示，代表由结点 $i$ 可以路由到结点 $j$。有趣的是，所有的边满足性质 $i<j$，除了 $K$ 条满足 $i>j$（$0≤K≤2$）。网络中没有自环（$i→i$ 形式的边）。\n\n一个「**路由方案**」的描述由 $S$ 条从发送者到接收者的有向路径组成，其中没有两条路径有相同的起止点。也就是说，这些路径将不同的发送者连接到不同的接收者。一条从发送者 $s$ 到接收者 $r$ 的路径可以用一个结点序列\n$s=v_0→v_1→v_2→⋯→v_e=r$ 表示，其中对于所有 $0≤i<e$，有向边 $v_i→v_{i+1}$ 均存在。一个结点可能在同一条路径中出现多于一次。\n\n计算使得每条有向边恰好使用一次的路由方案数量。由于答案可能非常大，输出答案对 $10^9+7$ 取模的结果。输入保证存在至少一种路由方案符合条件。\n\n每个输入包含 $T$ 组需要独立求解的测试用例。", "inputFormat": "输入的第一行包含 $T$，为测试用例的数量。\n\n每个测试用例的第一行包含整数 $N$ 和 $K$。注意 $S$ 并不会在输入中明确给出。\n\n每个测试用例的第二行包含一个长为 $N$ 的字符串。如果第 $i$ 个结点是发送者，则字符串的第 $i$ 个字符为 $\\texttt{S}$，如果第 $i$ 个结点是接收者则为 $\\texttt{R}$，如果第 $i$ 个结点两者均不是则为 $\\texttt{.}$。字符串中 $\\texttt{R}$ 的数量等于 $\\texttt{S}$ 的数量，且至少有一个 $\\texttt{S}$。\n\n每个测试用例的以下 $N$ 行每行包含一个长为 $N$ 的 01 字符串。如果从结点 $i$ 到结点 $j$ 存在一条有向边，则第 $i$ 行的第 $j$ 个字符为 $1$，否则为 $0$。由于不存在自环，矩阵的主对角线仅包含 $0$。除此之外，在主对角线以下恰好有 $K$ 个 $1$ 。\n\n为提高可读性，相邻的测试用例之间用一个空行隔开。 ", "outputFormat": "对每个测试用例，输出每条边使用恰好一次的路由方案的数量，结果对 $10^9+7$ 取模。输入保证对每个测试用例存在至少一种合法的路由方案。 ", "hint": "#### 样例一解释\n\n对于第一个测试用例，网络中的边为 $1→3,2→3,3→4,3→5,4→6,5→6,6→7,6→8$ 。\n\n有四种可能的路由方案：\n\n- $1→3→4→6→7,2→3→5→6→8$\n- $1→3→5→6→7,2→3→4→6→8$\n- $1→3→4→6→8,2→3→5→6→7$\n- $1→3→5→6→8,2→3→4→6→7$\n\n对于第二个测试用例，网络中的边为 $1→4,2→4,3→4,4→5,4→6,4→7,8→10,9→10,10→11,11→12$。\n\n一种可能的路由方案由如下路径组成：\n\n- $1→4→5$\n- $2→4→7$\n- $3→4→6$\n- $8→10→12$\n- $9→10→11$\n\n总的来说，发送者 ${1,2,3}$\n可以路由到接收者 ${5,6,7}$ 的某个排列，发送者 ${8,9}$ 可以路由到接收者 ${11,12}$ 的某个排列，得出答案为 $6\\times 2=12$。 \n\n#### 样例二解释\n\n对于第一个测试用例，网络中的边为 $1→3,1→5,2→3,3→1,3→4$ 。\n\n有三种可能的路由方案：\n\n- $1→3→1→5,2→3→4$\n- $1→3→4,2→3→1→5$\n- $1→5,2→3→1→3→4$\n\n对于第二个测试用例，网络中的边为 $1→3,2→4,3→2,3→6,4→5,5→3$。\n\n只有一种可能的路由方案：$1→3→2→4→5→3→6$\n。 \n\n#### 数据范围和约定\n\n$2\\le N\\le 100$，$1\\le T\\le 20$ , $\\sum N^2\\le 2\\times 10^4$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21OPEN] Routing Schemes P", "background": "", "description": "考虑一个由 $N$ 个编号为 $1\\dots N$ 的结点组成的网络。每个结点被指定为发送者（sender）、接收者（receiver）或两者均不是。发送者的数量 $S$ 与接收者的数量相等（$S≥1$）。\n\n这一网络中结点间的连接关系可以用一系列形式为 $i→j$\n的有向边表示，代表由结点 $i$ 可以路由到结点 $j$。有趣的是，所有的边满足性质 $i<j$，除了 $K$ 条满足 $i>j$（$0≤K≤2$）。网络中没有自环（$i→i$ 形式的边）。\n\n一个「**路由方案**」的描述由 $S$ 条从发送者到接收者的有向路径组成，其中没有两条路径有相同的起止点。也就是说，这些路径将不同的发送者连接到不同的接收者。一条从发送者 $s$ 到接收者 $r$ 的路径可以用一个结点序列\n$s=v_0→v_1→v_2→⋯→v_e=r$ 表示，其中对于所有 $0≤i<e$，有向边 $v_i→v_{i+1}$ 均存在。一个结点可能在同一条路径中出现多于一次。\n\n计算使得每条有向边恰好使用一次的路由方案数量。由于答案可能非常大，输出答案对 $10^9+7$ 取模的结果。输入保证存在至少一种路由方案符合条件。\n\n每个输入包含 $T$ 组需要独立求解的测试用例。", "inputFormat": "输入的第一行包含 $T$，为测试用例的数量。\n\n每个测试用例的第一行包含整数 $N$ 和 $K$。注意 $S$ 并不会在输入中明确给出。\n\n每个测试用例的第二行包含一个长为 $N$ 的字符串。如果第 $i$ 个结点是发送者，则字符串的第 $i$ 个字符为 $\\texttt{S}$，如果第 $i$ 个结点是接收者则为 $\\texttt{R}$，如果第 $i$ 个结点两者均不是则为 $\\texttt{.}$。字符串中 $\\texttt{R}$ 的数量等于 $\\texttt{S}$ 的数量，且至少有一个 $\\texttt{S}$。\n\n每个测试用例的以下 $N$ 行每行包含一个长为 $N$ 的 01 字符串。如果从结点 $i$ 到结点 $j$ 存在一条有向边，则第 $i$ 行的第 $j$ 个字符为 $1$，否则为 $0$。由于不存在自环，矩阵的主对角线仅包含 $0$。除此之外，在主对角线以下恰好有 $K$ 个 $1$ 。\n\n为提高可读性，相邻的测试用例之间用一个空行隔开。 ", "outputFormat": "对每个测试用例，输出每条边使用恰好一次的路由方案的数量，结果对 $10^9+7$ 取模。输入保证对每个测试用例存在至少一种合法的路由方案。 ", "hint": "#### 样例一解释\n\n对于第一个测试用例，网络中的边为 $1→3,2→3,3→4,3→5,4→6,5→6,6→7,6→8$ 。\n\n有四种可能的路由方案：\n\n- $1→3→4→6→7,2→3→5→6→8$\n- $1→3→5→6→7,2→3→4→6→8$\n- $1→3→4→6→8,2→3→5→6→7$\n- $1→3→5→6→8,2→3→4→6→7$\n\n对于第二个测试用例，网络中的边为 $1→4,2→4,3→4,4→5,4→6,4→7,8→10,9→10,10→11,11→12$。\n\n一种可能的路由方案由如下路径组成：\n\n- $1→4→5$\n- $2→4→7$\n- $3→4→6$\n- $8→10→12$\n- $9→10→11$\n\n总的来说，发送者 ${1,2,3}$\n可以路由到接收者 ${5,6,7}$ 的某个排列，发送者 ${8,9}$ 可以路由到接收者 ${11,12}$ 的某个排列，得出答案为 $6\\times 2=12$。 \n\n#### 样例二解释\n\n对于第一个测试用例，网络中的边为 $1→3,1→5,2→3,3→1,3→4$ 。\n\n有三种可能的路由方案：\n\n- $1→3→1→5,2→3→4$\n- $1→3→4,2→3→1→5$\n- $1→5,2→3→1→3→4$\n\n对于第二个测试用例，网络中的边为 $1→3,2→4,3→2,3→6,4→5,5→3$。\n\n只有一种可能的路由方案：$1→3→2→4→5→3→6$\n。 \n\n#### 数据范围和约定\n\n$2\\le N\\le 100$，$1\\le T\\le 20$ , $\\sum N^2\\le 2\\times 10^4$。", "locale": "zh-CN"}}}
{"pid": "P7532", "type": "P", "difficulty": 6, "samples": [["2\nGG\nGG", "13"], ["4\nGGGG\nGGGG\nGG.G\nGGGG", "642"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "USACO", "2021", "前缀和"], "title": "[USACO21OPEN] Balanced Subsets  P", "background": "", "description": "Farmer John 的草地可以被看作是由正方形方格组成的巨大的二维方阵（想象一个巨大的棋盘），对于每一个 $1≤i≤N$、$1≤j≤N$，方格可以用有序对 $(i,j)$ 表示。某些方格中含有草。\n\n方格的一个非空子集被称为是「平衡的」，如果以下条件成立：\n\n- 1. 所有子集中的方格均含有草。\n- 2. 子集是四连通的。换句话说，从子集中的任一方格到另一方格均存在一条路径使得路径中的相邻方格均水平或竖直方向上相邻。\n- 3. 如果方格 $(x_1,y)$ 和 $(x_2,y)$（$x_1≤x_2$）存在于子集中，那么所有满足 $x_1≤x≤x_2$ 的方格 $(x,y)$ 也存在于子集中。\n- 4. 如果方格 $(x,y_1)$ 和 $(x,y_2)$（$y_1≤y_2$）存在于子集中，那么所有满足 $y_1≤y≤y_2$ 的方格 $(x,y)$ 也存在于子集中。\n\n计算平衡的子集数量模 $10^9+7$ 的结果。", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行每行包含一个长为 $N$ 的字符串。如果方格 $(i,j)$ 中有草，则第 $i$ 行的第 $j$ 个字符为 $\\texttt{G}$，否则为$\\texttt{.}$。 ", "outputFormat": "输出平衡的子集数量模 $10^9+7$ 的结果。 ", "hint": "#### 样例一解释\n\n对于这个测试用例，所有的四连通子集均是平衡的。\n\n```\nG.  .G  ..  ..  GG  .G  ..  G.  GG  .G  G.  GG  GG\n.., .., G., .G, .., .G, GG, G., G., GG, GG, .G, GG\n```\n\n#### 样例二解释\n\n以下是一个符合第二个条件（四连通）但不符合第三个条件的子集的例子： \n\n```\nGG..\n.G..\nGG..\n....\n```\n\n#### 数据范围与约定\n\n$1\\le N \\le 150$ 。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[USACO21OPEN] Balanced Subsets  P", "background": "", "description": "Farmer John 的草地可以被看作是由正方形方格组成的巨大的二维方阵（想象一个巨大的棋盘），对于每一个 $1≤i≤N$、$1≤j≤N$，方格可以用有序对 $(i,j)$ 表示。某些方格中含有草。\n\n方格的一个非空子集被称为是「平衡的」，如果以下条件成立：\n\n- 1. 所有子集中的方格均含有草。\n- 2. 子集是四连通的。换句话说，从子集中的任一方格到另一方格均存在一条路径使得路径中的相邻方格均水平或竖直方向上相邻。\n- 3. 如果方格 $(x_1,y)$ 和 $(x_2,y)$（$x_1≤x_2$）存在于子集中，那么所有满足 $x_1≤x≤x_2$ 的方格 $(x,y)$ 也存在于子集中。\n- 4. 如果方格 $(x,y_1)$ 和 $(x,y_2)$（$y_1≤y_2$）存在于子集中，那么所有满足 $y_1≤y≤y_2$ 的方格 $(x,y)$ 也存在于子集中。\n\n计算平衡的子集数量模 $10^9+7$ 的结果。", "inputFormat": "输入的第一行包含 $N$。\n\n以下 $N$ 行每行包含一个长为 $N$ 的字符串。如果方格 $(i,j)$ 中有草，则第 $i$ 行的第 $j$ 个字符为 $\\texttt{G}$，否则为$\\texttt{.}$。 ", "outputFormat": "输出平衡的子集数量模 $10^9+7$ 的结果。 ", "hint": "#### 样例一解释\n\n对于这个测试用例，所有的四连通子集均是平衡的。\n\n```\nG.  .G  ..  ..  GG  .G  ..  G.  GG  .G  G.  GG  GG\n.., .., G., .G, .., .G, GG, G., G., GG, GG, .G, GG\n```\n\n#### 样例二解释\n\n以下是一个符合第二个条件（四连通）但不符合第三个条件的子集的例子： \n\n```\nGG..\n.G..\nGG..\n....\n```\n\n#### 数据范围与约定\n\n$1\\le N \\le 150$ 。", "locale": "zh-CN"}}}
{"pid": "P7533", "type": "P", "difficulty": 1, "samples": [["1\nAKXAKJXXXAXAQ", "25"], ["4\nXXXAXXXXXXJXX\nKXAXXXQJAXXXX\nAQKQXXXKXXKQX\nJXXXXXJXXXXXX", "40"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["2016", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #4] Bridž", "background": "", "description": "Mirko 发明了一种卡牌游戏。卡牌只包含 $\\text{A, K, Q, J}$ 和 $\\text{X}$。它们的分值分别为 $4,3,2,1,0$。\n\n给定 $N$ 个包含 $13$ 张卡牌的卡组，求这 $N$ 个卡组中所有卡牌分值的总和。", "inputFormat": "第一行，一个整数 $N$。\n\n接下来的 $N$ 行，每行一个长度为 $13$ 的字符串 $K_i$。字符串只包含字符 $\\text{A, K, Q, J, X}$。", "outputFormat": "输出所有卡牌分值的总和。", "hint": "**【样例 1 解释】**\n\n|卡牌类型|卡牌数量|每张卡牌分值|累计分值|\n| :----------: | :----------: | :----------: | :----------: |\n|$\\text{A}$|$4$|$4$|$4 \\times 4=16$|\n|$\\text{K}$|$2$|$3$|$2 \\times 3=6$|\n|$\\text{Q}$|$1$|$2$|$1 \\times 2=2$|\n|$\\text{J}$|$1$|$1$|$1 \\times 1=1$|\n|$\\text{X}$|$5$|$0$|$5 \\times 0=0$|\n\n因此分值总和为 $16+6+2+1+0=25$。\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^4$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T1 Bridž_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #4] Bridž", "background": "", "description": "Mirko 发明了一种卡牌游戏。卡牌只包含 $\\text{A, K, Q, J}$ 和 $\\text{X}$。它们的分值分别为 $4,3,2,1,0$。\n\n给定 $N$ 个包含 $13$ 张卡牌的卡组，求这 $N$ 个卡组中所有卡牌分值的总和。", "inputFormat": "第一行，一个整数 $N$。\n\n接下来的 $N$ 行，每行一个长度为 $13$ 的字符串 $K_i$。字符串只包含字符 $\\text{A, K, Q, J, X}$。", "outputFormat": "输出所有卡牌分值的总和。", "hint": "**【样例 1 解释】**\n\n|卡牌类型|卡牌数量|每张卡牌分值|累计分值|\n| :----------: | :----------: | :----------: | :----------: |\n|$\\text{A}$|$4$|$4$|$4 \\times 4=16$|\n|$\\text{K}$|$2$|$3$|$2 \\times 3=6$|\n|$\\text{Q}$|$1$|$2$|$1 \\times 2=2$|\n|$\\text{J}$|$1$|$1$|$1 \\times 1=1$|\n|$\\text{X}$|$5$|$0$|$5 \\times 0=0$|\n\n因此分值总和为 $16+6+2+1+0=25$。\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 10^4$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T1 Bridž_。**\n\n**本题分值按 COCI 原题设置，满分 $50$。**", "locale": "zh-CN"}}}
{"pid": "P7534", "type": "P", "difficulty": 2, "samples": [["4\nZAGREB\nSISAK\nZADAR\nZABOK\nZA", "****B*D*\n*G******\n********\n********"], ["4\nSPLIT\nVINKOVCI\nNOVSKA\nRIJEKA\nVINKO", "********\n********\n********\nV*******"], ["4\nAAAABCD\nAAAABCA\nAAAACDE\nAAAAAAA\nAAAA", "***ABC**\n********\n********\n********"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["模拟", "2016", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #4] Kartomat", "background": "", "description": "在火车站使用自动售票机时，可以通过其屏幕上的键盘搜寻目的地城市。键盘可抽象为一个 $4 \\times 8$ 的字符矩阵：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ey39vw2o.png)\n\n目前，屏幕上显示着 $N$ 个字符串，表示城市的名称。为了搜寻目的地城市，你依次点击了若干个字母，作为初始字符串。\n\n输入初始字符串之后，屏幕上只会留下以该字符串开头的城市（即留下的城市有一个前缀为初始字符串）。同时，如果通过初始字符串和一个字母不能搜寻到任何一个城市，那么一个 $\\texttt *$ 字符则会代替屏幕上的这个字母。\n\n求在输入初始字符串之后，键盘的最终情况。", "inputFormat": "第一行，一个整数 $N$，表示屏幕上城市的数量。\n\n接下来的 $N$ 行，每行一个只由大写字母组成的字符串，表示一个城市的名称。字符串长度不超过 $100$。\n\n最后一行，输入初始字符串。初始字符串不会与任何一个城市完全相同，且必定是至少一个城市的前缀。", "outputFormat": "输出一个 $4 \\times 8$ 的字符矩阵，表示键盘的最终情况。", "hint": "**【样例 1 解释】**\n\n在输入初始字符串 $\\texttt{ZA}$ 之后，键盘上剩下的字母只有 $\\texttt{B,D,G}$。\n\n|初始字符串|剩余字母|新字符串|可搜寻城市|\n| :----------: | :----------: | :----------: | :----------: |\n|$\\texttt{ZA}$|$\\texttt B$|$\\texttt{ZAB}$|$\\texttt{ZABOK}$|\n|$\\texttt{ZA}$|$\\texttt D$|$\\texttt{ZAD}$|$\\texttt{ZADAR}$|\n|$\\texttt{ZA}$|$\\texttt G$|$\\texttt{ZAG}$|$\\texttt{ZAGREB}$|\n\n而初始字符串与其它字母所构成的新字符串不能搜寻到任何一个其它城市，因此它们将会从屏幕上消失，变为 $\\texttt *$ 字符。\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 50$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T2 Kartomat_。**\n\n**本题分值按 COCI 原题设置，满分 $80$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #4] Kartomat", "background": "", "description": "在火车站使用自动售票机时，可以通过其屏幕上的键盘搜寻目的地城市。键盘可抽象为一个 $4 \\times 8$ 的字符矩阵：\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ey39vw2o.png)\n\n目前，屏幕上显示着 $N$ 个字符串，表示城市的名称。为了搜寻目的地城市，你依次点击了若干个字母，作为初始字符串。\n\n输入初始字符串之后，屏幕上只会留下以该字符串开头的城市（即留下的城市有一个前缀为初始字符串）。同时，如果通过初始字符串和一个字母不能搜寻到任何一个城市，那么一个 $\\texttt *$ 字符则会代替屏幕上的这个字母。\n\n求在输入初始字符串之后，键盘的最终情况。", "inputFormat": "第一行，一个整数 $N$，表示屏幕上城市的数量。\n\n接下来的 $N$ 行，每行一个只由大写字母组成的字符串，表示一个城市的名称。字符串长度不超过 $100$。\n\n最后一行，输入初始字符串。初始字符串不会与任何一个城市完全相同，且必定是至少一个城市的前缀。", "outputFormat": "输出一个 $4 \\times 8$ 的字符矩阵，表示键盘的最终情况。", "hint": "**【样例 1 解释】**\n\n在输入初始字符串 $\\texttt{ZA}$ 之后，键盘上剩下的字母只有 $\\texttt{B,D,G}$。\n\n|初始字符串|剩余字母|新字符串|可搜寻城市|\n| :----------: | :----------: | :----------: | :----------: |\n|$\\texttt{ZA}$|$\\texttt B$|$\\texttt{ZAB}$|$\\texttt{ZABOK}$|\n|$\\texttt{ZA}$|$\\texttt D$|$\\texttt{ZAD}$|$\\texttt{ZADAR}$|\n|$\\texttt{ZA}$|$\\texttt G$|$\\texttt{ZAG}$|$\\texttt{ZAGREB}$|\n\n而初始字符串与其它字母所构成的新字符串不能搜寻到任何一个其它城市，因此它们将会从屏幕上消失，变为 $\\texttt *$ 字符。\n\n**【数据规模与约定】**\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 50$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T2 Kartomat_。**\n\n**本题分值按 COCI 原题设置，满分 $80$。**", "locale": "zh-CN"}}}
{"pid": "P7535", "type": "P", "difficulty": 4, "samples": [["4\n2\n3\n1\n6", "6"], ["5\n2\n3\n5\n8\n13", "18"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000, 512000]}, "tags": ["动态规划 DP", "2016", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #4] Kas", "background": "", "description": "Kile 和 Pogi 在路上捡到了 $N$ 张钞票。他们将分别取走若干张钞票，使得每人所得的总金额相同。同时要尽可能保证分得的总金额最大。\n\n接着，他们会带着剩下的钞票前往赌场。由于他们的运气很好，因此他们将剩余金额作为赌注后，会得到双倍的金额。然后，他们会将得到的金额再次平分，并加入每个人的总金额中。\n\n求每个人能够分得的总金额是多少。", "inputFormat": "第一行，一个整数 $N$。\n\n接下来的 $N$ 行，每行一个正整数 $c_i$，表示第 $i$ 张钞票的面额。保证 $N$ 张钞票的总金额不超过 $10^5$。", "outputFormat": "输出每个人能够分得的总金额。", "hint": "**【样例 1 解释】**\n\nKile 可以选择取走面额分别为 $2,3,1$ 的钞票，而 Pogi 可以取走面额为 $6$ 的钞票。由于没有剩余钞票，因此每人所得总金额为 $6$。\n\n**【样例 2 解释】**\n\nKile 可以选择取走面额分别为 $5,8$ 的钞票，而 Pogi 可以取走面额为 $13$ 的钞票。剩下的钞票面额分别为 $2,3$，因此在前往赌场之后，每人所得总金额为 $13+2+3=18$。\n\n**【数据规模与约定】**\n\n对于 $50\\%$ 的数据，$N \\le 13$。\n\n对于 $70\\%$ 的数据，$N \\le 50$，$\\sum c_i \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 500$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T3 Kas_。**\n\n**本题分值按 COCI 原题设置，满分 $100$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #4] Kas", "background": "", "description": "Kile 和 Pogi 在路上捡到了 $N$ 张钞票。他们将分别取走若干张钞票，使得每人所得的总金额相同。同时要尽可能保证分得的总金额最大。\n\n接着，他们会带着剩下的钞票前往赌场。由于他们的运气很好，因此他们将剩余金额作为赌注后，会得到双倍的金额。然后，他们会将得到的金额再次平分，并加入每个人的总金额中。\n\n求每个人能够分得的总金额是多少。", "inputFormat": "第一行，一个整数 $N$。\n\n接下来的 $N$ 行，每行一个正整数 $c_i$，表示第 $i$ 张钞票的面额。保证 $N$ 张钞票的总金额不超过 $10^5$。", "outputFormat": "输出每个人能够分得的总金额。", "hint": "**【样例 1 解释】**\n\nKile 可以选择取走面额分别为 $2,3,1$ 的钞票，而 Pogi 可以取走面额为 $6$ 的钞票。由于没有剩余钞票，因此每人所得总金额为 $6$。\n\n**【样例 2 解释】**\n\nKile 可以选择取走面额分别为 $5,8$ 的钞票，而 Pogi 可以取走面额为 $13$ 的钞票。剩下的钞票面额分别为 $2,3$，因此在前往赌场之后，每人所得总金额为 $13+2+3=18$。\n\n**【数据规模与约定】**\n\n对于 $50\\%$ 的数据，$N \\le 13$。\n\n对于 $70\\%$ 的数据，$N \\le 50$，$\\sum c_i \\le 1000$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 500$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T3 Kas_。**\n\n**本题分值按 COCI 原题设置，满分 $100$。**", "locale": "zh-CN"}}}
{"pid": "P7536", "type": "P", "difficulty": 6, "samples": [["4\n1 2\n1\n1.4\n1.5\n2", "0.5\n0.7"], ["5\n10 25\n12\n13.5\n18\n20.25\n24", "6.0\n6.75"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["搜索", "贪心", "2016", "Special Judge", "其它技巧", "随机化", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #4] Rekonstruiraj", "background": "", "description": "给定一个闭区间 $[A,B]$ 和一个空的初始集合。每次操作，选定一个实数 $x$，并将 $0,x,2x,3x,4x,\\cdots$ 中所有在闭区间 $[A,B]$ 内的实数加入集合（集合中重复的数将只保留一个）。\n\n现在给定最终集合内的所有实数，求一种方案，使得在操作次数最少的情况下，初始集合在操作之后与输入集合相同。", "inputFormat": "第一行，一个整数 $K$，表示最终集合中的实数个数。\n\n第二行，两个整数 $A,B$，表示将加入闭区间 $[A,B]$ 内的实数。\n\n接下来的 $K$ 行，每行一个小数点后不超过 $5$ 位的实数。保证这 $K$ 个实数单调递增。", "outputFormat": "输出 $N$ 行，其中 $N$ 为该方案的操作次数。\n\n接下来的 $N$ 行，每行一个实数。这 $N$ 个实数依次表示 $N$ 次操作所选定的实数。输出顺序不限。\n\n如果有多种符合题意的方案，请输出操作次数最少的一种。如果有多种操作次数最小的方案，请输出任意一种。", "hint": "**【样例 1 解释】**\n\n另外一种符合题意的方案是选定实数 $0.5$ 和 $1.4$。\n\n**【数据规模与约定】**\n\n对于 $50\\%$ 的数据，所有输入的整数均为自然数。\n\n对于 $100\\%$ 的数据，$1 \\le K \\le 50$，$1 \\le A \\le B \\le 10^6$。\n\n**【提示与说明】**\n\n本题使用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/gchfnvo0)，欢迎大家 hack（发题目综合类工单）。\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T4 Rekonstruiraj_。**\n\n**本题分值按 COCI 原题设置，满分 $120$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #4] Rekonstruiraj", "background": "", "description": "给定一个闭区间 $[A,B]$ 和一个空的初始集合。每次操作，选定一个实数 $x$，并将 $0,x,2x,3x,4x,\\cdots$ 中所有在闭区间 $[A,B]$ 内的实数加入集合（集合中重复的数将只保留一个）。\n\n现在给定最终集合内的所有实数，求一种方案，使得在操作次数最少的情况下，初始集合在操作之后与输入集合相同。", "inputFormat": "第一行，一个整数 $K$，表示最终集合中的实数个数。\n\n第二行，两个整数 $A,B$，表示将加入闭区间 $[A,B]$ 内的实数。\n\n接下来的 $K$ 行，每行一个小数点后不超过 $5$ 位的实数。保证这 $K$ 个实数单调递增。", "outputFormat": "输出 $N$ 行，其中 $N$ 为该方案的操作次数。\n\n接下来的 $N$ 行，每行一个实数。这 $N$ 个实数依次表示 $N$ 次操作所选定的实数。输出顺序不限。\n\n如果有多种符合题意的方案，请输出操作次数最少的一种。如果有多种操作次数最小的方案，请输出任意一种。", "hint": "**【样例 1 解释】**\n\n另外一种符合题意的方案是选定实数 $0.5$ 和 $1.4$。\n\n**【数据规模与约定】**\n\n对于 $50\\%$ 的数据，所有输入的整数均为自然数。\n\n对于 $100\\%$ 的数据，$1 \\le K \\le 50$，$1 \\le A \\le B \\le 10^6$。\n\n**【提示与说明】**\n\n本题使用自行编写的 [Special Judge](https://www.luogu.com.cn/paste/gchfnvo0)，欢迎大家 hack（发题目综合类工单）。\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T4 Rekonstruiraj_。**\n\n**本题分值按 COCI 原题设置，满分 $120$。**", "locale": "zh-CN"}}}
{"pid": "P7537", "type": "P", "difficulty": 5, "samples": [["4\nhoni\ntoni\noni\novi", "3"], ["5\nask\npsk\nkrafna\nsk\nk", "4"], ["5\npas\nkompas\nstas\ns\nnemarime", "1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "树形 DP", "字典树 Trie", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #4] Rima", "background": null, "description": "规定字符串 $A,B$ 的最长公共后缀的长度为 $\\text{LCS}(A,B)$。\n\n当 $\\text{LCS}(A,B) \\ge \\max(|A|,|B|)-1$ 时，我们认为 $A,B$ 两个字符串押韵。\n\n给定 $N$ 个字符串，要求从中组合出一个长度最长的字符串序列（序列长度为该序列所包含字符串的数量），使得序列中相邻两个字符串押韵。", "inputFormat": "第一行，一个整数 $N$。\n\n接下来的 $N$ 行，每行一个字符串。保证所有字符串互不相同，由小写字母组成，且总长度不超过 $3 \\times 10^6$。", "outputFormat": "输出字符串序列长度的最大值。", "hint": "**【样例 2 解释】**\n\n字符串序列 $\\texttt{ask-psk-sk-k}$ 长度最大，为 $4$。\n\n**【样例 3 解释】**\n\n没有任何两个字符串押韵，因此任何一个字符串都可以单独组成一个序列，答案为 $1$。\n\n**【数据规模与约定】**\n\n对于 $30\\%$ 的数据，$N \\le 18$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10^5$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T5 Rima_。**\n\n**本题分值按 COCI 原题设置，满分 $140$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #4] Rima", "background": null, "description": "规定字符串 $A,B$ 的最长公共后缀的长度为 $\\text{LCS}(A,B)$。\n\n当 $\\text{LCS}(A,B) \\ge \\max(|A|,|B|)-1$ 时，我们认为 $A,B$ 两个字符串押韵。\n\n给定 $N$ 个字符串，要求从中组合出一个长度最长的字符串序列（序列长度为该序列所包含字符串的数量），使得序列中相邻两个字符串押韵。", "inputFormat": "第一行，一个整数 $N$。\n\n接下来的 $N$ 行，每行一个字符串。保证所有字符串互不相同，由小写字母组成，且总长度不超过 $3 \\times 10^6$。", "outputFormat": "输出字符串序列长度的最大值。", "hint": "**【样例 2 解释】**\n\n字符串序列 $\\texttt{ask-psk-sk-k}$ 长度最大，为 $4$。\n\n**【样例 3 解释】**\n\n没有任何两个字符串押韵，因此任何一个字符串都可以单独组成一个序列，答案为 $1$。\n\n**【数据规模与约定】**\n\n对于 $30\\%$ 的数据，$N \\le 18$。\n\n对于 $100\\%$ 的数据，$1 \\le N \\le 5 \\times 10^5$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T5 Rima_。**\n\n**本题分值按 COCI 原题设置，满分 $140$。**", "locale": "zh-CN"}}}
{"pid": "P7538", "type": "P", "difficulty": 5, "samples": [["1 2 2\nab", "5/16"], ["2 4 3\nhoni\nhsin", "19/512"], ["3 3 10\nban\nana\nnab", "2/27"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [256000, 256000, 256000, 256000, 256000, 256000, 256000, 256000]}, "tags": ["2016", "COCI（克罗地亚）"], "title": "[COCI 2016/2017 #4] Osmosmjerka", "background": "", "description": "给定一个 $M \\times N$ 的字母矩阵，以下面的为例：\n\n```plain\nhoni\nhsin\n```\n\n接着我们将其进行无限延伸，得到：\n\n```plain\n...honihonihonihoni...\n...hsinhsinhsinhsin...\n...honihonihonihoni...\n...hsinhsinhsinhsin...\n```\n\n在无限延伸后得到的新矩阵后，我们随机选取其中一个区域的字母，然后再沿着一定的方向连续读取 $K$ 个字母。在独立完成上述操作两次之后，我们会得到两个长度为 $K$ 的字符串。求两个字符串相同的概率。", "inputFormat": "第一行，三个整数 $N,M,K$。\n\n接下来的 $M$ 行，每行 $N$ 个小写字母。保证每行至少有两个不同的字母。", "outputFormat": "以最简分数 $\\texttt{p/q}$ 的形式输出最终概率。", "hint": "**【数据规模与约定】**\n\n对于其中 $100$ 分的数据，$M=N$。\n\n对于 $100\\%$ 的数据，$1 \\le M,N \\le 500$，$2 \\le K \\le 10^9$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T6 Osmosmjerka_。**\n\n**本题分值按 COCI 原题设置，满分 $160$。**", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2016/2017 #4] Osmosmjerka", "background": "", "description": "给定一个 $M \\times N$ 的字母矩阵，以下面的为例：\n\n```plain\nhoni\nhsin\n```\n\n接着我们将其进行无限延伸，得到：\n\n```plain\n...honihonihonihoni...\n...hsinhsinhsinhsin...\n...honihonihonihoni...\n...hsinhsinhsinhsin...\n```\n\n在无限延伸后得到的新矩阵后，我们随机选取其中一个区域的字母，然后再沿着一定的方向连续读取 $K$ 个字母。在独立完成上述操作两次之后，我们会得到两个长度为 $K$ 的字符串。求两个字符串相同的概率。", "inputFormat": "第一行，三个整数 $N,M,K$。\n\n接下来的 $M$ 行，每行 $N$ 个小写字母。保证每行至少有两个不同的字母。", "outputFormat": "以最简分数 $\\texttt{p/q}$ 的形式输出最终概率。", "hint": "**【数据规模与约定】**\n\n对于其中 $100$ 分的数据，$M=N$。\n\n对于 $100\\%$ 的数据，$1 \\le M,N \\le 500$，$2 \\le K \\le 10^9$。\n\n**【提示与说明】**\n\n**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #4](https://hsin.hr/coci/archive/2016_2017/contest4_tasks.pdf) _T6 Osmosmjerka_。**\n\n**本题分值按 COCI 原题设置，满分 $160$。**", "locale": "zh-CN"}}}
{"pid": "P7539", "type": "P", "difficulty": 1, "samples": [["1 2 3 4 5 6 7 8", "ascending"], ["8 7 6 5 4 3 2 1", "descending"], ["8 1 7 2 6 3 5 4", "mixed"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768, 32768]}, "tags": ["模拟", "2009", "COCI（克罗地亚）"], "title": "[COCI 2009/2010 #1] NOTE", "background": "", "description": "C 大调的音阶由 $8$ 个音符组成：$\\texttt{c,d,e,f,g,a,b,C}$。将每个音符用数字 $1$ 到 $8$ 编号。\n\n音阶可以是**升序**的（从 $1$ 到 $8$）、**降序**的（从 $8$ 到 $1$），或者是**混合**的。\n\n根据音符的顺序，确定音阶是升序的、降序的还是混合的。", "inputFormat": "一行八个整数，包含 $1$ 至 $8$ 之间的所有整数。每个整数在输入中只会出现一次。", "outputFormat": "如果音阶是**降序**的，输出 `descending`；\n\n如果音阶是**升序**的，输出 `ascending`；\n\n如果音阶是**混合**的，输出 `mixed`。", "hint": "#### 【说明】\n\n本题分值按 COCI 原题设置，满分 $30$。\n\n题目译自 [**COCI2009-2010 CONTEST #1**](https://hsin.hr/coci/archive/2009_2010/contest1_tasks.pdf) _**T1 NOTE**_。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[COCI 2009/2010 #1] NOTE", "background": "", "description": "C 大调的音阶由 $8$ 个音符组成：$\\texttt{c,d,e,f,g,a,b,C}$。将每个音符用数字 $1$ 到 $8$ 编号。\n\n音阶可以是**升序**的（从 $1$ 到 $8$）、**降序**的（从 $8$ 到 $1$），或者是**混合**的。\n\n根据音符的顺序，确定音阶是升序的、降序的还是混合的。", "inputFormat": "一行八个整数，包含 $1$ 至 $8$ 之间的所有整数。每个整数在输入中只会出现一次。", "outputFormat": "如果音阶是**降序**的，输出 `descending`；\n\n如果音阶是**升序**的，输出 `ascending`；\n\n如果音阶是**混合**的，输出 `mixed`。", "hint": "#### 【说明】\n\n本题分值按 COCI 原题设置，满分 $30$。\n\n题目译自 [**COCI2009-2010 CONTEST #1**](https://hsin.hr/coci/archive/2009_2010/contest1_tasks.pdf) _**T1 NOTE**_。", "locale": "zh-CN"}}}
