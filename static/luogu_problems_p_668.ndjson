{"pid": "P14545", "type": "P", "difficulty": 6, "samples": [["2 1\n1 2 1000", "1000000000"], ["3 3\n1 2 10\n2 3 9\n3 1 11", "11\n11\n10"], ["5 8\n1 2 1\n2 3 2\n1 4 6\n3 5 2\n1 5 3\n2 4 1\n4 5 8\n1 3 4", "3\n3\n1\n3\n2\n6\n2\n2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "2024", "树链剖分"], "title": "[IO 2024 #3] 安全航行", "background": "### 本题官方测试数据有误，更换了测试数据。", "description": "众所周知，海洋不仅因可能的风暴而危险，还因有许多急流，这些急流可能将小船带离预期航线的终点很远。莫阿娜和毛伊非常清楚这一点，而且他们知道海洋中总共有 $m$ 条这样的急流，分布在 $n$ 个不同的点之间。\n\n第 $i$ 条急流连接点 $u_i$ 和 $v_i$，并具有强度 $w_i$。与我们世界不同，这些急流会周期性地改变方向为相反方向，因此我们将它们视为双向的。\n\n为了更快到达特菲提岛，莫阿娜和毛伊计划在他们的航行中使用一些急流。但由于他们还不知道岛屿的位置，他们计划选择一组急流，使得从任何点都可以到达另一个点，同时具有最小的总强度。\n\n如果事情到此结束本来很简单，但由于需要抓紧时间，英雄们可以请求海洋之神将任何急流的强度更改为 $1$ 到 $10^9$ 之间的任意整数。\n\n请为每条急流 $f$ 确定最大强度 $p_f$，使得如果将 $f$ 的强度设为 $p_f$，而其他急流保持不变，将存在一个包含 $f$ 的所需急流集合。", "inputFormat": "第一行输入包含整数 $n$ 和 $m$——分别表示急流所连接的点数和急流的数量（$1 \\le n \\le 10^5$；$1 \\le m \\le 4 \\cdot 10^5$）。保证通过给定的急流可以从任何点到达任何其他点。\n\n接下来描述急流：在随后的 $m$ 行中，第 $i$ 行给出数字 $u_i$、$v_i$ 和 $w_i$（$1 \\le u_i, v_i \\le n$；$u_i \\ne v_i$；$1 \\le w_i \\le 10^9$）。", "outputFormat": "输出 $m$ 个整数 $f_1, f_2, \\ldots, f_m$，每行一个。", "hint": "在第一个样例中只有一条急流，因此无论强度如何，它都会被包含在所需的集合中。\n\n在第二个样例中，对于每条急流，答案是其余两条急流强度的最大值（这样两条具有相同强度的急流将可以相互替换）。\n\n---\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IO 2024 #3] 安全航行", "background": "### 本题官方测试数据有误，更换了测试数据。", "description": "众所周知，海洋不仅因可能的风暴而危险，还因有许多急流，这些急流可能将小船带离预期航线的终点很远。莫阿娜和毛伊非常清楚这一点，而且他们知道海洋中总共有 $m$ 条这样的急流，分布在 $n$ 个不同的点之间。\n\n第 $i$ 条急流连接点 $u_i$ 和 $v_i$，并具有强度 $w_i$。与我们世界不同，这些急流会周期性地改变方向为相反方向，因此我们将它们视为双向的。\n\n为了更快到达特菲提岛，莫阿娜和毛伊计划在他们的航行中使用一些急流。但由于他们还不知道岛屿的位置，他们计划选择一组急流，使得从任何点都可以到达另一个点，同时具有最小的总强度。\n\n如果事情到此结束本来很简单，但由于需要抓紧时间，英雄们可以请求海洋之神将任何急流的强度更改为 $1$ 到 $10^9$ 之间的任意整数。\n\n请为每条急流 $f$ 确定最大强度 $p_f$，使得如果将 $f$ 的强度设为 $p_f$，而其他急流保持不变，将存在一个包含 $f$ 的所需急流集合。", "inputFormat": "第一行输入包含整数 $n$ 和 $m$——分别表示急流所连接的点数和急流的数量（$1 \\le n \\le 10^5$；$1 \\le m \\le 4 \\cdot 10^5$）。保证通过给定的急流可以从任何点到达任何其他点。\n\n接下来描述急流：在随后的 $m$ 行中，第 $i$ 行给出数字 $u_i$、$v_i$ 和 $w_i$（$1 \\le u_i, v_i \\le n$；$u_i \\ne v_i$；$1 \\le w_i \\le 10^9$）。", "outputFormat": "输出 $m$ 个整数 $f_1, f_2, \\ldots, f_m$，每行一个。", "hint": "在第一个样例中只有一条急流，因此无论强度如何，它都会被包含在所需的集合中。\n\n在第二个样例中，对于每条急流，答案是其余两条急流强度的最大值（这样两条具有相同强度的急流将可以相互替换）。\n\n---\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14546", "type": "P", "difficulty": 4, "samples": [["5\n1 2 3 4 5", "4 2 5 1 3\n"], ["2\n2 9", "-1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["贪心", "2024", "Special Judge", "构造"], "title": "[IO 2024 #3] 整数中位数", "background": "", "description": "莫图努伊岛上的居民信奉女神特菲提，她特别喜爱中位数和整数。\n\n为了纪念她，人们发明了一个游戏：\n- 选择 $n$ 个互不相同的整数，第 $i$ 个数为 $a_i$。\n- 创建一个空的数字集合 $m$。\n- 按照任意顺序逐个将数字添加到 $m$ 中，使得在每一步添加完当前数字后，集合 $m$ 元素的中位数始终保持为整数。\n\n在此问题中，中位数定义如下：将集合 $m$ 的元素按升序排列。如果集合大小为奇数，则中位数等于所得序列的中间元素；如果为偶数，则中位数等于两个中间元素的平均值。\n\n莫阿娜在出发冒险前给希米亚留下了 $n$ 个互不相同的整数。请帮助希米亚在莫阿娜回来之前完整地填满集合 $m$。", "inputFormat": "第一行包含一个整数 $n$——数字的数量（$1 \\le n \\le 10^5$）。\n\n第二行列出 $n$ 个不同的整数 $a_i$——为游戏选择的数字（$1 \\le a_i \\le 10^9$）。\n", "outputFormat": "按照将数字添加到集合中的顺序输出数组 $a$ 中的数字，使得集合的中位数始终保持为整数。\n\n如果无法将所有数字添加到 $m$ 中，则输出单个数字 $-1$。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IO 2024 #3] 整数中位数", "background": "", "description": "莫图努伊岛上的居民信奉女神特菲提，她特别喜爱中位数和整数。\n\n为了纪念她，人们发明了一个游戏：\n- 选择 $n$ 个互不相同的整数，第 $i$ 个数为 $a_i$。\n- 创建一个空的数字集合 $m$。\n- 按照任意顺序逐个将数字添加到 $m$ 中，使得在每一步添加完当前数字后，集合 $m$ 元素的中位数始终保持为整数。\n\n在此问题中，中位数定义如下：将集合 $m$ 的元素按升序排列。如果集合大小为奇数，则中位数等于所得序列的中间元素；如果为偶数，则中位数等于两个中间元素的平均值。\n\n莫阿娜在出发冒险前给希米亚留下了 $n$ 个互不相同的整数。请帮助希米亚在莫阿娜回来之前完整地填满集合 $m$。", "inputFormat": "第一行包含一个整数 $n$——数字的数量（$1 \\le n \\le 10^5$）。\n\n第二行列出 $n$ 个不同的整数 $a_i$——为游戏选择的数字（$1 \\le a_i \\le 10^9$）。\n", "outputFormat": "按照将数字添加到集合中的顺序输出数组 $a$ 中的数字，使得集合的中位数始终保持为整数。\n\n如果无法将所有数字添加到 $m$ 中，则输出单个数字 $-1$。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14547", "type": "P", "difficulty": 6, "samples": [["2 3 1 5\n1 2", "1\n3\n2"], ["3 4 2 3\n1 3 1", "1\n1\n0\n2"], ["5 6 23 1000\n1 2 4 2 3", "1\n25\n25\n577\n274\n578"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["2024"], "title": "[IO 2024 #3] 莫图努伊部落的语言", "background": "", "description": "对我们来说，屏幕上当然显示的是说我们母语的角色，但莫图努伊部落的母语要复杂得多。\n\n该语言总共有 $n$ 个字母，每个字母对应的声音我们用数字 $a_1, \\ldots, a_n$ 表示。不同的字母可能对应相同的声音。该语言中恰好有 $2^n - 1$ 个单词，每个单词都是这 $n$ 个字母的任意子序列（单词中字母的顺序与字母表中的顺序一致）。\n\n用 $s_i$ 表示按字典序排列的第 $i$ 个单词的 **发音**。即取该语言的所有单词，写出每个单词的声音序列，并按升序排列这些序列。这里我们认为单词 $x$ 小于单词 $y$，如果要么 $x$ 的声音序列是 $y$ 声音序列的前缀，要么 $x$ 中第一个不同的声音小于 $y$ 中对应的声音。\n\n你的任务是找到莫图努伊岛部落语言中发音最小的 $k$ 个单词。由于这些单词的总长度可能过大，请改为输出这些单词的哈希值，其中单词 $s = \\overline{c_1 c_2 \\ldots c_k}$ 的哈希值为\n$$h(s) = (a_{c_1} B^{k-1} + a_{c_2} B^{k-2} + \\ldots + a_{c_{k-1}} B + a_{c_k}) \\bmod M$$\n其中 $B$ 和 $M$ 是预先给定的参数。", "inputFormat": "第一行输入包含整数 $n$、$k$、$B$ 和 $M$——分别表示字母表中的字母数量、你感兴趣的单词数量和哈希参数（$1 \\le k, n \\le 10^5$；$ k \\le 2^n - 1$；$1 \\le B, M \\le 10^6$）。\n\n第二行列出 $n$ 个整数 $a_i$——每个字母的声音编号（$1 \\le a_i \\le 10^5$）。", "outputFormat": "对于按字典序排列最小的 $k$ 个语言单词，依次输出它们发音的哈希值，每行一个。\n", "hint": "在第一个样例中，单词的顺序为：$\\overline{1}$、$\\overline{1,2}$、$\\overline{2}$。\n\n在第二个样例中，单词的发音为：$\\overline{1}$、$\\overline{1}$、$\\overline{1,3}$、$\\overline{1,3,1}$、$\\overline{3}$、$\\overline{3,1}$。\n\n---\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IO 2024 #3] 莫图努伊部落的语言", "background": "", "description": "对我们来说，屏幕上当然显示的是说我们母语的角色，但莫图努伊部落的母语要复杂得多。\n\n该语言总共有 $n$ 个字母，每个字母对应的声音我们用数字 $a_1, \\ldots, a_n$ 表示。不同的字母可能对应相同的声音。该语言中恰好有 $2^n - 1$ 个单词，每个单词都是这 $n$ 个字母的任意子序列（单词中字母的顺序与字母表中的顺序一致）。\n\n用 $s_i$ 表示按字典序排列的第 $i$ 个单词的 **发音**。即取该语言的所有单词，写出每个单词的声音序列，并按升序排列这些序列。这里我们认为单词 $x$ 小于单词 $y$，如果要么 $x$ 的声音序列是 $y$ 声音序列的前缀，要么 $x$ 中第一个不同的声音小于 $y$ 中对应的声音。\n\n你的任务是找到莫图努伊岛部落语言中发音最小的 $k$ 个单词。由于这些单词的总长度可能过大，请改为输出这些单词的哈希值，其中单词 $s = \\overline{c_1 c_2 \\ldots c_k}$ 的哈希值为\n$$h(s) = (a_{c_1} B^{k-1} + a_{c_2} B^{k-2} + \\ldots + a_{c_{k-1}} B + a_{c_k}) \\bmod M$$\n其中 $B$ 和 $M$ 是预先给定的参数。", "inputFormat": "第一行输入包含整数 $n$、$k$、$B$ 和 $M$——分别表示字母表中的字母数量、你感兴趣的单词数量和哈希参数（$1 \\le k, n \\le 10^5$；$ k \\le 2^n - 1$；$1 \\le B, M \\le 10^6$）。\n\n第二行列出 $n$ 个整数 $a_i$——每个字母的声音编号（$1 \\le a_i \\le 10^5$）。", "outputFormat": "对于按字典序排列最小的 $k$ 个语言单词，依次输出它们发音的哈希值，每行一个。\n", "hint": "在第一个样例中，单词的顺序为：$\\overline{1}$、$\\overline{1,2}$、$\\overline{2}$。\n\n在第二个样例中，单词的发音为：$\\overline{1}$、$\\overline{1}$、$\\overline{1,3}$、$\\overline{1,3,1}$、$\\overline{3}$、$\\overline{3,1}$。\n\n---\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14548", "type": "P", "difficulty": 4, "samples": [["4 3\n1 3 2\n1 2 4\n2 4 5", "20"], ["6 2\n4 6 7\n1 2 7", "-1"], ["100000 4\n1 100000 10\n1 100000 76\n1 100000 12\n1 100000 12", "1000100"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["线段树", "并查集", "2024", "颜色段均摊（珂朵莉树 ODT）", "生成树"], "title": "[IO 2024 #3] 拯救波利尼西亚", "background": "", "description": "很久以前，在古老的波利尼西亚有 $n$ 个伟大的岛屿，通过魔法路径相连。岛屿编号从 $1$ 到 $n$。这些路径不仅允许旅行，还维持着魔法能量的平衡，这种能量滋养着整个世界。\n\n然而有一天发生了灾难：女神特菲提失去了她的心脏，所有魔法路径都消失了，岛屿彼此孤立。酋长图伊迫切希望恢复秩序，召集了最优秀的萨满。魔法师们提出了一个古老的恢复仪式，根据这个仪式可以创建新的小岛——魔法节点。总共创建了 $k$ 个新岛屿。\n\n从每个新岛屿 $n+1, n+2, \\ldots, n+k$ 可以创建通往原始 $n$ 个岛屿的某些路径。更准确地说，对于每个 $i$ 从 $1$ 到 $k$，已知参数 $l_i$、$r_i$ 和 $c_i$，意味着消耗 $c_i$ 能量可以从岛屿 $n + i$ 创建一条通往岛屿 $j$ 的路径，如果 $l_i \\le j \\le r_i$。当然，可以从每个新岛屿引出多条路径，但每条路径都需要消耗 $c_i$ 能量。\n\n请确定是否可以通过这些路径将所有 $n + k$ 个岛屿连接成一个统一的网络，使得从每个岛屿都可以到达任何其他岛屿。如果可能，请确定实现这一目标所需的最小能量。\n\n如果你成功了，古老的波利尼西亚将得到拯救，昔日的魔法将让岛屿重现繁荣。但如果你失败了——岛屿将保持孤立，世界将永远陷入混乱。一切取决于你！", "inputFormat": "第一行包含两个整数 $n$ 和 $k$——分别表示原始岛屿和新岛屿的数量（$1 \\le n, k \\le 2 \\cdot 10^5$）。\n\n接下来的 $k$ 行描述从新岛屿出发的可能路径：第 $i$ 行包含三个整数 $l_i$、$r_i$ 和 $c_i$——路径可能终点的边界以及每条路径的代价（$1 \\le l_i \\le r_i \\le n$；$1 \\le c_i \\le 10^9$）。\n", "outputFormat": "如果能够连接波利尼西亚的所有岛屿，输出所需的最小能量。如果不可能，输出 $-1$。\n", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IO 2024 #3] 拯救波利尼西亚", "background": "", "description": "很久以前，在古老的波利尼西亚有 $n$ 个伟大的岛屿，通过魔法路径相连。岛屿编号从 $1$ 到 $n$。这些路径不仅允许旅行，还维持着魔法能量的平衡，这种能量滋养着整个世界。\n\n然而有一天发生了灾难：女神特菲提失去了她的心脏，所有魔法路径都消失了，岛屿彼此孤立。酋长图伊迫切希望恢复秩序，召集了最优秀的萨满。魔法师们提出了一个古老的恢复仪式，根据这个仪式可以创建新的小岛——魔法节点。总共创建了 $k$ 个新岛屿。\n\n从每个新岛屿 $n+1, n+2, \\ldots, n+k$ 可以创建通往原始 $n$ 个岛屿的某些路径。更准确地说，对于每个 $i$ 从 $1$ 到 $k$，已知参数 $l_i$、$r_i$ 和 $c_i$，意味着消耗 $c_i$ 能量可以从岛屿 $n + i$ 创建一条通往岛屿 $j$ 的路径，如果 $l_i \\le j \\le r_i$。当然，可以从每个新岛屿引出多条路径，但每条路径都需要消耗 $c_i$ 能量。\n\n请确定是否可以通过这些路径将所有 $n + k$ 个岛屿连接成一个统一的网络，使得从每个岛屿都可以到达任何其他岛屿。如果可能，请确定实现这一目标所需的最小能量。\n\n如果你成功了，古老的波利尼西亚将得到拯救，昔日的魔法将让岛屿重现繁荣。但如果你失败了——岛屿将保持孤立，世界将永远陷入混乱。一切取决于你！", "inputFormat": "第一行包含两个整数 $n$ 和 $k$——分别表示原始岛屿和新岛屿的数量（$1 \\le n, k \\le 2 \\cdot 10^5$）。\n\n接下来的 $k$ 行描述从新岛屿出发的可能路径：第 $i$ 行包含三个整数 $l_i$、$r_i$ 和 $c_i$——路径可能终点的边界以及每条路径的代价（$1 \\le l_i \\le r_i \\le n$；$1 \\le c_i \\le 10^9$）。\n", "outputFormat": "如果能够连接波利尼西亚的所有岛屿，输出所需的最小能量。如果不可能，输出 $-1$。\n", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14549", "type": "P", "difficulty": 0, "samples": [["5\n1 10\n1 5 R\n1 7 R\n4 4\n1 1 B\n4 4 R\n4 4\n4 4 R\n1 1 B\n2 2\n1 2 R\n2 1 B\n1234 5678\n130 57 B\n239 158 B", "WIN\nWIN\nDRAW\nWIN\nDRAW"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2024"], "title": "[IO 2024 #3] 原始象棋", "background": "", "description": "有时候确实需要从海洋冒险中休息一下，所以有一天莫阿娜和毛伊决定玩一个游戏。当然，当时象棋还不存在，因此他们发明了一个非常简化的版本。\n\n两人各自选择了一个棋子，并在沙滩上画了一个 $n \\times m$ 大小的棋盘。由于他们玩的是即兴的原始象棋，他们只能从两种棋子中选择一种：车或象（而且毛伊和莫阿娜不一定要选择不同的棋子），这些棋子按照标准象棋规则移动（车可以沿水平或垂直方向移动任意距离，而象则沿对角线移动同样距离）。\n\n能够吃掉对方棋子的人获胜。如果在 $10^{100}$ 步之后没有人能做到这一点，则游戏被视为平局。\n\n在某个时刻，棋盘上出现了以下局面：毛伊的棋子位于坐标为 $(x_1, y_1)$ 的格子，而莫阿娜的棋子位于 $(x_2, y_2)$ 的格子（行和列的编号从 $1$ 开始）。现在轮到毛伊走棋。意识到莫阿娜行事狡猾且善于策略，毛伊请求你帮助评估获胜的机会：如果双方都采取最优策略，谁会获胜？", "inputFormat": "每个测试包含多组输入数据。第一行包含一个整数 $t$——输入数据的组数（$1 \\leq t \\leq 5000$）。接下来是各组输入数据的描述。\n\n每组数据的第一行包含两个整数 $n$ 和 $m$——棋盘的尺寸（$1 \\leq n, m \\leq 10^9$）。\n\n第二行包含毛伊棋子的信息：两个整数 $x_1$ 和 $y_1$（他的棋子坐标），之后是一个字符 $c_1$（$1 \\leq x_1 \\leq n$；$1 \\leq y_1 \\leq m$；$c_1 \\in \\{\\text{`B'}, \\text{`R'}\\}$）。如果 $c_1 = \\text{`B'}$，则他的棋子是象；如果是 `R'，则是车。\n\n第三行以相同格式包含莫阿娜棋子的信息（$x_2$, $y_2$, $c_2$）。保证两个棋子位于不同的格子，且每个棋子都能走某一步棋。", "outputFormat": "对于每组数据，输出一行字符串：如果在该局面下无论莫阿娜如何走棋，毛伊都能在有限步内获胜，则输出 `WIN`；如果局面是平局，则输出 `DRAW`；如果在该局面下莫阿娜会获胜，则输出 `LOSE`。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IO 2024 #3] 原始象棋", "background": "", "description": "有时候确实需要从海洋冒险中休息一下，所以有一天莫阿娜和毛伊决定玩一个游戏。当然，当时象棋还不存在，因此他们发明了一个非常简化的版本。\n\n两人各自选择了一个棋子，并在沙滩上画了一个 $n \\times m$ 大小的棋盘。由于他们玩的是即兴的原始象棋，他们只能从两种棋子中选择一种：车或象（而且毛伊和莫阿娜不一定要选择不同的棋子），这些棋子按照标准象棋规则移动（车可以沿水平或垂直方向移动任意距离，而象则沿对角线移动同样距离）。\n\n能够吃掉对方棋子的人获胜。如果在 $10^{100}$ 步之后没有人能做到这一点，则游戏被视为平局。\n\n在某个时刻，棋盘上出现了以下局面：毛伊的棋子位于坐标为 $(x_1, y_1)$ 的格子，而莫阿娜的棋子位于 $(x_2, y_2)$ 的格子（行和列的编号从 $1$ 开始）。现在轮到毛伊走棋。意识到莫阿娜行事狡猾且善于策略，毛伊请求你帮助评估获胜的机会：如果双方都采取最优策略，谁会获胜？", "inputFormat": "每个测试包含多组输入数据。第一行包含一个整数 $t$——输入数据的组数（$1 \\leq t \\leq 5000$）。接下来是各组输入数据的描述。\n\n每组数据的第一行包含两个整数 $n$ 和 $m$——棋盘的尺寸（$1 \\leq n, m \\leq 10^9$）。\n\n第二行包含毛伊棋子的信息：两个整数 $x_1$ 和 $y_1$（他的棋子坐标），之后是一个字符 $c_1$（$1 \\leq x_1 \\leq n$；$1 \\leq y_1 \\leq m$；$c_1 \\in \\{\\text{`B'}, \\text{`R'}\\}$）。如果 $c_1 = \\text{`B'}$，则他的棋子是象；如果是 `R'，则是车。\n\n第三行以相同格式包含莫阿娜棋子的信息（$x_2$, $y_2$, $c_2$）。保证两个棋子位于不同的格子，且每个棋子都能走某一步棋。", "outputFormat": "对于每组数据，输出一行字符串：如果在该局面下无论莫阿娜如何走棋，毛伊都能在有限步内获胜，则输出 `WIN`；如果局面是平局，则输出 `DRAW`；如果在该局面下莫阿娜会获胜，则输出 `LOSE`。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14550", "type": "P", "difficulty": 5, "samples": [["1\n10 20", "30"], ["2\n1 2 3 1", "3 4 5"], ["3\n1 2 3 4 5 6 7 8", "3 4 7 7 11 12 15"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2024", "快速沃尔什变换 FWT"], "title": "[IO 2024 #3] 魔法贝壳", "background": "", "description": "莫阿娜乘着她的独木舟出发去拯救她的岛屿。为此，她需要收集分布在 $2^n$ 个岛屿上的特殊魔法贝壳。第 $i$ 个岛屿上的魔法贝壳数量为 $a_i$，岛屿编号从 $0$ 到 $2^n - 1$。\n\n莫阿娜希望尽可能快地从尽可能多的岛屿上收集贝壳，因此她想要访问两个岛屿并收集这两个岛屿上的所有贝壳。但火神 Te Ka 可能会阻碍她的冒险，只有当 $i\\ |\\ j \\leq k$ 时，莫阿娜才能访问编号为 $i$ 和 $j$ 的两个岛屿，其中 $|$ 表示按位 **或** 运算。\n\n$k$ 的值是预先未知的，因此请帮助莫阿娜为每个 $k$ 从 $1$ 到 $2^n - 1$ 找到 $\\max\\limits_{i\\,|\\,j \\le k} a_i + a_j$。再次注意，岛屿编号从 $0$ 开始，换句话说，它们的二进制表示范围是从 $n$ 个 $0$ 到 $n$ 个 $1$。", "inputFormat": "第一行包含一个整数 $n$，表示总共有 $2^n$ 个拥有贝壳的岛屿（$1 \\leq n \\leq 18$）。\n\n第二行列出 $2^n$ 个整数 $a_i$——每个岛屿上的贝壳数量（$1 \\le a_i \\le 10^9$）。\n", "outputFormat": "对于每个 $k$ 从 $1$ 到 $2^n - 1$，输出问题的答案——使用该 $k$ 可达到的最大 $a_i + a_j$ 值。不同 $k$ 的答案之间用空格分隔。", "hint": "", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[IO 2024 #3] 魔法贝壳", "background": "", "description": "莫阿娜乘着她的独木舟出发去拯救她的岛屿。为此，她需要收集分布在 $2^n$ 个岛屿上的特殊魔法贝壳。第 $i$ 个岛屿上的魔法贝壳数量为 $a_i$，岛屿编号从 $0$ 到 $2^n - 1$。\n\n莫阿娜希望尽可能快地从尽可能多的岛屿上收集贝壳，因此她想要访问两个岛屿并收集这两个岛屿上的所有贝壳。但火神 Te Ka 可能会阻碍她的冒险，只有当 $i\\ |\\ j \\leq k$ 时，莫阿娜才能访问编号为 $i$ 和 $j$ 的两个岛屿，其中 $|$ 表示按位 **或** 运算。\n\n$k$ 的值是预先未知的，因此请帮助莫阿娜为每个 $k$ 从 $1$ 到 $2^n - 1$ 找到 $\\max\\limits_{i\\,|\\,j \\le k} a_i + a_j$。再次注意，岛屿编号从 $0$ 开始，换句话说，它们的二进制表示范围是从 $n$ 个 $0$ 到 $n$ 个 $1$。", "inputFormat": "第一行包含一个整数 $n$，表示总共有 $2^n$ 个拥有贝壳的岛屿（$1 \\leq n \\leq 18$）。\n\n第二行列出 $2^n$ 个整数 $a_i$——每个岛屿上的贝壳数量（$1 \\le a_i \\le 10^9$）。\n", "outputFormat": "对于每个 $k$ 从 $1$ 到 $2^n - 1$，输出问题的答案——使用该 $k$ 可达到的最大 $a_i + a_j$ 值。不同 $k$ 的答案之间用空格分隔。", "hint": "", "locale": "zh-CN"}}}
{"pid": "P14551", "type": "P", "difficulty": 7, "samples": [["6\n1\n2\n4\n6\n99\n661", "-1 -1\n-1 -1\n3 2\n1 1\n-1 -1\n-1 -1\n5 2\n-1 -1\n10 1\n-1 -1\n16421658242965910275055840472270471049 638728478116949861246791167518480580\n2865454435422583218 111453260296346905"]], "limits": {"time": [1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288]}, "tags": ["数学", "数论", "不定方程", "模板题"], "title": "【模板】Pell 方程", "background": "模板题，无背景。", "description": "对于给定的两个 Pell 方程 $x^2-ny^2=1$，$x^2-ny^2=-1$，分别求其最小正整数解 $(x,y)$（这里的最小指的是 $x$ 的值最小）。\n\n若无解，则输出 $-1$。", "inputFormat": "第一行一个整数 $T$ 表示共有 $T$ 组数据。\n\n对于每组数据：\n\n+ 一行一个整数 $n$。", "outputFormat": "对于每组数据：\n\n+ 两行，一行两个正整数，分别表示 $x^2-ny^2=1$ 和 $x^2-ny^2=-1$ 两个 Pell 方程的最小正整数解。\n+ 特殊的，若某个方程不存在正整数解，则在该行输出 `-1 -1` 即可。", "hint": "对于 $25\\%$ 的分数满足 $T\\le 10,n\\le 10$。\n\n对于 $100\\%$ 的分数满足 $1\\le T\\le 1000,1\\le n\\le 1000$。\n\n可以证明在给定数据范围下，最终的答案不会超过 $2^{127}-1$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "【模板】Pell 方程", "background": "模板题，无背景。", "description": "对于给定的两个 Pell 方程 $x^2-ny^2=1$，$x^2-ny^2=-1$，分别求其最小正整数解 $(x,y)$（这里的最小指的是 $x$ 的值最小）。\n\n若无解，则输出 $-1$。", "inputFormat": "第一行一个整数 $T$ 表示共有 $T$ 组数据。\n\n对于每组数据：\n\n+ 一行一个整数 $n$。", "outputFormat": "对于每组数据：\n\n+ 两行，一行两个正整数，分别表示 $x^2-ny^2=1$ 和 $x^2-ny^2=-1$ 两个 Pell 方程的最小正整数解。\n+ 特殊的，若某个方程不存在正整数解，则在该行输出 `-1 -1` 即可。", "hint": "对于 $25\\%$ 的分数满足 $T\\le 10,n\\le 10$。\n\n对于 $100\\%$ 的分数满足 $1\\le T\\le 1000,1\\le n\\le 1000$。\n\n可以证明在给定数据范围下，最终的答案不会超过 $2^{127}-1$。", "locale": "zh-CN"}}}
{"pid": "P14552", "type": "P", "difficulty": 3, "samples": [["6\n1 2\n3 5\n4 6\n2 3\n4 5\n1 6\n3", "1 4 3"], ["4\n1 2\n3 4\n2 1\n4 3\n3", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "Special Judge", "图论建模", "图遍历", "二分图", "ROI（俄罗斯）"], "title": "[ROI 2013 Day1] 乌拉尔冰球赛", "background": "", "description": "为了普及冰球运动并提高乌拉尔地区冰球队的技术水平，组织了一场全乌拉尔锦标赛。锦标赛邀请了来自乌拉尔各城市的 $N$ 支冰球队参加。\n\n在前两轮比赛后，每支球队各进行了一场比赛，结果发现参赛队伍过多。锦标赛组织者决定只允许 $K$ 支球队继续参赛，且这些球队中任意两支在前两轮比赛中均未相遇。\n\n需要编写一个程序，找出满足条件的 $K$ 支球队集合，或者输出无法实现的消息。如果存在多个符合条件的集合，只需找出其中任意一个。", "inputFormat": "输入文件的第一行包含一个数字 $N$（$2 \\leqslant N \\leqslant 100,000$，$N$ 为偶数）。\n\n随后的 $N$ 行包含所有已进行比赛的描述。每场比赛的描述由两个不超过 $N$ 的自然数组成——表示参加比赛的球队编号。\n前 $N/2$ 行对应第一轮的比赛，其余行对应第二轮的比赛。\n\n输入文件的最后一行包含一个数字 $K$（$2 \\leqslant K \\leqslant N$）。\n\n保证每支球队恰好进行了两场比赛：一场在第一轮，一场在第二轮。", "outputFormat": "输出文件应包含：如果无解，则仅输出一个数字 $0$；否则输出 $K$ 个不同的数字——所选球队的编号。\n", "hint": "### 评分\n\n本题包含三个子任务。每个子任务的评分使用独立的测试组。仅当通过该组所有测试时，子任务的得分才会被计入。\n\n#### 子任务 1\n\n$N \\leqslant 10$。\n该子任务分值为 30 分。\n\n#### 子任务 2\n\n$N \\leqslant 1000$。\n该子任务分值为 30 分。\n\n#### 子任务 3\n\n$N \\leqslant 100,000$。\n该子任务分值为 40 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2013 Day1] 乌拉尔冰球赛", "background": "", "description": "为了普及冰球运动并提高乌拉尔地区冰球队的技术水平，组织了一场全乌拉尔锦标赛。锦标赛邀请了来自乌拉尔各城市的 $N$ 支冰球队参加。\n\n在前两轮比赛后，每支球队各进行了一场比赛，结果发现参赛队伍过多。锦标赛组织者决定只允许 $K$ 支球队继续参赛，且这些球队中任意两支在前两轮比赛中均未相遇。\n\n需要编写一个程序，找出满足条件的 $K$ 支球队集合，或者输出无法实现的消息。如果存在多个符合条件的集合，只需找出其中任意一个。", "inputFormat": "输入文件的第一行包含一个数字 $N$（$2 \\leqslant N \\leqslant 100,000$，$N$ 为偶数）。\n\n随后的 $N$ 行包含所有已进行比赛的描述。每场比赛的描述由两个不超过 $N$ 的自然数组成——表示参加比赛的球队编号。\n前 $N/2$ 行对应第一轮的比赛，其余行对应第二轮的比赛。\n\n输入文件的最后一行包含一个数字 $K$（$2 \\leqslant K \\leqslant N$）。\n\n保证每支球队恰好进行了两场比赛：一场在第一轮，一场在第二轮。", "outputFormat": "输出文件应包含：如果无解，则仅输出一个数字 $0$；否则输出 $K$ 个不同的数字——所选球队的编号。\n", "hint": "### 评分\n\n本题包含三个子任务。每个子任务的评分使用独立的测试组。仅当通过该组所有测试时，子任务的得分才会被计入。\n\n#### 子任务 1\n\n$N \\leqslant 10$。\n该子任务分值为 30 分。\n\n#### 子任务 2\n\n$N \\leqslant 1000$。\n该子任务分值为 30 分。\n\n#### 子任务 3\n\n$N \\leqslant 100,000$。\n该子任务分值为 40 分。", "locale": "zh-CN"}}}
{"pid": "P14553", "type": "P", "difficulty": 0, "samples": [["2\nzabacabab", "5"], ["2\nabc", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "ROI（俄罗斯）"], "title": "[ROI 2013 Day1] 装配机器人", "background": "", "description": "某高校的学生设计了一款机器人，用于部分自动化航空发动机的装配过程。\n\n在发动机装配过程中可能遇到 26 种类型的操作，用小写拉丁字母表示。装配过程由 $N$ 个操作组成。计划使用机器人一次来执行装配过程中部分连续的操作。\n\n机器人的内存由 $K$ 个单元组成，每个单元存储一个操作。操作按顺序执行，从第一个操作开始，按照它们在内存中的排列顺序进行。执行完最后一个操作后，机器人会从第一个操作继续工作。机器人可以在执行任意数量的操作后停止。如果机器人执行了至少 $(K + 1)$ 个操作，则机器人的使用在经济上是合理的。\n\n需要编写一个程序，根据给定的装配过程确定机器人在经济上合理的使用方式数量。", "inputFormat": "输入文件的第一行写有数字 $K$（$1 \\leqslant K < N$）——可以写入机器人内存的操作数量。\n\n第二行由 $N$（$2 \\leqslant N \\leqslant 200,000$）个小写拉丁字母组成，表示操作——即发动机的装配过程。相同类型的操作用相同的字母表示。", "outputFormat": "输出文件应包含一个整数——机器人在经济上合理的使用方式数量。\n", "hint": "### 说明\n\n在第一个样例中，以下操作序列使用机器人在经济上是合理的：\n- 第 2 到第 4 个操作：`aba`，此时机器人内存中的操作为 `ab`；\n- 第 4 到第 6 个操作：`aca`，机器人内存中的操作为 `ac`；\n- 第 6 到第 8 个操作：`aba`，机器人内存中的操作为 `ab`；\n- 第 6 到第 9 个操作：`abab`，机器人内存中的操作为 `ab`；\n- 第 7 到第 9 个操作：`bab`，机器人内存中的操作为 `ba`。\n\n### 评分\n\n本题包含三个子任务。每个子任务的评分使用独立的测试组。仅当通过相应组的所有测试时，子任务的得分才会被计入。\n\n#### 子任务 1\n$N \\leqslant 100$。\n该子任务分值为 30 分。\n\n#### 子任务 2\n$N \\leqslant 5000$。\n该子任务分值为 30 分。\n\n#### 子任务 3\n$N \\leqslant 200,000$。\n该子任务分值为 40 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2013 Day1] 装配机器人", "background": "", "description": "某高校的学生设计了一款机器人，用于部分自动化航空发动机的装配过程。\n\n在发动机装配过程中可能遇到 26 种类型的操作，用小写拉丁字母表示。装配过程由 $N$ 个操作组成。计划使用机器人一次来执行装配过程中部分连续的操作。\n\n机器人的内存由 $K$ 个单元组成，每个单元存储一个操作。操作按顺序执行，从第一个操作开始，按照它们在内存中的排列顺序进行。执行完最后一个操作后，机器人会从第一个操作继续工作。机器人可以在执行任意数量的操作后停止。如果机器人执行了至少 $(K + 1)$ 个操作，则机器人的使用在经济上是合理的。\n\n需要编写一个程序，根据给定的装配过程确定机器人在经济上合理的使用方式数量。", "inputFormat": "输入文件的第一行写有数字 $K$（$1 \\leqslant K < N$）——可以写入机器人内存的操作数量。\n\n第二行由 $N$（$2 \\leqslant N \\leqslant 200,000$）个小写拉丁字母组成，表示操作——即发动机的装配过程。相同类型的操作用相同的字母表示。", "outputFormat": "输出文件应包含一个整数——机器人在经济上合理的使用方式数量。\n", "hint": "### 说明\n\n在第一个样例中，以下操作序列使用机器人在经济上是合理的：\n- 第 2 到第 4 个操作：`aba`，此时机器人内存中的操作为 `ab`；\n- 第 4 到第 6 个操作：`aca`，机器人内存中的操作为 `ac`；\n- 第 6 到第 8 个操作：`aba`，机器人内存中的操作为 `ab`；\n- 第 6 到第 9 个操作：`abab`，机器人内存中的操作为 `ab`；\n- 第 7 到第 9 个操作：`bab`，机器人内存中的操作为 `ba`。\n\n### 评分\n\n本题包含三个子任务。每个子任务的评分使用独立的测试组。仅当通过相应组的所有测试时，子任务的得分才会被计入。\n\n#### 子任务 1\n$N \\leqslant 100$。\n该子任务分值为 30 分。\n\n#### 子任务 2\n$N \\leqslant 5000$。\n该子任务分值为 30 分。\n\n#### 子任务 3\n$N \\leqslant 200,000$。\n该子任务分值为 40 分。", "locale": "zh-CN"}}}
{"pid": "P14554", "type": "P", "difficulty": 0, "samples": [["5\nBWWWW\nBWWWW\nBWBWW\nWWWWW\nWWWWW\n0", "DDRRdlU"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "提交答案", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2013 Day1] 图形编辑器", "background": "", "description": "一位年轻的信息学学生正在学习使用新的图形编辑器“变色龙”。这个编辑器具有不同寻常的简洁性。它只支持两种颜色——黑色和白色，以及一种工具——“变色龙”。\n\n编辑器的区域是一个 $N \\times N$ 个单元格的正方形。其中一个单元格上有一个变色龙光标。可以在区域内向四个方向移动它——向上、向下、向右或向左，每次移动恰好一个单元格。光标的颜色必须始终与其所在单元格的颜色一致。为此，当它移动到另一个颜色的单元格时，必须发生以下两个事件之一：要么光标将其颜色更改为该单元格的颜色，要么相反——单元格将其颜色更改为光标的颜色。例如，如果光标从黑色单元格移动到白色单元格，那么它要么必须变为白色，要么它现在所在的白色单元格必须变为黑色。如果单元格和光标颜色相同，则它们的颜色不会改变。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/68j0tu8p.png)\n:::\n\n初始时光标为黑色，并位于区域的左上角单元格。该单元格也被涂成黑色。区域的所有其他单元格都被涂成白色。\n\n需要编写一个程序，确定变色龙光标的操作序列，执行后将在区域上得到输入数据中给定的图片。", "inputFormat": "输入文件的第一行给定数字 $N$（$5 \\leqslant N \\leqslant 100$）——区域的尺寸。\n\n接下来的 $N$ 行描述了需要得到的图片。描述图片的每行长度为 $N$，由字符 `W`（如果对应单元格为白色）和 `B`（如果为黑色）组成。\n\n文件的最后一行包含测试编号。\n", "outputFormat": "输出文件应包含一行，描述所需的操作序列。\n\n为表示向左、向上、向右或向下移动并改变**光标颜色**，应分别使用字母 `l`、`u`、`r` 或 `d`。为表示向左、向上、向右或向下移动并改变**单元格颜色**，应分别使用字母 `L`、`U`、`R` 或 `D`。如果光标移动到与其颜色相同的单元格，可以使用大写或小写字母。", "hint": "在此问题中，测试数据对参赛者可用。它们位于题目附件中。\n\n测试根据文件名编号，从 $0$ 到 $20$。示例中的测试编号为 $0$，用于初步检查。编号从 $1$ 到 $20$ 的测试用于最终检查。\n\n此任务的最终检查在一组 $20$ 个测试上进行。每个测试分值为 $5$ 分。测试独立评分。\n\n如果输出的序列包含不超过 $5,000,000$ 个操作并产生正确结果，则测试被视为通过。\n\n前 $10$ 个测试如果通过，则得 $5$ 分。\n\n剩余 $10$ 个测试的评分如下。如果测试通过：\n- 得 $5$ 分，如果答案包含不超过 $3 N^2$ 个操作；\n- 得 $4$ 分，如果答案包含不超过 $5 N^2$ 个操作；\n- 得 $3$ 分，如果答案包含不超过 $10 N^2$ 个操作；\n- 得 $2$ 分，如果答案包含不超过 $2.5 N^3$ 个操作；\n- 得 $1$ 分，如果答案包含不超过 $5,000,000$ 个操作。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2013 Day1] 图形编辑器", "background": "", "description": "一位年轻的信息学学生正在学习使用新的图形编辑器“变色龙”。这个编辑器具有不同寻常的简洁性。它只支持两种颜色——黑色和白色，以及一种工具——“变色龙”。\n\n编辑器的区域是一个 $N \\times N$ 个单元格的正方形。其中一个单元格上有一个变色龙光标。可以在区域内向四个方向移动它——向上、向下、向右或向左，每次移动恰好一个单元格。光标的颜色必须始终与其所在单元格的颜色一致。为此，当它移动到另一个颜色的单元格时，必须发生以下两个事件之一：要么光标将其颜色更改为该单元格的颜色，要么相反——单元格将其颜色更改为光标的颜色。例如，如果光标从黑色单元格移动到白色单元格，那么它要么必须变为白色，要么它现在所在的白色单元格必须变为黑色。如果单元格和光标颜色相同，则它们的颜色不会改变。\n\n:::align{center}\n![](https://cdn.luogu.com.cn/upload/image_hosting/68j0tu8p.png)\n:::\n\n初始时光标为黑色，并位于区域的左上角单元格。该单元格也被涂成黑色。区域的所有其他单元格都被涂成白色。\n\n需要编写一个程序，确定变色龙光标的操作序列，执行后将在区域上得到输入数据中给定的图片。", "inputFormat": "输入文件的第一行给定数字 $N$（$5 \\leqslant N \\leqslant 100$）——区域的尺寸。\n\n接下来的 $N$ 行描述了需要得到的图片。描述图片的每行长度为 $N$，由字符 `W`（如果对应单元格为白色）和 `B`（如果为黑色）组成。\n\n文件的最后一行包含测试编号。\n", "outputFormat": "输出文件应包含一行，描述所需的操作序列。\n\n为表示向左、向上、向右或向下移动并改变**光标颜色**，应分别使用字母 `l`、`u`、`r` 或 `d`。为表示向左、向上、向右或向下移动并改变**单元格颜色**，应分别使用字母 `L`、`U`、`R` 或 `D`。如果光标移动到与其颜色相同的单元格，可以使用大写或小写字母。", "hint": "在此问题中，测试数据对参赛者可用。它们位于题目附件中。\n\n测试根据文件名编号，从 $0$ 到 $20$。示例中的测试编号为 $0$，用于初步检查。编号从 $1$ 到 $20$ 的测试用于最终检查。\n\n此任务的最终检查在一组 $20$ 个测试上进行。每个测试分值为 $5$ 分。测试独立评分。\n\n如果输出的序列包含不超过 $5,000,000$ 个操作并产生正确结果，则测试被视为通过。\n\n前 $10$ 个测试如果通过，则得 $5$ 分。\n\n剩余 $10$ 个测试的评分如下。如果测试通过：\n- 得 $5$ 分，如果答案包含不超过 $3 N^2$ 个操作；\n- 得 $4$ 分，如果答案包含不超过 $5 N^2$ 个操作；\n- 得 $3$ 分，如果答案包含不超过 $10 N^2$ 个操作；\n- 得 $2$ 分，如果答案包含不超过 $2.5 N^3$ 个操作；\n- 得 $1$ 分，如果答案包含不超过 $5,000,000$ 个操作。", "locale": "zh-CN"}}}
{"pid": "P14555", "type": "P", "difficulty": 6, "samples": [["3\n1 2 3\n1\n1 1 1 1", "1 1\n122"], ["4\n1 6 9 13\n2\n1 2 2 3\n6 7 3 3", "0"], ["5\n3 6 8 9 10\n2\n2 3 1 1\n1 4 1 10", "2 0\n21212"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072, 131072]}, "tags": ["动态规划 DP", "2013", "单调队列", "Special Judge", "动态规划优化", "ROI（俄罗斯）"], "title": "[ROI 2013 Day1] 古老王朝", "background": "", "description": "鞑靼-蒙古汗国的历史上有许多统治者。$N$ 位统治者中的每一位都属于两个王朝之一，而且权力经常从一个王朝转移到另一个王朝。\n\n每位统治者登基都会在 3 月 26 日举行庆典来纪念。编年史中记录了这些庆典举行的年份，且已知第一个王朝的统治者为人民举办马奶节，而第二个王朝则举办蜂蜜节。\n\n在关于鞑靼-蒙古汗国历史的会议上，$S$ 位学者中的每一位都提出了自己对编年史的解释版本。具体来说，第 $i$ 位历史学家声称：从每个马奶节到下一个马奶节间隔不少于 $KL_i$ 年但不超过 $KR_i$ 年，而从每个蜂蜜节到下一个蜂蜜节间隔不少于 $ML_i$ 年但不超过 $MR_i$ 年。\n\n每个提出的版本可能对应多种将统治者分配到王朝的方式。学者们一致同意将可疑性指标定义为权力转移到同一王朝代表手中的次数。\n\n需要编写一个程序，找到至少符合一个版本且具有最小可疑性指标的分配方案，以及它所对应的版本。", "inputFormat": "输入文件的第一行写有数字 $N$（$2 \\le N \\le 200,000$）——编年史中庆典的数量。下一行包含整数 $X_1, X_2, \\ldots, X_N$（$1 \\le X_1 < X_2 < \\ldots < X_N \\le 10^9$）——举行庆典的年份。\n\n第三行写有学者数量 $S$（$1 \\le S \\le 50$）。随后的 $S$ 行中每行写有四个自然数 $KL_i$, $KR_i$, $ML_i$, $MR_i$（$1 \\le KL_i \\le KR_i \\le 10^9$），（$1 \\le ML_i \\le MR_i \\le 10^9$）。", "outputFormat": "输出文件的第一行应包含数字 $P$ 和 $Q$，其中 $P$ 是其版本对应具有最小可疑性指标的分配方案的学者编号，而 $Q$ 是该分配方案的可疑性指标。\n\n第二行应由 $N$ 个数字 1 和 2 组成，不加空格，分别表示第一位或第二位王朝代表上台执政。如果存在多个具有最小可疑性指标 $Q$ 的解决方案，请输出其中任意一个。\n\n如果所有学者版本中都不存在一种将统治时期分配到王朝的方式，使得不违反节日间时间间隔的限制，则输出文件应仅包含一个数字 $0$。", "hint": "### 评分\n\n本题包含五个子任务。每个子任务的评分使用独立的测试组。仅当通过该组所有测试时，子任务的得分才会被计入。\n\n#### 子任务 1\n$2 \\le N \\le 15$，$1 \\le S \\le 10$。\n该子任务分值为 20 分。\n\n#### 子任务 2\n$2 \\le N \\le 2000$，$1 \\le S \\le 50$，$N\\times S \\le 2000$。\n该子任务分值为 20 分。\n\n#### 子任务 3\n$2 \\le N \\le 10,000$，$1 \\le S \\le 50$，$N\\times S \\le 10,000$。\n该子任务分值为 20 分。\n\n#### 子任务 4\n$2 \\le N \\le 200,000$，$1 \\le S \\le 50$，$N\\times S \\le 200,000$。\n该子任务分值为 20 分。\n\n#### 子任务 5\n$2 \\le N \\le 200,000$，$1 \\le S \\le 50$。\n该子任务分值为 20 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2013 Day1] 古老王朝", "background": "", "description": "鞑靼-蒙古汗国的历史上有许多统治者。$N$ 位统治者中的每一位都属于两个王朝之一，而且权力经常从一个王朝转移到另一个王朝。\n\n每位统治者登基都会在 3 月 26 日举行庆典来纪念。编年史中记录了这些庆典举行的年份，且已知第一个王朝的统治者为人民举办马奶节，而第二个王朝则举办蜂蜜节。\n\n在关于鞑靼-蒙古汗国历史的会议上，$S$ 位学者中的每一位都提出了自己对编年史的解释版本。具体来说，第 $i$ 位历史学家声称：从每个马奶节到下一个马奶节间隔不少于 $KL_i$ 年但不超过 $KR_i$ 年，而从每个蜂蜜节到下一个蜂蜜节间隔不少于 $ML_i$ 年但不超过 $MR_i$ 年。\n\n每个提出的版本可能对应多种将统治者分配到王朝的方式。学者们一致同意将可疑性指标定义为权力转移到同一王朝代表手中的次数。\n\n需要编写一个程序，找到至少符合一个版本且具有最小可疑性指标的分配方案，以及它所对应的版本。", "inputFormat": "输入文件的第一行写有数字 $N$（$2 \\le N \\le 200,000$）——编年史中庆典的数量。下一行包含整数 $X_1, X_2, \\ldots, X_N$（$1 \\le X_1 < X_2 < \\ldots < X_N \\le 10^9$）——举行庆典的年份。\n\n第三行写有学者数量 $S$（$1 \\le S \\le 50$）。随后的 $S$ 行中每行写有四个自然数 $KL_i$, $KR_i$, $ML_i$, $MR_i$（$1 \\le KL_i \\le KR_i \\le 10^9$），（$1 \\le ML_i \\le MR_i \\le 10^9$）。", "outputFormat": "输出文件的第一行应包含数字 $P$ 和 $Q$，其中 $P$ 是其版本对应具有最小可疑性指标的分配方案的学者编号，而 $Q$ 是该分配方案的可疑性指标。\n\n第二行应由 $N$ 个数字 1 和 2 组成，不加空格，分别表示第一位或第二位王朝代表上台执政。如果存在多个具有最小可疑性指标 $Q$ 的解决方案，请输出其中任意一个。\n\n如果所有学者版本中都不存在一种将统治时期分配到王朝的方式，使得不违反节日间时间间隔的限制，则输出文件应仅包含一个数字 $0$。", "hint": "### 评分\n\n本题包含五个子任务。每个子任务的评分使用独立的测试组。仅当通过该组所有测试时，子任务的得分才会被计入。\n\n#### 子任务 1\n$2 \\le N \\le 15$，$1 \\le S \\le 10$。\n该子任务分值为 20 分。\n\n#### 子任务 2\n$2 \\le N \\le 2000$，$1 \\le S \\le 50$，$N\\times S \\le 2000$。\n该子任务分值为 20 分。\n\n#### 子任务 3\n$2 \\le N \\le 10,000$，$1 \\le S \\le 50$，$N\\times S \\le 10,000$。\n该子任务分值为 20 分。\n\n#### 子任务 4\n$2 \\le N \\le 200,000$，$1 \\le S \\le 50$，$N\\times S \\le 200,000$。\n该子任务分值为 20 分。\n\n#### 子任务 5\n$2 \\le N \\le 200,000$，$1 \\le S \\le 50$。\n该子任务分值为 20 分。", "locale": "zh-CN"}}}
{"pid": "P14556", "type": "P", "difficulty": 4, "samples": [["7\n1 3 2 1 3 2 3", "3\n1 3 5"], ["7\n4 3 2 4 3 2 1", "0"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["动态规划 DP", "2013", "线段树", "堆", "Special Judge", "动态规划优化", "ROI（俄罗斯）"], "title": "[ROI 2013 Day2] 星际航程", "background": "", "description": "一支远征队准备乘坐新一代宇宙飞船启程。计划依次访问恒星系中的 $N$ 颗行星——从地球到胜利星。行星按访问顺序编号为 $1$ 到 $N$，地球编号为 $1$，胜利星编号为 $N$。\n\n对于行星间的飞行，飞船可以使用恒星系中存在的任何燃料类型。在远征开始前，飞船位于地球，并且飞船的燃料箱是空的。现有燃料类型用整数编号，在编号为 $i$ 的行星上只能加注类型为 $a_i$ 的燃料。访问第 $i$ 颗行星时，可以清空燃料箱中已有的燃料，然后加满类型为 $a_i$ 的燃料。\n\n每颗行星上的加油站设置使得，加注的燃料量恰好足够飞行到下一颗具有相同燃料类型的行星。如果后续没有该类型的燃料，则无法在该行星上加注。换句话说，在第 $i$ 颗行星加注后，燃料足够访问从第 $(i + 1)$ 颗到第 $j$ 颗行星（包含），其中 $j$ 是满足 $j > i$ 且 $a_j = a_i$ 的最小编号行星。为了继续远征至第 $j$ 颗行星之后，飞船需要在这些行星中的某一颗再次加注。\n\n需要编写一个程序，根据给定的行星燃料类型，确定远征所需的最小加注次数。", "inputFormat": "输入文件的第一行写有数字 $N$（$2 \\leqslant N \\leqslant 300,000$）——行星的数量。\n\n输入文件的第二行写有 $N$ 个整数 $a_1, a_2, \\ldots, a_N$（$1 \\leqslant a_i \\leqslant 300,000$）——行星上的燃料类型。\n", "outputFormat": "输出文件的第一行输出唯一数字 $K$——需要执行的最小加注次数。\n\n第二行输出 $K$ 个数字，以空格分隔——需要加注的行星编号。行星编号按加注时间顺序输出。\n\n如果存在多个具有最小加注次数的解决方案，输出其中任意一个。如果无解，输出数字 $0$。", "hint": "### 评分\n\n本题包含两个子任务。每个子任务的评分使用独立的测试组。仅当通过该组所有测试时，子任务的得分才会被计入。\n\n#### 子任务 1\n$N \\le 3000$。该子任务分值为 $50$ 分。\n\n#### 子任务 2\n$N \\le 300,000$。该子任务分值为 $50$ 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2013 Day2] 星际航程", "background": "", "description": "一支远征队准备乘坐新一代宇宙飞船启程。计划依次访问恒星系中的 $N$ 颗行星——从地球到胜利星。行星按访问顺序编号为 $1$ 到 $N$，地球编号为 $1$，胜利星编号为 $N$。\n\n对于行星间的飞行，飞船可以使用恒星系中存在的任何燃料类型。在远征开始前，飞船位于地球，并且飞船的燃料箱是空的。现有燃料类型用整数编号，在编号为 $i$ 的行星上只能加注类型为 $a_i$ 的燃料。访问第 $i$ 颗行星时，可以清空燃料箱中已有的燃料，然后加满类型为 $a_i$ 的燃料。\n\n每颗行星上的加油站设置使得，加注的燃料量恰好足够飞行到下一颗具有相同燃料类型的行星。如果后续没有该类型的燃料，则无法在该行星上加注。换句话说，在第 $i$ 颗行星加注后，燃料足够访问从第 $(i + 1)$ 颗到第 $j$ 颗行星（包含），其中 $j$ 是满足 $j > i$ 且 $a_j = a_i$ 的最小编号行星。为了继续远征至第 $j$ 颗行星之后，飞船需要在这些行星中的某一颗再次加注。\n\n需要编写一个程序，根据给定的行星燃料类型，确定远征所需的最小加注次数。", "inputFormat": "输入文件的第一行写有数字 $N$（$2 \\leqslant N \\leqslant 300,000$）——行星的数量。\n\n输入文件的第二行写有 $N$ 个整数 $a_1, a_2, \\ldots, a_N$（$1 \\leqslant a_i \\leqslant 300,000$）——行星上的燃料类型。\n", "outputFormat": "输出文件的第一行输出唯一数字 $K$——需要执行的最小加注次数。\n\n第二行输出 $K$ 个数字，以空格分隔——需要加注的行星编号。行星编号按加注时间顺序输出。\n\n如果存在多个具有最小加注次数的解决方案，输出其中任意一个。如果无解，输出数字 $0$。", "hint": "### 评分\n\n本题包含两个子任务。每个子任务的评分使用独立的测试组。仅当通过该组所有测试时，子任务的得分才会被计入。\n\n#### 子任务 1\n$N \\le 3000$。该子任务分值为 $50$ 分。\n\n#### 子任务 2\n$N \\le 300,000$。该子任务分值为 $50$ 分。", "locale": "zh-CN"}}}
{"pid": "P14557", "type": "P", "difficulty": 4, "samples": [["8 2 3\n4\n1", "4\n0 5\n1"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["数学", "2013", "交互题", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2013 Day2] 海战", "background": "交互库来自 [LibreOJ](https://loj.ac/p/5445)。", "description": "作为乌拉尔锦标赛的一部分，计划举办“一维海战”游戏策略比赛。\n\n游戏在战场上进行，战场是一个 $1 \\times N$ 个单元格的矩形。战场上放置了 $T$ 艘战舰，每艘战舰是一个 $1 \\times K$ 个单元格的矩形。如果不同的战舰没有共用单元格且至少被一个空单元格分隔，则战场上的战舰布置是 **允许的**。游戏程序向战场上的单元格发射炮弹，服务器报告该射击是未命中还是命中战舰。\n\n在游戏过程中，某些单元格被确认为：在任何允许的战舰布置下，它们都属于某艘战舰。我们称这些单元格为 **明确被占** 单元格。\n\n游戏在首次命中战舰后结束。服务器试图使游戏尽可能长时间地进行。为此，它不在游戏开始时固定战舰布置，而是考虑所有可能的允许布置，并且仅当射击的单元格是明确被占单元格时才报告命中。\n\n需要编写一个程序，扮演该游戏的服务器角色。服务器首先加载游戏参数，然后与游戏程序交互，在每次射击后报告未命中或命中的信息，以及明确被占单元格的数量。\n\n### 交互格式\n\n**本题是交互题。** 每次输出后需要刷新输出缓冲区。\n\n游戏程序由评测系统程序扮演。解题程序扮演服务器角色。\n\n解题程序的标准输入第一行包含游戏参数——三个数字：$N$ 表示战场大小，$T$ 表示战舰数量，$K$ 表示每艘战舰的长度（$1 \\le N \\le 100,000$，$1 \\le T$，$1 \\le K$）。保证在长度为 $N$ 的战场上可以按照所述规则放置 $T$ 艘长度为 $K$ 的战舰。\n\n读取游戏参数后，解题程序必须确定并输出到标准输出流中明确被占单元格的数量。\n\n然后游戏开始。解题程序必须依次从标准输入流读取游戏程序的走步，并按以下方式处理：\n\n1. 从标准输入流读取一个数字 $q$——游戏程序射击的单元格编号（$1 \\leqslant q \\leqslant N$）。游戏程序永远不会两次射击同一个单元格。\n2. 如果单元格 $q$ 是明确被占的，则输出数字 $1$ 到标准输出流并结束工作。\n3. 如果单元格 $q$ 不是明确被占的，则输出两个用空格分隔的数字到标准输出流：$0$ 和此次射击后明确被占单元格的数量。\n   \n之后，解题程序转到第 1 步，继续与游戏程序交互。", "inputFormat": "", "outputFormat": "", "hint": "### 样例解释\n\n游戏在由 $8$ 个单元格组成的战场上展开，战场上放置了 $2$ 艘战舰，每艘由 $3$ 个单元格组成。所有允许的战舰布置如图 1 所示。标记为 `#` 的单元格是明确被占的。这样的单元格有 $4$ 个。\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hbfr2r1v.png)\n\n图 1. 游戏开始时允许的战舰布置。\n:::\n\n第一次射击针对编号为 $4$ 的单元格。这次射击被视为未命中，剩余允许的战舰布置如图 2 所示。现在有 $5$ 个单元格是明确被占的。\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4b6z3pws.png)\n\n图 2. 第一次射击后允许的战舰布置。\n:::\n\n第二次射击针对编号为 $1$ 的单元格，该单元格不可能是明确被占的，因此游戏结束。\n\n### 评分\n\n本题包含三个子任务。每个子任务的评分使用独立的测试组。仅当通过该组所有测试时，子任务的得分才会被计入。\n\n#### 子任务 1\n$N \\le 15$。该子任务分值为 $30$ 分。\n\n#### 子任务 2\n$N \\le 3000$。该子任务分值为 $30$ 分。\n\n#### 子任务 3\n$N \\le 100,000$。该子任务分值为 $40$ 分。\n", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2013 Day2] 海战", "background": "交互库来自 [LibreOJ](https://loj.ac/p/5445)。", "description": "作为乌拉尔锦标赛的一部分，计划举办“一维海战”游戏策略比赛。\n\n游戏在战场上进行，战场是一个 $1 \\times N$ 个单元格的矩形。战场上放置了 $T$ 艘战舰，每艘战舰是一个 $1 \\times K$ 个单元格的矩形。如果不同的战舰没有共用单元格且至少被一个空单元格分隔，则战场上的战舰布置是 **允许的**。游戏程序向战场上的单元格发射炮弹，服务器报告该射击是未命中还是命中战舰。\n\n在游戏过程中，某些单元格被确认为：在任何允许的战舰布置下，它们都属于某艘战舰。我们称这些单元格为 **明确被占** 单元格。\n\n游戏在首次命中战舰后结束。服务器试图使游戏尽可能长时间地进行。为此，它不在游戏开始时固定战舰布置，而是考虑所有可能的允许布置，并且仅当射击的单元格是明确被占单元格时才报告命中。\n\n需要编写一个程序，扮演该游戏的服务器角色。服务器首先加载游戏参数，然后与游戏程序交互，在每次射击后报告未命中或命中的信息，以及明确被占单元格的数量。\n\n### 交互格式\n\n**本题是交互题。** 每次输出后需要刷新输出缓冲区。\n\n游戏程序由评测系统程序扮演。解题程序扮演服务器角色。\n\n解题程序的标准输入第一行包含游戏参数——三个数字：$N$ 表示战场大小，$T$ 表示战舰数量，$K$ 表示每艘战舰的长度（$1 \\le N \\le 100,000$，$1 \\le T$，$1 \\le K$）。保证在长度为 $N$ 的战场上可以按照所述规则放置 $T$ 艘长度为 $K$ 的战舰。\n\n读取游戏参数后，解题程序必须确定并输出到标准输出流中明确被占单元格的数量。\n\n然后游戏开始。解题程序必须依次从标准输入流读取游戏程序的走步，并按以下方式处理：\n\n1. 从标准输入流读取一个数字 $q$——游戏程序射击的单元格编号（$1 \\leqslant q \\leqslant N$）。游戏程序永远不会两次射击同一个单元格。\n2. 如果单元格 $q$ 是明确被占的，则输出数字 $1$ 到标准输出流并结束工作。\n3. 如果单元格 $q$ 不是明确被占的，则输出两个用空格分隔的数字到标准输出流：$0$ 和此次射击后明确被占单元格的数量。\n   \n之后，解题程序转到第 1 步，继续与游戏程序交互。", "inputFormat": "", "outputFormat": "", "hint": "### 样例解释\n\n游戏在由 $8$ 个单元格组成的战场上展开，战场上放置了 $2$ 艘战舰，每艘由 $3$ 个单元格组成。所有允许的战舰布置如图 1 所示。标记为 `#` 的单元格是明确被占的。这样的单元格有 $4$ 个。\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/hbfr2r1v.png)\n\n图 1. 游戏开始时允许的战舰布置。\n:::\n\n第一次射击针对编号为 $4$ 的单元格。这次射击被视为未命中，剩余允许的战舰布置如图 2 所示。现在有 $5$ 个单元格是明确被占的。\n\n:::align{center}\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4b6z3pws.png)\n\n图 2. 第一次射击后允许的战舰布置。\n:::\n\n第二次射击针对编号为 $1$ 的单元格，该单元格不可能是明确被占的，因此游戏结束。\n\n### 评分\n\n本题包含三个子任务。每个子任务的评分使用独立的测试组。仅当通过该组所有测试时，子任务的得分才会被计入。\n\n#### 子任务 1\n$N \\le 15$。该子任务分值为 $30$ 分。\n\n#### 子任务 2\n$N \\le 3000$。该子任务分值为 $30$ 分。\n\n#### 子任务 3\n$N \\le 100,000$。该子任务分值为 $40$ 分。\n", "locale": "zh-CN"}}}
{"pid": "P14558", "type": "P", "difficulty": 6, "samples": [["5 2\n1 2 1 2 1", "9"], ["3 7\n5 2 6", "3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "ROI（俄罗斯）"], "title": "[ROI 2013 Day2] 大规模预测", "background": "", "description": "在学校信息学俱乐部主席选举中，有 $K$ 名候选人和 $N$ 名选民。候选人编号从 $1$ 到 $K$，选民编号从 $1$ 到 $N$。\n\n根据投票结果生成一个列表，该列表的第 $i$ 个元素等于第 $i$ 名选民投票支持的候选人编号。为列表的每个区间指派一名观察员，统计该区间内的票数。因此，选举中共有 $N(N + 1) / 2$ 名观察员工作。\n\n如果观察员发现在其负责的区间内有候选人获得超过半数的票数，他会在社交网络上发布预测，认为该候选人将在选举中获胜。\n\n需要编写一个程序，根据投票列表确定观察员发布的预测数量。", "inputFormat": "输入文件的第一行包含两个数字 $N$ 和 $K$（$1 \\le N \\le 500,000$，$1 \\le K \\le 500,000$）。\n第二行包含 $N$ 个数字 $V_1, V_2, \\ldots, V_N$——选民的投票列表（$1 \\le V_i \\le K$）。\n", "outputFormat": "输出文件应包含一个数字——预测的数量。", "hint": "此题的最终解答检查使用 $50$ 个测试。测试独立评分。每个测试分值为 $2$ 分。测试中 $N$ 和 $K$ 的值见下表。\n\n| **测试** | $\\mathbf{N}$ | $\\mathbf{K}$ | **测试** | $\\mathbf{N}$ | $\\mathbf{K}$ | **测试** | $\\mathbf{N}$ | $\\mathbf{K}$ |\n|:--------:|:------------:|:------------:|:--------:|:------------:|:------------:|:--------:|:------------:|:------------:|\n| $1.$     | $2$          | $2$          | $18.$    | $2000$       | $20$         | $35.$    | $90000$      | $1000$       |\n| $2.$     | $3$          | $1$          | $19.$    | $3000$       | $2000$       | $36.$    | $100000$     | $5000$       |\n| $3.$     | $5$          | $5$          | $20.$    | $5000$       | $2000$       | $37.$    | $125000$     | $1$          |\n| $4.$     | $10$         | $10$         | $21.$    | $7500$       | $200$        | $38.$    | $150000$     | $12000$      |\n| $5.$     | $20$         | $2$          | $22.$    | $10000$      | $10000$      | $39.$    | $150000$     | $18$         |\n| $6.$     | $30$         | $3$          | $23.$    | $15000$      | $1500$       | $40.$    | $200000$     | $42000$      |\n| $7.$     | $50$         | $20$         | $24.$    | $20000$      | $10$         | $41.$    | $250000$     | $26000$      |\n| $8.$     | $75$         | $75$         | $25.$    | $25000$      | $100$        | $42.$    | $300000$     | $10000$      |\n| $9.$     | $100$        | $2000$       | $26.$    | $30000$      | $15$         | $43.$    | $350000$     | $102000$     |\n| $10.$    | $150$        | $30$         | $27.$    | $35000$      | $35$         | $44.$    | $400000$     | $12000$      |\n| $11.$    | $200$        | $50$         | $28.$    | $40000$      | $10000$      | $45.$    | $450000$     | $5000$       |\n| $12.$    | $300$        | $10$         | $29.$    | $45000$      | $10000$      | $46.$    | $500000$     | $2$          |\n| $13.$    | $400$        | $100$        | $30.$    | $50000$      | $10000$      | $47.$    | $500000$     | $102000$     |\n| $14.$    | $500$        | $2$          | $31.$    | $55000$      | $13000$      | $48.$    | $500000$     | $102000$     |\n| $15.$    | $300$        | $200$        | $32.$    | $60000$      | $174$        | $49.$    | $500000$     | $102000$     |\n| $16.$    | $1000$       | $2000$       | $33.$    | $70000$      | $10000$      | $50.$    | $500000$     | $501$        |\n| $17.$    | $1500$       | $100$        | $34.$    | $80000$      | $1000$       |          |              |              |\n\n---\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2013 Day2] 大规模预测", "background": "", "description": "在学校信息学俱乐部主席选举中，有 $K$ 名候选人和 $N$ 名选民。候选人编号从 $1$ 到 $K$，选民编号从 $1$ 到 $N$。\n\n根据投票结果生成一个列表，该列表的第 $i$ 个元素等于第 $i$ 名选民投票支持的候选人编号。为列表的每个区间指派一名观察员，统计该区间内的票数。因此，选举中共有 $N(N + 1) / 2$ 名观察员工作。\n\n如果观察员发现在其负责的区间内有候选人获得超过半数的票数，他会在社交网络上发布预测，认为该候选人将在选举中获胜。\n\n需要编写一个程序，根据投票列表确定观察员发布的预测数量。", "inputFormat": "输入文件的第一行包含两个数字 $N$ 和 $K$（$1 \\le N \\le 500,000$，$1 \\le K \\le 500,000$）。\n第二行包含 $N$ 个数字 $V_1, V_2, \\ldots, V_N$——选民的投票列表（$1 \\le V_i \\le K$）。\n", "outputFormat": "输出文件应包含一个数字——预测的数量。", "hint": "此题的最终解答检查使用 $50$ 个测试。测试独立评分。每个测试分值为 $2$ 分。测试中 $N$ 和 $K$ 的值见下表。\n\n| **测试** | $\\mathbf{N}$ | $\\mathbf{K}$ | **测试** | $\\mathbf{N}$ | $\\mathbf{K}$ | **测试** | $\\mathbf{N}$ | $\\mathbf{K}$ |\n|:--------:|:------------:|:------------:|:--------:|:------------:|:------------:|:--------:|:------------:|:------------:|\n| $1.$     | $2$          | $2$          | $18.$    | $2000$       | $20$         | $35.$    | $90000$      | $1000$       |\n| $2.$     | $3$          | $1$          | $19.$    | $3000$       | $2000$       | $36.$    | $100000$     | $5000$       |\n| $3.$     | $5$          | $5$          | $20.$    | $5000$       | $2000$       | $37.$    | $125000$     | $1$          |\n| $4.$     | $10$         | $10$         | $21.$    | $7500$       | $200$        | $38.$    | $150000$     | $12000$      |\n| $5.$     | $20$         | $2$          | $22.$    | $10000$      | $10000$      | $39.$    | $150000$     | $18$         |\n| $6.$     | $30$         | $3$          | $23.$    | $15000$      | $1500$       | $40.$    | $200000$     | $42000$      |\n| $7.$     | $50$         | $20$         | $24.$    | $20000$      | $10$         | $41.$    | $250000$     | $26000$      |\n| $8.$     | $75$         | $75$         | $25.$    | $25000$      | $100$        | $42.$    | $300000$     | $10000$      |\n| $9.$     | $100$        | $2000$       | $26.$    | $30000$      | $15$         | $43.$    | $350000$     | $102000$     |\n| $10.$    | $150$        | $30$         | $27.$    | $35000$      | $35$         | $44.$    | $400000$     | $12000$      |\n| $11.$    | $200$        | $50$         | $28.$    | $40000$      | $10000$      | $45.$    | $450000$     | $5000$       |\n| $12.$    | $300$        | $10$         | $29.$    | $45000$      | $10000$      | $46.$    | $500000$     | $2$          |\n| $13.$    | $400$        | $100$        | $30.$    | $50000$      | $10000$      | $47.$    | $500000$     | $102000$     |\n| $14.$    | $500$        | $2$          | $31.$    | $55000$      | $13000$      | $48.$    | $500000$     | $102000$     |\n| $15.$    | $300$        | $200$        | $32.$    | $60000$      | $174$        | $49.$    | $500000$     | $102000$     |\n| $16.$    | $1000$       | $2000$       | $33.$    | $70000$      | $10000$      | $50.$    | $500000$     | $501$        |\n| $17.$    | $1500$       | $100$        | $34.$    | $80000$      | $1000$       |          |              |              |\n\n---\n\n翻译由 DeepSeek V3 完成", "locale": "zh-CN"}}}
{"pid": "P14559", "type": "P", "difficulty": 6, "samples": [["5\n2 1 2 4\n2 4 4 4\n5 1 1 1\n4 4 4 2\n4 2 1 2", "5\n1 2\n4 3\n1 1\n3 4\n2 3"], ["3\n1 1 1 3\n2 1 2 3\n1 2 2 2", "0"], ["4\n1 1 1 3\n2 1 2 3\n3 3 3 1\n1 3 4 3", "4\n4 3\n3 1\n2 1\n1 1\n"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144, 262144]}, "tags": ["2013", "Special Judge", "ROI（俄罗斯）"], "title": "[ROI 2013 Day2] 快闪活动", "background": "", "description": "为参赛者在城市\"U\"的中心广场计划举办一场快闪形式的游戏。中心广场铺有地砖，形成一个网格状场地。\n\n首先制定游戏计划：每个快闪活动参与者获得一个出场顺序编号和广场上两个不同地砖的坐标，这两个地砖位于同一行或同一列。之后在广场上放置奖品，然后参与者按顺序出场。当前参与者拾取指定给他的两个单元格及其之间所有单元格中的所有奖品。\n\n奖品必须被放置得使每个参与者至少获得一个奖品。\n\n需要编写一个程序，根据游戏计划找出所需的最小奖品数量，以及应该将这些奖品放置在哪些地砖上。", "inputFormat": "输入文件的第一行包含数字 $N$——快闪活动的参与者数量（$1 \\le N \\le 123,456$）。\n\n随后的 $N$ 行每行包含四个整数 $x_{1i}$, $y_{1i}$, $x_{2i}$, $y_{2i}$——第 $i$ 个参与者的地砖坐标（$1 \\le x_{1i}, y_{1i}, x_{2i}, y_{2i} \\le 10^9$；要么 $x_{1i}=x_{2i}$，要么 $y_{1i}=y_{2i}$）。\n\n参与者按出场顺序列出。", "outputFormat": "输出文件的第一行应包含数字 $M$——需要放置在广场上的最小奖品数量。随后的 $M$ 行每行应包含两个数字 $px_i$ 和 $py_i$——放置第 $i$ 个奖品的地砖坐标。\n\n如果存在多个满足题目条件的奖品放置方案，则输出其中任意一个。如果无解，则仅输出数字 $0$。", "hint": "### 评分\n\n本题包含三个子任务。每个子任务的评分使用独立的测试组。\n前两个子任务的得分仅当通过该组所有测试时才会被计入。\n第三个子任务的每个测试独立评分。\n\n#### 子任务 1\n$N \\le 123$。所有坐标不超过 $234$。\n该子任务分值为 21 分。\n\n#### 子任务 2\n$N \\le 2543$。\n该子任务分值为 23 分。\n\n#### 子任务 3\n$N \\le 123,456$。\n该子任务分值为 56 分。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[ROI 2013 Day2] 快闪活动", "background": "", "description": "为参赛者在城市\"U\"的中心广场计划举办一场快闪形式的游戏。中心广场铺有地砖，形成一个网格状场地。\n\n首先制定游戏计划：每个快闪活动参与者获得一个出场顺序编号和广场上两个不同地砖的坐标，这两个地砖位于同一行或同一列。之后在广场上放置奖品，然后参与者按顺序出场。当前参与者拾取指定给他的两个单元格及其之间所有单元格中的所有奖品。\n\n奖品必须被放置得使每个参与者至少获得一个奖品。\n\n需要编写一个程序，根据游戏计划找出所需的最小奖品数量，以及应该将这些奖品放置在哪些地砖上。", "inputFormat": "输入文件的第一行包含数字 $N$——快闪活动的参与者数量（$1 \\le N \\le 123,456$）。\n\n随后的 $N$ 行每行包含四个整数 $x_{1i}$, $y_{1i}$, $x_{2i}$, $y_{2i}$——第 $i$ 个参与者的地砖坐标（$1 \\le x_{1i}, y_{1i}, x_{2i}, y_{2i} \\le 10^9$；要么 $x_{1i}=x_{2i}$，要么 $y_{1i}=y_{2i}$）。\n\n参与者按出场顺序列出。", "outputFormat": "输出文件的第一行应包含数字 $M$——需要放置在广场上的最小奖品数量。随后的 $M$ 行每行应包含两个数字 $px_i$ 和 $py_i$——放置第 $i$ 个奖品的地砖坐标。\n\n如果存在多个满足题目条件的奖品放置方案，则输出其中任意一个。如果无解，则仅输出数字 $0$。", "hint": "### 评分\n\n本题包含三个子任务。每个子任务的评分使用独立的测试组。\n前两个子任务的得分仅当通过该组所有测试时才会被计入。\n第三个子任务的每个测试独立评分。\n\n#### 子任务 1\n$N \\le 123$。所有坐标不超过 $234$。\n该子任务分值为 21 分。\n\n#### 子任务 2\n$N \\le 2543$。\n该子任务分值为 23 分。\n\n#### 子任务 3\n$N \\le 123,456$。\n该子任务分值为 56 分。", "locale": "zh-CN"}}}
{"pid": "P14560", "type": "P", "difficulty": 7, "samples": [["5\n1\n2\n4\n6\n9", "1\n3\n27\n270\n10350"]], "limits": {"time": [2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["字符串", "动态规划 DP", "贪心", "多项式", "生成函数", "字典树 Trie"], "title": "CF1152D 加强版", "background": "", "description": "有一个由所有长度为 $2n$ 的合法括号（括号序列中只含有 `(` 和 `)`）序列组成的 Trie 树，问在该树上最多可以选取多少条边，使得任意两条边之间都没有公共端点。\n\n因为答案可能很大，所以你只需要输出其对 $10^9+7$ 取模后的结果即可。\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$ 表示共有 $T$ 组数据。\n\n对于每组数据：\n\n+ 一行一个整数 $n$。", "outputFormat": "一行一个整数表示答案。", "hint": "对于 $20\\%$ 的分数满足 $n\\le 1000$。\n\n对于 $50\\%$ 的分数满足 $n\\le 2\\times 10^5$。\n\n对于全部的分数满足 $1\\le T\\le 10^5,1\\le n\\le 10^7$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "CF1152D 加强版", "background": "", "description": "有一个由所有长度为 $2n$ 的合法括号（括号序列中只含有 `(` 和 `)`）序列组成的 Trie 树，问在该树上最多可以选取多少条边，使得任意两条边之间都没有公共端点。\n\n因为答案可能很大，所以你只需要输出其对 $10^9+7$ 取模后的结果即可。\n", "inputFormat": "**本题有多组数据。**\n\n第一行一个整数 $T$ 表示共有 $T$ 组数据。\n\n对于每组数据：\n\n+ 一行一个整数 $n$。", "outputFormat": "一行一个整数表示答案。", "hint": "对于 $20\\%$ 的分数满足 $n\\le 1000$。\n\n对于 $50\\%$ 的分数满足 $n\\le 2\\times 10^5$。\n\n对于全部的分数满足 $1\\le T\\le 10^5,1\\le n\\le 10^7$。", "locale": "zh-CN"}}}
{"pid": "P14561", "type": "P", "difficulty": 7, "samples": [["3 1", "1\n2\n499122179"], ["7 0", "195751937"]], "limits": {"time": [4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000, 4000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "图论", "多项式", "期望", "快速数论变换 NTT"], "title": "[CXOI2025] 我常常追忆过去", "background": ":::epigraph[——联合省选2025 追忆]\n我常常追忆过去。\n:::", "description": "小 $\\bf\\Delta$ 常常追忆过去。但是她在追忆过去之前需要先解决下面这个问题。\n\n给定整数 $m$，你需要对每个 $n=1\\ldots m$ 都求解下面的问题：\n\n> 有一张 $n$ 个点的竞赛图，对于每个二元组 $(u,v)$（$1\\le u<v\\le n$），有 $\\frac12$ 的概率在图上存在一条由 $u$ 连向 $v$ 的边，另外 $\\frac12$ 的概率在图上存在一条由 $v$ 连向 $u$ 的边。\n>\n> 你需要求出这张竞赛图上 SCC（强连通分量）的期望个数，答案对 $998244353$ 取模。", "inputFormat": "一行两个整数 $m,op$，其中 $op$ 为输出参数，其用途在后面有解释。", "outputFormat": "若 $op=1$：\n\n+ $m$ 行，第 $i$ 行一个整数表示当 $n=i$ 时的答案。\n\n若 $op=0$：\n\n+ 一行一个整数，表示每个 $n=1\\ldots m$ 得到的答案对 $998244353$ 取模**之后**的按位异或值（最后的按位异或值是不取模的）。", "hint": "**本题采用捆绑测试。**\n\n对于 $20\\%$ 的分数满足 $m\\le 200$。\n\n对于 $50\\%$ 的分数满足 $m\\le 4000$。\n\n对于 $80\\%$ 的分数满足 $m\\le 10^5$。\n\n对于全部的分数，满足 $1\\le m\\le 2\\times 10^6,op\\in\\lbrace 0,1\\rbrace$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "[CXOI2025] 我常常追忆过去", "background": ":::epigraph[——联合省选2025 追忆]\n我常常追忆过去。\n:::", "description": "小 $\\bf\\Delta$ 常常追忆过去。但是她在追忆过去之前需要先解决下面这个问题。\n\n给定整数 $m$，你需要对每个 $n=1\\ldots m$ 都求解下面的问题：\n\n> 有一张 $n$ 个点的竞赛图，对于每个二元组 $(u,v)$（$1\\le u<v\\le n$），有 $\\frac12$ 的概率在图上存在一条由 $u$ 连向 $v$ 的边，另外 $\\frac12$ 的概率在图上存在一条由 $v$ 连向 $u$ 的边。\n>\n> 你需要求出这张竞赛图上 SCC（强连通分量）的期望个数，答案对 $998244353$ 取模。", "inputFormat": "一行两个整数 $m,op$，其中 $op$ 为输出参数，其用途在后面有解释。", "outputFormat": "若 $op=1$：\n\n+ $m$ 行，第 $i$ 行一个整数表示当 $n=i$ 时的答案。\n\n若 $op=0$：\n\n+ 一行一个整数，表示每个 $n=1\\ldots m$ 得到的答案对 $998244353$ 取模**之后**的按位异或值（最后的按位异或值是不取模的）。", "hint": "**本题采用捆绑测试。**\n\n对于 $20\\%$ 的分数满足 $m\\le 200$。\n\n对于 $50\\%$ 的分数满足 $m\\le 4000$。\n\n对于 $80\\%$ 的分数满足 $m\\le 10^5$。\n\n对于全部的分数，满足 $1\\le m\\le 2\\times 10^6,op\\in\\lbrace 0,1\\rbrace$。", "locale": "zh-CN"}}}
{"pid": "P14562", "type": "P", "difficulty": 4, "samples": [["0 3\n1 2 3", "1 3"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["数学", "贪心", "二分", "双指针 two-pointer"], "title": "宇宙", "background": "", "description": "Yuki 是一个来自异世界的次元少女！\n\n她生活在 $n$ 维宇宙的一艘飞船上，坐标为 $(v_1,\\dots,v_n)$。突然，她的探测器显示宇宙原点处有一个黑洞正在扩张：对于所有正整数 $i$，在第 $i$ 秒时，如果飞船的某一维坐标小于或等于 $i$，那么 Yuki 和她的飞船就会被黑洞吃掉！\n\n为了逃生，Yuki 需要尽力远离黑洞：对于所有正整数 $i$，在第 $i-0.5$ 秒时，如果 Yuki 还没有被黑洞吃掉，那么她需要选择 $k$ 个**不同的**维度 $s_1,\\dots,s_k$，将 $v_{s_1},\\dots,v_{s_k}$ 均增加 $1$。\n\n不过，由于飞船的仪表盘坏了，Yuki 并不知道飞船还剩余多少燃料。所以，她想请你对于每个小于 $n$ 的正整数 $k$ 求出最大的非负整数 $x$，满足在最优策略下，第 $x$ 秒时 Yuki 还没有被黑洞吃掉。容易证明这样的非负整数 $x$ 存在。", "inputFormat": "第一行包含两个整数 $c,n$，其中 $c$ 表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含 $n$ 个整数 $v_1,\\dots,v_n$。", "outputFormat": "输出一行，包含 $n-1$ 个整数，其中第 $i$ 个整数表示 $k=i$ 时的答案。\n", "hint": "### 样例 1 解释\n\n对于 $k=1$ 的情况，Yuki 可以在第 $0.5$ 秒时将坐标从 $(1,2,3)$ 修改为 $(2,2,3)$。容易证明在第 $2$ 秒时 Yuki 一定会被黑洞吃掉，所以答案为 $1$。\n\n对于 $k=2$ 的情况，Yuki 可以在第 $0.5,1.5,2.5$ 秒时将坐标分别修改为 $(2,3,3),(3,3,4),(4,4,4)$。容易证明在第 $4$ 秒时 Yuki 一定会被黑洞吃掉，所以答案为 $3$。\n\n### 样例 2\n\n见下发文件中的 $\\textbf{\\textit{universe/universe2.in}}$ 与 $\\textbf{\\textit{universe2.ans}}$。\n\n该组样例满足测试点 $3$ 的限制。\n\n### 样例 3\n\n见下发文件中的 $\\textbf{\\textit{universe/universe3.in}}$ 与 $\\textbf{\\textit{universe3.ans}}$。\n\n该组样例满足测试点 $6$ 的限制。\n\n### 样例 4\n\n见下发文件中的 $\\textbf{\\textit{universe/universe4.in}}$ 与 $\\textbf{\\textit{universe4.ans}}$。\n\n该组样例满足测试点 $9$ 的限制。\n\n### 样例 5\n\n见下发文件中的 $\\textbf{\\textit{universe/universe5.in}}$ 与 $\\textbf{\\textit{universe5.ans}}$。\n\n该组样例满足测试点 $15$ 的限制。\n\n### 样例 6\n\n见下发文件中的 $\\textbf{\\textit{universe/universe6.in}}$ 与 $\\textbf{\\textit{universe6.ans}}$。\n\n该组样例满足测试点 $20$ 的限制。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $2 \\le n \\le 10^6$；\n- $1 \\le v_i \\le 10^9$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\le$ | $v_i \\le$ | 特殊性质 |\n| :--------: | :-----: | :-------: | :------: |\n|  $1\\sim2$  |  $80$   |   $80$    |    是    |\n|  $3\\sim5$  |  $80$   |   $80$    |    否    |\n|  $6\\sim8$  | $10^3$  |  $10^9$   |    是    |\n| $9\\sim12$  | $10^3$  |  $10^9$   |    否    |\n| $13\\sim14$ | $10^6$  |  $10^6$   |    是    |\n| $15\\sim16$ | $10^6$  |  $10^6$   |    否    |\n| $17\\sim18$ | $10^6$  |  $10^9$   |    是    |\n| $19\\sim20$ | $10^6$  |  $10^9$   |    否    |\n\n特殊性质：保证所有 $v_i$ 均相等。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "宇宙", "background": "", "description": "Yuki 是一个来自异世界的次元少女！\n\n她生活在 $n$ 维宇宙的一艘飞船上，坐标为 $(v_1,\\dots,v_n)$。突然，她的探测器显示宇宙原点处有一个黑洞正在扩张：对于所有正整数 $i$，在第 $i$ 秒时，如果飞船的某一维坐标小于或等于 $i$，那么 Yuki 和她的飞船就会被黑洞吃掉！\n\n为了逃生，Yuki 需要尽力远离黑洞：对于所有正整数 $i$，在第 $i-0.5$ 秒时，如果 Yuki 还没有被黑洞吃掉，那么她需要选择 $k$ 个**不同的**维度 $s_1,\\dots,s_k$，将 $v_{s_1},\\dots,v_{s_k}$ 均增加 $1$。\n\n不过，由于飞船的仪表盘坏了，Yuki 并不知道飞船还剩余多少燃料。所以，她想请你对于每个小于 $n$ 的正整数 $k$ 求出最大的非负整数 $x$，满足在最优策略下，第 $x$ 秒时 Yuki 还没有被黑洞吃掉。容易证明这样的非负整数 $x$ 存在。", "inputFormat": "第一行包含两个整数 $c,n$，其中 $c$ 表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含 $n$ 个整数 $v_1,\\dots,v_n$。", "outputFormat": "输出一行，包含 $n-1$ 个整数，其中第 $i$ 个整数表示 $k=i$ 时的答案。\n", "hint": "### 样例 1 解释\n\n对于 $k=1$ 的情况，Yuki 可以在第 $0.5$ 秒时将坐标从 $(1,2,3)$ 修改为 $(2,2,3)$。容易证明在第 $2$ 秒时 Yuki 一定会被黑洞吃掉，所以答案为 $1$。\n\n对于 $k=2$ 的情况，Yuki 可以在第 $0.5,1.5,2.5$ 秒时将坐标分别修改为 $(2,3,3),(3,3,4),(4,4,4)$。容易证明在第 $4$ 秒时 Yuki 一定会被黑洞吃掉，所以答案为 $3$。\n\n### 样例 2\n\n见下发文件中的 $\\textbf{\\textit{universe/universe2.in}}$ 与 $\\textbf{\\textit{universe2.ans}}$。\n\n该组样例满足测试点 $3$ 的限制。\n\n### 样例 3\n\n见下发文件中的 $\\textbf{\\textit{universe/universe3.in}}$ 与 $\\textbf{\\textit{universe3.ans}}$。\n\n该组样例满足测试点 $6$ 的限制。\n\n### 样例 4\n\n见下发文件中的 $\\textbf{\\textit{universe/universe4.in}}$ 与 $\\textbf{\\textit{universe4.ans}}$。\n\n该组样例满足测试点 $9$ 的限制。\n\n### 样例 5\n\n见下发文件中的 $\\textbf{\\textit{universe/universe5.in}}$ 与 $\\textbf{\\textit{universe5.ans}}$。\n\n该组样例满足测试点 $15$ 的限制。\n\n### 样例 6\n\n见下发文件中的 $\\textbf{\\textit{universe/universe6.in}}$ 与 $\\textbf{\\textit{universe6.ans}}$。\n\n该组样例满足测试点 $20$ 的限制。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $2 \\le n \\le 10^6$；\n- $1 \\le v_i \\le 10^9$。\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\le$ | $v_i \\le$ | 特殊性质 |\n| :--------: | :-----: | :-------: | :------: |\n|  $1\\sim2$  |  $80$   |   $80$    |    是    |\n|  $3\\sim5$  |  $80$   |   $80$    |    否    |\n|  $6\\sim8$  | $10^3$  |  $10^9$   |    是    |\n| $9\\sim12$  | $10^3$  |  $10^9$   |    否    |\n| $13\\sim14$ | $10^6$  |  $10^6$   |    是    |\n| $15\\sim16$ | $10^6$  |  $10^6$   |    否    |\n| $17\\sim18$ | $10^6$  |  $10^9$   |    是    |\n| $19\\sim20$ | $10^6$  |  $10^9$   |    否    |\n\n特殊性质：保证所有 $v_i$ 均相等。", "locale": "zh-CN"}}}
{"pid": "P14563", "type": "P", "difficulty": 5, "samples": [["0 8 3 2 1\n11001111\n1 7\n7 5\n2 5", "1 3\n0 1\n1 2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["贪心", "倍增"], "title": "跳跃", "background": "", "description": "Yuki 是一个可可爱爱的小魔女！\n\nYuki 的面前有一条长度为 $n$ 的斑马线，其可以用一个长度为 $n$ 的 $\\texttt{01}$ 串 $s$ 描述（下标从 $1$ 开始）：\n\n- 若 $s_i=\\texttt 0$，则表示这条斑马线上的第 $i$ 个位置为黑色；\n- 若 $s_i=\\texttt 1$，则表示这条斑马线上的第 $i$ 个位置为白色。\n\n同时，Yuki 有一个跳跃能力 $k$，表示当她位于位置 $x$ 时，她可以通过一次跳跃，移动到任意一个满足 $\\max(1,x-k)\\le y\\le \\min(n,x+k)$ 的位置 $y$。\n\n接下来，Yuki 会在斑马线上进行 $q$ 轮跳跃：\n\n- 第 $i$ 轮跳跃中，Yuki 初始时位于位置 $a_i$，她希望通过若干次跳跃**恰好**移动到位置 $b_i$；其中，**保证位置 $\\boldsymbol{a_i}$ 和位置 $\\boldsymbol{b_i}$ 均为白色且 $\\boldsymbol{a_i}$ 不等于 $\\boldsymbol{b_i}$**，即 $s_{a_i}=s_{b_i}=\\texttt 1$ 且 $a_i \\ne b_i$。\n- 若 $t=0$，则 Yuki 只希望最小化她跳跃后踩到黑色位置的次数；若 $t=1$，则 Yuki 希望在最小化她跳跃后踩到黑色位置的次数的基础上，最小化跳跃次数。\n\nYuki 需要你帮助她求出每轮跳跃的答案。\n\n（在斑马线上嬉戏打闹是不好的行为，小朋友不要学！）", "inputFormat": "第一行包含五个整数 $c,n,q,k,t$，其中 $c$ 表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含一个长度为 $n$ 的 $\\texttt{01}$ 串 $s$。\n\n接下来 $q$ 行，第 $i$ 行包含两个整数 $a_i,b_i$。", "outputFormat": "输出 $q$ 行：\n\n- 若 $t=0$，则第 $i$ 行包含一个整数，表示第 $i$ 轮跳跃中，Yuki 跳跃后踩到黑色位置的次数的最小值；\n- 若 $t=1$，则第 $i$ 行包含两个整数，分别表示：\n  - 第 $i$ 轮跳跃中，Yuki 跳跃后踩到黑色位置的次数的最小值；\n  - 第 $i$ 轮跳跃中，在最小化 Yuki 跳跃后踩到黑色位置的次数的基础上，Yuki 跳跃次数的最小值。", "hint": "### 样例 1 解释\n\n对于第 $1$ 轮跳跃：\n\n- 唯一一种满足条件的跳跃方式为 $1 \\to 3 \\to 5 \\to 7$；\n- $1 \\to 2 \\to5\\to7$ 不满足条件，因为 Yuki 的跳跃能力为 $2$，无法从位置 $2$ 跳跃至位置 $5$；\n- $1 \\to 2 \\to 4 \\to 6\\to 7$ 不满足条件，因为没有最小化跳跃次数。\n\n对于第 $2$ 轮跳跃，唯一一种满足要求的跳跃方式为 $7 \\to 5$。\n\n对于第 $3$ 轮跳跃，满足要求的跳跃方式有 $2 \\to 3 \\to 5$ 和 $2 \\to 4 \\to 5$。\n\n### 样例 2\n\n见下发文件中的 $\\textbf{\\textit{jump/jump2.in}}$ 与 $\\textbf{\\textit{jump/jump2.ans}}$。\n\n该组样例满足测试点 $3$ 的限制。\n\n### 样例 3\n\n见下发文件中的 $\\textbf{\\textit{jump/jump3.in}}$ 与 $\\textbf{\\textit{jump/jump3.ans}}$。\n\n该组样例满足测试点 $7$ 的限制。\n\n### 样例 4\n\n见下发文件中的 $\\textbf{\\textit{jump/jump4.in}}$ 与 $\\textbf{\\textit{jump/jump4.ans}}$。\n\n该组样例满足测试点 $13$ 的限制。\n\n### 样例 5\n\n见下发文件中的 $\\textbf{\\textit{jump/jump5.in}}$ 与 $\\textbf{\\textit{jump/jump5.ans}}$。\n\n该组样例满足测试点 $15$ 的限制。\n\n### 样例 6\n\n见下发文件中的 $\\textbf{\\textit{jump/jump6.in}}$ 与 $\\textbf{\\textit{jump/jump6.ans}}$。\n\n该组样例满足测试点 $17$ 的限制。\n\n### 样例 7\n\n见下发文件中的 $\\textbf{\\textit{jump/jump7.in}}$ 与 $\\textbf{\\textit{jump/jump7.ans}}$。\n\n该组样例满足测试点 $19$ 的限制。\n\n### 样例 8\n\n见下发文件中的 $\\textbf{\\textit{jump/jump8.in}}$ 与 $\\textbf{\\textit{jump/jump8.ans}}$。\n\n该组样例满足测试点 $25$ 的限制。\n\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $2 \\le n\\le 5\\times10^5$，$1 \\le q \\le 5\\times10^5$；\n- $1 \\le k \\lt n$，$t \\in \\{0,1\\}$，$s_i \\in \\{\\texttt 0,\\texttt 1\\}$；\n- $1 \\le a_i,b_i \\le n$，$s_{a_i}=s_{b_i}=\\texttt 1$，$a_i \\ne b_i$。\n\n**保证对于所有编号为奇数的测试点都满足 $\\boldsymbol{t=1}$，对于所有编号为偶数的测试点都满足 $\\boldsymbol{t=0}$。**\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\le$ | $q \\le$ | 特殊性质 |\n| :--------: | :-----: | :-----: | :------: |\n|    $1\\sim2$     |  $400$  |  $400$  |    C     |\n|    $3\\sim4$     |  $400$  |  $400$  |    无    |\n|    $5\\sim6$     |  $2000$  |  $2000$  |    C     |\n|    $7\\sim10$     |  $2000$  |  $2000$  |    无    |\n|    $11\\sim12$     |  $2000$  |  $5\\times10^5$  |    C     |\n|    $13\\sim14$     |  $2000$  |  $5\\times10^5$  |    无    |\n| $15\\sim16$ | $5\\times10^5$ | $5\\times10^5$ | A |\n| $17\\sim18$ | $5\\times10^5$ | $5\\times10^5$ | B |\n| $19\\sim20$ | $5\\times10^5$ | $5\\times10^5$ | C |\n| $21\\sim25$ | $5\\times10^5$ | $5\\times10^5$ | 无 |\n\n- 特殊性质 A：保证 $k=1$。\n- 特殊性质 B：保证对于任意小于 $n$ 的正整数 $i$，都满足 $s_i$ 和 $s_{i+1}$ 中**至多**有一个 $\\texttt{0}$。\n- 特殊性质 C：保证**不存在**不大于 $n-k+1$ 的正整数 $i$，满足 $s_i$ 至 $s_{i+k-1}$ 均为 $\\texttt 0$。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "跳跃", "background": "", "description": "Yuki 是一个可可爱爱的小魔女！\n\nYuki 的面前有一条长度为 $n$ 的斑马线，其可以用一个长度为 $n$ 的 $\\texttt{01}$ 串 $s$ 描述（下标从 $1$ 开始）：\n\n- 若 $s_i=\\texttt 0$，则表示这条斑马线上的第 $i$ 个位置为黑色；\n- 若 $s_i=\\texttt 1$，则表示这条斑马线上的第 $i$ 个位置为白色。\n\n同时，Yuki 有一个跳跃能力 $k$，表示当她位于位置 $x$ 时，她可以通过一次跳跃，移动到任意一个满足 $\\max(1,x-k)\\le y\\le \\min(n,x+k)$ 的位置 $y$。\n\n接下来，Yuki 会在斑马线上进行 $q$ 轮跳跃：\n\n- 第 $i$ 轮跳跃中，Yuki 初始时位于位置 $a_i$，她希望通过若干次跳跃**恰好**移动到位置 $b_i$；其中，**保证位置 $\\boldsymbol{a_i}$ 和位置 $\\boldsymbol{b_i}$ 均为白色且 $\\boldsymbol{a_i}$ 不等于 $\\boldsymbol{b_i}$**，即 $s_{a_i}=s_{b_i}=\\texttt 1$ 且 $a_i \\ne b_i$。\n- 若 $t=0$，则 Yuki 只希望最小化她跳跃后踩到黑色位置的次数；若 $t=1$，则 Yuki 希望在最小化她跳跃后踩到黑色位置的次数的基础上，最小化跳跃次数。\n\nYuki 需要你帮助她求出每轮跳跃的答案。\n\n（在斑马线上嬉戏打闹是不好的行为，小朋友不要学！）", "inputFormat": "第一行包含五个整数 $c,n,q,k,t$，其中 $c$ 表示测试点编号。$c=0$ 表示该测试点为样例。\n\n第二行包含一个长度为 $n$ 的 $\\texttt{01}$ 串 $s$。\n\n接下来 $q$ 行，第 $i$ 行包含两个整数 $a_i,b_i$。", "outputFormat": "输出 $q$ 行：\n\n- 若 $t=0$，则第 $i$ 行包含一个整数，表示第 $i$ 轮跳跃中，Yuki 跳跃后踩到黑色位置的次数的最小值；\n- 若 $t=1$，则第 $i$ 行包含两个整数，分别表示：\n  - 第 $i$ 轮跳跃中，Yuki 跳跃后踩到黑色位置的次数的最小值；\n  - 第 $i$ 轮跳跃中，在最小化 Yuki 跳跃后踩到黑色位置的次数的基础上，Yuki 跳跃次数的最小值。", "hint": "### 样例 1 解释\n\n对于第 $1$ 轮跳跃：\n\n- 唯一一种满足条件的跳跃方式为 $1 \\to 3 \\to 5 \\to 7$；\n- $1 \\to 2 \\to5\\to7$ 不满足条件，因为 Yuki 的跳跃能力为 $2$，无法从位置 $2$ 跳跃至位置 $5$；\n- $1 \\to 2 \\to 4 \\to 6\\to 7$ 不满足条件，因为没有最小化跳跃次数。\n\n对于第 $2$ 轮跳跃，唯一一种满足要求的跳跃方式为 $7 \\to 5$。\n\n对于第 $3$ 轮跳跃，满足要求的跳跃方式有 $2 \\to 3 \\to 5$ 和 $2 \\to 4 \\to 5$。\n\n### 样例 2\n\n见下发文件中的 $\\textbf{\\textit{jump/jump2.in}}$ 与 $\\textbf{\\textit{jump/jump2.ans}}$。\n\n该组样例满足测试点 $3$ 的限制。\n\n### 样例 3\n\n见下发文件中的 $\\textbf{\\textit{jump/jump3.in}}$ 与 $\\textbf{\\textit{jump/jump3.ans}}$。\n\n该组样例满足测试点 $7$ 的限制。\n\n### 样例 4\n\n见下发文件中的 $\\textbf{\\textit{jump/jump4.in}}$ 与 $\\textbf{\\textit{jump/jump4.ans}}$。\n\n该组样例满足测试点 $13$ 的限制。\n\n### 样例 5\n\n见下发文件中的 $\\textbf{\\textit{jump/jump5.in}}$ 与 $\\textbf{\\textit{jump/jump5.ans}}$。\n\n该组样例满足测试点 $15$ 的限制。\n\n### 样例 6\n\n见下发文件中的 $\\textbf{\\textit{jump/jump6.in}}$ 与 $\\textbf{\\textit{jump/jump6.ans}}$。\n\n该组样例满足测试点 $17$ 的限制。\n\n### 样例 7\n\n见下发文件中的 $\\textbf{\\textit{jump/jump7.in}}$ 与 $\\textbf{\\textit{jump/jump7.ans}}$。\n\n该组样例满足测试点 $19$ 的限制。\n\n### 样例 8\n\n见下发文件中的 $\\textbf{\\textit{jump/jump8.in}}$ 与 $\\textbf{\\textit{jump/jump8.ans}}$。\n\n该组样例满足测试点 $25$ 的限制。\n\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $2 \\le n\\le 5\\times10^5$，$1 \\le q \\le 5\\times10^5$；\n- $1 \\le k \\lt n$，$t \\in \\{0,1\\}$，$s_i \\in \\{\\texttt 0,\\texttt 1\\}$；\n- $1 \\le a_i,b_i \\le n$，$s_{a_i}=s_{b_i}=\\texttt 1$，$a_i \\ne b_i$。\n\n**保证对于所有编号为奇数的测试点都满足 $\\boldsymbol{t=1}$，对于所有编号为偶数的测试点都满足 $\\boldsymbol{t=0}$。**\n\n::cute-table{tuack}\n\n| 测试点编号 | $n \\le$ | $q \\le$ | 特殊性质 |\n| :--------: | :-----: | :-----: | :------: |\n|    $1\\sim2$     |  $400$  |  $400$  |    C     |\n|    $3\\sim4$     |  $400$  |  $400$  |    无    |\n|    $5\\sim6$     |  $2000$  |  $2000$  |    C     |\n|    $7\\sim10$     |  $2000$  |  $2000$  |    无    |\n|    $11\\sim12$     |  $2000$  |  $5\\times10^5$  |    C     |\n|    $13\\sim14$     |  $2000$  |  $5\\times10^5$  |    无    |\n| $15\\sim16$ | $5\\times10^5$ | $5\\times10^5$ | A |\n| $17\\sim18$ | $5\\times10^5$ | $5\\times10^5$ | B |\n| $19\\sim20$ | $5\\times10^5$ | $5\\times10^5$ | C |\n| $21\\sim25$ | $5\\times10^5$ | $5\\times10^5$ | 无 |\n\n- 特殊性质 A：保证 $k=1$。\n- 特殊性质 B：保证对于任意小于 $n$ 的正整数 $i$，都满足 $s_i$ 和 $s_{i+1}$ 中**至多**有一个 $\\texttt{0}$。\n- 特殊性质 C：保证**不存在**不大于 $n-k+1$ 的正整数 $i$，满足 $s_i$ 至 $s_{i+k-1}$ 均为 $\\texttt 0$。", "locale": "zh-CN"}}}
{"pid": "P14564", "type": "P", "difficulty": 6, "samples": [["0 3 4\n1 2\n2 3\n2 2\n3 1", "2"]], "limits": {"time": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000], "memory": [524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288, 524288]}, "tags": ["线段树"], "title": "圆环", "background": "", "description": "Yuki 是一个喜欢玩游戏的机器人！\n\nYuki 最喜欢玩的游戏的规则如下：\n\n- 游戏在一个长度为 $n$ 的圆环上进行，其中位置 $i$ 与位置 $(i \\bmod n)+1$ 相邻；初始时，Yuki 的两只手分别位于位置 $1$ 和位置 $n$；在游戏过程中，Yuki 可以花费一点体力，将其中一只手移动到**相邻**的一个位置上。\n- 这个圆环上一共会出现 $m$ 个音符；在第 $x_i$ 秒时，位置 $y_i$ 会出现一个音符，此时需要满足 Yuki 有**至少一只手**位于位置 $y_i$，否则 Yuki 将输掉游戏；若 Yuki 完成了所有的要求，那么称她完成了游戏。\n- 保证没有音符重叠；即对于每对满足 $1 \\le i \\lt j \\le m$ 的正整数 $i,j$，保证 $x_i\\ne x_j$ 或 $y_i \\ne y_j$。\n- 保证每个时刻最多有两个音符；即对于每个正整数 $t$，保证满足 $x_i=t$ 的正整数 $i$ 不超过两个。\n\n由于 Yuki 是一个机器人，所以她玩这个游戏很有优势——不论怎么移动，她的手都不会打结，并且她的两只手也可以移动到相同的位置上。\n\n现在，Yuki 想让你帮助她求出，她完成游戏至少要花费多少点体力。容易证明 Yuki 一定可以完成游戏。", "inputFormat": "第一行包含三个整数 $c,n,m$，其中 $c$ 表示测试点编号。$c=0$ 表示该测试点为样例。\n\n接下来 $m$ 行，第 $i$ 行包含两个整数 $x_i,y_i$。", "outputFormat": "输出一行，包含一个整数，表示她完成游戏所至少要花费的体力的点数。", "hint": "### 样例 2\n\n见下发文件中的 $\\textbf{\\textit{circle/circle2.in}}$ 与 $\\textbf{\\textit{circle/circle2.ans}}$。\n\n该组样例满足测试点 $3$ 的限制。\n\n### 样例 3\n\n见下发文件中的 $\\textbf{\\textit{circle/circle3.in}}$ 与 $\\textbf{\\textit{circle/circle3.ans}}$。\n\n该组样例满足测试点 $7$ 的限制。\n\n### 样例 4\n\n见下发文件中的 $\\textbf{\\textit{circle/circle4.in}}$ 与 $\\textbf{\\textit{circle/circle4.ans}}$。\n\n该组样例满足测试点 $13$ 的限制。\n\n### 样例 5\n\n见下发文件中的 $\\textbf{\\textit{circle/circle5.in}}$ 与 $\\textbf{\\textit{circle/circle5.ans}}$。\n\n该组样例满足测试点 $16$ 的限制。\n\n### 样例 6\n\n见下发文件中的 $\\textbf{\\textit{circle/circle6.in}}$ 与 $\\textbf{\\textit{circle/circle6.ans}}$。\n\n该组样例满足测试点 $18$ 的限制。\n\n### 样例 7\n\n见下发文件中的 $\\textbf{\\textit{circle/circle7.in}}$ 与 $\\textbf{\\textit{circle/circle7.ans}}$。\n\n该组样例满足测试点 $25$ 的限制。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $2 \\le n \\le 3\\times10^5$，$1 \\le m \\le 3\\times10^5$；\n- $1 \\le x_i \\le m$，$1 \\le y_i \\le n$；\n- 对于每对满足 $1 \\le i \\lt j \\le m$ 的正整数 $i,j$，$x_i\\ne x_j$ 或 $y_i \\ne y_j$；\n- 对于每个正整数 $t$，满足 $x_i=t$ 的正整数 $i$ 不超过两个。\n\n::cute-table{tuack}\n\n| 测试点编号 |   $n,m \\le$   | 特殊性质 |\n| :--------: | :-----------: | :------: |\n|  $1\\sim2$  |     $20$      |    无    |\n|  $3\\sim4$  |     $80$      |    无    |\n|    $5$     |     $400$     |    A     |\n|    $6$     |     $400$     |    B     |\n|  $7\\sim8$  |     $400$     |    无    |\n| $9\\sim10$  | $5\\times10^3$ |    A     |\n| $11\\sim12$ | $5\\times10^3$ |    B     |\n| $13\\sim15$ | $5\\times10^3$ |    无    |\n| $16\\sim17$ | $3\\times10^5$ |    A     |\n| $18\\sim21$ | $3\\times10^5$ |    B     |\n| $22\\sim25$ | $3\\times10^5$ |    无    |\n\n- 特殊性质 A：对于每个正整数 $t$，保证满足 $x_i=t$ 的正整数 $i$ 的数量为偶数。\n- 特殊性质 B：对于每个正整数 $t$，保证满足 $x_i=t$ 的正整数 $i$ 不超过一个。", "locale": "zh-CN", "translations": {"zh-CN": {"title": "圆环", "background": "", "description": "Yuki 是一个喜欢玩游戏的机器人！\n\nYuki 最喜欢玩的游戏的规则如下：\n\n- 游戏在一个长度为 $n$ 的圆环上进行，其中位置 $i$ 与位置 $(i \\bmod n)+1$ 相邻；初始时，Yuki 的两只手分别位于位置 $1$ 和位置 $n$；在游戏过程中，Yuki 可以花费一点体力，将其中一只手移动到**相邻**的一个位置上。\n- 这个圆环上一共会出现 $m$ 个音符；在第 $x_i$ 秒时，位置 $y_i$ 会出现一个音符，此时需要满足 Yuki 有**至少一只手**位于位置 $y_i$，否则 Yuki 将输掉游戏；若 Yuki 完成了所有的要求，那么称她完成了游戏。\n- 保证没有音符重叠；即对于每对满足 $1 \\le i \\lt j \\le m$ 的正整数 $i,j$，保证 $x_i\\ne x_j$ 或 $y_i \\ne y_j$。\n- 保证每个时刻最多有两个音符；即对于每个正整数 $t$，保证满足 $x_i=t$ 的正整数 $i$ 不超过两个。\n\n由于 Yuki 是一个机器人，所以她玩这个游戏很有优势——不论怎么移动，她的手都不会打结，并且她的两只手也可以移动到相同的位置上。\n\n现在，Yuki 想让你帮助她求出，她完成游戏至少要花费多少点体力。容易证明 Yuki 一定可以完成游戏。", "inputFormat": "第一行包含三个整数 $c,n,m$，其中 $c$ 表示测试点编号。$c=0$ 表示该测试点为样例。\n\n接下来 $m$ 行，第 $i$ 行包含两个整数 $x_i,y_i$。", "outputFormat": "输出一行，包含一个整数，表示她完成游戏所至少要花费的体力的点数。", "hint": "### 样例 2\n\n见下发文件中的 $\\textbf{\\textit{circle/circle2.in}}$ 与 $\\textbf{\\textit{circle/circle2.ans}}$。\n\n该组样例满足测试点 $3$ 的限制。\n\n### 样例 3\n\n见下发文件中的 $\\textbf{\\textit{circle/circle3.in}}$ 与 $\\textbf{\\textit{circle/circle3.ans}}$。\n\n该组样例满足测试点 $7$ 的限制。\n\n### 样例 4\n\n见下发文件中的 $\\textbf{\\textit{circle/circle4.in}}$ 与 $\\textbf{\\textit{circle/circle4.ans}}$。\n\n该组样例满足测试点 $13$ 的限制。\n\n### 样例 5\n\n见下发文件中的 $\\textbf{\\textit{circle/circle5.in}}$ 与 $\\textbf{\\textit{circle/circle5.ans}}$。\n\n该组样例满足测试点 $16$ 的限制。\n\n### 样例 6\n\n见下发文件中的 $\\textbf{\\textit{circle/circle6.in}}$ 与 $\\textbf{\\textit{circle/circle6.ans}}$。\n\n该组样例满足测试点 $18$ 的限制。\n\n### 样例 7\n\n见下发文件中的 $\\textbf{\\textit{circle/circle7.in}}$ 与 $\\textbf{\\textit{circle/circle7.ans}}$。\n\n该组样例满足测试点 $25$ 的限制。\n\n### 数据范围\n\n对于所有测试数据，保证：\n\n- $2 \\le n \\le 3\\times10^5$，$1 \\le m \\le 3\\times10^5$；\n- $1 \\le x_i \\le m$，$1 \\le y_i \\le n$；\n- 对于每对满足 $1 \\le i \\lt j \\le m$ 的正整数 $i,j$，$x_i\\ne x_j$ 或 $y_i \\ne y_j$；\n- 对于每个正整数 $t$，满足 $x_i=t$ 的正整数 $i$ 不超过两个。\n\n::cute-table{tuack}\n\n| 测试点编号 |   $n,m \\le$   | 特殊性质 |\n| :--------: | :-----------: | :------: |\n|  $1\\sim2$  |     $20$      |    无    |\n|  $3\\sim4$  |     $80$      |    无    |\n|    $5$     |     $400$     |    A     |\n|    $6$     |     $400$     |    B     |\n|  $7\\sim8$  |     $400$     |    无    |\n| $9\\sim10$  | $5\\times10^3$ |    A     |\n| $11\\sim12$ | $5\\times10^3$ |    B     |\n| $13\\sim15$ | $5\\times10^3$ |    无    |\n| $16\\sim17$ | $3\\times10^5$ |    A     |\n| $18\\sim21$ | $3\\times10^5$ |    B     |\n| $22\\sim25$ | $3\\times10^5$ |    无    |\n\n- 特殊性质 A：对于每个正整数 $t$，保证满足 $x_i=t$ 的正整数 $i$ 的数量为偶数。\n- 特殊性质 B：对于每个正整数 $t$，保证满足 $x_i=t$ 的正整数 $i$ 不超过一个。", "locale": "zh-CN"}}}
